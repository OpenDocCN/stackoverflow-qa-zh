# StackOverflow 问答 11081000-11081999

# c++ - 在 Windows 7 上通过 QTcpSocket 流式传输图像

> ID：11081005
> 
> 赞同：2
> 
> 时间：2012-06-18T10:29:30.793
> 
> 标签：c++, windows, qt, tcp, streaming

我正在尝试创建两个基于 QTcpSocket 的测试应用程序，一个流式传输（未压缩）图像的服务器和一个接收它们的客户端。

我的代码主要取自 Qts [Fortune Client Example](http://qt-project.org/doc/qt-4.8/network-fortuneclient.html) 和[Fortune Server Example](http://qt-project.org/doc/qt-4.8/network-fortuneserver.html)。我已经删掉了所有的gui。我的服务器没有打开连接、发送财富然后立即关闭它，而是保持它打开并不断地流式传输我的图像。客户端只是从 QTcpSocket 读取图像然后丢弃它们。

我发送的图像是 800x600 RGB（=1440000 字节），我会尽可能频繁地发送它。每次发送之前都会从文件中读取图像，并且我没有使用任何压缩。

服务器似乎正在按应有的方式发送图像。但是客户端接收它们的速度太慢了，每秒 1-4 帧，而且有时似乎没有接收到任何数据，这反过来又导致我的服务器使用大量内存（因为客户端的读取速度不如服务器正在写入）。

我试过在不同的机器上运行我的服务器和客户端，并且都在一台机器上，两种设置都会产生同样的问题。

在 Linux 机器上运行我的应用程序时，客户端以更高的速率接收图像（认为它是每秒 14 帧）。客户端似乎能够像服务器写入一样快地读取。

任何人都可以帮助阐明这个问题吗？

1.  如何加快数据传输速度？（不使用压缩）
2.  如何让客户端的读取速度与服务器的写入速度一样快？
3.  我怎样才能让它在我的 Windows 机器上保持稳定？（没有突然的停顿......）在客户端的控制台窗口中单击有时似乎会“唤醒”应用程序顺便说一句。^^

这是我的代码：

服务器：

主文件

```
#include <iostream>
#include <QCoreApplication>
#include "Server.h"

int main(int argc, char *argv[]){
    QCoreApplication app(argc, argv);
    QString ipaddress = QString(argv[1]);
    int port = atoi(argv[2]);
    Server* server = new Server(ipaddress, port);
    int retVal = app.exec();
    return retVal;
} 
```

服务器.h

```
#ifndef SERVER_H_
#define SERVER_H_

#include <QObject>

QT_BEGIN_NAMESPACE
class QTcpServer;
class QNetworkSession;
class QTcpSocket;
class QTimer;
QT_END_NAMESPACE

class Server : public QObject
{
    Q_OBJECT

public:
    Server(QString ipAddress, int port, QObject *parent = 0);

private slots:
    void newConnectionSlot();
    void sendSlot();

private:
    QTcpServer          *mTcpServer;
    QTcpSocket          *mTcpSocket;
    QTimer              *mSendTimer;
};

#endif /* SERVER_H_ */ 
```

服务器.cpp

```
#include "Server.h"
#include <iostream>
#include <QTcpServer>
#include <QTcpSocket>
#include <QTimer>
#include <QDateTime>
#include <QSettings>
#include <highgui.h>

Server::Server(QString ipAddress, int port, QObject *parent) :
    QObject(parent), mTcpServer(0), mTcpSocket(0)
{
    mTcpServer = new QTcpServer(this);
    connect(mTcpServer, SIGNAL(newConnection()), this, SLOT(newConnectionSlot()));
    if (!mTcpServer->listen(QHostAddress(ipAddress), port)) {
        std::cout << "Unable to start the server: " << mTcpServer->errorString().toStdString() << std::endl;
        return;
    }

    std::cout << "The server is running on\n\nIP: "<< ipAddress.toStdString()
            << "\nport: " << mTcpServer->serverPort() << "\n\nRun the Client now.\n" << std::endl;
}

void Server::newConnectionSlot()
{
    mTcpSocket = mTcpServer->nextPendingConnection();
    connect(mTcpSocket, SIGNAL(disconnected()),
            mTcpSocket, SLOT(deleteLater()));

    // setup timer to send data at a given interval
    mSendTimer = new QTimer(this);
    connect(mSendTimer, SIGNAL(timeout()),
            this, SLOT(sendSlot()));
    mSendTimer->start(40);
}

void Server::sendSlot()
{
    if(!mTcpSocket)
        return;

    //know that the image is this big
    int width = 800;
    int height = 600;
    int nChannels = 3;
    int depth = 8;
    qint64 blockSize = 1440000; //in bytes

    qint64 imagesInQue = mTcpSocket->bytesToWrite()/blockSize;
    int maxPendingImages = 25;
    if(imagesInQue > maxPendingImages)
    {
        std::cout << "Dumping." << std::endl;
        return;
    }

    //load image
    IplImage* img = cvLoadImage("pic1_24bit.bmp");
    if(!img)
        std::cout << "Error loading image " << std::endl;;

    //send data
    quint64 written = mTcpSocket->write(img->imageData, img->imageSize);

    //clean up
    cvReleaseImage( &img );
} 
```

客户：

主文件

```
#include <iostream>
#include <QCoreApplication>

#include "Client.h"

int main(int argc, char *argv[]){
    QCoreApplication app(argc, argv);
    QString ipaddress = QString(argv[1]);
    int port = atoi(argv[2]);
    Client* client = new Client(ipaddress, port);
    int retVal = app.exec();
} 
```

客户端.h

```
#ifndef CLIENT_H_
#define CLIENT_H_

#include <QObject>
#include <QAbstractSocket>

QT_BEGIN_NAMESPACE
class QTcpSocket;
QT_END_NAMESPACE

class Client : public QObject
{
    Q_OBJECT
public:
    Client(QString ipAddress, int port, QObject *parent=0);

private slots:
    void readSlot();
    void displayErrorSlot(QAbstractSocket::SocketError);

private:
    QTcpSocket          *mTcpSocket;
    QString             mIpAddress;
    int                 mPort;
};

#endif /* CLIENT_H_ */ 
```

客户端.cpp

```
#include "Client.h"
#include <iostream>
#include <QTcpSocket>
#include <QSettings>
#include <QDateTime>

Client::Client(QString ipAddress, int port, QObject *parent):
    QObject(parent), mTcpSocket(0), mIpAddress(ipAddress), mPort(port)
{
    mTcpSocket = new QTcpSocket(this);
    connect(mTcpSocket, SIGNAL(readyRead()),
            this, SLOT(readSlot()));
    connect(mTcpSocket, SIGNAL(error(QAbstractSocket::SocketError)),
            this, SLOT(displayErrorSlot(QAbstractSocket::SocketError)));

    std::cout << "Connecting to ip: " << mIpAddress.toStdString() << " port: " << mPort << std::endl;
    mTcpSocket->connectToHost(mIpAddress, mPort);
}

void Client::readSlot()
{
    static qint64 starttime = QDateTime::currentMSecsSinceEpoch();
    static int frames = 0;

    //know that the image is this big
    int width = 800;
    int height = 600;
    int nChannels = 3;
    int depth = 8;
    qint64 blockSize = 1440000; //in bytes

    if (mTcpSocket->bytesAvailable() < blockSize)
    {
        return;
    }
    frames++;

    char* data = (char*) malloc(blockSize+100);
    qint64 bytesRead = mTcpSocket->read(data, blockSize);

    free(data);

    //FPS
    if(frames % 100 == 0){
        float fps = frames/(QDateTime::currentMSecsSinceEpoch() - starttime);
        std::cout << "FPS: " << fps << std::endl;
    }
}

void Client::displayErrorSlot(QAbstractSocket::SocketError socketError)
{
    switch (socketError) {
    case QAbstractSocket::RemoteHostClosedError:
        break;
    case QAbstractSocket::HostNotFoundError:
        std::cout << "The host was not found. Please check the "
                                    "host name and port settings."<< std::endl;
        break;
    case QAbstractSocket::ConnectionRefusedError:
        std::cout << "The connection was refused by the peer. "
                                    "Make sure the fortune server is running, "
                                    "and check that the host name and port "
                                    "settings are correct."<< std::endl;
        break;
    default:
        std::cout << "The following error occurred: " << mTcpSocket->errorString().toStdString() << std::endl;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:57:06.243

1.  You are miscounting your frames. You must increment the frame counter after the `mTcpSocket->bytesAvailable() < blockSize` test! That's the source of your non-problem: it works OK, but you miscount the frames. That's also why it "works better" on Linux: the network stack there is buffering the data differently, giving you less signals.

2.  You must limit the amount of memory *on the wire* (buffered) on the server end. Otherwise, as you correctly noticed, you'll run out of memory. See my [other answer](https://stackoverflow.com/a/10979106/1329652) for an example of how to do it.

3.  You're never freeing the memory you `malloc()` in the receiver. Be aware that you should expect to consume 35 megabytes of RAM per second if the server really sends at 40ms intervals. The receiver may well get bogged down very quickly by that memory leak. That's probably the source of the trouble.

4.  What is that `QDataStream` for? You're not using a datastream to send the image, and there's no use for it on the receiving end either.

# ios - XCode 4.3.3 - 用于 Wifi 测试的“iOS 发现设备”选项丢失

> ID：11081012
> 
> 赞同：0
> 
> 时间：2012-06-18T10:30:24.710
> 
> 标签：ios, xcode, wifi

我正在寻找通过 WiFi 在 iPad 上测试我的应用程序，在互联网上我找到了响应，但我的 Xcode 4.3.3 版本不存在**“iOS 发现设备 - 支持无线连接设备”选项。**

有谁能够帮助我？苹果改变了这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:31:58.160

[检查这个 Stackoverflow 答案](https://stackoverflow.com/a/7857052/1002727)。长话短说（来自该链接）：

> 编辑：此功能自 Xcode 4.3.1 起不再可用，稍后会在问题较少时重新出现（他们在 4.4 版中估计）。

所以我建议你检查 Xcode 4.5 的开发者预览版。

# c - 在 C++/CLI 中使用 C 结构，调用约定问题

> ID：11081016
> 
> 赞同：2
> 
> 时间：2012-06-18T10:30:44.803
> 
> 标签：c, c++-cli, calling-convention

我在我的 C++/CLI 项目中使用[lib_usb](http://www.libusb.org/)，我需要`usb_get_busses`在我的托管 C++/CLI 代码中使用它的函数和其他一些函数。

使用一个 managed`AutoPtr`创建`usb_bus`结构如下：

`AutoPtr<struct usb_bus> bus;`

现在我需要调用该`usb_get_busses`函数，但是链接器似乎对调用约定不满意。CLR 使用 clrcall 调用约定，显然 C 使用`__cdecl`.

`usb_bus* usb_get_busses(void)`<--- C 函数的签名。

现在如何让自己能够`lib_usb`在 C++/CLI 中使用？我是否必须创建一个 C++/CLI 包装器或其他东西？

链接器吐出这条消息：

> 错误 LNK2031：无法为“extern "C" struct usb_bus * __clrcall usb_get_busses(void)”生成 p/invoke (?usb_get_busses@@$$J0YMPAUusb_bus@@XZ)；元数据中缺少调用约定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:42:09.907

根本没有指定`__cdecl`。查看链接器错误 - 它清楚地说明了`__clrcall`。尝试用 . 明确指定它`__cdecl`。

# python - 如何在 PyQt4 中将事件监听器添加到动态 QTableWidgetItem？

> ID：11081017
> 
> 赞同：1
> 
> 时间：2012-06-18T10:30:53.540
> 
> 标签：python, qt, event-handling, pyqt4, qtablewidget

我是 Python 和 Qt 新手...

我正在开发一个 GUI 程序，它显示一`QTableWidget`开始使用的数据列表。

使用该`setItem()`方法将行插入到表中。它们是`QTableWidgetItem`对象。

**现在我想允许用户单击选择某一行（`QTableWidgetItem`），我的程序将填充一个辅助`QTableWidget`.**

我了解到有一种东西叫做 Signal and Slot。我会用那个吗？也有使用的例子`installEventFilter()`，但不适合`QTableWidgetItem`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T12:31:34.187

最简单的方法就是使用`itemClicked`QTableWidget 的 -signal：

```
def handle_item_clicked(tableItem):
    #the callback, called when an item is clicked, with the item as an argument
    #populate the secondary table in some way

#register the callback with the QTableWidget
yourTableWidget.itemClicked.connect(handle_item_clicked) 
```

您还可以使用`currentItemChanged`为您提供当前和先前选择的信号（例如，如果用户取消选择一个项目，您可以清除或隐藏您的辅助小部件，在这种情况下，当前项目将为无）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:32:13.697

Qt 没有“事件监听器”。正如您所提到的，您可以通过[将](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qobject.html#connect-3)信号连接到插槽来执行此类操作。

例如：

```
QObject.connect(myTableWidget, QtCore.SIGNAL("clicked()"), self.foobar) 
```

这将导致`self.foobar()`在您单击 时调用该方法`myTableWidget`。foob​​ar 函数可以检索[选择了哪个项目](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtablewidget.html#selectedItems)并基于此填充第二个小部件。

请注意，在 的最后一个参数中`connect`，您不使用括号 ( `foobar()`)，只使用方法名称！

# javascript - GetCitiesByRegion 没有定义？

> ID：11081020
> 
> 赞同：0
> 
> 时间：2012-06-18T10:31:07.020
> 
> 标签：javascript, jquery

我有一个页面，我有一个看起来像这样的链接：

```
<a href="#" onclick="GetCitiesByRegion('{181AC78C-94F4-486E-B1C7-CFA62C4FA4D3}')" title="Nordjylland" class="nordjylland" data-class="mapdk nordjylland"><span>Nordjylland</span></a> 
```

在我的 Javascript 文件中，我有一个名为 GetCitiesByRegion() 的函数，但是，当单击链接时，我得到一个错误，说 GetCitiesByRegion 没有定义？

该函数如下所示：

```
function GetCitiesByRegion(id) {

    var params = '{"id":"' + id + '"}'

    var request = {
        type: "GET",
        async: false,
        cache: false,
        url: "http://" + location.hostname + "/webservices/services.svc/GetCitiesByRegion",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: params,
        success: function (result) {
            alert("Data Loaded: " + result);
        },
        error: function (xhr, status, error) {
            alert('Fejl ved webservice: error: ' + error);
        }
    };

    $jq.ajax(request);
} 
```

# selenium - WebDriver 忽略平台能力

> ID：11081021
> 
> 赞同：4
> 
> 时间：2012-06-18T10:31:08.393
> 
> 标签：selenium, webdriver

当我创建 Selenium RemoteWebDriver 的实例时

```
 DesiredCapabilities cap = new DesiredCapabilities("firefox", "13", Platform.VISTA);
    RemoteWebDriver driver = new RemoteWebDriver(cap); 
```

并查看里面的功能，我看到了**platform=XP**。

整个问题也在[这里描述](http://code.google.com/p/selenium/issues/detail?can=2&start=0&num=100&q=Platform%20Vista&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=3354)

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:03:00.783

我今天遇到了同样的问题。如果您遇到的就像人们在[链接的错误](http://code.google.com/p/selenium/issues/detail?can=2&start=0&num=100&q=Platform%20Vista&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=3354)中一样，那实际上只是默认节点配置的问题。您可以使用 json 文件手动设置节点配置，如此[处](http://code.google.com/p/selenium/wiki/Grid2)所述，在“通过 JSON 配置节点”下。

如果在您的每个节点上，您都有一个唯一的 json 文件，其中包含以下条目：

```
{
  "platform": "VISTA",
  "browserName": "internet explorer",
  "maxInstances": 1,
  "seleniumProtocol": "WebDriver"
} 
```

替换`VISTA`为您想要的平台名称，节点将只响应这些请求，并且将适当地创建 RemoteWebDrivers！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:46:44.993

[在这里](http://code.google.com/p/selenium/issues/detail?can=2&start=0&num=100&q=Platform%20Vista&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=3354)找到错误描述。期待修复。

# asp.net - 需要有关 HTML 5 图表和仪表组件的咨询

> ID：11081024
> 
> 赞同：0
> 
> 时间：2012-06-18T10:31:11.490
> 
> 标签：asp.net, html, charts, export-to-pdf, gauge

我需要在 asp.net 中开发一个 Web 应用程序，该应用程序需要显示支持 HTML 5 的 -bar 图表 -pie 图表、-gauges、-grids。并能够以 PDF 格式导出内容。

作为一个 winforms 开发人员，我不熟悉 Web 技术。我找到了这些组件 -Telerik 网络图表--我没有看到仪表控制 -Devxpress--没有关于 HTML 5 支持的信息 -Kendo UI--低导出功能

您能否建议一些其他组件或评论这些以帮助我选择合适的组件？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:38:29.087

我有相同的要求（除了后端技术可以是我想要的任何东西）并最终在服务器上创建图表作为图像。有点内存密集，但工作得非常好。我还创建了一个老式的图像映射，以方便客户端上的上下文感知鼠标悬停弹出窗口。

我这样做的主要原因是，无论我尝试了什么，在浏览器中显示的图表（用户可以使用他们想要的任何浏览器的难度增加）和 PDF 之间从来没有完美的契合。图片当然解决了这个问题。

# jquery - 使用 css 和 jquery 将样式更改为悬停样式

> ID：11081025
> 
> 赞同：0
> 
> 时间：2012-06-18T10:31:15.070
> 
> 标签：jquery, html, css

我正在尝试更改单击时保存我的链接的列表项的样式，因此该样式`<li>`将更改为悬停样式的样式。但是添加`$(this).addClass('hover');`似乎不起作用。任何帮助将不胜感激。

```
$('a.app1-preview').click(function() {
                    $(this).addClass('hover');
                    //do other things now:
            $('.app-preview-2').fadeOut("slow", function () {
                $('.app-preview-1').fadeIn("slow");

            });        
        }); 
```

我的 HTML 代码是：

```
 <div class="app-container">
                    <ul class="apps">
                      <li class="app1"> 
                          <a title href="#" class="app1-preview blocklink">
                                <span>ANOTHER<br /> APP</span>
                          </a> 
                      </li>
</ul></div> 
```

我的 CSS 是：

```
.app-container ul.apps li.app1 { border-color:#57b6dd; background:url(app-icons/app1.png) no-repeat 10px 10px; position:relative; }
.app-container ul.apps li.app1:hover { background:#57b6dd url(app-icons/app1-hover.png) no-repeat 10px 10px; color: #fff; border-color:#57b6dd;}
.app-container ul.apps li.app1 a { color: #57b6dd; }
.app-container ul.apps li.app1-inactive { border-color:#b2b2b2; background:url(app-icons/app1-inactive.png) no-repeat 10px 10px; position:relative; }
.app-container ul.apps li.app1-inactive:hover { background:#b2b2b2 url(app-icons/app1-hover.png) no-repeat 10px 10px; color: #fff; border-color:#b2b2b2;}
.app-container ul.apps li.app1-inactive a { color: #b2b2b2; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:35:24.757

你的 css中没有命名类`hover`，所以改为这样：

```
.hover { 
    background:#b2b2b2 url(app-icons/app1-hover.png) no-repeat 10px 10px; 
    color: #fff; 
    border-color:#b2b2b2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:35:46.347

:hover 仅适用于鼠标悬停。添加类悬停不会将 :hover 类分配给元素。

另一种方法可能是将 :hover 更改为 .hover

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:37:42.167

在悬停 CSS 中添加第二个 CSS 选择器：

```
.app-container ul.apps li.app1:hover,
.app-container ul.apps li.app1-hover
{
    background:#57b6dd url(app-icons/app1-hover.png) no-repeat 10px 10px; 
    color: #fff; 
    border-color:#57b6dd;
} 
```

现在在你需要的地方做：

```
$(this).addClass('app1-hover'); 
```

您将获得与悬停相同的样式，并且还将保留悬停 CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T10:38:38.063

您的 CSS 中没有悬停类。添加一个类悬停，然后使用 jquery 添加它。将此添加到您的CSS：

```
a.app1-preview.hover { 
 background:#57b6dd url(app-icons/app1-hover.png) no-repeat 10px 10px;
 color: #fff; border-color:#57b6dd;
} 
```

演示小提琴：http: [//jsfiddle.net/kKX86/1/](http://jsfiddle.net/kKX86/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T10:35:57.250

您应该能够`mouseenter`在元素上触发，并显示样式：

```
$('a.app1-preview').click(function() {
                    $(this).trigger('mouseenter');
                    //do other things now:
            $('.app-preview-2').fadeOut("slow", function () {
                $('.app-preview-1').fadeIn("slow");

            });        
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T10:35:59.867

您将`hover`类设置为您的`a`标签而不是您的`li`元素。

所以试试这个：

```
$('a.app1-preview').click(function() {
                    $(this).parent().addClass('hover');
                    //do other things now:
            $('.app-preview-2').fadeOut("slow", function () {
                $('.app-preview-1').fadeIn("slow");

            });        
        }); 
```

如果不存在，您应该添加一个名为`hover`您的 css 声明的悬停类。

# java - 将对象数组转换为集合持有类型T的指定子类的方法（生成JList）

> ID：11081031
> 
> 赞同：0
> 
> 时间：2012-06-18T10:31:45.617
> 
> 标签：java, swing, class, generics, jlist

只是为了学习的乐趣，我不需要替代解决方案（我知道 JList 在 Java7 中是通用的），谢谢！我正在寻找的是这样的......

```
 private <U,T> U<T> jListSelected2Coll(JList list, Class<U extends Collection<T>> type{
         Collection<T> coll = XX;//Getting an instance of type 
         Object[] array = list.getSelectedValues();
         Collections.addAll(coll, Arrays.copyOf(array, array.length, type.subtype_inside_the_T.class));
         return coll;
    } 
```

这将被称为类似

```
 TreeSet<String> selectedItems = jListSelected2Coll(list,TreeSet<String>.class) 
```

我知道它的复杂和特殊，但我不知道要遵循什么策略，也许是一些黑天鹅行动:)

有什么办法可以实现吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:58:43.827

不安全（它信任您，并且不检查您从 JList 获得的元素是正确的类型），但不需要传入 a `Class`：

```
@SuppressWarnings("unchecked")
public static <T> void addJListSelected2Coll(JList list, Collection<T> coll) {
    for (Object x : list.getSelectedValues())
        coll.add((T)x); // unchecked cast
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:08:51.670

由于 Java 类型擦除，您试图实现的目标不能直接在 Java 中完成。但是，有一些技巧几乎可以达到您的期望。

以下是两种解决方案（或多或少可以接受）：

```
public static <U extends Collection<T>, T> U jListSelected2Coll(
    JList list, U coll, Class<T> type2) throws InstantiationException,
        IllegalAccessException {
    Object[] array = list.getSelectedValues();
    T[] dest = (T[]) Array.newInstance(type2, array.length);
    System.arraycopy(array, 0, dest, 0, array.length);
    Collections.addAll(coll, dest);
    return coll;
}

public static void test() throws InstantiationException, IllegalAccessException {
    JList list = new JList();
    TreeSet<String> treeSet = jListSelected2Coll(list, new TreeSet<String>(), String.class);
    // do something with the treeSet
} 
```

第二种选择也“有效”，但不如第一种安全（因为你不能`Class<U extends Collection<T>>`用 Java 表达）：

```
public static <U extends Collection<T>, T> U jListSelected2Coll(
    JList list, Class<U> collType, Class<T> type2) throws InstantiationException,
        IllegalAccessException {
            U coll = collType.newInstance();
    Object[] array = list.getSelectedValues();
    T[] dest = (T[]) Array.newInstance(type2, array.length);
    System.arraycopy(array, 0, dest, 0, array.length);
    Collections.addAll(coll, dest);
    return coll;
}

public static void test() throws InstantiationException, IllegalAccessException {
    JList list = new JList();
    TreeSet<String> treeSet = jListSelected2Coll(list, TreeSet.class, String.class);
    // do something with the treeSet
} 
```

在这两种情况下，如果 JList 的选定值的类型不正确，您将`java.lang.ArrayStoreException`在 arraycopy 期间得到一个。

# c - 如何检查我的 C 代码正在使用的内存？

> ID：11081032
> 
> 赞同：3
> 
> 时间：2012-06-18T10:31:48.517
> 
> 标签：c, memory

我是一个新的 C 程序员，指针 + 数组让我很困惑。我没有收到任何错误并且代码运行良好......直到中间的某个地方代码开始起作用，因为数组中的某些元素被设置为我想要的其他东西。我想知道是否有一个程序可以在代码运行完成后将其内存可视化？

例如，在我运行之后：

```
#include<stdio.h>
int main(){
    int array[2] = {0,1};
    array[1] = 4;
    printf("%d\n",array[1]);
    } 
```

它将显示一块内存，其中数组有两个元素，分别为 0 和 4 。

现在为了避免遇到数组包含先前操作中的元素的问题，我通过执行以下操作清除该数组的内存：

```
memset(tokenized,0,MAX_CHARS); 
```

它似乎有效，但我不知道它是否真的在做我认为它在后端做的事情。

编辑：我现在正在使用 Valgrind，我只想知道，我怎么知道错误指的是哪一行？例如我得到了这个：

```
==24394== Source and destination overlap in strncpy(0x7ff000006, 0x7ff000006, 6)
==24394==    at 0x4C2C236: strncpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==24394==    by 0x400D8A: tokenize_quotes (in /home/zee/Documents/seng265/repos/assignment2/a.out)
==24394==    by 0x40184E: main (in /home/zee/Documents/seng265/repos/assignment2/a.out)
==24394== 
==24394== Conditional jump or move depends on uninitialised value(s)
==24394==    at 0x4C2C007: strcpy (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==24394==    by 0x400E06: tokenize_quotes (in /home/zee/Documents/seng265/repos/assignment2/a.out)
==24394==    by 0x40184E: main (in /home/zee/Documents/seng265/repos/assignment2/a.out)
==24394== 
```

但我不知道错误在哪一行？我知道它的一些关于 strcpy 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:33:41.357

使用[Valgrind](http://valgrind.org/)：

> Valgrind 是一个 GPL 的系统，用于调试和分析 Linux 程序。使用 Valgrind 的工具套件，您可以自动检测许多内存管理和线程错误，避免数小时令人沮丧的错误搜索，使您的程序更加稳定。您还可以执行详细的分析以帮助加快您的程序。​</p>

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:53:24.327

valgrind 是一个不错的工具，尝试使用它。

```
avinash@ubuntu:~$ valgrind ./test
==2559== Memcheck, a memory error detector
==2559== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==2559== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==2559== Command: ./test
==2559== 
4
==2559== 
==2559== HEAP SUMMARY:
==2559==     in use at exit: 0 bytes in 0 blocks
==2559==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==2559== 
==2559== All heap blocks were freed -- no leaks are possible
==2559== 
==2559== For counts of detected and suppressed errors, rerun with: -v
==2559== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
avinash@ubuntu:~$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:06:34.803

我不认为 Valgrind 是您正在寻找的工具：Valgrind 确实*非常*适合检查未初始化的内存和无效的内存访问（等），但在这种情况下，我不认为 Valgrind 会回答这个问题。

如果您想检查内存是否为零（即您已正确重置它），您可以使用

```
char test = 0;
unsigned i;
for (i = 0; i < MAX_CHARS; i++) {
   test |= tokenized[i];
}
printf("Memory %s zero\n", test == 0 ? "is" : "isn't"); 
```

（循环之后，`test`只有当每个单个字节`tokenized`都为零时才为 0。）

但是，您不会希望在您的代码中永久使用它：`memset`如果您传递正确的参数，您可以相信它会做您想做的事情。

* * *

你从 Valgrind 得到的错误是一个不同的问题：你碰巧`strncpy`用两个指向相同数据的指针调用，例如

```
 strncpy(ptr, ptr, 6); 
```

并且该数据未初始化。例如，它本质上是随机的：您的程序还没有向该内存块写入任何内容。

（此外，如果您使用`-g`（调试符号）进行编译，Valgrind 将为您提供更多信息输出，包括行号。）

# javascript - 如何在 android 浏览器中设置焦点到文本字段？

> ID：11081035
> 
> 赞同：2
> 
> 时间：2012-06-18T10:31:56.670
> 
> 标签：javascript, android

我需要将焦点放在 android 浏览器中的文本字段上。jquery 函数 focus() 不起作用。html5 属性自动对焦也不起作用。可能需要在android os中删除这个限制？

# iphone - [NSBundle mainBundle]pathForResource 返回 nil

> ID：11081041
> 
> 赞同：0
> 
> 时间：2012-06-18T10:32:23.247
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试将我的应用程序连接到 SQLite 数据库，但我收到消息告诉我数据库已创建但没有表。

我调试了程序，发现 `[[NSBundle mainBundle] pathForResource]`总是返回`nil`

```
NSString* file = [[NSBundle mainBundle]pathForResource:_databaseName ofType:_databaseType]; 
```

为什么会这样？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:40:35.130

首先：确保您的数据库在应用程序包中。

然后，您需要实现将路径复制到纪录片目录的方法。因为这些

```
-(NSString *) getDBPath:(NSString*)databaseName {
// search for the existed paths
NSArray *paths = NSSearchPathForDirectoriesInDomains(  NSDocumentDirectory , NSUserDomainMask, YES);
  NSString *documentsDir = [paths objectAtIndex:0];

return [documentsDir stringByAppendingPathComponent:databaseName]; 
```

}

```
- (void) InstantiateYourDatabase:(NSString *)DatabaseName {

//Using NSFileManager we can perform many file system operations.

NSFileManager *fileManager = [NSFileManager defaultManager];

NSError *error;
NSString *dpname=DatabaseName;

_dbPath = [self getDBPath:dpname];

BOOL success = [fileManager fileExistsAtPath:_dbPath];

NSLog(@"success == %i",success);

if( !success) {

    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] 
                               stringByAppendingPathComponent:DatabaseName];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:_dbPath error:&error];

} 
```

}

告诉我它是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:35:54.643

尝试以下代码以查找数据库路径

```
 NSString *databaseName = @"your_db_name.sql";
    NSString *databasePath;
    // Get the path to the documents directory and append the databaseName
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
    NSLog(@"Database Path is: %@",databasePath); 
```

您想了解有关 iOS 中 Sqllite 数据库连接的更多详细信息，请尝试本[教程](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)

欢迎！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:47:36.480

如果您创建了一个 sqlite db 文件并将其拖到 xcode3 中的项目中，则它在运行时位于应用程序文档文件夹中。

```
NSString *databaseName = @"cartoon.db";
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentDir = [documentPaths objectAtIndex:0];
NSString *databasePath = [documentDir stringByAppendingPathComponent:databaseName]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T10:42:13.127

每当您使用数据库时，您都必须使用文档目录

# java - 如何在运行时从字符串表示创建 Java 对象

> ID：11081045
> 
> 赞同：0
> 
> 时间：2012-06-18T10:32:43.947
> 
> 标签：java, reflection, beanshell, janino

例如，如果我有一个字符串`"{1,2,3,4,5}"`，我想从该字符串中获取一个 int[] 对象。

我看过 Janino 和 Beanshell，但似乎找不到正确的方法让他们为我做这件事。

我正在寻找一种通用的解决方案，它适用于所有类型——不仅是整数数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:52:16.370

最好使用`Regular Expression`. 不必你的`String`is`Array`它可以是任何`String`包含数字的。

```
 String s="{1,2,3,4,5}";
        Pattern p = Pattern.compile("-?\\d+");
        Matcher m = p.matcher(s);
        List<Integer> list=new ArrayList<Integer>();
        while (m.find()) {
          Integer num=new Integer(m.group());

          list.add(num);
        }

        System.out.println(list); 
```

**输出：**

```
[1, 2, 3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:38:46.100

对我来说似乎是一个解析问题。看看字符串方法:)

代码可能如下所示：

```
String s = "{1,2,3,4,5}"
String justIntegers = s.substring(1, s.length()-1);
LinkedList<Integer> l = new LinkedList();
for (String string: justIntegers.split(','))
l.add(Integer.valuesOf(string));
l.toArray(); 
```

如果您使用字符串发送/保存对象，请使用 xml 或 json ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T10:46:15.813

看看[https://stackoverflow.com/a/2605050/1458047](https://stackoverflow.com/a/2605050/1458047)

答案提出了一些选择。

# c++ - 使用 C++ 中的参数将 std::string 转换为现有函数

> ID：11081046
> 
> 赞同：5
> 
> 时间：2012-06-18T10:32:44.243
> 
> 标签：c++, function

我的项目中有一个已实现的功能`MyFunc(int, double, string)`。例如，如何使用具有字符串表示的必要参数调用此函数

```
std::string str = "MyFunc(2, 3.12, \"Lemon Juice\")"; 
```

那么标准函数呢，例如，我怎么能称之为`time()`have `std::string "time()"`？

* * *

好的，这里有更详细的任务。我有一个`map <string, Data>` `Data`是一个有很多孩子的类包装器。当我调用`Data.GetValue()`方法时，它会`std::string`根据子类内部数据返回 a 。其中一个`Data`孩子必须返回 的字符串表示`int`，另一个 - 的字符串表示`double`，最后一个 - 当前日期和时间的字符串表示。这就是问题所在 - 我不知道如何调用标准函数来从其中一个孩子`ctime()`那里获取信息。`Data`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:44:30.900

通常不能*在*C++ 中执行源代码包含在字符串中的代码。可能最引人注目的动机是 C++ 实现不需要在代码运行的机器上具有 C++ 编译器，尽管它不仅如此。

您可能可以针对特定情况执行此操作。那可能是：

特定于平台的，例如：

*   将源代码包装在一些样板文件中，然后在外部调用编译器，链接它，或者将它嵌入到你的程序中。这为您提供了一个程序或库。
*   在外部运行该新程序，或动态链接该库。

输入特定，例如：

*   您可以使用文字作为参数来解析对特定已知函数的函数调用，相对容易，无需完整的 C++ 编译器。将参数值取出到变量中并调用函数。但是，如果您要这样做，您可以为字符串指定一种更容易解析的格式，而不是看起来像 C++ 函数调用的格式。

听起来好像在您的任务中，您有一个字符串是以下之一：

*   一个表示`int`
*   一个表示`double`
*   日期和时间的表示。

你没有说你想用这个字符串做什么，但不管是什么，你可能需要 (a) 检查字符串以找出它是三个字符串中的哪一个，然后 (b) 做一些适合该格式的事情。更好的是，无论三个`GetValue()`返回中的哪一个，您都可以让派生类负责返回相同的表示。例如，如果您真正想要的是自 1970 年以来的秒数，请添加一个`GetSecondsSinceEpoc`函数，并在每个类中以不同的方式实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:38:58.283

正如其他人所提到的，C++ 本身无法做到这一点。但是，外部框架可以帮助您。

[ROOT](http://root.cern.ch)（在 CERN 使用）为 C++ 提供反射以及解释器。您将能够在代码中执行/解释用 C++ 编写的方法调用或宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:34:35.973

你不能用 C++ 做到这一点。

# .net - 自动将源代码文件移动到 Visual Studio 2008/2010 中的项目文件夹，这些文件作为链接添加并位于项目文件夹之外

> ID：11081047
> 
> 赞同：4
> 
> 时间：2012-06-18T10:32:44.490
> 
> 标签：.net, visual-studio-2010, visual-studio-2008, ide, projects-and-solutions

是否有用于 Visual Studio 的插件/技巧/宏，它会自动将项目目录之外的所有文件移动并作为链接添加到项目目录并更改文件在项目本身中的位置？

```
|--Project1
          |--File1.vb REM: already inside the project folder
|--File2.vb REM: outside the project folder and added as link to project1. 
```

有没有办法做到这一点？

```
|--Project1
          |--File1.vb REM: remains as it is
          |--File2.vb REM: now moved to project1 directory. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:51:17.167

如果它是您正在寻找的，Visual 已经在编译期间进行了复制。另一方面，如果你想真正添加文件，而不是作为链接，我很确定 VS 中没有本机技巧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:07:54.790

自己写一个这样的工具应该不会太难。项目文件只是 XML 文件，对源文件的引用如下所示：

带链接：

```
<ItemGroup>
  <Compile Include="..\Path_To_External_File\SourceFile.vb">
     <Link>SourceFile.vb</Link>
  </Compile>
</ItemGroup> 
```

相同的没有链接：

```
<ItemGroup>
    <Compile Include="SourceFile.vb" />
</ItemGroup> 
```

因此，编写一个非常简单的程序或脚本来读取所有要处理的项目文件，循环遍历所有`<Compile>`项目，复制源文件或将其移动到所需位置，并相应地调整项目文件的 XML。如果您事先编写过一些 XML 处理程序，例如使用`XMLDocument`类，那么这应该在几个小时内（最多）实现。

最后一点：您可能（或可能不必）处理从不同项目引用相同文件的情况。

# c# - RadComboBox 选择的值错误

> ID：11081048
> 
> 赞同：2
> 
> 时间：2012-06-18T10:32:49.337
> 
> 标签：c#, asp.net, .net, telerik, radcombobox

我使用时遇到以下问题`RadComboBox`：

```
 ddl_contactList.Items.Clear();
    ddl_contactList.DataSource = ContactList.GetContactListsByDep(year, main_code);
    ddl_contactList.DataTextField = "list_desc";
    ddl_contactList.DataValueField = "list_code";
    ddl_contactList.DataBind();
    ddl_contactList.Items.Insert(0, new Telerik.Web.UI.RadComboBoxItem("NewList", "-1"));
    ddl_contactList.SelectedIndex = 0; 
```

* * *

```
 <telerik:RadComboBox ID="ddl_contactList" runat="server" AutoPostBack="True" CausesValidation="False"
            CollapseDelay="0" Culture="ar-EG" ExpandDelay="0" Filter="StartsWith" ItemsPerRequest="10"
            MarkFirstMatch="true" Skin="Outlook" EnableAutomaticLoadOnDemand="True" EmptyMessage="-List name-"
            ShowMoreResultsBox="True" 
            onselectedindexchanged="ddl_contactList_SelectedIndexChanged" AppendDataBoundItems ="true">
    </telerik:RadComboBox> 
```

* * *

组合框中的项目数总是`1`!!! 尽管数据源包含许多项目，所以当我尝试随时获取任何项目的选定值时，我总是得到`-1`！

如何获得正确的`selectedvalue`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:04:55.177

如何单独添加它们而不是绑定。

```
var items = ContactList.GetContactListsByDep(year, main_code); 

foreach(var item in items)
{
   ddl_contactList.Items.Add(new RadComboBoxItem(item.list_desc, item.list_code));
}

ddl_contactList.Items.Insert(0, new RadComboBoxItem("NewList", "-1")); 
ddl_contactList.SelectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:39:18.143

在数据绑定之前添加`NewList`项，并将以下属性添加到 RadComboBox。

**将 AppendDataBoundItems 设置为 True 会保留 RadComboBox 中已经存在的项目。这使您可以将 RadComboBox 绑定到多个数据源或同时使用未绑定和绑定模式。**

然后将数据源添加到控件。

```
ddl_contactList.Items.Clear();
ddl_contactList.Items.Insert(0, new Telerik.Web.UI.RadComboBoxItem("NewList", "-1"));
ddl_contactList.SelectedIndex = 0;

ddl_contactList.DataSource = ContactList.GetContactListsByDep(year, main_code);
ddl_contactList.DataTextField = "list_desc";
ddl_contactList.DataValueField = "list_code";
ddl_contactList.DataBind(); 
```

# c# - Json.NET 十进制序列化问题

> ID：11081049
> 
> 赞同：0
> 
> 时间：2012-06-18T10:32:51.293
> 
> 标签：c#, decimal, json.net

如果我有一个小数表示日元（即指数零货币）金额，例如 3131313，我会看到 Json.NET 默认将值序列化为 3131313.0。

有没有办法让它序列化文字值 3131313 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:46:04.300

通过实现您自己的转换器，您可以序列化为

```
var str= JsonConvert.SerializeObject(
     new {s="aaa",d=(decimal)3131313},
     new MyConverter()); 
```

-

```
public class MyConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        if (objectType == typeof(decimal)) return true;
        return false;
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteValue(Convert.ToInt64(value));
    }
} 
```

# ruby-on-rails - 带有 Draper 或 Apotomo 的 Ruby on Rails 是 MVVM 吗？

> ID：11081050
> 
> 赞同：8
> 
> 时间：2012-06-18T10:32:53.877
> 
> 标签：ruby-on-rails, model-view-controller, mvvm, decorator, single-page-application

一些事实/假设：

1.  据说 Ruby on Rails 遵循 MVC 架构模式。
2.  MVVM（模型视图 ViewModel），源自 MVC，提供了一个抽象层，其中所有按钮、标签和链接（视图）都与模型公开数据的方式（视图模型）分离。
3.  一些擅长构建单页应用程序的 Javascript 框架利用 MVVM 模式（例如 Knockout.js）。
4.  如果我们检查[Ruby 工具箱](https://www.ruby-toolbox.com/categories/rails_presenters)，我们将看到几个演示器解决方案，例如 Draper 和 Apotomo，它们就像 ViewModel 一样工作。

假设我的“事实”部分没有 bs，有一件事情困扰着我：

*   我们可以将带有 Draper、Apotomo（或其他演示器/装饰器）的 Rails 称为 MVVM 解决方案吗？
*   如果我们使用 Draper 将模型中的数据封装在装饰器/呈现器容器的形式中，我们可以说我们在 Rails 中遵循 MVVM 模式吗？
*   还是缺少某些东西，我们不能将其称为 MVVM，例如 Knockout.js？

感谢您的见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T13:05:06.493

在我看来不是......我认为 MVVM 是创建与底层数据/域对象断开连接的特定视图对象。

使用 Rails 演示者模式，这些演示者通常会环绕活动记录对象并向其添加与演示相关的方法。

# java - Java - 如何将 unix 时间戳从一个时区转换为另一个时区？

> ID：11081056
> 
> 赞同：0
> 
> 时间：2012-06-18T10:33:16.487
> 
> 标签：java, timezone, timestamp, unix-timestamp

我有存储在 UTC 中的 unix 时间戳，并希望将它们转换为用户时区中的 unix 时间戳。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:55:49.067

就我个人而言，我会在任何地方使用 UTC，并且只在向用户显示时转换时间。不同时区的后端时间可能会导致您不需要的混乱。

如果您正在处理不遵循这种方法的接口/服务，您可以这样做，您可以 TimeZone.getOffset(date)

# php - php-excel-reader 允许的内存大小为 134217728 字节已用尽

> ID：11081058
> 
> 赞同：1
> 
> 时间：2012-06-18T10:33:20.157
> 
> 标签：php

```
require_once 'Excel/reader.php';
$data = new Spreadsheet_Excel_Reader();

$data->read('Senator.xls'); 
```

我的 error.log 中出现以下错误

```
PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 32 bytes) 
```

奇怪的是，这在我的开发实例上工作得很好。但不在生产中。我应该寻找什么差异。

注意：两个环境都有 memory_limit=128M

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-09T11:49:01.790

可能一台服务器具有 64 位处理器。GetInt4d 位移不适用于 64 位处理器。

使用此 hack 确保 <<24 块在 32 位和 64 位系统上的正确结果，只需将 GetInt4d 函数的代码替换为以下内容： Location : Excel/olereader.inc line no-27 ,function GetInt4d()

`$_or_24 = ord($data[$pos+3]);`

`if ($_or_24>=128) $_ord_24 = -abs((256-$_or_24) << 24); else $_ord_24 = ($_or_24&127) << 24;`

`return ord($data[$pos]) | (ord($data[$pos+1]) << 8) | (ord($data[$pos+2]) << 16) | $_ord_24;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T12:51:46.733

取决于女巫线，它给出了错误：我的是

```
PHP Fatal error:  Allowed memory size of 67108864 bytes exhausted (tried to allocate 32 bytes) in [] on line 1688 
```

这是功能

```
addcell($row, $col, $string, $info=null) { 
```

特别是 foreach 循环。据我了解，它是关于颜色单元偏移或类似信息的信息，所以我评论了循环，现在它使用的内存要少得多。

如果您不需要执行此类代码，您可以对其进行注释并尝试。

# uiview - convertPoint 到窗口坐标不能按我预期的那样工作

> ID：11081059
> 
> 赞同：1
> 
> 时间：2012-06-18T10:33:21.170
> 
> 标签：uiview, uilabel, subview, cgpoint

我需要知道我的 UILabel 在窗口坐标中的绝对位置。这个 UILabel（在下面的代码中，uil）位于视图坐标系的 34 x 174 y 处的视图内）

我看到很多 psay 应该使用 convertPoint 来获取绝对值。但在转换后，我得到一个仍然为 34 x 174 y 的 CGPoint。虽然我期望坐标指的是屏幕窗口。

您能否向我解释我做错了什么以及如何获取标签的窗口坐标？

```
CGPoint cgp = [uil convertPoint:uil.frame.origin fromView:nil]; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:14:38.467

文档`convertPoint:toView:`说，“如果视图为零，则此方法将转换为窗口基坐标。” 听起来你想要那个而不是`fromView:`.

# android - 每个活动的android标签栏

> ID：11081061
> 
> 赞同：0
> 
> 时间：2012-06-18T10:33:28.877
> 
> 标签：android, tabbar, android-tabhost

我的 android 应用程序中有一个选项卡栏，在每个选项卡中还有 5 到 7 个活动的流程，所有这些活动都必须显示选项卡栏，所以我打算在每个活动中使用 activitygroup 和 getLocalActivityManager 像这样

```
 Intent intent = new Intent(thisActivity, activity2.class);

                     mView = getLocalActivityManager().startActivity("id", intent
                    .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
                    )
                    .getDecorView();

                    setContentView(mView); 
```

我将此activity1的后退按钮设置为

```
 mView.dispatchKeyEvent(event); 
```

所以后退按钮的控制转到那个意图的活动2

然后在那个有意图的activity2后退按钮中，我覆盖到最后一个活动的意图，如@Override public boolean onKeyDown(int keyCode, KeyEvent event) { if ((keyCode == KeyEvent.KEYCODE_BACK)) { //后退键按下 Log.d (this.getClass().getName(), "后退按钮被按下");

```
 Intent intent = new Intent(getApplicationContext(),activity1.class);
        mView = NearByActivity.mLocalActivityManager.startActivity("activity1", intent
                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
                )
                .getDecorView();

                setContentView(mView);

        return true;
    }
    return super.onKeyDown(keyCode, event);

} 
```

它适用于 2 个活动，但不适用于选项卡中的 5 到 6 个活动，当我单击第 3 个活动的后退按钮时，它不会覆盖后退按钮，它使用 activity2 后退按钮并转到活动 1 而不是 2

如何在一个标签内容中执行 6 7 个意图来解决此问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T11:09:13.333

@Override
public void onBackPressed() { try{ Listentab.group.back(); }catch(IndexOutOfBoundsException e) { 完成(); }

在您扩展活动组的活动中使用它

# javascript - 调用函数的Javascript对象名称？

> ID：11081063
> 
> 赞同：2
> 
> 时间：2012-06-18T10:33:33.040
> 
> 标签：javascript, object, reference, parent

所以我得到了这段小代码，不要打扰它的实现方式。

```
function A() {}

A.prototype = {
    nw: function(t) {
        return new t(A);
    }
} 
```

如果通过原型继承的孩子（例如 B）将调用函数 nw，并且我希望它返回 new t(B)，我必须用什么替换 new t(A) 中的 A 才能传递正确的参数？

像'return new t(this)'这样的东西？

B.nw(C) 将返回新的 C(B)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:46:06.843

如果我理解正确，这就是你想要的：

```
function A() {}

A.__proto__ = {
    log: function(t) {
        return new t(this);
    }
} 
```

如果您运行以下代码

```
A.log(function(obj){
    console.log(obj);
}); 
```

它将记录 A

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:26:37.097

您可以实现一个简单的继承机制：

```
var Class = function( parent ){
   var f = function(){};

   if( typeof parent == 'function' ){
      f.prototype = new parent;  
   }else if( parent) {
       f.prototype = parent;  
   }

   f.prototype.__parent = parent;  // :)
   f.prototype.__root = ( parent &&  parent.prototype && parent.prototype.__root) || parent || f; // :)
   return f
}; 
```

现在：

```
 var A = Class(),
       B = Class(A),
       C = Class(B),

       objA = new A,
       objB = new B,
       objC = new C;

objC.__parent == B; // true;
objB.__parent == A; // true

(objC.__root == objB.__root) && ( objA.__root == A ); // true; 
```

但是，您可以为根对象指定原型（您的情况）：

```
 var A = Class({ 
             nw: function( t ) {                  
                    // What you like here? :)    

                    return new t( this.__parent ); 
                    //return new t( this.constructor );  
                    //return new t( this.__root );
             } 
           }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:44:57.903

呃，其他答案看起来很复杂。看起来你只是想要：

```
function A() {}

A.prototype = {
    constructor: A,

    nw: function(t) {
        return new t( this.constructor );
    }
} 
```

# c++ - VC++中的文件时间结构

> ID：11081064
> 
> 赞同：0
> 
> 时间：2012-06-18T10:33:33.127
> 
> 标签：c++, winapi

```
typedef struct _FILETIME {
  DWORD dwLowDateTime;
  DWORD dwHighDateTime;
} FILETIME, *PFILETIME; 
```

低日期时间和高数据时间存储的时间部分是什么？以及它将如何存储在计算机中以及如何以 64 位整数显示。

例如，如果我有`2012-06-18 09:45:03.180`.

我必须减去两个文件时间，所以我要转换为 int64 和 subsracting，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:46:44.533

`dwHighDateTime`合在一起`dwLowDateTime`形成一个 64 位值，表示自 1601 年 1 月 1 日凌晨 12:00 UTC 以来 100 纳秒单位的数量。

您永远不应该直接读取或写入 FILETIME 结构中的值。您应该使用[FileTimeToSystemTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724280%28v=vs.85%29.aspx)等函数来访问其中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:56:22.233

According to [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx?ppud=4), `FILETIME` is the number of 100-nanosecond intervals since January 1, 1601 (UTC). So in your example, which is approximately 150183 days, 9 hours, 45 minutes, 3 seconds and 180 thousands, they should be about:

*   0x779C70C0 (low)
*   0x01CCFEA2 (high)

**Edit:** converting to `__int64` and subtracting, just as you say, works well.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:46:38.987

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)的结构有很好的记录。摘抄：

> FILETIME 结构是一个 64 位值，表示自 1601 年 1 月 1 日 (UTC) 以来 100 纳秒间隔的数量。

这两个 DWORD 用于定义结构，因为您不应该自己进行计算。请参阅参考的 MSDN 文章中的**备注**部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T10:46:40.913

[文件时间结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)

> 包含一个 64 位值，表示自 1601 年 1 月 1 日 (UTC) 以来的 100 纳秒间隔数。

有关示例，请参见[SystemTimeToFileTime 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948%28v=vs.85%29.aspx)

# c++ - 将一个大数据文件拆分成几个小文件（文本格式）

> ID：11081065
> 
> 赞同：0
> 
> 时间：2012-06-18T10:33:36.503
> 
> 标签：c++, file-handling

我正在尝试将一个大数据文件拆分为几个小文本文件。以下代码每次打开和关闭一个新文件，这是不可行的。有没有其他方法可以做到这一点？

```
ifstream infile(file_name);

if(infile)
{
    char val;
    while(!infile.eof())
    {
        ofstream ofile (ofile_name);
        infile >> val;
        ofile << val;
        if( infile.peek() == '\n' )// last entry on the line has been read
        {
            row_counter++;
            if (row_counter == win_size)
                // generate new ofile_name
        }
        ofile.close();
    }
    infile.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:51:48.110

如果不打开和关闭输出文件，您将无法创建多个输出文件。

原因是，每个输出文件都应该有一个唯一的名称。您必须为输出文件生成有用的名称。文件（内容）和文件名之间的连接将在 open 调用（或 ofstream 构造函数）中完成。

**编辑**

为了避免每个字符的打开和关闭，您需要状态变量。在您的示例`row_counter`中可用于它。您需要以下步骤：

*   在您的 while(!infile.eof()) 循环之前打开初始文件
*   关闭您的文件，生成下一个名称并打开您写的新位置`// generate new ofile_name`
*   最后在循环后关闭你的文件。

这可以通过这种方式完成：

```
if(infile)
{
    char val;

    row_counter = 0;
    ofstream ofile (ofile_name);

    while(!infile.eof())
    {
        infile >> val;
        ofile << val;

        if( infile.peek() == '\n' )// last entry on the line has been read 
        { 
            row_counter++; 

            if (row_counter == win_size) 
            {   
               row_counter = 0;
               ofile.close();
               // generate new ofile_name 
               ofile.open(ofile_name); // you might change the nMode parameter if necessary
            }
        } 
    } 

    ofile.close(); 
    infile.close(); 
} 
```

# asp.net - 使用openxml在asp.net中导出到excel

> ID：11081067
> 
> 赞同：1
> 
> 时间：2012-06-18T10:33:43.103
> 
> 标签：asp.net, openxml, export-to-excel

大家好，我正在做一个项目，该项目需要我**使用 open xml**单击按钮将一些数据导出到 excel。这是我用于导出到 excel 的类：

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Spreadsheet;
using DocumentFormat.OpenXml.Drawing.Spreadsheet;
using _14junexcel.Account;

namespace _14junexcel
{
    public class CreateExcelOpen
    {
        public void BuildWorkbook1(string filename)
        {
            string sFile = @"D:\\ExcelOpenXmlWithImageAndStyles.xlsx";
            if (File.Exists(sFile))
            {
                File.Delete(sFile);
            }
            BuildWorkbook(sFile);
        }

        private static void BuildWorkbook(string filename)
        {
            try
            {
                using (SpreadsheetDocument xl = SpreadsheetDocument.Create(filename, SpreadsheetDocumentType.Workbook))
                {
                    WorkbookPart wbp = xl.AddWorkbookPart();
                    WorksheetPart wsp = wbp.AddNewPart<WorksheetPart>();
                    Workbook wb = new Workbook();
                    FileVersion fv = new FileVersion();
                    fv.ApplicationName = "Microsoft Office Excel";
                    Worksheet ws = new Worksheet();
                    SheetData sd = new SheetData();

                    WorkbookStylesPart wbsp = wbp.AddNewPart<WorkbookStylesPart>();
                    wbsp.Stylesheet = CreateStylesheet();
                    wbsp.Stylesheet.Save();

                    string sImagePath = @"C:\\Users\\Public\\Pictures\\Sample Pictures\\Jellyfish.jpg";
                    DrawingsPart dp = wsp.AddNewPart<DrawingsPart>();
                    ImagePart imgp = dp.AddImagePart(ImagePartType.Png, wsp.GetIdOfPart(dp));
                    using (FileStream fs = new FileStream(sImagePath, FileMode.Open))
                    {
                        imgp.FeedData(fs);
                    }

                    NonVisualDrawingProperties nvdp = new NonVisualDrawingProperties();
                    nvdp.Id = 1025;
                    nvdp.Name = "Picture 1";
                    nvdp.Description = "polymathlogo";
                    DocumentFormat.OpenXml.Drawing.PictureLocks picLocks = new DocumentFormat.OpenXml.Drawing.PictureLocks();
                    picLocks.NoChangeAspect = true;
                    picLocks.NoChangeArrowheads = true;
                    NonVisualPictureDrawingProperties nvpdp = new NonVisualPictureDrawingProperties();
                    nvpdp.PictureLocks = picLocks;
                    NonVisualPictureProperties nvpp = new NonVisualPictureProperties();
                    nvpp.NonVisualDrawingProperties = nvdp;
                    nvpp.NonVisualPictureDrawingProperties = nvpdp;

                    DocumentFormat.OpenXml.Drawing.Stretch stretch = new DocumentFormat.OpenXml.Drawing.Stretch();
                    stretch.FillRectangle = new DocumentFormat.OpenXml.Drawing.FillRectangle();

                    BlipFill blipFill = new BlipFill();
                    DocumentFormat.OpenXml.Drawing.Blip blip = new DocumentFormat.OpenXml.Drawing.Blip();
                    blip.Embed = dp.GetIdOfPart(imgp);
                    blip.CompressionState = DocumentFormat.OpenXml.Drawing.BlipCompressionValues.Print;
                    blipFill.Blip = blip;
                    blipFill.SourceRectangle = new DocumentFormat.OpenXml.Drawing.SourceRectangle();
                    blipFill.Append(stretch);

                    DocumentFormat.OpenXml.Drawing.Transform2D t2d = new DocumentFormat.OpenXml.Drawing.Transform2D();
                    DocumentFormat.OpenXml.Drawing.Offset offset = new DocumentFormat.OpenXml.Drawing.Offset();
                    offset.X = 0;
                    offset.Y = 0;
                    t2d.Offset = offset;
                    Bitmap bm = new Bitmap(sImagePath);
                    //http://en.wikipedia.org/wiki/English_Metric_Unit#DrawingML
                    //http://stackoverflow.com/questions/1341930/pixel-to-centimeter
                    //http://stackoverflow.com/questions/139655/how-to-convert-pixels-to-points-px-to-pt-in-net-c
                    DocumentFormat.OpenXml.Drawing.Extents extents = new DocumentFormat.OpenXml.Drawing.Extents();
                    extents.Cx = (long)bm.Width * (long)((float)0 / bm.HorizontalResolution);
                    extents.Cy = (long)bm.Height * (long)((float)0 / bm.VerticalResolution);
                    bm.Dispose();
                    t2d.Extents = extents;
                    ShapeProperties sp = new ShapeProperties();
                    sp.BlackWhiteMode = DocumentFormat.OpenXml.Drawing.BlackWhiteModeValues.Auto;
                    sp.Transform2D = t2d;
                    DocumentFormat.OpenXml.Drawing.PresetGeometry prstGeom = new DocumentFormat.OpenXml.Drawing.PresetGeometry();
                    prstGeom.Preset = DocumentFormat.OpenXml.Drawing.ShapeTypeValues.Rectangle;
                    prstGeom.AdjustValueList = new DocumentFormat.OpenXml.Drawing.AdjustValueList();
                    sp.Append(prstGeom);
                    sp.Append(new DocumentFormat.OpenXml.Drawing.NoFill());

                    DocumentFormat.OpenXml.Drawing.Spreadsheet.Picture picture = new DocumentFormat.OpenXml.Drawing.Spreadsheet.Picture();
                    picture.NonVisualPictureProperties = nvpp;
                    picture.BlipFill = blipFill;
                    picture.ShapeProperties = sp;

                    Position pos = new Position();
                    pos.X = 0;
                    pos.Y = 0;
                    Extent ext = new Extent();
                    ext.Cx = extents.Cx;
                    ext.Cy = extents.Cy;
                    AbsoluteAnchor anchor = new AbsoluteAnchor();
                    anchor.Position = pos;
                    anchor.Extent = ext;
                    anchor.Append(picture);
                    anchor.Append(new ClientData());
                    WorksheetDrawing wsd = new WorksheetDrawing();
                    wsd.Append(anchor);
                    Drawing drawing = new Drawing();
                    drawing.Id = dp.GetIdOfPart(imgp);
                    wsd.Save(dp);

                    UInt32 index;
                    Random rand = new Random();

                    sd.Append(CreateHeader(2));
                    sd.Append(CreateColumnHeader(4));

                    for (index = 5; index < 6; ++index)
                    {
                        sd.Append(CreateContent(index, ref rand));
                    }

                    ws.Append(sd);
                    ws.Append(drawing);
                    wsp.Worksheet = ws;
                    wsp.Worksheet.Save();
                    Sheets sheets = new Sheets();
                    Sheet sheet = new Sheet();
                    sheet.Name = "Sheet1";
                    sheet.SheetId = 1;

                    sheet.Id = wbp.GetIdOfPart(wsp);
                    sheets.Append(sheet);
                    wb.Append(fv);
                    wb.Append(sheets);

                    xl.WorkbookPart.Workbook = wb;
                    xl.WorkbookPart.Workbook.Save();
                    //xl.WorkbookPart.Workbook.Save();
                    xl.Close();
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
                Console.ReadLine();
            }
        }

        private static Stylesheet CreateStylesheet()
        {
            Stylesheet ss = new Stylesheet();

            Fonts fts = new Fonts();
            DocumentFormat.OpenXml.Spreadsheet.Font ft = new DocumentFormat.OpenXml.Spreadsheet.Font();
            FontName ftn = new FontName();
            ftn.Val = StringValue.FromString("Calibri");
            FontSize ftsz = new FontSize();
            ftsz.Val = DoubleValue.FromDouble(11);
            ft.FontName = ftn;
            ft.FontSize = ftsz;
            fts.Append(ft);

            ft = new DocumentFormat.OpenXml.Spreadsheet.Font();
            ftn = new FontName();
            ftn.Val = StringValue.FromString("Palatino Linotype");
            ftsz = new FontSize();
            ftsz.Val = DoubleValue.FromDouble(18);
            ft.FontName = ftn;
            ft.FontSize = ftsz;
            fts.Append(ft);

            fts.Count = UInt32Value.FromUInt32((uint)fts.ChildElements.Count);

            Fills fills = new Fills();
            Fill fill;
            PatternFill patternFill;
            fill = new Fill();
            patternFill = new PatternFill();
            patternFill.PatternType = PatternValues.None;
            fill.PatternFill = patternFill;
            fills.Append(fill);

            fill = new Fill();
            patternFill = new PatternFill();
            patternFill.PatternType = PatternValues.Gray125;
            fill.PatternFill = patternFill;
            fills.Append(fill);

            fill = new Fill();
            patternFill = new PatternFill();
            patternFill.PatternType = PatternValues.Solid;
            patternFill.ForegroundColor = new ForegroundColor();
            patternFill.ForegroundColor.Rgb = HexBinaryValue.FromString("00ff9728");
            patternFill.BackgroundColor = new BackgroundColor();
            patternFill.BackgroundColor.Rgb = patternFill.ForegroundColor.Rgb;
            fill.PatternFill = patternFill;
            fills.Append(fill);

            fills.Count = UInt32Value.FromUInt32((uint)fills.ChildElements.Count);

            Borders borders = new Borders();
            Border border = new Border();
            border.LeftBorder = new LeftBorder();
            border.RightBorder = new RightBorder();
            border.TopBorder = new TopBorder();
            border.BottomBorder = new BottomBorder();
            border.DiagonalBorder = new DiagonalBorder();
            borders.Append(border);

            border = new Border();
            border.LeftBorder = new LeftBorder();
            border.LeftBorder.Style = BorderStyleValues.Thin;
            border.RightBorder = new RightBorder();
            border.RightBorder.Style = BorderStyleValues.Thin;
            border.TopBorder = new TopBorder();
            border.TopBorder.Style = BorderStyleValues.Thin;
            border.BottomBorder = new BottomBorder();
            border.BottomBorder.Style = BorderStyleValues.Thin;
            border.DiagonalBorder = new DiagonalBorder();
            borders.Append(border);
            borders.Count = UInt32Value.FromUInt32((uint)borders.ChildElements.Count);

            CellStyleFormats csfs = new CellStyleFormats();
            CellFormat cf = new CellFormat();
            cf.NumberFormatId = 0;
            cf.FontId = 0;
            cf.FillId = 0;
            cf.BorderId = 1;
            csfs.Append(cf);
            csfs.Count = UInt32Value.FromUInt32((uint)csfs.ChildElements.Count);

            uint iExcelIndex = 164;
            NumberingFormats nfs = new NumberingFormats();
            CellFormats cfs = new CellFormats();

            cf = new CellFormat();
            cf.NumberFormatId = 0;
            cf.FontId = 0;
            cf.FillId = 0;
            cf.BorderId = 0;
            cf.FormatId = 0;
            cfs.Append(cf);

            NumberingFormat nfDateTime = new NumberingFormat();
            nfDateTime.NumberFormatId = UInt32Value.FromUInt32(iExcelIndex++);
            nfDateTime.FormatCode = StringValue.FromString("dd/mm/yyyy hh:mm:ss");
            nfs.Append(nfDateTime);

            NumberingFormat nf4decimal = new NumberingFormat();
            nf4decimal.NumberFormatId = UInt32Value.FromUInt32(iExcelIndex++);
            nf4decimal.FormatCode = StringValue.FromString("#,##0.0000");
            nfs.Append(nf4decimal);

            // #,##0.00 is also Excel style index 4
            NumberingFormat nf2decimal = new NumberingFormat();
            nf2decimal.NumberFormatId = UInt32Value.FromUInt32(iExcelIndex++);
            nf2decimal.FormatCode = StringValue.FromString("#,##0.00");
            nfs.Append(nf2decimal);

            // @ is also Excel style index 49
            NumberingFormat nfForcedText = new NumberingFormat();
            nfForcedText.NumberFormatId = UInt32Value.FromUInt32(iExcelIndex++);
            nfForcedText.FormatCode = StringValue.FromString("@");
            nfs.Append(nfForcedText);
            //Alignment
            Alignment align = new Alignment(){Horizontal = HorizontalAlignmentValues.General,Vertical=VerticalAlignmentValues.Center};
            //wraptext
           // Alignment align1 = new Alignment(){Horizontal=HorizontalAlignmentValues.CenterContinuous,Vertical=VerticalAlignmentValues.Center};

            // index 1
            cf = new CellFormat();
            cf.NumberFormatId = nfDateTime.NumberFormatId;
            cf.FontId = 0;
            cf.FillId = 0;
            cf.BorderId = 1;
            cf.FormatId = 0;

            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);

            // index 2
            cf = new CellFormat();
            cf.NumberFormatId = nf4decimal.NumberFormatId;
            cf.FontId = 0;
            cf.FillId = 0;
            cf.BorderId = 1;
            cf.FormatId = 0;
            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);

            // index 3
            cf = new CellFormat();
            cf.NumberFormatId = nf2decimal.NumberFormatId;
            cf.FontId = 0;
            cf.FillId = 0;
            cf.BorderId = 1;
            cf.FormatId = 0;
            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);

            // index 4
            cf = new CellFormat();
            cf.NumberFormatId = nfForcedText.NumberFormatId;
            cf.FontId = 0;
            cf.FillId = 0;
            cf.BorderId = 1;
            cf.FormatId = 0;
            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);

            // index 5
            // Header text
            cf = new CellFormat();
            cf.NumberFormatId = nfForcedText.NumberFormatId;
            cf.FontId = 1;
            cf.FillId = 0;
            cf.BorderId = 0;
            cf.FormatId = 0;
            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);

            // index 6
            // column text
            cf = new CellFormat();
            cf.NumberFormatId = nfForcedText.NumberFormatId;
            cf.FontId = 1;
            cf.FillId = 1;
            cf.BorderId = 1;
            cf.FormatId = 1;
            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);

            // index 7
            // coloured 2 decimal text
            cf = new CellFormat();
            cf.NumberFormatId = nf2decimal.NumberFormatId;
            cf.FontId = 0;
            //cf.FillId = 2;
            cf.FillId = 0;
            cf.BorderId = 1;
            cf.FormatId =0;
            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);
            //cf.Append(align);
            cf.Append(align);

            // index 8
            // coloured column text
            cf = new CellFormat();
            cf.NumberFormatId = nfForcedText.NumberFormatId;
            cf.FontId = 0;
            //cf.FillId = 2;
            cf.FillId = 0;
            cf.BorderId = 1;
            cf.FormatId = 0;
            cf.ApplyNumberFormat = BooleanValue.FromBoolean(true);
            cfs.Append(cf);

            nfs.Count = UInt32Value.FromUInt32((uint)nfs.ChildElements.Count);
            cfs.Count = UInt32Value.FromUInt32((uint)cfs.ChildElements.Count);

            ss.Append(nfs);
            ss.Append(fts);
            ss.Append(fills);
            ss.Append(borders);
            ss.Append(csfs);
            ss.Append(cfs);

            CellStyles css = new CellStyles();
            CellStyle cs = new CellStyle();
            cs.Name = StringValue.FromString("Normal");
            cs.FormatId = 0;
            cs.BuiltinId = 0;
            css.Append(cs);
            css.Count = UInt32Value.FromUInt32((uint)css.ChildElements.Count);
            ss.Append(css);

            DifferentialFormats dfs = new DifferentialFormats();
            dfs.Count = 0;
            ss.Append(dfs);

            TableStyles tss = new TableStyles();
            tss.Count = 0;
            tss.DefaultTableStyle = StringValue.FromString("TableStyleMedium9");
            tss.DefaultPivotStyle = StringValue.FromString("PivotStyleLight16");
            ss.Append(tss);

            return ss;
        }

        private static Row CreateHeader(UInt32 index)
        {
            Row r = new Row();
            r.RowIndex = index;
            Cell c = new Cell();
            c.DataType = CellValues.String;
            c.StyleIndex = 5;
            c.CellReference = "A" + index.ToString();
            c.CellValue = new CellValue("REPORT");
            r.Append(c);
            return r;
        }

        private static Row CreateColumnHeader(UInt32 index)
        {
            Row r = new Row();
            r.RowIndex = index;

            Cell c;
            c = new Cell();
            c.DataType = CellValues.String;
            c.StyleIndex = 7;
            c.CellReference = "A" + index.ToString();
            c.CellValue = new CellValue("Retail Customer Group");
            r.Append(c);

            c = new Cell();
            c.DataType = CellValues.String;
            c.StyleIndex = 7;
            c.CellReference = "B" + index.ToString();
            c.CellValue = new CellValue("Product Promotion Group");
            r.Append(c);    
            return r;
        }

        private static Row CreateContent(UInt32 index, ref Random rd)
        {
            Row r = new Row();
            r.RowIndex = index;

            Cell c;
            c = new Cell();
            c.StyleIndex = 7;
            c.CellReference = "A" + index.ToString();
            //c.CellValue = new CellValue(rd.Next(1000000000).ToString());
            c.CellValue = new CellValue("12334");
            r.Append(c);

            DateTime dtEpoch = new DateTime(1900, 1, 1, 0, 0, 0, 0);
            DateTime dt = dtEpoch.AddDays(rd.NextDouble() * 100000.0);
            TimeSpan ts = dt - dtEpoch;
            double fExcelDateTime;
            // Excel has "bug" of treating 29 Feb 1900 as valid
            // 29 Feb 1900 is 59 days after 1 Jan 1900, so just skip to 1 Mar 1900
            if (ts.Days >= 59)
            {
                fExcelDateTime = ts.TotalDays + 2.0;
            }
            else
            {
                fExcelDateTime = ts.TotalDays + 1.0;
            }
            c = new Cell();
            c.StyleIndex = 7;
            c.CellReference = "B" + index.ToString();
            c.CellValue = new CellValue("124515");
            //c.CellValue = new CellValue(fExcelDateTime.ToString());
            r.Append(c);

            return r;
        }
    }
} 
```

这是按钮单击的功能：

```
protected void Button1_Click(object sender, EventArgs e)
        {
            string qwe = TextBox1.Text;
            string ert = TextBox2.Text;
            string filename = @"D:\\ExcelOpenXmlWithImageAndStyles.xlsx";
            CreateExcelOpen exp = new CreateExcelOpen();
            exp.BuildWorkbook1(filename);
        } 
```

这是我的要求：

> **1** .我需要将两个文本框的值传递给两个单元格（现在包含值 12334 和 124515）。
> 
> **2** . 标题列不会自行调整以适应我提供的值（零售客户组等）。请建议此类中所需的修改以启用自动调整。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:42:21.463

在您的`CreateContent`方法中，您具有硬编码值，例如：

```
c.CellValue = new CellValue("12334"); 
```

使用要显示的文本框的值更改它。

要设置标题的宽度，您必须在单元格中添加列，因为您需要列来定义宽度，以下文章将对您有所帮助：

[http://catalog.codeproject.com/script/Articles/ArticleVersion.aspx?aid=371203&av=543408](http://catalog.codeproject.com/script/Articles/ArticleVersion.aspx?aid=371203&av=543408)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T17:39:38.897

我编写了自己的导出到 Excel 编写器。它速度很快，并且允许对单元格进行大量格式化。您可以在

[https://openxmlexporttoexcel.codeplex.com/](https://openxmlexporttoexcel.codeplex.com/)

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:25:05.787

我花了很多时间在谷歌上搜索 OpenXml 相关问题。通过将 OpenXml 功能与 Excel VBA 相结合，我终于找到了解决问题的方法。所以，我有 Excel - 启用宏的文件 (xlsm) 作为我的项目的模板。无论在 OpenXml 中难以实现什么逻辑，我都转向了 VBA。例如，对于 AutoFit，它很简单：

Sub Workbook_Open() ActiveSheet.Columns.AutoFit End Sub

希望它可能会有所帮助。

# r - 计算 r 中数据函数的导数

> ID：11081069
> 
> 赞同：4
> 
> 时间：2012-06-18T10:33:55.960
> 
> 标签：r, function, derivative

有没有一种简单的方法来计算数据给出的非线性函数的导数？

例如：

```
x = 1 / c(1000:1)

y = x^-1.5
ycs = cumsum(y)

plot (x, ycs, log="xy") 
```

如何从“x”和“ycs”给出的函数计算导数函数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T11:21:31.213

还将提出一个平滑样条拟合的示例，然后预测导数。在这种情况下，结果与@dbaupp 描述的 diff 计算非常相似：

```
spl <- smooth.spline(x, y=ycs)
pred <- predict(spl)

plot (x, ycs, log="xy")
lines(pred, col=2)

ycs.prime <- diff(ycs)/diff(x)
pred.prime <- predict(spl, deriv=1)

plot(ycs.prime)
lines(pred.prime$y, col=2) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-18T11:12:08.590

除非您非常小心，否则从原始数据生成衍生品是有风险的。这个过程被称为“误差倍增器”并非毫无意义。除非您知道数据的噪声内容并在微分之前采取一些措施（例如样条）来消除噪声，否则您很可能最终会得到一条可怕的曲线。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-18T10:49:52.207

函数的导数是dy/dx，可以近似为Δy/Δx，即“y的变化超过x的变化”。这可以用 R 写成

```
ycs.prime <- diff(ycs)/diff(x) 
```

现在`ycs.prime`在每个 处包含函数导数的近似值：但是它是长度为 999 的向量，因此在进行任何分析或绘图时`x`需要缩短`x`（即使用`x[1:999]`or ）。`x[2:1000]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-26T02:23:53.010

还有`gradient`来自 pracma 包。

```
grad <- pracma::gradient(ycs, h1 = x)
plot(grad, col = 1) 
```

# sharedpreferences - 切换按钮未正确设置

> ID：11081072
> 
> 赞同：0
> 
> 时间：2012-06-18T10:34:08.900
> 
> 标签：sharedpreferences, togglebutton

我想我可以简化问题域。基本上我已经将首选项活动设置为打开按钮。当我单击关闭然后返回首选项并且它仍然打开时出现问题我试图创建一个布尔开关但由于某种原因它不起作用。代码贴在下面。

**解决方案** 我认为解决方案是解决用户单击切换按钮并将其关闭时的问题，因为我已在 public void Oncreate 方法中将 clickable 设置为 true。每次用户返回首选项活动时，该值都会设置为 on。我认为覆盖该参数的条件可以解决我的问题。

```
prefs = getSharedPreferences(prefName, 0 );

SharedPreferences.Editor editor = prefs.edit();

if (twitter.isChecked() == true)
{
    onoffTwitter = true;
    editor.putBoolean(TWITTER_KEY, true);
    onoffTwitter = true;
}

if (twitter.isChecked() == false)
{
    onoffTwitter = false;
    editor.putBoolean(TWITTER_KEY, false);

    onoffTwitter = false;
}

Toast.makeText(getBaseContext(), 
               "was the twitter checked" + twitter.isChecked(), 
               Toast.LENGTH_SHORT).show();

editor.commit(); 
```

这段代码来自另一个隐藏按钮的活动。

```
SharedPreferences prefs = getSharedPreferences(prefName, 0);
buttonStatus = prefs.getBoolean(TWITTER_KEY, false); 
Log.e(LOGS, "What is the value for the twitter feed" + buttonStatus);

Toast.makeText(AndroidGUIActivity.this,
               " What is the value for the twitter feed" + buttonStatus,
               Toast.LENGTH_SHORT).show();

if (buttonStatus==false) twitter.setVisibility(View.GONE); 
```

我相信我可以通过在 xml 文件中设置切换按钮的初始值来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:18:12.413

问题是我没有将偏好值传递给 twitter，但它没有存储该值。

```
prefs = getSharedPreferences(prefName, 0 );
         buttonStatus = prefs.getBoolean(TWITTER_KEY, true); 
         Log.e(LOGS, "What is the value for the timer feed" + buttonStatus);

        twitter.setChecked(buttonStatus); 
```

# google-app-engine - AppEngine 的状态

> ID：11081073
> 
> 赞同：2
> 
> 时间：2012-06-18T10:34:10.077
> 
> 标签：google-app-engine

除了下面错误中给出的链接之外，还有其他方法可以找出 AppEngine 上的服务状态吗？

LogAndContinueErrorHandler handleServiceError：memcache com.google.appengine.api.memcache.MemcacheServiceException 中的服务错误：Memcache getIdentifiables：异常获取多个键... 引起：com.google.apphosting.api.ApiProxy$CapabilityDisabledException：API 调用 memcache.Set () 暂时不可用：Memcache 暂时不可用。请参阅[http://code.google.com/status/appengine](http://code.google.com/status/appengine)了解更多信息。

我检查了它，但它显示所有类别的错误率为 0%。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:52:45.857

特定的内存缓存问题现在似乎已解决，但通常您应该使用 Capabilities API（[Java](https://developers.google.com/appengine/docs/java/capabilities/)和[Python](https://developers.google.com/appengine/docs/python/capabilities/)）来检查 API 当前是否不可用。

# actionscript-3 - Flex 4 - 工具提示总是显示在每个控件的顶部。

> ID：11081075
> 
> 赞同：0
> 
> 时间：2012-06-18T10:34:22.480
> 
> 标签：actionscript-3, apache-flex, flash-builder

如何将 Flash builder Tooltip 的属性或 CSS 样式设置为始终显示在每个控件的顶部（Flex 默认控件，如 textInput、combo、checkbox）？

我需要在一个地方设置布局/位置并应用于整个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:48:47.880

本教程的最后一个示例展示了如何使用指定 x 和 y 的 ToolTipManager.createTooltip 将工具提示定位在您想要的任何位置。

[http://livedocs.adobe.com/flex/3/html/help.html?content=tooltips_4.html](http://livedocs.adobe.com/flex/3/html/help.html?content=tooltips_4.html)

始终显示工具提示（Flex 3，但可能与 Flex 4 impl 非常相似） [http://flexdevtips.blogspot.ie/2009/08/always-showing-error-tips-validators.html](http://flexdevtips.blogspot.ie/2009/08/always-showing-error-tips-validators.html)

希望这可以帮助

乙

# javascript - 使外部 div 具有一定的高度，而内部 div 位置更改为固定

> ID：11081085
> 
> 赞同：0
> 
> 时间：2012-06-18T10:35:15.163
> 
> 标签：javascript, css

当我向下滚动页面时，我插入了一个代码来修复窗口顶部的 div。我已将此 div 插入到包装 div 中，并将两个 div 的高度都设置为 80px；当我向下滚动页面时，内部 div 位置更改为固定，而包装器 div 是静态的，但是在对其进行防火检查后，我可以看到它的高度在检查时缩小了，但 px 中的高度没有改变。如何使外部 div 的高度保持为 80px，而内部 div 的高度也为 80px，并且其位置更改为固定。

例如：

```
<div id="navbarWrapper" style="height:80px;position:static">
         <div id="navbar" style="height:80px">
              <ul><li></li></ul>
         </div>
</div> 
```

现在，我有一个滚动事件，它捕获滚动，当它发生时，我将 #navbar 设置在固定位置，当我检查 dom 时，我看到 #navbarWrapper 缩小了，并且由于 #navbar 位置更改为固定，它被取出窗口中的 dom 元素层次结构和包装器 div 缩小了，我希望它仍然具有 80px 的高度，尽管它现在是空的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:41:08.120

如果要固定某个**div**的位置，则必须使用`position:fixed;`使包装器 div 固定。为了更加完美，您也可以共享代码。

# ruby-on-rails - 非常奇怪的编码错误只是有时发生

> ID：11081088
> 
> 赞同：1
> 
> 时间：2012-06-18T10:35:27.923
> 
> 标签：ruby-on-rails, encoding, haml

我们使用的是 Rails 3.2.3、Ruby 1.9.1 和 HAML。我们有一个 Post 模型，只有在 Internet Explorer 9 中有时才会发生一些非常奇怪的事情。

```
ActionView::Template::Error (incompatible character encodings: UTF-8 and ASCII-8BIT): 
```

错误在以下行中：

```
= raw @post.content 
```

Wich 从数据库中返回帖子的内容。注意内容有 HTML 标签。

奇怪的是：

*   该错误仅在某些使用 IE 9 的机器上显示。（我们无法在使用相同 IE 9 构建的其他机器上重现该错误）
*   该错误仅有时会发生。

我们已经尝试过这个没有运气（同样的错误）：

```
= raw @post.content.force_encoding('utf-8') 
```

有什么见解吗？提前致谢。

**更新** 现在进行一些更改后，错误显示在以下行中：

```
37:         .social 
```

该行没有什么奇怪的，只有空格（不是制表符）和“.social”字符串。这太疯狂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:12:54.247

好的，终于找到问题了。那是个

```
 = link_to "Back" :back 
```

It's better explained here: [Non ascii characters in link_to is causing the app to fail in internet explorer 9 in rails app](https://stackoverflow.com/questions/9071271/non-ascii-characters-in-link-to-is-causing-the-app-to-fail-in-internet-explorer)

# java - Java 上的服务器端，Netty 和 C++ 或 Objective C 上的客户端

> ID：11081094
> 
> 赞同：1
> 
> 时间：2012-06-18T10:35:58.983
> 
> 标签：java, c++, objective-c, netty

我正在制作客户端-服务器应用程序，我们选择 Netty 作为连接管理框架。我们使用 SSL TCP 连接。截至目前，客户端也在 Java 上制作。但未来该项目应该支持移动设备：Android 和 iOS。问题是：在 Netty 上实现 C++ 或 Objective C 客户端连接到 Java 服务器有多痛苦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-01T10:44:29.043

您可以使用[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)，我已将它用作客户端和在 Netty 中实现的服务器，使用我定义的协议以 JSON 形式发送和接收数据，它与 Netty 一样好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:53:13.640

这实际上取决于您使用的协议。如果您定义一个协议，将序列化的 java 对象作为二进制发送，那么您[将](http://netty.io/docs/stable/xref/org/jboss/netty/example/objectecho/package-summary.html)难以用非 JVM 语言编写客户端。如果您使用基于文本的协议（请参阅[此处](http://netty.io/docs/stable/xref/org/jboss/netty/example/securechat/package-summary.html)）或基于 HTTP 的 Web 服务，那么这将很容易。

# ruby-on-rails-3 - 如何在 rails 3 中使用 Facebooker2 对 valid_session 进行 rspec？

> ID：11081105
> 
> 赞同：4
> 
> 时间：2012-06-18T10:36:30.623
> 
> 标签：ruby-on-rails-3, rspec, rspec-rails, facebooker2

我对 Rails 很陌生。我一直在使用 RSpec 开发我的应用程序。我刚刚遵循了Facebooker2的[教程](http://www.engineyard.com/video/21045039)`before_filter`并添加了用于身份验证。

```
#app/controller/application_controller.rb
before_filter :ensure_authenticated 
```

但是，我的规格（例如下面的规格）失败了，因为没有可以理解的有效会话。

```
#spec/controllers/answers_controller_spec.rb
describe "GET index" do
  it "assigns all answers as @answers" do
    get :index, {}, valid_session
    assigns(:answers).should include(answers(:reading))
  end
end 
```

但我似乎无法找到一种方法来伪造一个有效的会话以供 rspec 在以下函数中使用。

```
#spec/controllers/answers_controller_spec.rb
def valid_session
  {}
end 
```

有办法吗？如果不是，那么在这种情况下，rails 的处理方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:06:27.043

如果您不关心测试实际身份验证并且只想模拟有效会话，则可以删除过滤器：

```
controller.stub(:ensure_authenticated).and_return(true) 
```

编辑：您可能需要 ApplicationController.stub(...)

# c# - 对整数数据进行逻辑排序

> ID：11081109
> 
> 赞同：-4
> 
> 时间：2012-06-18T10:36:43.383
> 
> 标签：c#, .net, .net-4.0

我有以下列表模式可供使用。

```
Values : 
20,
25,
30,
35,
40,
45,
50,
55,
60,
70,
75,
80,
90,
100,
120 
```

接下来我有另一组像这样的值：

```
200,225,300,50,45,75, 15, 72 
```

现在对于 value `200`，我想要算法来获取可能导致它总和的可能值

```
LIST [100+100], [100+50+50], [50+50+50+50], [120+80].. 
```

同样对于`225`：

```
[25+120+80], [25+100+100], [100+45+80].. 
```

并将其放在另一个列表中。

非常适合`15`,

它可以获取`[20]`

因为`72`它可以获取 [70], [75]

任何机构都可以帮助我得出这个逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:50:41.377

这里有一些东西可以帮助你开始：

```
var zs = ys.Select(y => Tuple.Create(y, xs.Subsets().Where(s => s.Sum() == y))); 
```

# java - 每种语言的 Struts CSS/图像

> ID：11081110
> 
> 赞同：0
> 
> 时间：2012-06-18T10:36:53.010
> 
> 标签：java, localization, internationalization, struts, struts-1

我使用 Struts 1 作为 MVC 库在 Java 中部署了一个 Web 应用程序。我需要根据所选语言提供不同的 CSS/Images 文件夹。我已经用 4 种不同的语言配置了 WebMessageResources.properties。

我采用的一种方法是在消息资源中定义 CSS/Images 文件夹的根路径。但是，我发现这有点“脏”，需要对整个代码进行更改。

例如，在我的一个 JSP 页面中，我被迫使用 JSP 标记获取路径，而不是连接 css href 中的字符串。

> MessageResources mres = MessageResources.getMessageResources(Constants.RESOURCES_BUNDLE); Locale locale = (Locale) pageContext.getSession().getAttribute(Globals.LOCALE_KEY); 字符串 langResources = mres.getMessage(locale, "path.resources");

……

```
<link rel="stylesheet" type="text/css" href="<%= langResources %>css/styles.css" /> 
```

有没有更好的“开箱即用”方式来做到这一点？我对 Struts 不是很熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:42:21.903

struts 具有对 i18n 的内置支持。看到这个

[http://www.mkyong.com/struts2/struts-2-i18n-or-localization-example/](http://www.mkyong.com/struts2/struts-2-i18n-or-localization-example/)

[http://exadel.com/tutorial/struts/5.2/strutstutorials-i18n.html](http://exadel.com/tutorial/struts/5.2/strutstutorials-i18n.html)

# php - CodeIgniter 2.1 和 JQuery - ajax 没有按预期工作

> ID：11081115
> 
> 赞同：0
> 
> 时间：2012-06-18T10:37:31.477
> 
> 标签：php, javascript, jquery, codeigniter

我有以下JS代码：

```
var forma = $('form#mali_oglas'),
    pomoc = $('div[role=pomoc]'),
    div = $('.mali_oglas_pomoc'),
    input = forma.find('input, textarea'),
    code = forma.find('#code');   

    input.on('click', function(){
        var name = $(':input:focus').attr("name");
        pomoc.fadeOut('slow').promise().done( function(){ div.find("[data-pomoc='" + name + "']").fadeIn('slow'); });            
    });

    code.on('focusout', function(){
        console.log(code.val());
        $.ajax({
           type: 'POST', 
           url: '<?php echo base_url() ?>global_info/gi_get_ad_payment_code',
           data: 'code=' + code.val(),
           success: function(){
             for(i = 1; i<=4; i++)
            {
               code.after('<label for="image' + i +'">Slika</label><input type="file" name="userfile" id="image' + i +'" />');
            }  
            code.after('<input type="hidden" name="time" value="' + time + '"');
           },
           error: function(){
               alert('nije uspeh');
           }
        }); /* KRAJ NA AJAX */
        }); 
```

和 Codeigniter 功能：

```
function gi_get_ad_payment_code()
        {
            $q = $this->db->get_where('code_payment', array('code' => $_POST['code']));
            if ($q->num_rows() == 0 ){
                return FALSE;
            } else 
            {
                return TRUE;
            }
        } 
```

问题如下：它总是成功的，即使 codeigniter 函数返回 false。另外，我需要这个函数在成功时只附加一次输入字段（目前它正在附加到每个焦点上）。问题出在哪里，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:43:23.130

从 CodeIgniter 控制器方法返回`true`或返回`false`不会影响返回给客户端的内容。

相反，用于[`show_eror()`](http://codeigniter.com/user_guide/general/errors.html)注册错误，并在成功时输出其他*内容*（使用`echo`或更优选[CodeIgniters View system](http://codeigniter.com/user_guide/general/views.html)）；

```
 $q = $this->db->get_where('code_payment', array('code' => $_POST['code']));

    if ($q->num_rows() == 0 ){
        show_error('Whoops, no results :(');
    } else 
    {
        echo 'Success';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:39:53.847

你可以从服务器返回多个值到客户端，并在事件“成功”ajax中做你想做的事（添加参数“data”）：

```
$.ajax({
           type: 'POST', 
           url: '<?php echo base_url() ?>global_info/gi_get_ad_payment_code',
           data: 'code=' + code.val(),
           success: function(data){
                switch(data)
                {
                  case 'success':
                        code.after('<label for="image' + i +'">Slika</label><input type="file" name="userfile" id="image' + i +'" />');
                        break;

                  case 'whoops':
                        // ....
                        break;

                  default:
                        code.after('<input type="hidden" name="time" value="' + time + '"');
                        break;
                }
           },
           error: function(){
               alert('nije uspeh');
           }
        }); 
```

# symfony - 检查实体字段类型是否在 Twig 中返回值

> ID：11081116
> 
> 赞同：1
> 
> 时间：2012-06-18T10:37:32.043
> 
> 标签：symfony, twig, symfony-forms

我在表单中有一个[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)，如果 Twig 返回任何值，我如何检查它？

实体字段类型：

```
$builder->add('users', 'entity', array(
    'class' => 'UserBundle:User',
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('u')
    },
)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:41:06.367

要检查的正确变量是：`form.users.vars.choices`

所以代码是：

```
{% if form.users.vars.choices|length > 0 %}     
   {# actions #}
{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:16:15.607

尝试这个：

```
{% if users.options|length > 0 %}
   {% for option in users.options %}                    
      {# some action #}
   {% endfor %}
{% endif %} 
```

# regex - Perl 负面展望

> ID：11081118
> 
> 赞同：2
> 
> 时间：2012-06-18T10:37:44.910
> 
> 标签：regex, perl

这是一个小而实用的 Perl 代码片段：

```
my $content = qq{<img src='h};
if ($content =~ m{src=(?!('*)http://)}) {
   print "Match '$1'\n";
}
else {
   print "No match\n";
} 
```

它打印

```
Match ''' 
```

那就是负前瞻中的正则表达式（'*）确实已被捕获并包含'。

但是，如果我将第一行替换为

```
my $content = qq{<img src='i}; 
```

脚本打印

```
Match '' 
```

意味着尽管整个正则表达式匹配，但 ' 尚未被捕获。

任何人都可以解释有什么区别以及我怎样才能做到这一点，以便 ' 总是被捕获（这当然是一个真实案例的简化）。

提前致谢

**附录**

这就是raina77ow 的全部内容。想法是替换img标签中src属性的内容。以下规则适用：

1.  如果内容以 ' 开头，则必须以 ' 结尾。
2.  如果内容以 " 开头，则必须以 " 结尾。
3.  内容可以不加引号。
4.  如果内容（可能的引用之后）以 http:// 开头，则应保持原样，否则 URL 的最后一个组成部分（图像文件名）必须保留，并且前面的部分必须替换为 smth。

最初我想使用以下正则表达式（实际上与您建议的相同）

```
$content =~ s{<\s*img\s+(.*?)src\s*=\s*(["']*)(?!http://).*?([^/"']+)\2(\s+[^>]+)*>}
             {'<img ' . $1 . 'src="' . 'SMTH' . $3 . '"' . $4 . '>'}sgie; 
```

但由于某种原因，它与字符串匹配

[img src=' http: [//qq.com/img.gif'/](http://qq.com/img.gif) ]

（尖括号替换为方括号）。

虽然它不应该因为 ' 后跟 http://。使用

```
$content =~ s{<\s*img\s+(.*?)src\s*=\s*(["'])*(?!http://).*?([^/"']+)\2(\s+[^>]+)*>}
             {'<img ' . $1 . 'src="' . 'SMTH' . $3 . '"' . $4 . '>'}sgie; 
```

也是不合适的，因为在这种情况下 \2 将不匹配空字符串。

无法解决这个问题，我决定寻找一些解决方法。唉...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T13:24:02.807

使用强大的 HTML 解析器/库应用问题中的四个规则：

```
use strictures;
use URI qw();
use Web::Query qw();
my $w = Web::Query->new_from_html(<<'HTML');
<html><head></head><body>
<img src='http://example.com'>
<img src="http://example.com">
<img src=http://example.com>
<img src='foo/bar/baz.png'>
<img src="foo/bar/baz.png">
<img src=foo/bar/baz.png>
</body></html>
HTML

$w->find('img')->each(sub {
    my (undef, $img) = @_;
    my $u = URI->new($img->attr('src'));
    unless ($u->scheme) {   # skip absolute URIs
        $u->path_segments('SMTH', ($u->path_segments)[-1]);
        $img->attr('src', $u);
    }
});
print $w->html; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:51:38.717

好吧，修复它很容易：

```
my $content = qq{<img src='h};
if ($content =~ m{src=('*)(?!http://)}) {
   print "Match '$1'\n";
}
else {
   print "No match\n";
} 
```

但是解释你描述的错误（我认为这确实是 Perl 正则表达式引擎的错误 - 为什么在和情况下`('*)`应该匹配不同？）是另一个故事。)`'h``'i`

**更新：**请原谅我以 Cthulhu 方式提交，但这段代码可能会满足您的要求：

```
sub correct { # just an example
  my $orig = shift;
  $orig =~ s/\.gif$/\.jpg/;
  return $orig;
}

my $img = "<img src='http://localhost.com/pic.gif' />";
$img =~ s{
  (< \s* img \s+ src \s* = \s*)
  (["']?)
  ([^ '">]+)
  \2
}{ 
  $1 . $2 . ( substr($3, 0, 7) eq 'http://' ?  $3  : correct $3 ) . $2
}xe;

print $img; 
```

尽管如此，那些说最好使用 HTML Parser 的人，我认为他们中的任何一个都得到了最大的线索。)

# iphone - 无法在 didFinishWithResult 中显示模态视图控制器

> ID：11081119
> 
> 赞同：0
> 
> 时间：2012-06-18T10:37:47.627
> 
> 标签：iphone, objective-c, ios, ipad

是否可以在 didFinishWithResult 中显示模态视图控制器？

我有一个 iPad 应用程序，它有 3 个视图 Home、Start 和 Login。可以使用主页视图中的开始和登录按钮启动开始和登录模式视图。

如果单击登录按钮，在登录视图中成功登录操作 (didFinishWithResult) 后，我可以关闭登录视图，但我无法启动开始视图。但控件仍保留在主视图上。

对于上述情况，我没有收到任何错误。

**应用代理.m：**

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

HomeViewController  * homeview=[[HomeViewController alloc] init];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:homeview];

self.rootViewController = navigationController;
[navigationController setNavigationBarHidden:YES];
self.rootViewController.view.frame = [[UIScreen mainScreen] applicationFrame];
[self.window addSubview:self.rootViewController.view];
[window makeKeyAndVisible]; 
```

下面是在主视图中展示登录模式视图的方法

**呈现登录模式视图**

```
LoginViewController * vc1 = [LoginViewController loginViewControllerWithNavBar:YES]; 
vc1.boxLoginDelegate = self;
[self presentModalViewController:vc1 animated:YES]; 
```

> 注意：LoginVeiwController 是由 HomeViewController 呈现的模态视图控制器。通过解除 LoginVeiwController 来启动/呈现另一个模态视图控制器（启动控制器）是否正确，如下所示。因为每当 LoginVeiwController 关闭时，控件都会保留在 HomeVeiwContrller 上，而不是启动/呈现 StartViewController：

**主页视图**：

下面是主视图中的方法，它将在成功登录时关闭登录视图并尝试启动开始视图。

```
- (void)loginViewController:(LoginViewController *)loginViewController didFinishWithResult:(LoginResult)result {
    [self dismissModalViewControllerAnimated:YES];

    startview = [[[startViewController alloc] init] autorelease]; 
    [self.navigationController setNavigationBarHidden:YES];
    [self presentModalViewController:startview animated:YES];

} 
```

**如果我在单击按钮时直接显示 StartView，它会很好地启动，但不会在 didFinishWithResult 上启动**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:07:24.247

当你的 currentViewController DissMiss 使用这一行然后尝试下面的代码......

```
[self performSelector:@selector(PresentView) withObject:nil afterDelay:0.2];

-(void)PresentView
{
    [self.navigationController presentModalViewController:startview animated:YES];
} 
```

希望，这对你有帮助.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:57:10.460

I guess it's about the animation. While the previous controller is dismissing,

```
 [self presentModalViewController:startview animated:YES]; 
```

is called.

You can verify my guess by setting the animation to NO. Or directly use my suggestion to see if it works.

If I am correct, you can set them back to YES. Besides, instead of directly calling the

```
[self presentModalViewController:startview animated:YES]; 
```

You can try:

```
[NSTimer scheduledTimerWithTimeInterval:0.5f target:self selector:@selector(showController) userInfo:nil repeats:No];

 - (void)showController {
    [self presentModalViewController:startview animated:YES];
 } 
```

edit:

I finally found out how I solve this similar problem before:

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{    
    [UIView animateWithDuration:0.5 
                     animations:^{
                            [self dismissModalViewControllerAnimated:YES];
                     } 
                 completion:^(BOOL finished) {
                     NSURL *path = [info objectForKey:@"UIImagePickerControllerMediaURL"];
                     VideoConfirmViewController *videoConfirmCon = [[VideoConfirmViewController alloc]initWithFileURL:path];
                     [self presentModalViewController:videoConfirmCon animated:YES];
                 }
];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:57:26.150

Try like this. I think it will be helpful to you.

```
 self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    HomeViewController  * homeview=[[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:homeview];
    [self.window addSubview:navigationController.view];
    [window makeKeyAndVisible];
return YES: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-12T23:22:22.703

如果您不需要与非常旧的 iOS 版本兼容，最好使用

```
 -(void)presentViewControllerAnimated:completion:
 -(void)dismissViewControllerAnimated:completion: 
```

代替

```
 -(void)presentModalViewController:animated:
 -(void)dismissModalViewController:animated: 
```

在这种情况下

```
- (void)loginViewController:(LoginViewController *)loginViewController didFinishWithResult:(LoginResult)result 
{
    [self dismissViewControllerAnimated:YES completion: ^{
        startview = [[[startViewController alloc] init] autorelease]; 
        [self.navigationController setNavigationBarHidden:YES];
        [self.presentingViewController presentViewControllerAnimated:YES completion:NULL];

    }];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T14:56:42.887

你需要在你的代码中重构这一行， `[self dismissModalViewControllerAnimated:YES];`原因是当调用dismiss时，你失去`self`了控制器的上下文，因此该行 `[self presentModalViewController:startview animated:YES];`没有进一步显示任何控制器。快速测试只需评论驳回线并亲自查看。

# linux - Alsa：创建虚拟麦克风

> ID：11081124
> 
> 赞同：2
> 
> 时间：2012-06-18T10:38:25.013
> 
> 标签：linux, audio, virtual, microphone, alsa

如何正确更改 .asoundrc 文件以实现虚拟麦克风？

我有以下 .asoundrc 文件，但它不起作用：

```
pcm.audinp {
        type file
        slave.pcm front
        file /dev/null
        infile /writable/home/user/virtualmic.pipe
        format "raw"
}

pcm.!default {
        type plug
        slave.pcm "audinp"
} 
```

# ruby-on-rails - 在 Rails 3 中使用 link_to 增加值

> ID：11081128
> 
> 赞同：0
> 
> 时间：2012-06-18T10:38:36.970
> 
> 标签：ruby-on-rails

当用户单击帖子中的“喜欢”链接时，我想更新帖子表中的视图计数值............

模型

```
class Post < ActiveRecord::Base
  belongs_to :user
  has_many :answers
  attr_accessible :acceptedanswerid, :body, :userid, :tag, :title, :viewcount, :vote, :anscount
  validates_presence_of :title ,:body ,:tag
  scope :unanswered, where(:anscount => 0)
  scope :byvote, where(:vote=>maximum("vote"))
end 
```

控制器

**post_controller.rb**

```
 class PostController < ApplicationController
  def index
   @post=Post.new
   @answer=Answer.new
   @anscomment=Anscomment.new
   @posts=(Post.all).reverse
   @posts1=Post.all(:limit => 5 ,:order => "id desc")
   @unanswered = Post.unanswered
   @byvote=Post.byvote
   #fid=params[:fid]
   session[:flag]=nil
   fid=params[:fid]
   session[:flag]=fid
  end

  #def new
   # @post=Post.new
 # end

  def create
  # @post=Post.new(params[:post])
   @post=Post.new(params[:post])
   respond_to do |format|
   if @post.save
      #if (session[:flag!=nil])
      #session[:flag]=1
      #end
      format.html { redirect_to :controller=>"post" ,:action=>"index" }
     format.json { render json: @post, status: :created, location: @post }
     #redirect_to :controller=>"post" ,:action=>"index"
    else
     #session[:flag]=3
     format.html { redirect_to :controller=>"home" ,:action=>"index" }
     format.json { render json: @post, status: :created, location: @post }
     #redirect_to :controller=>"post" ,:action=>"index"
   end  
  end
  end

  def show
    id=params[:id]
    @post = Post.find(params[:id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

        def vote
             vcount = User.find(params[:id])
             vcount.update_attribute(:viewcount, vcount.viewcount + 4)
          end
end 
```

看法

**意见/post/show.html.erb**

```
<table align=center width="60%" bordercolor="black" >

    <tr>
        <td align="center">
            <h2>
                <%=@post.title%> 
            </h2>
        </td>
    </tr>
    <tr>
        <td align="center" width="60">
            <h3><%=@post.body%></h3>
        </td>
    </tr>
    <tr>
        <td align="center">
            This Post comes under:<%=@post.tag%>
        </td>
    </tr>
    <tr >
        <td align="right">
            <%id=@post.userid %>
            <%if id==nil %>
            <%id='15'%>
            <%end%>
            <%@user=User.find(id)%>
            posted by:<%=@user.fullname%> <p>on <%=@post.created_at%></p>
            <%id=nil%>
            <h1 align="left"><%=@post.answers.count%></h1>
            <!--<%Post.increment_counter(:viewcount,@post.id) %>-->
            <%= link_to "like", {:controller => "post", :action => "vote", :id => @post.id } %>
        </td>
    </tr>

</table> 
```

当我单击“喜欢”链接时，我收到一个错误，例如-----找不到带有 id=vote 的帖子

**应用程序跟踪：** app/controllers/post_controller.rb:42:in `show'

请帮我找出错误.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:49:20.990

我认为这是因为在您的 routes.rb 文件`/post/:id`中之前`:controller/:action:/:id`，所以您必须为此操作创建命名路由。

```
resources :posts do
  get 'vote', on: member
end 
```

和使用路径助手`vote_post_path(post)`

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# wcf - 通过 IIS 使用 ghostscript 打印 pdf

> ID：11081132
> 
> 赞同：0
> 
> 时间：2012-06-18T10:38:55.273
> 
> 标签：wcf, iis, pdf, printing, ghostscript

我参考了这个代码片段（http://stackoverflow.com/questions/2599925/how-to-print-pdf-on-default-network-printer-using-ghostscript-gswin32c-exe-she），它工作得很好。我可以从我的 wcf 服务静默打印文件。

但是，如果我通过 IIS 运行它，我会遇到问题。意味着“http://localhost:5030/mywcf”工作完美。如果我将其更改为“http://172.16.16.1/mywcf”，那么我将面临以下错误。这是堆栈跟踪。

```
-------------------------------------------------- ---

[06-18-12 03:38:48] GetSignoff()：句柄无效：在 System.Diagnostics.Process.CreatePipeWithSecurityAttributes(SafeFileHandle& hReadPipe, SafeFileHandle& hWritePipe, SECURITY_ATTRIBUTES lpPipeAttributes, Int32 nSize)
   在 System.Diagnostics.Process.CreatePipe（SafeFileHandle& parentHandle，SafeFileHandle& childHandle，布尔型 parentInputs）
   在 System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo)
   在 System.Diagnostics.Process.Start()
   在 System.Diagnostics.Process.Start（ProcessStartInfo startInfo）
   在 XX.XX.PrintPDF.PrintVSPDF(String ghostScriptPath, Int32 numberOfCopies, String printerName, String pdfFileName) 在 D:\XX\Code\Server_MU\eBusiness\Business\PrintPDF.cs:line 551
   在 D:\XX\Code\Server_MU\XX\Business\PrintPDF.cs: 498 中的 XX.Business.PrintPDF.Print(String patientId, String reportName, String loginId, String mailMessageId, String deviceId, String facilityId, String noteId)
--------

```

然后我尝试执行通过 cmd.exe 生成的相同命令，它工作正常。任何提示可能会有所帮助。

提前致谢。

rgds, pa'1'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:47:10.610

为此，我得到了解决。我在这里为不同的逻辑所做的帖子。也适用于这个要求。

[html或pdf在服务器端打印c#](https://stackoverflow.com/questions/11208167/html-or-pdf-printing-on-server-side-c-sharp)

问候， 帕万 N

# hibernate - Hibernate：为什么在这种情况下最后执行插入操作？

> ID：11081133
> 
> 赞同：2
> 
> 时间：2012-06-18T10:39:02.350
> 
> 标签：hibernate

我正在使用 Hibernate 插入数据并使用相同的会话获取数据，如下所示

```
StudentBean st1 = new StudentBean();

st1.setSid(513);
st1.setSname("Ravi)");
st1.setTotMarks(0.0f);

Session sess = factory.openSession();
sess.persist(st1);

StudentBean   st2 = (StudentBean) sess.get(StudentBean.class, 510);
System.out.println(st2.getSname()); 
```

当我在休眠配置文件中使用 show_sql true 时，使用此行输出为

**选择查询**

```
Hibernate: select studentbea0_.sid1 as sid1_0_0_, studentbea0_.sname1 as sname2_0_0_, studentbea0_.tot_m1 as tot3_0_0_ from student1 studentbea0_ where studentbea0_.sid1=? 
```

**插入查询**

```
insert into student1 (sname1, tot_m1, sid1) values (?, ?, ?) 
```

任何人都可以告诉我为什么插入操作是由休眠引擎最后执行的，即使 Session.persist 在 get 方法之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:04:07.057

当您调用 persist() 时，实例不会立即保存到数据库中。它只是保存在休眠会话（一级缓存）中。当您调用 get() 时，休眠首先检查会话中 id 为 510 的学生，没有找到它，所以转到数据库。这会生成选择。当会话被刷新时（即当您调用 session.close() 时），会话中的所有实例都会被检查，并且任何更改都会写入数据库。这会生成插入。此外，如果您更改了 510 的任何属性，它们将被自动写出，生成更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:44:35.757

显然，Hibernate 假定它单独拥有您正在使用的数据库，并且“知道”有问题的记录不能被数据库的另一个用户背后更改。因此，您`Session.get()`不会触发 SQL `SELECT`，而是仅从 Hibernate 的缓存中返回该对象。

一个更有趣的问题是为什么`SELECT` *在*`INSERT`. 这可能与 Hibernate 填充其一级缓存有关，或者可能是由于您没有显示前面的一些代码。

# php - (php) fwrite 擦除并且不写入

> ID：11081135
> 
> 赞同：0
> 
> 时间：2012-06-18T10:39:06.863
> 
> 标签：php, fwrite

我有一个文件“tw.txt”，其中包含文本“测试文本”。

如果我尝试在“tx.txt”中用 写“lol” `fwrite`，则内容（“测试文本”）将被简单地删除而不是替换。

服务器没有显示错误，但是，我可以看到我的`Error: can't write in file.`

`CHMOD`在每个文件和文件夹中设置为 777，从“var”代表到网站文件夹。如果我尝试用 读取文件`fopen`，没问题。我试图`chmod`用 PHP 改变...没有成功。我试图追加，它擦除。

该代码在另外两台服务器上运行良好。

有什么线索吗？谢谢。

```
<?php

ini_set('display_errors', 'On');    
ini_set('allow_url_fopen', '1');
error_reporting(E_ALL);

$fd=fopen("tw.txt","w") or die("Error: can't open file.");  
//chmod("tw.txt", 511);     
fwrite($fd,"lol") or die('Error: can't write in file.');
fclose($fd); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:47:45.553

您是否尝试过其他打开方式？

如果您需要附加一些数据，您应该尝试以下操作：

```
$fd=fopen("tw.txt","a+") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:53:40.083

```
 $myFile = 'tw.txt';
                     $fh = fopen($myFile, 'w') or die("can't open file");
                     fwrite($fh, 'lol');
                     fclose($fh); 
```

# javascript - Magento - 单击时显示图像标签

> ID：11081138
> 
> 赞同：0
> 
> 时间：2012-06-18T10:39:19.617
> 
> 标签：javascript, jquery, magento, click

不确定是否有人可以帮助我，但我有一个产品查看页面，在顶部我有一个 h1 标签中的产品名称。

每个产品都附有一系列图像，这些图像以标签为颜色，即背面、象牙色、酒红色等。

我希望产品名称显示如下：

产品名称 | 颜色

我已经设法让它发生在第一个（默认）图像上。

因此，当您转到产品页面时，名称为：

奥尔巴尼 | 黑色（正是我想要的）

我现在希望当您单击产品名称的不同颜色选项（即图像）时更改为：

奥尔巴尼 | 象牙奥尔巴尼 | 勃艮第奥尔巴尼 | 巧克力等等等等。

我得到了一定的帮助，但现在我被困住了。

有人建议我更改主题的 script.js 文件以包含以下内容：

```
$('.more-views a').click(function(){
$('#label').text( $('img', this).attr('alt')  ); }); 
```

我的 h1 标签周围的代码如下：

```
<div class="product-name">
            <h1><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?>
            <span id="label"><?php echo ' | ' ?><?php echo $_product->getData('image_label');?></span></h1>
         </div> 
```

如果有人知道如何实现这一点，我将不胜感激。

提前致谢。

有问题的页面的链接在这里：

[http://dansiop.com/yarwood/index.php/albany.html](http://dansiop.com/yarwood/index.php/albany.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:56:23.323

您已经在页面中加载了几个 Javascript 库（包括 scriptaculous、prototype 和 jQuery）。看到你没有使用`jQuery.noConflict()`，你将不得不使用`jQuery`而不是`$`如果你设置使用 jQuery。

此外，您已经加载了 jQuery 1.7+，所以我建议您使用委托来处理这个问题。

```
// don't forget document ready
jQuery(function ($) {

    // let's cache the label
    var _label = $('#label');

    $('.more-views').on('click', 'a img', function () {
        _label.text($(this).attr('alt'));
    });

}); 
```

如前所述，您必须`alt`在图像中添加一个属性才能使其正常工作。`alt`如果没有什么可开始的，那么获取价值并显示它没有多大意义。

```
<img src="" alt="Blue" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:47:26.810

```
$('.more-views a').click(function(){
   $('#label').text( $(this).find('img').attr('alt') );
}); 
```

请在此答案之前查看我的[评论。](https://stackoverflow.com/questions/11081138/magento-display-image-label-on-click/#comment14506689_11081138)

# ruby-on-rails-3 - 我在 ActiveRecord 中使用 save 方法时出错

> ID：11081139
> 
> 赞同：0
> 
> 时间：2012-06-18T10:39:20.747
> 
> 标签：ruby-on-rails-3, activerecord, methods, sqlite, sqlite3-ruby

我创建了一个`User`具有属性`name`和`email`. 因此，为了创建用户，我打开了 rails 控制台并使用了沙箱。

> > rails 控制台 --sandbox user1 = User.new( name: "example" , email: example@org.com) => #

但是当我这样做时

```
>>user1.save 
```

我收到以下错误：

```
1.9.3p194 :012 > user2.save
   (0.3ms)  SAVEPOINT active_record_1
ActiveRecord::StatementInvalid: SQLite3::SQLException: near "SAVEPOINT": syntax error: SAVEPOINT active_record_1 
```

可能的错误是什么？sqlite3 1.3.6 和 activerecord 3.2.5 之间的一些依赖问题

# iphone - 如何捏放大图片库

> ID：11081141
> 
> 赞同：0
> 
> 时间：2012-06-18T10:39:41.807
> 
> 标签：iphone, objective-c, ios, uiimageview

我想要多张照片，比如标准画廊

![标准画廊](../Images/e47b3457ac0d647d77201a304af61bcf.png)

我想捏放大**所有**照片。我可能对每张图片都有一个 UIImageView （我是对的），所以当我捏入画廊视图时，我想缩放所有画廊。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:55:19.460

Try this: put all your photos in one view, that would be subview of your scrollview. Then, in your scrollview delegate implement method

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 
```

In which just return view that contains all photos. Do not forget to set appropriate scrollview content size and maximum and minimum zoom scale.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T10:58:29.810

put the pictures in a scollview. set the property `scrollview.scalePagesToFit;` . set the scrollView delegate.

# javascript - JSON 响应数据中的数据长度

> ID：11081148
> 
> 赞同：2
> 
> 时间：2012-06-18T10:40:23.180
> 
> 标签：javascript, jquery, ajax, json

下面代码的输出是这样的：

```
[{"user_name":"Maria","user_surname":"Dominguez"},{"user_name":"Celia","user_surname":"Paris"}]
95 
```

我预计长度为2。有什么解释吗？

```
$.get(
    "http://myfirm.local/school/view-more-users",
    {"type": user_type, "school_id": school_id, "offset": offset},
    function(data){
        console.log(data);
        console.log(data.length);
        ,  
    "json"
); 
```

哈维尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:44:45.890

```
data= JSON.parse(data);
console.log(data.length); 
```

或者

```
data= $.parseJSON(data);
console.log(data.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:43:34.970

console.log 将输出 95，因为它将您的**数据**对象解释为实际上正好有 95 个字符的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:45:18.327

因为您正在查看字符串的长度。尝试在 JSON 对象中解析它并查看长度

```
$.parseJSON(data) 
```

# php - 从一个表到另一个表并添加 PHP MYSQL

> ID：11081152
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:40:37.363
> 
> 标签：php, mysql, database

我正在尝试从`customer`一张桌子到另一张桌子上获取客户`ordertracking`ID。-但是- 订单的添加还需要它从订单中获得的产品信息。我尝试了几种方法，但无法使其正常工作。还有一件奇怪的事：

```
//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");  

//check if already customer
$result = mysql_query("SELECT * FROM customer WHERE email='$email'");
$rows = mysql_num_rows($result);

    if ($rows) 
    {
      echo '<br>Welcome back ' . $name .' '. $surname. '<br>';
    }
    else
    {
        //if new customer, add to database
        $customer = "INSERT INTO customer (customerid, name, surname, email, city, GETalcode, phonenumber) VALUES ('', '$name', '$surname', '$email', '$city', '$postalcode', '$phonenumber')";
        if (!mysql_query($customer,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New customer added" . "<br />";
        echo '<br>Welcome as our new customer ' . $name . ' '. $surname;

        mysql_close($connection);   
    }

//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

//get customer id
????????????????????
    //add new order
    $ordertracking = "INSERT INTO ordertracking (orderid, customerid, productid, brand, model, price, amount, totalcost) VALUES ('', '$customerid', '$productid', '$brand', 'model', 'price', 'amount', 'totalcost')";
    if (!mysql_query($ordertracking,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        echo "New order added" . "<br />";

        mysql_close($connection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:44:50.467

就像您首先获得客户数据一样：

```
$customerid = mysql_fetch_row(mysql_query("SELECT customerid FROM customer WHERE email='$email'")); 
echo $customerid[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:47:20.590

`mysql_insert_id()`在插入后或选择后使用`$rows['customerid']`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:03:15.133

```
$res = mysql_query("SELECT customerid FROM customer WHERE email='$email'");
while($row=mysql_fetch_array($res))
{
 $customerid=$row['customerid'];
} 
```

插入 ordertracking 表时使用此 $customerid

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T11:53:05.030

```
$customer = "INSERT INTO customer (customerid, name, surname, email, city,
             GETalcode, phonenumber) VALUES 
            ('', '$name', '$surname', '$email', '$city',
             '$postalcode', '$phonenumber')";
        if (!mysql_query($customer,$connection))
        {
            die('Error: ' . mysql_error());
            echo "Sorry, there was an error";
        }
        else
        {
            $customer_id =mysql_insert_id();
        } 
```

// 然后插入订单表

# iphone - 订购应用程序的合法 iPhone / iPad 分发

> ID：11081153
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:40:54.220
> 
> 标签：iphone, ipad, distribution

我对 Apple 许可证和我的思维方式有点困惑。

拥有 99 美元许可证的 INDIE 开发人员为第三方（公司或个人）销售/创建自定义应用程序的合法方式是什么？

例如，小咖啡吧想使用 iPhone 应用程序让服务员输入订单，然后将订单发送到私人服务器......

因此，它是一次性开发的应用程序，可以安装到 3 台设备上。

根据 Apple 的说法，这应该最终出现在商店中，因为使用临时分发销售应用程序是非法的，临时发行版仅用于测试目的？

应用程序将花费 50 美元，因此购买企业许可证来创建 50 美元的应用程序是无稽之谈，我看不到赚取 50 美元的合法途径吗？

任何人都可以帮助并解释我什么以及如何合法地做到这一点:)

ps 我不在美国，不能选择 B2B Volume 发行版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:10:28.710

我们与许多客户有类似的要求。最简单的解决方案是实现一个用户系统。由于您使用的是私人服务器，因此应该没有问题。为每个女服务员创建一个登录名，并让应用程序至少请求一次用户凭据。

显然，您还必须向 Apple Review 团队提供一个测试帐户，但在商店中拥有一个“私人”应用程序完全没问题。

# c# - 适配 csv reader 来读取 unicode 字符

> ID：11081154
> 
> 赞同：3
> 
> 时间：2012-06-18T10:41:05.627
> 
> 标签：c#, unicode

我对 csv 文件中的字符有问题，它是带有 ? 的黑色菱形。在中间。

我已经编写了解析 csv 的代码，但我不明白为什么字符串没有正确读取 unicode 字符。这可能与我的实现有关：

```
StreamReader readFile = new StreamReader(path)

try {
  while ((line = readFile.ReadLine()) != null) {
    string[] row = { "", "", "" };
    int currentItem = 0;
    bool inQuotes = false;
    if (skippedFirst && currentItem != 3) {
      for (int i = 0; i < line.Length; i++) {
        if (!inQuotes) {
          if (line[i] == '\"')
            inQuotes = true;
          else {
            if (line[i] == ',')
              currentItem++;
            else
              row[currentItem] += line[i];
          }
        } else {
          if (line[i] == '\"')
            inQuotes = false;
          else
            row[currentItem] += line[i];
        }
      }
      parsedFile.Add(row);
    }
    skippedFirst = true;
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T10:48:31.380

打开文件时指定编码。

```
using (var sr = new StreamReader(@"c:\Temp\csvfile.csv", Encoding.UTF8)) {
} 
```

您可能还想查看用于 CSV 解析的 Filehelpers：

[http://www.filehelpers.com/quick_start.html](http://www.filehelpers.com/quick_start.html)

# python - 为什么在涉及画布时这些面板未对齐？

> ID：11081156
> 
> 赞同：0
> 
> 时间：2012-06-18T10:41:13.490
> 
> 标签：python, wxpython

![在此处输入图像描述](../Images/8d3eb65043de93df0a1fb6da3428f682.png)

两个（子类）面板，一个`CanvasSubPanel`（绘制 matplotlib 图形），`UnderPanel`应该在垂直尺寸器中共存。

虽然面板中的所有内容都渲染得很好，但面板本身却画得很糟糕。

解决办法是什么？

* * *

`CanvasSubPanel`我认为相关的部分列表：

```
class CanvasSubPanel(wx.Panel):
    #LENGTH, WIDTH = SIZE
    #_bitmap = None
    __click_callback = None

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.figure = Figure()
        self.figure.set_size_inches( (10,5) )
        self.figure.set_dpi(80)
        #self.figure.tight_layout()

        self.picture   = self.figure.add_subplot(211)
        self.intensity = self.figure.add_subplot(212)
        ...       

        self.canvas = FigureCanvas(self, -1, self.figure )
        ...

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.SetSizer(self.sizer)
        self.Fit() 
```

如果我错过了重要的细节，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:00:19.790

就像迈克德里斯科尔所说的那样，育儿问题。

令人不安的面板被无意中设置为框架的子级（就像另一个面板一样），而不是带有大小调整器的面板的子级。

# mysql - 艰难的mysql嵌套表结果挑战

> ID：11081157
> 
> 赞同：1
> 
> 时间：2012-06-18T10:41:17.873
> 
> 标签：mysql, nested

我搞乱了 wordpress 为我的 jquery 用来填充表的插件创建一个 API。需要帮助弄清楚我将如何做到这一点。

第一个查询，这将获得“父”帖子：

[q1]： `Select * from posts as p where p.ID IN ({SomeIDs I am requesting})`

第二个查询，这将得到第一个的所有孩子：

[q2]： `Select * from posts as p where p.parent_postID IN ({the parentIDs from q1})`

我怎样才能运行这个查询，以便结果是一个输出。我不想每次要显示孩子时都必须继续运行第二个查询（孩子显示为默认值，我的想法是我可以限制第一个查询）。

最终结果：

```
_________________________________________________
| 身份证 | 后父 | 标题 | 中断|
-------------------------------------------------
| 第894章 0 | 主标题 | 主盘|
| 898 | 第894章 差异标题 | 差异盘|
| 907 | 第894章 差异倾斜 | 差异盘|
| 910 | 0 | 主标题 | 主盘|
| 916 | 910 | 差异标题 | 差异盘|
| 919 | 0 | 主标题 | 主盘 |
-------------------------------------------------

```

你会注意到 ID 919 没有孩子，我仍然希望它显示在结果中。

所以我尝试加入，我会丢失没有 ID = post_parentID 的记录，除非我可以做另一种类型的加入......

这个想法是 q1 上的“LIMIT”，组合结果按 q2 排序，然后制作表格时 jQuerys forloop 的结果只会更改`<TR>`如果 ID 和 post_parent 匹配的 bg

这是我必须使用的方案... Wordpress 的；也不是说在 q2 中会有关于我想展示哪些孩子的额外标准。例子。我将为孩子们添加一个 post_meta.... meta_key = 'lang_i18N' meta_value='en' 所以我可以在 q2 中为 postmeta 添加一个连接

更新：

这是第一季度：

[q1]

```
    选择
        posts.ID 作为 myItem_ID，
        posts.post_parent AS parentID，
        posts.post_title AS 标题，
        posts.post_content AS fullDesc，
        posts.post_excerpt AS shortDesc，
        posts.post_status AS 状态，
        posts.menu_order AS fetured_Order,
        json_meta.meta_value 作为 json_input，
        meta.meta_value AS vendorID,
        vendor.post_title AS vendorName,
        posts.post_modified AS 修改日期
    FROM wp_posts AS 帖子
    左连接 wp_postmeta 作为元
        ON meta.post_id = posts.ID
    左连接 wp_postmeta 作为 json_meta
        ON json_meta.post_id = posts.ID
    左加入 wp_postmeta 作为 i18N
        ON i18N.post_id = posts.ID
    左加入 wp_posts 作为供应商
        ON vendor.ID = meta.meta_value
    WHERE meta.meta_key = 'agency'
    AND json_meta.meta_key = 'json_input'
    AND posts.post_type = 'activity_item'
    AND posts.post_status = '发布'
    AND post.ID IN (1080, 1231, 1273, 1882, 1937)
    限制 0,2

```

好的，这给了我父列表...现在我想包括与 q1 相同的孩子，但也许我想要的`i18N = 'es'`意思是我想要父母是 i18N 具有的任何值字段，但我想要孩子是 'es'也许有 4 个孩子，我希望 LIMIT 只显示 2 个父母，不管他们有多少孩子（不限制孩子），这可以在一个查询中完成吗？我试图远离 PHP 只是因为它有很多数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:09:42.540

如果你想在 php 中使用递归函数来获取父行的所有嵌套子行，那么可以使用下面的：-

```
function get_categories_subcategories($id)
{
    $condition = isset($id)?"post_parent=".$id."":"post_parent=0";
    $sql="select id,post_parent,title,disruption from posts where ".$condition."";    

    $query=mysql_query($sql);

    $arr = array();

    if(mysql_num_rows($query))
    { 
        while($result=mysql_fetch_array($query))
        {   
         $arr[] = array(
         "id" => $result["id"],
         "post_parent" => $result["post_parent"],
         "title" => $result["title"],
         "disruption" => $result["disruption"],
         "child" => get_categories_subcategories($result["id"])
      );     
        }        
    }
    return $arr; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:56:34.060

Try this ::

```
Select 
id,
if_null(post_parent_id,0)

from posts as p 

left join 

(Select parent_id from posts where id= ?/*input*/) as parent_temp_table

on (parent_temp_table.parent_id = p.postID) 
```

# c# - 删除 facebook 离线访问

> ID：11081163
> 
> 赞同：0
> 
> 时间：2012-06-18T10:41:42.590
> 
> 标签：c#, windows-phone-7, facebook-c#-sdk

我正在开发一个 facebook 应用程序。现在 facebook 决定删除离线访问。

我想知道 wp7 facebook c# sdk 是否处理这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:02:14.680

facebook 决定删除允许创建长寿命令牌的离线访问权限。现在这种方法已经贬值了。现在您无法使用该权限，并且您的离线访问令牌将不再起作用。但或者，您可以制作寿命为 60 天的访问令牌。

这是 Facebook 上的文档

[Facebook 离线访问令牌文档](https://developers.facebook.com/roadmap/offline-access-removal/)

您可以通过这种方式将短期访问令牌延长 60 天。

```
 https://graph.facebook.com/oauth/access_token?             
        client_id=APP_ID&
        client_secret=APP_SECRET&
        grant_type=fb_exchange_token&
        fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

您可以通过放置 try catch 块来处理旧的过期访问令牌

```
try {
    var client = new FacebookClient("my_access_token");
    dynamic result = client.Get("me/friends");
} catch (FacebookOAuthException) {
    // Our access token is invalid or expired
    // Here we need to do something to handle this.
} 
```

希望这对您有所帮助。

# javascript - Liferay + Ext Js：设置布局

> ID：11081164
> 
> 赞同：2
> 
> 时间：2012-06-18T10:41:51.257
> 
> 标签：javascript, css, extjs

我刚开始使用 Liferay，我想使用 sensha 的 Ext JS 开发一个 portlet。我认为（从我所做的搜索中）问题在于 liferay CSS 和 Ext CSS 之间存在冲突，但仍未找到任何解决方案。

[http://i.stack.imgur.com/AYU5b.png](http://i.stack.imgur.com/AYU5b.png)

任何人都知道如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:15:50.660

不难发现 CSS 文件是否真的相互干扰。只需检查面板元素的 CSS 并查看应用了哪些规则（您正在搜索特别影响位置的规则，例如顶部/左侧/边距...）。

*如果是 Ext 的样式影响了 Liferay 的样式，那么您可以使用不同的前缀（默认为“ x-* ”）重新生成 ext-all.css 文件。请在进行调查时提供更多详细信息。

# javascript - 为什么这个字符串不能解析为 JSON？

> ID：11081167
> 
> 赞同：2
> 
> 时间：2012-06-18T10:41:57.307
> 
> 标签：javascript, json, parsing, xmlhttprequest

有问题的字符串：

```
'{"images":{"0":"<div style=\\"background:red;width:250px;height:250px;display:block;position:absolute;\\"></div>"}}' 
```

我尝试了单引号和双引号的各种组合。如果你将该字符串放入 Chrome 的 javascript 控制台，放入 JSON.parse()，它解析得很好。

问题是，该字符串是从服务器发送给我的，我通过 .xhr() 请求获取它。一旦添加了该步骤，无论单引号和双引号的排列如何，我都会不断收到如下错误：

> 意外的标记 '

如何请求这样的字符串并将 JSON.parse 解析为对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:02:19.330

如果你引用的是字符串的一部分，那么它不是 json。删除开始和结束引号。

并且没有理由双重转义双引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:44:39.713

它应该是

```
var jsonstr = '{"images":{"0":"<div style=\"background:red;width:250px;height:250px;display:block;position:absolute;\"></div>"}}' 
```

您使用 double`\\`而不是`\`

有很好的在线解析器可以帮助您调试。例如[http://json.parser.online.fr/](http://json.parser.online.fr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:49:22.313

您可以简单地选择，不使用 \" - 双引号并改用单引号。我希望您将在 html 上呈现此 div，所以即使这样也可以

```
{
    "images": {
        "0": "<div style='background:red;width:250px;height:250px;display:block;position:absolute;'></div>"
    }
} 
```

# php - Android PHP 网络服务安全

> ID：11081171
> 
> 赞同：1
> 
> 时间：2012-06-18T10:42:04.503
> 
> 标签：php, android, web-services, security

我已经构建了一个应用程序，该应用程序通过 POST 在从 Android 到 PHP 服务器的 HTTP 请求上发送 JSON 数组。

我的问题是如何确保安全？如何在服务器端以安全的方式进行身份验证？

用 SSL 连接发送数据就够了吗？还是我应该用 RSA 或其他东西加密它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:02:33.460

这取决于您要保护的内容，SSL 将阻止任何人监听通信，您无需在顶部添加其他加密。

如果您要保护 Web 服务本身免受未经授权的使用，那么您需要用户注册并发送用户名和密码（或更好的密码哈希）以进行连接，然后您可以为每个请求使用密码或生成一个密钥，该密钥将是与每个请求一起发送以对用户进行身份验证。

IMEI 的想法不是太好，因为如果您有超过 1,2 个用户，您首先需要让每个人的 IMEI 以某种方式成为巨大的痛苦，即使这样，这也是可以伪造的，因为您的 Android 应用程序可以拆开并提供服务任何 IMEI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:58:46.507

考虑使用 IMEI 作为 Lucifer 建议我会这样做：

1.  打开一个 Android 应用程序 - 如果我没有登录，该应用程序会显示一些 LoginActivity
    1.  我输入登录名和密码，然后单击“登录”按钮
    2.  在 Android 应用程序中，您对密码进行哈希处理，并向服务器发送一个 HTTP 发布请求，其中包含登录名、哈希密码和imei
    3.  服务器部分将尝试登录该用户（并记录任何不适当的行为或输入）并返回真或假（取决于用户是否可以登录）
    4.  将登录信息存储在应用程序中的某个位置，这样用户就不必在每次关闭和重新打开应用程序时都登录 - 当应用程序在后台运行时（直到 dalvik 决定终止它），用户应该被视为已登录。 ..
2.  如果用户已登录，则继续使用该应用程序

在这种情况下，必须使用 SSL (HTTPS)...

# facebook - Faceboof 调试有 Parser Mismatched Metadata

> ID：11081177
> 
> 赞同：1
> 
> 时间：2012-06-18T10:42:30.337
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试解决 Facebook linter 上显示的警告。

> 此元数据的解析器结果与输入元数据不匹配。这很可能是由于数据以一种意外的方式排序、为一个属性提供了多个值而只期望一个值、或者给定属性的属性值不匹配造成的。以下是解析结果中未看到的输入属性 => 内容对：'og:type => product'

这是一个简单的实现，但我不确定我是否完全遵循：

```
Meta Tag:   <meta property="og:type" content="product" />
Meta Tag:   <meta property="og:title" content="Product Title" />
Meta Tag:   <meta property="og:url" content="http://www.site.com/product" />
Meta Tag:   <meta property="og:image" content="http://www.site_com/product.jpg" />
Meta Tag:   <meta property="og:site_name" content="Site Name" />
Meta Tag:   <meta property="og:description" content="Description" />
Meta Tag:   <meta property="fb:admins" content="ADMINID" />
Meta Tag:   <meta property="fb:app_id" content="APPID" /> 
```

在 Facebook 文档之外，产品似乎甚至没有得到官方支持。

这是我的原始元数据：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<title>Product Title</title>
<meta property="og:type" content="product" />
<meta property="og:title" content="Product Title" />
<meta property="og:url" content="http://www.site.com/product" />
<meta property="og:image" content="http://www.site_com/product.jpg" />
<meta property="og:site_name" content="Site Name" />
<meta property="og:description" content="Description" />
<meta property="fb:admins" content="ADMINID" />
<meta property="fb:app_id" content="APPID" />
<base href="http://www.site.com/" />
<link rel="shortcut icon" href="/images/favicon.ico" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="http://www.site.com/css.css" rel="stylesheet" type="text/css" />
<meta name="description" content="Description" />
</head> 
```

我尝试如下添加 CURIE，但它不起作用。除了用我自己的域替换 example.com 并在下面的示例中调用我的命名空间之外，我是否需要做任何其他事情？

```
<head prefix="mysitens: http://example.com/ns#">
<meta property="og:type" content="mysitens:product" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:28:52.103

您的问题是开放图形协议中`product`不[支持的对象类型](http://opengraphprotocol.org/#types)。

要使用自定义类型，您需要在开始`<head>`标记中将其定义为 CURIE。

# php - PHP 打印服务器

> ID：11081178
> 
> 赞同：0
> 
> 时间：2012-06-18T10:42:37.557
> 
> 标签：php, printing

当我们拥有的只是包含组织中打印机 IP 地址的数据库以及连接到不同打印机的客户端 IP 时，有什么方法可以找出从打印机打印的数量？这需要使用 PHP 来完成。此外，每当打印机发出新的打印时，数据库都需要自动更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:37:02.823

网络打印机通常有一个 Web 界面，您可以在其中连接和配置服务器或读取“打印的页面”等统计信息......我会使用用户/密码和打印机类型扩展数据库并编写一个可以连接到网络的 php 类界面并使用正则表达式读取打印的页数信息。

# c# - 如何使用 linq 将 Selectone 行添加到下拉列表

> ID：11081179
> 
> 赞同：0
> 
> 时间：2012-06-18T10:42:50.007
> 
> 标签：c#, asp.net-mvc-3, linq

我有一个名为 States 的表，我正在使用 linq 查询在下拉列表中显示状态值现在我想在 id 0 的第一个位置插入选择。我正在使用以下查询来显示下拉列表：

```
var str = (from li in dbContext.states

               where li.state >= 1
               select new
               {

                   a=li.state

               }).ToArray(); 
```

上面的查询给出了我的 DB 中存在的所有值的平均值。我如何首先插入选择一个？请任何人提出任何方法或语法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:52:56.253

您必须在列表的开头添加一个额外的项目。

```
var str = (from li in dbContext.states

               where li.state >= 1
               select new
               {

                   a=li.state

               }).ToList().Insert(0, "selectone"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:56:43.950

See MajoBs answer.

Although if you're using the `@Html.DropDownListFor()` Helper, you could also specify the Id 0 row using the optionLabelArgument:

```
public static MvcHtmlString DropDownListFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression,
    IEnumerable<SelectListItem> selectList,
    string optionLabel
) 
```

**Update:**

I think the reason MajoB's example doesn't work is because you are using an anonymous type in the Linq query, but define a string in the `.Insert()` statement.

I believe it is not possible to reuse the same anonymous type that was used in the LINQ query in the `.Insert()` statement.

So you would have to use a regular type.

```
(from x in 
    (from li in dContext.states
    where li.state >= 0
        select new {
            value = li.state,
            text = li.something
        }).AsEnumerable()
    select new SelectListeItem {
        Value = x.value.ToString()
        Text = x.text
    }).ToList().Insert(0, new SelectListItem() { .. }); 
```

The nested query is necessary because the `.ToString()` can't be translated to sql. The `.AsEnumerable()` call created an in-memory list where `.ToString` will work on.

I am actually using a Extension method like this in our code base. But it requires [LinqKit](http://www.albahari.com/nutshell/linqkit.aspx) to work.

```
public static IList<SelectListItem> ToSelectList<T>(this IQueryable<T> query
        , Expression<Func<T, long>> value
        , Expression<Func<T, string>> text
        , string nullText = null)
    {
        var result = (from x in
                          (from y in query.AsExpandable()
                           select new
                           {
                               Value = value.Invoke(y),
                               Text = text.Invoke(y),
                           }).AsEnumerable()
                      select new SelectListItem
                      {
                          Value = x.Value.ToString(),
                          Text = x.Text.ToString()
                      }).ToList();

        AddNullText(nullText, result);
        return result;
    }

private static void AddNullText(string nullText, List<SelectListItem> result)
    {
        if (nullText != null)
        {
            result.Insert(0, new SelectListItem()
            {
                Value = "",
                Text = nullText,
            });
        }
    } 
```

(+ the same Extension method with `Expression<Func<T, string>>`, etc.. as second parameter.)

# iphone - 无法在应用程序文件夹中保存 html 文件 - Objective C/Xcode

> ID：11081181
> 
> 赞同：0
> 
> 时间：2012-06-18T10:43:01.103
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用以下代码行下载 html 页面的内容并将其保存在目录中：

```
NSURL *yoyoyo = [[NSURL alloc] initWithString:@"www.google.com"];
NSData *data = [[NSData alloc] initWithContentsOfURL:yoyoyo]; 
//NSData *data = [NSData dataWithContentsOfURL:[NSURL UrlWithString:url]];
//use this data to write to any path as documentdirectory path + filename.html
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *htmlFilePath = [documentsDirectory stringByAppendingPathComponent:@"file.html"];
[data writeToFile:htmlFilePath atomically:YES];
NSLog(@"Tile Directory: %@", documentsDirectory); 
```

文件目录是：

```
Tile Directory: /Users/xxxx/Library/Application Support/iPhone Simulator/5.1/Applications/D4B3A4CF-E7D0-4D25-A809-B3D3A170A329/Documents 
```

但是，当我到达必须保存文件的路径时，我无法看到 html 文件。我无法解决这个问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:46:02.363

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL UrlWithString:@"yourstringURL"]]; 
```

您需要更改`"yourstringURL"`为一些实际的 URL。如果 URL 不存在或无法下载数据，那么您的`data`变量将是`nil`并且不会在文件中写入任何内容。
PS您还可以从 data 变量中获取实际的 html 字符串：

```
NSString *html = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease]; //Remove the autorelease if using ARC 
```

然后将html保存到一个文件中：

```
[html writeToFile:htmlFilePath atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:56:40.660

您需要在此处添加一些错误检查。特别是，检查 NSURL 和 NSData 是否实际包含值（不是 nil），并在取消引用之前验证您的路径对象是否至少包含元素。此外，当您编辑帖子时，您添加了“www.google.com”的 URL，这不是 URL，可能无法解析。NSURL 更喜欢/需要一个完整的 URL，例如“http://www.google.com”，而不是部分 URL。

没有文件出现的最可能情况是 中的`nil`值`data`，因为这将导致写入不执行。

不过，当您使用它时，我建议您转而使用`-[NSData -writeToURL:options:error:]`它，因为它是一个更现代的 API，并且如果在写出数据时出现问题，它会返回一个适当的错误。

```
NSURL *htmlFileURL = [NSURL fileURLWithPath: htmlFilePath isDirectory: NO];
NSError *error=nil;
if (![data writeToURL: htmlFileURL options: NSDataWritingAtomic error: &error]) {
    NSLog( @"Error writing %@: %@", htmlFileURL, error);
} 
```

# c++ - 困难的node.js + libuv + v8错误

> ID：11081182
> 
> 赞同：1
> 
> 时间：2012-06-18T10:43:03.163
> 
> 标签：c++, node.js, v8, libuv

我在 node.js c++ 插件中使用**uv_queue_work做一些并行工作。**

一切正常，直到我尝试从 Complete 方法**回调到 JS 。**

我得到：**CHECK(thread_local_top()->TryCatchHandler() == that) 失败。**

关于可能导致这种情况的任何指示？

我正在使用以下代码进行回调：

```
 //Get emit method from JS object and check !IsEmpty and IsFunction
    v8::TryCatch tc;                
    emit->Call(pxy,1,argv);   // The error happens in this statement.
    if (tc.HasCaught()){
        //Some handler code
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:12:16.730

好的，不确定发生错误的确切原因，但我能够通过使用 node::MakeCallback 而不是 emit->Call 来消除它。

真的不确定为什么会发生这种情况，并且有点担心，因为一直在谈论弃用 MakeCallback ......

编辑：我很乐意接受任何可以阐明这一点的答案。希望同时使用 MakeCallback” 可以拯救其他人 :)

# c# - 从 mp3 文件中删除特定频率

> ID：11081184
> 
> 赞同：0
> 
> 时间：2012-06-18T10:43:12.987
> 
> 标签：c#, windows, audio, mp3

我想知道有哪些方法可以使用 C# 从 mp3 或 wav 文件中删除特定频率。

我希望有一个库或示例，我可以在其中输入 mp3（或任何其他格式，将我的音轨转换为所需的任何格式）和从文件中删除的单个频率（或频率列表）。

如果在 C# 中没有这样做的方法，我也会接受使用其他语言的解决方案。

我更喜欢使用免费或开源库的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:25:18.867

我建议将您的 MP3 转换为 PCM，然后使用时域过滤器。

一种基本方法是使用此处描述的陷波滤波器：

[http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt](http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt)

使用这样的实现：

[http://musicdsp.org/showArchiveComment.php?ArchiveID=174](http://musicdsp.org/showArchiveComment.php?ArchiveID=174)

# c# - 将文本框值传递给另一个文本框

> ID：11081188
> 
> 赞同：1
> 
> 时间：2012-06-18T10:43:23.813
> 
> 标签：c#, textbox, globalization

我为一个名为“diff_Box”的文本框提供了一个默认值“2.5”，然后为了检查另一个目的，我将这个值粘贴到另一个名为“textbox5”的文本框中。但在 textbox5 中显示为 25。我知道这是一个非常常见的问题，但我无法以某种方式解决它。到目前为止我已经尝试过了；

```
double diff;

diff = Double.parse(diff_Box.Text);
diff = Convert.ToDouble(diff_Box.Text);

textBox5.Text = Convert.ToString(diff);
textBox5.Text = diff.ToString("F2");
textBox5.Text = ToString.parse(diff); 
```

但我一直遇到同样的问题

提前致谢

![在此处输入图像描述](../Images/1aee0b24b1b86eb05fe0b2a416470886.png)

![在此处输入图像描述](../Images/1f0a005f5b8ec4968a01b81e6e20b59e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:25:54.657

问题是您**没有**使用系统 UI 文化使用的格式。您实际上是`InvariantCulture`在您的 GUI 上使用 。

您`.`在文本框中使用 a 。我假设您当前的 UI 文化使用`,`. 因此，它在 之后看不到任何数字，`.`并导致`25.0`而不是`2.5`。

此行将使用 InvariantCulture 而不是系统 UI 文化进行转换：

```
double diff = Double.Parse(diff_Box.text, CultureInfo.InvariantCulture); 
```

* * *

然而，更好的方法是使用私有`Double _diff`并将其转换为所需的文化以在表单上显示。其次，您应该期望用户使用 UI 文化进行数据输入。

# node.js - 您是否必须在 Node.js 中关闭 UDP (dgram) 客户端，还是可以重用它？

> ID：11081189
> 
> 赞同：3
> 
> 时间：2012-06-18T10:43:24.753
> 
> 标签：node.js, udp, datagram

[文档](http://nodejs.org/api/dgram.html#dgram_dgram_send_buf_offset_length_port_address_callback)（以及我查看过的许多库）似乎表明您每次发送时都会关闭客户端：

```
var dgram = require('dgram');
var message = new Buffer("Some bytes");
var client = dgram.createSocket("udp4");
client.send(message, 0, message.length, 41234, "localhost", function(err, bytes) {
  client.close();
}); 
```

老实说，我对 UDP 的内部工作原理了解不多，但是`client`每次要发送 UDP 数据包时，什么会阻止您重用呢？你*必须*这样做`close()`吗？

我已经对其进行了测试`localhost`（即重用客户端），它可以很好地发送多个数据包（至少到同一个目的地），但这还不足以让我确信它在大范围内是可以的外面的世界。

[send() 的源](https://github.com/joyent/node/blob/master/lib/dgram.js#L160)调用一个`_startReceiving()`函数，该函数“绑定到一个随机端口”，然后“开始接收”——但我不清楚这里应该接收什么，因为我们实际上是在发送。无论如何，这足以让我认为留住客户可能存在问题……我只是不确定它们是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:06:30.163

您可以为多个请求重用一个 udp 套接字。例如，在多个测试中也可以看到这种行为： [https ://github.com/joyent/node/blob/master/test/simple/test-dgram-pingpong.js](https://github.com/joyent/node/blob/master/test/simple/test-dgram-pingpong.js)

udp 套接字绑定到一个随机端口，因为它必须使用端口指定源地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-13T11:17:09.610

您需要在 3 种情况下关闭 UDP 套接字：

1.  您将创建另一个绑定到`same`本地端口的套接字，从而避免出现`port in use`问题。
2.  您的对等方正在使用您的本地端口进行响应，而您不再需要这些响应。
3.  您的对等方正在使用您的本地端口作为标识符，并且您不再希望与它关联。

# asp.net - Asp.net 检测 iis 是否具有域的 https 证书？

> ID：11081191
> 
> 赞同：0
> 
> 时间：2012-06-18T10:43:47.450
> 
> 标签：asp.net, ssl, iis-7

好吧，我有一个托管在 IIS 7.0 中的网页，现在这里的问题是我们有许多不同的域可以用来访问它，但我们只有少数几个域的证书（SSL）。

当您访问登录页面时，如果他们使用我们确实拥有 ssl 证书的域，我想更改为 https。

但是有什么方法可以确定该域是否有 ssl 证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:03:28.370

> ……少数……

如果您要考虑进行额外的查询证书存储的工作（*对于“少数”*），为什么不简化并与您**知道**您拥有证书`Request.Url`的域列表进行比较？

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:51:45.013

看看[http://msdn.microsoft.com/en-us/magazine/cc163454.aspx](http://msdn.microsoft.com/en-us/magazine/cc163454.aspx)。

您很可能会**按主题名称搜索**（使用当前域。）

如果找到证书，请重定向到 https。

请注意：这不会返回证书是否分配给 IIS 中的站点，只会返回是否安装在本地计算机上。

此外，您可以检查证书是否具有私钥信息以增加过程的稳健性（避免找到无法被 IIS 使用的证书）**

# android - 片段内的Android地图

> ID：11081195
> 
> 赞同：2
> 
> 时间：2012-06-18T10:44:00.223
> 
> 标签：android, android-fragments, android-maps

我想将**地图附在 Fragment**中。我尝试了两种方法。

1.  **使用 Tabhost 在片段中包含地图**。但这使用*了 LocalActivityManager*，这是一种已弃用的方法。我想在没有这种方法的情况下使用，但无法继续。

当我尝试调用 mTab​​Host.setup(); 时，它正在抛出 IllegalException；用于设置我的标签。

1.  **直接使用Fragment和FragmentActivity**：参考[这里](https://gist.github.com/977234)。但无法使用方法来获取当前用户位置。

请让我知道如何去做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T13:34:46.603

A`MapActivity`可以在 API 级别 11 及更高版本上加载`Fragment`包含 a 的 a - 请参阅[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Maps/NooYawkFragments)以获取有关如何完成此操作的示例。`MapView`

但是，这不适用于 Android 支持包中的片段反向移植。不幸的是，目前没有很好的方法来处理这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T09:51:57.483

Google 发布了[Map API 第 2 版](https://developers.google.com/maps/documentation/android/)。这为您提供了 MapFragment 和[SupportMapFragment](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/SupportMapFragment)。这允许您在不扩展 MapActivity 的情况下添加地图。

# android - 退出/完成一个应用程序/活动 - android

> ID：11081197
> 
> 赞同：25
> 
> 时间：2012-06-18T10:44:18.213
> 
> 标签：android, android-activity, exit, activity-finish

我有 4 个活动，比如`Act1`、和。Act1 中的按钮打开 Act2，Act2 中的按钮打开 Act3，Act3 中的按钮打开 Act4。`Act2``Act3``Act4`

我想做两件事：

1.  我在 Act4 中有一个按钮，可将用户引导至 Act1，问题是当用户在 Act1 中单击返回时，我想关闭应用程序而不是打开 Act4 ..

2.  当用户选择它时，我在所有活动中的菜单“退出”中都有选项，我想关闭应用程序而不是返回到以前的活动。

尝试使用`finish();`，但它不符合我的要求。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-18T10:53:31.510

`Act4`在您的 'th`Menu.xml`的退出按钮中使用以下代码-

```
Intent intent = new Intent(Act4.this, Act1.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("EXIT", true);
startActivity(intent); 
```

而且，在您的第一个活动的`onCreate()`方法中，只需输入以下代码 -

```
if (getIntent().getBooleanExtra("EXIT", false)) 
{
    finish();
} 
```

这将退出您的应用程序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T10:49:12.253

看看这个链接：

[点击这里](https://stackoverflow.com/questions/11077020/exiting-an-android-application-on-back-button/11077089#11077089)

您可以使用 ：

```
@Override
public void onBackPressed()
{
     moveTaskToBack(true);
} 
```

在所有活动中关闭应用程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-27T08:52:58.767

```
Intent intent = new Intent(Act4.this, Act1.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

在切换回之前的活动之前清除标志。它可能会帮助你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T11:34:04.683

当您转到下一个活动时完成上一个活动意味着在第四个活动的按钮单击事件开始第一个活动`finish();`之后编写并编写以下代码。`startactivity(intent);`

```
Intent in1=new Intent(Act4.this, Act1.class);
startActivity(in1);
finish(); 
```

并在所有活动中的退出按钮的 Click 事件上编写以下代码。

```
finish(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-13T12:12:36.903

将此代码放在您的应用程序中：

```
moveTaskToBack(true);
android.os.Process.killProcess(Process.myPid());
System.exit(1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-27T06:17:15.120

`android:noHistory = "true"`在您的 AndroidManifest.xml 文件中使用

```
 <activity
        android:name=".Act1"
        android:noHistory="true" />
    <activity
        android:name=".Act2"
        android:noHistory="true" />
    <activity
        android:name=".Act3"
        android:noHistory="true" />
    <activity
        android:name=".Act4"
        android:noHistory="true" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-24T15:52:06.260

我使用的方法是使用`startActivityForResult`. 然后我可以 putExtra("STATE", some_value) 退出任何孩子并使用状态值来确定通过父母做什么。

如果我想从深层子级退出应用程序，“STATE”将是“exit”，层次结构中的每个子级将简单地获取 StringExtra 用于“exit”，执行 putExtra("STATE", "exit") 并调用finish() 然后应用程序最后会调用 finish() 。您可以使用它来实现任何所需的状态。

使用 startActivityForResult 以这种方式传递消息避免了将笨拙的引用向下传递到子活动中，并简化了设置应用程序所需状态的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-05T02:18:35.053

如果您有另一个活动（在应用程序活动堆栈中），您可以使用`finish()`退出当前活动。

但是，back 函数也假设从您的应用程序活动堆栈中删除当前活动。

以我的经验，依赖后栈中的活动（在应用程序活动栈中）是非常不可靠的。因此，当我深入时，我曾经退出每个活动。

在你的情况下：

```
Act 1 -> exit -> Act 2 -> exit -> Act 3 -> exit -> Act 4 -> exit -> Act 1 -> exit 
```

上述方法将退出所有活动。

但是，如果你想在后台运行一些代码，最好依赖“服务”而不是“活动”。您可以在完成分配的工作后让“服务”退出。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-17T17:36:19.863

我使用这种方法：
1\. 在第一个活动中创建静态活动，该活动将关闭其余活动。
2.然后像这样在静态方法中调用它，它会从你调用它的任何地方关闭应用程序。

```
public static Activity activity;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    activity=this;
}
public static void CloseApp(){
    activity.finish();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-18T09:41:01.633

```
Do a 
<code>

try
{
finalize();
finish
}
catch(Exception error)
{
error.printStackTrace();
}
//This would exit your App neatly
</code> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-08-13T19:59:52.237

托盘这个

```
Intent intent =new Intent(MainActivity.this, ClassName.class);
  finish
startActivity(intent); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-08-14T06:29:27.457

开始使用`Activity1`意图并尝试调用`finishAffinity()`.`onBackPressed()``Activity1`

# asp.net - Ajax 日历扩展器结束日期

> ID：11081198
> 
> 赞同：2
> 
> 时间：2012-06-18T10:44:20.167
> 
> 标签：asp.net, ajax, asp.net-ajax, calendar

我正在为“从日期”和“到日期”文本框使用 ajax 日历扩展器，我必须禁用到上一个日期或小于所选“从日期”的日期。我可以看到很多帖子使用`range validation`. 如何在不向用户发送任何消息的情况下禁用日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:30:11.917

您可以使用 asp:CustomValidator。在`OnServerValidate="ServerValidate"`方法中，您可以编写这种代码（在代码隐藏文件中）：

```
protected void ServerValidate(object source, ServerValidateEventArgs value)
{
        DateTime dtStart = DateTime.ParseExact(txtStartDate.Text.Trim(), "yyyyMMdd", culture.DateTimeFormat);
        DateTime dtEnd = DateTime.ParseExact(txtEndDate.Text.Trim(), "yyyyMMdd", culture.DateTimeFormat);

        if (dtStart > dtEnd)
        {
            value.IsValid = false;
            txtEndDate.Text = string.Empty
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:43:11.053

您可以使用带有隐藏触发按钮的更新面板来设置第二个文本框的日历扩展器的“EndDate”属性：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:TextBox ID="txtStart" runat="server"></asp:TextBox>
            <ajaxToolkit:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="txtStart" OnClientDateSelectionChanged="dateSelectionChanged">
            </ajaxToolkit:CalendarExtender>
            <br /><br />
            <asp:TextBox ID="txtEnd" runat="server"></asp:TextBox>
            <ajaxToolkit:CalendarExtender ID="CalendarExtender2" runat="server" TargetControlID="txtEnd">
            </ajaxToolkit:CalendarExtender>

            <script type="text/javascript">
                function dateSelectionChanged(sender, args) {
                    __doPostBack('<%=btnReload.ClientID %>', null);
                }
            </script>
        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:Button ID="btnReload" runat="server" style="display:none;" /> 
```

在上面的代码中，当用户在第一个日历扩展器上进行选择时，会调用“dateSelectionChanged”函数来执行部分回发。此时您可以设置第二个日历扩展器的结束日期属性：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Page.IsPostBack Then
        CalendarExtender2.EndDate = txtStart.Text
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:44:16.977

首先添加 .dll -`RJS.Web.WebControl.PopCalendar.Net.2008.dll`

然后添加源代码：

```
<asp:TextBox ID="DepartureDate" runat="server"></asp:TextBox>
&nbsp;&nbsp;&nbsp;
      <rjs:PopCalendar ID="PopCalendar1" runat="server" Control="DepartureDate" 
            Format="mm dd yyyy" 
            InvalidDateMessage="The date value entered is invalid." RequiredDate="True" 
            RequiredDateMessage="You must enter a date value." From-Date="" SelectWeekend="True" 

            />
    <br />
    <br />
    <br />
    <asp:TextBox ID="ReturnDate" runat="server"></asp:TextBox>
&nbsp;&nbsp;&nbsp;&nbsp;
     <rjs:PopCalendar ID="myReturnCal" runat="server" Control="ReturnDate" 
            Format="mm dd yyyy" 
            InvalidDateMessage="The date value entered is invalid." RequiredDate="True" 
            RequiredDateMessage="You must enter a date value." 
            From-Control="DepartureDate" From-Date="" From-Increment="1" 
            />
    <br />
      <asp:Label ID="Results" runat="server"></asp:Label>
        <rjs:PopCalendarMessageContainer ID="PopCalMessagesForDeparture" runat="server" 
            Calendar="myDepartureCal" />
        <rjs:PopCalendarMessageContainer ID="PopCalMessagesForReturn" runat="server" 
            Calendar="myReturnCal" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-04T12:32:21.690

尝试这个：

```
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"> </script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script>
  $().ready(function () {
      $('.dDate, .rDate').datepicker({
          showOn: 'both',
          buttonImage: "<?=$http?>layout_images/calendar.gif",
          buttonImageOnly: true,
          beforeShow: customRange,
          buttonText: 'Open Calendar',
          firstDay: 1,
          dateFormat: 'D d M yy',
          onSelect: function (date) {
              date = $(this).datepicker('getDate');
              $('#returningdate').val($.datepicker.formatDate('D d M yy', date));
          }
      });
  });

  function customRange(a) {
      var b = new Date();
      var c = new Date(b.getFullYear(), b.getMonth(), b.getDate());
      if (a.id == 'returningdate') {
          if ($('.dDate').datepicker('getDate') != null) {
              c = $('.dDate').datepicker('getDate');
          }
      }
      return {
          minDate: c
      }
  }
  </script>
  </head>
  <body >

  <div style="font-size:11px;">
  Depart Date: <input type="text" id="departingdate" class="dDate"><br>
  Return Date: <input type="text" id="returningdate" class="rDate">
  </div>

  </body>
 </html> 
```

# python - Powershell 远程处理的 Python 包装器

> ID：11081199
> 
> 赞同：2
> 
> 时间：2012-06-18T10:44:20.477
> 
> 标签：python, powershell, powershell-remoting

windows powershell远程处理是否有一些*python包装器？*我需要在远程 Windows 主机上执行移动、复制、压缩等命令。

快速谷歌搜索导致此链接[https://gist.github.com/2850866](https://gist.github.com/2850866) （只是一个小样本）。我正在寻找一个更完整的库/等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:11:58.547

假设你不介意在你的 windows 机器上使用 ssh，你应该使用[Fabric](http://fabfile.org/)

这是[使用 powershell 的示例 Fabric 用法](https://gist.github.com/2850866)

# php - 登录并重定向到网页

> ID：11081202
> 
> 赞同：0
> 
> 时间：2012-06-18T10:44:32.650
> 
> 标签：php, html

我有一个网站，其中的一部分应该通过登录被阻止我使用了一个登录表单，它可以在网络上的任何地方找到（请参阅[登录 php 后重定向到主页](https://stackoverflow.com/questions/10936401/redirect-to-home-page-after-login-php)）

我更新了一些元素（使用 $_SESSION 等）

所以我的登录页面是 index.html

我放了

```
<?php
session_start();
if(!$_SESSION['username'] = $username){
header("location:index.html");
}
?> 
```

在此文件的 login_success.php 文件的开头，您可以访问网站的所有其他页面。

我现在的问题是：

我是否必须在我网站的每个页面的开头放置“session_start（）等”

并且每个页面都必须有.php 而不是.htm？

（我试图保留 .htm 但如果您知道页面名称，则无需登录即可访问页面）

如果您知道更好的网站登录保护脚本，请告诉我，最好是 php。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:56:24.170

Yes, you have to put that code in every page. You may put it in a file and include it in every other files which requires login.

Your all pages are accessible because you have wrong code in if condition part. You are not *comparing* but *assigning* value to your session variable.

Use following code:

```
<?php
session_start();
if($_SESSION['username'] != $username){
header("location:index.html");
}
?> 
```

Just for precaution, Remember, it must not *echo* any output before header()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:48:27.027

**是** 的，您必须在您网站的每个页面的开头放置**“session_start（）等”**

**是**的，每个页面都必须有 .php 扩展名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:49:37.410

是的，你需要在每一页都有它。

每个页面都必须是 .php。

一种常见的方法是有一些 'config.php' 将有 session_start(); 和其他配置/常见的东西。

所以一个页面看起来像：

```
<?php

include('config.php');

?> 
```

一般来说，将所有文件都保存为 .php 会更干净，并且更改 html 文件的扩展名不会对任何事情产生太大影响。并允许您根据需要向其他页面介绍您的 php。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:34:31.410

更好的解决方案是使用一些使用单个 index.php（或 startup.php 等）的框架来处理页面请求。然后，在处理页面请求之前，您必须`start_session()`且`check_login()`仅在此范围内执行一次...`index.php`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T10:48:34.140

把这个脚本：

```
<?php
session_start();
if($_SESSION['username'] != $username){
header("location:/index.php");
die("you should be login")
}
?> 
```

在名为**check.php的 php 文件中**

并将其添加到每个不公开的页面中：

```
<?php
include_once("check.php");
?>
<html>
..... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T10:49:00.317

我的两分钱：

*   用户登录时设置 cookie。
*   每个生成 html 的 php 文件都应该有一个函数 check_login 或类似的函数来检查用户是否已经登录 - 如果他已经登录，则生成页面，如果没有重定向到登录页面。

要重定向到其他页面，您可以使用`<? header("location: http://.........."); ?>`

# php - 使用 php 进行数据库备份的 mysqldump 不起作用

> ID：11081204
> 
> 赞同：0
> 
> 时间：2012-06-18T10:44:36.377
> 
> 标签：php, mysqldump

我编写了这段代码来备份我的数据库。我使用 MySQL 作为我的数据库和 PHP 作为编译器。

```
<?php
$dbhost   = "localhost";
$dbuser   = "root";
$dbpwd    = "admin";
$dbname   = "mydatabase";
mysql_connect($dbhost, $dbuser, $dbpwd, $dbname) or die('Problem');
$dumpfile = $dbname . "_" . date("Y-m-d_H-i-s") . ".sql";
passthru("/usr/bin/mysqldump --opt --host=$dbhost --user=$dbuser --password=$dbpwd --all-databases > $dumpfile");
echo "$dumpfile "; passthru("tail -1 $dumpfile");
?> 
```

代码被执行，但问题是下载的文件为 0KB，即文件中没有数据。

什么问题。我在互联网上搜索了很多，但无法为自己找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:11:38.403

如果您使用的是 Windows，请将 mysqldump.exe 可执行文件放在与备份脚本相同的位置。那应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:46:23.447

检查运行代码的目录的权限。它应该有写权限。

# c# - 通过 WCF 双工通道通过 SocketIO4NET 使用 Socket.IO 时应用程序关闭

> ID：11081206
> 
> 赞同：4
> 
> 时间：2012-06-18T10:44:43.233
> 
> 标签：c#, asp.net-mvc-3, iis-7, socket.io

我使用[SocketIO4Net](http://socketio4net.codeplex.com/)通过 C#连接到[Socket.IO](http://socket.io)，但是当我尝试向客户端发出对象时，我的 C# 应用程序突然关闭（我有一个 MVC3 项目）

我阅读了事件查看器并且有 3 个错误：

1)

```
A Webhost unhandled exception occurred.
 Sender Information: System.AppDomain/26995560
 Exception: System.Runtime.FatalException: Object reference not set to an instance of an object. ---> System.NullReferenceException: Object reference not set to an instance of an object. 
```

2)

```
An unhandled exception occurred and the process was terminated.

Application ID: /LM/W3SVC/2/ROOT

Process ID: 3696

Exception: System.Runtime.FatalException

Message: Object reference not set to an instance of an object. 
```

3)

```
Application: w3wp.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Runtime.FatalException
Stack:
   at System.Runtime.Fx+IOCompletionThunk.UnhandledExceptionFrame(UInt32, UInt32, System.Threading.NativeOverlapped*)
   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*) 
```

我的项目有什么问题？SocketIO4NET 中是否有任何错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:21:10.427

最后我找到了答案，这是因为 .NET 的版本（我使用 .NET 4）和 WCF duplexChannel。

您应该在 WCF 包装器类的顶部添加此属性：

```
[CallbackBehavior(UseSynchronizationContext=false)] 
```

感谢 Cauldwell.net 的回答： http: [//www.cauldwell.net/patrick/blog/CategoryView,category,CodeGen.aspx](http://www.cauldwell.net/patrick/blog/CategoryView,category,CodeGen.aspx)

来自 cauldwell.net：

> 事实证明，问题在于 ASP.NET（默认情况下）使用了一个叫做 SynchronizationContext 的小东西。据我所知（说实话，我还没有彻底研究过）其中一项工作是确保在 UI 线程上运行任何回调，从而避免像你一样调用 Control.Invoke赢表格。在我的例子中，那个额外的锁给了一些合适的东西，它试图清理一个不再存在的线程上的东西，因此是 NullReferenceException。

特别感谢[詹姆斯](https://stackoverflow.com/users/82696/james)

# python - 如何在 linux 中安装 python-rest-client lib

> ID：11081209
> 
> 赞同：1
> 
> 时间：2012-06-18T10:45:01.240
> 
> 标签：python, json, rest

我需要在我的项目中使用 python-rest-client 包。我尝试了几次将 python-rest-client 安装到我的 linux python 中，但它从来没有成功过。但它在 Windows python 中运行良好。有人能告诉我如何在 linux python 中安装 python-rest-client。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:03:08.423

阿瓦萨尔，你是对的。我做到了 `pip install python-rest-client`

# ruby-on-rails - 任何用于生成 pdf 的字体可以处理中文、西里尔文......？

> ID：11081212
> 
> 赞同：6
> 
> 时间：2012-06-18T10:45:08.280
> 
> 标签：ruby-on-rails, pdf, fonts, pdf-generation, prawn

我正在使用**Prawn gem 在****Ruby on Rails**中创建 pdf 文档生成器，但我遇到了一个问题，即当我有中文、日文和西里尔字符时，它们显示不正确。我用谷歌搜索了这是因为*“当我生成字体时，我需要指定，应该用什么字体呈现 pdf 文本”*。

 ***现在这不是问题，而是我的文档将包含[gTLD 支持](http://en.wikipedia.org/wiki/Generic_top-level_domain)的所有不同可能字符这一事实。

**问题一：**

您知道任何用于生成包含尽可能多字符（亚洲、欧洲、符号等）的 pdf 文档的字体吗？理想情况下，gTLD 支持的所有字符。

我知道**Prawn**默认包含*gkai00mp.ttf*但它专注于中文字符，我正在寻找将它们全部包含在内的许可（就像 PokeMon 一样，必须抓住它们；我知道我要求太多但仍然...... .)

另一个问题是客户端打开此文档时：

**问题2**

Prawn生成的pdf是否包含我的pdf文件中的字体，所以当其他计算机打开它时，字体会出现？这是默认标准吗？或者我需要确保/强制执行此功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T08:55:57.997

好的，我自己来回答。在[SuperUser](https://superuser.com/questions/438257/pdf-fonts-that-include-all-possible-gtld-chars#comment506227_438257)上，我问了类似的问题（以更理论的方式关注答案），主要结论是：

> 没有一种字体可以支持整个 Unicode。

但幸运的是 pdf 支持后备字体，也支持**prawn** gem。

**这是我的解决方案：**

1/ 设置你的后备字体

```
 kai = "#{Prawn::BASEDIR}/data/fonts/gkai00mp.ttf"
  action_man_path = "#{Prawn::BASEDIR}/data/fonts/Action Man.dfont"
  dejavu = "#{Prawn::BASEDIR}/data/fonts/DejaVuSans.ttf"

  font_families.update("dejavu" => {
    :normal      => dejavu,
    :italic      => dejavu,
    :bold        => dejavu,
    :bold_italic => dejavu
  })

  #Times is defined in prawn
  font_families.update("times" => {
    :normal => "Times-Roman",
    :italic      => "Times-Italic",
    :bold        => "Times-Bold",
    :bold_italic => "Times-BoldItalic"
  })

  font_families.update("action_man" => {
    :normal      => { :file => action_man_path, :font => "ActionMan" },
    :italic      => { :file => action_man_path, :font => "ActionMan-Italic" },
    :bold        => { :file => action_man_path, :font => "ActionMan-Bold" },
    :bold_italic => { :file => action_man_path, :font => "ActionMan-BoldItalic" }
  })

  font_families.update(
      "kai" => {
        :normal => { :file => kai, :font => "Kai" },
        :bold   => kai,
        :italic => kai,
        :bold_italic => kai
       }
    ) 
```

和

```
def fallback_fonts
  ["dejavu", "times", 'kai', 'action_man']
end 
```

2/ 打电话

```
 font("Helvetica", size: 14) do  #keyword "Helvetica" is specified in Prawn by default
   text "址 foo", :fallback_fonts => fallback_fonts 
 end 
```

现在，这里我只是使用默认情况下包含在 Prawn 中的字体，但是这样你可以添加几种具有不同字符集的字体并将它们指定为备用

例如，您可以将字体放在 Rails 根目录中的某个位置，然后从那里包含它们

**注意**在“Kai”字体中，我为普通、斜体、粗体、粗体指定了相同的字体，没有样式。我是故意这样做的。根据我所遇到 *的 gkai00mp*字体没有粗体字符或斜体字符。因此，当斜体/粗体字符被渲染时，它将以正常样式打印（总比不渲染好）。

如果我没有为字体指定粗体/斜体字体（例如“Kai”）..

```
 font_families.update(
      "kai" => {
        :normal => { :file => kai, :font => "Kai" }
        }
    ) 
```

..然后您尝试渲染将回退到 kai 的样式化字符...

```
 text "<b>址 foo</b>", :fallback_fonts => fallback_fonts, :inline_format=>true 
```

...我去拿

```
Prawn::Errors::UnknownFont in Foo

  is not a known font. 
```

**注意 2：**如果要将非 ascii 字符放入 ruby​​ 文件，则需要将编码放在文件顶部

```
# coding: utf-8

class Foo
...
end 
```

然而，这适用于 ruby​​ 1.9。Ruby 1.8.x 源代码只能处理 ASCII（更多信息请参见[ruby​​ 1.9 的 PC 演练，](https://cooperpress.com/19walkthrough) 但在 Rails 中您应该使用 I18n（国际化）

**注3**

Prawn 有非常棒的文档，只需从 github git clone prawn 并检查 ./manuals

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-10T18:26:59.580

2014 年，谷歌发布了 Noto 字体 ( [https://www.google.com/get/noto/](https://www.google.com/get/noto/) )，其中包括对各种语言的支持。您可以使用 ttf、otf 字体或嵌入完整的集合 ttc 以支持您想要的语言。对于中文、日文和韩文，NotoSansCJK 完美运行。***

# android - 如何将 osmbonuspack 与 osmdroid 一起使用？

> ID：11081213
> 
> 赞同：4
> 
> 时间：2012-06-18T10:45:08.423
> 
> 标签：android, osmdroid, openstreetmap

我发现了 osmbonuspack，但是 wiki 中的 API 信息和文档非常少。

[http://code.google.com/p/osmbonuspack/](http://code.google.com/p/osmbonuspack/)

我认为这个库升级 osmdroid 很有趣，但我学不会使用它。

有人用过吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T20:21:16.897

你可以再看看wiki，我刚刚完成了一个教程，在这里：

[http://code.google.com/p/osmbonuspack/wiki/Tutorial_1](http://code.google.com/p/osmbonuspack/wiki/Tutorial_1)

希望它会有所帮助！

更进一步，源存储库中还有一个示例应用程序：OSMBonusPackDemo 和 javadoc。并且不要犹豫在项目问题中提出问题。

# c++ - 如何从 C 或 C++ 调用 .pyc 函数？

> ID：11081219
> 
> 赞同：2
> 
> 时间：2012-06-18T10:45:29.960
> 
> 标签：c++, python, c

我有 .pyc 文件，我知道其中的功能。

我需要从我尝试使用**PyImport_Import**的 C/C++ 调用这些函数，但它返回 NULL。

```
pName = PyString_FromString("test");
pModule = PyImport_Import(pName ); 
```

如果我调用**pModule = PyImport_ImportModule("py_ffile");** 然后它适用于 .py 文件。但我不想从.py 调用函数。我想从 .pyc 文件中调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T08:47:56.747

您的 py 文件所在的路径可能未知。如果您使用的是 Boost Python，则尝试像这样使用 sys 添加路径：

```
PyRun_SimpleString("import sys"); 
PyRun_SimpleString("sys.path.append(\"your path here\")"); 
```

或使用这个：

```
PySys_SetPath("your path here"); 
```

像这样，如果你直接使用 python dll：

```
SetSysPath("your path here"); 
```

然后再试一次`PyImport_Import`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:10:28.567

这不完全是您所要求的，但您可以考虑使用[Cython](http://cython.org/)。它会将您的代码编译为 C，您可以毫无问题地从 C++ 程序中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:49:20.287

[Boost::Python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)一个 C++ 库，它可以在 C++ 和 Python 编程语言之间实现无缝互操作性，可能会对您有所帮助。

# magento - nginx 多存储 magento

> ID：11081220
> 
> 赞同：4
> 
> 时间：2012-06-18T10:45:36.440
> 
> 标签：magento, nginx

我正在寻找一种在 Magento 的 Multi Store 环境中设置 Nginx 的方法。我已经设置了服务器 + Nginx，添加了域，一切都很好。

不幸的是，通常在 .htaccess 中进行的调整不起作用。我不确定在哪里添加这个（index.php？）。所以我的问题是：如何使用 multiurl 设置多商店？

（是的：我试过 Magento 手册，但它没有说明多商店）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T20:07:34.120

如果您的意思是为每个商店设置商店代码，您可以使用 HTTPMapModule。

[http://wiki.nginx.org/HttpMapModule](http://wiki.nginx.org/HttpMapModule)。

例如对于每个商店的域：

```
map $http_host $storecode {
    domain.com store1code;
}
...

fastcgi_param MAGE_RUN_CODE $storecode; 
```

*在 Ben Marks 挥手致意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:26:05.840

You *could* add your switching logic to index.php, but that file is designed to remain unmodified for production environments. You need to pass environment variables in to trigger the loading of the correct store configuration (`$_SERVER['MAGE_RUN_CODE']`).

In Apache configs this is done using `mod_env` and `SetEnv` / `SetEnvIf`. You need to do the analogous in nginx, and do so according to your needs. For nginx the analogous method to `SetEnv` is `fastcgi_param`.

[This seems relevant (3rd comment).](https://stackoverflow.com/a/4358615/833795)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T05:16:20.440

检查帖子 [Nginx - Magento 多个网站的答案](https://stackoverflow.com/questions/12213255/nginx-magento-multiple-websites)

这用一个例子来解释。

# web-worker - 是否可以使用 facebook sdk Inside webworkers？

> ID：11081221
> 
> 赞同：0
> 
> 时间：2012-06-18T10:45:40.507
> 
> 标签：web-worker, facebook-javascript-sdk

我想构建一个脚本，在后台构建应用程序所需的数据。

我打算使用网络工作者，但很多活动都使用带有 JS SDK 的图形 API 作为它的源，而且似乎这在网络工作者中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:49:10.060

是的，您可以在 Web Workers 中使用 Facebook 的 JS SDK。Web Workers 可以像使用常规 JavaScript 一样使用 XHR。

事实上，Web Workers 是为这样的任务而设计的——从主“UI 线程”卸载数据访问和其他长时间运行的请求，以支持后台处理。

# javascript - 动态内容可通过 Knockout 观察

> ID：11081223
> 
> 赞同：0
> 
> 时间：2012-06-18T10:45:44.887
> 
> 标签：javascript, html, dynamic, knockout.js, observable

我创建了一个函数，它返回我的 html 页面中的所有 obserables 项目。这个函数的一个例子是

```
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer2" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer3" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer4" class="InputText"/> 
```

该函数将返回 ['AOfficer','AOfficer2','AOfficer3','AOfficer4']

现在我想让上面的数据绑定元素列表变得可观察

```
viewModel = {
AOfficer : ko.observable(),
AOfficer2 : ko.observable(),
AOfficer3 : ko.observable(),
AOfficer4 : ko.observable(),
}
ko.applyBindings(viewModel); 
```

以上是这样做的非动态方式..但我似乎无法找到解决这个问题的动态方式..

我将如何解决这个问题？有解决办法吗？解决方法？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:13:14.027

我过去使用的一个选项是创建一个自定义绑定，它将根据现有值为您填充视图模型。

就像是：

```
ko.bindingHandlers.valueWithInit = {
    init: function(element, valueAccessor, allBindingsAccessor, data) {
        var property = valueAccessor(),
            value = element.value;

        //create the observable, if it doesn't exist 
        if (!ko.isWriteableObservable(data[property])) {
            data[property] = ko.observable();
        }
        data[property](value);

        ko.applyBindingsToNode(element, { value: data[property] });

    }
}; 
```

添加绑定时，需要将属性名称指定为字符串，这样绑定在最初不存在时不会失败。

此方法将为您创建一个 observable，如果它不存在或只是用元素的值填充现有的 observable。

示例：http: [//jsfiddle.net/rniemeyer/BnDh6/](http://jsfiddle.net/rniemeyer/BnDh6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:03:01.107

也许您可以尝试将其设为 observableArray()：

```
var Officers = ko.observableArray([{name: AOfficer1, o_value: xxx},{name: AOfficer2, o_value: yyy}, and so on]); 
```

你的HTML放：

```
<ul data-bind="foreach: Officers">
<li><span data-bind="text: name"></span><input type="text" data-bind="value: o_value" class="InputText"/></li>
</ul> 
```

# image-processing - 叠加混合的 rgba 像素计算

> ID：11081225
> 
> 赞同：1
> 
> 时间：2012-06-18T10:45:54.377
> 
> 标签：image-processing, pixel, rgba

我得到了 (r, g, b, a) 像素。

需要添加叠加层。叠加是黑色 + 可变 Alpha 通道。(0,0,0, alpha)，像这样：![在此处输入图像描述](../Images/0b8e7dbfaea329e892a535170dbeac93.png)

我应该怎么计算？

我找不到效果很好的东西

这是我得到的样本：

![在此处输入图像描述](../Images/866854d641c207a305f191feab4b40d6.png) ![在此处输入图像描述](../Images/e62aeccf6506df174c9a637ea7540235.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:25:45.233

[http://en.wikipedia.org/wiki/Alpha_compositing](http://en.wikipedia.org/wiki/Alpha_compositing)

![enter image description here](../Images/e3c9ccf3011291a5bff352be858adcce.png)

# c - 来自外部 IP 地址的 Winsock2 连接

> ID：11081226
> 
> 赞同：0
> 
> 时间：2012-06-18T10:45:55.233
> 
> 标签：c, ip, winsock, winsock2

我使用msdn中的示例在C中使用winsock2编写了一个简单的char程序。除非我尝试通过未连接到同一路由器的计算机连接到服务器，否则它可以工作（使用网络的外部地址)

我可以确定这不是计算机或路由器上的防火墙问题，我可以设置我的世界服务器并从外部连接到它。

我试图将外部 ip 地址绑定到服务器，但事实证明这是不可能的。

是否有某种标志允许从外部 IP 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:15:54.467

服务器套接字只能绑定到属于它运行的机器的 IP。绑定到`INADDR_ANY`为您处理。

为了使网络外部的客户端连接到该服务器，客户端必须连接到路由器本身上的开放 IP/端口，而不是服务器计算机。必须将路由器配置为将其公共 IP/端口上的入站连接转发到服务器的 IP/端口。

例如，假设您有一个服务器套接字在一台机器的端口 12345 上侦听，该机器的本地 LAN IP 为 192.168.0.1，而路由器的公共 IP 为 206.152.65.1。您将套接字绑定到 192.168.0.1:12345，然后在路由器上打开端口 12345（或您想要的任何可用端口）并定义端口转发规则以将该端口映射到 192.168.0.1:12345。现在，外部客户端可以连接到 206.152.65.1:12345 并且 192.168.0.1:12345 上的服务器将看到该连接。

更一般地，任何定向到 206.152.65.1:12345 的网络数据包都将被调整并转发到 192.168.0.1:12345。路由器负责调整数据包标头，以便各方认为他们正在相互通信并且不知道路由器在中间。

# android - 无法使用 getSelectedItemPosition() 获取项目在 Spinner 中的位置

> ID：11081228
> 
> 赞同：0
> 
> 时间：2012-06-18T10:46:02.440
> 
> 标签：android, android-spinner

我必须将微调器中选择的项目的位置传递给另一个活动。我在用着：

```
 int result = spinner.getSelectedItemPosition(); 
```

但是，这个“结果”没有显示选择的正确位置。虽然当我使用：

```
 String bloodGroup = String.valueOf(spinner.getSelectedItem()); 
```

这显示正确的结果..

在第一种情况下可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:12:30.620

该代码应该可以工作。尝试将 a 添加`onItemSelectedListener()`到微调器，并在每次更改微调器值时记录所选值。然后你会看看它是否正确。很可能您正在其他地方重置该值。

# android - 使用 ACTION_SEND 通过 android 应用程序共享图像不起作用

> ID：11081231
> 
> 赞同：3
> 
> 时间：2012-06-18T10:46:11.613
> 
> 标签：android, facebook, image, share

我一直在关注这个

[Android - 在 Facebook、Twitter、Mail、ecc 上分享](https://stackoverflow.com/questions/6814268/android-share-on-facebook-twitter-mail-ecc)

但我无法在 android 中使用 action_send 意图共享图像。请查看我的代码并指导我哪里错了。

```
saveFileName = "";
            Intent share = new Intent(Intent.ACTION_SEND);
            share.setType("image/*");
            Bitmap shareImage = null;
            shareImage = Bitmap.createBitmap(pc.getDrawingCache());
            OutputStream OS = null;
            File f1 = new File(Environment.getExternalStorageDirectory()
                    + "/Free Hand");
            if (f1.isDirectory() == false)
                new File(Environment.getExternalStorageDirectory()
                        + "/Free Hand").mkdir();
            SimpleDateFormat filename = new SimpleDateFormat("yyyyMMddHmmss");
            java.util.Date today1 = new java.util.Date();
            saveFileName = filename.format(new java.sql.Timestamp(today1
                    .getTime())) +  ".png";
            if (saveFileName.length() == 0)
                saveFileName = "Free Hand";
            file = new File(Environment.getExternalStorageDirectory()
                    + "/Free Hand", saveFileName);
            try {
                outStream = new FileOutputStream(file);
                shareImage.compress(Bitmap.CompressFormat.PNG, 100, outStream);

                share.putExtra(android.content.Intent.ACTION_SEND, Uri.parse(Environment.getExternalStorageDirectory()
                        + "/Free Hand/"+saveFileName+".png"));
                Toast.makeText(
                        getApplicationContext(),
                        "Saved in " + Environment.getExternalStorageDirectory()
                                + "/Free Hand" + "\nFile: " + saveFileName
                                + ".png", Toast.LENGTH_LONG).show();
                Log.v("Before image", "Before image");
                startActivity(Intent.createChooser(share, "Share Image"));
                Log.v("After image", "After image");
                outStream.flush();
                outStream.close();
                saveFileName = "";
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                        "Exception : " + e.getMessage(), Toast.LENGTH_LONG)
                        .show();
            }
            save = false; 
```

我得到的 Logcat 输出是：

```
06-18 16:08:16.274: D/StatusBarPolicy(1378): [BRIGHTHY] 3\. Show 3G indicator
06-18 16:08:17.791: W/ActivityManager(1378): Launch timeout has expired, giving up wake lock!
06-18 16:08:17.804: W/ActivityManager(1378): Activity idle timeout for HistoryRecord{454dabf8 com.facebook.katana/.ComposerActivity}
06-18 16:08:18.004: D/LGE_data(1463): LGE_Fast_Dormancy) new_state(2) i=(0) lastPDPstate=(2)
06-18 16:08:18.124: W/ResponseProcessCookies(15476): Invalid cookie header: "Set-Cookie: datr=HgbfT5h8NEIMcQRt7EurBx16; expires=Wed, 18-Jun-2014 10:42:38 GMT; path=/; domain=.facebook.com; httponly". Unable to parse expires attribute: Wed
06-18 16:08:18.644: D/ACRA(15476): #checkAndSendReports - finish
06-18 16:08:18.684: E/AndroidRuntime(15476): FATAL EXCEPTION: main
06-18 16:08:18.684: E/AndroidRuntime(15476): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.facebook.katana/com.facebook.katana.ComposerActivity}: java.lang.NullPointerException
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.os.Looper.loop(Looper.java:123)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.app.ActivityThread.main(ActivityThread.java:4627)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at java.lang.reflect.Method.invokeNative(Native Method)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at java.lang.reflect.Method.invoke(Method.java:521)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at dalvik.system.NativeStart.main(Native Method)
06-18 16:08:18.684: E/AndroidRuntime(15476): Caused by: java.lang.NullPointerException
06-18 16:08:18.684: E/AndroidRuntime(15476):    at com.facebook.katana.activity.media.Storage.a(Storage.java:140)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at com.facebook.katana.ComposerActivity.a(ComposerActivity.java:742)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at com.facebook.orca.activity.FbFragmentActivity.onCreate(FbFragmentActivity.java:48)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-18 16:08:18.684: E/AndroidRuntime(15476):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-18 16:08:18.684: E/AndroidRuntime(15476):    ... 11 more
06-18 16:08:18.714: W/ActivityManager(1378):   Force finishing activity com.facebook.katana/.ComposerActivity
06-18 16:08:19.214: W/ActivityManager(1378): Activity pause timeout for HistoryRecord{454dabf8 com.facebook.katana/.ComposerActivity}
06-18 16:08:19.574: W/Flex(1378): getString FLEX_COUNTRY_CODE COM
06-18 16:08:19.574: W/Flex(1378): getString FLEX_OPERATOR_CODE OPEN
06-18 16:08:19.574: W/Flex(1378): getString FLEX_OPERATOR_CODE OPEN
06-18 16:08:19.574: W/Flex(1378): getString FLEX_COUNTRY_CODE COM
06-18 16:08:19.574: W/Flex(1378): getString FLEX_OPERATOR_CODE OPEN
06-18 16:08:19.574: D/StatusBarPolicy(1378): [BRIGHTHY] 0\. mDataNetType: 8
06-18 16:08:19.574: D/StatusBarPolicy(1378): [BRIGHTHY] curNetwork=40420 curHPLMN=40420 
```

我正在通过 USB 调试在真实设备上对其进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:49:09.350

只需使用以下代码片段：

```
try {
    File myFile = new File("/mnt/sdcard/images/2.png");
    MimeTypeMap mime = MimeTypeMap.getSingleton();
    String ext=myFile.getName().substring(myFile.getName().lastIndexOf(".")+1);
    String type = mime.getMimeTypeFromExtension(ext);
    Intent sharingIntent = new Intent("android.intent.action.SEND");
    sharingIntent.setType(type);
    sharingIntent.putExtra("android.intent.extra.STREAM",Uri.fromFile(myFile));   
    startActivity(Intent.createChooser(sharingIntent,"Share using"));
}
catch(Exception e){
    Toast.makeText(getBaseContext(), e.getMessage(),Toast.LENGTH_SHORT).show();  
} 
```

# linux - Linux Kernel 3.4.1 在打印“VFS: Mounted root (ubifs filesystem)”后挂起。

> ID：11081233
> 
> 赞同：0
> 
> 时间：2012-06-18T10:46:20.577
> 
> 标签：linux, linux-kernel, embedded-linux

我正在尝试在我们基于 MIPS 的自定义硬件上启动 Linux-3.4.1。打印线后挂了

```
VFS:Mounted root (ubifs filesystem) 
```

进一步调试，发现内核挂在 free_init_mem() [arch/mips/mm/init.c] 中。我的调试打印以确定 free_init_mem 中的挂起位置如下：

```
Freeing unused kernel memory:  8038e000 - 803bb000
Freeing unused kernel memory: 8038e000 page
Freeing unused kernel memory: 8038f000 page
Freeing unused kernel memory: 80390000 page
Freeing unused kernel memory: 80391000 page
Freeing unused kernel memory: 80392000 page
Freeing unused kernel memory: 80393000 page
Freeing unused kernel memory: 80394000 page
.....
Freeing unused kernel memory: 803b4000 page
<hang> 
```

调试上述挂起的任何帮助都将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:26:55.490

只是一些随机猜测：由于它在释放 init 内存后挂起，我怀疑某些代码被错误标记`__init`，或者某些数据被错误标记`__initdata`。因此相应的页面被释放，内核在需要这些数据时崩溃。

我猜您已经编写了一些自定义内核代码来支持您的 MIPS 硬件。仔细检查您的代码，以确保您没有在这方面犯过一些错误。

# mod-rewrite - 将一个域和每个子页面重定向到不同的域

> ID：11081236
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:46:38.603
> 
> 标签：mod-rewrite, redirect

我读过很多人有这个问题，并尝试了很多策略。但是，我仍然无法将peaceandtruth.com 的所有子页面重定向到oldmankit.com，这正是我想要的。我的情况可能有点混乱，因为我正在使用一个带有附加域的共享主机帐户。oldmankit.com 是插件域。

这是我的 .htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^peaceandtruth\.com$ [NC]
RewriteRule ^(.*)$ http://oldmankit.com [R=301,L] 
```

如果你去[http://peaceandtruth.com/me/](http://peaceandtruth.com/me/)，你会看到它没有重定向。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:52:09.227

```
RewriteCond %{HTTP_HOST} !^peaceandtruth\.com$ [NC] 
```

这意味着“如果 HTTP_HOST**不是** *peaceandtruth.com* ”。为正匹配去掉感叹号。

# ant - 如何在不使用 IDE（Netbeans 等）的情况下使用外部库编译 java 文件？

> ID：11081245
> 
> 赞同：0
> 
> 时间：2012-06-18T10:47:02.007
> 
> 标签：ant, compiler-errors

我有一个 NetBeans java 项目。

该项目（**src**文件夹）由 6 个**.java**文件组成。该项目还使用外部库**library.jar**和来自 apache commons 的各种**jar**文件（日志、配置等。）

所有 java 文件（编译时）都由外部类使用。

Netbeans 生成一个构建 xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="CityVisit" default="default" basedir=".">
    <description>Builds, tests, and runs the project CityVisit.</description>
    <import file="nbproject/build-impl.xml"/>

</project> 
```

它引用**nbproject/build-impl.xml**但在该文件内部没有对**library.jar**的引用，也没有对其他 jar 的引用。

我的问题是，如果我尝试使用**javac *.java**进行编译，它不会编译并且只会打印一长串错误（可能是因为它找不到外部库）。

大多数错误如下：

```
 **can't find symbol <name> ** 
```

其中是包含在外部 jar 库之一中的类/对象的名称。

我应该怎么做？我的目标是能够在不使用 Eclipse、Netbeans 等 IDE 的情况下在另一台机器上编译我的代码。

据我了解，解决方案是**制作一个构建文件并使用 ant 部署它，**但实际上我应该怎么做？

提前感谢您的任何提示。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:53:15.987

使用 javac -cp ，您可以告诉编译器在哪里寻找外部 jars ：

```
javac -cp /lib/123.jar:/lib/abc.jar yourMainClass.java 
```

请注意我如何提供 jar 的路径，而不仅仅是名称（除非它们与您自己的代码位于同一文件夹中。

编译后，运行：

```
java -cp .:/lib/123.jar:/lib/abc.jar yourMainClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:58:49.607

首选的方法是使用 Maven 来定义您的依赖项并构建您的项目。更多信息可通过@http: [//maven.apache.org/获得](http://maven.apache.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-26T22:17:45.947

通过创建新的 Java Maven 项目将您的项目转换为 Maven 项目，将文件复制粘贴到 Maven 源文件夹中，然后编译。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-31T05:38:24.163

请在库列表周围使用双引号 ( `"`) 和分号 ( )。`;`

*   对于多个库，用分号分隔库：

    ```
    javac -cp "/lib/lib1.jar;/lib/lib2.jar" yourMainClass.java 
    ```

*   仅适用于一个库：

    ```
    javac -cp "/lib/lib1.jar" yourMainClass.java 
    ```

# c# - 例外 - 入口点 在dll中找不到

> ID：11081246
> 
> 赞同：0
> 
> 时间：2012-06-18T10:47:02.243
> 
> 标签：c#, dllimport, name-mangling, entrypointnotfoundexcept

我创建了一个 C++ DLL，我将其导入 C# 应用程序以重用函数。C ++中的功能代码是`static bool IsDisplayDeviceAttached(char *Arg1[])`

当我在 C# 程序中使用如下 DllImport 时，

```
[DllImport("DllName", EntryPoint="?IsDisplayDeviceAttached@@YA_NQAPAD@Z", CallingConvention = CallingConvention.Cdecl)] 
static extern bool IsDisplayDeviceAttached([MarshalAsAttribute(UnmanagedType.LPArray, ArraySubType = UnmanagedType.LPStr)] string[] Display); 
```

我仍然收到错误为 EntryPointNotFound 异常。我也`ExactSpelling = true`与上面一起使用，但都导致错误。

1）任何人都可以指导代码还有什么问题吗？

2) 另外，为什么我们要给 _Cdecl 和 ExactSpelling 参数等（想知道我们为什么在 DllImport 中编写它们）

# android - 如何在 Mac OS X 的 eclipse 中安装 Android jdk、sdk 4.0？

> ID：11081247
> 
> 赞同：0
> 
> 时间：2012-06-18T10:47:07.643
> 
> 标签：android, eclipse, macos, java

我是 Android 开发的新手。我有 Windows 7 和 Mac OS X。我已经下载并安装了 Eclipse Indigo 版本 1.4.2。我曾尝试安装 Eclipse Helio 3.6，但无法下载。在`developer.android.com`我找到了安装 Android 要求的步骤。我有以下问题：

1.  在哪里下载适用于 Mac OS X 和 Windows 7 的 Eclipse Helios V3.6？
2.  如何在 Mac 和 Windows 7 的 Eclipse 中安装 JDK？我在这个页面上但不知道如何在 mac 中下载 JDK？[http://www.oracle.com/technetwork/java/javase/downloads/jdk6-downloads-1637591.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk6-downloads-1637591.html)
3.  如何在Eclipse中安装Android需求并开发一个简单的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:51:54.227

按照此处的说明进行操作。mac os 也有单独的软件包可用。

[安装指南](http://developer.android.com/sdk/installing.html)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-18T12:01:31.953

您的问题的答案在thinternet 的许多页面上。你知道如何使用谷歌吗？在您的网络浏览器中输入 www.Google.Com 并在框中输入您的问题并点击搜索。使用 eclipse 设置 Android sdk 的过程将无处不在。

# c# - 为什么我的多线程示例中的时间随着线程数的增加而增加

> ID：11081248
> 
> 赞同：0
> 
> 时间：2012-06-18T10:47:20.007
> 
> 标签：c#, .net, winforms, multithreading

如何编写在给定线程数中运行程序并显示每个线程所用时间的结果的多线程 Windows 应用程序。我尝试创建它，但我可以看到我的程序显示不正确的结果，这意味着当我增加线程数时，每个线程所花费的时间也会增加（如消息框所示）。以下是我的代码：

```
private static void StartMultithread(long recordsToProcess, string connectionString, string stagingTableName, bool tableLockEnabled, bool transactionEnabled, int batchSize, bool userMultipleDatabases, bool userMultipleTables, bool userMultipleUsers, int bulkInsertTimeout)
 {
 Dictionary<string, Thread> threadPool = new Dictionary<string, Thread>();
 for (int i = 0; i < threadCount; i++)
 {
     Thread thread = new Thread(new ParameterizedThreadStart(delegate(object tid)
     {
         int ii = (int)tid;
         Core.BulkInsert bulkInsert1 = new Core.BulkInsert();
         string result1 = bulkInsert1.Insert(recordsToProcess, connectionString, stagingTableName, tableLockEnabled, transactionEnabled, batchSize, bulkInsertTimeout);
         MessageBox.Show (result1);
     }));

     thread.Name = i.ToString();
     threadPool.Add(thread.Name, thread);
 }

 for (int i = 0; i < threadCount; i++)
 {
     Thread thread = threadPool[i.ToString()];
     thread.IsBackground = true;
     thread.Start(i);
 }

 for (int i = 0; i < threadCount; i++)
 {
     Thread thread = threadPool[i.ToString()];
     thread.Join();
 }
} 
```

结果，当我给出 threadCount = 1 时，所用时间为 0.8 秒。当它为 2 时，两个线程所花费的时间分别约为 1.2 秒。当它是 3 时，他们单独花费的时间约为 1.7 秒。

bulkinsert1.Insert 将记录插入数据库，对于每个线程我传递不同的表（因此表锁不应该成为插入的瓶颈）

我希望所有线程都花费最少的时间，我想它应该是 0.8 秒，当 threadCount 为 1 时。

我是线程新手，如果我在任何地方错了，请纠正我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:14:42.367

我不确定您是如何计时的，因为从提供的代码中看不到这一点。

但是，假设`bulkInsert1.Insert`是 IO 密集型操作（意味着您的线程主要等待 IO 操作完成），完成时间随着线程数的增加而增加是正常的。您有更多线程，但它们使用一些*共享资源* （例如 MB 总线、网卡、远程数据库等）。例如，如果数据库处理插入操作需要 0.8 秒，那么处理两个或多个同时执行相同操作的连接需要更长的时间是正常的 - 特别是如果这些查询由于某种原因碰巧相互阻塞. 因此，线程的完成时间会增加。

# continuous-integration - Is there any benefit of continuous integration in small dev teams?

> ID：11081250
> 
> 赞同：2
> 
> 时间：2012-06-18T10:47:21.770
> 
> 标签：continuous-integration, build-automation, collaboration

Does it make a sense to use a build server in a small (2-3 developer) game development team? I like the idea of continuous integration, and the team members are not in the same place, so it might not be a bad idea.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T11:40:16.083

Continuous integration is beneficial even if there is one person doing development simply because it tests the product on a "clean" non-development machine. The benefits increase with number of developers. So the answer is "yes, it makes sense".

# c# - 仅将父子属性的某些属性序列化为 JSON

> ID：11081256
> 
> 赞同：0
> 
> 时间：2012-06-18T10:47:49.960
> 
> 标签：c#, json, serialization

假设我有两个这样的类：

```
public class Parent
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public IList<Child> Children { get; set; }
    ...
}

public class Child
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Gender { get; set; }
    public string Age { get; set; }
    ...
} 
```

如果我想序列化 Parent 的一些属性，我可以这样做：

```
var data = GetListOfParents();
return Json(data.Select(x => new { x.Id, x.Name})); 
```

如果我想获得上面的父母列表，但每个父母都包含一个具有选定属性的子列表，`Id`并且`Name`只有，那么正确的方法是什么？

我不想使用`[ScriptIgnore]`，因为我的实体包含很多属性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:58:11.303

你可以这样做：

```
data.Select(x => new
    {
        x.Id,
        x.Name,
        Children = x.Children.Select(y => new
            {
                y.Id,
                y.Name
            })
    }); 
```

# javascript - 如何在 DOM 上的 javascript 操作后立即获取 html 元素的高度

> ID：11081258
> 
> 赞同：3
> 
> 时间：2012-06-18T10:47:53.863
> 
> 标签：javascript, html

我想在 DOM 上的 javascript 操作完成时根据 html 元素的高度对网页布局进行最终调整。此操作必须立即执行，因此我不想使用`setTimeout`函数。我尝试了以下方法，但在其他函数完成对 DOM 的操作之前它运行得太早了：

```
document.onreadystatechange = function () {  
 if(document.readyState == 'complete') {  
  alert(document.getElementsByTagName('html')[0].offsetHeight);
 }  
}; 
```

对 DOM 的操作包括隐藏文档的某些部分，从而缩短 html 元素的高度。我不想在这些 javascript 函数中使用回调函数，因为它们中有几个，并且必须在所有网页上应用最后的调整。

有什么方法可以单独使用javascript来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:53:10.120

有（有）[DOMMutationEvents](http://www.w3.org/TR/DOM-Level-3-Events/#events-mutationevents) - 缓慢且未得到广泛支持。[DOM MutationObserver](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)是新事物——尽管浏览器支持仍然很低。

在不同的浏览器上可靠（且快速）地做到这一点是不可能的。

* * *

如果您将 jQuery（专门）用于您的 DOM 操作业务，您可以查看[cssHooks](http://blog.rodneyrehm.de/archives/11-jQuery-Hooks.html#css)。但是，只要通过 jQuery 以外的任何方式修改了 DOM，该选项就会失败。

# cakephp - 使用相关模型中的字段作为 CakePHP 中的显示字段

> ID：11081259
> 
> 赞同：6
> 
> 时间：2012-06-18T10:48:06.530
> 
> 标签：cakephp

我有一个不包含任何标题的模型。所有有趣的信息都在一个相关的模型中。

我已经阅读了有关虚拟字段的信息，您可以使用它来组合如下字段：

```
public $virtualFields = array("full_name"=>"CONCAT(event_id, ' ' ,begin)");
public $displayField = 'full_name'; 
```

但这给了我一个简单的 id 和日期。我需要那个 id 是另一个模型的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:55:03.117

这听起来确实像是一份工作[`Set::combine()`](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set::combine)。你的显示字段不应该引用不同的模型，因为它并不总是保证被加入。所以如果某个地方的调用没有引入数据，它会抛出一个错误。

相反，`Set::combine()`您可以使用您想要的任何内容创建一个键值数组。虽然这不那么“神奇”，但它会减少出错的可能性。

对于UsersController 示例，假设您有hasOne Profile，并希望用户使用自动填充的下拉菜单（即使用FormHelper）来选择用户，该下拉菜单显示用户个人资料中的全名。我们将使用[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)来引入配置文件数据。

```
class AppModel extends Model {
  $actsAs = array(
    'Containable'
  );
} 
```

然后在用户控制器中：

```
function choose($id = null) {
  // regular view code here
  $users = $this->User->find('all', array(
    'contain' => array(
      'Profile'
    )
  ));
  // create a key-value that the FormHelper recognizes
  $users = Set::combine($users , '{n}.User.id', '{n}.Profile.full_name');
} 
```

您会注意到`full_name`现在在 Profile 模型上，因为它使用该模型中的字段。combine 方法创建一个数组，如

```
array(
  1 => 'skerit',
  2 => 'jeremy harris'
); 
```

使用 FormHelper 创建下拉列表时会自动使用

```
echo $this->Form->input('user_id'); 
```

# python - 使用 python 3.2 检测 html 文件中的数字

> ID：11081260
> 
> 赞同：1
> 
> 时间：2012-06-18T10:48:13.037
> 
> 标签：python, python-3.x, html-parsing

我有一个 HTML 文件，我想使用 python 3.2 示例解析它：-

```
<td class="ln">15</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">15</td><td class="sf3b2"><code>&nbsp;</code></td> 
```

工作是检测未标记的数字（在本例中仅 15 个）并将它们存储在另一个文本文件中。我无法决定使用哪个 html 解析器（lxml，美丽的汤），因为我是新手。您能否指导我如何解决这个问题。在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:34:59.547

[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)可以很容易地做到这一点。您可以使用[find_all](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find-all)方法来查找元素并对其进行处理：

```
soup = BeautifulSoup(html_doc)
tds = soup.find_all("td", "ln")
for td in tds:
    pass # do something here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:00:51.733

你可以试试这样的。

```
from BeautifulSoup import BeautifulSoup

def getPrintUnicode(soup):

    body=''
    if isinstance(soup, unicode):
        soup = soup.replace('&#39;',"'")
        soup = soup.replace('&quot;','"')
        soup = soup.replace('&nbsp;',' ')
        soup = soup.replace('&gt;','>')
        soup = soup.replace('&lt;','<')
        body = body + soup
    else:
        if not soup.contents:
            return ''
        con_list = soup.contents
        for con in con_list:
            body = body + getPrintUnicode(con)
    return body

print getPrintUnicode(BeautifulSoup('<td class="ln">15</td><td class="sf3b2"><code>&nbsp;</code></td>')) 
```

您可以在整个页面的汤中使用此 getPrintUnicode() 函数。它将返回完整的内容。使用异常并将字符串转换为整数。例如。

```
print int(getPrintUnicode(BeautifulSoup('<td class="ln">15</td><td class="sf3b2"><code>&nbsp;</code></td>'))) 
```

# screen-scraping - URL上的用户ID编码？

> ID：11081261
> 
> 赞同：0
> 
> 时间：2012-06-18T10:48:14.827
> 
> 标签：screen-scraping, url-encoding

我想从某个域的用户配置文件中获取一些信息。

```
www.domain.com/profiles/[userID] 
```

主要问题是用户ID是这样的：

```
4fc34f1ad3d85a000300b5a4
4fc34f1ad3d85a000300b5a4 
4f4bdd96848740000300026a
4f09884f9cc1590001019c98
4f1bcd5f33aa850001011811
4faa2801c619ad0003011c7e
4e4f506ac9d69600010010ca 
```

所以如果我想查看某个用户的用户资料，我必须输入

```
www.domain.com/profiles/4fc34f1ad3d85a000300b5a4
www.domain.com/profiles/4f4bdd96848740000300026a
www.domain.com/profiles/4f09884f9cc1590001019c98
www.domain.com/profiles/4f1bcd5f33aa850001011811
www.domain.com/profiles/4faa2801c619ad0003011c7e
www.domain.com/profiles/4e4f506ac9d69600010010ca 
```

那是什么样的身份证？我怎么知道下面的规范顺序？

其他时候要容易得多，因为用户 ID 只是整数。

```
www.domain.com/profiles/1
www.domain.com/profiles/2
www.domain.com/profiles/3
www.domain.com/profiles/4
www.domain.com/profiles/5 
```

我想知道这是某种编码还是什么。

URL 上的 ID 是什么类型的？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:02:26.013

这些 ID 使用十六进制 - 请注意“f”上方没有字母。

ID 之间的相似之处很有趣——您能否提供一些连续创建的页面的 ID，以检查 ID 如何更改是否存在模式。

或者网站可能只是在某些限制之间生成一个随机数并转换为十六进制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:12:47.017

看起来像一个 MD5 哈希。因此，它要么是随机散列，要么可能是先前使用的 ID 的散列，或者完全不同的东西。无论哪种方式，除了蛮力猜测之外，都没有简单的方法来解码它们。

[http://en.wikipedia.org/wiki/MD5](http://en.wikipedia.org/wiki/MD5)

# java - Facebook Graph API 不显示生日

> ID：11081263
> 
> 赞同：1
> 
> 时间：2012-06-18T10:48:27.387
> 
> 标签：java, android, facebook, facebook-graph-api

我正在开发一个 Android 应用程序，我需要访问我的 facebooks 朋友的所有生日。但不知何故，我只得到极少数人的生日。

难道是新的 Facebook 时间线导致了这个错误？因为如果我去 Graph API Explorer 我也看不到它们，尽管我的几乎每个朋友都将他的生日设置为可见。我还注意到，我可以在没有时间线的情况下看到仍然使用旧 Facebook 的朋友的生日。

有谁知道什么可能导致这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:11:09.763

生日以下是两个权限

```
friends_birthday,user_birthday 
```

旧墙和时间线用户的行为相同。使用以下工具仔细检查您是否获得了上述权限。

[访问令牌调试器](https://developers.facebook.com/tools/debug/access_token?q=user_token)

如果有权限，请使用以下工具检查朋友的生日

[图形 API 工具](https://developers.facebook.com/tools/explorer?method=GET&path=me/friends?fields=birthday,name)

PS：用户可以在其年份应用隐私，但不能在其完整生日。
对于某些人来说，生日不会使用图形 API 显示，因为他们已经使用 Facebook 设置选择退出 Facebook 应用程序。

# javascript - 倒计时不工作jQuery

> ID：11081269
> 
> 赞同：0
> 
> 时间：2012-06-18T10:48:51.177
> 
> 标签：javascript, jquery

我正在使用[倒计时插件](http://keith-wood.name/countdown.html)。我正在尝试设置倒计时说：自 06/17/2012 到 06/18/2012。为此，我尝试了：

```
 var start = new Date(2012, 06 - 1, 17);
 var  end = new Date(2012, 06 - 1, 18);

 $('div').countdown({ since: start, until: end }); 
```

但它说明了一切`( Hours , Mins, Secs ) ( 0 0 0)`。我做错了什么？

**编辑**

这只是一个打字错误，但我`new Date(year , month , Date)`在我的代码中使用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:55:14.250

Date 对象的工作方式如下：

```
new Date(year, month, day); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:01:35.650

变量名**end**造成了问题，请将其更改为类似于以下代码的内容：-

```
 var start = new Date(17, 06 - 1, 2012);
  var  endDate = new Date(18, 06 - 1, 2012);

  $('div').countdown({ since: start, until: endDate }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:05:48.533

**工作演示** [http://jsfiddle.net/cUW4M/16/](http://jsfiddle.net/cUW4M/16/)或[http://jsfiddle.net/cUW4M/15/](http://jsfiddle.net/cUW4M/15/)

请在此处查看我之前的回复：[jQuery Countdown Plugin - only show non-zero period](https://stackoverflow.com/questions/10469714/jquery-countdown-plugin-only-show-non-zero-periods)

希望这可以帮助，

**脚本**

```
<script type="text/javascript" src="http://keith-wood.name/js/jquery.countdown.js"></script> 
```

**代码**

```
var start = new Date(2012, 06 - 1, 17);
 var  end = new Date(2012, 06 - 1, 18);

 $('div').countdown({since: start, until: end }); //until: 0 to get zeros

​ 
```

# sql - SQL UPDATE 不适用于外语（阿拉伯语）

> ID：11081270
> 
> 赞同：1
> 
> 时间：2012-06-18T10:48:51.770
> 
> 标签：sql, sql-server-2008

`????`如果更新程序字段是用阿拉伯语编写的，则 UPDATE 给出 ，这是我的查询：

```
UPDATE  students 
SET first_name = 'الاسم' , last_name = 'الاسم الاخير' , 
    father_name = 'الاسم الاخير' , mother_name = '', 
    birth_date = '1/1/1990 12:00:00 AM' , education_level = '' , 
    address = '' , notes = '' 
WHERE student_id = 33 
```

这是更新的结果：

```
student_id  first_name  last_name   mother_name     father_name   birth_date    
33           ?????      ?????          ??????       ???????????   1990-01-01 
```

//答案很好，谢谢大家，另一个问题是我在我的 C# 程序中使用了这个 UPDATE 语法

```
command.CommandText = "UPDATE  students SET " +
        "first_name = " + "'" + first_name + "'" + " , last_name = " + "'" + last_name + "'" +
         " , father_name = " + "'" + father_name + "'" + " , mother_name = " + 
        "'" + mother_name + "'" + ", birth_date = " + "'" + birth_date + "'" +
        " , education_level = " + "'" + education_level + "'"  +
        " , address = " + "'" + address + "'" + " , notes = " + "'" + notes + "'" +
        " WHERE student_id = " + id ; 
```

//如何使用字符N

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T10:50:26.280

您忘记了`N`字符串文字之前的前缀，这是必需的，因此它们将被视为`nvarchar`而不是`varchar`

`SET first_name = N'الاسم'`等等

否则，文本将被强制转换为默认排序规则的代码页可以处理的任何字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:30:26.563

使用此排序规则 Arabic_CI_AS 创建数据库，您不需要在阿拉伯字符之前放置 N。

# c# - 如何找到放置在面板内的 div 控件？

> ID：11081271
> 
> 赞同：0
> 
> 时间：2012-06-18T10:48:57.207
> 
> 标签：c#, .net

我正在使用一个面板，这个面板里面有一个 div 。我需要为这个 div 设置 height 和 width 以及 css 样式。但我无法在 c# 代码中找到这个 div id。如何在 c# 中获取此 div id，并将样式添加到此 div 。任何答案将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:55:42.843

Add `runat="server"` attribute into div along with its ID.

You can set `CssClass` in that div `ID` in following way"

```
DivID.CssClass = "className"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:53:49.723

如果您的 div 确实有，`runat="server"`那么您可以获得对面板的引用，然后使用：

```
 var div = panel.FindControl("divId"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:50:56.887

制作它`DIV runat="server"`并提供`ID`给它，然后使用它。

```
Div1.Style.Add("color","red"); // or any other style attribute in place of color 
```

# java - 从httpresponse android处理json的最佳方法

> ID：11081275
> 
> 赞同：0
> 
> 时间：2012-06-18T10:49:10.847
> 
> 标签：java, android, json

我使用httpclient调用了一个用django编写的restapi。它返回了 json 输出。我的 httpresponse 变量存储了它，然后将响应转换为字符串，然后转换为 json 对象，我认为它很长，尽管它正在工作。我对java真的很陌生，谁能告诉我，下面代码的最佳替代逻辑是什么

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httppost = new HttpGet("http://10.0.2.2:8000/api/ca/entry/?
            format=json&username=pragya");
    try {
        // Add your data
        //List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        //nameValuePairs.add(new BasicNameValuePair("username", un.getText().toString()));
        //nameValuePairs.add(new BasicNameValuePair("username", pw.getText().toString()));
        //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append((line + "\n"));
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        try {
            JSONObject jsonObject = new JSONObject(sb.toString());
            JSONObject meta = jsonObject.getJSONObject("meta");  
            String limit = meta.getString("limit");  
            Toast.makeText(HelloWorldActivity.this, limit, Toast.LENGTH_SHORT).show();
            JSONArray array = jsonObject.getJSONArray("objects");

            String key = array.getJSONObject(0).getString("api_key");
            String uname = array.getJSONObject(0).getString("username");
            Toast.makeText(HelloWorldActivity.this, uname + " " + key,
            Toast.LENGTH_SHORT).show();

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
        //Toast.makeText(HelloWorldActivity.this, sb.toString(), Toast.LENGTH_SHORT).show();
    } catch (ClientProtocolException e) {
        Toast.makeText(HelloWorldActivity.this, e.toString(), Toast.LENGTH_SHORT).show();

        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Toast.makeText(HelloWorldActivity.this, e.toString(), Toast.LENGTH_SHORT).show();
    }   
}
}); 
```

json如下

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, "objects": [{"api_key": "c87391754b522d0c83b2c8b5e4c8cfd614559632deee70fdf1b48d470307e40e", "homeAddress": "kathmandu", "resource_uri": "/api/ca/entry/1/", "username": "sumit"}]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T12:38:43.243

使用谷歌的[Gson](http://code.google.com/p/google-gson/)库，它非常适合这类任务。

您需要做的就是定义一个新类，其中包含带有json 对象中**键**名的字段，然后使用 Gson 将 Json 字符串直接解析到对象中，反之亦然。

例如：

Json 看起来像这样：`"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1`.

Java 类将是：

```
public class MyClass {
    private int limit;
    private int next;
    private int offset;
    private int previous;
    private int total_count;

public int getLimit() {
    return limit;
}
public void setLimit(int limit) {
    this.limit = limit;
}
public int getNext() {
    return next;
}
public void setNext(int next) {
    this.next = next;
}
public int getOffset() {
    return offset;
}
public void setOffset(int offset) {
    this.offset = offset;
}
public int getPrevious() {
    return previous;
}
public void setPrevious(int previous) {
    this.previous = previous;
}
public int getTotal_count() {
    return total_count;
}
public void setTotal_count(int total_count) {
    this.total_count = total_count;
}
} 
```

并使用这样的 Gson 代码：

```
 Gson gson = new Gson(); // Or use new GsonBuilder().create();
 MyClass myClass = gson.fromJson(json, MyClass.class); // deserializes json into MyClass 
```

请注意，类字段的名称必须与json 字符串中的**键名完全匹配。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:54:43.890

始终使用`AsyncTask`. 您描述的所有操作，获取 json 并解析它们，都可以在`AsyncTask`. 编写您当前在`onClick`事件中编写的整个代码，并将其编写`doInBackground()`为`AsyncTask`.

检查以下内容以获取更多详细信息：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# android - 定制安卓应用：自动更新和永远在线？

> ID：11081276
> 
> 赞同：2
> 
> 时间：2012-06-18T10:49:11.237
> 
> 标签：android, auto-update

我正在尝试开发一个通常被认为是恶意软件的应用程序，但客户的需求非常具体和合乎逻辑。我们有大约 50-100 部廉价的 Android 手机，它们被固定、插入，应用程序应该通过 tcp 将一些传感器数据发送到远程服务器。听起来很简单，但有两个功能让我很苦恼（因为我不是经验丰富的 Android 开发人员，也从未植根过手机）：

#1 该应用程序应始终开启。如果它崩溃，服务器应该得到错误报告（堆栈跟踪），并且应用程序应该在 10 分钟后重新启动一次，然后放弃。此外，操作系统理论上可以杀死该应用程序（尽管我已尽力减少内存使用量）。我也想以某种方式处理它。

#2 如果应用程序可以远程更新或自动更新，而无需任何用户交互（因为没有常规用户），那就太好了。

要实现#1，除了root 电话之外，我没有看到其他解决方案（AlarmsManager 似乎没有按我预期的那样工作，并且添加另一个应用程序来处理第一个应用程序感觉不对）。有什么我想念的吗？

我根本不知道如何实现功能 #2。如果我将应用程序投放市场并在安装时选中“使此应用程序始终保持最新”复选框，这会起作用吗？我担心在服务运行时不会发生自动更新，即使发生了，操作系统在安装更新后也不会重新启动服务（除非实现了功能 #1）。如果我以编程方式下载最新的 .apk 并打开它，我仍然需要用户单击“安装”按钮。我什至正在考虑用某种脚本语言实现可更新部分。

在 Android API 的范围内是否有解决这些问题的方法？

编辑：谢谢大家的回答，你们非常有帮助。似乎使 Android 表现为非用户硬件的唯一方法是对其进行 root。这是进行静默自动更新的唯一方法。然后可以通过启用 cron 来实现始终开启（AlarmManager 显然不会在服务因崩溃而终止的情况下触发事件，但它可以被另一个微不足道的、不可崩溃的服务用来保持第一个运行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:10:19.273

对于#1，您可以使用前台服务。我不知道您需要多久获取一次传感器数据，但是 AlarmManager 有什么问题？我不明白生根如何帮助＃1。如果不生根或构建固件，您就无法真正做到#2。如果您将您的应用程序安装为系统应用程序（在 中`/system/app`），您可以使用 hidden`PackageManager`来静默安装新版本。使用 Market/Play 自动更新应该也可以，但您无法控制更新计划。而且，是的，它不会重新启动您的服务，但如果您使用 AlaramManager，这应该不是问题。

总而言之，现有的 Android 并不完全是一个可以让您完全控制的嵌入式系统，因此根据您愿意花费多少时间/精力，您可能需要对其进行一些自定义（或找到一个接近您的自定义 ROM要求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:58:37.840

回复：问题 #2，有一些`open-source`（根据 Apache 软件许可证 2.0 获得许可）选项您可以检查并查看它是如何工作的。

1.  [http://code.google.com/p/auto-update-apk-client/](http://code.google.com/p/auto-update-apk-client/)是自动更新服务的android客户端（我隶属于），它体积小，易于实现，并且支持rooted静默更新设备。

2.  [https://github.com/commonsguy/cwac-updater](https://github.com/commonsguy/cwac-updater)由 Mark Murphy 编写，但它可能需要您运行自己的更新服务器，我不确定静默更新。

# objective-c - 图形样式的 NSDatepicker 按钮

> ID：11081279
> 
> 赞同：2
> 
> 时间：2012-06-18T10:49:15.973
> 
> 标签：objective-c, xcode, cocoa, nsdatepicker

有人知道是否可以修改日期选择器的三个灰色小按钮（在其左上角）的行为？

我希望日期选择器在单击中间按钮（圆圈一）时显示当前日期。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T04:29:42.233

由于[NSDatePicker](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDatePicker_Class)包含一个处理大部分绘图和动作的[NSDatePickerCell](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDatePickerCell_Class/)，所以简短的回答是否定的，没有简单的方法来修改中间按钮的行为。

但是，我发现单击此按钮的选项会跳转到今天。:-)

# java - Struts 动作调用了两次——

> ID：11081280
> 
> 赞同：3
> 
> 时间：2012-06-18T10:49:20.317
> 
> 标签：java, jsp, struts, request

当我向浏览器提交表单时，表单被提交了两次。访问日志显示同时出现两个请求。两个不同的线程执行它。

问题是，第一个请求包含用户输入的属性值，而第二个请求调用仅包含请求对象中的空值。

并非所有时间都会出现此问题。它只是偶尔发生并且根本无法重现。在 IE8 和 IE9 中，我都遇到了这些问题。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T11:25:49.270

也许问题是您正在使用提交按钮并`document.forms[0].submit`在 javascript`onclick`事件处理程序中。

因此动作被调用了两次：

第一次由

```
document.forms[0].submit 
```

第二次由

```
submit button action 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:19:36.107

你用struts1还是struts2？无论如何，它们都有避免重复提交的机制：**token**。对于struts1，你需要在第一个action（表单页面的action ）中调用**saveToken() ，struts的'html:form'标签会自动添加这个token到你的页面；**在您的提交操作（处理表单的操作）中，调用**isTokenValid(request, true)**，这将验证您的页面和会话中的令牌。

对于 struts2，为您的提交操作添加拦截器 ref 令牌，并在您的表单页面中添加 's:token' 标记。

上述解决方案限制了服务器端的重复提交，第二次请求将导致异常并作为无效请求处理。但是如果你想在 UI 端限制这个，你需要一些 javascript，比如：当你点击提交按钮时，禁用它以避免重复提交。

# javascript - 通过表单传递一个 JS 变量

> ID：11081283
> 
> 赞同：0
> 
> 时间：2012-06-18T10:49:21.590
> 
> 标签：javascript, jquery, html

在下面`form`，我需要将值作为表单变量`document.result[0].value`传递`onclick`到下一页吗？具体来说，这`document.result[0].value=totalquestions-incorrect.length+ value`需要作为`store_result.cfm`页面上的表单数据进行访问。

```
<form method="POST"><div
align="center"><center><p>

<script>
  var wrong=0
   for (e=0;e<=2;e++)
document.result[e].value=""

var results=document.cookie.split(";")
 for (n=0;n<=results.length-1;n++){
  if (results[n].charAt(1)=='q')
 parse=n

 }

 var incorrect=results[parse].split("=")
 incorrect=incorrect[1].split("/")
 if (incorrect[incorrect.length-1]=='b') 
 incorrect=""
   document.result[0].value=totalquestions-incorrect.length+" out of "+totalquestions
   document.result[2].value=(totalquestions-incorrect.length)/totalquestions*100+"%"
 for (temp=0;temp<incorrect.length;temp++)
   document.result[1].value+=incorrect[temp]+", "

</script>

<input type="button" value="Continue" name="B1"
  onClick="location.href='store_result.cfm';""></p>
 </center></div>
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:57:18.817

```
 // html
<input id='res' type='hidden' value=''>

 <script>
  var result = 0
   // your script here 
   // calculate the value of result as you wish
  $('#res').val(result);

 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:00:40.673

Html:

```
<input type="button" value="Continue" name="B1" onclick="location.href='store_result.cfm?'+document.result[0].value;" /> 
```

store_result.cfm:

```
<script>
    var yourVar = location.href.split('?')[1];
</script> 
```

Or you can set cookie.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:03:40.923

改变

```
<input type="button" value="Continue" name="B1" onClick="location.href='store_result.cfm';""> 
```

至

```
<input type="button" value="Continue" name="B1" onClick="location.href='store_result.cfm?result=' + escape(document.result[0].value);""> 
```

然后它将通过下一页的查询字符串提供。

# groovy - 如何引用要在 build.gradle 中声明的值

> ID：11081285
> 
> 赞同：0
> 
> 时间：2012-06-18T10:49:26.733
> 
> 标签：groovy, teamcity, gradle

我对这个 gradle、teamcity 和 groovy 完全陌生。我正在尝试编写一个插件，它将从**svninfo**获取值。如果开发人员想要覆盖该值（在 build.gradle 中），他们可以覆盖类似这样的内容。

> ```
> globalVariables{
>         virtualRepo = "virtualRepo"
>         baseName = "baseName"
>         version = "version"
>         group = "group" 
> ```
> 
> }

在这里，我提供了名为 globalvariable 的扩展。

现在，要生产的 jar 的名称根据 build.gradle 中的值命名。
如何从插件中的 build.gradle 中获取值以便为 jar 命名？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:43:26.957

不确定我是否理解这个问题。它是安装扩展对象的插件，它是需要对它做一些事情的插件。

请注意，插件必须推迟从扩展对象中读取信息，因为后者可能仅在插件运行*后才会被填充。*（插件`apply plugin:`在构建脚本中被调用时运行。`globalVariables {}`之后可能会出现。）有几种延迟配置的技术。在您的特定情况下，如果我想使用扩展对象提供的信息来配置 Jar 任务，我可能会使用`jar.doFirst { ... }`or `gradle.projectsEvaluated { jar. ... }`。

在开始编写插件之前，请务必阅读 Gradle 用户指南中的[编写自定义插件](http://gradle.org/docs/current/userguide/userguide_single.html#custom_plugins)章节。在 Stack Overflow 或[http://forums.gradle.org](http://forums.gradle.org)上搜索应该会找到有关延迟配置技术的更多信息。另一个有价值的信息来源是 Gradle 代码库（例如代码质量子项目中的插件）。

# networking - 测试 ip4 或 ip6 是否为本地的方法？

> ID：11081286
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:49:28.990
> 
> 标签：networking

出于好奇，我很想知道哪些范围是为 localhost 保留的，例如 127.0.0.1 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:07:26.143

参考[RFC 1918](https://www.rfc-editor.org/rfc/rfc1918)

IPv4 的所谓“私有地址空间”是：

```
10.0.0.0        -   10.255.255.255  (10/8 prefix)
172.16.0.0      -   172.31.255.255  (172.16/12 prefix)
192.168.0.0     -   192.168.255.255 (192.168/16 prefix) 
```

对于 IPv6，该块称为[RFC4193](https://www.rfc-editor.org/rfc/rfc4193)中指定的“唯一本地地址”，并以

```
FC00::/7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T10:53:07.727

> localhost 作为主机名转换为 127.0.0.0/8（环回）网络块中的 IPv4 地址，通常是 127.0.0.1，或 IPv6 中的 ::1。

来源（和细节）：[http ://en.wikipedia.org/wiki/Localhost](http://en.wikipedia.org/wiki/Localhost)

# xcode - xcode sqlite3 删除数据库错误

> ID：11081287
> 
> 赞同：1
> 
> 时间：2012-06-18T10:49:31.813
> 
> 标签：xcode, caching, sqlite

我在我的 iOS 项目中使用 sqlite3。登录/注销时我想重新创建整个数据库。（我可以“从表中删除”；但是有大约 10 个表，当我需要更多表时，我也必须小心编写删除代码）所以我搜索删除数据库；但我发现它不能用查询来完成。据说我必须从文件系统中删除它；我的代码是；

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *dbPathDB=[appDelegate getDBPath];//dbname.sqlite
//to remove the db
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath =  [documentsDirectory stringByAppendingPathComponent:@"dbname.sqlite"];

//both of them works same if([[NSFileManager defaultManager] fileExistsAtPath:filePath]){
if(filePath){
    NSLog(@"it is removed now");
    [[NSFileManager defaultManager] removeItemAtPath:filePath error:nil];
}

//recreating the db
if (sqlite3_open([dbPathDB UTF8String], &database) == SQLITE_OK) {
    NSLog(@"db is created");

} 
```

当我在设备上尝试时，当我第一次登录时（还没有删除数据库）一切正常，当我注销并再次登录时，我收到有关插入数据的错误（但它可以连接到数据库，这部分工作，错误是关于再次插入同一行）。

我停止设备并再次运行它并登录我没有插入错误，因为数据库是干净的。看起来数据库文件已删除但数据库在缓存中或类似的东西？如何**删除并创建相同的数据库，然后插入数据而不会出错**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:51:49.470

这个有效：

```
-(void)removeDB {
    // Check if the SQL database has already been saved to the users phone
    // if not then copy it over
    BOOL success;
    NSError *error;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    success = [fileManager fileExistsAtPath:[appDelegate getDBPath]];
    if(success) {
        [fileManager removeItemAtPath:[appDelegate getDBPath] error:&error];
        NSLog(@"This one is the error %@",error);
        return;
    }
    //recreating the db
    if (sqlite3_open([[appDelegate getDBPath] UTF8String], &database) == SQLITE_OK) {
        NSLog(@"db is created");
    }
} 
```

# html - 透明边框和盒子阴影问题

> ID：11081292
> 
> 赞同：5
> 
> 时间：2012-06-18T10:50:20.083
> 
> 标签：html, border, css

考虑以下：

HTML

```
<div class="info_bubble">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque ornare ligula et nulla auctor vitae tincidunt erat congue.</p>
</div> 
```

CSS

```
.info_bubble {
    padding: 0 15px;
    margin: 1em 0 3em;
    border: 5px solid #FFF;
    background: #A6CE39;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    width: 200px;
    box-shadow: 0 0 10px #000;
    color: #FFF;
    position: absolute;
    left: 50px;
    top: 50px;
}

.info_bubble::before {
    content: "";
    position: absolute;
    bottom: -20px;
    left: 40px;
    border-width: 20px 20px 0;
    border-style: solid;
    display: block;
    width: 0;
    top: 10px;
    bottom: auto;
    left: -23px;
    border-width: 15px 23px 15px 0;
    border-color: transparent #FFF;
}

.info_bubble::after {
    content: "";
    position: absolute;
    bottom: -13px;
    left: 47px;
    border-width: 13px 13px 0;
    border-style: solid;
    display: block;
    width: 0;
    top: 16px;
    bottom: auto;
    left: -15px;
    border-width: 9px 15px 9px 0;
    border-color: transparent #A6CE39;
}​ 
```

一个例子：http: [//jsfiddle.net/ysqQV/2/](http://jsfiddle.net/ysqQV/2/)

上面从左侧生成一个带有三角形“箭头”的“语音气泡”。箭头由边框创建，部分透明，部分不透明。

我想在对话泡泡后面使用一个盒子阴影，但这在箭头周围有点时髦，因为它从整个元素而不是不透明部分投下阴影。

示例：http: [//jsfiddle.net/ysqQV/1/](http://jsfiddle.net/ysqQV/1/)

我知道这是正常行为而不是错误，但我希望能够将框阴影剪辑到箭头的不透明部分。

我不能将单个图像用于语音气泡，因为内容可以是任何高度，并且我想避免使用拼凑在一起的多个图像，因为这个解决方案非常干净。

谁能想到一个可行的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-03-06T10:16:33.760

使用阴影过滤器：

```
filter: drop-shadow(0 0 30px #333); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T11:01:34.817

你所追求的是不可能的。但是，我知道一些解决方法：

首先也是最简单的，松开箭头上的阴影。它仍然会很好看。

其次，使用图像并在阴影中烘烤箭头。可能并不理想，但它确实有效。

第三个选项，只需使用所有这些样式制作一个 20 x 20 的正方形，然后使用变换旋转它。你会得到一颗钻石，所以下一步是使用蒙版隐藏你不需要的边缘。我以前做过这个，但在这个过程中肯定会有点模糊，所以我实际上最终选择了第一个选项。如果你不能使用掩码，你可以将箭头包裹在 div/span 或其他东西中，并将其设置为溢出隐藏。额外的代码，但结果相同。

如果您需要，我可以为最终选项提供一个示例，但今晚我才有机会。

就个人而言，我会选择第一个选项。

希望有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T02:29:42.633

为时已晚，但我已使用您的代码使其适用于我的网站。所以，我在这里分享它。

它只需要在 HTML 中添加一个，以及一些 CSS 更改：

```
<div class="arrow_mask"></div> 
```

[http://jsfiddle.net/ysqQV/123/](http://jsfiddle.net/ysqQV/123/)

# c++ - 在二维数组中插入结构

> ID：11081294
> 
> 赞同：0
> 
> 时间：2012-06-18T10:50:27.573
> 
> 标签：c++, arrays, struct

当我尝试在二维数组中添加结构时

```
cin>>array[1][items.stoka_ime]; 
```

在错误列表中写下：

```
 IntelliSense: no operator "[]" matches these operands 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-18T10:53:43.460

从您的问题中不清楚您的实际问题是什么。所以我只是展示了一个数组和结构组合使用的示例。

对于结构数组

```
struct abc
{
int i;
int j;
}

abc object[10];

cin>>object[0].i>>object[0].j; 
```

结构中的数组

```
struct abc
    {
      int i[10];
    }         
 abc object;                  
 cin>>object.i[0]; 
```

推入队列结构数组：

```
queue.push(array[i]); 
```

# php - 将数据库字段显示为复选框

> ID：11081297
> 
> 赞同：1
> 
> 时间：2012-06-18T10:50:41.917
> 
> 标签：php

我正在尝试显示我的所有数据库字段，例如单选按钮。例如我有这个数据库字段：

```
hostess_id
hostess_name_en
hostess_surname_en
... etc ... 
```

我想将它们显示为单选按钮，以便选择它们，然后仅显示所选按钮的数据信息。

我怎样才能做到这一点？我有这样的事情：

```
<?php
$link = mysql_connect('localhost', 'root', '');
if (!$link) {
    die('Could not connect to MySQL server: ' . mysql_error());
}
$dbname = 'db_up';
$db_selected = mysql_select_db($dbname, $link);
if (!$db_selected) {
    die("Could not set $dbname: " . mysql_error());
}
$res = mysql_query('select * from hostess', $link);

while ($row = mysql_fetch_assoc($result)){

  echo "<td><input type=\'checkbox\' name=\'hostess[]\' value=\'" . $row['hostess_id'] . "\'>" . $row['hostess_firstname_en'] . "<br />";

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:05:24.510

使用 PDO，它将获取所有字段

```
$q = $dbh->prepare("DESCRIBE tablename");
$q->execute();
$table_fields = $q->fetchAll(PDO::FETCH_COLUMN); 
```

使用已弃用的 mysql_*

```
function mysql_field_array( $query ) {
    $field = mysql_num_fields( $query );
    for ( $i = 0; $i < $field; $i++ ) {
        $names[] = mysql_field_name( $query, $i );
    }
    return $names;
}
// Example of use
$fields = mysql_field_array( $query ); 
```

比您可以遍历该字段名称数组并将名称与您的复选框一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:09:37.923

复选框需要一个唯一的`name`或者它们需要是一个数组。复选框数组适合您正在做的事情：

```
while ($row = mysql_fetch_assoc($result)){

  echo "<input type='checkbox' name='hostess[]' value='" . $row['id'] . "' />" . htmlentities($row['hostess_surname_en']) . "<br />";

} 
```

这将为您提供一个复选框列表，每个复选框旁边都有女主人姓氏。现在，当将此表单提交给 PHP 脚本时，您将能够访问所选行`id`：

```
$selectedIds = $_POST['hostess']; // an array 
```

`$selectedIds`是检查记录`id`s 的数组。

我建议对新代码使用 PDO 或 MySQLi，因为该`mysql_*`库已弃用。

# python - QDockWidget 中的 QWebView 拒绝调整大小

> ID：11081298
> 
> 赞同：0
> 
> 时间：2012-06-18T10:50:45.030
> 
> 标签：python, qt4, pyqt

这个坏男孩只是不想改变大小来填充停靠小部件区域。我已经尝试了 QSizePolicy 的各种变体，但似乎没有任何效果。QWebView 的大小始终保持不变。我需要写一个 resize() 回调吗？

这是我现在拥有的：

```
 self.helpwindow = QtGui.QDockWidget("Doc Browser")
    self.helpwindow.setAllowedAreas(QtCore.Qt.RightDockWidgetArea)
    self.helpwindow.setFeatures(QtGui.QDockWidget.DockWidgetClosable | QtGui.QDockWidget.DockWidgetFloatable)
    helpAction = self.helpwindow.toggleViewAction()
    helpAction.setText("&Help Browser")
    helpAction.setShortcut(QtGui.QKeySequence("F1"))
    helpMenu.addAction(helpAction)

    self.addDockWidget(QtCore.Qt.RightDockWidgetArea, self.helpwindow)      

    helpbrowser = QtWebKit.QWebView(self.helpwindow)
    indexpath = resource_filename(__name__,"help/index.html")
    url = QtCore.QUrl("file://" + indexpath)
    helpbrowser.load(url)
    helpbrowser.show()
    helpbrowser.updateGeometry()
    helpbrowser.update()

    helpbrowser.setMinimumWidth(400)
    helpbrowser.setMinimumHeight( self.helpwindow.height())
    sizepolicy = helpbrowser.sizePolicy()
    sizepolicy.setVerticalPolicy(QtGui.QSizePolicy.MinimumExpanding)
    sizepolicy.setHorizontalPolicy(QtGui.QSizePolicy.MinimumExpanding) 
```

我正在使用 PyQT4，但很高兴接受 C++ 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:55:45.777

仅设置 paren 不会使 QDockWidget 管理子小部件。您需要致电：

```
helpwindow.setWidget(helpbrowser) 
```

# c# - 获取动态生成的 ajax 文本框 id

> ID：11081304
> 
> 赞同：0
> 
> 时间：2012-06-18T10:51:01.600
> 
> 标签：c#, asp.net, dynamic

我创建了一个 Web 应用程序，我需要根据用户输入的数字生成文本框。我使用了 Ajax 并动态创建了文本框，但这些文本框无法从代码隐藏中访问。我使用过`find control`但没有用。这是我用来生成文本框的代码。

```
if (txtnobranches.Text != "")
            {
                if (Convert.ToInt32(txtnobranches.Text) != 0)
                {
                    div_br.InnerHtml = "<table></table>";
                    tbl_br.Controls.Clear();
                    for (int i = 0; i < Convert.ToInt32(txtnobranches.Text); i++)
                    {

                        TableRow rowbr = new TableRow();
                        TableCell cellname = new TableCell();
                        cellname.Text = "Branch Location " + i.ToString();
                        rowbr.Cells.Add(cellname);
                        TableCell cellvalue = new TableCell();
                        cellvalue.Text = "";
                        TextBox txt = new TextBox();
                        txt.Text = "";
                        txt.ID = "txtbranchloc" + i.ToString();
                        cellvalue.Controls.Add(txt);
                        cellvalue.ID = "txtbranchloc" + i.ToString();
                        rowbr.Cells.Add(cellvalue);
                        tbl_br.Rows.Add(rowbr);
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:31:55.620

您可以使用 Request.Form["NameOfFormControl"]**按名称访问元素**您将不得不对代码进行少量更改。

**在 JavaScript 中**

```
 txt.Name = "txtbranchloc" + i.ToString(); 
```

**在代码后面**

**注意：确保你在回发中访问它，否则你会得到 null**

```
 if (Page.IsPostBack)
 {
    string firstTxtVal = Request.Form["txtbranchloc0"].ToString();
    string secondTxtVal = Request.Form["txtbranchloc1"].ToString();
 } 
```

[使用 Request.Form 集合](http://msdn.microsoft.com/en-us/library/ms525985%28v=vs.90%29.aspx)

# c++ - 如何将元素插入 std::unordered_map >

> ID：11081308
> 
> 赞同：4
> 
> 时间：2012-06-18T10:51:22.203
> 
> 标签：c++, stl, vector, unordered-map

我正在尝试创建指向我的对象的指针数组的哈希。

哈希键是对象类型的 int，数组是要渲染的对象的列表。

我想做的是：

```
unordered_map<int, vector<Object*> > drawQueue;
drawQueue.clear(); // new empty draw queue

for ( ... ) {
   drawQueue.at(type).push_back(my_obj);
} 
```

所以我对 STL 东西的细微差别不够熟悉，因为我得到一个异常说 out_of_bounds，当密钥不存在时会发生这种情况。

所以我想我需要先创建密钥，然后添加到向量：

```
if (drawQueue.count(type)) {
    // key already exists
    drawQueue.at(type).push_back(my_obj);
} else {
    //key doesn't exist
    drawQueue.insert(type, vector<Object*>); // problem here
    drawQueue.at(type).push_back(my_obj);
} 
```

但是现在我真的迷路了，因为我不知道如何创建/初始化/`vector`插入`unordered_map`...

还是我这样做完全错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T10:58:03.983

You are not using `insert` in the proper way. This should work:

```
drawQueue.insert(std::make_pair(type, std::vector<Object*>())); 
```

If using C++11, the previous statement can be simplified to:

```
drawQueue.emplace(type, std::vector<Object*>()); 
```

By using this approach the element is constructed in-place (i.e., no copy or move operations are performed).

I also include links to the documentation for [`insert`](http://en.cppreference.com/w/cpp/container/unordered_map/insert) and [`emplace`](http://en.cppreference.com/w/cpp/container/unordered_map/emplace).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-21T01:58:04.783

我认为这是一个简单的方法。我的示例将创建一个 unordered_map 字符串作为键和整数向量作为值。

```
unordered_map<string,vector<int>> keys;
keys["a"] = vector<int>(); // Initialize key with null vector
keys["a"].push_back(1); // push values into vector.
keys["a"].push_back(5);    
for(int i : keys["a"] ){
    cout << i << "\t";
} 
```

# ruby-on-rails - 在发送中使用带有不同参数的收集

> ID：11081313
> 
> 赞同：0
> 
> 时间：2012-06-18T10:51:41.043
> 
> 标签：ruby-on-rails, ruby

我有一个名为 Trial 的课程`has_many`。现在我想做的是用不同的行进行一些计算。

所以我有一个包含所有应该收集的列名的数组。我想使用 Collect 方法，但它有点棘手。

```
t = Trial.find(<id>)
["collumn1", "collunn2", "collumn3"].each do |collumn_name|
  data = t.results.send("collect", &:collumn_name)
  # HERE I WANT DO WORK WITH THE COLLECTED DATA
end 
```

但它不起作用，因为收集方法除了一些块而不是字符串。我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:09:16.130

Symbol#to_proc 会给你你想要的：

```
t = Trial.includes(:results).find(<id>) # <-- use includes to avoid having to requery for results
[:collumn1, :collunn2, :collumn3].each do |collumn_name|
  data = t.results.collect &collumn_name
  # whatevs
end 
```

# java - 如何编辑 Java 平台包（内置 API）源代码？

> ID：11081314
> 
> 赞同：0
> 
> 时间：2012-06-18T10:51:41.830
> 
> 标签：java

`java.util.Scanner`与 Java API 一样好，我需要为我正在处理的项目更改默认 API 包（例如）中某些类的代码。

理想情况下，我会扩展我感兴趣的类并创建自己的子类，但我想要扩展的类被声明为“final”。你建议我怎么做？如果我自定义这些包的源代码，我会在编译器上遇到麻烦吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:11:30.243

如果可以，您应该按照另一个答案中的建议进行包装和委托。请参阅[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。

但如果你*真的*需要，当然有办法做到这一点。

一种直接的方法是简单地修改下载源代码中的代码并在类路径中替换您自己的 jar 版本。

另一种选择是使用面向方面的编程技术，可能使用[AspectJ](http://www.eclipse.org/aspectj/)来根据需要拦截和修改调用。

也可以使用反射和本地类加载器来破解一个解决方案，但是编写代码会很痛苦。

但是，如果您不知道自己在做什么，那么所有这些都是非常危险的。经常有充分的理由将课程定为最终课程。

如果您更具体地告诉我们您希望更改的内容，我们可能会提供帮助，避免您目前认为需要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:57:28.287

你真的不能延长最后一堂课..

如果你真的想通过扩展一个类来添加一个功能，你可以通过修改类 src 来实现。从JDK并将其保存为您自己的类并使用它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-18T10:55:06.930

不要那样做。编写您自己的代码，包裹在原始扫描仪周围并使用它。要更新内部包，`endorsed`您可以在运行时提供一个目录属性。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-18T10:58:23.453

永远不要这样做！永远不要更改核心课程。如果类是最终的 - 使用组合而不是继承。

# excel - 如何从 PowerShell 连接到现有的 Excel 实例？

> ID：11081317
> 
> 赞同：7
> 
> 时间：2012-06-18T10:51:51.973
> 
> 标签：excel, powershell, automation

通过 PowerShell 自动化 Excel 的所有示例都以这一行开头：

```
PS> $Excel = New-Object -Com Excel.Application 
```

这似乎是在处理一个新的 Excel 实例，例如运行`$Excel.Visible = $true`将显示一个空的空白 Excel 窗口，而不是切换到现有工作簿。

**如果已经有一个 Excel 实例正在运行，有没有办法连接到它？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-16T15:49:32.887

而不是通常的`New-Object` `-ComObject`excel.application 我们这个

`$excel = [Runtime.Interopservices.Marshal]::GetActiveObject('Excel.Application')`

休息保持不变。

一个缺点。您只会获得由将启动 ps1 的同一用户启动的 excel“实例”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:28:47.403

[是的，您可以使用此 WIN32 API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317978%28v=vs.85%29.aspx) ( ***AccessibleObjectFromWindow*** )通过 HWND [窗口句柄] 访问 COM 对象。

> [（请参阅此处](https://stackoverflow.com/q/779363/763026)通过 C# 使用此 api的 SO 帖子示例）

.

您可能必须用 C# 编写程序集和/或[通过 Powershell 操作 P/Invoke 调用](http://msdn.microsoft.com/en-us/gg981616)。

你可以试一试，看看情况如何。

# php - 单例初始化配置

> ID：11081324
> 
> 赞同：1
> 
> 时间：2012-06-18T10:52:14.857
> 
> 标签：php, singleton

有一个公共库，有一个类在一个PHP进程中只能有一个实例，所以是Singleton。问题是这个类的初始化需要一些配置参数，我找不到在类构造函数中传递它们的好问题。

我发现的唯一问题是：

```
 public static function init($params) {
    if(self::$instance) {
        throw new Exception(__CLASS__ . ' already initialized');
    }
    $class = __CLASS__;
    self::$instance = new $class($params);
}

public static function getInstance() {
    if(!self::$instance) {
        throw new Exception(__CLASS__ . ' is not initialized');
    }
    return self::$instance;
} 
```

但我不认为它真的很好。还有其他想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:27:45.650

有一个不好但有效的问题的例子：

```
if(!defined('PSEOUDSINGLETON_PARAM')) {
      define('PSEOUDSINGLETON_PARAM', 'default value');
}

class PseoudoSingleton {

  protected function __construct($param1 = PSEOUDSINGLETON_PARAM) { 
        // ... 
  }

  public static function getInstance() {
    if(!self::$instance) {
        $class = __CLASS__;
        self::$instance = new $class();
    }
    return self::$instance;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:10:53.933

```
/* on library/utility level */
class nonSingletonService { public function __construct($options){} }

/* on application logic level, so, knows all context */
function getSingleton(){ 
   static $inst; 
   if (!$inst) $inst=new nonSingletonService(calculateParameters()); 
   return $inst; 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T11:29:21.667

为什么要检查两次？

只需执行以下操作：

```
private static function init($params) {       
    $class = __CLASS__;
    self::$instance = new $class($params);
}

public static function getInstance($params) {
    if(!self::$instance) {
        self::init($params);
    }
    return self::$instance;
} 
```

这样，您知道您只需要检查一次，并且您知道只有在实例未初始化时才调用 init()。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T11:15:58.757

示例单例实现：

```
class MySingleton
{
   private static $_INSTANCE = null;

   private function __construct()
   {
      // put initialization code here
   }

   public static function getInstance()
   {
       if(self::$_INSTANCE === null) self::$_INSTANCE = new MySingleton();
       return self::$_INSTANCE;
   }
} 
```

请注意，构造函数是**私有**的，因此只能从类本身调用。实例的引用只能通过**getInstance**调用获得，它在第一次调用时创建对象，任何后续调用都将返回对现有对象的引用。

# .htaccess - .htaccess mod_rewrite：重写图片路径

> ID：11081329
> 
> 赞同：0
> 
> 时间：2012-06-18T10:52:54.420
> 
> 标签：.htaccess, mod-rewrite, rewrite

我需要在以下 URL 上重写图像路径：

1.  domain.com/system/index
2.  domain.com/system/view/12345
3.  domain.com/system/search/term1:/term2:data/term3:/term4:data/term5 -（此 URL 将包含不同数量的数据，具体取决于用户搜索的内容。）

到这张图片：

mydomin.com/img/img1.gif

这就是我目前在 .htaccess 中的内容：

```
RewriteRule ^([^/]+)/img/img1\.gif$ /img/img1\.gif [L] 
```

这会正确重写 URL 1 和 2，但不适用于 URL 3。访问 URL 3 时，它会重定向到以下内容：

domain.com/system/search/term1:/term2:data/term3:/img/img1.gif

这是不正确的。这一直让我发疯，任何帮助真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:17:44.023

`[^/]+`表示 1 个或多个不是斜杠的字符，您需要 1 个或多个任意字符 - 所以改为使用点 -`.`

```
RewriteRule ^(.+)/img/img1\.gif$ /img/img1\.gif [L] 
```

# jquery - 带有选项卡的 jQuery 滑块为滑块设置动画

> ID：11081331
> 
> 赞同：0
> 
> 时间：2012-06-18T10:52:59.677
> 
> 标签：jquery

您好我正在尝试添加一些选项卡以向 jQuery 滑块添加更多可用性。我设法根据 HTML 中有多少幻灯片添加了一些选项卡。现在，如果我单击这些选项卡之一（1、2、3、4），它必须将我带到相关幻灯片上，任何有关如何实现此目的的想法？

这是我到目前为止所拥有的：

```
 var slides = $('.slide');
 var numberOfSlides = slides.length;

function createTabs() {  // creates tabs based on how many slides in HTML
for (i = 1; i < numberOfSlides + 1; i++) {
    $('#tabsstyle').append('<p>' + i + '</p>')
}
}
createTabs();
$("#tabsstyle p").click(function () {
// here the code to jump on the related slide
}) 
```

如果您需要更多信息，请告诉我。谢谢

添加了 HTML

```
<div id="pageContainer">
<!-- Slideshow HTML -->
<div id="slideshow">

<div id="slidesContainer">

  <div id="one" class="slide">
    <h2></h2>
    </div>

  <div id="two" class="slide">
    <h2></h2>
     </div>

  <div id="three" class="slide">
    <h2></h2>
   </div>

  <div id="four" class="slide">
    <h2></h2>
  </div>

</div>
<div id="tabsstyle"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:57:10.520

Based on information provided by you, I think this can help. Although it may not be 100% correct, but it can give you some idea.

```
$("#tabsstyle p").click(function () {
   var index = $(this).index();
   $('#slidesContainer').find('.slide').hide();
   $('#tabsstyle').find('p').each(function(pos){
      var slideToShow = parseInt(pos) + 1;
      if(pos == index){
          $('#slidesContainer').find('.slide:nth-child('+slideToShow+')').show();
      }
   });
}) 
```

# python - 从交互式 shell 调用 d 代码

> ID：11081333
> 
> 赞同：5
> 
> 时间：2012-06-18T10:53:05.753
> 
> 标签：python, shell, d, pyd

我需要一个交互式环境，我可以在其中使用良好的脚本语言和体面的科学绘图库（例如 python）即时调用 d 函数。

有没有办法从 shell（Ipython 或类似的）调用 d 函数？我查看了 pyd ，但它似乎已经过时了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:14:37.857

我全心全意地推荐优秀的[LuaD](https://github.com/JakobOvrum/LuaD)。这是一个**活跃**的项目，作者是 StackOverflow 用户，他也挂在官方 D IRC 频道 irc://irc.freenode.org/D 上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:31:35.917

试试[pyd](https://bitbucket.org/ariovistus/pyd)，它是一个用于在 D 中为 python 编写扩展的库，甚至还有一个 distutils 扩展来帮助构建用于 python 的 D 扩展。

# sql - 将一个数据库的访问权限授予另一个用户/角色

> ID：11081334
> 
> 赞同：9
> 
> 时间：2012-06-18T10:53:06.377
> 
> 标签：sql, sql-server, sql-server-2008, security, tsql

**简短版本：**我可以授予角色访问外部数据库的权限吗？

**长版：**

我正在使用 Crystal 从应用程序 SQL Server 实例 ( `database1`) 中检索数据来处理报表。

应用程序正在运行报告并覆盖报告中的连接，我无权访问应用程序代码。

我已将一个新数据库添加到服务器 ( `database2`)，该数据库正在从电话交换机收集信息，并且我想将其中一些信息加入应用程序数据 ( `database1`)。

我可以在设计器中运行时加入数据和报告（以 SA 身份登录），但是当报告通过应用程序在外部运行时，它们会失败并出现相当普遍的错误（无法检索数据）。

我假设错误是由新的数据库权限引起的，就好像我以 SA 身份登录应用程序时，错误消失了。

应用程序为运行报告的用户提供了一个特殊的数据库角色，当向应用程序 db ( `database1`) 添加表/视图/sp 时，我可以简单地将选择/执行授予此角色以允许报告访问对象。

现在我在不同的数据库中有对象，但是该角色不容易访问。

有什么办法可以`database2`通过现有角色引用第二个数据库（）？

例如：

```
USE [database1]
GRANT EXECUTE ON [database2].[dbo].[CUSTOM_PROCEDURE] TO [applicationrole1] 

OR

USE [database2]
GRANT EXECUTE ON [dbo].[CUSTOM_PROCEDURE] TO [database1].[dbo].[applicationrole1] 
```

理想情况下，我希望能够以某种方式链接到角色，而不是重新创建新角色，因为当添加/配置新用户时，应用程序会定期更新角色。

*（未使用 Crystal-Reports 标记，因为这与问题无关）*

**编辑：**

有没有办法做类似的事情：

```
INSERT INTO Database2.sys.database_principals
SELECT * FROM Database1.sys.database_principals
WHERE [type] = 'S' 
```

复制用户（不是登录名）然后添加角色成员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:04:34.307

据推测，您将使用可以访问两个数据库的登录名（例如 SA 的情况）。您将创建适当的角色并授予每个数据库的权限，然后在两者中创建用户（链接到您正在使用的登录名），将每个用户添加到您创建的角色中。

T-SQL 看起来像这样：

```
use master
go
create login testuser with password = 'mypassword123'
go

use test
go

create role reporting
grant select on something to reporting -- grant your permissions here

create user testuser for login testuser
exec sp_addrolemember 'reporting', 'testuser'
go

use test2
go

create role reporting
grant select on something2 to reporting -- grant your permissions here

create user testuser for login testuser
exec sp_addrolemember 'reporting', 'testuser'
go 
```

现在我可以连接`test`并执行

```
 select * from something
 select * from test2.dbo.something2 
```

当然，您可以在所需的存储过程上将您的授权更改为 EXECUTE，但看起来您已经涵盖了这一点。

之后，只需执行一个简单的脚本来创建登录名、用户并将它们添加到角色中。

```
declare @sql nvarchar(max), @username nvarchar(50), @password nvarchar(50)

-- ########## SET PARAMETERS HERE
SET @username = N'testguy'
SET @password = N'test123'
-- ########## END SET PARAMETERS

set @sql = N'USE master; CREATE LOGIN [' + @username + N'] WITH PASSWORD = N''' + @password + N'''; USE database1; CREATE USER [' + @username + N'] FOR LOGIN [' + @username + N']; EXEC sp_addrolemember ''reporting'', ''' + @username + N''';  USE database2; CREATE USER [' + @username + N'] FOR LOGIN [' + @username + N']; EXEC sp_addrolemember ''reporting'', ''' + @username + N''';'
exec sp_executesql @sql 
```

# 自动同步登录名、用户和角色

此脚本将查找所有 SQL 登录（您可以将其更改为对您有意义的任何内容；windows 和 SQL 帐户、包含特定字符串的帐户等），确保用户已在`database1`和中创建`database2`，并确保它们都添加到`reporting`角色。您需要确保`reporting`在两个数据库上都创建了角色，但您只需执行一次。

之后，您可以手动或使用 SQL 代理作业定期运行此脚本。您需要做的就是为服务器创建登录名；当脚本运行时，它将完成其余的工作。

```
declare @login nvarchar(50), @user1 nvarchar(50), @user2 nvarchar(50), @sql nvarchar(max), @rolename nvarchar(50)

SET @rolename = 'reporting'

declare c cursor for 
select sp.name as login, dp1.name as user1, dp2.name as user2 from sys.server_principals as sp
    left outer join database1.sys.database_principals as dp1 on sp.sid = dp1.sid
    left outer join database2.sys.database_principals as dp2 on sp.sid = dp2.sid
where sp.type = 'S' 
    and sp.is_disabled = 0

open c

fetch next from c into @login, @user1, @user2

while @@FETCH_STATUS = 0 begin

    -- create user in db1
    if (@user1 is null) begin
        SET @sql = N'USE database1; CREATE USER [' + @login + N'] FOR LOGIN [' + @login + N'];'
        EXEC sp_executesql @sql
    end

    -- ensure user is member of role in db1
    SET @sql = N'USE database1; EXEC sp_addrolemember '''+ @rolename + ''', ''' + @login + N''';'
    EXEC sp_executesql @sql

     -- create user in db2
    if (@user2 is null) begin
        SET @sql = N'USE database2; CREATE USER [' + @login + N'] FOR LOGIN [' + @login + N'];'
        EXEC sp_executesql @sql
    end

    -- ensure user is member of role in db2
    SET @sql = N'USE database2; EXEC sp_addrolemember '''+ @rolename + ''', ''' + @login + N''';'
    EXEC sp_executesql @sql

    fetch next from c into @login, @user1, @user2
end

close c
deallocate c 
```

你会想要添加一个事务和错误处理来取消不完整的更改，但我将把它留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:23:52.903

设置存储过程以所有者身份执行。

[http://msdn.microsoft.com/en-us/library/ms188354.aspx](http://msdn.microsoft.com/en-us/library/ms188354.aspx)

在存储过程所在的数据库上设置trustworthy。

[http://technet.microsoft.com/en-us/library/ms187861.aspx](http://technet.microsoft.com/en-us/library/ms187861.aspx)

确保您在两个数据库上拥有相同的所有者。

[http://msdn.microsoft.com/en-us/library/ms188676(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms188676%28v=sql.105%29.aspx)

将存储过程的执行权限授予具有该过程的数据库上的适当用户或角色。

# java - 为什么java不使用指针

> ID：11081336
> 
> 赞同：-3
> 
> 时间：2012-06-18T10:53:09.163
> 
> 标签：java

> **可能重复：**
> [java中的指针](https://stackoverflow.com/questions/7480783/pointers-in-java)

为什么 java 不使用指针虽然 C# 和其他语言明确使用它？

我认为由于某些安全原因，它不允许用户访问其内存分配。

更新：我想知道 java 被称为一种非常安全的语言，因此缺少指针确实与它的健壮性或安全性有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:56:37.383

使用指针被认为是不安全的，错误甚至会导致系统不稳定。在 C# 中，我们不使用指针。您可以使用 unsafe 块来执行此操作，但您只对需要优化速度的代码执行此操作。我认为在 java 中它应该也是可能的，虽然我从来没有在 java 中编程过，所以应该有人在评论中确认/拒绝。

# ruby-on-rails - 设计允许对单个控制器操作进行令牌身份验证

> ID：11081338
> 
> 赞同：4
> 
> 时间：2012-06-18T10:53:10.800
> 
> 标签：ruby-on-rails, ruby, devise

我有一个 web 应用程序，它为所有控制器使用设计数据库身份验证，但是我希望有一个控制器操作，其中身份验证也使用令牌完成。我可以为此使用设计吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:21:12.937

设计策略有一个`valid?`方法被调用来确定是否应该启用策略。这允许您在每个控制器/操作的基础上控制可用的身份验证策略。

把它放在一个初始化器中：

```
require 'devise/strategies/base'
require 'devise/strategies/token_authenticatable'
module Devise
  module Strategies
    class TokenAuthenticatable < Authenticatable
      def valid?
        super && params[:controller] == "your controller" && params[:action] == "your action"
      end
    end
  end
end 
```

让我知道它是否有效。

# android - How to work with onWaveFormDataCapture result of Visualizer object?

> ID：11081356
> 
> 赞同：2
> 
> 时间：2012-06-18T10:54:40.193
> 
> 标签：android, fft, android-mediaplayer, waveform, visualizer

I'm new to android programming and audio visualization. I want to create a simple audio visualizer using [`MediaPlayer`](http://developer.android.com/reference/android/media/MediaPlayer.html) and [`Visualizer`](http://developer.android.com/reference/android/media/audiofx/Visualizer.html) classes. My problem is, I don't know what `wave form data` really is. Must I use it to visualize audio? I'm using the code below. It's problem is, it will only visualize audio for the first 10-12 seconds of the file; after that, I'm unable to capture more data! Where did I go wrong?

```
public void attachVisualizer()
{
    Visualizer vis = new Visualizer(mPlayer.getAudioSessionId());

    vis.setCaptureSize(Visualizer.getCaptureSizeRange()[0]);
    vis.setDataCaptureListener(new Visualizer.OnDataCaptureListener() {
        public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes, int samplingRate) {
            int sum = 0;

            for(int i = 0; i < bytes.length; i++) {
                sum += bytes[i];
            }

            if(sum > 8000) {
                // Do something which uses mPlayer.getCurrentPosition() in mathematics
            }
        }

        public void onFftDataCapture(Visualizer visualizer, byte[] fft, int samplingRate) {}
    }, Visualizer.getMaxCaptureRate() , true, false);

    vis.setEnabled(true);
} 
```

**EDIT**
And another question in my mind is, how do I record the length of time contained in a given audio segment?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:16:09.863

我这样做：

```
visualizer = new Visualizer(0);
    visualizer.setEnabled(false);

    visualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[0]);
    visualizer.setDataCaptureListener(
            new Visualizer.OnDataCaptureListener() {

                public void onWaveFormDataCapture(Visualizer visualizer,
                        byte[] bytes, int samplingRate) {
                    eqview.setVSWaveForm(bytes);
                }

                public void onFftDataCapture(Visualizer visualizer,
                        byte[] bytes, int samplingRate) {
                    fftview.setVSFftData(bytes);
                }
            }, Visualizer.getMaxCaptureRate(), true, true);
    visualizer.setEnabled(true); 
```

对于Visualizer View，我在网上找到了这段代码，我没有写：

```
package app.util;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.view.View;

/***
* 
* 
* @author yokmama
* 
*/
public class VisualizerView extends View {

private byte[] mBytes;

private float[] mPoints;

private Rect mRect = new Rect();
//SharedPreferences prefs;
private Paint mForePaint = new Paint();

public VisualizerView(Context context, AttributeSet attrs) {
    super(context, attrs);
    //prefs = PreferenceManager.getDefaultSharedPreferences(context);
    init();
}

private void init() {
    mBytes = null;
    //int colorchosen = prefs.getInt("COLOR_PREFERENCE_KEY",
    //      Color.WHITE);
    mForePaint.setStrokeWidth(1);
    //mForePaint.setAntiAlias(true);
    mForePaint.setColor(Color.WHITE);
    //mForePaint.setMaskFilter(new BlurMaskFilter(1, Blur.INNER));

}

public void updateVisualizer(byte[] bytes) {
    mBytes = bytes;
    invalidate();
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    if (mBytes == null) {
        return;
    }

    if (mPoints == null || mPoints.length < mBytes.length * 4) {
        mPoints = new float[mBytes.length * 4];
    }

    mRect.set(0, 0, getWidth(), getHeight());

    for (int i = 0; i < mBytes.length - 1; i++) {
        mPoints[i * 4] = mRect.width() * i / (mBytes.length - 1);
        mPoints[i * 4 + 1] = mRect.height() / 2
                + ((byte) (mBytes[i] + 128)) * (mRect.height() / 2) / 128;
        mPoints[i * 4 + 2] = mRect.width() * (i + 1) / (mBytes.length - 1);
        mPoints[i * 4 + 3] = mRect.height() / 2
                + ((byte) (mBytes[i + 1] + 128)) * (mRect.height() / 2)
                / 128;
    }

    canvas.drawLines(mPoints, mForePaint);
    //canvas.drawPoints(mPoints, mForePaint);
} 
```

}

# hadoop - Partitioner 类中的参数 numPartitions

> ID：11081360
> 
> 赞同：0
> 
> 时间：2012-06-18T10:54:48.163
> 
> 标签：hadoop, mapreduce, partitioner

大师！

任何人都可以回答：Partitioner 类中的参数 numPartitions 在哪里定义（这个参数的值）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:38:22.747

这是为您的 Map Reduce 作业定义的 reducer 的数量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:05:25.737

你是这个意思吗？[分区类中的 numPartition](http://search-hadoop.com/c/Hadoop:/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/Partitioner.java%7C%7CnumPartitions)。我只是在[那里](http://search-hadoop.com/?q=numPartitions)使用搜索。

```
* @param numPartitions the total number of partitions. (as integer)
* [...] The total number of partitions 
* is the same as the number of reduce tasks for the job. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T14:57:55.240

在 Driver 类中，您将提到该工作所需的减速器数量。该计数称为 numPartion 计数。像：

```
job.setNumReduceTasks(4); 
```

# wpf - Bound Settings works in Visual Designer but I can't run the app

> ID：11081366
> 
> 赞同：4
> 
> 时间：2012-06-18T10:55:07.253
> 
> 标签：wpf, visual-studio, xaml, binding, exception-handling

I am using Visual C# Studio 2010 Express and I have oakward problem. I wanted to bind few TextBoxes to application Settings. I've followed Paul Sheriff's solution [Paul Sheriff's solution](http://weblogs.asp.net/psheriff/archive/2009/10/19/binding-to-config-settings-in-wpf.aspx). It works only in visual designer - I can't run the app, cause i got:

> XmlParseException 'Provide value on 'System.Windows.StaticResourceExtension' threw an exception.

How is it possible, that it's working in visual designer (values are presented in TextBoxes correctly) but there is a XmlParseException?

App.xaml:

```
<Application.Resources>
    <ObjectDataProvider x:Key="odpSettings" ObjectType="{x:Type setts:Settings}" />
</Application.Resources>` 
```

The setts namespace is defined as `xmlns:setts="clr-namespace:DbCopier.Properties"`

My view:

```
<TextBox
    Text="{Binding Source={StaticResource odpSettings}, Path=Default.DbName}"
    Width="150" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:40:45.873

我知道了！

InnerException 非常令人困惑。这都是关于设置文件中的属性范围。我注意到它已更改为`Application`，因此它是只读的。我只是将其更改为`User`可写。如此简单却又如此令人讨厌的错误。

# android - ActionBar options

> ID：11081368
> 
> 赞同：0
> 
> 时间：2012-06-18T10:55:18.057
> 
> 标签：android

I have just managed to put actionbar tab menu into my application now i have 5 tabs which are mostly important in application, now i want to put "Options" icon in action bar where user will have access to options and few other forms. If someone can help me with any code examples as i tryed with developer.android.com but i didnt suceedd.

Here is example of what i am looking for:

![enter image description here](../Images/b592ca69c2d64d6b90f2f7069e58ab7e.png)

Tabs are already done now i want to implement this (3 dots last icon on the right) as options menu.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T15:04:31.343

使用 android:showAsAction="never" 将您的额外操作添加到菜单中：

```
<!-- Settings should always be in the overflow -->
<item android:id="@+id/action_settings"
    android:title="@string/action_settings"
    android:orderInCategory="100"
    android:showAsAction="never" /> 
```

但是，溢出按钮（带有三个点的图标）仅在您的设备没有硬件菜单按钮时才会出现。这里的“菜单”会带来额外的动作。在没有硬件按钮的设备上，将显示溢出按钮。

通过设置不同的 AVD，您可能会看到差异。

（来源：http: [//developer.android.com/guide/topics/ui/actionbar.html#ActionItems](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)）

# iphone - Turn off mic in iphone

> ID：11081371
> 
> 赞同：1
> 
> 时间：2012-06-18T10:55:21.783
> 
> 标签：iphone, ios, openears

I am using `openEars` to detect speech. It takes one second of silence to detect the end of command.

What I want is to disable the microphone for 1 second. Can anyone tell me that how to disable mic for 1 second?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T21:27:53.000

正如在[使用 UIImagePickerController 录制时如何使麦克风静音？](https://stackoverflow.com/questions/10795162/how-to-mute-mic-while-recording-using-uiimagepickercontroller)：

> 如果您希望您的应用程序出现在应用商店中，那么没有苹果批准的方法可以让整个 iPhone 静音。有某些库，但它们没有被批准。
> 
> [Apple 关于音频会话的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html)
> 
> 根据文档，您只能要求用户将手机静音，并且您可以响应某些音频更改，例如其他声音、电话、电子邮件声音，但您不能以编程方式静音。
> 
> 另请参阅有关[iPhone 编程的文档](http://www8.cs.umu.se/education/examina/Rapporter/BenjaminEriksson%28kand%29.pdf)请参阅第 3.3 部分的音频。（可以在 iOS 中访问和执行的事件）。

问候，

# c# - 如何在 Windows phone 中将光标更改为手？

> ID：11081372
> 
> 赞同：0
> 
> 时间：2012-06-18T10:55:34.403
> 
> 标签：c#, windows-phone-7, xaml, cursor

我通过使用 TextBlock... 来使用以下超链接文本。

```
<Button Grid.Row="2" Foreground="#FF057BC3" FontFamily="Segoe WP SemiLight">
     <TextBlock Width="400" Margin="-28 -1 0 0" >
          <Underline>Cursor should be Hand when hits me....</Underline>
     </TextBlock>
</Button> 
```

当鼠标悬停在文本块中时，有什么方法可以将光标更改为手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:29:52.263

WP7 是手机操作系统，所以它没有光标，就像 lukas 说的那样。但是，假设您使用的是 Silverlight，它可以完成（如果您的应用程序将在 Windows/浏览器中运行）。您可以更改光标，例如，我会将您指向[此站点](http://blogs.silverlight.net/blogs/msnow/archive/2008/08/14/tip-of-the-day-27-how-to-change-the-mouse-cursor.aspx)。

但我看到你正在制作一个带有下划线的文本块的按钮。[Hyperlink](http://msdn.microsoft.com/en-us/library/system.windows.documents.hyperlink%28v=vs.95%29.aspx)或[HyperlinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.windows.controls.hyperlinkbutton%28v=vs.95%29.aspx)会不会更好地满足您的需求？

就像是：

```
<HyperlinkButton Grid.Row="2" Foreground="#FF057BC3" FontFamily="Segoe WP SemiLight" click="HyperlinkButton_Click" Width="400" Margin="-28 -1 0 0" Content="text will be here...." /> 
```

# jquery - Jquery time formatting

> ID：11081373
> 
> 赞同：-1
> 
> 时间：2012-06-18T10:55:37.100
> 
> 标签：jquery, timer

I want to re-format the digital clock timer. When time is 3:15 (pm), jquery timmer show me 15:15pm and when 12:00 (am) it show me 24:00 (am). instead of 24 hours formatting can we set it to 12 hours formatting?

Example:

```
var maxnumhours = 11;
var maxnummins = 59;
var maxnumsecs = 60;
var maxmilisecs = 999;

$(document).ready(function() {
  updateClock();
  setInterval('updateClock()', 250 );
});

function hexifyWithZeroLead(tohex){
    var rtn = tohex.toString(16);
    return ( rtn.length == 1 ? "0" : "" ) + rtn;
}

function updateClock ( )
{
  var currentTime = new Date ( );
  var currentHours = currentTime.getHours();
  var currentMinutes = currentTime.getMinutes();
  var currentSeconds = currentTime.getSeconds();
  var currentMiliSeconds = currentTime.getMilliseconds();
  var rounded = currentSeconds + (currentMiliSeconds / maxmilisecs);

  rednum = (Math.round(255 * ((currentHours) / maxnumhours)));
  rednum100 = (Math.round(100 * ((currentHours) / maxnumhours)));
  greennum = (Math.round(255 * ((currentMinutes) / maxnummins)));
  greennum100 = (Math.round(100 * ((currentMinutes) / maxnummins)));
  bluenum = (Math.round(255 * ((rounded) / maxnumsecs)));
  bluenum100 = (Math.round(100 * ((rounded) / maxnumsecs)));

  redhex = hexifyWithZeroLead(rednum);
  greenhex = hexifyWithZeroLead(greennum);
  bluehex = hexifyWithZeroLead(bluenum);

  var hex = "#" + redhex + greenhex + bluehex;
  var fullredhex = "#"+redhex+"0000";
  var fullgreenhex = "#00"+greenhex+"00";
  var fullbluehex = "#0000"+bluehex;

  jQuery("#red_display").html(redhex);
  jQuery("#green_display").html(greenhex);
  jQuery("#blue_display").html(bluehex);

  leftpos = (rednum100 * 0.01 * 575) + 25;
  jQuery('#red_display').animate({left: leftpos}, 200);
  jQuery('#red_display').css('background-color',fullredhex);

  leftpos = (greennum100 * 0.01 * 575) + 25;
  jQuery('#green_display').animate({left: leftpos}, 200);
  jQuery('#green_display').css('background-color',fullgreenhex);

  leftpos = (bluenum100 * 0.01 * 575) + 25;
  jQuery('#blue_display').animate({left: leftpos}, 200);
  jQuery('#blue_display').css('background-color',fullbluehex);

  // Leading Zeros
  currentHours = ( currentHours < 10 ? "0" : "" ) + currentHours;
  currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;
  currentSeconds = ( currentSeconds < 10 ? "0" : "" ) + currentSeconds;
  jQuery("#clock").html("<span id='hours'>"+ currentHours + "</span>:<span id='minutes'>" + currentMinutes + "</span>:<span id='seconds'>" + currentSeconds + '</span>');
  jQuery("#hex").html(hex);
} 
```

*   [http://jsfiddle.net/GmxHh/1/](http://jsfiddle.net/GmxHh/1/)

Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:00:42.657

Something like this?

```
var suffix = 'am';
if(currentHours > 12) {
    currentHours -= 12;
    suffix = 'pm';
} 
```

Before the "Leading Zeros" section. Also, if you don't want leading zeros for hours, "3:15" rather than "03:15", just remove that line of code.

# jeditable - Autoscale text input with JEditable.js?

> ID：11081375
> 
> 赞同：2
> 
> 时间：2012-06-18T10:55:42.890
> 
> 标签：jeditable, autogrow

I've been looking for a script that combines the [autoGrowInput](https://stackoverflow.com/questions/931207/is-there-a-jquery-autogrow-plugin-for-text-fields) with the [JEditable](http://www.appelsiini.net/projects/jeditable) but found none.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T00:53:53.470

实际上我已经创建了一个插件来做到这一点。您可以查看[演示](http://static.jortech.com.ve/easyText/jQuery/demo/)和[文档](http://ajorquera.github.io/jQuery-EasyText/)。我试图让它非常直观。它具有 ajax 功能，使用 RESTful 哲学。如果您喜欢 autoGrowInput 上的动画效果，只需使用 transition 属性更改 css 文件即可将其添加到插件中非常容易。

如果我让人们喜欢它，我也许可以改进它并为其添加更多功能。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T03:20:17.620

使用通过 jEditable 的事件数据自动初始化的[https://github.com/MartinF/jQuery.Autosize.Input ：](https://github.com/MartinF/jQuery.Autosize.Input)

```
jQuery(element).editable(save_fn, { 
    data: function(value,settings} { 
        var target = event.target; 
        window.setTimeout(function(){ 
            jQuery(target).find('input').autosizeInput(); 
        });
        return value;
    }
}); 
```

值得注意的是，此事件（数据）在实际创建输入元素之前触发，因此使用了超时。在创建输入后，目前似乎没有可用的事件。

# unix - Using find to delete all files with a given name except the one with a given extension

> ID：11081379
> 
> 赞同：4
> 
> 时间：2012-06-18T10:55:49.733
> 
> 标签：unix, find, rm

I want to delete all files in a directory with a given name, except for one with a given extension. I.e. we have a directory with:

```
foo.txt foo.exe foo.jpg foo.png foo.something foo.somethingelse bar.jpg bar.exe 
```

I want to get rid of `foo.txt foo.jpg foo.png foo.something foo.somethingelse`

BUT crucially I don't want to get rid of `foo.exe`

Is there an easy one liner to do this?

Thank you

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T11:09:10.170

您可以在命令`!`内部使用`find`来排除事物，例如：

```
find . -maxdepth 1  -type f  -name "foo.*"  ! -name foo.exe  -exec rm '{}' \;
       -----------  -------  -------------  ---------------  ----------------
       in this dir   files    named foo.*   but not foo.exe  ...destroy them. 
```

那应该删除`foo.*`当前目录中匹配的文件，但不要`foo.exe`理会。

# android - how to create alertdialog outside of an application?

> ID：11081380
> 
> 赞同：0
> 
> 时间：2012-06-18T10:55:55.673
> 
> 标签：android, popup, android-alertdialog

I want to create an alertdialog outside of my application.

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle(Config_ConstantVariable.latest);
    builder.setMessage(title);
    builder.setIcon(R.drawable.push_logo);
    builder.setCancelable(false)
            .setPositiveButton(Config_ConstantVariable.alertbtnyes,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            Intent intent = new Intent(context,
                                    Main_ParticularNewsDetail.class);
                            Bundle bundle = new Bundle();
                            intent.putExtra("newsid", payload);
                            intent.putExtras(bundle);
                            context.startActivity(intent);
                        }
                    })
            .setNegativeButton(Config_ConstantVariable.alertbtnno,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                        }
                    });
    AlertDialog alert = builder.create();
    alert.show(); 
```

However, the `context` is not an activity and this class is `extends BroadcastReceiver`.

When I push notification, an error occured,

```
06-18 18:38:08.629: E/AndroidRuntime(2402): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application 
```

I saw WhatsApp that can pop out the dialog outside the application in samsung galaxy tab.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T11:11:34.707

我在我的应用程序中使用了相同的功能，其中我使用一个活动作为弹出消息，如下所示

```
 @Override
public void onReceive(Context context, Intent intent) {

    try {
         Bundle bundle = intent.getExtras();
         String message = bundle.getString("alarm_message");

         Intent newIntent = new Intent(context, PopupActivity.class);
         newIntent.putExtra("alarm_message", message);
         newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
         context.startActivity(newIntent);
        } catch (Exception e) { 
         e.printStackTrace();

        }
} 
```

在 Popup Activity 中设计类似对话框的 UI 并将其添加到 Android Manifest.xml

```
 <activity android:name=".PopupActivity"
             android:theme="@android:style/Theme.Dialog"
             android:label="@string/label"
             ></activity> 
```

您可以根据您的规范自定义 UI。它对我来说非常适合。我希望它有所帮助。

# c# - Templatizing a project in Visual Studio

> ID：11081381
> 
> 赞同：4
> 
> 时间：2012-06-18T10:56:05.973
> 
> 标签：c#, visual-studio-2010, visual-studio, vsix

I have created a windows mobile application in Visual Studio. I want to templatize this project so that one can open this as a template as opposed to a project.

Is this possible in Visual Studio? I read that there is something called as "VSX (Visual Studio Extension)" which may achieve this. I have Visual Studio Ultimate installed in my system and was trying to install the [VS2010](http://www.microsoft.com/en-us/download/details.aspx?id=2680) SDK. But its not getting installed telling that i dont have MS Visual Studio 2010 which I apparently do.

Am I going in the right direction? If not what would be the correct way to go ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:06:08.453

是的，可能是这样的：**文件>导出模板**，然后单击下一步:)它也会保存您的代码

![在 vs 2010 中导出模板](../Images/cf46039325b048a1f6d837a29b33a1fa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:23:05.320

这就是我一直在寻找的东西，它也非常方便。

[导出模板向导](http://visualstudiogallery.msdn.microsoft.com/57320b20-34a2-42e4-b97e-e615c71aca24)

这会使用向导将项目直接导出为 VSIX 扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T05:59:16.103

我建议在`TemplateBuilder`VSIX 项目或 Visual Studio 包中使用 NuGet 包。我制作了一个 6 分钟的视频，向您展示如何：创建一个包含项目模板的 VSIX，然后编辑该模板。[在https://www.youtube.com/watch?v=z33jOo75CH4](https://www.youtube.com/watch?v=z33jOo75CH4)查看。

[仅供参考 TemplateBuilder 在https://github.com/ligershark/template-builder](https://github.com/ligershark/template-builder)是开源的。如果您听说过[SideWaffle](http://sidewaffle.com)，它依赖于 TemplateBuilder。

# ios - Bump API 3.0 Crash in device with Xcode 4.1

> ID：11081382
> 
> 赞同：1
> 
> 时间：2012-06-18T10:56:07.500
> 
> 标签：ios, bump

I am using Xcode 4.1 with iOS SDK 4.3

When executing the line below, the app crashes in device but not in Simulator.

```
 [BumpClient configureWithAPIKey:@"MYAPIKEY" andUserID:[[UIDevice currentDevice] name]]; 
```

There is no crash log, but the execution stops at above line saying "Thread 1:Program received signal: "SIGSYS"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:03:43.800

正如我所看到的，您正在使用带有 BumpClient 对象的配置 API 密钥。实际上需要创建 BumpAPI 的对象，并且键将像这样设置

```
 api = [BumpAPI sharedInstance];
    [api configAPIKey:@"69d6db94740a4e9e8e9ba98ey0e64c74"];
    [api configUIDelegate:self];
    [api configDelegate:self];
    [api requestSession]; 
```

这里 api 是 BumpAPI 的对象，并在请求该会话之后配置 API 密钥。

```
 [[BumpAPI sharedInstance] simulateBump]; 
```

模拟凹凸在设备上启动凹凸动作。所以只需要将凹凸委托附加到自身而不是设备。

# ios - Writing with digital pen on ipad/iphone by keeping hand on screen

> ID：11081383
> 
> 赞同：2
> 
> 时间：2012-06-18T10:56:15.213
> 
> 标签：ios, ios5, uikit, core-graphics, quartz-2d

I am working on a drawing app, with pen touch, on iphone and ipad. Till now , I have implemented the basic drawing and tested with digital pen and it work fine, but I have one issue, while drawing on iphone/ipad, if my fingers touch the screen before I draw with pen , the pen wont work, So what I want to achieve is that, I want to able to write with pen, even if my fingers are touching the ipad screen.

Regards Ranjit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:31:33.357

没有办法区分手指和触控笔，因为触控笔应该模拟手指的触摸。您要么必须使所有触摸都绘制（包括屏幕上的手），要么使其只有触摸屏幕的第一个“手指”才能绘制（这意味着您必须先将触控笔放在屏幕上，然后再将手放在屏幕上）可以触摸）。

@iLive 提到您应该实现的那些委托方法是正确的，但我假设您已经在使用这些方法。

## 更新：

跟踪特定的触摸就像在 touchesBegan 期间将实例的地址添加到数组中一样简单。将它们附加到 CFMutableArrayRef。然后，在 touchesMoved 方法中，可以简单的按顺序获取到触摸的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:21:34.867

最有可能的答案是您可以收到的**触摸次数。**
显然，如果不启用**多点触控**，您将被卡在一次只接收一个点上！
因此，如果您的手先触摸屏幕，则不会接收到数字笔的其他触摸。

首先从启用该`multi-touch`功能开始。
这些是您必须实施的方法：

> *   -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
> *   -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
> *   -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
> *   -(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event

查看 Apple 的链接： http: [//developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html)了解更多信息！

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:48:59.477

附加 您可以从下边缘（用户可配置高度）至少制作一层（不接受触摸），以便至少您的手掌可以放在 ipad 屏幕表面上，从而降低不必要触摸的可能性并进行绘图更稳定。

# javascript - JayData 的数据库事件

> ID：11081384
> 
> 赞同：0
> 
> 时间：2012-06-18T10:56:17.950
> 
> 标签：javascript, events, knockout.js, jaydata

当 EntitySet 以任何方式更改时，有没有办法注册事件或接收任何其他类型的通知？（对象更新、插入、删除等）

我希望 Knockout 监听这些更改，并能够从与 UI 无关的外部脚本更新 EntitySet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:37:36.620

JayData Entity Notifications API 将于 8 月随 JayData 1.2 一起发布。我们还将发布您可以在其上构建的 AJAX/HTML5 通知服务，以及通过 WCF 5.0 数据服务实现通知的工具。（像 webSql 和 IndexedDB 这样的本地服务将在 7 月底的 1.1.5 版本中获得通知支持）顺便说一句：您使用的是什么提供商？

直到当前版本 (1.1) EntitySets 仅代表用于查询数据的“静态端口”。查询结果是静态数组，与数据上下文完全脱节。在 JayData 1.0.4 中，我们发布了对 Knockoutjs observableArrays 作为有效查询结果持有者的支持，并且在 1.0.5 中，我们获得了带有 Knockoutjs 可观察参数的 JSLQ 动态查询。JayData 1.1 主要是关于 OData V3 的新功能，JayData 1.2 将全部关于多用户访问和数据实时协作，因此在中心通知:)

# xml - PLSQL：从“分层”表创建 XML

> ID：11081390
> 
> 赞同：1
> 
> 时间：2012-06-18T10:56:30.847
> 
> 标签：xml, oracle, plsql, hierarchical

我有一张这样的桌子：

```
id | id_parent | tag_name
0  |           | TRANSACTION
1  |         0 | NAME
2  |         0 | ADDRESS
3  |         2 | CITY 
```

等等。

我想用它创建一个 xml 结构，所以我会有这样的东西：

```
<TRANSACTION>
  <NAME />
  <ADDRESS>
    <CITY />
  </ADDRESS>
</TRANSACTION> 
```

我发现了一些有趣的功能，但我没有找到我需要的...

PS：我不需要“真正的” XML，结果结构甚至可以是 varchar2（但它可能会变得非常大）或 clob。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:25:16.157

试试这个：

```
select DBMS_XMLGEN.getXML(DBMS_XMLGEN.newcontextfromhierarchy('SELECT level,
XMLElement(evalname(TAG_NAME))
from my_table t
START WITH id_parent is null
CONNECT BY PRIOR id = id_parent'))
  FROM dual 
```

`my_table`是表名

# java - 如何使用 Geotools 生成带有样式的 KML 文件？

> ID：11081397
> 
> 赞同：2
> 
> 时间：2012-06-18T10:57:05.030
> 
> 标签：java, styles, kml, geoserver, geotools

我围绕这个问题进行了很多搜索，但没有找到任何答案。

在 Java 程序中，我有一个“SimpleFeatureCollection”（geotools）和一个“StyleLayerDescriptor”（geotools），其中包含我的“SimpleFeatureCollection”样式，我需要使用这种样式生成一个 KML 文件。

实际上，我使用带有以下代码的“SimpleFeatureCollection”对象成功生成了一个 KML 文件（没有任何样式）：

```
static public boolean collectionToKMLFile(File iKMLFile, SimpleFeatureCollection iPolygonsCollection, StyledLayerDescriptor iStyle) throws IOException
{
    Encoder lEncoder = new Encoder(new KMLConfiguration());
    FileOutputStream lFileOutputStream = new FileOutputStream(iKMLFile);
    lEncoder.setIndenting(true);
    lEncoder.encode(iPolygonsCollection, KML.kml, lFileOutputStream);
    lFileOutputStream.close();
    return false;
} 
```

我没有找到任何关于如何添加样式的信息，我认为这不是不可能的，你有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:07:28.807

我最终决定编写一个程序来生成我自己的*Styled KML File*。

事实上，这并不难：

1.  编写 KML 标头
2.  循环你的几何图形并编写它们
3.  写 Kml 页脚

可以在此处找到与 KML 2.2 版中定义的*KML*元素相关的所有信息：

*   [**“KML 参考”**](https://developers.google.com/kml/documentation/kmlreference)

享受。

# iphone - 通过单击按钮将 UITextField 中的对象添加到 NSMutableArray

> ID：11081399
> 
> 赞同：0
> 
> 时间：2012-06-18T10:57:07.477
> 
> 标签：iphone, objective-c, ipad, ios5, xcode4.2

我需要通过单击按钮将命名的文本字段的内容添加`productName`到命名。`NSMutableArray``cartArray`

在按钮动作事件中我写道：

```
NSString *productName = [NSString stringWithFormat:@"%@", productName.text];
cartArray = [[NSMutableArray alloc] init];
[cartArray addObject:productName];

NSLog(@"Cart Array==%@", cartArray); 
```

但是每次用户单击按钮时，我都需要添加文本字段的内容。在控制台中，数组中的先前内容未显示，即不是每次都添加。

建议我在`viewDidLoad`或其他任何地方需要做的任何事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:01:40.253

每次按下按钮时，您都会重新创建 cartArray，从而覆盖上一个条目。将数组的初始化移动到 viewDidLoad 或您的 init 方法。

另外productName.text 已经是一个字符串，不需要做stringWithFormat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:09:02.117

试试这个代码

```
- (void)viewDidLoad:(BOOL)animated {
        [super viewDidLoad:animated];
        cartArray = [[NSMutableArray alloc]init];
}

- (IBAction)clicked:(id)sender {
        [cartArray addObject:productName.text];
        NSLog(@"Cart Array==%@",cartArray);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:01:10.887

因为每次它都在初始化您的数组：

```
cartArray = [[NSMutableArray alloc] init]; 
```

您不应该每次都对其进行初始化，将其初始化一次，`viewDidLoad`然后在按钮操作中添加对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:02:03.600

只需在中声明数组`viewdidload`

```
cartArray = [[NSMutableArray alloc] init]; 
```

并从动作事件调用函数中删除数组。

# web - 现在使用 仍然有效还是没有用？

> ID：11081403
> 
> 赞同：0
> 
> 时间：2012-06-18T10:57:17.473
> 
> 标签：web, seo, blogs, meta-tags

许多搜索引擎没有使用***元关键字***，谷歌通过最近的许多更新建议不要使用***元刷新***等。

在各个国家/地区使用`<meta name="distribution" content="global">`或逐页使用，仍然有效还是现在没有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T15:27:26.380

“分发”不是公认的元数据名称。见[http://wiki.whatwg.org/wiki/MetaExtensions](http://wiki.whatwg.org/wiki/MetaExtensions)

我会说它没有用，除非它出于某种原因在内部对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:45:56.430

元标签分布定义了您的网页的分布水平或程度，以及它应该如何根据万维网上的分布方法进行分类。分发标签目前只支持三种分发形式：

*   全球 - 表示您的网页适用于所有人
*   本地 - 用于本地分发您的文档
*   IU - 内部使用，不用于公开分发

就个人而言，我从未使用过它。在谷歌网站管理员工具中，我只是设置了目标国家，就是这样。我有一个或一组不打算公开分发的页面，我只是确保对它们进行密码保护。

我会假设如果谷歌没有找到它，它会表现得好像内容分发被设置为全球一样，但老实说，这只是一个假设。

# php - Make a script only log once a minute but runs every second

> ID：11081404
> 
> 赞同：0
> 
> 时间：2012-06-18T10:57:17.760
> 
> 标签：php, timer, daemon

I have a php script that checks the database every second(ish as not 100% important its on second) and writes the output to json files for a captioning system. This has a success log file

I want to log the quite times too.

I was logging to the last line with "." every time it ran.

```
2012-06-18 10:45:51 UTC | ......................... 
```

This can lead to very long line which might break future log checking system.

So I have change this for a line that runs every 5 minutes

```
// 2012-06-18 10:45:51 UTC | wait.
if ((int) date('i') % 5 == 0) 
{
log ( $date . ' | wait. ' );
} 
```

but this logs every second/iteration of every 5th minute. I could add seconds but it does not always run every 01 second.

Is there a way of logging once in n time?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:10:34.270

您可以让您的脚本在上次运行时写入辅助临时文件。然后在下一次执行时，它可以加载该值，计算与当前时间和存储值的差异，如果它大于 N，则将您的条目记录到日志文件中。

# git - git svn 保留已删除的分支

> ID：11081407
> 
> 赞同：1
> 
> 时间：2012-06-18T10:57:25.933
> 
> 标签：git, svn, git-svn

我注意到 svn 中已删除的分支并未保留在 git 中。我知道 git 和 svn 中的分支在处理方式上大不相同。然而，svn to git clone 丢失一些信息似乎很危险。

是否可以在 svn HEAD 修订版中保留 git 中不存在的 svn 分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:08:26.187

删除的 Subversion 分支应该保留在 Git 上；如果您看到它们消失了，我希望这是您使用 git-svn 的一些错误。

你偶尔会遇到奇怪的行为，有人删除了 Subversion 存储库中的一个分支，然后重新创建它，但这只会导致名称奇怪的 Git 分支，例如`remotes/branch_name@2312`，因此 Git 可以在 Subversion 中删除分支之前跟踪它新的分支。

也就是说，将 Subversion 存储库克隆到 Git 确实会丢失信息。Git-svn 是一个使用 Git 和 Subversion 的工具，它没有提供 Git 和 Subversion 之间完美的一对一映射。特别是，git-svn 维护的唯一 Subversion 属性是 svn:executable，它会处理一些看到 svn:merge-info 更改的简单情况。

# java - Eclipse Web-App Deployment with Tomcat: Providing multiple projects' dependencies?

> ID：11081411
> 
> 赞同：7
> 
> 时间：2012-06-18T10:57:43.557
> 
> 标签：java, eclipse, tomcat

I have a problem providing some third party librarys (JAR-files) I am using when deploying my dynamic web application with Tomcat 6 and Eclipse.

*Please note that I -do know- how to do this in a setup, where the web application project -directly- depends on those JARs.*

However, in my setup, I have two Eclipse projects:

*   **core** is a class library and depends on, lets say, `a.jar`.
*   **web** is the web application and depends on **core**.

In the project settings of **web**, in the *Deployment Assembly* category, I have added **core**, so Eclipse (or Tomcat - I'm not quite sure who the responsible actor here is) is putting `core.jar` into the `libs` directory of my web application.

The problem is: When I try out the web application, a `NoClassDefFoundError` is thrown when **core** accesses classes from `a.jar`. What am I supposed to do about this? I don't think that putting `a.jar` into the *Deployment Assembly* settings page of my web application is the right solution, since it should be of no relevance to the **web** project, what the **core** project depends on.

Basically, I am looking for a way to configure Eclipse (Tomcat?) to 'embed' the dependencies of **core** into `core.jar`. The problem about this is, that `core.jar` is generated automatically, when I deploy my **web** project.

Help is very appreciated. Thanks in advance!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T22:18:20.470

好吧，与此同时，我自己找到了答案。

[对于那些将来阅读本文的人，我将使用我在原始消息](https://stackoverflow.com/q/11081411/1444073)中介绍的语义逐步解释：

首先，打开**核心**项目的属性页面并导航到“Java Build Path”设置的“Libraries”选项卡：

![在此处输入图像描述](../Images/9e9e84fcb35ffcb57a6995a008f0aadd.png)

确保通过“添加 JAR ...”添加您的类库`a.jar`，您的**核心**项目依赖于此。然后，转到“订购和导出”选项卡并激活刚刚添加`a.jar`的导出。

![在此处输入图像描述](../Images/992cd6de004f255b385b11876d95a694.png)

然后转到“部署程序集”设置并在`a.jar`此处添加，首先单击“添加...”，然后单击“Java 构建路径条目”，最后选择`a.jar`. 确保输入“../”作为部署路径`a.jar`：

![在此处输入图像描述](../Images/7b96285c30c569ee9b16651006016de3.png)

现在你已经完成了你的**核心**项目。**现在为您的Web**项目打开“Java 构建路径”设置的“项目”页面，并通过单击“添加...”添加您的**核心项目：**

![在此处输入图像描述](../Images/43e36676c9f3925d2bcec7db62f35d3b.png)

最后，导航到“部署程序集”设置页面，按“添加...”，然后选择“项目”并在下一个屏幕上选择您的**核心项目：**

![在此处输入图像描述](../Images/b163a41bfc65409e871bba5b479197fe.png)

你完成了。无需将**核心**依赖项添加到**Web**项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:24:15.873

我建议使用[Maven](http://maven.apache.org/)，它会自动`jar`为您编译文件并且也`Eclipse`可以`Maven`很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:11:16.393

据我所知，日食不适合你。项目依赖项用于编译时。跨项目的运行时依赖项应由您处理。您可以使用一种技巧来创建用户库。转到首选项 -> Java -> 构建路径 -> 用户库。创建一个新的用户库。添加您的“核心”项目所依赖的所有 jar。将其作为依赖项添加到“核心”和“网络”项目。为此，请右键单击项目 -> 构建路径 -> 配置构建路径 -> 库选项卡 -> 添加库...

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-11T12:25:31.967

如果您有 Gradle-Project，请确保您的子项目的 build.gradle 中有“eclipse-wtp”插件。

# android - 通知未在android中启动活动

> ID：11081414
> 
> 赞同：3
> 
> 时间：2012-06-18T10:58:08.387
> 
> 标签：android, service, android-activity, notifications

我正在开发一个小应用程序，我希望后台服务发送通知，当用户单击通知时，它必须启动适当的活动。我在此处发布通知的代码，我的问题是通知显示在状态栏上，但是当我单击它时，它不会启动活动。有人可以建议我哪里出错了。请帮忙。

```
NotificationManager notificationManager = (NotificationManager) 
        getSystemService(NOTIFICATION_SERVICE);
Notification notification = new Notification(R.drawable.ic_launcher,
        "A New Message!", System.currentTimeMillis());
Intent notificationIntent = new Intent(NotificationService.this,
        com.jeris.android.MetroActivity.class);
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pendingIntent = PendingIntent
        .getService(NotificationService.this, 0, notificationIntent,
                PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT);
notification.setLatestEventInfo(NotificationService.this, "Bullion",
        "Rates for "+ parsedDate+"has not been updated. Go to app to check rates",
        pendingIntent);
notificationManager.notify(11, notification); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:03:46.273

代替 `PendingIntent.getService(NotificationService.this, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT);`

和 `PendingIntent.getActivity(NotificationService.this, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_ONE_SHOT);`

注意**getService**被替换为**getActivity**。

# mysql - I have written mysql stored function for calculating business days but when i run this code it showing error

> ID：11081416
> 
> 赞同：0
> 
> 时间：2012-06-18T10:58:20.013
> 
> 标签：mysql, function

```
 DELIMITER //
CREATE  FUNCTION BusinessDays(d1 DATE,d2 DATE)
RETURNS INT
READS SQL DATA DETERMINISTIC
BEGIN
   DECLARE out_date DATE;
   DECLARE fromdate DATE;
   DECLARE todtae DATE;
   DECLARE minus INT;
   DECLARE result INT;
   SET minus = 0;
   SET result = DATEDIFF(todate , fromdate);
   WHILE (fromdate <= todate) DO
     IF (fromdate = 1 OR fromdate = 7)  THEN
       SET minus = (minus)+1;
     END IF;
     SET fromdate = fromdate + INTERVAL 1 DAY;
   END WHILE;
   RETURN result - minus;
END;
END //
DELIMITER ; 
```

> Error Code : 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END' at line 20

# c - 在普通的旧 C 中将字节数组转换为十六进制字符串

> ID：11081422
> 
> 赞同：1
> 
> 时间：2012-06-18T10:58:51.200
> 
> 标签：c

我正在研究一种将字节数组转换为十六进制字符串的方法，这是我编写的代码：

```
unsigned char buffer[] = {0xAA,0xBB,0x01,0xAB,0x11,0x12,0x13,0x22,0x11,0x14};

int _tmain(int argc, _TCHAR* argv[])
{

                char * asta = (char*)malloc(16);
                memset(asta,0,16);
                int k;
                for (k = 0; k < 16 ; k++)
                {
                    sprintf(&asta[k],"%X",buffer[4 + k]);
                }

                printf("%s",asta);

    _getch();
} 
```

只有第一个字节被正确转换，其余的不是。我该如何修复代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:15:38.930

您的数组中有 10 个字节，因此您的缓冲区至少需要 21 个字节（每个字节需要 2 个十六进制数字 + 1 个用于空终止符）。

我不明白你在这里做什么：

```
sprintf(&asta[k],"%X",buffer[4 + k]); 
```

为什么从缓冲区中的第五个字节开始？此外，缓冲区中的每个字节在字符串中占用两个字节，因此您需要打印到`asta[2 * k]`.

把它放在一起你会得到类似的东西：

```
char * asta = (char*)calloc(2 * sizeof buffer + 1, sizeof(char)); // calloc automatically zeros asta
int k;
for (k = 0; k < sizeof buffer ; k++)
{
    sprintf(&asta[2 * k],"%02X", (unsigned int)buffer[k]); // Not sure if the cast is needed
}
printf("%s",asta); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:09:56.240

您必须记住，当您将其打印为字符串时，两位十六进制数字仍然是两位数，即它将占用两个字符。

在循环中，第二次迭代将覆盖字符串的第二个字符，第三次迭代将覆盖第三个字符，依此类推。

此外，由于每个两位数将使用两个字符，因此您必须为 32 个字符分配内存，*再加上*一个用于字符串终止`'\0'`字符。

正如评论中所指出的，您正在访问数组之外​​的数据。

# android - A basic Android Service that uses GPS is causing Google Nexus One to reboot

> ID：11081424
> 
> 赞同：1
> 
> 时间：2012-06-18T10:58:53.663
> 
> 标签：android, service, gps, reboot, nexus-one

I have created a very basic program to track GPS coordinates. The program has a button that turns a service on and off. The service simple installs a LocationListener. On each onLocationChanged the location coordinates are dumped on sd card.

The application works fine. But when I push the sleep button, the application logs data for sometime and then causes Google Nexus One to reboot.

Below I am posting the MINIMUM code that is required to reproduce this bug. I have striped extra code to avoid confusion.

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.phonetracker"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".PhoneTrackerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:name=".MyGPSService" android:process=":my_gps_service" />
    </application>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
</manifest> 
```

layout/main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
     android:id="@+id/on_button_click" 
     android:layout_height="wrap_content"
     android:layout_width="wrap_content"
     android:text="@string/on_button_click"
     android:onClick="onButtonClick" />

</LinearLayout> 
```

values/strings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="hello">Hello World, PhoneTrackerActivity!</string>
    <string name="app_name">PhoneTracker</string>
    <string name="on_button_click">Start Service</string>

</resources> 
```

PhoneTrackerActivity.java

```
package com.phonetracker;

import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.RunningServiceInfo;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class PhoneTrackerActivity extends Activity
{
    private static final String TAG = "MyGPSServiceDemoActivity";
    private Intent intent           = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button = (Button)findViewById(R.id.on_button_click);

        if (isMyServiceRunning())
        {
            button.setText("Stop Service");
        }
        else
        {
            button.setText("Start Service");
        }

        if (intent == null)
            intent = new Intent(this, MyGPSService.class);
    }

    public void onButtonClick(View view)
    {
        Log.e(TAG, "onButtonClick");

        Button button = (Button)view;

        if (isMyServiceRunning())
        {
            stopService(intent);
            button.setText("Start Service");
        }
        else
        {
            startService(intent);
            button.setText("Stop Service");
        }
    }

    private boolean isMyServiceRunning()
    {
        Log.e(TAG, "isMyServiceRunning");

        ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE))
        {
            if ("com.gpsservicedemo.MyGPSService".equals(service.service.getClassName()))
            {
                return true;
            }
        }
        return false;
    }
} 
```

MyGPSService.java

```
package com.phonetracker;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.LocationManager;
import android.os.IBinder;
import android.util.Log;

public class MyGPSService extends Service
{
    private static final String TAG                     = "Hx2MyGPSService";
    private LocationManager locationManager             = null;
    private GPSLocationListener gpsLocationListener     = null;

    @Override
    public IBinder onBind(Intent arg0)
    {
        Log.e(TAG, "onBind");

        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        Log.e(TAG, "onStartCommand");

        super.onStartCommand(intent, flags, startId);

        return START_STICKY;
    }

    @Override
    public void onCreate()
    {
        Log.e(TAG, "onCreate");

        locationManager     = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        gpsLocationListener = new GPSLocationListener();
        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
        {
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, gpsLocationListener);
        }
    }

    @Override
    public void onDestroy()
    {
        Log.e(TAG, "onDestroy");

        super.onDestroy();

        if (locationManager != null)
        {
            try
            {
                locationManager.removeUpdates(gpsLocationListener);
            }
            catch (Exception ex)
            {
                Log.e(TAG, "fail to remove location listners, ignore", ex);
            }
        }

        gpsLocationListener.closeOperations();
    }
} 
```

GPSLocationListener.java

```
package com.phonetracker;

import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.util.Log;

public class GPSLocationListener implements LocationListener
{
    private static final String TAG = "Hx2GPSLocationListener";

    public GPSLocationListener ()
    {
        Log.e(TAG, "GPSLocationListener");
    }

    @Override
    public void onLocationChanged(Location location)
    {
        Log.e(TAG, "onLocationChanged");
    }

    @Override
    public void onProviderDisabled(String provider)
    {
        Log.e(TAG, "onProviderDisabled");
    }

    @Override
    public void onProviderEnabled(String provider)
    {
        Log.e(TAG, "onProviderEnabled");
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        Log.e(TAG, "onStatusChanged");
    }

    public void closeOperations()
    {
        Log.e(TAG, "closeOperations");
    }
} 
```

Please see if I am missing out something.

# google-maps - google.maps.geometry 有时未正确加载

> ID：11081428
> 
> 赞同：1
> 
> 时间：2012-06-18T10:59:05.203
> 
> 标签：google-maps, encoding, geometry

我正在使用[google 编码库](https://developers.google.com/maps/documentation/javascript/reference#encoding)对路径点数组进行编码和解码，如下所示：

编码：

```
var encodedPath = google.maps.geometry.encoding.encodePath(path); 
```

解码：

```
var decodedPath = google.maps.geometry.encoding.decodePath(encodedPath); 
```

但是我发现编码库并不是每次都一致地加载。有时这些库只加载到地图，如下所示：

```
showRouteFor(): google = [object Object]
showRouteFor(): google.maps = [object Object]
showRouteFor(): google.maps.geometry = undefined 
```

使用下面的 JS 代码：

```
console.log("showRouteFor(): google = " + google);
if(google != null) {
    console.log("showRouteFor(): google.maps = " + google.maps);
    if(google.maps != null) {
        console.log("showRouteFor(): google.maps.geometry = " + JSON.stringify(google.maps.geometry));
        if(google.maps.geometry != null) {
            console.log("showRouteFor(): google.maps.geometry.encoding = " + JSON.stringify(google.maps.geometry.encoding));
        }
    }
} 
```

其他时候库加载正常，因此我可以使用它来解码路径。

可能是什么原因？感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T14:09:22.120

[确保通过URL](https://developers.google.com/maps/documentation/javascript/libraries)加载库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-22T21:17:57.650

`google.maps.geometry`是[几何](https://developers.google.com/maps/documentation/javascript/geometry)库的一部分。如果您在代码中使用它，则应在加载 Google Maps JavaScript API 时[将其指定为库](https://developers.google.com/maps/documentation/javascript/libraries)，例如：

> <script src="https://maps.googleapis.com/maps/api/js?libraries=places, **geometry** &key= *apikey* " async defer></script>

令人困惑的部分是 Google Maps JavaScript API 的其他部分在内部使用几何库。即使您没有指定库，这也会导致它仍然为您工作 - 但前提是您碰巧使用了一些其他功能，例如使用几何的 DirectionsRenderer。

# c# - 检查 DataGrid 中的 CheckBox 应检查 RowDetails 中的所有复选框

> ID：11081433
> 
> 赞同：0
> 
> 时间：2012-06-18T10:59:27.367
> 
> 标签：c#, wpf, datagrid

我有一个 DataGrid Shipments and Products。始终会显示发货，并且每个发货的产品都显示在 RowDetails 中，当我双击一行时，它会变得可见。

在 DataGrid 中，我使用了一个自定义复选框列：

```
<DataGridTemplateColumn>
   <DataGridTemplateColumn.Header>
       Copy
   </DataGridTemplateColumn.Header>
   <DataGridTemplateColumn.CellTemplate>
       <DataTemplate>
           <CheckBox IsChecked="{Binding Path=DoCopy, Mode=TwoWay, 
             UpdateSourceTrigger=PropertyChanged}"
       </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

我`<DataGrid.RowDetailsTemplate>`的有相同的专栏。我正在寻找的是在选中“主要”复选框时检查详细信息视图中的所有项目。

我有一个 Shipment 类和一个 Product 类。这两个类都有 DoCopy 属性。运输：

```
Run through all products and set DoCopy = true 
```

**问题：**

当我单击 DataGrid 中的复选框时，会选中所有产品的复选框。但仅当未显示 RowDetails 时。如果显示 RowDetails 并且我单击“主”复选框，它会被选中，但细节复选框不会。

此外，如果我之前打开和关闭了行详细信息，然后选中“主”复选框，也会发生同样的情况。产品的复选框保持未选中状态。

货件有一个`List<Product>`包含该货件的所有产品。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:44:55.540

以下代码适用于我。我只是想在某个事件上选中数据网格的所有复选框。以下代码只是检查了数据网格中的所有复选框。在我的情况下，第 0 列是一个复选框列

```
private void SelectAll()
    {
        for (int i = 0; i < dgVehicle.Items.Count; i++)
        {
            DataGridRow row = (DataGridRow)dgVehicle.ItemContainerGenerator.ContainerFromIndex(i);

            if (row != null)
            {
                CheckBox chk = dgVehicle.Columns[0].GetCellContent(row) as CheckBox;
                chk.IsChecked = true;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:04:35.717

thakrage 是处理此问题的最简单方法，对每个“复制”复选框行使用单击事件，在这种情况下，您可以设置 Docopy=true 或您喜欢做的任何事情...

然后在数据网格之外定义一个复选框，然后设置边距以将复选框与数据标题完全相同，并冒泡一个单击事件以检查所有行。

请参阅下面的示例代码：

```
<CheckBox Name="chkbox_chkall" Click="chkbox_chkall_Click" Content="Check all" BorderBrush="#FF828282" Foreground="#FF5B585A"/> 
```

和

```
<DataGridTemplateColumn.CellTemplate>
   <DataTemplate>
       <CheckBox IsChecked="{Binding Path=DoCopy, Mode=TwoWay, 
         UpdateSourceTrigger=PropertyChanged}" Click="chkBoxRow_Click"
   </DataTemplate> 
```

在代码隐藏中：

```
 private void chkbox_chkall_Click(object sender, RoutedEventArgs e)
    {
        CheckBox chkbox_chkall = sender as CheckBox;
        foreach (OnlineActivatedProducts rowItem in (grdProducts.ItemsSource))
        {
            CheckBox chk = grdProducts.Columns[6].GetCellContent(rowItem) as CheckBox;
            if (chkbox_chkall.IsChecked == true)
            {
                chk.IsChecked = true;
            }
            else
            {
                chk.IsChecked = false;
            }
            chkBoxRow_Click(chk, e); // which bubbles each rows checked / unchecked event
        }
    } 

    private void chkBoxRow_Click(object sender, RoutedEventArgs e)
    {
        if (chkBoxContent.IsChecked.Value)
        {
            //if checked do something here 
        }
        else if (!chkBoxContent.IsChecked.Value)
        {
            //if unchecked do something here
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T07:17:38.060

我明白了，伙计们。我似乎忘了实施`INotifyPropertyChanged`. 现在一切正常。谢谢 ：-）

# android - android give an error in create mediaplayer?

> ID：11081437
> 
> 赞同：1
> 
> 时间：2012-06-18T11:00:03.163
> 
> 标签：android, mobile

error :
Couldn't open file on client side, trying server side Unable to to create media player

```
protected void onListItemClick(ListView l, View v, int position, long id) {

        //get selected items
        String selectedValue = (String) getListAdapter().getItem(position);

        try {

            MediaPlayer objMediaPlayer = new MediaPlayer();
            objMediaPlayer = new MediaPlayer();
            objMediaPlayer.setDataSource("http://192.168.1.3:3000/songs/WakaWaka.mp3");
            objMediaPlayer.prepare();
            objMediaPlayer.start();

        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:28:03.513

尝试这个：

私人媒体播放器 objMediaPlayer = 新媒体播放器（）；

objMediaPlayer = new MediaPlayer();

```
 try {
        objMediaPlayer.setDataSource(path);

        objMediaPlayer.prepare();

        objMediaPlayer.start();

    } catch (IllegalArgumentException e) {

        e.printStackTrace();
    } catch (IllegalStateException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:03:34.180

检查 Android 媒体播放器[状态图](http://developer.android.com/images/mediaplayer_state_diagram.gif)。

您必须在调用 start() 之前调用 reset() e prepare()。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T19:16:55.997

这可能对某些人有所帮助.. 为了从在线流式传输视频，您必须添加到“AndroidManifest.xml”

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:45:48.973

我解决了你的问题。但无法得到太多。可以肯定的一件事是，您在此处指定的网址不存在。所以我利用了我自己的并做了一个样本。一探究竟，

```
 mediaPlayer mp=new MediaPlayer();
        try {

    mp.setDataSource("http://182.71.230.252/developers/blind_willie.mp3");
                mp.prepare();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            mp.start(); 
```

# jquery - 组合框默认选择最后一个选项

> ID：11081444
> 
> 赞同：16
> 
> 时间：2012-06-18T11:00:40.420
> 
> 标签：jquery, html

我想要一个组合框默认选择最后一个选项（使用jquery）：

```
<select>
    <option>item1</option>
    <option>item2</option>
    <option>item3</option>
    <option>item4</option>
    <option>item5</option>
</select> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-18T11:02:10.957

做这样的事情：

```
$(function() {
    $("select option:last").attr("selected", "selected");
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-07T15:57:52.747

一个普通的 JavaScript 解决方案：

```
select.selectedIndex = select.options.length-1; 
```

[**演示**](http://jsfiddle.net/scA9Z/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T11:02:50.580

```
<select>
    <option>item1</option>
    <option>item2</option>
    <option>item3</option>
    <option>item4</option>
    <option selected="selected">item5</option>
</select> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-12T14:17:51.720

使用“prop”而不是“attr”，当然取决于您使用的 jQuery 版本。

$("select option:last").prop("selected", "selected");

jQuery 道具： [http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

关于何时使用 prop 或 attr 的更多讨论： [.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-26T21:14:51.497

只需使用 vanilla Javascript，您就可以结合**<select> dom 对象的****.selectedIndex**和**.length**属性来实现这一点：

 **```
document.querySelector("#mySelect").selectedIndex = document.querySelector("#mySelect").length - 1;
```

```
<select id="mySelect">
    <option>item1</option>
    <option>item2</option>
    <option>item3</option>
    <option>item4</option>
    <option>item5</option>
</select>
```**

# java - 将 mongodb 与 java 一起使用时出错

> ID：11081450
> 
> 赞同：0
> 
> 时间：2012-06-18T11:01:17.417
> 
> 标签：java, mongodb

我正在使用 MongoDB 来存储数据。在我的项目中，我使用线程池将多个用户（100-2000 个用户）连接到服务器，并将这些用户的响应存储在数据库中。但是当我这样做时，我得到了这个错误。请帮我解决一下这个。我无法得到它。我已经在这个错误上浪费了 45 个小时。

**错误：**

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.avaya.onex.hss.requesthandlers.CommandExecutor.executeCommands(CommandExecutor.java:129)
    at com.avaya.onex.hss.requesthandlers.CommandExecutor.run(CommandExecutor.java:59)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.mongodb.DBPortPool$SemaphoresOut: Out of semaphores to get db connection
    at com.mongodb.DBPortPool.get(DBPortPool.java:176)
    at com.mongodb.DBTCPConnector$MyPort.get(DBTCPConnector.java:370)
    at com.mongodb.DBTCPConnector.say(DBTCPConnector.java:149)
    at com.mongodb.DBTCPConnector.say(DBTCPConnector.java:138)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:261)
    at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:211)
    at com.mongodb.DBCollection.insert(DBCollection.java:57)
    at com.mongodb.DBCollection.insert(DBCollection.java:102)
    at com.avaya.onex.hss.objects.LoginRequest.storeData(LoginRequest.java:152)
    at com.avaya.onex.hss.requesthandlers.LoginHandler.handleRequest(LoginHandler.java:20)
    ... 8 more
com.mongodb.DBPortPool$SemaphoresOut: Out of semaphores to get db connection
    at com.mongodb.DBPortPool.get(DBPortPool.java:176)
    at com.mongodb.DBTCPConnector$MyPort.get(DBTCPConnector.java:370)
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:212)
    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
    at com.mongodb.DB.command(DB.java:160)
    at com.mongodb.DB.command(DB.java:183)
    at com.mongodb.DB.command(DB.java:144)
    at com.mongodb.DBCollection.drop(DBCollection.java:777)
    at com.mongodb.DBApiLayer$MyCollection.drop(DBApiLayer.java:206)
    at com.avaya.onex.hss.requesthandlers.CommandExecutor.executeCommands(CommandExecutor.java:118)
    at com.avaya.onex.hss.requesthandlers.CommandExecutor.run(CommandExecutor.java:59)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:10:03.727

尝试增加连接池中的连接数。

看[这里](http://api.mongodb.org/java/2.4/com/mongodb/MongoOptions.html#connectionsPerHost)，在connectionsPerHost。

# google-maps - 如何使用 Google 地图进行处理？

> ID：11081451
> 
> 赞同：8
> 
> 时间：2012-06-18T11:01:17.673
> 
> 标签：google-maps, processing

我想将 Google Maps API 与 Processing 一起使用。到目前为止，我只能获取 Google Places 数据，但我正在为地图本身而苦苦挣扎。我知道其他地图选项，例如展开或适度地图，但我需要谷歌。特别是因为方向 API 正在进一步发展。我搜索了这个论坛和网络，没有任何帮助。我认为这应该很容易。

如何使用 Google 地图进行处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:57:17.300

我不确定是否会在您的处理应用程序中获得功能齐全的动态 Google 地图，但您也许可以修改 Google 天气 API 的处理库，以改用方向或静态地图 API。 [http://www.onformative.com/lab/google-weather-library-for-processing/](http://www.onformative.com/lab/google-weather-library-for-processing/)

如果您下载源代码并查看 GoogleWeather.java，您会看到构造函数正在调用 Wea​​therAPI 并取回 XML 结果。我认为你可以做同样的事情，只是在它的位置使用 Directions API。

这是 Java 博客上的一篇关于在 Java 中显示静态地图 API 结果的帖子，可以翻译成处理：[http ://weblogs.java.net/blog/cajo/archive/2010/10/16/adding-google-maps -你的java应用程序](http://weblogs.java.net/blog/cajo/archive/2010/10/16/adding-google-maps-your-java-application)

对于更动态的东西，您可能能够适应 JXMapViewer，查看这篇文章：[http ://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app- with-jxmapviewer.html](http://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app-with-jxmapviewer.html)

# javascript - 避免在页面重新加载后丢失 jquery.html 显示的数据

> ID：11081459
> 
> 赞同：0
> 
> 时间：2012-06-18T11:02:00.187
> 
> 标签：javascript, jquery, mobile

当用户启动我的应用程序时，有大量来自网络服务的数据存储到设备的数据库中，然后使用 jquery 的 .html() 方法显示在 HTML 页面上。问题是当用户选择另一个 HTML 页面然后返回时，数据不再显示，必须再次从数据库中读取。

我知道这不是“租用编码器”，但我的问题是：即使在页面重新加载后，有没有办法让数据在 HTML 页面上保持不变？还是我必须将所有内容打包到一个 HTML 文档中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:05:13.343

解决方案可能是使用 AJAX 处理所有导航，使您的网站[成为单页应用程序](http://en.wikipedia.org/wiki/Single-page_application)并将内容保存在缓存中。但我认为这是一个非常大的话题。在任何情况下，像 Backbone 或 Ember 这样的优秀 Javascript MVC 框架都可以为您提供帮助。

# javascript - 可以在引导程序中关闭静态模式吗？

> ID：11081463
> 
> 赞同：0
> 
> 时间：2012-06-18T11:02:13.713
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我们有一个页面，客户希望模态在页面视图中可见。我遇到了引导模式不会关闭的问题，除非您手动启动它

难道我做错了什么？如果您单击启动模式（即使模式已经可见），您也可以将其关闭

这是HTML：

```
<a class="btn" data-toggle="modal" href="#myModal">Launch Modal</a>

<div class="modal" id="myModal">
  <div class="modal-header">
    <button class="close" data-dismiss="modal" data-target="#myModal">&times;</button>
    <h3>Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal" data-target="#myModal">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div>​ 
```

CSS 只是 Bootstap 的东西。我们根本没有为此使用任何 JavaScript 代码。

[jsFiddle 上的实时副本](http://jsfiddle.net/DgHBw/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:09:35.927

您不是在“启动”模式，您只是有可见的内联标记。模态还没有真正打开。

使模态隐藏（添加`style="display: none"`到`#myModal` `div`），然后使用[`.modal('show')`](http://twitter.github.com/bootstrap/javascript.html#modals)from触发打开它`ready`：

```
jQuery(function($) {
    $('#myModal').modal('show');​​
}); 
```

[更新的小提琴](http://jsfiddle.net/DgHBw/3/)

That will hook up the required handlers for the close button, position it properly, do the background overlay, etc.

# android - OnAudioFocusChangeListener 在播放和暂停音频时没有执行？

> ID：11081465
> 
> 赞同：1
> 
> 时间：2012-06-18T11:02:29.407
> 
> 标签：android, audio, android-mediarecorder

我正在开发一个应用程序，我需要在其中捕获正在播放的音频。所以我在我的活动中实现了 OnAudioFocusChangeListener 来监听任何音频变化。但是当音乐播放或暂停时，听众不会被呼叫。下面是我的代码

```
public class AudioManagerExample extends Activity implements OnAudioFocusChangeListener{
  AudioReceiver adreceiver;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    AudioManager am =   (AudioManager) getSystemService(AUDIO_SERVICE);

}

@Override
public void onAudioFocusChange(int focusChange) {
    Log.d("AudioManager", "Inside on audio focus change");
} 
```

}

我哪里错了？有没有其他方法可以做到这一点？

谢谢

普什帕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:14:05.343

你忘了包括

```
 am.requestAudioFocus(this,AudioManager.STREAM_MUSIC,AudioManager.AUDIOFOCUS_GAIN); 
```

将您的代码更改为

```
AudioManager am = (AudioManager) getSystemService(AUDIO_SERVICE);
am.requestAudioFocus(this,AudioManager.STREAM_MUSIC,AudioManager.AUDIOFOCUS_GAIN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-10T15:32:11.573

```
 private fun initOnAudioFocusChangeListener() {
    val afChangeListener: AudioManager.OnAudioFocusChangeListener =
        AudioManager.OnAudioFocusChangeListener { focusChange ->
            when (focusChange) {
                AudioManager.AUDIOFOCUS_GAIN -> {
                    viewModel.isAppLostAudioFocusLiveData.value = false
                }
                else -> {
                    viewModel.isAppLostAudioFocusLiveData.value = true
                }
            }
        }

    val audioManager = getSystemService(Context.AUDIO_SERVICE) as AudioManager
    if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.O) {
        audioManager.requestAudioFocus(
            AudioFocusRequest.Builder(AudioManager.AUDIOFOCUS_GAIN)
                .setOnAudioFocusChangeListener(afChangeListener).build()
        )
    } else {
        audioManager.requestAudioFocus(
            afChangeListener,
            AudioManager.STREAM_MUSIC,
            AudioManager.AUDIOFOCUS_GAIN
        )
    }
} 
```

[kotlin](/questions/tagged/kotlin "显示标记为“kotlin”的问题") [android10](/questions/tagged/android10 "显示标记为“android10”的问题") [api](/questions/tagged/api "显示标记为“api”的问题")

# c# - 使用 Emgu CV 访问和输出每个像素的灰度

> ID：11081467
> 
> 赞同：0
> 
> 时间：2012-06-18T11:02:41.983
> 
> 标签：c#, visual-studio-2010, opencv, emgucv

我正在尝试将灰度图像中每个像素的值保存到文本文件中。例如，如果像素位置 (x, y) 的值为 255（纯白色），则 255 将保存在文本文件中对应的坐标中。

这是我的代码。它是 x86 机器上 Emgu CV 2.4.0、MSFT Visual Studio 2010 和 MSFT .NET 4.0 中的 WinForm 应用程序。

```
OpenFileDialog OpenFile = new OpenFileDialog();//open an image file.
        if (OpenFile.ShowDialog() == DialogResult.OK)
        {
            Image<Bgr, Byte> My_Image = new Image<Bgr, byte>(OpenFile.FileName);//Read the file as an Emgu.CV.Structure.Image object.
            Image<Gray, Byte> MyImageGray = new Image<Gray, Byte>(My_Image.Width, My_Image.Height);//Initiate an Image object to receive the gray scaled image. 
            CvInvoke.cvCvtColor(My_Image.Ptr, MyImageGray.Ptr, COLOR_CONVERSION.CV_RGB2GRAY);//convert the BGR image to gray scale and save it in MyImageGray
            CvInvoke.cvNamedWindow("Gray");
            CvInvoke.cvShowImage("Gray", MyImageGray.Ptr);
            StreamWriter writer = File.CreateText("test.txt");//Initiate the text file writer
            Gray pixel;
            //try to iterate through all the image pixels.
            for (int i = 0; i < MyImageGray.Height; i++)
            {
                for (int j = 0; j < MyImageGray.Width; j++)
                {
                    pixel = MyImageGray[j, i];
                    Console.WriteLine(string.Format("Writing column {0}", j));//debug output
                    writer.Write(string.Format("{0} ",pixel.Intensity));
                }
                writer.WriteLine();
            }
        } 
```

我试图运行它，但由于某种原因，它在 i=0 和 j=MyImageGray.Width-1 之后卡住了。它应该去处理下一行，但整个 Visual Studio 2010 和应用程序冻结了。冻结是指我的应用程序窗口不能移动，VS 中的光标也不能移动。我必须通过按 Shift+F5 来终止应用程序。同时，当我读取 (0, 414) 像素时，我得到了“Emgu.CV.dll 中发生‘Emgu.CV.Util.CvException’类型的第一次机会异常”。实际上调试消息看起来像：

```
Writing column 413
WritinA first chance exception of type 'Emgu.CV.Util.CvException' occurred in     Emgu.CV.dll
g column 414
Writing column 415 
```

我试图在 i=MyImageGray.Width-1 处设置一个断点，但程序似乎在它到达断点之前就冻结了。我真的不知道我的方法有什么问题。任何想法将不胜感激，我很乐意应要求提供更多信息。提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:40:46.143

当您以这种方式访问​​像素值时，您应该使用`pixel = MyImageGray[i, j];`而不是`pixel = MyImageGray[j, i];`. 第一个索引是行，第二个索引是列。

希望有帮助。

# ruby-on-rails - 本规范中 put 和 update_attributes 之间的区别

> ID：11081469
> 
> 赞同：0
> 
> 时间：2012-06-18T11:02:46.010
> 
> 标签：ruby-on-rails, rspec, put, update-attributes

愚蠢的提问时间：在以下请求规范中，我尝试确保我的数据库中的第一个用户不能被编辑（除了第一个用户之外的任何人）。

```
# user is not logged in during these tests

# variant 1 - this passes
describe "first user" do
  let(:first_user){ FactoryGirl.create(:admin) }

  # use put to modify the user
  before { put user_path(first_user, email: 'tst@test.com') }

  # this passes, the response is a redirect
  specify { response.should redirect_to(root_path) }
end

# variant 2 - this test fails
describe "first user" do
  let(:first_user){ FactoryGirl.create(:admin) }

  # this fails, email is updated
  it "can't be updated or edited" do
    expect do
      first_user.update_attributes(email: 'email@test.com')
    end.not_to change(first_user.reload, :email)
  end
end 
```

这两个测试似乎做同样的事情，但一个失败，一个通过。我想我的理解在这里很糟糕。update_attributes 是否应该在失败的测试中调用，调用我的控制器的前置过滤器：

```
# users_controller.rb
before_filter correct_user, only: [:edit, :update]

private

# pretty messy, but ensures that ordinary users can only
# edit their own accounts, that admin users can
# edit all accounts, except for the first one. 
# I believe it also ensures that the first_user 
# can only be edited by the owner of the first account, i.e. me
# due to the fact that the first condition of the `unless` clause will pass
# if the current_user is the first_user. The complexity is necessary to prevent
# other admins, from being able to edit the first_user.
def correct_user
  @user=User.find(params[:id])
  redirect_to(root_path, only_path: true) unless current_user?(@user) || ( current_user.admin? && !first_user?(@user) )
end

def first_user?(user)
  user==User.first
end 
```

update_attributes 会忽略我的 before_filter 吗？为什么不放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:06:37.520

update_attributes 不是请求，而是模型方法——过滤器在请求上下文之外毫无意义。

“put”是一个请求，因此运行过滤器。

# android - Android WebView 已加载图片？

> ID：11081472
> 
> 赞同：0
> 
> 时间：2012-06-18T11:03:00.873
> 
> 标签：android, webview, size

我正在使用 WebView 显示来自网络的图片，有时图片无法加载。

```
 mPicture.setWebViewClient(new WebViewClient() {
           public void onPageFinished(WebView view, String url) {
                setProgressBarIndeterminateVisibility(false);
                Log("Content height: " + mPicture.getContentHeight());
            }
        }); 
```

上面的代码可以很好地找出 WebView 何时尽可能地加载了内容，但是我如何判断图片是否真的被找到/加载了。我希望通过使用加载的内容的大小来实现这一点，但是没有方法可以做到这一点，尝试使用内容高度，但是在没有加载图片的情况下获得与加载纵向图片时相同的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:28:56.417

不，您无法检测是否已加载 HTML 代码的单个元素。您只能判断页面是否已加载。

当所有内容都已下载或所有可下载的内容都已下载时，页面加载完成。

# ruby-on-rails - 如何知道用户何时与 Faye 频道断开连接？

> ID：11081479
> 
> 赞同：5
> 
> 时间：2012-06-18T11:03:30.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, faye

我正在尝试使用 Faye 用 Rails 构建一个简单的聊天室，并将其托管在 heroku 上。到目前为止，我能够让 Faye 服务器运行，并让即时消息正常工作。我正在使用的关键代码行是：

**页面加载时启动的 Javascript 文件：**

```
$(function() {
  var faye = new Faye.Client(<< My Feye server on Heoku here >>);
  faye.subscribe("/messages/new", function(data) {
    eval(data);
  });
}); 
```

* * *

**create.js.erb，当用户发送消息时触发**

```
<% broadcast "/messages/new" do %>
  $("#chat").append("<%= j render(@message) %>");
<% end %> 
```

* * *

一切正常，但现在我想在用户断开聊天时通知。**我该怎么做？**

我已经在[Faye 的网站上查看了有关监控的信息](http://faye.jcoglan.com/ruby/monitoring.html)，但不清楚我应该把该代码放在哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T21:32:37.010

事件监控放在你的 rackup 文件中。这是我在生产中使用的示例：

```
Faye::WebSocket.load_adapter('thin')
server = Faye::RackAdapter.new(mount: '/faye', timeout: 25)

server.bind(:disconnect) do |client_id|
  puts "Client #{client_id} disconnected"
end

run server 
```

当然，您可以在传递到的块中做任何您喜欢的事情`#bind`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T22:26:23.697

您可能希望绑定到`subscribe`and`unsubscribe`事件而不是`disconnect`事件。[阅读faye 监控文档](http://faye.jcoglan.com/ruby/monitoring.html)底部的警告词。

这对我来说效果很好：

```
server.bind(:subscribe) do |client_id|
  # code to execute
  # puts "Client #{client_id} connected"
end

server.bind(:unsubscribe) do |client_id|
  # code to execute
  # puts "Client #{client_id} disconnected"
end 
```

我还建议使用[私人酒吧](https://github.com/ryanb/private_pub)gem - 这将有助于保护您的 faye 应用程序。

# html - 从特定时间开始 mp4

> ID：11081482
> 
> 赞同：0
> 
> 时间：2012-06-18T11:03:36.870
> 
> 标签：html, streaming, mp4

我使用 php 构建了一些半电视脚本。这个概念是管理员上传视频并设置播放时间，当用户访问网站视频时自动播放特定时间。

网址

[http://ezwebdesigns.co.uk/onlinetv/index.php](http://ezwebdesigns.co.uk/onlinetv/index.php)

我使用videojs播放器，但不能从特定时间开始，它总是从开始，我设置了方法但不起作用。

任何人都知道支持 mp4 的视频播放器，可以播放特定时间的视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:35:20.670

试试这样：

```
document.getElementById('videoid').addEventListener('loadedmetadata', function() {
this.currentTime = 50;
}, false); 
```

# mysql - MySQL 显示状态

> ID：11081483
> 
> 赞同：0
> 
> 时间：2012-06-18T11:03:40.000
> 
> 标签：mysql, mysql-management

我有一个行数为`48769914`. 问题是查询数据库时的虚假信息，即data_length。关于如何纠正这种不当行为的任何想法？

```
mysql> show table status like "events"\G
*************************** 1\. row ***************************
           Name: events
         Engine: InnoDB
        Version: 10
     Row_format: Compact
           Rows: 0
 Avg_row_length: 0
    Data_length: 16384
Max_data_length: 0
   Index_length: 32768
      Data_free: 7405043712
 Auto_increment: 59816602
    Create_time: 2012-06-05 05:12:37
    Update_time: NULL
     Check_time: NULL
      Collation: utf8_general_ci
       Checksum: NULL
 Create_options:
        Comment:
1 row in set (0.88 sec) 
```

准确计数：

```
mysql> select count(id) from events;
+-----------+
| count(id) |
+-----------+
|  48769914 |
+-----------+
1 row in set (5 min 37.67 sec) 
```

**更新**状态信息看起来像表是空的。零行，零行长，表中基本没有数据。如何让 MySQL 显示该数据的正确估计值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:07:22.873

InnoDB 行数并不精确，因为 InnoDB 内部不跟踪记录数，它只能通过表空间中分配的空间量来估计。

有关更多信息，请参阅手册中的[InnoDB 限制](http://dev.mysql.com/doc/refman/5.0/en/innodb-restrictions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:05:59.640

InnoDB 不会在表状态中存储行数，因此这不是伪造的。`SELECT`您可以通过在需要行数的位置运行查询来解决此问题。

# google-apps-script - “在 Google 站点中嵌入 Google DocList”脚本失败

> ID：11081488
> 
> 赞同：0
> 
> 时间：2012-06-18T11:03:59.630
> 
> 标签：google-apps-script

建议使用以下脚本使用列表页面在 google 站点的页面上显示 Google Docs 文件夹。

[https://developers.google.com/apps-script/articles/embedding_docslist_in_sites#section2](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites#section2)

当我尝试在 Google Drive 中最近创建的文件夹上运行它时，脚本似乎永远不会完成。

该脚本仍然适用于在切换到谷歌驱动器之前创建的文件夹，该文件夹具有更长的 ID。

我错过了什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:29:34.980

在脚本库中（打开电子表格，单击菜单工具>脚本库），搜索“在 Google 站点中嵌入 Google 文档文件夹”。

这是 Apps 脚本文档中提供的脚本的更新版本。它应该工作得更好。

# codeigniter - CodeIgniter Loader 扩展导致错误

> ID：11081494
> 
> 赞同：0
> 
> 时间：2012-06-18T11:04:34.497
> 
> 标签：codeigniter, utf-8, loader, extend, byte-order-mark

我遇到了一些让我发疯的事情。请帮我 ：（

我正在尝试扩展 CI_Loader Core 以创建全局页眉和页脚。由于某种原因，扩展会导致错误。

**扩展代码：**

```
class MY_Loader extends CI_Loader
{
    function __construct()
    {
        // i need the codeigniter super-object 
        // in all the functions
        $CI =& get_instance();
    }

    public function load_header()
    {
        echo 'header';
    }

    public function load_footer()
    {
        echo 'footer';
    }

} 
```

**我目前得到的错误**

```
无法加载请求的文件：helpers/url_helper.php
```

**更新：更改了代码 - 新错误**

```
class MY_Loader extends CI_Loader
{

    function __construct() {
        parent::__construct();

        $CI =& get_instance();
        $CI->load = $this;
    }

    public function load_header()
    {
        echo 'header';
    }

    public function load_footer()
    {
        echo 'footer';
    }

} 
```

现在我的标题出现了一些错误

```
遇到 PHP 错误

严重性：警告

消息：无法修改标头信息 - 标头已发送（输出开始于 /mounted-storage/home75b/sub007/sc43190-SREL/gogetmilk.com/application/core/MY_Loader.php:1）

文件名：库/Session.php

行号：672

```

**更新＃2** 我不是修复它的正确方法。但它的工作。

library/Session.php 中的第 672 行设置了一个 cookie

我添加了一个测试以查看是否已发送标头：

```
 if (! headers_sent() )
    {
        setcookie(
            $this->sess_cookie_name,
            $cookie_data,
            $expire,
            $this->cookie_path,
            $this->cookie_domain,
            $this->cookie_secure
        );           
    } 
```

它不能正常工作。我在打印任何内容之前、打印之后、视图内、加载视图之后等创建了会话。

有人相信这会导致任何问题吗？

**问题已解决，与 codeigniter 无关。请参阅底部的答案。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:28:55.607

> 我目前得到的错误无法加载请求的文件：
> 
> 助手/url_helper.php

您收到此错误是因为您没有加载 URL 帮助程序。我没有看到对任何 URL 辅助函数的任何调用，所以我认为错误是在另一个文件中引发的......尝试添加

```
$this->load->helper('url'); 
```

在相关文件中或将其加载到`config/autoload.php`

并且，是的，使用 parent::__construct(); 正如 Broncha 回答的那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:55:16.857

您的构造应该调用父构造

```
function __construct()
{
    parent::__construct();
    // i need the codeigniter super-object 
    // in all the functions

    $CI =& get_instance();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:54:06.270

问题解决了。它甚至不是 CodeIgniter 问题。

在文件的开头，它是一个不可见的 BOM。使用此应用程序删除此字节：http: [//sourceforge.net/projects/bomremover/](http://sourceforge.net/projects/bomremover/)

谢谢大家的帮助:)

# joomla - 前端 Joomla 搜索插件 - Joomla2.5

> ID：11081496
> 
> 赞同：0
> 
> 时间：2012-06-18T11:05:03.217
> 
> 标签：joomla, joomla-extensions, joomla2.5

我需要 Joomla 2.5 中的 Joomla 前端搜索模块，它在搜索时搜索文章、模块、任何媒体文件中的文本、pdf 中的文本，并将结果全部显示在列表中。

例如：如果“phpranav”是任何文章中使用的关键字，请说“我的昵称”，在名为“Mynickname”的模块中，在任何名为“phpranav.png”的图像中，或在任何包含 3 个段落的 pdf 文件中“phpranav”关键字的出现次数，作为页面中的元标记，作为页面中的标题......等等......

然后搜索关键字“phpranav”

我必须从上面给出的描述中获取所有出现的列表作为从搜索中检索到的数据。

如果已经有任何此类插件可用，或者我必须自己创建它，请指导我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:44:49.280

[JED 上](http://extensions.joomla.org/extensions/search-a-indexing/site-search)有几个将 Google 等与 Joomla 集成的搜索扩展！虽然我们有一段时间没有使用它，但 RokAjaxSearch 为我们的客户提供了 PDF 文件。不知道它如何与图像一起使用。

# java - 如何将值保存为文件中双精度的 ArrayList

> ID：11081497
> 
> 赞同：0
> 
> 时间：2012-06-18T11:05:11.903
> 
> 标签：java

我想将值保存为文件中双精度的 ArrayList。每当有新值时，都应将其添加到 ArrayList 中，而不会删除以前的值。我正在尝试使用函数DataStream。是否可以？如果可能的话，请让我知道如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:33:11.057

XStream 是一个 Java 库，它支持以 xml 格式保存/发送对象。使用简单。XML 是人类可读的，因此很容易检查其正确性或修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:41:01.947

您要使用的类是 ObjectOutputStream 和 ObjectInputStream

例如 [http://www.javadb.com/writing-objects-to-file-with-objectoutputstream](http://www.javadb.com/writing-objects-to-file-with-objectoutputstream)

[http://www.javadb.com/reading-objects-from-file-using-objectinputstream](http://www.javadb.com/reading-objects-from-file-using-objectinputstream)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:14:35.550

请参考下面的代码。

```
 private static String LFILE = "serial";

public static void updateFile(Double num) {

    FileOutputStream fos = null;
    ObjectOutputStream oos = null;

    try{
        List<Double> list = getDoubles();
        list.add(num);
        fos = new FileOutputStream(LFILE);
        oos = new ObjectOutputStream(fos);
        oos.writeObject(list);

    }catch(Exception e){
        e.printStackTrace();
        try {
            oos.close();
            fos.close();
        } catch (IOException e1) {
            e1.printStackTrace();
        }

    }

}

public static List<Double> getDoubles() {

    FileInputStream fis = null;
    ObjectInputStream ois = null;
    List<Double> newList = new ArrayList<Double>();
    try {
        fis = new FileInputStream(LFILE);
        ois = new ObjectInputStream(fis);

        newList = (ArrayList<Double>) ois.readObject();

    } catch (Exception ex) {

        try {
            fis.close();
            ois.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return newList;
} 
```

# module - 在 OCaml 中包含两个模块时处理类型名称冲突

> ID：11081501
> 
> 赞同：3
> 
> 时间：2012-06-18T11:05:17.203
> 
> 标签：module, include, ocaml

任何人都可以帮助我完成 Jason Hickey 书中的练习 12.5 吗？

基本上，问题是如何在实践中避免由于“包含”而导致的以下冲突问题？谢谢。

```
# module type XSig = sig 
type t 
val x : t 
end;; 
# module A : XSig = struct 
type t = int 
let x = 0 
end;; 
# module B : XSig = struct 
type t = int 
let x = 1 
end;; 
# module C = struct 
include A 
include B 
end;; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T12:04:01.817

我不知道这个问题到底在说什么，但关于你的代码片段，有各种非常不同的方式来解释你正在尝试做的事情。

您目前正在做的是密封`A`并`B`在两个抽象的、不兼容的签名下，然后尝试将它们混合在一个模块中，只是为了产生名称冲突。

也许您只是想避免名称冲突。当然，最简单的解决方案是不要对类型`A.t`和`B.t`. 然后你可以“不包括`B`”：

```
module C = struct
  include A
  let x_b = B.x
end 
```

更好的解决方案是使用 OCaml 3.12 破坏性替换签名，`with type t := foo`来屏蔽`t`模块中的类型`B`：

```
module C = struct
  include A
  type u = B.t (* rename B.t into 'u' to avoid name conflict *)
  include (B : XSig with type t := u)  (* replaces 't' by 'u' *)
end 
```

您可能还希望模块的类型`A`兼容`B`。在这种情况下，您不能用抽象类型密封它们。

```
module type XSig = sig 
  type t 
  val x : t 
end

module A = struct 
  type t = int 
  let x = 0 
end

(* if you want to check that A can be sealed by XSig, do it here,
   outside the main declaration *)
let _ = (module A : XSig)

module B = struct 
  type t = int 
  let x = 1 
end

module C = struct 
  include (A : XSig with type t := int)
  include (B : XSig with type t := int)
end
(* module C : sig
     val x = int
   end *) 
```

在这个例子中，两种类型`A.t`和`B.t`都被破坏性替代删除`:=`。如果您希望您的模块`C`有一个 type `t`，您可以编写以下任一项：

```
module C = struct 
  type t = int
  include (A : XSig with type t := t)
  include (B : XSig with type t := t)
end 
```

或者，使用非破坏性替换（更改类型定义而不是删除它）：

```
module C = struct 
  include (A : XSig with type t = int)
  include (B : XSig with type t := t)
end 
```

有关更多详细信息，请参见[破坏性替换的手册页，以及用于比较`type type t := ...`](http://caml.inria.fr/pub/docs/manual-ocaml-400/manual021.html#toc83)[的经典`with type t = ...`构造](http://caml.inria.fr/pub/docs/manual-ocaml-400/manual018.html#toc64)的手册页。

# ruby-on-rails - 如何在 Ruby 字符串中返回最后一个斜杠（/）之后的所有内容

> ID：11081504
> 
> 赞同：37
> 
> 时间：2012-06-18T11:05:35.317
> 
> 标签：ruby-on-rails, ruby, regex

我有一个字符串想要`/`返回最后一个之后的所有内容。

例如`https://www.example.org/hackerbob`，它应该返回`"hackerbob"`。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-18T11:27:12.903

我不认为正则表达式是一个好主意，看看任务是多么简单：

```
irb(main):001:0> s = 'https://www.facebook.com/hackerbob'
=> "https://www.facebook.com/hackerbob"
irb(main):002:0> s.split('/')[-1]
=> "hackerbob" 
```

当然你也可以使用正则表达式，但它的可读性要低得多：

```
irb(main):003:0> s[/([^\/]+)$/]
=> "hackerbob" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T11:35:32.997

为工作使用正确的工具：

```
require 'uri'
url = "https://www.facebook.com/hackerbob"
URI.parse(url).path[1..-1]  # => "hackerbob" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T11:28:54.650

再来一份样品

```
str = 'https://www.facebook.com/hackerbob'
ending = str.match(/.com\/(.*)/)
p ending[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:08:51.747

你当然可以：

```
string = 'https://www.facebook.com/hackerbob'
string =~ /^https?:\/\/www\.facebook\.com\/(.*)/
$1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:23:59.800

**可以用这个**

```
subject = /(\/)([^\/]+)\Z/i.match(subject)
if match
    # match start: match.begin(0)
    # match end (exclusive): match.end(0)
    # matched text: match[0]
    # backreference n start: match.begin(n)
    # backreference n end (exclusive): match.end(n)
    # backreference n text: match[n]
else
    # Match attempt failed
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T11:24:59.243

用它

```
 1.9.3p194 :039 > line = 'https://www.facebook.com/hackerbob'
 1.9.3p194 :039 > line.match(/.com\/(\w+$)/)[1]  #    => "hackerbob" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-18T11:29:14.400

您可以尝试 /[a-zA-Z]+://[az]+.[az]+.[az]+/(.+)/ 如果您将它用于上面的字符串或任何其他类似的网址。用于正则表达式的一个很好的工具是[http://www.rubular.com](http://www.rubular.com)

# f# - 控制台输入给出虚假值

> ID：11081509
> 
> 赞同：2
> 
> 时间：2012-06-18T11:05:44.560
> 
> 标签：f#, f#-interactive

用 5 尝试这个简单的控制台输入后，结果显示为 53

```
printfn "Enter no. of blocks: "
let nBlock = System.Console.Read()
printfn "entered value is %O" nBlock 
```

在交互式上尝试过，仍然得到错误的结果。请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T11:14:19.060

您应该尝试以下方法：

```
printfn "Enter no. of blocks: "
let nBlock = System.Console.ReadLine() |> System.Int32.Parse
printfn "entered value is %d" nBlock 
```

解释：

您的代码只读取一个字符 - 正如 Lee 提到的那样，您将读取一行（按回车键后结束）并将该字符串解析为 int。

备注：也许你想检查一个数字，你可以用 TryParse 做到这一点：

```
printfn "Enter no. of blocks: "
let nBlock = 
   match System.Console.ReadLine() |> System.Int32.TryParse with
   | true, n -> n
   | false, _ -> -1
printfn "entered value is %d" nBlock 
```

当然，您必须检查错误情况（-1）或将其更改为选项或其他内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T11:13:44.177

`System.Console.Read()`返回 an `int`，因此`nBlock`包含输入字符“5”的 int 表示形式，即 53。您可以将其转换回`char`using `Convert.ToChar`。由于每个字符都是单独返回的，因此您需要将其包装成一个循环来处理整个输入，如[本文所述](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)。

更好的方法可能是使用`Console.ReadLine()`读取整行并将其解析为`int`.

# php - 在通过 .load() 加载后查找 input 或 span 的 attr 值

> ID：11081512
> 
> 赞同：0
> 
> 时间：2012-06-18T11:06:00.670
> 
> 标签：php, jquery, ajax, live

我有一个表格，它在数据库上进行查找，查找是使用`load()`. 这可以。

我想做的是读取通过 php.ini 返回的输入的值。我在想我需要使用该`.live()`方法，但我不确定如何。

我目前的代码是：

```
var recordCount = $("input[name=noOfCusts]").val();
console.log("Number is " + recordCount) 
```

所以`input[name=noOfCusts]`是从 PHP 加载的，所以我无法理解它。我只是得到一个未定义的值。

我如何将 live() 滚动到`var recordCount = $("input[name=noOfCusts]").val();`

谢谢

我的加载代码是

```
$("input[name=findCust]").keyup(function(){
    var key = $(this).val();
    var type = 1;
    $("div#CustomerResults").html("<img src='../images/loading.gif' alt='loading'/>").delay('500').load("../../ajax/customerFinder.php",{"key":key,"type":type}).fadeIn(300);

    //#############################################
    // Extra bit to make the search form work with a return
    $("input[name=findCust]").live('keyup',function(){
        var recordCount = $("input[name=noOfCusts]").val();
        console.log("Number is " + recordCount)
    });

    //var recordCount = $("input[name=noOfCusts]").find("input[name=noOfCusts]").val();
    //
    //$('input[name="noOfCusts"]').val(data);
    //console.log("Number is " + data)
    //#############################################
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:27:09.653

与其返回 HTML`input`标记，不如只返回 HTML DOM 中已经存在的该输入的值。

然后在成功的加载调用中将获得的值设置为该输入：

```
// success
$('input[name="noOfCusts"]').val(data);
alert(data); 
```

# c# - 在 C# 中引用通过网站管理工具创建的角色/用户

> ID：11081513
> 
> 赞同：0
> 
> 时间：2012-06-18T11:06:02.280
> 
> 标签：c#, asp.net, visual-studio-2008

在我的 C# ASP.NET Web 应用程序中，我使用网站管理工具来创建用户和密码。我根据角色在 aspx 文件中执行一些操作，例如：

```
<RoleGroups>
<asp:RoleGroup Roles="Administrators"> 
```

我的问题是：如何在代码隐藏（C#）文件中引用如前所述创建的角色/用户：

> 例如，如果角色=管理员，请执行此操作...
> 
> 如果用户 = admin/john/whatever，请执行此操作...

谢谢！安娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:10:17.300

试试这个

```
 if (Roles.IsUserInRole("Administrators"))
    {  
       // do something for administrator
    } 
```

对于Users，你可以得到一个这样的User来获取当前登录的用户

```
 Dim userInfo As MembershipUser = Membership.GetUser( HttpContext.Current.User.Identity.Name) 
```

还有一个更大的 Membership API，你可以用它来做你喜欢的事。 [http://msdn.microsoft.com/en-us/library/ff648345.aspx](http://msdn.microsoft.com/en-us/library/ff648345.aspx)

# login - 从文本文件中检索用户名和密码并将它们收集到登录变量（参数）中

> ID：11081515
> 
> 赞同：0
> 
> 时间：2012-06-18T11:06:02.993
> 
> 标签：login, filesystems, titanium, appcelerator

我有一个函数将用户名和密码存储在每个单独的文本文件中`(Titanium.Filesystem.applicationDataDirectory, "userName.txt")`，并且`(Titanium.Filesystem.applicationDataDirectory, "passWord.txt")`在登录被 webserver(php) 确认有效之后。

现在我需要一个函数来从 userName.txt 和 passWord.txt 中检索值（文本内容），并将这些值收集到 var 参数中，以便在事件中将它们发布到 php-server：

```
var params = {  
            username: username.value,  
            password: Ti.Utils.md5HexDigest(password.value)  
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:51:45.890

为什么不使用 Ti.App.Properties？它是为像这样存储数据而设计的。

```
Ti.App.Properties.setString('username', username.value);
username.value = Ti.App.Properties.getString('username'); 
```

[http://docs.appcelerator.com/titanium/2.0/index.html#!/api/Titanium.App.Properties](http://docs.appcelerator.com/titanium/2.0/index.html#!/api/Titanium.App.Properties)

如果您必须使用文件（我不推荐）：

```
var file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'username.txt');
file.write(username.value);
username.value = file.read(); 
```

# git - 在接收后自动同步 Trac 和 git（在 Windows 上使用 Bitnami）

> ID：11081520
> 
> 赞同：1
> 
> 时间：2012-06-18T11:06:14.273
> 
> 标签：git, trac, githooks, bitnami

所以我在 Windows 上的 Bitnami trac 堆栈上安装了 trac 和 trac-git 插件。一切正常，但是每当我提交我的 git repo 时，我必须打开`use_trac.bat`然后调用，然后`trac-admin ProjectName repository resync`才能看到 trac 中的更改。

现在我想做的是`post-receive`在存储库的钩子中调用这一行，但我正在努力解决如何从 bat 文件中调用它。

有人知道我该怎么做吗？

编辑：到目前为止，我在接收后有这个

```
echo "Resync repo"
"C:/path/to/repos/resync_git.bat" 
```

调用我手动编写的这个 bat 文件可以工作，但这不是调用。我想知道是不是因为钩子的设置不适合获胜？

这是该文件的内容：

```
@echo off
CALL "C:\PROGRA~1\Trac\scripts\setenv.bat"
cd "C:\Program Files\Trac"
START "BitNami Trac Stack Environment" cmd
trac-admin C:/path/to/project changeset added "prjname" 
```

我`trac-admin C:/path/to/project repository resync "prjname"`以后可能会在这里使用...

这就是调用时发生的情况：

```
remote: Resync repo
remote: ./resync_git.bat: line 1: @echo: command not found
remote: ./resync_git.bat: line 2: CALL: command not found
remote: ./resync_git.bat: line 5: trac-admin: command not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:31:25.923

一方面，对于 Windows 系统，路径名中的斜杠是向后的。不过，这可能还不足以破坏剧本。

当我遇到钩子脚本失败但在手动运行时工作的问题时，它通常归结为以下两件事之一：脚本在执行时视为“当前工作目录”，以及在其下的用户帐户脚本运行。您可以通过在脚本中使用绝对路径或通过显式更改为特定目录作为脚本的第一行来解决第一个问题。第二个问题可能有点棘手。有时它是由权限问题引起的，有时是由作为具有不同 PATH 的用户运行的脚本引起的。

无论哪种方式，您都需要更多调试信息才能准确了解这里发生了什么。在启动脚本的命令中，将 stdout 和 stderr 重定向到日志文件，以便您可以捕获任何相关输出。将结果添加到您的问题中，我应该能够给您更具体的答案。

另一个值得尝试的可能性是消除额外的 .bat 文件，只需将 'trac-admin' 调用直接放入挂钩脚本中。

你确定你的 post-commit 钩子正在运行吗？尝试将“echo [%TIME%] Hook script running >>C:\test.txt”之类的命令添加到 hook 脚本的顶部，并验证是否确实记录了某些内容。如果没有，那么 git 可能根本看不到你的钩子脚本。

# mysql - 使用nodejs更新我的表并在mysql中插入新列

> ID：11081526
> 
> 赞同：0
> 
> 时间：2012-06-18T11:06:45.193
> 
> 标签：mysql, node.js

我需要在现有表中插入新列的语法

```
client.query('ALTER TABLE login ADD'+'code VARCHAR(255)',function(err,result){
    if(err){
        console.log("ERROR:"+err.message);
    }
    else{
        console.log("new column added");
    }
}); 
```

它向我显示错误只需要提前适当的 sytanx thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:10:27.657

更改查询

```
 ALTER table login add column (code varchar(255)); 
```

# android - 多窗格布局

> ID：11081529
> 
> 赞同：2
> 
> 时间：2012-06-18T11:06:58.157
> 
> 标签：android, android-layout

我想使用 2 个面板为平板电脑创建应用程序。左边一个作为菜单，右边一个作为内容演示者。事实上，我期望的行为类似于 Gmail 应用程序中的行为。

![在此处输入图像描述](../Images/5a592c00c7050612a46cdcf249325059.png)

我目前正在使用 2 个片段。一个基本上是带有房间名称和一些按钮的 ListView。另一个（内容）包括有关所选房间的一些信息。

我在左侧面板中选择的房间应该保持突出显示 - 就像在 Gmail 应用程序中一样。我尝试了很多小时来使用选择器来实现这种效果，但失败了。

此外，我发现关于这种方法的 2 种不同意见..

1）[“不要试图在触摸模式下保持焦点或选择”](http://developer.android.com/resources/articles/touch-mode.html)

2）[“一般来说，使用右侧的窗格来显示有关您在左侧窗格中选择的项目的更多信息。确保保持左侧窗格中的项目处于选中状态，以便建立面板之间的关系。”](http://developer.android.com/design/patterns/multi-pane-layouts.html)

你能告诉我如何实现这一点（只是为了使所选项目与其他项目区分开来）？也许 ListView 不是这里最好的方法？

**更新**

感谢 Christoph Eberhardt 的回答，我创建了一个运行良好的示例项目。它可以[在 github 上找到。](https://github.com/gisek/ListView_test)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:20:54.330

在 res/drawable/list_item_selector.xml 中创建一个 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@drawable/list_pressed" />
    <item android:drawable="@drawable/list_default" />
</selector> 
```

对于列表元素，创建一个自己的 xml 文件 res/layout/list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingLeft="20dp"
    android:background="@drawable/list_item_selector"
/> 
```

然后在创建列表适配器时执行：

```
setListAdapter(new CustomAdapter<String>(getActivity(),
            R.layout.list_item, stringArray)); 
```

现在您所要做的就是提供可绘制对象 list_default 和 list_pressed**和 list_altered**

CustomAdpater 看起来像：

```
package com.test.listview_keep_selected;

import android.app.Activity;
import android.content.Context;
import android.graphics.drawable.StateListDrawable;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class CustomAdapter<T> extends ArrayAdapter<T> {

    private Context m_cContext;

    public CustomAdapter(Context context, int textViewResourceId,
            T[] objects) {

        super(context, textViewResourceId, objects);
        this.m_cContext = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final View returnView = super.getView(position, convertView, parent);
        final ListView listView  = (ListView) ((Activity) m_cContext).findViewById(R.id.listViewTest);
        returnView.setOnClickListener(new OnClickListener(
                ) {

            @Override
            public void onClick(View v) {
                for(int i = 0; i< listView.getChildCount(); i++)
                    listView.getChildAt(i).setSelected(false);
                StateListDrawable states = new StateListDrawable();
                states.addState(new int[] {android.R.attr.state_selected},
                        m_cContext.getResources().getDrawable(R.drawable.list_pressed));
                states.addState(new int[] { },
                        m_cContext.getResources().getDrawable(R.drawable.list_altered));
                v.setBackgroundDrawable(states);
                v.setSelected(true);
            }
        });
        return returnView;
    }

} 
```

~~**编辑：**~~

如果你还没有它：

~~listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);~~

**编辑：** 不要用普通的 ListView 设置选择模式，只有当你有我的代码中的 ListFragment 时才有意义

现在还不是很完美，但是从现在开始，玩了一会儿应该会没事的。

也可能有帮助的是：[ListView item background via custom selector](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)

**编辑：**

现在它应该可以按您的意愿工作了^^

# c# - 如何在 C# 中获取光标的大小

> ID：11081530
> 
> 赞同：5
> 
> 时间：2012-06-18T11:07:02.697
> 
> 标签：c#, winforms

我需要获取经典 windows 光标矩形的大小。

如何在 C# 中获取光标的大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T11:14:58.577

您可以使用[Cursor.Size](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.size.aspx)：

```
int cursorWidth = Cursor.Size.Width;
int cursorHeight = Cursor.Size.Height; 
```

是的，就是这么简单！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:20:23.970

一个小例子：[参考](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.size.aspx)

```
 if(this.Cursor != Cursors.Hand & 
         Cursor.Current == Cursors.Default)
       {
          // Draw the cursor stretched.
          Graphics graphics = this.CreateGraphics();
          Rectangle rectangle = new Rectangle(
            new Point(10,10), new Size(cursor.Size.Width * 2, 
            cursor.Size.Height * 2));
          cursor.DrawStretched(graphics, rectangle);

      // Draw the cursor in normal size.
      rectangle.Location = new Point(
      rectangle.Width + rectangle.Location.X, 
        rectangle.Height + rectangle.Location.Y);
      rectangle.Size = cursor.Size;
      cursor.Draw(graphics, rectangle);

      // Dispose of the cursor.
      cursor.Dispose();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:53:08.887

有关详细信息，请访问 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.cursor.size.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.size.aspx)

# php - 使用来自链接的 $_GET 的 jquery ajax 调用

> ID：11081531
> 
> 赞同：1
> 
> 时间：2012-06-18T11:07:03.073
> 
> 标签：php, jquery

我正在尝试从查询字符串中获取数据，但将其与 Ajax 一起使用。我似乎无法正确传递数据，我想知道我的语法错误在哪里：

```
$(function()
      {
    $("#link").click(function(event)
    {
    event.preventDefault();
        $.get("request.php",{id:+link.attr('id')},function(response){

                $("#ajaxresponse div").fadeOut("fast", function()
                {
                    $("#ajaxresponse div").remove();
                    $("#ajaxresponse").append($(response).hide().fadeIn());
                });

            }
        });
        return false;
    });
}); 
```

html页面代码：

```
<div class="content">

<a href="request.php?id=1" id="link">

</div> 
```

我没有正确地将数据结构化为 ajax 调用吗？

提前致谢

我可以让它正确返回，但不是以 Ajax 方式，它仍在加载 .php 页面而不是附加它，这是 request.php 方面的事情：

```
 $username = $_GET['id'];

 echo getTemplate($username);

 function getTemplate($username)
   {
return '<div class="box">
    <h1>ID is</h1>
    <div class="meta">username: '.$username.'</div>
</div>';

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:11:53.070

您可以使用这样的实用程序功能

```
function getParameterByName(name,url) {

    var match = RegExp('[?&]' + name + '=([^&]*)')
                    .exec(url);

    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));

} 
```

然后在你的代码中使用它

```
$("#link").click(function(event)
    {
    event.preventDefault();
    var id = getParameterByName('id',$(this).attr('href'));
        $.get("request.php",{id:id},function(response){ 
```

**演示：http:** [//jsfiddle.net/joycse06/dPX2h/](http://jsfiddle.net/joycse06/dPX2h/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:11:24.880

```
{id:+link.attr('id')} 
```

应该

```
{ id: link.attr('id') } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:11:45.167

在任何其他功能之外添加此功能：

```
function getUrlVars(url){

    var vars = [], hash;
    var hashes = url.slice(url.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++){
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

然后使用：

```
getUrlVars($(this).attr("href"))["id"] 
```

代替

```
link.attr('id') 
```

**演示**：http: [//jsfiddle.net/zY9s2/](http://jsfiddle.net/zY9s2/)

# macos - 通过 applescript 访问第三方菜单附加功能（menulets）？

> ID：11081532
> 
> 赞同：0
> 
> 时间：2012-06-18T11:07:09.937
> 
> 标签：macos, applescript, menuitem

是否可以通过 applescript 访问第三方菜单？（这些图标显示在全局菜单栏的右上角）。

我基本上想知道某个菜单项（单击图标时显示）是启用还是禁用（灰显）。

有这方面的资源吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:50:00.590

是的，菜单项具有“启用”属性。对于“灰色”菜单项，该属性为假。例如，我在主菜单栏中显示时钟菜单。如果我想知道每个菜单项的启用属性，我可以这样做......

```
tell application "SystemUIServer" to activate

set theProps to {}
tell application "System Events"
    tell process "SystemUIServer"
        set menulets to menu bar items of menu bar 1
        repeat with aMenu in menulets
            if (description of aMenu) is "clock" then
                click aMenu -- we have to open it to access the menu items inside it
                delay 0.2
                set clockMenuItems to menu items of menu 1 of aMenu
                repeat with aMenuItem in clockMenuItems
                    set end of theProps to {title of aMenuItem, enabled of aMenuItem}
                end repeat
            end if
        end repeat
    end tell
end tell

return theProps 
```

请注意，其中一些菜单不是常规菜单。那些你必须区别对待但概念是一样的。您单击菜单然后访问其菜单项并检查其启用属性。

# asp.net - asp.net Response.Write

> ID：11081533
> 
> 赞同：1
> 
> 时间：2012-06-18T11:07:13.057
> 
> 标签：asp.net

```
 Response.Write("<script>alert('Konaklama Başarıyla Eklendi')</script>");
  string url = "NewAccommodation.aspx?mID=" + mID;
  Response.Redirect(url); 
```

嗨，在上面的代码中，它没有显示警告框，因为它后面的代码行。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:16:51.413

处理极其有限的代码，在我看来，你有两个选择......

重定向到`NewAccommodation.aspx`然后从那里编写“警报”脚本

或发送以下....

```
Response.Write("<script type='text/javascript'>")
Response.Write("alert('Konaklama Başarıyla Eklendi');")
Response.Write("document.location.href='NewAccommodation.aspx?mID=" + mID.ToString() + "';")
Response.Write("</script>") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:12:14.723

你为什么不试试这个

```
 string url = "NewAccommodation.aspx?mID=" + mID;
  Response.Redirect(url); 
```

并将其放在 NewAccommodation.aspx`page_load`

```
if(!IsPostBack)
    Response.Write("<script>alert('Konaklama Başarıyla Eklendi')</script>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:14:33.770

`Response.Redirect`向浏览器发送一个标头，使其导航到另一个 URL。作为它的标头，它位于响应的第一部分，因此它后面的任何不是标头（如您的输出）的内容都不会由浏览器处理。

你可以；

```
Response.Write("<script>alert('Konaklama Başarıyla Eklendi'); location.href='" + url  + "'</script>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:26:37.930

You can try

Response.Write("alert('Konaklama Başarıyla Eklendi'); window.location.href='NewAccommodation.aspx?mID=" + mID +"'");

Happy coding!!!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:13:37.390

你有两个选择

1.  重定向到知道如何显示警报的 URL。您可以在查询字符串中包含一个参数，但不要在查询字符串中包含脚本本身，因为它存在安全风险。
2.  通过设置 window.location.href 属性，在警报后通过脚本进行客户端重定向。

# r - 在 R 数据框中按组应用计算

> ID：11081535
> 
> 赞同：3
> 
> 时间：2012-06-18T10:24:18.940
> 
> 标签：r, aggregation, data.table

我有这样的数据：

```
object category country
495647 1        RUS  
477462 2        GER  
431567 3        USA  
449136 1        RUS  
367260 1        USA  
495649 1        RUS  
477461 2        GER  
431562 3        USA  
449133 2        RUS  
367264 2        USA  
... 
```

其中一个对象以不同的形式出现，`(category, country)`并且国家共享一个类别列表。

我想在其中添加另一列，这将是每个国家/地区的类别权重 - 出现在某个类别的类别中的对象数量，标准化为一个国家/地区内的总和为 1（仅对唯一`(category, country)`对进行总和）。

我可以做类似的事情：

```
aggregate(df$object, list(df$category, df$country), length) 
```

然后从那里计算权重，但是直接在原始数据上执行此操作的更有效和优雅的方法是什么。

所需的示例输出：

```
object category country weight
495647 1        RUS     .75
477462 2        GER     .5 
431567 3        USA     .5 
449136 1        RUS     .75
367260 1        USA     .25
495649 1        RUS     .75
477461 3        GER     .5
431562 3        USA     .5
449133 2        RUS     .25
367264 2        USA     .25
... 
```

对于独特的`(category, country)`配对，上述内容在国家/地区内总计为一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:59:59.067

专门针对最后一句话做出回应：“什么是直接在原始数据上执行此操作的更有效和更优雅的方式。”，恰好[`data.table`](http://datatable.r-forge.r-project.org/)有一个新功能。

```
install.packages("data.table", repos="http://R-Forge.R-project.org")
# Needs version 1.8.1 from R-Forge.  Soon to be released to CRAN. 
```

使用您的数据`DT`：

```
> DT[, countcat:=.N, by=list(country,category)]     # add 'countcat' column
    category country countcat
 1:        1     RUS        3
 2:        2     GER        1
 3:        3     USA        2
 4:        1     RUS        3
 5:        1     USA        1
 6:        1     RUS        3
 7:        3     GER        1
 8:        3     USA        2
 9:        2     RUS        1
10:        2     USA        1

> DT[, weight:=countcat/.N, by=country]     # add 'weight' column
    category country countcat weight
 1:        1     RUS        3   0.75
 2:        2     GER        1   0.50
 3:        3     USA        2   0.50
 4:        1     RUS        3   0.75
 5:        1     USA        1   0.25
 6:        1     RUS        3   0.75
 7:        3     GER        1   0.50
 8:        3     USA        2   0.50
 9:        2     RUS        1   0.25
10:        2     USA        1   0.25 
```

`:=`通过引用数据添加一列，是一个“旧”功能。新功能是它现在可以按组工作。 `.N`是一个符号，它保存每组中的行数。

这些操作是内存高效的，应该扩展到大数据；例如`1e8`，`1e9`行。

如果您不想包含中间列`countcat`，请稍后将其删除。同样，这是一种高效的操作，无论表的大小如何（通过在内部移动指针）都可以立即工作。

```
> DT[,countcat:=NULL]     # remove 'countcat' column
    category country weight
 1:        1     RUS   0.75
 2:        2     GER   0.50
 3:        3     USA   0.50
 4:        1     RUS   0.75
 5:        1     USA   0.25
 6:        1     RUS   0.75
 7:        3     GER   0.50
 8:        3     USA   0.50
 9:        2     RUS   0.25
10:        2     USA   0.25
> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:07:27.370

实际上我前段时间问[了一个类似的问题。](https://stackoverflow.com/questions/8225621/faster-way-to-create-variable-that-aggregates-a-column-by-id)data.table 非常适合这一点，尤其是现在实现了 := by group，并且不再需要自连接 - 如上所示。基数 R 的最佳解决方案是`ave()`. `tapply()`也可以使用。

这类似于上面的解决方案，使用`ave()`. 但是，我强烈建议您查看 data.table。

```
df$count <- ave(x = df$object, df$country, df$category, FUN = length)
df$weight <- ave(x = df$count, df$country, FUN = function(x) x/length(x)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T13:18:11.920

我没有看到一种可读的方式在一行中做到这一点。但它可以非常紧凑。

```
# Use table to get the counts.
counts <- table(df[,2:3])
# Normalize the table
weights <- t(t(counts)/colSums(counts))
# Use 'matrix' selection by names.
df$weight <- weights[as.matrix(df[,2:3])] 
```

# facebook - Facebook - 在 PHP / cURL 中使用/或不使用 API 向朋友发送消息？

> ID：11081539
> 
> 赞同：2
> 
> 时间：2012-06-18T11:07:27.177
> 
> 标签：facebook

显然，使用 Facebook API，您只能阅读用户收件箱，而不能发送消息。无需执行 Javascript 发送对话框。

我正在使用 twilio 创建一个简单的脚本，我可以在其中调用并保存消息。然后将该消息通过电子邮件发送给朋友或我自己。

这已经完成了，而且很容易，但人们不会像查看 Facebook 消息那样经常查看电子邮件。

问题：

是否可以使用 Facebook API，或使用 cURl 或 PHP 中的其他方法自动登录到我的 Facebook 帐户并向朋友发送消息？

我的个人脸书，不是任何人，但我的电子邮件和密码已传递到其中并让脚本自动执行此操作？

这是可能的，还是反对 Facebook 的 TOS 让 php 远程访问并使用我的 FB 帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-27T13:00:30.543

你可以试试 Nimrod：[https ://www.nimrod-messenger.io/](https://www.nimrod-messenger.io/)

如果您想向他们发送消息，您的朋友必须注册并向您提供他们的 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T23:56:34.753

如果今天有人正在寻找类似的解决方案，他们可以[在此处](https://www.twilio.com/messaging-apps)请求访问以将 Twilio 与 Facebook Messenger API 集成。

例如，如果您使用 Twilio 发送 SMS：

[https://www.twilio.com/docs/api/rest/sending-messages](https://www.twilio.com/docs/api/rest/sending-messages)

```
https://www.twilio.com/docs/api/rest/sending-messages

from twilio.rest import TwilioRestClient 

# put your own credentials here 
ACCOUNT_SID = "ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" 
AUTH_TOKEN = "[AuthToken]" 

client = TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN) 

client.messages.create(
    to="+15558675309", 
    from_="+15017250604", 
    body="Hey Jenny! Good luck on the bar exam!", 
    media_url="http://farm2.static.flickr.com/1075/1404618563_3ed9a44a3a.jpg", 
) 
```

然后，您只需对您的 Twilio 代码进行少量更改，即可与 Facebook Messenger 集成。

# java - css子菜单在网站加载时不断刷新

> ID：11081544
> 
> 赞同：0
> 
> 时间：2012-06-18T11:07:48.000
> 
> 标签：java, jquery, css, menu

我在我的网站上遇到此问题的一些原因。

当网站加载时，子菜单会在一秒钟内可见。如果我去那里点击任何其他菜单，我将看到的第一个是子菜单将再次可见一秒钟。我检查了 Firefox、Chrome、safari 到处都是一样的。

我花了很多时间来解决这个问题，但不幸的是我做不到。该页面在这里： http: [//myproperty-solution.co.uk/index.php](http://myproperty-solution.co.uk/index.php)

有人可以帮我看看这个吗？

先感谢您，

问候，

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:21:04.750

所有其他答案都很好但不完整 - 只有在打开 javascript 时才应该隐藏它。当 javascript 关闭时，您仍然应该显示它们。

所以你应该做这样的事情：

```
.js .sf-menu ul {
    display: none;
} 
```

只有当`.js`js打开时，你的身体上才设置一个类，就像这样，在你的`<head>`

```
<script>
<!-- 
    if (document.documentElement && document.getElementById){
        document.documentElement.className += " js";
    }
// -->
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:14:11.650

我检查了您的代码，在您的样式表中添加此代码

```
 .sf-menu ul { display: none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:13:49.973

添加样式=“显示：无；” 到您的子菜单 ul's。

```
<ul class="sf-menu">
    <li><a  href="index.php">Home</a></li>
    <!-- ... -->
    <li><a href="?page=contactus">Contact us</a>
        <ul style="display: none;"> <!-- add style here -->
            <li><a href="#">Commercial</a></li>
            <!-- ... -->
        </ul>
    </li>
</ul> 
```

问题是它们的菜单脚本（superfish）是在[document.ready](http://api.jquery.com/ready/)事件上触发的，该事件发生在页面上的所有元素都加载之后。目前，在触发 ready 事件之前，您的子菜单是可见的。

编辑：正如其他人所说，应该将样式添加到 CSS，而不是直接在元素上使用样式属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:14:01.603

您应该`display:none`在 css 中将它们设置为，以便它们在页面加载时不可见。

*在此处发布您的 CSS 代码，而不是将用户发送到您的网站进行修复。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:15:38.760

我认为这是因为您使用 javascript 控制菜单，并且 javascript 代码在页面加载时起作用。所以有一会儿你的菜单只使用 css。

尝试添加到css文件

```
ul ul { display: none; } 
```

# wpf - 隧道命令

> ID：11081545
> 
> 赞同：1
> 
> 时间：2012-06-18T11:07:49.577
> 
> 标签：wpf, icommand, routed-events, commandbinding, tunneling

我有几个在 ListBox 中实例化的用户控件。我的 Window 中有一个按钮 raises `NavigationCommands.Refresh`，以及一个`CanExecute`允许它执行的处理程序：

```
<Window.CommandBindings>
    <CommandBinding Command="NavigationCommands.Refresh" CanExecute="CanAlwaysExecute" />
</Window.CommandBindings> 
```

在每个动态创建的用户控件（在 ListBox 的 ItemTemplate 中创建）中，我都有一个`NavigationCommands.Refresh`. 当我单击窗口中的按钮时，我在每个用户控件中设置的处理程序是否应该不触发？我需要命令来隧道到每个 UC，但它不是。

```
<UserControl.CommandBindings>
    <CommandBinding Command="NavigationCommands.Refresh" Executed="UpdateStatus" CanExecute="CanAlwaysExecute" />
</UserControl.CommandBindings>
....
<Button Width="200" Text="Refresh All" Command="NavigationCommands.Refresh"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:11:07.830

隧道命令不像那样工作，它们从根到目标站点，它们不会“分裂”。所以它们从窗口开始，到被点击的按钮结束。

# iphone - 针对界面生成器创建 UI 元素和以编程方式创建 UI 元素之间有区别吗

> ID：11081546
> 
> 赞同：1
> 
> 时间：2012-06-18T11:07:49.893
> 
> 标签：iphone, objective-c, ios

当我在设备上测试我的应用程序时，我遇到了一个非常奇怪的问题。我有 2 个与导航控制器连接的视图。我的第一个视图非常简单，只有一个 UIButton。单击此按钮时会切换到第二个视图。我的第二个视图具有以编程方式创建的 UIButtons (>20)。有一个问题，我的切换动画工作得更慢（比它应该的）而且有冲刺。我尝试使用很多 UIButtons 创建相同的 viewController，但使用 Interface Builder 并且我的动画工作正常！这个问题只有在我在真实设备上测试应用程序时才会遇到，在模拟器中所有这些变体都可以正常工作。这两种创建 UI 元素的变体有什么不同吗？以及如何通过编程方式创建包含许多 UI 元素的视图来解决这个问题（我更喜欢这种方式）。

**Edit1** 我有一个超类是 UIButton 的类。这是实现：

```
#import <QuartzCore/QuartzCore.h>
#import "UIHouseButtons.h"

@implementation UIHouseButtons 

- (id)initWithFrame:(CGRect)frame
{  
self = [super initWithFrame:frame];
if (self) {
    self = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    UIImage *buttonImageNormal = [UIImage imageNamed:@"stateNormal.png"];
    UIImage *strechableButtonImageNormal = [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [self setBackgroundImage:strechableButtonImageNormal forState:UIControlStateNormal];
    UIImage *buttonImagePressed = [UIImage imageNamed:@"stateNormal.png"];
    UIImage *strechableButtonImagePressed = [buttonImagePressed stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [self setBackgroundImage:strechableButtonImagePressed forState:UIControlStateHighlighted];
    [[self layer] setCornerRadius:4.0f];
    [[self layer] setMasksToBounds:YES];
    [self.titleLabel setFont:[UIFont fontWithName:@"Times New Roman" size:15.0f]];
    self.frame = frame;
}
return self;
} 
```

在我的第二个视图控制器中的`-loadView`方法之后：

```
UIHouseButtons *homeButton = [[UIHouseButtons alloc] initWithFrame:CGRectMake(435.0f, 5.0f, 40.0f, 25.0f)];
[homeButton setTitle:@"H" forState:UIControlStateNormal];
[self.view addSubview:homeButton]; 
```

同样的20次。

**编辑 2**编辑了我的 UIButtons 类：

```
- (id)init
{
self = [super init];
if (self) {
    self = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    //self.backgroundColor = [UIColor clearColor];
    UIImage *buttonImageNormal = [UIImage imageNamed:@"stateNormal.png"];
    UIImage *strechableButtonImageNormal = [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [self setBackgroundImage:strechableButtonImageNormal forState:UIControlStateNormal];
    UIImage *buttonImagePressed = [UIImage imageNamed:@"stateNormal.png"];
    UIImage *strechableButtonImagePressed = [buttonImagePressed stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [self setBackgroundImage:strechableButtonImagePressed forState:UIControlStateHighlighted];
    [[self layer] setCornerRadius:4.0f];
    [[self layer] setMasksToBounds:YES];
    [self.titleLabel setFont:[UIFont fontWithName:@"Times New Roman" size:15.0f]];
    self.layer.shouldRasterize = YES;
    self.layer.rasterizationScale = [[UIScreen mainScreen] scale];
}
return self;
} 
```

我的`-viewDidLoad`：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.button1 = [[UIHouseButtons alloc] init];
self.button2 = [[UIHouseButtons alloc] init];
self.button3 = [[UIHouseButtons alloc] init];
self.button4 = [[UIHouseButtons alloc] init];
//and more 20 times

[self.view addSubview:self.button1];
[self.view addSubview:self.button2];
[self.view addSubview:self.button3];
[self.view addSubview:self.button4];
//and more 20 times
} 
```

我的`viewWillAppear`：

```
-(void)viewWillAppear:(BOOL)animated {
[self.button1 setFrame:CGRectMake(13.0f, 5.0f, 30.0f, 30.0f)];
[self.button2 setFrame:CGRectMake(57.0f, 5.0f, 30.0f, 30.0f)];
[self.button3 setFrame:CGRectMake(99.0f, 5.0f, 30.0f, 30.0f)];
[self.button4 setFrame:CGRectMake(141.0f, 5.0f, 30.0f, 30.0f)];
//and more 20 times
[super viewWillAppear:animated];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:19:26.540

您在模拟器中的速度没有问题，因为模拟器是 iPhone/iPad 的模拟器，而不是 iPhone/iPad 硬件的模拟器，它使用您计算机的 CPU 和 RAM。
只要您在以编程方式进行操作时遵守一些规则，创建控件的性能应该没有任何差异，这些规则是：
如果您不使用 nib 文件，请覆盖该方法`-loadView`并在其中仅创建一个`UIView`并设置它到`self.view`.
然后在`-viewDidLoad`方法中初始化您的视图层次结构-您的子视图`self.view`，它们的子视图（按钮/标签/等..）。如果你有硬编码的帧值，你可以在这里设置它们，但不要指望这个，因为在这种方法中，视图层次结构还没有正确设置。然后在`-viewWillAppear:animated`方法调整所有几何图形并仅执行轻量级操作，因为此方法应尽可能快地返回（否则您在呈现时可能会遇到故障）..
**更新：**
从您的代码片段更新中，我可以看到您的按钮层有圆角。这可能会成为性能问题，尤其是当按钮位于 UIScrollView 中时。`UIHouseButtons.m`将所有按钮的图层设置为在文件中栅格化

```
self.layer.rasterizationScale = [[UIScreen mainScreen] scale]; //Add this if using images to adjust the proper rasterization scale for them.
self.layer.shouldRasterize = YES; 
```

# c# - 如何将字符串转换为字符串[]？

> ID：11081549
> 
> 赞同：74
> 
> 时间：2012-06-18T11:07:57.220
> 
> 标签：c#

如何将`string`类型转换为`string[]`C# 中的类型？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-06-18T11:11:29.670

`string[]`是一个字符串数组（向量） `string`只是一个字符串（一个字符列表/数组）

根据您要如何转换它，规范的答案可能是：

## 字符串[] -> 字符串

```
return String.Join(" ", myStringArray); 
```

## 字符串->字符串[]

```
return new []{ myString }; 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-18T11:10:57.610

数组是相同类型数据的固定集合，这些数据连续存储并且可以通过索引（从零开始）访问。

字符串是一个字符序列。

因此 a`String[]`是 的集合`Strings`。

例如：

```
String foo = "Foo";  // one instance of String
String[] foos = new String[] { "Foo1", "Foo2", "Foo3" };
String firstFoo = foos[0];  // "Foo1" 
```

[数组（C# 编程指南）](http://msdn.microsoft.com/en-us/library/9b9dty7d%28v=vs.100%29.aspx)

**编辑**：所以显然没有直接的方法可以将单曲转换为单曲`String`，`String[]` 反之亦然。尽管您可以使用分隔符（例如逗号）从 a[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)中获取 a 。`String[]``String`

要将 a “转换”`String[]`为 a `String`（相反），您可以使用[`String.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx). 您需要指定如何加入这些字符串（fe 和逗号）。

这是一个例子：

```
var foos = "Foo1,Foo2,Foo3";
var fooArray = foos.Split(',');  // now you have an array of 3 strings
foos = String.Join(",", fooArray); // now you have the same as in the first line 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-12-14T16:33:33.620

如果您想将包含所有字符的字符串转换`"Mohammad"`为`String[]`，`String`这可能会对您有所帮助：

```
"Mohammad".ToCharArray().Select(c => c.ToString()).ToArray() 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-06-18T11:11:14.877

您可以创建一个`string[]`包含您`string`喜欢的（字符串数组）：

```
string someString = "something";
string[] stringArray = new string[]{ someString }; 
```

该变量`stringArray`现在的长度为 1 并包含`someString`.

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-07-26T14:03:25.330

要将具有逗号分隔值的字符串转换为字符串数组，请使用`Split`：

```
string strOne = "One,Two,Three,Four";
string[] strArrayOne = new string[] {""};
//somewhere in your code
strArrayOne = strOne.Split(','); 
```

结果将是一个包含四个字符串的字符串数组：

> {“一二三四”}

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-18T11:10:26.503

zerkms 告诉你区别。如果您愿意，可以将字符串“转换”为长度为 1 的字符串数组。

例如，如果您想将字符串作为参数发送，您可以这样做：

```
var myString = "Test";

MethodThatRequiresStringArrayAsParameter( new[]{myString} ); 
```

老实说，除了满足方法参数之外，我看不出进行转换的任何其他原因，但如果这是另一个原因，您将不得不提供一些有关您要完成的工作的信息，因为可能有更好的解决方案。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-18T11:08:46.970

`string`是一个字符串，并且`string[]`是一个字符串数组

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-18T11:09:09.310

A`string`是一个字符串，a`string[]`是一个字符串数组。这意味着它是一个包含多个字符串的变量。

尽管您可以将 a 转换`string`为 a `string[]`（创建一个包含一个元素的字符串数组），但这可能表明您正在尝试做一些您不应该做的事情。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-06-18T08:29:16.980

强制转换还可以帮助将字符串转换为字符串 []。在这种情况下，演示了使用 ToArray() 转换字符串：

```
String myString = "My String";
String[] myString.Cast<char>().Cast<string>().ToArray(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-18T11:10:00.497

一个字符串保存一个值，但一个 string[] 保存许多字符串，因为它是一个字符串数组。

[在这里](http://msdn.microsoft.com/en-us/library/a3hd7ste.aspx)查看更多

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-18T11:54:39.350

如果您只是一个初学者并且想将一个字符串拆分为一个字母数组但不知道正确的术语是 char[];

```
String myString = "My String";
char[] characters = myString.ToCharArray(); 
```

如果这不是您想要的，抱歉浪费您的时间：P

# kohana - Kohana 路由 - 不断将我重定向到 localhost/xampp

> ID：11081552
> 
> 赞同：0
> 
> 时间：2012-06-18T11:08:13.773
> 
> 标签：kohana, xampp, url-routing

我有一个在 Kohana 开发的网站；我从 ftp 下载它，并尝试在我的本地主机上运行它。我更改了数据库凭据以及 bootstrap.php - 我更改了 Kohana::init 函数中的 base_url() （因为我的本地路径是`http://localhost:81`）。

当我运行该站点时，inedx 页面正确加载，但是无论我单击索引页面上的哪个链接，它都会将我重定向到`http://localhost:81/xampp/`

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:32:31.553

解决了它 - htaccess 是问题所在。代替

```
RewriteBase / 
```

我写

```
RewriteBase /folder_of_my_webapp/ 
```

现在它开始工作了！

# json - 是否应该保留 JSON null？

> ID：11081555
> 
> 赞同：1
> 
> 时间：2012-06-18T11:08:30.970
> 
> 标签：json

我试图转换 JSON 数据

```
{
  "a": {
    "b": null
  }
} 
```

[使用在线转换器转换](http://jsontoxml.utilities-online.info/)为 XML 。回应是

```
<a>
  <b />
</a> 
```

使用相同的转换器将其转换回 JSON 给了我

```
{
  "a": {

  }
} 
```

这让我想知道——如果你明确地给了一个空值，你在处理 JSON 时是否需要保留它？我相当肯定 XML*不*等同于，尤其`<a><b /></a>`是不等同于（当我继续进行相同的练习时，这恰好是我得到的）。*`<a></a>``<a />`*

 *换句话说，如果我收到了来源不明的 JSON 并且应该将其交给未知的接收者，我是否需要保留空值，或者我可以安全地删除它们吗？相反，我可以依靠我的空值以与第三方软件交付时输出它们的方式相同的方式结束吗？

这里有一个类似的问题：[JSON 是否应该包含空值](https://stackoverflow.com/questions/11003424/should-json-include-null-values)——但是，问题是如果*您自己定义格式*，代码是否应该输出空值，而不是如果您对原始格式一无所知，您应该做什么。

**编辑 - 澄清：**我问这个问题的方式很糟糕，显然引起了混乱。换个说法：我*确实*理解 XML 和 JSON 是不同的格式，并且能够携带不同种类的（元）数据。我*知道***null**是一个有效值，如[RFC4627](http://www.ietf.org/rfc/rfc4627.txt?number=4627)所定义。我*确实*了解在 XML 和 JSON 之间进行转换有不同的方法，因为这些格式没有一对一的关系。我*明白*我发现的转换器可能有问题。然而，*同一个*转换器在两个方向上都没有提供相同的转换（从转换`"b": null`到`<b />`并且可以在相反的方向进行类似的翻译）让我想知道尽管尝试了但我找不到答案的事情：

*   根据 JSON 标准，在代表其他软件传输它们时将`{"a":{"b":null}}`和视为同一个对象是否合法？`{"a":{}}`

请注意，我在这里假设添加或删除我认为合适的空格是合法的（例如，漂亮的打印，根据 RFC4627 可以），甚至重新排列集合中的名称/值对（再次根据 RFC4627 ）。我只是不知道**null**是否必须以与重要数据相同的方式保留，或者可以以与无关紧要的空白相同的方式删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:14:57.950

是的，null 是 JSON 中的一个单独值，显然与没有属性不同。此外，您可以看到有关 XML 中的空值的[问题。](https://stackoverflow.com/questions/774192/what-is-the-correct-way-to-represent-null-xml-elements)这里要总结的不是 JSON 或 XML 有什么问题，而只是你使用的工具没有编码来处理这些情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:05:44.110

将 JSON 转换为 XML 的问题之一是，如果您尝试使转换无损，您最终会得到有点“不自然”的 XML，而如果您尝试创建最自然的 XML 表示，它最终会丢失信息。这就是为什么有许多不同的转换器都以稍微不同的方式来做这件事的原因。选择符合您要求的一种。*

# constructor - 在两个构造函数之间共享代码时要考虑哪些方法

> ID：11081556
> 
> 赞同：0
> 
> 时间：2012-06-18T11:08:31.587
> 
> 标签：constructor

假设我们有：

```
class Dictionary {
    int n;
    int *ints;
    char **strs;
    inline void init(int n);
public:
    Dictionary(int n);
    Dictionary(const Dictionary& dic);
}; 
```

和 ：

```
Dictionary::Dictionary(int n) {
    init(n);
}

void Dictionary::init(int n) {
    this->n=n;
    ints=new int[n];
    strs=new char*[n];
}
Dictionary::Dictionary(const Dictionary& dic){
    init(n);
    for (int i=0;i<n;i++) {
        ints[i]=dic.ints[i];
        strs[i]=dic.strs[i];
    }
} 
```

有没有更有效的方法来共享 init 中的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:38:12.603

在标题中：

```
class Dictionary {
    int n;
    int *ints;
    char **strs;
    inline void init(int n) {
        this->n=n;
        ints=new int[n];
        strs=new char*[n];
    }

public:
    Dictionary(int n);
    Dictionary(const Dictionary& dic);
}; 
```

其他地方：

```
Dictionary::Dictionary(int n) {
    init(n);
}

Dictionary::Dictionary(const Dictionary& dic){
    init(n);
    for (int i=0;i<n;i++) {
        ints[i]=dic.ints[i];
        strs[i]=dic.strs[i];
    }
} 
```

为了提高效率，更有可能内联共享代码。

# google-maps-api-3 - 谷歌多边形地图背景颜色透明，周边区域半透明叠加

> ID：11081557
> 
> 赞同：1
> 
> 时间：2012-06-18T11:08:40.653
> 
> 标签：google-maps-api-3, polygon

我正在尝试复制类似于以下地图的内容，其中多边形区域是透明的，而周围区域是半透明的：

![在此处输入图像描述](../Images/79585438be6148699a56ed125ae267fd.png)

有人能帮忙吗？

这是原文： [https ://energyeasy.ue.com.au/outages/powerOutages](https://energyeasy.ue.com.au/outages/powerOutages)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T04:18:18.430

使用一些 CSS 和一个大的 512 x 512px png 我已经设法模仿我想要实现的目标。我相信会有更准确的方法，但这对我有用。

[http://www.syn-rg.com.au/Development/United-Energy/mg_map/MG_Area_map_02.html](http://www.syn-rg.com.au/Development/United-Energy/mg_map/MG_Area_map_02.html)

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0; }
      #map_canvas {
    background-color: #EAEAEA;
    border: 1px solid #CCCCCC;
    height: 400px;
    margin-bottom: 10px;
    margin-left: auto;
    margin-right: auto;
    width: 532px;
}
#map_canvas div div div div div img{ border:1000px solid black;margin:-1000px -1000px;}
/*#map_canvas div div div div div div div{ background: none repeat scroll 0px 0px rgba(0, 0, 0, 0.5);}*/
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyA7UaoyrY4KyoW1iEU0KFo0ZOxH5w30oZ8&sensor=true"></script>
    <script type="text/javascript">
var overlay;
USGSOverlay.prototype = new google.maps.OverlayView();

function initialize() {
    var myLatLng = new google.maps.LatLng(-37.815676, 145.449005);
    var myOptions = {
        zoom: 9,
        center: myLatLng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var swBound = new google.maps.LatLng(-38.269876, 144.842405); // Latitude, Longitude = 182.749 or 107.183 or 108.4443 or 107.77615
    var neBound = new google.maps.LatLng(-37.161476, 146.249005); //  -0.5542, +0.7033 = 256px
    //var swBound = new google.maps.LatLng(-37.783, 144.966); 
    //var neBound = new google.maps.LatLng(-37.225, 145.66930); 
    //var swBound = new google.maps.LatLng(62.281819, -150.287132);
    //var neBound = new google.maps.LatLng(62.400471, -150.005608);
    var bounds = new google.maps.LatLngBounds(swBound, neBound);
    // Photograph courtesy of the U.S. Geological Survey
    var srcImage = 'images/mg_map_full.png';
    overlay = new USGSOverlay(bounds, srcImage, map);
}

function USGSOverlay(bounds, image, map) {
    // Now initialize all properties.
    this.bounds_ = bounds;
    this.image_ = image;
    this.map_ = map;
    // We define a property to hold the image's div. We'll
    // actually create this div upon receipt of the onAdd()
    // method so we'll leave it null for now.
    this.div_ = null;
    // Explicitly call setMap on this overlay
    this.setMap(map);
}
USGSOverlay.prototype.onAdd = function () {
    // Note: an overlay's receipt of onAdd() indicates that
    // the map's panes are now available for attaching
    // the overlay to the map via the DOM.
    // Create the DIV and set some basic attributes.
    var div = document.createElement('div');
    div.style.borderStyle = "none";
    div.style.borderWidth = "0";
    div.style.borderColor = "red";
    div.style.position = "absolute";
    div.style.opacity = "0.3";
    // Create an IMG element and attach it to the DIV.
    var img = document.createElement("img");
    img.src = this.image_;
    img.style.width = "100%";
    img.style.height = "100%";
    img.style.position = 'absolute';
    div.appendChild(img);
    // Set the overlay's div_ property to this DIV
    this.div_ = div;
    // We add an overlay to a map via one of the map's panes.
    // We'll add this overlay to the overlayImage pane.
    var panes = this.getPanes();
    panes.overlayImage.appendChild(div);
}
USGSOverlay.prototype.draw = function () {
    // Size and position the overlay. We use a southwest and northeast
    // position of the overlay to peg it to the correct position and size.
    // We need to retrieve the projection from this overlay to do this.
    var overlayProjection = this.getProjection();
    // Retrieve the southwest and northeast coordinates of this overlay
    // in latlngs and convert them to pixels coordinates.
    // We'll use these coordinates to resize the DIV.
    var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
    var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());
    // Resize the image's DIV to fit the indicated dimensions.
    var div = this.div_;
    div.style.left = sw.x + 'px';
    div.style.top = ne.y + 'px';
    div.style.width = (ne.x - sw.x) + 'px';
    div.style.height = (sw.y - ne.y) + 'px';
}
USGSOverlay.prototype.onRemove = function () {
    this.div_.parentNode.removeChild(this.div_);
    this.div_ = null;
}
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="position: relative; background-color: rgb(229, 227, 223); overflow: hidden;"></div>
  </body>
</html> 
```

# freebase - freebase - 获取人的描述

> ID：11081570
> 
> 赞同：2
> 
> 时间：2012-06-18T11:09:17.987
> 
> 标签：freebase

我有以下 MQL 查询，它成功返回了威廉莎士比亚的记录。

```
[{
  "/type/object/name": null,
  "/type/object/id": "/en/william_shakespeare"
}]​ 
```

[http://tinyurl.com/cnpma3f](http://tinyurl.com/cnpma3f)

我正在尝试获取描述属性。当我添加“description”：null 时，出现“未找到描述属性”错误。然而，看看 freebase 中的记录，它应该在那里：

[http://www.freebase.com/experimental/topic/standard/en/william_shakespeare](http://www.freebase.com/experimental/topic/standard/en/william_shakespeare)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:01:34.580

主题 API 汇总了多个 Freebase 服务的结果；描述与主题的其他数据分开存储，您必须使用[文本服务](http://wiki.freebase.com/wiki/ApiText)来获取它们，而不是直接使用 MQL。

顺便说一句，您可能应该考虑改用[新的 Freebase API](http://wiki.freebase.com/wiki/Freebase_API)；在 (www|api).freebase.com 上托管的那些已被弃用，并且（据称）将在 10 月份关闭。

# sql - 如何将 datetime2 转换为 datetime

> ID：11081571
> 
> 赞同：7
> 
> 时间：2012-06-18T11:09:23.120
> 
> 标签：sql, datetime, ssis

我正在尝试将 datetime2 转换为 datetime 以便仅使用 SQL 或 SSIS 在不同源之间创建标准以以下 SQL 查询为例：

```
SELECT CAST(offer_start_date AS timestamp)
FROM [ODS].[macaclient_offers] 
```

我收到以下错误：“不允许从数据类型 datetime2 到时间戳的显式转换。”

此外，我确实设法使用简单的转换将 datetime2 转换为日期。

使用 SQL Server 2008 或 SSIS 将 datetime2 转换为 datetime 的正确方法是什么？

吉利比

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T11:25:00.817

您正在`timestamp`代码中转换。更改为`datetime`。

```
SELECT CAST(offer_start_date AS datetime) FROM [ODS].[macaclient_offers] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T11:24:53.870

您的示例选择语句试图将 offer_start_date 转换为时间戳而不是日期时间。

如果您确实需要 datetime2 列中的时间戳值，您可以使用 DatePart 函数来检索部分日期并自己构建它。

例如：

```
declare @date datetime2
set @date = GETUTCDATE()

select @date,
       DATEPART(hour, @date),
       DATEPART(minute, @date),
       DATEPART(second, @date) 
```

MSDN 对[DatePart](http://msdn.microsoft.com/en-us/library/ms174420.aspx)函数的引用。

不知道你为什么会收到这个错误，我没有遇到同样的问题。下面的示例在我的 2008 Management Studio 中运行良好。

```
create table #temp
(
    OrderId int,
    OrderDate datetime2
)

insert into #temp
(OrderId, OrderDate)
values
(1, GetUTCDate())

select *, CAST(OrderDate as datetime)
from #temp

drop table #temp 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-24T17:00:19.670

在我的情况下，价值是 a `varchar`。

如果值为 a `varchar`of `datetime2`, like `'2018-10-24 12:06:29.6112233'`，则先将其转换为 a `datetime2`，然后再转换为 a `datetime`：

```
select cast(cast('2018-10-24 12:06:29.6112233' as datetime2) as datetime) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:30:15.983

好的，我设法使用 SSIS 数据转换组件来实现这一点。我发现我可以使用 DT_DBTIME2 或 DT_DBTIME

感谢所有帮助过的人

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-07T22:36:08.313

> convert(datetime, convert(varchar(4),datepart(year,table_field))+'-'+ convert(varchar(2),datepart(month,table_field))+'-'+ convert(varchar(2),datepart (dd,table_field )) ) 当 table_field 为 datetime2 类型时

# c++ - 将变量作为模板参数传递

> ID：11081573
> 
> 赞同：30
> 
> 时间：2012-06-18T11:09:31.730
> 
> 标签：c++, templates

我正在使用一个库，它公开了一个可以使用的接口。这个库的功能之一是这样的：

```
template <int a>
void modify(){} 
```

我必须修改从 1 到 10 的参数，即使用从 1 到 10`modify`的模板参数调用。为此，我编写了这段代码（代码的基本版本，实际代码要大得多）。

```
for(int i=0; i<10; i++){
    modify<i>();
} 
```

在编译时我收到以下错误

```
error: 'i' cannot appear in constant-expression 
```

在浏览了互联网上的一些链接之后，我开始知道我不能将任何值作为模板参数传递，而模板参数在编译时不会被评估。我的问题如下： 1.为什么编译器不能`i`在编译时评估？2\. 在不改变 API 接口的情况下，还有其他方法可以实现我想要实现的目标吗？

* * *

还有一件事我想做。调用 modify as modify 其中 VAR 是某些函数计算的输出。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-18T11:25:05.807

*编译时i*（不是常数）的值是多少？除非执行循环，否则无法回答。但是执行不是“编译”，因为没有答案，编译器无法做到这一点。

模板不是要执行的算法，而是要扩展以生成代码的宏。您可以做的是依靠专业化通过递归来实现迭代，如下所示：

```
#include <iostream>

template<int i>
void modify()
{ std::cout << "modify<"<<i<<">"<< std::endl; }

template<int x, int to>
struct static_for
{
    void operator()() 
    {  modify<x>();  static_for<x+1,to>()(); }
};

template<int to>
struct static_for<to,to>
{
    void operator()() 
    {}
};

int main()
{
    static_for<0,10>()();
} 
```

请注意，通过这样做，您实际上是在实例化 10 个名为 `modify<0>`...的函数，它们`modify<9>`分别由`static_for<0,10>::operator()`...调用`static_for<9,10>::operator()`。

迭代结束，因为`static_for<10,10>`将从采用两个相同值的特化中实例化，什么都不做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T11:25:47.143

1.  “为什么编译器不能`i`在编译时评估？”

    这将违背模板的目的。模板适用于源代码在某些情况下看起来相同的情况，但编译器需要生成的指令每次都不同。

2.  “在不更改 API 接口的情况下，还有其他方法可以实现我想要实现的目标吗？”

    是的，看看[Boost.MPL](http://www.boost.org/doc/libs/1_49_0/libs/mpl/doc/index.html)。

    但是我怀疑这里的正确答案是您想要更改 API。这取决于`modify`函数的内部结构。我知道你有它的来源，因为模板必须在标题中定义。所以看看为什么它需要`i`在编译时知道，如果不需要，最好用带参数的普通函数替换（或补充，如果你需要保持向后兼容性）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T12:23:17.057

[由于您使用Boost.MPL](http://www.boost.org/libs/mpl)要求答案：

```
#include <boost/mpl/for_each.hpp>
#include <boost/mpl/range_c.hpp>

#include <iostream>

template <int N>
void modify()
{
    std::cout << N << '\n';
}

// You need to wrap your function template in a non-template functor
struct modify_t
{
    template <typename N>
    void operator()(N)
    {
        modify<N::value>();
    }
};

int main()
{
    namespace mpl = boost::mpl;

    mpl::for_each< mpl::range_c<int,0,10> >( modify_t() ); // prints 0 to 9
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-07T23:09:57.937

不使用**struct**或**Boost**也可以这样做：

```
#include <iostream>
#include <utility>

template <int a>
void modify()
{
    std::cout<<a<<",";
}

template<int i,size_t... t>
constexpr inline void CT_for_impl(std::integer_sequence<size_t,t...>)
{
    bool kai[]= { (modify<i+t>(), false)...};
}

template<int i,int n>
constexpr inline void CT_for()
{
    CT_for_impl<i>(std::make_index_sequence<n-i+1>());
}

int main()
{
    CT_for<-5,5>();
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-01T06:26:44.477

**错误解决方案：对于上述问题，'i' 不能出现在常量表达式中**

[要了解 constexpr，请单击此链接](http://en.cppreference.com/w/cpp/language/constexpr)

```
#include <iostream>
using namespace std;

template <typename T>
void modify(T a)
{
    cout<<a<<endl;  //to check if its working 
}

//func converts int a into const int a
constexpr int func(int a)
{
    return a;
}

int main(){
    for(int i=0; i<10; i++){
        modify(func(i));//here passing func(i) returned value which can be used as template argument now as it is converted to constexpr    
}
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-01T06:50:07.680

鉴于您想通过索引在运行时调用函数并且您无法更改 API，您可以考虑类型擦除：

```
std::vector<std::function<void(int)> > func;
func.push_back(modify<1>);
func.push_back(modify<2>);
//... and so on ...
func.push_back(modify<10>);

for(int i=0; i<10; ++i)
{
    func[i]();  //calls modify<i+1>();
} 
```

需要提及的几点：

*   这不是模板的主要用途，但它是将静态库带入运行时世界的一种方式。对此的基本要求是使用同质类型（--如果`modify<7>()`会返回，比如说，`std::string`整个方法会中断）。
*   先前使用类型擦除的解决方案有开销。使用函数指针可能会更快，但它总是比在编译时调用函数要慢。
*   也可以（并且应该）将`push_back`s 包装到另一个迭代静态函数中，以避免手动调用。

# gwt - GWT 打包到战争：Ant 有错误的 java 版本吗？

> ID：11081583
> 
> 赞同：0
> 
> 时间：2012-06-18T11:10:07.207
> 
> 标签：gwt, ant, packaging

我想将我的 GWT 2.3 应用程序打包到一个 war 文件中，并将其部署在 weblogic 服务器上。我用 ANT [http://www.rubiconred.com/blog/build-package-a-gwt-app-to-war-using-ant/](http://www.rubiconred.com/blog/build-package-a-gwt-app-to-war-using-ant/)找到了这个解决方案。但有一个问题。编译目标抛出一个错误，在我看来 ANT 使用了错误的 Java 版本。但是当我运行时 -> Ant Build... -> JRE 版本是正确的（1.6.0_11）。所以[这个](https://stackoverflow.com/questions/949678/ant-is-using-wrong-java-version)问题的解决方案不起作用。而且我还不确定java版本是否是问题所在。

控制台输出如下所示：

```
Buildfile: C:\projects\logdashboard\LogDashboard\warbuilder.xml
prepare:
compile:
    [javac] Compiling 124 source files to C:\projects\logdashboard\LogDashboard\build
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\dto\ApplicationDto.java:22: package javax.validation.constraints does not exist
    [javac] import javax.validation.constraints.Pattern;
    [javac]                                    ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\dto\UserDto.java:20: package javax.validation.constraints does not exist
    [javac] import javax.validation.constraints.Pattern;
    [javac]                                    ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\ValidatorFactory.java:18: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: package javax.validation
    [javac] import javax.validation.Validator;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\ValidatorFactory.java:36: cannot access javax.validation.ValidatorFactory
    [javac] class file for javax.validation.ValidatorFactory not found
    [javac] public class ValidatorFactory extends AbstractGwtValidatorFactory {
    [javac]        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\ValidatorFactory.java:71: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: class com.roche.research.logdashboard.client.ValidatorFactory
    [javac]     public interface GwtValidator extends Validator {
    [javac]                                           ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\activity\ApplicationAddPresenter.java:22: cannot find symbol
    [javac] symbol  : class ConstraintViolation
    [javac] location: package javax.validation
    [javac] import javax.validation.ConstraintViolation;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\activity\ApplicationAddPresenter.java:23: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: package javax.validation
    [javac] import javax.validation.Validator;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationAddViewImpl.java:25: cannot find symbol
    [javac] symbol  : class Validation
    [javac] location: package javax.validation
    [javac] import javax.validation.Validation;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationEditViewImpl.java:25: cannot find symbol
    [javac] symbol  : class Validation
    [javac] location: package javax.validation
    [javac] import javax.validation.Validation;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserAddViewImpl.java:23: cannot find symbol
    [javac] symbol  : class Validation
    [javac] location: package javax.validation
    [javac] import javax.validation.Validation;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserEditViewImpl.java:23: cannot find symbol
    [javac] symbol  : class Validation
    [javac] location: package javax.validation
    [javac] import javax.validation.Validation;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:23: package com.ibm.icu.text does not exist
    [javac] import com.ibm.icu.text.SimpleDateFormat;
    [javac]                        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\LogFileUtil.java:22: package org.apache.commons.lang.time does not exist
    [javac] import org.apache.commons.lang.time.DateUtils;
    [javac]                                    ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\AutoinjectingRemoteServlet.java:19: package javax.servlet does not exist
    [javac] import javax.servlet.ServletConfig;
    [javac]                     ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\AutoinjectingRemoteServlet.java:20: package javax.servlet does not exist
    [javac] import javax.servlet.ServletException;
    [javac]                     ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\AutoinjectingRemoteServlet.java:38: cannot access javax.servlet.http.HttpServlet
    [javac] class file for javax.servlet.http.HttpServlet not found
    [javac] public class AutoinjectingRemoteServlet extends RemoteServiceServlet {
    [javac]        ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\AutoinjectingRemoteServlet.java:55: cannot find symbol
    [javac] symbol  : class ServletConfig
    [javac] location: class com.roche.research.logdashboard.shared.AutoinjectingRemoteServlet
    [javac]     public void init(ServletConfig config) throws ServletException {
    [javac]                      ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\AutoinjectingRemoteServlet.java:55: cannot find symbol
    [javac] symbol  : class ServletException
    [javac] location: class com.roche.research.logdashboard.shared.AutoinjectingRemoteServlet
    [javac]     public void init(ServletConfig config) throws ServletException {
    [javac]                                                   ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\ValidationUtil.java:43: cannot find symbol
    [javac] symbol  : class ConstraintViolation
    [javac] location: class com.roche.research.logdashboard.shared.ValidationUtil<T>
    [javac]     public String getErrorMessage(Set<ConstraintViolation<T>> violations) {
    [javac]                                       ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\dto\ApplicationDto.java:46: cannot find symbol
    [javac] symbol  : class Pattern
    [javac] location: class com.roche.research.logdashboard.shared.dto.ApplicationDto
    [javac]     @Pattern(regexp = "^(http|ftp|https){1}://.*$", message = "This is no correct url.")
    [javac]      ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\shared\dto\UserDto.java:47: cannot find symbol
    [javac] symbol  : class Pattern
    [javac] location: class com.roche.research.logdashboard.shared.dto.UserDto
    [javac]     @Pattern(regexp = "^.+\\..+@roche.com$", message = "This is no roche email adresse.")
    [javac]      ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\ValidatorFactory.java:40: method does not override or implement a method from a supertype
    [javac]     @Override
    [javac]     ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\activity\ApplicationAddPresenter.java:118: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: class com.roche.research.logdashboard.client.activity.ApplicationAddPresenter
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\activity\ApplicationAddPresenter.java:119: cannot find symbol
    [javac] symbol  : class ConstraintViolation
    [javac] location: class com.roche.research.logdashboard.client.activity.ApplicationAddPresenter
    [javac]         Set<ConstraintViolation<ApplicationDto>> violations = validator.validate(applicationDto);
    [javac]             ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationAddViewImpl.java:174: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: class com.roche.research.logdashboard.client.view.ApplicationAddViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationAddViewImpl.java:174: cannot find symbol
    [javac] symbol  : variable Validation
    [javac] location: class com.roche.research.logdashboard.client.view.ApplicationAddViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]                               ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationAddViewImpl.java:175: cannot find symbol
    [javac] symbol  : class ConstraintViolation
    [javac] location: class com.roche.research.logdashboard.client.view.ApplicationAddViewImpl
    [javac]         Set<ConstraintViolation<ApplicationDto>> violations = validator.validateProperty(application, "url");
    [javac]             ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationEditViewImpl.java:182: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: class com.roche.research.logdashboard.client.view.ApplicationEditViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationEditViewImpl.java:182: cannot find symbol
    [javac] symbol  : variable Validation
    [javac] location: class com.roche.research.logdashboard.client.view.ApplicationEditViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]                               ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\ApplicationEditViewImpl.java:183: cannot find symbol
    [javac] symbol  : class ConstraintViolation
    [javac] location: class com.roche.research.logdashboard.client.view.ApplicationEditViewImpl
    [javac]         Set<ConstraintViolation<ApplicationDto>> violations = validator.validateProperty(application, "url");
    [javac]             ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserAddViewImpl.java:149: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: class com.roche.research.logdashboard.client.view.UserAddViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserAddViewImpl.java:149: cannot find symbol
    [javac] symbol  : variable Validation
    [javac] location: class com.roche.research.logdashboard.client.view.UserAddViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]                               ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserAddViewImpl.java:150: cannot find symbol
    [javac] symbol  : class ConstraintViolation
    [javac] location: class com.roche.research.logdashboard.client.view.UserAddViewImpl
    [javac]         Set<ConstraintViolation<UserDto>> violations = validator.validateProperty(user, "email");
    [javac]             ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserEditViewImpl.java:155: cannot find symbol
    [javac] symbol  : class Validator
    [javac] location: class com.roche.research.logdashboard.client.view.UserEditViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserEditViewImpl.java:155: cannot find symbol
    [javac] symbol  : variable Validation
    [javac] location: class com.roche.research.logdashboard.client.view.UserEditViewImpl
    [javac]         Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
    [javac]                               ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\client\view\UserEditViewImpl.java:156: cannot find symbol
    [javac] symbol  : class ConstraintViolation
    [javac] location: class com.roche.research.logdashboard.client.view.UserEditViewImpl
    [javac]         Set<ConstraintViolation<UserDto>> violations = validator.validateProperty(user, "email");
    [javac]             ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:50: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGFILE_EXTENSION_DATE_PATTERN"));
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:50: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGFILE_EXTENSION_DATE_PATTERN"));
    [javac]                                       ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:67: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGFILE_EXTENSION_DATE_PATTERN"));
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:67: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGFILE_EXTENSION_DATE_PATTERN"));
    [javac]                                       ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:78: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGLINE_DATE_PATTERN"));
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:78: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGLINE_DATE_PATTERN"));
    [javac]                                       ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:95: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGLINE_DATE_PATTERN"));
    [javac]         ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\DateUtil.java:95: cannot find symbol
    [javac] symbol  : class SimpleDateFormat
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.DateUtil
    [javac]         SimpleDateFormat format = new SimpleDateFormat(ServerProp.get().getProperty("LOGLINE_DATE_PATTERN"));
    [javac]                                       ^
    [javac] C:\projects\logdashboard\LogDashboard\src\main\java\com\roche\research\logdashboard\server\domain\logparser\LogFileUtil.java:65: cannot find symbol
    [javac] symbol  : variable DateUtils
    [javac] location: class com.roche.research.logdashboard.server.domain.logparser.LogFileUtil
    [javac]                     || DateUtils.isSameDay(logFile.getDate(), since)) {
    [javac]                        ^

BUILD FAILED
C:\projects\logdashboard\LogDashboard\warbuilder.xml:31: Compile failed; see the compiler error output for details.

Total time: 7 seconds 
```

**所以我的问题是：**

来自ant的Java版本是问题吗？

**或者：**

有没有更简单的方法将 GWT 应用程序打包到 war 文件，然后是 ant 脚本？我尝试了一些东西，但下确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:15:57.920

> 来自ant的Java版本是问题吗？

不
。看起来您缺少类路径中的依赖项（特别是 Bean Validation API、ICU4j、Apache Commons Lang 和 Servlet API）。

> 有没有更简单的方法将 GWT 应用程序打包到 war 文件，然后是 ant 脚本？我尝试了一些东西，但下确实有效。

这取决于您如何构建项目。如果你已经在使用 Ant，那么使用 Ant 来打包你的 WAR；如果您使用的是 Maven，请使用 Maven；如果您使用的是 Make，则使用 Make；如果您使用的是 shell 脚本，请继续使用它；等等。
如果您没有构建脚本并且仅依赖于您的 IDE，那么您将遇到比打包 WAR 更严重的问题。但是，您仍然可以在 Eclipse 中做到这一点（我知道可以做到，但我不知道如何做到）。

# actionscript-3 - AS3 的加载问题

> ID：11081584
> 
> 赞同：1
> 
> 时间：2012-06-18T11:10:08.187
> 
> 标签：actionscript-3, flash, actionscript

我正在尝试一次将 3 个 swf 文件加载到父 swf 中。但是，其中两个加载第三个会产生问题。另外两个使用我的自定义预加载器，但第三个无法识别它并显示默认的闪存加载器（带有 5 个点）。但是加载栏正确加载。如果我在我的第三个 SWF 中跟踪 this.parent，它会显示为 null。

不确定我是否在这里遗漏了一些明显的东西，但它们的代码都是相同的。

```
package  
{

import flash.display.Loader;
import flash.net.URLRequest;
import flash.display.MovieClip;
import flash.events.ProgressEvent;
import flash.events.IOErrorEvent;
import flash.events.Event;
import flash.system.Security;

public class PreloaderMain extends MovieClip
{
    private var l:Loader = new Loader();

    public function PreloaderMain() 
    {
        LoadGame3(); //THIS DOES NOT LOAD UP
    }   

    private function LoaderIOErrorHandler(i:IOErrorEvent):void
    {
        trace("IOErrorHandler: " + i.toString());
    }

    private function loop(e:ProgressEvent):void
    {
        var perc:Number = e.bytesLoaded / e.bytesTotal;
        mLoadingScreen.percent.text = (Math.ceil(perc * 100) + "%").toString();
    }

    private function done(e:Event):void
    {
        addChild(l);
    }

    private function LoadGame1():void // THIS LOADS FINE
    {
        l.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, LoaderIOErrorHandler);
        l.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loop);
        l.contentLoaderInfo.addEventListener(Event.COMPLETE, done);
        l.load(new URLRequest("SWF1.swf"));
        l.x = 20;
        l.y = 100;
    }

    private function LoadGame2():void //THIS LOADS FINE
    {
        l.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, LoaderIOErrorHandler);
        l.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loop);
        l.contentLoaderInfo.addEventListener(Event.COMPLETE, done);
        l.load(new URLRequest("SWF2.swf"));
        l.x = 20;
        l.y = 100;
    }

    private function LoadGame3():void //THIS GIVES A PROBLEM!!
    {
        l.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, LoaderIOErrorHandler);
        l.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loop);
        l.contentLoaderInfo.addEventListener(Event.COMPLETE, done);
        l.load(new URLRequest("SWF3.swf"));
        l.x = 20;
        l.y = 100;
    }
} 
```

}

# export - Displaytag 导出文件正在保存，没有扩展名

> ID：11081587
> 
> 赞同：0
> 
> 时间：2012-06-18T11:10:18.123
> 
> 标签：export, displaytag

文件名仅在保存导出文件时出现，当保存文件时使用excel或pdf时，我们如何让.xls或.pdf默认出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:19:57.960

在显示标签内，您可以使用“export.excel.filename”属性。

```
<display:setProperty name="export.excel.filename" value="file_name.xls"/> 
```

# android - 我只是想知道是否可以在模拟器中读取和打开 pdf 文件而无需像 pdf 查看器那样安装

> ID：11081597
> 
> 赞同：0
> 
> 时间：2012-06-18T11:10:49.263
> 
> 标签：android, pdf, android-emulator, android-sdcard, android-2.2-froyo

我只是想知道是否可以在模拟器中读取和打开 pdf 文件而无需像 pdf 查看器那样安装

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:17:42.643

不，如果您没有在您的应用程序中实现**PDF 查看器的代码。**

实际上，Android在其开发应用程序**中不支持**PDF 功能。如果您在您的应用程序中实现任何 PDF 查看器代码并从您的应用程序显示，那么只有可能，否则您必须在您的设备/模拟器中安装 PDF 应用程序并使用您可以在该第三方应用程序中打开或读取 PDF 文件的意图。

# android - android中是否有任何开源库可用于调整图像大小？

> ID：11081598
> 
> 赞同：1
> 
> 时间：2012-06-18T11:10:51.440
> 
> 标签：android, android-image

我想知道是否有任何**开源库**可用于在 Android 中调整图像大小。因为在我的应用程序中，我使用相机来捕捉图像。支持的图像尺寸因设备而异。所以在这里我使用了设备的最大尺寸，例如 HTC Wildfire 有 19 种尺寸，我使用了 2592x 1952 (WxH)。在这里，我想用 250x250 的大小重新调整实际图像的大小，而不会使图像丢失或拉伸。我在 Google 和 StackOverflow 中搜索，我得到了这个 Solutions [Thumbnailator](http://code.google.com/p/thumbnailator/)和[imgscalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)，不幸的是我无法在我的应用程序中实现（我不知道它支持 android，如果是的话，请发布解决方案，我该如何实现）。当我在 /libs 文件夹中添加 ThumNailator jar 并在我的代码中添加此代码片段时，

```
 Thumbnails.of(new File(sdRoot + dir + fileName).listFiles())
                    .size(100, 100).outputFormat("JPEG")
                    .outputQuality(0.85)
                    .toFiles(Rename.PREFIX_DOT_THUMBNAIL); 
```

它显示类似的通知`"The type java.awt.image.BufferedImage cannot be resolved. It is indirectly referenced from required .class files"`。如何使用我的自定义大小重新调整捕获的图像的大小。

# python - 使用 linux 应用程序和/或 Python 在视频文件中查找 GOP 参数值

> ID：11081604
> 
> 赞同：0
> 
> 时间：2012-06-18T11:11:17.953
> 
> 标签：python, linux

如何使用现有的 linux 应用程序或 python 库在视频文件中发现 GOP 参数值？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:39:39.390

解决方案的第一步是获取有关帧号、时间、is_key_frame 信息和帧类型的信息：

```
ffmpeg -i <FILENAME_HERE> -vf showinfo -f rawvideo -y /dev/null 2>&1 | grep -i showinfo | awk '{print $4, $6, $12, $13}' 
```

上面的命令真正做的是它接受一个输入文件并从中提取每一帧。提取时，ffmpeg 返回有关 stderr 上当前处理的帧的信息。

因此，我已将帧输出重定向到 /dev/null（否则它将每个帧保存为 jpeg）并使用 2>$1 将 stderr 重定向到 stdout。其余的很简单，因为我使用 awk 只打印相关的列。

第二个问题是 - 我如何根据这些数据计算 GOP？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T14:27:45.790

您可以使用媒体信息：

```
mediainfo myVideo.mp4  | grep GOP
Format settings, GOP                     : M=1, N=61 
```

# java - 自定义 ListField Blackberry

> ID：11081605
> 
> 赞同：2
> 
> 时间：2012-06-18T11:11:24.457
> 
> 标签：java, blackberry, blackberry-jde, listfield

`ListField`是否可以根据解析的数据创建自定义行高应该是可变的？如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:20:30.333

不，a 不可能有不同的行高[`ListField`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/ListField.html)。

> 来自 API 文档：
> 
> **行为**
> 显示设置高度项的垂直列表。

此外，[`public void setRowHeight(int rowHeight)`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/ListField.html#setRowHeight%28int%29)在列表字段中设置每行高度的方法表明这是不可能的。

[`VerticalFieldManager`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/container/VerticalFieldManager.html)在这种情况下可以使用 自定义，但对于大量字段，它效率不高。

*[更新]*

从帖子中，[更改 ListField 中的行高？](http://supportforums.blackberry.com/t5/Java-Development/change-row-height-in-ListField/td-p/502060)由BlackBerry 支持论坛中的[simon_hain](http://supportforums.blackberry.com/t5/user/viewprofilepage/user-id/15193)回答，

> 有一个未记录的方法 setRowHeight(int, int)。它可能会减慢您的 UI 速度，并且与所有未记录的方法一样，使用时应自担风险

另外，检查这个问题，[在黑莓中动态扩展列表字段行高](https://stackoverflow.com/q/2737643/431639)

# php - PHP - 在浏览器下载之前调整服务器中的图像大小

> ID：11081623
> 
> 赞同：5
> 
> 时间：2012-06-18T11:12:15.880
> 
> 标签：php, resize-image

有一个文件存储在服务器中，例如尺寸为 400 X 600 像素。但是在网站的不同部分，我们需要不同维度的同一张图片。对于缩略图，我们通常需要 50 X 50 像素，如果我们选择以原始尺寸下载相同的图片，则需要更长的时间并且页面加载会变慢。如果调整该图片的大小，它的大小会减小很多（例如，从 500 KB 到 50 KB）。所以，我想要的是，在浏览器下载图片之前，服务器应该将图片调整为 PHP 脚本中要求的尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:14:37.047

您将需要 PHP 的 GD 库，然后看一下[这个](http://php.net/manual/en/function.imagecopyresampled.php)和[这个](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)，然后链接一个 php 文件，该文件会调整大小而不是图像本身。

另请注意 neeraj 的建议，因此您可以在上传时调整其大小以获得更好的性能。

如果您的主机缺少 PHP GD（这不太可能），您应该看看[这个](https://stackoverflow.com/questions/5249609/robuist-image-uploader-resizer-api)或[这个](https://stackoverflow.com/questions/1000195/image-resizing-web-service)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:15:28.480

是的，使用[PHP GD2 扩展](http://se.php.net/manual/en/book.image.php)。这是一个快速[教程](http://www.icant.co.uk/articles/phpthumbnails/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:28:56.447

您需要将[缩略图代码](https://stackoverflow.com/questions/11013004/php-content-type-image-size/11013498#11013498)中的代码放在一个新文件中，比如说 image.php，然后将此脚本用作带有图像文件名、宽度和高度参数的 img 标签的 src。

```
<img src="http://path-to-directory/image.php?img=abc.jpg&width=50&height=50" /> 
```

您需要将“DSC01088.jpg”更改为 echo $_GET['img']; 经过适当的验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:18:39.787

是的当然！

Google for PHP 图片调整大小代码[示例](http://www.google.com/#q=PHP+image+resize)

然后创建一个下载脚本并使用参数调用它，如下所示：

```
http:///www.mysite.com/image.php?image=path/to/my/image.png&width=50&height=50&crop=1 
```

该脚本将加载图像，将其调整为提供的宽度和高度，并可选择裁剪它，然后使用适当的标题回显以供下载......

有很多方法可以做到这一点......有时在 SE 询问之前使用谷歌会更好......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:35:10.380

使用 GD Library 创建缩略图

首先获取文件夹中所有图像的列表

```
 function thumb()
 {
     $img_dir_path='images/';
     $thumb_dir_path='images/thumbs/';

     $img_array=GLOB($img_dit_path.'*.{jpg,jpeg}',GLOB_BRACE);

     foreach($img_array as $img)
     {
       list($path,$file)=explode('/', $img);
       list($fileName, $extension)=explode('.',$file);

        $thumb-file=$thumb_di_path . $fileName. '-thumb.jpg';

         if(file_exists($thumb-file))
         {
               //do nothing 
         }
         else 
         {
            //create file using GD and set width and height proportionally
            // Example $width=$orig_width * 0.1; $height =$orig_height * 0.1  
         }
     } 
 } 
```

# ios - 后台地址簿中的地址簿：奇怪的间歇性崩溃

> ID：11081624
> 
> 赞同：0
> 
> 时间：2012-06-18T11:12:18.873
> 
> 标签：ios, abaddressbook

我正在后台线程中阅读通讯簿，并收到一些带有以下堆栈跟踪的崩溃报告。

```
 0    libsystem_kernel.dylib 
__pthread_kill + 8
1    libsystem_c.dylib  
abort + 94
2    AppSupport 
abortAfterPassingIntegrityCheck + 38
3    AppSupport 
runIntegrityCheckAndAbort + 526
4    AppSupport 
checkResultWithStatement + 120
5    AppSupport 
CPSqliteStatementReset + 60
6    AddressBook    
_imageStoreHasFullSizeImageForRecord + 102
7    AddressBook    
ABCImageStoreHasImagesForRecordWithFormat + 48
8    AddressBook    
ABCImageStoreHasImagesForRecord + 14
9    AddressBook    
ABCPersonHasImageDataEntries + 186
10   AddressBook    
ABCPersonHasImageData + 10
11   AddressBook    
ABPersonHasImageData + 8
12   Brewster ✭  AddressBookHandler.m line 501
-[AddressBookHandler needToImportPhotoContacts] + 50 
```

我无法复制，所以它只会偶尔发生。此代码只是试图查看 ABPerson 是否有图像。什么可能导致这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:50:41.010

我看到了同样的问题。这似乎是因为 ABAddressBookRef 只能由单个线程使用。根据 ABAddressBookCreate 文档：

> 重要您必须确保仅一个线程使用 ABAddressBookRef 的实例。

还有另一篇文章也提到了这个问题：[http ://blog.byadrian.net/2012/05/05/ios-addressbook-framework-and-gcd/](http://blog.byadrian.net/2012/05/05/ios-addressbook-framework-and-gcd/)

# css - CSS3 - 旋转额外的度数

> ID：11081628
> 
> 赞同：1
> 
> 时间：2012-06-18T11:12:38.903
> 
> 标签：css, rotation

我有一个用于 jQuery 循环的寻呼机，我想在活动类上旋转它。

我已经做到了，但想知道是否有办法旋转到“+180deg”而不是“180deg”，以使所有旋转看起来更独特。

是的，我已经尝试过 +180 度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:27:19.370

通过“旋转到“+180 度”，我假设您想以 360 为模将当前旋转增加 180 度？

由于您已经在使用 jQuery，请尝试以下操作：

```
 var self = $(this);
 var currentRotation = self.css('rotate').match(/([-.\d]+)deg/)[1];
 var newRotation = (parseInt(currentRotation, 10) + 180) % 360;
 self.css('rotate', newRotation + 'deg'); 
```

# iphone - 在 WebView 或浏览器中启动存储的 html 页面 - Objective C/Xcode

> ID：11081634
> 
> 赞同：0
> 
> 时间：2012-06-18T11:13:06.267
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我使用以下代码行保存了一个 html 页面：

```
NSURL *yoyoyo = [[NSURL alloc] initWithString:@"www.google.com"];
NSData *data = [[NSData alloc] initWithContentsOfURL:yoyoyo]; 
NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
NSString *documentsDirectory = @"/Users/xxxx/Library/Application Support/iPhone Simulator/5.1/Applications/";
NSLog(@"%@", documentsDirectory);
NSString *htmlFilePath = [documentsDirectory stringByAppendingPathComponent:@"file.html"];
[html writeToFile:htmlFilePath atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

名为 as 的文件被保存为文件目录中提到的路径中的“file.html”文件夹。有没有办法可以在我的应用程序的 safari 或 webView 中打开这个文件？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:15:42.837

要将其加载到您的 Web 视图中，请执行以下操作

```
NSString *htmlFilePath = [documentsDirectory stringByAppendingPathComponent:@"file.html"];
NSString *htmlContents = [NSString stringWithContentsOfFile:htmlFilePath
                                                   encoding:NSUTF8StringEncoding 
                                                      error:NULL];
[webView loadHTMLString:htmlContents baseURL:nil]; 
```

您在获取方面也有问题`documentDir`

代替

```
NSString *documentsDirectory = @"/Users/xxxx/Library/Application Support/iPhone Simulator/5.1/Applications/"; 
```

采用

```
NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]; 
```

再次保存文件并尝试使用上面的代码加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:48:31.287

尝试这种格式的[网址 http://www.google.com](http://www.google.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:14:34.220

它可以很简单：

```
[[UIApplication sharedApplication] openURL: [NSURL URLWithString: htmlFilePath]; 
```

这将在 Safari 中打开您保存的 HTML 文件。

如果你的应用有它自己的 webview，你可以创建一个 URLRequest 并将它传递给你的 webview 的 " `loadRequest:`" 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T09:43:37.363

试试这个代码这可能对你有帮助。

```
NSString *htmlFile;

htmlFile = [[NSBundle mainBundle] pathForResource:@"abc" ofType:@"html" inDirectory:nil];

NSString* htmlString = [NSString stringWithContentsOfFile:htmlFile  encoding:NSUTF8StringEncoding error:nil];

[webView loadHTMLString:htmlString baseURL:nil]; 
```

其中 abc.html 是您在应用程序中的 html 文件。

# php - 加载文本时出现 TinyMCE 问题（可能与 Ajax 相关）

> ID：11081636
> 
> 赞同：0
> 
> 时间：2012-06-18T11:13:17.670
> 
> 标签：php, tinymce

我有一个文本区域，这是代码：

```
<textarea id="mailtemplate4" class="mceEditor" rows="20" cols="139" name="templatearea4"></textarea> 
```

我正在使用 tinyMCE 编辑器来显示在 Ajax 请求中生成的一些文本。问题是，编辑器出现了，但文本从不显示，这是 Ajax 请求完成后执行的代码：

```
// this returns an object which has the right mce editor container and so on
var myControl = tinyMCE.get('mailtemplate4'); 
```

现在我正在尝试使用此代码设置一些文本：

```
myControl.setContent("some text"); 
```

这不起作用，我得到了这个执行：

组件返回失败代码：0x8000ffff (NS_ERROR_UNEXPECTED) [nsIDOMHTMLDocument.implementation]" nsresult: "0x8000ffff ....

为什么？我正在加载这样的编辑器：

```
tinyMCE.init({
    mode : "specific_textareas",
    editor_selector : "mceEditor",
    theme : "simple"   
}); 
```

似乎没有 JS 错误。

# javascript - window.opener.dispatchEvent 不会在 Firefox 中传输附加数据

> ID：11081638
> 
> 赞同：0
> 
> 时间：2012-06-18T11:13:29.420
> 
> 标签：javascript, firefox, coffeescript

客户要求的工作流程是这样的：

注册表单上的用户单击一个按钮，打开另一个窗口：

```
$ ->
  $("a.popup").on 'click', (e) ->
    e.preventDefault()
    newWindowCenter($(this).attr("href"), $(this).attr("data_width"), $(this).attr("data_height"), "authPopup") 
```

在哪里

```
newWindowCenter = (url, width, height, name) ->
  left = (screen.width / 2) - (parseInt(width) / 2);
  top = (screen.height / 2) - (parseInt(height) / 2);
  window.addEventListener("dataAvailable", transferAccountData, false)
  window.open(url, name,
"menubar=no,toolbar=no,status=no,width="+width+",height="+height+",alwaysRaise=yes,toolbar=no,left="+left+",top="+top) 
```

在这个新窗口中，他有一些数据，他通过单击一个按钮来确认其使用情况，因此：

```
$(".confirm_data_usage").on 'click', (e) ->
    e.preventDefault()
    if (window.opener)

      accountData= {...}

      data = {...} #collected in opened window

      approveDataTransfer = document.createEvent("Events")

      approveDataTransfer.dataTransfer = data          

      approveDataTransfer.initEvent("dataAvailable", true, false)
      approveDataTransfer.eventType = "data available"

      window.opener.dispatchEvent(approveDataTransfer)

   window.close() 
```

因此，在单击“confirm_data_usage”按钮后，插入此数据的功能将在开启器窗口中触发

```
transferAccountData = (event) ->
  data = event.dataTransfer
  ... 
```

事情是：它在 Chrome 和 Opera 中工作，但在 Firefox 中 event.dataTransfer 是未定义的。任何人都看到一个明显的错误/知道 Firefox 中的特定内容阻止事件传输数据？也许还有另一种方法？问题可能与approveDataTransfer 事件的isTrusted 属性有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:49:51.233

我不确定您的事件数据发生了什么，但我通常处理此类事情的方式是将函数附加到`window`：

```
window.transferAccountData = (data) ->
    # Whatever needs to be done goes here... 
```

然后在新窗口中，您可以直接通过以下方式调用该函数[`window.opener`](https://developer.mozilla.org/en/DOM/window.opener)：

```
window.opener.transferAccountData(data) 
```

我在任何浏览器中都没有遇到这种方法的任何问题。

# c - 中断c代码，md5文件

> ID：11081645
> 
> 赞同：0
> 
> 时间：2012-06-18T11:14:06.640
> 
> 标签：c, hash

如何中断正在运行的 C 代码，以在目录中创建文件的哈希？

所以在 C 代码中的某个点，我输入了一些代码来创建文件的 md5 哈希，例如 thisfile.txt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:28:26.860

您问题的两个部分似乎无关。
如果你想中断正在运行的 C 代码，你应该使用信号。请参考[http://beej.us/guide/bgipc/output/html/multipage/signals.html](http://beej.us/guide/bgipc/output/html/multipage/signals.html)
如果您想创建 md5，请使用现成的 MD5 API。
我不明白需要生成中断来计算哈希。谢谢

# uitableview - 带有 UITableView 部分的 UIPopoverView 键盘隐藏在背景触摸上

> ID：11081659
> 
> 赞同：0
> 
> 时间：2012-06-18T11:14:50.340
> 
> 标签：uitableview, xcode4.2, uipopover

我在我的应用程序中使用弹出视图窗口。我想在触摸背景时隐藏键盘。我已经尝试过，但该代码不适用于弹出视图，并且适用于普通视图。谁能帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:03:45.067

如果您需要使用控制器隐藏键盘，请尝试为您的 UIPopoverController 设置委托并在以下委托方法中执行您的键盘隐藏代码： -(void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController

# actionscript-3 - 在flex mobile中将图像拖动到图像上并动态定位

> ID：11081665
> 
> 赞同：1
> 
> 时间：2012-06-18T11:15:29.717
> 
> 标签：actionscript-3, ipad, apache-flex, flex4.6, flex-mobile

我正在为移动应用程序使用 Flash builder 4.6。我需要将一个图像拖到容器中的另一个图像上，并且我必须通过从另一个视图获取值来初始定位具有动态定位的可拖动图像。我是 flex 移动应用程序开发的新手。指导我一些教程或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:59:36.727

在这里让你开始......一个可拖动的红色圆圈

![在此处输入图像描述](../Images/67134fff304680bf567db58c2aa68875.png)

MyApp.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    xmlns:comps="*">
    <comps:MyCircle width="100%" height="100%"/>
</s:Application> 
```

MyCircle.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:UIComponent 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            import flash.filters.*;

            public static const SHADOW:Array = [ new DropShadowFilter(10, 80, 0x000000, 0.5, 32, 32, 1, 1, false, false, false) ];
            private var dX:Number, dY:Number;
            private var circle:Shape = new Shape();

            override protected function createChildren():void {
                super.createChildren();
                circle.graphics.beginFill(0xFF0000);
                circle.graphics.drawCircle(0, 0, 20);
                addChild(circle);
                addEventListener(MouseEvent.MOUSE_DOWN, handleDown);
            }

            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void {
                super.updateDisplayList(unscaledWidth, unscaledHeight);
                circle.x = unscaledWidth / 2;
                circle.y = unscaledHeight / 2;
            }

            private function handleDown(event:MouseEvent):void {
                dX = circle.x - stage.mouseX;
                dY = circle.y - stage.mouseY;
                circle.scaleX = circle.scaleY = 1.5;
                circle.filters = SHADOW;
                stage.addEventListener(MouseEvent.MOUSE_MOVE, handleDrag);
                stage.addEventListener(MouseEvent.MOUSE_UP, handleUp);
            }

            private function handleDrag(event:MouseEvent):void {
                circle.x = stage.mouseX + dX;
                circle.y = stage.mouseY + dY;
                event.updateAfterEvent();
            }

            private function handleUp(event:MouseEvent):void {
                circle.filters = null;
                circle.scaleX = circle.scaleY = 1;
                stage.removeEventListener(MouseEvent.MOUSE_MOVE, handleDrag);
                stage.removeEventListener(MouseEvent.MOUSE_UP, handleUp);
            }
        ]]>
    </fx:Script>
</mx:UIComponent> 
```

# jquery - 如何防止向浏览器可见区域中的图像添加新属性

> ID：11081669
> 
> 赞同：0
> 
> 时间：2012-06-18T11:15:47.750
> 
> 标签：jquery

我的页面中显示了许多图像，这些图像一个接一个。当我们运行页面时，我可以看到 4 或 5 张图像，当向下滚动时，接下来的几张图像变得可见。我在特定 div 内的图像集合中进行迭代，并通过 jquery 像这样向特定 div 中的这些图像添加一些属性

```
 $(".diagnostic_picture img").each(function () {
                var img = $(this);
                img.attr("class", "lazy");
                img.attr("data-original", img.attr("src"));
                img.attr("src", "images/grey.gif");
 }); 
```

现在我想将这些新属性添加到那些第一次加载页面时不可见的图像。

所以我试图检测图像是否在视口中......如果没有，那么我会添加这些新属性。这是代码

```
 $(".diagnostic_picture img").each(function () {
            if ($(this).offset().top > $(window).scrollTop() && $(this).offset().top < $(window).scrollTop() + $(window).height()) {
                var img = $(this);
                img.attr("class", "lazy");
                img.attr("data-original", img.attr("src"));
                img.attr("src", "images/grey.gif");
            }
        }); 
```

但它不起作用....类、原始数据等新属性被添加到我不想要的所有图像中。所以我的要求是我会在我的页面中为那些最初不在视口中的图像添加一些属性，直到有人向下滚动。所以我需要在我的代码中进行更改。

## 我已经通过这种方式解决了这个问题

```
$(".diagnostic_picture img").each(function () {
                var img = $(this);
                var pageHeight = $(window).scrollTop() + $(window).height();
                if (img.offset().top > pageHeight) 
                {
                    img.attr("class", "lazy");
                    img.attr("data-original", img.attr("src"));
                    img.attr("src", "images/grey.gif");
                }
 }); 
```

这样我检查图像是否在视口中

```
var img = $(this);
var pageHeight = $(window).scrollTop() + $(window).height();
if (img.offset().top > pageHeight) 
{
    // if images are in viewport then i will do something
} 
```

无论如何，感谢您查看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:25:17.937

If you want to show only the first 4 images in `diagnostic_picture`, you could select only those by:

```
$(".diagnostic_picture img:lt(5)") 
```

# mysql - 为 mysql 添加虚拟主机 url

> ID：11081675
> 
> 赞同：1
> 
> 时间：2012-06-18T11:16:24.083
> 
> 标签：mysql, debian, virtualhost

我在一个虚拟机上有一台本地开发机器，它反映了一个实时 vps（deb 挤压 amd64）。我想为 mysql 设置一个主机名，就像我通过 httpd.conf 为普通 web url 添加主机名一样。您能建议我需要更改/添加什么吗？

谢谢艺术

web-url blah.com（从 v1.blah.com 提供服务）

mysql mydb.blah.com **这是我想添加的**

httpd.conf

```
NameVirtualHost *:80
<VirtualHost *:80>
ServerAdmin webmaster@blah.com
ServerName v1.blah.com
ServerAlias v1.blah.com blah.tv
DocumentRoot /home/myuser/v1.blah.com
    ScriptAlias /cgi-bin /home/myuser/cgi-bin
<Directory /home/myuser/v1.blah.com/>
        AllowOverride All
        Order allow,deny
        allow from all
</Directory>
AccessFileName .htaccess
ErrorLog /home/myuser/blah_logs/v1.blah.com.in-error_log
CustomLog /home/myuser/blah_logs/v1.blah.com.in-access_log common 
</VirtualHost> 
```

# android - How to build a badminton field layout?

> ID：11081677
> 
> 赞同：0
> 
> 时间：2012-06-18T11:16:36.263
> 
> 标签：android, android-layout

I'm trying to build a badminton field layout for an application of mine.

After some experiments I got a nice looking one, like that (field.xml see below).

I know that it's probably not the best way to create a badminton field layout, but I didn't find a better solution since now. If anyone has a better idea how to build the field I would appreciate any comments.

The main problem is, the fact, that I want to add text to some text fileds. As soon as I add text to the fields, my layout is broken: [broken layout.png](http://i.stack.imgur.com/NoD1q.png)

When I remove the layout_width attribute: wrap_content from those text elements, the UI editor displays it correctly: [wanted layout.png](http://i.stack.imgur.com/XskQO.png).

But as the layout_width attributes are missing, the application will not load this layout on my device.

Any ideas how to add text to the fields without damaging the layout?

field.xml:

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/row1"
    style="@style/topborder"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.1"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/field11"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal" />

    <TextView
        android:id="@+id/field12"
        style="@style/rightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center"
        android:text="Team 1" />

    <TextView
        android:id="@+id/field13"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field14"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/row2"
    style="@style/bottomborder"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.7"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/field21"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field22"
        style="@style/rightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center"
        android:text="21"
        android:textSize="50dp" />

    <TextView
        android:id="@+id/field23"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field24"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/row3"
    style="@style/bottomborder"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.3"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/field31"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field32"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field33"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/row4"
    style="@style/bottomborder"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.3"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/field41"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field42"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field43"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:id="@+id/row5"
    android:layout_height="wrap_content"
    android:layout_weight="0.7"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/field51"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field52"
        style="@style/rightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field53"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center"
        android:text="10"
        android:textSize="50dp" />

    <TextView
        android:id="@+id/field54"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/bottomborder"
    android:id="@+id/row6"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.1"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/field61"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field62"
        style="@style/rightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />

    <TextView
        android:id="@+id/field63"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#000000"
        android:gravity="center"
        android:text="Team 2" />

    <TextView
        android:id="@+id/field64"
        style="@style/leftrightborder"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:text="" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:58:27.380

As mentioned in [this post](https://stackoverflow.com/questions/8381021/why-does-the-linearlayout-attribute-layout-weight-seem-to-do-the-opposite-of-w/8382348#8382348), I just found, I just had to set layout_width:0dp on each text view. Not it's working fine!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:15:40.457

In your layout `layout_weight` have incorrect values. If one row should use 0.1 of the screen and second row should use 0.9 of the screen. Then you will set the `layout_weight` of the first row to 0.9 and the `layout_weight` of the second to 0.1. Here is layout with correct weights:

```
 <LinearLayout
        android:id="@+id/row1"
        style="@style/topborder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2.1"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/field11"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal" />

        <TextView
            android:id="@+id/field12"
            style="@style/rightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center"
            android:text="Team 1" />

        <TextView
            android:id="@+id/field13"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field14"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/row2"
        style="@style/bottomborder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.5"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/field21"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field22"
            style="@style/rightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center"
            android:text="21"
            android:textSize="50dp" />

        <TextView
            android:id="@+id/field23"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field24"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/row3"
        style="@style/bottomborder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.9"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/field31"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field32"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.6"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field33"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/row4"
        style="@style/bottomborder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.9"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/field41"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field42"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.6"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field43"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/row5"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.5"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/field51"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field52"
            style="@style/rightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field53"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center"
            android:text="10"
            android:textSize="50dp" />

        <TextView
            android:id="@+id/field54"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/row6"
        style="@style/bottomborder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2.1"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/field61"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field62"
            style="@style/rightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />

        <TextView
            android:id="@+id/field63"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.6"
            android:background="#000000"
            android:gravity="center"
            android:text="Team 2" />

        <TextView
            android:id="@+id/field64"
            style="@style/leftrightborder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.3"
            android:background="#000000"
            android:gravity="center_horizontal"
            android:text="" />
    </LinearLayout>

</LinearLayout> 
```

# jpa - JPA2 是否可以替代 EclipseLinks @JoinFetch(@JoinFetchType.INNER)？

> ID：11081691
> 
> 赞同：0
> 
> 时间：2012-06-18T11:17:56.453
> 
> 标签：jpa, jpa-2.0, eclipselink

我有以下使用 EclipseLinks [@JoinFetch](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Relationship_Mappings/Common_Relationship_Configurations/JoinFetch)注释的代码。是否可以使用 JPA2 注释来做同样的事情，还是我必须依赖 JPA 提供者特定的注释？

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "SOME_ID", nullable = false)
@JoinFetch(JoinFetchType.INNER)
@Override
public Something getSomething() {
    return this.something;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:11:41.657

JPA 2.0 没有为此定义任何标准注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T06:57:17.057

有一种方法可以在 JPA 中指定带有注释的集合的连接类型。您可以在[获取](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/FetchParent.html#fetch%28java.lang.String,%20javax.persistence.criteria.JoinType%29)或[加入](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/From.html#join%28java.lang.String,%20javax.persistence.criteria.JoinType%29)集合时显式指定[JoinType](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/JoinType.html)：

```
Root<Entity> entity = cq.from(Entity.class);
entity.fetch(entity.get("children"), JoinType.RIGHT);
//or
entity.join(entity.get("children"), JoinType.LEFT); 
```

# ios - 在 UDID 禁令之后制作自定义“AdHoc Helper App”......？

> ID：11081692
> 
> 赞同：3
> 
> 时间：2012-06-18T11:18:02.303
> 
> 标签：ios, adhoc, udid

iTunes Store 中有很多 iOS 应用程序，在启动时，它们会检查设备的 UDID 和其他信息并设置邮件撰写界面，以便您的潜在测试人员可以方便地向您发送他们的 UDID，而无需 iTunes 的所有麻烦（例如，无法在 iTunes 应用程序中复制/粘贴 UDID，只能在 Xcode 中）。例如，Erica Sadun 的这个：http: [//itunes.apple.com/us/app/ad-hoc-helper/id285691333 ?mt=8](http://itunes.apple.com/us/app/ad-hoc-helper/id285691333?mt=8)

我非常清楚 UDID 前段时间已弃用，Apple 已开始拒绝使用已弃用 API 的应用程序。但我也想制作自己的自定义“检查您的 UDID 并通过电子邮件发送给我”应用程序，如果有的话，因为它看起来比将我的潜在 beta 测试人员重定向到第三方应用程序更专业（并且感觉更安全）别人做的。（没有冒犯艾丽卡！）

我想我想要的已经不可能了……？有什么想法、经验可以分享吗？

*另外，我目前不打算使用像试飞这样的服务（也许有一天）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:21:20.323

我认为当前获取设备标识符并以某种方式使用它的应用程序不会被禁止。的属性在 iOS5.0`uniqueIdentifier`中`UIDevice`已贬值，因此只要您检查您是否在使用 iOS5.0+ 的系统上并且不使用此属性，一切都会好起来的。什么`Apple`建议是

> **特殊注意事项**
> 不要使用*uniqueIdentifier*属性。要创建特定于您的应用程序的唯一标识符，您可以调用*CFUUIDCreate*函数来创建 UUID，并使用*NSUserDefaults*类将其写入默认数据库。

# javascript - IE9 检测不到 PC 上安装的字体

> ID：11081694
> 
> 赞同：2
> 
> 时间：2012-06-18T11:18:11.567
> 
> 标签：javascript, html, css

我在我的网站上使用 FlashDLib 字体。现在我确实在我的电脑上安装了字体（Chrome，FF 显示它很好），但由于某种原因 IE 没有选择它。我也使用了@font-face 声明，但无济于事（我认为它不起作用，因为@font-face 安装了您的PC上不存在的字体，对吧？）。我能做些什么来解决这个问题？

问候大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:35:56.413

IE9 使用 .woff 而不是 .eot 文件。您可以将您的字体上传到[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)以获得不同的变体。

不用说您应该将字体文件上传到您的网络服务器，因为您网站的访问者无法访问您 PC 上的字体文件。

# iphone - 在 iphone sdk 中解析 WSDL Xml

> ID：11081697
> 
> 赞同：0
> 
> 时间：2012-06-18T11:18:43.567
> 
> 标签：iphone, wsdl, xml-parsing

> --uuid:03d866ca-659b-4a58-a460-0552c692d105+id=6 内容 ID：[http](http://tempuri.org/0) ://tempuri.org/0内容传输编码：8bit 内容类型：application/xop+xml;charset=utf -8;type="文本/xml"
> 
> 515e8205-90f4-4284-a40f-3ecd1d8deb6cSeattleUnited States11111WA456 Corp AvenueContosobrian_1@contoso.combrian_1@contoso.comBrianSeattleUnited States11111WA123 Main StreetJohnsonD​​avid425-555-0120425-555-0110SeattleUnited States11111WA456 Corp AvenueContosobrian_1@contoso.combrian_1@contoso.comBrianSeattleUnited States11111WA123 Main StreetJohnsonD​​avid425-555-0120425- 555-0110SUCCESS_ACK --uuid:03d866ca-659b-4a58-a460-0552c692d105+id=6--

这就是我对 xml 的响应……我无法解析这个 wsdl xml……谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:05:26.720

尝试使用[SudzC](http://sudzic.com)，它会为您生成 WS 客户端并进行所有解析。您所要做的只是管理它返回的对象。

# mysql - 从两个表中选择 DISTINCT 值并比较这两个表

> ID：11081698
> 
> 赞同：0
> 
> 时间：2012-06-18T11:18:46.000
> 
> 标签：mysql

我有两个名为 USERS 和 EMP 的表。

```
 USERS
-------

userid | username | useraddress
--------------------------------
   1   | U1       | ADD1 
   2   | U2       | ADD2 
   3   | U3       | ADD3
   4   | U4       | ADD4

  EMP
-------

empid | empname 
-----------------
 1    | emp1
 2    | emp2
 3    | emp3 
```

这些是我想看到的表格

如果 empid = userid 则显示用户名和用户地址作为输出

什么是查询..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:24:24.253

```
select case when e.empid = u.userid 
            then concat(username, ' ', useraddress)
            else empname
       end as name
from users u
full outer join emp e on e.empid = u.userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:24:57.780

```
SELECT u.username, u.useraddress 
FROM USERS u INNER JOIN EMP e
 ON u.userid = e.empid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:27:40.287

您还可以在 MySQL 中使用如下查询：

```
SELECT USERS.username, EMP.useraddress FROM USERS,EMP WHERE EMP.id=USERS.userid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:23:14.360

尝试这个：

```
select u.username, u.useraddress
from EMP e
inner join USERS u
on e.empid = u.userid 
```

但是您可能想要显示所有员工，无论他们是否是用户，那么您需要一个左连接：

```
select u.username, u.useraddress
from EMP e
left join USERS u
on e.empid = u.userid 
```

您可以通过执行以下操作隐藏不匹配的员工将显示的事实`NULL`：

```
select IFNULL(u.username, 'N/A'), IFNULL(u.useraddress, 'N/A')
from EMP e
left join USERS u
on e.empid = u.userid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:37:48.440

使用内连接查询绑定两个表

```
select username as 'User Name',useraddress as 'User Address'
from USERS INNER JOIN EMP
on USERS.userid = EMP.empid; 
```

但它会显示所有记录。并且可以将这些查询与用户 ID 上的用户的左连接或 empid 上的 emp 右连接连接起来

# javascript - 使用 JavaScript 在 BIRT 中修改查询输出

> ID：11081699
> 
> 赞同：0
> 
> 时间：2012-06-18T11:18:49.463
> 
> 标签：javascript, eclipse, reporting, birt

在 BIRT 中，使用 JavaScript，我想读取从网页传递的参数，并基于它是特定值，显示修改后的查询。

下面的代码是否正确？我在哪里放置这个？（哪个事件）

```
importPackage( Packages.javax.servlet.http );
importPackage( org.eclipse.birt.report.engine.api.script );
httpServletReq = reportContext.getHttpServletRequest( );
param=httpServletReq.getQueryString( );
if( param.indexof( "All") != -1) {
  queryText = "select CLASSIC.PRODUCTLINES.PRODUCTLINE,                 
  CLASSICMODELS.PRODCTLINES.TEXTDESCRIPTION from CLASSIC.PRODUCTLINES";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:24:04.170

正确的地方是您的数据集`beforeOpen`事件。

而不是`queryText`使用`this.queryText`. 在数据集上下文中，`this`指的是该数据集对象及其属性。

使用设置参数`httpServletRequest`对我来说似乎很奇怪。为什么不使用本机 BIRT 报告参数？

```
if (params["All"].value != null) {
    this.queryText = "select ...";
} 
```

# asp.net - Sql 表不映射到 Datagrid

> ID：11081702
> 
> 赞同：0
> 
> 时间：2012-06-18T11:18:59.180
> 
> 标签：asp.net, sql-server, datagrid, database-connection

我有一个使用 connectionString 的表 dbo.MSreplication_options，我正在尝试将此表映射到 datagrid1.DataSource。

```
SqlConnection cnn;
SqlCommand con;
SqlDataAdapter da;
DataSet ds;

protected void Page_Load(object sender, EventArgs e)
{
    string strcon = ConfigurationManager.ConnectionStrings["masterConnectionString"].ConnectionString;

    cnn = new SqlConnection(strcon);
    con = new SqlCommand("select * from dbo.MSreplication_options");
    con.Connection = cnn;
    ds = new DataSet();
    da = new SqlDataAdapter(con);
    cnn.Open();
    da.Fill(ds);
    cnn.Close();
    DataGrid1.DataSource = ds.Tables[0].ToString();
} 
```

网络配置

```
<connectionStrings>

    <add name="masterConnectionString" connectionString="Data Source=node39\SQLExpress;Initial Catalog=master;Integrated Security=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

在运行时它不映射到datagrid1？我在做什么特别的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:21:09.207

在 DataGrid1.DataSource = ds.Tables[0].ToString(); 之后执行此操作

```
DataGrid1.DataBind() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:27:35.057

你不见了`DataGrid1.DataBind();`

除此之外，`Memory Management`没有得到照顾。

```
string strcon = ConfigurationManager.ConnectionStrings["masterConnectionString"].ConnectionString;
using (SqlConnection cnn = new SqlConnection(strcon))
{
    con = new SqlCommand("select * from dbo.MSreplication_options");
    con.Connection = cnn;
    using (DataSet ds = new DataSet())
    {
        da = new SqlDataAdapter(con);
        cnn.Open();
        da.Fill(ds);
        cnn.Close();
        DataGrid1.DataSource = ds.Tables[0].ToString();
        DataGrid1.DataBind();
    }
} 
```

# grails - 如何在多个 grails/groovy 版本中管理开发？

> ID：11081703
> 
> 赞同：3
> 
> 时间：2012-06-18T11:19:00.273
> 
> 标签：grails, groovy, grails-2.0, versions

我有一个使用 groovy 1.7.5 和 grails 1.3.4 的项目。但是我的新项目尚未开始，它将使用最新版本的 groovy (1.8.6) 和 grails (2.0.4) 我将在这两个项目中工作。那么如何在Windows环境下管理不同版本的grails。

我不想升级使用旧版本 grails(1.3.4) 的项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T21:45:27.003

如果您的开发环境中安装了多个 Grails 版本，则可以使用 IDE 为正在开发的项目切换 Grails 版本：STS 或 IntelliJ IDEA。

**作为[安装了 Grails Tools的](http://www.grails.org/STS+Integration)[SpringSource Tool Suite](http://www.springsource.com/developer/sts) (STS) IDE用户：**

我有一个开发环境，我在其中开发 2 个项目，每个项目都需要不同的 Grails 版本（1.3.7 和 2.0.4）。我在我的开发机器上安装了两个 Grails 版本，其中 $GRAILS_HOME 指向其中一个作为要使用的默认 Grails 版本。

为了快速切换项目以使用我的开发机器上安装的特定 Grails，我使用[安装了 Grails Tools 的](http://www.grails.org/STS+Integration)[SpringSource Tool Suite](http://www.springsource.com/developer/sts) (STS) IDE 。更新版本的 STS 可能即将推出，因此您不必在不久的将来自己手动添加 Grails 支持，希望 STS 始终默认提供 Grails 支持。

假设您安装了带有 Grails 支持的 STS。如果您熟悉 Eclipse，那么您已经知道如何使用 STS 来管理多个项目。要回答您关于如何在安装的不同 Grails 版本之间切换的问题，首先，让 STS 知道您的系统上有多个 Grails 版本：

从顶部导航栏中，选择“SpringSource Tool Suite”，选择“Preferences ...”，在“type filter text”字段中，输入“grails”，单击并突出显示“Grails”，然后您可以手动添加路径所有已安装的 Grails 版本，因此 STS 知道它们的存在：

![在此处输入图像描述](../Images/5f8313e5a6882904c667cbb9386dc69b.png)

此外，要为您的项目指定特定安装的 Grails 版本，您可以右键单击该项目，选择 Properties，选择 Grails，然后您将看到多个 Grails 安装版本的下拉列表，供您为您的特定项目选择。设置后，每次从 STS 中运行项目时，都会使用指定的 Grails 版本。

![在此处输入图像描述](../Images/1c25cd65b68aae9c8b670425132a674c.png)

**作为 IntelliJ IDEA 用户：**

IDEA IDE 也可以实现同样的功能。打开您的 Grails 项目，在左侧面板上查找“外部库”，单击鼠标右键，将鼠标悬停在“Grails”上，然后单击“更改 SDK 版本”。

![在此处输入图像描述](../Images/8048fccc293c6a397d36d23039de7971.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:50:04.267

有几种方法可以实现 Grails 的自动版本切换。

我没有使用 Windows，但我的一位同事使用[bat 文件](http://www.componentix.com/blog/12/resolving-grails-version-automatically-on-windows)进行自动版本检测/切换。

希望有帮助！

PS：我也发现[了这个 stackoverflow question](https://stackoverflow.com/q/1791560/1230366)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T13:52:04.427

如果您使用的是 Mac 或 Linux，我会使用这个简单的[shell 脚本](http://www.objectpartners.com/2010/10/12/update-fast-path-switching-between-projects/)来管理我的所有开发平台。

很高兴能够使用为您切换一切的别名。

```
alias proj1 = 'cd /path/to/proj1; use grails 1.3.4;'
alias proj2 = 'cd /path/to/proj2; use grails 2.0.4;' 
```

# android - 来自画廊的 android 应用壁纸

> ID：11081706
> 
> 赞同：0
> 
> 时间：2012-06-18T11:19:28.463
> 
> 标签：android, gallery, wallpaper

我是 android 新手，我一直在试图弄清楚如何在 Android 上显示照片。我整个星期都在搜索，没有运气，想知道是否有任何关于如何从图片库为应用程序设置壁纸的 android 示例代码或示例

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:25:02.093

使用以下方法从图像库中选择图像

```
 //Declare private static final int PICK_IMAGE = 1;

  try {
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(Intent.createChooser(intent, "Select Picture"),  PICK_IMAGE);
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),e.getMessage(),Toast.LENGTH_LONG).show();
                Log.e(e.getClass().getName(), e.getMessage(), e);
            } 
```

并在活动结果写入：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    switch (requestCode) {
    case PICK_IMAGE:

        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImageUri = data.getData();
            try {
                // OI FILE Manager
                String filemanagerstring = selectedImageUri.getPath();

                // MEDIA GALLERY
                String selectedImagePath = getPath(selectedImageUri);

                if (selectedImagePath != null) {
                    filePath = selectedImagePath;
                } else if (filemanagerstring != null) {
                    filePath = filemanagerstring;
                } else {
                    Toast.makeText(getApplicationContext(), "Unknown path",
                            Toast.LENGTH_LONG).show();

                }

                if (filePath != null) {         

                    decodeFile(filePath);
                } else {
                    bitmap = null;
                }
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "Internal  
                     error",Toast.LENGTH_LONG).show();

            }
        }
        break;
    default:
    }

}

     //Decode file() where you will get decoded file and then you can use that image
      //file according to your requirement

   public void decodeFile(String filePath) {

    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filePath, o);

    // The new size we want to scale to
    final int REQUIRED_SIZE = 1024;

    // Find the correct scale value. It should be the power of 2.
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp < REQUIRED_SIZE && height_tmp < REQUIRED_SIZE)
            break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;  
    }

    // Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    bitmap = BitmapFactory.decodeFile(filePath, o2);

    image.setImageBitmap(bitmap);// set ImageView in your case set Layout  
              //background

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:31:52.880

尝试在新的波士顿网站上搜索 android 开发教程，我认为 tut 41 和 42 教如何从画廊或相机中获取图像，并将其设置为壁纸。试试这个链接[http://thenewboston.org/list.php?cat=6](http://thenewboston.org/list.php?cat=6)。快乐编码:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T11:23:07.093

请查看代码。

```
Bitmap mBitmap = BitmapFactory.decodeResource("imageID");

                WallpaperManager myWallpaperManager = WallpaperManager
                        .getInstance(getApplicationContext());

                try {
                    myWallpaperManager.setBitmap(mBitmap); // here your image bitmap.
                    Toast.makeText(SetWallPaper.this, "Wallpaper set",
                            Toast.LENGTH_SHORT).show();
                } catch (IOException e) {
                    Toast.makeText(SetWallPaper.this,
                            "Error setting wallpaper", Toast.LENGTH_SHORT)
                            .show();
                } 
```

我认为它对你有帮助。

# r - R在地图上绘制网格值

> ID：11081707
> 
> 赞同：2
> 
> 时间：2012-06-18T11:19:31.580
> 
> 标签：r, ggplot2, geospatial, lattice

我有几个具有以下格式的文件：纬度，经度，值。我想为每个纬度、经度点绘制一个具有此类值的彩色网格图，并将其重叠在欧盟地图上。

感谢您的支持。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T11:26:10.903

大致有两种选择：一种使用 lattice 和 sp 包，另一种使用 ggplot2 包：

# 格子/sp

首先，假设您的数据被调用，您必须将数据转换为`SpatialPixelsDataFrame`（由 sp-package 提供）`df`：

```
require(sp)
gridded(df) = c("lat","lon") 
```

然后绘制：

```
spplot(df, "value") 
```

可以使用以下`sp.layout`参数覆盖附加信息，例如国家边界：

```
spplot(df, "value", sp.layout = list("sp.lines", cntry_boundaries)) 
```

哪里`cntry_boundaries`是 a`SpatialLines(DataFrame)`或`SpatialPolygons(DataFrame)`。可以使用`rgdal`包或`maptools`包 ( `readShapeLines`)将多边形集读入 R。

# ggplot2

我个人更喜欢使用`ggplot2`over `spplot`。`ggplot2`更灵活，语法更清晰。请注意，它`ggplot2`适用于 normal `data.frame`，而不适用于 sp-package 的空间对象。

一个最小的例子看起来像：

```
ggplot(aes(x = lat, y = lon), data = df) + geom_tile(aes(fill = value)) + 
    geom_path(data = cntry_boundaries) 
```

有关更多信息，请参阅我的这些早期答案：

*   [在地图上绘制插值数据](https://stackoverflow.com/questions/10047870/plotting-interpolated-data-on-map/10058844#10058844)
*   [点数据集到网格数据集的平均值](https://stackoverflow.com/questions/8563334/average-values-of-a-point-dataset-to-a-grid-dataset/8563683#8563683)

# c++ - C++ 通过模块名称选择性打印 cerr 流

> ID：11081714
> 
> 赞同：0
> 
> 时间：2012-06-18T11:20:17.103
> 
> 标签：c++, debugging

假设我们有一个包含 20 个模块的 30 K 行代码数据库：即每个模块的 *.cpp 和 *.h 文件。在开发过程中，源代码被修饰为通过 cerr 查找的局部变量。有时它具有与 gdb 相同的优点，有时则没有。想要保持 cerr 流干净 /silent ，并且能够只从他希望的模块中获取对 cerr 的写入。我如何能 ：

1）区分对 cerr 的写入，它们包含有关它们来自哪个模块的信息？2）为构建二进制文件添加命令行选项，这将指定允许哪些模块写入cerr（我想看到的那些）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:31:51.350

编辑：事实上，最好的方法是使用日志框架（根据 Joachim Pileborg 的评论）。只有当您绝对必须坚持您已经拥有的代码但想要整理它时，以下内容才真正适用。

最好的方法是使用预处理器，使用`#ifdef`指令来选择要构建的代码。

例如

```
#ifdef CERR_DEBUG_BUILD_MODULE_1
cout << __FILE__ << ":" << __LINE__ << "\tCERR DEBUG OUTPUT" << endl;
#endif 
```

该语句可能会更好地包含在一个小宏中：

```
#ifdef CERR_DEBUG_BUILD_MODULE_1
#define LOG( x ) cerrLogPrint( x, __FILE__, __LINE__ )
#else
#define LOG( x )
#endif 
```

在哪里

```
void cerrLogPrint( const char* const log, const char* filename, unsigned int line)
{
     //PRINT
} 
```

# android - 一个应用程序可以访问另一个应用程序的回栈吗？

> ID：11081715
> 
> 赞同：1
> 
> 时间：2012-06-18T11:20:17.260
> 
> 标签：android, android-intent

我想了解一些有关Android组件结构的基础知识。一个应用程序是否可以访问另一个应用程序回栈的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:32:43.667

简短的回答：没有

您可以有两个具有[sharedUserId](https://developer.android.com/guide/topics/manifest/manifest-element.html#uid)的应用程序。它们必须使用相同的开发人员证书进行签名。然后您可以共享对后台堆栈的访问权限。但是您希望访问其后台堆栈的应用程序必须通过公开的接口提供该访问。我认为尝试这个不是一个好主意。

# jquery - 使用 JQuery 对 HTML 内容进行分页

> ID：11081716
> 
> 赞同：0
> 
> 时间：2012-06-18T11:20:18.977
> 
> 标签：jquery, html, jquery-ui

我是 jQuery 的新手。在下面的代码中，我正在尝试为每个子标题进行分页，如果我单击子标题 1，页面应该只显示子标题 1 的内容。我已经尝试并获得了必须的页数创建并获取索引。

我怎样才能创建分页？就像在下面的情况下，我希望显示“1,2,3”，因为有三个子标题。在点击 1 时，我应该只显示子标题 1，其他的应该被隐藏。如何使用 jQuery 来完成？

```
<span>Click a Header!</span>
<div><h2>Sub Header 1</h2></div><div>Content 1</div>
<div><h2>Sub Header 2</h2></div><div>Content 2</div>
<div><h2>Sub Header 3</h2></div><div>Content 3</div>

$("h2").click(function () {
    // this is the dom element clicked
    var index = $("h2").index(this);
    var size = $("h2").size(this);
    $("span").text("That was Header index #" + index + "   Total Pages #" + size);
}); 
```

[http://jsfiddle.net/userdude/GtDHW/](http://jsfiddle.net/userdude/GtDHW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:38:41.117

这似乎是您正在尝试做的事情，希望采用更有条理的方法。

如果您正在尝试分块文本（如新闻故事或诸如此类的内容），那么有一些插件可以帮助解决这个问题。你只需要做一些研究，找到适合你需要的东西。

一些例子包括：

*   [轻松分页](http://cssglobe.com/post/9801/easy-paginate-jquery-plugin-for-pagination)
*   [j分页](http://tympanus.net/codrops/2009/11/17/jpaginate-a-fancy-jquery-pagination-plugin/)
*   [甜蜜的页面](http://tutorialzine.com/2010/05/sweet-pages-a-jquery-pagination-solution/)

请注意，分页也指[表格数据分页](http://datatables.net/plug-ins/pagination)，以及[较小程度的列表制作](http://th3silverlining.com/2010/04/15/pajination-a-jquery-pagination-plugin/)。所以当你去寻找确保你是特定的时要注意，否则你可能会发现一些奇怪的结果。另请注意，服务器上会多次发生分页，尽管这不是必需的。一些“新媒体”网站确实会加载整篇文章，然后在屏幕之间切换，例如 The Daily Beast。

**HTML**

```
<div id="msg">Click a Header to Show Associated Content</div>
<div class="story">
    <h2>Sub Header 1</h2>
    <div>Content 1</div>
</div>
<div class="story">
    <h2>Sub Header 2</h2>
    <div>Content 2</div>
</div>
<div class="story">
    <h2>Sub Header 3</h2>
    <div>Content 3</div>
</div> 
```

**CSS**

```
.story > div {
    display: none;
} 
```

**jQuery**

```
$(document).ready(function(){
    var $headers = $(".story h2"),
        $msg = $('#msg');

    $headers.click(function(){
        var $this = $(this),
            $content = $headers.not(this).siblings('div'),
            msg = "Select story #" + $this.text();

        $content.hide();

        $this.siblings('div').show();

        $msg.text(msg);
    });
}); 
```

[http://jsfiddle.net/userdude/GtDHW/1/](http://jsfiddle.net/userdude/GtDHW/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:50:20.913

这是你想要达到的目标吗？

```
$("h2").click(function () {
    $("h2").not(this).parent().next().hide();
    $(this).parent().next().show();
}); 
```

解释：

*   取所有的`H2`s，除了被点击的那个，去parent（`DIV`包含`H2`s），获取下一个元素（`DIV`有内容），隐藏所有`DIV`包含内容的s
*   取 clicked `H2`，以类似方式遍历，确保显示`DIV`with 内容

# android - 单击外部时关闭上下文菜单

> ID：11081721
> 
> 赞同：2
> 
> 时间：2012-06-18T11:20:43.793
> 
> 标签：android, contextmenu, android-context

我有上下文菜单的问题。我有：

```
@Override
  public void onCreateContextMenu(ContextMenu menu, View v,
                                    ContextMenu.ContextMenuInfo menuInfo) {
    menu.add(Menu.NONE, COPY, Menu.NONE, "Copy")
        .setAlphabeticShortcut('d');
    menu.add(Menu.NONE, NOTE, Menu.NONE, "Note")
    .setAlphabeticShortcut('n');
    menu.add(Menu.NONE, PAGE, Menu.NONE, "Page")
    .setAlphabeticShortcut('p');

  } 
```

当我在 ContextMenu 之外触摸屏幕时，我想关闭它。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:29:03.143

我不确定是否有任何直接方法可以关闭`ContextMenu`外部点击。但是，如果您想要该功能，则可以使用 a`Dialog`而不是 a `ContextMenu`，然后使用`dialog.setCanceledOnTouchOutside(true)`您可以在外部单击时关闭对话框。

# vbscript - 如何在 document.write 中使用双引号

> ID：11081723
> 
> 赞同：1
> 
> 时间：2012-06-18T11:20:51.040
> 
> 标签：vbscript

我是网络编程新手，正在学习 VBScript。我想使用 HTML 标签在表单中显示几个文本框。但是当使用此语句创建文本框时 - document.write("input type="text"") 出了点问题并且网页中没有显示任何内容。我知道我可以在脚本块之外使用 HTML 创建文本框，但是我们可以在 document.write 中执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:38:33.073

你可以这样做

```
<script language=vbscript>
document.write("input type='text'") '=> input type="text"
document.write("input type=""text""") '=> input type="text"

'as suggested in other answer won't work 
'document.write("input type=\"text\"")
'document.write("input type='text'")
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:24:20.193

尝试以下 2 个选项中的 1 个：

1.  document.write("输入类型=\"文本\"")
2.  document.write("输入类型='文本'")

您正在使用双引号将您的 doc.write 函数传递其参数，因此如果您再次使用双引号，则必须将它们转义，或者在“文本”周围使用单引号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:55:03.847

始终在字符串中使用两个引号 ("") 来表示单引号。

示例字符串 - “亚历克斯：“你好吗”，他说”

Wscript.Echo "Alex : ""how are you"", he said" ' 使用双引号

当您尝试在 wbscript 中插入 html 标记时也是如此。希望这可以帮助。

# objective-c - CGContextShowTextAtPoint 和西里尔文字

> ID：11081725
> 
> 赞同：1
> 
> 时间：2012-06-18T11:20:58.600
> 
> 标签：objective-c, ios, xcode

我有一点问题，在图像上绘制文本。当我尝试显示英文文本时，一切正常。问题是，我需要本地化文本。当文本是俄语时，会显示一些奇怪的符号。任何帮助，将不胜感激。

我正在使用以下代码来绘制文本：

```
CGContextSetRGBFillColor(context, 0.0, 0.0, 0.0, 1);
char* text = (char *)[addText cStringUsingEncoding:NSUTF8StringEncoding];
CGContextSelectFont(context, "Impact", 20, kCGEncodingMacRoman);
CGContextSetTextDrawingMode(context, kCGTextFill);
CGContextShowTextAtPoint(context, 20, h+addHeightBelow, text, strlen(text)); 
```

它显示如下：

![毁了文本](../Images/4735eb54da9099181600e50da5a75fb8.png)

所以结果，你应该使用Core Text，代码是：

```
CTFontRef fontRef=CTFontCreateWithName((CFStringRef)@"Impact", 20.0f, NULL);
CGColorRef color=[UIColor blackColor].CGColor;
NSDictionary *attrDictionary=[NSDictionary dictionaryWithObjectsAndKeys: 
                              (id)fontRef, (id)kCTFontAttributeName, 
                              color, (id)kCTForegroundColorAttributeName,
                              nil];
NSAttributedString *stringToDraw=[[NSAttributedString alloc] initWithString:addText attributes:attrDictionary];

CTLineRef line=CTLineCreateWithAttributedString((CFAttributedStringRef)stringToDraw);
CGContextSetTextPosition(context, 20, h+addHeightBelow);
CTLineDraw(line, context);

CFRelease(line);
CFRelease(fontRef);
[stringToDraw release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:35:36.983

使用[**Core Text**](http://www.cocoanetics.com/2011/01/befriending-core-text/)在图像上绘制本地化文本。请参阅[此](http://www.ultrajoke.net/2011/08/quick-tip-drawing-core-text-right-side-up/)示例

# jquery - 用 css sprites 定位 div：有没有办法自动垂直居中以获得更整洁的结果

> ID：11081726
> 
> 赞同：0
> 
> 时间：2012-06-18T11:20:58.437
> 
> 标签：jquery, css, alignment, sprite

[jsfiddle 与示例](http://jsfiddle.net/chrisloughnane/CGcdc/)

单击县名以查看其徽章出现。

我在需要时添加 div，每个 div 的背景都来自一个完美运行的 css sprite。我想要的是将每个添加的 div 垂直居中，以便它们排列得更整齐。

我可以`position: relative; top: XXpx;`为每个波峰手动添加和修改顶部，例如`.Corksmall { background-position: -25px -27px; height: 27px; width: 25px; position: relative; top: 5px;}`，但这似乎是蛮力方法。

有没有更令人愉悦的编码方式来做到这一点？蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:03:45.840

有一个简单的技巧可以实现这种行为。

```
#selectedCounties .sprite-smallcrests {
    /* float: left; */ /* removed. no need for, because we apply display: inline-block */
    display: inline-block;
    vertical-align: middle;
} 
```

**现场演示**：http: [//jsfiddle.net/CGcdc/4/](http://jsfiddle.net/CGcdc/4/)

您可能已经注意到，图片`div`的跳跃取决于每张图片的高度。
在可能的最高图片高度前添加一个空元素，将防止跳跃：
**现场演示**：http: [//jsfiddle.net/CGcdc/9/](http://jsfiddle.net/CGcdc/9/)

如果您想获得此跨浏览器兼容，请将包装器`div`s替换为`span`s 或其他默认为内联元素的元素：

```
$('#Clare, #Cork, #Limerick').click(function(){
    $('<span/>', {
        title: 'Co. '+this.id,
        'class': this.id+'small sprite-smallcrests'
    }).appendTo('#selectedCounties');
}); 
```

希望这能解决您的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:33:10.163

据我了解，您想将`smallcrests`..居中，所以，试试这个..将以下css更改为下面给出的。

```
#selectedCounties .sprite-smallcrests {
margin: 10px auto;
} 
```

这是一个[**演示**](http://jsfiddle.net/CGcdc/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:19:20.263

我要做的是将每个图像保存为相同的确切高度并将波峰垂直放置在图像文档中。

在您使用精灵表的情况下，这意味着：只需在垂直方向留出足够的空间，以便您可以为所有图像设置一个静态高度。

说明图。

![在此处输入图像描述](../Images/b81c82c0d56e34a40feb979154af26cb.png)

*   绿色区域是波峰的图像。
*   红色边框是整个图像。
*   空白表示您将在每个 img 文档中留下的空白空间（或您的 sprite 表中的波峰之间的填充。）

# batch-file - 如何在批处理文件中使用 if - else 结构？

> ID：11081735
> 
> 赞同：154
> 
> 时间：2012-06-18T11:21:22.847
> 
> 标签：batch-file, if-statement

我对批处理文件中的 if - else 结构有疑问。每个命令都单独运行，但我不能安全地使用“if - else”块，所以我的程序的这些部分不起作用。我怎样才能使这些部件运行？谢谢你。

```
IF %F%==1 IF %C%==1 (
    ::copying the file c to d
    copy "%sourceFile%" "%destinationFile%"
    )
ELSE IF %F%==1 IF %C%==0 (
    ::moving the file c to d
    move "%sourceFile%" "%destinationFile%"
    )

ELSE IF %F%==0 IF %C%==1 (
    ::copying a directory c from d, /s:  boş olanlar hariç, /e:boş olanlar dahil
    xcopy "%sourceCopyDirectory%" "%destinationCopyDirectory%" /s/e
    )
ELSE IF %F%==0 IF %C%==0 (
    ::moving a directory
    xcopy /E "%sourceMoveDirectory%" "%destinationMoveDirectory%"
    rd /s /q "%sourceMoveDirectory%"
    ) 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-06-18T11:29:10.977

你的语法不正确。你不能使用`ELSE IF`. 无论如何，您似乎并不需要它。只需使用多个`IF`语句：

```
IF %F%==1 IF %C%==1 (
    ::copying the file c to d
    copy "%sourceFile%" "%destinationFile%"
    )

IF %F%==1 IF %C%==0 (
    ::moving the file c to d
    move "%sourceFile%" "%destinationFile%"
    )

IF %F%==0 IF %C%==1 (
    ::copying a directory c from d, /s:  boş olanlar hariç, /e:boş olanlar dahil
    xcopy "%sourceCopyDirectory%" "%destinationCopyDirectory%" /s/e
    )

IF %F%==0 IF %C%==0 (
    ::moving a directory
    xcopy /E "%sourceMoveDirectory%" "%destinationMoveDirectory%"
    rd /s /q "%sourceMoveDirectory%"
    ) 
```

伟大的批处理文件参考：[http ://ss64.com/nt/if.html](http://ss64.com/nt/if.html)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-04-26T20:47:31.020

我认为在问题和一些答案中，对DOS中此伪代码的含义有些混淆：IF A IF BX ELSE Y。这并不意味着IF（A和B）THEN X ELSE Y，而是在fact 表示 IF A（IF B THEN X ELSE Y）。如果 A 的测试失败，那么整个内部 if-else 将被忽略。

作为提到的答案之一，在这种情况下，只有一个测试可以成功，因此不需要“else”，但当然这只适用于这个例子，它不是执行 if-else 的通用解决方案。

有很多方法可以解决这个问题。这里有一些想法，都很丑陋，但是嘿，这是（或至少是）DOS！

```
@echo off

set one=1
set two=2

REM Example 1

IF %one%_%two%==1_1 (
   echo Example 1 fails
) ELSE IF %one%_%two%==1_2 (
   echo Example 1 works correctly
) ELSE (
    echo Example 1 fails
)

REM Example 2

set test1result=0
set test2result=0

if %one%==1 if %two%==1 set test1result=1
if %one%==1 if %two%==2 set test2result=1

IF %test1result%==1 (
   echo Example 2 fails
) ELSE IF %test2result%==1 (
   echo Example 2 works correctly
) ELSE (
    echo Example 2 fails
)

REM Example 3

if %one%==1 if %two%==1 (
   echo Example 3 fails
   goto :endoftests
)
if %one%==1 if %two%==2 (
   echo Example 3 works correctly
   goto :endoftests
)
echo Example 3 fails
)
:endoftests 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-18T11:29:56.990

AFAIK 你不能`if else`像用其他语言那样批量处理，它必须是嵌套`if`的。

使用 nested`if`你的批次看起来像

```
IF %F%==1 IF %C%==1(
    ::copying the file c to d
    copy "%sourceFile%" "%destinationFile%"
    ) ELSE (
        IF %F%==1 IF %C%==0(
        ::moving the file c to d
        move "%sourceFile%" "%destinationFile%"
        ) ELSE (
            IF %F%==0 IF %C%==1(
            ::copying a directory c from d, /s:  boş olanlar hariç, /e:boş olanlar dahil
            xcopy "%sourceCopyDirectory%" "%destinationCopyDirectory%" /s/e
            ) ELSE (
                IF %F%==0 IF %C%==0(
                ::moving a directory
                xcopy /E "%sourceMoveDirectory%" "%destinationMoveDirectory%"
                rd /s /q "%sourceMoveDirectory%"
                )
            )
        )
    ) 
```

或者正如詹姆斯建议的那样，链接你`if`的，但我认为正确的语法是

```
IF %F%==1 IF %C%==1(
    ::copying the file c to d
    copy "%sourceFile%" "%destinationFile%"
    ) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-05-20T12:27:21.083

这是我如何处理 if else if 情况

```
if %env%==dev ( 
    echo "dev env selected selected"
) else (
    if %env%==prod (
        echo "prod env selected"
    )
) 
```

**请注意**，它与 if-elseif 块与其他编程语言（如 C++ 或 Java）不同，但它会完成您需要做的事情

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-29T09:21:26.593

我相信您可以使用诸如

```
if ___ (

do this

) else if ___ (

do this

) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-02T11:21:52.537

有点晚了，也许仍然适用于复杂的 if 条件，因为我想添加一个“done”参数来保持 if-then-else 结构：

```
set done=0
if %F%==1 if %C%==0 (set done=1 & echo found F=1 and C=0: %F% + %C%)
if %F%==2 if %C%==0 (set done=1 & echo found F=2 and C=0: %F% + %C%)
if %F%==3 if %C%==0 (set done=1 & echo found F=3 and C=0: %F% + %C%)
if %done%==0 (echo do something) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-08T02:36:33.587

`IF...ELSE IF`构造在批处理文件中工作得非常好，特别是当您在每个 IF 行上仅使用一个条件表达式时：

```
IF %F%==1 (
    ::copying the file c to d
    copy "%sourceFile%1" "%destinationFile1%"
) ELSE IF %F%==0 (
    ::moving the file e to f
    move "%sourceFile2%" "%destinationFile2%" ) 
```

在您的示例中，您使用`IF...AND...IF`类型构造，其中必须同时满足 2 个条件。在这种情况下，您仍然可以使用`IF...ELSE IF`构造，但要使用额外的括号以避免下一个 ELSE 条件的不确定性：

```
IF %F%==1 (IF %C%==1 (
    ::copying the file c to d
    copy "%sourceFile1%" "%destinationFile1%" )
) ELSE IF %F%==1 (IF %C%==0 (
    ::moving the file e to f
    move "%sourceFile2%" "%destinationFile2%")) 
```

上述构造等价于：

```
IF %F%==1 (
    IF %C%==1 (
    ::copying the file c to d
    copy "%sourceFile1%" "%destinationFile1%"
    ) ELSE IF %C%==0 (
    ::moving the file e to f
    move "%sourceFile2%" "%destinationFile2%")) 
```

批处理命令的处理顺序取决于[CMD.exe 的解析顺序](https://stackoverflow.com/questions/4094699/how-does-the-windows-command-interpreter-cmd-exe-parse-scripts)。只需确保您的构造遵循该逻辑顺序，并且通常它会起作用。如果您的批处理脚本由 Cmd.exe 处理而没有错误，则意味着这是正确的（即受您的操作系统 Cmd.exe 版本支持）构造，即使有人另有说明。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-28T08:26:41.380

这是我的 if..else..if 代码示例，
它执行以下操作

提示用户输入进程名称

如果进程名称**无效**
则写入用户

```
Error : The Processor above doesn't seem to be exist 
```

如果进程名称是**服务**
然后它写给用户

```
Error : You can't kill the Processor above 
```

如果进程名称是**有效**的而不是**服务**
然后它写给用户

该**进程**已通过`taskill`

所以我称它为**Process killer.bat**
这是我的代码：

```
@echo off

:Start
Rem preparing the batch  
cls
Title Processor Killer
Color 0B
Echo Type Processor name to kill It (Without ".exe")
set /p ProcessorTokill=%=%  

:tasklist
tasklist|find /i "%ProcessorTokill%.exe">nul & if errorlevel 1 (
REM check if the process name is invalid 
Cls 
Title %ProcessorTokill% Not Found
Color 0A
echo %ProcessorTokill%
echo Error : The Processor above doesn't seem to be exist    

) else if %ProcessorTokill%==services (
REM check if the process name is services and doesn't kill it
Cls 
Color 0c
Title Permission denied 
echo "%ProcessorTokill%.exe"
echo Error : You can't kill the Processor above 

) else (
REM if the process name is valid and not services
Cls 
Title %ProcessorTokill% Found
Color 0e
echo %ProcessorTokill% Found
ping localhost -n 2 -w 1000>nul
echo Killing %ProcessorTokill% ...
taskkill /f /im %ProcessorTokill%.exe /t>nul
echo %ProcessorTokill% Killed...
)

pause>nul

REM If else if Template
REM if thing1 (
REM Command here 2 ! 
REM ) else if thing2 (
REM command here 2 !
REM ) else (
REM command here 3 !
REM ) 
```

# r - 如何在 Rcmdr 中为 NA 分配不同的值？

> ID：11081736
> 
> 赞同：0
> 
> 时间：2012-06-18T11:21:26.577
> 
> 标签：r

缺失数据在文本文件中表示为 9999.00 、 9999.0 和 9999.000 。如果我在以下内容中指定：

```
 Rcmdr->data->import->missing data indicator  as  9999,nothing will be assigned to NA.

   but when I assigned to 9999.0  then only the values of 9999.0 are assigned to NA. 
```

是否有关于如何在 Rcmdr 中为 NA 分配不同值的任何想法。这是添加的代码：

```
 Dataset <- 
    read.table("C:/Users/BRSa12002_L4_d.txt", 
     header=TRUE, sep=",", na.strings="-9999.00", dec=".", strip.white=TRUE) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:14:12.347

Rcmdr 只是一个菜单-GUI，因此它可能使用标准输入功能。该`read.table`函数将值作为字符串处理。你给`read.table`函数一个名为 的参数`na.strings`。我严重怀疑它会评估输入以查看它在数字上是否相同。默认字符串为“NA”。我不是 Rcmdr 用户，但我的预测是您可以同时赋予该功能“9999”和“9999.0”并获得您想要的行为。真正的问题是您的输入数据流中有什么。你还没有解释这个问题。

获得答案的最佳方法是复制执行该菜单驱动命令时出现的 R 代码。然后，我们可以将适当的字符串添加到 R 代码中，以将您带到您想去的地方。Rcmdr 可能无法获得完整的答案。它真的被设计为一种入门方法，可以让您快速了解命令行 R。（我们中的大多数人从另一条路线开始，从一开始就从命令行开始使用 R，所以您可能需要帮助我们少量。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:41:48.723

从`?read.table`我们得知参数 na.strings 需要一个向量。因此，您可以使用它来分配几个不同的值作为 NA。

```
Dataset <- read.table("C:/Users/BRSa12002_L4_d.txt", 
               header=TRUE, sep=",", 
               na.strings=c("-9999.00","-9999.0","-9999"), 
               dec=".", strip.white=TRUE) 
```

# android - android用多个额外参数设置alarmmanager

> ID：11081739
> 
> 赞同：1
> 
> 时间：2012-06-18T11:21:38.100
> 
> 标签：android, android-intent, android-alarms

我的 android alarmmanager 有问题。我正在使用两个额外的参数设置警报管理器，但在接收器活动中只有第一个额外的参数可用。

```
Intent intent = new Intent(con, AlarmReceiver.class);
Bundle extras = new Bundle();
extras.putInt("arg_1", 1);
extras.putInt("arg_2", 2);
intent.putExtras(extras);

PendingIntent sender = PendingIntent.getBroadcast(con,
            1590, intent, PendingIntent.FLAG_UPDATE_CURRENT);

AlarmManager am = (AlarmManager) con
            .getSystemService(Context.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, time, sender); 
```

我的代码有什么问题？我还更改了请求代码，因此没有过时的警报可以触发我的问题，而且只有一个额外的参数传递给我的接收器活动。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:59:24.413

感谢您的帮助，我忘记将接收器的第二个额外参数传递给我的活动。如此愚蠢的错误；）

# linux-kernel - 使用 CIL 合并 Linux 内核

> ID：11081740
> 
> 赞同：2
> 
> 时间：2012-06-18T11:21:45.500
> 
> 标签：linux-kernel, static-analysis, c-intermediate-language

我正在尝试使用 CIL 合并来合并 Linux 内核并对其进行分析。我在不同版本的内核上试过这个。每个人都给出了不同的错误。

### Linux-3.4.2：

在 Linux Kernel-3.4.2 源文件夹中，我使用了以下命令

> $ make CC="cilly --save-temps --dofsvd --merge"

它给出了以下错误

> /home/srikanth/projects2test/linux-3.4.2/arch/x86/include/asm/cpufeature.h[345:0-0]：语法错误解析错误致命错误：异常Frontc.ParseError（“解析错误”）

错误是由于这一行：

> asm goto(... : : "i" (bit) : : t_no);

它无法识别“asm”指令。我用谷歌搜索它。在 BLAST 错误报告（[此处](http://forge.ispras.ru/issues/1323)）中，我发现我们可以使用一些外观选项来防止此类构造。但我不知道使用什么选项。如何忽略 asm（或任何其他不受支持的构造）？

### Linux-2.4.5：

在 Linux Kernel-2.4.5 源文件夹中，我使用了以下命令

> $ make CC="cilly --save-temps --dofsvd --merge"

上面的命令给出了以下错误

> Makefile:229: arch/x86_64/Makefile: 没有这样的文件或目录 make: ***没有规则来制作目标 `arch/x86_64/Makefile'。停止。

为此，我包含了 ARCH=i386 选项来制作文件。

> $ make ARCH=i386 CC="cilly --save-temps --dofsvd --merge"

它说

> init/main.c:1:0：错误：您选择的 CPU 不支持 x86-64 指令集

如何修复此错误？

我想在 Linux Kernel（任何版本）上运行分析。由于这些错误，我无法合并它。请帮我解决这些问题。

# c# - C# WCF Rest 服务 - 嵌套 JSON（无转义）

> ID：11081742
> 
> 赞同：1
> 
> 时间：2012-06-18T11:21:51.550
> 
> 标签：c#, json, rest, serialization

我有一个基本的 Web 服务，它以 JSON 形式返回以下对象：

```
public class GetCustomerResponse
{
  public Guid InteractionId { get; set; }
  public string CustomerInfo { get; set; }
} 
```

CustomerInfo 成员也是 JSON，因此返回给调用者的返回包含转义的 JSON，老实说，这很公平，也是意料之中的

但是，我希望将 CustomerInfo JSON“嵌入”在响应中而不进行任何转义。有人知道这是否可行，如果可以，怎么办？

必须将 CustomerInfo 作为字符串处理的原因是因为这是由不基于对象的子系统生成的，所以我得到的只是一个原始 JSON 字符串。

我意识到这可以通过在服务中创建一个 CustomerInfo 类来解决，但是我宁愿避免这种情况，因为这将是一个包含许多成员的大型类，更重要的是，如果进行了任何更改，它将需要更新服务。

编辑：我已经接受了 Sergey Kudriavtsev 的回答，因为这可行，但最后我选择了不同的解决方案。

我已将 json.net 库添加到解决方案中并编辑了我的 GetCustomer 类，如下所示：

```
public Newtonsoft.Json.Linq.JObject CustomerInfo { get; set; } 
```

然后在代码中我改变了服务接口：

```
GetCustomerResponse GetCustomer(int customerId) 
```

到：

```
void GetCustomer(int customerId) 
```

然后在接口的实现中我正在执行以下操作

```
public void GetCustomer(int customerId)
{
  var customerJson = ... code to get json string ...

  var response = new GetCustomerResponse()
  {
    InteractionId = Guid.NewGuid(),
    CustomerInfo = JObject.Parse(customerJson)
  };

  string json = JsonConvert.SerializeObject(response, Formatting.Indented);

  HttpContext.Current.Response.ContentType = "application/json; charset=utf-8";
  HttpContext.Current.Response.Write(json);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:50:38.170

我认为最正确的方法是按照您的描述创建一个单独的 CustomerInfo 类。

但是，如果您不想这样做，那么至少有两种选择：

1）手动将您的对象序列化为JSON，即使用类似的东西

```
public string SerializeGetCustomer(GetCustomer data)
{
    return "{\"InteractionId\":\"" + data.InteractionId.ToString() + 
        "\",\"CustomerInfo\":" + data.CustomerInfo + "}";
} 
```

2）将CustomerInfo反序列化为泛型`Dictionary<String, Object>`（不创建特定类），然后将其序列化为GetCustomer类的一部分，即：

```
public class GetCustomer
{
  public Guid InteractionId { get; set; }
  public Dictionary<String, Object> CustomerInfo { get; set; }
  public GetCustomer(Guid interactionId, string customerInfo)
  {
    InteractionId = interactionId;
    CustomerInfo = new JavaScriptSerializer().Deserialize<Dictionary<String,Object>>(customerInfo);
  }
}

...
string result = new JavaScriptSerializer.Serialize(new GetCustomer(interactionId, customerInfo)); 
```

# javascript - 如何对与 DOM 元素交互的 Javascript 代码进行单元测试

> ID：11081743
> 
> 赞同：5
> 
> 时间：2012-06-18T11:21:53.683
> 
> 标签：javascript, jquery, unit-testing, qunit, js-test-driver

背景：

我来自 Java 背景，所以对 Javascript 不太熟悉。

我们计划在我们现有的（遗留）代码和未来的工作中引入 JavaScript 单元测试。我们主要是一家java商店（Spring、Weblogic等）。

我们正在寻找能够与 IDE（IntelliJ 理念）和声纳良好集成的选项，以及能够将它们作为持续集成的一部分运行。

JsTestDriver 似乎勾选了所有方框。

问题：

我们现有的许多 javascript 代码 a) 嵌入到 JSP 中，并且 b) 利用 jQuery 直接与页面元素交互。

我们应该如何测试一个严重依赖 DOM 的函数。这是我正在谈论的函数的一些代码示例：

```
function enableOccupationDetailsText (){
    $( "#fldOccupation" ).val("Unknown");
    $( "#fldOccupation_Details" ).attr("disabled", "");
    $( "#fldOccupation_Details" ).val("");
    $( "#fldOccupation_Details" ).focus();
} 
```

或者

```
jQuery(document).ready(function(){

    var oTable = $('#policies').dataTable( {
            "sDom" : 'frplitip',
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "xxxx.do",
                "sPaginationType": "full_numbers",
                "aaSorting": [[ 1, "asc" ]],
                "oLanguage": {
                    "sProcessing":   "Processing...",
                    "sLengthMenu":   "Show _MENU_ policies",
                    "sZeroRecords":  "No matching policies found",
                    "sInfo":         "Showing _START_ to _END_ of _TOTAL_ policies",
                    "sInfoEmpty":    "Showing 0 to 0 of 0 policies",
                    "sInfoFiltered": "(filtered from _MAX_ total policies)",
                    "sInfoPostFix":  "",
                    "sSearch":       "Search:",
                    "sUrl":          "",
                    "oPaginate": {
                        "sFirst":    "First",
                        "sPrevious": "Previous",
                        "sNext":     "Next",
                        "sLast":     "Last"
                }
            },
                "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
                        $('td:eq(0)', nRow).html( "<a href='/ole/policy/general_details.do?policy_id="+aData[0]+"'>"+aData[0]+"</a>" );
                        return nRow;

                },

                "fnServerData" : function ( url, data, callback, settings ) {

                settings.jqXHR = $.ajax( {
                    "url": url,
                    "data": data,
                    "success": function (json) {
                        if (json.errorMessage != null) {
                            var an = settings.aanFeatures.r;
                            an[0].style.fontSize="18px";
                            an[0].style.backgroundColor="red";
                            an[0].style.height="70px";
                            an[0].innerHTML=json.errorMessage;
                            setTimeout('window.location="/xxxx"',1000);
                            //window.location="/xxxxx";
                        } else {
                            $(settings.oInstance).trigger('xhr', settings);
                            callback( json );
                        }
                    },
                    "dataType": "json",
                    "cache": false,
                    "error": function (xhr, error, thrown) {
                        if ( error == "parsererror" ) {
                            alert( "Unexpected error, please contact system administrator. Press OK to be redirected to home page." );
                            window.location="/xxxx";
                        }
                    }
                } );
                }

            } );
        $("#policies_filter :text").attr('id', 'fldKeywordSearch');
        $("#policies_length :input").attr('id', 'fldNumberOfRows');
        $("body").find("span > span").css("border","3px solid red");
        oTable.fnSetFilteringDelay(500);
        oTable.fnSearchHighlighting();
        $("#fldKeywordSearch").focus();

}
); 
```

In the latter case, my approach would be that the function in question is way too large and should be broken to smaller (units) so that it can be tested. But all the interaction points with DOM, jQuery, datatables, ajax etc makes it really complicated to refactor things in the way we do in Java world to make it more testable.

So, any suggestions for the above to sample cases would be greatly appreciated!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T13:23:43.347

To test the following code:

```
function enableOccupationDetailsText (){
    $( "#fldOccupation" ).val("Unknown");
    $( "#fldOccupation_Details" ).attr("disabled", "");
    $( "#fldOccupation_Details" ).val("");
    $( "#fldOccupation_Details" ).focus();
} 
```

You could use the following code:

```
// First, create the elements
$( '<input>', { id: 'fldOccupation' } ).appendTo( document.body );
$( '<input>', { disabled: true, id: 'fldOccupation_Details' } )
    .appendTo( document.body );

// Then, run the function to test
enableOccupationDetailsText();

// And test
assert( $( '#fldOccupation' ).val(), 'Unknown' );
assert( $( '#fldOccupation_Details' ).prop( 'disabled' ), false ); 
```

As you see, it's just the classical `setup > run > assert` pattern.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T13:17:48.953

maybe Selenium/SeleniumGrid is usefull for you: [http://seleniumhq.org/](http://seleniumhq.org/)

It is not a "UnitTest" per definition, but you can write selenium tests with java or python (and many more...) as unit tests. Seleniumtests starts web tests in real browsers, and is quiet good for testing frontends (and dom manipulations).

**Edit**: today i stumbled upon this site describing different ways for unit-testing especially in a jQuery background: [http://addyosmani.com/blog/jquery-testing-tools/](http://addyosmani.com/blog/jquery-testing-tools/)

# ruby-on-rails - 调用 update_attributes 后查找哪些字段已更新？

> ID：11081746
> 
> 赞同：10
> 
> 时间：2012-06-18T11:22:05.470
> 
> 标签：ruby-on-rails, update-attributes

我想知道在 update_attributes 语句之后更新了哪些字段。我正在过滤可更新的参数并从`params[:model]`. 现在，一些新的可更新参数可能与旧参数具有相同的值，我想知道哪个参数被更新，哪个参数被跳过，因为相同的值。这是一些代码：

```
UPDATABLE_PARAMS = ["param1", "param2", "param3", "param4"]
def update
  @dr = DR.find(params[:id])
  authorize! :update, @dr #devise stuff

  hnew = params[:dr]
  hnew.delete_if {|k, v| !UPDATABLE_PARAMS.include?(k.to_s) }

  if @dr.update_attributes(hnew)
    @dr.update_attribute(:last_updated_by, current_user.email)
    @dr.touch
  end

  render :update_result
end 
```

这是棘手的部分：

我想`@dr`在 JSON 中呈现对象（但已经设置好了），除了它的标准字段之外，我还想添加一个嵌套对象，其中包含`updated_params`. 我可以发送我`hnew`的`@hnew`观点，但如果我这样做，我将获得所有已处理的参数，而不仅仅是那些不同的参数。

我怎样才能得到改变的参数？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-18T11:58:09.087

保存模型时更改的属性映射。

```
@dr.previous_changes() 
```

# shell - sed 替换命令

> ID：11081747
> 
> 赞同：1
> 
> 时间：2012-06-18T11:22:10.757
> 
> 标签：shell, sed

我想根据条件取消注释这两个语句之一：

```
#export CATALINA_OPTS="-javaagent:$TOMCAT_INSTALL_LOCATION/$APACHE_TOMCAT_VERSION/lib/oi-mule-libs/usage/injector.jar"

#export CATALINA_OPTS="-javaagent:$TOMCAT_INSTALL_LOCATION/$APACHE_TOMCAT_VERSION/lib/agents/cl-proxy-agent.jar" 
```

我使用了以下 sed 命令：

```
 #sed -i 's/#export CATALINA_OPTS="-javaagent:$TOMCAT_INSTALL_LOCATION/$APACHE_TOMCAT_VERSION/lib/oi-mule-libs/usage/injector.jar"/export CATALINA_OPTS="-javaagent:$TOMCAT_INSTALL_LOCATION/$APACHE_TOMCAT_VERSION/lib/oi-mule-libs/usage/injector.jar"/' $TOMCAT_HOME/bin/init-script.sh 
```

我收到以下错误：

```
sed: -e expression #1, char 85: unknown option to `s' 
```

为什么我会收到此错误？

我怎样才能通过修改上面的命令来达到我的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:27:28.080

您应该将分隔符更改为 sed 命令。您的分隔符是“/”，它也出现在您的模式中，并且会产生错误。尝试这个：

```
sed 's:<pattern to be replaced>:<replacement pattern>:g' 
```

这里 g 代表全局，s 代表替代。您可以使用任何其他未出现在您的模式中的分隔符，我在示例中使用了冒号“：”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:07:15.983

您需要使用反斜杠转义斜杠字符或使用另一个字符作为“s”ubstitute 命令的分隔符（如 sleep_dragon 所指出的）
记住这一点：

```
 sed -e s/^#(.*\/injector.jar.*)/\1/ -e s/^#(.*\/cl-proxy-agent.jar.*)/\1/ $my_file 
```

根据需要使圆括号中的正则表达式具有唯一性，以识别您需要取消注释的确切字符串。

# c# - .NET Regex：否定字符串中第一个字符的前一个字符

> ID：11081750
> 
> 赞同：4
> 
> 时间：2012-06-18T11:22:28.560
> 
> 标签：c#, .net, regex

考虑以下字符串

```
"Some" string with "quotes" and \"pre-slashed\" quotes 
```

使用正则表达式，我想找到所有前面没有斜线的双引号。所以我希望正则表达式为例句 This.... 找到四个匹配项。

```
[^\\]" 
```

......只会找到其中三个。我想这是因为正则表达式的状态机首先验证命令以否定斜杠的存在。

这意味着我需要编写一个带有某种look-behind 的正则表达式，但我不知道如何使用这些lookaheads 和lookbehinds ......我什至不确定这就是我正在寻找的东西。

以下尝试返回 6，而不是 4 匹配...

```
"(?<!\\) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:27:51.853

```
"(?<!\\") 
```

是你要找的

如果你想匹配“Some”和“quotes”，那么

```
(?<!\\")(?!\\")"[a-zA-Z0-9]*" 
```

会做

解释：

*   `(?<!\\")`- 负面回顾。指定在主表达式之前无法匹配的组
*   `(?!\\")`- 负前瞻。指定在主表达式之后无法匹配的组
*   `"[a-zA-Z0-9]*"`- 在常规引号之间匹配的字符串

这意味着 - 匹配任何不带有 \" 之前和 \" 之后*但*包含在双引号内的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:13:40.497

你几乎明白了，将引号移到后面，例如：

```
(?<!\\)" 
```

还要注意像这样的情况

```
"escaped" backslash \\"string\" 
```

您可以使用这样的表达式来处理这些：

```
(?<!\\)(?:\\\\)*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:26:51.360

**试试这个**

```
(?<!\\)(?<qs>"[^"]+") 
```

**解释**

```
<!--
(?<!\\)(?<qs>"[^"]+")

Options: case insensitive

Assert that it is impossible to match the regex below with the match ending at this position (negative lookbehind) «(?<!\\)»
   Match the character “\” literally «\\»
Match the regular expression below and capture its match into backreference with name “qs” «(?<qs>"[^"]+")»
   Match the character “"” literally «"»
   Match any character that is NOT a “"” «[^"]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Match the character “"” literally «"»
--> 
```

**代码**

```
try {
    if (Regex.IsMatch(subjectString, @"(?<!\\)(?<qs>""[^""]+"")", RegexOptions.IgnoreCase)) {
        // Successful match
    } else {
        // Match attempt failed
    } 
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

# jquery - Jquery检查图像是否被点击

> ID：11081756
> 
> 赞同：1
> 
> 时间：2012-06-18T11:22:55.363
> 
> 标签：jquery, jquery-selectors

我在 jquery 中为页面中的事件使用动态绑定。在我的页面中，我有“+”图像，它扩展了下面的值（表格行）。'+' 是一个图像，当单击它时，我必须显示行并将图像更改为'-'。我曾经使用以下代码检查图像，无论是“+”还是“-”。

```
var nImgPlusPos = obj.indexOf("plus.gif");
if (nImgPlusPos > 1) 
{
    $("#" + sImgID).show();
    $("#" + sTrID).show();
    $("#imgExpand" + sUniqueID).attr("src", "/Images/minus.gif");
} else {
        $("#" + sImgID).hide();
} 
```

这些页面是使用 Ajax 创建为标签页的，因此在 Ajax 调用期间绑定了事件，并且上面的代码在第一次工作并且当标签重新启动时功能 - 扩展下面的行不起作用。

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:30:04.700

你用什么来调用你的ajax？

如果您使用 .post 尝试使用这个：

```
$('#div').live('click', function(e) {
} 
```

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# c# - 通过 WebClient 上传 JSON

> ID：11081760
> 
> 赞同：8
> 
> 时间：2012-06-18T11:23:11.863
> 
> 标签：c#, json, webclient

我有一个使用 JQuery 与我的后端交互的网络应用程序。后端成功接受 JSON 数据。例如，我可以成功发送以下 JSON：

```
{ "id":1, "firstName":"John", "lastName":"Smith" } 
```

我现在有一个必须访问此后端的 Windows Phone 应用程序。我需要通过 WebClient 传递相同的 JSON。目前我有以下内容，但我不确定如何实际传递 JSON。

```
string address = "http://www.mydomain.com/myEndpoint;
WebClient myService = new WebClient();
utilityService.UploadStringCompleted += new UploadStringCompletedEventHandler(utilityService_UploadStringCompleted);
utilityService.UploadStringAsync(address, string.Empty); 
```

有人可以告诉我我需要做什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-08T10:06:02.147

虽然问题已经得到解答，但我认为基于 WebClient 分享我的简单 JsonService 会很好：

**基类**

```
/// <summary>
/// Class BaseJsonService.
/// </summary>
public abstract class BaseJsonService
{
    /// <summary>
    /// The client
    /// </summary>
    protected WebClient client;

    /// <summary>
    /// Gets the specified URL.
    /// </summary>
    /// <typeparam name="TResponse">The type of the attribute response.</typeparam>
    /// <param name="url">The URL.</param>
    /// <param name="onComplete">The configuration complete.</param>
    /// <param name="onError">The configuration error.</param>
    public abstract void Get<TResponse>(string url, Action<TResponse> onComplete, Action<Exception> onError);
    /// <summary>
    /// Sends the specified URL.
    /// </summary>
    /// <typeparam name="TResponse">The type of the attribute response.</typeparam>
    /// <param name="url">The URL.</param>
    /// <param name="jsonData">The json data.</param>
    /// <param name="onComplete">The configuration complete.</param>
    /// <param name="onError">The configuration error.</param>
    public abstract void Post<TResponse>(string url, string jsonData, Action<TResponse> onComplete, Action<Exception> onError);
} 
```

**服务实施**

```
/// <summary>
    /// Class JsonService.
    /// </summary>
    public class JsonService : BaseJsonService
    {
        /// <summary>
        /// Gets the specified URL.
        /// </summary>
        /// <typeparam name="TResponse">The type of the attribute response.</typeparam>
        /// <param name="url">The URL.</param>
        /// <param name="onComplete">The configuration complete.</param>
        /// <param name="onError">The configuration error.</param>
        public override void Get<TResponse>(string url, Action<TResponse> onComplete, Action<Exception> onError)
        {
            if (client == null)
                client = new WebClient();

            client.DownloadStringCompleted += (s, e) =>
            {
                TResponse returnValue = default(TResponse);

                try
                {
                    returnValue = JsonConvert.DeserializeObject<TResponse>(e.Result);
                    onComplete(returnValue);
                }
                catch (Exception ex)
                {
                    onError(new JsonParseException(ex));
                }
            };

            client.Headers.Add(HttpRequestHeader.Accept, "application/json");
            client.Encoding = System.Text.Encoding.UTF8;

            client.DownloadStringAsync(new Uri(url));
        }
        /// <summary>
        /// Posts the specified URL.
        /// </summary>
        /// <typeparam name="TResponse">The type of the attribute response.</typeparam>
        /// <param name="url">The URL.</param>
        /// <param name="jsonData">The json data.</param>
        /// <param name="onComplete">The configuration complete.</param>
        /// <param name="onError">The configuration error.</param>
        public override void Post<TResponse>(string url, string jsonData, Action<TResponse> onComplete, Action<Exception> onError)
        {
            if (client == null)
                client = new WebClient();

            client.UploadDataCompleted += (s, e) =>
            {
                if (e.Error == null && e.Result != null)
                {
                    TResponse returnValue = default(TResponse);

                    try
                    {
                        string response = Encoding.UTF8.GetString(e.Result);
                        returnValue = JsonConvert.DeserializeObject<TResponse>(response);
                    }
                    catch (Exception ex)
                    {
                        onError(new JsonParseException(ex));
                    }

                    onComplete(returnValue);
                }
                else
                    onError(e.Error);
            };

            client.Headers.Add(HttpRequestHeader.ContentType, "application/json");
            client.Encoding = System.Text.Encoding.UTF8;

            byte[] data = Encoding.UTF8.GetBytes(jsonData);
            client.UploadDataAsync(new Uri(url), "POST", data);
        }
    } 
```

**示例用法**

```
 /// <summary>
    /// Determines whether this instance [can get result from service].
    /// </summary>
    [Test]
    public void CanGetResultFromService()
    {
        string url = "http://httpbin.org/ip";
        Ip result;

        service.Get<Ip>(url,
        success =>
        {
            result = success;
        },
        error =>
        {
            Debug.WriteLine(error.Message);
        });

        Thread.Sleep(5000);
    }
    /// <summary>
    /// Determines whether this instance [can post result automatic service].
    /// </summary>
    [Test]
    public void CanPostResultToService()
    {
        string url = "http://httpbin.org/post";
        string data = "{\"test\":\"hoi\"}";
        HttpBinResponse result = null;

        service.Post<HttpBinResponse>(url, data,
            response =>
            {
                result = response;
            },
            error =>
            {
                Debug.WriteLine(error.Message);
            });

        Thread.Sleep(5000);
    }
}
public class Ip
{
    public string Origin { get; set; }
}
public class HttpBinResponse
{
    public string Url { get; set; }
    public string Origin { get; set; }
    public Headers Headers { get; set; }
    public object Json { get; set; }
    public string Data { get; set; }
}
public class Headers
{
    public string Connection { get; set; }
    [JsonProperty("Content-Type")]
    public string ContentType { get; set; }
    public string Host { get; set; }
    [JsonProperty("Content-Length")]
    public string ContentLength { get; set; }
} 
```

只是为了分享一些知识！

祝你好运！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-18T13:13:56.180

弄清楚了。我忘记了以下内容：

```
myService.Headers.Add("Content-Type", "application/json"); 
```

# android - asynctask 中的错误：只有创建视图层次结构的原始线程才能接触其视图

> ID：11081763
> 
> 赞同：2
> 
> 时间：2012-06-18T11:23:21.967
> 
> 标签：android, android-asynctask

```
06-18 16:50:24.733: W/dalvikvm(1086): threadid=11: thread exiting with uncaught exception (group=0x40015560)
06-18 16:50:24.815: E/AndroidRuntime(1086): FATAL EXCEPTION: AsyncTask #3
06-18 16:50:24.815: E/AndroidRuntime(1086): java.lang.RuntimeException: An error occured while executing doInBackground()
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.lang.Thread.run(Thread.java:1019)
06-18 16:50:24.815: E/AndroidRuntime(1086): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.ViewRoot.checkThread(ViewRoot.java:2932)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.ViewRoot.requestLayout(ViewRoot.java:629)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.View.requestLayout(View.java:8267)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.View.requestLayout(View.java:8267)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.View.requestLayout(View.java:8267)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.View.requestLayout(View.java:8267)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:257)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.View.requestLayout(View.java:8267)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.widget.AbsListView.requestLayout(AbsListView.java:1102)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.View.setFlags(View.java:4641)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.view.View.setVisibility(View.java:3116)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at com.mythrii.tripview.BusFrom$DownloadImageTask.doInBackground(BusFrom.java:274)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at com.mythrii.tripview.BusFrom$DownloadImageTask.doInBackground(BusFrom.java:1)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-18 16:50:24.815: E/AndroidRuntime(1086):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
06-18 16:50:24.815: E/AndroidRuntime(1086):     ... 4 more
06-18 16:50:30.571: E/WindowManager(1086): Activity com.mythrii.tripview.BusFrom has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4062bcc0 that was originally added here
06-18 16:50:30.571: E/WindowManager(1086): android.view.WindowLeaked: Activity com.mythrii.tripview.BusFrom has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4062bcc0 that was originally added here
06-18 16:50:30.571: E/WindowManager(1086):  at android.view.ViewRoot.<init>(ViewRoot.java:258)
06-18 16:50:30.571: E/WindowManager(1086):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
06-18 16:50:30.571: E/WindowManager(1086):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
06-18 16:50:30.571: E/WindowManager(1086):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.Dialog.show(Dialog.java:241)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ProgressDialog.show(ProgressDialog.java:107)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ProgressDialog.show(ProgressDialog.java:90)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ProgressDialog.show(ProgressDialog.java:85)
06-18 16:50:30.571: E/WindowManager(1086):  at com.mythrii.tripview.BusFrom.onCreate(BusFrom.java:109)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-18 16:50:30.571: E/WindowManager(1086):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-18 16:50:30.571: E/WindowManager(1086):  at android.os.Looper.loop(Looper.java:130)
06-18 16:50:30.571: E/WindowManager(1086):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-18 16:50:30.571: E/WindowManager(1086):  at java.lang.reflect.Method.invokeNative(Native Method)
06-18 16:50:30.571: E/WindowManager(1086):  at java.lang.reflect.Method.invoke(Method.java:507)
06-18 16:50:30.571: E/WindowManager(1086):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-18 16:50:30.571: E/WindowManager(1086):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-18 16:50:30.571: E/WindowManager(1086):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T11:28:31.133

我认为您
`Toast.makeText(this, "Text", Toast.LENGTH_SHORT).show();`
在方法中使用了类似或使用 Views 的东西`doInBackground()`。

如果你想使用那些在`onPostExecute()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T11:25:24.447

**只有创建视图层次结构的原始线程才能接触其视图**

您不能从后台线程更改 UI。

UI 在主线程上运行，您的 ASyncTask 在它自己的线程上运行。

如果您想通知 UI 来自另一个线程的更改，您将不得不使用处理程序。

看一眼 ：

[https://stackoverflow.com/a/5185155/413127](https://stackoverflow.com/a/5185155/413127)

或[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T11:26:09.047

您正在从在另一个线程上运行的方法中修改您`Views`的方法。`doInBackground`在 android 中这是被禁止的，你应该`onPostExecute`只修改方法中的视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T11:25:48.007

您必须将更新 ui 的后台任务部分移动到主线程上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T11:26:36.173

此行出错

```
E/AndroidRuntime(1086): Caused by:Only the original thread that created 
a view hierarchy can touch its views". 
```

也许你应该尝试并展示`Asyntack doInBackGround()`方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T11:26:53.707

您必须将部分分配给 UI 线程，或者您可以使用可从上下文中获得的 runOnUIThread 方法

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-22T02:00:55.797

这样做：而不是使用 asynktask 使用线程。它是这样的：

```
thread = new Thread() 
{
  @Override
  public void run() 
  {
    try
    {
      synchronized(this) 
      {
  runOnUiThread(new Runnable() 
  { 
           @Override
           public void run() 
           {                        
            your code goes here
           }
       });                  
     }
  }
  catch(Exception e)
  {
     e.printStackTrace();
  }         
 };
};
thread.start(); 
```

# json - 使用jquery从json中提取特定数据

> ID：11081764
> 
> 赞同：0
> 
> 时间：2012-06-18T11:23:29.793
> 
> 标签：json, jquery

从以下 json 片段：

```
cbfunc22({
  query: {
    count: 2,
      created: "2012-06-18T11:18:15Z",
      lang: "en-US",
      results: {
        tbody: [{
            tr: [{
                class: "day",
                td: [{
                    class: "dayname",
                    p: "Monday"
                  },
                  {
                    class: "weather",
                    p: "Sunny Intervals"
                  }, 
```

我可以`Monday`使用 jQuery 提取如下：

`data.query.results.tbody[0].tr[0].td[0].p`

如何提取`Sunny Intervals`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:30:00.283

```
data.query.results.tbody[0].tr[0].td[1].p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:25:52.503

```
$('tbody > tr > td > p:nth-child(2)') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:28:53.383

只需使用：

```
data.query.results.tbody[0].tr[0].td[1].p 
```

如果您正确缩进代码，则解决方案会更加明显：

```
cbfunc22(
{
    query: {
        count: 2,
        created: "2012-06-18T11:18:15Z",
        lang: "en-US",
        results: {
            tbody: [
                    {
                        tr: [
                                {
                                    class: "day",
                                    td: [
                                         {
                                               class: "dayname",
                                           p: "Monday"
                                         },
                                         {
                                           class: "weather",
                                           p: "Sunny Intervals"
                                         }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:29:02.103

`td`是一个数组，所以索引 0 给出第一个元素，索引 1 给出第二个元素：

```
data.query.results.tbody[0].tr[0].td[1].p 
```

等等……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:35:30.530

`td[0]`适用于**星期一**，`td[1]`适用于**Sunny Intervals**等

因此可以通过以下方式提取**Sunny Intervals ，**

```
data.query.results.tbody[0].tr[0].td[1].p 
```

# iphone - What is the programming flow for Xml Parsing in IPhone?can any one explain?

> ID：11081766
> 
> 赞同：0
> 
> 时间：2012-06-18T11:23:35.323
> 
> 标签：iphone, xml, parsing

i need to know aboout XML parsing in IPhone.clearly about the programming flow for XML Parsiung in IPHone??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:28:27.443

解析器有两种类型。

逐行扫描文档并按顺序提供有关它遇到的每个元素的信息的那些。在此，您必须绘制出您自己的文档树结构。如果我没记错的话，这就是默认的 NSXMLParser 的工作方式。

另一种读取整个文档并为您识别 XML 结构。然后，您可以随意使用 XPath 之类的东西随意浏览文档。谷歌的 GData 就是一个例子。

（我将不得不仔细检查我提供的示例。如果我不正确，我会编辑我的帖子，或者社区会让我们知道；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:52:45.487

我 iphone 有各种类型的解析，一种是 NSXmlParsing 和 Gdata 解析。

用于 Gdata 解析 [http://iphonebyradix.blogspot.in/2011/03/using-gdata-to-parse-xml-file.html](http://iphonebyradix.blogspot.in/2011/03/using-gdata-to-parse-xml-file.html)

对于 NSXmlParsing，您必须使用 NSXMLParser 并添加一些委托，请参见下面的链接

[http://www.codeproject.com/Questions/242493/How-do-XML-Parsing-in-objective-C](http://www.codeproject.com/Questions/242493/How-do-XML-Parsing-in-objective-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:39:10.743

参考这个：

[http://buildmobile.com/parsing-xml-files-with-objective-c/#fbid=5_d9J0DpbCv](http://buildmobile.com/parsing-xml-files-with-objective-c/#fbid=5_d9J0DpbCv)

和这个：

[http://www.codeproject.com/Questions/242493/How-do-XML-Parsing-in-objective-C](http://www.codeproject.com/Questions/242493/How-do-XML-Parsing-in-objective-C)

# python - Google App Engine：确定当前请求是否为任务队列

> ID：11081767
> 
> 赞同：4
> 
> 时间：2012-06-18T11:23:38.883
> 
> 标签：python, google-app-engine, task-queue

有没有办法动态判断当前执行的任务是标准的http请求还是TaskQueue？

在我的请求处理程序的某些部分，我做了一些 urlfetches。如果请求是标准的 http 请求，我希望 url 获取的超时延迟很短，如果它是 TaskQueue，我希望它的超时延迟很长。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T12:01:36.747

选择以下任一 HTTP 标头：

1.  `X-AppEngine-QueueName`，队列的名称（可能是默认值）
2.  `X-AppEngine-TaskName`，任务的名称，或系统生成的唯一 ID（如果未指定名称）
3.  `X-AppEngine-TaskRetryCount`, 此任务已重试的次数；对于第一次尝试，此值为 0
4.  `X-AppEngine-TaskETA`，任务的目标执行时间，从 1970 年 1 月 1 日开始以微秒为单位指定。

标准 HTTP 请求不会有这些标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:00:04.230

任务请求始终包含一组特定[的 HTTP 标头](https://cloud.google.com/appengine/docs/python/taskqueue/overview-push#task_request_headers)，您可以检查这些标头。

# ios - 在 iOS 类中一致调用的最后一个方法？

> ID：11081772
> 
> 赞同：1
> 
> 时间：2012-06-18T11:24:08.077
> 
> 标签：ios, objective-c

在不会显示为视图的 iOS 类中，例如

```
@interface MyDataClass : NSObject{} 
```

是否有一种可以被覆盖并在类的执行/生命周期结束时始终如一地调用的方法，类似于`viewDidUnload`or `dealloc`，可以安全地调用方法？

或者，人们将如何实现一种可以识别此类的有用生命周期完成的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:27:23.700

如果从内存中释放 NSObject 子类，我相信 dealloc 是最后一个被调用的方法。

```
- (void)dealloc
{
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:27:25.087

像

```
- (void)dealloc
{
    [super dealloc];
} 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:29:54.487

**如果您的意思是在整个类**的生命周期结束时运行的方法（不是实例），我想知道运行时应该如何知道您何时使用完一个类（您可以随时创建新实例） ? 有一种`+initialize`方法，但从技术上讲，该类本身永远可用（直到程序退出）。

如果您指的是实例的生命周期，那么您正在寻找的方法是`-dealloc`.

只要对象的内部引用计数达到零，就会调用 -dealloc。在非 ARC 代码中，如果您覆盖它，则必须调用超类的实现，以便最终调用`NSObject`'s `-dealloc`，这就是释放内存的时候。

编辑：关于内存不足的情况，这是您注册通知的方式：

```
// Somewhere inside the -init method of your class
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(myMethod:) 
                                             name:UIApplicationDidReceiveMemoryWarningNotification 
                                           object:nil]; 
```

在 dealloc 中，你必须这样做：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

...否则，您的应用程序可能会崩溃。

当然，您必须实现一个具有以下签名的方法，该方法将在内存不足的情况下被调用：

```
- (void) myMethod:(NSNotification*) notification
{
   // Do some cleanup here, perhaps.
} 
```

（否则，您的应用会崩溃）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T12:31:55.293

让我们假设您想要有一个不同的方法，除了`dealloc`在内存不足的情况下调用（而不是在对象被释放时）。哪个对象会调用该方法？

`viewDidUnload`是 UI 框架的一部分，由它调用。当应用程序收到有关内存不足的消息时，框架只是将消息重定向到所有活动的视图控制器。

您可以通过在您的自定义类上创建一个方法来实现相同的功能，例如`-(void)onLowMemory`，然后从您的应用程序委托从`applicationDidReceiveMemoryWarning`方法中调用它，或者您可以注册要监听的类`UIApplicationDidReceiveMemoryWarningNotification`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T13:12:40.733

这个[stackoverflow链接](https://stackoverflow.com/questions/5094615/calling-a-method-on-self-while-in-dealloc)或多或少地回答了我的问题，但不完全。我认为我的问题更多地与架构或方法采购和程序有关，而不是可以简单回答的问题。

# java - Dealing with grammar ambiguity (poker file parsing)

> ID：11081773
> 
> 赞同：4
> 
> 时间：2012-06-18T11:24:16.770
> 
> 标签：java, parsing, ambiguity, javacc

I am currently working on a poker hand history parser as a part of my bachelor project. I've been doing some research past couple of days, and came across a few nice parser generators (of which I chose JavaCC, since the project itself will be coded in Java).

Despite the hand history grammar being pretty basic and straightforward, there's an ambiguity problem due to allowed set of characters in player's nickname.

Suppose we have a line in a following format:

```
Seat 5: myNickname (1500 in chips) 
```

Token `myNickname` can contain any character as well as white spaces. This means, that both `(1500 in chip` and `Seat 5:` are valid nicknames - which ultimately leads to an ambiguity problem. There are no restrictions on player's nickname except for length (4-12 characters).

I need to parse and store several data along with player's nickname (e.g. seat position and amount of chips in this particular case), so my question is, what are my options here?

I would love to do it using JavaCC, something along this:

```
SeatRecord seat() :
{ Token seatPos, nickname, chipStack; }
{
    "Seat" seatPos=<INTEGER> ":" nickname=<NICKNAME> "(" chipStack=<INTEGER> 
    "in chips)"
    {
        return new SeatRecord(seatPos.image, nickname.image, chipStack.image); 
    }
} 
```

Which right now doesn't work (due to the mentioned problem)

I also searched around for GLR parsers (which apparently handle ambigious grammars) - but they mostly seem to be abandoned or poorly documented, except for Bison, but that one doesn't support GLR parsers for Java, and might be too complex to work with anway (aside for the ambiguity problem, the grammar itself is pretty basic, as I mentioned)

Or should I stick to tokenizing the string myself, and use `indexOf(), lastIndexOf()` etc. to parse the data I need? I would go for it only if it was the only option remaining, since it would be too ugly IMHO and I might miss some cases (which would lead to incorrect parsing)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T11:35:37.147

如果您的输入格式与您指定的一样简单，您可能可以使用简单的正则表达式：

```
^Seat ([0-9]+): (.*) \(([0-9]+) in chips\)$ 
```

本例中正则表达式引擎的 NFA 解决了您的歧义，括号内为*捕获组*，以便您提取您感兴趣的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:31:28.450

你有两个解决方案：

*   对名称添加一些限制。我几乎不记得有任何广泛使用的系统会接受这样的昵称。让他们使用字母数字字符和“_”分隔符。您也可以为座位添加关键字，例如，这样的单词不能是昵称。
*   您还可以根据您的语法构建一个用于解析的有限自动机。我认为，FSM 可以处理这种歧义语法。一旦你有了它，你就可以解析你想要的一切。

无论如何，我认为，原来的设计有问题。昵称不应该允许这样的一组名称。此外，为什么不能使用标识符而不是名称 - 名称可以存储在数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T14:47:36.847

您系统的语法可能如下所示（编写为上下文无关语法）：

```
S -> seating nickname chips

seating -> "Seat " number ":"
number -> "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"
number -> number number

nickname -> "a" | "b" | "c" ...... | "z" | ...."+" | "?" | number
nickname -> nickname nickname 

chips -> "(" number "in chips)" 
```

注意表格的规则：

```
number -> number number 
```

这基本上允许无限的语法。请注意，“无限语法”并不意味着您封装了所有内容。上面的行基本上相当于 regex `(\d*)`。

我发现在 CFG 中输入语法然后将其转换为常规语法对我很有帮助。更多关于如何在[此处](https://stackoverflow.com/questions/2639468/convert-regular-expression-to-cfg)执行此操作。祝你好运！

# javascript - Javascript 英国邮政编码正则表达式

> ID：11081786
> 
> 赞同：4
> 
> 时间：2012-06-18T11:25:13.290
> 
> 标签：javascript, regex, postal-code

我有一个验证英国邮政编码的 javascript 正则表达式。它工作得很好，但它没有考虑到有些人在中间写有空格而其他人没有。我尝试添加此内容，但无法解决：S UK 邮政编码主要是 2 个字母，后跟 1 个或 2 个数字，可选空格和 1 个数字和 2 个字母。

这是我的正则表达式，它验证没有空格的邮政编码：

```
[A-PR-UWYZa-pr-uwyz0-9][A-HK-Ya-hk-y0-9][AEHMNPRTVXYaehmnprtvxy0-9]?[ABEHMNPRVWXYabehmnprvwxy0-9]?{1,2}[0-9][ABD-HJLN-UW-Zabd-hjln-uw-z]{2}|(GIRgir){3} 0(Aa){2})$/g 
```

有任何想法吗？

**编辑**

当我意识到一组缺少小写字符时，我更改了正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T11:51:59.897

> 2 个字母后跟 1 或 2 个数字，可选空格和 1 个数字和 2 个字母。

例子：

```
/^[a-z]{2}\d{1,2}\s*\d[a-z]{2}$/i 
```

* * *

用[http://www.myregextester.com/解释](http://www.myregextester.com/)

```
 ^                        the beginning of the string
----------------------------------------------------------------------
  [a-z]{2}                 any character of: 'a' to 'z' (2 times)
----------------------------------------------------------------------
  \d{1,2}                  digits (0-9) (between 1 and 2 times
                           (matching the most amount possible))
----------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  \d                       digits (0-9)
----------------------------------------------------------------------
  [a-z]{2}                 any character of: 'a' to 'z' (2 times)
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T11:56:08.383

另一种解决方案是从字符串中删除所有空格，然后通过您已有的正则表达式运行它：

```
var postalCode = '…';
postalCode = postalCode.replace(/\s/g, ''); // remove all whitespace
yourRegex.test(postalCode); // `true` or `false` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T12:31:52.360

根据[我找到的存档页面](http://webarchive.nationalarchives.gov.uk/+/http://www.cabinetoffice.gov.uk/govtalk/schemasstandards/e-gif/datastandards/address/postcode.aspx)，规格是：

```
Pattern    w/o space   RLE                General
AN NAA     ANNAA       A1 N2 A2         | A{1,2} N{2,3} A2
ANN NAA    ANNNAA      A1 N3 A2         |
AAN NAA    AANNAA      A2 N2 A2         |
AANN NAA   AANNNAA     A2 N3 A2         |

ANA NAA    ANANAA      A1 N1 A1 N1 A2   | A{1,2} N1 A1 N1 A2  
AANA NAA   AANANAA     A2 N1 A1 N1 A2   |

GIR 0AA    We are British and for every rule there must be an 
           equal and opposite exception. 
```

**也许这在页面验证中太麻烦了。请记住，如果发生变化，您将不得不维护它。考虑像`^[A-Z].+[0-9].+[A-Z]$`. 不要成为“英雄”并样板化代码。**

如果您真的想根据该规范对其进行验证，一般规则（去除空格后）是：

```
^([A-Z]{1,2})([0-9]{2,3})([A-Z]{2})$/i
^([A-Z]{1,2})([0-9])([A-Z])([0-9])([A-Z]{2})$/i
^GIR0AA$/i 
```

正如@Stefan 指出的那样： /i 表示不区分大小写。

完成此操作后，您可以匹配组（因此是大括号），并检查字母是否与文档中的受限范围匹配。此时，您甚至可以维护邮政编码区域允许的单字母和两字母代码列表。

将 Incode（空格前的块）与 Outcode（空格后的块）分开的一般规则似乎是 Outcode 从最后一个数字开始（即使对于 GIR）。

坦率地说，我会在基本检查后停止打扰。如果值得根据更完整的规范进行验证，那么可能值得检查邮政编码区域是否存在，如果这值得，您不妨连接到从邮政编码中提取地址的真实服务。这些服务会很高兴地通知您邮政编码不存在，这是一种比您想要编写的更强大和可维护的检查。

[[编辑：当然还有维基百科](http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom)上的另一个规范]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-04T09:42:02.863

我们发现大多数正则表达式并未完全涵盖英国邮政编码。我们发现它需要涵盖以下选项：

*   A1 1AA
*   A1A 1AA
*   AA11 1AA

基于此，我建议：

`/^([A-Z][A-Z0-9]?[A-Z0-9]?[A-Z0-9]? {1,2}[0-9][A-Z0-9]{2})$/;`

`GIR0AA`邮政编码曾经属于 Girobank 但不再受支持，请参阅参考： http [://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom](http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T11:45:49.793

我不知道英国邮政编码是怎么做的，从你的描述我也没有理解。顺便说一句，您可以`\s{0,1}`在需要说“这里我们可以有一个空间”的地方添加。它的意思是“0 或 1 个空格”。

# xna - 使用 XNA 在多台显示器上全屏显示

> ID：11081792
> 
> 赞同：1
> 
> 时间：2012-06-18T11:25:41.083
> 
> 标签：xna, fullscreen, multiple-monitors

我正在使用 XNA 构建一个特殊的应用程序，该应用程序是为具有多个显示器的计算机而设计的。问题是如果我告诉我的 XNA 应用程序变成全屏，它只会覆盖主屏幕。如何确保我的应用程序在所有屏幕上全屏运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:11:32.273

这听起来一点都不简单。当屏幕具有不同的分辨率和纵横比时会发生什么？您必须为每个屏幕单独创建一个渲染目标。没有办法可靠地将它们全部网格化成一个巨大的矩形。查看[GraphicsAdapter](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.graphicsadapter_members.aspx)类，它应该管理所有可用的图形适配器。我从未在游戏中使用过多显示器，但这就是我要开始的地方。看看您是否可以创建多个图形设备，或者至少在绘制调用之间切换适配器，以便将不同的目标渲染到不同的屏幕。

# web-applications - Embed jasper report in web application

> ID：11081793
> 
> 赞同：0
> 
> 时间：2012-06-18T11:25:42.143
> 
> 标签：web-applications, jasperserver

I have created some reports and deployed the same in jasper server. I am able to embed the reports in my web application by using tag. The problem is the embed report displays the jasper server logo, menu bar and loggedin user information. But i don't want to show the same to end user. Can anybody help me how to achieve the above requirement?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:37:21.320

将此附加到您的网址：

```
&viewAsDashboardFrame=true 
```

更一般地说，您需要强制 sitemesh 不装饰页面还有其他方法可以实现这一点......但 viewAsDashboardFrame 专门用于帮助解决这个问题。

# android - 应用程序升级期间的 Android 解析错误

> ID：11081797
> 
> 赞同：0
> 
> 时间：2012-06-18T11:25:51.150
> 
> 标签：android, upgrade, parse-error

我一直在尝试为我的 Android 应用程序实施升级计划，该计划不会在 Android 市场上发布。

设计的应用程序工作流程如下：

1.  登录时验证用户并启动主菜单活动。
2.  从主菜单活动向我的网站发送一个请求以获取最新版本代码值（存储在服务器上的 SQL 数据库中）。
3.  返回的版本代码值将与设备上安装的 apk 的版本代码值进行比较。
4.  如果返回的版本代码值不同，则下载并安装位于服务器上的新 apk 文件。

确保在升级工作流程生效之前已完成以下任务也很重要。

1.  必须编译新版本的 apk 以使用更新的 versionCode 值发布
2.  必须更新存储在网站数据库中的 versionCode 值
3.  新编译的apk文件必须上传到web服务器的正确位置

我已经实现了工作流程的前 3 个阶段，但是当我尝试实现第 4 部分时，我最终得到了“解析错误：解析包时出现问题”错误。

下面是有问题的代码：

```
protected void upgradeApplication() {
    StringBuilder urlBuilder = new StringBuilder(getString(R.string.website_ip) + "/" + getString(R.string.application_middleware) + "/" + getString(R.string.apk_folder) + "/"); 

    File file = new File(urlBuilder.toString(), getString(R.string.apk_file));

    Intent intent = new Intent(Intent.ACTION_VIEW);

    intent.setDataAndType(Uri.fromFile(file), "application/vnd.android.package-archive");

    startActivity(intent);
} 
```

我已经通过设备 Web 浏览器直接下载 apk 并从下载文件夹安装它来测试 apk 是否可以正确安装。但是当我尝试从应用程序中安装时，我得到了发布的错误。

“解析错误：解析包有问题”

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:45:36.570

如果用这条线

```
File file = new File(urlBuilder.toString(), getString(R.string.apk_file)); 
```

您试图通过将 url 作为参数传递来下载文件，那么它将无法正常工作。构造`File`函数无法下载文件。

您应该[使用 AsyncTask](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)下载 apk，等待它完成，然后只有您可以安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:52:29.600

如果您将 .apk 文件存储在私有内部存储中，则它需要`Context.MODE_WORLD_READABLE`许可。

下面的片段会帮助你。

```
String outFileName = path+"/<Application_Name>.apk";
OutputStream myOutput = openFileOutput("<Application_Name>.apk", Context.MODE_WORLD_READABLE); 
```

然后安装它，

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(path+"/<Application_Name>.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

# multithreading - erlang threading and OS threads correlation

> ID：11081802
> 
> 赞同：1
> 
> 时间：2012-06-18T11:26:05.323
> 
> 标签：multithreading, erlang

> **Possible Duplicate:**
> [How, if at all, do Erlang Processes map to Kernel Threads?](https://stackoverflow.com/questions/605183/how-if-at-all-do-erlang-processes-map-to-kernel-threads)

I know that erlang is green threaded (not OS threads, more lightweight) but I wanted to know what it does with OS threads.. does it have only one, or maybe 1 per cpu?

# android - 在 C# 中使用 BitmapFactory.DecodeFile 时占用更大的内存（小图像占用大量内存）

> ID：11081806
> 
> 赞同：1
> 
> 时间：2012-06-18T11:26:08.550
> 
> 标签：android, image, memory, bitmap, xamarin.android

我只是想看看是否有其他人注意到，当将图像加载到内存中时，完全相同的 C# 代码会使用更多内存来保存图像（大约是 Java 的 1.5 倍）。

此 Java 代码导致总内存大小为**105.5 MB**：

```
Bitmap[] bitmaps = new Bitmap[100];

for (int i = 0; i < 100; i++)
{
    String root = Environment.getExternalStorageDirectory().getAbsolutePath();
    String imagePath = "/evolution/threesixty/216/Edaphosaurus_001.jpg";

    bitmaps[i] = BitmapFactory.decodeFile(root + imagePath);
} 
```

此 C# 代码产生**148.1 MB**：

```
Bitmap[] bitmaps = new Bitmap[100];

for (int i = 0; i < 100; i++)
{
    string root = Environment.ExternalStorageDirectory.AbsolutePath;
    string imagePath = "/evolution/threesixty/216/Edaphosaurus_001.jpg";

    bitmaps[i] = BitmapFactory.DecodeFile(root + imagePath);
} 
```

有人对为什么有任何想法吗？我知道 .NET 包装器可能会使用更多来保存额外的绑定数据或东西，但肯定不会那么多吗？

*另外，作为一个附带问题：每个图像在磁盘上只有**60 KB**，为什么内存版本是**1 MB**？我知道我的加载方法不会进行任何采样/密度检查，但这不是目的。确定加载 <100KB 的图像不应超过 100KB 的内存空间？*

这是我正在使用的图像（994x748px @ 300dpi）：

![图片](../Images/535a693eb351e7ef9e74340bc72ed305.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:07:34.797

100 张图像的 148.1 MB 数字正是我对此的预期。994 x 748 提供 743,512 像素；假设您使用的是每像素使用 2 个字节的格式（这对于图像的质量非常低，FWIW - RGB565 格式应该在几十年前在国际上被禁止），那么每张图像为您提供 1.481 MB。这当然比磁盘上的图像大小要大得多，因为图像文件是经过压缩的。

我不知道为什么 Java 版本只消耗 105.5 MB；据我所知，没有一种位图格式每像素使用 1.333 个字节。很可能您读错了内存使用情况，或者 Java 运行时将一些图像缓存到磁盘而不是将它们保存在内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:56:57.540

基于 Mono for Android 邮件列表的回复：

> 您正在加载的图像是 jpg 压缩的。位图是一种未压缩的格式。谷歌搜索显示典型的 JPEG 压缩比为 10:1 到 20:1，而不会损失明显的图像质量。60KB -> 1 MB 在该范围内。

还有一个：

> 将位图加载到内存中会对其进行解压缩，并且根据您加载的位图配置，它将占用比磁盘上压缩大小更多的内存。

在查看了有关压缩的信息之后（我不知道我脑子里发生了什么，因为我意识到压缩会使内存中的图像更小，以便保存和加载它，然后将其解压缩到内存中），我现在明白了事情是如何工作的； ) 当保存为位图时，图像被解压缩到几乎 2MB - 如果我查看 Irfanview 中的图像属性。

所以我现在正在做的是将样本大小设置为`2`并使用`Bitmap.Config.Rgb565`. 这将总图像大小减少到大约 30 MB，这要好得多。虽然质量不太好，但我可以在需要时加载更高分辨率的图像而用户不知道。

# sql - Number of working days between two dates

> ID：11081808
> 
> 赞同：2
> 
> 时间：2012-06-18T11:26:10.240
> 
> 标签：sql, sql-server, tsql

I want number of working days in between to dates. For example if we have **01-01-2012** and **20-01-2012**, i want to get the number of working days in between that two dates using T-SQL.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T11:42:15.610

由于 SQL Server 不知道您的公司认为工作日是多少，因此该问题的最佳答案可能是使用[日历表](http://web.archive.org/web/20110314003043/http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)。一旦你有一个包含过去和未来日期的表，并且列如`IsWorkDay`正确更新，查询很简单：

```
SELECT [Date] FROM dbo.Calendar 
  WHERE [Date] >= @start 
  AND [Date] <= @end
  AND IsWorkDay = 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T11:56:51.067

```
DECLARE @fromDate datetime, @toDate datetime 
SELECT @fromDate = ' 01-01-2012', @toDate = '20-01-2012'

SELECT (DATEDIFF(day, @fromDate, @toDate) + 1) 
        - (DATEDIFF(week, @fromDate, @toDate) * 2)  
        - (CASE WHEN DATENAME(weekday, @fromDate) = 'Sunday' THEN 1 ELSE 0 END) 
        - (CASE WHEN DATENAME(weekday, @toDate) = 'Saturday' THEN 1 ELSE 0 END) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T19:56:59.837

我喜欢 Aaron Bertrand 的建议，所以我编写了这段代码，可以添加到您的查询中。它在 2 个日期之间创建一个表变量，然后您可以通过加入 CalendarDate 列在查询中使用该变量（只需记住在加入之前删除任何时间信息）。这是基于周一到周五的典型美国工作周。

```
DECLARE @StartDate DATE
DECLARE @EndDate DATE

SET @StartDate = '2013-08-19'
SET @EndDate = '2013-08-26'

DECLARE @BusinessDay TABLE
(
    CalendarDate DATETIME,
    IsBusinessDay INT
)

DECLARE @Counter DATETIME = @StartDate
WHILE(@Counter <= @EndDate)
BEGIN
    INSERT INTO @WorkDays
    SELECT @Counter, CASE WHEN DATENAME(WEEKDAY, @Counter) NOT IN ('Saturday', 'Sunday') THEN 1 ELSE 0 END
    SET @Counter = DATEADD(DAY, 1, @Counter)
END

SELECT * FROM @BusinessDay 
```

缺点是必须为每个需要它的查询重新创建它，因此如果您经常这样做，固定表可能是更好的方法。

可以这样使用......

```
SELECT 
     BusinessDays = SUM(IsBusinessDay)
FROM
     @BusinessDay
WHERE
     CalendarDate BETWEEN @StartDate AND @EndDate 
```

这将为您提供两个日期之间的工作日数。就像许多其他人所说的那样，这显然没有考虑到任何假期或我的生日。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-16T17:10:22.193

根据之前的代码，我对其进行了调整以排除最后一天（未询问但我需要它）。

```
 select (DATEDIFF(dd,@fromDate, @toDate))    
- (DATEDIFF(ww,@fromDate, DATEADD(dd,-1,@toDate)) * 2) 
- (CASE WHEN DATENAME(dw, @fromDate) = 'Sunday' THEN 1 else 0 end)
- (CASE WHEN DATENAME(dw, @toDate) = 'Sunday' THEN 1 else 0 end) 
```

我使用包含这些日期的表格删除了圣日

```
 - ( select count(distinct dcsdte) 
    from calendar_table 
    where dcsdte between @fromDate 
        and @toDate ) 
```

# c# - How to do a simple addslash to a string c#

> ID：11081812
> 
> 赞同：0
> 
> 时间：2012-06-18T11:26:25.120
> 
> 标签：c#, string, replace, addslashes

I would like to do a simple addslash to a string in c#.

My string is (for example) : "bla bla ' bla bla" And i would like the new string to be : "bla bla \' bla bla".

Unfortunately, when i do

```
str.Replace("'", "\'") or str.Replace("'", "\\'") 
```

or a lot of other combination i end up with :

"bla bla \\' bla bla". I don't get it to just have one backslash.

Do you guys have some ideas ?

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T11:29:35.073

`str.Replace("'", "\\'")`是正确的用法。它将用单斜杠后跟单引号替换单引号。

由于字符串在 C# 调试器中的显示方式，if 看起来像*两个*斜杠，但如果您在某处（控制台、网页、winform、文件输出）显示字符串，它将只有一个斜杠。

# javascript - 在特定条件下触发事件

> ID：11081813
> 
> 赞同：1
> 
> 时间：2012-06-18T11:26:28.900
> 
> 标签：javascript, javascript-events, jquery

我有一个 div 将用作其他元素的容器，我有将元素添加到该 div 的按钮。

请查看[演示](http://jsfiddle.net/GkXhe/)以了解它。

所以，我想做的是在添加新元素之前检查 div 是否达到了我定义的最大元素数，比如说 4。

我可以在每次添加之前检查这个条件，但我确信这不是最好的方法（我们了解到，如果代码包含复制/粘贴则不是最好的解决方案）另外，这只是一个示例，就我而言，我有很多按钮..

有没有办法拥有这样的听众？

```
$('#container').bind('divFull', function(){
    //My code
}); 
```

这样我就可以禁用按钮..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:29:22.563

首先，你要监听 DOM 变化事件，然后你可以根据孩子的数量触发一个自定义事件

```
$('#container').bind('DOMSubtreeModified', function(){
    if($(this).children().length>=4){
        $(this).trigger('divFull');
    }
}); 
```

然后您可以绑定到您的自定义**divFull**事件

```
$('#container').bind('divFull', function(){
    alert('container is full');
    $('button').prop('disabled',true);
}); 
```

基于您的示例的[工作演示](http://jsfiddle.net/GkXhe/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:47:46.003

我稍微更改了@skafandri 方法，因为该事件`DOMSubtreeModified`在 IE < 9 上不起作用并且已[折旧](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMSubtreeModified)。`divFull`主要变化是创建一个函数，如果容器中有 4 个孩子，该函数将调用该事件。

```
var checkFull = function() {
    if ($container.children().length === 4) {
        $container.trigger('divFull');
    }
}

$('#button1').click(function(){
    $container.append('<div class="element">some text</div>');
    checkFull();
}); 
```

这是[演示](http://jsfiddle.net/Calou/GkXhe/3/)。

# c++ - 使用 LLVM 在 OSX 上将问题与 boost::program_options 联系起来

> ID：11081818
> 
> 赞同：8
> 
> 时间：2012-06-18T11:26:42.190
> 
> 标签：c++, boost, c++11, osx-lion, clang

由于 Boost 1.49 的问题，我无法通过 C++ 程序中的链接阶段。我已切换到 C++ ( `-std=c++11 -libc=libc++`)，它适用于另一段代码（也使用 boost）。Boost 是使用自制软件安装的：

```
brew install boost --universal --with-mpi --with-icu 
```

麻烦从`boost::program_options`. 我得到这样的链接错误：

```
 "boost::program_options::validate(boost::any&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, int)", referenced from:

... etc. ...

ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这有点奇怪，因为在使用的库上执行 nm 显示，该符号似乎在那里：

```
nm -U /usr/local/lib/libboost_program_options-mt.dylib  | grep validate
0000000000019880 - 01 0000   FUN __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISbIwSt11char_traitsIwESaIwEESaIS7_EEPSsi
0000000000019880 T __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISbIwSt11char_traitsIwESaIwEESaIS7_EEPSsi
00000000000199e0 - 01 0000   FUN __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISbIwSt11char_traitsIwESaIwEESaIS7_EEPbi
00000000000199e0 T __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISbIwSt11char_traitsIwESaIwEESaIS7_EEPbi
0000000000019930 T __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISsSaISsEEPSsi
0000000000019930 - 01 0000   FUN __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISsSaISsEEPSsi
0000000000019c70 - 01 0000   FUN __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISsSaISsEEPbi
0000000000019c70 T __ZN5boost15program_options8validateERNS_3anyERKSt6vectorISsSaISsEEPbi 
```

我已经尝试通过在安装之前相应地设置 CXX 和 CXX_FLAGS 来哄自制软件使用 clang 而不是 gcc 来编译 boost。不确定我是否成功了。

指针非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T16:50:31.033

您将需要使用 clang 和 std11 标志重新编译 boost，libc++ 库与 OSX 中安装的 libstdc++ 不二进制兼容（更改为 gpl3 之前的 gcc 的早期版本）。如果您的 clang 版本是 3.1 或更高版本，那么您可以使用（否则将 c++11 更改为 c++0x 以获得早期版本）。

```
./bootstrap.sh
mkdir build
sudo ./bjam toolset=clang cxxflags="-std=c++0x -stdlib=libc++" variant=release link=static threading=multi runtime-link=shared --build-dir=Build --layout=system --without-mpi --without-python install --prefix=/usr/local 
```

您当然可以根据需要更改任何这些，除了

> 工具集=clang cxxflags="-std=c++0x -stdlib=libc++"

这应该适合你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T14:40:07.363

我想分享我在 Mac OS X 10.8.5 上使用 Xcode 5.0 提供的 clang 5.0.0 构建 Boost 1.54 的（中度痛苦的）经验。如果你想要 C++11 的特性，编译和链接是非常重要的`clang++`，而不是`clang`.

说明：采取以下简单程序：

```
#include <iostream>
#include <string>

int main(int argc, char *argv[]) {
    std::string str = "OK";
    std::cout << str << std::endl;
    return 0;
} 
```

可以使用以下命令构建：

`clang++ -std=c++11 -stdlib=libc++ clangstr.cc -o clangstr`

但是，如果您尝试这样做：

`clang -std=c++11 -stdlib=libc++ clangstr.cc -o clangstr`

然后你会得到链接器错误。请注意，`clang`手册页说语言是由`-std=`选项选择的，但这显然是不够的。

教训是我们必须告诉在编译带有 C++11 支持的 Boost 时`bjam`显式使用。`clang++`

在[这篇非常有用的帖子之后](http://cplusplusmusings.wordpress.com/2012/07/05/clang-and-standard-libraries-on-mac-os-x/)，我将以下内容放入我的`tools/build/v2/user-config.jam`：

```
using clang : 11
    : "/usr/bin/clang++"
    : <cxxflags>"-std=c++11 -stdlib=libc++ -ftemplate-depth=512" <linkflags>"-stdlib=libc++"
    ; 
```

然后我跑了`./b2 clean`，然后我用以下命令构建了 Boost：

```
mkdir -p build/clangstage/
./b2 -j8 --build-dir=build --stagedir=build/clangstage toolset=clang-11 define=BOOST_SYSTEM_NO_DEPRECATED variant=release threading=multi address-model=64 stage 
```

这将构建具有多线程支持的 64 位静态和动态库。如果您需要不同的设置，请相应地更改上面的命令。

# linux - MongoDB 服务未在 Fedora 中运行

> ID：11081822
> 
> 赞同：23
> 
> 时间：2012-06-18T11:26:51.847
> 
> 标签：linux, mongodb, fedora

刚刚在 Fedora 17 64 位上安装了一个干净版本的 mongodb，但 Mongo 服务无法运行。

我在安装过程中遵循了[这些说明](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/)

跑步

```
service mongod start 
```

结果是

```
Starting mongod (via systemctl):  Job failed. See system journal and 'systemctl status' for details.  [FAILED] 
```

所以我跑了

```
systemctl status mongod.service 
```

这给了我

```
mongod.service - SYSV: Mongo is a scalable, document-oriented database.
  Loaded: loaded (/etc/rc.d/init.d/mongod)
  Active: failed (Result: exit-code) since Mon, 18 Jun 2012 13:15:56 +0200; 58s ago
 Process: 13584 ExecStart=/etc/rc.d/init.d/mongod start (code=exited, status=1/FAILURE)
  CGroup: name=systemd:/system/mongod.service 
```

Mongo登录`/var/log/mongo/mongod.log`为空

谢谢

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-18T12:57:13.493

如何在 fedora linux 上安装 mongodb 和 mongodb-server（在 f16 和 f17 上验证）。所有命令都旨在在 su 会话中运行。

1）确保你没有安装mongodb

```
# yum erase mongodb
# yum erase mongo-10gen  (if it is installed) 
```

2) 从 fedora yum 存储库安装

```
# yum --disablerepo=* --enablerepo=fedora,updates install mongodb mongodb-server 
```

3）启动mongod（mongodb守护进程）

```
# systemctl start mongod.service 
```

4) 验证 mongod 是否正在运行

```
# systemctl status mongod.service
# tail /var/log/mongodb/mongodb.log
# nmap -p27017 localhost 
```

或运行客户端

```
# mongo
MongoDB shell version: 2.0.2
connecting to: test
> db.test.save( { a: 1 } )
> db.test.find()
{ "_id" : ObjectId("4fdf28f09d16204d66082fa3"), "a" : 1 } 
```

5) 自定义配置

```
# vim /etc/mongodb.conf
# systemctl restart mongod.service 
```

6）让mongodb服务开机自动启动

```
# systemctl enable mongod.service 
```

**Fedora 18 更新**

当 systemd 第一次在慢速或负载机器上启动时，mongod 服务可能在完成初始化之前超时，systemd 将服务标记为失败。

症状：

```
# journalctl -xn

-- Unit mongod.service has begun starting up.
10:38:43 local mongod[24558]: forked process: 24560
10:38:43 local mongod[24558]: all output going to: /var/log/mongodb/mongodb.log
10:40:13 local systemd[1]: mongod.service operation timed out. Terminating.
10:40:13 local systemd[1]: Failed to start High-performance, schema-free document-oriented database.
-- Subject: Unit mongod.service has failed 
```

很容易治愈，重启服务：

```
# systemctl restart mongod.service 
```

这应该成功完成初始化并使守护程序处于运行状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-01T23:46:49.560

我只是遇到了同样的问题，在我的情况下，它是由使用非官方 repo 的一些网站的说明安装 mongodb 引起的。如果您有同样的问题并且上面的答案没有解决您的问题，请尝试卸载“mongodb-org”包并按照官方文档的说明重新安装：[https ://docs.mongodb.com/manual/tutorial/install -mongodb-on-red-hat/](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/)

在 fedora 中卸载软件包的其余部分：

```
sudo dnf remove <package-name> 
```

# mysql - Jelastic Glassfish Connection Pool - Context

> ID：11081825
> 
> 赞同：0
> 
> 时间：2012-06-18T11:27:06.567
> 
> 标签：mysql, jakarta-ee, glassfish, connection-pooling

my problem happens only on Jelastic cloud server nodes, not on local machine.

I have done these:

*   I have uploaded mysql jar driver to the `lib` folder of glassfish
*   I have created my connection pool and the ping is successfull
*   I created data source

but when I run the following JSP:

```
<%@page import="java.io.Writer"%>
<%@page import="javax.sql.DataSource"%>
<%@page import="java.sql.Connection"%>
<%@page import="javax.naming.InitialContext"%>
<%@page import="javax.naming.Context"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
  </head>
  <body>
    <h1>Hello World!</h1>
    <%
    InitialContext ctx = new InitialContext();
    DataSource ds = (DataSource)ctx.lookup("jdbc/rook-server");
    Connection conn = ds.getConnection();
    %>
  </body>
</html> 
```

I get the following error:

```
HTTP Status 500 -

type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: java.sql.SQLException: Error in allocating a connection. Cause: Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource
root cause

java.sql.SQLException: Error in allocating a connection. Cause: Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource
root cause

javax.resource.spi.ResourceAllocationException: Error in allocating a connection. Cause: Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource
root cause

com.sun.appserv.connectors.internal.api.PoolingException: Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource
root cause

com.sun.appserv.connectors.internal.api.PoolingException: Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource
root cause

com.sun.appserv.connectors.internal.api.PoolingException: Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource
root cause

javax.resource.ResourceException: Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource
note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.1 logs.

GlassFish Server Open Source Edition 3.1.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:13:38.557

我来自 Jelastic 团队。我们现在正在分析这个问题。当我们找到原因时，我们会通知您。尝试重新启动 GlassFish，也许这会有所帮助。问候， 玛丽娜

# spring-webflow - 显示标签前缀和spring webflow

> ID：11081842
> 
> 赞同：0
> 
> 时间：2012-06-18T11:28:13.460
> 
> 标签：spring-webflow, displaytag

我正在使用 Spring Web Flow 开发一个界面。我有这个 [B]uebersicht.xhtml[/B]

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:display="http://displaytag.sf.net"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/WEB-INF/layouts/standard.xhtml">

    <ui:define name="content">      

        <h:dataTable value="#{arrayVar}" var="conv">
                  <h:column>
                               <h:outputText value="#{conv.id}"/>
                  </h:column>
        </h:dataTable>

        <div>
            <div>
                Table:
                <display:table id="row" name="arrayVar" pagesize="3" requestURI="/spring/uebersicht">
                    <display:column title="row number" sortable="true" sortName="rowNum">
                        <h:outputText value="${row_rowNum}"/>
                    </display:column>
                    <display:column title="name" sortable="true" sortName="name">
                        <h:outputText value="${row.id}"/>
                    </display:column>
                </display:table>
            </div>
        </div>

    </ui:define>

</ui:composition> 
```

arrayVar 是我从一个流上的操作中保存值的变量：

```
<on-start>
        <evaluate expression="databaseActionsBean.getArrayVar()" result="flowScope.arrayVar " />
    </on-start> 
```

使用第一个示例，我得到了我需要的值。但是我想使用 displayTag，所以我构建了这个 java 类：

```
@Controller
@RequestMapping(value="/spring/uebersicht")
public class UebersichtController {

    private DatabaseActionsBean databaseActionsBean = new DatabaseActionsBean();

    @RequestMapping(method = RequestMethod.GET)
    public String conversationsToShow(Model model) {
        model.addAttribute("arrayVar", databaseActionsBean.getStoppedConversations());
        return "uebersicht";
    }
} 
```

但是第二张表没有给我任何结果，我可以看到这个警告信息

> 警告：此页面调用 XML 命名空间[http://displaytag.sf.net](http://displaytag.sf.net) 声明，前缀显示，但该命名空间不存在标记库。

可能是什么问题呢？

我包括 pom 依赖项：

```
<!--Display tag-->
        <dependency>
            <groupId>displaytag</groupId>
            <artifactId>displaytag</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl104-over-slf4j</artifactId>
            <version>1.4.2</version>
        </dependency>
        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency> 
```

提前致谢

# vb.net - 如何为 VB.NET 中添加的数据绑定控件设置默认值

> ID：11081843
> 
> 赞同：1
> 
> 时间：2012-06-18T11:28:17.470
> 
> 标签：vb.net, add, vb.net-2010, databound-controls

我有一个 vb.net 2010 表单，其中包含来自绑定导航器导航的数据集中两个表中的 22 个数据绑定控件。这成功地添加了删除和更新。但是，我需要的是在添加新记录时，我需要预先填写一些字段。更具体地说，我有积分余额字段等，它们可以是任何值，但在新客户上通常为 0，所以我想在添加新记录时将它们初始化为 0。

我`AddingNew`在我的数据源上找到了一个事件，但是在添加新项目之前调用了这个事件，因此我的所有初始化都丢失了。

对此的任何帮助将不胜感激。亲切的问候费尔多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:52:19.650

由于您使用的是 DataTables，因此您可以手动设置`DefaultValue`DataColumn 的属性：

```
Dim dt As New DataTable
Dim dc As New DataColumn("test", GetType(String))
dc.DefaultValue = "hello"
dt.Columns.Add(dc)
dt.Rows.Add()
Debug.WriteLine(dt.Rows(0)("test").ToString) 
```

结果：你好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:53:10.103

答案包括多个链接表解决方案：

就像 LarsTech 说的那样使用

`dataset.table.Columns.Item("someField").DefaultValue = someValue`

如果您有一个标准默认值，它会很好地工作，但它也适用于生成的默认值，如果您在保存到下一个值时重置此默认值（如果进行了新添加）。但是，如果您使用数据集作为无法生成子表记录的数据源（例如在我的情况下，仅在使用数据库触发器链接所有不同类型的帐户进行保存时才会生成帐户 ID），您仍然可以为其他字段设置默认值，来自兄弟（或不存在的父）表的字段，但

`dataset.siblingTable.Columns.Item("someField").DefaultValue = someValue`

将不起作用，因为绑定导航器仅生成第一个同级，并且在触发之前不会生成父级。但是，在`BindingSource.PositionChanged`通过单击添加生成的绑定源事件中，您可以自由地将默认值放入屏幕上的实际控件中，并且它们不会被空值覆盖，显然您需要限制这一点，因此只有在用户按下添加时才会发生通过在添加按钮的事件中添加一个变量来`Clicked`告诉您何时单击添加并在保存或回滚时重置此变量。也可以修改具有 if null 或空默认值的绑定本身。

希望这对其他人有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T22:33:49.007

在 BindingNavigator 中的“添加行”按钮上使用 MouseUp 事件，而不是“单击”事件。这是因为在单击事件完成之后，datagridview 中不存在新的 ROW。

```
Private Sub BindingNavigatorAddNewItem_MouseUp(sender As Object, e As MouseEventArgs) Handles BindingNavigatorAddNewItem.MouseUp
    'works with add row from the binding navigator
    myDataGridView.Item(3, myDataGridView.CurrentRow.Index).Value = txtDefaultDescrip.Text.Trim
End Sub 
```

直接在 DataGridView 中添加数据时做同样的事情。

```
Private Sub myDataGridView_DefaultValuesNeeded(sender As Object, e As DataGridViewRowEventArgs) Handles myDataGridView.DefaultValuesNeeded
    'works with add row inside a datagridview
    e.Row.Cells(3).Value = txtDefaultDescrip.Text.Trim
End Sub 
```

在此示例中，我的 from 上显示了一个可编辑的默认值。如果您有一个不变的默认值（例如，第 3 列始终为 1），那么您应该在设置数据源时这样做。

# bash - 这是在bash中复制符号链接目录的正确方法吗？

> ID：11081849
> 
> 赞同：2
> 
> 时间：2012-06-18T11:28:45.447
> 
> 标签：bash, copy, symlink

我有`a`在某处符号链接的目录。我想将其内容复制到目录`b`。在某些极端情况下（例如隐藏文件、文件名中的外来字符等），以下简单的解决方案不会中断吗？

```
mkdir b
cp -rt b a/* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:31:25.227

只需添加尾随“/”将跟随符号链接并复制内容而不是链接本身。

```
cp -a symlink/ dest 
```

Bash globbing 不会阻塞文件名中的特殊字符。这就是使用通配符而不是解析诸如`ls`. 以下也可以。

```
shopt -s dotglob
mkdir -p dest
cp -a symlink/* dest/ 
```

# solr - 在 Windows 上运行 Apache Nutch

> ID：11081852
> 
> 赞同：1
> 
> 时间：2012-06-18T11:28:49.520
> 
> 标签：solr, web-crawler, nutch

我正在尝试在 Windows 上运行 Apache Nutch 进行网络爬行。我已经安装了 cygwin 并设置了它的路径。但是我得到了以下异常：

```
Exception in thread "main" java.io.IOException: Failed to set permissions of path:    \tmp\hadoop-cjindal\mapred\staging\cjindal-330065706\.staging to 0700
at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:682)
at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:655)
at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
at org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:189)
at org.apache.hadoop.mapreduce.JobSubmissionFiles.getStagingDir(JobSubmissionFiles.java:116)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:856)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083)
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
at org.apache.nutch.crawl.Injector.inject(Injector.java:217)
at org.apache.nutch.crawl.Crawl.run(Crawl.java:127)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.nutch.crawl.Crawl.main(Crawl.java:55) 
```

我还没有安装hadoop。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:04:20.933

最好在 Unix 上运行 Nutch。但是如果你想在 Windows 上运行它，那么你可能可以下载 1.2 版本的 Nutch，它带有没有这个问题的 Hadoop 版本。

# c - 如何跟踪系统调用的进程？

> ID：11081859
> 
> 赞同：5
> 
> 时间：2012-06-18T11:29:07.647
> 
> 标签：c, linux, system-calls, ptrace

我正在尝试编写一个程序来跟踪系统调用。我很难完成这项工作。我尝试调用 fork() 来创建自身的实例（代码），然后监视生成的子进程。

目标是让父进程返回子进程进行的每个系统调用的索引并将其输出到屏幕。不知何故，它没有按计划工作。

这是代码：

```
#include <unistd.h>     /* for read(), write(), close(), fork() */
#include <fcntl.h>      /* for open() */
#include <stdio.h>
#include <sys/ptrace.h>
#include <sys/reg.h>
#include <sys/wait.h>
#include <sys/types.h>

int main(int argc, char *argv[]) {
    pid_t child;
    long orig_eax;
    child = fork();

    if (0 == child) 
    {
        ptrace(PTRACE_TRACEME, 0, NULL, NULL);
        if (argc != 3) {
           fprintf(stderr, "Usage: copy <filefrom> <fileto>\n"); 
           return 1;
        }

        int c;
        size_t file1_fd, file2_fd; 
        if ((file1_fd = open(argv[1], O_RDONLY)) < 0) {
           fprintf(stderr, "copy: can't open %s\n", argv[1]);
           return 1;
        }

        if ((file2_fd = open(argv[2], O_WRONLY | O_CREAT)) < 0) {
            fprintf(stderr, "copy: can't open %s\n", argv[2]);
            return 1;
        }

        while (read(file1_fd, &c, 1) > 0) 
        write(file2_fd, &c, 1);
    }
    else
    {
        wait(NULL);
        orig_eax = ptrace (PTRACE_PEEKUSER, child, 4 * ORIG_EAX, NULL);
        printf("copy made a system call %ld\n", orig_eax);
        ptrace(PTRACE_CONT, child, NULL, NULL);
    }           
return 0;
} 
```

此代码基于此代码：

```
#include <sys/ptrace.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>
#include <linux/user.h>   /* For constants
                               ORIG_EAX etc */
int main()
{   
    pid_t child;
    long orig_eax;
    child = fork();
    if(child == 0) {
        ptrace(PTRACE_TRACEME, 0, NULL, NULL);
        execl("/bin/ls", "ls", NULL);
    }
    else {
        wait(NULL);
        orig_eax = ptrace(PTRACE_PEEKUSER,
                          child, 4 * ORIG_EAX,
                          NULL);
        printf("The child made a "
               "system call %ld\n", orig_eax);
        ptrace(PTRACE_CONT, child, NULL, NULL);
    }
    return 0;
} 
```

这个的输出是：

```
The child made a system call 11 
```

这是 exec 系统调用的索引。

根据 wait() 的手册页：

```
All of these system calls are used to wait for state changes in a child
of the calling process, and obtain information about  the  child  whose
state  has changed. A state change is considered to be: the child terminated; 
the child was stopped by a signal; or the child was resumed by
a  signal. 
```

我理解的方式是，每次用户程序调用系统调用时，内核将首先检查进程是否在执行系统调用例程之前被跟踪，并用信号暂停该进程并将控制权返回给父进程. 那不是已经改变了状态吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T00:18:14.383

问题是，当孩子调用`ptrace(TRACEME)`它时，它会设置自己进行跟踪，但实际上并没有停止——它会一直运行直到它调用`exec`（在这种情况下它会以 SIGTRAP 停止），或者它得到一些其他信号。因此，为了让父母在没有 exec 调用的情况下看到它的作用，您需要安排孩子接收信号。最简单的方法可能是在打电话`raise(SIGCONT);`后立即让孩子打电话（或任何其他信号）`ptrace(TRACEME)`

现在在父母中，您只需等待（一次）并假设孩子现在在系统调用处停止。如果它在信号处停止，则情况并非如此，因此您需要调用`wait(&status)`以获取子状态并调用`WIFSTOPPED(status)`并`WSTOPSIG(status)`查看它为什么停止。如果它由于系统调用而停止，则信号将是 SIGTRAP。

如果您想在客户端查看多个系统调用，则需要循环执行所有这些操作；就像是：

```
while(1) {
    wait(&status);
    if (WIFSTOPPED(status) && WSTOPSIG(status) == SIGTRAP) {
        // stopped before or after a system call -- query the child and print out info
    }
    if (WIFEXITED(status) || WIFSIGNALED(status)) {
        // child has exited or terminated
        break;
    }
    ptrace(PTRACE_SYSCALL, 0, 0, 0);  // ignore any signal and continue the child
} 
```

请注意，它将为每个系统调用停止两次——在系统调用之前一次，在系统调用完成后第二次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:04:05.217

您基本上是在尝试在 linux 中编写 strace 二进制文件，以跟踪进程的系统调用。Linux 为此提供了 ptrace(2) 系统调用。ptrace 系统调用需要 4 个参数，第一个参数告诉你需要做什么。操作系统通过信号与父进程通信，子进程通过发送 SIGSTOP 停止。一般来说，您需要遵循以下步骤。

```
if(fork() == 0 )

{
    //child process

    ptrace(PTRACE_TRACEME, 0,0, 0);
    exec(...); 
}
else
{

 start:

    wait4(...);

    if (WIFSIGNALED(status)) {
        //done
    }
    if (WIFEXITED(status)) {
       //done
    }
    if(flag == startup)
    {
        flag = startupdone;

        ptrace(PTRACE_SYSCALL, pid,0, 0) ;
        goto start;
    }
    if (if (WSTOPSIG(status) == SIGTRAP) {) {
          //extract the register
          ptrace(PTRACE_GETREGS,pid,(char *)&regs,0) 

    } 
```

请注意，寄存器读取和解释将取决于您的架构。上面的代码只是一个例子，你需要深入挖掘。查看 strace 代码以进一步了解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T12:55:07.920

在您的父母中，您想监控多少电话？如果你想要不止一个，你将需要某种循环。

请注意示例中的行，这很重要：

```
ptrace(PTRACE_TRACEME, 0, NULL, NULL); 
```

查看[手册页](http://linux.die.net/man/2/ptrace)，孩子需要执行 a`PTRACE_TRACEME`和 an `exec`，或者父母需要使用`PTRACE_ATTACH`. 我在您的代码中都没有看到：

> 父进程可以通过调用 fork(2) 来启动跟踪，并让生成的子进程执行 PTRACE_TRACEME，然后（通常）执行 exec(3)。或者，父进程可以使用 PTRACE_ATTACH 开始跟踪现有进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-15T23:13:46.260

把克里斯·多德的话放在一起：

```
#include <unistd.h>     /* for read(), write(), close(), fork() */
#include <fcntl.h>      /* for open() */
#include <stdio.h>
#include <sys/ptrace.h>
#include <sys/reg.h>
#include <sys/wait.h>
#include <sys/types.h>

int main(int argc, char *argv[]) {
pid_t child;
int status;
long orig_eax;
child = fork();

if (0 == child) 
{
    ptrace(PTRACE_TRACEME, 0, NULL, NULL);
    raise(SIGCONT);
    if (argc != 3) {
       fprintf(stderr, "Usage: copy <filefrom> <fileto>\n"); 
       return 1;
    }

    int c;
    size_t file1_fd, file2_fd; 
    if ((file1_fd = open(argv[1], O_RDONLY)) < 0) {
       fprintf(stderr, "copy: can't open %s\n", argv[1]);
       return 1;
    }

    if ((file2_fd = open(argv[2], O_WRONLY | O_CREAT)) < 0) {
        fprintf(stderr, "copy: can't open %s\n", argv[2]);
        return 1;
    }

    while (read(file1_fd, &c, 1) > 0)
        write(file2_fd, &c, 1);
}
else
{
    while(1){
        wait(&status);
        if(WIFSTOPPED(status) && WSTOPSIG(status) == SIGTRAP){
            orig_eax = ptrace(PTRACE_PEEKUSER, child, sizeof(long) * ORIG_EAX, NULL);
            printf("copy made a system call %ld\n", orig_eax);
        }
        if(WIFEXITED(status) || WIFSIGNALED(status)){
            break;
        }

        ptrace(PTRACE_SYSCALL, child, 0, 0);
    }           
}
return 0;
} 
```

# c# - 在代码中使用未分配的局部变量

> ID：11081860
> 
> 赞同：0
> 
> 时间：2012-06-18T11:29:10.487
> 
> 标签：c#, .net

我已经声明了三个变量，即

```
TemplateData tData; TaskInstance tInstance;int tID; 
```

在我的程序中。虽然我已经清楚地声明了它们，但我一直收到错误“使用未分配的局部变量”我完全困惑为什么我的编译器会给出这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:32:30.540

您已**声明**它们，但尚未为它们**分配值**。在使用这些变量之前，您必须至少分配一个值`null`，否则您会将未定义的值传递给`ProcessInput`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:34:24.963

`Compiler is absolutely correct`. 尽管您已经声明了它们，但编译器并没有告诉您“使用**未声明**的局部变量”。它告诉你`"Use of unassigned local variable"`..

**变量的声明和赋值是有区别的**...

将值分配给变量。在您的代码中应该是

```
TemplateData tData = null;
TaskInstance tInstance = null;
int tID = 0; 
```

或者

```
TemplateData tData = new TemplateData();
TaskInstance tInstance = new TaskInstance();
int tID = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:33:32.693

您尚未为变量赋值。这就是编译器错误所说的。它说“使用未分配的局部变量”。**请注意声明**和**分配**变量之间的区别。在使用它们之前，只需将它们全部设置为`null`或 0（或其他适当的默认值）：

```
TemplateData tData = null;
TaskInstance tInstance = null;
int tID = 0; 
```

编译器抱怨是因为使用变量而不给它分配一些值通常是导致错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:35:00.170

您需要在将这些值传递给方法之前对其进行初始化：

```
 TemplateData tData = new TemplateData();                 
   TaskInstance tInstance = new TaskInstance();                 
   int tID = 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:35:02.897

只需初始化这些变量；

```
TemplateData tData = null; TaskInstance tInstance = null; int tID = 0; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-18T11:33:49.277

当你声明变量时，你应该总是分配默认值或空值。

```
 TemplateData tData = null;
            TaskInstance tInstance = null;
            int tID = 0; 
```

# delphi - 每个类的 Delphi 类变量

> ID：11081866
> 
> 赞同：12
> 
> 时间：2012-06-18T11:29:26.587
> 
> 标签：delphi, class, variables

我已将类变量添加到深层类层次结构的基类中。它是一个整数，用于计算每个类类型创建的实例数。但是我遇到了一个问题。

举个例子：

```
 TBaseClass = class
  private
    class var fCreated: integer;
  public
    class function NewInstance: TObject; override;  
  end;

  TDescendant = class(TBaseClass)
  end;

  ...

  class function TBaseClass.NewInstance: TObject;
  begin
    result := inherited NewInstance;
    inc(fCreated);
  end; 
```

我假设我可以使用 class var 来存储**每个 class**创建的实例数，但事实并非如此。

检查`TBaseClass.fCreated`返回与 相同的值`TDescendant.fCreated`，通过检查器更改一个值会更改另一个值，因此它的行为就像`fCreated`是单个全局变量。

我希望`fCreated`每个班级类型都得到维护，这不是重点吗？我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T12:33:40.220

你什么都没有。您对类变量如何工作的分析是正确的。类 var 只不过是一个由类限定的全局变量。

一个简单的解决方案是使用字典来计算实例。一个更 hacky 的方法是使用我在 Hallvard Vassbotn 博客中提到的一个技巧，它（ab）使用 VMT 来存储特定于类的字段。您可以[在此处](http://hallvards.blogspot.nl/2007/05/hack17-virtual-class-variables-part-ii.html)阅读所有相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-01T07:17:29.307

您看到 TDescendant.fCreated 与 TBaseClass.fCreated 相同，因为它们在同一个单元中，因此 TDesendant 看到 TBaseClass 私有字段。如果您将它们放入单独的单元中，这将结束。如果您将 fCreated 声明为不是 Prvate，而是 Strict Private，则 TDescendant 不会看到它。

# spring - GenericDAO 和 NoSuchBeanDefinitionException：没有唯一的 bean Spring 3.0

> ID：11081869
> 
> 赞同：0
> 
> 时间：2012-06-18T11:29:28.647
> 
> 标签：spring, genericdao

我正在使用带有 genericDAO 的 Spring 3.0。我有这个：

```
public interface GenericDAO<T, ID extends Serializable>
...
@Repository("genericDAO")
public class GenericDAOImpl<T, ID extends Serializable> implements GenericDAO<T, ID> {
...
public interface A extends GenericDAO<Turno, Long> {
...
public interface B extends GenericDAO<TipoTurno, Long> {
...
@Repository("A")
public class AImpl extends GenericDAOImpl<TipoTurno, Long>  implements A{
...
@Repository("B")
public class BImpl extends GenericDAOImpl<TipoTurno, Long>  implements B{ 
```

但是当我尝试按如下方式注入它们时：

```
@Autowired
A a; 
```

我得到：

> 预期单个匹配 bean，但找到 3：[genericDAOImpl，A，B]

我不明白为什么。我也试着用

```
@Resource(name="A") 
```

乃至

```
@Resource(type=A.class) 
```

我也尝试使用@Qualifier，但我总是遇到相同的异常，看起来 Spring 总是在寻找 GenericDao 而不是特定的类。

但它仍然无法正常工作。我不明白为什么。

有什么建议么？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:46:11.363

我复制了您的确切错误消息，然后修复了它。这正是我使用的源代码，减去包名。我建议复制它，运行它并与你的不同。我注意到的一个区别是，正如问题中所写，AImpl 无法编译。它实现了 GenericDAOImpl 和 GenericDAO。我将第一个通用参数更改为 Turno，以使其编译。我认为这是一个错字。当我最初将所有字段设置为 @Autowired 时，我准确地重现了您的错误。然后我添加了 @Qualifier("genericDAO") 并成功连接了所有三个。

```
public interface GenericDAO<T, ID extends Serializable> {}
...
@Repository("genericDAO")
public class GenericDAOImpl<T, ID extends Serializable> implements GenericDAO<T, ID> {}
...
public interface A extends GenericDAO<Turno, Long> {}
...
public interface B extends GenericDAO<TipoTurno, Long> {}
...
@Repository("A")
public class AImpl extends GenericDAOImpl<Turno, Long> implements A {}
...
@Repository("B")
public class BImpl extends GenericDAOImpl<TipoTurno, Long>  implements B {}
...
public class TipoTurno {}
...
public class Turno {}
...
@Component
public class Thingy {
    @Autowired
    private A a;

    @Autowired
    private B b;

    @Autowired
    @Qualifier(value="genericDAO")
    private GenericDAO genericDao;
}
...
public class Main {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("genericdao.xml");
        context.getBean(Thingy.class);
    }
}
...
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <context:annotation-config/>
    <context:component-scan base-package="genericdao"/>
</beans> 
```

请注意，实际的错误消息比您提供的要长。阅读整件事寻找原因很重要。Spring 喜欢具有 5 甚至 10 级原因的异常堆栈跟踪。这是我收到的消息的相关子字符串：

> 无法自动装配字段：genericdao.GenericDAO genericdao.Thingy.genericDao；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义类型 [genericdao.GenericDAO] 的唯一 bean：预期单个匹配 bean 但找到 3：[A，B，genericDAO]

它表明没有被自动装配的字段是`Thingy.genericDao`，不是`Thingy.a`。我强烈怀疑这也是您的错误的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:14:05.760

```
@Repository("AImpl")
public class AImpl extends GenericDAOImpl<TipoTurno, Long>  implements A{
...
@Repository("BImpl")
public class BImpl extends GenericDAOImpl<TipoTurno, Long>  implements B{
...
@Resource(name = "AImpl")
A whatever; //I would normally call it aImpl 
```

只要限定符名称匹配，您就可以开始了。该错误是由自动装配注入引起的，其中接口被实现了两次。

# grails - Grails：向 message.properties 添加新属性时出现 Native2ascii 错误

> ID：11081874
> 
> 赞同：12
> 
> 时间：2012-06-18T11:29:56.150
> 
> 标签：grails, properties, internationalization, sts-springsourcetoolsuite

在运行时向我的 grails 应用程序中的 message.properties 文件添加新属性时，我收到一个奇怪的错误。当我通过命令行重新启动应用程序或重新启动 STS 时，此错误消失。我使用的是 2.0.1 版本，直到一周前，我还能够在运行时向 message.properties 文件添加新属性。这是错误的堆栈跟踪

```
| Error 2012-06-18 16:54:58,702 [Thread-38] ERROR plugins.AbstractGrailsPluginManager  - Plugin [i18n:2.0.1] could not reload changes to file [/home/project/grails-app/i18n/messages.properties]: Error starting Sun's native2ascii: 
Message: Error starting Sun's native2ascii: 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-25T04:55:36.890

# cd 到 jdk 路径

# cp lib/tools.jar jre/lib/ext/tools.jar

它解决了这个问题。

注意：要获得正确的 jdk 路径，请检查 GGTS --> Windows --> Preferences --> Java --> Installed JREs --> JREs Home Path

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-31T12:14:52.420

您应该使用 JDK 而不是 JRE。

此外，如果您不需要 native2ascii（您可能不需要），请在 BuildConfig.groovy 中使用：`grails.enable.native2ascii = false`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-30T23:36:06.597

非常令人沮丧的错误。

在我执行了上面在这个线程中建议的所有步骤之后，grails 应用程序仍然没有看到 tools.jar ......

GRRR！

对于在 GGTS 中指向 1.7 jdk（设置 jre 时）***之后****仍然存在* 时遇到此问题的任何人，您必须执行以下操作：

 *1.  在 GGTS Preferences 面板的“Installed JRE's”中的“JRE Definition”面板中选择正确的 jdk (1.7)。
2.  观察来自该 jdk 的 jar 填充在“JRE 系统库”底部的 JRE 定义窗口面板中。
3.  检查 /lib/ext 中的 tools.jar（我的没有在 jdk lib 中显示，或者在我尝试了上面的 'zawmn83's post 之后）。
4.  如果 tools.jar 在 jdk 中没有显示为可识别，请单击“添加外部 JAR...”按钮，找到它，添加它。

这完全解决了我的问题 - 感谢上帝！！！！

ps 我还必须在我的 .bash_profile 中正确地将我的 JAVA_HOME 设置为我的 1.7 jdk，但是，这已经作为解决方案的一部分在这里被调用。

感谢大家为此做出贡献 - 这个错误在今天修补它时一直导致我的脑损伤，上述建议让我完成了 99% 的工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-08T04:20:45.087

I had a similar problem, in the end I

1.  Removed the Debug Config for the Project
2.  Deleted the project (but NOT the files)
3.  Removed the .settings directory
4.  Removed the .classpath and .project files from the project
5.  Created a New General Project with the same name in the workspace
6.  Recreated the Debug -> Run as Run-App

Hope this helps

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-30T15:56:58.890

当我在 Ubuntu 上同时安装 java 8 和 java 7 但没有使用 update-alternatives 正确配置它时，这发生在我身上。具体来说，JAVA_HOME 设置不正确。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-22T03:06:31.020

从 linux 下的命令行编译 Grails 2 时，我遇到了类似的错误。

> ```
> Error packaging application: Error occurred processing message bundles: Error starting Sun's native2ascii:
> ...
> Caused by: : Error starting Sun's native2ascii: 
> ...
> Caused by: java.lang.ClassNotFoundException: sun.tools.native2ascii.Main` 
> ```

我通过如上所述将 JAVA_HOME 设置为 JDK 来解决它，例如

```
JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.161.x86_64 
```

并不是：

```
JAVA_HOME=/usr/lib/jvm/jre-1.7.0-openjdk.x86_64 
```

也包括`$JAVA_HOME/bin`在`PATH`变量中

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-20T00:10:31.447

在linux上，运行grails war命令，它解决了这个问题

```
 cp /usr/lib/jvm/java-1.8.0-openjdk/lib/tools.jar /usr/lib/jvm/java-1.8.0-openjdk/jre/lib/ext/ 
```*

# ruby-on-rails-3.1 - Rspec：shared_examples 和 shared_context 之间的变量范围

> ID：11081877
> 
> 赞同：1
> 
> 时间：2012-06-18T11:29:57.537
> 
> 标签：ruby-on-rails-3.1, parameters, rspec, shared

我在我的 rspec 控制器测试中参数化 shared_example 时遇到问题。我的代码基于将[示例传递给共享组](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/example-groups/shared-examples)，如 Relish 中所述

从表面上看，似乎在 shared_context 中创建的实例变量在 shared_examples 中不可用。有任何想法吗？

我正在使用带有 CanCan 和 Devise gems 的 Rails 3.1。

控制器（app/controllers/stores_controller.rb）：

```
class StoresController < SubDomainController
  def index
    authorize! :list, Store
    @stores = current_user.company.stores.allrespond_to do |format|
      format.html # index.html.erb
      format.json { render json: @stores }
    end
  end
end 
```

共享模块（spec/support/shared.rb）：

```
 module Shared
    shared_context "stores controller" do    
      before :all do    
        build_companies
        build_stores
        build_users
      end
    end

    shared_context "admin logged in" do   
      before :each do
        login_admin
      end    
    end

    #########THIS IS THE TEST THAT IS FAILING#########
    shared_examples "authorised_user" do |values|

      it "should assign correct variables" do
        values.each do |key,val|
          assigns[key].should == values[key]
        end
      end
    end
  end 
```

助手模块（spec/support/helpers.rb）：

```
module Helpers

  def build_companies
    @company = build_company(get_rand_string() ,"Correct")
    @other_company = build_company(get_rand_string() ,"Invalid")
  end

  def build_stores
    @store = FactoryGirl.create(:store, :company_id => @company.id)
    @other_store = FactoryGirl.create(:store, :company_id => @company.id)
    @other_company_store = FactoryGirl.create(:store, :company_id => @other_company.id)
  end

  def build_users
    @admin_user = FactoryGirl.create(:user, :role_id => 1,  :company => @company, :store_id => @store.id)
    @manager_user = FactoryGirl.create(:user, :role_id=> 2,  :company => @company, :store_id => @store.id)
    @regular_user = FactoryGirl.create(:user, :role_id=> 3,  :company => @company, :store_id => @store.id)
  end       
end 
```

规范助手（spec/spec_helper.rb）：

```
.....
  config.include  Helpers
  config.include  Shared
.... 
```

控制器规范（spec/controllers/stores_controller_spec.rb）：需要“spec_helper”

```
describe StoresController do    
  include_context "stores controller"
    describe "INDEX" do

        [:admin].each do |u|
          describe "#{u} authorised" do          
            include_context "#{u} logged in"          
              before :each do
                get :index
              end

              ###passing instance variables to Helper module not working######
              it_behaves_like "authorised_user", {:stores => [@store, @other_store]}      

            end
          end
        end
    end 
end 
```

错误：

```
1) StoresController INDEX company stores admin authorised behaves like authorised_user should assign correct variables
   Failure/Error: assigns[key].should == values[key]
   expected: [nil, nil]
        got: [#<Store id: 1, company_id: 1, location_name: "MyString", address: "MyString", created_at: "2012-06-18 05:29:19", updated_at: "2012-06-18 05:29:19">, #<Store id: 2, company_id: 1, location_name: "MyString", address: "MyString", created_at: "2012-06-18 05:29:19", updated_at: "2012-06-18 05:29:19">] (using ==)                                                                                                                         
   Diff:
   @@ -1,2 +1,3 @@
   -[nil, nil]
   +[#<Store id: 1, company_id: 1, location_name: "MyString", address: "MyString", created_at: "2012-06-18 05:29:19", updated_at: "2012-06-18 05:29:19">,                                                                                                                                             
   + #<Store id: 2, company_id: 1, location_name: "MyString", address: "MyString", created_at: "2012-06-18 05:29:19", updated_at: "2012-06-18 05:29:19">] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:53:45.440

我自己想通了。

该变量需要使用 stores_controller_spec.rb 中的 'let' 语法设置，如下所示

```
it_behaves_like "authorised_user" do
   let(:variable){stores}
   let(:values){[@store, @other_store]} 
end 
```

然后在 shared_examples.rb 中：

```
shared_examples "authorised_user" do

  it "should assign correct variables" do
      assigns[variable].should == values
  end
end 
```

# jquery - 查找单个类的 CSS 规则

> ID：11081881
> 
> 赞同：0
> 
> 时间：2012-06-18T11:30:08.473
> 
> 标签：jquery, css

如果我有一个元素 -

```
<div class="myDiv"></div> 
```

myDiv 有一些规则适用于它 -

```
.myDiv {
    background:red;
} 
```

然后我将另一个类应用于 myDiv -

```
$('.myDiv').addClass('newClass'); 
```

我的css中有一个这样的定义 -

```
.myDiv.newClass{
    position:relative;
    left:20px;
} 
```

如何找出哪些规则专门适用于 $('.myDiv.newClass')？我想要一个返回包含 css 规则的对象的函数。

结果将是这样的 -

```
{
    "position":"relative",
    "left":"20px"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:06:39.657

`window.getComputedStyle()`也许你在找什么 - [https://developer.mozilla.org/en/DOM/window.getComputedStyle](https://developer.mozilla.org/en/DOM/window.getComputedStyle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:17:03.137

一篇关于获取样式的非常好的文章 - 与浏览器兼容

[**怪癖**](http://www.quirksmode.org/dom/getstyles.html)

上面给出的like是您问题的通用解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:01:10.597

> 我不想返回任何仅适用于 .myDiv 的规则

在这种情况下，您应该从元素中删除此类并更改 CSS 结构：

```
$('.myDiv').addClass('newClass');    
$('.myDiv').removeClass('myDiv'); 
```

然后改变：

```
.myDiv.newClass {} 
```

至：

```
.newClass {} 
```

如果您需要查看现在应用到该 div 的样式，您可以使用[Google Chrome](https://superuser.com/questions/4640/what-is-the-inspect-element-feature-in-google-chrome)或[FireBug来“](http://getfirebug.com/)[检查元素](https://superuser.com/questions/4640/what-is-the-inspect-element-feature-in-google-chrome)” 。

# php - 如何使用 Aweber API 将订阅者从列表 1 转移到列表 2

> ID：11081884
> 
> 赞同：0
> 
> 时间：2012-06-18T11:30:30.697
> 
> 标签：php, aweber

我已经咨询了 Aweber 客户服务，他们告诉我他们的内部功能不允许我将订阅者从列表 1 转移到列表 2。但他说 API 会有所帮助。

我能够与 Aweber 的 API 通信，可以将订阅者添加到列表中，甚至可以获取我所有的 aweber 帐户列表。

所以我只想确认 Aweber API 可以让我将订阅者从列表 1 转移到列表 2？

假设我的帐户中有列表 A 和列表 B，现在我想将两个列表合并到列表 C 中，我可以将所有订阅者转移到列表 C 中而无需他们再次注册和确认？这可以用 Aweber API 完成吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:47:47.640

是的你可以。[https://labs.aweber.com/docs/reference/1.0#subscriber](https://labs.aweber.com/docs/reference/1.0#subscriber)

订阅者实体有一个可用的自定义 POST 方法，称为“move”。

# audio - 如何在 directshow 中选择音频输出设备

> ID：11081885
> 
> 赞同：3
> 
> 时间：2012-06-18T11:30:31.463
> 
> 标签：audio, directshow, directshow.net

我想知道如何在 directshow 中选择音频的输出设备。我能够在 directshow 中获得可用的音频输出设备。但是我怎样才能使其中之一成为音频输出设备。它总是使用默认音频设备。我希望能够在我选择的设备上输出音频。我一直在通过谷歌苦苦挣扎，但找不到任何有用的东西。我所能得到的只是[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375473%28v=vs.85%29.aspx)链接，但它并不能真正解决我的问题。

任何帮助都会对我很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:01:33.650

首先，如果您不使用 DirectShow .NET (DirectShowLib)，请[在此处](http://sourceforge.net/projects/directshownet/)获取：它充当非托管 DirectShow 和 C# 之间的（非常完整的）接口

下面是一个非常简单的示例，说明如何将音频文件播放到所需的音频设备

```
using DirectShowLib;

private IGraphBuilder m_objFilterGraph = null;
private IBasicAudio m_objBasicAudio = null;
private IMediaControl m_objMediaControl = null;

private void playAudioToDevice(string fName, int devIndex)
{
    object source = null;
    DsDevice[] devices;
    devices = DsDevice.GetDevicesOfCat(FilterCategory.AudioRendererCategory);
    DsDevice device = (DsDevice)devices[devIndex];
    Guid iid = typeof(IBaseFilter).GUID;
    device.Mon.BindToObject(null, null, ref iid, out source);

    m_objFilterGraph = (IGraphBuilder)new FilterGraph();
    m_objFilterGraph.AddFilter((IBaseFilter)source, "Audio Render");
    m_objFilterGraph.RenderFile(fName, "");

    m_objBasicAudio = m_objFilterGraph as IBasicAudio;
    m_objMediaControl = m_objFilterGraph as IMediaControl;

    m_objMediaControl.Run();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T13:52:55.863

由用户管理音频设备并选择主要设备（例如通过控制面板小程序）。您可以在 Windows XP 中找到以[编程方式切换设备的](https://www.google.com.ua/search?q=programmatically+set+default+audio+device&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-beta)方法，但是在 Vista+中，如果没有设计上的[交互式用户操作，这是不可能](http://social.microsoft.com/Forums/en/Offtopic/thread/9ebd7ad6-a460-4a28-9de9-2af63fd4a13e)的。

另请参阅拉里在此处的回答：[如何以编程方式更改默认声音播放设备？](https://stackoverflow.com/questions/2175318/how-to-change-default-sound-playback-device-programatically)

更新：上面提到的是修改系统配置试图改变默认的音频输出设备。然而，应用程序不仅限于默认设备。相反，它可以枚举可用设备（请参阅[使用系统设备枚举器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407292%28v=vs.85%29.aspx)+ `CLSID_AudioRendererCategory`），然后通过`BindToObject`调用为特定设备创建渲染器实例。从那里开始，它是一个常规过滤器，只是在内部绑定到感兴趣的设备。

# ios - 有没有一种简单的方法可以在 Xcode for iOS 5.1 中为视图添加边框

> ID：11081886
> 
> 赞同：50
> 
> 时间：2012-06-18T11:30:32.373
> 
> 标签：ios, uiview, border

我希望在 a 周围有一个边框，`UIView`我只需要将它与主视图在视觉上分开即可。

我查看了`UIView`故事板编辑器的设置，但似乎找不到任何设置边框的东西。

有没有一种简单的方法可以在代码中做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-02-01T04:46:38.443

使用 Swift 和 XCode 6，您可以做到这一点。

单击 Storyboard 中的 UIView 元素，然后转到身份检查器。在用户定义的运行时属性中，输入：

```
layer.borderWidth number 1 
```

如果你想要漂亮的角落

```
layer.cornerRadius number 5
layer.masksToBounds boolean true 
```

现在这会给你一个边框，但要设置你需要用代码做的颜色。转到您的视图控制器，并从您的 UIView 添加一个 IBOutlet。说你做，

```
@IBOutlet weak var xView: UIView! 
```

像下面这样在 viewDidLoad 函数中调用它来设置颜色。

```
xView.layer.borderColor = UIColor.whiteColor().CGColor 
```

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-24T01:34:05.910

有了这个边框，背景仍然出现在后面。换句话说，边界不是投射到视野之外，而是投射到内部空间。

我认为有必要在所有者后面创建一个覆盖视图，其大小（宽度 x 高度）随边框大小而增加。

# java - Spring Social 编辑的问题

> ID：11081888
> 
> 赞同：3
> 
> 时间：2012-06-18T11:30:35.637
> 
> 标签：java, spring, spring-social

几个月前，我从“spring box”=) 中读到了新框架。所以我想测试一下。我在 Facebook 上注册了一个 App 并尝试配置 spring-social。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <!-- Configure a Facebook service provider -->

    <bean id="usersConnectionRepository"
        class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
        <constructor-arg ref="dataSource" />
        <constructor-arg ref="connectionFactoryLocator" />
        <constructor-arg ref="textEncryptor" />
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/shop" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors"
        factory-method="noOpText" />

    <bean id="connectionFactoryLocator"
        class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
        <property name="connectionFactories">
            <list>
                <bean
                    class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
                    <constructor-arg value="240362226072898" />
                    <constructor-arg value="657532dea6d091ab44a56668c47cca15" />
                </bean>
            </list>
        </property>
    </bean>

</beans> 
```

这是我的测试课：

```
public class TestingSpringSocial extends BaseTest {
    private static final Logger LOG = Logger.getLogger(TestingSpringSocial.class);
    private static final String ACCES_TOKEN = "657532dea6d091ab44a56668c47cca15";

    @Test
    public void facebook() {
        Facebook facebook = new FacebookTemplate(ACCES_TOKEN);
        Assert.assertNotNull(facebook.feedOperations().getFeed().toString());

    }

} 
```

我收到的例外情况：

```
 ERROR TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1ed5eb39] to prepare test instance [com.dataart.masternoy.test.TestingSpringSocial@6e45faff]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'usersConnectionRepository' defined in class path resource [applicationContext-social.xml]: Cannot resolve reference to bean 'connectionFactoryLocator' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connectionFactoryLocator' defined in class path resource [applicationContext-social.xml]: Cannot create inner bean 'org.springframework.social.facebook.connect.FacebookConnectionFactory#55cc9339' of type [org.springframework.social.facebook.connect.FacebookConnectionFactory] while setting bean property 'connectionFactories' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.social.facebook.connect.FacebookConnectionFactory#55cc9339' defined in class path resource [applicationContext-social.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.social.facebook.connect.FacebookConnectionFactory]: Constructor threw exception; nested exception is java.lang.VerifyError: Cannot inherit from final class
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1003)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:907)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connectionFactoryLocator' defined in class path resource [applicationContext-social.xml]: Cannot create inner bean 'org.springframework.social.facebook.connect.FacebookConnectionFactory#55cc9339' of type [org.springframework.social.facebook.connect.FacebookConnectionFactory] while setting bean property 'connectionFactories' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.social.facebook.connect.FacebookConnectionFactory#55cc9339' defined in class path resource [applicationContext-social.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.social.facebook.connect.FacebookConnectionFactory]: Constructor threw exception; nested exception is java.lang.VerifyError: Cannot inherit from final class
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:120)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 42 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.social.facebook.connect.FacebookConnectionFactory#55cc9339' defined in class path resource [applicationContext-social.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.social.facebook.connect.FacebookConnectionFactory]: Constructor threw exception; nested exception is java.lang.VerifyError: Cannot inherit from final class
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:288)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1003)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:907)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270)
    ... 54 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.social.facebook.connect.FacebookConnectionFactory]: Constructor threw exception; nested exception is java.lang.VerifyError: Cannot inherit from final class
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:141)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:108)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
    ... 59 more
Caused by: java.lang.VerifyError: Cannot inherit from final class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.<init>(MappingJacksonHttpMessageConverter.java:56)
    at org.springframework.web.client.RestTemplate.<init>(RestTemplate.java:147)
    at org.springframework.web.client.RestTemplate.<init>(RestTemplate.java:162)
    at org.springframework.social.facebook.connect.FacebookOAuth2Template.createRestTemplate(FacebookOAuth2Template.java:43)
    at org.springframework.social.oauth2.OAuth2Template.<init>(OAuth2Template.java:74)
    at org.springframework.social.oauth2.OAuth2Template.<init>(OAuth2Template.java:56)
    at org.springframework.social.facebook.connect.FacebookOAuth2Template.<init>(FacebookOAuth2Template.java:38)
    at org.springframework.social.facebook.connect.FacebookServiceProvider.<init>(FacebookServiceProvider.java:29)
    at org.springframework.social.facebook.connect.FacebookConnectionFactory.<init>(FacebookConnectionFactory.java:28)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    ... 61 more 
```

也许是Maven依赖的问题？这是我的 pom.xml。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.daaart.mastenoy</groupId>
    <artifactId>shop</artifactId>
    <packaging>war</packaging>
    <version>1.0</version>
    <name>shop Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <properties>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
        <org.junit.version>4.7</org.junit.version>
        <org.slf4j.version>1.6.1</org.slf4j.version>
        <org.springframework.social-version>1.1.0.BUILD-SNAPSHOT</org.springframework.social-version>
        <org.springframework.social.facebook-version>1.1.0.BUILD-SNAPSHOT</org.springframework.social.facebook-version>
        <org.springframework.security.crypto-version>3.1.0.RELEASE</org.springframework.security.crypto-version>

    </properties>
    <repositories>
        <repository>
            <id>org.springframework.maven.milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
        </repository>
    </repositories>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.social</groupId>
            <artifactId>spring-social-core</artifactId>
            <version>${org.springframework.social-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.social</groupId>
            <artifactId>spring-social-web</artifactId>
            <version>${org.springframework.social-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.social</groupId>
            <artifactId>spring-social-facebook</artifactId>
            <version>${org.springframework.social.facebook-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-crypto</artifactId>
            <version>${org.springframework.security.crypto-version}</version>
        </dependency>

        <!-- Spring Social Facebook -->

        <!--mokito -->
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-core</artifactId>
            <version>1.9.0</version>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.0</version>
        </dependency>
        <!--mokito -->

        <!-- UI data paginator -->
        <dependency>
            <groupId>displaytag</groupId>
            <artifactId>displaytag</artifactId>
            <version>1.2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>jcl104-over-slf4j</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- Spring START -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>

        <!--HIBERNATE -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.3.2.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.3.1.GA</version>
            <exclusions>
                <exclusion>
                    <artifactId>hibernate</artifactId>
                    <groupId>org.hibernate</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <!--HIBERNATE -->
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20090211</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>org.javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.16.1-GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-documentation</artifactId>
            <version>3.6.0.Beta2</version>
            <type>pom</type>
        </dependency>

        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-asl</artifactId>
            <version>0.9.5</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.7</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>shop</finalName>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:54:09.587

您使用的 Spring 框架 jar 的版本是`3.0.5.RELEASE`（根据您的 pom.xml），但在应用程序上下文 XML 中，Spring-Beans XSD 是 3.1 版。

您必须将 XSD 版本更改为`spring-beans-3.0.xsd`或将 Spring jar 升级为版本`3.1.0.RELEASE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:50:24.677

看起来`org.springframework.social.connect.jdbc.JdbcConnectionRepository`bean`String`在构造函数中需要 a 。你正在传递一个`DriverManagerDataSource`.

取消注释参数以调用您希望执行的构造函数。

你可以尝试降级`Spring-Social`到`1.0.0.M2`.

在[JdbcUsersConnectionRepository](http://static.springsource.org/spring-social/docs/1.0.2.RELEASE/api/org/springframework/social/connect/jdbc/JdbcUsersConnectionRepository.html)`1.0.2-RELEASE`的构造函数中需要 3 个参数。

如果`mvn dependency:tree`您处于版本混乱中，也会向您显示并粘贴它。

# javascript - 重复的功能，我该如何组合它们？

> ID：11081890
> 
> 赞同：2
> 
> 时间：2012-06-18T11:30:43.170
> 
> 标签：javascript, jquery

除了更改类名外，我有一个几乎保持不变的函数。我希望使代码的文本少一点。我怎样才能让它只是一个小功能而不是重复它*n 次*。我还担心删除最后点击的 li 的活动类。我在这里只提供了 2 个实例，但是这段代码重复了*n*次。任何想法都将不胜感激。

```
 $('a.app1-preview').click(function() {
            //remove last active classes
                    $(".app2").removeClass('active');
                    $(".app2-preview").removeClass('active');
                    //Add active class for this 
            $(this).parent().addClass('active');
            $(this).addClass('active');
            $('.app-preview-2').fadeOut("slow", function () {
                $('.app-preview-1').fadeIn("slow");

            });        
        });

        $('a.app2-preview').click(function() {
            //remove last active classes
                    $(".app1").removeClass('active');
                    $(".app1-preview").removeClass('active');
                    //Add active class for this 
                    $(this).parent().addClass('active');
            $(this).addClass('active');
            $('.app-preview-1').fadeOut("slow", function () {
                $('.app-preview-2').fadeIn("slow");
            });        
        }); 
```

HTML 代码：

```
 <div class="app-container">
                <ul class="apps">
                  <li class="app1"> 
                      <a title href="#" class="app1-preview blocklink">
                            <span>ANOTHER<br /> APP</span>
                      </a> 
                  </li>
                  <li class="app2"> 
                      <a title href="#" class="app2-preview blocklink">
                            <span>SECOND<br /> APP</span>
                      </a> 
                  </li>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:43:23.817

编辑：在我喝了一些咖啡因后，我注意到了设置的问题。我在[JSFiddle](http://jsfiddle.net/6WDLs/)创建了一个演示。标记将显示应用程序的“标题”，单击该应用程序将显示子描述，并隐藏其他兄弟描述的描述。

在这种情况下，您可以显示当前元素，并隐藏同级元素，这将是一个更简洁的解决方案，因为它会随着您在更多应用程序元素上进行缩放。

```
$(".app").click(function() {
  var $self = $(this);
  var $apps = $self.closest(".apps");
  var $selfSiblings = $apps.children(".app").not($self);

  $self.addClass(".active");
  $self.find(".app-preview").addClass("active");  

  $selfSiblings.removeClass(".active");
    $selfSiblings.find(".app-preview").removeClass("active").fadeOut("slow", function() {
      $self.find(".app-preview").fadeIn("slow");
    });
});​ 
```

我还建议这样重写您的 HTML：

```
<div class="app-container">
  <ul class="apps">
    <li class="app"> 
      App 1<br />
      <a title href="#" class="app-preview blocklink">
        <span>PREVIEW 1</span>
      </a> 
    </li>
    <li class="app"> 
      App 2<br />
      <a title href="#" class="app-preview blocklink">
        <span>PREVIEW 2</span>
      </a>
   </li>
      <li class="app"> 
      App 3<br />
      <a title href="#" class="app-preview blocklink">
        <span>PREVIEW 3</span>
      </a>
   </li>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:49:05.643

**尝试利用您拥有.active**类的事实。;) 预览 - [http://jsfiddle.net/evSqF/1/](http://jsfiddle.net/evSqF/1/)

js：

```
<script>
    $('a.blocklink').click(function() {
        var self = $(this);

        $('.active').fadeOut('slow', function(){
            $(this).removeClass('active');

            self.fadeIn('slow');
            self.addClass('active');
        });
    });
</script> 
```

html:

```
<div class="app-container">
    <ul class="apps">
        <li class="app1">
            <a title href="#" class="app1-preview blocklink">
                <span>ANOTHER<br /> APP</span>
            </a>
            <div class="app-preview active">App1 preview</div>
        </li>
        <li class="app2"> 
            <a title href="#" class="app2-preview blocklink">
                <span>SECOND<br /> APP</span>
            </a>
            <div class="app-preview">App2 preview</div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:35:17.067

编写一个函数来为您创建函数：

```
function makeHandler(deactivate, fadeOut, fadeIn) {
  return function() {
        //remove last active classes
        $(deactivate).removeClass('active');

                //Add active class for this 
        $(this).parent().addClass('active');
        $(this).addClass('active');
        $(fadeOut).fadeOut("slow", function () {
            $(fadeIn).fadeIn("slow");

        });        
    }); 
```

然后：

```
$('a.app1-preview').click(makeHandler('.app2, .app2-preview', '.app-preview-2', '.app-preview-1'));
$('a.app2-preview').click(makeHandler('.app1, .app1-preview', '.app-preview-1', '.app-preview-2')); 
```

您可能可以通过重新考虑您拥有的命名约定来进一步简化事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:37:05.390

我建议定义一个函数：

```
function single(index_main, index_aux) {
  // Does all your magic
}

$('a.app1-preview').click(function() {
  single("1", "2");
});

$('a.app2-preview').click(function() {
  single("2", "1");
}); 
```

这就是诀窍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T11:41:26.847

我为你做了一个 jsfiddle 例子。在这里看一下，它使用了您编写的尽可能多的代码，所以没有什么会让您感到惊讶的 :)

[http://jsfiddle.net/2ZPxx/](http://jsfiddle.net/2ZPxx/)

基本上我最终得到了这个 HTML：

```
<div class="app-container">
    <ul class="apps">
      <li class="app1">
          <a title href="#" class="app1-preview blocklink" id="app1">
                <span>ANOTHER<br /> APP</span>
          </a>
      </li>
      <li class="app2">
          <a title href="#" class="app2-preview blocklink" id="app2">
                <span>SECOND<br /> APP</span>
          </a>
      </li>
</div>
<div class="app-preview-app1 app-preview">App1 preview</div>
<div class="app-preview-app2 app-preview">App2 preview</div> 
```

而这个javascript：

```
$('.apps li a').click(function() {
    var id = $(this).attr('id');
    $('.apps li').removeClass('active');

    //Add active class for this
    $(this).parent().addClass('active');
    $(this).addClass('active');
    $('.app-preview').fadeOut("slow", function () {
        $('.app-preview-'+id).fadeIn("slow");
    });        
}); 
```

# core-data - +entityForName：在第二个视图中找不到实体名称“Ditloide”的 NSManagedObjectModel

> ID：11081892
> 
> 赞同：0
> 
> 时间：2012-06-18T11:31:04.190
> 
> 标签：core-data, entity, nsmanagedobjectcontext

我试图解释我的问题。

我有一个第一个视图，其中有一些按钮。按下一个按钮应用程序打开一个表格视图。我的项目中有这些文件：

*   AppDelegate.h/m
*   viewcontroller.h/m 控制第一个视图
*   Entity1TableViewController.h/m 控制由该
    按钮在第一个视图中打开的表视图
*   .xcdatamodel

所以，直到我在 tableview 中，一切都是正确的。我把这个

```
 NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
 NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
 NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:@"Ditloide" inManagedObjectContext:context]; 
```

当我点击按钮时，我收到错误：

```
+entityForName: could not locate an NSManagedObjectModel for entity name 'Ditloide' in a second view 
```

我阅读了其他帖子，其中我发现了类似的内容：

```
MainViewController *controller = (MainViewController *)self.window.rootViewController;
controller.managedObjectContext = self.managedObjectContext; 
```

放入根控制器。但就我而言，我可以把这个放在哪里？我必须创建一个新的控制器？如果是，我不能插入

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

方法。

那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:51:11.930

我不太确定我是否理解你的问题。

该错误是由于您没有正确设置 MOC 造成的。有关详细信息，请参阅[insertNewObjectForEntityForName：。](https://stackoverflow.com/questions/1780929/insertnewobjectforentityforname)

问题是：您是否正确设置了核心数据堆栈？你能分享一些代码吗？

然后，关于你看到的代码，它的目标是在需要的地方注入上下文。例如，假设您有一个名为 的控制器，`YourController`它需要上下文。你可以像下面这样创建一个属性`YourController`：

```
//.h
@property (nonatomic, retain) NSManagedObjectContext* context; // or strong if you ARC

//.m
@synthesize context; 
```

然后，从不同的元素，例如应用程序委托（如果您已经在那里设置了核心数据堆栈），您可以创建`YourController`并注入它。

```
YourController* yourCtr = // alloc-init
yourCtr.context = [self managedObjectContext]; 
```

*最后，如果是，我不能插入`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法*是什么意思？

# jquery - 控制 jQuery 的 index() 函数的范围

> ID：11081894
> 
> 赞同：0
> 
> 时间：2012-06-18T11:31:10.417
> 
> 标签：jquery

我这个：http: [//jsfiddle.net/ZP76c/](http://jsfiddle.net/ZP76c/)

我试图控制 jQuery 根据 index() 选择元素的范围，可能吗？

```
<div class="holder">
    <div class="first">First</div>
    <div class="second">Second</div>
    <div class="first">First</div>
    <div class="second">Second</div>
</div>​

$('.holder div').click(function(){
     alert($(this).index());            
});

// desired behaviour: clicking the first 'first' div will alert: "0"
// clicking the second 'first' div, will alert: "1"
// so it takes the divs with a class of 'second' out of the index() calculation
// possible with jQuery .index()?
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:34:11.787

以下内容应该适合您的需求：

```
$('.holder div.first').click(function() {
    alert($(this).index(".first"));            
}); 
```

或者对于更通用的解决方案（`.second`同样如此）：

```
$('.holder div').click(function() {
    alert($(this).index("." + $(this).prop("class")));            
}); 
```

但这仅适用于，如果每个 div 只有一个类，并且该类是“ `first`// ”等`second`。`third`

如果您的 div 有多个类，您可以添加一个 data 属性，然后执行以下操作：

```
$('.holder div').click(function() {
    alert($(this).index("[data-category=" + $(this).attr("data-category") + "]"));            
}); 
```

和 HTML：

```
<div class="holder">
    <div class="first" data-category="first">First</div>
    <div class="second class-does-not-matter" data-category="second">Second</div>
    <div class="first another-div-class" data-category="first">First</div>
    <div class="second div-class" data-category="second">Second</div>
</div>​​​​​​​​​​​​​​​​​​ 
```

Where`data-category`被设置为它所属的任何类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:38:28.017

您可以传递给`.index()`要为其计算索引的选择器。例如：在你的情况下，`alert($(this).index('div.first'));`

# java - java：如何将一种形式的1个变量的值转换为另一种形式

> ID：11081897
> 
> 赞同：0
> 
> 时间：2012-06-18T11:31:32.227
> 
> 标签：java, netbeans

我有两个表格，第一个是 form_1，第二个是 form_2。form_1 包含一个文本字段 photo_id_num。我通过 .getText 方法获得它的价值。

```
public String getID()
{
    String id1=photo_id_num.getText(); 
    return(id1);
} 
```

现在我想将此值访问为第二种形式。第二种形式的代码是

```
 Form_1 frm=new Form_1();
 String id2=frm.getID();
 System.out.println("ID2="+id2); 
```

但它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:41:26.863

在form1界面

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
String id=jTextField1.getText();
form2 form=new form2(id);
form.setVisible(true);
// TODO add your handling code here:
    } 
```

在 form2 界面中

公共类 form2 扩展 javax.swing.JFrame {

```
/** Creates new form form2 */
public form2(String id) {
    initComponents();
    String id1=id;
    jTextField1.setText(id1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:53:21.267

```
Form_1 frm=new Form_1();
String id2=frm.getID(); 
```

在使用值之前，允许在表单中输入 ID。如果两个表单都是从同一个源打开的，那么将`Form_1`对象传递给`Form_2`而不是创建一个`Form_1`in`Form_2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:54:46.527

`Form_1`这是因为您在调用它之前正在创建一个新`getId`的。您需要使用`JTextField`已经创建的并使用它来设置表单的 ID。在生成的代码中查找文本字段的变量名称并从该字段中获取文本。使用该文本在表单中设置 ID，然后在 form_1 上调用 getId 并将 setText 中返回的内容用于其他字段。

**编辑**再次查看您的 getId，我发现您有设计问题。阅读有关[耦合](http://en.m.wikipedia.org/wiki/Coupling_%28computer_programming%29)和[内聚](http://en.m.wikipedia.org/wiki/Cohesion_%28computer_science%29)的信息。它会让你的生活更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:47:32.697

看看你的控制台输出，可能是一些 Null Pointer 异常被抛出

# c# - 获取只有字符串的嵌套枚举类型？

> ID：11081900
> 
> 赞同：7
> 
> 时间：2012-06-18T11:31:41.233
> 
> 标签：c#, enums, runtime

我想要做的是得到`Type`嵌套`enum`在`Class`只有该枚举数的名称作为字符串。

例子：

```
public static class MyClassWithEnumNested
{
     public enum NestedEnum
     {
         SomeEnum1,
         SomeEnum2,
         SomeEnum3
     }
} 
```

我需要得到

```
Type type = //what shall I write here?
Type type = Type.GetType("MyClassWithEnumNested.NestedEnum");//that doesn't work 
```

有没有办法`Type`在运行时得到这个？

提前致谢：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T11:35:45.280

这应该有效：

```
Type.GetType("MyClassWithEnumNested+NestedEnum"); 
```

# cocoa - 使用绑定选择带有标签的单选组按钮

> ID：11081901
> 
> 赞同：1
> 
> 时间：2012-06-18T11:31:41.960
> 
> 标签：cocoa, binding, tags, radio-button, nsdate

我正在实现一个自定义日期范围选择器。“来自”部分如下所示： ![在此处输入图像描述](../Images/2f36d76433e9043a2e271d2652033777.png)

“to”部分看起来很相似。当我选择早于开始日期的结束日期时，我想自动将结束日期单选组切换到选项 1（“自定义”）并将“从”日期放在日历选择器中。

我已将开始和结束`NSDate`对象绑定到日期选择器，并将标签值绑定到单选组。我不明白为什么以下内容不会导致第一个按钮的可见选择：

`[self setFromTag:1]`

通常，用户仍然按下单选按钮（不确定这是否重要）。非常感谢任何帮助！

# java - 文件布局异常

> ID：11081903
> 
> 赞同：0
> 
> 时间：2012-06-18T11:31:43.187
> 
> 标签：java

我正在编写一个可以打开和编辑文件的 java 应用程序。但是，如果文件的布局不是应有的，我希望它给我一个错误。我的文件如下所示：

```
Title
X Y
Name
X times line 
```

如果查看 try and catch 但这并没有给我正确的解决方案来给出错误，例如：

```
"There is no X or Y specified" 
```

或者

```
"There is nog Title in this file" 
```

有什么选项可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:40:29.157

创建你自己的`Exception`类`extends Exception`。这有时称为*域异常*，因为它仅适用于您的问题域。

这是一个如何编写代码的示例：

```
public class FileLayoutException extends Exception {
    // extending Exception means you can throw it and declare it to be thrown
} 
```

声明你的方法来抛出它：

```
public void readFile() throws FileLayoutException {
    // some impl  
} 
```

然后在检测到问题时像这样使用它：

```
throw new FileLayoutException("There is no X or Y specified"); 
```

或者

```
throw new FileLayoutException("There is no Title in this file"); 
```

因为您的错误条件是“文件相关的”，您可以考虑扩展`IOException`而不是`Exception`

# iphone - 如何以编程方式检测 iOS 设备

> ID：11081904
> 
> 赞同：3
> 
> 时间：2012-06-18T11:31:43.857
> 
> 标签：iphone, device, armv7

我需要知道哪个 iOS 设备当前正在运行应用程序（更确切地说，我需要知道的是设备 armv6 或 armv7）。UIUserInterfaceIdiomPad() 无法检查设备是 iPhone4S 还是 iPhone3G。是否可以？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T11:34:35.430

下载[https://github.com/erica/uidevice-extension（UIDevice-Hardware](https://github.com/erica/uidevice-extension)类），你可以使用这些：

```
[UIDevice currentDevice] platformType]   // returns UIDevice4GiPhone
[[UIDevice currentDevice] platformString] // returns @"iPhone 4G" 
```

或者检查它的视网膜

```
+ (BOOL) isRetina
{
    if([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        return [[UIScreen mainScreen] scale] == 2.0 ? YES : NO;

    return NO;
} 
```

或者查看iOS版本

```
+ (BOOL) isIOS5
{
    NSString *os5 = @"5.0";
    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];

    //    currSysVer = @"5.0.1";
    if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedAscending) //lower than 4
    {
        return NO;
    }
    else if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedDescending) //5.0.1 and above
    {        
        return YES;
    }
    else // IOS 5
    {
        return YES;
    }

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:35:36.870

如果您真的想知道（在运行时）您是在 arm6 还是 arm7 上运行，您可以使用“ `NXGetArchInfoFromCPUType`”（[更多详细信息可在此问题的已接受答案中获得](https://stackoverflow.com/questions/5567215/how-to-determine-binary-image-architecture-at-runtime)）。

否则，您可以使用 platformType 或 platformString，正如我们快速回答的朋友 Omar 建议的那样（并向他 +1！）。

# jquery - slideToggle 在 iPhone 上的表现很奇怪？

> ID：11081909
> 
> 赞同：1
> 
> 时间：2012-06-18T11:31:56.157
> 
> 标签：jquery, drop-down-menu, slidetoggle

在用户单击按钮 (img) 后，我正在使用以下代码创建一个下拉部分 (ul li's)。

```
jQuery(document).ready(function() {

    jQuery(".buttonMenu").click(function (e) {
        jQuery(".slideDownMenu").slideToggle();
            e.stopPropagation();
        });
        jQuery(document).click(function() {
            jQuery(".slideDownMenu").hide();  
    });

}); 
```

HTML：

```
<div class="slideDownMenu">
<ul class="menu">
<li><a onClick="goToByScroll('home');">Home</a></li>
<li><a onClick="goToByScroll('gallery');">Gallery</a></li>
<li><a onClick="goToByScroll('team');">Team</a></li>
<li><a onClick="goToByScroll('contact');">Contact</a></li>
</ul><!-- menu -->
</div> <!-- slideDownMenu -->
<span class="buttonMenu"></span> 
```

我可以单击按钮，显示隐藏部分，单击列表项，被带到同一页面上的锚链接，然后在我单击/点击链接后该部分将隐藏，但是在 iPhone 上，当我再次单击 img/按钮时，什么也不做。我必须从它的位置滚动页面，然后魔法，img/按钮再次可点击。

**为什么会发生这种情况，我该如何解决？**

它只发生在 iPhone/iPad 上。在 Chrome 上，使用 iPhone 作为用户代理很好。此外，控制台中没有错误。

# linux-kernel - 通知链代码崩溃系统

> ID：11081911
> 
> 赞同：0
> 
> 时间：2012-06-18T11:32:08.027
> 
> 标签：linux-kernel

我编写了一个简单的代码来捕获`netdevice`通知并将它们的值打印到消息日志文件中......这是代码：

```
#include <linux/notifier.h>
#include <asm/kdebug.h> 
#include <linux/netdevice.h>
#include <linux/inetdevice.h>

int my_dev_event_handler (struct notifier_block *self,unsigned long val, void *data)
{
    printk (KERN_INFO "my_dev_event: Val=%ld, Interface=%s\n", val,((struct net_device *) data)->name);
    return 0;
}

static struct notifier_block my_dev_notifier = {
.notifier_call = my_dev_event_handler,
};

static int __init
my_init (void)
{
printk(KERN_ALERT "***Module Loaded***\n");
register_netdevice_notifier (&my_dev_notifier); 

   return 0;
}

static void __exit my_end(void)
{
    printk(KERN_ALERT "***Module Unloaded***\n");
}

module_init(my_init);
module_exit(my_end); 
```

此代码编译并正确运行，每次设备启动/关闭时都会打印出“my_dev_event：...”行...但有时（并非总是）整个系统会在设备启动\关闭时冻结...现在我有两个问题：1-为什么系统冻结？这段代码有什么问题吗？2-如果有更好的方法在设备连接/断开连接时通知我的内核模块......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:52:24.153

我看到的唯一问题是`my_end`没有取消注册通知程序。
卸载模块后，这可能会导致崩溃或死机。这是因为指向您的代码的指针保留在 Linux 数据结构中，但您的代码不再存在。

关于另一种方式 - 我认为您正在使用正确的方式来获取这些通知。

# visual-c++ - ATLBase 包含不起作用

> ID：11081917
> 
> 赞同：0
> 
> 时间：2012-06-18T11:32:21.830
> 
> 标签：visual-c++, include, atl, visual-c++-2008-express

我在 StackOverflow 中搜索了我的问题，并且了解了一些解决此问题的方法——我猜。但是，我无法做到这一点：

我有一个在旧版本的 Microsoft Visual Studio 中工作的项目。现在，我必须将这些项目转换为 Visual C++ 2008 Express Edition。我在 StackOverflow 中搜索了这个并下载了 Windows SDK。我在：[this page](https://stackoverflow.com/questions/3898287/c-include-atlbase-h-is-not-found)和[this page](http://www.microsoft.com/en-us/download/details.aspx?id=22668)中找到了这个。

我还更新了 Visual C++ Express 在编译我的代码时查找的目录，并更新了这些目录。我将 include 和 atl 目录添加到 VC++Express。但是，我的输出窗口仍然指出：

```
------ Build started: Project: myProject, Configuration: Debug Win32 ------
Compiling...
stdafx.cpp
c:\documents and settings\username\my documents\visual studio 2008\projects\myProject\myProject\stdafx.h(16) : fatal error C1083: Cannot open include file: 'atlbase.h': No such file or directory
Build log was saved at "file://c:\Documents and Settings\username\My Documents\Visual Studio 2008\Projects\myProject\myProject\Debug\BuildLog.htm"
myProject - 1 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

所以，如果我做错了什么，请您原谅，并希望您给我一些提示。

谢谢你。

**忍者编辑：**我是否也必须下载并安装“Windows Driver Kit Version 7.1.0”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:33:51.780

VS Express Edition 中没有 ATL。

[http://en.wikipedia.org/wiki/Microsoft_Visual_Studio_Express](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio_Express)

> Visual C++ 速成
> 
> Visual C++ Express Edition 可用于编译 .NET 以及 Win32 应用程序。包含 Windows 平台 SDK 编译器和核心文件，可用于构建使用 Win32 API 的应用程序。**要使用 MFC 或 ATL 构建应用程序，必须从其他来源获取库，**例如免费下载的 Windows Driver Kit。

# android - 带有图像而不是文本选项的单选按钮

> ID：11081919
> 
> 赞同：23
> 
> 时间：2012-06-18T11:32:29.177
> 
> 标签：android

如何在 android 应用程序中添加单选按钮，选项为图像，而不是文本。我们可以通过 android:setText 属性将文本设置为单选按钮。但我希望在那里显示图像而不是文本..请帮帮我？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-03T23:07:43.470

这个使用房产`android:drawableRight`怎么样？

```
<RadioGroup
    android:id="@+id/maptype"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/line1"
    android:orientation="horizontal" >
    <RadioButton
        android:id="@+id/map"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:drawableRight="@drawable/map" />

    <RadioButton
        android:id="@+id/satellite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableRight="@drawable/sat" />
</RadioGroup> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-18T11:35:35.037

用这个：

```
<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

   <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/radio01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/radio02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>
</RadioGroup> 
```

# android - Facebook Graph API，如何获取 facebook 在线好友列表？

> ID：11081932
> 
> 赞同：0
> 
> 时间：2012-06-18T11:33:15.710
> 
> 标签：android, facebook, status

> **可能重复：**
> [Facebook 在线好友](https://stackoverflow.com/questions/5666153/facebook-online-friend)

我正在使用 Facebook Graph API，我想知道是否有办法在一次通话中获得所有用户及其当前在线状态（即在线或离线）的列表？

现在我可以从哈希书示例中获取用户列表，返回的 JSONArray 没有任何与此在线状态相关的对象。

**编辑**：现在我使用这个查询来获取朋友列表`query = "select name, current_location, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by name";`，但我只想要在线朋友列表。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:38:05.803

这可能会对您有所帮助[https://stackoverflow.com/a/5669441/1458047](https://stackoverflow.com/a/5669441/1458047)。当您获得这些权限时，您应该能够通过 fql 访问状态。

除此之外，它还需要一个 FQL 查询——`SELECT name,uid FROM user WHERE online_presence IN ('active', 'idle') AND uid IN ( SELECT uid2 FROM friend WHERE uid1 = me())`

# msbuild - 使用 YUI Compressor for .NET 和 MSBuild 的多个排除规则

> ID：11081933
> 
> 赞同：3
> 
> 时间：2012-06-18T11:33:17.003
> 
> 标签：msbuild, yui

我正在寻找如何在 MSBuild 设置 XML for YUI Compressor for .NET 中排除多个通配符匹配的文件

目前我有这个：

```
Exclude="$(ProjectDir)../../Scripts/plugins/*.min.js" 
```

但也想排除匹配的文件：

```
*-vsdoc.js 
```

这个额外的通配符模式应该如何添加到 Exclude 属性中？

完整的 XML 当前如下所示：

```
<ItemGroup>
  ...
  <JavaScriptFiles Include="$(ProjectDir)../../Scripts/plugins/*.js" Exclude="$(ProjectDir)../../Scripts/plugins/*.min.js" />
  ...
</ItemGroup> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:45:02.003

我找到了解决方案......所以我会自己回答这个问题。

要拥有多个排除规则，请使用 ' **;** ' 作为分隔符。

```
<ItemGroup>
  <JavaScriptFiles 
     Include="$(ProjectDir)../../Scripts/plugins/*.js" 
     Exclude="$(ProjectDir)../../Scripts/plugins/*.min.js;
              $(ProjectDir)../../Scripts/plugins/*-vsdoc.js" />
</ItemGroup> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T13:11:57.630

您可以通过逐渐排除项目来做到这一点：

```
 <ItemGroup>
      <JavaScriptContent Include="$(ProjectDir)\..\..\Scripts\**\*.js"/>
      <JavaScriptContent Exclude="$(ProjectDir)\..\..\Scripts\plugins\*.min.js" />
      <JavaScriptContent Exclude="$(ProjectDir)\**\*-vsdoc.js" />
  </ItemGroup> 
```

# android - 在移动网站上的电话号码后自动拨号

> ID：11081940
> 
> 赞同：1
> 
> 时间：2012-06-18T11:33:43.370
> 
> 标签：android, iphone, mobile

在我们的网站上，您可以通过拨打某个电话号码并输入 6 位数代码进行小额支付。是否可以自动拨打此号码，或将其附加在电话号码后面，以便自动输入此 6 位数代码？

如果它适用于 android 或 iPhone，它已经有很大帮助，尽管交叉解决方案显然是更可取的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T11:45:36.157

干得好

在清单中添加以下权限。

```
<uses-permission android:name="android.permission.CALL_PHONE"> 
```

然后调用这个方法

```
private void call() {
    try {
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:1234")); //you put desired phone number
        startActivity(callIntent);
    } catch (ActivityNotFoundException e) {
        Log.e("helloandroid dialing example", "Call failed", e);
    }
} 
```

# java - 尝试使用简单的框架解析没有父节点的 xml 列表

> ID：11081941
> 
> 赞同：0
> 
> 时间：2012-06-18T11:33:43.620
> 
> 标签：java, xml, web-services

我正在使用简单框架来解析 xml 文件。除了没有父节点的列表之外，我可以解析我需要的所有内容。“category.xml”下面的代码片段显示了 xml 格式和无父类别的列表。我还包含了`Category`class 和我的 Root class的代码`ArrayOfTypeCategory`。我有一种有趣的感觉，解决方案很简单，但我无法解决。它有什么可做的`(inline=true)`吗？任何帮助都感激不尽。

---category.xml---

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfCategory xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ACCUMobileWS.org/">
  <Category>
    <CategoryId>99</CategoryId>
    <Name>Frank</Name>
    <Description>Prison Break</Description>
  </Category>
  <Category>
    <CategoryId>101</CategoryId>
    <Name>Jim</Name>
    <Description>Breakig Bad</Description>
  </Category>
</ArrayOfCategory> 
```

---类别类---

```
package com.SimpleFramwork;

import org.simpleframework.xml.Element;
import org.simpleframework.xml.Text;

@Element
public class Category {

@Text
public String CategoryId;

@Text
public String Name;

@Text
public String Description;

} 
```

---ArrayOfTypeCategory 类----

```
package com.SimpleFramwork;

//imports

import java.util.List;
import org.simpleframework.xml.ElementList;
import org.simpleframework.xml.Root;

@Root
public class ArrayOfCategory {

@ElementList(inline = true)
private List<Category> list;

public List getCategories() {
    return list;
}
} 
```

当我运行项目时，我在 log cat 中收到此错误

```
org.simpleframework.xml.core.ValueRequiredException: Unable to satisfy @org.simpleframework.xml.ElementList(data=false, empty=true, entry=, inline=true, name=, required=true, type=void) on field 'list' private java.util.List com.SimpleFramwork.ArrayOfCategory.list for class com.SimpleFramwork.ArrayOfCategory at line 2' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:56:16.950

You have to make the inner values Elements.

```
@Element
public class Category {

    @Element
    public String CategoryId;

    @Element
    public String Name;

    @Element
    public String Description;    
} 
```

# php - 为什么我会得到：警告：printf() php 中的参数太少

> ID：11081947
> 
> 赞同：7
> 
> 时间：2012-06-18T11:34:06.367
> 
> 标签：php

我得到错误

```
Warning: printf() [function.printf]: Too few arguments 
```

查看我看到的代码：

```
function twentyten_posted_on() {
    printf( 
        sprintf( '<a href="%1$s" title="%2$s" rel="bookmark"><span class="entry-date">%3$s</span></a>',
            get_permalink(),
            esc_attr( get_the_time() ),
            get_the_date()
        )
    );
} 
```

似乎是什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T11:48:16.220

和功能相同`printf()`；`sprintf()`它们行为的唯一区别是一个是*语句*（它做某事），另一个是*函数表达式*（它计算某事）。（有关差异的描述，请参阅[此 StackOverflow 答案](https://stackoverflow.com/questions/19132/expression-versus-statement)。）它们都将格式作为第一个参数，然后将零个或多个附加参数作为格式字符串中特殊字符的替换字符串。

你的`sprintf()`函数结构良好。您已经为格式字符串编号，您将替换字符串作为参数来匹配格式字符串。一切都很好。

但是考虑一下这个`printf()`函数在做什么。它得到一个字符串，恰好是`sprintf()`. 如果`sprintf()`'s 包含一个`%`字符，则`printf()`需要一个不包含在您的代码中的替换字符串。

正如其他人所说，您可能可以`sprintf()`从代码中省略 。但你也应该明白为什么会这样。

例如：

```
$fmt = "%%d\n";
printf( $fmt );
printf( sprintf($fmt) );
printf( sprintf($fmt), "Hello world" ); 
```

第一个 printf 起作用，并打印一个“%d”。第二个 printf 失败，因为它的格式字符串暗示它应该有一个替换字符串，但没有提供。第三个打印一个零，因为当您尝试将“Hello world”评估为十进制整数（`%d`）时，这就是您得到的。

查看您的变量，您可能会发现其中至少有一个具有`%`字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:39:13.713

如果你想从字面上使用它们，你必须加倍 % 字符，或者当然不要使用 printf 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:55:16.323

不要在格式化程序中使用输入数据。

做

`printf( "%1$s", calculated input value);`

同样从安全的角度来看，以及从错误的角度来看。格式是代码的一部分（不仅仅是数据）。如果您允许它从输入派生，则代码的任意用户都可以影响其执行。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-18T11:36:50.203

```
sprintf( '<a href="%1$s" title="%2$s" rel="bookmark"><span class="entry-date">%3$s</span></a>',
            get_permalink(),
            esc_attr( get_the_time() ) 
```

在这里，您使用两个参数调用 sprintf，而您有三个占位符`%1$s`,`%2$s`和`%3$s`。

如果要打印，可以将 sprintf 排除在外：

```
printf( 
    '<a href="%1$s" title="%2$s" rel="bookmark"><span class="entry-date">%3$s</span></a>',
        get_permalink(),
        esc_attr( get_the_time(),
        get_the_date()
); 
```

# wpf - 切换弹出内容 wpf

> ID：11081949
> 
> 赞同：0
> 
> 时间：2012-06-18T11:34:23.307
> 
> 标签：wpf, xaml, popup, toggle

这是我想要做的。

## 切换按钮 1 (editNameOpen)

*   选中后，显示弹出内容
*   关闭它的唯一方法是从弹出窗口内的另一个切换按钮（editNameClose）

## 切换按钮 2 (editNameClose)

*   这个在弹出窗口里面
*   当 IsChecked 时，关闭弹出窗口并关闭 editNameOpen

这是我用来尝试解决问题的一些 xaml。到目前为止的问题/问题：

1.  我的 MultiBinding 错误并引发运行时错误“无法设置 MultiBinding，因为必须指定 MultiValueConverter。” 在这种情况下 MultiValueConverter 会转换什么？
2.  当第二个被选中时，我将如何关闭第一个切换按钮？

干杯，
贝里尔

```
<ToggleButton x:Name="editNameOpen" Style="{StaticResource EditToggleButtonStyle}" Grid.Column="1" Grid.Row="0"/>

<Popup x:Name="popupNameEditingControl"
       PlacementTarget="{Binding ElementName=editeditNameOpenName}"
       PopupAnimation="Slide"
       StaysOpen="False"    ** shoulf this be true?
       MinWidth="50">

    ** open and stay open while until editNameClose is checked
    <Popup.IsOpen>
        <MultiBinding >
            <Binding Mode="OneWay" ElementName="editNameOpen" Path="IsChecked"/>
            <Binding Mode="OneWay" ElementName="editNameClose" Path="IsChecked" Converter="{StaticResource invertBoolConv}"/>
        </MultiBinding>
    </Popup.IsOpen>

    ** how do we reset editNameOpen to be NOT IsChecked when editNameClose is checked?
    ** how do we reset editNameClose to be NOT IsChecked and then reset editNameClose to also be not checked when this opens again?
    <StackPanel Orientation="Horizontal" Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}">
        <Label Content="Hello Wolrd!"/>
        <ToggleButton x:Name="editNameClose" Content="X"/>
    </StackPanel>
</Popup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:47:17.030

`Popup.IsOpen`就我个人而言，我会将两者都绑定`ToggleButtons`到`DataContext`

因此，当第一个`ToggleButton`被检查时，它将布尔值设置为`true`，这使得`Popup.IsOpen`评估为`true`并打开`Popup`

第二个`ToggleButton`可能需要使用 a`Converter`来反转布尔属性，因此它显示为 unchecked when `IsOpen = true`，并且检查它会 make `IsOpen = false`，这将自动关闭`Popup`并取消选中第一个`ToggleButton`

至于您遇到的错误， a`MultiBinding`需要 a`Converter`类型`IMultiValueConverter`，因为您不能将一个属性绑定到两个单独的值。您需要一个转换器将这些值转换为您可以使用的单个值。

如果您真的想这样做而不是使用 中的属性，请尝试将 的属性和您的所有属性`DataContext`绑定在一起。`IsOpen``Popup``IsChecked``ToggleButtons`

```
<Popup x:Name="popupNameEditingControl"
       IsOpen="{Binding IsChecked, ElementName=editNameOpen, Mode=TwoWay}"
       ... >
    ...
    <ToggleButton x:Name="editNameClose" Content="X"
                  IsChecked="{Binding IsChecked, ElementName=editNameOpen, 
                      Converter={StaticResource ReverseBooleanConverter}, Mode=TwoWay}" />
    ...
</Popup> 
```

# python - 如何将分数添加到更高或更低的游戏

> ID：11081951
> 
> 赞同：0
> 
> 时间：2012-06-18T11:34:29.227
> 
> 标签：python, python-3.x

```
from random import *

while True:

    random1 = randint(1,20)

    random2 = randint(1,20)

    print("h = higher, l = lower, s = same, q = quit")

    print(random1)

    a = input()

    if a.lower() == 'q':
            break

    print(random2)

    if a.lower() == 'h' and random1 < random2:

        print("Well done")

    elif a.lower() == 'l' and random1 > random2:

        print("Well done")

    elif a.lower() == 's' and random1 == random2:

        print("Well done")
    else:

        print("Loser") 
```

所以我想做的就是把 x 作为我的分数。当答案打印“做得好”时，我希望它在我的分数上加 10 分，然后打印分数。问题是分数似乎在整个游戏中重置了很多次，我希望它在分数上增加 10 或保持不变。有谁知道在我的程序中这样做的方法。我无法想象这会太难，但我只是一个初学者，还在学习。目前我的程序中根本没有任何分数，只是为了让您向我展示最简单/最好的方法也可以解决这个问题。谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:37:18.713

```
x = 0 # initialize the score to zero before the main loop
while True:

    ...

    elif a.lower() == 's' and random1 == random2:
        x += 10 # increment the score
        print("Well done. Your current score is {0} points".format(x)) 
```

无论如何，整个代码可以缩短为：

```
from random import *
x = 0
while True:
    random1 = randint(1,20)
    random2 = randint(1,20)
    print("h = higher, l = lower, s = same, q = quit")
    print(random1)
    a = input().lower()
    if a == 'q':
        break

    print(random2)

    if ((a == 'h' and random1 < random2) or
        (a == 'l' and random1 > random2) or
        (a == 's' and random1 == random2)):
        x += 10
        print("Well done. Your current score is: {0}".format(x))
    else:
        print("Loser") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:39:29.017

只需添加一个变量：

```
score = 0 #Variable that keeps count of current score (outside of while loop)

while True:
...
    elif a.lower() == 'l' and random1 > random2:
        score += 10 #Add 10 to score
        print("Well done")
    else:
        #Do nothing with score as it stays the same
        print("Loser") 
```

# jpa - JPA Criteria API：LEFT JOIN 上的多个条件

> ID：11081955
> 
> 赞同：8
> 
> 时间：2012-06-18T11:34:37.700
> 
> 标签：jpa, left-join, criteria-api

我有一个像下面这样的连接引用，它的第一个连接表达式是由 JPA API 自动构造的。

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder();
CriteriaQuery<Tuple> c = cb.createTupleQuery();
Root<Demand> demands = c.from(Demand.class);
Join<Demand, Metadata> joinMetadata = demands.join("metadatas", JoinType.LEFT); 
```

但是，我想向我的 joinMetadata 添加一个附加条件，例如 Metadata.type="AFFECTATION_KEY" 但我不知道如何。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T13:10:48.100

# JPA

JPA 2.0 始终仅通过映射连接列连接，因为它不支持 ON 子句。另一方面，JPA 2.1 确实支持这一点：

```
... 
Join<Demand, Metadata> joinMetadata = demands.join("metadatas", JoinType.LEFT);
joinMetadata.on(cb.equal(joinMetadata.get("type"), "AFFECTATION_KEY")); 
```

* * *

# EclipseLink

EclipseLink 2.4 支持 ON 子句，

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON)

也可以通过 Criteria API，使用提供子句支持的 EclipseLink*原生Expression API，*`on`

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#JpaCriteriaBuilder_and_EclipseLink_Extensions](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#JpaCriteriaBuilder_and_EclipseLink_Extensions)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T22:35:05.693

Hibernate 的 Criteria API 3.6 版也支持它：

```
 Criteria c = session.createCriteria(Tuple.class);

    c.createAlias("demands", "d")
    .createAlias("d.metadata", "m", 
        Criteria.LEFT_JOIN, Restrictions.eq("m.type", "AFFECTATION_KEY")); 
```

或者您可能需要 Restrictions.eqProperty() 最后一点。请注意带有第四个参数的 createAlias() 的低估版本。这是文档中的引用

参数：

*   AssociationPath - 一个点分隔的属性路径
*   alias - 分配给加入关联的别名（供以后参考）。
*   joinType - 要使用的连接类型。
*   withClause - 要添加到连接条件的条件（ON 子句）

[休眠 API 3.6](http://docs.jboss.org/hibernate/orm/3.6/javadocs)

# iphone - UIView 动画问题（图片动画）

> ID：11081956
> 
> 赞同：0
> 
> 时间：2012-06-18T11:34:41.303
> 
> 标签：iphone, ios, uiimageview, uiviewanimation

我必须显示图像的幻灯片。但在某一时刻，我只知道当前和以前的图像（因为内存管理）。我需要用动画（UIViewAnimationOptionTransitionCurlUp）显示下一张图片。我想设置动画帧（所以，当 1 个图像大于 2 个或反之亦然时，动画帧应该是 2 个图像中最大的一个）。所以，我应该看到 UIViewAnimationOptionTransitionCurlUp 不是在整个屏幕，而是在屏幕的一部分。这是我的代码：

```
slideShowView.frame = [self getBiggestFrame];
slideShowView.center = [self getCenter];
[UIView transitionWithView:slideShowView
                  duration:4.0
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^
                { 
                    [prevImageView removeFromSuperview]; 
                    [slideShowView addSubview:nowImageView]; 
                }
                completion:NULL]; 
```

我认为，动画帧依赖于 slideShowView.frame。当我为相同大小的图像制作动画时，一切正常。但是当secong图像宽度更大时，第一张图像的宽度，我在整个动画过程中看到第一张图像，只有在动画之后第一张图像才会消失。 ![在此处输入图像描述](../Images/ed07fae68157377289e03221b6e9280c.png)

在图像中，您可以看到大图像前面的蓝色图像。但是在这张图片中，动画几乎完成了，蓝色图像应该消失了。这就是问题所在。我将动画持续时间设置为 10。我看到第二个图像出现在第一个图像后面，没有动画。而不是所有这些动画到第二个图像 ![在此处输入图像描述](../Images/114f586c04855dd811682b7347c831f8.png)

![在此处输入图像描述](../Images/9ae0bc6620453271972e9e0c2da8451d.png)

# android - 启动我的第一个 android 应用程序

> ID：11081958
> 
> 赞同：1
> 
> 时间：2012-06-18T11:34:56.480
> 
> 标签：android, emulation

我正在尝试在 android 模拟器中启动我的 hello world 应用程序。但是在控制台中我收到以下错误：

```
 [2012-06-18 16:55:50 - hello] Failed to find an AVD compatible with target 'Android 4.0.3'. 
```

我的项目名称是 hello ，包名称是 com.hello 。请告诉如何解决问题并获得进入Android世界的灵感。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:38:21.653

上述错误表明您正在**Android 4.0.3**上开发，但您的 Android AVD 版本低于 Android 4.0.3。

解决方法 1：
创建/编辑 AVD 并将**Platform**指定为**4.0.3**。

解决方法 2：
更改`<uses-sdk android:minSdkVersion="10"/>`“AndroidManifest.xml”和
`target=android-10`.`project.properties`

注意：我仅使用了 API 10。您应该使用您为**AVD**指定的 API 级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:38:59.593

您需要一个与您的应用程序具有相同目标 API 的模拟器。

现在通过转到窗口 > AVD 管理器然后新建来创建一个新的 AVD。制作一个目标与您的应用程序“4.0.3”或 API 级别 15 相同的新 AVD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:39:05.770

您正在使用具有较旧 android 操作系统的设备或 avd，但您的项目似乎配置为 android 4.0.4

使用 android 4.0.4 创建一个 android 虚拟设备或将您的项目配置设置为您的设备（或 avd）sdk 级别（或更低）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T11:39:06.957

您使用的模拟器与您在清单文件中提到的 sdk 版本不兼容。

如果你给了：

```
 <uses-sdk android:minSdkVersion="15" /> 
```

那么你需要为 4.0 安装 sdk。*

或者您可以在清单中更改它：

```
 <uses-sdk android:minSdkVersion="7" /> 
```

# parallel-processing - Fortran C - 调用约定 - 编译 BLACS 时下划线不匹配

> ID：11081963
> 
> 赞同：0
> 
> 时间：2012-06-18T11:35:09.917
> 
> 标签：parallel-processing, blas

我正在 Linux 上编译包 BLACS。我编译了包，INSTALL目录的内容。当我尝试构建目录 TESTING 的内容时，出现错误

```
blacstest.f:(.text+0xb9): undefined reference to `blacs_gridinit_' 
```

等等

当我尝试在库中查找函数时，我得到的消息是，

```
~/sources/BLACS/LIB$ nm blacs_MPI-LINUX-0.a | less | grep blacs_gridinit_
blacs_gridinit_.o:
0000000000000000 T blacs_gridinit__
Cblacs_gridinit_.oo: 
```

所以该函数存在，但带有双下划线。如何让它只有一个？

我在 Bmake.inc 中尝试了一些东西。

```
#   INTFACE = -Df77IsF2C
#   INTFACE = -fno-underscoring
    INTFACE = -DAdd_ 
```

但它似乎都不起作用。有人有这方面的经验吗？

谢谢，伊兰。

编辑： BLACS 带有一个 .inc 文件，其中所有内容都已配置。我有：

```
 F77            = mpif77
   F77NO_OPTFLAGS = 
   F77FLAGS       = $(F77NO_OPTFLAGS) -O -fPIC 
   F77LOADER      = $(F77)
   F77LOADFLAGS   = 
   CC             = mpicc
   CCFLAGS        = -O4 -fPIC
   CCLOADER       = $(CC)
   CCLOADFLAGS    = 
```

-assume 2underscore 在任何一个编译标志中都不被接受。此外，模板 .inc 文件说：

```
#  ---------------------------------------------------------------------------
#  The Fortran 77 to C interface to be used.  If you are unsure of the correct
#  setting for your platform, compile and run BLACS/INSTALL/xintface.
#  Choices are: Add_, NoChange, UpCase, or f77IsF2C.
#  ---------------------------------------------------------------------------
#   INTFACE = -Df77IsF2C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:43:38.653

EasyBuild（部分）为您解决了这个问题，请参阅[https://github.com/hpcugent/easybuild-easyblocks/blob/master/easybuild/easyblocks/b/blacs.py](https://github.com/hpcugent/easybuild-easyblocks/blob/master/easybuild/easyblocks/b/blacs.py)了解实现 BLACS 构建过程的 Python 代码。

它还没有构建测试，但它确实以正确的方式构建了 BLACS。

正如您已经在 template.inc 文件中看到的那样，您应该构建 xintface 工具并运行它，这将帮助您确定 INTFACE 的正确设置是什么。您还需要确保 TRANSCOMM 设置正确，您可以使用 xtc_CsameF77 和 xtc_UseMpich 工具。

一旦你计算出 INTFACE 和 TRANSCOMM 的值，重建 BLACS 并在 make 命令行上设置它们。然后尝试再次构建测试（使用相同的选项）。

# entity-framework-4 - EF 代码优先。TPT 继承和子相关实体未加载

> ID：11081966
> 
> 赞同：0
> 
> 时间：2012-06-18T11:35:11.540
> 
> 标签：entity-framework-4

我已经有一段时间了，还没有找到解决方案。我在这里没有看到任何类似的东西。

首先，EF 4.3.1.0 和 MVC3

我有一个 Component 类，两个表继承自：Group 和 Item。一个组也可以包含一个组件列表（我们知道它们可以是组或项）。

到那时一切都很好。现在的问题。还有另一个类：布局。一个组（并且只有一个组，而不是项目或组件）有一个布局。

问题是当我加载所有组件层次结构时，组的布局对象始终为空。

让我放一些代码：

```
public abstract class Component
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool Active { get; set; }
    public int OrderNum { get; set; }
    public virtual Group ParentGroup { get; set; }
}

[Table("Group")]
public class Group : Component
{
    public virtual IList<Component> Items { get; set; }
    public virtual Layout Layout { get; set; }

    public Group()
    {
        this.Items = new List<Component>();
        Layout = new Layout();
    }
}

public class Layout
{
    public int Id { get; set; }
    public string Data { get; set; }
} 
```

我尝试过使用和不使用延迟加载。

如果我在对上下文的调用中包含布局表，只要我只检索组，它就可以工作。如果我还检索 Items，它将引发异常（显然它可以建立 Item 和 Layout 之间的关系）。

因此，如果我检索所有组件，那么如果该组件是一个组，我必须再次调用上下文以检索该确切的组对象，然后它将与布局一起提供。但是我认为这种方式效率很低，而且当我显示所有层次结构时，我也不打算在视图中这样做。

据我所知，由于我将实体作为组件检索并且组件没有布局，因此即使某些组件确实是具有布局的组，也不会为组加载布局。

**我的问题是如何像组件层次结构一样检索所有层次结构，然后当我通过它时，如果当前元素是一个组，以便在将组件转换为组后能够访问布局，而不是手动检索从数据库。**

如果您觉得需要有关我的问题的更多信息，请提出任何问题。提前谢谢了。

# sql - 从选择查询中插入查询值

> ID：11081968
> 
> 赞同：3
> 
> 时间：2012-06-18T11:35:13.823
> 
> 标签：sql, stored-procedures, insert

我想将值设置为`insert query`来自`select query`，如何执行此操作。

```
insert into t_user (id,user_id) values (1, ) 
where user_id in (select id from user where id=123) 
```

我想`user_id`从选择查询值中设置值，如何在 sql 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:37:43.887

试试这个：

```
INSERT INTO t_user (id, user_id)
SELECT 1, id 
FROM user
WHERE id = 123 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:37:25.413

```
insert into t_user(id, user_id) select 1, id from user where id=123; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T11:40:26.110

```
insert into t_user (id,user_id)
select 1,id from user where id=123 
```

如果您的表只有两列，则无需再次指定列

```
 insert into t_user
  select 1,id from user where id=123 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T11:39:54.703

在那种情况下，这有什么问题：

```
INSERT INTO t_user(id, user_id) VALUES(1,123); 
```

我的意思是这个问题有点奇怪，如果你从一开始就知道这两个值，为什么还要费心选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T12:10:54.913

```
INSERT INTO t_user(id, user_id)
       SELECT id,1
       FROM user ;
       WHERE id = 123 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T11:37:50.073

假设您有这样的表结构

```
----------      -------
 articles        users
----------      -------
 rowid           rowid
 article_id      user_id
 user_id         user_name 
```

还有一些这样的条目

```
---------------------------------
 users
---------------------------------
 rowid     user_id     user_name
---------------------------------
   1         124         joe
   7         12309       mark 
```

根据另一个表的查找/引用插入值的正确方法是：

```
 INSERT INTO articles (rowid, article_id, user_id)
     SELECT 1, 12392, user_id FROM users
     WHERE rowid = 7 
```

这会将以下记录插入到文章中

```
---------------------------------
 articles
---------------------------------
 rowid     article_id    user_id 
---------------------------------
   1          12392       12309 
```

但是，我不知道为什么要使用这种数据库设计或插入方法。

# ajax - Primefaces：如何在没有用户交互的情况下使用咆哮通知

> ID：11081971
> 
> 赞同：3
> 
> 时间：2012-06-18T11:35:20.523
> 
> 标签：ajax, jsf-2, primefaces

我对 JSF/Primefaces 很陌生，所以也许我以错误的方式处理问题，而且我一直在搜索论坛，但没有运气。

我最大限度地简化了问题并使用了 Damian 的 @PostConstruct

所以要恢复，我希望在加载 test.xhtml 时，我的咆哮通知会弹出 -***即没有用户交互***......它没有出现，但是当你点击保存按钮时它会出现。

它确实通过了 sayHi() 但此时似乎并不知道容器。

```
WARNING: FacesMessage(s) have been enqueued, but may not have been displayed. 
```

目的是在数据库访问失败时显示用户友好的咆哮通知。

我一定错过了一些我认为的基本原则:(

## 测试.xhtml

```
 <h:form id="form">

        <p:growl id="growl" showDetail="true" showSummary="true" sticky="true" />  

        <h:outputLabel value="#{testGrowl.message}" />

        <p:commandButton value="Save" actionListener="#{testGrowl.save}" update="growl" />  
    </h:form> 
```

## TestGrowl.java

```
@ManagedBean
public class TestGrowl {
private String message;

public TestGrowl()
{
    //sayHi(); commented to try with @PostConstruct
    message = "we've been in the TestGrowl constructor";
}

public String getMessage() {
    return message;
}

public void setMessage(String message) {
    this.message = message;
}

public void save(ActionEvent actionEvent) {  
    sayHi();
}  

@PostConstruct
private void sayHi(){
    FacesContext context = FacesContext.getCurrentInstance(); 
    context.addMessage(null, new FacesMessage("Successful", "Hello "));  
}
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T12:07:39.487

有可能的。当消息添加到bean的构造函数、@PostConstruct或preRenderView监听器时，它会自动显示在页面上，您不必使用任何“onload”事件。您的代码的问题是您没有正确发送消息。你应该这样做：

```
FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "test", "test");  
FacesContext.getCurrentInstance().addMessage(null, msg); 
```

addMessage 的第一个参数是发生错误的组件的 ID，如果是全局错误，则为 null。此外，如果在您的咆哮中您只想显示全局消息，并且您希望仅使用每个组件的 p:message 显示特定于组件的错误消息，您应该添加`globalOnly="true"`到咆哮中。

# java - Mysql：如何识别表锁等待并解锁它

> ID：11081972
> 
> 赞同：0
> 
> 时间：2012-06-18T11:35:25.837
> 
> 标签：java, mysql

我的 web 应用程序代码是用 java、swing、hibernate 组合编写的，在 tomcat5 中运行。在某些情况下，一个表在更新/删除时被锁定，一段时间后无法自行解锁[错误是：mysql lock wait timeout exceeded, try restarting transaction]，导致应用程序无法访问。

我必须编写一个 java 调度程序，它会定期检查锁定状态，并在指定时间后说 30 秒解锁表。

具体来说***，我想知道如何检查表是否被锁定？***以及**如何解锁**它？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T11:49:47.077

您可以使用[`GET_LOCK`](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_get-lock)非常低的超时来检查是否存在锁。如果返回码是 0 另一个线程有锁，否则你得到 1 并且你的线程有锁。

至于如何解锁，这就有点难了。持有锁的可能是一个完全不同的应用程序，并且持有它可能是有充分理由的。不知道能不能强行破解。但我不认为你真的想这样做。

# php - Cakephp 1.3 表单数据

> ID：11081976
> 
> 赞同：-1
> 
> 时间：2012-06-18T11:35:34.277
> 
> 标签：php, cakephp, cakephp-1.3

我对 Cake 很陌生，但我是一个称职的 PHP 开发人员。我在返回表单并让它保留数据时遇到问题。仅供参考 - 我继承了我正在开发的网站，但它的编码很糟糕。我正在尝试清理它。

这是一个带有购物车的旅游预订系统，但它是手工构建的，而不是另一个电子商务解决方案的一部分。

```
Workflow - Each line has a view
Customer adds tour to cart. (booking)
Show cart. (cart)
Add contact details (add_cust)
Review cart (review)
Enter credit card detail (card)
Thank you page (thankyou) 
```

如果卡被拒绝，我需要提供返回卡视图以再次输入详细信息的选项。但是当我进行重定向并返回时，购物车是空的，页面上没有数据。

我需要在`thankyou`视图中创建一个返回按钮，该按钮将返回到卡片视图并且仍然具有所有数据。我可以通过点击浏览器上的后退按钮几次来做到这一点，但这会产生另一组问题。

我的控制器中有执行重定向的方法，但除此之外，我不确定如何重新填充我的表单。

因此，使用`card_back()`它所包含的所有方法都是重定向回卡片视图。我怎样才能把我的数据放回那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:05:54.927

检查`thankyou`控制器中的操作并查找可以从会话中删除购物车信息的代码。通常，在订单完成后，购物车数据会从会话中删除，因为它们不再需要。

以前的开发人员的一个错误是他没有想到订单创建失败的可能性，尽管失败了，他还是删除了购物车详细信息。

第二种选择是检查是否使用了一些会话。如果没有，请尝试将购物车详细信息设置到会话中，并在`cart`控制器内的操作中检查存储在会话中的购物车详细信息。如果他们在场，请在表格中填写该详细信息，如果没有，请留空。然后在控制器的操作中成功创建订单并存储在服务器上后实施购物车会话删除`thankyou`......

# android - 从浏览器 URI 启动 Android 应用程序

> ID：11081980
> 
> 赞同：1
> 
> 时间：2012-06-18T11:35:36.907
> 
> 标签：android, html, android-browser

```
 <activity
                android:name=".RegisterationCompletion"
                android:configChanges="orientation"
                android:label="@string/app_name" >
                <intent-filter  >
                    <action android:name="android.intent.action.VIEW" />
                    <category android:name="android.intent.category.DEFAULT" />
                    <category android:name="android.intent.category.BROWSABLE" />
                    <data
                        android:scheme="test" />
                 </intent-filter>
       </activity> 
```

我需要从浏览器 URI 启动 android 应用程序，但此代码在 Ginger Bread 和其他更高版本中不起作用。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:29:56.670

```
 <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <category android:name="android.intent.category.LAUNCHER" />
                <data android:scheme="Testapp" />
     </intent-filter> 
```

**要点：我们必须使用 href 访问链接**

小心使用 AndroidManifest.xml 中的大写和小写字母。

无论您在哪里看到“Testapp”而不是“TestApp”。Android 无法处理除第一个之外的大写字母。

这段代码对我来说很好......

# c# - 与远程服务器通信时出现异常？

> ID：11081986
> 
> 赞同：0
> 
> 时间：2012-06-18T11:36:00.790
> 
> 标签：c#, exception, remoting, filenotfoundexception, .net-remoting

我已经与远程服务器建立了通信。远程服务器暴露了一个事件。当我尝试订阅该事件时，我得到以下堆栈跟踪的异常

```
 [System.Reflection.TargetInvocationException] 
    = {"Exception has been thrown by the target of an invocation."}

    [System.Reflection.TargetInvocationException] 
    = {"Exception has been thrown by the target of an invocation."}
    at System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
    at System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark,
    Boolean throwOnFileNotFound, Boolean forIntrospection)
    at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
    at System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)\r\n
    at System.Reflection.Assembly.Load(String assemblyString)
    at System.Reflection.MemberInfoSerializationHolder..ctor(SerializationInfo info, StreamingContext context)

    StackTrace          
    Server stack trace: 
    at System.RuntimeMethodHandle._SerializationInvoke(Object target, SignatureStruct& declaringTypeSig, SerializationInfo info, StreamingContext context)
    at System.Reflection.RuntimeConstructorInfo.SerializationInvoke(Object target, SerializationInfo info, StreamingContext context)
    at System.Runtime.Serialization.ObjectManager.CompleteISerializableObject(Object obj, SerializationInfo info, StreamingContext context) 
    at System.Runtime.Serialization.ObjectManager.FixupSpecialObject(ObjectHolder holder)
    at System.Runtime.Serialization.ObjectManager.DoFixups()
    at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
    at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
    at System.Runtime.Remoting.Channels.CoreChannel.DeserializeBinaryRequestMessage(String objectUri, Stream inputStream, Boolean bStrictBinding, TypeFilterLevel securityLevel)
    at System.Runtime.Remoting.Channels.BinaryServerFormatterSink.ProcessMessage(IServerChannelSinkStack sinkStack, IMessage requestMsg, ITransportHeaders requestHeaders, Stream requestStream, IMessage& responseMsg, ITransportHeaders& responseHeaders, Stream& responseStream)

    Exception rethrown at [0]: 
    at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
    at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
    at Mycode.Method(EventHandler value)
    at Mysource.Initialize() 
```

我的代码块如下：远程服务器的配置如下 //code

```
TurnOffRemotingExceptionFiltering();

BinaryClientFormatterSinkProvider^ clientProvider = nullptr;
BinaryServerFormatterSinkProvider^ serverProvider = gcnew aryServerFormatterSinkProvider();
serverProvider->TypeFilterLevel = TypeFilterLevel::Full;
System::Collections::IDictionary^ props = gcnew Hashtable();
props["port"] = port;
String^ guid = System::Guid::NewGuid().ToString();
props["typeFilterLevel"] = TypeFilterLevel::Full;

//TcpChannel
channel = gcnew TcpChannel(props, clientProvider, serverProvider);
ChannelServices::RegisterChannel(channel, false);
props["name"] = guid;

void RemoteConnectionManager::TurnOffRemotingExceptionFiltering()
{
                 // Gets the assembly in which the 'System.Runtime.Remoting.RemotingConfiguration' is defined.
                Assembly^ remoting = Assembly::GetAssembly(RemotingConfiguration::typeid);

                // Gets the Type object of 'System.Runtime.Remoting.CustomErrorsModes' from assembly instance.
                Type^ customErrorsModes = remoting->GetType("System.Runtime.Remoting.CustomErrorsModes");

                // Gets the Type object of 'System.Runtime.Remoting.RemotingConfigHandler' from assembly instance.
                Type^ remotingConfigHandler = remoting->GetType("System.Runtime.Remoting.RemotingConfigHandler");

                // Gets details of '_errorMode' field.'_errorMode' indicates whether the server channels in 
                // this application domain return filtered or complete exception information to local or remote callers.
                FieldInfo^ errorMode = remotingConfigHandler->GetField("_errorMode",
                                        BindingFlags::Static | BindingFlags::NonPublic);

                // Gets details of 'Off' field.'System.Runtime.Remoting.CustomErrorsModes' is an Enumeration
                FieldInfo^ mode = customErrorsModes->GetField("Off");

                // Sets "Off" to get to get complete exception information 
                // from server channels to to local or remote callers.
                errorMode->SetValue(nullptr, mode->GetValue(nullptr));
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:29:35.833

在分布式系统的情况下，我们需要一个包装类来与服务器和客户端进行通信。没有包装类，我们不能直接订阅事件。这个包装类充当与客户端和服务器进行通信的媒介。

# ruby - 在 shapefile 中为多边形着色

> ID：11081991
> 
> 赞同：1
> 
> 时间：2012-06-18T11:36:20.677
> 
> 标签：ruby, gis, polygon, shapefile, georuby

我有一个[ESRI Shapefile](http://en.wikipedia.org/wiki/Shapefile)，其中包含行政区域的多边形以及与这些区域相对应的数据。我想根据数据生成这些 shapefile 的图像，如下[所示](https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles)：

![在此处输入图像描述](../Images/50cda5c8cb502f973f51570addec8096.png)

Here's an answer about doing this in [ASP.NET](https://stackoverflow.com/questions/6586389/coloring-a-shapefile-map-in-asp-net)，上面的图像是用 R 生成的；不幸的是，我对这两种语言都不熟悉。在 Ruby 中是否有一种简单的方法可以做到这一点，例如。[地理红宝石](http://georuby.rubyforge.org/)？在例如轻松实现这一点的想法。Java、C 或（不寒而栗）PHP 也将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:13:27.457

我不熟悉 shapefile 操作，但您可能想看看[GDAL/OGR](http://www.gdal.org/) ruby​​ 绑定。它们应该允许您访问 shapefile 文件中的数据，然后您可以使用 gnuplot 或（这将是我的选择）[RMagick/GraphicsMagick 库进行绘制](http://rmagick.rubyforge.org/portfolio3.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T11:54:55.513

查看 Gnuplot 的[Ruby 包装器](https://github.com/rdp/ruby_gnuplot)，以及 Gnuplot 的一些[示例](http://gnuplot.sourceforge.net/demo_4.4/fillcrvs.html)，了解如何绘制填充形状。

# java - java primefaces 自动更新图片

> ID：11081992
> 
> 赞同：0
> 
> 时间：2012-06-18T11:36:30.583
> 
> 标签：java, ajax, jakarta-ee, primefaces

我有一个显示来自雅虎财经的图表的应用程序，我希望每次在线更改图表时更新图表。下面是我的代码。

```
<table style="width: 100%">
                <tr>
                    <td> 
                        <b>Nifty 50</b><br/>
                        <b><h:outputText value="#{equityBean.niftyChange}"/></b><br/>
                        <b><h:outputText value="#{equityBean.niftyChangePer}"/></b><br/>
                        <b><h:outputText value="#{equityBean.niftyLTP}"/></b></td>
                <td><img src="http://ichart.yahoo.com/t?s=^NSEI"/></td>
                <td>&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td> 
                    <b>BSE Sensex</b><br/>
                    <b><h:outputText value="#{equityBean.sensexChange}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexChangePer}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexLTP}"/></b></td>
                <td><img src="http://ichart.yahoo.com/t?s=^BSESN"/></td>
                <td>&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                <td> 
                     <b>Gold</b><br/>
                    <b><h:outputText value="#{equityBean.sensexChange}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexChangePer}"/></b><br/>
                    <b><h:outputText value="#{equityBean.sensexLTP}"/></b></td>
                <td><img src="http://ichart.yahoo.com/t?s=GCQ12.CMX"/></td>
                </tr>

                </table> 
```

我怎么用 p:ajax 做呢？或者除了调度程序之外还有其他方式吗？ **已编辑**

```
<p:poll interval="3"   
               listener="#{equityBean.sensexChange}" update=":frm" /> 
```

frm 是表单的 id，我在表单中显示了日期，但它没有更新

```
 <h:form id="frm">

        <h:outputText value="#{equityBean.tdate}"/> 
```

**再次编辑：**

```
public String getSensexChange() {
     setIndex("^BSESN");
    return sensexChange;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:44:47.703

您需要的是 p:pool 组件，它在指定的时间间隔内进行 ajax 调用。例子：

```
<p:poll interval="3"   
            listener="#{counterBean.increment}" update="txt_count" /> 
```

[您可以在这里](http://www.primefaces.org/showcase/ui/poll.jsf)看到它的实际效果。

# php - 在 Linux 上为 SYMFONY 2 连接 Doctrine 2 到 MSSQL

> ID：11081993
> 
> 赞同：10
> 
> 时间：2012-06-18T11:36:30.607
> 
> 标签：php, sql-server, linux, symfony, doctrine-orm

我正在尝试使用 Doctrine 2（用于 Symfony 2）从 linux 机器连接到 MSSQLServer。

我已经安装了 pdo_dblib（FreeTDS/Sybase DB-lib 的 PDO 驱动程序），并且能够通过命令行上的 tsql 和 php cli 连接到数据库服务器。因此我知道这是有效的。

在我的 Symfony/app/config/parameters.ini 文件中，我将 database_driver="pdo_sqlsrv" 指定为数据库驱动程序（我读到这将由 处理`db_lib`）但是当尝试运行创建数据库命令时（使用命令`php app/console doctrine:database:create`）我我收到错误：

> 无法为命名连接创建数据库找不到驱动程序

然后我将驱动程序更改为`database_driver="pdo_dblib"`，现在我收到错误：

> [Doctrine\DBAL\DBALException]
> 给定的“驱动程序”pdo_dblib 未知，Doctrine 当前仅支持以下驱动程序：pdo_mysql、pdo_sqlite、pdo_pgsql、pdo_oci、oci8、ibm_db2、pdo_ibm、pdo_sqlsrv

所以似乎连接到 MSSQL 我唯一的选择是`pdo_sqlsrv`，所以我去安装它。但是，[我刚刚在这里发现](http://php.net/manual/en/ref.pdo-sqlsrv.php)，

> PDO_SQLSRV 扩展只与在 Windows 上运行的 PHP 兼容。

因此，学说支持的驱动程序和可在 linux 上使用的驱动程序似乎是互斥的。通过搜索，到目前为止，我还没有找到任何解决此问题的实例（一个人将问题标记为已解决，但是当我阅读该线程时，他只是将他的开发环境移动到了 windows 框......不完全是我所拥有的心里！）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T14:29:36.393

在 linux（至少基于 Debian 的发行版）下，php 需要`php5-sybase`支持 Sybase 和 MSSql 的包。

如果你使用的是基于 debian 的发行版，你会想要做

```
$ sudo apt-get install php5-sybase
$ sudo service apache2 restart 
```

和

```
php -r "phpinfo();" | grep "PDO drivers" 
```

应该给你

> PDO 驱动程序：dblib、mysql、sqlite、...

`dblib`实际上是我们需要的

现在能够将此驱动程序与 Doctrine 一起使用，这篇文章： [Doctrine 2 - 如何添加自定义 DBAL 驱动程序？](https://stackoverflow.com/questions/8492941/doctrine-2-how-to-add-custom-dbal-driver)帮助我找到了答案。

OP 建议[在 git 上使用这个包](https://github.com/intellectsoft-uk/MssqlBundle)，使事情协同工作。

# html - jQuery ajax 获取：dataType html 失败并显示 200 OK

> ID：11081995
> 
> 赞同：0
> 
> 时间：2012-06-18T11:36:39.320
> 
> 标签：html, jquery

有很多类似的问题，但我没有找到一个直截了当的问题：我正在尝试使用 DataType html 从 jQuery $.ajax 调用中获取一些纯文本。StatusCode 为 200 OK，但触发了错误函数。

* * *

代码时间：

## HTML (index.html)

```
<html>
 <head>
  <title>Test</title>
  <script type="text/javascript" src="jquery.js"></script>
 </head>
<body>
 <script type="text/javascript">
  function doajax(){
   $.ajax({
   url:'http://localhost/test.php',
   DataType:'html',
   data:{id:5},
   success:function(data){ alert('We made it'); },
   error:function(v1,v2,v3){ alert('Something went wrong'); } //gets fired
  });
 }
 </script>
 <a href="#" onclick="doajax(); return false;">Click to test</a>
</body>
</html> 
```

## PHP (test.php)

```
echo 'Hi'; 
```

现在这对我来说看起来微不足道，但我无法从 test.php 文件中获取数据。只需要“Hi”字符串，但我触发了错误处理程序，甚至没有返回任何内容：

## 错误响应

```
xhr:status 200
status:error
text:-blank- 
```

为什么我不能让这个简单的脚本工作？

编辑：缺少逗号

更新：这是 Firefox 的问题！所有浏览器都可以工作，但它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:47:41.163

代码很好，但是你错过了逗号（`,`）`data:{id:5}`

所以应该是`data:{id:5},`而不是`data:{id:5}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T01:28:58.130

我有同样的问题，但修复略有不同。

我正在提出一个获取请求

```
JQueryAjaxSettings ={
    url: '/api/Cart/',
    type: 'GET',
    dataType: "application/json"
}; 
```

事实证明，将数据类型提供给 get 请求会导致错误被调用。只需删除即可`datatype: "application/json"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T13:28:51.610

想通了：我`http://localhost`在打开测试页面时发送 ajax 请求，也就是`http://192.168.1.110`我自己的本地 IP 地址。当然，Javascript“同源策略”弄得一团糟并破坏了请求。

将 ajax 请求更改为`http://192.168.1.110`现在一切顺利。

# android - 允许私有分布式 android 应用程序的自动更新功能

> ID：11081998
> 
> 赞同：1
> 
> 时间：2012-06-18T11:36:53.227
> 
> 标签：android, android-intent, autocomplete, installation, android-manifest

对于我的私有分布式 android 应用程序，我正在检查是否有任何更新可用，每次用户打开应用程序时，我都会使用一些 Web 服务从我的分发服务器。如果有任何更新可用，我正在将最新的 apk 下载到 SD 卡，并通过以下 Intent 调用。它将安装新版本。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(fileName)), "application/vnd.android.package-archive");
startActivity(intent); 
```

在安装时，它显示替换应用程序对话框，并显示一条消息“您正在安装的应用程序将替换另一个应用程序。所有以前的用户数据都将被保存。” 带有“确定”和“取消”选项。我不想显示替换应用程序对话框，而是想要更新和取消或允许自动更新选项，就像 android 市场上提供的某些应用程序一样。如何做到这一点，请给任何建议。

![在此处输入图像描述](../Images/cdb60e02d8fd19d2be63710fb914b2cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:33:55.243

好吧，它可以使用[http://push-link.com](http://push-link.com)来实现。它有很多不错的功能。

有一种名为 PushLink.idle 的方法可以“启用/禁用”自动更新。

# python - 使用模板继承时，Django-endless-pagination 失败

> ID：11081999
> 
> 赞同：0
> 
> 时间：2012-06-18T11:36:53.597
> 
> 标签：python, django, django-templates, pagination

[在我使用模板继承之前， Django Endless Pagination](http://django-endless-pagination.readthedocs.org/)工作得非常好。

视图.py：

```
from django.shortcuts import render

def home(request):
    objects = range(30)

    return render(request,
        'index.html',
        locals()
    ) 
```

索引.html：

```
{% extends "root.html" %}

{% load endless %}

{% paginate objects %}
{% block content %}
    {{ objects }}
    <br/>
    <br/>
    {% show_pages %}
{% endblock %} 
```

根.html：

```
<div class="content">
    {% block content %}{% endblock %}
</div> 
```

如果我取消注释`{% extends "root.html" %}`index.html 中的行，它会起作用。否则我会收到以下错误：

```
Error during template rendering

In template /Users/tuk/Desktop/endlesstest/templates/index.html, error at line 10
Cannot find endless page in context.

1   {% extends "root.html" %}
2   
3   {% load endless %}
4   
5   {% paginate objects %}
6   {% block content %}
7       {{ objects }}
8       <br/>
9       <br/>
10      {% show_pages %}
11  {% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:11:37.737

此行仅在此模板进入块或此模板未扩展到其他块时执行

`{% load endless %}`

您是否在设置中安装该应用程序？