# StackOverflow 问答 11128000-11128999

# svn - 移动本地 SVN 存储库，但保持本地化

> ID：11128002
> 
> 赞同：1
> 
> 时间：2012-06-20T20:51:03.757
> 
> 标签：svn, version-control

我创建了一个本地 SVN 存储库（简称为`svnrep`）来学习 Subversion 方式的版本控制。我正在清理我的文件夹结构，我想移动存储库，同时将其保留在本地。我只有一个项目（简单地说，命名为`project1`），并且已签出。

我想 1) 删除已签出的版本`project1`；2）删除`project1`里面`svnrep`；3)`svnrep`从一个目录移动到另一个目录。

通过在 Stack Overflow 和其他地方进行搜索，我得知我将使用`svn export`and `svnadmin dump`，但是如果没有与我的情况相匹配的明确说明，我会很紧张。我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:53:49.607

如果是本地的，则无需：

1.  将 repo 移动到所需位置（只需移动目录，不需要花哨的东西）
2.  使用 将您的结帐点指向该位置`svn switch --relocate oldpath TO newpath`。

# math - SAD和SSD的区别

> ID：11128003
> 
> 赞同：4
> 
> 时间：2012-06-20T20:51:07.623
> 
> 标签：math, image-processing, motion-detection

谁能告诉我，SAD 和 SDD 有什么区别？我说的是绝对差之和和平方差之和。

就在 SSD 中，您可以测量正方形的差异吗？我可以只使用度量的绝对值，而不是提高到二次方。

正方形有什么用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:57:52.337

Square 通常用于强烈区分大的差异。如果你有一些相当大的错误（差异）并且你将它平方，结果会更大。因此，基于平方值的优化方法将首先“尝试”去除最大的差异（异常值）。

众所周知，在高斯分布的情况下，平方方法更好，在噪声（干扰）的拉普拉斯分布情况下，绝对方法更好。

# html - 与 HTML5 画布的 JQuery 模态对话无法正确聚焦

> ID：11128012
> 
> 赞同：0
> 
> 时间：2012-06-20T20:51:48.180
> 
> 标签：html, jquery-ui, canvas, modal-dialog, html5-canvas

我有一个（复杂的）HTML5 应用程序，它由多个画布组成，我需要在上面弹出奇怪的 JQuery 模式对话框。

JQuery 模态对话似乎不能正确拦截-any- 鼠标事件（例如，在表单上的字段之间移动或单击按钮）。可以在字段之间切换，否则对话会正常运行。

跨多个浏览器的行为是相同的。

我搜索了高低，但找不到任何关于使用带有画布/多个画布和/或鼠标事件拦截相关问题的 JQuery UI 的具体指导。任何指点都感激不尽。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:54:59.137

您可以尝试`pointer-events: none;`在画布上设置。这将允许他们忽略鼠标事件并正确地冒泡到您的对话框。

# perl - 在 Apache httpd-2.4.2 上安装 mod_perl-2.0.7

> ID：11128015
> 
> 赞同：6
> 
> 时间：2012-06-20T20:51:54.843
> 
> 标签：perl, apache, apache2, mod-perl, mod-perl2

我正在尝试使用 perl 安装 apache，这让我很生气。我正在按照 mod_perl 站点上的说明进行操作：http: [//perl.apache.org/docs/2.0/user/install/install.html](http://perl.apache.org/docs/2.0/user/install/install.html)

我得到了它要求我运行这个命令的部分，但是我得到了一个错误：

```
$ perl Makefile.PL MP_APXS=/usr/local/httpd/prefork/bin/apxs
Reading Makefile.PL args from @ARGV
   MP_APXS = /usr/local/httpd/prefork/bin/apxs
no conflicting prior mod_perl version found - good.
Configuring Apache/2.4.2 mod_perl/2.0.7 Perl/v5.12.3
[  error] Can't find apr include/ directory,
[  error] use MP_APR_CONFIG=/path/to/apr-config 
```

我运行了他们建议的安装 apache 的命令来安装我的 apache：

```
 $ ./configure --prefix=$HOME/httpd/prefork --with-mpm=prefork
  $ make && make install 
```

但我不确定这个 apr-config 应该在哪里，因为它似乎不在我的 apache2 文件夹中的任何位置。

如果这可能是一个问题，我使用的是 Mac OS X 10.7.3。我知道 Mac OS X 附带 apache 服务器，但我需要从头开始在另一台计算机上进行此安装，所以我必须在我的计算机上从头开始整个安装。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T23:17:42.923

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T12:38:47.010

您需要包含二进制可执行文件 apr-1-config 的路径。运行以下命令

```
perl Makefile.PL MP_APXS=/usr/local/apache2/bin/apxs MP_APR_CONFIG=/usr/local/apr/bin/apr-1-config 
```

它对我有用..希望你也一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T21:50:52.077

在 Lion 上，我的 APR 包含目录似乎是 /usr/include/apr-1，但它已经与 mod_perl 一起提供。

```
$ find / -name apr*
/usr/include/apr-1
...

$ find / -name mod_perl.so
/usr/libexec/apache2/mod_perl.so 
```

如果你已经有了 .so，你应该可以在你的配置文件中添加：

```
LoadModule perl_module libexec/apache2/mod_perl.so 
```

# c++ - 命名嵌套类时无法解析 Lambda 中的名称

> ID：11128020
> 
> 赞同：3
> 
> 时间：2012-06-20T20:52:12.137
> 
> 标签：c++, visual-studio-2010, lambda, c++11

我正在使用 MSVC10。

我有一个`C`嵌套在 class 中的类`B`，而后者又嵌套在 class 中`A`。 有一个类型为`B`的成员变量`C`，并且`A`有一个s。像这样：`vector``B`

```
class A
{
  class B
  {
    string foo_;
    class C
    {
      string bar_;
    } c_;
  };
  vector<B> b_;
}; 
```

在`A`我有一个`for_each`与 lambda 一起使用的成员函数，用于遍历`vector<B>`.

在那个 lambda 中，我尝试获取对`B`和的引用`C`（分别）：

```
void A::Run()
{
    for_each(b_.begin(), b_.end(), [](std::vector<B>::value_type& that)
    {
        const B& b = that;
        cout << b.foo_;
        const B::C& c = b.c_;   //  'B' : is not a class or namespace name
        // const A::B::C& c = b.c_; <-- THIS COMPILES
        cout << c.bar_;
    });
} 
```

代码：`const B::C& c = b.c_;`导致编译器错误，“'B'：不是类或命名空间名称” *，即使*编译器接受没有问题`const B& b = that;`

语言是否允许这种语法？

如果我将其更改为： `const A::B::C& c = b.c_;`编译器接受它。

这是一个完整的示例供您使用：

```
#include <string>
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

void foo() {}

class A
{
public: 
    void Run();

    struct B
    {
        std::string foo_;
        struct C
        {
            std::string bar_;
        } c_;
    };

    std::vector<B> b_;
};

void A::Run()
{
    for_each(b_.begin(), b_.end(), [](std::vector<B>::value_type& that)
    {
        const B& b = that;
        cout << b.foo_;
        const B::C& c = b.c_;   //  'B' : is not a class or namespace name
        // const A::B::C& c = b.c_; <-- THIS COMPILES
        cout << c.bar_;
    });
}

int main()
{
    A a;
    a.Run();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:30:31.413

这是编译器中的一个错误。该代码可以使用 MSVC 2012 RC 正常编译。我相信相关的错误是[这个](http://connect.microsoft.com/VisualStudio/feedback/details/736295/incorrect-name-lookup-in-a-lambda-expression-defined-inside-a-class-member-function)。

标准的相关部分是 [expr.prim.lambda] 5.1.2 第 7 条：

> lambda 表达式的复合语句产生函数调用运算符的函数体 (8.4)，但**出于名称查找** (3.4) 的目的，确定 this (9.3.2) 的类型和值并转换 id 表达式使用 (*this) (9.3.1) 将非静态类成员转换为类成员访问表达式，**复合语句**在 lambda 表达式的上下文中被考虑。

# php - 使用 jQuery 和 PHP 填充选择

> ID：11128027
> 
> 赞同：1
> 
> 时间：2012-06-20T20:52:45.333
> 
> 标签：php, jquery, mysql, ajax, drop-down-menu

我有一张包含物种分类名称的表格。So there are separate columns for each species, domain, kingdom, phylum, etc. I am using a select boxes for each of these classifications, and what I need to happen is when the first one (Domain) is selected, the database is queried获取所有域是前一个选择的值的王国。

这是我在“search.php”中的 PHP 内容：

```
<select name="domain" id="domain">
<option value="standard">-- Domain --</option>
<?php while($row = mysql_fetch_array($get_domains, MYSQL_NUM))
{
  echo "<option value='$row[0]'>$row[0]</option>";
} ?>
</select>

<select name="kingdom" id="kingdom" >
<option value="standard">-- Kingdom --</option>
<?php 
        $result = array();
    $domain = $_POST['domain'];
    $get_kingdoms = mysql_query("SELECT DISTINCT sci_kingdom FROM tbl_lifedata WHERE sci_domain = $domain");
    while($row = mysql_fetch_array($get_kingdoms, MYSQL_NUM))
    {
         $result[] = array(
             'name' => $row[0]
         );
    }
    echo json_encode($result);
?>
</select> 
```

这就是我的 jquery 中的内容：

```
$('#domain').change(function() {
    $domain = $('#domain option:selected').val();

    if ($domain == 'standard') {
        $('#kingdom').attr('disabled', 'disabled');
        $('.btn-cover').text('Select a Domain:');
    } else {
        $('#kingdom').removeAttr('disabled', 'disabled');
        $('.btn-cover').text('Select a Kingdom:');
    }
});

$('#kingdom').change(function() {
    $kingdom = $('#kingdom option:selected').val();

    if ($kingdom == 'standard') {
        $('#domain').removeAttr('disabled', 'disabled');
        $('#phylum').attr('disabled', 'disabled');
        $('.btn-cover').text('Select a Kingdom:');

    } else {
        $('#domain').attr('disabled', 'disabled');
        $('#phylum').removeAttr('disabled', 'disabled');
        $('.btn-cover').text('Select a Phylum:');
        $.post("search.php", {
            'domain': option
        }, function(data) {
            var sel = $("#kingdom");
            sel.empty();
            for (var i = 0; i < data.length; i++) {
                sel.append('<option>' + data[i].name + '</option>');
            }
        }, "json");
    }
});​ 
```

我很难理解 .post() 函数的工作原理。我确切地知道我想做什么，只是不知道该怎么做。

我的目标： - 获取更改时域选择框的值 - 在 mysql 查询中使用该值来获取相关王国 - 使用 jquery 执行查询，然后填充王国选择框

谢谢！

# regex - 用正则表达式组匹配摆脱括号

> ID：11128028
> 
> 赞同：2
> 
> 时间：2012-06-20T20:52:47.657
> 
> 标签：regex, splunk

我正在尝试使用 splunk 分析日志，我需要解析如下所示的行：

```
2012-06-20 20:35:13,980 INFO  [http-bio-8080-exec-72] (b50f3a81-f9e0-4ebf-b9e2-b007c8dd4cbf) interceptor.CustomLoggingOutInterceptor (AbstractLoggingInterceptor.java:149)     - Outbound Message 
```

我有这个匹配的正则表达式：

```
(?i)^[^\]]*\]\s+(?P<FIELDNAME>[^ ]+) 
```

这部分 ：

```
2012-06-20 20:35:13,980 INFO  [http-bio-8080-exec-72] (b50f3a81-f9e0-4ebf-b9e2-b007c8dd4cbf) 
```

使用组我可以提取我需要的真实信息，即：

```
(b50f3a81-f9e0-4ebf-b9e2-b007c8dd4cbf) 
```

唯一的问题是我不需要括号，我已经尝试过一些负面的前瞻/后视谷歌搜索，不太了解正则表达式。

所以我的最终目标是捕获`b50f3a81-f9e0-4ebf-b9e2-b007c8dd4cbf`. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:56:51.723

`(?i)^[^\]]*\]\s+\((?P<FIELDNAME>[^ ]+)\)`

这匹配并丢弃了`()`第 1 组。

[在这里玩正则表达式](http://regexr.com?31aiu)。

# jquery - jQuery 'click' 的行为类似于双击

> ID：11128030
> 
> 赞同：2
> 
> 时间：2012-06-20T20:52:55.013
> 
> 标签：jquery, css

目标：单击即可为 div 设置动画，而不仅仅是页面的初始加载。

问题：当我加载页面时，它的行为就像我想要的那样，但是当我再次尝试单击该元素时，它将不起作用——除非我两次单击该元素。有任何想法吗？

[http://jsfiddle.net/V5LBk/10/](http://jsfiddle.net/V5LBk/10/)

**jQuery**

```
$(document).ready(function() {
    $('h1.slide1').live('click', function() {
        $("div#slidebox1").animate({
            top: -129
        }, 300);
        $("div#slidebox2").animate({
            top: 115
        }, 300);
        $("div#slidebox3").animate({
            top: 115
        }, 300);
        $(this).removeClass("slide1").addClass("selected");
    });
    $("h1.selected").live('click', function() {
        $("div#slidebox1").animate({
            top: 115
        }, 300);
        $(this).removeClass("selected").addClass("slide1");
    });
    $('h1.slide2').live('click', function() {
        $("div#slidebox2").animate({
            top: -129
        }, 300);
        $("div#slidebox1").animate({
            top: 115
        }, 300);
        $("div#slidebox3").animate({
            top: 115
        }, 300);
        $(this).removeClass("slide2").addClass("selected2");
    });
});​ 
```

**CSS**

```
#slidebox h1{ 
    font-size:12px; 
    height:30px; 
    color:#212121; 
    font-weight:bold; 
    z-index:11; 
    cursor:pointer; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:27:43.057

我用`.click()`而不是，`.live('click'..`事情奏效了。

[http://jsfiddle.net/eKYxC/](http://jsfiddle.net/eKYxC/)

# objective-c - 部署到设备导致科学怪人二进制

> ID：11128033
> 
> 赞同：1
> 
> 时间：2012-06-20T20:53:10.353
> 
> 标签：objective-c, ios, xcode

我不确定这是否与我的问题有关，但我将从头开始：在我的项目中，我有一个视图控制器，它由类名动态实例化，如下所示：

```
NSString* className;

...className is set to a valid class name, e.g. "someViewController"

Class c = NSClassFromString( className );
UIViewController* vc = [[c alloc] init]; 
```

在当前构建的项目中，`someViewController`只是一个专门的 UIViewController。但是，在项目的**旧**版本（之前部署到我的设备上）中，视图控制器类型`someViewController`是专门的`UITableViewController`.

今天早上我花了很多时间试图理解为什么当我在设备上运行构建（从 XCode 部署）时，它会因奇怪的调用堆栈和控制台消息而崩溃：

```
[someViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0xeb62a0 
```

经过大量实验，我发现如果我`someViewController`用任何其他视图控制器换掉，我就无法重现这个问题。如果我重命名`someViewController`为`someViewController2`我无法重现问题。问题在于符号名称`someViewController`。然后我突然意识到`someViewController` **曾经**是一个`UITableViewController`并且会`tableView:numberOfRowsInSection:`实施的。

在任何情况下; 从设备上删除应用程序并让 XCode 部署一个干净的副本解决了这个问题。

我想知道的是，为什么？如何？我想我已经有一段时间知道 XCode 在部署时会做一些时髦的事情——在从项目中删除旧资源之后，我曾遇到过问题。但我没想到 Objective-C 类型会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:10:41.793

简单地重命名 .h 和 .m 文件，然后引入具有相同名称的新 .h 和 .m 会导致问题。不是对xcode，而是对你。最好的方法是将文件复制到 /tmp 之类的目录，从项目中删除它们，然后将它们作为新的名称添加到项目中。

# c# - 保险协议标准。有人处理过这个烂摊子吗？

> ID：11128043
> 
> 赞同：12
> 
> 时间：2012-06-20T20:53:51.707
> 
> 标签：c#, wcf, xsd

[我们需要使用ACORD 标准](http://www.acord.org/standards/downloads/Pages/PCSSpecsPublic.aspx)来实现 WCF Web服务。

但是，我不知道从哪里开始，因为这个标准非常庞大且非常复杂。我眼前一片混乱。

我正在尝试使用 WSCF.Blue 从我拥有的多个 XSD 中提取类，但到目前为止，我得到的只是一堆废话：一个包含 50,000 多行代码的 .cs 文件，它一直冻结我的 VS2010。

有没有人已经走过死亡之谷（ACORD 标准）并成功了？我真的很感激一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:42:29.873

我写了一个 ACORD 到 c# 类库的转换器，然后用于几个大型商业保险产品。它的特点是将所有 ACORD XML 映射为简洁、可扩展的 C# 类。所以我知道你从哪里来！

一旦你深入研究它，它并没有那么糟糕，但我认为，如果他们全职工作，平均编码员将不会“得到它”大约 3-4 个月（假设除了查询式消息之外的任何内容）。真正的问题出现在尝试从后端数据库和到/从另一个 ACORD WS 进行映射时。所有的运营商、供应商和代理机构都有自定义规则。

我最好的建议是找到有效的代码示例（如果你需要的话，我有很多），甚至可能是让你在测试环境中连接到 ACORD ws 的供应商或运营商。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T20:44:54.223

听起来您正朝着正确的方向前进，但却迷失在森林中。
ACORD 标准非常庞大且有意如此，因为它为数百种不同的消息提供支持。就像您不需要下载所有 Wikipedia 来获取几篇文章一样，您也不需要 ACORD 标准中的所有类来支持几条消息的实现。如果您知道需要支持哪些消息，那么您可以生成一个完整 XSD 的子集，该子集将非常易于管理。

正如 Hugh 的回复中所提到的，对于任何一条消息，只使用了完整 XSD 的一小部分。你如何去做这将取决于你的项目的细节。如果您正在寻找有关如何生成完整 XSD 子集的想法，请尝试通过[PCS@acord.org 联系](http://acord.org/about/contacts/Pages/Inquiries.aspx)ACORD 员工寻求帮助。他们应该能够为您提供一些入门帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-14T14:57:13.843

[如果您希望使用 .NET 读/写 ACORD 文档，我刚刚在http://ivc.codeplex.com](http://ivc.codeplex.com)上的 CodePlex 上偶然发现了“用于 ACORD 标准的 IVC 软件工厂” 。

从有限的文档看来，这个库似乎可以将对象转换为 ACORD XML 文档，反之亦然。源代码带有不同的“提供者”，即不同的 ACORD 事务类型，如 103 或 121。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T07:03:45.203

我曾使用 Accord PCS 暴露报告标准，是的，这是一场噩梦。我还使用过其他大型标准，例如 FPML 和 SportsML。

您需要从模式中准确确定需要哪些类型。你如何做到这一点取决于你，但 VS 模式查看器应该能够处理它。如果不尝试 XmlSpy 或者如果必须手动通过它。确保你有一个好的学士学位...

您可能会发现使用标准中可用类型的大约 1% 即可满足您的要求。

您可能会发现，您可以使用非常少的一组值来表达核心对象，因为大多数节点将是`minOccurs=0`or `nillable`。

然后，您可以使用 xsd.exe 上的 /element 开关为您需要的类型生成代码。

正如一位评论者所说，这里没有容易吞下的药丸。具有讽刺意味的是，标准应该让每个人的生活更轻松。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-24T20:22:50.520

我建议不要为整个标准创建模型。可以只传递 XML 而不是序列化到模型中，而是将其加载到 XDocument/XElement 中并使用 Linq 查询它并使用 Linq 将 DOM 更新为 Xml。因此，不是将 XML 加载到强类型模型，而只是加载 XML。没有模型，只有一个 XML 文档。

从那里，可以根据需要从 XML 中挑选数据。

使用这种方法，代码会很丑陋并且几乎没有上下文，因为 XElements 将被传递到任何地方，并且会有大量的 XPaths 魔术字符串来查询和定义元素，但它可以工作。此外，一切都是字符串，因此将有实用的转换方法来转换为数字、日期时间等。

从我的角度来看，我已经使用 XmlSerializer 将 Acord 的一部分建模成一个对象模型，但它有超过 500 个类。该模型不是通过 XSD 或其他工具制作的，而是手动制作并花费了一些时间。工具将产生无法使用的怪物类（如您所提到的）和/或完全崩溃。例如，我尝试将 XSD 加载到 Stylus Studio 中，但它崩溃了好几次。

因此，如果您时间紧迫，最好的选择是加载到 XDocument 中，而不是尝试绘制模型中的所有内容。我知道这很糟糕，但总的来说，雅阁基本上是一个巨大的数据热点。

# java - 如何让三角函数代码更高效

> ID：11128054
> 
> 赞同：4
> 
> 时间：2012-06-20T20:55:04.443
> 
> 标签：java, c++, pascal, trigonometry

我需要帮助以使下面的代码更高效，并对其进行一些清理。

如图所示， [**x**](http://i.imgur.com/BZmCb.png)和 y 可以是整个屏幕周围的任何点，我正在尝试找到角度 t。有没有办法可以减少这里的行数？

注：原点在左上角，向右/向下移动是正向移动

```
o := MiddleOfScreenX - x;
a := MiddleOfScreenY - y;

t := Abs(Degrees(ArcTan(o / a)));

if(x > MiddleOfScreenX)then
  begin
    if(y > MiddleOfScreenY)then
      t := 180 + t
    else
      t := 360 - t;
  end
else
  if(y > MiddleOfScreenY)then
    t := 180 - t; 
```

代码是帕斯卡，但用其他类似语法或 c++ 或 java 的语言的答案也很好。

```
:= sets the variable to that value
Abs() result is the absolute of that value (removes negatives)
Degrees() converts from radians to degrees
ArcTan() returns the inverse tan 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T21:19:15.407

有关 C 函数，请参阅此[http://www.cplusplus.com/reference/clibrary/cmath/atan2/](http://www.cplusplus.com/reference/clibrary/cmath/atan2/)。

atan2 采用 2 个单独的参数，因此可以确定象限。

pascal 可能有 arctan2 参见[http://www.freepascal.org/docs-html/rtl/math/arctan2.html](http://www.freepascal.org/docs-html/rtl/math/arctan2.html)或[http://www.gnu-pascal.de/gpc/Run-Time-System.html](http://www.gnu-pascal.de/gpc/Run-Time-System.html)

```
o := MiddleOfScreenX - x;
a := MiddleOfScreenY - y;

t := Degrees(ArcTan2(o, a)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T21:28:00.073

代码行数不一定是您需要考虑的唯一优化。就单个函数完成其计算所需的时间而言，三角函数的成本很高（即：单个 cos() 调用可能需要数百次加法和乘法，具体取决于实现）。

对于信号处理中常用的函数离散傅里叶变换，数千次 cos() 和 sin() 计算的结果被预先计算并存储在海量查找表中。权衡是在运行应用程序时使用更多内存，但运行速度要快得多。

请看下面的文章，或者搜索“预先计算的旋转因子”的重要性，这本质上意味着预先计算出大量的复指数。

将来，您还应该提及您正在尝试优化的内容（即：使用的 CPU 周期、使用的内存字节数、成本等）。我只能假设您的意思是在执行的指令方面进行优化，并且通过扩展，使用的 CPU 周期数（即：您想减少 CPU 开销）。

[http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.34.9421&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.34.9421&rep=rep1&type=pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T21:30:39.423

您应该只需要一项测试来确定如何处理 arctan .. 您现有的测试恢复了被破坏的信息`Abs()`。

`atan()`通常在 -pi/4 到 pi/4 的范围内返回。你的坐标系有点奇怪——顺时针旋转 90 度以获得“标准”坐标系，尽管你取`atan`的`x/y`是`y/x`. 我已经很难在脑海中解决这个问题了。

无论如何，我相信你的测试只需要是如果你是负数`a`，增加 180 度。如果你想避免负角；如果它是负数，则添加 360 度。

# python - 通过在骑行过程中发生变化的 dict 产生

> ID：11128062
> 
> 赞同：2
> 
> 时间：2012-06-20T20:55:40.387
> 
> 标签：python, dictionary, yield, next, coroutine

我正在使用 Python 和 Panda3D 框架，并且已经在我们的[论坛](http://www.panda3d.org/forums/viewtopic.php?t=13452)上提出了这个问题，但是我想我会在更一般的 Python 社区中提问。假设在游戏中我有一个船列表，这里表示为带有 id:string 对的字典。使用制表键可以循环浏览该字典，使用 a 键将向字典添加一个键：值对。在播放过程中，dict 不仅会获得 key:value 对，还会丢失一些，并且必须在扫描前对 dict 进行过滤。

我到目前为止的代码是：

```
from itertools import cycle, ifilter, ifilterfalse

class GeneratorTest(DirectObject):
   def __init__(self):

      self.ships = {1:"node1", 2:"node2", 3:"node3", 4:"node4", 5:"node5", 6:"node6", 7:"node7"}
      self.ships_iscannable = cycle(ifilter(self.filter_ships, self.ships))

      self.accept("tab", self.do_filtered_scan)
      self.accept("a", self.add_ship)

   def filter_ships(self, n):
      scannable = [i for i in self.ships if i != 3]
      if n in scannable:
         return True

   def do_filtered_scan(self):
      print self.ships_iscannable.next()

   def add_ship(self):
      plus_i = sorted(self.ships, reverse=True)[-1] + 1
      self.ships[plus_i] = "node%s" % plus_i
      print plus_i, self.ships

gt = GeneratorTest()      

run() 
```

更糟糕的是，我需要一个 Python 2.5 版本和一个 2.6 版本。后者获得了 .next() 方法，因此 2.5 版本不得不这样做。

任何人都可以帮助我（1）*简化* `next` *两个 Python 版本之间的*使用和（2）*在添加和删除船舶方面改进代码*吗？

# java-2d - 测试两个字母可以有多接近（2D）

> ID：11128064
> 
> 赞同：0
> 
> 时间：2012-06-20T20:56:17.907
> 
> 标签：java-2d

我正在做一个小型设计项目，其中一部分涉及以给定字体写出文本，以使单词的字母在其左右两侧相互接触。

我想按如下方式实现 - 创建两个字母的 GlyphVectors，使用 vector.getOutline() 创建 Shape 对象，然后创建 Area 对象并将它们相交。

这种方法唯一缺少的是将第二个字母向右移动直到相交为空的能力。

有没有办法做到这一点，还是我需要使用不同的方法？

TIA

eta：好的，我发现我可以使用 AffineTransform。现在，有没有办法告诉由两个字母相交创建的区域的大小（表面积）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:03:10.280

你希望它有多精确？像素精度比矢量精度更容易获得。您是否考虑过线性化（通常通过

```
public PathIterator getPathIterator(AffineTransform at, double flatness) 
```

) 的轮廓，然后在所有点之间进行相反方向的搜索？这似乎是最明显的解决方案，即使它不是矢量精确的。

# python - 无法在 scipy 中导入最小化

> ID：11128070
> 
> 赞同：4
> 
> 时间：2012-06-20T20:56:40.867
> 
> 标签：python, optimization, scipy, minimize

我正在使用 scipy 尝试测试 Nelder-Mead 单纯形算法。我完全按照此处显示的示例代码：http: [//docs.scipy.org/doc/scipy/reference/tutorial/optimize.html](http://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html)

此行会导致错误：

> 从 scipy.optimize 导入最小化

它说它不能导入名称最小化。我进口的东西有错吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T21:16:27.717

你需要 Scipy 版本 0.11.0，第一个测试版是前一段时间发布的。

如果你没有它，你应该阅读你拥有的 scipy 版本的教程，例如： [http ://docs.scipy.org/doc/scipy-0.10.1/reference/tutorial/optimize.html](http://docs.scipy.org/doc/scipy-0.10.1/reference/tutorial/optimize.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:45:40.133

在基于 Debian 的系统上：

```
$ apt-get show python-scipy 
```

或者

```
$ apt-get show python3-scipy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T18:20:28.517

作为光伏。指出，您需要安装更高版本的 scipy（和 numpy 开始）。

请按照此处给出的步骤操作：

[http://cwl.cx/posts/building-scipy-on-ubuntu-1204.html](http://cwl.cx/posts/building-scipy-on-ubuntu-1204.html)

但是，不要从 numpy 和 scipy 获取最新的 git 存储库，而是从 sourceforge 获取稳定版本。这样您就可以使用稳定的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-21T09:03:24.707

如果你使用**0.18.1**可以这样写：

```
from scipy.optimize import minimize 
```

# macros - 在记事本++中插入一行的宏

> ID：11128073
> 
> 赞同：0
> 
> 时间：2012-06-20T20:56:55.970
> 
> 标签：macros, notepad++

我正在尝试在 Notepad++ 中创建一个用两行替换一行的宏。
例如，这一行：

```
M30 
```

应该转换成这样：

```
G91G30X0Y0
M30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:40:02.787

点击搜索模式为扩展

使用查找替换

将 M30 替换为

G91G30X0Y0\nM30

如果要录制宏，也可以为此操作完成

# php - 如何从字符串中创建条件语句

> ID：11128074
> 
> 赞同：2
> 
> 时间：2012-06-20T20:56:57.810
> 
> 标签：php, string, variables, conditional

这可能吗？这个想法是有以下几点：

```
if ($some_statement) { ... } 
```

其中 $some_statement 变量是一个字符串，如下所示：

```
$some_statement = ' $day == "Monday" && $weather == "sunny" '; 
```

我已经用大括号和 eval 函数做了一些实验，但没有任何工作。谢谢大家，你摇滚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:00:41.553

您可以使用[`eval`](http://php.net/manual/en/function.eval.php)它，但请记住，字符串中的语句必须是完整的 PHP 语句。

```
$condition = 'return $day == "Monday" || $day == "Sunday";';
if (eval($condition)) { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:03:42.533

```
If (eval($some_statement)) { 
```

应该管用。

**但是，**除非您知道自己在做什么，否则不要这样做，从您的问题来看，您不知道。

评估字符串中的代码非常危险，并且很容易造成严重的安全漏洞。

# iphone - Core Plot ios 将散点图从普通的直线动画到实际数据的绘图

> ID：11128075
> 
> 赞同：1
> 
> 时间：2012-06-20T20:56:57.623
> 
> 标签：iphone, ios, animation, core-plot, scatter-plot

我一直在为我的 iPhone 应用程序使用 Core Plot，并且一直在显示散点图。我想知道在视图出现时，是否有任何方法让散点图从一条水平线开始，所有 y 值都相同，然后有某种 0.5 秒，例如缓慢移动的动画数据点向上或向下到其适当的位置？*或者，更一般地说，如果散点图可以使用核心图以任何方式动画？*谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:44:54.907

目前没有这样的内置功能。每个图都是自己绘制的`CALayer`，可以像任何其他图层一样进行动画处理。例如，您可以将其滑入到位或淡入视野。

# multithreading - 使用静态 C++ 库的 Windows 8 WinRT 应用程序为 vccorlibd 定义了多个符号

> ID：11128076
> 
> 赞同：2
> 
> 时间：2012-06-20T20:57:14.987
> 
> 标签：multithreading, windows-8, windows-runtime, c++-cx

我有一个适用于 Windows 8 的 WinRT 应用程序，其中包含多个 C++ 静态库和一个 WinRT 本机静态 C++ 库。它没有链接，因为它抱怨与线程模型库相关的多重定义符号：

```
vccorlibd.lib(tmmta.obj) : error LNK2005: "int __abi___threading_model" (?__abi___threading_model@@3HA) already defined in vccorlibd.lib(tmdefault.obj)
fatal error LNK1169: one or more multiply defined symbols found 
```

请注意，它正在尝试将 MTA 线程模型库 (tmmta) 与默认的线程模型库 (tmdefault) 链接。

我在项目属性中找不到任何设置来更改它。我发现最接近的是 CLR 线程属性，但更改此设置无效。我不知道我的解决方案中的哪个子项目正在使用哪个线程模型。

如何以及在哪里可以查看和更改线程模型设置？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:45:23.030

这是关于您的问题的答案。我有同样的问题 ：）

[http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/f57406a6-3892-4981-86da-135862cf4b41?prof=required](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/f57406a6-3892-4981-86da-135862cf4b41?prof=required)

**编辑：**

这可能是因为您在 WinRT 静态库中定义了`main()`函数或/和定义`[Platform::MTAThread]`（女巫创建 MTA 符号）。现在可执行代码不知道应该如何初始化，因为可执行代码对您的声明一无所知。

您可以将该`main()`函数移动到您的可执行项目中，或者（在我的情况下是女巫）确保将 #include 标头添加到您声明主函数的对象，然后链接器可以看到它并且不会重复符号。

# android - Android 计算位图的哈希值

> ID：11128078
> 
> 赞同：6
> 
> 时间：2012-06-20T20:57:21.143
> 
> 标签：android, hash, bitmap

我想计算不同位图的 SHA1 哈希（不强制使用 SHA）。问题是有些位图（验证码）基本相同，但名称经常更改。

我发现了这个：

[在 Android/Java 和 C# 中计算 SHA256 哈希](https://stackoverflow.com/questions/9661008/compute-sha256-hash-in-android-java-and-c-sharp)

但这不是我想要的解决方案。

Bitmap.hashCode()，只生成一个 Integer，当我正确时

> 返回此对象的整数哈希代码。根据约定，equals(Object) 返回 true 的任何两个对象都必须返回相同的哈希码值。这意味着 Object 的子类通常会覆盖这两种方法或都不覆盖任何方法。

我不想要对象的哈希码，我想要位图内容的哈希码。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T21:49:15.447

在 Android 3.1 或更高版本（API 级别 12）中，`Bitmap`调用了一个方法，`sameAs()`该方法将比较像素并返回两者是否代表相同的图像。它在本机代码中执行此操作，因此速度相对较快。

如果您必须以较低的 API 级别为目标，则必须编写一个方法来迭代两个对象的每个像素并查看它们是否匹配。如果在 Java 代码中完成，这将是一个非常密集的过程，因此您可以考虑使用 NDK 编写一个小例程，您可以从应用程序调用该例程以在本机代码中进行比较（NDK 中有位图 API，因此您可以轻松获取像素缓冲区）。

如果您选择在 Java 中这样做，`getPixels()`它将帮助您获取可以在两个图像之间进行比较的像素数据数组。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-09T18:49:01.597

这是计算位图哈希的更本地方法，使用`Arrays.hashCode`, 和`bitmap.getPixels`

```
int hash(Bitmap bitmap){
   int[] buffer = new int[bitmap.getWidth(), bitmap.getHeight()];
   bitmap.getPixels(buffer, 0, 0, 0, 0, bitmap.getWidth(), bitmap.getHeight());
   return Arrays.hashCode(buffer);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-03T10:17:18.140

迄今为止我在 kotlin 中找到的最快的解决方案：

```
fun Bitmap.hash(): Int {
    val buffer: ByteBuffer = ByteBuffer.allocate(this.height * this.rowBytes)
    this.copyPixelsToBuffer(buffer)
    return buffer.hashCode()
} 
```

比公认的答案快近 100 倍

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T21:50:57.683

您可以尝试仅使用位图中的像素来编写自己的函数：

```
public long hashBitmap(Bitmap bmp){
  long hash = 31 //or a higher prime at your choice
  for(int x = 0; x < bmp.getWidth(); x++){
    for (int y = 0; y < bmp.getHeight(); y++){
      hash *= (bmp.getPixel(x,y) + 31);
    }
  }
  return hash;
} 
```

如果只是比较两个图像，您可以优化此例程以每秒或 x 像素散列一次

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-24T10:17:58.613

类似的问题，这对我有用（解决了为特定位图获取新名称的问题，因此我可以检查它是否已经存储）：

```
fun getUniqueBitmapFileName(bitmap: Bitmap): String {
    val buffer = ByteBuffer.allocate(bitmap.getByteCount())
    bitmap.copyPixelsToBuffer(buffer)
    return Arrays.hashCode(buffer.array()).toString()
} 
```

# algorithm - 简单的流行度算法

> ID：11128086
> 
> 赞同：22
> 
> 时间：2012-06-20T20:57:53.987
> 
> 标签：algorithm, popularity

## 概括

[正如 Ted Jaspers 明智地指出的那样，我在 2012 年最初提案中描述的方法实际上是指数移动平均](https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average)线的一个特例。这种方法的美妙之处在于它可以递归计算，这意味着您只需为每个对象存储一个流行度值，然后您可以在事件发生时递归地调整该值。无需记录每个事件。

这个单一的流行度值代表所有过去的事件（在所使用的数据类型的限制内），但随着新事件的考虑，旧事件的重要性开始呈指数级降低。该算法将适应不同的时间尺度并响应不同的流量. 每次发生事件时，可以使用以下公式计算**新的流行度值：**

`(a * t) + ((1 - a) * p)`

*   `a`— 介于 0 和 1 之间的系数（值越高，旧事件的折扣越快）
*   `t`— 当前时间戳
*   `p`— 当前流行度值（例如存储在数据库中）

的合理值`a`将取决于您的应用程序。一个好的起点是，应该显着影响结果的事件数量`a=2/(N+1)`在哪里。`N`例如，在事件是页面浏览的低流量网站上，您可能会期望在几天内有数百次页面浏览。选择`N=100`( `a≈0.02`) 将是一个合理的选择。对于一个高流量的网站，您可能期望在几天内有数百万的页面浏览量，在这种情况下`N=1000000`( `a≈0.000002`) 会更合理。的值`a`可能需要随着时间的推移逐渐调整。

为了说明这个流行度算法是多么简单，这里有一个例子，它可以在 Craft CMS 中用 2 行 Twig 标记来实现：

```
{% set popularity = (0.02 * date().timestamp) + (0.98 * entry.popularity) %}
{% do entry.setFieldValue("popularity", popularity) %} 
```

请注意，无需创建新的数据库表或存储无休止的事件记录来计算流行度。

需要记住的一个警告是指数移动平均线有一个旋转间隔，因此需要一些递归才能认为该值是准确的。这意味着初始条件很重要。例如，如果使用当前时间戳初始化新项目的流行度，则该项目立即成为整个集合中最流行的项目，然后最终稳定到更准确的位置。如果您想推广新内容，这可能是可取的。或者，您可能希望内容从底部向上运行，在这种情况下，您可以使用应用程序首次启动时的时间戳对其进行初始化。您还可以通过使用数据库中所有流行度值的平均值初始化该值来找到一个快乐的媒介，因此它从中间开始。

* * *

## 原始提案

有很多[建议的算法](http://blog.linkibol.com/2010/05/07/how-to-build-a-popularity-algorithm-you-can-be-proud-of/)可以根据项目的年龄和项目收到的投票、点击或购买次数来计算受欢迎程度。但是，我见过的更强大的方法通常需要过于复杂的计算和多个存储值，这会使数据库变得混乱。我一直在考虑一种非常简单的算法，它不需要存储*任何*变量（除了流行度值本身）并且只需要*一个*简单的计算。这非常简单：

**`p = (p + t) / 2`**

这里，**p 是存储在数据库中的流行度值**，**t 是当前时间戳**。首次创建项目时，必须初始化**p 。**有两种可能的初始化方法：

1.  用当前时间戳**t**初始化**p**
***   用数据库中所有**p**值的平均值初始化**p****

 ****请注意，初始化方法 (1) 使最近添加的项目相对于历史项目具有明显的优势，因此添加了*相关性*元素。另一方面，初始化方法 (2) 在与历史项目相比时将新项目视为平等。

假设您使用初始化方法 (1) 并使用当前时间戳初始化**p 。**当项目收到第一次投票时，**p**成为创建时间和投票时间的平均值。因此，流行度值**p**仍然代表一个有效的时间戳（假设您四舍五入到最接近的整数），但它代表的实际时间是抽象的。

使用这种方法，只需要一个简单的计算，并且只需要将一个值存储在数据库中（**p**）。此方法还可以防止值失控，因为给定项目的流行度永远不会超过当前时间。

在 1 天内工作的算法示例：http: [//jsfiddle.net/q2UCn/](http://jsfiddle.net/q2UCn/)
在 1 年内工作的算法示例：http: [//jsfiddle.net/tWU9y/](http://jsfiddle.net/tWU9y/)

如果您希望投票以亚秒级的间隔稳定流入，那么您将需要使用微秒时间戳，例如 PHP`microtime()`函数。否则，标准 UNIX 时间戳将起作用，例如 PHP`time()`函数。

现在我的问题是：您认为这种方法有什么重大缺陷吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T21:28:00.080

我认为这是一个非常好的方法，因为它很简单。一个非常有趣的结果。

我做了一组快速的计算，发现这个算法似乎确实理解了“流行”的含义。它的问题是它明显倾向于支持最近的投票，如下所示：

想象一下，我们将时间分解为从 100 到 1000 的离散时间戳值。假设在 t=100 时，A 和 B（两个项目）具有相同的 P = 100。

```
 A gets voted 7 times on 200, 300, 400, 500, 600, 700 and 800
resulting on a final Pa(800) = 700 (aprox).

    B gets voted 4 times on 300, 500, 700 and 900 
resulting on a final Pb(900) = 712 (aprox). 
```

当 t=1000 到来时，A 和 B 都获得了选票，所以：

```
Pa(1000) = 850 with 8 votes
Pb(1000) = 856 with 5 votes 
```

为什么？因为该算法允许一个项目在获得更多最近的选票时**快速**击败历史领先者（即使该项目的总票数较少）。

**编辑包括模拟**

OP 创建了一个不错的小提琴，我对其进行了更改以获得以下结果：

[http://jsfiddle.net/wBV2c/6/](http://jsfiddle.net/wBV2c/6/)

```
Item A receives one vote each day from 1970 till 2012 (15339 votes)
Item B receives one vote each month from Jan to Jul 2012 (7 votes) 
```

`The result: B is more popular than A.`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-03T10:47:58.207

[所提出的算法是一种很好的方法，并且是指数移动平均线](https://en.wikipedia.org/wiki/Moving_average)的一个特例，其中 alpha=0.5：

```
p = alpha*p + (1-alpha)*t = 0.5*p + 0.5*t = (p+t)/2    //(for alpha = 0.5)
```

调整 alpha=0.5 的建议解决方案倾向于支持最近的投票（如 daniloquio 所述）这一事实的一种方法是为 alpha 选择更高的值（例如 0.9 或 0.99）。请注意，将其应用于 daniloquio 提出的测试用例是**行不通**的，因为当 alpha 增加时，算法需要更多的“时间”来解决（因此数组应该更长，这在实际应用中通常是正确的）。

因此：

*   对于 alpha=0.9，算法取最后 10 个值的平均值
*   对于 alpha=0.99，算法取最后 100 个值的平均值
*   对于 alpha=0.999，算法取最后 1000 个值的平均值
*   等等

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T09:08:10.840

我看到一个问题，只有最后约 24 票才算数。

```
p_i+1 = (p + t) / 2 
```

我们有两票

```
p2 = (p1 + t2) / 2 = ((p0 + t1) /2 + t2 ) / 2 = p0/4 + t1/4 + t2/2 
```

将其扩展为 32 票给出：

```
p32 = t*2^-32 + t0*2^-32 + t1*2^-31 + t2*2^-30 + ... + t31*2^-1 
```

所以对于有符号的 32 位值，t0 对结果没有影响。因为 t0 除以 2^32，它对 p32 没有任何贡献。

如果我们有两个项目 A 和 B（无论差异有多大），如果它们都获得相同的 32 票，那么它们将具有相同的受欢迎程度。所以你的历史可以追溯到只有 32 票。如果最后 32 票相同，则 2032 和 32 票没有区别。

如果差值小于一天，他们将在 17 票后相等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T21:07:57.713

缺陷在于，有 100 票的东西通常比最近只有一张票的东西更有意义。然而，想出运行良好的方案变体并不难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-27T04:13:30.260

我不认为上面讨论的逻辑会起作用。p_i+1= (p_i + t) /2

文章 A 在时间戳上被查看：70、80、90 流行度（文章 A）：82.5

文章 B 在时间戳上被查看：50、60、70、80、90 流行度（文章 B）：80.625

在这种情况下，B条的受欢迎程度应该更高。首先，文章 B 的浏览次数与文章 A 一样最近，其次，文章的浏览次数也比文章 A 多。****

# c# - 透视投影

> ID：11128089
> 
> 赞同：0
> 
> 时间：2012-06-20T20:58:13.503
> 
> 标签：c#, 3d, perspectivecamera

几天前，我决定开始 3D 编程并遇到透视投影。我使用以下代码来获取矩阵：

```
public static Matrix3D ProjectionMatrix(double angle, double aspect, double near, double far)
{
    double size = near * Math.Tan(MathUtils.DegreeToRadian(angle) / 2.0);
    double left = -size, right = size, bottom = -size / aspect, top = size / aspect;
    Matrix3D m = new Matrix3D(new double[,] {
    {2*near/(right-left),0,(right + left)/(right - left),0},
    {0,2*near/(top-bottom),(top+bottom)/(top-bottom),0},
    {0,0,-(far+near)/(far-near),-(2 * far * near) / (far - near)},
    {0,0,-1,0}
    });
    return m;
} 
```

我对相机使用以下代码：

```
Matrix3D Camera
{
    get
    {
        Vector3D cameraZAxis = -this.LookDirection;
        cameraZAxis.Normalize();

        Vector3D cameraXAxis = Vector3D.CrossProduct(this.UpDirection, cameraZAxis);
        cameraXAxis.Normalize();

        Vector3D cameraYAxis = Vector3D.CrossProduct(cameraZAxis, cameraXAxis);

        Vector3D cameraPosition = (Vector3D)this.Position;
        double offsetX = -Vector3D.DotProduct(cameraXAxis, cameraPosition);
        double offsetY = -Vector3D.DotProduct(cameraYAxis, cameraPosition);
        double offsetZ = -Vector3D.DotProduct(cameraZAxis, cameraPosition);

        return new Matrix3D(new double[,]{{cameraXAxis.X, cameraYAxis.X, cameraZAxis.X, 0},
                            {cameraXAxis.Y, cameraYAxis.Y, cameraZAxis.Y, 0},
                            {cameraXAxis.Z, cameraYAxis.Z, cameraZAxis.Z, 0},
                            {offsetX, offsetY, offsetZ, 1}});
    }
} 
```

但是，我不知道如何获得模型或世界矩阵，还有以前的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:04:36.357

矩阵用于将对象从一个“空间”转换为另一个。想象一个立方体模型，模型中心为 0,0,0，每个角的范围为 5。现在要将其转换为您的世界，您将应用 Worldmatrix 进行转换，将这些模型坐标放入您的世界。

例如，应该将模型“移动”到 5、5、5 的平移。现在只需考虑将此位置添加到模型及其所有点，现在这些新坐标称为“在世界空间中”。现在模型通过您的世界矩阵放置在世界中的位置 5,5,5（您以前的模型中心现在驻留在您的世界中的这个位置）。

视图矩阵有点难以理解，但最容易理解的是“我们不能移动相机，所以我们将所有对象都向相反的方向移动，所以看起来我们移动了相机”。这听起来很难，但实际上它就像从模型空间转换到世界空间一样。

现在我们从世界空间转换到视图空间。最后，我们需要把它放到屏幕上。显然你的屏幕是 2D 的，你仍然有一个 3D 场景，现在你需要一种方法来将你的 3D 对象转换到你的视图空间中。这可以通过不同类型的投影来实现。两个重要的是正交投影和透视投影。事实上，这使用了 Z 分量（我们在 2D 表面上没有它，比如屏幕）和屏幕分辨率将我们的可见世界“投影”到我们的屏幕空间中。

所有这些都可以使用矩阵轻松完成。每次转型都有一个良好的开端。公平地说，您不需要任何数据，您可以直接在屏幕空间中提供数据，但这并不实用。例如，如果您不需要 World 矩阵（如果您的模型经过建模以便可以直接使用，则会发生这种情况），您将使用 Matrix.Identity ，它可以粗略地解释为将数字乘以 1，从而为您提供相同的号码。视图的单位矩阵也就像将相机放置在世界上的 0,0,0 并向下看 Z 轴（哪个轴很大程度上取决于您使用的坐标系）

要获得着色器的最终矩阵，通常将所有这些矩阵（或通过乘法组合的矩阵）传递给着色器。如果您使用固定功能管道，通常有提供它们的方法。投影通常是固定的，但可以更改以应用一些视觉效果，例如缩放狙击步枪或鱼眼效果。相机矩阵当然是用来移动和旋转相机的。世界矩阵用于在场景中定位对象、移动玩家、旋转门等。

免责声明：这就是我自己理解整个事情的方式，所以这绝不是一个数学上的正确解释，但也许它对 OP 有任何帮助。

为了更好地理解整个主题，您可以阅读[此](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418867%28v=vs.85%29.aspx)内容。

# graph - 覆盖给定 n 元组集的最小 n 元组集

> ID：11128091
> 
> 赞同：1
> 
> 时间：2012-06-20T20:58:25.003
> 
> 标签：graph, cartesian, np

输入：n个元素的M个有序元组的集合，其中每个元素都是一个集合，即：(A1, A2, ..., An)，其中每个Ai都是一个集合

问题：将这些 n 元组组合在一起以创建*最小*的 n 元组集合。如果它们仅在一个位置不同，则可以将 2 个 n 元组组合在一起，即：

A = (A1, A2, ..., An) 和 B = (B1, B2, ..., Bn) 可以组合成 (A1, A2, ..., Ai U Bi, Ai+1, ... ., An) 当且仅当 Aj = Bj，对于每个 j != i。

示例： 输入：4 个 2 元组：({1}, {1}), ({1}, {2}), ({3}, {1}), ({3}, {2}) 输出: 一个 2 元组: ({1, 3}, {1, 2})

* * *

我的问题是：你将如何解决这个问题？你知道它是否可以简化为一个已知的 NP 问题吗？一个想法是将其建模为图形：如果元组 A 和 B 可以组合，则在它们之间用颜色 i 绘制一条彩色边（i = 它们不同的位置）。

# php - 如何计算准备好的查询中项目的频率？

> ID：11128094
> 
> 赞同：0
> 
> 时间：2012-06-20T20:58:41.837
> 
> 标签：php

我有一个准备好的查询，结果如下：

```
12
12
12
14
14
14
14
14
11
11
2
2
2 
```

我只想返回数字及其频率：

```
12 3
14 5
11 2
2  3 
```

我的代码如下：

```
 $count =0;
     while($DNB -> fetch())
      {
    //  echo "<br/>";
       $nomatch = 0;
       if($count ==0)
        {
          array_push($array, array($postalcode ,1));
          // echo $array[0][1];

        }
        else
        {
         for($i = 0; $i < count($array);$i++)
          {
           if($array[$i][0] != $postalcode)
            {
              $nomatch ++;
              if($nomatch == count($array) -1)
                {
                 array_push($array, array($postalcode ,1));
                 //echo $array[$i][1];
                 }
                 }
                 else
                 {
                  $array[$i][1]++;
                 }

                 }
                  }
                    $count = $count +1;
                 }

I am not sure what I am doing wrong. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:19:11.637

您应该使用“SELECT id, COUNT (*) FROM table GROUP BY id”作为初始 sql 查询。

# android - 在通货膨胀时设置片段类

> ID：11128096
> 
> 赞同：1
> 
> 时间：2012-06-20T20:58:50.027
> 
> 标签：android, android-fragments

我有大约 60 个片段“ `ListFragment`”，现在我将每个 Listfragment 与同一个布局文件中的另一个片段一起使用，就像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

        <fragment
            android:id="@+id/carDetailedFragment"
            android:name="com.ui.fragment.CarDetailedFragment"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

    <fragment
        android:id="@+id/carcategorylistfragment"
        android:name="com.ui.fragment.CarCategoryListFragment"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

问题是：我需要为每个片段制作 60 个布局文件还是可以制作一个包含 2 个片段的模板布局并设置它们的类

```
android:name 
```

通货膨胀时的属性，例如为 View ex 设置属性

```
setContentView(R.layout.somelayout);
View v = findViewById(R.id.src);
v.setVisibility(View.GONE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:04:41.503

是的，但您只能在 Java 代码中执行此操作。在您的 XML 中，您必须为片段提供某种容器。我相信我只是使用 FrameLayout。然后你可以做类似的事情

```
YourFragment details = new YourFragment();
getFragmentManager().beginTransaction().add(R.id.container, details).commit(); 
```

编辑：作为说明。我不相信你真的想一次更新 60 个片段并将它们保存在内存中。您需要问自己的问题是“这需要它自己的生命周期吗？” 如果答案是否定的，那么您可以创建一个自定义视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:20:26.437

我有大量的 ListView 活动布局，并且我只需要一个 ListView 片段。[使用它](https://stackoverflow.com/a/11122457/742030)——它将大大减少所需的类和冗余代码的数量。

# matlab - MatLab：设置函数参数

> ID：11128098
> 
> 赞同：0
> 
> 时间：2012-06-20T20:59:12.207
> 
> 标签：matlab, fullscreen, matlab-figure

我在互联网上找到了这行 MatLab 代码，它全屏显示图形窗口：

```
set(figure(1),'Units','Normalized','OuterPosition',[0 0 1 1]) 
```

它运行良好，我的问题与这里的任何问题无关；相反，它是关于它的一些解释。你看，我不明白代码行。任何人都可以向我解释其中的论点吗？

`figure(1)`是我的图形处理程序 - 当前图形窗口 - 我明白这一点。但是其余的论点使我感到困惑。和做什么`Units`，以及向量指定什么？`Normalized``OuterPosition``[0 0 1 1]`

我在这里找到了代码行：[source](http://www.mathworks.com/matlabcentral/newsreader/view_thread/254822)（请参阅最新答案）。

我在解密`help set`MatLab 中的命令提供的帮助信息时遇到了很大的麻烦。MathWorks 网站并没有更好，也没有我能找到的示例。
有没有人有一些解释或者你知道在哪里可以找到一些可以理解的信息？

**笔记**

或者，有谁知道全屏显示绘图窗口或图形窗口的更好方法？我需要能够理解该方法，否则我无法使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:06:29.337

这些参数被认为是“属性-值对”。

第一对，`'Units', 'Normalized'`告诉图形，您将为其提供标准化值（介于 0 和 1 之间）而不是其他选项 - 例如像素或英寸。

第二对 ,`'OuterPosition', [0 0 1 1]`告诉它您要将图形的左下角（外侧）定位在 (0,0) 处，宽度和高度为 (1,1)。由于您指出单位是标准化的，因此 (0,0) 表示屏幕的左下角，而 (1,1) 表示屏幕的全高和全宽。

属性-值对允许您传递一些相关信息，但不能传递默认设置好的其他内容，并使您执行的顺序非常灵活。它是 MATLAB 中广泛使用的系统。

# css - 如何创建一个倾斜的一侧和另一侧的圆角的形状？

> ID：11128100
> 
> 赞同：2
> 
> 时间：2012-06-20T20:59:19.603
> 
> 标签：css, css-shapes

是否可以在 CSS3 中创建这种形状？如何？我被卡住了： http: [//dabblet.com/gist/2962169](http://dabblet.com/gist/2962169)

![形状](../Images/890fbeb1bbbf82e529256ffae2673854.png)

```
h1 {
  background-color: #434b82;
  border-radius: 20px 0 0 20px;
  transform: skew(-20deg);
}
```

```
<h1>TEST</h1>
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T21:24:28.030

你的意思是[这样的](http://jsfiddle.net/CyUpZ/)

```
h1 {
    background-color: #434b82;
    border-radius: 20px 0 0 20px;
    width:500px;
    height:40px;
    border-right: 40px solid transparent;
}
h1:after{
    position:absolute;
    width: 80px;    
    border-top: 40px solid #434b82;
    margin-left:500px;
    border-right: 20px solid transparent;
    content:"";
}

<h1></h1>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T15:07:20.893

我们可以使用[`linear-gradient()`](https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient)在矩形元素上绘制这个形状。

这个技巧使用将整个形状分成两部分的想法，然后在背景上独立绘制每个部分。

```
div {
  background-image: linear-gradient(to left, #434b82, #434b82),
                    linear-gradient(to left top, transparent 50%, #434b82 50%);

  background-position: top right 20px, 100% 100%;
  background-size: 100% 100%, 20px 100%;
  background-repeat: no-repeat;
} 
```

```
div {
  background-image: linear-gradient(to left, #434b82, #434b82),
                    linear-gradient(to left top, transparent 50%, #434b82 50%);
  background-position: top right 20px, 100% 100%;
  background-size: 100% 100%, 20px 100%;
  background-repeat: no-repeat;
  border-radius: 30px 0 0 30px;
  line-height: 50px;
  padding: 0 25px;
  height: 50px;
  width: 200px;
  color: #fff;
}
```

```
<div>
    Some Text Here...
</div>
```

# c# - 找不到 OLEDB 提供程序

> ID：11128104
> 
> 赞同：1
> 
> 时间：2012-06-20T20:59:52.310
> 
> 标签：c#, oledb

我收到错误：

`System.InvalidOperationException: The 'Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine.`

我有一个 64 位系统和一个安装了 Office 2010 32 位的 64 位应用程序。我的 64 位应用程序如何访问 OLEDB？

如何列出系统上可用的提供程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:06:54.467

> 我的 64 位应用程序如何访问 OLEDB？

“Microsoft.ACE.OLEDB.12.0”，即 Microsoft Access Database Engine 2010 Redistributable 可以从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=13255)下载。还有一个 64 位版本。

可以在[此处](http://www.connectionstrings.com/access-2007)找到“Microsoft.ACE.OLEDB.12.0”提供程序的连接字符串。

> 如何列出系统上可用的提供程序？

使用[OleDbEnumerator.GetRootEnumerator](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbenumerator.getrootenumerator)：

```
using System;
using System.Data;
using System.Data.OleDb;

class Program
{
 static void Main()
 {
   OleDbDataReader reader = OleDbEnumerator.GetRootEnumerator();

   DisplayData(reader);

   Console.WriteLine("Press any key to continue.");
   Console.ReadKey();
 }

 static void DisplayData(OleDbDataReader reader)
 {
   while (reader.Read())
   {
     for (int i = 0; i < reader.FieldCount; i++)
     {
       Console.WriteLine("{0} = {1}",
        reader.GetName(i), reader.GetValue(i));
     }
     Console.WriteLine("==================================");
   }
 }
} 
```

# linux - 枚举 389/Fedora 目录服务器的客户端

> ID：11128110
> 
> 赞同：0
> 
> 时间：2012-06-20T21:00:38.810
> 
> 标签：linux, directory, ldap, fedora

我有一个需要关闭的 Fedora 目录服务器。为此，我需要找到当前正在向该服务器进行身份验证的所有客户端的列表。不熟悉 Fedora/389 目录，我想知道是否有一种简单的方法可以做到这一点？在这一点上，我最好的选择似乎是梳理日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:47:03.163

符合 LDAP 的服务器应[主动](https://www.rfc-editor.org/rfc/rfc4511#section-4.4)向客户端发送有关客户端和服务器之间发生的事件的通知。通知包含客户端可用于执行操作的信息。因此，正确编码的客户端不应该关心正在关闭的服务器。不支持主动通知的客户端应添加该支持。

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

# objective-c - 为什么我的方法为同一个变量返回不同的值

> ID：11128112
> 
> 赞同：0
> 
> 时间：2012-06-20T21:00:42.140
> 
> 标签：objective-c, cocoa

我有一个双重时间。我无法确定为什么我可以将双精度传递给另一个类中的方法，但是同一方法不能从它所在的类中请求所述双精度。

我的头文件看起来像这样：

```
@property (nonatomic) double time; 
```

我的实现是这样的：

```
@implementation MainVewController

@synthesize time;

- (void) viewDidLoad
{ 
    startTime = NSDate.date;
}

- (double) returnTime {
    NSLog (@"time is disappearing?? %f", time);
    return time;
}

- (double) logTime {
    NSLog (@"for some reason, this one is working and returns a value %f", time);
    return time;
} 
```

我的另一堂课要我的双份：

```
@synthesize mainViewController = _mainViewController ;

- (MainViewController *)mainViewController {
    if (!_mainViewController) _mainViewController = [[MainViewController alloc] init];
    return _mainViewController;
}

- (BOOL)getTime {
    double timeGotten = [self.mainViewController returnTime];
    // why does this return 0?
    return TRUE;
} 
```

时间变量在 MainVewController 中不断更新：

```
time = [[NSDate date] timeIntervalSinceDate: startTime]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:34:17.500

第一次您的“其他班级”要求时`self.mainViewController`，它会创建一个新班级。我在这里猜测，但是，由于它被称为`MainViewController`，因此在“其他类”创建自己的新类之前可能已经存在其中一个。

首先`MainViewController`可能是更新发生的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:04:32.700

您在函数声明中声明该函数返回一个 type 的变量`double`，但您从未在 return 语句中添加一个返回 type 的值`double`。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:09:12.270

您的代码并没有讲述完整的故事。我已经在一个新的可可应用程序中复制了您的代码。有一些细微的差异，但逻辑保持不变。

我的`AppDelegate.h`样子是这样的：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (nonatomic) double time;

@property (assign) IBOutlet NSWindow *window;

@end 
```

`AppDelegate.m`看起来像这样：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;

@synthesize time;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSDate * startTime = [NSDate date];
    time = [[NSDate date] timeIntervalSinceDate: startTime];

    NSLog(@"Return time %f",[self returnTime]);
    NSLog(@"Log time %f", [self logTime]);
}

- (double) returnTime {
    return time;
}

- (double) logTime {
    return time;
}

@end 
```

将此代码复制到一个新的 cocoa 项目中并运行该应用程序，您将看到它运行正常。在我的机器上，控制台输出如下所示：

```
2012-06-21 20:02:17.832 test[298:403] Return time 0.000003
2012-06-21 20:02:17.833 test[298:403] Log time 0.000003 
```

您的代码可能有很多问题，但其中大部分只是推测，没有看到任何进一步的代码。首先，您可以有*Phillip Mills*`mainViewController`提到的多个实例（例如，您可以在 nib 文件中有一个实例，并且还可以传入 nibs 文件所有者的实例），这意味着您正在调用传递回不同时间变量的方法.

 *您还说您的应用程序不断更新时间变量。首先，是什么触发了这个更新？其次，如果变量不断更新，则不太可能返回与在两次方法调用之间可能已更新变量相同的值。

注意：您的代码中还有一个小错误。这一行：

```
NSLog ("for some reason, this one is working and returns a value %f", time); 
```

应该是（注意@符号）：

```
NSLog (@"for some reason, this one is working and returns a value %f", time); 
```

我继续编辑您的帖子以更正此问题，因为我认为这不是问题，因为如果省略 @ 符号，代码甚至无法在我的机器上编译。*

# facebook - facebook offline_access vs access_token

> ID：11128114
> 
> 赞同：0
> 
> 时间：2012-06-20T21:00:49.550
> 
> 标签：facebook, facebook-c#-sdk

我已经阅读了这里的问答和其他线程，以了解 facebook 如何处理 offline_access，但我仍然不完全了解它是如何工作的，所以请有人向我解释一下。

似乎 facebook 仍然支持客户端应用程序访问用户信息，而无需每次都要求用户登录。（例如，如果在安装客户端应用程序期间用户至少授予了一次授权）

启用所有这些的 access_token 似乎有点难以正确理解。

我看到在 c# 代码中，access_token 是只读属性，因此客户端应用程序无法保存和重用，客户端应用程序必须代表用户每次向授权服务器（facebook 服务器）请求令牌。然后有人说offline_access（长期使用的access_token，有效期约60天）是必要的，有人说默认access_token（1-2小时）就足够了，你每次都要求。

任何人都可以澄清并请提供一些 C# 代码或链接包含代码吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:08:38.460

如果您`offline_access`选择了用户何时授予您的应用程序权限，则这意味着`access_token`返回的内容具有长期使用寿命-这意味着您无需重新发布`access_token`以在其上发布帖子（或其他内容）代表。如果没有`offline_access`，您每次想要对他们的帐户执行任何操作时都需要重新颁发访问令牌。

如果您要使用 2 小时`access_token`，当该时间到期时，用户需要先登录 Facebook，然后`access_token`才能发布新的 - 这意味着您需要将他们重定向到 Facebook 登录页面，然后将发送回令牌给你。这是一种不太方便的方法，但是我一直在努力尝试使用该`offline_access`选项

# clojure - Clojure：操作场景图的函数式方法

> ID：11128118
> 
> 赞同：4
> 
> 时间：2012-06-20T21:01:17.453
> 
> 标签：clojure

## 语境

我正在处理一个大型的、嵌套的、结构化的文档，它以场景图的形式显示在屏幕上。用户需要有能力修改这个文档——我目前正在使用功能拉链来实现。

现在，目前，我正在每次更改后重新绘制整个文档。但是，当使用场景图时，我只需要修改改变的部分。

然而（不打算开始一场激烈的战争），我越来越开始觉得这个问题从根本上是一个关于状态的问题，而不是关于函数的问题。尤其：

*   用户操作（上、下、左、右、插入字符、删除字符）是关于操作状态，而不是进行计算

*   文档一次只有一份，只被一个线程点击，分享没有收获

## 当前方法

我使用功能拉链来存储文档并提供状态操作功能。然后，我不断地重画。

## 我怀疑可能是正确的解决方案：

将所有内容存储在一个场景图中，沟函数拉链，修改后直接修改场景图变化的部分。

## 技术问题：

其他人处理过这个吗？这个问题有技术上的正式名称吗？（相当于“餐饮哲学家”的并发？）这个问题有没有完善的解决方案？

## 免责声明

这个问题有点软。我无法粘贴最小损坏案例的代码示例，因为

```
* my code is around 5K LOC
* it's not for me to share publicly 
```

但是，这是一个真正的技术解决方案，我希望其他人可以分享他们的答案

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:24:24.020

你的基本过程听起来不错。它的当前形式很灵活，因为您可以选择让单独的线程更新树，并且您可以相当简单地实现“撤消”按钮。如果在每次修改后您**都返回新树和更改部分的路径，**那么您可以只更新显示中更改的部分。很多人在区分“模型”和“视图”方面比我有更强烈的意见，尽管我怀疑至少他们的一些智慧适用于此。

# java - 扩展我的 Java 程序以向其他计算机发送警报消息

> ID：11128121
> 
> 赞同：0
> 
> 时间：2012-06-20T21:01:40.573
> 
> 标签：java, sockets, network-programming, client-server, messaging

我编写了一个 java 摄入程序，它将 PDF 格式的摄入量发送到共享文件夹，以便网络中的其他人可以阅读它。但是，除非有人告诉他们，否则其他人无法知道已发送摄入量，因此我希望程序向其他计算机发送警报消息，告诉他们已发送摄入量。

现在我已经对此进行了一些研究，并认为 TCP 是可靠的方法，因为它是可靠的。我也知道这是一个一对多的发送，所以我假设我的 Intake 程序将充当服务器，而其他计算机将是客户端，还是应该反过来？

现在我假设我必须创建一个客户端程序来监听服务器并等待它发送消息。

考虑到这一点，我该如何：

*   创建一个持续监听消息的客户端程序，直到程序关闭。我假设我将使用“while (true)”并睡觉。如果是这样，我让程序休眠多长时间？
*   将其作为 Windows 服务的一部分，以便在 Windows 启动时加载。

在服务器端，我该如何：

*   向多台计算机发送消息，因为 TCP 无法进行多播或广播。我假设数组/向量将在这里发挥作用。

哦，这是一种单向通信。客户端不必响应服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:34:20.877

首先，UDP是相当可靠的（其实和IP协议本身一样可靠）。TCP 只是确保接收到数据，这在后端涉及很多魔法。除非您绝对需要确保其他机器收到消息，否则您可以使用 UDP 来完成。请注意，我并不是说“不要使用 TCP”，我只是想直截了当地说您也应该考虑 UDP。

无论如何，是的，您可以创建一个简单的听力程序。这是从服务器读取消息的 Java 客户端示例。它覆盖了 Thread 类的 run 方法：

```
public void run() {
    try {
        String messageFromServer = reader.readLine();
        while (messageFromServer != null) {
            // Do things with messageFromServer here                               
            // processor.processFromServer(messageFromServer);
        messageFromServer = reader.readLine(); // Blocks the loop, waits for message
        }
    }
    catch (IOException e) {
            // Handle your exception
    }
} 
```

除其他外，我的线程是这样设置的：

```
public CommunicationThread(String hostname, int port, int timeout) throws IOException, SocketTimeoutException {
    InetSocketAddress address = new InetSocketAddress(hostname, port);   
    socket = new Socket();
    socket.connect(address, 2000); // 2000ms time out
    // You can use the writer to write messages back out to the server
    writer = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));         
    reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
} 
```

现在，关于服务器端，您可以执行以下操作：

1.  编写一个程序以允许客户联系，前提是他们知道您的地址。
2.  接受连接，并将套接字存储在列表中。
3.  当您需要发送消息时，遍历列表并将数据发送给列表上的每个人。

您可以使用以下命令开始在您的服务器上收听

```
this.socket = new ServerSocket(port); 
```

您可以（甚至应该（？））使其线程化，以便您可以在为他人服务的同时接受客户。您可以通过以下方式接受新客户：

```
socket.accept(); // Blocks, waiting for someone to connect, returns open socket 
```

随意将它传递给一个可以处理 BufferedWriter 的全新类（如果你也想从客户端读取，甚至可能是 BufferedReader ）。该类是您将实现诸如 writeToClient(message) 之类的东西的地方 考虑您有一个 ClientConnection 类的情况，该类具有 writeToClient(String s) 方法和（服务器服务器，Socket 套接字）和初始化的 ArrayList conList。以下是您应该遵循的方法：在服务器中的一个单独线程中，接受与

```
ClientConnection con = new ClientConnection(this, socket.accept());
conList.add(con); 
```

然后，当您想写信给客户时：

```
for (ClientConnection c : conList) {
    c.writeToClient("I'm sending you a message!");
} 
```

我希望你对你需要做什么有一个模糊的概念。阅读 Socket 文档，它非常有用。此外，与线程应用程序一样，请确保您在遍历列表时不做诸如修改列表之类的事情，并避免竞争条件。

祝你好运！

# powerbuilder - PowerBuilder - 将 NonVisualObject 作为函数参数传递

> ID：11128123
> 
> 赞同：2
> 
> 时间：2012-06-20T21:01:43.567
> 
> 标签：powerbuilder

PowerBuilder 10.5

显然，在函数中我不能传递基本类型*NonVisualObject*的参数。我可以传递一个*UserObject*类型的参数，但这不是我想要的。我创建了一个简单的*NonVisualObject*作为 DTO（数据传输对象）的手段，以将简单数据传递给我的函数。

关于如何将一种*NonVisualObject*传递给我的函数的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:44:33.330

1.  您是否正在查看参数类型的下拉列表？您可以在这些框中键入任何有效的类名。

2.  如果您将参数声明为`nonvisualobject`函数，则无法访问您添加到对象的任何属性*。您应该将参数声明为您为 NonVisualObject 提供的类名（请参阅#1）。

*可以将参数转换为函数中的正确类型，但您应该有充分的理由将祖先传递给后代。安全地这样做是一项先进的技术。

# sencha-touch - IE Sencha Touch 有兼容性吗？

> ID：11128124
> 
> 赞同：1
> 
> 时间：2012-06-20T21:01:47.463
> 
> 标签：sencha-touch, extjs, sencha-touch-2

Sencha 与 Internet Explorer 有任何兼容性，我试图在 Microsoft 浏览器中可视化我的应用程序。我是否必须更改任何文件才能查看 Sencha 我的应用程序？请帮助解决这个问题。

我正在使用 Sencha Touch 1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:10:14.417

[从这里](http://www.sencha.com/blog/announcing-sencha-touch-2)

> Sencha Touch 是一个基于 CSS3、JavaScript 和 HTML5 等现代技术的框架。有些浏览器根本不支持 HTML5/CSS3，或者基本不支持。Internet Explorer 仍然是现存最迟钝的浏览器，就 HTML5 而言也是如此。不是 Sencha Touch 不支持 IE，只是 IE 并不真正支持 HTML5，至少 IE10 之前的任何 IE 版本都不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:48:34.977

我在谷歌浏览器中获得的最佳煎茶结果，加上 chrome 中的控制台非常有用。附带说明一下，我不知道您在做什么，但是 sencha 2.0 更加先进，值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:27:28.043

Sencha Touch (2.2) 将支持 Windows Phone 8。

目前 2.2 仍处于测试阶段。显然，预计 GA 版本已经有一段时间了。

[Sencha Touch with windows Phone 8](http://www.sencha.com/blog/sencha-touch-with-windows-phone-8/)

（查看评论以了解详细信息）

# git - “git push origin master”冻结

> ID：11128137
> 
> 赞同：10
> 
> 时间：2012-06-20T21:02:54.090
> 
> 标签：git, github

我正在尝试使用 Git 帮助中的指南将我的代码推送到我的 Github 帐户。我尝试了命令行和 GUI 工具-GitExtension。我能够成功执行初始步骤，但是当我执行“git push origin master”来推送我的代码时，我没有得到任何响应。我不认为这应该是 SSH 的问题，因为即使我使用“https”url 作为远程，我也无法推送它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:59:09.150

感谢您的评论。问题是我的防火墙阻止了 SSH 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-03T20:53:29.043

这是安装的问题，可能是最新版本的 Git。重新安装 git 并在此选项出现时选择我的屏幕截图中突出显示的选项。

图片：

![在此处输入图像描述](../Images/b7367ca823854acbeb16f5d4f1c8d86c.png)

这应该有效。

谢谢

# javascript - JavaScript，将函数推入数组

> ID：11128138
> 
> 赞同：2
> 
> 时间：2012-06-20T21:03:00.770
> 
> 标签：javascript, cordova, callback, push

我正在尝试将所有函数参数推送到数组，其中一个参数是函数，我不能这样做，因为在将函数推送到数组后我在这个地方有 null 我有以下问题，我有：

```
var someFunction1 = function(someValue, callback)
{
    // I CAN DO THIS, CALL HERE CALLBACK

    callback();

    // OR PASS CALLBACK TO ANOTHER FUNCTION AND CALL

    // BUT WHEN I'M TRYING THIS:

    var someArray = [];  // OR new Array() ... 
    someArray.push(someValue);
    someArray.push(callback);

    console.log(someArray); // <--- THIS WILL GIVE ME ["EXAMPLE",null] to console
}

var someFunction2 = function()
{
      var callbackFunction = function()
      {
         console.log("SOME TEXT");
      }

      someFunction1("EXAMPLE", callbackFunction);
} 
```

为什么我不能将此回调函数推送到数组中？

请帮忙 ：）

我现在在 IOS（PhoneGap 项目）上检查这个问题，当我尝试时：

```
 var array = [];
   array.push(function(){console.log("TEST");});
   console.log(array); 
```

然后我得到结果 [null] -> 但这适用于 JSFiddle（也在 OSX Safari 和 IOS Safari 上）:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:56:31.860

问题解决了：

这通常是 PhoneGap 控制台上的一些问题！

当我记录对象时：

```
console.log(function(){ /... CODE .../}); 
```

那么一切都很好，但是在将函数推送到数组后我得到'null'但我进一步检查了一步，我试试这个：

```
array[0](); //and function was called successfully :) 
```

它奇怪且有点令人困惑，但PhoneGap控制台在将其推送到数组并记录'null'后无法记录功能。

# mysql - MySQL declare a user defined variable inside select statement but do not show it as column

> ID：11128146
> 
> 赞同：0
> 
> 时间：2012-06-20T21:03:41.830
> 
> 标签：mysql, insert

I'm constructing a select statement that will later be the value of an insert statement. Most of the columns will be calculated fields. I recently learned that you can reuse calculated fields during select:

```
select
  id,
  @sum1 := col1 + col2 as colSum1,
  @total1 := @sum1 + col3 as colTotal1,
  @gtotal := @sum1 + total1 as colGTotal 
```

the result set will be 4 columns: `id`, `colSum1`, `colTotal1`, and `colGTotal`. I need the resulting column to be just the last column `colGTotal`.

Again this select statement will be a value of an insert.

```
INSERT INTO tbltest VALUES (SELECT...) 
```

I just need to insert the `colGTotal`

So I guess what I need is variable declaration and assignment inside the select statement (can't be outside) but EXCLUDE it as one of the resulting columns to be fed on the insert statement.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:26:14.510

如果可以，请重写查询以生成单列：

```
select col1 + col2 + col1 + col2 + col3 as colGTotal 
```

或者，您可以将此 SELECT 语句用作子查询，并选择您想要的列：

```
INSERT INTO tbltest VALUES (SELECT colGTotal FROM (SELECT id, @sum1 ...) AS foo) 
```

# apache - .htaccess 拒绝除某些目录之外的所有内容

> ID：11128148
> 
> 赞同：1
> 
> 时间：2012-06-20T21:03:43.233
> 
> 标签：apache, .htaccess

我有一个我希望拒绝访问的文件夹，但我希望有一个可访问的子目录（及其所有文件和任何子目录）。

示例目录结构：

```
/modules/
/modules/gallery/public/manifest.xml
/modules/gallery/public/js/core.js
/modules/gallery/public/css/master.css
/modules/news/public/images/status.png
/modules/news/public/css/style.css 
```

.htaccess 文件需要在“模块”中，因为它的子目录是用户提供的（它们是 CMS 的插件），每个用户提供的文件夹可能有一个“公共”目录，并且只有“公共”中的文件和文件夹应该是可访问的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:17:15.463

如果请求包含 a ，则可以设置环境变量，在**modules**目录`/public/`中的 htaccess 文件中执行以下操作：

 **```
SetEnvIf Request_URI /public/ ispublic=1
Order Deny,Allow
Deny from all
Allow from env=ispublic 
```

如果您想更加严格，您可以调整`/public/`正则表达式以包含深度，例如，只有 1 个目录深入到**modules**：

```
SetEnvIf Request_URI ^/[^/]+/public/ ispublic=1 
```**

# hibernate - Accessing an object's fields without an active session

> ID：11128150
> 
> 赞同：0
> 
> 时间：2012-06-20T21:04:00.020
> 
> 标签：hibernate

I'm using Hibernate 4.0.1.Final. Is it possible to access an object's fields if that object has been loaded via the org.hibernate.Session.load(Class clazz, Serializable id) method and there is no active session?

I use this code to access an object by id …</p>

```
protected Object find(Class clazz, Serializable id) {
    Object obj = null;
    try {
        startOperation();
        obj = session.load(clazz, id);
        tx.commit();
    } catch (HibernateException e) {
        handleException(e);
    } finally {
        session.close();
    }
    return obj;
} 
```

but if I have that object without an active session, like with this code …</p>

```
final Organization foundOrg = orgDao.findById(org.getOrganizationId());
System.out.println(foundOrg.getName()); 
```

I get this error on the "System.out" line …</p>

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:149)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:195)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
    at org.myco.myproject.orgsclient.model.Organization_$$_javassist_0.getName(Organization_$$_javassist_0.java)
    at org.myco.myproject.orgsclient.dao.OrganizationDAOTest.testInsertSchool(OrganizationDAOTest.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:09:03.203

使用`session.get(Class, Serializable)`代替`session.load(Class, Serializable)`

Load 会返回一个代理给对象，当你第一次访问代理上的一个属性时，这个对象是从数据库中加载的。如果你使用`session.get()`，你保证会得到一个完全初始化的对象。

load 和 get 之间的另一个区别是找不到对象的结果。Get 将返回 null 而 load 将始终返回一个代理。访问属性时，此代理将引发异常。

# c# - 从网络浏览器到网络请求

> ID：11128156
> 
> 赞同：0
> 
> 时间：2012-06-20T21:04:17.510
> 
> 标签：c#, httpwebrequest

我正在开发一个程序，该程序可以在浏览器中自动执行任务，例如输入文本、单击等，现在在 Visual Studio 2010 中使用 Web 浏览器工具时一切正常。

我想知道的是我应该如何转换所有这些以便我可以使用发送请求而不是浏览器？我听说如果您要使用多线程，它会更高效、更好，但是我有很多代码现在已经可以工作了，我不确定我应该如何在不刮掉很多代码的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:11:53.960

您将使用 HttpWebRequest / HttpWebResponse 向服务器发送 HTTP 请求，然后使用 HttpWebResponse.GetResponseStream() 检索文档正文。然后使用 HTML 框架（例如[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)）解析 HTML 并获取文档的 DOM 图，然后您可以遍历 DOM 以提取数据并将任何后续请求的请求主体制作回服务器。

如果响应文档是有效的 XML（例如 XHTML1.1），那么您可以通过将其加载到 System.Xml.XmlDocument 中来节省一些时间，但实际上 HTML 文档经常包含错误，并且像 HtmlAgilityPack 这样的框架比 System.xml 更能容忍解析器错误。 xml。

对于多线程，您可以同时触发多个 HttpWebRequest（每个请求都与自己的线程相关联，或者使用 Async 方法）。请注意，您需要修改一些设置来覆盖 .NET 网络库中存在的“每个主机两个并发 HTTP 请求”策略。

# ios - iOS Trying to figure out nasty crash

> ID：11128158
> 
> 赞同：0
> 
> 时间：2012-06-20T21:04:25.637
> 
> 标签：ios, crash, segmentation-fault

Normally the crash log indicates where this might be happening, but in this case, this is all I am getting. Lets say my main view is A and I have A,B, and C views.

This only happens if I do the following:

Go from A to B to C, go out of app and load up a few other apps. Then return to my app, go back to B, then go back to A (THIS IS WHERE IT CRASHES).

EDIT - I had posted the wrong thread before...here is the correct thread

CRASH LOG:

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x4daf03bd
Crashed Thread:  7

Thread 7 name:  Dispatch queue: com.apple.root.default-priority
Thread 7 Crashed:
0   libobjc.A.dylib                 0x36f22f78 objc_msgSend + 16
1   Foundation                      0x33707d04 _NSDescriptionWithLocaleFunc + 44
2   CoreFoundation                  0x34f3a96e __CFStringAppendFormatCore + 7998
3   CoreFoundation                  0x34eb51d8 _CFStringCreateWithFormatAndArgumentsAux + 68
4   Foundation                      0x33707c2e +[NSString stringWithFormat:] + 54
5   MyGreatApp                      0x00061028 -[DataAccessor getProducts:div:productType:cat:searchsilver:completion:] (DataAccessor.m:301)
6   MyGreatApp                      0x00017196 __36-[products showNationalCategories]_block_invoke_0 (products.m:1688)
7   libdispatch.dylib               0x37886c52 _dispatch_call_block_and_release + 6
8   libdispatch.dylib               0x378927b4 _dispatch_worker_thread2 + 256
9   libsystem_c.dylib               0x35b45df4 _pthread_wqthread + 288
10  libsystem_c.dylib               0x35b45cc8 start_wqthread + 0 
```

Here is line 301 (Note, all the objects going into the string are NSStrings):

```
NSString *urlStr = [NSString stringWithFormat:@"%@?api_key=%@&device[duid]=%@&division=%@",apiUrl,apiKey, duid, division]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:49:54.880

我的疯狂猜测是 viewDidUnload 中的某些东西正在被解除分配，这是依赖的，并且没有被正确地重新初始化。在大多数情况下，viewDidUnload 在测试时不会被调用；这是我认为在您离开其他应用程序时可能发生的一件事。当视图出现在屏幕上时，对 A 的所有属性进行复查，并复查它们是否为非零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T16:28:41.360

我认为当呈现与您期望的视图控制器不同的视图控制器时，您的回调正在运行。我认为首先最好通过 NSLogging 在单独的代码行上找出错误的字符串指针。您还为那些字符串参数使用了任何 _block 装饰（或使用它们两次：在块内部和外部） - 这会破坏它们的保留。

# php - simple query broke for no reason?

> ID：11128160
> 
> 赞同：-5
> 
> 时间：2012-06-20T21:04:31.507
> 
> 标签：php, mysql

These all echo correctly but the query doesn't insert anything? it use to work and just broke.

```
echo $social_id;
echo $name;
echo $email;
echo $social_network;
echo $profile_pic;

mysql_query("INSERT INTO users (social_id, name, email, social_network, profile_pic)
             VALUES ('$social_id', '$name','$email', '$social_network','$profile_pic')");
$user_id = mysql_insert_id(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T21:06:09.803

Try removing the `exit()` call:

```
echo $social_id;
echo $name;
echo $email;
echo $social_network;
echo $profile_pic;
~~exit();~~
mysql_query("INSERT INTO users (social_id, name, email, social_network, profile_pic)
             VALUES ('$social_id', '$name','$email', '$social_network','$profile_pic')");

$user_id = mysql_insert_id();
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:50:24.303

1.  如果您禁用了屏幕上显示的 PHP 错误，请检查您的错误日志。
2.  使用 mysql_errno() 和 mysql_error() 查看 PHP 尝试选择或查询数据库时可能报告的任何错误，例如：

    ```
    <?php
    $social_id = "test";
    $name = "Bob";
    $email = "myself@localhost";
    $social_network = "facespace";
    $profile_pic = "me.png";

    $conn = mysql_connect("localhost", "roots", "for_the_cubs");
    if(!$conn){
        die('Could not connect to the database');    
    }

    mysql_select_db("mydb", $conn);
    echo mysql_errno($conn) . " : " . mysql_error($conn);

    mysql_query("INSERT INTO users 
             (social_id, name, email, social_network, profile_pic)
            VALUES 
             ('$social_id', '$name','$email', '$social_network','$profile_pic')");
    echo mysql_errno($conn) . " : " . mysql_error($conn);

    ?> 
    ```

3.  仔细检查以确保在 php.ini 中启用了 mysql 扩展。

4.  检查您的数据库或 php 版本是否有任何更改。

可能是在服务器上升级了某些东西并且没有重新添加 mysql 扩展，而是选择了 PDO 或 mysqli

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:07:34.900

我不是 PHP 专家，但是否因为您`exit()`在 insert 语句运行之前有一个调用，因此从未到达查询？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T21:07:40.843

您在查询之前直接调用`exit()`，因此查询永远不会执行。

# mysql - 用 mysql 命令替换 sqlplus 命令

> ID：11128167
> 
> 赞同：3
> 
> 时间：2012-06-20T21:04:51.987
> 
> 标签：mysql, sqlplus

我正在尝试将用 c-shell 脚本编写的脚本重写为使用 sql plus 命令从 oracle 数据库获取信息，但我用 mysql 替换它，我想用 mysql 语法替换所有 sqlplus 语法。我要求所有 c-shell 大师向我解释这个命令的含义

```
 set SQLPLUS=${ORACLE_HOME}/bin/sqlplus 

 set REPORT=${MYBD_HOME}/Scripts/report.sql 
```

所以在某处我使用以下命令调用 sql plus 命令

```
 ${SQLPLUS} ${MYDBUSER} @ &{REPORT} 
```

我可以说我理解右手值的含义（{ORACLE_HOME}/bin/sqlplus）是我的 sqplus 命令所在的路径，因此我需要它来调用命令和 {REPORT=$(MYBD_HOME} /Scripts.report.sql) 是通过调用 sqplus 命令运行的我的 sql 脚本所在的路径是否正确？

我不明白 set 命令将其初始化为什么。SQLPLUS 是一个变量，所以当我尝试将其放入我的 .csh 脚本时，我不必键入路径？

如果是这样，那么在 mysql 数据库上运行此脚本所需要做的只是将 SQLPLUS（可能将其更改为 MYSQL）指向我的 msql exec 正确的路径

```
 set MYSQL=${MYSQL_HOME}/bin/mysql 
```

然后只需调用 mysql 并运行 sql 语句

```
 ${MYSQL}${MYDBUSER}@${REPORT} 
```

这是我需要做的 ro tun 相同的 .tsch 脚本以从 mysql 表中获取数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:16:05.550

你需要这样的东西：

```
${MYSQL} -u $username -p$password -D $database < ${REPORT} 
```

（用户名和密码传递给 mysql 可执行文件的方式与传递给 SQLPlus 的方式不同。您需要从 ${MYDBUSER} 中解析出用户名和密码。可能包含诸如“ `scott/tiger`”之类的字符串。 mysql 命令行客户端上的等效项是“ `-u scott -ptiger -D scott`”。

@（at 符号）是 SQLPlus 的东西；它告诉 SQLPLus 从指定的文件名读取输入。mysql 中的等价物是`source`命令，例如

```
${MYSQL} -u $username -p$password <_EOD!
use $database 
source ${REPORT}
_EOD! 
```

此外，您的`report.sql`文件可能包含`spool`其他 SQLPLus 特定命令。mysql 命令行客户端并不像 SQLPlus 那样强大的报告工具。

* * *

**附录：**

**问：**阀芯具体有什么作用？

SQLPlus`spool`命令将输出定向到文件。它经常用于从 SQLPLus 会话创建日志文件，也可用于创建报告文件。

```
set trimspool on
spool /tmp/file.lis
select 'foo' as foo from dual;
spool off 
```

**问：**为什么我不能将用户名和密码设置为变量并使用它？

您可以设置一个变量，发送到操作系统的命令行的最终结果将是相同的。

```
set MYDBUSER="-u username -ppassword -D database"
${MYSQL} ${MYDBUSER} <${REPORT} 
```

**问：**好像 mysql 比 sqlplus 更冗长。

mysql 命令行客户端采用 unix 样式的选项。这些是等价的：

```
mysql -u myusername -pmypassword -D mydatabase
mysql --user=myusername --password=mypassword --database=mydatabase 
```

# android - Android：将图像放大到屏幕之外

> ID：11128168
> 
> 赞同：0
> 
> 时间：2012-06-20T21:04:52.483
> 
> 标签：android, image, screen, image-enlarge

首先，我不想放大图像的特定区域。我希望图像变得更大，当它对屏幕来说太大时，我只想让屏幕太大而无法从边缘掉下来的部分（基本上，不适合屏幕的部分只会不可见）。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:15:09.970

设置`ImageView.ScaleType`为`MATRIX`，然后提供适当的矩阵来进行缩放。

```
ImageView iv;

iv.setScaleType(ScaleType.MATRIX);
//New matrix is identity matrix
Matrix m = new Matrix();
/*
 * Scale to 2x in both directions.
 * There is also a version that takes a pivot point if you want
 * to set the scale's point of origin.
 */
m.postScale(2.0f, 2.0f);

iv.setImageMatrix(m); 
```

高温高压

# sql - sql注入场景中的格式函数与参数？

> ID：11128171
> 
> 赞同：7
> 
> 时间：2012-06-20T21:05:07.270
> 
> 标签：sql, delphi, sql-injection

我知道sql语句中参数的使用，但是出于好奇，使用Format函数来防止sql注入而不是使用参数是安全的。

喜欢这个样本

```
sCustomer : string
begin
 AdoSql.CommandText:=Format('Select SUM(value) result from invoices where customer=%s',[QuotedStr(sCustomer)]);
end; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T21:14:54.963

假设按预期工作并且没有可以破坏它的边缘情况，这*可能*对 SQL 注入是安全的。`QuotedStr`（这绝不是保证。正如 Linas 在评论中指出的那样，MySql 允许您使用`\'`转义引号。其他 DBMS 可能具有类似的功能。具有足够系统理论知识的攻击者将能够利用它们。）

但是，即使 QuotedStr 足够好，出于不同的原因使用参数仍然更好：性能。当您将参数与查询分开时，您最终可能会使用不同的参数多次发送完全相同的查询代码。如果这样做，数据库可以缓存它在计算查询时所做的大量工作，因此您的数据库访问速度会更快。当您将参数混合到查询代码本身时，这不起作用（或至少不起作用）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T22:11:56.633

每当您通过将字符串连接在一起来构建 SQL 字符串时，都存在注入攻击的可能性，无论您认为访问这些字符串有多安全。如您所知，有人可以在调试器中运行您的应用程序，在结果上设置断点，并在允许查看`QuotedStr()`之前修改其内容。`Format()`

使用实际的 SQL 参数是最安全的方法。它不仅避免了注入，而且还允许 SQL 引擎根据自己的需要决定如何最好地格式化参数，因此您不必担心在自己的代码中格式化值，它适用于强类型语言（如德尔福）。更不用说能够提前在服务器端准备 SQL 语句然后在代码中执行它的性能优势，甚至多次，大大减少了客户端和服务器之间的流量并提高了整体性能。

```
var
  sCustomer : string 
begin 
  AdoSql.CommandText := 'Select SUM(value) result from invoices where customer=:Customer'; 
  AdoSql.Prepared := True;
  ... 
  AdoSql.Parameters['Customer'].Value := sCustomer; 
  AdoSql1.ExecSQL;
  ...
  AdoSql.Parameters['Customer'].Value := sCustomer;
  AdoSql1.ExecSQL;
  ...
  AdoSql.Prepared := False;
end; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T04:04:13.180

不，`Format`不提供 SQL 注入的安全性。在这方面，它与普通的字符串连接没有什么不同。

问题中对 SQL 注入执行任何操作的代码部分是调用`QuotedStr`，您可以使用或不使用`Format`。但是，它不像真正的参数化查询那样可靠。

在这种情况下，唯一的优点`Format`是整个字符串模板都在一个位置，因此与必须通过连续操作构造字符串相比，您不太可能出现空格和标点错误`+`，而 SQL 撇号可以迷失在德尔福撇号之间。

# visual-studio-2010 - Visual Studio.NET 2010 错误：索引无效。（来自 HRESULT 的异常：0x8002000B (DISP_E_BADINDEX)）

> ID：11128175
> 
> 赞同：0
> 
> 时间：2012-06-20T21:05:12.267
> 
> 标签：visual-studio-2010, git, nuget

我想知道您在尝试在 visual studio.net 2010 SP1 中复制文本时是否遇到过这个模糊的问题：

> 无效索引。（来自 HRESULT 的异常：0x8002000B (DISP_E_BADINDEX)）

我已经安装了 Git 扩展和 NuGet 附加组件。我也试过打开以管理员模式运行的 vs.net。

想知道是否有人遇到过这个问题以及采取了哪些措施来修改它？

干杯，一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:11:25.997

我确实在安装 MVC4 beta 后发生了这种情况，我实际上是在使用复制/粘贴，这就是你的意思吗？在这种情况下，我不得不重新安装。

# java - ListView doesn't update until a key is pressed on the simulator

> ID：11128177
> 
> 赞同：1
> 
> 时间：2012-06-20T21:05:21.763
> 
> 标签：java, android, listview, refresh

I'm working on one of my first Android apps in which I load some JSON from the web and, after parsing, display the data in a `ListView`. When the app first launches, the `ListView` is empty. After the data is loaded, it's quite full. However, even while using `notifyDataSetChanged()` on my adapter, the `ListView` doesn't refresh and show the newly-loaded data until I press a key on the simulator's keyboard.

This is the processing I perform. I download the JSON, parse it, then my code looks like this - now, nothing shows at all, not even when pressing a key:

```
JSONArray jObject = new JSONArray(new2);
int l = jObject.length();
downloadedArrayOfStrings = new String[jObject.length()];

for(int i = 0; i < l; i++){
    Log.v("i", ""+i);
    jObject.getJSONObject(i).getString("category").toString();
}

ArrayList<String> lst = new ArrayList<String>();
lst.addAll(Arrays.asList(downloadedArrayOfStrings));
newAdapter = new MobileArrayAdapter(this, lst, downloadedArrayOfStrings);
newAdapter.setJSONArray(jObject);
setListAdapter(newAdapter); 
```

Any ideas as to why this is happening, and how to fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:07:40.480

您应该将 重新分配`ListAdapter`给`ListView`列表需要更新的时间。`notifyDataSetChanged()`不能`ListAdapter`与`CursorAdapter`. _ 您也可以`invalidateViews()`在尝试我上面所说的之前尝试使用。`invalidateViews()`基本上会重建你的`ListView`.

# facebook - Facebook PHP SDK: Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user

> ID：11128178
> 
> 赞同：2
> 
> 时间：2012-06-20T21:05:23.807
> 
> 标签：facebook, facebook-php-sdk

I am using the PHP SDK to handle my Facebook connects. Everything was working fine for some time but my script suddenly stopped working. Here is what happens:

```
$facebook = new Facebook(array('appId' => $app_id, 'secret' => $app_secret, 'cookie' => true));

$user = $facebook->getUser();

if ($user) {

    $permissions = $facebook->api('/me/permissions');

} else {

    $params = array();
    $params['scope'] = 'publish_actions,user_photos';
    header('Location: ' . $facebook->getLoginUrl($params));
    exit();

} 
```

Returns: Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user.

The error is caused by the line

```
$permissions = $facebook->api('/me/permissions'); 
```

Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:23:22.927

你为什么不试试

```
$permissions = $facebook->api(
                '/me/permissions ',
                'GET',
                array(
                    'access_token' => $_SESSION['active']['access_token']
                )
            ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:14:13.267

始终检查异常！这是一个简单的例子：[https ://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)

$user 返回当前用户的用户 ID，但是，这并不能保证用户没有同时注销或者他的令牌仍然处于活动状态。因此，不要仅仅依靠这个，因为你有一个 user_id，而是检查异常。您可以要求用户再次单击登录，或者在发生异常时自动将用户重定向到登录页面。

# php - 使用 AJAX 将数据 POST 到 PHP 数据库，然后刷新

> ID：11128180
> 
> 赞同：-3
> 
> 时间：2012-06-20T21:05:34.217
> 
> 标签：php, javascript, jquery, ajax

目前我有一个按钮：

```
<ul>
    <li><button onclick="display('1')">1</button></li>
    <li><button onclick="display('2')">2</button></li>
    <li><button onclick="display('3')">3</button></li>
</ul> 
```

按下时，调用 javascript 函数，并根据使用 AJAX 按下的按钮显示 PHP。这一切都是我自己想出来的。AJAX 获取一个带有 postgres 查询的 PHP 文件，该查询将数据表输出到 div。

现在我希望能够通过表单添加新数据并刷新（无需重新加载页面，yannknow？）。我已经尝试了几件事，并且每次都遇到了障碍。

我最初的想法是让表单使用 javascript 函数和 AJAX 提交数据，然后`display()`在查询后调用我的“”函数以重新加载内容。我只是无法使用 GoogleFu 弄清楚。

根据我目前的想法，我需要以下帮助：

1.  如何将表单数据传递给 javascript 函数。
2.  如何使用 POST 通过 AJAX 将该数据传递给 PHP？

我对 javascript 和 AJAX 非常陌生。我已经研究了 jquery，因为这似乎是要走的路，但我无法弄清楚。如果有更好的方法可以做到这一点，我愿意接受建议。请原谅任何术语的滥用。

编辑：一旦我解决了这个问题......，我将拥有初步完成项目所需的所有工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:13:01.873

此示例直接从 jQuery API 文档复制而来`$.post`。如有疑问，首先要查看 API

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

> 示例：使用 ajax 请求发送表单数据

```
$.post("test.php", $("#testform").serialize(), function(data){
   /* success- do something with returned data*/
}); 
```

现在进一步扩展概念并将帖子包装在表单的提交处理程序中

```
$("#testform").submit(function(){
/* code from above, changing form selector to "this" */
  $.post("test.php", $(this).serialize(), function(data){
       /* success- do something with returned data*/
    });    
/* prevent browser default submit*/
  return false;
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:12:05.730

参考[jQuery.post](http://api.jquery.com/jQuery.post/)方法。它做你想做的事（发送带有 POST 数据的 AJAX 请求）。

要从输入中获取值，`val()`请对具有值的节点使用方法（textarea、input、..）

# c# - 这个文本文件是可解析的还是不可解析的？

> ID：11128181
> 
> 赞同：1
> 
> 时间：2012-06-20T21:05:44.470
> 
> 标签：c#, sql, parsing, text, string-comparison

以免我遭受一阵乏味的震颤（大致介于震颤谵妄和腕管综合症之间），我需要找到一种方法来自动解析大型 sql 语句文件及其参数值。

我有一个包含大量 sql 语句的文件，格式如下：

```
select Animal#, RacketThreshold, PeakOil as Oil
from OilAnimalPlatypus2
where OilAnimalPlatypusID = :ID
  and Animal# = :Animal
  and TelecasterAccessType = 'D'
UNION
select Animal, RacketThreshold, PeakOil as Oil
from OilRequestPlatypus
where PlatypusID = :ID
  and Animal = :Animal
order by RacketThreshold

-->ID(VARCHAR[0])=<NULL> 
:Animal(INTEGER)=2 
```

...即多行 sql 语句，后跟一个空行，后跟两个破折号和一个带有参数名称、数据类型和参数的箭头，后跟相同的东西，一遍又一遍地反复无止境地恶心（除了 sql 语句有无参数）。

我想从这个伟大的 gob 中为每个唯一查询创建一个单独的字符串（其中许多是相同的，尽管通常为参数分配了不同的参数值）。如果可能的话，我还想跟踪传递给特定查询的所有参数值（例如，如果第一次调用它并为特定参数传递“1”，下一次是“42”，下一次“3.14”等），我想要该 arg 名称的 1、42、3.14 的集合。

有超过 400 个查询，我讨厌“手动”完成这一切的想法——尤其是匹配查询的比较。

## 更新

好的，添加此代码以使用 Jon 的代码后：

```
private void buttonOpenAndParseSQLMonFile_Click(object sender, EventArgs e)
{
    var queriesAndArgs = (Dictionary<string, List<string>>)ParseFile("SQLMonTraceLog.txt");
    foreach(var pair in queriesAndArgs)
    {
        richTextBoxParsedResults.AppendText(pair.Key);
        richTextBoxParsedResults.AppendText(Environment.NewLine);
        foreach (String s in pair.Value)
        {
            richTextBoxParsedResults.AppendText(s);
            richTextBoxParsedResults.AppendText(Environment.NewLine);
        }
        richTextBoxParsedResults.AppendText(Environment.NewLine);
    }
} 
```

...我在我的richTextBox 中得到这些类型的结果：

```
select ABCID from ABCWorker where lower(loginid) = lower(user) 

select r.roleid from abcrole r, abcworker w where lower(w.loginid)=lower(user)   and r.abcid=w.abcid   and r.status='A'

select Tier#, BenGrimm, PeakRate as Ratefrom RageAnimalGreenBayPackers2 where RageAnimalGreenBayPackersID = :ID and Tier# = 

:Tier and FlyingVAccessType = 'D' UNION select Tier, BenGrimm, PeakRate as Rate from CaliforniaCondorGreenBayPackers where 

GreenBayPackersID = :ID and Tier = :Tier order by BenGrimm 
-->   :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=1 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=1 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=1 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=4 

select Tier#, BenGrimm, PeakRate as Rate from RageAnimalGreenBayPackers2 where RageAnimalGreenBayPackersID = :ID and Tier# = 

:Tier and FlyingVAccessType = 'D' UNION select Tier, BenGrimm, PeakRate as Rate from CaliforniaCondorGreenBayPackers where 

GreenBayPackersID = :ID and Tier = :Tier order by BenGrimm 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=2 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=5 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=1 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=2 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=3 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=4 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=2 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=3 
-->  :ID(VARCHAR[0])=<NULL> :Tier(INTEGER)=4 
(etc.) 
```

...所以，这很有启发性，但我发现这不是我所需要的，而且这取决于我对文件的 lamo 手动调整。所以，我想我需要退后一步，解析文件，因为它实际上是给我的，递增的数字分隔每个“有趣的”事件：

```
. . .
6       11:30:46  SQL Execute: select ABCID
from ABCWorker
where lower(loginid) = lower(user)
7       11:30:46  SQL Prepare: select r.roleid from abcrole r, abcworker w where lower(w.loginid)=lower(user)   and     
r.abcid=w.abcid   and r.status='A'
8       11:30:46  SQL Execute: select r.roleid from abcrole r, abcworker w where lower(w.loginid)=lower(user)   and     
r.abcid=w.abcid   and r.status='A'
9       11:30:46  SQL Execute: select Tier#, BenGrimm, PeakRate as Rate
from RageAnimalGreenBayPackers2
where RageAnimalGreenBayPackersID = :ID
  and Tier# = :Tier
  and FlyingVAccessType = 'D'
UNION
select Tier, BenGrimm, PeakRate as Rate
from CaliforniaCondorGreenBayPackers
where GreenBayPackersID = :ID
  and Tier = :Tier
order by BenGrimm
10      11:30:46  :ID(VARCHAR[0])=<NULL> 
:Tier(INTEGER)=1
11      11:30:46  SQL Execute: select Tier#, BenGrimm, PeakRate as Rate
from RageAnimalGreenBayPackers2
where RageAnimalGreenBayPackersID = :ID
  and Tier# = :Tier
  and FlyingVAccessType = 'D'
UNION
select Tier, BenGrimm, PeakRate as Rate
from CaliforniaCondorGreenBayPackers
where GreenBayPackersID = :ID
  and Tier = :Tier
order by BenGrimm
12      11:30:46  :ID(VARCHAR[0])=<NULL> 
:Tier(INTEGER)=2
. . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:17:07.897

你真正需要的是一个词法分析器。查看 ANTLR - [http://www.antlr.org/](http://www.antlr.org/)

您将需要定义您的“语法”，即您的语言的每个元素的特征（在这种情况下是您的 SQL 文件）。最后，ANTLR 处理您的文件并根据我们的语法定义吐出结果。

这只是一个标记化和解析过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:17:50.883

这是我评论的一个具体例子；您可以通过使用[StreamReader](http://msdn.microsoft.com/en-us/library/aa287535%28v=vs.71%29.aspx)并将每个块收集到一个列表中来非常简单地做到这一点；例如：

```
string line = String.Empty;

List<String> statementBlocks = new List<String>();

System.IO.StreamReader file = new System.IO.StreamReader("C:\\temp\\annoying_text_file.sql");

StringBuilder blockCollector = new StringBuilder();

//read the file a line at a time
while((line = file.ReadLine()) != null)
{
  //If the line has content, then we append it to our string builder 
  if(!String.IsNullOrWhitespace(line)) //String.IsNullOrWhitespace is new in .Net 4 and will also match the new line
  {
      blockCollector.AppendLine(line);
  }
  else
  {
       //we've hit a blank line - dump it to the list and reinitialize the stringbuilder
       statementBlocks.Add(blockCollector.ToString();
       statementBlocks = new StringBuilder();
  }

}

//Tidy up
file.Close();

foreach(string statementBlock in statementBlocks)
{
  if(!String.IsNullOrEmpty(statementBlock))
  {
      if(statememtBlock.StartsWith("-->"))
      {
        //Code to split out the arguments; if they are delimited with : then you can just string.split this line
        //string[] paramsAndValues = line.Replace("-->", String.Empty).Split(Char.Parse(":"))
        // then for each string in here it's paramName(DataType)=Value, which is also splittable.
      }
      else
      {
      //Do whatever you want with this valid block (including writing it to another file!)
      //To keep only the unique ones, store each block in a list, then look to see if a block already exists in the list each time; if it does, just skip this block. Given you also know that the next block will be a parameter block, you can also collect the parameters here too
      }
  }    
} 
```

我现在不能检查这个编译，但它应该让你大致了解一种可能的方式来做你想做的事。

它假设唯一的空行是语句块之间的空行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T21:55:39.687

假设您通过另一个空白行将查询彼此分开，您可以尝试使用以下内容来解析您的文件。代码将通读文件直到结束。对 parseQuery 的每次调用都将逐行读取，直到找到一个空行，并将它们附加在一起作为您的查询。然后它将检查下一行，如果它不是参数块的开头，它将保存不带参数的查询，并重新开始，假设它位于另一个查询的开头。如果该行*是*参数块的开头，则代码将读取，直到遇到另一个空白行，保存查询及其参数，然后返回。while(parseQuery) 将确保整个文件被解析。

最后，代码输出一个字典，其中包含一个查询字符串作为键，一个字符串列表作为提供的不同参数。为简单起见，省略了错误检查。在实际场景中，您可能希望添加对文件不存在之类的处理。

```
static IDictionary<string, List<string>> ParseFile(string path)
{
    Dictionary<string, List<string>> queries = new Dictionary<string, List<string>>();
    using (var reader = File.OpenText(path))
    {
        while (parseQuery(reader, queries)) { }
    }
    return queries;
}

private static bool parseQuery(StreamReader reader, Dictionary<string, List<string>> queries)
{
    StringBuilder sbQuery = new StringBuilder();
    StringBuilder sbArgs = new StringBuilder();
    // Read in query
    bool moreLines = ParseBlock(reader, sbQuery);
    if (moreLines)
    {
        while (moreLines)
        {
            string line = reader.ReadLine();
            // Check for the beginning of an args block.
            if (line != null && line.StartsWith("-->"))
            {
                // Read in args
                sbArgs.Append(line);
                moreLines = ParseBlock(reader, sbArgs);
                break;
            }
            // If this is not an args block, it is a new query
            // Save the last query and start over
            else
            {
                AddQuery(queries, sbQuery.ToString(), sbArgs.ToString());
                sbQuery = new StringBuilder();
                sbQuery.Append(line); // Make sure we capture the last line
                moreLines = ParseBlock(reader, sbQuery);
            }
        }
    }
    AddQuery(queries, sbQuery.ToString(), sbArgs.ToString());
    return moreLines;
}

private static bool ParseBlock(StreamReader reader, StringBuilder builder)
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        line = line.Trim();
        if (string.IsNullOrWhiteSpace(line)) break;

        builder.Append(line + " ");
    }
    return line != null;
}

private static void AddQuery(Dictionary<string, List<string>> queries, string query, string args)
{
    if (query.Length > 0)
    {
        List<string> lstParams;
        if (!queries.TryGetValue(query, out lstParams))
        {
            lstParams = new List<string>();
        }
        lstParams.Add(args);
        queries[query] = lstParams;
    }
} 
```

# jsf - Adding user role constraint redirects Browser to jsf.js script?

> ID：11128184
> 
> 赞同：0
> 
> 时间：2012-06-20T21:05:52.937
> 
> 标签：jsf, web.xml, jaas, j-security-check

My JSF form login was working with **Constraint 1** however when I added **Constraint 2** to my web.xml doing a submit on the form now takes me to a jsf javascript page. Can someone tell me what I am doing wrong? I'm hoping this is a quick configuration mistake.

I would like only administrators to be able to access the /admin/* pages and only registered users to access the entire site included admin files. BTW after I see the java script page I can still navigate to the intended page in the browser, I just don't want the user to see the intermediate js page or need to know the target page URL.

**Constraint 1**

```
<security-constraint>
    <display-name>Admin</display-name>
    <web-resource-collection>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>ADMIN</role-name>
    </auth-constraint>
</security-constraint> 
```

**Constraint 2**

```
<security-constraint>
    <display-name>Users</display-name>
    <web-resource-collection>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>USER</role-name>
    </auth-constraint>
</security-constraint> 
```

Here is the undesired url I am being redirected to:

```
javax.faces.resource/jsf.js.xhtml?ln=javax.faces&stage=Development 
```

Here is the start of the jsf.js.xhtml... which is displayed on Firefox

```
/**
 @project JSF JavaScript Library
 @version 2.0
 @description This is the standard implementation of the JSF JavaScript Library.
 */

/**
 * Register with OpenAjax
 */
if (typeof OpenAjax !== "undefined" &&
    typeof OpenAjax.hub.registerLibrary !== "undefined") {
    OpenAjax.hub.registerLibrary("jsf", "www.sun.com", "2.0", null);
}

// Detect if this is already loaded, and if loaded, if it's a higher version
if (!((jsf && jsf.specversion && jsf.specversion >= 20000 ) &&
      (jsf.implversion && jsf.implversion >= 3))) {

... 
```

On Internet Explorer 8.0.7 I get this popup

![js_popup](../Images/2fe7c534e97d26903b7ab7873418c77c.png)

**Notes**

I'm using Firefox 10.0.4, IE 8.03, Glassfish 3.1 w JSF2.0 lib, j_security_check, and my login realm setup is similar to [this](http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:02:33.757

尝试添加

```
<intercept-url pattern="/javax.faces.resource/**" access="hasRole('ROLE_ANONYMOUS')"/> 
```

到您的security.xml。请参阅下面的评论接受答案[JSF with Spring security - 登录后重定向到指定页面](https://stackoverflow.com/questions/14456791/jsf-with-spring-security-redirect-to-specified-page-after-login)

# java - JAXB：为同一元素解组具有多个名称的 xml

> ID：11128191
> 
> 赞同：11
> 
> 时间：2012-06-20T21:06:43.637
> 
> 标签：java, xml, binding, jaxb, unmarshalling

我认为这对于真正了解 JAXB 绑定文件的人来说很容易......

## 基本问题

如何配置 JAXB 以将多个元素解组到同一个类中？

*注意：我想避免向我的项目添加另一个依赖项（如 MOXy）。理想情况下，这可以通过注释或自定义绑定文件来完成。*

## 背景

我有一个 XML 文档，其中包含相同元素的许多变体——每个都具有完全相同的属性。使用下面的示例，我只关心“员工”，但 XML 指定了“董事、经理和员工”。出于我们的目的，这些都是同一个父类的子类，我们只需要使用父类（Employee），我们的对象模型没有或不需要子类的实例。

**我希望 JAXB 将任何`director, manager, or staff`元素实例绑定到一个`Employee`对象中。**

## 例子

输入：

```
<organization>
    <director>
        <fname>Dan</fname>
        <lname>Schman</lname>
    </director>    
    <manager>
        <fname>Joe</fname>
        <lname>Schmo</lname>
    </manager>    
    <staff>
        <fname>Ron</fname>
        <lname>Schwan</lname>
    </staff>    
    <staff>
        <fname>Jim</fname>
        <lname>Schwim</lname>
    </staff>    
    <staff>
        <fname>Jon</fname>
        <lname>Schwon</lname>
    </staff>    
</organization> 
```

输出：

解组此示例后，我将得到一个`Organization`具有一个属性的对象：`List<Employees> employees`其中每个员工只有一个名字和姓氏。

（注意：每个员工都是`Employee`NOT类型`Director/Manager/Staff`。解组时子类信息会丢失。我们也不关心编组返回——我们只需要从 XML 创建对象）

这可以在没有像 MOXy 这样的扩展的情况下完成吗？自定义 bindings.xjb 文件可以节省时间吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T21:21:30.200

这对应于选择结构。您可以`@XmlElements`为此用例使用注释：

```
@XmlElements({
    @XmlElement(name="director", type=Employee.class),
    @XmlElement(name="manager", type=Employee.class)
})
List<Employee> getEmployees() {
    return employees;
} 
```

如果您从 XML 模式开始，以下内容将有所帮助：

*   [http://blog.bdoughan.com/2011/04/xml-schema-to-java-xsd-choice.html](http://blog.bdoughan.com/2011/04/xml-schema-to-java-xsd-choice.html)

# oracle - Oracle 选择最近的日期记录

> ID：11128194
> 
> 赞同：15
> 
> 时间：2012-06-20T21:07:00.117
> 
> 标签：oracle

我正在尝试根据日期字段查找最新记录。当我在 where 子句中设置 latest = 1 时，出现错误。如果可能，请提供帮助。DATE 是我排序的字段。我已经尝试过 latest = 1 和 latest = '1'

```
SELECT 
STAFF_ID,
SITE_ID,
PAY_LEVEL,
ROW_NUMBER() OVER (PARTITION BY STAFF_ID ORDER BY DATE DESC) latest

 FROM OWNER.TABLE
WHERE   END_ENROLLMENT_DATE is null 
AND latest = 1 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-20T21:26:54.647

您不能在 WHERE 子句中使用选择列表中的别名（因为**SELECT 语句****[的评估顺序](http://tinman.cs.gsu.edu/~raj/sql/node22.html)**）

您也不能`OVER`在 WHERE 子句中使用子句 - “您可以在选择列表或 ORDER BY 子句中使用此子句指定分析函数。” （来自**[docs.oracle.com](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm#i97476)**的引文）

```
select *
from (select
  staff_id, site_id, pay_level, date, 
  max(date) over (partition by staff_id) max_date
  from owner.table
  where end_enrollment_date is null
)
where date = max_date 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T21:17:02.573

假设 staff_id + date 来自英国，这是另一种方法：

```
SELECT STAFF_ID, SITE_ID, PAY_LEVEL
  FROM TABLE t
  WHERE END_ENROLLMENT_DATE is null
    AND DATE = (SELECT MAX(DATE)
                  FROM TABLE
                  WHERE staff_id = t.staff_id
                    AND DATE <= SYSDATE) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T21:10:19.270

我想我会尝试像这样的MAX：

```
SELECT staff_id, max( date ) from owner.table group by staff_id 
```

然后链接到您的其他列：

```
select staff_id, site_id, pay_level, latest
from owner.table, 
(   SELECT staff_id, max( date ) latest from owner.table group by staff_id ) m
where m.staff_id = staff_id
and m.latest = date 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-28T13:24:57.250

```
select *
from (select
  staff_id, site_id, pay_level, date, 
  rank() over (partition by staff_id order by date desc) r
  from owner.table
  where end_enrollment_date is null
)
where r = 1 
```

# c# - 在 AssemblyInitialize 或 ClassInitialize 中检测 TestCategory 的方法？

> ID：11128196
> 
> 赞同：3
> 
> 时间：2012-06-20T21:07:01.933
> 
> 标签：c#, .net, visual-studio-2010, mstest

有没有办法以编程方式找出 TestCategory 在标记为 [AssemblyInitialize] 的方法中运行的内容？

我想做一些特定于某个测试类别的配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:34:52.387

不，TestCategory 仅由 MSTest 用于选择要运行的测试。测试运行时唯一可用的信息通过[TestContext](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testcontext.aspx)类公开。

一种（诚然令人讨厌的）方法是创建一个静态类或方法，可以懒惰地执行配置，并从具有指定类别的每个测试方法中调用它。但请注意，如果您操纵共享的全局状态，当 MSTest 以不同的顺序安排测试时，它可能会导致不可预知的行为。

在编写集成测试时，我发现最好在每个程序集中都有强依赖和配置内聚，即使这意味着您有许多小型测试程序集。换句话说，给定程序集中的所有测试都使用相同的设置并具有相同的依赖关系。这减少了先前测试更改某些全局状态（导致间歇性不稳定）的机会。它还经常使测试执行得更快，因为不同类别的测试不能重复地进行相互冲突的配置更改。

# php - 是否可以像在 CodeIgniter 中一样在 ExpressionEngine 中获取所有 post 变量？

> ID：11128198
> 
> 赞同：7
> 
> 时间：2012-06-20T21:07:32.720
> 
> 标签：php, codeigniter, post, expressionengine

在 CI 的控制器中，您可以通过执行以下操作来获取所有后变量：

```
$data = $this->input->post(); 
```

在 EE（由同一个人基于 CI 构建）中，类似的语法是：

```
$data = $this->EE->input->post(); 
```

唯一的问题是，您得到的不是包含所有数据的数组，而是布尔值 false。

是否有某种方法可以使用 ExpressionEngine 而不是 POST 超全局获取所有帖子数据的数组？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-04-09T11:56:52.810

尝试原生

```
$this->input->post(NULL, TRUE); // returns all POST items with XSS filter 
$this->input->post(); // returns all POST items without XSS filter 
```

参考：[https ://www.codeigniter.com/user_guide/libraries/input.html](https://www.codeigniter.com/user_guide/libraries/input.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-21T16:15:07.593

好的，对于 POST 的所有元素，在 EE 中获得类似于 CI 的结果，同时仍然利用 EE 的安全功能的方法如下：

```
foreach($_POST as $key => $value){
     $data[$key] = $this->EE->input->post($key);
} 
```

由于您可以按名称访问 POST 变量，因此在 $_POST 中循环访问它们，然后显式调用每个变量将产生所需的结果。

# c# - Lucene.net 字段包含多个值和搜索对象

> ID：11128200
> 
> 赞同：1
> 
> 时间：2012-06-20T21:07:35.767
> 
> 标签：c#, lucene.net

任何人都知道在包含多个值的字段上搜索的最佳方法是什么？

```
string tagString = "";
foreach(var tag in tags)
{
    tagString = tagString += ":" + tag;
}
doc.Field(new Field("Tags", tagString, Field.Store.YES, Field.Index.Analyzed); 
```

假设我想搜索所有带有“csharp”标签的文档，我最能实现这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T01:47:09.600

我认为您正在寻找的是将多个具有相同名称的字段添加到单个`Document`.

您所做的是创建一个`Document`并向其添加多个标签`Field`。

```
RAMDirectory ramDir = new RAMDirectory();

IndexWriter writer = new IndexWriter(ramDir, new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29));

Document doc = new Document();
Field tags = null;

string [] articleTags = new string[] {"C#", "WPF", "Lucene" };
foreach (string tag in articleTags)
{   
    // adds a field with same name multiple times to the same document
    tags = new Field("tags", tag, Field.Store.YES, Field.Index.NOT_ANALYZED);
    doc.Add(tags);
}

writer.AddDocument(doc);
writer.Commit();

// search
IndexReader reader = writer.GetReader();
IndexSearcher searcher = new IndexSearcher(reader);

// use an analyzer that treats the tags field as a Keyword (Not Analyzed)
PerFieldAnalyzerWrapper aw = new PerFieldAnalyzerWrapper(new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29));
aw.AddAnalyzer("tags", new KeywordAnalyzer());

QueryParser qp = new QueryParser(Lucene.Net.Util.Version.LUCENE_29, "tags", aw);

Query q = qp.Parse("+WPF +Lucene");
TopDocs docs = searcher.Search(q, null, 100);
Console.WriteLine(docs.totalHits); // 1 hit

q = qp.Parse("+WCF +Lucene");
docs = searcher.Search(q, null, 100);
Console.WriteLine(docs.totalHits); // 0 hit 
```

# c# - C++ int 向量到 c#

> ID：11128202
> 
> 赞同：1
> 
> 时间：2012-06-20T21:07:44.030
> 
> 标签：c#, c++, function, call

我正在做一个 C# 项目，我想`next_permutation`从 C++ 中的算法库中调用。我找到了在 c# 中调用 c++ 函数的方法，但我不知道如何从 c++ 获取向量并在 c# 中使用它（因为 next_permutation 需要一个 int 向量......）

这就是我目前正在尝试的：

```
extern void NextPermutation(vector<int>& permutation) 
{
    next_permutation (permutation.begin(),permutation.end()); 
}

[DllImport("PEDLL.dll", CallingConvention = CallingConvention.Cdecl)]
        private static extern void NextPermutation(IntPtr test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:11:45.770

这样做的唯一方法是通过 C++/CLI 包装类。但是，您必须将 int[] 或 List< int > 转换为 std::vector 作为单独的传递。如果您传入的向量中有很多数据......这将导致显着减速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:12:05.323

P/Invoke 对于 C++ 类型非常不利。您应该尝试将您的问题简化为 C 接口。在你的情况下，这很容易！

```
extern void NextPermutation(int *permutation, int count) 
{
    next_permutation (permutation, permutation + count); 
} 
```

# .htaccess - htaccess 网址问题

> ID：11128203
> 
> 赞同：0
> 
> 时间：2012-06-20T21:07:50.100
> 
> 标签：.htaccess

我正在尝试将所有页面（domain.com/xxx-xxx-xxx）重定向到新的 url domain.com/np/xxx-xxx-xxx 并且我尝试了以下规则...

```
RedirectMatch 301 ^/([^\-]+)-([^/]+)-([^/]+) /np/$1-$2-$3/ 
```

它可以工作，但它在 url 中附加了太多 /np，例如检查以下内容

我试过访问`http://www.domain.com/web-design-services`它，`http://www.domain.com/np/np/np/np/np/np/np/np/np/np/np/np/np/np/np/np/np/np/np/‌​np/web-design-services`你能解释一下为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:42:32.050

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^([^-]+-[^-]+-[^-]+)/?$ np/$1 [L,R] 
```

# java - 日志文件中的常见日期时间格式

> ID：11128209
> 
> 赞同：0
> 
> 时间：2012-06-20T21:08:18.267
> 
> 标签：java, datetime, date, extraction

我正在寻找日志中使用的常见日期时间格式列表（例如网络服务器、数据库等）。

更好的是可以从给定字符串（<10KB）中提取日期和时间的（java）库。

有人知道好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:22:04.467

这个库可能是一个很好的起点：[SimpleDateFormat](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html)

该文档包含对标准日期时间格式字符串的介绍。但是正如@Olaf 指出的那样，您需要事先指定格式，否则实际上无法区分某些日期。

看起来您想要做的是构建一系列可能匹配的日期格式，将它们全部应用于日期字符串，然后查看哪个日期最接近 Datetime.now()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:13:36.270

虽然这不能直接回答您的问题，但 Java 包含用于处理正则表达式的库。在此基础上编写自己的库将非常容易。我在使用正则表达式提取各种数据方面取得了很大成功。它肯定会小于 10kb，并且除了 JDK 之外不需要任何外部依赖项。

# php - 从缩略图预览视频

> ID：11128214
> 
> 赞同：0
> 
> 时间：2012-06-20T21:08:37.240
> 
> 标签：php, video-streaming, video-processing

最近偶然发现了一个股票录像网站[http://www.pond5.com/stock-video-footage/1/*.html](http://www.pond5.com/stock-video-footage/1/%2a.html)，当用户将鼠标悬停在缩略图上时，他们看到了视频的预览。我想重新创建它，因为它似乎是有用的练习，它可以让我锻炼我的网络发展肌肉。

当用户将鼠标悬停在缩略图上时，我希望能够预览视频。例如像[pond5.com](http://www.pond5.com/stock-video-footage/1/%2a.html)。音频不是必需的，但我希望它看起来像视频一样流畅，而不是每 5 秒包含一帧的视频预览。

在pond5.com上，我原本以为他们用的是gif，但播放起来很流畅。有些还包含音频。据我所知，音频不能在 .GIF 中使用

这是我必须上传第二个视频进行预览的情况吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:20:23.330

Pond5，您特别提到的网站，创建带有水印并降低质量的视频缩略图并将其存储。然后使用 JavaScript 播放它以动态加载包含 Flash 播放器的 div 元素。所以不涉及 GIF。您确实需要上传第二个视频，但该项目的步骤如下：

1.  服务器端视频缩略图/水印：不确定是否有任何 PHP 包可以胜任这一任务。我会用 C++ 或 C# 编写更强大的程序。如果您使用 C#，快速简便的解决方案将是 Microsoft Expression Encoder。

2.  Flash/Silverlight/HTML5 视频播放器：播放视频。

3.  客户端 JavaScript：加载精美的弹出窗口和上述视频播放器。请注意，您可能需要使用 PHP 和数据库引擎来加载所请求视频的缩略图 URL。

这就是 Pond5 和许多其他素材网站使用的内容，以及您需要做些什么才能获得类似结果的基本大纲。

# jquery - jQuery Mobile 隐藏导航栏按钮

> ID：11128218
> 
> 赞同：1
> 
> 时间：2012-06-20T21:09:11.297
> 
> 标签：jquery, css, jquery-mobile, cordova

我正在尝试在 jQuery 移动网站上实现导航栏。

```
 <div data-role="navbar">
        <ul>
            <li><a href="a.html">One</a></li>
            <li><a href="b.html">Two</a></li>
        </ul>
    </div><!-- /navbar --> 
```

我不允许发布图片，但我可以提供链接

（http://pupillogroup.com/matthiaspupillo/wp-content/uploads/2012/06/Screen-Shot-2012-06-21-at-9.35.00-AM.png）

问题是，我的网站显示的不是两个均匀间隔的按钮，而是两个 33% 按钮和一个空按钮。添加了一个类“ui-block-c ui-grid-null”

我没有对 css、jquery、js 或 jquerymobile.js 进行任何更改

这可能是一个复杂的问题，但我也在使用 phonegap.js，但这似乎不是问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:04:33.393

答案就在问题中。当我输入我的问题时，我重新输入了代码，它解决了问题。产生错误的代码

```
<div data-role="navbar">
    <ul>
        <li><a href="a.html">One</a></li>
        <li><a href="b.html">Two</a></li>
    <ul>
</div><!-- /navbar --> 
```

添加了附加按钮，因为我的关闭`<ul>`缺少斜线`</ul>`。jQuery 自动生成一个结束标记并创建`<li>`添加一个空按钮的空白。

# knockout.js - KO，Underscore.js：是否可以限制模板绑定？

> ID：11128220
> 
> 赞同：2
> 
> 时间：2012-06-20T21:09:21.637
> 
> 标签：knockout.js, underscore.js, throttling, knockout-2.0

使用带有 Underscore.js 模板引擎的 Knockout...

*   当我尝试将 2004 列表项绑定到`ul`DOM 元素时，IE8 阻塞并弹出[“运行缓慢的脚本”警告](https://stackoverflow.com/q/10316957/109941)。
*   起初，我认为[这个解决方案](https://stackoverflow.com/a/9985093/109941)可以解决我的问题。不幸的是，它没有。
*   所以我使用[了 Google Chrome 的 profiler](http://picturepush.com/+ZphJ)。它声称我的代码大部分时间都花在`a.c.options.update`.
    *   所以我被引导相信模板绑定正在执行[超过 500 万个连续的 Javascript 语句](https://stackoverflow.com/a/2345724/109941)，并且我需要以某种方式限制这个绑定，也许使用 setTimeout 语句。

* * *

我的两部分问题：

*   我是否正确地解决了这个问题？
*   如果是这样，我可以限制 Underscore.js 的模板引擎（在`foreach`其中呈现我的`ul`DOM 元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:15:03.630

我会使用虚拟滚动技术，因为无论如何您都无法同时显示 2000 多个项目。

谷歌“淘汰虚拟滚动”，你会发现一些有趣的实现。

编辑：[https](https://github.com/ericmbarnard/KoGrid) ://github.com/ericmbarnard/KoGrid这个看起来不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:45:35.110

如果它对其他人有帮助，那么模板渲染*不是*我的问题。

我解决了这个问题，消除了一些昂贵的[计算 observables](http://knockoutjs.com/documentation/computedObservables.html)并支持手动订阅。

# jquery - 在 div 容器中插入文本

> ID：11128222
> 
> 赞同：0
> 
> 时间：2012-06-20T21:09:39.653
> 
> 标签：jquery, html, textarea

我有一个文本区域，我在其中获取它的内容并通过 ajax 将其发送到数据库。当我得到这样的内容并将其插入 DIV 时，不考虑换行，因此将内容作为一个整体粘贴而没有 LF。

我使用 jQuery 模板打印查询结果，在模板中提到的 div 是：

```
<div class="message">${msg}</div> 
```

其中 ${msg} 是使用 CR 从数据库中收集的消息。

我能做些什么来避免这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:15:49.283

你用php，是吗？因此，您可以使用[nl2br()](http://www.php.net/manual/en/function.nl2br.php)将普通换行符 ( `\n`) 转换为 HTML 换行符 ( ) 。`<br />`

# linux - 将数据作为字节发送到 bash 中的管道

> ID：11128226
> 
> 赞同：3
> 
> 时间：2012-06-20T21:09:57.417
> 
> 标签：linux, bash

我最近花了一些时间尝试使用 bash 将一些数字作为字节写入管道（例如 10 as `0xA`， not `0x310x30`）。不幸的是，我无法这样做，不得不将脚本重写为 Python。有什么方法可以在 bash 脚本中以字节而不是字符的形式发送数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:15:26.073

`bash`您可以在using`$'...'`语法中指定任意字符。`$'\012'` `$'\x0a'`分别是八进制和十六进制的十进制值 10 的字节。请参阅`bash`引用下的手册页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T22:48:48.407

正如 chepner 所说，您可以输出任何值，例如：$'\012'。所以，一个简短的脚本：

```
convert() {
    printf \\$(printf '%03o' $1)
}
convert 122 | od -bc 
```

正确的打印将十进制参数转换为八进制数，第二次打印将打印八进制数，如上...例如十进制 65 将转换为字节'A'。

# javascript - 从文本框中即时选择文本会忽略 javascript 中的最后一个字符

> ID：11128227
> 
> 赞同：1
> 
> 时间：2012-06-20T21:10:12.000
> 
> 标签：javascript, jquery

我试图在用户输入时从文本框中获取文本，以便我可以解析它并在用户输入命令时相应地显示信息。但是，似乎我正在编写的函数是在将字母输入文本框之前从框中获取文本。如何防止函数在输入键入的字符之前从文本框中抓取内容？我考虑获取密钥的 id 并相应地更改输入的字符串，但我觉得应该有更好的方法。

编码：

```
$('#inputConsoleForm').keydown(function(event){
    //Get key code
    var code = (event.keyCode ? event.keyCode : event.which);
    //Get console text (doesn't behave as expected)
    var consoleCommand = document.inputConsoleForm.console.value;

    function parseConsoleCommand(consoleCommand) {
        /* Returns true if command is valid*/
    }
    if(code === 13) {
        event.preventDefault();
        if(!parseConsoleCommand(consoleCommand))
            alert("INVALID COMMAND LINE");
        else
            attemptExecute();//Runs the command
    }
    if(code === 32 || (code >= 48 && code <= 123) || code === 61 || code === 109 || code === 188 || code === 8) {
        if(parseConsoleCommand(consoleCommand)){
            $(document.inputConsoleForm.console).css("background-color", "#FFDFDF");
        }
        else{
            $(document.inputConsoleForm.console).css("background-color", "");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:17:11.280

您可以使用 HTML5`input`事件（回退到`propertychange`IE < 9 中的事件）。以下是详细说明如何执行此操作的两个答案：

*   [jQuery 键盘事件](https://stackoverflow.com/questions/5519936/jquery-keyboard-events/5524996#5524996)
*   [只捕捉改变输入的按键？](https://stackoverflow.com/questions/6488171/catch-only-keypresses-that-change-input/6490241#6490241)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:14:25.673

使用“更改”以获得最佳效果。您可以继续使用 keydown（或 keyup），但您必须从事件对象中获取按下的键并将其附加到文本字符串中。

# powershell - 在文件中搜索多个字符串

> ID：11128235
> 
> 赞同：2
> 
> 时间：2012-06-20T21:10:41.563
> 
> 标签：powershell

我目前有以下

```
Get-ChildItem -recurse -include file.ext | Select-String -pattern "c:" | group path | select name | export-csv results.csv 
```

如果我想用“c:”和“d:”找到东西，我将如何编写这个逻辑？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T21:13:53.350

`Select-String`需要一个正则表达式，所以你可以使用

```
Select-String '[cd]:' 
```

这将匹配`c:`或`d:`。

对于更复杂的，您可以使用交替构造：

```
Select-String '(mike|sally):' 
```

# usb - Win CE 6.0 上的“未识别的 USB 设备”

> ID：11128236
> 
> 赞同：0
> 
> 时间：2012-06-20T21:10:45.147
> 
> 标签：usb, windows-ce, driver

很长一段时间以来，我一直在努力解决有关在 Windows CE 6.0 中安装某些 USB 设备驱动程序的问题。

该设备是某种连接到 USB 端口的数字和模拟 IO 设备。它是 LabJack U3。

我按照所有说明将驱动程序 (labjackusb.dll) 和对应的注册表项放入 Windows CE 映像，但未正确检测到设备。

每次启动时都会出现一个小消息框，标题为“未识别的 USB 设备”和消息“输入此 USB 设备的驱动程序名称：”

无论我给它起什么名字都想工作。我尝试了dll的名称。注册表中的某些标题等等，但从未成功。

驱动程序不工作，设备也不工作。

客户支持无法帮助我，所以我在这里要求有人帮助我，至少要遵循一个步骤来尝试找到解决方案。

为什么操作系统不匹配 USB 设备和相应的驱动程序？我检查了一切一百万次，一切都已到位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:35:26.077

这可能会失败的原因有很多。第一的：

*   驱动程序肯定是*Windows CE*驱动程序吗？
*   它是为 CE 6.0（不是 5.0 或其他）构建的吗？
*   它是为您拥有的相同处理器架构而构建的吗？

真正调试此问题的方法是连接 KITL，放入调试版本的 device.exe，然后在插入设备时查看设备管理器实际在做什么。一种比试图猜测更好、更可靠的机制。

# visual-studio-2010 - 如何让 IntelliSense 在 Razor 助手的脚本标签内工作？

> ID：11128237
> 
> 赞同：2
> 
> 时间：2012-06-20T21:10:45.713
> 
> 标签：visual-studio-2010, razor, intellisense

如果您在`<script>`标签内并尝试使用`@Html.`. 任何人都知道如何启用或修复它？

请注意：这**不适**用于 javascript、jQuery 或类似的启用 IntelliSense 的可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:24:17.780

这似乎是在 HTML 编辑器中托管 JavaScript 导致的错误/复杂性：http: [//aspnet.uservoice.com/forums/41199-general-asp-net/suggestions/2706979-improve-the-razor-intellisense-inside -脚本块](http://aspnet.uservoice.com/forums/41199-general-asp-net/suggestions/2706979-improve-the-razor-intellisense-inside-script-block)

看起来它不会很快得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:55:24.060

只是一个快速的建议，像我在这里描述的那样分开 JavaScript 和 Razor： [https ://stackoverflow.com/a/11109799/538387](https://stackoverflow.com/a/11109799/538387)

# ms-word - 从 docx 文件中提取跟踪更改信息（插入的已删除文本）

> ID：11128246
> 
> 赞同：2
> 
> 时间：2012-06-20T21:11:31.783
> 
> 标签：ms-word

我希望在审核后从 Word 文档中提取插入和删除的文本。我已经能够使用以下宏提取评论：

```
Sub ExportComment()
Dim s As String
Dim cmt As Word.Comment
Dim doc As Word.Document
Dim workBk As Word.Document
Set workBk = ActiveDocument
Set doc = Documents.Add(Visible:=True)
Dim myRange As Range
Set myRange = doc.Range(0, 0)
Dim myTable As Table
Set myTable = doc.Tables.Add(Range:=myRange, NumRows:=workBk.Comments.Count, NumColumns:=6)
Dim i As Integer
i = 1
For Each cmt In workBk.Comments
myTable.Cell(i, 1).Range.Text = cmt.Index
myTable.Cell(i, 2).Range.Text = cmt.Scope.Information(wdActiveEndPageNumber)
myTable.Cell(i, 3).Range.Text = cmt.Initial
myTable.Cell(i, 4).Range.Text = cmt.Scope
myTable.Cell(i, 5).Range.Text = cmt.Range.Text
i = i + 1
Next
End Sub 
```

但似乎无法弄清楚如何从跟踪的更改中获取插入和删除的文本。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:28:32.883

正如您`Comments`在示例代码中使用集合一样，您将希望使用`Revisions`集合（例如，`Dim rev as Word.Revision`）。与 不同`Comments`，`Revisions`有一个 Type 属性，您可以使用它来识别不同种类的 Track Changes。以下是一些修订类型：

![在此处输入图像描述](../Images/00036a9ab59a6b259aab40c430bd24b1.png)

如果您想查看提取修订的示例 VBA 代码，请转到

[http://www.thedoctools.com/downloads/basTrackChanges_Extract.shtml](http://www.thedoctools.com/downloads/basTrackChanges_Extract.shtml)

在讨论提取修订的问题时，在下面的页面上引用了它：

[http://www.thedoctools.com/index.php?show=mt_trackchanges_extract](http://www.thedoctools.com/index.php?show=mt_trackchanges_extract)

# python - 穿着睡衣长时间投票

> ID：11128248
> 
> 赞同：0
> 
> 时间：2012-06-20T21:11:32.657
> 
> 标签：python, long-polling, pyjamas

我有一个用睡衣编写的应用程序，它必须检查新事件以更新浏览器中的事件表。将事件显示在它们发生的非常小的窗口内至关重要，以便操作员（准）实时了解问题。我的目标是延迟不到一秒。

目前我定期穿着睡衣进行 JSONRPC 调用，以查找新事件。该时间段已设置为 1 秒，因为更频繁的轮询将使我的服务器超载（我们正在为大量客户提供服务）。即使是 1 秒的周期也太低了。即使在这个低谷时期，我也无法实现不到一秒的目标（显然......）。目前我在 2-3 秒的范围内，这太高了。此外，这种策略过于矫枉过正，因为我的许多请求都没有接收到数据（因为大多数时候没有新的事件要显示）。

我想要的是对我的服务器进行一些长时间的轮询，等待事件发生，*然后*执行 JSONRPC 请求以获取我的数据。这样整个事件 -> 显示延迟将归因于数据处理（或网络延迟），这可能会被优化（但不能避免）。

所以我的问题是：我如何穿着睡衣进行长轮询？

# android - 使用 Google TV 的“Anymote 协议”存储“配对”信息

> ID：11128249
> 
> 赞同：1
> 
> 时间：2012-06-20T21:11:33.920
> 
> 标签：android, google-tv

我已经在 google-tv-samples (https://code.google.com/p/googletv-android-samples/source/browse/) 中实现了一个基于 BlackJackRemote 的应用程序，并且必须将应用程序与每次会话的 GTV。我查看了开源的 Google TV Remote 应用程序，但看起来它也需要配对每个会话。AnymoteLibrary 中是否内置了一些东西来保留配对会话，或者一些关于我自己实现类似东西的指针？

我的直觉是我需要直接修改 AnymoteLibrary 才能获得此功能，但也许它已经可用并且我忽略了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:55:58.650

是的。有可能的。事实上，Google TV 远程应用程序不会让您每次打开应用程序时都进行配对。只有当连接丢失时，您才需要重新配对。可以在 AnymoteLibrary 中复制相同的内容。我计划很快为它发布库的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:43:07.447

Able Remote 的创建者制作了一个非常好的库来处理这类事情：

[https://github.com/entertailion/Anymote-for-Java（Anymote](https://github.com/entertailion/Anymote-for-Java)的纯 Java 实现） [https://github.com/entertailion/Android-Anymote](https://github.com/entertailion/Android-Anymote)（使用上述实现的 Android 项目）

# php - 在 PHP 中检索 Spotify 播放列表

> ID：11128254
> 
> 赞同：0
> 
> 时间：2012-06-20T21:11:48.787
> 
> 标签：php, spotify, playlist

目前，我使用此代码使用 PHP 获取特定 Spotify 播放列表的信息（检索有关播放列表“最新”标题的信息）：

```
$retu = getsrc("https://embed.spotify.com/?uri=spotify:user:1121975814:playlist:20uXqHNuHw7kR2KWYfQYRb");
$expl = explode('<li class="track-',$retu);

$artist = get_string_between($expl[count($expl)-1],'style="">','</li>');
if(empty($artist)) die($retu);
$name = get_string_between($expl[count($expl)-1],'. ','"');
$id = get_string_between($expl[count($expl)-1],'title ',' ');
echo "$name ($artist) - $id<br>";

$src2 = getsrc("http://open.spotify.com/track/$id");
$cover = get_string_between($src2,'<img id="cover-art" src="','"');

function get_string_between($string, $start, $end)
{
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len);
}

function getsrc($url)
{
    $ch = curl_init();
    $cookies = tmpfile();
    $user_agent="Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1";
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
    curl_setopt($ch, CURLOPT_POST, 0);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookies);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookies);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);
    $retu = curl_exec($ch);

    curl_close($ch);
    return $retu;
} 
```

问题如下：

*   减缓
*   播放列表信息几乎从不刷新，或者如果刷新仍然包含过时的信息

你有更好的方法来获取播放列表曲目吗？我可以使用任何 API 吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:18:53.043

这应该会有所帮助。libspotify 的 php 包装器。

[https://github.com/vilhelmk/libspotify-php](https://github.com/vilhelmk/libspotify-php)

# iphone - 折叠 UITableView

> ID：11128257
> 
> 赞同：1
> 
> 时间：2012-06-20T21:12:02.890
> 
> 标签：iphone, objective-c, ios, uitableview

嘿大家我在我的应用程序中制作了一个 UITableView 并且当一个单元格被触摸时它会扩展我遇到的问题是无论我尝试什么它都不会崩溃，我相信它很容易我只是无法弄清楚唯一一次它确实崩溃是当它被点击另一个单元格时。

这是我的代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    selectedCellIndexPath = indexPath;

    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];

    if (selectedCellIndexPath) {
        selected = YES;
    }
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{        
    if(selectedCellIndexPath != nil  
       && [selectedCellIndexPath compare:indexPath] == NSOrderedSame)  
        return 150;

    return 44;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:17:44.920

您永远不会更改`selectedCellIndexPath`为`nil`，因此在选择新行之前不会更改当前选定的行。在`didSelectRowAtIndexPath`您应该将开头更改为以下内容：

```
if (selectedCellIndexPath == indexPath)
  selectedCellIndexPath = nil;
else
  selectedCellIndexPath = indexPath; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:03:06.683

```
In selectedCellIndexPath you are storing pointer of indexPath. It can change when you reload table, means indexPath object of same cell can be different when you select it second time.
It's safer if you store indexPath.section & indexPath.row 

      -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
        {    
               if(_section == indexPath.section && _row == indexPath.row)
               {
                  _section = -1;
                  _row = -1
               }
               else
               {
                  _section = indexPath.section;
                  _row = indexPath.row;
               }   
               [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];

                if (selectedCellIndexPath) {//change it as per your requirement
                    selected = YES;
                }
         }

      -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
        {        
               if(_section == indexPath.section && _row == indexPath.row)  
                   return 150;

               return 44;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:12:28.043

我已经创建了折叠 UITableView

[https://github.com/floriankrueger/iOS-Examples--UITableView-Combo-Box/zipball/master](https://github.com/floriankrueger/iOS-Examples--UITableView-Combo-Box/zipball/master) http://www.codeproject.com/Articles/240435/Reusable-collapsable-table-view-for-iOS

[https://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

它工作得很好..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T05:24:09.957

当您调用行重载函数时，它是否进入 cellForRow 委托函数？如果是这样，那么您应该在检查所选行后添加一些功能来折叠行。

# android - Android：如何在首次运行时将文件从资产加载到 SD？

> ID：11128260
> 
> 赞同：1
> 
> 时间：2012-06-20T21:12:08.093
> 
> 标签：android, file, sd-card, assets

如何将文件（SQLlite、文本等）从 Assets 文件夹加载到 SD 卡上，并且仅在应用程序首次运行时加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:12:08.670

这是我使用的方法。将此作为应用程序的主要活动，并使用它来启动您的实际应用程序活动。

```
public class StartUp extends Activity {

    /**
     * -- Called when the activity is first created.
     * ==============================================================
     **/
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        FirstRun();
    }

    private void FirstRun() {
        SharedPreferences settings = this.getSharedPreferences("YourAppName", 0);
        boolean firstrun = settings.getBoolean("firstrun", true);
        if (firstrun) { // Checks to see if we've ran the application b4
            SharedPreferences.Editor e = settings.edit();
            e.putBoolean("firstrun", false);
            e.commit();
            // If not, run these methods:
            SetDirectory();
            Intent home = new Intent(StartUp.this, YourMainActivity.class);
            startActivity(home);

        } else { // Otherwise start the application here:

            Intent home = new Intent(StartUp.this, YourMainActivity.class);
            startActivity(home);
        }
    }

    /**
     * -- Check to see if the sdCard is mounted and create a directory w/in it
     * ========================================================================
     **/
    private void SetDirectory() {
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) {

            extStorageDirectory = Environment.getExternalStorageDirectory().toString();

            File txtDirectory = new File(extStorageDirectory + "/yourAppName/txtDirectory/");//Example name for txt files
            // Create
            // a
            // File
            // object
            // for
            // the
            // parent
            // directory
            txtDirectory.mkdirs();// Have the object build the directory
            // structure, if needed.
            CopyAssets(); // Then run the method to copy the file.

        } else if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED_READ_ONLY)) {

            AlertsAndDialogs.sdCardMissing(this);//Or use your own method ie: Toast
        }

    }

    /**
     * -- Copy the file from the assets folder to the sdCard
     * ===========================================================
     **/
    private void CopyAssets() {
        AssetManager assetManager = getAssets();
        String[] files = null;
        try {
            files = assetManager.list("");
        } catch (IOException e) {
            Log.e("tag", e.getMessage());
        }
        for (int i = 0; i < files.length; i++) {
            InputStream in = null;
            OutputStream out = null;
            try {
                in = assetManager.open(files[i]);
                out = new FileOutputStream(extStorageDirectory + "/yourAppName/txt/" + files[i]);
                copyFile(in, out);
                in.close();
                in = null;
                out.flush();
                out.close();
                out = null;
            } catch (Exception e) {
                Log.e("tag", e.getMessage());
            }
        }
    }

    private void copyFile(InputStream in, OutputStream out) throws IOException {
        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
    } 
```

# android - 通知消失 - Android DownloadManager

> ID：11128263
> 
> 赞同：15
> 
> 时间：2012-06-20T21:12:22.203
> 
> 标签：android, download, notifications, notify, download-manager

解决方案：需要 API 11，请参阅下面的答案！

简单问题：使用实施的 DownloadManager 下载文件后，通知消失。下载后如何强制保留通知？

我尝试使用 VISIBILITY_VISIBLE_NOTIFY_COMPLETED，但我不知道如何使用它

感谢您为解决此问题提供的任何帮助；）

编辑：代码

```
public class BgDL extends Activity {

private DownloadManager mgr = null;
private long id;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);

    mgr = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);

    Request request = new Request(Uri.parse(getIntent().getStringExtra("URL")));

    id = mgr.enqueue(request
            .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "UPDATE")
            .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI|DownloadManager.Request.NETWORK_MOBILE)
            .setAllowedOverRoaming(false)
            .setTitle("APP update")
            .setDescription("New version "+getIntent().getDoubleExtra("OV", 0.0))

    );

   registerReceiver(receiver, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));

}
BroadcastReceiver receiver = new BroadcastReceiver () {

      public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action.equals(mgr.ACTION_DOWNLOAD_COMPLETE) ){
            unregisterReceiver(receiver);
            finishActivity(99);
        }
      }

}; 
```

}

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-20T21:27:55.647

在您的请求中添加正确的标志：

```
Request request = new Request(Uri.parse(getIntent().getStringExtra("URL")));

request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED); 
```

参考：

[http://developer.android.com/reference/android/app/DownloadManager.Request.html#setNotificationVisibility(int)](http://developer.android.com/reference/android/app/DownloadManager.Request.html#setNotificationVisibility(int))

> 控制下载管理器是否在下载运行或下载完成时发布系统通知。如果启用，下载管理器会通过系统 NotificationManager 发布有关下载的通知。默认情况下，仅当下载正在进行时才会显示通知。

[http://developer.android.com/reference/android/app/DownloadManager.Request.html#VISIBILITY_VISIBLE_NOTIFY_COMPLETED](http://developer.android.com/reference/android/app/DownloadManager.Request.html#VISIBILITY_VISIBLE_NOTIFY_COMPLETED)

> 此下载在进行中和完成后可见并显示在通知中。

# python - 使用 ctypes 在 Python 中调用库 libfprint 的函数

> ID：11128265
> 
> 赞同：2
> 
> 时间：2012-06-20T21:12:38.877
> 
> 标签：python, c, ctypes

我需要帮助来调用检测设备的函数（结构 C），所以我以这种方式调用该函数：

```
from ctypes import *
fp = CDLL('./libfprint.so.0')
fp.fp_discover_devs.argtypes = None
fp.fp_discover_devs.restype = c_char_p
ret = fp.fp_discover_devs()
print ret # is "0" 
```

即没有检测到任何设备，因为返回的是“0”。

请参阅函数的文档：

```
struct fp_dscv_dev\** fp_discover_devs (void) [read]

Returns:
a NULL-terminated list of discovered devices. 
```

我正在使用 Ubuntu，我下载了“fprint_demo”并且运行良好。您是否安装了缺少的任何软件包？

谢谢。

# objective-c - 如何从 NSMutableArray 中删除 NSDate 对象

> ID：11128267
> 
> 赞同：0
> 
> 时间：2012-06-20T21:12:44.477
> 
> 标签：objective-c, cocoa, nsmutablearray, nsarray

几天来，我一直在使用`NSArray`s 和`NSMutableArray`s 来存储对象。`NSDate`我注意到调用会从数组`[listOfDates removeObject:date1]`中删除所有对象。`NSDate`相反，我一直在这样做以删除对象：

```
 NSMutableArray *dateList; // Has Dates in it
  NSDate *dateToRemove;     // Date Object to Remove
  __block NSUInteger indexToRemove;
  __block BOOL       foundMatch = NO;
  [dateList enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if ([obj isEqualToDate:dateToRemove]) {
      indexToRemove = idx;
      foundMatch = YES;
      *stop = YES;
     }
  }];
  if (foundMatch) {
    [dateList removeObjectAtIndex:indexToRemove];
  } 
```

有没有更好的方法来做到这一点？也许是另一种数据结构？还是更简单的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:21:57.277

您应该使用您尝试过的第一种方法：

```
[listOfDates removeObject:date1]; 
```

这将从中删除 date1 和 ONLY date1 `listOfDates`。这不应该删除所有 NSDate 对象，`listOfDates`除非所有 NSDate 对象`listOfDates`都是`date1`.

您也可以使用 removeObjectAtIndex: 结合 indexOfObject: 来产生相同的效果，但这是额外的代码。

来自[NSMutableArray 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)`removeObject`参考：

> 此方法使用 indexOfObject: 定位匹配项，然后使用 removeObjectAtIndex: 将其删除。因此，匹配是根据对象对 isEqual: 消息的响应来确定的。如果数组不包含对象，则该方法无效（尽管它确实会产生搜索内容的开销）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:29:27.180

如果 dateList 中的所有日期都相等，`removeObject`则不会只删除一个，而是全部删除。要仅删除一个，较短的版本是获取第一个索引，然后删除该索引处的对象：

```
NSUInteger indexToRemove = [dateList indexOfObject:dateToRemove];
if (indexToRemove != NSNotFound) {
    [dateList removeObjectAtIndex:indexToRemove];
} 
```

# css - 自定义 Bootstrap Less 文件并使其易于更新到未来版本的最佳方法

> ID：11128270
> 
> 赞同：1
> 
> 时间：2012-06-20T21:12:56.213
> 
> 标签：css, twitter-bootstrap, less, frontend

我想知道在 Bootstrap 中自定义较少文件的最佳方法是什么，同时保持轻松更新到未来的 Bootstrap 版本。

只修改较少的文件很简单，但问题是，当下一版本的 Bootstrap 出来时，升级可能会很痛苦（因为所有的更改都已经与原始源深度混合。）

另一种做法会类似于开闭原则，即保持原有的less文件不变，添加我自定义的less文件覆盖我需要的CSS规则。当 Bootstrap 更新时，（希望）我可以简单地替换较少的文件，一切都会神奇地工作。然而，不管我的假设是否正确，相同的 CSS 规则会分散在更多的地方并且难以管理。此外，我们覆盖的 CSS 越多（不是出于兼容性或其他目的），我们浪费的带宽就越多。

我知道这在很大程度上取决于 Bootstrap 的作者如何处理框架的结构甚至 CSS 规则的命名，但我仍然想听听大家的意见。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:33:47.140

我参与了几个项目，我必须做几乎相同的事情。正如您所说，显然更好的选择是编写自己的更少文件。保持干净和有条理与您如何编写自己的 CSS 有关，对吧？

我的建议是使用您自己的 Less 文件，然后重用一些 Bootstrap 类来指定您的属性。

此外，如果您正确使用 CSS3 继承，可以最大限度地减少带宽浪费。

# c++ - 编译 Boost 链接库 (Ubuntu)

> ID：11128274
> 
> 赞同：0
> 
> 时间：2012-06-20T21:13:23.267
> 
> 标签：c++, boost, ubuntu, compilation

`sudo apt-get install libboost-all-dev`我在最新版本的 Ubuntu 上安装了 Boost via 。现在我想编译一个使用该`Boost.Serialization`库的项目，它[需要被链接](https://stackoverflow.com/questions/846566/using-boost-on-ubuntu/846625#846625)。

我尝试了以下许多变体，但均未成功：

```
gcc -I /usr/lib code.cpp -o compiled /usr/lib/libboost_serialization.a 
```

和

```
gcc -I /usr/lib code.cpp -o compiled -l libboost_serialization 
```

错误信息是：

```
error: ‘split_member’ is not a member of ‘boost::serialization 
```

`

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:19:36.653

您在编译代码而不是链接时遇到问题。在那个阶段，它与图书馆无关。那时，您必须链接到某些东西的事实是无关紧要的。

确保您`boost/serialization/split_member.hpp`直接或间接包含并首先编译您的代码。

附带说明，`-I`标志用于指定包含文件而不是库的路径。对于库，使用`-L`. 但是，如果您已经从 apt 安装了 Boost，那么它应该已经在路径中，因此不需要额外`-I`或`-L`不需要。并且当您指定时`-l`，您必须`lib`从库名称的开头发出，并且不要在标志及其参数之间放置空格。假设工作代码，这样的事情应该做：

```
g++ code.cpp -o compiled -lboost_serialization 
```

我还建议您传递`-Wall`标志以使编译器更加详细，并警告您代码中可能存在的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:23:32.190

拆分成员是编译的问题，其中 boost 假设存在对序列化和反序列化的拆分调用。

[http://www.ocudert.com/blog/2011/07/09/a-practical-guide-to-c-serialization/](http://www.ocoudert.com/blog/2011/07/09/a-practical-guide-to-c-serialization/)

# javascript - Dojo：以编程方式设置 CheckBox 标签

> ID：11128275
> 
> 赞同：3
> 
> 时间：2012-06-20T21:13:34.573
> 
> 标签：javascript, checkbox, label, dojo

让我先说我看到[了](https://stackoverflow.com/questions/3001966/dojo-programatically-setting-checkbox-label-for-adding-on-tablecontainer)关于 CheckBox 标签主题的另一个问题，该问题在一年前被问到并得到了很好的回答。

我对答案感到困惑，希望有人能澄清一下，或者从那时起引入了新的 dojo 功能，这使我能够在不诉诸 HTML 的情况下做到这一点。

因此，事不宜迟，我想知道如何以编程方式为复选框创建标签。

我有一个这样的复选框：

```
 this.pubBoxId = new dijit.form.CheckBox({
            label: "IdChannel",
            checked: false,
            channel: that.idChannel
        }, that.name + "_PBI"); 
```

如您所见，我尝试编辑“标签”字段，但标签实际上从未出现在页面上。我有多个要添加到 ContentPane 的复选框，并且只希望在复选框的左侧或右侧添加一个标签。有什么方法可以做到这一点而不必编写单独的 HTML？

此外，为每个单独的标签制作单独的 ContentPane 会很痛苦，因为我计划拥有多少 CheckBox。

感谢您的阅读，如果需要进一步说明，请告诉我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:47:47.613

它并不完美，但这里有一个关于如何做到这一点的示例：http: [//jsfiddle.net/cBPy4/](http://jsfiddle.net/cBPy4/) 一般来说，您必须记住 CheckBox 小部件只会显示框，您必须手动处理标签...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T14:55:51.450

Dojo 1.6 火狐、Chrome

[http://jsfiddle.net/cBPy4/257/](http://jsfiddle.net/cBPy4/257/)

```
dojo.require("dijit.form.CheckBox");

dojo.ready(function(){    
    // https://bugs.dojotoolkit.org/ticket/11611
    var widgetNode = dojo.doc.createElement("DIV");
    chk = dojo.create("input", {id:"cbox", type:"checkbox"}, widgetNode);
    lbl = dojo.create("label", {innerHTML:"Check me", "for":"cbox"}, widgetNode);
    dojo.style(lbl, "marginLeft", ".5em");

    var cbWidget = new dijit.form.CheckBox({}, chk);
    cbWidget.startup();
    cbWidget.domNode.appendChild(lbl);

    dojo.place(cbWidget.domNode, "container");
}); 
```

# grep - xargs：字符串连接

> ID：11128277
> 
> 赞同：8
> 
> 时间：2012-06-20T21:13:40.333
> 
> 标签：grep, xargs

```
zgrep -i XXX XXX | grep -o "RID=[0-9|A-Z]*" |
   uniq | cut -d "=" -f2 |
   xargs -0 -I string echo "RequestID="string 
```

我的输出是

```
RequestID=121212112
8127127128
8129129812 
```

但我的要求是在所有输出之前加上请求 ID。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T20:49:51.130

我有一个类似的任务，这对我有用。这可能是您正在寻找的：

`zgrep -i XXX XXX | grep -o "RID=[0-9|A-Z]*" | uniq | cut -d "=" -f2 | xargs -I {} echo "RequestID="{}`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-20T21:24:39.497

尝试`-n`选项`xargs`。

> -n 最大参数
> 
> 每个命令行最多使用 max-args 参数。如果超出大小（请参阅 -s 选项），将使用少于 max-args 的参数，除非给出 -x 选项，在这种情况下 xargs 将退出。

例子：

```
$ echo -e '1\n2' | xargs echo 'str ='
str = 1 2

$ echo -e '1\n2' | xargs -n 1 echo 'str ='
str = 1
str = 2 
```

# ios - 为 xcodebuild 提供 .mobileprovision 文件

> ID：11128284
> 
> 赞同：27
> 
> 时间：2012-06-20T21:14:06.880
> 
> 标签：ios, xcodebuild, provisioning-profile

我正在设置 Jenkins 以自动化 iOS 构建。是否有可能将未添加到 Xcode 中的配置工具中的 .mobileprovision 文件提供给 xcodebuild？

我知道我可以使用 PROVISIONING_PROFILE 和 PROVISIONING_PROFILE[sdk=iphoneos*] 但它们需要将配置文件添加到管理器中。

我知道我可以用 xcrun 进行操作。但在运行 xcrun 之前，我必须使用 xcodebuild 成功签署应用程序。

**有什么方法可以将配置文件（.mobileprovision）提供给xcodebuild？**

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-23T07:57:01.923

我们对此有一个解决方案 - 本质上，您需要做的是通过将 .mobileprovision 文件复制到以移动配置文件的 UUID 命名的目录来“安装”它。这就是双击 .mobileprovision 文件时 Xcode Organizer 实际执行的操作。

有一个名为 mpParse 的小程序可以从脚本使用的 mobileprovision 文件中提取 UUID - 代码中的下载链接。然后将 mobileprovision 文件复制到正确的位置非常简单。

这是我为此制作的一个 shell 脚本：

```
#!/bin/sh

# 2012 - Ben Clayton (benvium). Calvium Ltd
# Found at https://gist.github.com/2568707
#
# This script installs a .mobileprovision file without using Xcode. Unlike Xcode, it'll 
# work over SSH.
#
# Requires Mac OS X (I'm using 10.7 and Xcode 4.3.2)
#
# IMPORTANT NOTE: You need to download and install the mpParse executable from     http://idevblog.info/mobileprovision-files-structure-and-reading
# and place it in the same folder as this script for this to work.
#
# Usage installMobileProvisionFile.sh path/to/foobar.mobileprovision

if [ ! $# == 1 ]; then
 echo "Usage: $0 (path/to/mobileprovision)"
 exit
fi

mp=$1

uuid=`/usr/libexec/PlistBuddy -c 'Print UUID' /dev/stdin <<< $(security cms -D -i ${mp})`

echo "Found UUID $uuid"

output="~/Library/MobileDevice/Provisioning Profiles/$uuid.mobileprovision"

echo "copying to $output.."
cp "${mp}" "$output"

echo "done" 
```

您可以直接从[https://gist.github.com/2568707下载脚本](https://gist.github.com/2568707)

运行脚本后，您可以在 xcodebuild 中使用 PROVISIONING_PROFILE 和 PROVISIONING_PROFILE[sdk=iphoneos*] 来创建您的应用程序。我们在生产中使用它。

编辑：仅供参考，我不久前在这里基本上问了这个问题（[可以从命令行“安装”一个 Xcode .mobileprovision 文件吗？](https://stackoverflow.com/questions/10398456/can-an-xcode-mobileprovision-file-be-installed-from-the-command-line/10399834#10399834)）并在似乎没有人知道的情况下提出了上述问题:-)

**更新：** 作为 mpParse 的替代方案，可以使用苹果工具： `/usr/libexec/PlistBuddy -c 'Print UUID' /dev/stdin <<< $(security cms -D -i path_to_mobileprovision)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T09:58:56.203

如果你使用 fastlane 的 sigh ，你可以将它的输出分配给一个变量 `provision_id=sigh`

如果 sigh 有参数，这也有效：`sigh(...)`

这是唯一对我有用的脚本：

`var=$(grep UUID -A1 -a | grep -io "[-A-Z0-9]{36}")'

与： `"$var.mobileprovision"`

# c++ - stringstream 不会转换为正确的数值

> ID：11128287
> 
> 赞同：0
> 
> 时间：2012-06-20T21:14:17.803
> 
> 标签：c++

[已解决] 请参阅下面的答案。

我正在尝试使用 stringstream （名为 ss ）将一些字符串转换为整数，而将一些字符串转换为 double 等，但是这些值都出现了错误。我有一个名为 vec 的字符串向量，初始化如下：
[0] = ID # in hex
[1] = phone number
[2] = last name
[3] = first name
[4] = sales number
[5] = percent销售额
现在我遍历向量并将值放入 int、string 或 double 中：

```
std::string lname, fname, pnum;
int ID;
double sales, percent;

if(vec.size()!=6) {
    //throw exception
}
else {
    ss<<std::hex<<vec[0];
    ss>>ID;

    pnum = vec[1];
    lname = vec[2];
    fname = vec[3];

    ss<<vec[4];
    ss>>sales;

    ss<<vec[5];
    ss>>percent;
} 
```

但是每个客户的输出看起来都是这样的。我的整数总是 1 而我的双打总是这个奇怪的数字是多少？

客户制造： Langler Tyson 1 7667230284 2.12303e-314 2.12201e-314

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:30:20.747

您需要在数字之间引入一个分隔符才能将它们提取出来：

```
ss << vec[0] << " ";
ss >> ID;
ss << vec[4] << " ";
ss >> sales;
ss << vec[5] << " ";
ss >> percent; 
```

除此之外，您需要在提取 ID 后恢复为原始十进制格式：

```
ss << hex;
ss << vec[0] << " ";
ss >> ID;
ss << dec; 
```

此外，因为您使用相同的`ss`流来提取向量元素，所以在提取最后一个向量元素后，流的状态是错误的。您需要在进一步插入/提取之前清除错误状态。使用新流也可以解决问题：

```
ss = stringstream();
ss << hex;
ss << vec[0] << " ";
ss >> ID;
ss << dec;
ss << vec[4] << " ";
ss >> sales;
ss << vec[5] << " ";
ss >> percent; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:38:07.310

我让它工作。这是我整个方法的截图：http: [//i.imgur.com/lFb87.png](http://i.imgur.com/lFb87.png)我认为由于我使用 ss 加载矢量，重用它来获取值导致了问题。当我添加第二个 stringstream ss2 时，一切正常。

# php - Codeigniter 中的单例库？

> ID：11128290
> 
> 赞同：4
> 
> 时间：2012-06-20T21:14:38.550
> 
> 标签：php, codeigniter, singleton, codeigniter-2

我使用单例模式创建了一个自定义库。为什么要通过这种方式？因为我需要能够在没有**$this->**引用的情况下调用我的函数，例如，我可以执行以下代码：

```
function foo() {
    MyLibrary::instance()->foo();        
} 
```

然后我可以像这样在控制器中调用我的函数：

```
function foo(); 
```

代替

```
$this->mylibrary->foo(); 
```

我遇到了麻烦，因为当最好的方法是“读取”静态实例时，CodeIgniter 会尝试实例化我的库。

为什么我需要这样做？

我的自定义库必须从位于应用程序文件夹之外的 /plugins 目录中的外部 php 文件中注册“钩子”。看：

*   /应用
*   /插件
*   /plugins/helloworld.php

这是我的加载器库：

```
class Loader{

    public static $instance;
      protected $hooks;

    private function __construct($params = array()){
        $this->hooks= array();
        $this->includePlugins();
    }

    public static function instance()
        {
            if (!self::$instance)
            {
                self::$instance = new Loader();
            }

            return self::$instance;
        }

    public function includePlugins()
    {
        include_once "/plugins/helloworld.php";  
    }

    public function do_action($hook= "after")
    {
        foreach ($this->actions[$hook] as $function)
        {
            call_user_func_array($function, array());
        }

    }

    public function add_action($hook, $function, $priority)
    {
        if ($hooks !== false)
        {
        $this->actions[$hook][] = $function;
        }
        else
        {
        echo "hook name is unavalaible";
        }
    }

}

/**
 * Functions using the Singleton instance !!!
*/

function do_action($hook)
{
    Loader::instance()->do_action($hook);
}

function add_action($hook, $function, $priority)
{
    Loader::instance()->add_action($hook, $function, $priority);
} 
```

不，我的 helloworld.php（插件）看起来像这样：

```
add_action('right_here', 'show_message', 11);
function show_message()
{
    echo "hello world!";
} 
```

最后，我可以在我的控制器/视图中调用我的函数 do_action 以打印消息，如下所示：

```
do_action('right_here'); 
```

请注意，我所有的重要函数都由允许我使用单例实例的全局函数调用。但是我遇到了两个问题：

1.  Codeigniter 需要我的结构是公开的才能实例化。在这里，我需要带上我的单身人士。
2.  如果我让它公开，将创建几个实例，并且该库将不再按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:24:53.987

我已经解决了这个问题:)

为了创建单例库，您必须：

*   在 system/core/Codeigniter.php 中包含您的库，如下所示： require_once("/path/to/library.php");

*   **使用&**符号让您的实例返回，如下所示：

单身人士：

```
public static function &instance()
{
    if (!self::$instance)
        {
            self::$instance = new Loader();
        }

        return self::$instance;
} 
```

*   准备好使用您的功能。此外，您可以在库中包含 CI 对象。

# c++ - 在 C++ 中存储队列大小的问题

> ID：11128291
> 
> 赞同：2
> 
> 时间：2012-06-20T21:14:40.487
> 
> 标签：c++, size, queue

我正在尝试将队列的大小存储在 C++ 中的 int 中。我对此很陌生，但我不知道我可能做错了什么。我收到此错误消息：

> “错误：在'free_men'中请求成员'size'，它是非类类型'int'”

这是代码：我初始化了队列，并且只是用 n 个数字填充它。

```
queue<int> free_men;
for(int i = 0; i < n; ++i) {
    free_men.push(i + 1);
}
int free_men = free_men.size(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:16:10.137

`queue`和 的变量名相同`int`。重命名`int`变量。

```
queue<int> free_men;
for(int i = 0; i < n; ++i) {
    free_men.push(i + 1);
}
int free_men_size = free_men.size(); 
```

令人惊讶的是，错误消息并没有更明确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:16:52.310

您有一个重复的变量名称。

您将看到的不仅仅是您提到的编译器消息，因为在同一范围内重新声明`free_men`(as ) 是非法的。`int`

```
queue<int> free_men;
for(int i = 0; i < n; ++i) {
    free_men.push(i + 1);
}
int number_of_free_men = free_men.size(); // NOTE fixed name clash 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T21:16:53.183

您在这里有两个变量，它们在同一范围内具有相同的名称。如果将最后一行更改为：

```
int free_men_size = free_men.size() 
```

事情可能会更好。

# jsf - 标签不评估对象

> ID：11128294
> 
> 赞同：1
> 
> 时间：2012-06-20T21:14:54.873
> 
> 标签：jsf, foreach, jstl

我有以下代码：

```
<h:outputText value="#{lecture.lectureName}" />

<c:forEach items="#{criterionController.getCriteriaForLecture(lecture)}" var="criterion">

     <h:outputText value="#{criterion.criterionName}"  />
     <h:commandLink value="Edit"/>
     <h:commandLink value="Delete"/>

</c:forEach> 
```

输出文本部分工作正常并显示它应该显示的内容，因此这证明`lecture`对象已设置。然而 for each 标签给出了一个空指针异常。当我调试代码时，我看到在调用方法时，讲座对象被视为 null `getCriteriaForLecture()`。

如何解释这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:40:06.583

如果该`lecturer`变量又由 JSF 迭代组件（例如`<h:dataTable>`、`<ui:repeat>`等或可能是`<p:tabView>`）根据您[之前的问题](https://stackoverflow.com/questions/11126074/primefaces-commandbutton-action-attribute-not-being-called)设置，则可能会发生这种情况。

可以在此处找到有关此行为的更详细说明：[JSTL in JSF2 Facelets... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)简而言之，JSTL 标记在构建视图期间运行，而不是在渲染视图期间运行。在您的特定情况下，该`lecturer`变量仅在呈现视图期间可用，因此始终`null`在构建视图期间，当 JSTL 运行时。

要解决它，请改用普通的 JSF 组件`<ui:repeat>`。

```
<ui:repeat value="#{criterionController.getCriteriaForLecture(lecture)}" var="criterion">
     <h:outputText value="#{criterion.criterionName}"  />
     <h:commandLink value="Edit"/>
     <h:commandLink value="Delete"/>
</ui:repeat> 
```

更好的是*根本不在*吸气剂中进行业务操作。只需设置`List<Criterion>`a 的属性`Lecture`即可。

```
<ui:repeat value="#{lecture.criterions}" var="criterion">
     <h:outputText value="#{criterion.criterionName}"  />
     <h:commandLink value="Edit"/>
     <h:commandLink value="Delete"/>
</ui:repeat> 
```

另请参阅[为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)

# google-chrome-extension - 用于访问和修改窗口的 chrome 内容脚本

> ID：11128296
> 
> 赞同：0
> 
> 时间：2012-06-20T21:15:02.010
> 
> 标签：google-chrome-extension, sandbox

我正在编写一个 chrome 扩展，它是一个“内容脚本”

我想将谷歌地图注入网页。

**问题**：似乎我无法在`window`对象上添加函数，因此我无法定义回调函数供 googlemaps 在加载时调用。

人们通常如何处理`window`?

--
网上有人建议我这样做：

> 您可以使用 JavaScript URL 轻松完成此操作：window.location = "javascript:obj.funcvar = function() {}; void(0);"

但是当我这样做时，我得到了一个`access denied`错误。似乎很多关于这个问题的搜索结果都已经过时了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:22:26.067

内容脚本与它们运行的​​页面有一个[单独的 JavaScript 执行环境](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment)，因此它们不能改变页面本身的 JS 变量。但是，内容脚本与页面共享 DOM，因此您可以[将`<script>`标签](http://javascript.about.com/library/bladdjs.htm)注入到 DOM 中，该标签将在实际页面的执行环境中加载和运行。

# java - 验证期间未使用 Spring MessageSource

> ID：11128302
> 
> 赞同：3
> 
> 时间：2012-06-20T21:15:11.653
> 
> 标签：java, spring, hibernate, validation, spring-mvc

在我的表单支持对象的 Spring 验证期间，我无法在 messages.properties 中获取我的消息。

应用程序配置.xml：

```
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
  <property name="basename" value="messages" />
</bean> 
```

WEB-INF/classes/messages.properties：

```
NotEmpty=This field should not be empty. 
```

表单支持对象：

```
...
  @NotEmpty
  @Size(min=6, max=25)
  private String password;
... 
```

当我遍历 BindingResult 中的所有错误并输出 ObjectError 的 toString 时，我得到以下信息：

```
Field error in object 'settingsForm' on field 'password': rejected value []; codes [NotEmpty.settingsForm.password,NotEmpty.password,NotEmpty.java.lang.String,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [settingsForm.password,password]; arguments []; default message [password]]; default message [may not be empty] 
```

如您所见，默认消息是“可能不是空的”，而不是我的消息“此字段不应为空”。

如果我将 messageSource 注入控制器并输出以下内容，我确实会收到正确的消息： messageSource.getMessage("NotEmpty", new Object [] {"password"}, "default empty message", null);

那么为什么不使用我的messages.properties 进行验证呢？我正在运行 Spring 3.1.1。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T07:08:46.930

默认情况下，HibernateValidator 会从`/WEB-INF/classes/ValidationMessages.properties` 它自己直接读取这个文件中获取它的所有消息，而不是通过 Spring MessageSource。

如果您想要来自 Spring Message 源的翻译，请在[LocalValidatorFactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/validation/beanvalidation/LocalValidatorFactoryBean.html#setValidationMessageSource%28org.springframework.context.MessageSource%29)上设置一个。这确实需要您在调度程序 servlet 中手动设置一个验证 bean，而不是依赖于 mvc:annotation-driven。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:04:37.360

当您想使用 JSR 303 验证为任何字段设置自定义消息时，您需要在属性文件中的消息键中指定 bean 名称（LoginForm）和字段名称（密码）。格式为 CONSTRAINT_NAME.COMMAND_NAME.FIELD_NAME

```
NotEmpty.loginform.password=This field should not be empty. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T03:13:26.540

@NotEmpty 有一个可以设置的消息属性。由于您没有设置它，因此它使用默认消息。

```
@NotEmpty(message="{NotEmpty}") 
```

应该给你你正在寻找的东西。

# android - Android HttpClient 反应式身份验证

> ID：11128304
> 
> 赞同：1
> 
> 时间：2012-06-20T21:15:23.427
> 
> 标签：android, http-authentication, apache-httpclient-4.x

我正在尝试设置一个 Android 应用程序，我可以在其中访问任意代理或 HTTP 身份验证后面的 URL。也就是说，应用程序不会立即知道 URL 是否需要身份验证，而是会通过向用户询问凭据来响应身份验证请求，就像它对 Android 浏览器所做的那样。

我最近研究了[如何为 WebView 请求用户身份验证](https://stackoverflow.com/questions/11106769/http-proxy-in-android-emulator-works-for-browser-not-for-webview)，响应来自浏览器的身份验证请求，打开一个对话框，并将用户推进到目标页面。我希望对`HttpClient`.

在我看来，基本过程是：

1.  通过 执行请求`HttpClient.execute`。
    *   如果不是带有正确标头的 401 或 407，则触发“完成”回调。
    *   否则...
2.  弹出一个对话框，询问用户名和密码。
3.  通过在 HTTP 客户端中设置 http 凭据`HttpClient.getCredentialsProvider().setCredentials`。
4.  返回步骤 1，直到用户点击取消或服务器放弃。在这种情况下，使用收到的最后一个响应触发“失败”回调。

我是在正确的轨道上还是有人已经实现了类似的东西？我不想在这方面重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:27:54.200

上述反应式方法确实有效。响应任意 401 或 407 请求是有效的，需要注意的是您需要支持您希望遇到的每个身份验证方案，因此类似的东西`UsernamePasswordCredentials`不适用于 NTLM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:18:59.710

您应该尝试apache 站点上的[身份验证示例](http://hc.apache.org/httpcomponents-client-ga/examples.html)

```
httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope("localhost", 443),
                    new UsernamePasswordCredentials("username", "password")); 
```

java文件的直接链接是[http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientAuthentication.java](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientAuthentication.java)

# c# - 使用 mvc 4 如何从获取请求中获取 xml？

> ID：11128305
> 
> 赞同：0
> 
> 时间：2012-06-20T21:15:23.980
> 
> 标签：c#, xml, asp.net-web-api

当我使用浏览器访问页面时，它是 xml，但当我请求 url 时，它是 json。mvc 4 api中是否有一些东西使它只输出json到通过程序的请求，或者我可以取回xml。注意：这发生在桌面应用程序和网页中，因此它必须是某种设置，这是桌面给我的错误：`Data at the root level is invalid. Line 1, position 1.`是的，我正在正确加载文档，我使用 json 检查了值它回来了。

```
 private void Plus_Click(object sender, EventArgs e)
        {
            string FValue = id.Text;
            string SValue = id2.Text;
            string ending;
            string url = "http://localhost:56254/api/add?id=" + FValue + "&id2=" + SValue;
            XmlDocument xdoc = new XmlDocument();

            xdoc.Load(url);

            XmlNode xNode = xdoc.SelectSingleNode("End");
            ending = xNode.InnerText;
            Answer.Text = ending;
        } 
```

这是我的桌面应用程序代码。我获取xml的代码就在这里：

```
namespace Calculator.Controllers
{
    using Calculator.Models;
    public class AddController : ApiController
    {

        public Calcs GetAddition(int id, int id2)
        {
           double end = id + id2;
            Calcs[] calcs = new Calcs[] { new Calcs { FValue = id, SValue = id2, End = end } };
            return calcs[0];
        }
    }
} 
```

这是计算：

```
namespace Calculator.Models

    {
        public class Calcs
        {
            public int FValue { get; set; }
            public int SValue { get; set; }
            public double End { get; set; }
        }
    } 
```

这是浏览器输出的内容：

```
<Calcs xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/Calculator.Models">
<End>60</End>
<FValue>55</FValue>
<SValue>5</SValue>
</Calcs> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:19:19.353

您需要在请求中设置接受标头类型。但是，由于您忽略了提供足够的信息来了解您是如何请求数据的，因此我只能为您提供帮助。\

编辑：

这里的问题是 XmlDocument.Load 没有发送包含可接受格式的 xml 的接受标头（真的有点愚蠢，有人会认为它会）。

您可能必须使用 WebRequest 来检索文档，并指定一个指示“application/xml;q=0.9”的接受标头。

您可以在这里找到解决方案：[C# Won't Load A certain XML, But Works in Browser](https://stackoverflow.com/questions/7789038/c-sharp-wont-load-a-certain-xml-but-works-in-browser)

# php - 带有缩略图生成的 Facebook 风格图像上传

> ID：11128308
> 
> 赞同：4
> 
> 时间：2012-06-20T21:15:26.983
> 
> 标签：php, codeigniter, jquery, thumbnails, image-upload

好的，我知道这样的问题存在于 StackOverflow 和网络上的其他地方的多种形式中，但它们都没有指向我真正需要的东西（也许我错过了一个更适合我的问题的问题）。

我需要一个 Facebook 风格的图片上传机制，使用 Codeigniter 和 javascript/jquery。这是它应该做的 -

1.  使用*单个*文件上传控件（或任何可点击控件），打开“选择文件”对话框窗口，并允许用户从中选择多个图像。（我知道这还不能在 IE 中完成，而且我并不真正关心在 IE 中无法使用的多文件选择）。

2.  一旦用户选择了文件，页面应该显示一系列进度条（就像 Facebook 一样）。随着每张图片上传，对应的进度条达到100%（如果实现起来更简单，我愿意放弃图形进度条，换成显示进度百分比的文字），图片的缩略图显示在旁边完成的进度条（或文本）。此时，用户应该可以选择通过单击取消按钮来删除上传的图像（我想我可以自己完成这部分工作）。

3.  上传可以是顺序的（就像 Facebook 那样），也可以是异步的（我发现一些上传库以这种方式工作）。

4.  最重要的（也是难倒我的部分）是缩略图生成。我知道有一些 HTML5/CSS3 技术允许您在文件实际上传*之前*显示缩略图，直接从用户的硬盘驱动器中提取它们。但这在 IE8 中不起作用，虽然我不担心多图像选择在 IE8 中不起作用，但我需要生成缩略图以跨浏览器工作，包括 IE8（决定浏览器兼容性不是问题我可以指挥，所以请不要想出一个“螺丝IE！”解决方案）。

我曾尝试使用 uploadify（我对使用 Flash 没有任何限制），但似乎无法根据我的需要对其进行自定义。虽然 uploadify 确实显示了进度条，但我无法根据我上面描述的行为找到动态生成（和显示）缩略图的方法。我知道缩略图生成如何在 PHP 上工作，只是无法弄清楚如何与进度指示器一起实现它。我在寻找合适的 jQuery/ajax 调用吗？

任何帮助和/或指针将不胜感激。我承认我可能错过了一个可以解决我的问题的 StackOverflow 问题，所以请引导我访问该页面，或任何其他您认为对我有帮助的页面。请随意建议上传库而不是uploadify，您认为我可能会觉得有用。

提前致谢。感谢您阅读所有这些 - 我尽力使问题正确描述！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:41:33.967

我使用[Jquery 文件上传](https://github.com/blueimp/jQuery-File-Upload)效果很好。它确实需要 IE 处于兼容模式，但适用于 chrome/firefox。

更新。它现在声称支持 IE 6.0+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:42:52.483

我将重点关注第 4 点。它可以完成，但你最终会使用 iframe（是的，我现在）。它们可以小 1 像素，但如果您想创建缩略图预览，则需要它们。一个好的起点是这里：[http ://www.zurb.com/playground/ajax_upload](http://www.zurb.com/playground/ajax_upload)

至于创建实际的预览图像（较小的版本），您可以使用 CI 的图像库。让我知道它是如何工作的。

# android - 有没有办法在 android 2.0 上设置滚动视图的垂直滚动位置？

> ID：11128309
> 
> 赞同：0
> 
> 时间：2012-06-20T21:15:40.463
> 
> 标签：android

> **可能重复：**
> [我可以在 Android 中以编程方式滚动 ScrollView 吗？](https://stackoverflow.com/questions/6438061/can-i-scroll-a-scrollview-programmatically-in-android)

我有一个聊天程序，可以将聊天添加到滚动视图内的文本视图中。底部代表最后一次聊天。我想拥有它，所以每次添加新的 chts 时，它都会向下滚动。

当我查看 sdk 时，有一个名为 setVerticalScrollPos 的函数，但文档说它需要 sdk 11，即 android 3.0。

Quastion，1.有没有办法在android 2.0中设置垂直滚动位置 2.现在我的开发环境设置为android 3.0，（因为广告）但我的目标市场是2.0及以上。我在我的 2.0 的 android 设备上测试运行它。我的代码在 android 2.2 上运行时可以调用 setVerticalScrollPos 吗？或者也许我可以有一个 if then 只调用 android 3.0 或更高版本设备的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:20:37.190

SDK 中没有调用 的方法`setVerticalScrollPos()`，即使在 3.0 中也是如此，但没关系。

`scrollTo()`并且`smoothScrollTo()`从一开始就在 SDK 中，可以在任何视图上调用（平滑变体为滚动设置动画）。

高温高压

# c# - asp.net TreeView - 回发后保持相同状态

> ID：11128310
> 
> 赞同：1
> 
> 时间：2012-06-20T21:15:42.203
> 
> 标签：c#, asp.net, treeview

我有一个树视图

```
<asp:TreeView ID="tvCategories"   runat="server" ShowLines="false"  ShowExpandCollapse="true"  ExpandDepth="0"   /> 
```

默认情况下，列表不会被扩展。它有一个加号 (+) 来展开子节点。

当我展开子节点并单击子节点以显示内容时。一旦它显示内容，TreeView 就会恢复到默认状态（折叠）。

在单击子节点之前如何使其保持原样.... 已花费？（回发后保持相同的状态）？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:33:20.807

您需要做的是保持树视图的状态。一旦提出请求，您的状态就会丢失。为了保持树视图的状态，您可以使用以下之一

1.  会议
2.  饼干
3.  视图状态。

所以你需要做

1：保存树视图状态

2：重定向

并以完全相同的顺序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T10:01:18.723

我发布的有点晚，但我遇到了同样的问题，我找到了一个更简单的解决方案：

1.  `ViewStateMode="Enabled"`在树视图中
2.  仅填充电视`if !postback`

希望有所帮助:-)

# java - 在签名的 Java 小程序中存储客户端数据

> ID：11128312
> 
> 赞同：1
> 
> 时间：2012-06-20T21:15:49.923
> 
> 标签：java, cookies, applet, signed

我正在尝试从 java applet 存储一些数据，以便以后可以使用同一个 applet 读取它。例如，我希望用户在我的小程序第一次执行期间输入用户名并将其保存在某处，以便在我的小程序的以下运行中它可以恢复它。

在 javascript 中，我将按照 key=param 模式在 document.cookie 中写入我的数据，但我在 Java 中没有找到类似的东西。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:19:35.367

[“Java 教程”中的“访问 Cookie”](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/accessingCookies.html)将帮助您...

# data-visualization - 如何在给定时间序列的情况下绘制 Pearson 相关性？

> ID：11128313
> 
> 赞同：1
> 
> 时间：2012-06-20T21:15:54.200
> 
> 标签：data-visualization, time-series, gsl, pearson

我正在使用本网站[http://blog.chrislowis.co.uk/2008/11/24/ruby-gsl-pearson.html](http://blog.chrislowis.co.uk/2008/11/24/ruby-gsl-pearson.html)中的代码来实现 Pearson Correlation 给定两个时间序列数据，如下所示：

```
 require 'gsl'

  pearson_correlation = GSL::Stats::correlation(
    GSL::Vector.alloc(first_metrics),GSL::Vector.alloc(second_metrics)
  ) 
```

这将返回一个数字，例如 -0.2352461593569471。

我目前正在使用 highcharts 库并为其提供两组时间序列数据。鉴于我对这两个集合都有一个有限的时间序列，我可以用这个数字（-0.2352461593569471）做一些事情来创建第三个时间序列来显示这条曲线的斜率吗？如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:37:39.140

不，相关性并没有告诉你任何关于最佳拟合线的斜率的信息。它只是告诉您一个变量（或一个时间序列，在这种情况下）中的可变性有多少可以被另一个解释。这里有一个相当好的描述：http: [//www.graphpad.com/support/faqid/1141/](http://www.graphpad.com/support/faqid/1141/)。

在特定情况下如何处理数据在很大程度上取决于您要实现的目标。您是否试图证明变量 X 导致变量 Y？如果是这样，您可以从删除时间序列开始，将数据视为配对值，并使用线性回归。如果您试图找到 X 和 Y 如何随时间变化的模型，您可以查看[多元线性回归](https://en.wikipedia.org/wiki/Multivariate_linear_regression)（不过我对此不太熟悉）。

# solr - Solr 请求处理程序可以修改查询字符串吗？

> ID：11128322
> 
> 赞同：0
> 
> 时间：2012-06-20T21:16:25.153
> 
> 标签：solr, edismax, requesthandler

我正在尝试改进使用 StandardRequestHandler 的现有 solr 搜索。我想切换到基于 dismax 的处理程序，但是我需要从“fieldname:value”查询中删除字段名。

是否可以在将`q`参数值传递给请求处理程序时对其进行修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:13:21.787

我没有深入研究这一点，但我认为您可能想要创建自己的`QueryParser`，可能会扩展您现在正在使用的那个。您想要实现的结果确实需要一些编码。

另一方面，当然最好修改客户端，这样你就不需要破解 Solr。

# backbone.js - 我们如何在 Backbone.js 中表示深层模型层次结构

> ID：11128325
> 
> 赞同：6
> 
> 时间：2012-06-20T21:16:29.037
> 
> 标签：backbone.js

我看到有一些技术可以在 Backbone 中建立深度模型，但是单个模型的分层集合呢？

一个明显的例子是类别树。所以，我们可以有一个类别模型，它有几个属性，“名称”、“类型”、“颜色”等等。

我们使用的是 js，而不是使用关系 db 样式的父 ID，因此我们希望将数据表示为 json。

是否可以利用主干来支持（可能是通过增加集合）包含树中单个模型实例的数据结构（使得模型和子模型都是同一模型的实例）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T21:29:44.070

看看[Backbone-Relational](https://github.com/PaulUithol/Backbone-relational)或[supermodel.js](http://pathable.github.com/supermodel/)。

这些项目提供了比默认实现更好的模型嵌套形式。

我们只是嵌套 Backbone 模型，例如：

```
var MyModel = Backbone.Model.extend({});
var MySubModel = Backbone.Model.extend({});

var model = new MyModel({submodel: new MySubModel({color: 'blue'})}); 
```

我们覆盖了这些`toJSON`方法：

```
// nested models!  Might just override the internal representation of this...
_.extend(Backbone.Model.prototype, {
  // Version of toJSON that traverses nested models
  toJSON: function() {
    var obj = _.clone(this.attributes);
    _.each(_.keys(obj), function(key) {
      if(!_.isUndefined(obj[key]) && !_.isNull(obj[key]) && _.isFunction(obj[key].toJSON)) {
        obj[key] = obj[key].toJSON();
      }
    });
    return obj;
  }
});

_.extend(Backbone.Collection.prototype, {
  // Version of toJSON that traverses nested models
  toJSON: function() {
    return this.map(function(model){ return model.toJSON(); });
  }
}); 
```

因此，当我们嵌套模型时，JSON 表示看起来是正确的。不过，您必须注意`parse`模型上的方法 - 当您从服务器取回 JSON 时，您将不得不在那里生成所有子模型和集合，以使其正常工作。

# javascript - 在 play 2.0 框架上将 javascript 导入 html

> ID：11128326
> 
> 赞同：5
> 
> 时间：2012-06-20T21:16:33.177
> 
> 标签：javascript, playframework, playframework-2.0

我在播放框架上的 html 中包含本地 javascript 文件时遇到问题。路径是正确的，我什至尝试将 javascript 文件包含在同一目录中。但是，从 Web 导入（我正在使用的主要库）工作得很好。

```
@(execId: String)

<html>

<head>
<title>Timeline</title>

<script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>

<script type="text/javascript"

src="http://code.jquery.com/jquery-latest.js"></script>

<script type = "text/javascript" src = "../../public/javascripts/profilesJS/stack.js">  </script>

</head>

<body>
<input id="profiles" type="button" value="Profiles" />
<script type="text/javascript">
        alert(tester());
    </script>

</body>

</html> 
```

javascript文件看起来像这样

```
function tester(){

return "test";

} 
```

我得到的错误是：

```
tester is not defined 
```

在警报线上

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T21:53:50.430

根据[资产文档](http://www.playframework.org/documentation/2.0.1/Assets)（和一般路由），您需要在模板中使用反向路由：

```
<script type="text/javascript" src='@routes.Assets.at("javascripts/profilesJS/stack.js")'></script> 
```

它会为您的文件构建正确的`src`路径`/public/javascripts/profilesJS/stack.js`（默认情况下会是路由配置`/assets/javascripts/profilesJS/stack.js`）

# mysql - 在带有 OR 条件的 MySQL JOIN 中使用索引

> ID：11128339
> 
> 赞同：12
> 
> 时间：2012-06-20T21:17:18.783
> 
> 标签：mysql, indexing

我正在运行一个看起来像这样的查询

```
SELECT parent.field, child.field
FROM parent
JOIN child ON (child.id = parent.id 
    OR child.id = parent.otherid) 
```

然而，这真的很慢（大约 10 万条记录，并且在真实版本中加入了其他表），但尽管尝试了索引

```
parent.id (PRIMARY),  
parent.otherid,  
child.id (PRIMARY), 
and a composite index of parent.id and parent.otherid 
```

在进行此连接时，我无法让 MySQL 使用这些索引中的任何一个。

我读到 MySQL 每个连接只能使用一个索引，但是当 JOIN 包含 OR 条件时，它是否可以使用复合索引却找不到任何地方。

这里有谁知道是否可以让这个查询引用索引？如果是这样，怎么做？

* * *

我的解决方案

（所以不会让我在 atm 下面回答我自己的问题）

一系列调整并提出了一个相当不错的解决方案，它保留了 JOIN 和聚合其他表的能力。

```
SELECT parent.field, child.field
FROM parent
JOIN (
    SELECT parent.id as parentid, 
    # Prevents the need to union
    IF(NOT ISNULL(parent.otherid) AND parent.otherid <> parent.id, 
       parent.otherid, 
       parent.id) as getdataforid
    FROM parent
    WHERE (condition)
) as foundrecords
    ON foundrecords.parentid = parent.id
JOIN child ON child.id = parent.getdataforid 
```

为了速度，子查询中需要一个条件来减少放置在临时表中的记录数量，但是我在外部查询上有大量额外的连接，一些连接到子查询，一些连接到父查询（带有一些聚合）所以这个最适合我。

在许多情况下，联合会更快、更有效，但由于我正在过滤父级，但想要来自子级的额外数据（父级自我引用），联合为我带来了额外的行，我无法合并。只需将 parent 连接到自身并在外部查询中为 where 条件设置别名，就可以找到相同的结果，但这对我来说非常有效。

感谢 Jirka 的 UNION ALL 建议，这就是促使我来到这里的原因:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T21:24:52.867

从理论上讲，您的查询使一个孩子有两个不同的父母成为可能，这将使其成为非常不标准的术语。但是，让我们假设您的数据模式使这成为不可能。

然后以下使用单独的索引为您提供相同的结果，每列一个索引。

```
SELECT parent.field, child.field
FROM parent
JOIN child ON child.id = parent.id 

UNION ALL

SELECT parent.field, child.field
FROM parent
JOIN child ON child.id = parent.otherid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T22:04:03.387

```
EXPLAIN 
SELECT parent.fld, child.fld 
  FROM parent JOIN child ON child.id = parent.id  
 UNION ALL 
SELECT parent.fld, child.fld
  FROM parent JOIN child ON child.id = parent.otherid
   AND parent.otherid <> parent.id 
```

使用 MyISAM 引擎的表：

```
id  select_type   TABLE       TYPE    possible_keys  KEY      key_len  ref                  ROWS  Extra
1   PRIMARY       parent      ALL     PRIMARY                                               9999
1   PRIMARY       child       eq_ref  PRIMARY        PRIMARY  4        test.parent.id       1
2   UNION         parent      ALL     parent_ix1                                            9999  USING WHERE
2   UNION         child       eq_ref  PRIMARY        PRIMARY  4        test.parent.otherid  1
    UNION RESULT  <union1,2>  ALL 
```

使用 InnoDB 引擎的表：

```
id  select_type   table       type    possible_keys  key         key_len  ref            rows  Extra
1   PRIMARY       child       ALL     PRIMARY                                            9903
1   PRIMARY       parent      eq_ref  PRIMARY        PRIMARY     4        test.child.id  1
2   UNION         child       ALL     PRIMARY                                            9903
2   UNION         parent      ref     parent_ix1     parent_ix1  5        test.child.id  1     Using where
    UNION RESULT  <union1,2>  ALL 
```

# windows - 在 Windows 中运行一次的限制

> ID：11128342
> 
> 赞同：2
> 
> 时间：2012-06-20T21:17:48.150
> 
> 标签：windows, escaping, registry, runonce, max-size

我已将以下命令添加到 runonce 注册表中，以便在启动时运行特定的 python 脚本，其中包含一长串参数，如下所示

```
HKLU..."fio-test"=C:\Python26\python.exe C:\Users\Administrator\Desktop\workspace\test_Windows_dc_policy_flush_on_restart\test_Windows_dc_policy_flush_on_restart.py -I /dev/fct4 -b E -v "C:\Users\Administrator\Desktop\workspace\test_Windows_dc_policy_flush_on_restart\test_actions.p" 
```

但是，该命令将永远不会运行，并且不会为该脚本删除注册表。IE。Windows 启动管理器的 runonce 部分将忽略该条目。我可以找到该条目并在适当的位置查看它，并查看其他不太复杂的脚本运行并从注册表中删除。我的问题如下..一旦我遇到跑步的限制是什么？我遇到最大命令长度问题了吗？或者，是某种类型的未转义字符导致脚本被忽略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:35:46.697

[任务计划程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)在启动这些类型的任务方面更加灵活和强大。您应该能够使用它来绕过命令长度限制。

# ruby-on-rails - 对虾、对虾和模板

> ID：11128347
> 
> 赞同：2
> 
> 时间：2012-06-20T21:18:18.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, prawn, prawnto

对不起我的英语不好。

我正在尝试在我的应用程序上使用 prawn 和 prawnto。我有一个 pdf 文件用作模板，该 pdf 文件只有一页，该页面只有页眉和页脚，然后，我的控制器上有这个：

```
 def index

    @search = User.search(params[:search])
    @users = @search.paginate(:page => params[:page])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users   }
      format.xml  { render xml: @users }
      format.xlsx { export2xlsx(@search.relation.to_xlsx :columns => [:cod_cia, :cod_emp, :login, :email]) }
      format.pdf  { render :layout => false }
      prawnto :prawn => { :template => "#{Rails.root}/app/assets/pdfs/template1.pdf" }
    end

  end 
```

一切都很好，除了模板仅在第一个生成的页面上呈现，其他页面没有模板。

有人知道如何在所有生成的页面中重复模板吗？

提前考虑。问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T17:28:01.790

不确定 prawnto，但是使用 prawn 你可以告诉它不要自动创建第一页。然后使用模板手动添加每个页面。

```
filename = "/path/to/template.pdf"
Prawn::Document.generate("output.pdf", :skip_page_creation => true) do
  start_new_page(:template => filename)
  text "First page"
  start_new_page(:template => filename)
  text "Second page"
end 
```

# google-app-engine - 将 google web 应用程序项目提交到 github

> ID：11128350
> 
> 赞同：2
> 
> 时间：2012-06-20T21:18:35.303
> 
> 标签：google-app-engine, version-control, github

我有一个想在 github 上托管的 google web 应用程序项目。我熟悉github的基础知识。我已经提交了简单的 java 项目。但是我如何提交一个谷歌网络项目，以便用户可以从 github 导入项目并创建它。

我只是提交所有的源代码。那么任何想要导入项目的人只需创建一个新项目并将代码从 github 重新导入到他/她新创建的项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:23:32.347

您应该提交所有源代码项目文件夹，例如：

```
YourProjectFolder/
    app.yaml
    application.py
    lib/
    foo/ 
```

一位潜在用户将：

1.  从 github 克隆源文件夹。
2.  从 GAE Sdk 仪表板中选择*Add existing*，指定克隆的源文件夹。

# php - Firefox 13.0.1 将我锁定在会话之外

> ID：11128353
> 
> 赞同：1
> 
> 时间：2012-06-20T21:18:39.670
> 
> 标签：php, macos, session, firefox, login

（请记住，这是在 OSX Snow Leopard 上）

我不知道如何很好地描述这个奇怪的问题，或者即使这是这样做的正确地方，但是 Firefox 突然将我锁定在我本地主机上的开发站点上的登录会话之外。我正在保存一些数据，然后被重定向到登录页面。我尝试登录，但失败了……失败了……又失败了一些。

我检查了登录 PHP 脚本，它报告了用户名和密码匹配，但由于某种原因，我实际上无法*登录*。我觉得好像会话在创建后立即被自动删除。我尝试重新启动浏览器，然后是我的计算机。没有。我降级回 Firefox 12，没有雪茄。我试着清除我的缓存和cookies，同样的事情。

我尝试使用 Safari 登录，它*成功了*！与 Chrome 相同。所以问题显然是Firefox。会不会是我的 Firefox 安装已损坏，并且仅使用旧版本安装*它*不会做任何事情？我必须完全删除它然后安装它？我在这里真是束手无策。

* * *

**更新：**

在 Firefox 12 中创建新的 Firefox 配置文件后，我能够登录（但只能使用*新*配置文件）。然后我重新更新到 Firefox 13 并且也能够成功登录（同样，仅使用*新*配置文件）。

*然后我想到域*一定有问题（在我假设的 Firefox 配置文件数据中）。我创建了一个域**别名**，并使用*它*使用损坏的配置文件登录，它工作！因此，我已将范围缩小到域和配置文件。也许这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:49:00.487

由于您已将范围缩小到与您的个人资料有关，因此请尝试一次从有问题的个人资料中删除一项，以查明个人资料中的问题/损坏文件。

由于您使用的是 MAC，因此您的个人资料应位于以下两个位置之一：

~/图书馆/Mozilla/Firefox/Profiles/

~/库/应用程序支持/Firefox/Profiles/

（来源：[这里](http://kb.mozillazine.org/Profile_folder_-_Firefox)）

以下是一些可能有用的其他链接：

*   [http://kb.mozillazine.org/Standard_diagnostic_%28Firefox%29](http://kb.mozillazine.org/Standard_diagnostic_%28Firefox%29)
*   [http://kb.mozillazine.org/Profile_backup](http://kb.mozillazine.org/Profile_backup)

# mobile - 移动设计 CSS？

> ID：11128354
> 
> 赞同：2
> 
> 时间：2012-06-20T21:18:51.893
> 
> 标签：mobile

我试图通过使用不同的样式表来制作我的第一个移动网站，但我注意到它比我预期的要复杂。当我测试我的 iPhone 4S 和我妻子的安卓系统时，一切都变得不一样了。我需要用什么使它像 Facebook 的移动网站？在哪里无法放大或缩小，而这一切都只适合您的屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:21:37.807

为了确保您的页面不需要缩放，`meta`请在 HTML 中添加以下标记：

```
<meta name="viewport"
 content="width=device-width, initial-scale=1.0;
 maximum-scale=1.0; user-scalable=0"></meta> 
```

它执行以下操作：

*   视口的宽度缩放到您设备的宽度 ( `width=device-width`)
*   初始和最大比例设置为`1.0`
*   用户缩放（缩放）被禁用

如果您正在寻找让您的网站在移动设备、平板电脑以及桌面设备上顺畅运行的方法，那么关键字就是**响应式设计**（或响应式网页设计）。阅读[A List Apart 上的这篇文章](http://www.alistapart.com/articles/responsive-web-design/)以开始使用。此外，对于非常流行（非常类似于 Facebook）的响应式布局，请参阅[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。对于高度移动优化的 UI 组件，我真的建议看看[jQuery Mobile](http://jquerymobile.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:22:28.807

查看 Apple 在[Safari 开发人员库](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)中的文档。基本上，您需要使用`meta`标签来告诉浏览器您的网站具有移动功能。您也可以使用这些标签自定义捏缩放样式和内容。

具体来说，你想要

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' /> 
```

应该注意，Safari 开发者库中描述的一些内容仅适用于 iOS 设备。不过，上面的代码应该可以在 Android 和 iOS 上运行。

# c++ - 更改 std::map 的排序模式

> ID：11128355
> 
> 赞同：3
> 
> 时间：2012-06-20T21:18:52.603
> 
> 标签：c++, stl, stdmap

我正在创建一个`std::map<a,b>`使用`a::operator<`.

有没有办法在某个时候改变地图的类型，以便从现在开始由另一个排序算法排序`a`？它也需要重新排序地图的当前内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T21:23:29.083

您必须创建另一个地图，并将第一个地图的元素复制到第二个地图中，如下所示：

```
std::map<a,b> map1;
... // operations on map1
std::map<a,b,Sorter> map2(map1.begin(), map1.end()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:23:18.603

答案在于声明`std::map`

```
template < class Key, class T, class Compare = less<Key>,
           class Allocator = allocator<pair<const Key,T> > > class map; 
```

`Compare`模板参数可用于定义地图排序的比较：

> **Compare** : 比较类：一个接受两个键类型参数并返回一个布尔值的类。表达式 comp(a,b)，其中 comp 是此比较类的对象，a 和 b 是键值，如果在严格的弱排序操作中将 a 放置在比 b 更早的位置，则应返回 true。这可以是实现函数调用运算符的类，也可以是指向函数的指针（参见构造函数的示例）。这默认为 less，它返回与应用小于运算符 (a < b) 相同的值。地图对象使用这个表达式来确定容器中元素的位置。地图容器中的所有元素始终遵循此规则进行排序。

我从[这里引用了这个](http://www.cplusplus.com/reference/stl/map/)

# c# - 在 Windows Phone 7 中更改列表框项目的颜色

> ID：11128359
> 
> 赞同：0
> 
> 时间：2012-06-20T21:19:01.153
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我有一个 Windows Phone 7 应用程序的列表框，它显示从 XML 提要解析的信息。我希望能够更改列表框中字体的颜色，具体取决于从 XML 提要解析的值。我已经搜索并不能完全找到我正在寻找的东西。这是我的代码：

```
foreach (var item in doc.Descendants("station"))
{
    if (item.Element("name").Value == dest)
    {
     listBox1.Items.Add(item.Element("name").Value);
     listBox1.Items.Add("Last Updated:");
     listBox1.Items.Add(item.Element("date").Value);
     listBox1.Items.Add(item.Element("time").Value);

         foreach (var item1 in item.Descendants("eta"))
         {
          listBox1.Items.Add(item1.Element("destination").Value);
          listBox1.Items.Add(item1.Element("estimate").Value);
         }//foreach

    }//if
}//outer foreach 
```

我想要的是，例如，

```
if item.Element("name").Value="Fremont" and item1.Element("destination").Value="Daly City", 
then listBox1.Items.Add(item1.Element("destination").Value); 
```

例如，将显示绿色文本（对于“名称”和“目的地”的不同值，依此类推）。我发现的大多数示例都是针对 WPF 或 WP7 以外的其他东西的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:23:38.240

*根据您已有的内容*，最简单的方法是可能将`ListBoxItem`对象添加到列表框中，而不仅仅是字符串值。

然后你可以设置`ListBoxItem.Foreground`和其他属性。

```
// psuedocode, but reasonably close?
var lbi = new ListBoxItem { Content = item.Element("name").Value };
if (yourcondition)
    lbi.Foreground = new SolidColorBrush(Colors.Green);
listBox1.Items.Add(lbi); 
```

虽然这确实有效，但 McAden 的回答在*理想情况下更正确*，因为您应该真正考虑使用 DataBinding 和模板等东西，而不是在代码/代码隐藏中完成所有这些工作。他们将使您的生活在未来变得更加轻松**！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:29:00.920

这个答案正在使用 DataBinding，它看起来不像您正在使用，但您可以公开`doc.Descendants("station")`为属性并将列表框绑定到它。然后，为列表框项定义 DataTemplate 以显示您希望显示的字段部分。对于颜色，您可以将 绑定`Foreground`到项目并定义一个转换器来转换项目以返回它应该是什么颜色。

# xcode - 如何监控从 iOS 模拟器发出的网络调用

> ID：11128362
> 
> 赞同：133
> 
> 时间：2012-06-20T21:19:11.250
> 
> 标签：xcode, networking, ios-simulator, network-monitoring

我正在尝试像 Firebug 一样监控从应用程序到我的服务器的调用。我找不到在 iOS 模拟器或 xCode 中查看的方法。

有没有办法在不嗅探所有流量的情况下做到这一点？如果没有，你会推荐什么工具？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-20T21:31:16.940

就个人而言，我使用**[查尔斯来做](http://www.charlesproxy.com/)**那种事情。
启用后，它将监控每个网络请求，显示扩展请求详细信息，包括对 SSL 和各种请求/响应格式（如 JSON 等）的支持...

您还可以将其配置为仅嗅探对特定服务器的请求，而不是整个流量。

它是商业软件，但有试用版，恕我直言，它绝对是一个很棒的工具。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-21T04:48:50.427

如果您只想查看 HTTP/HTTPS 流量，中间人代理（如其他答案所建议的）是一个很好的解决方案。[Burp Suite](http://portswigger.net/burp/)很不错。不过配置起来可能会很痛苦。我不确定您将如何说服模拟器与之交谈。您可能必须将本地 Mac 上的代理设置为代理服务器实例才能拦截，因为模拟器将使用您本地 Mac 的环境。

我发现数据包嗅探的最佳解决方案（尽管它仅适用于*实际*的 iOS 设备，而不适用于模拟器）是使用`rvictl`. [这篇博](http://useyourloaf.com/blog/2012/02/07/remote-packet-capture-for-ios-devices.html)文有一篇不错的文章。基本上你这样做：

```
rvictl -s <iphone-uid-from-xcode-organizer> 
```

然后，您使用 Wireshark（或您最喜欢的工具）嗅探它创建的界面，完成后使用以下命令关闭界面：

```
rvictl -x <iphone-uid-from-xcode-organizer> 
```

这很好，因为如果你想对模拟器进行数据包嗅探，你也必须涉足到本地 Mac 的流量，但`rvictl`会创建一个虚拟界面，只显示你插入 USB 的 iOS 设备的流量港口。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-02-13T22:21:56.603

最近我发现了一个[git repo](https://github.com/yagiz/Bagel)让它变得简单。

你可以试试看。

这是一个应用程序的屏幕截图： [![在此处输入图像描述](../Images/66935e61eb1fd44b166ff7db1502abda.png)](https://i.stack.imgur.com/uGJJ3.png)

最好的祝福。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-05-23T03:30:22.413

在 Mac 上轻松运行的免费开源代理工具是[mitmproxy](http://mitmproxy.org/)。

该网站包含指向 Mac 二进制文件的链接，以及 Github 上的源代码。

该文档包含一个非常有用的介绍，用于将证书加载到您的测试设备以查看 HTTPS 流量。

不像 Charles 那样 GUI-tastic，但它可以满足我的一切需求，而且它是免费和维护的。好东西，如果您以前使用过一些命令行工具，那么非常简单。

更新：我刚刚在网站上注意到 mitmproxy 可以作为自制软件安装。再简单不过了。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-09-11T01:23:46.750

Xcode 提供 CFNetwork 诊断日志。[苹果文档](https://developer.apple.com/library/archive/qa/qa1887/_index.html)

要启用它，`CFNETWORK_DIAGNOSTICS=3`请在环境变量部分添加：

[![在此处输入图像描述](../Images/31f66351f80422bca491a125421c84b9.png)](https://i.stack.imgur.com/9pv34.png)

这将显示来自应用程序的请求及其标头和正文。注意`OS_ACTIVITY_MODE`一定要设置`enable`成如图。否则控制台上不会显示任何输出。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-10-09T13:16:49.793

# Wireshark 它

选择你的界面

[![在此处输入图像描述](../Images/8bdb315f26cf9a030171be387cc31b7f.png)](https://i.stack.imgur.com/VYIfO.png)

添加`filter`启动`capture`

[![在此处输入图像描述](../Images/cc352c5e9ec3dfa4aaa8d647609b825b.png)](https://i.stack.imgur.com/8zsO2.png)

* * *

# 测试

单击将触发 GET/POST/PUT/DELETE 请求的任何操作或按钮

你会在wireshark中看到它

[![在此处输入图像描述](../Images/3bcf07cbb1dfcfd47257758ac5a636ec.png)](https://i.stack.imgur.com/gP9Zx.png)

如果您想了解有关某个特定数据包的更多详细信息，只需选择它并**关注 > HTTP 流**。

[![在此处输入图像描述](../Images/bf9be0e103b113395f0b01c9c344c314.png)](https://i.stack.imgur.com/PvKMB.png)

希望这对其他人有帮助！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-09-03T16:10:11.083

似乎这可能是最近添加的。在模拟器上点击`command`++会弹出调试菜单。从该菜单中，单击。检查将显示选项卡。单击网络选项卡，这将显示正在发出的所有网络请求。`control``z``Inspect`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-11T10:11:59.427

如果您有电缆连接和 Mac，那么有一个简单而强大的方法：

1.  安装免费的 Wireshark，确保它可以捕获设备（并且您需要**在每次计算机重新启动后**执行此操作！）：

    须藤 chmod 644 /dev/bpf*

2.  现在与 wifi 共享您的网络。系统偏好设置 > 共享 > Internet 共享。检查您是否有“共享来自：以太网的连接”并使用：Wi-Fi。您可能还想配置一些 wifi 安全性，它不会干扰您的数据监控。

3.  将手机连接到新创建的网络。我在这里经常需要几次尝试。如果手机不想连接，请关闭Mac的wifi，然后重复上面的步骤2并耐心等待。

4.  启动 Wireshark 用 Wireshark 捕获你的无线接口，它可能是“en1”。过滤您需要的 IP 地址和/或端口。当你找到一个有趣的包时，选择它，右键单击（上下文菜单）> Follow TCP Stream，你会看到请求和答案的漂亮文本表示。

什么是最好的：同样的技巧也适用于 Android！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-02-01T08:39:22.810

Telerik Fiddler 是一个不错的选择

[http://www.telerik.com/blogs/using-fiddler-with-apple-ios-devices](http://www.telerik.com/blogs/using-fiddler-with-apple-ios-devices)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-09-02T13:26:55.697

从`Xcode 13`您可以使用 Xcode Instruments -> Network instrument 来监控所有网络流量及其所有详细信息。您需要一台在 macOS 12+ 上运行 iOS 15+ 的物理设备

有关更多详细信息，请参阅 WWDC 2021 视频中的[分析网络流量](https://developer.apple.com/videos/play/wwdc2021/10212/)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-14T19:36:16.617

1.  安装 WireShark
2.  从 xcode 网络监视器获取 ip 地址
3.  听wifi接口
4.  在 WireShark 中设置过滤器 ip.addr == 192.168.1.122

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-09-07T09:56:32.077

您还可以使用这个[名为 Wormholy 的开源库](https://github.com/pmusolino/Wormholy)（由我制作）。

您只需将它集成到您​​的项目中（无需代码），就是这样，您将能够监控您的应用程序的所有 API 请求，也在真实设备上。

而且您不需要像 Charles 那样管理证书。这一切都靠魔法！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-02-01T13:14:26.387

[FLEX](https://github.com/FLEXTool/FLEX)是监控 iOS 应用程序网络流量的绝佳工具。

[![FLEX iOS 截图 1](../Images/bdd860bd7eac7c33ce58250c1178da59.png)](https://i.stack.imgur.com/jEp7x.jpg)

单击上面屏幕截图中列出的任何请求时，我将被重定向到另一个屏幕，在那里我可以看到有关该请求的更多详细信息。 [![FLEX iOS 截图 2](../Images/df6e5df231be258689527ed409fa4e29.png)](https://i.stack.imgur.com/idcY7.jpg)

但是，我有一个用例，我正在开发的应用程序会将用户重定向到 Safari。我也想监控 ​​Safari 中的网络流量，但 FLEX 只能监控来自您的 iOS 应用程序的流量，而不是来自任何其他应用程序的流量（在撰写此答案时）。

然后我切换到[Proxyman](https://proxyman.io/)来监控来自 iOS 模拟器的网络流量。

*   它有一套明确的说明，说明如何使用[iOS 模拟器](https://docs.proxyman.io/debug-devices/ios-device)和[Android 模拟器](https://docs.proxyman.io/debug-devices/android-device)进行设置。
*   它有一个简单、直观的用户界面，使其易于使用。

[![在此处输入图像描述](../Images/9f5af961f4aa151cc7dba4fcbb8b0971.png)](https://i.stack.imgur.com/UFsU1.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-06-14T11:13:28.837

如果您习惯使用 chrome 检查器工具，一个很好的解决方案是 Pony 调试器：[https ://github.com/square/PonyDebugger](https://github.com/square/PonyDebugger)

设置起来有点痛苦，但是一旦你完成它就会很好地工作。请务必使用 Safari 而不是 Chrome 来使用它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-11T07:05:12.763

我用网狐。它非常易于使用和集成。您可以在模拟器和设备上使用它。它显示了所有的请求和响应。它支持 JSON、XML、HTML、图像和其他类型的响应。您可以通过 IOS 默认共享格式（Gmail、WhatsApp、电子邮件、slack、短信等）共享请求、响应和完整日志

你可以在 GitHub 上查看：[https ://github.com/kasketis/netfox](https://github.com/kasketis/netfox)

> Netfox 可以快速查看您的 iOS 或 OSX 应用程序执行的所有已执行网络请求。它抓取所有请求 - 当然是您的请求，来自 3rd 方库（例如 AFNetworking、Alamofire 或其他）、UIWebViews 等的请求

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-16T14:01:48.427

您可以尝试使用[https://github.com/BugBlock/BugBlock-iOS](https://github.com/BugBlock/BugBlock-iOS)这是我创建的一个小工具，所以您需要的一切是：

```
import BugBlock 
```

然后

```
var config = BBConfiguration()
config.consoleLoggingEnabled = false
config.serverLoggingEnabled = true
config.crashReportingEnabled = true
BBLog.start(appId: "SDK key", configuration: config) 
```

并设置网络拦截器

```
let conf = URLSessionConfiguration.default
BBLog.networkLogging(with: conf)
let session = URLSession(configuration: conf) 
```

然后`session`在您的请求中使用。希望可以帮助您捕获日志。

# c# - 使用 C# 在 ASP.Net 中处理大量文件时出现 ERR_EMPTY_RESPONSE

> ID：11128368
> 
> 赞同：2
> 
> 时间：2012-06-20T21:19:36.970
> 
> 标签：c#, asp.net, streamreader

我创建了一个 Intranet 系统来处理目录中的 TXT 文件并将其数据处理到 SQL Server 数据库中。它是递归的，所以我有一个这样的文件结构：

C:\RawData\2012_06_01\2012_06_01_0002144493.txt C:\RawData\2012_06_01\2012_06_01_0002954412.txt

...

C:\RawData\2012_06_15\2012_06_15_0012554778.txt

依此类推，总计约 10.530 个文件。

当只选择一些文件夹（比如一个月的所有文件夹）时，它可以完美地工作。但是，当尝试处理一年的文件（从 2011_06_01 到 2012_06_01）时，它开始处理，然后我收到这个 ERR_EMPTY_RESPONSE 错误。它与连接无关，因为它发生在 VS2010 引擎下（我只是运行代码，它打开浏览器，我选择所有我想要的文件夹 - 在 Web 界面上 - 然后单击“处理”按钮）。

通过在循环下执行循环来进行处理，例如以下示例：

```
string[] folders = Directory.GetDirectories(parentFolder);
foreach (string folder in folders)
{
    string[] files = f.GetFilesRecursive(@folder);
    foreach (string file in files)
    {
        if (File.Exists(file))
        {
            string buffer = "";
            StreamReader sr = File.OpenText(file);
            while (!sr.EndOfStream)
            {
                string line = sr.ReadLine();
                buffer += line;

                // All the internal file processing and database calls goes here

            } // while
            sr.Close();
        } // if file exists
    } // foreach (files)
} // foreach (folders) 
```

此代码是原始代码的简化版本。内部文件处理代码非常大，涉及类、数据库对象等，但它们运行良好（文件很少，最多 300 个左右，运行完美）。

有没有办法避免这个错误，或者有什么关于优化文件处理的其他方法的建议？

另外（最重要的是），我想实现一个 ajax 响应，所以用户可以看到一个百分比条或类似的东西......我听说过 ICallbackEventHandler 和 IPostBackEventHandler，但我不知道如何实现这个在我使用的这样的循环下。

任何事情都会非常感激。

***编辑于 2012 年 6 月 21 日：***

我找到了答案。@BumbleBee 建议的解决方案给了我一个研究的起点，因为它返回了消息：

> 在此上下文中不允许异步操作。启动异步操作的页面必须将 Async 属性设置为 true，并且只能在 PreRenderComplete 事件之前的页面上启动异步操作。

发现这个：[ASP.NET 真正的异步操作](https://stackoverflow.com/questions/7647198/asp-net-true-asynchronous-operation) ，它在答案帖子中的链接上有解决方案（[ThreadPool.QueueUserWorkItem 使用 ASP.Net](https://stackoverflow.com/questions/6962877/threadpool-queueuserworkitem-uses-asp-net)）

现在，我只需要找到一种使用 AJAX 将数据发送到页面上的 3 个 Div 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:27:13.447

您可能想更改 RequestTimeout 并查看。

```
<httpRuntime executionTimeout="some big value here"  /> 
```

检查[此](http://weblogs.asp.net/aghausman/archive/2009/02/20/prevent-request-timeout-in-asp-net.aspx)示例

但这实际上并不是解决您问题的**真正方法。**您需要启动一个后台线程并让它处理大型处理并让 UI 线程返回一条消息给用户。[这](http://www.dotnetfunda.com/articles/article613-background-processes-in-asp-net-web-applications.aspx)是一个如何实现这一目标的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:31:51.173

不要在后面的页面代码中做如此繁重的工作。将作业推送到单独的队列中，该队列将在可能的情况下在单独的线程中执行作业。

基本上，单击按钮应该“解雇并忘记”这项工作。

如果你需要一个进度条，放一个`[WebMethod]`会返回队列长度的，然后用ajax调用它。

如果需要，您还可以添加取消按钮。

UI 将使用此技术进行响应。

# regex - 如何定义允许枚举值或模式匹配的模式限制？

> ID：11128370
> 
> 赞同：7
> 
> 时间：2012-06-20T21:19:48.883
> 
> 标签：regex, xsd

我正在定义 a `simpleType`，它`restriction`要么是来自 a 的值，要么是与`enumeration`a 匹配的值`pattern`。我意识到我可以做到这一切，`pattern`但我想拥有`enumeration`提供的选择列表。

这是我期望能够做到的：

```
<xs:simpleType name="both">
  <xs:restriction base="xs:string">
    <xs:enumeration value="one" />
    <xs:enumeration value="two" />
    <xs:pattern value="[0..9]+" />
  </xs:restriction>
<xs:simpleType> 
```

但这失败了，因为一个值不能同时匹配这两个约束。如果我修改模式以允许任何枚举值，那么如果仅与模式匹配，它将失败。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T21:44:29.470

原来我需要一个`union`. 将枚举类型定义为单独的类型：

```
<xs:simpleType name="enumeration">
  <xs:restriction base="xs:string">
    <xs:enumeration value="one" />
    <xs:enumeration value="two" />

  </xs:restriction>
<xs:simpleType> 
```

然后将目标类型创建为枚举：

```
<xs:simpleType name="both">
  <xs:union memberTypes="enumeration">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:pattern value="[0..9]+" />
      </xs:restriction>
    </xs:simpleType>
  </xs:union>
</xs:simpleType> 
```

所以现在我得到了选择列表，或者匹配模式。正是我想要的！

**更新：**实际上可以将两种简单类型定义为`union`或通过`memberTypes`属性的子级。

# tornado - Tornado 线程安全的非阻塞操作

> ID：11128371
> 
> 赞同：0
> 
> 时间：2012-06-20T21:19:51.120
> 
> 标签：tornado, nonblocking

我对龙卷风有概念上的疑问。

我有一个针对 twitter api 运行的查询列表。

所以我有类似的东西

```
while (keywords):

if (requests.remaining > 300) :
self.twitter_request(path= "/search",access_token=self.current_user["access_token"],
        callback=(yield gen.Callback("key")),q=word)
response = yield gen.Wait("key")
self.parse_response(response)

else:
  sleep(3000) 
```

并且 parse_response 被定义为

```
def parse_response(self,response):
  //parse the response object
  //check if number of results returned is 100\. If yes then, check current page number.
  //if less than 4 then
     self.twitter_request(path= "/search",access_token=self.current_user["access_token"],
        callback=self.async_callback(self._parse_response,fileIter= fileIter,fileType= fileType, query= query),q=query,rpp="100")

return 
```

所以基本上我的 parse_response 函数正在解析响应并为同一关键字请求更多页面，直到 page_number 为 4。

但是在调用这个辅助函数的主循环中，当我调用 time.sleep(3000) 时被挂起。这甚至会使后台函数进入睡眠状态，因为主线程正在睡眠，并且一旦主线程处于活动状态，它们就会恢复。（由于我最初请求关键字并且 parse_Response 正在使用 async_Callback，因此在执行 sleep(3000) 命令时不会执行这些异步回调）。即使主类发出睡眠命令，有没有办法让后台处理运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:43:51.387

为自己打开龙卷风定期回调。你会得到这样的东西。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import tornado.web
import tornado.httpserver
import tornado.ioloop

KEYWORDS = []

class MyApplication(tornado.web.Application):

  def period_run(self):
    while(KEYWORDS):
        if (requests.remaining > 300) :
            self.twitter_request(path="/search",access_token=self.current_user["access_token"],
            callback=(yield gen.Callback("key")),q=word)
            response = yield gen.Wait("key")
            self.parse_response(response)

app = MyApplication(handlers=urls, **settings)

http_server = tornado.httpserver.HTTPServer(app, xheaders=True)

loop = tornado.ioloop.IOLoop.instance()
TIME_TO_RUN = 400
period_cbk = tornado.ioloop.PeriodicCallback(app.period_run, 3000 + TIME_TO_RUN, loop)
period_cbk.start()
loop.start() 
```

更多信息可以在[这里](http://www.tornadoweb.org/documentation/ioloop.html)找到。

# sharepoint - 如何使用 PowerShell 修改 SharePoint 列表中的项目值

> ID：11128376
> 
> 赞同：3
> 
> 时间：2012-06-20T21:20:05.850
> 
> 标签：sharepoint, powershell

如何使用 PowerShell 修改 SharePoint 列表中的项目值？当我尝试以下操作时：

```
$splist.GetItems() | ForEach-Object{
 #Write-Host $_["Item"]

 if($_["Item"] -eq $null){
  $SPFileCollection = $folder.Files
  $upFile=Get-ChildItem D:\Tools\SP-scripts\MDNSO-template.aspx
  $tmpValue = $_["Title"]
  $filename = "EM_Doc_Library\$tmpValue"
  $SPFileCollection.Add("EM_Doc_Library\$tmpValue",$upFile.OpenRead(),$false)
  Write-Host "creating the file"
  Write-Host $_["Title"]
  $_["Item"] = "MDNSO-<$tmpValue>"
 }
} 
```

它说，`unable to index into an object of type SPlistItem`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T08:54:31.373

以下是您可以尝试执行的操作的摘要：

```
$spWeb = Get-SPWeb -Identity http://yourdomain/sites/config
$spList = $spWeb.Lists["AppSettings"]
$spItem = $spList.GetItemById(10013) //or another way that you prefer.
$spItem["Name"] = "MyName"
$spItem.Update() 
```

有关更多信息，您应该查看此博客文章。它包含如何使用 PowerShell 添加、更新和删除列表项的示例：http: [//mysharepointwork.blogspot.no/2010/09/addupdatedelete-list-items-using.html](http://mysharepointwork.blogspot.no/2010/09/addupdatedelete-list-items-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-30T07:17:24.750

使用 powershell，我使用来自 [social.msdn.microsoft.com/Forums的脚本非常完美地完成了它](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/655b2d3a-05e6-4d15-b0c0-a1d9c5d97dc1/delete-all-list-items-with-powershell?forum=sharepointdevelopment)

这是示例代码，一旦出现提示，请键入“YES”继续。并替换唯一的两个变量： (urlToTheYourSite & YourListNameToDelete)

```
write-host "This will delete data, type YES to continue"
$retval = read-host 
if ($retval -ne "YES") 
{
    write-host "exiting - you did not type yes" -foregroundcolor green
    exit
}
write-host "continuing"

$web = get-spweb https://urlToTheYourSite
$list = $web.lists | where {$_.title -eq "YourListNameToDelete"}
Write-host "List $($list.title) has $($list.items.count) entries"
$items = $list.items

foreach ($item in $items)

{
    Write-host "  Say Goodbye to $($item.id)" -foregroundcolor red

    $list.getitembyid($Item.id).Delete()
} 
```

# c# - 当相机移动正常时，SceneNode 更改的位置会被忽略

> ID：11128379
> 
> 赞同：0
> 
> 时间：2012-06-20T21:20:10.460
> 
> 标签：c#, 3d, clipping

我正在为模型制作动画，同时用相机在它周围移动。动画处于循环中。

一段时间后（有时几乎是立即，但主要是在一两分钟后），相机继续正常移动，而模型的场景节点停止移动。检查场景节点的属性显示它们的位置已更新，但未渲染。让事情变得更奇怪：切换场景节点的可见性仍然可以正常工作。

我完全不知道为什么会这样。任何意见是极大的赞赏。

-- 编辑：我认为这是由于我更新了相机的近剪辑距离造成的。我将其设置为静态值并没有解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:12:28.230

我找到了这个问题的原因。场景节点由多个线程操作。在渲染场景时操作场景节点时，发生未报告的错误，停止渲染。将所有操作编组到单个线程解决了这个问题。

# django - 在 django 中使用 solr api，而无需通过 url 访问 solr

> ID：11128382
> 
> 赞同：0
> 
> 时间：2012-06-20T21:20:10.823
> 
> 标签：django, solr

快速提问，我想知道是否有一种方法可以使用 Solr 的 API，而无需创建 url 并以这种方式检索响应？我已经google了，但无济于事。我不想使用 haystack，因为我不需要它所有的花里胡哨。我只想能够在不创建 url 的情况下从 Solr 检索响应并呈现响应。顺便说一句，我正在 django/python 中执行此操作。

感谢您给我的任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:33:04.213

我一直在使用[pysolr](http://code.google.com/p/pysolr/)，它很棒。

# php - php循环尝试将数组值添加到对象方法/属性

> ID：11128383
> 
> 赞同：1
> 
> 时间：2012-06-20T21:20:13.587
> 
> 标签：php, arrays, loops

如果我像这样手动编码每个数组值：

```
$paymentDetailsType->setPaymentDetailsItem(
    array (
        'PaymentDetailsItem00' => $paymentDetailsItem,
        'PaymentDetailsItem01' => $paymentDetailsItem1,
    )
); 
```

它可以工作，但是数组项的数量可能会有所不同，所以我尝试了这个，结果很糟糕，不知道还能尝试什么

```
for ($i=0; $i<$_POST['cartcount']; $i++) {
    if ($i==0) {
        $paymentDetailsType->setPaymentDetailsItem(
            array (                     
                'PaymentDetailsItem00' => $paymentDetailsItem,
            )
        );
    } else {
        $paymentDetailsType =& $paymentDetailsType->setPaymentDetailsItem(
            array (
                'PaymentDetailsItem0'.$i.'' => ${'paymentDetailsItem'.$i},
            )
        );
    }
} 
```

我相信我正在尝试做的是向对象方法添加一个数组值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:06:36.063

```
$thenewarray = array (
    'PaymentDetailsItem00' => $paymentDetailsItem,
);

if ($_POST['cartcount']>1) {
    for ($i=1; $i<$_POST['cartcount']; $i++) {
        $thenewarray['PaymentDetailsItem0'.$i.''] = ${'paymentDetailsItem'.$i};
    }
    $i=0;
}

$paymentDetailsType->setPaymentDetailsItem($thenewarray); 
```

事先创建数组，然后循环添加键和值，最后在数组完成后将其添加到对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:33:35.050

```
$paymentDetailsType =& $paymentDetailsType->setPaymentDetailsItem(
            array (
                'PaymentDetailsItem0'.$i.'' => ${'paymentDetailsItem'.$i},
            )
        ); 
```

这部分不起作用，因为您不能期望在使用`=&`. 当你想添加数组时，你可以调用[`array_merge()`](http://www.php.net/manual/en/function.array-merge.php). 例如，您可以将您的更改`paymentDetailsType`为：

```
class paymentDetailsType
{
    private $_items = array();

    function addPaymentDetailsItem($items)
    {
        $_items = array_merge($_items, $items);
    }
} 
```

除此之外，当您更改`${'paymentDetailsItem'.$i}`为[数组](http://php.net/manual/en/language.types.array.php)时，您可以简单地将项目寻址为`$paymentDetailsItem[$i]`并简单地`$i`用作键。

# r - mclapply 但不是 lapply 停止 R

> ID：11128388
> 
> 赞同：3
> 
> 时间：2012-06-20T21:20:42.667
> 
> 标签：r, ubuntu, parallel-processing

我需要在 Intel i7（8 核）上进行并行处理，并将 Ubuntu 12.04（64 位）与 R2.15.0（来自 RStudio）一起使用。我已经成功完成了几个星期，但是从昨天开始，任何并行 R 处理的尝试都会减慢处理速度，因此它几乎是死的。计算机本身和以往一样快（网页浏览等），但 R 只是等待和等待。我通常每天更新 Ubuntu（更新管理器），但不确定这是否相关。

此代码阻止我的 R 工作。请不要运行它，除非您对崩溃 R 没问题，并且知道如何使用“KILL -9”...

```
library(parallel)
library(gsubfn)

doSomething <- function(xx) {
  test <- 16
  return(test)
}

in.list <- list(1, 2, 3)

out.list.1 <- lapply(in.list, doSomething)                # Works well (< 1s)
out.list.2 <- mclapply(in.list, doSomething)              # Takes tens of minutes
out.list.3 <- mclapply(in.list, doSomething, mc.cores=1)  # Works well (< 1s)
out.list.4 <- mclapply(in.list, doSomething, mc.cores=2)  # Takes tens of minutes 
```

经过大量测试和“kill -9”后，我认为我已将问题隔离到“library(gsubfn)”。它会自动加载“加载所需的包：proto 加载所需的命名空间：tcltk 加载 Tcl/Tk 接口......完成”

我需要 gsubfn-package，所以不能排除它。有什么办法可以避免这个问题吗？

感谢所有为 R-tag 做出贡献的人！

/克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T02:03:42.567

尝试使用：

```
options(gsubfn.engine = "R") 
```

这将阻止 gsubfn 加载 tcl，这可能会导致 mclapply 函数出现问题。请参阅： [如何防止 R 加载包？](https://stackoverflow.com/questions/9999201/how-can-i-prevent-r-from-loading-a-package)

并且： [https ://stat.ethz.ch/pipermail/r-sig-hpc/2009-August/000324.html](https://stat.ethz.ch/pipermail/r-sig-hpc/2009-August/000324.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T20:22:50.813

这段代码对我来说都是完美而即时的。我正在使用比您的旧机器在 Fedora 20 下运行 R 3.0.2。也许您应该更新您的 R 安装并重试。

正如前面的评论所建议的，总是从终端 R 运行并行代码。我做了很多 mclapply 工作，它很少或从不在 RStudio 中工作。

# django - Django Compressor 离线继承

> ID：11128398
> 
> 赞同：6
> 
> 时间：2012-06-20T21:21:53.560
> 
> 标签：django, inheritance, offline, django-compressor

此问题专门针对使用 Django Compressor 的生产站点。我希望它在 COMPRESS_OFFLINE = True 时工作，以便我可以在推送到生产之前预压缩我网站的所有 css 文件。

我想在 base.html 中执行与此等效的操作：

```
{% compress %}
    {% block css %}
    {% endblock %}
{% endcompress %} 
```

这样我在扩展 base 的文件中的所有 css 块都被压缩了。这主要是为了让我不必将 {% compress %} 标记添加到我的所有子模板中。

Stack Overflow 上有几个类似的问题，但是我在离线压缩时（即使用 Django Compressor 的压缩管理命令）没有找到一个好的解决方案。当 COMPRESS_OFFLINE = False 时，周围的压缩标签可以正常工作。有人找到一种方法使这项工作离线吗？

我列出了一些似乎与非离线解决方案有关的类似线程。第二个线程中的链接表明，在离线使用 Django Compressor 时存在继承问题，但也许它们已经解决：

[Django-compressor 和模板继承](https://stackoverflow.com/questions/4206146/django-compressor-and-template-inheritance)

[django-compressor 是否适用于模板继承？](https://stackoverflow.com/questions/9559018/does-django-compressor-work-with-template-inheritance)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:56:30.393

You have do use compress offline for that technique to work, but as long as you have caching set up properly, django-compressor will not re-compress on every request unless the resources have been changed.

I've used this technique to allow users to use [lesscss](http://lesscss.org) to extend the site theme and use our mixins etc. It's a little wonky to get working but (in my experience so far) it's perfectly stable when configured correctly, and doesn't introduce a substantial request latency once it's compressed the first time.

You can set up a service like [pingdom](http://www.pingdom.com), [blamestella](https://www.blamestella.com), or [new relic](http://newrelic.com) to hit various pages to ensure the compressed assets are always in cache (they monitor for uptime, but work for this as well)

# sql - Oracle：将字符串转换为 int

> ID：11128399
> 
> 赞同：1
> 
> 时间：2012-06-20T21:21:56.920
> 
> 标签：sql, oracle, plsql

在 Oracle 中，我有一个包含列 (X) 的表，其中可以包含如下字符串：

97M
481
101X
88
21E
等

我只想选择 x > 90 的整数值的那些行。在这个例子中，我希望取回包含值 97M、101X 和 481 的行。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T21:31:32.973

我使用[REGEXP_REPLACE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm)在使用之前删除了字母字符，`TO_NUMBER`以便可以根据需要过滤结果：

```
WITH t
  AS (SELECT '97F' AS x FROM DUAL
      UNION
      SELECT '481' FROM dual
      UNION
      SELECT '101A' FROM dual
      UNION
      SELECT '101A' FROM dual
      UNION
      SELECT '88' FROM dual
      UNION
      SELECT '21E' FROM dual)
SELECT x
  FROM t
 WHERE TO_NUMBER(regexp_replace(x, '[[:alpha:]]', '')) > 90;

X
101A
481
97F 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T21:37:40.927

您始终可以使用 translate 来删除字母字符。

```
TO_NUMBER(translate('90F', '1ABCDEFGHIJKLMNOPQRSTUFWXYZ', '1')) -- = 90 
```

Translate 将第二个参数中的字符一对一翻译为第三个参数中的字符。

这是一个不同的例子。

```
translate('ABCDEFG', 'ABC', 'XYZ') = 'XYZDEFG'

A -> X
B -> Y
C -> Z 
```

现在如果你看看我的例子

```
translate('90F', '1ABCDEFGHIJKLMNOPQRSTUFWXYZ', '1')

1 -> 1 (this is here because if that last argument is null, you'll get an empty string)
A -> ? there's nothing here, so oracle will translate it to nothing
B -> same as above 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:33:55.003

您可以尝试以下方法：

```
WHERE (substr(x, 1, 1) = '9' and substr(x, 2, 1) between '1' and '9'
      ) or
      (substr(x, 1, 1) between '1' and '9' and
       substr(x, 2, 1) between '0' and '9' and
       substr(x, 3, 1) between '0' and '9'
      ) 
```

这有点蛮力。它检查字符串是否以 91-99 开头，或者前三位数字是否为字符串。

# java - 如何从原始文件夹中读取pdf文件？

> ID：11128404
> 
> 赞同：0
> 
> 时间：2012-06-20T21:22:08.367
> 
> 标签：java, android

如果设备有任何 pdfreader，我想从 raw 文件夹中读取 pdf 文件。这是我的代码：

```
 Intent intent = new Intent(Intent.ACTION_VIEW,
              Uri.parse("android.resource://com.powergroupbd.pdfreader/raw" + R.raw.androidtasksmwp));

    intent.setType("application/pdf");
    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(intent, 0);
    if (activities.size() > 0) {
        startActivity(intent);
    } else {
       Toast.makeText(getApplicationContext(), "No pdfreader  found", Toast.LENGTH_LONG).show();
    } 
```

但是当我运行这个项目时，它显示错误。这是 logcat 结果：

```
06-21 02:05:04.408: W/dalvikvm(7763): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-21 02:05:04.418: E/AndroidRuntime(7763): FATAL EXCEPTION: main
06-21 02:05:04.418: E/AndroidRuntime(7763): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.qo.android.htcgep/com.qo.android.am.pdflib.app.RenderScreen}: java.lang.NullPointerException
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.os.Looper.loop(Looper.java:130)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at java.lang.reflect.Method.invoke(Method.java:507)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at dalvik.system.NativeStart.main(Native Method)
06-21 02:05:04.418: E/AndroidRuntime(7763): Caused by: java.lang.NullPointerException
06-21 02:05:04.418: E/AndroidRuntime(7763):  at com.qo.android.am.pdflib.app.RenderScreen.onNewIntent(Unknown Source)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at com.qo.android.am.pdflib.app.RenderScreen.onCreate(Unknown Source)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-21 02:05:04.418: E/AndroidRuntime(7763):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-21 02:05:04.418: E/AndroidRuntime(7763):  ... 11 more
06-21 02:05:04.418: W/ActivityManager(96):   Force finishing activity com.qo.android.htcgep/com.qo.android.am.pdflib.app.RenderScreen 
```

我做错了什么？请帮忙..：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:13:30.133

我从来没有尝试过像你那样做，但我通过以下过程非常成功地使用了原始资源：

1.  通过获取和 InputStream 获取资源

    > fileResourceStream = Activity.getResources().openRawResource(R.raw.androidclient));//R文件为你引用资源id。在您的情况下，它将是 R.raw.androidtasksmwp。

2.  使用此 InputStream 我将资源文件复制（通常在安装应用程序后）到设备内存或 SD 卡（决定权在您手中）。可以设计这样的东西：

    ```
    BufferedInputStream bIS = new BufferedInputStream(
    fileResourceStream);
    try {
            BufferedOutputStream bOS = new BufferedOutputStream(
            new FileOutputStream(Globals.applicationDirPath
                    + Globals.exeFileName, false));

            int BUFFER_SIZE = 4096;
            byte[] buff = new byte[BUFFER_SIZE];
            int bytesRead = bIS.read(buff, 0, BUFFER_SIZE);
            while (bytesRead >= 0) {
                bOS.write(buff, 0, bytesRead);
                bytesRead = bIS.read(buff, 0, BUFFER_SIZE);
            }
            bIS.close();
            bOS.flush();
            bOS.close();
    }// try {
    catch (Exception e) {
            Globals.log("Exception in checkAndCopyClientToMemory."
            + e.toString());
    } 
    ```

3.  在任何应用程序中/出于任何目的打开复制的文件作为文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:28:55.927

我认为您可能在“.../raw”之后缺少一个“/”，因此 uri 不正确。

`Uri.parse("android.resource://com.powergroupbd.pdfreader/raw" + R.raw.androidtasksmwp)`

但是我不确定您是否可以从像这样的外部包中访问资源，您可能需要将其复制到 sdcard 然后有意打开它

# c++ - 从 C++ 程序（动画？）不断更新绘图

> ID：11128406
> 
> 赞同：0
> 
> 时间：2012-06-20T21:22:11.620
> 
> 标签：c++, python, plot, gnuplot

我有一个 C++ 程序，可以不断更新图形（添加/删除边和顶点）。[是否可以使用我的 C++ 程序中的 gnuplot（使用箭头命令](https://stackoverflow.com/questions/11104378/plot-points-linked-with-edges-using-gnuplot)）绘制操纵图，并在每次更新图时更新图？这是一种动画...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:22:09.390

您可以尝试使用管道命令，也应该根据此在 Windows 上工作：http: [//pleasemakeanote.blogspot.dk/2009/05/how-to-call-gnuplot-from-c-using-pipes.html](http://pleasemakeanote.blogspot.dk/2009/05/how-to-call-gnuplot-from-c-using-pipes.html)

一个例子（这个使用 POSIX 和鼠标，所以你可能想改用上面的例子）： [http ://www.gnuplot.info/files/gpReadMouseTest.c](http://www.gnuplot.info/files/gpReadMouseTest.c)

作为替代方案，请考虑使用 MathGL：[http ://mathgl.sourceforge.net/doc_en/mathgl_en.html](http://mathgl.sourceforge.net/doc_en/mathgl_en.html)

# java - 使用java每秒流式传输大量数据

> ID：11128407
> 
> 赞同：-6
> 
> 时间：2012-06-20T21:22:12.597
> 
> 标签：java, algorithm, parallel-processing, terminal, javac

我有 10000 个具有这种结构的文本文件

```
x         y  
------------------ text file structure

2         1
3         2
3         3
.         .
.         .
.         . 
```

我可以在java中每秒发送10000个数据（一秒信息是一行文件）吗？我想模拟 10000 gps

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:20:58.310

似乎每秒一次，您想从 10,000 个不同的文件中读取一行。

您将遇到的一个问题是某些操作系统不允许一次打开 10,000 个文件，并且反复打开和关闭文件效率非常低。

解决此问题的一种方法是合并文件，或增加允许的最大文件数。

由于您正在模拟 GPS，因此您需要以与它们相同的方式进行通信。例如，如果使用 JSon 和 rabbitmq，请使用它们。但是，如果他们不使用这些，您将使模拟变得不那么真实。

每秒从打开的文件中读取 10,000 行应该不是问题。

文件是否具有实际的时间戳，例如以毫秒或微秒为单位，因此您可以在事件发生时对其进行排序？

# javascript - Javascript 对象多个引用

> ID：11128408
> 
> 赞同：4
> 
> 时间：2012-06-20T21:22:14.770
> 
> 标签：javascript, arrays, object

只是一个（希望如此）快速的问题，以澄清 Javascript 如何处理对象。我不习惯 JS，所以有点意外，这就是为什么我要仔细检查！

假设我有一个对象：

```
function food(price) {
  this.price = price || 100; 
}

var myFood = new food(100); 
```

然后将此对象存储在两个数组中：

```
var foo = [];
var bar = [];
foo.push(myFood);
bar.push(myFood); 
```

我是否认为我在这里所做的只是存储对 myFood 的引用？我没有创建对象的副本？所以，如果我要说：

```
foo[0].price = 50; 
```

bar[0].price ALSO == 50，因为它存储了对 myFood 的引用，并且实际上影响其价格的是 myFood，而不是 foo 或 bar？

提前谢谢了！我已经看到一些堆栈溢出线程在更广泛的帖子中提到了这个问题，但我只是想把它全部放在那里以确保！此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:30:44.263

你是对的。但是做起来看看会发生什么是非常容易的。

[http://jsfiddle.net/67haQ/](http://jsfiddle.net/67haQ/)

您显然似乎已经知道它是如何工作的，稍微玩弄确认似乎比 SO 问题更容易。

只是在说'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:23:28.017

是的，javascript 只会推送引用而不是对象的副本。

# git - 如何使用 remove-item cmdlet 排除文件夹

> ID：11128410
> 
> 赞同：0
> 
> 时间：2012-06-20T21:22:20.820
> 
> 标签：git, powershell, cmdlets

我有一个 git 存储库，我试图从其中删除所有文件和文件夹，但不删除该`.git`文件夹。我已经尝试了参数的各种排列，`-exclude`但似乎无法得到它。

`$repoPath = "c:\myrepo"`
`Remove-Item $repoPath -Recurse -Force -Exclude .git`
`Remove-Item $repoPath -Recurse -Force -Exclude *.git*`
`Remove-Item $repoPath -Recurse -Force -Exclude *.git`

无论我尝试什么，.git 文件夹都会被删除。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:35:15.733

`Remove-Item $repoPath`将删除整个文件夹。你不是说使用`Remove-Item $repoPath\*`吗？

# php - 从 SUM 中删除否定结果

> ID：11128414
> 
> 赞同：2
> 
> 时间：2012-06-20T21:22:32.520
> 
> 标签：php, mysql

我正在使用下面的代码对我的库存进行分组和汇总。对于我的一些库存，如果发货量多于库存量，我可能会得到负面结果，但我希望这些负数商品不要显示在我的“库存页面”中。有没有办法删除数量等于或小于 0 的行？

```
-------------------------------------------------------------------
ProductID   |  Color  | Timestamp          |  Quantity  |  RowID  |
-------------------------------------------------------------------
25          |  Red    | 10/10/10 06:22:15  |  -250      |  1      |
-------------------------------------------------------------------
32          |  Green  | 10/10/10 06:23:45  |  100       |  2      |
-------------------------------------------------------------------

$query = "SELECT productid, color, SUM(Quantity) AS TotalQuantity FROM inventory GROUP BY productid, color";
$result = mysql_query($query) or die(mysql_error());

   // Table markup here
   echo '<tr><td>'. $row['productid'] . '</td><td>' . $row['color']. '</td><td>'. $row['TotalQuantity'];
   // Table markup here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:25:14.560

```
$query = "Select * from 
  (SELECT productid, color, 
   SUM(Quantity) AS TotalQuantity FROM inventory 
   GROUP BY productid, color) AS alias 
where TotalQuantity  > 0"; 
```

# objective-c - xcodebuild 使用与在 Xcode 中构建不同的配置

> ID：11128417
> 
> 赞同：4
> 
> 时间：2012-06-20T21:23:04.110
> 
> 标签：objective-c, xcode, build, xcodebuild

在命令行中，xcodebuild 给出的结果与在 Xcode UI 中构建不同。

这是我通过的命令行：

`$ xcodebuild -sdk iphonesimulator5.0 -configuration Release -scheme mylib -target mylib`

请注意，目标设置为创建静态库文件可能很重要。

我知道正在使用不同的设置，因为我在项目文件中关闭了 -Wundeclared-selector。但是，从命令行运行 xcodebuild 时会收到这些警告。

似乎其他人也有这个问题： [Why does xcodebuild give different build results than XCode UI](https://stackoverflow.com/questions/10653065/why-does-xcodebuild-give-different-build-results-than-xcode-ui)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T22:26:13.613

我的机器上安装了多个版本的 Xcode。这修复了它：

```
$ sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/ 
```

# wcf - WCF basicHttp 端点返回服务器 500，但 wsHttp 端点没有

> ID：11128419
> 
> 赞同：1
> 
> 时间：2012-06-20T21:23:13.010
> 
> 标签：wcf, soap

我正在测试我的服务的故障和异常处理，并看到奇怪的结果。

我有一个配置了两个端点的服务合同。一个是basicHttpBinding，另一个是wsHttpBinding。在我的机器上本地我有一个测试应用程序客户端和服务器正在运行。我可以成功调用这两个 Web 服务绑定并获得我正在寻找的异常，这正是我正在寻找的。但是当我将代码推送到开发服务器时，我只能成功调用 wsHttpBinding 端点。基本端点返回一条奇怪的消息。例外是“远程服务器返回错误：(500) 内部服务器错误。”

异常消息是：

*“响应消息的内容类型 text/html 与绑定的内容类型不匹配（text/xml;charset=utf-8）。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。第一个1024字节的响应是：在此处插入一堆废话html”*

这是配置错误吗？IIS 错误？防火墙问题？我已经在服务器上运行了 WCF 日志记录和跟踪。我的代码被击中得很好，它抛出了一个错误异常。basicHttpBinding 上的消息头是空的，但我不确定这是否有问题。我也检查了 IIS 日志。它显示了 500 个错误，仅此而已。还有什么我应该检查的吗？

我的端点：

```
<endpoint 
 address="" 
 binding="wsHttpBinding" 
 bindingConfiguration="WSHttpBinding_IEOIEligible_NONSSL"
 name="IEOIEligible_Svc_endpoint_NONSSL" 
 contract="Engine.IEOIEligible">
</endpoint>

<endpoint 
address="mex" 
binding="mexHttpBinding" 
name="Mex_Svc_endpoint"
contract="IMetadataExchange" />

<endpoint 
    address="/basic" 
    binding="basicHttpBinding" 
    bindingConfiguration="BasicHttpBinding_IEOIEligible"
    name="basicEOIEndpoint" 
    contract="Engine.IEOIEligible" /> 
```

**[编辑]**

绑定配置：

基本HttpBinding

```
<binding name="BasicHttpBinding_IEOIEligible" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Streamed"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="Certificate" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Certificate" algorithmSuite="Default" />
      </security>
    </binding> 
```

wsHttpBinding

```
<binding name="WSHttpBinding_IEOIEligible_NONSSL" closeTimeout="00:10:00"
      openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
                maxBufferPoolSize="524288" maxReceivedMessageSize="524288" messageEncoding="Text"
      textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
      <readerQuotas maxDepth="32" maxStringContentLength="819200" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
    </binding> 
```

从 WCF 跟踪文件：

成功调用（wsHttp）：

```
<ExtendedData     xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/MessageTraceRecord">
 <MessageProperties>
  <Encoder>application/soap+xml; charset=utf-8</Encoder>
  <AllowOutputBatching>False</AllowOutputBatching>
 </MessageProperties>
 <MessageHeaders>
  <Action d4p1:mustUnderstand="1" xmlns:d4p1="http://www.w3.org/2003/05/soap-envelope" xmlns="http://www.w3.org/2005/08/addressing">http://tempuri.org/IEOIEligible/VerifyEOIRequiredEOIEligibilityFaultFault</Action>
 <RelatesTo xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:5863c107-b721-4b4c-88b8-0d03c22175d1</RelatesTo>
 <ActivityId CorrelationId="a498440c-2e5a-4298-9bc5-ade08d51933c" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">00000000-0000-0000-0000-000000000000</ActivityId>
 </MessageHeaders>
</ExtendedData> 
```

服务器 500 (basicHttp)

```
<ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/MessageTraceRecord">
 <MessageProperties>
  <Encoder>text/xml; charset=utf-8</Encoder>
  <AllowOutputBatching>False</AllowOutputBatching>
 </MessageProperties>
 <MessageHeaders></MessageHeaders>
</ExtendedData> 
```

**[编辑]**

我可以通过 Microsoft WCF 测试客户端使用 basicHttpBinding 从服务获得响应，但这只是当我没有在服务器上抛出 FaultException 时，这意味着服务返回了快乐的路径。这部分我不关心，谢天谢地。

我正在对客户端异常处理进行单元测试，服务器在基本而不是 wsHttpBinding 上返回 500。wsHttpBinding 返回嵌入在肥皂体内的正确 SOAP 错误，但基本不是。当不是从真正的服务器在本地运行时，将返回带有 basicHttpBinding 的 Soap 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:26:06.307

我的 basicHttp 端点也有同样的错误。我想将我的 web.config 的编码从“Ansi as utf8”更改为“utf8”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:24:56.343

我发现了我的问题的问题。这是一个简单的配置更改（需要几个小时才能找到）。在我的绑定中我改变了

```
transferMode="Streamed" 
```

至

```
transferMode="Buffered" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T15:59:31.433

我已经环顾了两天，试图找到一个解决方案并解释为什么我的带有自定义 SOAP 错误的 WCF 服务拒绝工作，IIS 吐出 http 500 错误，但客户端异常相同：*“内容类型响应消息的 text/html 与绑定的内容类型不匹配..."*。

最糟糕的是它在 IIS Express 上本地运行或使用`ServiceHost`实例！

您的回答极大地帮助了我诊断和解决问题，所以谢谢。

**这是我对任何感兴趣的人的解决方案和解释。**

* * *

通常，在使用故障时，对客户端的响应是包含错误详细信息的 SOAP xml 消息（当使用文本/xml 消息编码器时）。

使用[Fiddler](http://www.telerik.com/fiddler)，我能够拦截并查看以缓冲模式和流模式发送回客户端的响应。

这是缓冲模式下的响应消息：

```
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
   <s:Header>
      <a:Action s:mustUnderstand="1">http://tempuri.org/ISIAdministration/MyServiceBusinessFaultFault</a:Action>
      <a:RelatesTo>urn:uuid:a6a89101-7d95-4e7b-9871-c43792559f16</a:RelatesTo>
   </s:Header>
   <s:Body>
      <s:Fault>
         <s:Code>
            <s:Value>s:Sender</s:Value>
         </s:Code>
         <s:Reason>
            <s:Text xml:lang="fr-FR">Le créateur de cette erreur n'a pas spécifié de raison.</s:Text>
         </s:Reason>
         <s:Detail>
            <BusinessFault xmlns="http://schemas.datacontract.org/2004/07/GI.Framework.Error" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
               <MyCode>test</MyCode>
               <MyMessage>test</MyMessage>
            </BusinessFault>
         </s:Detail>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

这是流模式下的响应消息：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>500 - Erreur interne au serveur.</title>
<style type="text/css">
<!--
body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}
fieldset{padding:0 15px 10px 15px;} 
h1{font-size:2.4em;margin:0;color:#FFF;}
h2{font-size:1.7em;margin:0;color:#CC0000;} 
h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} 
#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;
background-color:#555555;}
#content{margin:0 0 0 2%;position:relative;}
.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}
-->
</style>
</head>
<body>
<div id="header"><h1>Erreur de serveur</h1></div>
<div id="content">
 <div class="content-container"><fieldset>
  <h2>500 - Erreur interne au serveur.</h2>
  <h3>La ressource que vous recherchez présente un problème, elle ne peut donc pas être affichée.</h3>
 </fieldset></div>
</div>
</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
   <s:Header>
      <a:Action s:mustUnderstand="1">http://tempuri.org/ISIAdministration/MyServiceBusinessFaultFault</a:Action>
      <a:RelatesTo>urn:uuid:a6a89101-7d95-4e7b-9871-c43792559f16</a:RelatesTo>
   </s:Header>
   <s:Body>
      <s:Fault>
         <s:Code>
            <s:Value>s:Sender</s:Value>
         </s:Code>
         <s:Reason>
            <s:Text xml:lang="fr-FR">Le créateur de cette erreur n'a pas spécifié de raison.</s:Text>
         </s:Reason>
         <s:Detail>
            <BusinessFault xmlns="http://schemas.datacontract.org/2004/07/GI.Framework.Error" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
               <MyCode>test</MyCode>
               <MyMessage>test</MyMessage>
            </BusinessFault>
         </s:Detail>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

注意到有什么奇怪的吗？

由于我忽略的一个原因，似乎 IIS 处理错误的方式与缓冲或流式响应的方式不同，**它实际上在预期的 xml 消息之前插入了自定义 500 错误页面的内容！！！**

IIS 还将`Content-Type`响应更改为 text/html，这解释了异常消息。

这就是为什么从流式消息切换到缓冲消息可以解决您的问题的原因，但在我的情况下，这个修复是不可接受的，因为我需要传输数百兆字节的数据。

* * *

一旦我接受了这很可能是一个 IIS 错误，而不是我的配置问题，找到解决方案就很容易了：

**TL;博士：**

问题来自 IIS 自定义错误页面，因此您只需为您的服务禁用它们。这可以从 IIS 管理面板完成，也可以通过向 web.config 文件添加一个简单的配置指令来完成，指示 IIS 让现有的错误消息通过而不改变它们：

```
<system.webServer>
    <httpErrors existingResponse="PassThrough" />
</system.webServer> 
```

就是这样！

# javascript - 从 JSON 数据动态创建 Jquery Mobile Navbar

> ID：11128421
> 
> 赞同：0
> 
> 时间：2012-06-20T21:23:18.723
> 
> 标签：javascript, jquery-mobile, cordova

我正在尝试根据我从提供 json 数据的 Web api 获取的数据动态创建导航栏。这是代码：[https](https://gist.github.com/2962277) ://gist.github.com/2962277 如果我使用：

```
 <div data-role="navbar">
      <ul>
        <li><a href="a.html">One</a></li>
        <li><a href="b.html">Two</a></li>
    </ul>
   </div> 
```

直接在 html 代码中工作正常，但这不是我要找的。我希望能够从数据中创建列表元素，就像 gist show 中的代码一样。任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T22:33:32.773

为导航栏小部件编写 HTML 后，您只需调用`.trigger('create')`小部件：

```
var myNavbar = $('<div data-role="navbar"><ul><li><a href="a.html">One</a></li><li><a href="b.html">Two</a></li></ul></div>');
$('#some-container').append(myNavbar).trigger('create'); 
```

这是一个演示：http: [//jsfiddle.net/Jde95/](http://jsfiddle.net/Jde95/)

这将触发 jQuery Mobile 来初始化小部件。

例如：

```
var url = "http://23.21.128.153:3000/regions.json";var jsonresults;
$.getJSON(url,function(data){
    var output = [];
    $.each(jsonresults, function(i,v){
        output.push('<li><a href="' + jsonresults[i].link + '">' + jsonresults[i].name + '</a></li>');
    });
    $('#main-content').append('<div data-role="navbar">' + output.join('') + '</div>').trigger('create'); 
}); 
```

请注意我是如何编写 HTML 并使用该`.append()`函数的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:57:28.420

我遇到了同样的问题（我一直在重新生成导航栏，具体取决于获取的数据），我的解决方案如下：

```
var navBar = '<div id="invNavBarAction" data-role="navbar" data-iconpos="left"><ul>';
navBar += '<li>MANY LINES AS YOU NEED</li>';
navBar += '</ul></div>';
$('#invNavBarAction').remove();
$('#invNavBarContainer').append($(navBar));
$('#invNavBarAction').navbar(); 
```

HTML：

```
<div id="invNavBarContainer">
    <div id="invNavBarAction" data-role="navbar" data-iconpos="left"></div>
</div> 
```

# gwt - 如果将值更改处理程序添加到文本字段，则忽略 GWT 单击处理程序

> ID：11128429
> 
> 赞同：0
> 
> 时间：2012-06-20T21:23:34.680
> 
> 标签：gwt

我有一个带有文本字段和禁用的“保存”按钮的 GWT 表单。当用户开始在文本字段中输入任何内容时，我想启用“保存”按钮。然后单击“保存”按钮应该调用一些保存（）代码。

我添加了

1.  ClickHandler 到 Save 按钮。
2.  “值更改处理程序”到文本字段以更新支持模型。不幸的是，它仅在字段丢失 FOCUS 时调用，所以我还必须添加：
3.  KeyPressHandler 到文本字段以在用户开始输入时启用保存按钮。

所以我开始在文本字段中输入（我看到 KeyPressHandler 被调用并且 Button 被启用），然后我点击“保存”。

此时 GWT 触发“焦点丢失”事件，我的值更改处理程序被调用并且支持模型得到更新。但是 ClickHandler 的事件丢失了！它根本没有被调用。我必须再次单击“保存”按钮，然后 save() 最终被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:34:27.980

ValueChange 处理程序用于检测字段值的变化。

在您向文本字段提供您已完成在字段中输入并想要注册更改的手势之前，不会注册值更改。我相信这个手势要么是 CR，要么是失去焦点。

OTOH，您可能希望附加到文本字段的处理程序是 keyup 处理程序（[http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/event/dom/client /KeyUpHandler.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/event/dom/client/KeyUpHandler.html) )，以便在每次按键时，您的代码都可以检查刚刚输入的键的值。

但是，你为什么要这样做？为什么不继续使用值更改处理程序？无论如何，您必须将鼠标移出文本字段才能到达鼠标按钮。

# javascript - 使用 AJAX 刷新 HTML 表格

> ID：11128430
> 
> 赞同：0
> 
> 时间：2012-06-20T21:23:37.573
> 
> 标签：javascript, html, ajax

我对如何使用 AJAX 刷新 HTML 表感到困惑。

我不是该网站的开发人员，所以我没有服务器端信息。我无论如何都找不到在此页面上重新加载表格： [http ://www.roblox.com/Poison-Horns-item?id=62152671](http://www.roblox.com/Poison-Horns-item?id=62152671)

我了解您需要请求 AJAX 工作的文档，但我在页面上找不到该文档。我只是用户 >.> - 这让我认为 ajax 主要是为开发网站的人准备的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:28:51.533

除非您有某种获取该部分的方法，否则您将无法仅重新加载页面的一部分。从开发人员的角度来看，他们可以只从服务器请求表格数据并将其显示在屏幕上，自动更新。

您只是用户，在加载时会获取整个页面。所以不，如果不获取页面的其余部分，您将无法仅获取表数据。即使您只想要表格部分，您也必须请求整个页面。

最好的办法是拥有一个重新加载整个页面的脚本。这可以通过网页和 iFrame 来完成，网站在 iFrame 中加载，并且脚本会每隔一段时间重新加载框架。

```
<iframe id="frame" src="http://mysite.com"></iframe>​

setInterval(reload,1000)

function reload() {
    document.getElementById("frame").src=document.getElementById("frame").src;
} 
```

上面的代码将每隔`1000ms`.

关于 AJAX 比重新加载页面更快：

如果您只使用 AJAX 请求数据，然后在客户端更新页面，这是正确的。在这种情况下，客户端和服务器之间的数据传输最少，因此一切都更快。在您的情况下，即使您使用 AJAX 进行请求，您仍然需要请求整个页面。使用 AJAX 的网站有一个 API，允许客户端从服务器请求特定信息以加快速度。你这里没有。

据我了解，您只需要检查商品价格并在价格低于阈值时提醒您的东西。如果是这种情况，我会使用允许您将 JS 注入网页的 Chrome 扩展程序。像[这样](https://chrome.google.com/webstore/detail/gidddlfmjhjiibffpalikbecknoflfab)的东西。

下面的 jQuery 选择器为您提供第一项的价格。您可以调整阈值价格和间隔 ( `300000ms = 5 minutes`)。

```
var price = $("#UserSalesTab > table > tbody > tr:nth-child(2) > td:nth-child(3) > b").html().match(/[0-9]+/)[0]
if (price < 100) alert("BUY");
setInterval(reload, 300000) 
```

# jquery - 更新面板下的 URL 未更新

> ID：11128432
> 
> 赞同：0
> 
> 时间：2012-06-20T21:23:48.983
> 
> 标签：jquery, asp.net, webforms

感谢您的回复。当我单击“首先单击它”链接时，浏览器 URL 会更改。当我点击第二个链接时，它也会更新浏览器中的 URL，但是如果我点击我放在更新面板中的“更新按钮”，它会回发一些服务器功能。

之后，如果我单击任何链接按钮，更新 URL 功能将不起作用。

你有什么想法在更新面板功能后重新初始化 jQuery 代码吗？

我知道当我们将 jQuery 与更新面板一起使用时，我们必须在每次页面加载时重新初始化它，但我无法找到该 jQuery 插件的正确 jQuery 函数来调用 asp.net 页面加载事件。

这是那个jQuery插件的链接

[http://code.google.com/p/news21-berkeley/source/browse/branches/v2011/js/jquery.address-1.4.min.js?spec=svn671&r=671](http://code.google.com/p/news21-berkeley/source/browse/branches/v2011/js/jquery.address-1.4.min.js?spec=svn671&r=671)

```
//Page Updating.aspx

<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="UpdatingUrl.aspx.cs" Inherits="UpdateUrl.UpdatingUrl" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="jquery-1.6.min.js" type="text/javascript"></script>
    <script src="jquery.address-1.4.min.js" type="text/javascript"></script>
    <style type="text/css">
        .style1
        {
            width: 100%;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" />
    <asp:UpdatePanel runat="server" ID="UpdatePanel" UpdateMode="Conditional">
        <ContentTemplate>
            <table class="style1">
                <tr>
                    <td>
                        <a href="#" rel="address:/section/?id=1&amp;name=Ravindra nofollow">Click it first</a>
                    </td>
                <td>
                    <asp:Button runat="server" ID="UpdateButton1" OnClick="UpdateButton_Click" Text="Update" />
                    <asp:Label runat="server" ID="DateTimeLabel1" />
                </td>
            </tr>
            <tr>
                <td>
                    <a href="#" rel="address:/section/?id=2&amp;name=Chauhan nofollow">Click it after Update
                        Button click</a>
                </td>
                <td>
                    &nbsp;
                </td>
            </tr>
        </table>
    </ContentTemplate>
</asp:UpdatePanel>
</form>
</body>
</html> 
```

```
//UpdatingUrl.aspx.cs Page

    protected void UpdateButton_Click(object sender, EventArgs e)
    {
        DateTimeLabel1.Text = DateTime.Now.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:33:55.230

您需要 _endRequest、_beginRequest 处理程序。在后面的代码中添加这个。

```
public object endRequestHandle { get; set; }

public object beginRequestHandle { get; set; } 
```

在您的 aspx 页面中，添加以下内容：

```
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
        function beginRequestHandle(sender, Args) {
           //call any function if you want before Ajax update/request begins
        }

        function endRequestHandle(sender, Args) {
         $.getScript("jquery.address-1.4.min.js", function(data, textStatus, jqxhr){});
        } 
```

现在，它可以工作了，脚本将被重新加载并执行。更多关于 $.getScript()[在这里](http://api.jquery.com/jQuery.getScript/)

# git - How can I use Git to track versions of a single file?

> ID：11128434
> 
> 赞同：10
> 
> 时间：2012-06-20T21:23:51.527
> 
> 标签：git

Let's say I have a single file, foo.txt, that I want to manage with Git, and I *don't* want to move it into its own directory out of (let's say) /Users/me/Documents, which also has a ton of other files I don't want to include in a repo with foo.txt. Is this possible?

I tried creating a bare repo (so it would not be named .git):

```
git init --bare .foo.txt 
```

and planned to exclude everything except foo.txt by putting something like this in the info/exclude file:

```
*
!foo.txt 
```

but the problem I ran into is that I can't even do a `git status` as there seems to be no way to pass in a non-standard replacement for the .git directory.

Using a normal .git directory would not work, because it would limit me to ever versioning that one file, or force me to include any other files in the same repo, and I want to be able to version other files in that directory in their own repo.

I realize this is not the use case Git is designed for, but since it's a powerful tool that I'm already familiar with, I'd prefer to use it rather than something else, if there's a way to do that.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T22:49:20.017

You can do exactly what you want if you first initialize a git repository for the file:

```
git init --bare .foo.txt 
```

and then run git like this:

```
git --git-dir=.foo.txt --work-tree=. status 
```

Alias the first part of that second command to `git-foo` and you're off to the races.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T21:37:11.177

I think your best bet is to make a repo in a separate directory, and create a hardlink inside of it for each file you want to include:

```
mkdir some_repo
cd some_repo
git init
ln path/to/file file
# add & commit 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T22:05:48.983

How about using a .gitignore file to create a filter of the files that should be edited. This solution avoids hardlinks which are unsupported on windows.

For example the following file:

```
$ cat .gitignore
*
!data.xml 
```

Configures git to ignore all files except "data.xml".

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-02T14:57:31.127

It's most convenient for me to track a single file in the repository stored in a separate directory.

Make a directory to store the git repository

```
mkdir my-repo-path 
```

Go to worktree directory (where your desired file is located)

```
cd my-worktree-path 
```

Init a separate repository inside the hidden subdirectory `.git` of `my-repo-path`

```
git init --separate-git-dir my-repo-path\.git 
```

Along with the separate repository, git has created a hidden file `.git` in the worktree directory. You can delete it if you like (it may be useful if you are going to track some other file(s) in your worktree directory separately in some separate repository(ies)).

```
del /AH .git 
```

In any text editor open the file `my-repo-path\.git\info\exclude` and add to the end the following lines (where `foo.txt` is the file you'd like to track):

```
*
!foo.txt 
```

In the command prompt go to the git repo and add what will be committed.

```
cd my-repo-path\.git
git add .
git commit 
```

Add a remote origin and push master branch, adding upstream (tracking) reference to it.

```
git remote add origin <url>
git push -u origin master 
```

After that you will add the following commits from your git repo directory (see the second to last step).

# ios - IOS 最佳 Web 视频编码实践 (FFMpeg)

> ID：11128436
> 
> 赞同：2
> 
> 时间：2012-06-20T21:23:58.730
> 
> 标签：ios, video, mobile, ffmpeg, h.264

我正在为客户开发一个在线视频存储系统，主要用 PHP 编写。目前我正在构建我们桌面网站的移动版本。我们的桌面网站允许用户在浏览器中观看视频，就像 YouTube 一样。

我的客户端通过我创建的管理器界面上传视频，我的应用程序使用服务器上的 FFmpeg 将他的视频转码为多种分辨率和比特率。我不是 FFmpeg 方面的专家，虽然我不知道每个单独设置的来龙去脉，但我确实了解它作为一个整体是如何工作的。现在，我们使用 mp4 容器格式和 h.264 编解码器来编码我们的视频。我们的命令看起来像：

> ffmpeg -y -i "INPUT FILE.mov" -f mp4 -s 640x480 -vcodec libx264 -preset fast -maxrate 1500 -bitrate 1000 -bufsize 4096 -acodec libfaac -ab 192 -ac 2 "OUTPUT_FILE.mp4" >> "FILE .log" 2>&1 &

我希望获得有关使用 FFmpeg 在 IOS 和其他移动设备上为网络流编码视频的最佳实践的信息。什么样的分辨率和设置才能制作出好的移动流媒体视频？如何确保在众多 Android 设备中实现最大兼容性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:13:18.030

这篇 Zencoder 博客文章不是 FFmpeg 特定的，而是为您提供 iOS 视频设置的概述。

[http://blog.zencoder.com/2010/09/30/how-to-encode-video-for-mobile-use/](http://blog.zencoder.com/2010/09/30/how-to-encode-video-for-mobile-use/)

# video - FFMPEG 中的 2 个源视频...如何映射音频？

> ID：11128438
> 
> 赞同：1
> 
> 时间：2012-06-20T21:24:09.507
> 
> 标签：video, filter, ffmpeg, video-processing

我目前在 FFMPEG 中并排放置 2 个视频。这是命令：

```
ffmpeg -i input.mov -vf "[in] scale=1280:720, pad=2*1280:720 [left]; movie=right.mov, scale=1280:720 [right]; [left][right]  overlay=1280:0 [out]" -b:v 1000k -vcodec libx264 -an sidebyside.mp4 
```

我现在需要管理音频。我一直在尝试指定：

```
-acodec libfaac -ac 2 -map 0:1 -map 0:2 
```

从第一个输入中获取 2 个音频通道并使用它们。我不断收到错误：

```
[aformat @ 0x7febf2e01fc0] auto-inserting filter 'auto-inserted resampler 0' between the filter 'src' and the filter 'aformat'
    [aresample @ 0x7febf2e02180] [SWR @ 0x7febf40dd000] Input channel layout isnt supported
Error opening filters! 
```

我正在寻找指定哪个视频提供音频的最佳方式！感谢您的任何建议！

这是完整的输出：

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jun  9 2012 21:40:17 with clang 3.0 (tags/Apple/clang-211.10.1)
  configuration: --prefix= --enable-gpl --enable-version3 --enable-nonfree --enable-libx264 --enable-libxvid --enable-postproc --enable-swscale --enable-avfilter --enable-pthreads --enable-yasm --enable-libfaac --enable-libmp3lame --cc=clang --enable-libvorbis
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'left.mov':
  Metadata:
    major_brand     : qt  
    minor_version   : 537199360
    compatible_brands: qt  
    creation_time   : 2012-06-19 21:13:20
  Duration: 00:02:28.81, start: 0.000000, bitrate: 36378 kb/s
    Stream #0:0(eng): Video: mpeg2video (Main) (xdvf / 0x66766478), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 35000 kb/s, 29.97 fps, 29.97 tbr, 2997 tbn, 59.94 tbc
    Metadata:
      creation_time   : 2012-06-19 21:13:20
      handler_name    : Apple Alias Data Handler
    Stream #0:1(eng): Audio: pcm_s16le (sowt / 0x74776F73), 48000 Hz, 1 channels (FL), s16, 768 kb/s
    Metadata:
      creation_time   : 2012-06-19 21:13:20
      handler_name    : Apple Alias Data Handler
    Stream #0:2(eng): Audio: pcm_s16le (sowt / 0x74776F73), 48000 Hz, 1 channels (FR), s16, 768 kb/s
    Metadata:
      creation_time   : 2012-06-19 21:13:20
      handler_name    : Apple Alias Data Handler
    Stream #0:3(eng): Data: none (tmcd / 0x64636D74)
    Metadata:
      creation_time   : 2012-06-19 21:13:20
      handler_name    : Apple Alias Data Handler
      timecode        : 02:20:28;08
File 'output.mp4' already exists. Overwrite ? [y/N] y
w:1920 h:1080 pixfmt:yuv420p tb:1/2997 sar:1/1 sws_param:flags=2
[buffersink @ 0x7febf2c18c80] No opaque field provided
[movie @ 0x7febf2c191c0] seek_point:0 format_name:(null) file_name:/Users/danielpcoffey/Desktop/tommy.mov stream_index:0
[scale @ 0x7febf2c19320] w:1920 h:1080 fmt:yuv420p sar:1/1 -> w:1280 h:720 fmt:yuv420p sar:1/1 flags:0x4
[pad @ 0x7febf2c19800] w:1280 h:720 -> w:2560 h:720 x:0 y:0 color:0x000000FF
[scale @ 0x7febf2c1ca40] w:1920 h:1080 fmt:yuv420p sar:1/1 -> w:1280 h:720 fmt:yuva420p sar:1/1 flags:0x4
[overlay @ 0x7febf2c1ce20] main w:2560 h:720 fmt:yuv420p overlay x:1280 y:0 w:1280 h:720 fmt:yuva420p
[overlay @ 0x7febf2c1ce20] main_tb:1/2997 overlay_tb:1/2997 -> tb:1/2997 exact:1
[aformat @ 0x7febf2e01fc0] auto-inserting filter 'auto-inserted resampler 0' between the filter 'src' and the filter 'aformat'
[aresample @ 0x7febf2e02180] [SWR @ 0x7febf40dd000] Input channel layout isnt supported
Error opening filters! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:46:50.107

电影视频过滤器只接收视频流，而不是音频，因此您可能根本不需要映射音频。

如果您确实想更好地控制音频，使用较新版本的 FFmpeg，您可以按类型而不是仅按数字选择输出流，即，`-map 0:a -map 1:v`这更简单，更不容易出错。

因此，对于您的情况，我建议（从输入中获取所有音频）：

```
ffmpeg -i input.mov -vf "...movie=right.mov..." -c:a libfaac -ac 2 out.mp4 
```

或（从输入中获取第一个和第二个音频流）

```
ffmpeg -i input.mov -vf "...movie=right.mov..." -c:a libfaac -ac 2 -map 0:v -map 0:a:0 -map 0:a:1 out.mp4 
```

# java - Java Spring：使用 JdbcTemplates 使用 IN 子句执行 mysql 查询的最佳方法是什么？

> ID：11128441
> 
> 赞同：1
> 
> 时间：2012-06-20T21:24:23.467
> 
> 标签：java, mysql, spring, jdbctemplate

如果我在引号中有一堆东西，我会发现自己在做类似的事情：

```
String sql = "SELECT col1, col2, col3 "
           + "FROM my_awesome_table "
           + "WHERE strValue IN (%s)";

sql = String.format(sql, COMMA_JOINER.join(Iterables.transform(strValues,
                                                               new Function<String, String>() {
                                                                   @Override
                                                                   public String apply(String input) {
                                                                       return "'" + input.replaceAll("'", "''") + "'";
                                                                   }
                                                               })));

List<ResultObject> resultObjects =
        getSimpleJdbcTemplate().query(sql, resultObjectRowMapper()); 
```

但是我必须构建自己的 IN 子句，用单引号括住字符串，然后自己转义它们，这似乎很奇怪。必须有更好的方法！一些额外的上下文：我不希望查询太多（最多几十或几百行），只要我们不一次查询一行，优化就不是太大的问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T21:35:16.140

首先，即使没有 JdbcTemplate，您也应该使用准备好的语句，从而让 JDBC 驱动程序为您转义引号。SQL 查询类似于

```
select ... where strValue in (?, ?, ?, ?) 
```

并且您将使用 绑定每个参数`PreparedStatement.setParameter()`，而无需转义任何内容。

使用[NamedParameterJdbcTemplate](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html)更容易，因为 Spring 允许对整个字符串集合使用单个参数。[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#jdbc-NamedParameterJdbcTemplate)中解释了它的用法：

```
String sql = "select ... from ... where strValue in :listOfValues";
Map namedParameters = Collections.singletonMap("listOfValues", strValues);
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:32:58.520

根据[springsource](http://forum.springsource.org/archive/index.php/t-51820.html)上的这个线程，以下应该有效：

```
String sql = "SELECT col1, col2, col3 "
       + "FROM my_awesome_table "
       + "WHERE strValue IN (:items)";

getSimpleJdbcTemplate().query(
    sql
,   Collections.singletonMap("items", strValues)
,   resultObjectRowMapper()
); 
```

# wpf - 无效的 URI：无法解析授权/主机

> ID：11128443
> 
> 赞同：0
> 
> 时间：2012-06-20T21:24:24.987
> 
> 标签：wpf, visual-studio-2010, xaml, uri

我正在使用带有 Visual Basic 和 WPF 的 Visual Studio 2010。在为主窗口设置背景图像的 2 年开发过程中，我的程序中有这行 XAML 代码。它总是完美地工作，绝对没有问题：

```
<ImageBrush ImageSource="/MyProgram;component/Images/background.jpg"
Stretch="UniformToFill" TileMode="None" /> 
```

现在，我得到了一台新计算机并复制了我的 VS2010 项目目录。突然之间，我在设计视图中遇到了这个错误：

```
Invalid URI: The Authority/Host could not be parsed 
```

设计视图完全冻结，不会让我做任何事情。但是，该程序仍然编译得很好，背景图像和所有。但显然，如果没有设计视图，我将无法继续我的程序工作。我该如何解决这个问题？

顺便说一句，如果有人问，这个程序在我的旧电脑上工作和不在我的新电脑上工作之间根本没有改变。但是，VS2010 的版本已从 Premium 更改为 Ultimate，如果这有所不同的话。

一些附加信息：我删除了有问题的 XAML 代码行，并尝试通过设计视图（属性编辑器）将背景图像重新添加到窗口中。只要背景设置为纯色，一切都可以正常工作，但是一旦我单击按钮将图像设置为背景，甚至在它让我选择图像之前，我都会收到一个错误，指出属性的值无效，引用与以前相同的 Invalid URI 错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T21:23:21.340

当您的代码/**图像**/文件位于**共享网络驱动器**上时，通常会发生此问题。
这是你的情况吗？
如果是这样，只需将所有文件复制到**本地驱动器**即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:10:44.417

注意：这也发生在`<Image>`控件上（甚至没有指定源）。例如：

```
<Image Margin="60,72,71,198" Name="imageResults" Stretch="Uniform" Visibility="Visible" /> 
```

将其移动到本地驱动器使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T09:26:01.950

1) 将驱动器映射到您的共享，如 S:\SERVEUR\TEST
2) 从该驱动器打开文件，而不是从 \SERVEUR\TEST
3) 将映射路径放入源，如“image source="S:\SERVEUR\测试””

# bash - Bash 域的 IP 地址综合列表

> ID：11128451
> 
> 赞同：7
> 
> 时间：2012-06-20T21:24:50.670
> 
> 标签：bash, sed, awk, grep

我正在尝试生成给定域名的所有可能 IP 地址的列表。我想我很接近但不知道我错过了什么（或者是否有更好的方法）。

首先，我创建一个域变体列表，如下所示：

```
 webkinz.com
 www.webkinz.com 
```

然后我遍历这个列表并像这样对每个变体运行 dig：

```
 while read domain; do
    IPs=`dig $domain | grep $domain | grep -v ';' | awk '{ print $5 }'`;
    echo " ${IPs}" >> /tmp/IPs; #array
 done < /tmp/mylist

 sort -u /tmp/IPs > /tmp/TheIPs; #remove duplicates
 cat /tmp/TheIPs| tr -d "\n" > /tmp/IPs  #remove new lines (making it 1 long line) 
```

我的 IP 文件如下所示：

```
 66.48.69.100 www.webkinz.com.edgesuite.net.a1339.g.akamai.net. 
```

只有3个问题。:-(

1.  当我只期望 IP 地址时，Dig 返回域。
2.  我的脚本如何删除域之间的空格。
3.  `dig www.webkinz.com`缺少某些 IP 地址。

那么，我该怎么做呢？我是否以某种方式确定 dig 是否返回另一个域而不是 IP 地址并在该域上运行 dig？我是否只是忽略从 dig 返回的域名并认为 ip 地址就足够了？如果可能，我想捕获将解析为域的每个 IP 地址。我不认为这应该这么难。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T00:33:26.330

为了只获取 IP 地址，请使用`dig +short`：

```
#!/bin/bash
while read -r domain
do
    dig +short "$domain"
done < /tmp/mylist | sort -u | awk '{printf "%s ", $0} END {printf "\n"}' > outputfile 
```

或者

```
#!/bin/bash
echo $(xargs -a /tmp/mylist dig +short | sort -u) > outputfile 
```

将 echo 与未引用的参数一起使用会删除换行符，但末尾除外。

您不需要任何中间变量或临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:18:20.923

当不是 IP 地址时，在脚本中使用以下修改来解析 dns 名称

```
while read domain; do
    IPs=`dig $domain | grep $domain | grep -v ';' | awk '{ print $5 }'`;

    # detect if '$IPs' is an ip address 
    grep "\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}" <(echo $IPs) >/dev/null 2>&1

    if [ $? -eq 0 ]; then 
        # if IPs is an ip address add it to the file   
        echo " ${IPs}" >> /tmp/IPs; #array          
    else 
        # if not, resolve the domain name using the 'host' command (take just the first line using 'head -1') 
        host $IPs | grep "has address" | head -1 | awk '{ print $4 }' >> /tmp/IPs
    fi

done < mylist 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:19:43.397

`dig`给出不同类型的响应，因此第五列可能包含域名。仅当响应行是`A`响应时，第五列才会是 IP 地址。我会建议：

```
dig -t A $domain 
```

代替

```
dig $domain 
```

限制类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T20:47:12.650

我知道这已经回答了；但是，对于 IPv4 和 IPv6 地址列表，请尝试以下操作：

脚本：

```
info=$(host google.com); echo "$info" | grep "has address" | awk '{print $4}'; echo "$info" | grep "IPv6" | awk '{print $5}'

host - get the IP addresses
grep - filter the addresses
awk - print the correct strings 
```

脚本（更少的行）：

```
host google.com | awk '/address/ {print $NF}' 
```

输出：

```
74.125.45.102
74.125.45.113
74.125.45.138
74.125.45.139
74.125.45.100
74.125.45.101
2607:f8b0:4002:c01::8a 
```

# firefox - 在 Firefox 附加组件中调试 JavaScript

> ID：11128454
> 
> 赞同：1
> 
> 时间：2012-06-20T21:24:59.890
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我基本上是在使用 Firefox Add-On SDK 向小部件添加面板。我已经将我的 HTML 文件与我的 CSS 和 JavaScript 一起放在了数据目录中。该页面不起作用，我正在尝试查看是否有任何错误。但是，没有安装 Firebug，所以我似乎无法找到我的 JavaScript 错误发生在哪里。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:55:46.987

If you don't want to install firebug, you can try the basic error console (CTL+SHIFT+J by default).

If you want another plugin than firebug then you can use 'web developer' (https://addons.mozilla.org/en-US/firefox/addon/web-developer/) which will give you a JS console among other things.

# twitter-bootstrap - Nivoslider 和 Twitter 引导程序

> ID：11128455
> 
> 赞同：0
> 
> 时间：2012-06-20T21:25:02.203
> 
> 标签：twitter-bootstrap, nivo-slider

Nivo 滑块和 Twitter 引导程序彼此不喜欢！

如果你使用拇指，你会得到各种疯狂的表现。

我找到了一个 css 修复程序，我将在下面添加（希望能帮助其他人解决这个问题）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:25:03.013

将 nivo-slider.css 中的 css 更改为：

```
.nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
} 
```

到

```
.nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
    /* this is the fix */
    vertical-align: baseline !important;
    max-width: none !important;
} 
```

# asp.net-mvc - 如何定位和调用控制器动作？

> ID：11128459
> 
> 赞同：0
> 
> 时间：2012-06-20T21:25:19.347
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我今天刚开始学习 MVC3，所以请原谅任何愚蠢（特别是一个名字不好的标题）。

此网址无效：

```
.../Test 
```

但是这个可以：

```
.../Index 
```

这是我的代码：

```
public class MyController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
}

public static class MyExt
{
    public static ActionResult Test(this MyController test)
    {
        return test.Index();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:26:22.637

扩展方法不起作用，因为`ControllerActionInvoker`只调用控制器的方法。[您可以在此处](http://blog.codeville.net/2007/11/20/aspnet-mvc-pipeline-lifecycle/)阅读有关 ASP.NET MVC 管道的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:05:58.667

我不确定 MVC 管道是否能够“看到”扩展方法 Test 以便使用默认路由表自动映射它。MVC 使用基于约定的方法。它认为所有控制器都在特定位置等。它可能不会考虑寻找扩展方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:10:43.827

为了达到同样的效果，最好在 global.asax 中设置一条新路线

```
routes.MapRoute(
    "Test",
    "Home/Test",
    new { controller = "Home", action = "Index" }); 
```

如果你想对所有控制器都一样

```
routes.MapRoute(
    "Test",
    "{controller}/Test",
    new { controller = "Home", action = "Index" }); 
```

对不起，但我仍然无法弄清楚你在这里想要达到什么目的

查看以下链接以获取有关路由的概述： [http ://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)

# extjs - extjs 在 Ext.grid.panel 中嵌入条形图系列

> ID：11128462
> 
> 赞同：1
> 
> 时间：2012-06-20T21:25:28.307
> 
> 标签：extjs, extjs4

有没有办法将整数数据绘制/可视化为系列条形图而不是**Ext.panel.grid**中的数字？

```
Ext.onReady(function () {
    Ext.define('spaceManager', {
        extend: 'Ext.data.Model',
        fields: [{
            name: 'type'
        }, {
            name: 'totalRecsCnt',
            type: 'int'
        }, {
            name: 'usedRecsCnt',
            type: 'int'
        }, {
            name: 'dSize',
            type: 'int'
        }]
    });

    var grid2 = Ext.create('Ext.grid.Panel', {
        store: getLocalStore(),
        selModel: sm,
        columns: [{
            text: "Type",
            width: 100,
            dataIndex: 'type'
        }, {
            text: "Total Records Count",
            dataIndex: 'totalRecCnt'
        }, {
            text: "Used Records Count",
            dataIndex: 'usedRecCnt'
        }, {
            text: "Disk Size",
            width: 135,
            dataIndex: 'dSize'
        }],
        columnLines: true,
        width: 600,
        height: 300,
        frame: true,
        title: 'Space Manager',
        iconCls: 'icon-grid',
        renderTo: Ext.getBody()
    });
}); 
```

我要做的是从 spaceManager 模型中为 dSize 字段绘制条形图 - dSize 列应绘制为条形图系列数据，而不是显示为数字列表。

# git - git-upload-pack：找不到命令

> ID：11128464
> 
> 赞同：23
> 
> 时间：2012-06-20T21:25:41.603
> 
> 标签：git, bash, shell, command-line

我已经阅读了这个答案大约八五次，但有些东西我没有正确理解：

[git-upload-pack：找不到命令，如何正确解决此问题](https://stackoverflow.com/questions/225291/git-upload-pack-command-not-found-how-to-fix-this-correctly)

当我尝试在我的服务器上克隆存储库时，我得到以下信息：

```
bash: git-upload-pack: command not found 
```

但是当我通过给克隆`-u /usr/local/bin/git-upload-pack`选项进行克隆时，一切正常。

我想这是有道理的，因为那是我服务器上 git-upload-pack 的位置。

最佳答案表明我在服务器上的 .bashrc 文件需要更新以反映这一点，因为`ssh you@remotemachine echo \$PATH`不返回`/usr/local/bin`. （它返回`/usr/bin:/bin:/usr/sbin:/sbin`）。

但是当我查看我的 .bashrc 文件时，它包含：

```
export PATH=/usr/local/bin:$PATH 
```

所以现在我很困惑。

我需要做些什么来避免`-u /usr/local/bin/git-upload-pack`每次都使用该选项？为什么不`ssh you@remotemachine echo \$PATH`返回`/usr/local/bin`？这与登录和非登录外壳有关吗？

请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T14:59:49.880

这与此问题有关：

[https://serverfault.com/questions/130834/svnssh-getting-bash-to-load-my-path-over-ssh](https://serverfault.com/questions/130834/svnssh-getting-bash-to-load-my-path-over-ssh)

默认情况下，在不进入交互模式的情况下发送命令时，SSH 不会加载您的环境。

好的解决方案是带有 .ssh/environment 文件的解决方案：

在 /etc/ssh/sshd_config 添加：

```
PermitUserEnvironment yes 
```

然后只需创建 .ssh/ 目录并将环境转储到 .ssh/enviroment：

```
cd ~/
mkdir .ssh
env > .ssh/environment 
```

重启 SSH

```
/etc/init.d/sshd restart 
```

现在，当您从本地计算机执行此操作时：

```
ssh you@server.com  "which git-upload-pack" 
```

你会得到

```
/usr/local/bin/git-upload-pack 
```

并且 git clone 会工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-20T21:31:23.087

是的，它与登录和非登录外壳有关。该`.bashrc`文件仅在非登录 shell 中加载。您可以`.bash_profile`用于登录外壳。只需`PATH`在`.bash_profile`文件中添加相同的修改，就可以了。

```
export PATH=/usr/local/bin:$PATH 
```

您可能会发现[这是一篇关于 .bashrc 和 .bash_profile 以及登录和非登录 shell 之间区别的有趣文章。](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-21T07:36:52.297

在我的案例中，我通过登录远程机器、Ubuntu 机器并执行`sudo apt-get install git`. 不确定这是否矫枉过正，但立即为我解决了问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-15T13:19:01.733

**我对这个问题的解决方案**

1.  检查远程机器上 git-upload-pack 的路径：

    ```
    ssh yourname@IP-addressORdomain 'which git-upload-pack' 
    ```

如果它给出了路径 - 复制它（不带`git-upload-pack`斜杠和斜杠。例如：、、、`/usr/bin`等`/home/yourname/bin`）`/whatever/gituploadpack/path`。

1.  在登录 shell 期间检查远程计算机上的 PATH：

    ```
    ssh yourname@IP-addressORdomain 'echo $PATH' 
    ```

没有这样的路径（`/whatever/gituploadpack/path`），不是吗？好的！

1.  登录到您的远程机器：

    ```
    ssh yourname@IP-addressORdomain 
    ```

2.  打开 .bashrc_profile：

    ```
    nano /home/yourname/.bashrc_profile 
    ```

3.  找到这些行（如果有）：

    ```
    if [ -f ~/.bashrc ]; then
         ~/.bashrc
    fi 
    ```

...并将它们更改为：

```
 if [ -f ~/.bashrc ]; then
        source ~/.bashrc
    fi 
```

1.  打开.bashrc：

    ```
    nano /home/yourname/.bashrc 
    ```

2.  添加这 4 行：

    ```
    if [ -d "/whatever/gituploadpack/path" ] ; then
      PATH="$PATH:/whatever/gituploadpack/path"
    fi
    export PATH 
    ```

3.  退出远程机器：

    ```
    exit 
    ```

4.  在登录 shell 期间检查远程计算机上的 PATH：

    ```
    ssh yourname@IP-addressORdomain 'echo $PATH' 
    ```

你看到了`/whatever/gituploadpack/path`吗？恭喜！

请注意，现在您不仅解决了`git-upload-pack`问题，还解决`git-receive-pack`了您的`/whatever/gituploadpack/path`!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T01:53:28.370

我收到以下错误： `git-credential-osxkeychain died of signal 11` 当我在做 git pull 时，我会得到 `fatal: [https://github.com/.../../info/refs?service=git-upload-pack](https://github.com/.../../info/refs?service=git-upload-pack) not found: did you run git update-server-info on the server?`

我猜这与我之前在钥匙串中无效的 github 凭据有关。

*   使用命令空间打开钥匙串访问工具
*   在钥匙串访问工具中搜索github
*   删除所有与 github 相关的条目（因为我不再需要它）
*   按照设置 git 密码缓存部分再次[设置 git](https://help.github.com/articles/set-up-git)
*   有效

以防上述任何答案都无济于事。

# javascript - jQuery单击事件未执行

> ID：11128465
> 
> 赞同：0
> 
> 时间：2012-06-20T21:25:44.480
> 
> 标签：javascript, jquery, asp.net

我`click`在 jQuery 中有一个函数，但它似乎永远不会执行。我需要另一双眼睛：

ASP 按钮：

```
<asp:Button ID="btnSubmit" runat="server" Text="Transfer" CssClass="btnSubmit" Enabled="false" /> 
```

Javascript/jQuery

```
$(".btnSubmit").click(function () {

    var count = ticks.length;
    var x;

    for (var i = 0; i < count; i++) {
        if (ticks[i].Symbol == pair) {
            x = $(".txtAmount").val() * ticks[i].Ask;
            if (x != null || x != 0) {
                $(".txtResult").val() = "=" + x;
            }
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:31:44.190

第 1 步：将您的点击功能替换为：

```
$('.btnSubmit').click(function(){
    alert('works');
}); 
```

如果您收到警报，则所有内部代码都有问题。在那里帮不了你太多，因为它有一堆你没有向我们展示的变量和类名。

如果它不起作用......也许包括 jQuery 在内的问题是否正确？

无论如何，这些只是调试的步骤。简化您的代码以排除部分/行并重新添加功能直到它中断。您添加的最后一件事是损坏的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:58:08.603

您的“txtResult”元素是文本框吗？您不能像在这里一样为文本框分配值：

```
$(".txtResult").val() = "=" + x; 
```

你需要这样做：

```
$(".txtResult")[0].value = "=" + x; 
```

小例子：http: [//jsfiddle.net/wqZmv/](http://jsfiddle.net/wqZmv/)

否则，如果这是一个不同的问题，我将需要查看更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:43:39.743

似乎 Umbraco 存在问题，如果有人能澄清为什么会这样，我会很感激的。

现在我的解决方案涉及执行以下操作：

替换`<asp:Button ID="MyButton" Text="Transfer"></asp:Button>`为`<input type="submit" value="Transfer" onclick="calculate()" />`

在 jquery 事件上使用简单的 javascript 事件。我可以让 jquery 在 umbraco 之外工作。

我替换了 asp:Button 因为我不需要点击回发，并且输入字段可以为我做同样的工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T21:27:05.480

尝试这个：

```
$("#btnSubmit").click(function () {

var count = ticks.length;
var x;

for (var i = 0; i < count; i++) {
    if (ticks[i].Symbol == pair) {
        x = $(".txtAmount").val() * ticks[i].Ask;
        if (x != null || x != 0) {
            $(".txtResult").val() = "=" + x;
        }
    }
} 
```

});

# box-api - 以管理员身份获取其他用户的事件

> ID：11128467
> 
> 赞同：0
> 
> 时间：2012-06-20T21:25:59.840
> 
> 标签：box-api

我有企业邮箱管理员权限。如何获取用户的事件。我在我的网络“管理控制台”（报告）上看到了这一点。

```
curl https://api.box.com/2.0/events -H "Authorization: BoxAuth api_key=....&auth_token=....." 
```

上面的命令只是给我的事件而不是企业级事件。

提前致谢-Praveen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:26:12.780

中还没有这样的东西`v2`，但是，我们有一个未发布的方法`v1`应该有助于这个用例。

# ibm-midrange - IBM AS/400 无法编译 - RNS9308 编译停止。在程序中发现严重 30 错误

> ID：11128468
> 
> 赞同：0
> 
> 时间：2012-06-20T21:26:03.140
> 
> 标签：ibm-midrange, rpgle, ibm-rad

在为我的 AS/400 课程做最后一个项目时，我遇到了这个我似乎无法纠正的问题。

![在此处输入图像描述](../Images/3ede4bd98165853a19ee8bc0882efba9.png)

我尝试编译的显示文件 (CHAP12EXP.rpgle) 已提供给我，我不应该对其进行编辑。据我了解，我编译了 CHAP12DSP 并且成功了，EMPPFL 也一样；这两个文件可以在下面的屏幕截图的左侧看到。

现在另一个屏幕截图来自物理文件 EMPPF：

![在此处输入图像描述](../Images/b98c2c201b4036033d4035ea91980af2.png)

最后的截图来自编译前的 CHAP12DSP.dspf。（屏幕 2）

![在此处输入图像描述](../Images/2f15d8f3540c384b062db81f5a491519.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:57:53.637

显示文件中定义的字段长度`TITLE`与物理文件中定义的长度不匹配。`FIRSTNAME``CHAP12DSP``EMPPFL`

检查并比较源 DDS 的显示文件和物理文件的字段定义`TITLE`和`FIRSTNAME`.

# php - Codeigniter 控制器中的行数

> ID：11128469
> 
> 赞同：4
> 
> 时间：2012-06-20T21:26:07.693
> 
> 标签：php, codeigniter

我有一个模型，我可以从数据库中选择正确的数据，如下所示：

```
<?php
    class vacancies extends CI_Model{

        function vacancies()
        {
            $query = $this->db->query("SELECT * FROM ecc_vacancies_vac WHERE active_vac = 1 AND end_vac >= CURDATE() ORDER BY date_vac DESC");

            if($query->num_rows() >= 1){
                foreach($query->result() as $row){
                    $data[] = $row;
                }
                return $data;
            }
        }

    } 
```

和一个控制器在发送到视图之前处理这些数据，如下所示：

```
function index()
{
    //check if there any available vacancies

    $this->load->model('vacancies');
    $data['vacancies'] = $this->vacancies->vacancies();
    // then i load the views here 
 } 
```

我需要做的是知道控制器中返回的总行数，以便我可以将数字发送到视图以供以后使用。

使用活动记录时，我曾经使用这行代码：

```
$data['num_rows'] = $$data['vacancies']->num_rows(); 
```

在我的情况下如何定义它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:32:26.177

PHP来救援。[由于您的模型方法返回一个数组，因此您可以通过简单的 count() 调用](http://php.net/count)获得总行数。

所以，例如，

```
$this->load->model('vacancies');
$data['vacancies'] = $this->vacancies->vacancies();
$data['number_of_vacancies'] = count($data['vacancies']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:29:57.080

您正在从模型中返回一个数组，因此在控制器中您可以使用 PHP 的 count() 函数：

```
$data['num_rows'] = count($data['vacancies']); 
```

您的模型也存在问题，如果没有结果，该函数将不会返回数组，如果您稍后将其视为数组，可能会导致问题。您应该在 if 语句之前为 $data 添加一个初始化，然后总是返回一个空数组：

```
function vacancies()
{
    $query = $this->db->query("SELECT * FROM ecc_vacancies_vac WHERE active_vac = 1 AND end_vac >= CURDATE() ORDER BY date_vac DESC");

    $data = array();
    if ($query->num_rows() >= 1){
        foreach ($query->result() as $row){
            $data[] = $row;
        }
    }
    return $data;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T21:33:55.330

行数（）；仅当您仍在模型中处理“查询部分”时才有效。它指的是 DB 对象。您已经返回了数据。试试这个：

```
 $data['num_rows'] = count($data['vacancies']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-12T19:30:59.370

为了帮助您：

```
if($query->num_rows()!==0){
   return $query->result_array();
}else{
   return 0;
} 
```

返回 0 并在视图中进行 if else 语句

```
if($result!=0){
   // No results found
}else{
   // Do something
} 
```

# c# - 如何将自定义异常消息返回给 Ajax 调用？

> ID：11128470
> 
> 赞同：1
> 
> 时间：2012-06-20T21:26:09.933
> 
> 标签：c#, asp.net, jquery

我想在 ajax 请求错误时返回特定消息。

```
[WebMethod]
public static AjaxReturnObject SubmitWager(string token, string track, string race, string amount, string pool, string runners)
{
    try
    {
        var serviceReturn = Services.Account.SubmitWager("", track, race, pool, amount, runners);
        return new AjaxReturnObject(serviceReturn.AccountToken, serviceReturn.Payload);
    }
    catch (CustomServiceException<string> e)
    {
        throw new Exception(e.Message);
    }
} 
```

调试说当我需要它时它会遇到我的问题，但是当我查看我的 jquery ajax 调用中的 xhr 时，它总是说“处理请求时出错。”

```
error: function (xhr, textStatus, errorThrown) {
            log(xhr, textStatus, errorThrown);
} 
```

如何让我想要的消息返回到 xhr.responseText 下的 ajax 调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:16:13.387

尝试`Throw`而不是`Throw new`在 catch 块中。一旦你解析 XHR.responseText，异常消息将包含在“消息”中，例如：

```
$.ajax({
       type: "POST",
       //... other parameters
       error: function(XHR, errStatus, errorThrown) {
             var err = JSON.parse(XHR.responseText);
             errorMessage = err.Message;
       }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:57:40.257

也许更好的方法是使用检查成功标志的代码定义 AJAX 请求的成功回调：

**C＃**

```
[WebMethod]
public static AjaxReturnObject SubmitWager(string token, string track, string race,   string amount, string pool, string runners)
{
try
{
    var serviceReturn = Services.Account.SubmitWager("", track, race, pool, amount, runners);
    return new AjaxReturnObject(serviceReturn.AccountToken, serviceReturn.Payload);
}
catch (CustomServiceException<string> e)
{
    return new AjaxReturnObject(0, e.Message();
}
} 
```

* * *

**Javascript**

```
$.ajax({
  ...
  success: function (data) {
    if (data.AccountToken == 0) {
      // There was an error 
      log(data.Payload);
    }
    else {
      // your code
    }
  }
}); 
```

我提供这种替代方案是因为我不确定如果您在服务器端代码中抛出错误，该函数是否会返回任何内容。您收到的错误是客户端，`error`回调实际上是指是否可以发出请求。

# json - POST请求中的json？

> ID：11128475
> 
> 赞同：0
> 
> 时间：2012-06-20T21:26:37.110
> 
> 标签：json, post, request

将 JSON 数据嵌入 POST 请求中是典型的还是首选的方法？例如，如果我可能有五个要发送的属性，我应该将它嵌入到 url 中还是将其填充到 POST 请求的正文中？
所以它会是：

```
www.example.com?attr1=x&attr2=y&attr3=z.... 
```

与 POST 正文相比：

```
{
     "attr1": x,
     "attr2": y,
     "attr2": z
} 
```

我只是想知道哪种是标准或最佳实践方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:39:19.377

我认为这取决于情况。如果您传递的参数很短，并且您不介意将它们暴露在浏览器地址栏中，那么 get 方法就可以了。另一方面，如果你的参数很长，你应该考虑 post 方法。

“获取”方法对大小有限制，具体取决于您使用的浏览器（参见[http://www.boutell.com/newfaq/misc/urllength.html](http://www.boutell.com/newfaq/misc/urllength.html)）。“发布”方法的大小限制是服务器端的设置。

# performance - 如何在 Dart 中快速/动态加载类？

> ID：11128476
> 
> 赞同：4
> 
> 时间：2012-06-20T21:26:39.787
> 
> 标签：performance, dart

我正在考虑将 Dart 用于我要编写的框架。我发现的一个问题是我不能延迟加载我的类或执行一些加载更多代码的替代方法。我希望在用户浏览到网站的不同区域而不重新加载页面（（ab）使用历史 API）时动态加载更多代码，但据我所知，我必须预先加载所有代码。这只是行不通，因为它会给出可怕的首次加载时间，并且每次我更改**任何**代码时，用户都必须重新下载网站的所有代码。

在 javascript 中执行此操作的程序示例是[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)。可以选择仅在需要时加载画笔。

在 dart 中，您可以加载隔离并向后传递一些序列化版本以完成语法突出显示，但对于我的应用程序，我需要事件侦听器和处理程序以及大量 DOM 和 CSS 操作，我无法编写用于使用原始类型完成所有这些操作的自定义 API。

我想知道是否有办法在 Dart 中实现这一点，或者是否有任何工作可以实现这种技术。（否则它会回到 JavaScript）。

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:50:51.480

据我所知，没有办法动态地将代码动态加载到已经运行的 Dart 程序中（尽管当反射到达 Dart 时这可能会改变）。

你可以加载一个不同的 Dart 程序，然后使用**postMessage**与它通信，但这有点矫枉过正。也许你应该为它打开一个错误。我们还有一个庞大的 Dart 代码库，绝对可以使用 GWT 代码拆分之类的东西来加快它的速度。

# javascript - javascript属性存储这个

> ID：11128478
> 
> 赞同：-6
> 
> 时间：2012-06-20T21:26:47.063
> 
> 标签：javascript, jquery

可能会出现以下情况吗？

```
var obj = {
    data:'some data',
    init:function(){
        console.log(this.data);
        console.log(obj.data);
    }
}
obj.init(); 
```

在这里，`console.log(this.data)`两者`console.log(obj.data)`都返回相同的值。

是否可以`this`像我存储的那样存储在某个变量`'some data'`中`data`？

假设我们以某种方式存储`this`在`$this`. 然后，`console.log($this.data)`应该像`console.log(this.data)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:29:36.947

我不知道您为什么要按照您的要求做，但是是的，您可以做到：

```
var obj = {
    data:'some data',
    init:function(){
        this.self = this;
        console.log(this.data);
        console.log(obj.data);
        console.log(this.self);
    }
}
obj.init(); 
```

如果您解释为什么要尝试这样做，我们可能会提供更合适的建议，并且几乎没有理由将 的值保存`this`在实例变量中，因为`this`检索实例变量已经需要 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:29:11.680

就像...分配？

```
var $this = this; 
```

编辑：如果你的意思是这样的：

```
var obj = {
    selfReference: this
}; 
```

那么不，那是不可能的。您必须在之后分配它：

```
var obj = {};
obj.selfReference = obj; 
```

不过，我不确定您为什么要首先这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T21:31:17.757

存储`this`在 Javascript 中非常频繁地完成，以避免函数范围的问题。通常用于存储的变量`this`被称为`that`：

`var that = this`

您还可以使用设置您正在调用的函数的 this 对象

```
myFunction.call(myCustomThisReference, param1, param2) 
```

或者

```
myFunction.apply(myCustomThisReference, [param1,param2] 
```

查看[电话](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)并[申请](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)了解更多详情

# android - android：无需打开即可获取图像尺寸

> ID：11128481
> 
> 赞同：51
> 
> 时间：2012-06-20T21:27:05.207
> 
> 标签：android

我想在将它们加载到 RAM 之前获取存储在 sdcard 上的图像的宽度和高度（以像素为单位）。我需要知道大小，所以我可以在加载它们时相应地对它们进行下采样。如果不对它们进行下采样，我会得到 OutOfMemoryException。

任何人都知道如何获取图像文件的尺寸？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-06-20T21:30:53.957

将仅解码边界的选项传递给工厂：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;

//Returns null, sizes are in the options variable
BitmapFactory.decodeFile("/sdcard/image.png", options);
int width = options.outWidth;
int height = options.outHeight;
//If you want, the MIME type will also be decoded (if possible)
String type = options.outMimeType; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-05T02:43:02.430

实际上，还有另一种方法可以解决这个问题。使用下面的方法，我们可以避免文件和URI的麻烦。

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
ParcelFileDescriptor fd = mContext.getContentResolver().openFileDescriptor(u, "r"); // u is your Uri
BitmapFactory.decodeFileDescriptor(fd.getFileDescriptor(), null, options); 
```

# java - 使用 Joda Time 获取圣诞节前的时间

> ID：11128484
> 
> 赞同：0
> 
> 时间：2012-06-20T21:27:39.723
> 
> 标签：java, datetime, date, jodatime, duration

我需要以毫秒为单位计算圣诞节前的时间。我正在使用 joda time 并尝试使用`Period`，但是在 Google 上浪费了很多时间之后，我意识到这是错误的，我可以计算毫秒。但是，我的实现不正确，我得到了错误的结果。

我的代码：

```
DateTime start = new DateTime(DateTime.now());
DateTime end = new DateTime(2012, 12, 25, 0, 0, 0 ,0);
org.joda.time.Duration duration = new Period(end, start).toDurationFrom(new Instant());
int millis = (int) DateTimeUtils.getDurationMillis(duration);
Log.d("Millis", String.valueOf(millis)); 
```

我尝试查看 Joda Time Documentation，但找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T21:30:25.837

只计算毫秒，这很容易——根本不需要经过 a `Period`。

```
long milliseconds = end.getMillis() - start.getMillis(); 
```

（目前尚不清楚您为什么要`new DateTime(DateTime.now())`顺便打电话 - 就`DateTime.now()`足够了。）

编辑：它对我来说很好：

```
import org.joda.time.*;

public class Test {
    public static void main(String[] args) {
        DateTime start = DateTime.now();
        DateTime end = new DateTime(2012, 12, 25, 0, 0, 0, 0);
        System.out.println(end.getMillis() - start.getMillis());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:12:17.853

`int`长度为 32 位的值可以存储介于0`-2147483648`和试图设置一个更大的值，类型是 64 位，因此它保存更大的值，在这种情况下它可能确实如此，对于一个 int，同样的事情会发生，这就是为什么你可能会得到错误的值。`2147483647``unsigned``4294967295``2147483647 + 1 == -2147483648``long``can`

`DateTimeUtils.getDurationMillis`返回一个`long`

# iphone - 根据该单元格中数据的属性值仅删除特定的 UITableViewCell

> ID：11128495
> 
> 赞同：1
> 
> 时间：2012-06-20T21:28:41.273
> 
> 标签：iphone, ios, uitableview

我有一个 UITableView 列出了来自不同用户的评论。我将所有评论保存到 Core Data。我还实现了 NSFetchedResultsController。评论的属性之一是用户名 - 发表评论的用户。

我只希望用户能够删除他们自己的评论。这是我的代码：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
  //Only be able to delete user generated cells
  Comment *comment = [[self fetchedResultsController]objectAtIndexPath:indexPath];
  if (comment.username != self.username) {
    return NO;
  }
  return YES;
} 
```

在 viewDidLoad 中调用 performfetch

当 CommentsViewController 被加载并创建新的评论时，该功能就起作用了。但是，如果之前有任何评论，即使用户创建了这些评论，也无法编辑这些评论。

对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:39:22.127

我认为问题在于对用户名的深度平等检查。假设这些是字符串，您不想测试它们是否是同一个对象（它们将在一次提取中，并且不会在运行之间）。你想测试浅的平等......

```
if (![comment.username isEqualToString:self.username]) { // and so on... 
```

# google-maps - DirectionsService.route 的使用限制

> ID：11128509
> 
> 赞同：0
> 
> 时间：2012-06-20T21:29:44.207
> 
> 标签：google-maps, google-maps-api-3

我根据地址创建了不同的路线。目前，我有大约 36 条不同的路线，由开始和结束位置定义。3天前它正在工作。我的页面在本地 PC 上，我不会在网络上使用。这是javascript中的代码：

```
 function RedZones(RedZone){
            if (RedZone.checked == true){

    for (var k=0; k < NumeroIndirizziRossi; k++){
            calcRoute(IndirizziRossi[k], IndirizziRossi[k+1]);
            k++;
            }
            }
    else{
    if (directionsDisplayArray) {
                            for (i in directionsDisplayArray) {

                                    directionsDisplayArray[i].setMap(null);
                            }
                                    directionsDisplayArray.length = 0;
                    }

    }
    }

       function calcRoute(source,destination){

    var request = {
        origin:source, 
        destination:destination,
        travelMode: google.maps.DirectionsTravelMode.WALKING
    };
    directionsService.route(request, function(response, status) 
    {
        if (status == google.maps.DirectionsStatus.OK) 
        {   

        directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
            directionsDisplay.setMap(map);
            directionsDisplayArray.push(directionsDisplay);               
            directionsDisplay.setDirections(response);             
        }
    });
  } 
```

现在，在前 10 个请求之后，我得到了 google.maps.DirectionsStatus.OVER_QUERY_LIMIT。问题是我没有改变任何东西。我已经控制了[使用限制](http://developers.google.com/maps/documentation/business/articles/usage_limits)，并且如文档所示，我每 10 个请求创建了 2 秒的延迟，但这还不够。每 10 个请求所需的延迟为 10 秒（基于经验测试），这是不可持续的。为什么会出现这个问题？Google 是否更改了使用限制？我曾尝试使用 Google Maps API，但结果是一样的。

# wcf - 以 %20 结尾的 WCF REST URI 失败并出现 404

> ID：11128511
> 
> 赞同：1
> 
> 时间：2012-06-20T21:29:56.240
> 
> 标签：wcf, c#-4.0, http-status-code-404, wcf-rest

WCF REST Web 服务提供以下格式的查找：

```
https://mysite/mycontract/search/{searchtext} 
```

*hello*或*hello%20world*的搜索文本，服务执行正确。但是，当在*https://mysite/mycontract/search/hello%20*中使用以空格结尾的文本时，服务将失败并显示 404。没有自定义路由。

wcf 路由中的哪些限制会导致此问题，以及可用的解决方法（最好是更改 uri 结构除外）？

使用其他实施信息进行编辑：

*合同*

```
 [ServiceContract(SessionMode = SessionMode.NotAllowed)]
    public interface IPointOfSale
    {
        .......

        [WebInvoke(UriTemplate = "search/{SKU}", Method = "GET")]
        System.Xml.Linq.XElement ProductLookup(string SKU);

    } 
```

*方法*

```
public XElement ProductLookup(string SKU)
{
   //product search here.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:31:11.830

我今天一直在处理同样的问题，发现其他帖子告诉我，在 .NET 4 中，解决方案在于在 web.config 中设置以下内容：

```
<httpRuntime relaxedUrlToFileSystemMapping="true" /> 
```

这为我解决了问题！

# android - 两个片段由单个操作栏选项卡 Android 保存

> ID：11128513
> 
> 赞同：0
> 
> 时间：2012-06-20T21:30:09.853
> 
> 标签：android, fragment

我想在 android 操作栏选项卡的单个选项卡中显示 2 个不同的片段。

我会做的是这样的：

```
public class Frag1 extends Fragment { 

   @Override
   public void onCreateOptionsMenu (Menu menu, MenuInflater inflater) {

    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.frag1_menu, menu);
    }

    @Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.item1:
               break;
            case R.id.item_GoToFrag2:
                    FragmentTransaction ft = getFragmentManager().beginTransaction(); 
        ft.remove(Frag1.this); 

                    Fragment mFragment = Fragment.instantiate(getActivity(), Frag2.class.getName(), null);             
        ft.add(android.R.id.content, mFragment, Frag2.class.getName() ); 
        ft.commit();
               break;
            } 
    return true;
}
} 
```

Frag2 的代码完全相同，唯一的区别在于 onOptionsItemSelected 的情况如下：

```
 case R.id.item_GoToFrag1:
                    FragmentTransaction ft = getFragmentManager().beginTransaction(); 
        ft.remove(Frag2.this); 

                    Fragment mFragment = Fragment.instantiate(getActivity(), Frag2.class.getName(), null);             
        ft.add(android.R.id.content, mFragment, Frag1.class.getName() ); 
        ft.commit();
               break; 
```

一切似乎工作正常，问题是当我切换到不同的选项卡时，与 Frag2 相关的图标仍然对所有其他选项卡可见，我真的不明白为什么，我也调用 getActivity().invalidateOptionsMenu( ); 但没有成功....任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:12:01.187

不要在 XML 文件中添加片段。只需创建容器并以编程方式放置片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:09:02.813

如果您只是尝试替换片段，请调用[ft.replace](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)

还有，为什么要这么做？

```
Fragment mFragment = Fragment.instantiate(getActivity(), Frag2.class.getName(), null);             
        ft.add(android.R.id.content, mFragment, Frag1.class.getName() ); 
```

您正在添加 Frag2，然后在 ft.add 中将其标记为 Frag1

# ios - UITableViewCell 内部的 UISwitch

> ID：11128520
> 
> 赞同：2
> 
> 时间：2012-06-20T21:30:31.970
> 
> 标签：ios, uitableview, uiswitch

我有一个带有自定义单元格的表格视图（`UISwitch`在表格视图的每个单元格上）。

我已经这样设置了我的单元格：

```
switchView = [[UISwitch alloc] initWithFrame:CGRectMake(200.0f, 5.0f, 75.0f, 30.0f)];
cell.accessoryView = switchView;
[switchView setOn:NO animated:NO];
[switchView addTarget:self action:@selector(favorite:) forControlEvents:UIControlEventValueChanged];
[cell addSubview:switchView]; 
```

用户更改时调用的操作`UISwitch`是：

```
-(IBAction)favorite:(id)sender 
{
    indexPath = [self.tableView indexPathForCell:(UITableViewCell*)[sender superview]];
    NSMutableArray *favoriteList = [[NSMutableArray alloc]init];
    NSString *favoriteItem = [self.tableView cellForRowAtIndexPath:indexPath].textLabel.text;
    NSLog(favoriteItem);

    if ([switchView isOn]) 
    {
        [favoriteList addObject:favoriteItem];

        NSUserDefaults *favoriteDefaults = [NSUserDefaults standardUserDefaults];
        [favoriteDefaults setObject:favoriteList forKey:@"MyFavorites"];
        NSLog(@"%@", favoriteList);
    }
    else
    {
        [favoriteList removeObject:favoriteItem];

        NSUserDefaults *favoriteDefaults = [NSUserDefaults standardUserDefaults];
        [favoriteDefaults setObject:favoriteList forKey:@"MyFavorites"];
        NSLog(@"%@", favoriteList);
    }
} 
```

**问题是：**
在测试应用程序时，只有表格视图的最后一项（单元格）可以正常工作。

对于其他人，调试器返回状态`UISwitch`始终为“OFF”。

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T22:30:09.790

一些直接的反应：

1.  在`(IBAction)favorite:(id)sender`您没有获取相关单元格的 switchView 时，而只是使用该类 ivar 的最后一个引用所使用的内容。同样，在您的 中`cellForRowAtIndexPath`，您似乎正在设置（并反复重置）这个相同的单个`switchView`ivar。可能根本不应该是 ivar。您可以创建`switchView`一个局部变量`cellForRowAtIndexPath`. 您也可以将其设为 的局部变量`favorite`。但最重要的是，`favorite`应该将其设置为`UISwitch *switchView = sender`.

2.  我假设您想将所有收藏夹保存到用户默认值。你的 current`(IBAction)favorite:(id)sender`每次都会重新创建 favoriteList，它要么有一个项目，要么没有项目，但肯定会丢弃你过去可能选择的任何其他收藏夹。

3.  一个小问题，但是如果你设置了附属单元格，你不需要将 switchView 也添加到子视图中。

所以，我建议修改`cellForRowAtIndexPath`如下：

```
NSString *title = [_favorites objectAtIndex:indexPath.row]; // clearly, you'll get the text however you're getting your text now ... I'm just storing in array
cell.textLabel.text = title;

BOOL isFav = [self isFavorite:title]; // go to user defaults and find out if it's there or not

UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectMake(200.0f, 5.0f, 75.0f, 30.0f)];
[switchView setOn:isFav animated:NO];
[switchView addTarget:self action:@selector(toggleFavoriteSwitch:) forControlEvents:UIControlEventValueChanged];
cell.accessoryView = switchView; 
```

这使用`isFavorite`：

```
- (BOOL)isFavorite:(NSString *)title
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSArray *listOfFavorites = [userDefaults objectForKey:kMyFavsKey];

    if (listOfFavorites)
        return [listOfFavorites containsObject:title];

    return NO;
} 
```

然后，显然，您需要定义您的`toggleFavoriteSwitch`（以前称为`favorite`）方法：

```
- (IBAction)toggleFavoriteSwitch:(UISwitch *)switchView
{
    UITableViewCell *cell = (UITableViewCell *)[switchView superview];

    [self updateFavoriteInUserDefaultsFor:cell.textLabel.text withValue:[switchView isOn]];
} 
```

这正在更新用户默认值，如下所示：

```
- (void)updateFavoriteInUserDefaultsFor:(NSString *)title withValue:(BOOL)isOn
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

    NSArray *oldFavorites = [userDefaults objectForKey:kMyFavsKey];

    NSMutableArray *newFavorites;

    if (!oldFavorites)
        newFavorites = [[NSMutableArray alloc] init];
    else
        newFavorites = [NSMutableArray arrayWithArray:oldFavorites];

    if (isOn)
        [newFavorites addObject:title];
    else
        [newFavorites removeObject:title];

    [userDefaults setObject:newFavorites forKey:kMyFavsKey];

    [userDefaults synchronize];
} 
```

希望这可以解决您的问题。

# c++ - 部分模板专业化有什么问题？

> ID：11128535
> 
> 赞同：3
> 
> 时间：2012-06-20T21:31:37.410
> 
> 标签：c++, templates, partial-specialization

我正在编写一个带有一个类型参数和一个布尔值的模板类，这里是代码：

```
template<class T, bool p = true>
class A
{
private:
    T* ptr;
public:
    A();
};

template<class T>
A<T,true>::A()
{
    ptr = 0xbaadf00d;
}

int main()
{
    A<int> obj;
    A<int, false> o;
    return(0);
} 
```

我收到了这些编译错误：

```
Error   1   error C3860: template argument list following class template name must list parameters in the order used in template parameter list tst.cpp 15
Error   2   error C2976: 'A<T,p>' : too few template arguments  tst.cpp 15 
```

我究竟做错了什么？还是出于某种原因禁止部分专门化非类型参数？

同时，如果我在 if 语句中使用布尔参数，我会收到以下警告：

```
Warning 1   warning C4127: conditional expression is constant 
```

所以我应该为这种事情做专业化......

任何帮助将不胜感激！:)

提前致谢！！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T21:36:56.117

您正在尝试部分专门化一种方法。这是不允许的。您只能对整个班级进行部分专业化。一旦您专门化了该类，您就可以为部分专门化的类提供方法的非专门化定义。

以下是一些可能执行您想要的代码的示例：

```
template<class T, bool p = true>
class A
{
private:
    T* ptr;
public:
    A();
};

template <class T>
class A<T,true> {
private:
    T* ptr;
public:
    A();
};

template <class T>
class A<T,false> {
private:
    T* ptr;
public:
    A();
};

template<class T>
A<T,true>::A()
{
    ptr = reinterpret_cast<T *>(0xbaadf00d);
}

template<class T>
A<T,false>::A()
{
    ptr = 0;
}

int main()
{
    A<int> obj;
    A<int, false> o;
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T21:36:24.943

欢迎您专注于非类型模板参数，但您不能只专注于模板类的一个功能。类是模板，所以*类*是你需要专攻的*。*也就是说，要给构造函数一个特殊的定义，就需要对整个类提供一个特殊的定义。

# iphone - 使用点击手势隐藏和显示导航栏

> ID：11128536
> 
> 赞同：2
> 
> 时间：2012-06-20T21:31:40.580
> 
> 标签：iphone, view, navigation, gesture

> **可能重复：**
> [点击时隐藏/显示导航和工具栏](https://stackoverflow.com/questions/605492/hide-show-navigation-tool-bar-on-tap)

这是我用来在其中一个视图中隐藏导航栏的空白。

```
- (void)viewWillAppear:(BOOL)animated {
    [self.navigationController setNavigationBarHidden:YES];

    [super viewWillAppear:animated];
} 
```

如何点击屏幕隐藏和显示导航栏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:50:27.290

你想要那样的东西吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationController.navigationBar.translucent = YES;
                             self.wantsFullScreenLayout = YES;

    UITapGestureRecognizer *tap = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideShowNavigation)] autorelease];
    tap.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:tap];
}

- (void) hideShowNavigation
{
    [self.navigationController setNavigationBarHidden:!self.navigationController.navigationBarHidden];
} 
```

# gradle - 如何覆盖一项任务，使其依赖于我在 gradle 中的一个任务

> ID：11128540
> 
> 赞同：1
> 
> 时间：2012-06-20T21:32:22.017
> 
> 标签：gradle

我尝试按照他们的示例遵循 gradle 手册，但是在 eclipse 任务之前根本没有运行 copyJars。（eclipse任务来自eclipse插件）

```
task('copyJars') { 

    ext.collection = files { genLibDir.listFiles() }
    delete ext.collection
    copy { from configurations.compile into genLibDir }
    copy { from fixedLibDir into genLibDir }
}

eclipse.dependsOn = copyJars

task('setupAll', dependsOn: 'eclipse') {
    description = 'Update jars from remote repositories and then fix eclipse classpath for stbldfiles project'
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T00:50:20.357

此构建脚本存在一些问题：

*   `eclipse`不是指任务，而是指同名的模型对象。（你没有例外`eclipse.dependsOn`吗？）
*   任务`copyJars`在配置阶段而不是执行阶段完成它的工作（即对于每个构建，即使任务没有执行）

要解决此问题，请使用`tasks.eclipse.dependsOn(copyJars)`and `task copyJars << { ... }`。

另一个问题是，如果没有比`copyJars`事后复制和修复 Eclipse 类路径更简单的方法，但我需要更多信息才能知道。

# java - java - 如何在java中使用反射来查找集合的大小？

> ID：11128544
> 
> 赞同：0
> 
> 时间：2012-06-20T21:32:50.077
> 
> 标签：java, reflection, collections

你如何在java中使用反射找到集合的大小（即a`Set`或）？`List`

我有类似下面的示例，我想知道在使用反射时如何找到集合的大小。

**编辑：**

```
Class<?> clazz = node.getClass();
Field [] fields = clazz.getDeclaredFields();

for(Field field : fields) {
    System.out.println("declared fields:   "+ field.getType().getCanonicalName());

    //getting a generic type of a collection
    Type returntype = field.getGenericType();
    if (returntype instanceof ParameterizedType) {
        ParameterizedType type = (ParameterizedType) returntype;
        Type[] typeArguments = type.getActualTypeArguments();
        for(Type typeArgument : typeArguments) {
           Class<?> classType = (Class<?>) typeArgument;
           System.out.println("typeArgClass = " + classType.getCanonicalName());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:36:32.810

假设`node`是集合实例。

```
int size;
try { 
  size = (Integer) node.getClass().getMethod("size").invoke(node);
} catch (Exception e) {
  e.printStackTrace();
} 
```

但是，当您可以调用时，通过反射来执行此操作没有多大意义`node.size()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:37:55.600

我不确定您所说的使用反射是什么意思。所有实现该`java.util.Collection`接口的类都具有`size()`为您提供集合大小的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T10:17:34.980

场景将实现一个通用类，它为您提供对象字段的简要摘要，对于集合实例，您只想吐出大小。我个人需要它来比较相同类型的两个对象（o1 和 o2）上的某些字段。我想知道集合实例是否已更改。

```
Field f1 = null;

   try {
f1 = o1.getClass().getDeclaredField(field);
   }
...

if (Collection.class.isAssignableFrom(f1.getType())) { // Making sure it is of type Collection
   int v1Size = Collection.class.cast(v1).size();   //  This is what you need 
```

# javascript - 在属性名称中搜索带有冒号的 xpath 表达式会引发异常（node.js elementtree 模块）

> ID：11128549
> 
> 赞同：3
> 
> 时间：2012-06-20T21:33:04.537
> 
> 标签：javascript, node.js, xpath, elementtree

使用 nodejs 中的 elementtree 包，我正在尝试验证 xml 文件（特别是 android 清单文件）中是否存在某个 xml 属性。

```
var manifestTxt = fs.readFileSync('AndroidManifest.xml', 'utf-8'),
    manifestDoc = new et.ElementTree(et.XML(manifestTxt)),
    expected = 'application/activity[@android:name="com.whatever.app"]';

test.ok(manifestDoc.find(expected)); 
```

我收到以下异常：

```
node_modules/elementtree/lib/elementpath.js:210
      throw new SyntaxError(token, 'Invalid attribute predicate');
        ^
Error: Invalid attribute predicate 
```

它似乎不喜欢属性名称中的冒号，但没有它，搜索不匹配。我想我处理命名空间错误——但找不到正确的方法。

**编辑**这是我正在搜索的示例 xml：

```
<?xml version='1.0' encoding='utf-8'?>
<manifest ... xmlns:android="http://schemas.android.com/apk/res/android">
    <application android:debuggable="true" android:icon="@drawable/icon" android:label="@string/app_name">&#xA; 
        <activity android:label="@string/app_name" android:name="com.whatever.app">&#xA;                
            <intent-filter>&#xA;</intent-filter>
        </activity> 
    </application>
    <uses-sdk android:minSdkVersion="5" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T04:55:19.600

**如果您不知道如何注册命名空间并为其使用相关前缀，请使用**：

```
application/activity
   [@*[local-name()=name' 
     and 
      namespace-uri() = 'http://schemas.android.com/apk/res/android'
      ] 
   = 
    'com.whatever.app'
   ] 
```

**在一般情况下不安全的更简单的表达式，但在这种特定情况下可能会选择想要的节点**：

```
application/activity[@*[local-name()='name'] = 'com.whatever.app'] 
```

**或这个表达式**：

```
application/activity[@*[name()='android:name'] = 'com.whatever.app'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:59:54.240

Elementtree 需要命名空间 URI，而不是命名空间前缀。

```
var manifestTxt = fs.readFileSync('AndroidManifest.xml', 'utf-8'),
    manifestDoc = new et.ElementTree(et.XML(manifestTxt)),
    expected = '//application/activity[@{http://schemas.android.com/apk/res/android}name="com.whatever.app"]';

test.ok( manifestDoc.find(expected) ); 
```

请参阅：[ElementTree：使用限定名称](http://effbot.org/zone/element-qnames.htm)

* * *

**编辑**[node-elementtree](https://github.com/racker/node-elementtree)的 XPath 实现[目前](https://github.com/racker/node-elementtree/blob/5cb7ec5aab2ceeeae5f48549579880db9be857d3/lib/elementpath.js)似乎根本不支持命名空间。

缺少你必须做一些跑腿工作：

```
var manifestTxt = fs.readFileSync('AndroidManifest.xml', 'utf-8'),
    manifestDoc = new et.ElementTree(et.XML(manifestTxt)),
    activities = manifestDoc.findall('//application/activity'), i;

for (i=0; i<activities.length; i++) {
  if ( activities[i].attrib['android:name'] === 'com.whatever.app' ) {
    test.ok(true);
  }
} 
```

这条线`if ( activities[i].attrib['android:name'] === 'com.whatever.app' ) {`在很大程度上是一个猜测。

我不知道解析器如何处理命名空间属性。如有疑问，只需将整个转储`activities[i].attrib`到控制台并查看解析器做了什么。相应地调整上面的代码。恐怕这与您在有限的 XPath 支持下所获得的一样接近。

# windows - 如何为非管理用户注册 COM dll

> ID：11128553
> 
> 赞同：1
> 
> 时间：2012-06-20T21:33:47.170
> 
> 标签：windows, visual-c++, com

我的安装程序有一个需要注册的 COM dll。

我试图在 win7 32 位“标准用户”下运行我的安装程序，但它失败了，因为 COM dll 注册需要管理员权限。除此之外，我的应用程序不需要任何管理员权限即可工作。

有什么办法可以解决这个问题。我需要为非管理员用户运行我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T00:06:33.110

每个用户注册（例如 reg.exe 导入 HKCU）不需要管理员。请参阅[非管理员 ActiveX 控件](http://msdn.microsoft.com/en-us/library/dd433049%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:59:14.327

COM 组件无需注册即可使用。

您可以使用[CoRegisterClassObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693407%28v=vs.85%29.aspx)为对象注册 IClassFactory 接口。如果您实现 COM 对象，则此方法有效。

您可以调用 LoadLibrary 来获取 dll 的[DllGetclassObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680760%28v=vs.85%29.aspx)入口点，并直接使用类工厂创建对象。

您可以创建一个简单的 XML 文件，将 COM dll 作为程序集公开。将程序集添加为您的应用程序的依赖程序集，您就可以[注册免费 Com](http://msdn.microsoft.com/en-us/library/ms973913.aspx)

# c++ - 从 C++ DLL 调用 Delphi 中的回调函数

> ID：11128554
> 
> 赞同：6
> 
> 时间：2012-06-20T21:33:50.967
> 
> 标签：c++, delphi, dll, delphi-7

我有一个我编写的 C++ DLL，它有一个公开的函数，它将函数指针（回调函数）作为参数。

```
#define DllExport   extern "C" __declspec( dllexport )

DllExport bool RegisterCallbackGetProperty( bool (*GetProperty)( UINT object_type, UINT object_instnace, UINT property_identifer, UINT device_identifier, float * value ) ) {
    // Do something. 
} 
```

我希望能够从 Delphi 应用程序中调用这个公开的 C++ DLL 函数并注册回调函数以供将来使用。但是我不确定如何在 Delphi 中创建一个可以与暴露的 C++ DLL 函数一起使用的函数指针。

在这个问题的帮助下，我让[Delphi 应用程序调用了一个简单的公开的 c++ DLL 函数](https://stackoverflow.com/questions/10405991/calling-functions-from-a-c-dll-in-delphi/10455039#10455039)。

我正在构建 C++ DLL，如果需要，我可以更改其参数。

我的问题是：

*   如何在 Delphi 中创建函数指针
*   如何从 Delphi 应用程序中正确调用公开的 C++ DLL 函数，以便 C++ DLL 函数可以使用函数指针。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T21:42:16.630

在 Delphi 中通过声明函数类型来声明函数指针。例如，你的回调函数类型可以这样定义：

```
type
  TGetProperty = function(object_type, object_instnace, property_identifier, device_identifier: UInt; value: PSingle): Boolean; cdecl; 
```

请注意调用约定是`cdecl`因为您的 C++ 代码没有指定调用约定，而 cdecl 是 C++ 编译器通常的默认调用约定。

然后您可以使用该类型来定义 DLL 函数：

```
function RegisterCallbackGetProperty(GetProperty: TGetProperty): Boolean; cdecl; external 'dllname'; 
```

替换`'dllname'`为您的 DLL 的名称。

要调用 DLL 函数，首先应该有一个签名与回调类型匹配的 Delphi 函数。例如：

```
function Callback(object_type, object_instnace, property_identifier, device_identifier: UInt; value: PSingle): Boolean cdecl;
begin
  Result := False;
end; 
```

然后，您可以调用 DLL 函数并像传递任何其他变量一样传递回调：

```
RegisterCallbackGetProperty(Callback); 
```

# internet-explorer-8 - 在 IE8 RaphaelJS 中平移/缩放非常缓慢

> ID：11128558
> 
> 赞同：5
> 
> 时间：2012-06-20T21:33:55.693
> 
> 标签：internet-explorer-8, zooming, raphael, drag, pan

我一直在努力获取这个座位映射图表并创建了一些迭代，我一直发现的问题是当我到达 IE8 时，平移会变慢和延迟。

此时我要减少加载时间的是创建一个 png 来替换我的“笔画”，因为我假设 ie8 每次拖动地图时都想重新渲染。

我还添加了控件，希望强制 IE8 用户使用此选项，但平移仍然存在延迟，如果我可以让使用 IE8（如果可能的话，还有 ie7）的用户仍然可以在没有控件的情况下拖动/平移，并且响应时间会更快一点那太好了。

**[这是我当前的 JSFiddle](http://jsfiddle.net/knottAverage/ArKDp/29/)**

我对 JS 还是有点陌生​​，所以如果您有任何建议，将不胜感激。（PS Chrome 框架很棒，但**不**适合我）

**更新**

我已经删除了原来的拖动功能，并使用jqueryui的可拖动功能替换了代码。Martin 建议只拖动 div，而不是 Raphael 元素。这样做可以让这个东西在 ie6-8 中飞行，这很棒，但后来我担心缩放。我之前在缩放时看到的我的纸元素 WxH 将保持相同的比例，当它放大时会切断我的绘图。在挖掘 Raphael 文档后，我遇到了 paper.setSize。setSize 正是我需要让这个项目在 ie6-8 中移动和优化并几乎征服其路径中的所有浏览器。

简而言之，使用 jqueryui 的可拖动和 paper.setSize 治愈了我的跨浏览器缩放 n' 泛蓝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:30:25.487

从小提琴中可以看出，您正在通过在事件处理程序`.translate()`内部调用来触发图像的新渲染：`mousemove`

```
mapContainer.translate(currentMapPosX, currentMapPosY);
rsrGroupies.translate(currentMapPosX, currentMapPosY); 
```

这种方法对所有浏览器的性能都是有害的，更不用说 IE8 了。在 IE8 中处理 VML 时，您应该考虑到图像中的每一次 DOM 更改都会导致图像再次被渲染。在平移时这样做总是会非常缓慢。

我看到您已经在 Fiddle 中使用了 jQuery。如果您想提高平移性能，您应该考虑执行以下操作：

1.  对于当前缩放级别，仅在 Raphaël 中渲染一次图像。平移时不要尝试在任何时间点更改 VML/SVG 图像中的转换。
2.  通过`mousemove`您已经拥有的平移实现，移动或滚动包含 VML/SVG 图像的 HTML 容器。想象一下`<div>`，`overflow: hidden`简单地把里面的图像相对移动，或者滚动到合适的位置。

这将需要对您的坐标计算进行一些调整，但它会提高您在所有浏览器中的性能。

# java - 运行 Netty HttpStaticFileServer 示例

> ID：11128560
> 
> 赞同：0
> 
> 时间：2012-06-20T21:33:59.073
> 
> 标签：java, netty, fileserver

我对在我正在从事的项目中使用 Netty 感到非常兴奋，但我面临着快速跟上进度的巨大压力。我是一位经验丰富的 Java 程序员，但在编写客户端-服务器系统方面没有太多经验。

我正在通过 netty 示例工作，但发现没有太多关于如何正确运行它们的文档。诚然，通过源代码进行挖掘很有用，但是当我使用 HttpStaticFileServer 时，我已经用这种方法碰壁了。客户端请求大概来自 telnet，但我不知道文件请求本身的格式是什么，我尝试了一些。处理程序编解码器根本不清楚。所以一般来说，如果有一组关于如何运行示例的说明会很好。我保证我会在调试器中观察整个过程，这样我就可以了解到底发生了什么。所以目前，至少，我会欣赏 FileServer 的一个简单示例。我想构建的应用程序将从我怀疑的那个构建。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:39:15.890

HttpStaticFileServer 将从您的文件系统提供文件。

请参阅 HttpStaticFileServerHandler..sanitizeUri()。这是它将您输入浏览器的虚拟路径映射到物理路径的地方。

所以`http://localhost:8080/afile.txt`会映射到`~/afile.txt`. 只需将 afile.txt 放在那里，它就会出现在您的浏览器中。

您可能想先尝试[Snoop](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/snoop)示例。我在 Eclipse 中加载 netty（记得使用 JDK7）并运行/调试示例应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:31:35.550

我用 Eclipse 在 Windows 上运行了 HttpStaticFileServer。

* * *

要测试示例，请执行以下简单步骤：

1.  运行服务器
2.  在网络浏览器中输入：localhost:8080/file.ext（将 file.ext 替换为您的文件）

* * *

该文件应该在`System.getProperty("user.dir")`

[在此处](https://stackoverflow.com/a/6326713/1365399)查看有关其工作原理的答案

对我来说，它指向 eclipse 工作区目录。因此，ether 使用工作区或更改返回的`sanitizeUri(String uri)`方法`HttpStaticFileServerHandler`：

```
 rootPath + File.separator + uri; 
```

代替

```
 return System.getProperty("user.dir") + File.separator + uri; 
```

其中 rootPath 是文件服务器根目录的路径。

# objective-c - iOS 游戏中的图形渲染不正确

> ID：11128572
> 
> 赞同：2
> 
> 时间：2012-06-20T21:36:30.290
> 
> 标签：objective-c, ios, cocos2d-iphone, ios-simulator, lag

我正在尝试按照[本](http://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-wings-part-1)教程编写 Tiny Wings 类型的游戏。

我被困在它的尽头。我没有得到连绵起伏的丘陵，而是得到了一个看起来很糟糕的三角形图。我在下面发布了一些截图。

![在此处输入图像描述](../Images/e524610bc4819b61e7652f3fd1df3a4f.png)

![在此处输入图像描述](../Images/507b682c392b9be789acd8acb62948a5.png)

我在教程中提到取消注释以使其在调试器中正确显示时。我已经这样做了，它仍在这样做。我想知道这只是模拟器还是我在某个地方搞砸了。无论发生什么，它都会定期渲染，所以我认为余弦函数必须在数学方面起作用，但这仍然不能解释这种行为。基本上，我被难住了。

这是我正在使用的代码

HelloWorldLayer.h

```
#import "cocos2d.h"
#import "Terrain.h"
/*#import "Box2D.h"
#import "GLES-Render.h"*/

// HelloWorldLayer
@interface HelloWorldLayer : CCLayer
{
    CCSprite *_background;
    Terrain *_terrain;
/*b2World* world;
GLESDebugDraw *m_debugDraw;*/
}

// returns a CCScene that contains the HelloWorldLayer as the only child
+(CCScene *) scene;
// adds a new sprite at a given coordinate
//-(void) addNewSpriteWithCoords:(CGPoint)p;

@end 
```

HelloWorldLayer.m

```
#import "HelloWorldLayer.h"

//Pixel to metres ratio. Box2D uses metres as the unit for measurement.
//This ratio defines how many pixels correspond to 1 Box2D "metre"
//Box2D is optimized for objects of 1x1 metre therefore it makes sense
//to define the ratio so that your most common object type is 1x1 metre.
#define PTM_RATIO 32

// enums that will be used as tags
/*enum {
kTagTileMap = 1,
kTagBatchNode = 1,
kTagAnimation1 = 1,
};*/

// HelloWorldLayer implementation
@implementation HelloWorldLayer

+(CCScene *) scene
{
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
HelloWorldLayer *layer = [HelloWorldLayer node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
}

-(CCSprite *)spriteWithColor:(ccColor4F)bgColor textureSize:(float)textureSize {

// 1: Create new CCRenderTexture
CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:textureSize height:textureSize];

// 2: Call CCRenderTexture:begin
[rt beginWithClear:bgColor.r g:bgColor.g b:bgColor.b a:bgColor.a];

//Add Gradient to image

/*The basic idea is we’ll draw a black rectangle on top of the texture, but it will be completely transparent up top, and opaque at the bottom. This will keep the top untouched, but gradually darken the image going down*/
glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);

float gradientAlpha;
CGPoint vertices[4];
ccColor4F colors[4];
int nVertices = 0;

vertices[nVertices] = CGPointMake(0, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0 };
vertices[nVertices] = CGPointMake(textureSize, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
vertices[nVertices] = CGPointMake(0, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};
vertices[nVertices] = CGPointMake(textureSize, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};

glVertexPointer(2, GL_FLOAT, 0, vertices);
glColorPointer(4, GL_FLOAT, 0, colors);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnable(GL_TEXTURE_2D);

// 3: Draw into the texture
// We'll add this later
CCSprite *noise = [CCSprite spriteWithFile:@"Noise.png"];
[noise setBlendFunc:(ccBlendFunc){GL_DST_COLOR, GL_ZERO}];
noise.position = ccp(textureSize/2, textureSize/2);
[noise visit];

// 4: Call CCRenderTexture:end
[rt end];

// 5: Create a new Sprite from the texture
return [CCSprite spriteWithTexture:rt.sprite.texture];

}

-(CCSprite *)stripedSpriteWithColor1:(ccColor4F)c1 color2:(ccColor4F)c2 
                     textureSize:(float)textureSize stripes:(int)nStripes {

// 1:Create new CCRenderTexture
CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:textureSize height:textureSize];

// 2: Call CCRenderTexture:begin
[rt beginWithClear:c1.r g:c1.g b:c1.b a:c1.a];

// 3: Draw into the texture

// Layer 1: Stripes
glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);

CGPoint vertices[nStripes*6];
int nVertices = 0;
float x1 = -textureSize;
float x2;
float y1 = textureSize;
float y2 = 0;
float dx = textureSize/ nStripes*2;
float stripeWidth = dx/2;
for (int i = 0; i<nStripes; i++) {
    x2 = x1 +textureSize;
    vertices[nVertices++]=CGPointMake(x1, y1);
    vertices[nVertices++]=CGPointMake(x1+stripeWidth, y1);
    vertices[nVertices++]=CGPointMake(x2, y2);
    vertices[nVertices++]= vertices[nVertices-2];
    vertices[nVertices++]= vertices[nVertices-2];
    vertices[nVertices++]=CGPointMake(x2+stripeWidth, y2);
    x1 += dx;
}

glColor4f(c2.r, c2.g, c2.b, c2.a);
glVertexPointer(2, GL_FLOAT, 0, vertices);
glDrawArrays(GL_TRIANGLES, 0, (GLsizei)nVertices);

// layer 2: gradient
glEnableClientState(GL_COLOR_ARRAY);

float gradientAlpha = 0.7;
ccColor4F colors[4];
nVertices = 0;

vertices[nVertices] = CGPointMake(0, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0 };
vertices[nVertices] = CGPointMake(textureSize, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
vertices[nVertices] = CGPointMake(0, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};
vertices[nVertices] = CGPointMake(textureSize, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};

glVertexPointer(2, GL_FLOAT, 0, vertices);
glColorPointer(4, GL_FLOAT, 0, colors);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

// layer 3: top highlight 
float borderWidth = textureSize/16;
float borderAlpha = 0.3f;
nVertices = 0;

vertices[nVertices] = CGPointMake(0, 0);
colors[nVertices++] = (ccColor4F){1,1,1,borderAlpha};
vertices[nVertices] = CGPointMake(textureSize, 0);
colors[nVertices++] = (ccColor4F){1,1,1,borderAlpha};

vertices[nVertices] = CGPointMake(0, borderWidth);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
vertices[nVertices] = CGPointMake(textureSize, borderWidth);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0};

glVertexPointer(2, GL_FLOAT, 0, vertices);
glColorPointer(4, GL_FLOAT, 0, colors);
glBlendFunc(GL_DST_COLOR, GL_ONE_MINUS_SRC_ALPHA);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnable(GL_TEXTURE_2D);             

// Layer 2: Noise 
CCSprite *noise = [CCSprite spriteWithFile:@"Noise.png"];
[noise setBlendFunc:(ccBlendFunc){GL_DST_COLOR, GL_ZERO}];
noise.position = ccp(textureSize/2, textureSize/2);
[noise visit];

// 4: Call CCRenderTexture:end
[rt end];

// 5: Create a new Sprite from the texture
return [CCSprite spriteWithTexture:rt.sprite.texture];
 }

 -(ccColor4F)randomBrightColor {    
while (true) {
    float requiredBrightness = 192;
    ccColor4B randomColor = ccc4(arc4random() % 255,
                                arc4random() % 255,
                                arc4random() % 255,
                                255);
    if (randomColor.r > requiredBrightness ||
        randomColor.g > requiredBrightness ||
        randomColor.b > requiredBrightness) {
        return ccc4FFromccc4B(randomColor);
    }
}
}

-(void)genBackground {
[_background removeFromParentAndCleanup:YES];

ccColor4F bgColor = [self randomBrightColor];
/*new code*/
//ccColor4F color2 = [self randomBrightColor];
/*new code*/
_background = [self spriteWithColor:bgColor textureSize:512];
/*new code*/
// int nStripes = ((arc4random() % 4) + 1) * 2;
//_background = [self stripedSpriteWithColor1:bgColor color2:color2 textureSize:512 stripes:nStripes];

//self.scale = 0.5;
/*new code*/

CGSize winSize = [CCDirector sharedDirector].winSize;
_background.position = ccp(winSize.width/2,winSize.height/2);
ccTexParams tp = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
[_background.texture setTexParameters:&tp];

[self addChild:_background z:-1];

ccColor4F color3 = [self randomBrightColor];
ccColor4F color4 = [self randomBrightColor];
CCSprite *stripes = [self stripedSpriteWithColor1:color3 color2:color4 textureSize:512 stripes:4];
ccTexParams tp2 = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_CLAMP_TO_EDGE};
[stripes.texture setTexParameters:&tp2];
_terrain.stripes = stripes;

/*The important part is the texture parameters:
GL_LINEAR is a fancy way of saying “when displaying the texture at a smaller or larger scale than the original size, take a weighted average of the nearby pixels.”
GL_REPEAT is a fancy way of saying “if you try to index a texture at a coordinate outside the texture bounds, put what would be there if the texture were to continuously tile.”*/
}

// on "init" you need to initialize your instance
-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super" return value
if( (self=[super init])) {
    _terrain = [Terrain node];
    [self addChild:_terrain z:1];
    [self genBackground];
    self.isTouchEnabled = YES;
    [self scheduleUpdate];
}

self.scale = 1.0; 
return self;

}

-(void)update:(ccTime)dt {
float PIXELS_PER_SECOND = 100;
static float offset = 0;
offset += PIXELS_PER_SECOND * dt;

CGSize textureSize = _background.textureRect.size;
[_background setTextureRect:CGRectMake(offset, 0, textureSize.width, textureSize.height)];
[_terrain setOffsetX:offset];
}

-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
[self genBackground];
}

// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
// in case you have something to dealloc, do it in this method
/*delete world;
world = NULL;

delete m_debugDraw;*/

// don't forget to call "super dealloc"
[super dealloc];
}
@end 
```

地形.h

```
#import "CCNode.h"
#import "cocos2d.h"

@class HelloWorldLayer;

#define kMaxHillKeyPoints 1000
#define kHillSegmentWidth 10

#define kMaxHillVertices 4000
#define kMaxBorderVertices 800

@interface Terrain : CCNode {

int _offsetX;
CGPoint _hillKeyPoints[kMaxHillKeyPoints];
CCSprite *_stripes;

int _fromKeyPointI;
int _toKeyPointI;

int _nHillVertices;
CGPoint _hillVertices[kMaxHillVertices];
CGPoint _hillTexCoords[kMaxHillVertices];
int _nBorderVertices;
CGPoint _borderVertices[kMaxBorderVertices];

}

@property (retain) CCSprite * stripes;
-(void)setOffsetX:(float)newOffsetX;

@end 
```

地形.m

```
#import "Terrain.h"
#import "HelloWorldLayer.h"

@implementation Terrain
@synthesize stripes = _stripes;

-(void)generateHills {

/*

 The strategy in this algorithm is the following:
Increment x-axis in the range of 160 + a random number between 0-40
Increment y-axis in the range of 60 + a random number between 0-40
Except: reverse the y-axis offset every other time.
Don’t let the y value get too close to the top or bottom (paddingTop, paddingBottom)
Start offscreen to the left, and hardcode the second point to (0, winSize.height/2), so      there’s a hill coming up from the left offscreen.*/

CGSize winSize = [CCDirector sharedDirector].winSize;

float minDX = 160;
float minDY = 60;
int rangeDX = 80;
int rangeDY= 40;

float x = -minDX;
float y = winSize.height/2 - minDY;

float dy, ny;
float sign = 1;// +1 - going up, -1 - going  down
float paddingTop = 20;
float paddingBottom = 20;

for (int i=0; i<kMaxHillKeyPoints; i++) {
    _hillKeyPoints[i] = CGPointMake(x, y);
    if (i == 0) {
        x = 0;
        y = winSize.height/2;
    } else {
        x+=rand()%rangeDX+minDX;
        while (true) {
            dy = rand()%rangeDY + minDY;
            ny = y + dy*sign;
            if (ny < winSize.height - paddingTop && ny > paddingBottom) {
                break;
            }
        }

        y = ny;
    }

    sign *= -1;
}

/*float x = 0;
float y = winSize.width/2;
for (int i = 0; i<kMaxHillKeyPoints; ++i) {
    _hillKeyPoints[i] = CGPointMake(x, y);
    x += winSize.width/2;
    y = random() % (int) winSize.height;
}*/
}

-(void)resetHillVertices {

CGSize winSize = [CCDirector sharedDirector].winSize;

static int prevFromKeyPointI = -1;
static int prevToKeyPointI = -1;

// key points interval for drawing

    // key points interval for drawing
   while (_hillKeyPoints[_fromKeyPointI+1].x < _offsetX-winSize.width/8/self.scale) {
    _fromKeyPointI++;
     }
    while (_hillKeyPoints[_toKeyPointI].x < _offsetX+winSize.width*9/8/self.scale) {
    _toKeyPointI++;
    }

if (prevFromKeyPointI != _fromKeyPointI || prevToKeyPointI != _toKeyPointI) {

    // vertices for visible area
    _nHillVertices = 0;
    _nBorderVertices =0;
    CGPoint p0, p1, pt0, pt1;
    p0 = _hillKeyPoints[_fromKeyPointI];
    for (int i = _fromKeyPointI+1; i<_toKeyPointI+1; i++) {
        p1 = _hillKeyPoints[i];

        // triangle strip between p0 and p1
        int hSegments = floorf((p1.x-p0.x)/kHillSegmentWidth);
        float dx = (p1.x - p0.x)/hSegments;
        float da = M_PI / hSegments;
        float ymid = (p0.y + p1.y)/2;
        float ampl = (p0.y - p1.y)/2;
        pt0 = p0;
        _borderVertices[_nBorderVertices++] = pt0;
        for (int j=1; j<hSegments+1; j++) {
            pt1.x = p0.x + j* dx;
            pt1.y = ymid +ampl * cosf(da*j);
            _borderVertices[_nBorderVertices++] = pt1;

            _hillVertices[_nHillVertices] = CGPointMake(pt0.x, 0);
            _hillTexCoords[_nHillVertices++] = CGPointMake(pt0.x/512, 1.0f);
            _hillVertices[_nHillVertices] = CGPointMake(pt1.x, 0);
            _hillTexCoords[_nHillVertices++] = CGPointMake(pt1.x/512, 1.0f);

            _hillVertices[_nHillVertices] = CGPointMake(pt0.x, pt0.y);
            _hillTexCoords[_nHillVertices++] = CGPointMake(pt0.x/512, 0);
            _hillVertices[_nHillVertices] = CGPointMake(pt1.x, pt1.y);
            _hillVertices[_nHillVertices++] = CGPointMake(pt1.x/512, 0);

            pt0 = pt1;
        }
        p0 = p1;
    }

    prevFromKeyPointI = _fromKeyPointI;
    prevToKeyPointI = _toKeyPointI;
}

}

-(id)init {
if ((self = [super init])) {
    [self generateHills];
}
[self resetHillVertices];

return self;

}

-(void) draw {

glBindTexture(GL_TEXTURE_2D, _stripes.texture.name);
glDisableClientState(GL_COLOR_ARRAY);

glColor4f(1, 1, 1, 1);
glVertexPointer(2, GL_FLOAT, 0, _hillVertices);
glTexCoordPointer(2, GL_FLOAT, 0, _hillTexCoords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nHillVertices);
   // glEnableClientState(GL_COLOR_ARRAY);

for (int i= MAX(_fromKeyPointI, 1); i <= _toKeyPointI; ++i) {

    glColor4f(1.0, 0, 0, 1.0);
    //ccDrawLine(_hillKeyPoints[i-1], _hillKeyPoints[i]);

    glColor4f(1.0, 1.0, 1.0, 1.0);

    CGPoint p0 = _hillKeyPoints[i-1];
    CGPoint p1 = _hillKeyPoints[i];
    int hSegments = floorf((p1.x-p0.x)/kHillSegmentWidth);
    float dx = (p1.x-p0.x)/hSegments;
    float da = M_PI /hSegments;
    float ymid = (p0.y + p1.y)/2;
    float ampl = (p0.y - p1.y)/2;

    CGPoint pt0, pt1;
    pt0 = p0;
    for (int j= 0; j<hSegments+1; ++j) {
        pt1.x = p0.x +j*dx;
        pt1.y = ymid + ampl * cosf(da*j);

        //ccDrawLine(pt0, pt1);

        pt0 = pt1;
    }

}
}

-(void)setOffsetX:(float)newOffsetX {
_offsetX = newOffsetX;
self.position = CGPointMake(-_offsetX*self.scale, 0);
[self resetHillVertices];
}
-(void) dealloc {
[_stripes release];
_stripes = NULL;
[super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:38:57.233

想通了问题。

```
 _hillVertices[_nHillVertices] = CGPointMake(pt0.x, 0);
        _hillTexCoords[_nHillVertices++] = CGPointMake(pt0.x/512, 1.0f);
        _hillVertices[_nHillVertices] = CGPointMake(pt1.x, 0);
        _hillTexCoords[_nHillVertices++] = CGPointMake(pt1.x/512, 1.0f);

        _hillVertices[_nHillVertices] = CGPointMake(pt0.x, pt0.y);
        _hillTexCoords[_nHillVertices++] = CGPointMake(pt0.x/512, 0);
        _hillVertices[_nHillVertices] = CGPointMake(pt1.x, pt1.y);
        _hillVertices[_nHillVertices++] = CGPointMake(pt1.x/512, 0); //This line should be 
                                                                     //modifying the
                                                                     //_hillTexCoords
                                                                     //array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:54:27.367

只是预感，您使用的是 cocos2d 2.0 吗？

因为您发布的代码使用 OpenGL ES 1.1 命令，并且在您使用 cocos2d 2.x 时无法（正确）工作。如果您使用的是 cocos2d 2.0，请使用 v1.x 重试。

# objective-c - 在 NSArray 上转换 objectAtIndex 的返回

> ID：11128574
> 
> 赞同：4
> 
> 时间：2012-06-20T21:36:41.350
> 
> 标签：objective-c, ios, casting, nsarray

试图转换 objectAtIndex 的返回值。

```
(MyClass *)[myArray objectAtIndex:1].name; 
```

你可以在 Objective-C 中像这样内联吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T21:38:21.310

是的你可以：

```
((MyClass *)[myArray objectAtIndex:1]).name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T21:37:59.393

您可以通过用常规方法调用语法替换访问属性的点语法来完全避免强制转换：

```
[[myArray objectAtIndex:1] name] 
```

# html - 哈希链接重新加载页面

> ID：11128575
> 
> 赞同：2
> 
> 时间：2012-06-20T21:36:42.003
> 
> 标签：html, hash, browser-bugs

我有一个安装在第三方网站上的代码片段。我无法深入了解细节，但它通过使用`<script>`标签将 HTML、CSS 和 JS 加载到页面上。

部分代码是点击此链接时执行的 JS 函数：

```
<a href="#">?</a> 
```

如果页面上存在阻止函数执行的 JS 错误，单击链接显然只是将哈希添加到 URL 并将用户带到页面顶部。这是预期的回退行为。

**但是，**在一个存在大量 JS 错误的第三方站点上，单击该链接会删除顶级域之后的所有内容，添加哈希并指向该页面（主页）。例如，该链接将把用户从：

```
http://www.example.com/2010/05/14/very-interesting-blog-post/ 
```

至

```
http://www.example.com/# 
```

值得注意的是，该问题出现在 Firefox 和 Chrome 中，而不是 IE9。我知道如果没有更详细的代码可能无法正确诊断问题，但我无权提供它。我只是希望对这种奇怪的浏览器行为得到某种合理的解释。

如果它有帮助，有问题的网站是一个 WordPress 博客。提前致谢。

编辑：这显然不是由网站上的任何 JS 引起的，因为关闭 JS 并添加与检查器的链接会产生相同的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-12T12:53:22.313

我有一个类似的错误，点击任何`<a href="#">`会导致整个页面重新加载。我设法通过`<base href="/">`从页面中删除标签来解决这个`<head>`问题。我（还）找不到任何有关此的信息。如果我能找到任何其他信息，我会添加更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-07T08:38:02.473

当您使用 windows.onpopstate 处理后退或前进按钮并使用 ajax 加载页面时，会发生此问题。尝试解决您的 js 代码以处理历史记录。

# programming-languages - 录制和编辑网络摄像头视频的语言

> ID：11128579
> 
> 赞同：-3
> 
> 时间：2012-06-20T21:37:01.140
> 
> 标签：programming-languages, webcam

我想知道人们在尝试创建一个可以为三个不同的网络摄像头录制视频源并能够将 5 或 10 秒的流拼接成视频文件的程序时建议使用什么语言？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:41:05.850

这与其说是“语言选择”问题，不如说是“环境选择”问题——任何可用于开发长时间运行的进程的语言，该进程可以与任何合适的网络摄像头/图像采集 API 进行交互。

*   C#/VB.NET、Python 或 C++ 将是您最好的选择（按照难度递增的顺序）。
*   这个任务在 PHP、EcmaScript、VBScript 和 Brainfuck 中是不可能的。
*   Java 和 Assembly 是可能的，但可能会使事情变得比他们需要的更困难。

在我们提供具体建议之前，我们需要更多关于它们是哪种网络摄像头的信息（USB UVC 类？Firewire DV 或 Firewire IIDC？内置 Motion-JPEG 服务器的网络摄像头？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:46:21.777

我使用 Adob​​e Flex 轻松完成了一个项目，以捕获客户端网络摄像头视频并将其流式传输到服务器。如果您需要通过网络执行此操作，这是一个不错的选择。如果您的环境受到更多控制，例如您可以控制所有硬件，我会使用 Max/MSP/Jitter，它很容易连接捕获视频，并且旨在进行实时拼接等。

这些选项中的任何一个的好处是您*不需要*提前知道正在使用哪些硬件品种，因为任何一个运行时都有任何这些的处理程序。

# javascript - 在 raphaeljs 中画一个轮子

> ID：11128583
> 
> 赞同：1
> 
> 时间：2012-06-20T21:37:12.043
> 
> 标签：javascript, raphael

我正在尝试做所谓的微调。基本上这看起来像：http: [//jsfiddle.net/r9KQK/1/](http://jsfiddle.net/r9KQK/1/)

稍后我会有一些音频播放器，当我们在平板电脑上使用它时，这将有助于选择秒数。

问题是当您尝试移动红色圆圈时，当它通过绿色圆圈的顶部和底部时它会奇怪地下降，但不是在 0 或 PI/2 时，例如在 -260..-269 和 181..190 度

只需尝试移动它，您就会看到错误。

我的代码有什么问题？

提前致谢

**更新**

最后更新：http: [//jsfiddle.net/r9KQK/17/](http://jsfiddle.net/r9KQK/17/)

在这个例子中，我得到 0..360 范围内的度数。但是相反，我应该在开始拖动的点和结束拖动的点之间获得 delta 度，但我无法计算出数学。我还应该考虑红圈的方向，这样 delta 将是 + 或 - =\

**更新**

最后：http: [//jsfiddle.net/r9KQK/18/](http://jsfiddle.net/r9KQK/18/)

但是代码真的很糟糕。虽然现在是凌晨 2 点 46 分，而且我有点困，所以......但无论如何我认为它可以更简化

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T17:00:15.700

发生这种情况是因为当 DeltaX 为零时，您的 Math.atan 参数变为无穷大。我推荐使用 atan2，它会自动处理这种极端情况：

```
function(dx, dy, x, y) 
{
    var deltaY = this.oy + dy - fineTuning.ring.attr('cy');
    var deltaX = this.ox + dx - fineTuning.ring.attr('cx');
    var angle = Math.atan2( deltaY, deltaX );

    // etcetera, etcetera 
```

或检查[小提琴](http://jsfiddle.net/kevindivdbyzero/9uwFG/)。

# javascript - 使用 jQuery 函数 .load() 时出现问题

> ID：11128585
> 
> 赞同：2
> 
> 时间：2012-06-20T21:37:15.430
> 
> 标签：javascript, jquery, ajax

我在尝试将 PHP 文件的内容加载到`<div>`. 我已经排除了这是服务器端问题的可能性，所以这引出了我的问题。你能发现下面的代码有什么问题吗？

```
<script>
$('.navigation .responsive .menu ul li a').click(function()
{
    var toLoad = $(this).attr('href');
    $(".content").load(window.location.host + "/index.php?url=" + toLoad);
});
</script> 
```

我知道出于安全原因，浏览器不允许`.load()`从外部域加载内容；但是，使用`window.location.host`会是一个问题，因为它是同一个域吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:40:55.997

`window.location.host`只包括主机名，不包括必要的协议。也包括：

```
$(".content").load(window.location.protocol + '//' + window.location.host + "/index.php?url=" + toLoad); 
```

当然，您可能甚至不需要它；前导`/`将为您提供绝对 URL：

```
$(".content").load("/index.php?url=" + toLoad); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:39:54.983

尝试使用`window.location.hostname`as`window.location.host`还包括端口号，有时还包括其他字符

# spring-mvc - 瓷砖 - Spring MVC

> ID：11128589
> 
> 赞同：2
> 
> 时间：2012-06-20T21:37:58.330
> 
> 标签：spring-mvc, tiles2

和有什么区别

```
<tiles:useAttribute ...> 
```

和

```
<tiles:insertAttribute ...> 
```

你能举一些例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:50:57.670

请参阅[http://tiles.apache.org/2.2/framework/tiles-jsp/tlddoc/tiles/insertAttribute.html](http://tiles.apache.org/2.2/framework/tiles-jsp/tlddoc/tiles/insertAttribute.html)和[http://tiles.apache.org/2.2/framework/tiles-jsp/tlddoc/tiles/useAttribute .html](http://tiles.apache.org/2.2/framework/tiles-jsp/tlddoc/tiles/useAttribute.html)。

`useAttribute`声明一个包含该属性的变量。`insertAttribute`在响应中插入属性。这与两者之间的区别基本相同

```
String id = attributeValue("theAttribute"); 
```

和

```
out.println(attributeValue("theAttribute")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:43:09.493

谢谢@JB 尼泽特！

实际上我需要在 jsp 页面中使用这个 tile 属性。我发现了你所解释的差异和几乎相同的东西。但是，我想将我的示例分享给那些在 jsp 页面上尝试的人

*myLayout.jsp*的代码片段

 *```
<tiles:useAttribute name="my_title"/>
<c:if test="${not empty my_title}">
    <tiles:insertAttribute name="my_title"/>
</c:if> 
```

**useAttribute**将在某种意义上将“my_title”转换为现在可以作为普通 jsp 变量进行操作的变量。这个新变量将携带瓷砖定义提供的值。因此，可以检查变量是否为空或空白，如果不为空，则使用**insertAttribute将值输出到浏览器（响应）**

这是示例磁贴定义：

```
<definition name="test" template="myLayout.jsp">    
    <put-attribute name="my_title" value="Web Blog" />
</definition> 
```

请享用！*

# python - Scrapy CrawlSpider：如何跨不同级别的解析访问项目

> ID：11128596
> 
> 赞同：5
> 
> 时间：2012-06-20T21:38:30.360
> 
> 标签：python, web-scraping, scrapy, web-crawler, multi-level

我正在抓取一个网站（只有两个级别的深度），我想从两个级别的网站上抓取信息。我遇到的问题是，我想用两个级别的信息填写一个项目的字段。我该怎么做呢？

我在想有一个项目列表作为一个实例变量，所有线程都可以访问（因为它是蜘蛛的同一个实例），并且 parse_1 将填写一些字段，而 parse_2 必须在填写之前检查正确的键出对应的值。这种方法看起来很繁琐，我仍然不确定如何使它起作用。

我在想必须有更好的方法，也许以某种方式将一个项目传递给回调。我不知道如何使用 Request() 方法来做到这一点。想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T10:36:53.340

从scrapy文档中：

在某些情况下，您可能有兴趣将参数传递给这些回调函数，以便稍后在第二个回调中接收参数。您可以为此使用 Request.meta 属性。

以下是如何使用此机制传递项目以填充来自不同页面的不同字段的示例：

```
def parse_page1(self, response):
    item = MyItem()
    item['main_url'] = response.url
    request = Request("http://www.example.com/some_page.html",
                      callback=self.parse_page2)
    request.meta['item'] = item
    return request

def parse_page2(self, response):
    item = response.meta['item']
    item['other_url'] = response.url
    return item 
```

所以，基本上你可以抓取第一页并将所有信息存储在项目中，然后发送整个项目并请求该二级 url，并将所有信息放在一个项目中。

# linker - cmake：定义链接标志的顺序

> ID：11128600
> 
> 赞同：5
> 
> 时间：2012-06-20T21:39:15.653
> 
> 标签：linker, cmake, flags

我是cmake的新手。我需要链接一些额外的库，所以我使用了

```
 CMAKE_EXE_LINKER_FLAGS:STRING=-lmymalloc -Wl,--wrap,malloc 
```

问题是 -lmymalloc 在生成的 Makefile 中被列为链接器标志的第一个参数，然后是其他几个参数（这似乎是由 cmake 以另一种方式定义的）。我需要将它移到列出的标志的末尾，否则它不会链接。我怎样才能做到这一点？

# php - 如何在数组中搜索字符串，然后在 php 中获取相同字符串之后的内容，直到某个点？

> ID：11128605
> 
> 赞同：1
> 
> 时间：2012-06-20T21:39:33.157
> 
> 标签：php, json

编辑：完全解析数组（它包含未解析的 JSON！）

```
array(22) {
  [0]=>
array(4) {
["responseData"]=>
array(1) {
  ["translatedText"]=>
  string(163) "21558299 this is the text that i want to end up with, excluding the id number at the start of the string"
}
["responseDetails"]=>
string(0) ""
["responseStatus"]=>
int(200) 
```

我要搜索的字符串是 2155.. 并且 IFF 它存在，我想获取它之后的字符串... 我该怎么做？非常感谢任何帮助！（或者更好的解决方案......？）

**我需要的是一个返回布尔值，告诉我 ID 是否实际包含在数组中 - 如果是，我需要文本。如果不是，我需要知道，因为我想添加一些其他文本（此处不相关）。**

免责声明：要把这个送给 nickb，他太棒了。

编辑：这部分现在无关紧要：

* * *

这是我到目前为止得到的，但它返回 null。$trans_json 是上面引用的数组。$search[id] 是另一个数组，它包含 id 字符串。

```
$return = array_filter( $trans_json, function($el) { 
    if( !( $start = strpos( $el, $search[id]) === false)) {
            $str =  substr( $el, $start);
            return substr( $str, 0, strpos( $str, '}'));
    }
            return null;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:42:07.633

Use [`array_walk()`](http://www.php.net/array_walk):

Your example isn't working because `$search` is undefined. You need a closure (note the `use ($search)`:

```
$search['id'] = '2s5d56b9712';
$return = array_walk( $trans_json, function( &$el) use( $search) { 
    if( !( ($start = strpos( $el, $search['id'])) === false)) {
        $str =  substr( $el, $start);
        $el = substr( $str, strlen( $search['id']) + 1, strpos( $str, '}'));
    }
});

var_dump( $trans_json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:51:06.063

See code below if it suits your need.

```
<?php

$subject = 'array(32) { [0]=> string(3266) "{"respString":{"feedbackText":"2s5d56b9712 the preceding id is the string i want to search for, and this is the rest of the text i want to get until here:"},"blablaarraycontinues...';

preg_match("/feedbackText\":\"2s5d(.*)\}/",$subject,$matches);

print_r($matches[1]); // output the matched string

?> 
```

# c# - 访问类中的 ASPX 元素

> ID：11128606
> 
> 赞同：0
> 
> 时间：2012-06-20T21:39:36.073
> 
> 标签：c#, asp.net

我有一堆操作 ASPX 页面元素的方法，此时将它们封装到它们自己的静态对象中是有意义的。但是，似乎我无法访问 ASPX 页面之外的表单元素。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:55:27.130

You need to pass the Page itself into the class, see the example below:

**ASPX page**

```
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="txtTest" runat="server" Text="Test" />
</div>
</form> 
```

**Code-Behind**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Process p = new Process(this);
        string s = p.GetTextBoxValue();
    } 
```

**Class**

```
 public class Process
    {
        public Page thePage { get; set; }

        public Process(Page page)
        {
            thePage = page;
        }

        public string GetTextBoxValue()
        {
            TextBox tb = (TextBox)thePage.FindControl("txtTest");
            return tb.Text;
        }

    } 
```

Process is probably not the best name for the class, but this is purely a demo.

Also, passing the Page object into another class tight couples that class to the Page object. I would recommend reconsidering your design of the class you're trying to make to not rely on the Page object entirely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:44:45.193

您需要将 Page 对象作为参数之一传递给您的类方法，这样它的元素就可以在类中访问。

例如，如果您有这样的课程：

```
public class CMyDataClass {
   public bool CompareText(System.Web.UI.Page i_oPage) {
      TextBox oTextBox = i_oPage.FindControl("TextBox1");
      return (oTextBox.Text == "My Data");
   }
} 
```

您可以从页面中像这样使用它：

```
CMyDataClass oMyDataClass = new CMyDataClass();

if (oMyDataClass.CompareText(this)) {
    Response.Write("Ok!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:50:55.960

如果你真的想封装功能，我想你最好创建一个类，在其中将相关元素传递给构造函数。

如果您的目标是在其他页面中重用，您可以创建一个从中继承的基本页面。另一种选择是在您从页面中引用的母版页中执行操作。

我认为需要一个更详细的问题才能给出更详细的答案。

# php - JW播放器IPAD黑屏

> ID：11128609
> 
> 赞同：0
> 
> 时间：2012-06-20T21:39:56.553
> 
> 标签：php, javascript, html, jwplayer

我正在使用 JW 播放器[http://www.longtailvideo.com/players/](http://www.longtailvideo.com/players/)嵌入我的视频， 并且我的视频无法在 Ipad 或 Iphone 上播放，我认为是 HTML5 视频标签。视频只是黑色。嵌入 div 的代码

```
 <div id="jwplayer-1"></div>     
 <script type="text/javascript">
        jwplayer('jwplayer-1').setup(
{"flashplayer":"<?php echo $jwplayer_folder; ?>/player.swf",
"width":"550",
"height":"500",
"controlbar":"bottom",
"icons":"true","playlist.position":"none","playlistsize":"180","repeat":"none",
"shuffle":"false","bufferlength":"1",
"smoothing":"true",
"stretching":"uniform",
"wmode":"opaque",
"mute":"false",
"volume":"90",
"skin":"<?php echo $jwplayer_folder; ?>/skins/whotube.zip",
"dock":"false",
"autostart":"false",
"file":"http://www.longtailvideo.com/jw/upload/bunny.mp4",
"image":"<?php echo $image_slug; ?>",
});
</script> 
```

在 Flash 端一切正常，它在任何普通浏览器上播放视频，但在 ipad 上，视频无法播放。我知道这不是编码问题或任何问题，因为我在视频下方使用此代码并且它可以工作......

```
 <video width="320" height="240" controls="controls">
<source src="<?php echo $video_slug ?>" type="video/mp4" />
<source src="movie.ogg" type="video/ogg" />
Your browser does not support the video tag.
</video> 
```

任何想法或想法，因为我已经尝试了所有我认为这可能是我在设置方法上设置 JW 播放器的方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:08:57.840

好的，我现在明白你的问题了，

下面的代码似乎在 iPad/iPhone 上工作，[工作演示在这里](http://jsfiddle.net/epinapala/HTM4s/7/)

此方法也支持 Flash Fallback，但主要播放 HTML5 视频（前提是视频没有编码问题。）

您现在可以使用 Php 动态加载图像、视频、jw 文件夹名称等。如果您想完全摆脱对 flash 的支持，
`{ type: 'flash', src:'http://player.longtailvideo.com/player.swf'}`请从模式节点中删除！

```
<script src="http://player.longtailvideo.com/jwplayer.js" type="text/javascript"></script>    

<p><div id="exampleHTML"></div></p>

<script type="text/javascript">
jwplayer('exampleHTML').setup({
    height: 360,
    image: "http://content.bitsontherun.com/thumbs/bkaovAYt-720.jpg",
    levels: [
        { file: "http://content.bitsontherun.com/videos/bkaovAYt-injeKYZS.mp4", type:"video/mp4" },
        { file: "http://content.bitsontherun.com/videos/bkaovAYt-27m5HpIu.webm", type:"video/webm" }
    ],
    modes: [
        { type: 'html5' },
        { type: 'flash',  src:'http://player.longtailvideo.com/player.swf'}
    ],
    width: 640
});
</script>​ 
```

在 iPad 上播放视频的屏幕截图： ![在此处输入图像描述](../Images/902d32f8afc3e9d99af6b8b5f1e3f93e.png) 还请记住，jw HTML5 播放器存在限制，您可以在[此处找到它们](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/14625/html5-support)

# arrays - R：用协方差函数填充矩阵

> ID：11128618
> 
> 赞同：1
> 
> 时间：2012-06-20T21:40:46.947
> 
> 标签：arrays, r, covariance

我正在尝试使用光谱模拟来生成空间变量的无条件高斯实现。该变量具有协方差函数 c(h) = exp(-h/a)，其中 a 是协方差函数的范围，h 是距离。第一步，我需要将协方差函数离散化为数组/矩阵。矩阵中的条目对应于空间中的物理位置（即矩阵索引对应于 x 和 y 坐标）：

```
cov(i,j) = exp(-sqrt((i-64)^2 + (j-64)^2) / 20) for i,j = 1 to 128 
```

我希望在 R 中生成一个矩阵，并用与数组索引相关的协方差函数填充它。作为 R 的初学者，我有点迷茫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:48:43.043

将该表达式填充到函数中：

```
myfun <- function(i, j) {
  exp(-sqrt((i-64)^2 + (j-64)^2) / 20)
} 
```

`i, j`然后制作可能组合的“矩阵” ：

```
n <- 128
combos <- expand.grid(i=1:n, j=1:n) 
```

然后用这两个向量调用你的函数：

```
matrix(myfun(combos$i, combos$j), nrow=n) 
```

使用较小的数字：

```
> n <- 5
> combos <- expand.grid(i=1:n, j=1:n)
> matrix(myfun(combos$i, combos$j), nrow=n)
           [,1]       [,2]       [,3]       [,4]       [,5]
[1,] 0.01162296 0.01203954 0.01246747 0.01290681 0.01335761
[2,] 0.01203954 0.01247458 0.01292166 0.01338085 0.01385221
[3,] 0.01246747 0.01292166 0.01338860 0.01386840 0.01436113
[4,] 0.01290681 0.01338085 0.01386840 0.01436960 0.01488451
[5,] 0.01335761 0.01385221 0.01436113 0.01488451 0.01542247
> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:30:30.053

你也可以使用`outer`：

```
f <- function(i, j) {
  exp(-sqrt((i-64)^2 + (j-64)^2) / 20)
}
n <- 5

outer(1:n, 1:n, f) 
```

# php - 如何要求用户上传文件 - php？

> ID：11128619
> 
> 赞同：0
> 
> 时间：2012-06-20T21:40:51.077
> 
> 标签：php

我正在尝试创建一个大型、多页的 PHP Web 应用程序，供客户输入信息并接收输出（想想税务软件）。但是，我似乎无法弄清楚如何要求客户端上传文件。对于文件，我主要指的是 PDF、txt、JPEG 等。

有几个文件上传字段**必须**上传，输出才能包含所有必要的信息才能工作，还有几个其他文件上传字段是可选的。

如果可能的话，我想在 PHP 中执行此操作，因为据我了解，可以关闭 Javascript 并停止验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:45:41.610

首先，您不应该*只*使用 JavaScript 来验证您的表单，应该始终进行服务器端验证。

关于您的问题，当您使用 PHP 上传文件时，您会在`$_FILES`数组中找到它的信息。您需要查看那里以了解文件是否已上传或格式是否正确等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:02:32.327

```
if(!isset($_FILES["fileinputname"][]))
{ 
die("Upload files, you must.");
} 
```

[你应该看看这篇文章](http://www.php.net/manual/en/features.file-upload.post-method.php)

此外，对于 html 验证，您可以使用它。

（大部分人不喜欢，很多人个人喜好）

可能有效，但可以绕过 html 验证。IE 和 Safari 不支持。

[http://www.w3schools.com/html5/att_input_required.asp](http://www.w3schools.com/html5/att_input_required.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:05:44.333

在处理您想要使用的表单的 PHP 文件上，如下所示：

```
if (isset ($_FILES['myfile']['tmp_name']) && !empty ($_FILES['myfile']['tmp_name'])) {
  //处理文件上传
} 别的 {
  echo '您必须在“myfile”字段中上传文件才能继续！';
}
```

当然，这将是其他适当的表单验证技术的补充。

# c# - 阻止任何数据写入数组时出错？

> ID：11128624
> 
> 赞同：2
> 
> 时间：2012-06-20T21:41:28.147
> 
> 标签：c#, arrays, exception

> **可能重复：**
> [当 Directory.GetFiles() 被拒绝访问时忽略文件夹/文件](https://stackoverflow.com/questions/172544/ignore-folders-files-when-directory-getfiles-is-denied-access)

我正在编写一个程序，除了所有子目录之外，它还需要从指定路径中查找文件。不幸的是，程序尝试访问的某些文件夹会返回异常，因为访问被拒绝（例如某些系统文件）。我认为在它周围放置一个 try 块会使脚本忽略给出错误的文件夹并继续，但事实证明，任何时候出现异常，即使它被捕获，它也会阻止任何文件被保存到数组。因此，如果要运行它，然后显示数组 filePaths，它仍然会出现空白。有没有办法让打开的文件夹/文件仍然复制到阵列中，同时简单地跳过被阻止的文件夹，而不是跳过整个操作？

```
public getFiles(string path)
{
    string[] filePaths = {};

    string path_ = path;

    try
    {
        filePaths = Directory.GetFiles(path_,"*.*",SearchOption.AllDirectories);
    }

    catch{}
} 
```

# zsh - 如何在 zsh 中转义命令输出（oneliner）

> ID：11128625
> 
> 赞同：0
> 
> 时间：2012-06-20T21:41:32.870
> 
> 标签：zsh

我有这个美妙的音乐库应用程序：甜菜。

当我运行时`beet ls somequery -f`，我会得到一个以换行符分隔的音乐文件路径列表。不幸的是，路径包含未转义的空格，我不能像这样喂 mplayer：

```
mplayer `beet ls smooth` 
```

这也不起作用：

```
mplayer $((q)beet ls smooth) 
```

谁能提供一个紧凑的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:49:24.397

使用`xargs`：

```
beet ls smooth | xargs mplayer 
```

这将保护文件名免受空格的影响，但不会保护换行符。（我假设它们不包含换行符，因为程序`beet`会生成一个换行符分隔的列表。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:02:25.543

`mplayer ${(f)"$(beet ls smooth)"}`

# java - 如何让 Android 中的按钮在屏幕上自动拉伸/收缩？

> ID：11128626
> 
> 赞同：0
> 
> 时间：2012-06-20T21:41:40.037
> 
> 标签：java, android, xml, button, grid-layout

XML 代码：

```
<GridLayout
    android:id="@+id/grid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/step"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/menu" >
</GridLayout> 
```

上面的代码创建了一个网格，以允许对正在创建的按钮进行简单的布局。

Java代码：

```
GridLayout grid = (GridLayout)findViewById(R.id.grid);
grid.setColumnCount(10);
grid.setRowCount(10);
cells = new Button[100];
for (int i = 0; i < 100; i++) { 
    cells[i] = new Button(this);

    if (gen.nextInt(3) % radiofill == 0) //[0,3)
        cells[i].setBackgroundColor(Color.WHITE);
    else
        cells[i].setBackgroundColor(Color.BLACK);

    cells[i].setClickable(true);
    cells[i].setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
            v.setBackgroundColor(Color.BLACK);
        }
    });
    grid.addView(cells[i]); 
} 
```

在这段代码中，100 个按钮被创建并添加到一个数组中，该数组最终被添加到 XML 中创建的 GridLayout 中。

所有按钮似乎都按原样创建、放置和工作，但按钮太大，无法放入手机屏幕。如何使按钮完全填充 GridLayout 而不会溢出或溢出？在本例中，创建了 100 个按钮，但程序旨在允许创建多种类型的完美平方数（4、9、16、25、36、49），因此 GridLayout 需要灵活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:55:38.760

如果您使用的是 LinearLayout，您可以

```
<LinearLayout android:layout_height="wrap_content"
android:layout_width="0dip"
android:layout_weight="1" /> 
```

# adfs2.0 - 如何清除 Live ID Cookie

> ID：11128628
> 
> 赞同：1
> 
> 时间：2012-06-20T21:41:58.937
> 
> 标签：adfs2.0

因此，我们在面向公众的 SharePoint 2010 站点中使用 ADFS。支持的登录之一是通过 Live ID。我们发现，如果用户在访问我们的站点之前登录到 Hotmail 等 Live ID 站点，则会发生以下情况：

1.  我们的网站认为用户未登录，因为 ADFS LS cookie 不存在
2.  当我们单击登录并且 ADFS 将我们重定向到 Live ID 时，Live ID 登录过程会检测到它的 cookie 并使用之前用户的电子邮件自动让我们登录。我们实际上想使用另一个电子邮件地址。
3.  即使我们清除我们的cookies，上述行为仍然存在

我们在 Windows 7 上成功尝试了以下操作：

1.  清除浏览器 cookie
2.  删除 %userprofile%\AppData\Roaming\Microsoft\Windows\Cookies\ 中的所有文件

然后 Live ID 正确地要求用户登录。

但是，上述文件夹在 Windows 8 计算机中不存在，可以在 IE 10 中重现此行为。

所以我真的需要知道 Live ID cookie 的**名称和位置**，这样我才能找到并销毁它以获得登录提示。

理想的解决方案是 ADFS 正确销毁 cookie。ADFS 团队正在构建一个诊断页面来删除他们的 cookie，但我认为他们无法销毁 Live ID cookie，因为它不是来自他们的域。如果我能找到它的位置，我们现在可以接受手动说明。

**更新** 找到了答案。诀窍是先访问 live.com 并单击注销，然后再访问 SharePoint 应用程序。不是最好的解决方案，但它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:20:21.557

更新找到了答案。诀窍是先访问 live.com 并单击注销，然后再访问 SharePoint 应用程序。不是最好的解决方案，但它有效

# c++ - c ++，自当地时间午夜以来获得毫秒数

> ID：11128629
> 
> 赞同：4
> 
> 时间：2012-06-20T21:41:59.287
> 
> 标签：c++, time, dst

令人难以置信的是，在 C++ 中完成上述任务是多么困难。我正在寻找一种在保持毫秒精度的同时尽可能有效地做到这一点的方法。

到目前为止，我所拥有的解决方案要么需要大量代码和函数调用，从而使实现速度变慢，要么需要我每年更改两次代码以考虑夏令时。

将在其上运行的计算机使用 ntp 同步，并且应该可以直接访问为 DST 调整的本地时间。有这方面专业知识的人可以分享一些解决方案吗？

我的平台是 CentOS5，g++ 4.1.2，Boost 1.45，解决方案不需要是可移植的，可以是平台特定的。它只需要快速并避免每年两次更改代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-17T01:31:58.870

老问题的新答案。

新答案的理由：我们现在有更好的工具。

我假设所需的结果是自当地午夜以来的“实际”毫秒数（当午夜以来 UTC 偏移发生变化时得到正确答案）。

基于`<chrono>`和使用这个[免费的开源库](https://github.com/HowardHinnant/date)的现代答案非常简单。该库已移植到 VS-2013、VS-2015、clang/libc++、macOS 和 linux/gcc。

为了使代码可测试，我将启用 API 从`std::chrono::system_clock::time_point`任何[IANA 时区](http://www.iana.org/time-zones)中的任何时间获取自午夜以来的时间（以毫秒为单位） 。

```
std::chrono::milliseconds
since_local_midnight(std::chrono::system_clock::time_point t,
                     const date::time_zone* zone); 
```

然后在这个可测试的原语之上轻松编写自本地时区午夜以来的当前时间：

```
inline
std::chrono::milliseconds
since_local_midnight()
{
    return since_local_midnight(std::chrono::system_clock::now(), 
                                date::current_zone());
} 
```

写出问题的实质是相对直截了当的：

```
std::chrono::milliseconds
since_local_midnight(std::chrono::system_clock::time_point t,
                     const date::time_zone* zone)
{
    using namespace date;
    using namespace std::chrono;
    auto zt = make_zoned(zone, t);
    zt = floor<days>(zt.get_local_time());
    return floor<milliseconds>(t - zt.get_sys_time());
} 
```

首先要做的是创建一个除了 pair和`zoned_time`之外什么都不做的。这种配对主要是为了使语法更好。它实际上不做任何计算。`zone``t`

下一步是获取与 关联的本地时间`t`。就是`zt.get_local_time()`这样。这将具有任何精度`t`，除非`t`比秒更粗，在这种情况下，本地时间将具有秒精度。

调用将本地时间`floor<days>` *截断*`days`为. 这有效地创建了一个`local_time`等于当地午夜的时间。通过将其分配`local_time`回`zt`，我们根本不会更改时区`zt`，但我们将`local_time`of更改`zt`为午夜（因此`sys_time`也更改了它）。

我们可以从 with 中得到对应`sys_time`的。这是对应于当地午夜的 UTC 时间。然后从输入中减去它并将结果截断到所需的精度是一个简单的过程。`zt``zt.get_sys_time()``t`

如果当地的午夜不存在，或者不明确（有两个），则此代码将抛出一个异常，该异常来自`std::exception`一个非常有用的`what()`.

可以简单地打印出自当地午夜以来的当前时间：

```
std::cout << since_local_midnight().count() << "ms\n"; 
```

为了确保我们的函数正常工作，值得输出一些示例日期。这最容易通过指定时区（我将使用“America/New_York”）和一些我知道正确答案的本地日期/时间来完成。为了在测试中促进良好的语法，另一个`since_local_midnight`帮助：

```
inline
std::chrono::milliseconds
since_local_midnight(const date::zoned_seconds& zt)
{
    return since_local_midnight(zt.get_sys_time(), zt.get_time_zone());
} 
```

这只是`system_clock::time_point`从 a 中提取和时区`zoned_time`（以秒为精度），并将其转发给我们的实现。

```
auto zt = make_zoned(locate_zone("America/New_York"), local_days{jan/15/2016} + 3h);
std::cout << zt << " is "
          << since_local_midnight(zt).count() << "ms after midnight\n"; 
```

这是冬天中间的凌晨 3 点，输出：

```
2016-01-15 03:00:00 EST is 10800000ms after midnight 
```

并且是正确的（10800000ms == 3h）。

我只需将新的本地时间分配给`zt`. 以下是“春季前进”夏令时过渡（3 月的第 2 个星期日）之后的凌晨 3 点：

```
zt = local_days{sun[2]/mar/2016} + 3h;
std::cout << zt << " is "
          << since_local_midnight(zt).count() << "ms after midnight\n"; 
```

这输出：

```
2016-03-13 03:00:00 EDT is 7200000ms after midnight 
```

由于跳过了从凌晨 2 点到凌晨 3 点的当地时间，因此正确输出了自午夜以来的 2 小时。

仲夏的一个例子让我们回到午夜后 3 小时：

```
zt = local_days{jul/15/2016} + 3h;
std::cout << zt << " is "
          << since_local_midnight(zt).count() << "ms after midnight\n";

2016-07-15 03:00:00 EDT is 10800000ms after midnight 
```

最后，在秋季从夏令时转换回标准之后的一个例子给了我们 4 个小时：

```
zt = local_days{sun[1]/nov/2016} + 3h;
std::cout << zt << " is "
          << since_local_midnight(zt).count() << "ms after midnight\n";

2016-11-06 03:00:00 EST is 14400000ms after midnight 
```

如果需要，您可以避免在午夜不存在或不明确的情况下出现异常。在模棱两可的情况下，您必须事先决定：您要从第一个午夜开始测量还是从第二个午夜开始测量？

以下是您从一开始的测量方式：

```
std::chrono::milliseconds
since_local_midnight(std::chrono::system_clock::time_point t,
                     const date::time_zone* zone)
{
    using namespace date;
    using namespace std::chrono;
    auto zt = make_zoned(zone, t);
    zt = make_zoned(zt.get_time_zone(), floor<days>(zt.get_local_time()),
                    choose::earliest);
    return floor<milliseconds>(t - zt.get_sys_time());
} 
```

如果您想从第二个午夜开始测量，请`choose::latest`改用。如果午夜不存在，您可以使用其中`choose`之一，它将从与午夜所在的本地时间间隔接壤的单个 UTC 时间点开始测量。这都可能非常令人困惑，这就是为什么默认行为只是抛出一个非常有用的例外`what()`：

```
zt = make_zoned(locate_zone("America/Asuncion"), local_days{sun[1]/oct/2016} + 3h);
std::cout << zt << " is "
          << since_local_midnight(zt).count() << "ms after midnight\n";

what():
2016-10-02 00:00:00.000000 is in a gap between
2016-10-02 00:00:00 PYT and
2016-10-02 01:00:00 PYST which are both equivalent to
2016-10-02 04:00:00 UTC 
```

如果你使用`choose::earliest/latest`公式，而不是上面的异常`what()`，你会得到：

```
2016-10-02 03:00:00 PYST is 7200000ms after midnight 
```

如果你想做一些*非常*棘手的事情，比如使用`choose`不存在的午夜，但为不明确的午夜抛出异常，这也是可能的：

```
auto zt = make_zoned(zone, t);
try
{
    zt = floor<days>(zt.get_local_time());
}
catch (const date::nonexistent_local_time&)
{
    zt = make_zoned(zt.get_time_zone(), floor<days>(zt.get_local_time()),
                    choose::latest);
}
return floor<milliseconds>(t - zt.get_sys_time()); 
```

因为达到这样的条件确实很少见（例外），所以使用`try/catch`是合理的。但是，如果您想完全不抛出，则此库中存在一个低级 API 来实现此目的。

最后请注意，这个冗长的答案实际上是关于 3 行代码，其他一切都是关于测试和处理罕见的例外情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:37:15.750

这实际上取决于您为什么需要“自午夜以来的毫秒数”以及您打算将其用于什么。

话虽如此，您需要考虑到凌晨 3 点并不真正意味着自午夜以来的 3 小时，当涉及 DST 时。如果您出于某种原因确实需要“自午夜以来的毫秒数”，您可以在午夜获得一个 Epoch 时间，在凌晨 3 点获得另一个，然后减去两者。

但是，在某些情况下，“午夜”的概念可能并不那么稳定。如果某个地区的规则是在 DST 结束时从凌晨 1 点回退到午夜，那么您一天中有两个午夜。

所以我真的怀疑你对“午夜”的依赖。通常，这些细分时间仅用于显示和人类理解，并且所有内部计时都是使用纪元时间完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:58:24.193

如果您使用的是 Linux，请`gettimeofday`给出自 Epoch 以来的秒数/微秒数，这可能会有所帮助。但这实际上与 DST 没有任何关系，因为 DST 仅与细分时间有关（即年、月、日、小时、分钟、秒）。

要获得分解时间，请使用`gmtime`或`localtime`与结果的“秒”部分一起使用`gettimeofday`：

```
struct timeval tv;
gettimeofday(&tv, 0);
struct tm *t = localtime(&tv.tv_sec);  // t points to a statically allocated struct 
```

`localtime`给出当地时区的细分时间，但它可能容易受到 DST 的影响。`gmtime`以 UTC 表示的细分时间，不受 DST 影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T22:19:34.323

您可以运行`localtime_r`, 并`mktime`在调整结果后`localtime_r`计算“午夜”相对于 Epoch 的值。

**编辑：**进入`now`例程以避免不必要的调用`time`.

```
time_t global_midnight;
bool checked_2am;

void update_global_midnight (time_t now, bool dst_check) {
    struct tm tmv;
    localtime_r(&now, &tmv);
    tmv.tm_sec = tmv.tm_min = tmv.tm_hour = 0;
    global_midnight = mktime(&tmv);
    checked_2am = dst_check || (now >= (global_midnight + 2*3600));
} 
```

假设`global_midnight`最初是`0`. 然后，您将在凌晨 2 点和第二天调整它的值，使其与 DST 保持同步。当您调用时`clock_gettime`，您可以计算与 的差异`global_midnight`。

**编辑：**由于 OP 想要对例程进行基准测试，因此为假定`true`为快速路径的编译器调整代码，并四舍五入到最接近的毫秒。

```
unsigned msecs_since_midnight () {
    struct timespec tsv;
    clock_gettime(CLOCK_REALTIME, &tsv);
    bool within_a_day = (tsv.tv_sec < (global_midnight + 24*3600));
    if (within_a_day)
        if (checked_2am || (tsv.tv_sec < (global_midnight + 2*3600))
            return ((tsv.tv_sec - global_midnight)*1000
                    + (tsv.tv_nsec + 500000)/1000000);
    update_global_midnight(tsv.tv_sec, within_a_day);
    return ((tsv.tv_sec - global_midnight)*1000
            + (tsv.tv_nsec + 500000)/1000000);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T00:34:58.313

提供的答案都没有真正满足我的需要。我想出了一些我认为应该可以独立工作的东西。如果有人发现任何错误或能想到更快的方法，请告诉我。当前代码需要 15 微秒才能运行。我挑战 SO 让事情变得更快（我真的希望 SO 成功 =P）

```
inline int ms_since_midnight()
{
  //get high precision time
  timespec now;
  clock_gettime(CLOCK_REALTIME,&now);

  //get low precision local time
  time_t now_local = time(NULL);
  struct tm* lt = localtime(&now_local);

  //compute time shift utc->est
  int sec_local = lt->tm_hour*3600+lt->tm_min*60+lt->tm_sec;
  int sec_utc = static_cast<long>(now.tv_sec) % 86400;
  int diff_sec; //account for fact utc might be 1 day ahead
  if(sec_local<sec_utc) diff_sec = sec_utc-sec_local;
  else diff_sec = sec_utc+86400-sec_local;
  int diff_hour = (int)((double)diff_sec/3600.0+0.5); //round to nearest hour

  //adjust utc to est, round ns to ms, add
  return (sec_utc-(diff_hour*3600))*1000+(int)((static_cast<double>(now.tv_nsec)/1000000.0)+0.5);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-14T04:02:24.333

我参考了帖子 [here] 并进行了更改，以便下面的函数可以返回自 GMT 时间午夜以来的毫秒数。

```
int GetMsSinceMidnightGmt(std::chrono::system_clock::time_point tpNow) {
    time_t tnow = std::chrono::system_clock::to_time_t(tpNow);
    tm * tmDate = std::localtime(&tnow);
    int gmtoff = tmDate->tm_gmtoff;
    std::chrono::duration<int> durTimezone(gmtoff); // 28800 for HKT
    // because mktime assumes local timezone, we shift the time now to GMT, then fid mid
    time_t tmid = std::chrono::system_clock::to_time_t(tpNow-durTimezone);
    tm * tmMid = std::localtime(&tmid);
    tmMid->tm_hour = 0;
    tmMid->tm_min = 0;
    tmMid->tm_sec = 0;
    auto tpMid = std::chrono::system_clock::from_time_t(std::mktime(tmMid));
    auto durSince = tpNow - durTimezone - tpMid;
    auto durMs = std::chrono::duration_cast<std::chrono::milliseconds>(durSince);
    return durMs.count();
} 
```

如果你想有当地时间，那就容易多了。

# android - Android：在线程上旋转按钮

> ID：11128634
> 
> 赞同：1
> 
> 时间：2012-06-20T21:42:38.940
> 
> 标签：android, multithreading, handler, runnable

有人可以提供一个在线程上旋转按钮的示例实现吗？截至目前，我正在使用以下代码在 UI 线程上旋转我的按钮：

```
Animation ranim = (Animation) AnimationUtils.loadAnimation(getBaseContext(),
                    R.anim.rotation);
                buttonRotate.setAnimation(ranim); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:49:47.910

在你的 UI 线程中定义

```
Handler mainHandler = new Handler(); 
```

然后在你的线程中，使用这个：

```
mainHandler.post(new Runnable()
{
    public void run()
    {
       //your piece of code
    }
}); 
```

到目前为止，这在某些情况下对我很有帮助，希望它也对你有用！:D

编辑：

```
mainHandler.post(new Runnable()
{
    public void run()
    {
            while(someBoolean==true)
            {
                //your piece of code
            }
    }
}); 
```

如果你在你的类中定义'someBoolean'，就像你对处理程序所做的那样，我相信线程应该得到它。
这样，在处理完数据后，只需将 someBoolean 设置为 false，旋转就会停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:50:04.317

以下应该适合你。

```
Thread thread = new Thread() 
{ 
    @Override 
    public void run() { 
        try { 
                Animation ranim = (Animation) AnimationUtils.loadAnimation(getBaseContext(), 
                R.anim.rotation); 
                buttonRotate.setAnimation(ranim); 
        } catch (InterruptedException e) { 
            e.printStackTrace(); 
        } 
    } 
}; 

thread.start(); 
```

您最终可能必须创建一个`AsyncTask`可以独立运行而不会打扰`UI Thread`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:33:15.737

不幸的是，我目前无法访问我的 IDE，因此我将为您列出步骤，而不是将错误代码放在这里。

1）在扩展Activity的同一个类中实现“AnimationListener”。2）在你的按钮上设置一个点击监听器。3) 创建一个 AsyncTask 类。4）覆盖doInBackground（AsyncTask）并将您的资源密集型逻辑放在那里。5）在onAnimationStart（AnimationListener的）中，实现调用你的AsyncTask的逻辑，即new MyTask().execute()；6）定义动画并将其设置为您的按钮。

它应该是这样的：你点击按钮，onAnimationStart 被调用，你的 AsyncTask 逻辑和动画都开始了。这样，您可以让您的按钮在您的后台线程正在执行资源密集型操作的同时旋转 - 即同时进行。

只是为了好玩，您可能希望在后台任务完成之前禁止您的按钮再次被点击。

抱歉缺少代码，但这应该从这里开始。

# iphone - 滚动到最后一个 UITableViewCell 使用 scrollToRowAtIndexPath:atScrollPosition:animated 使用 NSFetchedResultsControllerDelegate 方法

> ID：11128638
> 
> 赞同：7
> 
> 时间：2012-06-20T21:43:00.160
> 
> 标签：iphone, ios, uitableview, nsfetchedresultscontroller

我在 UITableView 的底部添加一个新项目，插入项目后，我希望 UITableView 滚动到最底部以显示新插入的项目。新项目被保存到 Core Data 并且 UITableView 使用 NSFetchedResultsController 自动更新。

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
   atIndexPath:(NSIndexPath *)indexPath
 forChangeType:(NSFetchedResultsChangeType)type
  newIndexPath:(NSIndexPath *)newIndexPath
{
  switch (type) {
    case NSFetchedResultsChangeInsert:
        NSLog(@"*** controllerDidChangeObject - NSFetchedResultsChangeInsert");
        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];

    //THIS IS THE CODE THAT DOESN'T WORK
    [self.tableView scrollToRowAtIndexPath:newIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:YES];

        break;

   ....
} 
```

这会导致越界错误，我似乎无法使其工作。我可以通过调整索引路径的行滚动到倒数第二条评论，但我无法到达最后一项。

基本上，我在评论表中添加评论，添加评论后，我希望表格滚动到最新评论。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T23:01:03.550

您需要调用`endUpdates`以便`tableView`可以计算其新的部分和行。一个简单的案例如下所示：

```
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:insertedIndexPath] withRowAnimation:UITableViewRowAnimationFade];
[self.tableView endUpdates];
[self.tableView scrollToRowAtIndexPath:insertedIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:YES]; 
```

当您使用`NSFetchedResultsController`时，它会稍微复杂一些，因为调用`beginUpdates`,`insertRowsAtIndexPaths:withRowAnimation:`和`endUpdates`通常在不同的委托方法中。那时你能做的是

1.  添加一个属性`insertedIndexPath`来存储插入的索引路径
2.  在`-insertRowsAtIndexPaths:withRowAnimation:`调用之后`-controller:didChangeObject:atIndexPath:`，添加

    ```
    self.insertedIndexPath = insertedIndexPath; 
    ```

3.  `[self.tableView endUpdates]`在之后`-controllerDidChangeContent:`，添加

    ```
    if (self.insertedIndexPath) {
        [self.tableView scrollToRowAtIndexPath:self.insertedIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:YES];
        self.insertedIndexPath = nil;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:36:50.377

看看这是否有帮助...

```
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
[self.tableView endUpdates];

[self.tableView scrollToRowAtIndexPath:newIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:YES]; 
```

# multithreading - 保护字符串缓冲区免受两个线程的影响？

> ID：11128641
> 
> 赞同：2
> 
> 时间：2012-06-20T21:43:19.000
> 
> 标签：multithreading, string, delphi, buffer, indy

我正在通过 Indy 套接字处理流数据包字符串，在客户端，我有一个线程`TIdTCPClient`从 我有另一个线程从一开始就不断地读取这个缓冲区，根据需要复制（和删除）数据（一次一个完整的数据包）。

我知道在任何情况下，访问同一个变量的两个线程都是危险的。但这也适用于字符串吗？还是只是对象？从两个不同的线程读取/写入相同的字符串，我能感到安全吗？如果不是，那我应该怎么做来保护这个字符串？这是一个简单的字符串，称为`FBuffer`.

我将数据附加到末尾，如下所示：

```
procedure TListenThread.CheckForData;
begin
  if FClientSocket.Connected then begin
    FClientSocket.IOHandler.CheckForDataOnSource(5000);
    if not FClientSocket.IOHandler.InputBufferIsEmpty then
      FBuffer:= FBuffer + FClientSocket.IOHandler.InputBufferAsString;
  end;
end; 
```

另一个线程是这样读的：

```
procedeure TPacketThread.CheckForPacket;
var
  P: Integer; //Deliminator position
  T: String;  //Temp copying string
  Z: Integer; //Expected packet size
begin
  P:= Pos('#', FBuffer);
  if P > 0 then begin //Is the deliminator found?
    T:= Copy(FBuffer, 1, P-1); //Copy up to deliminator...
    Z:= StrToIntDef(T, 0); //Convert packet size to integer...
    if Z > 0 then begin
      //Is there a full packet waiting in buffer?
      if Length(FBuffer) >= Z then begin
        //First, delete size definition and deliminator...
        Delete(FBuffer, 1, P);
        //Now grab the rest of it up to the packet size...
        T:= Copy(FBuffer, 1, Z);
        //Delete what we just copied...
        Delete(FBuffer, 1, Z);
        //Finally, pass this packet string for further processing...
        ProcessPacket(T);
      end;
    end;
  end;
end; 
```

该代码是我的代码的简化版本，只是为了演示我需要做的所有工作`FBuffer`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T22:47:57.727

是的，您必须保护字符串缓冲区免受并发访问。Indy 有一个`TIdThreadSafeString`可以用于此目的的类，例如：

```
FBuffer: TIdThreadSafeString;
// make sure to Create() and Free() as needed.. 
```

.

```
procedure TListenThread.CheckForData; 
begin 
  if FClientSocket.Connected then begin 
    FClientSocket.IOHandler.CheckForDataOnSource(5000); 
    if not FClientSocket.IOHandler.InputBufferIsEmpty then 
      FBuffer.Append(FClientSocket.IOHandler.InputBufferAsString);
  end; 
end; 
```

.

```
procedure TPacketThread.CheckForPacket; 
var 
  P: Integer; //Deliminator position 
  T: String;  //Temp copying string 
  Z: Integer; //Expected packet size 
begin 
  FBuffer.Lock;
  try
    P:= Pos('#', FBuffer.Value); 
    if P > 0 then begin //Is the deliminator found? 
      T := Copy(FBuffer.Value, 1, P-1); //Copy up to deliminator... 
      Z := StrToIntDef(T, 0); //Convert packet size to integer... 
      if Z > 0 then begin 
        //Is there a full packet waiting in buffer? 
        if Length(FBuffer.Value) >= Z then begin 
          //First, delete size definition and deliminator... 
          FBuffer.Value := Copy(FBuffer.Value, P+1, MaxInt); 
          //Now grab the rest of it up to the packet size... 
          T := Copy(FBuffer.Value, 1, Z); 
          //Delete what we just copied... 
          FBuffer.Value := Copy(FBuffer.Value, Z+1, MaxInt); 
          //Finally, pass this packet string for further processing... 
          ProcessPacket(T); 
        end; 
      end; 
    end; 
  finally
    FBuffer.Unlock;
  end;
end; 
```

话虽如此，鉴于您所展示的数据包格式，我将采取不同的策略：

```
FBuffer: TIdThreadSafeStringList;
// make sure to Create() and Free() as needed.. 
```

.

```
procedure TListenThread.CheckForData; 
var 
  T: String;  //Temp copying string 
  Z: Integer; //Expected packet size 
begin 
  if FClientSocket.Connected then begin 
    if FClientSocket.IOHandler.InputBufferIsEmpty then begin
      FClientSocket.IOHandler.CheckForDataOnSource(5000);
      if FClientSocket.IOHandler.InputBufferIsEmpty then Exit;
    end; 
    // data is available, keep reading as long as packets are present...
    repeat
      T := FClientSocket.IOHandler.ReadLn('#');
      Z := StrToIntDef(T, 0);
      if Z > 0 then begin 
        T := FClientSocket.IOHandler.ReadString(Z); 
        FBuffer.Add(T); 
      end; 
    until FClientSocket.IOHandler.InputBufferIsEmpty;
  end; 
end; 
```

.

```
procedure TPacketThread.CheckForPacket; 
var 
  L: TStringList;
  T: String;
begin 
  L := FBuffer.Lock;
  try
    if L.Count = 0 then Exit;
    T := L[0];
    L.Delete(0);
  finally
    FBuffer.Unlock;
  end;
  ProcessPacket(T); 
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T21:47:50.453

是的，当从多个线程访问时，您必须保护字符串，您可以使用关键部分来做到这一点。查看[EnterCriticalSection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608%28v=vs.85%29.aspx)、[LeaveCriticalSection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684169%28v=vs.85%29.aspx)、[InitializeCriticalSection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683472%28v=vs.85%29.aspx)和[DeleteCriticalSection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682552%28v=vs.85%29.aspx)函数。

# jquery - 超大停止调整大小

> ID：11128644
> 
> 赞同：1
> 
> 时间：2012-06-20T21:43:49.597
> 
> 标签：jquery, supersized

我正在使用[超大](http://buildinternet.com/project/supersized/)jQuery 插件。我的图像是`1600x672`，但它总是将它们调整为`1423x597`（以适应屏幕）。

但我不想要这个功能！我想要真实尺寸的图像，但如果屏幕尺寸小于 1600 像素，则图像水平居中...

这是我的配置：

```
slideshow: 1,
slide_interval: 3000,
transition: 1,
transition_speed: 700,
vertical_center: 0,
horizontal_center: 1,
slide_links: false,
slides: [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:54:49.017

According to the [**Supersized Docs**](http://buildinternet.com/project/supersized/docs.html#min_height), you can preset both `minimum width` and `minimum height` so it will not resize smaller.

# jquery - Ajax 自动完成问题

> ID：11128646
> 
> 赞同：0
> 
> 时间：2012-06-20T21:44:14.137
> 
> 标签：jquery, jquery-ui, autocomplete

我正在努力从远程数据源获取自动完成功能。它返回 JSON，但不填充自动完成框。

```
$( "#patientName").autocomplete({
    source: function( request, response ) {
        $.ajax({
            url: "http://localhost:8080/cs/accountTypeAhead",
            dataType: "json",
            type: 'POST',
            data: { "patientName": $("#patientName").val(),
                                     "requestID": (new Date()).getTime()},
            success: function( data ) {
                var searchInfo = new Array();   

                for(var key in data) 
                {

                    if(typeof data[key] === "object") {
                        for(var i = 0; i < data[key].length; i++) 
                        {
                            searchInfo.push(data[key]);

                        }//end for loop
                    }//end if 

                    else if(key == "requestID") 
                    {
                        if (data.requestID < $("#requestID").val() )
                        { return false;}

                        else
                        {
                            $("#requestID").val(data.requestID);
                        }
                    }//end if/else

                }//end for loop

                return  searchInfo; 
            }
        });
    },
    minLength: 1,
}); 
```

我的控制台输出是我所期望的。我认为它与返回数组有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:50:27.567

尝试改变

```
return  searchInfo; 
```

经过

```
response(searchInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:49:32.567

这是我使用远程 JSON 自动完成的“成功”处理程序的工作版本。

```
success: function (data) {
                            response($.map(data, function (item){
return { label: item.FirstName, value: item.FirstName, id:item.MemberId }

}))
                        } 
```

希望这可以帮助。

另外，看看这个演示。[http://jqueryui.com/demos/autocomplete/remote-jsonp.html](http://jqueryui.com/demos/autocomplete/remote-jsonp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:55:24.890

感谢您的帮助，解决方案是

```
success: function (data) {
       response($.map(data.results, function (item){
       return { label: item, value: item };
   }));
} 
```

# wcf - 用于进程间通信的 wcf 服务

> ID：11128647
> 
> 赞同：0
> 
> 时间：2012-06-20T21:44:25.087
> 
> 标签：wcf, wcf-binding, wcf-client

我已经组合了一个 .net winform 应用程序，它使用由另一个作为 Windows 服务运行的 .net 应用程序公开的 wcf 服务。

由于通信在同一台机器内，我选择了 NetNamedPipe 作为通信通道，因为它是最适合在同一台机器内进行进程间通信的最佳选择。

我想知道在 .net windows 服务中定义 wcf 服务时是否使用了正确的属性选择。

WCF 服务行为定义为：

```
[ServiceBehavior( 
    ConcurrencyMode = ConcurrencyMode.Single,
    InstanceContextMode = InstanceContextMode.Single)] 
```

我将“InstanceContextMode”选择为 Single，以便知道每次 UI 客户端调用 wcf 服务方法时都不会重新创建 wcf 服务中的对象。

但是，在阅读 MSDN 上要选择的 ConcurrencyMode 属性时，我确实有点困惑。在基本层面上，我了解 ConcurrencyMode 属性决定 wcf 服务是否支持单个、多个或可重入调用。

这是否意味着，如果我的 UI 客户端应用程序是多线程的并且我从这些线程调用 wcf 服务方法，我应该选择“并发”模式为“多线程”，如果我的 UI 客户端不是多线程，我应该选择“并发”模式为“单”？我的 UI 客户端应用程序没有运行多个线程。所有操作都通过事件处理程序在主 UI 线程上执行（通过按钮单击、组合框选择等...）

我遇到的情况是，在 Windows 测试机器上安装应用程序后，我的 UI 客户端有时无法连接到 wcf 服务。它只是一直等待对 wcf 客户端对象的 Connect 方法的调用，然后最终超时。我想知道它是否与我所做的“并发模式”选择有关。或者这是一个“NetNamedPipe”通信渠道问题？

请指教。

提前致谢。

副部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:55:18.163

仅当您的主机对象是线程安全的，即您已手动实现对共享资源的锁定或您的主机对象根本没有任何共享或类级别对象时，才选择多重并发模式。如果宿主对象不是线程安全的，请使用单一的并发模式，在这种情况下，wcf 将自动为您实现锁定，在上下文中一次只处理一个请求，并行将排队。所以这里的决定应该取决于你的宿主对象是否是线程安全的。

# sql - 如何访问从 $this->query(select....) 返回的数组元素？

> ID：11128649
> 
> 赞同：0
> 
> 时间：2012-06-20T21:44:41.750
> 
> 标签：sql, arrays, cakephp

我`query`从 cakephp 调用该函数，并从数据库中选择两个字段。如何访问数组中的每个字段？查询是这样的

```
$fieldKeys = $this->query("select FLOWSHEET_NAME, FLOWSHEET_ID from FLOWSHEET_TEMPLATE"); 
```

我想做一些类似的事情：

```
foreach($fieldKeys as $value){
        foreach($value as $nest){
            foreach($nest as $id){
                $mapArray[$id[0]] = $id[1];
            }
        }
    } 
```

~~但这不起作用。~~ 这可行，但 $id[0] 只返回 FLOWSHEET_NAME 列中保存的字符串的第一个字母，而我想要整个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:12:34.843

Cake 为您提供了检查数组并亲自查看的工具。这些工具是`pr($varname)`和`debug($varname)`，但也有其他非蛋糕功能。

这不是一个真正的蛋糕问题，它是一个初级编程课的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:08:41.620

您的 $nest 可能是一个关联数组，您需要像这样循环：

foreach ($nest as $k => $v) { foreach($V as $id) { ... } }

# acl - 如何在不影响数据库安全的情况下在 xpages 中为匿名用户使用“提前输入”？

> ID：11128651
> 
> 赞同：0
> 
> 时间：2012-06-20T21:45:02.390
> 
> 标签：acl, xpages, lotus-domino, anonymous-users, type-ahead

我正在为未知（未经过身份验证）用户使用匿名表单开发 xpage 应用程序。数据库 ACL 设置为不允许匿名用户访问内容（例如视图和文档）。一般来说，不允许公共访问。但是，有没有办法使用数据库视图中的内容使字段类型提前为输入字段工作，而不向公众开放它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:43:59.633

您可以在 SSJS 中使用*sessionAsSigner* -object 以不同的访问级别访问您的数据。

# facebook-c#-sdk - 来自 Facebook 的奇怪异常：JavaScript 运行时错误：CSS 组件 nnnn 已被请求

> ID：11128653
> 
> 赞同：1
> 
> 时间：2012-06-20T21:45:03.543
> 
> 标签：facebook-c#-sdk, windows-runtime

我在 Windows 运行时有一个使用 Facebook C-Sharp SDK 的 Facebook 应用程序。

首次登录时，开始正常的操作流程；登录，接受权限，命名设备，然后我就进去了。
一切都很好。

我继续开发我的应用程序，启动它，使用 FacebookClient 对象登录，使用我的业务逻辑来回调试。然后出乎意料的是，在我的令牌（通常）过期后，我被迫重新登录，在 Facebook 登录页面中输入我的凭据后，我得到了异常：

> [https://s-static.ak.fbcdn.net/rsrc.php/v2/yr/r/gz5FaFUp24x.js](https://s-static.ak.fbcdn.net/rsrc.php/v2/yr/r/gz5FaFUp24x.js) 0x800a139e第 30 行第 1719 列未处理的异常 - JavaScript 运行时错误：CSS 组件 A7UAf 已被请求。

显示一个未处理的异常对话框，我必须选择如何调试。切换回我的应用程序时，Web 浏览器内容显示提示以命名我的设备：

> 命名新设备 请为此设备命名。因为您启用了登录通知，您将收到一条通知，您

（是的，已经删了）

然后重定向到一个页面说：

> 查看最近登录。
> 
> 最近有人试图从无法识别的设备或移动设备登录您的帐户。由于您启用了登录通知，您的帐户被暂时锁定。
> 
> 请完成以下步骤以重新获得对您帐户的访问权限。

然后我必须使用普通的网络浏览器登录，那里有新消息说我必须确认“可疑”登录并命名设备。在那之后，一切都工作了几个小时甚至一天，然后同样的事情再次发生。

这是怎么回事？

# javascript - YUI 模块模式中的方法不会显示在 IDE 结构视图中

> ID：11128656
> 
> 赞同：0
> 
> 时间：2012-06-20T21:45:22.950
> 
> 标签：javascript, netbeans, intellij-idea, moodle, yui3

我已经制作了一个 YUI 模块，有点像下面显示的代码，这是 YUI3 东西的推荐模式，在 YUI 自己的核心文件和 Moodle 中都是[如此](http://docs.moodle.org/dev/How_to_create_a_YUI_3_module#YUI_3_Moodle_Module_quick_start)。

问题是现在我在 IDE 的文件结构/导航器窗格中看不到任何方法（例如下面代码中的 initializer() 和 show()）。尽管之前在下面使用的沙盒模式之外使用 YAHOO.lang.Extend() 工作正常，但 Y.extend() 逻辑似乎难以处理。

有没有人对如何解决这个问题有任何建议？它只是我的 IDE（尝试过 IntelliJ IDEA -[此处](http://youtrack.jetbrains.com/issue/WI-11642)的错误和 NetBeans）吗？YUI 开发人员肯定没有同样的问题吧？

```
YUI.add('moodle-local_hub-comments', function (Y) {

    var COMMENTSNAME = 'hub_comments';

    var COMMENTS = function () {
        COMMENTS.superclass.constructor.apply(this, arguments);
    }

    M.local_hub = M.local_hub || {};

    Y.extend(M.local_hub, Y.Base, {

        // Invisible property:
        event : null,

        // Invisible function:
        initializer : function (params) {
            // function code here
        },

        // Invisible function:
        show : function (e) {
            // function code here
        },

        // Invisible function:
        hide : function () {
            // function code here
        }

    }, {
        NAME : COMMENTSNAME,
        ATTRS : {
            commentids : {value : 450} 
        }
    });

}, '@VERSION@', {
    requires : ['base', 'overlay', 'moodle-enrol-notification']
    //Note: 'moodle-enrol-notification' contains Moodle YUI exception
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:52:02.700

我见过的每个 IDE（我尝试过 NetBeans、jEdit、Sublime 和至少四种不同的 Eclipse JS 编辑器）都无法在大纲视图中显示像你的方法。[我知道有一张票可以在 Eclipse ( https://bugs.eclipse.org/bugs/show_bug.cgi?id=266113](https://bugs.eclipse.org/bugs/show_bug.cgi?id=266113) )中解决这个问题，但我没有屏住呼吸：这似乎是一件非常困难的事情IDE 做的。

如果你愿意，你总是*可以*重构你的代码，使其对 IDE 更友好，但你会失去你的封装：

```
function initializer(e) {
   // function code here
}
function show() {
   // function code here
}
function hide {
   // function code here
}
function moodle-local_hub-comments (Y) {

    var COMMENTSNAME = 'hub_comments';

    var COMMENTS = function () {
        COMMENTS.superclass.constructor.apply(this, arguments);
    }

    M.local_hub = M.local_hub || {};

    Y.extend(M.local_hub, Y.Base, {

        event : null,

        initializer : initializer,

        show : show,

        hide : hide

    }
YUI.add('moodle-local_hub-comments', moodle-local_hub-comments, {
        NAME : COMMENTSNAME,
        ATTRS : {
            commentids : {value : 450} 
        }
    });

}, '@VERSION@', {
    requires : ['base', 'overlay', 'moodle-enrol-notification']
    //Note: 'moodle-enrol-notification' contains Moodle YUI exception
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:40:22.613

这似乎是 IntelliJ 的一个可能错误，详情请[点击此处](http://youtrack.jetbrains.com/issue/IDEA-83862)。很高兴知道他们至少在理论上支持它。

作为一种解决方法，可以在 extends 函数上方添加 JSDoc，如下所示：

```
/**
 * @class M.local_hub
 **/
Y.extend(M.local_hub, Y.Base, { 
```

这使得所有方法都出现了:)

# javascript - DataGrid内Button的onClick事件

> ID：11128657
> 
> 赞同：1
> 
> 时间：2012-06-20T21:45:31.640
> 
> 标签：javascript, dojo, dojox.grid.datagrid

这是我的数据网格：

```
// $ is a reference to `this` as it lies in an anonymous function
$.grid = new DataGrid({
    store : $.dataStore,
    query : {id : "*"},
    structure : [
        { 
            noscroll : true,
            cells : [{ name : "Recipe", field : 'name', width : '200px' }],
        },
        {
            cells : [
                [
                 { name : 'ID#', field : 'id', width : '50px'},
                 { name : 'Category', field : 'category', width : '100px'},
                 { name : 'Status', field : 'status', width : '100px'},
                 { name: "Actions", width : '200px', type: dojox.grid.cells._Widget, formatter : $._actionButtons}
                ]
            ] // end cells
        }
    ]
}, $.targetNode)
$.grid.startup();

$.grid.on("RowClick", function(e){
    console.log(this.getItem(e.rowIndex))
}) 
```

我`formatter`的 Actions 单元格对象：

```
_actionButtons : function(){
    var _self = this;
    var _args = arguments;
    this.group = new Pane()

    var full = new Button({ 
        label: 'View Full',
        style : { fontSize : '80%'},
        onClick : function(){
            try {
                _self.grid.onRowClick.apply(this, arguments)
            }catch(e){}
        }
    });
    full._destroyOnRemove = true;

    var edit = new Button({
        label : 'Edit',
        style : {fontSize: '80%'}
    });
    edit._destroyOnRemove = true;

    construct.place(full.domNode, this.group.containerNode)
    construct.place(edit.domNode, this.group.containerNode)

    return this.group;
} 
```

我正在尝试访问将由`onRowClick`DataGrid 上的正常事件传递的事件对象。就目前而言，这有点工作，但是在`on("RowClick"...)`块上我得到了多个日志。如果没有该`try...catch`块，我会收到一个错误，因为 rowIndex 不存在`e`，然后还有 2 个日志存在。

这是我包含 pub/sub、emit() 等的第 4 个左右的想法。我感觉多个日志是由冒泡行为（按钮 -> 行 -> 数据网格等）引起的，但是得到将 onRowClick 的事件对象传递给在格式化程序中创建的按钮似乎是不可能的。

我只想从 Button 小部件的`onClick`事件中访问 rowIndex （和其他 DataGrid-esque 属性）以根据按下的按钮进行处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:24:18.133

沿着同样的思路，但这是我想出的似乎正在朝着我所设想的方向发展。按钮所在的调整单元格：

```
{ name: "Actions", width : '200px', type: dojox.grid.cells._Widget, formatter : 
    function(){
        return $._actionButtons.call($, arguments);
    }
} 
```

`onClick`返回的 Button 小部件中的调整功能：

```
_actionButtons : function(){
    var _index = arguments[0][1],
        _item  = this.grid.getItem(_index)
        _self  = this;

    // some code removed

    onClick : function(){
        console.log(_self.dataStore.getValue(_item, 'name'), "clicked")
    }
} 
```

我可能最终会扩展 Button 以更好地处理这个问题，但现在，瞧！

有时把它写下来并把它放在那里让你的大脑恐慌并在其他人之前找出解决方案会有所帮助:)

**小更新...**

DataGrid有`formatterScope`参数，但它适用于 all `formatter`，因此会弄乱任何需要单元格范围而不是 DataGrid 范围的东西。上述方法允许我访问我需要的一切。

# linker - 构建包含 CUDA 推力代码的库

> ID：11128659
> 
> 赞同：2
> 
> 时间：2012-06-20T21:45:53.200
> 
> 标签：linker, cuda, libraries, thrust, nvcc

使用 CUDA 5，现在可以构建包含 cuda 代码并与 nvcc 链接的库。

在这种情况下链接时，仅由头文件组成的推力会导致多个定义错误。

无论如何，在没有经过并将推力转换为头文件和代码文件并将其构建为库的情况下，是否存在这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:02:20.580

正如在此推力用户线程上所讨论的，这确实是一个编译器错误。已经进行了修复，并且应该在[CUDA 5.0 候选版本中，该候选版本现在可用](http://developer.nvidia.com/cuda/cuda-toolkit)。

如果问题得到解决，您能否尝试 CUDA 5.0 RC 并报告？

# java - @scr.property nameRef 的非弃用替代品是什么？

> ID：11128662
> 
> 赞同：0
> 
> 时间：2012-06-20T21:46:25.550
> 
> 标签：java, annotations, javadoc, apache-felix

我正在替换我不熟悉的代码中的一些已弃用的 Javadoc 注释。大多数 javadoc 注释很容易翻译成 org.apache.felix.scr.annotations，但我不知道如何翻译这个：

```
/**
 * @scr.property
 *   nameRef="org.apache.sling.auth.core.spi.AuthenticationHandler.PATH_PROPERTY"
 *   values.0="/"
*/ 
```

[上面的@Property 注释](http://felix.apache.org/site/scr-annotations.html#SCRAnnotations-Property)翻译成什么- 特别是 nameRef 部分？

```
@Property( ???) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:56:47.163

猜一猜……一旦我意识到 Javadoc 语法是说名称指的是某个枚举值，就足够简单了。猜猜我有一个瞬间失灵：

```
@Property(
     name = org.apache.sling.auth.core.spi.AuthenticationHandler.PATH_PROPERTY,
     value = "/"
) 
```

valueRef 类似，我在另一个项目中遇到过。

# java - 通过Java RXTX与Null Modem进行串行到串行通信？

> ID：11128664
> 
> 赞同：1
> 
> 时间：2012-06-20T21:46:50.800
> 
> 标签：java, serial-port, rxtx

在 32 位 WinXP 上 -- 是否可以让两个 COM 端口直接相互连接并传输数据？我有一个 USB 到串行加密狗，连接到另一个 USB 到串行加密狗，连接到一个空调制解调器。使用 Java RXTX 库，我能够检测到每台计算机上的 COM 端口，所以我知道它可以正常工作。我可以通过此设置并利用此库将数据直接发送到另一个串行端口吗？

**从计算机 A / COM1：**

```
CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier("COM1");
CommPort commPort = portIdentifier.open("serial1",2000);
SerialPort serialPort = (SerialPort) commPort;
serialPort.setSerialPortParams(9600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);
InputStream in = serialPort.getInputStream();
OutputStream out = serialPort.getOutputStream(); 
```

我似乎无法通过这种机制访问计算机 B COM2 端口。我应该在这里使用其他构造吗？

我想要它，以便计算机 B 可以在我在计算机 A 上写入时从流中读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:08:52.347

您可以尝试确认与 RXTX 库或电缆/适配器无关的一件事，您可以在每台计算机上打开一个超级终端会话，配置相同的串行端口参数，然后开始输入其中一个 - 文本应该出现在另一个，反之亦然。如果你有这个工作，那么这只是代码的问题。

我发现了这个很好的[例子](http://rxtx.qbang.org/wiki/index.php/Two_way_communcation_with_the_serial_port)。你可以把写作部分拿出来放在一台电脑上，把阅读部分拿出来放在另一台电脑上。

# javascript - 如何在动态加载的脚本中使用 jQuery on()

> ID：11128665
> 
> 赞同：2
> 
> 时间：2012-06-20T21:46:57.863
> 
> 标签：javascript, jquery, ajax, jquery-on

如果我有以下html：

```
<html>
   <div id="main_content">
      <button>click me</button>
      <script src="main.js" ></script>
   </div>
</html> 
```

和 main.js：

```
$('#main_content').on('click', 'button', function() {
    console.log('you clicked');
}); 
```

如果我进行整页加载，则单击该按钮只会注册一条控制台消息。`main_content's`但是，如果我随后通过 AJAX 请求重新加载内容，则每次单击按钮都会提供 2 条控制台消息。它将为每个后续的 AJAX 加载提供 3,4,5... 消息，但始终为整个页面重新加载提供一个消息。

有人可以解释这种行为并提出可能的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:48:45.070

那是因为您正在加载 main.js 的多个副本，因此您每次都附加一个事件处理程序。
每次加载时`<script>`都会附加一个处理程序

```
 <button>click me</button>
  <script src="main.js" ></script> 
```

这里的教训是 ajax 加载的脚本会被解析，所以如果你有处理程序，它们就会被附加

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T21:50:16.180

如果您确实需要一直重新加载该脚本，请在其中执行此操作：

```
$('#main_content').off("click").on('click', 'button', function() {
    console.log('you clicked');
}); 
```

否则显然将其放在其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T22:05:30.250

正如已经说过的，main.js 会在您每次执行`.load()`.

你有几个选择来解决这个问题：

1.  将 main.js 移到动态加载的内容之外，这样每次执行`.load()`.
2.  修改 main.js 使整个脚本只执行一次。
3.  修改 main.js 以了解被多次加载，从而防止重复安装相同的事件处理程序。

这些是按照实现简单的顺序呈现的。

对于选项 2，您可以将所有 main.js 放在这样的`if`语句中，以便它只执行一次：

```
if (!window.__main__js__defined) {
    window.__main__js__defined = true;

   // rest of main.js code here

} 
```

对于选项 3，您必须保护您想要使用反重复保护的每个单独的事件处理程序，可能`.data()`在每个对象上使用来设置您已经安装了给定事件处理程序的标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T21:55:23.880

I suppose you placed that script into the reloaded content and not within the head section, where all scripts usually reside, because event handler becomes detached from the `#main_content` each time it's reloaded? Well, there's another way:

```
$(function(){
   ...
   $('body').on('click', '#main_content', function() { console.log('You clicked!'); });
}); 
```

You can place, load and execute this code just once - and won't need to reattach the event each time the block in question is reloaded.

Take note, though, that `body` in my code is better be replaced with a more specific element - in a perfect world, direct parent of `#main_content` element.

UPDATE: this is so called *event delegation*, and it's very well described in the [.on docpage](http://api.jquery.com/on/). In the previous versions of jQuery, you had to use either `.live` or `.delegate` methods.

# sharepoint - 在 Sharepoint 中编辑项目值的问题

> ID：11128667
> 
> 赞同：-1
> 
> 时间：2012-06-20T21:47:12.327
> 
> 标签：sharepoint, powershell

> **可能重复：**
> [如何使用 PowerShell 修改 SharePoint 列表中的项目值](https://stackoverflow.com/questions/11128376/how-to-modify-an-items-value-in-a-sharepoint-list-with-powershell)

如何在 Sharepoint Itemlist 中编辑项目的值？

```
Add-PSSnapin Microsoft.SharePoint.PowerShell
$webURL = "http://nycs00058260/sites/usitp"
$listName = "OsEM1" 
$web = Get-SPWeb $webURL 
$list = $web.Lists[$listName]
$items = $list.items 
Foreach($item in $items)
{ 
 if($item["Item"] -eq $null)
  { 
   $item["Title"] = "My first edited item!" 
   $item.Update()
  }
} 
```

它说异常调用带有 0 参数的更新我几乎从互联网上复制了原始代码，这怎么可能，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:30:01.700

如果您在`$item.Update`没有括号的情况下执行，PowerShell 应该列出方法签名，这将使您了解该方法需要哪些参数。

# sql-server - 实体关系

> ID：11128669
> 
> 赞同：0
> 
> 时间：2012-06-20T21:47:33.497
> 
> 标签：sql-server, database-design, normalization, rdbms, erd

以下实体关系是否正确？我正在尝试链接员工、时间表和审批者表。

其他表格和字段很少，但对于这个问题，我主要关心的是三个表格。一名员工可以拥有多个时间表审批者。

```
Employee
--------
EmpID pk
Name 
```

```
TimeSheet
------------
TSHEET_ID PK
FK_EmpID FK
Approved_By 
```

```
Timesheet_Approver (one employee can have more than one approver
                    but only one will be approving the timesheet)
------------------
EmpID
Approver_EmpID 
```

员工表数据：

```
EmpID Name
----- -----
1     john
2     david
3     mark 
```

时间表批准人数据：

```
EmpID Approver
----- --------
1     2
1     3
2     3 
```

时间表

```
TSID EMPID APPROVED_BY
---- ----- -----------
101  1     2
102  1     3
103  2     3 
```

**或者这看起来不错？**

![在此处输入图像描述](../Images/926e226e0eaa2607813e8fabbf614eb3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:39:26.210

## 我的建议

为什么要`Approver`作为单独的表？你可以在员工表中保留一个`Bit`字段吗？`IsApprover`否则你正在创建`redundancy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:41:13.723

我觉得设计有问题。这是我的想法。

**员工**

EmpID PK

姓名

**时间表**

TSHEET_ID PK

FK_EmpID

由通过

*第三张表是不必要的。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:47:27.663

如果有多个批准，我们不能将名为 Approved_by 的列添加到 TimeSheet 表中。然后我们可以再添加两个关系。一种是批准人名单。

**审批人**

审批人ID

部门

姓名

**时间表批准**

时间表ID

部门 1 审批人 ID

部门 2 审批人 ID

..........................很快

不要忘记将 Approved_by 删除到 TimeSheet realtion。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:51:21.530

**员工**

EmpID - PK

姓名

**时间表**

TSHEET_ID - PK

EmpID - FK

审批人 ID - FK

**审批人**

审批人-PK

部门

> 好的，这是我的最终答案。如果不适合您可以尝试自己的。我没有时间阅读所有这些评论。我试图帮助你。使用审批者关系，您可以获得部门和其他事物的审批者。检查 sql 查询以获取这些数据。

# html - 如何在没有表单标签的 html 中编写 POST 命令

> ID：11128683
> 
> 赞同：0
> 
> 时间：2012-06-20T21:49:02.823
> 
> 标签：html, post, tags

好的，所以我有一个需要一些输入的表单，提交后（通过单击按钮）将打开一个新页面。我想在加载当前页面时自动打开此页面（即绕过按提交按钮）。我已经通过 Javascript 完成了这项工作，但这对我来说效果不佳。大多数浏览器将此新窗口识别为弹出窗口并尝试阻止它。同样在 Chrome 中，当我希望它在新选项卡中打开时，页面会在新窗口（其中一个仅显示窗口）中加载，就像它通过表单标签的工作方式一样。

我想在 html 中编写一个带有输入的 post 命令，我必须自动打开我需要的页面，就像它如何通过表单标签完成一样，但不需要表单，以便可以自动生成窗口。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:08:34.210

使用[jQuery ajax](http://api.jquery.com/jQuery.ajax/)

```
<script type="text/javascript">
$.ajax({
   type: "POST",
   url: "some.php",
   data: { name: "donald", location: "Wuppertal" }
   }).done(function( msg ) {
     alert( "Data Saved: " + msg );
   });
 </script> 
```

# jquery - 带有 jquery 创建链接的负边距

> ID：11128684
> 
> 赞同：0
> 
> 时间：2012-06-20T21:49:08.193
> 
> 标签：jquery

我有以下结构：

```
<div id="content-header">
<h1 id="title">Athletics Calendar</h1>
</div> 
```

以及在 h1 标记之后添加一些链接的以下 jquery

```
$(document).ready(function() {
$("body[class*=page-calendar-practices] #content-header h1#title").after("<div id='athletics_practice-schedule'><div id='inner-title'><a href='calendar/practices/games' class='athletics_links'>GAMES</a><a href='calendar/practices' class='athletics_links'>PRACTICES</a></div></div>");

}); 
```

链接显示出来了，但是由于我需要在我插入的外部 div 上放置 -15px 的边距（将 div 上移...出于技术原因，我需要这样做），现在如果您将鼠标悬停在链接上什么都没有显示，但是如果您将鼠标悬停在它的正下方，它会显示。有没有办法解决这个问题？我另一个帖子有人建议使用下面的代码来修改链接，但它不起作用，没有任何改变颜色，所以我什至不确定如何使用它。

```
$(document).on('mouseenter', 'body[class*=page-calendar-practices] #content-header div#inner-title', function() {
$(this).css('color','red !important');
}).on('mouseleave', 'body[class*=page-calendar-practices] #content-header div#inner-title', function() {
$(this).css('color','blue !important');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:07:34.567

代码改变了`#inner-title`div 的颜色而不是其中的`anchor`标签，试试这个：

```
$('#content-header').on('mouseenter', '#inner-title a', function() {
      $(this).css('color','red');                                
}).on('mouseleave', '#inner-title a', function() {
     $(this).css('color','blue');
}); 
```

[演示](http://jsfiddle.net/FMv8w/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:05:40.760

要简单地将 div 向上移动 15px，更好的 css 应该是相对位置，顶部为 -15px。它将计算静态位置并添加-15的校正，以进行简单的解释。您能否检查这样做是否仍然会产生悬停问题。

# python - 如何从 unix 时间戳创建 numpy.datetime64 对象并将时区设置为 UTC？

> ID：11128686
> 
> 赞同：4
> 
> 时间：2012-06-20T21:49:20.170
> 
> 标签：python, numpy

我有一个过程，我在 Zulu 或 UTC 时间读入一堆 ISO 8601 格式的字符串。例如，

```
2012-06-20T21:15:00Z
2012-06-20T21:16:00Z
2012-06-20T21:17:00Z
2012-06-20T21:18:00Z 
```

我将字符串转换为可识别时区的 python 日期时间对象，然后通过将它们转换为 Unix 时间戳将它们以二进制格式保存为整数。例如，

```
dt_str = '2012-06-20T21:15:00Z'
ts = int(mktime(datetime.strptime(dt_str, '%Y-%m-%dT%H:%M:%SZ').timetuple()))
# ts = 1340241300 
```

当我将这些时间戳读回另一个进程时，我想直接从时间戳实例化一个 numpy.datetime64 对象。问题是 datetime64 将时区设置为我的本地时区。

```
np_dt = np.datetime64(ts,'s')
# np_dt = numpy.datetime64('2012-06-20T21:15:00-0400') 
```

有谁知道我可以在我的时间戳中读取的一种方式，以便它是 UTC 时间？我希望 np_dt 等于 numpy.datetime64('2012-06-20T21:15:00-0000')...我想。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T22:16:14.823

如何为您的代码设置时区。

```
import os, time
os.environ['TZ'] = 'GMT'
time.tzset()
# then your code 
np_dt = np.datetime64(ts,'s') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:38:46.553

您可以使用[dateutil](http://labix.org/python-dateutil)模块来提供帮助。首先，从您保存的时间戳整数创建一个日期时间对象：

```
>>> ts = 1340241300
>>> import datetime
>>> from dateutil import tz
>>> dt = datetime.datetime.fromtimestamp(ts).replace(tzinfo=tz.tzutc())
>>> dt
datetime.datetime(2012, 6, 20, 21, 15, tzinfo=tzutc()) 
```

然后将其传递给numpy，它将其转换为本地时区（我在-4）：

```
>>> import numpy as np
>>> np.datetime64(dt.isoformat())
numpy.datetime64('2012-06-20T17:15:00-0400') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:08:18.560

从[文档](http://docs.scipy.org/doc/numpy/reference/arrays.datetime.html)来看，唯一的方法是从直接指定时区的字符串中创建它。因此，您需要首先创建一个`datetime.datetime`对象并将其格式化为`'Z'`附加的字符串，然后`numpy.datetime64`从中构造。

# java - 如何使用 Play 实现预定的一次性流程！v1.2.4 和 Heroku Scheduler 插件

> ID：11128689
> 
> 赞同：1
> 
> 时间：2012-06-20T21:49:28.770
> 
> 标签：java, heroku, playframework, playframework-1.x

有一个[使用 Play 执行此操作的示例！v2.0](https://github.com/jamesward/play2-scheduled-job-demo)但我正在尝试对 v1.2.4 做同样的事情

我尝试遵循相同的通用方法，即让[Heroku 调度程序](https://devcenter.heroku.com/articles/scheduler)使用初始化 Play 环境的类显式启动 JVM，然后在该环境中执行所需的任务。我的具体任务是使用 JPA 从数据库中检索一些数据，然后使用 Mailer 使用该数据生成电子邮件。最初的方法只是在初始化 Play 后直接执行逻辑，但我遇到了一个异常，即“JPA 上下文未初始化”。

档案：

```
web: play run --http.port=$PORT $PLAY_OPTS
reports: java -Dapplication.path=./ -Dplay.id=staging -Dprecompiled=true -DlogLevel=INFO -cp "precompiled/java:lib/*:conf:.play/framework/play-1.2.4.jar:.play/framework/lib/*:modules/mailerPlus-0.1/lib/*:modules/fastergt-1.7/lib/*" jobs.Reports . 
```

报告.java：

```
public class Reports {

    private Reports() {
        super();
    }

    public static void main(String[] args) {
        File root = new File(System.getProperty("application.path"));

        if (System.getProperty("precompiled", "false").equals("true")) {
            Play.usePrecompiled = true;
        }

        try {
            Play.init(root, System.getProperty("play.id", ""));

            Mails.itjbSurveyReport();
        } catch (Exception e) {
            Logger.error(e, "");
        } finally {
            Play.stop();
        }
    }
} 
```

日志：

```
2012-06-20T21:58:27+00:00 app[run.1]: play.exceptions.JPAException: The JPA context is not initialized. JPA Entity Manager automatically start when one or more classes annotated with the @javax.persistence.Entity annotation are found in the application.
2012-06-20T21:58:27+00:00 app[run.1]:   at play.db.jpa.JPA.get(JPA.java:22)
2012-06-20T21:58:27+00:00 app[run.1]:   at play.db.jpa.JPA.em(JPA.java:51)
2012-06-20T21:58:27+00:00 app[run.1]:   at play.db.jpa.JPQL.em(JPQL.java:18)
2012-06-20T21:58:27+00:00 app[run.1]:   at play.db.jpa.JPQL.count(JPQL.java:26)
2012-06-20T21:58:27+00:00 app[run.1]:   at models.User.count(User.java)
2012-06-20T21:58:27+00:00 app[run.1]:   at notifiers.Mails.itjbSurveyReport(Mails.java:246)
2012-06-20T21:58:27+00:00 app[run.1]:   at jobs.Reports.main(Reports.java:35) 
```

然后决定将逻辑包装在“作业”中以确保 JPA 上下文已初始化，但随后我遇到了从 JPA 查询返回的对象的类加载问题：

报告.java：

```
public class Reports extends Job {

    private Reports() {
        super();
    }

    @Override
    public void doJob() throws Exception {
        Mails.itjbSurveyReport();
    }

    public static void main(String[] args) {
        File root = new File(System.getProperty("application.path"));

        if (System.getProperty("precompiled", "false").equals("true")) {
            Play.usePrecompiled = true;
        }

        try {
            Play.init(root, System.getProperty("play.id", ""));

            Reports reports = new Reports();
            reports.now().get();
        } catch (Exception e) {
            Logger.error(e, "");
        } finally {
            Play.stop();
        }
    }
} 
```

日志：

```
2012-06-20T19:04:24+00:00 app[run.1]: ClassCastException occured : securesocial.provider.ProviderType cannot be cast to securesocial.provider.ProviderType
2012-06-20T19:04:24+00:00 app[run.1]: 
2012-06-20T19:04:24+00:00 app[run.1]: play.exceptions.JavaExecutionException: securesocial.provider.ProviderType cannot be cast to securesocial.provider.ProviderType
2012-06-20T19:04:24+00:00 app[run.1]:   at play.jobs.Job.call(Job.java:155)
2012-06-20T19:04:24+00:00 app[run.1]:   at play.jobs.Job$1.call(Job.java:66)
2012-06-20T19:04:24+00:00 app[run.1]:   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
2012-06-20T19:04:24+00:00 app[run.1]:   at java.util.concurrent.FutureTask.run(FutureTask.java:166)
2012-06-20T19:04:24+00:00 app[run.1]:   at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)
2012-06-20T19:04:24+00:00 app[run.1]:   at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266)
2012-06-20T19:04:24+00:00 app[run.1]:   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
2012-06-20T19:04:24+00:00 app[run.1]:   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
2012-06-20T19:04:24+00:00 app[run.1]:   at java.lang.Thread.run(Thread.java:636)
2012-06-20T19:04:24+00:00 app[run.1]: Caused by: java.lang.ClassCastException: securesocial.provider.ProviderType cannot be cast to securesocial.provider.ProviderType
2012-06-20T19:04:24+00:00 app[run.1]:   at notifiers.Mails.itjbSurveyReport(Mails.java:259)
2012-06-20T19:04:24+00:00 app[run.1]:   at jobs.Reports.doJob(Reports.java:36)
2012-06-20T19:04:24+00:00 app[run.1]:   at play.jobs.Job.doJobWithResult(Job.java:50)
2012-06-20T19:04:24+00:00 app[run.1]:   at play.jobs.Job.call(Job.java:146)
2012-06-20T19:04:24+00:00 app[run.1]:   ... 8 more 
```

有趣的是，在上面提到的 v2.0 版本中，看起来本地类加载器被传递到 Play 环境中，这可能解决了这个问题。不确定如何在 v1.2.4 中完成

不知道下一步该怎么做...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T02:32:38.027

这是一个工作示例应用程序：
[https ://github.com/jamesward/play1-scheduled-job-demo](https://github.com/jamesward/play1-scheduled-job-demo)

诀窍是从 Play 的类加载器（来自[HelloJob.java](https://github.com/jamesward/play1-scheduled-job-demo/blob/master/app/jobs/HelloJob.java)）加载作业：

```
Class c = Play.classloader.loadClass("jobs.HelloJob");
Job s = (Job) c.newInstance();
s.run(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T00:58:04.680

为什么不直接添加

```
@Every("5min")
public class Reports extends Job {
  ...
} 
```

我不确定你想做什么。

如果你使用@Every 表示法，你不需要对 Heroku 做任何特别的事情。

# sql - SQL 查找每个用户的重复记录

> ID：11128690
> 
> 赞同：0
> 
> 时间：2012-06-20T21:49:32.257
> 
> 标签：sql, sql-server

所以如果我有一张如下表

带柱

```
date       datetime
employee   varchar 
```

我想查找特定用户多次具有相同日期的所有记录

对于找到的每个重复项，我都需要

```
date    employee    numDuplicates 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:51:39.260

您可以使用`GROUP BY`with`HAVING`子句：

```
SELECT employee, [date], Count(*) As numDuplicates
FROM Table
GROUP BY employee, [date]
HAVING COUNT(*) > 1
ORDER BY COUNT(*) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:55:49.773

如果您在日期时间字段中存储日期和时间，则需要提取日期以进行分组。在 SQL Server 2008 及更高版本中，您可以执行以下操作：

```
select employee, cast([date] as date), count(*) as numDuplicates
from t
group by employee, cast([date] as date)
having count(*) > 1 
```

# javascript - window.closed 在 Safari 中失败

> ID：11128691
> 
> 赞同：4
> 
> 时间：2012-06-20T21:49:32.777
> 
> 标签：javascript, google-chrome, safari

我`window.closed`在 Safari 中对 Javascript 的属性有一个奇怪的问题。当我打开一个新窗口并在该窗口中导航时，关闭的属性在关闭后将始终保持为 false。

这是 Safari 中的默认行为吗？我在 IE、Firefox 和 Chrome 中没有问题。

我的代码：

```
var winRef = window.open(someURL);
// ... Polling logic ...
// Navigate in the opened window and close it.
console.log(winRef.closed); // Will output false even though the window is closed. 
```

似乎该`winRef`变量在页面导航期间失去了对窗口的引用。

**以下步骤将在 safari 中产生问题**

1.  使用位于此处的示例代码：http: [//jsfiddle.net/CMK7h/9/](http://jsfiddle.net/CMK7h/9/)并在 Safari 中打开
2.  在打开的窗口中导航到不同的页面（不要使用谷歌搜索，因为这不会导致页面导航）
3.  现在关闭打开的窗口
4.  控制台仍应输出“打开”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:08:43.980

只要该窗口仍然打开，关闭的属性就应该是假的。

这是它正常工作的示例。如果它关闭，警报将显示 true，如果它仍然打开，则显示 false。

[http://jsfiddle.net/QHXcG/2/](http://jsfiddle.net/QHXcG/2/)

# objective-c - 大型 UIView 上的 setNeedsDisplay 导致

> ID：11128695
> 
> 赞同：2
> 
> 时间：2012-06-20T21:49:56.693
> 
> 标签：objective-c, ios, uiview, setneedsdisplay

我有一个非常大的 UIView，大小约为 3000x3000。在这个大视图中，我在 iPad 上使用触控笔或手指进行了一些自由形式的绘图。这是我的触摸开始和移动方法的代码。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{    

        Line_Point * to_be_added = [[Line_Point alloc] init];
        to_be_added.line_color = [UIColor colorWithCGColor: current_color.CGColor];
        to_be_added.line_pattern = [NSString stringWithString: current_line_pattern]; 

        UITouch *touch = [[event touchesForView:self] anyObject];

        CGPoint location = [touch locationInView:self];
        to_be_added.point = [NSValue valueWithCGPoint:(location)];  

        if (self.points == nil)
        {
            NSMutableArray *newPoints = [[NSMutableArray alloc] init];
            self.points = newPoints;
            [newPoints release];
        }

        [self.points addObject:to_be_added];           

} 
```

这是我的触摸移动方法，这似乎是导致问题的原因，因为应用程序调用 setNeedsDisplay 调用它的次数不够

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

        Line_Point * to_be_added = [[Line_Point alloc] init];
        to_be_added.line_color = [UIColor colorWithCGColor: current_color.CGColor];
        to_be_added.line_pattern = [NSString stringWithString: current_line_pattern];

        UITouch * touch = [[event touchesForView:self] anyObject];
        CGPoint location = [touch locationInView:self];
        to_be_added.point = [NSValue valueWithCGPoint:(location)];

        [self.points addObject:to_be_added];           

        [self setNeedsLayout]; 

} 
```

现在这是我的 drawRect 方法，它显示绘图

```
-(void)drawRect:(CGRect)rect
{
 if (self.points.count == 0)        
    {

    }
    else 
    {    
        Line_Point * first = [self.points objectAtIndex:0];
        CGContextRef context2 = UIGraphicsGetCurrentContext();
        CGContextSetStrokeColorWithColor(context2, first.line_color.CGColor);
        if ([first.line_pattern isEqualToString:@"normal"]) 
        {
            CGContextSetLineWidth(context2, 4.0);
            CGContextSetLineDash(context2, 0, NULL, 0);
        }
        else if([first.line_pattern isEqualToString:@"thick"])            
        {
            CGContextSetLineWidth(context2, 6.0);
            CGContextSetLineDash(context2, 0, NULL, 0);
        }
        else if([first.line_pattern isEqualToString:@"dotted"])            
        {
            CGFloat Pattern[] = {5, 5, 5, 5};
            CGContextSetLineDash(context2, 0, Pattern, 4);
        }
        else if([first.line_pattern isEqualToString:@"super_dotted"])            
        {
            CGFloat Pattern[] = {1, 2, 1, 2}; 
            CGContextSetLineDash(context2, 0, Pattern, 4); 
        }           
        CGPoint firstPoint2 = [first.point CGPointValue];
        CGContextBeginPath(context2);
        CGContextMoveToPoint(context2, firstPoint2.x, firstPoint2.y);

        int i2 = 1;
        while (i2 < self.points.count)
        {
            Line_Point * nextPoint = [self.points objectAtIndex:i2]; 

            if (nextPoint.point.CGPointValue.x < 0 && nextPoint.point.CGPointValue.y < 0)
            {
                CGContextDrawPath(context2, kCGPathStroke);

                if (i2 < (self.points.count-1))
                {

                    CGContextBeginPath(context2);
                    Line_Point * nextPoint2 = [self.points objectAtIndex:i2+1];                
                    CGContextMoveToPoint(context2, nextPoint2.point.CGPointValue.x, nextPoint2.point.CGPointValue.y);
                    CGContextSetStrokeColorWithColor(context2, nextPoint2.line_color.CGColor);
                    if ([nextPoint2.line_pattern isEqualToString:@"normal"]) 
                    {
                        CGContextSetLineWidth(context2, 4.0);
                        CGContextSetLineDash(context2, 0, NULL, 0);
                    }
                    else if([nextPoint2.line_pattern isEqualToString:@"thick"])            
                    {
                        CGContextSetLineWidth(context2, 6.0);
                        CGContextSetLineDash(context2, 0, NULL, 0);
                    }
                    else if([nextPoint2.line_pattern isEqualToString:@"dotted"])            
                    {
                        CGFloat Pattern[] = {5, 5, 5, 5};
                        CGContextSetLineDash(context2, 0, Pattern, 4);  
                    }
                    else if([nextPoint2.line_pattern isEqualToString:@"super_dotted"])            
                    {
                        CGFloat Pattern[] = {1, 2, 1, 2}; 
                        CGContextSetLineDash(context2, 0, Pattern, 4);
                    }        
                    i2 = i2 + 2;

                }
                else
                    i2++;
            }
            else
            {
                CGContextAddLineToPoint(context2, nextPoint.point.CGPointValue.x, nextPoint.point.CGPointValue.y);
                i2++;
            }
        }

        CGContextDrawPath(context2, kCGPathStroke);
    } 
```

在自由形式模式下绘图时，该应用程序令人难以置信地滞后。我相信这是因为视图太大并且每次调用 touchesmoved 方法时 setNeedsDisplay 都会重新加载整个视图。有没有一种方法可以加快 setNeedsDisplay 方法的速度，这样自由形式的绘图就不会在 iPad 上滞后。我可以只针对发生绘图的上下文而不是重新加载整个内容吗？当我将大小调整到大约 1000x1000 时，它没有滞后问题。

感谢您对此事的任何帮助。

编辑尝试使用 -SetNeedsDisplayinRect

UIView 包装在 UISCrollview 中，代码如下。

```
 -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
   {

    Line_Point * to_be_added = [[Line_Point alloc] init];
    to_be_added.line_color = [UIColor colorWithCGColor: current_color.CGColor];
    to_be_added.line_pattern = [NSString stringWithString: current_line_pattern];

    UITouch * touch = [[event touchesForView:self] anyObject];
    CGPoint location = [touch locationInView:self];
    to_be_added.point = [NSValue valueWithCGPoint:(location)];

    [self.points addObject:to_be_added];           

          CGRect visibleRect;
        visibleRect.origin = big_view.scrollable_view.contentOffset;
        visibleRect.size = CGSizeMake(950, 500);            
        [self setNeedsDisplayInRect:visibleRect];  

 } 
```

这种方法也无济于事。

如果您能提供帮助，再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:06:08.627

您可以使用

```
- (void)setNeedsDisplayInRect:(CGRect)invalidRect 
```

而不是 -setNeedsDisplay

另一种解决方案（如果点太多并且应用程序由于绘制它们而滞后） - 每次调用 -drawInRect 时不要渲染所有点。例如，您可以在每 10 次调用时从当前上下文中保存图像，然后仅显示图像。

更新：

尝试添加

```
+(Class)layerClass
{
return [CATiledLayer class];
} 
```

到您在滚动视图中的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:38:04.340

为了清楚起见，一个 3000x3000 像素的 UIView 后面有一个 CALayer（是否平铺并不重要），它使用 3000x3000x4 字节空间，因此大约为 34-35MB。您不会在应用程序本身中看到内存使用情况，因为它是在跳板中分配的。

从我的角度来看，最好的解决方案是平铺图层，图层比您的视图大一点（因为它们可以渲染线程），然后启用剪辑，并为您的路径分配适当的偏移量. 这是相当多的工作要做，但会很好。

啊，有时，在您进行重绘之前，它有助于清除 CALayers 缓存。A layer.contents = nil 会这样做....

干杯，约尔格

# javascript - 创建一个 并根据传递的数组填充它

> ID：11128700
> 
> 赞同：55
> 
> 时间：2012-06-20T21:50:04.587
> 
> 标签：javascript, arrays

我已经设法根据矩阵中的一个指定数组（即数组中的数组）生成一系列列表项。

我希望能够将一个变量（表示一个数组）传递给一个函数，以便它可以根据传递给它的数组吐出一个充满列表项的无序列表。

**问题：**

*   该函数一次仅适用于一个数组
*   它还在标记中产生逗号（大概是因为它将数组转换为字符串）

**解决方案需要：**

*   假设 DOM 中不存在无序列表
*   能够接受传入其中的不同数组（`options[0]`,`options[1]`等）
*   生成不带逗号的列表项

**JavaScript：**

```
var options = [
        set0 = ['Option 1','Option 2'],
        set1 = ['First Option','Second Option','Third Option']
    ]

function makeUL(){
    var a = '<ul>',
        b = '</ul>',
        m = [];

    // Right now, this loop only works with one
    // explicitly specified array (options[0] aka 'set0')
    for (i = 0; i < options[0].length; i += 1){
        m[i] = '<li>' + options[0][i] + '</li>';
    }

    document.getElementById('foo').innerHTML = a + m + b;
}

// My goal is to be able to pass a variable
// here to utilize this function with different arrays
makeUL(); 
```

**[jsFiddle](http://jsfiddle.net/sTLbj/2/)**

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-20T21:57:38.703

首先，不要通过字符串连接来创建 HTML 元素。使用 DOM 操作。它更快、更干净、更不容易出错。仅此一项就解决了您的一个问题。然后，让它接受任何数组作为参数：

```
var options = [
        set0 = ['Option 1','Option 2'],
        set1 = ['First Option','Second Option','Third Option']
    ];

function makeUL(array) {
    // Create the list element:
    var list = document.createElement('ul');

    for (var i = 0; i < array.length; i++) {
        // Create the list item:
        var item = document.createElement('li');

        // Set its contents:
        item.appendChild(document.createTextNode(array[i]));

        // Add it to the list:
        list.appendChild(item);
    }

    // Finally, return the constructed list:
    return list;
}

// Add the contents of options[0] to #foo:
document.getElementById('foo').appendChild(makeUL(options[0])); 
```

**[这是一个演示。](http://jsfiddle.net/minitech/sTLbj/4/)**您可能还想注意这一点，`set0`并且`set1`正在泄漏到全局范围内；如果你打算创建一种关联数组，你应该使用一个对象：

```
var options = {
    set0: ['Option 1', 'Option 2'],
    set1: ['First Option', 'Second Option', 'Third Option']
}; 
```

并像这样访问它们：

```
makeUL(options.set0); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-02-26T21:05:06.697

以下解决方案有什么缺点？似乎更快更短。

```
var options = {
    set0: ['Option 1','Option 2'],
    set1: ['First Option','Second Option','Third Option']
};

var list = "<li>" + options.set0.join("</li><li>") + "</li>";
document.getElementById("list").innerHTML = list; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-03-29T11:23:37.157

您还可以考虑以下解决方案：

```
let sum = options.set0.concat(options.set1);
const codeHTML = '<ol>' + sum.reduce((html, item) => {
    return html + "<li>" + item + "</li>";
        }, "") + '</ol>';
document.querySelector("#list").innerHTML = codeHTML; 
```

# regex - 设置 nginx.config 以支持使用正则表达式到别名的位置

> ID：11128701
> 
> 赞同：0
> 
> 时间：2012-06-20T21:50:10.110
> 
> 标签：regex, nginx, location, alias

我的 nginx.conf 配置为映射`http://localhost/graph`到 alias `web-graph`。

请参见下面的代码：

```
location ^~ /graph {
  alias $workspace/web-graph;
  break;
} 
```

我想使用 RegEx 将任何`/graph`以 alias开头的内容映射`web-graph`，但我没有任何运气。

我一直在尝试的代码示例如下：

```
location ~ ^/(graph)/(.*)$ {
  alias $workspace/web-graph;
  break;
} 
```

任何建议都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:32:45.377

听起来您可能会遇到[官方文档中`alias`](http://wiki.nginx.org/HttpCoreModule#alias)提到的一种情况。

如果没有，请发布一些人们会请求的 URI 的具体示例以及将为他们返回的文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:46:59.723

你没有提供足够的信息。当您说“没有运气”时，实际发生的事情与您期望发生的事情？

您还应该检查您的配置，以确保该请求未被其他位置处理。Nginx 配置不是简单的自上而下的事情。

请参阅[http://nginx.org/en/docs/http/request_processing.html#simple_php_site_configuration](http://nginx.org/en/docs/http/request_processing.html#simple_php_site_configuration)以了解实际处理您的请求的位置。

# java - 0MQ - JZMQ 未满足的链接错误

> ID：11128703
> 
> 赞同：5
> 
> 时间：2012-06-20T21:50:15.473
> 
> 标签：java, linux, zeromq, jzmq

我已经在运行 CentOS 的 VM 上安装了 0MQ，并且我有一个基于 C 的应用程序可以愉快地使用它。但是，我无法通过 JZMQ 绑定让 Java 应用程序工作。这是我得到的错误：

```
java -Djava.library.path=/usr/local/lib -jar AidApps.jar receive localhost:9007
Starting the receiver application.
Exception in thread "main" java.lang.UnsatisfiedLinkError: /usr/local/lib/libjzmq.so.0.0.0: libzmq.so.1: cannot open shared object file: No such file or directory
at java.lang.ClassLoader$NativeLibrary.load(Native Method)
at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1750)
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1675)
at java.lang.Runtime.loadLibrary0(Runtime.java:840)
at java.lang.System.loadLibrary(System.java:1047)
at org.zeromq.ZMQ.<clinit>(ZMQ.java:34)
at com.ijet.Receiver.main(Receiver.java:9)
at com.ijet.Main.main(Main.java:13) 
```

在安装 0MQ 或 JZMQ 期间我没有收到任何错误。我尝试将所有库复制到 /usr/local/lib 中，但这并没有解决任何问题。有任何想法吗？这适用于我的 Mac（所以我知道 JAR 有效），但不适用于 Linux 机器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T16:38:09.687

解决此问题的步骤（归功于 J16-SDiZ）：

1) `cp /root/zeromq-2.1.11/src/.libs/*.* /usr/local/lib`
2) `nano /etc/ld.so.conf.d/zmq.conf`
3) 添加行`/usr/local/lib`并保存
4) `ldconfig`
5) 通过运行验证`ldconfig -v | grep zmq`
6) 运行 JAR`java -Djava.library.path=/usr/local/lib/ -jar AidApps.jar receive localhost:9007`

注意-Djava.library.path还是需要指定的，指向jzmq.jar文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T16:31:11.463

这是因为 ld.so 无法解析您的`libzmq.so.1.0.0`.

添加路径并运行`/usr/local/lib`以重建缓存。`/etc/ld.so.config``ldconfig`

# android - Android 设备上的默认屏幕方向

> ID：11128705
> 
> 赞同：1
> 
> 时间：2012-06-20T21:50:18.310
> 
> 标签：android, screen-orientation, touchscreen

我在这里看到了很多关于屏幕方向的问题，但我的有点不同。
我试图找到一种在运行时确定触摸屏的默认方向的方法。
即：对于平板电脑它是横向的，对于手机它是纵向等。
我需要这些信息，因为我直接处理触摸屏硬件，它的 x,y 网格是恒定的，而不是基于当前的系统方向。

有任何想法吗？

编辑：我会完善我的问题：
我如何判断物理触摸屏的方向是像系统方向纵向还是横向。

编辑（答案）：好的，所以：`getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getRotation()`
将为您提供默认触摸屏轴的当前旋转度数。
例如：
在平板电脑上，触摸屏轴与横向对齐，上方将在横向上返回 0。
在触摸屏轴与纵向对齐的手机上，上方将在纵向上返回 0。耶！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:57:34.193

没有默认值。不要假设肖像是默认值来编写代码。如果您的应用程序对方向敏感，请将您的布局文件放在 layout-port 和 layout-land 中，而不是放在 layout 中。布局仅适用于那些不是特定方向的活动和对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:00:51.737

如果我正确理解了您的问题，那么[此](http://www.ceveni.com/2009/08/how-to-get-screen-orientation-in.html)博客可能会对您有所帮助。也看看[这个博客](http://androidsnips.blogspot.com/2011/03/get-current-screen-orientation-in.html)

# backbone.js - 分组模型属性 - 主干

> ID：11128708
> 
> 赞同：0
> 
> 时间：2012-06-20T21:50:33.060
> 
> 标签：backbone.js

我最近开始学习主干，想知道在主干模型中对模型属性进行分组的最佳方法是什么？我正在考虑有一个专门的视图来处理模型属性的一个子集。

例如，如果我有一个汽车模型，并且我想将有关引擎的所有信息分组，以便我可以将这些属性传递给视图？就像是`car.engine_info`

```
Car = Backbone.Model.extend({
    initialize: function() {
        this.engine_info = this._set_engine_info();
    }
    _set_engine_info: function() {
        return {displacement:this.get('displacement'), horsepower: this.get('horsepower')};
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:29:00.093

您应该考虑制作多个模型，而不是返回一组单独的数据。该数据在其背后没有用于事件处理和更新的主干力量。您正在创建一个只有属性和值的新对象。

而是为每个组件制作模型

汽车具有 - 发动机、功能等。

```
Engine = Backbone.Model.extend({
  defaults: {
      cylinders: 4,
      horsepower: 180
  }
});

Features = Backbone.Model.extend({
    defaults: {
      powerwindows: true,
      airconditioning: true
    }
}); 
```

然后通过覆盖构造函数将特征集混合到汽车模型中

```
Car = Backbone.Model.extend({
    defaults: function () {
       return {
         engine: new Engine(),
         features: new Features()
       };
    },
    constructor: function ( attrs ) {
        attrs || ( attrs = {} );
        if ( attrs.engine ) {
            attrs.engine = new Engine( attrs.engine );
        } 
        // etc
        Backbone.Model.prototype.constructor.call( this, attrs );
    }
}); 
```

另一种选择是创建汽车并创建一些添加功能的装饰器功能，但坦率地说，我更喜欢列出的方法。现在你可以让单独的组件监听它们自己的变化

```
var car = new Car({
    engine: { // props },
    features: { //props }
});

car.get( 'features' ).on( 'change:powerwindows', // some function, this ); 
```

所有这一切背后的真正力量是分离汽车整体功能集的责任。一辆车不应该担心它的所有零件。让引擎操心引擎，让功能操心功能。

# objective-c - 如何在消息框objective-c中显示文本框

> ID：11128724
> 
> 赞同：2
> 
> 时间：2012-06-20T21:51:31.417
> 
> 标签：objective-c, ios5

我想在用户按下主情节提要中的按钮时显示包含标签和文本框以及确定按钮和取消按钮的消息框，并在用户在 IOS 上按下确定后获取文本框中的字符串？

我知道如何显示错误消息或类似的东西，但我不知道如何显示这样的消息框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:56:42.067

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Save"
                                                        message:@"Enter File Name"
                                                       delegate:self
                                              cancelButtonTitle:@"Cancel"
                                              otherButtonTitles:@"OK", nil];

    alertView.alertViewStyle = UIAlertViewStylePlainTextInput;

    [alertView show];

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSLog(@"Alert View dismissed with button at index %d",buttonIndex);

    switch (alertView.alertViewStyle)
    {
        case UIAlertViewStylePlainTextInput:
        {
            UITextField *textField = [alertView textFieldAtIndex:0];
            NSLog(@"Plain text input: %@",textField.text);
        }
            break;

        case UIAlertViewStyleSecureTextInput:
        {
            UITextField *textField = [alertView textFieldAtIndex:0];
            NSLog(@"Secure text input: %@",textField.text);
        }
            break;

        case UIAlertViewStyleLoginAndPasswordInput:
        {
            UITextField *loginField = [alertView textFieldAtIndex:0];
            NSLog(@"Login input: %@",loginField.text);

            UITextField *passwordField = [alertView textFieldAtIndex:1];
            NSLog(@"Password input: %@",passwordField.text);
        }
            break;

        default:
            break;
    }
} 
```

# boost - 在 boost::graph 中，如何在给定有向邻接图、顶点和出边索引的情况下获得相邻顶点？

> ID：11128729
> 
> 赞同：1
> 
> 时间：2012-06-20T21:51:54.960
> 
> 标签：boost, boost-graph

我有一个 adjacency_list 图定义如下：

```
`struct VertexProperties{
    std::string name;
    ...
};
typedef boost::adjacency_list<boost::vecS,
                              boost::vecS,
                              boost::directedS,
                              VertexProperties> GraphType;
typedef GraphType::vertex_descriptor VertexType;` 
```

`给定一个图、顶点和出边索引，我怎样才能得到相邻的顶点？`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:01:47.020

解决了：

```
`typedef 
boost::graph_traits<GraphType>::out_edge_iterator
out_edge_iterator;

typedef 
std::pair<out_edge_iterator, out_edge_iterator>
out_edge_iterator_range;

out_edge_iterator_range range = boost::out_edges(current_vertex, graph);
if (out_index > range.second - range.first){
    // out_index is invalid
}
out_edge_iterator iter = range.first + row;

VertexType out_vertex = iter->m_target;` 
````

# sql-server - 关键字“AS”附近的语法不正确

> ID：11128732
> 
> 赞同：1
> 
> 时间：2012-06-20T21:52:04.053
> 
> 标签：sql-server, tsql, syntax-error

我收到“关键字'AS'附近的语法不正确”错误，但我似乎找不到不正确的地方？

```
UPDATE tblMedlem AS M 
INNER JOIN tblNavn AS N ON M.fldNavnID = N.fldID 
SET N.fldNavn=@Navn
,   M.fldAdresse=@Adr
,   M.fldPostNr=@Post
,   M.fldBy=@By
,   M.fldTlf=@Tlf
,   M.fldEmail=@Mail
,   M.fldStrID=@StrID
,   M.fldStatusID=@StatusID 
WHERE M.fldID = @ID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:57:37.890

也许你的意思是：

```
UPDATE M
SET 
-- N.fldNavn = @Navn -- not legal!
   M.fldAdresse = @Adr,
   M.fldPostNr = @Post,
   M.fldBy = @By,
   M.fldTlf = @Tlf,
   M.fldEmail = @Mail,
   M.fldStrID = @StrID,
   M.fldStatusID = @StatusID 
FROM dbo.tblMedlem AS M 
INNER JOIN dbo.tblNavn AS N 
ON M.fldNavnID = N.fldID 
WHERE M.fldID = @ID; 
```

但正如我在评论中所建议的那样，您不能同时更新`tblMedlem`和`tblNavn`使用单个`UPDATE`.

# javascript - 如何在 JavaScript 中保持以下异步模式 DRY？

> ID：11128733
> 
> 赞同：0
> 
> 时间：2012-06-20T21:52:06.503
> 
> 标签：javascript

基本模式是如果 X 异步执行某些操作，则其他执行同步操作。例如

```
if (varNotSet) {
    setVarAsynchronously(function(callback) {
        // process callback then...
        render(page, {'var': myVar});
    });
}
else
    render(page, {'var': myVar}); 
```

困扰我的是以下

```
render(page, {var: myVar}); 
```

因为重复相同的代码。有什么方法可以将逻辑封装在一个地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:54:06.187

Sure, use another function.

```
function resolve() {
    render(page, {'var': myVar});
}

if (varNotSet) {
    setVarAsynchronously(result) {
        // process result then...
        resolve();
    }
}
else resolve(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T23:07:21.053

如果您使用的是 jQuery，我强烈推荐它的内置 $.Deferred 函数，该函数在 sincs 版本 1.5 中可用，它正是为了帮助解决您编写的问题。

使用 jQuery，您可以通过以下方式执行此操作：

```
var def = new $.Deferred;
var promise = def.promise();
if (varNotSet) {
    setVarAsynchronously(function(callback) {
        def.resolve();
    });
}
else
    def.resolve();

promise.done(function () {
    render(page, {'var': myVar});
}); 
```

如果延迟对象的承诺已经解决，它的回调会立即运行，否则它会在解决时运行。稍后您可以使用 .done() 将更多回调附加到 Promise，如果延迟对象已解决，所有这些回调将立即被调用。（您不必从 deferred 对象中创建一个 promise 对象来进行回调，它只是一个可选的东西，它允许您将设置 deferred 的状态与能够添加回调侦听器分开。否则您可以在 deferred 上做所有事情目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T23:08:29.293

这样做的完全通用方法可能是这样的辅助函数：

```
// helper function
function runWhenVal(val, asynchFn, fn) {
    if (!val) {
        asynchFn(function(callback) {
            fn();
        });
    } else {
        fn();
    }
}

// using the helper function
runWhenVal(x, setVarAsychronously, function() {
    render(page, {'var': myVar});
}); 
```

# wpf - 从 Winforms TextBox KeyDown 处理程序启动时，在 WPF 窗口加载时触发默认按钮

> ID：11128734
> 
> 赞同：0
> 
> 时间：2012-06-20T21:52:44.477
> 
> 标签：wpf, winforms

我在**Winforms文本框的 KeyDown 处理程序中启动****WPF**窗口（使用 ShowDialog）。WPF 窗口有一个 IsDefault = true 的按钮。在 TextBox 上按 Enter 后，WPF AccessKey 机制显然会在窗口加载后将其拾取并触发默认按钮。

 **从 WPF 文本框的 KeyDown 处理程序启动窗口时，此问题不存在。

寻找一种解决方法，以防止 WPF 窗口接收正在 Winforms 文本框中处理的按键。

这是一些说明问题的示例代码：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        var window = new System.Windows.Window();
        var button = new System.Windows.Controls.Button
        {
            IsDefault = true,
            Content = "OK",
        };
        button.Click += (s, args) => window.Close();
        window.Content = button;

        // window loads then immediately closes due to the default button being triggered
        window.ShowDialog();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T23:02:53.397

可能有更好的方法来做到这一点，但改变

```
window.ShowDialog(); 
```

至

```
Dispatcher.CurrentDispatcher.Invoke(new Action(() => window.ShowDialog())); 
```

为我提供了预期的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:43:00.010

我现在的 hacky 解决方案是在按钮的命令中添加一个保护条件，仅当内容已呈现（由 ContentRendered 事件处理程序中设置的标志确定）时才允许执行命令的其余部分。在我的特定场景（替换消息框）中，这可以正常工作，并且可以本地化在一个地方，但如果存在，仍然在寻找更好的解决方案。

**更新：**一只小绵羊的解决方案（在 Dispatcher.Invoke 中显示对话框）更干净。**

# jquery - Problems implementing TinyMCE in CodeIgniter

> ID：11128740
> 
> 赞同：0
> 
> 时间：2012-06-20T21:53:30.967
> 
> 标签：jquery, codeigniter, tinymce, richtextbox, text-editor

I am trying to implement TinyMCE in CodeIgniter. I've created a view file and called it from a controller. I have uploaded all files into my CI project folder and showed the path of the files. But it is not working. Here is the view file:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Full featured example</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!-- TinyMCE -->
<script type="text/javascript" src="<?php echo base_url()?>application/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
    tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave,visualblocks",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,visualblocks",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Example content CSS (should be your site CSS)
        content_css : "<?php echo base_url()?>application/tinymce/examples/css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "<?php echo base_url()?>application/tinymce/examples/lists/template_list.js",
        external_link_list_url : "<?php echo base_url()?>application/tinymce/examples/lists/link_list.js",
        external_image_list_url : "<?php echo base_url()?>application/tinymce/examples/lists/image_list.js",
        media_external_list_url : "<?php echo base_url()?>application/tinymce/examples/lists/media_list.js",

        // Style formats
        style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
        ],

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    });
</script>
<!-- /TinyMCE -->

</head>
<body role="application">

<form method="post" action="http://tinymce.moxiecode.com/dump.php?example=true">
    <div>
        <h3>Full featured example</h3>

        <p>
            This page shows all available buttons and plugins that are included in the TinyMCE core package.
            There are more examples on how to use TinyMCE in the <a href="http://tinymce.moxiecode.com/examples/">Wiki</a>.
        </p>

        <!-- Gets replaced with TinyMCE, remember HTML in a textarea should be encoded -->
        <div>
            <textarea id="elm1" name="elm1" rows="15" cols="80" style="width: 80%">
                &lt;p&gt;
                    This is some example text that you can edit inside the &lt;strong&gt;TinyMCE editor&lt;/strong&gt;.
                &lt;/p&gt;
                &lt;p&gt;
                Nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. Nam sed lectus quam, ut sagittis tellus. Quisque dignissim mauris a augue rutrum tempor. Donec vitae purus nec massa vestibulum ornare sit amet id tellus. Nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. Aliquam molestie volutpat dapibus. Nunc interdum viverra sodales. Morbi laoreet pulvinar gravida. Quisque ut turpis sagittis nunc accumsan vehicula. Duis elementum congue ultrices. Cras faucibus feugiat arcu quis lacinia. In hac habitasse platea dictumst. Pellentesque fermentum magna sit amet tellus varius ullamcorper. Vestibulum at urna augue, eget varius neque. Fusce facilisis venenatis dapibus. Integer non sem at arcu euismod tempor nec sed nisl. Morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros.
                &lt;/p&gt;
            </textarea>
        </div>

        <!-- Some integration calls -->
        <a href="javascript:;" onclick="tinyMCE.get('elm1').show();return false;">[Show]</a>
        <a href="javascript:;" onclick="tinyMCE.get('elm1').hide();return false;">[Hide]</a>
        <a href="javascript:;" onclick="tinyMCE.get('elm1').execCommand('Bold');return false;">[Bold]</a>
        <a href="javascript:;" onclick="alert(tinyMCE.get('elm1').getContent());return false;">[Get contents]</a>
        <a href="javascript:;" onclick="alert(tinyMCE.get('elm1').selection.getContent());return false;">[Get selected HTML]</a>
        <a href="javascript:;" onclick="alert(tinyMCE.get('elm1').selection.getContent({format : 'text'}));return false;">[Get selected text]</a>
        <a href="javascript:;" onclick="alert(tinyMCE.get('elm1').selection.getNode().nodeName);return false;">[Get selected element]</a>
        <a href="javascript:;" onclick="tinyMCE.execCommand('mceInsertContent',false,'<b>Hello world!!</b>');return false;">[Insert HTML]</a>
        <a href="javascript:;" onclick="tinyMCE.execCommand('mceReplaceContent',false,'<b>{$selection}</b>');return false;">[Replace selection]</a>

        <br />
        <input type="submit" name="save" value="Submit" />
        <input type="reset" name="reset" value="Reset" />
    </div>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:53:09.063

[您不允许调用文件夹内的`application`文件](https://stackoverflow.com/questions/18427414/access-forbidden-to-view-image-file-located-in-codeigniter-view-foldr/18427549#18427549)，请查看`.htaccess`应用程序中存在的文件：

```
Deny from all 
```

你会得到 403 错误`Access forbidden!`

无论如何，这个问题不会通过禁用该行来解决，因为 CodeIgniter 查看 URI 并说：“好的，我应该调用`application`存在于控制器文件夹中的类，然后`tinymce`通过传递这些参数来调用方法：`jscripts, tiny_mce, tiny_mce.js`”。

所以：

1.  将您的文件放在文件夹之外，例如文件夹旁边的`application/`某个位置。`public/``index.php`
2.  打开`.htaccess`根目录下存在的文件，并添加文件/文件夹的名称以防止它们通过`index.php`.

例如，考虑这个结构：

```
system/
application/
public/
      img/
      css/
      js/
.htaccess
index.php
robots.txt 
```

重写规则 ( `.htaccess`) 应该是：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|public|robots\.txt)
#                               |
#   Exclude the public folder <--
#   From being treated by:
RewriteRule ^(.*)$ index.php/$1 [L] 
```

查看**[CodeIgniter 用户指南](http://ellislab.com/codeigniter/user-guide/general/urls.html)**了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:13:19.243

请确保您的项目中没有js错误，并且与编辑器相关的js路径正确，以便js可以用于编辑器。

# c - 将变量转换为 int vs round() 函数

> ID：11128741
> 
> 赞同：33
> 
> 时间：2012-06-20T21:53:37.940
> 
> 标签：c, int, rounding

`(int)someValue`我已经在几个不准确的地方看到它，而是问题需要该`round()`功能。两者有什么区别？

具体来说，如果需要，对于 C99 C。我在用 java 编写程序时也看到了同样的问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-20T21:54:55.660

在将`float`/`double`值转换为 的情况下，由于**整数截断**`int`，您通常会丢失*小数*部分。

 **这与我们通常期望的舍入完全不同，因此例如 2.8 以整数截断结束为 2，就像 2.1 以 2 结束一样。

*更新*：

强制转换的另一个潜在（严重）不准确的来源是由于能够用整数而不是浮点类型表示的值范围有限（感谢@R在下面的评论中提醒我们这一点）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-20T21:55:51.150

1.  强制转换为会`int`截断浮点数，也就是说，它会删除小数部分。
2.  该`round`函数返回最接近的整数。中途情况从零四舍五入，例如`round(-1.5)`is`-2`和`round(1.5)`is `2`。

> **7.12.9.6 轮次函数**
> 
> **概要**
> 
> ```
> #include <math.h>
> double round(double x);
> float roundf(float x);
> long double roundl(long double x); 
> ```
> 
> **描述**
> 
> 无论当前的舍入方向如何，这些`round`函数将其参数舍入为浮点格式的最接近的整数值，从零开始舍入一半的情况。
> 
> **退货**
> 
> 这些`round`函数返回四舍五入的整数值。

来源：C99 标准 ( [ISO/IEC 9899:1999](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf) )。[本部分在 C11 标准 ( ISO/IEC 9899:2011](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf) )中没有变化。

（有兴趣[的](https://web.archive.org/web/20130402193401/http://www.diycalculator.com/popup-m-round.shtml)可以看一下舍入算法的清晰介绍。）**

# ember.js - EmberJS I need help modifying attributes inside of the built in view Ember.Checkbox

> ID：11128742
> 
> 赞同：0
> 
> 时间：2012-06-20T21:53:38.597
> 
> 标签：ember.js

I have a property bound in my handlebar template

```
{{view Ember.Checkbox checkedBinding="state"}} 
```

I would like the checked state of the checkbox to be the opposite of what the bound value is. Can I do this with the view like that or do I need to use a computed property? I'm trying to avoid computed because the checkbox is on a table inside of an each with a complicated object.

```
<input type="checkbox" {{bindAttr checked="state"}}  {{action "flipMyCheck"}} /> 
```

I am hoping stack overflow can help before I just go old school jQuery.each() on it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:34:40.977

不确定我是否理解你的问题。这能解决你的问题吗？

[http://jsfiddle.net/Sly7/JDRFW/](http://jsfiddle.net/Sly7/JDRFW/)

# ruby-on-rails - Rails Server stopped working

> ID：11128744
> 
> 赞同：1
> 
> 时间：2012-06-20T21:53:51.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3

No clue why, here is the console output:

```
undefined method `model' for main:Object
/Users/Jerome/Desktop/UrbanImpact/config/application.rb:3:in `<top (required)>'
/Users/Jerome/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/Users/Jerome/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/Users/Jerome/Desktop/UrbanImpact/Rakefile:4:in `<top (required)>'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/bin/rake:19:in `load'
/Users/Jerome/.rvm/gems/ruby-1.9.2-p290/bin/rake:19:in `<main>' 
```

This comes up in console after I type in "rails server"

Any help is welcome!

# python - Get Node nodeType list programatically (xml.dom.minidom.Node)

> ID：11128745
> 
> 赞同：2
> 
> 时间：2012-06-20T21:53:54.867
> 
> 标签：python, dom

So I realize that the docs have the list of node types for the Node class, but from poking around, I can't seem to find a way to programmatically get a list of available `nodeType`s for a given Node object (short of inspecting the class, pulling every all caps member with a name ending in 'NODE', and then sorting by value). Is there any way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:13:31.513

我希望有更好的东西，但缺少它，我创建了一个新模块：

```
from xml.dom import Node
from collections import OrderedDict

if not hasattr(Node, 'get_all_node_types'):

    @classmethod
    def get_all_node_types(cls, refresh=False):

        if not hasattr(cls, '_type_dict') or refresh:
            unsorted_types = {getattr(cls, name) : name for name in dir(cls) if name.endswith('_NODE')}
            cls._type_dict = OrderedDict(sorted(unsorted_types.items(), key = lambda t : t[0]))
        return cls._type_dict

    setattr(Node, 'get_all_node_types', get_all_node_types) 
```

它很hacky，所以我不太喜欢它，但只要在程序执行期间至少导入一次，我就会得到我的新方法。

# c++ - Implementing zoom along the gun

> ID：11128747
> 
> 赞同：0
> 
> 时间：2012-06-20T21:54:06.843
> 
> 标签：c++, opengl

I'm making some game, and I have made it pretty much all, but not zoom along the gun ability, 'cause I have no clue how to set up it. The game is done in 3D using openGL, so I would like to hear your propositions for how to implement it. If required, snippets of the code can be delivered.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T22:02:28.530

Quake 3“缩放”效果是通过改变透视摄像机的 FOV 来实现的。看[这里](http://www.quakewiki.net/archives/code3arena/tutorials/tutorial28.shtml)。

# php - Dynamically show Facebook Open Graph using URL query string

> ID：11128748
> 
> 赞同：2
> 
> 时间：2012-06-20T21:54:07.207
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk, facebook-opengraph

I'm developing a web app where users can get coupons and similar things. I need to publish with Open Graph using the Javascript sdk an action each time an user choose and request a coupon.

When you click a coupon it will redirect you to the page `coupondetail.php?cid=248` (Where "Cid" is the Coupon ID ). Actually I personalize the og meta tags with PHP: In this way Facebook should scrape a different content for each `?cid` shared.

This is actually the way I personalize them using PHP: (Mycouponapp is a sample name!).

```
 <head>
    <meta charset="ISO-8859-1">
    <title>Coupons</title>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# mycouponapp: 
                  http://ogp.me/ns/apps/mycouponapp#">
  <meta property="fb:app_id" content="*appid*" /> 
  <meta property="og:type" content="mycouponapp:reward"/> 
  <meta property="og:title" content="<?php echo $couponname; ?>" /> 
  <meta property="og:image" content="http://www.mycouponapp.com/<?php echo $couponimgurl; ?>" /> 
  <meta property="og:description" content="<?php echo $couponname; ?>" /> 
  <meta property="og:url" content="http://www.mycouponapp.com/coupondetail.php?cid=<?php echo $cid; // coupon id ?>"> 
```

Ten days ago I was testing the website and I set a static `og:title`, calling it "Sample Reward". Even if I changed the code, today when I publish an action using Javascript it still shows "Matteo got Sample Reward on Mycouponapp", instead of showing "Matteo got *couponname* on Mycouponapp".

I already used the Facebook debugging tool to try scraping again the content, but it doesn't work (Even if the debugging tool shows a correct Coupon detail!)

Also, if I click of the "Sample Reward" text I will be redirected to `http://www.mycouponapp.com/coupondetail.php?rid=` and as you can see there is not `Cid` at the end.

I really can't understand why. I clip my JavaScript code: Maybe the problem is on that! The Facebook JS SDK was already loaded before this.

```
<script>
 function postCoupon()
  {

   FB.login(function(response) {
   if (response.authResponse) {

      FB.api(
        '/me/_AppName_:get?reward=http://www.mycouponapp.com/coupondetail.php?cid=<?php echo $rid; ?>',
        'post',
        function(response) {
           if (!response || response.error) {
              console.log(response.error);
           } else {

              alert('Pook was successful! Action ID: ' + response.id);
           }
        });
        }
 }, {scope: 'publish_actions'});

  }
  </script>

  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '_App Id_', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

  </script> 
```

What's wrong in my code? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:35:43.527

此时，最好的办法可能是将您的 url 方案更改为类似这样的方式，`mycouponapp.com/coupondetail/248`以便每张优惠券都有一个唯一的 url。

您可以通过在 .htaccess 文件中重写 url 或更改 PHP 应用程序的 url 方案来做到这一点。

# css - anchor inside a li getting all space

> ID：11128749
> 
> 赞同：0
> 
> 时间：2012-06-20T21:54:23.020
> 
> 标签：css

I have an anchor inside a li and I want all the li be a link. How can I change my code to make all the space of li be clicable?

```
#MenuEventos {
    text-align:center;
}

#MenuEventos li{
    display: block;
    text-align:left;   
    width: 100%;
    margin: 8px 0 8px 0;
    padding: 12px;
} 

#MenuEventos li.vermelho, li.vermelho a{
    background-color: #A9462F;
}
#MenuEventos li.roxo, li.roxo a{
    background-color: #77369C;
} 
#MenuEventos li.azul, li.azul a{
    background-color: #595CC7;
} 
#MenuEventos li.verde, li.verde a{
    background-color: #5E9158;
}

    #MenuEventos li a {
        font-weight: bold;
        text-decoration: none;
        line-height: 2.8em;
        color: white;
        width: 100%;      
        padding: 12px;
    }
```

```
<div id="MenuEventos">
    <h1 class="MenuEventos">Selecione uma das opções abaixo:</h1>
    <ul id="MenuEventos" class="Menu">
        <li class="vermelho">
            <a href="@Href("~/AreaLogada/Mensal")">Mensal</a>
        </li>
        <li class="roxo">
            <a href="@Href("~/AreaLogada/PorArea")">Por Área</a>
        </li>    
        <li class="azul">
            <a href="@Href("~/AreaLogada/Feriados")">Feriados 2012</a>
        </li>
        <li class="verde">
            <a href="@Href("~/AreaLogada/MeusEventos")">Meus Eventos</a>
        </li>    
     </ul>
</div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:56:57.743

最简单的方法是分配`display: block`给`a`元素（因此它需要父元素的整个水平宽度`li`），并将边距/填充应用于.`a`而不是`li`.

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/jvN7z/2/)（请注意，我使用`::before`伪元素来演示`a`元素的`hover`状态，而不必为每个元素的悬停状态分配特定颜色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T01:34:57.223

我知道这已经有几年的历史了，并且已经有一个很好的答案，但是如果您（或任何人）碰巧尝试制作水平导航栏，我只是想排除`display: inline-block;`在元素上使用的另一种可能性。`a`我注意到`display: block;`在标签下使用强制换行可能会使您的链接在底部有一些额外的空间，如果您试图将导航栏保持在某个高度，这是不可取的。

# c# - Static objects in ASP.NET a waste of memory?

> ID：11128750
> 
> 赞同：6
> 
> 时间：2012-06-20T21:54:33.007
> 
> 标签：c#, asp.net, memory-management

I was just wondering this the other day. I am not exactly sure how ASPX manages the garbage disposal, but as far as I can tell the "finished loading" does not remove static memory values or after the page has been reloaded. Static at least in terms of C means that the memory allocation follows your program until the program itself is shut down. Is this the same way in ASPX? If I have a static value and I go from Page A to Page B, is that static value still persistent in the RAM until they leave the application or is that value removed once I am no longer on Page A? (go to a different website removing their instance off the application pool in the server).

From what I have experienced:

```
 public static class foo
  {
      public static int x;
  }

  protected void Page_Load(object sender, EventArgs e)
  {
      foo.x++; //This will continue to increment from the last value before reload
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T22:00:22.903

在 ASP.NET 中应避免使用静态类。它们一直保留在内存中，直到应用程序重新启动，并且受到许多并发错误和竞争条件的影响。

并且关闭用户会话（浏览器会话）不会重新启动应用程序！即使用户离开并回来，它们也会保留在内存中。所以真的真的避免静态类！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:59:34.827

这是您的标准 CLR 执行模型，对于 asp.net 没有什么不同。静态对象被视为应用程序的根，不会被垃圾收集。

这是一篇关于垃圾收集如何在 .net 中工作的旧文章，但我认为所有原则仍然相同：http: [//msdn.microsoft.com/en-us/magazine/bb985010.aspx](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)

# xquery - How can I add a header with WordProcessingML (MarkLogic Toolkit for Word)

> ID：11128753
> 
> 赞同：0
> 
> 时间：2012-06-20T21:54:46.107
> 
> 标签：xquery, marklogic, wordprocessingml

With this code we can create a simple word document but I need to add a Header and a Footer.

```
let $para1 := ooxml:create-paragraph(fn:concat("Title: ",$title))
let $para2 := ooxml:create-paragraph(fn:concat("Publisher: ",$publisher))
let $paras := ($para1, $para2)

return ooxml:create-simple-docx(ooxml:document(ooxml:body($paras))) 
```

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:09:35.130

该工具包目前没有添加页眉和页脚的功能。

但是您可以编写自己的 XQuery 来实现它。

我要做的是在一个空白的**.docx**中添加一个简单的标题。

Open XML SDK 带有一个 diff 实用程序。使用它，您可以使用该实用程序打开带有标题和空白**.docx的 .docx，该实用程序将突出显示 XML 在提取的****.docx**的哪些部分发生了变化。

使用它作为起点，您可以使用它来告知如何开始编写您自己的函数，该函数允许您添加自己的页眉和页脚。

希望这可以帮助。

# haskell - Beautiful and terrible Haskell

> ID：11128759
> 
> 赞同：4
> 
> 时间：2012-06-20T21:55:24.880
> 
> 标签：haskell, functional-programming

Haskell is beautiful. That's a fact. It's concise, fast etc. Many of you will admit that writing in it is a great pleasure. On the other hand I think that its conciseness might be a disadvantage when people try to write too sophisticated code. For example I recently opened my friend's project and found something like this:

```
stationDepartures id sc=map (\(s1,list)->(stationName $ (stationMap $ system sc) Map.! s1,list)) ( Map.toList (Map.fromListWith (++) (map (\((s1,s2),(d,start,dur))->(s2,[start])) (Map.toList (Map.filterWithKey (\(s1,s2) _ ->s1==id) (Map.unions (List.map times (Map.elems $ schedule sc)))))))) 
```

This one-liner was absolutely unreadable to me. This is of course a quite extreme example but it helped me to realize that maybe my Haskell code might seem unreadable to others. I started to wonder what are the principles of creating a beautiful code in Haskell. I found that e.g. lambda functions are considered by some people as superfluous because they make the code less readable. What do you think about that? What requirements should Haskell code meet to be considered as "beautiful"?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-20T22:22:54.260

我将假设您问：“我怎样才能以更易读的方式编写这个单行代码？” 否则，这个问题有点太主观了。

单线在任何语言中都是有问题的，尽管 Haskell 尤其有问题，因为有大量的二元运算符（有优先规则）、高阶函数（很难命名）和（喘气！）高阶函数二元运算符。但是，我们可以首先注意到单行中的大部分括号都可以去掉，我们可以证明表达式是一系列组合在一起的函数。每个函数都可以写在单独的行上，并由 组成`.`，最后`$`将整个事物应用于参数。

```
stationDepartures id sc =
  map (\(s1,list) -> (stationName $ (stationMap $ system sc) Map.! s1,
                      list)) .
  Map.toList .
  Map.fromListWith (++) .
  map (\((s1,s2),(d,start,dur)) -> (s2,[start])) .
  Map.toList .
  Map.filterWithKey (\(s1,s2) _ -> s1 == id) .
  Map.unions .
  List.map times .
  Map.elems $ schedule sc 
```

对我来说，这是相当易读的，因为我可以识别其中的模式，并且我可以从下到上跟踪数据流。（注意：这就是为什么所有`Map`函数都将 a`Map`作为*最后一个*参数而不是第一个参数的原因。在设计 Haskell API 时请记住这一点！）

例如，这种`Map.toList . Map.fromListWith f`模式很常见，只是很难在单眼线中看到它（至少在我看来）。代码并没有那么复杂，只是通过手术去除了换行符。

**但是，可读性是主观的。**

您将开发一种易于阅读的风格。随着你对语言的了解越多，风格就会进化，你对“漂亮代码”的感觉也会进化。让它发生，尽量不要在重写中陷入太多的泥潭，因为你不再有乐趣了。

# tumblr - Jquery imagesLoaded Plugin Overlapping Issue

> ID：11128767
> 
> 赞同：0
> 
> 时间：2012-06-20T21:55:47.110
> 
> 标签：tumblr, jquery-masonry, infinite-scroll

I have a tumblelog that uses jquery masonry and infinite scrolling on the posts. The masonry only applies to the first few posts, then overlaps everything else. I know this kind of question gets asked a lot, but no one seems to know the answer. Here's my code:

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript" src="http://static.tumblr.com/bswe8t6/UFVlryaq2/jquerymsnryv2.js"></script>

<script type="text/javascript">
$(window).load(function(){
var $wall = $('#posts');
$wall.imagesLoaded(function(){
$wall.masonry({
columnWidth: 196,
itemSelector: '.post',
isAnimated : false
});
});

$wall.infinitescroll({
navSelector : '#navigation', 
nextSelector : 'a#nextPage', 
itemSelector : '.post', 
bufferPx : 2000,
debug : false,
errorCallback: function() { 
$('#infscr-loading').fadeOut('normal'); 
}},
function( newElements ) {
var $newElems = $( newElements );
$newElems.hide();
$newElems.imagesLoaded(function(){
$wall.masonry( 'appended', $newElems,{isAnimated: false}, function(){$newElems.fadeIn('slow');} );
});
}); $('#content').show(500);
});

</script> 
```

[Here's my link.](http://s0d4pop.tumblr.com/) Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:36:56.970

您的页面上有太多问题，无法给您一个简单的答案。

1.  你有2个！包括不同的“无限卷轴”脚本。

    一个是这一行：

    ```
    <script type="text/javascript" src="http://codysherman.com/tools/infinite-scrolling/code"></script> 
    ```

    另一个包含在这个其他脚本中：

    ```
    <script type="text/javascript" src="http://static.tumblr.com/bswe8t6/UFVlryaq2/jquerymsnryv2.js"></script> 
    ```

    删除第一个脚本，并保留第二个我猜。

2.  第二个脚本是打算与 Masonry 插件一起使用的，但是您提供的代码示例完全错误。我不知道从哪里开始。

    在对 $wall.masonry 的调用中，“singleMode: true”不是一个有效的选项。

    您在脚本中引用的一些元素甚至在您的页面上都不存在：

    1.  '.masonryWrap' 不存在
    2.  “#navigation”不存在
    3.  'a#nextPage' 不存在
3.  您的页面在任何地方都没有导航链接，因此对于“navSelector”和“nextSelector”，jquery 无限滚动功能没有任何用处

**所以把它们放在一起。**

您需要做的第一件事是摆脱两个相互冲突的 InfiniteScroll 脚本。

然后您需要将导航链接添加到您的主题代码中，以便您可以正确使用无限滚动功能（它需要知道指向下一页的链接是什么）。

**示例**：将其插入主题代码中的某个位置，但确保它没有被困在 {block:Posts} 或 {block:PermalinkPage} 等内容中。

```
{block:Pagination}
    <div id="pagination" style="display:none;">
        {block:PreviousPage}<a id="previous_page" href="{PreviousPage}">previous</a>{/block:PreviousPage}
        {block:NextPage}<a id="next_page" href="{NextPage}">next</a>{/block:NextPage}
    </div>
{/block:Pagination} 
```

之后，您需要修复您的 JS 代码以正确引用页面上实际存在的元素。

**示例**：

```
<script type="text/javascript">
$(document).ready(function(){
    var $wall = $('#posts');
    $wall.imagesLoaded(function(){
        $wall.masonry({
            itemSelector: '.post',
            isAnimated : false
        });
    });

    $wall.infinitescroll({
        navSelector : '#pagination', 
        nextSelector : '#next_page', 
        itemSelector : '.post'
    },
    function( newElements ) {
        var $newElems = $( newElements );
        $newElems.hide();
        $newElems.imagesLoaded(function(){
            $newElems.fadeIn('slow');
            $wall.masonry( 'appended', $newElems, false );
        });
    });
});
</script> 
```

# ruby-on-rails - 如果我修复了错误，如何使用 Ruby gem？

> ID：11128768
> 
> 赞同：1
> 
> 时间：2012-06-20T21:55:47.880
> 
> 标签：ruby-on-rails, gem

我解决了一个 gem 的代码问题，但是我如何在我的 Rails 3.0.10 应用程序中使用该 gem？我只是在我的应用程序中包含文件还是需要重新编译 gem？如果我重新编译 gem，如何在我的应用程序中使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T22:11:51.747

这里有 3 种方法可以解决这个问题（我个人出于不同的原因做了每一种方法）：

方法1)

1.  如果它在 Github 上，则 fork gem（它可能是）
2.  进行更改并提交
3.  将更改推送到您的 fork
4.  在您的 Gemfile 中获取您的 fork，如下所示：

    `gem 'awesome_thing', :git => 'git://github.com/yourname/awesome_thing.git'`

5.  向当前维护者发送拉取请求和礼貌说明（可选）

6.  等待更改被拉入并发布新版本，然后更新您的 gemfile 以停止引用您的 fork。

方法2)

1.  像这样将gem文件夹复制到vendor/gems，然后自由编辑
2.  在您的 Gemfile 中获取该 gem 文件夹，如下所示：

    gem 'awesome_thing', :path => 'vendor/gems/awesome_thing-0.4.5'

方法3)

1.  Monkeypatch 只是您更改的方法和类，并将它们放在初始化程序中，直到问题在新版本中得到修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T22:04:47.223

你应该做的是 fork 托管原始 gem 的 git 项目......进行修复并推回 git。

然后在您的 Gemfile 中执行以下操作：

宝石'gemyoufixed'，git：'git://github.com/you/gemyoufixed'

然后捆绑安装...

# firefox - Referencing JS and CSS in Firefox Panel

> ID：11128774
> 
> 赞同：1
> 
> 时间：2012-06-20T21:56:09.140
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

I'm trying to load my html page in a Firefox Panel. I've placed the HTML in the `data` directory. However, my HTML page contains absolute references to the CSS and JS and I noticed that the examples shown use relative references. Is there anyway to use absolute references? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:13:17.183

您应该只使用对文件的相对引用，因为（取决于 SDK 中资源 uri 路径的实现方式）使用完整资源 uri 可能会在 sdk 的未来版本中中断。

如果你绝对必须，你可以通过运行获得绝对路径：

```
var data = require("self").data;
var path = data.url("filename.jpg"); 
```

# c++ - 继承前向声明的结构？

> ID：11128777
> 
> 赞同：2
> 
> 时间：2012-06-20T21:56:32.753
> 
> 标签：c++, inheritance, forward-declaration

我不能从仅前向声明的结构继承吗？

例子：

```
struct A;
class B : public A {}; 
```

我收到错误“基类未定义”。

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:58:37.603

你不能这样做。首先，当你从一个结构或类继承时，它的大小必须是已知的。但是如果结构只是前向声明，编译器就无法确定大小。并且编译器还需要知道超类有哪些成员，例如是否有任何`virtual`函数等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T22:00:09.433

当您从类派生时，您实际上必须包含基类标头。前向声明是不够的

# swing - 如何使 JScrollPane JScrollBar 像 osx 滚动条一样仅在鼠标悬停时显示

> ID：11128781
> 
> 赞同：1
> 
> 时间：2012-06-20T21:56:51.817
> 
> 标签：swing, hide, jscrollpane, jscrollbar

我想最小化滚动条在我的摇摆应用程序中占用的空间。有没有办法让它们像只在鼠标悬停时显示的 osx 滚动条一样执行？否则有没有办法不显示它们但仍然可以滚动？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:21:02.340

您可以使用*getVerticalScrollBar().setVisible(false)*和*SetWheelScrollingEnabled(boolean handleWheel)*方法。但是，如果您希望在使用它们时显示它们，那就有点棘手了。您必须为 mouseWheel 添加一个 mouseListener 并创建一个 2D 图形组件。如果您只是显示和隐藏一个普通的*JScrollBar*（使用 setVisible(boolean visible) 方法），则查看区域也会发生变化，并且看起来非常突然。你需要使用*paint()/repaint()*方法创建一个覆盖。

# javascript - 通过可拖动的 SVG 形状设置 HTML 输入值？（或画布）

> ID：11128785
> 
> 赞同：0
> 
> 时间：2012-06-20T21:57:09.220
> 
> 标签：javascript, html, svg

我正在尝试组合一个 GUI 来设置一些定价。
需要以图形方式表示三个类别，以及我们希望使用两个滑块来设置建议的买入/卖出价格。

作为练习，我拼凑了一些原型并将它们[**放在 jsFiddle 上**](http://jsfiddle.net/69egn/2/)。
请快速看一下，它会比我的话更有效地解释它*:* )
（请原谅我的 JS ......还没有重构它）

因为我们的目标是让滑块在 HTML 输入中设置浮动，所以我倾向于 SVG。

1.  我的第一个请求只是对我选择的 SVG 解决方案进行同行评审......只是想确保我不会遇到一些固有的和痛苦的障碍。我也愿意接受其他解决方案的争论。
2.  其次是一个问题。有没有人有任何好的链接/示例可以帮助我了解如何根据形状的位置设置输入值？

（我预计该位置将代表定义的 $$ 范围的百分比，因此我们可以推断出特定的 $$ 值）

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:19:59.753

这是我制作的一个演示，它使用 SVG 设置四个输入，反之亦然： http:
[//phrogz.net/svg/complex-plane-picker.xhtml](http://phrogz.net/svg/complex-plane-picker.xhtml)

前两个输入是 X 和 Y（实数和复数分量）；底部两个是极坐标（大小和角度）。

那里的代码可能比您需要的要多（靠近边缘/中间时自动缩放，绘制更新的轴刻度），这可能会使它作为演示更令人困惑而不是有用。

不过，一般来说，您需要：

*   `keyup`在输入的or `change`or事件上有一个事件侦听`input`器，并相应地更新 SVG 以匹配。
*   将拖动添加到您的 SVG 元素，并在拖动期间计算适当的值并相应地设置`.value`输入。

作为提示，在拖动过程中不要尝试检测`mousemove`您的可拖动元素本身。如果鼠标移到此之外，您将停止获得拖动事件并且它不会跟上。相反，我通常使用这个逻辑：

*   开`mousedown`：
    1.  记录当前光标位置
    2.  **在文档的根目录上**注册一个`mousemove`处理程序
    ***   **在文档的根目录上**注册一个`mouseup`处理程序**
*****   开`mousemove`：
    1.  检测当前光标位置和拖动开始位置之间的屏幕空间增量，并使用它来[计算被拖动元素的本地空间中的增量](http://phrogz.net/svg/drag_under_transformation.xhtml)以更新其变换。*   开`mouseup`：
    1.  取消注册`mousemove`处理程序。****

 ****这是完整的源代码，万一我的网站关闭了：

```
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head> 
  <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
  <title>SVG Complex Plane Input</title>
  <style type="text/css" media="screen">
    html, body { background:#eee; margin:0 }
    p { margin:0.5em; text-align:center }
    .complex-plane-picker svg { width:200px; height:200px; display:block; margin:1em auto; stroke-linejoin:round; stroke-linecap:round; pointer-events:all; }
    .complex-plane-picker rect.bg { fill:#fff; }
    .complex-plane-picker .axes * { stroke:#ccc; fill:none }
    .complex-plane-picker .dot { fill:#090; fill-opacity:0.4; stroke:#000; stroke-opacity:0.6; cursor:move; }
    .complex-plane-picker input { width:6em; }
    .complex-plane-picker .labels { stroke:none; font-size:6px; font-family:'Verdana'; text-anchor:middle; alignment-baseline:middle; }
    .complex-plane-picker .scalers { pointer-events:all; }
  </style>
</head><body>
<p>Drag the dot to set the complex value.<br/> TODO: Hold down shift to affect only the magnitude. Hold down alt to affect only the angle. Hold down both to snap to the nearest real- or imaginary-only value.</p>
<div class="complex-plane-picker">
  <p class="rectangular"><input type="number" value="0" class='real' />+<input type="number" value="0" class='imaginary' />i</p>
  <svg viewBox="-50 -50 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full">
    <rect class="bg" x="-50" y="-50" width="100" height="100" />
    <g class="scalers">
      <rect x="-5" y="-5" width="10" height="10" fill="#ffc"/>
      <rect x="-45" y="-45" width="90" height="90" fill="none" stroke="#ffc" stroke-width="10" />
    </g>
    <g class="axes">
      <g>
        <line x1="-49" y1="0" x2="49" y2="0" />
        <polyline points="-44,5 -49,0 -44,-5" />
        <polyline points="44,5 49,0 44,-5" />
      </g>
      <g transform="rotate(90)">
        <line x1="-49" y1="0" x2="49" y2="0" />
        <polyline points="-44,5 -49,0 -44,-5" />
        <polyline points="44,5 49,0 44,-5" />
      </g>
    </g>
    <g class="labels" id="labels">
      <text x="0" y="0">0</text>
      <text x="0" y="0">0</text>
      <text x="0" y="0">0</text>
      <text x="0" y="0">0</text>
    </g>
    <use class="labels" xlink:href="#labels" transform="rotate(90)" />
    <circle class="dot" r="4" />
  </svg>
  <p class="polar"><input type="number" value="0" class='magnitude' />@<input type="number" value="0" class='angle'/>°</p>
</div>
<script type="text/javascript"><![CDATA[
  var svg   = document.getElementsByTagName('svg')[0];
  var svgNS = svg.getAttribute('xmlns');
  var pt    = svg.createSVGPoint();

  function mxy(evt){
    pt.x = evt.clientX;
    pt.y = evt.clientY;
    return pt.matrixTransform(svg.getScreenCTM().inverse());
  }

  var dot  = document.querySelector('.complex-plane-picker .dot');
  var real = document.querySelector('.real');
  var imag = document.querySelector('.imaginary');
  var size = document.querySelector('.magnitude');
  var angl = document.querySelector('.angle');

  var labels = svg.querySelectorAll('.complex-plane-picker #labels text');
  var scale, maxValue;
  var updateScale = function(newScale){
    scale = newScale;
    maxValue = 50*scale;
    var tickSize=1e-6;
    var e=-5;
    var f=-1;
    var fs = [1,2,5]
    while (tickSize/scale < 10){
      if (++f%fs.length==0) ++e;
      tickSize = fs[f%fs.length]*Math.pow(10,e);
    }
    for (var i=labels.length;i;--i){
      labels[i-1].firstChild.nodeValue = (tickSize*i).toString().replace(/(\.0*[^0]+)0{3,}.*/,'$1');
      labels[i-1].setAttribute('y', -tickSize*i/scale);
    }
    // updateRectangularFromDot();
    // updatePolarFromDot();
  };

  var rescaleAsNeeded = function(x,y,jump){
    var scaleFactor = 1.03;
    if (jump && (x>maxValue || y>maxValue || (x<maxValue*0.1 && y<maxValue*0.1))){
      updateScale(Math.max(x,y)*2/50);
    } else if (x>maxValue*0.8 || y>maxValue*0.8) updateScale(scale*scaleFactor);
    else if (x<maxValue*0.1 && y<maxValue*0.1) updateScale(scale/scaleFactor);
  };  

  var updateFromRectangular = function(){
    var x = real.value*1;
    var y = imag.value*1;
    rescaleAsNeeded(x,y,true);
    dot.cx.baseVal.value =  x/scale;
    dot.cy.baseVal.value = -y/scale;
    updatePolarFromDot();
  };
  real.addEventListener('input',updateFromRectangular,false);
  imag.addEventListener('input',updateFromRectangular,false);

  var updateFromPolar = function(){
    var hyp = size.value*1;
    var rad = angl.value*Math.PI/180;
    var x   = Math.cos(rad)*hyp;
    var y   = Math.sin(rad)*hyp;
    rescaleAsNeeded(x,y,true);
    dot.cx.baseVal.value =  x/scale;
    dot.cy.baseVal.value = -y/scale;
    updateRectangularFromDot();
  };
  size.addEventListener('input',updateFromPolar,false);
  angl.addEventListener('input',updateFromPolar,false);

  var updateRectangularFromDot = function(){
    real.value = ( dot.cx.baseVal.value*scale).toFixed(2);
    imag.value = (-dot.cy.baseVal.value*scale).toFixed(2);
  };
  var updatePolarFromDot = function(){
    var x =  dot.cx.baseVal.value*scale;
    var y = -dot.cy.baseVal.value*scale;
    size.value = Math.sqrt(x*x+y*y).toFixed(2);
    angl.value = (Math.atan2(y,x)*180/Math.PI).toFixed(1);
  }
  var dragging = false;
  dot.addEventListener('mousedown',function(evt){
    var offset = mxy(evt);
    dragging = true;
    offset.x = dot.cx.baseVal.value - offset.x;
    offset.y = dot.cy.baseVal.value - offset.y;
    var scaleTimer;
    var move = function(evt){
      clearTimeout(scaleTimer);
      var now = mxy(evt);
      var x = offset.x + now.x;
      var y = -(offset.y + now.y);
      dot.cx.baseVal.value = x;
      dot.cy.baseVal.value = -y;
      x = Math.abs(x)*scale, y=Math.abs(y)*scale;
      var oldScale = scale;
      rescaleAsNeeded(x,y);
      updatePolarFromDot();
      updateRectangularFromDot();
      if (oldScale != scale) scaleTimer = setTimeout(function(){move(evt)},1000/30);
    };
    document.documentElement.style.userSelect = 
    document.documentElement.style.MozUserSelect = 
    document.documentElement.style.webkitUserSelect = 'none';
    svg.addEventListener('mousemove',move,false);
    document.documentElement.addEventListener('mouseup',function(){
      dragging = false;
      clearTimeout(scaleTimer);
      svg.removeEventListener('mousemove',move,false);
      document.documentElement.style.userSelect = 
      document.documentElement.style.MozUserSelect = 
      document.documentElement.style.webkitUserSelect = '';
    },false);
  },false);

  dot.addEventListener('dblclick',function(){
    dot.cx.baseVal.value = dot.cy.baseVal.value = 0;
    updateScale(1.0);
    updatePolarFromDot();
    updateRectangularFromDot();
  },false);

  updateScale(1.0);

]]></script>
</body></html> 
```****

# android - 如何将我的文件写入 Android 目录

> ID：11128787
> 
> 赞同：1
> 
> 时间：2012-06-20T21:57:18.033
> 
> 标签：android, filewriter, bufferedwriter

这只是创建文件并将其写入项目目录的早期测试。我认为这会很快，但要么我做错了什么，要么我没有正确更新某些东西？

我想做的就是能够动态地创建一个文件并将其写入我的原始文件夹。

我对其他事情使用了几种方法，例如获取对象的 ArrayList，使用 for 循环单独获取它们，然后使用“write”写入文件。

这是我的代码：我要创建和写入的文件称为 txt 文件，称为 output。

我真的很感谢有人帮我看这个，非常感谢！

```
//for writing file...
  public static void writeGrids(List<Grid> grids)
  {
      for(int i = 0; i < grids.size(); i++)
      {

          try {
            write(grids.get(i));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
      }
  }

 static void write(Grid grid) throws IOException
  {

     try
     {
     FileWriter fstream = new FileWriter("/My Project/res/raw/output.txt");
     BufferedWriter out = new BufferedWriter(fstream);
     //FILE DIR!!!!!!

          out.write(grid.gridNickName + ";" + grid.gridName + ";" +
                  grid.firstName + ";" + grid.lastName + ";" +
                  grid.password + ";" + grid.loginURI + ";");

     out.close();
     }
     catch (Exception e)
     {
         System.err.println("Error: " + e.getMessage());
     }

  } 
```

这是尝试将某些内容保存到内部存储的更新版本。这会是一个理想的解决方案吗？

更新代码：

```
//for writing file...
public void writeGrids(List<Grid> grids)
{
      for(int i = 0; i < grids.size(); i++)
      {

          try {
            write(grids.get(i));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
      }
}

void write(Grid grid) throws IOException
{    

     try
     {
      FileOutputStream fos;
     String FILENAME = "InternalString";

     fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
     String data = grid.getGridNickName() + ";" + grid.getGridName() + ";" +
              grid.getFirstName() + ";" + grid.getLastName() + ";" +
              grid.getPassword() + ";" + grid.getLoginURI() + ";";
     fos.write(data.getBytes());
     fos.close();

     }
     catch (Exception e)
     {
         System.err.println("Error: " + e.getMessage());
     }

} 
```

用户会调用 write 方法来开始这样的事情.. writeGrids(myNewArrayList);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:00:19.630

让我为你谷歌一下

[http://developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

您需要获得许可并调用 getExternalStorage()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:53:09.173

“我的项目”文件夹仅存在于您的开发机器上，因此无法由设备写入。虽然 res/raw 子文件夹的内容最终会出现在设备上，但它们最终会以只读（就您的应用程序的用户 ID 而言）形式出现。

相反，您需要将运行时可更改的数据存储在应用程序内部存储目录中 - 查找 getFileDir() 和相关方法

或在外部存储（即 SD 卡）上（如果存在）。当且仅当您要写入 sdcard 时，您才需要应用程序清单中的 sdcard 权限。

如果您将数据放在其中任何一个位置的子目录中，则必须确保包含文件位置的所有目录实际存在，或者以其他方式创建它们。

如果要打包也可以更改的数据，则必须首先将打包的数据复制到这两个可以更改数据的位置之一。

# ios - ios如何从ios访问谷歌分析报告

> ID：11128788
> 
> 赞同：1
> 
> 时间：2012-06-20T21:57:20.107
> 
> 标签：ios, google-analytics, google-analytics-api

我有一个使用谷歌分析来跟踪应用程序使用情况的应用程序，它使用 GANTracker api 效果很好。登录谷歌分析网站时，我可以看到结果和分析。

我现在需要通过我的应用程序访问这些统计信息，以查看用户最感兴趣的热门话题或热门话题，因此我需要能够阅读并请求谷歌分析。我已经看到 java 中有一个报告 api，但我没有看到任何 ios 调用或 api 从谷歌分析中读取统计信息？

有没有人这样做并且可以分享你是如何做到的？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:52:24.920

Google 提供了一个 Objective C 库，您可以使用它来访问 JSON API，包括 Analytics API。[您可以在http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)找到该库。

# forms - 您不能在未绑定的表单上调用 isValid() - Symfony

> ID：11128789
> 
> 赞同：0
> 
> 时间：2012-06-20T21:57:32.690
> 
> 标签：forms, symfony, doctrine

我试图用 Symfony 创建一个表单，但我收到一个错误：

> 您不能在未绑定的表单上调用 isValid()。

1.  我有带有注释和 Doctrine 的类 User 保存在数据库中。类 User 具有使用 Doctrine 生成的 getter 和 setter。

2.  我有 UserTye.php：

    ```
    <?php

    namespace Iftodi\DesignBundle\Form;

    use Symfony\Component\Form\AbstractType;
    use Symfony\Component\Form\FormBuilder;

    class UserType extends AbstractType
    {

        public function buildForm(FormBuilder $builder, array $options)
        {
            $builder->add('name');
            $builder->add('username');
            $builder->add('email','email');
            $builder->add('password','password');

        }

        public function getName()
        {
            return "userRegister";
        }
    }

    ?> 
    ```

3.  在控制器中：

    ```
    function registerAction()
    {
        $user = new User();
        $form = $this->createForm(new UserRegister(),$user);

        $request = $this->getRequest();

        if($request->getMethod() == 'POST')
            $form->bindRequest ($request);

        if($form->isValid())
        {

        }

        return $this->render("IftodiDesignBundle:User:register.html.twig", 
                array('form' => $form->createView())
                );
    } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T03:55:13.650

如果你有一个发布请求，你只绑定你的表单，但总是调用 isValid 。正如消息所说：如果它没有被绑定，你就不能。像这样重新组织您的代码：

```
if ("POST" === $request->getMethod()) {
    $form->bindRequest($request);

    if ($form->isValid()) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T00:34:55.550

梅林的回答是正确的。

这是代码的更新片段：对于 Symfony 2.1+

```
if ('POST' === $request->getMethod()) {
    $form->bind($request);

    if ($form->isValid()) {
        // do something with $form
    }
} 
```

参考：[http ://symfony.com/blog/form-goodness-in-symfony-2-1#no-more-bindrequest](http://symfony.com/blog/form-goodness-in-symfony-2-1#no-more-bindrequest)

如果您不在控制器中而是在 twig 扩展中，您可以通过您的服务注入声明传递请求堆栈在您的包中的 services.yml 中（注意 Symfony 2.4 版本）。

参考：[http ://symfony.com/doc/current/book/service_container.html#injecting-the-request](http://symfony.com/doc/current/book/service_container.html#injecting-the-request)

```
services:
  your_service_name:
     class: YourBundle\YourTwigExtension
     arguments: [@request_stack] 
```

然后在你的扩展

```
namespace YourBundle;

use Symfony\Component\HttpFoundation\RequestStack;

class YourTwigExtension extends \Twig_Extension
{
   private $request;

   public function __construct(RequestStack $request_stack)
   {
       $tmp_request = $request_stack->getCurrentRequest();
       if ($tmp_request) 
       {
          $this->request = $tmp_request;
       }
   }

   // add your filter/function/extension name declarations ...       

   public function yourFancyMethod()
   {
        if($this->request)
        {
             if ('POST' === $this->request->getMethod()) 
             {
                  $form->bind($this->request);

                  if ($form->isValid()) 
                  {
                      // do something with $form
                  }
             }
        }
   }

} 
```

# c++ - 使用指定 MAX DISTANCE 的 Boost Dijkstra 查找最短路径

> ID：11128799
> 
> 赞同：2
> 
> 时间：2012-06-20T21:58:50.277
> 
> 标签：c++, boost, shortest-path, dijkstra

我喜欢使用 boost 的 dijkstra 实现来找到节点的最短路径

但是，在我当前的问题中，我有一个巨大的图表，只需要找到到一定距离内的节点的最短路径

我可以自己实现这个，但我相信 boost 的实现比我的效率高得多，所以我更喜欢使用 boost 来完成任务

我只是想知道如果节点太远，是否有办法告诉boost的dijkstra停止寻找最短路径——因为在这种情况下它会显着加速算法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-14T20:11:43.377

这是对 Dijkstra 算法的一个非常简单的修改。当您从顶点 v 迭代出边时，只需忽略每个边 e，其中`e.weight + v.dist > max`.

# android - 是否可以在 MapActivity 中使用 Loaders 类？

> ID：11128801
> 
> 赞同：2
> 
> 时间：2012-06-20T21:59:03.883
> 
> 标签：android

我有一个 android 应用程序可以定期记录位置并存储在后台的数据库中。db 带有内容提供程序。使用报警接收器和服务设置重复记录任务。

现在我想使用数据库中的数据（纬度和经度）将图钉放在地图上。我目前使用 Loader 加载游标并从 db 读取数据，然后将它们放入 a 中的列表视图中`fragment activity`（使用 2.3.3 平台中的支持包 v13）。但是，我想不出一种方法将其转换为在地图活动中的地图视图上绘图。如果我的活动扩展`MapActivity`，我不能使用方法`getSupporLoaderManager().iniLoader(...)`来初始化加载程序，因为它说错误。

我想保留加载器，因为如果数据量很大，它似乎处理得更快。我的问题是，如何使用`Loader`class in读取数据`MapActivity`？如果不可能，有什么更好的方式来读取数据并在地图上绘图？

任何建议或答案表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:24:31.227

这应该是可能的！我假设您可以在 MapActivity 中加载数据列表，因此让我们调用以`Marker`供进一步参考。只需使用可绘制对象来表示它们并扩展[ItemizedOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay)

```
public class MarkerOverlay extends ItemizedOverlay<OverlayItem>{

  Collection<Marker> mMarkers;

  public MarkerOverlay(Drawable drawable, Collection<Marker> markers){
    super(drawable);
    mMarkers = marker;
  }

  @Override
  public OverlayItem createItem(int index){
    Marker m = mMarkers.get(index);
    return new OverlayItem(new GeoPoint(m.getLatitude(), m.getLongitude()),
                           m.getTitle(), m.getSnippet();
  }

  @Override
  public int size(){
    return mMarkers.size();
  }

} 
```

在您的 MapActivity 中，您可以执行以下操作：

```
MarkerOverlay mMarkerOverlay;

public void onCreate(Bundle icicle){
  super(icicle);
  ArrayList<Marker> list = Cursor.getList(); //fetch your data from Cursor
  mMarkerOverlay = new MarkerOverlay(getResources().getDrawable(
                               R.drawable.some_marker_drawable),
                               list);
  getOverlays().add(mMarkerOverlay); 

} 
```

您还可以为每个标记提供一个独特的可绘制对象。只需在返回之前将其设置在 createItem 中

# c# - C# Threading，多个线程调用同一个方法访问同一个数组会导致缓慢吗？

> ID：11128803
> 
> 赞同：2
> 
> 时间：2012-06-20T21:59:15.197
> 
> 标签：c#, multithreading, performance

**背景：** 我希望我的问题不是太含糊。我会尽量解释，不能贴太多代码，因为受影响的方法非常复杂冗长。所以我的问题是我试图加快多线程的处理速度。该应用程序用于我的 2D 游戏引擎中的照明，我在我的场景顶部绘制不同透明度级别的黑色矩形（当前导致延迟）。

对我来说，第一步是将相同亮度的相邻矩形批处理在一起，以减少一些渲染工作。结果很好（也许可以做得更好，但现在不是重点），现在我还实现了一个粗略的线程系统，它将每批一起为屏幕的单独部分照明。

**我的问题的关键：**在分析上述特定批处理方法的时间时（对于不同数量的线程在单独的、不相交的数据集上工作），我注意到一些奇怪的峰值。以前，当使用一个线程时，该方法执行大约需要 12ms，奇数跳转到 15ms。我没想太多。然而，当使用 2 或 3 个线程进行处理时，我得到或多或少的 4~5 毫秒，跳跃到 10 毫秒，有时甚至高达 20 毫秒。

现在我意识到，如果不检查我的代码，任何人都无法说出原因可能是什么，所以我不希望这样。相反，我试图得出一些结论，并希望现在确认它们。如前所述，每个线程都在我的数据集的一部分上工作，彼此完全不相交（它们不重叠）。但是，*数据数组的入口点是通过特定类的相同实例的相同方法。所以线程都通过相同的方法访问同一个数组（但它的不同部分 - 因此我也不使用任何锁）。这会导致意外减速吗？*

*或者线程以这种方式运行可能是正常行为（执行时间变化超过标准的两倍）？*作为另一个说明，我在需要它们的那一刻创建所有线程，并让它们运行完成。

数据集的访问方法：

```
public short GetLightLevelAt(int x, int y)
{
   if (inLightingBounds(x, y))
   {
      return lightData[x, y];
   }
   else
   {
      return GuessLightLevelAt(x,y); //This won't ever happen currently, guaranteed
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:09:11.490

也许您的数据集与垃圾 CPU 缓存一样大，因此性能不一致？使用多级缓存并且无法控制它，您将永远无法准确判断需要多少东西。

例如，如果您的数据与处理器上最私密的缓存大小一样大，并且您从一个线程移动到三个线程，那么您将有效地放弃它本来可以给您带来的任何性能优势。有时，一个接一个地按顺序做事真的更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T00:00:22.530

在您的情况下，由于峰值很高，它可能与上面提到的垃圾收集或上下文切换有关。

但是，在同一阵列上运行多线程仍可能由于错误共享而出现速度下降。（即使有不重叠的分区）

例如，以下代码可能存在错误共享问题：

```
int[] array = new int[100000];
int a = 1;
int b = 0;

//The following loops run concurrently

//Thread A
for( int i = 0; i < 50000; i++ )
    array[i] = a;

//Thread B
for( int j = 50000; j < 100000; j++ )
    array[j] = b; 
```

错误共享发生是因为 int a 和 b 被声明为彼此相邻，并且很可能彼此位于同一高速缓存行上。

如果同时运行，此代码可能根本不会出现加速，并且可能会减速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T22:12:04.343

您遇到的开销*可能*来自上下文切换或资源争用。一旦最大化可用内核，操作系统将开始上下文切换（基本上从一个进程/线程移动到另一个进程/线程）。

但是，如果不发布代码很难说。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T01:28:42.363

您询问从几个线程切换到多个线程来运行该方法是否会导致延迟。简短的回答是**否定**的。

您没有锁定该数组，因此与争用无关。

GC 将随机出现在一段代码中，因此您会在这里和那里看到尖峰，而不是在特定的地方。

我敢打赌这不是一个尖峰。这是上下文切换。您的时钟分辨率很可能很高，并且您的量子尺寸也很高。所以一个单一的上下文切换会长时间停止你的线程。

如果这是您遇到麻烦的原因，那么您需要减少线程数。你让它比它可能的慢。

# java - 关于 Java 类对象和 Android 中从一个活动到另一个活动的数据传输的查询

> ID：11128806
> 
> 赞同：0
> 
> 时间：2012-06-20T21:59:28.043
> 
> 标签：java, android, class, object

所以我正在制作一个 Android 应用程序，并且我有一个`ListView`（称为`showclients`）链接到另一个（称为`ViewClient`）。当`showclients`被调用时，它会从其他 java 类中收集一堆数据并将其存储在一个类型的对象中`ClientList`（我已经制作了）。

`ViewClient`需要该信息，并且再次从头开始获取它需要很长时间，所以`showclients`我创建了一个名为type的`public static`变量并创建了一个方法......`Clist``ClientList`

```
public static ClientList returnobj(){
    return Clist;
} 
```

回来`ViewClient`我打电话

```
ClientList grief= showclients.returnobj(); 
```

它让我得到数据。我想知道为什么会这样，以及它是否可以在没有 Android 的情况下在 Java 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:17:51.563

所以你在问如何在活动之间共享数据。一种选择是将数据模型托管在应用程序类中。创建一个扩展的类`Application`，

```
public MyApplication extends Application { ... 
```

在您的清单中，添加您的应用程序类，

```
 <application
        android:name=".MyApplication"
        ... 
```

类的生命周期`Application`允许您在那里托管数据。它超越了任何特定活动的开始/停止。将私有成员添加到您的`MyApplication`类中，并提供 getter 和 setter 来访问数据，

```
public MyApplication extends Application {
  private MyData myData;

  public MyData getMyData() { return myData; }
  public void setMyData(MyData data) { this.myData = data; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:34:27.117

如果你问**这个确切的代码**是否可以通过在 Java SE 上编译和运行（即“没有 Android”）来工作，那么**没有**，因为 Java SE 没有你使用的一些类（比如`Activity`）。

对于 Java SE 中的图形用户界面，您应该使用[Swing](https://en.wikipedia.org/wiki/Swing)或[SWT 之](https://en.wikipedia.org/wiki/SWT)类的库。

如果您要询问**传输数据的一般方案**是否适用于 Java SE，那么**是的，它会**。原因正是您使用了`static`关键字。这意味着静态“变量”（实际上是一个*成员*）和静态方法是为整个`showclients`类定义的，而不是专门为它的任何对象定义的。这意味着在您的程序中的任何地方，静态成员的值都是相同的，并且`returnobj()`将返回相同的对象。

如果没有`static`关键字，则对于您创建的每个对象，该值将存在一次`showclients`，而不是整个类。

这就是您的解决方案适用于 Android 的原因之一 - 如果该值不会存储在静态成员中，您将不得不引用实际`showclients`对象，该对象可能会在您的其他活动显示时随时从内存中删除（因为`showclients`在这种情况下，可以随时删除后台 Activity ）。因为该成员是静态的，所以只要`showclients`由 Java 虚拟机加载，它就会一直存在，对于您的目的而言，只要您需要。

最后，**Jeffrey 的**解决方案对于 Android 代码要好得多，因为您不会滥用`Activity`应该放在[专用代码](https://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)中的附加功能的定义。[在 Java SE 中，您将通过创建一个实现单例模式](https://en.wikipedia.org/wiki/Singleton_pattern)的新类来实现类似的解决方案。而且，实际上，`MyApplication`在 Jeffrey 的示例中，您的应用程序是一个单例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:35:35.877

我想你是在问静态关键字？静态方法（或变量）直接绑定到类本身，而不是其特定实例。最好在示例中显示，但使用变量（不要以这种方式使用它，请阅读有关封装的信息）：

```
class A {
  public static String foo = "foo";

  public A() {
    foo = "bar";
  }
}

class B {
  public void something() {
    // suppose print exists
    print(A.foo); // prints foo

    A a = new A();
    print(A.foo); // prints bar
    print(a.foo); // prints bar
  }
} 
```

给自己做一些简单的java应用程序（这就是w

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T22:16:33.420

你的问题到底是什么？

什么是“没有 Android 的 Java”？由于 ListView、Activity 等是特定于 Android 的，我会说不。

但是您的“概念”应该/可以在没有 Android 的情况下工作。-> 请更多信息...

恕我直言，您的描述有点神秘……也许可以发布更多代码。

# android - Android - NDK 共享库使用 nm / objdump 提取相关 JNI 钩子

> ID：11128810
> 
> 赞同：1
> 
> 时间：2012-06-20T21:59:38.080
> 
> 标签：android, c++, c, linux, android-ndk

我正在尝试从包含 JNI 胶水代码的共享库中提取相关符号，但 nm 似乎没有足够的帮助。方法签名不存在，所以我不知道要传递哪些参数。

有任何想法吗？

```
bash-3.2# ./arm-linux-androideabi-nm -D ~/Desktop/backup/whiteBox/libamplayerjni.so | grep Java
00030d6c T Java_com_farcore_playerservice_AmPlayer_GL2XScale
00030da8 T Java_com_farcore_playerservice_AmPlayer_close
00030d74 T Java_com_farcore_playerservice_AmPlayer_disable2X2XYScale
... 
```

**obdump 也没有多大帮助**

```
bash-3.2# ./arm-linux-androideabi-objdump -TC ~/Desktop/backup/whiteBox/libamplayerjni.so | grep Java
00030c00 g    DF .text  00000008 Java_com_farcore_playerservice_AmPlayer_getDivxInfo
00030c08 g    DF .text  00000008 Java_com_farcore_playerservice_AmPlayer_setIVolume
00030c10 g    DF .text  00000008 Java_com_farcore_playerservice_AmPlayer_mute
00030c18 g    DF .text  00000008 Java_com_farcore_playerservice_AmPlayer_unmute
00030c20 g    DF .text  00000008 Java_com_farcore_playerservice_AmPlayer_setVideoBlackOut 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:33:36.057

由于 JNI 使用 C 调用约定 (cdecl)，因此函数签名中没有参数信息。您需要分析相应的 java(dalvik) 代码以找出参数类型。

这是我的 jni 库：

```
00001408 g    DF .text  0000000a Java_info_kghost_android_openvpn_FileDescriptorHolder_close
00001a14 g    DF .text  00000198 Java_info_kghost_android_openvpn_ManagementSocket_read__ILjava_nio_ByteBuffer_2II
00001414 g    DF .text  0000000c Java_info_kghost_android_openvpn_ManagementSocket_shutdown
000017c4 g    DF .text  00000250 Java_info_kghost_android_openvpn_ManagementSocket_read__ILjava_nio_ByteBuffer_2IILinfo_kghost_android_openvpn_FileDescriptorHolder_2
0000142c g    DF .text  00000200 Java_info_kghost_android_openvpn_ManagementSocket_write__ILjava_nio_ByteBuffer_2IILinfo_kghost_android_openvpn_FileDescriptorHolder_2
00001420 g    DF .text  0000000a Java_info_kghost_android_openvpn_ManagementSocket_close
0000162c g    DF .text  00000198 Java_info_kghost_android_openvpn_ManagementSocket_write__ILjava_nio_ByteBuffer_2II
00001bd4 g    DF .text  000000d4 Java_info_kghost_android_openvpn_ManagementSocket_open 
```

如果没有重载方法，签名将不包含参数信息；如果方法被重载，签名将在函数名中包含参数信息。

并且在使用本机方法之前，您需要显式加载 jni 库：

```
System.loadLibrary("your-library-name"); 
```

确保你的库放在Android 上的`LD_LIBRARY_PATH`,目录中，检查 mmap ( ) 看是否加载成功。`/lib``/proc/pid/maps`

# matlab - 增加 B 的 A(i) 行中的第 i 列

> ID：11128814
> 
> 赞同：1
> 
> 时间：2012-06-20T21:59:57.563
> 
> 标签：matlab, matrix, vectorization

有没有更好的方法来做这个for循环？

```
for i = find(A > 42)
    B(A(i), i) = B(A(i), i) + 1;
end 
```

`A`是一个整数数组。`B`是一个`max(A)`×`length(A)`矩阵。

例子：

```
A = reshape(magic(3), 1, 9); %# 8 3 4 1 5 9 6 7 2
B = zeros(max(A), length(A));
for i = find(A > 3)
    B(A(i), i) = B(A(i), i) + 1;
end

B = [
    0     0     0     0     0     0     0     0     0
    0     0     0     0     0     0     0     0     0
    0     0     0     0     0     0     0     0     0
    0     0     1     0     0     0     0     0     0
    0     0     0     0     1     0     0     0     0
    0     0     0     0     0     0     1     0     0
    0     0     0     0     0     0     0     1     0
    1     0     0     0     0     0     0     0     0
    0     0     0     0     0     1     0     0     0
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:18:23.950

对于这种情况，我建议使用线性索引。[使用sub2ind](http://www.mathworks.de/help/techdoc/ref/sub2ind.html)将行/列子索引转换为线性索引。

```
i = find(A > 3);
si = sub2ind(size(B),A(i),i);
B(si) = B(si) + 1; 
```

如果需要，您可以将其组合成一条线，为了清楚起见，我将其保留为多条线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:18:46.180

```
B = zeros(max(A), length(A)); 
inds = find(A > thresh);
B(sub2ind(size(B),A(inds),inds)) = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T22:45:56.657

这是紧凑的，无环的，并且有效：

```
INDICES = A(:) + length(A)*[0:length(A)-1]';                          %#' 
INDICES(A<42) = [];
B(INDICES) = B(INDICES)+1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T05:52:55.850

[另一种解决方案（受此](https://stackoverflow.com/a/6150845/97160)启发）：

```
idx = find(A>3);
B = full(sparse(A(idx), idx, 1, max(A), length(A))); 
```

# c# - 从使用复杂类型的属性映射时，如何使列名全部大写？

> ID：11128820
> 
> 赞同：1
> 
> 时间：2012-06-20T22:00:33.770
> 
> 标签：c#, oracle, ef-code-first, entity-framework-4.3

我正在使用 EF 4.3 并且正在访问 Oracle 数据库。由于 EF 如何为 Oracle 数据库生成 SQL，并且因为 EF 4.3 不允许添加自定义约定，我必须手动为所有大写的每个属性指定列名。

```
[Column("MYPROPERTY")]
public string MyProperty { get; set; } 
```

那么，对于使用复杂类型的属性，我能做些什么呢？我有以下复杂类型：

```
public class Minute {
    public int Value { get; set; }
} 
```

和以下 DbContext：

```
public class MyDbContext : DbContext {
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.ComplexType<Minutes>().Property(x => x.Value);
    }
} 
```

我的实体：

```
[Table("MYENTITY")]
public class MyEntity {
    [Column("MYPROPERTY")]
    public string MyProperty { get; set; }
    [Column("MYMINUTES")] //this does nothing
    public Minutes MyMinutes { get; set; }
} 
```

在生成的 SQL 中，该`MyMinutes`属性被映射到一个不存在的`"Extent1"."MyMinutes_Value"`...我想要的`"Extent1"."MYMINUTES"`。

除了把头撞在桌子上，我还能在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:06:11.907

答案相当简单，但没有很好的记录。据我所知，它不能用属性来完成。在 datacontext 的 OnModelCreating 方法中添加一行：

```
public class MyDbContext : DbContext {
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.ComplexType<Minutes>().Property(x => x.Value);
        modelBuilder.Entity<MyEntity>().Property(x => x.MyMinutes.Value).HasColumnName("MYMINUTES");
    }
} 
```

因此，该方法的第一行通常设置复杂类型。第二行具体告诉 EF 如何在 MyEntity 类上映射属性。中提琴！

# jquery - jQuery自动完成更改覆盖表单提交

> ID：11128821
> 
> 赞同：0
> 
> 时间：2012-06-20T22:00:35.113
> 
> 标签：jquery

我已经实现了 jQuery 自动完成组合框并且它工作正常。现在我有一个奇怪的问题。每当用户在组合框中键入并立即提交表单时，就会触发自动完成中的更改事件，该事件会覆盖表单的提交。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:22:12.437

我不确定，但根据您的描述，我认为您在自动完成小部件中遇到了一个已知错误：[#7550：未及时触发自动完成更改事件](http://bugs.jqueryui.com/ticket/7550)。要点是提交发生在您的更改处理程序执行之前，因此您的处理程序此时将无法修改表单上的任何内容（技术上它可以，但提交已经在表单的旧状态下发生）。

这计划在 jqueryUI 1.9 中修复（2012 年 12 月？）

如果您认为这是您的问题，请给我留言，我会尝试用一个体面的解决方法进行更新。

# ide - 在 WebStorm IDE 中更改代码字体大小

> ID：11128822
> 
> 赞同：77
> 
> 时间：2012-06-20T22:00:35.423
> 
> 标签：ide, webstorm

我似乎找不到在 WebStorm 中更改代码字体大小的方法。我在选项中更改字体大小，它会更改菜单和工具栏的字体大小，但不会更改实际代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-06-20T22:22:11.507

`Settings`（`Preferences`在 Mac 上）| `Editor`| `Colors & Fonts`| `Font`,**尺寸**:

在更改此设置之前，您必须单击“另存为...”并以自定义名称保存方案。

![字体大小](../Images/0d8e0ec356364cef8251b7f0ca130df1.png)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-08-08T14:46:31.417

如果你来这里是因为你已经找到了那个屏幕，但是文本框被锁定了......

这是因为您无法修改当前主题。

单击“另存为...”以保存当前主题的副本，现在您应该可以编辑您想要的任何内容。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-07-27T21:04:15.637

还有一个选项可以启用鼠标滚轮缩放，例如在浏览器中：

**文件 > 设置 > 编辑器 > 使用 Ctrl+鼠标滚轮更改字体大小**。

![在此处输入图像描述](../Images/7e45e24cd5c53d6b07c41e75b5bf1e4d.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-31T04:34:45.987

如果您是**WebStorm 10.0.4 的新**用户，

**文件 > 设置 > 编辑器 > 常规 >*使用 Ctrl+鼠标滚轮更改字体大小*。** [![在此处输入图像描述](../Images/23733afddaa25c5e549178ea0900a428.png)](https://i.stack.imgur.com/3q2BI.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-28T12:28:43.430

讨论如何通过鼠标滚轮动态更改字体大小的答案部分正确，但遗漏了关键步骤：

1.  文件
2.  设置
3.  编辑
4.  一般（这是上一个答案中缺少的关键步骤）
5.  设置“使用 Ctrl+M 更改字体大小（缩放）

上一个答案缺少关键的第 4 步，如果省略，您会想知道魔术复选框控件的位置。

# php - 如何正确格式化 PDO 结果？- 以字符串形式返回的数字结果？

> ID：11128823
> 
> 赞同：7
> 
> 时间：2012-06-20T22:00:36.923
> 
> 标签：php, json, pdo, restler

由于 AJAX 相对较新，现在刚刚开始学习 PDO，增加的 ReSTler 级别让我完全困惑。从 Restler 示例中对以下代码进行建模，我不知道如何将输出格式从 PDO返回的内容更改为 Restler 和 Highcharts 所期望的内容 *。*

如何更改此代码以从当前格式变为所需格式？（如果这是处理 MySQL 结果的一个因素，结果通常是 5K-10K 记录。）

**ReSTler API 代码片段**：

```
$sql = "SELECT ....."
$this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
try {
    $stmt = $this->db->query($sql);
    return $stmt->fetchAll();
} catch (PDOException $e) {
    throw new RestException(502, 'Listing History: ' . $e->getMessage());
} 
```

**当前输出格式**（包括*不需要的*列名）：

```
[
  {
    "chart_date": "1118966400000",
    "bandwidth": "10.01",
    "views": "101"
  },
  {
    "chart_date": "1119225600000",
    "bandwidth": "20.02",
    "views": "101"
  }, 
```

**所需的输出格式**（数字且*无*列名）：

```
[
  [
    1118966400000,
    10.01,
    101
  ],
  [
    1119225600000,
    20.02,
    202
  ], 
```

**使用*建议* `fetch(PDO::FETCH_NUM)`编辑：**

根据@Ricardo Lohmann 的回答，我尝试了 fetch(PDO::FETCH_NUM)，它确实删除了列名，但返回的所有列似乎都是字符串，而不是数字，因为数据实际上是，所以试试这个，给我正确的数据类型 - PDO 的这一部分是否单方面返回字符串？

```
while ($row = $stmt->fetch(PDO::FETCH_NUM)) {
    $array[$x][0] = intval( $row[0] );
    $array[$x][1] = intval( $row[1] );
    $array[$x][2] = intval( $row[2] );
    $x++;
}
return $array; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T16:16:46.247

`PDO::FETCH_NUM`是要走的路，虽然这并不意味着数字列将保持数字，它只意味着您将获得一个索引数组而不是关联数组（因此，它只完成了列名的省略）。

MySQL PDO 驱动程序*总是*返回数字列的字符串，这是[一个已知的错误](https://bugs.php.net/bug.php?id=44341)，但不幸的是，这是 PHP 开发人员公然无视的众多错误之一，即“谢谢，但这不是错误”。

您可以强制`json_encode`对看起来像数字的值使用实际数字：（`json_encode($data, JSON_NUMERIC_CHECK)`自 PHP 5.3.3 起）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:14:46.763

尝试设置 fetch 模式而不是 fetchall，如下所示：

```
return $stmt->fetch(PDO::FETCH_COLUMN); 
```

你可以看看[参考](http://www.php.net/manual/en/pdostatement.setfetchmode.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T17:44:12.440

我发现绕过这个问题的唯一方法（使用 SQLSRV 驱动程序）是让 SQL 将所有数据类型作为字符串发送到 OUTPUT 参数中。然后使用正确的数据类型转换所有值。这对于大数据集来说可能很重。

尽管 PDO 开发人员说这是驱动程序问题（不是他们的错误），但我在使用没有 PDO 的 SQLSRV 驱动程序时从未遇到过这个问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-05T19:59:16.983

您可以按如下方式设置下一个属性：

```
$pdo->setAttribute(PDO::ATTR_STRINGIFY_FETCHES, false);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

该属性`ATTR_STRINGIFY_FETCHES`允许您在获取时将数值转换为字符串。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-03-05T15:36:23.983

我曾希望有一个内置的方法来做到这一点，这就是我执行谷歌搜索的原因：v。

我正在构建我自己的自定义 CMS 应用程序，我认为它是“类似 Drupal”的（我从未使用过 Drupal，但我使用的是基于 Drupal 的自定义系统）。我的意思是我的数据库中有一个表，它基本上描述了其他表中的所有字段，当我从这些其他表中检索字段时，我加载了描述和数据类型我的数据。

例如

**tablex**字段：姓名、年龄、够老

**表说明**：

```
fieldname  |  datatype  |  minlength  |  parent
___________|____________|_____________|________
Name       |  String    |  5          |  tablex
Age        |  Int       |  1          |  tablex
Old Enough |  Boolean   |  1          |  tablex 
```

因此，当我从**tablex**加载数据时，我会在 tabledescription 中查找 parent = 'tablex' 并使用 switch 语句对数据进行数据类型化

```
foreach ( ... ) {
    switch ($desc->datatype) {
       case 'int': (int) $tablex->data;
            break;
    }
}
etc. 
```

# asp.net-mvc - 从服务器导入 LESS

> ID：11128824
> 
> 赞同：3
> 
> 时间：2012-06-20T22:00:41.737
> 
> 标签：asp.net-mvc, less, dotless

在我的 ASP.NET MVC 应用程序中，我有一个返回 LESS 变量的操作。

我想将这些变量导入到我的主 LESS 文件中。

这样做的推荐方法是什么，因为 DotLess 只会导入具有 .less 或 .css 扩展名的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T09:51:56.313

我发现最简单的解决方案是实施`IFileReader`.

下面的实现向任何以“~/assets”为前缀的 LESS 路径发出 HTTP 请求，否则我们使用默认的`FileReader`.

请注意，这是原型代码：

```
public class HttpFileReader : IFileReader
{
    private readonly FileReader inner;

    public HttpFileReader(FileReader inner)
    {
        this.inner = inner;
    }

    public bool DoesFileExist(string fileName)
    {
        if (!fileName.StartsWith("~/assets"))
            return inner.DoesFileExist(fileName);

        using (var client = new CustomWebClient())
        {
            client.HeadOnly = true;
            try
            {
                client.DownloadString(ConvertToAbsoluteUrl(fileName));
                return true;
            }
            catch
            {
                return false;
            }
        }
    }

    public byte[] GetBinaryFileContents(string fileName)
    {
        throw new NotImplementedException();
    }

    public string GetFileContents(string fileName)
    {
        if (!fileName.StartsWith("~/assets"))
            return inner.GetFileContents(fileName);

        using (var client = new CustomWebClient())
        {
            try
            {
                var content = client.DownloadString(ConvertToAbsoluteUrl(fileName));
                return content;
            }
            catch
            {
                return null;
            }
        }
    }

    private static string ConvertToAbsoluteUrl(string virtualPath)
    {
        return new Uri(HttpContext.Current.Request.Url, 
            VirtualPathUtility.ToAbsolute(virtualPath)).AbsoluteUri;
    }

    private class CustomWebClient : WebClient
    {
        public bool HeadOnly { get; set; }
        protected override WebRequest GetWebRequest(Uri address)
        {
            var request = base.GetWebRequest(address);
            if (HeadOnly && request.Method == "GET")
                request.Method = "HEAD";

            return request;
        }
    }
} 
```

要注册阅读器，请在应用程序启动时执行以下操作：

```
var configuration = new WebConfigConfigurationLoader().GetConfiguration();
            configuration.LessSource = typeof(HttpFileReader); 
```

# iphone - 在自定义数字键盘上的按键上点击播放声音

> ID：11128830
> 
> 赞同：0
> 
> 时间：2012-06-20T22:01:26.570
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uidevice

我正在创建一个自定义数字栏并将其放在常规键盘的顶部。现在，当我点击数字键盘中的键时，我希望播放常规的键盘声音。我在按下按钮的委托中使用以下代码。打印日志语句，但我的设备上没有声音。轻按常规键盘上的任意键即可播放声音。我需要启用某些东西吗？

```
- (void)buttonPressed:(id)iSender {
    NSLog(@"Button is pressed");
    [[UIDevice currentDevice] playInputClick];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:26:49.857

引用文档：

> 使用此方法播放标准系统键盘点击以响应用户在自定义输入或键盘附件视图中的点击。只有当用户在“设置”>“声音”中启用了键盘点击，并且只有当输入视图本身启用并可见时，才会播放点击。
> 
> 要为输入点击启用自定义输入或附件视图，请执行以下两个步骤：
> 
> 在您的输入视图类中采用 UIInputViewAudioFeedback 协议。实现 enableInputClicksWhenVisible 委托方法以返回 YES。

听起来该方法作为通用的“播放点击”方法没有用。它与输入视图紧密耦合。

# c# - 如何将可观察集合中的数据从一页移动到另一页？

> ID：11128831
> 
> 赞同：0
> 
> 时间：2012-06-20T22:01:32.233
> 
> 标签：c#, wcf, windows-phone-7

我想将可观察集合中的值从第 1 页传递到第 2 页。如何使用全局变量传递它？

```
public pg1()
{    
    InitializeComponent();
    proxy.FindOrderCompleted += new EventHandler<FindOrderCompletedEventArgs>(proxy_FindOrderCompleted);
    proxy.FindOrderAsync(custemail);
}

void proxy_FindOrderCompleted(object sender, FindOrderCompletedEventArgs e)
{
    listBox1.ItemsSource = e.Result;
    ObservableCollection<Order> Orders = this.listBox1.ItemsSource as ObservableCollection<Order>;
} 
```

在 xmal 将其分配为

```
public ObservableCollection <Order> Orders  
{ 
    get; set; 
}

public List<Order> FindOrder(string custemail, string orderstatus)
        {
            var findorder = from r in order.Orders where (r.CustEmail  == custemail && r.OrderStatus == orderstatus ) select r;
            return findorder.ToList();
        } 
```

如何将其分配给全局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:27:58.173

不确定 FindOrderCompletedEventArgs 是什么，但你应该这样做

```
void proxy_FindOrderCompleted(object sender, FindOrderCompletedEventArgs e)
{
    Orders = new ObservableCollection<Order>(e.Result);
    listBox1.ItemsSource = Orders;
} 
```

# iframe - 龙卷风 iframe src

> ID：11128832
> 
> 赞同：0
> 
> 时间：2012-06-20T22:01:35.617
> 
> 标签：iframe, tornado

我正在尝试通过以下方式使用 iframe：

```
<iframe src="????" width="350" height="500"></iframe> 
```

Tornado 服务器如下所示：

```
class FrameHandler(RequestHandler):
    def get(self):
        user = self.get_argument("username")
        self.set_cookie("user", user)
        out = tableizer(user)
        self.render('messages.html',table=out)

application = tornado.web.Application(
    [
        (r"/frame", FrameHandler),
    ], 
    debug=True,
    template_path=os.path.join(os.path.dirname(__file__), ""),
    static_path=os.path.join(os.path.dirname(__file__), "static"),
) 
```

如何让我的 iframe 显示messages.html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:15:26.277

处理程序看起来不错。你只需要代`????`入

```
<iframe src="????" width="350" height="500"></iframe> 
```

和：

```
<iframe src="/frame?user=whoever" width="350" height="500"></iframe> 
```

# gwt - 如何将自定义选择处理程序添加到单元格表

> ID：11128833
> 
> 赞同：1
> 
> 时间：2012-06-20T22:01:37.953
> 
> 标签：gwt, gwt-2.2-celltable, celltable, gwt-celltable, selectionmodel

我想向单元格表添加一个特殊的选择模型。基本上我想要的功能是在位于左侧的表格上选择一行，相应的表格将在右侧弹出。我知道很多人会将 singleSelectionModel 与 SelectionChangeHandler 一起使用。但是这种方法存在问题。

例如，如果我选择表格上的第 1 行。表格弹出。我通过单击关闭按钮关闭表单。稍后，我再次选择第 1 行，没有触发该事件，因为它是 SelectionChangeHandler。在执行此操作之前，我必须选择其他行。这不好。

所以我认为有几种方法可以做到这一点：

1.  在我选择行后立即取消选择该行。
2.  使用点击处理程序触发事件（弹出表单）
3.  使用其他选择模型和其他选择处理程序来执行此操作。（虽然我对此一无所知）

所以我的问题是，

1.  有谁知道我可以为此使用哪种其他选择处理程序。
2.  如果我在 celltable 上使用 click 处理程序，会有什么问题吗？

我只是想了解更多。因此，任何想法都会受到欢迎。非常感谢。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:50:06.780

使用`NoSelectionModel`. 选择行后，它不会更新表格视图。也就是说，即使选择了同一行，也会触发更改事件。

```
//Here 'Contact' is the datatype of the record
final NoSelectionModel<Contact> selModel = new NoSelectionModel<Contact>();
selModel.addSelectionChangeHandler(new Handler() {
    @Override
    public void onSelectionChange(SelectionChangeEvent event) {
        Contact clickedObject = selModel.getLastSelectedObject();
        GWT.log("Selected " + clickedObject.name);
    }
});
table.setSelectionModel(selModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:08:29.733

我在每个项目中都使用了单元格表。正如你提到的那样，手动取消选择行的更好方法。并使更改css，例如选定单元格表的行在选择后看起来没有改变。

# ios - 将 indexpath 存储在自定义 UITableViewCell 中

> ID：11128834
> 
> 赞同：1
> 
> 时间：2012-06-20T22:01:38.083
> 
> 标签：ios, objective-c, uitableview, cocoa-touch

所以我试图在创建自定义单元格时存储单元格的索引路径

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我在名为“自定义单元格”的类中定义了一个自定义单元格，并向该类添加了一个属性，定义如下：

```
@property (nonatomic, strong) NSIndexPath *indexPath; 
```

在`cellForRowAtIndexPath`我设置索引路径`customCell.indexPath = indexPath.`

当我`NSLog`在下一行时，它返回 null。有人可以解释为什么会这样吗？

**编辑**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *CellIdentifier = @"EditableCell";

EditableCell *editableCell = (EditableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (editableCell == nil) {

    editableCell = [[EditableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

_myTextField = [editableCell textFieldCell];

if (indexPath.section == 0){
    [_myTextField setPlaceholder:@"text"];
    [_myTextField setReturnKeyType:UIReturnKeyNext];
}
else if (indexPath.section == 1){
    [_myTextField setPlaceholder:@"text"];
    [_myTextField setReturnKeyType:UIReturnKeyNext];
}
else {
    [_myTextField setPlaceholder:@"text"];
    [_myTextField setReturnKeyType:UIReturnKeyDone];
}

_myTextField.keyboardType = UIKeyboardTypeDefault;
_myTextField.delegate = self;

return editableCell; 
```

}

我在哪里调用 [self.tableview indexpathforcell:cell]

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField{

if (textField.returnKeyType == UIReturnKeyNext) {

    UITableViewCell* myCell = (UITableViewCell*)textField.superview;
    EditableCell *currentCell = (EditableCell *)myCell;

       NSLog(@"INDEXPATH OF CURRENT CELL: %@",[self.tableView indexPathForCell:currentCell]);   
}     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:08:36.003

您可以使用来确定`indexPath`给定单元格的

```
-[UITableView indexPathForCell:] 
```

如果单元需要知道它自己的`indexPath`：

```
NSIndexPath * myIndexPath = [(UITableView *)self.superview indexPathForCell:self] 
```

但如果是这样，那就不对了！

查看您编辑的帖子，我发现了问题。你需要：

```
UITableViewCell* myCell = (UITableViewCell*)textField.superview.superview 
```

`textField`实际上是单元格的子视图`contentView`。这对我来说似乎总是有点不对劲，所以另一种处理方法是让您的自定义单元格为`UITextFieldDelegate`，然后为您的单元格创建一个委托协议。因此，在单元格内，您将拥有：

```
(BOOL)textFieldShouldReturn:(UITextField *)textField {

    if (textField.returnKeyType == UIReturnKeyNext) {
        [self.delegate customCell: self textFieldDidReturn: textField];
    }     

    return NO;
} 
```

然后在您的**单元格的**委托中，您将获得对单元格和 textField 的引用

# image - 使用 Scrapy 从谷歌搜索中下载图像

> ID：11128835
> 
> 赞同：1
> 
> 时间：2012-06-20T22:01:47.707
> 
> 标签：image, url, search, scrapy

我正在尝试为特定搜索下载谷歌图片。

目前，如果我有网址，我的代码将下载前 10 张图片。

但是，我的问题是：我如何在 google 上获取特定搜索的 url？

当我在 google 上查看任何搜索的 url 时，它看起来非常复杂，似乎很难理解 url 是如何创建的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:07:06.563

```
http://www.google.com/m/search?q=hello&site=images 
```

此 URL 会拉出移动网站，该网站是静态的，更容易从中获取图像。查询的所有部分都是不言自明的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:04:38.697

url 的 &q= 部分是实际的搜索字符串。请注意，某些字符会被转换，例如空格变为加号等。

[通过https://www.google.com/search?q=a+search](https://www.google.com/search?q=a+search)很容易伪造

图片搜索[https://www.google.com/search?q=a+search&tbm=isch](https://www.google.com/search?q=a+search)

# asp.net - 在 ASP.NET 中设置标头以覆盖 IE Intranet 兼容模式

> ID：11128841
> 
> 赞同：3
> 
> 时间：2012-06-20T22:02:41.220
> 
> 标签：asp.net, header, http-headers

我有一个以 IE7 兼容模式加载的 Intranet 站点，除非用户在其 IE8 版本上未选中“在兼容性视图中显示 Intranet 站点”。不幸的是，客户希望检查他们使用的其他网站，所以我需要覆盖这个设置。我已经尝试过元标记，

`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`

但它不会覆盖浏览器设置。但是，**[这个问题](https://stackoverflow.com/questions/2518256/override-intranet-compatibility-mode-ie8)**表明服务器标题确实会覆盖。这是最佳答案中给出的示例代码：

```
<httpProtocol>
  <customHeaders>
    <clear />
    <add name="X-UA-Compatible" value="IE=edge" />
  </customHeaders>
</httpProtocol> 
```

我已经打开了 web.config 并将其放入，`<system.webServer>`但它不起作用。我正在用[fiddler](http://www.fiddler2.com/fiddler2/)观看标题，但它根本没有添加标题。（此外，它仍然被迫进入兼容模式，并且 Javascript 确认`documentMode`是`7`。）我在本地使用 ASP.NET 开发服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:10:45.467

该`<system.webServer>`标签专门用于 IIS（我相信是 7）。它不会影响 Visual Studio 内部使用的 Cassini 服务器。如果您只需要在实时开发环境中担心此问题，请尝试在 IIS 实例上进行测试。否则，您可能想在开发中尝试[IIS Express](http://www.microsoft.com/en-us/download/details.aspx?id=1038)。

# javascript - 如何使用 JavaScript 区分布尔值和字符串返回值？

> ID：11128843
> 
> 赞同：-6
> 
> 时间：2012-06-20T22:02:56.033
> 
> 标签：javascript, boolean

我有一个函数，它返回一个值，如果满足条件，则返回 true，否则返回 false，但如果出现错误，该函数也可以返回字符串消息。

我需要区分正常条件下的真/假布尔值，而不会将字符串值误认为任何一个。我的策略是使用一个函数，该函数在传递布尔输入时将返回一个真正的布尔类型的真/假值，但在传递一个字符串时`parseBoolean()`返回一个不是布尔类型的“假”值。`false`

### 例子

```
function validate(kkk)
{
  //... some check that validates 
  return true;
  //... some check that doesn't validate
  return false;
  //... failure - return explanation
  return 'Error Message jjjjjjjj';
}

function usingit(data)
{
  if(parseBoolean(validate(data)) != false)
  {
    /// the value is Boolean true
  }
  else
  {
    if(parseBoolean(validate(data)) === false)
    {
      /// the value is Boolean false
    }
    else
    {
      /// the value is false but not of a Boolean type 
      /// so we will display it as the error message text.
    }
  }
} 
```

...但我还没有弄清楚如何创建一个`parseBoolean()`以这种方式运行的函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T22:26:51.480

根据这个：

> @Esailija 为什么没有意义？如果是 true 返回 true，如果是 false 返回 false，如果是 'somestring' 也返回 false。得到它？– 注册用户 31 秒前

你要

```
function parseBoolean(value) {
    return typeof value == "boolean" ? value : false;
} 
```

但这显然无法通过厄运的考验。

* * *

此代码通过了您的所有测试：

```
function parseBoolean(bool) {
    return typeof bool == "boolean" ? bool : 0;
}

if( parseBoolean('anystring') == false ) {
    alert("");
}

if( parseBoolean('anystring') !== false ) {
    alert("");
}

if( parseBoolean(true) ) {
    alert('');
}

if( !parseBoolean(false) ) {
    alert('');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T22:12:51.240

什么构成虚假？如果我必须将字符串转换为布尔值，我会引用一个应该转换为 false 的字符串表。

```
var falsableStrings = {
    "fff": true,
    "false": true
}

function isFalseString(str) {
    return ! falsableStrings[str.toLowerCase()]
} 
```

[http://jsfiddle.net/n8dEF/](http://jsfiddle.net/n8dEF/)

另一种方法是使用正则表达式：

```
function isFalseString(str) {
    return ! (str == "" || str.match("(fff|false)"))
} 
```

[http://jsfiddle.net/n8dEF/2/](http://jsfiddle.net/n8dEF/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:08:34.843

是你要找的吗？

```
var parseBooleanGenerator = function(aPerfectString) {
  return function(someStringFromWild) { 
    return aPerfectString === someStringFromWild 
  };
};

var goodString = 'FFF';
var badString = 'FfF';

console.log(parseBooleanGenerator('FFF')(goodString)); // true
console.log(parseBooleanGenerator('FFF')(badString)); // false 
```

... 或者 ...

```
var checkForFFF = parseBooleanGenerator('FFF');
console.log(checkForFFF(goodString)); // true
console.log(checkForFFF(badString)); // false 
```

# python - 使用fabric更改默认postgres用户密码

> ID：11128846
> 
> 赞同：1
> 
> 时间：2012-06-20T22:03:11.587
> 
> 标签：python, fabric

我正在尝试为 postgresql 设置 python 结构，但无法弄清楚如何在提示符下输入新密码。你如何在fabric中设置以下内容：

```
sudo passwd –d postgres
sudo su postgres –c passwd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:17:26.317

**解决方案1：**

从安全的角度来看，我在这里写的是一个糟糕的黑客攻击。它在命令行上提供密码，因此除了玩具工作之外，不应在任何地方使用它：

```
with hide('running', 'stdout', 'stderr'):
    run('echo -e "%s\n%s\n" | sudo passwd %s' % (passwd, passwd, user)) 
```

PS：此解决方案使用较旧的格式化技术。这不应该影响您使用较新的。

**解决方案2：**

Passwd 期望来自标准输入的输入，您可以改为使用 pexpect / expect 来专门完成这项工作，并且比上述方法更好，但并非没有缺陷。

示例 pexpect 程序：

```
child = pexpect.spawn('some command that expects password')
child.expect('Enter password:')  
child.sendline('somepassword')
child.expect('Enter password:')  --- passwd may ask twice
child.sendline('somepassword')
child.expect(pexpect.EOF, timeout=None)
... 
```

# c# - .Net 4 中没有 System.IO.File.ReadLines(file).Count()？

> ID：11128849
> 
> 赞同：6
> 
> 时间：2012-06-20T22:03:18.043
> 
> 标签：c#

我正在尝试读取我在此处找到的文件的行数（stackoverflow），读取大文件中行数的最佳方法是使用以下代码：

```
int count = System.IO.File.ReadLines(file).Count(); 
```

但是，我不能让它编译。有谁知道是什么问题？

> 错误 5 `'System.Collections.Generic.IEnumerable<string>'`不包含“计数”的定义，并且找不到接受第一个类型参数的扩展方法“计数” `'System.Collections.Generic.IEnumerable<string>'`（您是否缺少 using 指令或程序集引用？）

谢谢， 埃亚尔

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T22:06:06.347

`Count<T>()`是 的对象的扩展方法`IEnumerable<T>`。尝试`using`为命名空间添加一条语句`System.Linq`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T22:05:52.917

你能做到吗：

```
int count = File.ReadAllLines(@"C:\filepath\file.txt").Length; 
```

编辑：正如评论中所指出的，这对于大文件可能（将）表现不佳。有关更详细解释原因的类似问题，请查看[确定文本文件中的行数](https://stackoverflow.com/questions/119559/determine-the-number-of-lines-within-a-text-file)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-30T12:07:47.597

这是从文本文件中读取的窗口应用程序行的计数：

```
int linecount = System.IO.File.ReadAllLines(@"D:\yfile.txt").Length;
MessageBox.Show(linecount != null && (!string.IsNullOrEmpty(linecount.ToString())) ? linecount.ToString() : "Unable To Count"); 
```

# iphone - 带有 OS X 10.5.8 的 iBook G4 (PowerPC G4) 上的 iPhone SDK？

> ID：11128850
> 
> 赞同：0
> 
> 时间：2012-06-20T22:03:18.107
> 
> 标签：iphone, xcode, sdk, powerpc

是否可以在带有 PowerPC G4 CPU 和 MAC OS X 10.5.8 的 iBook G4 上安装 xCode 和 iPhone SDK？我正在尝试安装多个版本但不成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:10:23.573

你不能。SDK 仅适用于英特尔。它不包含 PowerPC 代码。

是时候让您购买新的 Mac 了。对不起。

# css - CSS - Div 内的 Div

> ID：11128853
> 
> 赞同：2
> 
> 时间：2012-06-20T22:03:38.207
> 
> 标签：css

我目前有以下代码。

```
<div id="1">
 <div id="2">
  <div id="3">
  </div>
 </div>
</div> 
```

但我似乎无法弄清楚我如何选择 div 3 (??)。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T22:08:03.570

在 HTML5 之外，`id`以数字开头的 HTML 是无效的；但是使用 CSS，您通常可以使用以下内容选择该 div：

正如[Guffa](https://stackoverflow.com/a/11128956/82548)所发布的，`#3` `id`此答案中基于 - 的选择器是错误的，`#3`需要转义`#\33`（尽管我不会进一步解释（请参阅他的答案！），以避免无耻的抄袭/重复）

```
#3 {
    /* CSS */
} 
```

这种方法使用`id`基于 - 的选择器（文档中只有*一个*元素可以使用给定的，因此这是一个唯一标识符），并且是 id-name 以符号`id`开头。`#`

但是，以下*内容*仍然有效：

```
div > div > div {
    /* CSS */
} 
```

这种方法使用直接子`>`组合器，并且将选择 a 作为 a`div`的直接子`div`元素（两者之间没有中间元素），它本身就是另一个元素的直接子`div`元素。

参考：

*   [CSS 选择器，第 1 级](http://www.w3.org/TR/REC-CSS1/)。
*   [CSS 选择器，第 2 级](http://www.w3.org/TR/CSS2/selector.html)。
*   [CSS 选择器，第 3 级](http://www.w3.org/TR/selectors/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T22:12:38.430

当你有一个以数字开头的标识符时，你必须使用字符转义来编写 CSS 规则来匹配它：

```
#\33 { ... } 
```

`33`是字符的十六进制代码`3`。

如果可能，您应该避免使用数字形式的 id。使用它变得复杂，无论是从 CSS 还是从 Javascript。

# php - 用 PHP 编写的顶级内容系统

> ID：11128859
> 
> 赞同：-3
> 
> 时间：2012-06-20T22:03:49.620
> 
> 标签：php, design-patterns

我想写一个顶级文章系统。

我想按查看次数过滤一些内容（文章/等）。

如果我`views=views+1`每次用户查看该链接时都插入数据库，我认为这很慢，而且这是一种不好的做法。

另一个这样做的网站的例子是 YouTube。它仅在特定时间间隔更新此表，因此视图不会实时更新。这是一个很好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:54:46.733

您可以创建一个日志（简单的文本文件 / xml / Json ……）来存储视图计数并执行解析文件并将结果插入数据库的工作。

该作业可以按时间间隔运行或检查系统是否有空闲处理器。

在我看来，使用 RAM 存储敏感数据，因为这个计数（系统的重要部分）似乎有点不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:07:06.447

创建第二个视图表；您还可以使用第二个表来过滤“重复”视图（也由 cookie 支持 - 删除重复视图不是一个完美的操作）。

至于“慢”，我在许多用户众多的网站上都使用了这种方法。存储和聚合数据是数据库的工作，因此请使用它们的力量。

然后您可以使用第二张表来汇总视图，或者定期汇总数据并将运行总计存储在主表中，清除第二张表以节省空间。我通常保留所有数据，但为了速度而士气低落。

# java - Socket 上的 Java 流属性

> ID：11128862
> 
> 赞同：2
> 
> 时间：2012-06-20T22:04:09.927
> 
> 标签：java, sockets, properties

首先，这是一个家庭作业问题。话虽如此，我被困住了。通过 Sockets 搜索 Java 属性会导致很多不相关的事情。

我正在尝试通过套接字传输属性对象。API 说它可以用 Stream 或 Writer/Reader 完成，但我无法让它工作。我可以手动完成，也就是说，如果我逐行读取文件并通过 PrintWriter 传递它。

在客户端，我大致有：

```
socket = new Socket(host, port);
outStream = socket.getOutputStream();
out = new PrintWriter(outStream, true);
in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
reader = new BufferedReader(new FileReader(file));
...
props.load(reader);
props.store(out, null); 
```

在服务器端，接收位如下所示：

```
out = new PrintWriter(sock.getOutputStream(), true);
inStream = sock.getInputStream();
in = new BufferedReader( new InputStreamReader(inStream));
...
props.load(in); // hangs
// doesn't get to code here... 
```

在这种情况下，它挂在 props.load(in) 处。我没有执行 props.load(in)，而是逐行读取它以确保 props.store(out, null) 正常工作，并且数据看起来像是在传输。

有什么关于加载/存储的东西我不明白，还是流/写入器/读取器有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:22:41.560

我认为这将回答这个问题以及[如何识别 Java 套接字中的 EOF？](https://stackoverflow.com/questions/7599742/how-do-i-recognize-eof-in-java-sockets)以及[我可以发送什么到 InputStream 以表示已达到 EOF？](https://stackoverflow.com/questions/6569995/what-can-i-send-to-an-inputstream-to-signify-eof-has-been-reached)

我有类似的问题；我的困境是我有一个客户端/服务器请求-响应协议，其中一个请求包括从客户端发送的流，使用`clientProps.store()`. 服务器端对应`serverProps.load()`的永远不会返回，因为它需要查看“文件结尾”——这在 Java 中意味着客户端必须关闭它的流；导致套接字连接关闭。不想要的结果是，我不仅不能保持套接字打开以进行无限期的请求-响应交换，我什至不能保持它打开以供服务器发送回复。

我讨厌 Java 让我这样做，更因为 Properties.load() 的文档说：

> 此方法返回后，指定的流保持打开状态。

如果它通过看到流关闭来检测文件结束，那永远不会发生！无论如何，现在，我仍然喜欢 Java，因为它允许我使用这个解决方案（如果您对正在流式传输的数据有任何特殊编码或本地化，则可能没有用）：

我在客户端使用了这个：

```
 PrintWriter toServer;
    Properties clientProps = new Properties();

//  ... code to populate the properties and to 
//      construct toServer from the socket ...

    clientProps.store(toServer, null);
    toServer.write('\u001A'); // this is an old-school ASCII end-of-file
    toServer.flush(); 
```

在服务器端，我扩展了 Reader 以检测 1A 并返回 -1 （以便`serverProps.load()`以正常方式了解文件结尾（通过查看从调用返回的 -1 `read()`），但在此*之下*，流和插座保持打开状态。

```
 BufferedReader fromClient;
    Properties serverProps = new Properties();

// ... code to construct fromClient from the socket ...

    serverProps.load (new PropReader (fromClient));

/////

    private static class PropReader extends Reader {

    BufferedReader src;
    boolean eof=false;

    private PropReader(BufferedReader fromClient) {
        super();
        src=fromClient;
    }

    @Override
    public int read(char[] cbuf, int off, int len) throws IOException {
        int inCount;

        if (!eof) {
            inCount = src.read(cbuf, off, len);

            if (inCount > 0) {
                // we read a buffer... look at the end for the EOF that the client used to mark the end of file
                if (cbuf[off+inCount-1] == '\u001A') {
                    --inCount; // don't send eof with the data
                    eof = true; // next time... we'll return -1
                }
            }
        } else {
            inCount = -1;
        }

        return inCount;
    }

    @Override
    public void close() throws IOException {
        src.close();
    } 
```

# javascript - 为 url 上的某些 div 传递 jquery 上滑命令？

> ID：11128864
> 
> 赞同：0
> 
> 时间：2012-06-20T22:04:22.977
> 
> 标签：javascript, jquery, slidetoggle

我在 drupal 网站上使用 jquery 向上/向下滑动一些 div。我想知道是否可以将向上滑动命令传递给 url 上的特定 div。

示例 domain.com/?q=node/13/#div1&slideup

非常感谢您的帮助，David D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:54:36.773

谢谢你的帮助。

我已经实施了一段时间的 Cecchi 建议，但一段时间后我开始需要更多的灵活性（根据主 div 更改其他两个 div 的类），所以我做了一些更改。

我正在使用以下内容：

```
$(document).ready(function(){
   var url = window.location.pathname.split('&');
   var id = url[1]
   $("#div" + id).slideDown("slow");
   $("#button_slide" + id).addClass('button_slide_active');
   $("#product_frame" + id).addClass('product_frame_active');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:12:58.587

您可以访问`window.location.hash`以获取 URL 的“div1&slideup”部分。如果您在 onLoad 事件处理程序中执行此操作，您随后可以做任何您想做的事情。

这里有一些（未经测试的）示例 jQuery 代码给你一个想法（技术上它是 onReady，不是 onLoad，但相同的区别）：

```
$(function() {
    var hash = window.location.hash;
    var divId = hash.split('&')[0];
    $(divId).slideUp();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T22:17:36.770

Sure, you'll have to parse the location.hash property and make sure you aren't using the hash for anything else (i.e. actual anchors):

```
$(document).ready(function() {
  if(location.hash.substr(-8) === '&slideup') {
    $(location.hash.substr(0, location.hash.indexOf('&'))).slideUp();
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T00:00:13.247

好吧，现在我开始理解这个逻辑，我想清理一点我的javascript代码......

也许你可以给我一些建议。

我正在使用以下代码直到 div10，我希望所有 div 只包含一个代码实例：

```
$(document).ready(function(){
$("#button_slide1,#link_1,#link_1_1,#link_1_2").click(function(){
$("#div2, #div3, #div4, #div5, #div6, #div7, #div8, #div9, #div10").slideUp("slow");
$("#button_slide2, #button_slide3, #button_slide4, #button_slide5, #button_slide6, #button_slide7, #button_slide8, #button_slide9, #button_slide10").removeClass('botao-active');
$("#product_frame2, #product_frame3, #product_frame4, #product_frame5, #product_frame6, #product_frame7, #product_frame8, #product_frame9, #product_frame10").removeClass("product_frameactive");

$("#div1").slideToggle("slow");
$("#button_slide1").toggleClass("botao-active");
$("#product_frame1").toggleClass("product_frameactive"); return false;
});
});

$(document).ready(function(){
$("#button_slide2,#link_2,#link_2_1").click(function(){
$("#div1, #div3, #div4, #div5, #div6, #div7, #div8, #div9, #div10").slideUp("slow");
$("#button_slide1, #button_slide3, #button_slide4, #button_slide5, #button_slide6, #button_slide7, #button_slide8, #button_slide9, #button_slide10").removeClass('botao-active');
$("#product_frame1, #product_frame3, #product_frame4, #product_frame5, #product_frame6, #product_frame7, #product_frame8, #product_frame9, #product_frame10").removeClass("product_frameactive");

$("#div2").slideToggle("slow");
$("#button_slide2").toggleClass("botao-active");
$("#product_frame2").toggleClass("product_frameactive"); return false;
});
});

$(document).ready(function(){
$("#button_slide3,#link_3,#link_3_1").click(function(){
$("#div1, #div2, #div4, #div5, #div6, #div7, #div8, #div9, #div10").slideUp("slow");
$("#button_slide1, #button_slide2, #button_slide4, #button_slide5, #button_slide6, #button_slide7,  #button_slide8, #button_slide9, #button_slide10").removeClass('botao-active');
$("#product_frame1, #product_frame2, #product_frame4, #product_frame5, #product_frame6, #product_frame7,  #product_frame8, #product_frame9, #product_frame10").removeClass("product_frameactive");

$("#div3").slideToggle("slow");
$("#button_slide3").toggleClass("botao-active");
$("#product_frame3").toggleClass("product_frameactive"); return false;
});
}); 
```

# ruby-on-rails-3 - Rails 3 按孙子计数排序记录

> ID：11128866
> 
> 赞同：1
> 
> 时间：2012-06-20T22:04:46.727
> 
> 标签：ruby-on-rails-3, postgresql, count, sql-order-by, grandchild

我正在尝试进行一些相当复杂的记录排序，但我遇到了一些麻烦。我有三个模型：

```
 class User < ActiveRecord::Base

    has_many :registers
    has_many :results, :through => :registers

    #Find all the Users that exist as registrants for a tournament
    scope :with_tournament_entrees, :include => :registers, :conditions => "registers.id IS NOT NULL"

end 
```

登记

```
class Register < ActiveRecord::Base
  belongs_to :user
  has_many :results
end 
```

结果

```
class Result < ActiveRecord::Base
  belongs_to :register 
end 
```

现在在锦标赛结果页面上，我列出了所有用户的总获胜次数（获胜次数是通过结果表计算的）。首先，我通过以下查询找到所有参加锦标赛的用户：

```
User.with_tournament_entrees 
```

有了这个，我可以简单地遍历返回的用户并使用以下查询每个单独的记录以检索每个用户“ **Total Wins** ”：

```
user.results.where("win = true").count() 
```

但是，我还想更进一步，按所有用户的“**总胜数**”排序，这是我能想到的最好的：

```
User.with_tournament_entrees.select('SELECT *, 
                                    (SELECT count(*)  
                                     FROM results 
                                     INNER JOIN "registers" 
                                     ON "results"."register_id" = "registers"."id" 
                                     WHERE "registers"."user_id" = "users.id" 
                                     AND (win = true)
                                    ) AS total_wins 
                                     FROM users ORDER BY total_wins DESC') 
```

我认为它很接近，但它实际上并没有按照我的指示按降序排列**total_wins 。**我正在使用 PostgreSQL 数据库。

**编辑**：

实际上发生了三个选择，第一个选择`User.with_tournament_entries`只是在 User 表上执行快速过滤。如果我忽略它并尝试

```
SELECT *, (SELECT count(*) FROM results INNER JOIN "registers" ON "results"."register_id" = "registers"."id" WHERE "registers"."user_id" = "users.id" AND (win = true)) AS total_wins FROM users ORDER BY total_wins DESC; 
```

它在 PSQL 和 ERB 控制台中都失败了。我收到错误消息：

`PGError: ERROR: column "users.id" does not exist`

我认为这是因为内部选择发生在外部选择之前，因此它无法事先访问用户 ID。不确定如何在内部选择发生之前授予它对所有用户 ID 的访问权限，但是当我执行`User.with_tournament_entires`查询时，这不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T23:53:12.190

在您的 SQL 中，`"users.id"`引用错误 - 它告诉 Postgres 查找名为“users.id”的列。

它应该是`"users"."id"`，或者，只是`users.id`（如果你的表/列名与 postgres 关键字冲突，或者有标点符号或其他不寻常的东西，你只需要引用它）。

# magento - Magento 警告：get_class() 期望参数 1 是对象，给定的布尔值

> ID：11128868
> 
> 赞同：0
> 
> 时间：2012-06-20T22:04:48.407
> 
> 标签：magento

我正在关注 Magento 开发教程*Magento for Developers：第 5 部分 - Magento 模型和 ORM 基础知识*

当我尝试回显类名时，出现以下错误。PS：我正在使用 Magento 1.7

```
Warning: get_class() expects parameter 1 to be object, boolean given  in C:\xampp\htdocs\magento\app\code\local\Microdatanet\Weblog\controllers\IndexController.php on line 19

#0 [internal function]: mageCoreErrorHandler(2, 'get_class() exp...', 'C:\xampp\htdocs...', 19, Array)
#1 C:\xampp\htdocs\magento\app\code\local\Microdatanet\Weblog\controllers\IndexController.php(19): get_class(false)
#2 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Action.php(419): Microdatanet_Weblog_IndexController->testModelAction()
#3 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('testModel')
#4 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#5 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Model\App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#6 C:\xampp\htdocs\magento\app\Mage.php(683): Mage_Core_Model_App->run(Array)
#7 C:\xampp\htdocs\magento\index.php(87): Mage::run('', 'store')
#8 {main} 
```

文件：app\code\local\Microdatanet\Weblog\controllers\IndexController.php

```
<?php
class Microdatanet_Weblog_IndexController extends Mage_Core_Controller_Front_Action {
    public function testModelAction(){   
       $blogpost = Mage::getModel('weblog/blogpost');  
       echo get_class($blogpost); 
    }
}
?> 
```

文件：app\code\local\Microdatanet\Weblog\etc\config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Microdatanet_Weblog>
            <version>0.1.0</version>
        </Microdatanet_Weblog>
    </modules>

    <global>
        <models>
            <weblog>
                <class>Microdatanet_Weblog_Model</class>
                <resourceModel>weblog_mysql4</resourceModel>
            </weblog>
            <weblog_mysql4>
                <class>Microdatanet_Weblog_Model_Mysql4</class>
            </weblog_mysql4>
        </models>
    </global>

    <frontend>
        <routers>
            <weblog>
                <use>standard</use>
                <args>
                    <module>Microdatanet_Weblog</module>
                    <frontName>weblog</frontName>
                </args>
            </weblog>
        </routers>
    </frontend>
</config> 
```

文件：app\code\local\Microdatanet\Weblog\Model\Blogpost.php

```
<?php
class Mircodatanet_Weblog_Model_Blogpost extends Mage_Core_Model_Abstract 
{
    protected function _construct()
    {
        $this->_init('weblog/blogpost');
    }   
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:31:51.990

当一个类无法通过 Magento 工厂方法实例化时，有多种调试方法。鉴于 Magento 大量使用配置及其特定约定，学习如何在 Magento 中执行鉴别诊断非常重要。

Magento 中的所有类定义都（应该）通过自动加载器（`Varien_Autoload`）加载，该自动加载器在以下位置调用并依赖于包含路径设置`app/Mage.php`：

```
$paths[] = BP . DS . 'app' . DS . 'code' . DS . 'local';
$paths[] = BP . DS . 'app' . DS . 'code' . DS . 'community';
$paths[] = BP . DS . 'app' . DS . 'code' . DS . 'core';
$paths[] = BP . DS . 'lib';

$appPath = implode(PS, $paths);
set_include_path($appPath . PS . Mage::registry('original_include_path'));
include_once "Mage/Core/functions.php";
include_once "Varien/Autoload.php";

Varien_Autoload::register(); 
```

一旦发生这种情况，PHP 查找类定义所需要的只是类名与相对于上述包含路径的文件路径相匹配。这种类型的自动加载方案在 PHP 项目中很普遍。

这提出了第一个测试策略：直接调用类。在控制器操作或测试文件中，执行以下操作：

```
$obj = new Microdatanet_Weblog_Model_Blogpost; 
```

如果 PHP 找不到类定义，那么这将引发致命错误。如果可以找到类定义，那很好，有两件事是正确的：给定传递给的类名，文件路径是正确的`new`，并且文件内部的类名是正确的`Blogpost.php`。

同样，这是当今 PHP 中典型的自动加载方案。Magento 所做的是`build`根据 XML 中的一些信息对类名使用一些方法。仅供参考，这种工厂方法方法只提供两个有用的目的：允许运行时类名重写，以及在注册表中注册单个实例。

假设可以像上面那样调用该类，如果`Mage::getModel('weblog/blogpost')`不返回类实例，则问题必须出在配置上。出现这种情况通常有以下三种原因：模块配置没有被包含，模块配置格式错误，或者配置被解析但里面的信息不可用。

那么，如何鉴别诊断类组配置问题呢？首先，确保首先包含和解析模块配置：通过不匹配的标签或其他无法解析的语法来破坏 XML。刷新或禁用配置缓存，系统会抛出解析错误。如果不是，则发生了以下三种情况之一：模块未正确激活`app/etc/modules/[declaration file].xml`，模块的 config.xml 文件在错误的位置，或者系统正在抑制错误！在测试脚本中很容易解决所有这些问题：

```
<?php
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors',1);

include 'app/Mage.php';

Mage::setIsDeveloperMode(true);

Mage::app();

var_dump(`Mage::getModel('weblog/blogpost')`); 
```

重要的一点是对 的调用`setIsDeveloperMode()`，因为这将导致 Magento 输出通常会抑制的错误。

如果此时没有抛出解析错误，那么问题一定是模块 config.xml 中的 xpath 或值不正确。

# sql - 额外行的Linq联合不是来自表

> ID：11128871
> 
> 赞同：0
> 
> 时间：2012-06-20T22:05:06.893
> 
> 标签：sql, vb.net, linq

VB例子请

我需要从 linq 返回与使用 SQL 相同的结果

SELECT DISTINCT Area, Region FROM dbo.Regions Union SELECT null,'All' Order by 1,2

我用它来显示组合框中的“全部”选择

我当前的 linq 指向一个为我执行联合的视图，但我想知道如何在 linq 中正确执行此操作。我不知道如何为 null,'All' 值合并一行。

```
 Public Shared Function GetRegions(ByVal Area As String) As IEnumerable

        Dim DB As New SiteDBDataContext
        Return From values In DB.uv_Areas _
            Where values.Area = Area Or Area = "" Or values.Area Is Nothing _
            Order By values.Region _
            Select values.Area, values,Region

    End Function 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:47:00.627

您不能使用 Linq to SQL 或实体框架在数据库中执行此操作，但您可以使用 Linq to Objects 在内存中执行此操作：

```
Public Shared Function GetRegions(ByVal Area As String) As IEnumerable

    Dim DB As New SiteDBDataContext
    Dim query = _
        From values In DB.uv_Areas _
        Where values.Area = Area Or Area = "" Or values.Area Is Nothing _
        Order By values.Region _
        Select New With { values.Area, values.Region }

    Dim all = { New With { .Area = DirectCast(Nothing, String), .Region = "All } }
    Return all.Concat(query)

End Function 
```

# c# - LINQ 中的 For 循环等价物

> ID：11128872
> 
> 赞同：3
> 
> 时间：2012-06-20T22:05:11.403
> 
> 标签：c#, .net, linq, c#-4.0

我是 LINQ 的新手。

`playerData`是一个`list<DataAccess.Team>`，我想`playerViewModelList`用来自 的数据初始化另一个列表`playerData`。

我试过了`foreach`。

```
 foreach (DataAccess.Team dataTeam in playerData)
 {
     playerViewModelList.Add(new PlayersViewModel
     {
         PicPath = dataTeam.Tied.ToString(),
         PlayerID = (int)dataTeam.ID,
         PlayerName = dataTeam.TeamName
     });
  } 
```

是否可以使用 LINQ 实现相同的目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T22:08:55.827

[`Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)在这种情况下是等价的：

```
playerViewModelList = playerData.Select(dataTeam => new PlayersViewModel
                                        {
                                            PicPath = dataTeam.Tied.ToString(),
                                            PlayerID = (int)dataTeam.ID,
                                            PlayerName = dataTeam.TeamName
                                        }).ToList(); 
```

当然，这假设`playerViewModelList`是一个`List<PlayersViewModel>`或类似的东西。如果你不能覆盖`playerViewModelList`，就坚持`foreach`循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T22:10:07.130

```
playerData.ForEach(d => playerViewModelList.Add(new PlayersViewModel {
    PicPath = d.Tied.ToString(),
    PlayerID = (int)d.ID,
    PlayerName = d.TeamName
})); 
```

或者

```
playerViewModelList.AddRange(playerData.Select(d => new PlayersViewModel {
    PicPath = d.Tied.ToString(),
    PlayerID = (int)d.ID,
    PlayerName = d.TeamName
})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:40:12.817

或者，正如您`List<>`在双方所拥有的那样：

```
 playerViewModelList = playerData.ConvertAll(dataTeam => new PlayersViewModel
  {
    PicPath = dataTeam.Tied.ToString(),
    PlayerID = (int)dataTeam.ID,
    PlayerName = dataTeam.TeamName
  }); 
```

# .net - WCF 数据服务运行时 EDMX

> ID：11128876
> 
> 赞同：0
> 
> 时间：2012-06-20T22:05:46.727
> 
> 标签：.net, wcf, wcf-data-services

我正在寻找的东西可能并不容易获得。如果是这样，请告诉我。

有一个应用程序，角色中的用户可以动态添加字段。字段用于对文档进行分类。

对于字符串，只有一个（静态模式）表，其中 pk 作为 rowID、fieldID 和值的非键字段。例如 fieldID = 1 是主题，fieldID = 2 是作者。因此可以在不更改数据库架构的情况下添加用户字段。主题 = 映射到 TSQL（fieldID=1 和 Value='Mapping'）

主界面是一个 UI，但也有一个用于将搜索结果（字段行）导出到 XML 的按钮。它很受欢迎，并希望将其扩展到 ODATA 类型的访问。

想添加一个 WCF 数据服务，但要公开具有 Subject 和 Author 属性的实体和 ...。阅读 EntityObject Generator 但似乎需要更新参考。我需要的是在运行时构建和读取 EDMX，然后是一个将 Subject="Mapping" 映射到（fieldID=1 和 value="Mapping"）的工具。

希望我已经描述了我在寻找什么。不寻找规定类型的答案。更像是这个工具应该让你到达那里，或者不，它只是不能那样工作。

我对 ODATA 或 WCF 数据服务了解不多，但如果看起来有办法让这项工作我会学习它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:20:34.830

由于似乎需要根据数据库中的字段行生成具有动态属性的实体，因此无法使用内置的 EF 或反射提供程序来完成（因为两者都依赖于静态定义的 CLR 类型来定义实体）。

解决此问题的方法是实现本博客系列中所述的自定义提供程序：http: [//blogs.msdn.com/b/alexj/archive/2010/01/07/data-service-providers-getting-started。 aspx](http://blogs.msdn.com/b/alexj/archive/2010/01/07/data-service-providers-getting-started.aspx) 即无类型的自定义提供程序。

# maven-plugin - 执行 javac -s 失败

> ID：11128877
> 
> 赞同：1
> 
> 时间：2012-06-20T22:05:46.997
> 
> 标签：maven-plugin

```
 Projects to build: [MavenProject: com.cisco.hmp:HMP:1.0 @ C:\Program Files  (x86)\Jenkins\jobs\HMP-R2\workspace\CCI\Applications\eCustomer\HMP\pom.xml]
[JENKINS] Archiving C:\Program Files (x86)\Jenkins\jobs\HMP-R2\workspace\CCI\Applications\eCustomer\HMP\pom.xml to C:\Program Files (x86)\Jenkins\jobs\HMP-R2\modules\com.cisco.hmp$HMP\builds\2012-06-20_14-40- 11\archive\com.cisco.hmp\HMP\1.0\HMP-1.0.pom
Waiting for Jenkins to finish collecting data
mavenExecutionResult exceptions not empty
message : Failed to execute goal org.apache.maven.plugins:maven-compiler-    plugin:2.3.2:compile (default-compile) on project HMP: Compilation failure
Failure executing javac, but could not parse the error:
javac: invalid flag: -s
Usage: javac <options> <source files>
where possible options include:
-g                         Generate all debugging info
-g:none                    Generate no debugging info
-g:{lines,vars,source}     Generate only some debugging info
-nowarn                    Generate no warnings
-verbose                   Output messages about what the compiler is doing
-deprecation               Output source locations where deprecated APIs are used
-classpath <path>          Specify where to find user class files
-cp <path>                 Specify where to find user class files
-sourcepath <path>         Specify where to find input source files
-bootclasspath <path>      Override location of bootstrap class files
-extdirs <dirs>            Override location of installed extensions
-endorseddirs <dirs>       Override location of endorsed standards path
-d <directory>             Specify where to place generated class files
-encoding <encoding>       Specify character encoding used by source files
-source <release>          Provide source compatibility with specified release
-target <release>          Generate class files for specific VM version
-version                   Version information
-help                      Print a synopsis of standard options
-X                         Print a synopsis of nonstandard options
-J<flag>                   Pass <flag> directly to the runtime system 
```

我是否必须更改 POM 文件中的某些内容？

```
<plugin>
<artifactId>maven-compiler-plugin</artifactId>
<version>2.3.2</version>
<configuration>
   <source>1.6</source>
   <target>1.6</target>
</configuration>
</plugin> 
```

我确保 JDK 位于环境变量中的路径变量中，并且我正在 Jenkins 中构建它，并且我已将项目设为参数化构建，并且我提供的参数是 JDK 的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T11:04:27.050

在评论中回答：

> 我通过重新安装jdk让它工作了。– Ronak Shah 2012 年 6 月 27 日在 18:40

# php - PHP从URL制定路径

> ID：11128891
> 
> 赞同：0
> 
> 时间：2012-06-20T22:07:12.370
> 
> 标签：php, mysql, uri

使用 .htaccess 将所有地址重写为 index.php

然后 Index.php 需要确定要包含的文件。目前它在“/”上爆炸并执行 foreach 以找出哪个文件。这会导致错误。

首先我们得到 URI。

如果有一个地址，例如。`localhost/next-page`然后我们想要包含一个具有该名称和扩展名 PHP 的文件，并为as和as`include('content/'.$post.'.php');`提供全局变量`$table``'PAGES'``$post``'next-page'`

如果有两个，那么第一个应该被认为是 $table，第二个应该被认为是 $post，并且要包含的文件应该是`include('content/single-'.$post.'.php');`

我们如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:13:17.710

首先，您需要[隔离 URL 的相关部分](http://php.net/manual/en/function.parse-url.php)（在这种情况下，这可能是路径，尽管没有您的重写规则，我们不知道）。然后：

```
$parts = explode('/', $path);
switch(count($parts)) {
    case 1:
        // set your globals (why are you using globals????)
        include('content/'.$parts[0].'.php');
        break;
    case 2:
        // do whatever you need with $parts[0] and $parts[1]
        break;
    // etc
} 
```

如果某些案例之间存在显着相似性，您可以在做一些初步工作以使情况正常化后允许从一个案例到下一个案例，例如

```
 case 1:
        array_unshift($parts, 'PAGES'); // now $parts will have two elements
        // intentional fall-through
    case 2:
        // do whatever you need with $parts[0] and $parts[1]
        break; 
```

最后：如果你需要对里面的项目做很多事情`$parts`，你可以给它们命名，使代码更易读，使用以下[`list`](http://www.php.net/manual/en/function.list.php)结构：

```
 case 2:
        list($table, $post) = $parts;
        // carry on as before but now $table == $parts[0] and $post == $parts[1] 
```

# c++ - 使用 C++ 输入的 Unicode 字符的索引和直方图

> ID：11128893
> 
> 赞同：3
> 
> 时间：2012-06-20T22:07:23.150
> 
> 标签：c++, unicode, character, codecvt

计算每个符号的出现次数以及它们在文本、单词或行中出现的位置 我有一个类似许多语言的单词列表。

我正在尝试做的是计算每个字符的出现次数以及它们在文本中的位置或常见位置。如果有可能计算音节的常见数量也会有帮助。

```
sommige
disa
بَعْض - ba'th
mi qani - մի քանի
bəzi
batzuk
nyeykі/nyeykaya/nyeykaye/nyeykіya - нейкі/нейкая/нейкае/нейкія
kisu - কিসু
afouhe - بعض
neki
alguns
njakoj - някой
一些
algú/alguns/alguna/algunes
neki
někteří
nogle
berekhey āz - برخی از
een paar
kam - كام
some
iuj
mõned
berekhey āz - برخی از
ilan
joitakin
sommige
certains
algúns
ramdenime - რამდენიმე
einige
peripou - περίπου
keṭelāk - કેટલાક 
wasu
kèk
khemeh - כמה
kuch - कुछ
néhány
sumir
beberapa
roinnt
alcuni
ikutsu ka no - いくつかの
kelavu
មួយចំនួន
조금 - jo geum
هەندێک
aliquis
daži
keli
nekoi - некои
misy
beberapa
ഏതാനും
xi
yī xiē  - 一些
kaahi - कांही
neki
shwiya - بعض
kehi - केही
enkelte
gari
berekhey āz - برخی از
b'eda - بعضی
kilka
ਕਈ
alguns
câţiva/câteva
некоторые - nekotorыe

some
neki - неки
samahara - සමහර
niektorí
nekaj
algunos
baadhi
några
ilan
yakchand - якчанд
konjam - கொஞ்சம்
yan
konni - కొన్ని
บาง - baang
bazı
dejakі - деякі
chened - چند
ba'zi, qandaydir
một số
rhai
עטלעכע
die
okumbalwa 
```

这是当前的代码 sehe 使它与 unicode 一起使用

```
//#define PREFER_BOOST
#include <iostream>
#include <fstream>
#include <string>
#include <map>
#include <istream>
#include <algorithm>
#include <iterator>
#ifdef PREFER_BOOST
#include <boost/locale.hpp>
#endif

using namespace std;

std::map<wchar_t, int> letterCount;
struct Counter
{
    void operator()(wchar_t  item) 
    { 
        if ( !std::isspace(item) )
            ++letterCount[std::tolower(item)]; //remove tolower if you want case-sensitive solution!
    }
};

int main()
{
    std::setlocale(LC_ALL, "en_US.UTF-8");
    wifstream input("input.txt");

#ifdef PREFER_BOOST 
    boost::locale::generator gen;
    std::locale loc = gen("en_US.UTF-8"); 
#else
    std::locale loc("en_US.UTF-8");
#endif
    input.imbue(loc);
    wcout.imbue(loc);

    istreambuf_iterator<wchar_t> start(input), end;
    std::for_each(start, end, Counter());

    for (std::map<wchar_t, int>::iterator it = letterCount.begin(); it != letterCount.end(); ++it)
    {
        wcout << it->first <<" : "<< it->second << endl;
    }
} 
```

这是我的原始代码

```
 #include <iostream>
  #include <cctype>
 #include <fstream>
#include <string>
 #include <map>
  #include <istream>
   #include <vector>
 #include <list>
 #include <algorithm>
#include <iterator>

using namespace std;
 struct letter_only: std::ctype<char> 
 {
    letter_only(): std::ctype<char>(get_table()) {}

    static std::ctype_base::mask const* get_table()
    {
       static std::vector<std::ctype_base::mask> 
             rc(std::ctype<char>::table_size,std::ctype_base::space);

       std::fill(&rc['A'], &rc['z'+1], std::ctype_base::alpha);
       return &rc[0];
    }
 };

struct Counter
{
    std::map<char, int> letterCount;
    void operator()(char  item) 
    { 
       if ( item != std::ctype_base::space)
         ++letterCount[tolower(item)]; //remove tolower if you want case-sensitive solution!
    }
    operator std::map<char, int>() { return letterCount ; }
};

int main()
{
     ifstream input;
     input.imbue(std::locale(std::locale(), new letter_only())); //enable reading only leters only!
     input.open("T");
     istream_iterator<char> start(input);
     istream_iterator<char> end;
     std::map<char, int> letterCount = std::for_each(start, end, Counter());
     for (std::map<char, int>::iterator it = letterCount.begin(); it != letterCount.end(); ++it)
     {
          cout << it->first <<" : "<< it->second << endl;
     }
 } 
```

我试图得到的例子

```
к : 10 (2,5) (1,5,8) (2,7) (1,3,5) 
```

找到的字母 K 然后找到它的出现次数 10 然后在每个单词中找到它的位置，如前所述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:34:28.870

这就是我得到的，它似乎在我的机器¹上运行良好。

```
//#define PREFER_BOOST
#include <iostream>
#include <fstream>
#include <string>
#include <map>
#include <istream>
#include <algorithm>
#include <iterator>
#ifdef PREFER_BOOST
#include <boost/locale.hpp>
#endif

using namespace std;

std::map<wchar_t, int> letterCount;
struct Counter
{
    void operator()(wchar_t  item) 
    { 
        if ( !std::isspace(item) )
            ++letterCount[std::tolower(item)]; //remove tolower if you want case-sensitive solution!
    }
};

int main()
{
    std::setlocale(LC_ALL, "en_US.UTF-8");
    wifstream input("input.txt");

#ifdef PREFER_BOOST 
    boost::locale::generator gen;
    std::locale loc = gen("en_US.UTF-8"); 
#else
    std::locale loc("en_US.UTF-8");
#endif
    input.imbue(loc);
    wcout.imbue(loc);

    istreambuf_iterator<wchar_t> start(input), end;
    std::for_each(start, end, Counter());

    for (std::map<wchar_t, int>::iterator it = letterCount.begin(); it != letterCount.end(); ++it)
    {
        wcout << it->first <<" : "<< it->second << endl;
    }
} 
```

^(如果您更喜欢 boost locale 库，则需要链接到 boost_system、boost_locale 和 boost_thread；我没有看到任何明显的行为差异)

输出：

```
' : 3 , : 1 - : 32 / : 10 a : 67 b : 16 c : 7
d : 12 e : 61 f : 1 g : 16 h : 17 i : 46 j : 8
k : 41 l : 19 m : 19 n : 47 o : 20 p : 5 q : 3
r : 18 s : 21 t : 12 u : 21 v : 3 w : 3 x : 2
y : 21 z : 7 á : 1 â : 2 å : 1 è : 1 é : 1
í : 2 õ : 1 ú : 2 ā : 4 ē : 1 ě : 1 ī : 1
ı : 1 ř : 1 ţ : 1 ž : 1 ə : 1 ί : 1 ε : 1
ο : 1 π : 2 ρ : 1 υ : 1 а : 3 д : 2 е : 10
и : 2 й : 5 к : 10 н : 9 о : 4 р : 1 т : 1
ч : 1 ы : 2 я : 5 і : 6 ա : 1 ի : 2 մ : 1
ն : 1 ք : 1 ה : 1 ט : 1 כ : 2 ל : 1 מ : 1
ע : 3 ا : 4 ب : 7 خ : 3 د : 2 ر : 3 ز : 3
ض : 4 ع : 4 ك : 1 م : 1 ن : 2 ه : 1 َ : 1
 : 1 چ : 1 ک : 1 ی : 4 ێ : 1 ە : 1 ं : 1
ी : 2 ु : 1 े : 1 ক : 1 ি : 1 ু : 1 ਕ : 1
ક : 2 ટ : 1 ે : 1 க : 1 ் : 2 క : 1 ి : 1
 : 1 ഏ : 1 ു : 1 ර : 1 ස : 1 ง : 1 า : 1
ა : 1 დ : 1 ე : 2 ი : 1 მ : 2 ნ : 1 რ : 1
ច : 1 ន : 2 ម : 1 យ : 1 ួ : 2 ំ : 1 ố : 1
ộ : 1 い : 1 か : 1 く : 1 の : 1 一 : 2 些 : 2
금 : 1 
```

* * *

¹ . 我可能无法显示所有字符，但这可能是由于我的终端字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:56:32.320

这是我要做的，在所有其他人的帮助下，谢谢。

```
#include <iostream>
#include <fstream>
#include <string>
#include <map>
#include <istream>
#include <algorithm>
#include <iterator>
#include <sstream>
using namespace std;

struct op {
    int O;
    wstring P;
};

template <typename T>
wstring NumberToString ( T Number )
{
    wstringstream ss;
    ss << Number;
    ss<<",";
    return ss.str();
}

std::map<wchar_t, struct op> letterCount;
void Counter(wchar_t  item) {
    if ( !std::isspace(item) ) {
        ++letterCount[std::tolower(item)].O;    //remove tolower if you want case-sensitive solution!
    }
}

int main()
{
    wchar_t * cline;
    wstring line;
    wchar_t const* B = L"(";
    wchar_t const* E = L")";
    std::setlocale(LC_ALL, "en_US.UTF-8");
    wifstream input("T");
    std::locale loc("en_US.UTF-8");
    input.imbue(loc);
    wcout.imbue(loc);

    if (input.is_open()) {
        while ( !input.eof() ) {
            wstring check;
            getline (input,line);
            wcout << line << endl;
            cline = new wchar_t [line.size()+1];
            wcscpy (cline, line.c_str());

            for (int i = 0; i  < line.size()+1; ++i) {
                Counter(cline[i]);
                if(check.find(cline[i]) == string::npos)
                    for (int j=0; j<line.size()+1; j++) {
                        if (j == 0) {
                            letterCount[std::tolower(cline[i])].P+= B;
                        }
                        if (j == line.size()) {
                            letterCount[std::tolower(cline[i])].P+= E;
                        }
                        if(cline[i]==cline[j]) {
                            letterCount[std::tolower(cline[i])].P+= NumberToString(j) ;
                            check +=cline[i];
                        }
                    }
            }
        }
        input.close();
    }

    for (std::map<wchar_t, struct op>::iterator it = letterCount.begin(); it != letterCount.end(); ++it) {
        wcout << it->first <<" : "<< it->second.O << "@" << it->second.P<< endl;
    }
} 
```

输出：

```
н : 9@(36,42,49,56,)(9,)(8,)(0,)(7,)(15,)
о : 4@(12,)(11,)(3,5,)
р : 1@(6,)
т : 1@(4,)
ч : 1@(13,)
ы : 2@(7,19,)
я : 5@(47,61,)(10,)(11,)(11,)
і : 6@(5,30,40,60,)(5,13,)
ա : 1@(14,)
ի : 2@(11,16,)
մ : 1@(10,)
ն : 1@(15,)
ք : 1@(13,) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T18:53:17.873

```
#include <iostream>
#include <stdio>
#include <conio>

main()
{
 char name[1000],temp[1000];
 int i,j,n,present,count=0;
 clrscr();
 cout<<"Enter your char length:-";
 cin>>n;
 cout<<"\nEnter your text below:-\n\n";

 //get the text
 for(i=0;i<n;i++)
 {
  name[i]=getchar();
  temp[i]='\0';        //clear temp array
 }

 //extracting unique characters to temp[]
 temp[0]=name[0];
 for(i=1;i<n;i++)
 {
    present=0;
    for(j=0;j<strlen(temp);j++)
    {
      if(name[i]==temp[j])
      {
        present=1;
        break;
      }
    }
    if(present==0)
    {
     count++;
     temp[count]=name[i];
    }

 }

//counting char occurance
for (i=0;i<strlen(temp); i++)
{
   int count=0;
   cout<<"\n(";
   for (int j=0;j<n; j++)
   {
      if(temp[i]==name[j])
      {
        count++;
        cout<<j<<",";
      }
   }
   cout<<")\t\t"<<temp[i]<<":"<<count;
}
getch();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T08:00:51.540

您应该研究霍夫曼编码：[NIST on Huffman Coding](http://xlinux.nist.gov/dads/HTML/huffmanCoding.html)

这样，您不仅会得到所有出现的字母，还会得到常见的音节数（如果我理解正确的话）。

霍夫曼算法通常用于压缩和搜索树，但它会解决您的驱动问题（因为这正是霍夫曼所做的）。

Codeproject 上已经有一个可用的 C++ 实现：[Huffman in C++](http://www.codeproject.com/Articles/25088/Huffman-compression-class-in-C) 你只需要它的一部分，因为你可能对压缩不感兴趣。

# plot - jfreechart xy 系列绘图数据点

> ID：11128894
> 
> 赞同：1
> 
> 时间：2012-06-20T22:07:24.970
> 
> 标签：plot, jfreechart

在 JFreechart xySeries 中，我想使用一组非常密集的点来绘制线条，以便精确地显示曲线，但是，我想绘制密度较小的点。例如，我有 100 个数据点，每个数据点在 x 轴上相隔 1 个单位，但我只想每 5 个单位绘制一个点。但是，我确实希望每 1 个单位连接一次线，以显示高密度的曲线。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:25:47.030

您可以继承`XYLineAndShapeRenderer`和覆盖`getItemShapeVisible(int series, int item)`.

# scala - 我的数组的 Scala 参数化假定一个字符串？

> ID：11128898
> 
> 赞同：1
> 
> 时间：2012-06-20T22:07:50.640
> 
> 标签：scala, parameterization

我已经阅读了一些关于 Manifests 和允许 Scala 执行诸如“new Array[Array[T]]”之类的操作所需的避免擦除技术，但我对这个有点难过......

我有一种方法可以将数组中的一堆行列成表格，就像电子表格一样。例如想象一个像这样的二维数组：

```
11,   5,    4
8,    3,    7
2,    1,    4 
```

我写了一个方法来总结该数组的列并吐出一个像 [21, 9, 15] 这样的一维数组

我想将它泛化到 Ints 之外（可能像 Doubles 或 Floats），当我添加参数和清单时，我得到一个编译错误。

这是代码

```
def sumGrid[T](grid: Array[Array[T]])(implicit m: ClassManifest[T]): Array[T] = {

  val sum = new Array[T](grid(0).size)

  for(i <- 0 until grid.size) {
    for(j <- 0 until grid(0).size) {
      sum(j) = sum(j) + grid(i)(j)
    }
  }  
  sum
} 
```

这是编译错误：

```
[ERROR] ...scala/euler/GridOperations.scala:126: error: type mismatch;
[INFO]  found   : T
[INFO]  required: String
[INFO]         sum(j) = sum(j) + grid(i)(j)
[INFO]                                  ^
[ERROR] one error found 
```

这里发生了什么？为什么字符串是“必需的”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T22:18:22.070

因为您使用`+`始终为字符串定义的运算符。任何类型都可以转换为 String （`toString`始终定义），因此它适用于任何类型`T`。

但是您可以添加一些约束`T`以确保它对应于算术运算。例如，您可以使用implicits 来获取`Numeric`定义类型添加的对象`T`：

```
def sumGrid[T](grid: Array[Array[T]])
(implicit m: ClassManifest[T], num: Numeric[T]): Array[T] = {

  val sum = new Array[T](grid(0).size)

  for(i <- 0 until grid.size) {
    for(j <- 0 until grid(0).size) {
      sum(j) = num.plus( sum(j), grid(i)(j) )
    }
  }  
  sum
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:09:00.277

您处理了该`Array`部分，但`T`没有任何约束表明它具有`+`方法。因此，Scala 认为您正在添加字符串——`String`当您将任何类型添加到另一个`String`. 所以它自动转换`sum(j)`为`String`，现在预计`grid(i)(j)`是另一个`String`，此时它放弃并失败。

您可以以与这些东西`T`类似的方式处理关于数字的`ClassManifest`事情。这里：

```
// I'm using the "context bound" notation, to make the declaration shorter and
// more obvious on what I'm saying about T
def sumGrid[T : ClassManifest : Numeric](grid: Array[Array[T]]): Array[T] = {
  // the following line, plus the Numeric bound, makes T usable as a number
  import scala.math.Numeric.Implicits._

  val sum = new Array[T](grid(0).size)

  for(i <- 0 until grid.size) {
    for(j <- 0 until grid(0).size) {
      sum(j) = sum(j) + grid(i)(j)
    }
  }  
  sum
} 
```

# java - maven-soapui-pro-plugin：参数化 WSDl 位置

> ID：11128900
> 
> 赞同：0
> 
> 时间：2012-06-20T22:07:57.817
> 
> 标签：java, maven, wsdl, soapui

我正在尝试使用 maven-soapui-pro-plugin 插件启动嵌入式soapui 模拟网络服务。这在我的本地机器上完美运行，但显然会在持续集成平台上崩溃，因为项目文件引用本地文件系统上的 wsdl。因此，我有四个选择： 1/ 找到一种将 wsdl 文件位置作为参数传递的方法。2/ 将此引用更改为 HTTP（这意味着我必须安装 Apache 服务器） 3/ 手动更改对项目文件中 wsdl 的引用。4/ 用另一个插件替换那个插件

```
<plugin>
            <groupId>eviware</groupId>
            <artifactId>maven-soapui-pro-plugin</artifactId>
            <version>4.5.0</version>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.6</version>
                </dependency>
            </dependencies>    
            <executions>
                <execution>
                    <phase>process-test-resources</phase>
                    <goals>
                        <goal>mock</goal>
                    </goals>
                    <configuration>
                        <projectFile>D:\Documents and Settings\jhagai\Bureau\Toto-soapui-project.xml</projectFile>
                        <mockService>MockService</mockService>
                        <port>8888</port>
                        <path>/test</path>
                        <noBlock>true</noBlock>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

我觉得我是唯一面临这个问题的人，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:55:09.617

首先，您实际上并不需要 CI 服务器上的 wsdl 文件。在我们的 CI 服务器上有几个不指向 wsdl 文件的测试。SoapUI 使用 wsdl 文件来生成项目和示例请求，但是如果您在没有它的情况下运行测试并且您的测试配置正确，那么它应该不会失败。我们已经实现了您列出的第 2 项，但这样测试人员就不需要自己生成 wsdls。

我在上面看到的问题是硬编码的项目文件。您应该能够通过将您的项目保存在您的 Maven 项目中并在那里指向它（根据 POM 的位置映射到它）来处理这个问题。

# ios - 将 TextField 视为 UICell 的子视图

> ID：11128901
> 
> 赞同：0
> 
> 时间：2012-06-20T22:08:00.030
> 
> 标签：ios, xcode

我已将 TextField 添加到 UICell 以允许用户更改所述单元格的 TextLabel。一切正常，键盘出现，当我按下回车键时 TextLabel 更改为正确的值。但是，我无法看到正在编辑的文本。这是我的代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {

     [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
     UITableViewCell *aCell = [self.tableView cellForRowAtIndexPath:indexPath];
     NSString *aCategory = aCell.textLabel.text;
     [[aCell detailTextLabel] setText:aCategory];

     [aCell setEditing:YES animated:YES];
     UITextField *userText =[[UITextField alloc] init];
     userText.tag = indexPath.row;
     [aCell addSubview:userText];
     NSArray *test =[aCell subviews];
     NSLog(@"I have %d many subviews",[test count]);
     userText.alpha=1.0;
     [userText setDelegate:self];
     userText.autocorrectionType = UITextAutocorrectionTypeNo;
     [aCell bringSubviewToFront:userText];
     [userText becomeFirstResponder];

 } 
```

如果可能的话，我想在没有自定义单元格的情况下做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:54:08.597

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
    UITableViewCell *aCell = [self.tableView cellForRowAtIndexPath:indexPath];
    NSString *aCategory = aCell.textLabel.text;
    [[aCell detailTextLabel] setText:aCategory];

    UITextField *userText = [[UITextField alloc] initWithFrame:aCell.textLabel.frame];
    userText.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    userText.font = aCell.textLabel.font;
    userText.text = aCell.textLabel.text;
    aCell.textLabel.text = nil;
    userText.tag = indexPath.row;
    [aCell addSubview:userText];

    [userText setDelegate:self];
    userText.autocorrectionType = UITextAutocorrectionTypeNo;
    [aCell bringSubviewToFront:userText];
    [userText becomeFirstResponder];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:textField.tag inSection:0];
    UITableViewCell *aCell = [self.tableView cellForRowAtIndexPath:indexPath];
    aCell.textLabel.text = textField.text;
    [textField removeFromSuperview];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

# amazon-s3 - s3 的典型写入吞吐量是多少（使用水槽 0.9.4）

> ID：11128905
> 
> 赞同：0
> 
> 时间：2012-06-20T22:08:07.250
> 
> 标签：amazon-s3, throughput, flume

我在 BE 模式下运行我的水槽（水槽 0.9.4-cdh3u4）流，并且位于不同机器上的代理和收集器都是大型 EC2 实例

收集器写入本地文件系统以及同一区域中的 S3 存储桶。

代理在 E2E 模式下配置时已经过测试，可处理 4MB/s，代理 <-> 收集器速度也是如此。

使用“iftop”，我注意到收集器有两个传出连接到 S3，到 s3 的写入吞吐量徘徊在 40KB/s - 50KB/s 左右

1.  您使用收集器看到的 s3 的典型写入吞吐量是多少？

2.  我想知道是否可以生成更多这些线程（写入 S3）以最大化实例利用率？

我怎么做？

如果我能以另一种方式增加写入吞吐量，我宁愿不产生更多的收集器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:15:27.373

你有东西堆积在收集器上吗？50KB/s 是否有可能是所有正在生成的数据？

你在用滚水槽吗？Roll sink 将批量数据上传到 S3。较大的卷筒尺寸应提高产量。

# sql - 带有开始日期和结束日期的 SQL 查询 - 最佳选择是什么？

> ID：11128911
> 
> 赞同：0
> 
> 时间：2012-06-20T22:08:36.990
> 
> 标签：sql, sql-server, sql-server-2005

我在工作中使用 MS SQL Server 2005 来构建数据库。有人告诉我，大多数表在构建后将在不久的将来保存 1,000,000 到 500,000,000 行数据......我没有使用过这么大的数据集。大多数时候，我什至不知道我应该考虑什么来找出设置模式、查询等方法的最佳答案。

所以......我需要知道某事的开始和结束日期以及在该时间范围内与 ID 相关联的值。所以......我们可以用两种不同的方式来整理表格：

```
create table xxx_test2 (id int identity(1,1), groupid int, dt datetime, i int) 

create table xxx_test2 (id int identity(1,1), groupid int, start_dt datetime, end_dt datetime, i int) 
```

哪个更好？如何更好地定义？我用大约 100,000 行数据填充了第一个表，根据查询设置第二个表的格式大约需要 10-12 秒...

```
 select  y.groupid,
            y.dt as [start], 
            z.dt as [end],   
            (case when z.dt is null then 1 else 0 end) as latest, 
            y.i 
    from    #x as y 
            outer apply (select top 1 * 
                            from    #x as x 
                            where   x.groupid = y.groupid and 
                                    x.dt > y.dt 
                            order by x.dt asc) as z 
```

或
[http://consultingblogs.emc.com/jamiethomson/archive/2005/01/10/t-sql-deriving-start-and-end-date-from-a-single-effective-date.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2005/01/10/t-sql-deriving-start-and-end-date-from-a-single-effective-date.aspx)

Buuuuut ...与第二个表....要插入新行，我必须查看是否有前一行，如果有，则更新其结束日期。那么......在检索数据与插入/更新事物时，这是一个性能问题吗？将结束日期存储两次似乎很愚蠢，但也许......不是吗？我应该看什么？

这就是我用来生成我的假数据的东西......如果你出于某种原因想使用它（如果你将随机数的最大值更改为更高的值，它将更快地生成假数据）：

```
declare @dt datetime
declare @i int
declare @id int
set @id = 1
declare @rowcount int
set @rowcount = 0
declare @numrows int 

while (@rowcount<100000)
begin

set @i = 1
set @dt = getdate()
set @numrows = Cast(((5 + 1) - 1) * 
                Rand() + 1 As tinyint)

while @i<=@numrows
    begin
    insert into #x values (@id, dateadd(d,@i,@dt), @i)
    set @i = @i + 1
    end 

set @rowcount = @rowcount + @numrows
set @id = @id + 1
print @rowcount
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:22:44.427

出于您的目的，我认为选项 2 是表格设计的方式。这为您提供了灵活性，并将为您节省大量工作。

**拥有生效日期和结束日期将允许您通过在where**子句中包含仅返回当前有效数据的查询：

```
where sysdate between effectivedate and enddate 
```

然后，您还可以使用它以对时间敏感的方式与其他表连接。

如果您正确设置密钥并提供正确的索引，性能（至少在此表上）应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:51:47.700

对于可以使用SQL Server 2012（或 Oracle、DB2...）的[**LEAD** Analytic 功能](http://msdn.microsoft.com/en-us/library/hh213125)的任何人，从第一个表（仅使用 1 个日期列）中检索数据将比没有此功能快得多：

```
select
  groupid,
  dt "start",
  lead(dt) over (partition by groupid order by dt) "end",
  case when lead(dt) over (partition by groupid order by dt) is null
       then 1 else 0 end "latest",
  i
from x 
```

# ruby-on-rails-3 - 从 cap deploy 编译资产时的 Bundler::GemNotFound

> ID：11128919
> 
> 赞同：0
> 
> 时间：2012-06-20T22:09:14.130
> 
> 标签：ruby-on-rails-3, capistrano, rvm-capistrano

我正在使用 capistrano 部署到服务器并执行 bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile 作为最后一步。问题是当它从 cap deploy 到达这一点时，我收到以下错误：

/usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler/spec_set.rb:90:in `block in materialize': 找不到 Platform-0.4.0在任何来源 (Bundler::GemNotFound)

Platform-0.4.0 实际上是在服务器上。当我进入服务器并运行这个确切的命令时，一切都很好。

关于我的服务器的几个事实：它使用 RVM，但这似乎不是 cap 的问题，正如上面的堆栈跟踪所暗示的那样。另一个有趣的事实是，该服务器首先是使用我编写的自定义脚本创建的，该脚本下载 git 存储库的存档版本，然后手动运行 cap 在部署时执行的操作。如果有人问，我这样做的原因是为了使用 AWS AutoScaling 实现自动化。如果我做一个正常的部署：设置（不使用我的 AWS 脚本），它适用于部署。但是 gem 列表是相同的，并且该站点的工作方式都相同。它只是帽子部署的东西

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:00:38.997

我弄清楚我做错了什么。在我的自定义 AMI 脚本中，我将初始发布文件夹命名为“first”，而它应该是 capistrano 通常命名的时间戳。这在随后的部署中搞砸了。

# javascript - Javascript + iPhone 在对话框中打开文件

> ID：11128920
> 
> 赞同：2
> 
> 时间：2012-06-20T22:09:15.503
> 
> 标签：javascript, iphone, html, mobile, sencha-touch

我正在开发一个应用程序，供我们的员工在旅途中进行票证跟踪。我们的票证有时会存储各种文件类型的附件。

其中许多是我们软件中的错误的文本文件或图像，这对于在旅途中检查票证时是必不可少的

在 Javascript 中，我怎样才能让网络浏览器提示用户“你想用什么打开这个文件？” 对话？很像以下内容：

![iPhone在对话框中打开文件](../Images/d34ab737bc0b8904d33ffefa676e2707.png)

我什至不知道这是否可以通过 Javascript 实现，但如果是这样，它真的会对我们有很大帮助

我知道我们可以直接在 Javascript 中显示图像，但我们更愿意将文件推迟到设备上并让它处理使用正确的程序打开它（以防文件类型不是图像）

哦，我们正在为应用程序使用 Sencha Touch，以防它提供任何此类功能（尽管我在文档中找不到任何功能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:23:40.140

**要使用应用程序打开：**

*   选择 Info-plist 文件
*   右键单击 plist 文件
*   打开为...并选择源代码
*   将此 xml 代码粘贴到文件中的某处下方（例如，我将其放在包名称下方）

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>supportedExtensions</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSIsAppleDefaultForType</key>
        <true/>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.comma-separated-values-text</string>
        </array>
    </dict>
</array> 
```

*   转到应用委托文件并实现以下功能：

```
-(BOOL) application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    // this url contain the -> your file url
} 
```

请记住：您的应用程序内存的处理取决于您。该文件将被复制到您的应用程序文档目录空间中。您将需要管理它。如果您不再需要该文件，您的应用程序将需要将其删除。

**在 JS 中读取文件：**

在您的 javascript 中实现以下内容：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);

function gotFS(fileSystem) {
    fileSystem.root.getFile("exportBHC.csv", {create: true}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.file(gotFile, fail);
}

function gotFile(file){
    readAsText(file);
}

function readAsText(file) {
    var reader = new FileReader();

    reader.onloadend = function(evt) {
        var sqlQuery = {};
        var results = evt.target.result;
} 
```

# python - 龙卷风相当于延迟

> ID：11128923
> 
> 赞同：18
> 
> 时间：2012-06-20T22:09:21.773
> 
> 标签：python, tornado

在不影响主进程睡眠的情况下，tornado 中是否有等效命令用于延迟函数（因此即使主线程正在处理新函数调用，回调也会执行）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-21T09:24:45.283

试试这个：

```
import time
from tornado.ioloop import IOLoop
from tornado.web import RequestHandler, asynchronous
from tornado import gen

class MyHandler(RequestHandler):
    @asynchronous
    @gen.engine
    def get(self):
        self.write("sleeping .... ")
        self.flush()
        # Do nothing for 5 sec
        yield gen.Task(IOLoop.instance().add_timeout, time.time() + 5)
        self.write("I'm awake!")
        self.finish() 
```

取自[这里](http://css.dzone.com/articles/pausing-genator-based)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-02-12T01:29:54.997

请注意，从 4.1 开始，他们添加了一个[`gen.sleep(delay)`](http://www.tornadoweb.org/en/stable/gen.html#tornado.gen.sleep)方法。

所以

```
yield gen.Task(IOLoop.instance().add_timeout, time.time() + 5) 
```

会变成

```
yield gen.sleep(5) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-25T01:10:03.963

# 可能是多余的

# 我喜欢回调风格

```
class MyHandler(RequestHandler):
    @asynchronous
    def get(self):
        self.write("sleeping .... ")
        self.flush()
        IOLoop.instance().add_timeout(time.time() + 5, self._process)

    def _process(self)
        # Do nothing for 5 secs
        self.write("I'm awake!")
        self.finish() 
```

# r - 在 R 中撤消 --no-restore

> ID：11128925
> 
> 赞同：1
> 
> 时间：2012-06-20T22:09:32.450
> 
> 标签：r, workspace

在安装过程中，我已将 R 设置为不恢复工作区，现在想要撤消此操作 - 它是如何完成的？

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252   
[3] LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T01:03:19.113

*   如果您`RGui`从 Windows 快捷方式使用，请编辑快捷方式以删除`--no-restore`标志。

*   如果您通过 , 使用 R `Rstudio`，请在 Tools-->Options-->General 下查看并选择适当的选项

*   对于其他 IDE，应该有类似的方法来设置启动选项。

`R`另一种选择是按照您希望的方式重新安装。

# multithreading - 在 Cocoa 中的线程上发出循环退出信号的最佳方法是什么？

> ID：11128937
> 
> 赞同：0
> 
> 时间：2012-06-20T22:10:29.187
> 
> 标签：multithreading, cocoa, grand-central-dispatch

我有一个方法（我们称之为运行）：

```
- (void)run
{
    // Do some initialisation

    // Loop until another thread signals it to exit
    while (SHOULD_STILL_LOOP) { ... }

    // Clean up code
} 
```

我称之为：

```
[self performSelectorInBackground:@selector(run)]; 
```

实现 SHOULD_STILL_LOOP 的最佳方式是什么？我应该使用原子属性、NSCondition、调度信号量吗？

也许一些堆栈可以给我一些建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:41:14.957

我找到了一种方法，那就是使用 NSThread。

```
- (void)run:(id)obj
{
    while(![[NSThread currentThread] isCancelled]) { ... }
}

- (void)start
{
    self.thread = [[NSThread alloc] initWithTarget:self
                                          selector:@selector(run)
                                            object:self.object];
    [self.thread start];
}

- (void)stop
{
    [self.thread cancel];
    self.thread = nil;
} 
```

# svg - SVG中foreignObject的特征检测

> ID：11128939
> 
> 赞同：4
> 
> 时间：2012-06-20T22:10:38.470
> 
> 标签：svg, feature-detection

我在 SVG 中使用了 foreignObject 元素，但是 IE9 不支持这个元素。我正在寻找一种检测此功能的方法。Modernizr 没有检测到这个功能，而且我似乎不能像对矩形 (createSVGRect) 那样使用 createSVGForeignObject（在 SVGSVGElement 上不可用）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:24:10.827

如果您想使用foreignObject，这应该可以工作，因为它集成了html内容......

```
<switch>
  <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" requiredExtensions="http://www.w3.org/1999/xhtml">
    <foreignObject >
    </foreignObject>
  </g>
  <text font-size="10" font-family="Verdana">
     No foreignObject
  </text>
</switch> 
```

[向 w3c 提出](http://lists.w3.org/Archives/Public/public-svg-wg/2008JulSep/0299.html#start299)的 requiredExtensions 部分，[这是他们的回应](http://www.w3.org/2008/09/16-svg-minutes.html#item03)。Firefox 确实实现了这一点，但我还没有测试过其他任何东西。正如 Erik 建议的那样，您也许可以只使用 requiredFeatures 属性。

如果您想在 javascript 中进行测试，请尝试

```
var supported = document.implementation.hasFeature("http://w3.org/TR/SVG11/feature#Extensibility", "1.1"); – 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-04T03:02:18.483

有一种方法可以在 JS 中测试此功能，以下内容是从最近对modernizr 的提交中借用的（[https://github.com/Modernizr/Modernizr/commit/ee836f083f29a9e634df731400027c24630a75f3](https://github.com/Modernizr/Modernizr/commit/ee836f083f29a9e634df731400027c24630a75f3)）：

```
 var toStringFnc = ({}).toString;
        Modernizr.addTest('svgforeignobject', function() {
            return !!document.createElementNS &&
                /SVGForeignObject/.test(toStringFnc.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));
        }); 
```

# java - 在 Java BigInteger 中移动一个半字节？

> ID：11128946
> 
> 赞同：2
> 
> 时间：2012-06-20T22:10:58.327
> 
> 标签：java, bit-manipulation, bit-shift

我有一个包含两个字节的 Java BigInteger（例如：1000000100110111）。我只想将一个半字节，即左字节中最右边的半字节（下面以粗体显示）向左移动一位：

1000 **0001** 00110111

换班后的结果：

1000 **0010** 00110111

对执行此操作的最佳方法有任何想法吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T22:14:06.700

如果您只想移动一位，您应该清除旧的并设置新的：

```
bigint.clearBit(n-1)
      .setBit(n) 
```

如果你想移动最左边的四个位，你可以将它们位映射出来，移动它们，然后或者它们回来：

```
bigint.and(0xf0ff).or(bigint.and(0x0f00).shiftLeft(1)) 
```

或者为了清楚起见：

```
unshifted = bigint.and(0xf0ff);
shifted = bigint.and(0x0f00).shiftLeft(1);
result = unshifted.or(shifted); 
```

如果您不希望 1100 1111 变为 1101 1110（注意溢出），您可以在 or 之前再次将位图应用于移位的位置。

# watir - Watir Tables 也是一个链接

> ID：11128947
> 
> 赞同：1
> 
> 时间：2012-06-20T22:11:01.060
> 
> 标签：watir

我想从此网页中获取文本字段“测试”。我该怎么做？我开始：

e.form(:name => "MainForm").table(.

我厌倦了一些事情让它工作，但我卡住了。如果不清楚我在问什么，只需说明如何将变量设置为“测试”一词。

谢谢你。

![在此处输入图像描述](../Images/04d61a0084d53dcdb7ec352e916072db.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:20:49.643

根据您期望页面随时间变化的方式，有多种方式。

如果它始终是具有“cellnohilite”类的页面的第一个单元格，您可以这样做：

```
value = browser.td(:class, 'cellnohilite').text 
```

如果它始终是该特定表的第一个单元格，您可以执行以下操作：

```
value = browser.tbody(:class, 'blacklabel').td.text 
```

如果您知道单元格的文本是“测试”，您甚至可以这样做：

```
value = browser.td(:text, 'Test').text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T13:43:16.060

```
browser.frame(:name, "MainForm").td(:text, "Test").text 
```

祝你好运！

# msbuild - MSBuild ReadLinesFromFile 任务输出属性

> ID：11128953
> 
> 赞同：0
> 
> 时间：2012-06-20T22:12:10.477
> 
> 标签：msbuild, documentation

我想学习如何使用 MSBuild [ReadLinesFromFile 任务](http://msdn.microsoft.com/en-us/library/ms164299%28v=vs.100%29.aspx)

我在 MSDN 示例中观察`Output`标签。在我的项目中，我也有`Output/@PropertyName`属性。

我不知道哪些其他属性`Output`标签可以接受。
我在哪里可以找到它们的描述？

我想我应该看到一些继承的任务或类似的东西。
在哪儿？（我关注了 MSDN 页面中的链接，但似乎我错过了一些东西）
我不深入了解 MSBuild，我认为我不需要它来达到我的目的，只想找到[ReadLinesFromFile Task](http://msdn.microsoft.com/en-us/library/ms164299%28v=vs.100%29.aspx)的清晰描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:28:04.400

也许只是说明显而易见，该任务只接受（无论如何都通过文档）`Lines`输出参数，如文档中所示，并在示例中显示，在您在问题中链接的[页面上。](http://msdn.microsoft.com/en-us/library/ms164299%28v=vs.100%29.aspx)

您会发现关于该任务的“最清晰”的描述确实是 MSDN 页面。

顺便说一句，往里看`Microsoft.Build.Tasks.v4.0.dll`，`ReadLinesFromFile`任务确实只接受`Lines`输出参数。

# c# - 基于 WCF 计时器的服务未回调客户端

> ID：11128963
> 
> 赞同：0
> 
> 时间：2012-06-20T22:13:19.453
> 
> 标签：c#, .net, multithreading, wcf, callback

我想制作一个 WCF 计时器服务，客户端可以在其中注册，以便在经过一定时间后从服务中回调。问题是客户端没有被回调。不抛出异常。

回调接口为：

```
[ServiceContract]
public interface ITimerCallbackTarget
{
  [OperationContract(IsOneWay = true)]
  void OnTimeElapsed(int someInfo);
} 
```

该服务如下所示：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single,
  ConcurrencyMode = ConcurrencyMode.Single)]  
public class TimerService : ITimerService
   private readonly Timer _timer = new Timer(2000); //System.Timers.Timer

   public void Subscribe()
   {
     ITimerCallbackTarget listener = 
       OperationContext.Current.GetCallbackChannel<ITimerCallbackTarget>();

     _timer.Elapsed += (p1, p2) =>
     {
       listener.OnTimeElapsed(999);
      };
     _timer.Start();
   } 
```

客户端使用的回调方法是：

```
private class TimerCallbackTarget : ITimerCallbackTarget
{
  public void OnTimeElapsed(int someInfo)
  {
    Console.WriteLine(someInfo);
  }
} 
```

客户端注册如下：

```
private static void TestTimerService()
{
  InstanceContext callbackInstance = new InstanceContext(new TimerCallbackTarget());

  using (DuplexChannelFactory<ITimerService> dcf =
    new DuplexChannelFactory<ITimerService>(callbackInstance,  
      "TimerService_SecureTcpEndpoint"))
  {
    ITimerService timerProxy = dcf.CreateChannel();

    timerProxy.Subscribe();        
  }
} 
```

**如果我在没有Timer**的 subscribe 方法中使用不同的线程，它可以工作：

```
 ThreadPool.QueueUserWorkItem(p =>
  {
    listener.OnTimeElapsed(999);
  }); 
```

如果我将**Thread.Sleep(3000)**放在 subscribe 方法的末尾，它甚至可以与**Timer**一起使用（三秒钟） ，所以我的猜测是，回调对象的通道可能在 subscribe 方法完成后关闭。**对通过OperationContext.Current.GetCallbackChannel()**检索到的回调对象使用类范围变量；而不是方法范围变量没有帮助。

 ******以前我尝试在计时器服务的计时器**的经过事件处理程序中创建新线程以使其更快。**引发ObjectDisposedException**并显示以下消息：“无法访问已处置的对象。对象名称：'System.ServiceModel.Channels.ServiceChannel”。然后我尝试简化我的服务，发现即使只使用**Timer**也会导致所描述的问题，但我猜这个异常表明与客户端回调对象的连接在某个地方丢失了。奇怪的是，如果我不在**Timer**线程中创建新线程，没有异常。只是没有调用回调方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:42:41.633

在双工绑定中，两个通道的生命周期是相关联的。如果 TimerService 的通道关闭，则 CallbackTarget 的回调通道也会关闭。如果您尝试使用已关闭的通道，您会得到一个 ObjectDisposedExcpetion。在您的情况下，这很糟糕，因为您不想让 Subscribe() 频道保持打开状态只是为了接收 OnTimeElasped() 调用......而且我假设您想订阅无限长的时间。

双工频道试图让您的生活更轻松，但不符合您的需求。在幕后，双工通道实际上是为 CallbackTarget 创建第二个 WCF 服务主机。如果您手动创建客户端的服务主机以接收回调，那么您可以独立于 Subscribe() 通道管理其生命周期。

下面是一个功能齐全的命令行程序，演示了这个想法：

1.  创建一个 TimerService
2.  创建一个 TimerClient 来接收通知
3.  作为订阅调用的一部分，将 TimerClient 的端点地址传递给 TimerService
4.  TimerService 使用它从 Subscribe() 获得的地址向 TimerClient 发送通知。

请注意，任何通道的打开时间都不会超过发出单个呼叫所需的时间。

***标准免责声明***：这旨在展示如何创建“类似双工”的行为。缺乏错误处理和其他捷径。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.Timers;
using System.ServiceModel.Description;

namespace WcfConsoleApplication
{
    [ServiceContract]
    public interface ITimerCallbackTarget
    {
        [OperationContract(IsOneWay = true)]
        void OnTimeElapsed(int someInfo);
    } 

    [ServiceContract]
    public interface ITimerService
    {
        [OperationContract(IsOneWay = true)]
        void Subscribe(string address);
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single,
                     ConcurrencyMode = ConcurrencyMode.Single)]
    public class TimerService : ITimerService
    {
        private readonly Timer _timer = new Timer(2000);
        private ChannelFactory<ITimerCallbackTarget> _channelFac;
        private int _dataToSend = 99;

        public void Subscribe(string address)
        {
            // note: You can also load a configured endpoint by name from app.config here,
            //       and still change the address at runtime in code.
            _channelFac = new ChannelFactory<ITimerCallbackTarget>(new BasicHttpBinding(), address);

            _timer.Elapsed += (p1, p2) =>
            {
                ITimerCallbackTarget callback = _channelFac.CreateChannel();
                callback.OnTimeElapsed(_dataToSend++);

                ((ICommunicationObject)callback).Close();

                // By not keeping the channel open any longer than needed to make a single call
                // there's no risk of timeouts, disposed objects, etc.
                // Caching the channel factory is not required, but gives a measurable performance gain.
            };
            _timer.Start();
        }
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single,
                     ConcurrencyMode = ConcurrencyMode.Single)]
    public class TimerClient : ITimerCallbackTarget
    {
        public void OnTimeElapsed(int someInfo)
        {
            Console.WriteLine("Got Info: " + someInfo);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {

            ServiceHost hostTimerService = new ServiceHost(typeof(TimerService), new Uri("http://localhost:8080/TimerService"));
            ServiceHost hostTimerClient = new ServiceHost(typeof(TimerClient), new Uri("http://localhost:8080/TimerClient"));
            ChannelFactory<ITimerService> proxyFactory = null;

            try
            {
                // start the services
                hostTimerService.Open();
                hostTimerClient.Open();

                // subscribe to ITimerService
                proxyFactory = new ChannelFactory<ITimerService>(new BasicHttpBinding(), "http://localhost:8080/TimerService");
                ITimerService timerService = proxyFactory.CreateChannel();
                timerService.Subscribe("http://localhost:8080/TimerClient");
                ((ICommunicationObject)timerService).Close();

                // wait for call backs...
                Console.WriteLine("Wait for Elapsed updates. Press enter to exit.");
                Console.ReadLine();
            }
            finally
            {
                hostTimerService.Close();
                hostTimerClient.Close();
                proxyFactory.Close();
            }
        }
    }
} 
```****

# javascript - 如何适应具有固定高度的 DIV 的内容

> ID：11128964
> 
> 赞同：0
> 
> 时间：2012-06-20T22:13:23.813
> 
> 标签：javascript, css, layout, html

考虑我们有一个固定高度的 DIV。如果没有定义`width`，内容将扩展到 100% 的宽度。如何调整宽度以填充 DIV。当然，CSS 是不可能的，因此，我正在寻找使用 Javascript 的解决方案。

在此[**示例**](http://jsfiddle.net/yDPbh/)中，文本以 100% 的宽度展开，并在固定高度上留下大量空白空间。我需要通过 javascript 设置 130px 的宽度以使内容适合整个 DIV。但是如何计算宽度？

**注意：**此值 (130px) 是为示例文本估算的。根据 DIV 内容，javascript 需要计算适合 DIV 内容所需的宽度。

有什么方法可以估计 DIV 内容的 2D 大小吗？

CSS 实际上是为高度做的。当我们有一个固定的宽度时，它会继续填充 DIV 的高度。宽度也可以这样做吗？

**澄清：**如何在不知道宽度的情况下垂直填充DIV（我们有固定的高度）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:43:21.410

如果我正确理解您的要求，您可以使用 Javascript 执行此操作。

诀窍是使用一个帮助`<div>`器，在该帮助器中，您可以让浏览器将内容流动到特定宽度并查看它出现的高度。如果 helper 的高度`<div>`大于 outer的高度`<div>`，调整宽度进行补偿。

同时，外部`<div>`有`overflow: hidden`所有这些流动的实验不会对您的页面布局产生不和谐的变化。

**[看到它在行动](http://jsfiddle.net/TghkD/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T00:33:05.080

这是另一种方法。虽然效率较低，但它可能比我的其他答案更准确。

看[这里的例子：](http://jsfiddle.net/bJ7HB/39/)

基本上将宽度向下循环，直到达到所需的高度

```
<div id="AA">
    <div id='A'>
        I dont know how wide i am, I dont know how wide i am, I dont know how wide i am, I dont know how wide i am, I dont know how wide i need to be
    </div>
</div> 
```

CSS：

```
#AA {
    height: 300px;
    border: 1px solid black;
    width: 100%;
}

#A {
   display: inline;
} 
```

剧本：

```
 height = $('#AA').height();
minWidth = 300;

currentWidth = $('#A').width();
currentHeight = $('#A').height();
stop = false;

if (currentWidth >= minWidth) {

    while (stop === false) {
        if (currentWidth >= minWidth) {
            newWidth = currentWidth - 1;
            $('#AA').width(newWidth);
            currentHeight = $('#A').height();
            currentWidth = $('#A').width();
            if (currentHeight < height) {
                stop = false;
            }
            else {
                stop = true;
            }
        }
        else {
            stop = true;
        }
    }
} 
```

# python - 如何摆脱 Mac OS X 上的 'IOError: 13, 'Permission denied''

> ID：11128970
> 
> 赞同：4
> 
> 时间：2012-06-20T22:14:27.207
> 
> 标签：python, macos, osx-lion, permission-denied, ioerror

这是我试图在 Mac OS X 上运行的代码：

```
import getpass #Needed for fetching username
import shutil #Needed for moving Files
import os
var_username = getpass.getuser() #gets username and returns as variable
source_file = r"/Users/%s//Downloads/LogNLock/com.lognlock.loginhook.plist" %(var_username) #the destination of the source file
destination = r"/Library/LaunchAgents" #the target destination for the file to go
shutil.copy(source_file, destination) #moves the source file to the destination folder 
```

而且我用谷歌搜索，无法弄清楚为什么它不起作用。背景信息：例如，当将文件从桌面移动到文档时它可以工作，但我认为我需要以某种方式获取 root 用户权限。我现在在管理员帐户上。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T22:51:10.540

您尝试将文件复制到的文件夹的权限没有打开到足以让您以运行脚本的用户身份执行此操作。这不是真正的 Python 问题。您需要授予用户对该文件夹的写入权限，或者您需要以 root 身份运行脚本。

以 root 身份运行脚本：

```
sudo python your_python_script.py 
```

我相信你需要成为管理员用户才能工作。“sudo”是一个命令，意思是“以超级用户身份执行此操作”。

要更改文件夹的权限，您可以尝试

```
sudo chmod a+rw /path/to/folder/that/you/want/to/write/to 
```

同样，您将以超级用户身份执行此操作，chmod 是更改文件或目录权限的命令。'a+rw' 翻译为'授予所有用户读/写权限。这可能是一个坏主意......但听起来你只是在你的机器上本地运行它。

# java - Java指针写入是原子的吗？

> ID：11128973
> 
> 赞同：16
> 
> 时间：2012-06-20T22:14:53.910
> 
> 标签：java, multithreading, synchronization, thread-safety, atomic

简单的问题：Java 内存/同步模型是否保证原子指针写入？也就是说，如果我们有竞争线程：

```
String shared;

thread1()
{
    shared = "a";
}

thread2()
{
    shared = "hello world";
} 
```

同时开始，`shared`总是保证是`null`, `"a"`, 或`"hello world"`?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T22:18:28.997

读取和写入对于引用变量是原子的。

来源：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T22:23:08.703

它是原子的。

但是，在您给出的示例中，'`shared`值不一定**是**,或之一。如果没有适当的同步，每个线程可能永远不会看到其他线程设置的值。所以会看到，也会同时看到。`null``a``hello world``thread 1``a``thread 2``hello world`

**编辑：为最后一段添加了参考以供进一步阅读**

JLS 在[第 17 章 - 线程和锁](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html)中解释了不同线程执行的操作顺序。具体来说，在[17.4.5 Happens-before Order](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)部分。此外，编写良好的[Java Concurrency in Practice](http://jcip.net/)彻底解释了所有这些。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T22:19:31.463

是的。从[JLS 的第 17.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7)：

> 对引用的写入和读取始终是原子的，无论它们是作为 32 位还是 64 位值实现的。

（这并不意味着您总是会看到“最新”值，但那是另一回事。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-20T22:17:14.987

这将是这三个值之一，是的——但它是未定义的。“胜利”中的最后一个。

您没有问，但为了完整性 - 它不会是“hello wor”或该字符串的某些部分版本。

# java - 如何跟踪此树代码的进度？

> ID：11128976
> 
> 赞同：-6
> 
> 时间：2012-06-20T22:15:19.107
> 
> 标签：java, tree, binary-search

```
 public static <AnyType> void mysteryPrint(BinaryNode<AnyType> t) {
      if( t! = null) {
          System.out.println(t.getElement() );
          mysteryPrint(t.getLeft() );
          System.out.println(t.getElement() );
          mysteryPrint(t.getRight() );
          System.out.println(t.getElement() );
      }
  }

               A
       B               C
           D        E 
```

我已经制作了上面的树，我想知道最简单的是跟踪这段代码找到输出吗？

到目前为止，我正在获取 ABBDDB，但我迷失了方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:31:20.230

如果没有跟踪，查看给定树应该打印什么相对简单。该方法的结构意味着字符串将如下所示：

```
<content><left sub-tree><content><right sub-tree><content> 
```

因此，您所要做的就是不断地用该模式替换左右子树（用空字符串表示不存在的子树）并获取字符串。

对于您的示例树，它看起来像这样（使用 [ 和 ] 显示替换）：

```
A<left sub-tree>A<right sub-tree>A
A[B<left sub-tree>B<right sub-tree>B]A[C<left sub-tree>C<right sub-tree>C]A
A[B[]B[D<left sub-tree>D<right sub-tree>D]B]A[C[E<left sub-tree>E<right sub-tree>E]C[]C]A
A[B[]B[D[]D[]D]B]A[C[E[]E[]E]C[]C]A 
```

所以方法打印出 ABBDDDBACEEECCA

# javascript - 引号内的引号过多——怎么办？

> ID：11128977
> 
> 赞同：3
> 
> 时间：2012-06-20T22:15:24.670
> 
> 标签：javascript, html

这是 CKEditor 在我的网站上使用的一段代码：

```
CKEDITOR.config.IPS_BBCODE          = {"acronym":{"id":"8","title":"Acronym","desc":"Allows you to make an acronym that will display a description when moused over","tag":"acronym","useoption":"1","example":"[acronym='Laugh Out Loud']lol[/acronym]", ... 
```

如果您向右滚动一点，您将看到：

```
"[acronym='Laugh Out Loud']lol[/acronym]" 
```

我需要将所有 CKEditor 代码存储在 javascript 字符串中，但我不知道该怎么做，因为字符串中同时包含 " 和 ' 。看到问题了吗？此外，我认为我不能只是转义引号，因为我尝试这样做并且编辑器不起作用。

知道我能做什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T22:30:06.980

您可以尝试获取字符串并将 JavaScript 转义码注入其中。JavaScript 在使用以下格式时基本上可以使用任何 unicode 值：`\u####`- 因此，对于`'`字符，代码是`\u0039`，对于`"`字符，代码是`\u0034`.

所以 - 您可以将字符串的示例部分编码为：

```
\u0034[acronym=\u0039Laugh Out Loud\u0039]lol[/acronym]\u0034 
```

或者，您可以尝试简单地转义引号，如下所示：

```
\"[acronym=\'Laugh Out Loud\']lol[/acronym]\" 
```

当您遇到这种情况时，就会出现这里的问题：

```
"data:{'prop1':'<a href="/url/here/">back\\slash</a>'}" 
```

当以这种方式逃脱时，它变成：

```
"data:{\'prop\':\'<a href=\"/url/here/\">back\\\\slash</a>\'}\" 
```

虽然这比第一个版本更具可读性 - 反序列化它在跨越对象空间时可能有点棘手，例如将 javascript 对象传递给需要反序列化为对象的 C# 解析器，然后重新序列化和回来。两种语言都使用 \ 作为它们的转义字符，并且有可能得到一些需要解决脑筋急转弯的时髦场景。

该`\u####`方法的优点是只有 JavaScript 通常在典型堆栈中使用它 - 因此很容易理解哪个部分应该被哪个应用程序片段转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:19:52.857

嗯..你说你已经试图逃避引号，它给了问题。
这根本不应该给问题，所以试试这个：

```
$newstring = addslashes($oldstring); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:45:35.387

无需使用 Unicode 转义序列。只需用双引号将您的字符串括起来，并在字符串中的任何双引号之前加上一个反斜杠。

```
var x = "\"[acronym='Laugh Out Loud']lol[/acronym]\""; 
```

# android - 如何在 Windows 7 下运行“android”

> ID：11128979
> 
> 赞同：0
> 
> 时间：2012-06-20T22:15:52.150
> 
> 标签：android

我已经在 Windows 7 下安装了 android sdk。但是当我运行它时，我收到以下错误，说 xcopy 未被识别为命令。

我该如何解决？

谢谢你。

```
C:\>android.bat
'xcopy' is not recognized as an internal or external command,
operable program or batch file.
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:19:37.990

为什么要调用android.bat？

只需从 Windows 开始菜单启动“SDK 管理器”。

或者你到底想做什么？

# perl - 使用 Perl 的 Net::SNMP 发送陷阱

> ID：11128982
> 
> 赞同：2
> 
> 时间：2012-06-20T22:16:30.017
> 
> 标签：perl, snmp, cpan, net-snmp

我正在尝试将陷阱作为更大 Perl 脚本的一部分发送。我已将陷阱发送代码复制到另一个文件，并自行运行它。代码似乎认为陷阱发送成功，但我在运行陷阱侦听器的任何一台机器上都没有看到陷阱。

这是代码：

```
#! /usr/local/bin/perl
use strict;
use warnings;

use Net::SNMP;

#messy hardcoding
my $snmp_target = '192.168.129.50';
#my $snmp_target = '10.200.6.105'; # Server running trap listener
my $enterprise = '1.3.6.1.4.1.27002.1';

my ($sess, $err) = Net::SNMP->session(
    -hostname  => $snmp_target,
    -version => 1, #trap() requires v1
);

if (!defined $sess) {
    print "Error connecting to target ". $snmp_target . ": ". $err;
    next;
}

my @vars = qw();
my $varcounter = 1;

push (@vars, $enterprise . '.' . $varcounter);
push (@vars, OCTET_STRING);
push (@vars, "Test string");

my $result = $sess->trap(
    -varbindlist => \@vars,
    -enterprise => $enterprise,
    -specifictrap => 1,
);

if (! $result)
{
    print "An error occurred sending the trap: " . $sess->error();
} 
```

编辑：添加了 $sess->debug(255) 调用，这是输出：

```
debug: [440] Net::SNMP::Dispatcher::_event_insert(): created new head and tail [ARRAY(0x1af1fea8)]
debug: [687] Net::SNMP::Message::send(): transport address 192.168.129.50:161
debug: [2058] Net::SNMP::Message::_buffer_dump(): 70 bytes
[0000]  30 44 02 01  00 04 06 70  75 62 6C 69  63 A4 37 06   0D.....public.7.
[0016]  09 2B 06 01  04 01 81 D2  7A 01 40 04  C0 A8 81 85   .+......z.@.....
[0032]  02 01 06 02  01 01 43 01  00 30 1B 30  19 06 0A 2B   ......C..0.0...+
[0048]  06 01 04 01  81 D2 7A 01  01 04 0B 54  65 73 74 20   ......z....Test 
[0064]  73 74 72 69  6E 67                                   string
debug: [517] Net::SNMP::Dispatcher::_event_delete(): deleted [ARRAY(0x1af1fea8)], list is now empty 
```

编辑：运行陷阱侦听器的任何人都可以在他们的机器上尝试此代码并让我知道它是否有效吗？

编辑：从我的 MBP 中尝试过。结果相同。然后注意到调试信息说它正在发送到端口 161。强制`-port => 162`参数，它可以工作。这给我留下了几个问题：

1.  为什么陷阱发送者默认为 161？
2.  当我在调试时运行时出现此错误。这是什么意思？

    错误：[97] Net::SNMP::Transport::IPv4::UDP::agent_addr()：断开连接失败：协议族不支持地址族

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:06:29.083

通过将“端口”设置从默认值 161 更改为 162 来修复。

# php - 使用PHP在数组中存储数组

> ID：11128984
> 
> 赞同：0
> 
> 时间：2012-06-20T22:16:33.710
> 
> 标签：php, arrays, loops, multidimensional-array

```
foreach ($topicarray as $key=>$value){
    $files = mysql_query("mysqlquery");

    while($file = mysql_fetch_array($files)){ extract($file);
        $topicarray[$value] = array( array($id=>$title)
                      );
       }
    } 
```

第一个 foreach 循环为我提供了一个唯一值数组，它形成了一个一维数组。

while 循环旨在在一维数组中存储另一个值数组。

当 while 循环返回到开头时，它正在覆盖它。所以我只得到数组中最后返回的一组值。

我的数组最终成为一个二维数组，每个内部数组中只有一个值。

感觉好像我在这里遗漏了一些非常基本的东西——比如一个函数或语法，它可以防止数组覆盖自身，而是添加到数组中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:18:38.560

步骤 1\. 替换`$topicarray[$value]`为`$topicarray[$value][]`
步骤 2。 ???
步骤 3\. 利润

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T22:19:40.860

制作`$topicarray[$value]`一组行，而不是一行。另外，不要`extract`在这里使用。

```
foreach ($topicarray as $key => $value) {
    $rows = array();
    $files = mysql_query("mysqlquery");

    while($file = mysql_fetch_array($files)) {
        $rows[] = array($file['id'] => $file['title']);
    }

    $topicarray[$value] = $rows;
} 
```

此外，您应该切换到 PDO 或 MySQLi。

# regex - 正则表达式：如何从字符串末尾开始查找

> ID：11128990
> 
> 赞同：0
> 
> 时间：2012-06-20T22:17:03.037
> 
> 标签：regex, uppercase, right-to-left

我想获取**所有**字符**，直到**有一个**大写字母**，但从**结尾**到开头。（或从右到左）

> blab blab 12 34 这是一个测试！

我需要`This is a test!`。

这是我设法找到的：

```
^.*?(?=[A-Z]) 
```

但它返回`blab blab 12 34`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:26:50.903

使用以下正则表达式：

```
irb(main):001:0> regex = /([A-Z][^A-Z]*)$/
irb(main):002:0> "blab blab 12 34 This is a test!".match regex
=> #<MatchData "This is a test!" 1:"This is a test!"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:28:57.267

好的，我将添加它作为答案，稍后可能会将其开发为其他变体。简单的解决方案应该是某事。像：

```
 [A-Z][^A-Z]*$ 
```

测试（在 Perl 中）：

```
 print $1 if 'blab blab 12 34 This is a test!' =~ /([A-Z][^A-Z]*)$/; 
```

返回：

```
 This is a test! 
```

为了解决这个问题，需要将模式*锚定*`$`在字符串 ( )的末尾。

问候

rbo

# neo4j - How Can I Revise a List Node Property Using Cypher?

> ID：11128991
> 
> 赞同：0
> 
> 时间：2012-06-20T22:17:09.840
> 
> 标签：neo4j, cypher

I have nodes in my graph that contain properties that are of type double[]. How can I do something like this in cypher?

```
for (int i=0; i < theArray.length(); i++)
    theArray[i] *= .8; 
```

This obviously doesn't work, but here is the general idea:

```
start a = node(0)
a.theArray = a.theArray*.8
return a; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:44:24.917

您可以使用`extract`类似的东西`map`并创建一个新的集合。

```
start n=node(0) 
set n.foo=extract(x in [1,2,3] : x*0.8)
return n

set n.foo = extract(x in n.foo : x*0.8) 
```

# javascript - 无法居中图像

> ID：11128992
> 
> 赞同：1
> 
> 时间：2012-06-20T22:17:10.720
> 
> 标签：javascript, jquery, css

我正在尝试使屏幕变黑并将图像居中放在屏幕中间，高于所有其他元素。我所拥有的不起作用（图像居中部分）。

**注意**- 我知道这可能有插件..但我试图弄清楚如何做到这一点以及它是如何工作的。

```
var docHeight = $(document).height();

$("body").append("<div id='overlay'></div>");

$("#overlay").height(docHeight).css({
    'opacity': 0.4,
    'position': 'relative',
    'top': 0,
    'left': 0,
    'color': 'white',
    'background-color': 'black',
    'width': '100%',
    'z-index': 5000
});

$("#overlay").append("<div id='image-container'><img id='photo' src='" + $(this).attr('rel') + "' alt='image' /></div>");

$("#image-container").css("position", "absolute");
$("#image-container").css("top", Math.max(0, (($(window).height() - $("#image-container").outerHeight()) / 2) + $(window).scrollTop()) + "px");
$("#image-container").css("left", Math.max(0, (($(window).width() - $("#image-container").outerWidth()) / 2) + $(window).scrollLeft()) + "px"); 
```

CSS：

```
#image-container {
    background: #FF0000;
    z-index: 999999;
} 
```

我正在显示的图像位于屏幕的右下角……而不是中央。我究竟做错了什么？

[JsFiddle在这里](http://jsfiddle.net/5rRqS/1 "这里")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:21:47.957

[垂直居中元素很难](https://stackoverflow.com/a/9758556/1081234)。一个简单的解决方法是将覆盖屏幕的元素的背景居中：

```
#overlay {
    /*Cover the entire screen regardless of scrolling*/
    position:fixed;top:0;right:0;bottom:0;left:0;
    background: #ff0000 url(...) no-repeat 50% 50%;
} 
```

为演示目的[摆弄了一个半透明的 bgcolor](http://jsfiddle.net/ovfiddle/Fm2ub/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:40:47.297

您可以使用宽度和高度 100% 和大 zindex 将覆盖固定定位。现在你有一个透明的黑色 div 覆盖整个窗口，而不是你尝试的整个文档。由于我们已将其定位固定，因此即使您滚动页面也不会滚动。现在使用您的简单数学来居中图像。一种方法是使图像定位为绝对，left 为 50%，然后 marginleft 为 -(width of image/2)。如果所有情况下的图像宽度都相同并且可以在 css 上添加，这将很有用。在这种情况下，您只需要使用 jquery 淡入和淡出覆盖 div。因为我在手机上，所以暂时没有代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:49:12.713

您可以使用纯 CSS 执行此操作：http: [//jsfiddle.net/5rRqS/2/](http://jsfiddle.net/5rRqS/2/)（我不确定所有浏览器）。

当你的脚本运行时图像的宽度=0px 和高度=0 所以，如果你想使用 JS，你必须在加载图像后运行定位脚本，或者添加图像的宽度和高度（通过属性或样式）

然后使用类似的东西

```
$(img).load(function(){
   // positioning script here
}) 
```