# StackOverflow 问答 10805000-10805999

# python - ImportError：没有名为 cStringIO 的模块

> ID：10805002
> 
> 赞同：1
> 
> 时间：2012-05-29T18:55:23.223
> 
> 标签：python, environment-variables, importerror

我是一个 python Noob，我被这个特殊的错误困住了。我正在尝试在我的 bash 脚本中运行 python 脚本。错误日志如下所示

```
File "Alpha_Beta.py", line 6, in <module>
    import pdb
  File "C:\softs\Python\Lib\pdb.py", line 14, in <module>
  File "C:\softs\Python\Lib\pprint.py", line 39, in <module>
ImportError: No module named cStringIO 
```

这是在我的 ubuntu 机器上。

谁能帮我修复这个错误？

通过查看回复和我确实发现的回溯，这可能与该文件最初在 Windows 环境中使用的事实有关。目前我正在尝试在 ubuntu 上编译这个文件。我希望这能让它更清楚。

当我在 Windows 机器上运行时，这个文件也可以毫无问题地编译。与ubuntu不一样。所以我需要帮助来弄清楚如何调试它。我应该更改 pdb 模块中的某些内容还是应该查看其他地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:03:23.097

您在 Windows 机器上运行它，但如果它来自共享的 Ubuntu 驱动器，则 cStringIO 扩展将不会导入；它将被编译为在 Linux 而不是 Windows 上运行。

# javascript - 将 jQuery 颜色框颜色发送到附加元素

> ID：10805003
> 
> 赞同：0
> 
> 时间：2012-05-29T18:55:31.097
> 
> 标签：javascript, jquery

我正在尝试将用户选择的选定 jQuery 颜色框颜色发送到里面的文本字符串

```
<div class="user-text"> 
```

目前它只影响显示用户选择的显示 sxwatch。这是我正在尝试的功能。我想我可以添加一个新行，告诉它显示“颜色”。

```
$('.user-text').css('color', '#' + hex); 
```

这是我拥有的全部功能

```
$('#colorSelector').ColorPicker({
color: '#0000ff',
onShow: function (colpkr) {
    $(colpkr).fadeIn(500);
    return false;
},
onHide: function (colpkr) {
    $(colpkr).fadeOut(500);
    return false;
},
onChange: function (hsb, hex, rgb) {
    $('#colorSelector div').css('backgroundColor', '#' + hex);
    $('.user-text').css('color', '#' + hex);
}
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:59:50.940

如果我理解您的问题，您需要该`html()`方法

```
onChange: function (hsb, hex, rgb) {
    $('#colorSelector div').css('backgroundColor', '#' + hex);
    $('.user-text').css('color', '#' + hex);
    $('.user-text').html('Your chosen color: #' + hex);
} 
```

# java - 提供了错误类型休眠的 id

> ID：10805004
> 
> 赞同：9
> 
> 时间：2012-05-29T18:55:34.823
> 
> 标签：java, hibernate, annotations, type-mismatch

我收到错误：

org.hibernate.TypeMismatchException：为类 BEntity 提供了错误类型的 id。预期：BEntity 类，获得 AEntity 类

```
public class BEntity implements Serializable{
    @Id
    @Column(name = "NUM")
    private String num;

    @Id
    @Column(name = "INIT")
    private String init;

    @Column(name = "V_CNT")
    private Integer vcnt;

   //{{{some column omitted}}}//
}

public class AEntity implements Serializable{

    @Id
    @Column(name = "NUM")
    private String num;

    @Id
    @Column(name = "INIT")
    private String init;

    @OneToOne
    @PrimaryKeyJoinColumns({
        @PrimaryKeyJoinColumn(name="NUM", referencedColumnName="NUM"),
        @PrimaryKeyJoinColumn(name="INIT", referencedColumnName="INIT")
    })
    private BEntity bEntity;
} 
```

***HQL查询：***

```
String queryString = "FROM AEntity AS A " +
                     "LEFT JOIN A.bEntityAS B " +
                     "WHERE A.INIT||A.NUM IN (:carList) AND A.INIT IN (:initList) AND A.NUM IN (:numberList) " + 
                     "AND B.TRUK_AXL_CNT > 0"; 
```

***Hibernate 生成代码***

```
select aentity0_.NUMBER as NUMBER4_0_, aentity0_.INITIAL as INITIAL4_0_, bentity_p1_.NUMBER as NUMBER5_1_, bentity_p1_.INITIAL as INITIAL5_1_, aentity0_.V_CNT as VCNT3_4_0_, aentity0_.EIN as EIN4_0_, aentity0_.TYP as TYP5_4_0_, aentity0_.TRUK_CNT as TRUK6_4_0_, bentity_p1_.TRUK_AXL_CNT as TRUK3_5_1_ from USR.aentity aentity0_ left outer join USR.bentity_PRIMARY bentity_p1_ on aentity0_.NUMBER=bentity_p1_.NUMBER and aentity0_.INITIAL=bentity_p1_.INITIAL 
where (aentity0_.INITIAL||aentity0_.NUMBER in (?,?,?)) 
and (aentity0_.INITIAL in (?,?,?)) 
and (aentity0_.NUMBER in (?, ?, ?))
and bentity_p1_.TRUK_AXL_CNT>0 
```

当我在 SQL Explorer 中运行代码时，它只能在代码中运行导致问题...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-29T19:40:59.970

看起来这是休眠版本 3.2.6 中的一个缺陷，仍未解决。遇到了这个[JIRA](https://hibernate.atlassian.net/browse/HHH-3993)。

Hibernate 支持多个`@Id`，但似乎在一对一映射下失败，建议解决此问题的方法是使用单个 CompositeKey，这意味着您创建一个 PK 类

```
import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Embeddable;

@Embeddable
public class PKClass implements Serializable {

    @Column(name = "NUM")
    private String num;

    @Column(name = "INIT")
    private String init;

    //gettter setter here

} 
```

然后在您的实体中使用它作为 ID

```
public class BEntity implements Serializable{

    @Id
    private PKClass pkClass = null;

    @Column(name = "V_CNT")
    private Integer vcnt;

   //{{{some column omitted}}}//
}

public class AEntity implements Serializable{

    @Id
    private PKClass pkClass = null;

    @OneToOne
    @PrimaryKeyJoinColumns({
        @PrimaryKeyJoinColumn(name="NUM", referencedColumnName="NUM"),
        @PrimaryKeyJoinColumn(name="INIT", referencedColumnName="INIT")
    })
    private BEntity bEntity;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-10T06:11:00.983

我遇到了同样的问题。我有两个具有相同字段的独立 PK 课程。所以我删除了一个 PK，只在所有者和子实体中使用了一个。这解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T20:48:31.957

我有同样的问题。

**开始情况**

*主表上的主键*

```
 <composite-id name="id" class="model.E1Id">
        <key-property name="taxpayerId" type="int">
            <column name="TaxpayerID" />
        </key-property>
        <key-property name="year" type="int">
            <column name="Year" />
        </key-property>
    </composite-id> 
```

*明细表上的主键*

```
 <composite-id name="id" class="model.E1dataFromTaxPayerFolderId">
        <key-property name="tid" type="int">
            <column name="tID" />
        </key-property>
        <key-property name="year" type="int">
            <column name="Year" />
        </key-property>
    </composite-id> 
```

**修复后** ，我更改了详细表复合 ID 的类，并设置了主表的类，如下所示：

```
 <composite-id name="id" class="model.E1Id">
        <key-property name="tid" type="int">
                            <column name="tID" />
                    </key-property>
        <key-property name="year" type="int">
            <column name="Year" />
        </key-property>
    </composite-id> 
```

之后有必要（如果您有不同的名称）在您的主键类（在我的情况下为 E1Id）中添加属性 tid（使用 getter 和 setter 方法）

# html - 从三星galaxy s2中的聚焦元素中删除橙色轮廓

> ID：10805005
> 
> 赞同：5
> 
> 时间：2012-05-29T18:55:35.893
> 
> 标签：html, css, samsung-mobile, outline

有没有办法关闭三星galaxy s2中移动浏览器使用的高亮效果？

我已经尝试过：

```
-webkit-tap-highlight-color:rgba(0,0,0,0)
-webkit-tap-highlight-color:transparent
-webkit-touch-callout: none;
outline:none;

-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-o-user-select: none;
user-select: none; 
```

或者 - 有人可以准确解释这些效果何时显示？我可以以不触发这些效果的方式检测屏幕触摸开始和触摸结束吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:20:06.407

CSS：

```
.borderImage {
    -webkit-tap-highlight-color:rgba(0,0,0,0);
} 
```

HTML：

```
<div class="borderImage">
    <a href="#">Some text</a>
</div> 
```

在这里找到 ;) : [-webkit-tap-highlight-color: rgba(0,0,0,0); 在一个div上？](https://stackoverflow.com/questions/1974687/webkit-tap-highlight-color-rgba0-0-0-0-on-a-div)

编辑（很高兴知道）：

```
/* No background, just iOS:*/
-webkit-tap-highlight-color: transparent;

/* No background iOS + Android:  */
-webkit-tap-highlight-color: rgba(0, 0, 0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:58:33.177

尝试`e.preventDefault();`在触摸开始事件上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T15:13:19.247

用这个

```
* {
    margin: 0;
    padding: 0;
    border: none;
    outline: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);

} 
```

# shell - 不关闭 ssh

> ID：10805007
> 
> 赞同：2
> 
> 时间：2012-05-29T18:56:03.673
> 
> 标签：shell, unix, ssh

我有一个 korn 88 shell 脚本，它使用以下命令在远程主机上创建一个文件夹：

```
ssh $user@$host "mkdir -p $somedir" 2>> $Log 
```

然后使用这个循环传输一堆文件

```
scp -o keepalive=yes $somedir/$file $user@$host:$somedir 
```

我想知道脚本结束后第一个命令是否会保持连接打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:20:32.923

足够新的 ssh 版本能够在单个物理连接上多路复用多个虚拟连接。因此，您可以做的是在启用连接多路复用的情况下在后台启动一些长时间运行的 ssh 命令，然后后续连接将以更快的启动时间重新使用该连接。有关连接多路复用的信息，请参见联机帮助页`ssh_config`，相关选项为`ControlMaster`和`ControlPath`。

但正如 William Pursell 所建议的那样`rsync`，如果可以选择的话，它可能更容易、更快捷。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T19:00:00.050

每个命令打开和关闭自己的连接。[`tcpdump`](http://www.tcpdump.org/)使用类似的工具来验证这一点很容易。

这是因为[`exit()`](http://linux.die.net/man/2/exit)用于终止进程的系统调用会关闭所有打开的文件描述符，包括套接字文件描述符。关闭套接字会关闭套接字后面的连接。

# android - “未安装应用程序”Android 设备错误

> ID：10805009
> 
> 赞同：0
> 
> 时间：2012-05-29T18:56:18.620
> 
> 标签：android, manifest

我有一个 android 应用程序，它可以在使用 Android 2.3.3 的 AVD 上完美运行，但它无法安装在任何可供我测试的设备上（运行 Android 2.3.3 的索尼爱立信 XPeria、运行 Android 2.3.7 的 LG Optimus 和三星 Galaxy标签 Android 4.0.3)。错误是“未安装应用程序”。据我所知，它可能与应用程序的不正确清单文件有关，所以`AndroidManifest.xml`如果它可能有帮助的话，我可以这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.hohlocola"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />
            <uses-permission
    android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".HohloColaActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我导出我的应用程序**unsigned**。
提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T21:33:01.413

您不能在真实设备上安装未签名的 APK，您必须使用有效密钥导出 APK。这甚至可以是您在调试模式下使用的相同密钥库/密钥，它位于（默认情况下）`~/.android/debug.keystore`或密钥库和包含密钥`C:\Users\<user>\.android\debug.keystore`的密码。`android`

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:40:13.347

Android 应用程序必须经过签名。有关更多信息，请参阅[Android 应用签名文档](http://developer.android.com/guide/publishing/app-signing.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:46:22.107

看看logcat。我的问题是权限错误。我在*application*标签中定义了*android.permission.INTERNET*而不是单独的*uses-permission*。当您尝试启动应用程序时，Logcat 输出引发异常：

 **```
E/Launcher(  136): java.lang.SecurityException: Permission Denial: <...> requires android.permission.INTERNET 
```

因此，请尝试找出阻止您的应用开始使用 adb logcat 的原因。

我也读过这篇文章[Android 上的“未安装应用程序”错误，](https://stackoverflow.com/questions/4226132/application-not-installed-error-on-android)并且有很多可能性。甚至有人不得不更新 Java。**

# php - Websocket - 客户端不接收数据

> ID：10805023
> 
> 赞同：3
> 
> 时间：2012-05-29T18:57:16.610
> 
> 标签：php, javascript, websocket

我正在编写一些基于 websockets (RFC 6455) 的应用程序。不幸的是，看起来客户端（在 Chrome 18 上测试）没有接收数据，但服务器说它正在发送......

Chrome 什么也没说

以下是主要的服务器方法：

```
private function decode($payload) {
    $length = ord($payload[1]) & 127;

    if ($length == 126) {
        $masks = substr($payload, 4, 4);
        $data = substr($payload, 8);
    } elseif ($length == 127) {
        $masks = substr($payload, 10, 4);
        $data = substr($payload, 14);
    } else {
        $masks = substr($payload, 2, 4);
        $data = substr($payload, 6);
    }

    $text = '';
    for ($i = 0; $i < strlen($data); ++$i) {
        $text .= $data[$i] ^ $masks[$i % 4];
    }

    $text = base64_decode($text);
    return $text;
}

private function encode($text) {
    $text = base64_encode($text);
    // 0x1 text frame (FIN + opcode)
    $b1 = 0x80 | (0x1 & 0x0f);
    $length = strlen($text);

    if ($length <= 125)
        $header = pack('CC', $b1, $length);
    elseif ($length > 125 && $length < 65536)
        $header = pack('CCS', $b1, 126, $length);
    else 
        $header = pack('CCN', $b1, 127, $length);

    return $header . $text;
} 

protected function process($user, $msg) {
    echo '<< '.$msg.N;
    if (empty($msg)) {
        $this->send($user->socket, $msg);
        return;
    }
}

protected function send($client, $msg) {
    $msg = $this->encode($msg);
    echo '>> '.$msg.N;
    socket_write($client, $msg, strlen($msg));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:26:42.543

如果您发送的测试消息 >125 字节但 <65536，则您的问题可能是由于要打包的错误格式字符串引起的。我认为这个应该是“CCn”（您当前的代码以错误的顺序写入长度的 2 个字节）。

如果这没有帮助，您可以尝试一些客户端日志记录：

*   是否运行 onopen 回调来证明初始[握手](https://www.rfc-editor.org/rfc/rfc6455#section-4)成功完成？
*   onerror 或 onclose 回调是否在连接后或服务器发送消息后运行？

# javascript - $('#textboxId').val() 返回旧值（浏览器缓存问题）

> ID：10805028
> 
> 赞同：1
> 
> 时间：2012-05-29T18:57:25.237
> 
> 标签：javascript, ajax

尽管花费了数小时，但我无法弄清楚这一点。我有一个带有两个文本框的简单动态创建页面（使用控制器加载的 vbhtml）。

页面上有一个保存按钮。此按钮调用页面内 Javascript 函数。在函数中，我有以下几行：

```
function saveData()
{
var lDescr = $('#FundNote').val();  // FundNote is the id of a textbox
var DocUrl = $('#DocUrl').val();  // DocUrl is the id of another textbox
alert(lDescr);
alert(DocUrl);
  //ajax call to a controller
} 
```

问题是每次显示此页面时，这些变量都会继续返回与第一次输入的值相同的值。如果我清理浏览器缓存，则会返回新输入的值，但它会一直返回相同的值，直到再次清理浏览器缓存。每次显示此页面时，文本框都是空的，并且用户输入值，因此页面本身不会保留值。

任何指针？

## 更新

花了几天后，这就是我修复它的方式（暂时）。

似乎即使控制器正在发送更新的 html 并且在浏览器上显示正常（html 包含一个下拉框，该下拉框动态填充不同的值。每次值不同但在 javascript 中，旧值被返回（例如，选择选项的旧值，该值甚至没有包含在当前的 html 渲染中）。仍然不知道为什么会发生这种情况。解决方案中还有其他类似的页面，它们工作正常。）。

不管怎样，我做了什么（现在让它工作），我在类中添加了一个 RandonNo() 属性，该属性动态地创建了这个 html（通过一个控制器和一个 vbhtml 文件）。然后在 vbhtml 中，我将这个随机数附加到所有 html 组件 ID。我也像这样将相同的数字传递给 javascript" `Save()`" 函数`OnClick="Save('@Model.RandonNo')`。在 Save 方法中，然后我更改了`$('#idOption') to $('#idOption-'+ randomno)`. 它似乎正在工作，因为 ID 每次都不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-10T05:03:54.677

我知道这是一个老问题，但我觉得它需要一个解决方案，因为 jQuery 仍在这样做。我一直有一个非常相似的问题，但最终能够找到解决方法。问题似乎出在 .val() 中。出于某种原因，当 jQuery 用于获取/设置输入时，它希望自动从缓存中填充输入。在我的情况下，我正在做这样的事情：

HTML 文件：

```
<form ...>
    <input type="hidden" name="my_value" value="X" />
</form> 
```

JS 文件：

```
$( document ).ajaxSuccess( function ( event, jqxhr, settings, data ) {
    if ( settings.dataType == 'json' && data && data.my_value ) {
        $( 'input[name="my_value"]' ).val( data.my_value );
    }
} ); 
```

如果我在不清除缓存的情况下刷新页面，则输入将自动被初始页面请求上的 AJAX 请求中的缓存值覆盖，即使它们已经填充了服务器响应中的值。为了解决这个问题，我将 .val( ... ) 更改为 .attr( 'value', ... )，所以行：

```
$( 'input[name="my_value"]' ).val( data.my_value ); 
```

变成了

```
$( 'input[name="my_value"]' ).attr( 'value', data.my_value ); 
```

所以我认为你需要在这里解决你的问题就是简单地改变：

```
var lDescr = $('#FundNote').val();  // FundNote is the id of a textbox
var DocUrl = $('#DocUrl').val();  // DocUrl is the id of another textbox 
```

至

```
var lDescr = $('#FundNote').attr( 'value' );  // FundNote is the id of a textbox
var DocUrl = $('#DocUrl').attr( 'value' );  // DocUrl is the id of another textbox 
```

我不确定这是 jQuery 本身还是它的插件导致了这种情况，但这真的很奇怪。似乎如果您在任何时候使用 .val( ) 从输入/向输入获取/设置值，如果您稍后再次刷新或访问该页面，您将导致输入的值被缓存值损坏. 调用 .val( ) 时似乎不会发生这种损坏，而是在加载文档时发生。

总而言之，调用 .val() 以获取/设置输入会导致在初始页面请求期间缓存返回/设置的值。未来的请求将在文档加载后使用初始请求期间返回/设置的值损坏输入值，直到您清除浏览器缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:34:18.940

有时浏览器会缓存表单输入值，因此如果您返回页面，则无需重新输入内容。要禁用它，请设置`<form ... autocomplete="off">`. 这将阻止表单重新加载用户上次在页面加载时键入的内容。

听起来这不是您关心的问题，而是您关心的是输入中的文本不是从`.val()`. 如果是这种情况，请显示一些代码，然后让我们深入研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:33:23.097

不要缓存值（.val()），缓存 jQuery 对象：

```
`function saveData() {
var lDescr = $('#FundNote');  // FundNote is the id of a textbox
var DocUrl = $('#DocUrl');  // DocUrl is the id of another textbox
    alert( lDescr.val() );
    alert( DocUrl.val() );
  //ajax call to a controller
}`
```

* * *

 `## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T19:34:59.970

我有同样的问题，经过一些尝试，我发现了一个适合我的替代方案......

```
$("#id").valueOf().valueOf().valueOf().val(); 
```

可能看起来一些“奇怪”的解决方案，但它有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-10T09:43:05.927

我遇到了同样的问题，我切换`val()`到`attr("value")`修复它。`

# java - 如何在任何“字符处拆分字符串（在Java中），但从不在\”处？RegEx 是否合适，如果，如何？

> ID：10805029
> 
> 赞同：3
> 
> 时间：2012-05-29T18:57:28.737
> 
> 标签：java, regex, string, split

我需要在任何 " 字符处拆分 Java 字符串。主要的是，前一个字符可能不是反斜杠 ( \ )。

所以这些字符串会像这样分裂：

```
asdnaoe"asduwd"adfdgb         =>   asdnaoe, asduwd, adfgfb
addfgmmnp"fd asd\"das"fsfk    =>   addfgmmnp, fd asd\"das, fsfk 
```

有没有简单的方法可以使用正则表达式来实现这一点？（我使用 RegEx 是因为它对我来说是最简单的编码器。性能也不是问题......）

先感谢您。

我是这样解决的：

```
 private static String[] split(String s) {
    char[] cs = s.toCharArray();

    int n = 1;

    for (int i = 0; i < cs.length; i++) {
        if (cs[i] == '"') {
            int sn = 0;

            for (int j = i - 1; j >= 0; j--) {
                if (cs[j] == '\\')
                    sn += 1;
                else
                    break;
            }

            if (sn % 2 == 0)
                n += 1;
        }
    }

    String[] result = new String[n];

    int lastBreakPos = 0;
    int index = 0;
    for (int i = 0; i < cs.length; i++) {
        if (cs[i] == '"') {
            int sn = 0;

            for (int j = i - 1; j >= 0; j--) {
                if (cs[j] == '\\')
                    sn += 1;
                else
                    break;
            }

            if (sn % 2 == 0) {
                char[] splitcs = new char[i - lastBreakPos];

                System.arraycopy(cs, lastBreakPos, splitcs, 0, i - lastBreakPos);
                lastBreakPos = i + 1;

                result[index] = new StringBuilder().append(splitcs).toString();
                index += 1;
            }
        }
    }

    char[] splitcs = new char[cs.length - (lastBreakPos + 1)];

    System.arraycopy(cs, lastBreakPos, splitcs, 0, cs.length - (lastBreakPos + 1));

    result[index] = new StringBuilder().append(splitcs).toString();

    return result;
} 
```

无论如何，感谢您的所有精彩回复！（哦，尽管如此，我将使用@biziclop 或@Alan Moore 的版本，因为它们更短并且可能更高效！=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:01:53.470

当然，只需使用

```
(?<!\\)" 
```

快速 PowerShell 测试：

```
PS> 'addfgmmnp"fd asd\"das"fsfk' -split '(?<!\\)"'
addfgmmnp
fd asd\"das
fsfk 
```

但是，这不会拆分`\\"`（转义的反斜杠，后跟正常的引号[至少在大多数类 C 语言的转义规则中]）。但是，您无法在 Java 中真正解决这个问题，因为不支持任意长度的后视：

```
PS> 'addfgmmnp"fd asd\\"das"fsfk' -split '(?<!\\)"'
addfgmmnp
fd asd\\"das
fsfk 
```

通常你会期望一个适当的解决方案来拆分剩余的`"`，因为它并没有真正逃脱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T05:17:14.977

您可以使用 Java 正则表达式解决此问题；只是不要使用`split()`.

```
public static void main(String[] args) throws Exception
{
  String[] strs = {
      "asdnaoe\"asduwd\"adfdgb",
      "addfgmmnp\"fd asd\\\"das\"fsfk"
  };

  for (String str : strs)
  {
    System.out.printf("%n%-28s=>  %s%n", str, splitIt(str));
  }
} 

public static List<String> splitIt(String s)
{
  ArrayList<String> result = new ArrayList<String>();
  Matcher m = Pattern.compile("([^\"\\\\]|\\\\.)+").matcher(s);
  while (m.find())
  {
    result.add(m.group());
  }
  return result;
} 
```

输出：

```
asdnaoe"asduwd"adfdgb       => [asdnaoe, asduwd, adfdgb]

addfgmmnp"fd asd\"das"fsfk  => [addfgmmnp, fd asd\"das, fsfk] 
```

The core regex, `[^"\\]|\\.`, consumes anything that's not a backslash or a quotation mark, or a backslash followed by anything--so `\\\"` would be matched as an escaped backslash (`\\`) followed by an escaped quote (`\"`).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:23:09.313

仅供参考，这是一个处理转义的非正则表达式解决方案`\`。（在现实生活中，这可以被简化，实际上不需要`START_NEW`状态，但我尝试以更易于阅读的方式编写它。）

```
public class Splitter {

    private enum State {
        IN_TEXT, ESCAPING, START_NEW;
    }

    public static List<String> split( String source ) {
        LinkedList<String> ret = new LinkedList<String>();
        StringBuilder sb = new StringBuilder();
        State state = State.START_NEW;
        for( int i = 0; i < source.length(); i++ ) {
            char next = source.charAt( i );
            if( next == '\\' && state != State.ESCAPING ) {
                state = State.ESCAPING;
            } else if( next == '\\' && state == State.ESCAPING ) {
                state = State.IN_TEXT;
            } else if( next == '"' && state != State.ESCAPING ) {
                ret.add( sb.toString() );
                sb = new StringBuilder();
                state = State.START_NEW;
            } else {
                state = State.IN_TEXT;
            }
            if( state != State.START_NEW ) {
                  sb.append( next );
            }
        }
        ret.add( sb.toString() );
        return ret;
    }

} 
```

# android - 文件未在 Android 4.03 上使用 http 上传到服务器

> ID：10805034
> 
> 赞同：0
> 
> 时间：2012-05-29T18:58:21.983
> 
> 标签：android

我正在使用 Android 4.03 将文件上传到我的 PHP 服务器。我已经使用 HTML 文件测试了我的 PHP 代码，它工作正常。当我尝试使用 Android 时，我收到 200 的 HTTP 响应。文件未上传。这是我的代码

```
 String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
    baseDir = baseDir + "/270.jpg"; 
    Log.d(TAG, "RegFile: " + baseDir);
    HttpURLConnection connection = null;
    DataOutputStream outputStream = null;
    DataInputStream inputStream = null;

    String pathToOurFile = baseDir;
    String urlServer = "http://192.168.15.5/upload_file.php";
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "*****";

    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1*1024*1024;

    try
    {
    FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) );

    URL url = new URL(urlServer);
    connection = (HttpURLConnection) url.openConnection();

    // Allow Inputs & Outputs
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);

    // Enable POST method
    connection.setRequestMethod("POST");

    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

    outputStream = new DataOutputStream( connection.getOutputStream() );
    outputStream.writeBytes(twoHyphens + boundary + lineEnd);
    outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
    outputStream.writeBytes(lineEnd);

    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];

    // Read file
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);

    while (bytesRead > 0)
    {
    outputStream.write(buffer, 0, bufferSize);
    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    }

    outputStream.writeBytes(lineEnd);
    outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

    // Responses from the server (code and message)
    int serverResponseCode = connection.getResponseCode();
    String serverResponseMessage = connection.getResponseMessage();
    Log.d(TAG, "Server Response Code: " + serverResponseCode);
    Log.d(TAG, "Server Response Message: " + serverResponseMessage);
    fileInputStream.close();
    outputStream.flush();
    outputStream.close();
    }
    catch (Exception ex)
    {
        Log.d(TAG, "Server Error " + ex);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:52:56.993

我建议使用 HttpClient 上传文件。这是一个 .jar 库，有关更多信息，请参阅：http: [//vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)

# f# - MailboxProcessor 和异常

> ID：10805035
> 
> 赞同：17
> 
> 时间：2012-05-29T18:58:24.327
> 
> 标签：f#, mailboxprocessor

我想知道，为什么`MailboxProcessor`处理异常的默认策略只是*默默地忽略*它们。例如：

```
let counter =
    MailboxProcessor.Start(fun inbox ->
        let rec loop() =
            async { printfn "waiting for data..."
                    let! data = inbox.Receive()
                    failwith "fail" // simulate throwing of an exception
                    printfn "Got: %d" data
                    return! loop()
            }
        loop ())
()
counter.Post(42)
counter.Post(43)
counter.Post(44)
Async.Sleep 1000 |> Async.RunSynchronously 
```

什么也没有发生。程序执行没有致命停止，或出现“未处理异常”的消息框。没有。

如果有人使用`PostAndReply`方法，这种情况会变得更糟：结果是保证死锁。

这种行为有什么原因吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T20:24:25.203

MailboxProcessor 上有一个`Error`事件。

[http://msdn.microsoft.com/en-us/library/ee340481](http://msdn.microsoft.com/en-us/library/ee340481)

```
counter.Error.Add(fun e -> printfn "%A" e) 
```

当然，如果你想自己进行精细控制，你可以做类似 Tomas 的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T19:58:01.880

我认为`MailboxProcessor`F# 中不包含任何处理异常的机制的原因是不清楚什么是最好的方法。例如，您可能希望在发生未处理的异常时触发一个全局事件，但您可能希望在下次调用`Post`or时重新引发异常`PostAndReply`。

这两个选项都可以基于标准实现`MailboxProcessor`，因此可以添加您想要的行为。例如，以下代码片段显示`HandlingMailbox`添加了一个全局异常处理程序。它具有与正常相同的接口`MailboxProcessor`（我省略了一些方法），但它添加了`OnError`在发生异常时触发的事件：

```
type HandlingMailbox<'T> private(f:HandlingMailbox<'T> -> Async<unit>) as self =
  let event = Event<_>()
  let inbox = new MailboxProcessor<_>(fun inbox -> async {
    try 
      return! f self
    with e ->
      event.Trigger(e) })
  member x.OnError = event.Publish
  member x.Start() = inbox.Start()
  member x.Receive() = inbox.Receive()
  member x.Post(v:'T) = inbox.Post(v)
  static member Start(f) =
    let mbox = new HandlingMailbox<_>(f)
    mbox.Start()
    mbox 
```

要使用它，您将编写与之前编写的代码相同的代码，但您现在可以异步处理异常：

```
let counter = HandlingMailbox<_>.Start(fun inbox -> async {
  while true do 
    printfn "waiting for data..." 
    let! data = inbox.Receive() 
    failwith "fail" })

counter.OnError.Add(printfn "Exception: %A")
counter.Post(42) 
```

# wpf - 如何将我的 MVVM 集合连接到我的业务层中长时间运行的进程？

> ID：10805040
> 
> 赞同：1
> 
> 时间：2012-05-29T18:58:45.703
> 
> 标签：wpf, mvvm, system.reactive

我的反应性扩展技能很弱而且很瘦。情况如下：

1.  在我的 MVVM 中，我有绑定到我的 Xaml 列表框的 ObservableCollection。那是正常的东西。

    ```
    public ObservableCollection<IExtractedFileInfo> ExtractedFileInfoList 
    ```

2.  在我的业务层中，我有一个长时间运行的进程来查询我的 EntityFramework 并使用类似的签名调用

    ```
    IList<IExtractedFileInfo> ExtractedFileInfoListFetch(string location) 
    ```

我通常将结果传递给列表框的解决方案是从长时间运行的进程中获取输出，创建一个新的 ObservableCollection，并将其设置为等于我的 MVVM 中的属性，如下所示

```
 var extractedFileInfoList = _businessFacade.ExtractedFileInfoListFetch(location);
        ExtractedFileInfoList = new ObservableCollection<IExtractedFileInfo>(extractedFileInfoList); 
```

当然，这会在过程结束时将整个结果列表放入 Xaml 列表框中。我想实现这个过程，以便在 ReactiveExtensions 拉入每个 IExtractedFileInfo 对象时填充 Xaml 列表框。我只是找不到任何有关如何编排此过程的示例。我对层之间的分离以及如何使用 ReactiveExtension 让它们一起工作感到困惑。我想我可以在我的业务层中编写查询，但是如何将结果传输到 MVVM 并显示在我的显示线程上？我是否将 ObservableCollection 属性从我的 MVVM 传递到我的业务层并在那里填充？或者，我是否将所有查询都拉到 MVVM 并从那里运行整个过程？如你所见，我第三次下去了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:55:16.923

您的服务层可以公开一个`IObservable<IExtractedFileInfo>`. 然后，您的视图模型将订阅它并将它收到的任何项目推送到`ObservableCollection<IExtractedFileInfo>`（您的视图绑定到的）中。当然，它需要订阅 UI 线程。

然后，您的服务层无需在收到项目时保留它们，并且您的 VM 可以自由地使用响应式扩展的所有优点来一起执行批处理项目或延迟它们的应用程序之类的事情。

# .htaccess - htaccess 将 param=NUMBER 重写为 /text

> ID：10805050
> 
> 赞同：1
> 
> 时间：2012-05-29T18:59:18.753
> 
> 标签：.htaccess, redirect, url-rewriting, rewritemap

我试图弄清楚如何从以下内容重写 URL：example.com/collection.php?collection=1

进入：example.com/collection-name.php

我最近重新设计了一个电子商务网站，需要将旧 URL 重定向到新 URL。我已经看到了大量关于如何在重写的 URL 中使用 collection=1 的值的说明，但没有看到如何使用文本而不是值的说明。只有 5 个集合值需要重定向，但此外还有旧 URL，其中包含多个参数，也需要作为文本重写/重定向。我认为这是有道理的。

因此，我认为如果我可以设置初始重定向，我可以将它们全部解决。

其他/更复杂的旧 URL 如下所示：example.com/collection.php?collection=1&product=2&item=3

然后需要将其重定向到：example.com/collection-name/sub-collection-name/product-name.php

不知道该怎么做。我不想在 .htaccess 文件中逐行编写，但我不知道如何完成此操作。

在此先感谢，我感谢安迪和在这件事上的所有帮助！

EDIT------------------------------------ 这是我根据提供给的信息的新重写条件和规则我。这将是包含所有查询参数的 URL 使用 3 个单独的 RewriteMaps 的规则。

```
RewriteCond %{QUERY_STRING} collection=([^&]+)&product=([^&]+)&item=([^&]+)
RewriteRule collection.php shop/${categorymap:%1}/${rangemap:%2}/${productmap:%3}\.php [R=301,L] 
```

请让我知道是否有任何问题或我错过了什么。不确定我是否需要为每个查询参数使用 $1、$2、$3。我仍然是一个重写的 NOOB。谢谢！

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - -----

在我的 .htaccess 文件中使用以下代码：

```
RewriteCond %{QUERY_STRING} collection=([^&]+)
RewriteRule collection.php shop/${categorymap:%1}\.php [R=301,L] 
```

我的网址以“example.com/collection.php?collection=1”开头

正在重写为：example.com/shop/.php?collection=1

我对此有点迷茫。会不会是我的重定向地图没有被读取？或者是别的什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:05:44.000

您想研究使用[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)。您可以为收藏、子收藏和产品指定所需的地图，然后查找每个编号的文本。

所以你会在你的虚拟主机配置中定义一个 RewriteMap 类似的东西

```
RewriteMap categmap txt:/path/to/category/map.txt 
```

然后你的重写规则看起来像

```
RewriteCond %{QUERY_STRING} collection=([^&]+)
RewriteRule collection.php ${categmap:%1} [L,R] 
```

为您更复杂的情况添加更多`RewriteCond`的 s 并从中制定单独的规则。首先在文件中放置更具体的规则，然后是更一般的规则。

# google-drive-api - 将一个文件保存到两个文件夹

> ID：10805052
> 
> 赞同：0
> 
> 时间：2012-05-29T18:59:36.030
> 
> 标签：google-drive-api

在 Google Docs 格式中，我可以通过选中多个框将一个文件保存到两个（或更多）文件夹中。现在我已经切换到 Google Drive，我发现已经在多个文件夹中的文件保持不变，但我无法将新文件保存到两个（或更多）文件/集合中。我是在做某事不正确还是故意改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:13:54.623

将文件拖到所需的文件夹，然后按 Ctrl 键，然后再将其放下。动作从 Move 变为 Add（西班牙语中的 mover/Añadir）。您将获得一个具有加入共享权限的链接文件

# c# - 具有相同方法的多个类

> ID：10805053
> 
> 赞同：0
> 
> 时间：2012-05-29T18:59:39.927
> 
> 标签：c#, .net, oop

我在一个项目中有很多类都需要有一组相同的构造函数和 1 个公共方法。下面是这个部分类的一个例子：

```
public partial class SHIPMENT_LINE
{
     private OracleConnection _rp = null;
     private EntityConnection _rpe = null;
     private static string _schema = "";

     public SHIPMENT_LINE() { }

     public SHIPMENT_LINE(BHLibrary.Configuration.ConnectionOption Environment)
     {
         SetConnection(Environment);
     }

     public void SetConnection(BHLibrary.Configuration.ConnectionOption Environment)
     {
         this._rp = Configuration.RPConnection(Environment);
         this._rpe = Configuration.RPEntityConnection(Environment, out _schema);
     }
} 
```

`SetConnection`我需要在我创建的每个类上实现相同的私有变量、构造函数和方法。在这一切都存在于每个班级之后，那么每个班级都会做不同的事情，因此这些班级不一定都是相关的，除了它们都有相同的“开始”之外。

我应该如何构建这些类中的每一个，这样我就不必`SetConnection`在我创建的每个类中实现这个方法？

请记住这一点：

*   由于其他限制，我不能从任何这些类中的另一个类继承。但是，如有必要，我**可以使用接口。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:04:19.817

如果您不能子类化，那么抽象类不是一个可行的解决方案，接口只会为您提供通用类所遵循的合同，而无需任何实现。

我建议在公共类中实现公共功能，并将其用作其他类中的私有成员（IE 组合而不是继承）。您的其他类都可以实现一个接口以确保它们都具有相同的方法，并且它们可以将它们的调用转发到该方法的私有类实现。

例如

```
private MYClassWithCommonFunctionality xyz = new MYClassWithCommonFunctionality(); 
```

进而...

```
Private void MyCommonInterfaceMethod(object param)
{
    // Do derived class specific stuff here...
    xyz.MyCommonInterfaceMethod(param);
} 
```

作为额外的奖励和一些前瞻性的思考......让公共类也共享相同的接口并将其实现传递给您的其他类构造函数。这样，将来您可以将实现换成另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:06:15.307

我建议去组合而不是继承......

让每个类实现一个接口，然后有另一个类（与这些类无关）也实现了接口并具有它的具体实现。您上面提到的所有类都应该有这个附加类的实例，并且只需调用它即可。

例子

```
public partial class SHIPMENT_LINE : ISetConnection
{
   private ConnectionSetter connector = new ConnectionSetter();

   public void SetConnection(BHLibrary.Configuration.ConnectionOption Environment)
   {
      this.connector.SetConnection(Environment);
   }
}

public class ConnectionSetter : ISetConnection
{
    public void SetConnection(BHLibrary.Configuration.ConnectionOption Environment)
   {
      // Implementation
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:02:38.927

如果您无法创建一个将实现您的通用功能的基类（任何原因？），那么您可能可以使用 T4 模板通过您的通用方法生成部分类。

# selenium - 如何避免使用 selenium Web 驱动程序在后台等待请求？

> ID：10805054
> 
> 赞同：-1
> 
> 时间：2012-05-29T18:59:45.420
> 
> 标签：selenium, web, driver

我刚开始使用 Selenium Web Driver 来测试一个网上银行交易应用程序。

我喜欢它，但有些东西让我烦恼。假设我使用以下代码访问登录屏幕：

```
 driver.get("https://webdev.myurl:18113/");
    WebElement element = driver.findElement(By.name("username"));
    element.sendKeys("xxxx");
    element.submit(); 
```

浏览器启动，页面加载和显示。但看起来页面尝试从外部站点加载元素，而 findElement（第 2 行）等待这些请求完成！

有没有办法绕过这种行为？

我也试过这个：

```
 WebElement element = (new WebDriverWait(driver, 10)).until(new  ExpectedCondition<WebElement>() {
        @Override
        public WebElement apply(WebDriver d) {
            return d.findElement(By.name("username"));
        }
    }); 
```

但这无济于事，因为这一行似乎仅在页面完全加载时才执行。

编辑：我和这里的一个人谈过。他告诉我ipinvite.iperceptions.com 不是我们的应用程序调用的。！！！事实上，当我在 FF 中加载网站时，我没有看到这个调用？！

Selenium 网络驱动程序是否调用此站点：ipinvite.iperceptions.com？

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:10:28.217

您可以尝试将隐式等待时间和页面加载时间设置为 0。谷歌“selenium 隐式等待时间”和“selenium 页面加载时间”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:33:34.997

功能超时`get`尚未实现。创建新的 FirefoxDriver 时，构造函数中有重载，允许您指定命令超时，这是等待每个命令的最长时间。

你可以参考这篇[文章的答案](https://stackoverflow.com/questions/10606703/selenium-webdriver-how-to-set-page-load-timeout-using-c-sharp/10607002#comment13970414_10607002)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-29T19:46:15.553

好的，我发现了问题。我将设置代理参数的 FirefoxProfile 的 setPreference 注释掉了。我注意到无论如何我都不需要它们。现在不再需要调用这个奇怪的 ipinvite.iperception.com 了！

感谢您花时间回复

问候

# attributes - er模型中的实体和属性

> ID：10805057
> 
> 赞同：0
> 
> 时间：2012-05-29T19:00:02.143
> 
> 标签：attributes, entity

简单的问题：

我有呃模型。我有实体汽车。汽车可以是宝马或欧宝。如果是宝马，那么它必须有颜色。如果它是欧宝，那么它必须具有属性 - 乘客数量。

er模型中如何显示？我的意思是IF类。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:35:53.207

在 ER 模型中，这通常表示为子类型。

[http://en.wikipedia.org/wiki/Enhanced_entity%E2%80%93relationship_model](http://en.wikipedia.org/wiki/Enhanced_entity%E2%80%93relationship_model)

子类型可以是独占的或非独占的，这取决于是否应同时应用多个子类型。例如，银行账户实体可能有活期账户或储蓄账户的子类型。这些将是排他的子类型，因为银行账户不能两者兼而有之。根据账户的类型，其中一种子类型用于“扩展”主实体。另一方面，名为 Sportsman 的实体可能具有 Golfer 和 Footballer 子类型。Sportsman 实体将包含通用信息，例如姓名，而子类型将仅包含适用于该运动的附加属性（例如 Golf Handicap）。仅当主实体属于适用类型时，记录才存在于子类型实体中。

在 IDEF1X 表示法中，它表示如下

![http://commons.wikimedia.org/wiki/File:IDEF1X_SubSuper.png?](../Images/812eaf2cfef3a482a3c77d7f551b074f.png)

# java - 如何使 m2e-android 包含用于 apk 打包的本机 deps？

> ID：10805058
> 
> 赞同：2
> 
> 时间：2012-05-29T19:00:07.867
> 
> 标签：java, android, eclipse, maven, m2eclipse

[这个问题](https://stackoverflow.com/questions/10506624/sensibility-of-combined-maven-antivy-build-management-for-dual-platform-desktop)的后续。我正在使用 libgdx，因此根据[此 wiki 页面](https://code.google.com/p/maven-android-plugin/wiki/NativeLibsAsDependencies)，在我的 POM 中添加了（除其他外）以下部门：

```
 <dependency>
            <groupId>com.badlogic</groupId>
            <artifactId>libgdx-armeabi-gdx</artifactId>
            <version>${libgdx.version}</version>
            <scope>runtime</scope>
            <type>so</type>
        </dependency>

        <dependency>
            <groupId>com.badlogic</groupId>
            <artifactId>libgdx-armeabi-androidgl20</artifactId>
            <version>${libgdx.version}</version>
            <scope>runtime</scope>
            <type>so</type>
        </dependency> 
```

where`libgdx.version`是我在 POM 中设置的属性（当前为 0.9.3，所有工件都加载到 repo 中，更改了 libgdx 本机加载顺序以考虑非标准文件名等）。

这是问题所在：我在 Eclipse 中使用带有 m2e-android 连接器的 ADT，*当我从 ADT 启动项目时*，它无法在 APK 中找到这些本机库。

另一方面，*如果我使用适当的 Maven 目标启动*，APK 构建良好，这些 .so 库正确放置在 lib/armeabi 中。

这是当前版本的 m2e-android 的缺陷吗（我确实注意到 GitHub 上的一些错误，但这些错误与 NDK 开发有关，而不是本机依赖项本身）， **我只需要等待新版本吗？或者我可以在我的 POM 中添加一些会导致 m2e-android “看到”那些 deps 的东西吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:16:51.300

不幸的是，m2e-android 还不支持原生库依赖。我们意识到了这个问题，并且这些问题都存在。我们可以直接实现对原生库的支持：

[https://github.com/rgladwell/m2e-android/issues/71](https://github.com/rgladwell/m2e-android/issues/71)

或者我们可以用 Maven APK 构建器替换 ADT APK 原生构建器：

[https://github.com/rgladwell/m2e-android/issues/67](https://github.com/rgladwell/m2e-android/issues/67)

补丁和拉取请求感激地考虑。

# grails - 使用 Grails Spring DSL 的 Bean 定义需要索引/类型/名称参数

> ID：10805062
> 
> 赞同：2
> 
> 时间：2012-05-29T19:00:41.720
> 
> 标签：grails, grails-config

在resources.groovy 中，我试图定义一个名为“sql”的bean，它是一个使用应用程序定义的dataSource 构造的groovy.sql.Sql。

```
sql(groovy.sql.Sql, 'firstArgument', ref('dataSource') ) {} 
```

不幸的是，这失败了——

执行脚本控制台出错：org.springframework.beans.factory.BeanCreationException：创建名称为“sql”的 bean 时出错：无法解析匹配的构造函数（提示：为简单参数指定索引/类型/名称参数以避免类型歧义）。

我查看了[http://grails.org/doc/1.3.x/guide/14.%20Grails%20and%20Spring](http://grails.org/doc/1.3.x/guide/14.%20Grails%20and%20Spring)但没有关于用于指定参数以避免类型歧义的合法语法的更多信息，超出了使用的示例“第一个论点”。

我尝试传递“dataSource”和“javax.sql.DataSource”而不是“firstArgument”，都没有加引号和双引号，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:02:29.817

grails 文档中给出的示例会误导您。他们正在构造一个带有两个参数的类的实例；第一个是字符串，第二个是 int。你会想要这样的东西：

```
sql(groovy.sql.Sql, ref('dataSource') ) {} 
```

# zend-framework - 为什么使用 zend 表单装饰器而不是单独渲染？

> ID：10805063
> 
> 赞同：3
> 
> 时间：2012-05-29T19:00:44.703
> 
> 标签：zend-framework, zend-form

我几乎走到了尽头，试图使用装饰器来设计我的 Zend 表单。以前为了避免这些问题，我会创建一个扩展 zend_form 的表单脚本，添加我需要的任何验证器、标签等，然后使用 `$form->getElement('my_form_element');`
我可以在元素周围包装我想要的任何 css 标签的方式从我的视图脚本中检索元素。我想我应该学习如何使用内置的装饰器，但我开始觉得这是在浪费我的时间。我的旧方法似乎更容易，我看不到有什么原因可以更好地使用自定义装饰器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:37:27.757

如果您的表单有特定的可重复标记，装饰器可以派上用场，例如，如果您想使用 Bootstrap。除此之外，特别是如果你有一个好的 html/css 人，我会避免他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:31:02.127

通常，装饰器用于动态添加功能，而无需触及代码的核心功能并更好地重用代码。然而`Zend_Form`，我认为装饰器系统（以及`Zend_Form`一般情况下）是不直观的并且严重过度设计，因此它与它应该做的完全相反：帮助开发人员更快地创建更好、更直观的代码。

在我看来，`Zend_Form_Decorator`只有在您计划在整个项目中在多种不同类型的元素上重用一些扩展逻辑的情况下，使用 才有意义。

让我举两个例子：

1.  您想在带有漂亮图标和精美 JavaScript 悬停框的任意表单元素旁边添加一个工具提示图标。
2.  应在输入数据时直接验证元素，方法是发布 AJAX 请求并在元素旁边添加成功的绿色复选标记或失败的红色十字图标。

使用装饰器，您现在可以将添加功能的逻辑与底层元素的逻辑分开，因此您可以使用相同的代码将工具提示和/或实时验证功能添加到文本框元素以及任何其他元素，只需通过将您想要的所有装饰器添加到元素。

Zend Framwork 的首席开发人员 Matthew Weier O'Phinney 也有一篇很棒的文章，它提供了一些关于使用装饰器的动机的背景知识以及许多示例：[使用 Zend_Form 的装饰器](http://devzone.zend.com/1240/decorators-with-zend_form/)

# iphone - iOS 无法以编程方式设置元素位置

> ID：10805067
> 
> 赞同：0
> 
> 时间：2012-05-29T19:00:53.837
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我无法以编程方式设置标签和图像位置。我试图设置为，

```
navBarSocial.frame = CGRectMake(navBarSocial.frame.origin.x, navBarSocial.frame.origin.y, webView1.frame.size.width, navBarSocial.frame.size.height);

 status.frame = CGRectMake(100, 50, status.frame.size.width, status.frame.size.height);
 loadingImage.frame = CGRectMake(100, 50, loadingImage.frame.size.width, loadingImage.frame.size.height); 
```

navBarSocial 适当增加其宽度，但标签（状态）和 loadingImage 保持在同一位置。我还设置了在 xib 上停用的自动调整属性，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:08:35.590

不确定你的问题。您谈到位置，这是有道理的，它们保持在与您将它们静态设置为 x = 100 和 y = 50 相同的位置。就尺寸而言，您似乎将尺寸设置为项目的当前尺寸。换句话说，您将当前大小作为您想要设置您尝试调整大小的元素的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:08:09.187

```
 loadingImage.frame = CGRectMake(100, 50, loadingImage.frame.size.width, loadingImage.frame.size.height); 
```

`loadingImage`将其宽度设置为宽度，将高度设置为高度。你期望改变什么？您可能需要将宽度和高度更改为与已有的不同的值。
设置几何图形应该在`viewWillAppear:`和`viewDidAppear`方法中完成。还要检查您的插座连接。
顺便说一句，只使用属性，而不是 ivars。

# asp.net - ASP.NET 是否限制单个对象的内存使用？256MB 字节数组抛出 OutOfMemoryException

> ID：10805069
> 
> 赞同：3
> 
> 时间：2012-05-29T19:01:18.400
> 
> 标签：asp.net, memory

我有一个 ASP.NET 应用程序。

以下引发 System.OutOfMemoryException：

```
byte[] test = new byte[268435456]; 
```

在我调用这个的时候，当前的内存使用量是 158MB，每

```
System.Diagnostics.Process proc = System.Diagnostics.Process.GetCurrentProcess();
long value = proc.PrivateMemorySize64; 
```

在本地，我运行的是 32 位 Windows 7，而在生产中我们是 64 位的 Windows Server 2008R2。两个盒子都有4GB内存。虽然我的盒子每个 Windows 任务管理器大约 5GB，但生产盒子小于 3GB。无论哪种方式，两个盒子都有可用的内存（我在页面文件上）。创建长度为 256MB（268435456 字节）的字节数组是否有超过 256MB 的开销？ASP.NET 中是否存在继承限制？

编辑：2008R2 框上应用程序池的“私有内存限制”设置为 0（无限制）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:11:12.947

发生内存不足异常的原因是 .net 无法从大堆中分配足够的连续内存。即使您的系统有 4gb 的内存，用户空间最大为 2gb。

这在我的具有 4GB 内存的 Windows 7 64 位版本的 Windows 上运行良好。

# android - 查找已使用 registerReceiver() 注册的广播接收器

> ID：10805074
> 
> 赞同：1
> 
> 时间：2012-05-29T19:01:43.250
> 
> 标签：android, android-intent

我试图找出是否已经设置了广播接收器来接收某些意图。（注意：这些将在不同的应用程序中，所以我不能只跟踪，我需要一个更动态的解决方案。）

我已经知道 packageManager.querybroadcastreceiver() 不会找到这些。

有没有其他方法可以做到这一点？我可以查看是否收到了我的 Intent 吗？

我想做的最后一件事是使用计时器....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:06:03.560

如果您自己控制所有这些接收器，或者可以对它们强制执行某些行为，您可以尝试使用[sendOrderedBroadcast](http://developer.android.com/reference/android/content/Context.html#sendOrderedBroadcast%28android.content.Intent,%20java.lang.String,%20android.content.BroadcastReceiver,%20android.os.Handler,%20int,%20java.lang.String,%20android.os.Bundle%29)方法。请注意，您可以定义一个“resultReceiver”，它将在调用所有其他接收器之后调用。

因此，如果您可以强制其他接收器以某种方式运行，您可以更改 resultCode 甚至在它们获得意图时中止广播，这样在您的 resultReceiver 中您将能够判断是否调用了其他接收器

# javascript - 使替换函数不区分大小写

> ID：10805076
> 
> 赞同：4
> 
> 时间：2012-05-29T19:01:48.643
> 
> 标签：javascript, jquery, replace, case-insensitive

我有一个用图像表情符号替换文字表情符号等的功能

我怎样才能使这个不区分大小写？我曾尝试在替换器中使用“gi”和“ig”，但似乎没有什么区别

```
var emots = {
    ':)' : 'smile',
    ':-)' : 'smile',
    ';)' : 'wink',
    ';-)' : 'wink',
    ':(' : 'downer',
    ':-(' : 'downer',
    ':D' : 'happy',
    ':-D' : 'happy',
    '(smoke)' : 'smoke',
    '(y)' : 'thumbsup',
    '(b)' : 'beer',
    '(c)' : 'coffee',
    '(cool)' : 'cool',
    '(hehe)' : 'tooth',
    '(haha)' : 'tooth',
    '(lol)' : 'tooth',
    '(pacman)' : 'pacman',
    '(hmm)' : 'sarcastic',
    '(woot)' : 'woot',
    '(pirate)' : 'pirate',
    '(wtf)' : 'wtf'
};

function smile(str){
    var out = str;
        for(k in emots){
            out = out.replace(k,'<img src="/emoticons/'+emots[k]+'.gif" title="'+k+'" />','g');
        }
    return out;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:16:16.420

改变：

```
out = out.replace(k,'<img src="/emoticons/'+emots[k]+'.gif" title="'+k+'" />','g'); 
```

到：

```
out = out.replace(new RegExp(k.replace(/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"), 'ig'), '<img src="/emoticons/'+emots[k]+'.gif" title="'+k+'" />'); 
```

从此答案中获取的正则表达式转义函数[转义字符串以用于 Javascript 正则表达式](https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex#6969486)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:27:28.210

这比表面上看起来要棘手一些。以下是一个完整的解决方案。为了简单和高效，它只对目标字符串使用一个正则表达式搜索。

请注意，因为它不区分大小写（例如，`(hehe)`和`(HeHe)`被视为相同），`:-d`所以也被视为相同`:-D`。

```
var emots = {
    ':)' : 'smile',
    ':-)' : 'smile'
    // Add the rest of your emoticons...
};

// Build the regex that will be used for searches
var emotSearch = [];
for (var p in emots) {
    if (emots.hasOwnProperty(p)) {
        emotSearch.push(p.replace(/[-[{()*+?.\\^$|]/g, '\\$&'));
        if (p !== p.toLowerCase()) {
            emots[p.toLowerCase()] = emots[p];
        }
    }
}
emotSearch = RegExp(emotSearch.join('|'), 'gi');

function smile(str) {
    return str.replace(emotSearch, function ($0) {
        var emot = $0.toLowerCase();
        if (emot in emots) {
            return '<img src="/emoticons/' + emots[emot] + '.gif" title="' + $0 + '" />';
        }
        return $0;
    });
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-29T20:17:57.393

或者只是在运行检查之前在输入上使用 .toLowerCase() ？

# javascript - javascript流包装器，拦截JS文件内容

> ID：10805078
> 
> 赞同：0
> 
> 时间：2012-05-29T19:02:06.337
> 
> 标签：javascript

在 PHP 中有一个名为**stream_wrapper_register**的函数。有了它，我可以获得每个即将包含的 PHP 文件的文件内容。所以这基本上让我可以控制将被解析的“代码”。

我想知道javascript中是否也有类似的东西？所以假设我包括我的文件：

```
<script type="text/javascript" src="js/myfile.js"></script> 
```

然后我在该文件中的代码设置了流包装器（假设这在 JS 中也可用）。现在我希望能够获取将包含的每个其他 javascript 文件的文件内容：

```
<script type="text/javascript" src="js/somefile.js"></script>
<script type="text/javascript" src="js/someotherfile.js"></script> 
```

但这当然必须在浏览器实际执行这些文件之前发生。

那么有没有办法以某种方式拦截呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:29:36.627

```
$.ajax("/path/to/javascript.js").done(function(source) {
    eval(transmogrifySourceCode(source));
}); 
```

我使用了 jQuery 语法，因为 AJAX 样式的获取方式更容易，而且您必须提供自己的`transmogrifySourceCode`函数来在加载源代码之前对其进行编辑。

不过，我确实想知道您为什么要这样做。您应该完全控制您的输入源，那么为什么不直接在服务器上删除您不想要的代码呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:47:18.080

不，你不能。出于安全原因，您将不允许单独获取每个脚本的内容。

对于 Opera，有一个可以[从](http://www.opera.com/docs/userjs/specs/#evlistener)本地用户脚本监听的特殊[`BeforeScript`事件。](http://www.opera.com/docs/userjs/specs/#userjsevent)

因此，没有（好的）方法可以检测`<script>`页面中的（动态添加的）元素并阻止它们加载和执行脚本。然而，您可以通过 ajax 加载脚本文件，尊重同源策略（！），并按照@DavidEllis 的建议评估其修改后的内容。

否则，您需要代理服务器上的所有脚本包含并在那里修改它们。

# jquery - 使用 jQuery：使用 .before() 将 div 包装在另一个 div 中

> ID：10805083
> 
> 赞同：2
> 
> 时间：2012-05-29T19:02:23.703
> 
> 标签：jquery

我正在尝试使用 jQuery 在以下代码周围添加一个 div：

```
<div class="fsSubField">
<input id="field15744501-zip" class="fsField fsFieldZip fsFormatZipCA" type="text" value="" size="8" name="field15744501-zip">
<br>
<label class="fsSupporting" for="field15744501-zip">Postal Code</label>
</div> 
```

所以最后我有：

```
<div class="fsSubFieldGroup" style="margin-top:5px;">
<div class="fsSubField">
<input id="field15744501-zip" class="fsField fsFieldZip fsFormatZipCA" type="text" value="" size="8" name="field15744501-zip">
<br>
<label class="fsSupporting" for="field15744501-zip">Postal Code</label>
</div>
</div> 
```

我尝试了以下方法：

```
$('input.fsFormatZipCA').parent().before('<div> class="fsSubFieldGroup" style="margin-top:5px;">');
$('input.fsFormatZipCA').parent().after('</div>'); 
```

由于表单的动态特性，我需要能够将选择基于“input.fsFormatZipCA”

我认为这会起作用，但问题是 jQuery 正在执行以下操作：

```
<div class="fsSubFieldGroup" style="margin-top: 5px;"></div>
<div class="fsSubField">
<input id="field15744501-zip" class="fsField fsFieldZip fsFormatZipCA" type="text" value="" size="8" name="field15744501-zip">
<br>
<label class="fsSupporting" for="field15744501-zip">Postal Code</label>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:05:10.610

您似乎正在寻找`.wrap`：

```
$('input.fsFormatZipCA').parent().wrap(
  $('<div>', {
    'class': 'fsSubFieldGroup',  // class is a reserved word
    css: {
      'margin-top': 5  // - is an invalid identifier character
    }
  })
); 
```

`.before`*在元素*之前插入一个元素。它不会通过简单地添加 HTML 字符串来构造 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:05:24.840

使用`.wrap()`：

```
$('input.fsFormatZipCA').parent().wrap('<div class="fsSubFieldGroup" style="margin-top:5px;">'); 
```

jQuery 文档中的更多信息：http: [//api.jquery.com/wrap/](http://api.jquery.com/wrap/)

* * *

*旁注：您可能会注意到该`.wrap()`函数为您添加了 hte `</div>`。它使事情变得容易得多。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:05:34.073

我建议：

```
$('.fsFormatZipCA').parent().wrap('<div class="fsSUbFieldGroup" />'); 
```

# coffeescript - 子类化原生对象：instanceof 无法正常工作

> ID：10805084
> 
> 赞同：17
> 
> 时间：2012-05-29T19:02:29.953
> 
> 标签：coffeescript

我正在尝试对`Error`CoffeeScript 中的本机 JS 对象进行子类化以获得专门的错误类型，但我发现`instanceof`如果我没有在子类中定义构造函数，则无法正常工作：

```
class SimpleError extends Error
class EmptyConstructorError extends Error
  constructor: ->
class SuperConstructorError extends Error
  constructor: -> 
    super

new SimpleError instanceof SimpleError                     # -> false
new EmptyConstructorError instanceof EmptyConstructorError # -> true
new SuperConstructorError instanceof SuperConstructorError # -> true 
```

问题似乎是由[生成的 JS](http://jashkenas.github.com/coffee-script/#try:class%20SimpleError%20extends%20Error%0Aclass%20EmptyConstructorError%20extends%20Error%0A%20%20constructor%3A%20-%3E%0Aclass%20SuperConstructorError%20extends%20Error%0A%20%20constructor%3A%20-%3E%20super%0A%0Aconsole.log%20new%20SimpleError%20instanceof%20SimpleError%0Aconsole.log%20new%20EmptyConstructorError%20instanceof%20EmptyConstructorError%0Aconsole.log%20new%20SuperConstructorError%20instanceof%20SuperConstructorError%0A)构造函数的定义方式引起的。当我*没有*在 CoffeeScript 中定义构造函数时：

```
SimpleError = (function(_super) {

  __extends(SimpleError, _super);

  function SimpleError() {
    return SimpleError.__super__.constructor.apply(this, arguments);
  }

  return SimpleError;

})(Error); 
```

当我*在*CoffeeScript 中定义一个构造函数时：

```
SuperConstructorError = (function(_super) {

  __extends(SuperConstructorError, _super);

  function SuperConstructorError() {
    SuperConstructorError.__super__.constructor.apply(this, arguments);
  }

  return SuperConstructorError;

})(Error); 
```

如您所见，第`return`一种情况的区别很简单。我不明白为什么这会对`instanceof`行为产生任何影响，因为超级构造函数只是被应用于`this`对象（即超级构造函数没有被调用`new`），但是我还是不明白很多JS 构造函数是如何工作的 =P

奇怪的是，这种行为似乎只发生在对原生 JS 对象进行子类化时。如果我将 CoffeeScript 类子类化，一切都会按预期工作。

关于为什么会发生这种情况的任何想法，以及我如何避免编写虚拟构造函数只是为了让`instanceof`操作员正常工作？

谢谢！

## 更新

因此，用户 matyr[回答](https://stackoverflow.com/a/10807905/581845)了一个指向引入此行为的提交的链接，但它并不能完全解释这里发生了什么，所以我会尝试解释一下，以防其他人想知道为什么会这样.

主要问题是这个从 JavaScript 继承的讨厌的“特性”，它让我们定义了一个构造函数，它返回一个对象，而不是正在构造的对象：

```
function Foo() {
    return {'LOL': 'You fool!'};
}
new Foo() instanceof Foo // -> false 
```

还有一个事实是，一些本地构造函数，如,`Error`和诸如此类的构造函数不需要用 调用：如果你碰巧忘记了它们，它们只会返回相应类型的新对象。`Array``String``new`

最后，把这两个丑陋的东西加在一起，结果是如果你想让操作符正常工作，你应该记住写`class MyError extends Error then constructor: -> super`而不是更直观。这是因为 CoffeeScript 的隐式构造函数将只返回父构造函数返回的任何内容，在这种情况下，它将只返回一个新的错误对象，而不是作为参数传递的对象。耶！`class MyError extends Error``instanceof``MyError``return Error.apply(this, arguments)``this`

## 更新 2（2013 年 2 月 25 日）

此问题[已在 CoffeeScript 1.5.0 中修复](http://coffeescript.org/#changelog)！=D

现在扩展本机对象按预期工作：

```
class MyError extends Error
new MyError instanceof MyError # -> true :) 
```

## 更新 3（2013 年 3 月 4 日）

Aaand 它已经在 1.6.0 =P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:58:11.970

无论好坏，在 1.3.1`return`中[添加](https://github.com/jashkenas/coffee-script/commit/080ed2e8dd98bba1bff85dd413fa11f1d4014e92)了以修复[#1966](https://github.com/jashkenas/coffee-script/issues/1966)（和[#2111](https://github.com/jashkenas/coffee-script/issues/2111)）。

# c - 抗碎片化微控制器堆算法

> ID：10805087
> 
> 赞同：7
> 
> 时间：2012-05-29T19:02:45.543
> 
> 标签：c, algorithm, heap-memory, microcontroller

我希望在 C 中为内存受限的微控制器实现堆分配算法。我已将搜索范围缩小到我知道的 2 个选项，但是我非常愿意接受建议，并且我正在寻找任何有这方面经验的人的建议或意见。

**我的要求：**

-速度肯定很重要，但它是次要问题。

- 时序确定性并不重要——任何需要确定性最坏情况时序的代码部分都有自己的分配方法。

- 主要要求是碎片免疫。该设备正在运行一个 lua 脚本引擎，这将需要一系列分配大小（在 32 字节块上很重）。主要要求是该设备能够长时间运行而不会将其堆搅成不可用状态。

**另请注意：**

-作为参考，我们谈论的是 Cortex-M 和 PIC32 部件，内存范围从 128K 到 16MB 或内存（重点放在低端）。

-我不想使用编译器的堆，因为 1）我希望所有编译器的性能保持一致，以及 2）它们的实现通常非常简单，并且对于碎片来说相同或更糟。

- 由于我不想从根本上更改和重新验证庞大的 Lua 代码库，双重间接选项已被淘汰。

**到目前为止我最喜欢的方法：**

1）有一个二进制伙伴分配器，并牺牲内存使用效率（四舍五入到2的幂）。- 这（据我所知）需要一个二叉树为每个订单/箱存储按内存地址排序的空闲节点，以便快速查找伙伴块以进行重新链接。

2) 有两棵用于空闲块的二叉树，一棵按大小排序，一棵按内存地址排序。（所有二叉树链接都存储在块本身中） - 分配将最适合使用按大小查找表，然后按地址从另一棵树中删除该块 - 解除分配将按地址查找相邻块以进行重新链接

- 两种算法还需要在分配块开始之前存储分配大小，并让块以 2 减 4 的幂（或 8 取决于对齐方式）的形式出现。（除非他们在其他地方存储一棵二叉树来跟踪按内存地址排序的分配，我认为这不是一个好的选择）

- 两种算法都需要高度平衡的二叉树代码。

-算法 2 不要求通过四舍五入到 2 的幂来浪费内存。

-在任何一种情况下，我可能都会有一个固定的 32 字节块组，由嵌套位字段分配，以卸载这个大小或更小的块，这将不受外部碎片的影响。

**我的问题：**

- 有什么理由说明方法 1 比方法 2 更不受碎片的影响？

- 有没有我遗漏的可能符合要求的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:29:36.587

如果块大小没有四舍五入到 2 的幂或某个等值 (*)，则某些分配和解除分配序列将产生基本上无限量的碎片，即使在任何给定时间存在的非永久小对象的数量是有限的。二进制伙伴分配器当然会避免该特定问题。否则，如果使用有限数量的良好相关对象大小但不使用“二进制伙伴”系统，则可能仍然需要使用一些判断来决定在哪里分配新块。

另一种需要考虑的方法是对预期为永久、临时或半永久的事物采用不同的分配方法。当临时和永久的东西在堆上交错时，碎片通常会造成最大的麻烦。避免这种交错可以使碎片最小化。

最后，我知道您并不是真的想使用双间接指针，但是允许对象重定位可以大大减少与碎片相关的问题。许多源自微软的微型计算机 BASIC 使用垃圾收集字符串堆；微软的垃圾收集器真的很糟糕，但它的字符串堆方法可以与一个好的方法一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:38:14.680

[您可以在http://www.mcdowella.demon.co.uk/buddy.html](http://www.mcdowella.demon.co.uk/buddy.html)上选择一个（从未真正使用过的）Buddy 系统分配器，我会祝福您用于任何您喜欢的目的。但我不认为你有一个仅仅通过插入内存分配器就可以轻松解决的问题。我熟悉的长期运行的高完整性系统具有可预测的资源使用情况，在每个资源的 30 多页文档中进行了描述（主要是 cpu 和 I/O 总线带宽 - 内存很容易，因为它们倾向于在每次启动时分配相同的数量然后再也不会）。

在您的情况下，没有任何通常的技巧 - 静态分配、空闲列表、堆栈上的分配，可以证明是有效的，因为 - 至少正如我们所描述的 - 你有一个 Lua 解释在后台悬停准备做什么谁知道在做什么运行时——如果它只是进入一个分配内存的循环直到它用完怎么办？

您能否将内存使用分为两部分 - 传统代码在启动时分配几乎所有它需要的东西，并且永远不会再分配，而可消耗代码（例如 Lua）允许在需要时分配它需要的任何东西，从之后剩下的任何东西静态分配？如果消耗性代码设法使用其所有内存区域或对其进行分段，而不打扰传统代码，您是否可以触发重新启动或某种形式的清理？

# redirect - Powershell：将用户输入的回显重定向到多个文本文件

> ID：10805090
> 
> 赞同：1
> 
> 时间：2012-05-29T19:02:57.867
> 
> 标签：redirect, powershell

首先，我对 Powershell 和脚本非常陌生，一般来说，非常感谢您的耐心等待。

我有一个脚本，将用户输入的值（完全限定域名）写入名为“servers.txt”的文档。相反，我想附加到位于不同位置的多个“servers.txt”副本。不幸的是，只有一个“servers.txt”文件不是一种选择，访问各种“servers.txt”文件的各种脚本有时需要一个具有唯一数据的独立文件，但每隔几个月我必须使它们统一（或至少都包含某个条目）用于预定事件。

我检查了 out-file 的 get-help 并没有看到对多个输出的引用。我用谷歌搜索了一段时间，但似乎没有多少人想做我正在尝试的事情（或者我在问这个问题时做得很糟糕）。

这是脚本：

```
# This variable exists to ensure the loop continues forever. 
$yes="y"

#Information for the user
ECHO "This script adds your input to every servers.txt file. You may press "VIEW" at any time to see what currently exists in a servers.txt file"

#Loop. The script requests the FQDN or the command "exit" or "view". Exit ends the script, VIEW shows the current content of servers.txt. If an FQDN is tested for positively, it will append the user's value to servers.txt
do {

$a = read-host "Please Input Server FQDN here, or type EXIT to end the loop"

#test for command to quit (exit)
if  ($a -eq "exit")
    {
        exit

    }
#test for command to view contents of servers.txt
if  ($a -eq "view")
    {
        get-content servers.txt

    }
#if not exit or view, check if this is a proper FQDN
else
        {

        IF ($a -match "^[a-zA-Z0-9]+([a-zA-Z0-9\-\.]+)?\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU|internal)$")

#If test for FQDN is positive append value to servers.txt
            {
                echo $a | out-file "servers.txt" -append
            }
#If test fails, return error

        ELSE 
            {echo "Entry is Invalid"}

        }

}

#continue looping forever because YES always is equal to Y

while ($yes -eq "y") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:10:26.440

尝试添加内容：

```
"TESTING" | Add-Content -Path "C:\temp\test1.txt","C:\temp\test2.txt" 
```

# r - 来自 data.frame 的等高线图

> ID：10805093
> 
> 赞同：1
> 
> 时间：2012-05-29T19:03:01.957
> 
> 标签：r, contour

考虑以下：

```
temp <- array(sample(1:100,12), dim=c(365,12))
Depth <- as.vector(seq(1,12,by=1))
time <- seq(from=as.Date("2011-01-01"), to=as.Date("2011-12-31"), by=1)

Data <- data.frame(Time = time, Temp = as.matrix(temp))
colnames(Data) <- c("Datetime", paste(Depth,"m",sep = "")) 
```

不要考虑用于生成 data.frame 的 3 行，因为它们仅用于生成我目前正在使用的类似示例。data.frame 即“数据”由日期时间向量和在不同深度记录的相应温度测量值组成，其中每个测量值的深度作为列名给出。

由此我想生成温度曲线的填充等高线图。因此，我想将 DateTime 向量作为 x 值，将 col 标题作为 y 值，将 temp 作为 z 值。我将如何实现这一目标？

我刚刚从 matlab 转换为 R，所以很抱歉这可能是一个非常简单的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T19:35:27.450

Lattice 让这很容易，因为你的数据结构正确（长而细，而不是宽和短——你现在在后者中）

首先使用一些简单的数据操作将数据转换为所需的格式

```
## make the colnames numeric-ish
names(Data)[-1] <- sub("m", "", names(Data)[-1])
## stack the data
Data2 <- data.frame(Time = rep(Data$Datetime, times = ncol(Data)-1),
                    stack(Data[, -1]))
names(Data2)[-1] <- c("Temperature", "Depth")
## make Depth numeric
Data2 <- transform(Data2, Depth = as.numeric(as.character(Depth))) 
```

这给了我们：

```
> head(Data2)
        Time Temperature Depth
1 2011-01-01          84     1
2 2011-01-02          19     1
3 2011-01-03          25     1
4 2011-01-04          21     1
5 2011-01-05           1     1
6 2011-01-06          26     1 
```

使用函数加载`lattice`和绘制数据：`contourplot()`

```
require(lattice)
contourplot(Temperature ~ Time * Depth, data = Data2) 
```

对于这个示例数据集，它可能有助于使用

```
contourplot(Temperature ~ Time * Depth, data = Data2, labels = FALSE,
            region = TRUE) 
```

因为轮廓基本上是围绕小块数据形成的。

有关各种选项的更多信息，请参见`?contourplot`页面。

# mysql - “几乎”重复条目的 SQL 查询（最后 3 列的值相同）

> ID：10805095
> 
> 赞同：2
> 
> 时间：2012-05-29T19:03:09.303
> 
> 标签：mysql, sql

我需要有关 SQL 查询的帮助。我有一个包含许多条目的表，我想查询最后 3 列具有相同值的所有条目。

我的表如下所示：

```
|Refrigator|98C08A|2011-08-06 00:00:30|126|126
|Refrigator|B7BE29|2011-08-06 00:00:30|73|70
|Refrigator|599393|2011-08-06 00:00:30|126|126
|Refrigator|B7BE29|2011-08-06 00:00:29|73|70
|Refrigator|599393|2011-08-06 00:00:29|126|126
|Refrigator|599393|2011-08-06 00:00:29|126|126
|Refrigator|98C08A|2011-08-06 00:00:29|126|126
|Refrigator|98C08A|2011-08-06 00:00:29|126|126
|Refrigator|599393|2011-08-06 00:00:28|126|126 
```

所以我想获取所有行，它们对于最后 3 列具有完全相同的值，所以结果应该如下所示：

```
|Refrigator|98C08A|2011-08-06 00:00:30|126|126
|Refrigator|599393|2011-08-06 00:00:30|126|126
|Refrigator|599393|2011-08-06 00:00:29|126|126
|Refrigator|599393|2011-08-06 00:00:29|126|126 (if possible without this duplicate)
|Refrigator|98C08A|2011-08-06 00:00:29|126|126
|Refrigator|98C08A|2011-08-06 00:00:29|126|126 (if possible without this duplicate) 
```

有谁知道如何管理这个？到目前为止我尝试的是：

```
SELECT * 
FROM smtab 
WHERE Datetime IN (
      SELECT Datetime 
      FROM smtab 
      GROUP BY Datetime 
      HAVING count(Datetime) >1) 
AND Power1 IN (
      SELECT Power1 
      FROM smtab 
      GROUP BY Power1 
      HAVING count(Power1) >1) 
AND Power8 IN (
      SELECT Power8 
      FROM smtab 
      GROUP BY Power8 
      HAVING count(Power8) >1) 
ORDER BY Datetime DESC; 
```

但我没有工作！！！

希望可以有人帮帮我！提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:08:15.567

```
SELECT DISTINCT *
FROM   smtab NATURAL JOIN (
  SELECT   Datetime, Power1, Power8
  FROM     smtab
  GROUP BY Datetime, Power1, Power8
  HAVING   COUNT(*) > 1
) AS t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:07:23.260

我相信你正在寻找一个**自我加入**。看看[这个 SO answer](https://stackoverflow.com/questions/1284441/how-does-a-mysql-self-join-work)开始。您没有提及您希望排除哪些列，因此我无法提供任何代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:07:53.407

您的问题是您需要识别重复项、内部连接，然后找到匹配的所有内容。

`distinct`只允许返回每个重复项中的一个。

```
-- only select one of each duplicate.
select distinct *
  from smtab as a
        -- Find the duplicates
  join ( select datetime, power1, power8
           from smtab
          group by datetime, power1, power8
         having count(*) > 1) as b
      -- join back on to the main table
    on a.datetime = b.datetime
   and a.power1 = b.power1
   and a.power8 = b.power8 
```

您正在寻找所有 3 列中的重复项，而不是每个列。因此，您必须同时对所有 3 个进行分组才能找到您的重复项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T19:12:51.807

这种方法适用于我的数据模型和 SQL Server。不确定它是否适用于 MySQL。我正在将表加入派生查询。派生查询查找具有 > 1 条记录的所有记录。

```
select * from Employees as e
 inner join
(
select LastName, firstname from Employees 
 group by LastName, FirstName having COUNT(1) > 1
) as derived
on e.LastName = derived.lastname and e.FirstName = derived.firstname
order by e.LastName 
```

编辑：要使其与您的数据模型更相关，请尝试以下操作：

```
SELECT * FROM smtab as s
  inner join 
(
  select datetime, power1, power8 
    from smtab as s2
   group by s2.datetime, power1, POWER8 having COUNT(1) > 1
) as derived
on s.datetime = derived.datetime and s.power1 = derived.power1 
and s.power8 = derived.power8
ORDER BY Datetime DESC; 
```

# jquery - Jquery/Html5函数问题双击问题

> ID：10805098
> 
> 赞同：1
> 
> 时间：2012-05-29T19:03:13.777
> 
> 标签：jquery, html, jquery-mobile

我是 HTML5 / JqueryMobile 的新手。我有这个函数，但由于某种奇怪的原因，它给了我第二次调用 Onclick() 的结果，这是我的代码：

```
function ListDBValues() {
  if (!window.openDatabase) { 
    alert('Databases are not supported in this browser.'); 
    return; 
 }
$('#lbUsers').html(''); 
db.transaction(function(transaction) { 
   transaction.executeSql('SELECT * FROM productos order by titulo;', [], 
   function(transaction, result) { 
      if (result != null && result.rows != null) { 
        for (var i = 0; i < result.rows.length; i++) { 
          var row = result.rows.item(i); 
          $('#lbUsers').append('<div id="producto"><img id="imgprod" width="100" src="images/' + row.foto +'">' + row.recid + '.' + row.titulo + '<br>$' + row.precio + ' MXP<br><input class="cuadro" type="button" id="cb.row" name="item"  value="ORDENAR" onclick=AddValueToOrders(' + row.recid + ');></div>');

        } 
      } 
     },errorHandler); 
 },errorHandler,nullHandler);
 return; 
} 
```

这是第二个功能：

```
 function AddValueToOrders(item) {  
    if (!window.openDatabase) { 
      alert('Databases are not supported in this browser.'); 
      return; 
    } 
    msga = "El item es: "+ item ;
    alert(msga);
    db.transaction(function(tx) { 
        /// veo si ya existe /////

        tx.executeSql('SELECT count(*) AS c FROM orders where prodid = '+ item +'  ', [], 
        function (tx, result) { 
               totprod = result.rows.item(0).c;
               //totprod = results.rows.item(0)['c'];

        });
    });

    var themessage = "Total producto: ";
    themessage = themessage + totprod ;
    alert(themessage);                 

} 
```

问题是我想知道该产品是否已经存在于 Orders 表中，所以我可以更新它，而不是插入另一个具有相同代码的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:05:42.337

不是真正的答案，但我重构了您的代码并添加了一些评论，您还应该查看我对您问题的原始评论，

```
function ListDBValues() {
    if (!window.openDatabase) { 
        alert('Databases are not supported in this browser.'); 
        return; 
    }
    $('#lbUsers').html(''); 
    db.transaction(function(transaction) { 
        transaction.executeSql('SELECT * FROM productos order by titulo;', [], 
        function(transaction, result) { 
            if (result != null && result.rows != null) { 
                for (var i = 0; i < result.rows.length; i++) { 
                    var row = result.rows.item(i);
                    // changed the append logic
                    // created new dom object w/jQuery
                    // bind tap event
                    // execute function on tap
                    // append to dom
                    $('<div id="producto"><img id="imgprod" width="100" src="images/' + row.foto +'">' + row.recid + '.' + row.titulo + '<br>$' + row.precio + ' MXP<br><input class="cuadro" type="button" id="cb.row" name="item"  value="ORDENAR"></div>').data( 'recid', row.recid ).bind('tap', function(){
                        AddValueToOrders( $(this).data('recid') );
                    }).appendTo('#lbUsers');
                } 
            } 
        }, errorHandler); 
    }, errorHandler, nullHandler);
    return; 
}
function AddValueToOrders(item) {  
    if (!window.openDatabase) { 
        alert('Databases are not supported in this browser.'); 
        return; 
    } 
    msga = "El item es: "+ item ;
    alert(msga);
    db.transaction(function(tx) { 
        /// veo si ya existe /////
        tx.executeSql('SELECT count(*) AS c FROM orders where prodid = '+ item +'  ', [], 
        function (tx, result) { 
            totprod = result.rows.item(0).c;
            //totprod = results.rows.item(0)['c'];
            alert("Total producto: " + totprod);
            // you can do your insert here depending on 
            // the value you got back from this checkpoint
        });
    });
} 
```

请让我知道这是否更好。

**更新：** 您也在 for 循环中创建的元素上使用 ID，您应该知道这会产生冲突，因为 ID 是唯一的，您可能不想将它们更改为类

# algorithm - 确定最佳团队和阵型的算法？

> ID：10805102
> 
> 赞同：10
> 
> 时间：2012-05-29T19:03:25.820
> 
> 标签：algorithm, math, language-agnostic

我正在寻找可以在运动队管理模拟器（例如曲棍球或足球）中使用的合适算法。模拟器的一些特点：

*   球队可以使用不同的阵型（例如足球的 4-4-2）。
*   球队中的每个球员都有一个数字评分，表示他们在阵型中每个位置的表现如何。
*   有一群能力各异的小队球员，可以从中选择球队

哪些算法可用于以编程方式有效地确定最强的球队和阵型？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T20:26:51.853

如果我们通过图形对您的问题进行建模并注意到不同编队的数量很少，则问题是[最大加权二分匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)，这可以通过[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)解决，...。

用二分图对问题进行建模，将球员放在一个部分，将位置放在另一部分（例如足球），形成一个球员池和 11 个位置，将所有球员连接到所有位置，并设置相应的边权重作为该位置的相应球员评分。

现在你要做的就是在这个完整的二分图中找到一个[最大（加权）匹配。](http://en.wikipedia.org/wiki/Hungarian_algorithm)（代码可在 wiki 链接中找到）。

我假设我们有有限数量的编队，对于每个编队我们可以找到相应的匹配图，并且它的最大权重匹配，最终在所有可能的编队（在所有图中）取最大值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T19:12:13.663

您可以尝试使用现有 AI 工具进行优化的启发式方法，例如[**遗传算法**](http://en.wikipedia.org/wiki/Genetic_algorithm)或[**爬山**](http://en.wikipedia.org/wiki/Hill_climbing)。
我会提供更多关于爬山的细节，因为它是我最喜欢的。

**将您的问题表示为状态图** `G = (V,E)`，例如`V = {all possible states }`和`E = {(u,v) | swapping one player you can move from u to v }`。
另外，设`u:V->R`是一个编队的效用函数。
由于我们不想生成图形，让我们`next:V->2^V`成为一个函数，使得`next(v) = {all possible formation that you can get by changing one player }`

爬山的想法是**从一个随机队形开始**，当你被卡住时，贪婪地做出最好的改变——从一个新的随机队形重新开始算法。

```
1\. best<- -INFINITY
2\. while there is more time
3\. choose a random matching
4\. NEXT <- next(s)
5\. if max{ u(v) | for each v in NEXT} < u(s): //s is a local maximum
   5.1\. if u(s) > best: best <- u(s) //if s is better then the previous result - store it.
   5.2\. go to 2\. //restart the hill climbing from a different random point.
6\. else:
   6.1\. s <- max { NEXT }
   6.2\. goto 4.
7\. return best //when out of time, return the best solution found so far. 
```

请注意，这种爬山变体（随机重启的爬山）是一种**[任意时间算法](http://en.wikipedia.org/wiki/Anytime_algorithm)**——这意味着当给定更多时间时它会变得更好，而当给定无限时间时——它会找到全局最大值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T19:11:07.893

可以应用于您的问题的简单启发式算法是贪心算法，其解释可以在[http://en.wikipedia.org/wiki/Greedy_algorithm](http://en.wikipedia.org/wiki/Greedy_algorithm)找到。

另一种解决方案是创建两个虚拟节点（开始和结束）并将您的球员池视为有序图（首先是守门员，然后是右翼后卫，依此类推）。边缘将包括玩家对所考虑位置的评分。在这个场景中，您将有一个可以应用 A* 算法的场景，您可以在[http://en.wikipedia.org/wiki/A*_search_algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm)找到其描述（请记住，最大化问题只是最小化的反函数）。

# php - 调用未定义的方法 Exception::getSeverity()

> ID：10805103
> 
> 赞同：0
> 
> 时间：2012-05-29T19:03:30.143
> 
> 标签：php

我使用[ErrorException](http://www.php.net/manual/en/class.errorexception.php)作为错误和异常的中央错误处理函数：

例子：

```
set_error_handler('my_error_handler');
set_exception_handler('my_exception_handler');    

function my_error_handler ($errno, $errstr, $errfile, $errline)
{
    my_exception_handler(new ErrorException($errstr, 0, $errno, $errfile, $errline));
}

function my_exception_handler ($e)
{   
    echo $e->getSeverity();
    echo $e->getCode();
    echo $e->getMessage();          
} 
```

现在它似乎`$e->getSeverity();`只存在于default 中`ErrorException`，而不存在于 default 中`Exception`；

因为当`throw new Exception('test');`我得到一个`Fatal error: Call to undefined method Exception::getSeverity()`.

但是当我`throw new ErrorException('test');`按预期工作时。

这似乎合乎逻辑，但有没有办法我仍然可以使用`throw new Exception('test');`而不会出现致命错误？大多数第三方库都使用Exception（不是ErrorException），所以当第三方异常发生时会出现问题，会导致Fatal Error。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:08:01.933

您可以检查捕获的异常是否为`ErrorException`：

```
if ($e instanceof ErrorException) {
    echo $e->getSeverity();
} else {
    // no getSeverity() available
} 
```

# qt - Blackberry Cascades QML 项目

> ID：10805105
> 
> 赞同：0
> 
> 时间：2012-05-29T19:03:37.493
> 
> 标签：qt, qml, blackberry-playbook

对于那些已经尝试过 Cascades for Blackberry 的人来说，这是一个问题。你可以使用标准的 QML 项目吗？

```
Rectangle {
    anchors.fill: parent
    color: "lightblue"
} 
```

我无法在 BB10 模拟器上运行此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:45:52.113

Cascades 无法做到这一点，因为它不使用 Qt QML。相反，如果您想完全避免级联，您可以使用[Qt for Playbook](http://qt-project.org/wiki/QNX) ，它可以让您使用 Qt QML。

如果您选择您的应用程序看起来不会像 BB10 上的其他本地应用程序一样。

# php - 如何用php解析用户输入的标签

> ID：10805106
> 
> 赞同：0
> 
> 时间：2012-05-29T19:03:40.877
> 
> 标签：php, parsing

我正在开发具有一些内置模块（日历、天气等）的自定义 CMS，我们希望允许最终用户将其插入到他们的内容中。他们可以使用 CKEDITOR 输入内容。

寻找一些提示：

1.  输入这些代码的推荐语法是什么？我们需要检索模块名称和任何相关参数。正在考虑类似：{{module-name, width=100, height=200, items=5}}
2.  什么 PHP 函数最适合解析这些？

我知道有一些模板库可以提供这种类型的功能，但此时我们想尝试自己构建这部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:08:43.557

没有用于解析此类（或类似）输入的内置方法。您将不得不使用一些模板库或自己编写解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:11:34.010

选择不会在项目其他地方意外使用的任何语法。双花括号可能没问题。

使用具有非贪婪匹配的正则表达式来抓住每个人的胆量

```
$matches = array();
preg_match("/\{\{(.*?)\}\}/", $content, $matches);

// or use the match all the grab all of them
preg_match_all("/\{\{(.*?)\}\}/", $content, $matches); 
```

从那里，您可以简单地用逗号分隔它们并处理各个令牌

```
$tokens = split(",", $module);
$module_name = array_shift($tokens);
foreach ($tokens as $token) {
    // process the token
} 
```

# iphone - 重用 cocos2d 动作

> ID：10805112
> 
> 赞同：2
> 
> 时间：2012-05-29T19:04:05.090
> 
> 标签：iphone, ios4, cocos2d-iphone

是否可以（并且是一种好的做法）为使用相同操作的多个 CCSprite 重用相同的操作？

如果我有 10 个 CCSprite 都需要缩放。我创建了一个名为 scaleAction 的缩放动作。是否可以为精灵重用相同的动作？

当我尝试这样做时，我只得到一个精灵缩放，而不是全部。最好的方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:40:05.863

据我所知，不建议重用动作。您应该查看以下链接，了解您遇到的相同问题以及它们如何解决问题。我认为最好的方法是采用子类方法。

[保留 CCAction 以获得最佳性能](http://www.cocos2d-iphone.org/forum/topic/6630)

[Cocos2D：重用不同精灵的动画](https://stackoverflow.com/questions/7410563/cocos2d-reuse-animation-for-different-sprites)

顺便说一句，在我们的朋友谷歌上简单搜索回答你的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:35:47.533

由于问题询问是否为多个精灵重复使用一个动作，所以答案很明确：不。

每个精灵必须运行自己的动作。如果已经在节点 A 上运行了某个操作，并且您尝试在节点 B 上运行相同的操作，则该操作只会影响两个节点之一。

# opengl - 如何跨多个 VBO 创建线带？

> ID：10805113
> 
> 赞同：0
> 
> 时间：2012-05-29T19:04:11.110
> 
> 标签：opengl

我正在开发一个简单的 opengl 应用程序，在该应用程序中我绘制了一堆表示为一条线的数据。出于性能原因，我将数据分成多个块并将它们上传到多个 VOB。之后，我分别渲染每个 VBO。以下是一些示例代码：

```
n_COORDINATES_PER_VERTEX = 2
NBR_DATA_POINTS_PER_VBO = 1000

# plot each VBO
for segment in range(segments):

    # bind the named buffer object so we can work with it.
    glBindBuffer(GL_ARRAY_BUFFER, vbos[segment])

    # specifies the location and data format of an array of vertex coordinates to use when rendering
    glVertexPointer(n_COORDINATES_PER_VERTEX, GL_FLOAT, 0, 0)

    # render primitives from array data
    glDrawArrays(GL_LINE_STRIP, 0, NBR_DATA_POINTS_PER_VBO) 
```

这非常有效，但不幸的是，前一个 VBO 的最后一点和下一个 VBO 的第一点之间存在视觉差距。这是有道理的，因为`GL_LINE_STRIP`仅为每个 VBO 内的数据创建。

**因此我的问题是：**如何实现将多个 VBO 呈现为一条线，而不会在其间跳转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:13:21.630

你可以这样做

1.  将一个 VBO 中的最后一个点复制为下一个 VBO 中的第一个点或
2.  改为使用 GL_LINES 并将下一个 VBO 的第一个点添加到前一个 VBO。

要制作完整的折线，您需要在 VBOS 中共享公共点（我看不到其他选项），您可以选择任何您想要的方法。

```
 n_COORDINATES_PER_VERTEX = 2
    NBR_DATA_POINTS_PER_VBO = 1000

    # One extra point that is the first vertex of the next batch
    NBR_DATA_POINTS_REAL = NBR_DATA_POINTS_PER_VBO + 1

    # Use GL_LINE_STRIP and duplicate vertices
    # plot each VBO
    for segment in range(segments):

        # Duplicate
        if (not_last_segment)
            vbos[segment][NBR_DATA_POINTS_REAL - 1] = vbos[segment + 1][0];

        # bind the named buffer object so we can work with it.
        glBindBuffer(GL_ARRAY_BUFFER, vbos[segment])

        # specifies the location and data format of an array of vertex coordinates to use when rendering
        glVertexPointer(n_COORDINATES_PER_VERTEX, GL_FLOAT, 0, 0)

        # render primitives from array data
        glDrawArrays(GL_LINE_STRIP, 0, NBR_DATA_POINTS_REAL) 
```

类似的东西 - 看起来你不能一次渲染所有点 - 所以我将跳过涉及 glDrawElements 的解决方案，你可以使用它来绘制索引网格。

# asp.net - 问题删除指定域的 Cookie

> ID：10805115
> 
> 赞同：0
> 
> 时间：2012-05-29T19:04:17.070
> 
> 标签：asp.net, vb.net, cookies, expired-cookies

当用户从子域 (pm.skor.in) 注销，然后重定向到主域 (skor.in) 时，我正在设置消息 cookie。

进入 skor.in 后，cookie 会显示给用户，感谢他们退出。

我遇到的问题是 cookie 永远不会消失。

这是代码：

```
If Request.Cookies("msg") IsNot Nothing AndAlso Request.Cookies("msg").Value.Length > 0 Then
    Response.Write("<div class=""notification msginfo"">")
    Response.Write("<a class=""close""></a>")
    Response.Write("<p>" & Request.Cookies("msg").Value & "</p>")
    Response.Write("</div>")
    Response.Cookies("msg").Value = String.Empty
    Response.Cookies("msg").Domain = ".skor.in"
    Response.Cookies("msg").Expires = DateAdd(DateInterval.Year, -1, Date.Now)
End If 
```

如您所见，我将 cookie 的值设置为空白，并使其昨天过期，但每当我导航到 skor.in 上的另一个页面时，就会出现该消息，并检查浏览器 cookie，它仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:02:09.430

对不起。我是一个工具。

问题是我没有在注销时设置域。

无论如何谢谢

# transactions - 使用 solrj 进行 solr 事务管理

> ID：10805117
> 
> 赞同：2
> 
> 时间：2012-05-29T19:04:32.203
> 
> 标签：transactions, solr, solrj

如何使用 Solrj 处理 Solr 中的事务管理？网上没有太多与此相关的文档。但如果有人可以提供与使用 SolrJ 的事务管理相关的任何链接或信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-15T20:11:39.487

对于 Solr 和事务，您必须牢记的是没有隔离。Solr 不像我们大多数数据库开发人员习惯的那样支持事务。

提交使所有客户端的所有未决更改对新查询可见。同样，回滚会回滚所有客户端的所有未决更改。零考虑哪个客户端发送了提交/回滚命令。

因此，错误处理不应自动导致回滚。因为影响可能比错误的数据要广泛得多。因此，清理工作可能会更加困难。

Solr 文档中的指导是使用自动提交。在执行批量操作时尤其如此。如果您要批量编制索引，可能使用多个并行客户端，那么最好每隔一段时间（或每隔这么多文档）自动提交一次。这会导致创建的新索引段更少，从而导致整体索引碎片更少。

详细信息将取决于您的 Solr 实例（以及您的复制方法）上发生的查询和索引操作的组合。

这里有一篇很好的 Lucidworks 文章： [Understanding Transaction Logs, Soft Commit and Commit In SolrCloud](https://lucidworks.com/post/understanding-transaction-logs-softcommit-and-commit-in-sorlcloud/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:44:43.927

您必须以编程方式处理 SolrJ 中的事务。处理多次写入时。

1.  使用 SolrServer api add 方法将 SolrInputDoucments 添加到服务器。
2.  添加所有 SolrInputDocuments 后，从 SolrServer api 调用 commit 方法以提交所有更改。
3.  如果 Solr 发生异常，如果您想回滚对 Solr 的写入，请调用 SolServer api 回滚方法。
4.  如果您还想回滚对数据库的写入，只需从 catch 块中抛出运行时异常。

这就是我处理事务管理的方式。如果有人有更好的答案，请随时改进答案。

# java - Solr（php vs java）：确定文档数量时的查询差异

> ID：10805118
> 
> 赞同：1
> 
> 时间：2012-05-29T19:04:41.137
> 
> 标签：java, php, solr, lucene, solrj

嗨，

在使用 Java 和 PHP 查询 Solr 时，我注意到了一些差异。查询在这里看起来像这样：

```
text:(www)+timestamp:[2012-04-16T00:00:00Z TO 2012-04-20T23:59:00Z]&q.op=AND&rows=0&sort=timestamp%20desc&facet=true&facet.field=terms_nouns_lemma&facet.limit=20&facet.method=enum 
```

打印出在 Java 中找到的文档数量时

```
response.getResults().getNumFound() 
```

我得到了将近 80.000，在 PHP 中也是如此

```
$response->response->numFound 
```

返回大约 7000。PHP 结果似乎更准确，因为只需要考虑时间范围（并且由于存储文档的性质）。但是，当我进入管理页面并插入我的查询时，我再次得到大约 80.000（它实际上与 Java 的值相同）。

我在这里想念什么？

在我看来，Java 似乎根本不考虑时间框架？或许值得一提的是，我使用的是 Solr 3.5（而 Java 库 SolrJ 是对应的版本）

**注意** 我认为[这个](https://stackoverflow.com/questions/5050746/solr-solrj-how-can-i-determine-the-total-number-of-documents-in-an-index)问题非常相关，但它没有回答我的问题，因为它没有考虑限制（如上面查询中的时间范围）。

**此外** ，在 PHP 中，如果我没有设置我希望在响应中包含的行数，它实际上会返回找到的正确数量的文档，Java w/SolrJ 中是否有任何等价物（默认情况下，如果*row*是'不设置，它将设置为10，将其设置为*-1*也不起作用）

感谢您的任何提示

**更新**

正如在下面的评论中发布的，查询的不同之处在于 SolrJ 用“+”替换了空白/空格，我尝试使用硬编码并使用 ClientUtils.escapeQueryChars(String) 对其进行转义，但两者都没有按预期工作

真正有趣的是：

```
text:(www)&facet.range=timestamp&f.timestamp.facet.range.end=2012-04-16T21:59:59.000Z&f.timestamp.facet.range.gap=+1MINUTE&rows=0 
```

返回与

```
text:(www) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:51:14.050

您是否验证了针对 solr 索引执行的查询对于 SolrJ 和 PHP 查询是相同的？特别是考虑到您说 SolrJ 查询不受您指定的日期范围的限制。这会让我怀疑 SolrJ 没有正确设置/传递某些东西。

此外，关于返回所有行，您可以将 SolrJ 中的行设置为一个非常大的数字（大约 100,000），根据您的计数，在这种情况下应该对您有用。

# asp.net-mvc - 不能在类文件中使用 Url.Action

> ID：10805121
> 
> 赞同：3
> 
> 时间：2012-05-29T19:05:17.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在我的 asp.net mvc3 网站中，我`Url.Action`在视图中使用生成 url。

```
@Url.Action("Profile", "Users", new { @Id = Model.UserId, name = Model.NickName }) 
```

现在，在我的一个助手类中，我需要做同样的事情。但收到此错误消息，“当前上下文中不存在名称‘Url’。

我可以使用另一个函数来生成 url 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T19:20:10.993

您的示例中的 @Url 是`UrlHelper`类的一个实例。您可以创建它的实例并在任何类中使用，如下例所示，但您需要访问`RequestContext`相应视图的（在我的示例中命名的上下文）。

```
var urlHelper = new UrlHelper(context);
string absUrl = urlHelper.Action("ActionName", 
          "ControllerName", null, Request.Url.Scheme); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T19:12:27.390

您不能在 Razor 视图之外使用 Razor 帮助器，`@Url`它是 Razor 帮助器，并且仅限于视图页面。不在 .net 类文件中。

在你的类文件中试试这个例子

```
var urlHelper = new UrlHelper(context);
string absUrl = Url.Action("Users", "Users",  new { Id = UserId, name =.NickName }, Request.Url.Scheme); 
```

或者从控制器中使用

```
return RedirectToAction("Profile", "Users", new { @Id = Model.UserId, name = Model.NickName }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T11:25:49.320

您可以在任何地方使用此代码，并且不需要 UrlHelper 或上下文：

```
RouteValueDictionary rvd = new RouteValueDictionary
{
  {"controller", "ControllerName"}, 
  {"action", "ActionName"}, 
  {"area", ""}
};

VirtualPathData virtualPathData 
   = RouteTable.Routes.GetVirtualPath(null, new RouteValueDictionary());
return virtualPathData.VirtualPath; 
```

这仅在属性“HttpContext.Current”不为空时才有效，这对于在 Web 应用程序中运行的代码是正确的。如果您没有为 GetVirtualPath 提供第一个参数，系统将使用上述静态属性返回的上下文。

因此，您仍然可以使用此方法在不提供上下文的情况下获取 URL。

上下文始终是必需的，因为它具有服务器的信息，以及应用程序运行所在的虚拟目录（如果存在）。

# php - ImageMagick -- setImageAlphaChannel 不工作 (php)

> ID：10805122
> 
> 赞同：13
> 
> 时间：2012-05-29T19:05:23.230
> 
> 标签：php, image-processing, imagemagick, imagick

所以我有这个 IM 命令（$plistnew 是你对多边形所期望的坐标列表）：

```
convert in.png ( -size 101x101 xc:black -fill white \
    -draw "polygon $plistnew" -alpha off \
    -crop 101x100+0+1 +repage \
    -scale 101x1! ) \
    -clut out.png 
```

所以我需要把它转换成纯PHP。除了 setImageAlphaChannel() 的一个剩余问题之外，我已经非常成功了。

无论如何，这是我的 PHP：

```
$tmpa = new Imagick(); // for the image I'm assuming is generated inside the parens
$tmpa->newPseudoImage(101, 101, 'canvas:black'); // xc:black

$draw = new ImagickDraw();
$draw->setFillColor(new ImagickPixel('white')); // -fill white
$draw->polygon($points); // -draw "polygon $plistnew"

$tmpa->drawImage($draw);
$tmpa->setImageAlphaChannel(self::ALPHACHANNEL_DEACTIVATE); // -alpha off
$tmpa->cropImage(101, 100, 0, 1); // -crop 101x100+0+1

// +repage
$tmpa->resetImagePage('');

$tmpa->scaleImage(101, 1); // -scale 101x1! -- I think scaleImage() ignores ratio per the ! by default ... I'm not positive though.

$im = new Imagick('in.png');
$im->clutImage($tmpa); // -clut
$im->writeImage('out.png');
$tmpa->destroy(); 
```

$points 变量是一个正确形成的数组，可与 ImagickDraw::polygon() 一起使用。

这一行：

```
$tmpa->setImageAlphaChannel(self::ALPHACHANNEL_DEACTIVATE); 
```

完全不工作。它会产生此错误：

```
PHP Fatal error:  Uncaught exception 'ImagickException' with message 'Unable to set image alpha channel' 
```

当我评论这条线时，一切似乎都正常工作。我怎样才能防止这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-20T19:42:08.890

我在删除 PNG 和 GIF 的 alpha 通道时也遇到了问题，所以我尝试了几件事，但最终使用了这个：

```
// Image has transparency
if ($image->getImageAlphaChannel()) {

    // Remove alpha channel
    $image->setImageAlphaChannel(11);

    // Set image background color
    $image->setImageBackgroundColor('white');

    // Merge layers
    $image->mergeImageLayers(imagick::LAYERMETHOD_FLATTEN);
} 
```

我选择使用“11”，因为 imagick::ALPHACHANNEL_REMOVE 不适用于我的版本。有关 imagick::ALPHACHANNEL_REMOVE 的参考，请参阅此评论：[http ://php.net/manual/en/imagick.flattenimages.php#116665](http://php.net/manual/en/imagick.flattenimages.php#116665)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-02T17:53:07.073

根据[手册](http://php.net/manual/en/imagick.setimagealphachannel.php)_`setImageAlphaChannel`

> 如果 Imagick 已针对 ImageMagick 版本 6.3.8 或更高版本进行编译，则此方法可用。

您可能需要自己针对适当版本的 imagemagick 构建 Imagick 扩展。当然你可以用谷歌搜索这些步骤，但这是我在 Ubuntu，YMMV 上所做的一个粗略示例

## 从源代码安装 imagemagick

```
apt-get install build-essential libpng12-dev libglib2.0-dev libfontconfig1-dev zlib1g-dev libtiff4-dev libexif-dev libfreetype6-dev

mkdir sources
cd sources
wget http://www.imagemagick.org/download/ImageMagick.tar.gz
tar -xzf ImageMagick.tar.gz

new_dir=$(ls -1 | grep ImageMagick-)
cd $new_dir
./configure --prefix=/usr --without-lzma --without-jng --without-jbig --without-mpeg --without-ps
make
make install 
```

## 安装 pecl

```
sudo apt-get install php5-dev php-pear 
```

## 从源代码安装 php imagick

```
sudo pecl config-set preferred_state beta
sudo apt-get remove --purge php5-imagick
sudo pecl install imagick
sudo bash -c 'echo extension=/usr/lib/php5/20121212/imagick.so > /etc/php5/mods-available/imagick.ini'
sudo php5enmod imagick 
```

## 验证 php imagick 已安装且`setImageAlphaChannel`可用

```
php --rc Imagick | grep -i setImageAlphaChannel 
```

如果 grep 找到匹配项，则安装成功。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T19:12:40.947

我没有对此进行测试，但如果您的最终目标是生成不支持 alpha 通道的不透明图像，则可以尝试将[Imagick::setFormat](http://www.php.net/manual/en/imagick.setformat.php)函数设置为[png24](http://www.imagemagick.org/script/formats.php)。

```
$tmpa->setFormat('png24'); 
```

这将强制 Imagick 对象使用不透明的 24 位 PNG 格式，而不是不透明或透明的 32 位 PNG 格式。您可能必须设置背景颜色或其他效果，以确保正确处理添加到图像的任何 alpha 对象。

# javascript - 如何从字符串中删除所有换行符

> ID：10805125
> 
> 赞同：555
> 
> 时间：2012-05-29T19:05:35.013
> 
> 标签：javascript, regex, string

我在 textarea 中有一个文本，我使用 .value 属性将其读出。

现在我想`Enter`使用 .replace 和正则表达式从我的文本中删除所有换行符（按 时产生的字符），但是如何在正则表达式中指示换行符？

如果这不可能，还有其他方法吗？

* * *

## 回答 #1

> 赞同：649
> 
> 时间：2012-05-29T19:10:47.083

您如何找到换行符因操作系统编码而异。Windows 将是`\r\n`，但 Linux 只是使用`\n`和 Apple 使用`\r`。

我在[JavaScript 换行符](http://www.textfixer.com/tutorials/javascript-line-breaks.php)中发现了这一点：

```
someText = someText.replace(/(\r\n|\n|\r)/gm, ""); 
```

那应该删除各种换行符。

* * *

## 回答 #2

> 赞同：594
> 
> 时间：2012-05-29T19:18:29.860

换行符（更好：换行符）可以是回车符（CR, `\r`, 在较旧的 Mac 上）、换行符（LF, `\n`, 在 Unices incl. Linux 上）或 CR 后跟 LF（`\r\n`在 WinDOS 上）。（与另一个答案相反，这与字符编码*无关。）*

因此，匹配所有变体的最有效`RegExp`文字是

```
/\r?\n|\r/ 
```

如果要匹配字符串中的所有换行符，请使用全局匹配，

```
/\r?\n|\r/g 
```

分别。然后`replace`按照其他几个答案中建议的方法继续进行。（可能您*不想*删除换行符，而是将它们替换为其他空格，例如空格字符，以便单词保持不变。）

* * *

## 回答 #3

> 赞同：149
> 
> 时间：2014-06-12T22:43:18.397

```
var str = " \n this is a string \n \n \n"

console.log(str);
console.log(str.trim());
```

[`String.trim()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)从字符串的开头和结尾删除空格...包括换行符。

```
const myString = "   \n \n\n Hey! \n I'm a string!!!         \n\n";
const trimmedString = myString.trim();

console.log(trimmedString);
// outputs: "Hey! \n I'm a string!!!" 
```

这是一个示例小提琴：http: [//jsfiddle.net/BLs8u/](http://jsfiddle.net/BLs8u/)

**笔记！**它只修剪字符串的开头和结尾，而不是字符串中间的换行符或空格。

* * *

## 回答 #4

> 赞同：73
> 
> 时间：2012-05-29T19:09:03.780

您可以`\n`在正则表达式中使用换行符和`\r`回车符。

```
var str2 = str.replace(/\n|\r/g, ""); 
```

不同的操作系统使用不同的行尾，以及 和 的不同`\n`混合`\r`。此正则表达式将全部替换。

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2017-07-11T08:26:26.030

最简单的解决方案是：

```
let str = '\t\n\r this  \n \t   \r  is \r a   \n test \t  \r \n';
str = str.replace(/\s+/g, ' ').trim();
console.log(str); // logs: "this is a test" 
```

`.replace()`使用`/\s+/g`正则表达式将**所有**空白字符组更改为整个字符串中的单个空格，然后我们`.trim()`的结果是删除文本前后所有超出的空白。

被视为空白字符：
`[ \f\n\r\t\v​\u00a0\u1680​\u2000​-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]`

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2016-02-06T21:03:36.113

如果要删除所有控制字符，包括 CR 和 LF，可以使用以下命令：

```
myString.replace(/[^\x20-\x7E]/gmi, "") 
```

它将删除所有不可打印的字符。[这都是](http://www.asciitable.com/)不在**ASCII** HEX 空间内的字符`0x20-0x7E`。根据需要随意修改 HEX 范围。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2016-01-21T16:24:06.293

```
var str = "bar\r\nbaz\nfoo";

str.replace(/[\r\n]/g, '');

>> "barbazfoo" 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2017-10-06T10:21:13.493

要删除新行字符，请使用以下命令：

```
yourString.replace(/\r?\n?/g, '') 
```

然后你可以修剪你的字符串以删除前导和尾随空格：

```
yourString.trim() 
```

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2020-09-10T05:48:49.610

这将用空格替换换行符。

```
someText = someText.replace(/(\r\n|\n|\r)/gm,""); 
```

阅读更多关于[这篇](https://www.textfixer.com/tutorials/javascript-line-breaks.php#:%7E:text=Javascript%20Code%20for%20Line%20Break%20Removal&text=someText%20%3D%20someText.,n%7C%5Cn%7C%5Cr.)文章。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2019-12-16T16:18:35.197

**使用下面的这个功能，让你的生活变得轻松**

最简单的方法是使用正则表达式来检测和替换字符串中的换行符。在这种情况下，我们使用替换函数和要替换的字符串，在我们的例子中是一个空字符串。

```
function remove_linebreaks( var message ) {
    return message.replace( /[\r\n]+/gm, "" );
} 
```

在上面的表达式中，g 和 m 用于全局和多行标志

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2017-06-08T14:24:16.647

PointedEars 提供的答案是我们大多数人需要的一切。但是通过遵循 Mathias Bynens 的回答，我进行了一次维基百科之旅，发现了这个：[https](https://en.wikipedia.org/wiki/Newline) ://en.wikipedia.org/wiki/Newline 。

以下是一个插入式函数，它实现了上述 Wiki 页面在此答案时认为“新行”的所有内容。

如果某些东西不适合您的情况，只需将其删除。此外，如果您正在寻找性能，这可能不是它，但对于在任何情况下都能完成工作的快速工具，这应该很有用。

```
// replaces all "new line" characters contained in `someString` with the given `replacementString`
const replaceNewLineChars = ((someString, replacementString = ``) => { // defaults to just removing
  const LF = `\u{000a}`; // Line Feed (\n)
  const VT = `\u{000b}`; // Vertical Tab
  const FF = `\u{000c}`; // Form Feed
  const CR = `\u{000d}`; // Carriage Return (\r)
  const CRLF = `${CR}${LF}`; // (\r\n)
  const NEL = `\u{0085}`; // Next Line
  const LS = `\u{2028}`; // Line Separator
  const PS = `\u{2029}`; // Paragraph Separator
  const lineTerminators = [LF, VT, FF, CR, CRLF, NEL, LS, PS]; // all Unicode `lineTerminators`
  let finalString = someString.normalize(`NFD`); // better safe than sorry? Or is it?
  for (let lineTerminator of lineTerminators) {
    if (finalString.includes(lineTerminator)) { // check if the string contains the current `lineTerminator`
      let regex = new RegExp(lineTerminator.normalize(`NFD`), `gu`); // create the `regex` for the current `lineTerminator`
      finalString = finalString.replace(regex, replacementString); // perform the replacement
    };
  };
  return finalString.normalize(`NFC`); // return the `finalString` (without any Unicode `lineTerminators`)
}); 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2021-01-20T06:39:01.240

**简单我们可以使用删除新行`text.replace(/\n/g, " ")`**

```
const text = 'Students next year\n GO \n For Trip \n';
console.log("Original : ", text);

var removed_new_line = text.replace(/\n/g, " ");
console.log("New : ", removed_new_line);
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2012-05-29T19:09:03.930

正则表达式中的换行符是 \n，因此您的脚本将是

```
var test = 'this\nis\na\ntest\nwith\newlines';
console.log(test.replace(/\n/g, ' ')); 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2019-07-07T12:36:02.117

我正在添加我的答案，它只是上面的一个插件，就我而言，我尝试了所有 /n 选项但它没有用，我看到我的文本是从带有双斜杠的服务器发出的，所以我使用了这个：

```
var fixedText = yourString.replace(/(\r\n|\n|\r|\\n)/gm, ''); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-04-28T21:21:47.657

试试下面的代码。它适用于所有平台。

```
var break_for_winDOS = 'test\r\nwith\r\nline\r\nbreaks';
var break_for_linux = 'test\nwith\nline\nbreaks';
var break_for_older_mac = 'test\rwith\rline\rbreaks';

break_for_winDOS.replace(/(\r?\n|\r)/gm, ' ');
//output
'test with line breaks'

break_for_linux.replace(/(\r?\n|\r)/gm, ' ');
//output
'test with line breaks'

break_for_older_mac.replace(/(\r?\n|\r)/gm, ' ');
// Output
'test with line breaks' 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-09-10T05:59:52.903

如果碰巧你不需要这个 htm characte `&nbsp`shile 使用`str.replace(/(\r\n|\n|\r)/gm, "")`你可以使用这个`str.split('\n').join('');`

干杯

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-12-05T11:04:29.200

我经常将这个正则表达式用于 jsons 中的 (html) 字符串：

`replace(/[\n\r\t\s]+/g, ' ')`

字符串来自 CMS 的 html 编辑器或 i18n php。常见的场景有：

```
- lorem(.,)\nipsum
- lorem(.,)\n ipsum
- lorem(.,)\n
  ipsum
- lorem   ipsum
- lorem\n\nipsum
- ... many others with mixed whitespaces (\t\s) and even \r 
```

正则表达式避免了这种丑陋的事情：

```
lorem\nipsum    => loremipsum
lorem,\nipsum   => lorem,ipsum
lorem,\n\nipsum => lorem,  ipsum
... 
```

当然不是适用于所有用例，也不是最快的用例，但对于大多数文本区域和网站或 web 应用程序的文本来说已经足够了。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-02-18T17:02:06.687

第一种方式：

```
const yourString = 'How are you \n I am fine \n Hah'; // Or textInput, something else

const newStringWithoutLineBreaks = yourString.replace(/(\r\n|\n|\r)/gm, ""); 
```

第二种方式：

```
const yourString = 'How are you \n I am fine \n Hah'; // Or textInput, something else

const newStringWithoutLineBreaks = yourString.split('\n').join(''); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-03-07T09:31:20.903

在 mac 上，只需`\n`在 regexp 中使用来匹配换行符。所以代码将是`string.replace(/\n/g, '')`，ps：后面的 g 表示匹配所有而不是第一个。

在 Windows 上，它将是`\r\n`.

* * *

## 回答 #20

> 赞同：-3
> 
> 时间：2021-07-27T22:33:49.277

const text = 'test\nwith\nline\nbreaks'

const textWithoutBreaks = text.split('\n').join(' ')

# c# - 命名空间中不存在“接口”

> ID：10805127
> 
> 赞同：4
> 
> 时间：2012-05-29T19:05:35.477
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

***编辑：在@mattytommo 帮助隔离错误的根本原因后，我发现 IStatementRepository.cs 文件未包含在项目中。将它包含在项目中解决了这种情况。***

我正在尝试在我的控制器上实现一个存储库（使用一些依赖注入），但我撞到了墙上。我定义了 IStatementRepository，但是，当我尝试使用 IStatementRepository 参数创建构造函数以用于 DI 目的时，出现以下错误：

```
The type or namespace name 'IStatementRepository' does not 
exist in the namespace 'StatementsApplication.Models' (are 
you missing an assembly reference?) 

The type or namespace name 'IStatementRepository' could 
not be found (are you missing a using directive or an 
assembly reference?)    

'StatementsApplication.Controllers.StatementController' 
does not contain a definition for 'IStatementRepository' 
and no extension method 'IStatementRepository' accepting a 
first argument of type 
'StatementsApplication.Controllers.StatementController' 
could be found (are you missing a using directive or an 
assembly reference?) 
```

这是生成错误的代码块：

```
using StatementsApplication.Models;

namespace StatementsApplication.Controllers
{
    public class StatementController : Controller
    {
        public StatementsApplication.Models.IStatementRepository _repo;

        private DALEntities db = new DALEntities();

        public StatementController(IStatementRepository repository)
        {
            this.IStatementRepository = repository;
        }

        // additional controller actions here
    }
} 
```

这是 IStatementRepository.cs 的全部内容：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using StatementsApplication.DAL;

namespace StatementsApplication.Models
{
    public interface IStatementRepository    {
        IEnumerable<Statement> findAll();
        IEnumerable<Statement> findByMerchantID(int id);
        Statement findByID(int id);
        Statement createStatement(Statement stmt);
        int saveChanges();
        void deleteStatement(int id);

    }
} 
```

我不明白为什么我不能在这里使用界面。我所关注的所有示例似乎都在使用这种一般模式，所以我希望我只是遗漏了一些简单的东西。

我将非常感谢您的意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T19:22:49.083

您的构造函数有点偏离，您正在尝试做`this.IStatementRepository`，但变量是`this._repo`. `IStatementRepository`这些错误是因为 Visual Studio 告诉您在（您的控制器）内部没有调用变量`this`:)。

尝试这个：

```
using StatementsApplication.Models;

namespace StatementsApplication.Controllers
{
    public class StatementController : Controller
    {
        public StatementsApplication.Models.IStatementRepository _repo;

        private DALEntities db = new DALEntities();

        public StatementController(IStatementRepository repository)
        {
            this._repo = repository;
        }

        // additional controller actions here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:08:17.910

您是否缺少 using 指令或程序集引用？

如果您的界面在不同的程序集中，它是否标记为`public`？

您的接口文件的构建操作是否设置为编译？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-02T12:03:22.897

这对我有用：

```
using System.Net.NetworkInformation; 
```

# phpexcel - PHPExcel - 字符串中断时显示顶行

> ID：10805130
> 
> 赞同：0
> 
> 时间：2012-05-29T19:05:51.177
> 
> 标签：phpexcel

我将此代码与 PHPExcel 一起使用，将文本分成单元格中的多行（如果需要）。

```
$excelSheetRowNumber = 1;
$col = 'A';
$objPHPExcel->getActiveSheet()->setCellValue($col . $excelSheetRowNumber, $task->getName());
$objPHPExcel->getActiveSheet()->getStyle($col . $excelSheetRowNumber)->getAlignment()->setWrapText(true); 
```

唯一的问题是，如果文本被换行，则默认显示最后一行。我想显示*第一*行。

举个例子说明我的意思，如果我有这么长的文字：

```
first line first line first line first line second line second line second line 
```

它被 PHPExcel 分解成这样：

```
first line first line first line first line 
second line second line second line 
```

当我打开电子表格时，我在单元格中看到的是：

```
second line second line second line 
```

相对于：

```
first line first line first line first line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:29:31.070

通常，将单元格设置为自动换行也会将该行设置为自动调整。我无法复制您的问题：您使用的是什么作家？

但是，您可以尝试：

```
$objPHPExcel->getActiveSheet()
    ->getStyle($col . $excelSheetRowNumber)
    ->getAlignment()
    ->setVertical(PHPExcel_Style_Alignment::VERTICAL_TOP); 
```

# c# - 如何清除 RichTextBox 中的文本内容

> ID：10805134
> 
> 赞同：41
> 
> 时间：2012-05-29T19:06:06.660
> 
> 标签：c#, wpf

获取 RichTextBox 中的文本后，我想清除文本。我怎样才能做到这一点？

```
TextRange txt = new TextRange(richtxtSNotice.Document.ContentStart, richtxtSNotice.Document.ContentEnd);
MessageBox.Show(txt.Text); 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-16T20:57:47.297

使用以下内容：

```
_richTextBox.Document.Blocks.Clear(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-26T09:50:08.133

这是一种简单的方法。

```
 public void Clear()
        {
            richTextBox1.SelectAll();

            richTextBox1.Selection.Text = "";
        } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-29T19:13:10.993

尝试创建一个`TextRange`内容`RichBoxText`，然后设置`Text`为空字符串：

```
TextRange txt = new TextRange(richtxtSNotice.Document.ContentStart, richtxtSNotice.Document.ContentEnd);
txt.Text = ""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-08T09:55:02.130

当富文本框中有一些 InlineUIContainer 元素（例如按钮）时，我无法清除富文本框。在这种情况下，我有一个例外

```
myRichTextBox.Document.Blocks.Clear (); 
```

我可以解决这个问题

```
myRichTextBox.Document = new System.Windows.Documents.FlowDocument (); 
```

当然，无论我们是否有 InlineUIContainer 元素，这都有效。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-02-21T15:36:56.793

我发现清除richTextBox 并不总是使用richTextBox.Text = ""; 从richTextBox 中删除所有文本。或richTextBox.Clear(); 只有前几行被清除了。

为了解决这个问题，我包含了 Update() 函数调用解决了这个问题。

```
richTextBox.Clear(); 
```

其次是

```
richTextBox.Update(); 
```

可靠地清除richTextBox。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-10-22T22:06:01.663

要清除富文本框的所有内容，您可以使用以下代码

```
richTextBox1->SelectAll();
richTextBox1->Clear(); 
```

* * *

## 回答 #7

> 赞同：-14
> 
> 时间：2012-05-29T19:10:17.790

我知道的最简单的方法是

```
 (your richTextbox name).text = ""; 
```

这告诉它用空白代码替换文本框字段中的任何内容。我敢肯定还有其他方法可以做到这一点。

# ruby-on-rails - 什么时候在模型中使用 self？

> ID：10805136
> 
> 赞同：80
> 
> 时间：2012-05-29T19:06:09.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, self

问题：我什么时候需要在 Rails 的模型中使用 self？

我的`set`一个模型中有一个方法。

```
class SomeData < ActiveRecord::Base
  def set_active_flag(val)
    self.active_flag = val
    self.save!
  end
end 
```

当我这样做时，一切正常。但是，当我这样做时：

```
class SomeData < ActiveRecord::Base
  def set_active_flag(val)
    active_flag = val
    save!
  end
end 
```

active_flag 值不会改变，而是静默失败。有人可以解释吗？

我找不到任何重复项，但如果有人找到也可以。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-29T19:09:25.943

当您对调用该方法的实例执行操作时，您使用 self.

使用此代码

```
class SocialData < ActiveRecord::Base
  def set_active_flag(val)
    active_flag = val
    save!
  end
end 
```

您正在定义一个名为 active_flag 的全新作用域局部变量，将其设置为传入的值，它不与任何内容相关联，因此当方法结束时它会立即被丢弃，就像它从未存在一样。

```
self.active_flag = val 
```

然而，告诉实例修改它自己的名为 active_flag 的属性，而不是一个全新的变量。这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-12-23T06:31:57.867

这是因为范围界定而发生的。当您在一个方法中并尝试像这样**设置**一个新变量时：

```
class SomeData < ActiveRecord::Base
  def set_active_flag(val)
    active_flag = val
  end
end 
```

您正在创建一个位于 set_active_flag 内部的全新变量。一旦执行完毕，它就会消失，不会`self.active_flag`以任何方式改变（实际的实例变量）。

**但是**（这对我来说是一个困惑的根源）：当您尝试在 ruby​​ 中**读取**实例变量时，如下所示：

```
class SomeData < ActiveRecord::Base
  def whats_my_active_flag
    puts active_flag
  end
end 
```

您实际上会`self.active_flag`返回（实际的实例变量）。

* * *

**原因如下：**

Ruby 将尽其所能避免返回`nil`.

1.  它最初询问“是否`active_flag`存在于`whats_my_active_flag`?
2.  它搜索并意识到答案是“nope”，所以它跳**了**一个级别，到 SomeData 的实例
3.  它再次问同样的事情：“`active_flag`在这个范围内存在吗？
4.  答案是“是的”，所以它说“我有东西要给你”，然后它就会返回！

但是，如果您`active_flag`在 中定义`whats_my_active_flag`，然后请求它，它会再次执行以下步骤：

1.  它询问“是否`active_flag`存在于`whats_my_active_flag`?
2.  答案是“是的”，所以它返回那个值

在任何一种情况下，除非您明确告诉它，否则它不会**更改**的值。`self.active_flag`

描述这种行为的一个简单方法是“它不想让你失望”并返回`nil`——所以它尽最大努力找到它可以找到的任何东西。

同时，“它不想弄乱您不打算更改的数据”，因此它不会更改实例变量本身。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T19:10:13.563

这是为了确保您使用的是 setter 方法而不是限定新变量的范围。这是一个 Ruby 和 AR 使用细节，经常让人们绊倒（另一个是（错误）使用实例变量）。

请注意，已经有[update_attributes！](http://apidock.com/rails/v3.2.1/ActiveRecord/Persistence/update_attributes!)虽然我理解抽象的愿望。

还有[切换！](http://apidock.com/rails/v3.2.1/ActiveRecord/Persistence/toggle!)，这可能会更好，具体取决于您与标志的接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-30T15:30:51.720

When use `active_flag = val` ruby thought your are define a local variable, the best way is `self.active_flag = val`, if you got it, hope you know that `send(:active_flag=, val)` will works too.

# jquery - jQuery 跳转菜单

> ID：10805140
> 
> 赞同：0
> 
> 时间：2012-05-29T19:06:34.730
> 
> 标签：jquery, jump-list

我很坚持这个。

我想创建一个跳转菜单来打开和关闭 div。但作为一个 jquery 初学者，我坚持向我的脚本发送 val 或其他内容。

到目前为止，请参阅我的 jsfiddle，也许您也很清楚我想要什么。

[http://jsfiddle.net/wGs8a/2/](http://jsfiddle.net/wGs8a/2/)

```
<select name="aantalpersonen" id="jumpMenu">
    <option value="one">Always vissable</option>
    <option value="two">Just when selected</option>
    <option value="three">All three are vissable</option>
</select>

<div id="one">
    I'm always vissable
</div>

<div id="two">
    I'm hidden and show if jumpmenu equals 2 and 3 is still hidden
</div>

<div id="three">
    I'm hidden and show if jumpmenu equals 3, 1 and 2 are also still vissable
</div>​ 
```

希望有人可以帮助我解决这个问题！谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:25:26.933

好吧，这不是您想要的，但可以让您继续前进。

首先，从一开始就隐藏你不想显示的css中的div：

```
#two {display:none}
#three {display:none} 
```

jQuery 代码是这样的：

```
$("#jumpMenu").change(function(){
   var selectedValue = $(this).val();

   $("div").hide(); //hides all divs

   $("#one").show(); //assures one is always visible

   switch( selectedValue ){
       case "one":
           //do nothing
           break;
       case "two":
           $("#two").show();
           break;
       case "three":
           $("#two, #three").show();
           break;
    } 
  }); 
```

[您可以在http://jsfiddle.net/wGs8a/2/](http://jsfiddle.net/wGs8a/2/)中看到它

# embedded-resource - 在 C# 中动态获取资源名称

> ID：10805146
> 
> 赞同：0
> 
> 时间：2012-05-29T19:07:01.033
> 
> 标签：embedded-resource

我想操作 Drawable 中的所有图像文件。我已经编写了这段代码。它出什么问题了？

```
 string[] all = System.Reflection.Assembly.GetEntryAssembly().GetManifestResourceNames();  
        int[] thumbIDs;

        foreach (string resourceName in all )
        {
            int j=1;
            if (resourceName.EndsWith(".jpg"))
            {
              thumbIDs[j]= Resource.Drawable.resourceName;
            }
            j=j+1;
        } 
```

# java - 在应用程序服务器级别配置数据源与 Spring 的 applicationContext 的优点/缺点

> ID：10805148
> 
> 赞同：3
> 
> 时间：2012-05-29T19:07:16.693
> 
> 标签：java, sql-server, spring, datasource

如果应用程序服务器可能将客户端更改为客户端，那么配置数据源的最佳方法是什么？

我最初在应用程序服务器本身中指定了它。但是现在应用程序服务器正在将客户端更改为客户端。客户正在使用许多不同的应用程序服务器，如 JBOSS、Tomcat 或 Websphere 等。

现在对我来说变得乏味，因为现在必须根据客户特定的服务器进行配置，并且我必须了解他们的应用程序服务器配置。

这就是为什么现在我将数据源配置移动到 Spring 的应用程序上下文中。

*   在处理多个应用程序服务器时注入数据源配置的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:20:14.177

将数据源配置保存在数据库本身中有一个很好的选择。

为 Web 应用程序提供了 master-config db 的详细信息，从中读取其他数据库的配置。

好处：

1.  更改数据库配置不需要重新部署。只需更改主配置数据库即可。
2.  所有网络应用程序的上下文都将相似且简单，因为它们只包含您的主配置数据库的配置。

坏处：

1.  将无法使用容器的连接池和资源管理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T22:20:38.677

我更喜欢在应用程序级别配置数据库连接。

实现此目的的一个好方法是在位于 Web 应用程序外部的属性文件中定义相关的连接设置，例如“/home/myuser/mywebapp/database.properties”。然后，您可以配置您的 spring 应用程序以从该文件中读取属性并相应地创建您的数据源。

这样你就可以

*   避免（重新）配置客户端的应用服务器
*   避免在构建系统上保留客户的数据库设置，因为您只需要他们的数据库属性文件的位置

# ios - 如何创建通过 Ruby Motion 修改 ABAddressBook 所需的 CFErrorRef 参数

> ID：10805150
> 
> 赞同：0
> 
> 时间：2012-05-29T19:07:20.503
> 
> 标签：ios, ruby, abaddressbook, rubymotion

我正在尝试使用 Ruby Motion 向地址簿添加一个条目。我不知道如何正确实例化 CFErrorRef 参数。

```
error = nil # compiles but won't capture an error properly
# Here are my numerous attempts:
#error = Pointer.new( :object ) expected instance of Pointer of type `^{__CFError}', got `@' (TypeError)
#error = Pointer.new( '^{__CFError}' ) Can't find pointer description for type `^{__CFError}'
#error = Pointer.new( '{__CFError}' ) Can't find pointer description for type `{__CFError}'
#error = Pointer.new( '__CFError' ) Can't find pointer description for type `__CFError'
#error = Pointer.new( CFError.type ) uninitialized constant AppDelegate::CFError (NameError)
#error = Pointer.new( CFErrorRef.type ) uninitialized constant AppDelegate::CFErrorRef 
p = ABPersonCreate()
raise error[0] unless ABRecordSetValue( p, KABPersonFirstNameProperty, "Guy", error )
raise error[0] unless ABRecordSetValue( p, KABPersonLastNameProperty, "Argo", error )
ab = ABAddressBookCreate()
raise error[0] unless ABAddressBookAddRecord( ab, p, error )
raise error[0] unless ABAddressBookSave( ab, error )
NSLog( "Record successfully added." ) 
```

欢迎提出建议。盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:46:12.693

升级到 RubyMotion 1.9 包括此修复：

> *   修复了编译器中的错误，即无法为接受指向 CoreFoundation 类型的指针的 API 提供 :object 类型的指针对象（例如 CFErrorRef*）。

`sudo motion update`会给你这个。

# swt - 编译 libjingle，expat 错误

> ID：10805152
> 
> 赞同：1
> 
> 时间：2012-05-29T19:07:26.807
> 
> 标签：swt, scons, expat-parser, libjingle

安装 libjingle 时，由于缺少 xmlparse.c，安装停止

这是安装的错误部分...我在第三方/expat-2.0.1/lib/xmlparse.c 中有 xmlparse.c，知道有什么问题吗？

```
File "./../../swtoolkit/site_scons/site_init.py", line 203, in BuildEnvironmentSConscripts
scons: done reading SConscript files.
scons: Building targets ...
scons: *** [build/dbg/obj/third_party/expat-2.0.1/lib/xmlparse.o] Source`third_party/expat-2.0.1/lib/xmlparse.c' not found, needed by target `build/dbg/obj/third_party/expat-2.0.1/lib/xmlparse.o'.
scons: building terminated because of errors.
root@den-pc:~/tejesh/libjingle-0.6.14/talk# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:06:00.817

当我意识到它正在处理 p2p 时，我实际上下载了 libjingle，因为我在类似的领域工作并想检查一下。

我下载了expat lib并将其复制到第三方目录并编译它没有这样的问题：

```
# ../../swtoolkit/hammer.sh expat 
```

结果如下：

```
scons: Reading SConscript files ...
scons: warning: The build_dir keyword has been deprecated; use the variant_dir keyword instead.
File "<myPath>/swtoolkit/site_scons/site_init.py", line 203, in BuildEnvironmentSConscripts
scons: done reading SConscript files.
scons: Building targets ...
________Compiling build/dbg/obj/third_party/expat-2.0.1/lib/xmlparse.o
________Compiling build/dbg/obj/third_party/expat-2.0.1/lib/xmlrole.o
________Compiling build/dbg/obj/third_party/expat-2.0.1/lib/xmltok.o
________Creating library build/dbg/obj/libexpat.a
________Indexing build/dbg/obj/libexpat.a
Install file: "build/dbg/obj/libexpat.a" as "build/dbg/lib/libexpat.a"
scons: done building targets. 
```

可以像目录权限一样简单吗？

这是我所拥有的：

```
# ls -al third_party/
...
drwxr-xr-x 12 notroot notroot   4096 2012-05-30 02:14 expat-2.0.1
...

# ls -al third_party/expat-2.0.1/
...
drwxr-xr-x 2 notroot notroot   4096 2012-05-30 02:09 lib
...

# ls -al third_party/expat-2.0.1/lib
...
-rwxr-xr-x 1 notroot notroot 193934 2012-05-30 02:09 xmlparse.c
... 
```

实际上`third_party/expat-2.0.1/lib`目录中的所有文件都具有相同的权限，我只是不想在这里列出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:20:33.587

安装 expat-2.1.0 时安装正在搜索 expat-2.0.1，猜测 README 未完全更新.....编译继续将目录重命名为 expat-2.0.1。

# apache - 使用表单身份验证apache tomcat在表单错误页面上显示用户名

> ID：10805154
> 
> 赞同：1
> 
> 时间：2012-05-29T19:07:34.773
> 
> 标签：apache, tomcat, form-authentication

我正在为我的网络应用程序使用基于 tomcat 的身份验证。我有一个登录页面和 login_error 页面，当登录失败时，用户会自动发送到登录错误页面，该页面显示“无效凭据”消息并提供用户名和密码字段以再次登录。

一切正常。

**我的问题**是如何用用户在之前的登录尝试中输入的内容填充用户名字段，就像几乎所有登录表单中发生的一样。那是在无效凭据上，用户名字段保留其值，密码字段被清除。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:50:39.943

我想你正在寻找这个：

```
<input name="j_username" value="<%= escape(request.getParameter('j_username')) %>" /> 
```

'escape' 方法的实现留给读者作为练习。您可能正在使用某种模板框架（JSTL、Velocity、Freemarker 等），它知道如何对数据进行 HTML 转义并避免使用双引号等。

# asp.net - ASP.NET 关系数据库

> ID：10805170
> 
> 赞同：2
> 
> 时间：2012-05-29T19:08:35.153
> 
> 标签：asp.net, database, gridview

我有两张桌子：

> 产品
> -ProductID、
> -ProductName、
> -ProductCategoryID、
> 
> ProductCategories
> -ProductCategoryID，
> -ProductCategoryName，

我正在使用数据集，并且可以成功地建立从 Products [ProductCategoryID] 到 ProductCategoryID 表的关系。如何让 Gridview 显示为 ProductCategoryName 而不是整数引用？

我习惯于在默认情况下发生这种情况的 Access，但它在 Visual Studio 中似乎并没有那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:12:01.967

在查询中的两个表之间创建表连接。例如，要显示单列：

```
SELECT ProductCategoryName FROM Products
JOIN ProductCategories ON
Products.ProductCategoryID = ProductCategories.ProductCategoryID

myGrid.DataSource = myDataSet;
myDataSet.Bind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:26:21.397

好的，您需要提供有关如何使用 gridview 的更多信息。假设您正确填写所有内容并且您正在使用 .aspx 上的列，您是否尝试过

```
<asp:GridView ID="yourId" runat="server" AutoGenerateColumns="false"> 
<Columns> 
...
    <asp:BoundField DataField="ProductCategories.ProductCategoryName" HeaderText="Category" /> 
...
</Columns> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:53:03.207

根据您的实现，可能值得考虑基于视图模型的方法。创建一个新类

```
ProductModel
-ProductId
-ProductCategoryName
-ProductName 
```

将您的网格绑定到此对象的集合而不是数据库对象。这不适用于每个实现，但值得建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T09:58:15.730

从产品 a,ProductCategories b 中选择 a.ProductID,a.ProductName,b.ProductCategoryName 其中 a.ProductCategoryID=b.ProductCategoryID

myGrid.DataSource = myDataSet; myDataSet.Bind();

# c++ - QObject 通用信号处理程序

> ID：10805174
> 
> 赞同：7
> 
> 时间：2012-05-29T19:08:43.483
> 
> 标签：c++, qt, metaprogramming, rpc

（“信号处理程序”是指插槽，而不是 POSIX 信号的处理程序。）

我需要“连接”（*可能不*`QObject::connect`直接使用）来自 QObject 子类（未知）子类实例的**所有信号到另一个 QObject 的****一个插槽**。我需要这个来通过网络发送信号（带参数）（对于自己的支持信号的 RPC 系统）。

（对于“未知”，我的意思是我的代码应该尽可能通用。所以它不包含`connect`我在 RPC 系统中使用的每个类中的每个信号的语句，而是提供类似的东西`RPC::connectAllSignals(QObject*);`，然后扫描运行期间的所有信号并连接它们。）

我想要实现的是：处理所有信号并将它们序列化（信号名称+参数）。我已经可以序列化参数，但我不知道如何获取信号名称。谷歌搜索后，似乎不可能使用与`sender()`QObject 实例类似的东西。所以我需要做一些更复杂的事情。

我当前用于将参数传递给远程目标函数的类型系统无论如何都仅限于某些类型。（那是因为我需要`qt_metacall`，除了参数类型之外`void*`，它们后面有“正确的类型”。我的 RPC 系统在内部使用只有几个类型的 QVariants，我`void*`使用自定义方法将它们转换为正确的类型。我听说使用它为时已晚，`QVariant::constData`而且它可能无论如何都不适合；所以如果没有缺点，我会坚持我的类型转换。）

应将所有信号映射到的目标插槽应类似于以下内容：

```
void handleSignal(QByteArray signalName, QVariantList arguments); 
```

如果 C++03 支持该解决方案将是最好的，所以我只想使用可变参数模板，如果不使用它们是一个*很大*的缺点。在这种情况下，C++11 是可以的，所以我也很高兴使用 C++11 得到答案。

* * *

现在我对我正在考虑的问题的**可能解决方案：**

我可以使用它扫描对象的所有信号，`QMetaObject`然后为*每个*信号创建一个`QSignalMapper`（或类似的传递所有参数的东西） 。这很容易，我在这方面不需要帮助。如前所述，我已经限制了某些类型的参数，而且我也可以忍受参数数量的限制。

 *这听起来像一个肮脏的黑客，但我可以使用某种自定义的、基于模板的信号映射器，像这样（在这个例子中是三个参数）：

```
template<class T1, class T2, class T3>
class MySignalMapper : public QObject
{
    Q_OBJECT
public:
    void setSignalName(QByteArray signalName)
    {
        this->signalName = signalName;
    }
signals:
    void mapped(QByteArray signalName, QVariantList arguments);
public slots:
    void map(T1 arg1, T2 arg2, T3 arg3)
    {
        QVariantList args;
        // QVariant myTypeConverter<T>(T) already implemented:
        args << myTypeConverter(arg1);
        args << myTypeConverter(arg2);
        args << myTypeConverter(arg3);
        emit mapped(signalName, args);
    }
private:
    QByteArray signalName;
}; 
```

然后我可以连接一个 QMetaMethod 称为`method`（已知是一个信号）的一个 QObject`obj`像这样调用（可能使用某种脚本为所有支持的类型和参数计数生成......是*的......它越来越脏了！* ):

```
 // ...
}
else if(type1 == "int" && type2 == "char" && type3 == "bool")
{
    MySignalMapper<int,char,bool> *sm = new MySignalMapper<int,char,bool>(this);
    QByteArray signalName = method.signature();
    signalName = signalName.left(signalName.indexOf('(')); // remove parameters
    sm->setMember(signalName);

    // prepend "2", like Qt's SIGNAL() macro does:
    QByteArray signalName = QByteArray("2") + method.signature();

    // connect the mapper:
    connect(obj, signalName.constData(),
            sm, SLOT(map(int,char,bool)));
    connect(sm, SIGNAL(mapped(int,char,bool)),
            this, SLOT(handleSignal(const char*,QVariantList)));
}
else if(type1 == ...)
{
    // ... 
```

由于这*可能有效*，它确实是一个肮脏的解决方案。我需要大量的宏来涵盖最多`N`参数的所有类型组合（其中`N`大约是 3 到 5，尚不知道），或者需要一个简单的脚本来为所有情况生成代码。问题是这将是*很多*情况，因为我支持每个参数大约 70 种不同的类型（10 种原始类型 + 嵌套列表和*每种*类型深度为 2 的映射）。因此，对于一个参数计数限制，`N`有`N`^ 70 个案例要涵盖！

**我忽略了这个目标是否有完全不同的方法？**

* * *

**更新：**

我自己解决了这个问题（见答案）。如果您对完整的源代码感兴趣，请参阅我刚刚发布的 RPC 系统的 bitbucket 上的存储库：bitbucket.org/leemes/qtsimplerpc

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:54:21.480

在查看问题评论中 HostileFork 建议的[柯南](http://qt-apps.org/content/show.php/Conan+-+Connection+analyzer+for+Qt?content=108330)代码后，我找到了解决问题的方法：

我通过使用自定义的输出文件（通过将生成的文件移动到我的源代码中，然后从我的 .pro 文件中删除类的标题）`qt_static_metacall`为助手 QObject编写了一个自定义的自定义对象。`moc`我需要小心，但它似乎远没有我在问题中建议的解决方案那么脏。

对于具有一些槽的类，例如两个槽`exampleA(int)`和`exampleB(bool)`，它的定义如下：

```
void ClassName::qt_static_metacall(QObject *_o, QMetaObject::Call _c, int _id, void **_a)
{
    if (_c == QMetaObject::InvokeMetaMethod) {
        Q_ASSERT(staticMetaObject.cast(_o));
        ClassName *_t = static_cast<ClassName *>(_o);
        switch (_id) {
        case 0: _t->exampleA((*reinterpret_cast< int(*)>(_a[1]))); break;
        case 1: _t->exampleB((*reinterpret_cast< bool(*)>(_a[1]))); break;
        default: ;
        }
    }
} 
```

如您所见，它将调用重定向到被调用者提供的对象指针上的“真实”方法。

我创建了一个带有一些没有任何参数的插槽的类，它将用作我们要检查的信号的目标。

```
class GenericSignalMapper : public QObject
{
    Q_OBJECT
public:
    explicit GenericSignalMapper(QMetaMethod mappedMethod, QObject *parent = 0);
signals:
    void mapped(QObject *sender, QMetaMethod signal, QVariantList arguments);
public slots:
    void map();
private:
    void internalSignalHandler(void **arguments);
    QMetaMethod method;
}; 
```

slot`map()`永远不会真正被调用，因为我们通过将我们自己的方法放入到这个调用过程中`qt_static_metacall`（注意，ID 为 0 的元方法是我在下一节中解释的另一个信号，所以修改后的方法是`case 1`）：

```
void GenericSignalMapper::qt_static_metacall(QObject *_o, QMetaObject::Call _c, int _id, void **_a)
{
    if (_c == QMetaObject::InvokeMetaMethod) {
        Q_ASSERT(staticMetaObject.cast(_o));
        GenericSignalMapper *_t = static_cast<GenericSignalMapper *>(_o);
        switch (_id) {
        case 0: _t->mapped((*reinterpret_cast< QObject*(*)>(_a[1])),(*reinterpret_cast< QMetaMethod(*)>(_a[2])),(*reinterpret_cast< QVariantList(*)>(_a[3]))); break;
        case 1: _t->internalSignalHandler(_a); break;
        default: ;
        }
    }
} 
```

我们所做的是：我们只是将未解释的参数数组传递给我们自己的处理程序，因为我们不能具体说明它的类型（甚至计数）。我将这个处理程序定义如下：

```
void GenericSignalMapper::internalSignalHandler(void **_a)
{
    QVariantList args;
    int i = 0;
    foreach(QByteArray typeName, method.parameterTypes())
    {
        int type = QMetaType::type(typeName.constData());

        QVariant arg(type, _a[++i]); // preincrement: start with 1
                                     // (_a[0] is return value)
        args << arg;
    }
    emit mapped(sender(), method, args);
} 
```

最后，其他一些类可能会连接到`mapped`信号，它将提供发送者对象、作为 QMetaMethod 的信号（我们可以从中读取名称）和作为 QVariants 的参数。

这不是一个完整的解决方案，但最后一步很简单：对于要检查的类的每个信号，我们创建一个 GenericSignalMapper 提供信号的元方法。我们将映射连接到对象并映射到最终接收器，然后接收器能够处理（和区分）源对象发出的所有信号。

~~我仍然在将`void*`参数转换为 QVariants 时遇到问题。~~固定的。`_a`还包括 index 处返回值的占位符`0`，因此参数从 index 开始`1`。

* * *

## 例子：

在此示例中，“最后一步”（为每个信号创建和连接映射器）是手动完成的。

要检查的类：

```
class Test : public QObject
{
    Q_OBJECT
public:
    explicit Test(QObject *parent = 0);

    void emitTestSignal() {
        emit test(1, 'x');
    }

signals:
    void test(int, char);
}; 
```

通过映射器接收所有信号的最终处理程序类：

```
class CommonHandler : public QObject
{
    Q_OBJECT
public:
    explicit CommonHandler(QObject *parent = 0);

signals:

public slots:
    void handleSignal(QObject *sender, QMetaMethod signal, QVariantList arguments)
    {
        qDebug() << "Signal emitted:";
        qDebug() << "  sender:" << sender;
        qDebug() << "  signal:" << signal.signature();
        qDebug() << "  arguments:" << arguments;
    }
}; 
```

我们创建对象并连接它们的代码：

```
CommonHandler handler;

// In my scenario, it is easy to get the meta objects since I loop over them.
// Here, 4 is the index of SIGNAL(test(int,char))
QMetaMethod signal = Test::staticMetaObject.method(4);

Test test1;
test1.setObjectName("test1");
Test test2;
test2.setObjectName("test2");

GenericSignalMapper mapper1(signal);
QObject::connect(&test1, SIGNAL(test(int,char)), &mapper1, SLOT(map()));
QObject::connect(&mapper1, SIGNAL(mapped(QObject*,QMetaMethod,QVariantList)), &handler, SLOT(handleSignal(QObject*,QMetaMethod,QVariantList)));

GenericSignalMapper mapper2(signal);
QObject::connect(&test2, SIGNAL(test(int,char)), &mapper2, SLOT(map()));
QObject::connect(&mapper2, SIGNAL(mapped(QObject*,QMetaMethod,QVariantList)), &handler, SLOT(handleSignal(QObject*,QMetaMethod,QVariantList)));

test1.emitTestSignal();
test2.emitTestSignal(); 
```

输出：

```
Signal emitted: 
  sender: Test(0xbf955d70, name = "test1") 
  signal: test(int,char) 
  arguments: (QVariant(int, 1) ,  QVariant(char, ) )  
Signal emitted: 
  sender: Test(0xbf955d68, name = "test2") 
  signal: test(int,char) 
  arguments: (QVariant(int, 1) ,  QVariant(char, ) ) 
```

（该`char`参数没有正确打印，但它正确存储在 QVariant 中。其他类型的工作就像一个魅力。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:22:12.993

您可以为每个参数进行通用调度，并且关于 SLOT/SIGNAL 它们只是字符串，因此伪造它们不是问题。这一切都是关于制作一个模板函数，它将每个参数传递给调度并合并所有结果。如果您使用 c++11，这甚至可以有无限数量的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T09:29:00.570

出于同样的原因，我一直在寻找一个通用的信号处理程序，即通过 RPC 转发信号调用。[在QtDevDays 演示文稿](https://www.qtdeveloperdays.com/sites/default/files/QtDevDays2014US-DIY-moc.pdf)中有一个非常有趣和详细的 QObject-QMetaObject 魔法描述。特别是，它们还描述了检查通用信号以进行调试或与脚本语言交互的愿望——因此这是一本完美的读物。

长话短说：您的解决方案是修改`qt_static_metacall`moc 代码。（现在在 Qt5 中？）同样的事情可以通过继承基于 QObject 的类和覆盖来实现`qt_metacall`，例如：

```
class QRpcService : public QRpcServiceBase
{
public:
    explicit QRpcService(QTcpServer* server, QObject *parent = 0);
    virtual ~QRpcService();

    virtual int qt_metacall(QMetaObject::Call, int, void**);
private:
    static int s_id_handleRegisteredObjectSignal;
}; 
```

神奇的 capture-all-slot 只是在基类（此处`void handleRegisteredObjectSignal()`）中定义的一个虚拟方法，它什么都不做，也不做任何事情。我在构造函数中查询它的 meta-method-id 并存储它`static int`以避免每次都搜索它。

在这个自定义的元调用处理程序中，您拦截对您的 magic-capture-all 插槽的调用并检查发送者对象和信号。`void**`这提供了将参数转换为 QVariant 列表所需的所有类型信息

```
int QRpcService::qt_metacall(QMetaObject::Call c, int id, void **a)
{
    // only handle calls to handleRegisteredObjectSignal
    // let parent qt_metacall do the rest
    if (id != QRpcService::s_id_handleRegisteredObjectSignal)
        return QRpcServiceBase::qt_metacall(c, id, a);

    // inspect sender and signal
    QObject* o = sender();
    QMetaMethod signal = o->metaObject()->method(senderSignalIndex());
    QString signal_name(signal.name());

    // convert signal args to QVariantList
    QVariantList args;
    for (int i = 0; i < signal.parameterCount(); ++i)
        args << QVariant(signal.parameterType(i), a[i+1]);

    // ...
    // do whatever you want with the signal name and arguments
    // (inspect, send via RPC, push to scripting environment, etc.)
    // ...

    return -1;
} 
```

我只是在这个方法中处理了所有事情，但是您也可以重新发送在另一个信号中收集的所有信息并在运行时附加到该信号上。

如果有人感兴趣，我还在[这里](https://github.com/pwuertz/qtrpc/ "QtRPC")用我的解决方案建立了一个存储库。*

# html - 造型在 CSS 问题中，我使用纯 CSS 来设置 <select>下拉框的样式。Using the code below, I am able to do this with one hiccup: when the text on the option becomes too wide, it doesn't cut off before the background image of the drop down arrow. 当文本太长时：我想要完成的是在下拉箭头图像之前 ID：10805178 赞同：5 时间：2012-05-29T19:08:57.583 标签：html, css, select 回答 #1 赞同：2 时间：2012-05-29T19:54:50.497 我的第一个建议是使select宽度足够大，以解决您最大的字符数。我相信你已经想到了，但它不可用。 我的第二个建议是添加 Javascript，尤其是 jQuery DD，以替换select options更易于样式化的定义列表。 https://github.com/HenrikJoreteg/jquery.dd 回答 #2 赞同：2 时间：2012-05-29T19:21:15.797 将选择放在内部 div 中，并在现有的 selectDiv 上使用 padding-right 或在该内部 div 上使用 margin-right。</select>

# javascript - 如何使用 ExtJs 网格过滤器过滤多个列

> ID：10805179
> 
> 赞同：0
> 
> 时间：2012-05-29T19:09:01.703
> 
> 标签：javascript, extjs, filter, extjs3

我有这段代码允许我在单个列上过滤我的商店：

```
var events_ds = new Ext.data.JsonStore({
                autoLoad: true,
                autoDestroy: true,
                url: '<% $base %>json/events/<% $eventWWN %>.json',
                storeId: 'events_ds',
                idProperty: 'id',
                fields: [ 'id', 'precedence', 'affectedWWN', 'eventType', 'color', 'CollectTime' ],
                listeners:
                         { 'load': function(store) {
                                store.filter( 'color', $_GET['color'] )
                         }
                 }
        }); 
```

现在，我想过滤多个列。

我正在考虑将“侦听器”行更改为此，但它正在工作，我没有看到另一个可以使用多个过滤器的示例 - 有什么建议吗？

```
listeners:
     { 'load': function(store) {
            store.filter( 'color', $_GET['color'] ),
            store.filter( 'priority', $_GET['priority'] )
     }
} 
```

更新：这是**ExtJs 3.4**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:15:37.297

如果您在发布的代码中使用过滤器，您将获得逻辑`AND`操作。如果您需要更复杂的东西，您可以简单地创建一个过滤器函数，如下所示：

```
store.filter(Ext.create('Ext.util.Filter', {
   filterFn: function(item) { 
       return item.get('color') == 'RED' || item.get('priority') == 'low'; 
   }, 
})) 
```

# android - ImageView 在其他 imageViews 下动画

> ID：10805182
> 
> 赞同：0
> 
> 时间：2012-05-29T19:09:12.387
> 
> 标签：android, android-layout, android-imageview

我有带有一些图片的Gridview。当点击图片时，缩放动画开始，但图片在其他图片下缩放并且它们覆盖了缩放的图片。如何将动画置于最前面？

有什么线索吗？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:10:54.867

`bringToFront()`在动画开始之前或开始时调用视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T02:33:31.313

调用 bringToFront() 会更改 GridView 中的排序。尝试使用要设置动画的视图的图像创建 ImageView 并为其设置动画。

```
 Bitmap bitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    final ImageView imageView = new ImageView(getActivity());
    imageView.setImageBitmap(bitmap);
    ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(view.getWidth() , view.getHeight());
    imageView.setLayoutParams(params);
    rootview.addView(imageView); 
```

为您的动画添加一个动画侦听器，并在动画结束时移除 ImageView。

# tooltip - 在鼠标悬停时显示数据

> ID：10805184
> 
> 赞同：166
> 
> 时间：2012-05-29T19:09:19.507
> 
> 标签：tooltip, mouseover, d3.js

我有一组数据以散点图的形式绘制。当我将鼠标悬停在其中一个圆圈上时，我希望它弹出数据（如 x、y 值，也许更多）。这是我尝试使用的：

```
vis.selectAll("circle")
   .data(datafiltered).enter().append("svg:circle")
   .attr("cx", function(d) { return x(d.x);})
   .attr("cy", function(d) {return y(d.y)})
   .attr("fill", "red").attr("r", 15)
   .on("mouseover", function() {
        d3.select(this).enter().append("text")
            .text(function(d) {return d.x;})
            .attr("x", function(d) {return x(d.x);})
            .attr("y", function (d) {return y(d.y);}); }); 
```

我怀疑我需要更多地了解要输入哪些数据？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-05-29T20:25:52.580

我假设你想要的是一个工具提示。最简单的方法是`svg:title`为每个圆圈附加一个元素，因为浏览器会负责显示工具提示，而您不需要鼠标处理程序。代码将类似于

```
vis.selectAll("circle")
   .data(datafiltered).enter().append("svg:circle")
   ...
   .append("svg:title")
   .text(function(d) { return d.x; }); 
```

如果您想要更高级的工具提示，例如可以使用 Tipsy。有关示例，请参见[此处。](http://bl.ocks.org/1373263)

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2013-05-27T21:27:42.010

此处描述了制作工具提示的一种非常好的方法：[简单的 D3 工具提示示例](http://bl.ocks.org/biovisualize/1016860)

你必须附加一个 div

```
var tooltip = d3.select("body")
    .append("div")
    .style("position", "absolute")
    .style("z-index", "10")
    .style("visibility", "hidden")
    .text("a simple tooltip"); 
```

然后你可以使用

```
.on("mouseover", function(){return tooltip.style("visibility", "visible");})
.on("mousemove", function(){return tooltip.style("top",
    (d3.event.pageY-10)+"px").style("left",(d3.event.pageX+10)+"px");})
.on("mouseout", function(){return tooltip.style("visibility", "hidden");}); 
```

`d3.event.pageX`/`d3.event.pageY`是当前鼠标坐标。

如果要更改文本，可以使用`tooltip.text("my tooltip text");`

## 工作示例

```
<script src="https://d3js.org/d3.v7.min.js"></script>
<body>
<div class="example_div"></div>
</body>
<script type="text/javascript">
  var tooltip = d3.select("body")
    .append("div")
    .style("position", "absolute")
    .style("z-index", "10")
    .style("visibility", "hidden")
    .text("a simple tooltip");

  var sampleSVG = d3.select(".example_div")
    .append("svg:svg")
    .attr("class", "sample")
    .attr("width", 300)
    .attr("height", 300);

  d3.select(".example_div svg")
    .append("svg:circle")
    .attr("stroke", "black")
    .attr("fill", "aliceblue")
    .attr("r", 50)
    .attr("cx", 52)
    .attr("cy", 52)
    .on("mouseover", function(){return tooltip.style("visibility", "visible");})
    .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
    .on("mouseout", function(){return tooltip.style("visibility", "hidden");});
</script>
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-08-01T00:47:36.357

我最近发现了一个很棒的库来做这件事。它使用简单，结果非常简洁：d3-tip。

[你可以在这里](http://bl.ocks.org/Caged/6476579)看到一个例子：

![在此处输入图像描述](../Images/fe28818771b47a49936030d42160ca81.png)

基本上，您所要做的就是下载（[index.js](https://github.com/Caged/d3-tip)），包括脚本：

```
<script src="index.js"></script> 
```

然后按照[此处](http://bl.ocks.org/Caged/6476579)的说明进行操作 （与示例相同的链接）

但是对于您的代码，它将类似于：

定义方法：

```
var tip = d3.tip()
  .attr('class', 'd3-tip')
  .offset([-10, 0])
  .html(function(d) {
    return "<strong>Frequency:</strong> <span style='color:red'>" + d.frequency + "</span>";
  }) 
```

创建你的svg（就像你已经做的那样）

```
var svg = ... 
```

调用方法：

```
svg.call(tip); 
```

向您的对象添加提示：

```
vis.selectAll("circle")
   .data(datafiltered).enter().append("svg:circle")
...
   .on('mouseover', tip.show)
   .on('mouseout', tip.hide) 
```

不要忘记添加 CSS：

```
<style>
.d3-tip {
  line-height: 1;
  font-weight: bold;
  padding: 12px;
  background: rgba(0, 0, 0, 0.8);
  color: #fff;
  border-radius: 2px;
}

/* Creates a small triangle extender for the tooltip */
.d3-tip:after {
  box-sizing: border-box;
  display: inline;
  font-size: 10px;
  width: 100%;
  line-height: 1;
  color: rgba(0, 0, 0, 0.8);
  content: "\25BC";
  position: absolute;
  text-align: center;
}

/* Style northward tooltips differently */
.d3-tip.n:after {
  margin: -1px 0 0 0;
  top: 100%;
  left: 0;
}
</style> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-29T16:22:37.277

这个简洁的示例演示了如何在 d3 中创建自定义工具提示的常用方法。

```
var w = 500;
var h = 150;

var dataset = [5, 10, 15, 20, 25];

// firstly we create div element that we can use as
// tooltip container, it have absolute position and
// visibility: hidden by default

var tooltip = d3.select("body")
  .append("div")
  .attr('class', 'tooltip');

var svg = d3.select("body")
  .append("svg")
  .attr("width", w)
  .attr("height", h);

// here we add some circles on the page

var circles = svg.selectAll("circle")
  .data(dataset)
  .enter()
  .append("circle");

circles.attr("cx", function(d, i) {
    return (i * 50) + 25;
  })
  .attr("cy", h / 2)
  .attr("r", function(d) {
    return d;
  })

  // we define "mouseover" handler, here we change tooltip
  // visibility to "visible" and add appropriate test

  .on("mouseover", function(d) {
    return tooltip.style("visibility", "visible").text('radius = ' + d);
  })

  // we move tooltip during of "mousemove"

  .on("mousemove", function() {
    return tooltip.style("top", (event.pageY - 30) + "px")
      .style("left", event.pageX + "px");
  })

  // we hide our tooltip on "mouseout"

  .on("mouseout", function() {
    return tooltip.style("visibility", "hidden");
  });
```

```
.tooltip {
    position: absolute;
    z-index: 10;
    visibility: hidden;
    background-color: lightblue;
    text-align: center;
    padding: 4px;
    border-radius: 4px;
    font-weight: bold;
    color: orange;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.11.0/d3.min.js"></script>
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-02-29T22:30:25.950

您可以像这样传入要在 mouseover 中使用的数据 - mouseover 事件使用一个函数，将您以前`enter`编辑的数据作为参数（并将索引作为第二个参数），因此您不需要`enter()`第二次使用。

```
vis.selectAll("circle")
.data(datafiltered).enter().append("svg:circle")
.attr("cx", function(d) { return x(d.x);})
.attr("cy", function(d) {return y(d.y)})
.attr("fill", "red").attr("r", 15)
.on("mouseover", function(d,i) {
    d3.select(this).append("text")
        .text( d.x)
        .attr("x", x(d.x))
        .attr("y", y(d.y)); 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-22T08:32:55.373

您可以在自己动手之前考虑自己想要什么，我将在此处提供 4 个示例。

本质上*，演示 1、2、4*的精神几乎相同，*演示*3使用的是[标题](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/title#example)方法。

* * *

演示 1、2、4：为每个项目添加[文本](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/text)（或[外来对象](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/foreignObject)）标签

*   demo1：纯javascript编写。

*   demo2：与 demo1 相同，使用 d3.js 代替

*   demo4：应用于直方图的示例，并说明为什么我使用这么多文本而不是只使用一个。

    > 笔记：
    > 
    > *   请**不要**使用[DocumentFragment](https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment)这不起作用，请改用[innerHTML](https://developer.mozilla.org/en/docs/Web/API/Element/innerHTML)。
    > *   标签显示可以使用[文本](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/text)或者[foreignobject](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/foreignObject)（可以写成类似HTML的代码）

demo3：这个很方便，如果要求不高，这可能是最好的方式。（这与[Lars Kotthoff 的回答](https://stackoverflow.com/a/10806220/9935654)相同。）

## 例子

```
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  text.tooltip {
    display: none;
  }

  circle:hover + text.tooltip {
    display: initial;
  }

  circle:hover + foreignobject {
    display: initial;
    color: #ffff00;
    background-color: #015db7;
  }

  /* ↓ used for demo4Histogram only */
  rect:hover + foreignobject {
    display: initial;
  }

  rect:hover {
    fill: red;
  }
</style>
<body></body>
<script>
  const w = 500
  const h = 150
  const dataset = [5, 10, 15, 20, 25]

  function demo1PureJS() {
    const svgFrag = document.createRange().createContextualFragment(`
<header>PureJS</header>
<svg width="400" height="150"><g></g></svg><br>
`)
    const gElem = svgFrag.querySelector(`g`)
    for (const idx in dataset) {
      const r = dataset[idx]
      const [cx, cy] = [idx * 50 + 25, h / 2];

      gElem.insertAdjacentHTML("beforeend", `
<circle cx="${cx}" cy="${cy}" r="${r}" data-tooltip="(${cx}, ${cy})"></circle>
<text class="tooltip" x="${cx}" y="${cy}" fill="red">${r}</text>
`)
      document.body.append(svgFrag)

    }
  }

  function demo2D3js() {
    const svg = d3.select("body")
      .append("svg")
      .attr("width", w)
      .attr("height", h)

    svg.node().insertAdjacentHTML("beforebegin", "<header>demo2D3js</header>")

    svg.selectAll("circle")
      .data(dataset)
      .enter()
      .append("circle")
      .attr("cx", (d, i) => i * 50 + 25)
      .attr("cy", h / 2)
      .attr("r", d => d)
      .text((d, idx, arr) => {
        const circle = arr[idx]
        const x = circle.getAttribute("cx")
        const y = circle.getAttribute("cy")

        const testCase = "foreignobject"
        if (testCase === "foreignobject") { //  focus here
          circle.insertAdjacentHTML("afterend", `
     <foreignobject x="${x}" y="${y}" width="${d.toString().length * 12}" height="26" display="none">
        <div>${d}</div>
     </foreignobject>
    `)

        } else {
          circle.insertAdjacentHTML("afterend", `<text class="tooltip" x="${x}" y="${y}" fill="yellow">${d}</text>`)
        }
        return ""
      })
  }

  function demo3SVGTitle() {
    /*
    https://developer.mozilla.org/en-US/docs/Web/SVG/Element/title
    <rect x="11" y="1" width="8" height="8">
      <title>I'm a square</title>
    </rect>
     */

    const svg = d3.select("body")
      .append("svg")
      .attr("width", w)
      .attr("height", h)

    svg.node().insertAdjacentHTML("beforebegin", "<header>SVGTitle</header>")

    svg.selectAll("circle")
      .data(dataset)
      .enter()
      .append("circle")
      .attr("cx", (d, i) => i * 50 + 25)
      .attr("cy", h / 2)
      .attr("r", d => d)
      .append("svg:title") //  focus here
      .text(d => d)
  }

  async function demo4Histogram() {
    const margin = {top: 50, right: 50, bottom: 50, left: 50},
      width = 900 - margin.left - margin.right,
      height = 900 - margin.top - margin.bottom

    const svg = d3.select("body")
      .append("svg")

    svg.node().insertAdjacentHTML("beforebegin", "<header>Histogram</header>")

    const mainG = svg.attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", `translate(${margin.left}, ${margin.top})`)

    const dataSet = []
    await d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv", (row) => {
      dataSet.push(row)
    })

    // X: price
    const scaleX = d3.scaleLinear()
      .domain([0, 2000])
      .range([0, width])

    mainG.append("g")
      .attr("transform", `translate(0,${height})`)
      .call(d3.axisBottom(scaleX)
      )

    const histogram = d3.histogram()
      .value(d => d.price)
      .domain(scaleX.domain())
      .thresholds(scaleX.ticks(50))

    const bins = histogram(dataSet)

    // Y: Count
    const scaleY = d3.scaleLinear()
      .domain([0, d3.max(bins, d => d.length)])
      .range([height, 0])

    mainG.append("g")
      .call(d3.axisLeft(scaleY))

    mainG.selectAll("rect")
      .data(bins)
      .enter()
      .append("rect")
      .attr("transform", d => `translate(${scaleX(d.x0)},${scaleY(d.length)})`)
      .attr("x", 1)
      .attr("width", d => d3.max([0, scaleX(d.x1) - scaleX(d.x0) - 1]))
      .attr("height", d => height - scaleY(d.length))
      .attr("fill", "#298e75")
      .attr("fill-opacity", 0.4)
      .text((d, idx, arr) => { //  focus here
        const rect = arr[idx]
        const [x, y, width] = [rect.getAttribute("x"), rect.getAttribute("y") ?? 0, rect.getAttribute("width")];
        if (width > 0) {
          const msg = `${d.x0}~${d.x1}: ${d.length}`
          rect.insertAdjacentHTML("afterend", `
     <foreignobject x="${x}" y="${y}" width="${msg.length * 13}" height=26 display="none" class="tooltip"
     transform="translate(${scaleX(d.x0)},${scaleY(d.length)})">
        <div>${msg}</div>
     </foreignobject>
    `)
        }
        return ""
      })

    /**
     You can certainly consider creating just one element and moving it around to achieve the display effect. [see https://stackoverflow.com/a/47002479/9935654]
     On my side, I made a corresponding element individually, which seems to generate a lot of duplicate items, but it can be done as follows:
     If you are interested in a specific marker, you can click on it, and it will display the message forever(cancel again to hidden)
     * */
    document.querySelectorAll(`foreignObject.tooltip`).forEach(div => { //  focus here
      div.addEventListener("click", () => {
        div.setAttribute("display", div.getAttribute("display") === "none" ? "" : "none")
      })
    })
  }

  demo1PureJS()
  demo2D3js()
  demo3SVGTitle()
  demo4Histogram()

</script>
```

demo4：因为每个元素都有一个标签，所以可以同时显示多个标签，这是一个元素无法做到的。

[![demo4直方图](../Images/ff1f5b14fbc52b3236b83f69100c6366.png)](https://i.stack.imgur.com/eGmEK.png)

* * *

d3.js 版本：v7

# php - div中的jquery登录表单而不刷新整个页面

> ID：10805187
> 
> 赞同：0
> 
> 时间：2012-05-29T19:09:48.407
> 
> 标签：php, javascript, jquery, html, ajax

我有一个要在 div 中使用的 php 文件：

```
<?php session_start(); ?>
<?php function loginForm() { ?>
<form method="POST" action="" name="loginForm" id="loginForm" accept-charset='UTF-8'>
    <input type='hidden' name='submit' id='submit' value='1'/>
    User: <input type="text" name="user" id="user" /><br />
    Password: <input type="password" name="passwd" id="passwd" /><br />
    <input type="submit" name="login" id="login" value="Login" />
</form>
<?php } ?>

<?php function logoutForm() { ?>
    <form method="POST" action="" name="logoutForm" id="logoutForm">
        Logout: <input type="submit" value="Log out" name="logout" id="logout" />
    </form>
<?php } ?>

<?php
function loggedUser() {
    if(isset($_SESSION['user']) && isset($_SESSION['passwd'])) {
        return $_SESSION;
    } else {
        return array();
    }
}

function loginLogout() {
    $loggedUser = loggedUser();
    if(!empty($loggedUser)) {
        logoutForm();
    } else {
        loginForm();
    }
    if(isset($_POST['login']) && isset($_POST['user']) && isset($_POST['passwd']) &&
            $_POST['user'] == "admin" && $_POST['passwd'] == "admin") {
        $_SESSION['user'] = $_POST['user'];
        $_SESSION['passwd'] = $_POST['passwd'];
        header('Refresh: 1; url='.$_SERVER['REQUEST_URI']);
    }
    if(isset($_POST['logout']) && isset($_SESSION)) {
        foreach($_SESSION as $k => $v) {
            unset($_SESSION[$k]);
        }
        header('Refresh: 1; url='.$_SERVER['REQUEST_URI']);
    }
}
loginLogout();

?> 
```

而且我在 jquery 和 html 中有代码

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#logindiv').load('loginLogout.php');
        $('#loginForm, #logoutForm').live('submit', function(e) {
            e.preventDefault();
            $.post('loginLogout.php', $(this).serialize(), function (
                    data, textStatus) {
                $('#logindiv').html(data);
            });
            return false;
        });
    });
</script> 
```

和 div

```
<div id="logindiv"></div> 
```

如何正确放置代码，登录和注销也可以在 jquery 中使用，而无需刷新整个页面？什么是识别行头的刷新事件('Refresh: 1; url='.$_SERVER['REQUEST_URI']); 在 php 文件中。Widhout div 和 jquery 它运行良好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:59:33.270

这是一个使用 2 个文件的完整工作示例，允许登录/注销表单动态更新而无需刷新页面。该代码与您的代码非常相似。

**form.php**的代码

 **```
<?php 
session_start(); 

function loginForm($isHidden) { 
    $display = ($isHidden) ? "none" : "block";
    ?>
    <form method="POST" action="" name="loginForm" id="loginForm" accept-charset='UTF-8' style="display: <?php echo $display; ?>;">
        <input type='hidden' name='actionLogin' id='actionLogin' value='1'/>
        User: <input type="text" name="user" id="user" /><br />
        Password: <input type="password" name="passwd" id="passwd" /><br />
        <input type="submit" name="login" id="login" value="Login" />
    </form>
    <?php 
} 

function logoutForm($isHidden) { 
    $display = ($isHidden) ? "none" : "block";
    ?>
    <form method="POST" action="" name="logoutForm" id="logoutForm" style="display: <?php echo $display; ?>;">
        <input type='hidden' name='actionLogout' id='actionLogout' value='1'/>
        Logout: <input type="submit" value="Log out" name="logout" id="logout" />
    </form>
    <?php 
}

function loggedUser() {
    if(isset($_SESSION['user']) && isset($_SESSION['passwd'])) {
        return $_SESSION;
    } else {
        return array();
    }
}
?>

<html>
<head>
    <title>Form</title>

    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $('#loginForm, #logoutForm').live('submit', function(e) {
                e.preventDefault();
                $.post('loginLogout.php', $(this).serialize(), function (data, textStatus) {
                    if (data == "true") { //login successful
                        $("#loginForm").hide();
                        $("#logoutForm").show();
                    } else {
                        $("#loginForm").show();
                        $("#logoutForm").hide();
                    }
                });
                return false;
            });
        });
    </script>
</head>
<body>

    <div id="logindiv">
        <?php
        $loggedUser = loggedUser();
        if(!empty($loggedUser)) {
            loginForm(true); //hidden
            logoutForm(false); //not hidden
        } else {
            loginForm(false);
            logoutForm(true);
        }
        ?>
    </div>

</body>
</html> 
```

**loginLogout.php**的代码

 **```
<?php
session_start(); 

if(isset($_POST['actionLogin']) && isset($_POST['user']) && isset($_POST['passwd']) &&
        $_POST['user'] == "admin" && $_POST['passwd'] == "admin") {
    $_SESSION['user'] = $_POST['user'];
    $_SESSION['passwd'] = $_POST['passwd'];
    echo "true"; //successful log in

} else if(isset($_POST['actionLogout']) && isset($_SESSION)) {
    foreach($_SESSION as $k => $v) {
        unset($_SESSION[$k]);
    }
    echo "false"; //successful log out
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:15:22.500

在打印表单**之前**更改您的代码以处理表单提交。这可能看起来违反直觉，但除非您首先处理所有输入，否则您打印的 HTML 在准备发送到浏览器时已经过时。

如果您使用 ajax，也不需要刷新标头。

只需像这样更改您的代码：

```
function loginLogout() {
    if(isset($_POST['login']) && isset($_POST['user']) && isset($_POST['passwd']) &&
            $_POST['user'] == "admin" && $_POST['passwd'] == "admin") {
        $_SESSION['user'] = $_POST['user'];
        $_SESSION['passwd'] = $_POST['passwd'];
    }
    if(isset($_POST['logout']) && isset($_SESSION)) {
        foreach($_SESSION as $k => $v) {
            unset($_SESSION[$k]);
        }
    }
    $loggedUser = loggedUser();
    if(!empty($loggedUser)) {
        logoutForm();
    } else {
        loginForm();
    }
} 
```****

# beyondcompare - Beyond Compare 2 忽略大小写

> ID：10805188
> 
> 赞同：6
> 
> 时间：2012-05-29T19:09:54.743
> 
> 标签：beyondcompare

如何让 Beyond Compare 2 忽略字母大小写的差异？例如，“Foo Bar”和“fOo BAR”将被视为相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-30T16:55:31.397

在我拥有的 BeyondCompare 版本（3.3 Pro 版）中，您可以选择“Text important, except for character case”。要找到此设置，请单击“规则”工具栏按钮，然后选择“编辑默认值”。看到截图...

此选项仅出现在“数据比较”设置中。

![在此处输入图像描述](../Images/fb35dd2101fcd900afd1c7d97ff37e24.png)

如果你正在做“文本比较”，那么你应该确保在“重要性”选项卡中没有选择“字符大小写”，然后选择“忽略不重要的差异”——这将进行不区分大小写的比较。

![在此处输入图像描述](../Images/e745ab4b4b746913e006dd9fb4dc3be7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:40:00.983

这可能与您正在编辑的文件类型有关。

如果您转到工具/选项和规则并确定将哪个规则应用于您正在比较的文件，然后查看重要性选项卡上选择的内容。

例如，如果您编辑/查看 Visual Basic 文件的规则，您应该看到“字符大小写”被勾选为不重要，但对于 C/C++ 文件没有勾选。

因此，您可能希望更改 BC 正在使用的规则的设置，或者为您的文件类型创建新规则并选择此选项，然后在比较文件时选择忽略不重要的差异。

# paypal - 从 api paypal 费用计算 payRequest

> ID：10805192
> 
> 赞同：1
> 
> 时间：2012-05-29T19:10:13.840
> 
> 标签：paypal, paypal-adaptive-payments

我想计算执行自适应付款的贝宝费用。我可以通过提交付款[请求](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPayAPI)来获取 payKey 。在那之后，在继续进行交易之前，我想为链式[支付](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)中的每个接收者计算贝宝的费用。Paypal 确实提供了它根据交易保留的百分比，但理想情况下，我想通过 API 计算它，而不是在我的应用程序中硬编码它。

你知道哪个是 api 调用（如果有的话）吗？

# ruby-on-rails - Ruby on Rails i18n 面包屑

> ID：10805196
> 
> 赞同：1
> 
> 时间：2012-05-29T19:10:31.623
> 
> 标签：ruby-on-rails, ruby, internationalization, locale, breadcrumbs

我正在使用默认的 Rails i18n，并且遇到了 i18ing 面包屑的问题。我使用名为“breadcrumbs_on_rails”的 gem 来渲染面包屑，所以我在控制器中添加面包屑链接，如下所示：

```
add_breadcrumb I18n.t('interface.home'), :root_path 
```

问题是，该控制器似乎不知道当前的语言环境并且总是使用默认语言。

如何告诉 i18n 使用选定的区域设置，而不是默认设置？

**更新：** 控制器知道当前的语言环境。但问题出现在奇怪的情况下。**我以一种方法在两个不同的地方使用了相同的代码，发现 i18n 在以下示例代码的第6**行不起作用，而在以下示例代码的第**10**行起作用：

```
def index
  @device = Device.find_by_id(params[:device_id])
  if @device != nil
    if current_user?(User.find(@device))
      logger.debug I18n.locale # Outputs en - wrong
      add_breadcrumb t('interface.all_events'), device_events_path(@device) # Does not work
      logger.debug I18n.locale # Outputs de - correct
      add_breadcrumb @device.title, device_path(@device)
      logger.debug I18n.locale # Outputs de - correct
      add_breadcrumb t('interface.all_events'), device_events_path(@device) # Works perfect
      @events = @device.events.paginate(page: params[:page], per_page: 30)
    else
      redirect_to :root
    end
  else
    redirect_to :root
  end
end 
```

区域设置在 application_controller.rb 中设置，就像教程中建议的那样，但使​​用 http_accept_language 进行检测：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper

  def default_url_options(options={})
    I18n.locale = get_accepted_language
    { :locale => get_accepted_language }
  end

  def get_accepted_language
    available_locales = %w{en de}
    request.user_preferred_languages
    request.preferred_language_from(available_locales)
  end
end 
```

URL 如下所示：`http://localhost:3000/de/devices/3/events`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:26:49.933

获取和设置当前语言环境：

```
I18n.locale 
```

获取默认语言环境：

```
I18n.default_locale 
```

这就是你所需要的：http: [//guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

* * *

尝试使用官方指南中的方法。您可以使用以下方式设置语言环境`before_filter`：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper

  before_filter :set_locale

  def set_locale
    I18n.locale = params[:locale] || I18n.default_locale
  end

  def default_url_options(options={})
    I18n.locale = get_accepted_language
    { :locale => get_accepted_language }
  end

  def get_accepted_language
    available_locales = %w{en de}
    request.user_preferred_languages
    request.preferred_language_from(available_locales)
  end
end 
```

# c# - 更新数据库时如何将数据获取到 Windows 窗体？

> ID：10805197
> 
> 赞同：-2
> 
> 时间：2012-05-29T19:10:34.547
> 
> 标签：c#, mysql

我想编写一个 C# 应用程序，当数据库更新时，记录数据应该存储在一个数组中。我不知道这样做。如何在发生更新的同时将更新的记录获取到我的应用程序。我使用 MySQL 数据库

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:25:07.337

（根据您的评论编辑）

看看 MVVM 映射到数据库（尝试谷歌搜索）。这是一个看起来不错的示例 - [http://www.codeproject.com/Articles/124160/Using-WPF-MVVM-for-Database-Access](http://www.codeproject.com/Articles/124160/Using-WPF-MVVM-for-Database-Access)。

如果您搜索给定的搜索词，则会出现大量示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:27:44.770

如果我误读了您的问题，请纠正我，但我相信您正在寻找一种方法让您的应用程序知道数据库被您的表单以外的其他东西改变了？

检测外部数据更新是一个重要的架构问题。要获得“推送”通知，您需要有一个数据服务作为您的数据存储并将数据简单地持久化回数据库，或者在 MySQL 本身中使用某种通知机制，我不认为它是本机支持的（并且通常不是一个好主意）。

您的另一个选择是在 UI 端有一个轮询循环来定期检查更改。也不是一个好主意。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T19:14:32.743

首先，您需要在 C# 应用程序和 mysql 数据库之间建立连接。这通常通过`MySqlConnection`用于执行的 a 来完成`MySqlCommand`。 [看看这篇文章](http://bitdaddys.com/MySQL-ConnectorNet.html)的代码和过程的描述。

# iphone - 在 Xcode 中链接 OpenCV 库

> ID：10805202
> 
> 赞同：0
> 
> 时间：2012-05-29T19:11:06.550
> 
> 标签：iphone, xcode, opencv, cmake

所以我刚刚使用 CMake 安装了 OpenCV 2.4.0，两个相关文件夹似乎位于 usr/local/include/opencv 和 usr/local/include/opencv2。但是，在将这些与 Xcode 4.2 实际链接以在 iphone 应用程序中使用它时，我完全不知所措。我一直在网上搜索解决方案，虽然存在一些解决方案，但我要么没有正确执行步骤，要么似乎在正确的位置没有正确的文件/文件夹，尽管我很确定它已正确安装. 对新手的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:37:16.010

我希望这不是盲人在这里带领盲人。我使用 xcode 选项运行 cmake：

> cmake -G "Xcode" -D WITH_TIFF=OFF -D BUILD_EXAMPLES=ON ..

我没有看到关于如何使用 -G "Xcode" 选项的教程，所以这是我的 2c 价值。

更新：找到了一个使用 -G "Xcode" 的博客：[Building OpenCV for Snow Leopard](http://www.randomsequence.com/articles/opencv-snow-leopard/)

经过大量的颠簸后，我在我的 xcode 构建目录 opencv/build/lib/Debug 中得到了结果。

我只是在编译命令行实用程序，所以我设置了一个新的命令行目标，并且在我的目标设置中，在“链接库”部分下，我必须添加所有这些库。

对不起，如果这有点模糊。我没有对所有的步骤做很好的记录。

所以，看看你是否需要在你的目标设置中添加一些“链接库”。

在 SE 上，请参阅：[this post](https://stackoverflow.com/q/1834189/614542)

# jquery - DOM 元素虚拟值或映射值

> ID：10805205
> 
> 赞同：2
> 
> 时间：2012-05-29T19:11:24.053
> 
> 标签：jquery, css

我有 4 个文本框构成 text-shadow 属性的输入，并且包含在 DIV 中，如下所示：

```
<div id="shadow">
    <input type="number" min="-5" max="5" step="1" value="0" id="hshad" />
    <input type="number" min="-5" max="5" step="1" value="0" id="vshad" />
    <input type="number" min="0" max="20" step="1" value="0" id="bshad" />
    <input type="text" value="#000000" id="cshad" />
</div> 
```

现在，我手动组合四个输入以获得所需的 css 值。像这样的东西：

```
$('#elem').css('text-shadow', $('#hshad').val() + "px " + $('#vshad').val() + "px " + $('#bshad').val() + "px " + $('#cshad').val()); 
```

有没有办法可以将这些值“映射”到`#shadow`作为 getter 和 setter 的值？

例如`$('#shadow').val()`会给我

`"0px 1px 5px #FFFFFF"`

我可以通过以下方式设置四个输入的值：

`$('#shadow').val("0px 1px 5px #FFFFFF")`

这几乎是为了在编辑具有预先退出规则的记录时能够遍历 CSS 规则并设置表单字段值的目的（因为我知道你会问）。这一切都归功于我正在制作的邪恶的所见即所得。

**编辑**

好的，所以为了这个问题，重要的是要从`val()`. 我正在遍历 ~20-30 CSS 规则，并且不想被单一规则所困扰。我*可以*在循环之后返回并分解值，但我希望扩展`val`并保持我的代码在一个漂亮、整洁的循环中。

**例子**

我要循环的 CSS（作为 JSON 对象）”

```
{
    "top": "48px",
    "left": "59px",
    "width": "100px",
    "height": "100px",
    "font-family": "Oxygen",
    "font-size": "1em",
    "font-weight": "normal",
    "color": "rgb(51, 51, 51)",
    "text-shadow": "rgb(0, 0, 0) 1px 0px 0px",
    "background-color": "rgba(0, 0, 0, 0)",
    "border-radius": "0px",
    "-moz-border-radius": "0px",
    "box-shadow": "none",
    "-moz-box-shadow": "none",
    "padding": "0px"
} 
```

我为每个表单字段`data-prop`赋予其关联的 CSS 属性的属性，如下所示：

```
<input type="text" data-prop="font-family" /> 
```

然后我会像这样循环规则

```
$.each(cssRules, function(name, value) {
  $('[data-prop=' + name + ']').val(value);
}) 
```

漂亮，整洁，舒适。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:23:07.187

[http://jsfiddle.net/XCCgv/4/](http://jsfiddle.net/XCCgv/4/)

```
$.valHooks.div = {

    get: function( elem ) {
        if( elem.id !== "shadow" ) return;

        return $.map( $("input", elem ), function (element,index) {
                return index === 3 ? element.value : element.value + "px"
        }).join(" ");

    },

    set: function( elem, value ) {
        if( elem.id !== "shadow" ) return;

        var inputs = $( "input", elem );

        $.each( value.split(" "), function( index, value ) {
            var val = parseFloat(value);
            inputs[index].value = isNaN(val) ? value : val;
        });

        return true;
    }

}; 
```

编辑：我看到了你的编辑，但我认为你从这里得到了这个想法......你可以签`$(elem).data()`入 valHook 并根据它调用不同的函数。在这里我只是检查`.id === "shadow"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:15:12.053

```
var value = [];
$('div#shadow input').filter(function(index, val) {
   index != 3 ? value.push(this.value + 'px') : value.push(this.value);
});

console.log(value.join(' ')); 
```

**[演示](http://jsfiddle.net/thecodeparadox/uqcA3/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:17:43.507

是的，使用自定义插件或功能。为了简单起见，我会做一个函数。

```
function getShadow() {
    return $.map( $("#shadow input"), function (element,index) {
        return index === 3 ? element.value : element.value + "px"
    }).join(" ");
}

console.log(getShadow()); 
```

​http://jsfiddle.net/XCCgv/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T19:30:27.653

这是一个简单的 jQuery 函数，您可以将其用作您的案例的 getter/setter：

```
$.fn.customVal = function(val){
     if(!val){
       //getter
       var value = [];
       $('input',$(this)).filter(function(index, val) {
            value.push(this.value);
       }); 

        value = $.map(value,function(elem,index){
           return index != 3 ? elem + 'px' : elem;
        }); 
       return value.join(' '); 
     }else{
       //setter
       var parts = val.split("px");
       $('input',$(this)).each(function(index, val) {
            $(this).val($.trim(parts[index]));
       });  

    }
};

alert($('#shadow').customVal());

$('#shadow').customVal("0px 1px 5px #FFFFFF");

alert($('#shadow').customVal()); 
```

[工作小提琴](http://jsfiddle.net/joycse06/VQrZV/1/) </p>

# php - 如何根据表单提交的数据动态创建文件

> ID：10805209
> 
> 赞同：-2
> 
> 时间：2012-05-29T19:11:34.477
> 
> 标签：php, forms, file, dynamic

我一直在寻找如何做到这一点的几个小时，并且正在就我想做的事情寻求帮助。

我想**动态创建**一个文件，基于表单提交的数据，使用单选按钮作为变量。

**例如：**

```
if ($_POST['radio_button_selection'] == "percussion") {

file_put_contents("dynamic_filename.txt", $_POST['radio_button_selection']);

echo "Dynamic filename created";

} 
```

* * *

**我试过了：**

```
if ($_POST['radio_button_selection'] == "percussion") {

file_put_contents("({$_POST['percussion']})", $_POST['radio_button_selection']);

echo "Percussion file created.";

} 
```

但这不起作用。

我知道我缺少一段代码来给它扩展，但我不知道该怎么做。

任何帮助是极大的赞赏。

谢谢你。

**（编辑）** 我是否需要用 PHP 代码修改它以创建文件“打击乐”以及在同名文件中写入数据？

```
<input type="radio" value="percussion" name="musictype">Percussion 
```

例如，使用文件中的单词“percussion”创建文件“percussion.txt”。

下面的代码工作并创建文件“percussion.txt”并在文件中写入单词“percussion”，但我需要在写入文件的同时动态创建文件。

```
file_put_contents("percussion.txt", $_POST['musictype'] . "\n", FILE_APPEND); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:30:07.447

Bsdnoobz 刚刚切换。

```
file_put_contents($_POST['radio_button_selection'].'.txt', $_POST['percussion']); 
```

确保您正在写入的文件夹具有写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:13:30.417

尝试这个：

```
file_put_contents($_POST['percussion'].'.txt', $_POST['radio_button_selection']); 
```

# asp.net - ASP.net SQL 计数方法

> ID：10805212
> 
> 赞同：1
> 
> 时间：2012-05-29T19:11:44.537
> 
> 标签：asp.net, sql, login

我正在尝试制作一个登录页面。

我有一个包含四列的用户表。

id 用户名 密码 admin

我有一个帖子，但我无法登录。这是我的代码：

```
 try
    {

        string strcon = System.Configuration.ConfigurationManager.ConnectionStrings["blogCS"].ToString();
        SqlConnection myConnection = new SqlConnection();
        myConnection.ConnectionString = strcon;
        myConnection.Open();

        string strSql = "SELECT COUNT(*) FROM users WHERE username=' " + txtUsername + "' AND password='";
        SqlCommand command = new SqlCommand(strSql, myConnection); 
        int count = Convert.ToInt32(command.ExecuteScalar());
        myConnection.Close();

        if (count == 1)
            Response.Redirect("index.aspx");
        else
            lblStatus.Text = Convert.ToString(count);

    }

    catch (Exception k)
    {
        lblStatus.Text = k.Message;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:17:52.497

这是精炼的代码：

```
 try
    {

        string strcon = System.Configuration.ConfigurationManager.ConnectionStrings["blogCS"].ToString();
        SqlConnection myConnection = new SqlConnection();
        myConnection.ConnectionString = strcon;
        myConnection.Open();

        string strSql = "SELECT COUNT(id) FROM users WHERE username=' " + txtUsername + "' AND password='" + txtPassword + "'";
        SqlCommand command = new SqlCommand(strSql, myConnection); 
        int count = Convert.ToInt32(command.ExecuteScalar());
        myConnection.Close();

        if (count == 1)
            Response.Redirect("index.aspx");
        else
            lblStatus.Text = Convert.ToString(count);

    }

    catch (Exception k)
    {
        lblStatus.Text = k.Message;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T19:13:46.000

```
"SELECT COUNT(*) FROM users WHERE username=' " + txtUsername + "' AND password='"; 
```

通过密码

# ios - xCode - 如何判断某些东西是否会被弃用？

> ID：10805213
> 
> 赞同：0
> 
> 时间：2012-05-29T19:11:50.933
> 
> 标签：ios, xcode, deprecated

尝试让应用程序面向未来是愚蠢的吗？偶然地，我今天遇到了将被弃用的声明。

```
[self presentModalViewController:controller animated:YES];

[self dismissModalViewControllerAnimated:YES]; 
```

这让我想知道是否有一些方法可以避免/改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:15:50.590

没有明确的方法来判断某些 API、函数、类等是否会在未来被弃用。

但是，您可以关注开发者社区。您还可以通过检查样式、命名、功能与 API、类、项目等的其余部分是否有显着差异来进行有根据的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:16:59.220

我不知道，你可能会在 Apple 开发论坛上听到一些关于 iO 的下一个版本的消息，但你真的不能说出来......一切都在 NDA 之下

# ruby-on-rails - 为什么“each”方法在第一个数组值之后停止？

> ID：10805214
> 
> 赞同：0
> 
> 时间：2012-05-29T19:12:07.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个更大的方法，我想使用其中的一部分来获取数组值并将它们插入到链接中。我正在使用该方法在我正在自定义的应用程序的元数据中生成链接字段。完整的方法如下：

```
def get_facet_from_datastream(resource, datastream_name, field_key, opts={})
  if opts.has_key?(:values)
    values = opts[:values]
  if values.nil? then values = [opts.fetch(:default, "")] end
  else
    values = resource.get_values_from_datastream(datastream_name, field_key, opts.fetch(:default, ""))
  if values.empty? then values = [ opts.fetch(:default, "") ] end
 end

 facet = field_key.to_a.join("_") + "_facet"

 values.each do |v|
   searchv = v.to_s.gsub(/ /, "+")
   link =  "<a href=\"http://development4/lcdl/catalog?f[#{facet}][]=#{searchv}\">#{v}</a>"
   return link.html_safe
 end

end 
```

我在“ `values.each do`”部分遇到问题。返回链接适用于数组中的第一个值，但会停止。我最喜欢的是每个链接后跟一个换行符，但我显然混淆了语法。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:13:56.710

是的，它停止了，因为你有`return link.html_safe`你的`each`街区。`values`它返回数组的第一个值。

更新您的代码部分：

```
 values.map do |v|
   searchv = v.to_s.gsub(/ /, "+")
   "<a href=\"http://development4/lcdl/catalog?f[#{facet}][]=#{searchv}\">#{v}</a>"
 end.join.html_safe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:16:43.073

您的每个循环中有一个`return`语句。这将退出该方法，并在第一遍返回。

你可能想做这样的事情：

```
values.map do |v|
  searchv = v.to_s.gsub(/ /, "+")
  link =  "<a href=\"http://development4/lcdl/catalog?f[#{facet}][]=#{searchv}\">#{v}</a>"
  link.html_safe
end.join 
```

# asp.net-mvc-3 - IIS 7 能否将默认 url 设置为 MVC 3 区域

> ID：10805218
> 
> 赞同：1
> 
> 时间：2012-05-29T19:12:33.790
> 
> 标签：asp.net-mvc-3, iis-7, asp.net-mvc-3-areas

我有一个分为多个区域的 MVC 3 解决方案。例如，我可以通过以下方式访问应用程序：//myapp/ 或 //myapp/external 或 //myapp/internal。我在 IIS 7 中尝试完成的是将默认 URL（在我的情况下为 //myapp）设置为 //myapp/internal。

因此，无论何时有人导航到 //myapp，他们都会被重定向到 //maypp/internal（internal 是我在 MVC 中设置的区域的名称）。

我真的在寻找一种在服务器上而不是在 global.asax 中执行此操作的方法。原因是因为这个应用程序将在多个服务器上，我不想在每次需要部署我的应用程序时都更改默认路由。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:30:41.657

最简单的方法是在 //myapp/ 处创建一个默认控制器，该控制器 301 是 //myapp/internal 的用户。总会有人键入 mydomain.com 并突然一无所获。

或者，在主 Global.asax.cs 中创建一个匹配空白的特定路由，并路由到指定的控制器、操作和区域。不过，这几乎颠覆了“区域完全独立”的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:09:17.807

我最终通过以下方式解决了我的问题：

一种。在我的 Web.Internal.config 文件中，我添加了这个转换：

```
<appSettings>
    <add key="Environment" value="Production Internal(Live)" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
</appSettings> 
```

现在，当我将解决方案部署到内部站点时，Web.config 中的 Environment 值被“Production Internal(Live)”覆盖

湾。然后，我在默认控制器中添加了一个检查，并在 Web.config 中查找环境值的操作

```
var InternalorExternalSite = Convert.ToString(ConfigurationManager.AppSettings["Environment"]);

if (InternalorExternalSite == "Production Internal(Live)")
    {
        return RedirectToAction("", "", new { area = "Internal" });
    } 
```

在我的情况下，上面的代码将检查环境值是否等于“Production Internal(Live)”，并将请求重定向到“Internal”区域。

现在，当内部用户导航到[http://www.internalsite.com](http://www.internalsite.com)时，他们将被重定向到区域[http://www.internalsite.com/internal](http://www.internalsite.com/internal)

当外部用户导航到[http://www.externalsite.com](http://www.externalsite.com)时，他们不会被重定向到任何区域，但如果您需要，您可以根据上述内容将用户重定向到任何区域。

# c# - Metro XAML - 颜色绑定不起作用

> ID：10805225
> 
> 赞同：0
> 
> 时间：2012-05-29T19:13:05.600
> 
> 标签：c#, silverlight, xaml, windows-runtime, winrt-xaml

我一直在使用 C# 在 Metro/XAML 中编写复杂的自定义控件。

为了说明我的观点，我创建了一个最小的场景供您参考。

一个简单的自定义控件如下：

```
public sealed class TestControl : Control
{
    public static DependencyProperty TestTextProperty = DependencyProperty.Register("TestText", typeof(string), typeof(TestControl), new PropertyMetadata(string.Empty));

    public string TestText
    {
        get { return (string) GetValue(TestTextProperty); }
        set { SetValue(TestTextProperty, value); }
    }

    public static DependencyProperty TestColorProperty = DependencyProperty.Register("TestColor", typeof(Color), typeof(TestControl), new PropertyMetadata(Colors.Blue));

    public Color TestColor
    {
        get { return (Color)GetValue(TestColorProperty); }
        set { SetValue(TestColorProperty, value); }
    }

    public TestControl()
    {
        this.DefaultStyleKey = typeof(TestControl);
    }
} 
```

Thie 控件有两个依赖属性，一个 Text 属性和一个 color 属性。

这是我在 Generic.xaml 中的控件标准样式

```
<Style TargetType="local:TestControl">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:TestControl">
                <Border
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                    <TextBlock Text="{TemplateBinding TestText}">
                        <TextBlock.Foreground>
                            <SolidColorBrush Color="{Binding Source={RelativeSource Mode=TemplatedParent}, Path=TestColor}" />
                        </TextBlock.Foreground>
                    </TextBlock>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

有两个问题：

1）这段代码不会编译：

```
<Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
    <local:TestControl x:Name="testcont" TestText="Hello" TestColor="Red"   />
</Grid> 
```

错误是：

*XAML BlankPage.xaml 中的属性 TestColor 上不允许值类型颜色*

所以看起来颜色的类型转换器坏了（我假设）。为了解决这个问题，我在代码隐藏中设置了 TestColor 属性：

```
public BlankPage()
{
    this.InitializeComponent();
    testcont.TestColor = Colors.Red;
} 
```

这允许代码编译，但是颜色永远不会在模板中正确设置。我什至使用了`ValueConverter`：

```
<TextBlock.Foreground>
    <SolidColorBrush Color="{Binding Source={RelativeSource Mode=TemplatedParent}, Path=TestColor, Converter={StaticResource DebugConverter}}" />
</TextBlock.Foreground> 
```

但是中的断点`ValueConverter`永远不会被命中，这意味着绑定以某种方式默默地失败。

似乎没有解决办法。有人可以阐明这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:08:13.227

值类型依赖属性存在一个已知问题：[XAML 中的属性 Duration 不允许值类型持续时间](https://stackoverflow.com/questions/9994845/value-type-duration-is-not-allowed-on-property-duration-in-xaml) MS 表示将修复。目前，您可以将属性类型从颜色更改为对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:29:34.357

有两个命名空间定义颜色类型，`System.Drawing`和`System.Windows.Media`. 您的颜色属性可能属于绘图命名空间，而 XAML 使用媒体命名空间。

使用`System.Windows.Media.Brush`类型而不是`Color`（同样命名空间很重要），并`Bindable(true)`为 CLR 属性添加属性。

为了演示，请查看 Background 属性声明`Control`：

```
[Bindable(true), Category("Appearance")]
public Brush Background
{
    get
{
    return (Brush)base.GetValue(Control.BackgroundProperty);
}
set
{
    base.SetValue(Control.BackgroundProperty, value);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:17:12.527

您需要使用 a `Brush`，而不是 a `Color`：

```
testcont.TestColor = Brushes.Red; 
```

DependencyProperty 也应该是画笔，而不是颜色。您可以使用颜色，但必须将颜色转换为画笔。

# android - 当方向从纵向更改为横向时，Action Bar Sherlock 不保持透明度

> ID：10805226
> 
> 赞同：1
> 
> 时间：2012-05-29T19:13:09.870
> 
> 标签：android

我在一个展示 VideoView 的项目中使用 Android Sherlock。当屏幕方向为纵向时，会显示视频和一些文本。当是横向时，仅显示全屏视频。

好吧，我的疑问是：为什么当方向是纵向时会显示 alpha 颜色（Sherlock 操作栏的），但是当方向是横向时会改变它的 alpha 属性（变得不透明）？

我的 onCreate() 如下所示：

```
public void onCreate(Bundle savedInstanceState) {
    // Makes action bar become translucent, and sets layout of this activity.
    requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video);
} 
```

好吧，我正在使用**requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY)**，它允许在操作栏中使用 alpha 颜色。

当方向改变时，我调用 onConfigurationChanged()，它调用 setScreenLayout()。此方法设置视频大小并更改操作栏背景颜色。

```
/**
 * Sets the screen layout, according with the current orientation.
 * 
 * @param isInLandscapeMode
 */
public void setScreenLayout(Boolean isInLandscapeMode) {
    // If orientation is landscape.
    if (isInLandscapeMode) {
        // Hides text of the layout.
        mTextScrollView.setVisibility(View.GONE);
        // Set the size of the video.
        setVideoDimensions((int)Math.floor(mWindowWidth * (1 / WIDESCREEN_RATIO)), mWindowWidth);
        // Sets window to full screen.
        setWindowToFullScreen();
        // Sets action bar background color.
        getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.color.bg_translucent_black));
    }
    // If orientation is portrait.
    else {
        // Shows text of the layout.
        mTextScrollView.setVisibility(View.VISIBLE);
        // Set the size of the video.
        setVideoDimensions(mWindowWidth, (int)Math.floor(mWindowWidth * WIDESCREEN_RATIO));
        // Sets window to normal screen.
        setWindowToNormalScreen();
        // Sets action bar background color.
        getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.color.bg_translucent_black));
    }
} 
```

此颜色在 res/colors.xml 中设置：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="bg_translucent_black">#11EEEEEE</color>
</resources> 
```

在我的 AndroidManifest.xml 中，我使用**android:configChanges="orientation"**属性设置了 VideoActivity，如果方向改变，它允许视频继续播放。

```
<!-- Video Activity -->
<activity 
    android:name=".VideoActivity" 
    android:label="@string/app_name"
    android:screenOrientation="portrait"
    android:configChanges="orientation"
/> 
```

因此，当方向改变时，不会调用 onCreate()。

我认为正在发生的事情是**requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY)**在创建活动时仅允许在第一个方向使用 alpha（在本例中为纵向）。这样，横向不会变成 alpha 颜色。但我不确定。

我确定我需要两个方向的操作栏的 alpha 颜色。

任何人都知道我的视频是否可以在两个方向上都有 alpha 颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:30:45.050

我相信 ActionBarSherlock 需要 Android 来处理配置更改，而不是您的应用程序。在一个应用程序中同时使用 android:configChanges “hack”和 ActionBarSherlock 是不可能的。

# nosql - 使用 :group_level 和 :key 进行 CouchDB 查询

> ID：10805229
> 
> 赞同：4
> 
> 时间：2012-05-29T19:13:13.317
> 
> 标签：nosql, couchdb

我正在为我的 Web 应用程序使用 CouchDB 1.1.1——到目前为止一切都很好（保存/检索文档、保存/查询视图等），但我被困在查询特定组级别的特定键的视图上.

在我看来，map 函数以以下格式输出键：[“Thing 1”“Thing 2”]。我有一个 reduce 函数，它工作正常，并为组级别 1（即“事物 1”）和组级别 2（即“事物 2”）输出正确的值。

现在——当我查询 couchdb 时，当我设置 reduce = true（默认）、group_level = 2（或 group = true，在这种情况下是相同的，因为我只有 2 个级别）和 key = 时，我只能抓取一个特定的键“想要的钥匙在这里。” 我还可以使用 keys = ["key1" "key2"] 查询多个键。

但是——我真的希望能够为 group_level=1 获取一个特定的密钥，但我无法让它工作。它似乎什么都不返回，或者如果使用发布请求，它会返回所有内容。永远不要只有我需要的一把钥匙。

这是我一直在使用的 couchdb http view api（查询选项）的链接： [http ://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)

它包含以下句子：“注意：对 reduce 函数的多键请求仅支持 group=true 和 NO group_level（与 group_level=exact 相同）。生成的错误是“Multi-key fetchs for reduce view must include group=true” "

我不确定这是否意味着我无法执行上述操作（获取特定 group_level 的特定密钥）。这似乎是 couchdb 的一个大问题，所以我假设我做错了什么。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:48:05.113

我也打过这个。不过，我不确定这是否是一个错误。

尝试以正常（2 项）格式使用您的`startkey`and 。`endkey`你想要一个结果`["Thing 1", *]`（显然是伪代码，星号代表任何东西）。减少与`group_level=1`将所有这些归结为一行。

因此，可以这么说，基本上查询 Thing 1“命名空间”中的所有内容。由于要整理的“最小”值是`null`，而“最大”值是 object `{}`，因此它们为您的范围提供了很好的书挡。

```
?group_level=1&startkey=["Thing 1",null]&endkey=["Thing 1",{}] 
```

这会给您所需的结果吗？

# javascript - 使用页面加载/卸载值保存和重新加载 DIV 结构

> ID：10805230
> 
> 赞同：1
> 
> 时间：2012-05-29T19:13:15.683
> 
> 标签：javascript, dynamic, local-storage, store

我`<div id="populated">`在页面上有一个元素，它接收动态创建的内容，包括填充的 DIV、文本区域、输入文本和复选框。此外，还有一些带有`addEventListener`.

我的问题是：如何保存这个“填充”的 DIV 并在用户返回页面时重新加载它？

我尝试过的方法是`localStorage`：

*   将整个 DIV 保存为序列化对象（从[此处](https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage)获取提示）。问题：“未捕获的 TypeError：在无法选择的输入元素上访问 selectionDirection。”

*   将整个 DIV 保存为`innerHTML`. 问题：1) 绑定事件丢失 2) 已在 textareas/inputs 中输入的数据丢失。

我可以重新绑定事件，但解析 DIV 结构和存储/恢复`.value`每个元素似乎太复杂了。

我正在使用“纯”JavaScript（无框架）并且没有 AJAX。任何想法，关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:36:47.027

基本上有三种方法可以在 Web 上持久化数据：

1.  服务器端
2.  本地存储
3.  饼干

现在 cookie 对它们可以存储的数量有一个有限的限制（并且 IIRC 的限制因浏览器而异），所以如果你的 DIV 中有相当数量的东西，cookie 就不会削减它。本地存储适用于较新的浏览器......如果它确实有效（你应该将存储错误作为一个单独的 SO 帖子发布）。

至于要存储什么，您基本上可以放弃存储绑定事件...除非您想将每个事件都转换为内联属性（例如“onclick ='...”）并保存所有HTML .. . 但这将是一个糟糕的主意，因为内联事件很快就会变成一场噩梦。（如果你只有一两个，这*可能*是一个选择......但我不建议这样做。）

通常所做的是将数据序列化为仅包含数据的结构（无 DOM、无事件等）。您存储它（无论您如何选择），然后当您想要“加载”它时反序列化它，构建您需要的任何 DOM 元素并在此时连接您想要的任何事件。JSON.stringify（出现在较新的浏览器中，或者如果您想支持较旧的浏览器，可以通过 Crockford 的 JSON 库获得）是执行此序列化的一种选择，jQuery 的 serialize 和 serializeArray 方法也是如此。或者您可以推出自己的解决方案。

简而言之：

1.  仅序列化您要保存的数据（通过 JSON.stringify、$.serialize 或 $.serializeArray 或您自己的函数）
2.  从服务器端（常用方法）、cookies（有限空间）或本地存储（仅在较新的浏览器上，您必须解决错误）中进行选择来存储它
3.  当您将其从存储中取出时，对其进行反序列化，构建 DOM 元素并根据需要将事件绑定到这些元素。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:23:43.403

它进行了一些重新设计，但我设法解决了这个问题：

1.  DIV 的结构存储为`innerHTML`on `onpageonload`in `localStorage`。
2.  DIV 中的字段值被序列化并存储在`localStorage`.
3.  绑定函数是独立的，可以调用，所以它解析整个DIV。

在`onbeforeunload`脚本上通过 DIV 保存“内部 HTML”和值。加载时，脚本会检查 localStorage 是否为空：如果不是，则填充 DIV，加载值并重新绑定事件。

# python - Django：上传文件编码问题

> ID：10805240
> 
> 赞同：4
> 
> 时间：2012-05-29T19:14:03.653
> 
> 标签：python, django, encoding, upload

在开发平台上上传工作正常，但是当我在服务器上部署和测试时上传失败并出现以下错误

```
UnicodeEncodeError at /upload
'ascii' codec can't encode characters in position 25-30: ordinal not in range(128) 
```

我用

`django-ajax-uploader`,

`Django version: 1.3.1`,

`Python version: 2.6`

我相信它发生在带有`Roman`, `Russian`,`Chinese`文件名的文件上。

还发现了类似的讨论

[为什么我在 Python 2.4 中收到 Unicode 数据的 ASCII 编码错误，但在 2.7 中却没有？](https://stackoverflow.com/questions/7182384/why-do-i-get-a-ascii-encoding-error-with-unicode-data-in-python-2-4-but-not-in-2)

但关于 Python 版本的差异。

我试图将环境`$LANG`变量设置为`en_US.utf8`等，但它没有用。

任何人都可以给我一个建议或指出正确的方法吗？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:31:57.527

请参阅如果您在 django 文档中[收到 UnicodeEncodeError 。](https://docs.djangoproject.com/en/2.0/howto/deployment/wsgi/modwsgi/)

就个人而言，我更喜欢将上传的文件重命名为 ASCII 字符集以避免其他问题。这是[一篇文章](http://source.mihelac.org/2011/02/6/rename-uploaded-files-ascii-character-set-django/)的链接，其中包含描述子类化 FileSystemStorage 的代码。

# php - PHP 中的 MSSQL_query 返回与 SQL Native Sproc 不同的结果

> ID：10805241
> 
> 赞同：0
> 
> 时间：2012-05-29T19:14:06.490
> 
> 标签：php, sql, iis

以前有人遇到过这个吗？

我在 SQL 中有一个带有以下参数的存储过程：

```
 exec PaySummary 'DemoTest', 'DemoTest-Mohn-00038', '5/14/12', '5/27/12', 'manager', 'DemoTest-Boyd-00005' 
```

并且 PHP 中的以下 MSSQL 查询运行完全相同的查询。

```
private function dataTest(){
    $strSQL = 'exec PaySummary \'DemoTest\', \'DemoTest-Mohn-00038\', \'5/14/12\', \'5/27/12\', \'manager\', \'DemoTest-Boyd-00005\'';
    $a = mssql_query($strSQL);

    echo $strSQL;

    while($row=mssql_fetch_array($a)){
        var_dump($row);     

    }

} 
```

在 SQL 中运行此查询时，我将得到 3 个结果...

当通过 SQL 在 PHP 中运行时，我得到 2 个结果...

是否必须在 SQL 存储过程上设置任何运行时设置（设置 NoCOUNT）以确保结果输出的准确性？或者传递日期参数是否存在会影响日期驱动存储过程的结果的已知问题？

Microsoft-IIS/5.0 / PHP/5.2.5 / SQL Server 2008 R2（执行存储过程的地方）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:44:46.947

对于处于同样情况的任何人......这是由 SQL 中的 NULL_CONCAT_NULL （或其他）选项引起的。这个标志可以使存储过程的运行方式略有不同，具体取决于您使用 concat 等的方式。解决此问题的一个好方法是通过围绕您的许多项目的 ISNULL，这似乎摆脱了获得不同结果的问题.

如果您不想修复存储过程，另一个选择是检查 sql 正在通过的路径（TCP/IP 等）。在观看审计时，我注意到某些设置因 sql 运行的端口而异。

# javascript - 在 Rails 3 中将 .js.erb 用于 Ajax（jquery .js 与 .js.erb）

> ID：10805245
> 
> 赞同：9
> 
> 时间：2012-05-29T19:14:34.023
> 
> 标签：javascript, jquery, ajax, ruby-on-rails-3

我有两种方法可以在 Rails 3 应用程序中实现 ajax。

1- 在文件 viewaction.js 或 viewaction.js.coffee 中使用 jquery 绑定提交事件，并管理返回的 json 以修改 DOM 中的内容。

2- 在 Rails 中使用 remote=>true 标记并编写一个名为 viewaction.js.erb 的文件以在 DOM 中进行修改并使用控制器中加载的类变量。

*   Rails 3 中推荐的方法是什么？
*   Rails 的方法是什么？
*   最佳做法是什么？
*   当其中一种选择比另一种更好时的具体情况？
*   对大项目有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T19:45:16.593

在 Rails 3 之前，添加`:remote => true`会在表单标签内生成一堆内联 JavaScript，但在 Rails 3 UJS 中，唯一的变化是添加了 HTML 5 自定义属性`data-remote=true`。例如：

```
<%= form_for(@post, :remote => true) do |f| %> 
```

会产生

```
<form accept-charset="UTF-8" action="/posts" class="new_post" data-remote="true" id="new_post" method="post"> 
```

**目前，这是 rails3 方法**。生成它的 js 函数位于 rails.js 文件下。如果您打开**rails.js**文件，您会注意到几个远程处理程序定义。第一个处理远程表单提交的情况，第二个处理远程链接和输入字段，第三个处理应该表现得像表单的非远程链接。

通过[深入研究代码](https://github.com/rails/jquery-ujs/blob/master/src/rails.js)，我发现这个文件实际上执行了一个 jQuery ajax 调用：

```
ajax: function(options) {
      return $.ajax(options);
    }, 
```

所以使用和常规的 jQuery ajax 调用**没有区别，** **rails 就像一个包装器来调用相同的方法。**`:remote => true`

 **更多信息[在这里](http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/)，[这里](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/)和[这里](http://railscasts.com/episodes/205-unobtrusive-javascript)。**

# zend-framework - 保存一个学说2实体到缓存以加速页面加载

> ID：10805248
> 
> 赞同：9
> 
> 时间：2012-05-29T19:14:50.027
> 
> 标签：zend-framework, caching, doctrine-orm, memcached

假设我有一个名为的实体`Product`，并且每次用户点击产品信息页面时都会加载该实体。通常我会将对象保存在 Zend_Cache (memcache) 中一个小时，以避免每个请求都命中数据库，但据我所知，由于 Proxy 对象，Doctrine2 实体无法做到这一点。

所以我的问题是，如何避免从数据库中为每个请求加载相同的实体？

**[编辑]**

我尝试像这样使用 Doctrine Cache

> ```
>  $categoryService = App_Service_Container::getService('\App\Service\Category');
>     $cache = $categoryService->getEm()->getConfiguration()->getResultCacheImpl();
>     $apple = $cache->fetch('apple'); 
> ```

但我收到以下错误

> 警告：require(App/Entity/Proxy/ **_ *CG* _** /App/Entity/Category.php) [function.require]：无法打开流：/opt/vhosts/app/price/library/ 中没有这样的文件或目录Doctrine/Common/ClassLoader.php 第 163 行

Zend Cache 也是如此，并且由于 Proxy 类，您无法序列化实体

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:29:19.913

你有几个选择：

1.  使用 Doctrine 的[内置结果缓存](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/caching.html#integrating-with-the-orm)
2.  尝试通过 Zend_Cache 将实体粘贴到内存缓存中。当您将其拉出时，您可能需要将 Product 重新合并（）到 EM 中，以便可以取消引用代理。如果您获取并加入任何需要显示产品信息的关联，并且您只是在进行读取，那么这应该可以正常工作。
3.  根本不缓存实体。缓存您生成的任何输出。

**编辑**：如果您不关心水合开销，您使用的是 mysql，并且您的 Products 和关联的表不会经常更改，您可能更喜欢只依赖 mySQL 查询缓存。这是一个相当生硬的对象，但足以提及。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:43:59.617

您可能想尝试为您的实体类实现`__sleep`或`__wakeup`方法，因为 Doctrine 2 对实体的序列化/反序列化有特殊要求和限制（这是将它们存储在 Zend_Cache 中时发生的情况）。

*   有这个[指导](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/implementing-wakeup-or-clone.html)。
*   有关[限制的一般信息，包括序列化](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/architecture.html#entities)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:38:44.980

在我看来更像是一个配置错误。代理尚未生成，或者代理目录和命名空间有问题。

根据您的配置，代理可以自动或手动生成。您的代理确实是在 下生成的`App/Entity/Proxy`吗？这确实是正确的目录吗？

FYI 代理可以通过执行手动生成`doctrine orm:generate-proxies <dest-dir>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T07:04:23.887

支持 timdev 所说的：Doctrine 有内置的缓存，你想使用它。

我还想知道您是否遇到任何性能问题，或者您是否是过度渴望优化的受害者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:38:11.013

我觉得这非常奇怪，因为我自己只是搞砸了，并且代理对象存储在数据库中没有任何问题。所以我猜你的配置不是 100% 设置的？

如果你发现你的配置有问题，那么要非常清楚 timdev 所说的你*必须*将对象合并回 EntityManager，否则你会遇到奇怪的错误。

第四种可用的解决方案是将数据作为数组而不是对象来检索，但是当然你会失去连接到模块的所有功能，这可能不是你想要的。

# c++ - 编译代码时无法访问的对象

> ID：10805249
> 
> 赞同：0
> 
> 时间：2012-05-29T19:14:59.900
> 
> 标签：c++, compiler-construction, compilation, compiler-errors

我想编译[Rigi](http://www.rigi.cs.uvic.ca)源代码，但编译时出现一些错误：

```
adt/object.h: At global scope:
adt/object.h:35:18: error: ‘class RigiObject RigiObject::RigiObject’ is inaccessible
adt/chararray.h:51:13: error: within this context
make: *** [cl_arcflags.o] Error 1 
```

这是我们的两个文件。 **对象.h**：

```
#ifndef OBJECTH
#define OBJECTH 1

#include <stdio.h>
#ifndef STREAM_H
#include <iostream>
#endif
#ifndef __STRING_H
#include <string.h>
#endif
#ifndef __STDLIB_H
#include <stdlib.h>
#endif
#ifndef _CCHEADER_H_
#include "CCheader.h"
#endif

extern char* indent_line(int);

class RigiObject;
typedef RigiObject* ObjectPtr;

#define Oberr(a) fprintf(stderr,"ERROR :: Generic Object Routine Called :: %s\n","a");

class RigiObject {
    public:
    RigiObject() {/*Oberr(RigiObject)*/;}
    ~RigiObject() {/*Oberr(~RigiObject)*/;}  

    // Routines that are really described by the Derived Classes
    virtual int Printout(int)  const
      {Oberr(printout); return (int) 0;}
    virtual unsigned int Hash() const  
      {Oberr(hash); return (unsigned int) 0; }
    virtual RigiBool isEqual(void* a) const
      {Oberr(isEqual); a = NIL; 
           (void) abort();
       return (RigiBool) RigiFalse;}  
    virtual void Delete_class(ObjectPtr) 
      {Oberr(delete_type);}
    virtual void* Create_class();
    virtual void* Duplicate_class();

};

#endif 
```

和**chararray.h**：

```
#ifndef CHARARRAYH
#define CHARARRAYH

#ifndef ARRAYOBIDH
#include "array.h"
#endif
#ifndef CHARTYPEH
#include "chartype.h"
#endif

class CharArray;
typedef CharArray* CharArrayPtr;

class CharArray : public Array {
    int slot;
    public:
   // Routines to initialize and destroy the class.
    CharArray(unsigned int size = CLTN_DEFAULT_CAPACITY);
    CharArray(const CharArray&);
    ~CharArray(); 

    // Functions that are Required to Use this Class as an Object

        // .... all routines the same as in Class Array.......

   // Routines that are required by a Collection class and derived classes
   // of Collections. [See Array Class for these routines.]

    virtual unsigned int size() const {return slot;}

        // .... all routines the same as in Class Array.......

   // Routines specific to this class
    void operator=(const CharArray&);
    RigiBool operator==(const CharArray&) const;
    void Create(char*);
    void Create(char*,int);
    void Create(int, char*);
    void Add(char*);
    void Add(CharType&);
    void Addob(RigiObject& ob)  
        {Array::Add(slot++,&ob);}
    void Append(char*);
    char* Concat(char);
    int FindIndex(char*);
    char* Remove() 
        {return ((CharTypePtr)Array::Remove(--slot))->string();}
    ObjectPtr Pop()
        {return (Array::Remove(--slot));}
    ObjectPtr Look(int i)
        {return (Array::At(i));}
    void Empty();
    virtual unsigned int Size() const
        {return slot;}
    char* Peek();
    char* At(int);
};

#endif 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:27:04.377

假设声明中的类型 RigiBool`RigiBool operator==(const CharArray&) const;`未在标题“array.h”“chartype.h”之一中定义，我认为您应该包含包含类型定义的标题，并且只是为了确保“object.h”也。对于头文件使用类类型变量值（不是指针和引用）的情况，建议包含包含类定义的头文件。否则一个简单的前向声明就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:19:54.093

从很少的信息中很难说，但我认为`RigiBool`它是一个派生类`RigiObject`？当你现在引用它时`RigiBool`，`chararray.h`它必须知道`RigiObject`基类，但`RigiObject`也需要知道`RigiBool`. 所以你不能在不知道派生的情况下声明基类`RigiBool`。尝试前向声明是否`RigiBool`有助于`object.h`打破循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:23:05.323

*chararray.h*中不*提供*类型`RigiBool`,`RigiObject`和*_* _ _ *_* _ _ _`ObjPtr`**`RigiBool`*`RigiBool``RigiFalse`***

 ***```
// somewhere at the top of chararray.h
#include "object.h" 
```

*注意*：如果你定义了虚成员函数`RigiObject`，你也应该声明析构函数`virtual`。

*注意*：您已经*在*d 标头中包含保护，`#include`无需将它们放在`#include`指令周围 - 否则表明（在您的情况下错误地）您正在进行条件编译

```
//chararray.h
#ifndef CHARARRAYH  
#define CHARARRAYH  

#include "array.h"  
#include "chartype.h"  
...

//object.h
#ifndef OBJECTH   
#define OBJECTH

#include <stdio.h>   
#include <iostream>   
#include <string.h>   
#include <stdlib.h>   
#include "CCheader.h"   
... 
```***

# c - 我的 Win32 应用程序不会退出主循环

> ID：10805253
> 
> 赞同：7
> 
> 时间：2012-05-29T19:15:15.030
> 
> 标签：c, windows, winapi

这是我的主循环：

```
 while(TRUE)
    {

    PeekMessage(&msg,hWnd,0,0,PM_REMOVE);
        if (msg.message==WM_QUIT)
            break;
        TranslateMessage(&msg);
        DispatchMessage(&msg);

    } 
```

这是我的回调程序：

```
 LRESULT CALLBACK WinProc(HWND hWnd,UINT msg1,WPARAM wParam,LPARAM lParam)
 {
    switch(msg1)
    {
        case WM_DESTROY  :
        {
            PostQuitMessage(0);
            return 0;
        }
        break;
    }

    return DefWindowProc(hWnd,msg1,wParam,lParam);
} 
```

我发现当我按下关闭按钮时，PeekMessage 函数将在下一个循环中返回 WM_NCLBUTTONDOWN，并且没有 WM_QUIT！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:25:09.843

进行消息循环的[正确方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644936.aspx)是

```
BOOL bRet;
MSG msg;
while ((bRet = GetMessage(&msg, hWnd, 0, 0)) != 0)
{ 
    if (bRet == -1)
    {
        // handle the error and possibly exit
    }
    else
    {
        TranslateMessage(&msg); 
        DispatchMessage(&msg); 
    }
} 
```

如果你真的需要，你可以使用`PeekMessage`......但你为什么忽略返回值？

另外，请注意，这是**特定**于窗口的。我相信`PostQuitMessage`是为了一个*线程*......我不记得它是我的头顶，但你可能需要通过`NULL`而不是`hWnd`.

如果您有任何其他窗口，也可能会劫持它们的消息循环——我认为这通常不是问题，但它可能是一个问题；记在脑子里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:37:20.300

这是我找到的一些代码。它应该给你一些可以使用的东西。

```
 // Main message loop:
do
{
    while (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
    {
        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    // Run game code here.
    gTradeApp->ExecuteNextAction();
}
while (msg.message != WM_QUIT); 
```

和 WndProc

```
LRESULT CALLBACK WndProc(HWND aHWnd, UINT aMessage, WPARAM aWParam, LPARAM aLParam)
{
    switch (aMessage)
    {
    case WM_COMMAND:
        return HandleCommand(aHWnd, aMessage, aWParam, aLParam);

    case WM_DESTROY:
        PostQuitMessage(0);
        break;

    default:
        return DefWindowProc(aHWnd, aMessage, aWParam, aLParam);
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:26:52.053

我建议坚持这一点，以确保 GetMessage 返回的错误 (-1) 可以得到正确处理：

```
while(GetMessage(&Msg, NULL, 0, 0) > 0) {
    TranslateMessage(&Msg);
    DispatchMessage(&Msg);
} 
```

此外，另一个错误是没有正确处理 WM_CLOSE。试试这个，让你的程序真正听 WM_CLOSE（关闭按钮）：

```
LRESULT CALLBACK WndProc(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam) {
    switch(Message) {
        case WM_CLOSE: {
            DestroyWindow(hwnd); // this
            break;
        }
        case WM_DESTROY: {
            PostQuitMessage(0);
            break;
        }
        default:
            return DefWindowProc(hwnd, Message, wParam, lParam);
    }
    return 0;
 } 
```

# ravendb - RavenDB 没有设置存储的所有属性

> ID：10805255
> 
> 赞同：2
> 
> 时间：2012-05-29T19:15:30.980
> 
> 标签：ravendb

我有一个非常奇怪的场景，我尝试存储域事件（我正在尝试同时学习 CQRS 和 RavenDB）。我尝试存储的文档的基本结构是：

```
public interface IDomainEvent { ... }    
public abstract class BaseDomainEvent : IDomainEvent { ... }
public class DomainEventA : BaseDomainEvent { ... }
public class DomainEventB : BaseDomainEvent { ... } 
```

鉴于我想在 RavenDB 中存储`DomainEventA`和存储`DomainEventB`在同一个集合中，并且我已经设法做到了。但问题是，在集合中我缺少 的属性`DomainEventB`，即使我在提交存储对象的事务之前检查了属性是否已设置，也不是所有属性都已设置。以下要点显示了我想要做的一个工作示例：[https](https://gist.github.com/2830093) ://gist.github.com/2830093 ，并且在此测试中找到了失败的测试代码：[https ://github.com/mastoj/TJ .CQRS/blob/ravenfail/TJ.CQRS.RavenEvent.Tests/RavenEventStoreTests.cs](https://github.com/mastoj/TJ.CQRS/blob/ravenfail/TJ.CQRS.RavenEvent.Tests/RavenEventStoreTests.cs)使用此 RavenDB 代码：[https ://github.com/mastoj/TJ.CQRS/blob/ravenfail/TJ.CQRS.RavenEvent/RavenEventStore .cs](https://github.com/mastoj/TJ.CQRS/blob/ravenfail/TJ.CQRS.RavenEvent/RavenEventStore.cs)。

我真的无法理解这一点。

**编辑 1：**我可以补充一点，在失败的场景中，存储对象的元数据说它是一种类型，但没有存储该类型的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:38:57.303

我计划删除或投票赞成关闭，但我认为在某些时候可能比我更多地遇到这个问题。我在我的案例中找到了解决方案，我添加到 RavenDB 的对象有一个错误的 equals 方法，所以 RavenDB 认为我所有的对象都是同一个。当我添加了一个属性来检查 equals 方法时，一切都开始按预期工作。

# javascript - 如何在 Google Maps api v3 中的 KML/KMZ 图层之间切换

> ID：10805257
> 
> 赞同：1
> 
> 时间：2012-05-29T19:15:49.673
> 
> 标签：javascript, google-maps-api-3, toggle, kml, kmz

我正在开发一个带有谷歌地图应用程序的网页。目前，我有一个功能搜索栏和显示三个 KML/KMZ 图层的地图。我需要能够在每一层之间切换，要么显示其中一个，要么显示其中两个或全部三个。谷歌地球有类似的功能，但我在谷歌地图中需要它。我怎样才能做到这一点？

这是我的地图和搜索栏代码：

```
<script type="text/javascript">
    var geocoder;
    var map; 
    var marker;
  function initialize() {
    geocoder = new google.maps.Geocoder ();
    var latlng = new google.maps.LatLng (40.43, -74.00);
    var myOptions = {
      zoom: 5,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
        }
      map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
      marker = new google.maps.Marker({map:map});

    var ctaLayer = new google.maps.KmlLayer('http://dl.dropbox.com/u/80233620/NY_Radar_data.kmz');
        ctaLayer.setMap(map);
    var ctaLayer = new google.maps.KmlLayer('http://www.nyc.gov/html/dot/downloads/misc/cityracks.kml');
        ctaLayer.setMap(map);
    var ctaLayer = new google.maps.KmlLayer('http://dl.dropbox.com/u/80233620/OKX_Radar_data%20(1).kmz');
        ctaLayer.setMap(map);
        }
    function codeAddress () {
        var address = document.getElementById ("address").value;
        geocoder.geocode ( { 'address': address}, function(results, status)  {
        if (status == google.maps.GeocoderStatus.OK)  {
            map.setCenter(results [0].geometry.location);
            marker.setPosition(results [0].geometry.location);
            map.setZoom(14);
            } 
        else {
            alert("Geocode was not successful for the following reason: " + status);
                }
    }); 
                            }
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T19:49:15.707

它只是`setMap(null)`隐藏一个，`setMap(map)`显示。我保留了一个全局数组变量`layers`，以跟踪要切换的层：

```
var layers = [];
layers[0] = new google.maps.KmlLayer('http://dl.dropbox.com/u/80233620/NY_Radar_data.kmz',
 {preserveViewport: true});
      layers[1] = new google.maps.KmlLayer('http://www.nyc.gov/html/dot/downloads/misc/cityracks.kml', 
{preserveViewport: true});
      layers[2] = new google.maps.KmlLayer('http://dl.dropbox.com/u/80233620/OKX_Radar_data%20(1).kmz', 
{preserveViewport: true}); 
```

当图层切换时，preserveViewport 选项会阻止地图四处跳动。

这是切换的功能：

```
function toggleLayer(i) {
  if(layers[i].getMap() === null) {
    layers[i].setMap(map);
  }
  else {
    layers[i].setMap(null);
  }
} 
```

请注意，它使用的是全局变量。最后是 HTML，您可以使用复选框或按钮，甚至是单选按钮，方法是一开始只设置一个活动层，并在单选集更新时启用正确的层。

```
Large weather <input type="checkbox" id="layer0" onclick="toggleLayer(0)" checked>
<input type="button" id="layer1" onclick="toggleLayer(1)" value="Racks">
Small weather <input type="checkbox" id="layer2" onclick="toggleLayer(2)" checked> 
```

整个演示在这里，地图左上角的控件：http: [//jsbin.com/irahef/edit#preview](http://jsbin.com/irahef/edit#preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:43:32.790

Heiter 的回答很好，但是对 jsbin 示例中的代码做了一点补充，如果你想让图层在初始化时不显示，那就改变

```
layers[i].setMap(map); 
```

至

```
layers[i].setMap(null); 
```

然后确保您的复选框未选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T18:27:52.177

我尝试了 Heitor 上面发布的代码，并注意到单击图层打开和关闭会更改它们在地图上的显示顺序。我实现了这个解决方案来保持层的顺序，但它可能效率不高。如果有人有任何建议，请分享。

```
function toggleLayer(i) {
	var j;
	for (j = 0; j < layers.length ; j++ )
	{
		if (j != i)
		{
			if (layers[j].getMap() === null)
			{
				layers[j].setMap(null);
			} else {
				layers[j].setMap(map);
			}
		} else {	//toggle the selected layer
			if (layers[j].getMap() === null)
			{
				layers[j].setMap(map);
			} else {
				layers[j].setMap(null);
			}

		}
	}

}
```

# c# - NServiceBus - 启动端点时出现异常。原因：无法加载 Raven.Backup.exe

> ID：10805261
> 
> 赞同：0
> 
> 时间：2012-05-29T19:16:16.640
> 
> 标签：c#, .net, nservicebus

我正在尝试运行[NServicebus 安装附带的示例项目之一](http://nservicebus.com/Downloads.aspx)

我通过运行 RunMeFirst.bat 安装了 Nservice。一切看起来都很好。

然后我打开了一个示例项目（PubSub）。它编译并运行但抛出异常：

> 启动端点时出现异常，已记录错误。原因：无法加载 C:\Users\\Downloads\NServiceBus.3.2.0\NServiceBus.3.2.0\samples\PubSub\MyPublisher\bin\Debug\Raven.Backup.exe。考虑使用 'Configure.With(AllAssemblies.Except("Raven.Backup.exe"))' 告诉 NServiceBus 不要加载此文件。

Raven.Backup.exe 存在于该文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:22:53.870

我刚刚 d/l v3.2.0 并且运行 PubSub 没有问题。在解压缩之前，您是否解压缩了 zip 文件？有关如何开始的说明，请参阅[http://docs.particular.net/platform/ 。](http://docs.particular.net/platform/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:38:17.113

从 bin 中删除 Reven.Backup.exe 或`'Configure.With(AllAssemblies.Except("Raven.Backup.exe"))'`解决问题。很高兴知道为什么该文件在那里。

# javascript - 使用 twitter API 的应用程序如何与 twitter 通信

> ID：10805264
> 
> 赞同：-1
> 
> 时间：2012-05-29T19:16:38.967
> 
> 标签：javascript, oauth, twitter

我想实现与 twitter 类似的 API，以及了解它是如何实现的。我没有阅读太多关于 oAuth 的内容，也没有开发 twitter 应用程序。

当用户点击按钮时，它会执行 javascript，弹出带有 twitter 页面的新窗口，用户点击连接或验证应用程序。处理如何传递回应用程序以及应用程序如何知道在 twitter 端执行已完成并且用户授权应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:50:09.980

您需要提供应用程序的回调函数/url，其中 twitter 在 twitter 端执行完成后返回访问令牌。

# internet-explorer - IE 不适用于绝对位置。我在这里阅读了很多答案，但没有一个对我有用

> ID：10805266
> 
> 赞同：0
> 
> 时间：2012-05-29T19:16:45.457
> 
> 标签：internet-explorer, position, absolute

在[Sydney Jane Baily](http://www.sydneyjanebaily.com)，导航菜单位于紫色书签上方，在 Firefox 中看起来还不错。但是在 IE 中（只检查了 8 和 9），导航只是在左上角，好像根本没有定位，看起来像一个项目符号列表。丑陋的！有人能帮我吗？我不确定它是否需要我提到的 Doctype，但有人可以给我确切的代码以及将它放在我的 php 文件中的位置。我也尝试过 clear: both，但这没有做任何事情，然后 clear:left。我只是不断地寻找答案，但他们都没有移动那个导航菜单。

提前致谢， 悉尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:22:33.990

你有一个标签

```
</nav/> 
```

在 IE 的开发控制台中，这可能是个问题。

# jquery - jquery-ui 对话框不会在 Facebook 上的 Internet Explorer 中关闭

> ID：10805267
> 
> 赞同：0
> 
> 时间：2012-05-29T19:16:45.770
> 
> 标签：jquery, facebook, internet-explorer, dialog, jquery-ui-dialog

我有一个 div，我正在制作一个对话框，然后在准备好文档时打开它。
对话框显示，但没有响应单击 x 关闭或单击确定按钮。

我正在使用 jquery-ui，以及由 themeroller 创建的自定义主题：http: [//jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

如果我不将其作为 Facebook 应用程序运行，该代码可以在 IE 中运行，如果我使用不同的浏览器（Safari、Chrome、Firefox），它也可以作为 Facebook 应用程序运行。

IE java 控制台在 jquery-ui 代码中显示错误：
SCRIPT 16389: Unspecified error。
jquery-ui-1.8.20.custom.min.js，第 73 行字符 5487

这是代码：

```
 <head>
      <link type="text/css" href="/jquery/css/start/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
      <script type="text/javascript" src="/jquery/js/jquery-1.7.2.min.js"></script>
      <script type="text/javascript" src="/jquery/js/jquery-ui-1.8.20.custom.min.js"></script>

      <script type="text/javascript">
      function showPopup() {
        $( '#dialog' ).dialog('open');
      }

      $( function () {
        $('#dialog').dialog({ autoOpen: false, show: "blind", hide: "blind", buttons: { "OK": function() { $(this).dialog("close"); } } });
      }) ;
      </script>

      </head>
      <body>
      <script type="text/javascript">
      $(function(){showPopup();});
      </script> 

      <div id='dialog' style="display: none;" title='title of the dialog'>
      Dialog message
      </div>

      </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:49:50.960

jquery-ui-1.8.20.custom.min.js 在 IE9 IFRAME 中有一个问题，它没有`.focus`正确设置，很可能试图将焦点设置到页面的 body 元素而不是 body 标记IFRAME 本身。我通过为 IFRAME 正文标签设置一个 id 来解决这个问题。

```
body id="bodyTag" 
```

然后在您的`document.ready`函数中，将焦点设置为 IFRAME 正文标记：

```
$("#bodyTag").focus(); 
```

# c++ - 从队列中删除第一个元素？

> ID：10805268
> 
> 赞同：2
> 
> 时间：2012-05-29T19:16:47.110
> 
> 标签：c++, data-structures, queue

我有一个队列。如果它超过 X 大小，当我推送一个元素时，我想删除队列的第一个元素。（将弹出的最后一个元素和推入的第一个元素）

```
void ClientPlayerManager::queueTableMessage( const std::string& playerName, const std::string& message )
{
    m_tableQ.push(std::make_pair(playerName,message));

    if(m_tableQ.size() > m_maxTableMessages)
    {
        //m_tableQ.pop_back(); does not exist
    }
} 
```

有没有办法用标准队列做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:19:14.670

您可以使用 a`std::deque`代替 a `std::queue`，它支持`push_front`、`push_back`、`pop_front`和`pop_back`。这也允许在整个过程中进行随机访问，但您可以忽略它并将其视为`deque`双端队列。（其实`deque`就是双端队列的缩写）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:22:27.590

如果你想从另一端删除一个元素`pop`，只需跳过一开始就推送它：

```
if(m_tableQ.size() < m_maxTableMessages) {
    m_tableQ.push(std::make_pair(playerName,message));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:32:14.203

[这](http://www.cplusplus.com/reference/stl/queue/)是另一种方法。使用基于 STL 的队列实现。

# jquery - 数据表 fnDraw 发出多个 ajax 请求

> ID：10805269
> 
> 赞同：2
> 
> 时间：2012-05-29T19:16:47.497
> 
> 标签：jquery, datatables

当我手动重绘（通过单击按钮）时，我的 jquery 数据表似乎发布了两次 - 如何防止数据表这样做？

这是我的客户端代码：

```
$(document).ready(function () {
    dataTable = $('#Results').dataTable({
        "bLengthChange": true,
        "bFilter": false,
        "bSort": true,
        "bInfo": true,
        "bAutoWidth": false,
        "sPaginationType": "bootstrap",
        "sDom": "ftrpli",
        "bServerSide": true,
        // "sAjaxSource": "AjaxControllerAction",
        "fnServerParams": function (aoData) {
            aoData.push({ "name": "UserId", "value": $('#UserId').val() });
            aoData.push({ "name": "Data", "value": $('#Data').val() });
            aoData.push({ "name": "Location", "value": $('#Location').val() });
        },
        "fnServerData": function (sSource, aoData, fnCallback) {
            showProgress();

            var headers = {};
            headers['__RequestVerificationToken'] = token;
            alert('zzzz');

            $.ajax({
                dataType: 'json',
                type: 'POST',
                //url: sSource,
                url: 'AjaxControllerAction',
                data: aoData,
                headers: headers,
                success: function (json) {
                    hideProgress();

                    fnCallback(json);
                },
                error: function (json) {
                    hideProgress();
                }
            });
        },
        "fnDrawCallback": function () { hideProgress(); },
        "bProcessing": false,
        "aoColumns": [
                { "sName": "NAME",
                    "fnRender": function (oObj) {
                        return '<a href="Details/' +
                        oObj.aData[0] + '">' + oObj.aData[0] + '</a>';
                    }
                },
                { "sName": "DATA" },
                { "sName": "DATA1" },
                { "sName": "DATA2" },
                ]
    });
}
);

$("#SearchForm").on("submit", function (event) {
    event.preventDefault();
    // this sends the request twice ??
    dataTable.fnDraw();
}); 
```

我知道它击中了我的 AjaxControllerAction 两次，从使用两个萤火虫（我看到 xmlhttprequest 两次）和它通过设置断点击中我的动作两次。我找不到它会这样做的任何理由。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T14:39:30.197

我的解决方案

我使用了数据表中的参数： [iDisplayStart](https://www.datatables.net/usage/server-side) -> 在当前数据集中显示起点。

> 第 1 步：创建一个全局变量来持久化数据。
> 
> ```
> var options = {
>     jsonResultDataTableFromServer: {},
>     iDisplayStart: -1,
>     iDisplayLength : -1
> }; 
> ```
> 
> 第 2 步：将 ajax fnServerData 函数更改为：
> 
> ```
> "fnServerData": function(url, data, callback) {
>                //data[3] i.e iDisplayStart
>                //data[4] i.e iDisplayLength
>                if (options.iDisplayStart != data[3].value || options.iDisplayLength != data[4].value) {
>                     options.iDisplayStart = data[3].value;
>                     options.iDisplayLength = data[4].value;
> 
>                     $.ajax({
>                         "url": url,
>                         "data": data,
>                         //"success": callback,
>                         "success": function(json) {
>                             options.jsonResultDataTableFromServer = json;
>                             callback(json);
>                         },
>                         "contentType": "application/x-www-form-urlencoded; charset=utf-8",
>                         "dataType": "json",
>                         "type": "POST",
>                         "error": function() {
>                             alert("DataTables warning: JSON data from server failed to load or be parsed. " +
>                                 "This is most likely to be caused by a JSON formatting error.");
>                         }
>                     });
>                 } else {
>                     options.jsonResultDataTableFromServer.sEcho = eval(options.jsonResultDataTableFromServer.sEcho) + 1;
>                     callback(options.jsonResultDataTableFromServer);
>                 }
> 
>                 return false;
>             }, 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T05:40:22.727

这很奇怪。`dataTable.fnDraw();`应该发送一个 AJAX 调用。也许您应该查看插件脚本，看看那里发生了什么。但首先尝试新版本:)

我正在尝试在重绘时禁用该 AJAX 调用。如果我找到解决方案，我会在这里发布

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T23:01:37.537

我在使用 jQuery dataTable 1.9（旧版）时遇到了类似的问题。我正在调用 table.dataTable 来准备 AJAX POST 连接，然后我正在调用 fnDraw。结果发现根本不需要对 fnDraw 的第二次调用，这消除了第二个 Ajax 请求（table.dataTable 和 fnDraw 都放在了显示表格的 jsp 中的 $(document).ready 函数中）。table.dataTable 单独处理所有功能（使用新标准调用控制器）。初始控制器调用显示了默认视图。当用户单击列的排序图标时，再次调用控制器以传递新的排序标准并生成正确的 SQL 查询。当用户点击分页图标时，控制器被调用并为分页生成正确的 SQL 查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:34:06.280

这可能是因为您使用了类似的名称“dataTable”作为您初始化数据表的变量

```
dataTable = $('#Results').dataTable({ 
```

这可能是您手动重绘时数据表绘制两次的原因。尝试更改变量名称并查看。

# scala - 错误：值填充不是对象数组的成员

> ID：10805273
> 
> 赞同：0
> 
> 时间：2012-05-29T19:17:12.010
> 
> 标签：scala, functional-programming, openjdk

```
scala> Array.fill(3){ math.random }
<console>:6: error: value fill is not a member of object Array
       Array.fill(3){ math.random } 
```

我在这里错过了什么吗？我无法获得我书中的任何示例，甚至无法从 scala 源代码中编写示例。

```
Welcome to Scala version 2.7.7final (OpenJDK Server VM, Java 1.6.0_20) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:24:58.747

因为在 Scala 2.7.7`Array`中没有`fill`方法……这已经很老了。您可能应该升级到更新的版本。这是完全相同代码的输出...注意版本：

```
Welcome to Scala version 2.9.0.1 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_21).
Type in expressions to have them evaluated.
Type :help for more information.

scala> Array.fill(3){ math.random }
res0: Array[Double] = Array(0.1074472419841086, 0.06627471316010758, 0.08994384621689899) 
```

# c# - 使用 Linq 加入列表返回的结果与相应的 SQL 查询不同？

> ID：10805278
> 
> 赞同：1
> 
> 时间：2012-05-29T19:17:20.240
> 
> 标签：c#

我有 2 张桌子

表A：

```
TableAID int,
Col1 varchar(8) 
```

表B：

```
TableBID int
Col1 char(8),
Col2 varchar(40) 
```

当我在 2 个表上运行 SQL 查询时，它返回以下行数

```
SELECT * FROM tableA (7200 rows)
select * FROM tableB (28030 rows) 
```

在 col1 上加入并选择数据时，它返回以下行数

```
select DISTINCT a.Col1,b.Col2 FROM tableA a
join tableB b on a.Col1=b.Col1 (6578 rows) 
```

以上 2 个表在不同的数据库上，所以我创建了 2 个 EF 模型并分别重试数据，并尝试使用具有以下功能的 linq 将它们加入代码中。令人惊讶的是，它返回 2886 条记录而不是 6578 条记录。难道我做错了什么？各个列表似乎返回了正确的数据，但是当我加入它们时，SQL 查询和 linq 查询的记录数不同。

非常感谢您对此的任何帮助。

```
// This function is returning 2886 records      
public List<tableC_POCO_Object> Get_TableC() 
{
    IEnumerable<tableC_POCO_Object> result = null;
    List<TableA> tableA_POCO_Object = Get_TableA(); // Returns 7200 records
    List<TableB> tableB_POCO_Object = Get_TableB(); // Returns 28030 records
    result = from tbla in tableA_POCO_Object
         join tblb in tableB_POCO_Object on tbla.Col1 equals tblb.Col1
         select new tableC_POCO_Object 
         {
         Col1 = tblb.Col1,
         Col2 = tbla.Col2
         };
    return result.Distinct().ToList();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:29:44.153

问题在于，在您的 POCO 世界中，您正在尝试使用直接比较来比较两个字符串（这意味着它区分大小写）。这可能适用于 SQL 世界（当然，除非您启用了区分大小写），但是当您拥有`"stringA" == "StringA"`. 您应该做的是将连接列规范化为全部大写或小写：

```
join tblb in tableB_POCO_Object on tbla.Col1.ToUpper() equals tblb.Col1.ToUpper() 
```

连接运算符使用指定的键（从第二个集合开始）创建一个查找，并通过检查生成的查找将原始表/集合连接回来，因此如果哈希值不同，它们将不会连接。

要点是，除非您标准化为相同的 cAsE，否则在字符串数据/属性上加入 OBJECT 集合是不好的。对于某些 DB 提供程序的 LINQ，如果数据库不区分大小写，那么这无关紧要，但在 CLR/L2O 世界中始终很重要。

编辑：啊，没有意识到它是`CHAR(8)`代替`VARCHAR(8)`，这意味着无论如何它都会填充到 8 个字符。在这种情况下，`tblb.Col1.Trim()`将解决您的问题。但是，在处理 LINQ to Objects 查询时仍要记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:23:02.060

正如 SPFiredrake 正确指出的那样，这可能是由区分大小写引起的，但我还必须问你为什么以这种方式编写代码，为什么不这样：

```
// This function is returning 2886 records      
public List<tableC_POCO_Object> Get_TableC() 
{
    return from tbla in Get_TableA()
           join tblb in Get_TableB() on tbla.Col1 equals tblb.Col1
           select new tableC_POCO_Object 
           {
             Col1 = tblb.Col1,
             Col2 = tbla.Col2
           }.Distinct().ToList();
} 
```

其中 Get_TableA() 和 Get_TableB() 返回 IEnumerable 而不是 List。您必须注意这一点，因为当您转换为列表时，查询将立即执行。您想向数据库服务器发送单个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:35:31.147

这可能是因为您比较 a`VARCHAR`和 a`CHAR`列。在 SQL 中，这取决于`ANSI_PADDING`sql server 上的设置，而在 C# 中，使用 DataReader 读取字符串值并使用标准字符串函数进行比较。

试试`tblb.Col1.Trim()`你的 LINQ 语句。

# ios - 当我的服务器查看我的 iPhone 的一些数据时，套接字是唯一的选择吗？

> ID：10805279
> 
> 赞同：0
> 
> 时间：2012-05-29T19:17:29.137
> 
> 标签：ios, sockets

服务器还有其他方法可以将数据发送到它的客户端吗？当然，客户端可以每 3 秒轮询一次服务器以检查更新，但这是不可扩展的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:45:59.593

如果您的应用程序在前台，则选项是： - 服务器向设备发送 Apple 推送通知，因为您的应用程序在前台，操作系统将向您的应用程序提供 APN，使用它作为服务器有新的指示客户的数据。- 你轮询 - 你使用类似彗星的技术或变体。（基本上保持连接处于活动状态，当服务器有数据时它会 ping）

如果您的应用程序已移至后台并且您未暂停（您已通过 beginBackgroundTaskWithExpirationHandler: 注册了任务，或者您是有效的后台应用程序），则选项是相同的，除了 APN 将显示给用户并且应用程序不可拦截.

如果您的应用程序已移至后台并被暂停，则您别无选择（除了 APN，但用户会看到它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:27:32.493

您可以使用苹果推送通知、长轮询和 websockets，这些都是替代方案。[在此处](https://stackoverflow.com/questions/4596368/long-polling-vs-apple-push-notification-service-android-c2dm)和[此处](https://stackoverflow.com/questions/4501121/websockets-client-for-objective-c-preferrably-ios-compatible)阅读更多信息。

# objective-c - 我可以为 Core Data 保留相同的队列并在我喜欢的时候继续访问它吗？

> ID：10805280
> 
> 赞同：1
> 
> 时间：2012-05-29T19:17:32.300
> 
> 标签：objective-c, multithreading, grand-central-dispatch

我通常使用这样的代码：

```
dispatch_queue_t queue = dispatch_queue_create("queue_name", NULL);

dispatch_async(queue, ^{
    //Code
}); 
```

我知道从这里访问我的核心数据存储，然后同时从另一个线程访问会导致崩溃。我是否可以继续使用上面的代码，具有相同的队列名称，在整个应用程序中访问核心数据？应用程序会意识到它是同一个队列，还是会忘记队列名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:21:00.417

您传递的名称`dispatch_queue_create()`对系统没有意义，即，如果您传递相同的名称，您将不会得到相同的队列。它们只是调试的标签。

如果要在不同区域使用相同的队列，则需要将其存储在可在这些范围内访问的变量中。

# xpages - 过滤 xPages 中的分类视图面板

> ID：10805285
> 
> 赞同：0
> 
> 时间：2012-05-29T19:17:58.260
> 
> 标签：xpages

我有一个视图面板，其中有一个分类视图作为它的来源。我正在查看的数据可以有各种状态（Status='Submitted'，Status ='Approved'）等。

我的页面上有一个组合框，可让我选择要在视图中显示的状态。这一切都很好，除了 xPages 视图在显示分类视图时执行与客户端相同的烦人事情。也就是说，它不显示分类的列，然后是全文索引搜索过滤器。

除了为每个状态创建一个视图和相应的 xpage 之外，还有什么方法可以按状态过滤并仍然显示分类字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:27:28.843

我认为您不需要 XPage 上的 2 个视图或 2 个视图面板。在按状态分类的视图中，为分类的状态列输入以下公式：

```
Status : "All" 
```

上面的公式将添加“全部”类别，并显示所有文档，无论其状态如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:37:58.197

如果我理解正确：您想使用“单个类别”通过“状态”（例如“草稿”）进行选择，并且仍想显示带有“草稿”的列？....除此之外，您最好只在视图上方的标题处显示它，因为它可以为您节省一整列，您只需在视图中添加另一列（未排序），重复字段“状态”。如果您不想添加视图列，可以创建一个使用状态字段的计算列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:56:38.007

我去了两个视图面板/视图。如果选择“全部”，则显示按客户端分类的视图。否则显示按状态分类的视图，然后显示客户端。然后将类别过滤器用于该视图。

```
<xp:viewPanel rows="30" id="viewPanel1">
    <xp:this.facets>
        <xp:pager partialRefresh="true" layout="Previous Group Next"
            xp:key="headerPager" id="pager1">
        </xp:pager>
    </xp:this.facets>
    <xp:this.data>
        <xp:dominoView var="view1"
            viewName="vwRequestsAllByClientsName">
        </xp:dominoView>
    </xp:this.data>
    <xp:this.rendered><![CDATA[#{javascript:var v = getComponent("comboBoxFilterBy").getValue();
 return (v=="All" || v==null);
}]]></xp:this.rendered>
    <xp:viewColumn columnName="ClientName" id="viewColumn1">
        <xp:viewColumnHeader value="ClientName"
            id="viewColumnHeader1">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="RequestNum" id="viewColumn2">
        <xp:viewColumnHeader value="Request #"
            id="viewColumnHeader2">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="APPSNo" id="viewColumn3">
        <xp:viewColumnHeader value="APPS Number"
            id="viewColumnHeader3">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="LoanType" id="viewColumn4">
        <xp:viewColumnHeader value="Loan Type"
            id="viewColumnHeader4">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="LoanAmount" id="viewColumn5">
        <xp:viewColumnHeader value="Loan Amount"
            id="viewColumnHeader5">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="Term" id="viewColumn6">
        <xp:viewColumnHeader value="Term" id="viewColumnHeader6">
        </xp:viewColumnHeader>
    </xp:viewColumn>

</xp:viewPanel>
<xp:viewPanel rows="30" id="viewPanel2">
    <xp:this.facets>
        <xp:pager partialRefresh="true" layout="Previous Group Next"
            xp:key="headerPager" id="pager2">
        </xp:pager>
    </xp:this.facets>
    <xp:this.data>
        <xp:dominoView var="view2"
            viewName="vwRequestsAllByStatusClientsName">
            <xp:this.categoryFilter><![CDATA[#{javascript:var v = getComponent("comboBoxFilterBy").getValue(); 
```

v}]]>

# iphone - 第一次运行时动画滞后

> ID：10805286
> 
> 赞同：0
> 
> 时间：2012-05-29T19:18:02.197
> 
> 标签：iphone, ios, animation, lag

搜索栏使用以下代码进行动画处理：

```
- (IBAction)toggleSearchBar:(UIBarButtonItem *)sender{

CATransition *applicationLoadViewIn = [CATransition animation];
[applicationLoadViewIn setDuration:0.2];
[applicationLoadViewIn setType:kCATransitionPush];
[applicationLoadViewIn setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

if (self.searchBar.hidden) {

    self.searchBar.hidden = NO;
    [self.searchBar becomeFirstResponder];

    [applicationLoadViewIn setSubtype:kCATransitionFromBottom];
    [[searchBar layer] addAnimation:applicationLoadViewIn forKey:kCATransitionPush];

}else{

    self.searchBar.hidden = YES;
    [self.searchBar resignFirstResponder];

    [applicationLoadViewIn setSubtype:kCATransitionFromTop];
    [[searchBar layer] addAnimation:applicationLoadViewIn forKey:kCATransitionPush];

}
} 
```

它工作正常，除了动画第一次运行时的滞后。有没有办法修复它？任何帮助将不胜感激：）

**编辑 1**

他 leftBarButton 被连接到`toggleSearchBar:`行动。应用程序已加载。第一个动画是 leftBarButton 第一次点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:55:09.010

为什么不在加载视图控制器时将其显示在屏幕外……这有点笨拙，但它应该可以解决问题。

# iphone - 使用 UITextField 和 UISearchDisplayController 代替 UISearchBar

> ID：10805287
> 
> 赞同：1
> 
> 时间：2012-05-29T19:18:16.940
> 
> 标签：iphone, ios, uitextfield, uisearchbar, uisearchdisplaycontroller

如何在 UISearchDisplay 控制器中使用文本字段而不是搜索栏？

我想通过摆脱放大镜图标并自定义背景来完全自定义搜索栏。还阻止它调整大小并调出“取消”按钮。我看到有些人通过编辑不应该编辑的搜索栏 api 部分使用 hacky 方法来做到这一点。因此，在此级别上进行自定义似乎更被接受的方法是使用 UITextfield 而不是 UISearchBar。但是网上似乎没有任何关于这样做的信息！

如果我使用文本字段，当文本更改以使 UISearchDisplayController 工作时，我需要调用哪些方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:34:26.813

这里的技巧是重写 UISearchDisplayController。它实际上只做 3 件事。

1.  将搜索栏向上移动到视图顶部并隐藏 UINavigationBar。
2.  在视图的其余部分放置一个透明的封面视图。
3.  显示带有任何搜索结果的 UITableView。

因此，首先将您的 UIViewController 注册为 UITextField 的委托和..

```
-(void)textFieldDidBeginEditing:(UITextField *)textField {
    //here is where you open the search.
    //animate your textfield to y = 0.
    //I usually make the search tableview and the cover a separate view, 
    //so I add them to my view here.

    [self.navigationController setNavigationBarHidden:YES animated:YES];
}

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSString *searchText = [[NSString alloc] initWithString:[textField.text stringByReplacingCharactersInRange:range withString:string]];
    //display your search results in your table here.
}

-(void)textFieldDidEndEditing:(UITextField *)textField {
    //hide all of your search stuff
    [self.navigationController setNavigationBarHidden:NO animated:YES];
} 
```

# c# - 获取和设置 DataGridView 的排序（列和升序/降序）

> ID：10805294
> 
> 赞同：4
> 
> 时间：2012-05-29T19:18:37.593
> 
> 标签：c#, sorting, datagridview, datagridviewcolumn

我有一个小问题。我需要保存排序（按哪个列和升序或降序）并在程序的下一次启动时加载它。获取当前选定的列是没有问题的，我这样做是通过

```
 private int GetSortColumn()
    {
        DataGridViewColumn sortColumn = this.dataGridView.SortedColumn;
        if (sortColumn != null)
        {
            Properties.Settings.Default.sortingColumnSortMode = dataGridView.SortOrder;
            return sortColumn.Index;
        }
        else
            //error
            return -1;
    } 
```

并将数据保存在我的设置中。设置这个属性也没有问题：

```
 private void SetSortColumn(int indexOfColumn)
    {
        if (indexOfColumn != null && indexOfColumn != -1)
        {
            this.dataGridView.Sort(this.dataGridView.Columns[indexOfColumn], ListSortDirection.Descending);
        }
    } 
```

但我还需要保存并设置升序或降序属性。我该怎么做呢？有没有办法使用 dataGridView.SortedColumn 获取 ListSortDirection？或者如果dataGridView按升序或降序排序，是否有更好的解决方案？

谢谢和问候！瑞人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-18T18:59:15.797

@Ken 这会起作用

我不知道这是否仍然相关，但这看起来是一种更简单的方法:)

```
if(gridView1.Columns[e.ColumnIndex].HeaderCell.SortGlyphDirection == System.Windows.Forms.SortOrder.Descending)
{
     // you can ascending if you want
     gridView1.Sort(gridView1.Columns[e.ColumnIndex], ListSortDirection.Ascending);
}
else
{
      // you can descending if you want
     gridView1.Sort(gridView1.Columns[e.ColumnIndex], ListSortDirection.Descending);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:31:28.027

好的，我可以通过在我的 SetSortColumn 中添加一个开关来解决我的问题：

```
 private void SetSortColumn(int indexOfColumn)
    {
        if (indexOfColumn != null && indexOfColumn != -1)
        {
            ListSortDirection listSort;
            switch (Properties.Settings.Default.sortingColumnSortMode)
            {
                case SortOrder.Ascending:
                    listSort = ListSortDirection.Ascending;
                    break;

                case SortOrder.Descending:
                    listSort = ListSortDirection.Descending;
                    break;

                default:
                    listSort = ListSortDirection.Descending;
                    break;

            }

            this.dataGridView.Sort(this.dataGridView.Columns[indexOfColumn], listSort);
        }
    } 
```

也许它会帮助别人；）

# r - 使用 R 汇总来自 csv 的数据

> ID：10805295
> 
> 赞同：1
> 
> 时间：2012-05-29T19:18:43.603
> 
> 标签：r, dataframe, aggregate, summary

我是 R 新手，我编写了一些代码来根据我的需要汇总 .csv 文件中的数据。

这是代码。

```
raw <- read.csv("trees.csv") 
```

看起来像这样

```
 SNAME     CNAME        FAMILY PLOT INDIVIDUAL CAP   H
1 Alchornea triplinervia (Spreng.) M. Arg. Tainheiro Euphorbiaceae    5        176  15 9.5
2               Andira fraxinifolia Benth.   Angelim      Fabaceae    3        321  12 6.0
3               Andira fraxinifolia Benth.   Angelim      Fabaceae    3        326  14 7.0
4               Andira fraxinifolia Benth.   Angelim      Fabaceae    3        327  18 5.0
5               Andira fraxinifolia Benth.   Angelim      Fabaceae    3        328  12 6.0
6               Andira fraxinifolia Benth.   Angelim      Fabaceae    3        329  21 7.0

#add 2 other rows
for (i in 1:nrow(raw)) {
  raw$VOLUME[i] <- treeVolume(raw$CAP[i],raw$H[i])  
  raw$BASALAREA[i] <- treeBasalArea(raw$CAP[i])
} 
```

#来了。我需要一个新的数据框，其中包含 H 列和 CAP 列的平均值以及 VOLUME 和 BASALAREA 列的总和。此数据框按列 SNAME 分组，并按列 PLOT 分组。

```
plotSummary = merge(
  aggregate(raw$CAP ~ raw$SNAME * raw$PLOT, raw, mean),
  aggregate(raw$H ~ raw$SNAME * raw$PLOT, raw, mean))

plotSummary = merge(
  plotSummary,
  aggregate(raw$VOLUME ~ raw$SNAME * raw$PLOT, raw, sum))

plotSummary = merge(
  plotSummary,
  aggregate(raw$BASALAREA ~ raw$SNAME * raw$PLOT, raw, sum)) 
```

函数 treeVolume 和 treeBasal area 只返回数字。

```
treeVolume <- function(radius, height) {
  return (0.000074230*radius**1.707348*height**1.16873)
}

treeBasalArea <- function(radius) {
  return (((radius**2)*pi)/40000)
} 
```

我确信有更好的方法可以做到这一点，但是如何呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:18:40.607

我无法读取您的示例数据，但我想我已经做了一些通常代表它的东西......所以试一试。此答案基于 Greg 的建议，即查看 plyr 和按 data.frame`ddply`的段分组并`numcolwise`计算您感兴趣的统计数据的函数。

```
#Sample data
set.seed(1)
dat <- data.frame(sname = rep(letters[1:3],2), plot = rep(letters[1:3],2), 
                  CAP = rnorm(6), 
                  H = rlnorm(6), 
                  VOLUME = runif(6),
                  BASALAREA = rlnorm(6)
                  )

#Calculate mean for all numeric columns, grouping by sname and plot
library(plyr)
ddply(dat, c("sname", "plot"), numcolwise(mean))
#-----
  sname plot        CAP        H    VOLUME BASALAREA
1     a    a  0.4844135 1.182481 0.3248043  1.614668
2     b    b  0.2565755 3.313614 0.6279025  1.397490
3     c    c -0.8280485 1.627634 0.1768697  2.538273 
```

# 编辑 - 对更新问题的回应

好的 - 现在您的问题或多或少可以重现，这就是我的处理方法。首先，您可以利用 R 是[矢量化](https://stackoverflow.com/questions/445059/vectorize-my-thinking-vector-operations-in-r)的这一事实，即您可以一次计算来自 VOLUME 和 BASALAREA 的所有值，而无需遍历每一行。对于那一点，我推荐这个`transform`功能：

```
dat <- transform(dat, VOLUME = treeVolume(CAP, H), BASALAREA = treeBasalArea(CAP)) 
```

其次，意识到您打算计算 CAP & H 然后 VOLUME & BASALAREA 的不同统计数据，我建议使用该`summarize`函数，如下所示：

```
ddply(dat, c("sname", "plot"), summarize,
  meanCAP = mean(CAP),
  meanH = mean(H),
  sumVOLUME = sum(VOLUME),
  sumBASAL = sum(BASALAREA)
  ) 
```

这将为您提供如下所示的输出：

```
 sname plot   meanCAP     meanH    sumVOLUME     sumBASAL
1     a    a 0.5868582 0.5032308 9.650184e-06 7.031954e-05
2     b    b 0.2869029 0.4333862 9.219770e-06 1.407055e-05
3     c    c 0.7356215 0.4028354 2.482775e-05 8.916350e-05 
```

的帮助页面`?ddply, ?transform, ?summarize`应该是有见地的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:56:42.267

看`plyr`包装。我将按 SNAME 变量为您拆分数据，然后您为其提供代码以执行您想要的一组汇总（混合均值和总和等），然后它将为您重新组合在一起。您可能想要该包中的“ddply”或“daply”功能。

# android - 将来自 Android 应用程序的数据存储在 App Engine 数据存储区中

> ID：10805298
> 
> 赞同：6
> 
> 时间：2012-05-29T19:19:00.803
> 
> 标签：android, google-app-engine, servlets

我已经创建了一个 AppEngine 连接的 Android 应用程序，我正在尝试对其进行修改，以便能够在服务器上存储一些用户数据。我不知道最简单的方法是什么，因为我希望它尽可能简单。我只想为每个用户存储一些基本数据。这些数据是：姓名、电子邮件和其他一些字符串。我在 android 端创建了一个表单，允许用户键入所有请求的数据，但我不知道如何将此信息发送到 GAE 服务器并将其存储在数据存储中。我想我将不得不使用 Servlet 和某种 RPC 服务来调用这些方法。我真的很迷茫，因为这是我第一次这样做。我在 android 和网络应用程序中都没有经验。我希望你能帮助我。

**更新**

好吧，也许我没有很好地解释自己。我被要求构建的系统由一个 Web 服务组成，该服务存储您用于大多数常见网站（facebook、gmail 等）的个人登录凭据。使用 chrome 扩展程序，您向服务器询问您正在导航的网站上的凭据，然后服务器向您的手机请求授权。它会询问（您是否允许我将您的凭据发送给“某个用户”），您必须回答是或否，然后服务器将采取行动。关键是您必须以某种方式将您的凭据存储在服务器中，可能来自 android 应用程序（这是我正在尝试的）或来自其他地方。我还需要身份验证。

Pd：我在服务器端使用 java。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T19:37:39.897

由于您已经开始使用[AppEngine 连接的 Android 应用程序](https://developers.google.com/eclipse/docs/appengine_connected_android)，因此继续对其进行自定义是有意义的：[App Engine 数据访问：添加实体和 RPC](https://developers.google.com/eclipse/docs/appeng_android_add_rpc#data)。

**更新：**

当然有很多方法可以在客户端和服务器之间交换数据。最简单的方法是使用一些查询参数处理 GET 和 POST 请求的 servlet。

此外，最近最流行的是 REST：

1.  Android REST 客户端：[http](http://appfulcrum.com/2010/08/20/android-how-to-call-rest-service-using-asynctask/) ://appfulcrum.com/2010/08/20/android-how-to-call-rest-service-using-asynctask/ （尝试使用[GSON](http://code.google.com/p/google-gson/)来解析 JSON）

2.  服务器：使用 REST 框架。我个人的选择是[RESTEasy](http://www.jboss.org/resteasy)。一个例子：[http ://ankiewsky.blogspot.com/2010/08/resteasy-on-googleappengine-corerest.html](http://ankiewsky.blogspot.com/2010/08/resteasy-on-googleappengine-corerest.html)

**更新 2：**

最简单的方法 - 制作/处理一个简单的 POST 请求：

1.  Android 客户端 - 使用参数发出 POST 请求：[http ://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

2.  服务器处理 POST（或 GET）并提取参数：[http ://www.exampledepot.com/egs/javax.servlet/GetReqParam.html](http://www.exampledepot.com/egs/javax.servlet/GetReqParam.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T20:39:17.900

查找并彻底遵循[此页面](https://developers.google.com/eclipse/docs/endpoints-android)上的**主题索引**。好运

# iphone - 如何用 2 根手指在 iOS 4 中滚动 iframe？

> ID：10805301
> 
> 赞同：3
> 
> 时间：2012-05-29T19:19:10.823
> 
> 标签：iphone, ios, ipad, iframe

我发现了许多相关问题，但没有一个答案可以解释如何`iframe`在 iOS 4 中使用 2 指方法滚动。

我可以通过设置 a和属性和设置`div`来用两根手指滚动 a 。这是一个更完整的示例：`width``height``overflow: scroll;`

```
<div style='width: 280px; height: 200px; overflow: scroll; -webkit-overflow-scrolling: touch;'>
      Just imagine a bunch of content is in here, spanning well over 200px
      worth of height. You can scroll this just fine in iOS 4 by using 2 
      fingers, or in iOS 5 by swiping 1 finger thanks to 
      "-webkit-overflow-scrolling: touch;".
</div> 
```

同样的方法不适用于`iframes`运行 iOS 4.3 的 iPad 1。这是一个在 iOS 4 中不会用任何手指组合滚动的完整示例（当然，它`-webkit-overflow-scrolling`允许它在 iOS5 上工作）：

```
<html>
<head>
    <style type="text/css">
    #scroller {
        width: 280px;
        height: 200px;
        overflow: scroll;
        -webkit-overflow-scrolling: touch;
    }
    #scroller iframe {
        width: 100%;
        height: 100%;
    }
    </style>
</head>
<body>

<div id="scroller">
    <iframe src="content.html">content.html is a big list of nonsense.</iframe>
</div>

</body>
</html> 
```

**我必须补充**一点，如果我将和设置为实际像素值，例如，我*可以*让 2 指滚动工作，但我永远不会知道 iframe 的内容有多高。所以，也许真正的问题是如何让 iOS 4 中的移动 Safari 相信其内部确实大于 280x200 像素？`width``height``iframe``height: 1000px;``iframe``div`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:01:22.603

rossb @ github.com/fancyapps 发布的一个简单想法对于 iOS 4（2 根手指）和 iOS 5（1 根手指）中的滚动都非常有效，并解决了 iOS 5 的 iframe 似乎困扰的“滚动空白内容”问题. 基本上，您不希望 iframe 处理任何滚动。给它一个固定的宽度/高度，并将可滚动的内容包装在包含文件中的一个`div`可以*滚动*的文件中。

这是一个例子：

```
<iframe id="stupid-iframe" width="600" height="200" src="a-file.html"></iframe> 
```

一个文件.html：

```
<html>
<body>
<div id="wrapper" style="width: 100%; height: 100%; overflow: auto; -webkit-overflow-scrolling: touch;">
...all my normal content...
</div>
</body>
</html> 
```

# codeigniter - 代码点火器，引导程序

> ID：10805303
> 
> 赞同：-2
> 
> 时间：2012-05-29T19:19:26.293
> 
> 标签：codeigniter, twitter-bootstrap

我有以下文件夹结构

```
application
assets\
      \css
      \js
      \images 
```

我在资产文件夹中有所有引导文件 - css 文件夹中的 css 文件，js 文件夹中的 js 文件等。我的问题是这个。我有一个使用 bootstrap.css 的视图。我通过执行以下操作来引用它：

```
 <script type="text/javascript" scr=<?php base_url()?>assets/css/bootstrap.css>    </script> 
```

它找到文件就好了。但是当我尝试在引导程序中使用内置图像时，它们不会显示，因为引导程序 css 期望图像在

```
 "../img/glyphicons-halfing.png" 
```

但是视图的物理路径类似于：

c:\wamp\www\myapp\views\templates\

我想我可以将图像文件夹复制到视图文件夹中......或者我可以编辑 css 以指向正确的位置。但我只是想看看其他人是如何使用 codeigniter 和 bootstrap 来组织他们的文件夹的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:20:58.527

它在“img”中查找-您需要将其修改为“图像”

```
"../images/glyphicons-halfing.png" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-06T01:25:33.440

Glyphicons 位于“assets\font”文件夹中。

以防万一，我在 xubuntu 上使用 CodeIgniter 3.x 和 Xampp 5.6.x。

```
assets\
      \css\
      \js\
      \images\
      \fonts\
             glyphicons-halflings-regular.eot
             glyphicons-halflings-regular.woff2 
```

# sql-server - 将值从 CSV 导入 SQL Server

> ID：10805307
> 
> 赞同：0
> 
> 时间：2012-05-29T19:19:43.270
> 
> 标签：sql-server, powershell, csv

我需要将 CSV 数据从客户端计算机导入到网络上其他地方的 SQL Server。我想用 PowerShell 来做这件事，因为我正试图变得更流利地使用它。

但是，当我使用我在互联网上找到的示例时，我遇到了一个我不明白的问题。

作为参考，我使用了第三个示例：

[http://blogs.technet.com/b/heyscriptingguy/archive/2011/11/28/four-easy-ways-to-import-csv-files-to-sql-server-with-powershell.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2011/11/28/four-easy-ways-to-import-csv-files-to-sql-server-with-powershell.aspx)

我已将信息导入数据表，但是似乎一旦系统尝试将数据插入数据库，我就会收到以下错误，这显然是我的数据如何进入我的数据表的问题，因为 at 符号和支架似乎导致了这个问题。

这是错误：

> System.Management.Automation.MethodException：无法转换参数“0”，值为：“System.Object[]”，用于“WriteToServer”以键入“System.Data.DataRow[]”：
> “无法转换“@{[类型]=1；[EID]=803；[名字]=鲍勃；[中间初始化]=; [姓氏]=米勒；[雇用日期]=03031903; [规则]=H; [比率]=0100；[状态]=1；[商店]=8；[部门]=04；[班级]=130；[Badge]=803;}" 类型“System.Management.Automation.PSCustomObject”的值以键入“System.Data.DataRow”。
> ---> System.Management.Automation.PSInvalidCastException：无法转换“@{[Type]=1;[EID]=803;[FirstName]=Bob;[MiddleInit]=;[LastName]=Miller;[HireDate] =03031903;[Rule]=H;[Rate]=0100;[Status]=1;[Store]=8;[Dept]=04;[Class]=130;[Badge]=803;}" 类型值“System.Management.Automation.PSCustomObject”键入“System.Data.DataRow”。
> 
> 在 System.Management.Automation.LanguagePrimitives.ConvertTo(Object valueToConvert, Type resultType, Boolean recursion, IFormatProvider formatProvider, TypeTable backupTypeTable)
> at System.Management.Automation.LanguagePrimitives.ConvertUnrelatedArrays(Object valueToConvert, Type resultType, Boolean recursion, PSObject originalValueToConvert, IFormatProvider
> System.Management.Automation.LanguagePrimitives.ConvertTo(Object valueToConvert, Type resultType, Boolean recursion, IFormatProvider formatProvider, TypeTable backupTypeTable) at
> System.Management.Automation.Adapter.PropertySetAndMethodArgumentConvertTo(Object valueToConvert, Type resultType, IFormatProvider formatProvider ) )
> 在 System.Management.Automation.Adapter.MethodArgumentConvertTo(Object valueToConvert, Boolean isParameterByRef, Int32 parameterIndex, Type resultType, IFormatProvider formatProvider)
> 在 System.Management.Automation.Adapter.SetNewArgument(String methodName, Object[] arguments, Object[] newArguments, ParameterInformation 参数，Int32 索引）
> --- 内部异常堆栈跟踪结束 --- 在 System.Management.Automation.Adapter.SetNewArgument(String methodName, Object[] arguments, Object[] newArguments, ParameterInformation parameter, Int32 index)
> 在 System .Management.Automation.Adapter.GetMethodArgumentsBase(String methodName, ParameterInformation[] parameters, Object[] arguments, Boolean expandParamsOnBest)
> 在 System.Management.Automation.DotNetAdapter.MethodInvokeDotNet(String methodName, Object target, MethodInformation[] methodInformation, Object[] arguments)
> 在 System.Management.Automation.Adapter.BaseMethodInvoke(PSMethod method, Object[] arguments)
> 在 System.Management .Automation.ParserOps.CallMethod(Token token, Object target, String methodName, Object[] paramArray, Boolean callStatic, Object valueToSet)
> at System.Management.Automation.MethodCallNode.InvokeMethod(Object target, Object[] arguments, Object value)
> at System.Management.Automation.MethodCallNode.Execute（数组输入，管道输出管道，ExecutionContext 上下文）
> 在 System.Management.Automation.ParseTreeNode.Execute(Array input, Pipe outputPipe, ArrayList& resultList, ExecutionContext context)
> at System.Management.Automation.StatementListNode.ExecuteStatement(ParseTreeNode statement, Array input, Pipe outputPipe, ArrayList& resultList, ExecutionContext context)
> 消息+ CategoryInfo : NotSpecified: (:) [Write-Error], WriteErrorException + FullyQualifiedErrorId : Microsoft.PowerShell.Commands.WriteErrorException,Write-DataTable.PS1

# c# - 按标签移除 Canvas Child

> ID：10805308
> 
> 赞同：3
> 
> 时间：2012-05-29T19:20:01.277
> 
> 标签：c#, wpf, controls

我有一个椭圆（prew），我想通过标签（“p”）从画布（canvas1）中删除它。我试过这个，但它不起作用：

```
var child = (from c in canvas1.Children
             where "p".Equals(c.Tag)
             select c).First();
canvas1.Children.Remove(child); 
```

它给了我这个错误：

> “找不到源类型'System.Windows.Controls.UIElementCollection'的查询模式的实现。找不到'Where'。考虑明确指定范围变量'c'的类型。”

如何`canvas`按标签删除孩子？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T19:29:16.163

该`UIElementCollection`实现很旧`IEnumerable`，因此默认情况下与 LINQ 不兼容。您需要`IEnumerable<T>`在查询之前将其转换为强类型

```
var child = (from c in canvas1.Children.Cast<FrameworkElement>()
             where "p".Equals(c.Tag)
             select c).First();
canvas1.Children.Remove(child); 
```

请注意，如果`FrameworkElement`集合中存在 non （的另一个派生`UIElement`），则此代码可能会出现运行时错误。为了防止这种情况，您最好使用该`OfType`方法

```
var child = (from c in canvas1.Children.OfType<FrameworkElement>()
             where "p".Equals(c.Tag)
             select c).First();
canvas1.Children.Remove(child); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:28:59.013

```
var child = (from FrameworkElement c in canvas1.Children
             where "p".Equals(c.Tag)
             select c).First();
canvas1.Children.Remove(child); 
```

或者

```
var child = (from c in canvas1.Children.Cast<FrameworkElement>()
             where "p".Equals(c.Tag)
             select c).First();
canvas1.Children.Remove(child); 
```

# xml - xslt - 在 xsl:apply-templates 中排序与在 xsl:for-each 中排序

> ID：10805309
> 
> 赞同：0
> 
> 时间：2012-05-29T19:20:04.240
> 
> 标签：xml, performance, xslt, sorting

选项 (a) 和 (b) 之间的灵活性和性能优势是什么？提前致谢。

xml数据：

```
<grandparent gname="gname1">
<parent pname="pname1">
<child>cname1</child>
<child>cname2</child>
<child>cname3</child>
<child>cname4</child>
</parent>
<parent pname="pname2">
<child>cname11</child>
<child>cname12</child>
<child>cname13</child>
<child>cname14</child>
</parent>
<parent pname="pname3">
<child>cname21</child>
<child>cname22</child>
<child>cname23</child>
<child>cname24</child>
</parent>
<grandparent> 
```

部分xslt代码：

（一个）

```
<xsl:apply-templates select="/grandparent/parent">
    <xsl:sort select="@pname"/>
</xsl:apply-templates> 
```

(二)

```
<xsl:templates match="/grandparent">
    <xsl:for-each select="parent">
        <xsl:sort select="@pname" order="descending"/>
    </xsl:for-each>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:13:05.500

性能：正如 Woody 所说，这取决于处理器。没有内在的理由期望任何差异。

灵活性：应用模板总是更灵活。虽然有一个平衡点；有时，通过明智地使用 for-each，代码可以更清晰、更易读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:26:39.357

性能几乎可以肯定完全取决于您使用的 XSLT 系统，并且在不同的实现之间会有很大差异 - 一个引擎的最佳性能完全有可能与另一个引擎的性能不同，所以唯一的方法是当然（因为它很容易找到）是在您自己选择的 XSLT 引擎上尝试它并计时。

# ajax - 什么是drupal中authcache的标志（标志模块）ajax回调的例子？

> ID：10805310
> 
> 赞同：1
> 
> 时间：2012-05-29T19:20:07.370
> 
> 标签：ajax, drupal, authentication, caching, flags

我在页面的不同区域有多个不同的标志，并且使用 authcache 它们都显示了最初缓存页面的用户的状态。标志链接表单标记中断，因此单击标志会引发错误。我想知道是否有人有一个通过 ajax 检索和替换所有标志链接的最佳方法示例，以便它们再次工作。谢谢！

# linux - 检查相关帖子后，仍然无法在没有root权限的Linux上安装GCC 4.7？

> ID：10805311
> 
> 赞同：0
> 
> 时间：2012-05-29T19:20:10.397
> 
> 标签：linux, gcc, installation, g++, permission-denied

检查帖子后：

[在没有root权限的linux上安装gcc](https://stackoverflow.com/questions/3212099/install-gcc-on-linux-with-no-root-privilege)

[https://stackoverflow.com/questions/9316118/installing-gcc-as-non-root](https://stackoverflow.com/questions/9316118/installing-gcc-as-non-root)

我的问题仍然无法解决，所以我在这里发布。

我正在尝试使用 gcc 版本 4.1.2 20080704（Red Hat 4.1.2-52）在 Linux 上安装 GCC 4.7。

我运行带有前缀的配置作为我的主目录。

```
./configure \
    --with-gmp=/remote/home/gcc_4_7_2012_5_28/gmp505 \
    --with-mpfr=/remote/home/gcc_4_7_2012_5_28/mpfr242 \
    --with-mpc=/remote/home/gcc_4_7_2012_5_28/mpc081 \
    --disable-libjava 
```

然后，make就可以了。但是，make check 不行，我得到了错误：

```
make[1]: Entering directory `/remote/home/gcc_4_7_2012_5_28/trunk'

make[2]: Entering directory `/remote/gcc_4_7_2012_5_28/trunk/host-x86_64-unknown-linux-gnu/fixincludes'

autogen -T ../.././fixincludes/check.tpl ../.././fixincludes/inclhack.def

make[2]: execvp: autogen: Permission denied

make install is not ok. 

make[1]: Entering directory `/remote/home/gcc_4_7_2012_5_28/trunk'
/bin/sh ./mkinstalldirs /usr/local /usr/local

make[2]: Entering directory `/remote/home/gcc_4_7_2012_5_28/trunk/host-x86_64-unknown-linux-gnu/fixincludes'

rm -rf /usr/local/libexec/gcc/x86_64-unknown-linux-gnu/4.8.0/install-tools
/bin/sh ../.././fixincludes/../mkinstalldirs /usr/local/libexec/gcc/x86_64-unknown-linux-gnu/4.8.0/install-tools

mkdir -p -- /usr/local/libexec/gcc/x86_64-unknown-linux-gnu/4.8.0/install-tools

mkdir: cannot create directory `/usr/local/libexec/gcc': Permission denied 
```

我无法获得root权限。

任何帮助表示赞赏。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:47:23.637

编译 GCC 时，**永远不要在其源代码树中构建它**！

您在配置参数中忘记了前缀，可能类似于

```
mkdir $HOME/gcc-build
cd $HOME/gcc-build
/your/path/to-source-tree/gcc-4.7.0/configure --prefix $HOME/pref \
         --program-suffix -my4.7 \
# other configure arguments go here 
```

当然，您会发现您的编译器已安装在其中，`$HOME/pref/bin/gcc-my4.7`因此我建议您添加`$HOME/pref/bin`到您的`$PATH`和`$HOME/pref/lib`您的`$LD_LIBRARY_PATH`

成功安装 GCC 4.7 后，您可能会尝试构建 GCC [MELT](http://gcc-melt.org/) [meta-] 插件

^(`gcc-help@gcc.gnu.org`邮件列表是获得此类帮助的好地方。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:46:57.127

您需要检查 config.log 文件，查找“检查目标文件的后缀”。您应该在附近的某处看到一条错误消息，这应该可以帮助您。

或者，使用 EasyBuild 构建 GCC 4.7，它可以为您完成所有工作，请参阅[http://hpcugent.github.com/easybuild](http://hpcugent.github.com/easybuild)。

# java - DataTypeConvertor parseDateTime 结果

> ID：10805316
> 
> 赞同：4
> 
> 时间：2012-05-29T19:20:28.467
> 
> 标签：java

我在我的程序中做这样的事情：

```
Calendar cal = DatatypeConverter.parseDateTime("2012-05-29T11:17:04.805-07:00");  
System.out.println(cal.getTime().toString()); 
```

o/p：

> 2012 年 5 月 29 日星期二 13:17:04 CDT

为什么结果显示时间为 13:17:04，在输入中我给出了 11:17:04 和时区 -07:00，这是太平洋时区。它不应该打印出 11:17:04 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:25:20.960

您的时区 - 程序运行时的默认时区与 DatatypeConverter.parseDateTime() 方法的时区不同，而 cal.getTime().toString() 方法使用默认时区来格式化日期。

永远不要使用 Date.toString() 来格式化 Date - Date 只知道从 Epoch 时间开始的毫秒数。而是`java.text.SimpleDateFormat`像这样使用：

```
SimpleDateFormat("yyyy-MM-dd HH:mm:ss z").format(dateObject).

import java.util.Calendar;
import java.util.TimeZone;
import java.text.SimpleDateFormat;
import javax.xml.bind.DatatypeConverter;

class  TestDate
{
    public static void main(String[] args) 
    {   
      Calendar cal = DatatypeConverter.parseDateTime("2012-05-29T11:17:04.805-07:00");
      SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS z");
      df.setTimeZone(TimeZone.getTimeZone("GMT-07:00"));
      String date = df.format(cal.getTime());
      System.out.println(date);
   }
} 
```

# php - 设备方向和分页

> ID：10805320
> 
> 赞同：0
> 
> 时间：2012-05-29T19:20:49.430
> 
> 标签：php, javascript, css, ajax, mobile

我目前正在一个移动站点上工作，该站点具有代表每篇文章的图块。这些页面上有 15 个瓷砖，它们很干净，适用于移动设备上的两个方向。我最近添加了一篇特色文章，它占用了相当于页面空间的两个空间块，所以现在我在页面底部有一个寡妇。

使用一些媒体查询，我可以显示/隐藏最后两个图块，这在用户单击下一页图块之前效果很好。如果用户是纵向的，那么他们将错过两个文章图块，因为它们隐藏在最后一页上。

所以我想创建某种类型的 AJAX 函数，允许我检查方向并动态更改图块计数请求服务器端。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:32:49.287

[Jquery Mobile](http://jquerymobile.com/test/docs/api/events.html)提供了查看和了解设备方向的方法。

# mysql - mysql错误150：无法创建表

> ID：10805322
> 
> 赞同：1
> 
> 时间：2012-05-29T19:20:50.400
> 
> 标签：mysql, innodb

我被这个错误困住了，在 mysql 中没有 150 问题，我知道有讨论这个问题的问题，但我仍然找不到我错的地方。这是我要创建的数据库：

```
create table business (
    ident varchar(40) NOT NULL,
    name varchar(50) NOT NULL,
    rating INT UNSIGNED NOT NULL,
    PRIMARY KEY(ident)
) ENGINE=InnoDB;

create table deals (
    business_id varchar(40) NOT NULL,
    deals_id varchar(20) NOT NULL,
    deals_title varchar(50) NOT NULL,
    PRIMARY KEY (business_id, deals_id),
    FOREIGN KEY (business_id) REFERENCES business(ident) ON DELETE CASCADE
) ENGINE=InnoDB;

create table d_options (
    business_id varchar(40) NOT NULL,
    dealid varchar(20) NOT NULL,
    option_title varchar(40) NOT NULL,
    PRIMARY KEY(business_id, dealid, option_title), 
    FOREIGN KEY(business_id) REFERENCES business(ident) ON DELETE CASCADE,
    FOREIGN KEY(dealid) REFERENCES deals(deals_id) 
) ENGINE=InnoDB; 
```

我收到错误：ERROR 1005 (HY000): Can't create table 'test.d_options' (errno: 150)

我知道要满足外键约束，根据mysql文档，父表中应该有一个索引，但我认为默认情况下主键上有索引。

innodb 状态的结果是：

```
120530  0:47:48 Error in foreign key constraint of table test/d_options:
FOREIGN KEY(dealid) REFERENCES deals(deals_id) 
) ENGINE=InnoDB:
Cannot find an index in the referenced table where the
referenced columns appear as the first columns, or column types
in the table and the referenced table do not match for constraint.
Note that the internal storage type of ENUM and SET changed in
tables created with >= InnoDB-4.1.12, and such columns in old tables
cannot be referenced by such columns in new tables.
See http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html
for correct foreign key definition. 
```

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:26:56.590

您有一个复合主键`(business_id, deal_id)`，它们被索引为一对，但是为了满足 FK，您需要`deal_id`单独的另一个索引：

```
create table deals (
    business_id varchar(40) NOT NULL,
    deals_id varchar(20) NOT NULL,
    deals_title varchar(50) NOT NULL,
    PRIMARY KEY (business_id, deals_id),
    FOREIGN KEY (business_id) REFERENCES business(ident) ON DELETE CASCADE,
    /* Add an index on deals_id, separate from the compound PK */
    INDEX idx_deals_id (deals_id)
) ENGINE=InnoDB; 
```

# c++ - 盈透证券 C++ POS API 示例？

> ID：10805323
> 
> 赞同：4
> 
> 时间：2012-05-29T19:20:51.953
> 
> 标签：c++, linux, gcc, posix

有没有人见过这样的工作示例？我正在寻找一个使用 gcc 而不是 Windows 和 Visual Studio 的 Linux 环境？

这本书[http://www.interactivebrokers.com/download/GettingStartedC++APIAdvisors.pdf](http://www.interactivebrokers.com/download/GettingStartedC++APIAdvisors.pdf)有： 但是，C++ API 仅在 Windows 上受支持。

这个 Interactive Brokers C++ POS API 是否仍然有效或受支持？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-03T19:59:06.967

仍支持 POSIX API。许多人在他们的项目中使用[https://github.com/rudimeier/twsapi](https://github.com/rudimeier/twsapi)或[https://github.com/JanBoonen/TwsApiCpp](https://github.com/JanBoonen/TwsApiCpp)，因为所有线程、消息传递和其他内务处理都已为您处理好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-16T01:59:01.113

TWS API 下载中包含的 TestCppClient 项目可以使用提供的 makefile 在 Linux 或 Mac 上构建。它具有检测操作系统并包含相应适当代码的宏。 [交易平台 API 下载](http://interactivebrokers.github.io/)

# python - 如何查看 PIP 的日志或结果

> ID：10805324
> 
> 赞同：3
> 
> 时间：2012-05-29T19:20:55.537
> 
> 标签：python, pip

在 Windows 7 中使用 python PIP (pypi)，如何保持弹出窗口打开以查看安装结果（尤其是在出现问题时）？或者有我可以查看的日志吗？

例如： pip install selenium2Library

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:54:47.837

我想出了一个简单的解决方法..使用这个：

```
\Python27\python.exe \Python27\Scripts\pip-2.7-script.py install eyed3 
```

这在当前 cmd 窗口中运行，而不是在完成后自动关闭的新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:31:12.700

这不是最好的解决方案，因为我仍在寻找正确的答案，但目前对我有用的是，而不是`pip`从`command prompt`我正在使用的运行`cygwin`。使用它的命令完全相同：`pip install module`除了`cygwin`似乎捕获程序的输出。

在这里找到 cygwin：http: [//cygwin.com/install.html](http://cygwin.com/install.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:40:56.133

这发生在我的一些同事身上，但不是我。

我们已经下载了一个 pip 二进制文件。我们通过卸载 pip，运行[ez_setup](http://peak.telecommunity.com/dist/ez_setup.py)，然后运行 ​​easy_install pip 来修复它。

# jstl - WebLogic 9.2：java.lang.NoClassDefFoundError：javax/el/ValueExpression

> ID：10805328
> 
> 赞同：1
> 
> 时间：2012-05-29T19:21:06.487
> 
> 标签：jstl, weblogic9.x

我在 Windows XP Professional 上运行 WebLogic 9.2。

部署我的“acme”webapp (acme.war) 时出现以下错误。但是，将相同的 acme.war 部署到 Tomcat 6 或 7 时我没有问题。

在谷歌搜索之间，我相信原因*可能*是 weblogic 有一些过时的库。

如果能帮助我识别这些库以及将它们存放到哪个 weblogic 目录，我将不胜感激。

提前非常感谢。

```
Error 500--Internal Server Error

java.lang.NoClassDefFoundError: javax/el/ValueExpression
    at org.apache.taglibs.standard.tag.common.core.SetSupport.doEndTag(SetSupport.java:155)
    at jsp_servlet._jsp.__header._jsp__tag12(__header.java:610)
    at jsp_servlet._jsp.__header._jsp__tag11(__header.java:575)
    at jsp_servlet._jsp.__header._jsp__tag2(__header.java:271)
    at jsp_servlet._jsp.__header._jspService(__header.java:145)
    at weblogic.servlet.jsp.JspBase.service(JspBase.java:34)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
    at weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:530)
    at weblogic.servlet.internal.RequestDispatcherImpl.include(RequestDispatcherImpl.java:459)
    at weblogic.servlet.jsp.PageContextImpl.include(PageContextImpl.java:159)
    at jsp_servlet._jsp.__login._jspService(__login.java:77)
    at weblogic.servlet.jsp.JspBase.service(JspBase.java:34)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
    at weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:530)
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:266)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
    at gov.noaa.nsd.controller.security.AuthenticationFilter.doFilter(AuthenticationFilter.java:83)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3270)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2019)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:1925)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1394)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:181) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:44:16.120

您的 webapp 显然包含 JSTL 1.2 库。JSTL 1.2 需要 Servlet 2.5 / JSP 2.1。提到的[缺失类](http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html)是 JSP/EL 2.1 的一部分。然而，Weblogic 9.2 是一个旧的 Servlet 2.4 / JSP 2.0 容器（Tomcat 6 是一个 Servlet 2.5 容器，而 Tomcat 7 是一个 Servlet 3.0 容器）。

事实上，在部署到 Servlet 2.4 容器时，您应该使用 JSTL 1.1。但是 Weblogic 本身作为一个“成熟的”Java EE 应用服务器已经捆绑了 JSTL。所以你不需要在你的 webapp 中捆绑任何 JSTL 库。因此，要解决这个特殊问题，您只需从您的 webapp中**删除**`web.xml`JSTL 1.2 库（如果适用，还可以将其更改为 Servlet 2.4 兼容而不是 Servlet 2.5 兼容）。然后，webapp 将使用 Weblogic 捆绑的 JSTL 1.1。

# jquery - Wordpress 上具有背景的空 div 仅与帖子重叠，使博客无用

> ID：10805329
> 
> 赞同：1
> 
> 时间：2012-05-29T19:21:13.130
> 
> 标签：jquery, wordpress, html, parallax, parallax.js

我正在尝试为我们公司建立一个博客，并决定采用 Wordpress 的方式。我着手彻底改变一个标准主题，以便它可以包含我们想要的一切。该博客可以在这里找到[http://limsomniacs.limsomnium.com](http://limsomniacs.limsomnium.com)它只有开始的帖子，还没有什么花哨的。

事情是我想使用 parallax.js 来创建使用墨水飞溅的深度场效果，所以我从远处的彩色墨水飞溅的模糊图像开始。

令我惊讶的是，当我在 wordpress 的 wrap div 中添加一个 div 时，它就像它只与内容 div 重叠，这意味着它不允许任何人选择文本或按下更多按钮并将帖子展开到完整长度......

Parallax.js 要求使用 position:fixed ，因此我试图看看这是否是问题，但它仍然存在。

使用 css 的 Z-index 属性也完全没用......

自从我在任何地方插入

```
<div id="paralelo1"></div> 
```

它只是克服并重叠了所有内容 div ...

有人可以帮帮我吗？也许您以前见过这种情况，非常感谢您的帮助。

提前致谢

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:39:31.950

添加`position: relative;`到 div `#c2`，否则`z-index: 200;`无效。

*   [Z指数](https://developer.mozilla.org/en/CSS/Understanding_z-index/Adding_z-index)

# ios - UITableViewCell 子类中的复选框/按钮

> ID：10805332
> 
> 赞同：0
> 
> 时间：2012-05-29T19:21:27.437
> 
> 标签：ios, ios5

我创建了一个 UITableViewCell 的子类，我将它与一些 UILabel 一起使用。现在我想为这个子类添加一个复选框或按钮。用户单击此按钮后，我想移动执行 segue 并传递 ID 或标签。

目前，这就是我在子类中的内容。activityComplete 是按钮点击动作

```
- (IBAction)activityComplete:(id)sender {
     NSLog(@"row: %d", activityComplete.tag);
} 
```

在我的主课中，我在 cellForRowAtIndexPath 调用它：

```
cell.activityComplete.tag = [activityId intValue]; 
```

这目前正在工作，当我单击按钮时，它会将 ID 作为标签传递。问题是，此时我不知道如何执行转场。我需要从我的主类中调用 segue，但该操作正在我的子类中发生。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:12:36.667

如果您已经有一个要过渡到的场景的转场，即使它连接到您的按钮以外的视图，请确保您在情节提要中为转场提供了标识符。然后你可以调用 performSegueWithIdentifier:sender: 方法，使用你给 segue 的标识符并使​​用按钮作为发送者。

这将调用场景，就好像您直接连接了 segue。

# java - XQUERY JAVA 不工作

> ID：10805333
> 
> 赞同：0
> 
> 时间：2012-05-29T19:21:28.353
> 
> 标签：java, xml, xquery

我从一个复杂的 XML 文件中获取一些属性：

```
<rsp>
    <csl  d='10775.916760613756' id='2003' nam='AUTOS TEZIUTLÁN, S.A. DE C.V.' 
          adr='KM. 1 CARR. TEZIUTLÁN-TLAPACOYAN' tel='231312-12-05' 
          lat='19.826765' lon='-97.347906' />
    <csl  d='10789.680721293766' id='2019' nam='AUTOMOVILÍSTICA DE TEHUACAN, S.A. DE C.V.' 
          adr='BLVD. ADOLFO LOPEZ MATEOS NO. 3623' tel='238382-44-33' 
          lat='18.467281' lon='-97.417901' />
    <csl  d='10848.586325071066' id='2013' nam='AUTOMOTRIZ DE LA SIERRA, S.A. DE C.V.' 
          adr='AUSENCIO T. JIMÉNEZ No. 1' tel='776762-05-42' 
          lat='20.174386' lon='-98.06125' />
    <csl  d='10866.815936520663' id='2028' nam='MOTORES ALEMANES RIVERA S.A. DE C.V.' 
          adr='CALZADA IGNACIO ZARAGOZA NO. 180' tel='222286-02-02' 
          lat='19.064258' lon='-98.179042' />
    <csl  d='10867.374198658401' id='2012' nam='ARMENTA AUTOMOTRIZ, S.A. DE C.V.' 
          adr='24 NORTE No. 214' tel='222235-87-68' 
          lat='19.038912' lon='-98.183101' />
</rsp> 
```

但是我的 XQUERY 只给了我第一个属性，并且只给了我使用这个类的那个：

```
public class XMLParser {

private String[] resultTable;

public XMLParser(){}

public String[] stringToXML(String xmlString)   {

    try{

        DocumentBuilderFactory dBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dBuilderFactory.newDocumentBuilder();
        InputSource iSource = new InputSource();
        iSource.setCharacterStream(new StringReader(xmlString));
        Document doc = dBuilder.parse(iSource);
        NodeList nList = doc.getElementsByTagName("tpr");
        resultTable = new String [nList.getLength()];

        for (int i=0; i<nList.getLength(); i++){

            Element e = (Element)nList.item(i);
            NodeList pCode = e.getElementsByTagName("tpr");
            Element line = (Element)pCode.item(0);
            resultTable[i] = getCharacterDataFromElement(line);

        }
    }
    catch(Exception e)  {           
        e.printStackTrace();            
    }

    return resultTable;
}

public static String getCharacterDataFromElement(Element e) {

    Node child = e.getFirstChild();

    if (child instanceof CharacterData) {       
        CharacterData cData = (CharacterData) child;
        return cData.getData();         
    }

    return "null";
}

public static String getParamByXPath(String xmlString, String expression)   {

    String ret = "";
    XPath xpath = XPathFactory.newInstance().newXPath();

    try{

        DocumentBuilderFactory dBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dBuilderFactory.newDocumentBuilder();
        InputSource iSource = new InputSource();
        iSource.setCharacterStream(new StringReader(xmlString));
        Document doc = dBuilder.parse(iSource);
        XPathExpression exp = xpath.compile(expression);
        Object result = exp.evaluate(doc);

        if (result instanceof String) ret = (String)result;
        else if (result instanceof Boolean) ret = result.toString();
        else if (result instanceof Double) ret = result.toString();
        else if (result instanceof NodeList)    {

            NodeList list = (NodeList) result;
            Node node = list.item(0);
            Log.d("LIST", Integer.toString(list.getLength()));
            ret = node.getTextContent();

        }

    }catch(Exception e) {           
        e.printStackTrace();            
    }

    return ret;     
} 
```

我正在用这一行调用该方法：

```
String loc1 = XMLParser.getParamByXPath(service, "//@d"); 
```

我一直在使用其他查询，但结果始终是第一个元素......我会遗漏什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:40:01.887

XPath将返回文档`//@d`中所有属性节点的列表。`@d`

您的 Java 代码：

```
 else if (result instanceof NodeList)    {
        NodeList list = (NodeList) result;

        Node node = list.item(0); // <-- THIS ONE HERE

        Log.d("LIST", Integer.toString(list.getLength()));
        ret = node.getTextContent();
    } 
```

然后将采用第一个 ( `list.item(0)`)，这就是您所得到的。

看起来您的“问题”与 Java 逻辑有关，而不是 XPath。

# php - 在数据库中存储会话是否可以防止劫持/修复

> ID：10805334
> 
> 赞同：0
> 
> 时间：2012-05-29T19:21:28.533
> 
> 标签：php, session, session-hijacking, session-fixation

经过数小时的挫折后，我设法编写了一个将 PHP 会话存储在数据库中的脚本。我的问题是，这是否可以防止会话劫持和/或固定？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:23:29.740

没有。它只是一个不同的数据存储。

# facebook - facebook 和 socket.io node.js

> ID：10805335
> 
> 赞同：5
> 
> 时间：2012-05-29T19:21:34.767
> 
> 标签：facebook, node.js, facebook-graph-api, express, socket.io

我有一个好主意，但我有一些问题......如何将 facebook 用户连接到节点应用程序 - socket.io

我创建了一个 socket.io 聊天，但现在希望允许 facebook 用户来聊天以创建类似 facebook group CHAT 的东西。我觉得这个想法好吗？

这是我的聊天代码：

服务器端文件 - app.js

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(8080);

// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

// usernames which are currently connected to the chat
var usernames = {};

// rooms which are currently available in chat
var rooms = ['room1','room2','room3'];

io.sockets.on('connection', function (socket) {

    // when the client emits 'adduser', this listens and executes
    socket.on('adduser', function(username){
        // store the username in the socket session for this client
        socket.username = username;
        // store the room name in the socket session for this client
        socket.room = 'room1';
        // add the client's username to the global list
        usernames[username] = username;
        // send client to room 1
        socket.join('room1');
        // echo to client they've connected
        socket.emit('updatechat', 'SERVER', 'you have connected to room1');
        // echo to room 1 that a person has connected to their room
        socket.broadcast.to('room1').emit('updatechat', 'SERVER', username + ' has connected to this room');
        socket.emit('updaterooms', rooms, 'room1');
    });

    // when the client emits 'sendchat', this listens and executes
    socket.on('sendchat', function (data) {
        // we tell the client to execute 'updatechat' with 2 parameters
        io.sockets.in(socket.room).emit('updatechat', socket.username, data);
    });

    socket.on('switchRoom', function(newroom){
        // leave the current room (stored in session)
        socket.leave(socket.room);
        // join new room, received as function parameter
        socket.join(newroom);
        socket.emit('updatechat', 'SERVER', 'you have connected to '+ newroom);
        // sent message to OLD room
        socket.broadcast.to(socket.room).emit('updatechat', 'SERVER', socket.username+' has left this room');
        // update socket session room title
        socket.room = newroom;
        socket.broadcast.to(newroom).emit('updatechat', 'SERVER', socket.username+' has joined this room');
        socket.emit('updaterooms', rooms, newroom);
    });

    // when the user disconnects.. perform this
    socket.on('disconnect', function(){
        // remove the username from global usernames list
        delete usernames[socket.username];
        // update list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
        // echo globally that this client has left
        socket.broadcast.emit('updatechat', 'SERVER', socket.username + ' has disconnected');
        socket.leave(socket.room);
    });
}); 
```

和 index.html

```
<script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
    var socket = io.connect('http://localhost:8080');

    // on connection to server, ask for user's name with an anonymous callback
    socket.on('connect', function(){
        // call the server-side function 'adduser' and send one parameter (value of prompt)
        socket.emit('adduser', prompt("What's your name?"));
    });

    // listener, whenever the server emits 'updatechat', this updates the chat body
    socket.on('updatechat', function (username, data) {
        $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');
    });

    // listener, whenever the server emits 'updaterooms', this updates the room the client is in
    socket.on('updaterooms', function(rooms, current_room) {
        $('#rooms').empty();
        $.each(rooms, function(key, value) {
            if(value == current_room){
                $('#rooms').append('<div>' + value + '</div>');
            }
            else {
                $('#rooms').append('<div><a href="#" onclick="switchRoom(\''+value+'\')">' + value + '</a></div>');
            }
        });
    });

    function switchRoom(room){
        socket.emit('switchRoom', room);
    }

    // on load of page
    $(function(){
        // when the client clicks SEND
        $('#datasend').click( function() {
            var message = $('#data').val();
            $('#data').val('');
            // tell server to execute 'sendchat' and send along one parameter
            socket.emit('sendchat', message);
        });

        // when the client hits ENTER on their keyboard
        $('#data').keypress(function(e) {
            if(e.which == 13) {
                $(this).blur();
                $('#datasend').focus().click();
            }
        });
    });

</script>
<div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">
    <b>ROOMS</b>
    <div id="rooms"></div>
</div>
<div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;">
    <div id="conversation"></div>
    <input id="data" style="width:200px;" />
    <input type="button" id="datasend" value="send" />
</div> 
```

以及如何允许用户通过 fbLogin 按钮使用他们的 facebook 帐户访问 chta：

这是 fb 登录代码，但如何将此代码实施到我的聊天脚本中以允许用户使用 facebook 帐户。

```
<button id="fb-auth">Login</button>

<script>
function updateButton(response) {
  Log.info('Updating Button', response);
  var button = document.getElementById('fb-auth');

  if (response.status === 'connected') {
    button.innerHTML = 'Logout';
    button.onclick = function() {
      FB.logout(function(response) {
        Log.info('FB.logout callback', response);
      });
    };
  } else {
    button.innerHTML = 'Login';
    button.onclick = function() {
      FB.login(function(response) {
        Log.info('FB.login callback', response);
        if (response.status === 'connected') {
          Log.info('User is logged in');
        } else {
          Log.info('User is logged out');
        }
      });
    };
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:35:46.500

我在我的应用 Snakes-n-Ladders 多人游戏（https://apps.facebook.com/snakes-n-ladders/）中做了类似的事情。您需要在服务器上对用户进行身份验证。

我正在使用的库：facebook-node-sdk。

您需要在初始化 JavaScript SDK 时输入 cookie : true 。这样在客户端经过身份验证的用户将在服务器上进行身份验证。

```
FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
}); 
```

阅读 facebook-node-sdk 的文档，您将在服务器上获得所有用户信息。您可以将数据附加到套接字会话。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T04:32:55.283

我做了类似的事情：**[http ://codemygenes.appspot.com/nodejs/fbchat/fbchat.html](http://codemygenes.appspot.com/nodejs/fbchat/fbchat.html)** ://codemygenes.appspot.com/nodejs/fbchat/fbchat.html 。但它太复杂了，无法理解。我在 Heroku 上部署了一个 socket.io 聊天（node.js 应用程序）。我也使用了 Facebook 身份验证。为此，我遵循以下几点：

1.  去[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)。他们有一个关于 Graph API 的简洁文档。

2.  你必须在服务器上部署应用程序（比如 Heroku 甚至你的本地主机！）。

3.  在脸书上注册应用程序。[http://developers.facebook.com/apps](http://developers.facebook.com/apps)

4.  Facebook 会给你的应用一个 ID 和 Client_secret 代码。而且您每次都必须使用该 ID 和密码对应用程序进行身份验证。

简而言之，转到 facebook 图形 API 文档，您就拥有了一切......

[在此处](https://sharp-window-7156.herokuapp.com/login)查看演示

# css - 使用 CSS 在表单上定位元素

> ID：10805338
> 
> 赞同：1
> 
> 时间：2012-05-29T19:21:44.997
> 
> 标签：css, forms, alignment

我需要使用 CSS 对齐表单的标签和输入。结果应该是这样的（我希望这个简单的方案很清楚）：

```
Label1:    ______
Labellll2: ______
Button 
```

所以，我的 HTML 和 CSS 如下所示。问题是标签放置在输入的顶部，并且按钮位于右侧而不是底部。

```
<form width="200px" name="optform" method="post" action="#">
        <div class = "boxx">
            <label for="param1">Param1:</label>
            <input type="text" class="input-text" value="5" size="11" maxlength="11" name="param1" id="param1">
            <label for="param2">Param1:</label>
            <input type="text" class="input-text" value="5" size="11" maxlength="11" name="param2" id="param2">
        </div>
        <div class="buttons">
             <a href="#">
                  <img src="images/opt.png" alt=""/> Run 
             </a>
       </div> 
```

```
div.boxx {
    width: 500px;
}
div.boxx .input-text{
    border:1px solid #A9C7F5;
    color: #00557F;
    font: 12px Arial;
    float:left;
    width:66%;
    margin:0 0 0.5em 0.25em;
}

div.boxx label{
    display:block;
font: 13px Arial;
color:#00557F;
width:33%;
float:left;
text-align:left;
padding-right: 8px;
}
.buttons a, .buttons button {
    -moz-border-bottom-colors: none;
    -moz-border-image: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DFF4FF;
    border-color: #EEEEEE #DEDEDE #DEDEDE #EEEEEE;
    border-style: solid;
    border-width: 1px;
    color: #565656;
    cursor: pointer;
    font-family: Verdana,arial,sans-serif;
    font-size: 11px;
    font-weight: bold;
    line-height: 130%;
    margin: 10px 10px 0 0;
    padding: 4px 10px 3px 7px;
    text-decoration: none;
}
.buttons button {
    overflow: visible;
    padding: 4px 10px 3px 7px;
    width: auto;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:23:21.117

标签必须是

```
 display:inline-block; 
```

并且您的标签或输入框的宽度太大。填充和边距会导致百分比宽度问题，因为它们没有被考虑在内。

这是更新的CSS

```
div.boxx { 
width: 500px; 
} 
div.boxx .input-text{ 
border:1px solid #A9C7F5; 
color: #00557F; 
font: 12px Arial;     
width:60%; 
margin:0 0 0.5em 0.25em; 
} 

div.boxx label{ 
display:block; 
font: 13px Arial; 
color:#00557F; 
width:33%; 
float:left; 
text-align:left; 
padding-right: 8px; 
} 
.buttons a, .buttons button { 
-moz-border-bottom-colors: none; 
-moz-border-image: none; 
-moz-border-left-colors: none; 
-moz-border-right-colors: none; 
-moz-border-top-colors: none; 
background-color: #DFF4FF; 
border-color: #EEEEEE #DEDEDE #DEDEDE #EEEEEE; 
border-style: solid; 
border-width: 1px; 
color: #565656; 
cursor: pointer; 
font-family: Verdana,arial,sans-serif; 
font-size: 11px; 
font-weight: bold; 
line-height: 130%; 
margin: 10px 10px 0 0; 
padding: 4px 10px 3px 7px; 
text-decoration: none; 
} 
.buttons button { 
overflow: visible; 
padding: 4px 10px 3px 7px; 
width: auto; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:27:45.580

我知道现代 CSS 人讨厌表格，但在这种情况下（以及 div 的许多对齐问题）我推荐一个不错的小表格。

```
<table>
  <tr>
    <td>Label1: </td><td><input type="text" /></td>
  </tr><tr>
    <td>Label2: </td><td><input type="text" /></td>
  </tr><tr>
    <td>Label3: </td><td><input type="text" /></td>
  </tr>
</table>
<input type="button" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:35:09.260

试试这样的[http://jsfiddle.net/mmyxD/](http://jsfiddle.net/mmyxD/)

所有边距/填充都有原因吗？您的宽度迫使元素进入新行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T09:15:12.073

您还可以使用 div 和 span。像这样的东西：

```
<form action="">
    <div class="row"><span class="label">label1:</span><span class="formw"><input type="text" size="25"></span></div>
    <div class="row"><span class="label">label2:</span><span class="formw"><input type="text" size="25"></span></div>
    <div class="spacer">&nbsp;</div>
</form> 
```

和CSS：

```
div.row {
  clear: both;
  padding-top: 10px;
  }

div.row span.label {
  float: left;
  width: 33%;
  text-align: left;
  }

div.row span.formw input{
width: 100%;
}

div.row span.formw {
  float: right;
  width: 66%;
  text-align: left;
  } 
```

# android - Android 设备上的命令行 Jar

> ID：10805340
> 
> 赞同：0
> 
> 时间：2012-05-29T19:21:54.127
> 
> 标签：android, jar, command-line-interface

我目前有一个编译的 jar 文件，我想在 android 设备上使用它。代码使用 System.out.println() 输出到命令行。

我将如何创建一个包装器来获取标准输出并将其放在 android 设备上的文本视图中？我是否需要对 jar 进行任何更改（我确实拥有所有源代码）以允许包装器？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:49:02.900

首先，您应该考虑 Android 有一个名为 Dalvik 的特定 Java VM，并且不能在其下运行任何 jar。

*   如果您的 jar 中有一个点出现输出，最好的选择是创建一个带有 a 的常用应用程序`TextView`，将您的 jar 包含到它的构建路径中，并将对它的调用替换为对它的`println()`输出：

    ```
    public void print(String msg) {
        mTextView.setText(msg);
    } 
    ```

*   如果有很多输出来源，您可以使用 jar 运行`java.lang.Process`并使用它的`getInputStream()`方法来读取打印的消息：

    ```
    public static final String XBOOT_CLASS_PATH = "-Xbootclasspath:/system/framework/core.jar"
    public static final String CLASS_PATH = "-classpath /path/to/your/file.jar com.your.package.name"
    ...
    Process p = new ProcessBuilder("dalvikvm", XBOOT_CLASS_PATH, CLASS_PATH).start();
    BufferedReader reader = new BufferedReader (new InputStreamReader(p.getInputStream()));
    String msg = reader.readLine();
    if (msg != null) {
        mTextView.setText(msg);
    }
    // Cleanup omitted for simplicity 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:39:29.187

我认为你需要做出一些改变。您可以通过调用设置标准输出

```
System.setOut(PrintStream out) 
// Reassigns the "standard" output stream. 
```

`out`您自己的将数据打印到文本视图的类在哪里。见[摆动解决方案](https://stackoverflow.com/questions/4422642/java-console-jpanel)。只需设置附加到文本视图，您就可以使用此代码。

或者只创建一种方法

```
void log(String message); 
```

您将文本附加到视图的位置。然后将所有`println()`调用更改为此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:19:27.983

如果它是一个可执行的 jar 文件，这里是一个工作示例

将这个简单的可执行 HelloWorld [jar 文件](http://csdl.ics.hawaii.edu/~johnson/613f99/modules/04/psae.jar)添加到您的 Android 项目的构建路径中

如果jar文件没有包，那么你将不得不使用`Reflection`来调用其中的方法。否则你可以直接导入类文件并直接调用main方法。（这个示例jar有一个包“psae”）

例如：

```
TextView tv = (TextView)findViewById(R.id.textv);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PrintStream ps = new PrintStream(baos);
System.setOut(ps);
String[] params = {"Aneesh","Joseph"};
psae.HelloWorld.main(params);
String output = baos.toString();
tv.setText(output) 
```

如果 jar 文件只有一个默认包，那么您将无法从该 jar 导入类文件，因此您将不得不使用`Reflection`来调用该方法。

```
TextView tv = (TextView)findViewById(R.id.textv);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PrintStream ps = new PrintStream(baos);
System.setOut(ps);
try {
    //pick the entry class from the jar Manifest
    //Main-Class: psae.HelloWorld
    Class myClass = Class.forName("psae.HelloWorld");
    //since this has a package, there is no need of reflection.This is just an example
    //If the jar file had just a default package, the it would have been something like the below line (and this is where it would be useful) 
    //Class myClass = Class.forName("Main");
    Method myMethod = myClass.getMethod("main", String[].class);
    //parameters to the main method
    String[] params = {"Aneesh","Joseph"};
    myMethod.invoke(null, (Object) params);  
    String output = baos.toString();
    tv.setText(output);
 }
catch(Exception d)
 {
     tv.setText(d.toString());  
 } 
```

# vb.net - 使 Web Browser 控件与 VB.NET 程序通信

> ID：10805341
> 
> 赞同：1
> 
> 时间：2012-05-29T19:21:58.917
> 
> 标签：vb.net, html, user-interface

我在这里寻找的是一种可能单击 Web 浏览器控件内的按钮并让它从程序内部调用子程序或让程序对页面上的某些内容做出反应的方法。

我正在尝试为我的应用程序制作 HTML5 GUI。我真的不想使用任何第 3 方 API 来处理来自 HTML5 界面的命令，但如果我能找到另一种选择，那就太好了。但如果没有其他方法，我会满足于使用 3rd 方 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:24:54.720

我过去这样做的方式是为我的应用程序指定一个特殊的协议。

```
yourapp:somefunction/someparameter 
```

处理[事件，并在触发](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigating.aspx)[该`Navigating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigating.aspx)事件的代码中，检查 URL 前面是否有您的协议。如果是，设置`e.Cancel = true`取消导航，并添加代码来处理你自己的URL参数。

# c# - 如何反序列化一个xml字符串

> ID：10805344
> 
> 赞同：4
> 
> 时间：2012-05-29T19:22:05.883
> 
> 标签：c#, .net, xml, serialization

我试图反序列化一个 xml 字符串，但我没有反序列化对象。

我的 xml 字符串看起来像

```
<Cars>
    <Car>
        <Id>123445</Id>
        <BMW>
          <Id>78945</Id>
        </BMW>
    </Car>
</Cars> 
```

```
[Serializable()]
[XmlRoot("Cars")]
public class Cars
{
    [XmlArrayItem("Car",typeof(Car))]
    public Car[] Car { get; set; }
}

[Serializable()]
public class Car
{
    [XmlElement("Id")]
    public long Id { get; set; }

    [XmlArrayItem("BMW",typeof(BMW))]
    public BMW[] BMW { get; set; }
}

[Serializable()]
public class BMW
{
    [XmlElement("Id")]
    public long Id { get; set; }
} 
```

这是我正在尝试的代码：

```
string str = "xml string like above";
XmlSerializer ser = new XmlSerializer(typeof(Cars));
var wrapper = (Cars) ser.Deserialize(new StringReader(str)); 
```

而且我里面确实有几个子数组对象，比如里面的宝马。但它不是序列化汽车。有人可以在这里指出我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:26:23.950

尝试使用`XmlElement`，而不是`XmlArrayItem`因为项目没有封装标签：

```
[Serializable()]
[XmlRoot("Cars")]
public class Cars
{
    [XmlElement("Car",typeof(Car))]
    public Car[] Car { get; set; }
}

[Serializable()]
public class Car
{
    [XmlElement("Id")]
    public long Id { get; set; }

    [XmlElement("BMW",typeof(BMW))]
    public BMW[] BMW { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:26:53.187

尝试将预期对象序列化为 xml 并进行比较。（Serialize 方法甚至比 Deserialize 更容易。）这可能会突出显示错误放置或错误命名的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:34:16.933

I have several suggestions and a nice working example for you. First of all, I suggest a different class structure that takes advantage of class hierarchy.

**Here is what you need:**

*   CarList - A wrapper class for managing your list of Cars
*   Car - A class that provides all of the basic Car properties and methods
*   BMW - A specific type of Car class. It inherits the parent Car class and provides additional properties and methods.

When you want to add more Car types, you would create another class and have it also inherit from the Car class.

**On to the code...**

Here is your CarList class. Notice that the List of Car objects has multiple XmlElement declarations on it. This is so that the serialization/de-serialization knows how to handle the different Car types. As you add more types, you will have to add a line here to describe the type.

Also, notice the static Save and Load methods that handle the serialization/de-serialization.

```
[XmlRoot("CarList")]
public class CarList
{
  [XmlAttribute("Name")]
  public string Name  { get; set; }

  [XmlElement("Cars")]
  [XmlElement("BWM", typeof(BMW))]
  [XmlElement("Acura", typeof(Acura))]
  //[XmlArrayItem("Honda", typeof(Honda))]
  public List<Car> Cars  { get; set; }

  public static CarList Load(string xmlFile)
  {
    CarList carList = new CarList();
    XmlSerializer s = new XmlSerializer(typeof(CarList));
    TextReader r = new StreamReader(xmlFile);
    carList = (CarList)s.Deserialize(r);
    r.Close();
    return carList;
  }

  public static void Save(CarList carList, string fullFilePath)
  {
    XmlSerializer s = new XmlSerializer(typeof(CarList));
    TextWriter w = new StreamWriter(fullFilePath);

    // use empty namespace to remove namespace declaration
    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
    ns.Add("", "");

    s.Serialize(w, carList, ns);
    w.Close();
  }
} 
```

Next, here is your Car class...

```
public class Car
{
  // put properties and methods common to all car types here
  [XmlAttribute("Id")]
  public long Id { get; set; }
} 
```

And finally, your specific Car types...

```
public class BMW : Car
{
  // put properties and methods specific to this type here
  [XmlAttribute("NavVendor")]
  public string navigationSystemVendor { get; set; }
}

public class Acura : Car
{
  // put properties and methods specific to this type here
  [XmlAttribute("SunroofTint")]
  public bool sunroofTint { get; set; }
} 
```

Load your CarList like this:

```
CarList carList = CarList.Load(@"C:\cars.xml"); 
```

Make some changes, then Save your CarList like this:

```
CarList.Save(carList, @"C:\cars.xml"); 
```

And here is what the XML looks like:

```
<?xml version="1.0" encoding="utf-8"?>
<CarList Name="My Car List">
  <BWM Id="1234" NavVendor="Alpine" />
  <Acura Id="2345" SunroofTint="true" />
</CarList> 
```

Hope that helps get you started in the right direction!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:14:05.647

我想我发现了问题所在。我没有包括我在 xml 中返回的所有属性。如果您错过任何属性，反序列化将不起作用。我还像这样添加了这一行：

```
[XmlArray(Form = XmlSchemaForm.Unqualified),
     XmlArrayItem("BMW", typeof(BMW), Form = XmlSchemaForm.Unqualified, IsNullable = false)]
    public BMW[] BMWs { get; set; } 
```

如果你的 xml 有这样的东西：

```
<Cars>
  <Car>
    <Id>123445</Id>
    <BMWs>
       <BMW>
          <Id>78945</Id>
       <BMW>
    </BMWs>
  </Car>
</Cars> 
```

然后它起作用了。我没有任何 XSD 或模式来生成我的理想对象。

# jakarta-ee - 如何为 sitemesh 过滤器的多个 url 模式配置 web.xml。我相信我正在使用 servlet api 2.5

> ID：10805349
> 
> 赞同：0
> 
> 时间：2012-05-29T19:22:20.220
> 
> 标签：jakarta-ee, servlets, servlet-filters, sitemesh, url-pattern

我一直在努力为使用 Spring mvc 3.0.5 sitemesh 2.4.2.my 容器是 tomcat 6.0.26 的网站启用多个 ulr-pattern 我的 pom 看起来像这样：

```
 <dependency>
   <groupId>org.freemarker</groupId>
     <artifactId>freemarker</artifactId>
            <version>2.3.14</version>
 </dependency>
 <dependency>
   <groupId>opensymphony</groupId>
      <artifactId>sitemesh</artifactId>
          <version>2.4.2</version>
            <scope>compile</scope>
 </dependency>
  <dependency>
    <groupId>javax.servlet.jsp</groupId>
      <artifactId>jsp-api</artifactId>
      <version>2.1</version>
      <scope>provided</scope>
  </dependency>
  <dependency>
      <groupId>javax.servlet</groupId>
       <artifactId>servlet-api</artifactId>
          <version>2.5</version>
          <scope>provided</scope>
  </dependency> 
```

我正在使用另一种视图技术，即 ZK 用于应用程序的管理站点。

sitemesh 应该照顾`/site/*`并让`/admin/*`一切都很好，直到本周我想为应用程序添加移动 wap 视图。我不提供任何类型的网站重定向，`m.mysite.com`或者`mysite.mobi`，我只是使用`spring mvc`请求映射来获得 `/wap/*` 指向相同的控制器和动作`/site/*`。所以我的问题是告诉sitemesh也要处理`/wap/*`。

我的 web.xml 看起来像这样：

```
<servlet>
    <servlet-name>sitemesh-freemarker</servlet-name>
    <servlet-class>freemarker.ext.servlet.FreemarkerServlet</servlet-class>
    <init-param>
        <param-name>TemplatePath</param-name>
        <param-value>/WEB-INF/ui/views</param-value>
    </init-param>
    <init-param>
        <param-name>NoCache</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>ContentType</param-name>
        <param-value>text/html; charset=UTF-8</param-value>
        <!-- Forces UTF-8 output encoding! -->
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<!--  FreeMaker section   -->

<servlet-mapping>
    <servlet-name>sitemesh-freemarker</servlet-name>
    <url-pattern>*.ftd</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>sitemesh-freemarker</servlet-name>
    <url-pattern>*.ftl</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>sitemesh-freemarker</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>sitemesh-freemarker</servlet-name>
    <url-pattern>*.dec</url-pattern>
</servlet-mapping>

<!--  End FreeMaker section  -->

<!-- Sitemesh -->

<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
</filter>
<!--  Sitemesh   -->
<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/site/*</url-pattern> <!--this is decorated-->
    <url-pattern>/wap/*</url-pattern> <!--this is not -->
    <!--<dispatcher>FORWARD</dispatcher>-->
    <!--<dispatcher>REQUEST</dispatcher>-->
</filter-mapping>

<!--this bellow doesn't work as page not decorated-->
<!--<filter-mapping>-->
    <!--<filter-name>sitemesh</filter-name>-->
    <!--<url-pattern>/wap/*</url-pattern>-->
<!--</filter-mapping>-->
<!-- End of Sitemesh   --> 
```

根据[coderanch](http://www.coderanch.com/t/485819/Servlets/java/Multiple-url-pattern-filter-mapping)的说法，尽管这与站点网格无关，但两者都应该可以工作。我认为这无关紧要，因为`siteMeshFilter`实施`javax.servlet.Filter`

这是我的 HomeController 动作

```
@RequestMapping("/")
public String index(HttpServletRequest request) {
    final org.springframework.mobile.device.Device device = DeviceUtils.getCurrentDevice(request);

    if(device.isMobile()){
        return "redirect:/site/waphome";
    } else {
        return "redirect:/site/home";
    }

}

@RequestMapping(value = {"/site","/site/home","/site/home","/wap","/wap/","/wap/home"})
public String home(Model model, HttpServletRequest request, HttpSession session) {
    final org.springframework.mobile.device.Device device = DeviceUtils.getCurrentDevice(request);

   // ....

    if(device.isMobile()){
        return "waphome";
    } else {
        return "home";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:45:34.930

没关系，我忘了把模式放在 decorator.xml

# java - 更改原始图像文件的颜色权重

> ID：10805356
> 
> 赞同：1
> 
> 时间：2012-05-29T19:22:44.423
> 
> 标签：java, python, image-processing, rgb

我正在做一个望远镜项目，我们正在测试 CCD。每当我们拍照时，事物都会略带粉红色，我们需要真实的色彩来正确成像银河物体。我打算在 python 或 java 中编写一个小程序来更改颜色权重，但是如何访问原始数据文件（它是 rgb.bin）中颜色的权重？

我们正在使用拜耳矩阵算法将单色文件转换为彩色文件，我想问题来自那里，但我想用一个小的颜色校正程序来解决它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:10:57.517

典型的白平衡问题是由照明场景的光线构成中的红、绿和蓝比例不同或传感器对这些颜色的敏感度不同引起的。这些误差通常是线性的，因此您可以通过乘以误差的倒数来校正它们。

假设您测量一个您期望完全为白色的点，其 RGB 值为 (248,237,236)，即粉红色。如果将图像中的每个像素乘以 (248/248,248/237,248/236)，您最终将获得正确的平衡。

您绝对应该确保您的拜耳过滤器首先产生正确的结果，否则线性误差的基本假设将不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:34:41.600

Java中有一些对图像处理有用的东西，尝试使用`BufferedImage`该类，这里我给你一个Javadoc的链接，你可以打开常见格式的图像并使用它`BufferedImage`来访问每个像素的颜色或灰度。

[缓冲图像](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)

我不知道蟒蛇。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:39:54.793

您可能想查看[Python 图像库 (PIL)](http://www.pythonware.com/products/pil/)。我将让您以各种格式加载图像并访问其颜色值。

我不熟悉*rgb.bin*图像格式，但如果“权重”意味着简单地调整各种 RGB 类型值，那么 PIL 可能值得研究（[PIL 文档 pdf](http://infohost.nmt.edu/tcc/help/pubs/pil.pdf)）

请注意，PIL 官方支持最多 Python v2.7（欢迎页面显示为 v2.6，但实际上是 v2.7 - 请参阅下载页面），但是 Python v3 有一个非官方版本的 PIL .x 可从 [Unofficial Windows Binaries for Python Extension Packages](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)站点获得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T20:56:54.237

如果您的图像出现偏色（粉红色），摄影师修复它的方法是调整图像的白平衡。

这里有一个很好的讨论实现自动白平衡校正算法：[白平衡算法](https://stackoverflow.com/questions/1175393/white-balance-algorithm)

由于您已经生成了一个包含二进制 RGB 值的文件，因此我假设您能够将其重新解析为数据结构以进行进一步处理。将 RGB 像素放入缓冲区后，您将希望将它们转换为等效的 HSB（色调、饱和度、亮度），因为更改图像的色调本质上是对每个像素色调的全局操作。Java [Color](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html)类包含用于执行 HSB<->RGB 转换的方法。

# juice-ui - 无法访问 JuiceUI 对话框中的控件

> ID：10805359
> 
> 赞同：0
> 
> 时间：2012-05-29T19:22:56.460
> 
> 标签：juice-ui

当我进行回发时，我放置在 Juice UI 对话框中的 asp.net 控件的值是空的。

下面是客户端对话代码。文本框和下拉列表都不会保留它们的值。因此，当我在文本框中键入内容并尝试在服务器端使用 mTxtAddNote.Text 访问它时，它是空的。

我做错了什么，或者这只是使用 JuiceUI 对话框的限制，我必须解决这个问题？

```
<div id="dlgAddNote" title="LOA Application" runat="server">
    <div class="pagetitle" style="padding-bottom: 10px;">
        Add Note:
    </div>
    <div>
        <table cellpadding="5" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="width: 1%; white-space: nowrap; padding-right: 15px; vertical-align: top;" class="boldtext">
                    Type:
                </td>
                <td style="vertical-align: top;">
                    <asp:DropDownList ID="mDdlNoteType" runat="server"></asp:DropDownList>
                </td>
            </tr>
            <tr>
                <td style="width: 1%; white-space: nowrap; padding-right: 15px; vertical-align: top;" class="boldtext">
                    Note:
                </td>
                <td style="vertical-align: top;">
                    <asp:TextBox runat="server" ID="mTxtAddNote" Columns="50" TextMode="MultiLine" Rows="5" />
                </td>
            </tr>
        </table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:27:52.550

我已经确认这是一个错误并为此创建了一个问题。你可以在这里跟踪它的进度[https://github.com/appendto/juiceui/issues/24](https://github.com/appendto/juiceui/issues/24)

**编辑**

刚刚对此进行了修复。该修复将在 Juice UI 的下一个维护版本中进行。感谢您报告它。

# javadoc - 我可以避免在 getter/setter 方法中重复字段的 Javadoc 注释吗？

> ID：10805365
> 
> 赞同：8
> 
> 时间：2012-05-29T19:23:24.940
> 
> 标签：javadoc, dry, getter-setter

我想为每个字段编写一次 Javadoc 注释，并在 getter 和 setter 方法中访问现有字段的 Javadoc。

我知道有`{@inheritDoc}`引用父方法文档的标签，但我想包含一个字段的文档，这当然不是父方法。

使用 Javadoc 是否可以“不要重复自己”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:29:52.117

除了`@see`，不知道如何。

但是，如果您正在生成内部文档，则实际上不需要记录 getter/setter。如果您正在生成外部文档，则无论如何您都不会记录私有属性。

（说实话，由于 Java 工具链中的各种限制，我曾经有一组相当壮观的脚本/等，它们可以处理 Java 源代码并做类似这样的神奇事情。我前段时间放弃了它，现在IDE 要好得多，但也有一些东西，比如将多个文件编入单个类等等，这些东西*真的很*方便。有点像假的 mixins，一些 doc 魔术等）

（实际上，链接到的 Spoon 项目与我正在做的非常相似，但在 1.5 之前。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T07:01:49.183

我在我的 getter 上添加 javadoc 注释并`{@link MyObject#get..()}`在字段上添加一个。

因此，对于我的 API/对象的用户来说，它很容易阅读，如果我想获得更多信息，我（或其他开发人员）只需将鼠标悬停在我的私有字段上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-11T02:00:51.217

[使用Project Lombok](http://projectlombok.org/)可以避免这种样板文件。只需记录字段变量，即使它是`private`，并让 Lombok 注释生成正确记录的 getter 和 setter。

对我来说，光是这个好处就值得[付出代价](http://jnb.ociweb.com/jnb/jnbJan2010.html#costbenefit)。

# python - 在pyparsing中将用户定义的参数传递给setParseAction

> ID：10805368
> 
> 赞同：2
> 
> 时间：2012-05-29T19:23:39.810
> 
> 标签：python, pyparsing

我有类似以下的内容（简化版）

```
class ParseClass(object):
    def __init__(self, tokens):
         # do some processing on tokens

expr = Word().setParseAction(ParseClass) 
```

有没有办法将一些用户定义的参数发送到ParseClass的**init函数？**像一些上下文等。所以我会有 -

```
class ParseClass(object):
    def __init__(self, tokens, context):
         # do some processing on tokens based on context

expr = Word().setParseAction(ParseClass, context) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:43:50.097

我希望如果前者有效，那么后者可以通过以下方式完成：

```
expr = Word().setParseAction(lambda tokens: ParseClass(tokens,context) ) 
```

但我不知道pyparsing。（如果它不起作用，我会很乐意删除它）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T22:20:31.870

使用一个函数来获取你的上下文，并返回适当的解析操作作为它的返回值：

```
def replaceWith(replacementString):
    def parseAction(string, loc, tokens):
        return replacementString
    return parseAction

expr = Word(alphas).setParseAction(replaceWith("xyzzy"))

print OneOrMore(expr).parseString("The quick brown fox jumps over the lazy dog.") 
```

印刷：

```
['xyzzy', 'xyzzy', 'xyzzy', 'xyzzy', 'xyzzy', 'xyzzy', 'xyzzy', 'xyzzy', 'xyzzy'] 
```

或者使用 transformString：

```
>>> print expr.transformString("The quick brown fox jumps over the lazy dog.")
xyzzy xyzzy xyzzy xyzzy xyzzy xyzzy xyzzy xyzzy xyzzy. 
```

# weblogic11g - 我在哪里可以获得 WebLogic 11g 的副本？

> ID：10805374
> 
> 赞同：0
> 
> 时间：2012-05-29T19:24:11.430
> 
> 标签：weblogic11g

我编程的组织刚刚将我们从 WebLogic 9.2 升级到 WebLogic 11g。该组织非常庞大，而网络组对成为黑盒这一点反应迟钝。

我去了 Oracle 网站，只能找到下载 WebLogic 12 的链接。

我在哪里可以获得包含 Eclipse 的所有内容的 WebLogic 11g 副本？

WebLogic 10.3.6 == WegLogic 11g 吗？

我讨厌问这样一个愚蠢的问题，但甲骨文并不容易找到他们的东西，即使是谷歌。

提前感谢任何线索。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:07:24.947

我刚刚发现，一旦登录 Oracle 技术网络，WebLogic 11g 的链接就会变得可见。HTH 别人。

# google-maps - 谷歌地图不使用 jquery-ui-map 放大过滤/新标记的边界

> ID：10805377
> 
> 赞同：1
> 
> 时间：2012-05-29T19:24:33.067
> 
> 标签：google-maps, google-maps-api-3, jquery-ui-map

我正在为我的**Google Map使用**[这个 jQuery 插件](http://code.google.com/p/jquery-ui-map/)。

 **我有一个小表格，用于过滤地图上的标记。

标记是使用`$('#map_canvas').gmap('addMarker', {...})`插件的函数创建的，使用该函数创建标记时我可以传递的属性之一是`bounds:true`. 它的作用是 - 当所有标记都被创建和显示时，地图应该放大到地图上所有标记的边界。

***问题是***- 由于某种原因，当我过滤（按**提交**按钮）时，地图不会放大到新标记的边界。它只是停留在原来的位置。

这是为什么？如何使其放大到新标记的范围？

*jQuery* :

```
// when map is initialized, plot all the markers    
$('#map_canvas').gmap(mapOptions).bind('init', function(){
                        $.getJSON('myscript.php', function(json){
                            var theMarkers = json;
                            $.each(theMarkers, function(i, val) {
                                $('#map_canvas').gmap('addMarker', { 'position': new google.maps.LatLng(val.Lat, val.Lng), 'bounds':true, 'icon':'myicon.png' } ).click(function(){                             
                                    $('#map_canvas').gmap('openInfoWindow', { 'content': '<h1>'+val.Name+'</h1>'+'<h2 style="color: grey">'+val.Address+'</h2><p style="color: green">'+val.Telephone+'</p>' }, this);
                                });                     
                            });
                        }); 

                    });

                    // upon clicking submit button - clear old markers and plot newly filtered ones on the map
                    $('#myform').on('submit', function(e) {
                        $('#map_canvas').gmap('clear', 'markers');
                        e.preventDefault();
                        var myData = $('#myform').serializeArray();
                        $.getJSON('myscript.php', myData, function(json){
                            var theMarkers = json;
                            $.each(theMarkers, function(i, val) {
                                $('#map_canvas').gmap('addMarker', { 'position': new google.maps.LatLng(val.Lat, val.Lng), 'bounds':true, 'icon':'myicon.png' } ).click(function(){                             
                                    $('#map_canvas').gmap('openInfoWindow', { 'content': '<h1>'+val.Name+'</h1>'+'<h2 style="color: grey">'+val.Address+'</h2><p style="color: green">'+val.Telephone+'</p>' }, this);
                                });                     
                            });

                        }); 
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:45:47.707

```
$('#map_canvas').gmap('set', 'bounds', null); 
```

原来你必须重新设置界限。在绘制/创建标记之前。

[http://code.google.com/p/jquery-ui-map/issues/detail?id=42](http://code.google.com/p/jquery-ui-map/issues/detail?id=42)**

# javascript - Fancybox 在同一个弹出窗口中打开超链接

> ID：10805385
> 
> 赞同：0
> 
> 时间：2012-05-29T19:25:00.087
> 
> 标签：javascript, jquery, html, fancybox

我正在使用fancybox iframe（可以在iframe演示中看到） [http://fancyapps.com/fancybox/demo/](http://fancyapps.com/fancybox/demo/)

这是我正在使用的代码

```
 <p><a class="fancybox fancybox.iframe" href="items/item1.html"><span>Item 1</span></a> 
```

然后我有 item1.html 具有以下代码：

```
<h3>Item 1</h3>
Blah blah blah text here
<a href="http://www.google.com"><img src="https://www.google.com/images/srpr/logo3w.png" width="160" height="25" border="0" alt="Google logo" /></a> 
```

Fantasybox 弹出窗口工作并在单击项目 1 链接后弹出，但是，一旦 fancybox 打开并且我可以看到 blahblah 文本以及 google 徽标，当我单击徽标时 - www.google.com 应该加载但事实并非如此。我究竟做错了什么？

谢谢，

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:03:26.863

是在fancybox里面打开的问题吗？如果是这样，您可以将 target="_blank" 添加到 href 中，它将在新选项卡/窗口中打开。文档中的 iFramed html 将如下所示：

```
<h3>Item 1</h3>
  Blah blah blah text here
  <a target="_blank" href="http://www.google.com">
     <img src="https://www.google.com/images/srpr/logo3w.png" width="160" height="25" border="0" alt="Google logo" />
  </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:13:01.847

您无法在 fancybox 或任何其他灯箱中打开 goolge，请查看[https://stackoverflow.com/a/8808761/1055987](https://stackoverflow.com/a/8808761/1055987)了解更多信息。

将其更改为任何其他 URL，最好是您自己的一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:34:08.843

[`X-Frame-Options`](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)具有敏感用户数据的网站通常会通过在其页面中添加一个称为 HTTP 标头的方式来阻止框架，以防止[点击劫持](https://www.owasp.org/index.php/Clickjacking)攻击。除了通过您自己的服务器代理页面之外，您无能为力。

# python - python/genshi 如何生成动态 XML 元素

> ID：10805391
> 
> 赞同：0
> 
> 时间：2012-05-29T19:25:20.297
> 
> 标签：python, xhtml, escaping, genshi

我在 Python 中直接使用 Genshi 使用包含大部分 XML 内容的模板来生成 XML。但是，模板中的一些 XML 元素应该获取由 Python 程序动态生成的子元素。

这些是我用于 Genshi 渲染的参数（在 Python 中）：

```
stream.render(method='xml', encoding="utf-8", out=outfile_fp, doctype=None) 
```

Genshi 模板的片段：

```
<mrp:Description py:if="description != None">
    <mrp:XHTMLWithLinks>${description}</mrp:XHTMLWithLinks>
</mrp:Description> 
```

示例值（在 Python 中）：

```
description = "<p>foo&bar</p>" 
```

实际上，这些值更复杂并且是有效的 XHTML。从模板的角度来看，它们的结构是不可预测的。

Genshi 将其呈现为以下输出：

```
<mrp:Description>
    <mrp:XHTMLWithLinks>&lt;p&gt;foo&amp;bar&lt;/p&gt;</mrp:XHTMLWithLinks>
</mrp:Description> 
```

所以它对特殊的 XML 字符进行 XML 转义。

一方面，我对此表示同情，另一方面，我不清楚如何解决我的问题。

奇怪的是，我在这里找到了一些将 XML 作为变量值的答案，并且似乎表明 Genshi 没有对它们进行 XML 转义，例如[here](https://stackoverflow.com/questions/1257746/python-genshi-newline-to-html-p-paragraphs)和[here](https://stackoverflow.com/questions/2123162/what-is-the-method-of-doing-nl2br-in-genshi)。

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:52:38.407

您应该能够将描述字符串包装在[标记实例](http://genshi.edgewall.org/wiki/GenshiFaq#HowcanIincludeliteralXMLintemplateoutput)中。就像是

```
from genshi.core import Markup 
description = Markup(description) 
```

# android - MonoDroid：无法调试到 Android 4.0.3 设备

> ID：10805393
> 
> 赞同：2
> 
> 时间：2012-05-29T19:25:25.377
> 
> 标签：android, debugging, monodevelop, xamarin.android, tablet

我们能够调试到其他设备，但我们的新 Android 4.0.3 ASUS Transformer Prime 平板电脑在尝试通过 Mac 上的 MonoDevelop 为 Android 代码调试 Mono 时出错。日食有效。如果我们手动将 APK 部署到设备上，它就可以工作。

如果我们将应用程序编译为 APK 并手动将其部署到设备上，它就可以正常工作。

当我们从 MonoDevelop 调试应用程序时，我们会得到这个日志转储：

```
05-29 11:37:29.460: I/ActivityManager(194): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.newyork.locker/police.locker.SplashScreen bnds=[592,202][688,298]} from pid 534
05-29 11:37:29.570: D/dalvikvm(3958): Late-enabling CheckJNI
05-29 11:37:29.590: I/ActivityManager(194): Start proc com.newyork.locker for activity com.newyork.locker/police.locker.SplashScreen: pid=3958 uid=10089 gids={3003, 1015, 1006}
05-29 11:37:29.640: I/dalvikvm(3958): Turning on JNI app bug workarounds for target SDK version 10...
05-29 11:37:29.640: D/WindowManager(194): adjustConfigurationLw, config:{1.0 0mcc0mnc (no locale) layoutdir=0 sw800dp w800dp h1232dp xlrg port ?uimode ?night finger -keyb/v/h -nav/v} mLidOpen:-1 mHasDockFeature:true mHasHallSensorFeature:true config.hardKeyboardHidden:2
05-29 11:37:29.650: D/OpenGLRenderer(534): Flushing caches (mode 1)
05-29 11:37:29.680: D/OpenGLRenderer(534): Flushing caches (mode 0)
05-29 11:37:29.720: I/ActivityThread(3958): Pub com.newyork.locker.__mono_init__: mono.MonoRuntimeProvider
05-29 11:37:29.720: D/dalvikvm(3958): Trying to load lib /data/data/com.newyork.locker/lib/libmonodroid.so 0x410c6120
05-29 11:37:29.720: D/dalvikvm(3958): Added shared lib /data/data/com.newyork.locker/lib/libmonodroid.so 0x410c6120
05-29 11:37:29.740: E/mono(3958): WARNING: The runtime version supported by this application is unavailable.
05-29 11:37:29.740: E/mono(3958): Using default runtime: v2.0.50727
05-29 11:37:29.800: I/monodroid-gc(3958): environment supports jni NewWeakGlobalRef
05-29 11:37:29.800: I/mono(3958): Stacktrace:
05-29 11:37:30.540: I/ActivityManager(194): Process com.newyork.locker (pid 3958) has died.
05-29 11:37:30.540: W/ActivityManager(194): Force removing ActivityRecord{416425a0 com.newyork.locker/police.locker.SplashScreen}: app died, no saved state
05-29 11:37:30.550: D/Zygote(108): Process 3958 terminated by signal (11)
05-29 11:37:30.560: D/WindowManager(194): adjustConfigurationLw, config:{1.0 0mcc0mnc (no locale) layoutdir=0 sw800dp w800dp h1232dp xlrg port ?uimode ?night finger -keyb/v/h -nav/v} mLidOpen:-1 mHasDockFeature:true mHasHallSensorFeature:true config.hardKeyboardHidden:2
05-29 11:37:30.580: W/InputManagerService(194): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4159d858 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:42:01.707

关闭快速部署修复了它。

![在此处输入图像描述](../Images/184f7612cd26a53d2f94d24b9449546f.png)

# apache-flex - 自定义轴渲染器

> ID：10805395
> 
> 赞同：0
> 
> 时间：2012-05-29T19:25:27.223
> 
> 标签：apache-flex, flex4, flex-spark, flex-charting, flex-charts

我正在使用`LineChart`a`CategoryAxis`作为水平轴，我需要每个类别都有一个非常自定义的格式显示。Using`CategoryAxis.LabelFunction`对于我的目的来说还不够强大，因为它只允许对 Label 对象的文本字段进行自定义格式设置。特别是对于这个项目，我需要每个类别都是两个不同多行标签的网格或 HGroup。左标签需要左对齐，右标签需要右对齐。

我尝试创建一个自定义类，`extends Group`并且`implements IDataRenderer`. 但是，在`public function set data(value:Object)`中定义的`IDataRenderer`，似乎总是以值作为`AxisLabel`对象调用，它不会在其中传递对象，只是一个字符串 ( `AxisLabel.text`)

* * *

作为 hack-ey 的替代方案，我尝试使用 LabelFunction 来传递编码字符串，但即使这样也会导致问题。不知何故，这段代码不会在 CategoryAxis 上显示任何内容：

```
public class HeatmapAxisLabelRenderer 
extends HGroup
implements IDataRenderer
{
public function HeatmapAxisLabelRenderer()
{
    super();

    this.includeInLayout = true;
    this.visible = true;

    this.width = 100;
    this.height = 40;
//      this.percentWidth = 100;
//      this.percentHeight = 100;
}

// Internal variable for the property value.
private var _data:Object;

// Make the data property bindable.
[Bindable("dataChange")]

// Define the getter method.
public function get data():Object {
    return _data;
}

// Define the setter method, and dispatch an event when the property
// changes to support data binding.
public function set data(value:Object):void {
    _data = value;

    if (value is AxisLabel && AxisLabel(value).text!=null) {
        var parts:Array = AxisLabel(value).text.split("|~|");
        if (parts.length != 2) return;

        var name:Label = new Label();
        name.text = parts[0];
        name.setStyle("textAlign","left");
        name.width = 100;

        var limit:Label = new Label();
        limit.text = parts[1];
        limit.setStyle("textAlign","right");
        limit.width = 100;

        this.addElement(name);
        this.addElement(limit);

        dispatchEvent(new FlexEvent(FlexEvent.DATA_CHANGE));
    } else {
        trace("renderer bad value");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:41:33.347

问题似乎是`Group`and之间的奇怪交互`AxisRenderer`，以及您的渲染器 (an `HGroup`) 具有显式宽度/高度值（在其构造函数中设置）的事实：

在您的自定义渲染器上设置后`data`，AxisRenderer` 告诉自定义渲染器使其大小无效。

这样做时，`Group`正确的决定不做任何事情，因为它具有明确的宽度/高度。

我进行了一些更改以使其正常工作：

*   只在构造函数中设置宽度
*   不要在子标签上设置宽度（你可能想玩这个）
*   使标签对象成为成员变量，并在创建子项中仅创建一次（数据的设置器可能会被频繁调用）

代码：

```
package
{
    import mx.charts.AxisLabel;
    import mx.core.IDataRenderer;
    import mx.events.FlexEvent;

    import spark.components.HGroup;
    import spark.components.Label;

    public class HeatmapAxisLabelRenderer extends HGroup implements IDataRenderer
    {
        public function HeatmapAxisLabelRenderer()
        {
            super();
            this.width=100;
        }

        private var _data:Object;

        [Bindable("dataChange")]
        public function get data():Object {
                return _data;
        }

        private var nameLabel:Label;
        private var limit:Label;

        override protected function createChildren():void
        {
            super.createChildren();
            if (!nameLabel)
            {
                nameLabel=new Label();
                nameLabel.setStyle("textAlign","left");
                limit = new Label();
                limit.setStyle("textAlign", "right");
                addElement(nameLabel);
                addElement(limit);
            }
        }

        public function set data(value:Object):void
        {
            if (_data === value)
                return;

            _data = value;
            if (value is AxisLabel && AxisLabel(value).text!=null)
            {
                var parts:Array = AxisLabel(value).text.split("|~|");
                if (parts.length == 2)
                {
                    nameLabel.text = parts[0];
                    limit.text = parts[1];
                }
            }
            else
            {
                trace("renderer bad value");
            }
            dispatchEvent(new FlexEvent(FlexEvent.DATA_CHANGE));
        }
    }
} 
```

# java - 为应用程序的登录屏幕执行基于 android 的 java 文件时出错

> ID：10805397
> 
> 赞同：0
> 
> 时间：2012-05-29T19:25:33.360
> 
> 标签：java, android, xml

我使用了一些示例代码并尝试使用用户名和密码为 android 应用程序构建登录屏幕。但是，我收到以下错误`"XYZ cannot be resolved or is not a field"`。

在我的程序中，文件`XYZ's`中的 :`tv`和`btn_ok`字段，以及文件`loginerror.java`中的 , 。`btn_sign_in``txt_username``txt_password``loginactivity.java`

这是我的代码`loginerror.java`...

```
 public class LoginError extends Activity {
          Button button;

          public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                System.gc();
                setContentView(R.layout.LoginError);

                TextView textview = (TextView) findViewById(R.id.tv);
                String loginMessage = getIntent().getStringExtra("LoginMessage");
                textview.setText(loginMessage);

                button = (Button) findViewById(R.id.btn_ok);
                button.setOnClickListener(new View.OnClickListener() {
                      public void onClick(View v) {
                            finish();
                      }
                });
          }
    }> 
```

这是我的代码`loginactivity.java`...

```
 import javax.xml.parsers.SAXParser;
    import javax.xml.parsers.SAXParserFactory;

    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.entity.UrlEncodedFormEntity;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.message.BasicNameValuePair;
    import org.apache.http.protocol.HTTP;
    import org.xml.sax.InputSource;
    import org.xml.sax.XMLReader;

    public class LoginActivity extends Activity {
          /** Called when the activity is first created. */
          private static final String TAG = "Login";
          Button signin;
          String loginmessage = null;
          Thread t;
          private SharedPreferences mPreferences; 
          ProgressDialog dialog;

          public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
                mPreferences = getSharedPreferences("CurrentUser", MODE_PRIVATE); 
                if (!checkLoginInfo()) { 
                      signin = (Button) findViewById(R.id.btn_sign_in);
                      signin.setOnClickListener(new OnClickListener() {
                            public void onClick(View v) {
                                  showDialog(0);
                                  t=new Thread() {
                                        public void run() {
                                              tryLogin();
                                        }
                                  };
                            t.start(); 
                            }
                      }); 
                }
                else {
                      /*Directly opens the Welcome page, if the username and password is already available 
                      in the SharedPreferences*/
                      Intent intent=new Intent(getApplicationContext(),Welcome.class);
                      startActivity(intent);
                      finish();
                } 
          }

          protected Dialog onCreateDialog(int id) {
                switch (id) {
                      case 0: {
                            dialog = new ProgressDialog(this);
                            dialog.setMessage("Speek is loading");
                            dialog.setIndeterminate(true);
                            dialog.setCancelable(true);
                            return dialog;
                      } 
                }
                return null;
          }
          private Handler handler = new Handler() {

                public void handleMessage(Message msg) {
                      String loginmsg=(String)msg.obj;
                      if(loginmsg.equals("SUCCESS")) {
                            removeDialog(0);
                            Intent intent=new Intent(getApplicationContext(),Welcome.class);
                            startActivity(intent);
                            finish(); 
                      }
                }
          }; 
          public void tryLogin() {
                Log.v(TAG, "Trying to Login");
                EditText etxt_user = (EditText) findViewById(R.id.txt_username);
                EditText etxt_pass = (EditText) findViewById(R.id.txt_password);
                String username = etxt_user.getText().toString();
                String password = etxt_pass.getText().toString(); 
                DefaultHttpClient client = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://www.speek.com");
                List nvps = new ArrayList();
                nvps.add(new BasicNameValuePair("username", username));
                nvps.add(new BasicNameValuePair("password", password));
                try {
                      UrlEncodedFormEntity p_entity = new UrlEncodedFormEntity(nvps,
    HTTP.UTF_8);
                      httppost.setEntity(p_entity);
                      HttpResponse response = client.execute(httppost);
                      Log.v(TAG, response.getStatusLine().toString());
                      HttpEntity responseEntity = response.getEntity();
                      Log.v(TAG, "Set response to responseEntity");

                      SAXParserFactory spf = SAXParserFactory.newInstance();
                      SAXParser sp = spf.newSAXParser();
                      XMLReader xr = sp.getXMLReader();
                      LoginHandler myLoginHandler = new LoginHandler();
                      xr.setContentHandler(myLoginHandler);
                      xr.parse(retrieveInputStream(responseEntity));
                      ParsedLoginDataSet parsedLoginDataSet = myLoginHandler.getParsedLoginData(); 
                      if (parsedLoginDataSet.getExtractedString().equals("SUCCESS")) {
                            // Store the username and password in SharedPreferences after the successful login
                            SharedPreferences.Editor editor=mPreferences.edit();
                            editor.putString("UserName", username);
                            editor.putString("PassWord", password);
                            editor.commit();
                            Message myMessage=new Message();
                            myMessage.obj="SUCCESS";
                            handler.sendMessage(myMessage); 
                      } else if(parsedLoginDataSet.getExtractedString().equals("ERROR")) { 
                            Intent intent = new Intent(getApplicationContext(), LoginError.class);
                            intent.putExtra("LoginMessage", parsedLoginDataSet.getMessage());
                            startActivity(intent); 
                            removeDialog(0);
                      } 
                } catch (Exception e) 
                { 
                      Intent intent = new Intent(getApplicationContext(), LoginError.class);
                      intent.putExtra("LoginMessage", "Unable to login");
                      startActivity(intent);
                      removeDialog(0);
                } 
          }
          private InputSource retrieveInputStream(HttpEntity httpEntity) {
                InputSource insrc = null;
                try {
                      insrc = new InputSource(httpEntity.getContent());
                } catch (Exception e) {
                }
                return insrc;
          } 
          //Checking whether the username and password has stored already or not
          private final boolean checkLoginInfo() {
                boolean username_set = mPreferences.contains("UserName");
                boolean password_set = mPreferences.contains("PassWord"); 
                if ( username_set || password_set ) {
                      return true;
                } 
                return false;
          } 
    } 
```

这是我的`main.xml`...

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      xmlns:android="http://schemas.android.com/apk/res/android" >

      <Button
            android:id="@+id/btn_sign_in"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="Sign In"
            android:layout_x="103dp"
            android:layout_y="197dp"/> 
      <EditText
            android:id="@+id/txt_username"
            android:layout_width="250dp"
            android:layout_height="wrap_content"
            android:hint="Username"
            android:singleLine="true"
            android:textSize="18sp"
            android:layout_x="40dp"
            android:layout_y="32dp" />
      <EditText
            android:id="@+id/txt_password"
            android:layout_width="250dp"
            android:layout_height="wrap_content"
            android:hint="Password"
            android:singleLine="true"
            android:textSize="18sp"
            android:password="true"
            android:layout_x="40dp"
            android:layout_y="86dp" />
</AbsoluteLayout> 
```

这是我的`loginerror.xml`档案...

```
 <?xml version="1.0" encoding="utf-8"?>
    <AbsoluteLayout
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          xmlns:android="http://schemas.android.com/apk/res/android" >
          <TextView 
                android:id="@+id/tv"
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:gravity="center_vertical|center_horizontal"/>
          <Button android:id="@+id/btn_ok" android:layout_width="80dp"
                android:layout_height="wrap_content" android:text="OK"
                android:layout_x="83dp" android:layout_y="60dp" />
    </AbsoluteLayout> 
```

错误发生在这些行...

```
1\.  TextView textview = (TextView) findViewById(R.id.tv);
2\.  button = (Button) findViewById(R.id.btn_ok);
3\.  signin = (Button) findViewById(R.id.btn_sign_in);
4\.  EditText etxt_user = (EditText) findViewById(R.id.txt_username);
    EditText etxt_pass = (EditText) findViewById(R.id.txt_password); 
```

我必须在主程序中添加任何东西来解决这个问题吗？问题是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:23:40.610

您可能使用了错误的 R 导入。如果你使用`android.R`比你发现你的问题。

如果我理解正确，您的 LoginError.java 文件是否在外部项目中？如果是这样，您将无法使用任何生成的 R 类内容。所以没有布局文件，没有drawable，`res`文件夹中没有任何东西。

如果您仍想使用外部项目，请查看[Android Library Project](http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject)。这可能会对您有所帮助，因为您可以在那里使用布局和可绘制对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:27:37.917

我不认为它可能那么简单，但无论如何：您是否在添加布局后刷新了 Eclipse（项目 - 清洁）中的项目？这在我身上经常发生。此外，即使它与问题无关， AbsoluteLayout 已被弃用，如果您确实需要绝对定位，您可以使用 RelativeLayout 及其 LayoutParams 的绝对值。

# javascript - `if` 条件仅适用于遇到的第一个 div

> ID：10805400
> 
> 赞同：0
> 
> 时间：2012-05-29T19:25:39.270
> 
> 标签：javascript, jquery, html, css

当页面根据 URL 中的目录加载时，我试图将一个类换成另一个类。我的代码适用`div`于我菜单中的第一个，但不适用于其他任何人。这是代码：

```
$('document').ready(function() {
    var pathname = window.location.pathname;
    pathname = pathname.replace('/MVC/', '');

    if (pathname == $('.navitem').attr('rel')) {
        $('.navitem[rel='+pathname+']').toggleClass('navitem selected_menu')
    }
}); 
```

HTML如下：

```
<div class="navitem" rel="dashboard"><a href="http://localhost/MVC/dashboard">Dashboard</a></div>
<div class="navitem" rel="chat"><a href="http://localhost/MVC/chat">Chat</a></div>
<div class="navitem" rel="users"><a href="http://localhost/MVC/user">Users</a</div> 
```

当 I 时`alert($('.navitem').attr('rel'))`，它总是返回第一个的`rel`值`div`。我如何让它查看所有这些而不是只查看第一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:29:19.570

您不能只使用一个比较操作，因为您必须检查所有`div`s。

```
$(".navitem").filter(function() {
  return $(this).attr("rel") === pathname;  // filter out the correct one(s)
}).toggleClass("navitem selected_menu"); 
```

顺便说一句，通常是`$(document).ready`. `$`尽管在 的情况下传递给什么并不重要`.ready`，但这是事实上的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:28:41.583

您需要使用每个循环遍历它们：

```
$('.navitem').each(function(){
    if (pathname == $(this).attr('rel')) {
        $(this).toggleClass('navitem selected_menu')
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:28:50.963

您需要使用循环。尝试这个：

```
$(".navItem").each(function () {
    if (pathname == $(this).attr('rel')) {
        $(this).toggleClass('navitem selected_menu')
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T19:29:03.477

无需检查任何东西，让选择器完成所有工作。

```
$('navitem[rel=' + pathname + ']').toggleClass('navitem selected_menu'); 
```

甚至不包括 if 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T19:50:35.820

尝试使用 JQuery 的 .each 方法来测试所有匹配的元素。像这样：

```
$('document').ready(function() {
    var pathname = window.location.pathname;
    pathname = pathname.replace('/MVC/', '');

    $('.navitem').each(function() {
        if ($(this).attr('rel') == pathname) {
            $(this).toggleClass('selected_menu');
        }
    });

}); 
```

# objective-c - 如何在 UINavigationController 的 bar 上方添加 UIImageView

> ID：10805401
> 
> 赞同：1
> 
> 时间：2012-05-29T19:25:40.580
> 
> 标签：objective-c, ios, uinavigationcontroller

我有基于 UINavigationController 的 UITableView。单击任何行应用程序后，切换到另一个具有 UINavigationController 的视图。在新视图中，我想在 UINavigationController 的栏上方添加 UIImageView 但不覆盖它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:06:51.633

（根据您的评论）这是我将图像放置在 y 坐标“上方”的方法，而不是子视图。

在新的视野中，

隐藏navigationController的navigationBar [navigationController.navigationBar setHidden:YES];

添加一个 UIToolbar，其原点是您感兴趣的，大小为 (320, 44)，假设您在 iPhone 上执行此操作，并且图像垂直位于该栏上方。

如果您转到导航栏上方没有图像的旧/上一个视图，请记住取消隐藏导航栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:56:06.373

将您的 UIImageView 添加为 self.navigationController.view 的子视图，并提供接近或小于零的坐标以将其定位到高于 UINavigationBar 的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:18:16.827

我找到了更简单的解决方案。只需要设置self.navigationController.navigationBar所需的frame坐标： `[self.navigationController.navigationBar setFrame:CGRectMakeCoordinates];`

# objective-c - AVMutableComposition 旋转视频

> ID：10805404
> 
> 赞同：14
> 
> 时间：2012-05-29T19:25:47.370
> 
> 标签：objective-c, ios, avfoundation, avmutablecomposition

我最近发现了一个使用 AVMutableComposition 的问题，我正在寻找对此的一些见解。

我希望能够以两个方向录制视频 - 横向和横向。当我以横向方式录制视频时（主页按钮在右侧），它们会被添加到合成中并以正确的方向播放。但是，如果我以左方（左侧的主页按钮）录制它，这些剪辑会颠倒播放。

但是，如果它们被插入到作品中，它们只会被颠倒播放。否则，他们会以正确的方向播放。为什么构图反转了横向拍摄的剪辑的旋转？我怎样才能解决这个问题？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-02-24T05:59:47.897

如果您只想保持原始旋转，这是一种稍微简单的方法。

```
// Grab the source track from AVURLAsset for example.
AVAssetTrack *assetVideoTrack = [asset tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Grab the composition video track from AVMutableComposition you already made.
AVMutableCompositionTrack *compositionVideoTrack = [composition tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Apply the original transform.    
if (assetVideoTrack && compositionVideoTrack) {
   [compositionVideoTrack setPreferredTransform:assetVideoTrack.preferredTransform];
}

// Export... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T17:37:23.197

解决了我的问题。终于能够旋转轨道并将其转换为框架。奇迹般有效。

```
 //setting up the first video based on previous recording
    CMTimeRange videoDuration = CMTimeRangeMake(kCMTimeZero, [self.previousRecording duration]);
    AVAssetTrack *clipVideoTrack = [[self.previousRecording tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVAssetTrack *clipAudioTrack = [[self.previousRecording tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    [compositionVideoTrack insertTimeRange:videoDuration ofTrack:clipVideoTrack atTime:nextClipStartTime error:nil];
    [compositionAudioTrack insertTimeRange:videoDuration ofTrack:clipAudioTrack atTime:nextClipStartTime error:nil];

    //our first track instruction - set up the instruction layer, then check the orientation of the track
    //if the track is in landscape-left mode, it needs to be rotated 180 degrees (PI)
    AVMutableVideoCompositionLayerInstruction *firstTrackInstruction =
         [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:clipVideoTrack];

    if([self orientationForTrack:clipVideoTrack] == UIDeviceOrientationLandscapeLeft) {
        CGAffineTransform rotation = CGAffineTransformMakeRotation(M_PI);
        CGAffineTransform translateToCenter = CGAffineTransformMakeTranslation(640, 480);
        CGAffineTransform mixedTransform = CGAffineTransformConcat(rotation, translateToCenter);
        [firstTrackInstruction setTransform:mixedTransform atTime:kCMTimeZero];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-01T10:46:59.317

我认为答案肯定是最好的选择，但它只是部分正确。实际上，为了让它发挥作用，我们还得调整导出的渲染大小、翻转高度和纵向轨道自然大小的宽度。

我刚刚对其进行了测试，并且还引用了 AVFoundation Programming Guide - Editing 部分，该部分建议实施@dizy 的答案中实际建议的内容，但添加了提到的内容：

*所有 AVAssetTrack 对象都有一个 preferredTransform 属性，该属性包含该资产轨道的方向信息。只要资产轨道显示在屏幕上，就会应用此转换。在前面的代码中，图层指令的变换设置为资产轨道的变换，以便在* **调整其渲染大小后，新合成中的视频可以正确显示。**

那么代码应该是这样的（只需添加两行）：

```
// Grab the source track from AVURLAsset for example.
AVAssetTrack *assetVideoTrack = [asset tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Grab the composition video track from AVMutableComposition you already made.
AVMutableCompositionTrack *compositionVideoTrack = [composition tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Apply the original transform.    
if (assetVideoTrack && compositionVideoTrack) {
   [compositionVideoTrack setPreferredTransform:assetVideoTrack.preferredTransform];
}

flippedSize = CGSize(compositionVideoTrack.naturalSize.height, compositionVideoTrack.naturalSize.width);
composition.renderSize = flippedSize;

// Export.. 
```

# haskell - 使用 HOOPL 优化数据流

> ID：10805406
> 
> 赞同：5
> 
> 时间：2012-05-29T19:26:00.417
> 
> 标签：haskell, compiler-construction, hoopl

我是 Haskell 程序员（我通常[在 Haskell 中实现算法](http://mukeshiiitm.wordpress.com)）并试图理解[HOOPL](http://hackage.haskell.org/package/hoopl)库，但我无法对其进行解码。我没有编译器背景（目前正在学习 Coursera 和编译器：原理、技术和工具），如果您能建议我一种系统的方法来继续理解 HOOPL 库（先决条件是什么），那就太好了。假设我有一个小的 Haskell 代码，我想在其上使用 HOOPL 应用数据流优化

```
add :: Int -> Int -> Int
add x y = z where
   x' = 1
   y' = 1 -- this will be dead code elimination 
   z = x' + 1 
```

如何编写 HOOPL 代码来优化它。如果你能举一个更好的例子，如果我听起来很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:03:15.783

一个好的起点是拉动 git repo，与 Hackage 上的相比，它有很多额外的文件。查看 /testing 子目录，您可以看到一些定义基本命令式语言的简单代码以及对其进行的一些优化。

# jquery - QUnit 异步 AJAX 单元测试

> ID：10805408
> 
> 赞同：1
> 
> 时间：2012-05-29T19:26:16.297
> 
> 标签：jquery, ajax, qunit

我正在尝试为我所有不同的 ajax 请求状态（完成、错误、成功）编写一堆单元测试，我的主要问题是只有我的第一个请求测试触发。如果我删除第一个测试，那么第二个测试将触发。任何想法？我认为由于它们是异步的，它们应该同时触发....

```
module("AJAX Request");

asyncTest("request_data_success", 1, function () {
 $.ajax({
    url: "https://www.googleapis.com/plus/v1/people/104949285507985198959/",
    dataType: 'jsonp',
    async: false,
    success: function (data, status, jqXHR) {
        ok(true, "Success");
        start();
    }
 });
});

asyncTest("request_data_failure", 1, function () {
 $.ajax({
    url: "https://www.googleapis.com/plus/v1/people/104949285507985198959/",
    dataType: 'jsonp',
    async: false,
    error: function (jqXHR, textStatus, errorThrown) {
        ok(textStatus, "Error Message = " + errorThrown);
        start();
    }
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:31:20.680

`async: false`不适用于`dataType: 'jsonp'`

[在async](http://api.jquery.com/jQuery.ajax/)的文档中简要提到了这一点。

# java - 在Java中绘制相邻的矩形

> ID：10805419
> 
> 赞同：0
> 
> 时间：2012-05-29T19:26:57.160
> 
> 标签：java, swing, graphics, draw

我正在学习用Java编写代码。我有这个需要做的评估：我必须创建一个 java 应用程序，它将执行以下操作：

*   允许用户指定输入矩形的数量（3 到 30 之间）。

*   生成请求数量的输入矩形（具有随机宽度和高度）并将它们写入文件（人类可读）。

*   从上述步骤生成的文件中读取随机生成的输入矩形。

*   以图形方式显示输入矩形，彼此正确排列 NEXT

*   计算输出矩形。

*   以图形方式显示输出矩形，彼此正确放置。注意：输入和输出矩形必须同时显示。

*   将输出矩形坐标写入输出文件（人类可读）。”

矩形是简单的盒子（不是花哨的颜色等）。我一直在努力处理这段代码，设法完成了输入+错误处理，它显示了矩形，但没有按预期显示。

错误：我需要它来接受用户的矩形数量并将它们彼此相邻显示。

请在下面找到我的代码...提前致谢。磅

* * *

```
import java.awt.Graphics;
import javax.swing.JFrame;
import java.util.Random;
import java.util.Scanner;

public class final_rect extends JFrame
{

    public final_rect()
    {
        setTitle("tutorial");
        setSize(700,500);
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void paint(Graphics g)
    {
              int x = 50;
              int y = 50;
              Random rnd = new Random();

        for (int i=1; i <=5; i++)
        {
            int width = rnd.nextInt(200);
            int height = rnd.nextInt(200);
        System.out.println("Rectangle["+ i +"]" + ":(W="+width+ ";H=" +height +")");

        g.drawRect( x , y , width, height);

// Update the coordinates for the next rectangle.
                  x =  x + width;
            }
    }

    public static void main(String[] args)

    {

Scanner sc = new Scanner(System.in);

int number;
do {
    System.out.println("Please enter a number between 3 and 30!");
    while (!sc.hasNextInt()) {
        System.out.println("That's not a number! Please enter a number between 3 and 30!!!");
        sc.next();
    }
    number = sc.nextInt();
} 
while (number <3 || number > 30);

System.out.println("Thank you! Got " + number);

test1 t = new test1();
        t.paint(null);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:58:59.957

简单的方法：

您可以创建一个起始位置 x 和 y（如 0,0），并继续将宽度添加到 x 和/或高度添加到 y，并在下一个要绘制的 retangle 上使用它们，而不是固定起始位置（这将使它们彼此内部）。

哦，只是为了确保您知道：`drawRect(int startX, int startY, int width, int height)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:01:06.930

您正在将它们绘制在彼此之上。这一行：

```
g.drawRect(205,300,height,width); 
```

从点 (205,300) 开始绘制所有矩形。

您必须更改前两个参数的值（可能只有其中一个）。我不会给你确切的代码，因为这是家庭作业，但是：

你有一个起始位置，在你的代码中调用它（205,300），当你绘制它们时，你有每个矩形的宽度，有了这些信息，你应该能够弄清楚下一个位置是什么。

另一件事是您正在`Random`通过循环创建一个新对象，您应该只在方法的顶部创建一个（或在构造函数时为整个类创建一个）。

# javascript - 根据登录状态更新 DIV？

> ID：10805420
> 
> 赞同：1
> 
> 时间：2012-05-29T19:26:59.063
> 
> 标签：javascript, ruby-on-rails, ajax, devise

我目前`<ul>`在我的导航区域中有一个`<%= render :partial => "sessions/manager" %>`，它基本上调用另一个部分，这取决于用户的登录状态呈现登录表单或欢迎声明。

我的登录部分由 ajx 提供支持，因此会自动刷新。这是我使用的代码。

**登录.js**

```
$(document).ready(function() {

  $('form#sign_in').bind('ajax:success', function(e, data, status, xhr) {
    console.log(data);
    if(data.success) {
      $('.user_nav').html(data.content);
    } else {
      $('.user_nav').prepend(data.errors.join('<br />'));
    }
  });

}); 
```

现在我希望我的页面上有另一个 div，其中包含根据用户登录状态隐藏或显示的各种链接。

目前我的代码是这样的。

```
<% if(signed_in?) %>
  <li><%= link_to "Clients", "/clients"  %></li>
  <li><%= link_to "Jobs", "/jobs"  %></li> 
<% else %>
<% end %> 
```

但是，这并不像 id 那样工作。链接一开始不显示，这很酷但是当我登录时链接不会再次显示......除非我刷新整页。

我怎样才能 ajax-ify 这个部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:28:41.990

* * *

您的示例不起作用，因为服务器必须再次呈现页面才能通过 signed_in？

我建议摆脱 ajax 登录，只需进行正常提交并重新加载没有 ajax 的页面。如果您仍想使用 ajax，则可以使用 javascript 重新加载页面：

```
window.location.href=window.location.href 
```

或者

```
window.location.reload() 
```

但是你也可以正常提交，一切都应该正常。

永远不要用 css 可见性这样做！这真的很不安全，也不是一个好的编程行为。服务器必须验证并将正确的 html 发送给用户，这取决于他是否登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:57:29.263

改用 CSS 的 Visibility 属性，这不太安全，因为任何人都可以在源代码中看到链接，但会顺利运行。

如果在 JSP 中，请尝试通过该代码重新加载页面，在该代码中，如果看起来像登录，正在进行中，同时您的页面将被刷新。

# android - Phonegap - 你好 Cordova 错误

> ID：10805422
> 
> 赞同：7
> 
> 时间：2012-05-29T19:27:21.953
> 
> 标签：android, eclipse, cordova

我遵循了Phonegap的第一个教程——Android入门。我编写了示例“HelloCordova”，如此[处所示](http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)。但是当我单击“作为 Android 应用程序运行”时，Eclipse 会显示`your project contains error(s), please fix them before running your applications`. 没有指出错误！我不明白问题出在哪里（我的文件与示例匹配）！

问题：生成最终存档时出错：调试证书已于 07/04/12 0.34 过期
位置：未知 类型：Android 打包问题

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T23:09:34.383

这个问题与Phonegap无关......您应该删除“％USERPROFILE％/.android/debug.keystore”处的调试文件，这样eclipse将生成一个新的调试文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:29:41.127

检查 android 清单文件是否有任何错误。甚至清单文件也必须没有错误。您可能忽略了它，因为它是最后一个文件。检查错误。

# scala - Scala从列表内部计数/访问列表中的前一项？

> ID：10805423
> 
> 赞同：1
> 
> 时间：2012-05-29T19:27:23.380
> 
> 标签：scala

我正在寻找一种方法来访问列表中的前一个项目。目标是计算一个嵌套列表，然后将该嵌套列表的长度附加到下一个列表项中。最好是一种内联方式

代码示例：

`List(List[items], this.preceding.size)`

输出：

`List(List(item1,item2,item3), 3)`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:39:53.917

一般来说，这种事情是折叠和扫描擅长的。我不确定你到底想要什么形式，但这里有一些你可以解决的问题：

```
val xs = List("salmon","cod","halibut")
xs.scanLeft((0,"")){ (prev, item) => (prev._2.length, item) }.tail
// List((0,salmon), (6,cod), (3,halibut)) 
```

您可以用其他列表替换字符串。

# jquery-mobile - plone上的jquery移动集成

> ID：10805426
> 
> 赞同：1
> 
> 时间：2012-05-29T19:27:33.487
> 
> 标签：jquery-mobile, plone

我正在使用具有 JQuery 移动设备的 Plone 站点工作，但我遇到了媒体问题。

JQuery mobiles 在网页的主页中创建了一个简洁的菜单，该菜单链接到 plone 站点的不同视图。问题是媒体（如图像）与一个不存在的奇怪 URL 链接。

我的意思是：

我有一张图片，其路径为：**url** /competitions-en/red-bull-monte-descend/horaire/red-bull-monte-descend/ **vignette_normal**

但是在 img 标签的 src 参数中，我看到的是**url** / **nameOfView Competitions** -en/red-bull-monte-descend/horaire/red-bull-monte-descend/ **vignette_normal**

我不知道为什么 JQuery mobile 将视图的名称添加到图像的路径中，很难我知道如果我加载视图客户端（所以不是去：主菜单>视图，而是将视图加载到一个新的选项卡）没有问题。仅当我通过主页访问视图时，JQuery mobile 才会将视图名称添加到图像的路径中。

关于如何解决它的任何想法？

附加信息：

这将是 plone 模板中的块，第一个 TD 生成 img

```
<tr tal:repeat="el python: une_date[1]['horaires']"> 
    <td tal:attributes="class string:categorie ${el/categorie/cls}"> 
        <img tal:attributes="src el/horaire/vignette; alt el/horaire/title_short;" /> 
    </td> 
    <td tal:attributes="class string:competition"> 
        <a tal:content="el/competition/title" tal:attributes="href el/competition/url"></a> 
    </td> 
    <td class="emplacement"> 
        <span tal:content="el/horaire/emplacement"></span> 
    </td> 
    <td class="debut_fin"> 
        <span tal:content="el/horaire/debut">debut</span> - <span tal:content="el/horaire/fin">fin</span> 
    </td> 
    <td class="title" tal:content="el/horaire/title">un titre</td> 
 </tr> 
```

泰，阿克塞尔

# macos - 如何在 OS X 中实现手势识别器？

> ID：10805428
> 
> 赞同：10
> 
> 时间：2012-05-29T19:27:42.443
> 
> 标签：macos, osx-lion, nswindow, gesture, finder

我已经为 iOS 的手势识别器做了很多工作，但我现在在 OS X 上工作，我迷路了。

我想复制存在于 Finder 中的功能，您可以在其中用两根手指轻扫（在您的魔术鼠标上）以在目录树中后退/前进。

我有一个基于 NSWindow 的应用程序，它看起来与 Finder 非常相似。我之前使用过允许您构建自己的手势识别器的应用程序，所以我知道这是可能的，但我没有看到任何文档。

我需要做什么来实现这些手势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-16T14:15:06.217

Mac 现在有：

*   `NSClickGestureRecognizer`
*   `NSMagnificationGestureRecognizer`
*   `NSPanGestureRecognizer`
*   `NSPressGestureRecognizer`
*   `NSRotationGestureRecognizer`

也可用于情节提要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T22:16:40.140

您可以在 Cocoa 事件处理指南中阅读有关[处理触控板事件的信息。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html#//apple_ref/doc/uid/10000060i-CH13-SW10)系统可以检测一些预定义的手势（滑动、旋转等），或者您可以侦听原始触摸事件，这些事件沿着 NSResponder 链向上传播，就像常规鼠标事件一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:04:07.310

看起来 CZKit 中还有一个事件识别器类。[https://github.com/CarterA/CZKit](https://github.com/CarterA/CZKit)

我还没有使用这个（还），所以 YMMV。

# jquery - 使用用户输入更新 JSON 并转换为 XML

> ID：10805432
> 
> 赞同：1
> 
> 时间：2012-05-29T19:28:00.340
> 
> 标签：jquery, json

我正在获取 CSV 数据，并通过输入字段将其显示给用户。我希望将这些值更新为 Json 并转换为 XML。是否可以使用用户输入更新 Json，或者是否有其他方法可以做到这一点？

```
$(document).ready(function() {
    $.getJSON(
        'CSV.php', 
        function(data) {
            $.each(data, function(index, element) {
                newDiv = $('<div/>').addClass('row').appendTo('#showdata');
                $('<div class="options">Payment Format: <select name="Payment_Format"><option value="CCC" selected="selected">Company to Company</option><option value="PPP">Company to Person</option></select> </div>').appendTo(newDiv);
                $('<div class="field">' + value + '</div>').appendTo(newDiv);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:04:48.023

要更新 JSON，您必须将其解码为 JavaScript 对象（这`$.getJSON`对您有用。然后您可以像操作其他任何对象一样操作 JavaScript 对象。

要从 JavaScript 获取 XML，您首先需要决定要使用哪种序列化，因为 JSON 不会自然地映射到 XML。例如，假设您有这个 JavaScript 对象：

```
{ person : { name : "Paul", parents : [ "Alice", "Bob" ] } } 
```

什么是正确的 XML 表示？是不是这个：

```
<person name="Paul">
  <parent>Alice</parent>
  <parent>Bob</parent>
</person> 
```

或这个？

```
<person>
  <name>Paul</name>
  <parents>
    <person name="Alice" />
    <person name="Bob" />
  </parents>
</person> 
```

在这方面几乎有无穷无尽的变化，并且没有就什么是最好的达成共识。

一旦确定了需要什么序列化，就必须生成 XML。这[并不难，](https://developer.mozilla.org/en/How_to_create_a_DOM_tree)但是如果您正在寻找可以直接放入项目中的东西，您可能需要进行一些搜索才能找到满足您需求的东西（因为您没有指定它们）。为了让您开始[，这里有一个关于该主题的先前讨论](https://stackoverflow.com/questions/442242/whats-the-best-way-to-serialize-javascript-objects-to-xml)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:52:33.890

您几乎需要遵循以下流程：

1.  将 JSON 解析为您的编程语言原生的“对象”（这应该很容易，因为您使用的是 javascript）
2.  检索用户输入并相应地更新对象 ( `obj.name = user_input`)
3.  将对象转换为 XML (ew) 并输出。从[以前的 SO 帖子](https://stackoverflow.com/questions/442242/whats-the-best-way-to-serialize-javascript-objects-to-xml)中查看[一个示例](http://goessner.net/download/prj/jsonxml/ "这个")

我不会强迫你完全使用 JSON，但如果可以的话，我会要求你考虑一下。它与 JS 配合得更好，并且有大量用于其他语言的库。更不用说它使用的数据比 XML 少得多。但是，如果您对此束手无策，这就是采取的方法

# sql - 如何在 Bash 脚本中运行 SQL 命令并将该命令的输出保存到变量

> ID：10805433
> 
> 赞同：2
> 
> 时间：2012-05-29T19:28:02.587
> 
> 标签：sql, oracle, bash

我希望将一些 Oracle 组件包含在将执行一组目标的 Bash 脚本中：

1.  以 root 身份登录到远程服务器（我的 Oracle DB 所在的位置）。
2.  执行“su - oracle”。
3.  以特定 Oracle 用户身份登录 sqlplus 环境。
4.  执行 SQL 选择命令并将该命令的输出存储到变量中。
5.  在 Bash shell 中显示该变量的结果。

我在 stackoverflow 上查看了几个示例，其中许多似乎都执行了命令，但不一定详细说明如何向用户显示输出（尽管我仍在检查更多）。例如，假设预先设置了所有密钥交换，则可以使用以下方法：

```
#!/bin/sh
ssh -q root@5.6.7.8
sqlplus ABC/XYZ@core <<ENDOFSQL
select CREATE_DATE from PREPAID_SUBSCRIBER where MSISDN='12345678912';
exit;
ENDOFSQL 
```

相反，这是我尝试设置的方法：

```
#!/bin/sh
datasource_name=`echo "select CREATE_DATE from PREPAID_SUBSCRIBER where MSISDN='12345678912';" | ssh -q 5.6.7.8 "su - oracle -c 'sqlplus -S ABC/XYZ@core'" | tail -2 | head -1` 
```

理想情况下，datasource_name 变量现在应该采用以下值：

```
no rows selected 
```

或者如果表中有一个条目：

```
CREATE_DATE
-------------------
07-06-2009 18:04:48 
```

tail 和 head 命令用于去除输出中的空行，而 ssh -q 和 sqlplus -S 选项用于忽略警告。

但是，当我运行该命令并执行以下操作时：

```
echo "${datasource_name}" 
```

我得到...

警告：无法访问 tty（错误的文件描述符）。因此在这个 shell 中没有作业控制。

...而不是上面的两个输出之一。如果我理解正确，这可能是一个警告，取决于是否使用了特定的 shell，但大多数在线资源表明这可以忽略不计。这个警告的好处是，我上面的命令似乎实际上正在运行并将“某些东西”存储到 datasource_name 中，但这不是我想要的。

现在为了简化这个问题，我注意到当我简单地尝试从运行 bash 脚本的框中 su 到远程机器上的 oracle 时，我得到了相同的 tty 警告：

```
ssh root@5.6.7.8 "su - oracle"
Warning: no access to tty (Bad file descriptor).
Thus no job control in this shell. 
```

如果我执行以下操作，我实际上可以毫无问题地成功进入 sqlplus 环境：

```
ssh -q root@5.6.7.8 "su - oracle -c 'sqlplus ABC/XYZ@core'" 
```

> SQL*Plus：发布 9.2.0.4.0 - 2012 年 5 月 29 日星期二 12:35:06 生产
> 
> 版权所有 (c) 1982, 2002，甲骨文公司。版权所有。
> 
> 连接到：Oracle 数据库 10g 企业版版本 10.2.0.4.0 - 64 位生产，具有分区、真正应用集群、OLAP、数据挖掘和真正应用测试选项
> 
> SQL>

如果我明白为什么会出现上述问题，我就有可能弄清楚如何让我的脚本正常工作。任何建议将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:37:02.557

将第一行更改为：

```
ssh -t  root@5.6.7.8 "su - oracle" 
```

得到一个 tty 看看这是否适合你。

您可以在脚本中做的另一件事是将 stderr 也重定向到您的变量，如果您想在变量中也看到它，这对您来说似乎并非如此，尽管我过去曾这样做过一些案例。下面的评论中有一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:01:47.943

这是 MySQL 的示例脚本，但可以轻松地为 Oracle 编辑：

```
#!/bin/bash

remote=oracle@5.6.7.8

ssh -q -t $remote <<EOF
bash <<EOFBASH
mysql <<ENDOFSQL>/tmp/out
show databases;
ENDOFSQL
EOFBASH
EOF

scp $remote:/tmp/out /tmp/out
ds=$(</tmp/out)

cat <<EOF
START OUTPUT
$ds
END OUTPUT
EOF

rm /tmp/out 
```

经测试，效果很好。不要使用`su - oracle`，而是尝试直接 ssh 到 oracle 用户；）

# c# - 服务需要生成非交互式子进程，但因“拒绝访问”而失败

> ID：10805436
> 
> 赞同：5
> 
> 时间：2012-05-29T19:28:25.833
> 
> 标签：c#, windows, service, .net-3.5, process

首先，我不想*以*任何方式与桌面交互。

我想要做的是分离关注点。我有一个在本地系统帐户 (LSA) 下运行的服务。有时，我需要在不同的帐户下执行进程。

我正在使用`System.Diagnostics.Process`这个。到目前为止，这是我尝试过的：

*   将服务应用程序作为普通桌面应用程序运行，在同一帐户下启动子进程：**有效**
*   将服务应用程序作为普通桌面应用程序运行，在另一个帐户下启动子进程：**有效**
*   将服务作为服务应用程序（作为 LSA）运行，在同一帐户（LSA）下启动子进程：**有效**
*   将服务作为服务应用程序（作为 LSA）运行，在另一个帐户下启动子进程：**不起作用**

对我不起作用的情况会向我抛出一个带有“拒绝访问”的 Win32Exception。我已授予相关用户帐户作为服务登录的权利，但这没有任何区别。

为了好玩，我还尝试了这些场景：

*   如果我在自己的开发帐户（我们称之为开发者）下运行服务，并尝试在权限较低的帐户（我们称之为服务帐户）下启动子进程，则 process.Start() 不会抛出，并返回 true，但是我从未在 Sys Internal 的 Process Explorer 中看到任何进程正在启动，并`Process.Exited`立即被触发。
*   *如果我在 ServiceAccount 下运行服务，并在同一*帐户 (ServiceAccount)下启动子进程，它会按预期工作。

这是我正在使用的代码：

```
var pi = new ProcessStartInfo {
    CreateNoWindow = true,
    WindowStyle = ProcessWindowStyle.Hidden,
    UseShellExecute = false,
    ErrorDialog = false,
    RedirectStandardError = false,
    RedirectStandardInput = false,
    RedirectStandardOutput = false,
    FileName = @"C:\Path\To\SomeApplication.exe",
    Arguments = @"Some arguments",
    UserName = "SomeUserName",
    Domain = "SomeDomain",
    Password = SecureStringUtils.Convert("SomePassword")
};

var process = new Process();
process.StartInfo = pi;
process.Start(); // Throws when run as a service 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:03:24.693

我**终于**找到了这个：[使用 Process.Start() 从 Windows Service 中以不同用户身份启动进程](https://stackoverflow.com/questions/362419/using-process-start-to-start-a-process-as-a-different-user-from-within-a-windo)，它解决了我的问题。当然，答案中提供的代码需要大量抛光，但它似乎确实解决了我的问题。

# javascript - 在 Javascript 中，如何检查字符串末尾是否包含 \（反斜杠），如果是，则将其删除？

> ID：10805442
> 
> 赞同：-2
> 
> 时间：2012-05-29T19:28:42.050
> 
> 标签：javascript

> **可能重复：**
> [正则表达式删除最后一个 / 如果它作为字符串中的最后一个字符存在](https://stackoverflow.com/questions/7602301/regex-to-remove-last-if-it-exists-as-the-last-character-in-the-string)
> [Javascript：如何从字符串末尾删除字符？](https://stackoverflow.com/questions/3597611/javascript-how-to-remove-characters-from-end-of-string)

在 Javascript 中，如何检查字符串末尾是否包含 \（反斜杠），如果是，则将其删除？寻找正则表达式解决方案。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:31:37.540

```
if (myString.match(/\\$/)) { 
  myString = myString.substring(0, myString.length - 1);
} 
```

正则表达式 '\$' 将匹配转义字符 '\' 后跟行尾。如果这是匹配项，它将运行该`substring`方法以获取除最后一个字符之外的所有内容。

正如所指出的，在这种情况下，这可以简化为：

```
myString = myString.replace(/\\$/, ""); 
```

*（感谢@Lekensteyn 指出）*

我已经留下了两个答案，所以如果删除匹配不再是目标，人们可以看到方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T19:31:16.580

我建议：

```
var string = 'abcd\\';
if (string.charAt(string.length - 1) == '\\'){
    // the \ is the last character, remove it
    string = string.substring(0, string.length - 1);
} 
```

参考：

*   [`charAt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charAt).

# .net - 使用 RazorEngine 迭代模型

> ID：10805443
> 
> 赞同：1
> 
> 时间：2012-05-29T19:28:49.887
> 
> 标签：.net, razor, razorengine

我正在使用 ElasticObject (http://elasticobject.codeplex.com/) 创建动态对象，我将其提供给 RazorEngine 以进行模板替换。

ElasticObject 正在转换为动态对象的 XML 的结构如下：

```
<Book ChapterID="1123" ChapterName="Test Chapter" BookName="Sample Book" SectionName="Test Section">
    <StaffContact>
       <Contact FirstName="Jane" LastName="Doe" EmailAddress="janedoe@domain.com" />
       <Contact FirstName="John" LastName="Doe" EmailAddress="johndoe@domain.com" />
    </StaffContact>
</Book> 
```

我想弄清楚如何获取 Contact.UserFirstName 等数据

```
XmlNode BookNode = xmlLookupDoc.SelectSingleNode("/Book");
var elBook = XElement.Parse(BookNode.OuterXml).ToElastic();

//I build the Model object here - this is a simplified version of what I'm using
var razorViewModel = new { Book = elBook }; 
```

我可以使用以下方法访问 Book 节点的属性：

```
@Model.Book.ChapterName 
```

我只是不确定如何使用 RazorEngine 遍历模型。

我尝试了以下方法：

```
@foreach (var item in Model.StaffContact.Contact)
    {
        @item.model.UserFirstName @item.model.UserLastName at @item.model.UserEmailAddress 
    } 
```

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:40:58.007

基于ElasticObject的文档（不算太多主要是一些测试和一些博文），这样试试：

```
@foreach (var contact in Model.Book.StaffContact[null])
{
    @contact.FirstName @contact.LastName at @contact.EmailAddress
} 
```

基本上属性名称应该匹配 XML 元素和属性名称，但是访问集合有点棘手：

`StaffContact`您可以在“空索引器”的帮助下访问其中的元素`Model.Book.StaffContact[null]`，现在您可以对其进行迭代。

在`foreach`每个项目中`Contact`，您都可以使用属性访问 FirstName 属性`FirstName`等。

# ruby-on-rails - Mongoid-accepted_nested_attributes_for 不保存

> ID：10805449
> 
> 赞同：2
> 
> 时间：2012-05-29T19:29:03.943
> 
> 标签：ruby-on-rails, mongoid, has-many

`EnquiryForm`我和`UniversityFeeInstallment`EnquiryForm `has_many`UniversityFeeInstallment之间有一对多的关系。
以下是`params`我从控制器收到的

```
{
"utf8"=>"✓",
"authenticity_token"=>"jqgiRlk606pDzMEAtS/mGoWz8T61PgyCkKdMzSHEiQA=",
"enquiry"=>{
    "university_fee_installments_attributes"=>{
        "1338318502006"=>{
            "due_date"=>"2012-05-28",
            "amount"=>"1200"
        }
    }
},
"commit"=>"Update Enquiry",
"id"=>"4fc3db492d6d130238000028" 
```

}

我正在使用 Ryan Bates 经典的嵌套形式技术。型号代码也是：

```
 has_many :development_fee_installments, :autosave => true 
  has_many :university_fee_installments, :autosave => true 
  accepts_nested_attributes_for :development_fee_installments
  accepts_nested_attributes_for :university_fee_installments 
```

控制器：

```
def update
  @enquiry = Enauiry.find(params[:id])
  if @enquiry.save
    redirect_to enquiry_payments_path(@enquiry, :notice => "Installment details updated")
  else
    render 'edit_installments'
  end
end 
```

我无法保存 university_fee_installments。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:04:06.200

将您的控制器代码更改为此

```
def update
    @enquiry = Enquiry.find(params[:id])
    if @enquiry.update_attributes(params[:enquiry])
        redirect_to enquiry_payments_path(@enquiry, :notice => "Installment details updated")
    else
        render 'edit_installments'
    end
end 
```

当我们传递从视图中收到的参数时，update_attributes 将起到作用。

# javascript - Javascript this.href 来自 asp.net 代码后面

> ID：10805451
> 
> 赞同：0
> 
> 时间：2012-05-29T19:29:18.010
> 
> 标签：javascript, asp.net

如何从后面的 asp.net 代码中传递 this.href？这是我所拥有的，在 javascript 中我添加了一个警报以查看该值，它显示“未定义”

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Sample", "Callscript(this.href);", true);

function Callscript(href) 
{
    alert(href);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:39:29.210

`href`不是全局对象的属性。我相信您正在寻找`window.location.href`：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Sample", "Callscript(window.location.href);", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:32:10.147

您没有正确传递 aspx.cs 文件中的 href。它应该如下所示。

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Sample", "Callscript('" + this.href + "');", true);  

function Callscript(href)  
{     
    alert(href); 
} 
```

希望这可以帮助！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:34:46.180

“这个”是两个不同的东西——它是服务器上的一个东西，另一个是客户端上的东西。

您可以尝试像这样修改您的启动脚本：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Sample", "Callscript('" + this.href + "');", true); 
```

# php - Wordpress 选项页面中动态生成的下拉菜单

> ID：10805466
> 
> 赞同：3
> 
> 时间：2012-05-29T19:30:19.897
> 
> 标签：php, mysql, ajax, wordpress

我有一个正在开发的插件，其中一部分包含选项页面上的“条件”下拉菜单。基本上，我有一个包含三个选项的下拉菜单，第二个下拉菜单会根据第一个下拉菜单中选择的内容填充来自数据库的信息。问题是，我不知道如何填充第二个下拉列表！我对 AJAX 并没有那么好，但它似乎是可能的解决方案。这里经验丰富的开发人员有什么想法吗？

编辑：这是我目前所在的位置，但它似乎永远不会运行：

```
<form action="<?php echo site_url() ?>/wp-admin/admin.php?page=ad_manager&pagetype=addedit&pid=<?php echo $_REQUEST['id']; ?>" method="post" name="ad_success">
    <table cellpadding="5" class="widefat post fixed">
        <thead>
            <tr>
                <th><strong><?php if($_REQUEST['id'] != '') { _e('Edit Ad'); } else { _e('Create Ad'); } ?></strong></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <label for="gtad_condition">
                        <strong><?php _e('Ad Condition'); ?>:</strong>
                        <select name="ad_condition" id="ad_condition">
                            <option value="">Select an option...</option>
                            <option value="is_city">Is City</option>
                            <option value="is_location">Is Location</option>
                            <option value="is_page">Is Page</option>
                        </select>
                    </label>
                    <label for="gtad_location">
                        <select name="ad_location" id="ad_location"></select>
                    </label>
                </td>
            </tr>
        </tbody>
    </table>
</form>

<script>
    jQuery(document).ready(function() {
        $ad_condition = $("select[name='ad_condition']");
        $ad_location = $("select[name='ad_location']");

        $ad_condition.change(function() {
            if ($(this).val() == "Is City") {
                $("select[name='ad_location'] option").remove();
                $("<option>Test</option>").appendTo($ad_location);
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:58:53.470

您上面的代码不起作用的原因是因为`$("mySelect").val()`返回 的`value`属性，而`<option>`不是开始和结束标记之间的文本。看我的小提琴：http: [//jsfiddle.net/XhujD/](http://jsfiddle.net/XhujD/)。

所以，你通过改变来解决问题

```
if ($(this).val() == "Is City") { 
```

进入

```
if ($(this).val() == "is_city") { 
```

* * *

当第一个下拉列表发生变化时，使用 AJAX 填充第二个下拉列表基本上如下所示：

```
// wait until the first list has changed
$("#list1").change(function(){

    // call a script using AJAX and pass the selected value
    $.post('myScript.php', {myValue: $(this).val()}, function(data){
        // clear the second list
        $("#list2").find("option").remove();

        // add the options based on the 'data' variable
        $("#list2").append('<option value="myOption">' + data + '</option>')
    });

}); 
```

# paypal - PayPal Payments Pro：修改定期资料时收取一次性费用的方式？

> ID：10805467
> 
> 赞同：2
> 
> 时间：2012-05-29T19:30:20.277
> 
> 标签：paypal, recurring-billing

从商业角度来看：客户可能会以每月 29 美元的价格订阅。现在他们想要下一层（59 美元/月）。他们在月中更换级别。现在，我不仅想将他们现有的个人资料修改为每月 59 美元，而且我想收取 15 美元的一次性费用（假设用户在月中进行了更改，15 美元是我按比例分配的金额）。

有没有办法使用 PayPal Payments Pro（以前的“Website Payments Pro”）来做到这一点？

我已经尝试过：

OPTIONALTRX - 仅适用于 PayPal Payflow Pro

TRIALAMT - 仅当我在创建初始重复配置文件时使用它时才有用。即使我这样做了，我认为我不能让金额更高

在此先感谢，迈克

# delphi - 分配 SOAP 属性时访问冲突 - Delphi XE2

> ID：10805469
> 
> 赞同：0
> 
> 时间：2012-05-29T19:30:24.270
> 
> 标签：delphi

我使用 XE2 的 WSDL 向导生成了一个接口文件（接口文件出现在此清单的底部）

当我尝试在运行时分配 myPaxActivity 的“begin_”属性时，我得到一个 A/V，但不明白为什么。

在我看来，我已经实例化了一个 myPaxActivity 对象，并且我认为我应该能够为 .begin_ 属性分配一个值。

任何帮助表示赞赏，TIA

我正在运行 Delphi XE2、Update 3、WinXP (sp3)。

这是我的代码（见〜ln 60）：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls,
  ScheduleUploadV2, Soap.InvokeRegistry, Soap.Rio, Soap.SOAPHTTPClient;

type
  TForm1 = class(TForm)
    btnTest: TButton;
    HTTPRIO1: THTTPRIO;
    procedure btnTestClick(Sender: TObject);
  private
    procedure SendToAvinode();

  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.btnTestClick(Sender: TObject);
begin
  SendToAvinode;
end;

procedure TForm1.SendToAvinode;
var
  myAviSchedContainer : ScheduleContainerType;
  Uploader          : ScheduleUploadV2WS;
  WSResponse        : StatusType;

  myPlane           : AircraftType;
  mySched           : ScheduleType;
  myPaxActivity     : PAXActivityType;
  arrSched          : Array_Of_ScheduleType;  //array[0..1] of ScheduleType;

  ErrorCount, i : Integer;
  ThisError : ErrorType;
  ErrAccum: string;

begin
   myAviSchedContainer := ScheduleContainerType.Create;
   mySched             := ScheduleType.Create;
   myPlane             := AircraftType.Create;
   myPaxActivity       := PAXActivityType.Create;

   // Aircraft
   myPlane.tail := 'CL-001';
   mySched.aircraft := myPlane;

   // Passenger Activity
   myPaxActivity.vendorCode   := 'TestVCode';

       // ***** Next line causes A/V ??? *******
   myPaxActivity.begin_.AsDateTime := StrToDateTime('05/21/2012 09:00') ; // <--

   myPaxActivity.startAirport.icaoCode := 'KLAX';
   myPaxActivity.endAirport.icaoCode   := 'KTEB';
   myPaxActivity.pax := 2;
   mySched.paxActivity[0] := myPaxActivity;

   myAviSchedContainer.schedule[0] := mySched;

   // issue request w/ user authentication
   HTTPRIO1.HTTPWebNode.UserName := 'integrationcl';
   HTTPRIO1.HTTPWebNode.Password := 'devpass2';
   Uploader   := GetScheduleUploadV2WS(False, '', HTTPRIO1);
   WSResponse := Uploader.request(myAviSchedContainer);

   ErrorCount := SizeOf(WSResponse.errors);
   for i := 0 to ErrorCount do begin
     ThisError := WSResponse.errors[i];
     ErrAccum := ErrAccum + ThisError.message_ + '||';
   end;

   ShowMessage('Error List ' + ErrAccum);

   myPaxActivity.Free;
   myPlane.Free;
   mySched.Free;
   myAviSchedContainer.Free;
end;

end. 
```

这是 WSDL 向导生成的接口文件（我截断了 getter/setter 部分以使这篇文章保持在 30,000 字符的限制内）：

```
unit ScheduleUploadV2;

interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

const
  IS_OPTN = $0001;
  IS_UNBD = $0002;
  IS_NLBL = $0004;
  IS_ATTR = $0010;
  IS_TEXT = $0020;

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Embarcadero types; however, they could also 
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:boolean         - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:duration        - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:string          - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:date            - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:int             - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:decimal         - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:long            - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:dateTime        - "http://www.w3.org/2001/XMLSchema"[Gbl]

  ContactInfoType      = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  ActivityFBOType      = class;                 { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  ActivityRegulationType = class;               { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  ActivityState        = class;                 { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  ScheduleContainerType = class;                { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  CompanyType          = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  AircraftType         = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  ErrorType            = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  StatusType           = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  AirportType          = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  ArgusRatingType      = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  DistanceType         = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  InsuranceType        = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }
  ScheduleType         = class;                 { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  AbstractActivityType = class;                 { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  GuaranteeActivityType = class;                { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  GenericActivityType  = class;                 { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  PAXActivityType      = class;                 { "http://www.fubar.com/integration/ScheduleUpload"[GblCplx] }
  MonetaryType         = class;                 { "http://www.fubar.com/core/CommonTypes"[GblCplx] }

  {$SCOPEDENUMS ON}
  { "http://www.fubar.com/integration/ScheduleUpload"[GblSmpl] }
  FBOSourceType = (UNIVERSAL, ACUKWIK, OWN, OTHER);

  { "http://www.fubar.com/core/CommonTypes"[GblSmpl] }
  ErrorCodeType = (
      S0, 
      S1, 
      A0,
      A1, 
      A2, 
      A3,
      A4, 
      A5, 
      I0, 
      I1, 
      I2, 
      I3, 
      B0
  );

  { "http://www.fubar.com/core/CommonTypes"[GblSmpl] }
  StatusCodeType = (S, F, PS);

  { "http://www.fubar.com/core/CommonTypes"[GblSmpl] }
  DistanceUnitType = (NM, MI, KM);

  {$SCOPEDENUMS OFF}

  Array_Of_GuaranteeActivityType = array of GuaranteeActivityType;   { "http://www.fubar.com/integration/ScheduleUpload"[GblUbnd] }
  Array_Of_ScheduleType = array of ScheduleType;   { "http://www.fubar.com/integration/ScheduleUpload"[GblUbnd] }
  Array_Of_PAXActivityType = array of PAXActivityType;   { "http://www.fubar.com/integration/ScheduleUpload"[GblUbnd] }
  Array_Of_GenericActivityType = array of GenericActivityType;   { "http://www.fubar.com/integration/ScheduleUpload"[GblUbnd] }

  // ************************************************************************ //
  // XML       : ActivityFBOType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  ActivityFBOType = class(TRemotable)
  private
    FfboSource: FBOSourceType;
    FfboId: string;
    FfboId_Specified: boolean;
    FfboName: string;
    procedure SetfboId(Index: Integer; const Astring: string);
    function  fboId_Specified(Index: Integer): boolean;
  published
    property fboSource: FBOSourceType  read FfboSource write FfboSource;
    property fboId:     string         Index (IS_OPTN) read FfboId write SetfboId stored fboId_Specified;
    property fboName:   string         read FfboName write FfboName;
  end;

  // ************************************************************************ //
  // XML       : ActivityRegulationType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  ActivityRegulationType = class(TRemotable)
  private
    Fcode: string;
    Fdescription: string;
  published
    property code:        string  read Fcode write Fcode;
    property description: string  read Fdescription write Fdescription;
  end;

  // ************************************************************************ //
  // XML       : ActivityState, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  ActivityState = class(TRemotable)
  private
    FvendorId: string;
    Fclear: Boolean;
  published
    property vendorId: string   read FvendorId write FvendorId;
    property clear:    Boolean  read Fclear write Fclear;
  end;

  // ************************************************************************ //
  // XML       : ScheduleContainerType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  ScheduleContainerType = class(TRemotable)
  private
    Fproduct: string;
    Fschedule: Array_Of_ScheduleType;
    Fschedule_Specified: boolean;
    procedure Setschedule(Index: Integer; const AArray_Of_ScheduleType: Array_Of_ScheduleType);
    function  schedule_Specified(Index: Integer): boolean;
  public
    destructor Destroy; override;
  published
    property product:  string                 read Fproduct write Fproduct;
    property schedule: Array_Of_ScheduleType  Index (IS_OPTN or IS_UNBD or IS_NLBL) read Fschedule write Setschedule stored schedule_Specified;
  end;

  // ************************************************************************ //
  // XML       : CompanyType, global, <complexType>
  // Namespace : http://www.fubar.com/core/CommonTypes
  // ************************************************************************ //
  CompanyType = class(TRemotable)
  private
    Fname_: string;
    FcertificateNumber: string;
    FcertificateNumber_Specified: boolean;
    Fcode: string;
    Fcode_Specified: boolean;
    FcontactInfo: ContactInfoType;
    FcontactInfo_Specified: boolean;
    FargusRating: ArgusRatingType;
    FargusRating_Specified: boolean;
    procedure SetcertificateNumber(Index: Integer; const Astring: string);
    function  certificateNumber_Specified(Index: Integer): boolean;
    procedure Setcode(Index: Integer; const Astring: string);
    function  code_Specified(Index: Integer): boolean;
    procedure SetcontactInfo(Index: Integer; const AContactInfoType: ContactInfoType);
    function  contactInfo_Specified(Index: Integer): boolean;
    procedure SetargusRating(Index: Integer; const AArgusRatingType: ArgusRatingType);
    function  argusRating_Specified(Index: Integer): boolean;
  public
    destructor Destroy; override;
  published
    property name_:             string           read Fname_ write Fname_;
    property certificateNumber: string           Index (IS_OPTN) read FcertificateNumber write SetcertificateNumber stored certificateNumber_Specified;
    property code:              string           Index (IS_OPTN) read Fcode write Setcode stored code_Specified;
    property contactInfo:       ContactInfoType  Index (IS_OPTN) read FcontactInfo write SetcontactInfo stored contactInfo_Specified;
    property argusRating:       ArgusRatingType  Index (IS_OPTN) read FargusRating write SetargusRating stored argusRating_Specified;
  end;

  // ************************************************************************ //
  // XML       : AircraftType, global, <complexType>
  // Namespace : http://www.fubar.com/core/CommonTypes
  // ************************************************************************ //
  AircraftType = class(TRemotable)
  private
    Ftail: string;
    Fmodel: string;
    Fmodel_Specified: boolean;
    FyearOfMake: string;
    FyearOfMake_Specified: boolean;
    FinteriorRefurbished: TXSDate;
    FinteriorRefurbished_Specified: boolean;
    FexteriorRefurbished: TXSDate;
    FexteriorRefurbished_Specified: boolean;
    FmaxPAX: Integer;
    FmaxPAX_Specified: boolean;
    Foperator: CompanyType;
    Foperator_Specified: boolean;
    FhomeBase: AirportType;
    FhomeBase_Specified: boolean;
    FminimumDayUsage: TXSDuration;
    FminimumDayUsage_Specified: boolean;
    FminimumLegUsage: TXSDuration;
    FminimumLegUsage_Specified: boolean;
    Fequipment: Array_Of_string;
    Fequipment_Specified: boolean;
    Frange: DistanceType;
    Frange_Specified: boolean;
    Finsurance: InsuranceType;
    Finsurance_Specified: boolean;
    FtotalTimeAirframe: Integer;
    FtotalTimeAirframe_Specified: boolean;
    procedure Setmodel(Index: Integer; const Astring: string);
    function  model_Specified(Index: Integer): boolean;
    procedure SetyearOfMake(Index: Integer; const Astring: string);
    function  yearOfMake_Specified(Index: Integer): boolean;
    procedure SetinteriorRefurbished(Index: Integer; const ATXSDate: TXSDate);
    function  interiorRefurbished_Specified(Index: Integer): boolean;
    procedure SetexteriorRefurbished(Index: Integer; const ATXSDate: TXSDate);
    function  exteriorRefurbished_Specified(Index: Integer): boolean;
    procedure SetmaxPAX(Index: Integer; const AInteger: Integer);
    function  maxPAX_Specified(Index: Integer): boolean;
    procedure Setoperator(Index: Integer; const ACompanyType: CompanyType);
    function  operator_Specified(Index: Integer): boolean;
    procedure SethomeBase(Index: Integer; const AAirportType: AirportType);
    function  homeBase_Specified(Index: Integer): boolean;
    procedure SetminimumDayUsage(Index: Integer; const ATXSDuration: TXSDuration);
    function  minimumDayUsage_Specified(Index: Integer): boolean;
    procedure SetminimumLegUsage(Index: Integer; const ATXSDuration: TXSDuration);
    function  minimumLegUsage_Specified(Index: Integer): boolean;
    procedure Setequipment(Index: Integer; const AArray_Of_string: Array_Of_string);
    function  equipment_Specified(Index: Integer): boolean;
    procedure Setrange(Index: Integer; const ADistanceType: DistanceType);
    function  range_Specified(Index: Integer): boolean;
    procedure Setinsurance(Index: Integer; const AInsuranceType: InsuranceType);
    function  insurance_Specified(Index: Integer): boolean;
    procedure SettotalTimeAirframe(Index: Integer; const AInteger: Integer);
    function  totalTimeAirframe_Specified(Index: Integer): boolean;
  public
    destructor Destroy; override;
  published
    property tail:                string           read Ftail write Ftail;
    property model:               string           Index (IS_OPTN) read Fmodel write Setmodel stored model_Specified;
    property yearOfMake:          string           Index (IS_OPTN) read FyearOfMake write SetyearOfMake stored yearOfMake_Specified;
    property interiorRefurbished: TXSDate          Index (IS_OPTN) read FinteriorRefurbished write SetinteriorRefurbished stored interiorRefurbished_Specified;
    property exteriorRefurbished: TXSDate          Index (IS_OPTN) read FexteriorRefurbished write SetexteriorRefurbished stored exteriorRefurbished_Specified;
    property maxPAX:              Integer          Index (IS_OPTN) read FmaxPAX write SetmaxPAX stored maxPAX_Specified;
    property operator:            CompanyType      Index (IS_OPTN) read Foperator write Setoperator stored operator_Specified;
    property homeBase:            AirportType      Index (IS_OPTN) read FhomeBase write SethomeBase stored homeBase_Specified;
    property minimumDayUsage:     TXSDuration      Index (IS_OPTN) read FminimumDayUsage write SetminimumDayUsage stored minimumDayUsage_Specified;
    property minimumLegUsage:     TXSDuration      Index (IS_OPTN) read FminimumLegUsage write SetminimumLegUsage stored minimumLegUsage_Specified;
    property equipment:           Array_Of_string  Index (IS_OPTN or IS_UNBD or IS_NLBL) read Fequipment write Setequipment stored equipment_Specified;
    property range:               DistanceType     Index (IS_OPTN) read Frange write Setrange stored range_Specified;
    property insurance:           InsuranceType    Index (IS_OPTN) read Finsurance write Setinsurance stored insurance_Specified;
    property totalTimeAirframe:   Integer          Index (IS_OPTN) read FtotalTimeAirframe write SettotalTimeAirframe stored totalTimeAirframe_Specified;
  end;

  // ************************************************************************ //
  // XML       : StatusType, global, <complexType>
  // Namespace : http://www.fubar.com/core/CommonTypes
  // ************************************************************************ //
  StatusType = class(TRemotable)
  private
    Fcode: StatusCodeType;
    Ferrors: ErrorContainerType;
    Ferrors_Specified: boolean;
    procedure Seterrors(Index: Integer; const AErrorContainerType: ErrorContainerType);
    function  errors_Specified(Index: Integer): boolean;
  public
    destructor Destroy; override;
  published
    property code:   StatusCodeType      read Fcode write Fcode;
    property errors: ErrorContainerType  Index (IS_OPTN) read Ferrors write Seterrors stored errors_Specified;
  end;

  // ************************************************************************ //
  // XML       : AirportType, global, <complexType>
  // Namespace : http://www.fubar.com/core/CommonTypes
  // ************************************************************************ //
  AirportType = class(TRemotable)
  private
    FfubarId: Int64;
    FfubarId_Specified: boolean;
    FicaoCode: string;
    FicaoCode_Specified: boolean;
    FiataCode: string;
    FiataCode_Specified: boolean;
    FfaaCode: string;
    FfaaCode_Specified: boolean;
    Fname_: string;
    Fname__Specified: boolean;
    Fcity: string;
    Fcity_Specified: boolean;
    Fcountry: string;
    Fcountry_Specified: boolean;
    procedure SetfubarId(Index: Integer; const AInt64: Int64);
    function  fubarId_Specified(Index: Integer): boolean;
    procedure SeticaoCode(Index: Integer; const Astring: string);
    function  icaoCode_Specified(Index: Integer): boolean;
    procedure SetiataCode(Index: Integer; const Astring: string);
    function  iataCode_Specified(Index: Integer): boolean;
    procedure SetfaaCode(Index: Integer; const Astring: string);
    function  faaCode_Specified(Index: Integer): boolean;
    procedure Setname_(Index: Integer; const Astring: string);
    function  name__Specified(Index: Integer): boolean;
    procedure Setcity(Index: Integer; const Astring: string);
    function  city_Specified(Index: Integer): boolean;
    procedure Setcountry(Index: Integer; const Astring: string);
    function  country_Specified(Index: Integer): boolean;
  published
    property fubarId: Int64   Index (IS_ATTR or IS_OPTN) read FfubarId write SetfubarId stored fubarId_Specified;
    property icaoCode:  string  Index (IS_OPTN) read FicaoCode write SeticaoCode stored icaoCode_Specified;
    property iataCode:  string  Index (IS_OPTN) read FiataCode write SetiataCode stored iataCode_Specified;
    property faaCode:   string  Index (IS_OPTN) read FfaaCode write SetfaaCode stored faaCode_Specified;
    property name_:     string  Index (IS_OPTN) read Fname_ write Setname_ stored name__Specified;
    property city:      string  Index (IS_OPTN) read Fcity write Setcity stored city_Specified;
    property country:   string  Index (IS_OPTN) read Fcountry write Setcountry stored country_Specified;
  end;

  // ************************************************************************ //
  // XML       : ScheduleType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  ScheduleType = class(TRemotable)
  private
    Fclear: Boolean;
    Faircraft: AircraftType;
    Fbegin_: TXSDateTime;
    Fbegin__Specified: boolean;
    Fend_: TXSDateTime;
    Fend__Specified: boolean;
    Fguarantee: Array_Of_GuaranteeActivityType;
    Fguarantee_Specified: boolean;
    Factivity: Array_Of_GenericActivityType;
    Factivity_Specified: boolean;
    FpaxActivity: Array_Of_PAXActivityType;
    FpaxActivity_Specified: boolean;
    procedure Setbegin_(Index: Integer; const ATXSDateTime: TXSDateTime);
    function  begin__Specified(Index: Integer): boolean;
    procedure Setend_(Index: Integer; const ATXSDateTime: TXSDateTime);
    function  end__Specified(Index: Integer): boolean;
    procedure Setguarantee(Index: Integer; const AArray_Of_GuaranteeActivityType: Array_Of_GuaranteeActivityType);
    function  guarantee_Specified(Index: Integer): boolean;
    procedure Setactivity(Index: Integer; const AArray_Of_GenericActivityType: Array_Of_GenericActivityType);
    function  activity_Specified(Index: Integer): boolean;
    procedure SetpaxActivity(Index: Integer; const AArray_Of_PAXActivityType: Array_Of_PAXActivityType);
    function  paxActivity_Specified(Index: Integer): boolean;
  public
    destructor Destroy; override;
  published
    property clear:       Boolean                         read Fclear write Fclear;
    property aircraft:    AircraftType                    read Faircraft write Faircraft;
    property begin_:      TXSDateTime                     Index (IS_OPTN) read Fbegin_ write Setbegin_ stored begin__Specified;
    property end_:        TXSDateTime                     Index (IS_OPTN) read Fend_ write Setend_ stored end__Specified;
    property guarantee:   Array_Of_GuaranteeActivityType  Index (IS_OPTN or IS_UNBD or IS_NLBL) read Fguarantee write Setguarantee stored guarantee_Specified;
    property activity:    Array_Of_GenericActivityType    Index (IS_OPTN or IS_UNBD or IS_NLBL) read Factivity write Setactivity stored activity_Specified;
    property paxActivity: Array_Of_PAXActivityType        Index (IS_OPTN or IS_UNBD or IS_NLBL) read FpaxActivity write SetpaxActivity stored paxActivity_Specified;
  end;

  // ************************************************************************ //
  // XML       : AbstractActivityType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  AbstractActivityType = class(TRemotable)
  private
    FfubarRequestId: Int64;
    FfubarRequestId_Specified: boolean;
    Fstate: ActivityState;
    Fstate_Specified: boolean;
    Fbegin_: TXSDateTime;
    Fend_: TXSDateTime;
    FvendorCode: string;
    Fnote: string;
    Fnote_Specified: boolean;
    FtripIdentifier: string;
    FtripIdentifier_Specified: boolean;
    Ffbo: ActivityFBOType;
    Ffbo_Specified: boolean;
    Fregulation: ActivityRegulationType;
    Fregulation_Specified: boolean;
    procedure SetfubarRequestId(Index: Integer; const AInt64: Int64);
    function  fubarRequestId_Specified(Index: Integer): boolean;
    procedure Setstate(Index: Integer; const AActivityState: ActivityState);
    function  state_Specified(Index: Integer): boolean;
    procedure Setnote(Index: Integer; const Astring: string);
    function  note_Specified(Index: Integer): boolean;
    procedure SettripIdentifier(Index: Integer; const Astring: string);
    function  tripIdentifier_Specified(Index: Integer): boolean;
    procedure Setfbo(Index: Integer; const AActivityFBOType: ActivityFBOType);
    function  fbo_Specified(Index: Integer): boolean;
    procedure Setregulation(Index: Integer; const AActivityRegulationType: ActivityRegulationType);
    function  regulation_Specified(Index: Integer): boolean;
  public
    destructor Destroy; override;
  published
    property fubarRequestId: Int64                   Index (IS_ATTR or IS_OPTN) read FfubarRequestId write SetfubarRequestId stored fubarRequestId_Specified;
    property state:            ActivityState           Index (IS_OPTN) read Fstate write Setstate stored state_Specified;
    property begin_:           TXSDateTime             read Fbegin_ write Fbegin_;
    property end_:             TXSDateTime             read Fend_ write Fend_;
    property vendorCode:       string                  read FvendorCode write FvendorCode;
    property note:             string                  Index (IS_OPTN) read Fnote write Setnote stored note_Specified;
    property tripIdentifier:   string                  Index (IS_OPTN) read FtripIdentifier write SettripIdentifier stored tripIdentifier_Specified;
    property fbo:              ActivityFBOType         Index (IS_OPTN) read Ffbo write Setfbo stored fbo_Specified;
    property regulation:       ActivityRegulationType  Index (IS_OPTN) read Fregulation write Setregulation stored regulation_Specified;
  end;

  // ************************************************************************ //
  // XML       : GuaranteeActivityType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  GuaranteeActivityType = class(AbstractActivityType)
  private
    Fduration: TXSDuration;
    Fairport: AirportType;
  public
    destructor Destroy; override;
  published
    property duration: TXSDuration  read Fduration write Fduration;
    property airport:  AirportType  read Fairport write Fairport;
  end;

  // ************************************************************************ //
  // XML       : GenericActivityType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  GenericActivityType = class(AbstractActivityType)
  private
    FstartAirport: AirportType;
    FendAirport: AirportType;
  public
    destructor Destroy; override;
  published
    property startAirport: AirportType  read FstartAirport write FstartAirport;
    property endAirport:   AirportType  read FendAirport write FendAirport;
  end;

  // ************************************************************************ //
  // XML       : PAXActivityType, global, <complexType>
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // ************************************************************************ //
  PAXActivityType = class(GenericActivityType)
  private
    Fpax: Integer;
  published
    property pax: Integer  read Fpax write Fpax;
  end;

  // ************************************************************************ //
  // Namespace : http://www.fubar.com/integration/ScheduleUpload
  // soapAction: http://www.fubar.com/integration/ScheduleUpload#request
  // transport : http://schemas.xmlsoap.org/soap/http
  // style     : document
  // use       : literal
  // binding   : ScheduleUploadWebServiceV2ImplPortBinding
  // service   : ScheduleUploadV2WS
  // port      : ScheduleUploadWebServiceV2ImplPort
  // URL       : https://development.fubar.com:443/fubar/fubarIntegrationWeb/ws/ScheduleUploadV2.ws
  // ************************************************************************ //
  ScheduleUploadV2WS = interface(IInvokable)
  ['{85B5395B-1FC2-0EB1-EDB6-1BDB3D2FFE23}']
    function  request(const schedules: ScheduleContainerType): StatusType; stdcall;
  end;

function GetScheduleUploadV2WS(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): ScheduleUploadV2WS;

implementation
  uses SysUtils;

function GetScheduleUploadV2WS(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): ScheduleUploadV2WS;
const
  defWSDL = 'https://development.fubar.com/fubar/fubarIntegrationWeb/ws/ScheduleUploadV2.ws?wsdl';
  defURL  = 'https://development.fubar.com:443/fubar/fubarIntegrationWeb/ws/ScheduleUploadV2.ws';
  defSvc  = 'ScheduleUploadV2WS';
  defPrt  = 'ScheduleUploadWebServiceV2ImplPort';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as ScheduleUploadV2WS);
    if UseWSDL then begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

destructor ScheduleType.Destroy;
var
  I: Integ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T04:05:37.377

实例化 PAXActivityType 对象不会自动实例化 begin_TXSDateTime 对象（或其任何属性）。您必须在实例化 PAXActivityType 之后实例化 begin_ ，或者将一些构造代码写入 PAXActivityType ，以便在构造函数中为您执行此操作。

# xml - XSLT 中的 generate_id

> ID：10805471
> 
> 赞同：0
> 
> 时间：2012-05-29T19:30:38.357
> 
> 标签：xml, xslt, xpath

我在生成 ID 时打印 HTML 标记时遇到问题。我创建了两个 for 循环来为每个循环生成 id，`<small>`但我不知道如何正确生成 HTML。具体来说，我无法在段落段落粗体块中打印出第二段。任何帮助表示赞赏！

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="right.xsl"?>

<div>

  <ul>
    <li><a href="#d1e11">(5:30 - 7:30 p.m. Downtown)</a></li>
    <li><a href="#d1e17">(6:00 - 8:00 p.m. Burnaby)</a></li>
    <li><a href="#d1e23">(5:30 - 6:30 p.m. Downtown)</a></li>
  </ul>

  <h3>Info Sessions</h3>
  <a name="d1e11"></a>
  <p>Full-time Programs (CST, CIT Diplomas and BTech)</p>
  <p>March 8, 2012 </p>
  <b><small>(5:30 - 7:30 p.m. Downtown)</small></b>
  <br/>
  <br/>
  <a name="d1e17"></a>
  <p>Computing Part-time Studies</p>
  <p>March 28, 2012</p>
  <b><small>(6:00 - 8:00 p.m. Burnaby)</small></b>
  <br/>
  <br/>
  <a name="d1e23"></a>
  <p>HTP - Technical Web Designer (TWD)</p>
  <p>March 21, 2012</p>
  <b><small>(5:30 - 6:30 p.m. Downtown)</small></b>
  <br/>
  <br/>
</div> 
```

XSLT 文件

```
<xsl:for-each select="div/b">
  <li>
    <a href="#{generate-id(small)}">
      <xsl:value-of select="small"/>
    </a>
  </li>
</xsl:for-each>

</ul>
</div>
<h3>Info Sessions</h3>

<xsl:for-each select="div/b">
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>   
  <p><xsl:value-of select="preceding-sibling::p"/></p>  
  <a name="{generate-id(small)}"><xsl:value-of select="small"/></a>
  <hr/>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:07:22.020

考虑这段代码：

```
<xsl:value-of select="preceding-sibling::p"/> 
```

在 XSLT 1.0 中，xsl:value-of 输出节点集中第一个节点的值（按文档顺序）并忽略其他节点。（因此我猜您使用的是 XSLT 1.0）。您的表达式选择所有前面的兄弟姐妹，并输出其中的第一个。您只想输出前一个兄弟，即

```
<xsl:value-of select="preceding-sibling::p[1]"/> 
```

# mongodb - 使用 MongoDB 更新内部集合中的特定记录

> ID：10805474
> 
> 赞同：1
> 
> 时间：2012-05-29T19:31:11.040
> 
> 标签：mongodb, pymongo, mongodb-query

使用 MongoDB，如果我定义一个包含字典值数组的集合，本质上是集合中的集合，是否可以获取和更新内部集合的特定记录？

例如：

```
user {
   'name': unicode,
   'game_list: [ {'game_name': unicode, level: int, 'rank': int} ]
} 
```

在此示例中，是否可以使用 Python PyMongo 从游戏列表中为名称为 X 和游戏名称为 Y 的用户获取和更新游戏记录？因此，如果该用户玩了 10 场游戏，我不想获取和更新整个 game_list，而只想获取和更新一条游戏记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:17:10.650

*在 mongodb 中，您可以使用位置运算符*更新内部集合的元素

 *```
db.user.update({ name : "foo", "game_list.game_name" : "bar" }, { $set : { "game_list.$.level" : 99 }}) 
```

见：[http ://docs.mongodb.org/manual/reference/operator/update/positional/](http://docs.mongodb.org/manual/reference/operator/update/positional/)*

# c# - 文本框 Onclick = clear value ，退出文本框时设置默认值？

> ID：10805478
> 
> 赞同：1
> 
> 时间：2012-05-29T19:31:26.403
> 
> 标签：c#, asp.net

我有这个在

```
<asp:TextBox ID="svv" OnClick="this.value=''" runat="server">Hello...</asp:TextBox>

OnClick="this.value=''" // On mouse click in textbox it will deleted the text. 
```

我怎样才能设置类似的东西

`Unclick"this.defautlvalue"; // something like this.`

因此，当我单击控件时，它将清除值，如果我退出控件（例如，单击另一个文本框），它将返回文本框的默认值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:57:34.673

特别是对于 C# .NET WebForms，您有几个选择。

[您可以通过执行以下操作完全使用jquery](http://www.jquery.com)前端：

```
 $('selector').blur(function() {
         // Make sure you do some validation so it doesn't clear everytime
         $('selector').val('My Default Text');
    }); 
```

*   或者，如果您使用的是[AJAX 控件工具包](http://www.asp.net/ajaxlibrary/act.ashx)，您可以简单地使用文本框水印控件，只需设置一些属性，它就可以完成您所说的事情。

*   您也可以像@m.edmondson 在他的回答中解释一样直接使用javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:33:56.040

我想你正在寻找`onBlur`：

`<input type="text" id="fname" onblur="upperCase()">`

这将`upperCase()`在用户离开盒子时调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:33:56.473

`onblur`您可以附加到控件焦点更改时调用的客户端事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T19:40:00.500

还值得将默认值存储在输入的属性中，以便您可以在模糊事件中引用它。相信 ASP.NET Web 表单，您必须在代码隐藏中添加该属性。

# ruby-on-rails - Rails - 如何检查在线用户？

> ID：10805479
> 
> 赞同：4
> 
> 时间：2012-05-29T19:31:30.557
> 
> 标签：ruby-on-rails, ruby

检查页面上当前在线用户数量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-17T04:12:35.053

## 保存在 Redis 中

就像*Yuri Barbashow 的* [回答](https://stackoverflow.com/a/8518787/1816872)一样，但使用了**Redis**（[Rails 的不错介绍](http://jimneath.org/2011/03/24/using-redis-with-ruby-on-rails.html#redis_and_rails)）：

```
# config/initializers/redis.rb

$redis_onlines = Redis.new
# it's the simplest way, but i'd recommend:
# $redis_onlines = Redis.new path: "/tmp/redis.sock", db: 15, driver: :hiredis
# => hiredis driver more fast
# => use unix domain socket if it's possible
# => default db is No.0, but it is better to use a specific database
#    and No.0 leave for testing-development-and-more-and-more 
```

宝石文件

```
# Gemfile

gem 'redis'
gem 'hiredis' # optional
# don't forget to run `bundle` 
```

设置`online`

```
# app/controllers/application_controller.rb
after_filter :set_online
# the Rails 4 way is:
# after_action :set_online

private

  # set to online
  def set_online
    if !!current_user
      # using separate Redis database
      # such as $redis_onlines = Redis.new db: 15
      # value not need, only key
      $redis_onlines.set( current_user.id, nil, ex: 10*60 )
      # 'ex: 10*60' - set time to live - 10 minutes
    end
  end 
```

在线？

```
# app/models/user.rb

def online?
  $redis_onlines.exists( self.id )
end 
```

和小红利（如果你使用单独的 redis 数据库）

```
# app/cpntrollers/application_controller.rb

def all_who_are_in_touch
  $redis_onlines.keys
  # => [ "123", "234", "1", "23" ]
  # array of ids
end 
```

* * *

### #UDP1 匿名返工

设置`online`

```
# app/controllers/application_controller.rb

  def set_online
    if !!current_user
      $redis_onlines.set( "user:#{current_user.id}", nil, ex: 10*60 )
    else
      $redis_onlines.set( "ip:#{request.remote_ip}", nil, ex: 10*60 )
    end
  end 
```

在线？

```
# app/models/user.rb

def online?
  $redis_onlines.exists( "user:#{self.id}" )
end 
```

所有联系的人：

```
# app/cpntrollers/application_controller.rb

def all_signed_in_in_touch
  ids = []
  $redis_onlines.scan_each( match: 'user*' ){|u| ids << u.gsub("user:", "") }
  ids
end

def all_anonymous_in_touch
  $redis_onlines.scan_each( match: 'ip*' ).to_a.size
end

def all_who_are_in_touch
  $redis_onlines.dbsize
end 
```

* * *

### #UDP2 建议

1.  使用 a`before_filter`而不是 a`after_filter`

```
# app/controllers/application_controller.rb
  before_filter :set_online # before_action for Rails 4 
```

2.  如果您观看匿名（例如`session[:user_id]`当前用户的 id）

```
# app/controllers/session_controller.rb
  before_filter :clear_from_signed_in_touch, only: :destroy
  before_filter :clear_from_anonymous_in_touch, only: :create

  private

    def clear_from_anonymous_in_touch
      $redis_onlines.del( "ip:#{request.remote_ip}" )
    end

    def clear_from_signed_in_touch
      $redis_onlines.del( "user:#{session[:user_id]}" )
    end 
```

后记：[Redis](http://redis.io/) | [设置](http://redis.io/commands/set)| [存在](http://redis.io/commands/exists)| [过期](http://redis.io/commands/expire)| [扫描](http://redis.io/commands/scan)| [扫描每个](http://rdoc.info/github/redis/redis-rb/Redis#scan_each-instance_method)| [redis-rb](https://github.com/redis/redis-rb) | [雇佣兵](https://github.com/redis/hiredis-rb)| [不错的入门介绍](http://jimneath.org/2011/03/24/using-redis-with-ruby-on-rails.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T19:37:29.937

最简单的方法是将 last_online 时间戳添加到您的用户模型中，然后为名为 online_now 的用户定义一个范围

```
class User < ActiveRecord::Base
  def self.online_now
    where("last_online > ?", 15.minutes.ago)
  end
end 
```

# django - Django App 的高 CPU 使用率

> ID：10805481
> 
> 赞同：2
> 
> 时间：2012-05-29T19:31:41.797
> 
> 标签：django

我创建了一个非常简单的 Django 应用程序，它在一定程度上产生了高 CPU 负载：使用简单模型列表（其中 20 个）和每页 5-6 个 SQL 查询呈现一个简单的通用视图，产生一个 apache 进程，它将 CPU 负载增加 30 % - 50%。虽然内存使用量还不错（30MB），但据我了解，CPU 负载并不好，这不是因为 apache/wsgi 设置或其他原因，当我通过 runserver 运行应用程序时会发生相同的 CPU 负载。

因为，我是 Django 新手，所以我想问：1）这些 30-50% 的数字对于 Django 应用程序来说是常见的吗？(Django 1.4, ubuntu 12.04, python 2.7.3) 2) 如何分析 CPU 负载？我从这里使用了一个配置文件中间件：http: [//djangosnippets.org/snippets/186/](http://djangosnippets.org/snippets/186/)但它只显示 ms 数字而不是 CPU 负载数字并且没有什么特别的，所以我如何确定是什么消耗了这么多 CPU 能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:09:18.623

CPU 使用率本身并不能说明您的应用程序的效率。衡量性能的更重要指标是您的应用程序可以处理多少请求/秒。您的机器所使用的处理器类型自然也会对结果产生巨大影响。

我建议您运行`ab`多个并发请求并将请求/秒数与一些基准进行比较（网络上应该有很多）。ab 会尝试测试最大吞吐量，因此很自然地会充分利用其中一种资源（瓶颈），通常是disk-io。例如，如果您碰巧使 CPU 使用率接近 100%，这可能意味着您在某处浪费了 CPU（reqs/s 低），或者您已经很好地优化了磁盘 io（reqs/s 高）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:06:05.163

查看 %CPU 列不是很准确。我当然一直看到 50%-100% CPU 的峰值。它并不表示 CPU 使用了多长时间，只是我们在那个特定时刻达到了那个值。这些将属于最小/最大数字，而不是您的平均 CPU 使用率。

另一个重要的部分：假设您像我一样有 4 个内核，这意味着 30-50% 的数字`top`超出了最大值 400%。顶部的 50% 意味着一个核心的 50%，四个核心的 12.5%，等等。

您可以按顶部的 1 来查看各个核心 cpu 数据。

# android - 如何在Android中随机制作布尔按钮？

> ID：10805495
> 
> 赞同：1
> 
> 时间：2012-05-29T19:32:30.370
> 
> 标签：android, button, random, boolean

我有四个按钮，它们是布尔值——我想让它们在每次图像和其中的文本发生变化时都不同——即，一旦一个按钮为真，其他时候它就会为假。如何才能做到这一点？感谢你 ！

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    super.onOptionsItemSelected(item);
    startActivity(item.getIntent());
    return true;
}

public void onNoButton(View v) {
    handleAnswerAndShowNextQuestion(false);
}

public void onYesButton(View v) {
    handleAnswerAndShowNextQuestion(true);
}

private void handleAnswerAndShowNextQuestion(boolean bAnswer) {
    int curScore = mGameSettings.getInt(GAME_PREFERENCES_SCORE, 0);
    int nextQuestionNumber = mGameSettings.getInt(GAME_PREFERENCES_CURRENT_QUESTION, 1) + 1;

    Editor editor = mGameSettings.edit();
    editor.putInt(GAME_PREFERENCES_CURRENT_QUESTION, nextQuestionNumber);

    // Log the number of "yes" answers only
    if (bAnswer == true) {
        editor.putInt(GAME_PREFERENCES_SCORE, curScore + 1);
    }
    editor.commit();

    if (mQuestions.containsKey(nextQuestionNumber) == false) {
        // Load next batch
        try {
            loadQuestionBatch(nextQuestionNumber);
        } catch (Exception e) {
            Log.e(DEBUG_TAG, "Loading updated question batch failed", e);
        }
    }

    if (mQuestions.containsKey(nextQuestionNumber) == true) {
        // Update question text
        TextSwitcher questionTextSwitcher = (TextSwitcher) findViewById(R.id.TextSwitcher_QuestionText);
        questionTextSwitcher.setText(getQuestionText(nextQuestionNumber));

        // Update question image
        ImageSwitcher questionImageSwitcher = (ImageSwitcher) findViewById(R.id.ImageSwitcher_QuestionImage);
        Drawable image = getQuestionImageDrawable(nextQuestionNumber);
        questionImageSwitcher.setImageDrawable(image);
    } else {
        // Tell the user we don't have any new questions at this time
        handleNoQuestions();
    }

}

  private void handleNoQuestions() {
    TextSwitcher questionTextSwitcher = (TextSwitcher) findViewById(R.id.TextSwitcher_QuestionText);
    questionTextSwitcher.setText(getResources().getText(R.string.no_questions));
    ImageSwitcher questionImageSwitcher = (ImageSwitcher) findViewById(R.id.ImageSwitcher_QuestionImage);
    questionImageSwitcher.setImageResource(R.drawable.noquestion);

    // Disable yes button
    Button yesButton = (Button) findViewById(R.id.Button_Yes);
    yesButton.setEnabled(false);

    // Disable no button
    Button noButton = (Button) findViewById(R.id.Button_No);
    noButton.setEnabled(false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:54:55.403

将按钮用作单选按钮是不明智的。两者都是不同的，有不同的目的，而且这个想法在语义上是错误的。

将您的单选按钮设置为普通按钮。

这是一个关于皮肤安卓的好指南

[http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/](http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:40:19.690

这很简单。只需像平常一样创建您的环境（图像和按钮）。为按钮分配适当的侦听器。然后创建一个新的 Random 对象。获取随机布尔值。如果布尔值 == true，则首先将`true`按钮添加到布局中，否则添加`false`按钮。

```
public View getEnvironment(Context context) {
        RelativeLayout rl = new RelativeLayout(context);

        ImageView image = new ImageView(context);
        image.setId(0);
        // Instantiate image (add image and listener is needed)
        Button truee = new Button(context);
        // Add event listener
        Button falsee = new Button(context);
        // Add event listener

        Random rand = new Random();

        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(80, 80);
        lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        lp.addRule(RelativeLayout.CENTER_HORIZONTAL);

        image.setLayoutParams(lp);

        RelativeLayout.LayoutParams left = new RelativeLayout.LayoutParams(40, 80);
        lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        lp.addRule(RelativeLayout.BELOW, 0);

        RelativeLayout.LayoutParams right = new RelativeLayout.LayoutParams(40, 80);
        lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        lp.addRule(RelativeLayout.BELOW, 0);

        if (rand.nextBoolean()) {
            truee.setLayoutParams(left);
            falsee.setLayoutParams(right);
        } else {
            truee.setLayoutParams(right);
            falsee.setLayoutParams(left);
        }

        rl.addView(image);
        rl.addView(truee);
        rl.addView(falsee);

        return rl;
    } 
```

## 编辑：

我没有意识到 OP 在发布之前要求使用[CheckBox](http://developer.android.com/reference/android/widget/CheckBox.html)。我会留下这个以防万一有人想要它。

# ruby-on-rails - 如何使用 jQuery 将新的 li 元素添加到 content_tag_for 块中

> ID：10805496
> 
> 赞同：0
> 
> 时间：2012-05-29T19:32:33.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试编写一个咖啡脚本以将新元素添加到 content_tag_for 块中。如果可能的话，为了代码简单起见，使用部分。

```
<ul id="documents">
  <% @documents.each do |document| %>
    <%= content_tag_for :li, document do %>
           <%= document.title %>
           <%= document.position %>
           <%= link_to 'Delete', document, method: :delete, remote: true %>
    <% end %>
  <% end %>
</ul> 
```

还有我的 create.js.coffee 尝试。但是使用部分导致的问题，因为当我运行它时，添加的元素没有

*   换行、中断排序和样式化行为，直到页面重新加载之后。我当然想使用 jQuery 异步追加新记录。

    ```
    $('<%= escape_javascript(render(:partial => @document))%>')
      .prependTo('#documents')
      .hide()
      .fadeIn()
    $('#new_document')[0].reset() 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:01:27.973

解决了。我更新的 create.js.coffee

```
$('<%= content_tag_for :li, @document do %>
          <%= render @document %>
        <% end %>')
  .prependTo('#documents')
  .hide()
  .fadeIn()
$('#new_document')[0].reset() 
```

# web-services - 如何上传图像并将一些数据发布到 MVC4 wep api 方法？

> ID：10805501
> 
> 赞同：2
> 
> 时间：2012-05-29T19:32:53.517
> 
> 标签：web-services, file-upload, asp.net-mvc-4, asp.net-web-api

我已经尝试了几天，但我无法达到任何成功的结果。我需要发布带有他们信息的图像（创建的用户名）。

这是我的方法；

```
[HttpPost]
    public Task<HttpResponseMessage> PostFile(string createdByName)
    {
        HttpRequestMessage request = this.Request;
        if (!request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        string root = System.Configuration.ConfigurationSettings.AppSettings["TempUploadDir"];
        var provider = new MultipartFormDataStreamProvider(root);

        var task = request.Content.ReadAsMultipartAsync(provider).
            ContinueWith<HttpResponseMessage>(o =>
            {
                AddImages(provider.BodyPartFileNames);
                string file1 = provider.BodyPartFileNames.First().Value;
                // this is the file name on the server where the file was saved 
                return new HttpResponseMessage()
                {
                    Content = new StringContent("File uploaded.")
                };
            }
        );
        return task;
    } 
```

这是我的 TypeFormatterClass 添加 global.asax

```
public class MultiFormDataMediaTypeFormatter : FormUrlEncodedMediaTypeFormatter
{
    public MultiFormDataMediaTypeFormatter()
        : base()
    {
        this.SupportedMediaTypes.Add(new MediaTypeHeaderValue("multipart/form-data"));
    }

    protected override bool CanReadType(Type type)
    {
        return true;
    }

    protected override bool CanWriteType(Type type)
    {
        return false;
    }

    protected override Task<object> OnReadFromStreamAsync(Type type, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext)
    {
        var contents = formatterContext.Request.Content.ReadAsMultipartAsync().Result;
        return Task.Factory.StartNew<object>(() =>
        {
            return new MultiFormKeyValueModel(contents);
        });
    }

    class MultiFormKeyValueModel : IKeyValueModel
    {
        IEnumerable<HttpContent> _contents;
        public MultiFormKeyValueModel(IEnumerable<HttpContent> contents)
        {
            _contents = contents;
        }

        public IEnumerable<string> Keys
        {
            get
            {
                return _contents.Cast<string>();
            }
        }

        public bool TryGetValue(string key, out object value)
        {
            value = _contents.FirstDispositionNameOrDefault(key).ReadAsStringAsync().Result;
            return true;
        }
    }
} 
```

**当我发布图像和“createdByName”时，我可以访问图像，但我无法设置参数。我怎样才能做到这一点？**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:57:35.150

要获取 createdByName 字段，请在 ContinueWith 内：

```
var parts = o.Result;

HttpContent namePart = parts.FirstDispositionNameOrDefault("createdByName");
if (namePart == null)
{
  throw new HttpResponseException(HttpStatusCode.BadRequest);
}
string name = namePart.ReadAsStringAsync().Result; 
```

有关更详细的示例，请参阅：

[http://www.asp.net/web-api/overview/working-with-http/html-forms-and-multipart-mime#multipartmime](http://www.asp.net/web-api/overview/working-with-http/html-forms-and-multipart-mime#multipartmime)

# c# - MVC 剃刀单选按钮

> ID：10805502
> 
> 赞同：64
> 
> 时间：2012-05-29T19:33:01.783
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

**在部分视图** 中，我使用这样的文本框。

```
@model Dictionary<string, string>
@Html.TextBox("XYZ", @Model["XYZ"]) 
```

我如何生成单选按钮，并在表单集合中获得所需的值作为 YES/NO True/False）？目前，如果我为以下选择任何值，则“ABC”为空。

```
 <label>@Html.RadioButton("ABC", @Model["ABC"])Yes</label>
   <label>@Html.RadioButton("ABC", @Model["ABC"])No</label> 
```

**控制器**

```
 public int Create(int Id, Dictionary<string, string> formValues)
        {
         //Something Something
        } 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-29T19:51:38.370

为了对多个项目执行此操作，请执行以下操作：

```
foreach (var item in Model)
{
    @Html.RadioButtonFor(m => m.item, "Yes") @:Yes
    @Html.RadioButtonFor(m => m.item, "No") @:No
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-29T20:30:49.540

简单地 ：

```
 <label>@Html.RadioButton("ABC", True)Yes</label>
   <label>@Html.RadioButton("ABC", False)No</label> 
```

但是您应该始终使用 cacho 建议的强类型模型。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-29T19:51:25.557

[我用这个](https://stackoverflow.com/a/2559570/376382)SO 答案解决了同样的问题。

基本上，它将单选按钮绑定到强类型模型的布尔属性。

```
@Html.RadioButton("blah", !Model.blah) Yes 
@Html.RadioButton("blah", Model.blah) No 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-10-21T09:47:39.670

我这样做的方式如下：

```
 @Html.RadioButtonFor(model => model.Gender, "M", false)@Html.Label("Male")
  @Html.RadioButtonFor(model => model.Gender, "F", false)@Html.Label("Female") 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-29T20:17:13.447

```
<label>@Html.RadioButton("ABC", "YES")Yes</label>
<label>@Html.RadioButton("ABC", "NO")No</label> 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-03-13T18:08:17.723

**MVC5**剃刀视图

下面的示例还将标签与单选按钮相关联（单击相关标签时将选择单选按钮）

```
// replace "Yes", "No" --> with, true, false if needed
@Html.RadioButtonFor(m => m.Compatible, "Yes", new { id = "compatible" })
@Html.Label("compatible", "Compatible")

@Html.RadioButtonFor(m => m.Compatible, "No", new { id = "notcompatible" })
@Html.Label("notcompatible", "Not Compatible") 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-08-25T17:12:59.843

MVC Razor 提供了一个优雅的 Html Helper，称为**RadioButton**，带有两个参数（这是通用的，但我们可以重载它直到五个参数），即一个带有组名，另一个是值

```
<div class="col-md-10">
    Male:   @Html.RadioButton("Gender", "Male")
    Female: @Html.RadioButton("Gender", "Female")
</div> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-04-28T03:06:08.870

```
<p>@Html.RadioButtonFor(x => x.type, "Item1")Item1</p>
<p>@Html.RadioButtonFor(x => x.type, "Item2")Item2</p>
<p>@Html.RadioButtonFor(x => x.type, "Item3")Item3</p> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-03-05T01:04:24.807

这对我有用。

```
@{ var dic = new Dictionary<string, string>() { { "checked", "" } }; }
@Html.RadioButtonFor(_ => _.BoolProperty, true, (@Model.BoolProperty)? dic: null) Yes
@Html.RadioButtonFor(_ => _.BoolProperty, false, (!@Model.HomeAddress.PreferredMail)? dic: null) No 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-20T19:15:58.263

我想分享一种在不使用 @Html.RadioButtonFor 帮助器的情况下执行单选按钮（和整个 HTML 表单）的方法，尽管我认为 @Html.RadioButtonFor 可能是更好和更新的方法（一方面，它是强类型的，所以与模型属性密切相关）。不过，这是一种老式的、不同的方法：

```
 <form asp-action="myActionMethod" method="post">
        <h3>Do you like pizza?</h3>
        <div class="checkbox">
            <label>
                <input asp-for="likesPizza"/> Yes
            </label>
        </div>
    </form> 
```

此代码可以放在 myView.cshtml 文件中，还可以使用类来获取单选按钮（复选框）格式。

# macos - 带有多个窗口的 Mac SDK 全屏

> ID：10805509
> 
> 赞同：3
> 
> 时间：2012-05-29T19:33:49.250
> 
> 标签：macos, cocoa, nswindow

我正在制作一个具有全屏支持的应用程序（通过界面生成器启用）。该应用程序有另一个 NSWindow，它不时作为一种“检查器”出现在页面等中。但是，当主窗口全屏显示时，第二个窗口并没有伴随它，我必须回到我的桌面才能看到它。

有没有办法解决这个问题？即当 Safari 全屏时，您可以打开活动窗口，它以全屏模式伴随 safari。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:03:45.523

如果您实际上已经构建了一个检查器样式的面板窗口（例如，通过将面板或 HUD 窗口从 Xcode 对象库拖到您的 nib 中），它将自动以全屏显示主窗口。

我认为最低要求是：

*   collectionBehavior 包括 NSWindowCollectionBehaviorFullScreenAuxiliary
*   collectionBehavior 不包括 NSWindowCollectionBehaviorFullScreenPrimary
*   collectionBehavior 包括 NSWindowCollectionBehaviorTransient 或 level >= NSFloatingWindowLevel

如果您阅读有关全屏模式的文档，大部分内容都会得到解释，尽管需要通过反复试验来发现一些细节（例如，何时检查这些值……）。

# apache2 - 为什么 Apache 不将我的 IP 地址重定向到我服务器上的所需位置？

> ID：10805520
> 
> 赞同：5
> 
> 时间：2012-05-29T19:34:45.893
> 
> 标签：apache2

我做了一个简单的页面`/home/david/mainSite/index.html`。然后我在 Apache 中添加了一个虚拟主机来将我的 IP 地址重定向到这个页面。

```
<VirtualHost *:80>
ServerName 74.181.105.228
DocumentRoot /home/david/mainSite
</VirtualHost> 
```

但是，当我在重新启动 Apache 后转到时`74.181.105.228`，我得到一个包含此文本而不是“index.html”的页面。

```
Welcome to mydomain.com!
This is the default web page for this server.
The web server software is running but no content has been added, yet. 
```

为什么 Apache 重定向到默认页面而不是“/home/david/mainSite/index.html”？

这是我的“/etc/apache2/sites-available/default”文件的样子。

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:41:00.473

我发现了答案！这很棘手。

在“apache2.conf”中，我最初有`ServerName 74.181.105.228`，这使得通过浏览器访问 74.181.105.228 会加载我服务器的默认页面。

更改“apache2.conf”中的此值以`ServerName mydomain.com`解决问题，因为 Apache 不再将 74.181.105.228 指向我服务器的默认页面。反过来，我可以指示 74.181.105.228 从我的文件系统中的某个目录加载页面。

我的虚拟主机块仍然存在

```
<VirtualHost *:80>
ServerName 74.181.105.228
DocumentRoot /home/david/mainSite
</VirtualHost 
```

# java - 如何存储大型 Java 对象/多维数组？

> ID：10805523
> 
> 赞同：0
> 
> 时间：2012-05-29T19:34:53.810
> 
> 标签：java, database, arrays, int

我正在编写一个在 Tomcat 服务器和 JavaScript 客户端上运行的 Java 后端的 Web 应用程序。

在后端，我必须处理一个大型 int[][][] 数组，其中包含 CT 扫描的信息。大小约为。1024x1024x200。

我只想在需要处理图像切片等新数据时将此数组加载到内存中，并将其存储在某种数据库中以供剩余时间使用。

到目前为止我尝试过的事情：

*   使用JDBM3存储String，int[][][] Hashmap，遇到内存不足错误

*   序列化对象并使用 bytea[] 数据类型将其保存到 PostgreSQL-DB 中，正确存储但再次加载时出现内存错误。

所以我的第一个问题是，我怎样才能保存这么大的数组（哪个数据库，方法）？它应该快速加载，并且应该有某种多用户访问安全性，因为多个用户将能够使用前端，因此将 int[][][] 加载到后端。该数据库应具有非商业许可证，例如。GPL、麻省理工学院、阿帕奇...

第二个问题，我知道我可以将序列化的数组保存在文件系统中并将链接保留在数据库中，但是多个用户的访问是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:38:33.267

如果客户端计算机上有足够的 RAM，则可以从简单地增加 JVM 堆的大小开始。这样，您应该能够创建更大的数组而不会遇到“内存不足”错误。

您*至少*需要大约 800 Mb 才能使用（1024 x 1024 x 200 x 32 位）阵列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:17:27.867

我认为 a`MemoryMappedFile`生来就是为了处理这样的事情。它为您提供磁盘上文件的类似数组的视图，具有随机读写访问权限。您所要做的就是制定一个计划，制定一个`int[][][]`超过 a的方案，`byte[]`这不应该是一个问题。如果您这样做，您将永远不必将整个数组保存在内存中，而只需创建您实际使用的切片。即使您需要遍历所有切片，一次也只能实例化一个切片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:44:12.433

如果是 CAT 扫描，像素是 256 色灰度吗？如果是这样，您可以通过将数据存储为字节数组而不是 int 数组来节省大量内存。如果是 64K 灰度，请使用 short 而不是 int。

# nltk - 从标记的文本文件创建自定义 nltk 语料库

> ID：10805524
> 
> 赞同：0
> 
> 时间：2012-05-29T19:35:01.010
> 
> 标签：nltk, corpus, pos-tagger

在阅读了很多帖子之后，我仍然有可能在 nltk 中制作自定义语料库。我有一个标记句子的文本文件，每个项目的字符串形式为 ... word/tag 。我想用这些东西训练一个标注器。我正在尝试使用一个名为 train-tagger 的 nltk 包来训练各种类型的标注器。2个问题。1) train-tagger 可以使用文本文件作为输入还是仅使用 nltk 语料库对象？2）如果只使用语料库，如何从文本文件创建一个？我尝试了以下代码来创建语料库...

```
import nltk
from nltk.corpus import PlaintextCorpusReader
corpus_root = './'
newcorpus = PlaintextCorpusReader(corpus_root, '.*')
print newcorpus.raw('IOBHarrisonsTraining.txt')  .... this is my tagged text file 
```

似乎工作，但我找不到输出。应该在运行此代码的文件夹中创建一个语料库，或者在 nltk_data/corpora 中创建一个语料库，但没有找到。语料库模块中是否有一些方法可以保存我创建的“新语料库”？然后可以将其用作训练标记器的输入？另外，我应该使用标记句子文件作为 PlaintextCorpusReader 的输入还是只是一组未标记的句子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:04:42.350

NLTK 语料库存储为文本文件的集合。NLTK 语料库功能被组织为许多用于各种文件格式的阅读器类。您可以在 nltk.corpus.reader 中找到它们。nltk.corpus 模块还提供了 nltk_data 中语料库的快捷方式；他们只是使用语料库文件的路径启动适当的阅读器类。但是新语料库不会神奇地作为对象出现在 nltk.corpus 中；要阅读您自己的内容，请实例化相应的阅读器类。例如，在 nltk/corpus/ **init** .py 中，您会发现以下内容：

```
gutenberg = LazyCorpusLoader(
    'gutenberg', PlaintextCorpusReader, r'(?!\.).*\.txt') 
```

PlaintextCorpusReader 是从 nltk.corpus.reader 导入的，所有其他阅读器类都可以在其中找到。无需依赖 LazyCorpusReader 即可直接使用；检查文档。

但确实不支持以各种支持的格式编写语料库。为此，请找到与您的相似的语料库，并模仿其格式。然后，您可以使用同一个阅读器来阅读您的语料库。（例如，布朗语料库显示它由单词/标签格式的空格分隔标记组成）

# ruby-on-rails - 使用上传的文本文件的内容作为新对象的参数

> ID：10805525
> 
> 赞同：0
> 
> 时间：2012-05-29T19:35:02.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在上传一个纯文本文件，我想将其中的文本用作新对象的参数。到目前为止，这是我在views/scans/new.html.erb中的尝试：

```
<h1>New scan</h1>

<%= form_for :file_upload, :html => {:multipart => true} do |f| %>
<p><%= f.file_field :raw %></p>
<p><%= f.submit "Upload" %></p>
<% end %> 
```

raw 是扫描模型的文本属性。这会产生错误：

```
Routing Error

No route matches [POST] "/scans/new"
Try running rake routes for more information on available routes. 
```

我可以从谷歌告诉我我需要 File.read() 但我不知道我会在哪里做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:02:45.477

在模型中

```
def raw= (file)
  File.open(file,"r") do |f|
    self.your_atrribute = f.readlines.join("")
  end 
end 
```

# php - 仅显示多字变量中的第一个字

> ID：10805535
> 
> 赞同：4
> 
> 时间：2012-05-29T19:36:12.317
> 
> 标签：php, html

在我的表单中，我有以下基于标准 PHP/MySql 查询的值。

```
echo "<tr>\n
        <td align='right'><b>Location</b></td>
        <td><input name='student_location' type='text' size='25' style='font-weight: 700' value=$location></td>
    </tr>"; 
```

当 的值为`$location`一个单词时，它会正确显示，当它是多个单词时，说“North Campus”，仅显示“North”。

我已经检查了两倍和三次，并且正确的值在数据库中，当我对 $location 的值进行回显时，它回显了正确的值，但是当它显示在上面的字段中时，它会砍掉最后一个单词。它对我所有不止一个词的变量都这样做，所以我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T19:37:59.227

你忘了引号：

```
echo "<tr>\n
    <td align='right'><b>Location</b></td>
    <td><input name='student_location' type='text' size='25' style='font-weight: 700' value=\"$location\"></td>
</tr>"; 
```

如果没有引号，第一个单词会被注明，其他单词将被解释为错误的属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T19:38:15.760

You need to put your single quotes around it to make it a valid attribute. The HTML is being created as `value=North Campus` which gets interpreted as `value="North"` and some `Campus` attribute that has no value. Use `value='$location'`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T19:37:57.697

你需要通过转义 "

```
echo "<tr>\n
        <td align='right'><b>Location</b></td>
        <td><input name='student_location' type='text' size='25' style='font-weight: 700' value=\"$location\"></td>
    </tr>"; 
```

# javascript - XMod Pro - DotNetNuke - 谷歌地图

> ID：10805537
> 
> 赞同：0
> 
> 时间：2012-05-29T19:36:13.773
> 
> 标签：javascript, google-maps-api-3, dotnetnuke

我正在尝试让一些旧代码与最新的 Google Maps API 一起使用。但可能像大多数提问的人一样，对 Javascript 的经验为零，更不用说 API。如果有人可以提供帮助，我将不胜感激任何帮助使其正常工作。谢谢..

该模块是 DNN 的 XMod Pro 模块。这为您提供了许多选项，并且它是一个非常强大的模块，可以为您的网页等创建项目。不久前，有人发布了有关如何让 Google Maps API 在 XMod Pro 中工作的信息。关于位置的经纬度信息来自人们输入位置信息的数据库。然后将标记放在地图上；这也是页面上的标准 DIV。XMod Pro 用双括号标记此数据库信息；例如 [[Title]] 为标题。

当有人单击位置标题的链接时，会将他们带到地图上的该位置并在弹出窗口中向他们显示信息（同样来自数据库）。这部分不起作用；也没有任何标记信息。

我相信问题出在 JavaScript 上，但究竟是什么导致了这些问题，我不知道。

下面是 XMod Pro 代码，大部分相关信息都存储在 . 再次感谢你..

```
 <headertemplate>
      <a name="HeaderTop"></a>
      <div width="150px" height="40px" style="color:black;background-
color:white;padding-bottom:10px;font-family:Georgia;font-size:
14px"><strong>Click an Item</strong></div>
    </headertemplate>
    <itemtemplate>
      <script type="text/javascript">
        var i = i + 1;
        x[i] = [[Lat]];
        y[i] = [[Long]];
        d[i] = '<table><tr><td>[[Title]]</td></
tr><tr><td>[[Description]]</td></tr><tr><td>[[Country]]</td></
tr><tr><td>[[Region]]</td></tr><tr><td>[[Email]]</td></tr></table>';
       document.write('<div style="padding-bottom:
8px;color:black;background-color:white" width="150px"
onclick="myGclick(' + i + ');">')
      </script>

      <strong>
      <table>
        <tr><td colspan="2"><a href="#HeaderTop"><div style="color:
#a41d21;font-size: 13px">[[Title]]</div></a></td></tr>
        <tr><td colspan="2">[[Description]]</td></tr>
        <tr><td>[[Country]]</td><td>[[Region]]</td></tr>
      </table>
      </div>

      <xmod:scriptblock scriptid="GoogleMapScripts"
registeronce="true" blocktype="ClientScript">
        <script src="http://maps.google.com/maps?
file=api&amp;v=2.x&amp;key=ABQIAAAAHrao_r7BKX4cQI0SxCQVHxRXbr2uTTbz5TwhEXAt1Cz65pgUPxQJAHBbHO1MuQeh5aRNkFOL-
Ozptw" type="text/javascript"></script>
        <script type="text/javascript">
          //<![CDATA[

           var map = null;
           var geocoder = null;
           var x=new Array()
           var y=new Array()
           var d=new Array()
           var myGclick = [];
           var gmarkers = [];

           // This function picks up the click and opens the corresponding info window
           myGclick = function myGclick(i) {
             GEvent.trigger(gmarkers[i], "click");
            }

          oldLoad = window.onload;
          window.onload = function load(){
            if(oldLoad){
             oldLoad();
            }
            if (GBrowserIsCompatible()) {
              var map = new GMap2(document.getElementById("map"));
              map.setCenter(new GLatLng(40, -98), 3);
              map.addControl(new GLargeMapControl());
              map.addControl(new GMapTypeControl());
              map.addControl(new GOverviewMapControl());

              // Creates a marker at the given point with the given number label
              function createMarker(point, d) {
                var marker = new GMarker(point);
                GEvent.addListener(marker, "click", function() {
                  marker.openInfoWindowHtml(d);
                 });
                 // save the info we need to use later for the side_bar
                gmarkers[i] = marker;
                return marker;
              }

              for (var i = 0; i < 999; i++) {
                var point = new GLatLng(x[i],
                          y[i]);
                 if ((x[i] == undefined)){break}
                map.addOverlay(createMarker(point, d[i]));
              }
 }
}
    //]]>
    </script>
    </xmod:scriptblock>

</itemtemplate>

    <footertemplate>

    </footertemplate>
    <noitemstemplate>
    <strong>nothing in table</strong>
    </noitemstemplate>

    <detailtemplate>
    </detailtemplate>

  </xmod:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:54:25.153

它是否会在 Inspector 或 Firebug 中显示任何错误/消息？

在 Google Maps API V5 中，我的 addMarker 代码如下所示，我将 infoWindow 内容直接放入标记中。

```
function addMarker(map, latitude, longitude, heading, title, content){

        var latlong = new google.maps.LatLng(latitude, longitude);
        var markerOptions = {
        position: latlong,
        map: map,
        title: title,
        clickable: true,
        icon: 'marker.png',
    };

        //create marker object
        var marker = new google.maps.Marker(markerOptions);
        var infoWindowOptions = {
        content: content,
        position: latlong
    };

        //info window object
    var infoWindow = new google.maps.InfoWindow(infoWindowOptions);

        //add click event listener on marker, to bring up infoWindow
    google.maps.event.addListener(marker, "click",function(){
        infoWindow.open(map);
    });
} 
```

当我在做这个时，我在这里使用了很多文档：[developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays) for Overlays and Markers

抱歉，我不了解 XMode Pro，但也许您会注意到旧 API 与新 API 的一些差异。

# c - 程序停止并且不执行线程为什么？

> ID：10805539
> 
> 赞同：-3
> 
> 时间：2012-05-29T19:36:16.480
> 
> 标签：c, multithreading, winapi

我写了一个程序，它从用户那里获取数字，然后允许输入数字，然后创建两个线程，一个来计算总和，另一个来计算平均值，但是在给出数字之后程序停止并给出错误为什么？

```
#include<stdio.h>
#include<Windows.h>
#include<stdlib.h>

int count ;

DWORD WINAPI Sum(PVOID s)
{
    int *sum=(int *)s;
    DWORD c=0;
    for(int i=0;i<count;i++)
        c+=sum[i];
    return c;
}

DWORD WINAPI Avg(PVOID s)
{
    int *var=(int *)s;
    DWORD avg=0;
    avg=(*var/count);
    return avg; 
}

int main()
{
    printf("Enter the number of numbers\n");
    scanf("%d",&count);
    int *s = (int*)malloc(sizeof(int)*count);
    printf("now enter the numbers\n");
    for(int i=0;i<count;i++)
        scanf("%d",s[i]);

    HANDLE t1 , t2;
    DWORD id1 , id2 , c1 , c2;
    t1 = CreateThread(NULL , 0 , Sum , s , 0 , &id1);
    WaitForSingleObject(t1,INFINITE);
    GetExitCodeThread(t1 , &c1);
    printf("The Sum = %d", c1);
    t2 = CreateThread(NULL , 0 , Avg , (PVOID*)&c1 , 0 , &id2);
    WaitForSingleObject(t2,INFINITE);
    GetExitCodeThread(t2 , &c2);
    printf("The AVgerage = %d", c2);
    return 0;
} 
```

如果有人能帮助我，将不胜感激。谢谢所以 T 更新程序，现在它可以工作了，但是 Avg 是错误的，那是因为当我尝试像这样打印它时 printf("The AVG=%f\n",c2) 结果为零 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:47:13.087

`scanf`需要参考。

```
scanf("%d",&s[i]); 
```

# java - 使用jquery中servlet中的json获取不同变量上的两个数组

> ID：10805540
> 
> 赞同：0
> 
> 时间：2012-05-29T19:36:32.217
> 
> 标签：java, jquery, arrays, json, servlets

**小服务程序**

```
 String getCodeList = (new JSONArray(rmsCodeList)).toString();
 response.setContentType("application/json");
 response.setCharacterEncoding("UTF-8");
 response.getWriter().write(getCodeList); 
```

**jQuery**

```
$(document).ready(function() {
var getdata;
$.post("GetItemCode", function(data) {
    getdata=data;

});
}); 
```

**工作正常，我在getdata**上得到了完整的数组

 ****写二**

```
 String getCodeList = (new JSONArray(rmsCodeList)).toString();
 response.setContentType("application/json");
 response.setCharacterEncoding("UTF-8");
 response.getWriter().write(getCodeList);

 String getNameList = (new JSONArray(rmsNameList)).toString();
 response.setContentType("application/json");
 response.setCharacterEncoding("UTF-8");
 response.getWriter().write(getNameList); 
```

如何在不同的变量上获得两个数组

```
$(document).ready(function() {
var getdata1;
var getdata2;
$.post("GetItemCode", function(data) {
    getdata1=?;
    getdata2=?;

});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:38:17.843

发送一个包含两个数组值的 JSON 对象，并将每个值设置为所需的 JavaScript 变量。

尽管您编写代码就像进行同步调用一样，但这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:03:17.433

将两个数组放在 a 中`JSONObject`并在 Javascript 中检索它

```
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
response.getWriter().write(
    new JSONObject()
        .put("codeList", new JSONArray(rmsCodeList))
        .put("nameList", new JSONArray(rmsNameList)).toString()
); 
```

然后在 Javascript 中，您将其作为返回对象的属性进行检索。

```
$(document).ready(function() {
    var getdata1;
    var getdata2;
    $.post("GetItemCode", function(data) {
        getdata1 = data.codeList;
        getdata2 = data.nameList;
    });
}); 
```**

# javascript - jquery 通过列表项为 ul 设置动画

> ID：10805541
> 
> 赞同：2
> 
> 时间：2012-05-29T19:36:36.753
> 
> 标签：javascript, jquery, css

我有一个 ul ，我想根据用户单击的 li 将其垂直居中到另一个元素的垂直中心。我在这里处理了一些代码：

[http://jsfiddle.net/XxmAT/1/](http://jsfiddle.net/XxmAT/1/)

但不幸的是，它并没有表现出我想要的样子，我知道我的数学是错误的，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:53:33.387

我觉得这个更漂亮：

[http://jsfiddle.net/XxmAT/33/](http://jsfiddle.net/XxmAT/33/)

* * *

通常最好先考虑逻辑，然后再开始制作变量。由于变量簇，很难理解所有代码的含义。点击功能变得更加简单，并且更容易理解我从哪个数字中减去什么，以获得所需的结果......

*旁注：`- 180`最后的可能是奇怪的（和巨大的）边距。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:51:44.220

干得好。得到 li 的高度并乘以它以说明 li 之间的空间的高度，然后乘以单击的索引。

[http://jsfiddle.net/XxmAT/36/](http://jsfiddle.net/XxmAT/36/)

```
 var u_menu = $("#menu-main-menu").position().top;
        var z_menu = $("#menu-main-menu").height();

        var y = $("#box1").offset().top;
        var z = $('#box1').height();

        var c_menu = (z_menu / 2) ;

        $("#menu-main-menu").css('top', - c_menu);

        $('ul#menu-main-menu li').click(function (e) {
        // this is the dom element clicked
        var index = $('li').index(this);

         var x = $('li').height() * 2;

         var offset_li = (u_menu + y) / index  ;

        $('ul#menu-main-menu').animate({top: -(x*index)}, "slow")

    });​ 
```

# c# - 没有集合的休眠查询

> ID：10805545
> 
> 赞同：1
> 
> 时间：2012-05-29T19:37:05.677
> 
> 标签：c#, linq, nhibernate

冒着问非常基本的问题的风险，但仍然如此。使用这样的查询时

```
List<User> users = session.Query<User>.ToList(); 
```

在调试中，我看到除了用户实体之外，我还获取了角色集合和照片集合。

我的问题是如何只选择没有子集合的用户集合。

谢谢

更新：

```
public RoleMap()
{
   Table("Role");
   Id(x => x.Id).GeneratedBy.Identity();
   Map(x => ...
   References(x => x.User).Column("UserId");           
} 
```

据我所知，默认情况下延迟加载是打开的。纠正我如果我在这里做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:38:26.253

当您在调试时查看集合时，您会使用 nhibernate 创建的代理从数据库加载数据。执行时检查生成的sql查询

```
 List<User> users = session.Query<User>.ToList(); 
```

你应该只看到`User`数据，角色和照片不应该在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:13:15.843

仔细检查您生成的 sql。

延迟加载默认情况下是打开的，所以我认为您在调试时输入了这些集合 + 符号到相关集合，并且这些集合应该按需加载，单击该符号。

请使用 nhibernate profiler 检查生成的 sql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:42:12.980

使用投影...

```
 ICriteria crit = Session.CreateCriteria<District>();

        crit.SetProjection(Projections.ProjectionList()
         .Add(Projections.Alias(Projections.Property("Description"), "Description"))
         .Add(Projections.Alias(Projections.Property("Active"), "Active"))
         .Add(Projections.Alias(Projections.Property("Id"), "Id"))
         );
        crit.SetResultTransformer(new NHibernate.Transform.AliasToBeanResultTransformer(typeof(District)));
        return crit.List<District>(); 
```

这会滋润您感兴趣的属性，而忽略其他属性……有利于减少网络上的流量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T19:43:43.967

使用延迟加载： http: [//nhibernate.info/doc/howto/various/lazy-loading-eager-loading.html](http://nhibernate.info/doc/howto/various/lazy-loading-eager-loading.html)

这意味着：NHibernate 只会在您真正需要它们时加载这些子（关联）。

# xcode - iPhone 应用程序拒绝

> ID：10805546
> 
> 赞同：0
> 
> 时间：2012-05-29T19:37:13.060
> 
> 标签：xcode, provisioning-profile

我最近提交了我的应用程序，Apple 拒绝了它，因为我使用了：'AppName iPhone Edition'

从阅读他们的条款和条件来看，这似乎是正确的，但他们告诉我，我不能在设备上显示的名称中使用 iPhone。

所以，问题是，当我在构建设置中更改产品名称时，它要求我提供新的配置文件。我是否需要创建新的配置文件，或者我可以只更改设备上显示的应用程序名称吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:38:54.320

只要您保持相同的捆绑 ID，您就可以更改您的应用程序名称并且不需要新的配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:42:41.377

默认情况下，Info.plist 有这个：

```
<key>CFBundleDisplayName</key>
<string>${PRODUCT_NAME}</string> 
```

只需将其更改为您想要的任何内容，并保持您的产品名称不变。

您还需要将其更改为 iTunes Connect。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:42:41.373

默认情况下，供应配置文件与应用标识符绑定 (com.yourCompany.yourAppProductName)。因此，当您更改产品名称（在构建设置中）时，标识符也会更改。您可以在摘要中手动指定标识符代码以避免此类问题。

还要确保您正在更改信息选项卡中的“捆绑显示名称”。此名称可以是任何名称，并且不需要更改产品名称或标识符。

# windows-phone-7 - WCF 数据服务 - 添加具有相关对象的对象

> ID：10805547
> 
> 赞同：1
> 
> 时间：2012-05-29T19:37:14.437
> 
> 标签：windows-phone-7, wcf-data-services

我有以下情况，我有一个带有`User`对象和`message`对象的 WCF 数据服务，并且该对象与发送者和接收者`message`有两个关系。`user`

当我尝试添加新`Message`对象时，相关用户为空

```
Message message = new Message();
message.text = InputText; // string
message.Sender = Sender; // User object
message.Receiver = Receiver; // User object

context.AddToMessages(message);
context.BeginSaveChanges(new AsyncCallback((result) => 
{ 
    // Some code 
})); 
```

现在发送者和接收者将为空。当我尝试在`BeginSaceChanges`此之前设置链接时，我收到错误“InvalidOperationException：上下文当前未跟踪实体。”

```
context.AddToMessages(message);
context.AddLink(message, "Sender", message.Sender);
context.AddLink(message, "Receiver", message.Receiver);
context.BeginSaveChanges(new AsyncCallback((result) => 
{ 
    // Some code 
})); 
```

如何确保正确创建关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:50:25.850

感谢 Pratik，我找到了解决方案。我必须首先使用附加已经存在的用户`Sender`和`Receiver`上下文，因为他们没有被跟踪（如果他们在第二次通话中添加了一个 if）。然后我添加消息并使用`SetLink`来设置两个用户的链接（而不是`AddLink`）

```
if(context.GetEntityDescriptor(message.Sender) == null)
    context.AttachTo("Users", message.Sender);
if (context.GetEntityDescriptor(message.Receiver) == null)
    context.AttachTo("Users", message.Receiver);
context.AddToMessages(message);
context.SetLink(message, "Sender", message.Sender);
context.SetLink(message, "Receiver", message.Receiver);
context.BeginSaveChanges(new AsyncCallback((result) => 
{ 
    // Some code 
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:35:45.383

我相信您需要改用该`DbSet.Attach`方法。我假设您在这里使用后端的实体框架。

# vb.net - 如何快速将 List(Of Object) 转换为 List(Of "Object.field")？

> ID：10805551
> 
> 赞同：0
> 
> 时间：2012-05-29T19:37:28.103
> 
> 标签：vb.net, linq, list

假设我有一个 Cat 列表。

```
Public Class Cat 
    Public Property id As Guid
    Public Property name As String
    Public Property race As catRace
End Class 
```

如何使用 id 属性快速将此 List(Of Cat) 转换为 List(Of Guid)？

我可以做 ：

```
Dim newList As List(Of Guid)
For each item in catList
    newList.Add(item.id)
Next 
```

但我认为必须有一种方法可以更快地做到这一点（1 LOC）。我只是找不到方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:50:14.473

一行代码可能会使打字速度更快，但执行起来不一定更快。

```
Dim newList = From c In catList Select c.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:42:55.617

LINQ。catList.Select(t=>t.id)。不完全确定 => 的 VB 等价物对于 lambda 是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:38:55.320

一行代码，使用扩展方法而不是 LINQ。

```
newList = catList.Select(Function(t) t.id).ToList 
```

如果您更喜欢 LINQ

```
newList = (From c In catList Select c.id).ToList 
```

# c# - 字符串格式的表达式树？

> ID：10805552
> 
> 赞同：1
> 
> 时间：2012-05-29T19:37:28.250
> 
> 标签：c#, linq, expression-trees

> **可能重复：**
> [在 C# 中序列化和反序列化表达式树](https://stackoverflow.com/questions/217961/serializing-and-deserializing-expression-trees-in-c-sharp)

我最近潜入了 Expression Trees 的狂野世界，我很好奇。

我也一直在玩 ZeroMQ，我突然想到，我想知道我是否可以将字符串格式的表达式树从客户端发送到服务器。这可能吗？表达式树似乎具有获取表达式的功能，并且似乎您应该能够将它们“展平”和“展平”到/从字符串中。

有人对此有任何见解吗？如果您的评论将是负面的，那么请不要评论。

**编辑** 要清楚，作为一个简单的例子，如果我有一个客户端-服务器应用程序正在运行，有没有办法可以在客户端命令提示符中键入以下内容：

```
(a,b) => a + b 
```

并将该值转换为二进制表达式（以简单的方式），以便服务器应用程序可以动态调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:45:39.953

根据[C# 中的序列化和反序列化表达式树](https://stackoverflow.com/questions/217961/serializing-and-deserializing-expression-trees-in-c-sharp)，您可以使用[表达式树序列化](http://code.msdn.microsoft.com/exprserialization)项目。

# php - PHP require_once 在 Linux 上不起作用

> ID：10805554
> 
> 赞同：1
> 
> 时间：2012-05-29T19:37:36.707
> 
> 标签：php, linux, require-once

我已将 PHP 网络系统从 Windows 托管服务提供商转移到基于 Linux 的托管服务。

在系统的脚本中，当涉及到 时`require_once`，脚本会简单地停止并将用户留在空白页面。

我已经尝试了以下两种方法：

**试试 1**

```
require_once($_SERVER['DOCUMENT_ROOT'] . '\library\data\Dbec.php') or die("could not load file"); 
```

**试试 2**

```
require_once(dirname(__FILE__) . '/library/data/Dbec.php') or die("could not load file"); 
```

在这两种情况下，括号中的文本*都*没有显示，页面保持空白。需要上述文件的脚本位于“ */library/membership/theScript.php* ”中

根据我到目前为止在网上所做的阅读，可能与更改 php.ini 文件中的 include_path 或以不同的方式写入路径有关。

如果是上述任何一种，或者不同的东西，我会很感激一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:45:11.857

检查您的错误日志，看看是否有明显错误。也尝试设置，并`error_reporting = E_ALL`确保在您的 php.ini 中。`display_errors = On``log_errors = On`

您尝试包含的文件位于“/library/membership/theScript.php”中，请尝试执行以下操作：

```
require_once '../data/Dbec.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:49:45.567

这不会做你想做的事。之后的一切都`require_once`被解释为**有条件**的。它正在运行`($_SERVER['DOCUMENT_ROOT'] . '\library\data\Dbec.php') or die("could not load file")`并返回`1`，然后运行`require_once 1`。

要使其按预期工作，您需要一组额外的括号：

```
(require_once($_SERVER['DOCUMENT_ROOT'] . '\library\data\Dbec.php')) or die("could not load file"); 
```

虽然，我不确定`die()`是否会被调用。由你来弄清楚。

请参阅[此相关的错误报告](https://bugs.php.net/bug.php?id=22342)，该报告被裁定为“不是错误”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:19:29.923

问题也可能出在文件权限和文件名中。Windows 文件系统是不区分大小写的，但 linux 不是。因此，您必须检查文件名以及执行此脚本的用户是否已读取您尝试包含在 require_once 中的文件的权限

# c++ - VS C++ 多个项目到一个 dll

> ID：10805563
> 
> 赞同：0
> 
> 时间：2012-05-29T19:38:20.257
> 
> 标签：c++, visual-studio-2010, visual-c++, dll

我有一个包含多个项目（Visual Studio 2010）的解决方案，这些项目编译为静态库（有些编译为 dll，但自然也会生成一个库）。全部用 C++ 编写。我想在一个 dll 中提供我的解决方案。所以我想从所有项目中生成一个 DLL，即将它们全部打包到一个 DLL 中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:46:25.053

我不确定这是最好的方法，但它会起作用：

1.  创建合并其余库的 DLL 项目
2.  将所有其他库静态链接到该项目
3.  为其他库中的每个接口函数编写转发函数
4.  从您的 DLL 中导出这些转发函数

# scala - 使用 Scala 的 HashMap 时如何定义键等效？

> ID：10805570
> 
> 赞同：2
> 
> 时间：2012-05-29T19:39:14.727
> 
> 标签：scala

调用`get`Scala`HashMap`类的方法时，使用哪个方法检查key是否存在（即map中的key是否与提供的key*等价*）？是它`==`还是另一个？

Scala API 并没有明确地谈论它：

> “可选地返回与键关联的值”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:50:17.967

哈希映射首先检查哈希值，然后检查身份。所以“方法”是

```
key.hashCode == entry.hashCode && key == entry 
```

（`key`您正在测试的项目在哪里，并且`entry`是地图中已经存在的项目）。特别是，`scala.collection.immutable.HashMap`在其方法中使用这种形式`get`（从 Scala 版本 2.9 开始）。

如果你想改变 identity 的行为，你需要重写`hashCode`and of `equals`，而且你不能依赖已经在 map 中的 item 的重写行为；它是你测试的那个，它的 equal 方法被调用。（但请注意，一般来说，不保证将调用谁的 equals 方法，因此您不应依赖此行为。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:42:22.417

> `def contains(key: A): Boolean`
> 
> 测试此映射是否包含键的绑定。

和：

> `def get(key: A): Option[B]`
> 
> 可选择返回与键关联的值。

*可选地*意味着：要么返回与包装在其中的给定键关联的值，要么返回该键的`Some`值`None`不存在。

# c# - 流利的 NHibernate 与奇怪的关系

> ID：10805577
> 
> 赞同：0
> 
> 时间：2012-05-29T19:39:45.573
> 
> 标签：c#, .net, fluent-nhibernate

## 员工表

```
EmployeeId
EmployeeName
ManagerId 
```

## 经理类

```
// EmployeeId of the manager
int ManagerId { get; set; }

// EmployeeName of the manager
string ManagerName { get; set; }

// EmployeeId of the employee that is attached to this manager
int ChildEmployeeId { get; set; } 
```

Manager 是 Employee，也意味着 ManagerId 是 EmployeeId。只有一名经理对一名员工，一名员工对一名经理。

我必须弄清楚可以填充上面Manager类的NHibernate Fluent类映射；非常感谢任何有关此外观的帮助！

请记住，这是一个模型/表格，我继承了很多技术债务来对其进行更改（从时间的角度来看）。

-杰西·豪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:05:03.250

我猜你正在寻找的是[一对一的](http://ayende.com/blog/3960/nhibernate-mapping-one-to-one)关系。
（[这里](https://stackoverflow.com/questions/2071274/fluent-nhibernate-one-to-one)是如何流利地做到这一点）

# asp.net - 如何通过sql数据适配器类分别检索列值？

> ID：10805578
> 
> 赞同：0
> 
> 时间：2012-05-29T19:39:47.400
> 
> 标签：asp.net, c#-4.0, sqldataadapter, datacolumn

我正在尝试学习如何使用 sql 数据适配器...我已经编写了以下代码来检查它是如何工作的...

问题是我想分别检索我的数据库表“Sana”的 3 列（DeptNo，DeptId，DeptName）的值，并将它们显示在三个单独的文本框中......

通过下面提到的代码，我可以一起检索整个数据库表元组的值

我应该怎么做才能达到上述结果？？？

```
 protected void Button1_Click(object sender, EventArgs e)
{

    SqlConnection connect = new SqlConnection(ConfigurationManager.ConnectionStrings["TestConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand("Select DeptNo,DeptId,DeptName from Sana where DeptName='" + TextBox1.Text + "'", connect);
    SqlDataAdapter myAdapter = new SqlDataAdapter(cmd);
    DataSet MyDataSet = new DataSet();
    myAdapter.Fill(MyDataSet, "Departments");
    object[] rowVals = new object[3];

    foreach (DataTable myTable in MyDataSet.Tables)
    {
        foreach (DataRow myRow in myTable.Rows)
        {
            foreach (DataColumn myColumn in myTable.Columns)
            {
                Response.Write(myRow[myColumn] + "\t");

            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:42:02.933

```
 foreach (DataRow myRow in MyDataSet.Tables[0].Rows)
    {
        TextBox1.Text = myRow["DeptNo"].ToString(); 
        TextBox2.Text = myRow["DeptId"].ToString(); 
        ... 
    } 
```

# ruby-on-rails-3 - 如果有两个属于同一模型的关系，Rails ActiveRecord 会构建错误的外键

> ID：10805581
> 
> 赞同：6
> 
> 时间：2012-05-29T19:39:55.087
> 
> 标签：ruby-on-rails-3, activerecord

使用 Rails 3.2.3，我有用户和消息模型。每条消息都归一个用户所有，每条消息都有一个可选的 from_user 字段，该字段也采用 user.id。

**应用程序/模型/user.rb**

```
class User < ActiveRecord::Base
  has_many :messages, :foreign_key => "owner_id",     :inverse_of => :owner
  has_many :messages, :foreign_key => "from_user_id", :inverse_of => :from_user
end 
```

**应用程序/模型/message.rb**

```
class Message < ActiveRecord::Base
  belongs_to :owner, :class_name => "User", :inverse_of => :messages
  validates  :owner, :presence => true   # Every message must have an owner_id

  belongs_to :from_user, :class_name => "User", :inverse_of => :messages
end 
```

我看到的问题是`.build`方法。使用的主要原因`.build`是实例化一个（可能受保护的）外键，对吧？（请参阅有关 Active Record 关联的[Rails 指南](http://guides.rubyonrails.org/association_basics.html#has_many-collection-build)：“将创建通过其外键的链接。”）但是当我运行时

```
@message = @user.messages.build(<accessible attributes>) 
```

我发现它是在填写 optional`from_user`而*不是*强制的`owner`。

有什么方法可以控制`.build`填写哪个外键？还是我只需要`.new`手动使用和分配所有外键？

```
@message = Message.new(<accessible attributes>)
@message.owner = @user
@message.from_user = @another_user 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:45:25.180

ActiveRecord 不喜欢你有 2 个同名的关联。您将不得不更改关联名称。这意味着您还必须提供`class_name`属性。也许是这样的：

```
has_many :owner_messages, :class_name => 'Message', :foreign_key => "owner_id",     :inverse_of => :owner
has_many :user_messages, :class_name => 'Message', :foreign_key => "from_user_id", :inverse_of => :from_user 
```

# orchardcms - Orchard CMS - 如何使用数据库管理自定义模块小部件的新字段？

> ID：10805584
> 
> 赞同：0
> 
> 时间：2012-05-29T19:40:09.473
> 
> 标签：orchardcms

我一直在使用一个自定义模块，该模块有一个小部件，其中一些字段存储在数据库中。我向小部件添加了一个新的非必填字段，并且未添加数据库中的相应字段。处理此类更改的最佳方法是什么？

我可以在开发数据库中手动添加一个字段来匹配它，但这对于 50 个奇怪的生产租户站点来说是不现实的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:35:22.523

为了稍微扩展@Bertand 的答案，当您将字段（布尔字段、文本字段、媒体选择器字段等）添加到内容部分时，您不需要创建数据库列，因为用于存储字段的数据库结构已经在数据库。

字段存储为针对内容部分的序列化 XML。我的所有记录都存储在`Orchard_Framework_ContentItemVersionRecord`表中（有一个类似的表`Orchard_Framework_ContentItemRecord`，但似乎没有使用。

XML 本质上是以下格式：

```
<Data>
    <SomePart>
        <SomeFieldName SomeFieldProperty=”value”
                       SomeOtherProperty=”value”&gt;FieldValue</SomeFieldName>
    </SomePart>
    <SomeOtherPart>
        <SomeOtherFieldName>FieldValue</SomeOtherFieldName>
    </SomeOtherPart>
</Data> 
```

因此，例如，您可能有这样的事情：

```
<Data>
    <PicturePart>
        <picture AlternateText="" Class="" Style="" Alignment="" Width="1219"
                 Height="709">~/Media/Default/images/greatPicture.jpg</picture>
    </PicturePart>
    <PictureType>
        <ExtraDescription>It’s a great picture!</ExtraDescription>
    </Pictureype>
</Data> 
```

Orchard 在`Settings_XXXRecord`从数据库中反序列化字段时使用表中的信息来确定字段的类型。

这就是为什么，正如 Bertand 所说[，](https://stackoverflow.com/a/10776758/592182)字段更容易创建，但更难查询。

查看您发布的解决方案，您似乎正在添加自定义列，而不是 Orchard Fields。如果这*是*您想要做的，那么您似乎应该使用 AddColumn 为您的模块进行数据迁移，如此[处](http://docs.orchardproject.net/Documentation/Understanding-data-access)所述。这看起来像：

```
public int UpdateFrom1() {
    SchemaBuilder.AlterTable("TABLE_NAME", table => table
            .AddColumn<int>("mynewcolumn")
            .AddColumn<string>("mynewcolumn2")
       );
    return 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:20:48.550

我不确定这是否是理想的解决方案，但运行一个 sql 脚本手动将列添加到所有租户站点的模块表中似乎可以解决问题。幸运的是，我将所有网站设置为存在于同一个数据库中！

> SELECT 'Alter table ' + TABLE_NAME + ' Add mynewcolumn int null, mynewcolumn2 nvarchar(15) null' FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME LIKE '%the_suffix_my_module_puts_for_a_tenant'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T23:53:08.263

字段不应该在数据库中添加列。按设计。

# python - 将 JSON 日期字符串转换为 Python 日期时间

> ID：10805589
> 
> 赞同：47
> 
> 时间：2012-05-29T19:40:21.783
> 
> 标签：python, json, datetime, date, iso

将日期转换为 JSON 时，javascript 以这种格式保存日期：

```
2012-05-29T19:30:03.283Z 
```

但是，我不确定如何将其放入 python 日期时间对象中。我试过这些：

```
# Throws an error because the 'Z' isn't accounted for:
datetime.datetime.strptime(obj[key], '%Y-%m-%dT%H:%M:%S.%f')

# Throws an error because '%Z' doesn't know what to do with the 'Z'
#  at the end of the string
datetime.datetime.strptime(obj[key], '%Y-%m-%dT%H:%M:%S.%f%Z') 
```

我相信javascript正在以官方ISO格式保存字符串，所以似乎应该有办法让python`datetime.strptime()`读取它？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-29T19:44:34.927

尝试以下格式：

```
%Y-%m-%dT%H:%M:%S.%fZ 
```

例如：

```
>>> datetime.datetime.strptime('2012-05-29T19:30:03.283Z', '%Y-%m-%dT%H:%M:%S.%fZ')
datetime.datetime(2012, 5, 29, 19, 30, 3, 283000) 
```

日期中的`Z`只是意味着它应该被解释为UTC时间，所以忽略它不会导致任何信息丢失。您可以在此处找到此信息：http: [//www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-05-19T16:15:08.240

要提供替代方案，如果您不介意安装[`python-dateutil`](https://pypi.python.org/pypi/python-dateutil/)软件包，可以使用[`dateutil.parser.parse`](https://dateutil.readthedocs.io/en/stable/parser.html#dateutil.parser.parse). 请注意，输入的格式由`parse`; 仍然可以正确或以其他方式解释无效输入。然而，猜测格式将比明确指定它慢得多。

### 没有时区

如果您不希望设置时区（如果您在内部仅将所有时间表示为 UTC，则非常好），请使用：

```
>>> dateutil.parser.parse('2012-05-29T19:30:03.283Z', ignoretz=True)
datetime.datetime(2012, 5, 29, 19, 30, 3, 283000) 
```

### 带时区

请注意，与 不同的是`datetime.datetime.strptime`，此默认调用`parse`自动保留 UTC 时区。

```
>>> import dateutil.parser
>>> dateutil.parser.parse('2012-05-29T19:30:03.283Z')
datetime.datetime(2012, 5, 29, 19, 30, 3, 283000, tzinfo=tzutc()) 
```

如果需要对相等性进行测试断言，则可以将预期对象构造为：

```
>>> import datetime
>>> datetime.datetime(2012, 5, 29, 19, 30, 3, 283000, tzinfo=dateutil.tz.tzutc()) 
```

# windows-7 - 在 Windows 7 上将 Windows Mobile 6 模拟器连接到 Internet

> ID：10805590
> 
> 赞同：3
> 
> 时间：2012-05-29T19:40:48.460
> 
> 标签：windows-7, windows-mobile

我有一个小问题...我需要将 Windows Phone 6 模拟器连接到互联网。这需要 Virtual PC 2007。但是，Windows 7 不支持 VPC 2007。当我尝试运行安装程序时，Windows 告诉我该程序由于兼容性问题而被阻止。在兼容模式下运行安装文件也无济于事。

该怎么办 ？o_O

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:27:13.510

我已经使用了几十次[这个博客上描述的方法。](http://www.brianpeek.com/post/2009/05/02/windows-virtual-pc-and-the-microsoft-device-emulator.aspx)它具有 32 位和 64 位 Windows 7 的解决方法说明。

# javascript - SlickGrid- 需要不区分大小写过滤器

> ID：10805592
> 
> 赞同：0
> 
> 时间：2012-05-29T19:41:03.480
> 
> 标签：javascript, case-sensitive, slickgrid, case-insensitive

有没有办法将过滤器从敏感大小写更改为不敏感？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:52:50.657

这是使用 DataView 过滤器的工作示例的相关部分。请注意，当首次定义值时，**searchString**变量将转换为小写，然后将其与**myFilter**函数中的小写字符串进行比较。

```
function myFilter(item, args) {
    if (args.searchString != "" && item["FirstName"].toLowerCase().indexOf(args.searchString) == -1 && item["LastName"].toLowerCase().indexOf(args.searchString) == -1) {
        return false;
    }
    return true;
}

....

$("#txtSearch").keyup(function (e) {
    Slick.GlobalEditorLock.cancelCurrentEdit();
    // clear on Esc
    if (e.which == 27) {
        this.value = "";
    }
    searchString = this.value.toLowerCase();
    updateFilter();
});

function updateFilter() {
    dataView.setFilterArgs({
        searchString: searchString
    });
    dataView.refresh();
}

// initialize the model after all the events have been hooked up
dataView.beginUpdate();
dataView.setItems(data);
dataView.setFilterArgs({
    searchString: searchString
});
dataView.setFilter(myFilter);
dataView.endUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:52:33.870

猜你在谈论 DataView 过滤器，过滤器功能的实现完全取决于你。请注意 SlickGrid 示例中使用的过滤器函数 - 该函数使用 dataView.setFilter(your_function_here) 设置为过滤器。所以根据需要实现过滤器功能并将其设置为dataView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T13:32:47.017

```
 function filter(item) {
    // String Should Match Each Other
    /* for (var columnId in columnFilters) {
      if (columnId !== undefined && columnFilters[columnId] !== "") {
        var c = grid.getColumns()[grid.getColumnIndex(columnId)];
        if (item[c.field] != columnFilters[columnId]) {
          return false;
        }
      }
    } */

    for (var columnId in columnFilters) {
        if (columnId !== undefined && columnFilters[columnId] !== "") {
            var c = grid.getColumns()[grid.getColumnIndex(columnId)];
// This Case Sensitive
//if (!(item[c.field] && (""+item[c.field]).indexOf(columnFilters[columnId]) !== -1)) {
            if (!(item[c.field] && (""+item[c.field].toLowerCase()).indexOf(columnFilters[columnId].toLowerCase()) !== -1)) { 
// Case in-Sensitive
                return false;
            }
        }
    }
    return true;
  } 
```

# asp.net-mvc - 仅显示第一条错误消息

> ID：10805597
> 
> 赞同：3
> 
> 时间：2012-05-29T19:41:35.103
> 
> 标签：asp.net-mvc, asp.net-mvc-3, error-handling, validation

我将 ASP.NET MVC3 用于具有服务器和客户端验证的表单。我将错误消息显示为输入上方的气球。由于错误的显示，我一次只需要显示一个错误，否则气球往往会掩盖其他可能也有错误的字段。

如何自定义验证行为以仅呈现第一条错误消息？

编辑：请注意表单同时具有服务器和客户端验证，并且我只想显示整个表单（而不是每个字段）的第一条错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:37:24.740

如果有人需要，我想出的解决方案是在页面底部添加以下脚本。这与现有的 javascript 验证挂钩，以动态隐藏表单中除第一个错误之外的所有错误。

```
<script>
    $(function() {
        var form = $('form')[0];
        var settings = $.data(form, 'validator').settings;
        var errorPlacementFunction = settings.errorPlacement;
        var successFunction = settings.success;

        settings.errorPlacement = function(error, inputElement) {
            errorPlacementFunction(error, inputElement);
            showOneError();
        }
        settings.success = function (error) {
            successFunction(error);
            showOneError();
        }
        function showOneError() {
            var $errors = $(form).find(".field-validation-error");
            $errors.slice(1).hide();
            $errors.filter(":first:not(:visible)").show();
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:54:28.277

可以试试你的控制器动作

```
var goodErrors = ModelState.GroupBy(MS => MS.Key).Select(ms => ms.First()).ToDictionary(ms => ms.Key, ms => ms.Value);
ModelState.Clear();

foreach (var item in goodErrors)
{
    ModelState.Add(item.Key, item.Value);
} 
```

我只是选择每个属性错误中的一个，清除所有错误然后将单个错误添加回来。

这是完全未经测试的，但应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:04:06.930

您可以创建一个仅显示第一个错误的自定义验证摘要。这可以通过为 HtmlHelper 类创建扩展或编写您自己的 HtmlHelper 来完成。前者更直接。

```
public static class HtmlHelperExtensions
{
    static string SingleMessageValidationSummary(this HtmlHelper helper, string validationMessage="") 
    {
        string retVal = "";
        if (helper.ViewData.ModelState.IsValid)
            return "";
        retVal += @"<div class=""notification-warnings""><span>";
        if (!String.IsNullOrEmpty(validationMessage))
            retVal += validationMessage;
        retVal += "</span>";
        retVal += @"<div class=""text"">";
        foreach (var key in helper.ViewData.ModelState.Keys) 
        {
            foreach(var err in helper.ViewData.ModelState[key].Errors)
            retVal += "<p>" + err.ErrorMessage + "</p>";
            break;
        }
        retVal += "</div></div>";
        return retVal.ToString();
    }
} 
```

这是针对 ValidationSummary 的，但也可以针对`ValidationMessageFor`.

请参阅：[自定义 ValidationSummary 模板 Asp.net MVC 3](https://stackoverflow.com/questions/5857851/custom-validationsummary-template-asp-net-mvc-3)

## 编辑：客户端...

更新 jquery.validate.unobtrusive.js。特别是`onError`功能，它说`error.removeClass("input-validation-error").appendTo(container);`

未经测试，但将该行更改为：`error.removeClass("input-validation-error").eq(0).appendTo(container);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T05:34:46.977

创建一个`html helper extension`只呈现一条消息的。

```
public static MvcHtmlString ValidationError(this HtmlHelper helper)
{
  var result = new StringBuilder();
  var tag = new TagBuilder("div");
  tag.AddCssClass("validation-summary-errors");

  var firstError = helper.ViewData.ModelState.SelectMany(k => k.Value.Errors).FirstOrDefault();

  if (firstError != null)
  {
    tag.InnerHtml = firstError.ErrorMessage;
  }

  result.Append(tag.ToString());
  return MvcHtmlString.Create(result.ToString());
} 
```

更新`jquery.validate.unobtrusive.js` `OnErrors`函数如下，

```
function onErrors(form, validator) {  // 'this' is the form element
   // newly added condition 
   if ($(form.currentTarget).hasClass("one-error")) {
      var container = $(this).find(".validation-summary-errors");
      var firstError = validator.errorList[0];

      $(container).html(firstError.message);
    }
    else {
      var container = $(this).find("[data-valmsg-summary=true]"),
            list = container.find("ul");

      if (list && list.length && validator.errorList.length) {
        list.empty();
        container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

        $.each(validator.errorList, function () {
          $("<li />").html(this.message).appendTo(list);
        });
      }
    }
  } 
```

基本上我们在表单中添加了一个条件`OnError`来检查表单是否包含一个名为的 css 类`one-error`，如果是，则显示一个错误，否则显示全部。

# jquery - Firebug 错误：jQuery 未定义 - 在 yii 应用程序中

> ID：10805599
> 
> 赞同：2
> 
> 时间：2012-05-29T19:41:49.377
> 
> 标签：jquery, yii, yii-components

我正在使用 Yii 框架 v1.1.10r3566。我在 Firebug 中注意到生成的代码正在产生错误。它说“未定义 jQuery”，并且该行有一个函数“jQuery(function($)”。它发生在多个页面上，我相信它会阻止我的 zii 小部件正常运行（以前 CJuiDatePicker 无法正常工作）已经工作了）。我没有使用 jQuery 编写任何例程，也没有包含任何其他 javascript 库。在生成错误的页面之一上生成的代码是：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="language" content="en" />
<!-- blueprint CSS framework -->
<link rel="stylesheet" type="text/css" href="/myapp/css/screen.css" media="screen, projection" />
<link rel="stylesheet" type="text/css" href="/myapp/css/print.css" media="print" />
<!--[if lt IE 8]>
<link rel="stylesheet" type="text/css" href="/myapp/css/ie.css" media="screen, projection" />
<![endif]-->
<link rel="stylesheet" type="text/css" href="/myapp/css/main.css" />
<link rel="stylesheet" type="text/css" href="/myapp/css/form.css" />
<script type="text/javascript" src="/myapp/assets/ef86d901/jquery.js"></script>
<script type="text/javascript" src="/myapp/assets/ef86d901/jquery.yiiactiveform.js"></script>
<title>myapp - Login</title>
</head> 
```

我束手无策，不知道生成的代码为什么会产生此错误。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:55:29.630

该错误通常是未安装**jQuery 框架的结果。**看起来你`jquery.js`是你的 jQuery 框架，因为你提到你自己没有使用任何自定义标记。

一个快速测试是替换这个：

```
<script type="text/javascript" src="/myapp/assets/ef86d901/jquery.js"></script> 
```

有了这个：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

请注意将 1.7.2 替换为您所需的 jQuery 版本，如使用 Google 的热链接[API 库](https://developers.google.com/speed/libraries/)所解释的那样。

如果这解决了您的问题，请检查**本地 jQuery 文件**的路径或考虑使用**Google 的热链接 API 库**，它还有其他好处，您可以[阅读](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:24:05.603

您应该在所有控制器/操作中包含 jquery，为此，将此代码插入 Controller.php（应用程序中所有控制器的最父级）

```
public function beforeAction($action)
   {

      $cs = Yii::app()->clientScript;
      $cs->registerCoreScript('jquery');

   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-31T05:19:02.760

我遇到了同样的问题，然后我查看了“ `View Source`”，那里`jquery`是从资产和“ `js`”目录中加载的。所以我删除了`registerScriptFile('js/jquery');`. 然后它工作正常，因为`jquery`它只从资产加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T14:05:41.613

在我将 components -> assetManager -> linkAssets 设置为 true 以确保正在使用资产的“最新”版本之后，我遇到了类似的问题。然后我忘记了，并擦除了我的资产文件夹，它删除了所有原始资产！

我很方便地恢复了原件（版本控制 ftw），一切都恢复了。可能对处于类似困境的其他人有用。

# mobile - AppForge vb6 和 wm61

> ID：10805600
> 
> 赞同：0
> 
> 时间：2012-05-29T19:41:57.863
> 
> 标签：mobile, vb6

这里的任何人都对与 Visual Basic 6 和 Windows Mobile 6.1 一起使用的 AppForge MobileVB 有任何经验。我正在尝试让定影器工作，但不理解语法。这个框架已经停业多年了。我继承了这个应用程序，并且很快将迁移到 .net，但现在它处于这种混乱状态。

请告诉我有人有什么想法，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:46:02.683

我使用针对 PalmOs 和 Windows Mobile 的 AppForge 进行开发。那是 7 年前，但我的应用程序仍然在 10.000 台设备上运行。你有什么问题？想做什么？最后，最后发布的 AppForge 是 v6.5.3，每个设备都需要许可证。幸运的是，开发者社区能够破解它。如果你没有这个版本，我可以发给你。

# python - python 3.2 语 法错误：语法无效

> ID：10805611
> 
> 赞同：-5
> 
> 时间：2012-05-29T19:42:43.740
> 
> 标签：python, syntax

任何人都可以在这个 python 3.2 代码中找到语法错​​误吗？

```
import math
import numpy

vinf = 10
vfr = 4
x = numpy.linspace(-10,10,50)
y = numpy.linspace(-10,10,50)
a = numpy.zeros(shape=(len(x),len(y)))
b = numpy.zeros(shape=(len(x),len(y)))
u = numpy.zeros(shape=(len(x),len(y)))
v = numpy.zeros(shape=(len(x),len(y)))
p = numpy.zeros(shape=(len(x),len(y)))
s = numpy.zeros(shape=(len(x),len(y)))

for i in range (0,len(x)):
    for j in range (0,len(y)):
        a[i][j]=x[i]
        b[i][j]=y[j]

for i in range (0,len(x)):
    for j in range (0,len(y)):

        v[i][j] = (vfr/(2*math.pi))*math.pow((b[i][j]+.0047)/(a[i][j]+.05)+(b[i][j]+.0517)/(a[i][j]+.2084)+(b[i][j]-.0271)/(a[i][j]+.2084)+(b[i][j]+.0583)/(a[i][j]+.525)+(b[i][j]-.0228)/(a[i][j]+.525)+(b[i][j]+.0242)/(a[i][j]+.8417)+(b[i][j]-.0087)/(a[i][j]+.8417),-2)*((b[i][j]+.0047)/(math.pow(a[i][j]+.05,2)*(1+math.pow((b[i][j]+.0047)/(a[i][j]+.05),2)))+(b[i][j]+.0517)/(math.pow(a[i][j]+.2084,2)*(1+math.pow((b[i][j]+.0517)/(a[i][j]+.2084),2)))+(b[i][j]-.0271)/(math.pow(a[i][j]+.2084,2)*(1+math.pow((b[i][j]-.0271)/(a[i][j]+.2084),2)))+(b[i][j]+.0583)/(math.pow(a[i][j]+.525,2)*(1+math.pow((b[i][j]+.0583)/(a[i][j]+.525),2)))+(b[i][j]-.0228)/(math.pow(a[i][j]+.525,2)*(1+math.pow((b[i][j]-.0228)/(a[i][j]+.525),2)))+(b[i][j]+.0242)/(math.pow(a[i][j]+.8417,2)*(1+math.pow((b[i][j]+.0242)/(a[i][j]+.8417),2)))+(b[i][j]-.0087)/(math.pow(a[i][j]+.8417,2)*(1+math.pow((b[i][j]+.0087)/(a[i][j]+.8417),2))))
        u[i][j] = vinf+(vfr/(2*math.pi))*math.pow((b[i][j]+.0047)/(a[i][j]+.05)+(b[i][j]+.0517)/(a[i][j]+.2084)+(b[i][j]-.0271)/(a[i][j]+.2084)+(b[i][j]+.0583)/(a[i][j]+.525)+(b[i][j]-.0228)/(a[i][j]+.525)+(b[i][j]+.0242)/(a[i][j]+.8417)+(b[i][j]-.0087)/(a[i][j]+.8417),-2)*(1/((a[i][j]+.05)*(1+math.pow((b[i][j]+.0047)/(a[i][j]+.05),2)))+1/((a[i][j]+.2084)*(1+math.pow((b[i][j]+.0517)/(a[i][j]+.2084),2)))+1/((a[i][j]+.2084)*(1+math.pow((b[i][j]-.0271)/(a[i][j]+.2084),2)))+1/((a[i][j]+.525)*(1+math.pow((b[i][j]+.0583)/(a[i][j]+.525),2)))+1/((a[i][j]+.525)*(1+math.pow((b[i][j]-.0228)/(a[i][j]+.525),2)))+1/(a[i][j]+.8417)*(1+math.pow((b[i][j]+.0242)/(a[i][j]+.8417),2)))+1/((a[i][j]+.8417)*(1+math.pow((b[i][j]+.0087)/(a[i][j]+.8417),2))))
        p[i][j] = 1-math.pow(math.sqrt(math.pow(u[i][j],2)+math.pow(v[i][j],2)),2)

file = open("data.dat","w")
file.write('title = "Driven Cavity"\r\n')
file.write('variables = "x", "y", "u", "v", "p"\r\n')
file.write('ZONE T="All"\r\n')
file.write(' I={}'.format(len(x)))
file.write(' J={}'.format(len(x)))
file.write(' K=1')
file.write(' ZONETYPE=Ordered\r\n')
file.write(' DATAPACKING=POINT\r\n')

for i in range (0,len(x)):
    for j in range (0,len(y)):
        file.write('{}\t'.format(a[i][j]))
        file.write('{}\t'.format(b[i][j]))
        file.write('{}\t'.format(u[i][j]))
        file.write('{}\t'.format(v[i][j]))
        file.write('{}\t\n'.format(p[i][j]))

file.close() 
```

该错误表示它位于 u[i][j]= 行的末尾，它可能是一个括号或我只是看不到它的东西。我从昨晚 5 点开始一直在研究这个，现在是第二天下午 3:40。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:56:14.830

`)`在行尾的额外，用这个替换该行：

```
u[i][j] = vinf+(vfr/(2*math.pi))*math.pow((b[i][j]+.0047)/(a[i][j]+.05)+(b[i][j]+.0517)/(a[i][j]+.2084)+(b[i][j]-.0271)/(a[i][j]+.2084)+(b[i][j]+.0583)/(a[i][j]+.525)+(b[i][j]-.0228)/(a[i][j]+.525)+(b[i][j]+.0242)/(a[i][j]+.8417)+(b[i][j]-.0087)/(a[i][j]+.8417),-2)*(1/((a[i][j]+.05)*(1+math.pow((b[i][j]+.0047)/(a[i][j]+.05),2)))+1/((a[i][j]+.2084)*(1+math.pow((b[i][j]+.0517)/(a[i][j]+.2084),2)))+1/((a[i][j]+.2084)*(1+math.pow((b[i][j]-.0271)/(a[i][j]+.2084),2)))+1/((a[i][j]+.525)*(1+math.pow((b[i][j]+.0583)/(a[i][j]+.525),2)))+1/((a[i][j]+.525)*(1+math.pow((b[i][j]-.0228)/(a[i][j]+.525),2)))+1/(a[i][j]+.8417)*(1+math.pow((b[i][j]+.0242)/(a[i][j]+.8417),2)))+1/((a[i][j]+.8417)*(1+math.pow((b[i][j]+.0087)/(a[i][j]+.8417),2))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:46:51.120

将队列分成几个较小的操作，以便隔离错误。`u[i][j] = 0`尝试从整行的小片段开始并依次添加，直到错误发生，然后您就会知道在哪里查找它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:49:31.640

将它粘贴到`vim`并突出显示最后一个字符表明，至少，有一个额外的接近的括号。但是，我建议将其分成多行，以便可以手动调试它。出于可读性的原因，在任何语言中，这么长的行都不是一个好主意。

# ruby-on-rails - Rails 3中具有浅层路线的嵌套资源

> ID：10805614
> 
> 赞同：0
> 
> 时间：2012-05-29T19:43:00.903
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我一直在使用 rails 一段时间，但我还没有克服使用 3 级深度嵌套资源的问题。当我在笔记页面上时，我想将课程名称链接到课程和课程，但 rails 一直给我一个错误。

我有 3 个模型类、课程和笔记。一个类有很多课程，课程属于一个类。课程有很多笔记，并且笔记属于一个课程。我将在下面解释。

**类.rb**

```
 has_many :courses 
```

**课程.rb**

```
belongs_to :class
has_many :schedules
has_many :notes, :through => :schedules 
```

**note.rb**

```
has_many :schedules
has_many :courses, :through => :schedules 
```

**日程安排.rb**

```
belongs_to :course
belongs_to :note 
```

**路线.rb**

```
 resources :classes, :shallow => true do
    resources :courses do
      resources :notes
    end
  end 
```

**index.html.erb**

```
<% @notes.each do |note| %>
  <% note.courses.each do |course| %>
    <%= note_class(course) %>
  <% end %>
<% end %> 
```

**notes_helper.rb**

```
 def note_class(course)
      link_to course.course_name, class_course_path(class, course)
  end 
```

浅路径效果很好，除非 rails 给我一个错误'未定义的局部变量或方法'类''。我认为我上面的代码是正确的，但我不确定为什么它不能正常工作。关于如何让课程链接到像 mysite.com/classes/1/course/3 这样的 url 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:43:18.673

我意识到这个问题是不久前被问到的，但我想既然它还没有被“*回答*”，我会试一试。

几件事。首先，您在辅助方法中遇到的错误是由于没有对`class`实例的引用。您只是将`course`对象作为参数传递。考虑到您上面的关联，这将起作用

**notes_helper.rb**

```
def note_class(course)
  link_to course.course_name, class_course_path(course.class, course)
end 
```

其次，正如其中一条评论中提到的，`class`它是 Ruby 中的保留关键字，因此最好避免将其用于模型和关联。干杯。

# c# - 如果应用程序已经在运行，如何将 args 重新发送到应用程序并使用这些 args 刷新

> ID：10805617
> 
> 赞同：0
> 
> 时间：2012-05-29T19:43:19.677
> 
> 标签：c#, .net, winforms, command-line-interface

我有一个问题。我有一个视频播放器，它接受简单的参数作为 ac# 表单应用程序。作为一项更好地理解编程的实验，我希望只运行一个应用程序实例，并在给出 open 命令时使用新的 args 刷新它。我可以对其进行编程，以便当它收到信号时，刷新视频（）或类似的东西。

伪示例：

```
//app is started from cmd line

//open app for first time
vidViewer.exe("lotr.avi", "44:44");

//keep instance open but have it refresh with new movie
vidViewer.exe("star_wars.avi", "22:32") 
```

就目前而言，将打开一个带有嵌入式视频播放器的新应用程序，因此如果我传递了足够多的参数，我可以打开 100 个打开的电影。我只想保持一个。

如果需要，可以提供更多信息。

谢谢大家，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:51:44.660

我的建议是设计您的应用程序，以便在启动时尝试获取互斥的系统资源（这意味着只有第一个实例会成功）。由于在您的场景中，您还需要一种进程间通信方式（传输新视频的名称和开始时间），您可以使用相同的机制来实现这一点。

例如，您可以使用绑定到固定 TCP 端口的自托管 WCF 服务，每个应用程序实例在启动时都会尝试注册该服务。由于端口的工作方式，只有第一个实例会成功；后续实例将因“端口已在使用”异常而失败。

*   如果一个实例设法注册了 WCF 服务，那么您可以假设它是“主体”实例并继续在其上播放视频。但是，它应该侦听来自 WCF 服务的传入消息并相应地更新正在播放的视频（见下文）。

*   如果一个实例发现该端口已经在使用，它应该假定另一个实例已经在运行。然后它将初始化一个 WCF 客户端，该客户端将要播放的新视频的名称和开始时间发送到 WCF 服务。最后，它应该在不显示任何窗口的情况下自行终止，假设主体实例将负责播放其视频。

# python - selenium2library 运行演示的版本错误

> ID：10805618
> 
> 赞同：0
> 
> 时间：2012-05-29T19:43:26.820
> 
> 标签：python, selenium-webdriver, robotframework

当我从“rtomac-robotframework-selenium2library-893dc2c”演示文件夹中运行 rundemo.py 时。我收到以下错误：

```
Traceback (most recent call last):
 File "rundemo.py", line 34, in <module>
import Selenium2Library
File "C:\Development\Python27\Lib\site-packages\Selenium2Library\__init__.py",
line 5, in <module>
execfile(os.path.join(THIS_DIR, '..', '..', 'version.py'))
IOError: [Errno 2] No such file or directory: 'C:\\Development\\Python27\\Lib\\site-packages\\Selenium2Library\\..\\..\\version.py' 
```

看起来我有 wxVersion.py 而不是 version.py。我正在使用 windows 和 python 2.7 64bit。

# c# - C# 覆盖 OnDrawItem

> ID：10805622
> 
> 赞同：0
> 
> 时间：2012-05-29T19:43:44.633
> 
> 标签：c#

![在此处输入图像描述](../Images/9af4b1216709ad3a55745131229cf97b.png)我正在尝试制作这个组合框：见附图。对于 LineStyle 组合框。

这是我到目前为止的代码

```
public partial class frmDlgGraphOptions : Form
      public partial class frmDlgGraphOptions : Form
    {
        public frmDlgGraphOptions()
        {
            InitializeComponent();
            CmbBoxlineStyles.DropDownStyle = ComboBoxStyle.DropDownList;

        }

        public override void OnDrawItem(DrawItemEventArgs e)
        {
             // Get the item.

      var item = this.CmbBoxlineStyles.SelectedIndex.ToString();
      if(item == null)
         return;

      int startX = e.Bounds.X;
      int startY = (e.Bounds.Y + 1);

      int endX = e.Bounds.X + 5;
      int endY = (e.Bounds.Y + 1);

      //Draw the lines 
      Pen pen = new Pen(Color.Blue);

      e.Graphics.DrawLine(pen, new Point(startX, startY), new Point(endX, endY));

        }

    } 
```

我收到此错误：错误 1 ​​'Fdrc.frmDlgGraphOptions.OnDrawItem(System.Windows.Forms.DrawItemEventArgs)'：找不到合适的方法来覆盖

谢谢孙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:48:18.000

*表单*没有`OnDrawItem`事件，所以没有什么可以覆盖的。

相反，您需要使用组合框的 DrawItem*事件*：

```
public frmDlgGraphOptions()
{
  InitializeComponent();
  CmbBoxlineStyles.DropDownStyle = ComboBoxStyle.DropDownList;
  CmbBoxlineStyles.DrawMode = DrawMode.OwnerDrawFixed;
  CmbBoxlineStyles.DrawItem += CmbBoxlineStyles_DrawItem;
}

void CmbBoxlineStyles_DrawItem(object sender, DrawItemEventArgs e) {
  // draw
} 
```

确保设置 DrawMode 属性，以便控件知道调用您的绘图方法。

如果您尝试制作自己的 ComboBox 控件来绘制这些行项目，我怀疑这可能是您正在寻找的：

```
public class MyCombo : ComboBox {

  public MyCombo() {
    this.DropDownStyle = ComboBoxStyle.DropDownList;
    this.DrawMode = DrawMode.OwnerDrawFixed;
  }

  protected override void OnDrawItem(DrawItemEventArgs e) {
    if (e.Index > -1) {

      int startX = e.Bounds.Left + 5;
      int startY = (e.Bounds.Y + e.Bounds.Height / 2);

      int endX = e.Bounds.Right - 5;
      int endY = (e.Bounds.Y + e.Bounds.Height / 2);

      using (Pen p = new Pen(Color.Blue, (Int32)this.Items[e.Index])) {
        e.Graphics.DrawLine(p, new Point(startX, startY), new Point(endX, endY));
      }
    }
    base.OnDrawItem(e);
  }
} 
```

然后，您只需在使用控件时添加您的笔号：

```
MyCombo CmbBoxlineStyles = new MyCombo();
CmbBoxlineStyles.Items.Add(1);
CmbBoxlineStyles.Items.Add(2);
CmbBoxlineStyles.Items.Add(3);
CmbBoxlineStyles.Items.Add(4); 
```

导致：

![在此处输入图像描述](../Images/25904cecd277bbde0ab31f236464add3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:47:38.107

该`Form`类型没有`OnDrawItem`方法，因此没有什么可以覆盖的。为了覆盖该方法，您需要直接从该`ComboBox`类型继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:49:04.290

您正在尝试覆盖 Form 的方法，但您需要做的是更改 ComboBox 控件的行为。因此，要么创建一个后代 ComboBox 类并在那里覆盖该方法，要么向 CmbBoxlineStyles.DrawItem 事件添加一个事件处理程序（这可以使用设计器完成）并在那里实现您的代码。

# .htaccess - 带有斜线的网站页面

> ID：10805628
> 
> 赞同：1
> 
> 时间：2012-05-29T19:44:20.573
> 
> 标签：.htaccess, web

只是使用 php 建立一个网站。我想知道如何创建页面而不必为每个页面创建“.php”链接。例如，我想将站点构建如下：www.mysite.com/products 而不是 www.mysite.com/products.php。（进一步的例子 www.mysite.com/products/headphones ）

我正在寻找的一个例子如下： http: [//www.starbucks.ca/store-locator](http://www.starbucks.ca/store-locator)

知道星巴克是怎么做到的吗？它不是为每个页面创建一个单独的文件夹和索引，是吗？

提前致谢！

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:48:01.537

您可以使用 URL 重写来执行此操作。您可以创建一个`.htaccess`文件，将其放在您网站的根目录中，内容如下（例如）：

```
RewriteEngine On
RewriteRule ^tutorial/([0-9]+)/$ index.php?tutorial=$1
RewriteRule ^page/store-locator/$ index.php?page=store-locator
RewriteRule ^$ index.php 
```

这些是一些基本规则，它们告诉 Web 服务器将 URL 重写为`.php`具有`.php`.

在上面的示例中，当您访问 example.com/tutorial/3/ 时，它实际上会访问 example.com/index.php?tutorial=3，然后您的 index.php 将显示内容。商店定位器页面类似。

# php - mysql查询显示9个结果

> ID：10805629
> 
> 赞同：0
> 
> 时间：2012-05-29T19:44:25.740
> 
> 标签：php, mysql, mysql5

我有个问题。

我正在运行以下查询。我的数据库中只有一条记录，但我得到了 9 个结果。

```
SELECT c.id, c.rk 
FROM cv AS c, employee AS e , cvCat AS cv_cat 
WHERE c.status=1 
    AND c.empIDFK = e.id 
    AND cv_cat.categoryFK IN ( 17,18,19,38,39,40,41,44,45,46 ) 
    AND cv_cat.cvFK = c.id 
```

有人可以让我知道他们是否对此查询有任何问题。为什么我得到 9 个结果而不是 1 个结果。

此查询应仅显示一条记录，但显示 9 个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:47:23.883

当你这样做

```
FROM cv AS c, employee AS e , cvCat AS cv_cat 
```

您正在对三个表进行隐式连接。如果您想获得不同的记录，您可以`DISTINCT`在选择后添加：

```
SELECT DISTINCT c.id, c.rk 
FROM cv AS c, employee AS e , cvCat AS cv_cat 
WHERE c.status=1 
    AND c.empIDFK = e.id 
    AND cv_cat.categoryFK IN ( 17,18,19,38,39,40,41,44,45,46 ) 
    AND cv_cat.cvFK = c.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:49:06.710

使用显式连接：

```
SELECT c.id, c.rk
FROM cv c
INNER JOIN employee e ON e.id = c.empIDFK
INNER JOIN cvCat cv_cat ON cv_cat.cvFK = c.id
WHERE c.status = 1
AND cv_cat.categoryFK IN (17,18,19,38,39,40,41,44,45,46) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:05:34.163

我认为 9 结果行“问题”基于您的 JOIN 语法，因为这种隐式连接将返回所有行（每个表的）作为连接结果，因为您只提取 c.id 和 c.rk 它可能看起来 MySQL 发送了 9 次相同的结果。

旁注：不推荐使用隐式连接，使用显式连接，例如...

```
 SELECT c.id, c.rk
    FROM cv c
    LEFT JOIN employee e ON c.empIDFK = e.id
    LEFT JOIN cvCat cv_cat ON c.id = cv_cat.cvFK
    WHERE... 
```

将有助于“面向未来”您的代码，并为整个查询添加更多自描述语法。

# android - 如何用空字符串从 textview 中消除边距？

> ID：10805630
> 
> 赞同：1
> 
> 时间：2012-05-29T19:44:27.253
> 
> 标签：android, layout, textview, imageview, android-relativelayout

所以，我有一个看起来像这样的相对布局：

```
ImageView TextView1
TextView2 
```

假设TextView1的内容是“”（空字符串），并且所有的视图和布局都设置为wrap_content，即ImageView，那么应该是在相对布局的中心，对吧？但是，似乎右边距总是大于左边距。我怀疑这是由 TextView1 引起的。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:55:18.500

`View.GONE`您可以在它为`textview1`空时使用可见性并在 ImageView1 上应用布局参数[“alignWithParentIfMissing”](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_alignWithParentIfMissing)以使其占据整个父级（如果您`ImageView1`在左侧对齐`TextView1`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:02:28.637

添加您的代码，以便我们更好地帮助您。

当您的字符串为空时，您可以尝试使用 View.GONE。

```
TextView TextView1 = (TextView) findViewById(R.id.textview1);
String text;
TextView1.setText(text);
if(text == null)
   TextView1.setVisibility(View.GONE); 
```

# bash - vi 将 bash 脚本大写或小写高亮显示为错误

> ID：10805635
> 
> 赞同：2
> 
> 时间：2012-05-29T19:44:43.760
> 
> 标签：bash, case, vi

我的 vi 在突出显示我的 bash 脚本中的错误方面非常出色。但是，我注意到的一件事是，当我将 bash 扩展名用于所有大写或所有小写时，vi 会将字符突出显示为错误。有解决方案吗？

```
#!/bin/bash
mystr="Abc"
echo ${mystr,,} # Works, but vi highlights ,, as in error

% ./test.sh
abc
% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:09:50.077

VIM 语法高亮是通过语法文件完成的。进入 VIM 并输入`:echo $VIMRUNTIME`. 这将告诉您`VIMRUNTIME`目录。在该目录中，有一个名为`syntax`. 里面是语法定义。有一个名为的文件`sh.vim`，其中包含 BASH、Kornshell 和 Bourne shell 的定义。

看看文件的第 400 行，你会看到如下内容：

```
" Special ${parameter OPERATOR word} handling: {{{1
" sh ksh bash : ${parameter:-word}    word is default value
" sh ksh bash : ${parameter:=word}    assign word as default value
" sh ksh bash : ${parameter:?word}    display word if parameter is null
" sh ksh bash : ${parameter:+word}    use word if parameter is not null, otherwise nothing
"    ksh bash : ${parameter#pattern}  remove small left  pattern
"    ksh bash : ${parameter##pattern} remove large left  pattern
"    ksh bash : ${parameter%pattern}  remove small right pattern
"    ksh bash : ${parameter%%pattern} remove large right pattern 
```

在**此**部分中定义了模式以及它们是否合法。您需要定义一个如下所示的区域：

```
if exists("b:is_bash")
   Here be dragons
endif 
```

实际上，我在最新版本的文件中的第 423 行看到了更远的`sh.vim`内容，因此您不必定义自己的。

现在，您所要做的就是将该`Here be dragons`部分替换为定义您想要显示为非错误的语法的内容。我对 VIM 语法了解得不够多，无法告诉你。然而，它看起来并不那么复杂。备份旧的`sh.vim`并获得一些乐趣。信不信由你，这一切都记录在 VIM 中。我已经修改了 Perl 和 Python 的语法文件，没有太多问题。

你也可以去[https://vim.svn.sourceforge.net/svnroot/vim/vim7/runtime/syntax/](https://vim.svn.sourceforge.net/svnroot/vim/vim7/runtime/syntax/)看看是否有一个新`sh.vim`文件可能包含你需要的语法修复。

您也可以将问题报告给[VIM 项目](http://www.vim.org)并让他们知道该问题。他们非常擅长修复此类问题，然后您可以在上面的 Subversion URL 上下载最新的修复程序。

# objective-c - 在 GLUT 中更改鼠标位置？

> ID：10805637
> 
> 赞同：0
> 
> 时间：2012-05-29T19:44:51.680
> 
> 标签：objective-c, macos, mouse, glut

我正在尝试用鼠标旋转相机。移动它不是问题，但我需要将它保存在一个地方。我试过 glutWarpPointer() 但它显着减慢了程序的速度。我正在尝试为某些东西编写引擎，并且不想使用和添加。

```
int diff = x - oldx;
oldx = x; rx += diff;
if (rx > 360) 
    rx = 0; 

if (rx < 0) 
    rx = 360; 

NSLog(@"%f",rx);
back = YES; 
glutWarpPointer(0, 0); 
glutPostRedisplay(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:00:48.793

它需要退出 GLUT，但您可以使用`CGAssociateMouseAndMouseCursorPosition(false);`它来使鼠标移动不会移动光标（视觉光标和事件中报告的绝对位置等都不会移动）。随后的鼠标事件具有不变的绝对位置，但包括适当的增量以提供移动。我不知道这些增量是否可以从 GLUT 访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:49:18.993

`glutWarpPointer`在 OS X 上应该很快；你在你的程序中在哪里调用它？

它有时也可以强制`glutPassiveMotionFunc`被调用，因此请注意这一点。

# asp.net - 如何让 SOAP Web 服务与 ADFS2.0 一起工作

> ID：10805638
> 
> 赞同：1
> 
> 时间：2012-05-29T19:45:05.460
> 
> 标签：asp.net, web-services, single-sign-on, wif, adfs2.0

我正在尝试将 asp.net soap webservice 与使用 ADFS2.0 的集成身份验证一起使用。我需要对 Web 服务进行哪些更改才能从 ADFS2.0 获取身份信息？

有没有人可以指点我的例子。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:19:35.667

如果您使用的是 WCF，本实验室将引导您完成 [http://msdn.microsoft.com/en-us/gg557872](http://msdn.microsoft.com/en-us/gg557872)

特别是练习 2 [http://msdn.microsoft.com/en-us/identitytrainingcourse_webservicesandidentitylab2010_topic4#_Toc258593356](http://msdn.microsoft.com/en-us/identitytrainingcourse_webservicesandidentitylab2010_topic4#_Toc258593356)

您还可以按照声明身份指南动手实验室 [http://blogs.msdn.com/b/eugeniop/archive/2011/06/13/claims-identity-guide-hands-on-labs.aspx](http://blogs.msdn.com/b/eugeniop/archive/2011/06/13/claims-identity-guide-hands-on-labs.aspx)

# r - 向箱线图添加颜色 - “提供给离散比例的连续值”错误

> ID：10805643
> 
> 赞同：41
> 
> 时间：2012-05-29T19:45:32.560
> 
> 标签：r, colors, ggplot2, boxplot

我的问题可能有一个非常简单的解决方案，但我在网上找不到令人满意的答案。

使用以下命令，我能够创建以下箱线图并将其与各个数据点叠加：

```
ggplot(data = MYdata, aes(x = Age, y = Richness)) + 
  geom_boxplot(aes(group=Age)) + 
  geom_point(aes(color = Age)) 
```

我想添加/更改几件事：

**1.**使用从左到右的 6 种不同颜色更改每个箱线图的线条颜色和/或填充（取决于“年龄”）：

```
c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00") 
```

我试过

```
ggplot(data = MYdata, aes(Age, Richness)) + 
  geom_boxplot(aes(group=Age)) + 
  scale_colour_manual(values = c("#E69F00", "#56B4E9", "#009E73", 
                                 "#F0E442", "#0072B2", "#D55E00")) 
```

但这会导致`"Continuous value supplied to discrete scale"`错误。

**2.**使用从左到右的 6 种不同颜色更改每个数据点的颜色（取决于“年龄”）：

```
c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00") 
```

我试过：

```
ggplot(data = MYdata, aes(Age, Richness)) + 
  geom_boxplot(aes(group=Age)) + 
  geom_point(aes(color = Age)) + 
  scale_colour_manual(values = c("#E69F00", "#56B4E9", "#009E73", 
                                 "#F0E442", "#0072B2", "#D55E00")) 
```

但它也会导致错误：

> 提供给离散刻度的连续值

**3**、将图例中的文字改为“0个月”、“1个月”、“3个月”、“6个月”、“9个月”、“12个月”

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-29T21:03:56.393

首先，提供样本数据会有所帮助。既然你没有，这里有一些：

```
MYdata <- data.frame(Age = rep(c(0,1,3,6,9,12), each=20),
                    Richness = rnorm(120, 10000, 2500)) 
```

第 1 部分和第 2 部分源于相同的问题。`Age`是一个连续变量，但您正试图以离散的比例使用它（通过为特定年龄值指定颜色）。通常，比例将变量映射到视觉；对于连续的年龄，每个可能的年龄值都有对应的颜色，而不仅仅是恰好出现在数据中的值。但是，您可以同时将年龄视为某些美学的分类变量（因素）。对于问题的第三部分，在比例描述中，您可以定义与比例中特定中断相对应的特定标签。将所有这些放在一起（并添加一些内容以使您的 x 轴标记得更像您在示例中所拥有的）：

```
ggplot(data = MYdata, aes(x = Age, y = Richness)) + 
  geom_boxplot(aes(fill=factor(Age))) + 
  geom_point(aes(color = factor(Age))) +
  scale_x_continuous(breaks = c(0, 1, 3, 6, 9, 12)) +
  scale_colour_manual(breaks = c("0", "1", "3", "6", "9", "12"),
                      labels = c("0 month", "1 month", "3 months",
                                 "6 months", "9 months", "12 months"),
                      values = c("#E69F00", "#56B4E9", "#009E73", 
                                 "#F0E442", "#0072B2", "#D55E00")) +
  scale_fill_manual(breaks = c("0", "1", "3", "6", "9", "12"),
                      labels = c("0 month", "1 month", "3 months",
                                 "6 months", "9 months", "12 months"),
                      values = c("#E69F00", "#56B4E9", "#009E73", 
                                 "#F0E442", "#0072B2", "#D55E00")) 
```

![在此处输入图像描述](../Images/781e57ad120be36f7a14a52fba0eeebd.png)

使用此配色方案，箱线图中的点不可见（因为它们与箱线图的填充颜色相同）。也许将箱线图留空并用颜色绘制线条会更好。

```
ggplot(data = MYdata, aes(x = Age, y = Richness)) + 
  geom_boxplot(aes(colour=factor(Age)), fill=NA) + 
  geom_point(aes(color = factor(Age))) +
  scale_x_continuous(breaks = c(0, 1, 3, 6, 9, 12)) +
  scale_colour_manual(breaks = c("0", "1", "3", "6", "9", "12"),
                      labels = c("0 month", "1 month", "3 months",
                                 "6 months", "9 months", "12 months"),
                      values = c("#E69F00", "#56B4E9", "#009E73", 
                                 "#F0E442", "#0072B2", "#D55E00")) 
```

![在此处输入图像描述](../Images/aca0e4b5634663c9be43197a4391e147.png)

最后，考虑一下您是否真的需要对每个年龄进行不同的着色，因为它们已经被 x 轴很好地定义了。

# c# - 使用自动映射时如何使用 Fluent NHibernate Validator？

> ID：10805646
> 
> 赞同：1
> 
> 时间：2012-05-29T19:45:39.217
> 
> 标签：c#, nhibernate, orm, fluent

我刚刚使用 Fluent nHibernate 和自动映射功能对一个小型数据库进行了建模。现在我想知道我如何使用验证。在过去，我用属性装饰了我的类，但这种按惯例自动映射的目的是保持事物清洁。

我确实有几个看起来像这样的覆盖文件：

```
public class EventMappingOverride : IAutoMappingOverride<Event>
{
    public void Override(AutoMapping<Event> mapping)
    {
        mapping.Map(x => x.EventType, "TypeID").CustomType(typeof(EventType));
        mapping.Map(x => x.EventStatus, "StatusID").CustomType(typeof(EventStatus));
        mapping.HasMany(x => x.EventDates).KeyColumn("EventID");
    }
} 
```

这是我要放置验证规则的地方吗？如果是这样，那看起来像什么，是否真的有使用自动映射的意义（如果我的覆盖文件无论如何都要详细说明）？

谢谢。

**进一步澄清：**

到目前为止，我的实体看起来像这样：

```
namespace Business.Data
{
       public class Event
       {
            public virtual int Id { get; set; }
            public virtual string Title { get; set; }
            public virtual EventStatus EventStatus { get; set; }
            public virtual EventType EventType { get; set; }
            public virtual IList<EventDate> EventDates { get; set; }
       }
} 
```

我想让它们看起来像那样。只是简单的对象，因此将来我们可以切换或升级 ORM 并仍然拥有这些漂亮干净的对象。

但是，当谈到使用nHibernate [Validator](http://sourceforge.net/projects/nhcontrib/)（NHContrib 的一部分）时，我不确定如何在不乱扔属性的情况下合并它。我想这更像是一个问题架构。我也可以使用不同的验证框架，但我希望它与 nHibernate 绑定，这样它就不会插入/更新无效记录。任何意见表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:56:04.317

我的意见是：

验证是业务的一部分，它依赖于它，然后数据库扩展到这个需求。因此，如果您需要数据库中的电子邮件字符串列，则不应依赖数据库框架来执行此操作，尤其是正如您所说的那样，可能稍后您将切换 ORM，然后您将失去工作。

在业务/高层保持验证，让数据库做简单的查询/插入，记住 NHibernate 已经有点复杂了，所以保持简单。

要回答您的问题，如果您不想乱扔您的实体，请使用此处描述的 xml 验证。

[http://nhforge.org/wikis/validator/nhibernate-validator-1-0-0-documentation.aspx](http://nhforge.org/wikis/validator/nhibernate-validator-1-0-0-documentation.aspx)

# java - Java 和 HttpUnit 存在 GZip 错误

> ID：10805649
> 
> 赞同：0
> 
> 时间：2012-05-29T19:45:50.680
> 
> 标签：java, unit-testing, gzip, zlib

我一直在尝试寻找解决方法近 6 个小时，但无济于事。
我有一个简单的 HttpUnit 程序，可以登录网站。问题是当我最终提交登录表单时出现此错误：

```
Exception in thread "main" java.io.EOFException: Unexpected end of ZLIB input stream
   at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:223)
   at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141)
   at java.util.zip.GZIPInputStream.read(GZIPInputStream.java:92)
   at com.meterware.httpunit.WebResponse.readFromStream(WebResponse.java:967)
                         ..and so on.. 
```

似乎JDK 管理 gzip 文件的方式[存在错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4691425)，早在 2002 年就有报告（！）。看来 Java 仍然有这个错误，唯一的解决方法是告诉 HttpUnit 不接受 gzip 编码的数据，如下所示：

```
WebConversation.getClientProperties().setAcceptGzip(false); 
```

不幸的是，这是我做不到的。为了使登录成功，我需要启用 gzip，否则我只会被重定向到通用主页（没有登录）。
我怀疑完成这项工作的唯一方法是更改​​ HttpUnit 的源代码并在其 gzip 解析中处理 EOF 异常。我迫切需要帮助。有人对此有解决方案吗？

**如果没有，那么您能否建议一些在 Java 中相当简单的 API，例如 HttpUnit，用于填写表单和登录等任务。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:50:17.647

> 我怀疑完成这项工作的唯一方法是更改​​ HttpUnit 的源代码并在其 gzip 解析中处理 EOF 异常。

当第三方库中存在错误时，这通常是开发人员的解决方案。如果您知道 HttpUnit 的问题所在，为什么不在本地修复它呢？您甚至可以将修复推送回项目并希望他们采用它。

> 如果没有，那么您能否建议一些在 Java 中相当简单的 API，例如 HttpUnit，用于填写表单和登录等任务。

如果您的意思是一个遍历网站的库，那么有很多。如果您想要一个“无头”HTTP 客户端，请尝试使用[Apache HttpComponents](http://hc.apache.org/) HttpClient。如果您想要实际使用浏览器的东西，请尝试[Selenium](http://seleniumhq.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:52:07.060

看来这个问题在 HttpUnit 1.7 中已修复（我使用的是 1.6）。
无论如何，我正在按照@ShaggyFrog 的建议转向 HttpComponents，因为现在我遇到了更大的、未知的 cookie 和会话问题。

**编辑：**似乎 HttpComponents 过于复杂。在某一时刻，我不得不手动处理 Http 302 重定向。所以我决定转向 HtmlUnit，它与 HttpUnit 极其相似，但没有任何 cookie 或 gzip 问题。像魅力一样工作。

# linq - 使用 IQ 驱动程序查询 LINQPAD 中的多个 oracle 模式

> ID：10805651
> 
> 赞同：3
> 
> 时间：2012-05-29T19:45:59.703
> 
> 标签：linq, oracle, linqpad

是否可以使用 Oracle 的 IQ 连接驱动程序在 Linqpad 中查询多个模式？

EG 我有一个用户可以看到两个模式，*用户*和*客户*。目前，我必须指定在设置连接时要使用的架构。因此，每个会话我只能查询一个模式。如果我可以执行以下操作，那就太好了：

```
var customers = from c in *customers*.sometable
                select c;
var users = from u in *users*.sometable
             select u;
... 
```

在一个会话中。LINQPad 中任何现有的 oracle 驱动程序都可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T04:13:06.893

目前无法做到这一点：当驱动程序构建类型化的数据上下文时，它只为一个模式创建对象。您为什么不在 linqpad.uservoice.com 中注册请求 - 其他一些人已经问过这个问题。

# javascript - Javascript中的后台循环机制？

> ID：10805653
> 
> 赞同：2
> 
> 时间：2012-05-29T19:46:02.087
> 
> 标签：javascript

我正在开发一个简单的模拟，包括供地方官员使用的城市预算。我已经开发了一个模拟地图和一个算法，当它的函数被调用时“增长”地图。因此，`updateMap();`导致整个游戏领域的许多变化。目前，我将此函数绑定到游戏中的其他机制，例如，每次发生其他事情时调用一次。我的问题是这样的：有没有办法有这样的东西

```
while (true)
    setTimeout('updateMap();', 45000); 
```

这样地图将独立于用户正在做的任何事情以及游戏中发生的事情进行自我更新。我知道 Javascript 不支持线程，但是有没有可以模拟一些像这样的简单线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:47:26.753

你会寻找`setInterval(updateMap, 45000)`

它将采用您提供的功能并每 x 毫秒运行一次。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:47:33.490

你想要一个 WebWorker：

[http://caniuse.com/#search=webworker](http://caniuse.com/#search=webworker)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:49:37.387

答案确实是`setInterval()`。可以在此处找到使用它来模拟多线程的示例：[http ://www.sitepoint.com/multi-threading-javascript/](http://www.sitepoint.com/multi-threading-javascript/)

# mysql - 清理 AJAX jquery 自动完成脚本

> ID：10805656
> 
> 赞同：0
> 
> 时间：2012-05-29T19:46:25.087
> 
> 标签：mysql, ajax, security, codeigniter

我正在寻求帮助以实现 jquery 自动完成功能，有人提到以下代码容易受到 sql 注入的影响。作为编程新手，我无法说出如何/为什么。

有人可以更详细地解释一下，以及为消除安全风险而采取的具体步骤吗？

谢谢

JS：

```
$( "#filter" ).autocomplete({
    source: function(request, response) {
        $.ajax({
        url: "http://rickymason.net/blurb/main/search/",
        data: { term: $("#filter").val()},
        dataType: "json",
        type: "POST",
        success: function(data){
           var resp = $.map(data,function(obj){
                return obj.tag;
           }); 

           response(resp);
        }
    });
},
minLength: 2
}); 
```

控制器：

```
 public function search()
    {
        $term = $this->input->post('term', TRUE);
        $this->thread_model->autocomplete($term);
    } 
```

模型：

```
 public function autocomplete($term)
    {
        $query = $this->db->query("SELECT tag
            FROM filter_thread ft
            INNER JOIN filter f
            ON ft.filter_id = f.filter_id
            WHERE f.tag LIKE '%".$term."%'
            GROUP BY tag");
        echo json_encode($query->result_array());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:15:41.803

您`$term`在查询中使用未转义。恶意用户可以提交类似的字符串`' OR 1=1; DROP DATABASE;--`- 你当然不希望这样。在将字符串放入查询之前，使用 mysql_real_escape_string() 或[等效的 MySQLi来清理字符串。](http://php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:12:46.470

在查询中使用之前检查用户提交的数据是否有不需要的字符是一种很好的做法。这样你就不会让人在那个领域输入他们想要的任何东西。当您在未经检查的查询中使用任何用户提交的数据时，它可能会使您面临 SQL 注入攻击。

这是一个相当不错的解释：[http ://www.cisco.com/web/about/security/intelligence/sql_injection.html](http://www.cisco.com/web/about/security/intelligence/sql_injection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:16:24.700

Sql Injection 是 Web 安全的一个重要问题。请浏览这个关于 sql injection 的网站，然后你就会明白为什么你需要清理字符串。

[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)

# c# - 未订阅强制性事件

> ID：10805660
> 
> 赞同：1
> 
> 时间：2012-05-29T19:46:48.063
> 
> 标签：c#, .net, winforms

**问题：**

我正在开发一个应用程序，在该应用程序中进行一些耗时的操作，我应该在带有取消按钮的表单（WinForm）上显示进度条。所以很明显我正在使用 BackgroundWorker 线程。下面是大致模拟我想要实现的代码的代码。

```
namespace WindowsFormsApplication1
{
    public delegate void SomeDelegateHandler();

    public partial class Form1 : Form
    {
        public event SomeDelegateHandler DoSomeAction;
        BackgroundWorker bgWorker;

        public Form1()
        {
            InitializeComponent();

            bgWorker = new BackgroundWorker();
            bgWorker.DoWork += new DoWorkEventHandler(bgWorker_DoWork);
        }

        void bgWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            //Some logic code here.
            for (int i = 0; i < 100; i++)
            {
                DoSomeAction();
            }
        }       

        private void Form1_Shown(object sender, EventArgs e)
        {
            if (DoSomeAction != null)
                bgWorker.RunWorkerAsync();
            else throw new EventNotSubscribedException();//Is this a valid style??
        }
    }

    public class EventNotSubscribedException : ApplicationException
    {
       //Some custom code here
    }
} 
```

**我的解决方案**

根据上面的代码，只要向用户显示表单（OnShown 事件），我就会启动 backgroundworker 线程。这是因为，用户不需要为此发生任何动作。所以 onshown 做耗时的操作工作。但问题是，正如我上面所展示的，主要耗时的工作是在其他类/组件上执行的，它的边界也很紧（遗留代码：无法重构）。因此，我在启动此表单的旧代码类中订阅了事件 DoSomeAction。

**疑问/问题：**

如上所示抛出异常是否有效？（请在下面阅读我的理由）。

**理由：**

OnShown 事件会检查事件处理程序对象上的空值。这是因为，为了使这个表单可用，事件必须由订阅者订阅（使用代码），然后只有它才能工作。如果没有，那么表单只是显示并且根本没有记录，并且使用代码可能不知道为什么会这样。使用代码可能假设订阅事件是选项，就像每个按钮单击事件一样。

希望我的帖子清晰易懂。

谢谢和快乐的编码，Zen :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:14:38.973

您的意思是您需要向表单的调用者抛出异常吗？是使用 showDialog 还是 Show 调用？

顺便说一句，我不喜欢从事件中生成异常。相反，最好保留它以便它从在 Form 类上设置了某些状态的地方返回。

例如，我更喜欢使用

IsEventSubscribed = false this.Close()

而不是 EventNotSubscribedException

顺便说一句，我可以在代码中看到一个问题，当调用 bgWorker_DoWork 时，您应该检查 DoSomeAction 为 null，否则可能会导致 NullReferenceException。

优选地，

1.  从 Form_shown 开始运行 RunWorkerAsync
2.  勾选 DoWork 中的 Delegate to null，如果为 null，则不调用 DoSomeAction，否则调用。
3.  在 BackgroundWorker 的 RunWorkerCompleted 上，关闭表单。

如果您需要更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T00:07:35.940

我建议让消费代码构造 BackgroundWorker 并将其传递给表单的构造函数。您可以在构造函数中进行空测试并回避整个问题。或者，将委托作为构造函数参数。我的意思是，消费代码需要在操作中更改工作人员委托的可能性有多大？

* * *

另一种方法是让对话框*监控*任务，而不是让对话框*控制*任务（就像你在这里一样）。例如，您可以有这样的界面：

```
public interface IMonitorableTask {
    void Start();

    event EventHandler<TData> TaskProgress;
} 
```

Where`TData`是一种提供更新对话框可能需要的任何信息（例如完成百分比）的类型。

这样做的缺点是每个任务都需要有自己的类型。这会导致非常丑陋、混乱的代码。你可以通过创建一个帮助类来缓解这个问题，比如：

```
public class DelegateTask : IMonitorableTask {
    private Action<Action<TData>> taskDelegate;

    public event EventHandler<TData> TaskProgress;

    public DelegateTask(Action<Action<TData>> taskDelegate) {
        if (taskDelegate == null)
            throw new ArgumentNullException("taskDelegate");

        this.taskDelegate = taskDelegate;
    }

    protected void FireTaskProgress(TData data) {
        var handler = TaskProgress;

        if (handler != null)
            handler(this, data);
    }

    public void Start() {
        taskDelegate(FireTaskProgress);
    }
} 
```

然后你的任务方法变成工厂：

```
public IMonitorableTask CreateFooTask(object argument) {
    return new DelegateTask(progress => {
        DoStuffWith(argument);

        progress(new TData(0.5));

        DoMoreStuffWith(argument);

        progress(new TData(1));
    });
} 
```

现在您可以轻松（*）支持命令行界面。只需将不同的监视器对象附加到任务的事件。

(*) 当然，这取决于您的 UI/逻辑分离的干净程度。

# email - 电子邮件设置 API 身份验证

> ID：10805665
> 
> 赞同：2
> 
> 时间：2012-05-29T19:47:15.320
> 
> 标签：email, google-apps-script, google-oauth, settings, google-workspace

我想使用带有 Apps 脚本的电子邮件设置 API 来管理 Google 站点上的所有用户签名。我之前使用过 Documents Data APIs 和 2-legged OAuth，它工作得很好。我目前停留在电子邮件设置 API 的身份验证步骤上。

代码示例：

```
// Setup OAuthServiceConfig
var oAuthConfig = UrlFetchApp.addOAuthService("signature");
oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken"); 
//I left scope empty to gain access to all APIs would this scope work scope=https://apps-apis.google.com/a/feeds/emailsettings/2.0/
oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
oAuthConfig.setConsumerKey("domain.com");
oAuthConfig.setConsumerSecret("consumerSecret");

// Setup optional parameters to point request at OAuthConfigService.  The "signature"
// value matches the argument to "addOAuthService" above.
var options =
{
  "method" : method,
  "oAuthServiceName" : "signature",
  "oAuthUseToken" : "always"
};

var result = UrlFetchApp.fetch("https://apps-apis.google.com/a/feeds/emailsettings/2.0/"+domainName+"/"+userName+"/signature", options);
Logger.log(result); 
```

我收到此错误：“意外错误（第 37 行）”，即 var result = UrlFetchApp.fetch("https://apps-apis.google.com/a/feeds/emailsettings/2.0/"+domainName+"/"+用户名+“/签名”，选项）；

关于我做错了什么有什么想法吗？

范围在这里： http: [//support.google.com/a/bin/answer.py ?hl=en&answer=162105](http://support.google.com/a/bin/answer.py?hl=en&answer=162105)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:35:27.267

希望这会帮助你。这是一个工作示例，它将获取用户的 HTML 签名或更新 HTML 签名

```
/*
----------------------------------------------------------------------------------
This function will update the HTML signature of a user.
Input will be jason data
To disable signature, pass an empty string as signature value
sample parameter
ob = {user='hps', signature='<b>Regards</b><br>Waqar'}

To disable signature
ob = {user='hps', signature=''}
----------------------------------------------------------------------------------
*/
function updateSignature(ob) {
  //ob = {};
  //ob.user = "hps";
  //ob.signature = "<b>Regards</b><br>Waqar";

  var base = 'https://apps-apis.google.com/a/feeds/emailsettings/2.0/';
  var xmlRaw = '<?xml version="1.0" encoding="utf-8"?>'+
      '<atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:apps="http://schemas.google.com/apps/2006">'+
      '<apps:property name="signature" value="'+htmlEncode(ob.signature)+'" />'+
      '</atom:entry>';
  var fetchArgs = googleOAuth_('emailSetting',base);
  fetchArgs.method = 'PUT';
  fetchArgs.payload = xmlRaw;
  fetchArgs.contentType = 'application/atom+xml';
  var domain = UserManager.getDomain();
  var url = base+domain+'/'+ob.user+'/signature';
  var urlFetch = UrlFetchApp.fetch(url, fetchArgs);
  var status = urlFetch.getResponseCode();
  return status;
}

//-----------------------------------------------------------------------------------------------------------
//This function will retreive Signature settings as json.
/*Sample returned object
{user=hps, signature=<b>Regards</b><br>Waqar}
*/
//-----------------------------------------------------------------------------------------------------------
function retrieveSignature(user) {
  var user = 'hps';
  var base = 'https://apps-apis.google.com/a/feeds/emailsettings/2.0/';
  var fetchArgs = googleOAuth_('emailSetting',base);
  fetchArgs.method = 'GET';
  var domain = UserManager.getDomain();
  var url = base+domain+'/'+user+'/signature?alt=json';
  var urlFetch = UrlFetchApp.fetch(url, fetchArgs);
  var jsonString = urlFetch.getContentText();
  var jsonArray = Utilities.jsonParse(jsonString).entry.apps$property;
  var ob = {};
  ob.user = user;
  for(var i in jsonArray){
    ob[jsonArray[i].name] = jsonArray[i].value;
  }
  return ob;
}
//Google oAuthConfig.. 
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
}

//This function will escape '<' and '>' characters from a HTML string
function htmlEncode(str){
  str = str.replace(/</g,'&lt;');
  return str.replace(/>/g,'&gt;')
} 
```

# c# - 使用 EmguCV (OpenCV) 解决共面点位姿估计

> ID：10805668
> 
> 赞同：4
> 
> 时间：2012-05-29T19:47:22.087
> 
> 标签：c#, math, opencv, computer-vision

我在相机中检测到同一平面上的 4 个点（一个扁平的方形物体），我正在尝试计算这个正方形相对于相机的姿势。

我正在使用最新版本的 EmguCV ( [http://www.emgu.com/wiki/index.php/Main_Page](http://www.emgu.com/wiki/index.php/Main_Page) )，它是 OpenCV 的 C# 包装器。

我见过 POSIT（[http://opencv.willowgarage.com/wiki/Posit](http://opencv.willowgarage.com/wiki/Posit)），但这不适用于共面点。我想知道是否有任何东西可以解决 OpenCV 中的共面姿态估计。

我还看到了solvePnp [http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-solvepnp](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-solvepnp) ，我相信它会做我想做的，但我似乎无法在EmguCV中找到这个功能。

有谁知道如何使用 EmguCV 解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T07:18:31.380

尽管 SolvePnP 在 emgu 中不可用，但一旦在平面上至少有 4 个点对应（你有），你仍然可以计算单应性。如果您不确定，请参阅 CameraCalibration.FindHomography 的文档。一旦有了单应性，就可以将其分解为旋转和平移，从而得到相机姿势。看看[这篇文章](https://stackoverflow.com/questions/8927771/computing-camera-pose-with-homography-matrix-based-on-4-coplanar-points)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T17:42:22.847

Emgu.CV::CameraCalibration.SolvePnP(Emgu.CV.Structure.MCvPoint3D32f[], System.Drawing.PointF[], Emgu.CV.IntrinsicCameraParameters, Emgu.CV.CvEnum.SolvePnpMethod)

**升级并安装最新的 NuGet 包。**

使用每个视图的已知内部参数和外部参数估计外部相机参数。必须指定 3D 对象点的坐标及其对应的 2D 投影。此功能还可以最大限度地减少反投影误差。

# asp.net-mvc-3 - PDFConverter 在单独的服务器上的 asp.net mvc3 中缺少 css 和图像文件

> ID：10805677
> 
> 赞同：0
> 
> 时间：2012-05-29T19:47:35.850
> 
> 标签：asp.net-mvc-3, pdf-generation

我们公司正在使用 dll ephtmltopdf 将 html 字符串转换为 PDF。该应用程序能够在本地开发盒上成功地将 html 字符串转换为 PDF 文件，但是当部署到 qa 服务器时，css 样式（在单独的文件中）和图像文件不会在 pdf 文件中呈现。任何线索为什么会发生这种情况？

# php - 使用 UrlGenerator 生成指向外部路由的 URL

> ID：10805683
> 
> 赞同：2
> 
> 时间：2012-05-29T19:47:53.370
> 
> 标签：php, symfony1, silex

使用 Silex（PHP 微框架），可以为现有的控制器命名，以便我们以后可以轻松地为它们生成 url。例子：

```
$app->get('/gallery', function () {...})
    ->bind('gallery');

// Later on, in a template
{{ path('gallery') }} 
```

我认为这真的很有用，没有它我就活不下去。

但是是否可以注册到外部网站的路线？假设我想为谷歌搜索生成网址，有点

```
{{ path('google', {'search':'symfony'}) }}
// Would render to http://google.com/search?q=symfony 
```

我有任何想法:) 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:47:15.710

`path()`是用于路由的 Twig 扩展。路由是将传入的 URL 路由到控制器操作。

但是，如果您想要帮助器轻松创建那些标准的传出 URL，您可以创建自己的 twig 扩展。

看看：[http ://symfony.com/doc/current/cookbook/templating/twig_extension.html](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)

然后，您可以创建一个变成`{{ google('search string') }}`URL 的扩展。只有想象力才是你的界限。

# php - 基于当前日期的日期计数器

> ID：10805686
> 
> 赞同：0
> 
> 时间：2012-05-29T19:48:12.493
> 
> 标签：php, html

我需要生成当天之后 10 个开放日列表的 html 代码，开放日是指工作日（m、t、w、t 和 f），我正在使用以下函数将日期转换为法语：

```
function f_date() {
    $temps = time();
    $jours = array('Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi');
    $jours_numero = date('w', $temps);
    $jours_complet = $jours[$jours_numero];
    $NumeroDuJour = date('d', $temps);
    $mois = array(' ', 'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre');
    $mois_numero = date("n", $temps);
    $mois_complet = $mois[$mois_numero];
    $an = date('Y', $temps);
    $fr_temps = "$jours_complet, $NumeroDuJour $mois_complet $an";
    return "$fr_temps";
}
echo "<br/>".f_date(); 
```

我想生成以下结果：

```
<select name="ladate">
    <option selected="selected" value="Mardi, 29 mai 2012">29 mai 2012</option>
    <option value="Mercredi, 30 mai 2012">30 mai 2012</option></select>
    ....
    <option value="Vendredi, 15 juin 2012">15 juin 2012</option></select>
</select> 
```

如果您需要更多信息，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:15:33.663

由于您只是在寻找 MTWTF 并且您想要接下来的 10 天，因此您始终可以安全地寻找接下来的 14 天而忽略周末，这将给 10 天。它不适用于假期或类似的情况，但如果需要，您可以更改它。我这里给你伪代码，我把所有的数组映射和文本输出留给你

```
for ($days_to_add : 1 to 14) {
    $new_date = date_add($days_to_add);

    // check the day of the week
    if (date('N', $new_date) >= 6) {
        // ignore it, it's a weekend
        continue;
    }

    // output the option tag for $new_date
    echo "<option ... </option>"
} 
```

这依赖于 10 天和 14 天的假设，如果您想更改该数字，您可以添加某种计数器，并且仅在您查看工作日/非节假日时才增加计数器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:24:45.670

只需创建一个循环，将天数增加到十天并忽略所有非开放日（周六、周日）。`date('N')`是您的朋友来检测给定日期的工作日。

```
<?php
$i = $openDay = 0;
while($openDay < 10) {
  $i++;
  $time = strtotime('+'.$i.' days');
  $day = date('N', $time);

  if ($day == 6 or $day == 7) { // ignore Saturdays and Sundays
    continue;
  }

  echo f_date($time).'<br>';
  $openDay++;
} 
```

您还必须修改`date_f()`函数以`$temps`用作参数。

```
<?php
function f_date($temps = null) {
  // $temps = time();
  // ...
} 
```

# jquery-ui - 将 XML 解析为数组以在 jQuery DatePicker 日历中使用

> ID：10805688
> 
> 赞同：1
> 
> 时间：2012-05-29T19:48:18.113
> 
> 标签：jquery-ui, xml-parsing, jquery-ui-datepicker

我被困在这里，希望能得到一些指导。我正在尝试从提要中获取 XML，将一些元素放入数组中，然后传递给 jQuery 的 DatePicker 插件。我下面的代码显示日历，但不显示提要中的事件。Chrome 也不显示任何错误或警告。不知道发生了什么。非常感谢任何帮助。

## （我的 XML）：

```
<entry>
    <published>2012-05-29T13:05:53-08:00</published>
    <updated>2012-05-29T13:05:58-08:00</updated>
    <title type="html">
       <![CDATA[ Businesses Get Help With Legal Issues ]]>
    </title>
    <content type="html">
       <![CDATA[ Click the article header for the complete story.
       <!-- /Publications/26674.htm -->
       ]]>
    </content>
    <link rel="alternate" type="text/html" href="/Publications/26675.htm"/>
</entry> 
```

## （在外部 JS 文件中）：

```
$(document).ready(function(){

    var events = new Array();
    events = getSelectedDates();

    $("div.datepicker").datepicker({
    beforeShowDay: function(date) {
        var result = [true, '', null];
        var matching = $.grep(events, function(event) {
            return event.published.valueOf() === date.valueOf();
        });

        if (matching.length) {
            result = [true, 'highlight', null];
        }
        return result;
    },
    onSelect: function(dateText) {
        var date,
            selectedDate = new Date(dateText),
            i = 0,
            event = null;

        while (i < events.length && !event) {
            date = events[i].published;

            if (selectedDate.valueOf() === date.valueOf()) {
                event = events[i];
            }
            i++;
        }
        if (event) {
            alert(event.Title);
        }
    }
});
});

function getSelectedDates()
{
    var the_selected_dates = new Array();

    $.ajax(
    {
        url: 'news.xml',
        type: 'GET',
        dataType: 'xml',
        async: false,
        success: function(data)
        {
            $(data).find('entry').each(function(i, entryObj)
            {
                var entryObj = new Object();
                entryObj.eTitle = $('title', this).text();
                entryObj.eDate = $('published', this).text();
                the_selected_dates.push(entryObj);
            });
        }
    });
    return the_selected_dates;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:51:24.447

这个片段有几个问题，但你实际上没有正确解析 XML 的原因`events`总是空的。我更改了`getSelectedDates`函数以执行`each`over each `entry`（在您搜索`entry`元素内的`entry`元素之前）：

```
function getSelectedDates() {
    return $(data).map(function() {
        return {
            title: $('title', this).text(),
            published: new Date($('published', this).text())
        };
    }).get();
}​ 
```

如您所见，我还使用[`.map`](http://api.jquery.com/map)将 XML 元素转换为具有属性`title`和`published`. 您使用了几个属性名称（有时`eDate`，有时`published`），这导致了问题，但我也修复了这个问题。

下一个问题是您正在使用`valueOf`. 由于传递的日期`beforeShowDay`没有时间部分，因此您的函数几乎不可能`$.grep`返回`true`任何日期。我解决这个问题的方法是与我们关心的日期元素（日期、月份、全年）进行比较：

```
beforeShowDay: function(date) {
    var result = [true, '', null],
        matching = $.grep(events, function(event) {
            return event.published.getDate() === date.getDate() && 
                   event.published.getMonth() === date.getMonth() &&
                   event.published.getFullYear() === date.getFullYear();
        });

    if (matching.length) {
        result = [true, 'highlight', null];
    }
    return result;
}, 
```

我也做了类似的改变`onSelect`：

```
onSelect: function(dateText) {
    var date, selectedDate = new Date(dateText),
        i = 0,
        event = null;

    while (i < events.length && !event) {
        date = events[i].published;

        if (selectedDate.getFullYear() === date.getFullYear() && 
            selectedDate.getMonth() === date.getMonth() && 
            selectedDate.getDate() === date.getDate()) {

                event = events[i];
        }
        i++;
    }
    if (event) {
        alert(event.title);
    }
} 
```

我在这里有一个完整的工作示例：http: [//jsfiddle.net/4extL/31/](http://jsfiddle.net/4extL/31/)

**注意**：我会非常小心您在 XML 中使用的日期格式。我不确定是否始终正确解析带有时区的 ISO8601 日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:20:59.133

谢谢安德鲁。这是一个巨大的帮助。我有这一切与以下编辑一起工作：

1...在 getSelectedDates() 函数中，我在返回中添加了一个“查找”，因为我正在处理整个 XML 文件

```
return $(data).find('entry').map(function() 
```

2...我使用 AJAX 从我的 XML 文件创建我的数据变量：

```
var data = $.ajax({
     url: "news.xml",
     type: "GET",
     dataType: "xml",
     async: false,
     success: function(xml){
           return xml;
     }
 } ).responseText; 
```

# facebook - Facebook Open Graph 未发布到未激活时间线的个人资料

> ID：10805693
> 
> 赞同：0
> 
> 时间：2012-05-29T19:48:32.637
> 
> 标签：facebook, facebook-opengraph

脚步：

我们的应用最近切换到使用应用访问令牌来打开图形。以下是用于发布操作的 URL：

[https://graph.facebook.com/FACEBOOKID/namespace:action](https://graph.facebook.com/FACEBOOKID/namespace:action)

发布工作正常，并且正在返回 id。以下 url 还会返回应用程序活动，其中包含使用上面的 URL 创建的新活动的详细信息：

[https://graph.facebook.com/FACEBOOKID/namespace:action?access_token=app_access_token](https://graph.facebook.com/FACEBOOKID/namespace:action?access_token=app_access_token)

问题：

已发布的活动在未激活时间线的旧配置文件中不可见。当使用访问令牌而不是应用程序访问令牌时，它曾经可以正常工作。切换配置文件以使用时间线虽然显示了活动。

我一直在谷歌搜索是否有其他人面临同样的问题，但还没有找到具体的答案。我是否在应用程序配置方面遗漏了一些东西，或者这是一种已知的行为？提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:34:36.587

时间线将很快成为每个用户的强制性要求，所以我不会担心这么多……</p>

# regex - 正则表达式否定表达式

> ID：10805694
> 
> 赞同：0
> 
> 时间：2012-05-29T19:48:35.333
> 
> 标签：regex

我正在使用 pcre RegExp 引擎，我的字符串看起来像这样：

```
<h3 class="description">Description</h3>   <div class="wrapper">  dddsome string blah blahddssssseeeee <div class="empty"> </div></div> </div>          </div> 
```

和正常工作的正则表达式并创建字符串“dddsome string blah blahddssssseeeee”，如下所示：

```
<\s*h3\s*class="*.+?"\s*>.*?</\s*h3>.+?<\s*div.+?class\s*="wrapper"\s*>(.+?)<\s*div\s*class="empty"> 
```

现在有一段时间我有几乎相同的字符串模式，看起来不是 div class="aplus" 标签，当这个标签出现时，我希望上面的正则表达式无法匹配所有字符串。

```
<h3 class="description">Description</h3>   <div class="wrapper">  <div class="aplus">  dddsome string blah blahddssssseeeee <div class="empty"> </div></div> </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-05T11:04:47.823

尝试这个

```
<div.*>(.*)<div.*> 
```

但是使用beautiful-soup 更容​​易更好地抓取网页

# facebook-apps - 应用程序页面选项卡在良好的 url 上获得 404

> ID：10805702
> 
> 赞同：0
> 
> 时间：2012-05-29T19:49:25.317
> 
> 标签：facebook-apps, facebook-page

我创建了一个应用程序（id：155124624522900 - [https://developers.facebook.com/apps/155124624522900](https://developers.facebook.com/apps/155124624522900)）

它应该用作业务页面的页面服务器（作为选项卡）

但是当我尝试从我的调试应用程序访问时，我得到了这个代码：

> 应用程序暂时不可用 URL URL [http://foodtreedevfb.herokuapp.com/tab](http://foodtreedevfb.herokuapp.com/tab)返回 404 Not Found 错误。

不过，网址还是不错的！我想知道发生了什么。

我从 Heroku 上的 Play Framework 服务。

**编辑**
它可能与uri上的一些斜杠问题有关，但我仍然改变了它并没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:52:16.667

当 Facebook 发送 POST 请求时，您的应用会重定向吗？如果您在 Facebook 设置中设置的 URL 没有尾随“/”，则可能会发生这种情况

另外，检查您的索引文件是否允许 POST 请求 - 我不确定 heroku 是否有任何此类限制，但许多其他服务器不允许对某些 URL 的 POST 请求

# javascript - JS 检查 url 是否包含单词或字符

> ID：10805705
> 
> 赞同：0
> 
> 时间：2012-05-29T19:49:44.757
> 
> 标签：javascript, jquery, url

无论如何要检查 window.location.href 是否包含某些部分字符或单词？

像：

```
if(window.location.href.like("/users") or window.location.href.like("/profile") ){
//do somenthing
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:50:27.107

`window.location.href.search("something")`有用

```
if(window.location.href.search(/\/(users|profile)/) != -1) {  // if not found
  // do something
} 
```

[**`search()`**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String)返回第一个匹配的索引，`-1`如果没有找到，则不返回布尔值`true/false`

你也可以使用

```
if(!(/\/("users|profile")/.test(window.location.href))) {  // if not found
  // do something
} 
```

**[.test()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)**返回布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:51:13.417

您可以使用`.match`并提供正则表达式：

```
if (window.location.href.match(/\/(users|profile)/)) {
  alert('yes');
} 
```

# css - Bootstrap：选项卡字体大小不随 CSS 改变

> ID：10805707
> 
> 赞同：3
> 
> 时间：2012-05-29T19:49:49.690
> 
> 标签：css, tabs, twitter-bootstrap, font-size

我正在尝试更改网页上 Twitter Bootstrap 选项卡的字体大小。似乎是一件简单的事情，但由于某种原因它不起作用。

在我的 JSfiddle 示例中一切正常：http: [//jsfiddle.net/Ww5Cw/](http://jsfiddle.net/Ww5Cw/)。

但是，它在实际网页上无法正常工作： http: [//chooserealtoday.com/new.html](http://chooserealtoday.com/new.html)（向下滚动一点 - 仅页面上的选项卡）。

我已经通过 Google Chrome Inspector (.nav-tabs li a) 将字体大小更改为 22px 并且它可以工作，但是当我添加`.nav-tabs li a {font-size:22px;}`到 my时`styles.css`，它似乎不起作用。我也试过了`.nav-tabs > li > a`。

关于为什么会这样的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T21:58:54.733

我尝试了很多东西，甚至使用 jQuery 来更改字体大小，但没有任何效果，因为正如大卫所说，字体被硬编码到 Bootstrap 中。

我最终在之后添加了一行 CSS`bootstrap-responsive.css`并让它工作了。

```
<!-- Le styles -->
<link href="assets/bootstrap2-2/css/bootstrap.min.css" rel="stylesheet">
<link href="assets/css/styles.css" rel="stylesheet">
<link href="assets/bootstrap2-2/css/bootstrap-responsive.css" rel="stylesheet">
<style type="text/css">
  .nav-tabs li a {font-size:22px;}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:06:22.470

不幸的是，字体被硬编码到 Bootstrap 中。您可以查看几个线程，看看人们在哪里提出了类似的问题，并收到了一些关于如何解决的指导。

[Twitter Bootstrap 中的导航栏颜色](https://stackoverflow.com/questions/9869610/navbar-color-in-twitter-bootstrap)

[更改引导网页字体大小时](https://stackoverflow.com/questions/10659018/change-bootstrap-webpage-font-size-when)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:12:52.343

可能是您的 style.css 在另一个之前连接，因此该属性被覆盖。尝试设置连接 css 文件的顺序。

或者尝试将 font-size 属性添加到 ul 或 li。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-25T09:02:16.443

使用指令 (!important) 例如： font-size: small !important;

# javascript - javascript摇动浏览器屏幕的效果

> ID：10805708
> 
> 赞同：0
> 
> 时间：2012-05-29T19:49:52.383
> 
> 标签：javascript, html, css, jquery-effects

javascript如何做出晃动浏览器屏幕的效果？

在谷歌搜索中，我发现涉及`window.moveBy(x,y)`的代码似乎不起作用。我试过了。

**任何可以帮助我实现这种效果/动画的库或代码片段？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T19:53:29.620

您可能无法移动实际的浏览器窗口，因为该功能在现代浏览器中被阻止。`body`但是，您可以通过相对于窗口为左/右/上/下设置动画来“摇动”窗口的内容。

# jquery - 按下后退按钮时跳过登录表单

> ID：10805709
> 
> 赞同：0
> 
> 时间：2012-05-29T19:50:02.727
> 
> 标签：jquery, jquery-mobile

我有一种情况，我链接到“受保护”页面 ( `xxx.php`)，该页面确定用户需要登录才能继续前进。所以`xxx.php`显示一个登录页面。成功登录后，它继续到应用程序中的下一页等，等等，等等，没有问题。问题在于，当用户在应用程序的首页（登录后的第一页）上按下浏览器的后退按钮时，他们将返回登录表单，而不是链接到登录表单的页面。

基本上：

`index.html -> xxx.php`

如果登录，继续#app页面（第二页`xxx.php`）否则显示登录表单并处理用户响应，成功继续到#app页面

我确定答案在 jquery mobile 的哈希/缓存逻辑中的某个地方，只是不确定在哪里，因为我是新手，对它还没有真正的了解。

笔记：

我用来`$.mobile.changePage('#app')`在成功登录后调用应用程序。

我使用普通`<a href="xxx.php">`链接`xxx.php`从`index.html`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:34:35.943

我知道这听起来很奇怪，但是如果您将登录视为一个对话框，那么 Back 功能将跳过它，但我从未尝试过使用不同的 .html/.php 页面，仅使用同一模板中的 div

您还可以使用以下方法覆盖该页面上的 Back 功能，使其成为 index.html 的直接链接：

```
$("#myBackButton").live("click",function(){
    window.location = "index.html";
    return false;
}); 
```

希望这可以帮助

# eclipse - STS 上的 Grails：如何同时运行 >1 个 grails 应用程序

> ID：10805710
> 
> 赞同：0
> 
> 时间：2012-05-29T19:50:06.457
> 
> 标签：eclipse, grails, sts-springsourcetoolsuite, run-app

工作区由 2 个项目组成。一个是主要的、面向用户的 grails 应用程序，它在端口 8080 上运行。另一个是管理应用程序，也是 grails，通过它配置主应用程序的各种东西（我想运行，与主应用程序同步，在 8081 上）。

我不知道如何让两者同时运行（并且未能通过谷歌找到答案）。我想这样做，以便我可以在管理应用程序中更改主应用程序的内容，并在主应用程序中测试这些更改，而无需不断关闭一个以启动另一个。

我尝试将本地环境的 config.groovy 参数设置为 grails.serverURL = "http://localhost:8081/admin-app" （而主应用程序指定 grails.serverURL = "http://localhost: 8080/主应用")

我尝试在管理应用程序的运行配置中添加“-Dserver.port=8081”作为程序参数，但这并不能解决问题。

我最谦虚的感谢 eclipse/STS 大师，他有这个问题的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:28:30.450

您不应将 server.port 添加为程序参数。它需要是一个 vm 参数。

VM 参数添加在参数选项卡上：

![在此处输入图像描述](../Images/0e5e2e02c92bbefad322710a87cab562.png)

所以，应该添加在底部，而不是顶部。

# javascript - 比较 unicode 字符时，Javascript 字符串比较失败

> ID：10805711
> 
> 赞同：15
> 
> 时间：2012-05-29T19:50:08.900
> 
> 标签：javascript, string, unicode, data-transfer, unicode-normalization

我想比较 JavaScript 中两个相同的字符串，但相等运算符`==`返回 false。一个字符串包含一个特殊字符（例如 danish `å`）。

JavaScript 代码：

```
var filenameFromJS = "Designhåndbog.pdf";
var filenameFromServer = "Designhåndbog.pdf";

print(filenameFromJS == filenameFromServer); // This prints false why? 
```

**对我有用的解决方案** 是 slevthan 指出的 unicode 规范化。

我分叉了我原来的 jsfiddle 以使用 slevthan 建议的规范化库制作一个版本。链接：http: [//jsfiddle.net/GWZ8j/1/](http://jsfiddle.net/GWZ8j/1/)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T20:03:29.190

与这里的其他人所说的不同，这与编码无关。相反，您的两个字符串使用不同的代码点来呈现相同的视觉字符。

要正确解决此问题，您需要在比较两个字符串之前对它们执行 Unicode 规范化。不幸的是，JavaScript 没有内置此功能。这是一个可以为您执行规范化的 JavaScript 库：[https ://github.com/walling/unorm](https://github.com/walling/unorm)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-29T03:17:39.337

JavaScript 相等运算符`==`在以下情况下似乎会失败。在所有情况下，它都是程序员错误。不是 JavaScript 中的错误。

1.  这两个字符串不包含相同数量和序列的字符。

2.  在一个字符串之前、之中或之后有空格或换行符。对两者都使用 trim() 运算符并仔细查看两个字符串。

3.  惊喜类型转换。程序员正在比较不兼容的数据类型。

4.  有些 unicode 字符看起来与其他 unicode 字符相同，但实际上是不同的 unicode 字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:54:31.267

UTF-8 是一个复杂的东西。字符集有两个不同的字符代码，例如 á、é 等。正如您在 URL 编码版本中已经看到的，两个版本的字符的 HEX 字节不同。

有关更多信息，请参阅[此](https://stackoverflow.com/a/10651546/1419007)答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-06T21:12:44.530

我有同样的问题。

添加

```
<meta charset="UTF-8"> 
```

到 HTML 文件解决了这个问题。

在我的例子中，模板引擎将一个 json 字符串烘焙到 HTML 文件中。这个字符串是 unicode。

虽然模板也是一个 unicode 文件，但 JS 引擎将我写入模板的字符串视为 latin-1 编码字符串，直到我添加了元标记。

我正在将输入的字符串与其中一个 JSON 对象项 ( `location.title == "Mühle"`)进行比较

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-11T14:53:55.117

让浏览器为您标准化 unicode。这种方法对我有用：

```
function normalizeUnicode(s) {
    let div = $('<div style="display: none"></div>').html(s).appendTo('body');
    let res = div.html();
    div.remove();
    return res;
}

normalizeUnicode(unicodeVal1) == normalizeUnicode(unicodeVal2) 
```

# python - Python浮点到字符串，只有“点符号”？

> ID：10805718
> 
> 赞同：1
> 
> 时间：2012-05-29T19:50:18.283
> 
> 标签：python, string, floating-point, representation

我正在将浮点数写入文本文件，如果 Python 停止将“0.000002”之类的数字写为“2e-6”，我将不胜感激。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:53:31.560

您可以使用格式化指令，例如这个：

```
n = 0.000002
print('{:f}'.format(n))
0.000002 
```

有关格式化的更多信息，请参阅这些[Python 文档](http://docs.python.org/library/string.html#formatspec)

如果在 Python v2.6 之前工作，则为旧式（感谢 @mgilson 和 @artSwri）

```
print('%f' % n) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:53:28.577

```
>>> "%f" % 2e-6
'0.000002' 
```

# php - PHP SQL语法检查是否有匹配

> ID：10805720
> 
> 赞同：-1
> 
> 时间：2012-05-29T19:50:28.437
> 
> 标签：php

我正在尝试在 php 中查询 db 并获取是否存在匹配/成功，但它不会导致成功，尽管它应该如此，所以我认为存在语法错误？

这是代码：

```
if ($db_found) {
    $SQL = "SELECT * FROM wp_users where user_login='.$user.'";
    $result = mysql_query($SQL);

//Check if theres a match   
if $result > 0 {
        echo 'There was a match';
    }               

    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:51:15.533

```
if (mysql_num_rows($result)) {
  echo 'match';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:53:07.870

```
 if (mysql_num_rows($result)==1) {
   echo 'There was a match';
 } 
```

# c# - WPF 绑定和历史值

> ID：10805721
> 
> 赞同：0
> 
> 时间：2012-05-29T19:50:33.397
> 
> 标签：c#, wpf, binding

我目前正在编写一个包含速率的 WPF 进度条（请参阅[Windows 8 - Fancy Progress Bars API?](https://stackoverflow.com/questions/9978078/windows-8-fancy-progress-bars-via-c)）。

下面的屏幕截图显示了我到目前为止所获得的内容（左）以及作为我学习练习的一部分在代码中做得不好（右）。我现在正在尝试将代码版本转换为尽可能多地使用 XAML。

![在此处输入图像描述](../Images/5988fc351d19d254a9ebd593acd3c2d9.png)

[通过创建一个名为RateBase](http://pastebin.com/FCb5m8ex)的新类并以与 RangeBase 类似的方式实现它，我已经完成了大部分工作。然后我添加了一个新实例并提供了一个模板文件[RangeGraph](http://pastebin.com/r6sxNj0K)。我正在尝试尽可能按照书本进行，但我不确定如何处理最后阶段。

我现在想添加一个图表，这个图表是为了显示速率，因为它随着进度的进展而在历史上发生了变化。我将“汇率”作为可以绑定的值，但我相信在某些地方我需要一个包含我的历史汇率值的 Double[]。我的问题是它应该放在哪里（我真的不想污染 RateBase）以及如何从我的模板绑定到它（如果我在那里添加属性，我不相信我可以绑定到 RangeGraph.cs 或者是我错了吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:29:19.247

你是对的，你需要历史数据。在我看来，每当绑定的依赖属性`Rate`发生变化时，您应该将旧值移动到在图形控件本身（具有 DP 的同一位置）上定义的 IEnumerable 中，并使用它来绘制线条。我个人会创建一个名为 MyControlData 的类并将其实例添加到控件中。

您可能还想添加 a`Timer`并将当前 Rate 移到 IEnumerable 中，当它 Elapses 时，相同速率的较长条纹将显示为多个条。取决于您实际确定进度的方式。您可能会在这里陷入以下两难境地：在大多数情况下，`Rate`变化的间隔与`Percentage`大多数情况不同 - 什么让您的船漂浮？

将历史记录保留在您的控件范围内会使您的应用程序与您的 Rate 历史记录无关，但让您的控件根据需要显示它。

若要在 UserControl 中使用 DataBinding，请编辑`<UserControl x:Name="myControl">`Control.xaml 中的节点并添加一个名称，如下所示。无论您想在哪里绑定，请参阅`ElementName=myControl`。请注意，如果您想实现这一点，则必须在控件（或 MyControlData）上实现 INotifyPropertyChanged - 或者，建议直接将其实现为依赖属性。

顺便说一句，如果您不知道如何实现您想要查看的内容`ItemsControl`。我认为您想要做的事情可以通过使用`ItemsControl`和这样简单的方式轻松实现`ItemsTemplate`，其中 ItemsSource 是您的历史数据，而 ItemTemplate 描述了您当前的汇率与您的 MaxRate 相比。MaxRate 是您可以从 DependencyProperty`Rate`的更改处理程序中设置的另一个属性。

# clickonce - 有没有办法在 Visual Studio 中找到 dll 引用？

> ID：10805722
> 
> 赞同：0
> 
> 时间：2012-05-29T19:50:35.843
> 
> 标签：clickonce, smo

我有一个 ClickOnce 部署的项目。上一个版本，我发现 ClickOnce 添加了一个`Microsoft.SqlServer.Diagnostics.Starace.dll`作为先决条件。我不确定为什么要添加它。

似乎如果我在 GAC 中没有此文件的 pc 上编写项目，ClickOnce 不会将此文件添加为 prerequesite。我搜索了命名空间，但无法弄清楚我在哪里引用了这个 dll。

我的问题是：有没有一种方法或工具可以帮助我在哪里引用这个 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:41:02.107

您可以使用[dependency walker](http://www.dependencywalker.com/)来检查程序集的依赖关系。

# smtp - AppHarbor 电子邮件 SMTP 服务器连接问题

> ID：10805725
> 
> 赞同：1
> 
> 时间：2012-05-29T19:50:48.440
> 
> 标签：smtp, exchange-server, appharbor

我必须连接到远程 SMTP 服务器 (MS Exchange) 才能通过部署到 AppHarbor 的应用程序发送电子邮件。为了让我在 SMTP 服务器上正确设置，我需要指定一个 IP 地址请求将通过。我尝试使用我用来配置我的 DNS 设置的 IP 地址，但这没有帮助。

我使用这个 SMTP 服务器的原因是因为当我使用我的 Google Apps SMTP 配置时，电子邮件被阻止了，所以我在公司基础架构中使用了 Exchange 服务器，这样电子邮件就不会被拒绝。

有没有其他方法可以使用 AppHarbor 上的应用程序连接到 SMTP 服务器，或者我必须采取其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:07:23.087

我们维护一个[AppHarbor 应用服务器 IP 地址](http://support.appharbor.com/kb/tips-and-tricks/application-server-ips-ec2-configuration)列表。不过，我们建议您使用其中一种[电子邮件插件](https://appharbor.com/addons)。

# svn - 使用颠覆从分支合并到主干

> ID：10805726
> 
> 赞同：0
> 
> 时间：2012-05-29T19:50:51.213
> 
> 标签：svn

我创建了一个分支，但没有从主干复制文件。开发现已完成并准备好进行实时发布。我想从分支合并到主干。（主干包含现有代码）。使用合并命令后，我看不到任何合并的文件。当我使用 gui subverion 比较主干和分支时，我可以看到文件中的差异。（subverion 1.6.16）

要合并，我执行了以下步骤

1.checkout trunk到一个名为working_copy的文件夹

2.run command svn info of the trunk获取版本号aaaa

3.运行命令 svn log --step-on-copy 分支 bbbb

4\. svn merge -r bbbb:aaaa BRANCH URL working_copy

5\. svn commit -m"merged" 在提交后得到一个新的版本号。没有文件被合并，也没有看到错误。

请指教我哪里出错了。如果分支不是从主干装箱，也可以使用合并命令。

提前致谢。

* * *

执行的其他步骤我在不成功的合并 svn add * --force 之后执行了此步骤，然后是 svn commit。但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:38:38.883

您需要将分支*重新*集成到主干中。[这里是如何](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchemerge.basicmerging.reintegrate)。

注意两个重点：（1）先将主干合并为分支；(2) 使用`--reintegrate`选项。

# mysql - 如何将表导出到mysql服务器？

> ID：10805727
> 
> 赞同：-2
> 
> 时间：2012-05-29T19:51:01.530
> 
> 标签：mysql

我有一个在 netezza 中创建的表，我想将它导出到 mysql 服务器。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:00:58.290

试试下面的命令。

你用了什么？你在使用 linux mysql 服务器吗？还是只是xampp？

mysqldump -u -p -h remote_server database_name table_name > text.sql

# android - Android NDK：“modfl”未在此范围内声明

> ID：10805730
> 
> 赞同：0
> 
> 时间：2012-05-29T19:51:11.587
> 
> 标签：android, android-ndk

我正在尝试将一些代码从另一个项目中提取到一个 NDK 项目中，并且在构建时出现以下错误：

```
error: 'modfl' was not declared in this scope 
```

在我拥有的源文件中`#import <math.h>`，调用如下：

```
long double tempValLong;
double tempValDouble; // This is initialized to a decimal number
long double n = modfl(tempValDouble , &tempValLong); 
```

Application.mk 包括`APP_STL := gnustl_static`. 我错过了什么，还是 Android 不包含 modfl 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:00:26.490

首先 - #import 是 C/C++ 代码中非常非标准的指令。你应该使用#include。

至于 modfl - Android NDK 没有。很可能是因为跨平台问题。ARM 不支持 long double。您应该使用`double`而不是`long double`使用该`modf`功能。

# c# - 为什么文字前面会出现感叹号

> ID：10805735
> 
> 赞同：3
> 
> 时间：2012-05-29T19:51:22.167
> 
> 标签：c#, .net, wpf

`TextBlock`我只是用一些文本填充！（感叹号）在最后。和 ！出现在正文前面。

所以而不是

> 一些文字！

我懂了

> !一些文字

这怎么可能？

有什么线索吗？

谢谢！

* * *

代码

```
 TextBlock tb = new TextBlock();

  tb.Text = Text;

  lstItems.Children.Add(tb); // lstItems is a StackPanel 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:53:24.363

最有可能的是， 的祖先`TextBlock`设置`FlowDirection`为`RightToLeft`。尝试将其重置为`LeftToRight`：

```
tb.FlowDirection = FlowDirection.LeftToRight; 
```

**编辑**：原因解释起来有点复杂；它与如何呈现[双向文本有关。](http://en.wikipedia.org/wiki/Bi-directional_text)来自维基百科：

> 标点符号 […] 可以出现在 LTR 和 RTL 脚本中。它们被称为“弱”字符，因为它们不包含任何方向信息。所以由软件决定这些“弱”字符将被放置在哪个方向。

WPF 将您`!`与文本的其余部分分开，并将其放置为遵循您的方向的流程（在这种情况下，位于~~右~~左）。

# jquery - 如何从 HTML5 FileUpload 将文件内容传递给 web 服务（asmx）？

> ID：10805738
> 
> 赞同：3
> 
> 时间：2012-05-29T19:51:27.110
> 
> 标签：jquery, asp.net, html

我想将 Html5 文件上传中的文件传递给`ASMX webservice`using `jquery $.ajax`. 我想知道我应该使用什么数据类型来反序列化 web 服务中上传的文件。

这是 HTML 代码：

```
<input type="file" name="fileToUpload"  id="fileToUpload" />
      <input type="button" onclick="uploadFile()" /> 
```

Javascript代码：

```
function uploadFile() {
    var ob=new Object();
    ob.name =document.getElementById('fileToUpload').files[0];
    var Result= JSON.stringify(ob);
    $.ajax(
    { url: "UploadWS.asmx/UploadedFile",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        type: "POST",
        data: "{'x':"+Result+"}",
        success: function() { },
        error: function() { alert('error'); }
    });
} 
```

网络服务代码：

```
public class ExtraInfo
    {
       //What data type write here?
    } 
[WebMethod]
    public void UploadedFile(object x) {
        JavaScriptSerializer Ser = new JavaScriptSerializer();
        ExtraInfo Ext = new ExtraInfo();
        Ext = Ser.Deserialize<ExtraInfo>(x.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T20:02:07.013

```
function uploadFile() {
    var data = new FormData(),
        file = $("#fileToUpload")[0].files[0];

    data.append( "name", file.name );
    data.append( "size", file.size );
    data.append( "type", file.type );
    data.append( "file", file );

    $.ajax(
    { url: "UploadWS.asmx/UploadedFile",
        dataType: "json",
        type: "POST",
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function() { },
        error: function() { alert('error'); }
    });
} 
```

这应该在您的服务器中显示为常规上传 POST 请求，其中`"file"`是上传文件的表单字段名称。我不知道如何用 ASP.NET 做到这一点。

# android - Android服务、alarmmanager、在线查看更新、状态栏通知

> ID：10805739
> 
> 赞同：1
> 
> 时间：2012-05-29T19:51:36.040
> 
> 标签：android, eclipse, service, alarmmanager

我现在已经花了 2 天的时间来尝试实现这一目标。然而，我完全被迷惑了。个人而言，我已经成功完成了所有任务，但我不知道如何进行下一部分。

请有人创建步骤并仅简化任务。我不需要代码（试图节省您的时间）。我需要知道这是如何实现的。

1.  每 5/10/15/20/30/60 分钟（根据用户在应用程序中的偏好），将在线检查更新并接收一个数字（自上次检查以来的更新次数）。

2.  即使应用程序终止，我希望它可以作为服务运行，因此仍然检查更新（如果它是这样工作的）

3.  自从研究处理程序/计时器/服务/警报管理器以来，我现在对此感到非常困惑，所以我还需要知道实现这一目标的最佳方法。

那么，有人可以这样说：

1.  在“名称”活动中，添加以下代码：...
2.  在清单中创建“此类”文件，添加等
3.  在这部分代码中，添加您的在线校验码
4.  把你的状态栏通知代码放在这里等等......

我认为问题是我在 SOF 上阅读了太多关于人们的问题并且感到困惑。

真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:06:04.483

您应该`Handler`在应用程序运行时使用 for 计时，`AlarmManager`否则。为简单起见，您可以将后者用于使用此 API 的两个任务：

```
public void setRepeating (int type, long triggerAtTime, long interval, PendingIntent operation) 
```

[我在这篇](http://justcallmebrian.com/?p=129)博文中找到了一个例子。摘录：

1.  `PendingIntent`用它的`getBroadcast()`方法创建一个新的。
2.  使用上述方法创建警报`AlarmManager`。
3.  按照[开发人员指南](http://developer.android.com/guide/topics/intents/intents-filters.html)中的说明创建`BroadcastReciever`并注册它。`AndroidManifest.xml`
4.  检查`onReceive`方法的更新`BroadcastReceiver`。

或者，您可以创建一个`Activity`：

1.  第一次开始安排警报，但使用`getActivity`意图方法并将您的活动类传递给它。
2.  在随后的运行中检查更新。

# javascript - 使用jquery在点击时增加一个变量

> ID：10805740
> 
> 赞同：1
> 
> 时间：2012-05-29T19:51:37.750
> 
> 标签：javascript, jquery, html

这似乎是一件非常简单的事情，但我似乎无法让它发挥作用。我有：

```
<button id="more">more</button>
<button id="less">less</button>

<p id="info"></p>

<script>
var howMany = 1;
$(#more).click(function(){
    howMany + 1;
});
$(#less).click(function(){
    howMany - 1;
});
$("#info").text(howMany);
</script> 
```

我只是想让信息段落在用户点击更多或更少时增加或减少。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T19:57:22.900

您的代码中有几个错误，正如其他人已经提到的那样，选择器中缺少引号，在递增/递减后没有重新分配变量值。

```
var howMany = 1;
$('#more').click(function(){
    howMany += 1;
    $("#info").text(howMany);
});
$('#less').click(function(){
    howMany -= 1;
    $("#info").text(howMany);
});
$("#info").text(howMany);​ 
```

这是一个[工作小提琴](http://jsfiddle.net/joycse06/eLVxn/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T19:54:12.147

有几个问题：

*   您需要字符串作为选择器。所以`#more`用引号括起来：`"#more"`。
*   您需要更新变量，而不仅仅是计算加法或减法并忽略结果。使用`+=`and`-=`代替`+`and `-`。
*   您可能希望`<p>`在每次加/减后更新元素。因此`.text`，在更新变量后，将调用放在两个 click 函数中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:53:24.117

您将 1 添加到`howMany`，但不影响变量的结果。使用`howMany = howMany + 1;`或`howMany += 1;`

编辑：根据 pimvdb 的回答，还有其他问题，看看他的帖子。更正的代码在这里：

```
<button id="more">more</button>
<button id="less">less</button>

<p id="info"></p>

<script>
var howMany = 1;
$("#more").click(function(){
    howMany += 1;
    $("#info").text(howMany);
});
$("#less").click(function(){
    howMany -= 1;
    $("#info").text(howMany);
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T19:55:08.307

您没有将结果分配给变量，而且您是在点击事件**之外**`text`设置元素的！尝试：

 **```
$("#more").click(function(){
    howMany += 1;
    $("#info").text(howMany);
});
$("#less").click(function(){
    howMany -= 1;
    $("#info").text(howMany);
}); 
```**

# c++ - GCC 4.7 编译的库是否与 GCC 4.6.3 程序兼容？

> ID：10805742
> 
> 赞同：4
> 
> 时间：2012-05-29T19:51:41.573
> 
> 标签：c++, linux, gcc, c++11

我有一个巨大的 C++11 项目，其中包含诸如功能之类的插件。我的项目有一些库（用 gcc 4.6.3 编译）、一个前端（用 gcc 4.6.3 编译）和一些插件（用 gcc 4.7 编译）。插件通过库加载`dlopen`并引用内容。

我的项目使用模板、typeinfo、shared_ptr、stl 容器等。

当我使用相同版本的 gcc 编译所有内容时，一切运行正常。当我按照我描述的方式编译（4.6.3 中的库和前端以及 4.7 中的插件）时，我开始面临问题。

我不确定发生了什么，我希望你能给我一些线索并帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:36:47.447

来自[http://gcc.gnu.org/gcc-4.7/changes.html](http://gcc.gnu.org/gcc-4.7/changes.html)：

> GCC 版本 4.7.0 和 4.7.1 对 C++ 标准库进行了更改，这影响了 C++11 模式下的 ABI：向 std::list 添加了一个数据成员，更改了它的大小并更改了一些成员函数的定义，以及std::pair 的移动构造函数非常重要，它改变了带有 std::pair 参数或返回类型的函数的调用约定。GCC 4.7.2 版本的 ABI 不兼容问题已得到修复，但因此使用 GCC 4.7.0 或 4.7.1 编译的 C++11 代码可能与使用不同 GCC 版本和 C++ 编译的 C++11 代码不兼容使用任何版本编译的 98/C++03 代码。

我遇到了 std::list<> 的问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T20:10:48.660

G++ 4.6**与**4.7 兼容，尽管人们在这里声称，只要在运行时使用来自用于构建任何对象的最新版本的 libstdc++.so。

但是对于 C++11，由于支持仍在不断发展，因此保证较少（直到最近 C++11 也是如此！）所以我们无法避免进行一些不兼容的更改以改进 C++11 支持。

如需更完整的答案，请在 gcc-help 邮件列表中发布您的问题的详细信息，我将对其进行调查

# facebook - 从企业帐户创建和管理 Facebook 应用程序

> ID：10805745
> 
> 赞同：55
> 
> 时间：2012-05-29T19:51:58.270
> 
> 标签：facebook, ads, user-accounts, facebook-ads-api

我可以通过“企业”帐户创建或管理 Facebook 应用程序吗？

当我以企业帐户登录时尝试访问`https://developers.facebook.com/apps`时，它会将我重定向回我的主页，并且不会让我创建应用程序。

背景：企业/广告帐户（有时称为“灰色帐户”）是 Facebook 提供给广告商的一种特殊的、现已弃用的帐户类型，用于在[Business Manager](https://business.facebook.com)推出之前管理他们的广告和页面——人们想要使用企业的主要原因account with an App 是将现有应用程序链接到广告帐户，以便可以将广告驱动到应用程序。

有什么方法可以使用企业/灰色帐户管理或创建 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-29T19:51:58.723

“企业”或广告帐户无法管理应用程序 - 如果在过去的某个时间您能够使用企业帐户创建应用程序，这是一个错误或漏洞，不应该是可能的 -**只有经过验证的真实用户帐户才应该能够创建和管理应用程序。**

如果您创建了一个虚假的用户帐户、创建了应用程序，然后将您的用户帐户转换为企业帐户或让 Facebook 为您完成，那么您也可能拥有一个拥有应用程序的企业帐户。

# 如果您需要在多人之间共享应用程序的所有权

您可以通过[API](https://developers.facebook.com/docs/graph-api/reference/v2.0/app/roles)或应用程序设置的“角色”选项卡让所有管理员/开发人员直接在应用程序开发人员或管理员上工作： ![角色管理画面](../Images/0a392146e19d0ddcdac62ca10d3f144a.png)

# 如果您需要使用企业帐户为应用投放广告

您可以在“高级”选项卡上的应用设置中指定哪些企业帐户将管理应用的广告 - 添加用于管理广告的电子邮件地址。

这是应用程序和企业帐户之间唯一受支持的连接。

截图如下：

![应用设置的广告帐户部分](../Images/0590f35e241ab0a0ee30e262a35e25a5.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-17T14:43:14.430

严格来说，我不是在回答你最后提出的关于灰色账户的具体问题，而是回答关于新世界中商业账户的更大的整体问题。

自从提出最初的问题以来，Facebook 推出了 Facebook Business Manager，它使企业能够在一个地方管理页面、广告帐户**和应用程序**。

[https://developers.facebook.com/docs/apps/business-manager](https://developers.facebook.com/docs/apps/business-manager)

您通过您的 Facebook 登录登录到业务经理，但它可以有一个与它相关联的业务电子邮件和名称等。管理员可以添加其他人并修改他们的权限，并将人们的业务身份和个人身份分开。

重要的是，如果您拥有多个应用程序并且它们通过业务经理与您的业务相关联，那么无论他们使用哪个应用程序，您都会为给定用户获得相同的用户 ID。如果你不这样做，你就不会这样做，因为用户 ID 通常是针对每个应用程序的。

因此，这个新世界带来了以下好处：a) 可以通过企业身份管理应用程序 b) 属于同一企业的应用程序可以报告相同的用户 ID，这使得跟踪和协调用户在多个你的应用程序。

# python - 如何应用到 tkinter 画布上的新数据

> ID：10805751
> 
> 赞同：0
> 
> 时间：2012-05-29T19:52:21.867
> 
> 标签：python, canvas, tkinter

我一直在使用 Tkinter 开发一个基于 Gui 的程序。它需要数据来显示，并且有很多不同的数据。我试图这样做，但它没有显示正确的结果。我的意思是，它不能显示其他数据集，它只显示第一个数据集。

简单来说，其流程如下：

1.  加载第一个数据
2.  在画布上显示
3.  加载另一个数据
4.  显示在画布上，但它显示第一个数据。

请给我一些提示、意见和帮助。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:48:35.570

为了节省时间并给出一个想法，我刚刚从一些代码中提取了这个，希望它可以帮助你......

```
class SubWindow:

    def change(self):
        self.s1Var.set("new1")

    def createWidgets(self, root):
        self.s1Var = StringVar(); self.s1Var.set("string1")

        self.s1Label = Label(root,textvariable=self.s1Var)
        self.s1Label.grid(row=0, column=5)

        self.changeButton = Button(root, text="Change", command=self.change)
        self.changeButton.grid(row=9, column=7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:02:37.850

假设您显示数据的代码是正确的，我可以得出的唯一结论是，要么您“加载另一个数据”函数实际上没有加载任何内容，要么您的“在画布上显示”代码没有被赋予新加载的数据。

另一种可能性是您的绘图代码中存在被忽略的错误。

# facebook - 使用 FQL 处理通配符

> ID：10805752
> 
> 赞同：1
> 
> 时间：2012-05-29T19:52:32.557
> 
> 标签：facebook, facebook-fql

我想使用通配符从 Facebook 用户表中获取数据。但是，我想当前的 FQL 不支持通配符，或者我遗漏了一些东西。

此外，它也会给 LIKE 一个错误。

目前，我正在执行它如下

SELECT uid, username,first_name,last_name FROM user WHERE first_name LIKE '%ab%' order by first_name LIMIT 0,20;

我试过 *, ?, _ 等。

尽管如此，我还是无法得到它。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:38:38.387

有一种方法可以做类似的事情，但即使那样你也不能从 api 提出这样的问题。

这是您的查询的“工作”版本：

```
SELECT uid, username, first_name, last_name
FROM user
WHERE strpos(lower(first_name), 'ab') >= 0
ORDER BY first_name
LIMIT 0,20 
```

这个查询的问题是它产生[了这个错误](http://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20uid%2C%20username%2Cfirst_name%2Clast_name%20FROM%20user%20WHERE%20strpos%28lower%28first_name%29%2C%20%27ab%27%29%20%3E%3D%200%20order%20by%20first_name%20LIMIT%200%2C20%3B)：

> 您的语句不可索引。WHERE 子句必须包含一个可索引的列。[这些列在从http://developers.facebook.com/docs/reference/fql](http://developers.facebook.com/docs/reference/fql)链接的表格中标有 *

您基本上没有办法询问所有用户，仅基于特定用户，例如这有效：

```
SELECT uid, username, first_name, last_name
FROM user
WHERE strpos(lower(first_name), 'ab') >= 0 AND uid IN ("user_id_1", "user_id_2", ...,"user_id_n")
ORDER BY first_name
LIMIT 0,20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:31:53.317

[FQL](http://developers.facebook.com/docs/reference/fql/)不支持 LIKE 运算符。您可以使用支持的 strpos 函数对支持的表索引执行部分字符串搜索，但是[user 表上的 name 字段都不是 indexable](http://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3DSELECT%20uid%2Cusername%2Cname%2Cfirst_name%2Clast_name%20FROM%20user%20WHERE%20strpos%28first_name%2C%20%27ab%27%29%20%3E%3D0)。

# java - Zxing:Activity 获取结果

> ID：10805754
> 
> 赞同：1
> 
> 时间：2012-05-29T19:52:37.500
> 
> 标签：java, android, android-intent, android-activity, zxing

我已经制作了自己的应用程序，带有菜单，并且在一项活动中我试图获得 qrcode 的结果。我需要得到 IntentResult 但如何？我在哪里得到 onActivityResult 工作？它有点混乱，这是通过意图。

如何实现将文本转换为字符串的函数？

真心感谢。RMC

活动：

```
public class Authentication extends Activity {

  TextView showResults;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    //Load file xml
    setContentView(R.layout.authentication);

    //To create start button
    Button scan = (Button) findViewById(R.id.btnStartAuth);
    scan.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View v) {         
        IntentIntegrator integrator = new IntentIntegrator(Authentication.this);
        integrator.initiateScan();
      }
    });

    //HERE I NEED TO GET THE VALUE OF THE QR CODE WITH MY ONACTIVITYRESULT 
    // BUT WHERE I GET THE
    //PROTOTYPE VALUES?
  } //end_of_onCreate

  // functions
  public void getResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
      if (resultCode == RESULT_OK) {
        String contents = intent.getStringExtra("SCAN_RESULT");
        String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
        EditText showResults = (EditText) findViewById(R.id.txtviewResultados);
        showResults.setText(contents);
      } else if (resultCode == RESULT_CANCELED) {
        // Every time I receive this code
        showResults.setText("Error reading: result null");
      }
    }
  } 
}//end_of_activity 
```

`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T22:10:13.383

您已经获得了条形码的文本：

```
 String contents = intent.getStringExtra("SCAN_RESULT"); 
```

如果您尝试使用`IntentIntegrator`, 和`IntentResult`，那么这些代码是什么？看起来你在复制他们所做的事情，但可能是错误的——不知道，因为我不知道你到底想做什么。

只需用于`IntentIntegrator`也*解析*结果。

# code-snippets - Sublime Text 2 的香草片段？

> ID：10805755
> 
> 赞同：1
> 
> 时间：2012-05-29T19:52:41.680
> 
> 标签：code-snippets, sublimetext, sublimetext2

我正在寻找 JavaScript 和 CSS 的简单片段。就像这样`function`，所以我可以通过函数名、参数和内容点击自动完成和制表符。我好像找不到这样的东西？为 jQuery 提供这个也很好。我见过一些 IDE，在您键入时会出现建议，以及有关您正在使用的方法的文档，例如它采用的参数。jQuery 或 JavaScript 有类似的东西吗？最后，CSS有什么不错的吗？我似乎找到的所有东西都只是提供了诸如`vh`for之类的快捷方式`visibility: hidden;`。这不是我想要的！我只是想让 Sublime**知道**我正在写的语言。

查看诸如 CSS 之类的默认包，其中**定义**了片段。例如，`margin-top`和的片段`margin-bottom`。但他们每个人的选项卡触发器`margin`。我只是希望能够在行中的某处写入`margin-top`或`margin-bottom`，按制表符并被带到该值（之后使用分号）。我不想要“捷径”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:11:38.150

您可以使用存储在“Packages\User”目录中的 Sublime Snippets 来执行此操作。

例如;

文件名

```
function.sublime-snippet 
```

内容

```
<snippet>
    <content>
    <![CDATA[

    ${1:private} function ${2:name}(${3:argument}) {
        ${4:content}
    }

    ]]>
    </content>
    <tabTrigger>function</tabTrigger>
    <description>Function</description>
    <scope>source.php</scope>
</snippet> 
```

我已将此添加到我的 GitHub 项目中，其中包括许多您可以使用的有用片段 - 只需将 GitHub 项目签出到“Packages\User”目录即可。

对于您的 margin-top 示例，您将设置这样的代码段；

```
<snippet>
    <content>
    <![CDATA[margin-top: $1;]]>
    </content>
    <tabTrigger>margin-top</tabTrigger>
    <description>Margin Top</description>
    <scope>source.css</scope>
</snippet> 
```

我觉得非常有用的是 jQuery CDN 片段，它为您提供了一个非常快速的 jQuery、jQuery UI 和 jQuery UI CSS 设置，并具有完整的后备功能。

随意贡献我的片段： [https ://github.com/olimortimer/sublime-snippets](https://github.com/olimortimer/sublime-snippets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:53:01.300

我在[GitHub 上](https://github.com/agibsonsw/AndySublime)有 CSS、JavaScript 和 jQuery 的补全。

我从 Packages/CSS 文件夹中删除了所有现有的 CSS 片段，因为我发现它们妨碍了它们。

我的包含许多功能。例如，为颜色输入“b”（在 CSS 中）会产生“蓝色”，但“bl”会产生“黑色”。并且在 HTML 中为 'alert()' 触发 'aler' 会在 'window.' 之前添加。（如果还没有附加变量）。

我还调整了自动完成延迟，这样完成就不会出现得太快。

对于 jQuery 补全，您将需要一个 jQuery 语法 (tmLanguage) 文件。或者，修改我的文件以使用范围“source.js”，以便它们出现在任何“.js”文件中。

（CodeIntel 包已过时且未维护。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T01:23:00.060

试试 SublimeCodeIntel 包：

[https://github.com/Kronuz/SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)

JavaScript 和 CSS 都包括在内。

# c# - Windows服务器的网络驱动器上的文件锁定是否可靠？

> ID：10805756
> 
> 赞同：0
> 
> 时间：2012-05-29T19:52:43.453
> 
> 标签：c#, windows, network-programming

我有一个 C# .NET 应用程序和一个托管在网络共享（可能是 windows server 2003）上的 sqlite 数据库文件。

问题是 sqlite 的常见问题解答说文件锁定可能是[不可靠](http://www.sqlite.org/faq.html#q5)的。

所以我的问题是它是否仅在 nfs 共享（[参见此讨论](https://stackoverflow.com/questions/1255219/reliability-of-file-locking-on-network-files)）上不可靠，或者在 Windows Server 2003 使用的 SMB/CIFS 共享上不可靠？

如果它在 SMB/CIFS 共享上也不可靠，我有以下两种解决方法：

使用临时文件进行锁定：

```
try
{
    using (FileStream fs = File.Create("lock.tmp", 1000,
           FileOptions.DeleteOnClose))
    {
        db.savechanges();
    }
}
catch(Exception ex) { /* retry later */ } 
```

使用临时目录创建进行锁定：

```
[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool CreateDirectory(string lpPathName,
                                          IntPtr lpSecurityAttributes);

if(CreateDirectory("lock.tmp", IntPtr.Zero))
{
    db.savechanges();
    Directory.Delete("lock.tmp");

} else { /* retry later */ } 
```

# php - 使用 PHP 回显的 IP 地理编码

> ID：10805757
> 
> 赞同：2
> 
> 时间：2012-05-29T19:53:00.187
> 
> 标签：php, forms, input, ip, geocode

我正在尝试以表单输入值显示用户国家/地区（基于他们的 IP）。

到目前为止，这是我的代码..

```
<input style="display:block" type="text" name="country" id="country" value="<?php               
$pageContent = file_get_contents('http://freegeoip.net/json/echo $_SERVER['REMOTE_ADDR']');
$parsedJson  = json_decode($pageContent);
echo $parsedJson->country_name; ?>" /> 
```

我正在使用 PHP JSON-decode 从“http://freegeoip.net/json/(IP ADDRESS)”获取数据。

该网站对 IP 地址进行地理编码并返回国家名称。

我想要做的是能够将用户 IP 地址替换为该网址，然后返回用户的国家/地区名称。我能想到的最好方法是使用

```
<?php echo $_SERVER['REMOTE_ADDR']; ?> 
```

但是当我把它放进去时，我得到了一个服务器错误。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T19:54:44.343

```
$pageContent = file_get_contents('http://freegeoip.net/json/' . $_SERVER['REMOTE_ADDR']); 
```

您不能`echo`在函数内使用。相反，您应该使用[连接运算符](http://php.net/manual/en/language.operators.string.php)。

此外，更好的代码应该是这样的：

```
<?php               
$pageContent = file_get_contents('http://freegeoip.net/json/' . $_SERVER['REMOTE_ADDR']);
$parsedJson  = json_decode($pageContent);
?>
<input style="display:block" type="text" name="country" id="country" value="<?php echo htmlspecialchars($parsedJson->country_name); ?>" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:55:03.003

```
$pageContent = file_get_contents('http://freegeoip.net/json/' . $_SERVER['REMOTE_ADDR']); 
```

无需回显到字符串参数...只需与`.`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-30T09:33:20.617

我`GeoIP`最近在一些项目中一直需要这些服务。我创建了一个 ** `PHP wrapper`**，以防其他人为此寻找`PHP`帮助。

可以在[https://github.com/DaanDeSmedt/FreeGeoIp-PHP-Wrapper找到](https://github.com/DaanDeSmedt/FreeGeoIp-PHP-Wrapper)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-19T10:32:48.797

由于 Freegeoip 将成为一项付费服务​​ ( [https://ipstack.com/](https://ipstack.com/) )，如果您想要一个免费的简单服务，您可以使用 ip-api.com 而不是 freegeoip.net ：

```
function getDataOfIp($ip) {
    try {
        $pageContent = file_get_contents('http://ip-api.com/json/' . $ip);
        $parsedJson  = json_decode($pageContent);
        return [
            "country_name" => $parsedJson->country,
            "country_code" => $parsedJson->countryCode,
            "time_zone" => $parsedJson->timezone
        ];
    } 
    catch (Exception $e) {
        return null;
    }
} 
```

您应该根据需要的数据调整返回值。

# dojo - parser.parse() 无法在 IE9 容器中解析 (dojo 1.7.2)

> ID：10805761
> 
> 赞同：0
> 
> 时间：2012-05-29T19:53:15.190
> 
> 标签：dojo

我有以下代码，我尝试手动解析，因为我按照这个示例创建了一个预加载器（http://acuriousanimal.com/blog/2010/12/05/how-to-create-a-preloader-in-dojo /):

```
<div id="appLayout" class="demoLayout" data-dojo-type="dijit.layout.BorderContainer"
         data-dojo-props="design: 'headline', style: 'width: 100%; height:100%'">
        <div id="contentTabs" class="centerPanel" data-dojo-type="dijit.layout.TabContainer"
             data-dojo-props="region: 'center', tabPosition: 'top', style: 'width: 100%; height:100%'">
            <div data-dojo-type="dijit.layout.BorderContainer" id="inbox" title="Inbox" data-dojo-props="design: 'headline', style: 'width: 100%, height:100%'">
                <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'left', splitter: true"
                    style="width: 50%; height:100%;">
                    <div id="grid">
                    </div>
                </div>

                <div id="emailcontainer" class="demoLayout" data-dojo-type="dijit.layout.BorderContainer"
                    data-dojo-props="design: 'headline', region: 'center', style: 'width: 100%; height:100%'">
                    <div id="emailUserAccounts" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'top', style: 'width: 50%; height:14px'">
                        User Reports
                    </div>
                    <div id="emailbody" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'center', style: 'width: 50%;'">
                        Select an E-Mail from the Inbox
                    </div>
                </div>

            </div>
        </div>

        <div id="toolbar" class="edgePanel" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'top'"
            style="text-align: right;">

                <input id="searchtext" type='text' size='50' style="height: 30px;" />

                <button id="searchbtn" type="button" style="width: 120px">
                    Search</button> 
                        <button id="invertbtn" type="submit" style="width: 120px">
                            Invert Status</button>
            <div id="supportstaffselect">
            </div>

                <button id="assignbtn" type="button" style="width: 120px">
                    Assign</button>
            <select id="priorityselect" data-dojo-type="dijit.form.Select" name="priorityselect">
                <option value="0">Low</option>
                <option value="1" selected="selected">Normal</option>
                <option value="2">Medium</option>
                <option value="3">High</option>
                <option value="4">+1</option>
            </select>

                <button id="prioritybtn" type="button" style="width: 120px">
                    Change Priority</button> 
                        <button id="newMessage" type="button" style="width: 120px">
                            New Message</button> 
                                <button id="replybtn" type="button" style="width: 120px">
                                    Reply</button> 
                                        <button id="replyallbtn" type="button" style="width: 120px">
                                            Reply All</button> 
                                                <button id="forwardbtn" type="button" style="width: 120px">
                                                    Forward</button>
        </div>
        <div id="filtersnavigation" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'left'" style="width: 130px;">
            <ul class="filterlist">
                <li class="filterlistitem" id="everythingfilter">Everything</li>
                <li class="filterlistitem" id="openfilterid">Open</li>
                <li class="filterlistitem" id="closedfilterid">Closed</li>
                <li class="filterlistitem" id="unrepliedfilterid">Unreplied</li>
                <li class="filterlistitem" id="repliedfilterid">Replied</li>
                <li class="filterlistitem" id="minefilterid">Mine</li>
                <li class="filterlistitem" id="mineunrepliedfilterid">Mine
                    Unreplied</li>
            </ul>         
        </div>               
    </div> 
```

此代码在 Firefox 和 Chrome 中正确解析和加载，没有问题或错误，但 parser.js 在尝试通过在脚本 parser.parse() 中调用来解析 BorderContainer 或 TabContainer 时在 IE9 中引发任意错误，例如

控制台日志：“无法加载类 dijit.layout.BorderContainer”

IE9 指向的错误位于 parser.js (dojo-release-1.7.2-src) 的第 132 行：

```
darray.forEach(nodes, function(obj){
                        if(!obj){ return; }

                        var node = obj.node || obj,
                                type = dojoType in mixin ? mixin[dojoType] : obj.node ? obj.type : (node.getAttribute(dataDojoType) || node.getAttribute(dojoType)),
                                ctor = _ctorMap[type] || (_ctorMap[type] = dlang.getObject(type)),
                                proto = ctor && ctor.prototype;
                        if(!ctor){
        Line 132  ---> throw new Error("Could not load class '" + type);
                        } 
```

如果您考虑到即使在 IE9 中当我有 parseOnLoad: true 时上述代码也能完美运行，是否有人知道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:50:24.617

有 99% 的把握，错误是由于`dlang.getObject(type)`返回一个空指针。我的猜测是 AMD 加载程序（可能设置为 async:true） - 尚未完成错误中提到的模块的下载和声明。为了克服这个问题，您必须适应引入需求的 AMD 模式 - 并在它们准备好后运行（即每个必需的模块）。尝试包装你的 parser.parse() 如下：

```
<script src="path_to_dj/dojo/dojo.js"></script>
<!-- dojo must be loaded first - obviously -->
<script type="text/javascript">

  require(
    {/*using defaults*/},         /* local conf */ 
    [                             /* every single requirement, mapped to cb params below */
      "dijit/layout/BorderContainer",
      "dijit/layout/TabContainer"
      // optionally uncomment below line to have callback wait domReady event
      //, "dojo/domReady!"
    ],
    function(dep1, dep2, dep3) {  /* callback for XHR.readyState=4/SCRIPT.onload */

          parser.parse(dojo.body());

    }
  );

</script> 
```

# delphi - Delphi 是否在构造对象之前分配变量？

> ID：10805769
> 
> 赞同：5
> 
> 时间：2012-05-29T19:53:41.250
> 
> 标签：delphi, lazy-loading, delphi-5

Delphi 是否在对象完全构造之前分配实例变量？

换句话说，给定一个变量：

```
var
   customer: TCustomer = nil; 
```

然后我们构造一个客户并将其分配给变量：

```
customer := TCustomer.Create; 
```

有没有可能`customer`不能`nil`，但不能指向一个完全构造的`TCustomer`？

* * *

这在执行延迟初始化时会出现问题：

```
function SacrifialCustomer: TCustomer;
begin
   if (customer = nil) then
   begin
      criticalSection.Enter;
      try
         customer := TCustomer.Create;
      finally 
         criticalSection.Leave;
      end;
   end;
   Result := customer;
end; 
```

该错误在该行中：

```
if (customer = nil) 
```

另一个线程可能会调用：

```
customer := TCustomer.Create; 
```

[并且变量在构造发生之前被赋值](http://en.wikipedia.org/wiki/Double-checked_locking)。这导致线程仅仅因为分配了变量就*假定*它是一个有效的对象。`customer`

Delphi(5)中会出现这种多线程单例的bug吗？

* * *

**奖金问题**

Delphi是否有一种公认的、线程安全的、[一次性的初始化](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363808%28v=vs.85%29.aspx)设计模式？许多人在 Delphi 中通过覆盖和实现*单例*；他们的实现将在多个线程中失败。`NewInstance``FreeInstance`

严格来说，我不是在回答如何实现和*单例*，而是在*惰性初始化*。虽然**单例**可以*使用*延迟初始化，但**延迟初始化**并不限于单例。

**更新**

两个人提出了一个[包含常见错误的答案。损坏的*双重检查锁定算法*转换为 Delphi](http://en.wikipedia.org/wiki/Double-checked_locking#Usage_in_Java)：

```
// Broken multithreaded version
// "Double-Checked Locking" idiom
if (customer = nil) then
begin
   criticalSection.Enter;
   try
      if (customer = nil) then
         customer := TCustomer.Create;
   finally
      criticalSection.Leave;
   end;
end;
Result := customer; 
```

来自[维基百科](http://en.wikipedia.org/wiki/Double-checked_locking#Usage_in_Java)：

> 直观地说，这个算法似乎是解决问题的有效方法。然而，这种技术有许多微妙的问题，通常应该避免。

* * *

另一个错误的建议：

```
function SacrificialCustomer: TCustomer;
var
  tempCustomer: TCustomer;
begin
   tempCustomer = customer;
   if (tempCustomer = nil) then
   begin
      criticalSection.Enter;
      try
         if (customer = nil) then
         begin
            tempCustomer := TCustomer.Create;
            customer := tempCustomer;
         end;
      finally
         criticalSection.Leave;
      end;
   end;
   Result := customer;
end; 
```

**更新**

我创建了一些代码并查看了 cpu 窗口。看来这个编译器，我的优化设置，在这个版本的 Windows 上，用这个对象，首先构造对象，*然后*分配变量：

```
customer := TCustomer.Create;
       mov dl,$01
       mov eax,[$0059d704]
       call TCustomer.Create
       mov [customer],eax;
Result := customer;
       mov eax,[customer]; 
```

当然，我不能说保证总是这样工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T08:27:26.840

我对你的问题的解读是你在问这个：

> 我如何使用针对 x86 硬件的 Delphi 5 实现单例的线程安全延迟初始化。

据我所知，您有三个选择。

**1.使用锁**

```
function GetCustomer: TCustomer;
begin
  Lock.Acquire;
  try
    if not Assigned(Customer) then // Customer is a global variable
      Customer := TCustomer.Create;
    Result := Customer;
  finally 
    Lock.Release;
  end;
end; 
```

这样做的缺点是，如果存在争用，`GetCustomer`那么锁的序列化将抑制缩放。我怀疑人们对这一点的担心超出了必要的程度。例如，如果您有一个执行大量工作的线程，该线程可以获取对单例的引用的本地副本以减少争用。

```
procedure ThreadProc;
var
  MyCustomer: TCustomer;
begin
  MyCustomer := GetCustomer;
  // do lots of work with MyCustomer
end; 
```

**2.双重检查锁定**

这是一种允许您在创建单例后避免锁争用的技术。

```
function GetCustomer: TCustomer;
begin
  if Assigned(Customer) then
  begin
    Result := Customer;
    exit;
  end;

  Lock.Acquire;
  try
    if not Assigned(Customer) then
      Customer := TCustomer.Create;
    Result := Customer;
  finally 
    Lock.Release;
  end;
end; 
```

双重检查锁定是一种历史悠久的技术。最著名的讨论是[“双重检查锁定被破坏”声明](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)。这主要是在 Java 的上下文中设置的，所描述的问题不适用于您的情况（Delphi 编译器，x86 硬件）。事实上，对于 Java，随着 JDK5 的出现，我们现在可以说双重检查锁定是固定的。

Delphi 编译器不会根据对象的构造重新排序对单例变量的写入。更重要的是，强大的 x86 内存模型意味着处理器重新排序不会破坏这一点。请参阅[谁在 x86 上订购了内存栅栏？](http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/)

简单地说，Delphi x86 上没有破坏双重检查锁定。更重要的是，x64 内存模型也很强大，双重检查锁定也没有被破坏。

**3.比较和交换**

如果您不介意创建单例类的多个实例，然后丢弃除一个之外的所有实例，则可以使用比较和交换。VCL 的最新版本利用了这种技术。它看起来像这样：

```
function GetCustomer;
var
  LCustomer: TCustomer;
begin
  if not Assigned(Customer) then 
  begin
    LCustomer := TCustomer.Create;
    if InterlockedCompareExchangePointer(Pointer(Customer), LCustomer, nil) <> nil then
      LCustomer.Free;
  end;
  Result := Customer;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T20:12:56.573

即使分配是在构建之后进行的，您仍然会遇到同样的问题。如果两个线程几乎同时命中 SacrifialCustomer，则两个线程都可以`if (customer = nil)`在其中一个进入临界区之前执行测试。

该问题的一种解决方案是双重检查锁定（进入关键部分后再次测试）。使用 Delphi，这适用于某些平台，但不能保证适用于所有平台。其他解决方案使用静态构造，它适用于许多语言（不确定 Delphi），因为静态初始化仅在引用类时发生，因此它实际上是惰性的，并且静态初始化器本质上是线程安全的。另一个是使用联锁交换，它将测试和赋值组合成一个原子操作（对于 Delphi 示例，请参见此处的第二个答案：[How should "Double-Checked Locking" be implemented in Delphi？](https://stackoverflow.com/questions/4475080/how-should-double-checked-locking-be-implemented-in-delphi)）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-29T22:49:30.240

不，Delphi 在构造函数返回之前不会为目标变量赋值。Delphi 的大部分库都*依赖*于这一事实。（对象的字段被初始化为 nil；对象的构造函数中未处理的异常会触发其析构函数，预计会调用`Free`构造函数分配的所有对象字段。如果这些字段具有非 nil 值，则会发生进一步的异常。 )

我选择不解决额外问题，因为它与主要问题无关，而且因为它是一个比事后思考更合适的话题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T08:41:26.283

解决您的问题的另一个解决方案是使用`customer`指针作为防止创建多个对象的原子锁变量。有关您的更多信息，请参阅[Busy-Wait Initialization](http://www.thedelphigeek.com/2011/12/busy-wait-initialization.html) 另请阅读：[On Optimistic and Pessimistic Initialization](http://www.thedelphigeek.com/2011/12/on-optimistic-and-pessimistic.html)

# ios - 根据索引从数组中删除对象

> ID：10805770
> 
> 赞同：0
> 
> 时间：2012-05-29T19:53:43.127
> 
> 标签：ios, uitableview, nsmutablearray, plist, nsindexpath

嗨，我有一个带有 IBAction 的 viewController，可以将字符串添加到 Plist NSMutableArray。

然后将这个 Plist 读入另一个 viewController，它是一个 tableView。Plist 数组中的此字符串使用字符串“1”（不带引号）填充自定义单元格中的文本字段。这基本上是一个购物篮系统，在这种情况下，用户将产品添加到购物篮中，将 1 字符串添加到填充 qty 文本字段的 qty 数组。这些 qty 文本字段被动态添加到购物篮视图中，因此在很多情况下，我会有很多行包含其中包含字符串“1”的文本字段。

现在我遇到的问题是，当按下将产品添加到购物篮的按钮时，我在 alertView 上有另一个按钮可以从 plist 中删除产品。问题是我像这样添加字符串

```
NSString *string = @"1";

    [enteredQty2 addObject:string];
    NSArray *paths4 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory4 = [paths4 objectAtIndex:0];
    NSString *path4 = [documentsDirectory4 stringByAppendingPathComponent:@"qty.plist"];
    [enteredQty2 writeToFile:path4 atomically:YES]; 
```

并像这样删除字符串

```
NSString *string = @"1";

    [enteredQty2 removeObject:string];
    NSArray *paths4 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory4 = [paths4 objectAtIndex:0];
    NSString *path4 = [documentsDirectory4 stringByAppendingPathComponent:@"qty.plist"];
    [enteredQty2 writeToFile:path4 atomically:YES]; 
```

我遇到的问题是，如果我将几个项目添加到篮子中，它们最初的数量字符串都是“1”。那么当我删除对象时会发生什么，它会从所有 qtyTextFields 中删除“1”，而不仅仅是所选的相关产品。当然，QtyTextFields 会根据用户想要的数量而变化，因此从数组中删除“1”，假设数量“12”将无效。

我不确定最好的方法是什么，当我添加它并使用选定标签删除项目时，我应该以某种方式标记字符串“1”。当然，这些标签必须是动态的和唯一的？

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:34:32.537

Your array should probably contain `NSDictionary` objects instead of `NSString`. Perhaps something like below?

```
NSDictionary *item = [NSDictionary dictionaryWithObjectsAndKeys:
                                            [NSNumber numberWithInt:1], @"quantity",
                                            @"yourUniqueProductId", @"id",
                                            @"My Cool Product", @"title", nil]; 
```

Then you could add that item to the array:

```
[enteredQty2 addObject:item]; 
```

To delete an item, you could loop through the array:

```
for (NSDictionary *item in enteredQty2) {
        if ([[item objectForKey:@"id"] isEqualToString:@"yourUniqueProductId"]) {
                [enteredQty2 removeObject:item];
                break;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:36:22.863

好吧，您遇到了一个问题，即 NSString 缓存了非常短的相同字符串，并且即使您创建了两次也会返回相同的对象。然后，当您调用 removeObject 时，它会找到同一对象的多个副本，因此将它们全部删除。

这应该适合你：

```
// Returns the lowest index whose corresponding array value is equal to a given object
NSInteger index = [enteredQty2 indexOfObject:string];

// delete the object at index
if (index != NSNotFound) {
    [enteredQty2 removeObjectAtIndex:index];
} 
```

# dotnetopenauth - 在单声道下运行 DotNetOpenAuth 时来自 Logger.Create 的 TypeLoadException

> ID：10805773
> 
> 赞同：0
> 
> 时间：2012-05-29T19:53:50.583
> 
> 标签：dotnetopenauth

我正在关注[有关 DotNetOpenAuth 的简单教程](http://www.dotnetopenauth.net/developers/help/programmatic-openid-relying-party/)。当我在我的 localhost Visual Studio 开发机器上运行它时，它工作正常。

但是，一旦我将它移动到运行单声道的测试/登台服务器，它就会引发以下错误：

> 位置：Page_Load

```
 An exception was thrown by the type initializer for DotNetOpenAuth.Reporting
InnerException: System.TypeInitializationException: An exception was thrown by the type initializer for DotNetOpenAuth.Logger ---> System.TypeLoadException: A type                             load exception has occurred.
  at DotNetOpenAuth.Logger.Create (System.String name) [0x00000] in <filename unknown>:0
  at DotNetOpenAuth.Logger.CreateWithBanner (System.String name) [0x00000] in <filename unknown>:0
  at DotNetOpenAuth.Logger..cctor () [0x00000] in <filename unknown>:0
  --- End of inner exception stack trace ---
  at DotNetOpenAuth.Reporting.Initialize () [0x00000] in <filename unknown>:0
  at DotNetOpenAuth.Reporting.set_Enabled (Boolean value) [0x00000] in <filename unknown>:0
  at DotNetOpenAuth.Reporting..cctor () [0x00000] in <filename unknown>:0
StackTrace:   at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor (ICryptoKeyStore cryptoKeyStore, INonceStore nonceStore) [0x00000] in <filename unknow                            n>:0
  at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor (IOpenIdApplicationStore applicationStore) [0x00000] in <filename unknown>:0
  at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor () [0x00000] in <filename unknown>:0
  at MyApp.Login_Google.Page_Load (System.Object sender, System.EventArgs e) [0x00000] in <filename unknown>:0 
```

我的页面加载代码如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{

    OpenIdRelyingParty openid = new OpenIdRelyingParty();
    var response = openid.GetResponse();
    if (response != null)
    {
        switch (response.Status)
        {
            case AuthenticationStatus.Authenticated:

                // This is where you would look for any OpenID extension responses included
                // in the authentication assertion.
                var claimsResponse = response.GetExtension<ClaimsResponse>();

                //Database.ProfileFields = claimsResponse;

                //// Store off the "friendly" username to display -- NOT for username lookup
                //Database.FriendlyLoginName = response.FriendlyIdentifierForDisplay;

                // Use FormsAuthentication to tell ASP.NET that the user is now logged in,
                // with the OpenID Claimed Identifier as their username.
                //FormsAuthentication.RedirectFromLoginPage(response.ClaimedIdentifier, false);

                break;
            case AuthenticationStatus.Canceled:
                //this.loginCanceledLabel.Visible = true;
                break;
            case AuthenticationStatus.Failed:
                //this.loginFailedLabel.Visible = true;
                break;
        }
    }

} 
```

这是导致错误的行：

```
OpenIdRelyingParty openid = new OpenIdRelyingParty(); 
```

单声道版本：

```
Mono JIT compiler version 2.10.5 (Debian 2.10.5-1)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  x86
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:50:05.577

我通过简单地将 log4net DLL 添加到项目目录中解决了这个问题，一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:41:19.243

看起来单声道加载程序集的方式有所不同，抛出的异常与微软的 CLR 不同。我已经提交了[issue #151](https://github.com/AArnott/dotnetopenid/issues/151)来跟踪它。

同时，请尝试下载[这个补丁版本](http://sdrv.ms/KYDLkh)，它是 v4.0.3，并建议修复这个错误，看看它是否适合你。

这假设否则，正常构建在单声道上工作。

# javascript - 变量中的 Jquery AJAX 响应 JSON。

> ID：10805775
> 
> 赞同：2
> 
> 时间：2012-05-29T19:54:06.107
> 
> 标签：javascript, jquery, ajax, json

我有两个功能。第一个设置一个变量，然后第二个获取第一个函数所需的信息。我首先遇到的问题是，在 ajax 响应发生之前，所有内容都已返回。基本上我需要做的是获取一个 JSON 对象并将其设置为一个变量，然后使用该对象的某些方面并将它们附加到项目中。这就是我所拥有的...

```
$(document).ready(function(){

                $('#youtube-url').blur(function() {

                 $info = youtubeInfo($('#youtube-url').val());

                 console.log($info);
                 if($info.html){
                    //alert($info.thumbnail_url);
                    //$('#preview_video_thumb').attr('src', $info.thumbnail_url);
                 }

                });

            });
            function youtubeInfo(url){
                var odata = '';
                var result = jQuery.ajax({
                          url: '<? echo base_url("videos/getOembed") ?>',
                          type: 'POST',
                          dataType: 'json',
                          async: false,
                          data: {url: url},
                          complete: function(xhr, textStatus) {

                          },
                          success: function(data, textStatus, xhr) {
                           return data;
                          },
                          error: function(xhr, textStatus, errorThrown) {
                            //called when there is an error
                          }
                        }).responseText;
                return result;

            }; 
```

如果我从成功回调中返回“数据”对象，它将返回空白。如果我这样做，AJAX 调用的 responseText 是一个字符串而不是 JSON。有任何想法吗？我基本上需要将第一个函数中的 $info 变量设置为第二个函数的 AJAX 响应（JSON）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:01:04.733

删除`.responseText`并使用它：

```
$('#youtube-url').blur(function() {
    youtubeInfo($('#youtube-url').val()).done(function($info){
        if($info.html){
            //alert($info.thumbnail_url);
            //$('#preview_video_thumb').attr('src', $info.thumbnail_url);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:02:34.463

您在成功函数中的`return data`声明没有按照您的意图进行。它实际上并不是从 ajax 调用中返回，而是从成功函数中返回。你可能想要的是这样的东西：

```
function youtubeInfo(url){
            var odata = '';
            var result = jQuery.ajax({
                      url: '<? echo base_url("videos/getOembed") ?>',
                      type: 'POST',
                      dataType: 'json',
                      async: false,
                      data: {url: url},
                      complete: function(xhr, textStatus) {

                      },
                      success: function(data, textStatus, xhr) {
                       odata = data;
                      },
                      error: function(xhr, textStatus, errorThrown) {
                        //called when there is an error
                      }
                    });
            return odata;

        }; 
```

# c# - _x00D_ 使用 EPPlus 库在 Excel 中显示？

> ID：10805776
> 
> 赞同：1
> 
> 时间：2012-05-29T19:54:07.437
> 
> 标签：c#, asp.net, vb.net, epplus

我正在使用 EPPlus 3.0（codeplex 最新库）库来下载 excel 文件。一切工作正常，但有些列**`"_x00D_"`**在数据上显示字符串。我在谷歌研究，每个人都说它是换行符。我尝试了所有场景仍然无法正常工作。

请给我建议。

```
 Using pck As New ExcelPackage()
                    'Create the worksheets
   Dim wsAll As ExcelWorksheet = pck.Workbook.Worksheets.Add("All")
   Dim wsManufacturing As ExcelWorksheet = pck.Workbook.Worksheets.Add("Manufacturing")
   Dim wsHealthcare As ExcelWorksheet = pck.Workbook.Worksheets.Add("Healthcare")
   Dim wsManagement As ExcelWorksheet = pck.Workbook.Worksheets.Add("Management")
   Dim wsSelling As ExcelWorksheet = pck.Workbook.Worksheets.Add("Selling")

   'Load the datatable into the sheet, starting from cell A1\. Print the column names on row 1
   wsAll.Cells("A1").LoadFromDataTable(dtAllDownload, True)
   If dtManufacturing.Rows.Count > 0 Then
     wsManufacturing.Cells("A1").LoadFromDataTable(dtManufacturing, True)
   End If
   If dtChinaHealthcare.Rows.Count > 0 Then
     wsHealthcare.Cells("A1").LoadFromDataTable(dtHealthcare, True)
   End If
   If dtChinaManagement.Rows.Count > 0 Then
       wsManagement.Cells("A1").LoadFromDataTable(dtManagement, True)
   End If
   If dtSelling.Rows.Count > 0 Then
      wsSelling.Cells("A1").LoadFromDataTable(dtSelling, True)
   End If

   Dim filename As String = "FullExtract_" & Now.Year.ToString & Now.Month.ToString & Now.Day.ToString & ".xlsx"
    Dim fileBytes As [Byte]() = pck.GetAsByteArray()
    HttpContext.Current.Response.Clear()
    HttpContext.Current.Response.ClearContent()
    HttpContext.Current.Response.ClearHeaders()
    HttpContext.Current.Response.Cookies.Clear()
    HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.[Private])
    HttpContext.Current.Response.CacheControl = "private"
    HttpContext.Current.Response.Charset = System.Text.UTF8Encoding.UTF8.WebName
    HttpContext.Current.Response.ContentEncoding = System.Text.UTF8Encoding.UTF8
    HttpContext.Current.Response.AppendHeader("Content-Length", fileBytes.Length.ToString())
    HttpContext.Current.Response.AppendHeader("Pragma", "cache")
    HttpContext.Current.Response.AppendHeader("Expires", "60")
    HttpContext.Current.Response.AddHeader("content-disposition", "attachment;  filename=" & filename)
    HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
    HttpContext.Current.Response.BinaryWrite(fileBytes)
    HttpContext.Current.Response.[End]() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:37:47.200

我假设这个字符串来自 DataTable，你可以用这个方法替换它：

```
public static void Replace_x00D_(DataTable data)
{
  List<DataColumn> stringColumns = new List<DataColumn>();
  foreach (DataColumn dc in data.Columns)
  {
    if (dc.DataType == typeof(string))
      stringColumns.Add(dc);
  }

  foreach (DataRow rw in data.Rows)
  {
    foreach (DataColumn dc in stringColumns)
      rw.Field<string>(dc).Replace("_x00D_", "");
  }
} 
```

# mongodb - 如何使用非默认 dbpath 将 mongo db 作为服务运行？

> ID：10805782
> 
> 赞同：8
> 
> 时间：2012-05-29T19:54:24.957
> 
> 标签：mongodb, ubuntu

当我尝试启动服务时，我得到

```
~$ sudo service mongodb start
mongodb start/running, process 20221 
```

但它并没有真正启动 ~$ sudo service mongodb status mongodb stop/waiting

这可能是因为我的 dbpath 不是默认的，所以如何使用非默认的 dbpath 启动服务

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:48:40.770

这实际上与“服务”没有任何关系，它取决于（MongoDB的`mongod`进程名称）参数是否可以使用`dbpath``/data/db`

要找出可用的参数，您可以简单地运行...

`$ mongod --help`

你会得到一个*有用*的参数列表，还有大量的文档解释你在启动 mongod 时可以使用的各种不同的参数......

[http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo](http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo)

[http://www.mongodb.org/display/DOCS/Command+Line+Parameters](http://www.mongodb.org/display/DOCS/Command+Line+Parameters)

关于您的问题的文档中的一些内容...

> ## 开始 mongod
> 
> 默认数据目录，默认端口 要以默认模式启动 Mongo，其中数据将存储在 /data/db 目录（或 Windows 上的 c:\data\db ）中，并侦听端口 27017，只需键入
> 
> `$ ./mongod`
> 
> **备用数据目录，默认端口**
> 
> 要指定 Mongo 存储文件的目录，请使用 --dbpath 选项：
> 
> `$ ./mongod --dbpath /var/lib/mongodb/`
> 
> 请注意，您必须提前创建目录并适当地设置其权限——如果目录不存在，Mongo 将不会创建该目录。
> 
> **备用端口**
> 
> 您可以使用 --port 选项为 Mongo 指定不同的端口来侦听来自客户端的连接
> 
> `$ ./mongod --port 12345`
> 
> 如果您想在一台机器上运行多个 Mongo 实例（例如，用于运行主从对），这将非常有用。
> 
> **作为守护进程运行**
> 
> 注意：这些选项仅在 MongoDB 1.1 及更高版本中可用。
> 
> 这将分叉 Mongo 服务器并将其输出重定向到日志文件。与 --dbpath 一样，您必须自己创建日志路径，Mongo 不会为您创建父目录。
> 
> `$ ./mongod --fork --logpath /var/log/mongodb.log --logappend`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-22T12:06:49.637

您可以使用配置文件指定它。

我在这里找到了解释：http: [//blog.ajduke.in/2013/04/10/install-setup-and-start-mongodb-on-windows/](http://blog.ajduke.in/2013/04/10/install-setup-and-start-mongodb-on-windows/)

> # 使用配置文件
> 
> 除了指定命令行选项，我们可以指定使用文件，我在这里称之为配置文件配置文件只是普通文件，包含键=值形式的参数，每个参数都在文件的每一行中对此，我们基本上提供文件路径（包含配置）作为命令行选项，如“-f”或“–config” 以下是配置文件的片段

```
shell > mongod --config I:\Servers\mongodb\config\mongodb.conf 
```

你会得到一个文件，你可以在其中指定 dbpath ：

> #这是 MongoDB 的示例配置文件
> #basic
> dbpath = I:\Servers\mongodb\data
> port = 27017
> logpath = I:\Servers\mongodb\logs\mongo.log

# python - Python 是计算机视觉的好选择吗？

> ID：10805788
> 
> 赞同：-1
> 
> 时间：2012-05-29T19:54:53.503
> 
> 标签：python, opencv, computer-vision

我即将开始一个计算机视觉项目，它将处理图像分割的事情，我正在寻找一个好的编程开发环境。

是否有任何强烈建议的计算机视觉编程语言？

我的选择是 Python 和 openCV 库，但我不确定这是否是一个好的选择：python 很慢，而且看起来它不适合计算机视觉（很少有库和支持）。

我喜欢这种语言，但我个人觉得它不适合这个目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:03:12.860

C++ 用于多个生产计算机视觉系统。像 OpenCV 这样的优秀库，性能出色，易于投入生产环境。如果你需要进行机器学习，那里有很多库（LibSVM / SVMlight、Torch）。如果您必须求助于“循环所有像素”代码，它将表现良好。

MATLAB 也是一个想法，但考虑到 C++ 的性能优势......以及 MATLAB 语法对于大多数久经考验的 C/Java 来说非常陌生——“学过”的程序员，它可能不是一个好的选择.

# ipad - 使用具有导航控制器问题的情节提要从 MasterDetail iPad 应用程序更改详细信息视图

> ID：10805791
> 
> 赞同：0
> 
> 时间：2012-05-29T19:55:10.257
> 
> 标签：ipad, uinavigationcontroller, storyboard, master-detail

答案在

[使用情节提要从 MasterDetail iPad 应用程序更改详细信息视图](https://stackoverflow.com/questions/9352514/change-detail-view-from-masterdetail-ipad-app-using-storyboard)

似乎是我正在寻找的东西，除了我无法理解和配置从 XCode 中的 iPad Master-Detail 模板生成的其他导航控制器。

初始控制器是一个拆分视图，然后包含两个导航控制器，每个控制器分别用于其包含的主视图控制器和详细视图控制器。仍然在这里经历学习曲线，但我的阅读理解是一个导航控制器控制主视图和任何下推的详细视图。

按照前面问题中的说明，我可以从我的第二个静态表视图单元格中拖动与替换序列连接的第二个细节视图控制器，但我不能（也不知道我是否应该）也将它与导航控制器。如果我选择这个新的视图控制器和嵌入/导航控制器，那么另一个导航控制器会从拆分视图生成到新的视图控制器（并且它在运行时不起作用）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:20:32.340

您需要将**原始**详细视图控制器嵌入到导航控制器中。

不要对导航控制器感到困惑。A`UINavigationController`是视图控制器的控制器，在这种情况下是分层结构的。

因此，您从一个由导航控制器包装的根视图控制器开始，然后您可以在其上堆放更多视图控制器。导航控制器将帮助您根据需要创建和销毁它们，并提供带有后退按钮等的漂亮界面。

现在，如果你想呈现一个**模态**视图控制器（例如，用于编辑一个对象），它也有子视图控制器（例如，用于编辑对象的某些属性），你必须将它包装到它自己的导航控制器中。这将为您提供一个很好的导航栏，您可以使用它来关闭它并管理它自己的视图层次结构。

清除？

# java - 在 Java 桌面应用程序中使用的 Google 地图替代方案

> ID：10805797
> 
> 赞同：0
> 
> 时间：2012-05-29T19:55:19.107
> 
> 标签：java, swing, google-maps, map, coordinates

有人知道在 Java 桌面应用程序中使用类似于谷歌地图的东西吗？我感兴趣的唯一功能是在地图上标记一个点并找到该点的坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:52:24.997

您可以使用[TileMill](http://mapbox.com/tilemill/)和[MapBox](http://mapbox.com/tour/)来开发和托管您的地图，并使用 JavaFX 将地图嵌入到 WebView 中，如 Pulsar 建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:14:00.373

请参阅此问题和答案： [Alternative Map API's (Like Google Maps)](https://stackoverflow.com/questions/3609344/alternative-map-apis-like-google-maps)

要将它们嵌入到 Java 应用程序中，您可以使用 JavaFX 2 webview 轻松嵌入网页（javafx 2 组件也可以在 swing 中使用）。或者使用他们提供的库（如果有的话）或者自己实现 api 和渲染。

如何在 JavaFX 2 中嵌入 Google 地图的非常简单的示例：

[http://java-buddy.blogspot.se/2012/03/embed-google-maps-in-javafx-webview.html](http://java-buddy.blogspot.se/2012/03/embed-google-maps-in-javafx-webview.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:05:45.527

一个流行的替代方案是[OpenStreetMap](http://wiki.openstreetmap.org/wiki/Main_Page)。不幸的是，我无法提供确切的实现细节，因为我还没有尝试过，但根据他们的 Wiki，它似乎可以在 Java 中使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T20:27:19.680

[`JMapViewer`](http://wiki.openstreetmap.org/wiki/JMapViewer)[，在这里](https://stackoverflow.com/q/10744798/230513)提到，在 Swing 应用程序中运行良好，但我还没有在[Java 桌面应用程序](https://stackoverflow.com/tags/jsr296/info)中尝试过。

# .net - 处理隐藏表单

> ID：10805798
> 
> 赞同：0
> 
> 时间：2012-05-29T19:55:23.217
> 
> 标签：.net, winforms, garbage-collection, parent-child

我有一个关于关闭和处理隐藏的子表单的问题。

带有两个按钮的父窗体：

```
Public Class Form1
    Dim F2 As Form2

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        F2 = New Form2
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        F2.Show()
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        F2.Hide()
    End Sub
End Class 
```

子表：

```
Public Class Form2
    Private Sub Form2_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
            e.Cancel = True
            Me.Hide()
    End Sub

    Private Sub Form2_VisibleChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.VisibleChanged
        MsgBox("Form2.Visible = " & Me.Visible.ToString)
    End Sub

    Private Sub Form2_Disposed(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Disposed
        MsgBox("Form2 has been disposed.")
    End Sub
End Class 
```

只要 Form1 是打开的，我就不想关闭 Form2。所以那部分有效。
但是我确实想在 Form1 关闭时关闭 Form2。我是否必须从 Form1 显式关闭它？并为 Form2_FormClosing() 添加更多逻辑？
就我所知，Form2_Disposed() 永远不会被调用（我永远不会得到消息框）。它是否正确？
当 Form1 被释放时，变量 F2 不再存在。垃圾收集器稍后会处理 Form2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:16:09.187

我将尝试将 Form2_FormClosing 事件移至 Form1 类。
通过这种方式，您将能够从 Form1 实例控制 Form2 实例的关闭。

```
' global instance flag
Dim globalCloseFlag As Boolean = False

...
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load  
    F2 = New Form2  
    AddHandler F2.FormClosing, New FormClosingEventHandler(AddressOf Form2ClosingHandler)
End Sub  

' This will get the event inside the form1 instance, you can control the close of F2 from here
Private Sub Form2ClosingHandler(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) 
    if globalCloseFlag = false then    
        e.Cancel = True    
        F2.Hide()
    end if

End Sub 

' Form1 closing, call the close of F2
Private Sub Form1_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing      
      globalCloseFlag = True
      F2.Close()
End Sub 
```

请注意，这是一个示例，您需要使用 FormClosingEventArgs.CloseReason 属性来处理窗口关闭等特殊情况

# fullcalendar - 事件 URL 被下载而不是去 url？

> ID：10805799
> 
> 赞同：0
> 
> 时间：2012-05-29T19:55:26.567
> 
> 标签：fullcalendar

有几种方法可以创建包含 URL 属性的事件对象。比如数组和json、ajax函数。

但由于某种原因，在 ajax 函数中创建的事件 url 无法正常工作，它只是下载 url 而不是转到 url。

但是，数组中的事件 url 可以正常工作。

以下数组运行良好，单击时会转到 url。

```
var myEvents = {
    events: [
        {
            title: 'Expedition #1',
            start: new Date(y, m, d, 10, 0),
            end: new Date(y, m, d, 11, 30),
            allDay: false,
            url: '/community/wall/getWallContentAjax.do?itemId=391162080555'
        },
        {
            title: 'Quest #1',
            start: new Date(y, m, d+1, 10, 0),
            end: new Date(y, m, d+1, 11, 0),
            url: '/community/wall/getWallContentAjax.do?itemId=391162080555'
        }
    ]

} 
```

但是这个位于[http://arshaw.com/fullcalendar/docs/event_data/events_function/](http://arshaw.com/fullcalendar/docs/event_data/events_function/)的例子不能正常工作，只能下载链接。

```
$('#calendar').fullCalendar({
    events: function(start, end, callback) {
        $.ajax({
            url: 'example.xml',
            dataType: 'xml',
            success: function(doc) {
                var events = [];
                $(doc).find('event').each(function() {
                    events.push({
                        title: $(this).attr('title'),
                        start: $(this).attr('start'),
                        url: '/community/wall/getWallContentAjax.do?itemId=391162080555'
                    });
                });
                callback(events);
            }
        });
    }
}); 
```

数组和 ajax 函数大部分都可以正常工作，除了 ajax 事件 url 只是下载到我的计算机而不是转到 url。

任何可能的线索和建议将不胜感激。

谢谢，

查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:13:55.357

您提供的内容还不够，您使用 url 管理的方式和位置未显示或未突出显示。但我可以建议你一件事，尝试放 javascript 并调用它，例如 window.location.href="New_link"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:46:06.227

您可以像这样使用[eventClick](http://arshaw.com/fullcalendar/docs/mouse/eventClick/)函数：

```
eventClick: function(event) {
    // open events url property in a new window
    window.open(event.url, 'myeventurl');
    return false;
} 
```

演示部分中有一个[工作示例](http://arshaw.com/js/fullcalendar-1.5.3/demos/gcal.html)。

# javascript - android: 带有 JavaScript 的 WebViews，内容消失 onCreateOptionsMenu();

> ID：10805800
> 
> 赞同：1
> 
> 时间：2012-05-29T19:55:28.913
> 
> 标签：javascript, android, html, webview, android-optionsmenu

我有一个程序，有三个 webviews。每个 webview 都启用了 JavaScript，并且具有动态生成的内容（列表、图标、旋转动画等）。那里的一切都很好。

现在我想添加一个复制和粘贴功能，以便用户可以将其他活动的值粘贴到剪贴板，然后将它们复制到我的活动中。我想使用选项菜单执行此操作 - 显示“复制”和“粘贴”选项。现在的问题是，当按下菜单按钮时，我的 webview 的 HTML 内容会消失，无论我使用什么方法来创建我的选项菜单（即 onCreateOptionsMenu()，或者使用 onKeyDown() 中间步骤来阻止 webview 消费事件）以及我是否使用 .add 或在 XML 中定义菜单。

任何人都知道为什么会发生这种情况？菜单是否会导致某种 onPause 被调用，这可能会导致 html 被卸载？下面是我的菜单制作/加载我的网络视图等的代码......

```
public boolean onCreateOptionsMenu(Menu menu) {

   // menu.add(0, 0, 0, "test");
    menu.add("HELP");
    return true;
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        // do your menu stuff here
       openOptionsMenu();

       return true;

    }
        else
        return super.onKeyDown(keyCode, event);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // starting values for each spinner
    cur1Sel="Distance";
    cur2Sel="Inch";
    cur3Sel="Milimeter";
    // starting inp and outp vals
    inputValue = "";
    outputValue="";
    // init my constats from above...
    POINT = 98;
    CLEAR = 99;

    face = Typeface.createFromAsset(getAssets(),"helv_bold.ttf");
    format= new DecimalFormat("#.##");
    // nab them application resrouces you banger you.
    res = getResources();
    // build ouor arrays for display purposes
    measure_array = res.getStringArray(R.array.measure_array);
    input_array = res.getStringArray(R.array.distance_array);
    output_array = res.getStringArray(R.array.dist_inches_array);
    // init measure abbreviation arrays, otherwise we get null pointers first round....
    measure_abbrevs = new String[1];
    measure_abbrevs[0] = "none";

    // build abbreviation resrouces
    input_abbrevs = res.getStringArray(R.array.dist_abbrev_array);
    output_abbrevs = res.getStringArray(R.array.dist_inches_abbrev_array);
    // Webviews For Each Spinner
    measure_spinner = (WebView) this.findViewById(R.id.measure_view);

    input_spinner = (WebView) this.findViewById(R.id.input_view);
    output_spinner = (WebView) this.findViewById(R.id.output_view);

    // this lets everyone know where we start....
    curMeasure="Distance";
    // Measurement Spinner
    measure_spinner.getSettings().setJavaScriptEnabled(true);
    measure_spinner.addJavascriptInterface(new AndroidSpinnerBridge(), "android");
    measure_spinner.setVerticalScrollBarEnabled(false);

   // measure_spinner.getSettings().setUseWideViewPort(false); 
    //input Spinner
    input_spinner.getSettings().setJavaScriptEnabled(true);
    input_spinner.addJavascriptInterface(new AndroidSpinnerBridge(), "android");
    input_spinner.setVerticalScrollBarEnabled(false);

    //input_spinner.loadUrl("javascript:SpinningWheel.setId({2});");
    //output Spinner
    output_spinner.getSettings().setJavaScriptEnabled(true);
    output_spinner.addJavascriptInterface(new AndroidSpinnerBridge(), "android");
    output_spinner.setVerticalScrollBarEnabled(false);

    // buttons!  weeee! Buttons!!

    // IMPORTANT.. WAIT AWHILE FOR THE WEBVIEW TO PREPARE< OTHERWISE RENDERING MIGHT FAIL.  Then load.

    input_spinner.loadUrl("file:///android_asset/index_sp2.html");
    measure_spinner.loadUrl("file:///android_asset/index_sp1.html");
    output_spinner.loadUrl("file:///android_asset/index_sp3.html");
    measure_spinner.loadUrl("javascript:SpinningWheel.fixTheFuckingError();");

}; 
```

# python - 在 Windows 上安装 Pyspatialite

> ID：10805808
> 
> 赞同：3
> 
> 时间：2012-05-29T19:56:29.513
> 
> 标签：python, visual-c++, mingw, spatialite

我在 ubuntu 上使用 pyspatialite 没有问题——它很完美。但是 Windows 让我非常头疼。我已经尝试解决这个问题至少三天了。

我正在使用带有 mingw (gcc) 作为编译器的 Visual Studio 2010 express。我遇到并解决了很多问题：vcvarsall.bat、iconv.h等，但我实际上并不知道我到底做了什么。我为 DLL、.h 文件（头文件）、.a 文件（afaik 它与 mingw 相关）、osgeo4w 二进制文件等尝试了几个环境变量。但我无法弄清楚。

我在使用 MSVC 时收到以下错误：`'gcc' failed with exit status 1`并且在使用 MinGW 时：命令提示符下的很多警告行与`lex.gml.c, lex.kml.c, lex.geojson.c`或类似的东西有关。

我不是开发人员。我只是对开源 GIS 世界感兴趣。有谁知道“如何在 Windows 上安装 pyspatialite”的分步指南？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T00:46:49.630

经过大量的反复试验、谷歌搜索、键盘损坏、各种论坛/聊天问答环节和头部受伤——更不用说必须为几个问题创建自己的修复程序/解决方法——我终于成功地构建了并为 Windows x64 安装 64 位版本的 PySpatiaLite 3.0.1。呜呼！

考虑到我到达终点有多么困难（几个星期！），我想分享本教程作为对特定问题的回答，“我如何构建和安装 64 位版本的 PySpatiaLite视窗？” 与其创建一个新的自我回答的问题线程，不如只回答这个关于在 Windows 上安装 PySpatiaLite 的问题，假设它会出现在任何搜索如何在 64 位构建中执行它的人身上。所以这里...

**注意：** Markdown 在这个网站上的工作方式，我不能完全控制列表的编号模式；它在每个标题后重置为 1。因此，虽然在原始教程中我可能将某些东西编号为 30，但在这里我必须注意它显示为构建 xyz 等下的第 5 步。你能做什么？

* * *

# 操作方法：在 WINDOWS 上安装 64 位 PYSPATIALITE

*在 40 个非常容易遵循的步骤中*- 不，真的！

* * *

这里有很多步骤，但这仅仅是因为我将它们分解成尽可能小的组件；所以不要感到不知所措。在高层次上，你实际上只做 5 件事：

1.  下载所有必要的资源
2.  设置构建环境（你可能已经这样做了）
3.  构建和安装依赖库
4.  构建和安装 PySpatiaLite
5.  测试您的安装

而已。没那么难，真的吗？*哦，是的！*但希望您遵循这些步骤并没有那么困难。对于你们中的许多人来说，这些步骤中添加的细节似乎有点过头了，特别是如果你以前是从源代码构建的（我没有——真的！），但我不对观众的技能水平或专业知识做任何假设; 所以这个 How-To 的编写是为了让一个相对的初学者（比如我！）应该能够遵循它。

**注意：**请注意本文档中的注释，因为它们经常指出一些问题或乍一看不会很明显的事情。

**注意：**尽可能使用最新的稳定版本，而不是测试版或夜间快照。有时，您别无选择，只能抓住最前沿的 beta 版本（如果您*认识*人，也可以是 alpha 版本）。例如，您将需要 GEOS 的最新稳定版本*和*夜间构建来解决问题。

**注意：**当您访问下面的一些链接时，您可能会注意到您打算构建的其他库的一些预编译二进制文件。我*强烈*建议你不要使用这些。您无法确定它们是在什么环境中构建的，如果您在自己的环境中构建它们，事情会更好/更安全/更确定它们会正常工作。Gettext 的例外。

**ME：**代表“我的环境”作为比较基础

## 要求：

*   一个 Microsoft Windows x64 操作系统（Duh！我们在这里做什么？）
    **我：** MS Windows 7 Home x64

*   [MS Visual Studio Express C++ (MSVC) 2008](http://www.microsoft.com/en-us/download/details.aspx?id=14597)
    **ME：**我下载并安装了一个虚拟 ISO 映像，而不是使用基于 Web 的安装程序
    **注意：**选择“vcsetup.exe”（C++）而不是“vcssetup.exe”（C#） - 注意额外的's'？你会认为他们会让它更明显一点，是吗？完整版的 MSVC 也同样适用，但和我一样，我认为*免费*对您来说很有价值。
    **注意：**可能适用于 MSVC 2010，但我强烈建议坚持使用编译 Python 的相同版本，因为有时它可能有点棘手，这就是为什么我建议使用 MSVC 而不是 mingw-w64 或 Cygwin 构建的原因。

*   [MS 软件开发工具包 (SDK) 7.0 amd64 .NET Framework 3.5](http://www.microsoft.com/en-us/download/details.aspx?id=3138)
    **ME：**还在这里下载了 ISO 映像。
    **注意：**可能适用于 SDK 7.1 amd64 .NET Framework 4.0 (MSVC 2010)，但请参阅上面的注释

*   [Python 2.7 x64](http://www.python.org/download/releases/2.7.3/)
    **ME：** Python 2.7.3 x64（预编译 Win x64 安装）
    **注意：**可能适用于 2.5+ 版本，包括 3.x

*   [最新的 GNU iconv 源代码](ftp://ftp.gnu.org/gnu/libiconv/)
    **ME：** libiconv 1.9.2

*   [最新 Proj.4 源代码](ftp://ftp.remotesensing.org/proj)
    **ME：** libproj 4.8.0

*   [最新的 GEOS 源代码](http://trac.osgeo.org/geos/)
    **ME：** libgeos 3.3.5 (svn_trunk) + 2012-07-28 nightly snapshot
    **注意：**也可以从这个页面下载一个 nightly snapshot；我们需要从中复制一个丢失的目录，但我们不想用它来构建库本身。

*   [最新的 GNU Gettext Runtime *BINARY*](http://ftp.gnome.org/pub/gnome/binaries/win64/dependencies/)
    **ME：** Gettext 0.18.1.1-2
    **注意：**由于与 iconv 的循环依赖，我们在此处使用二进制文件而不是从源代码构建；你可以解决它，但这更容易/更快/更简单/更少压力。

*   [最新的 PySpatialLite 包](http://pypi.python.org/pypi/pyspatialite/)
    **ME：** PySpatialLite 3.0.1
    **注意：**在撰写本文时，3.0.1 是可用的最新版本；让这个版本工作的特定怪癖可能不会与任何其他版本完全匹配，但编译依赖库所需的大部分步骤仍然应该适用。

*   [Notepad++](http://notepad-plus-plus.org/)或其他功能齐全的编辑器应用程序。
    **注意：**当然，MS NotePad 会在紧要关头完成，但它会让这个过程变得更加困难。我推荐一些更强大的东西，而 Notepad++ 恰好是我的最爱。

## 设置构建环境：

1.  安装 MSVC 2008，并运行 Windows 更新（有时 2 次或更多次以获取所有内容），然后当没有更新时...

2.  *安装 SDK 7.0，然后再次*运行 Windows 更新（等等等等，令人作呕），然后当没有更新时......

3.  打开 Windows 文件夹（或 Windows 资源管理器）并导航到“C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC”

4.  编辑“vcvarsall.bat”

5.  在指示的行号处找到如下所示的代码：

    ```
    Line 19: if not exist "%~dp0bin\amd64\vcvarsamd64.bat" goto missing  
    Line 20: call "%~dp0bin\amd64\vcvarsamd64.bat" 
    ```

6.  这些行中的路径是完全*错误*的。不要问我为什么。我猜微软那天他们的集体评估，但如果你只是删除'\amd64'并将每行中的文件名更改为'vcvars64.bat'应该没问题。最终结果应如下所示：

    ```
    Line 19: if not exist "%~dp0bin\vcvars64.bat" goto missing  
    Line 20: call "%~dp0bin\vcvars64.bat" 
    ```

    **注意：**您可以通过打开命令窗口（开始 --> 运行 --> 键入 'cmd' --> 确定）并运行以下命令来进行测试：

    ```
    c:\> vcvarsall x64 
    ```

    您应该得到一系列输出，说明它是“设置使用 Microsoft Visual Studio 2008 x64 工具的环境”。继续并关闭此窗口。

7.  现在让我们测试您的 SDK 7.0 环境。单击开始 --> 所有程序 --> Microsoft Windows SDK 7.0 --> CMD Shell。如果一切正常，您应该有一个带有 *黄色*文本的命令行窗口。这表示 64 位环境。完美的！您现在可以关闭此窗口。
    **注意：**您可能想要创建 SDK 7.0 CMD Shell 的快捷方式 - 我们将在整个过程中经常使用它。

8.  确定最终要安装依赖库的位置。如果该文件夹尚不存在，请立即创建该文件夹。记住您选择的路径，因为我们会经常提到它。为简单起见，我们将在示例代码中将此称为“\Install”或有时称为“C:\Install”。

9.  决定在此安装过程中将临时构建文件保存在何处。这不应*与* 您的“\Install”文件夹位于同一位置。在示例代码中，我们将其称为“\Temp”或“C:\Temp”。

10.  将 GNU Gettext 二进制文件解压缩到“\Temp”，这应该会生成一个名为“\Temp\Gettext-0.18.1.1-2”或类似的文件夹。

11.  将 libintl.dll 从 '\Temp\Gettext-0.18.1.1-2\bin' 复制到 '\Install\bin' （您必须自己创建 '\bin'），或者只是复制并粘贴所有 Gettext (' \bin'、''\lib' 等）子文件夹放入 '\Install'。无论哪种方式都可以正常工作。

12.  导航到“\Install\bin”，复制“libintl.dll”并将其命名为“intl.dll”。这对于一些以不同名称查找它的库来说是必要的。现在我们准备好继续构建库了......

## 构建依赖库：

1.  将每个库（Proj.4、GEOS 和 iconv）解压缩到 '\Temp' 中它们自己的文件夹中。我建议将每个文件夹重命名为简短但具有描述性的名称（例如“\Temp\Proj4”），因为一遍又一遍地输入“\Temp\Proj-4.8.0”（或更长！）会让人厌烦。

*构建图标v：*

2.  打开您的SDK CMD Shell，并将目录更改为您的iconv 文件夹（例如'cd c:\temp\iconv'）。

3.  键入以下两个命令之一：

    ```
    Single-threaded static lib: (recommended)  
    c:\Temp\iconv\> nmake install /f makefile.msvc MFLAGS=-ML PREFIX=c:\Install  

    Multi-threaded static lib: (so far it's working for me)  
    c:\Temp\iconv\> nmake install /f makefile.msvc MFLAGS=-MT PREFIX=c:\Install 
    ```

    将 'c:\Install' 替换为您的 '\Install' 路径。经过很长时间进行一些神秘的 c 样式链接等之后，该过程最终将完成，并且假设您没有看到破坏构建过程的错误（例如，'cl.exe exited with status 2'） - 忽略它是相对安全的无数的警告——你已经准备好继续前进了。
    **注意：**如果您愿意，您可以通过在“nmake”之后立即删除“install”然后重新运行上述命令，分两个单独的步骤构建和安装库，但有什么意义呢？如果构建部分失败，它无论如何都不会安装。

*建设项目 4：*

4.  仍然在 CMD Shell 中，将目录更改为您的 '\Temp\Proj4' 文件夹（例如，'cd c:\temp\proj4'）。

5.  键入以下命令：

    ```
    c:\Temp\proj4\> nmake install-all /f makefile.vc INSTDIR=c:\Install 
    ```

    将 'c:\Install' 替换为您的 '\Install' 路径。
    **注意：**此处生成文件的扩展名现在是“.vc”而不是“.msvc”。两者似乎都是常见的做法。
    **注意：**注意这里是'nmake install-all ...'，它比'nmake install ...'更常见，特别是因为'install'是一个不应被覆盖的内置nmake命令。
    **注意：**这是我见过使用“INSTDIR=”而不是“PREFIX=”的唯一实例。这本身并没有*错，只是不是我见过的最常用的标准约定。*
    不要担心任何消息，例如“系统找不到指定的文件。已复制 0 个文件。安装脚本非常基本，即使您没有选择编译它们，它也会尝试安装所有 .DLL 和其他文件。
    很短的时间后，该过程将完成（再次，错误严重，警告正常），您可以继续。

*构建 GEOS：*

18.  这将需要一些额外的时间和精力。还记得您下载了最新的稳定版本*和*每晚的 snapshop 吗？如果您还没有，请继续将两者解压缩到单独的文件夹（例如，'\Temp\GEOS' 和'\Temp\GEOSnap'）。

19.  将文件夹“\Temp\GEOSnap\src\triangulate”复制到“\Temp\GEOS\src”。出于某种原因，在撰写本文时，最新的稳定版本中缺少 '\triangulate'。这就是我们所需要的'\GEOSnap'；继续...

20.  [将GEOS\makefile.vc 补丁](http://trac.osgeo.org/geos/ticket/577)下载到 '\Temp\GEOS\makefile.vc'。- 说谢谢。'

21.  [将GEOS\src\makefile.vc 补丁](http://trac.osgeo.org/geos/ticket/577)下载到 '\Temp\GEOS\src\makefile.vc'。- 别客气。
    **注意：**不要把这两者混为一谈！如果你这样做，对你来说会很糟糕。
    除了实施 GEOS Trac #574 的修复之外，这两个用于 MSVC 的 makefile 添加代码以执行基本的安装和卸载功能（例如，'nmake install-all ...'）。否则，您将需要手动复制所有文件（到处都是！）或使用其他构建方法，例如 CMake，这目前有点狡猾。

22.  导航到“\Temp\GEOS\src”，编辑“dirlist.mk”，并在指示的行号处添加以下代码：

    ```
    Line 45: triangulate \ 
    ```

    此条目应低于“简化\”并高于“实用程序”。保存并关闭。

23.  打开您的 CMD Shell，并将目录更改为您的 '\Temp\GEOS' 文件夹（例如，'cd c:\Temp\GEOS'）。

24.  键入以下命令：

    ```
    c:\Temp\GEOS\> nmake install-all /f makefile.vc PREFIX=c:\Install 
    ```

    将“c:\Install”替换为“\Install”路径。经过很长很长时间，构建过程将完成。假设没有构建中断错误，您应该会收到 GEOS 安装在“\Install”中的通知。
    这就是依赖库的全部内容；现在你（*终于*）准备好安装 PySpatiaLite 了！

## 构建和安装 PySpatiaLite：

25.  将 PySpatiaLite 提取到其自己文件夹中的“\Temp”（例如“\Temp\PSL”）。

26.  导航到“\Temp\PSL”，编辑名为“setup.py”的文件，并在指示的行号处修改以下代码：

    ```
    Line 45: include_dirs = ['c:\Install\include']  
    Line 46: library_dirs = ['c:\Install\libs']  
    Line 47: libraries = ['geos','geos_c','proj','iconv']  
    Line 48: runtime_library_dirs = ['c:\Install\bin'] 
    ```

    将上面的 'c:\Install' 部分替换为您自己的 '\Install' 路径，但保持 '\include'、'\libs' 和 '\bin' 部分不变。保存并关闭文件。
    **注意：**您只是在第 47 行添加“,'iconv'”。

27.  打开您的 CMD Shell 并将目录更改为您的 PySpatiaLite 文件夹（例如 'cd c:\Temp\PSL'）。

28.  键入以下命令：

    ```
    c:\Temp\PSL\> python setup.py build 
    ```

    等待它下载空间合并，卸载它需要的文件，开始构建过程，最终失败。
    是的。这是正确的。构建可能会*失败*（除非 Loki 在您阅读本文时已解决此问题）。

29.  如果它确实失败了，请查看失败消息上方大约 14 行的控制台输出，您应该会看到隐藏在那些肮脏的代码中，例如：

    ```
    -DVERSION = "3.0.1" 
    ```

    记下该号码；您将在未来的几个地方需要它。

30.  最小化 CMD Shell，导航到“\Temp\PSL\amalgamation”，然后编辑标记为 spatialite.c 的文件。不要恐慌！它很大，很糟糕，很可怕，但我们只会做一个很小的改变：一个笨拙但有效的解决方法。

31.  在指示的行号处添加以下代码：

    ```
    Line 54: #define VERSION "3.0.1" 
    ```

    **注意：**将“3.0.1”替换为您在上面第 30 步（此处为 5）中看到的数字，并确保使用双引号 (") 而*不是*单引号 (')，否则它将*失败*。是的，我发现了困难的方式，不像你们那里的c大师谁知道得更好。
    如果您想知道为什么我们必须等待它失败才能进行此更改，这是因为文件在您的系统上不存在，直到合并下载期间第一次构建尝试。就这样。

32.  现在重新运行上面第 31 步中的命令，构建应该成功完成。

33.  现在运行以下命令：

    ```
    c:\Temp\PSL\> python setup.py install 
    ```

    和鲸鱼！假设没有更多麻烦的错误，您终于完成了构建/安装过程。吃一块饼干，拍拍自己的背。如果您愿意，您现在可以删除所有这些“\Temp”文件夹。现在进行一些测试以确保一切正常...

## 测试您的 PySpatiaLite x64 安装：

34.  打开一个 CMD 窗口并将目录更改为 '..\Python27\Lib\site-packages\pyspatialite\test'（例如 'cd c:\python27...\test'）。

35.  不要启动 Python CLI。连续键入以下每个命令：

    ```
    c:\python27\...\test\> python dbapi.py  
    c:\python27\...\test\> python dump.py  
    c:\python27\...\test\> python factory.py  
    c:\python27\...\test\> python hooks.py  
    c:\python27\...\test\> python regression.py  
    c:\python27\...\test\> python spatial.py  
    c:\python27\...\test\> python transactions.py  
    c:\python27\...\test\> python types.py  
    c:\python27\...\test\> python userfunctions.py 
    ```

    每次测试后，您应该会收到一份报告，说明它在 x.xxx 秒内运行了 xx 次测试，以及测试是通过（OK）还是失败。如果他们都通过了，你就是金子。
    **注意：** “spatial.py”可能会失败，因为它期望 SpatiaLite 版本为“2.3.1”，而您的可能是“3.0.1”。不用担心，文件的简单编辑将解决此问题并允许您运行测试。

36.  编辑“spatial.py”并将“2.3.1”更改为您实际安装的版本（还记得上面第 30 步（构建 PySpatiaLite - 第 5 步）中的那个数字吗？）在指示的行号处：

    ```
    Line 18: self.assertEqual(row[0], "3.0.1") 
    ```

    再次运行“spatial.py”测试，它现在应该可以正常工作了。不太确定他们为什么要在这个测试中检查 pyspatialite 版本......继续前进！

    内置测试很好，但更面向现实世界的测试怎么样？您知道，您在其中实际创建、填充、轮询和操作数据库中的数据吗？是的，这听起来就像门票！

37.  [滚动到在线 Spatialite Cookbook 的Language Bindings: Python](http://www.gaia-gis.it/gaia-sins/spatialite-cookbook/html/python.html)部分的底部，并将“spatialite_sample.py”代码复制到新的 Python 文件中（例如“psl_sample.py”）。

38.  在保存、关闭和运行此测试之前，请检查可能的复制/粘贴错误。确保代码在指示的行号处完全像这样读取：

    ```
    Line 28: sql = "SELECT AddGeometryColumn('test_pt', "  
    Line 29: sql += "'geom', 4326, 'POINT', 'XY')" 
    ```

    我猜在从 HTML 代码到 Python 文件的翻译中会丢失一些东西，因为每次我剪切/粘贴这段代码时，第 28 行的结尾空格和引号都会掉到第 29 行的开头，并且来自多个来源， 也。容易修复，寿。

39.  *现在*保存、关闭并运行它。我真的必须向您展示如何做到这一点吗？来吧！如需提示，请查看第 35 步（此处为第 2 步）。;-)
    假设所有测试都通过了，包括内置和说明书示例，那么所有迹象都表明您拥有可靠的 64 位 PySpatiaLite 安装。

40.  庆祝！（需要将其四舍五入到 40 ;-)）

我希望这个“小”HOW-TO 对您有用。请随时提供反馈/更新/更正。

此致，

-RMWChaos，你友好的邻居邪恶霸主

[http://www.thedarklands.com](http://www.thedarklands.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T23:39:05.550

忘记尝试构建自己的可执行文件！

只需使用来自 OSGeo4W 的现有可执行文件。

1.  安装 OSGeo4W
2.  在此应用程序下，您将找到 Python27 的副本和一个空间站点包
3.  将站点包复制到您自己的 Python 副本
4.  将 OsGeo4W/bin 目录中的所有 DLL 复制到 Python 副本中的新文件夹中，例如 binosgeo4w
5.  将新文件夹 binosgeo4w 添加到系统路径

我不知道需要哪个 DLL，但需要其中一个来支持站点包。然后我能够从[http://www.gaia-gis.it/spatialite-2.4.0-4/splite-python.html运行测试脚本](http://www.gaia-gis.it/spatialite-2.4.0-4/splite-python.html)

# ruby-on-rails - 来自查询的 Metawhere 抽象条件

> ID：10805816
> 
> 赞同：0
> 
> 时间：2012-05-29T19:57:06.873
> 
> 标签：ruby-on-rails, ruby, activerecord, meta-where

我正在使用 Metawhere rails gem 来查询我的数据库。我有一个有效的查询：

```
t=Model.where({:attr1 => 450} | {:attr2 => 450}, :lang => 2) 
```

现在我试图从这样的查询中抽象出条件：

```
conditions=Hash[{:attr1 => 450} | {:attr2 => 450}, :lang => 2]
t=Model.where(conditions) 
```

但第一行给了我：语法错误，意外的 tASSOC，期待 ']

我尝试了很多事情，比如在查询中将条件设为字符串和 eval(conditions)。但这给了我 SyntaxError: (eval):1:in `irb_binding': compile error (eval):1: syntax error, unexpected ',', expecting $end

我被困住了。如果你能帮助我，那将不胜感激。

罗格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:01:50.097

代替

```
conditions=Hash[{:attr1 => 450} | {:attr2 => 450}, :lang => 2}] 
```

和

```
conditions=Hash[{:attr1 => 450} | {:attr2 => 450}, :lang => 2] 
```

# facebook - facebook LIKE 可以用作在我的网站上执行其他操作的条件吗？

> ID：10805824
> 
> 赞同：0
> 
> 时间：2012-05-29T19:57:39.290
> 
> 标签：facebook, facebook-like, point, prerequisites

我的网站包含一个 facebook 页面的链接，并且在该 facebook 页面上按下 LIKE 按钮的用户可以在我的网站上获得一些积分。我想知道是否有一种简单的方法可以检查试图在我的网站上赚取积分的用户是否真的按下了 Facebook 页面上的 LIKE 按钮，该页面的链接存在于我的网站上。基本上，用户在某个 facebook 页面上按下 LIKE 按钮的条件被用作在我的网站上执行某些其他操作的先决条件。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:08:11.333

用这个

```
$isFan = file_get_contents("https://api.facebook.com/method/pages.isFan?format=json&access_token=" . User_Token . "&page_id=" . FB_Fanpage_ID); 
```

这将返回以下任一

*   字符串真字符串假json
*   if token 的格式化错误响应
*   或 page_id 无效

# perl - 带有 Perl 的 HTML::Template 的一列中的单选按钮

> ID：10805825
> 
> 赞同：0
> 
> 时间：2012-05-29T19:57:54.013
> 
> 标签：perl, radio-button

这是一个包含两列的表格，左侧列中包含标签，右侧列中包含表单元素。我试图在第二列中获取椅子颜色的单选按钮。但他们一直在第一列结束。

这是相关的代码：

```
use HTML::Template;
use CGI qw(:standard);

my $form = '';

$form .= start_form .
  table ({-width=>'100%'},
    Tr([
      td (b ('Chair color:')),
        td (radio_group(-name => 'certificate_type',
                        -values=>['blue','white','green'],)),
      td ([b ('Username:'),  $ENV{REMOTE_USER}]),
      td ([b ('Full name:'), $PARAMS{CURRENT_FULLNAME}]),
      td ([b ('Email:'),     $PARAMS{EMAIL}]),
   ])) . submit('Submit') . reset . end_form; 
```

（更好的办法是让第二列中的按钮垂直堆叠。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:35:28.147

我想你想要第一列中的“椅子颜色”，在第二列中三个单选按钮的左侧？

问题是您已将“椅子颜色”`radio_group`放在两个单独的`td`元素中，因此它们将出现在单独的行中。

您需要将它们一起传递给一个匿名数组，`td`因为您有最后三行。

此外， 的参数`-columns => 1`将`radio_group`强制它们进入单个列。

这段代码似乎可以满足您的需要。

```
my $form =
    start_form
  . table( {-width=>'100%'},
      Tr([
        td([
          b('Chair color:'),
          radio_group(
            -name => 'certificate_type',
            -values => [ qw/ blue  white  green / ],
            -columns => 1
          )
        ]),
        td([b('Username:'),  'remote user']),
        td([b('Full name:'), 'current fullname']),
        td([b('Email:'),     'email']),
      ])
    )
  . submit('Submit')
  . reset
  . end_form; 
```

# javascript - 动态生成的 Select-Elements 和 JavaScript 闭包

> ID：10805826
> 
> 赞同：0
> 
> 时间：2012-05-29T19:57:57.367
> 
> 标签：javascript, html, closures

我想`<select`动态生成一些元素。我正在复制一个现有的，只更改名称和 onchange-Event。这就是我的问题所在：每个`<select>`人都有自己的 ID。当 onChange-Event 触发时，它应该响应元素的值和 ID。我不知道如何准确定义 JavaScript 闭包。我用“this.value”尝试过，但显然这不起作用......我已经找到[了这个](https://stackoverflow.com/questions/341723/event-handlers-inside-a-javascript-loop-need-a-closure)例子，但它根本不适合我：/

JavaScript：

```
var i = 0;
var selectArray = [];

function addSelector(){

var container = document.getElementById("check0");

selectArray[i] = document.getElementsByName("select0")[0].cloneNode(true);
selectArray[i].name = 'select'+i;
selectArray[i].onchange = function(v, i) {
        return function() {
           changeType(v, i)
        }
    }(this.value, i);

container.appendChild(selectArray[i]);
}

function changeType(selected, i) {
    switch (selected) {
        case 'One':
           alert(selected+' , '+i);
            break;
        case 'Two':
            alert(selected+' , '+i);
            break;          
        case 'Three':
            alert(selected+' , '+i);
            break;
        case 'Four':
            alert(selected+' , '+i);
            break;
        case 'Five':
            alert(selected+' , '+i);
            break;
    }
} 
```

（我也尝试发布 HTML，但由于某种原因我无法做到这一点；））

[这是小提琴](http://jsfiddle.net/vogti/FNFQU/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:12:22.253

`this.value`这里不知道：

```
function addSelector(){
    /* ... */
    selectArray[i].onchange = (function(v, i) {
        return function() {
            changeType(v, i)
        }
    })(this.value, i);
    /* ... */
} 
```

`this`将是`undefined`（在严格模式下）或`window`（正常模式下）。JavaScript 应该如何知道这`this`是对创建/克隆`<select>`对象的引用？`this`在您的内部将是正确的`onchange`，因此您不必通过关闭来包含它，只需包含索引`i`：

```
selectArray[i].onchange = (function(index) {
    return function() {
        changeType(this.value, index)
    }
})(i); 
```

请注意，您的警报语法是错误的 - 您应该`alert(selected + " " + i)`改用，因为第二个参数将被忽略。

**也可以看看：**

*   [**JSFiddle 演示**](http://jsfiddle.net/FNFQU/12/)
*   [医疗器械网络：`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:15:43.370

你的例子真的很难遵循。它有很多问题

*   `i`永远不会改变
*   `this.value`调用它时没有正确的值，但很容易从处理程序中找出

以下脚本执行我认为您需要的操作[http://jsfiddle.net/FNFQU/13/](http://jsfiddle.net/FNFQU/13/)

```
function addHandler(node, index){  
   node.onchange = function() {
      alert('Changed select index ' + index + '. Its value is ' + node.value);
   }
}

function duplicateSelectElement() {
   var container = document.getElementById("check0");
   var allSelects = document.getElementsByName("select");
   var firstSelect = allSelects[0];
   var newSelect = firstSelect.cloneNode(true);
   addHandler(newSelect, allSelects.length + 1);
   container.appendChild(newSelect);
} 

addHandler( document.getElementById('select0'), 1 );

document.getElementById('btn').onclick = duplicateSelectElement; 
```

使用以下 HTML

```
<input type="button"
       id="btn"
       value="Add Selector!" />
<div id="check0">
<select id="select0" name="select">
    <option selected>One</option>
    <option>Two</option>
    <option>Three</option>
    <option>Four</option>
    <option>Five</option>
</select>
</div>​ 
```

# ios - 史达琳、颈背、闪电侠、Haxe Dillemma

> ID：10805828
> 
> 赞同：3
> 
> 时间：2012-05-29T19:58:10.650
> 
> 标签：ios, actionscript-3, haxe, starling-framework

我正在使用 Starling Framework 在 iOS 的 Flash 中构建游戏。我也在使用 Nape，一个 2D 物理引擎。我遇到的问题是 Nape 引擎使用的特定方法`flash.display.DisplayObject`，但是，因为我使用的是 Starling 框架，所以我必须使用`starling.display.DisplayObject`. 它返回此错误：

> 1067：将 flash.display:DisplayObject 类型的值隐式强制转换为不相关的 starling.display:DisplayObject 类型。

没有办法调整这种方法。Nape 引擎被编译成 .swc，我无法对其进行编辑。该引擎也是开源的，但它是在 Haxe 中完成的，一旦我编辑了它，我就无法弄清楚如何编译它。

源代码可以在这里下载：http: [//deltaluca.me.uk/docnew/](http://deltaluca.me.uk/docnew/)

我需要将`flash.display.DisplayObject`课堂`nape.utils.Debug`上的所有内容更改为`starling.display.DisplayObject`.

如果您能给我任何建议，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:19:42.317

希望您知道调试工具仅用于调试目的。最后不要使用 nape.utils.Debug 来渲染你的空间。

我也在做八哥+颈背游戏。我在我的空间中遍历身体并读取它们的 x、y、旋转值，以在我的舞台上渲染 starling 的图像和影片剪辑。我想说的是，使用 Starling 编写自己的“调试绘图”非常简单。总而言之，您将不得不在某个时候编写它，因为 nape.utils.Debug 仅用于调试目的；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T16:29:57.777

这就是我所做的，非常简单。如果您还有其他问题，请告诉我。

创建*空间*时 - 通常是在创建场景时：

```
/**
 * Create debug drawing space to overlay on assets if flag enabled in Release config
 */
if(Release.DEBUG_PHYSICS){
    _debug = new ShapeDebug(320*2, 480*2, 0x000000);
    _debug.drawConstraints = true;
    _debug.drawCollisionArbiters = true;
    var MovieClipDebug:MovieClip = new MovieClip();
    MovieClipDebug.addChild(_debug.display);
    Starling.current.nativeOverlay.addChild(MovieClipDebug);
} 
```

当舞台被摧毁时：

```
if(Release.DEBUG_PHYSICS){
    _debug.clear();
    _debug = null;
} 
```

当图形引擎更新时：

```
/**
 * Update the positions of the depug layer
 */
if(Release.DEBUG_PHYSICS){
    _debug.clear();
    _debug.draw(_space);
    _debug.flush();
    _debug.display.x = this.x;
    _debug.display.y = this.y;
    // handles camera zooming in/out
    _debug.display.scaleX = this.scaleX;
    _debug.display.scaleY = this.scaleY;
} 
```

# jquery - AJAX 调用不适用于下拉菜单，它不会从 Html 文件加载内容

> ID：10805829
> 
> 赞同：-1
> 
> 时间：2012-05-29T19:58:41.927
> 
> 标签：jquery, ajax, menu, slidedown, nav

如何通过 Ajax 从单独的容器中调用内容（URL：http: [//internetbusinesspotential.com/cdc/slidedown-menu2.html](http://internetbusinesspotential.com/cdc/slidedown-menu2.html)）

这是我的问题，我正在尝试调用 html 文件以使用 ajax 调用填充页面上的 #content 容器。我已经在 ul="nav" 菜单的主要 li 元素上使用了 Javascript 下拉效果。这是 div 的特殊性：#maincontainer #leftMenu #nav li a

我知道这很简单，我只是忽略了它。

#content 容器通过加载 gif 进行动作，如果您单击子导航元素，甚至会再次重新加载主页内容

请帮忙！！

文件负责人：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>Slide down menu</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/slidedown-menu2.css">

<script type="text/javascript" src="js/slidedown-menu2.js"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <link rel="stylesheet" href="css/contentBase.css">
        <link rel="stylesheet" href="css/css.css">

<script type="text/javascript" src="js/js.js"></script> 
```

HTML：

```
<body>
<div id="mainContainer">

    <div id="leftMenu">
            <h3><a href="#">Topic Homepage</a></h3>
        <!-- START OF MENU -->
        <div id="nav_slidedown_menu">
            <ul id="nav">
                <li><a href="article1.html">Products</a>
                    <ul>
                        <li><a href="#">Menus</a>
                            <ul>
                                <li><a href="#">Download</a>
                                    <ul>
                                        <li><a href="#">Download</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Demo</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Calendar scripts</a>
                            <ul>
                                <li><a href="#">Download</a></li>
                                <li><a href="#">Demo</a></li>

                                <li><a href="#">Is it cross browser?</a>
                                    <ul>
                                        <li><a href="#">yes it is</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#">Window scripts</a>
                            <ul>
                                <li><a href="#">Download</a></li>
                                <li><a href="#">Demo</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Form widgets</a>
                            <ul>
                                <li><a href="#">Download</a></li>
                                <li><a href="#">Demo</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="article2.html">Support</a>
                    <ul>
                        <li><a href="#">Phone</a></li>
                        <li><a href="#">Email</a></li>
                        <li><a href="#">QnA</a></li>
                    </ul>
                </li>
                <li><a href="article3.html">History</a>
                    <ul>
                        <li><a href="#">1900 - 1940</a></li>
                        <li><a href="#">1941 - 1980 </a></li>
                        <li><a href="#">1981 - Present time</a></li>
                    </ul>
                </li>
                <li><a href="article4.html">The team</a>
                    <ul>
                        <li><a href="#">Person A</a>
                            <ul>
                                <li><a href="#">CV</a>
                                    <ul>
                                        <li><a href="#">Job 1</a></li>
                                        <li><a href="#">Job 2</a></li>
                                        <li><a href="#">Job 3</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Education</a></li>
                                <li><a href="#">Experience</a>
                                    <ul>
                                        <li><a href="#">Job 1</a>
                                            <ul>
                                                <li><a href="#">Accomplished this</a></li>
                                                <li><a href="#">Accomplished that</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Job 2</a></li>
                                        <li><a href="#">Job 3</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#">Person B</a></li>
                        <li><a href="#">Person C</a></li>
                        <li><a href="#">Person D</a></li>
                        <li><a href="#">Person E</a></li>

                    </ul>
                </li>
                <li><a href="article5.html">Locations</a>
                    <ul>
                        <li><a href="#">Norway</a></li>
                        <li><a href="#">United States</a></li>
                        <li><a href="#">United Kingdom</a></li>
                        <li><a href="#">Sweden</a></li>
                        <li><a href="#">Denmark</a></li>
                        <li><a href="#">Finland</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    <div class="bottom"></div>
        <!-- END OF MENU -->
        <script type="text/javascript">
        initSlideDownMenu();
        </script>

    </div>

<div class="contentContainer">
    <div id="wrapper">
        <div id="content">      
            <h2>Welcome!</h2>
            <p>This is where the content will load in here...</p>

        </div>
    </div>
</div>

</div>

</body> 
```

JavaScript：

```
$(document).ready(function() {

    var hash = window.location.hash.substr(1);
    var href = $('#nav li a').each(function(){
        var href = $(this).attr('href');
        if(hash==href.substr(0,href.length-5)){
            var toLoad = hash+'.html #content';
            $('#content').load(toLoad)
        }                                           
    });

    $('#nav li a').click(function(){

        var toLoad = $(this).attr('href')+' #content';
        $('#content').hide('fast',loadContent);
        $('#load').remove();
        $('#wrapper').append('<span id="load">LOADING...</span>');
        $('#load').fadeIn('normal');
        window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
        function loadContent() {
            $('#content').load(toLoad,'',showNewContent())
        }
        function showNewContent() {
            $('#content').show('normal',hideLoader());
        }
        function hideLoader() {
            $('#load').fadeOut('normal');
        }
        return false;

    });

}); 
```

CSS：

```
 @charset "utf-8";
    /* CSS Document */

        /*
        General rules
        */
        #mainContainer #leftMenu{
            position:relative;
            margin:0;
            padding:0/* 12px 0 0*/;
            height:auto;
            width:179px;
            color:#fff;
            clear:both;
            float:left;
            background:transparent url('../img/bg_leftNav_new.gif') repeat-y top left;
        }
        .optional #leftMenu {z-index:10;}

        #leftMenu, #mainContainer .bottom {background:transparent url('../img/bg_leftNav_new.gif') repeat-y top left;}

        .topicHome #nav_slidedown_menu li#local-az-link {display:none;}

        body #mainContainer h3 a {
            background-image: url('../img/bg_leftMenuH3_blue.gif');
            color: #FFF;
            line-height: 28px;
            padding-left: 5px;
        }

        #leftMenu,
        #mainContainer .bottom {
            background: transparent url('../img/bg_leftMenu_blue.gif') repeat-y top left; 
        }

        /* Active menu item */
        #nav_slidedown_menu .nav_activeItem {
            font-weight:bold;
            color: #ccc;
        }

        #nav_slidedown_menu li{
            list-style-type:none;
            position:relative;
        }
        #nav_slidedown_menu ul{
            margin:0px;
            padding:0px;
            position:relative;

        }

        #nav_slidedown_menu div{
            margin:0px;
            padding:0px;
        }
        /*  Layout CSS */
        #nav_slidedown_menu .slideMenuDiv2{
            width:175px;
        }

        #nav_slidedown_menu .slideMenuDiv3{
            width:225px;
        }
        #nav_slidedown_menu{
            width:205px;
        }

        /* All A tags - i.e menu items. */
        #nav_slidedown_menu a{
            color: #fff;
            text-decoration:none;
            display:block;
            clear:both;
            width:170px;
            padding-left:2px;
        }

        /* Active menu item */
        #nav_slidedown_menu .nav_activeItem {
            font-weight:bold;
            color: #CCC;
        }

        /*
        A tags
        */
        #nav_slidedown_menu .slMenuItem_depth1{ /* Main menu items */
            margin-top:0px;
            background: #4a6bad;
            font-weight:bold;
            padding: 5px .5px 5px 5px;
        }
        #nav_slidedown_menu .slMenuItem_depth2{ /* Sub menu items */
            margin-top:0px;
            background: #7faee2;
            font-weight:bold;
            padding: 5px .5px 5px 15px;
        }
        #nav_slidedown_menu .slMenuItem_depth3{ /* Sub menu items */
            margin-top:0px;
            background: #dcecfb;
            color: #000;
            padding: 5px .5px 5px 25px;
        }
        #nav_slidedown_menu .slMenuItem_depth4{ /* Sub menu items */
            margin-top:0px;
            background: #edf5fe;
            color: #000;
            padding: 5px .5px 5px 25px;
        }
        #nav_slidedown_menu .slMenuItem_depth5{ /* Sub menu items */
            margin-top:0px;
            background: #fff;
            color: #000;
            padding: 5px .5px 5px 25px;
        }

        /* UL tags, i.e group of menu utems.
        It's important to add style to the UL if you're specifying margins. If not, assign the style directly
        to the parent DIV, i.e.

        #nav_slidedown_menu .slideMenuDiv1

        instead of

        #nav_slidedown_menu .slideMenuDiv1 ul
        */

        #nav_slidedown_menu .slideMenuDiv1 ul{
            padding:1px;
        }
        #nav_slidedown_menu .slideMenuDiv2 ul{
            margin:0px;
            padding: 0px 10px 0px 0px;
        }
        #nav_slidedown_menu .slideMenuDiv3 ul{
            margin-left:0px;
            padding: 0px 10px 0px 0px;
        }
        #nav_slidedown_menu .slMenuItem_depth4 ul{
            margin-left:15px;
            padding:1px;
        }

    #mainContainer .bottom { /* bottom */
        position:relative;
        margin:0 0 0em 0;
        height:15px; /** = height of bottom cap/shade */
        width:179px;
        border:none;
        background-color:#4a6bad;
        background-position:bottom left;
    }

        #mainContainer .bottom {
        background: transparent url('../img/bg_leftNav_new.gif') repeat-y bottom left; 
    }

#wrapper {
    width: 480px;
    margin: 10px 0 0 15px;
    background: #0d0d0d url(img/header.jpg) no-repeat;
    padding: 58px 25px 55px 25px;
    border: 12px solid #2e2e2e;
    position:relative;
}
h1 {
    text-transform: uppercase;
    text-align: center;
    margin: 0;
    padding: 0.3em 0;
    text-indent:-99999px;
}

#load {
    display: none;
    position: absolute;
    right: 10px;
    top: 10px;
    background:url(../img/ajax-loader.gif);
    width: 43px;
    height: 11px;
    text-indent: -9999em;
}

.contentContainer { float:left; width: 200px;}

#content {
}
h2 {
    margin: 0;
    padding: 0.5em 0;
    color:#568945;
    font-family:Helvetica, Arial, Sans-serif;
}
p {
    margin: 0;
    padding: 0.4em 0;
    color:#686868;
    line-height:1.4em;
}
#content img.right {
    float: right;
    margin: 0 0 8px 8px;

}
#foot {
    padding: 15px;
    color: white;
    text-align: center;
    margin: 30px 0 0 0;
    border-top:1px solid #222222;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:41:30.423

好的，我在定义 onLoad 后通过重写它来工作：

```
$('#content').load(toLoad,'',function(returnText,status,request){}); 
```

整个脚本：

```
// JavaScript Document

$(document).ready(function() {

    var hash = window.location.hash.substr(1);
    var href = $('#toc li a').each(function(){
        var href = $(this).attr('href');
        if(hash==href.substr(0,href.length-5)){
            var toLoad = hash+'.html #content';
            $('#content').load(toLoad)
        }                                           
    });

    $('#toc li a').click(function(){

        var toLoad = $(this).attr('href')+'.html #content';
        $('#content').load(toLoad,'',function(returnText,status,request){

        });

        $('#content').hide('slow',loadContent);
        $('#load').remove();
        $('#conContainer').append('<span id="load">LOADING...</span>');
        $('#load').fadeIn('normal');
        window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-0);
        function loadContent() {
            $('#content').load(toLoad,'',showNewContent());
        }
        function showNewContent() {
            $('#content').show('slow',hideLoader());
        }
        function hideLoader() {
            $('#load').fadeOut('normal');
        }
        return false;

    }); 
```

# c# - 使用网络浏览器更改 PDF 页面

> ID：10805833
> 
> 赞同：1
> 
> 时间：2012-05-29T19:59:05.530
> 
> 标签：c#, winforms, pdf, browser

我正在使用网络浏览器加载 pdf 文件。当我加载文件时，我可以使用以下代码指示打开页面：

```
Webb.Navigate(path + "#page=2"); 
```

但是在加载文档后如何以编程方式更改页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:34:14.567

你会做和现在一样的事情。

当您的组合框索引更改时，请执行以下操作：

```
Webb.Navigate(path + "#page=" + combobox1.Text)); 
```

# java - 可以用独立的 JPA 测试 EJB3/JPA 吗？

> ID：10805834
> 
> 赞同：0
> 
> 时间：2012-05-29T19:59:23.270
> 
> 标签：java, testing, jpa, ejb-3.0

我有一个使用 EJB3 和 JPA 的 JEE5 应用程序。例如，我有一些豆子

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) 
```

我想为这些服务编写一些测试。我知道我可以使用像 OpenEJB 这样的可嵌入容器，但是由于 JPA 在 Java SE 中可用，我想知道我是否可以在测试中使用它？当然我不会拥有所有

```
@PersistenceContext, @PersistenceUnit, @TransactionAttribute 
```

可用的功能。所以我的问题是这是否值得尝试（手工交易管理等）？还是我应该使用嵌入式容器？我说的是集成测试（使用真实的内存数据库），而不是模拟周围的所有东西。

**编辑：**

还有一件事，因为我对在嵌入式容器中进行测试还很陌生。是否可以将例如 Mockito 的模拟作为 @EJB 依赖项注入到我的测试 bean 中？或者在这个设置中可能没有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:16:09.800

您可以使用 Java SE / JPA 测试很多东西。但是我们称之为集成测试的主要部分将需要大量的努力来模拟事物，而如果没有[Arquillian](http://arquillian.org/) 或类似的帮助，有些是无法实现的。您希望您的 EJB 事务功能/等包含在您测试的内容中吗？如果是这样，您必须在尽可能接近生产的事务环境中实施测试。我强烈建议使用 ejb-testing-framework。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:16:24.060

如果你想测试你的服务 bean，我认为一个好的方法是使用一些像 EasyMock 这样的模拟框架并模拟实体管理器，所以在这种情况下，你只测试你想要的代码，而不是整个代码。

您只需要向会话 bean 添加两个构造函数，一个是默认构造函数，一个具有它需要的依赖项，这样您就可以在那里提供模拟对象。

希望能帮助到你。

# c# - 从 xaml 获取输入参数并通过 MVC3 将其与 WF 4 中的动态活动一起使用

> ID：10805835
> 
> 赞同：0
> 
> 时间：2012-05-29T19:59:31.990
> 
> 标签：c#, asp.net, asp.net-mvc-3, workflow-foundation-4, workflow-activity

我正在尝试制作一个可以在 xaml 中重用的本机 Activity，它基本上复制了 WF3.x 中 PolicyActivity 的功能，WF3.x 是一个带有 GUI 来编辑规则的规则引擎。

我的问题是，当我调用 时`WorkflowInvoker.Invoke`，它说 Model，即 is `InArgument`，`Null`我知道这不是因为这段代码作为一个返回 Activity 的函数工作，就像它在 Frode Nilsen 的博客中所做的那样： [Using WF 4 as a Rules Engine](http://www.nilzorblog.com/2011/11/using-wf4-as-rule-engine.html) My问题是，我`InArgument`是否从 Xaml 活动中获得了正确的信息？

```
 public sealed class RuleSequenceAcitvity : NativeActivity<Sequence>
{
    private Sequence _sequence;
    InArgument<HomeIndexViewModel> Model { get; set; } //Same name as inArgument in xaml

    protected override void Execute(NativeActivityContext context)
    {
        populateSequence();
        var input = new Dictionary<string, object>();
        //The following line is giving me the Null Argument Exception
        var model = context.GetValue<HomeIndexViewModel>(this.Model);
        input.Add("Model", model);
        WorkflowInvoker.Invoke(_sequence, input);

    }

    private void populateSequence()
    {
        //get the list of rules from repository
        var rules = ObjectFactory.Container.GetInstance<IRuleRepository>().Rules.ToList();

        //Declare a dynamic property as the view model
        var inProperty = new DynamicActivityProperty
        {
            Name = "Model",
            Type = typeof(InArgument<HomeIndexViewModel>),
            Value = Model
        };
        var activity = new DynamicActivity() { Properties = { inProperty } };

        //Import references
        Common.AddVbSetting(activity);

        _sequence = new Sequence();
        activity.Implementation = () => _sequence;

        //Sort Descending - those added first are lowest priority
        var sortedRules = rules.OrderBy(x => x.Priority).ToList();

        foreach (var inRule in rules)
        {
            var outRule = RuleConverter.ToIfActivity(inRule);
            _sequence.Activities.Add(outRule);
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:39:19.040

您快到了。

首先，您必须将您的声明`InArgument<HomeIndexViewModel>`为公开。否则，调用该活动的任何一方都无法将其输入绑定到它。

`_sequence`其次，接收输入参数的不是你。这是您必须调用和传递参数的动态活动，而不是序列。

最后，您正确地创建了，`DynamicActivityProperty`但在这种情况下，您不需要设置它的值。当您`Workflow.Invoker()`使用名为的输入调用`"Model"`时，相同的输入将绑定到动态属性。

我刚刚编辑了你的代码，没有运行它。希望能帮助到你！:)

```
public sealed class RuleSequenceAcitvity : NativeActivity<Sequence>
{
    private DynamicActivity _dynamicActivity;
    public InArgument<HomeIndexViewModel> Model { get; set; }

    protected override void Execute(NativeActivityContext context)
    {
        populateDynamicActivity();

        var input = new Dictionary<string, object>();

        // It was throwing a null reference because Model
        // was private, so the input that the activity was receiving 
        // was never binded to it.

        var model = context.GetValue<HomeIndexViewModel>(this.Model);
        input.Add("Model", model);

        // It's the dynamic activity that contains input arguments.
        // Not the sequence. 

        WorkflowInvoker.Invoke(_dynamicActivity, input);
    }

    private void populateDynamicActivity()
    {
        //get the list of rules from repository
        var rules = 
            ObjectFactory
            .Container
            .GetInstance<IRuleRepository>()
            .Rules
            .ToList();

        //Declare a dynamic property as the view model
        var inProperty = new DynamicActivityProperty
        {
            Name = "Model",
            Type = typeof(InArgument<HomeIndexViewModel>)
        };

        _dynamicActivity = new DynamicActivity() 
        { 
            Properties = { inProperty } 
        };

        //Import references
        Common.AddVbSetting(activity);

        var sequence = new Sequence();
        activity.Implementation = () => sequence

        //Sort Descending - those added first are lowest priority
        var sortedRules = rules.OrderBy(x => x.Priority).ToList();

        foreach (var inRule in rules)
        {
            var outRule = RuleConverter.ToIfActivity(inRule);
            sequence.Activities.Add(outRule);
        }

    }
} 
```

# batch-file - 如何以管理员身份在非域工作组 Win XP 网络上远程执行批处理文件？

> ID：10805836
> 
> 赞同：0
> 
> 时间：2012-05-29T19:59:32.493
> 
> 标签：batch-file, remote-access, workgroup

我需要通过工作组 win XP 网络以管理员身份*远程执行批处理文件。*

有没有办法做到这一点？

我不想为此创建域 - 我只是在寻找标题中所述的解决方案！

如何以管理员身份通过非域工作组 Win XP 网络远程执行批处理文件？

我想做的原因是启用 WMI 服务并通过网络在防火墙中添加行！

谷歌搜索时，我找到了远程 shell，但我遇到了这个错误：

```
C:\>winrm quickconfig
WinRM already is set up to receive requests on this machine.
WSManFault
    Message = Access is denied.

Error number:  -2147024891 0x80070005
Access is denied. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:15:27.197

寻找 sysinternals psexec 工具

# java - 使用 CMD 脚本安装 Java

> ID：10805838
> 
> 赞同：3
> 
> 时间：2012-05-29T19:59:34.870
> 
> 标签：java, installation, cmd

我正在使用 Java 编写一个应用程序，我想将它发送给客户。但是他的计算机上没有 Java（OS Win XP）。我想使用命令外壳脚本自动安装。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:06:34.153

`/s`JRE 安装程序中有一个选项（请参见[此处](http://www.java.com/en/download/help/silent_install.xml)），所以基本上可以。但是，您必须以某种方式将 JRE 下载到客户端的工作站。我建议为此使用[wget 。](http://gnuwin32.sourceforge.net/packages/wget.htm)

但是，您也可以使用 java-to-exe 包装器 -例如，如果未安装 JRE，[JSmooth可以自动为您下载 JRE。](http://jsmooth.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:05:35.223

您可以在 bat 文件中制作它并使用可嵌入的 JVM 发布一个文件夹，但我发现使用 NSIS 非常有效地发布 Swing APPS。

[国家安全情报局](http://nsis.sourceforge.net/Main_Page)

我不确定，但我认为您也可以构建您想要的安装程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:14:28.977

Java 支持在 PC 上自动/静默命令行安装。看[这里](http://www.java.com/en/download/help/silent_install.xml)

您也可以使用批处理脚本来自动化一些任务......

[批处理文件](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T20:21:24.753

类型 ”/？” 文件夹中控制台中安装 exe 的参数是安装程序依赖的。

`C:\TEMP>jdk-7u4-windows-x64.exe /?`

您很快就会看到参数参考。/passive & /quiet 可能是你需要的，创建一个类似的 install.cmd

```
cls
C:\TEMP>jdk-7u4-windows-x64.exe /quiet
echo installation complete
pause 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-12T07:36:46.590

我使用了以下批次。我在理解参数时遇到了一点麻烦，但最后这对我有用，并且没有安装赞助商工具栏。

```
"@echo off 
copy "JavaSetup8u111.exe" "%USERPROFILE%\downloads\JavaSetup8u111.exe"
CD\
CD "%USERPROFILE%\downloads\"

start /B /WAIT JavaSetup8u111.exe /s SPONSORS=0 
```

# string - Z3 带字符串表达式

> ID：10805839
> 
> 赞同：2
> 
> 时间：2012-05-29T19:59:35.543
> 
> 标签：string, z3

我正在尝试使用 Z3 来确定表达式是否可以满足。我可以通过定义上下文然后定义 int_const 变量和公式轻松地做到这一点。要以编程方式评估表达式，您必须用代码编写所有内容。假设逻辑表达式以字符串的形式给出，那么呢？例如，

“x == y && !x == z”

将在 C API 中表示为：

```
context c;
expr x = c.int_const("x")
//Same for other variables
...
formula = (x == y) && (!x == z);
solver s(c);
s.add(formula);
//s.check() ...etc etc 
```

好的，我可以为这个特定的公式编写代码，但是如果给定一个字符串，我怎么能以编程方式做到这一点。我对你能想到的任何事情都持开放态度。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T05:56:04.067

我看到以下选项：

1）您可以实现自己的解析器，并调用 Z3 API 函数。优点：您可以使用您“最喜欢的”语言来编写公式。缺点：这是“忙碌”的工作。

2）你可以使用API `Z3_parse_smtlib2_string`​​。缺点：您的公式必须采用 SMT 2.0 格式。例如，您必须编写`(and (= x y) (not (= x y)))`而不是`(x == y) && !(x == z)`.

3）您可以使用Z3 Python API，并使用`eval`Python中的函数解析字符串。这是一个例子：

```
from z3 import *
# Creating x, y 
x = Int('x')
y = Int('y')

# Creating the formula using Python
f = And(x == y, Not(x == y))
print f

# Using eval to parse the string.
s = "And(x == y, Not(x == y))"
f2 = eval(s)
print f2 
```

[顺便说一句，这个脚本在rise4fun http://rise4fun.com/z3py](http://rise4fun.com/z3py)上不起作用，因为`eval`那里不允许使用该功能，但您可以在本地 Z3 安装中使用上面的脚本。

# php - 为什么在 PHP 中使用 PDO 而不是 MySQL？

> ID：10805843
> 
> 赞同：1
> 
> 时间：2012-05-29T20:00:10.457
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [mysqli 或 PDO - 优缺点是什么？](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)
> [PHP PDO 和 MySQLi](https://stackoverflow.com/questions/10703426/php-pdo-and-mysqli)

我最近问了一个[问题](https://stackoverflow.com/questions/10803187/php-code-not-writing-data-into-mysql)，导致人们告诉我在 MySQL 上使用“PDO”。这是为什么？它与其他相比有什么优势？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T20:06:04.810

`mysql_*`功能不再维护，社区已开始弃用[过程](http://news.php.net/php.internals/53799)。相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。

如果你不能决定，[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该可以帮助你选择。虽然，您应该知道，PDO 能够与不同类型的 RDBMS 一起工作，而 MySQLi 是为特定的 RDBMS 设计的。

如果您决定使用 PDO，建议您遵循[本教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:01:25.273

一方面， mysql_* 函数将被[弃用](http://news.php.net/php.internals/53799)。

其次，PDO 函数更易于使用，可以与非 MySQL 数据库一起使用。

另外值得注意的是，您不必使用 PDO，[mysqli](http://php.net/manual/en/book.mysqli.php)也可以！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:02:54.377

PDO 为您提供了访问各种数据库的统一方法。快速浏览一下 Internet 可能会有所帮助。

# python - 如何让 Python 函数在游戏的其余部分继续进行时休眠一段时间？

> ID：10805846
> 
> 赞同：2
> 
> 时间：2012-05-29T20:00:21.703
> 
> 标签：python, time, pygame, sleep

这是我尝试过的：

```
if len(wormCoords) > 2:
    time.sleep(4)
    del wormCoords[-1] 
```

但随后整个游戏（我正在做一个简单的“蛇”游戏）在移除蛇的最后一部分之前休眠 4 秒。计划是每 4 秒移除蛇的最后一部分，这样你就必须不断地吃苹果（当你这样做时，蛇会长一个），否则你会死（蛇会饿死）。

完整的代码可以在这里找到：http: [//inventwithpython.com/pygame/chapter6.html](http://inventwithpython.com/pygame/chapter6.html) 但我正在对其进行一些更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:22:32.133

正确的做法是在设置代码中使用它设置一个计时器事件（在行之后`HEAD = 0`）

```
SHRINKSNAKE = pygame.USEREVENT+0 
```

这在之后的`runGame`函数中`direction = RIGHT`

```
pygame.time.set_timer(SHRINKSNAKE, 4*1000) 
```

这在事件处理循环中`runGame`，在s 应该对齐的行`elif event.type == KEYDOWN:`之前`elif`

```
elif event.type == SHRINKSNAKE:
  if len(wormCoords) > 2:
    del wormCoords[-1] 
```

有关更多详细信息，请查看文档[`pygame.time.set_timer`](http://www.pygame.org/docs/ref/time.html#pygame.time.set_timer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:18:10.970

查看[pygame.time.set_timer](http://www.pygame.org/docs/ref/time.html#pygame.time.set_timer)函数。这允许您每隔几毫秒触发一个事件，您可以使用典型的事件处理机制来处理（就像您处理鼠标移动、键盘、绘图等一样）。阅读[pygame.event](http://www.pygame.org/docs/ref/event.html)文档以获取有关处理事件的更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T20:13:49.383

如果您不希望应用程序的其余部分在调用“睡眠”时暂停，则需要使用线程（请参阅[http://docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)）。由于“wormCoords”变量需要在线程之间共享，因此在更新它时需要格外小心以避免出现竞争条件。

# spring - 弹簧设置存储库

> ID：10805851
> 
> 赞同：0
> 
> 时间：2012-05-29T20:01:07.870
> 
> 标签：spring, inversion-of-control, containers, code-injection

我的许多应用程序属性由数据库提供，我想通过存储库注入它们。我想知道这是否适用于春天。如果有人可以提出解决方案，我会很高兴。我正在考虑的代码看起来像这样：

```
 @Component
    public class ExampleService implements Service {

        private PlatformSetting setting1;

        @Required
        @Qualifier("setting1")
        public void setSetting1(PlatformSetting setting1) {
            this.setting1 = setting1;
        }

        public String getMessage() {
            return "Hello world!" + setting1.getValue();    
        }

    }

    @Repository
    public class PlatformSettingRepository {

        private HashMap<String, PlatformSetting> settings;
        {
            settings = new HashMap<String, PlatformSetting>();
            settings.put("setting1", new PlatformSetting("bla1"));
            settings.put("setting2", new PlatformSetting("bla2"));

        }

        @Bean
        public PlatformSetting findSetting(@Qualifier String qual) {
            return settings.get(qual);
        }
    } 
```

我知道我可以将 PlatformSettingRepositoy 注入服务中进行查找。但我不想在调用时进行这些查找，我希望 spring 容器在启动时执行它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T04:45:29.820

PropertyPlaceholderConfigurer 结合 CommonsConfigurationFactory 是您的答案。请看一下[这篇](http://pure-essence.net/2011/02/10/spring-loading-properties-from-database-with-a-twist/)文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T14:58:44.090

使用 Spring 表达式语言。

第 1 步：使用 @Bean 公开您的设置 hashmap，让我们说 id="appSettings"

第 2 步：现在您要在其中注入设置 1，只需使用注释：

```
@Value("#{ appSettings['setting1'] }")
private PlatformSetting setting1; 
```

注意：这适用于普通值，它也应该适用于您的情况。虽然我没试过。如果这不起作用，您可以直接在您的方法中使用表达式解析器，因为您已经在使用 java config 方式来初始化 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T09:26:14.820

您可以使用[InitializingBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/InitializingBean.html)：

```
 @Component
 public class Config implements InitializingBean {

    /**
     * Used to hold app properties.
     */
     private Properties properties = new Properties();

     //Getters, setters and filling properties from where you need

     public void afterPropertiesSet() throws Exception {
         //Initialize some static properties of other objects here.
     }
} 
```

而不是将配置注入您的其他类。

# node.js - 无法使用 monggose 从 mongodb 集合中获取数据

> ID：10805852
> 
> 赞同：-1
> 
> 时间：2012-05-29T20:01:10.113
> 
> 标签：node.js, mongodb, mongoose

这是我的代码。

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var db = mongoose.connect('mongodb://localhost:27017/myDB');
var Docsession = mongoose.model('docsession', new Schema({ cookieval: String, secref: String, id: Number}));
Docsession.find({'cookieval' : 'umesh'},function(err,arr) {
console.log(arr);
console.log('length='+arr.length);
}); 
```

我的结果是没有返回值。不知道我是否以正确的方式使用 find 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:25:34.680

似乎您没有填充数据库

```
 var umesh = new Docsession({ cookieval: 'umesh', secref: 'abcd', id: 100 });
  umesh.save(function (err) {
     if (err)
        console.log('Error');
  })
  Docsession.find({'cookieval' : 'umesh'} ,function(err,arr) {
  console.log(arr);
  console.log('length='+arr.length);
  }) 
```

将返回

```
 [ { cookieval: 'umesh',
     secref: 'abcd',
     id: 100,
     _id: 4fc5924c5bfd08db61000001 } ]
  length=1 
```

# ninject - Ninject.MVC3 到 NinjectWebCommon.cs 的路径无效

> ID：10805853
> 
> 赞同：3
> 
> 时间：2012-05-29T20:01:11.827
> 
> 标签：ninject, ninject.web.mvc, ninject-extensions

我在我的应用程序中使用了 Ninject.MVC3，它一直运行良好，直到我决定重命名我的解决方案/项目。一切都已正确重命名，所有测试都通过等等。不起作用的一件事是生成的`NinjectWebCommon`类。

这一行：

`bootstrapper.Initialize(CreateKernel);`

抛出此异常：

`System.InvalidOperationException: Sequence contains no elements`

当我查看“黄屏死机”时，我发现源文件`NinjectWebCommon.cs`完全错误。这是在项目重命名之前准确的路径。

我检查了 .proj 文件中的所有路径，但没有发现任何错误。我还尝试丢弃 app_start 文件夹并重新安装 nuget 包。

有什么建议么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:44:31.170

最后通过清除网站缓存解决了这个问题：

`%LocalAppData%\Microsoft\WebsiteCache`

# php - 网站多文件上传

> ID：10805854
> 
> 赞同：0
> 
> 时间：2012-05-29T20:01:11.800
> 
> 标签：php, html, file-upload

嗨，我对 Web 开发很陌生，但有编码背景。我正在尝试为我正在创建的表单创建一个非常简单的多文件上传器，但是我一生都无法让它工作。我遵循了我在网上找到的教程，这是我到目前为止所拥有的。我得到了嗯回声哈

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  dir="ltr">
<head>
<meta content="text/html; charset=ISO-8859-1"
http-equiv="content-type">
<title></title>
</head>
<body>
<form method="post" action="upload.php" enctype="multipart/form-data">
  <input name="filesToUpload[]" id="filesToUpload" type="file" multiple="" onChange="makeFileList();" />
<input id="saveForm" class="button_text" type="submit" name="submit" value="Submit" />
</form>
    <p>
        <strong>Files You Selected:</strong>
    </p>
    <ul id="fileList"><li>No Files Selected</li></ul>

    <script type="text/javascript">
        function makeFileList() {
            var input = document.getElementById("filesToUpload");
            var ul = document.getElementById("fileList");
            while (ul.hasChildNodes()) {
                ul.removeChild(ul.firstChild);
            }
            for (var i = 0; i < input.files.length; i++) {
                var li = document.createElement("li");
                li.innerHTML = input.files[i].name;
                ul.appendChild(li);
            }
            if(!ul.hasChildNodes()) {
                var li = document.createElement("li");
                li.innerHTML = 'No Files Selected';
                ul.appendChild(li);
            }
        }
    </script>
</body>
</html> 
```

**PHP**

```
<?PHP
if(count($_FILES['uploads']['filesToUpload'])) {
  foreach ($_FILES['uploads']['filesToUpload'] as $file) {
    move_uploaded_file($file, "uploads/" . "sample.png" );
  }
}else{
echo "hmm";
}
?> 
```

**编辑**

好的，我将 php 文件更新为此，最初有一个回显，其中正确回显了我的文件但是我无法进行实际上传，现在我只想将文件添加到我已经设置权限的上传目录使用 filezilla 为 777 并希望保持文件的相同名称

```
<?PHP
if(count($_FILES['filesToUpload']['name'])) {
  foreach ($_FILES['filesToUpload']['name'] as $file) {
    move_uploaded_file($file, "uploads/" . $file );
  }
}else{
}
?> 
```

非常感谢您迄今为止的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:22:46.800

你的代码

```
 count($_FILES['uploads']['filesToUpload']) 
```

将始终返回零，因为该元素实际上并不存在于 $_FILES 数组中。

如果发生错误（仅在测试中），“print_r()”您的 $_FILES 数组可能会更有帮助。这是多文件上传语法的示例。

```
 Array
    (
        [filesToUpload] => Array
            (
                [name] => Array
                    (
                        [0] => test.txt
                        [1] => test - Copy.txt
                    )

                [type] => Array
                    (
                        [0] => text/plain
                        [1] => text/plain
                    )

                [tmp_name] => Array
                    (
                        [0] => C:\xampp\tmp\php3770.tmp
                        [1] => C:\xampp\tmp\php3771.tmp
                    )

                [error] => Array
                    (
                        [0] => 0
                        [1] => 0
                    )

                [size] => Array
                    (
                        [0] => 0
                        [1] => 0
                    )

            )

    ) 
```

使用 count($_FILES['filesToUpload']['name']) 应该是您脚本的修复方法。

**编辑**

使用您的代码

```
 if(count($_FILES['filesToUpload']['name'])) {
      foreach ($_FILES['filesToUpload']['name'] as $file) {
        move_uploaded_file($file, "uploads/" . $file );
      }
    } 
```

您正在发送名称（['name']（这是一个数组元素）作为 $file），它不会翻译，因为 move_uploaded_file() 正在寻找上传文件的 tmpname（或文件路径）。你可以改变你所拥有的。

```
 if(count($_FILES['filesToUpload']['name'])) {
      foreach ($_FILES['filesToUpload']['tmp_name'] as $ref => $fullfilename) {
        move_uploaded_file($fullfilename, "uploads/" . $_FILES['filesToUpload']['name'][$ref] );
      }
    } 
```

这会让你进入球场，但我不得不提到，有更好的方法来处理这个问题。我将尝试发布一个用于多文件上传的课程（或在 Google 上找到一个）并将其链接到此页面上的评论。但是上面的内容应该（至少）让你得到你想要的东西。

# jquery - 检测用户何时在输入框中擦除

> ID：10805857
> 
> 赞同：1
> 
> 时间：2012-05-29T20:01:43.407
> 
> 标签：jquery, input, keypress

下面是我的代码，它可以防止用户在输入框中输入超过 10 个字符，并为用户提供剩余多少字符的信息。

问题在于，如果用户正在擦除他输入的内容（一个或多个字符），则字符数不会更新。

所以，我的问题是：如何检测用户是否在输入框中擦除？

提前致谢！

```
 $('.imageTitle').keypress(function(e) {

        var value = $(this).val(),
            valueLength = value.length,
            set = 10,
            remain = parseInt(set - valueLength);

        if (remain <= 0 && e.which !== 0 && e.charCode !== 0) {
            $('.imageTitle').val((value).substring(0, valueLength - 1))
        }

        $('#titleCharsLeft').html('&nbsp' + remain);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:08:47.230

如果我没记错的话你不需要任何特殊的机制来检测擦除你可以用简单的`$.keyup`. 使用以下代码。它会更新剩余的字符，例如 Twitter，但您也可以对其进行修改以计算总字符数。

```
$("input[maxlength]").each(function() {
    var $this = $(this);
    var maxLength = parseInt($this.attr('maxlength'));
    $this.attr('maxlength', null);

    var el = $("<span class=\"character-count\">" + maxLength + "</span>");
    el.insertAfter($this);

    $this.bind('keyup', function() {
        var cc = $this.val().length;

        el.text(maxLength - cc);

        if(maxLength < cc) {
            el.css('color', 'red');
        } else {
            el.css('color', null);
        }
    });
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/Gza57/)

这是一个通用的，应该让你开始。修改它以满足您的需要。

**更新**

您甚至可以在支持`input`粘贴、长按键或拖动等事件的浏览器上添加对事件的支持。像这样

```
var maxLength = 100;
var supportOnInput = 'oninput' in document.createElement('input');
$('.imageTitle').on(supportOnInput ? 'input' : 'keyup',function(){
    var cc = $(this).val().length;

        $('#titleCharsLeft').text(maxLength - cc);

        if(maxLength < cc) {
            $('#titleCharsLeft').css('color', 'red');
        } else {
            $('#titleCharsLeft').css('color', 'black');
        }
});
​ 
```

[修改 Fiddle](http://jsfiddle.net/joycse06/FD66Z/4/)以更适合您的需要。

参考：[oninput](https://developer.mozilla.org/en/DOM/window.oninput)或[this](http://help.dottoro.com/ljhxklln.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:12:18.457

只需使用退格键的键码。

退格键码为 50。

您的代码如下所示。

```
$('.imageTitle').keyup(function(e) {

     var code = (e.keyCode ? e.keyCode : e.which);
     if(code == 50) { //backspace keycode
              //Do something
      }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:18:14.897

这对你有用吗？

我更改`keypress`并删除了语句`keydown`中的一些条件：`if`

```
$('.imageTitle').keydown(function(e) {

    var value = $(this).val(),
        valueLength = value.length,
        set = 10,
        remain = parseInt(set - valueLength);

    if (remain <= 0) {
        $('.imageTitle').val((value).substring(0, set-1))
    }

    $('#titleCharsLeft').html('&nbsp' + remain);
});​ 
```

[**演示**](http://jsfiddle.net/Nasuc/1/)

# jquery - Internet Explorer 中的“SCRIPT5009：'handleResponse' 未定义”

> ID：10805860
> 
> 赞同：3
> 
> 时间：2012-05-29T20:02:05.107
> 
> 标签：jquery, ajax, internet-explorer, exacttarget

有谁知道为什么这在 IE 中不起作用？

我的代码如下：

```
var xmlDocument = encodeURI('https://api.dc1.exacttarget.com/integrate.aspx?qf=xml&xml=<?xml version="1.0" ?><exacttarget><authorization><username>EXCATTARGET-USER</username><password>EXCATTARGET-PASS</password></authorization><system><system_name>subscriber</system_name><action>add</action><search_type>listid</search_type><search_value>17571300</search_value><search_value2></search_value2><values><Email__Address>test21@email.com</Email__Address><status>active</status><Full__Name></Full__Name><ChannelMemberID></ChannelMemberID></values><update>true</update></system></exacttarget>');

$('.triggerAjax').click(function() {

    $.ajax({
          type: 'POST',
          url: xmlDocument,
          dataType: 'jsonp'
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:07:47.763

我在IE9中遇到了同样的问题。您可能有默认的 jQuery ajax 缓存设置...（默认情况下是打开的）。

尝试在页面 javascript 的开头将 ajax 设置的缓存设置为 false：

```
$(document).ready(function() {
    $.ajaxSetup({ cache: false });
    // your other initialization work goes here...
} 
```

我昨天遇到了同样的问题，这为我解决了。希望这可以帮助。

如需进一步阅读，请查看此链接：[http ://www.peteonsoftware.com/index.php/2010/08/20/the-importance-of-jquery-ajaxsetup-cache/](http://www.peteonsoftware.com/index.php/2010/08/20/the-importance-of-jquery-ajaxsetup-cache/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:04:16.857

`SCRIPT5009: 'handleResponse' is undefined`消息是没有为事件提供回调函数的结果`success`。您需要提供一个可执行的方法，如下所示：

```
$.ajax({
    url: "http://api.dc1.exacttarget.com/integrate.aspx",
    data: { qf:'xml', xml:xmlDocument },
    dataType: "xml",
    success: function ( data ) {
        alert( data );
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:59:32.463

```
var xmlDocument = encodeURI('https://api.dc1.exacttarget.com/integrate.aspx?qf=xml&xml=<?xml version="1.0" ?><exacttarget><authorization><username>EXCATTARGET-USER</username><password>EXCATTARGET-PASS</password></authorization><system><system_name>subscriber</system_name><action>add</action><search_type>listid</search_type><search_value>17571300</search_value><search_value2></search_value2><values><Email__Address>test21@email.com</Email__Address><status>active</status><Full__Name></Full__Name><ChannelMemberID></ChannelMemberID></values><update>true</update></system></exacttarget>');

$('.triggerAjax').click(function() {

    $.ajax({
          type: 'POST',
          url: xmlDocument,
          dataType: 'jsonp'
        });
}); 
```

# javascript - ajax oop 结果控制器

> ID：10805864
> 
> 赞同：0
> 
> 时间：2012-05-29T20:02:25.997
> 
> 标签：javascript, ajax

我已经在 javascript 中编写了 ajax oop 脚本以进行注册。这是脚本=>

```
function AjaxConstruct(method,file,params){
    this.method = method;
    this.file   = file;
    this.params = params;
    this.http   = false;
}

AjaxConstruct.prototype.ajax = function(){
    if (window.XMLHttpRequest){
        this.http = new XMLHttpRequest();
    } else {
        this.http = new ActiveXObject("Microsoft.XMLXHTTP");
    }
    if (this.http){
        this.http.open(this.method,this.file,true);
        if (this.method==="POST"){
             this.http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        }
    this.http.send(this.params);
    this.http.onreadystatechange = function(){
        if (this.http.readyState==4 && this.http.status==200){
            alert("ok");
        } else {
            alert("no");
        }
    };

}
}; 
```

并创建这样的对象=>

```
var ajax = new AjaxConstruct("POST","filename","params"); // define object
ajax.ajax(); // invoke method 
```

一切都运行良好，但我只想知道如何在 oop 脚本中标记结果是否正常？而且我对使用 ajax 发送多少数据很常见或没关系感兴趣？例如，我正在尝试从七个输入表单向 mysql 数据库发送数据，在使用这样的 ajax 脚本发送期间是否有可能丢失数据？谢谢 ：）

我已经猜到错误并在上面的脚本中更正了，谢谢伙计:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:06:45.557

```
function AjaxConstruct(method,file,params,okcallback,notokcallback){
    this.method = method;
    this.file   = file;
    this.params = params;
    this.http   = false;
    this.okresp = okcallback;
    this.notokresp = notokcallback;
}

AjaxConstruct.prototype.ajax = function(){
    if (window.XMLHttpRequest){
        this.http = new XMLHttpRequest();
    } else {
        this.http = new ActiveXObject("Microsoft.XMLXHTTP");
    }
    if (this.http){
        this.http.open(this.method,this.file,true);
        if (this.method==="POST"){
             this.http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        }
    this.http.onreadystatechange = function(){
        if (this.http.readyState==4 && this.http.status==200) {
            this.okresp(this.http.responseText, this.http.responseXML);
        } else {
            this.notokresp(this.http.responseText, this.http.responseXML);
        }
    };
    this.http.send(this.params);
}
}; 
```

当您调用 ajaxconstruct 时，传递 2 个新参数，如下所示：

```
function myokfunction(I_sResponseText, I_oResponseXML) { /* your ok code here */}
function mynotokfunction(I_sResponseText, I_oResponseXML) { /* your not ok code here */}

var ajax = new AjaxConstruct("POST","filename","params", myokfunction, mynotokfunction); 
```

关于您对数据量的关注，我认为 GET 会根据浏览器地址栏限制限制您，而 POST 不会。但是，这更多的是您应该问自己的http服务器开销问题。

# plot - 如何在 gnuplot 中为 xticlabels 提供自定义字符串参数？

> ID：10805866
> 
> 赞同：1
> 
> 时间：2012-05-29T20:02:27.137
> 
> 标签：plot, gnuplot

假设我有一个包含三列的数据文件。我希望能够更改 x 轴标签。经过一番谷歌搜索后，我发现`xticlabels()`但问题是它似乎只将列号作为参数。`xticlabels(3)`对于用第三列标记的标签进行绘图。

我希望能够把类似的东西`$1+$2`作为这个函数的参数，即标签应该是 column1 和 column2 的串联。

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:10:58.213

你用awk...

```
plot "<awk '{print $1,$2,$1 $2}' datafile" u 1:2:xticlabels(3) 
```

当然，这是一个愚蠢的例子，因为我们要连接 2 个（数字）字段来创建标签——这可能是您想要的，但它展示了如何在 awk 中连接两个字段（作为字符串），这就是全部你需要。

或者，您可以使用以下一些变体来哄 gnuplot 执行此操作（**未经测试）：**

```
plot 'datafile' u 1:2:( xticlabels( stringcolumn(1).stringcolumn(2) ) ) 
```

# php - 查询结果：$row[0] 是什么

> ID：10805871
> 
> 赞同：1
> 
> 时间：2012-05-29T20:02:41.653
> 
> 标签：php

我知道这听起来像是一个编程新手提出的愚蠢问题，但我只是想确保我理解正确。

查询后，`$row[0]`代表/结果是什么？

我的理解是否正确，`$row[0]`显示了所有结果？

以下是示例：

```
$query = "SELECT count(commentid) from comments where jokeid = $jokeid";

$result = mysql_query($query);

$row=mysql_fetch_array($result);

if ($row[0] == 0)

{

   echo "No comments posted yet.&nbsp;&nbsp;\n";

} else

{

   echo $row[0] . "\n";
   echo "&nbsp;comments posted.&nbsp;&nbsp;\n"; 
```

和这个

```
$query = "Select count(prodid) from products where catid = $catid";
      $result = mysql_query($query);
      $row = mysql_fetch_array($result);
      if ($row[0] == 0)
      {
         echo "<h2><br>Sorry, there are no products in this category</h2>\n";
      }
      else
      {
         $totrecords = $row[0]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:06:20.090

`$row[0]`将简单地回显数据库中的第一列。

0 是第一个，因为 PHP（以及大多数编程语言）中的所有数组都是从零开始的——它们只是从零开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:04:59.163

$row[0] 将是结果中第一列的值。如果你使用[mysql_fetch_assoc($result](http://php.net/manual/en/function.mysql-fetch-assoc.php) ) 你将有一个数组形式：

```
array(column_name => column_value); 
```

例如

```
$row = mysql_fetch_asssoc($result);
$value_column_1 = $row['column_1']; 
```

您还可以使用[mysql_fetch_object($result)](http://php.net/manual/en/function.mysql-fetch-object.php)来获取以列名作为参数的对象。

```
$row = mysql_fetch_object($result);
$value = $row->column_name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T20:06:13.070

`mysql_fetch_array()`从结果集中取出下一行（在您的示例中为第一行）并将数据存储在 array`$row`中。

`$row[0]`现在代表该行的第一个值。

因此，在您的示例中，该变量总共保存了结果集第一行的第一个值。

# performance - 字符串缓冲区的性能作为附加数量的函数

> ID：10805872
> 
> 赞同：3
> 
> 时间：2012-05-29T20:02:43.130
> 
> 标签：performance, string-concatenation

我最近听说有一个最佳点，使用字符串缓冲区不再提供比简单连接更好的性能。显然，这是通过附加元素的数量来衡量的（大约 6 个）。

这是真的？

# javascript - 从javascript数组中删除字符串元素

> ID：10805874
> 
> 赞同：10
> 
> 时间：2012-05-29T20:02:45.573
> 
> 标签：javascript, jquery, arrays

有人可以告诉我如何从数组中删除字符串元素我有谷歌这个，我得到的只是按索引号删除

我的例子：

```
 var myarray = ["xyz" , "abc" , "def"] ; 
 var removeMe = "abc" ; 

  myarray.remove(removeMe) ; 
  consle.log(myarray) ; 
```

这是我从控制台得到的：

```
Uncaught TypeError: Object xyz,abc,def has no method 'remove' 
```

[jsfiddle](http://jsfiddle.net/mTuys/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T20:08:26.837

由于您使用的是 jQuery

`myarray.splice($.inArray("abc", myarray), 1);`

**编辑** 如果该项目不在数组中，则此“单行”可能会引发错误。稍微好一点的东西

```
var index = $.inArray("abc", myarray);
if (index>=0) myarray.splice(index, 1); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T20:06:44.750

来自[https://stackoverflow.com/a/3955096/711129](https://stackoverflow.com/a/3955096/711129)：

```
Array.prototype.remove= function(){
    var what, a= arguments, L= a.length, ax;
    while(L && this.length){
        what= a[--L];
        while((ax= this.indexOf(what))!= -1){
            this.splice(ax, 1);
        }
    }
    return this;
}
var ary = ['three', 'seven', 'eleven'];

ary.remove('seven') 
```

或者，使它成为一个全局函数：

```
function removeA(arr){
var what, a= arguments, L= a.length, ax;
while(L> 1 && arr.length){
    what= a[--L];
    while((ax= arr.indexOf(what))!= -1){
        arr.splice(ax, 1);
    }
}
return arr;
}
var ary= ['three','seven','eleven'];
removeA(ary,'seven') 
```

* * *

你必须自己做一个功能。您可以遍历数组并从那里删除元素，或者让这个函数为您完成。无论哪种方式，它都不是标准的 JS 功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-29T20:08:05.073

尝试如下，

```
myarray.splice(myarray.indexOf(removeMe),1); 
```

您可以为不支持 indexOf 的浏览器添加以下脚本（[来自 MDN ）](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)

```
if (!Array.prototype.indexOf) {  
    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {  
        "use strict";  
        if (this == null) {  
            throw new TypeError();  
        }  
        var t = Object(this);  
        var len = t.length >>> 0;  
        if (len === 0) {  
            return -1;  
        }  
        var n = 0;  
        if (arguments.length > 0) {  
            n = Number(arguments[1]);  
            if (n != n) { // shortcut for verifying if it's NaN  
                n = 0;  
            } else if (n != 0 && n != Infinity && n != -Infinity) {  
                n = (n > 0 || -1) * Math.floor(Math.abs(n));  
            }  
        }  
        if (n >= len) {  
            return -1;  
        }  
        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);  
        for (; k < len; k++) {  
            if (k in t && t[k] === searchElement) {  
                return k;  
            }  
        }  
        return -1;  
    }  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-30T02:47:27.103

更简单的解决方案

```
var myarray = ["xyz" , "abc" , "def"]; 
var removeMe = "abc";

var theNewArray = myarray.filter(s => s !== removeMe);

console.log(theNewArray); // will return ["xyz" , "def"] 
```

# c - 关于选择我的函数版本的 C 编程

> ID：10805875
> 
> 赞同：0
> 
> 时间：2012-05-29T20:02:48.630
> 
> 标签：c

在函数 main() {...}

1）#include头文件string.h

2）我对自己的文件进行原型制作，称之为strcpy：

```
**char *strcpy(char *strSource , const char *dest);** 
```

3) 我还希望在 main() 的 string.h 中使用“真正的” *strlen*函数。

4）在另一个编译文件中，我有我的 strcpy 版本。

问题：如何让链接器选择我的 strcpy 版本而不是 string.h 中的原型？

```
enter code here
#include <conio.h>
#include <string.h>
char *strcpy(char *source , const char *dest); 
void main()
{
char *s, *d;
strcpy(s,d);
getch();
}

#include <stdio.h>
char *strcpy(char *strDestination, const char *strSource)
{
char *ptr;
printf("made it!");
return ptr;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:52:34.537

你不能在 C 中做到这一点。这就是 C++ 引入*命名空间*的原因之一。

您唯一能做的就是为您自己的函数使用一个不冲突的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:54:19.507

这不是一个标准的事情，我很确定如果你能做到，你将不得不阅读你的链接器的手册。如果您尝试移植它，您将需要阅读您尝试移植到的每个平台的每个链接器的手册。

更常用的做法是用自己的名字编写自己的函数。如果您需要挂钩标准库中的功能，您将获得该库的源代码并构建您自己的版本。

# firefox - DOMContentLoaded 事件停止被触发。为什么？

> ID：10805876
> 
> 赞同：0
> 
> 时间：2012-05-29T20:02:52.403
> 
> 标签：firefox, firefox-addon

好吧，我正在开发一个 firefox 插件，它会自动重新加载一组给定的 url，并进行一些修改。它不可能显示整个代码。所以，我只是复制粘贴给我错误的代码部分。

假设该`DOMContentLoaded`事件会在页面加载的所有内容中触发，并且它会正确执行。问题是，如果我打开一个新选项卡，则`DOMContentLoaded`不会在旧选项卡中触发事件。

```
//Any code here runs only for the first time u start the browser
window.addEventListener("load", function() { myExtension.init(); }, false);

var myExtension = { 
init: function()    
{
            var appcontent = document.getElementById("appcontent");
            if(appcontent)
            appcontent.addEventListener("DOMContentLoaded", myExtension.onPageLoad, true);
},

onPageLoad: function(aEvent)
{

    var doc = aEvent.originalTarget; // doc is document triggered "onload" event
    //execute on one the top page (not on iframes)
        if ((aEvent.originalTarget.nodeName == '#document') && (aEvent.originalTarget.defaultView.location.href == gBrowser.currentURI.spec)) 
        {setTimeout(function(){showInError(doc.location='about:home'}, 500);}  
},
} 
```

我想用简单的方式来写问题（对不起我的英语不好）

1）我运行firefox，并且标签（比如标签号1）根据我的需要不断重新加载。

2）如果我保持页面不间断（这就是它想要的），则标签 1 页面会继续重复加载

3）如果我打开一个新标签（比如标签号 2），新标签（标签号 2）开始按照我的意愿不断重新加载。但是，标签号。1 停止重新加载。

我想要的是继续重新加载标签号 1 和标签号。2\. 怎么做？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:28:23.317

看起来您仅在当前显示的页面（活动选项卡）上执行脚本。

如果要在其他选项卡上执行它，则应在打开新选项卡时将事件侦听器附加到新选项卡（并且在关闭选项卡时不要忘记将其删除）。您可以在此页面获取此功能的有用片段：

[https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads#WebProgressListeners](https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads#WebProgressListeners)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:23:24.143

尝试使用 gBrowser 而不是 document.getElementById("appcontent");

```
gBrowser.addEventListener("DOMContentLoaded", myExtension.onPageLoad, true); 
```

[https://developer.mozilla.org/en/Code_snippets/On_page_load#Basic_onPageLoad_for_a_browser_window](https://developer.mozilla.org/en/Code_snippets/On_page_load#Basic_onPageLoad_for_a_browser_window)

# regex - 忽略 Lua 中的某个模式（garry's mod lua 5.1）

> ID：10805886
> 
> 赞同：0
> 
> 时间：2012-05-29T20:03:33.823
> 
> 标签：regex, lua

**用 mysql 数据库的 php 转储和 15 行 lua 找到了一种新方法，没有找到模式。Mod可以删除这个。**

我试图把它分成表格的不同部分，但我不知道如何制作一个模式来忽略特定的东西。

```
local output = "<tr><td>ABAH</td><td>A Basic Anti Hack</td><td><a href=\"mailto:email@hotmail.de\">Clark</a></td><td><a href=\"plugins/12/sv_abah.lua\">Download</a>"

for plugin in output:gmatch("<tr>(.-%S)Download</a>") do 
    --print( plugin ) 
    for title in plugin:gmatch("<td>(.-%S)</td><td>") do 
        print(title)
    end
    for description in plugin:gmatch("</td><td>(.-%S)</t") do 
        print(description)
    end
 end 
```

到目前为止它输出了标题和描述，还输出了邮件链接，我怎样才能让它忽略呢？

输出：

```
 1.ABAH
 2.<a href="mailto:email@hotmail.de">Clark</a>
 3.A Basic Anti Hack 
```

我使用[http://codepad.org/XQ6rZ6ZM](http://codepad.org/XQ6rZ6ZM)进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:25:35.747

是否有某些原因不能简单地应用另一种模式来清除 HTML，例如：

```
local output = "<tr><td>ABAH</td><td>A Basic Anti Hack</td><td><a href=\"mailto:mirkoiz@hotmail.de\">Clark</a></td><td><a href=\"plugins/12/sv_abah.lua\">Download</a>"

for plugin in output:gmatch("<tr>(.-%S)Download</a>") do 

        for title in plugin:gmatch("<td>(.-%S)</td><td>") do             
        title= title:gsub('<.->','')  
        print(title)
        end
        for description in plugin:gmatch("</td><td>(.-%S)</t") do 
        description = description:gsub('<.->','')     
        print('description)
        end

end 
```

# ruby - 在 ruby 中连接多个数组

> ID：10805887
> 
> 赞同：1
> 
> 时间：2012-05-29T20:03:40.310
> 
> 标签：ruby

我正在尝试制作一个接受嵌套数组的方法。从该嵌套数组中，我需要返回子数组可以进行的所有可能组合。我已经为此工作了几个小时，但我仍然无法让它工作。

这就像将 sub_array 的每个元素与来自其他 sub_arrays 的每个元素连接起来。

例子：

```
mega_array = [["a","b"],["c","d"],["e","f"]]

my_method(mega_array)

=> ["ace","acf","ade","adf","bce","bcf","bde","bdf"] 
```

这将通过以下代码完成：

```
mega_array[0].each do |first|
    mega_array[1].each do |second|
        mega_array[2].each do |third|
            puts first + second + third
        end
    end
end 
```

不幸的是，子阵列的数量可能会有所不同。这就是我卡住的地方。尝试做一些递归技术，但我仍然不正确。

帮助将不胜感激。我需要使用 Leopard 及更高版本附带的香草 Ruby 来完成这项工作。这是1.8.7，对吧？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:08:41.030

```
>> mega_array[0].product(*mega_array[1..-1]).map(&:join)
=> ["ace", "acf", "ade", "adf", "bce", "bcf", "bde", "bdf"] 
```

# cocoa - 使用自动布局自动增长 NSScrollView 的文档视图？

> ID：10805890
> 
> 赞同：16
> 
> 时间：2012-05-29T20:03:57.740
> 
> 标签：cocoa, resize, nsscrollview, autolayout

使用自动布局时，是否有一种简单的方法可以`NSScrollView`适应其文档视图更改大小？

我试图同时调用`setNeedsUpdateConstraints:`文档`setNeedsLayout:`视图、剪辑视图和滚动视图，但没有任何结果。

`fittingSize`的文档视图报告正确的大小。

问题是包含子视图的文档视图在子视图更改其大小时不会重新调整大小，即使它们调用`invalidateIntrinsicContentSize`. 因此，随着文档视图的增长，文档视图的内容会被裁剪为文档视图的原始大小。文档视图在 nib 中创建，并在方法中设置为滚动视图的文档视图`awakeFromBib`。

我希望文档视图框架在其`fittingSize`更改时会自动调整，并相应地更新滚动条。

`NSPopover`做类似的事情——前提是内容控制器视图的子视图的约束设置正确，并且各种内容拥抱值足够高（例如，高于隐藏弹出窗口的高约束优先级）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T09:53:06.750

问题当然是在添加文档视图时，Cocoa 会自动在文档视图插入的视图，即剪辑视图中创建一些硬约束。

所以我自己的问题的答案很简单，只需使用：

```
// Assume self.docView is an IBOutlet populated with
// an NSView subclass
self.docView.translatesAutoresizingMaskIntoConstraints = NO; 
```

在将文档视图添加到滚动视图之前：

```
self.scrollView.documentView = self.docView; 
```

现在，由于剪辑视图中文档视图的布局没有自动生成的约束，因此您需要显式添加它们。否则，文档视图的内容将在滚动视图的左上角以其固有大小呈现。

# javascript - 在js ajax函数中停止html提交按钮

> ID：10805891
> 
> 赞同：1
> 
> 时间：2012-05-29T20:04:02.673
> 
> 标签：javascript, ajax, button, xmlhttprequest, submit

我想停止 js 函数 checkUni() 中的提交按钮

通常在 js 中你可以只返回 false，但在我的情况下它不起作用，因为它是一个异步 (ajax) 函数，所以外部函数将在内部函数能够确定返回 false 或 true 之前返回。

这是js函数：

```
function checkUni() {
 var URL = "http://localhost:8080/GradSchoolApp/test.jsp";
  var container = document.getElementById("container_ID"); //destination of returned data
  var request = false;

  if (window.XMLHttpRequest) {
    request = new XMLHttpRequest();
  }
  else if (window.ActiveXObject) {
    try {
        request = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try {
            request = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
        }
    }
  }
  request.open("GET", URL, true);

  request.onreadystatechange = function() { 
    if (request.readyState == 4) {
        //SOME CODE
                    //IF <something> then STOP SUBMIT BUTTON
        container.innerHTML = request.responseText;
    }
  }
  request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:10:04.173

只需在 onclick 侦听器中返回 false。

```
<input type="submit" onclick="checkUni(); return false;"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:11:09.377

您可以将表单元素的操作设置为“#”，这将具有相同的效果。

# php - 如何在不正确重新加载整个页面的情况下更改网页的一部分？

> ID：10805892
> 
> 赞同：0
> 
> 时间：2012-05-29T20:04:03.563
> 
> 标签：php, javascript, jquery, html, ajax

我试图调用 javascript 的函数来使用导航栏更改 php 页面，而无需重新加载整个页面，但我所经历的关闭是我成功地使用按钮命令做到了这一点，但页面内的 javascript 是关机，我做错了什么？

```
<script src="js/jquery.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/jquery-1.6.2.min.js"></script>

 <script>
$(document).ready(function() {
$("#accordion").accordion();
$('#button_1, #button_2, #button_3, #button_4').click(function(){
                var which_to_load = ( $(this).attr('id')+"" ).replace('button_', ''),
                source_of_file = 'content'+which_to_load+'.php';
                $('#content_box').load( source_of_file );
                return false;
            });
});
     </script> 
```

链接部分：

```
<div id="content_changing_buttons">
     <form method="get" id="change_content_buttons" action="">
       <p>
        <li><input value="1" type="submit" id="button_1" name="page" /> Reggiani presents at frankfurt Light + Build 2012</a><br/><br /></li>
        <li><input value="2" type="submit" id="button_2" name="page" /> Reggiani presents at frankfurt Light + Build 2012</a><br/><br /></li>
        <li><input value="3" type="submit" id="button_3" name="page" /> Reggiani presents at frankfurt Light + Build 2012<br/><br /></li>
        <li><input value="4" type="submit" id="button_4" name="page" /> Reggiani presents at frankfurt Light + Build 2012<br/><br /></li>
       </p>
    </form>
    </div> 
```

和内容部分：

```
 // default number of page to load
        $defaultPageNumber = '2';
        // check if content number is set
        $numberOfPageToInclude = isset($_GET['page']) ? $_GET['page'] : $defaultPageNumber;

        $options = array(
            'options' => array(
                'min_range' => 1,
                'max_range' => 4,
                ));

        if (filter_var($numberOfPageToInclude, FILTER_VALIDATE_INT, $options) !== FALSE) {
            include ('content' . $numberOfPageToInclude . '.php');
        } else {
            echo '<span style="color:red;">Wrong page number, including default page!</span><br />';
            include 'content1.php';
        }
        ?>
 </div> 
```

现在我已经按照建议的方式完成了，但是当我调用代码时，首先出现了默认的 php 页面，然后当我单击按钮更改页面的 php 端时，它起作用了，但不知何故它关闭了其余的javascript，甚至我的手风琴js和百叶窗js（它来自另一个php页面）突然关闭。

任何人都可以建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:35:48.213

```
 <html>
          <head>
          <script language="javascript" type="text/javascript">
          function showentry()
             {
             if (window.XMLHttpRequest)
                {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                }
             else
                {// code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
            xmlhttp.onreadystatechange=function()
                {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                   {
                      document.getElementById("right").innerHTML=xmlhttp.responseText;
                   }
                }
            xmlhttp.open("GET","details.php",true);//whatever the contents of file                                       details.php displayed in right div
            xmlhttp.send();
            }
             </script>
             <style type="text/css">
                #left{width:500px;height:100%; float:left;}
                #right{width:500px; float:left;}
             </style>
           </head>
       <div id="left">
      <input type="button" name="GET" value="show" onclick="showentry()"/>
        </div>
        <div id="right">
        </div>
        </html> 
```

# c# - RavenDb 中的映射减少

> ID：10805897
> 
> 赞同：0
> 
> 时间：2012-05-29T20:04:22.577
> 
> 标签：c#, mapreduce, ravendb

**更新 1**，按照 Ayende 的回答

这是我第一次进入 RavenDb 并进行试验，我写了一个小 map/reduce，但不幸的是结果是空的？

我在 RavenDb 中加载了大约 160 万份文档

一个文件：

```
public class Tick
{
    public DateTime Time;
    public decimal Ask;
    public decimal Bid;
    public double AskVolume;
    public double BidVolume;
} 
```

并希望在特定时间段内获得最低和最高询价。

按时间收集的定义为：

```
var ticks = session.Query<Tick>().Where(x => x.Time > new DateTime(2012, 4, 23) && x.Time < new DateTime(2012, 4, 24, 00, 0, 0)).ToList(); 
```

这给了我 90280 份文件，到目前为止一切都很好。

但是然后地图/减少：

```
Map = rows => from row in rows 
                          select new
                          {
                              Max = row.Bid,
                              Min = row.Bid, 
                              Time = row.Time,
                              Count = 1
                          };

Reduce = results => from result in results
                                group result by new{ result.MaxBid, result.Count} into g
                                select new
                                {
                                    Max = g.Key.MaxBid,
                                    Min = g.Min(x => x.MaxBid),
                                    Time = g.Key.Time,
                                    Count = g.Sum(x => x.Count)

                                }; 
```

...

```
private class TickAggregationResult
{
    public decimal MaxBid { get; set; }
        public decimal MinBid { get; set; }
        public int Count { get; set; }

    } 
```

然后我创建索引并尝试查询它：

```
Raven.Client.Indexes.IndexCreation.CreateIndexes(typeof(TickAggregation).Assembly, documentStore);

        var session = documentStore.OpenSession();

        var g1 = session.Query<TickAggregationResult>(typeof(TickAggregation).Name);

        var group = session.Query<Tick, TickAggregation>()
                         .Where(x => x.Time > new DateTime(2012, 4, 23) && 
                                     x.Time < new DateTime(2012, 4, 24, 00, 0, 0)
                                  )
            .Customize(x => x.WaitForNonStaleResults())
                                           .AsProjection<TickAggregationResult>(); 
```

但是该组只是空的:(

如您所见，我尝试了两种不同的查询，我不确定它们之间的区别，有人可以解释一下吗？

**现在我得到一个错误：** ![在此处输入图像描述](../Images/8c37e2a59e11b5fa6f01d716cf4b88c6.png)

该组仍然是空的:(

让我解释一下我要在纯 sql 中完成的工作：

```
select min(Ask), count(*) as TickCount from Ticks 
where Time between '2012-04-23' and '2012-04-24) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:02:10.650

这不是您使用 Map/reduce 的方式

```
 from row in rows where row.Time > new DateTime(2012, 4, 23) && row.Time < new DateTime(2012, 4, 24, 00, 0, 0) 
```

创建一个 map reduce 索引，将时间作为键的一部分合并到组中，然后您可以对其进行查询。

# hibernate - 从 SQL 转换为 HQL

> ID：10805898
> 
> 赞同：0
> 
> 时间：2012-05-29T20:04:22.690
> 
> 标签：hibernate, grails, hql

我有以下像冠军一样工作的 SQL 查询：

```
select u.id
from morder_item mi
join book b on b.id = ${book.id}
join book_product bp on bp.book_id = b.id
join morder mo on mo.id = mi.morder_id
join user u on u.id = mo.user_id
where mi.book_product_id = bp.id 
```

我正在尝试将其转换为 HQL，但问题是我看到的所有示例都过于简单，根本不处理连接。我需要获取所有用户 ID，但查询源自 MOrderItem 域。任何帮助表示赞赏。

更新：为了有人试图帮助进行转换：

```
class MOrder {
  static hasMany = [items: MOrderItem]
  static belongsTo = [user: User]
}

class MOrderItem {
  BookProduct bookProduct
  static belongsTo = [morder: MOrder]
}

class User {
  static hasMany = [morders: MOrder]
}

class BookProduct {
  static belongsTo = [book: Book]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:58:54.727

这似乎适用于一些人为的数据：

```
def userIds = AnyDomainClass.executeQuery('''
   select u.id
   from User u join u.morders mo
               join mo.items mi
   where mi.bookProduct.book=:book
   ''',
   [book: book]) 
```

# python - 推荐系统，如保管箱一

> ID：10805901
> 
> 赞同：1
> 
> 时间：2012-05-29T20:04:27.717
> 
> 标签：python, django

我想在我的系统中实现一个推荐系统，注册用户可以通过电子邮件发送他们的推荐链接（即/register/referral/123123/）来邀请其他人，就像保管箱一一样（如果有人注册，推荐人会获得额外的奖金。目前我已经以这种方式实现了它：模型：

```
class UserReferral(models.Model):
STATUS_INVITED = 1
STATUS_ACCEPTED = 2
STATUS_EXPIRED = 3

STATUS_CHOICES = (
    (STATUS_INVITED, 'Invited'),
    (STATUS_ACCEPTED, 'Accepted'),
    (STATUS_EXPIRED, 'Expired'),
    )

referrer = models.ForeignKey(User, related_name='referrers')
referred = models.ForeignKey(User, related_name='referred')
number = models.IntegerField()
status = models.IntegerField(choices=STATUS_CHOICES, default=STATUS_INVITED)

class Meta:
    unique_together = (('referrer', 'referred'),)

def __unicode__(self):
    return 'User %s referred %s' % (self.referrer.get_full_name(), self.referred.get_full_name())

@property
def referral_expired(self):
    expiration_date = datetime.timedelta(days=settings.ACCOUNT_ACTIVATION_DAYS)
    return (self.status == self.STATUS_ACCEPTED or
                   (self.referred.date_joined + expiration_date <= datetime_now())) 
```

视图：注册用户使用此视图发送新的推荐邀请

```
@login_required
def invite_friends(request, template_name='accounts/invite_friends.html'):
if request.method == 'POST':
    form = InviteForm(request.POST, user=request.user)
    if form.is_valid():
        emails = form.cleaned_data['emails']
        for email in emails:
            try:
                user_referral = UserReferral.objects.get(referrer=request.user, referred__email=email)
            except UserReferral.DoesNotExist:
                random_username = ''.join(random.choice(string.ascii_uppercase) for x in range(6))
                user = User.objects.create(username=random_username, password=email, is_active=False)  # Dummy user to be overridden
                user_referral = UserReferral.objects.create(referrer=request.user, referred=user, number=random.randint(10000, 99999))
                send_mail('accounts/notifications/invite_friends', recipient_list=[email],
                        context={'user': request.user, 'number': user_referral.number})

        messages.add_message(request, messages.SUCCESS, "Invites are sent.")
        return redirect(reverse('profile_dashboard'))
else:
    form = InviteForm(user=request.user)
return render(request, template_name, locals()) 
```

这是被推荐用户可以注册的 URL，它基本上使用推荐代码调用原始注册函数，并在注册视图中检查推荐代码是否存在，如果存在，它会从 UserReferral 实例中获取被推荐的用户实例并填充注册表格中的用户数据并保存该新用户。

```
def referred_signup(request, referral_code):
user_referral = get_object_or_404(UserReferral, number=referral_code)
if user_referral.referral_expired:
    raise Http404
response = register(request, referral_code=referral_code)
return response 
```

因此，每次生成新邀请时，我都会创建一个虚拟的非活动“推荐人”用户帐户。在注册时，我从用户输入表单中填充名称、密码等，并将 UserReferral 实例状态更改为 ACTIVATED。有没有比这个更好的选择？

# javascript - 使用 jquery 更改表单输入字段的值

> ID：10805908
> 
> 赞同：1
> 
> 时间：2012-05-29T20:05:09.440
> 
> 标签：javascript, jquery, html

如何使用 jquery 更改此输入字段的值？

```
<input type="hidden" name="emailaddress" value="admin@admin.com"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:08:47.393

```
$('input:hidden[name=emailaddress]').val('something'); 
```

这里，

`input:hidden`指向隐藏的输入

`[name=emailaddress]`检查`name`属性。

如此完全

`$('input:hidden[name=emailaddress]')`选择隐藏且具有`name`属性的输入`emailaddress`。

`.val()`用于设置/获取输入字段的值。使用参数它充当设置器和获取器，而没有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:09:00.993

您需要为输入提供一个 id，然后引用该 id 并更改它。下面是我用来更改单选按钮值的内容。这使用 JS

```
 document.getElementById('ID').value = somevalue; 
```

随着

```
 <input type="hidden" name="emailaddress" id ='ID'value="admin@admin.com"> 
```

# javascript - 谷歌地图 JavaScript 标记问题

> ID：10805909
> 
> 赞同：-2
> 
> 时间：2012-05-29T20:05:15.223
> 
> 标签：javascript

这是有问题的页面...

[http://dev.digitalskydesign.com/locations/](http://dev.digitalskydesign.com/locations/)

去那里，将鼠标悬停在谷歌地图上的一个“绿色”图标上。在您单击它之前，只需将鼠标悬停在它上面，您就会看到一堆代码弹出。

我根本不希望该代码出现，但我很难弄清楚如何在我的 JavaScript 代码中处理它。

处理此地图的 JavaScript 代码可在此处找到...

[http://dev.digitalskydesign.com/wp-content/themes/Teamsters-FCU/locations-iframe.php](http://dev.digitalskydesign.com/wp-content/themes/Teamsters-FCU/locations-iframe.php)

还有一个名为“branch-locations.txt”的 .txt 文件，它基本上只是所有地图标记位置的地址和地理编码。

我不是 JavaScript 大师（只是一个网页设计师），所以如果你能告诉我要修改/包含哪些代码以及放在哪里，那将不胜感激。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:14:30.770

似乎您的工具提示属性中有 html。

似乎 code:`var label = points[i].textArray[2];` 导致了这个问题。

如果您希望 HTML 标记用于提示，则需要向标记的 mouseover 事件添加一个事件，该事件在元素中显示工具提示，并在 mouseout 时添加一个事件以删除提示元素。

您拥有的另一个选项是将标签更改为没有 HTML 标记的内容。

下面是使用 JavaScript 代码添加提示的示例：

其中一些取自[How to call fromLatLngToDivPixel in Google Maps API V3？](https://stackoverflow.com/questions/1538681/how-to-call-fromlatlngtodivpixel-in-google-maps-api-v3)

```
//You need this to get the projection... put this code at the top of your javascript after you declare map
var overlay = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.setMap(map); //Where map is your Map2 instance

//Put this code at line 164
var label = '';
points[i].marker = new GMarker(points[i],{title: label, icon:tinyIcon(opts.icon)});
google.maps.event.addListener(points[i].marker, 'mouseover', function() {

//Create the tip and get the Point so position the tip
var toolTip = document.createElement('div'),        
    point = overlay.getProjection().fromLatLngToDivPixel(this.getPosition());
toolTop.styles.position = 'absolute';
toolTop.styles.left = point.x;
toolTop.styles.top = point.y

document.body.appendChild(toolTip);

google.maps.event.addListener(this, 'mouseout', function() {
    document.body.removeChild(toolTip);
  });

}); 
```

# asp.net - MVC3 Html 编辑器助手显示旧模型值

> ID：10805910
> 
> 赞同：3
> 
> 时间：2012-05-29T20:05:15.593
> 
> 标签：asp.net, asp.net-mvc, razor

表单提交后 Html 编辑器助手（TextBox、Editor、TextArea）显示旧值而不是 model.text 的当前值

显示助手（Display、DisplayText）显示正确的值。

*有没有办法编辑器助手显示当前的 model.text 值？*

**模型**

```
namespace TestProject.Models
{
  public class FormField
  {
    public string text { get;set; }
  }
} 
```

**控制器**

```
using System.Web.Mvc;
namespace TestProject.Controllers
{
  public class FormFieldController : Controller
  {
     public ActionResult Index (Models.FormField model=null)
     {
       model.text += "_changed";
       return View(model);
     }
  }
} 
```

**看法**

```
@model TestProject.Models.FormField
@using (Html.BeginForm()){
  <div>
    @Html.DisplayFor(m => m.text)
  </div>
  <div>
    @Html.TextBoxFor(m => m.text)
  </div>
  <input type="submit" />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:11:15.743

当您将表单提交到 MVC 操作时，输入字段的值将从*表单中可用的 POSTEd 值中恢复，而不是从模型*中恢复。这是有道理的吧？我们不希望用户在文本框中显示与他们刚刚输入并提交给服务器不同的值。

如果您想向用户显示更新的模型，那么您应该有另一个操作，并且您必须从发布操作重定向到该操作。

基本上，您应该有两个动作，一个动作呈现视图以编辑模型，另一个动作将模型保存到数据库或其他任何东西，并将请求重定向到前一个动作。

一个例子：

```
public class FormFieldController : Controller
{
    // action returns a view to edit the model
    public ActionResult Edit(int id)
    {
      var model = .. get from db based on id
      return View(model);
    }

    // action saves the updated model and redirects to the above action
    // again for editing the model
    [HttpPost]
    public ActionResult Edit(SomeModel model)
    {
       // save to db
       return RedirectToAction("Edit");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:04:18.830

使用 HTML.EditorFor() 或 HTML.DisplayFor() 等 HTML 编辑器时，如果您尝试修改或更改控制器操作中的模型值，您将看不到任何更改，除非您删除所需模型属性的 ModelState改变。

虽然@Mark 是正确的，但您不必*有*单独的控制器操作（但您通常会想要），并且您不需要重定向到原始操作。

例如 - 调用 ModelState.Remove( *modelPropertyName* )...

```
public ActionResult Index (Models.FormField model=null)
 {
   ModelState.Remove("text");
   model.text += "_changed";
   return View(model);
 } 
```

如果你想对 GET 和 POST 有单独的操作（推荐），你可以这样做......

```
public ActionResult Index ()
 {
   Models.FormField model = new Models.FormField();  // or get from database etc.

   // set up your model defaults, etc. here if needed

   return View(model);
 }

[HttpPost]  // Attribute means this action method will be used when the form is posted
public ActionResult Index (Models.FormField model)
 {
   // Validate your model etc. here if needed ...

   ModelState.Remove("text"); // Remove the ModelState so that Html Editors etc. will update

   model.text += "_changed";  // Make any changes we want

   return View(model);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-04T06:17:25.383

我有一些类似的问题，我希望我可以帮助其他人有类似的问题：

`ActionExecutingContext`有`Controller.ViewData`。如你看到的：

```
new ActionExecutingContext().Controller.ViewData 
```

此 ViewData 包含`ModelState`和`Model`。例如，ModelState 显示模型的状态已传递给控制器​​。`ModelState`当您对不可接受的错误`Model`及其状态传递给 View 时。因此，您将看到旧值。然后您必须手动更改 ModelState 的 Model 值。例如清除数据：

```
 ModelState.SetModelValue("MyDateTime", new ValueProviderResult("", "", CultureInfo.CurrentCulture)); 
```

[您也可以像这里](http://benfoster.io/blog/automatic-modelstate-validation-in-aspnet-mvc)一样操作 ViewData 。，等等，使用这个`EditorFor`内容。`DisplayFor()``ViewData`

# tfs-workitem - 将活动添加到任务工作项中的活动下拉列表

> ID：10805911
> 
> 赞同：7
> 
> 时间：2012-05-29T20:05:16.247
> 
> 标签：tfs-workitem

有没有办法修改当前在任务工作项的活动下拉列表中的值？这是当前列表：

*   部署
*   设计
*   发展
*   文档
*   测试
*   要求

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T21:03:37.933

当然，您必须编辑要更改的现有团队项目的流程模板或工作项类型。

[本文](http://msdn.microsoft.com/en-us/library/bb668982.aspx)为您提供有关如何编辑流程模板的信息。

如果要编辑现有团队项目的工作项几乎是相同的过程，只是开始不同，因为您必须选择此命令：

![在此处输入图像描述](../Images/2bcae19270e87c56df1404ab66e30f72.png)

选择任务工作项类型后，双击“字段”选项卡中的“活动”字段。

![在此处输入图像描述](../Images/bab88181f050fdba3989ea05ede73515.png)

然后在打开的窗口中，转到“规则”选项卡并双击“SUGGESTEDVALUE”行。

![在此处输入图像描述](../Images/968e403aa06890483733e5dee416aa17.png)

然后改变你想要的线条。 ![在此处输入图像描述](../Images/6c43011f49ff60638c3540767e83d036.png)

最后保存工作项类型，如果您来自流程模板，请按照文章中介绍的程序进行操作，如果您来自现有团队项目中的工作项，则只需保存更改即可生效。

**但是，请注意**（对于现有的团队项目案例），如果您的团队项目中已经存在一些使用您删除的值的工作项，这些工作项将在您下次编辑它们时生成错误。如果您希望工作项可保存，则必须将“活动”字段的值更改为现有值。

# javascript - 如何在外部 .js 文件中包含 jQuery？

> ID：10805912
> 
> 赞同：4
> 
> 时间：2012-05-29T20:05:16.157
> 
> 标签：javascript, jquery

我想为我的客户提供一个简单的代码来插入和获取我的插件。

编码：

```
<div id='banner-lujanventas'></div>
<script src="http://lujanventas.com/plugins/banners/script.js" type="text/javascript"></script> 
```

问题是我的插件只适用于 jQuery。如何检查我的 script.js 文件中是否安装了 jQuery 版本，如果没有包含它？（我只能修改我的 /script.js 文件）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T20:07:27.073

制作自己的脚本元素：

```
if (typeof jQuery === "undefined") {
    var script = document.createElement('script');
    script.src = 'http://code.jquery.com/jquery-latest.min.js';
    script.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(script);
}

//edit
window.onload = function() {
    $(function(){ alert("jQuery + DOM loaded."); });
} 
```

您必须将真正的 onload 代码放在`window.onload()`函数中，而不是放在`$(document).ready()`函数中，因为此时不需要加载 jquery.js。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:07:51.047

您可以检查 jQuery 变量

```
if (typeof jQuery === 'undefined') {
    // download it
} 
```

有关下载选项，例如异步与`document.write`.，请查看[这篇文章](http://css-tricks.com/snippets/jquery/load-jquery-only-if-not-present/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:07:18.427

像这样的东西：

```
<script>!window.jQuery && document.write(unescape('%3Cscript src="http://yourdomain.com/js/jquery-1.6.2.min.js"%3E%3C/script%3E'))</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T18:06:30.130

我挖掘了一些旧代码来查找特定版本的 jQuery 并在找不到时加载它，并且它避免与页面已经使用的任何现有 jQuery 冲突：

```
// This handles loading the correct version of jQuery without 
// interfering with any other version loaded from the parent page.
(function(window, document, version, callback) {
    var j, d;
    var loaded = false;
    if (!(j = window.jQuery) || version > j.fn.jquery || callback(j, loaded)) {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://code.jquery.com/jquery-2.1.0.min.js";
        script.onload = script.onreadystatechange = function() {
            if (!loaded && (!(d = this.readyState) || d == "loaded" || d == "complete")) {
                callback((j = window.jQuery).noConflict(1), loaded = true);
                j(script).remove();
            }
        };
        (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script);
    }
})(window, document, "2.1", function($) {
    $(document).ready(function() {
        console.log("Using jQuery version: " + $.fn.jquery);

        // Your code goes here...

    });
}); 
```

# html - 图像上的文本块

> ID：10805922
> 
> 赞同：2
> 
> 时间：2012-05-29T20:05:46.290
> 
> 标签：html, css

我使用以下教程在图像上制作文本块：http: [//css-tricks.com/text-blocks-over-image/](http://css-tricks.com/text-blocks-over-image/)。我发现它实际上非常简单，而且非常有用，但是有一件事我永远无法使用，这些是 span 标签。

我遇到的问题是我想将跨度中文本的第二部分格式化为具有较小的字体大小并具有左填充。我已经尝试包含第二个跨度并将其定义在 css 文件中，但它并没有真正做任何事情，只是停留在原处。我还尝试将块扩展到图片的末尾，但是每个 1000px 的宽度不起作用。

这是一些图片，因为他们会说一千个单词……

它在我的身上看起来如何...

![在此处输入图像描述](../Images/973a81abc8522708179f4556ef3960ac.png)

我希望它看起来如何...

![在此处输入图像描述](../Images/38c04f4c300dfab7fc5aad80643eb9de.png)

这是一些代码...

```
<div class="img_destination">

      <img src="<?php echo SITE_URL?>/lib/skins/gsm/images/featured_destination/gcfv.png" alt="" />

      <h2 id="featured_destination"><span>>> Explore Fuerteventura<span class='spacer'></span><span class='spacer'></span>The island of natural beauty</span></h2>

</div> 
```

CSS...

```
 /* Featured Destination */

.img_destination {
   position: relative;
   width: 100%; /* for IE 6 */
}

h2#featured_destination {
   position: absolute;
   top: 355px;
   left: 0;
   width: 100%;
}

h2#featured_destination span {
   color: white;
   font: bold 28px/45px Helvetica, Sans-Serif;
   letter-spacing: -1px;
   background: rgba(00, 36, 63, 0.7);
   padding: 10px;
}

h2#featured_destination span.spacer {
   padding:0 5px;
   background: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:24:58.403

这是您发布的内容：

```
<h2 id="featured_destination"><span>>> Explore Fuerteventura<span class='spacer'></span><span class='spacer'></span>The island of natural beauty</span></h2> 
```

我会建议一些不同的事情。首先，如果对这些箭头使用 >>，请使用`&gt;&gt;`. 有时浏览器会错误地渲染额外的符号，因此当您希望显示为文字时，对它们进行编码总是最安全的。另外，我不会使用空的 span 标签来创建空格，因为它往往会使标记变得混乱。

但是您的主要问题是**您需要更改跨度标签的嵌套方式**，以不在任何跨度标签内包含“>>探索富埃特文图拉”，以便文本的两个部分的样式不同。我认为您的目标可以通过简单地将您的标记清理为更像这样的东西来实现：

```
<h2 id="featured_destination">&gt;&gt; Explore Fuerteventura <span class='spacer'> The island of natural beauty</span></h2> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:20:45.360

```
<div class="img_destination">
  <img src="<?php echo SITE_URL?>/lib/skins/gsm/images/featured_destination/gcfv.png" alt="" />
  <h2 id="featured_destination">
      <span> &gt; &gt; Explore Fuerteventura
           <span class="smaller">The island of natural beauty</span>
      </span>
  </h2>
</div> 
```

和 CSS：

```
h2 > span {
    color: white;
    font: bold 28px/45px Helvetica, Sans-Serif;
    letter-spacing: -1px;
    background: rgba(00, 36, 63, 0.7);
    padding: 10px;
}

h2 span.smaller {
    padding-left: 20px;
    font-size: 10px;
} 
```

试试看。这是示例： http: [//jsfiddle.net/8PLaB/](http://jsfiddle.net/8PLaB/)这就是您要找的吗？

您的 spans .spacer 不起作用，因为它们是空的，并且浏览器根本不显示它们。我认为如果您插入它们，那么它们将完成他们的工作，但在我看来这不是一个好的解决方案。空标签永远不是好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:25:00.467

这是您想要的效果吗：**[jsFiddle 示例](http://jsfiddle.net/j08691/2bETy/)**。

我将文本 div 更改为：

```
<h2 id="featured_destination">
    <span class="bold">>> Explore Fuerteventura</span><span class='spacer'></span><span class='spacer'></span>The island of natural beauty
</h2> 
```

我将第一块文本包裹在它自己的跨度中，这样你就可以用粗体字体来设置它的样式，而其余的文本有一个正常的粗细。

这是我修改的 CSS：

```
/* Featured Destination */
.img_destination {
    position: relative;
    width: 100%;
/* for IE 6 */
}

h2#featured_destination {
    position: absolute;
    top: 355px;
    left: 0;
    width: 100%;
    background: rgba(00,36,63,0.7);
    font: 28px/45px Helvetica, Sans-Serif;
    color: #FFF;
    letter-spacing: -1px;
}

h2#featured_destination span {
    padding: 10px;
}

h2#featured_destination span.spacer {
    padding: 0 5px;
    background: none;
}

.bold {
    font-weight: 700;
} 
```

# mongodb - 时间跟踪器应用程序的 NoSQL 困境

> ID：10805926
> 
> 赞同：0
> 
> 时间：2012-05-29T20:06:10.293
> 
> 标签：mongodb, nosql

我正在尝试编写一个基于 Web 的应用程序来进行时间跟踪。我仍在研究我想用来构建应用程序的工具集，但我希望它是 NoSQL 数据库驱动的（在我的例子中是 MongoDB）。我根本没有使用 NoSQL 数据库的经验，因此是我的问题。让我们假设以下情况：

1.  我想创建一个项目。一个项目可以包含一些元数据，如名称、url 等。
2.  我想创建一个客户，并且我希望能够将客户分配给一个项目。
3.  在完成之前，每个项目都可以完成不同数量的步骤。步骤属于一个项目。一个步骤可以包含更多事件，因为完成一个步骤可能需要更多天。
4.  根据步骤中的信息，我希望能够计算我在项目上花费的总时间并计算我在每个步骤上花费的总时间（例如发票）。

在对 MongoDB 进行了一些研究之后，我的第一种方法看起来或多或少是这样的：

**客户集合**

```
{
    "_id": 4e91bcb40b7aab256c000000,
    "name": "Example",
    "address": "Some street"
} 
```

**项目集合**

```
{
    "name": "My new Project",
    "customers_id": 4e91bcb40b7aab256c000000,
    "steps": [
        {
            "name": "Design",
            "desctiption": "Frontend design",
            "time_tracker": [
                {
                    "description": "designed home page"
                    "start": 2012-05-28 10:10:10
                    "end": 2012-05-28 15:15:15
                },
                {
                    "description": "designed home page buttons"
                    "start": 2012-05-29 10:10:10
                    "end": 2012-05-29 15:15:15
                }
            ]
        }
    ]
} 
```

这是一个好的数据库设计吗？我应该标准化这些步骤吗？在此过程中我是否会遇到任何问题（例如计算大项目总数的性能问题等）？在这种情况下我应该坚持使用 RDBMS 吗？

你的经验有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:36:44.217

这取决于您的用例、应用程序和数据。

为了避免重复，之前在 Stackoverflow 上已经进行了相当广泛的讨论——[何时使用 MongoDB 或其他面向文档的数据库系统？](https://stackoverflow.com/questions/1476295/when-to-use-mongodb-or-other-document-oriented-database-systems)以及[何时使用 MongoDB](https://stackoverflow.com/questions/4981753/when-to-use-mongodb)。

关于你上面提到的设计，我觉得很好。

# .htaccess - 这是将单个重写规则应用于多个页面的正确方法吗？

> ID：10805930
> 
> 赞同：1
> 
> 时间：2012-05-29T20:06:19.420
> 
> 标签：.htaccess

我正在尝试使用 .htaccess ，但此时我有点迷失了。我想知道您将如何重写多个页面。

```
RewriteRule ^your-order/$ /page1.php,page2.php,page3.php [L] 
```

还是我应该这样做：

```
RewriteRule ^your-order/$ /page1.php [L]
RewriteRule ^your-order/$ /page2.php [L]
RewriteRule ^your-order/$ /page3.php [L] 
```

我还想知道如果页面有参数，rewriterule 是否仍会执行：

```
 URL: page1.php?test=hello

RewriteRule ^your-order/$ /page1.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:11:51.950

我从您关于查询字符串参数的问题中假设您实际上具有向后重写的概念。第一个表达式是提交的 URL (pageN.php)，第二个表达式是应该重定向或重写的位置 (your-order)。在这种情况下，您只需要一个规则。

除非您需要在存在查询字符串参数时采取特殊操作（例如完全转到不同的页面），否则您不需要匹配查询字符串。查询字符串在单独的`RewriteCond`条件中匹配，而不是在`RewriteRule`.

```
RewriteEngine On
# Rewrite page1, page2, page3 to your-order
# Add as many other pages as necessary separated by |
# The QSA appends any additional querystring to your-order
RewriteRule ^(page1|page2|page3)\.php your-order [L,QSA] 
```

如果您的页面实际上是用末尾的数字命名的（我对此表示怀疑），您可以使用以下表达式：

```
RewriteRule ^page[0-9]+\.php your-order [L,QSA] 
```

在任何一种情况下，如果您希望最终用户的浏览器被重定向到您的订单 URL，而不是内部和不可见的重写，请更改`[L,QSA]`为`[L,R,QSA]`

# geolocation - ie9不支持地理位置？

> ID：10805931
> 
> 赞同：2
> 
> 时间：2012-05-29T20:06:19.583
> 
> 标签：geolocation, internet-explorer-9

大家好，我正在创建一个使用 Geolocation API 来定位最终用户的 Web 应用程序。它在我能想到的几乎所有平台上都运行良好，除了 Internet Explorer 9。不过事情变得有点奇怪。如果我将 Google 工具栏加载到我的 Internet Explorer 浏览器窗口中，一切都会顺利进行。这是我一直在使用的有问题的代码块：

```
if (navigator.geolocation) {
            var locationMarker = null;
            navigator.geolocation.watchPosition(
                function( position ){
                    var point = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);    
                    if (!locationMarker) {
                        locationMarker = addMarker(
                            position.coords.latitude,
                            position.coords.longitude,
                            "Initial Position"
                        );
                    }
                    else{
                        updateMarker(
                            locationMarker,
                            position.coords.latitude,
                            position.coords.longitude,
                            "Updated / Accurate Position"
                        );
                    };
                    map.setCenter(point);
                    if (map.zoom < 17){
                        map.setZoom(17);
                    };
                },
                function( error ){
                    console.log( "Something went wrong: ", error );
                },
                {
                    timeout: (5 * 1000),
                    maximumAge: (1000 * 60 * 15),
                    enableHighAccuracy: true
                }
            );
        }
        else {
            alert("Geolocation is not supported by this browser");
        } 
```

每当我使用 Internet Explorer 9 访问我的应用程序时，我都会收到“此浏览器不支持地理位置”警报。除非我激活了我的 Google 工具栏。但是，如果 Google 工具栏处于活动状态，则 Google 工具栏会处理权限。

如何让地理定位在 IE9 中工作？我的应用程序可以在 Safari、Firefox、Chrome、iOS 和 Android 中完美运行。我完全被难住了。

谢谢，泰勒·沃林

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T20:39:54.043

user1303379,

IE9 and IE10 both support geolocation, however earlier versions of IE do not support it ( reference [http://caniuse.com/#feat=geolocation](http://caniuse.com/#feat=geolocation) ). Here is a blog post by IE about geolocation in IE9 [http://blogs.msdn.com/b/ie/archive/2011/02/17/w3c-geolocation-api-in-ie9.aspx](http://blogs.msdn.com/b/ie/archive/2011/02/17/w3c-geolocation-api-in-ie9.aspx) and here is a test page using `navigator.geolocation.watchPosition` like you are above.

For browsers that don't support geolocation you may consider using one of the geolocation polyfills listed here [https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

IE9 & IE10 ask the user if they would like to share their location [http://cl.ly/image/0X0o2F0s1N03](http://cl.ly/image/0X0o2F0s1N03) My guess is that you may have denied access to your location at some point.

The Google Toolbar added a feature to determine geolocation back in the IE8 days [http://googletoolbarhelp.blogspot.com/2010/02/google-toolbar-6413211732-for-ie.html](http://googletoolbarhelp.blogspot.com/2010/02/google-toolbar-6413211732-for-ie.html) From what you describe it sounds like the Google Toolbar started to provide geolocation since the native IE9 geolocation was denied access.

# vb.net - 动态调整字体大小以填满 RichTextbox

> ID：10805935
> 
> 赞同：0
> 
> 时间：2012-05-29T20:06:27.137
> 
> 标签：vb.net, winforms, visual-studio-2010

如何动态调整 RichTextbox 中的文本大小，使其填满整个富文本框？任何帮助深表感谢。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:29:47.283

这篇 MSDN 文章几乎可以回答您的问题。[http://msdn.microsoft.com/en-us/library/bb986765.aspx](http://msdn.microsoft.com/en-us/library/bb986765.aspx)。您可以在那里下载附件示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:37:54.300

我认为您可能必须使用“字体”构造函数来发挥创意。例如，在单击事件上，然后使用与您的应用程序（或文本框大小）的某种关系以及所需的字体大小来构造一个新的字体。

```
Protected Sub btn_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btn.Click
  Dim yourfontsize As Integer    

  'machinery to create desired font size
  If blah then 
      yourfontsize = X() 
  Else
      yourfontsize = Y()
  End If

  yourtextbox.SelectionFont = New Font("Tahoma", yourfontsize, FontStyle.Bold)

End Sub 
```

其中 X() 和 Y() 是根据应用程序中可能发生的其他情况返回目标字体大小的函数。

参考：http: [//msdn.microsoft.com/en-us/library/yh8963yx.aspx](http://msdn.microsoft.com/en-us/library/yh8963yx.aspx)

希望有帮助！

-sf

# sql - 在hibernate的Native sql中给出参数

> ID：10805940
> 
> 赞同：0
> 
> 时间：2012-05-29T20:07:16.580
> 
> 标签：sql, hibernate, parameters, native

有人可以告诉我如何在hibernate的本地sql中发送参数在下面的代码中，我想输入contract_id作为参数。

```
 List list=session.createSQLQuery("select {b.*},{p.*},{t.*} from bidtool.bt_boiler_plates b,bidtool.bt_profile p,bidtool.bt_trade_lane t "
            + "where b.contract_id=p.contract_id AND p.contract_id=t.contract_id AND ")
                  .addEntity("b",Boiler_Plates.class)
                  .addEntity("p",BidToolProfiles.class)
                  .addEntity("t",BidToolTradeLanes.class).list(); 
```

您的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:11:21.563

尝试：

```
List list=session.createSQLQuery("select {b.*},{p.*},{t.*} from bidtool.bt_boiler_plates b,bidtool.bt_profile p,bidtool.bt_trade_lane t "
            + "where b.contract_id=p.contract_id AND p.contract_id=t.contract_id AND contract_id=:contractId")
                  .addEntity("b",Boiler_Plates.class)
                  .addEntity("p",BidToolProfiles.class)
                  .addEntity("t",BidToolTradeLanes.class)
                  .setParameter("contractId", contractId).list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:17:38.487

看看这个..

```
Query query = session.createSQLQuery("select {b.*},{p.*},{t.*} from bidtool.bt_boiler_plates b,bidtool.bt_profile p,bidtool.bt_trade_lane t "
        + "where b.contract_id=p.contract_id AND p.contract_id=t.contract_id AND contract_id=:ID")
              .addEntity("b",Boiler_Plates.class)
              .addEntity("p",BidToolProfiles.class)
              .addEntity("t",BidToolTradeLanes.class);

List list = query.setInteger("ID", 1234).list(); 
```

# java - 在 Jasmin 中实例化类

> ID：10805941
> 
> 赞同：4
> 
> 时间：2012-05-29T20:07:18.267
> 
> 标签：java, jvm, bytecode, jasmin

我正在尝试像这样在 Jasmin 中实例化一个类：

```
new Ljava/lang/Object;
dup
invokespecial java/lang/Object/<init>()V 
```

这确实编译但类 vierifier 抱怨：

“VerifyError：调用错误的初始化方法。”

实例化类的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T21:38:23.717

啊，我发现了他妈的问题：

'new' 的参数应该是类型的普通限定名，而不是修饰名。IE。代替

```
new Ljava/lang/Object; 
```

你应该写：

```
new java/lang/Object 
```

工作代码是：

```
new java/lang/Object
dup
invokespecial java/lang/Object/<init>()V 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:37:11.830

尝试使用`invokespecial java/lang/Object/()V`.

# security - Jenkins 自动创建用户帐户，如何登录/更改密码？

> ID：10805946
> 
> 赞同：38
> 
> 时间：2012-05-29T20:07:40.453
> 
> 标签：security, tomcat, ubuntu, version-control, jenkins

我已经设置了 Jenkins，它运行良好。它使用 Perforce 插件作为 SCM，并在签入时自动构建。我的问题是，当用户对树进行提交时，它会自动在系统上创建一个用户帐户，但没有设置密码，并且用户无法登录。

该系统在 Intranet 上受到保护，我已将 Jenkins 设置为使用“Jenkins 自己的用户数据库”和“登录的用户可以做任何事情”。问题是一旦有人提交，我就找不到任何登录方式，用户名显示在自动创建的帐户列表中，但从未发送过密码。是否有默认密码或重置方法？

该系统在 Ubuntu 12 上运行，Tomcat7 为 Jenkins 前端提供服务。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-29T21:00:08.607

SCM 创建的用户不是“完全”用户。创建它们的目的是为了显示 SCM 更改和接收电子邮件。因此，他们需要注册（使用右上角“登录”图标左侧的“注册”图标）并提供密码。建议用户名与 SCM 名称匹配。

或者，拥有“完整”帐户的用户可以转到`http://<jenkins-server>/people/`-> 单击用户名 -> 单击左侧的配置链接，然后配置用户（不过，我不能 100% 确定这是否可行，请尝试） .

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-07T09:28:10.880

在 1.517 版中，注册无效并出现“用户名已被占用”错误。

但是，您可以转到`http://<jenkins-server>/user/<autogenerated username>/configure`并为 SCM 用户设置密码，这会将他们转换为完整的 Jenkins 用户。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-20T17:49:22.923

*   转到“管理 Jenkins”-> 向下滚动
*   单击“管理用户”->查看用户ID->单击用户ID（管理员）右侧的设置符号->更改密码字段->单击保存。
*   现在您可以使用新凭据登录

# linux - Rabbitmq 文件大小

> ID：10805947
> 
> 赞同：0
> 
> 时间：2012-05-29T20:07:44.967
> 
> 标签：linux, rabbitmq

在 RabbitmQ 中，我的队列文件大小正在增长到巨大的大小。但是队列中有零个项目。为什么以及如何防止这种情况发生？似乎在它发生之后，rabbitmq 需要永远重新启动。

Rabbit MQ 2.1 版 RHEL 5.5

[15:04:11 root@....:/var/lib/rabbitmq/mnesia]# ls rabbit rabbit@zenoss02 [15:04:12 root@....:/var/lib/rabbitmq/mnesia] #du -sh 31G

有任何想法吗？

# debugging - makefile，obj_$(variable) 和 $(addprefix "obj_", $(variable)) 之间的区别是什么

> ID：10805963
> 
> 赞同：0
> 
> 时间：2012-05-29T20:08:46.593
> 
> 标签：debugging, syntax, makefile, gnu

作为标题，在makefile GNU中，**obj_$(variable)**和**$(addprefix "obj_", $(variable))**之间的区别是什么。我确信有区别，因为第一个可以与字符串进行比较，而后一个不能被识别为字符串。如果我错了，请告诉我。我想让第二个作为字符串工作，所以我可以使用 $($(addprefix "obj_", $(variable))) 作为变量（现在它不起作用）。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:08:46.947

自己测试一下：

```
print_values = \
    $(warning Let the value of '$$(variable)' to be [$(variable)]) \
    $(warning then the value of obj_$$(variable) is [obj_$(variable)]) \
    $(warning $$(addprefix  "obj_", $$(variable)) is [$(addprefix "obj_", $(variable))]) \
    $(warning )

variable := foo
$(print_values)

variable := foo bar baz
$(print_values)

variable :=
variable += foo
$(print_values) 
```

您将获得以下输出：

```
makefile:10: Let the value of '$(variable)' to be [foo]
makefile:10: then the value of obj_$(variable) is [obj_foo]
makefile:10: $(addprefix  "obj_", $(variable)) is ["obj_"foo]
makefile:10: 
makefile:13: Let the value of '$(variable)' to be [foo bar]
makefile:13: then the value of obj_$(variable) is [obj_foo bar]
makefile:13: $(addprefix  "obj_", $(variable)) is ["obj_"foo "obj_"bar]
makefile:13: 
makefile:17: Let the value of '$(variable)' to be [ foo]
makefile:17: then the value of obj_$(variable) is [obj_ foo]
makefile:17: $(addprefix  "obj_", $(variable)) is ["obj_"foo]
makefile:17: 
```

PS 正如我在另一个问题[的答案中告诉你的那样，](https://stackoverflow.com/a/10805315/545027)**引号绝对不是你想要**的。

使用普通`obj_`：

```
$(addprefix obj_,$(variable)) 
```

代替：

```
$(addprefix "obj_",$(variable)) 
```

# jquery-plugins - FitText 不调整和之间包含的字体大小？

> ID：10805966
> 
> 赞同：0
> 
> 时间：2012-05-29T20:08:50.530
> 
> 标签：jquery-plugins

[FitText](http://fittextjs.com/)在标题和段落中正常运行，但不适用于链接`(<a> href ... </ a>)`。

请问，有什么窍门吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:54:09.443

解决如下（示例）：

**CSS**：

```
.content_options {
   width:95%;
   position:absolute;
   top:8%;
   left:0;
} 
```

**HTML**：

```
<div class="content_options">
   <ul>
      <li><a href="#" title="Option 1"><p class="fittext5">Option 1</p></a></li>
      <li><a href="#" title="Option 2"><p class="fittext5">Option 2</p></a></li>
   <ul>
</div><!-- content_options --> 
```

# android - 如何为 Android 创建电子邮件，使其适合屏幕/缩小/缩放，就像在 iOS 中一样

> ID：10805968
> 
> 赞同：1
> 
> 时间：2012-05-29T20:09:01.427
> 
> 标签：android, html, ios, email, html-email

当在 iOS 上显示宽度大于 iOS 分辨率的电子邮件时，它会巧妙地缩小以在一个屏幕上显示。

我可以用 HTML 电子邮件做什么，以便它在 Android 上也这样做，而不是像 Android 设备那样放大？

该电子邮件是使用内联 css 和表格创建的，以最大限度地与 Outlook 和 Gmail 等内容兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:27:44.303

桌面喜欢以 % 为单位的宽度来覆盖整个宽度，Apple 产品会对此进行调整，但 Android 需要以 px 为单位。所以这样做：

```
<body style='width:100%; min-width:600px; ' >....</body> 
```

移动设备上的最大宽度不应大于 600 像素。

# html - 无法正确解码 perl 中的 html 实体

> ID：10805972
> 
> 赞同：0
> 
> 时间：2012-05-29T20:09:36.743
> 
> 标签：html, regex, perl, entities

在过去的 10 个小时里在互联网上搜索答案后，我遇到了一个无法解决的问题。

我有一些这种格式的数据

```
??&#1;E?&#1;&#0;?&#8;0&#6;?&#1;&#0;?&#1;&lt;?&#19;20120529184453+0200?&#19;20120529184453+0200?&#1;&#0;?&#1;&#0;?G0E?&#1;5?=20111213T103134000-136.225.6.103-30365316-1448169323, ver: 12?&#1;&#0;?W?&#5;?tP&#21;&#1;?&#1;2?&#1;&#0;?&#13;?&#4;&#6;?|??&#1;&#6;?&#2;&#3;??&#13;?&#4;&#6;?:o?&#1;&#6;?&#2;&#3;??&#5;?tP&#21;&#17;?&#1;&#0;?&#12;?&#3;&#15;B@?&#1;&#6;?&#2;&#3;??&#12;?&#3;&#15;B@?&#1;&#6;?&#2;&#3;??&#1;&#0;?&#1;&#0;?)0&#20;?&#4;&#1;&#0;&#3;??&#12;?&#10;49471010550&#17;?&#4;&#1;&#0;&#3;??&#9;?&#7;?&#5;?tP&#21;&#17;?&#1;&#2;?&#1;&#1;?3?&#15;?&#1;&lt;?&#1;&#0;?&#1;&#0;?&#1;&#0;?&#1;&#0;?&#15;?&#1;&#0;?&#1;&#0;?&#1;&#0;?&#1;&#0;?&#1;&#0;?&#15;?&#1;&#0;?&#1;&#0;?&#1;&#0;?&#1;&#0;?&#1;&#0; 
```

我有一个 PHP 代码，不是我写的，它只是在上面运行 html_entity_decode 并返回正确的结果。

当我尝试运行 Perl 的 decode_entities 时，我得到了完全不同的结果。经过一些调试，在我看来，PHP 正在“正确地”替换看似无效的实体，例如，`&#0;`或替换`&#8;`为它们的 ascii 对应物，即提到的 2 种情况的 NULL 和退格键。

另一方面，Perl 似乎没有解码那些“无效”实体并将它们单独留下，后来一个搞砸了结果（通过 unpack 或在 phph 的情况下，bin2hex 失败，因为它不会将 null 解包为 00解包 ) 的每个单独的字符`&#0;`。

我已经尝试了所有我能想到的方法，包括在运行 decode_entities 之后在 perl 中运行以下替换

```
 $var =~ s/&#(\d+);/chr($1)/g 
```

然而，这根本不起作用。

这让我发疯了，我想在 perl 而不是 php 中完成这项工作我真的希望我不必在 perl 中编写 1000 行模式匹配行来涵盖所有可能的实体和数字。

任何人都知道如何解决这个问题，而不必将 PHP 的整个 html_entity_decode 函数解析为 perl 或编写无穷无尽的模式匹配行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:18:49.783

您快到了。代替

```
$var =~ s/&#(\d+);/chr($1)/g 
```

说

```
$var =~ s/&#(\d+);/chr($1)/ge 
```

`/e`修饰符指示 Perl 'e' 评估替换模式。

# html - iPad HTML5 启动画面尺寸

> ID：10805974
> 
> 赞同：0
> 
> 时间：2012-05-29T20:09:56.413
> 
> 标签：html

谁能帮我获得IPAD的确切尺寸，以在横向和纵向模式下显示启动画面。

对于横向模式：

对于纵向模式：

我还将图像裁剪为 (Landscape:sizes="1024x748") 和 (Portrait:sizes="768x1004")。

但以上都行不通。谁能帮我解决这个问题。谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:48:59.830

对于 iPad 的第三版“新 iPad”，配备 Retina 显示屏，尺寸为 2048x1536（参见[Apple 网站](http://www.apple.com/ipad/specs/)）。对于第一台 iPad 和 iPad 2，尺寸为 1024x768（再次参见[Apple 网站](http://www.apple.com/ipad/ipad-2/specs.html)）。您提到的尺寸包括顶部的 20 像素状态栏。以下是一些标准 UI 项的尺寸：

*   导航栏和工具栏：44 像素
*   标签栏：49 像素
*   状态栏：20 像素

我希望这会有所帮助。如果没有，请提供有关结果的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:29:53.950

我试图关注所有链接，但没有一个对我有用。我遵循以下内容： 1\. 创建大小的图像（横向：748x1024，纵向：768x1004）。2.实现以下代码：

```
<link rel="apple-touch-startup-image" sizes="748x1024" href="@Url.Content("~/Content/images/TestImage_1-screen-748x1024.png")"
        media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape)" />
    <link rel="apple-touch-startup-image" sizes="768x1004" href="@Url.Content("~/Content/images/TestImage_2-screen-768x1004.png")"
        media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait) " /> 
```

然后我测试了 IPAD2 中的更改，它对我有用。

谢谢和问候， 桑托什·库马尔·帕特罗

# css - 是否有一个 css 调试工具来测试整个样式表是否存在冲突？

> ID：10805975
> 
> 赞同：3
> 
> 时间：2012-05-29T20:10:03.497
> 
> 标签：css

[我使用ThemeRoller](http://jquerymobile.com/themeroller/)工具为 jquery mobile 创建了一个样式表。在 ThemeRoller 页面上看起来真的很棒。在我的移动应用程序中......不太好。我认为我的样式表和 jquery 样式表之间的定义一定存在一些冲突。

Rails 布局文件：

```
<%= stylesheet_link_tag "jquery_mob_theme.min", "jquery.mobile-1.1.0.min", "stylin.mobile" %> 
```

对于那些不熟悉 Rails 的人，它呈现：

```
<link href="/stylesheets/jquery_mob_theme.min.css?1338304118" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/jquery.mobile-1.1.0.min.css?1338312435" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/stylin.mobile.css?1337894014" media="screen" rel="stylesheet" type="text/css" /> 
```

解决这个问题的唯一方法是遍历数千行 css 来寻找冲突吗？是否有可以在样式表中检测到的 CSS 调试工具？我可以将 jquery 文件名更改为 scss，然后将它们滚动到一个样式表中。我熟悉 Firebug 和 Web 检查器，它们检查一页上的样式。那不会有帮助的……对吧？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:22:12.633

不幸的是，所有的 css 都是基于继承的，因此没有自动方式知道冲突或对象是否刚刚覆盖了父对象的样式。我认为最好的办法是强制 rails 在台式电脑上显示网站的移动版本，然后您可以使用 Google chrome 检查器。它将向您显示应用于特定对象的所有样式。它仅在样式表中显示带有行号的相关样式，因此您不会被困在 css 中。您还可以在 chrome 中对其进行编辑，以在更改样式表之前查看更改的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:25:26.843

Firebug（Firefox 的扩展）可以显示应用于任何给定元素的所有样式，以及哪些样式被其他样式覆盖。您必须从桌面浏览器查看您的移动网站，但这可以在 Firefox 中通过更改用户代理以匹配移动设备（iPod、Android 等）的用户代理来完成。

如果您打算在您的网站上使用 webkit，Firefox 不是一个好选择，因为它不会呈现 webkit css 样式。另一种方法是使用 Safari 及其开发工具（可以在选项菜单中激活）。

如果您需要从实际的移动设备进行调试，则选择不多。如果您可以将 Opera mobile 安装到设备上，它会附带一个不错的调试器，称为 Dragonfly。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:14:59.037

您的样式表样式表的顺序对于被覆盖的内容很重要。确保您的样式表位于两个 jQuery 样式表之前。

# forms - 根据表单信息将表单通过电子邮件发送给用户的脚本

> ID：10805976
> 
> 赞同：0
> 
> 时间：2012-05-29T20:10:03.607
> 
> 标签：forms, email, google-apps-script, google-docs

尝试创建或编辑一个脚本，如果在表单中选择了某个人的姓名，该脚本将告诉 google docs 向特定个人发送包含表单信息的电子邮件。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:54:50.457

您可以为此使用 Apps 脚本。文档中有一个示例，显示了如何向指定的个人发送电子邮件，其中包含在提交表单时由电子表格捕获的信息：

[https://developers.google.com/apps-script/guide_events#TriggerAttributes](https://developers.google.com/apps-script/guide_events#TriggerAttributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T20:37:17.490

我强烈建议您查看 formMule，[http:](http://cloudlab.newvisions.org/scripts/formmule) //cloudlab.newvisions.org/scripts/formmule它可以完全满足您的要求，更多信息和视频[http://youpd.org/formmule](http://youpd.org/formmule)（注意 formmule 是刚刚更新，所以看起来与视频中的略有不同。）

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:34:51.243

我有办法只使用电子表格函数来做到这一点，不需要 GAS。它运作良好，我一直在使用它。

但我有账单要付，我不相信人们会为“发送电子邮件”类型的创新付钱。所以错误检查不是很好，也没有文档。

如果你感兴趣，请告诉我，。但由于质量低且缺乏文档，您可能需要 2 小时才能启动并运行它。

艾迪·帕金森

# .htaccess - .htaccess 为商店添加语言支持

> ID：10805978
> 
> 赞同：0
> 
> 时间：2012-05-29T20:10:04.533
> 
> 标签：.htaccess, rewrite, multilingual

我正在尝试创建具有 RewriteRules 的多语言商店，如下所示：

```
 RewriteCond %{REQUEST_FILENAME} -f [NC,OR]
    RewriteCond %{REQUEST_FILENAME} -d [NC,OR]
    RewriteCond %{REQUEST_FILENAME} -l [NC]
    RewriteRule .* - [L]
    RewriteRule .*[^/]$                 $0/ [R=301]

    RewriteCond %{HTTP_HOST} ^(www\.)?example\.com\$
    RewriteRule ^(.*)$       $1?language=en [QSA]

    RewriteRule ^catalog/product/([^/]*)/$      catalog/index.php?id=$1  [L,QSA]
    RewriteRule ^catalog/([^/]*)/$          catalog/index.php?category=$1  [L,QSA] 
```

[尝试访问http://example.com/catalog/product/111/](http://example.com/catalog/product/111/) 或[http://example.com/catalog/category/](http://example.com/catalog/category/)时，这些规则不起作用

但是，当我删除

```
 RewriteCond %{HTTP_HOST} ^(www\.)?example\.com\$
    RewriteRule ^(.*)$       $1?language=en [QSA] 
```

一切正常。

问题是什么？我怎样才能让这些东西一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:15:39.373

您需要切换规则的顺序，并为其中一些去掉 L 标志。这应该有效：

```
RewriteRule ^catalog/product/([^/]*)/      catalog/index.php?id=$1  [QSA,S=1]
RewriteRule ^catalog/([^/]*)/          catalog/index.php?category=$1  [QSA]

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteRule ^(.*)$       $1?language=en [QSA] 
```

# c# - 如何为连接到 SQL 数据库的项目创建安装文件？

> ID：10805979
> 
> 赞同：1
> 
> 时间：2012-05-29T20:10:15.793
> 
> 标签：c#, sql, visual-studio-2010, setup-deployment

如问题标题所述；我有一个桌面应用程序，它是连接到 SQL 数据库的 Visual Studio 项目。我想为这个项目创建一个 exe 文件（安装文件），我如何附加数据库？

谢谢。

与解决方案相同的问题：[使用 SQL 数据库快速部署 Visual Studio 2010 应用程序](https://stackoverflow.com/questions/9734816/quick-deployment-of-visual-studio-2010-app-with-sql-database)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:12:52.917

如果它是 SQL 服务器，我建议将数据库脚本编写到文件中，并使用自定义操作使用该脚本针对变量中指定的数据库服务器调用 osql。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:15:21.377

将 MDF 作为内容文件添加到您的项目中。安装程序会将内容文件复制到安装文件夹，因此这只是在应用程序中正确使用该数据库的问题。SMO 或许可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:24:44.163

仅在安装期间创建数据库，*如果需要，通过运行脚本进行创建和初始化*
使用自定义脚本和自定义对话框来实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T20:27:26.000

您可以将[xcopy 部署](http://technet.microsoft.com/en-us/library/ms165716.aspx)与 SQL Server Express 数据库一起使用。从提到的链接：

> 要使您的应用程序使用 SQL Server Express 的 Xcopy 部署功能，您必须确保您在应用程序中使用的连接字符串包含适当的参数：
> 
> 使用数据源参数，但将计算机名称更改为句点 (.) 或 (local)。您还必须指定实例的名称，除非您确定 SQL Server Express 将始终安装在未命名的实例上。
> 
> 使用初始目录或数据库参数，但不要将参数设置为值。
> 
> 添加 AttachDBFileName 参数并将其设置为 .mdf 文件的名称和路径。Attachdbfilename 是一个 SqlClient 连接字符串选项，可以在运行时附加数据库并自动生成数据库名称。DataDirectory 关键字允许您指定数据库文件的相对路径。Attachdbfilename 还有助于数据库的可移植性。有关 Attachdbfilename 的详细信息，请参阅 Visual Studio 2005 文档。
> 
> 以下连接字符串会将与应用程序可执行文件位于同一文件夹中的 MyDb.mdf 数据库文件附加到本地计算机上运行的 SQL Server Express 实例。

```
@"Data Source='.\SQLExpress'; Initial Catalog=; Integrated 
Security=true; AttachDBFileName='" |DataDirectory| + 
@"\MyDb.mdf'" 
```

# c# - Catch vs Catch (Exception e) 和 Throw vs Throw e

> ID：10805987
> 
> 赞同：25
> 
> 时间：2012-05-29T20:11:10.250
> 
> 标签：c#, try-catch

这两个代码示例是否相同？**Catch**和**Catch (Exception e)具有相同的输出，如果我写****Throw**或**Throw e**，结果也相同。

主要的：

```
try
{
    A();
    //B();
}
catch (Exception e)
{
    Console.WriteLine("{0} exception caught.", e);
} 
```

代码 1：

```
static void A()
{
    try
    {
        int value = 1 / int.Parse("0");
    }
    catch (Exception e)
    {
        throw e;
    }
} 
```

代码 2：

```
static void A()
{
    // Rethrow syntax.
    try
    {
        int value = 1 / int.Parse("0");
    }
    catch
    {
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-29T20:12:46.180

我认为这里有两个问题。

* * *

**`throw`和 和有什么不一样`throw e;`？**

我不认为有充分的理由写作`catch (Exception e) { throw e; }`。这会丢失原始的堆栈跟踪。当您使用`throw;`原始堆栈跟踪时，会被保留。这很好，因为这意味着更容易找到错误的原因。

* * *

**`catch`和 和有什么不一样`catch (Exception e)`？**

您的两个示例都相同且同样无用-它们只是捕获异常然后重新抛出它。一个小的区别是第一个示例将生成编译器警告。

> 变量“e”已声明但从未使用

如果你的 catch 块中有一些其他代码实际上做了一些有用的事情，那么问这个问题更有意义。例如，您可能想要记录异常：

```
try
{
    int value = 1 / int.Parse("0");
}
catch (Exception e)
{
    LogException(e);
    throw;
} 
```

现在有必要使用第一个版本，以便您可以引用捕获的异常。

如果您的 catch 块实际上没有使用异常，那么您可能希望使用第二个版本来避免编译器警告。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-29T21:33:18.753

如果我们忽略“未使用的变量”警告，那么唯一一次有**实际**区别

```
catch {...} 
```

和

```
catch(Exception ex) {...} 
```

当一些非 C# 代码抛出非`Exception`异常时。C++ 可以抛出***任何东西***。在 .NET 1.1 中，您**必须**使用`catch`(no `(Exception ex)`) 来处理这些异常异常。然而，这是有问题的——尤其是，你看不到抛出了什么！因此，在 .NET 2.0 及更高版本中，默认情况下这是包装的，所以即使 C++ 抛出，比如说，a `string`- 你也将它视为一个`Exception`子类。请注意，这可以通过配置设置禁用，但是：不要。不要管它！

`throw;`已经提到了vs的问题`throw ex;`，并且与堆栈跟踪有关。您可以`throw`在这两种情况下使用，从而保留原始堆栈跟踪。

# android - 如何将 GridView 的选择模式设置为多个？

> ID：10805988
> 
> 赞同：5
> 
> 时间：2012-05-29T20:11:10.343
> 
> 标签：android, gridview

我的代码中有这一行：

```
myGridView.setChoiceMode(GridView.CHOICE_MODE_MULTIPLE); 
```

它在 ICS 中运行良好，但在 2.2 和 2.3.x 中崩溃并出现以下错误：

```
java.lang.NoSuchMethodError: android.widget.GridView.setChoiceMode 
```

然而，查看[文档](http://developer.android.com/reference/android/widget/AbsListView.html#setChoiceMode%28int%29)告诉我 API 1 支持该方法，尽管它是从`AbsListView`. 我还发现这个[问题](http://code.google.com/p/android/issues/detail?id=16571)报告了没有明显解决方案的问题

现在有没有人解决这个问题，或者知道如何将所有版本的选择模式设置为多个？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T17:55:37.223

如果您打算在 API 10 或更早版本上运行代码，则无法解决此问题，这些旧版本的 Android 上根本不存在该实现。

如果您真的希望 GridView 具有选择模式，则需要自己编写代码。放置代码的最佳位置是在您的适配器实现中。

# qt - 用于大量对象的 Qt 图形画布？

> ID：10805989
> 
> 赞同：1
> 
> 时间：2012-05-29T20:11:11.270
> 
> 标签：qt, graphics

我现在有两个项目使用 Qt 作为小部件工具包，它们都处理（我称之为）需要交互呈现的大量数据（很容易超过 10,000,000 个数据元素）。理想情况下，每个“数据元素”将使用大约三到五个图元（线/矩形/圆等）呈现；所以总共可能有 40,000,000 个图形基元。

我已经尝试了明显的 QGraphicsView/QGraphicsScene 方法，但是这些类在大约 400,000 个元素处开始变慢，令人无法接受。上次我遇到这个问题时（对于更适度的 1,000,000 个基元），我为 Qt 手动实现了一个图形画布。这是一个触摸错误（至少一个我无法修复的渲染错误......），并且依赖于我不想拉入我的其他一些（写得不好，有错误）的代码当前项目。

所以，我的问题是：是否有（最好是开源的）Qt 图形画布可以处理这些类型的负载？还是我最好根据我的特定需求编写一个？

谢谢。

# data-structures - 查找存储为 Ahnentafel 数组的二进制最大堆的最小元素

> ID：10805992
> 
> 赞同：2
> 
> 时间：2012-05-29T20:11:27.053
> 
> 标签：data-structures, heap

我有一个二进制最大堆（顶部的最大元素），我需要通过每次达到 20 个元素时去掉*最小的元素来保持它的大小不变（比如 20 个元素）。*二叉堆存储在一个数组中，节点 i 的子节点位于 2*i 和 2*i+1（i 从零开始）。在任何时候，堆都有 'n_elements' 元素，介于 0 和 20 之间。例如，数组 [16,14,10,8,7,9,3,2,4] 将是一个有效的最大二进制堆，其中16 人有 14 岁和 10 岁的孩子，14 人有 8 岁和 7 岁的孩子......

要找到最小的元素，似乎一般我必须从 n_elements/2 到 n_elements 遍历数组：最小的元素不一定是数组中的最后一个。

因此，仅使用该数组，似乎任何寻找/删除最小 elt 的尝试至少是 O(n)。那是对的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T14:22:28.063

对于任何给定的有效最大堆，最小值将仅在叶节点处。下一个问题是如何在数组中找到堆的叶子节点？如果我们仔细观察数组的最后一个节点，它将是最后一个叶节点。通过公式获取叶节点的父节点

```
parent node index = (leaf Node Index)/2 
```

从索引开始线性搜索`(parent node index +1)`到最后一个叶节点索引，获取该范围内的最小值。

```
FindMinInMaxHeap(Heap heap)
   startIndex = heap->Array[heap->lastIndex/2]
   if startIndex == 0
          return heap->Array[startIndex]
   Minimum = heap->Array[startIndex + 1]
   for count from startIndex+2 to heap->lastIndex
            if(heap->Array[count] < Minimum)
                Minimum := heap->Array[count]
   print Minimum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T20:19:49.343

我想不出任何方法可以通过`O(n)`单独使用堆来提高从最大堆中查找和删除最小元素的性能。您可以采取的一种方法是：

如果您自己创建此堆数据结构，则可以保留一个单独的指针，指向数组中最小元素的位置。因此，每当将新元素添加到堆中时，请检查新元素是否更小。如果是，则更新指针等。然后找到最小的元素`O(1)`。

MBo 在评论中提出了一个很好的观点，即每次删除后如何获取下一个最小元素。每次删除后，您仍然需要执行 O(n) 来找到下一个最小元素。所以删除仍然是`O(n)`. 但是找到最小的元素将是`O(1)`

如果您还需要更快地删除，您还需要维护所有元素的最小堆。在这种情况下，删除将是`O(log(n))`. 插入将花费 2 倍时间，因为您必须插入两个堆，并且它也将占用 2 倍空间。

顺便说一句，如果你在任何时候都只有 20 个元素，这并不重要（除非这是一个家庭作业问题，或者你只是为了好玩）。仅当您计划将其扩展到数千个值时才真正重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:03:44.813

有 minmax 堆数据结构：[http://en.wikipedia.org/wiki/Min-max_heap](http://en.wikipedia.org/wiki/Min-max_heap)。当然，它的代码相当复杂，但是对于两个独立的堆，我们必须使用大量额外的空间（对于第二个堆，用于维护一对一的映射），并且需要两次完成这项工作。

# javascript - 如何设置空警报

> ID：10805994
> 
> 赞同：1
> 
> 时间：2012-05-29T20:11:33.703
> 
> 标签：javascript

我用脚本做了一个小游戏。那是一种算术游戏。我问2+2-3=？用户必须给出答案。如果答案正确，则警报将显示祝贺，如果答案错误，则您高于或低于实际答案。但是现在我想添加另一个警报，如果有人没有回答这个问题并将提示留空并按回车，那么另一个警报将显示为“你更宽松”。我的问题是；如何将值设置为空和警报。这是我尝试过的，但没有奏效。请看下面的代码：

```
<script type="text/javascript">
    var number = prompt("count these numbers: 2+5-10+8=?");
    if (number == 5) {
        alert("Congratulations Your Answer is Correct");
    } else if (number > 5) {
        alert("Your answer is a little higher.");
    } else if (number < 5) {
        alert("Your answer is little lower than actual answer.");
    } else if (number == "null") {
        alert("You are looser!");
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:18:26.723

我会解析这个数字，所以它实际上是一种`Number`类型，而不是依赖于`==`为你强制值。然后，您可以`NaN`使用该`isNaN`功能进行检查，或者更好的是，完全放弃`if`并使其成为`else`：

```
var number = parseInt(prompt("count these numbers: 2+5-10+8=?"), 10);
if (number === 5) {
    alert("Congratulations! Your answer is correct.");
} else if (number > 5) {
    alert("Your answer is a little higher.");
} else if (number < 5) {
    alert("Your answer is little lower than actual answer.");
} else {
    alert("You are a loser!");
}​ 
```

[http://jsfiddle.net/KebNN/](http://jsfiddle.net/KebNN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:14:50.260

只需将其与空字符串进行比较：

```
if (number == '') {
    // ... 
```

此外，如果您想在“取消”点击时提醒相同的消息，您可以简单地检查 number 是否计算为 false：

```
if (!number) {
    // ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T20:14:40.937

使用 (answer == null || answer == undefined || answer == '')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T20:15:01.557

尝试：

```
} else if (number == "" || isNaN(number)) {
    alert("You are looser!");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T20:15:06.740

我不确定我是否理解这个问题，但这是你要找的吗？

```
alert(""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T20:16:05.397

如果用户在提示符下按取消，则值为`null`。通过将其与 进行比较`===`，我们确保答案不是 0（`0 == null`为真）。

```
<script type="text/javascript">
    var number = prompt("count these numbers: 2+5-10+8=?");
    if (number === null) {
        alert("You are loser!");            
    } else if (number == 5) {
        alert("Congratulations Your Answer is Correct");
    } else if (number > 5) {
        alert("Your answer is a little higher.");
    } else if (number < 5) {
        alert("Your answer is little lower than actual answer.");
    }
</script>​ 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-29T20:19:32.667

您已经考虑了除 null 之外的所有可能结果，您可以在第一个 if 语句的末尾添加一个 else 作为全部内容。如果用户将其留空或输入无效字符，则 IE。

```
if( number == 5 ) {
   alert( "Congratulations Your Answer is Correct" );
} else if ( number > 5  ) {
   alert( "Your answer is a little higher." );
} else if ( number < 5 ) {
   alert( "Your answer is little lower than actual answer." );
} else {
   alert("You are looser!");
} 
```

......

# python - 如何比较 u'string' 和 'string'？

> ID：10805996
> 
> 赞同：3
> 
> 时间：2012-05-29T20:11:45.777
> 
> 标签：python

我正在尝试比较字典中的键和字符串。

```
if k == key:
   #do whatever 
```

repr(k) 是 u'string' 而我给它的关键字符串是 'string'。我怎样才能得到它，所以 u'string' 将等于 'string'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:14:02.823

直接比较应该开箱即用：

```
In [1]: u'string' == 'string'
Out[1]: True 
```

# .net - List.Aggregate 意外结果

> ID：10805997
> 
> 赞同：0
> 
> 时间：2012-05-29T20:11:50.523
> 
> 标签：.net, string, list, aggregate

当我运行此代码时：

```
List<string> list = new List<string>();
list.Add("a");
list.Add("b");
list.Add("c");
list.Add("d");

string s = list.Aggregate((total, item) => total += item + ","); 
```

我希望 s 是：

```
a,b,c,d, 
```

但相反，s 是：

```
ab,c,d, 
```

谁能告诉我为什么它不在第一个和第二个索引之间附加逗号？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T20:22:36.003

你会发现这行得通

```
string s = list.Aggregate(string.Empty, (total, item) => total += item + ","); 
```

如果您对此进行测试，您会看到原因：

```
var total = "a";
var item = "b";
var s = total += item + ","; 
```

这导致“ab”，

对 total 使用初始的空种子值（(string)null 或 string.Empty）将为您提供预期的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:23:24.880

聚合的以下重载将起作用：

```
string s = list.Aggregate<string, string>(null, (total, item) => total + item + ","); 
```

基本上，您使用的版本将“a”作为`total`初始条件的值，然后使用提供的 lambda 附加其余部分。我的版本从总计开始`null`，然后附加每个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T20:24:08.263

尝试和工作

```
string s = list.Aggregate((total, item) => total += "," + item); 
```

问题是：运行时第一次调用 Aggregate Func 时`total`是“a”，item 是“b”。实际上，此扩展旨在执行计算而不是连接字符串。

但是请注意，结果字符串是 a,b,c,d （没有结尾逗号）我不知道这是否更可取（取决于您对结果字符串的使用）

# ruby - 如何在 Ruby 中替换字符串周围的字符？

> ID：10805999
> 
> 赞同：0
> 
> 时间：2012-05-29T20:11:52.720
> 
> 标签：ruby, parsing, replace, bbcode, substitution

我正在尝试编写一个 ruby​​ 脚本来将我编写的一种小型标记语言转换为 HTML，但我不知道如何解析链接。它基本上是 BBCode 的精简版，例如，如果有人输入`[i]{text}[/i]`，我使用`[i]{text}[/i].gsub('[i]','<i>').gsub('[/i]','</i>'`. 不过，我不知道如何解析链接。我会`[url=website.com]site[/url]`变成`<a href="website.com">site</a>`怎样？我没有使用预制的 BBCode 解析器，因为有一些不同的标签，我不希望人们使用一些标签，例如`[img][/img]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:37:53.870

我同意**kch**使用正则表达式，但如果你想像你一直在做的那样使用**gsub()**来环绕它......

```
s = "[url=website.com]site[/url]"
s2 = s.gsub('[url=','<a href="').gsub('[/url]','</a>').gsub(']','">') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:19:59.110

很天真：

```
s.gsub(/\[url=(.*?)\](.*?)\[\/url\]/) { "<a href='#{$1}'>#{$2}</a>" } 
```

HTML 注入将非常容易。[这里](https://stackoverflow.com/a/1732454/13989)的要点（编写一个适当的解析器）仍然适用于您正在做的事情。