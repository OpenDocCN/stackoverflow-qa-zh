# StackOverflow 问答 10869000-10869999

# objective-c - NSPathControl setDoubleAction 不起作用

> ID：10869001
> 
> 赞同：0
> 
> 时间：2012-06-03T08:44:43.963
> 
> 标签：objective-c, nspathcontrol

我`NSPathControl`在我的应用程序中添加了一个视图。在`awakeFromNib`我设置双击动作： -

```
[currentPath setDoubleAction:@selector(dClickPath:)]; 
```

不幸的是，双击PathControl 不起作用，虽然我首先测试了这个简单的独立测试应用程序。

我怀疑可能与其他元素有一些相互作用。特别是我有一个`NSSplitView`包含 a`NSOutlineView`和 a 的 a `NSTableView`，它们都具有 Double Click Target 绑定来分隔控制器中的选择器。

我不明白为什么这些会影响 NSPathControl。

如果我将`NSPathControl`选择器连接到 dClickPath: 然后单击 PathControl 即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:16:52.437

你在设定目标吗？当您在 IB 中连接控件时，会设置目标和操作。如果在 IB 中不这样做，那么在代码中设置双击动作是不够的。您还必须设定目标。

# java - 重新获取锁

> ID：10869002
> 
> 赞同：1
> 
> 时间：2012-06-03T08:45:10.533
> 
> 标签：java, multithreading, locking

我声明了一个 Condition 类型的变量：

```
private Condition waitingCond; 
```

然后，在`Bridge`I 的构造函数中声明一个与同一变量关联的条件变量：

```
waitingCond = lock.NewCondition(); 
```

然后在阻塞方法中，我有这个：

```
public void getIn(int direction) throws InterruptedException{
    lock.lock(); 
    try{
        if(direction == Car.DIR_NORTH){
            while((nSudWaiting>0)) 
            waitingCond.await(); 
            nNordWaiting++;  
            //...............
        } else {
            //............
        } waitingCond.signal();
    }
    finally{ 
        lock.unlock() 
    }
} 
```

问题：

1.  我在这里说得对吗，方法 await 意味着释放锁？ `waitingCond.await(); // waiting release lock`

2.  如果我上面所说的是正确的，那么下面的语句是否再次启用了锁（线程持有锁）？

    `waitingCond.await(); // waiting release lock`
    `nNordWaiting++; // getting back the lock`

我想了解的是：下面的任何语句`waitingCond.await();`都可以重新获取锁？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:53:55.963

从Lock.newCondition的[文档中：](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html#newCondition%28%29)

> 调用 Condition.await() 将在等待之前自动释放锁，并在等待返回之前重新获取锁。

这意味着当调用 await() 时，锁被释放，但是一旦你的代码继续等待，锁会自动重新获得。

[await](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html#await%28%29)的文档详细说明（强调我的）：

> **与此 Condition 关联的锁被自动释放**，并且当前线程出于线程调度目的而被禁用并处于休眠状态，直到发生以下四种情况之一：
> 
> *   其他一些线程为此 Condition 调用 signal() 方法，当前线程恰好被选为要唤醒的线程；或者
> *   其他一些线程为此条件调用 signalAll() 方法；或者
> *   其他一些线程中断当前线程，支持中断线程挂起；或者
> *   发生“虚假唤醒”。
> 
> 在所有情况下，**在此方法可以返回之前，当前线程必须重新获取与此条件关联的锁。当线程返回时，它保证持有这个锁。**

# console - 交互式 CLI 类型的 Web 应用程序

> ID：10869005
> 
> 赞同：2
> 
> 时间：2012-06-03T08:46:38.733
> 
> 标签：console

我正在尝试创建一个个人网站，用户可以在其中输入“命令”来显示信息——比如 UNIX 命令的工作原理（例如，输入 about 表示 About Me 或 contact 输入联系方式，或 ls 表示所有链接的列表） .

我在网上搜索希望找到一些教程，但我能找到的大部分内容都与通过命令行打开网站有关（也许我只是不擅长谷歌搜索）。

我想要实现的例子很多：[http](http://cb.vu/) : //cb.vu/，当然还有codecademy 和tryruby。

如果有人能指出我需要学习哪些语言/框架才能继续我的项目，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:59:45.070

cb.vu 网站使用来自以下网址的 javascript 终端模拟器：http: [//www.masswerk.at/termlib/](http://www.masswerk.at/termlib/)

还有其他几个类似的项目可以做到这一点。

基本思想是能够获取用户输入，然后调用服务器，然后显示输出。

从头开始做起来并不难，但如果你正在寻找一个真正的 unix 终端控制台并且不想做一些原创的事情，那么你可以通过谷歌找到它们。

围绕这个想法构建了几个 8 位机器和代码执行环境的 Web 模拟器，所以这些都是挖掘的好地方。

# c# - Application_AuthenticateRequest 不断调用无限重定向

> ID：10869006
> 
> 赞同：3
> 
> 时间：2012-06-03T08:47:02.740
> 
> 标签：c#, asp.net, form-authentication

这是我[之前的问题](https://stackoverflow.com/q/10846307/481656)的延续。

我曾尝试使用内置的 ASP 登录机制，但它对我不起作用。主要原因是，我被要求保持简洁。

现在，这就是我的立场：

**网页配置**

```
<system.web>
    <sessionState timeout="10" />

    <authentication mode="Forms">
        <forms timeout="30" loginUrl="~/SecuredArea/LogInOut/log-in.aspx" />
    </authentication>

    <authorization>
        <allow users="?" />
    </authorization>

</system.web>

<location path="SecuredArea/AdminArea">
    <system.web>
        <authorization>
            <allow roles="administrators" />
            <deny users="*" />
        </authorization>
    </system.web>
</location>

<location path="SecuredArea/EmployeeArea">
    <system.web>
        <authorization>
            <allow roles="employees" />
            <deny users="*" />
        </authorization>
    </system.web>
</location> 
```

**全球.asax**

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    if (HttpContext.Current.User != null)
    {
        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            IIdentity userId = HttpContext.Current.User.Identity;

            //if role info is already NOT loaded into cache, put the role info in cache
            //if (HttpContext.Current.Cache[userId.Name] == null)
            //{
            //  string[] roles;

            //  if (userId.Name == "admin")
            //  {
            //    roles = new string[1] { "administrators" };
            //  }
            //  else if (userId.Name == "member1")
            //  {
            //    roles = new string[1] { "employees" };
            //  }
            //  else
            //  {
            //    roles = new string[1] { "public" };
            //  }

              //1 hour sliding expiring time. Adding the roles in cache. 
              //This will be used in Application_AuthenticateRequest event located in Global.ascx.cs 
              //file to attach user Principal object.
            //  HttpContext.Current.Cache.Add(userId.Name, roles, null, DateTime.MaxValue, TimeSpan.FromHours(1), CacheItemPriority.BelowNormal, null);
            //}

            //now assign the user role in the current security context
            HttpContext.Current.User = new GenericPrincipal(userId, (string[])HttpContext.Current.Cache[userId.Name]);
        }
    }
} 
```

我在这里评论了令人困惑的代码，因为我不想在这里访问数据库并遍历所有可能的员工。对于管理员帐户，这很容易，但对于员工帐户，这是不可能的。

**登录.aspx.cs**

```
protected void ButtonLogOn_Click(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(txtUserName.Value.Trim()) || String.IsNullOrEmpty(txtPassword.Value.Trim()))
    {
        labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
    }
    else
    {
        try
        {
            LoginPage loginBack = new LoginPage();
            int result = loginBack.VerifyCredentials(txtUserName.Value.Trim(), txtPassword.Value.Trim());

            switch (result)
            {
                case -9:
                //System needs provisioning
                labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("SMB Password Reset System need provisioning. Login as Administrator.");
                break;

                case 0:
                //Enroll-able User
                // Success, create non-persistent authentication cookie.
                FormsAuthentication.SetAuthCookie(txtUserName.Value.Trim(), false);

                FormsAuthenticationTicket ticketEmployee =
                    new FormsAuthenticationTicket(
                        1,                                                      // version
                        txtUserName.Value.Trim(),           // get username  from the form
                        DateTime.Now,                                   // issue time is now
                        DateTime.Now.AddMinutes(10),    // expires in 10 minutes
                        false,                                              // cookie is not persistent
                        "employees");

                HttpCookie cookieEmployee = new HttpCookie(FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(ticketEmployee));
                Response.Cookies.Add(cookieEmployee);

                SiteLogin.PerformAuthentication(txtUserName.Value.Trim(), false);
                break;

                case 1:
                //User not in required directory group
                labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("You cannot login because you are not authorized.");
                break;

                default:
                //Bad name and/or password                              
                labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
                break;
            }
        }
        catch (MessageSecurityException expMse)
        {
            //Bad name and/or password
            Debug.WriteLine("Error: " + expMse.Message);
            labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
        }
        catch (Exception exp)
        {
            labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("Some general error has occured. Message reads: " + exp.Message);
        }
    }
}

protected void ButtonAdminLogOn_Click(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(txtUserName.Value) || String.IsNullOrEmpty(txtPassword.Value))
        labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("<strong>Login Please!</strong><hr/>You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
    else
    {
        //if the log-in is successful
        if (txtUserName.Value == "admin" && txtPassword.Value == "AlphaBeta")
        {
            // Success, create non-persistent authentication cookie.
            FormsAuthentication.SetAuthCookie(txtUserName.Value.Trim(), false);

            FormsAuthenticationTicket ticketAdmin =
                new FormsAuthenticationTicket(
                    1,                                                      // version
                    txtUserName.Value.Trim(),           // get username  from the form
                    DateTime.Now,                                   // issue time is now
                    DateTime.Now.AddMinutes(10),    // expires in 10 minutes
                    false,                                              // cookie is not persistent
                    "administrators");

            HttpCookie cookieAdmin = new HttpCookie(FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(ticketAdmin));
            Response.Cookies.Add(cookieAdmin);

            SiteLogin.PerformAdminAuthentication(txtUserName.Value.Trim(), false);
        }
        else
        {
            labelMessage.Text = MessageFormatter.GetFormattedErrorMessage("<strong>Login Failed!</strong><hr/>The username and/or password you entered do not belong to any Administrator account on our system.<br/>You can login using a username and a password associated with your account. Make sure that it is typed correctly.");
        }
    }
} 
```

最后，实用程序类：**SiteLogin.cs**

```
public sealed class SiteLogin
{       
    public static void PerformAuthentication(string userName, bool remember)
    {
        FormsAuthentication.RedirectFromLoginPage(userName, remember);

        if (HttpContext.Current.Request.QueryString["ReturnUrl"] == null)
        {
            RedirectToDefaultPage();
        }
        else
        {
            HttpContext.Current.Response.Redirect(HttpContext.Current.Request.QueryString["ReturnUrl"]);
        }
    }

    public static void PerformAdminAuthentication(string userName, bool remember)
    {
        FormsAuthentication.RedirectFromLoginPage(userName, remember);

        if (HttpContext.Current.Request.QueryString["ReturnUrl"] == null)
        {
            RedirectToAdminDefaultPage();
        }
        else
        {
            HttpContext.Current.Response.Redirect(HttpContext.Current.Request.QueryString["ReturnUrl"]);
        }
    }

    /// <summary>
    /// Redirects the current user based on role
    /// </summary>
    public static void RedirectToDefaultPage()
    {
        HttpContext.Current.Response.Redirect("~/SecuredArea/EmployeeArea/EmployeeDefaultPage.aspx");
    }

    /// <summary>
    /// Redirects the current user based on role
    /// </summary>
    public static void RedirectToAdminDefaultPage()
    {
        HttpContext.Current.Response.Redirect("~/SecuredArea/AdminArea/AdminDefaultPage.aspx");
    }

    public static void LogOff()
    {
        // Put user code to initialize the page here
        FormsAuthentication.SignOut();

        //// Invalidate roles token
        //Response.Cookies[Globals.UserRoles].Value = "";
        //Response.Cookies[Globals.UserRoles].Path = "/";
        //Response.Cookies[Globals.UserRoles].Expires = new System.DateTime(1999, 10, 12);

        //Set the current user as null
        HttpContext.Current.User = null;
    }
} 
```

现在，每当我尝试登录时，我都会遇到严重不一致的行为。最大的问题是，一旦我尝试访问管理员或员工的任何受保护页面，我就会被重定向到登录页面。我提供了详细信息并尝试登录，在两种情况下（简单的管理员登录和复杂的员工登录），我都在浏览器中收到错误。IE 没有多大意义，但 Firefox 抱怨是有道理的：

> **页面未正确重定向** *Pale Moon 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。* 此问题有时可能是由禁用或拒绝接受 cookie 引起的。

我在调试它时遇到了麻烦，但似乎是 inside`Global.asax`的`Application_AuthenticateRequest()`方法，该方法只是一遍又一遍地调用。

有趣的是，如果我转到未受保护的页面，我可以看到自己已登录并在我的标题中看到“欢迎管理员！，注销”。这是通过母版页动态完成的

```
<div class="info-area">
    <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
        <LoggedInTemplate>
            Welcome <span class="bold">
                <asp:LoginName ID="HeadLoginName" runat="server" />
            </span>! |
        </LoggedInTemplate>
    </asp:LoginView>
    <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Logout" LogoutPageUrl="~/SecuredArea/LogInOut/log-out.aspx" />
</div> 
```

任何人都可以确定问题吗？我今天真的需要关闭这个东西。谢谢。

**编辑**

我用过提琴手，我看到一旦我按下登录，就会创建一个无限循环。我可以通过图像显示行为：

**访问安全区域时被抛出到登录页面**

![访问安全区域时被抛出到登录页面](../Images/114321a359bae3280e6ce038b05f522c.png)

**输入凭据并按下登录按钮**

![输入凭据并按下登录按钮](../Images/48e5f94f1c0fbd1a6d9ecc4dbcc51713.png)

**凭据被接受并重定向回安全页面并再次重定向到登录等等**

![凭据被接受并重定向回安全页面并再次重定向到登录等等](../Images/d089cc3d3424adf86b19bafc90607795.png)

我选择了 fiddler 的 Cookies 选项卡，因为那里检测到了明显的变化。

# vim - Fedora 中只读取 vimrc 的一部分

> ID：10869009
> 
> 赞同：0
> 
> 时间：2012-06-03T08:47:53.243
> 
> 标签：vim

我刚刚在虚拟机中安装了 Fedora，当我打开 vim 时，我的 vimrc 只是被部分读取。即，某些设置已设置，但其他设置未设置。它是 vim 版本 7.3.515。

例如，打开行号等设置有效，但`let mapleader = ","`没有将逗号设置为前导字符。（事实上​​，反斜杠也不起作用）。

另外，我的配色方案没有被加载：

```
if $COLORTERM == 'gnome-terminal'
    set t_Co=256
endif

if has("gui_running")
    colorscheme wombat
elseif &t_Co == 256
    colorscheme wombat256
endif 
```

然而，这些在 gvim 中工作正常。这是我在所有机器上使用的同一个 vimrc，所以我真的不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:00:47.237

```
:set ft=vim
gg=G 
```

重新缩进代码后：

```
if $COLORTERM == 'gnome-terminal'
    set t_Co=256
    if has("gui_running")
        colorscheme wombat
    elseif &t_Co == 256
        colorscheme wombat256
    endif 
```

* * *

`if...endif`不匹配！
您需要添加`endif`到关闭`if`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:18:30.997

从来没有找到确切的原因，但`$ yum install vim`成功了。它与已安装的版本相同；也许它是用不同的选项编译的。

# javascript - 浅克隆对象是什么意思？

> ID：10869012
> 
> 赞同：0
> 
> 时间：2012-06-03T08:48:32.447
> 
> 标签：javascript, underscore.js

我正在使用 underscore.js 库有一个克隆方法。

```
var newObject = _.clone(oldObject); 
```

我从其中一个评论中读到它是一个浅克隆。我想克隆一个对象并将其传递给不同的函数。

当我更改内部的 newObject 时`function A()`，我得到以下结果...

```
{
    'Des': 'Some Des'
    'Des1': 4,
    'Des2': {
        "ChildDes": 0,

    },
}, 
```

但是，当我将作为克隆对象的 newObject 传递给另一个`function B()`时，我得到的警报值为`[Object,Object]`. 为什么？我无法打印这样的值..

```
function B(newObject){
   alert(newObject.Des2);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T09:31:14.917

“浅拷贝”是一个拷贝，它只拷贝所有成员。如果其中一个成员是对对象的引用，则复制引用的更改将影响原始引用。“深拷贝”也将复制对象，因此对深拷贝元素的更改不会影响原始对象。有时很难实现深拷贝，因为对象成员可能对对象本身有引用。

玩一点不同的复制风格，看看会发生什么。另请参阅：[clone() 一个对象是什么意思？](https://stackoverflow.com/questions/1749581/what-does-it-mean-to-clone-an-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:47:33.137

术语“浅拷贝”和“深拷贝”的使用不一致，恕我直言，应避免使用。我建议将克隆操作分为三类：

1.  对于以保存各种对象为目的的事物（例如“SuperDuperList”），公共克隆方法的行为应该是创建原始类型的新实例，该实例与原始类型保持相同的实例，但与其分离。对原始或克隆对象所做的任何事情都不会影响另一个对象存在的东西的身份。请注意，虽然 `SuperDuperList` 可能有一些 `T[]` 类型的私有字段，但 `SuperDuperList` 的*目的*不是保存`T` 的*数组*，而是保存*实例*的`T`。因此，“SuperDuperCollection”的正确克隆方法必须用新数组替换任何可变数组，这些数组与原始数组具有相同的“T”实例，但与它们分离。有些人将这种类型的副本称为“浅拷贝”，但有些人将该术语用于下面的#2“损坏的副本”语义。有人称其为“深拷贝”，但有些人——包括我自己——会将该术语限制为使用 #3。我更喜欢术语“语义级副本”。
2.  一些损坏的克隆方法使原始对象和克隆对象都持有对共享对象的引用，*从原始对象的角度来看，*共享对象是可变的。请注意，从“SuperDuperList”的角度来看，“T”类型的存储位置不包含对可能可变对象“T”的引用，而是包含“T”的不可变*标识*。另一方面，如果 `SuperDuperList` 有一个包含对 `T` 数组的引用的字段，并且该数组将永远被变异，那么一种克隆方法可以让原始对象和克隆对象保持对相同的引用阵列将被破坏。
3.  一些克隆方法要求被克隆对象持有的对象必须满足某些特殊标准，以便它们本身可以被克隆（最典型的是，每个嵌套对象的每个属性都必须是不可变的或提供克隆方法）。在某些情况下，这些对象的集合可能并不确切知道这些对象是什么或它们的克隆方法实际上做了什么；如果集合的克隆操作的语义比它对存储在其中的对象的理解更深入，那么这样的集合是可深度克隆的。

派生对象的克隆方法的正常模式应该是首先克隆其父对象，然后克隆任何包含对外部对象的引用的字段，这些外部对象包含被克隆的对象应该包含的内容，并且不能依赖这些内容来保存那些同样的事情永远。如果每个派生类都遵循该模式，则将实现适当的语义级克隆。

# css - CSS悬停未在iOS上触发

> ID：10869016
> 
> 赞同：0
> 
> 时间：2012-06-03T08:49:03.067
> 
> 标签：css, ios, hover

我正在测试我在 iOS、Android 和 WP7 移动浏览器上创建的页面，发现我的 css 悬停事件不会在 iOS 上触发，尽管它适用于 android 和 WP7。有人会碰巧知道为什么会这样吗？这是我正在使用的 CSS。

谢谢

```
.tooltip
{   
    position: absolute;
    display: block;
    visibility: collapse;
    z-index: 2;
    width: 190px;
    height: 163px;
    opacity: 0;
    color: #777;
    background-color:#fff;
    top: -20px;
    left: -20px;
    padding: 0px 0px 0px 0px;
    line-height: 25px;
    border-radius: 0px 0px 0px 0px;
    -moz-transition-property: opacity, visibility;
    -moz-transition-duration: 0.3s, 0.1s;
    -webkit-transition-property: opacity, visibility;
    -webkit-transition-duration: 0.3s, 0.1s;
    box-shadow: -1px -1px 4px rgba(0, 0, 0, 0.3);

}

 .hover-image:hover .tooltip
{
    opacity: 1;
    visibility: visible;
} 
```

以及它正在影响的元素

```
<figure class="hover-image">
        <div><p class="notice">hover on me</p>[AlbumLogoSource]</div>
    <p class="item-title">[SGSV:Value:AlbumTitle]</p>   
        <figcaption class="tooltip">
            <ul class="tooltip-inner">

                <li><a href="/mypage">
                    <div class="inner-item-logo">[AlbumLogoSource2]</div></a></li>
                <li>
                    <ul class="tooltip-menu">

                        <li><a href="/view">view</a></li>

                        <li><a href="/upload">upload</a></li>

                    </ul>
                </li>
            </ul>

        </figcaption>
    </figure> 
```

# c# - Delphi/C#：WebBrowser socks5 代理（使用用户名/密码验证）

> ID：10869020
> 
> 赞同：0
> 
> 时间：2012-06-03T08:50:24.187
> 
> 标签：c#, delphi, webbrowser-control, socks, twebbrowser

如何在 WebBrowser (IE 8/9) 中使用带有登录名/密码的 SOCKS 5 代理？

在德尔福我尝试过这样的事情：

```
var
  PIInfo: PInternetProxyInfo;
begin
  New(PIInfo);
  PIInfo^.dwAccessType := INTERNET_OPEN_TYPE_PROXY;
  PIInfo^.lpszProxy := PChar('socks=127.0.0.1:1080');
  PIInfo^.lpszProxyBypass := PChar('');
  UrlMkSetSessionOption(INTERNET_OPTION_PROXY, piinfo, SizeOf(Internet_Proxy_Info), 0);
  Dispose(PIInfo);
  WebBrowser1.Navigate('http://www.google.com');
end; 
```

但看起来它只有在代理不需要登录/密码身份验证时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:25:55.487

[Bsalsa 的嵌入式网络浏览器](http://bsalsa.com/downloads.html)允许您指定代理用户名/密码。

# oracle - 删除过程的 Oracle PLSQL 异常

> ID：10869026
> 
> 赞同：0
> 
> 时间：2012-06-03T08:51:23.003
> 
> 标签：oracle, plsql

我想创建一个简单的过程，当传递一个主键时，它将从表中删除一条记录。

我已经阅读[了这个](https://stackoverflow.com/questions/8841892/pl-sql-exceptions-on-update-delete-of-non-existing-row)关于 SQL%NOTFOUND 的帖子。我认为该问题的解决方案是使用一个函数来检查传递的参数是否是该表的主键并返回一个布尔值。我敢肯定，这里还有更多需要注意的地方。

我应该寻找哪些其他问题或特定例外情况？

这是我的程序的基本模板：

```
create or replace procedure delete_employee
  ( employee_id_i in employees.employee_id%type) is
begin
  if valid_employee(employee_id_i) then
    delete from employees where employee_id = employee_id_i;
  end if;
exception
  when others then
    log_error_proc(dbms_utility.format_error_stack(),
                   dbms_utility.format_error_backtrace());
end delete_employees; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T09:17:14.357

您应该改用`ROWCOUNT`隐式游标的属性。这将从`DELETE`语句中返回受影响的行数，并使您不必在`valid_employee`函数中查询表。

```
create or replace procedure delete_employee
  ( employee_id_i in employees.employee_id%type) is
begin
  delete from employees where employee_id = employee_id_i;
  if SQL%ROWCOUNT == 0 then
    null; -- throw exception, write log message, return something...
  end if;
exception
  when others then
    log_error_proc(dbms_utility.format_error_stack(),
                   dbms_utility.format_error_backtrace());
end delete_employees; 
```

# java - java-当我反复使用一个元素然后将该键的值更新为哈希图时反复出现错误

> ID：10869027
> 
> 赞同：1
> 
> 时间：2012-06-03T08:51:38.790
> 
> 标签：java, hashmap

我正在开发一个执行重复性编程任务的应用程序。

作为该任务的一部分，为变量分配一个值，然后将该变量插入到 hashmap 中，在某些操作中使用，然后将 hashmap 中的值替换为来自同一变量的新值。

我的意思是，在第一个值用完后，另一个值被分配给同一个变量-> 变量被插入到 hashmap-> 从 hashmap 获取的值用于操作-> 等等。

通过这种方式，许多值被添加->使用->从 hashmap 更新。这一切都发生在一个同时有一个计数器变量的循环中。

问题是在 while 循环的随机阶段突然抛出一个错误，即 hashmap 不包含具有指定键的对象。

这永远不会发生在 while 循环的相同计数器编号上……我在这里做错了什么？这是因为我反复在哈希图中插入->使用->更新值吗？

对于您的参考，将数据插入哈希图中的代码如下 -

```
 /* Function to store a variable- key value pair at designated level, in scraper context..
  *
  */
 public Object putVar(Object key, Variable value, Integer level) {
    super.put((this.getStringKey(key)+"~"+level.toString()), value);
    return null;
 } 
```

从哈希图中获取数据的代码如下 -

```
 /* Function to obtain object (value) with specified key and level in scraper context...
 *
 */
public Object get(Object key, Integer level) {

    String req= this.getStringKey(key);
    boolean found=false;
    System.out.println(" REQUIRED- Variable name="+ req + "level="+ level);
    for(int i= level; i>=1; i--)
    {
        if(this.containsKey(req+"~"+level.toString()) )
        {
            found=true;
            break;
        }
    }
    if(found==true)
        return(this.get(req+"~"+level.toString()));
    else
        return null;
} 
```

更新-异常堆栈跟踪如下---

```
 ERROR - Variable 'webpage' is not defined!
 org.webharvest.exception.VariableException: Variable 'webpage' is not defined!
at org.webharvest.runtime.processors.VarProcessor.execute(VarProcessor.java:70)
at org.webharvest.runtime.processors.BaseProcessor.run(BaseProcessor.java:119)
at org.webharvest.runtime.processors.BodyProcessor.execute(BodyProcessor.java:28)
at org.webharvest.runtime.processors.BaseProcessor.getBodyTextContent(BaseProcessor.java:176)
at org.webharvest.runtime.processors.BaseProcessor.getBodyTextContent(BaseProcessor.java:184)
at org.webharvest.runtime.processors.BaseProcessor.getBodyTextContent(BaseProcessor.java:188)
at org.webharvest.runtime.processors.FileProcessor.executeFileWrite(FileProcessor.java:146)
at org.webharvest.runtime.processors.FileProcessor.execute(FileProcessor.java:95)
at org.webharvest.runtime.processors.BaseProcessor.run(BaseProcessor.java:119)
at org.webharvest.runtime.processors.BodyProcessor.execute(BodyProcessor.java:28)
at org.webharvest.runtime.processors.WhileProcessor.execute(WhileProcessor.java:112)
at org.webharvest.runtime.processors.BaseProcessor.run(BaseProcessor.java:119)
at org.webharvest.runtime.Scraper.execute(Scraper.java:179)
at org.webharvest.runtime.Scraper.execute(Scraper.java:195)
at org.webharvest.gui.ScraperExecutionThread.run(ScraperExecutionThread.java:56) 
```

最后，抛出这个异常的相关代码如下——使用的hashmap的名字是'context'

```
Variable var = (Variable) context.get(name, curr_level);
 if (var == null) {
        throw new VariableException("Variable '" + name + "' is not defined!");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:47:29.733

您需要确保在您找到的级别返回值：

即你需要`get`稍微改变你的方法：

```
/**
 * Function to obtain object (value) with specified key and level in scraper context
 * i.e. if a value is not found for the key at the given level, lower levels will
 * be searched.
 */
public Object get(Object key, Integer level) {
    String req= this.getStringKey(key);
    System.out.println(" REQUIRED- Variable name="+ req + "level="+ level);
    for(int i= level; i>=1; i--) {
        if(this.containsKey(req + "~" + i) ) {
            return(this.get(req + "~" + i));
        }
    }
    return null; //or, throw your exception here to differentiate between
                 //finding a null value and not finding the key at all
} 
```

目前您只检查并返回 key 的值`req+"~"+level.toString()`。您还可以考虑为您的异常添加更多信息，例如`get`失败的级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T09:19:17.027

你的`get`不等于你的`put`：`put`荣誉的价值`level`。你`get`做了一些迭代，但迭代变量`i`不在*任何*地方使用。所有对 hashmap 的访问`get`都使用相同的固定值`level`。

这对我来说似乎更可疑。

# ruby-on-rails - 是否可以在单个规格测试中包含设置步骤？

> ID：10869029
> 
> 赞同：1
> 
> 时间：2012-06-03T08:52:01.863
> 
> 标签：ruby-on-rails, ruby, rspec

我正在编写一个规范来测试一种`down_vote`方法。但为了测试这一点，我需要在数据库中为现有投票输入一个条目。所以我的规范看起来像这样：

```
describe "down_vote" do
  it "lowers vote count" do
    video = Factory.create(:video)
    user = Factory.create(:user)
    vote = Factory.vote(:vote, :voter_id => user.id, :voteable_id => video.id)

    expect do
      user.down_vote(video)
    end.to change{ Vote.count }.by 1
  end
end 
```

可以编写这样的规范/测试吗？似乎有很多我不太习惯的设置，但我真的不知道有什么其他方法可以测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:37:18.260

我会做：

```
let(:video) { Factory.create(:video) }
let(:user)  { Factory.create(:user)}
let(:vote)  { Factory.vote(:vote, :voter_id => user.id, :voteable_id => video.id)}
describe "down_vote" do
  it "lowers vote count" do
    vote # or use let! To have the vote created directly
    expect do
      user.down_vote(video)
    end.to change{ Vote.count }.by 1
  end
end 
```

超出`let`您的规格使其可重复使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:35:06.193

假设您的规范按预期工作，只要不违反 DRY 原则，在单个测试块中使用工厂就没有错。如果许多测试要引用相同的对象，那么您可能希望使用 RSpec [let](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/helper-methods/let-and-let)或[before](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/hooks/before-and-after-hooks)块来实例化您的工厂对象。

您可能还想阅读有关“使用工厂”和“关联”的[factory_girl 文档](http://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)部分，以查看您的特定测试是否可以：

1.  使用#build 而不是#create 来避免写入数据库，并且
2.  利用#association 以便您的工厂可以隐式构建/创建关联记录。

根据经验，可以在相关测试块内执行特定于测试的设置。重要的是要避免以手动和容易出错的方式重复设置相同的数据。

# android - Android：在xml中选择包含视图的位置

> ID：10869030
> 
> 赞同：1
> 
> 时间：2012-06-03T08:52:20.637
> 
> 标签：android, android-xml, android-view

我正在使用游戏卡构建一个应用程序，并且我正在考虑创建一个自定义视图，该视图具有一个带有正面和背面的普通卡片，一旦单击该卡片就会从正面翻转到背面。

我一直在使用[Flip3DAnimation 教程](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)教程来实现卡片从前到后的翻转，并且效果很好。但是在应用程序上工作了一段时间后，我发现我的应用程序的下一部分将出现一个严重的问题，即在屏幕上拖放卡片。

今天早上在 freenode 聊天中与 JakeWharton 交谈时，我想我应该创建一个 XML 视图并将其包含在`main.xml`.

问题是，当我尝试移动包含的视图时，我所做的只是将图像卡在左上角。**问题：如何在父视图周围移动包含的 xml？**

**卡代码：**

```
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="80dp"
    android:layout_height="108dp"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/firstImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/c2" />

    <ImageView
        android:id="@+id/secondImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/back" />

</ViewFlipper> 
```

* * *

**代码`main.xml`：**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Board"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="top"
    android:background="@drawable/pinecropped" >

    <include
        android:id="@+id/firstCard"
        android:layout_marginRight="91dp"
        android:layout_marginTop="102dp"
        layout="@layout/card" />

</FrameLayout> 
```

* * *

这是我得到的图形布局：

[![图形布局](../Images/8045bc45e1c0a2e7f61ea239cf903388.png)](https://i.stack.imgur.com/YomGn.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:02:44.993

在 card.xml 更改：

```
<ImageView
        android:id="@+id/firstImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/c2" />

    <ImageView
        android:id="@+id/secondImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/back" /> 
```

至：

```
<ImageView
        android:id="@+id/firstImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/c2" />

    <ImageView
        android:id="@+id/secondImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/back" /> 
```

总是知道您可以使用[HierarchyViewer](http://developer.android.com/guide/developing/debugging/debugging-ui.html)工具来调试此类问题，我想您会看到卡片实际上占据了整个屏幕，这就是它们附加到顶部的原因。

更新：

似乎为了覆盖标签中的 layout_* 属性，您必须同时覆盖 layout_height 和 layout_width，请参阅此处的错误和解决方法： [http ://code.google.com/p/android/issues/detail?id=2863 #c9](http://code.google.com/p/android/issues/detail?id=2863#c9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:27:12.207

最后，我只是创建了一个不同的类来处理卡片，并有一个布局`main.xml`来在主要活动代码中表示它。

# ios - 为弹出视图控制器创建一个 NIB 文件

> ID：10869035
> 
> 赞同：1
> 
> 时间：2012-06-03T08:53:22.780
> 
> 标签：ios, cocoa-touch

我确信我遗漏了一些非常明显的东西，但是......

我想创建一个包含视图控制器（及其嵌入式视图）的 XIB 文件，以便在弹出窗口中显示。创建 XIB 本身不是问题，但调整它的大小是：因为它假定它是一个顶级视图，所以它坚持它是全屏大小，而不是缩小的弹出框大小。

有没有办法做到这一点，还是我坚持以编程方式创建控制器和查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:37:07.503

禁用界面构建器中视图的所有模拟用户界面元素 - 状态栏、导航栏等。界面构建器不允许您调整现有视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:16:58.690

使用 .. 设置 popOver 视图大小`setPopoverContentSize`这将更改弹出框内容视图的大小 .. 例如。

```
[aPopover setPopoverContentSize:CGSizeMake(200, 300) animated:YES]; 
```

# android-layout - 我可以在android中旋转一个按钮吗

> ID：10869036
> 
> 赞同：1
> 
> 时间：2012-06-03T08:53:23.530
> 
> 标签：android-layout

我正在开发应用程序，您可以在其中放置按钮，您可以将它们放置在您想要的任何位置.. 它是一种您从按钮构建雕塑的游戏，我想添加一个旋转每个按钮的功能与用户的选择..那么我如何通过编码旋转android中的按钮......就像有一些像旋转（角度）这样的功能; 我不想使用 XML 格式，因为我想这是静态的，我们无法在程序运行时更改它的值。例如，我在某个地方找到了它，但这是静态的，它旋转整个布局，但我只是想要r0tate 一个特定的元素..

```
<?xml version="1.0" encoding="UTF-8"?>
<rotate
xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="0"
android:toDegrees="90"
android:pivotX="50%"
android:pivotY="50%"
android:repeatCount="0"
android:duration="1200" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-24T13:11:21.453

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android" 
    android:fromDegrees="90"
    android:toDegrees="90"
    android:pivotX="50%"
    android:pivotY="50%"
    android:drawable="@drawable/mainmenu_background">
</rotate> 
```

您可以使用这个 xml 文件，这里是 java 代码

```
Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotation);
rotation.setRepeatCount(Animation.INFINITE);
myView.startAnimation(rotation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:01:57.157

几乎所有在 Android 上绘制的东西都是从 View 扩展而来的

查看文档，您似乎可以旋转视图

[http://developer.android.com/reference/android/view/View.html#setRotation%28float%29](http://developer.android.com/reference/android/view/View.html#setRotation%28float%29)

然而，这只是从 API 11 开始，即 Android 3.0

如果您想支持较低的 API 级别，我可能会查看 Canvas 类，并在其上实际“绘制”一个按钮位图，您也可以旋转该位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T13:00:11.787

试试这个代码：

```
Animation ranim = (Animation) AnimationUtils.loadAnimation(getBaseContext(), 
        R.anim.rotation); 
buttonRotate.setAnimation(ranim); 
```

使用您的 XML 文件而不是`R.anim.ratation`.

# xml - 大点数组到可读文件

> ID：10869043
> 
> 赞同：0
> 
> 时间：2012-06-03T08:54:18.117
> 
> 标签：xml, file

我必须将大量二维点和一些小的相关数据归档。文件将由第三方使用，用户希望将此文件用作其程序的输入。所以用户需要在他的程序中解析文件的内容。

我想使用像 XML 这样可读和自记录的文件格式。但是为此使用 XML 将使文件至少大 3 倍。

那么有没有一种通用的方法来编写这些数据，以便用户可以轻松理解呢？

请注意，有几个比二维点更复杂的附加数据条目。

任何建议将不胜感激。

**编辑：**问题不是如何解析文件，而是如何编写文件以便可以直观地解析它。

**编辑 2：**更具体地说：我正在编写带有 N 个点和 N 个摄像机的简单 3D 场景模拟器，所以对于每个时间点，我需要为每个摄像机存储每个点的 2D 投影。当然，相机位置和方向需要存储在同一个文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:01:04.163

您可以逐行阅读并使用正则表达式来检查该行上是否有 2D 坐标或其他类型的信息，并在您的程序中使用它。

* * *

编辑：

我建议使用如下输入文件：

```
2
c 1
p (x,y)
o 180
8
(x,y)
(x,y)
(x,y)
(x,y)
(x,y)
(x,y)
(x,y)
(x,y)
c 2
p (x,y)
o 270
2
(x,y)
(x,y) 
```

在哪里：

*   第一个数字是相机的数量
*   每个相机都有：
    *   相机编号
    *   相机坐标
    *   该相机的点数
    *   该坐标

这应该很容易阅读，因为您定义了每个相机的点数。使用 StringTokenizer（至少在 Java 中），您可以轻松拆分字符串，以获取所需的数据。

# iphone - iOS 的 NSSet/NSArray/NSDictionary 可以有多大？

> ID：10869049
> 
> 赞同：5
> 
> 时间：2012-06-03T08:56:33.350
> 
> 标签：iphone, objective-c, ios

我觉得我应该首先描述我正在尝试做的事情，然后我会问我的问题。

## 背景

我有大量的单词（可能高达 5,000）。我希望能够在屏幕上随机显示 3 个这些词，当用户按下按钮时，它将显示另外 3 个随机词，但没有重复（即不再向用户显示相同的词）。这将循环直到计时器用完。

## 可能的解决方案

如果单词数较少，我只需将它们添加到 NSMutableSet 中，使用 -anyObject 3 次来获取单词，然后每次从集合中删除 3 个单词，以便下次调用时不再使用它们-任何对象。问题是我不知道我是否可以在 iOS 中设置一个包含 5,000 个 NSString 的集合。

## 问题

所以我的问题是

1.  我可以在 iOS 中拥有一个包含大约 5,000 个字符串的集合对象（NSSet、NSArray、NSDictionary）而不会出现任何性能问题吗？
2.  如果不是，我将如何从文件中读取字符串的子集以获得可接受的数组大小，然后在清空该数组时提取更多？
3.  存储这些字符串的最佳方法是什么？它们只是单词，所以不是很长的单词。我正在考虑将它们添加到每行都有一个字符串的文件中，然后在应用程序加载时将它们读入一个集合对象。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T09:32:51.483

只是想知道我们正在查看哪些内存维度：5000 个单词，每个单词 8 个字母，可以用 UTF-8（每个字母 8 位）表示

5000 * 8 * 8 = 320,000 位 = 40,000 字节 < 40 kB

即使 a 等的开销`NSArray`会**增加**一倍或三倍（它当然不会），你会没事的`NSSet`。iPhone 4S 的 RAM 大小为 1 GB，即 1,048,576 kB，是对象大小的几万倍。简而言之：别担心。

 **您可以将您的单词存储在一个文本文件中，用空格分隔，然后简单地将它们读入`NSArray`with

```
NSArray *testArray = [stringOfTextfileContent componentsSeparatedByString:@" "]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T09:15:44.857

限制取决于您可用的内存量。**

# javascript - 从 executeAsync 返回数据到调用函数 (javascript/mozilla)

> ID：10869057
> 
> 赞同：4
> 
> 时间：2012-06-03T08:59:14.683
> 
> 标签：javascript, firefox, parameters, storage, mozilla

我是 Javascript 新手，正在尝试编写一个 firefox 插件。
我正在尝试将从 SQL 查询返回的数据传递/提取到调用函数。它似乎不起作用。
我搜索了有关变量范围的信息，查看了我可以在此站点上看到的任何相关帖子，并尝试了据说有效的示例，但没有一个对我有用。

我使用的存储信息来自：
[https://developer.mozilla.org/en/Storage](https://developer.mozilla.org/en/Storage)
[https://developer.mozilla.org/en/mozIStorageStatement](https://developer.mozilla.org/en/mozIStorageStatement)

我做错了什么，或者我该怎么做？
我在 xp 上运行 Firefox 12。

```
function Sqlite() {
   this.dbConn = "";
   this.empty = true;
}

Sqlite.prototype.retrieveData = function(query)
{
    var rows = new Array(); // to be returned to the calling function
    var stmt = this.dbConn.createStatement(query); // my "select..." statement

    stmt.executeAsync ({
     handleResult: function(aResultSet)
     {
        this.empty = false;
        var i = 0;
        for (let row; row = aResultSet.getNextRow();i++) {
           rows[i] = row;
        }
     },

     handleError: function(anError) {
        //some code
     },

     handleCompletion: function(aReason) {
        if (this.empty) {
            // CODE FOR WHEN STATEMENT EXECUTION IS FINISHED
        }
        if (aReason == Ci.mozIStorageStatementCallback.REASON_FINISHED) {
           document.getElementById("debug").value = rows[0]; //gets the data from the query: [xpconnect wrapped mozIStorageRow]
           return true;
         }
     }
    });  
    document.getElementById("debug").value = rows[0]; //gets undefined
    stmt.finalize();

    return rows;  // the info is no longer available at this point.
} 
```

我会非常感谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:05:53.083

你描述问题的方式有点含糊，但是当你写的时候：

`return rows; // the info is no longer available at this point.`

这当然是*意料之中*的。`executeAsync`，顾名思义，是异步的。这意味着当您调用时`executeAsync`，该操作将安排*在稍后进行*。Javascript 具有运行到完成的语义，因此执行将继续，直到到达`return rows`语句为止。此时，查询尚未执行！一旦你的函数完成，JS引擎将执行你的异步语句并调用你的`handleCompletion`回调。然后由代码`handleCompletion`来对数据做任何你想做的事情，例如调用另一个函数来做一些事情。

此外，您的`empty`变量似乎不需要。

```
handleCompletion: function(aReason) {
   if (aReason != Ci.mozIStorageStatementCallback.REASON_FINISHED) {
     // something went wrong
   } else {
     // do something useful with rows
   }
}, 
```

最后，您需要调用`row.getResultByName`以获取行中列的值。

# ruby-on-rails-3 - Rails 3 自定义 yaml 文件

> ID：10869059
> 
> 赞同：0
> 
> 时间：2012-06-03T09:00:02.753
> 
> 标签：ruby-on-rails-3, yaml

我想从 yaml 文件中读取变量。我试过[这个 Railscast](http://railscasts.com/episodes/85-yaml-configuration-file)但它不起作用，因为我使用的是 Rails 3.2。我也再次尝试[了这个话题](https://stackoverflow.com/questions/592554/best-way-to-create-custom-config-options-for-my-rails-app)，我发现它不起作用。

如何从自定义 yaml 文件中读取一些变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:10:43.043

我解决了再次启动服务器的问题。然而，又出现了错误。配置文件路径错误。我修复了它，现在一切正常。我用[了这个帖子。](https://stackoverflow.com/a/592593/665123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:09:57.487

[您可以使用此答案](https://stackoverflow.com/a/1450345/532102)中指出的 rails [config gem](https://github.com/railsjedi/rails_config)。

编辑：fot rails 3 你最好使用这种方法：[https ://stackoverflow.com/a/5053882/532102](https://stackoverflow.com/a/5053882/532102)

# tsql - 首先在代码中添加新列后删除默认约束

> ID：10869062
> 
> 赞同：29
> 
> 时间：2012-06-03T09:00:57.747
> 
> 标签：tsql, entity-framework-migrations

使用代码优先迁移向表中添加新的不可为空的列时，它将自动为您创建一个默认值。这是有道理的，因为现有的行需要有一个新列的值（因为它不能为空）。没关系，但是在到处分配该值之后，我不再想要它了。它是不可为空的，因为我想确保始终显式插入一个值。如果所有内容都默认为 '' 或 0，那么我将拥有魔术字符串。所以无论如何，我可以提出一个解决方案，我对此并不感到兴奋，但它确实有效。

添加列后，我删除了默认约束。

```
public override void Up()
{
    AddColumn("dbo.SomeTable", "NewColumn", c => c.Int(nullable: false));
    Sql(Helpers.DropDefaultConstraint("dbo.SomeTable", "NewColumn"));
} 
```

...

```
public static string DropDefaultConstraint(string table, string column)
{
    return string.Format(@"
        DECLARE @name sysname

        SELECT @name = dc.name
        FROM sys.columns c
        JOIN sys.default_constraints dc ON dc.object_id = c.default_object_id
        WHERE c.object_id = OBJECT_ID('{0}')
        AND c.name = '{1}'

        IF @name IS NOT NULL
            EXECUTE ('ALTER TABLE {0} DROP CONSTRAINT ' + @name)
        ",
        table, column);
} 
```

优点：一旦实现了辅助方法，我只需要添加一个简单的行来删除约束。缺点：似乎没有必要仅仅为了删除它而创建索引。

另一种方法是更改​​生成的迁移，因此我们将其添加为可为空，更新所有值，然后使其不可为空。

```
public override void Up()
{
    AddColumn("dbo.SomeTable", "NewColumn", c => c.Int());
    Sql("UPDATE dbo.SomeTableSET NewColumn= 1");
    AlterColumn("dbo.SomeTable", "NewColumn", c => c.Int(nullable: false));
} 
```

优点：看起来更简单/更干净

缺点：必须暂时更改我的约束（我假设这在事务中运行，因此我们不应该允许错误数据进入）。大桌子上的更新可能很慢。

哪种方法更可取？还是有更好的方法让我想念？

注意：我已经演示了您一次性添加和清理列定义的情况。如果您只是清理以前迁移的默认值，则第二种方法没有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T19:44:09.967

我个人认为第一种方法没有任何问题。是的，您必须创建默认约束才能将不可为空的列添加到非空数据集。是的，如果您需要确保将来始终根据您的要求明确添加新列，则必须在之后删除它。

即使您仍然对这种方法有疑问，但问题是，除了您的第二种方法之外，很可能没有其他选择。在我看来，使用默认值更新可能很大的表的成本似乎大于创建和立即删除默认约束的成本。

不过，我可能会考虑稍作修改：我可能会在 SQL 中创建约束以避免查找引擎分配的默认名称的麻烦，如下所示：

```
Sql("ALTER TABLE *tablename*
  ADD *columnname* *type* NOT NULL
  CONSTRAINT DF_*tablename*_*columnname* DEFAULT *defaultvalue*"); 
```

（可以重写以使用辅助函数。）

删除约束将与执行单个 ALTER TABLE 语句一样简单：

```
Sql("ALTER TABLE *tablename*
  DROP CONSTRAINT DF_*tablename*_*columnname*"); 
```

（同样，这里可以很容易地使用辅助函数。）

但这一切都可能是我的 T-SQL 开发人员说话比 C# 更响亮。因此，您很可能会像您发布的示例那样使用代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-26T20:45:31.630

首先使用 EF 代码从列中删除默认值约束的解决方案 - 如果列不再具有 NULL 值 [Not Null]，您可以使用下面的 Code First 方法从表中删除下面的 SQL 脚本。在迁移文件中设置“defaultValueSql：null”。

删除默认列值约束 ----> ALTER TABLE [dbo].[Attachments] ADD DEFAULT ('00000000-0000-0000-0000-000000000000') FOR [DocumentUniqueId]

应用此代码优先 C#---->

```
protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AlterColumn<Guid>(
                name: "ColumnName",
                schema: "dbo",
                table: "TableName",
                type: "uniqueidentifier",
                nullable: false,
                **defaultValueSql: null,**
                oldClrType: typeof(Guid),
                oldType: "uniqueidentifier");
        } 
```

我没有得到任何地方，所以我发布它以帮助其他人，有助于数据库清理。

# ipad - iPad 上的 HTML5 视频从 iPad 摄像头直播

> ID：10869066
> 
> 赞同：1
> 
> 时间：2012-06-03T09:01:34.227
> 
> 标签：ipad, html, safari

有没有办法在 HTML5 网络应用程序中从 iPad 的摄像头实时显示视频？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:45:04.093

不会。最终您将能够使用 getUserMedia / Stream API 执行此操作，但[目前 iOS Safari 不支持](http://caniuse.com/stream)此功能。

# c# - 使用 C# 将文件上传到网站

> ID：10869071
> 
> 赞同：0
> 
> 时间：2012-06-03T09:03:06.740
> 
> 标签：c#, http, https, upload

我正在尝试使用 C# 为网站制作自动上传器，但我不知道从哪里开始。例如，我正在尝试为[http://www.fileflyer.com/default.aspx](http://www.fileflyer.com/default.aspx)创建一个自动上传器。

该网站要求用户检查“我同意服务条款”并要求他输入电子邮件。

我知道 WebClient.UploadFile 可用于上传，但我如何提供和发送电子邮件并选中复选框？

提前感谢，亚当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:38:21.460

What you need is to build the same http request as browser does. WebClient class is too light hammer for this. The class you need is [HttpWebRequest](http://msdn.microsoft.com/cs-cz/library/system.net.httpwebrequest.aspx). This one allowes you to do much more then WebClinet.

The best way to start is to read about HttpWebRequest class. Then you will need to explore structure of request from browser. Use some tool, like [Fiddler](http://www.fiddler2.com/fiddler2/). Upload some file using your browser and sniff request with Fiddler. Then you can replicate the same request with HttpWebRequest.

The hecked checkbox for example will be in POST data, like: checkboxName=on

# c# - 在 localhost 上使用不同的端口号连接 mysql 表

> ID：10869072
> 
> 赞同：1
> 
> 时间：2012-06-03T09:03:12.870
> 
> 标签：c#, mysql, database, connection-string

我有两张表，一张在本地数据库中，另一张在远程服务器上。我在 C# 中使用端口转发来让我的 ssh 远程连接到 localhost:3306 我的本地数据库在 localhost:3307

如果它们都在本地主机上但具有不同的端口，我如何将一个表复制到另一个表。

这是我想做的查询：

```
cmd = new MySqlCommand(String.Format("INSERT INTO {0} (a,b,c,d) SELECT (a,b,c,d) FROM {1}", ConfigSettings.ReadSetting("main_table"), ConfigSettings.ReadSetting("main_table")), con); 
```

两个表都有相同的列，这就是为什么我只使用配置设置中的一个输入。

但是我有 2 个连接字符串，因为它们位于不同的端口上。

```
con.ConnectionString = ConfigurationManager.ConnectionStrings["con1"].ConnectionString;
con2.ConnectionString = ConfigurationManager.ConnectionStrings["con2"].ConnectionString 
```

有什么方法可以让我的查询与这两个端口一起工作，因为我不想在 MySql 中使用 FEDERATED 连接。必须有办法，因为它们都在同一台服务器上。

谢谢

编辑：

连接字符串：

```
<add name="Con2" connectionString="server=localhost;port=3307;user id=root;Password=*****;database=data" providerName="MySql.Data.MySqlClient"/>
<add name="Con1" connectionString="server=localhost;port=3306;user id=root;Password=******;database=data" providerName="MySql.Data.MySqlClient"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:58:28.320

在两个不同连接上的两个单独表之间移动数据的伪代码

1.  创建/打开到第一个 MySql 的连接
2.  创建/运行查询以从第一个 MySql 获取 DataTable 中的数据
3.  创建/打开到第二个 MySql 的连接
4.  创建/运行查询以从没有记录的第二个 MySql 获取 DataTable 中的数据（使用 WHERE 1=0 或类似的东西）
5.  循环第一个 DataTable 的行
6.  在第二个表上调用 ImportRow，传递来自第一行的值
7.  保存第二个数据表

    ```
    DataTable dtSource = new DataTable();
    using(MySqlConnection cn1 = GetConnection("first_connection_string");
    {
        cn1.Open();
        MySqlCommand cmd = new MySqlCommand("Select x,x,x,x from t1", cn1);
        MySqlDataAdapter da = new MySqlDataAdapter();
        da.SelectCommand = cmd;
        da.Fill(dtSource);
    }

    DataTable dtDest = new DataTable();
    using(MySqlConnection cn2 = GetConnection("second_connection_string");
    {
        cn2.Open();
        MySqlCommand cmd = new MySqlCommand("Select x,x,x,x from t2 where 1=0", cn2);
        MySqlDataAdapter da2 = new MySqlDataAdapter();
        da2.SelectCommand = cmd;
        da2.Fill(dtDest);

        foreach(DataRow r in dtSource)
            dtDest.ImportRow(r);

        da2.Update(dtDest);
    } 
    ```

**请注意，这尚未经过测试。把它当作实验。**

编辑：看到评论我会添加另一种方式来更新第二个表

```
 using(MySqlConnection cn2 = GetConnection("second_connection_string");
    {
        cn2.Open();
        MySqlCommand cmd = new MySqlCommand("INSERT INTO T2 (a,b) values(@a,@b)", cn2);
        cmd.Parameters.AddWithValue("@a", string.Empty); // Suppose the "a" field is a string
        cmd.Parameters.AddWithValue("@b", string.Empty); // Suppose the "b" field is a string

        foreach(DataRow r in dtSource)
        {
            cmd.Parameters["@a"].Value = r["a"].ToString();
            cmd.Parameters["@b"].Value = r["b"].ToString();
            cmd.ExecuteNonQuery();
        }
    } 
```

在这种情况下，您不需要从目标表中的 dtSource 插入整条记录。在这种情况下，我恢复到带有参数的 INSERT 命令，在源表上循环，在目标表中插入

# boost - libboost_math_c99f.a 和 libboost_math_c99.a 有什么区别？

> ID：10869075
> 
> 赞同：1
> 
> 时间：2012-06-03T09:03:26.297
> 
> 标签：boost

为 iOS 编译 Boost Math 库 1.44.0 会生成以下库文件：

*   libboost_math_c99.a
*   libboost_math_c99f.a
*   libboost_math_tr1.a
*   libboost_math_tr1f.a

libboost_math_c99.a 和 libboost_math_c99 **f** .a 以及 libboost_math_tr1.a 和 libboost_math_tr1 **f** .a 之间有什么区别？

环境：GCC 4.2.1 Mac OS X 10.6.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:31:15.233

带有后缀的二进制文件`f`包含`float`.

没有后缀的包含`double`.

在某些平台上，您还可以构建带有`l`后缀的二进制文件；这些包含`long double`.

# java - 类“com.mysql.jdbc.LocalizedErrorMessages”与同一包中其他类的信任级别不匹配

> ID：10869079
> 
> 赞同：2
> 
> 时间：2012-06-03T09:04:19.787
> 
> 标签：java, security, jdbc, applet, digital-signature

我有一个签名的小程序，可以使用 JDBC/Mysql 驱动程序访问 localhost 中的数据库。

一切正常，但用户每次都会收到一个恼人的警告对话框提示，该对话框表示应用程序包含签名和未签名的代码。

我进入 Java 控制面板，高级选项卡并选中启用跟踪、启用日志记录和显示小程序生命周期异常，然后在 Java 控制台中按 5 以显示所有日志。

然后我发现了以下错误：

```
class "com.mysql.jdbc.LocalizedErrorMessages" does not match trust level of 
    other classes in the same package 
```

在我的清单文件中，我可以看到`LocalizedErrorMessages.properties`已签名（`LocalizedErrorMessages.class`清单和库中都没有）

```
Name: com/mysql/jdbc/LocalizedErrorMessages.properties
SHA1-Digest: R1EZP+ilj5TImxZLeilYeyh3VBc= 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T09:19:53.413

众所周知，当包被签名两次时会发生此错误（这是它出现的主要原因）。修复它的最简单方法是去掉所有签名并重新签署代码。

> ..warning 对话框，表示应用程序包含签名和未签名的代码。

有关背景和修复，请参阅[混合签名和未签名代码](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html)。

# c# - 使用 Silverlight 的 Lite.ExcelLibrary 修改 excel 文件

> ID：10869082
> 
> 赞同：3
> 
> 时间：2012-06-03T09:05:29.070
> 
> 标签：c#, silverlight-4.0, excellibrary

任何人都知道是否有任何方法可以使用 excellibrary 修改 .xls 文件？解释更多：-我正在开发一个应该生成 .xls 文件的项目，从文件中读取，修改并保存它。我设法生成、读取和保存文件，但是每当我尝试修改文件时，它都会生成一个只有修改后的值的新工作表。我使用了以下代码的不同版本

```
 string filename = string.Format("{0}.xls", rapportDatum);
        using (var file = appStorage.OpenFile(filename,FileMode.OpenOrCreate,FileAccess.ReadWrite))
        {
            using (Stream sr = (file))
            {
                //Converting the Day string to day number as int d
                int d = Int32.Parse(Day);
                // create an instance of excel workbook
                Workbook workbook = new Workbook(); // even used this code WorkBook workbook=Workbook.Open(file); look at sheet now
                // create a worksheet object
                string date = DateTime.Now.ToString("MMMM");
                string sheetName = string.Format("{0}", char.ToUpper(date[0]) + date.Substring(1));
                Worksheet worksheet = new Worksheet(sheetName); // Worksheet worksheet=workbook.worksheets[0]
                // write data in worksheet cells
                worksheet.Cells[0, 0].Value = ("Datum");
                worksheet.Cells[0, 1].Value = ("Avdelning");
                worksheet.Cells[0, 2].Value = ("Allvarlighetsgraden");
                worksheet.Cells[0, 3].Value = ("Raport");
                worksheet.Cells[d, 0].Value = (d);
                worksheet.Cells[d, 1].Value = ("KAVA");
                worksheet.Cells[d, 2].Value = (UsersValue);
                worksheet.Cells[d, 3].Value = (textBox1.Text);
                workbook.Worksheets.Add(worksheet); // Even removed this and workbook.Save(sr) but still the same problem.
                workbook.Save(sr);
            }
        } 
```

这个烦人的问题有什么解决办法吗？我应该换成另一个excel库吗？在这种情况下有什么建议吗？

你的

# rdf - 无法让这个 SPARQL 查询工作

> ID：10869089
> 
> 赞同：6
> 
> 时间：2012-06-03T09:06:08.983
> 
> 标签：rdf, sparql, semantic-web, dbpedia

好的，我只是在学习使用 SPARQL 从 dbpedia.org 查询数据，我正在使用 dbpedia 的[http://dbpedia.org/snorql/](http://dbpedia.org/snorql/)来运行我的查询。我正在尝试获取一个基于音乐艺术家的列表在三个字段中搜索相同的字符串，如下所示：

```
SELECT ?subject 
       ?artistRdfsLabel 
       ?artistFoafName 
       ?artistDbpedia2Name
WHERE {
    ?subject rdf:type <http://dbpedia.org/ontology/MusicalArtist> .
    OPTIONAL { ?subject rdfs:label ?artistRdfsLabel . }
    OPTIONAL { ?subject foaf:name ?artistFoafName . }
    OPTIONAL { ?subject dbpedia2:name ?artistDbpedia2Name . }
    FILTER ( str(?artistRdfsLabel) = "Stevie Nicks" || 
             str(?artistFoafName) = "Stevie Nicks" || 
             str(?artistDbpedia2Name) = "Stevie Nicks" )
}
LIMIT 10 
```

这是因为“Stevie Nicks”具有所有三个字段（rdfs:label、foaf:name、dbpedia2:name）。但是，当我尝试由另一位不具备全部三个的 MusicalArtist（例如“Depeche Mode”）进行查询时，我没有得到任何结果。

我尝试了各种方法，例如 BIND(COALESCE(?field,...,...) AS ?artistName) 来按 ?artistName 过滤，我也尝试了 UNION 但似乎没有任何效果。有人可以指出我的 SPARQL 方式的错误吗？:)

谢谢！杰森

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T16:37:16.437

好的，我错过了无法使用[http://dbpedia.org/ontology/MusicalArtist](http://dbpedia.org/ontology/MusicalArtist)的 rdf:type 选择“Depeche 模式” 。这似乎有效：

```
SELECT ?subject 
       ?artistName 
WHERE {
  { 
    ?subject rdf:type <http://dbpedia.org/ontology/MusicalArtist> .
    ?subject rdfs:label ?artistName .
    FILTER ( str(?artistName) = "Depeche Mode" )
  } 
  UNION 
  {
    ?subject rdf:type <http://dbpedia.org/ontology/Band> .
    ?subject rdfs:label ?artistName .
    FILTER ( str(?artistName) = "Depeche Mode" )
  }
} 
```

# actionscript-3 - Flash CS5 AS3 - 文本框运行时错误

> ID：10869093
> 
> 赞同：0
> 
> 时间：2012-06-03T09:06:46.180
> 
> 标签：actionscript-3, text, runtime-error, tlf

由于我的文本框，我收到以下运行时错误：

```
Error: SymbolClassLoader can't find Resource with id = 2, name = 'Cube_Inventory_HUD__LoadingAnimation__'
Error: SymbolClassLoader can't find Resource with id = 3, name = 'Cube_Inventory_HUD__Content__'
Warning: The method Loader::loadBytes() is not implemented 
```

由于这个错误，我的精灵/符号都没有出现，当我运行时只是一个空白的白色阶段。
当我删除文本框并运行时，一切运行正常，我的所有精灵/符号都按预期显示。

附加信息：
我的 .fla 和 .as 文件的名称是 Cube_Inventory_HUD。
请注意，我正在 Scaleform Launcher 的 FxMediaPlayer 中编译/运行 .swf，因为我正在为 UDK 制作一些 scaleform UI。
我使用的文本框是 TLF 文本，可编辑（因为我打算稍后在运行时使用 ActionScript 更改文本）。字体为 Arial, Bold。
.as 文件中的动作脚本代码只是默认的；我还没有输入任何额外的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:59:57.687

Scaleform 目前不支持 TLF 文本字段。相反，请使用经典文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:21:19.487

我很确定 Scaleform 还不支持 TLF 文本。至少它从来没有为我工作过。尝试使用经典文本制作文本框。

# java - 检查（使用 openDS SDK）成员属于 openDS LDAP 中的哪个组

> ID：10869094
> 
> 赞同：0
> 
> 时间：2012-06-03T09:06:54.430
> 
> 标签：java, ldap, opends

两天前我刚得到这个要求，我第一次使用 LDAP(openDS)。事实上，我的研发时间非常有限。我已经尽可能多地阅读了 openDS 的开发人员指南和 SDK Api。

基本上我有一个非常简单的要求。我将获得一个“*用户 ID* ”，并使用它来验证该用户是否属于 LDAP 中的任何可用组（由我定义）。

我设法做到了这个代码片段：

```
public void getGroup(String userId) {
    Connection connection = new LDAPConnection().getConnection();
    try {
        // No explicit bind yet so we remain anonymous for now.
        SearchResultEntry entry;
        entry = connection.searchSingleEntry("ou=Groups,dc=example,dc=com", 
                                                                SearchScope.WHOLE_SUBTREE, 
                                                                "(uniqueMember=" + "uid="+userId+", ou=People, dc=example,dc=com" + ")", 
                                                                "cn");
        String cn = entry.getAttribute("cn").firstValueAsString();
        System.out.println("Hello, " + cn + "!");
    } catch (ErrorResultException e) {
        e.getMessage();
    } finally {
        closeConnection(connection);
    }
} 
```

现在，如果我收到搜索结果，则该用户属于一个组，否则不属于该组。现在我不确定这是实现这一目标的方法。我也看起来像“isMemberOf”，但我不确定 API 是否提供了这种方法或者是别的什么。

任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:02:54.207

LDAP 客户端应使用以下过滤器向服务器发送搜索请求：

```
'(isMemberOf=<the distinguished name of the entry>)' 
```

以及适当的基础对象、过滤器和请求的属性。这假定服务器`isMemberOf`启用了虚拟属性。

如果只有相对专有名称组件可用，则 LDAP 客户端必须搜索专有名称 - 在这种情况下使用`(<attribute-type>=<userid>>)`（例如，`'(uid=user.1)'`）和`1.1`请求属性，这将导致不返回任何属性。始终为每个匹配的条目返回可分辨名称。然后构造过滤器`isMemberOf`并再次搜索。

### 也可以看看

*   [LDAP：掌握搜索过滤器](http://ff1959.wordpress.com/2011/09/21/mastering-ldap-search-filters/)
*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)
*   [LDAP：协议搜索请求](https://www.rfc-editor.org/rfc/rfc4511#section-4.5.1)
*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T07:27:54.193

上面的搜索确实返回了 Group 的 cn。如果给你一个用户 ID 并且需要检查用户是否在一个众所周知的组中，那么过滤器 "(isMemberOf=

如果您搜索 (&(uid=)(isMemberOf= 这是该组的一部分。

亲切的问候，

卢多维奇。

# javascript - 什么是 jruby 以及它与 javascript 的关系

> ID：10869095
> 
> 赞同：-2
> 
> 时间：2012-06-03T09:07:06.933
> 
> 标签：javascript, jruby

我是一名 Javascript 开发人员。在我的新工作地点，他们告诉我学习 jruby 和 ext-js。使用 ext-js 就很清楚了。但是我在 jruby 上进行了一些网络搜索并且感到困惑。jruby 和 javascript 有什么关系？我应该如何开始学习它？我在哪里可以找到一些关于它的教程？感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:48:10.033

JRuby 与 Javascript 一点关系都没有。它是 JVM 上的 Ruby 版本——因此它与 Java 紧密集成：事实上，JRuby 甚至完全用上述语言编写。

有些人混淆了 Java 和 Java*脚本*：前者是受 C++ 影响很大的流行静态类型语言，而后者是在浏览器中运行的 Web 客户端语言。它们不相关，因此 JRuby 与它的关系并不比 Ruby 更重要。

> JRuby 是 Ruby 编程语言的 Java 实现。... JRuby 与 Java 紧密集成，允许将解释器嵌入到任何 Java 应用程序中，并在 Java 和 Ruby 代码之间进行完全双向访问（类似于 Python 语言的 Jython）。——<em>维基百科

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T09:17:16.140

Java + 红宝石 = Jruby 。JRuby 是运行在 jvm 上的 Ruby 编程语言的 Ruby 实现。阅读本书 -> [jruby 简介，](http://javasymposium.techtarget.com/html/images/NFord_Intro_JRuby.pdf)您将了解 jruby 是什么以及一些基本示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T03:43:01.403

JRuby 是运行在 JVM 上的 ruby​​ 实现。Ruby 和 Javascript 都是编程语言。除此之外，没有太多的关系。

最好问问老板为什么。也许他们希望您进入服务器端脚本，其中 (J)ruby 很常见。

# java - 从 HTML 字符串中提取 URL

> ID：10869097
> 
> 赞同：4
> 
> 时间：2012-06-03T09:07:40.840
> 
> 标签：java, html, html-parsing

我正在尝试从给定的 URL 中提取 URL `String`，其中包含带有 HREF 标记的 HTTP 响应。我已到达链接的开头，但我需要在 HREF 结束后立即终止该字符串。这怎么可能实现？

```
public class Extracturl {
public static void main(String[] args) throws IOException {
    // TODO Auto-generated method stub
    String line;

    try {
        String u="http://en.wikipedia.org/wiki/china";
        String fileName = "e:\\test.txt";
         BufferedWriter writer = new BufferedWriter(new FileWriter(fileName,true));
        url = new URL(u);
        is = url.openStream();  // throws an IOException
        dis = new DataInputStream(new BufferedInputStream(is));

        String w=new String();
        while ((line = dis.readLine()) != null) {

                try {
   if(line.contains("href=\"/wiki")&&line.contains("\" />")&& (!line.contains("File")))
                    {   

                    if(!w.contains(line.substring(line.indexOf("href=\"/"))))
                    {w=w+line.substring(line.indexOf("href=\"/"));                        
                        System.out.println(line.substring(line.indexOf("href=\"/"))); 
                    writer.write(w);
                    writer.newLine();
                    }}
                } catch (IOException e) {
                    e.printStackTrace();
                }
        }
    } catch (MalformedURLException mue) {
         mue.printStackTrace();
    } catch (IOException ioe) {
         ioe.printStackTrace();
    } finally {
        try {
            is.close();

           // writer.close();
        } catch (IOException ioe) {
            // nothing to see here
        }
    }
}

    } 
```

我什至试过

```
 w=w+line.substring(line.indexOf("href=\"/"),line.indexOf("\">")); 
```

但这给了我错误。

我的目标是获取从页面链接的所有 URL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T09:45:56.053

为此目的使用 HTML 解析器。这是一个带有嵌入式 Java HTML 解析器的示例。还有其他替代品，例如[JSoup](http://jsoup.org/)，但对于基本的 HTML 处理，这个做得很好：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.LinkedHashSet;
import java.util.Set;

import javax.swing.text.MutableAttributeSet;
import javax.swing.text.html.HTML;
import javax.swing.text.html.HTML.Tag;
import javax.swing.text.html.HTMLEditorKit;
import javax.swing.text.html.parser.ParserDelegator;

public class URLExtractor {

    private static class HTMLPaserCallBack extends HTMLEditorKit.ParserCallback {

        private Set<String> urls;

        public HTMLPaserCallBack() {
            urls = new LinkedHashSet<String>();
        }

        public Set<String> getUrls() {
            return urls;
        }

        @Override
        public void handleSimpleTag(Tag t, MutableAttributeSet a, int pos) {
            handleTag(t, a, pos);
        }

        @Override
        public void handleStartTag(Tag t, MutableAttributeSet a, int pos) {
            handleTag(t, a, pos);
        }

        private void handleTag(Tag t, MutableAttributeSet a, int pos) {
            if (t == Tag.A) {
                Object href = a.getAttribute(HTML.Attribute.HREF);
                if (href != null) {
                    String url = href.toString();
                    if (!urls.contains(url)) {
                        urls.add(url);
                    }
                }
            }
        }
    }

    public static void main(String[] args) throws IOException {
        InputStream is = null;
        try {
            String u = "http://en.wikipedia.org/wiki/china";
            URL url = new URL(u);
            is = url.openStream(); // throws an IOException
            HTMLPaserCallBack cb = new HTMLPaserCallBack();
            new ParserDelegator().parse(new BufferedReader(new InputStreamReader(is)), cb, true);
            for (String aUrl : cb.getUrls()) {
                System.out.println("Found URL: " + aUrl);
            }
        } catch (MalformedURLException mue) {
            mue.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException ioe) {
                // nothing to see here
            }
        }
    }
} 
```

# python - pygame圈动画

> ID：10869100
> 
> 赞同：1
> 
> 时间：2012-06-03T09:07:56.977
> 
> 标签：python, pygame

我正在尝试制作一个圆形动画，并希望它在窗口内弹跳只是为了练习。有人告诉我`pygame.draw.rect`返回一个`Rect`对象，但是，我编写了这个小代码来查看它是否有效，但它没有。圆圈没有像预期的那样每次迭代向下移动一个像素。可能是什么问题？

```
import pygame, sys
from pygame.locals import *

pygame.init()
screen = pygame.display.set_mode((600, 500), 0, 32)
mainClock = pygame.time.Clock()

screen.lock()
circleRect = pygame.draw.circle(screen, (255, 255, 255), (100, 200), 40)
screen.unlock()

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

    circleRect.top += 1

    pygame.display.update()
    mainClock.tick(40) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:11:14.980

您必须绘制圆并更新每一帧中的矩形。提示：您只需稍微编辑并移动一行

好的，现在您正在正确地绘制圆，但是您将它绘制在相同的位置。仔细看看你传递给draw.circle的参数，你在哪里告诉它画圆？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:32:15.337

在这里，您只是将圆圈绘制到`(100, 200)`并存储矩形以供以后使用（即使您不再使用它）。

```
screen.lock()
circleRect = pygame.draw.circle(screen, (255, 255, 255), (100, 200), 40)
screen.unlock() 
```

您正在`rect`从`blit`圆圈中捕捉到屏幕。没关系，以后，你`circleRect`四处走动，因为`circleRect`再也不会使用了。您必须更改代码，以便在 的位置`circleRect`而不是`(100, 200)`每次都绘制圆圈。

```
circleRect= = pygame.Rect(100,200, 0, 0)
screen.lock()
circleRect = pygame.draw.circle(screen, (255, 255, 255), circleRect, 40)
screen.unlock() 
```

然后，在您的主循环中，您需要使用与以前相同的线重新绘制圆圈，就在属性的调整下`top`：

```
circleRect.top += 1
circleRect = pygame.draw.circle(screen, (255, 255, 255), circleRect, 40) 
```

# git - Symfony bin/vendors 本地修改

> ID：10869101
> 
> 赞同：2
> 
> 时间：2012-06-03T09:08:04.200
> 
> 标签：git, symfony, vendors

我正在尝试安装一个没有预装供应商的新 Symfony 项目。我正在运行 Windows，并且我使用了 Symfony 食谱中的以下指南：

[如何在 git 中创建和存储 Symfony2 项目](http://symfony.com/doc/current/cookbook/workflow/new_project_git.html "如何在 git 中创建和存储 Symfony2 项目")

我对 Git 和 Symfony 都很陌生。当我运行 bin/vendors 脚本时，我最终遇到了这个问题：

```
Installing/Updating monolog
M src/Monolog/Handler/FingersCrossed/ActivationStrategyInterface.php
M src/Monolog/Handler/FingersCrossed/ErrorLevelActivationStrategy.php
"monolog" has local modifications. Please revert or commit/push them before running this command again. 
```

我正在运行 2.0.15。我已经尝试（根据我对 Git、cmd 和 Symfony 的有限知识）使用本指南[处理行尾](https://help.github.com/articles/dealing-with-line-endings "处理行尾")以及最终[Charles Baily 对“尝试使用 git filter-branch 修复行尾，但有没有运气'](https://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck/1511273#1511273 "Charles Baily 对“尝试使用 git filter-branch 修复行尾，但没有运气”的回答")。

我不认为我做对了。我从我的 cmd 运行以下行：

```
git config --global core.autocrlf true
#Nothing appears, just a new line

git rm --cached -r .
#Alot of files appear

git reset --hard
#HEAD is now at xxxxx initial commit

git add .
#According to the first link and Charles Baily's answer there should appear alot of files, but none do.

git commit -m "message"
#Nothing to commit 
```

有没有人知道我做错了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:58:23.053

以下是您可以解决问题的方法：

1.  进入独白目录

    > cd 供应商/独白

2.  了解您所做的更改（可选步骤）

    > 混帐差异

3.  取消您的修改

    > 混帐结帐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:21:19.783

如果您的问题是 eol 被自动修改，那么

```
git config --global core.autocrlf false 
```

将是一个更好的配置，在任何其他 git 操作之前完成。有关优缺点，
请参阅“[设置的](https://stackoverflow.com/questions/2016673/definitive-recommendation-for-git-autocrlf-settings/2016763#2016763)[权威性建议”。`git autocrlf`](https://stackoverflow.com/questions/2016673/definitive-recommendation-for-git-autocrlf-settings/2016763#2016763)

# java - 查找哈希集中每个单词在文本文档中出现的次数

> ID：10869103
> 
> 赞同：0
> 
> 时间：2012-06-03T09:08:34.237
> 
> 标签：java, text, classification, bayesian

我正在用 Java 实现朴素贝叶斯文本分类算法。

到目前为止我所做的是，声明一个名为 Vocabulary 的哈希集，它存储来自给定文本文件（测试文件）的所有唯一单词。

该算法的步骤之一是将测试文件的所有成员连接到一个文本文件中。结果证明这是一个相当大的文件，其中包含每个文件中的单词。

现在，我必须用连接的文本文件计算词汇表中每个单词的出现次数。我的第一个猜测是保留一种包含每个单词频率的数组结构。但是话又说回来，我的条目太多了。

谁能给我更好的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T09:11:04.357

使用字典（HashMap），其中单词是键，值是出现次数。如果 HashSet 适合内存，则 HashMap 也应该如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:15:13.013

您可以尝试使用 Tries，叶子节点可以存储单词的频率。

# php - String2array 正则表达式

> ID：10869105
> 
> 赞同：-4
> 
> 时间：2012-06-03T09:08:48.677
> 
> 标签：php, regex

有人可以解释一下这三个功能发生了什么吗？

```
public function normalizeTags($attribute,$params)
{
    $this->tag=Tag::array2string(array_unique(Tag::string2array($this->tag)));
}

public static function string2array($tags)
{
    return preg_split('/\s*,\s*/',trim($tags),-1,PREG_SPLIT_NO_EMPTY);
}

public static function array2string($tags)
{
    return implode(', ',$tags);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:13:19.410

拆分标签数组，过滤重复记录并将其返回为字符串。

*   拆分标签数组：使用“字符串，字符串”等正则表达式
*   过滤：[array_unique](http://php.net/manual/en/function.array-unique.php)
*   将其返回到字符串：内[爆](http://il.php.net/manual/en/function.implode.php)

# visual-studio-2010 - 我如何在 tfs 2010 中进行代码审查？

> ID：10869107
> 
> 赞同：5
> 
> 时间：2012-06-03T09:09:36.300
> 
> 标签：visual-studio-2010, tfs

我的 Team Foundation Server 中有 3 个级别的用户：

1.  **程序员**：代码审查员必须审查他们的代码，他们不能签入自己的代码
2.  **专业程序员**：他们的代码不需要审查，但他们的代码副本应自动发送给代码审查员
3.  **Code Reviewer**：他们的代码不需要审查，可以直接签入

我该如何实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T10:12:09.460

一种方法是使用分支和警报。例如...

*   高级程序员将直接在您的“主”分支上工作，以便他们可以将代码检查到实时代码库中。
*   初级程序员将在“RequiresReview”分支上工作，然后代码审查员将审查他们的签入，只有当他们对代码感到满意时才将它们合并到 Main。

TFS 可以针对各种事件发送电子邮件警报，因此代码审阅者只需订阅签入事件即可知道代码何时已签入 Main（由高级程序员）或需要审查（已由 RequiresReview 签入）初级程序员）

以这种方式使用分支意味着您必须在两个方向上合并（将初级的签入合并到 Main，并将高级的签入合并回 RequiresReview）

初级程序员的另一种方法是使用 ShelveSets 而不是另一个分支。在这种方法中，Junior 不会签入他们的代码，而只是将其移动到搁置集中，然后通过电子邮件向代码审查员发送电子邮件，要求他们审查并签入他们的搁置集。这避免了将 Main 中的代码合并回 RequiresReview 的需要——初级人员将在 Main 分支上“工作”，但他们的签入将通过搁置集“关闭”。

您还可以购买一些第三方工具，以更加集成的方式为您管理代码审查流程。网络搜索应该可以帮助您找到这类工具。

**编辑** *请注意，Visual Studio 2012 和 2013 现在包括对代码审查的集成支持（本质上是在上面搁置的想法之上的适当用户界面），因此从 2010 升级可能比我上面建议的解决方法更好。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T15:30:50.483

您可以主要在 TFS 2010 中配置它，但没有简单的方法可以从 UI 中公开它。TFS 2012 和 VS2012 将为代码审查提供更好的 UI，并且它有一个嵌入式流程，可以带您完成所有工作。

如果您想按照您的描述配置源代码管理权限，它的工作方式如下：

> ## 程序员
> 
> 将它们放在 TFS 组或 AD 组中并设置它们的安全性，以便它们在其工作分支上具有 Checkout 和 Lock 权限，但没有签入权限。当他们完成工作后，让他们创建一个搁置集，然后让他们使用搁置集名称向审阅者发送一封电子邮件。审阅者要么返回带有注释的集合（内联或通过电子邮件或工作项），要么代表程序员签入代码。因为程序员不直接签到，所以不能设置自动提醒。您可以更改流程模板，将准备好审查作为任务的状态，并让他们转换任务（这是自定义代码审查解决方案的工作方式）。
> 
> ## 代码审查员
> 
> 至少必须具有结帐、锁定和签入权限。将它们放在 TFS 组或 AD 组中，并相应地设置安全性。他们可以直接签到，而无需使用搁板。
> 
> ## 专业程序员
> 
> （我会小心这个词，它会让其他程序员听起来不专业，我更喜欢高级或经验丰富的）。授予他们与 Code Reviewer 相同的权限。[配置一个 TFS 警报](http://msdn.microsoft.com/en-us/library/ms181334.aspx)，该警报在该组中的任何人签入时发出。将警报发送给代码审查员。然后，他们可以使用查看历史记录选项来查看变更集并将评论发送给有问题的程序员。使用[TFS Power Tools](http://msdn.microsoft.com/en-us/vstudio/bb980963.aspx)可以更轻松地配置警报（并且功能更强大）。

如果您想要更高级的解决方案，即集成到 TFS 流程模板中的解决方案，那么您可以使用以下两种开源解决方案之一：

*   [团队评论](http://teamreview.codeplex.com/)
*   [TFS 代码审查 Worlflow](http://tfscodereviewflow.codeplex.com/)

或者查看他们的代码（它们是开源的），以了解如何自己构建这样的东西。不过这不会很容易，而且一旦 TFS 2012 出现，它可能就没用了。

另请查看[我关于 TFS 2012 中围绕代码审查的新功能的演示文稿](http://blog.jessehouwing.nl/2012/03/did-you-miss-my-techdaysnl-talk-on-code.html)（该 ppt 是英文的，尽管录音是在荷兰会议上完成的，因此是荷兰语）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T13:08:23.813

+1 杰森（Jason）优秀的第三者之一是团队审查

[http://teamreview.codeplex.com/](http://teamreview.codeplex.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T02:40:33.317

如果您可以升级到 Visual Studio 2012，那么现在 Team Explorer UI 中内置了一个很棒的代码审查界面（也需要 TFS 2012）。一探究竟：

[http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/04/new-code-review-feature-in-visual-studio-2012.aspx](http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/04/new-code-review-feature-in-visual-studio-2012.aspx)

# model-view-controller - Node Js 最佳框架和最佳实践

> ID：10869108
> 
> 赞同：1
> 
> 时间：2012-06-03T09:09:37.480
> 
> 标签：model-view-controller, templates, node.js

我正在寻找构建 Node Js 应用程序的最佳实践。在中间件、模板和将它们结合在一起的框架（MVC 或 RVP 模式）方面是否有任何最佳实践。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:13:44.707

查看[Express](http://expressjs.com/)，它很受欢迎。

> 用于 Node.js 的高性能、高级 Web 开发

[express-mvc-bootstrap](http://cliftonc.github.com/express-mvc-bootstrap/)也可以提供帮助。

> 结构化 Node.js、Express、Mongoose、EJS 和 JQuery 应用程序的应用程序模板

# bash - 如果块内容被注释掉时出现 Bash 语法错误：意外标记“fi”附近的语法错误

> ID：10869111
> 
> 赞同：2
> 
> 时间：2012-06-03T09:10:26.573
> 
> 标签：bash

为什么这个简单的 if 语句会导致语法错误？

```
#!/bin/bash

if [[ 1 == 1 ]] ; then
#    echo "hello"
fi 
```

错误是

> 第 5 行：意外标记“fi”附近的语法错误

如果未注释回声，它会按预期工作。

### 编辑

谢谢，使用 . 修复了错误`:`。愚蠢的打击。=P

```
#!/bin/bash

if [[ 1 == 1 ]] ; then
:#    echo "hello"
fi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T09:17:22.513

因为，正如您在[man bash](http://linux.die.net/man/1/bash)中看到的那样，正确的语法`if`是

```
if list; then list; [ elif list; then list; ] ... [ else list; ] fi 
```

如果你查看 的定义`list`，它会说

> 列表是由一个或多个管道组成的序列，由一个运算符 ;、&、&& 或 ││ 分隔，并可选择由 ;、& 或 中的一个终止。

这个“一个或多个”是您的示例不是有效语法的原因。

# php - 正则表达式错误 ISBN 10

> ID：10869115
> 
> 赞同：1
> 
> 时间：2012-06-03T09:11:18.687
> 
> 标签：php, regex

我有以下正则表达式可用于 ISBN-10

```
^[0-9]{9}[[0-9]|X|x]$^ 
```

它似乎适用于所有数字，但是当引入字母时，它会给我字母，例如 ISBN 047146158X 在数组中返回 X，

有人可以帮我表达一下吗？

这就是数据的样子

```
startISBN 10-047146158X Author(s): Stephen R. Bolsover, Jeremy S. Hyams, Elizabeth A. Shephard, Hugh A. White, Claudia G. Wiedemann Publisher- Wiley 27 JAN 2004 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:15:56.477

任何一个

```
[0-9]{9}([0-9]|X|x) 
```

要不就

```
[0-9]{9}[0-9Xx] 
```

括号匹配其中`[]`的单个字符，嵌套它们不会做你想要的。括号`()`标记了一个组，您可以在其中使用`|`字符来分隔不同的选项，但由于您只寻找一个字符，您可以将所有内容放在括号中。

`^`表示“行首”和`$`“行尾”-如果您在开头和结尾都有它们，则正则表达式仅在输入中没有其他内容*时才匹配。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T09:27:18.667

试试这个模式

```
\b[0-9]{9}[0-9Xx]\b 
```

# c# - 在 ASP.NET MVC 中解析 JSON 值时出错？

> ID：10869119
> 
> 赞同：4
> 
> 时间：2012-06-03T09:12:56.820
> 
> 标签：c#, asp.net, asp.net-mvc, json, parsing

我正在尝试使用 StackOverflow 的搜索 API 来搜索问题。

我正在使用此操作来执行解析：

```
public ActionResult StackExchange(string sq)
{
    string url = "http://api.stackoverflow.com/1.1/search?intitle=" + sq + "&order=desc";    
    var client = new WebClient();
    var response = client.DownloadString(new Uri(url));
    JObject o = JObject.Parse(response);// ERROR
    int total = (int)o["total"];
    return View(total);
} 
```

这是我要解析的 JSON url：

[http://api.stackoverflow.com/1.1/search?intitle=asp.net%20custom%20404&order=desc](http://api.stackoverflow.com/1.1/search?intitle=asp.net%20custom%20404&order=desc)

我正在尝试提取以下数据：

```
`"total": 3` , 
`"question_timeline_url": "/questions/10868557/timeline",`
`"title": "Asp.net custom 404 not working using Intelligencia rewriter"` 
```

它给出的错误为：***Newtonsoft.Json.JsonReaderException：解析值时遇到意外字符：。路径 ''，第 0 行，第 0 位置。***

异常的原因是什么？我之前用过同样的方法，效果很好。

请建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T09:53:07.223

尝试以下方法。

使用 NuGet 并引用 JSON.NET 包。我看到你已经这样做了。

编写请求并获得响应。

```
string url = "http://api.stackoverflow.com/1.1/search?intitle=test&order=desc";
var request = (HttpWebRequest) WebRequest.Create(url);
var response = request.GetResponse(); 
```

您从 Stack Exchange API 收到的响应已压缩！您首先需要将其解压缩，然后才能读取 JSON 响应。这就是您收到异常的原因。

让我们创建一个方法来做到这一点。为此，.NET 为我们提供了方便的 GZipStream 类型。

```
private string ExtractJsonResponse(WebResponse response)
{
    string json;
    using (var outStream = new MemoryStream())
    using (var zipStream = new GZipStream(response.GetResponseStream(),
        CompressionMode.Decompress))
   {
        zipStream.CopyTo(outStream);
        outStream.Seek(0, SeekOrigin.Begin);
        using (var reader = new StreamReader(outStream, Encoding.UTF8))
        {
            json = reader.ReadToEnd();
       }
    }
    return json;
} 
```

现在您可以从响应中提取 JSON 数据。

```
var json = ExtractJsonResponse(response); 
```

现在您可以解析返回的数据。

```
JObject o = JObject.Parse(json);
int total = (int)o["total"]; 
```

PS：我建议你使用今年早些时候发布的 API 2.0 版本。

[https://api.stackexchange.com/docs](https://api.stackexchange.com/docs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T09:49:31.917

我的第一个猜测是因为 JsonReader 在第 0 行给出异常，位置 0 是编码搞砸了。由于上面的请求在 chrome 开发者工具中显示了以下*Content-Type标头*

```
Content-Type:application/json; charset=utf-8 
```

您可以尝试通过 WebClient 的[Encoding 属性](http://msdn.microsoft.com/en-us/library/system.net.webclient.encoding.aspx)将 WebClient 使用的编码设置为 utf-8 。

# regex - Web Scraper - Regex Match.Value 返回字符串长度而不是字符串本身

> ID：10869120
> 
> 赞同：0
> 
> 时间：2012-06-03T09:13:03.373
> 
> 标签：regex, datagridview, screen-scraping, match

我在配置我正在为我目前正在进行的项目工作的网络抓取工具时遇到问题

我正在尝试从页面中抓取一系列链接，以评估我想要处理的链接。这是我的代码：

```
public partial class Form1 : Form
{
    private byte[] aRequestHTML;
    private string sourceString = null;
    string[] a;
    WebClient objWebClient = new WebClient();
    LinkScraper linkScraper = new LinkScraper();

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ScrapeLinks(textBox1.Text);
    }

    public void ScrapeLinks(string sourceLink)
    {
        // gets the HTML from the url written in the textbox
        aRequestHTML = objWebClient.DownloadData(sourceLink);
        // creates UTf8 encoding object
        UTF8Encoding utf8 = new UTF8Encoding();
        // gets the UTF8 encoding of all the html we got in aRequestHTML
        sourceString = utf8.GetString(aRequestHTML);
        // this is a regular expression to check for the urls 
        Regex r = new Regex("\\<a\\shref\\=(.*)\\>(.*)\\<\\/a\\>");
        // get all the matches depending upon the regular expression
        MatchCollection mcl = r.Matches(sourceString);

        a = new string[mcl.Count];
        int i = 0;
        foreach (Match ml in mcl)
        {
            // Add the extracted urls to the array list
            a[i] = ml.ToString();
            Console.WriteLine(a[i]);
            i++;
        }

        dataGridView1.DataSource = a;
        // binds the databind

        // The following lines of code writes the extracted Urls to the file named test.txt
        StreamWriter sw = new StreamWriter("test.txt");
        foreach (string aElement in a)
        {
            sw.Write(aElement + "\n");
        }
        sw.Close();
    }
} 
```

我的问题来自设置我的数据网格数据源。不是用字符串列表填充数据网格，而是用每个字符串长度填充。正如您将看到的，我有一个 test.txt 文件写出来，看看我是否在做一些愚蠢的事情，但文本文件包含每个字符串，因为我希望在数据网格中看到它

我已经在论坛上搜寻了 12 小时以寻求解决方案，但没有任何乐趣

有人可以告诉我为什么 .Value 没有将我的字符串返回到字符串数组“a”以绑定到数据网格吗？

一如既往地非常感谢任何帮助

问候巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:47:45.927

您可以将页面转换为 XML，然后使用 XPath 和 JavaScript 的 E4X 来简化它。

看看我做过的[Script Scraper 。](http://www.scriptscraper.com)

谢谢，马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:15:18.587

刚刚找到解决方案的人

DataGridView 显示它可以为字符串找到的第一个属性，这是它的长度属性 解决方法是使用 DataTable

```
 DataTable links = new DataTable();
 links.Columns.Add("Link URL");

 foreach (Match ml in mcl)
 {
   // Add the extracted urls to table
   links.Rows.Add(new object[] {ml.Value});
 } 
```

# java - 在 Java 的 REST 服务中获取空对象

> ID：10869121
> 
> 赞同：0
> 
> 时间：2012-06-03T09:13:16.900
> 
> 标签：java, json, rest, jax-ws

我的资源类中有以下方法用于 Java 中的 REST 服务。

```
@POST
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public Player createCustomer(Customer customer)
{
    System.out.println("Request for Create");

    System.out.println(""+customer.getID()+"\n"+customer.getTableID()+"\n"+customer.getCustNick());

    //Above statement should print the details I send via JSON object

    //return custdao.create(customer); //Want to call this to add new "customer"  into database table.

    return player;
} 
```

并按照我在填写表单中的输入字段并单击创建按钮时调用的 jQuery 方法。

```
function createEntry() {
        var formData = JSON.stringify({
            "ID" : $("input[name='txtID']").val(),
            "tableID" : $("input[name='txtTableID']").val(),
            "custNick" : $("input[name='txtNick']").val()
        });

        console.log(formData); //Just to see if form details are JSON encoded.

        $.ajax({
            type: "POST",
            contentType: "application/json",
            url: baseURL,
            dataType: "json",
            data: formData,
            success: function(data) {
                console.log("Customer Added!");
                $("div.response").append("<h3>New Customer ("+ $("input[name='txtNick']").val() +") Added on the Server</h3>");
            }
        });
    } 
```

但是在服务器上，我得到了空的“客户”对象，我在这里做错了什么？如果您需要更多详细信息（关于客户类模型），请告诉我。

**更新：**以下是客户类。

```
/*ignore imports, all required imports are included */

@XmlRootElement
public class Customer
{
    private int id;
    private int tableid;
    private String custnick;

    public int getID()
    {
            return id;
    }

    public void setID(int id)
    {
            this.id = id;
    }

    ....
    ....
    /* Similar Setter-Getter Methods for the fields */
} 
```

我猜这个问题与我的“客户”类的 XML 模式有关，并且我在 JSON 对象中发送的节点名称与模式不匹配，这就是为什么它可能无法使用我的模型类的 setter 方法映射字段，而不是当然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:42:18.140

该问题可能是由字段名称不匹配引起的。

您可以`@XmlElement`在实体类上使用 JAXB 注释来为字段设置任何您想要的名称，以使其清晰。只需点击此链接：http: [//jaxb.java.net/tutorial/section_6_2_7_1-Annotations-for-Fields.html#Annotations%20for%20Fields](http://jaxb.java.net/tutorial/section_6_2_7_1-Annotations-for-Fields.html#Annotations%20for%20Fields)

# php - Uploadify：文件上传错误 - 无法在第 0 行的未知中创建临时文件

> ID：10869125
> 
> 赞同：2
> 
> 时间：2012-06-03T09:14:20.400
> 
> 标签：php, upload, uploadify

我在使用 uploadify 和 uploadifive 时遇到以下错误：

```
PHP Warning:  File upload error - unable to create a temporary file in Unknown on line 0 
```

这是一个间歇性问题。有时上传工作正常，有时不行。直到昨天一切都运行良好，我不知道对uploadify 或uploadifive 进行了任何更改。在前端似乎上传已成功完成，即没有报告错误并且`onQueueComplete`事件触发，但文件没有显示在我的上传文件夹中，并且上面的错误显示在我的`error_log`.

我想知道我能做些什么来解决这个问题。

* * *

**其他会话错误：**

```
PHP Warning: session_start() [<a href='function.session-start'>function.session-start</a>]: open(/tmp/sess_6d08c1a8c3703bb08a3dc585e1828109, O_RDWR) failed: No space left on device (28) in /home/..../uploadifive.php on line 6

PHP Warning: Unknown: open(/tmp/sess_6d08c1a8c3703bb08a3dc585e1828109, O_RDWR) failed: No space left on device (28) in Unknown on line 0

PHP Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (/tmp) in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T10:35:02.833

看来你`/tmp`有空间问题。

`df -h`您可以通过在控制台上运行来检查磁盘空间大小。

如果无法清除`/tmp`空间问题，可以考虑移动临时上传文件路径：[http ://www.php.net/manual/en/ini.core.php#ini.upload-tmp-dir](http://www.php.net/manual/en/ini.core.php#ini.upload-tmp-dir)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:06:45.307

`unable to create a temporary file in Unknown`表示您的临时路径未设置或无法读取。尝试重新启动服务器并重试。如果这不起作用，请检查您的 php.ini 是否设置了临时路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T09:15:52.333

检查 tmp 文件夹的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-19T13:37:48.873

通过运行 df -h 检查磁盘空间大小

检查根卷，尝试清除不需要的文件或增加空间。这为我解决了这个问题

# java - Maven 构建使用 java 1.7 导致 VerifyError

> ID：10869127
> 
> 赞同：6
> 
> 时间：2012-06-03T09:14:48.877
> 
> 标签：java, maven, junit, cobertura, verifyerror

我得到了一个带有测试用例的简单类，并且在 Eclipse 中一切正常，但是当我运行 maven build 时（有这个目标：安装 cobertura:cobertura checkstyle:checkstyle-aggregate）我在surefire报告中看到了一个验证错误。

这是确切的错误：

```
-------------------------------------------------------------------------------
Test set: com.diploma.testProject.ClassUnderTestTest
-------------------------------------------------------------------------------
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.034 sec <<< FAILURE!
testMethodReturnsTrue(com.diploma.testProject.ClassUnderTestTest)  Time elapsed: 0.005 sec  <<< ERROR!
java.lang.VerifyError: Expecting a stackmap frame at branch target 79 in method com.diploma.testProject.ClassUnderTest.method(II)Z at offset 24
    at com.diploma.testProject.ClassUnderTestTest.testMethodReturnsTrue(ClassUnderTestTest.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:146)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
    at $Proxy0.invoke(Unknown Source)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:87)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)

testMethodReturnFalse(com.diploma.testProject.ClassUnderTestTest)  Time elapsed: 0 sec  <<< ERROR!
java.lang.VerifyError: Expecting a stackmap frame at branch target 79 in method com.diploma.testProject.ClassUnderTest.method(II)Z at offset 24
    at com.diploma.testProject.ClassUnderTestTest.testMethodReturnFalse(ClassUnderTestTest.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:146)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
    at $Proxy0.invoke(Unknown Source)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:145)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:87)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) 
```

这是课程：

```
public class ClassUnderTest {
    public static boolean method(int a, int b) {
        if ( a == b) {
            System.out.println("");
            return true;
        } 
        return false;
    }
} 
```

和测试：

```
public class ClassUnderTestTest {

    @Test
    public void testMethodReturnsTrue() {
        assertTrue(ClassUnderTest.method(1, 1));
    }

    @Test
    public void testMethodReturnFalse() throws Exception {
        assertFalse(ClassUnderTest.method(1, 2));
    }

} 
```

和 pom.xml ：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.diploma</groupId>
  <artifactId>testProject</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>testProject</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.10</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <testSource>1.7</testSource>
                    <testTarget>1.7</testTarget>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
  </build>
</project> 
```

将目标设置为 1.5 时，这是可行的，但我需要它与 1.7 一起使用。更奇怪的是，将方法修改为只有一个返回，如下所示：

```
public class ClassUnderTest {
    public static boolean method(int a, int b) {
        if ( a == b) {
            System.out.println("");
        } 
        return false;
    }
} 
```

也解决了这个问题。我试过在 pom 的属性块中设置目标和源版本，但结果是一样的。

有没有办法让它在 1.7 版上运行？

编辑：这个问题也只出现在目标 cobertura:cobertura。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T12:33:50.023

问题似乎出在cobertura。看起来它不支持java 1.7 很好。该修复类似于@Raghuram 为 Eclipse 编写的链接。像这样修改 pom 可以使测试正常工作：

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12</version>
                <configuration>
                    <argLine>-XX:-UseSplitVerifier</argLine>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <testSource>1.7</testSource>
                    <testTarget>1.7</testTarget>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T04:27:59.163

编辑：`mvn cobertura:cobertura`由于缺乏对 Java 7 的 cobertura 支持而无法工作。 [这个 SO question](https://stackoverflow.com/questions/8151470/cobertura-java-7-support)讨论了这个。看起来[JaCoCo](http://www.eclemma.org/jacoco/trunk/index.html)是要走的路。

`mvn install``maven-3.0.4`在 Windows 7和Windows 7 上从命令行对我来说效果很好`java 1.7.0_04`。可能你遇到了[这个 Eclipse 错误](http://java.dzone.com/articles/javalangverifyerror-expecting)？

要添加到@Pau 的答案，`<pluginManagement>`在多模块 poms 中用于声明`<plugin>`可以根据孩子的要求继承的元素。

`pom`我在问题中以及以下代码段中没有错误：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <testSource>1.7</testSource>
                <testTarget>1.7</testTarget>
            </configuration>
        </plugin>
    </plugins> 
```

# php - 用php获取xml数据

> ID：10869129
> 
> 赞同：-3
> 
> 时间：2012-06-03T09:15:16.220
> 
> 标签：php, xml

我有一个 XML

```
<person>
<FirstName>smname</FirstName>
<LastName>Kumari</LastName>
<Address>
<DoorNumber>556</DoorNumber>
<street>5th cross</street>
<City>ghcghfgh</City>
</Address>
<PhoneNumber>
<Mobile>2563</Mobile>
<Landline>64746</Landline>
<SkypeNumber>67567</SkypeNumber>
</PhoneNumber>
</person> 
```

我试图获得的价值，`phonenumber->skypenumber`但得到一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:27:05.190

您的 XML 中有错误。标签没有正确写入，`<person>`您也没有起始`<FirstName>`标签。还有一个拼写错误`<PhoneNumber>`

尝试这个

```
<?php

$xml = <<< EOF
<person>
    <FirstName>Rashmi</FirstName>
    <LastName>Kumari</LastName>
    <Address>
        <DoorNumber>556</DoorNumber>
        <street>5th cross</street>
        <City>ghcghfgh</City>
    </Address>
    <PhoneNumber>
        <Mobile>2563</Mobile>
        <Landline>64746</Landline>
        <SkypeNumber>67567</SkypeNumber>
    </PhoneNumber>
</person>
EOF;

$xml = new SimpleXMLElement($xml);

var_dump((int) $xml->PhoneNumber->SkypeNumber);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:27:52.990

我在您的帖子中没有看到任何代码。你使用[simplexml_load_string](http://de.php.net/simplexml_load_string)函数吗？

```
$xml = simplexml_load_string($yourstring);
$xml->person->PhoneNunber->SkypeNumber; 
```

# date - 如何从 JScript 纪元转换到/从 VBScript 纪元？

> ID：10869131
> 
> 赞同：1
> 
> 时间：2012-06-03T09:15:23.357
> 
> 标签：date, vbscript, epoch, jscript

VBScript 在内部将日期表示为双精度数，在小数点左侧表示从“0 年”开始的天数，在小数点右侧表示当天从午夜开始的毫秒数。“0 年”似乎是 1899 年，如果

```
WScript.Echo Year(CDate(0)) 
```

可以信任。

另一方面，JScript 以 1970 年的“0 年”开始，并将时间表示为从那时到现在的总毫秒数。

有人可以指出我可以使用基础的 Double 或 Long 日期格式将 JScript 日期转换为 VBScript 日期并沿这些线再次转换的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:11:42.780

纪元是任何语言的纪元，自 1970 年 1 月 1 日 00:00:00 UTC 以来过去的秒数。

```
 'Get current epoch with vbScript ...
  dim epoch
  epoch = dateDiff("s", "01/01/1970 00:00:00", now())
  wScript.echo "epoch now = " & epoch 
```

> 现在的纪元 = 1346891880

```
 'And convert it back (probably the one you need) ...
  dim datetime
  datetime = dateAdd("s", epoch, "01/01/1970 00:00:00")
  wScript.echo "datetime from epoch " & epoch & " = " & datetime 
```

> 纪元 1346891880 的日期时间 = 6/09/2012 12:38:00 AM

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:05:03.370

使用时间戳生成日期并转换为双精度。

```
Function CurrentTZOffset()
    With CreateObject("WScript.Shell") 
        CurrentTZOffset = - .RegRead( _ 
        "HKLM\System\CurrentControlSet\Control\TimeZoneInformation\ActiveTimeBias")
    End With
End Function

Dim dblVbEpoch
    dblVbEpoch = CDbl(DateAdd("s", 1336708766790 / 1000, #1970/1/1#))

WScript.Echo "VB Epoch :", dblVbEpoch
WScript.Echo "VB Date (GMT):", CDate(dblVbEpoch)
WScript.Echo "VB Date (LOCAL):", DateAdd("n", CurrentTZOffset(), CDate(dblVbEpoch))
WScript.Echo "JS Epoch From VB Epoch:", DateDiff("s", #1970/1/1#, CDate(dblVbEpoch)) * 1000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T06:35:40.273

如果您只对在 VBScript 日期和 JScript 日期之间进行转换感兴趣，那么该功能将通过[`Date`构造函数](http://msdn.microsoft.com/en-us/library/cd9w2te4%28v=vs.84%29.aspx)和[`getVarDate`](http://msdn.microsoft.com/en-us/library/4d4x3w61%28v=vs.84%29.aspx)方法内置到 JScript 中。

一个小例子：

```
<job id="test">
    <script language="JScript" id="jsLibrary">
        function JSExample() {
            var jsDate = new Date(2014, 4, 12);
            VBPrintJSDate(jsDate);
        }

        function JSPrintVBDate(vbDate) {
            var jsDate = new Date(vbDate);
            WScript.Echo(jsDate.toUTCString());
        }
    </script>
    <script language="VBScript" id="vbLibrary">
        Option Explicit

        Sub VBExample
            Dim vbDate
            vbDate = DateSerial(2000, 11, 30)
            JSPrintVBDate(vbDate)
        End Sub

        Sub VBPrintJSDate(jsDate)
            Dim vbDate
            vbDate = jsDate.getVarDate()
            WScript.Echo FormatDateTime(vbDate)
        End Sub
    </script>
    <script language="VBScript" id="main">
        Option Explicit

        VBExample
        JSExample
    </script>
</job> 
```

# android - 在 Android 上将 adwhirl 与 Buzztouch 1.4 集成，导致手机崩溃

> ID：10869137
> 
> 赞同：0
> 
> 时间：2012-06-03T09:16:26.070
> 
> 标签：android, adwhirl, buzztouch

我正在尝试将 Adwhirl 添加到 Android 上的 Buzztouch 应用程序中，但它会使手机崩溃。Admob 本身就可以。

Adwhirl 代码已添加到 Buzztouch 1.4 中的自定义文本页面代码中。我在 Adwhirl 控制面板中设置了一个使用 Admob 的应用程序。

Admob 和 Adwhirl SDK 包含在`libs`文件夹中并链接到构建路径

**清单提取物**

```
 <!-- starting activity -->
    <activity android:name=".Act_Home" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <meta-data android:value="8a1d###cf6482407ba52947923949d714"
    android:name="ADWHIRL_KEY"/>
    </activity>

   <activity android:name=".Screen_CustomText" 
             android:label="@string/app_name"            
             android:screenOrientation="sensor" 
             android:configChanges="orientation">
        <meta-data android:value="8a1d92cf64###ba52947923949d714" 
   android:name="ADWHIRL_KEY"/>
    </activity> 
```

**主要活动提取物**

```
//onCreate
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screen_customtext);
    AdWhirlManager.setConfigExpireTimeout(1000 * 60 * 5);
    AdWhirlTargeting.setAge(23);
    AdWhirlTargeting.setGender(AdWhirlTargeting.Gender.MALE);
    AdWhirlTargeting.setKeywords("online games gaming");
    AdWhirlTargeting.setPostalCode("bb54de");
    AdWhirlTargeting.setTestMode(false);
    AdWhirlLayout adWhirlLayout = (AdWhirlLayout)findViewById(R.id.adwhirl_layout);
    TextView textView = new TextView(this);
    RelativeLayout.LayoutParams layoutParams = new
    RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                                  LayoutParams.WRAP_CONTENT);
    int diWidth = 320;
    int diHeight = 52;
    int density = (int) getResources().getDisplayMetrics().density;      
    adWhirlLayout.setAdWhirlInterface(this);
    adWhirlLayout.setMaxWidth((int)(diWidth * density));
    adWhirlLayout.setMaxHeight((int)(diHeight * density));
    layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
    textView.setText("Below AdWhirlLayout");
    LinearLayout layout2 = (LinearLayout)findViewById(R.id.layout_main);
    layout2.setGravity(Gravity.CENTER_HORIZONTAL);
    layout2.addView(adWhirlLayout, layoutParams);
    layout2.addView(textView, layoutParams);
    layout2.invalidate(); 
```

**布局xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/header"
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_height="fill_parent" 
   android:layout_width="fill_parent"
   android:background="#FFFFFF"
    >
    <include layout="@layout/global_title_dark" />
 <!-- Layout for admob -->
 <LinearLayout 
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/mainLayout"
        android:layout_height="fill_parent" 
        android:layout_width="fill_parent"
        android:layout_marginTop="47dip"
        android:orientation="horizontal">
 </LinearLayout>
 <LinearLayout                        
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/myContent"
        android:layout_height="fill_parent" 
        android:layout_width="fill_parent"
        android:layout_marginTop="87dip"
        android:orientation="vertical">
    <!-- Layout for adwhirl -->     
    <RelativeLayout android:id="@+id/layout_main"
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/apk/res/com.adwhirl"
            android:layout_height="fill_parent" 
            android:layout_width="fill_parent"
            android:background="#FFFFFF">
<com.adwhirl.AdWhirlLayout
            android:id="@+id/adwhirl_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
</RelativeLayout>
    <WebView  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/myWebView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
   </LinearLayout> 
```

**错误日志提取，错误从“存储的配置数据不存在”开始**

```
06-03 09:39:06.072: I/AdWhirl SDK(5954): Finished creating adWhirlManager
06-03 09:39:06.072: D/AdWhirl SDK(5954): Prefs{null}: {"config": "[]
06-03 09:39:06.072: D/AdWhirl SDK(5954): ", "timestamp": 1338665057125}
06-03 09:39:06.072: D/AndroidRuntime(5954): Shutting down VM
06-03 09:39:06.072: I/AdWhirl SDK(5954): Stored config info not present or expired, 
fetching     fresh data**
06-03 09:39:06.072: W/dalvikvm(5954): threadid=1: thread exiting with uncaught 
exception (group=0x4027a5a0)
06-03 09:39:06.082: E/AndroidRuntime(5954): FATAL EXCEPTION: main
06-03 09:39:06.082: E/AndroidRuntime(5954): java.lang.RuntimeException: Unable
to start activity      ComponentInfo{com.v1_4.eightiespopquiz.com/
com.v1_4.eightiespopquiz.com.Screen_CustomText}:  
java.lang.ClassCastException:              
android.widget.RelativeLayout 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:53:54.493

看起来你可能正在设置你的内容视图

`setContentView(R.layout.screen_customtext);`

到一个不存在的布局 id。也就是说，`R.layout.screen_customtext`似乎没有在您的布局 xml 中定义。

# java - 在本地机器上监听多个套接字（不同的端口）

> ID：10869144
> 
> 赞同：0
> 
> 时间：2012-06-03T09:17:24.433
> 
> 标签：java, multithreading, sockets

我即将编写一个客户端，列出传入 UDP 数据包的不同端口。但问题是，我不知道`DatagramSocket(in_port)`下一个数据包会到达哪个位置。而且我不想让例如四个线程运行，每个线程只专门听一个`DatagramSocket`。

Mu 问题：有没有办法使用类似`select`函数的东西`C`，我只需要传递一组文件描述符并`select`循环遍历所有文件描述符以返回接收数据包的那个？

还有一个代码示例会非常好。在此先感谢您的帮助。

# android - DropboxUnlinkedException 安卓

> ID：10869145
> 
> 赞同：2
> 
> 时间：2012-06-03T09:17:25.027
> 
> 标签：android, dropbox

我在保管箱网站上关注本教程。

[用于 android Dropbox 的教程](https://www.dropbox.com/developers/start/setup#android)

我已经获得了应用程序密钥和秘密，并将它们放在我的代码中以及清单中的正确位置。清单也有互联网许可。

所以设置很好。该应用程序旨在将文本文件上传到我的保管箱帐户。它似乎开始正确地进行身份验证，但 putFile() 方法抛出了 DropboxUnlinkedException。当应用程序运行时，您必须允许在手机上访问您的帐户，当我单击允许应用程序完成正确身份验证时。我认为除了执行 putfile() 方法之外一切都很好。

我试过在应用程序启动时清除密钥，但仍然没有运气。

我做了一些日志记录，但不知道现在该做什么，有人有什么想法吗？

谢谢马特。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import com.dropbox.client2.DropboxAPI;
import com.dropbox.client2.DropboxAPI.Entry;
import com.dropbox.client2.android.AndroidAuthSession;
import com.dropbox.client2.exception.DropboxException;
import com.dropbox.client2.exception.DropboxUnlinkedException;
import com.dropbox.client2.session.AccessTokenPair;
import com.dropbox.client2.session.AppKeyPair;
import com.dropbox.client2.session.Session.AccessType;

import android.app.Activity;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;

public class DropboxfileuploadActivity extends Activity {

    private static final String TAG = "DropboxfileuploadActivity";
    final static private String APP_KEY = "***********";
    final static private String APP_SECRET = "k3i***********";
    final static private AccessType ACCESS_TYPE = AccessType.APP_FOLDER;

    final static private String ACCOUNT_PREFS_NAME = "prefs";
    final static private String ACCESS_KEY_NAME = "ACCESS_KEY";
    final static private String ACCESS_SECRET_NAME = "ACCESS_SECRET";

    private DropboxAPI<AndroidAuthSession> mDBApi;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       // setContentView(R.layout.main);

        clearKeys();
        Log.e(TAG, "keys cleared");
        AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
        AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);

        mDBApi = new DropboxAPI<AndroidAuthSession>(session);
        mDBApi.getSession().startAuthentication(DropboxfileuploadActivity.this);
        Log.e(TAG, "started authentication");

        FileInputStream inputStream = null;
        try {

            File fileToUpload = new File(Environment.getExternalStorageDirectory()
                     +File.separator
                     +"dropboxapp"); 
                fileToUpload.mkdirs();

                Log.e(TAG, "dirs made");

            File file = new File(fileToUpload.getAbsolutePath()+"/uploadedFile.txt");
            Log.e(TAG, "the file to be uploaded has a size of "+file.length()+" bytes");

            inputStream = new FileInputStream(file);
            Log.e(TAG, "inputstream created");

            Entry newEntry = mDBApi.putFile("/test.txt", inputStream,
                    file.length(), null, null);
            Log.e(TAG, "putFile method executed");

            Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
        } catch (DropboxUnlinkedException e) {
            // User has unlinked, ask them to link again here.
            Log.e("DbExampleLog", "User has unlinked.");

        } catch (DropboxException e) {
            Log.e("DbExampleLog", "Something went wrong while uploading.");
        } catch (FileNotFoundException e) {
            Log.e("DbExampleLog", "File not found.");
        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {}
            }
        }
        setContentView(R.layout.main);
    }//end of oncreate()

    protected void onResume() {
        super.onResume();

        if (mDBApi.getSession().authenticationSuccessful()) {
            try {
                // MANDATORY call to complete auth.
                // Sets the access token on the session
                mDBApi.getSession().finishAuthentication();

                if(mDBApi.getSession().authenticationSuccessful()){
                Log.e(TAG, "Authentication finished");
                }
                AccessTokenPair tokens = mDBApi.getSession().getAccessTokenPair();

                // Provide your own storeKeys to persist the access token pair
                // A typical way to store tokens is using SharedPreferences
                storeKeys(tokens.key, tokens.secret);
            } catch (IllegalStateException e) {
                Log.i("DbAuthLog", "Error authenticating", e);
            }
        }

    }//end of onResume()

    private void storeKeys(String key, String secret) {
        // Save the access key for later
        SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
        Editor edit = prefs.edit();
        edit.putString(ACCESS_KEY_NAME, key);
        edit.putString(ACCESS_SECRET_NAME, secret);
        edit.commit();
    }

    private void clearKeys() {
        SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
        Editor edit = prefs.edit();
        edit.clear();
        edit.commit();
    }

}//end of class 
```

.

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tecmark.dropboxfileupload"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="3" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".DropboxfileuploadActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
      android:name="com.dropbox.client2.android.AuthActivity"
      android:launchMode="singleTask"
      android:configChanges="orientation|keyboard">
      <intent-filter>
        <!-- Change this to be db- followed by your app key -->
        <data android:scheme="db-3*********" />
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE"/>
        <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
    </activity>

    </application>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

.

```
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): started authentication
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): dirs made
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): the file to be uploaded has a size of 147 bytes
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): inputstream created
06-03 09:54:51.117: E/DbExampleLog(20365): User has unlinked.
06-03 09:54:57.397: E/DropboxfileuploadActivity(20365): Authentication finished 
```

.

这是完整的堆栈。

```
06-03 09:54:51.067: E/DropboxfileuploadActivity(20365): keys cleared
06-03 09:54:51.077: E/dalvikvm(20365): Could not find class 'org.json.simple.JSONArray', referenced from method com.dropbox.client2.DropboxAPI.revisions
06-03 09:54:51.077: W/dalvikvm(20365): VFY: unable to resolve check-cast 223 (Lorg/json/simple/JSONArray;) in Lcom/dropbox/client2/DropboxAPI;
06-03 09:54:51.087: D/dalvikvm(20365): VFY: replacing opcode 0x1f at 0x0053
06-03 09:54:51.087: E/dalvikvm(20365): Could not find class 'org.json.simple.JSONArray', referenced from method com.dropbox.client2.DropboxAPI.search
06-03 09:54:51.087: W/dalvikvm(20365): VFY: unable to resolve instanceof 223 (Lorg/json/simple/JSONArray;) in Lcom/dropbox/client2/DropboxAPI;
06-03 09:54:51.087: D/dalvikvm(20365): VFY: replacing opcode 0x20 at 0x006d
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): started authentication
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): dirs made
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): the file to be uploaded has a size of 147 bytes
06-03 09:54:51.117: E/DropboxfileuploadActivity(20365): inputstream created
06-03 09:54:51.117: E/DbExampleLog(20365): User has unlinked.
06-03 09:54:57.397: E/DropboxfileuploadActivity(20365): Authentication finished
06-03 10:21:31.087: W/IInputConnectionWrapper(20365): showStatusIcon on inactive InputConnection
06-03 10:21:31.087: W/IInputConnectionWrapper(20365): InputConnection = android.view.inputmethod.BaseInputConnection@40d727e0, active client = false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:23:43.450

我已经解决了这个问题。

由于您还没有在这里发布答案，我想这个问题仍然对您开放。

遵循这些步骤：（我只会提到我遵循的额外步骤）

1.  转到项目的属性。
2.  转到 Java 构建路径
3.  去订购和出口
4.  选择`json_simple-1.1.jar`（会出现正确的复选标记）
5.  现在选择`json_simple-1.1.jar`并`dropbox-android-sdk`震动并`UP`通过按右侧的**向上按钮移动它们。**
6.  清洁构建您的项目。

它已经完成了:)

# objective-c - 从 tablevew 剂量工作中的 2 个部分推动 segue

> ID：10869146
> 
> 赞同：1
> 
> 时间：2012-06-03T09:17:49.630
> 
> 标签：objective-c, ios, uitableview, storyboard, segue

我有一个配置为将 Segue 推送到另一个视图的 tableView。该表分为 2 个部分。当我推到下一个视图时，我也传输数据，但这些部分有问题。

假设我的第 0 部分有 2 行，第 1 部分有 1 行。如何检查第 1 行？

在 Storybaords 和 segue 之前我做了

```
row = indexPath.row;

if (section == 0)
{
    if (row == 0)
        data = @"Zero";

    if (row == 1)
        data = @"One";
}

if (section == 1)
{
    if (row == 0)
        data = @"Two";

    if (row == 1)
        data = @"Three";
} 
```

现在它不工作了。当我单击第 1 节中的 0 行时，它会将“零”放入数据而不是“二”，这是为什么呢？如何有效区分第 0 部分和第 1 部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:59:18.357

1.  您应该将数据显示在`cellForRowAtIndexPath:`.
2.  您只需使用 Push Segue 将 IB 中的原型单元链接到下一个视图控制器。
3.  然后，您可以`prepareForSegue`将所需的数据传递给新的视图控制器。

正确的`section`和`row`参数将在`indexPath`变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:51:52.040

哥们，在哪`section = indexpath.section`？这是一个 prepareForSegue 示例；

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    NSIndexPath *indexpath = [self.tableView indexPathForCell:sender];
//    indexpath.section
//    indexpath.row
} 
```

# c# - 简单的文件流程序，怎么了？怎么提高？

> ID：10869151
> 
> 赞同：1
> 
> 时间：2012-06-03T09:18:41.787
> 
> 标签：c#, .net, filestream

我正在尝试学习 C#，因此，我观看教程并一步一步地按照它们进行操作，但我也喜欢在他们在教程中所做的程序中添加一些小东西。这次我在看关于文件流的newboston C#教程，我想创建一个可以读取字节和普通文本的文本阅读程序，所以我创建了3个按钮，2个用于选择阅读器应如何显示文本，1个用于打开文件对话框，但是当我选择该选项时，字节阅读器出现问题，它只显示零。

这就是我的程序的样子![我的程序](../Images/bf19d7eebc2861efd8e6a3c4126b6e73.png)

这就是我的文本文件的样子![我的文本文件](../Images/d7e4b18c0452fa922982acc413b71817.png)

这就是选择字节选项时我的结果的样子![在此处输入图像描述](../Images/5124208846603681ba62804249d7d409.png)

这是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Media;
using System.IO;

namespace sound
{
    public partial class Form1 : Form
    {
    bool bytebuttonclicked = false;
    bool normalbuttonclicked = false;
    string text1;
    public Form1()
    {
        InitializeComponent();
    }
    SoundPlayer My_JukeBox = new SoundPlayer(@"C:\WINDOWS\Media\tada.wav");

    private void button1_Click(object sender, EventArgs e)
    {
        OpenFileDialog OFD = new OpenFileDialog();

        if (OFD.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            StreamReader sr = new StreamReader(File.OpenRead(OFD.FileName));
            if (normalbuttonclicked == true && bytebuttonclicked == false)
            {
                textBox1.Text = sr.ReadToEnd();
                sr.Dispose();
            }
            else if (bytebuttonclicked == true && normalbuttonclicked == false)
            {
                text1 = sr.ReadToEnd();
                byte[] Buffer = new byte[text1.Length];
                sr.BaseStream.Read(Buffer, 0, text1.Length);
                foreach (byte MyByte in Buffer)
                    textBox1.Text += MyByte.ToString("X") + " ";
                sr.Dispose();
            }
            else
            {
                MessageBox.Show("choose one button");
            }
        }
        My_JukeBox.Play();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        bytebuttonclicked = true;
        button1.Enabled = true;
    }

    private void button3_Click(object sender, EventArgs e)
    {
        normalbuttonclicked = true;
        button1.Enabled = true;
    }
}
} 
```

***所以我不明白为什么程序显示为零，我的程序有什么问题以及如何改进它？谢谢你。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:24:25.997

第一次`ReadToEnd`调用到达流的末尾，因此下一次`sr.BaseStream.Read`调用尝试在文件末尾之前读取，因此全为零。您可以：

*   `text1`如果您不关心编码期间的数据丢失，请将已读取的内容转换为字节而不是重新读取。

或者

*   通过设置流的（`File.OpenRead`操作结果）`Position`属性来重置流（不是读取器）的位置。

或者

*   重新打开流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:04:39.463

回应 ssg 的回答和 vato 的评论。

ssg 表示转换`text1`为 a`Byte[]`而不是读取文件末尾。

替换这些行：

```
byte[] Buffer = new byte[text1.Length];
sr.BaseStream.Read(Buffer, 0, text1.Length); 
```

有了这个：

```
byte[] Buffer = Encoding.UTF8.GetBytes(text1); 
```

这将创建一个包含of的`byte[]`调用。`Buffer``byte[]``text1`

`Encoding.UTF8.GetBytes(text1)`将转换`text1`为`byte[]`.

希望这可以帮助！

# android - 如何在我的应用程序中嵌入网站

> ID：10869152
> 
> 赞同：7
> 
> 时间：2012-06-03T09:18:49.930
> 
> 标签：android

我目前正在创建一个应用程序，只是现在我已经到了能够将网站嵌入到实际应用程序本身中的地步。问题是我希望能够在不离开应用程序的情况下查看网站，因此它以某种方式嵌入到应用程序中。我意识到这可能不像听起来那么容易，因为它几乎需要一个浏览器，虽然我真的不需要做任何浏览，我只需要加载网站然后显示它。这甚至可能吗（这不可能吗？）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T09:27:12.080

您将需要一个 WebView。

但这里的重点是您希望将网站嵌入到您的应用程序中。

关注 Snippet 将帮助您。

```
public class HelloWebViewActivity extends Activity {
    private WebView mWebView = null;
    private EditText mInputUrl = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mInputUrl = (EditText)findViewById(R.id.input_url);
    Button button = (Button)findViewById(R.id.button);
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.setWebViewClient(new HelloWebViewClient());
    button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
              String url = mInputUrl.getText().toString();
              mWebView.loadUrl(url);
            }
        });

}

private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
    view.loadUrl(url);
    return true;
    }
}
} 
```

`android.permission.internet`请记住在清单中包含权限。如果您不添加 http 或 https 前缀，请始终确保将 url 指定为[http://www.google.com](http://www.google.com)或[https://www.google.com](https://www.google.com) ，那么 webview 将不会显示网页。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T09:21:08.860

嗨，您可以使用 android 中的 webview 来加载网页这里是[示例](http://www.mkyong.com/android/android-webview-example/)

# xcode - 如何在 xcode 中将页面上的所有 url 添加到数组中？

> ID：10869155
> 
> 赞同：0
> 
> 时间：2012-06-03T09:19:07.883
> 
> 标签：xcode, url, hyperlink, webkit, count

我将网页（包含一些超链接）加载到 xcode 中的 webview 中，有没有办法可以计算和跟踪这些链接？

我可以将所有的超链接添加到一个数组中，让每个链接作为一个索引。或者是否已经有一个我可以访问的参数允许我通过页面上的索引导航到链接？

即，我可以说“n = 12。计算页面上的链接。导航到第 n 个链接”——例如？

非常感谢！

文斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:26:48.700

您可以通过以下方式获取 webview 页面中包含的所有 a 标签：

```
NSString *allTags = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('a');"]; 
```

但是您可能会通过 JavaScript 遍历所有链接，获取它们的 url。您可以通过以下方式获取标签数量：

```
NSString *noOfTags = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('a').length;"]; 
```

您可以通过以下方式访问标签索引：

```
int i = 0; // index of tag you want to access
NSString *aTag = [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementsByTagName('a')[%@];", i]]; 
```

最后，您可以通过以下方式将 webview 定向到某个 URL：

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:myURLString]]]; 
```

# joomla - joomla 模块中的文件上传

> ID：10869157
> 
> 赞同：6
> 
> 时间：2012-06-03T09:19:26.010
> 
> 标签：joomla, module

我已经搜索了很长时间，但找不到满足我需求的解决方案。我正在为 Joomla 2.5 开发一个模块。我需要允许用户在模块配置中从后端上传图像/任何文件类型的功能。

问题：如何在 joomla 模块中添加文件上传字段。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T09:38:58.627

只是 joomla 文档中的一个示例：

```
<?php

//Retrieve file details from uploaded file, sent from upload form
$file = JRequest::getVar('file_upload', null, 'files', 'array');

//Import filesystem libraries. Perhaps not necessary, but does not hurt
jimport('joomla.filesystem.file');

//Clean up filename to get rid of strange characters like spaces etc
$filename = JFile::makeSafe($file['name']);

//Set up the source and destination of the file
$src = $file['tmp_name'];
$dest = JPATH_COMPONENT . DS . "uploads" . DS . $filename;

//First check if the file has the right extension, we need jpg only
if ( strtolower(JFile::getExt($filename) ) == 'jpg') {
   if ( JFile::upload($src, $dest) ) {
      header("Location: http://".$_SERVER["HTTP_HOST"]."/administrator"); Redirect to a page of your choice
   } else {
     echo "error !"; //Redirect and throw an error message
   }
} else {
   echo "Wrong extension !"; //Redirect and notify user file is not right extension
}

?> 
```

有关更多详细信息和完整示例：http: [//docs.joomla.org/How_to_use_the_filesystem_package](http://docs.joomla.org/How_to_use_the_filesystem_package)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T08:52:55.700

请记住，您的 HTML 表单必须包含

`enctype="multipart/form-data"`

否则，您将无法使用 joomla 功能获得任何结果！

# installshield-le - InstallShield LE 表格，在文本/图片中换行

> ID：10869158
> 
> 赞同：0
> 
> 时间：2012-06-03T09:19:44.430
> 
> 标签：installshield-le

这是一个新手问题。我在 VS2010 上使用 InstallShield LE。我在标识符中有一个值（文本）。

文本正在一行中编辑。没有编辑框。我怎么能 /n ？我可以插入图片吗？

附上编辑区截图：

![一只忙碌的猫](../Images/9068d34ad8195d943d2b29813ca87052.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:26:06.320

Windows Installer 不支持静态文本控件中的换行符。在安装过程中，文本会根据控件和字体大小自动格式化。

如果您真的想要换行符，只需为下一行使用另一个静态文本控件。

# mysql - MySQL 到 SQL Server 2008

> ID：10869161
> 
> 赞同：0
> 
> 时间：2012-06-03T09:19:58.017
> 
> 标签：mysql, sql, sql-server, joomla

我在我的一个客户网站上使用 Joomla 1.3。现在我想使用 SQL Server 2008 将其移动到自定义 asp.net 应用程序。

处理这种迁移的最佳开源是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:43:45.870

在其他情况下，这个答案在这里得到了回答：[将一些数据从 MySQL 迁移到 MSSQL](https://stackoverflow.com/questions/8486346/migrate-some-data-from-mysql-to-mssql/8486392#8486392)

* * *

由于您已经拥有完整的 SQL 2008，请打开随 SQL 安装一起安装的 Visual Studio Intelligence BI。然后创建一个新项目“集成服务项目”。

因此，您创建一个到您的 ODBC 的新连接（应该是可用的向导）。然后添加你的表，在那里你可以修改、转换、转换数据。

您可以保存完整的项目并将其作为计划任务添加到您的 sql server 代理。

这是一个解释更多的教程：http: [//msdn.microsoft.com/en-us/library/ms169917.aspx](http://msdn.microsoft.com/en-us/library/ms169917.aspx)

* * *

# algorithm - 查找数字的任何排列是否在范围内

> ID：10869167
> 
> 赞同：3
> 
> 时间：2012-06-03T09:20:57.923
> 
> 标签：algorithm, permutation

我需要查找指定范围内是否存在数字的任何排列，我只需要返回是或否。

例如：`Number = 122`和`Range = [200, 250]`。答案是`Yes`，因为 221 存在于该范围内。

PS：

1.  对于我手头的问题，要搜索的数字只有两个不同的数字（它只包含 1 和 2，例如：1112221121）。
2.  这不是一个家庭作业问题。在采访中被问到。
3.  我建议的方法是找到给定数字的所有排列并检查。或者循环遍历范围并检查我们是否找到数字的任何排列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T09:28:21.410

检查每个排列太昂贵且不必要。

首先，您需要将它们视为字符串，而不是数字，

将每个数字位置视为一个单独的变量。

考虑每个变量可以容纳的可能数字集如何受范围限制。每个数字/变量对将是（a）始终有效（b）始终无效；(c) 其有效性有条件地取决于特定的其他变量。

现在将这些依赖关系和独立性建模为图形。由于情况 (c) 很少见，因此很容易在与 O(10N) = O(N) 成正比的时间上进行搜索

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T09:44:18.193

数字有一个很好的属性，我认为可以在这里为您提供帮助：

> 对于一个给定的值为 KXXXX 的数**a** ，其中 K 是给定的，我们可以推断出 K0000 <= a < K9999。

使用这个属性，我们可以尝试构建一个在范围内的排列：

让我们举个例子：

范围 = [200, 250]

数字 = 122

首先，我们可以定义第一个数字必须是 2。我们有两个 2，所以到目前为止我们很好。

第二个数字必须介于 0 和 5 之间。我们有两个候选者，1 和 2。仍然不错。让我们检查第一个值 1：

任何数字在这里都很好，我们仍然有一个未使用的 2。我们找到了我们的排列 (212)，因此答案是**Yes**。

如果我们确实发现了与值 1 的矛盾，我们需要回溯并尝试值 2，依此类推。

如果没有一个解决方案是有效的，则返回**No**。

该算法可以使用回溯来实现，并且应该非常有效，因为您只有 2 个值来测试每个位置。该算法的复杂度为 2^l，其中 l 是元素的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T09:39:30.387

您可以尝试实现某种二进制搜索：

如果你的号码中有 6 个 1 和 4 个 2，那么首先你有间隔

[1111112222; 2222111111]

如果您的范围不与此间隔重叠，那么您就完成了。现在把这个区间分成中间，你得到

(1111112222 + 222211111) / 2

现在找到小于分割点的由 1 和 2 组成的最大数。（可能通过基于 1 和 2 以某种有效方式直接计算拆分或将 1 和 2 解释为二进制数的 0 和 1 来改进此步骤。也可以考虑采用这两个数字的几何平均值，因为候选人可能会更均匀地分布在左右两边。）

[编辑：我想我明白了：假设边界具有 pq 和 pr 的形式（即 p 是一个公共前缀），然后从 q 和 ra 对称字符串 s 构建，字符串的开头和结尾都是 1和中间的 2 并将 ps 作为分割点（因此从 1111112222 和 1122221111 开始，您将构建 111122222211，前缀为 p=11）。]

如果此数字包含在该范围内，则您已完成。

如果不是，请查看范围是高于还是低于并使用 [old lower bound;split] 或 [split;old upper bound] 重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T09:54:11.497

假设给你的范围是：ABC 和 DEF（每个字符都是一个数字）。

```
Algorithm permutationExists(range_start, range_end, range_index, nos1, nos2)

     if (nos1>0 AND range_start[range_index] < 1 < range_end[range_index] and
          permutationExists(range_start, range_end, range_index+1, nos1-1, nos2))
               return true
     elif (nos2>0 AND range_start[range_index] < 2 < range_end[range_index] and
          permutationExists(range_start, range_end, range_index+1, nos1, nos2-1))
               return true
     else
               return false 
```

我假设每个数字都是一系列数字。给定的数字表示为`{numberOf1s, numberOf2s}`。我试图在范围内拟合数字（前 1，然后是 2），如果不是，则程序返回错误。

PS：我可能真的错了。我不知道这种事情是否可以工作。我没有考虑太多，真的..

**更新**

我表达算法的方式是错误的。有一些更改需要在其中完成。这是一个工作代码（它适用于我的大多数测试用例）：http: [//ideone.com/1aOa4](http://ideone.com/1aOa4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T15:02:35.817

你真的只需要检查最多两个可能的排列。

假设您的输入数字仅包含数字 X 和 Y，其中 X<Y。在您的示例中，X=1 和 Y=2。 *我会忽略所有你用完一个数字或另一个数字的特殊情况。*

**阶段 1：处理公共前缀。**

令 A 为范围下限中的第一个数字，令 B 为范围上限中的第一个数字。如果 A<B，那么我们完成了第 1 阶段并进入第 2 阶段。

否则，A=B。如果 X=A=B，则使用 X 作为排列的第一个数字，并在下一个数字上重复阶段 1。如果 Y=A=B，则使用 Y 作为排列的第一个数字，并在下一个数字上重复阶段 1。

如果 X 和 Y 都不等于 A 和 B，则停止。答案是不。

**第 2 阶段：使用通用前缀完成。**

此时，A<B。如果 A<X<B，则使用 X 作为排列的第一个数字，并根据需要填写剩余的数字。答案是肯定的。（同样，如果 A<Y<B。）

否则，请检查以下四种情况。最多有两种情况需要实际工作。

*   如果 A=X，则尝试使用 X 作为排列的第一个数字，然后是所有 Y，然后是其余的 X。换句话说，使排列的其余部分尽可能大。如果这个排列在范围内，那么答案是肯定的。 *如果此排列不在范围内，则任何以 X 开头的排列都不会成功。*
*   如果 B=X，则尝试使用 X 作为排列的第一个数字，然后是其余的 X，然后是所有 Y。换句话说，使排列的其余部分尽可能小。如果这个排列在范围内，那么答案是肯定的。 *如果此排列不在范围内，则任何以 X 开头的排列都不会成功。*
*   如果 A=Y 或 B=Y，则类似情况。

如果这四种情况都没有成功，那么答案是否定的。请注意，最多有一个 X 案例和最多一个 Y 案例可以匹配。

在这个解决方案中，我假设输入数字和范围内的两个数字都包含相同的位数。通过一些额外的工作，该方法可以扩展到位数不同的情况。

# c# - Visual Studio 运行时调试器已禁用

> ID：10869169
> 
> 赞同：0
> 
> 时间：2012-06-03T09:21:39.123
> 
> 标签：c#, visual-studio, debugging

我正在使用 C# Windows Forms 创建一个应用程序，一切都很好，直到今天我醒来并尝试运行它，它似乎没有调试任何东西！
好吧，它确实可以调试，但不如以前那么好。
例如，一个明显的 nullReference 异常，例如：

```
Product something = null;
MessageBox.Show(something.AllowDrop.ToString()); 
```

在 VS 中给了我类似的东西：http:
[//i.imgur.com/l12OA.png](http://i.imgur.com/l12OA.png)
而不是获得熟悉的、友好的 UI 来显示看起来像这样的异常：http:
[//i.imgur.com/VtK7n。 png](http://i.imgur.com/VtK7n.png)
VS变得奇怪了！这不是我担心的原因：另一方面，当我使用 DataReader 对象时，它会自动跳过所有错误而不会抛出一个异常！每当发生异常时，运行时工具就会停止运行代码！
这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:32:34.907

在 Vs 菜单调试/异常中，您应该“检查”（在公共语言运行时异常中）列“用户未处理”。

![在此处输入图像描述](../Images/a23bee2521fe6c4150541a236d09a514.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:43:25.547

启用**异常助手**

在VS2010里面去：

> 工具 -> 选项 -> 调试 -> 常规 -> “启用异常助手”

# jsf - 进一步继续双压

> ID：10869174
> 
> 赞同：1
> 
> 时间：2012-06-03T09:23:15.023
> 
> 标签：jsf, primefaces

在上一个[问题](https://stackoverflow.com/questions/10829690/continuation-of-pressing-button-twice)中，BalusC 给了我很好的建议，关于如何使用按钮代替命令按钮对非 ajax 导航有用。特别是它会更新 http: 位置中的目标地址，这对于用户为页面添加书签很有用。

我试图利用这些信息来发挥自己的优势，直到遇到问题。在一个按钮中，我尝试使用 result="#{backing.something}" 来发现它给了我一个空结果。这看起来像是一个时间问题，因为仅在按下按钮时才评估 action="#{}" 而结果显然需要一个固定字符串，该字符串在加载页面时被检查。

所以我回到了 ajax="false" 的 commandButton。这有一个问题，我的导航地址是我来自的页面，而不是我要导航到的页面。这是用户的错误书签。

我感谢在我的学习练习中在 stackoverflow 中获得的所有帮助。宜兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:39:51.433

`<h/p:button outcome>`不打算调用 bean 操作方法，而是直接包含结果字符串。那里的任何 EL 都会立即作为值表达式进行评估。因此，当您打开包含`<h/p:button>`.

在您的特定情况下，基本上有两种方法可以在导航上调用 bean 操作方法。如果您需要在导航发生*之前*调用它，并且不打算在最终用户每次重新打开/重新加载 GET 请求时重新调用该操作，则将其设为 POST-Redirect-GET 请求。这是`faces-redirect=true`在查询字符串语法中添加结果值的问题。

例如

```
<p:commandButton action="#{bean.submit}" ... /> 
```

和

```
public String submit() {
    // ...

    return "nextpage?faces-redirect=true";
} 
```

这样浏览器将在 POST 后重定向到目标页面，因此最终用户将看到目标 URL 反映在地址栏中。

或者，如果您需要在最终用户每次重新打开/重新加载 GET 请求时调用该操作，请`preRenderView`改为在请求/视图范围的后备 bean 的 (post) 构造函数或侦听器方法中执行该工作。

例如

```
<p:button outcome="nextpage" ... /> 
```

和

```
@ManagedBean
@RequestScoped
public class NextpageBacking {

    public NextpageBacking() {
        // In constructor.
    }

    @PostConstruct
    public void onPostConstruct() {
        // Or in postconstructor (will be invoked after construction AND injection).
    }

    public void onPreRenderView() {
        // Or before rendering the view (will be invoked after all view params are set).
    }

    // ...
} 
```

预渲染视图监听方法需要在`nextpage`

```
<f:event type="preRenderView" listener="#{nextpageBacking.onPreRenderView}" /> 
```

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)
*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)

# database - 甲骨文公共服务器

> ID：10869175
> 
> 赞同：6
> 
> 时间：2012-06-03T09:23:25.477
> 
> 标签：database, oracle

我想了解oracle，尝试oracle数据库的一些查询和其他SQL功能，但不想安装和搞乱所有相关问题。所以我的问题是 - 是否有任何公开可用的 oracle 服务器，我可以通过终端连接并使用它？

我的意思是我可以注册的服务，并且会为我的个人资料分配一些空间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T09:58:58.470

我唯一能想到的是 SQLFiddle：[http ://sqlfiddle.com/](http://sqlfiddle.com/)

但它不会让你拥有一个“私人”空间。您每次都需要重新创建架构（但您可以为脚本添加书签，这对您来说可能就足够了）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T10:07:51.097

看看： [http ://apex.oracle.com/](http://apex.oracle.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T17:25:47.770

您还可以尝试其中一种预先构建的虚拟设备 - 请参阅

```
http://www.oracle.com/technetwork/community/developer-vm/index.html 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-30T08:23:51.280

如果您需要直接访问数据库，可以在 Docker 实例中运行它：

```
docker run -d -p 1521:1521 -p 8080:8080 alexeiled/docker-oracle-xe-11g 
```

然后连接到它`sqlplus`

```
sqlplus system/oracle@localhost:1521/xe 
```

有关更多密码、有关 apex 的信息等，请参见[此处。](https://hub.docker.com/r/alexeiled/docker-oracle-xe-11g/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-14T08:52:29.470

刚刚遇到这个：[Oracle Live SQL](https://livesql.oracle.com/apex/livesql/file/index.html)。它是基于浏览器的，因此无需在本地安装。但是，您需要有一个 Oracle 帐户。

> 基于浏览器的 SQL 工作表访问 Oracle 数据库模式

# ruby-on-rails - Rails - 向组合框添加值

> ID：10869176
> 
> 赞同：0
> 
> 时间：2012-06-03T09:23:27.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个组合框，它显示了我的对象的所有值（1 到多个）。
我已经实现了一个带有 ajax 的文本字段，它使用 ajax 从数据库中检索值。
现在，想要添加一个将文本字段中的数据插入组合框的按钮。
我希望它只有在用户选择时才会保存。

我在实现仅在客户端添加数据并等待用户单击保存的添加按钮时遇到了麻烦。

有什么建议么？Rails 演员可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:53:59.227

[http://railscasts.com/episodes/102-auto-complete-association](http://railscasts.com/episodes/102-auto-complete-association)

上面的 railscast 使用自动完成功能实现了您想要的功能，请仔细观看，我希望您会很高兴。

谢谢。

# c++ - strcpy_s 用于 char** 和 char[][]

> ID：10869177
> 
> 赞同：1
> 
> 时间：2012-06-03T09:23:32.460
> 
> 标签：c++, arrays, char, strcpy

我使用`strcpy_s`如下：

```
char names[2][20];
strcpy_s(names[0],"Michael");
strcpy_s(names[1],"Danny"); 
```

它工作得很好。

但是当我更改`char **`为

```
int size1=2;
int size2=20;

char **names=new char*[size1];
for(int i=0;i<size1;i++)
  names[i]=new char[size2];
strcpy_s(names[0],"Michael");
strcpy_s(names[1],"Danny"); 
```

它给了我这个错误信息：

> 错误 C2660：“strcpy_s”：函数不接受 2 个参数

为什么会这样？我需要动态创建char数组，我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T09:28:01.117

有两种形式`strcpy_s`（至少在 Windows 上）：一种用于指针，一种用于数组。

```
errno_t strcpy_s(
   char *strDestination,
   size_t numberOfElements,
   const char *strSource 
);
template <size_t size>
errno_t strcpy_s(
   char (&strDestination)[size],
   const char *strSource 
); // C++ only 
```

使用指针时，您必须指定目标缓冲区的元素数：

```
strcpy_s(names[0], size2, "Michael");
strcpy_s(names[1], size2, "Danny"); 
```

# php - 使用PHP删除选择中的所有子级别

> ID：10869178
> 
> 赞同：3
> 
> 时间：2012-06-03T09:23:33.047
> 
> 标签：php, mysql, class, recursion, categories

**问题：**

我试图通过使用一个类来删除一个类别的所有子级别。目前我只能让它删除两个子级别，而不是三个。

**数据库表：**

```
CREATE TABLE betyg_category (
  CID int(11) NOT NULL AUTO_INCREMENT,
  Item varchar(100) NOT NULL,
  Parent int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (CID)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

**PHP 类：**

```
<?php
class ItemTree 
{ 
   var $itemlist = array();

   function ItemTree($query)
   {
      $result = mysql_query($query) or die ('Database Error (' . mysql_errno() . ') ' . mysql_error());

      while ($row = mysql_fetch_assoc($result)) 
      {
         $this->itemlist[$row['CID']] = array(
           'name'   => $row['Name'],
           'parent' => $row['Parent']
         );
      }
   }

   function get_tree($parent, $with_parent=0)
   {
      $item_tree = array();

      if ($with_parent == 1 && $parent != 0) 
      {
         $item_tree[$parent]['name'] = $this->itemlist[$parent]['name'];
         $item_tree[$parent]['parent'] = $this->itemlist[$parent]['parent'];
         $item_tree[$parent]['child'] = $this->get_tree($parent);

         return $item_tree;
      }

      foreach ($this->itemlist as $key => $val) 
      {
         if ($val['parent'] == $parent) 
         {
               $item_tree[$key]['name'] = $val['name'];
               $item_tree[$key]['parent'] = $val['parent'];
               $item_tree[$key]['child'] = $this->get_tree($key);
         }
      }

      return $item_tree;
   }

   function make_optionlist ($id, $class='', $delimiter='/')
   {
      $option_list = '';

      $item_tree = $this->get_tree(0);

      $options = $this->make_options($item_tree, '', $delimiter);

      if (!is_array($id)) 
      {
         $id = array($id);
      }

      foreach($options as $row) 
      {
         list($index, $text) = $row;
         $selected = in_array($index, $id) ? ' selected="selected"' : '';
         $option_list .= "<option value=\"$index\" class=\"$class\"$selected>$text</option>\n";
      }

      return $option_list;
   }

   function make_options ($item_tree, $before, $delimiter='/')
   {
      $before .= empty($before) ? '' : $delimiter;

      $options = array();

      foreach ($item_tree as $key => $val) 
      {
         $options[] = array($key, '-&nbsp;'.$before.$val['name']);
         if (!empty($val['child'])) {
            $options = array_merge($options, $this->make_options($val['child'], $before.$val['name'], $delimiter));
         }
      }

      return $options;
   }

   function get_navlinks ($navid, $tpl, $startlink='', $delimiter=' &raquo; ')
   {
      // $tpl typ: <a href="index.php?id={id}" class="navlink">{name}</a>

      $search = array('{id}', '{name}');

      $navlink = array();

      while (isset($this->itemlist[$navid])) 
      {
         $replace = array($navid, $this->itemlist[$navid]['name']);
         $navlink[] = str_replace($search, $replace, $tpl);
         $navid = $this->itemlist[$navid]['parent'];
      }

      if (!empty($startlink)) 
      {
         $navlink[] = str_replace($search, array(0, $startlink), $tpl);
      }

      $navlink = array_reverse($navlink);

      return implode($delimiter, $navlink);
   }

   function show_tree ($parent=0, $tpl='%s', $ul_class='', $li_class='')
   {
      $item_tree = $this->get_tree($parent);

      return $this->get_node($item_tree, $parent, $tpl, $ul_class, $li_class);
   }

   function get_node ($item_tree, $parent, $tpl, $ul_class, $li_class)
   {
      // $tpl typ: <a href="item.php?id={id}" class="treelink" style="color:blue">{name}</a>

      $search = array('{id}', '{name}'); 

      $output = "\n<ul class=\"$ul_class\">\n";

      foreach ($item_tree as $id => $item) 
      {
         $replace = array($id, $item['name']);
         $output .= "<li class=\"$li_class\">".str_replace($search, $replace, $tpl);
         $output .= !empty($item['child']) ? "<br />".$this->get_node ($item['child'], $id, $tpl, $ul_class, $li_class) : '';
         $output .= "</li>\n";
      }

      return $output . "</ul>\n"; 
   }

   function get_id_in_node ($id)
   {
      $id_list = array($id);

      if (isset($this->itemlist[$id])) 
      {
         foreach ($this->itemlist as $key => $row) 
         {
            if ($row['parent'] == $id) 
            {
               if (!empty($row['child'])) 
               {
                 $id_list = array_merge($id_list, get_id_in_node($key));
               } else 
               {
                 $id_list[] = $key;
               }
            }
         }

      }
      return $id_list;
   }

   function get_parent ($id)
   {
      return isset($this->itemlist[$id]) ? $this->itemlist[$id]['parent'] : false;
   }

   function get_item_name ($id)
   {
      return isset($this->itemlist[$id]) ? $this->itemlist[$id]['name'] : false;
   }
}
?> 
```

**设想：**

假设您在 a 中有以下结构：

*   文学
*   -- 资源整合
*   ---- 测试一

它将在数据库表中产生以下结果：

![类别](../Images/92d5d4dd16e4dac0fdbe4c34565bdd28.png)

当我尝试删除此子级别时，它将保留数据库中的最后一个子级别，而应将其删除。结果将是：

![已删除的类别](../Images/344fa5d4f597d062addf69a82914a5e4.png)

**PHP代码：**

```
//Check if delete button is set
if (isset($_POST['submit-deletecategory'])) 
{
    //Get $_POST variables for category id
    $CategoryParent = intval($_POST['CategoryList']);

    //Check if category is selected
    if ($CategoryParent != "#") 
    {
        //Get parent category and subsequent child categories
        $query = "SELECT CID, Item AS Name, Parent FROM " . TB_CATEGORY . " ORDER BY Name";
        $items = new ItemTree($query);

        if ($items->get_item_name($_POST['CategoryList']) !== false) 
        {
            //Build up erase list
            $CategoryErase = $items->get_id_in_node($CategoryParent);
            $CategoryEraseList = implode(", ", $CategoryErase);
        } 
        else 
        {
            $CategoryEraseList = 0;
        }

        //Remove categories from database
        $query = "DELETE FROM " . TB_CATEGORY . " WHERE CID IN ($CategoryEraseList)";
        $result = mysql_query($query) or die ('Database Error (' . mysql_errno() . ') ' . mysql_error());

       //Return a confirmation notice
       header("Location: settings.php");
       exit;
    }
} 
```

预先感谢您为我提供解决问题的任何指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:03:35.263

这是一种方法：使用递归函数，它将首先查找叶项（树中最深的项）。您首先删除子项，然后是父项。对于每个孩子，您首先删除孩子的孩子，等等......

```
deleteSub(1);

function deleteSub($cat_id) {
    $request = "SELECT * FROM ". TB_CATEGORY ." WHERE Parent = ".$cat_id;
    $results = mysql_query($request);
    while($child = mysql_fetch_array($results)) 
    {
        deleteSub($child["CID"]);
    }
    $request = "DELETE FROM ". TB_CATEGORY ." WHERE CID = ".$cat_id;
    return mysql_query($request);
} 
```

更好的方法是使用这种递归函数将 CID 存储在数组中，然后发出单个 DELETE 请求，但我认为您将能够调整此代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T10:10:42.190

我不会阅读或尝试理解整个代码，但在我看来，您需要某种递归函数。我基本上会做的是创建一个在层次结构中上升和下降的函数。

**注意：我已经有一段时间没有在procedural mysql中写任何东西了，所以请检查mysql_num_rows()，mysql_fetch_array等是否以正确的方式写入**

编辑：我刚刚注意到您只想向下删除，因此 zessx 的答案更有效

```
<?php
function recursiveParent($id) {
    $sql = 'SELECT parent FROM betyg_category WHERE CID=' . $id;
    $result = mysql_query($sql);

    if(mysql_num_rows($result) > 0) {
        while($r = mysql_fetch_array($result,MYSQLI_ASSOC)) {
            recursiveParent($r['parent']);
        }
    }

    $sql = 'DELETE FROM betyg_category WHERE CID=' . $id;
    mysql_query($sql);
}

function recursiveChild($parent) {
    $sql = 'SELECT CID FROM betyg_category WHERE parent=' . $parent;
    $result = mysql_query($sql);

    if(mysql_num_rows($result) > 0) {
        while($r = mysql_fetch_array($result,MYSQLI_ASSOC)) {
            recursiveChild($r['CID']);
        }
    }

    $sql = 'DELETE FROM betyg_category WHERE parent=' . $parent;
    mysql_query($sql);
}

function delete($id) {
    recursiveParent($id);
    recursiveChild($id);
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-10T03:43:47.093

这是我的做法。我不是递归运行查询，而是先获取所有孩子的 id，然后只运行查询。这里的代码是指： -

首先，将一个名为 $delete_node_list 的变量定义为数组。（存储所有需要删除的节点ID）

```
function delete_child_nodes($node_id)
{           
    $childs_node = $this->edirectory_model->get_child_nodes($node_id);

    if(!empty($childs_node))
    {
        foreach($childs_node as $node)
        {
            $this->delete_child_nodes($node['id']);
        }   
    }

    $this->delete_node_list[] = $node_id;
} 
```

在 mysql..

```
 $sql = 'DELETE FROM betyg_category WHERE CID IN '.$this->delete_node_list;
 mysql_query($sql); 
```

# asp.net-mvc - 将 json 存储在隐藏字段中以反序列化为模型属性列表

> ID：10869180
> 
> 赞同：5
> 
> 时间：2012-06-03T09:24:04.470
> 
> 标签：asp.net-mvc, json

大家早上好。我一直在思考将 plupload 与我的 mvc Web 应用程序一起使用的最佳方式，以便在后端创建时将上传的文件与其各自的记录结合起来。

我终于把它归结为以下过程 - 这将适用于新的和现有的记录（想想 CMS）：

1.  创建新记录，使用plupload上传多个文件。
2.  多个文件（代表每个文件的一系列 json 字符串）存储在客户端上，然后通过隐藏字段发回。
3.  表单模型上的一个属性保存了这些上传文件的结果，因此我可以处理后端业务。

该模型（没有无关属性的绒毛）将如下所示：

```
public class Record{
    public IList<ClientFile> Files {get;set;}
} 
```

客户端文件如下所示：

```
public class ClientFile{
    public string UniqueId{get;set;}
} 
```

我的问题在于每次成功上传后客户端上的内容（ClientFile 的 json 字符串），以及如何正确地将其放入隐藏字段并正确绑定，以便在模型中准备好客户端文件列表。

我正在考虑正确构建隐藏字段以便活页夹知道如何将它们连接到列表，或者自己进行一些自定义反序列化以将 json 字符串的集合转换为对象列表.

在我失去银行假期周末到 mvc 之前，有没有人有任何智慧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:10:33.327

这就是我现在实现它的方式：

```
public class ProductModel
{
    // This is the field bound to the view (hidden field)
    public string FilesValue
    {
        get
        {
            return Files.ToJson<IEnumerable<Plupload>>();
        }
        set
        {
            Files = value.FromJson<IEnumerable<Plupload>>();
        }
    }
    public IEnumerable<Plupload> Files { get; private set; }
} 
```

（ToJson 和 FromJson 只是我用来快速序列化和反序列化对象的扩展方法。）

在我看来：

```
<input type="hidden" name="FilesValue" id="FilesValue" /> 
```

我有一个内联脚本，可以在加载表单时转换隐藏字段的值：

```
Bundles.AddInlineScript("fileManager.dserialize('" + Html.Raw(Model.FilesValue) + "')"); 
```

在表单发布到服务器之前运行的客户端脚本：

```
function preSubmit(e) {
// need to force upload
var $form = $(e.currentTarget),
    hidden = $form.find('#FilesValue')[0];
if (uploader.files.length > 0) {
  uploader.bind('UploadComplete', function () {
    serialize(hidden);
    $form.trigger('submit');
  });
  uploader.start();
  return false;
} else {
  serialize(hidden);
  return true;
}
} 
```

nb **uploader**是对 plupload 的引用，而**serialize()**是一种本地方法，它将文件数组转换为 json 并被回发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T22:27:18.443

发布前您的客户端 html 应该是这样的：

```
<input type="hidden" name="Files[0].UniqueId" value"XX" />
<input type="hidden" name="Files[1].UniqueId" value"XX" />
<input type="hidden" name="Files[2].UniqueId" value"XX" /> 
```

假设您为每个上传的文件都有一个回调函数，其中包含一个包含 JSON 字符串的参数，您可以在上传每个文件后使用 jQuery 创建动态隐藏，如下所示：

```
....
var i = 0;
....
function(data){
     $('form').append('<input type="hidden" name="Files[' +i+'].UniqueId" value"' 
                       + data.UniqueId + '" />');
     i++;
} 
```

# c++ - 在 QItemEditorCreatorBase 中使用后取回 QWidget

> ID：10869181
> 
> 赞同：2
> 
> 时间：2012-06-03T09:24:17.277
> 
> 标签：c++, qt, qtablewidget, qtablewidgetitem

我有一个扩展的数字编辑器`QSpinBox`

```
NumericEditor::NumericEditor(QWidget *widget): QSpinBox(widget) 
```

`QVariant::Int`我使用这个编辑器来编辑类型`QTableWidget`

```
QItemEditorCreatorBase *numericEditor = new QStandardItemEditorCreator<NumericEditor>();
factory->registerEditor(QVariant::Int, numericEditor); 
```

数据正常输入表中。忽略“颜色”这个词的使用。它基于颜色编辑器示例。

```
QTableWidgetItem *nameItem2 = new QTableWidgetItem(QString("label2"));
QTableWidgetItem *colorItem2 = new QTableWidgetItem();
colorItem2->setData(Qt::DisplayRole, QVariant(int(4)));
table->setItem(1, 0, nameItem2);
table->setItem(1, 1, colorItem2); 
```

旋转框出现并在 QTableWidget 中正常工作。

我的愿望是访问表格在编辑`QVariant::Int`单元格时使用的 QSpinBox 实例，以便我可以设置最小值和最大值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:56:08.103

您可以使用 将委托安装在列上`QTableWidget::setItemDelegateForColumn`，当打开编辑器时，`createEditor`将调用其方法。

```
class MyDelegate : public QStyledItemDelegate {
public:
    QWidget *createEditor ( QWidget * parent, const QStyleOptionViewItem & option, const QModelIndex & index ) const {
        // You could create the widget from scratch or call 
        // the base function which will use the QItemEditor you already wrote
        QWidget * editor = QStyledItemDelegate::createEditor(parent, option, index);

        // do whatever you need to do with the widget
        editor->setProperty("minimum", 100);
        editor->setProperty("maximum", 100);

        return editor;
    }
}; 
```

# android - android:attr 样式是如何工作的？

> ID：10869184
> 
> 赞同：9
> 
> 时间：2012-06-03T09:24:40.630
> 
> 标签：android

我正在尝试通过布局构建 Android UI。我从以下内容开始：

```
<TextView
    android:id="@+id/..."
    android:layout_marginTop="8dip"
    android:text="..."
    style="?android:attr/listSeparatorTextViewStyle"/> 
```

这看起来不错（全部大写，较小的字体，下面的分隔条）。现在我想扩展样式，所以我将其更改为以下内容：

```
<TextView
    android:id="@+id/..."
    android:layout_marginTop="8dip"
    android:text="..."
    style="@style/section_title"/> 
```

具有以下风格：

```
<style name="section_title" parent="@android:attr/listSeparatorTextViewStyle">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
</style> 
```

这不起作用（字体是正确的，但分隔线不见了）。

怎么……那个？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-03T10:07:58.973

当您使用时：

```
style="?android:attr/listSeparatorTextViewStyle" 
```

您正在使用此属性 ( `listSeparatorTextViewStyle`) 所指向的样式。如果您查看平台`themes.xml`，您会看到实际用于此属性的样式是`Widget.TextView.ListSeparator.White`. 所以这是`style`你应该在你的自定义样式中扩展的。

不幸的是，这种风格是私有的，你不能扩展它，或者你不应该扩展它（参考，见谷歌的[这个错误报告](http://code.google.com/p/android/issues/detail?id=18659)）。您最好的选择是在您的自定义样式中复制整个样式`Widget.TextView.ListSeparator.White`（`Widget.TextView.ListSeparator`也不是公开的，因此也必须复制它）并使用它而不是从 android 平台扩展样式（请参阅链接中的[此响应](http://code.google.com/p/android/issues/detail?id=18659#c8)以上）。

# actionscript-3 - Away3D Context3D 不可用

> ID：10869186
> 
> 赞同：3
> 
> 时间：2012-06-03T09:24:48.773
> 
> 标签：actionscript-3, flash, apache-flex, flex4.6, away3d

我正在使用[Away3D](http://www.away3D.com)检查 Flash 的 3D 功能，并且我正在按照[这里](http://www.flashmagazine.com/Tutorials/detail/away3d_4_basics_-_a_simple_class_explained/)的教程进行操作。不过我遇到了一个大问题。每次我在浏览器中运行我的项目时，我都会收到此错误：

> 错误 #2044：未处理的错误事件：。text=错误 #3702：Context3D 不可用。

我看不到这个错误来自哪里，但它发生在我的构造函数结束之后和`ENTER_FRAME`处理程序开始之前。

我的代码是这样的：

```
package {
    import away3d.containers.View3D;
    import away3d.entities.Mesh;
    import away3d.materials.ColorMaterial;
    import away3d.primitives.SphereGeometry;
    import flash.display.Sprite;
    import flash.events.Event;

    [SWF(backgroundColor="#000000", frameRate="60", width="1024", height="768")]
    public class TestAway extends Sprite {
        private var view:View3D;

        public function TestAway() {
            view=new View3D();
            addChild(view);
            var sphereGeometry:SphereGeometry=new SphereGeometry(350);
            var sphereMaterial:ColorMaterial=new ColorMaterial(0xff0000);
            var mesh:Mesh=new Mesh(sphereGeometry, sphereMaterial);
            view.scene.addChild(mesh);
            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        private function onEnterFrame(event:Event):void {
            view.render();
            removeEventListener(Event.ENTER_FRAME, onEnterFrame);
        }
    }
} 
```

现在奇怪的是，当我在浏览器（FP 11.2）上运行它时，它不起作用（给出错误），但我可以完美地从桌面运行 swf。

此外，教程页面上的示例文件运行良好。缺少什么设置，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T09:39:28.593

好吧，看来您需要设置`wmode`为`direct`使用 3D API。

虽然我已经看到了这一点信息，但 html 包装器需要在 3 个地方进行修改才能在所有配置上工作：

(1) 在 javascript 中`swfObject`

```
params.wmode = "direct"; 
```

(2) 在`<object>`标签中

```
<param name="wmode" value="direct" /> 
```

(3) 在`<object>`IE 的标签中

```
 <param name="wmode" value="direct" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-09T19:12:56.080

要扩展更多有用的提示，如果您尝试在新的 NativeWindow 中打开使用 Context3D 的应用程序，您需要确保在传递到 NativeWindow 的 NativeWindowInitOptions 中指定 renderMode。创建本机窗口后，渲染模式无法更改。

```
// New window.
options = new NativeWindowInitOptions();
options.renderMode = "direct";
options.transparent = true;
options.systemChrome = NativeWindowSystemChrome.NONE;
nativeWindow = new NativeWindow( options ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T21:46:58.347

我在这里发帖希望能帮助任何有同样问题的人，但要导出到 AIR。

编辑 app descriptor.xml 并将 rendermode 的值更改为：

```
<renderMode>direct</renderMode> 
```

希望能帮助到你

# mysql - 如何获取 MySQL 中每个索引的大小

> ID：10869187
> 
> 赞同：1
> 
> 时间：2012-06-03T09:24:55.467
> 
> 标签：mysql

我正在尝试优化日常统计工作所必需的索引大小，以便我可以减少表大小并降低日常统计工作的速度作为权衡。

为此，我想获取表中每个索引的大小。

`"show table status from"`仅显示`Index_length`表中所有索引的总大小。

有没有办法检索表中每个索引的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:20:25.370

php上的例子：

```
<?php
error_reporting(E_ERROR | E_PARSE | E_COMPILE_ERROR);

$c = mysql_connect('localhost', 'user_root', 'user_root_pass');

function filesize_($size=0, $round=2){
        $type = array('bytes', 'Kb',  'Mb', 'Gb', 'Tb', 'Pb');
        for ($i=0; $size>1024; $size=$size/1024){$i++;}
        if(empty($i)){$i='0';}
        return round($size, $round).' '.$type[$i];
}

if( !$c ){
    echo 'mysql not found: '.__FILE__; exit;
}
$sum = array();
$sql = 'SHOW DATABASES';
if( $q = mysql_query('SHOW DATABASES') ){
        $a = array();
        while($r = mysql_fetch_row($q) ){
                $a[] = $r['0'];
        }
        foreach($a as $name){
                $sql = 'error select db: '.$name;
                if( @mysql_select_db($name, $c)  ){
                        $sql = 'error SHOW TABLE STATUS: '.$name;
                        if($q = mysql_query('SHOW TABLE STATUS')){
                                while($r = mysql_fetch_assoc($q) ){
                                        $sum[ $r['Engine'] ] += $r['Index_length'];
                                }
                        }else{
                                echo $sql."\n";
                        }
                }else{
                        echo $sql."\n";
                }
        }
}else{
        echo 'error:'.$sql;
}
echo 'Engine indexes sum:'."\n";
foreach($sum as $engine => $count){
        echo $engine."\t".filesize_($count)."\n";
}
echo 'thats all.'."\n"; 
```

查看结果脚本运行，例如： php this_script.php 你得到结果：

```
Engine indexes sum:
MEMORY  0 bytes
MyISAM  6.84 Gb
InnoDB  416 Kb
CSV 0 bytes
thats all. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:29:23.907

对于索引选择，您可以按照[此](http://dev.mysql.com/doc/refman/5.1/en/show-table-status.html)

所以，`SHOW TABLE STATUS [{FROM | IN} db_name] [LIKE 'pattern' | WHERE expr]`

# android - Android：许多叠加层减慢了地图移动

> ID：10869188
> 
> 赞同：0
> 
> 时间：2012-06-03T09:25:04.023
> 
> 标签：android, performance, overlay, android-mapview

我在 MapView 中添加了许多叠加层。当我移动、放大或缩小 MapView 时，叠加层会在地图响应操作之前造成明显的延迟。有什么办法可以减少这种延迟？

我看到其他人建议将所有叠加层组合成一个大叠加层来解决类似问题。如果这样的事情可行，我将如何将我的叠加层组合成一个叠加层？

我还看到，在位图上绘制覆盖中指定的所有线，然后覆盖位图可能会提高性能。如果这是最好的选择，那么我将如何实施它？

任何帮助将不胜感激。如果您需要更多信息或代码，请询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:07:04.110

> 我在 MapView 中添加了许多叠加层。当我移动、放大或缩小 MapView 时，叠加层会在地图响应操作之前造成明显的延迟。有什么办法可以减少这种延迟？

拥有更少和更简单的叠加层。使用 Traceview 准确确定问题出在哪里。如果您现有的`draw()`方法之一很慢，您需要在担心组合叠加层之前解决这个问题。如果多余的时间似乎在覆盖管理中`MapView`，那么将覆盖合并到更少的覆盖中可能会有好处。

> 我如何将我的叠加层组合成一个叠加层？

将代码重构为单个覆盖类。除此之外，我们无法帮助您，因为我们对您的叠加层一无所知，除了它们“数量众多”。

> 如果这是最好的选择，那么我将如何实施它？

创建一个[bitmap-backed`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html#Canvas%28android.graphics.Bitmap%29)，在其上绘制线条，然后在 中绘制结果`Bitmap`，`draw()`我想。

# windows - 即使 Websphere 进程被删除，如何处理端口占用？

> ID：10869192
> 
> 赞同：0
> 
> 时间：2012-06-03T09:25:40.340
> 
> 标签：windows, linux, websphere, aix

即使在 websphere 进程已停止或终止后，您是否遇到过某些 websphere 使用的端口被占用的情况？至于这样的问题，如何解决？好吧，我知道它可以在服务器重新启动后消失。但你知道，它不是最好的，我们不能经常这样做，因为它是服务器的东西。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:26:26.857

您确定是 WebSphere 持有该端口吗？如果您已停止所有 WebSphere 进程，特别是如果您已正常停止它们，我无法想象它仍然持有该端口。

[在 AIX 上，您可以使用此处描述的 netstat 和 rmsock 的组合](http://www-304.ibm.com/support/docview.wss?uid=swg21264632)来查看哪个进程正在占用端口（或者[如果您安装了 lsof，那就更容易了](http://portal2portal.blogspot.com/2011/06/aide-memoire-remembering-how-to.html)。）

# android - android.widget.LinearLayout 无法转换为 android.widget.TextView

> ID：10869197
> 
> 赞同：15
> 
> 时间：2012-06-03T09:27:15.080
> 
> 标签：android, android-layout, android-listview

我像这样添加一个`ListView`运行时：

```
 MainMenue =  getResources().getStringArray(R.array.Unit);
    // remove all controls 
    LinearLayout formLayout = (LinearLayout)findViewById(R.id.submenue);
    formLayout.removeAllViews();
    menueview = new ListView(getApplicationContext());               
    menueview.setVisibility(ListView.VISIBLE);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
               LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    params.gravity = Gravity.RIGHT;
    menueview.setLayoutParams(params);
    menueview.setAdapter(new submenueadapter(menueview.getContext(), MainMenue));
    // Set the on Item 
    SetMenueOnClick() ;
    formLayout.addView(menueview); 
```

然后我像这样添加一个项目点击监听器：

```
 public void SetMenueOnClick() {
     menueview.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
              final String text = (String) ((TextView)view).getText();
          }
     });
 } 
```

但后来我有一个错误：

```
06-03 10:59:25.862: E/AndroidRuntime(14732):    at android.view.ViewRoot.handleMessage(ViewRoot.java:2109)
android.widget.LinearLayout cannot be cast to android.widget.TextView 
```

在这一行：

```
final String text = (String) ((TextView)view).getText(); 
```

知道如何获取此问题中的文本吗？适配器如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.shortmenue, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.contents);

    textView.setText(values[position]);

    // Change icon based on name
    String s = values[position];

    System.out.println(s);

    rowView.setBackgroundResource(R.drawable.alternate_list_color);
    return rowView;
} 
```

而且`R.layout.shortmenue`很简单，只有`TextView`下面这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

                <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/contents"
                android:textSize="34dp" 

                />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-03T09:33:32.327

您的行是`TextView`由 a 包裹的，`LinearLayout`因此您可能想要这样做：

```
LinearLayout ll = (LinearLayout) view; // get the parent layout view
TextView tv = (TextView) ll.findViewById(R.id.contents); // get the child text view
final String text = tv.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-22T03:21:51.143

如果您正在运行类似的问题，但您确定您的目标是线性布局：

**删除**文件**gen/your.app.package/R.java。**

这是由于 xml 错误而发生的，当您删除 R.java 时，它将在下一次构建/运行时重新创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-12T05:54:13.510

我刚刚将 android:id="@+id/my_layout" 添加到了包装 TextView 并解决了类似问题的 LinearLayout 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-10T12:43:54.297

我遇到了同样的问题，我只是重命名了插入的视图对象。

像这样：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/newTextViewName"
    android:textSize="34dp"
/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T11:42:53.640

在我的例子中，一个 XML 包含一个 TextView，但我写错了

```
final TextView text = (TextView) inflater.inflate(R.layout.item_text, layout); 
```

代替

```
final TextView text = (TextView) inflater.inflate(R.layout.item_text, layout, false); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-08T08:54:35.250

您可以通过替换来解决此问题

```
final String text = (String) ((TextView)view).getText(); 
```

和

```
TextView temp= (TextView) view.findViewById(R.id.textView); 
```

这对我有用。

# ios - 将标准用户默认值添加到 Crittercism 错误报告元数据的简单方法？

> ID：10869200
> 
> 赞同：0
> 
> 时间：2012-06-03T09:27:35.650
> 
> 标签：ios, crittercism

我可以使用 Crittercism 方法一一添加它们

```
[Crittercism setValue:(NSString *)value forKey:(NSString *)key]; 
```

...但是在添加新设置时很脆弱并且容易出错。任何人都可以建议一种更好的方法来将整个设置字典添加到用户元数据中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:31:22.117

我们一直在考虑添加一个 API 调用，让您可以将设置字典添加到元数据，这对您有用吗？

Rob Critter 联合创始人

# jquery - 更改 img src 图像后的 jquery 未显示

> ID：10869201
> 
> 赞同：1
> 
> 时间：2012-06-03T09:27:40.650
> 
> 标签：jquery, twitter-bootstrap

我有这样的代码

```
<script type="text/javascript">
function openModal(title, id)
{
    $('#bookId').val($(this).data('id'));
    $('#modal h3').text(title);
    var d = new Date();
    $('#modal img').attr('src', '/media/upload/adv_baner/'+ id +'?'+d.getTime());
    $('#modal').modal('show');
}
</script>
<div id="modal" class="modal hide fade">
    <div class="modal-header">
        <a href="#" class="close" data-dismiss="modal">×</a>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body" style="text-align:center">
        <p>
            <ul class="thumbnails">
                <li class="span3">
                    <img src="http://placehold.it/300&text=placehold.it+rocks!" alt="">
                </li>
            </ul>
        </p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn btn-danger">Delete</a>
    </div>
</div> 
```

我想`29.jpg`在我的本地主机上传递图像的 id 它工作得很好，但是当我将文件上传到我`FTP`时它停止工作，但是当我检查源代码`src`更改为一个时，我作为函数参数传递。我已经检查了我的`chmod`，甚至全部设置在 777 上，但仍然没有显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:50:14.767

我认为这里的错误：

```
$('#modal img').attr('src', '/media/upload/adv_baner/'+ id +'?'+d.getTime()); 
```

1.  我们能知道这个文件的扩展名和图像的扩展名吗？

2.  这时候试试这个：

    ```
    $('#modal img').attr('src', 'media/upload/adv_baner/'+ id +'?'+d.getTime()); 
    ```

    或者

    ```
    $('#modal img').attr('src', '../media/upload/adv_baner/'+ id +'?'+d.getTime()); 
    ```

# python - 如何通过python中的机械化来机械化返回页面中的网址？

> ID：10869211
> 
> 赞同：0
> 
> 时间：2012-06-03T09:29:24.607
> 
> 标签：python, mechanize

我正在做一个使用 python 和 mechanize 制作基于网络的代理的项目。我有一个问题：机械化返回的页面具有未机械化的 URL，如果用户单击它，他们将通过自己计算机的 ip（而不是我的代码安装在其上的服务器）访问链接。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:45:58.443

您可以通过使用 lxml、漂亮的汤等解析 HTML 来重写 url，然后重写它们并将 DOM 重新转储为字符串，然后再将其发送给用户。或者通过使用正则表达式搜索 URL，并返回一个重写的 HTML。

请记住，使用 javascript 生成的链接等正确地进行操作几乎是不可能的。

这就是人们使用代理服务器的原因。

# asp.net - 会话固定 - 表单认证

> ID：10869216
> 
> 赞同：6
> 
> 时间：2012-06-03T09:30:04.450
> 
> 标签：asp.net, session, testing

我使用的表单身份验证是 ASP.NET。我正在为一个学校项目进行渗透测试。我正在使用 LENS -ASP.NET 穿透测试工具。结果告诉我，我的应用程序可能容易受到会话固定的影响。有谁知道如何减轻这种情况？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T10:21:30.273

会话固定是一种攻击，其中一个人固定另一个人的会话标识符 (SID)。

攻击从攻击者访问网站并建立有效会话开始，当应用程序传递包含会话 ID 的 cookie 时，攻击者已修复或锁定已知的良好会话。然后，攻击者将欺骗受害者使用此会话 ID。此时攻击者和受害者共享相同的 Session ID。现在，任何时候存储在此固定会话中的信息用于为受害者做出决定或显示只有受害者应该看到的信息，都可能被攻击者使用和查看！你可以[在这里阅读更多](http://en.wikipedia.org/wiki/Session_fixation)。

唯一的解决方法是让 ASP.NET**在任何成功的身份验证后发出一个新的会话 ID**，这样一旦受害者登录，攻击者将无法访问该会话。要记住的另一点：**在用户登录之前永远不要传递会话。**

请记住，在 ASP.net`Session.Abandon()`中不足以完成此任务，它不会从用户浏览器中删除会话 ID cookie，因此对同一应用程序的任何新请求，在会话被放弃后，将使用相同的会话 ID 和新的会话状态实例！[正如微软在这里所说](http://support.microsoft.com/kb/899918)。您需要放弃会话**并**清除会话 ID cookie：

```
Session.Abandon();
Response.Cookies.Add(new HttpCookie("ASP.NET_SessionId", "")); 
```

在您的`web.config`文件中更改表单身份验证 cookie 名称也是一个好习惯：

```
<authentication mode="Forms">
  <forms name=".CookieName" loginUrl="LoginPage.aspx" />
</authentication> 
```

这是一篇关于[会话攻击和 ASP.NET](http://software-security.sans.org/blog/2009/06/24/session-attacks-and-aspnet-part-2)以及如何解决它的好文章。

# c# - 如何将字符串从 Windows Phone 应用程序传递到 Windows Phone 运行时（winPRT）

> ID：10869217
> 
> 赞同：0
> 
> 时间：2012-06-03T09:30:10.673
> 
> 标签：c#, string, runtime, windows-phone

因为我不能直接将字符串类型数据从托管代码传递到运行时端作为字符串^。如果我发送一个字符串，我应该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:05:24.493

无法通过 WP7 中的 pInvoke ...

# c++ - 在 C++ 中定义构造函数的更好方法是什么？初始化列表还是在 Ctor Body 中初始化？

> ID：10869220
> 
> 赞同：0
> 
> 时间：2012-06-03T09:31:00.070
> 
> 标签：c++, constructor, copy-constructor

> **可能重复：**
> [在构造函数中初始化，最佳实践？](https://stackoverflow.com/questions/702185/initializing-in-constructors-best-practice)
> [使用初始化列表的好处？](https://stackoverflow.com/questions/4289899/advantages-of-using-initializer-list)

我有以下两种方法来定义 Point Class 中的构造函数：

```
class Point
{
public : 
    Point(double X,double Y):x(X),y(Y){}

Private : 
double x,y;

} 
```

其他方式 ：

```
class Point
{
public : 
 Point(double X,double Y)
{    
   x= X;
   y = Y;

}

Private : 
double x,y;

} 
```

我想知道哪个更好，为什么？在第一种情况下是否使用了copy ctor？每个人都首选哪里？有人可以用例子解释一下吗？Rgds，软软的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T09:32:02.950

尽可能使用初始化列表。尽管在这种特殊情况下没有区别，但您会养成习惯。

对于 POD 类型，成员不会被初始化两次，因此在性能方面是一样的。非 POD 类型在进入构造函数主体之前被初始化，因此如果您不在初始化列表中而是在 c-tor 主体中进行初始化，它们将被初始化两次。

`const`成员和引用*必须*在初始化列表中初始化。同样，不适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:35:01.763

第二个版本对数据成员进行*赋值*，而第一个版本将它们初始化为给定的值。这里首选第一个版本。尽管在双精度的情况下可能没有什么不同，但完全没有理由更喜欢执行额外操作的构造。如果您的数据成员不是双精度数，而是构建成本高昂的类型，那么您将付出默认构造它们的代价，然后为它们分配一个值。

例子：

```
struct ExpensiveToConstruct { .... };

struct Foo {
  Foo() {
    // here, x has already been default constructed
    x = SomeValue; // this is an assignment to the already constructed x.
  }
  ExpensiveToConstruct x;
};

struct Bar {
  Bar : x(SomeValue) {
    // only the constructor has been called. No assignemt.
  }
  ExpensiveToConstruct x;
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-03T09:36:51.490

最好在你的ctor中使用初始化列表。会更有效率。在您的第二种方式中，ctor 将使用默认值 1st 初始化成员数据两次，然后在 ctor 中调用语句。

还有更多，对于 const 或引用成员，应该由 init 列表初始化，不能在 ctor 中初始化。

# git - 使用 Git（或任何 VCS）的 Go 项目的正确组织是什么？

> ID：10869231
> 
> 赞同：11
> 
> 时间：2012-06-03T09:33:59.830
> 
> 标签：git, go

我的 GOPATH 是`/Users/joe/go`. 我正在开发一个名为 的项目`myproj`，这是一个名为`myproj`.

如果我想能够写，`import "myproj"`那么我需要的目录结构是：

```
$GOPATH/src/myproj/myproj.go
$GOPATH/src/myproj/myproj_test.go
... 
```

但是，我似乎无法使其适合 Git。如果我查看[来自 Google 的示例包，](http://code.google.com/p/go/source/browse/?repo=example)我会看到以下格式：

```
go.example/hello/hello.go
go.example/LICENSE 
```

`go.example`回购的名称在哪里。

所以实际的包目录可以*在*存储库中找到。如果我将此存储库的内容放在我的 $GOPATH 上的目录中，例如

```
$GOPATH/src/go.example/hello/hello.go
$GOPATH/src/go.example/LICENSE 
```

那么我将不得不输入`import "go.example/hello"`而不是`import "hello"`.

回到我的项目，我需要将它打包到 Git 存储库中，然后我需要一个容器目录。所以我目前的文件结构是：

```
$GOPATH/src/myproj                        # The dir for the git repo
$GOPATH/src/myproj/.git
$GOPATH/src/myproj/LICENSE                # Files in the base of the repo
$GOPATH/src/myproj/myproj/myproj.go       # Package files in package dir
$GOPATH/src/myproj/myproj/myproj_test.go 
```

我需要外部`myproj`目录来绑定 git 存储库，我需要内部目录作为包目录。结果是我需要输入`import "myproj/myproj"`而不是`import "myproj"`.

我该如何解决？我是否必须为我正在开发的每个项目添加多个 $GOPATHS？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T16:18:37.210

首先：

> 我是否必须为`$GOPATH`我正在开发的每个项目添加多个 s？

**不，你根本不需要多个`$GOPATH`s 。**

它们是管理您（可能是多个）项目的工具。当您设置一个新的项目环境时，您已经知道它会有一些依赖项——可能是该项目独有的，或者应该与其他人的设置类似，您创建一个新的项目文件夹并将其设置为`GOPATH`. 这样，您还可以为该项目使用（=检出）特定版本的库，同时为其他项目文件夹（= `GOPATH`s）中的其他项目使用其他版本。

至于您的路径问题：Go 遵循`author/project`（或`organization/project`）的通用范式。当多个人、作者和组织以相同的名称启动项目时，这将防止命名冲突。（然后作者可以使用“his”文件夹中的子文件夹、子项目以及ofc。）

如果您知道这一点并且*仍然*只想`myproj`用作您的包路径，**那么在该文件夹中创建 git 存储库没有问题**- 与您链接到的示例包相反。

> 回到我的项目，我需要将它打包到 Git 存储库中，然后我需要一个容器目录。

那是什么让你这么认为呢？Go 不需要它。Git 两者都不做。

所以以下将起作用：

```
/src/myproj/.git
/src/myproj/myproj.go 
```

虽然这不是鼓励的做法，**但您可以将存储库放入您的`myproj`文件夹**中。

* * *

我对此进行了如下测试：

```
FOLDER
FOLDER/src
FOLDER/src/myproj
FOLDER/src/myproj/myproj.go
FOLDER/src/mainproj
FOLDER/src/mainproj/main.go 
```

和`folder/src/myproj/myproj.go`

```
package myproj

type My struct {
    I int
} 
```

和`folder/src/mainproj/main.go`

```
package main

import (
    "fmt"
    "myproj"
)

func main() {
    my := myproj.My{7}
    fmt.Printf("Works! %v", my.I)
} 
```

跑步

```
cd FOLDER
set GOPATH=FOLDER
go run src/mainproj/main.go 
```

将输出：

```
Works! 7 
```

现在，如果您`git init`在文件夹`FOLDER/src/myproj`中，那么 Go 本身就无关紧要了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T10:12:39.537

通常的设置是这样的：

$GOPATH，第一个近似值只需要一个路径，您的示例`/Users/joe/go/`就可以了。现在您有一个 github 存储库`myproj`，位于`http://github.com/joe/myproj`. 这个包的导入语句应该是

```
import "github.com/joe/myproj" 
```

回顾您的（单值）$GOPATH，go 工具将在`$GOPATH/src/github.com/joe/myproj`您的“外部”github 存储库的“本地”根目录中查找您的包，其中包含 myproj.go、etc.go、... 文件。

如果没有这些约定，Jack（以及 Alice 和 Bob 的）项目会发生命名空间冲突，不小心调用了 also `myproj`，所以我建议从一开始就习惯这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:19:30.413

您自然会导入多个包：

*   标准的
*   一些您将使用的下载`go get`
*   你的项目中有几个
*   其他项目中的一些

最简单的方法是选择一个存放`go get`所有外部包（例如 mysql 驱动程序）的目录，然后将项目目录添加到 GOPATH。

例如，这是我的（简化的） GOPATH ：

```
export GOPATH=/home/dys/dev/go:/home/dys/dev/Chrall/go:/home/dys/dev/braldop/go:/home/dys/dev/lg/go 
```

`go get`我把使用in`/home/dys/dev/go`和 Chrall、braldop 和 lg获得的所有外部库都放在了我的 3 个项目中。

在这 3 个项目中的每一个项目中，我都有包和命令。例如 ：

```
/home/dys/dev/lg/go/src/pkg1/xxx.go
/home/dys/dev/lg/go/src/pkg2/xxx.go
/home/dys/dev/lg/go/src/prog1/xxx.go 
```

等等

所有的包都是通过 GOPATH 找到的。

例如，当我在其中一个 xxx.go 中使用驱动程序 mysql 时：

```
import (
"database/sql"
_ "github.com/ziutek/mymysql/godrv"
) 
```

驱动程序已安装在 /home/dys/dev/go 使用

```
go get github.com/ziutek/mymysql/godrv 
```

**参考： http:** [//golang.org/doc/code.html](http://golang.org/doc/code.html)

> GOPATH=/home/user/ext:/home/user/mygo
> 
> （在 Windows 系统上，使用分号而不是冒号作为路径分隔符。）
> 
> 列表中的每个路径（在本例中为 /home/user/ext 或 /home/user/mygo）指定工作空间的位置。工作区包含 Go 源文件及其关联的包对象，以及命令可执行文件。

# xcode - 在 osx lion 上使用端口安装 php-module

> ID：10869234
> 
> 赞同：0
> 
> 时间：2012-06-03T09:34:32.393
> 
> 标签：xcode, macos, osx-lion, port, php-extension

我正在尝试`php5-intl`在我的 osx lion 上安装。

我也安装了 Xcode。

当我运行命令安装模块时，我收到以下消息。

```
> sudo port install php5-intl
--->  Computing dependencies for php5-intl
--->  Cleaning php5-intl

> locate *intl*|grep so\$
/opt/local/lib/php/extensions/no-debug-non-zts-20090626/intl.so

> sudo apachectl restart 
```

我的问题是：

php5-intl 模块是否已安装并准备好在我的 apache 中使用？

PS：
如果我查看我的 phpinfo()，我看不到任何对 php-intl 的引用。正常吗？

* * *

如果我跑

```
> php -m | grep intl
PHP Warning:  Module 'intl' already loaded in Unknown on line 0
intl 
```

然后如果我尝试在 Synfony2 中使用它，我会收到以下错误：

```
The Symfony\Component\Locale\Stub\StubLocale::getDisplayLanguage() is not implemented. 
Please install the 'intl' extension for full localisation capabilities 
```

如果我查看我的 phpinfo，没有 php5-intl 的踪迹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:44:06.283

`phpinfo()`如果它没有在（或在命令行）中列出，`php -m`那么不，该模块未启用。

如果我是你，我会首先在命令行上使用它，因为如果我没记错的话，Port 使用它自己的 PHP 版本（和 Apache？），这可能会导致混淆。

您需要`extension=php5-intl.so`在您的 php.ini 文件中启用该模块，添加后`php -m`应该包含`intl`，并且您知道该扩展正在命令行上运行。

**编辑：**

```
PHP Warning:  Module 'intl' already loaded in Unknown on line 0 
```

听起来您可能两次启用了该模块，但我认为这不一定是您的问题。

尝试运行一个简单的命令行脚本来调用一个`intl`函数，在我看来它是为命令行启用的，但不是为 apache 启用的。

# wsdl - 肥皂 wsdl 连接被拒绝错误 (111)

> ID：10869237
> 
> 赞同：0
> 
> 时间：2012-06-03T09:35:24.850
> 
> 标签：wsdl, connection, nusoap, sugarcrm

尝试为 Sugarcrm 6.4.3 连接 nusoap api 时出现此错误

```
wsdl error: Getting http://url:8080/soap.php?wsdl - HTTP ERROR: 
Couldn't open socket, connection to server http://url:8080/soap.php?wsdl, Error (111): Connection refused 
```

那么我需要做一些设置才能打开套接字以成功连接吗？

提前致谢。

# ios - 非指针类型的 C++ 向量会导致 iOS 中的内存泄漏吗？

> ID：10869238
> 
> 赞同：0
> 
> 时间：2012-06-03T09:35:40.467
> 
> 标签：ios, memory-leaks, objective-c++, stdvector

这是代码：

```
@interface myClass {
  std::vector<float> myVector 
}
@end 
```

根据仪器，它正在泄漏。这是堆栈跟踪：

```
1 libstdc++.6.dylib operator new(unsigned long)  
2 __gnu_cxx::new_allocator<float>::allocate(unsigned long, void const*)  
3 std::_Vector_base<float, std::allocator<float> >::_M_allocate(unsigned long) 
```

我猜我应该在堆上分配向量，但我仍然不明白为什么会发生这种情况。也有可能我没有正确地释放类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T09:40:19.170

检查是否调用了您班级的 dealloc。在这种情况下，这似乎是一种可以调用泄漏的方法。只有一个问题：为什么不使用本机 Objective-C 容器？您需要将浮点数存储在 NSNumbers 中，但您将能够为所有实例使用标准的保留/释放内存管理模型。

# c - 调用 CreateWindowEx 函数时访问冲突错误

> ID：10869240
> 
> 赞同：1
> 
> 时间：2012-06-03T09:35:46.240
> 
> 标签：c, windows, winapi, visual-c++

我想使用 winAPI 创建一个窗口：

```
 int WINAPI WinMain(HINSTANCE hInst,HINSTANCE hPrevInst,LPSTR lpCmdLine,
        int nShowCmd)
 {
WNDCLASSEX wClass;
HWND hWnd;

wClass.cbClsExtra=NULL;
wClass.cbSize=sizeof(WNDCLASSEX);
wClass.cbWndExtra=NULL;
wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
wClass.hIcon=NULL;
wClass.hIconSm=NULL;
wClass.hInstance=hInst;
wClass.lpfnWndProc=(WNDPROC)WinProc;
wClass.lpszClassName=TEXT("Window Class");
wClass.lpszMenuName=NULL;
wClass.style=CS_HREDRAW|CS_VREDRAW|CS_DROPSHADOW ;

if(!RegisterClassEx(&wClass))
{
    int nResult=GetLastError();
    MessageBox(NULL,
        TEXT("Window class creation failed"),
        TEXT("Window Class Failed"),
        MB_ICONERROR);
}

hWnd=CreateWindowEx(NULL,
        TEXT("Window Class"),
        TEXT("My Process Explorer"),
        WS_OVERLAPPEDWINDOW,
        200,
        20,
        800,
        630,
        NULL,
        NULL,
        hInst,
        NULL);
  } 
```

但我收到访问冲突错误。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T11:35:18.843

Tenfour 已经在评论中指出了这一点，但它需要再重复大约 6 或 8 次：**永远不要将指向您的窗口过程函数的指针转换为`WNDPROC`**. 事实上，除非您*确切知道为什么*需要施放，否则不要施放*任何东西。*您对他的评论询问您为什么要选角的回答是：

 *> 因为没有收到警告！

事实上，这正是问题所在！演员所做的只是告诉编译器“闭嘴，我知道我在做什么！” 您不再收到警告，因为您按下了“覆盖”按钮。但这些警告的存在是有原因的——它们试图告诉你你的代码被破坏了。编译器可以帮助您。忽略它，或者更糟糕的是，翻转覆盖位并告诉它闭嘴，你不会走得太远。正如多产的 Win32 博主 Raymond Chen 所说，[函数指针转换是一个等待发生的错误](http://blogs.msdn.com/b/oldnewthing/archive/2011/05/06/10161590.aspx)。（这是一个常见的错误，他也在[这里](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/15/58973.aspx)和[这里写过](http://blogs.msdn.com/b/oldnewthing/archive/2009/10/23/9911891.aspx)。）

人们被迫强制转换函数指针的最常见原因是编译器试图警告他们他们的函数签名不正确。窗口过程函数的正确签名记录[在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633573.aspx)，如下所示：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam); 
```

当然，您可以将函数*命名*为您选择的任何名称。但是参数的数量、它们的类型和返回值都需要与该签名相匹配。

如果他们不这样做，编译器将发出错误。如果您翻转覆盖位并抛弃错误，那么代码将在运行时失败，这正是您现在遇到的症状。该`CreateWindowEx`函数说“嘿，哇，我不认识你试图通过我的那个窗口过程！”

**当我编写一个有效的窗口过程存根，删除虚假转换，然后运行您的代码时，它可以正常工作，没有错误。**例如：

```
LRESULT CALLBACK WinProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    return DefWindowProc(hWnd, message, wParam, lParam);
}

int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst,
                   LPSTR lpCmdLine, int nShowCmd)
{
    WNDCLASSEX wClass;
    HWND hWnd;

    wClass.cbClsExtra=NULL;
    wClass.cbSize=sizeof(WNDCLASSEX);
    wClass.cbWndExtra=NULL;
    wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
    wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wClass.hIcon=NULL;
    wClass.hIconSm=NULL;
    wClass.hInstance=hInst;
    wClass.lpfnWndProc=WinProc;
    wClass.lpszClassName=TEXT("Window Class");
    wClass.lpszMenuName=NULL;
    wClass.style=CS_HREDRAW|CS_VREDRAW|CS_DROPSHADOW ;

    if(!RegisterClassEx(&wClass))
    {
        int nResult=GetLastError();
        MessageBox(NULL,
            TEXT("Window class creation failed"),
            TEXT("Window Class Failed"),
            MB_ICONERROR);
    }

    hWnd=CreateWindowEx(NULL,
            TEXT("Window Class"),
            TEXT("My Process Explorer"),
            WS_OVERLAPPEDWINDOW | WS_VISIBLE,
            200,
            20,
            800,
            630,
            NULL,
            NULL,
            hInst,
            NULL);
} 
```

但是，还有几点需要注意：

*   您正在使用 ANSI 入口点，`WinMain`自 2012 年以来这是不正确的，您绝对应该为 Unicode 编译。您已经在使用`TEXT()`宏来确保您的字符串文字在`UNICODE`定义时是宽字符串，但是您需要对入口点函数执行相同的操作。将定义更改为：

    ```
     int WINAPI _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
                          LPTSTR lpCmdLine, int nCmdShow); 
    ```

*   您正在正确检查`RegisterClassEx`函数的返回值，如果失败，则调用`GetLastError`作为调试帮助。你应该对`CreateWindowEx`函数做同样的事情。[该函数的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680.aspx)确实表明它设置了最后一个错误：

    > 如果函数失败，则返回值为`NULL`。要获取扩展的错误信息，请调用`GetLastError`。

    因此，您可以将代码更改为：

    ```
    hWnd=CreateWindowEx(NULL,
            TEXT("Window Class"),
            TEXT("My Process Explorer"),
            WS_OVERLAPPEDWINDOW,
            200,
            20,
            800,
            630,
            NULL,
            NULL,
            hInst,
            NULL);
    if (!hWnd)
    {
       int nResult = GetLastError();
       MessageBox(NULL,
            TEXT("Window creation failed"),
            TEXT("Window Failed"),
            MB_ICONERROR);
    } 
    ```*

# java - 让线程等待

> ID：10869242
> 
> 赞同：0
> 
> 时间：2012-06-03T09:36:12.647
> 
> 标签：java, multithreading

请告诉我如何让线程等待。例如，等待如果`i == 0`，然后再去`i == 1`

```
public class Main {

    public Main() { 
    }

    public void method() {

            Thread thread = new Thread(new Task());
            // I want to make wait it when I want
            // for example wait if i == 0 and go again when i = 1
    }

    public static void main(String[] args) {
            new Main();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:34:55.863

这适用于[CountDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html "倒计时锁存器")。

```
 public static void main( String[] args ) throws Exception {
    final CountDownLatch latch = new CountDownLatch( 1 );
    System.out.println( "Starting main thread" );
    new Thread( new Runnable() {
        public void run() {
            System.out.println( "Starting second thread" );
            System.out.println( "Waiting in second thread" );
            try {
                latch.await();
            } catch ( InterruptedException e ) {
                e.printStackTrace();
            }
            System.out.println( "Stopping second thread" );
        }
    } ).start();

    Thread.sleep( 5000 );
    System.out.println( "Countdown in main thread" );
    latch.countDown();

    Thread.sleep( 1000 );
    System.out.println( "Stopping main thread" );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T09:38:37.483

你也许可以用[信号量来做到这一点](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T10:15:17.547

使用这样的标志不一定是最好的方法，但要回答你的具体问题：你可以让你的 int `volatile`。请参阅下面的一个简单示例，您可以按原样运行 - 这对于`i`它`volatile`的工作至关重要。

输出是（由于线程交错，它可能与运行不同）：

```
i=1
I'm doing something
I'm doing something
i=0
I'm waiting
I'm waiting
i=1
I'm doing something
I'm doing something
I'm doing something
i=0
I'm waiting
I'm waiting
interrupting
I was interrupted: bye bye 
```

* * *

```
public class TestThread {

    private static volatile int i = 0;

    public static void main(String[] args) throws InterruptedException {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                try {
                    while (true) {
                        while (i == 1) {
                            System.out.println("I'm doing something");
                            Thread.sleep(5);
                        }

                        while (i == 0) {
                            System.out.println("I'm waiting");
                            Thread.sleep(5);
                        }

                    }
                } catch (InterruptedException ex) {
                    System.out.println("I was interrupted: bye bye");
                    return;
                }
            }
        };

        Thread t = new Thread(r);
        t.start();

        i = 1;
        System.out.println("i=1");
        Thread.sleep(10);
        i = 0;
        System.out.println("i=0");
        Thread.sleep(10);
        i = 1;
        System.out.println("i=1");

        Thread.sleep(10);
        i = 0;
        System.out.println("i=0");
        Thread.sleep(10);
        t.interrupt();
        System.out.println("interrupting");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T12:23:29.137

为避免主动等待，请尝试使用`wait()`and`notify()`或`notifyAll()`方法。*Wait()*可以使线程停止，直到有人在与*wait* ()相同的对象上调用*notify()*或*notifyAll(* )。条件之一是**线程必须拥有**将调用*wait()*、*notify()*或*notifyAll()*的对象的监视器。

 *****这是一个例子

```
import java.util.concurrent.TimeUnit;

public class StartPauseDemo extends Thread {
    volatile int i = 1;

    public void pause() {
        i = 0;
    }

    public synchronized void unPause() {
        i = 1;
        notify();// wake up thread
    }

    @Override
    public void run() {
        while (i==1) {
            // logic of method for example printing time every 200 miliseconds
            System.out.println(System.currentTimeMillis());
            try {
                TimeUnit.MILLISECONDS.sleep(200);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            if (i==0) {
                synchronized (this) {// thread must possess monitor of object on
                                        // which will be called wait() method,
                                        // in our case current thread object
                    try {
                        wait();// wait until someone calls notify() or notifyAll
                                // on this thred object
                                // (in our case it is done in unPause() method)
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }
    }

    // test - pausing and unpausing every 1 sec
    public static void main(String[] args) throws InterruptedException {
        StartPauseDemo sp = new StartPauseDemo();
        sp.start();// start thread
        while (true) {
            System.out.println("pausing");
            sp.pause();
            TimeUnit.SECONDS.sleep(1);

            System.out.println("unpausing");
            sp.unPause();
            TimeUnit.SECONDS.sleep(1);
        }
    }
} 
```

输出：

```
pausing
unpausing
1338726153307
1338726153507
1338726153709
1338726153909
1338726154109
pausing
unpausing
1338726155307
1338726155507
... and so on 
```*****

# html - 响应式设计 - 2 列到 1 列

> ID：10869246
> 
> 赞同：3
> 
> 时间：2012-06-03T09:36:38.180
> 
> 标签：html, css, responsive-design

我有 2 个 div 向左浮动，因此它们将显示为内联

```
<div class==".container" style="width: 100%">
    <div class="leftColumn" style="width: 50%; float:left">
        test
    </div>

    <div class="rightColumn" style="width: 50%; float:left">
        test
    </div>
</div> 
```

当屏幕低于 400 像素时，我希望 div 显示在彼此下方我当前的媒体查询

```
@media(max-width: 400)
{
    .leftColumn{background-color: Red; float: none}
    .rightColumn{background-color: Blue; float: right} 
} 
```

感谢任何能提供帮助的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T22:38:59.660

您可以通过以下方式获得相同的效果

```
@media(max-width: 400) {
   .leftColumn, .rightColumn{width:100%;} 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:50:30.717

弄清楚了。

我在 div 上有内联样式

```
<div class="leftColumn" style="width: 50%; float:left">
    test
</div> 
```

当我删除它时，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:29:30.823

是的，内联样式把它搞砸了，而且你没有 100% 正确地定义你的媒体查询，需要 px：

[http://jsfiddle.net/XmqNy/](http://jsfiddle.net/XmqNy/)

# java - 使用触摸输入移动相机 Cocos2D android

> ID：10869252
> 
> 赞同：2
> 
> 时间：2012-06-03T09:37:37.170
> 
> 标签：java, android, cocos2d-android

我正在尝试为通过在触摸屏上拖动以将相机拖过来移动的 android 应用程序制作相机。我正在使用 Cocos2D 引擎进行开发。

问题是，每当您在屏幕上移动手指时，屏幕上的所有内容都会消失而不是移动。

我的代码在下面，我希望有人可以帮助我:) 感谢您的宝贵时间。

```
@Override
public boolean ccTouchesMoved(MotionEvent event)
        {
            CGPoint location = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));
            CGPoint movement = CGPoint.ccpSub(location, previousLocation);
            previousLocation = location;
            //Update the camera
            float[] x = new float[1];
            float[] y = new float[1];
            float[] z = new float[1];
            this.getCamera().getCenter(x, y, z);
            CameraPos.x = x[0];
            CameraPos.y = y[0];
            this.getCamera().getEye(x, y, z);
            movement.x = 2 * movement.x * (1 + (z[0]/832));
            movement.y = 2 * movement.y * (1 + (z[0]/832));
            CameraPos.x = CameraPos.x - Math.round(movement.x);
            CameraPos.y = CameraPos.y - Math.round(movement.y);
            this.getCamera().setCenter(CameraPos.x, CameraPos.y, 0);
            this.getCamera().setEye(CameraPos.x, CameraPos.y, z[0]);
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:30:01.640

没关系，我让它工作了。

对于任何想知道这一点的人，我创建了一个名为 CameraControls 的类来控制相机的基本功能。它还没有完成（我可能会在进行缩放功能等更改时更新代码）但是这个允许我完美地跟踪触摸输入。

```
import org.cocos2d.nodes.CCDirector;
import org.cocos2d.types.CGPoint;
import org.cocos2d.types.CGSize;

public class CameraControls {

CGSize winSize = CCDirector.sharedDirector().displaySize();
CGPoint CameraPos = CGPoint.ccp(winSize.width, winSize.height);
CGPoint previousLocation;
double minX;
double maxX;
double minY;
double maxY;

public CameraControls(World world)
{
    this.loadCamera(world);
}

public void setCameraLimit(float minX, float maxX, float minY, float maxY)
{
    this.minX = minX;
    this.maxX = maxX;
    this.minY = minY;
    this.maxY = maxY;
}

public void loadCamera(World world)
{
    float[] x = new float[1];
    float[] y = new float[1];
    float[] z = new float[1];
    world.getCamera().getCenter(x, y, z);
    CameraPos.x = x[0];
    CameraPos.y = y[0]; 
}

public void trackTouchMovement(CGPoint location, World world)
{
    if(previousLocation == null)
    {
        previousLocation = location;
    }
    CGPoint movement = CGPoint.ccpSub(previousLocation, location);
    previousLocation = location;
    float[] x1 = new float[1];
    float[] y1 = new float[1];
    float[] z1 = new float[1];
    world.getCamera().getEye(x1, y1, z1);
    CameraPos.x = CameraPos.x + movement.x;
    CameraPos.y = CameraPos.y + movement.y;

    try
    {
        if(CameraPos.x >= maxX || CameraPos.x <= minX || CameraPos.y >=  maxY || CameraPos.y <= minY)
        {
            CameraPos = CGPoint.ccpSub(CameraPos, movement);
        }
    }
    catch (NullPointerException e)
    {
        System.out.println("Invalid values for camera Limits. No Limits applied.");
    }

    world.getCamera().setCenter(CameraPos.x, CameraPos.y, 0);
    world.getCamera().setEye(CameraPos.x, CameraPos.y, z1[0]);
}

public void storePositionAsPrevious(CGPoint pos)
{
    previousLocation = pos;
}

public void resetPrevious()
{
    previousLocation = null;
}
} 
```

现在我有了一个类，我只需在我的类中创建一个 CameraControls 实例，然后进行必要的配置。

```
CameraControls camera = new CameraControls(this); 
```

在这种情况下，我希望我的相机可以查看的总面积是相机宽度的 3 倍，相机高度的 3 倍，所以我将相机的限制设置为相机的负宽度，宽度相机的高度，相机的负高度和相机的高度，因为相机从 (0, 0) 开始。

```
 camera.setCameraLimit(-winSize.width, winSize.width, -winSize.height, winSize.height); 
```

最后，我只是在 ccTouchesBegan、ccTouchesMoved 和 ccTouchesEnded 中添加必要的方法调用

```
@Override
public boolean ccTouchesMoved(MotionEvent event)
        {
            CGPoint location = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));
            camera.trackTouchMovement(location, this);
            return true;
        }
@Override
public boolean ccTouchesEnded(MotionEvent event)
{
            camera.resetPrevious();
            return true;
}
@Override
public boolean ccTouchesBegan(MotionEvent event)
{
            CGPoint location = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));
            camera.storePositionAsPrevious(location);
            return true;
} 
```

# jquery - Jquery动画样式？

> ID：10869253
> 
> 赞同：1
> 
> 时间：2012-06-03T09:38:04.017
> 
> 标签：jquery, css, jquery-animate

我对 JQuery 还是很陌生。我似乎无法使以下代码正常工作。

```
$('.announcement_panel_button').click(function(e){
    $('#site_logo').animate(function(){
        $(this).css('margin-top', '5px')
    }, 5000);
    e.preventDefault();
}); 
```

或者，如果有其他方法可以重写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:41:44.427

你的`animate`函数语法不对，试试

```
$('.announcement_panel_button').click(function(e){
    $('#site_logo').animate({'margin-top':'5px'},5000);
    e.preventDefault();
}); 
```

[工作小提琴](http://jsfiddle.net/joycse06/g49UL/)

检查[$.animate的语法](http://api.jquery.com/animate/)

正如@Tats_innit 在他的回答中解释的那样，`e.preventDefault();`如果它是一个简单的按钮，则可能没有必要。当您想阻止默认操作（如`clicking <a> tags takes you to new url`或）时需要它`form submit`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T09:50:53.230

嗨**演示** [http://jsfiddle.net/PCk7E/1/](http://jsfiddle.net/PCk7E/1/) **或** [http://jsfiddle.net/PCk7E/](http://jsfiddle.net/PCk7E/) http://jsfiddle.net/PCk7E/1/show/

`click me`图片下方有一个按钮。

我做了一个小改动。休息一下，您也可以看到上面的帖子以获取示例演示。

API 的好读物：

1) [http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

2) [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

我会建议阅读两者。

`preventDefault:`如果调用该方法，则不会触发事件的默认动作。即单击的锚点不会将浏览器带到新的 URL。我们可以使用 event.isDefaultPrevented() 来确定该方法是否已被由该事件触发的事件处理程序调用。

**代码**

```
 $('.announcement_panel_button').click(function() {
    $('#site_logo').animate({
        'margin-top': +50
    }, 500);
    // e.preventDefault();
});​ 
```

# objective-c - Cocoa base64 解码。和 NSString initWithData:encoding: return nil

> ID：10869255
> 
> 赞同：1
> 
> 时间：2012-06-03T09:38:19.140
> 
> 标签：objective-c, cocoa, encoding, base64, mime-types

我有 MIME 标头：

```
Subject: =?ISO-2022-JP?B?GyRCJzEnYidWJ1UnWSdRJ1wnURsoQg==?=
=?ISO-2022-JP?B?GyRCJ1kbKEIgGyRCLWIbKEIxNzUzNTk=?=
=?ISO-2022-JP?B?IBskQidjGyhCIBskQidjJ1EnWydkJ1EbKEI=?=
=?ISO-2022-JP?B?IBskQidXGyhCLRskQideJ2AnUidaJ10nbhsoQg==?= 
```

当我尝试解码第一个字符串`GyRCJzEnYidWJ1UnWSdRJ1wnURsoQg==`（base64 decode 然后`NSSring initWithData: encoding:`）时，好的。我的代码适用于数百种不同的 MIME 标头，除了以下...

...当我尝试解码第二个 sring`GyRCJ1kbKEIgGyRCLWIbKEIxNzUzNTk=`时，`NSString initWithData:encoding:`返回`nil`

例如，[http://2cyr.com/decode/](http://2cyr.com/decode/?lang=en) ?lang=en正确解码所有字符串（不要忘记在使用此站点之前从 base64 编码此字符串）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:02:50.233

这不是 base64 问题，而是 ISO-2022-JP 问题。实际上这是一个 JIS-X-0208 问题。如果您查看 base64 解码（但仍然是 ISO-2022-JP 编码）字符串，您会看到它包含序列`ESC $ B - b`（字节 9 到 13）。前三个是转换为 JIS-X-0208-1983 的 ISO-2022-JP 移位序列（详见[RFC 1468](https://www.rfc-editor.org/rfc/rfc1468)），接下来的两个应该是字符的 2 字节编码，但如果你[算出它位于未定义的](http://www.sljfaq.org/afaq/encodings.html#encodings-JIS-X-0208)*kuten*网格的第 13 行。

tl;博士：那不是一个有效的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:13:58.967

`=`也许您的字符串中缺少决赛？

# javascript - HowTo：使用没有 jQuery 的 DOM 创建 DIV？

> ID：10869260
> 
> 赞同：-2
> 
> 时间：2012-06-03T09:39:01.380
> 
> 标签：javascript, html, css, dom

通过用户使用创建动态和位置应输入参数：offsetHeight、offsetLeft offsetParant、offsetTop、offsetWidth

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T09:43:31.527

您可以使用 div 创建一个 div `document.createElement('div');`，但不能设置您指定的任何属性，因为它们都是只读的。

您必须为您想要的位置选择适当的 CSS 并应用它。

# java - RESTful WebService消费XML，怎么调用？

> ID：10869263
> 
> 赞同：3
> 
> 时间：2012-06-03T09:39:42.913
> 
> 标签：java, web-services, rest, call

**更新**

我几乎已经能够完成我的 RESTful 通信，但我还有一些问题：

1 - 如何将我的 XML 分配给连接（下面的代码将举例说明我的情况）？

*调用 Web 服务*

```
public Person getByAccount(Account account) {   
    URL url = new URL(uri);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestMethod("GET");
    connection.setRequestProperty("Accept", "application/xml");

    XStream xstream = new XStream();
    String xmlIn = xstream.toXML(account);

    // Put the xmlIn into the connection

    BufferedReader br = new BufferedReader(new InputStreamReader(
        (connection.getInputStream())));

    StringBuilder sb = new StringBuilder();
    String line;
    while((line = br.readLine()) != null)
        sb.append(line);
    String xmlOut = sb.toString();

    connection.disconnect();
    return (Person) xstream.fromXML(xmlOut);
} 
```

2 - 考虑到最后一个代码示例（Web 服务），下面的类会产生有效的 XML 输出吗？

*使用 RESTful 发送的类*

```
@XmlRootElement(name="people")
public class People {
    @XmlElement(name="person")
    public List<Person> people;

    public People() {
        people.add(new Person(1, "Jan"));
        people.add(new Person(2, "Hans"));
        people.add(new Person(3, "Sjaak"));
    }

    public List<Person> all() {
        return people;
    }

    public Person byName(String name) {
        for(Person person : people)
            if(person.name.equals(name))
                return person;

        return null;
    }

    public void add(Person person) {
        people.add(person);
    }

    public Person update(Person person) {
        for(int i = 0; i < people.size(); i++)
            if(person.id == people.get(i).id) {
                people.set(i, person);
                return person;
            }

        return null;
    }

    public void remove(Person person) {
        people.remove(person);
    }
} 
```

*网络服务*

```
@GET
@Path("/byAccount")
@Consumes("application/xml")
@Produces("application/xml")
public Person getByAccount(Account account) {
    // business logic
    return person;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T09:46:03.890

尝试这个：

```
conn.setDoOutput(true);
OutputStream output = conn.getOutputStream();
// And write your xml to output stream. 
```

检查此链接以使用标准的 REST `URL`：[http ://rest.elkstein.org/2008/02/using-rest-in-java.html](http://rest.elkstein.org/2008/02/using-rest-in-java.html)

编辑

首先，您需要将您的`getByAccount`请求更改为`POST`请求，因为`GET`请求不允许在正文中传递任何信息，它仅使用 url 中的请求参数。但是您发送 XML，所以使用`POST`.

尝试以下版本的发送方法：

```
public Person getByAccount(Account account) {   
    URL url = new URL(uri);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Accept", "application/xml");
    connection.setOutput(true);

    XStream xstream = new XStream();
    xstream.toXML(account, connection.getOutputStream());

    Person person = (Person) xstream.fromXML(connection.getInputStream());   
    connection.disconnect();
    return person;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T09:48:54.647

您可以使用[Jersey Client API](https://blogs.oracle.com/enterprisetechtips/entry/consuming_restful_web_services_with)，（[另外一个链接](http://jersey.java.net/nonav/documentation/latest/client-api.html)）进行最充分的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T09:53:19.003

你可以试试 Spring 3 `RestTemplate`。非常容易上手并且非常强大。

更多信息：http: [//blog.springsource.org/2009/03/27/rest-in-spring-3-resttemplate/](http://blog.springsource.org/2009/03/27/rest-in-spring-3-resttemplate/)

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/client/RestTemplate.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/client/RestTemplate.html)

[http://www.baeldung.com/2012/04/16/how-to-use-resttemplate-with-basic-authentication-in-spring-3-1/](http://www.baeldung.com/2012/04/16/how-to-use-resttemplate-with-basic-authentication-in-spring-3-1/)

# ruby - Ruby中#{}的含义？

> ID：10869264
> 
> 赞同：35
> 
> 时间：2012-06-03T09:40:00.663
> 
> 标签：ruby, string

该操作`#{ }`似乎非常基础，以至于我的 Ruby 书完全跳过了它的定义。有人可以提供解释吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-03T10:04:17.227

### 为什么这是一个好问题

除非您知道正确的搜索词，否则这对 Google 来说是一个棘手的问题。运算符在`#{}`技术上执行**字符串文字**内的**表达式替换**。

 **### 答案

`#{}`文字是用于在**双引号字符串**内插值的运算符，与`$()`在 Bash 中使用反引号或构造的方式相同。从实际的角度来看，文字内部的表达式被求值，然后整个`#{}`表达式（包括运算符和它包含的表达式）被*原位*替换为结果。

### 相关链接

*   [http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#string](http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#string)
*   [http://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html)
*   [http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Interpolation](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Interpolation)
*   [Ruby（在 Rails 上）语法](https://stackoverflow.com/questions/8944125/ruby-on-rails-syntax)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-03T09:44:03.683

它允许您将 Ruby 代码放在字符串中。所以：

```
"three plus three is #{3+3}" 
```

会输出：

> “三加三等于6”

它通常用于将变量值插入字符串，而不必搞乱字符串连接：

```
"Your username is #{user}" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-03T09:43:40.747

它是字符串插值运算符，您可以使用它将表达式插入字符串。您的字符串需要嵌入 " 才能让这个魔法发挥作用，没有 's。它比字符串连接更快更好。

```
var = "variable"
"this is a string with a #{var} in" => "this is a string with a variable in" 
```**

# frameworks - 在 4.2 中更改了数据库注意事项

> ID：10869272
> 
> 赞同：0
> 
> 时间：2012-06-03T09:41:38.273
> 
> 标签：frameworks, atk4

在以前的敏捷工具包文档中有一些数据库注意事项，我再也找不到了。那些改变了吗？例如，布尔值是否仍然需要为 enum('Y','N')??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:23:19.080

使用 4.2，您可以选择布尔“样式”，因此如果您有一个使用 'Y','N' 枚举的旧项目，您可以简单地通过链接来修复字段声明中的定义`->enum(array('Y','N'))`

# node.js - 如何处理 Node.js 中的循环依赖

> ID：10869276
> 
> 赞同：200
> 
> 时间：2012-06-03T09:42:20.503
> 
> 标签：node.js, module, require, circular-dependency, cyclic-dependency

我最近一直在使用 nodejs 并且仍然掌握模块系统，如果这是一个明显的问题，我深表歉意。我想要的代码大致如下：

**a.js**（与节点一起运行的主文件）

```
var ClassB = require("./b");

var ClassA = function() {
    this.thing = new ClassB();
    this.property = 5;
}

var a = new ClassA();

module.exports = a; 
```

**b.js**

```
var a = require("./a");

var ClassB = function() {
}

ClassB.prototype.doSomethingLater() {
    util.log(a.property);
}

module.exports = ClassB; 
```

我的问题似乎是我无法从 ClassB 的实例中访问 ClassA 的实例。

是否有正确/更好的方法来构建模块以实现我想要的？有没有更好的方法在模块之间共享变量？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-06-03T18:54:03.337

Try to set properties on `module.exports`, instead of replacing it completely. E.g., `module.exports.instance = new ClassA()` in `a.js`, `module.exports.ClassB = ClassB` in `b.js`. When you make circular module dependencies, the requiring module will get a reference to an incomplete `module.exports` from the required module, which you can add other properties latter on, but when you set the entire `module.exports`, you actually create a new object which the requiring module has no way to access.

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2012-06-03T18:49:14.413

While node.js does allow circular `require` dependencies, as you've found it can be [pretty messy](http://nodejs.org/api/modules.html#modules_cycles) and you're probably better off restructuring your code to not need it. Maybe create a third class that uses the other two to accomplish what you need.

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-01-21T16:51:10.653

[编辑] 这不是 2015 年，大多数库（即 express）已经使用更好的模式进行了更新，因此不再需要循环依赖。我建议干脆*不使用它们*。

* * *

我知道我在这里挖掘了一个旧答案......这里的问题是 module.exports 是在您需要 ClassB*之后定义的。*（JohnnyHK 的链接显示）循环依赖在 Node 中工作得很好，它们只是同步定义的。如果使用得当，它们实际上解决了很多常见的节点问题（比如`app`从其他文件访问 express.js）

只需确保在需要具有循环依赖关系的文件*之前定义了必要的导出。*

这将打破：

```
var ClassA = function(){};
var ClassB = require('classB'); //will require ClassA, which has no exports yet

module.exports = ClassA; 
```

这将起作用：

```
var ClassA = module.exports = function(){};
var ClassB = require('classB'); 
```

我一直使用这种模式来访问`app`其他文件中的 express.js：

```
var express = require('express');
var app = module.exports = express();
// load in other dependencies, which can now require this file and use app 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2012-12-31T06:26:17.087

有时引入第三个类（如 JohnnyHK 建议的那样）确实是人为的，所以除了 Ianzz：如果你确实想替换 module.exports，例如如果你正在创建一个类（比如上面的例子），这也是可能的，只要确保在启动循环 require 的文件中，'module.exports = ...' 语句发生在 require 语句之前。

**a.js**（与节点一起运行的主文件）

```
var ClassB = require("./b");

var ClassA = function() {
    this.thing = new ClassB();
    this.property = 5;
}

var a = new ClassA();

module.exports = a; 
```

**b.js**

```
var ClassB = function() {
}

ClassB.prototype.doSomethingLater() {
    util.log(a.property);
}

module.exports = ClassB;

var a = require("./a"); // <------ this is the only necessary change 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-08-18T00:35:39.300

解决方案是在需要任何其他控制器之前“转发声明”您的导出对象。因此，如果您像这样构建所有模块并且您不会遇到任何这样的问题：

```
// Module exports forward declaration:
module.exports = {

};

// Controllers:
var other_module = require('./other_module');

// Functions:
var foo = function () {

};

// Module exports injects:
module.exports.foo = foo; 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-04-30T09:10:19.713

您可以轻松解决这个问题：只需在使用 module.exports 的模块中需要任何其他内容之前导出数据：

**类A.js**

```
class ClassA {

    constructor(){
        ClassB.someMethod();
        ClassB.anotherMethod();
    };

    static someMethod () {
        console.log( 'Class A Doing someMethod' );
    };

    static anotherMethod () {
        console.log( 'Class A Doing anotherMethod' );
    };

};

module.exports = ClassA;
var ClassB = require( "./classB.js" );

let classX = new ClassA(); 
```

**类B.js**

```
class ClassB {

    constructor(){
        ClassA.someMethod();
        ClassA.anotherMethod();
    };

    static someMethod () {
        console.log( 'Class B Doing someMethod' );
    };

    static anotherMethod () {
        console.log( 'Class A Doing anotherMethod' );
    };

};

module.exports = ClassB;
var ClassA = require( "./classA.js" );

let classX = new ClassB(); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-06-26T10:31:48.247

需要最小更改的解决方案是扩展`module.exports`而不是覆盖它。

**a.js - 使用 b.js 方法的应用程序入口点和模块***

```
_ = require('underscore'); //underscore provides extend() for shallow extend
b = require('./b'); //module `a` uses module `b`
_.extend(module.exports, {
    do: function () {
        console.log('doing a');
    }
});
b.do();//call `b.do()` which in turn will circularly call `a.do()` 
```

**b.js - 使用来自 a.js 的方法的模块**

```
_ = require('underscore');
a = require('./a');

_.extend(module.exports, {
    do: function(){
        console.log('doing b');
        a.do();//Call `b.do()` from `a.do()` when `a` just initalized 
    }
}) 
```

它将工作并产生：

```
doing b
doing a 
```

虽然此代码不起作用：

**一个.js**

```
b = require('./b');
module.exports = {
    do: function () {
        console.log('doing a');
    }
};
b.do(); 
```

**b.js**

```
a = require('./a');
module.exports = {
    do: function () {
        console.log('doing b');
    }
};
a.do(); 
```

输出：

```
node a.js
b.js:7
a.do();
    ^    
TypeError: a.do is not a function 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-04-17T13:36:28.410

只在需要时才需要懒惰呢？所以你的 b.js 看起来如下

```
var ClassB = function() {
}
ClassB.prototype.doSomethingLater() {
    var a = require("./a");    //a.js has finished by now
    util.log(a.property);
}
module.exports = ClassB; 
```

当然，将所有 require 语句放在文件顶部是一种很好的做法。但在*某些*情况下，我会原谅自己从一个原本不相关的模块中挑选出一些东西。称其为 hack，但有时这比引入进一步的依赖，或添加额外的模块或添加新结构（EventEmitter 等）要好

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2017-03-03T04:06:22.490

重要的是不要重新分配`module.exports`您已获得的对象，因为该对象可能已被分配给循环中的其他模块！只需在内部分配属性`module.exports`，其他模块就会看到它们出现。

所以一个简单的解决方案是：

```
module.exports.firstMember = ___;
module.exports.secondMember = ___; 
```

唯一真正的缺点是需要重复`module.exports.`多次。

* * *

类似于 lanzz 和 setec 的答案，我一直在使用以下模式，感觉更具声明性：

```
module.exports = Object.assign(module.exports, {
    firstMember: ___,
    secondMember: ___,
}); 
```

将`Object.assign()`成员复制到`exports`已提供给其他模块的对象中。

分配在`=`逻辑上是多余的，因为它只是设置`module.exports`为自己，但我使用它是因为它帮助我的 IDE（WebStorm）识别这`firstMember`是该模块的属性，所以“转到 -> 声明”（Cmd-B）其他工具将适用于其他文件。

这种模式不是很漂亮，所以我只在需要解决循环依赖问题时使用它。

它非常适合于[显示模式](https://medium.com/@Rahulx1/revealing-module-pattern-tips-e3442d4e352)，因为您可以轻松地在对象中添加和删除导出，尤其是在使用 ES6 的[属性简写](http://es6-features.org/#PropertyShorthand)时。

```
Object.assign(module.exports, {
    firstMember,
    //secondMember,
}); 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-12-20T17:58:03.800

我见过人们做的另一种方法是在第一行导出并将其保存为局部变量，如下所示：

```
let self = module.exports = {};

const a = require('./a');

// Exporting the necessary functions
self.func = function() { ... } 
```

我倾向于使用这种方法，你知道它有什么缺点吗？

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-04-01T20:15:17.363

## TL;博士

只需使用`exports.someMember = someMember`而不是`module.exports = { // new object }`.

## 扩展答案

在阅读了 lanzz 的回复后，我终于可以弄清楚这里发生了什么，所以我会在这个问题上给我两分钱，扩展他的答案。

让我们看看这个例子：

**一个.js**

```
console.log("a starting");

console.log("a requires b");
const b = require("./b");
console.log("a gets b =", b);

function functionA() {
  console.log("function a");
}

console.log("a done");
exports.functionA = functionA; 
```

**b.js**

```
console.log("b starting");

console.log("b requires a");
const a = require("./a");
console.log("b gets a =", a);

function functionB() {
  console.log("On b, a =", a)
}

console.log("b done");
exports.functionB = functionB; 
```

**main.js**

```
const a = require("./a");
const b = require("./b");

b.functionB() 
```

**输出**

```
a starting
a requires b
b starting
b requires a
b gets a = {}
b done
a gets b = { functionB: [Function: functionB] }
a done
On b, a = { functionA: [Function: functionA] } 
```

在这里我们可以看到，首先`b`接收一个空对象 as `a`，然后一旦`a`完全加载，该引用就会通过 更新`exports.functionA = functionA`。如果您将整个模块替换为另一个对象，通过`module.exports`，那么`b`将丢失来自 的引用`a`，因为它将从一开始就指向同一个空对象，而不是指向新对象。

因此，如果您`a`像这样导出：`module.exports = { functionA: functionA }`，那么输出将是：

```
a starting
a requires b
b starting
b requires a
b gets a = {}
b done
a gets b = { functionB: [Function: functionB] }
a done
On b, a = {} // same empty object 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-05-24T03:00:34.307

这是我发现使用已满的快速解决方法。

在文件“a.js”上

```
let B;
class A{
  constructor(){
    process.nextTick(()=>{
      B = require('./b')
    })
  } 
}
module.exports = new A(); 
```

在文件“b.js”上写下以下内容

```
let A;
class B{
  constructor(){
    process.nextTick(()=>{
      A = require('./a')
    })
  } 
}
module.exports = new B(); 
```

这样，事件循环类的下一次迭代将被正确定义，并且那些 require 语句将按预期工作。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-04-17T14:01:40.593

实际上我最终需要我的依赖

```
 var a = null;
 process.nextTick(()=>a=require("./a")); //Circular reference! 
```

不漂亮，但它的工作原理。它比改变 b.js（例如只增加 modules.export）更容易理解和诚实，否则它是完美的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2022-01-17T12:35:04.540

### 极其简单的解决方案通常是：

通常你会在文件的顶部有 require ...

```
var script = require('./script')
function stuff() {
      script.farfunction()
} 
```

相反，**只需要它“在函数中”**

```
function stuff() {
      var _script = require('./script')
      _script.farfunction()
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-04-25T14:42:35.677

避免它的一种方法是不需要另一个文件中的一个文件，只需将它作为参数传递给函数，无论您在另一个文件中需要什么。通过这种方式，循环依赖将永远不会出现。

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2020-12-16T00:47:11.513

如果你不能消除循环依赖（例如 useraccount <---> userlogin），还有一个选择......

它就像使用一样简单`setTimeout()`

```
//useraccount.js

let UserLogin = {};

setTimeout(()=>UserLogin=require('./userlogin.js'), 10);

class UserAccount{

getLogin(){
return new UserLogin(this.email);

}

}

//userlogin.js

let UserAccount ={};

setTimeout(()=>UserAccount=require('./useraccount.js'), 15);

class UserLogin{

getUser(){

return new User(this.token);

}

} 
```

# javascript - 如何将使用 charCodeAt 的 javascript 函数转换为 Coldfusion？

> ID：10869280
> 
> 赞同：1
> 
> 时间：2012-06-03T09:43:34.797
> 
> 标签：javascript, coldfusion, character-encoding

我有一个 javascript 函数，我需要使用 Coldfusion8 运行服务器端。

javascript 函数使用 charCodeAt 检查输入的值（ILN，13 位值，例如 1234567891231）并计算 checkVal：

```
checker=0;
for (i=11; i>0; i=i-2){
    checker += (iln.charCodeAt(i)-48)*3;
    checker += iln.charCodeAt(i-1)-48;
    }
checkVal = 10 - (checker%10);
if(checkVal==10){
    checkVal=0;
    }
if(checkVal != iln.charAt(12)){
    alert("error, should be" + checkVal);
    } 
```

在 Coldfusion 中，我尝试使用循环、mid() 和 asc() 来执行此操作，但我无法让它工作。这是我所拥有的：

```
<cscript>
    var checkValue = 1234567891231;        
    var done = "";
</cscript>
<cfloop from="11" to="1" index="i" step="-2">    
    <cfscript>
        check = check +   (ASC(MID(checkValue,#i#,1))-48)*3;
        check = check +   ASC(MID(checkValue,(#i#-1),1))-48;
    </cfscript>
</cfloop>
<cfset done = 10 - check/10>
<cfif done EQ 10><cfset done = 0></cfif>
<cfif done NEQ mid(checkValue,12,1)>
    <cfscript>
// error handler 
    </cfscript>
</cfif> 
```

值正确传递，但我的 ASC(MID()) 产生错误，我还没有发现我做错了什么。

有人可以给我指点吗？

谢谢！

**编辑**：更新 CF 循环参数
**EDIT2**：将其固定到第二个中间函数，在最后一次循环迭代中获得 1-1=0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:00:36.660

我不太了解这里的算法，但错误是因为你正在做`Mid(string,0,1)`- 这是字符串开头之前的一个字符，因此不起作用。（JS 从零开始索引字符串，CF 从一开始索引。）

简单的解决方案：

```
<cfloop from="11" to="1" index="i" step="-2">
    <cfset check += mid(checkValue,i,1) * 3 />
</cfloop>
<cfloop from="10" to="2" index="i" step="-2">
    <cfset check += mid(checkValue,i,1) />
</cfloop> 
```

它不会浪费时间，`Asc`因为这些值已经是数字（如果可能不是，请在此步骤之前验证输入），并且也没有不必要的哈希。

# asp.net-mvc - 为 Orchard 创建自定义模块

> ID：10869283
> 
> 赞同：-2
> 
> 时间：2012-06-03T09:43:55.837
> 
> 标签：asp.net-mvc, module, orchardcms

[我使用 Orchard 文档中的本指南](http://docs.orchardproject.net/Documentation/Creating-a-module-with-a-simple-text-editor)创建了一个自定义模块，但由于某种原因，当我想创建一个新模块时，我看不到内容类型中的字段。

这是我的模型：

```
public class CustomerPartRecord : ContentPartRecord
{
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual int PhoneNumber { get; set; }
    public virtual string Address { get; set; }
    public virtual string Profession { get; set; }
    public virtual string ProDescription { get; set; }
    public virtual int Hours { get; set; }
}
public class CustomerPart : ContentPart<CustomerPartRecord>
{

    [Required(ErrorMessage="you must enter your first name")]
    [StringLength(200)]
    public string FirstName { get { return Record.FirstName; } set { Record.FirstName = value; } }

    [Required(ErrorMessage = "you must enter your last name")]
    [StringLength(200)]
    public string LastName { get { return Record.LastName; } set { Record.LastName = value; } }

    [Required(ErrorMessage = "you must enter your phone number")]
    [DataType(DataType.PhoneNumber)]
    public int PhoneNumber { get { return Record.PhoneNumber; } set { Record.PhoneNumber = value; } }

    [StringLength(200)]
    public string Address { get { return Record.Address; } set { Record.Address = value; } }

    [Required(ErrorMessage = "you must enter your profession")]
    [StringLength(200)]
    public string Profession { get { return Record.Profession; } set { Record.Profession = value; } }

    [StringLength(500)]
    public string ProDescription { get { return Record.ProDescription; } set { Record.ProDescription = value; } }

    [Required(ErrorMessage = "you must enter your hours")]
    public int Hours { get { return Record.Hours; } set { Record.Hours = value; } }
} 
```

这是处理程序：

```
class CustomerHandler : ContentHandler
{
    public CustomerHandler(IRepository<CustomerPartRecord> repository)
    {
        Filters.Add(StorageFilter.For(repository));
    }
} 
```

司机：

```
class CustomerDriver : ContentPartDriver<CustomerPart>
{
    protected override DriverResult Display(CustomerPart part, string displayType, dynamic shapeHelper)
    {
        return ContentShape("Parts_Customer", () => shapeHelper.Parts_Customer(
            FirstName: part.FirstName,
            LastName: part.LastName,
            PhoneNumber: part.PhoneNumber,
            Address: part.Address,
            Profession: part.Profession,
            ProDescription: part.ProDescription,
            Hours: part.Hours));
    }
    //GET
    protected override DriverResult Editor(CustomerPart part, dynamic shapeHelper)
    {
        return ContentShape("Parts_Customer", () => shapeHelper.EditorTemplate(
            TemplateName:"Parts/Customer",
            Model: part,
            Prefix: Prefix));
    }
    //POST
    protected override DriverResult Editor(CustomerPart part, IUpdateModel updater, dynamic shapeHelper)
    {
        updater.TryUpdateModel(part, Prefix, null, null);
        return Editor(part, shapeHelper);
    } 
```

迁移：

```
public class Migrations : DataMigrationImpl
{
    public int Create()
    {
        // Creating table CustomerPartRecord
        SchemaBuilder.CreateTable("CustomerPartRecord", table => table
            .ContentPartRecord()
            .Column("FirstName", DbType.String)
            .Column("LastName", DbType.String)
            .Column("PhoneNumber", DbType.Int32)
            .Column("Address", DbType.String)
            .Column("Profession", DbType.String)
            .Column("ProDescription", DbType.String)
            .Column("Hours", DbType.Int32)
        );
        return 1;
    }
    public int UpdateFrom1()
    {
        ContentDefinitionManager.AlterPartDefinition("CustomerPart",
          builder => builder.Attachable());
        return 2;
    }
    public int UpdateFrom2()
    {
        ContentDefinitionManager.AlterTypeDefinition("Customer", cfg => cfg
          .WithPart("CommonPart")
          .WithPart("RoutePart")
          .WithPart("BodyPart")
          .WithPart("CustomerPart")
          .WithPart("CommentsPart")
          .WithPart("TagsPart")
          .WithPart("LocalizationPart")
          .Creatable()
          .Indexed());
        return 3;
    }

} 
```

如果我遗漏了什么，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:35:37.713

您是否在placement.info 文件中添加了一个条目？我有时会忘记这一点。如果没有放置，它将不知道将您的内容放在哪里，因此它不会被渲染。

# android - Android：如何在不耗尽电池的情况下定期检查当前位置

> ID：10869284
> 
> 赞同：3
> 
> 时间：2012-06-03T09:43:59.447
> 
> 标签：android, location

我有一个后台服务，它定期由`timer.scheduleAtFixedRate`. 它会每隔一段时间（例如 60 秒）醒来并检查位置。

位置被检查，`locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60000, 5, listener);`实际位置是从听者的`onLocationChanged`.

现在，当手机在外面并且 GPS 接收良好时，这可以正常工作。但是，如果手机在里面，GPS 几乎总是处于活动状态——寻找信号，电池很快就会耗尽。

我使用 Handler 和 Runnable 创建了另一个线程，以准确控制 GPS 活动时间：我使用了`locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);`，`locManager.removeUpdates(listener);`因此我可以根据需要打开和关闭 GPS。在这种情况下，我可以打开 GPS 的确切时间，但发现即使 10 秒后它也无法锁定接收良好的区域。所以在这里我再次耗尽电池...

我正在使用 API 级别 7，因此我无法使用`locationManager.requestSingleUpdate`. 我有两个问题：

1.  有没有办法优化这个过程？
2.  升级到 API 级别 9（并使用`locationManager.requestSingleUpdate`）会显着改善流程吗？我的意思是，它值得升级吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:18:39.900

[这里](http://developer.android.com/reference/android/location/LocationManager.html)解释的 NETWORK_PROVIDER 怎么样？你可以有一个系统，如果你在有限的时间内找不到位置，这意味着你在里面或者 GPS 接收不够好，你可以使用网络位置来代替。由于这使用更少的电池，它至少是一种解决方法或替代方案。但是精度会更低。

# pdf - 如何从批处理文件同步打开 PDF 文件

> ID：10869287
> 
> 赞同：4
> 
> 时间：2012-06-03T09:44:16.673
> 
> 标签：pdf, batch-file

我想从批处理文件中打开一个 PDF 文件，并且只有在用户关闭 PDF 文件后才继续运行该批处理文件。

这个：

```
start "" /WAIT "test.pdf" 
```

等待应用程序关闭，而不是文件。因此，如果其他文件已打开，则无法正常工作。

它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:58:17.567

其实你应该写

```
start "" /WAIT "test.pdf" 
```

如果您希望 /wait 开关重要（否则它会传递给 adobe，我认为它不会接受您的此类命令）。当然，这一行将等待 adobe 应用程序完成（而不是等待文件关闭） - 要检测文件关闭，您需要一些窗口标题处理解决方案，例如在 autoit 中：

```
ShellExecute("test.pdf")
WinWait("test.pdf")
WinWaitClose("test.pdf") 
```

至于 Acrobat Pro 无法找到该文件 - 您是否提供了完整的文件路径？您最好，另一个应用程序的当前目录并不总是很明显。所以你必须做

```
start "" /WAIT /D"C:\WhateverFolderShouldBeCurrent" "test.pdf" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:14:46.453

在批处理文件中使用这一行：

```
test.pdf 
```

并确保 .pdf 扩展名链接到 acroread.exe。有关更多详细信息：开始/？

# vba - 如何为日期时间选择器设置默认分钟

> ID：10869297
> 
> 赞同：0
> 
> 时间：2012-06-03T09:46:02.580
> 
> 标签：vba, vb6

使用日期时间选择器控件

Datetimepicker 控制格式为`00`（仅分钟，最多 59 分钟）

当我加载表格时，它应该默认显示 05 分钟...

例子

```
Form1

Datetimepicker control `00` (Up/Down Format) 
```

当我加载 form1 时，应显示 Datetimepicker 控件`05`而不是`00`

这该怎么做。

需要vb6代码帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T14:12:19.083

如果我的记忆对我有用，那么`00`格式不正确。应该是这样的（*把这个从我的记忆中写下来，但我相信这很好*）

```
Option Explicit

Private Sub Form_Load()
    With DTPicker1
        .Format = dtpCustom
        .CustomFormat = "mm"
        .Value = #00:05:00#
    End With
End Sub 
```

也是`DTPicker1.CustomFormat`区分大小写的，所以它必须是`mm`而不是`MM`

**编辑**

只是想 100% 确定，所以我回去自己测试了……哈哈。是的，它有效。

**快照**

![在此处输入图像描述](../Images/9bd2bfe71b56542ebb8af668a4eca68f.png)

# c# - 如何在gridview中单击编辑链接时获取选定的行数据

> ID：10869301
> 
> 赞同：0
> 
> 时间：2012-06-03T09:47:32.937
> 
> 标签：c#, asp.net, gridview

我有一个 gridview，每行有两个额外的按钮，分别是 Edit 和 Add，每个 Edit 和 Add Linkbuttons 上都有一个 click 事件，我通过它打开 ModelViewExtender 对话框。我希望当我单击gridview 每一行上的这些链接按钮时，应该访问所有行数据意味着来自单击的编辑链接行的特定列（**单元格）的行数据。**您可以通过下面的 GridView 图像更好地理解，如：

![在此处输入图像描述](../Images/c9e53ffe27fbaf5a4a5837b9540d0a84.png)

请向我建议任何有关相同的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:44:30.760

你有两种方法，要么使用 AutoGenereateEdit 属性为 true，这将生成这些超链接。然后在行编辑事件中，您可以使用“e.NewEditIndex”轻松获取所有这些值，“e.NewEditIndex”是您编辑的 GridViewRow 的行索引。

第二种方法是将这些超链接“编辑”和“添加”作为模板，为了访问它们，您需要将发送者对象解析为它对超链接单击事件的控制，然后获取它的父对象，它将返回GridViewRow 上的控件，这将允许您从该行中获取所需的所有值，如下所示：

```
//Debug it and just make sure that tow parents return the GridViewRow
GridViewRow row = (GridViewRow)(((HyperLink)(sender)).Parent.Parent); 
```

# css - jQuerymobile 底部的 CSS 页脚

> ID：10869302
> 
> 赞同：0
> 
> 时间：2012-06-03T09:47:35.230
> 
> 标签：css, jquery-mobile, footer

[同样的问题在这里](https://stackoverflow.com/questions/6544999/css-footer-at-the-bottom-with-certain-conditions)成功解决，但使用 jquerymobile

这是脚本的工作脚本，没有 jQmobile
[http://jsfiddle.net/ca11111/tCdPX/12/](http://jsfiddle.net/ca11111/tCdPX/12/)

现在只需添加 jQmobile 脚本和链接头标签：http:
[//jsfiddle.net/ca11111/tCdPX/13/](http://jsfiddle.net/ca11111/tCdPX/13/)

不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:01:11.263

jQuery mobile 添加了一个带有类的页面包装器`ui-page`。它也需要css定义`height: 100%;`。

将类添加`ui-page`到 html 和 body 的 css 定义中：

```
html, body, .ui-page {
    height: 100%;
} 
```

另请参阅[您更新的示例](http://jsfiddle.net/tCdPX/14/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:45:01.180

我最好的解决方案：

```
$(document).ready(function(){
    $("html, body, .ui-page").height($(window).height());
} 
```

希望这可以帮助。

# python - Python在产卵时弄乱vim

> ID：10869304
> 
> 赞同：0
> 
> 时间：2012-06-03T09:48:18.110
> 
> 标签：python, vim, subprocess

我正在尝试从 python 运行程序并根据其退出状态打印输出。下面的代码直接输出到我的 vim 屏幕（弄乱它），而不是打开带有输出的 shell。

![在此处输入图像描述](../Images/7f3957c0782eb465afb739d4ce740062.png)

```
python << EOF
import subprocess
import vim

cmd = "BAD_COMMAND"
p = subprocess.Popen(cmd, shell=True)
retcode = p.poll()
if retcode > 0:
    output_of_error = p.communicate()[0]
    vim.command("!echo show errors here")

EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:58:16.563

您想将子流程重定向到管道：

```
p = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

`communicate()`然后将返回一个包含进程内容`stdout`的2 元组。`stderr`

# json.net - JSON.NET 反序列化对象/对象数组中的对象

> ID：10869314
> 
> 赞同：3
> 
> 时间：2012-06-03T09:49:44.737
> 
> 标签：json.net

我有一种情况，我正在使用的 API 返回不一致的 JSON，我想使用 JSON.NET 对其进行反序列化。在一种情况下，它返回一个包含对象的对象（请注意，外部的“1”可以是任何数字）：

```
{
   "1":{
      "0":{
         "db_id":"12835424",
         "title":"XXX"
      },
      "1":{
         "db_id":"12768978",
         "title":"YYY"
      },
      "2":{
         "db_id":"12768980",
         "title":"ZZZ"
      },
      "3":{
         "db_id":"12768981",
         "title":"PPP"
      }
   }
} 
```

在另一种情况下，它返回一个对象数组：

```
{
   "3":[
      {
         "db_id":"12769199",
         "title":"XXX"
      },
      {
         "db_id":"12769200",
         "title":"YYY"
      },
      {
         "db_id":"12769202",
         "title":"ZZZ"
      },
      {
         "db_id":"12769243",
         "title":"PPP"
      }
   ]
} 
```

我不知道为什么存在这种不一致，但这是我正在使用的格式。使用该方法反序列化两种格式的正确方法是`JsonConvert.DeserializeObject`什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T08:09:29.773

对于当前版本的 Json.NET（Json.NET 4.5 Release 11），这里有一个**CustomCreationConverter**，它将处理有时反序列化为对象、有时反序列化为数组的 Json。

```
public class ObjectToArrayConverter<T> : CustomCreationConverter<List<T>> where T : new() 
{
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        List<T> target = new List<T>();

        try
        {
            // Load JObject from stream
            JArray jArray = JArray.Load(reader);

            // Populate the object properties
            serializer.Populate(jArray.CreateReader(), target);
        }
        catch (JsonReaderException)
        {
            // Handle case when object is not an array...

            // Load JObject from stream
            JObject jObject = JObject.Load(reader);

            // Create target object based on JObject
            T t = new T();

            // Populate the object properties
            serializer.Populate(jObject.CreateReader(), t);

            target.Add(t);
        }

        return target;
    }

    public override List<T> Create(Type objectType)
    {
        return new List<T>();
    }
} 
```

示例用法：

```
[JsonObject]
public class Project
{
    [JsonProperty]
    public string id { get; set; }

    // The Json for this property sometimes comes in as an array of task objects, 
    // and sometimes it is just a single task object.
    [JsonProperty]
    [JsonConverter(typeof(ObjectToArrayConverter<Task>))]
    public List<Task> tasks{ get; set; }
}

[JsonObject]
public class Task
{
    [JsonProperty]
    public string name { get; set; }

    [JsonProperty]
    public DateTime due { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:35:17.853

我认为这应该可以通过创建**JsonCreationConverter**来实现。这篇文章可能会有所帮助：[http ://dotnetbyexample.blogspot.nl/2012/02/json-deserialization-with-jsonnet-class.html](http://dotnetbyexample.blogspot.nl/2012/02/json-deserialization-with-jsonnet-class.html)

# xml - 如何在动态创建的报表查看器的每一页上显示标题

> ID：10869315
> 
> 赞同：3
> 
> 时间：2012-06-03T09:49:52.777
> 
> 标签：xml, reportviewer, rdlc, dynamic-rdlc-generation

我动态创建报告，即我无法打开设计器 RDLC 并修复它。我创建一个表格并通过数据集填充它。获取 XML 文件并将其导出为 PDF 文件。但即使我写

```
string deviceInfo =
"<DeviceInfo>" +
" <OutputFormat>PDF</OutputFormat>" +
" <PageWidth>11in</PageWidth>" +
" <PageHeight>8.5.0in</PageHeight>" +
" <MarginTop>0.05in</MarginTop>" +
" <MarginLeft>0.05in</MarginLeft>" +
" <MarginRight>0.05in</MarginRight>" +
" <MarginBottom>0.05in</MarginBottom>" +

" <KeepWithGroup>After</KeepWithGroup>" +
" <RepeatOnNewPage>true</RepeatOnNewPage>" + 
" <FixedData>true</FixedData>"+
 " <RepeatHeaderOnNewPage>true</RepeatHeaderOnNewPage>" +
"</DeviceInfo>";
try
{
 byte[] bytes = reportViewer1.LocalReport.Render(
 "PDF", deviceInfo, out mimeType, out encoding, out filenameExtension,
 out streamids, out warnings);

 using (FileStream fs = new FileStream(filename, FileMode.Create))
 {
 fs.Write(bytes, 0, bytes.Length);
 fs.Close();
 }
 return filename;
 }
 //.... 
```

我只在 1 页上看到标题 帮助解决问题！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:08:42.637

```
 private Rdl.HeaderType CreateHeader()
    {
        Rdl.HeaderType header = new Rdl.HeaderType();
        header.Items = new object[]
            {
                CreateHeaderTableRows(),
                true,
            };
        header.ItemsElementName = new Rdl.ItemsChoiceType20[]
            {
                Rdl.ItemsChoiceType20.TableRows,
                Rdl.ItemsChoiceType20.RepeatOnNewPage,
            };
        return header;
    }
   //....
    public string ExportReport(string filename)
    {
        Warning[] warnings;
        string[] streamids;
        string mimeType;
        string encoding;
        string filenameExtension;
        string deviceInfo =
             "<DeviceInfo>" +
             " <OutputFormat>PDF</OutputFormat>" +
             " <PageWidth>11in</PageWidth>" +
             " <PageHeight>8.5.0in</PageHeight>" +
             " <MarginTop>0.05in</MarginTop>" +
             " <MarginLeft>0.05in</MarginLeft>" +
             " <MarginRight>0.05in</MarginRight>" +
             " <MarginBottom>0.05in</MarginBottom>" +
             "</DeviceInfo>"; 
        try
        {
            byte[] bytes = reportViewer1.LocalReport.Render(
                "PDF", deviceInfo, out mimeType, out encoding, out filenameExtension,                       out streamids, out warnings);
            using (FileStream fs = new FileStream(filename, FileMode.Create))
            {
                fs.Write(bytes, 0, bytes.Length);
                fs.Close();
            }
            return filename;
        }
        catch (Exception e)
        {
            Program.WriteLogEx.WriterLogErr(e.Message);
            return "";
        }
    } 
```

# c# - 在 Windows 8 Metro 应用程序中拍摄网页屏幕截图

> ID：10869318
> 
> 赞同：4
> 
> 时间：2012-06-03T09:50:33.717
> 
> 标签：c#, screenshot, windows-8, microsoft-metro, webpage-screenshot

我正在尝试在 Windows 8 Metro 应用程序中截取网页的屏幕截图。到目前为止，唯一有用的控制是`WebView`. 不幸的是，它不包含任何类似`DrawToBitmap`（从 Forms`WebBrowser`控件中得知）的方法。我错过了什么吗？

不同的方法将专注于将一些 JS（例如 html2canvas）注入到呈现的页面中，`WebView`但由于安全原因，我认为这是不可能的。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:37:50.343

WebViewBrush 与 WebView 类似，不同之处在于它是非交互式的并且它是一个画笔，因此您可以在任何地方渲染它

# cloud - 更新已经包含的记录

> ID：10869319
> 
> 赞同：0
> 
> 时间：2012-06-03T09:50:34.297
> 
> 标签：cloud, salesforce, apex-code

我有两个来自Updated 和toBeUpdated 的对象。这两个对象都有两个字段 aField 和 bField。我必须编写一个代码，以便在 toBeUpdated 中插入新记录时。它检查该记录以前是否已经存在。被检查的键是 aField，如果 aField 是两个记录之间的匹配项，那么它只会更新另一个字段 bField 而不为 toBeUpated 对象创建新记录。

在此操作之后，我还必须从 fromUpdate 对象中删除所有对象。

我知道 query 和 delete() 会提供这个功能，但是我不知道如何为这个功能编写 SOQL 语句。

任何帮助，将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:24:04.633

如果您的意思是如何编写 SOQL 查询来执行删除和更新，答案是您不能。SOQL 在很多方面都与 SQL 完全不同，以及执行 3 种不同操作的方式。

1.  首先使用 SOQL 查询查找需要更新的匹配记录
2.  在代码中修改后执行`upsert`插入新行和更新现有记录的操作`bField`
3.  `fromUpdate`从对象中删除需要删除的记录

删除就像您自己所说的那样：查询然后删除。

当然，为了保持代码简洁，您可以在一行中执行此操作：

```
delete [select Id from MyObject__c where SomeField = true]; 
```

# javascript - 版本 2 和 3 之间的 uploadify API 的主要变化是什么？

> ID：10869321
> 
> 赞同：2
> 
> 时间：2012-06-03T09:51:05.897
> 
> 标签：javascript, uploadify

我正在尝试将uploadify 2.1.4 升级到3.1，似乎有重大的重大变化。到目前为止，我只发现了一些更改的设置键（例如，“uploader”应该更改为“swf”，而“script”现在是“uploader”......非常混乱）。

有升级指南吗？我错过了更重要的变化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T13:02:38.573

这些变化不仅仅是重命名参数名称。由于所有重命名和未记录的 API 更改，这是我遇到的更令人困惑的库升级之一（除非我错过了某个迁移文档）。除了我在问题中描述的内容以及其他一些小的变化之外，我发现：

1.  在 v3 中`onUploadComplete`（相当于 v2 中的 onComplete），不会从服务器获取响应数据。
2.  和现在`onUploadSuccess`的含义与v2 中的不同。在 v2 (onUploadComplete) 中，该方法的签名是，并保存实际响应字节，同时保存元数据，如“filecount”和“speed”。在 v3 ( ) 中，现在是布尔值（true == 成功），并且是“服务器端脚本返回的数据（文件回显的任何内容）”。`data``response``function(event, ID, fileObj, response, data)``response``data``onuploadsuccess``response``data`

我在放弃并恢复到 v2.4.1 之后才意识到上述一些信息 - 似乎我需要的功能一直存在，我不需要升级。

该功能正在订阅`onUploadStart`- 我刚刚意识到在 v2.4.1 中它实际上被称为`onSelectOnce`......或者至少它对于我的目的来说是一个足够好的近似值。

# c++ - c++11 atomic ordering：用于锁的扩展总顺序memory_order_seq_cst

> ID：10869322
> 
> 赞同：3
> 
> 时间：2012-06-03T09:52:00.920
> 
> 标签：c++, multithreading, c++11, atomic

来自 c++11 29.3-p3：

> 在所有 memory_order_seq_cst 操作上应有一个总顺序 S，与所有受影响位置的“发生在”顺序和修改顺序一致，以便从原子对象 M 加载值的每个 memory_order_seq_cst 操作 B 观察以下任一价值观：
> 
> -- 在 S 中 B 之前的 M 的最后修改 A 的结果，如果它存在，或者
> 
> -- 如果 A 存在，则在与 B 相关的可见副作用序列中 M 的某些修改的结果不是 memory_order_seq_cst 并且不会在 A 之前发生，或者
> 
> -- 如果 A 不存在，M 在可见的副作用序列中对 B 的一些修改的结果，它不是 memory_order_seq_cst。
> 
> [ 注意：虽然没有明确要求 S 包含锁，但它总是可以扩展到包含锁定和解锁操作的顺序，因为它们之间的顺序已经包含在“发生在”顺序中。--结束注]

在最后一个注释中，“总是”是什么意思？我可以理解任何特定的实现都可以设计为支持这样的扩展 S。但是在一些不是为它设计的通用实现中，我看不到 S 可以使用所描述的属性进行扩展。

这是否意味着在这里也满足相同可见性属性的扩展顺序？

我已将此问题发送到 comp.std.c++，但没有得到任何答案。[http://groups.google.com/group/comp.std.c++/browse_frm/thread/5242fa70d0594d1b#](http://groups.google.com/group/comp.std.c++/browse_frm/thread/5242fa70d0594d1b#)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:38:31.977

> “总是”是什么意思？

总是意味着存在一个与和`S+l`一致的全序。`seq_cst ops U lock ops``happens-before``S`

## 这是为什么

事实 1：`S`是一个与 一致的总订单`HB`。

事实 2：锁定操作按`HB`部分顺序排序，因为它们是获取/释放操作。

事实 3： 中没有循环`HB`。

引理 1： 中没有循环`S' = S union HB`。

证明：如果 中存在任何循环`S'`，它们将是形式`Aop1 <S Aop2 <HB Aop1`，因为任何两个原子操作在 中是可比的，`S`并且发生前是传递的。这与事实 1 相矛盾。 QED

结论：因为对于每个部分顺序（= 没有循环）都存在其对全序的扩展（参见拓扑排序），所以存在一个全序扩展`S'`。因此，您只需从中选择原子和锁定操作并获取`S+l`.

> 但是在一些不是为它设计的通用实现中，我看不到 S 可以这样扩展。

这样的实现不能满足`mem_order_seq_cst`要求。

# java - 从 p+q 和 pq 计算 p^n + q^n

> ID：10869325
> 
> 赞同：0
> 
> 时间：2012-06-03T09:52:23.820
> 
> 标签：java

我在 SPOJ 上解决[了这个问题](http://www.spoj.pl/SPI2012A/problems/SUMOFPOW/)

> 我们要计算 ( (P^N) + (Q^N) )，我们得到 P+Q 和 P*Q。
> 输入：第一行将包含一个整数 T (<=15) 表示测试用例的数量 三个整数 p+q、p*q 和 n 将为每个测试用例在单独的行中为每个测试用例输出相应的输出(p^n)+(q^n) 在单独的行中

一段时间后，我想出了这个复发

```
p^n + q^n = (p^n-1 + q^n-1)(p+q) - pq(p^n-2 + q^n-2)
and in my code i have
a = p + q and b = p.q 
```

这是我的解决方案

```
 public Long computeExponential(int n)
  {
    //base cases
    if(n == 0)
    {
      return 1L;
    }
    else if(n == 1)
    {
      return new Long(a);
    }
    else
    {
        return (a * computeExponential(n-1) - b * computeExponential(n-2));
    } 
```

我用给定的测试用例得到的答案是

```
2125764
4383653
-3
175099
28160 
```

我推导出的公式是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:32:05.220

不，您导出的方程式是正确的。我可以看到您的实现中的一个小错误：

如果`n=0`，`p^0 + q^0 = 1 + 1 = 2`。你`computeExponential`的`n=0`回报`1`。

[编辑]为了将来参考，我发现它非常有帮助，特别是对于复杂的算法，编写我自己的测试用例，特别是对于基本用例、简单用例和异常值，我已经手动计算了结果然后首先运行这些检查我的功能正在做我认为应该做的事情。例如，使用 n=0、p=2、q=3（即 p+q=5、pq=6）测试您的方法会很快引发此错误。只有当它通过我自己的测试用例后，我才会将它提交给其他测试数据，这些数据可能对我有任何意义，也可能没有任何意义。

# google-chrome-extension - 动态替换我的 popup.html

> ID：10869326
> 
> 赞同：3
> 
> 时间：2012-06-03T09:52:30.820
> 
> 标签：google-chrome-extension

当用户单击图标时，我打开了一个 popup.html。popup.html 有一个按钮。如果单击此按钮，我想在关闭当前弹出窗口后显示来自不同 html 文件的另一个弹出窗口。有谁知道该怎么做。（我的按钮上已经有一个监听器。我想知道的只是关闭当前显示的弹出窗口并打开一个新窗口）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T10:18:57.387

您可以使用 innerHTML 动态更新弹出页面

```
 var event_container;
    event_container = document.getElementById('element ID');//Get location of event container
    event_container.innerHTML = event_container.innerHTML + "html string you want to add"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:24:02.753

弹出窗口就像常规选项卡一样，因此`window.location.href="..."`适用于它们。

但是您可以在弹出窗口内简单地弹出一个覆盖和一个全屏 iframe，然后在该窗口上覆盖一个关闭按钮。

```
 <iframe src="http://target.com" style="position:absolute; left:0; top:0; right:0; bottom:0; width:... 
```

很快。

# flash - 比较 HTML5 和 Flash 应用程序之间的性能

> ID：10869334
> 
> 赞同：2
> 
> 时间：2012-06-03T09:53:55.047
> 
> 标签：flash, html

出于研究原因，我构建了“相同”的 HTML5 应用程序和 Flash 应用程序。我需要一种有效的方法（希望是软件）来测试和比较系统性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T10:40:35.670

The easiest way of doing this would be `trace()` in case of Actionscript and `console.log()` in case of HTML5/JS.

You can use `new Date().time` for AS3 and `new Date().getTime()` for JS.

So you can print start time and end time and compare them, or you can 'ask' your application to do the math (`taskTime = endTime - startTime`). The drawback of using `trace` in Flash is that it requires debug version of the player which is a little bit slower than the normal version.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T07:02:26.577

Flash 的统计信息[https://github.com/mrdoob/Hi-ReS-Stats](https://github.com/mrdoob/Hi-ReS-Stats) JS 的统计信息[https://github.com/mrdoob/stats.js/](https://github.com/mrdoob/stats.js/)

不要打扰，Flash 随时更快。

# php - Magento 更改产品页面标题以包含属性

> ID：10869335
> 
> 赞同：6
> 
> 时间：2012-06-03T09:53:57.183
> 
> 标签：php, magento

我有 2 个自定义属性要添加到`<title>`产品页面上的标签中。它们是“品牌”和“字幕”。

我的页面标题最终会是这样的：

$brand." ".$productname." ".$subtitle;

我怎样才能做到这一点？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-03T11:43:07.473

根据您的问题，我假设您指的是更改产品的元标题。

有 3 个选项可供您选择：

1.  浏览每个产品并单独手动更新（或使用电子表格并导入）每个产品元标题。编辑产品时，这些值在管理区域中可用。
2.  重写 Mage_Catalog_Block_Product_View 并覆盖生成此标签的 _prepareLayout() 方法。
3.  使用观察者并挂钩到 catalog_controller_product_view 事件。

您的决定实际上是在选项 2 和 3 之间（这两个选项都需要您创建一个自定义模块来实现）。

在扩展 Magento 核心功能时，我总是尽量不引人注目——所以我会在这里选择选项 3。请参阅下面的代码以获取完整示例：

应用程序/etc/modules/Yourcompany_Yourmodule.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Yourcompany_Yourmodule>
            <active>true</active>
            <codePool>local</codePool>
        </Yourcompany_Yourmodule>
    </modules>
</config> 
```

app/code/local/Yourcompany/Yourmodule/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Yourcompany_Yourmodule>
            <version>1.0.0</version>
        </Yourcompany_Yourmodule>
    </modules>
    <global>
        <models>
            <yourmodule>
                <class>Yourcompany_Yourmodule_Model</class>
            </yourmodule>
        </models>
    </global>
    <frontend>
        <events>
            <catalog_controller_product_view>
                <observers>
                    <yourmodule>
                        <class>Yourcompany_Yourmodule_Model_Observer</class>
                        <method>catalog_controller_product_view</method>
                    </yourmodule>
                </observers>
            </catalog_controller_product_view>
        </events>
    </frontend>
</config> 
```

app/code/local/Yourcompany/Yourmodule/Model/Observer.php

```
<?php

class Yourcompany_Yourmodule_Model_Observer
{
    /**
     * Change product meta title on product view
     *
     * @pram Varien_Event_Observer $observer
     * @return Yourcompany_Yourmodule_Model_Observer
     */
    public function catalog_controller_product_view(Varien_Event_Observer $observer)
    {
        if ($product = $observer->getEvent()->getProduct()) {
            $title = $product->getData('brand') . ' ' . $product->getData('name') . ' ' . $product->getData('sub_title');
            $product->setMetaTitle($title);
        }
        return $this;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-22T12:36:26.393

这是在magento中覆盖产品页面的元逻辑的最简单和最好的方法

复制**/app/code/core/Mage/Catalog/Block/Product/View.php** 到**/app/code/local/Mage/Catalog/Block/Product**

并覆盖**函数 _prepareLayout()**，我的例子如下

```
protected function _prepareLayout()
{
    $this->getLayout()->createBlock('catalog/breadcrumbs');
    $headBlock = $this->getLayout()->getBlock('head');

    if ($headBlock) {
        $product = $this->getProduct();
        $title = $product->getMetaTitle();

        // SEO values start
        $categoryCollection = $product->getCategoryCollection();
        foreach ($categoryCollection as $k) {
            $topCategory = Mage::getModel('catalog/category')->load($k->getId());
            break;
        }
        $brand = $product->getResource()->getAttribute('brand')->getFrontend()->getValue($product);
        $shortDescription = $product->getShortDescription();
        $suffix = Mage::getStoreConfig('design/head/title_suffix');
        // SEO values end

        if (!$title) {
            $title = $product->getName() .' '.$brand. ' - '. $topCategory->getName() . $suffix;
        }

        $headBlock->setTitle($title);

        $keyword = $product->getMetaKeyword();
        $currentCategory = Mage::registry('current_category');
        if ($keyword) {
            $headBlock->setKeywords($keyword);
        } elseif($currentCategory) {
            $headBlock->setKeywords($product->getName());
        }

        $description = $product->getMetaDescription();
        if (!$description) {
            $description = $brand. ' '. $topCategory->getName() .'. '. $shortDescription;
        }
        $headBlock->setDescription( ($description) );

        // var_dump($title);
        // var_dump($description);

        if ($this->helper('catalog/product')->canUseCanonicalTag()) {
            $params = array('_ignore_category'=>true);
            $headBlock->addLinkRel('canonical', $product->getUrlModel()->getUrl($product, $params));
        }
    }

    return parent::_prepareLayout();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:12:32.493

假设您只想更改目录视图页面上的产品标题

在 app/design/frontend/default/{your theme Folder}/template/page/html/head.phtml 你可以

```
<?php if ($_product = Mage::registry('current_product')) { ?>
    <title><?php echo $_product->getData('xyz') . ' ' . $_product->getName(); ?></title>
<?php }else{ ?>
     <title><?php echo $this->getTitle() ?></title>
<?php } ?> 
```

请参阅[获取属性名称和值 Magento](http://www.justwebdevelopment.com/blog/get-attribute-name-and-value-magento/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T11:34:44.373

这是德鲁·亨特回答的补充

magento 将类别名称包含在标题中，因此正确的解决方案是：

```
class Yourcompany_Yourmodule_Model_Observer
{
    /**
     * Change product meta title on product view
     *
     * @pram Varien_Event_Observer $observer
     * @return Yourcompany_Yourmodule_Model_Observer
     */
    public function catalog_controller_product_view(Varien_Event_Observer $observer)
    {
        if ($product = $observer->getEvent()->getProduct()) {
            if ($category) {
                $title = $brand . ' ' . $product->getData('name') . ' - ' . $product->getData('category')->getData('name');
            } else {
                $title = $brand . ' ' . $product->getData('name');
            }
            $product->setMetaTitle($title);
        }
        return $this;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T14:11:54.773

我相信 Drew Hunter 提供了大部分正确答案，但我必须进行一些更改才能使其正常工作（EE，1.14.2.x）：

**在 config.xml 中：**

> 将节点更改`<yourmodule>...</yourmodule>`为 >`<yourcompany_yourmodule>...</yourcompany_yourmodule>`

**在 Observer.php 中：**

> 更改`public function catalog_controller_product_view(Varien_Event_Observer $observer)`为`public function catalog_controller_product_view($observer)`

# php - 我可以将用户 ID 保存在 $_SESSION 变量中吗？

> ID：10869337
> 
> 赞同：3
> 
> 时间：2012-06-03T09:54:05.077
> 
> 标签：php, session, variables

从事非常大的项目并尝试创建最佳的数据库使用率。我听说不建议将用户 ID 保存在 $_SESSION 变量中。我实际上只能使用令牌，这个令牌被分配给数据库中的用户 ID。问题是，如果我只使用令牌，我需要对脚本内的数据库执行 1 次额外操作（查询）。所以问题是，我可以将用户 ID 保存在 $_SESSION 变量中以防止 ectra 数据库操作吗？它可能有多“危险”？

提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T10:00:30.037

是的你可以。会话存储在服务器上，因此与任何其他服务器端存储一样安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T10:05:11.213

我能看到的唯一影响是，有权访问文件系统（php 存储会话数据的地方）的人可以看到当前登录的用户。通常这不应该是一个大秘密 - 有更多有趣的东西在文件系统。如果您使用令牌，则有权访问文件系统的用户也需要有权访问数据库才能获得相同的信息，但通常这通过访问文件系统很容易实现。

也许告诉你这个的人意味着你不应该在 Session 中存储密码？那当然是危险的。

或者他的意思是你不应该在 cookie 中保存用户 ID？

# android - 调度触摸事件

> ID：10869345
> 
> 赞同：0
> 
> 时间：2012-06-03T09:54:53.290
> 
> 标签：android, touch

我有 12 个星座图像，它们放置在 360 度圆形位置。ImageButtons 用于显示 horoSignImages。ImageButton 具有显示 horosSignImage 的按下和未按下状态的选择器。signWheel 使用 gestuer 旋转。

问题是，当我在 horosignImage 上点击以旋转滚轮时，imageButton 会捕获事件，并且在滚动手指时滚轮不会旋转。我想在用户点击它时将图像设置为按下状态，同时如果用户滚动手指，滚轮应该旋转。仅当我在 horosignImage 外部点击并滚动手指时，轮子旋转才有效。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:56:40.353

遗憾的是我没有答案，但您的问题似乎类似于将[触摸事件传递给父视图](https://stackoverflow.com/questions/6374592/passing-touch-events-to-the-parent-view)

在这两种情况下，您都希望由 imageButton 和 signWheel 处理触摸事件。

# android - 我已经以编程方式创建了 Progressbar，现在当在线性布局中可见时，如何将其保持在屏幕中心和其他视图之上？

> ID：10869347
> 
> 赞同：0
> 
> 时间：2012-06-03T09:55:11.090
> 
> 标签：android, android-layout

我已经以编程方式创建了 Progressbar，现在当在 linearlayout 中可见时，如何将它保持在屏幕的中心和其他视图的顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:43:18.080

考虑使用 a`RelativeLayout`而不是 the`LinearLayout`并向您的`ProgressBar`: `centerInParent`= true 添加属性。

覆盖另一个视图下的视图只能在`RelativeLayout`（或`FrameLayout`，但更棘手）中完成

# python - django：找不到名为的模块 .url

> ID：10869349
> 
> 赞同：3
> 
> 时间：2012-06-03T09:55:16.433
> 
> 标签：python, django, wsgi

我目前正在尝试使用 django 开发一个相当简单的应用程序，但我一开始就卡住了：我的项目名为“kundencenter”，我的应用程序是“customermgr”。

项目和应用程序都有一个`urls.py`，项目`urls.py`包括应用程序的：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^customer/', include('kundencenter.customermgr.urls')),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

但是当我现在尝试访问时`customer/`，我会看到一个`ImportError`：

```
Django Version: 1.4
Exception Type: ImportError
Exception Value:    
No module named customermgr.urls
Exception Location: /usr/local/lib/python2.7/dist-packages/django/utils/importlib.py in import_module, line 35
Python Executable:  /usr/bin/python
Python Version: 2.7.1
Python Path:    
    ['/usr/lib/python2.7',
     '/usr/lib/python2.7/plat-linux2',
     '/usr/lib/python2.7/lib-tk',
     '/usr/lib/python2.7/lib-old',
     '/usr/lib/python2.7/lib-dynload',
     '/usr/local/lib/python2.7/dist-packages',
     '/usr/lib/python2.7/dist-packages',
     '/usr/lib/python2.7/dist-packages/PIL',
     '/usr/lib/python2.7/dist-packages/gtk-2.0',
     '/usr/lib/pymodules/python2.7',
     '.',
     '/var/www/kundencenter',
     '/var/www'] 
```

如您所见，我已经对 . 发疯了`PYTHONPATH`，但无济于事。正如您可能已经猜到的那样，该项目位于`/var/www/kundencenter`. 我还检查了`__init__.py`文件是否已创建，它们是（它们是空的）。当我运行`manage.py runserver`并使用带有 mod_wsgi 的 Apache 时出现错误。

我的智慧已经走到了尽头。有谁知道我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:14:13.640

您是否尝试过不使用项目名称？

```
url(r'^customer/', include('customermgr.urls')), 
```

代替

```
url(r'^customer/', include('kundencenter.customermgr.urls')), 
```

顺便说一句，如果不是这种情况，请以尽可能最短的路径导入您的模型（或其他所有内容）。如果您在同一个应用程序中导入模型，只需使用“从模型导入 X、Y、Z”。

如果您必须从任何其他应用程序导入模型、函数、类等，请使用“from my_other_app.models import X,Y,Z”，但切勿包含您的项目名称。

如果有一天，您想为另一个 django 项目回收您的应用程序，它会为您省去一些痛苦:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:10:52.560

您应该使用 PIP 在虚拟环境下构建所有内容，包括安装 Django 和您需要的所有其他模块/库。那你就不用担心弄乱 Python 路径了。尝试用谷歌搜索 Python+Django+Virtualenv+PIP 并阅读一些推荐的设置。它**确实****简化**了整个安装和配置过程，而且一切都是独立的，您可以使用 Fabric 或其他一些部署工具轻松部署。

祝你好运，我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:42:46.053

您可能在 Python 模块搜索路径的其他位置安装了一个模块/包，该路径与首先被拾取的名称相同。

在 WSGI 脚本文件的开头添加：

```
import kundencenter
print kundencenter.__file__ 
```

看看它是从哪里捡来的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T12:10:18.367

将您的 PYTHONPATH 设置为：

```
['/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/pymodules/python2.7',
 '/var/www/kundencenter'] 
```

和 urlpatterns 到：

```
urlpatterns = patterns('',
    url(r'^customer/', include('customermgr.urls')),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

我不知道你的目录结构是什么，所以这是我最好的方法。

# html - 即使同一个表格中的文本更长，也限制元素的高度

> ID：10869350
> 
> 赞同：0
> 
> 时间：2012-06-03T09:55:17.017
> 
> 标签：html, html-table, row, mybb

所以这就是我所拥有的。 [http://www.welivetech.net/showthread.php?tid=62&pid=131#pid131](http://www.welivetech.net/showthread.php?tid=62&pid=131#pid131)

正如您从线程中的大多数帖子（前三个）中看到的那样，postbit（里面有头像的蓝色框）看起来不错。

但是，由于帖子内容较长，第四个帖子位被垂直拉长。

即使有大量文本，如何保持 postbit 大小相同？相信我，我现在已经尝试了大约 2 个小时...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:02:45.587

您需要在您的头像**TD中使用****DIV**，并且此**DIV**必须设置为您当前的蓝色**TD**。**TD**将扮演透明容器的角色

 ******让我们解释一下。现在你有：

```
<tr>
  <td class="avatar"><!-- Avatar block here --></td>
  <td>Post text</td>
</tr> 
```

您需要：

```
<tr>
  <td class="container">
    <div class="Avatar><!-- Avatar block here --></td>
  </td>
  <td>Post text</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:27:22.753

您是否尝试过溢出：滚动？像：

```
.some_css_class {
  height: 100px; 
  overflow: scroll;
} 
```

在我的示例中，如果内容高于 100px，它将保持高度并使元素可滚动。******

# c++ - 无法将 BOTAN 库与 eclipse 链接

> ID：10869351
> 
> 赞同：0
> 
> 时间：2012-06-03T09:56:03.087
> 
> 标签：c++, eclipse, linker, g++, shared-libraries

我已经安装并构建了[BOTAN](http://botan.randombit.net/index.html)密码库。

`/usr/local/lib`一切似乎都已正确安装，因为我在目录中有以下条目：

```
-rw-r--r-- 1 root root   7676350 2012-06-03 11:01 libbotan-1.10.a
lrwxrwxrwx 1 root root        20 2012-06-03 11:01 libbotan-1.10.so -> libbotan-1.10.so.0.1
lrwxrwxrwx 1 root root        20 2012-06-03 11:01 libbotan-1.10.so.0 -> libbotan-1.10.so.0.1
-rwxr-xr-x 1 root root   3396354 2012-06-03 11:01 libbotan-1.10.so.0.1 
```

还有`/usr/local/include`一个：

```
drwxr-xr-x  3 root root  4096 2012-06-03 11:01 botan-1.10 
```

最终，我设法将这些库包含在我的程序主体中，并毫无错误地编写代码。

但是，当构建我的项目（在 Eclipse Indigo 上）时，我在控制台上得到以下输出，红色`stderr`时尚：

```
error while loading shared libraries: libbotan-1.10.so.0: cannot open shared object file: No such file or directory 
```

我试图执行的代码如下：

```
try
{
    cout << "In try" << endl;
    Botan::LibraryInitializer init;
}catch(std::exception& e)
{
    cout << "In catch" << endl;
    cerr << e.what() << endl;
} 
```

我有以下疑问：

1.  是链接器的问题吗？（如果是，为什么链接器不抛出错误，而是标准错误？）

2.  如果没有，我怎样才能让我的程序找到`libbotan-1.10.so.0`实际存在的文件？（在`/usr/local/lib`）。

请注意，我的环境变量`$LD_LIBRARY_PATH`当前已设置，并且具有以下值：

```
$> echo $LD_LIBRARY_PATH
$> /usr/local/lib/ 
```

* * *

**编译器命令行：**

调用：GCC C++ 编译器

```
g++ -I/usr/include/c++/4.5.2 -I/usr/local/include/botan-1.10 -O3 -g3 -Wall -c -fmessage-length=0 -std=c++0x -v -MMD -MP -MF"mainOobClient.d" -MT"mainOobClient.d" -o "mainOobClient.o" "../mainOobClient.cpp"

g++ -I/usr/include/c++/4.5.2 -I/usr/local/include/botan-1.10 -O3 -g3 -Wall -c -fmessage-length=0 -std=c++0x -v -MMD -MP -MF"oobClientClass.d" -MT"oobClientClass.d" -o "oobClientClass.o" "../oobClientClass.cpp" 
```

调用：GCC C++ 链接器

```
g++ -L/usr/local/lib -o  "MTVS_oobClient"  ./mainOobClient.o ./oobClientClass.o   -lbotan-1.10 
```

* * *

**完整的构建输出：**

```
Build of configuration Debug for project MTVS_oobClient

make all 
Building file: ../mainOobClient.cpp
Invoking: GCC C++ Compiler
g++ -I/usr/include/c++/4.5.2 -I/usr/local/include/botan-1.10 -O3 -g3 -Wall -c -fmessage-length=0 -std=c++0x -v -MMD -MP -MF"mainOobClient.d" -MT"mainOobClient.d" -o "mainOobClient.o" "../mainOobClient.cpp"
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.5.2-8ubuntu4' --with-bugurl=file:///usr/share/doc/gcc-4.5/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.5 --enable-shared --enable-multiarch --with-multiarch-defaults=i386-linux-gnu --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib/i386-linux-gnu --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.5 --libdir=/usr/lib/i386-linux-gnu --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-gold --enable-ld=default --with-plugin-ld=ld.gold --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.5.2 (Ubuntu/Linaro 4.5.2-8ubuntu4) 
Finished building: ../mainOobClient.cpp

Building file: ../oobClientClass.cpp
Invoking: GCC C++ Compiler
g++ -I/usr/include/c++/4.5.2 -I/usr/local/include/botan-1.10 -O3 -g3 -Wall -c -fmessage-length=0 -std=c++0x -v -MMD -MP -MF"oobClientClass.d" -MT"oobClientClass.d" -o "oobClientClass.o" "../oobClientClass.cpp"
COLLECT_GCC_OPTIONS='-I/usr/include/c++/4.5.2' '-I/usr/local/include/botan-1.10' '-O3' '-g3' '-Wall' '-c' '-fmessage-length=0' '-std=c++0x' '-v' '-MMD' '-MP' '-MFmainOobClient.d' '-MTmainOobClient.d' '-o' 'mainOobClient.o' '-shared-libgcc' '-mtune=generic' '-march=i686'
 /usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/cc1plus -quiet -v -I/usr/include/c++/4.5.2 -I/usr/local/include/botan-1.10 -MMD mainOobClient.d -MFmainOobClient.d -MP -MTmainOobClient.d -MQ mainOobClient.o -dD -D_GNU_SOURCE ../mainOobClient.cpp -D_FORTIFY_SOURCE=2 -quiet -dumpbase mainOobClient.cpp -mtune=generic -march=i686 -auxbase-strip mainOobClient.o -g3 -O3 -Wall -std=c++0x -version -fmessage-length=0 -fstack-protector -o /tmp/ccLIYQkV.s
Finished building: ../oobClientClass.cpp
GNU C++ (Ubuntu/Linaro 4.5.2-8ubuntu4) version 4.5.2 (i686-linux-gnu)

Building target: MTVS_oobClient
Invoking: GCC C++ Linker
g++  ./mainOobClient.o ./oobClientClass.o   -lbotan-1.10 -L/usr/local/lib -o  "MTVS_oobClient"
    compiled by GNU C version 4.5.2, GMP version 4.3.2, MPFR version 3.0.0-p8, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "/usr/local/include/i386-linux-gnu"
ignoring nonexistent directory "/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/../../../../../i686-linux-gnu/include"
ignoring duplicate directory "/usr/include/c++/4.5.2"
  as it is a non-system directory that duplicates a system directory
Finished building target: MTVS_oobClient
#include "..." search starts here:
#include <...> search starts here:
 /usr/local/include/botan-1.10

 /usr/include/c++/4.5
 /usr/include/c++/4.5/i686-linux-gnu
 /usr/include/c++/4.5/backward
 /usr/local/include
 /usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/include
 /usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/include-fixed
 /usr/include/i386-linux-gnu
 /usr/include
End of search list.
GNU C++ (Ubuntu/Linaro 4.5.2-8ubuntu4) version 4.5.2 (i686-linux-gnu)
    compiled by GNU C version 4.5.2, GMP version 4.3.2, MPFR version 3.0.0-p8, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 0c5cb630517b5952f4898dfa56d7e8e5
COLLECT_GCC_OPTIONS='-I/usr/include/c++/4.5.2' '-I/usr/local/include/botan-1.10' '-O3' '-g3' '-Wall' '-c' '-fmessage-length=0' '-std=c++0x' '-v' '-MMD' '-MP' '-MFmainOobClient.d' '-MTmainOobClient.d' '-o' 'mainOobClient.o' '-shared-libgcc' '-mtune=generic' '-march=i686'
 as -V -Qy --32 -o mainOobClient.o /tmp/ccLIYQkV.s
GNU assembler version 2.21.0 (i686-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.21.0.20110327
COMPILER_PATH=/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/
LIBRARY_PATH=/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/../../../:/lib/:/usr/lib/:/usr/lib/i386-linux-gnu/
COLLECT_GCC_OPTIONS='-I/usr/include/c++/4.5.2' '-I/usr/local/include/botan-1.10' '-O3' '-g3' '-Wall' '-c' '-fmessage-length=0' '-std=c++0x' '-v' '-MMD' '-MP' '-MFmainOobClient.d' '-MTmainOobClient.d' '-o' 'mainOobClient.o' '-shared-libgcc' '-mtune=generic' '-march=i686'
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.5.2-8ubuntu4' --with-bugurl=file:///usr/share/doc/gcc-4.5/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.5 --enable-shared --enable-multiarch --with-multiarch-defaults=i386-linux-gnu --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib/i386-linux-gnu --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.5 --libdir=/usr/lib/i386-linux-gnu --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-gold --enable-ld=default --with-plugin-ld=ld.gold --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.5.2 (Ubuntu/Linaro 4.5.2-8ubuntu4) 
COLLECT_GCC_OPTIONS='-I/usr/include/c++/4.5.2' '-I/usr/local/include/botan-1.10' '-O3' '-g3' '-Wall' '-c' '-fmessage-length=0' '-std=c++0x' '-v' '-MMD' '-MP' '-MFoobClientClass.d' '-MToobClientClass.d' '-o' 'oobClientClass.o' '-shared-libgcc' '-mtune=generic' '-march=i686'
 /usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/cc1plus -quiet -v -I/usr/include/c++/4.5.2 -I/usr/local/include/botan-1.10 -MMD oobClientClass.d -MFoobClientClass.d -MP -MToobClientClass.d -MQ oobClientClass.o -dD -D_GNU_SOURCE ../oobClientClass.cpp -D_FORTIFY_SOURCE=2 -quiet -dumpbase oobClientClass.cpp -mtune=generic -march=i686 -auxbase-strip oobClientClass.o -g3 -O3 -Wall -std=c++0x -version -fmessage-length=0 -fstack-protector -o /tmp/ccTuqeWw.s
GNU C++ (Ubuntu/Linaro 4.5.2-8ubuntu4) version 4.5.2 (i686-linux-gnu)
    compiled by GNU C version 4.5.2, GMP version 4.3.2, MPFR version 3.0.0-p8, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "/usr/local/include/i386-linux-gnu"
ignoring nonexistent directory "/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/../../../../../i686-linux-gnu/include"
ignoring duplicate directory "/usr/include/c++/4.5.2"
  as it is a non-system directory that duplicates a system directory
#include "..." search starts here:
#include <...> search starts here:
 /usr/local/include/botan-1.10
 /usr/include/c++/4.5
 /usr/include/c++/4.5/i686-linux-gnu
 /usr/include/c++/4.5/backward
 /usr/local/include
 /usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/include
 /usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/include-fixed
 /usr/include/i386-linux-gnu
 /usr/include
End of search list.
GNU C++ (Ubuntu/Linaro 4.5.2-8ubuntu4) version 4.5.2 (i686-linux-gnu)
    compiled by GNU C version 4.5.2, GMP version 4.3.2, MPFR version 3.0.0-p8, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 0c5cb630517b5952f4898dfa56d7e8e5
../oobClientClass.cpp: In member function ‘void oobClientClass::authenticateTransaction()’:
../oobClientClass.cpp:126:29: warning: ignoring return value of ‘int scanf(const char*, ...)’, declared with attribute warn_unused_result
../oobClientClass.cpp:164:63: warning: ignoring return value of ‘ssize_t write(int, const void*, size_t)’, declared with attribute warn_unused_result
../oobClientClass.cpp:59:6: warning: ‘confirmationChoice’ may be used uninitialized in this function
COLLECT_GCC_OPTIONS='-I/usr/include/c++/4.5.2' '-I/usr/local/include/botan-1.10' '-O3' '-g3' '-Wall' '-c' '-fmessage-length=0' '-std=c++0x' '-v' '-MMD' '-MP' '-MFoobClientClass.d' '-MToobClientClass.d' '-o' 'oobClientClass.o' '-shared-libgcc' '-mtune=generic' '-march=i686'
 as -V -Qy --32 -o oobClientClass.o /tmp/ccTuqeWw.s
GNU assembler version 2.21.0 (i686-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.21.0.20110327
COMPILER_PATH=/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/
LIBRARY_PATH=/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2/../../../:/lib/:/usr/lib/:/usr/lib/i386-linux-gnu/
COLLECT_GCC_OPTIONS='-I/usr/include/c++/4.5.2' '-I/usr/local/include/botan-1.10' '-O3' '-g3' '-Wall' '-c' '-fmessage-length=0' '-std=c++0x' '-v' '-MMD' '-MP' '-MFoobClientClass.d' '-MToobClientClass.d' '-o' 'oobClientClass.o' '-shared-libgcc' '-mtune=generic' '-march=i686'

**** Build Finished **** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:50:07.630

错误出现在运行时。您需要在构建时指定二进制文件的 rpath - 您有：

```
-L/usr/local/lib 
```

您还需要：

```
-Wl,-rpath=/usr/local/lib 
```

这指示`ld`在运行时尝试查找库时使用此路径。您`LD_LIBRARY_PATH`可能已被 eclipse 的启动器覆盖，这就是未使用该变量的原因。

备择方案：

确保它`/usr/local/lib`位于`/etc/ld.so.conf`, 并且`ldconfig`在安装库后已运行。

使用命令行链接到 .a：

```
g++ -o  "MTVS_oobClient"  ./mainOobClient.o ./oobClientClass.o -L/usr/local/lib -Wl,-Bstatic -lbotan-1.10 -Wl,-Bdynamic 
```

或使用：

```
g++ -o  "MTVS_oobClient"  ./mainOobClient.o ./oobClientClass.o /usr/local/lib/libbotan-1.10.a 
```

...两者都应该具有相同的效果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:18:38.233

由于程序构建正确结束，很明显这是一个运行时问题，因为程序找不到共享库。

[由于另一个SO question](https://stackoverflow.com/questions/4754633/linux-program-cant-find-shared-library-at-run-time)，我寻找了具有相同运行时问题的其他人并找到了解决方案（我将简要总结一下）。

我所做的是构建动态链接的可执行文件，它希望`libbotan-1.10.so.0`在执行时被链接。构建阶段的链接是使用命令行选项完成的`-L/usr/local/lib`。

有几个选项可以让`botan`（或任何其他库）在运行时可用：

*   在（或或）`botan`中列出的目录中创建符号链接`/etc/ld.so.conf``/lib``/usr/lib`
*   复制`botan`到`/etc/ld.so.conf`（或`/lib`或`/usr/lib`）中列出的目录（默认）
*   添加包含`botan`到的目录`/etc/ld.so.conf`
*   `LD_LIBRARY_PATH=/usr/local/lib`在运行可执行文件之前设置。
*   静态重新编译程序。（它会工作，但不要打扰。）

在前 3 个中的任何一个之后，**重新运行`ldconfig`**以更新链接器缓存。（然后您可以运行`ldconfig -v`以验证它是否可解析。）

请注意，这些不是步骤，它们是选项。你只需要做其中的1个。

更新链接器缓存`ldconfig`使其对我有用。

# ios - 为什么启用 userlocation 时不调用 MKMapView 的 mapView:viewForOverlay:？

> ID：10869356
> 
> 赞同：2
> 
> 时间：2012-06-03T09:56:41.010
> 
> 标签：ios, delegates, mapkit, mkoverlay, userlocation

我在 MKMapView 中添加了一些 MKPolygons，MKMapView 可以很好地显示它们。如果我现在为此 MKMapView 启用 userLocation 并且用户授予其位置的权限，则不会调用任何委托，也不会绘制覆盖。在下一个 viewDidLoad 之后，代表再次正常工作并显示所有叠加层。

因此，如果要求用户授予其位置的权限，问题似乎只会出现。

我希望有人对这种奇怪的行为有解释/解决方案，谢谢。

**更新**

正如我发现的那样，它与用户位置无关。不知何故，MKMapView 没有调用它的代表来绘制覆盖，但只有当它是第一个应用程序启动期间的初始视图时。之后一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:04:35.043

只需将设置代码移动到它自己的方法中，然后从`viewDidLoad`和其中一个用户跟踪委托方法（如`mapView:didChangeUserTrackingMode:animated:`or ）中调用它`mapViewWillStartLocatingUser:`。

# html - 放置在后台时在 html5 画布上捕获鼠标事件

> ID：10869357
> 
> 赞同：1
> 
> 时间：2012-06-03T09:56:48.487
> 
> 标签：html, canvas

我使用以下 style="position:fixed;top:0;left:0;z-index:-1;" 将 html5 画布放置在背景中

在我的 window.onload() 上，我向画布添加了一个鼠标事件侦听器，如下所示 canvas.addEventListener('mousemove', onMouseMove, false) 但不幸的是我的画布没有接收到任何鼠标事件。如何沿 z 轴传播事件？是否可以在不使用任何外部库（如果存在）的情况下做到这一点？

我试图搜索它，但到目前为止找不到任何相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:00:54.250

您想将 mousemove 事件从非固定元素“冒泡”到具有不同父元素的固定元素吗？我认为您必须自己检查和触发：

为非固定元素构建一个包装器。这也获得了一个 mousemove 事件侦听器。如果 mousemove 在固定元素上（检查 clientX 和 clientY），则在固定元素上触发 mousemove 事件。

例如用 Firefox 测试：

```
function onCanvasMouseMove(oEvent) {
    console.log(oEvent);
}

// wrapper mousemove handler: 
// if the mouse is over the canvas, trigger mousemove event on it.
function onWrapperMouseMove(oEvent) {
    if (
        oEvent.clientX <= oCanvas.offsetWidth
        && oEvent.clientY <= oCanvas.offsetHeight
    ) {
        oEvent.stopPropagation();
        var oNewEvent = document.createEvent("MouseEvents");
        oNewEvent.initMouseEvent("mousemove", true, true, window, 0, oEvent.screenX, oEvent.screenY, oEvent.clientX, oEvent.clientY, false, false, false, false, 0, null);
        oCanvas.dispatchEvent(oNewEvent);
    }
}

var oCanvas;

window.onload = function() {
    oCanvas = document.getElementById('canvas');
    oCanvas.addEventListener('mousemove', onCanvasMouseMove, false);
    // add mousemove listener to none-fixed wrapper
    var oWrapper = document.getElementById('wrapper');
    oWrapper.addEventListener('mousemove', onWrapperMouseMove, false);
}; 
```

另请参阅[此示例](http://jsfiddle.net/JUUZE/)。

Ps：冒泡不是正确的词，它通常意味着将事件冒泡到父元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:59:06.247

您可以尝试将叠加元素设置为，[`pointer-events: none`](https://developer.mozilla.org/en/CSS/pointer-events)但这仅适用于 Firefox、Chrome 和 Safari。如果有一些元素和鼠标事件在点击`canvas`.

# ios - NSLocale 类中 – displayNameForKey:value: 和 – objectForKey: 之间的区别

> ID：10869358
> 
> 赞同：0
> 
> 时间：2012-06-03T09:56:51.437
> 
> 标签：ios, nslocale

您好，只是一个简单的问题，在 NSLocale 类中 – displayNameForKey:value: 和 – objectForKey: 有什么区别？我在网上搜索但没有得到它。谢谢你。

[苹果文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)

```
displayNameForKey:value:
Returns the display name for the given value.

- (NSString *)displayNameForKey:(id)key value:(id)value
Parameters
key
Specifies which of the locale property keys value is (see “Constants”),
value
A value for key.
Return Value
The display name for value.

objectForKey:
Returns the object corresponding to the specified key.

- (id)objectForKey:(id)key
Parameters
key
The key for which to return the corresponding value. For valid values of key, see “Constants.”
Return Value
The object corresponding to key. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T22:16:36.640

您使用 displayNameForKey:value: 根据您正在调用的语言环境对象获取适合显示的标签。例如：

```
NSLocale *french = [[[NSLocale alloc] initWithLocaleIdentifier:@"fr_FR"] autorelease];
NSString *frenchName = [french displayNameForKey:NSLocaleIdentifier value:@"fr_FR"];

NSLocale *english = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease];
NSString *englishName = [english  displayNameForKey:NSLocaleIdentifier value:@"fr_FR"];

NSLog(@"French locale in French is called '%@'", frenchName);
NSLog(@"French locale in English is called '%@'", englishName); 
```

将产生输出：

**法语中的法语语言环境称为“français (France)”
英语中的法语语言环境称为“French (France)”**

[NSLocale 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)中有很多示例。

# super - 计算 pi 到百万位。

> ID：10869359
> 
> 赞同：0
> 
> 时间：2012-06-03T09:58:15.183
> 
> 标签：super, pi, digit

将 PI 计算到数百万位是检查 CPU 稳定性和性能的一种方法，尤其是在超频之后。我正在尝试自己编写这段代码，基本上它所做的一切都是将计算机 PI 精确到百万位并返回这样做所花费的时间。我对此进行了很多研究，发现了不同的方程，但不知道哪个是最有效的计算方法。您能否向我提供最好的想法，如果可能的话，请提供代码或如何做到这一点的步骤。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:59:38.380

如果您只是想测试您的 CPU，那么您不需要有效的方法。只需实现一种算法并完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:26:05.357

请注意，任何 CPU 都包含不同的子单元，它们或多或少地相互连接。

您将希望同时对尽可能多的子单元进行老化测试。

具体来说，您的代码可能需要包括：

*   适当字长的整数计算（32/64 位）
*   浮点计算
*   SIMD 操作
*   高速缓存使用量大
*   大量内存总线使用

另外：当前的 CPU 有多个内核，因此您需要让所有这些内核保持忙碌状态。需要多线程或多个进程。

只有在 CPU 的所有单元（“最坏情况”）上加载负载时，您才能获得关于其稳定性的可靠结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:08:58.143

在 Macsyma 中：

```
py(x) := if equal(6, 6+x^2) then 2*x else (py(x:x/3), 3*%%-4*(%%-x)^3); py(3.);py(dfloat(%)); block([bfprecision:35], py(bfloat(%))) 
```

其中 x 是您的数字的索引。（这来自 OEIS [http://oeis.org/A000796](http://oeis.org/A000796)）

# android - 进程被杀死时的Android活动堆栈依赖关系

> ID：10869362
> 
> 赞同：2
> 
> 时间：2012-06-03T09:58:30.050
> 
> 标签：android, process, android-activity, lifecycle

假设有一个`Activity A1`of`Process P1`和`Activity A1`launch `Activity A2`of `Process P2`。Activity A2 将需要处理很多使系统不得不为 RAM 杀死 P1 的事情。我想知道会发生什么。

正如我现在所看到的，如果我在启动后强制终止`Process P1`，`Application Manager`当`Activity A2`我退出设置屏幕时，Activity A2 也消失了。

在我点击“强制停止”按钮之前，活动堆栈如下所示：

```
Home -> A1 -> A2 -> Settings -> Apps -> App info(of P1) 
```

我打了之后，好像会是这个样子：

```
Home -> Settings -> Apps -> App info 
```

虽然我只杀死了 A1 的进程，但 A2 也被破坏了。

一切顺利。我想没有人希望 A1 被摧毁时 A2 还活着。但是我想知道在 A1 被杀死后 A2 是否有可能还活着，我的程序必须研究这种情况：

```
Home -> A2 
```

当 A2 完成后，将创建 A1 以接受来自 A2 的结果。

* * *

做了一些更多的“研究”。如果 A1 启动 A2，并且当内存不足时，4.0.3 模拟器将杀死 P2 而不是 P1。即 A2 将被关闭，即使它是前台活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:56:36.193

Activity 启动时保存在 Back-Stack 中，浏览过的每个 Activity 都保存在此堆栈中，finish() 方法可用于在移动到另一个 Activity 时杀死该 Activity，因此同一 Activity 的另一个实例是当冲浪回到相同的活动时，不会再次推入堆栈。

例如：

```
A1             ---->            A2            ----->             A3 
```

A1 的第一个实例进入后台堆栈
A2 的
第一个实例进入后台堆栈 A3 的第一个实例进入后台堆栈

```
A1             <----            A2            <-----            A3 
```

A1 的第二个实例进入后台堆栈
A2 的
第二个实例进入后台堆栈 A3 的第二个实例进入后台堆栈

所以当你不使用finish()方法时，杀死A1是不可能杀死A2的。A2 在堆栈中存活。

# facebook - 如何循环抛出一个以上的请求ID？

> ID：10869364
> 
> 赞同：0
> 
> 时间：2012-06-03T09:59:16.510
> 
> 标签：facebook, facebook-graph-api, fbml, facebook-javascript-sdk

这种方法是否贬值？

```
FB.api("/?ids=" + response.request_ids, callback); 
```

它以前可以工作，但现在不行了。

我想从使用 JavaScript 收到的所有 requestId 中获取所有数据。

对于一个 requestId，此方法运行良好：

```
FB.api('/' + requestId, function (response) 
```

但是如果我有更多的一个 requestId 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:22:31.953

尝试查询 /me/apprequests 。[https://developers.facebook.com/tools/explorer?method=GET&path=me%2Fapprequests](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Fapprequests)

# php - 在不使用 javascript 的情况下对用户事件执行 php 函数

> ID：10869368
> 
> 赞同：2
> 
> 时间：2012-06-03T10:00:05.820
> 
> 标签：php

我假设答案是：“这是不可能的，因为 php 是服务器语言而不是客户端语言”，但我希望比我更专家的人来说明这一点并最终列出所有可能的解决方法......

**问题：当用户在****不**使用任何javascript的情况下在html 页面中“单击”或执行某种其他类型的操作（例如鼠标悬停）时，是否（完全）可以（仅）执行一个php 函数？

（PS 作为一种解决方法，我考虑访问包含要在客户端操作发生时执行的 php 代码的中间页面，然后根据需要进行重定向，但就传递 php 代码的结果而言，这并不简单。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:16:54.410

一般来说没有。我可能想到的关于鼠标悬停的唯一解决方法是一个小的 1x1 透明背景图像，它由 PHP 脚本生成，并且仅在用户将鼠标悬停在某个元素上时才会显示。

html:

```
<div id="mouseover_php">execute php</div> 
```

CSS：

```
#mouseover_php:hover {
    background-image:url(/path/to/php-script)
} 
```

php:

```
<?php
   // your code
   // set http headers to correct content type and to disable caching
   // output 1x1 pixel transparent image 
```

但是由于所有现代浏览器都使用预取和缓存（尽管这可能会受到[设置 Cache Control 标头的](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Avoiding_caching)影响），我当然不会将其作为鼠标悬停事件的毫无疑问的指标。因此，如果有的话，这将是一个非常不干净的黑客攻击。

关于点击：这里唯一可能的方法是加载一个中间页面，就像你建议的那样。就我而言，没有 AJAX 就无法实现这一目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:03:51.177

如果不提出新请求，这是不可能的。

您必须使用链接将用户发送到新页面（或同一页面——只要发出新请求即可），或者您必须使用 AJAX 之类的东西。

* * *

实际上，我能想到一种非常 hack-ish 的方式。它并不完全漂亮，但它应该可以工作。

您可以使用 iframe 作为链接的目标。基本上，它不会在同一窗口或新窗口中打开链接，而是在隐藏的 iframe 中打开。

未经测试，但在理论上：

```
<iframe name="testframe" id="testframe"></iframe>
<a href="http://google.com" target="testframe">Test</a> 
```

编辑：经过一些粗略的测试，看起来 chrome 不会遵守这一点。不过，IE9 似乎会在某种程度上。

# vb.net - 根据第一个组合框过滤其他组合框

> ID：10869370
> 
> 赞同：-1
> 
> 时间：2012-06-03T10:00:22.500
> 
> 标签：vb.net

如何过滤基于第一个组合框的其他组合框，该组合框与其他组合框具有相同的数据。

我正在使用 Visual Basic 2010 和一个与代码连接的 ms access 数据库。在 vb 表单上，我有五个组合框，所有组合框都使用以下代码填充相同的数据：

私有子负载主体（）

```
 Dim OleDBC As New OleDbCommand
    Dim OleDBDR As OleDbDataReader
    With OleDBC
        .Connection = conn
        .CommandText = "SELECT subject FROM tblsubjectBA"
    End With
    OleDBDR = OleDBC.ExecuteReader
    cmbsub1.Items.Clear()
    cmbsub2.Items.Clear()
    cmbsub3.Items.Clear()
    cmbsub4.Items.Clear()
    If OleDBDR.HasRows Then
        While OleDBDR.Read
            cmbsub1.Items.Add(OleDBDR.Item(0))
            cmbsub2.Items.Add(OleDBDR.Item(0))
            cmbsub3.Items.Add(OleDBDR.Item(0))
            cmbsub4.Items.Add(OleDBDR.Item(0))
        End While
    End If
End Sub 
```

数据为“美国”“俄罗斯”“中国”“印度”“非洲”“欧洲”

现在我想创建一个可以过滤其他commoboxes的代码，即；

如果我从 5 的列表中选择“印度”，如 combobox1 中提到的，那么其他 4 个组合框不得在列表中显示“印度”

然后

如果我从 4 个列表中选择“欧洲”，因为在组合框 1 中已经选择了 1 个名称，那么其他 3 个组合框不得在列表中显示“印度”和“欧洲”

所有组合框都应遵循相同的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:04:54.653

我不熟悉visual basic，但是您应该为所有组合框实现一个选择更改事件，并在选择更改时从其他组合框中删除相应的元素，并添加不再过滤掉的元素。这是一个快速而肮脏的解决方案，但应该可以。

# c# - 模板结构内的模板结构

> ID：10869373
> 
> 赞同：0
> 
> 时间：2012-06-03T10:00:56.857
> 
> 标签：c#, struct

我有一个看起来像这样的结构：

```
public struct Pair<T,U> {
    public readonly T Fst;
    public readonly U Snd;

    public Pair(T fst, U snd) {
        this.Fst = fst;
        this.Snd = snd;
    }

    public override String ToString() {
        return "(" + Fst +", " + Snd + ")";
    }
} 
```

现在我需要声明一个类型的变量“约会” `Pair<Pair<int,int>, String>`。

1.  我该如何初始化它？
2.  我如何访问约会.Fst.Snd？（它的类型应该是int）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:13:42.377

我不确定问题出在哪里。这不行吗？

```
Pair<Pair<int, int>, string> s = new Pair<Pair<int, int>, string>(new Pair<int, int>(5, 10), "hello");
 Console.WriteLine(s.Fst.Snd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:10:40.660

初始化可以这样完成

```
Pair<Pair<int, int>, String> appt = new Pair<Pair<int, int>, string>(new Pair<int,int>(1,3),"test"); 
```

然后您可以访问：

```
appt.Fst; // type pair<int,int>
appt.Snd; // type string
appt.Fst.Snd; // type int 
```

# java - 如何在 JOptionPane 中打印数组？

> ID：10869374
> 
> 赞同：0
> 
> 时间：2012-06-03T10:01:05.347
> 
> 标签：java, arrays, swing, joptionpane

例如，我有一个 int 类型和大小为 3 的数组，它有元素 1、2、3 当我尝试`JOptionPane`使用循环打印它时，它会生成三个不同的窗格。

当我尝试：

```
JOptionPane.showMessageDialog( null, array ); 
```

它提供垃圾值。

我到处搜索，但找不到解决方案。如何在选项窗格中显示阵列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T10:15:15.790

```
// Wrap the list in a JScrollPane if 'size matters'.
JOptionPane.showMessageDialog(null, new JList(array)); 
```

例如

![使用 JList](../Images/2296d8626dcc512d5d1e6800715bac67.png)

```
import javax.swing.*;

public class ArrayDisplay {

    public static void main(String[] args) {
        final String[] array = {
                "JList",
                "JTable for 2D array",
                "HTML in JLabel",
                "Delimited String in JLabel"
        };
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JOptionPane.showMessageDialog(null, new JList(array));
            }
        });
    }
} 
```

（关于数组`toString()`）

> 它提供垃圾值。

晦涩难懂，是的——垃圾，不。AFAIU 它是对内存中数组的引用。

> ..我有一个 int 类型的数组

请注意，`JList`数组构造函数需要对象，因此它需要`Integer`而不是`int`. 要转换`int[]`为`Integer[]`：

```
import javax.swing.*;

public class ArrayDisplay {

    public static void main(String[] args) {
        int[] arrayPrimitive = {1,2,3};
        final Integer[] array = new Integer[arrayPrimitive.length];
        for (int ii=0; ii<arrayPrimitive.length; ii++) {
            array[ii] = arrayPrimitive[ii];
        }
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                JOptionPane.showMessageDialog( null, new JList(array) );
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T10:03:55.087

尝试使用[`Arrays.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString(int[]))：

```
JOptionPane.showMessageDialog( null, Arrays.toString(array)); 
```

Java 中数组的默认`toString()`方法打印，如您所说，*垃圾值*。

# 也可以看看

*   [打印 Java 数组的最简单方法是什么？](https://stackoverflow.com/q/409784/605744)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T10:07:12.497

你可以试试这个：

```
StringBuilder builder = new StringBuilder(array.length);
for (int i=0;i<array.length;builder.append(array[i++])) builder.append("\n");
JOptionPane.showMessageDialog(null, builder.toString(), "Printing results", JOptionPane.INFORMATION_MESSAGE); 
```

使用的原因`StringBuilder`是它不会为您制作不同的窗格。如果您只是一次打印一个`String`，您一定会得到不同的窗格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-03T10:09:05.803

用作`Arrays.toString ()`：

```
 int [] arr = new int [3];
    arr[0]=1;
    arr[1]=2;
    arr[2]=3;

    JOptionPane.showMessageDialog(null, Arrays.toString(arr)); 
```

# c# - Regex.Split() 当只有一个项目时，如何只将一个项目放入数组中？

> ID：10869375
> 
> 赞同：0
> 
> 时间：2012-06-03T10:01:10.270
> 
> 标签：c#, regex, arrays, list, split

这可能看起来有点不寻常，但很可能只需要用户输入框中的一项。为了确定输入的字符串之间的差异以创建一个工作函数，我在 ; 上使用 regex.split

```
string[] customlister = Regex.Split(Regex.Replace(exttypes, @"s", ""), ";");
foreach(string c in customlister){
  lister.Add(c);
} 
```

exttypes 用于文件的扩展，例如：

。可执行程序; 。蝙蝠; .css

全部用分号隔开。

如果列表中只有一个项目，即使它以分号结尾，列表器列表也不会获得任何信息。

有什么明显的我错过了吗？

答案：在 regex.replace() 中添加了 \s 而不是 s

添加

```
exttypes = Settings.Default.customext;
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:08:14.467

我假设您`Regex.Replace(exttypes, @"s", "")`调用中的正则表达式模式应该是`@"\s"`，而不是`@"s"`。前者将删除空格；后者将删除所有`'s'`字符，将（例如）您的`".css"`扩展名转换为`".c"`.

从 MSDN 文档中[`Regex.Split`](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)：

> 如果在*输入*字符串中没有找到*模式*，则返回值包含一个元素，其值为原始*输入*字符串。

 **因此，错误可能在于您提供输入或解释结果的方式。`Split`调用是正确的。**

# jquery - jquery帮助：发送处理后隐藏提交按钮并更改表单的动作属性

> ID：10869381
> 
> 赞同：0
> 
> 时间：2012-06-03T10:02:26.577
> 
> 标签：jquery, form-submit, onsubmit

所以这是我面临的问题。很感谢任何形式的帮助。

我有一个包含文本框和提交按钮的表单。process-page.php 有一个 php 脚本，用于检查我的数据库中的用户信息并返回处理后的数据。

```
<form id="myform" aciton="process-page.php" method="post">
    <input type="text" id="checkinfo" name="checkinfo" />
    <input type="submit" value="check info" id="submit" />
</form> 
```

现在，当用户在文本框中输入信息并单击提交按钮时，我使用 ajax 将信息发送到 process-page.php 并显示数据而无需加载页面。

我使用 ajax 返回的数据也包含一个 sumit 按钮（付款按钮）。

这是我从 process-page.php 得到的响应

```
//html information along with payment button.
<h2>The user is currently available. Make a payment to join hands with the user.</h2>
<input type="submit" id="payment" value="make payment" /> 
```

问题是，我有 2 个提交按钮，一个在文本框旁边，其中有一个表单 action="process-page.php"，另一个提交按钮（付款按钮）是作为 process-page.php 的响应获得的

现在我想做的是，在 jquery 的帮助下，我需要在用户提交表单时隐藏提交按钮。

这段代码会起作用吗？

```
$("#myfrom").submit(function(){
    //perform validation so that no numbers are entered.
    if(does not match){
        alert();
        return false;
    }
    //THe above performs the validation

    Now is this the correct method to hide submit button?

    if(true){
        $("submit").hide();
    }

}); 
```

我想知道这是否是在执行验证时隐藏提交按钮的正确方法，如果所有内容都已验证，则提交表单，然后隐藏提交按钮。

现在我会得到另一个提交按钮（支付按钮），我希望像这样更改表单操作属性。

```
<form id="myform" aciton="make-payments.php" method="post">

Does, using this code works?

$("#form").attr('action', 'make-payments.php'); 
```

这会改变动作属性吗？帮帮我吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:07:26.223

不，您的隐藏按钮代码字符串将无法正常工作。

检查[jQuery 选择器](http://api.jquery.com/category/selectors/)，你使用了错误的选择器

现在您正在使用元素选择器，因此所有提交元素（您没有 BTW），您必须使用 id 选择器。

这将起作用：

```
$("#submit").hide(); 
```

# iphone - iOS 无法隐藏工具栏 UIbarButtonItem

> ID：10869382
> 
> 赞同：1
> 
> 时间：2012-06-03T10:02:30.643
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我无法找到隐藏工具栏上设置的 UIbarButtonItem 的方法。该按钮已在 IB 上正确声明和链接。但是以下行什么都不做，

```
self.botoVolver = nil; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-03T10:13:57.883

只需重置工具栏上的按钮，试试这个：

```
[self.toolbar setItems:nil]; 
```

# objective-c - @protocol 和 @interface 有什么区别？

> ID：10869383
> 
> 赞同：0
> 
> 时间：2012-06-03T10:02:45.513
> 
> 标签：objective-c, ios

> **可能重复：**
> [协议和接口之间有什么区别？](https://stackoverflow.com/questions/2818208/what-is-the-difference-between-a-protocol-and-a-interface)

Objective-C 中的@protocol 和@interface 有什么区别？

我对找出两者之间的差异感到困惑。它看起来和我很相似。我错了吗？

请不要与java接口比较。我只想知道Objective-c中的@interface和@protocol

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:45:37.163

@protocol 用于委托，@interface 用于类自身。被委托人使用@protocol 中的方法而不实现它，因为委托人会。但它必须在@interface 中实现所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:11:45.850

据我所知，@interface 是一个类的接口，就像你放在 C++ 头文件中的东西一样。另一方面，@protocol 更像是一个“真实”接口，它的用途与 Java 或 .Net 中的接口相似。

您的反对意见将来自这样一个事实，即这是您可以在任何书籍或教程中找到的 Objective-C 的一个非常基本的方面。

# localhost - 无法访问本地主机 - 没有权限

> ID：10869385
> 
> 赞同：0
> 
> 时间：2012-06-03T10:02:57.437
> 
> 标签：localhost, wamp

我在使用 chrome 和 Internet Explorer 访问 localhost (127.0.0.1) 时遇到问题，但使用 firefox 和 opera 没有这样的问题..

当我尝试访问 127.0.0.1 时，收到以下消息：

> 您无权访问此服务器上的 /

我曾尝试重新安装 wamp 服务器，但无济于事。

我应该更改任何设置以解决此问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:13:54.137

试试这个，它对我有用：

*   单击通知区域（任务栏）中的 Wamp 服务器图标。
*   向下滚动并选择“上线”。
*   您的服务器将自动重新启动。
*   尝试再次访问本地主机。

归功于[http://en.kioskea.net/faq/28449-wamp-server-error-message-forbidden-you-don-t-have-permission-to-access-on-this-server](http://en.kioskea.net/faq/28449-wamp-server-error-message-forbidden-you-don-t-have-permission-to-access-on-this-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:08:30.597

尝试步骤：

1.  从命令提示符 ping IP 地址。如果你能做到这一点，那么它听起来不像是 WAMP 服务器问题。
2.  进入默认站点的文档根目录，并放置一个名为`test.html`. 然后在浏览器中，访问“http://127.0.0.1/test.html”。在那里放一些内容-例如`<p>Hello world</p>`。如果你可以在 Firefox 中访问它，但不能在 Chrome 或 IE 中访问，那么这不是站点配置问题。
3.  禁用 IPv6。我在 Windows 上看到了一些与此相关的问题。

# php - 我收到一个错误：警告：mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源

> ID：10869387
> 
> 赞同：-5
> 
> 时间：2012-06-03T10:03:05.467
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_error()：提供的参数不是有效的 MySQL-Link 资源](https://stackoverflow.com/questions/2214046/warning-mysql-error-supplied-argument-is-not-a-valid-mysql-link-resource)

我收到此错误：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /home/u391124286/public_html/options.php on line 7 
```

我的代码是

```
<?php
$con=mysql_connect("localhost","root","pass"); 
mysql_select_db("my_db"); 
$query=mysql_query("SELECT * FROM Options where
Option='Map' AND 
Toggle='1'"); 
$count=mysql_num_rows($query);
if($count==1){ 
$Map='1';
}
else
{
$Map='0';
}

?> 
```

我不明白为什么会发生这个错误，我对 php 相当陌生，所以它可能很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:21:25.547

PHP 错误有时非常模糊，通过在 PHP My Admin 的 SQL 选项卡中输入完整的查询，看看是否可以获得更好的错误消息（并检查查询是否有效）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:26:44.827

经过进一步调查，您使用的字段名称“选项”是SQL中的保留字，表示您无法使用。以下是 SQL 保留字的完整列表：http: [//developer.mimer.se/validator/sql-reserved-words.tml](http://developer.mimer.se/validator/sql-reserved-words.tml)。

# node.js - Node.js 还是 EJB？

> ID：10869395
> 
> 赞同：0
> 
> 时间：2012-06-03T10:03:55.930
> 
> 标签：node.js

js 专家:-)！我可以在 Web 项目中实现复杂的业务层吗（CRUD 操作、算法、复杂的计算和优化、加载图片、交互式用户 GUI、以 csv 和其他格式导出内容、时间驱动的事件，例如电子邮件新闻、安全方面、等等）完全使用 Node.js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:14:50.323

当然可以。您可以为此使用任何编程语言。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-04T11:19:45.213

简短的回答是肯定的，对于其中一些，Node.js 将表现得非常好。

我个人发现 Node.js 非常适合处理实时事件和多客户端/服务器通信。

当涉及到复杂的计算和业务逻辑时，Node.js 会变得很棘手。就其本质而言，它是异步运行的，这意味着您期望的某些事情不会起作用。像

```
var script = 0;
for (i=0;i<10;i++){
  script = i
}
console.log(script); 
```

将返回 0 到 9 之间的某个数字，很可能是 0。如果您不习惯它（有时即使您不习惯），它会引起无数麻烦。有一些方法可以让它按照你期望的方式工作，在最基本的层面上是有回调的。

```
var script = 0;
var somefunction = function(i, callback){  
  if(i < 10){
    i++;
    somefunction(i, callback);
  }else{
    callback(i);
  }
}
somefunction(script, function(i){ console.log(i)} 
```

还有一些库可以帮助控制流，例如 async.js。

因此，尽管它会使实现复杂的计算和业务逻辑变得有些困难。在我从事的一些项目中，我们使用 python、ruby 或 PHP 来处理业务逻辑方面的事情，并使用 node.js 来处理与客户端的实时通信。

# mysql - 为所有行更新一列

> ID：10869396
> 
> 赞同：0
> 
> 时间：2012-06-03T10:03:57.060
> 
> 标签：mysql, sql

column 的值`file_path`类似于

```
~/uploaded/de-DE/56/57d8c7d9-dcfc-4208-9f4c-2bf369690bd5.jpeg 
```

我是 MySql 的新手，我无法将所有行的这些值更新为类似

```
~/uploaded/de-DE/56/ 
```

这只是目录（不是文件）。我想从字符串中删除文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:25:55.610

如果您知道文件名在所有行上，那么是这样的吗？

```
UPDATE table SET file_path = SUBSTR(file_path, 1, LENGTH(file_path) - LOCATE('/', REVERSE(file_path))+1) WHERE 1; 
```

它不漂亮，但它应该工作。

如果 MySQL 有最后一次出现会更简单，但据我所知并没有；因此 LENGTH - LOCATE REVERSE 咒语。

（先备份你的桌子：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:08:06.363

如果你有这样的东西

`~/uploaded/de-DE/'.$folder.'`

将其更改为

`~/uploaded/de-DE/'.$folder.'/`

我想你错过了反斜杠

```
mysql_query("update ".$table." set ".your cell."='".your data."' "); 
```

# android - 运行示例 C2DM 应用程序在注册到 c2dm 服务器并接收推送通知时崩溃

> ID：10869399
> 
> 赞同：0
> 
> 时间：2012-06-03T10:04:31.477
> 
> 标签：android, android-c2dm

我正在尝试在我的 android 根 3.0 gtab wifi 模型中运行 c2dm 示例应用程序，例如 jumpnote、[bigdaddy](http://bigdaddy-io.appspot.com/)应用程序，同时在注册到 c2dm 服务器并接收推送通知时运行 bigdaddy google io 示例应用程序我收到运行时错误和应用程序崩溃！ ！！

注：c2dm服务器注册成功！C2DM 应用程序不能在有根的 android 设备上运行？我在*中午*测试了root手机能够接收c2dm消息，但是在注册用户到c2dm服务时崩溃，但注册成功！

> *问题是在 C2DM 注册、接收消息时，有根 viewsonic gtab 中的演示代码/应用程序崩溃，但在无根设备中几乎可以正常工作！*

**应用、代码链接：** [Google IO demo APP](http://bigdaddy-io.appspot.com/)、 [GoogleCode](http://code.google.com/p/cloud-tasks-io/source/browse/#svn/trunk/DemoFiles)

![C2DM bigdaddy google io 应用程序错误](../Images/266bbfc2c1cfac13554b0df8fdf6e13b.png)

日志：

```
06-03 09:08:32.633: E/ActivityManager(1139): Activity Manager Crash
06-03 09:08:32.633: E/ActivityManager(1139): java.lang.IllegalArgumentException: Null intent at index 0
06-03 09:08:32.633: E/ActivityManager(1139):    at com.android.server.am.ActivityManagerService.getIntentSender(ActivityManagerService.java:3946)
06-03 09:08:32.633: E/ActivityManager(1139):    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:799)
06-03 09:08:32.633: E/ActivityManager(1139):    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1521)
06-03 09:08:32.633: E/ActivityManager(1139):    at android.os.Binder.execTransact(Binder.java:320)
06-03 09:08:32.633: E/ActivityManager(1139):    at dalvik.system.NativeStart.run(Native Method)
06-03 09:08:32.643: E/AndroidRuntime(16339): FATAL EXCEPTION: main
06-03 09:08:32.643: E/AndroidRuntime(16339): java.lang.RuntimeException: Error receiving broadcast Intent { act=com.bigdaddy.UPDATE_UI (has extras) } in com.bigdaddy.BigDaddyActivity$1@40597d28
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:725)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.os.Handler.handleCallback(Handler.java:587)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.os.Looper.loop(Looper.java:126)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.app.ActivityThread.main(ActivityThread.java:3997)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at java.lang.reflect.Method.invokeNative(Native Method)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at java.lang.reflect.Method.invoke(Method.java:491)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at dalvik.system.NativeStart.main(Native Method)
06-03 09:08:32.643: E/AndroidRuntime(16339): Caused by: java.lang.IllegalArgumentException: Null intent at index 0
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.os.Parcel.readException(Parcel.java:1326)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.os.Parcel.readException(Parcel.java:1276)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.app.ActivityManagerProxy.getIntentSender(ActivityManagerNative.java:2356)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.app.PendingIntent.getActivity(PendingIntent.java:195)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at com.bigdaddy.Util.generateNotification(Util.java:100)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at com.bigdaddy.BigDaddyActivity$1.onReceive(BigDaddyActivity.java:76)
06-03 09:08:32.643: E/AndroidRuntime(16339):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:716)
06-03 09:08:32.643: E/AndroidRuntime(16339):    ... 9 more
06-03 09:08:32.643: W/ActivityManager(1139):   Force finishing activity com.bigdaddy/.BigDaddyActivity
06-03 09:08:33.153: W/ActivityManager(1139): Activity pause timeout for ActivityRecord{40856d98 com.bigdaddy/.BigDaddyActivity}
06-03 09:10:10.623: E/InputDispatcher(1139): channel '41959420 com.bigdaddy/com.bigdaddy.BigDaddyActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
06-03 09:10:10.633: E/InputDispatcher(1139): channel '41959420 com.bigdaddy/com.bigdaddy.BigDaddyActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
06-03 09:10:10.653: I/WindowManager(1139): WIN DEATH: Window{41959420 com.bigdaddy/com.bigdaddy.BigDaddyActivity paused=false}
06-03 09:10:10.663: I/WindowManager(1139): WINDOW DIED Window{41959420 com.bigdaddy/com.bigdaddy.BigDaddyActivity paused=false}
06-03 09:10:10.703: W/InputManagerService(1139): Got RemoteException sending setActive(false) notification to pid 16339 uid 10130
06-03 09:10:33.774: E/ActivityManager(1139): Activity Manager Crash
06-03 09:10:33.774: E/ActivityManager(1139): java.lang.IllegalArgumentException: Null intent at index 0
06-03 09:10:33.774: E/ActivityManager(1139):    at com.android.server.am.ActivityManagerService.getIntentSender(ActivityManagerService.java:3946)
06-03 09:10:33.774: E/ActivityManager(1139):    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:799)
06-03 09:10:33.774: E/ActivityManager(1139):    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1521)
06-03 09:10:33.774: E/ActivityManager(1139):    at android.os.Binder.execTransact(Binder.java:320)
06-03 09:10:33.774: E/ActivityManager(1139):    at dalvik.system.NativeStart.run(Native Method)
06-03 09:10:33.823: W/dalvikvm(16480): threadid=9: thread exiting with uncaught exception (group=0x40014760)
06-03 09:10:33.873: E/AndroidRuntime(16480): FATAL EXCEPTION: IntentService[gwtc2dm@gmail.com]
06-03 09:10:33.873: E/AndroidRuntime(16480): java.lang.IllegalArgumentException: Null intent at index 0
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.os.Parcel.readException(Parcel.java:1326)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.os.Parcel.readException(Parcel.java:1276)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.app.ActivityManagerProxy.getIntentSender(ActivityManagerNative.java:2356)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.app.PendingIntent.getActivity(PendingIntent.java:195)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at com.bigdaddy.Util.generateNotification(Util.java:100)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at com.bigdaddy.MessageDisplay.displayMessage(MessageDisplay.java:44)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at com.bigdaddy.C2DMReceiver.onMessage(C2DMReceiver.java:82)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at com.google.android.c2dm.C2DMBaseReceiver.onHandleIntent(C2DMBaseReceiver.java:112)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.os.Looper.loop(Looper.java:126)
06-03 09:10:33.873: E/AndroidRuntime(16480):    at android.os.HandlerThread.run(HandlerThread.java:60)
06-03 09:10:35.253: W/GTalkService(1458): [DataMsgMgr] broadcast intent callback: result=CANCELLED forIntent { act=com.google.android.c2dm.intent.RECEIVE cat=[com.bigdaddy] (has extras) }
06-03 09:10:35.253: W/ActivityManager(1139): Unable to launch app com.bigdaddy/10130 for broadcast Intent { act=com.google.android.c2dm.intent.RECEIVE cat=[com.bigdaddy] (has extras) }: process is bad
06-03 09:10:35.253: W/ActivityManager(1139): finishReceiver called but none active 
```

# android - 谁调用 Android 生命周期处理程序？

> ID：10869400
> 
> 赞同：2
> 
> 时间：2012-06-03T10:04:33.347
> 
> 标签：android, event-driven

我对 Android 的事件驱动编程范式感到很困惑？谁负责调用生命周期处理程序（onCreate()、onResume() 等）？是安卓操作系统吗？还是运行在应用程序进程中的 Dalvik VM？

任何人都可以回答我的问题或指导我一些相关资源吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:48:06.863

在操作系统启动时，会创建一个称为 Zygote 的进程。此过程等待应用启动的传入请求。一旦收到请求，它就会根据 Zygote VM 本身来分叉一个 VM 实例。因此，每个应用程序都是自己的进程，拥有自己的沙盒虚拟机。
正是这个 VM 进程启动了`onCreate()`随后启动应用程序的（和其他相关方法）。

资料来源：我对该主题的研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:40:32.223

活动生命周期是方法的集合 `OS calls throughout the lifecycle of an activity.`

转到此链接 [活动生命周期](http://docs.xamarin.com/android/tutorials/Activity_Lifecycle)

# java - 此应用程序未使用 JProfiler 进行分析

> ID：10869402
> 
> 赞同：0
> 
> 时间：2012-06-03T10:04:38.660
> 
> 标签：java, jprofiler

IDE：Intellij IDEA 11.1.2
jProfiler：v.7.1.2

操作系统：Windows 7 32 位

jProfiler 集成到 IDEA 中。
使用 VM:-server 或 -Xshare:off 调用 Java-console 程序。

全部的：

单击 Profile '[name]' 或 Attach to JVM - 打开 jProfiler 并在左侧菜单中使用非活动按钮打开程序，但没有结果。

如果使用 Session -> New Session -> Application Setting -> 选项卡“Profiled JVM” -> Attach -> 选择“Select from all local JVMs”创建会话，然后按 OK 按钮并从“idea”列表中选择.exe”，你会得到一个错误：

“无法连接到 127.0.0.1:8849。请确保远程地址正确，远程程序已正确启动且网络路由允许套接字连接”

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:24:36.373

问题已解决。

问题的原因：

在防火墙中被禁用以执行程序活动，例如协议“TCP & UDP”的“Out”

# http - 将套接字与进程关联

> ID：10869405
> 
> 赞同：1
> 
> 时间：2012-06-03T10:04:52.123
> 
> 标签：http, sockets, tcp, erlang

我有一些问题。

我想将进程与一个用户关联（来自用户的所有请求都接收一个进程，在 HTTP 1.1 中默认保持活动状态，所有请求都通过一个套接字发送。）

我有以下代码：

```
loop(Sock, Reg_pid) ->

    {ok, Conn} = gen_tcp:accept(Sock),

    Pid = spawn(fun () -> client_socket(Conn,Reg_pid) end),
    gen_tcp:controlling_process(Conn, Pid),

    Pid ! {take, Conn}, %% race condition 

loop(Sock, Reg_pid).

client_socket(S,Reg_pid) ->

    io:format("in~n"),

receive

    {take, So} ->
        inet:setopts(So, [{active, once}]),
        client_socket(So, Reg_pid);

    {http, Socket, {http_request, _Method, {abs_path, _Path}, _Vers}} ->

        case http_uri2:parse_path_query(_Path) of

            {"/",[]} -> 

                io:format("Main pid - ~p ~n", [self()]),                
                gen_tcp:send(Socket, response("<a href='http://127.0.0.1:8080/register?name=Max'>Click</a>"));              

            {"/register",[{"name", Player_name}]} ->

                io:format("Register pid - ~p ~n", [self()]);

            _-> ok

        end,

        inet:setopts(Socket, [{active, once}]),

        client_socket(Socket, Reg_pid);

     {tcp_closed, Socket} ->

        io:format("Socket ~w closed [~w]~n",[Socket,self()]);
    %   gen_tcp:close(Socket);

      {tcp_error, Socket, Reason} ->
            io:format("Error ~w closed [~w]~n",[Socket,self()]);

    _-> ok

end. 
```

当我通过浏览器连接到服务器（索引页面）然后单击返回服务器的链接时，我有下一个结果：

```
3> server:start(8080).
<0.43.0>
in 
Main pid - <0.45.0> 
in 
in 
Register pid - <0.46.0> 
in 
```

我不明白为什么我的下一个请求（点击链接）会收到其他进程（注册 pid - <0.46.0>）？

这样，来自一个用户的所有请求都会产生新进程，我希望来自一个用户的所有请求都处理一个进程，我该如何实现呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:11:37.340

浏览器可能会选择不遵守 Keep-Alive，而是创建一个新套接字。除了信任 Keep-Alive，您可以考虑向浏览器发送会话 cookie，将当前会话与某个进程相关联。会话 cookie 将由浏览器为每个请求发送。在为新请求创建新进程之前，请检查会话 cookie 并查看是否已经存在与该会话关联的进程。

# mysql - 具有相同 ID 的 MySQL SUM

> ID：10869407
> 
> 赞同：3
> 
> 时间：2012-06-03T10:05:03.640
> 
> 标签：mysql, sql

很抱歉这个真正简单的问题，我刚刚学习 PHP 和 MySQL，我已经在谷歌上搜索了一个多星期，但我没有找到任何答案。

我创建了一个简单的财务脚本，表格如下：

```
table_a
aid | value
1   | 100
2   | 50
3   | 150

table_b
bid | aid | value
1   | 1   | 10
2   | 1   | 15
3   | 2   | 5
4   | 2   | 10
5   | 3   | 25
6   | 3   | 40 
```

我想要这样的结果

```
No | ID | Total | Balance
1  | 1  | 10    | 90
2  | 1  | 25    | 75
3  | 2  | 5     | 45
4  | 2  | 15    | 35
5  | 3  | 25    | 125
6  | 3  | 65    | 85 
```

有人可以帮我解决我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:59:21.963

试试这个运行总数：[http ://www.sqlfiddle.com/#!2/ce765/1](http://www.sqlfiddle.com/#!2/ce765/1)

```
select  
    bid as no, value,
    @rt := if(aid = @last_id, @rt + value, value) as total,
    @last_id := aid
from table_b b, (select @rt := 0 as x, @last_id := null) as vars
order by b.bid, b.aid; 
```

输出：

```
| NO | VALUE | TOTAL | @LAST_ID := AID |
|----|-------|-------|-----------------|
|  1 |    10 |    10 |               1 |
|  2 |    15 |    25 |               1 |
|  3 |     5 |     5 |               2 |
|  4 |    10 |    15 |               2 |
|  5 |    25 |    25 |               3 |
|  6 |    40 |    65 |               3 | 
```

然后加入表A，最终查询：

```
select x.no, x.aid, x.value, x.total, a.value - x.total as balance
from
(
  select    
    bid as no, aid, value,
    @rt := if(aid = @last_id, @rt + value, value) as total,
    @last_id := aid
  from table_b b, (select @rt := 0 as x, @last_id := null) as vars
  order by b.bid, b.aid
) as x
join table_a a using(aid) 
```

输出：

```
| NO | AID | VALUE | TOTAL | BALANCE |
|----|-----|-------|-------|---------|
|  1 |   1 |    10 |    10 |      90 |
|  2 |   1 |    15 |    25 |      75 |
|  3 |   2 |     5 |     5 |      45 |
|  4 |   2 |    10 |    15 |      35 |
|  5 |   3 |    25 |    25 |     125 |
|  6 |   3 |    40 |    65 |      85 | 
```

现场测试：[http ://www.sqlfiddle.com/#!2/ce765/1](http://www.sqlfiddle.com/#!2/ce765/1)

* * *

**更新**

不依赖于列出**价**排序，分组运行总计不会受到影响：[http ://www.sqlfiddle.com/#!2/6a1e6/3](http://www.sqlfiddle.com/#!2/6a1e6/3)

```
select x.no, x.aid, x.value, x.total, a.value - x.total as balance
from
(
  select    
    @rn := @rn + 1 as no, aid, value,
    @rt := if(aid = @last_id, @rt + value, value) as total,
    @last_id := aid
  from table_b b, (select @rt := 0 as x, @last_id := null, @rn := 0) as vars
  order by b.aid, b.bid
) as x
join table_a a using(aid) 
```

输出：

```
| NO | AID | VALUE | TOTAL | BALANCE |
|----|-----|-------|-------|---------|
|  1 |   1 |    10 |    10 |      90 |
|  2 |   1 |    15 |    25 |      75 |
|  3 |   1 |     7 |    32 |      68 |
|  4 |   2 |     5 |     5 |      45 |
|  5 |   2 |    10 |    15 |      35 |
|  6 |   3 |    25 |    25 |     125 |
|  7 |   3 |    40 |    65 |      85 | 
```

现场测试：[http ://www.sqlfiddle.com/#!2/6a1e6/3](http://www.sqlfiddle.com/#!2/6a1e6/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:30:15.153

```
SELECT
   tb.bid as No,
   ta.aid as ID,
   tb.value as Total,
   ta.value-tb.total as Balance
FROM
  table_a AS ta
  INNER JOIN (
    SELECT
      tbx.aid AS aid,
      tbx.bid AS bid,
      tbx.value AS value,
      SUM(tby.value) AS total
    FROM 
      table_b AS tbx
      INNER JOIN table_b AS tby ON tby.aid=tbx.aid AND tby.bid<=tbx.bid
    GROUP BY tbx.bid
    ORDER BY tbx.bid
  ) AS tb ON tb.aid=ta.aid
ORDER BY tb.bid 
```

正如@Quassnoi 指出的那样，这对于 MySQL 来说不是很有效。我尝试使用异常连接而不是子查询，因为内部查询本身可能有用。

**编辑**

对此产生了一些兴趣，发现连接版本的速度是@Quassnoi 的子查询版本的两倍……有人知道为什么会这样吗？

**编辑**

回答第二个问题（在下面的评论中）：

```
SELECT
  table_a.aid AS aid,
  SUM(table_b.value) AS Total,
  table_a.value-SUM(table_b.value) AS Balance
FROM
  table_a
  INNER JOIN table_b ON table_a.aid=table_b.aid
GROUP BY table_a.aid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:21:25.440

您正在寻找分析功能。不幸的是，`MySQL`缺少它们。

您可以以一种效率较低的方式实现它：

```
SELECT  bid, aid, total, value - total
FROM    (
        SELECT  b.bid, b.aid, COALESCE(a.value, 0) AS value,
                (
                SELECT  SUM(value)
                FROM    b bp
                WHERE   bp.aid = b.aid
                        AND bp.bid <= b.bid
                ) AS total
        FROM    b
        LEFT JOIN
                a
        ON      a.aid = b.aid
        ) q 
```

# javascript - 如何在 Javascript 中解析非英文文本日期？

> ID：10869409
> 
> 赞同：3
> 
> 时间：2012-06-03T10:05:18.920
> 
> 标签：javascript, datetime

我有文本格式的日期，例如：

```
6 weeks ago, 2012 April 18 15:08:18
13 weeks ago, 2012 March 01 17:33:52 
```

主要问题是这些文本实际上是俄文，所以不是`weeks ago`有相同的俄文文本。几个月也是如此（看起来我应该创建一些可能值的字典）。

我不知道如何开始。我应该使用正则表达式吗？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:13:32.407

不是俄语，而是波兰语：

```
var dateStr = "6 tygodni temu, 2012 kwiecień 18 15:08:18" 
```

Firefox 在提取 Unicode 字符方面没有问题（快速和肮脏的正则表达式）：

```
var regex = /(\d+) ty.* temu, (\d+) (.*) (\d+) (\d{2}):(\d{2}):(\d{2})/ 
```

解析：

```
var result = dateStr.match(regex); 
```

是`result`：

```
[
  "6 tygodni temu, 2012 kwiecień 18 15:08:18",
  "6",
  "2012",
  "kwiecień",
  "18", 
  "15",
  "08",
  "18"
] 
```

我不懂俄语，但你可能需要做一些额外的语言工作。例如，在波兰语中，我有“ *1 tydzień* ”但“ *2 tygodnie* ”甚至“ *5 tygodni* ”（注意不同的形式）。

# android - AndroidManifest 文件丢失

> ID：10869410
> 
> 赞同：1
> 
> 时间：2012-06-03T10:05:26.200
> 
> 标签：android, eclipse, cordova, barcode-scanner

我按照一些教程将条形码扫描仪插件用于 phonegap。但是，当我从现有源创建一个新的 android 项目以创建条形码库[（本页中的第 6 步）](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt3)时，出现错误：“AndroidManifest.xml 文件丢失！”。但是在文件夹的根目录中存在文件！怎么了？

提前Tnx！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:07:40.913

这也发生在我身上。实际上问题是您下载的代码不包含 AndroidManifest.xml 文件。您只需根据您的要求创建另一个项目并将所有文件复制到创建的项目中。它会工作..

否则

如果您正在使用 phonegap 插件，则意味着请点击此链接[Barcode Scanner plugin for Phonegap](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner)。此处的第一个 README 文件并按照步骤操作。它很容易....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:50:50.137

我已经按照你提到的教程中的第 6 步，今天使用 github 下载 phonegap/phonegap-plugins。完全按照这些步骤，我得到了一个新的 Android 项目，它位于下载源的位置，默认项目名称为 CaptureActivity，以及一个 AndroidManifest.xml。

我猜你没有完全按照前两句中的说明进行操作。

# ruby - 如何断言某些方法被 Ruby minitest 框架调用？

> ID：10869417
> 
> 赞同：32
> 
> 时间：2012-06-03T10:06:57.910
> 
> 标签：ruby, unit-testing, testing, minitest

我想测试一个函数是否使用 minitest Ruby 正确调用其他函数，但我无法从[doc](http://docs.seattlerb.org/minitest/MiniTest/Assertions.html#method-i-assert_send)`assert`中找到合适的测试对象。

源代码

```
class SomeClass
  def invoke_function(name)
    name == "right" ? right () : wrong ()
  end

  def right
    #...
  end

  def wrong
    #...
  end
end 
```

测试代码：

```
describe SomeClass do
  it "should invoke right function" do
    # assert right() is called
  end

  it "should invoke other function" do
    # assert wrong() is called
  end
end 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-03-14T13:20:26.860

Minitest 有一个特殊`.expect :call`的方法来检查是否调用了某个方法。

```
describe SomeClass do
  it "should invoke right function" do
    mocked_method = MiniTest::Mock.new
    mocked_method.expect :call, return_value, []
    some_instance = SomeClass.new
    some_instance.stub :right, mocked_method do
      some_instance.invoke_function("right")
    end
    mocked_method.verify
  end
end 
```

不幸的是，此功能没有很好地记录。我从这里找到了它：[https ://github.com/seattlerb/minitest/issues/216](https://github.com/seattlerb/minitest/issues/216)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-03T10:20:15.540

使用 minitest，您可以使用`expect`方法来设置要在模拟对象上调用的方法的期望，如下所示

```
obj = MiniTest::Mock.new
obj.expect :right 
```

如果您想使用参数和返回值设置期望值，那么：

```
obj.expect :right, return_value, parameters 
```

对于像这样的具体对象：

```
obj = SomeClass.new
assert_send([obj, :right, *parameters]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-13T10:10:58.427

根据给定的示例，没有其他委托类，并且您要确保从同一类正确调用该方法。然后下面的代码片段应该可以工作：

```
class SomeTest < Minitest::Test
  def setup
    @obj = SomeClass.new
  end

  def test_right_method_is_called
    @obj.stub :right, true do
      @obj.stub :wrong, false do
        assert(@obj.invoke_function('right'))
      end
    end
  end

  def test_wrong_method_is_called
    @obj.stub :right, false do
      @obj.stub :wrong, true do
        assert(@obj.invoke_function('other'))
      end
    end
  end
end 
```

这个想法是通过返回一个简单的**真值来存根***[method_expect_to_be_call]*，并且在存根块中断言它确实被调用并返回**真**值。存根其他意外方法只是为了确保它没有被调用。

 ****注意：assert_send 将无法正常工作。请参考[官方文档](http://ruby-doc.org/stdlib-2.0.0/libdoc/minitest/rdoc/MiniTest/Assertions.html#method-i-assert_send)。

事实上，下面的语句会通过，但并不意味着它按预期工作：

```
assert_send([obj, :invoke_function, 'right'])
# it's just calling invoke_function method, but not verifying any method is being called 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-18T07:55:14.177

最近，我创建了一个 gem 来缓解这种称为['stubberry'](https://github.com/alekseyl/stubberry)的断言。

在这里，您可以如何使用它来管理所需的行为。

首先，您需要回答以下问题：

*   在测试序列执行之前，您可以访问原始对象吗？

*   有什么间接的方法可以确定通话发生了吗？即，您有权访问的其他对象上应该有一些方法调用。

*   您是否需要实际调用该方法，还是可以将其与适当的对象或可调用对象一起存根？

如果您有权访问该对象，并且您可以使用您的可调用对象存根该方法：

```
obj.stub_must( :right, -> { stub_response } ) {
  ... do something 
} 
```

如果您有权访问该对象，但您不想存根该方法，并且只想确保调用该方法：

```
 assert_method_called( obj, :right ) {
    .... do something with obj
  } 
```

如果您无权访问要测试的对象。但是您可以使用其他一些对象方法调用进行间接检查，假设“正确”方法将以 API 调用执行结束：

```
API.stub_must( :get, -> (path, params) {
  assert_equal( path, :expected_path )
  assert_equal( params, {} )
} ) do
  ... do something  
end 
```

您不能进行间接检查：

```
 stunt_boudle = Obj.new

stunt_boudle.stub_must( :right, -> () {
  #do needed assertions
} ) do
   Obj.stub_must(:new, stunt_boudle) do 
     # do some integration testing 
   end
end 

# OR use assert_method_called the same way 
```

还有一组很酷的通过 id 存根的 ActiveRecord 对象，当您在测试操作开始时无法访问该对象及其 ActiveRecord 对象时，您可以在这种情况下使用它们。****

# php - 展示mysql表中的系列产品

> ID：10869423
> 
> 赞同：-4
> 
> 时间：2012-06-03T10:08:01.437
> 
> 标签：php, mysql

我正在做一个项目，我需要使用 php 显示 mysql 表中的产品。

我的设计就是这样，5个产品排成一排，以此类推。

所以如果表中有 7 个产品，它应该是 2 行。

```
first row 5 products
second row 2 products 
```

我正在使用`<UL>`并`<LI>`显示产品和行

```
<UL>
<li>first</li>
<li>2nd</li>
<li>3rd</li>
<li>4th</li>
<li>5th</li>
</ul>

<UL>
<li>6th</li>
<li>7th</li>
</ul> 
```

我想知道如何使用 foreach 循环来获取上面的代码。

如果我使用`forloop with 5 increment`我无法从表中获取产品并显示它们的名称。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:19:58.153

```
echo '<ul>';
foreach ($yourResultSet as $index=>$data) {
    echo '<li>' . YourOutput . '</li>';        

    if ($index % 5 == 0) {
        echo "</ul><ul>";
    }
}
echo '</ul>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:30:52.783

实现这一点的最佳方法是让您`<li>`的 's 具有特定宽度，以便其中五个适合父容器，并且以下两个或您拥有的多个将下降到下一行。

```
<style>
#container {
    width: 350px;
    background: red;
    padding:0;
    margin: 0;
} 
#list li
{
    display: inline-block;
    width: 50px;
    height: 50px;
    list-style-type: none;
    background:blue;
    margin: 2px;
    padding: 0;
}
</style>

<div id="container">
    <ul id="list">
    <?php 
    while($row = mysql_fetch_array($result))
    {
        echo '<li>' . $row['data'] . '</li>'; 
    }
    ?>
    </ul>
</div> 
```

您需要稍微调整一下尺寸，但一切都应该工作，并且您有 11 个产品，这应该做 2 行 5 个产品和第三行 1 个产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:18:11.523

```
<ul>
<?php $i = 0; ?>
<?php while($row = mysql_fetch_array($result)): /* Used to loop through a resultset*/ ?>
    echo "<li>".$row['data'].</li>";
<?php 
    $i++; // Increment by one every loop
    if($i == 5){ // We've hit the fifth iteration
        echo '</ul><ul>'; // Close the UL and open a new UL
        $i = 0; // Set $i back to 0 and continue looping
    }
    endwhile;
?>
</ul> 
```

试试看。

# opencv - 使用opencv查找对象旋转/缩放/位置的方法

> ID：10869428
> 
> 赞同：1
> 
> 时间：2012-06-03T10:08:25.293
> 
> 标签：opencv

我想找到包含旋转、缩放和位置的匹配模板。但是 cvMatchTemplate 不提供这些详细信息，它只检测位置。

我看过使用棋盘的例子。但我想用我的自定义图像实现相同的示例。

感谢帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T22:37:59.123

如果您想获得任意仿射矩阵来转换一个图像以最好地匹配另一个图像，您可以使用：

```
Mat M = estimateRigidTransform(img1,img2,true); 
```

如果您想获得仅平移/旋转/缩放一个图像以最佳匹配另一个图像的仿射矩阵，您可以使用：

```
Mat M = estimateRigidTransform(img1,img2,false); 
```

然而，这与使用模板并不完全相同，它假设两个图像属于同一个对象（或多或少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T15:31:27.113

您不能为此使用 cvMatchTemplate。如果您要查找的对象具有不同的比例或旋转，则 cvMatchTemplate 将失败。您最好寻找其他技术，例如[特征检测](http://docs.opencv.org/doc/tutorials/features2d/feature_detection/feature_detection.html)。

# variables - PyQt4 存储变量

> ID：10869437
> 
> 赞同：0
> 
> 时间：2012-06-03T10:09:58.690
> 
> 标签：variables, input, pyqt4

几个小时前，我开始使用 PyQt4 创建我的第一个 GUI，但遇到了一个障碍。我在整个网络上进行了研究，虽然有些资源已经接近，但它们从未真正回答过我的问题。

基本上我想知道是否可以从小部件中获取用户输入文本并通过单击按钮将该文本存储到变量中。

到目前为止，我已经研究了 QLineEdit 方法，但还没有找到我要找的东西。有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:52:51.180

也许是这样的？

```
...
    def __init__(self):
        ...
        self.button.clicked.connect(self.on_button_click)
        ...

    def on_button_click(self):
        self.variable = self.line_edit.text()
        print(self.variable)
... 
```

# backbone.js - Backbone.JS 集合重置事件似乎没有触发

> ID：10869439
> 
> 赞同：1
> 
> 时间：2012-06-03T10:10:27.513
> 
> 标签：backbone.js, local-storage

我**[在 JS Fiddle 上创建了一个简单的 Todo 应用程序](http://jsfiddle.net/jiewmeng/grhz9/6/)**来学习 Backbone.JS。我有一个`TodosModuleView`包装表单并`TodosView`呈现 Todos 集合

```
window.TodosModuleView = Backbone.View.extend({
    tagName: 'section',
    id: 'todoModule',
    events: {
        'keypress #frmTodo input[type=text]': 'addTodo'
    },
    initialize: function() {
        _.bindAll(this, 'render', 
                        'addTodo');
        this.collection.bind('reset', this.render);
        this.template = _.template($('#todosModuleTmpl').html());        },
    render: function() {
        console.log('rendering...');
        var todosView = new TodosView({ collection: this.collection });
        this.$el.html(this.template({}));
        this.$el.append(todosView.render().el);
        return this;
    },
    addTodo: function(e) {
        if (e.keyCode !== 13) 
            return;
        var todo = new Todo({ title: this.$('input[name=todo]').val() });
        this.collection.add(todo);
        console.log('added!');
        return false;
    }
}); 
```

当我添加一个待办事项时，我可以看到它已添加到集合中，但它似乎没有触发`render()`. 此外，由于我使用的是本地存储存储，我希望我新添加的 Todos 应该在下次刷新时持久化并呈现，但这似乎不会发生。查看 Chrome 的开发人员工具栏，我在本地存储中看不到任何内容

**更新**

**@mashingan 的**回答解决了第一个问题：使用`add`而不是`reset`事件。现在我的本地存储出了什么问题？

```
window.Todos = Backbone.Collection.extend({
    model: Todo,
    localStorage: new Backbone.LocalStorage('todos')
}); 
```

可能是变量是按值传递的，而不是像我期望的那样按引用传递吗？我有一个`TodosModuleView`用来`TodosView`呈现待办事项列表的，也许我做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:44:44.003

您的 LocalStorage 不起作用，因为您没有保存任何内容。这：

```
var todo = new Todo({ title: this.$('input[name=todo]').val() });
this.collection.add(todo); 
```

只需创建一个新模型并将其添加到集合中，其中没有隐藏`todo.save()`调用，因此`Todo`不会保存新模型。你必须自己保存它：

```
var todo = new Todo({ ... });
todo.save();
this.collection.add(todo); 
```

您还可以使用以下命令保存集合中的所有内容：

```
this.collection.invoke('save'); 
```

这将调用`save`集合中的每个模型。这对于 LocalStorage 可能有意义，但如果您坚持到远程服务器，则意义不大。

如果你这样做：

```
var M = Backbone.Model.extend({});
var C = Backbone.Collection.extend({
    model: M,
    localStorage: new Backbone.LocalStorage('pancakes')
});
var c = new C;
c.add([
    { title: 'Fargo' },
    { title: 'Time Bandits' }
]); 
```

然后你不会在你的`pancakes`数据库中得到任何东西，但是如果你`c.invoke('save')`在最后添加：

```
var M = Backbone.Model.extend({});
#...
c.add([ ... ]);
c.invoke('save'); 
```

您将保存几部好电影。

演示：http: [//jsfiddle.net/ambiguous/ZV86g/](http://jsfiddle.net/ambiguous/ZV86g/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:17:21.477

检查[事件的主干目录](http://documentcloud.github.com/backbone/#FAQ-events)：（`reset`集合） - 当集合的全部内容已被替换时。有一个`add`事件应该适用于你的情况。

# facebook - 如何在用户流上也显示帖子？

> ID：10869440
> 
> 赞同：0
> 
> 时间：2012-06-03T10:10:37.193
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, x-facebook-platform

我在 Faceobok 上开发了一个简单的应用程序，可以在用户墙上发布一些内容。我的问题是在墙流上看不到该帖子，因此他/她可能永远不会阅读它。我使用 Facebook PHP-SDK 在 PHP 中开发了这个应用程序，并在我使用的用户墙上发布：$facebook->api($userId .'/feed/','post',$attachment)。是否可以在用户的​​流中也显示帖子？（也许我忘记在附加的数组中添加键/值...）或者，是否可以向用户发送通知来代替帖子或链接到墙上帖子的通知？帖子是个性化的，所以这就是我不使用 Facebook 页面的原因。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:19:30.863

也许您想向他们发送应用到用户的请求……？[http://developers.facebook.com/docs/requests/](http://developers.facebook.com/docs/requests/)

但是请记住，一旦用户关注了这些请求，您就必须自己删除这些请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:11:33.790

无法在用户流上发帖（帖子仅在用户的朋友流上可见）。不允许通知，仅用于请求。

# c++ - zlib 膨胀错误：Z_DATA_ERROR 随机

> ID：10869441
> 
> 赞同：0
> 
> 时间：2012-06-03T10:10:38.643
> 
> 标签：c++

我有一个应用程序通过套接字压缩和发送数据，并且接收到的数据被写入远程机器。在恢复期间，此数据将被解压缩并检索。压缩/解压是使用“zlib”完成的。但是在解压过程中我随机遇到以下问题：

**对于 .xls、.qbw 等二进制文件，zlib inflate() 失败并出现错误“Z_DATA_ERROR”。**

该应用程序以块为单位压缩数据，例如“1024”字节，并从文件中读取数据并以相同的方式解压缩。从论坛帖子中，我发现 Z_DATA_ERROR 的一个原因是数据损坏。到目前为止，为了避免这个问题，我们已经引入了在发送过程中压缩的数据和接收到的数据的 CRC 校验。非常感谢任何可能发生这种情况的原因！（因为这是随机发生的，并且对于同一个文件，它在其他时间也可以工作）。是因为不正确处理 zlib inflate() 和 deflate() 吗？ **注意：如果需要，将发布确切的代码片段以供进一步分析！**

谢谢...乌达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:26:58.403

您没有提到套​​接字是TCP还是UDP；但是基于阻塞和校验和，我会四处走动并猜测它是UDP。

如果您通过 UDP 发送压缩数据包，则它们可能会在另一端被乱序接收，或者数据包可能在传输过程中丢失。

正确处理诸如失序和丢失数据包之类的事情最终需要大量工作，这些工作都通过使用 TCP 协议来解决——您有一个简单的管道来保证数据按顺序和按预期到达。

此外，我会确保接收端的代码很简单，并且接收到分配在堆上而不是堆栈上的缓冲区中（我见过很多由此触发的错误）。

同样，这只是基于问题细节的有根据的猜测。

# php - google checkout html api - 在没有 HTTPS 的情况下获取付款状态？

> ID：10869444
> 
> 赞同：0
> 
> 时间：2012-06-03T10:10:59.053
> 
> 标签：php, html, forms, google-checkout

当我登录到我的商家帐户时，我可以在“设置”选项卡中设置回调 URL。

问题是，如果没有 HTTPS，唯一的选择是将序列号发送回回调 URL。

> **回调内容：**
> [x] 通知序列号，
> *例如 序列号=123-456-7*
> [] 通知为 XML（需要 HTTPS URL）
> *例如 123...*
> [] 通知为 HTML（名称/值对）（需要 HTTPS URL）
> *例如 google-order-number=123& ...*

那么从这个序列号中，我的服务器端脚本是否有可能获得订单的状态？

我需要获取订单的付款状态（已付款与否，已付款金额）和发送回我的（自定义）购物车的订单号，以便我可以更新我的数据库。

（我目前无法获得 HTTPS，因为网站所在的人不想获得它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:20:43.160

我会提醒您注意您接受的答案。

1.  `continue_url`不是“自动重定向”。您**完全依赖**于实际点击该链接的用户，而不是页面中的任何其他链接 - 特别是，Google 自己的链接可以转到用户的钱包页面，他/她可以访问他/她的所有订单。

    因此，您可能会因为自己的系统中没有所有订单而冒着您的操作风险。

2.  所有 Google Checkout 订单都有您应该真正了解的**[订单状态。](https://developers.google.com/checkout/developer/Google_Checkout_Basic_HTML_Order_States)**您已经在 #1 中假设用户实际上会点击您的`continue_url`链接 - 此外，您还向自己敞开心扉，即您跟踪的订单可能实际上并未被 Google 批准，或者未通过某些货币/风险授权或检查。

    如果用户确实点击了您提供的链接，但 Google 的订单存在问题，则您的系统在不应该的地方有“钱”。

3.  实现 Google Checkout API 并将其与您的系统集成的唯一可靠方法是遵循文档/说明 - 在这种情况下，您必须实现 Notification API。

    *   仅当您选择[XML/名称-值（数据）通知](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API_pre25)时才需要 SSL（**在您的端）**
    *   如果您选择序列号通知，则不需要**SSL**。
4.  **是的，您无需使用****[序列号通知](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API#serial_number_notifications)**为您的服务器安装/购买 SSL 证书即可获取所有订单数据- 这就是您所描述的。

    *   XML/name-value 通知是一种“推送”模型——Google 会将数据“推送”给您。您将验证**Google 的基本身份验证请求**（这就是需要 SSL 的原因）。
    *   序列号通知是“拉”模型-您将从谷歌“拉”数据（给定一个序列号-这就是为什么您不需要 SSL-**您**将验证您的拉取请求并使用 SSL 发送您的请求）。Google 不会向您发送任何数据，只是向您发送序列号。您将使用此序列号获取与其关联的数据并向 Google 提供身份验证 -**您的请求**将使用 SSL。
5.  您将使用带有[Notification History API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_History_API)的序列号通知来获取数据。

上面的链接应该引导您完成文档/参考。如果您有任何问题，请在此处发表评论，或在[Google Checkout 产品论坛](http://productforums.google.com/forum/#!forum/checkout-merchant)上发布。

嗯……

# spring - 检查使用 JSTL/Spring-MVC 标签关于 Spring Binding 错误

> ID：10869449
> 
> 赞同：0
> 
> 时间：2012-06-03T10:11:54.617
> 
> 标签：spring, spring-mvc

我试图找到一种方法来检查是否存在任何绑定错误，并基于它们我想在 Spring-MVC 中向用户显示一些消息。我知道这样的一种方式

```
<spring:hasBindErrors name="userName">

</spring:hasBindErrors> 
```

但这似乎与我表单的特定文件有关，我想要检查当前输入表单是否存在任何绑定错误？我也有 Struts2 的经验，他们有一个非常方便的方法`hasError()`，允许开发人员查看输入字段是否有任何错误。

是否为 Spring-MVC 验证定义了这种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:23:57.213

不是 Spring-MVC 的专家，因为我很少使用它，但如果我是正确的，你想要一个等价的`bindingResult.hasErrors()`，如果我是正确的，你需要使用

`hasBindErrors`标签。有关更多详细信息，请参阅文档

*   [hasBindErrors](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/apds04.html)

希望这可以帮助你

# php - 从 zip 中提取时损坏的图像

> ID：10869457
> 
> 赞同：8
> 
> 时间：2012-06-03T10:12:42.870
> 
> 标签：php, nginx

我尝试在同一台服务器上使用 curl 从一个虚拟主机下载一个 zip 文件到另一个。Zip 文件包含 *.php 和 *.jpg 文件。

问题是：**有时 JPG 文件会损坏**，如下所示：

![jpg 文件](../Images/9ccbbba803ad88f8c08bb9b954487fc5.png)

这是我的代码：

```
$out = fopen(ABSPATH.'/templates/default.zip','w+'); 
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_FILE, $out); 
curl_setopt($ch, CURLOPT_HEADER, 0); 
curl_setopt($ch, CURLOPT_URL, 'http://share.example.com/templates/default.zip'); 
curl_exec($ch); 
curl_close($ch); 

$zip = new ZipArchive;
if ($zip->open(ABSPATH.'/templates/default.zip') === TRUE) 
{
    if($zip->extractTo(ABSPATH.'/templates'))
    {
        echo 'OK';
    }

    $zip->close();
} 

//$zip->close(); 
```

我不明白我的jpg会发生什么。我也尝试使用 pclzip.lib.php，但没有运气。如何解决这个问题呢 ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:29:30.013

您是否尝试过通过 curl 下载文件并正常解压缩（即没有 php）？弄清楚是下载导致问题还是解压缩。

您也可以尝试使用 shell_exec 替换这两个部分之一（wget 代替 curl，unzip 代替 ZipArchive）。我的意思是仅用于调试，而不是用于生产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T16:55:14.773

最后我发现了问题所在。

我正在使用 Nginx Web 服务器，当我更改 nginx 配置文件时：

```
sendfile on; 
```

变成了

```
sendfile off; 
```

我的形象不再腐败。所以它不是 php 或 curl 问题。有趣的文章：[http ://technosophos.com/node/172](http://technosophos.com/node/172)

# c++ - 为什么将 char 指针流式传输到 cout 不打印地址？

> ID：10869459
> 
> 赞同：2
> 
> 时间：2012-06-03T10:13:04.967
> 
> 标签：c++, string, pointers, char, cout

当我使用 打印 char 指针时`printf()`，它会根据 %u 或 %s 使用转换说明符决定是打印地址还是打印整个字符串。

但是当我想用 做同样的事情时`cout`，如何`cout`决定应该在地址和整个字符串之间打印什么？这是一个示例来源：

```
int main()
{
  char ch='a';
  char *cptr=&ch;
  cout<<cptr<<endl;
  return 0;
} 
```

在这里，在我的 GNU 编译器中，`cout`试图将 ch 输出为字符串。

如何`ch`通过`cptr`using获取地址`cout`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T10:17:32.647

重载分辨率选择`ostream& operator<<(ostream& o, const char *c);`用于打印 C 样式字符串的。您希望`ostream& operator<<(ostream& o, const void *p);`选择另一个。您可能最好在这里进行演员表：

```
 cout << static_cast<void *>(cptr) << endl; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-03T10:16:40.573

`cout`如果收到 a 则打印一个字符串，就这么`char *`简单。

以下是 for 的`operator <<`重载`ostream`：

```
ostream& operator<< (bool val);
ostream& operator<< (short val);
ostream& operator<< (unsigned short val);
ostream& operator<< (int val);
ostream& operator<< (unsigned int val);
ostream& operator<< (long val);
ostream& operator<< (unsigned long val);
ostream& operator<< (float val);
ostream& operator<< (double val);
ostream& operator<< (long double val);
ostream& operator<< (const void* val);

ostream& operator<< (streambuf* sb);

ostream& operator<< (ostream& ( *pf )(ostream&));
ostream& operator<< (ios& ( *pf )(ios&));
ostream& operator<< (ios_base& ( *pf )(ios_base&));

ostream& operator<< (ostream& out, char c );
ostream& operator<< (ostream& out, signed char c );
ostream& operator<< (ostream& out, unsigned char c );

//this is called
ostream& operator<< (ostream& out, const char* s );
ostream& operator<< (ostream& out, const signed char* s );
ostream& operator<< (ostream& out, const unsigned char* s ); 
```

如果你想要地址，你想要：

```
ostream& operator<< (const void* val); 
```

所以你需要转换为`const void*`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T10:17:16.843

我只是将它转换为 void* 所以它不会尝试将其解释为 C 字符串：

```
cout << (void*) cptr << endl; 
```

但是，更安全的选择是使用 static_cast ，就像在 dirkgently 的回答中一样（这样至少在编译时检查了转换）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T10:18:20.977

正如 Luchian 所说，cout 根据类型知道要打印什么。如果要打印指针值，则应将指针转换为 void* ，它将作为指针插入。

# java - 将具有类型参数的类传递/返回给函数

> ID：10869467
> 
> 赞同：5
> 
> 时间：2012-06-03T10:14:00.723
> 
> 标签：java, generics

让我们假设以下方法（比如来自 Guava 的 Iterables）：

```
public static <T> Iterable<T> filter(final Iterable<?> unfiltered, final Class<T> type) {
    return null;
} 
```

和这个集合：

```
Set<?> objs = ...; 
```

然后编译以下代码并正确派生泛型

```
Iterable<String> a2 = Iterables.filter(objs, String.class); 
```

（在 Guava 中，这将返回所有字符串的迭代`objs`。）

但现在让我们假设以下类：

```
static class Abc<E> {
    E someField;
} 
```

我不知道如何调用`filter`和获取`Iterable<Abc<?>>`：

```
Iterable<Abc>    a3 = Iterables.filter(objs, Abc.class);
Iterable<Abc<?>> a4 = Iterables.filter(objs, Abc.class); // Compile error - Abc and Abc<?> are incompatible types
Iterable<Abc<?>> a5 = Iterables.filter(objs, Abc<?>.class); // Compile error
Iterable<Abc<?>> a6 = Iterables.<Abc<?>>filter(objs, Abc.class); // Compile error
Iterable<Abc<?>> a7 = (Iterable<Abc<?>>) Iterables.filter(objs, Abc.class); //  Compile error - inconvertible types
Iterable<Abc<?>> a8 = Iterables.filter(objs, new Abc<?>().getClass()); // Compile error
Iterable<Abc<?>> a8a = Iterables.filter(objs, new Abc<Object>().getClass()); // Compile error 
```

只有 a3 可以编译，但是我没有 Abc 上的参数，因此在后续代码中没有进行泛型类型检查。

我知道类型参数在运行时不存在，所以我不会尝试编写如下代码：

```
Iterable<Abc<String>> a9 = Iterables.filter(objs, Abc<String>.class); // Compile error 
```

我只想过滤所有 Abc 类型的对象（就像 a3 一样），但在结果中有泛型参数。我发现这样做的唯一方法是以下，这很愚蠢：

```
Iterable<Abc<?>> a10 = new HashSet<Abc<?>>();
for (Abc<?> a : Iterables.filter(objs, Abc.class)) {
    ((Set<Abc<?>>)a10).add(a);
} 
```

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:04:21.427

There is no satisfactory answer to this question. Class literals for types parameterized with *unbounded wildcards only* would work out in theory, we just don't have them.

You can produce the `Class<Abc<?>>`-typed class object with an unchecked cast and move it to a utility method or field. As long as there are few `Abc`s, this works quite nicely.

```
@SuppressWarnings("unchecked")
public static Class<Abc<?>> ABC = (Class<Abc<?>>)(Object) Abc.class; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:40:00.797

I found this compiles..

```
public static <T> Iterable<Abc<T>> myFilter (Iterable<Abc<T>> myIterator) {
    Class<Abc<T>> myClass = null;
    Iterable<Abc<T>> a3 = Iterables.filter(myIterator, myClass); 
    return a3;
} 
```

But it just moves the same problem up to the caller of **myFilter()**. I suspect [Ben Schulz](https://stackoverflow.com/users/774444/ben-schulz) has the correct answer.

# java - Java：内部具有不同 FOR 循环的递归循环的组合；输出： FOR 循环索引

> ID：10869468
> 
> 赞同：0
> 
> 时间：2012-06-03T10:14:01.253
> 
> 标签：java, recursion, counter, nested-loops

目前递归对我来说是新鲜且困难的话题，但是我需要在我的一种算法中使用它。

这是挑战：

我需要一种方法来指定递归次数（嵌套 FOR 循环的次数）和每个 FOR 循环的迭代次数。结果应该告诉我，与计数器类似的东西，但是计数器的每一列都限于特定的数字。

```
ArrayList<Integer> specs= new ArrayList<Integer>();
  specs.add(5); //for(int i=0 to 5; i++)
  specs.add(7);
  specs.add(9);
  specs.add(2);
  specs.add(8);
  specs.add(9); 

public void recursion(ArrayList<Integer> specs){
  //number of nested loops will be equal to: specs.size();
  //each item in specs, specifies the For loop max count e.g:
  //First outside loop will be: for(int i=0; i< specs.get(0); i++)
  //Second loop inside will be: for(int i=0; i< specs.get(1); i++)
  //...
} 
```

结果将类似于本手册的输出，嵌套循环：

```
 int[] i;
    i = new int[7];

    for( i[6]=0; i[6]<5; i[6]++){
        for( i[5]=0; i[5]<7; i[5]++){
            for(i[4] =0; i[4]<9; i[4]++){
                for(i[3] =0; i[3]<2; i[3]++){
                    for(i[2] =0; i[2]<8; i[2]++){
                        for(i[1] =0; i[1]<9; i[1]++){
                            //...
                            System.out.println(i[1]+" "+i[2]+" "+i[3]+" "+i[4]+" "+i[5]+" "+i[6]);
                        }
                    }
                }
            }
        }
    } 
```

我已经为此杀死了 3 天，但仍然没有结果，正在互联网上搜索它，但是示例太不同了。因此，我有生以来第一次在互联网上发布编程问题。提前谢谢您，您可以随意更改代码效率，我只需要相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:22:01.207

```
// ...
   recursion (specs, specs.size () - 1);    

// ...

   public void recursion(ArrayList<Integer> specs, int startWith){

      for (int i = 0; i < specs.get(startWith); i++) {
         // ...
         if (startWith - 1 >= 0)
            recursion (specs, startWith - 1);
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:35:33.553

您的函数现在还需要`specs`用于迭代的数组的索引，以及应该打印的先前数字：

```
public void recursion(ArrayList<Integer> specs, int index, String output) {
    if( index >= specs.size() ) {
         System.out.println(output);
        return;
    }
    for (int i = 0; i < specs.get(index); i++ )
        recursion( specs, index+1, Integer.toString(i) + " " + output );
} 
```

你应该这样称呼它：

```
ArrayList<Integer> specs= new ArrayList<Integer>();
specs.add(5);
specs.add(7);
specs.add(9);
specs.add(2);
specs.add(8);
specs.add(9);

recursion( specs, 0, "" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:37:01.267

这个片段是否给出了你想要的输出？（它是可编译和可执行的）

```
import java.util.ArrayList;
import java.util.List;

public class SO {

    static ArrayList<Integer> specs = new ArrayList<Integer>();
    static int[] i;

    public static void main(String[] args) throws Exception {
        specs.add(5); //for(int i=0 to 5; i++)
        specs.add(7);
        specs.add(9);
        specs.add(2);
        specs.add(8);
        specs.add(9);
        i = new int[specs.size()];
        printMe(0, specs, i);
    }

    static void printMe(int depth, List<Integer> _specs, int[] i) {
        if (_specs.isEmpty()) {
            System.out.println(printI(i));
            return;
        } else {
            for (int j = 0; j < _specs.get(0); j++) {
                i[depth] = j + 1; // + 1 since you seems to want to go from 1 and not 0
                printMe(depth + 1, _specs.subList(1, _specs.size()), i);
            }
        }
    }

    static String printI(int[] i) {
        StringBuilder sb = new StringBuilder();
        for (int j = 0; j < i.length; j++) {
            sb.append(i[j]);
            if (j < i.length - 1) {
                sb.append(" ");
            }

        }
        return sb.toString();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T10:47:18.423

你可以试试这个：

```
public static void loops(ArrayList<Integer> specs, int idx, StringBuilder res){
    if(idx==specs.size()-1){
        for (int i = 0; i < specs.get(idx); i++) {
            System.out.println(i+" "+res);
        }
    }
    else{
        for(int i=0;i<specs.get(idx);i++){
            res.insert(0,i+" ");
            loops(specs,idx+1,res);
            res.delete(0, 2);
        }
    }
} 
```

并调用：

```
 ArrayList<Integer> specs= new ArrayList<Integer>();
    specs.add(5); //for(int i=0 to 5; i++)
    specs.add(7);
    specs.add(9);
    specs.add(2);
    specs.add(8);
    specs.add(9);
    loops(specs,0, new StringBuilder()); 
```

# android - 开始一个新的随机活动

> ID：10869471
> 
> 赞同：0
> 
> 时间：2012-06-03T10:14:30.520
> 
> 标签：android, android-activity, random

单击按钮后如何开始随机活动？启动按钮后必须以随机模式启动 Activity 1、Activity 2 或 Activity 3。我该怎么办？

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    start = (Button) findViewById (R.id.bstart);

    start.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            //here must start a random activity..
        }
    }); 
```

# python - 在 EC2 上监控每个域的带宽、内存、cpu

> ID：10869472
> 
> 赞同：4
> 
> 时间：2012-06-03T10:14:35.160
> 
> 标签：python, amazon-ec2, amazon-web-services, amazon-cloudwatch

**python 中监控每个域**的 CPU、内存和带宽使用情况的最佳解决方案是什么？

该解决方案还必须适用于多个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:11:26.790

你结账了[Amazon CloudWatch](http://docs.pythonboto.org/en/latest/cloudwatch_tut.html)吗？

> Amazon CloudWatch 使您能够实时监控 AWS 资源，包括**Amazon EC2 实例**、Amazon EBS 卷、弹性负载均衡器和 Amazon RDS 数据库实例。**自动为这些 AWS 资源提供 CPU 利用率、延迟和请求计数等指标。您还可以提供自己的自定义应用程序和系统指标，例如内存使用量、事务量或错误率**，Amazon CloudWatch 也会监控这些指标。借助 Amazon CloudWatch，您可以访问最新的统计数据、查看图表并为您的指标数据设置警报。Amazon CloudWatch 功能可通过 API、命令行工具、AWS 开发工具包和 AWS 管理控制台访问。

然后，您可以使用[Amazon Python boto 库访问 CloudWatch 统计信息](http://docs.pythonboto.org/en/latest/cloudwatch_tut.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:21:38.793

CloudWatch 可以使用内置指标监控 CPU。对于内存，您可以使用 AWS 命令​​行工具的自定义指标或使用官方 AWS 开发工具包编写 powershell/ruby 脚本。

您可以使用 AWS 开发工具包监控任何可轻松量化的内容。要监控每个域的带宽使用情况，我建议使用 ntop 之类的东西。

# c - Cuda 编程将嵌套结构传递给内核

> ID：10869477
> 
> 赞同：0
> 
> 时间：2012-06-03T10:15:38.930
> 
> 标签：c, parallel-processing, cuda

我是 CUDA C 的新手，我正在尝试并行化 slave_sort 函数的以下代码，您会意识到它已经与 posix 线程并行工作。我有以下结构：

```
typedef struct{
   long densities[MAX_RADIX];
   long ranks[MAX_RADIX];
   char pad[PAGE_SIZE];
}prefix_node;

struct global_memory {
   long Index;                             /* process ID */
   struct prefix_node prefix_tree[2 * MAX_PROCESSORS];
} *global;

void slave_sort(){
         .
         .
         .
long *rank_me_mynum;
struct prefix_node* n;
struct prefix_node* r;
struct prefix_node* l;
         .
         .
MyNum = global->Index;
global->Index++;
n = &(global->prefix_tree[MyNum]);
     for (i = 0; i < radix; i++) {
        n->densities[i] = key_density[i];
        n->ranks[i] = rank_me_mynum[i];
     }
     offset = MyNum;
     level = number_of_processors >> 1;
     base = number_of_processors;
     while ((offset & 0x1) != 0) {
       offset >>= 1;
       r = n;
       l = n - 1;
       index = base + offset;
       n = &(global->prefix_tree[index]);
       if (offset != (level - 1)) {
         for (i = 0; i < radix; i++) {
           n->densities[i] = r->densities[i] + l->densities[i];
           n->ranks[i] = r->ranks[i] + l->ranks[i];
         }
       } else {
         for (i = 0; i < radix; i++) {
           n->densities[i] = r->densities[i] + l->densities[i];
         }
       }
       base += level;
       level >>= 1;
} 
```

Mynum 是处理器的数量。我希望在将代码传递给内核之后， Mynum 是`represented by blockIdx.x`。问题是我对结构感到困惑。我不知道如何在内核中传递它们。谁能帮我？

下面的代码对吗？

```
__global__ void testkernel(prefix_node *prefix_tree, long *dev_rank_me_mynum, long *key_density,long radix)

int i = threadIdx.x + blockIdx.x*blockDimx.x;
prefix_node *n;
prefix_node *l;
prefix_node *r;
long offset;
     .
     .
     .
n = &prefix_tree[blockIdx.x];
if((i%numthreads) == 0){
    for(int j=0; j<radix; j++){
        n->densities[j] = key_density[j + radix*blockIdx.x];
        n->ranks[i] = dev_rank_me_mynum[j + radix*blockIdx.x];
    }
    .
    .
    .
 } 

int main(...){

    long *dev_rank_me_mynum;
    long *key_density;
    prefix_node *prefix_tree;
    long radix = 1024;

    cudaMalloc((void**)&dev_rank_me_mynum, radix*numblocks*sizeof(long));
    cudaMalloc((void**)&key_density, radix*numblocks*sizeof(long));
    cudaMalloc((void**)&prefix_tree, numblocks*sizeof(prefix_node));

    testkernel<<<numblocks,numthreads>>>(prefix_tree,dev_runk_me_mynum,key_density,radix);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:18:05.933

您在编辑中发布的主机 API 代码看起来不错。该`prefix_node`结构仅包含静态声明的数组，因此只需一次`cudaMalloc`调用即可为内核分配内存以供其使用。您传递`prefix_tree`给内核的方法也很好。

内核代码虽然不完整并且包含一些明显的拼写错误，但就是另一回事了。似乎您的意图是每个块只有一个线程在`prefix_tree`. 这将是非常低效的，并且只利用了 GPU 总容量的一小部分。例如为什么这样做：

```
prefix_node *n = &prefix_tree[blockIdx.x];
if((i%numthreads) == 0){
    for(int j=0; j<radix; j++){
        n->densities[j] = key_density[j + radix*blockIdx.x];
        n->ranks[j] = dev_rank_me_mynum[j + radix*blockIdx.x];
    }
    .
    .
    .
} 
```

当你可以做到这一点时：

```
prefix_node *n = &prefix_tree[blockIdx.x];
for(int j=threadIdx.x; j<radix; j+=blockDim.x){
    n->densities[j] = key_density[j + radix*blockIdx.x];
    n->ranks[j] = dev_rank_me_mynum[j + radix*blockIdx.x];
} 
```

它合并内存读取并使用块中的尽可能多的线程，而不仅仅是一个，因此应该快很多倍。因此，也许您应该重新考虑直接尝试将您发布的串行 C 代码转换为内核的策略......

# javascript - 为 DotNet.HighCharts 中的每一列设置不同的颜色

> ID：10869479
> 
> 赞同：1
> 
> 时间：2012-06-03T10:15:44.453
> 
> 标签：javascript, .net, highcharts

有没有办法使用 DotNet.HighCharts 实现每列颜色不同的图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:53:13.010

可以从整个系列中单独设置单个点（在您的情况下为单个列）的属性。请参阅：[Highcharts API 点 - 颜色](http://www.highcharts.com/ref/#point--color)。以这个[jsFiddle](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/point/color/)为例。

# android - 同时动态壁纸和应用程序

> ID：10869481
> 
> 赞同：0
> 
> 时间：2012-06-03T10:15:54.083
> 
> 标签：android

我在市场上有两个独立的应用程序，一个是图形游戏，另一个是基于相同逻辑的壁纸。我认为，如果它可以与壁纸组合成一个单独的包，它会激励用户购买该应用程序。

这可能吗，以及如何设置 AndroidManifest 的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:25:14.457

只需将`<service>`带有正确意图过滤器的壁纸声明添加`android.service.wallpaper.WallpaperService`到您的游戏清单中，您就可以将壁纸与几乎任何应用程序捆绑在一起。

# html - 即使没有设置边框，也可以在桌子周围设置边框

> ID：10869483
> 
> 赞同：-2
> 
> 时间：2012-06-03T10:16:04.323
> 
> 标签：html, border

[http://www.welivetech.net/showthread.php?tid=62](http://www.welivetech.net/showthread.php?tid=62)

如果您仔细观察，在“测试”线程标题下，您会看到一个黑色边框。~~这也可以在头像的左侧找到。~~

有任何想法吗？我试图修复它无济于事。

浏览器：Windows 7 和 CentOS 上的 Chrome（最新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:36:31.943

That is not a border it is the padding of the td inside `<table id="post_120" .../>` add a `cellpadding="0"` attribute to that table and the border will disapear.

# c# - .Net TCP vs WCF vs Powershell

> ID：10869484
> 
> 赞同：1
> 
> 时间：2012-06-03T10:16:16.923
> 
> 标签：c#, .net, wcf, powershell

这已经被问了很多，但我正在寻求更具体的答案。

我正在设计/开发一套依赖于与代理和经理沟通的应用程序。他们将传达命令（从经理到代理）和统计信息（从代理到经理）。目前，这套应用程序只能在 Windows 平台上运行，但最终应该可以扩展到其他系统。使用此应用程序的一些地方可能不想在他们的系统中安装大量应用程序，而另一些地方可能不希望经理端坐在那里吸水（分析！），因此可能希望它在云中。

所以，我知道我可以使用 .Net TCP 套接字，它似乎具有良好的原始性能，并为我提供了很大的灵活性。

我也知道我可以使用 Windows Communication Foundation，这似乎自然是更好的选择。

但是，当我发送命令和接收统计信息时，我可以使用 Powershell 远程连接并使用服务器上可用的大量命令，从而排除编写客户端应用程序句号的可能性。

请记住，这些应用程序（尤其是客户端）应该只是坐在那里，保持安静，完成他们的工作并且不干扰一般操作，您建议哪个更好？

如果您需要更多说明，我很乐意这样做！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:40:02.580

> 他们将传达命令（从服务器到客户端）和统计信息（从客户端到服务器）。目前，这套应用程序只能在 Windows 平台上运行，但最终应该可以扩展到其他系统。

在您的描述中，有一项要求与 Power Shell 不兼容。Power Shell 仅适用于 Windows 世界。

如果配置正确，WCF 服务不应消耗任何资源。IIS 和 WAS 能够按需加载服务（根据来自客户端的请求）并在不需要时卸载。

[http://blogs.msdn.com/b/blambert/archive/2009/02/13/enable-iis.aspx](http://blogs.msdn.com/b/blambert/archive/2009/02/13/enable-iis.aspx)

[http://msdn.microsoft.com/en-us/library/ms731053.aspx](http://msdn.microsoft.com/en-us/library/ms731053.aspx)

从性能的角度来看，TCP 套接字是最好的，但不幸的是，实现将需要大量额外的 DEV 和 QA 工作来实现 WCF 中已经存在的所有管道。当您完成这项工作时，您将拥有一辆不符合行业标准的“自行车”。

**我的投票是 WCF。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:40:16.933

# jquery - 用jquery显示隐藏内容

> ID：10869489
> 
> 赞同：-1
> 
> 时间：2012-06-03T10:17:22.593
> 
> 标签：jquery, show-hide

我是编程新手.. 我想`show/hide`用 jquery 效果创建 div。

我有两个`<div>`元素，

1\. `<div class="div1">`
2\. `<div class="div2">`----> 我`hide`在我的 CSS 中设置为（显示：无）

这是我的html代码：

```
<a href="#" class="show_div_2">Div 2</a>

<div id="div1"> THIS IS DIV 1...</div>

<div id="div2"> THIS IS DIV 2...</div> 
```

这是我的`javascript`代码：

```
$(document).ready(function(){
    $(".div1").show();

    $('.show_div_2').click(function(){
      $(".div1").slideToggle('fast');
      $(".div2").slideToggle('slow');
    });

}); 
```

我的问题是..我怎么能在和`time interval`之间带来？？？换句话说，我想在隐藏后显示。`div1``div2``div2``div1`

请帮帮我.... thx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T10:19:25.457

您应该使用动画成功回调函数：

```
$(document).ready(function(){

  $(".div1").show();

  $('.show_div_2').click(function(){
    $(".div1").slideToggle('fast', function(){
      $(".div2").slideToggle('slow');
    });
  });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:30:22.053

我建议如下：

```
$('.show_div_2').click(
    function(e){
        e.preventDefault(); // prevents default action of the link element
        var div1 = $('#div1'), // reference to the jQuery object
            div2 = $('#div2');
        div1.fadeOut( // fades out the div of id="div1"
            function(){
                div2.fadeIn(); /* fades in the div id="div2" once the
                                  previous fadeOut has completed */
            });
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xm5gM/)。

此外，您的原始代码存在一些问题，例如：`$(".div1").show();`选择 的所有元素`class="div1"`，但您的 HTML 中都不存在这些元素；你*得到*的是`id="div1"`，它需要`$('#div1')`选择器类型。

参考：

*   jQuery：
    *   [`click()`](http://api.jquery.com/click/).
    *   [`fadeIn()`](http://api.jquery.com/fadeIn/).
    *   [`fadeOut()`](http://api.jquery.com/fadeOut/).
*   选择器：
    *   [CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)。
    *   [jQuery 选择器](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:21:01.940

```
$(".div1").slideToggle('fast',function(){
   $(".div2").slideToggle('slow');
}); 
```

jQuery 效果有一个回调，当效果完成时执行。如果在 div1 上的效果完成后在 div2 上运行效果，则完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T10:21:25.477

尝试这个：

```
$('.show_div_2').click(function(){
$(".div1").slideToggle('fast', function(){
  $(".div2").slideToggle('slow');
});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T10:21:38.137

您可以像这样向 slideToogle() 函数添加回调函数：

```
$(".div1").slideToggle('fast', function() {
   // this function is called when the div1 slideToogle function is done
    $(".div2").slideToggle('slow'); 
}); 
```

# hibernate - 休眠。仅订购列表结果的一部分

> ID：10869493
> 
> 赞同：0
> 
> 时间：2012-06-03T10:18:07.900
> 
> 标签：hibernate, hql

为分页设置 maxResults 并按日期设置顺序，但排序仅针对项目的数量（值 maxResults），而不是完整列表。

```
@Override
public List<News> getNewsList(final List<Integer> rssIds, final int numberOfNewsPerPage, final int indexOfFirstNews) {
    HibernateCallback<List<News>> callback = new HibernateCallback<List<News>>() {

        @Override
        public List<News> doInHibernate(Session sn) throws HibernateException, SQLException {
            Query query = sn.createQuery(" from News as n "
                    + "where n.rssId in (:idsParam) "
                    + "order by :orderby");
            query.setParameterList("idsParam", rssIds);
            query.setParameter("orderby", "date desc");
            query.setFirstResult(indexOfFirstNews);
            query.setMaxResults(numberOfNewsPerPage);
            return query.list();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:00:21.707

如果您的问题是：“如何仅对查询返回的项目进行排序，而不是对整个列表进行排序，然后应用第一个和最大结果约束？”，那么在 Java 中，如果不对结果列表进行显式排序，就不可能，使用比较器。

另一种方法是使用本机 SQL 查询，但查询将取决于您使用的数据库。

# video - 逆向工程未知 mpeg4

> ID：10869500
> 
> 赞同：1
> 
> 时间：2012-06-03T10:19:06.017
> 
> 标签：video, mpeg-4

我有一般编程相关的问题。我有一个未知 mpeg4 格式的视频，我想编写 ac 程序将其解码为已知的 mpeg4 格式。我对我的输入 mpeg4 格式一无所知。我应该从哪里开始有什么想法？

问候， Farrukh Arshad

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:23:47.260

FFMpeg 是一个很棒的库，它允许您使用很多编解码器进行编码/解码。在查找视频格式方面也相当不错。

我以前用它来将视频标准化为单一格式。这是使用在程序内部调用的 shell 脚本完成的，因为当时我没有时间使用 FFMpeg API；我刚刚为二进制可执行文件编写了一个包装器，这对我的目的来说效果很好。

API 本身没有最好的文档，但有示例应用程序，并且默认的 ffmpeg 程序也是开源的，因此您可以查看示例。

希望这可以帮助。

[http://ffmpeg.org/](http://ffmpeg.org/)

# jdbc - Play Framework：使用 H2 内存数据库获取序列 nextval 时出错

> ID：10869508
> 
> 赞同：5
> 
> 时间：2012-06-03T10:20:43.177
> 
> 标签：jdbc, playframework-2.0, h2, ebean

正如标题所示，我在内存中使用带有 H2 的 FakeApplication 运行 Play 2.0.1 测试时遇到错误。

我设置了一个基本的单元测试：

```
public class ModelTest {
    @Test
    public void checkThatIndustriesExist() {
        running(fakeApplication(inMemoryDatabase()), new Runnable() {
            public void run() {
                Industry industry = new Industry();
                industry.name = "Some name";
                industry.shortname = "some-name";
                industry.save();
                assertThat(Industry.find.all()).hasSize(1);
            }
        });
    } 
```

这会产生以下异常：

```
[info] test.ModelTest
[error] Test test.ModelTest.checkThatIndustriesExist failed: Error getting sequence nextval
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.getMoreIds(SequenceIdGenerator.java:213)
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.loadMoreIds(SequenceIdGenerator.java:163)
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.nextId(SequenceIdGenerator.java:118)
[error]     at com.avaje.ebeaninternal.server.deploy.BeanDescriptor.nextId(BeanDescriptor.java:1218)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.setIdGenValue(DefaultPersister.java:1304)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.insert(DefaultPersister.java:403)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.saveEnhanced(DefaultPersister.java:345)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.saveRecurse(DefaultPersister.java:315)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.save(DefaultPersister.java:282)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServer.save(DefaultServer.java:1577)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServer.save(DefaultServer.java:1567)
[error]     at com.avaje.ebean.Ebean.save(Ebean.java:538)
[error]     at play.db.ebean.Model.save(Model.java:76)
[error]     at test.ModelTest$1.run(ModelTest.java:24)
[error]     at play.test.Helpers.running(Helpers.java:277)
[error]     at test.ModelTest.checkThatIndustriesExist(ModelTest.java:21)
[error]     ...
[error] Caused by: org.h2.jdbc.JdbcSQLException: Syntax Fehler in SQL Befehl "SELECT INDUSTRY_SEQ.NEXTVAL UNION[*] SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL "; erwartet "identifier"
[error] Syntax error in SQL statement "SELECT INDUSTRY_SEQ.NEXTVAL UNION[*] SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL "; expected "identifier"; SQL statement:
[error] select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval [42001-158]
[error]     at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
[error]     at org.h2.message.DbException.get(DbException.java:169)
[error]     at org.h2.message.DbException.getSyntaxError(DbException.java:194)
[error]     at org.h2.command.Parser.readColumnIdentifier(Parser.java:2777)
[error]     at org.h2.command.Parser.readTermObjectDot(Parser.java:2336)
[error]     at org.h2.command.Parser.readTerm(Parser.java:2453)
[error]     at org.h2.command.Parser.readFactor(Parser.java:2035)
[error]     at org.h2.command.Parser.readSum(Parser.java:2022)
[error]     at org.h2.command.Parser.readConcat(Parser.java:1995)
[error]     at org.h2.command.Parser.readCondition(Parser.java:1860)
[error]     at org.h2.command.Parser.readAnd(Parser.java:1841)
[error]     at org.h2.command.Parser.readExpression(Parser.java:1833)
[error]     at org.h2.command.Parser.parseSelectSimpleSelectPart(Parser.java:1746)
[error]     at org.h2.command.Parser.parseSelectSimple(Parser.java:1778)
[error]     at org.h2.command.Parser.parseSelectSub(Parser.java:1673)
[error]     at org.h2.command.Parser.parseSelectUnion(Parser.java:1518)
[error]     at org.h2.command.Parser.parseSelect(Parser.java:1506)
[error]     at org.h2.command.Parser.parsePrepared(Parser.java:405)
[error]     at org.h2.command.Parser.parse(Parser.java:279)
[error]     at org.h2.command.Parser.parse(Parser.java:251)
[error]     at org.h2.command.Parser.prepareCommand(Parser.java:217)
[error]     at org.h2.engine.Session.prepareLocal(Session.java:415)
[error]     at org.h2.engine.Session.prepareCommand(Session.java:364)
[error]     at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1119)
[error]     at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:71)
[error]     at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:267)
[error]     at com.jolbox.bonecp.ConnectionHandle.prepareStatement(ConnectionHandle.java:820)
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.getMoreIds(SequenceIdGenerator.java:193)
[error]     ... 80 more 
```

我的模型如下所示：

```
@Entity
@Table(name = "industry")
public class Industry extends Model {
    @Id public Long id;
    public String name;
    public String shortname;

    // called in the view to trigger lazy-loading
    public String getName() {
        return name;
    }

    public static Finder<Long, Industry> find = new Finder<Long, Industry>(Long.class, Industry.class);
} 
```

...最后是我最初进化的相关部分：

```
create table industry (
    id        bigint not null,
    name      varchar(255),
    shortname varchar(255),
    constraint pk_industry primary key (id)
}

create sequence industry_seq start with 1000; 
```

在我的 PostgreSQL 数据库上运行一切正常，从我的角度来看，代码与[Play2.0 Computer Database Sample](https://github.com/playframework/Play20/tree/master/samples/java/computer-database)没有任何不同。

我很高兴得到任何帮助 - 谢谢！

问候，亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T16:46:28.117

解决了问题，方法如下：

*   在调用 inMemoryDatabase() 之前，我提供了自己的配置
*   数据库的名称是“测试”，而不是调用 inMemoryDatabase() 使用的“默认”
*   因为我没有在 conf/evolutions/test 中保留进化，而只是在 conf/evolutions/default 中没有创建模式
*   我必须清理应用程序，因为在更改为 inMemoryDatabase() 后未应用“默认”配置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T16:29:13.483

仅使用您的代码和我无法重现的新 Play **2.0.1项目。**这是我的代码和*导入*配置。由于类不是问题，我的猜测是您关闭了进化`evolutionplugin=disabled`并且您的数据库进化永远不会被应用，因此您的例外中的“预期标识符”。

**如上所述，**编辑禁用数据库演变会产生与您遇到的相同的异常，请参见底部。****

 ****Edit-2**[这篇博](http://blog.matthieuguillermin.fr/2012/03/unit-testing-tricks-for-play-2-0-and-ebean/)文的作者描述了如何手动应用进化。看起来不太性感，但我应该每个项目只需要实现一次该基类。如果有人知道框架内更优雅的东西，一定要告诉。

Ebean Evolution（自动生成）：

```
create table industry (   
  id              bigint not null,  
  name            varchar(255),   shortname                
  varchar(255),   constraint pk_industry primary key (id)) ;
  create sequence industry_seq;
; 
```

我的模特行业

```
package models;

import play.db.ebean.Model;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "industry")
public class Industry extends Model {
    @Id
    public Long id;
    public String name;
    public String shortname;

    // called in the view to trigger lazy-loading
    public String getName() {
        return name;
    }

    public static Finder<Long, Industry> find 
           = new Model.Finder<Long, Industry>(Long.class, Industry.class);
} 
```

我的单元测试

```
package models;

import org.junit.Test;

import java.util.List;
import java.util.Map;

import static org.fest.assertions.Assertions.assertThat;
import static play.test.Helpers.fakeApplication;
import static play.test.Helpers.inMemoryDatabase;
import static play.test.Helpers.running;

public class ModelTest {

    @Test
    public void checkThatIndustriesExist() {
        running(fakeApplication(inMemoryDatabase()), new Runnable() {
            public void run() {
                Industry industry = new Industry();
                industry.name = "Some name";
                industry.shortname = "some-name";
                industry.save();
                assertThat(Industry.find.all()).hasSize(1);
            }
        });
    }

} 
```

我的 appication.conf

```
application.secret="8aXG0?h`kxccxs6JM?WdB@<v`kwouvQr2<y5Y>9jk3XU1yHV`Yr>18xRKHv8PTdv"
application.langs="en"
ebean.default="models.*"
logger.root=ERROR
logger.play=INFO
logger.application=DEBUG 
```

测试输出：

```
[stackoverflow-10869508] $ test
[info] Updating {file:/Users/martin/workspace/stackoverflow-10869508/}stackoverflow-10869508...
[info] Done updating.                                                                  
[info] Compiling 4 Scala sources and 3 Java sources to /Users/martin/workspace/stackoverflow-10869508/target/scala-2.9.1/classes...
[info] Compiling 1 Java source to /Users/martin/workspace/stackoverflow-10869508/target/scala-2.9.1/test-classes...
[info] models.ModelTest
[info] + models.ModelTest.checkThatIndustriesExist
[info] 
[info] 
[info] Total for test models.ModelTest
[info] Finished in 2.289 seconds
[info] 1 tests, 0 failures, 0 errors
[info] Passed: : Total 1, Failed 0, Errors 0, Passed 1, Skipped 0 
```

测试输出禁用进化：

```
[stackoverflow-10869508] $ test
[info] Compiling 1 Java source to /Users/martin/workspace/stackoverflow-10869508/target/scala-2.9.1/test-classes...
[info] models.ModelTest
[error] Test models.ModelTest.checkThatIndustriesExist failed: Error getting sequence nextval
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.getMoreIds(SequenceIdGenerator.java:213)
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.loadMoreIds(SequenceIdGenerator.java:163)
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.nextId(SequenceIdGenerator.java:118)
[error]     at com.avaje.ebeaninternal.server.deploy.BeanDescriptor.nextId(BeanDescriptor.java:1218)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.setIdGenValue(DefaultPersister.java:1304)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.insert(DefaultPersister.java:403)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.saveEnhanced(DefaultPersister.java:345)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.saveRecurse(DefaultPersister.java:315)
[error]     at com.avaje.ebeaninternal.server.persist.DefaultPersister.save(DefaultPersister.java:282)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServer.save(DefaultServer.java:1577)
[error]     at com.avaje.ebeaninternal.server.core.DefaultServer.save(DefaultServer.java:1567)
[error]     at com.avaje.ebean.Ebean.save(Ebean.java:538)
[error]     at play.db.ebean.Model.save(Model.java:76)
[error]     at models.ModelTest$1.run(ModelTest.java:22)
[error]     at play.test.Helpers.running(Helpers.java:277)
[error]     at models.ModelTest.checkThatIndustriesExist(ModelTest.java:17)
[error]     ...
[error] Caused by: org.h2.jdbc.JdbcSQLException: Syntax Fehler in SQL Befehl "SELECT INDUSTRY_SEQ.NEXTVAL UNION[*] SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL "; erwartet "identifier"
[error] Syntax error in SQL statement "SELECT INDUSTRY_SEQ.NEXTVAL UNION[*] SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL UNION SELECT INDUSTRY_SEQ.NEXTVAL "; expected "identifier"; SQL statement:
[error] select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval union select industry_seq.nextval [42001-158]
[error]     at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
[error]     at org.h2.message.DbException.get(DbException.java:169)
[error]     at org.h2.message.DbException.getSyntaxError(DbException.java:194)
[error]     at org.h2.command.Parser.readColumnIdentifier(Parser.java:2777)
[error]     at org.h2.command.Parser.readTermObjectDot(Parser.java:2336)
[error]     at org.h2.command.Parser.readTerm(Parser.java:2453)
[error]     at org.h2.command.Parser.readFactor(Parser.java:2035)
[error]     at org.h2.command.Parser.readSum(Parser.java:2022)
[error]     at org.h2.command.Parser.readConcat(Parser.java:1995)
[error]     at org.h2.command.Parser.readCondition(Parser.java:1860)
[error]     at org.h2.command.Parser.readAnd(Parser.java:1841)
[error]     at org.h2.command.Parser.readExpression(Parser.java:1833)
[error]     at org.h2.command.Parser.parseSelectSimpleSelectPart(Parser.java:1746)
[error]     at org.h2.command.Parser.parseSelectSimple(Parser.java:1778)
[error]     at org.h2.command.Parser.parseSelectSub(Parser.java:1673)
[error]     at org.h2.command.Parser.parseSelectUnion(Parser.java:1518)
[error]     at org.h2.command.Parser.parseSelect(Parser.java:1506)
[error]     at org.h2.command.Parser.parsePrepared(Parser.java:405)
[error]     at org.h2.command.Parser.parse(Parser.java:279)
[error]     at org.h2.command.Parser.parse(Parser.java:251)
[error]     at org.h2.command.Parser.prepareCommand(Parser.java:217)
[error]     at org.h2.engine.Session.prepareLocal(Session.java:415)
[error]     at org.h2.engine.Session.prepareCommand(Session.java:364)
[error]     at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1119)
[error]     at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:71)
[error]     at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:267)
[error]     at com.jolbox.bonecp.ConnectionHandle.prepareStatement(ConnectionHandle.java:820)
[error]     at com.avaje.ebean.config.dbplatform.SequenceIdGenerator.getMoreIds(SequenceIdGenerator.java:193)
[error]     ... 80 more
[info] x models.ModelTest.checkThatIndustriesExist
[info] 
[info] 
[info] Total for test models.ModelTest
[info] Finished in 2.028 seconds
[info] 1 tests, 1 failures, 0 errors
[error] Failed: : Total 1, Failed 1, Errors 0, Passed 0, Skipped 0
[error] Failed tests:
[error]     models.ModelTest
[error] {file:/Users/martin/workspace/stackoverflow-10869508/}stackoverflow-10869508/test:test: Tests unsuccessful
[error] Total time: 3 s, completed 03.06.2012 18:34:39 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T20:40:25.030

我的身份证看起来像这样，我没有得到那个错误......

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
public Long id; 
```**

# objective-c - 如何为 UIBezierPath 设置动画

> ID：10869509
> 
> 赞同：25
> 
> 时间：2012-06-03T10:20:56.547
> 
> 标签：objective-c, animation, calayer, cgpath, uibezierpath

我想将矩形的 UIBezierPath 设置为三角形的动画，而不是为路径上的视图设置动画，而是为路径本身设置动画，使其从一种形状变形为另一种形状。路径被添加到 CALayer

```
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.fillColor = [[UIColor whiteColor] CGColor];    
maskLayer.path = [self getRectPath];

-(CGPathRef)getTrianglePath
{
    UIBezierPath* triangle = [UIBezierPath bezierPath];
    [triangle moveToPoint:CGPointZero];
    [triangle addLineToPoint:CGPointMake(width(self.view),0)];
    [triangle addLineToPoint:CGPointMake(0, height(self.view))];
    [triangle closePath];
    return [triangle CGPath];
}

-(CGPathRef)getRectPath
{
    UIBezierPath*rect = [UIBezierPath bezierPathWithRect:self.view.frame];
    return [rect CGPath];
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-04T18:44:18.597

我不是 CoreAnimation 方面的专家，但您可以定义`CABasicAnimation`如下

```
CABasicAnimation *morph = [CABasicAnimation animationWithKeyPath:@"path"];
morph.duration = 5;
morph.toValue = (id) [self getTrianglePath];
[maskLayer addAnimation:morph forKey:nil]; 
```

第一行声明您要定义一个更改`path`图层属性的动画。第二行表示动画需要五秒钟，第三行给出动画的最终状态。最后，我们将动画添加到图层。键是动画的唯一标识符，也就是说，如果添加两个具有相同键的动画，则只考虑最后一个。该键还可用于覆盖所谓的隐式动画。默认情况下， a 有几个属性`CALayer`是动画的。更准确地说，如果您更改这些属性之一，则更改将以 0.25 的持续时间进行动画处理。

# perl - 有没有办法知道 Perl 中未知类的实例的方法

> ID：10869511
> 
> 赞同：5
> 
> 时间：2012-06-03T10:21:17.437
> 
> 标签：perl, object

我有一个 Perl 程序，它使用我从另一个来源获得的包。该方法的功能之一返回一个未知类的对象，有没有办法让我在不查看其类实现的情况下获取对象的所有可能方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T10:54:08.800

并不真地。

**TL;博士：**

*   您可以找到显式声明或放置在对象类的名称空间中的子例程的名称。

*   **您无法区分这些子例程中的哪些是对象上的对象方法，哪些是类或非对象子程序**（这是列出的最严重的问题/限制）。

*   您无法使用此方法找到子类中的对象从超类继承的方法，**除非**它们已经在您的对象上调用过。

    这可以通过检查`@ISA`类来[构建继承树或使用适当的 CPAN 模块](https://stackoverflow.com/questions/10870581/what-is-the-best-practice-for-finding-out-all-superclasses-of-a-perl-class)来编写。

*   您找不到动态添加到类中的方法（AUTOLOAD，在某处的代码中手动注入方法）。

**详细地**

1.  您可以找到该类中的所有子例程（通过结合类名称空间是一个散列的事实，因此其中的所有标识符都是该散列中的键；以及`UNIVERSAL::can`对单独子例程的调用）。

    因此，如果您保证（通过非技术合同）类中 100% 的子例程是对象方法，并且您的类不是子类，您可以找到它们的列表。

    ```
    package MyClass;
    use vars qw($z5);
    my $x = 11; our $y = 12; $z5 = 14; %z2 = (1=>2); # my, our, globals, hash
    sub new { return bless({}, $_[0]) }; # Constructor
    sub x1 { my $self = shift; print $_[0]; };
    sub y2  { my $self = shift; print $_[0]; };
    ##############################################################################
    package MySubClass;
    use vars qw(@ISA);
    @ISA = ("MyClass");
    sub z3 { return "" };
    ##############################################################################
    package main;
    use strict; use warnings;

    my $obj = MyClass->new();
    list_object_methods($obj);
    my $obj2 = MySubClass->new();
    list_object_methods($obj2);
    $obj2->x1();
    list_object_methods($obj2); # Add "x1" to the list!

    sub list_object_methods {
        my $obj = shift;
        my $class_name = ref($obj);
        no strict;
        my @identifiers = keys %{"${class_name}::"};
        use strict;
        my @subroutines = grep { UNIVERSAL::can($obj, $_) } @identifiers;
        print "Class: ${class_name}\n";
        print "Subroutines: \n=========\n"
            . join("\n", sort @subroutines) . "\n=========\n";
    } 
    ```

    ... 印刷：

    ```
    Class: MyClass
    Subroutines:
    =========
    new
    x1
    y2
    =========
    Class: MySubClass
    Subroutines:
    =========
    new
    z3
    =========
    Class: MySubClass
    Subroutines:
    =========
    new
    x1
    z3
    ========= 
    ```

    请注意，第一次打印的列表（对于 MySubClass）`new`，`z3`但不是`x1`-`y2`因为`new`已执行并`z3`在类中声明；但`x1`两者`y2`都不是——它们只是理论上继承的。但是，一旦我们执行了一个继承的`x1`方法，那么第二次列表包含它，但仍然缺少继承`y2`的。

    * * *

2.  但不幸的是，你不能区分一个子程序是对象方法（例如，将它获得的第一个参数视为对象）、类方法（例如，将它获得的第一个参数视为类名）或非 OO 子程序（将第一个参数视为常规参数）。

    要区分这 3 个，唯一的方法是实际从语义上分析代码。否则，您无法区分：

    ```
    sub s_print_obj {
        my ($self, $arg1) = @_;
        $s->{arg1} = $arg1;
        print "$arg1\n";
    }
    # $obj->s_print_obj("XYZ") prints "XYZ" and stores the data in the object

    sub s_print_class {
        my ($class, $arg1) = @_; 
        print "Class: $class\n";
        print "$arg1\n";
    }
    # $obj->s_print_class("XYZ") prints "Class: MyClass\nXYZ\n"

    sub s_print_static {
        my ($self, $arg1) = @_;
        print "$arg1\n";
    }
    # $obj->s_print_static("XYZ") prints stringified representation of $obj 
    ```

    注意：事实上，有些人实际上编写了他们的类的方法——那些可以以这种方式工作的方法——以明确地在所有 3 种（或前 2 种）情况下工作，无论该方法如何被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:22:48.747

DVK 的回答是准确的，但有点冗长。简短的回答是可以，但您不知道什么是公共对象方法，什么不是。从其他模块导入的私有方法和函数可能会出现。

获取可调用的具体（即非自动加载）方法列表的最简单方法是使用[perl5i 元对象](http://search.cpan.org/perldoc?perl5i%3a%3aMeta)的[methods()](http://search.cpan.org/perldoc?perl5i%3a%3aMeta#methods)方法。

```
use perl5i::2;

my $object = Something::Something->new;
my @methods = $object->mo->methods; 
```

这至少消除了很多代码。

# spring - 与 Appengine 一起使用的 Spring 框架的哪些部分

> ID：10869519
> 
> 赞同：3
> 
> 时间：2012-06-03T10:21:56.960
> 
> 标签：spring, google-app-engine

现在，我在运行 Spring Framework 的某些部分时遇到了很多问题，比如使用 Spring MVC 运行我的 Appengine Web 应用程序没有问题，但是在 Appengine 之上运行 Spring Data 时有很多问题。

我不知道框架的哪个部分已经过测试可以与 Appengine (AE) 一起使用？

*   Spring Security 可以与 AE 一起使用吗？
*   Spring Data 可以与 AE 一起使用吗？

我猜对 AE 根本没有计划支持这些框架。但是，希望我是错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:00:26.853

我建议看这里： [https ://code.google.com/p/googleappengine/wiki/WillItPlayInJava](https://code.google.com/p/googleappengine/wiki/WillItPlayInJava)

Spring Security 被列为半兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:35:00.803

至于 Spring Security，它工作得很好。您只需要启用会话。如果您想对静态文件应用 SPring 过滤器，请确保将它们从 appengine-web.xml 中的静态资源中排除。

至于 Spring Data，我从未尝试过，但您至少可以使用 JPA 和 REST 子项目。

# php - Apaches mod_rewrite 问题

> ID：10869522
> 
> 赞同：3
> 
> 时间：2012-06-03T10:22:34.110
> 
> 标签：php, apache, mod-rewrite

我遇到了 apaches mod_rewrite 的问题。我想用我的 php 应用程序制作干净的 url，但它似乎没有给出我期望的结果。

我在我的 .htaccess 文件中使用此代码：

```
RewriteEngine on
RewriteRule ^project/([0-9]{4})/([0-9]{2})$ /project/index.php?q=$1&r=$2 [L]
RewriteRule ^project/([0-9]{4})$ /project/index.php?q=$1 [L] 
```

要做到这一点，当我查看时`http://localhost/user/project/system`，这将是查看的等价物`http://localhost/user/project/index.php?q=system`

我没有得到任何结果，而是得到一个典型的 404 错误。

我还刚刚检查了 mod_rewrite 是否可以通过将我的 .htaccess 代码替换为：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule (.*) http://www.stackoverflow.com 
```

它正确地将我重定向到这里，所以 mod_rewrite 肯定是有效的。

我的项目的根路径是`/home/user/public_html/project`

用于查看我的项目的 url 是`http://localhost/user/project`

如果需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:41:59.963

You have [0-9]{4} in your regex which will only match numbers of 4 digits. "system", however, is not a number of 4 digits, and therefore does not match.

You can use something like [^/]+ instead.

```
RewriteRule ([^/]+)/([0-9]{2})$ /index.php?q=$1&r=$2 [L]
RewriteRule ([^/]+)$ /index.php?q=$1 [L] 
```

Don't know if the second parameter should be a number with 2 digits or not.

Edit: I also added "user" at the beginning now.

Edit2: Okay, I thought you were in the root htdocs with your htaccess. So remove "project" and "user" if you are in "project" with the .htaccess.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:30:34.413

你大概是说

```
RewriteRule ^/project/([0-9]{4})/([0-9]{2})$ /project/index.php?q=$1&r=$2 [L] 
RewriteRule ^/project/([0-9]{4})$ /project/index.php?q=$1 [L] 
```

'^project' 的意思是“行首是'project'”，但开头是'/project'，所以你需要包括起始斜杠（即'^/project...'）。

* * *

抱歉，错过了系统位（和用户位）。正专心于斜线。

```
RewriteRule ^/user/project/([a-zA-Z0-9]*)/([a-zA-Z0-9]*)$ /user/project/index.php?q=$1&r=$2 [L] 
RewriteRule ^/user/project/([a-zA-Z0-9]*)$ /user/project/index.php?q=$1 [L] 
```

应该有你的权利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:55:39.727

如果您的`.htaccess`文件确实已经位于`project/`子目录中，则不要在 RewriteRule 中再次提及它。去掉它：

```
RewriteRule ^([0-9]{4})/([0-9]{2})$ /project/index.php?q=$1&r=$2 [L]
# no "project/" here 
```

规则始终与当前本地文件名映射有关。

其他实验[RewriteBase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)。

# java - 在 TreeMap 中获取特定值

> ID：10869523
> 
> 赞同：0
> 
> 时间：2012-06-03T10:22:40.820
> 
> 标签：java, treemap

所以，我抓住了我认为 Treemap 作为一个字符串，它看起来像这样：

```
{Username1={password=password1}, Username2={password=password2}} 
```

我将如何获取值“用户名”和“用户名 2”以及用户名 1 的密码（密码 1）和用户名 2 的密码（密码 2）？有没有办法遍历数组中的这些值或类似的东西？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:29:13.760

`TreeMap`是有序的`Map`。所有地图都有这 3 种方法：

```
map.keySet(); //returns a Set containing the keys (Username in your case)
map.values(); //returns a Collection containing the values (the passwords in your case)
map.entrySet(); //retrurns a Set of entries (an entry is a key + value) 
```

如果您想在循环中访问两者，最好的方法是通过入口集：

```
for (Map.Entry<UserName, Password> e : map.entrySet()) {
    UserName user = e.getKey();
    Password pwd = e.getValue();
} 
```

# hover - 在 CSS 中创建菜单时，悬停不起作用

> ID：10869524
> 
> 赞同：0
> 
> 时间：2012-06-03T10:22:41.003
> 
> 标签：hover, css

我正在使用 CSS 创建下拉菜单，但我不知道它出了什么问题。触发悬停时，它不会删除子菜单（我的代码中的无序列表）。我被困在这里了，请帮帮我。

我还尝试了可见性属性而不是显示。我只能 `menu1, menu2, menu3`在浏览器中水平看到，没有别的。

我在 XP SP3 上使用 IE7。

### CSS：

```
#navMenu ul{
    argin:0;        
    padding:0;
}
#navMenu li {
    margin:px;    
    padding:0;  
    position:relative;
    float:left; 
    display:block;  
    list-style:none;
}
#navMenu li a{
    text-align:center;
    text-decoration:none;
    width:100;  
    display:block;
}
#navMenu ul ul{ 
    display:none;
}
#navMenu ul li : hover  ul {
    width:auto;
    position:absolute;
    background:#453DD;
    display:block;
} 
```

### HTML：

```
<div id="wrapper" >
    <div id="navMenu">
        <ul>
            <li><a href="#">menu1</a>  
                <ul>
                    <li><a href="#">menuitem11</a></li>
                    <li><a href="#">menuitem12</a></li>
                    <li><a href="#">menuitem13</a></li>
                    <li><a href="#">menuitem14</a></li>
                </ul>   
            </li>
            <li><a href="#">menu2</a>   
                <ul>
                    <li><a href="#">menuitem11</a></li>
                    <li><a href="#">menuitem12</a></li>
                    <li><a href="#">menuitem13</a></li>
                    <li><a href="#">menuitem14</a></li>
                </ul>   
            </li>
            <li><a href="#">menu3</a>   
                <ul>
                    <li><a href="#">menuitem11</a></li>
                    <li><a href="#">menuitem12</a></li>
                    <li><a href="#">menuitem13</a></li>
                    <li><a href="#">menuitem14</a></li>
                </ul>   
        </ul>
    </div>
</div> 
```

[**JSFiddle**](http://jsfiddle.net/G8j9n/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:41:20.983

标签名称和伪类之间不能有任何空格，就像您必须使用`li:hover`的那样，而不是`li : hover`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:26:54.530

你的风格变得一团糟。它缺少单位和/或值。这似乎有效。你可以[在这里](http://jsfiddle.net/7SMw8/)看到它。

```
#navMenu ul{
margin:0;        
padding:0;
}
#navMenu li {
margin:0px;    
padding:0;  
position:relative;
float:left; 
display:block;  
list-style:none;
}
#navMenu li a{
text-align:center;
text-decoration:none;
width:100px;  
display:block;
}
#navMenu ul ul{ 
display:none;
}
#navMenu ul li:hover  ul {
width:auto;
position:absolute;
background:#453DD;
display:block;
} 
```

# xaml - 发布预览：找不到名称/键 FocusVisualWhiteStrokeBrush 的资源

> ID：10869527
> 
> 赞同：2
> 
> 时间：2012-06-03T10:23:17.713
> 
> 标签：xaml, windows-8, windows-runtime

我在我的应用程序中使用 FocusVisualWhiteStrokeBrush 画笔。

此资源在 Windows 8 的**消费者预览版**中存在。这是用于在 Windows 8 的消费者预览版中定义 xaml 按钮模板的画笔。

但是在**发布预览**中，我收到了“找不到具有名称/键 FocusVisualWhiteStrokeBrush 的资源”消息的异常。

也许有人知道如何在我的应用程序中使用带有 FocusVisualWhiteStrokeBrush 画笔的资源？

我正在为 Windows 8 Visual Studio 使用 Express 2012 RC。

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:11:27.740

添加到此 - 以供将来参考，如果有人对其他资源有类似的错误，请参阅：[http](http://aka.ms/rpdevdoc) ://aka.ms/rpdevdoc （转到 download.microsoft.com）。

本文档有一个旧 -> 新资源名称表，以帮助将应用程序从消费者预览版迁移到新的发布预览版模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:57:55.373

我使用 :Blend for Visual Studio 找到了答案 :) - FocusVisualWhiteStrokeBrush 重命名为 FocusVisualWhiteStrokeThemeBrush

# java - 在团队中任意使用代码格式化程序模板有意义吗？

> ID：10869533
> 
> 赞同：1
> 
> 时间：2012-06-03T10:23:57.620
> 
> 标签：java, eclipse, coding-style, formatting

我正在开发一个 Java 项目，团队中有大约 10 名开发人员。我们都使用 Eclipse 作为 IDE。

为了使团队中的源代码风格更加一致，我想知道任意使用代码格式化程序模板是否有意义？我的意思是在签入代码之前唯一要做的就是在 Eclipse 中使用代码格式化程序。

总的来说，我知道团队将从一致的代码风格中受益。问题是——它应该作为强制规则起作用吗？也许它太死板了。

示例 1：模板强制最大线宽为 80。但是如果某些行被分成许多行，那就很难看。当然我知道 80 是可配置的。

示例 2：Eclipse 格式化代码：

```
int green = 1;
int red = 1;
int orange = 1; 
```

我喜欢的代码：

```
int green  = 1;
int red    = 1;
int orange = 1; 
```

所以我的意见是使用代码模板，但不死板，违反模板是允许和必要的。您对此有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:06:05.410

我宁愿创建一个汇总规则的文档，并让每个人都阅读它。规则是要被打破的，你并不总是希望你的代码格式化程序自动为你完成工作（在我的例子中，这经常发生在多行 if 语句中）。

而且因为你不会总是适用于编码标准，每次有人使用自动格式化程序时，他/她都会在你的 git/svn/cvs 中造成严重破坏，换行，实际上并没有改变。

所以我的建议 - 不要使用自动格式化，并说服/学习/强迫人们编写可读的代码。并进行代码审查！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T11:24:47.843

我们使用的是**[checkstyle](http://checkstyle.sourceforge.net/)**，在[Eclipse](http://eclipse-cs.sourceforge.net/)中配置（在编码时帮助开发人员）和作为[Maven 插件](http://maven.apache.org/plugins/maven-checkstyle-plugin/)来进行自动验证和报告。它检查[Sun/Oracle Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)（它们是事实上的标准）和其他良好实践。每个人都知道规则，并且可以应用一些符合约定的自动格式化小技巧（即间距，...）。我们还进行代码审查。

在大多数情况下，我会尽量避免将个人意见考虑在内，因为这只会导致开发团队之间的激烈冲突。例如，在您的示例 2 中，Eclipse 应用了“标准”格式，所以我不会仅仅因为个人认为它更容易理解而尝试使用另一种格式。

在我看来，这有几个优点：

*   从“集体代码所有权”的角度来看，所有代码似乎都是由同一个人编写的。
*   在不同项目之间移动开发人员更容易。
*   代码更易于阅读和维护。
*   是否有人更喜欢其他 IDE 并不重要。

对于新项目，一旦您使用 Maven 进行自动 checkstyle 验证，我认为进行严格验证是一个好主意。也就是说，将代码样式错误视为编译错误（不仅仅是警告），如果代码样式无效，则构建将被破坏。它一开始需要一点纪律，但最终会导致更高的代码质量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:42:37.930

我们将格式化程序配置检查到版本控制中，并将格式化程序配置为保存操作。

这要求每个人都使用 eclipse，但您已经这样做了。

它具有以下优点：

*   格式一致
*   没有人花时间格式化代码
*   没有人争论代码审查中的格式

它的缺点是格式化程序有时会做一些奇怪的事情。这可以解决如下：

*   重写有问题的语句（例如，提取局部变量以缩短行并避免换行）
*   向格式化程序提供提示（例如，您可以通过跟随它们来强制保留换行符`//`
*   使用开/关标签禁用一段代码的格式化程序

# javascript - 在 JavaScript 中使用循环设置数组

> ID：10869535
> 
> 赞同：-1
> 
> 时间：2012-06-03T10:24:28.333
> 
> 标签：javascript

这段代码几乎是直接从书中拿出来的，但它似乎不起作用，我删除了循环，只是用图像 src 等设置了数组的所有不同索引，它起作用了，所以我认为有些简单我在这里做错了。谁能看出这段代码有什么问题？

```
var demo = new Array();
var titleNumFrames = 7;
for(x=0; x<titleNumFrames; x++) {
    demo[x]=new Image();
    demo[x].src = “image”+x+”.jpg”;
} 
```

当我说它不起作用时，我的意思是图像没有被预加载，有时只有当 for 循环在代码中时才会发生奇怪的事情。最终成为引号，简单的错误 - 将来不会从 word/powerpoint 文件中复制代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:27:36.403

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:29:43.843

My guess is the array you have is empty. I think you should use the following notation:

```
var demo = new Array();
var titleNumFrames = 7;
for(x=0; x<titleNumFrames; x++) {
    var img = new Image();
    img.src = “image”+x+”.jpg”;
    demo.push(img);
} 
```

# php - 在 osx lion 上使用端口安装 php-module。它适用于命令行，但不适用于 apache

> ID：10869537
> 
> 赞同：0
> 
> 时间：2012-06-03T10:24:50.047
> 
> 标签：php, macos, apache, osx-lion

我在我的 osx lion 上安装了 php5-intl。

它似乎在命令行模式下正常工作，因为如果我尝试运行以下脚本 (1)：

```
$fmt = datefmt_create( "en_US" ,IntlDateFormatter::FULL,IntlDateFormatter::FULL,'America/Los_Angeles',IntlDateFormatter::GREGORIAN  );
echo "First Formatted output is ".datefmt_format( $fmt , 0)."\n"; 
```

* * *

```
> php -m |grep intl
intl

> php test.php 
First Formatted output is Wednesday, December 31, 1969 4:00:00 PM Pacific Standard Time 
```

* * *

但是，如果我尝试从我的 apache 晒太阳（之后`sudo apachectl restart`），我会收到以下错误：

```
> tail /private/var/log/apache2/error_log
PHP Fatal error:  Call to undefined function datefmt_create() in 
```

PS：

我还在我的 php.ini 中添加了以下行

```
extension_dir = "/opt/local/lib/php/extensions/no-debug-non-zts-20090626"

ll /opt/local/lib/php/extensions/no-debug-non-zts-20090626
total 848
-rwxr-xr-x  1 root  261712  7 May 10:54 xdebug.so
-rwxr-xr-x  1 root  168912 31 May 19:53 intl.so 
```

* * *

在 php.ini 中写着：`Loaded Configuration File` `/private/etc/php.ini`这是我编辑的文件。

* * *

我的配置的其他信息如下：

```
/private/etc/apache2/httpd.conf
LoadModule php5_module libexec/apache2/libphp5.so
/usr/libexec/apache2/libphp5.so

/private/etc/php.ini
extension_dir = "/opt/local/lib/php/extensions/no-debug-non-zts-20090626" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:40:22.670

创建一个网页，包含以下内容：

```
<?php
phpinfo();
echo datefmt_create("en_US" ,IntlDateFormatter::FULL,IntlDateFormatter::FULL);
?> 
```

（是的，我知道第二行给出了一个错误，但在这种情况下，它足以告诉我们它有效。）

查看该网页，然后搜索“国际化支持”或“国际”。就我而言，我看到：

```
Internationalization support    enabled
version                         1.0.3
ICU version                     4.2.1

Directive           Local Value Master Value
intl.default_locale no value    no value
intl.error_level    0           0 
```

如果你没有 intl 部分，那么它只能是一个 php.ini 问题（更常见的原因是没有重新启动 apache，但你说你已经这样做了）。

为了确认，再次编辑 php.ini 文件并在最后引入一个您可以肯定会起作用的更改。例如`asp_tags = 1`。现在重新加载您的 phpinfo() 页面并确保您看到那里的更改。

如果您不这样做，那可能是权限；用户 Apache 运行为无法读取您的 php.ini 文件？

# android - Sony SmartWatch - 如何获取主机应用程序包名称

> ID：10869538
> 
> 赞同：1
> 
> 时间：2012-06-03T10:25:13.390
> 
> 标签：android, sony-smartwatch

每当用户更改小部件设置时，我想更新 SmartWatch 小部件。我知道可以通过发送`WIDGET_IMAGE_UPDATE_INTEN`意图来完成，但似乎我没有主机应用程序包名称的信息（即 com.sonyericsson.extras.smartwatch）。

如何获取“主机应用程序包名称”？

PS：目前，我已经在我的代码中硬连线了“com.sonyericsson.extras.smartwatch”名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:40:06.050

每次你的小部件扩展从宿主应用程序接收到一个意图时，宿主应用程序的包名称作为额外的包含在意图中。

```
String hostAppPackageName = intent.getStringExtra(Widget.Intents.EXTRA_AHA_PACKAGE_NAME); 
```

您可以存储包名称以供以后在代码中使用。这也是 SDK 的实用程序类中的做法，即它作为全局变量存储在抽象类 ExtensionService 中，SDK 中的所有 Sample 扩展都使用该类。

[在此处](http://developer.sonymobile.com/wportal/devworld/technology/smart-extras/smart-extension-sdk)查看 SDK 实用程序类

# objective-c - 如何做某事，但不超过每 3 秒一次

> ID：10869539
> 
> 赞同：-3
> 
> 时间：2012-06-03T10:25:29.453
> 
> 标签：objective-c, xcode4.3

假设我想实现一些快速搜索。用户输入一些字母，每次字母更改时，我的程序都会搜索网络以提供搜索建议。

但是，我不希望该函数的调用频率超过 3 秒。

我该怎么做？

我目前使用计时器。此外，自动完成的“搜索”网络将在后台完成，因此会出现一些多线程问题。

我会尽快发布代码。但大多数答案与我的相似。

哦，复杂的是，如果用户输入得太快，抓取仍应在 3 秒后完成。所以不是马上，但仍然可以完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:39:09.417

当您检测到新字母时，只需检查已经过去了多少时间：

```
NSDate *d = [NSDate date];

if( lastSearch == nil || [d timeIntervalSinceDate:lastSearch] > 3 )
{
    lastSearch = d;

    // Do your search ...

} 
```

`lastSearch`在您的 .h 文件中声明如下：

```
NSDate *lastSearch; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:48:55.080

您可以创建计时器并检查搜索字符串的更新。喜欢

```
timer = [NSTimer timerWithTimeInterval:3.f target:self selector:@selector(update) userInfo:nil repeats:YES]; 
```

然后只需执行更新方法

```
-(void) update
{
    BOOL needToSearch = // check if there was changes in your search string
    if ( needToSearch )
    {
        // make new search
    }
} 
```

只是不要忘记在不需要时使计时器失效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T17:31:10.750

设置它，以便在您的计时器到期时执行搜索，但每当用户输入字符时，将计时器重置为延迟量。

# r - 重叠并固定刻面中的 x 尺度（scale=“free”）以制作电影

> ID：10869540
> 
> 赞同：2
> 
> 时间：2012-06-03T10:25:40.990
> 
> 标签：r, ggplot2, scale, simulation, facet

在另一篇文章中@Justin 的帮助下，我使用`facet_grid`ggplot2 中的选项绘制了模拟结果。带有数据和答案的帖子在这里：[Use facet_grid option to plot column of dataframe with ggplot2](https://stackoverflow.com/questions/10852096/use-facet-grid-option-to-plot-column-of-dataframe-with-ggplot2)

这里是原始样本数据的副本，其中包含有关每个参数类型的 scale_x 最小值和最大值的附加信息：

```
dat <- read.table(textConnection("P1 P2 P3 P4 R
1 2e-5 1.0 0.6 3 1
2 4e-6 1.5 0.7 1.5 2
3 6e-7 1.2 0.6 2.5 3 
4 8e-8 1.45  0.65 3.2 4
"))

scalx <- read.table(textConnection("P XMIN XMAX
1 1 10e-1 10e-10
2 2 0.5 3.0
3 3 0.0 1.5
4 4 2.0 5.0
")) 
```

@justin 给出的实际示例绘图代码：

```
library(ggplot2)
library(reshape2)
dat.melt <- melt(dat, id.vars='R')

ggplot(dat.melt, aes(x=0, y=value)) +
    geom_boxplot() +
    geom_point(aes(colour=factor(R))) +
    facet_wrap(~variable, ncol=1, scales='free') +
    coord_flip() 
```

但是现在，我的项目是制作一个小电影来展示多个模拟结果的演变，此时在上面给出的代码的帮助下，我得到了这样的伟大图形。

![在此处输入图像描述](../Images/392fae40154af0db8d4ed5cd64f7fce5.png)

为了使这成为可能，我需要固定每个方面的值，因为每个参数都可以在固定的极值之间变化，尽管这些值是从一个方面到另一个方面的变化。

你知道这是否可能，`facet_grid`因为我最近发现这个问题与在 github ggplot2 项目存储库的不同方面指定不同的限制有关：[https](https://github.com/hadley/ggplot2/issues/187) ://github.com/hadley/ggplot2/issues/187 。是否有另一种替代解决方案可以使这成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:36:06.010

由于您想要扩展每个方面的比例（而不是限制/收缩它们），所以这是可能的。您需要将您`scalx`的格式重塑为类似于您的 melted `dat`：

```
xlims <- melt(scalx, id.vars="P")
xlims$P <- paste0("P", xlims$P)
names(xlims)[1] <- "variable" 
```

除了`melt`，我使构面具有相​​同的格式和变量名。然后可以将这个新的数据框提供给一个`geom_blank`图层，以便它影响比例的限制，但实际上并不绘制任何东西：

```
ggplot(dat.melt, aes(x=0, y=value)) +
    geom_boxplot() +
    geom_point(aes(colour=factor(R))) +
    geom_blank(data=xlims) +
    facet_wrap(~variable, ncol=1, scales='free') +
    coord_flip() 
```

![在此处输入图像描述](../Images/d4172b65e5481e1691fa8e01881844c3.png)

作为旁注，您`P4`被列为至少有 2，但实际上有一个数据点为 1.5。这表明这种方法只会扩大规模，不会缩小规模。

# macos - 在 OSX 中使用内置屏幕捕获功能并接收输出？

> ID：10869541
> 
> 赞同：0
> 
> 时间：2012-06-03T10:25:42.330
> 
> 标签：macos, screen-capture

大多数高级 Mac 用户都知道，有一种简单的截屏方法。仅以 command-shift-4 截取屏幕的一部分为例。但是有没有可能从一个 python 脚本中使用这个功能？

我已经看到其他有关从 python（或其他语言）截屏的线程，但是有什么方法可以使用脚本中的内置功能，然后按照您的意愿使用输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:30:21.917

可以调用终端命令`screencapture`

这可以从 python 脚本（或其他脚本）调用：

```
import os;
os.system("screencapture /tmp/test.jpg");
#### do your stuff with the file 
```

# c# - 正则表达式 ”（？ 我花了大约三个小时试图了解如何"(?

> ID：10869547
> 
> 赞同：3
> 
> 时间：
> 
> 标签：c#, regex

我花了大约三个小时试图了解如何`"(?<!^)(?=[A-Z])"`根据大写字母在tring处拆分工作，即

```
string[] s = Regex.Split("TheWorldWithoutStrangers", "(?<!^)(?=[A-Z])"); 
```

它是如何工作的 ！！我确实理解上述表达式中每个字符的含义，但我不明白它是如何协同工作的。为什么`"(? < !^)([A-Z])"`不起作用？这意味着每当您发现一个不在换行之后的大写字母时，然后拆分，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T10:38:29.477

The `^` means the beginning of a line, and `(?<!...)` is a negative look behind, so `(?<!^)` matches any position in the string that is not right at the beginning of the line.

The set `[A-Z]` matchies any capital letter, and `(?=...)` is a positive look ahead, so `(?=[A-Z])` matches any position in the string that is right before a capital letter.

Put them together, and the expression matches any position in the string that is not right at the beginning of a line, and that is right before a capital letter.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T10:44:59.007

这里的关键是这两个部分都是`(?<!...)`零`(?=...)`宽度的断言。第一个确保`^`（字符串开头）不会出现在匹配位置之前，第二个确保`[A-Z]`（单个大写字母）出现在匹配位置之后。实际匹配是空的，因为两个断言实际上都不匹配任何字符。整个表达式仅匹配一个位置。

# java - repaint() 上的图像闪烁

> ID：10869548
> 
> 赞同：3
> 
> 时间：2012-06-03T10:27:01.840
> 
> 标签：java, image, swing, custom-controls, flicker

我为我[之前的问题](https://stackoverflow.com/questions/10430003/image-overlay-is-flickering)找到了解决方案，这让我陷入了新的问题。

在以下代码中，我使用箭头键在 JFrame 周围移动图像。但是每次我按下箭头键时，图像似乎都会闪烁，当连续按下一个键时，这一点非常明显。

```
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;

public class TestProgram extends JFrame implements KeyListener {
    private BufferedImage TestImage;
    private int cordX = 100;
    private int cordY = 100;

    public TestProgram() {
        setTitle("Testing....");
        setSize(500, 500);
        imageLoader();
        setVisible(true);
    }

    public void imageLoader() {
        try {
            String testPath = "test.png";
            TestImage = ImageIO.read(getClass().getResourceAsStream(testPath));

        } catch (IOException ex) {
            ex.printStackTrace();
        }

        addKeyListener(this);
    }

    @Override
    public void paint(Graphics g) {
        super.paint(g);
        g.drawImage(TestImage, cordX, cordY, this);
    }

    public static void main(String[] args) {
        new TestProgram();
    }

    public void keyPressed(KeyEvent ke) {
        switch (ke.getKeyCode()) {
            case KeyEvent.VK_RIGHT: {
                cordX+=5;
            }
            break;
            case KeyEvent.VK_LEFT: {
                cordX-=5;
            }
            break;
            case KeyEvent.VK_DOWN: {
                cordY+=5;
            }
            break;
            case KeyEvent.VK_UP: {
                cordY-=3;
            }
            break;
        }
        repaint();
    }

    public void keyTyped(KeyEvent ke) {}

    public void keyReleased(KeyEvent ke) {}
} 
```

有什么办法可以避免这种情况吗？

编辑：以上是完整的工作代码。我发现很难在其中加入双缓冲。任何人都可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T03:13:08.647

不闪烁，工作代码。

Repaint() 不只是调用paint() 方法。repaint() 方法实际上调用 update() 方法，然后默认 update() 方法调用 paint() 方法。所以只需覆盖 update() 方法。如上所述正确地绘制为 BufferedImage 。

现在应该可以了。它在这里工作得很好。我只使用了不同的图像路径。

```
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;

public class TestProgram extends JFrame implements KeyListener {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private Image TestImage;
    private BufferedImage bf;
    private int cordX = 100;
    private int cordY = 100;

    public TestProgram() {
        setTitle("Testing....");
        setSize(500, 500);
        imageLoader();
        setVisible(true);
    }

    public void imageLoader() {
        try {
            String testPath = "test.png";
            TestImage = ImageIO.read(getClass().getResourceAsStream(testPath));

        } catch (IOException ex) {
            ex.printStackTrace();
        }

        addKeyListener(this);
    }

    public void update(Graphics g){
           paint(g);
    }

    public void paint(Graphics g){

        bf = new BufferedImage( this.getWidth(),this.getHeight(), BufferedImage.TYPE_INT_RGB);

    try{
    animation(bf.getGraphics());
    g.drawImage(bf,0,0,null);
    }catch(Exception ex){

    }
}

    public void animation(Graphics g) {
        super.paint(g);
        g.drawImage(TestImage, cordX, cordY, this);
    }

    public static void main(String[] args) {
        new TestProgram();
    }

    public void keyPressed(KeyEvent ke) {
        switch (ke.getKeyCode()) {
        case KeyEvent.VK_RIGHT: {
            cordX += 5;
        }
            break;
        case KeyEvent.VK_LEFT: {
            cordX -= 5;
        }
            break;
        case KeyEvent.VK_DOWN: {
            cordY += 5;
        }
            break;
        case KeyEvent.VK_UP: {
            cordY -= 3;
        }
            break;
        }
        repaint();
    }

    public void keyTyped(KeyEvent ke) {
    }

    public void keyReleased(KeyEvent ke) {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T10:32:11.860

您必须使用缓冲区来摆脱闪烁。对于图像，有 BufferedImage 缓冲区：

```
BufferedImage bf = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB); 
```

然后像这样将图像绘制到屏幕上：

```
g.drawImage(bf, 0, 0, null); 
```

# linux - 中断处理（Linux/通用）

> ID：10869549
> 
> 赞同：15
> 
> 时间：2012-06-03T10:27:10.210
> 
> 标签：linux, operating-system, interrupt

在主板上，我们有一个中断控制器（IRC），它充当可以引发中断的设备和 CPU 之间的多路复用器：

```
 |--------|
          |-----------|      |        |
-(0)------| IRC  _____|______| CPU    |
-(...)----| ____/     |      |        |
-(15)-----|/          |      |--------|
          |-----------| 
```

每个设备都与一个 IRQ 相关联（左侧的数字）。每次执行后，CPU 都会检测到中断请求线。如果检测到信号，将执行状态保存，并且 CPU 加载一个中断处理程序，该程序可以在位于内存中固定地址的中断向量中找到。据我所知，中断向量中的 IRQ 编号和向量编号不一样，因为例如我的网卡已注册到 IRQ 8。在 Intel Pentium 处理器上，这将指向使用的例程发出一个错误条件的信号，因此必须有一个映射指向正确的处理程序。

问题：

1) 如果我编写一个设备驱动程序并为其注册一个 IRQ X。系统从哪里知道应该处理哪个设备？例如，我可以将 request_irq() 与 IRQ 编号 10 一起使用，但系统如何知道处理程序应该用于鼠标或键盘或我编写的驱动程序？

2）那么中断向量看起来如何？我的意思是，如果我将 IRQ 10 用于我的设备，这将覆盖用于表中错误处理的标准处理程序（根据 Silberschatz（操作系统概念），第一个可用的处理程序是 32）。

3) 谁最初设置了 IRQ？生物？操作系统？

4）谁负责IRQ和中断向量中的偏移量的匹配？

5) 可以共享 IRQS。这怎么可能？主板上有硬件通道将设备连接到中断控制器。如何将通道配置为相同的中断？必须有一个表，上面写着第 2 和第 3 通道处理 IRQ15，例如这个表在哪里以及它是如何被调用的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-03T17:57:41.973

关于linux内核的答案。也应该适用于大多数其他操作系统。

1) 如果我编写一个设备驱动程序并为其注册一个 IRQ X。系统从哪里知道应该处理哪个设备？例如，我可以将 request_irq() 与 IRQ 编号 10 一起使用，但系统如何知道处理程序应该用于鼠标或键盘或我编写的驱动程序？

没有 1 个答案。例如，如果这是一个定制的嵌入式系统，硬件设计人员会告诉驱动程序编写者“我要将设备 x 路由到 irq y”。为了获得更大的灵活性，例如对于通常使用 PCI 协议的网卡。当检测到新设备时，有硬件/固件级别的仲裁将中断号分配给新设备。然后这将被写入 PCI 配置寄存器之一。驱动程序首先读取此设备寄存器，然后为该特定 irq 注册其中断处理程序。其他协议也会有类似的机制。

您可以做的是在内核代码中查找对 request_irq 的调用以及驱动程序如何获取 irq 值。每种驱动程序都会有所不同。

因此，这个问题的答案是，系统不知道。硬件设计者或硬件协议将此信息提供给驱动程序编写者。然后驱动程序编写者为那个特定的 irq 注册处理程序，告诉系统在你看到那个 irq 的情况下要做什么。

2）那么中断向量看起来如何？我的意思是，如果我将 IRQ 10 用于我的设备，这将覆盖用于表中错误处理的标准处理程序（根据 Silberschatz（操作系统概念），第一个可用的处理程序是 32）。

好问题。它有两个部分。

a) 当你 request_irq (irq,handler) 时。系统确实没有在 IVT 或 IDT 中编写条目 0。但是入口 N + irq。其中 N 是该 CPU 上支持的错误处理程序或通用异常的数量。细节因系统而异。

b) 如果您错误地请求另一个驱动程序使用的 irq，会发生什么情况。您收到一个错误，并且 IDT 未使用您的处理程序进行编程。

注意：IDT 是中断描述符表。

3) 谁最初设置了 IRQ？生物？操作系统？

首先是bios，然后是操作系统。但是有某些操作系统，例如 MS-DOS，它不会对 BIOS 设置的 IVT 进行重新编程。更复杂的现代操作系统，如 Windows 或 Linux，不想依赖特定的 bios 功能，他们重新编程 IDT。但是只有在操作系统出现时，bios 才必须首先执行此操作。

4）谁负责IRQ和中断向量中的偏移量的匹配？

我真的不清楚你的意思。流程是这样的。首先，您的设备被分配了一个中断号，然后您使用该中断号为它注册一个处理程序。如果您使用错误的 irq 号，然后在您的设备上启用中断，系统将崩溃。因为处理程序是从错误的 irq 号注册的。

5) 可以共享 IRQS。这怎么可能？主板上有硬件通道将设备连接到中断控制器。如何将通道配置为相同的中断？必须有一个表，上面写着第 2 和第 3 通道处理 IRQ15，例如这个表在哪里以及它是如何被调用的？

这个问题问得好。额外的表不是它在内核中的解决方式。而对于每个共享 irq，处理程序都保存在函数指针的链接列表中。内核循环遍历所有处理程序并一个接一个地调用它们，直到其中一个处理程序将中断声明为自己的。

```
The code looks like this:

driver1:

d1_int_handler:
       if (device_interrupted()) <------------- This reads the hardware
       {
           do_interrupt_handling();
           return MY_INTERRUPT;
       }else {
           return NOT_MY_INTERRUPT;
       }

driver2:
       Similar to driver 1

kernel:
      do_irq(irq n)
      {
           if (shared_irq(n))
           {
                irq_chain = get_chain(n);
                while(irq_chain)
                {
                    if ((ret = irq_chain->handler()) == MY_INTERRUPT) 
                        break;
                    irq_chain = irq_chain->next;
                }
                if (ret != MY_INTERRUPT)
                     error "None of the drivers accepted the interrupt";
           }
      } 
```

# python - python中的绝对路径和相对路径问题

> ID：10869553
> 
> 赞同：0
> 
> 时间：2012-06-03T10:27:51.210
> 
> 标签：python, linux

如何删除python中的路径相关问题？

例如，我在目录 TEST 中有一个模块 test.py

```
**test.py**
import os
file_path = os.getcwd() + '/../abc.txt'

f = open(file_path)
lines = f.readlines()
f.close

print lines 
```

现在，当我在 TEST 目录之外执行上述程序时，它给了我错误：-

```
Traceback (most recent call last):
  File "TEST/test.py", line 4, in ?
    f = open(file_path)
IOError: [Errno 2] No such file or directory: 'abc.txt' 
```

如何解决此类问题。基本上这只是我放弃的一个小例子。

我正在处理这样一个巨大的问题。

我正在使用现有的包，它只需要从它存在的那个目录运行，如何解决这类问题，以便我可以从我想要的任何地方运行程序。

或者能够处理在 TEST 目录内或 TEST 目录外运行的上述示例。

有什么帮助。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:31:16.253

我认为最简单的事情是将当前工作目录更改为脚本文件之一：

```
import os
os.chdir(os.path.dirname(__file__)) 
```

但是，如果脚本还使用原始工作目录中的文件，这可能会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:32:41.713

您的代码正在查看当前工作目录，并将其用作查找所需文件的基础。正如您现在发现的那样，这几乎从来都不是一个好主意。

Emil Vikström 在回答中提到的解决方案是一个快速修复解决方案，但更正确的解决方案是不使用当前工作目录作为起点。

如另一个答案`__file__`中所述，解释器中不可用，但它是您的代码的绝佳解决方案。

将您的第二行重写为如下内容：

```
file_path = os.path.join(os.path.dirname(__file__), "..", "abc.txt") 
```

这将获取当前文件所在的目录，首先将其加入`..`，然后加入`abc.txt`, 以创建您想要的路径。

You should fix similar usage of `os.getcwd()` elsewhere in your code in the same way.

# android - 在android中的scrollView之后没有小部件显示

> ID：10869554
> 
> 赞同：1
> 
> 时间：2012-06-03T10:28:08.657
> 
> 标签：android, scrollview

我的设计是这样的：“Linearlayout start”“scrollview start”“scrollview end”“LinearLayout start”“LinearLayout end”“LinearLayout end”。但是第二个线性布局没有显示在屏幕上。

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    >
    <ScrollView 
            android:fillViewport="false"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" >
        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/title" />
            <TextView
                android:id="@+id/date"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/date" />
            <ImageView
                android:id="@+id/imageView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/nasa" />

                <TextView
                android:id="@+id/description"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/description" />

        </LinearLayout>

    </ScrollView>
    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center">
        <Button android:id="@+id/refresh" android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="@string/refresh">     
        </Button>
    </LinearLayout>
</LinearLayout> 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T11:25:43.933

我找到了解决方案。我需要在 ScrollView 中添加一个额外的属性

```
<ScrollView android:layout_weight="1"> 
```

这可以防止滚动条填满整个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:34:22.557

当您使用 scrollView 时，它需要作为布局的父级。根据您的代码，请按照根据您的要求编辑的以下代码....

代码：

```
 <?xml version="1.0" encoding="utf-8"?>
     <ScrollView 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:fillViewport="false"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" >
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/title" />
        <TextView
            android:id="@+id/date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/date" />
        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/nasa" />

            <TextView
            android:id="@+id/description"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/description" />

    </LinearLayout>
     <LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:gravity="center">
    <Button android:id="@+id/refresh" android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@string/refresh">     
    </Button>
</LinearLayout>
</ScrollView> 
```

运行以下代码。它将执行...

# c# - 实体框架表继承保存问题

> ID：10869555
> 
> 赞同：1
> 
> 时间：2012-06-03T10:28:24.213
> 
> 标签：c#, entity-framework, entity-framework-4.1

我在数据库中有表继承：

```
Ticket{TicketId, TicketTypeId, CreatedBy, Title, Description etc.}
UserInfo{TicketId etc.} 
```

`TicketId`是主键自增。表`UserInfo`继承`Ticket`表，所以`TicketId`实际上`UserInfo`是从表`FK`。 我在 EF 中有模型：`TicketId``Ticket`

```
public abstract class Ticket
    {
        [Key]
        public int TicketId { get; set; }
        public int TicketTypeId { get; set; }        
        public string Title { get; set; }
        public string Description { get; set; }

        public Guid CreatedBy { get; set; }
        public virtual User User { get; set; }
    } 

public class UserInfo :Ticket
    {
        ...
    } 
```

当我尝试将新的 UserInfo 对象插入数据库时​​，我写道：

```
User u = context.Users.Find(Membership.GetUser().ProviderUserKey);

            UserInfo o = new UserInfo();
            o.CreatedBy = u.UserId;
            o.Description = "First EF user info to database!";
            o.TicketTypeId = 1;
            o.Title = "First User Info EF";

            context.Tickets.Add(o);
            context.SaveChanges(); 
```

但是应用程序在 SaveChanges() 上中断。
**我收到以下错误：**

~~{“无效的列名'User_UserId'。”}~~
**更新**
我更改`CreatedBy`为`UserId`并传递了此错误，但现在这里还有两个问题：
我将 UserInfo 保存到数据库但 UserInfo 表中没有任何内容。我以为EF可以在保存后添加这个字段？
数据库中的此票证表绑定到 UserInfo 但它也通过 TicketID 绑定到数据库中的几个表但是当我尝试保存对象 UserInfo 时出现此错误：

```
{"The INSERT statement conflicted with the FOREIGN KEY 
constraint \"FK_Tickets_Groups\". The conflict occurred in database \"db_Example\", table \"dbo.Groups\", column 'TicketId'.\r\nThe statement has been terminated."} 
```

所以为了保存这个，我目前删除了除 UserInfo 之外的表引用。EF可以处理这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:48:03.607

> 我将 CreatedBy 更改为 UserId 并传递了此错误...

无需更改属性名称。您只需要告诉 EF 这`CreatedBy`是该`User`属性的外键（EF 不会自动检测到这一点，因为该名称不遵循命名约定）：

```
[ForeignKey("User")]
public Guid CreatedBy { get; set; }
public virtual User User { get; set; } 
```

> 我将 UserInfo 保存到数据库，但 UserInfo 表中没有任何内容。我以为EF可以在保存后添加这个字段？

如果您在单独的表中有派生实体属性，则必须指定该实体的表名（*Table-Per-Type (TPT)*继承映射），否则默认情况下 EF 会将所有派生实体放入与基本实体相同的表中（*Table-Per-Hierarchy (TPH)*继承映射）：

```
[Table("UserInfo")]
public class UserInfo : Ticket
{
    ...
} 
```

> ...我收到此错误...

似乎`Ticket`或`UserInfo`具有表的外键，`Groups`并且此外键属性未设置为有效的组键值。当您插入实体时，违反了数据库中的外键约束，从而导致异常。

# javascript - Slidesjs自动高度问题

> ID：10869559
> 
> 赞同：0
> 
> 时间：2012-06-03T10:29:26.547
> 
> 标签：javascript, jquery, slider

我使用 Slidesjs [http://slidesjs.com/](http://slidesjs.com/)问题出在 autoHeight 上。正是在 Chrome 中，幻灯片的高度为 0px，但在单击下一张幻灯片后，高度变为应有的高度。有谁知道如何解决这个问题？这是链接[http://demo.themeuniverse.net/cottoncandy/](http://demo.themeuniverse.net/cottoncandy/)

```
如果（option.autoHeight）{
                control.children().css({
                    高度：'自动'
                });
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:58:51.240

你的例子很难说清楚，如果你能重现这个问题并将它放在[http://jsfiddle.net](http://jsfiddle.net)上会容易得多。无论如何，我从源代码复制并粘贴了您的 html，并设法让它在这个小提琴上工作：http: [//jsfiddle.net/vrrnz/6/](http://jsfiddle.net/vrrnz/6/)

我还建议给你的容器设置一个宽度和高度（因为它可能不会改变）。

# android - android中Listview中的阴影

> ID：10869566
> 
> 赞同：-1
> 
> 时间：2012-06-03T10:29:52.583
> 
> 标签：android, listview, android-arrayadapter

我有一个带有数组适配器的 ListView。出于某种原因，当我滚动列表时，我得到了这个阴影，当我停止它时就可以了。那是我的代码：

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;

public MobileArrayAdapter(Context context, String[] values) {
    super(context, R.layout.listview, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.listview, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    textView.setText(values[position]);
    if(textView.getText() == "royi"){
        textView.setBackgroundColor(Color.GRAY);
    }else{
        textView.setBackgroundColor(Color.BLACK);
    }

    // Change icon based on name
    String s = values[position];

    System.out.println(s);
    return rowView;
} 
```

}

```
public class Listwithbaseadapter extends ListActivity {

static final String[] MOBILE_OS = 
        new String[] { "Android", "iOS", "royi", "Blackberry", "Android", "iOS", "royi", "Blackberry", "Android", "iOS", "royi", "Blackberry", "Android", "iOS", "royi", "Blackberry",
    "Android", "iOS", "royi", "Blackberry", "Android", "iOS","Android", "iOS", "royi", "Blackberry", "Android", "iOS"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new MobileArrayAdapter(this, MOBILE_OS));

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    //get selected items
    String selectedValue = (String) getListAdapter().getItem(position);
    Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();
}} 
```

为什么会发生这种情况，我可以解决谁？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:47:30.687

采用

```
 ListView listView = getListView();
        listView.setCacheColorHint(0); 
```

在您的 ListActivity 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T10:36:26.750

```
ListView listView = getListView();

listView.setCacheColorHint(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:33:56.790

在您的 xml 中，在 Listview 中添加以下属性

`<ListView android:cacheColorHint="#00000000" ... />`

它将解决问题。无需在代码中动态执行此操作，如果您想在滚动时移除顶部和底部阴影，还可以添加以下内容：

`<ListView android:fadingEdge="none" ... />`

# php - 如何创建多个子菜单及其数据库结构？

> ID：10869570
> 
> 赞同：1
> 
> 时间：2012-06-03T10:30:24.193
> 
> 标签：php, mysql

我想由管理员创建动态多个子菜单。例如，如何创建它，

```
> products(Main menu) 
>    ->apple(sub menu)
>      ->Mac
>      ->ipod
>            ->ipod 4G
>            ->ipod 5G
>      ->ipad   
>    ->microsoft    
>    ->HP 
```

像这样我必须从管理部分创建菜单。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:39:19.057

You can create table of pages to menu, then add to it foreign key of itself which is the primary key of its parent. And when you select menu from db you can select all which the same kays and so long, to time when you select all submenus.

so structure from comment `id|name|parent_id` is simpliest, good example of this table.

# php - PHP 闭包中的 use 关键字是否通过引用传递？

> ID：10869572
> 
> 赞同：40
> 
> 时间：2012-06-03T10:30:39.670
> 
> 标签：php, function, functional-programming

例如，如果我这样做：

```
function bar(&$var)
{
    $foo = function() use ($var)
    {
        $var++;
    };
    $foo();
}

$my_var = 0;
bar($my_var); 
```

会`$my_var`被修改吗？如果没有，如何在不添加参数的情况下使其工作`$foo`？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-03T10:41:19.723

不，它们*不是*通过引用传递的 -`use`遵循与函数参数类似的符号。

`use`正如所写的那样，您可以通过将引用定义为传递来实现：

```
 $foo = function() use (&$var) 
```

也可以通过这种方式创建递归：

```
$func = NULL;
$func = function () use (&$func) {
    $func();
} 
```

* * *

> **注意：**以下答案的旧摘录（2012 年 6 月）是为 PHP < 7.0 编写的。自 7.0（2015 年 12 月）以来，`debug_zval_dump()`更改的语义（不同的 zval 处理）`refcount(?)`现在它的输出有所不同，并且不再多说（整数不再有引用计数）。
> 
> 通过不显示`$my_var`更改（从`0`）通过输出进行验证仍然有效（行为）。

[`debug_zval_dump`](http://php.net/debug_zval_dump)您可以在函数 ( [Demo](https://3v4l.org/CMSHY) )的帮助下自行验证：

```
function bar(&$var)
{
    $foo = function() use ($var)
    {
        debug_zval_dump($var);
        $var++;
    };
    $foo();
};

$my_var = 0;
bar($my_var);
echo $my_var; 
```

输出：

```
long(0) refcount(3)
0 
```

一个完整的所有范围的工作参考将有一个 refcount 为 1。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-03T10:36:06.283

几乎按照定义，闭包是按值关闭的，而不是按引用关闭的。`&`您可以通过在参数列表中添加一个来“通过引用使用” ：

```
function() use (&$var) 
```

这可以在[匿名函数手册页](http://php.net/manual/en/functions.anonymous.php)的示例 3 中看到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T10:37:21.583

不，它们不是通过引用传递的。

```
function foo(&$var)
{
    $foo = function() use ($var)
    {
        $var++;
    };
    $foo();
}

$my_var = 0;
foo($my_var);
echo $my_var; // displays 0

function bar(&$var)
{
    $foo = function() use (&$var)
    {
        $var++;
    };
    $foo();
}

$my_var = 0;
bar($my_var);
echo $my_var; // displays 1 
```

# ruby-on-rails - 如何从多个模型创建（高性能）活动源？

> ID：10869574
> 
> 赞同：3
> 
> 时间：2012-06-03T10:31:01.243
> 
> 标签：ruby-on-rails

在 Rails 应用程序中，我想将多个模型组合到一个活动提要中。

例如，我有 Post、Comment、Photo、Status 模型。每一个都属于一个用户、一个机构和一个城市。在用户/机构/城市显示页面上，我想显示按时间顺序排列的最新活动列表。

从阅读和其他关于 SO 的问题来看，似乎有两种思想流派。

1.  创建一个多态的 ActivityFeed 模型，例如 User `has_many :posts as: feedable`。然后在相应的显示页面上呈现 ActivityFeed 集合。
2.  创建并渲染一个组合数组，例如`@user_feed = @user_photos + @user_comment +..`

但我没有看到太多讨论每种方法的利弊。

有没有其他人尝试过类似的事情？在选择方法时我应该考虑或计划哪些问题？每个性能如何（尤其是当数据库变大时）？

我的要求是：

1.  显示属于父模型的所有项目。
2.  拥有几种不同类型的父模型（用户、机构、城市等）。
3.  为活动提要中的每个项目呈现不同的视图部分，具体取决于其类。

感谢任何想法，个人经历或有关此方面的更多信息的指针。我应该寻找第三种选择吗？我对从多个查询创建组合数组的性能特别感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:07:43.027

让我在您的要求中添加更多问题

1.  易于显示属于父模型的所有项目
2.  易于允许不同类型的父模型
3.  易于依赖类的模板渲染
4.  易于重构共享活动功能
5.  易于集成潜在的活动控制功能（标记为已读、订阅、关注、分享等）
6.  易于计算多态馈送，例如按各种类型活动的时间倒序排列。
7.  易于计算父项的聚合活动计数

对我来说 5 和 6 和 7 defo 提示它支持第一个选项，我的代码将是：

```
class Activity
  belongs_to :activity, polymorphic: true
  belongs_to :user, counter_cache: true
  belongs_to :institution, counter_cache: true
  belongs_to :city, counter_cache: true
end 
```

您的城市新闻源范围（演示 1、2、6）

```
city.activities.order('updated_at DESC').limit(20) 
```

请注意，这只是在一个表上进行的廉价搜索，它已经可以为您提供足够的快速列表，因为关联加载（将是`.includes(:activities)`）不需要显示类似的内容。

```
Joe from NYU, New York has posted a comment
Mel from UCL, London has added a new photo 
```

如果活动是一个单独的类，则 4 是微不足道的，而 5 也可以与标准活动控制器平滑。对于像快速列表视图/活动这样的共享渲染部分将是一个自然的地方。7 很容易用 counter_cache 完成。作为奖励，通过在每种类型上允许 has_many :activities，您可以区分活动的类型，例如创建、更新、读取等。

希望这可以帮助

# regex - 正则表达式查找字符串存在于哪一列

> ID：10869582
> 
> 赞同：1
> 
> 时间：2012-06-03T10:33:16.680
> 
> 标签：regex, pcre

我试图通过检查网页的 HTML 来确定名称“电话”出现在哪一列。我正在搜索的字符串如下所示：

```
<tr class="C1">
<td>Name</td>
<td>Address</td>
...
...   < some more columns, but their number is not fixed >
...
<td>Phone</td>
...
...    <more columns>
...
</tr> 
```

是否可以使用正则表达式来确定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:40:38.040

从理论计算机科学的角度来看：这是不可能的，因为表格可以嵌套；而正则表达式通常无法处理嵌套结构（您需要一个 Typ-2-Grammer (Chomsky-Hierarchy)，即 Parser，来分析 html-Text 的结构，它不是 Typ-3，即常规）。

但是，从实际的角度来看，如果您假设表没有嵌套，则可以使用 RegEx 提取表行（类似于`<tr (?!</tr>)*</tr>`），然后匹配条目（类似于`<td (?!</td>)*</td>`）以生成列列表并搜索该列表对于包含字符串`"Phone"`...的条目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:42:09.520

艰巨的任务。我指的是各种帖子，这些帖子解释了为什么使用 RegEx 进行 HTML 解析（实际上）是不可能的：

1.  [RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)
2.  [https://stackoverflow.com/a/590789/290343](https://stackoverflow.com/a/590789/290343)
3.  [https://stackoverflow.com/a/133684/290343](https://stackoverflow.com/a/133684/290343)

# c# - MSpec 与 Visual Studio 集成的替代工具是什么？

> ID：10869590
> 
> 赞同：2
> 
> 时间：2012-06-03T10:35:12.710
> 
> 标签：c#, resharper, mspec

我最近完成了一个 C# 项目，并使用 Machine.Fakes 使用 MSpec 编写了测试。我一直在使用命令行运行器。在 Visual Studio 中查看测试结果/运行会更舒服。但是，ReSharper 超出了我的预算。有没有有吸引力的替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T01:51:46.483

首先，我强烈推荐使用 ReSharper。它不仅仅是一个测试运行器。根据我的经验，没有 ReSharper 的工作效率会降低。

有几个可用的商业产品的测试运行器：

*   [测试驱动网](http://testdriven.net/)
*   [锐化器](http://www.jetbrains.com/resharper/)
*   [代码拉什](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)
*   [正义代码](http://www.telerik.com/products/justcode.aspx)

TestDriven.Net 应该比 ReSharper 便宜，但它只是一个测试运行器。其他产品与 ReSharper 提供的类似，但我没有使用过它们。

Visual Studio 也有持续的测试运行器：

*   [强大的驼鹿](http://continuoustests.com)
*   [NCrunch](http://www.ncrunch.net/)

从今天开始，两者都是免费的。

还有[Gallio](http://www.gallio.org/)，它可能提供与 VS 的集成。

作为最后一个选项，您可以将 MSpec 的 exe 运行程序设置为外部工具，以在“输出”窗口中查看测试运行输出。

对于 VS 2012，我们可能会有一个无需额外工具即可集成的运行器。

# c# - asp.net mvc3 返回多个json列表

> ID：10869593
> 
> 赞同：4
> 
> 时间：2012-06-03T10:35:38.403
> 
> 标签：c#, jquery, ajax, asp.net-mvc-3

我 asp.net mvc3 c# 代码返回 json 列表，如下所示：

```
return Json(new { name = UserNames, imageUrl = ImageUrls }); 
```

`UserNames`并且`ImageUrls`都是`List<string>`类型

这是我的 javascript

```
function StartSearch(text) {
    $.ajax({
        url: '/Shared/Search',
        type: 'POST',
        data: { SearchText: text },
        dataType: 'json',
        success: function (result) {
            $.each(result, function (i, item) {
                alert(result[i].name);
            });
        }
    });
} 
```

我怎样才能得到名字和`ImageUrls`？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T10:37:28.527

Access name as a property of result like this `result.name[i]`

Essentially, result will contain name and imageUrl which are both arrays, just like you have defined in your anonymous type, so your code should be modified like this to display an alert for each name in the name array

```
function StartSearch(text) {
    $.ajax({
        url: '/Shared/Search',
        type: 'POST',
        data: { SearchText: text },
        dataType: 'json',
        success: function (result) {
            $.each(result.name, function (i, item) {
                alert(item);
           });
        }
    });
} 
```

as `$each` iterates over the items in the name array, it will pass the item to the second parameter of your call back, i.e. item.

so

```
$.each(result.name, function (i, item) {
    alert(item);
}); 
```

will popup each name.

Notes:

You may want to change the properties on your anonymous type to reflect that they are a collection:

```
return Json(new { UserNames = UserNames, ImageUrls = ImageUrls }); 
```

this way it will make more sense when you iterate over them in your success function.

As AlfalfaStrange pointed out, I didn't demonstrate how you might access both arrays. Which made me think, what is the relationship between user names and image urls?

Is this a list of images for a user? Maybe what you should consider is creating a specific model for this. For instance, UserDisplayModel:

```
public class UserDisplayModel
{
    public string UserName {get;set;}
    public string ImageUrl {get;set;}
} 
```

In your controller return a list of UserDisplayModels. If this is the case, you'll have to rethink why they are two separate lists in the first place. Maybe ImageUrl should be a field on the User table.

So now, when you're returning a single list, e.g.

```
List<UserDisplayModel> users = //get users from db
return Json(new { Users = Users}); 
```

you can iterate them in one go in js code:

```
 $.each(result.Users, function (i, item) {
            alert(item.Name);
            alert(item.ImageUrl);
        }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T15:59:54.293

这会提醒`Name`来自每个列表的每个记录的值。

```
$.each(result, function (i, item) {
    for (var x = 0; x < result.FirstList.length; x++) {
        alert(result.FirstList[x].Name);
        alert(result.SecondList[x].Name);
    }
}); 
```

如果格式正确，这假设您的 Json 响应。像这样：

```
return Json(new { FirstList = results, SecondList = otherResults }, JsonRequestBehavior.AllowGet); 
```

* * *

但作为旁注，我发现您的代码存在其他需要解决的问题

1.  您实际上并没有执行 a `POST`，而是根据输入进行搜索。在您的 Ajax 调用中更改`POST`为`GET`
2.  更改您的操作返回行以允许获取并确保您返回的是`JsonResult`.
3.  C# 方法参数的命名约定要求使用 Pascal 大小写。第一个字符使用小写字母

    ```
    public JsonResult Search(string searchText) {
        ....
        return Json(new { name = UserNames, imageUrl = ImageUrls }, JsonRequestBehavior.AllowGet);
    } 
    ```

# django - 来自 iframe 的模板中的 Django Override 块

> ID：10869594
> 
> 赞同：0
> 
> 时间：2012-06-03T10:35:40.213
> 
> 标签：django, templates, iframe, block

我有一个结构如下的模板：

```
<html>
<head><title> {%block title %} Default title {% endblock %} </title> </head>
<body>
<iframe>
<head> <title> {% block title %} Title for frame {% endblock %} </title> </head>
<body> Main content. This is what people see on the web page. </body>
</iframe>
<!-- Content that I do not want to reload every time. A player, to be precise. -->
</body>
</html> 
```

在 iframe 中，我继承了模板等，以显示我的最终页面。iframe 中的标题栏被正确替换，并且 iframe 的标题是它应该是的。

但是，当我在 iframe 中加载页面时，我想替换父框架的标题。是否有可能做到这一点？我不想通过 Javascript 来做，因为这违背了 SEO 的目的。我希望在页面本身加载时从服务器端更改标题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:18:39.100

您有两个以 name 命名的块`title`。重命名其中一个，一切都应该正常工作。如果您正在使用`iframe`或使用任何其他元素，则 Django 模板构造完全不会受到影响。

编辑：当`iframe`获得一个新位置时，它会向服务器发送一个请求，并将其*所有*响应呈现*在*`iframe`. 所以不，不可能利用 Django 的模板系统来更改`iframe`的父站点。

我不是 SEO 专家，但`iframe`无论如何，搜索引擎可能不会喜欢使用这样的搜索引擎。您应该实现传统的点击页面加载方式。如果您想加快速度，您可以在此基础上使用 JavaScript。捕获您的菜单点击并异步加载网站的所需部分。这样你和你的搜索引擎都会很开心:)

# facebook - 获取公共数据前。没有访问令牌的个人资料页面中的位置

> ID：10869595
> 
> 赞同：0
> 
> 时间：2012-06-03T10:35:50.120
> 
> 标签：facebook, facebook-graph-api, location, facebook-fql

有没有办法为特定用户获取位置（城市或国家，...）。我可以在他的个人资料页面中看到作为公共数据 - 每个人都可以在没有获得权限的情况下看到 - 获取他的访问令牌

最好的问候，Tmss

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:10:20.950

是的你可以。

我不知道它是否符合 facebook 政策，但您可以使用通用访问令牌（任何有效的访问令牌）获取公共字段

看到[这个](http://zesty.ca/facebook/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:50:03.810

无需令牌即可访问用户/区域设置，但这只会为您提供他们的语言/国家/地区代码。

user/location，用户的当前城市，需要访问令牌。

# 3d - Ogre/Mogre：相机两点透视

> ID：10869603
> 
> 赞同：3
> 
> 时间：2012-06-03T10:37:01.180
> 
> 标签：3d, ogre, perspectivecamera

我正在显示一个包含一些立方体的场景。相机使用透视。一切都很好，但我希望垂直线是平行的（两点透视：[http](http://en.wikipedia.org/wiki/Perspective_(graphical)#Two-point_perspective) ://en.wikipedia.org/wiki/Perspective_(graphical)#Two-point_perspective ）。

从正面查看立方体时：

我想要的是：

```
+-----+
|     |
|     |
+-----+ 
```

我得到的（夸张的）：

```
+--------+
 \      /
  \    /
   +--+ 
```

我试过摆弄相机的 FOV，但无济于事。

**到目前为止我的尝试：**

```
Camera = SceneManager.CreateCamera(CameraName);
float q = 45;
float d = 5000f;
Matrix4 m = new Matrix4(
    1, 0, 0, (float)(Math.Sin(q)/d),
    0, 1, 0, 0,
    0, 0, 1, (float)(Math.Cos(q)/d),
    0, 0, 0, 0
    );
Camera.SetCustomProjectionMatrix(true, m); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T10:43:18.037

伯克利大学有一个关于不同透视变换和您需要使用的矩阵的页面。两点透视变换为：

```
 _                    _
 |  1   0   0 sin(q)/d  |
 |  0   1   0     0     |
 |  0   0   1 cos(q)/d  |
 |_ 0   0   0     0    _| 
```

`q`用于旋转点（而不是轴）的角度在哪里并且`d`无法解释（！）但我认为这是相机与焦平面的距离。

![在此处输入图像描述](../Images/6d7742a0cb31f5f454de47fc99da7615.png)

[来源](http://www.cs.berkeley.edu/~barsky/perspective.html)

# c++ - 2个对数嵌套for循环的Theta运行时间

> ID：10869609
> 
> 赞同：1
> 
> 时间：2012-06-03T10:37:32.467
> 
> 标签：c++, runtime, big-theta

什么 Theta 运行时有以下代码？

```
void f(int n)
{
  for(int i=1; i<n; i*=5)
    for(int j=n; j>0; j/=2);
} 
```

我想出了这个： T(n) = log(n) * (1 + log(n)) = log(n) + log^2(n) 现在我不知道在 Theta 符号中输入什么?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:13:19.633

log(n) + log^2(n) = Theta(log^2(n))。你只需要采用主导词。要看到这个，你可以写

```
log^2(n) <= log(n) + log^2(n) <= 2*log^2(n) 
```

这足以证明 T(n) 是 Theta(log^2(n))。

# jquery - Attaching links like in google plus or linked in in asp.net or jquery

> ID：10869610
> 
> 赞同：0
> 
> 时间：2012-06-03T10:38:10.600
> 
> 标签：jquery, web-scraping, social

Is there a way to simulate the "link attaching" behaviour that happens in most of the social network sites like linkedin, facebook or google plus? Eg. ![enter image description here](../Images/3ec79cc18e10506285d54060176b7a94.png)

When I post a url, the contents and thumbnails are fetched automatically. How does this happen? Is there is a way to do that with jquery?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:54:23.740

您可以使用 ajax 或从 jquery 获取调用作为回报，您应该获得页面 html，您必须根据需要呈现

# python - Python: Regex outputs 12_34 - I need 1234

> ID：10869614
> 
> 赞同：0
> 
> 时间：2012-06-03T10:38:30.843
> 
> 标签：python, regex, tokenize

So I have input coming in as follows: `12_34 5_6_8_2 4_____3 1234`

and the output I need from it is: `1234, 5682, 43, 1234`

I'm currently working with `r'[0-9]+[0-9_]*'.replace('_','')`, which, as far as I can tell, successfully rejects any input which is not a combination of numeric digits and under-scores, where the underscore cannot be the first character.

However, replacing the _ with the empty string causes 12_34 to come out as 12 and 34.

Is there a better method than 'replace' for this? Or could I adapt my regex to deal with this problem?

EDIT: Was responding to questions in comments below, I realised it might be better specified up here. So, the broad aim is to take a long input string (small example: "12_34 + 'Iamastring#' I_am_an_Ident" and return: ('NUMBER', 1234), ('PLUS', '+'), ('STRING', 'Iamastring#'), ('IDENT', 'I_am_an_Ident') I didn't want to go through all that because I've got it all working as specified, *except* for number. The solution code looks something like: tokens = ('PLUS', 'MINUS', 'TIMES', 'DIVIDE', 'IDENT', 'STRING', 'NUMBER') t_PLUS = "+" t_MINUS = '-' and so on, down to: t_NUMBER = ###code goes here I'm not sure how to put multi-line processes into t_NUMBER

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:46:43.640

我不确定您的意思以及为什么需要正则表达式，但这可能会有所帮助

```
In [1]: ins = '12_34 5_6_8_2 4_____3 1234'

In [2]: for x in ins.split(): print x.replace('_', '')
1234
5682
43
1234 
```

编辑以回应编辑的问题：

我仍然不太确定你在那里用令牌做什么，但我会做类似的事情（至少这对我来说很有意义：

```
input_str = "12_34 + 'Iamastring#' I_am_an_Ident" 
tokens = ('NUMBER', 'SIGN', 'STRING', 'IDENT')
data = dict(zip(tokens, input_str.split())) 
```

这会给你

```
{'IDENT': 'I_am_an_Ident',
 'NUMBER': '12_34',
 'SIGN': '+',
 'STRING': "'Iamastring#'"} 
```

然后你可以做

```
data['NUMBER'] = int(data['NUMBER'].replace('_', '')) 
```

和任何你喜欢的东西。

PS对不起，如果它没有帮助，但我真的不明白拥有`tokens = ('PLUS', 'MINUS', 'TIMES', 'DIVIDE', 'IDENT', 'STRING', 'NUMBER')`等的意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:17:04.330

你似乎在做类似的事情：

```
>>> data = '12_34 5_6_8_2 4_____3 1234'
>>> pattern = '[0-9]+[0-9_]*'
>>> re.findall(pattern, data)
['12_34', '5_6_8_2', '4_____3', '1234']
re.findall(pattern.replace('_', ''), data)
['12', '34', '5', '6', '8', '2', '4', '3', '1234'] 
```

问题是这`pattern.replace`不是从匹配`re`中删除s 的信号，它*会将您的正则表达式更改*为: 。你想要做的是对结果而不是模式做 - 例如，`_`*`'[0-9]+[0-9]*'``replace`*

 *```
>>> [match.replace('_', '') for match in re.findall(pattern, data)]
['1234', '5682', '43', '1234'] 
```

另请注意，您的正则表达式可以稍微简化；由于这是家庭作业，我将省略详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:30:49.293

好吧，如果你*真的*必须使用`re`and only `re`，你*可以*这样做：

```
import re

def replacement(match):
    separator_dict = {
        '_': '',
        ' ': ',',
    }
    for sep, repl in separator_dict.items():
        if all( (char == sep for char in match.group(2)) ):
            return match.group(1) + repl + match.group(3)

def rec_sub(s):
    """
    Recursive so it works with any number of numbers separated by underscores.
    """
    new_s = re.sub('(\d+)([_ ]+)(\d+)', replacement, s)
    if new_s == s:
        return new_s
    else:
        return rec_sub(new_s) 
```

但这体现了矫枉过正的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T10:48:54.170

```
a='12_34 5_6_8_2 4___3 1234'
>>> a.replace('_','').replace(' ',', ')
'1234, 5682, 43, 1234'
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T10:59:57.460

你的问题的措辞有点不清楚。如果您不关心输入验证，则以下内容应该有效：

```
input = '12_34 5_6_8_2 4_____3 1234'
re.sub('\s+', ', ', input.replace('_', '')) 
```

如果您需要实际去除所有不是数字或空格的字符并在数字之间添加逗号，那么：

```
re.sub('\s+', ', ', re.sub('[^\d\s]', '', input)) 
```

...应该完成任务。当然，编写一个只需要遍历字符串一次而不是使用多次`re.sub()`调用的函数可能会更有效。*

# actionscript-3 - AS3 - Score when hitTestObject

> ID：10869618
> 
> 赞同：0
> 
> 时间：2012-06-03T10:38:53.273
> 
> 标签：actionscript-3, flash

In this game I made some cubes fall and you have to avoid them. When you've avoided one, it keeps falling and hits the ground (scoreDetector), so everytime it hits the ground, I get 1 point. The problem is that the animatione of the cube keeps looping (that's what I want) but by doing so the score counter removes the point and keeps adding and removing it everytime the animation of the cube starts.

Code:

```
var time:int;
var timer:Timer = new Timer(1000,0);
var score:int = 0;

score = 0;
scoreCounter.text = "Score:  " + score;

timer.addEventListener(TimerEvent.TIMER, cubeFall);

timer.start();

function cubeFall(t:TimerEvent) {

time++;

if (time == 3) {
    cube_1.play();
} else if (time == 10) {
    cube_2.play();
}

// Add Score

else if (cube_1.hitTestObject(scoreDetector)) {
score++;
scoreCounter.text = "Score:  " + score;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:55:14.480

嗨，您可以使用一个包含命中元素的数组，如下所示：

```
var time:int;
var timer:Timer = new Timer(1000,0);
var score:int = 0;
var hittedObjects:Array = new Array();
score = 0;
scoreCounter.text = "Score:  " + score;

timer.addEventListener(TimerEvent.TIMER, cubeFall);

timer.start();

function cubeFall(t:TimerEvent) {

time++;

if (time == 3) {
    cube_1.play();
} else if (time == 10) {
    cube_2.play();
}

// Add Score

else if (cube_1.hitTestObject(scoreDetector) && hittedObjects.indexOf(cube_1)>0) {
score++;
scoreCounter.text = "Score:  " + score;
hittedObjects.push(cube_1);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T00:03:08.057

这是哈立德的一个解决方案，好主意！:) 但这不是数组的问题。hitTest 不应出现在 else if() 语句中。它应该在它自己的 if() 语句中。其次，得分++；应该是 hitTest if() 语句中的唯一内容。scoreCounter.text = "分数：" + 分数；应该在 if() 语句之外。这是它应该是什么样子。

```
var time:int;
var timer:Timer = new Timer(1000,0);
var score:int = 0;

score = 0;
scoreCounter.text = "Score:  " + score;

timer.addEventListener(TimerEvent.TIMER, cubeFall);

timer.start();

function cubeFall(t:TimerEvent) {

time++;

if (time == 3) {
    cube_1.play();
} else if (time == 10) {
    cube_2.play();
}

// Add Score

if (cube_1.hitTestObject(scoreDetector)) {
score++;
}
scoreCounter.text = "Score:  " + score;
} 
```

# windows-phone-7 - 使用带有 phonegap/Cordova 的媒体播放 MP3

> ID：10869619
> 
> 赞同：3
> 
> 时间：2012-06-03T10:38:53.527
> 
> 标签：windows-phone-7, cordova, cordova-2.0.0

**我的问题：**

我使用 Cordova 的媒体类。MP3 文件只播放一次（第一次）。

**代码：**

将此代码添加到 Cordova Starter 项目以重现我的问题：

```
 var playCounter = 0;
    function playMP3(){
      console.log("playMP3() counter " + playCounter);
      var my_media = new Media("app/www/test.mp3");//ressource buildAction == content
      my_media.play();
      playCounter++;
    }
    [...]
    <p onclick="playMP3();">Click to Play MP3</p> 
```

**VS输出：**

```
[...]
GapBrowser_Navigated :: /app/www/index.html
'UI Task' (Managed): Loaded 'System.ServiceModel.Web.dll'
'UI Task' (Managed): Loaded 'System.ServiceModel.dll'
Log:"onDeviceReady. You should see this message in Visual Studio's output window."
'UI Task' (Managed): Loaded 'Microsoft.Xna.Framework.dll'
Log:"playMP3() counter 0"
'UI Task' (Managed): Loaded 'System.SR.dll'
Log:"media on status :: {\"id\": \"fa123123-bc55-a266-f447-8881bd32e2aa\", \"msg\": 1, \"value\": 1}"
A first chance exception of type 'System.ArgumentException' occurred in mscorlib.dll
Log:"media on status :: {\"id\": \"fa123123-bc55-a266-f447-8881bd32e2aa\", \"msg\": 1, \"value\": 2}"
Log:"media on status :: {\"id\": \"fa123123-bc55-a266-f447-8881bd32e2aa\", \"msg\": 2, \"value\": 2.141}"
Log:"media on status :: {\"id\": \"fa123123-bc55-a266-f447-8881bd32e2aa\", \"msg\": 1, \"value\": 4}"
Log:"playMP3() counter 1"
A first chance exception of type 'System.ArgumentException' occurred in mscorlib.dll
A first chance exception of type 'System.IO.IOException' occurred in mscorlib.dll
A first chance exception of type 'System.IO.IsolatedStorage.IsolatedStorageException' occurred in mscorlib.dll
Log:"media on status :: {\"id\": \"2de3388c-bbb6-d896-9e27-660f1402bc2a\", \"msg\": 9, \"value\": 5}" 
```

**我的配置：**

*   科尔多瓦-1.6.1.js
*   卢米亚 800
*   WP 7.5 (7.10.7740.16)

**解决方法（种类）：**

*   停用应用程序（关闭屏幕）
*   重新激活应用程序（打开屏幕）
*   -> 你再拍一张。

欢迎任何帮助，因为我从五月开始就被阻止了，而且我在任何地方都找不到有用的信息。

另外，你能告诉我这段代码是否适用于你的配置吗？

.

.

.

**更新：添加演示代码，Cordova 1.8.0rc1**

使用全局变量。保持实例存活。

**结果**

*   test2.mp3 播放完毕，可以正常回放。
*   test.mp3 根本没有播放。
*   这是您播放的第一个文件。

**代码**

```
 function onDeviceReady()
  {
  document.getElementById("welcomeMsg").innerHTML += "Cordova is ready! version=" + window.device.cordova;
  console.log("onDeviceReady. You should see this message in Visual Studio's output window.");
  my_media = new Media("app/www/test.mp3");//ressource buildAction == content
  my_media2 = new Media("app/www/test2.mp3");//ressource buildAction == content
  }

  var playCounter = 0;
  var my_media = null;
  function playMP3(){
    console.log("playMP3() counter " + playCounter);
    my_media.play();
    playCounter++;
  }

  var my_media2 = null;
  function playMP32(){
    console.log("playMP32() counter " + playCounter);
    my_media2.play();
    playCounter++;
  }

</script>
[...]

<p onclick="playMP3();">Click to Play MP3</p>
<p onclick="playMP32();">Click to Play MP3 2</p> 
```

**VS输出：**

```
Log:"onDeviceReady. You should see this message in Visual Studio's output window."
INFO: startPlayingAudio could not find mediaPlayer for 71888b14-86fe-4769-95c9-a9bb05d5555b
Log:"playMP32() counter 0"
INFO: startPlayingAudio could not find mediaPlayer for 71888b14-86fe-4769-95c9-a9bb05d5555b
Log:"playMP32() counter 1"
Log:"playMP3() counter 2"
INFO: startPlayingAudio could not find mediaPlayer for b60fa266-d105-a295-a5be-fa2c6b824bc1
A first chance exception of type 'System.ArgumentException' occurred in System.Windows.dll
Error: El parámetro es incorrecto. 
Log:"playMP32() counter 3"
INFO: startPlayingAudio could not find mediaPlayer for 71888b14-86fe-4769-95c9-a9bb05d5555b 
```

.

.

.

**更新：科尔多瓦 2.0.0**

我用 2.0.0 的测试用例更新了 Apache 错误报告。

任何人都可以重现这个吗？

错误报告链接： [https ://issues.apache.org/jira/browse/CB-941](https://issues.apache.org/jira/browse/CB-941)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:15:15.047

我看到您在第二次单击时收到了 IsolatedStorageException，这让我认为该文件被第一个`Media`实例保持打开状态，这会阻止它再次被访问。

我建议确保您要么只为`Media`每个文件创建一个实例，要么查看是否有办法首先处理旧实例。

这是我会尝试的（但我没有测试过）：

```
 var playCounter = 0;

 // moved my_media here so it won't be recreated
 var my_media = new Media("app/www/test.mp3");//ressource buildAction == content

    function playMP3(){
      console.log("playMP3() counter " + playCounter);
      my_media.play();
      playCounter++;
    }
    [...]
    <p onclick="playMP3();">Click to Play MP3</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T21:02:01.507

差点忘了……这对我有用。希望能帮助到你 ;-）

WP7.5/科尔多瓦 1.9.0

要求：据我所知，仅适用于 .wav 文件。我不得不转换我的 .mp3 文件，因为它们会抛出丑陋的异常。

插件：C#：

```
namespace Cordova.Extension.Commands
{
    public class PGSoundFX : BaseCommand
    {
        public Dictionary <string, SoundEffect> fxSoundMap = new Dictionary<string,SoundEffect>();

    public enum FXType
    {
        Load=0,
        Play=1
    }

    [DataContract]
    public class FXOption
    {
        [DataMember]
        public string audioSrc;
        [DataMember]
        public string audioRef;
        [DataMember]
        public FXType fxType; 
    }

    public void groAudio(string options)
    {
        FrameworkDispatcher.Update(); 
        FXOption opts;

        opts = WP7CordovaClassLib.Cordova.JSON.JsonHelper.Deserialize<FXOption>(options);

        if (opts != null)
        {
            try
            {
                switch (opts.fxType)
                {
                    case FXType.Load:
                        loadSound(opts.audioSrc, opts.audioRef);
                        break;
                    case FXType.Play:
                        Dictionary<string, SoundEffect>.KeyCollection keyCol = fxSoundMap.Keys;
                        foreach (string tmp in keyCol)
                        {
                            if ((opts.audioRef).Equals(tmp))
                                playSound(fxSoundMap[tmp]);
                        }
                        break;
                }
            }
            catch
            {
                Debug.WriteLine("PGSoundFX: loadSound Error ... null parameter(s).");
            }
        }
    }

    /// <summary> 
    /// Loads a wav file into an XNA Framework SoundEffect. 
    /// </summary> 
    /// <param name="Sound">The SoundEffect to play.</param> 
    private void playSound(SoundEffect Sound)
    {
        Sound.Play();
        DispatchCommandResult(new PluginResult(PluginResult.Status.OK));
    }

    /// <summary> 
    /// Loads a wav file into an XNA Framework SoundEffect. 
    /// </summary> 
    /// <param name="SoundFilePath">Relative path to the wav file.</param> 
    /// <param name="Sound">The SoundEffect to load the audio into.</param> 
    private void loadSound(String SoundFilePath, String SoundName)
    {
        if (fxSoundMap.Keys != null)
        {
            Dictionary<string, SoundEffect>.KeyCollection keyColl = fxSoundMap.Keys;
            foreach (string tmp in keyColl)
            {
                if (SoundName.Equals(tmp))
                    return;
            }
        }

        SoundEffect Sound = null;

        try
        {
            // Holds informations about a file stream. 
            StreamResourceInfo SoundFileInfo = Application.GetResourceStream(new Uri(SoundFilePath, UriKind.Relative));
            // Create the SoundEffect from the Stream 
            Sound = SoundEffect.FromStream(SoundFileInfo.Stream);
            fxSoundMap[SoundName] = Sound;
            DispatchCommandResult(new PluginResult(PluginResult.Status.OK));
        }
        catch (NullReferenceException)
        {
            Debug.WriteLine("Couldn't load sound " + SoundFilePath);
        }
        } 
    }
} 
```

Javascript：插件：

```
PhoneGap.addConstructor(function() {

navigator.plugins.pgSoundFX = 
{
    playSound:function(fxName)
    {
    var options = {"audioRef":fxName,"fxType":1};
    PhoneGap.exec(null, null, "PGSoundFX", "groAudio", options);
    },

    loadSound:function(fxSrc, fxName)
    {
    var options = {"audioSrc":fxSrc,"audioRef":fxName,"fxType":0};
    PhoneGap.exec(null, null, "PGSoundFX", "groAudio", options);
    }
}
}); 
```

Javascript：使用：

```
//NOTE: Allows you to pre-load sound effect files

//initialize pgSoundFX plugin
if (!navigator.plugins) {
    console.log("plugIns do not exist!");
    navigator.plugins = {};
}

navigator.plugins.pgSoundFX.loadSound("www/audio/file1.wav", "item1");
navigator.plugins.pgSoundFX.loadSound("www/audio/file2.wav", "item2");
navigator.plugins.pgSoundFX.loadSound("www/audio/file3.wav", "item3");
    :
    :

//NOTE: Play whenever needed
navigator.plugins.pgSoundFX.playSound("item1"); 
```

当然，您的文件位置（www/audio/）、名称（file1 等）和参考名称（item1 等）都是您想要的。与大多数人一样，有很多方法可以改进此代码……请随意。我的用例预加载了 5 个 .wav 文件，大小从 28k 到 364k 不等，并在整个用户游戏过程中播放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:38:39.773

我不确定这是不是正确的答案，因为我没有尝试过，但将其视为头脑风暴。

首先使用ctor创建您的音频，`var my_media = new Media(src, onSuccess, onError);`成功时只需播放它，错误时首先尝试使用`media.release`代码发布它。

好吧，如果您知道要发布的其他事件或动作，那将更合适。

编辑：我刚刚注意到它，您没有使用`stop`媒体，您也可以在需要时尝试使用它，例如，`playMP3()`如果媒体不为空，请先尝试停止它。

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T17:51:07.423

我认为问题可能在于 Silverlight 每页只允许一个媒体实例的限制......并且由于 PG/Cordova 本质上是一个单页 webBrowser 实例，它只能有一个媒体实例。我正在尝试构建一个 XNA SoundEffect 插件来解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T17:11:23.730

是一个 Cordova 错误 [https://issues.apache.org/jira/browse/CB-941](https://issues.apache.org/jira/browse/CB-941)

purpulecabbage 在他的 gitHub 仓库中解决了这个问题。请参阅对错误报告的评论。

# windows-phone-7 - 导航失败时执行的代码

> ID：10869621
> 
> 赞同：0
> 
> 时间：2012-06-03T10:38:59.500
> 
> 标签：windows-phone-7

你好我不知道我应该从哪里开始寻找。我添加了一些道具（在此之前我的代码运行良好），然后我得到

> System.Diagnostics.Debugger.Break();

所以然后我评论了这些变化，但这没有帮助。

你能建议我从哪里开始寻找解决方案吗？

我的代码：

```
namespace SkydriveContent
{
    public partial class MainPage : PhoneApplicationPage
    {
        private LiveConnectClient client;
        FilesManager fileManager = new FilesManager();
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void signInButton1_SessionChanged(object sender, LiveConnectSessionChangedEventArgs e)
        {

            if (e.Status == LiveConnectSessionStatus.Connected)
            {

                client = new LiveConnectClient(e.Session);
                infoTextBlock.Text = "Signed in.";
                client.GetCompleted +=
                    new EventHandler<LiveOperationCompletedEventArgs>(OnGetCompleted);
                client.GetAsync("/me/skydrive/files/");
                fileManager.CurrentFolderId = "/me/skydrive/files/"; 
            }
            else
            {
                infoTextBlock.Text = "Not signed in.";
                client = null;
            }
        }

        void OnGetCompleted(object sender, LiveOperationCompletedEventArgs e)
        {
            //Gdy uda nam się podłaczyc do konta skydrive
            if (e.Error == null)
            {
                signInButton1.Visibility = System.Windows.Visibility.Collapsed;

                    infoTextBlock.Text = "Hello, signed-in user!";

                List<object> data = (List<object>)e.Result["data"];

                fileManager.FilesNames.Clear();
                filemanager.filesnames.add("..");
                foreach (IDictionary<string,object> item in data)
                {

                    File file = new File();              

                    file.fName = item["name"].ToString();
                    file.Type = item["type"].ToString();
                    file.Url = item["link"].ToString();
                    file.ParentId = item["parent_id"].ToString();
                    file.Id = item["id"].ToString();  

                    fileManager.Files.Add(file);
                    fileManager.FilesNames.Add(file.fName);

                }

                FileList.ItemsSource = fileManager.FilesNames;               
            }
            else
            {
                infoTextBlock.Text = "Error calling API: " +
                    e.Error.ToString();
            }
        }

        private void FileList_Tap(object sender, GestureEventArgs e)
        {
            foreach (File item  in fileManager.Files)
            {
                if (item.fName == FileList.SelectedItem.ToString() )
                {
                    switch (item.Type)
                    { 
                        case "file":
                            MessageBox.Show("Still in progress");

                            break;
                        case "folder":

                            fileManager.CurrentFolderId = item.ParentId.ToString(); 
                            client.GetAsync(item.Id.ToString() + "/files");

                            break;
                        default:
                            MessageBox.Show("Coś nie działa");
                            break;
                    }
                }
                else if (FileList.SelectedItem.ToString() == "..")
                {
                    client.GetAsync(fileManager.CurrentFolderId + "/files");
                }
            }
        }
    }
} 
```

跑在那条线上停下。

```
// Code to execute if a navigation fails
        private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)
        {
            if (System.Diagnostics.Debugger.IsAttached)
            {
                // A navigation has failed; break into the debugger
                System.Diagnostics.Debugger.Break();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:48:19.397

```
System.Diagnostics.Debugger.Break(); 
```

通常由于**未捕获的异常而发生。**
发布开始出现问题的**代码**，或者在遇到此问题时发布**堆栈跟踪。**
如果没有真正看到你在做什么，任何人都无法说出任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:59:39.190

您应该检查您在 XAML 和代码中拥有的所有 URL。当您到达 NavigationFailed 功能时，这意味着手机试图导航到某个不存在的页面。如果您能说出应用程序引发异常时您在做什么，我们将能够提供更多帮助。

# asp.net - JSON RPC in WCF

> ID：10869624
> 
> 赞同：1
> 
> 时间：2012-06-03T10:40:14.500
> 
> 标签：asp.net, json, wcf

I have been attempting to find a good implementation of Json rpc in wcf, but I have not had much luck yet.I have found several examples of implementations using jayrock and Json-rpc.net, but I would prefer to work within wcf as much as possible.

Has anyone ever developed a Json rpc server within wcf? If so, could you point me towards some example code or documentation?

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:24:40.657

这*是*一个合理的场景。我不确定如何使用 WCF 来做，但我认为[Web API](http://www.asp.net/web-api)是要走的路。同样来自微软。

# ios - 如何防止在 iPad 上调整大小

> ID：10869630
> 
> 赞同：8
> 
> 时间：2012-06-03T10:41:00.903
> 
> 标签：ios, ipad, safari

我有一个在 iPad 上的 Safari 上运行的网络应用程序。我正在从 iPad 主页启动应用程序。我希望应用程序以全屏模式启动，并继续以全屏模式运行（即不显示 Safari 地址栏）。

我想防止“捏缩放”和平移/缩放功能，因此页面始终保持静态。我该怎么做呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T10:43:27.523

如果您将以下元标记放入 html 输出，然后从主页启动应用程序，那么它将在运行时全屏：

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

以下是防止用户缩放：

```
<meta name="viewport" content="width=device-width,user-scalable=no"> 
```

# c# - Random Top query in MongoDB using C# Linq

> ID：10869634
> 
> 赞同：0
> 
> 时间：2012-06-03T10:41:30.070
> 
> 标签：c#, linq, mongodb, random, mongodb-.net-driver

I want to take a record randomly from MongoDB using Linq in C#. Here is what I'm doing.

```
public string RandomWord()
{
    using (Mongo mongo = new Mongo(_mongoConfig.BuildConfiguration()))
    {
        try
        {
            mongo.Connect();
            var db = mongo.GetDatabase(_dbName);
            IMongoCollection<dic_words> collection = db.GetCollection<dic_words>();
            return 
                (from w in collection.Linq()
                where w.word.Length > 2
                orderby Guid.NewGuid()
                select w).Take(1).FirstOrDefault().word;
        }
        catch (Exception)
        {
            throw;
        }
    }
} 
```

And here is the error I got

> The query is too complex to be processed by MongoDB. Try building a map-reduce query by hand or simplifying the query and using Linq-to-Objects.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:59:08.740

看起来你正在使用 FluentMongo - 你得到的错误来自那里。

导致此错误的可能候选者是这一行：

```
 orderby Guid.NewGuid() 
```

FluentMongo 似乎不支持此功能。这意味着您可能希望使用不同的方法来随机化返回的记录。FluentMongo 确实支持 OrderBy 但[他们的文档](https://github.com/craiggwilson/fluent-mongo/wiki/Linq)只提到了按字段排序的能力。

请注意，从 LINQ 映射到 SQL 的内容不一定会映射到 MongoDB 查询。关于这个问题的一些相关讨论在[这个问题](https://stackoverflow.com/questions/648196/random-row-from-linq-to-sql)和许多其他问题中。

顺便说一句，在 SO 和 mongo-users 列表上都有很多关于如何从 MongoDB 获取随机文档/对象的讨论。Mongo Cookbook中甚至有[一篇关于它的文章。](http://cookbook.mongodb.org/patterns/random-attribute/)我建议您查看那些可能的解决方案来解决您的用例。

# forms - Use Access replication id in form as number

> ID：10869635
> 
> 赞同：0
> 
> 时间：2012-06-03T10:41:30.723
> 
> 标签：forms, ms-access, ms-access-2007, guid, ms-access-2010

I have a number of tables in an MS Access Db that have to use Replication IDs (GUID) as the primary key (and therefore also as foreign key contraints in the relationships between them). The data for these tables comes from an external application and I can't use any other field as a primary as they aren't unique. (I've also chosen, not to use local integer keys, "in loco parentis" for the GUID).

The database worked fine and all the relationships worked as expected and I am able to present the related records in a hierarchical MS Access form (one-to-many-to-many). The problem occurs when I try to present a count as part of the relationhips.

If I have GUIDInParent and GUID in Child as two fields, I can get the children by creating a form with Source Object = ParentToChildRelationship and Link Master Field = GUIDInParent and Link Child Field = GUIDInChild.

However, if I want indicate how many Chidren I'm going to display (since they may be hidden under a scrolled section), I use a separate form field populated via a `DCount("1", "ParentToChildRelationship", "[GUIDinChild] = '" & [GUIDInParent] & '")`

For the GUID field - this doesn't work... The reason appears to be that while on the form, the GUID (Replication ID) displays as a "GUID" - of the form `"{HHHHHHH-HHHH-HHHH-HHHH-HHHHHHHHHHHH}"` when assigned to another field it (literally) displays as "Chinese". Even assigning via the GUIDAsString function doesn't change this.

What's going on an is there any way I can use these GUIDs as I intend?

I have "jury rigged" a solution by having two columns in the tables (GUID - as number and GUIDString - as string) both set tot he same value and using the rendering that works in each case... The `DCount("1", "ParentToChildRelationship", "[GUIDinChild] = '" & [GUIDInParent] & '")` thus becomes: `DCount("1", "ParentToChildRelationship", "[GUIDinChild] = '" & [GUIDInParentString] & '")` and thus works...

TIA, Paolo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:06:18.117

您是否考虑过子表单页脚中的控件来计算记录？这可以在主窗体中按名称引用。或者，您可以参考`MySubformControl.Form.Recordset.Recordcount`

# javascript - 表格行导致内容添加不起作用

> ID：10869636
> 
> 赞同：0
> 
> 时间：2012-06-03T10:41:38.103
> 
> 标签：javascript, jquery

我在下面有一段代码在将模式窗口中的文本添加到文本区域时可以正常工作：

```
<script type="text/javascript">

var plusbutton_clicked;

function insertQuestion(form) {

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $plusrow = $("<td class='plusrow'></td>");
    var $question = $("<td class='question'></td>");

    $('.questionTextArea').each( function() {

    var $this = $(this);
    var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val());

    $question.append($questionText);

    });

        $('.plusimage').each( function() {

    var $this = $(this);
    var $plusimagerow = $("<a onclick='return plusbutton(this);'><img src='Images/plussign.jpg' width='30' height='30' alt='Look Up Previous Question' class='imageplus'/></a>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val());

    $plusrow.append($plusimagerow);

    });

    $tr.append($plusrow);
    $tr.append($question);
    $tbody.append($tr); 

    form.questionText.value = "";

    $('.questionTextArea').val('');

}

function closewindow() {     

    $.modal.close(); 
    return false;
} 

$('.plusimage').live('click', function() {
    plusbutton($(this));
});

function plusbutton(plus_id) {
    // Set global info
    plusbutton_clicked = plus_id;
    // Display an external page using an iframe
    var src = "previousquestions.php";
    $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
    return false;
}

function addwindow(questionText) { 

    if(window.console) console.log();

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
        $('#mainTextarea').val(questionText); 
        } else { 
            $(plusbutton_clicked).parent('td').next('td.question').find('textarea.textAreaQuestion').val(questionText);
            }

    $.modal.close(); 
    return false;
} 

</script> 
```

但问题是，如果我在下面包含我需要的这段代码`function insertQuestion(form) {`，那么它会停止将文本添加到 textarea 中，为什么要这样做？

```
var $qid = $("<td class='qid'>" + qnum + "</td>" );

...

$tr.append($qid); 
```

$qid 是每一行的题号，所以每增加一行，每次加一题号。

Blow 是将文本区域从顶部附加到表格行的 html 代码：

```
<table id="question">
<tr>
    <th colspan="2">
        Question Number <span class="questionNum">1</span>
        <input type="hidden" class="num_questions" name="numQuestion" value="1">
    </th>
</tr>
<tr>
    <td rowspan="3">Question:</td> 
    <td rowspan="3">
        <textarea class="questionTextArea" id="mainTextarea" rows="5" cols="40" name="questionText"></textarea>
    </td>
</tr>
</table> 
```

更新：

我已经包含了两个应用程序的链接。一种有效但不包括 $qid，另一种包括 $qid 但不工作但我确实需要工作。请按照两个应用程序中的步骤进行操作，以便您自己测试并查看发生了什么：

[应用 1](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)：没有 $qid 但可以工作。

[应用 2](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable3.php)：包含 $qid 但不工作：

对于这两种应用程序，请按照以下步骤操作：

1.  单击“添加问题”按钮，然后将在新行中添加一个文本区域。
2.  单击刚刚添加的表格行中的“绿色加号”按钮，将出现一个模式窗口。
3.  在模态窗口中显示一个搜索栏，在搜索栏中输入“AAA”并单击“搜索”按钮
4.  搜索结果将出现，单击“添加”按钮添加一行。您会发现模态窗口已关闭，但“问题”字段中的内容未添加到您单击绿色加号按钮的行内的文本区域中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:49:46.733

尝试明确设置 td 值

```
var $qid = $("<td class='qid'></td>" ).text(qnum);  
$tr.append($qid); 
```

然后将文本设置代码替换为

```
$(plusbutton_clicked).parent('td').next('td.question').find('textarea.textAreaQuestion').val(questionText); 
```

到

```
$(plusbutton_clicked).closest('tr').find('textarea.textAreaQuestion').val(questionText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:57:10.610

如果您尝试使用文本，则可以轻松尝试：

```
var $qid = $("<td class='qid'>"+ qnum + "</td>" );  
$tr.append($qid); 
```

或者

```
$("<td class='qid'></td>" ).text('hello').appendTo($tr); 
```

# android - Android error: Error: No resource found that matches the given name

> ID：10869641
> 
> 赞同：5
> 
> 时间：2012-06-03T10:42:53.797
> 
> 标签：android, android-layout

I am new to android, so maybe this question is naive.

I am trying to build a layout with two lists side by side. It works fine when I have one list, but when I add a second one, I get this error.

My view extends Activity and not ListActivity.

But I just can't figure out why my build fails with this error:

```
\main.xml:13: error: Error: No resource found that matches the given name (at 'id' with value '@android:id/selected_list').
\Android\android-sdk\tools\ant\build.xml:598: The following error occurred while executing this line:
\Android\android-sdk\tools\ant\build.xml:627: null returned: 1 
```

This is what my main.xml looks like:

```
<ListView  
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:id="@android:id/list"
        android:layout_weight=".5"/>
    <ListView  
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:id="@android:id/selected_list"
        android:layout_weight=".5"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T10:47:50.807

使用“ `@+id/list`”和“ `@+id/selected_list`”代替“ `@android:id/...`”。

要在代码中找到这些 id，请使用：

```
findViewById(R.id.list); 
```

或者

```
findViewById(R.id.selected_list); 
```

并确保导入 R 文件：.R; 而不是 com.android.R；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T10:51:29.223

更改列表视图的 ID

代码：

```
 <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </ListView>
    <ListView
        android:id="@+id/selected_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </ListView> 
```

# android - 我可以在数组中“存储”可跨越的字符串吗？

> ID：10869643
> 
> 赞同：3
> 
> 时间：2012-06-03T10:42:59.950
> 
> 标签：android

我需要构建一个 textView，其中包含以下内容：“Title[x]”后跟“some text”，然后是“\n”，然后是“Title[y]”，然后是“more text”等。

标题[x] 一些文字

标题[y] 更多文字

我需要标题为粗体并为每个标题使用不同的颜色。我总共有 11 个标题和多达 30 个文本字符串可供选择，任何标题都可以有任何文本字符串。在每个循环中，我的最终结果文本中都会有 1 到 6 个标题。我用 x 和 y 的“已知”值构建 textView 没有问题，但在现实生活中，在构建可跨字符串之前，我不会知道这些值。我不想构建所有可能的字符串变体（超过 300 个）。我已经尝试创建所有“标题”跨栏，并在创建它们时将它们附加到我的“结果”中，并且效果很好，但是如果我将它们全部创建并在最后将它们附加到一个语句中，我将失去 Bold 和 Color 属性.

我的 main.xml 有一个 ID 为 color_test 的 textView。

```
package uk.cmj.color;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.text.SpannableString;
import android.text.SpannableStringBuilder;
import android.text.style.ForegroundColorSpan;
import android.text.style.StyleSpan;
import android.view.View;
import android.widget.TextView;
import android.widget.TextView.BufferType;

public class ColorActivity extends Activity {
/** Called when the activity is first created. */

private static int titleIndex = 0;
private final String[] titles = {"Title A", "Title B", "Title C"};      

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

// ---------------------------------------------
// THIS WORKS AND I SEE COLOR AND BOLD FOR TITLE
// ---------------------------------------------

titleIndex = 1;

SpannableStringBuilder resultText = new SpannableStringBuilder(); 
String firstTitle = titles[titleIndex]; 
SpannableString firstTitleSpannable= new SpannableString(firstTitle); 
firstTitleSpannable.setSpan(new ForegroundColorSpan(Color.rgb(155,79,25)), 0, firstTitle.length(), 0); 
firstTitleSpannable.setSpan(new StyleSpan(android.graphics.Typeface.BOLD),  0, firstTitle.length(), 0); 
resultText.append(firstTitleSpannable);

String body1 = " some text" + "\n"; 
SpannableString body1Spannable= new SpannableString(body1); 
body1Spannable.setSpan(new ForegroundColorSpan(Color.BLACK), 0, body1.length(), 0); 
resultText.append(body1Spannable); 

titleIndex = 2;

String nextTitle = titles[titleIndex]; 
SpannableString nextTitleSpannable= new SpannableString(nextTitle); 
nextTitleSpannable.setSpan(new ForegroundColorSpan(Color.rgb(155,79,25)), 0, nextTitle.length(), 0); 
nextTitleSpannable.setSpan(new StyleSpan(android.graphics.Typeface.BOLD),  0, nextTitle.length(), 0); 
resultText.append(nextTitleSpannable + "\n");

String body2 = " some different text" + "\n"; 
SpannableString body2Spannable= new SpannableString(body2); 
body1Spannable.setSpan(new ForegroundColorSpan(Color.BLACK), 0, body1.length(), 0); 
resultText.append(body2Spannable); 

TextView color_test = (TextView) findViewById(R.id.color_test); 
color_test.setText(resultText, BufferType.SPANNABLE); 

// ------------------------------------------
// THIS DOESN'T WORK AS I LOSE COLOR AND BOLD
// ------------------------------------------

titleIndex = 1;

SpannableStringBuilder resultText = new SpannableStringBuilder(); 
String firstTitle = titles[titleIndex]; 
SpannableString firstTitleSpannable= new SpannableString(firstTitle); 
firstTitleSpannable.setSpan(new ForegroundColorSpan(Color.rgb(155,79,25)), 0, firstTitle.length(), 0); 
firstTitleSpannable.setSpan(new StyleSpan(android.graphics.Typeface.BOLD),  0, firstTitle.length(), 0); 

String body1 = " some text" + "\n"; 
SpannableString body1Spannable= new SpannableString(body1); 
body1Spannable.setSpan(new ForegroundColorSpan(Color.BLACK), 0, body1.length(), 0); 
resultText.append(body1Spannable); 

titleIndex = 2;

String nextTitle = titles[titleIndex]; 
SpannableString nextTitleSpannable= new SpannableString(nextTitle); 
nextTitleSpannable.setSpan(new ForegroundColorSpan(Color.rgb(155,79,25)), 0, nextTitle.length(), 0); 
nextTitleSpannable.setSpan(new StyleSpan(android.graphics.Typeface.BOLD),  0, nextTitle.length(), 0); 

String body2 = " some different text" + "\n"; 
SpannableString body2Spannable= new SpannableString(body2); 
body1Spannable.setSpan(new ForegroundColorSpan(Color.BLACK), 0, body1.length(), 0); 
resultText.append(body2Spannable); 

resultText.append(firstTitleSpannable 
                + body1Spannable 
                + nextTitleSpannable
                + body2Spannable); 

TextView color_test = (TextView) findViewById(R.id.color_test); 
color_test.setText(resultText, BufferType.SPANNABLE); 

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:02:12.997

我不太确定我是否正确理解了您的问题。但如果我这样做，我会编写一个包含所有需要的属性并在运行时创建对象的类：

```
public class SpannableContent {
    private StringBuilder result = new StringBuilder();
    private String title1 = null;
    private String title2 = null;
    private String description = null;

    public SpannableContent(String _title1, String _title2, String _desc) {
        this.title1 = _title1;
        this.title2 = _title2;
        this.description = _desc;

        result.append(getFormatedTitle1());
        result.append(getFormatedTitle2());
        result.append(getFormatedDescription());
    }

    private String getFormatedTitle1() {
        String resString = null;
        // do whatever Spannable stuff you want to do w/ title1 here

        return resString;
    }

    private String getFormatedTitle2() {
        String resString = null;
        // do whatever Spannable stuff you want to do w/ title2 here

        return resString;
    }

    private String getFormatedDescription() {
        String resString = null;
        // do whatever Spannable stuff you want to do w/ the description here

        return resString;
    }

    public String getFinalContent() {
        return result.toString();
    }
} 
```

然后在运行时做类似的事情

```
SpannableContent spannableC = new SpannableContent(dynamicTitle1, dynamicTitle2, dynamicDesc);
resultText.append(spannableC.getFinalContent()); 
```

您可以将对象存储在 ArrayList 类型的 ArrayList 中`SpannableContent`。

```
ArrayList<SpannableContent> spannableArrayList = new ArrayList<SpannableContent>(); 
```

# opengl - 在 OSX Lion 上使用 OpenGL 3.2 和 Derelict3 和 GLFW 3

> ID：10869647
> 
> 赞同：3
> 
> 时间：2012-06-03T10:43:22.580
> 
> 标签：opengl, osx-lion, d, opengl-3, glfw

我无法使用 Derelict3 和 GLFW 3 在 Lion (osx 10.7.4) 上运行 OpenGL 3.2。

这是我的测试程序：

```
module glfw3Test;

import std.stdio, std.conv;
import derelict.glfw3.glfw3;
import derelict.opengl3.gl3;

string programName = "glfw3Test";
int width = 640;
int height = 480;

GLFWwindow window;

void main() {
    // load opengl
    DerelictGL3.load();
    // load GLFW
    DerelictGLFW3.load();

    if(!glfwInit()) {
        glfwTerminate();
        throw new Exception("Failed to create glcontext");
    }

    writefln("GLFW:     %s", to!string(glfwGetVersionString()));

    window = glfwOpenWindow(width, height, GLFW_WINDOWED, programName.ptr, null);
    if(!window) {
        glfwTerminate();
        throw new Exception("Failed to create window");
    }

    // Request opengl 3.2 context
    // based off the GLFW FAQ: http://www.glfw.org/faq.html#4_2
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
    glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    DerelictGL3.reload();

    // Print OpenGL and GLSL version
    writefln("Vendor:   %s",   to!string(glGetString(GL_VENDOR)));
    writefln("Renderer: %s",   to!string(glGetString(GL_RENDERER)));
    writefln("Version:  %s",   to!string(glGetString(GL_VERSION)));
    writefln("GLSL:     %s\n", to!string(glGetString(GL_SHADING_LANGUAGE_VERSION)));
} 
```

我得到这个输出：

```
GLFW:     3.0.0 dynamic
Vendor:   NVIDIA Corporation
Renderer: NVIDIA GeForce 9400M OpenGL Engine
Version:  2.1 NVIDIA-7.18.18
GLSL:     1.20 
```

我已经检查过了，看来我的显卡应该[支持 OpenGL 3.3](http://en.wikipedia.org/wiki/GeForce_9_Series#GeForce_9M_Series)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T08:38:30.477

我所要做的就是在调用*之前*`glfwOpenWindow`指定一些窗口提示：

```
...

glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);

window = glfwOpenWindow(width, height, GLFW_WINDOWED, programName.ptr, null);

... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T14:50:20.707

Lion 支持 OpenGL 3.2。您需要在代码中指定 OpenGL 3.2 核心支持

请参阅[OpenGL 配置文件 (Mac OS X v10.7)](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_pixelformats/opengl_pixelformats.html#//apple_ref/doc/uid/TP40001987-CH214-SW9)

并[更新应用程序以支持 OpenGL 3.2 核心规范](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/UpdatinganApplicationtoSupportOpenGL3/UpdatinganApplicationtoSupportOpenGL3.html#//apple_ref/doc/uid/TP40001987-CH3-SW1)

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-06-03T10:50:29.700

问题不在于您的显卡，而在于 OSX 视频驱动程序。OS X 仅支持 OpenGL 2.1 和 OpenGL ES 2。您可以查阅[此表](https://developer.apple.com/graphicsimaging/opengl/capabilities/)了解详细信息

# javascript - zepto javascript 显示 x 元素

> ID：10869655
> 
> 赞同：1
> 
> 时间：2012-06-03T10:45:07.753
> 
> 标签：javascript, html, zepto

使用 zepto.js，如何从 ul 中显示 X 项，隐藏其余项并仅在用户单击“显示更多”链接/按钮时显示它们？

10倍！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:10:02.523

这是完成您所要求的一种方法。

```
$(function() {
  $('li').slice(5).toggle();

  $('span').click(function() {
    $('li').slice(5).toggle();
  });
});​ 
```

第一个`.slice(5).toggle()`函数获取所有选定的列表项，将它们缩小到从索引 5 开始到末尾的元素子集。然后它切换它在该子集中找到的第一个元素的可见状态。

然后我们将一个函数附加到`click`跨度上的事件，这是我们的显示/隐藏元素。该函数实际上与我们运行以隐藏索引 5 之后的所有元素的初始函数相同。

查看这个[JS Fiddle](http://jsfiddle.net/ZPEF3/16/)以获得一个工作示例。此外，为了进一步参考，这里是[文档`.slice()`](http://zeptojs.com/#slice)，这里是[文档`.toggle()`](http://zeptojs.com/#toggle)。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T22:43:24.940

基本上有2种方式。

1.  使用 zepto 切换类并使用 css 定义要隐藏的内容

    ```
    /* show only the first 3 list items */
    ul.collapsed li:nth-child(n+4) {
        display: none;
    } 
    ```

    ```
    var $list = $(ul.collapsed); // initially the list is collapsed

    // use a show-more link to toggle display of remaining items
    $("a.show-more").click(function(){

        // get the current state of the list by querying the className
        var shouldShow = $list.hasClass("collapsed") == true;
        $list.toggleClass("collapsed");

        // set the link text according to the task (show or hide)
        $(this).html(shouldShow ? "Show less" : "Show more");

        // its a link, don't follow it
        return false;
    }); 
    ```

2.  使用 zepto “独立”

    ```
    var $list = $(ul);

    // use the link to set the css properties directly
    $("a.show-more").click(function(){

        var shouldShow = $list.hasClass("collapsed") == true;

        $("li:nth-child(n+4)", $list).css({
            "display": shouldShow : "" : "none"
        });

        $(this).html(shouldShow ? "Show less" : "Show more");
        return false;
    }); 
    ```

# node.js - 如何使 Nodejs 拾取更改而不是每次都重新启动服务器？

> ID：10869659
> 
> 赞同：21
> 
> 时间：2012-06-03T10:46:10.887
> 
> 标签：node.js

Nodejs 有没有办法反映在我的文件中所做的更改，而不是关闭节点并再次运行它？我仍处于开发阶段，所以我做了很多更改，所以我每次都停止服务器并再次运行它（使用“node”命令）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-21T02:40:59.267

我更喜欢使用[https://github.com/remy/nodemon](https://github.com/remy/nodemon)你可以全局安装

```
npm install -g nodemon 
```

并通过执行启动您的服务器

```
nodemon app.js 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-03T10:48:30.793

您可以使用[节点主管](https://github.com/isaacs/node-supervisor)：

> nodejs 的一个小主管脚本。它运行您的程序，并监视代码更改，因此您可以进行热代码重新加载行为，而无需担心内存泄漏并确保清理所有模块间引用，并且无需全新的 require 系统。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-22T20:04:59.310

您可以使用 nodemon 监控您的文件，并在有任何更改时自动重启：

```
npm install -g nodemon 
```

在你仍然可以使用你的命令之后`npm start`，你必须在 package.json 中替换这一行

```
"scripts":{
  // "start": "node ./bin/www"
  "start": "nodemon ./bin/www"
} 
```

# java - 有没有办法对 Swing 应用程序进行模糊测试？

> ID：10869663
> 
> 赞同：5
> 
> 时间：2012-06-03T10:46:45.807
> 
> 标签：java, swing, fuzzing

回到过去，PalmOS 有一个模拟器，可以生成随机事件（“点击此处，在该文本字段中输入垃圾，...”）用于测试应用程序如何处理它们（称为“Gremlins”）。这有点像模糊测试，但对于 GUI。在 Java Swing 应用程序中是否有一种简单的（现有）方法可以做到这一点？

编辑：

请注意，我不想指定触发哪些事件。我想要一些代码来*自动生成*和触发随机事件（如“Math.random()”）事件。事件做有用的事情或发现错误的可能性非常小。但这被触发许多事件所抵消。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T10:54:23.577

尝试[节日](http://fest.easytesting.org/)。它通过允许按名称访问 Swing 组件然后与它们交互来简化功能测试 Swing GUI 的过程。

FEST 网站的一个例子：

```
dialog.comboBox("domain").select("Users");
dialog.textBox("username").enterText("alex.ruiz");
dialog.button("ok").click();
dialog.optionPane().requireErrorMessage()
                   .requireMessage("Please enter your password"); 
```

**编辑：**

或者，您要实现的目标应该非常简单，使用 Math.random()、循环、findBomponentAt(int, int) 和 Robot 类。特别是 Robot 类可能有用，因为它具有欺骗鼠标和键盘事件的方法

# php - 没有 CMS 的现有网站管理和内容修改

> ID：10869666
> 
> 赞同：0
> 
> 时间：2012-06-03T10:47:29.160
> 
> 标签：php, backend, administration

我的客户需要轻松编辑和更新网站内容（文本、图像等）的功能。不是使用 FTP 或其他东西，而只是他可以轻松编辑的页面..

我在一年前发现了一些提供这项服务的网站。程序很简单

1) 单击管理员按钮并输入凭据 2) 现在已启用就地编辑功能。

我知道有 javascript 用于就地编辑，但我不需要。我想要一个 MODERATOR 页面，我将（管理员）在其中设置允许他修改的内容。我尝试使用 **PHPMYEDIT** 并且很高兴，但是该程序太老了，有很多东西没有更新。就像 PHPMYEDIT 我需要一个程序或在线服务，它具有现有网站内容编辑/更新/删除/的功能修改我的网站是PHP/MYSQL/JAVASCRIPT/JQUERY等插件。请建议我的问题的解决方案。

最近我想出了一个网站 **http://grabaperch.com/** 完全按照我说的做，但它有点复杂（对于客户）仍然建议任何类似的事情。欢迎提出建议。。

重要 - 页面/内容是静态的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:52:05.113

我之前使用过一项名为 CushyCMS 的服务，并取得了不同程度的成功。它确实需要您向希望客户端能够编辑的 HTML 选择器添加一个类。

它是一种“精简”的 CMS，但并不是真正的 CMS（它只是在后台隐藏了 FTP 事务，并提供了一个简单的所见即所得界面。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:52:23.390

如果您可以将网站转换为 wordpress，那将是最好的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-14T20:16:54.897

如果grapaperch.com 对您来说有点复杂，请查看Uzuvi，[https: //getuzuvi.com](https://getuzuvi.com)

这个非常小的 CMS 也可以像 Perch 一样成为现有网站的插入式编辑器。但 Uzuvi 控制台 UI 具有超简单的设计。

需要说这个CMS没有你提到的主持人功能，可能还没有。

# php - 如何使用 cUrl、ssl 创建目录？

> ID：10869672
> 
> 赞同：4
> 
> 时间：2012-06-03T10:48:25.387
> 
> 标签：php, curl, ftp

我在 php 上创建安全的 FTP 管理器。我有以下内容：

```
curl_setopt(self::$FTP, CURLOPT_URL, "ftp://".$user.":".$pass."@".$host);
curl_setopt(self::$FTP, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt(self::$FTP, CURLOPT_SSL_VERIFYHOST, FALSE);
curl_setopt(self::$FTP, CURLOPT_FTP_SSL, CURLFTPSSL_TRY);
curl_setopt(self::$FTP, CURLOPT_FTPLISTONLY, TRUE);
curl_setopt(self::$FTP, CURLOPT_RETURNTRANSFER, 0);
curl_exec(self::$FTP); 
```

没关系。现在如何创建目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T11:23:24.447

你可以通过：

`CURLOPT_FTP_CREATE_MISSING_DIRS`作为`TRUE`

当 FTP 操作遇到当前不存在的路径时创建丢失的目录。

**您可以在文档中阅读此内容：** [PHP curl_setopt](http://php.net/manual/en/function.curl-setopt.php)

# computational-geometry - 加速段/段交集

> ID：10869676
> 
> 赞同：1
> 
> 时间：2012-06-03T10:49:08.487
> 
> 标签：computational-geometry, intersection, line-segment

假设您在 R^2 中有一组段（称为 S）。每个段都包含在一个尺寸为 WxH 的盒子中（因此，集合 S 有四个额外的段，盒子的每一侧都有一个段）和一个要添加到 S 的段 s。段 s 从点 A 开始（将属于到 S 中的一个线段）并在 B 点结束。我要计算的是点 B'，这样 B'属于 S 中的一个线段，而 AB'不与 S 中的任何其他线段相交。是否有在不使用蛮力算法的情况下计算 B' 的 wat（即，将 AB 与 S 中的每个其他段相交）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:07:33.837

[Ericson的“实时碰撞检测”](http://realtimecollisiondetection.net/books/rtcd/)（[目录](http://realtimecollisiondetection.net/books/rtcd/toc/)）是解决此类问题的绝佳资源。第 7 章空间划分列出了许多适合解决此类问题的方法。

考虑从八叉树、KD-Trees 或空间散列开始。它们都相当容易实现，并且会使问题从 O(n^2) 变为（从内存中）O(n log n)

# jquery - 使用 jquery ui 滑块值动态更新 gRaphael 图

> ID：10869678
> 
> 赞同：2
> 
> 时间：2012-06-03T10:49:26.940
> 
> 标签：jquery, jquery-ui, graph, svg, graphael

新手问题：我正在使用 jquery ui 滑块，我想随着滑块值的变化（计算后）动态更新 gRaphael 图表。

问题1.如何将计算函数返回的值赋给gRaphael条形图的data[]？

编辑：正如建议的那样，我首先关注第一个问题，[http://jsfiddle.net/anubhabB/VrgcC/30/](http://jsfiddle.net/anubhabB/VrgcC/30/)。

我想要实现的是一个基于 update() 的“var sliderVal”动态反应的 gRaphael 条形图。想要实现这样的转换（[http://jsfiddle.net/MVwwq/86/](http://jsfiddle.net/MVwwq/86/)）到幻灯片事件和来自滑块的动态数据！

# symfony - symfony2 可以扩展 2 个模板吗？

> ID：10869682
> 
> 赞同：0
> 
> 时间：2012-06-03T10:49:51.060
> 
> 标签：symfony

我正在考虑在 symfony2 中组织我的基本布局，只包含 3 个块：页眉、内容和页脚。我希望每个块都有一个模板。“内容”模板将是一个空模板，仅显示每个部分的模板，遵循“3 级”指令。但我不知道如何包含页眉和页脚模板。我已经创建了“by pass”模板，例如，内容扩展了页脚，页脚扩展了页眉，页眉扩展了基础，但它看起来很糟糕。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T11:29:21.960

您可以使用嵌入标签，它结合了包含和扩展的行为。它允许您包含另一个模板的内容，就像 include 一样。但它也允许您覆盖在包含的模板中定义的任何块，例如在扩展模板时，但需要 1.8 版

[嵌入标签](http://twig.sensiolabs.org/doc/tags/embed.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T10:58:42.300

你不能**在 Twig 中**扩展一个以上的模板，无论如何这是不合逻辑的。
您应该使用`include`，这有点不同。

常见的方法是拥有一个基本模板，它将被所有其他模板扩展，除了将包含在其中的页眉和页脚。

base.html.twig：

```
...
<body>
    {% include '::header.html.twig' %}
    {% block body %}{% endblock %}
    {% include '::footer.html.twig' %}
</body>
... 
```

在其他模板中，您的包的视图例如：

```
{% extends '::base.html.twig' %}

{% block body %}
Hello world!
{% endblock %} 
```

# c# - 从另一个程序集中托管 TabItem

> ID：10869683
> 
> 赞同：0
> 
> 时间：2012-06-03T10:49:53.257
> 
> 标签：c#, wpf, tabs

我正在尝试创建一个基本上包含选项卡项的用户控件。如下并尝试将其添加到另一个库中的我的选项卡控件中。

```
//Grid.xaml in a.dll

<UserControl x:Name="Grid" x:Class="SomeClass"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <TabItem Header="Grid">
        <DataGrid HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
    </TabItem>

</UserControl>

//TabView.xaml in b.dll
<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Views="clr-namespace:SomeClass;assembly=SomeAssembly" x:Class="SomeClass" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <TabControl HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >

        <Views:GridView/>

        <TabItem Header="This" />
        <TabItem Header="That" />

    </TabControl>
</UserControl> 
```

我的问题是，它实际上在那里创建了选项卡，但没有显示选项卡的标题。我想知道我是否做得对，如何显示标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:16:36.513

您的问题是您在 a.dll 中的控件不是 TabItem。它是用户控件。您可以从 TabItem 继承它（这对 WPF 来说是一种糟糕的方式）或使用组合：

```
//Grid.xaml in a.dll
<UserControl x:Name="Grid" x:Class="SomeClass"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <DataGrid HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>

</UserControl>

//TabView.xaml in b.dll
<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Views="clr-namespace:SomeClass;assembly=SomeAssembly" x:Class="SomeClass" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <TabControl HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >

        <TabItem Header="Grid">
            <Views:GridView/>
        </TabItem>

        <TabItem Header="This" />
        <TabItem Header="That" />

    </TabControl>
</UserControl> 
```

# android - Android - 没有硬件菜单按钮

> ID：10869688
> 
> 赞同：0
> 
> 时间：2012-06-03T10:51:28.747
> 
> 标签：android, tablet

我得出结论，较新的 android 平板电脑不再有硬件菜单按钮。

所以我想知道我是否必须在我自己的（全屏）应用程序中插入一个菜单按钮，或者 android 是否提供包含菜单按钮本身的软件（即使我的应用程序运行全屏）？

（我自己没有要测试的android手机/标签，所以我在这里问）

谢谢，

丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:37:34.420

您应该远离菜单按钮。这是Android应用程序的新风格。请参阅[Android 开发人员的这篇文章，](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)了解删除按钮的原因以及应用程序应该做什么而不是提供菜单按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T14:06:27.213

更改清单文件：您应该将 targetSdkVersion 更改为 <= 10。像这样：

```
<uses-sdk 
    android:minSdkVersion="8" 
    android:targetSdkVersion="9"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:46:49.143

大多数没有菜单硬件按钮的设备都运行在 android 3.0 或更高版本上，您只需添加一个参数为`showAsAction`. 这将在操作栏上显示菜单项。

Concider 阅读 ActionBar 教程

# c - 从单个链接列表中删除特定元素（无法访问列表标题）

> ID：10869690
> 
> 赞同：2
> 
> 时间：2012-06-03T10:51:29.153
> 
> 标签：c, data-structures, linked-list

我需要从给出该元素地址的链表中删除一个元素。像这样

1->2->3->4->5 a1 a2 a3 a4 a5 其中 a1,a2..a5 分别是元素 1,2 ..5 的地址。sum1 只是说 delete(a3) N 因为我无法访问给定列表的标题。我无法遍历整个链表并将地址与询问的地址进行比较。

问题是我如何在没有给出其他信息的情况下从给定列表中删除特定元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:53:54.113

经典面试题。

您不会删除该元素，而是将下一个元素复制到其中：

所以你也是：

*   a3 = a4
*   删除 a4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T10:59:10.787

这只有在您没有收到列表的最后一个值时才有效：

```
void delete(pointerType x)
{
if (x->next == null) return;//this algorithm won't work

//in any other case:
x->value = x->next->value;
pointerType toDelete = x->next;
x->next = x->next->next;
delete toDelete;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:07:28.687

出于以下两个原因：

*   您无权访问 2->next。这意味着您不能简单地删除元素 3。
*   如果您的列表非常长，则将列表视为数组是一个坏主意。

你必须在局部范围内工作。我的文字解决方案是：

1.  将 a4 分配给 a3（所以 2->next 是 a4，新的 a3->next = a5）。
2.  删除旧的a4

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:35:07.167

```
as you don't have header of list you can't traverse list
but you are provided with node to delete
so you can copy next node into it and delete next node

suppose a1 -> to delete
if(a1 && a1->next)
{
   a1=a2;
delete a1;
} 
else if(a1)
{
   delete a1;
}
else
 return NULL; 
```

# php - 从 PHP 文件生成并使用 XSLT 翻译的 XML 获取 PDF 输出

> ID：10869696
> 
> 赞同：3
> 
> 时间：2012-06-03T10:52:17.820
> 
> 标签：php, xml, xslt, pdf, apache-cocoon

我用了几天时间想出了一个生成 PDF 的最佳实践，最终用户可以为自己自定义布局。PDF 输出需要保存在服务器上或发送回 PHP 文件，以便 PHP 文件可以保存它，并且 PHP 文件需要知道一切正常。

我认为最好的方法是使用 XML、XSLT 和 Apache Cocoon。但我不确定这是否可能，或者这是一个好主意，因为我找不到任何类似的人的信息。这不可能是一个不常见的问题。

当我读到 Cocoon 通过 XSLT 将 XML 转换为 PDF 时，这个想法就产生了：

[http://cocoon.apache.org/2.1/howto/howto-html-pdf-publishing.html](http://cocoon.apache.org/2.1/howto/howto-html-pdf-publishing.html)

并能够接受变量：

[http://old.nabble.com/how-to-access-post-parameters-from-sitemap-td31478752.html](http://old.nabble.com/how-to-access-post-parameters-from-sitemap-td31478752.html)

这就是我的想法：

1.  用户调用 php 文件，该 php 文件生成具有特定名称的源 XML 文件
2.  然后，php 文件向 Cocoon（在同一 Web 服务器上）发出请求，以在 XML 文件上应用用户定义的 XSLT。这里需要一个参数来知道要应用哪个 XSLT。
3.  该请求由 PHP 文件处理，然后在服务器上保存为 PDF，以后可以邮寄出去。

这会起作用吗？有没有更好的方法来处理这个？

核心问题是用户需要能够自己自定义 PDF 的布局，而我需要服务器保存 PDF 并稍后发送。用户将使用它进行订单确认、发票等。我不想为每个用户硬编码布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:02:12.620

我使用 webkithtml2pdf 来生成我的 PDF:s。只需像往常一样使用 HTML 和 CSS 创建一个用于打印的文档，然后通过转换器运行它。

它非常适合生成发票等内容。您可以将 SVG 用于徽标和插图，它们在打印时看起来很棒，因为它们是基于矢量的。即使是带有虚线轮廓的圆角也可以完美地工作。

一个小问题是输入的 html 必须有 th htm 或 html 文件名后缀，因此您不能使用默认的 tempfile 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:31:33.827

[过去通过设置JasperReports Server并使用](http://www.jaspersoft.com/reporting-server)[iReport Designer](http://www.jaspersoft.com/ireport-designer)创建报告，我取得了一些不错的成绩。它们都在 F/OSS（“社区”）版本中可用，但如果您需要这些东西，您可以支付支持和增值费用。

这对我们来说是一个很好的解决方案，因为我们可以通过 Java 系统的 Java API 和 PHP 系统的 SOAP 访问它。GUI 设计器也使非技术业务人员非常容易调整报告。

# url-rewriting - Asp .Net framework 3.5 Sitemap.CurrentNode在使用带参数的URL重写时返回null

> ID：10869698
> 
> 赞同：1
> 
> 时间：2012-06-03T10:52:20.963
> 
> 标签：url-rewriting, null, url-parameters

我正在使用 Asp .Net 框架 3.5、SiteMap 和带有 Global.asax 的 URL 重写。一切正常，除非我在 URL 中传递参数（例如 MySite/Products/Some-Spesific-TV）

SiteMap 是这样构建的：

```
< siteMapNode url="Product" title=""  description="" resourceKey="1011"/> 
```

并且 URL 重写是这样构建的（在 Global.asax 文件中）：

```
routes.Add("Product" + "/{ProductID}", new Route("Product"+ "/{ProductID}", new CustomRouteHandler("~/" + "Product" + ".aspx"))); 
```

尝试在“Product/SomeValue”上使用 Sitemap.CurrentNode 时，它​​返回 null

我能做些什么？

# macos - 将 Crypto++ 与 clang 一起使用

> ID：10869706
> 
> 赞同：3
> 
> 时间：2012-06-03T10:53:10.717
> 
> 标签：macos, crypto++, undefined-symbol, clang++, missing-symbols

我正在尝试使用 clang++ 在 iMac 上获取以下 Crypto++（密码方案的 C++ 类库）示例。

例子

```
SHA256 hash;

byte digest[ SHA256::DIGESTSIZE ];

hash.CalculateDigest( digest, (byte*) &value[ 0 ], value.size( ) );

HexEncoder encoder;

string result = String::empty;

encoder.Attach( new StringSink( result ) );

encoder.Put( digest, sizeof( digest ) );

encoder.MessageEnd( ); 
```

构建命令

```
Apple clang version 2.1 (tags/Apple/clang-163.7.1) (based on LLVM 3.0svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix
 "/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.7.4 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name checksum_impl.cpp -pic-level 2 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 123.2.1 -v -resource-dir /usr/bin/../lib/clang/2.1 -D framework_EXPORTS -I /Users/Ben/Dropbox/appon/build/../source -nostdinc++ -cxx-isystem /usr/include/c++/v1 -Wall -Wextra -Weffc++ -pedantic -std=c++0x -fdeprecated-macro -ferror-limit 19 -fmessage-length 175 -stack-protector 1 -fblocks -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o CMakeFiles/framework.dir/Users/Ben/Dropbox/source/example.cpp.o -x c++ /Users/Ben/Dropbox/source/example.cpp
clang -cc1 version 2.1 based upon llvm 3.0svn hosted on x86_64-apple-darwin11.4.0
#include "..." search starts here:
#include <...> search starts here:
 /Users/Ben/Dropbox/build/../source
 /usr/include/c++/v1
 /usr/local/include
 /usr/bin/../lib/clang/2.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list. 
```

链接器输出

```
clang: warning: argument unused during compilation: '-std=c++0x'
Undefined symbols for architecture x86_64:
  "CryptoPP::Filter::TransferTo2(CryptoPP::BufferedTransformation&, unsigned long long&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool)", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
      vtable for CryptoPP::Unflushable<CryptoPP::Filter> in checksum_impl.cpp.o
  "CryptoPP::Filter::CopyRangeTo2(CryptoPP::BufferedTransformation&, unsigned long long&, unsigned long long, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool) const", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
      vtable for CryptoPP::Unflushable<CryptoPP::Filter> in checksum_impl.cpp.o
  "CryptoPP::BufferedTransformation::ChannelCreatePutSpace(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, unsigned long&)", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
      vtable for CryptoPP::Unflushable<CryptoPP::Filter> in checksum_impl.cpp.o
  "CryptoPP::BufferedTransformation::ChannelPut2(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, unsigned char const*, unsigned long, int, bool)", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
      vtable for CryptoPP::Unflushable<CryptoPP::Filter> in checksum_impl.cpp.o
  "CryptoPP::BufferedTransformation::ChannelPutModifiable2(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, unsigned char*, unsigned long, int, bool)", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
      vtable for CryptoPP::Unflushable<CryptoPP::Filter> in checksum_impl.cpp.o
  "CryptoPP::BufferedTransformation::ChannelFlush(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool, int, bool)", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
  "CryptoPP::BufferedTransformation::ChannelMessageSeriesEnd(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, bool)", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
      vtable for CryptoPP::Unflushable<CryptoPP::Filter> in checksum_impl.cpp.o
  "CryptoPP::BufferedTransformation::SetRetrievalChannel(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      vtable for CryptoPP::SimpleProxyFilter in checksum_impl.cpp.o
      vtable for CryptoPP::Bufferless<CryptoPP::Filter> in checksum_impl.cpp.o
      vtable for CryptoPP::Unflushable<CryptoPP::Filter> in checksum_impl.cpp.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 2 
```

我正在使用 Crypto++ 5.6.2 的最新开发版本，因为以前的版本 5.6.1 无法使用 clang++ 构建。但是我遇到了构建问题，指出我缺少 x86_64 架构的符号。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-04T17:18:08.663

Crypto++ 5.6.2 在 LLVM 版本 6.1.0 (clang-602.0.53) 上成功构建，带有 make 选项：

```
CXXFLAGS="-std=c++11 -stdlib=libstdc++ -DCRYPTOPP_DISABLE_ASM -Wno-c++11-narrowing" 
```

因此这个脚本：[https ://github.com/mapnik/mapnik-packaging/blob/master/osx/scripts/build_cryptopp.sh](https://github.com/mapnik/mapnik-packaging/blob/master/osx/scripts/build_cryptopp.sh)

-stdlib=libstdc++ 自 Mavericks 以来需要 MacOSX，请参阅：[何时需要使用 -stdlib=libstdc++ 标志？](https://stackoverflow.com/questions/19774778/when-is-it-necessary-to-use-use-the-flag-stdlib-libstdc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T20:12:52.587

您需要链接到提供这些符号的库，应该是 libcryptopp.so，`-lcryptopp`在编译器命令中使用

查看您的“构建命令”（这不是您正在运行的命令，它是您正在运行的命令的*输出*，如果您显示实际命令会更容易阅读）似乎您正在编译`.cpp`将文件写入`.o`文件，但出现链接器错误，这很奇怪，因为生成`.o`文件通常是链接*之前*的步骤。你想做什么步骤？也许您还需要添加`-c`，以便它只编译而不尝试链接。链接时仍然需要`-lcryptopp`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-27T04:02:00.407

除了乔纳森的回答，因为这是一个相当普遍的问题*，当* `-lcryptopp`被指定时......

> 架构 x86_64 的未定义符号。`CryptoPP::Filter::TransferTo2(CryptoPP::BufferedTransformation&, unsigned long long&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool)"`...

表示您正在使用`__1`LLVM C++ 运行时 ( `libc++`)。在某个地方，您可能正在与 GNU C++ 运行时 ( `libstdc++`) 混合和匹配。GNU C++ 运行时 ( `libstdc++`) 缺少`__1`其符号的修饰。

您应该浏览项目***和***所有预构建的库，并确保它们使用其中一个。对于每个，您应该使用`CXXFLAGS`(1) `-stdlib=libc++`(LLVM) 或 (2) `-stdlib=libstdc++`(GNU)。

请注意，像 Xcode 这样的 IDE 可能使用`-stdlib=...`与 Crypto++ 不同的设置。在这种情况下，让 Xcode 匹配 Crypto++，或者重建 Crypto++ 库以匹配 Xcode。

如果 Xcode 正在使用 LLVM`libc++`并且您必须重新构建 Crypto++，则打开`GNUmakefile`并重新处理此部分（大约第 90 行）：

```
ifeq ($(UNAME),Darwin)
  AR = libtool
  ARFLAGS = -static -o
  CXX = c++
  IS_GCC2 = $(shell $(CXX) -v 2>&1 | $(EGREP) -c gcc-932)
ifeq ($(IS_GCC2),1)
    CXXFLAGS += -fno-coalesce-templates -fno-coalesce-static-vtables
    LDLIBS += -lstdc++
    LDFLAGS += -flat_namespace -undefined suppress -m
endif
endif 
```

如果你想使用 LLVM 的`libc++`，那么删除：

```
# GNU C++ Runtime
LDLIBS += -lstdc++ 
```

并添加：

```
# LLVM C++ Runtime
CXXFLAGS += -stdlib=libc++ 
```

为了完整起见，如果您想使用 GNU 的运行时，请删除`LDLIBS += -lstdc++`并添加`CXXFLAGS += -stdlib=libstdc++`.

*如果*未在环境或命令行中指定，您也可以更改`CXX = c++`为`CXX ?= c++`makefile 将使用它。`c++`

 ** * *

如果感兴趣，这`__1`是一个用于版本控制的内联命名空间。请参阅[什么是内联命名空间？](https://stackoverflow.com/q/11016220)[使用 LLVM 的 libc++ 时，__1 符号从何而来](https://stackoverflow.com/q/29293394)？.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T15:22:07.390

这个问题与 Crypto++ 没有被移植到 llvm-clang++ 有关。有关支持的编译器，请参见[此处。](http://www.cryptopp.com/wiki/Compiling)

我的解决方案是使用[GCrypt](http://www.gnu.org/software/libgcrypt/)。

抱歉，我无法提供有关失败原因的更多详细信息。*

# php - 父域名服务器

> ID：10869707
> 
> 赞同：5
> 
> 时间：2012-06-03T10:53:12.647
> 
> 标签：php, dns, nameservers

我一直在尝试找出如何检测与域名相关联的父名称服务器。例如，当您使用[intoDNS](http://www.intodns.com/stackoverflow.com)搜索域名时，它会显示“普通”和父名称服务器的结果。他们提到了父名称服务器是什么，如下所示：

> **k.gtld-servers.net**很友好地向我们提供了这些信息。

但是他们怎么知道他们必须查询这个特定的名称服务器？父名称服务器的一些示例：

```
stackoverflow.com   k.gtld-servers.net
google.com          c.gtld-servers.net
ycombinator.com     a.gtld-servers.net
asp.net             g.gtld-servers.net
google.nl           sns-pb.isc.org
google.de           z.nic.de 
```

似乎所有*通用 TLD*都可以在`gtld-servers.net`.

现在，我在 PHP 中找到了这样的“普通”名称服务器：

```
$nameservers = dns_get_record($domain_name, DNS_NS); 
```

所以，我想知道，如何找出特定域的父名称服务器是什么，以及如何使用 PHP 进行查询？

* * *

### 更新

我发现 UNIX 的`nslookup`工具接受服务器参数。如果它留空，则返回与 PHPs 相同的结果，但如果它是[http://www.iana.org/domains/root/db](http://www.iana.org/domains/root/db)`dns_get_record`上指定的顶级域的根服务器之一，它将返回与 intoDNS 列表相同的结果作为父服务器的结果。

剩下的唯一问题是如何查询这个特定的服务器，因为我非常不喜欢直接`exec()`调用`nslookup`。有谁知道`dns_get_record`允许您指定服务器的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:23:49.857

我已经找到了怎么做。我不得不为此使用[NET_DNS2](http://code.google.com/p/netdns2/) PEAR 包，因为它允许您指定要使用的 DNS 服务器。如果我指定提到的文件 nickc 中列出的服务器之一：

[http://www.iana.org/domains/root/db](http://www.iana.org/domains/root/db)

（您必须为要查询的顶级域使用其中一台服务器，无论哪一台都没有关系）

```
require 'Net/DNS2.php';

$server = gethostbyname('j.gtld-servers.net'); // 192.48.79.30

$r = new Net_DNS2_Resolver(array('nameservers' => array($server)));
$result = $r->query('stackoverflow.com', 'NS');

print_r ($result); 
```

这将打印：

```
...
    [authority] => Array
        (
            [0] => Net_DNS2_RR_NS Object
                (
                    [nsdname] => ns1.webfaction.com
                    [name] => webassay.com
                    [type] => NS
                    [class] => IN
                    [ttl] => 172800
                    [rdlength] => 17
                    [rdata] => ns1webfaction�
                )

            [1] => Net_DNS2_RR_NS Object
                (
                    [nsdname] => ns2.webfaction.com
                    [name] => webassay.com
                    [type] => NS
                    [class] => IN
                    [ttl] => 172800
                    [rdlength] => 6
                    [rdata] => ns2�.
                )

            [2] => Net_DNS2_RR_NS Object
                (
                    [nsdname] => ns3.webfaction.com
                    [name] => webassay.com
                    [type] => NS
                    [class] => IN
                    [ttl] => 172800
                    [rdlength] => 6
                    [rdata] => ns3�.
                )

        )
... 
```

这与在 intoDNS 上的父服务器返回的名称服务器匹配：http: [//www.intodns.com/stackoverflow.com](http://www.intodns.com/stackoverflow.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:04:59.363

特定域的名称服务器是在区域文件中指定为“NS”记录的名称服务器。您列出的主机/服务器是维护相关域的特定 TLD 信息的全局/根服务器。

如果你想知道这些是什么，你可以看这里：[http ://www.iana.org/domains/root/db](http://www.iana.org/domains/root/db)

# javascript - 如何根据他们的浏览器将我的客户重定向到不同的页面？

> ID：10869708
> 
> 赞同：-2
> 
> 时间：2012-06-03T10:53:32.310
> 
> 标签：javascript, html, redirect, browser

我在网上找到了一些 HTML 代码来帮助我做到这一点，但是当我在 Firefox 或 Internet Explorer 上尝试时它不起作用。我能得到一些帮助来尝试实现这一目标吗？

这是我找到的代码

```
 <script language="JavaScript" type="text/JavaScript">
    if(navigator.appName == "Mozilla")
    {
     window.location = "ff/index.html"
    }
     if(navigator.appName == "Microsoft Internet Explorer")
    {
     window.location = "ie/index.html"
    }
     if(navigator.appName == "Google Chrome")
    {
     window.location = "ch/index.html"
    }
     if(navigator.appName == "Safari")
    {
     window.location = "sa/index.html"
    }
     if(navigator.appName == "Google Chrome")
    {
     window.location = "ch/index.html"
    }
     window.location == "un/index.html"
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:46:31.817

试试这个代码 -

```
<script language="JavaScript" type="text/JavaScript">
    if(navigator.appCodeName == "Mozilla")
    {
     window.location.href = "ff/index.html"
    }
     if(navigator.appCodeName == "Microsoft Internet Explorer")
    {
     window.location.href = "ie/index.html"
    }
     if(navigator.appCodeName == "Google Chrome")
    {
     window.location.href = "ch/index.html"
    }
     if(navigator.appCodeName == "Safari")
    {
     window.location.href = "sa/index.html"
    }
     if(navigator.appCodeName == "Google Chrome")
    {
     window.location.href = "ch/index.html"
    }
     window.location.href = "un/index.html"
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:02:09.160

试图在 JavaScript 中确定浏览器总是很棘手，而且从不可靠。在您的情况下，它不起作用，因为`navigator.appName`在 Firefox（至少版本 12.0）中返回`"Netscape"`...。

更可靠的是使用`navigator.userAgent`which 返回：`""Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0""`在我的电脑上。

更好的是，请查看[`$.browser`](http://api.jquery.com/jQuery.browser/)-出于某种原因已弃用，请参见上文。

这给我们带来了一个问题：你为什么需要这个？现代 Web 应用程序应该发现浏览器功能，而不是依赖于实际的浏览器。

PS：你粘贴的代码真的很冗长，这个等效的片段呢？

```
var redirects = {
    "Mozilla": "ff",
    "Microsoft Internet Explorer": "ie",
    "Google Chrome": "ch",
    "Safari": "sa",
    "Google Chrome": "ch"
};

window.location = (redirects[navigator.appName] || "un") + "/index.html"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:02:38.187

我最喜欢的脚本是这个 - [http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)大多数现代库都内置了浏览器检测（例如 jQuery[浏览器](http://jqapi.com/#p=jQuery.browser)对象）

但是，强烈建议使用特征检测而不是浏览器检测。看看[Modernizr](http://modernizr.com/)库作为我正在谈论的一个很好的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-06T02:33:16.797

由于**上述脚本在足够的情况下都不起作用，包括重定向到“Firefox 37.x”（！！）这样基本的脚本**——最糟糕的是“谷歌浏览器”（非常顽固）——现在：唯一的“老派” *我发现**工作**的方法：

[http://www.javascripter.net/faq/browsern.htm](http://www.javascripter.net/faq/browsern.htm)

下面：我修改的（快速/脏的/欢迎您清理它）“版本”，因为我们在这里想要的是**重定向**，而不是显示浏览器代码名称等。

*   注意：作者 KWOWS，关于整个方法的缺陷 - 并警告。

我假设任何读过这篇文章的人都明白对象检测/浏览器功能检测现在（2015 年 9 月）被推广为一种更好的方法——除了......这个：

首先，它也不是 100% 可靠的；而且，最重要的是，人们可能想要一种更简单或更快的方法，特别是当需要修改现有网站（尽可能少）时，而不是必须重新编码几乎所有内容，切换到 CSS 等等，因为.. .年龄！

测试使用：[http ://www.w3schools.com/html/tryit.asp?filename=tryhtml_default](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_default)

*（[http://stackoverflow.com](http://stackoverflow.com)作为测试重定向 URL 似乎不起作用，在那个 W3schools 页面上，谷歌也没有，而个人网站 URL 工作）*

 .  

```
<!DOCTYPE html><html><head>
<script language="JavaScript" type="text/JavaScript">

var nVer = navigator.appVersion;
var nAgt = navigator.userAgent;
var browserName  = navigator.appName;
var fullVersion  = ''+parseFloat(navigator.appVersion); 
var majorVersion = parseInt(navigator.appVersion,10);
var nameOffset,verOffset,ix;

// In Opera 15+, the true version is after "OPR/" 
if ((verOffset=nAgt.indexOf("OPR/"))!=-1) {
 browserName = "Opera";
 fullVersion = nAgt.substring(verOffset+4);
}
// In older Opera, the true version is after "Opera" or after "Version"
else if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
 browserName = "Opera";
 fullVersion = nAgt.substring(verOffset+6);
 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
   fullVersion = nAgt.substring(verOffset+8);
}
// In MSIE, the true version is after "MSIE" in userAgent
else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
 browserName = "Microsoft Internet Explorer";
 fullVersion = nAgt.substring(verOffset+5)
window.location.href = "http://stackoverflow.com"
}
// In Chrome, the true version is after "Chrome" 
else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
 browserName = "Chrome";
 fullVersion = nAgt.substring(verOffset+7)
window.location.href = "http://www.w3schools.com"
}
// In Safari, the true version is after "Safari" or after "Version" 
else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
 browserName = "Safari";
 fullVersion = nAgt.substring(verOffset+7);
 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
   fullVersion = nAgt.substring(verOffset+8);
}
// In Firefox, the true version is after "Firefox" 
else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
 browserName = "Firefox";
 fullVersion = nAgt.substring(verOffset+8)
window.location.href = "http://stackoverflow.com"
}
// In most other browsers, "name/version" is at the end of userAgent 
else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < 
          (verOffset=nAgt.lastIndexOf('/')) ) 
{
 browserName = nAgt.substring(nameOffset,verOffset);
 fullVersion = nAgt.substring(verOffset+1);
 if (browserName.toLowerCase()==browserName.toUpperCase()) {
  browserName = navigator.appName;
 }
}
// trim the fullVersion string at semicolon/space if present
if ((ix=fullVersion.indexOf(";"))!=-1)
   fullVersion=fullVersion.substring(0,ix);
if ((ix=fullVersion.indexOf(" "))!=-1)
   fullVersion=fullVersion.substring(0,ix);

majorVersion = parseInt(''+fullVersion,10);
if (isNaN(majorVersion)) {
 fullVersion  = ''+parseFloat(navigator.appVersion); 
 majorVersion = parseInt(navigator.appVersion,10);
}

</script></head><body> 
```

# php - JSON_decode 二维对象数组？

> ID：10869711
> 
> 赞同：1
> 
> 时间：2012-06-03T10:54:01.093
> 
> 标签：php, javascript, ajax, post

我有一个二维对象数组，如下所示：

```
function test(n){
  this.id = n;
}

var testArray= new Array(2);
for(i = 0; i < testArray.length; i++){
  testArray[i] = new Array(2);
  for(j = 0; j < testArray[i].length; j++){
    testArray[i][j] = new test((2*i)+j);
  }
} 
```

然后我将其字符串化以使用 AJAX 发布，如下所示：

```
var data = {testA: {testB: testArray[0], testC: testArray[1]}}
var text = JSON.stringify(data); 
```

一旦我执行 jquery AJAX 调用：

```
$.post("test.php",text,function(data){
  alert(data);
}); 
```

我无法弄清楚如何在 PHP 端解码和使用这个对象，到目前为止我已经尝试过这样的事情：

```
<?php 

$data = json_decode($_POST);
if($data == null){
    echo "fail";
} else {
    echo $data; 
} 

?> 
```

但我得到一个错误，说它需要一个字符串，我正在向它传递一个数组。我也尝试过类似的东西

```
$data = json_decode($_POST['testA']); 
```

然后错误不会出现，而是总是输出“失败”。

有谁知道我需要在 PHP 端做什么才能访问数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:59:14.263

你为什么要在上面运行 stringify ？如果你只是这样发送：

```
$.post("test.php", data, function(data) { 
```

您应该能够像这样检索它：

```
$data = $_POST['testA']; 
```

# xaml - 如何在行和列中显示数据 XAML windows 8

> ID：10869715
> 
> 赞同：5
> 
> 时间：2012-06-03T10:54:29.177
> 
> 标签：xaml, windows-8

在 Metro 风格的 Windows 8 应用程序中，我如何使用类似于此 (https://dl.dropbox.com/u/59251888/img.png) 图像的 xaml 显示数据。是否可以使用 ListBox、ListView、GrdView ..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:54:09.157

是的，但是您需要对其进行样式设置，使其看起来像一个数据网格。（假设您正在根据您分配给此问题的标签在 XAML 中进行开发）。诀窍是制作一个数据模板，该模板使用具有适当宽度、对齐方式等列的 Grid。

我做过类似的事情——使用 ListView。这可以修改为仅显示单元格而不是行的背景 - 我已经这样做了。希望这可以帮助：

![ListView 模拟数据网格/表格的外观](../Images/a7cecae5797662b695be3e17c04aa7cb.png)

XAML：

```
 <ListView 
      VerticalAlignment="Top"
      Margin="0,5"
      ItemsSource="{Binding HighestExpensesAlternatingList}"
      ItemTemplate="{StaticResource HighestExpensesTemplate}"
      BorderBrush="#19FFFFFF" BorderThickness="1,0,0,0" 
      SelectionMode="None" IsItemClickEnabled="False"
      ScrollViewer.VerticalScrollBarVisibility="Hidden"
      ScrollViewer.HorizontalScrollBarVisibility="Hidden"
      ItemContainerStyle="{StaticResource SimpleListViewItemStyle}"
      IsHitTestVisible="False"/>

    <DataTemplate x:Key="HighestExpensesTemplate">
        <Grid Width="500" VerticalAlignment="Center" Margin="5,0"
              Background="{Binding AlternatingIndexBrush}">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="150" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Margin="5" TextWrapping="NoWrap" 
                       Style="{StaticResource BasicTextStyle}" 
                       VerticalAlignment="Center"
                       Text="{Binding Item.DateString}" />

            <TextBlock Grid.Column="1" Margin="5" TextWrapping="NoWrap" 
                       Style="{StaticResource BasicTextStyle}" 
                       VerticalAlignment="Center"
                       Text="{Binding Item.Description}" />

            <TextBlock Grid.Column="2" Margin="5" TextWrapping="NoWrap"
                       Style="{StaticResource BasicTextStyle}" 
                       VerticalAlignment="Center"
                       Text="{Binding Item.AmountStringCurrencyFormat}"
                       HorizontalAlignment="Right"/>

        </Grid>
    </DataTemplate>

<Style x:Key="SimpleListViewItemStyle" TargetType="ListViewItem">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="TabNavigation" Value="Local"/>
    <Setter Property="IsHoldingEnabled" Value="False"/>
    <Setter Property="IsDoubleTapEnabled" Value="False"/>
    <Setter Property="IsRightTapEnabled" Value="False" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListViewItem">
                <Border BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" 
                            Background="{TemplateBinding Background}" 
                            Margin="{TemplateBinding Margin}">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <PointerDownThemeAnimation TargetName="Container"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>

                    <Grid x:Name="Container">
                        <ContentPresenter x:Name="contentPresenter" 
                                              ContentTemplate="{TemplateBinding ContentTemplate}" 
                                              ContentTransitions="{TemplateBinding ContentTransitions}" 
                                              Content="{TemplateBinding Content}" 
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                              Margin="{TemplateBinding Padding}" 
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# prolog - 组成列表列表

> ID：10869718
> 
> 赞同：0
> 
> 时间：2012-06-03T10:55:32.147
> 
> 标签：prolog

我不想按“a”在终端上查看所有结果，而是将它们存储在列表列表中（[[]]）。如何使用新创建的函数 bar 来做到这一点？

我有一个功能；

```
foo(X, Y).
    ^  ^
    ^  returns a list ex [1,2,3,4]
    ^
    input 
```

我做了什么 ：

```
 bar(A,B) :- foo(X,Y), B is [Y|B], bar(A,B) . 
```

但是上面的代码是行不通的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:36:32.647

```
bar(A,B) :- foo(X,Y), B is [Y|B], bar(A,B) .
                        ^     ^   ^ 
```

有3个问题：

1.  **is**计算算术，**=**必须使用
2.  但随后`B = [Y|B]`会创建一个循环结构，SWI-Prolog 可以处理它，但我认为这是你的意图
3.  `bar(A,B)`它*完全*等于规则的头。这不一定是错误，因为实例化的变量实际上可以改变执行流程，但我看不出你为什么在这里使用。

findall/3 应该可以解决您的问题：

```
bar(A,B) :- findall(Y, (X=A, foo(X,Y)), B). 
```

我已经设置了`X=A`，否则`A`没用。一种更简洁的表达方式是

```
bar(A,B) :- findall(Y, foo(A,Y), B). 
```

# jquery - twitter 引导选项卡：加载链接

> ID：10869721
> 
> 赞同：2
> 
> 时间：2012-06-03T10:55:55.203
> 
> 标签：jquery, twitter, tabs, twitter-bootstrap

现在形成我在 twitter bootstrap 选项卡的纪录片中看到的`a href`内容，指向带有选项卡内容的特定 ID，像这样

```
<ul class="nav nav-tabs" id="myTab">
        <li class="active"><a href="#info">Information</a>
        </li>
        <li ><a href="#friends">Friends</a>
        </li>
</ul> 
```

但是如果我想在选项卡中加载一个链接，像这样，我怎么能用 jquery 做到这一点？

```
<ul class="nav nav-tabs" id="myTab">
        <li class="active"><a href="http://www.mysite.com/info">Information</a>
        </li>
        <li ><a href="http://www.mysite.com/friends">Friends</a>
        </li>
</ul> 
```

我也在这里使用了搜索，但没有幸运地找到我需要的东西......也许如果有人有适当的链接，我会很感激它回答我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:50:21.150

如果您计划加载特定链接并且没有在站点中嵌入完整内容，只需在服务器端执行此操作并通过将类设置为活动来生成每个选项卡的适当 html。剩下的只是css

看看这个：[https ://github.com/twitter/bootstrap/issues/814](https://github.com/twitter/bootstrap/issues/814)

如果您打算将标签转到另一个站点（不是服务器），那么我会让服务器生成一个无缝的 iframe 引用该站点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T07:05:12.157

对于将外部链接的内容延迟加载到选项卡中，单击选项卡时，请使用我的插件。

[https://github.com/mesuttalebi/MT.BootstrapTabsLazyloader.js](https://github.com/mesuttalebi/MT.BootstrapTabsLazyloader.js)

[https://www.nuget.org/packages/MT.BootstrapTabsLazyLoader.js/](https://www.nuget.org/packages/MT.BootstrapTabsLazyLoader.js/)

该软件包为引导选项卡添加了延迟加载选项，因此每个选项卡的内容都会在用户单击时加载。

1- 在 jquery.js 和 bootstrap.js 之后，将 /Scripts/MT.BootstrapTabsLazyLoader.js 的引用添加到代码的脚本部分

2-将类 .lazyload 添加到导航选项卡（引导选项卡 ul 标记）

3-将 data-url 添加到要延迟加载的每个选项卡的锚标记中。此属性将包含您要将其加载到选项卡中的部分页面的 url。例子

```
<!-- Nav tabs -->
<ul class="nav nav-tabs lazyload">
    <li class="active"><a href="#fullDesc" data-toggle="tab">Description</a></li>
    <li><a href="#specificationDetails" data-toggle="tab">Specifications</a></li>
    <li><a href="#relatedProducts" data-toggle="tab" data-url="@Url.Action("relatedproducts", new { model.product.id})">Related Products</a></li>
    <li><a href="#files" data-toggle="tab" data-url="@Url.Action("getproductfiles", new { model.product.id })">Product Files</a></li>
    <li><a href="#videos" data-toggle="tab" data-url="@Url.Action("getproductvideos", new { model.product.id })">Product Videos</a></li>
</ul> 
```

**更新：此包已更新，使用当前链接：**

[https://github.com/mesuttalebi/MT.BootstrapLazyloader.js](https://github.com/mesuttalebi/MT.BootstrapLazyloader.js)

[https://www.nuget.org/packages/MT.BootstrapLazyLoader.js/](https://www.nuget.org/packages/MT.BootstrapLazyLoader.js/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:49:48.747

您可能对我的示例感兴趣，关于如何将外部源中的内容“延迟加载”到 Twitter Boostrap 选项卡中。

小提琴在这里：http: [//jsfiddle.net/technotarek/YbT7r/](http://jsfiddle.net/technotarek/YbT7r/)

代码如下所示：

```
$('#myTabs').bind('show', function(e) {  
    paneID = $(e.target).attr('href');
    src = $(paneID).attr('data-src');
    // if the iframe hasn't already been loaded once
    if($(paneID+" iframe").attr("src")=="")
    {
        $(paneID+" iframe").attr("src",src);
    }
}); 
```

# java - 根据外部 DTD 验证 xml 文档

> ID：10869723
> 
> 赞同：0
> 
> 时间：2012-06-03T10:56:03.807
> 
> 标签：java, xml, sax, dtd, saxparser

我需要针对存储在我的 jar 中的 DTD 验证外部 XML 文档。但问题是，这个文件可能没有`<!DOCTYPE`声明。所以，我不能只设置实体解析器。

我正在使用 SAXParserFactory，因为这个文档可能非常大。我已经想出了如何使用 XSD 来做到这一点——我只需创建一个新模式，然后将其设置为 SAXParserFactory。但是这种方法不适用于 DTD。

但我绝对需要使用 DTD，而不是 XSD。因为 DTD 非常复杂，将其转换为 XSD 并非易事。

那么，有没有办法呢？

# asp.net-mvc - 使用 Json.Net 返回多个对象

> ID：10869724
> 
> 赞同：0
> 
> 时间：2012-06-03T10:56:17.083
> 
> 标签：asp.net-mvc, json, json.net

使用内置的 json 转换器，我在我的操作中返回多个对象，如下所示：

```
return Json(new { success = true, data = units }); 
```

当我使用 JSON.NET 库时，我该怎么做？

这显然不能编译：

```
return new { success = true, data = JsonConvert.SerializeObject(units) }; 
```

我不想为此创建一个包含这两个属性的额外视图模型。

我可能对默认的 Json javascript 序列化程序有错误的理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:16:44.437

在您的第二个示例中，`JsonConvert.SerializeObject(units)`将导致返回给 JavaScript 的字符串。JavaScript 不会被`data`视为包含一些“真实”数据，而是一个简单的字符串，内部带有花括号。

像往常一样使用你的第一句话。MVC 的`Json`方法将序列化其中的对象。

例如：

```
class Units
{
    public int Width { get; set; }
    public int Height { get; set; }
} 
```

...

```
Units u = new Units { Width = 34, Height = 20 };

return Json(new { success = true, data = units }); 
```

将产生一个类似于此的 Json：

```
{ "success" : "true", "data" : { "Height" : "20", "Width" : "34" } } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:39:21.587

如果您想使用 Newtonsoft.Json 序列化您的对象，您可以创建一个新的 ActionResult 类并在结果中传递数据。

例如：

```
public class NewtonsoftJsonResult : ContentResult
{
    private readonly object _data;

    public NewtonsoftJsonResult(object data)
    {
        _data = data;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        Content = JsonConvert.SerializeObject(_data);
        ContentType = "application/json";

        base.ExecuteResult(context);
    }
} 
```

只需将您的自定义 ActionResult 与匿名对象作为数据返回：

```
public ActionResult Index()
{
    return new NewtonsoftJsonResult(new { success = true, data = units});
} 
```

# .net - VS 2012 RC 中引用 TPL 数据流和 TPL 的问题

> ID：10869730
> 
> 赞同：16
> 
> 时间：2012-06-03T10:57:17.537
> 
> 标签：.net, task-parallel-library, nuget, visual-studio-2012, tpl-dataflow

我刚刚将 Visual Studio 11 Beta 升级到新的 Visual Studio 2012 RC，并且在引用 TPL 数据流时遇到了问题。

首先，我尝试像以前一样通过从框架中添加引用来引用 Dataflow。但是当我尝试这样做时，我得到一个错误框：

> 无法添加对“System.Threading.Tasks.Dataflow”的引用。

然后整个 Visual Studio 冻结。

在阅读[了 MEF 和 TPL Dataflow NuGet Packages for .NET Framework 4.5 RC](http://blogs.msdn.com/b/bclteam/archive/2012/05/30/mef-and-tpl-dataflow-nuget-packages-for-net-framework-4-5-rc.aspx)之后，我认为参考列表中显示的 Dataflow 版本是以前安装的某种工件。所以，我尝试使用来自 NuGet 的 Dataflow，这似乎可以工作，直到我真正尝试编译我的代码，因为我收到了一个错误：

> “System.Threading.Tasks.Task”类型是在未引用的程序集中定义的。您必须添加对程序集“System.Threading.Tasks, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。

这很令人困惑，因为`Task`在 mscorlib 中，不需要其他引用。但是在引用列表中有一个引用程序集`System.Threading.Tasks`，所以我尝试添加它。不幸的是，出现了一个熟悉的错误：

> 无法添加对“System.Threading.Tasks”的引用。

然后 Visual Studio 再次冻结。

难道我做错了什么？如何在 VS 2012 RC 中使用 TPL 数据流？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-05T15:37:35.470

尝试`System.Threading.Tasks.dll`从`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETCore\v4.5`. 或者，您可以使用`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades`目录。

**更新**：在阅读了有关删除对的引用[的答案](https://stackoverflow.com/a/10938168/315935)`System.Runtime`后，我进一步检查了该问题，我可以添加以下内容：`System.Runtime`由于 NuGet 包的当前版本中的错误，将添加对的引用`Microsoft.Tpl.Dataflow.4.5.1-rc`。如果`System.Threading.Tasks.Dataflow.dll`直接在 Visual Studio 中添加对相同的`System.Runtime`引用，则不会添加引用并且不存在问题。

使用[NuGet 包资源管理器](http://nuget.codeplex.com/releases/view/59864)`Microsoft.Tpl.Dataflow.4.5.1-rc.nupkg`可以从“NuGet 官方包源”下载原版。在 Package Matadata 的末尾，您将看到

![在此处输入图像描述](../Images/a025478ec40ab36a56ec4ad77e9c3ff8.png)

可以修改元数据（按`Ctrl-K`）并删除引用：

![在此处输入图像描述](../Images/0ed49a286181a407cd8d09062ec648cf.png)

之后，可以将修改后的文件保存`Microsoft.Tpl.Dataflow.4.5.1-rc.nupkg`在某个目录中。在 NuGet 源列表（请参阅[此处](http://gregorsuttie.com/2011/01/03/using-a-nuget-local-repository/)或[此处](http://haacked.com/archive/2010/10/21/hosting-your-own-local-and-remote-nupack-feeds.aspx)）中添加新位置（本地目录）后，将能够从本地源添加新包（不要忘记选择显示所有包，包括预发布版本，请参阅下图）：

![在此处输入图像描述](../Images/fd3791bc489f11233d8b5b655c860f21.png)

修改`Microsoft.Tpl.Dataflow.4.5.1-rc.nupkg`不添加`System.Runtime`，项目编译无误。

**所以这个 bug 不存在于 Visual Studio 2012 RC 中，甚至不存在于`Microsoft.Tpl.Dataflow.dll`. `Microsoft.Tpl.Dataflow`该错误仅在“NuGet 官方包源”上当前可用的 NuGet 包预发布版本的元数据中。**

您可以将错误报告发布给[autors](https://nuget.org/packages/Microsoft.Tpl.Dataflow)，以便修复包。

**更新 2**：即使我的答案已经被标记为已解决，并且授予问题的赏金仍然没有从我的脑海中消失。实际上，我看到了两个未解决的问题：

1.  为什么在项目构建过程中存在未使用的程序集会`System.Runtime`产生错误。
2.  我在 NuGet 包的卸载或更新工作方式中看到了一些一般性问题（请参阅稍后的详细信息）。

让我们接受这样一个事实，即第一个问题独立于原因而存在。第二个问题让我坐立不安。我在这里看到了真正的问题。大家可以做以下实验来更好地理解我：

1.  在 Visual Studio 2012 RC 中创建一个新的空控制台应用程序。
2.  验证项目没有引用`System.Runtime`.
3.  从“工具”/“库包管理器”打开“包管理器控制台”。
4.  在“包管理器控制台”中执行命令“ *Install-Package Microsoft.Tpl.Dataflow -Pre* ”。
5.  验证两者`System.Runtime`和`System.Threading.Tasks.Dataflow`都包含在项目的参考列表中。
6.  在“包管理器控制台”中执行命令“ *Uninstall-Package Microsoft.Tpl.Dataflow* ”。
7.  验证`System.Threading.Tasks.Dataflow`已从项目的引用列表中删除，**但`System.Runtime`仍在引用列表中**。

我又做了一个实验，我更改了 modified 的版本`Microsoft.Tpl.Dataflow.4.5.1-rc.nupkg`，其中我删除了对`System.Runtime`、 from `4.5.1-rc`to的引用`4.5.1-rc1`并将其保存在本地（它将保存在 下`Microsoft.Tpl.Dataflow.4.5.1-rc1.nupkg`）。之后，我可以在我的项目更新列表中看到“新”版本：

![在此处输入图像描述](../Images/db297f19f2cd3ebcafab741ff484b313.png)

**如果我安装更新，对的引用`System.Runtime`也不会被删除。**

因此，NuGet 的“更新”和“卸载”的当前实现存在错误或一般设计问题。如果我们向我们的项目添加一个包并对项目进行一些更新，我们将获得所有旧版本的所有依赖程序集的引用。**NuGet 从旧版本的包中添加的旧引用在 Uninstall 或 Update 期间不会被删除**。首先项目引用有垃圾本身不好，但是由于存在第一个问题（如果`System.Runtime`存在未引用的引用，则编译时出错）问题会更加严重。

因此，如果 NuGet 中没有任何更改，则更新到下一个版本`Microsoft.Tpl.Dataflow`将无法解决安装`Microsoft.Tpl.Dataflow`在 4.5.1 版（或可能是早期版本）中的用户的问题。所有用户都必须`System.Runtime`手动删除对的引用。我认为这是真正的 NuGet 问题，必须由 NuGet 开发人员解决。稍后我会将问题的描述发布到[http://nuget.org/](http://nuget.org/)。

我发布到 NuGet 的错误报告可以在[这里](http://nuget.codeplex.com/workitem/2301)找到（抱歉，文本格式不完美）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:59:26.113

[根据 MS 的 Alok Shriram 的说法，解决方案是删除对 System.Runtime 的引用](http://social.msdn.microsoft.com/Forums/en-US/tpldataflow/thread/af4dc0db-046c-4728-bfe0-60ceb93f7b9f#9e20d2ec-3b96-444d-98d7-028c4c2b74b7)，这将在下一个版本中修复。

我可以确认删除引用实际上可以解决问题。

# mysql - 如何在 MySQL 中按子网对 IP 列表进行分组？

> ID：10869731
> 
> 赞同：4
> 
> 时间：2012-06-03T10:57:20.030
> 
> 标签：mysql, group-by, ip, subnet

我需要按子网（前 3 个八位字节）对 IP 列表进行分组来计算它。例如，如果我有 Ips

```
123.12.12.12
123.12.12.11
123.12.11.11 
```

我必须得到这样的结果：

```
123.12.12 | 2
123.12.11 | 1 
```

我用谷歌搜索了这个例子：

```
select 
substr(ip,1,locate('.',ip,locate('.',ip)+1)-1) 
as ip, count(ip) as count
from ip_list
group by ip ORDER BY count  DESC 
```

但它仅按前两个八位位组对列表进行分组。我迷失在这一切中`locate(locate(locate(...)))`。有人可以帮助修改它以获得正确的结果吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T11:45:53.697

您应该使用`group by` *表达式 name*。

```
select 
--   locate( '.', ip, locate( '.', ip, locate( '.', ip ) + 1 ) + 1 ) as l,
   substr( ip, 1, locate( '.', ip
                          , locate( '.', ip
                                    , locate( '.', ip ) + 1 ) + 1 ) - 1 ) as subip,
   count(ip) as count
from ip_list
group by ( subip )
order by count desc
; 
```

**编辑1**：不需要使用
。可用于过滤 IP 的子集。`locate``SUBSTR_INDEX`

**示例**：

```
select
       substring_index( ip, '.', 3 ) as subip
     , count(ip) as count
  from ip_list
 group by ( subip )
 order by count desc 
```

**请参阅文档**：

*   [**MySQL：SUBSTR（str，pos，len）**](https://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substr)
    *   从字符串 str 返回一个子字符串 len 个字符长，从位置 pos 开始。
*   [**MySQL: SUBSTRING_INDEX(str,delim,count)**](https://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substring-index)
    *   在计数出现分隔符 delim 之前从字符串 str 返回子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T11:42:05.173

使用这种逻辑，恐怕您将需要另一层`locate`：

```
substr(ip, 1, locate('.', ip, locate('.', ip, locate('.', ip)+1) +1) - 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T11:49:39.057

你可以使用

```
GROUP BY INET_ATON(ip)/256 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-26T14:37:36.343

如果你制作一个 IP 二进制文件，你可以在它上面应用一个掩码，它只保留你 IP 地址的前 3 部分。面具看起来像这样：

```
11111111111111111111111100000000 
```

所以，作为一个数字，它看起来像：

```
SELECT CONV('11111111111111111111111100000000' ,2,10) as mask;
-- Result: 4294967040 
```

如果您使用此掩码对您的 IP 地址进行按位与运算，您将得到如下结果：

```
SELECT
'1.0.207.199',                
INET_NTOA( INET_ATON( '1.0.207.199') & 4294967040 ) ;
-- Result:
-- 1.0.207.199
-- 1.0.207.0 
```

INET_ATON 将 ip (A)daddress (TO) 转换为 (N) 数字，而 INET_NTOA 反之亦然（虽然真正的含义代表 ASCII TO Network，但我更喜欢这个 shofthand ;-)。

因此，您可以像这样按 IP 地址分组：

```
SELECT
    INET_NTOA( INET_ATON( ip ) & 4294967040 ) AS ipgroup, 
    COUNT(ip) AS count
FROM ip_list
GROUP BY ipgroup 
ORDER BY count DESC; 
```

我希望它有所帮助。

# html - 如何在网页中制作全屏背景

> ID：10869739
> 
> 赞同：13
> 
> 时间：2012-06-03T10:58:39.363
> 
> 标签：html, css, web

无论显示此网页的屏幕大小如何，如何将图像作为网页背景？我想正确显示它。如何？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-14T17:26:09.743

使用这个 css 非常简单（用你的背景图片替换 image.jpg）

```
body{height:100%;
   width:100%;
   background-image:url(image.jpg);/*your background image*/  
   background-repeat:no-repeat;/*we want to have one single image not a repeated one*/  
   background-size:cover;/*this sets the image to fullscreen covering the whole screen*/  
   /*css hack for ie*/     
   filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.image.jpg',sizingMethod='scale');
   -ms-filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='image.jpg',sizingMethod='scale')";
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-02T02:36:46.297

嗯，为什么不将图像设置到底层并放弃所有烦恼

```
<img src='yourmom.png' style='position:fixed;top:0px;left:0px;width:100%;height:100%;z-index:-1;'> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T11:01:41.870

通过 jQuery 插件 ;)

*   [http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)
*   [http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-28T07:07:35.260

使用此 CSS 在网页中制作全屏背景。

```
body {
    margin:0;
    padding:0;
    background:url("https://static.vecteezy.com/system/resources/previews/000/106/719/original/vector-abstract-blue-wave-background.jpg") no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-30T23:18:31.500

在您的 CSS 中使用以下代码

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
```

[这是我找到它的链接：](https://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T11:24:09.027

快速搜索关键字[背景生成器](https://www.google.com/search?q=background+generator)会显示此**[CSS3 生成](http://bgpatterns.com/)**的动态创建的背景图案。

通过保持图像**小且可重复**，在移动设备上加载它不会有问题，并且小**图像文件大小**可以解决内存问题。

这是该`head`部分的标记：

```
<style type="text/css">

    body {
      background-image:url('path/to/your/image/background.png');
      width: 100%;
      height: 100%;
    }

</style> 
```

如果您要使用应保持**纵横比**的图像，例如人或物体，那么**您不希望**宽度和高度为 100%，因为这会使图像不成比例地拉伸。相反，请查看这个**[快速教程](http://css-tricks.com/perfect-full-page-background-image/)**，该教程显示了使用 CSS 应用背景图像的不同方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-03T11:00:57.480

将 div 设为 100% 宽和 100% 高。然后设置背景图像。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-07T11:21:11.137

如果我将图像放在“body”内的“div”元素中，我发现了背景图像总是有白色边框的原因。但是如果我把它作为'body'的背景图像，图像可以是全屏的。

因为'body'的默认'margin'不为零。添加这个css后，即使我把它放在'div'中，背景图像也可以全屏。

```
body {
    margin: 0px;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-31T04:05:34.953

我已遵循本教程：[https ://css-tricks.com/perfect-full-page-background-image/](https://css-tricks.com/perfect-full-page-background-image/)

具体来说，第一个[Demo](https://css-tricks.com/examples/FullPageBackgroundImage/progressive.php)对我帮助很大！

```
CSS
 {
    background: url(images/bg.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
} 
```

这可能会有所帮助！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-19T00:17:49.510

### CSS

```
.bbg { 
    /* The image used */
    background-image: url('...');

    /* Full height */
    height: 100%; 

    /* Center and scale the image nicely */
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;    
} 
```

### HTML

```
<!doctype html>
<html class="h-100">
.
.
.
<body class="bbg">
</body>
.
.
.
</html> 
```

# java - JAXB 返回 null 而不是空字符串

> ID：10869748
> 
> 赞同：7
> 
> 时间：2012-06-03T11:00:10.903
> 
> 标签：java, jaxb

`null`如果内部 XML 属性值为空，我如何在解组时检索值？现在我在我的吸气剂中检查`null`：

```
public String getLabel() {
    if (label.isEmpty()) {
        return null;
    }
    else {
        return label;
    }
} 
```

但是可能存在其他一些更优雅的方式吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T11:15:14.797

我认为您的 XML 或多或少是这样的：

```
 <myElement></myElement> 
```

不幸的是，这意味着您**传递的是一个空字符串**。

如果你想通过`null`，你有两种选择：

1.  根本不要传递这个标签（你的 XML 根本不应该包含`<myElement/>`标签）。
2.  使用`xsi:nil`.

如果使用`xsi:nil`，首先您必须将您的 xml 元素（在 XSD 文件中）声明为`nilable`，如下所示：

```
 <xsd:element name="myElement" nillable="true"/> 
```

`null`然后，要在 XML中传递值，请执行以下操作：

```
 <myElement xsi:nil="true"/> 
```

或这个：

```
 <myElement xsi:nil="true"></myElement> 
```

这样，JAXB 知道，您传递`null`的是一个空字符串而不是一个空字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T11:38:18.067

npe 给出的[答案](https://stackoverflow.com/a/10869834/383861)是一个很好的答案，并且指定您希望如何`null`表示也是我的建议。要进行`xsi:nil`编组，您需要将您的属性注释为（请参阅[绑定到 JSON 和 XML - 处理 Null](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)）：

```
@XmlElement(nillable=true)
public String getLabel() {
    return label;
} 
```

如果您不想更改您的 XML 表示，那么您可以使用`XmlAdapter`：

**空字符串适配器**

```
package forum10869748;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class EmptyStringAdapter extends XmlAdapter<String, String> {

    @Override
    public String unmarshal(String v) throws Exception {
        if("".equals(v)) {
            return null;
        }
        return v;
    }

    @Override
    public String marshal(String v) throws Exception {
        return v;
    }

} 
```

**富**

`XmlAdapter`您通过使用`@XmlJavaTypeAdapter`注释来引用 an 。如果您希望将其`XmlAdapter`应用于所有字符串，那么您可以在包级别注册它（请参阅[JAXB 和包级别 XmlAdapters](http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html)）。

```
package forum10869748;

import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
public class Foo {

    private String label;

    @XmlJavaTypeAdapter(EmptyStringAdapter.class)
    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }

} 
```

**演示**

```
package forum10869748;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10869748/input.xml");
        Foo foo = (Foo) unmarshaller.unmarshal(xml);

        System.out.println(foo.getLabel());
    }

} 
```

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
    <label></label>
</foo> 
```

**输出**

```
null 
```

# jquery - jQuery 工具 - 将外部内容加载到覆盖中 - 使用自定义变量 - google.maps ， marker.set('id')

> ID：10869750
> 
> 赞同：0
> 
> 时间：2012-06-03T11:00:42.610
> 
> 标签：jquery, google-maps, jquery-tools

使用 jquery 1.7.2、jquery-tools 1.2.7 和 googlemaps api v3

首先，这是我在 googlemaps 中创建标记的代码片段：

```
function createMarker(latlng, id) {
var marker = new google.maps.Marker({
    map: googleMap,
    position: latlng,
    });

marker.set('id', id);

google.maps.event.addListener(marker, 'click', function() {               
  property_id = marker.get('id');

  alert("add listener -> " + property_id);
            $("#contentWrapBeta").overlay({
                      mask: {
                        color: '#ebecff',
                            loadSpeed: 100,
                            opacity: 0.5
                            },
                          effect: 'apple',
                          left: '2%',
                          top: '5%',
                          load: false,

                  onBeforeLoad: function() {

                  alert("on before load" + property_id);
                 var wrap = this.getOverlay().find(".contentWrap");
                 wrap.load('details.php?id=' + property_id);

                        }

              });

            alert("overlay.load ->" + property_id);
  $("#contentWrapBeta").overlay().load();

});

markers.push(marker);
} 
```

因此，当我单击第一个标记时，警报“添加侦听器”会以正确的 property_id 触发，“加载前开启”警报具有正确的属性 ID，并且“overlay.load”具有正确的 ID，出现弹出窗口，一切都很好....

当我单击地图上的第二个标记时，“添加侦听器”警报显示正确的 ID（我设置的新标记 ID），“overlay.load”也是正确的，但是，

“加载前开启”警报具有先前的标记 property_id (！) - 无论我尝试什么，我似乎都无法用我单击的新标记 id 更新它，它“卡在”第一个标记 property_id 上 - 所以 wrap.load () 调用具有相同的 &id= 变量。

谁能告诉我为什么 - 它已经困扰我好几天了！我似乎无法解决它。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:39:34.330

啊我明白了

感谢 irc.freenode.org 上 #jquery 上的 shonky

似乎我需要将 data() 添加到我的覆盖定义中

我改变了这个：

```
 $("#contentWrapBeta").overlay({
                  mask: {
                  ....,
              onBeforeLoad: function() {
              alert("on before load" + property_id);
              var wrap = this.getOverlay().find(".contentWrap");
              wrap.load('details.php?id=' + property_id);

             }

          }); 
```

至

```
$("#contentWrapBeta").data('property_id', property_id).overlay({
                  mask: {
                  ....,
              onBeforeLoad: function() {
                  var propertyA_id = $('#contentWrapBeta').data('property_id');
                  alert("on before load" + propertyA_id);
                  var wrap = this.getOverlay().find(".contentWrap");
                  wrap.load('details.php?id=' + propertyA_id);

                  }

          }); 
```

# android - 适用于 Android 设备的简单 xml ui

> ID：10869751
> 
> 赞同：-2
> 
> 时间：2012-06-03T11:00:47.617
> 
> 标签：android, xml, user-interface

我是安卓新手。我需要创建一个简单的 UI，如下图所示：

![在此处输入图像描述](../Images/f2a1c77eb5c0aaba5f7eb3e3941a11cf.png)

在背景上（现在它是红色的）我需要必须为屏幕拉伸的图像。在背景图像上方，我需要如图所示的 EditText 和 Button。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:04:27.613

您可以在其上方使用带有线性布局的相对布局。例如：

```
<?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

   <ImageView 
          android:id="@+id/background"
          android:layout_width="fill_parent" 
          android:layout_height="fill_parent"
          android:scaleType="[what ever fits you]"
          [image source and other parameters] />

   <RelativeLayout a
          android:id="@+id/textAndButton" 
          android:layout_width="fill_parent"              
          android:layout_height="wrap_content"              
          android:orientation="vertical"/>
          <EditText...>
          <Button...> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T11:29:31.400

所以，我知道您是 Android 新手。有许多针对 Android 开发初学者的教程，您可以在 Google 上搜索。但是，无论如何，为了帮助您回答您的问题，您应该在 xml 中添加以下内容：

> 主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<EditText android:id="@+id/editText"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content" />

<Button android:id="@+id/button"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="Button" />

</LinearLayout> 
```

然后，在您的`Activity`, 上调用`setContentView(R.layout.main)`该`onCreate()`方法。

# twitter-bootstrap - 折叠的菜单按钮在 android 浏览器上不可点击

> ID：10869754
> 
> 赞同：3
> 
> 时间：2012-06-03T11:01:24.620
> 
> 标签：twitter-bootstrap, collapse

我正在尝试同时创建一个导航栏，一个始终可见的下拉菜单和一个折叠菜单。这适用于桌面浏览器，但不适用于我的手机（android 2.3.6）。这是代码：

```
<!DOCTYPE html>
<html lang="es">
 <head>
  <meta charset="utf-8">
  <title>Pizzeria &amp; Trattoria </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="stylesheet" href="fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.js"></script>
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/bootstrap-responsive.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
   <script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script type="text/javascript" src="js/bootstrap-modal.js"></script>
  <script type="text/javascript" src="js/bootstrap-dropdown.js"></script>
  <script type="text/javascript" src="js/bootstrap-collapse.js"></script>
  <script type="text/javascript">
   //<![CDATA[
   $(document).ready(function(){
    $('#autostart').modal('show');
    $("a.ref_pics").fancybox({'titlePosition':'inside'});
    });
   //]]>
  </script>
 </head>
 <body>
  <div id="autostart" class="modal hide fade">
   <div class="modal-header">
    <button class="close" data-dismiss="modal"><i class="icon-remove"></i></button>
    <h3>&nbsp;</h3>
   </div>
  text....   <a data-dismiss="modal" class="btn pull-right" href="#">Cerrar</a>
  </div>
  <div class="container">
   <div class="hero-unit home-bg">
    <div class="row">
     <div class="span9"><img src="img/logo.png" alt="Pizzeria &amp; Trattoria " /></div>
     <div class="span3">
     </div>
    </div>
    <div class="navbar">
     <div class="navbar-inner">
      <div class="container">
       <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse" style="float:left;">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
       </a>
    <ul class="nav pull-right">
    <li class="dropdown last">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown">español <b class="caret"></b></a>
     <ul class="dropdown-menu">
      <li><a href="index.php?lang=es">español</a></li>
      <li><a href="index.php?lang=en">english</a></li>
      <li><a href="index.php?lang=de">deutsch</a></li>
     </ul>
    </li>
    </ul>
       <div class="nav-collapse">
        <ul class="nav">
         <li class="active"><a href="#">Bienvenida</a></li>
         <li><a href="restaurante.php?lang=es">El Restaurante</a></li>
         <li><a href="menu.php?lang=es">El Menú</a></li>
         <li><a href="chef.php?lang=es">El Chef</a></li>
         <li><a href="pizza.php?lang=es">La Pizza</a></li>
         <li class="last"><a href="contacto.php?lang=es">Contacto</a></li>
        </ul>
       </div><!--/.nav-collapse -->
      </div>
    </div>
    </div>
   </div>
   <div class="row extrabottom">
    <div class="span9">
     <h1>...</h1>
     <p>...</p>
     <p>...</p>
     <p>...</p>
     <p>...</p>
    </div>
    <div class="span3 picbar">
        <a class="ref_pics" data-rel="group1" href="img/st_titel.jpg"><img src="img/th_titel.jpg" alt="Restaurante " /></a>
     <a class="ref_pics" data-rel="group1" href="img/st_kaffee.jpg"><img src="img/th_kaffee.jpg" alt="" /></a>
     <a class="ref_pics" data-rel="group1" href="img/gal_387626_R_K_B_by_ermelchen_pixelio.de.jpg"><img src="img/th_pizza.jpg" alt="" /></a>
    </div>
   </div>
   <footer class="well">
    <div class="row">
     <div class="span6 pull-left"><a href="imprint.php?lang=es#gastro">índice de ilustraciones</a></div>
     <div class="span6 pull-right">&copy; </div>
    </div>
   </footer>
  </div> <!-- /container -->
 </body>
</html> 
```

在我的 android 浏览器中，按钮（三个栏）不可点击。有没有办法将 onclick 绑定到然后展开菜单的按钮？

任何帮助是极大的赞赏。

编辑：我给可折叠菜单一个 ID 并尝试用链接切换它：`<a href="#" onclick="$('#mencol').collapse('toggle')">toggle menu</a>` 它适用于桌面浏览器，但不适用于我的 android。我还尝试`style="float:left;"`从 btn-navbar 中删除 ，再次没有成功。

已解决：猜测我删除了三个引导 javascripts bootstrap-modal.js、bootstrap-dropdown.js 和 bootstrap-collapse.js 并添加了完整的 bootstrap.min.js。现在就像一个魅力。显然android需要额外的功能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:27:03.243

如问题中所述，解决方案是删除 3 个单独的 jQuery 插件并用 bootstrap.min.js 替换它们

我建议@Ollie 自己发布答案并接受他的答案。

这个问题与未回答部分无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T17:11:51.057

我遇到了同样的问题，发现包含在下面的所有 bootstrap-*.js 文件都可以只替换为 bootstrap.js。

简单的答案是替换它：

```
 <script src="js/jquery.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script src="js/bootstrap-typeahead.js"></script> 
```

有了这个：

```
 <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script> 
```

Boostrap.min.js（或只是 boostrap.js）包含其他人单独调用的所有脚本。

# jsf - 根据用户设置的定时器调用方法

> ID：10869756
> 
> 赞同：0
> 
> 时间：2012-06-03T11:01:25.853
> 
> 标签：jsf, primefaces

我正在开发一个与 Twitter 连接的 JSF 应用程序。在我的一个观点中，我有一个按钮，当单击该按钮时，它会调用一个与 Twitter 帐户连接的方法，以检索新推文并对其进行一些处理。

在按钮旁边，我想让用户设置一个计时器，以便自动完成此操作。例如，如果用户选择“2minutes”，则必须每 2 分钟自动检查一次 Twitter，并刷新结果。

有人可以提供一些一般性的解释，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:28:19.213

看看这个[投票 - 开始/停止](http://primefaces.org/showcase/ui/pollStartStop.jsf)

在你的情况下

```
interval="#{myBean.someIntervalNum}" 
```

等等...

# matlab - MATLAB 用零扩展矩阵

> ID：10869758
> 
> 赞同：5
> 
> 时间：2012-06-03T11:01:42.640
> 
> 标签：matlab, matrix, vectorization

我需要一个 的矩阵`nxn`，其中第一个`pxp`包含 1，其余为 0。我可以通过遍历细胞来做到这一点，所以我不是在寻求一种方法来做到这一点。我正在寻找“ *MATLAB*方式”来做到这一点，使用内置函数并避免循环等。

更清楚;

让`n=4 and p=2`,

那么预期的结果是：

```
1 1 0 0
1 1 0 0
0 0 0 0
0 0 0 0 
```

可能有不止一种优雅的解决方案可以做到这一点，所以我会接受最短且最易读的答案。

PS 问题标题看起来有点无关紧要：我放这个标题是因为我最初的方法是`pxp`用 1 创建一个矩阵，然后`nxn`用 0 扩展它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T11:03:57.953

答案是创建一个零矩阵，然后将其中的一部分设置为`1`使用索引：

例如：

```
n = 4;
p = 2;
x = zeros(n,n);
x(1:p,1:p) = 1; 
```

如果你坚持扩大，你可以使用：

```
padarray( zeros(p,p)+1 , [n-p n-p], 0, 'post') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-03T11:40:04.933

**用零**扩展矩阵的另一种方法：

```
>> p = 2; n = 4;
>> M = ones(p,p)
M =
     1     1
     1     1
>> M(n,n) = 0
M =
     1     1     0     0
     1     1     0     0
     0     0     0     0
     0     0     0     0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T11:38:22.437

您可以通过水平和垂直连接轻松创建矩阵：

```
n = 4;
p = 2;
MyMatrix = [ ones(p), zeros(p, n-p); zeros(n-p, n) ]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T13:40:10.530

```
>> p = 2; n = 4;
>> a = [ones(p, 1); zeros(n - p, 1)]

a =

     1
     1
     0
     0

>> A = a * a'

A =

     1     1     0     0
     1     1     0     0
     0     0     0     0
     0     0     0     0 
```

# sharepoint - 如何在沙盒解决方案 Sharepoint 2010 中从 Web 部件获取数据

> ID：10869761
> 
> 赞同：1
> 
> 时间：2012-06-03T11:02:32.190
> 
> 标签：sharepoint, web-parts

我想使用共享点工作流从 Web 部件获取数据来填充列表项数据。如何使用沙盒解决方案解决此问题？我发现如何使用农场解决方案而不是沙箱来完成：

```
using (SPSite site = new SPSite(""))
{
using (SPWeb web = site.OpenWeb())
{
SPFile file = web.GetFile("default.aspx");   
SPLimitedWebPartManager lwpm = file.GetLimitedWebPartManager(PersonalizationScope.Shared);                                   SPLimitedWebPartCollection webParts = lwpm.WebParts;
System.Web.UI.WebControls.WebParts.WebPart wp = webParts[1];                    
string content = (((Microsoft.SharePoint.WebPartPages.ContentEditorWebPart)(wp)).Content).InnerText;                
}  
} 
```

# timestamp - cassandra 的密钥具有更多的时间戳，例如 hbase

> ID：10869764
> 
> 赞同：1
> 
> 时间：2012-06-03T11:02:55.183
> 
> 标签：timestamp, key, cassandra, hbase

我最近使用过 cassandra。我想意识到 cassandra 的密钥可以显示更多的时间戳值，例如在命令行或 java API 客户端中使用 hbase。我知道 hbase 可以显示具有更多时间戳值的键，例如

```
hbase> scan 't1', {COLUMNS => 'c1', TIMERANGE => [1303668804, 1303668904]}. 
```

我详细学习了 cassandra 数据模型，但我找不到任何方法在 cassandra 中显示具有更多时间戳值的键，包括命令行或 JAVA API 客户端。

# java - 创建基于 Web 的“Hello world”应用程序的指南？

> ID：10869765
> 
> 赞同：1
> 
> 时间：2012-06-03T11:03:00.370
> 
> 标签：java

如果我让我们说具有普通界面的“Hello World”Java 应用程序，那么（通常）需要哪些步骤来为该应用程序创建一个 Web 界面以便我可以运行它并通过浏览器访问它？

```
public interface HelloWorld {
    public void init();
}

public class Hello implements HelloWorld {
    public void init() {
        // Do simple stuff
    }
} 
```

我需要能够从浏览器调用方法 init() 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:18:19.930

你有几种可能性：

# 插座

对于受虐狂，但在没有任何额外库或容器的 JVM 上工作：

```
final ServerSocket serverSocket = new ServerSocket(8080);
while(true) {
    final Socket accept = serverSocket.accept();
    final OutputStream outputStream = accept.getOutputStream();
    final PrintWriter printWriter = new PrintWriter(outputStream);
    printWriter.println("HTTP/1.1 200 OK");
    printWriter.println();
    printWriter.println("Hello, World!");
    printWriter.close();
} 
```

下面的所有解决方案都需要一个像[tomcat](/questions/tagged/tomcat "显示标记为“tomcat”的问题")这样的 servlet 容器，并将您的应用程序打包到[war](/questions/tagged/war "显示标记为“战争”的问题")文件或部署到某个目录。

# 小服务程序

工作在低级但使用方便的抽象。

```
@WebServlet(urlPatterns = "/*")
public class HelloServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.getWriter().println("Hello, World!");
    }
} 
```

# JSP

[jsp](/questions/tagged/jsp "显示标记为“jsp”的问题")是一种简单的技术，您可以在其中混合 HTML 标记和 Java 代码。有点类似于[php](/questions/tagged/php "显示标记为“php”的问题")。`index.jsp`文件：

```
<HTML>
<BODY>
Hello, world!
</BODY>
</HTML> 
```

# 网络框架

有**大量**可用于 Java 的 Web 框架。这里：[spring-mvc](/questions/tagged/spring-mvc "显示标记为“spring-mvc”的问题")：

```
@Controller
public class HelloController {

    @RequestMapping("/*")
    @ResponseBody
    public String hello() {
        return "Hello, World!";
    }

} 
```

如您所见，您使用的库/框架越多，实际工作就越简单。对于简单的“ *Hello, world!* ”应用程序，您不需要执行很多步骤。但是您在初始设置期间执行的步骤越多，您的编程模型将来就越容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:17:43.410

基于 Java 的技术最好的教程之一是**roseindia.net** 。对于 Java 中的Web 开发，您可以从 jsp 开始。请参阅： [jsp 教程](http://www.roseindia.net/jsp/)以了解此技术。

# android - Android - 有没有办法将选项菜单添加到 listItem

> ID：10869766
> 
> 赞同：0
> 
> 时间：2012-06-03T11:03:45.223
> 
> 标签：android, android-layout

我将一些项目显示为列表，我想知道是否有一种方法可以在屏幕右侧为列表中的每个项目添加一个小下拉列表，以提供删除/编辑选项。

那可能吗？现在我列出了这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>    

<TextView
    android:id="@+id/no_problems"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Enter the business(es) you want to plan or choose from your existing list."
    />          

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >        
    </ListView>

        <Button
    android:id="@+id/add_problem_ok"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue" 
    android:text="Plan a New Business"
    android:layout_marginTop ="15dp"    
    />  
</LinearLayout> 
```

在 listView 我有这个：

```
<?xml version="1.0" encoding="utf-8"?>

    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="10dp"
        android:textSize="16sp" >
    </TextView> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:27:21.603

如果您想看起来不错，请使用`quickaction-dialog`选项菜单。这里是整个示例[quickaction-dialog](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T11:23:34.807

只需在您的列表项布局中添加微调器，然后使用 getView() 方法将适配器设置为 tat 微调器。

例如。你的 list_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
 <TextView android:id="@+id/nameTV" android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:padding="10dp"
        android:textSize="16sp" >
    </TextView>  

<Spinner android:id="@+id/actionSP" android:layout_width="wrap_content"
        android:layout_height="fill_parent" />
</LinearLayout> 
```

然后你的 getView()

```
 @Override
    public View getView(int position, View view, ViewGroup viewGroup) {
        final ViewHolder viewHolder;

        if (view == null) {
            viewHolder = new ViewHolder();

            view = mInflater.inflate(R.layout.list_item,
                    null);
            viewHolder.nameTV = (TextView) view
                    .findViewById(R.id.nameTV);

            viewHolder.actionSP = (Spinner) view
                    .findViewById(R.id.actionSP);

            ArrayAdapter<String> reasonAdapter = new ArrayAdapter<String>(
                    mApplication, android.R.layout.simple_spinner_item,
                    mYourActionsArray);

            reasonAdapter
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            viewHolder.actionSP.setAdapter(reasonAdapter);

            viewHolder.actionSP
                    .setOnItemSelectedListener(new OnItemSelectedListener() {

                        @Override
                        public void onItemSelected(AdapterView<?> arg0,
                                View arg1, int position, long arg3) {
                        }
                    });
                view.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) view.getTag();
        }

        viewHolder.nameTV.setText("Some Value"); 
```

返回视图；}

ViewHolder 类

```
class ViewHolder {
    TextView nameTV;
    Spinner actionSP;
} 
```

# html - 我如何阻止出站表单提交

> ID：10869777
> 
> 赞同：1
> 
> 时间：2012-06-03T11:07:03.610
> 
> 标签：html, forms

我的网站上有一个个人资料编辑页面，其中包含预设的年龄和国家/地区列表，因此人们可以选择他们的年龄和国家/地区。

我的问题是一个人制作了一个可以提交自定义年龄和国家的 HTML 表单。有人知道如何阻止从不在我的域中的网站提交表单吗？

我改变了我的表格几次，但他可以像我改变它们一样简单地找到输入名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:11:22.483

防止提交带有不良值的表单的唯一故障安全方法是在服务器端执行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:14:18.917

我认为引用者 ( `Request.ServerVariables("http_referrer")`) 应该告诉您请求来自哪个页面。正如 Oleg 所说，无论如何您都应该另外验证返回的表单数据。

# animation - 如何在 sencha touch 2 中更改选项卡面板时设置随机动画？

> ID：10869780
> 
> 赞同：3
> 
> 时间：2012-06-03T11:07:29.577
> 
> 标签：animation, sencha-touch, extjs, sencha-touch-2, tabpanel

我还是 sencha touch 2 的新手，目前我被困在如何设置不同的动画

用户在选项卡面板之间切换的时间。谁能给我一些提示如何做到这一点？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:58:04.477

这是一个很大的提示：

```
Ext.define("App.view.Main", {
  extend: 'Ext.tab.Panel',

  config: {
    fullscreen: true,
    layout: {
      animation: 'slide'
    },
    tabBarPosition: 'bottom',
    items:[{
      xtype:'panel',
      iconCls: 'home',
      title:'Tab 1',
      html:'Tab1'
    },{
      xtype:'panel',
      iconCls: 'user',
      title:'Tab 2',
      html:'Tab2'
    },{
      xtype:'panel',
      iconCls: 'info',
      title:'Tab 3',
      html:'Tab3'
    }],
    listeners:{
      activeitemchange:function(){
        this.getLayout().setAnimation(['slide','fade','cover','reveal','pop', 'flip'][Math.floor(Math.random()*6)]);
      }
    }
  }
}); 
```

`['slide','fade','cover','reveal','pop', 'flip']`基本上，当用户切换卡片时，它会在;中为 tabpanel 的布局设置一个新的随机动画。

通过添加方向参数的处理随意贡献

**[更新] 手柄方向**

```
listeners:{
  activeitemchange:function(){
    var anim_with_direction = ['slide','cover','reveal'],
        anim_without_direciton = ['fade','pop', 'flip'],
        anims = anim_with_direction.concat(anim_without_direciton),
        anim,
        type = anims[0],
        direction;
    if(anim_with_direction.indexOf(type) != -1){
      direction = ['left','right','up','down'][Math.floor(Math.random()*4)];
      anim = {type:type,direction:direction};
    }else{ 
      anim = {type:type};
    }
    this.getLayout().setAnimation(anim);
  }
} 
```

# java - 将 hashmap 键与文本文件中的单词进行比较并更新值

> ID：10869781
> 
> 赞同：1
> 
> 时间：2012-06-03T11:07:35.380
> 
> 标签：java, hashmap

我一直在使用哈希图来存储文本文件中的唯一单词。现在，我需要将 hashmap 中的每个单词与另一个更大的文本文件进行比较，并跟踪每个单词在文本文件中出现的频率。

在最初添加到 hashmap 时，我只插入键并将值设置为 0。我的计划是使用“值”作为较大文本文件中每个单词的频率。

我的尝试如下；我首先使用扫描仪读取原始文件并将单词存储到哈希图中。接下来，我再次使用扫描仪，但这次与更大的文本文件相关联。从这里开始，我有点卡住了。我不知道如何更新“值”并索引“键”。

这就是我所拥有的；

```
Scanner fileScanner = new Scanner (new File (fileName));
fileScanner.useDelimiter (" ");

while (fileScanner.hasNext()) {
    for (int i = 0; i < hashmap.size(); i++) {   //This I use to index the key field
        if (hashmap.get(i).equals(fileScanner.next().toString()) {
            int freq ++;
            //How do I update the value field of the corresponding value?
        }
    }
} 
```

现在，显然，上述代码中的任何内容都不起作用，而且我在想办法时遇到了一些问题。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:13:47.527

您的地图应该是`Map<String, Integer>`：对于每个单词，您都有一个整数来存储单词的出现次数。

要获取单词的出现次数：`Integer numberOfOccurrences = map.get(word);`

要测试单词是否在地图中：`if (numberOfOccurrences != null)`

要增加出现次数：`numberOfOccurrences++;`

要将这个新值存储在地图中：`map.put(word, numberOfOccurrences);`

没有理由迭代地图。您逐字阅读文件，并使用上述内容来增加每个单词的出现次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:25:02.323

如果您尝试计算单词的数量并将其存储为地图，那么当添加新单词时，请尝试将值 1 而不是 0（单词至少存在一次）。

对于更新检查 map 是否包含键的值，然后再次将其放入增量值。旧值将被替换。

试试这个

```
HashMap<String, Integer> hashmap = new HashMap<String, Integer>();
String key = "myWord";
hashmap.put(key, 1);
Integer tmp = null;
// lets increment value if exist in map or put new value if doesn't exits in map
if ((tmp = hashmap.get(key)) != null) {
    //if map contains word
    hashmap.put(key, tmp + 1);
} else {
    //if word is new, map does't contain it as key 
    hashmap.put(key, 1);
}
System.out.println(hashmap);
//out ->{myWord=2} 
```

# java - 使用 CXF/JAXB2 生成和自定义 equals/hashcode 方法

> ID：10869782
> 
> 赞同：4
> 
> 时间：2012-06-03T11:07:57.033
> 
> 标签：java, jaxb, cxf, maven-jaxb2-plugin

我有两个类`A`，`B`由`cxf-codegen-plugin`我的 WSDL 生成。`A`继承自`B`。

我想添加常用方法，例如`hashCode()`，`equals()`...所以，我的 POM 中有以下配置：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.6.0</version>
    <executions>
        <execution>
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <configuration>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>${basedir}/wsdl/PeeringApi.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-xjc-XhashCode</extraarg>
                            <extraarg>-xjc-Xequals</extraarg>
                            <extraarg>-xjc-Xsetters</extraarg>
                        </extraargs>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics</artifactId>
            <version>${jaxb2.version}</version>
        </dependency>
    </dependencies> </plugin> 
```

我有两个问题：

1.  有没有办法生成一个`equals()`不比较`B`（即不调用`super.equals()`）属性的方法？
2.  如何指示插件生成`equals()`仅`A`比较我指定的某些属性（默认情况下，似乎所有属性都进行了比较）的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:42:50.223

我找到了一个解决方案，如下所述：http: [//confluence.highsource.org/display/J2B/JAXB2+Basics+Plugins](http://confluence.highsource.org/display/J2B/JAXB2+Basics+Plugins)。

您可以添加自定义绑定以指示 JAXB2 插件忽略某个属性。

# qt - 清除 QML 锚点

> ID：10869785
> 
> 赞同：24
> 
> 时间：2012-06-03T11:08:14.230
> 
> 标签：qt, position, qml, qt-quick

我有一个 MouseArea，我想从中心开始，然后在按下上/下/左/右键后拥有一个绝对位置。我的问题是我不知道如何清除 MouseArea 上的锚点，以便我可以指定一个绝对位置：

```
import QtQuick 2.0
import QtQuick.Window 2.0

Window {
    id: screen
    width: 360
    height: 360
    visible: true

    Rectangle {
        anchors.fill: parent

        states: [
            State {
                name: "moved"
                AnchorChanges {
                    target: mouseArea
                    anchors.bottom: undefined
                    anchors.left: undefined
                    anchors.right: undefined
                    anchors.top: undefined
                }
            }
        ]

        MouseArea {
            id: mouseArea
            anchors.centerIn: parent
            width: 250
            height: 250
            focus: true
            onClicked: console.log("clicked!")
            onPositionChanged: console.log("position changed!")

            function moveMouseArea(x, y) {
                mouseArea.x += x;
                mouseArea.y += y;
                mouseArea.state = "moved";
                mouseAreaPosText.text = 'Mouse area was moved... new pos: '
                    + mouseArea.x + ', ' + mouseArea.y;
            }

            Keys.onPressed: {
                if (event.key === Qt.Key_Up)
                    moveMouseArea(0, -1);
                if (event.key === Qt.Key_Down)
                    moveMouseArea(0, 1);
                if (event.key === Qt.Key_Left)
                    moveMouseArea(-1, 0);
                if (event.key === Qt.Key_Right)
                    moveMouseArea(1, 0);
            }

            Rectangle {
                anchors.fill: parent
                border.width: 2
                border.color: "black"
                color: "transparent"
            }

            Text {
                id: mouseAreaPosText
                anchors.centerIn: parent
            }
        }
    }
} 
```

起初我只是尝试设置`mouseArea.anchors`为`undefined`但收到关于`anchors`成为只读属性的错误。然后我发现了 AnchorChanges，但我找不到移除/清除锚点的方法；设置`anchors.bottom`等`undefined`不起作用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-03T22:53:21.360

根据[docs](http://doc.qt.io/qt-5/qtquick-positioning-anchors.html#restrictions)，将锚属性设置为`undefined`应该可以工作。我不太明白为什么 `AnchorChanges`不允许 set `anchors.centerIn`，但你可以在你的`moveMouseArea`函数中解决它：

```
function moveMouseArea(x, y) {
    mouseArea.anchors.centerIn = undefined; // <-- reset anchor before state change
    mouseArea.pos.x += x;
    mouseArea.pos.y += y;
    mouseArea.state = "moved";
    mouseAreaPosText.text = 'Mouse area was moved... new pos: '
        + mouseArea.pos.x + ', ' + mouseArea.pos.y;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:46:00.867

谢谢你们的帮助。我发现在一个状态中设置 undefined 是有效的（如果通过工作你只是意味着它不会给出错误），但是一旦元素移动到另一个状态，锚就会神奇地（并且非常令人沮丧地）返回。即使您在最终状态下设置所有未定义的锚，也会发生这种情况。然而，如上所述，在更改状态之前在函数中设置 undefined 效果很好。就我而言，我将它设置在 onPressed 的 mouseArea 中。

```
 onPressed: {
                plotWindow04Frame.anchors.bottom = undefined
                plotWindow04Frame.anchors.left = undefined
                plotWindow04Frame.state = "inDrag"
            } 
```

我发现在onReleased中没有必要提及anchor，只需要在下一个状态。onReleased: { plotWindow04Frame.state = "dropped" }

另外，我应该提到，最终的“丢弃”状态也没有提到锚点，只是不透明。

```
 states: [
    State {
        name: "inDrag"
        PropertyChanges {
            target: plotWindow04Frame
            opacity: .5
        }
    },
    State {
        name: "dropped"
        PropertyChanges {
            target: plotWindow04Frame
            opacity: 1
        }
    }

 ]

    transitions: Transition {
        NumberAnimation { properties: "opacity"; duration:200 }
    }
} 
```

（这里的想法是这些绘图窗口在拖动时会变成半透明（不透明度：0.5），但当用户放下它们时会恢复为不透明（不透明度：1））

好的是绘图窗口“矩形”最初固定在 GUI 的底部，但是一旦用户拿起它们，他们就可以将它们放在他们喜欢的任何地方。

# ios - 适用于 Ipad 和 Iphone 不同导航栏项目的 Ios 应用程序

> ID：10869788
> 
> 赞同：1
> 
> 时间：2012-06-03T11:08:28.370
> 
> 标签：ios, objective-c

我正在开发适用于 iPad 和 iPhone 的应用程序，我在导航栏中添加了多个栏项目，但我想添加不同的栏项目...在 iPad 的导航栏中，我只想添加 2 个项目权利，这已经在起作用。但我还想在 iPhone 导航栏的左侧添加 2 个其他按钮。但是通过我尝试的方式，我得到了相同的导航栏，相同的项目，关于如何向导航栏添加不同项目的任何想法。

这是我的代码：

```
UIBarButtonItem *refreshButton = [[UIBarButtonItem alloc] 
  initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh 
  target:self action: @selector(IpadReload:)];

UIImage *emailIcon = [UIImage imageNamed:@"emailicon.png"];
UIBarButtonItem *emailButton = [[UIBarButtonItem alloc] initWithImage:(emailIcon) style:UIBarButtonItemStylePlain target:self action:@selector(emailButtonTapped:)];

NSArray *rightButtonsArray = [[NSArray alloc] initWithObjects:refreshButton, emailButton, nil];

self.navigationItem.rightBarButtonItems = rightButtonsArray;

UIBarButtonItem *previousButton = [[UIBarButtonItem alloc] initWithTitle:@"Previous" style:UIBarButtonItemStylePlain  target: self action: @selector(PreviousClicked:)];

UIImage *phoneIcon = [UIImage imageNamed:@"phoneicon.png"];
UIBarButtonItem *phoneButton = [[UIBarButtonItem alloc] initWithImage:(phoneIcon) style:UIBarButtonItemStylePlain target:self action:@selector(callPhone:)];

NSArray *leftButtonsArray = [[NSArray alloc] initWithObjects:previousButton, phoneButton, nil];

self.navigationItem.leftBarButtonItems = leftButtonsArray; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:46:18.750

实际上，您需要使用 iOS 内置的当前设备枚举，而不是 isEqualToString：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    // iPad
} else {
    //  iPhone or iPod Touch - Add your two items to the right here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T11:47:46.563

区分 iPhone 和 iPad 的简洁方法是：

```
BOOL iPad = [[UIDevice currentDevice] userInterfaceIdiom] == 
    UIUserInterfaceIdiomPad;
// your setup
UIImage *buttonIcon = [UIImage imageNamed: 
   iPad ? @"padIcon.png" : @"phoneIcon.png"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:16:18.097

首先区分iPhone和iPad，根据它添加导航栏项 NSString *deviceType = [UIDevice currentDevice].model;

```
if([deviceType isEqualToString:@"iPhone"]){
//Add iPhone navigation items
}else if ([deviceType isEqualToString:@"iPhone"]){
//Add iPad navigation items
}else{ 
```

//ipod 等的默认项目 }

# ruby - 在 Windows 上隐藏 curl 窗口

> ID：10869789
> 
> 赞同：1
> 
> 时间：2012-06-03T11:08:28.803
> 
> 标签：ruby, windows

[上一个问题的答案之一](https://stackoverflow.com/questions/10865988/fetching-a-url-without-c-extensions-libraries)提到我可以使用 curl 获取 url；这可以在`Thread.new`或 中完成`Process.spawn`。但似乎在任何一种情况下，在 Windows 上，当 curl 连接到网络时，都会出现一个小的命令提示符窗口。

我正在像这样调用 curl：

```
`curl "#{url}"` 
```

有什么办法可以隐藏窗口使其不出现？它不仅会从游戏中夺走注意力（冻结它），而且如果我经常打电话，最终用户会非常烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T22:48:36.047

经过一些实验，我让它工作了，双击脚本时没有窗口，我使用 ruby​​ 的 WMI，你只需要改变 curl 的路径。重要提示：使用扩展名 .rbw 保存它，并确保 ruby​​w.exe 与该扩展名相关联。

```
#hidden_curl.rbw
require 'win32ole'

HIDDEN_WINDOW = 0
cmd = '"C:\\Program Files\\curl\\curl.exe" --output c:\\test2.txt "http://stackoverflow.com/questions/10869789/hiding-curl-window-on-windows"'
objStartup = WIN32OLE.connect("winmgmts:\\\\.\\root\\cimv2:Win32_ProcessStartup")
objConfig = objStartup.SpawnInstance_
objConfig.ShowWindow = HIDDEN_WINDOW
objProcess = WIN32OLE.connect("winmgmts:root\\cimv2:Win32_Process")
errReturn = objProcess.Create(cmd, nil, objConfig, nil) 
```

希望这适用于您的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:53:01.603

我认为您的问题是您在子shell中运行命令，而windows中的子shell是附加到窗口的CMD。

我没有红宝石来测试以下内容，但您可以尝试：

```
IO#popen
将指定的命令字符串作为子进程运行；
子进程的标准输入和输出将连接到返回的 IO 对象。

```

=> [http://ruby-doc.org/core-1.8.6/IO.html](http://ruby-doc.org/core-1.8.6/IO.html)如果您可以使用 IO

您也可以尝试运行 `start /B curl -s "#{url}"` 而不是卷曲，请参阅[http://www.computerhope.com/starthlp.htm](http://www.computerhope.com/starthlp.htm)了解启动规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T17:01:47.790

此解决方案不会在我的 W7 系统上弹出窗口

```
cmd = '"C:\Program Files\curl\curl.exe" --silent --output c:\test.txt "http://stackoverflow.com/questions/10869789/hiding-curl-window-on-windows"'
IO.popen(cmd) 
```

或不创建文件

```
cmd = '"C:\Program Files\curl\curl.exe" --silent "http://stackoverflow.com/questions/10869789/hiding-curl-window-on-windows"'
IO.popen(cmd, "w+") { |io| puts io.readlines } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T11:31:40.863

您可以尝试将 -s 选项传递给 curl 以使其以静默模式运行。就像是

```
`curl -s "#{url}"` 
```

我猜这不会显示控制台。

# c++ - 如何避免 C++ 中两个同名枚举值的名称冲突？

> ID：10869790
> 
> 赞同：15
> 
> 时间：2012-06-03T11:08:53.607
> 
> 标签：c++, enums

C++ 中的枚举存在一个主要问题：不能在两个不同的枚举中使用一个名称，如下所示：

```
enum Browser
{
    None = 0,
    Chrome = 1,
    Firefox = 2
}

enum OS
{
    None = 0,
    XP = 1,
    Windows7 = 2
} 
```

那么在这个例子中处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-03T11:11:16.693

在 C++03 中，您可以将其包含`enum`在 a 中`struct`：

```
struct Browser
{
  enum eBrowser
  {
    None = 0,
    Chrome = 1,
    Firefox = 2
  };
}; 
```

在 C++11 中使其成为`enum class`：

```
enum class Browser
{
    None = 0,
    Chrome = 1,
    Firefox = 2
}; 
```

在 C++03`namespace`中也可以进行包装，但我个人认为 wrapping `struct`/`class`更好，因为`namespace`更广泛。例如

```
// file1.h
namespace X
{
  enum E { OK };
}

// file2.h
namespace X
{
  enum D { OK };
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-03T11:12:14.807

一种选择是将每个枚举放在不同的命名空间中：

```
namespace Foo {
  enum Browser {
      None = 0,
      Chrome = 1,
      Firefox = 2
  }
}

namespace Bar {
  enum OS {
      None = 0,
      XP = 1,
      Windows7 = 2
  }
} 
```

如果您的编译器可用，更好的选择是使用 C++11[枚举类](http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations)：

```
enum class Browser { ... }
enum class OS { ... } 
```

有关枚举类的讨论，请参见[此处。](http://www2.research.att.com/~bs/C++0xFAQ.html#enum)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T11:10:57.250

将它们包装在命名空间或类中：

```
namespace Browser {
  enum BrowserType
  {
    None = 0,
    Chrome = 1,
    Firefox = 2
  }
}

namespace OS {
   enum OSType  {
      None = 0,
      XP = 1,
      Windows7 = 2
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-07T15:12:57.530

您可以使用C++11 中支持的`enum class`( [scoped enums )。](http://en.cppreference.com/w/cpp/language/enum#Scoped_enumerations)它是强类型的，表示每种`enum`类型都不同。

```
Browser::None != OS::None   

enum class Browser
{
    None = 0,
    Chrome = 1,
    Firefox = 2
}

enum class OS
{
    None = 0,
    XP = 1,
    Windows7 = 2
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T01:15:47.387

如何使用作用域与非作用域枚举？c++11 现在提供范围枚举。一个例子是：

```
enum class Browser : <type> {

};

enum class OS : <type> {

}; 
```

通过浏览器对象或操作系统对象访问枚举类型。

# hyperlink - YouTube 订阅链接

> ID：10869793
> 
> 赞同：1
> 
> 时间：2012-06-03T11:09:13.943
> 
> 标签：hyperlink, youtube, image, subscribe

我是一名新的编码员/网页设计师，我正在尝试添加一个 youtube 徽标，当点击确认订阅用户频道时

我有一个包含以下编码的php文件...

```
<div id="youtube">
<a href="http://www.youtube.com/subscription_center?add_user=theansweriscake"><img src="/images/YouTube.png /></a>
</div> 
```

此链接确认订阅和图像目录正确

但是问题是，每当我将其添加到编码中时，它都会把所有东西都塞满！如果您转到任何页面并右键单击并转到“检查元素”，您会看到 facebook 的点赞框周围有一个框，其中有 youtube 图片链接的空间，但正如我所说，当我添加它时它不起作用一切都聚集在一起和/或菜单聚集在一起，变得很奇怪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:10:13.533

从表面上看，你有两个问题。第一个问题是您的包含文件名错误，第二个问题是您错过了结束引号“

这是在 img src= 标签上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:16:34.320

尝试改变你`id`的东西 - 比如`<div id="youtube-confirm">`

id 可能会保留在`youtube`FB 脚本中，它会弄乱你和他们的东西

# java - Android 4：赋予按钮另一种风格/外观

> ID：10869795
> 
> 赞同：1
> 
> 时间：2012-06-03T11:09:21.077
> 
> 标签：java, android

我想更改默认 Android 4 按钮的外观。它们看起来像这样：

![在此处输入图像描述](../Images/94ae21bdc4bd131060a930fad59719dc.png)

我希望它们完全是黑色的，有白色的边框，没有圆角，仅此而已。蓝色悬停效果很棒，没有改变。不幸的是，按钮有很多参数。我可以用一个 style.xml 来实现吗？哪些是有趣的参数？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T11:38:41.970

按钮样式：style.xml

```
<style name="Button" parent="@android:style/Widget.Button">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textSize">@dimen/txt_size_medium</item>
    <item name="android:background">@drawable/btn</item>
    <item name="android:textColor">@drawable/btn_txt_selector</item>
    <item name="android:gravity">center</item>
</style> 
```

btn.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="true"><shape android:shape="rectangle">
            <gradient android:angle="270" android:centerColor="@color/btn_focused_center" android:endColor="@color/btn_focused_end" android:startColor="@color/btn_focused_start" />

            <corners android:radius="@dimen/radious_btn" />

            <padding android:bottom="@dimen/padding_bottom_btn" android:left="@dimen/padding_left_btn" android:right="@dimen/padding_right_btn" android:top="@dimen/padding_top_btn" />

            <stroke android:width="@dimen/border_width_btn" android:color="@color/btn_focused_border" />
        </shape></item>

    <item><shape android:shape="rectangle">
            <gradient android:angle="270" android:centerColor="@color/btn_normal_center" android:endColor="@color/btn_normal_end" android:startColor="@color/btn_normal_start" />

            <corners android:radius="@dimen/radious_btn" />

            <padding android:bottom="@dimen/padding_bottom_btn" android:left="@dimen/padding_left_btn" android:right="@dimen/padding_right_btn" android:top="@dimen/padding_top_btn" />

            <stroke android:width="@dimen/border_width_btn" android:color="@color/btn_normal_border" />
        </shape></item>

</selector> 
```

btn_txt_selector.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="true" android:color="@color/btn_txt_focused"></item>
    <item android:state_selected="true" android:color="@color/btn_txt_selected"></item>
    <item android:state_enabled="false" android:color="@color/btn_txt_disabled"></item>
    <item android:color="@color/btn_txt_normal"></item>

</selector> 
```

# node.js - Heroku 上的 NPM 私有 git 模块

> ID：10869796
> 
> 赞同：56
> 
> 时间：2012-06-03T11:09:43.813
> 
> 标签：node.js, heroku, npm

我正在尝试将我的应用程序部署到 Heroku，但是我依赖于使用一些私有 git 存储库作为模块。我这样做是为了项目之间的代码重用，例如，我有一个在多个应用程序中使用的自定义记录器。

```
"logger":"git+ssh://git@bitbucket.org..............#master" 
```

问题是 Heroku 显然没有 ssh 访问此代码的权限。我在这个问题上找不到任何东西。理想情况下，Heroku 有一个公钥，我可以将其添加到模块中。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-12T23:35:27.107

# 基本认证

GitHub 支持基本身份验证：

```
"dependencies" : {
    "my-module" : "git+https://my_username:my_password@github.com/my_github_account/my_repo.git"
} 
```

和 BitBucket 一样：

```
"dependencies" : {
    "my-module": "git+https://my_username:my_password@bitbucket.org/my_bitbucket_account/my_repo.git"
} 
```

`package.json`但是可能不需要在您的密码中使用纯密码。

# 个人访问令牌 (GitHub)

为了使这个答案更加最新，我现在建议在 GitHub 上[使用个人访问令牌，而不是用户名/密码组合。](https://developer.github.com/v3/auth/#basic-authentication)

您现在应该使用：

```
"dependencies" : {
    "my-module" : "git+https://<username>:<token>@github.com/my_github_account/my_repo.git"
} 
```

对于 Github，您可以在此处生成新令牌：

[https://github.com/settings/tokens](https://github.com/settings/tokens)

# 应用密码（Bitbucket）

应用程序密码主要用于提供与不支持双重身份验证的应用程序的兼容性，您也可以将它们用于此目的。首先，[创建一个应用密码](https://bitbucket.org/account/admin/app-passwords)，然后像这样指定您的依赖项：

```
"dependencies" : {
    "my-module": "git+https://<username>:<app-password>@bitbucket.org/my_bitbucket_account/my_repo.git"
} 
```

# [已弃用] 团队的 API 密钥 (Bitbucket)

对于 BitBucket，您可以在管理团队页面上生成一个 API 密钥，然后使用此 URL：

```
"dependencies" : {
    "my-module" : "git+https://<teamname>:<api-key>@bitbucket.org/team_name/repo_name.git"
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-04-16T14:02:04.200

**2016-03-26 更新**

如果您使用的是 npm3，则所描述的方法不再有效，因为 npm3`package.json`在运行`preinstall`脚本之前会获取中描述的所有模块。这[已被确认为一个错误](https://github.com/npm/npm/issues/10379)。

官方的 node.js Heroku buildpack 现在包含`heroku-prebuild`和`heroku-postbuild`，将分别在之前和之后运行`npm install`。您应该使用这些脚本而不是`preinstall`并且`postinstall`在所有情况下都支持 npm2 和 npm3。

换句话说，您`package.json`应该类似于：

```
 "scripts": {
      "heroku-prebuild": "bash preinstall.sh",
      "heroku-postbuild": "bash postinstall.sh"
    } 
```

* * *

我提出了迈克尔的答案的替代方案，保留了（IMO）将您的凭据排除在源代码控制之外的有利要求，同时不需要自定义构建包。这是[由于 Michael 链接的 buildpack](https://github.com/thirdiron/heroku-buildpack-nodejs)已经过时而感到沮丧。

`preinstall`解决方案是在 npm和脚本中设置和拆除 SSH 环境`postinstall`，而不是在 buildpack 中。

请遵循以下说明：

*   在您的存储库中创建两个脚本，我们将它们命名`preinstall.sh`为`postinstall.sh`.
*   使它们可执行 ( `chmod +x *.sh`)。
*   将以下内容添加到`preinstall.sh`：

```
 #!/bin/bash
    # Generates an SSH config file for connections if a config var exists.

    if [ "$GIT_SSH_KEY" != "" ]; then
      echo "Detected SSH key for git. Adding SSH config" >&1
      echo "" >&1

      # Ensure we have an ssh folder
      if [ ! -d ~/.ssh ]; then
        mkdir -p ~/.ssh
        chmod 700 ~/.ssh
      fi

      # Load the private key into a file.
      echo $GIT_SSH_KEY | base64 --decode > ~/.ssh/deploy_key

      # Change the permissions on the file to
      # be read-only for this user.
      chmod 400 ~/.ssh/deploy_key

      # Setup the ssh config file.
      echo -e "Host github.com\n"\
              " IdentityFile ~/.ssh/deploy_key\n"\
              " IdentitiesOnly yes\n"\
              " UserKnownHostsFile=/dev/null\n"\
              " StrictHostKeyChecking no"\
              > ~/.ssh/config
    fi 
```

*   将以下内容添加到`postinstall.sh`：

```
 #!/bin/bash

    if [ "$GIT_SSH_KEY" != "" ]; then
      echo "Cleaning up SSH config" >&1
      echo "" >&1

      # Now that npm has finished running, we shouldn't need the ssh key/config anymore.
      # Remove the files that we created.
      rm -f ~/.ssh/config
      rm -f ~/.ssh/deploy_key

      # Clear that sensitive key data from the environment
      export GIT_SSH_KEY=0
    fi 
```

*   将以下内容添加到您的`package.json`:

    ```
    "scripts": {
      "preinstall": "bash preinstall.sh",
      "postinstall": "bash postinstall.sh"
    } 
    ```

*   使用 生成私钥/公钥对`ssh-agent`。

*   将公钥添加为 Github 上的部署密钥。
*   创建你的私钥的 base64 编码版本，并将其设置为 Heroku config var `GIT_SSH_KEY`。
*   提交并将您的应用推送到 Github。

当 Heroku 构建您的应用程序时，在 npm 安装您的依赖项之前，`preinstall.sh`脚本会运行。这会根据环境变量的解码内容创建一个私钥文件`GIT_SSH_KEY`，并创建一个 SSH 配置文件来告诉 SSH 在连接到`github.com`. （如果您改为连接到 Bitbucket，则将`Host`条目更新`preinstall.sh`为`bitbucket.org`）。然后 npm 使用这个 SSH 配置安装模块。安装后，删除私钥并擦除配置。

这允许 Heroku 通过 SSH 拉下您的私有模块，同时将私钥保留在代码库之外。如果您的私钥被泄露，因为它只是部署密钥的一半，您可以在 GitHub 中撤销公钥并重新生成密钥对。

顺便说一句，由于 GitHub 部署密钥具有读/写权限，如果您在 GitHub 组织中托管模块，则可以改为创建只读团队并为其分配“部署”用户。然后可以使用密钥对的公共部分配置部署用户。这为您的模块增加了一层额外的安全性。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-12-04T14:42:36.437

在你的 git repo 中使用纯文本密码是一个非常糟糕的主意，使用访问令牌更好，但你仍然需要非常小心。

```
"my_module": "git+https://ACCESS_TOKEN:x-oauth-basic@github.com/me/my_module.git" 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-04-03T01:40:44.553

我创建了一个自定义 nodeJS buildpack，它允许您指定一个 SSH 密钥，该密钥在 ssh-agent 中注册并在首次设置 dynos 时由 npm 使用。它允许您无缝地将模块指定为 ssh url，`package.json`如下所示：

```
"private_module": "git+ssh://git@github.com:me/my_module.git" 
```

要设置您的应用程序以使用您的私钥：

*   生成密钥：（`ssh-keygen -t rsa -C "your_email@example.com"`不输入密码。buildpack 不支持带密码的密钥）
*   将公钥添加到 github：（`pbcopy < ~/.ssh/id_rsa.pub`在 OS X 中）并将结果粘贴到 github admin
*   将私钥添加到您的 heroku 应用程序的 config:`cat id_rsa | base64 | pbcopy`中，然后`heroku config:set GIT_SSH_KEY=<paste_here> --app your-app-name`
*   设置您的应用程序以使用项目中包含的 heroku nodeJS buildpack README 中所述的 buildpack。总之，最简单的方法是使用 heroku config:set 设置一个特殊的配置值到包含所需构建包的存储库的 github url。我建议分叉我的版本并链接到您自己的 github fork，因为我不保证不会更改我的 buildpack。

我的自定义 buildpack 可以在这里找到：[https](https://github.com/thirdiron/heroku-buildpack-nodejs) ://github.com/thirdiron/heroku-buildpack-nodejs它适用于我的系统。非常欢迎评论和拉取请求。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-02-24T18:01:02.357

根据@fiznool 的回答，我创建了一个 buildpack 来使用存储为环境变量的自定义 ssh 密钥来解决这个问题。由于 buildpack 与技术无关，它可用于使用任何工具下载依赖项，如 php 的 composer、ruby 的 bundler、javascript 的 npm 等：[https ://github.com/simon0191/custom-ssh-key-buildpack](https://github.com/simon0191/custom-ssh-key-buildpack)

1.  将 buildpack 添加到您的应用程序：

    ```
    $ heroku buildpacks:add --index 1 https://github.com/simon0191/custom-ssh-key-buildpack 
    ```

2.  生成一个没有密码的新 SSH 密钥（假设您将其命名为 deploy_key）

3.  将公钥添加到您的私有存储库帐户。例如：

    *   Github：[https ://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/](https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/)

    *   Bitbucket：[https ://confluence.atlassian.com/bitbucket/add-an-ssh-key-to-an-account-302811853.html](https://confluence.atlassian.com/bitbucket/add-an-ssh-key-to-an-account-302811853.html)

4.  将私钥编码为 base64 字符串，并将其添加为`CUSTOM_SSH_KEY`heroku 应用程序的环境变量。

5.  制作应使用 ssh 密钥的主机的逗号分隔列表，并将其添加为`CUSTOM_SSH_KEY_HOSTS`heroku 应用程序的环境变量。

    ```
    # MacOS
    $ heroku config:set CUSTOM_SSH_KEY=$(base64 --input ~/.ssh/deploy_key) CUSTOM_SSH_KEY_HOSTS=bitbucket.org,github.com
    # Ubuntu
    $ heroku config:set CUSTOM_SSH_KEY=$(base64 ~/.ssh/deploy_key) CUSTOM_SSH_KEY_HOSTS=bitbucket.org,github.com 
    ```

6.  部署您的应用程序并享受 :)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-09T14:38:42.150

我能够通过个人访问令牌在 Heroku 构建中设置 Github 私有存储库的解析。

*   在此处生成 Github 访问令牌：[https ://github.com/settings/tokens](https://github.com/settings/tokens)
*   将访问令牌设置为 Heroku config var:`heroku config:set GITHUB_TOKEN=<paste_here> --app your-app-name`或通过 Heroku Dashboard
*   添加`heroku-prebuild.sh`脚本：

    ```
    #!/bin/bash
    if [ "$GITHUB_TOKEN" != "" ]; then
        echo "Detected GITHUB_TOKEN. Setting git config to use the security token" >&1
        git config --global url."https://${GITHUB_TOKEN}@github.com/".insteadOf git@github.com:
    fi 
    ```

*   将预构建脚本添加到`package.json`：

    ```
    "scripts": {
        "heroku-prebuild": "bash heroku-prebuild.sh"
    } 
    ```

对于本地环境，我们也可以使用`git config ...`或者我们可以将访问令牌添加到`~/.netrc`文件中：

```
machine github.com
  login PASTE_GITHUB_USERNAME_HERE
  password PASTE_GITHUB_TOKEN_HERE 
```

并且安装私有 github 存储库应该可以工作。

`npm install OWNER/REPO --save`将显示`package.json`为：`"REPO": "github:OWNER/REPO"`

并在 Heroku 构建中解决私人回购也应该有效。可选地，您可以设置一个 postbuild 脚本来取消设置`GITHUB_TOKEN`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-01T18:29:44.770

这个答案很好[https://stackoverflow.com/a/29677091/6135922](https://stackoverflow.com/a/29677091/6135922)，但我改变了一点预安装脚本。希望这会对某人有所帮助。

```
#!/bin/bash
# Generates an SSH config file for connections if a config var exists.

echo "Preinstall"

if [ "$GIT_SSH_KEY" != "" ]; then
  echo "Detected SSH key for git. Adding SSH config" >&1
  echo "" >&1

  # Ensure we have an ssh folder
  if [ ! -d ~/.ssh ]; then
    mkdir -p ~/.ssh
    chmod 700 ~/.ssh
  fi

  # Load the private key into a file.
  echo $GIT_SSH_KEY | base64 --decode > ~/.ssh/deploy_key

  # Change the permissions on the file to
  # be read-only for this user.
  chmod o-w ~/
  chmod 700 ~/.ssh
  chmod 600 ~/.ssh/deploy_key

  # Setup the ssh config file.
  echo -e "Host bitbucket.org\n"\
          " IdentityFile ~/.ssh/deploy_key\n"\
          " HostName bitbucket.org\n" \
          " IdentitiesOnly yes\n"\
          " UserKnownHostsFile=/dev/null\n"\
          " StrictHostKeyChecking no"\
          > ~/.ssh/config

  echo "eval `ssh-agent -s`"
  eval `ssh-agent -s`

  echo "ssh-add -l"
  ssh-add -l

  echo "ssh-add ~/.ssh/deploy_key"
  ssh-add ~/.ssh/deploy_key

  # uncomment to check that everything works just fine
  # ssh -v git@bitbucket.org
fi 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-17T13:15:39.647

您可以在 package.json 私有存储库中使用以下身份验证示例：

```
https://usernamegit:passwordgit@github.com/reponame/web/tarball/branchname 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-06-12T18:35:43.923

简而言之，这是不可能的。我想出的这个问题的最佳解决方案是使用新的[git subtree](https://github.com/gitster/git/blob/634392b26275fe5436c0ea131bc89b46476aa4ae/contrib/subtree/git-subtree.txt)。在撰写本文时，它们不在官方 git 源中，因此需要手动安装，但它们将包含在 v1.7.11 中。目前它可以在 homebrew 和 apt-get 上使用。然后就是这样做的情况

```
git subtree add -P /node_modules/someprivatemodue git@github.......someprivatemodule {master|tag|commit} 
```

这会扩大 repo 的大小，但是通过使用 gitsubtree pull 执行上面的命令可以轻松进行更新。

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2012-06-04T14:33:46.623

我之前使用来自 github 的模块完成了此操作。Npm 当前接受包的名称或`tar.gz`包含该包的文件的链接。

例如，如果您想直接从 Github 使用 express.js（通过下载部分获取链接），您可以这样做：

```
"dependencies" : {
  "express"   :  "https://github.com/visionmedia/express/tarball/2.5.9"
} 
```

`tar.gz`因此，您需要找到一种通过 http(s)将存储库作为文件访问的方法。

# asp.net-mvc - 使用 RavenDB 和 ASP.NET MVC 进行会话处理

> ID：10869797
> 
> 赞同：3
> 
> 时间：2012-06-03T11:10:23.480
> 
> 标签：asp.net-mvc, ravendb

我有一个服务类 UserService，它获取使用 AutoFac 注入的 IDocumentStore 实例。这工作正常，但现在我正在查看这样的代码：

```
public void Create(User user)
{
    using (var session = Store.OpenSession())
    {
        session.Store(user);
        session.SaveChanges();
    }
} 
```

写入数据库的每个操作都使用相同的结构：

```
using (var session = Store.OpenSession())
{
    dosomething...
    session.SaveChanges();
} 
```

消除这种重复代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T11:39:09.483

最简单的方法是在基本控制器上实现`OnActionExecuting`并`OnActionExecuted`使用它。

让我们想象一下你创造了`RavenController`这样的：

```
public class RavenController : Controller
{
    public IDocumentSession Session { get; set; }
    protected IDocumentStore _documentStore;

    public RavenController(IDocumentStore documentStore)
    {
        _documentStore = documentStore;
    }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        Session = _documentStore.OpenSession();
        base.OnActionExecuting(filterContext);
    }

    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        using (Session)
        {
            if (Session != null && filterContext.Exception == null)
            {
                Session.SaveChanges();
            }
        }
        base.OnActionExecuted(filterContext);
    }
} 
```

那么你需要在你自己的控制器中做的就是继承`RavenController`如下：

```
public class HomeController : RavenController
{
    public HomeController(IDocumentStore store)
        : base(store)
    {

    }

    public ActionResult CreateUser(UserModel model)
    {
        if (ModelState.IsValid)
        { 
            User user = Session.Load<User>(model.email);
            if (user == null) { 
                // no user found, let's create it
                Session.Store(model);
            }
            else {
                ModelState.AddModelError("", "That email already exists.");
            }
        }
        return View(model);
    }
} 
```

* * *

**有趣的是**，我发现一篇博客文章正好展示了这种技术......

它确实比我所做的解释得更多。希望对你有更好的帮助

> [使用 RavenDB 作为后备存储构建 ASP.NET MVC 应用程序](http://www.dotnetcurry.com/ShowArticle.aspx?ID=787)

# android - 在已部署的应用程序上错误地使用混合大小写的包名称，我可以将其更改为小写吗？

> ID：10869800
> 
> 赞同：5
> 
> 时间：2012-06-03T11:10:52.930
> 
> 标签：android, naming-conventions, package, google-play, android-lint

我在 Google Play 上有一个应用程序，其 java 包名称的最后一部分是*混合大小写的*。我希望删除 Android Lint 警告（请参阅[此问题](https://stackoverflow.com/questions/10868431/adroid-lint-complaining-about-activity-not-registered-in-androidmanifest-but-it)）和*Jens*让我注意到 Java 命名约定说你应该只对 java 包名称使用小写字母，也许这就是导致警告的原因。我的应用程序正常工作，但我想将包名称更改为小写，以遵守使用 java 命名约定.. 如果我将包的名称更改为仅小写，我会破坏 Google Play 的正确行为吗？即，如果我使用新软件包名称发布应用程序的新版本，Android 将不会将其识别为安装在设备上的同一个应用程序，它会显示为完全不同的应用程序？您是否建议我简单地忽略这个错误并记住在我的下一个项目中遵守命名约定，或者我是否会遇到混合大小写包名称的问题（比简单的 Lint 警告更糟糕）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:17:26.760

> 一旦您在其清单包名称下发布您的应用程序，这将永远是应用程序的唯一身份。切换到不同的名称会生成一个全新的应用程序，它不能作为现有应用程序的更新安装。

它不可能改变它。请阅读[http://android-developers.blogspot.in/2011/06/things-that-c​​annot-change.html](http://android-developers.blogspot.in/2011/06/things-that-cannot-change.html)

# vim - 在单个匹配行上执行多个命令

> ID：10869808
> 
> 赞同：1
> 
> 时间：2012-06-03T11:12:09.073
> 
> 标签：vim

我最近需要将列表包装在我在 minipage 环境中处理的 LaTeX 文档中。本质上，在匹配的文件的每一行之前和之后插入一些文本。为此，我使用了以下命令序列：

```
:g/lstinputlisting/:norm O\begin{minipage}{\textwidth}
:g/lstinputlisting/:norm o\end{minipage} 
```

虽然这给出了我想要的结果，但必须输入两个单独的命令似乎很笨重，两个命令都在同一匹配行上运行。是否可以在同一行上执行多个命令，或者重复的命令真的有必要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:12:09.603

我在编写此代码时发现的一种解决方案是在传递给 norm 命令的字符串中使用，然后使用移动命令插入第二行。这给出了略微改进：

```
:g/lstinputlisting/norm O\begin{minipage}{\textwidth}^[jo\end{minipage} 
```

（^[ 是通过按 ^V (Ctrl+V) 然后按转义键产生的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:28:12.857

包装：

```
lstinputlisting 
```

带标签：

```
\begin{minipage}{\textwidth}
lstinputlisting
\end{minipage} 
```

你可以使用这个命令：

```
:%s/lstinputlisting/\\begin{minipage}{\\textwidth}\r&\r\\end{minipage} 
```

*   `\r`是`new line`。
*   `&`是`search pattern`。

# windows-phone-7 - 在 Windows Phone 中单击 ContextMenu 的菜单项时找不到引用的控件

> ID：10869811
> 
> 赞同：0
> 
> 时间：2012-06-03T11:12:16.897
> 
> 标签：windows-phone-7, contextmenu, silverlight-toolkit

我有一组显示在数据绑定列表框中的对象。列表框包含定义为 StackPanel 的模板，其中包含 TextBlock。TextBlock 显示了我的数据以集合为界。

我还使用适用于 Windows Phone 的 Silverlight 工具包关联上下文菜单。我以编程方式将 ContextMenu 和 MenuItems 关联到选定的 TextBlock。我通过自己的点击事件处理每个菜单项。

我面临的问题是，当我从上下文菜单中单击菜单项时，我无法从列表框中获取引用的控件。换句话说，我无法获得对显示上下文菜单的 TextBlock 的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:55:17.973

我认为有一种方法可以将元素关联到给定的 ContextMenu，但由于我找不到它，这里有一个解决方法。

您说您正在以编程方式将 ContextMenu 与 TextBlock 相关联。然后，您可以使用美妙的[Tag 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx)来保存对您的 TextBlock 的引用。正如您在链接中看到的那样，Tag 包含任意对象。代码如下：

首先，您将标签设置为您的文本块（我使用了一些通用名称）

```
menuitem.Tag = textblock; 
```

然后，在点击处理程序中，检索该 Textblock

```
var menuItem = sender as MenuItem;
if(menuItem != null && menuItem.Tag is TextBlock)
   var textBlock = menuItem.Tag as TextBlock; 
```

那么，textBlock 就是调用 ContextMenu 的 TextBlock。

希望它有所帮助。

# android - 如何在 Android 中处理主页按钮

> ID：10869814
> 
> 赞同：2
> 
> 时间：2012-06-03T11:12:59.307
> 
> 标签：android, android-homebutton

我是一个新的Android开发者，我知道处理返回按钮但我不知道如何处理主页按钮，当我点击主页按钮时，我尝试了很多方法，但没有使用，请任何人帮助我并解决我的问题。我使用了以下代码，

```
 @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) 
  {
    if(keyCode==KeyEvent.KEYCODE_HOME)
    {
        Toast.makeText(this, "Click Home ", Toast.LENGTH_LONG).show();
    }
    return super.onKeyDown(keyCode, event);
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T11:24:24.897

你`Does not get Home Button click event`。但是当你按下主页按钮时调用这个方法

```
 @Override
        protected void onStop() {

            super.onStop();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:23:03.240

您无法判断是否单击了 HOME 按钮，并且您无法在按下 HOME 按钮时阻止您的应用程序被隐藏，但您可以判断您的应用程序是否不再可见（返回键、HOME 键或其他应用程序获得了前台）。

只需覆盖`onPause`or `onStop`，并在那里添加一个日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-21T10:58:55.410

我找到了答案，请添加下面给出的代码 -

```
public boolean isApplicationSentToBackground(final Context context) 
   {
    ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    List<ActivityManager.RunningTaskInfo> tasks = am.getRunningTasks(1);
    if (!tasks.isEmpty()) {
        ComponentName topActivity = tasks.get(0).topActivity;
        if (!topActivity.getPackageName().equals(context.getPackageName())) {
            return true;
        }
    }
    return false;
}

@Override
public void onStop() {
    if (isApplicationSentToBackground(this)){
        //put your code here what u want to do

    }
    super.onStop();
} 
```

更改清单文件-

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-27T05:31:05.587

[![在此处输入图像描述](../Images/1f4a1a7ea313e993b8fec3327d5e23b2.png)](https://i.stack.imgur.com/oWg2J.png) Android Home Key 由框架层处理，您无法在应用层级别处理。因为主页按钮动作已经在下面的级别中定义了。但是如果您正在开发您的自定义 ROM，那么它可能是可能的。出于安全原因，Google 限制了 HOME BUTTON 覆盖功能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T13:36:25.590

您无法再检测到家庭新闻事件。但是你可以通过其他方式获得家庭新闻事件逻辑上它对我有用，希望对你也有用。

在活动中定义这个

```
public static boolean OnPause = false;
public static boolean OnResume = false; 
```

将此方法置于活动中

```
 @Override 
  protected void onPause() 
  { 
      // TODO Auto-generated method stub
      super.onPause(); 

       OnPause  = true;

  }

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    OnResume = true;        

}
@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();

    if(OnPause == true && OnResume == false)
    {
        Log.e("My activity ", " **** home is press *** ");
        //Do Your Home press code Here.

    }

    OnPause = false;
    OnResume = false;

} 
```

# java - JTree 有时不扩展

> ID：10869815
> 
> 赞同：1
> 
> 时间：2012-06-03T11:13:01.857
> 
> 标签：java, swing, jtree

我有一个非常大的项目，我正在处理，图形编辑器，我在使用摆动组件时遇到了一些大问题。**然而，现在我有一个程序员最可怕的噩梦，一个只在某些时候**发生的错误。

如果我尝试在我的 中选择元素`JTree`，无论是在添加元素时，还是在图表 ( ) 中选择它们时选择它们`JInternalFrame`，其中一些都不会展开。

我的结构是这样的，我有一个工作区，包含项目和包含图表的项目。图表在文件夹中包含我拥有的所有元素，比如圆形、矩形等（如果它们是圆形，它们被放在圆形文件夹中......）。

要知道的另一件事是我通过我`setSelectedPath/Paths`的方法选择我的元素`JTree`。

一些可能有助于理解我所做的事情和我尝试过的事情：

*   我确保我的节点知道如何获取 root。（`getTreeModel.getPathToRoot`返回好路径）
*   我尝试将路径添加到树选择模型并直接添加到树
*   我已将树设置`expandsSelectedPaths`为 true
*   当我手动展开我的树时选择节点（它们甚至在之后展开），直到我添加导致问题的类型的新元素
*   这在切换 5 种类型的元素时大约会发生一次，当我在添加一个出现问题的元素后尝试添加其他类型的元素时会发生一些奇怪的事情

我希望有人知道该怎么做，尽管我认为这是一个非常复杂的问题。请询问任何可以帮助您帮助我的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:02:59.333

好的，谢谢大家的回答，但是我找到了一个非常简单的解决方法来解决这个问题。如果最后一个路径组件是叶子，由于某种原因，正在扩展的东西没有效果。

我所做的只是让我的叶节点为方法**返回 false**`isLeaf`，我所有的问题都消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:00:19.673

*   如果`addWhatever()`要`JTree`触发正确的`TreeModelEvent`( `fireChildAdded()`, `firePathChanged()`, `fireChildrenLoaded()`, `treeStructureChanged()`)

*   GUI 的所有更改都将移至`BackGround Task(s)`，请查看`SwingWorker`或`Runnable#Thread`（最清晰和最简单的方法），但`Runnable#Thread`需要将所有输出（Swing 方法）包装到`invokeLater`

# matlab - matlab中的Kmean绘图

> ID：10869816
> 
> 赞同：1
> 
> 时间：2012-06-03T11:13:03.473
> 
> 标签：matlab, machine-learning, classification, k-means

我在 matlab 上的一个项目拇指识别系统上。我实现了 Kmean 算法，我也得到了结果。实际上，现在我想像他们在[这里](http://www.mathworks.com/help/toolbox/stats/kmeans.html)所做的那样绘制结果。我正在尝试，但无法做到。我正在使用以下代码。

```
load training.mat; % loaded just to get trainingData variable

labelData = zeros(200,1);
labelData(1:100,:) = 0; 
labelData(101:200,:) = 1;

k=2;

[trainCtr, traina] = kmeans(trainingData,k);

trainingResult1=[];

for i=1:k
    trainingResult1 = [trainingResult1 sum(trainCtr(1:100)==i)];
end

trainingResult2=[];

for i=1:k
    trainingResult2 = [trainingResult2 sum(trainCtr(101:200)==i)];
end

load testing.mat; % loaded just to get testingData variable

c1 = zeros(k,1054);

c1 = traina;

cluster = zeros(200,1);

for j=1:200
    testTemp = repmat(testingData(j,1:1054),k,1);
    difference = sum((c1 - testTemp).^2, 2);

    [value index] = min(difference);
    cluster(j,1) = index;
end

testingResult1 = [];

for i=1:k
    testingResult1 = [testingResult1 sum(cluster(1:100)==i)];
end

testingResult2 = [];

for i=1:k
    testingResult2 = [testingResult2 sum(cluster(101:200)==i)];
end 
```

在上面的代码`trainingData`中是 200 X 1054 的矩阵，其中 200 是拇指图像，1054 是列。实际上每张图像都是 25 X 42。我将每张图像重新塑造成行矩阵 (1 X 1050) 和 4 个其他（一些特征）列，所以每张图像总共有 1054 列。同样`testingData`，我以与我制作类似的方式制作`testingData`它也是 200 X 1054 的顺序。现在我的问题只是像他们在[这里](http://www.mathworks.com/help/toolbox/stats/kmeans.html)所做的那样绘制结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:31:24.200

选择 2 个功能后，您可以按照示例进行操作。开始一个图形，使用`hold on`，然后使用`plot`或`scatter`来绘制质心和数据点。例如

```
selectedFeatures = [42,43];
plot(trainingData(trainCtr==1,selectedFeatures(1)),
     trainingData(trainCtr==1,selectedFeatures(2)),
     'r.','MarkerSize',12) 
```

将绘制集群 1 中数据点的选定特征值。

# android - 在恢复主要活动时更新 TextView

> ID：10869817
> 
> 赞同：1
> 
> 时间：2012-06-03T11:13:05.263
> 
> 标签：android, android-intent, textview, android-activity, onresume

下面提供的这段代码中的朋友，我想在从播放意图恢复时刷新我的文本视图。但是，每当我尝试在 OnCreate 之外但在我的主类中定义我的 textview 时（在静态 int 分数之后），我的应用程序就会崩溃。

```
public class MainProjectActivity extends Activity {
    /** Called when the activity is first created. */

    static int Score = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Display Scores
        final TextView displayScores = (TextView)findViewById(R.id.scoreDisplay);
        displayScores.setText("Your Score : "+ Score);

        //Play Game button activity
        Button gameButton = (Button)findViewById(R.id.PlayButton);
        gameButton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent play = new Intent(getApplicationContext(), com.sample.game.PlayScreen.class);
                startActivity(play);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T11:40:18.210

我将从添加 super.onResume(); 开始：

```
@Override
protected void onResume(){
    super.onResume();
    // The rest
} 
```

我也会删除：

```
final TextView displayScores = (TextView)findViewById(R.id.scoreDisplay);
        displayScores.setText("Your Score : "+ Score); 
```

从 onCreate 开始，并将其添加到 onResume()，因为每次调用 onCreate 时，也会调用 onResume。

也从公共更改为受保护的 onResume()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T11:37:10.003

尝试这个：

```
public class MainProjectActivity extends Activity {
    /** Called when the activity is first created. */
TextView displayScores;
    static int Score = 0;
@Override
protected void onResume(){
    super.onResume();
    // code to update the date here
    displayScores.setText("Your Score : "+ Score);

}
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Display Scores
        displayScores = (TextView)findViewById(R.id.scoreDisplay);
        displayScores.setText("Your Score : "+ Score);

        //Play Game button activity
        Button gameButton = (Button)findViewById(R.id.PlayButton);
        gameButton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent play = new Intent(getApplicationContext(), com.sample.game.PlayScreen.class);
                startActivity(play);
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:21:12.047

```
@Override
    protected void onResume() {
        // TODO Auto-generated method stub

        displayScores.setText("Your Score : "+ Score);

        super.onResume();
    } 
```

# macos - 等效于 Mac 的 clipToBounds（NSView 的层）

> ID：10869818
> 
> 赞同：7
> 
> 时间：2012-06-03T11:13:07.497
> 
> 标签：macos, calayer, cliptobounds

我有一个类“GlobalView”，它扩展了 NSView 并有两个子视图 GreenRectView（它扩展了 NSView）。我使用 GreenRectView 中的 CALayer 以便能够（使用 setAffineTransform :) 围绕默认左下角以外的点旋转我的视图。因此我使用了“setAnchorPoint”。一切都很好，除了当我的绿色矩形被旋转时，它没有画在它的视图范围之外。在 iOS 中，可以使用 clipToBounds:NO 来接受绘图显示在边界之外，但在 Mac 中它不能与 maskToBounds 一起使用...如何旋转我的 greenrect 并完全显示它，无论旋转角度如何。

见图片： ![截屏](../Images/cd9f6f5b55a86529ae780ae4eaede999.png)

![在此处输入图像描述](../Images/b122fe4b6081e7521145d0098dff163d.png) 这是代码：

```
 @implementation GlobalView
- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
        g = [[GreenRectView alloc]initWithPoint:NSMakePoint(200, 200)];
        [self addSubview:g];

        g = [[GreenRectView alloc]initWithPoint:NSMakePoint(100, 400)];
        [self addSubview:g];    
    }
    return self;
}

#import <Quartz/Quartz.h>
#include <ApplicationServices/ApplicationServices.h>

@implementation GreenRectView

- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {     
        [self setWantsLayer:YES];
        layer = [self layer];

        [self setLayer:layer];
        [layer setAnchorPoint:NSMakePoint(0.0,0.5)];
        [layer setMasksToBounds:NO];

        [menuLayer addSublayer:layer];

    }
    return self;
}

- (id)initWithPoint:(CGPoint)p {
    return [self initWithFrame:NSMakeRect(p.x, p.y, 120, 100)];
}

- (void)drawRect:(NSRect)dirtyRect {
    [[NSColor greenColor] setFill];
    NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:NSMakeRect(0,0, self.frame.size.width, self.frame.size.height) xRadius:5.5 yRadius:5.5];
    [path stroke];  
} 
```

# oracle - 如何在 oracle 10g 中创建/调用程序？

> ID：10869821
> 
> 赞同：1
> 
> 时间：2012-06-03T11:13:20.000
> 
> 标签：oracle, stored-procedures

我在 Oracle 中创建了一个过程，但是当我尝试执行它时出现错误。下面列出了我为创建此过程而采取的步骤：

```
SQL> ed getuserinfo

create or replace procedure getUserInfo
    ( p_username out Users.username%TYPE,
      p_password out Users.password%TYPE ) IS
BEGIN

    select username,password into p_username,p_password from users where username='yogi';

END;
/

SQL> exec getuserinfo
BEGIN getuserinfo; END;

          *
ERROR at line 1:
ORA-06550: line 1, column 7:
PLS-00201: identifier 'GETUSERINFO' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

有什么问题，我该如何解决？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:21:13.670

你真的执行了你的创建过程语句吗？您是否获得了“已创建程序”。信息？Oracle 不知道您的 getuserinfo 过程这一事实向我表明该语句未执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T11:18:24.280

您需要实际创建尚未完成的过程。您需要一个分号`end`，如果您在 SQL*Plus 中创建它，您需要添加`/`以通知 SQL*Plus 该块已完成：

```
create or replace procedure getUserInfo
      ( p_username out Users.username%TYPE,
        p_password out Users.password%TYPE ) IS
BEGIN

select username,password into p_username,p_password from users;

END;
/
show error 
```

事后添加总是明智的，`show error`这样任何错误都会以可理解的格式返回到控制台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-02T09:20:54.917

我认为这是程序调用错误！调用应该如下所示：

```
SQL>var var1 varchar2(50);
SQL>var var2 varchar2(50);
SQL> exec getuserinfo(:var1, :var2); 
SQL> print var1, var2; 
```

玩得开心！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T14:55:20.887

调用过程时需要指定输出参数。

```
DECLARE
    x Users.username%TYPE;
    y Users.password%TYPE;
BEGIN
    getuserinfo(x, y);
    DBMS_OUTPUT.PUT_LINE('username: ' || x || ', password: ' || y);
END; 
```

# javascript - 圆括号 javascript

> ID：10869822
> 
> 赞同：3
> 
> 时间：2012-06-03T11:13:22.020
> 
> 标签：javascript, function

> **可能重复：**
> [JavaScript 对象/函数/类声明周围的括号是什么意思？](https://stackoverflow.com/questions/440739/what-do-parentheses-surrounding-a-javascript-object-function-class-declaration-m)

JS中圆括号的含义如下：

```
<script>
(
 function foo(){ alert("Hello world!")}()
)
</script> 
```

它按预期工作并显示“Hello world！”。但是如果我拉下括号

```
 <script>

 function foo(){ alert("Hello world!")}()

</script> 
```

Chrome 控制台生成错误“Uncaught SyntaxError: Unexpected token )”。我无法弄清楚为什么会发生这种情况......有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T11:19:15.980

```
(
 function foo(){ alert("Hello world!");}
) 
```

在上面一行中，我们定义了一个函数 foo，它被解释为一个函数对象。

```
(
 function foo(){ alert("Hello world!");}
)(); 
```

我们现在调用函数（使用函数对象）。

~~**注意**：您使用括号的方式实际上是错误的。以上是使用它们的正确方法。~~

**更新**：

这实际上是一个很好的问题。我摆弄了一段时间，得出了以下结论。（注意，我可能错了很多，如果是，请告诉我。）

它是关于 JS 引擎解析代码的方式。当它解析时`function foo(){ alert("Hello world!");}`，它会将其视为函数声明。它（可能）不是调用函数的语句（可能根据语言的语法）。

但是，以下代码有效

```
<script type=text/javascript>
[function foo(){ alert("Hello world!");}()]
</script> 
```

还有这个：

```
<script type=text/javascript>
1,function foo(){ alert("Hello world!");}()
</script> 
```

（显然是上述问题中的那个）

我认为这是因为 JS 解析器需要一个表达式，`(..)`即当它第一次看到`(`. `comma-operator`上面第二个代码中的 as 以及初始化数组时（在第一个代码中）也会发生这种情况。但是，当没有使代码（函数）看起来像表达式的标记时，解析器在遇到 last 时会抛出错误`()`。

**更新2**（非常感谢Felix Kling）：

请参阅[CMS回复](https://stackoverflow.com/a/1634321/227884)中有关语法部分的详细说明。这个答案非常清楚地解释了我上面所说的，即 JS Parses 如何区分**函数声明**和**函数表达式**

```
(
 function foo(){ alert("Hello world!")}()
) 
```

是一个函数表达式。因此它执行没有任何错误。

但在

```
 function foo(){ alert("Hello world!")}<<STOP>>() 
```

内容直到`<<STOP>>`被解析为函数声明而不是函数表达式。因此，当它遇到第一个时`(`，`<<STOP>>`它会标记一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:15:42.057

它是一个自执行函数，这里还有一个关于这个主题的问题：[javascript 中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)

# c# - GlyphRun 对象中的 GlyphIndices 属性如何编码？

> ID：10869826
> 
> 赞同：3
> 
> 时间：2012-06-03T11:14:05.657
> 
> 标签：c#, wpf, xaml, graphics

我正在尝试构建一个`GlyphRun`对象，但我似乎无法理解`GlyphIndices`属性是如何编码的。

例如，[以下](http://msdn.microsoft.com/en-us/library/ms751619%28v=vs.85%29.aspx#drawtext)XAML 字符串创建“hello world”。很明显，以下规则成立：

*   43->小时
*   72 -> e
*   79 -> 升

但是这个编码方案是什么？我尝试了 ASCII，但它似乎不适合。

你有什么主意吗？

* * *

```
<GlyphRunDrawing ForegroundBrush="Black">
  <GlyphRunDrawing.GlyphRun>
    <GlyphRun 
      CaretStops="{x:Null}" 
      ClusterMap="{x:Null}" 
      IsSideways="False" 
      GlyphOffsets="{x:Null}" 
      GlyphIndices="43 72 79 79 82 3 58 82 85 79 71" 
      BaselineOrigin="0,12.29"  
      FontRenderingEmSize="13.333333333333334" 
      DeviceFontName="{x:Null}" 
      AdvanceWidths="9.62666666666667 7.41333333333333 2.96 2.96 7.41333333333333 3.70666666666667 12.5866666666667 7.41333333333333 4.44 2.96 7.41333333333333" 
      BidiLevel="0">
      <GlyphRun.GlyphTypeface>
        <GlyphTypeface FontUri="C:\WINDOWS\Fonts\TIMES.TTF" />
      </GlyphRun.GlyphTypeface>
    </GlyphRun>
  </GlyphRunDrawing.GlyphRun>
</GlyphRunDrawing> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T15:10:31.690

使用此代码将 Unicode 代码点转换为字形索引：

```
GlyphTypeface glyphTypeface = new GlyphTypeface(new Uri(@"C:\WINDOWS\Fonts\TIMES.TTF"));
const char character = 'и';
ushort glyphIndex;
glyphTypeface.CharacterToGlyphMap.TryGetValue(character, out glyphIndex); 
MessageBox.Show("Index = " + glyphIndex); 
```

上面的示例为 Cyrillic и 字符返回 610。

# android - 如何从 SD 卡播放视频

> ID：10869830
> 
> 赞同：14
> 
> 时间：2012-06-03T11:14:33.457
> 
> 标签：android, android-videoview

我正在创建一个简单的应用程序，它可以从网络上流式传输视频并且我做到了，但现在我想更改代码以便我可以从我的 SDCard 播放视频文件

原始代码：

```
Uri vidFile = Uri.parse("MY SITE HERE");
VideoView videoView = (VideoView) findViewById(R.id.VideoView);
videoView.setVideoURI(vidFile);
videoView.setMediaController(new MediaController(this));
videoView.start(); 
```

所以请帮助我更改代码，以便它可以播放我的移动存储卡中的视频。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T11:29:56.233

`videoView.setVideoURI(vidFile);`方法需要换成`videoView.setVideoPath(path);`方法。这里的 path 指定了视频文件在`SDCARD`.

可以使用该视频文件的属性轻松检索此路径`MediaStore.Video.Media.DATA`，或者只需将歌曲路径静态输入为`/sdcard/songname`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T11:24:04.863

```
Uri vidFile = Uri.parse(
   Environment.getExternalStorageDirectory().getAbsolutePath()+"filename");
... 
```

其余代码将相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T11:22:41.960

代替

`videoView.setVideoUri(vidFile)`

利用

`videoView.setVideoPath("/sdcard/SONG.")`.

让我知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T04:55:04.410

我也尝试了您的代码并收到相同的错误消息，但是当我尝试使用路径或名称中没有空格的视频路径时，它运行良好。试一试。例如，文件路径“/mnt/sdcard/Movies/Long Drive Song - Khiladi 786 ft. Akshay Kumar_Asin-YouTube.mp4”给出了错误，但文件路径“/mnt/sdcard/Movies/Khiladi.mp4”运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T11:29:36.933

这些链接可以帮助您：

[在 Android 的 SD 卡中播放 3gp 视频](http://sree.cc/google/android/playing-the-video-in-sd-card-of-android)

[如何播放视频和音频 android](http://www.helloandroid.com/tutorials/how-play-video-and-audio-android)

[使用 VideoView 从 sdcard 播放 mp4](http://android-coding.blogspot.com/2011/03/using-videoview-to-play-mp4-from-sdcard.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-11T23:32:05.190

我知道它很旧，但如果它可以提供帮助。将此添加到您的清单中

`<uses-permission android:name="com.android.externalstorage.ExternalStorageProvider"/>`

# ios - 根据其上方视图“元素”的宽度/高度“动态”生成子视图框架的 x 和 y 值？

> ID：10869831
> 
> 赞同：0
> 
> 时间：2012-06-03T11:14:43.173
> 
> 标签：ios, uikit

有没有办法根据其上方的另一个子视图的宽度和高度来设置子视图框架的 x 和 y 值？换句话说，举个例子，假设一个 UIView 有两个子视图，一个 UILabel 和一个 UIImage，标签的内容将来可能会发生变化并占用更多空间（两三个“行”而不是一个） - 什么我是否必须根据该标签中使用的字符数使该图像显示得稍微低一些？是否有简单使用 UIWebView 的替代方法？

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:30:16.907

视图不应该真正设置自己的框架 x 和 y，因为正如您所描述的，适当的值取决于各个视图不知道的上下文。

您希望`layoutSubviews`在包含视图中实现以适当地调整标签和图像视图的大小和位置。然后，当您检测到标签的大小已更改时，您将调用`setNeedsLayout`包含视图。这将告诉 UIKit 包含视图的子视图需要重新调整大小和定位，并且您的实现`layoutSubviews`将在适当的时间被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:33:07.650

您可以尝试使用 UITextView 来标记您的 UIImage。在 UITextView 委托 (UITextViewDelegate) 中有一个委托方法 - (void)textViewDidChange:(UITextView *)textView。这会在文本视图更改时触发，因此您可以检查文本视图中的内容大小，并在必要时移动图像。

您可以实现它来检查 textview.contentSize.height + y 坐标是否大于 UIImage y 坐标，如果是，则将 UIImage 移动到 y 坐标的新偏移量。与 textview.contentSize.width + X 坐标和 UIIMage x 坐标相同。

# iphone - NSTimer 在 iPhone 中关闭应用程序后继续计数

> ID：10869835
> 
> 赞同：2
> 
> 时间：2012-06-03T11:15:36.233
> 
> 标签：iphone, objective-c, xcode, nstimer

我有一个计时器，它必须在 8 小时（28800 秒）之后才被释放

我想知道如何让计时器在后台和/或应用程序关闭时运行？

这是 NSTimer ：

```
stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                                      target:self
                                                    selector:@selector(updateTimer)
                                                    userInfo:nil
                                                     repeats:YES]; 
```

这是我的条件：

```
 counter++;

if (counter >= 28800) {
    [stopWatchTimer invalidate];
    counter =0;

    timeLabel.text = @"Time Out";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:18:21.917

你不能 - 一旦你的应用程序关闭，它就不再运行，所以计时器也不会运行。

看看[本地通知](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T12:20:19.093

当应用程序进入后台时，在**–(void)applicationDidEnterBackground:**应用程序委托方法**中，在 nsuserdefault 中添加当前计数器值和当前时间**。

现在，当应用程序在此之前变为活动状态时**-(void)applicationWillEnterForeground:**将在该方法中调用，以获取应用程序在后台的总秒数，即**（应用程序的当前时间）-（应用程序进入后台的时间，存储在 nsuserdefault 中）以秒为单位计算**

所以在 –(void)applicationWillEnterForeground 中也添加这个：

```
 if((seconds calculated) > (28800 - (current counter value stored in nsuserdefault)))
 {
    // stop timer as it has gone beyond eight hours
 } 
 else
 {
  // continue task
 } 
```

# gis - 以编程方式转换出 TOPO50

> ID：10869837
> 
> 赞同：0
> 
> 时间：2012-06-03T11:15:45.507
> 
> 标签：gis, wgs84

我有一组参考 NZ TOPO50 位置的数据。我一直在努力研究如何将它们转换成有用的东西，比如 WGS84 lat/lon。

我已经浏览了[http://www.linz.govt.nz](http://www.linz.govt.nz)上的文档，但仍然卡住了。

例如，“BA32 582206”变为“36 50 50S 174 46 28E”。我发现 NZ-topo-50-map-sheets.xls 有一个 5 点多多边形来描述 BAS32，但我无法弄清楚 58/2 和 20/6 如何分别变为 174 46 28E 和 36 50 50S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:26:25.963

Use the online tool at [http://apps.linz.govt.nz/coordinate-conversion/index.aspx](http://apps.linz.govt.nz/coordinate-conversion/index.aspx)

choose as input coordinates system "New Zealand Transverse Mercator Projection" and as output coordniate system "World Geodetic System 1984"

Your input coordinates should be something like

5413457 North 1528677 East

Than you get your WGS84 Coordinates.

# c# - C# 中 NotifyIcon 的 ContextMenuStrip 的事件处理程序

> ID：10869839
> 
> 赞同：0
> 
> 时间：2012-06-03T11:16:03.673
> 
> 标签：c#, .net, winforms, notifyicon, contextmenustrip

我想为 a 编写一个点击事件`ContextMenuStrip`。我已将此上下文菜单条链接到`NotifyIcon`.

我怎样才能做到这一点？这是我使用的代码：

```
ContextMenuStrip checkers_contact_menu = new ContextMenuStrip();
checkers_contact_menu.Items.Add("Open Mailbox");
checkers_contact_menu.Items.Add("About");
alert_sender.ContextMenuStrip = checkers_contact_menu; 
```

我试过这个

```
ContextMenuStrip checkers_contact_menu = new ContextMenuStrip();
checkers_contact_menu.Items.Add("Open Mailbox",null,openMailBoxToolStripMenuItem_Click);

private void openMailBoxToolStripMenuItem_Click(object sender, ToolStripItemClickedEventArgs e)
{
  MessageBox.Show("Mail box");
} 
```

但我收到一个错误说

> 错误 1 ​​'System.Windows.Forms.ToolStripItemCollection.Add(string, System.Drawing.Image, System.EventHandler)' 的最佳重载方法匹配有一些无效参数

PS：代码正在运行，我有事件处理程序`ToolStripItemClickedEventArgs e`应该是`EventArgs e`。现在代码工作正常。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:33:17.300

您需要存根事件处理程序方法：

```
private void aboutToolStripMenuItem_Click(object sender, EventArgs e) {
   MessageBox.Show("About");
} 
```

然后在添加菜单项时，将事件处理程序方法指定为其参数之一：

```
checkers_contact_menu.Items.Add("About", null, aboutToolStripMenuItem_Click); 
```

# php - 将 SOAP 数据放入 php 数组

> ID：10869841
> 
> 赞同：0
> 
> 时间：2012-06-03T11:16:04.797
> 
> 标签：php, sql, xml, soap

我对 SOAP 很陌生，并且为此苦苦挣扎！

我正在调用来自 sql 数据库的 SOAP 响应

```
$client = new SoapClient("url......");
$soapquery = array('CoCode' => $cocode, 'WAPassword' => $webpass, 'strSQL' => $sqlt);
$soapresult = $client->SQL($soapquery);
$balance = $soapresult->SQLResult;
print_r($balance); 
```

结果在 Chrome 中显示为请求的值，但在检查源时它显示为 xml

```
<NewDataSet>
  <Table>
    <TOTAL>3348.1200</TOTAL>
  </Table>
</NewDataSet> 
```

我如何将这些信息放入 PHP 字符串，或者如果我将多个字段调用到数组中？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:54:30.077

我不知道为什么 soapClient 不解析您的响应，但为了快速修复，您可以使用 php 函数[simplexml_load_string](http://php.net/manual/fr/function.simplexml-load-string.php)。

这是一个示例：[如何在没有 SoapClient 的情况下解析 SOAP 响应](https://stackoverflow.com/questions/3928350/how-to-parse-soap-response-without-soapclient)

# go - 如何在 Go 测试中使用调试消息进行断言？

> ID：10869843
> 
> 赞同：5
> 
> 时间：2012-06-03T11:16:25.707
> 
> 标签：go

我想做这个：

```
test.FailNow("My Message") 
```

但`test.T.FailNow`不接受消息。我目前正在做：

```
log.Println("Expected exception but got none")
test.FailNow() 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T11:20:28.723

请参阅：[http](http://golang.org/pkg/testing/#T.Fatal) ://golang.org/pkg/testing/#T.Fatal（和 Fatalf）

文档说：“Fatal 相当于 Log() 后跟 FailNow()。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T12:50:31.857

我构建了一个小帮助包，作为**Tideland Common Go Library**的一部分（参见[http://code.google.com/p/tcgl/](http://code.google.com/p/tcgl/)）。API 文档可以在[http://go.pkgdoc.org/code.google.com/p/tcgl/asserts](http://go.pkgdoc.org/code.google.com/p/tcgl/asserts)找到。

# c# - 在课堂上查找姓名

> ID：10869844
> 
> 赞同：-3
> 
> 时间：2012-06-03T11:16:26.513
> 
> 标签：c#, wpf

我创建了类，我需要在其中按名称查找 TextBox。我正在使用它，但这里有一个问题，命名空间中不存在 FindName。

```
object component = this.FindName(componentName);  
TextBox child = component as TextBox; 
```

我可以在课堂上使用 FindName 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:21:32.390

您应该使用`this.FindControl`（当然，`this' 是可选的）。

# css - 使用LESS CSS将宽度计算为百分比减去边距

> ID：10869849
> 
> 赞同：1
> 
> 时间：2012-06-03T11:17:00.787
> 
> 标签：css, twitter-bootstrap, less

我在我的 CMS 应用程序中使用 Twitter Bootstrap 网格系统。

当用户建立一个页面时，他们可以在一行中添加任意数量的列。考虑这一行：

```
<div class="span9 row">
    <div class="span5">span5</div>
    <div class="span4">span4</div>
</div> 
```

我想要做的是添加一个功能，用户可以设置一行以在其中的列之间平均分配其宽度。

所以`span5`and`span4`类将被覆盖。这本质上就像一个表格行，但我认为制作该行`display: table-row`很麻烦，而且它可能会破坏 TwBootstrap 网格的响应特性。

我想避免的是这样定义每个宽度组合：

```
<div class="span9 row shared child-count-2">
    <div class="span5">span5</div>
    <div class="span4">span4</div>
</div> 
```

在 CSS 中：

```
.row.span9.shared.child-count-2 > div {
    width: 340px;
} 
```

由于我已经在为 CSS 使用 LESS，我认为可能有一个方便的计算可以使这项工作。

问题是指定 50% 宽度没有考虑`20px`到`margin-left`. 所以我需要取行的宽度，每列减去 20px。然后将剩余的宽度除以列数。

另外，我想避免使用 JavaScript。我不喜欢渲染 99% 的视图，然后在脚本中进行调整。如果脚本执行有微小的延迟，用户会看到布局闪烁。不好。

**那么，有没有办法从 LESS/CSS 做到这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:54:54.360

您可以使用 LESS 来实现。使用 LESS，您可以使用 JavaScript 表达式的求值，将它们包装成反引号：

```
@var: `"hello".toUpperCase() + '!'`; 
```

因此，您还可以使用诸如`document.getElementById('myId').width`获取元素的宽度之类的方法。查看[lesscss.org](http://lesscss.org/)并转到“JavaScript 评估”部分。

如果您需要更多帮助，尽管问！:)

# ruby - Ruby 语法中“#{}”标记的正式术语是什么？

> ID：10869854
> 
> 赞同：10
> 
> 时间：2012-06-03T11:17:59.477
> 
> 标签：ruby, syntax, computer-science

### 的背景

我最近发布[了一个答案](https://stackoverflow.com/a/10869398/1301972)，我在其中不同地称为`#{}`文字、运算符和（在一个草稿中）“文字构造函数”。这个定义的软弱并没有真正影响答案的质量，因为问题更多的是它的作用以及如何找到它的语言参考，但我对无法准确地指出规范定义感到不满什么叫这个 Ruby 语法元素。

[Ruby 手册](http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#string)在[表达式替换](http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#exprsub)部分提到了这个语法元素，但并没有真正定义语法本身的术语。几乎所有对这种语言元素的引用都说它用于*字符串*插值，但没有定义它*是*什么。

### 维基百科定义

以下是一些 Wikipedia 定义，暗示此构造（严格来说）既不是文字也不是运算符。

1.  [文字（计算机编程）](http://en.wikipedia.org/wiki/Literal_%28computer_programming%29)
2.  [操作员（编程）](http://en.wikipedia.org/wiki/Operator_%28programming%29)

### 问题

有谁知道这个语言元素的正确术语是什么？如果是这样，你能给我一个正式的定义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T00:18:12.370

Ruby 的解析器调用 #{} 的“ **embexpr** ”运算符。这自然是嵌入式表达。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T13:23:56.583

我绝对不会称它为文字（更多的是，例如*字符串文字*或*数字文字*本身，但不是其中的一部分）也不是运算符；这些仅适用于例如二元或一元（中缀）运算符。

我要么只是在没有名词的情况下引用它（即用于字符串插值），要么可能将这些字符称为字符串插值序列或转义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T14:39:10.400

## TL;博士

最初，我假设：

> *根据源代码中的提示，嵌入式表达式*似乎是此标记最可能的定义。

事实证明这是真的，并且已经被 Ruby 2.x 文档正式验证。根据自最初编写此答案以来对[Ripper 文档](http://ruby-doc.org/stdlib-2.2.3/libdoc/ripper/rdoc/Ripper.html)`string_embexpr`的更新，似乎解析器标记被正式定义为，并且符号本身被称为“嵌入式表达式”。有关详细证实，请参阅此答案底部的*Ruby 2.x 更新部分。*

答案的其余部分仍然相关，特别是对于 Ruby 1.9.3 等较旧的 Ruby，用于开发原始答案的方法仍然很有趣。因此，我正在更新答案，但出于历史目的保留大部分原始帖子，即使*当前*答案现在可能更短。

## 基于 Ruby 1.9.3 源代码的 Pre-2.x 答案

### 相关答案

[这个答案](https://stackoverflow.com/a/10875052/1301972)引起了对 Ruby 源代码的关注，它在整个代码库中多次引用了*embexpr 。*@Phlip 建议这个变量是“EMBedded EXPRession”的缩写。这似乎是一个合理的解释，但是 ruby​​-1.9.3-p194 源代码和 Google（在撰写本文时）都没有在任何上下文中明确引用与*embexpr相关的术语**嵌入表达式*，无论是否与 Ruby 相关。

 *### 额外研究

对 Ruby 1.9.3-p194 源代码的扫描：

```
ack-grep -cil --type-add=YACC=.y embexpr .rvm/src/ruby-1.9.3-p194 |
    sort -rnk2 -t: |
    sed 's!^.*/!!' 
```

显示 9 个文件和 33 行，其中包含*embexpr 一词*：

```
test_scanner_events.rb:12
test_parser_events.rb:7
eventids2.c:5
eventids1.c:3
eventids2table.c:2
parse.y:1
parse.c:1
ripper.y:1
ripper.c:1 
```

特别令人感兴趣的是在**parse.y**和**ripper.y**野牛文件的第 4,176 行包含**string_embexpr 。**同样，**TestRipper::ParserEvents#test_string_embexpr 在 test_parser_events.rb****的**第 899 行和第 902 行包含对解析*#{}*的两个引用。

 *********在test_scanner_events.rb**中使用的扫描器也值得注意。该文件在**#test_embexpr_beg**和**#test_embexpr_end**中定义了在各种字符串表达式中扫描标记*#{expr}的测试。*测试同时引用了*embexpr*和*expr*，增加了“嵌入式表达式”确实是该事物的合理名称的可能性。

## Ruby 2.x 更新

由于这篇文章最初是写的，标准库的 Ripper 类的文档已经更新以正式识别令牌。[用法部分](http://ruby-doc.org/stdlib-2.2.3/libdoc/ripper/rdoc/Ripper.html#class-Ripper-label-Usage)提供了`"Hello, #{world}!"`一个示例，并部分说明：

> 在我们的内容中，`:string_literal`您会注意到两个`@tstring_content`，这是`Hello,`and的字面部分`!`。两个`@tstring_content`语句之间是一个`:string_embexpr`，其中*embexpr*是一个嵌入的表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:56:10.533

这个块帖子建议，它被称为“成语”： http: [//kconrails.com/2010/12/08/ruby-string-interpolation/](http://kconrails.com/2010/12/08/ruby-string-interpolation/)

维基百科文章似乎并不矛盾： [http ://en.wikipedia.org/wiki/Programming_idiom](http://en.wikipedia.org/wiki/Programming_idiom)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-09-22T01:47:57.203

#{} 称为占位符，用于用字符串引用变量。放“我的名字是#{my_name}”********

# tomcat - Tomcat在重负载时失败

> ID：10869860
> 
> 赞同：4
> 
> 时间：2012-06-03T11:18:40.083
> 
> 标签：tomcat, crash, load, timeout

我正在使用 tomcat server 7 (& JRE 1.6) 在 debian VPS 上运行一个基于 db 的重型 GWT 应用程序。我的应用程序包含许多 java servlet，它们通过 tomcat 连接池与 MySQL5 数据库通信（没有连接池 mysql 将在 3 分钟内崩溃！）
我的应用程序运行良好，而 tomcat 服务器上没有重负载，但是当在线用户和他们的请求增加，tomcat 服务器失败**，没有有用的日志或错误消息**（当我想访问运行在 tomcat 上的任何 Web 应用程序时，我只是收到连接超时错误）& 这个问题一直存在，直到我重置我的 tomcat 服务器。我知道我的 VPS 没有内存限制，也没有任何 MySQL 连接问题，所以我真的不知道会导致这种情况:(
这是 server.xml 中的主机标签（我有很多这样的虚拟主机，但所有的主机标签都是相似的）

```
<Host name="sub1.mydomain.com" appBase="/var/www/sites/gwt_app" >

    <Context path="" reloadable="true" docBase="myDocBase" 
     xmlValidation="false" xmlNamespaceAware="false" crossContext="true" >

    <Resource name="jdbc/mysql/db" auth="Container" type="javax.sql.DataSource"

    initialSize="3" maxActive="50" maxIdle="10" 
    maxWait="15000" removeAbandoned="true" removeAbandonedTimeout="120"
    validationQuery="select now();"

    username="user_1" password="pass" driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost:3306/db_1?useUnicode=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8&amp;connectionCollation=UTF8_PERSIAN_CI&amp;noAccessToProcedureBodies=true"
    />
    </Context>

    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="/var/www/sites/gwt_app_logs"  prefix="tomcat_access_" suffix=".log" pattern="common" resolveHosts="false"/>
</Host> 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T11:29:11.883

您需要提供有关资源利用率的更多详细信息。但根据您的描述，您可能遇到 HTTP 线程池耗尽的问题。默认情况下（使用 BIO 连接器）Tomcat 只能处理 200 个并发连接，而​​ AFAIK 可以在积压队列中保持这么多连接“暂停”。

这意味着只能同时处理 200 个连接，另外 100 个将等待池。第 301 个连接将被拒绝或超时。

以下是要检查的指针：

*   HTTP 线程池利用率
*   积压队列大小
*   垃圾收集活动

Tomcat 为此提供了有价值的[jmx](/questions/tagged/jmx "显示标记为“jmx”的问题") [指标](http://tomcat.apache.org/tomcat-7.0-doc/monitoring.html)。您可能还会发现我关于[从 Tomcat 挤压更多并发连接的](http://nurkiewicz.blogspot.no/2011/03/tenfold-increase-in-server-throughput.html)文章很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:39:36.567

您可以更改 /TOMCAT_DIR/bin/catalina.sh 中的 CATALINA_OPTS 参数以进行并发垃圾回收

```
CATALINA_OPTS="-XX:+UseConcMarkSweepGC -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCApplicationStoppedTime -Xloggc:/TOMCAT_DIR/logs/gc.log" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:10:57.663

BIO 连接器中最近的一个错误可能是这里的一个因素。

请参阅：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=53186](https://issues.apache.org/bugzilla/show_bug.cgi?id=53186)

但是，如果您的应用程序在使用 DB 连接池的情况下也在 3 分钟内崩溃，则您的应用程序或 DB 处理代码可能有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:27:42.333

使用tomcat集群和apache网络负载blanc

# database - 远程数据库的IP地址

> ID：10869862
> 
> 赞同：0
> 
> 时间：2012-06-03T11:19:05.513
> 
> 标签：database, oracle, oracle-apex

我在[http://apex.oracle.com/](http://apex.oracle.com/)上注册并在那里创建了一个测试模式，现在我正在尝试使用名为 sqlline 的工具从 unix 命令行连接到它，我正在尝试像这样连接：

```
 sqlline
 !connect jdbc:oracle:thin:@apex.oracle.com:1521:MY_DB username password oracle.jdbc.driver.OracleDriver 
```

但是出了点问题，你知道有可能知​​道我的架构的确切地址吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T07:50:33.057

据我所知，数据库不能直接访问，只能通过 Web 界面访问。

# c++ - 从单个集合中生成所有子集

> ID：10869866
> 
> 赞同：2
> 
> 时间：2012-06-03T11:19:40.090
> 
> 标签：c++

我试图理解从一组中生成所有子集的代码。这是代码

```
#include <stdio.h>

/* Applies the mask to a set like {1, 2, ..., n} and prints it */
void printv(int mask[], int n) {
    int i;
    printf("{ ");
    for (i = 0; i < n; ++i)
        if (mask[i])
            printf("%d ", i + 1); /*i+1 is part of the subset*/
    printf("\\b }\\n");
}

/* Generates the next mask*/
int next(int mask[], int n) {
    int i;
    for (i = 0; (i < n) && mask[i]; ++i)
        mask[i] = 0;

    if (i < n) {
        mask[i] = 1;
        return 1;
    }
    return 0;
}

int main(int argc, char *argv[]) {
    int n = 3;

    int mask[16]; /* Guess what this is */
    int i;
    for (i = 0; i < n; ++i)
        mask[i] = 0;

    /* Print the first set */
    printv(mask, n);

    /* Print all the others */
    while (next(mask, n))
        printv(mask, n);

    return 0;
} 
```

我不明白`for (i = 0; (i < n) && mask[i]; ++i)`下一个函数中这条线背后的逻辑。下一个掩码是如何在这里生成的？

代码和算法看这里： [http ://compprog.wordpress.com/2007/10/10/generating-subsets/](http://compprog.wordpress.com/2007/10/10/generating-subsets/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T11:29:56.857

这只是[二进制计数的](http://en.wikipedia.org/wiki/Binary_numeral_system#Counting_in_binary)一种实现。基本思想是将最不重要的（最后一个）零更改为一，并将其​​后面的所有零更改为零。如果将“下一个”掩码解释为二进制数，则“下一个”掩码将比前一个“多一个”。

因为数组是按个位在前排列的，所以它从传统的数字符号向后看。

与其使用布尔值数组，不如使用一个数字和`++`运算符的二进制表示中的位。

```
int next(int &mask, int n) { // using C++ reference
    if ( mask == ( 1u << n ) - 1 ) return 0;
    ++ mask;
    return 1;
}

void printv(int mask, int n) {
    int i;
    printf("{ ");
    for (i = 0; i < n; ++i)
        if (mask & ( 1 << i ) )
            printf("%d ", i + 1); /*i+1 is part of the subset*/
    printf("\\b }\\n");
} 
```

自从您这样标记问题以来，我已经使用了一点 C++，但是发布的代码是纯 C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T11:51:42.923

去年我参加了第 6 届 ITAT 比赛的 C 语言比赛，在那里我通过在掩码的帮助下生成所有组合来解决第二个问题（尽管它可能不是该问题的最佳解决方案。）

当您尝试导出 的所有子集时`{a,b,c}`，您可以这样做：

1.  您可能会或可能不会采取第一个元素`a`。
2.  可能会或可能不会采取第二个元素`b`。
3.  对`c`.

因此，您最终得到了一组 3 个接受或不接受的选择。这可以用二进制或布尔值表示：表示采用`1`，而不采用`0`。

你得到以下八个面具：（按顺序`a,b,c`）

`000 100 010 110 001 101 011 111`

生成下一个掩码`110`：

1.  元素 0 是`1`. 切换到`0`.
2.  元素 1 是`1`. 切换到`0`.
3.  元素 2 是`0`。切换到`1`.
4.  现在你有`001`which 是下一个掩码，它生成 subset `{c}`。

`for (i = 0; (i < n) && mask[i]; ++i)`正是这样做的。

1.  从元素 0 开始。
2.  而（`i`不超过你的掩码长度和元素 i 是`1`）
3.  执行将 i 翻转为`0`和 ++i 的正文代码（转到下一个元素）。转到 2（检查）。

如果当前掩码是`111`（最后一个掩码），则`next()`函数简单地返回`1`以指示 END。

（PS 一个非零整数总是代表真。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:30:34.847

问题中的循环从数组的开头开始，并将所有 1 设置为 0，直到遇到 0。下一条语句将此 0 设置为 1（如果可能）。所以会发生什么： 0,0,0 -> 1,0,0 -> 0,1,0 -> 1,1,0 -> 0,0,1... 我不是铁杆 C 程序员，但我认为这可以通过使用一个位字段并迭代地递增 1 来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T11:33:03.877

```
for (i = 0; (i < n) && mask[i]; ++i) 
```

1.  为了：
2.  从 0 开始，每次将 i 加 1
3.  当 i 小于 n 并且设置了位置 i 的掩码数组中的位时不要停止

这真的很简单：for 语句的 3 个部分：初始状态；结束条件；手术。

因此，如果您可以理解`for (i=0; i < 5; i++)`意味着从 0 开始并每次将 i 递增 1 直到它小于 5，您就可以理解您询问的更复杂的 for 循环。

在这种情况下，它通过循环寻找未设置的掩码的第一个元素，清除每个元素，然后执行一些其他操作 - 即如果没有设置掩码位，并且它到达末尾的数组。在我看来，这是一种仅将数组的一个元素设置为 1 的简单方法，依次得到结果：100、010、001

# json - JSON => GoogleCharts 格式

> ID：10869870
> 
> 赞同：0
> 
> 时间：2012-06-03T11:20:15.360
> 
> 标签：json, charts, datatable, visualization

我拼命想让我的 GoogleChart 正常工作。但是，此代码始终会引发错误：

```
 function drawChart() 
        { 
          var data = new google.visualization.DataTable(); 
          data.addColumn('number', 'hour'); 
          data.addColumn('number', 'TriggerCount'); 
          var JsonManuallyEncoded = '{1:{1:01,2:4},2:{1:03,2:4},3:{1:04,2:48},4:{1:05,2:59},5:{1:06,2:59},6:{1:07,2:87},7:{1:08,2:62},8:{1:09,2:46},9:{1:10,2:61},10:{1:11,2:71},11:{1:12,2:54},12:{1:13,2:61},13:{1:14,2:89},14:{1:15,2:58},15:{1:16,2:122},16:{1:17,2:108},17:{1:18,2:64},18:{1:19,2:50},19:{1:20,2:10},20:{1:21,2:18}};'
          data.addRows(JsonManuallyEncoded);

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div')); 
        chart.draw(data);} 
```

Firefox 控制台说：“给 addRows 的参数必须是数字或数组”。我怀疑 JSON 字符串的格式不正确，但我不知道出了什么问题。有人可以找出我的错误吗？这可能是微不足道的，但我已经在这上面花了几个小时......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:56:27.257

您是否查看过[addRows](https://developers.google.com/chart/interactive/docs/reference#DataTable_addRows)的文档？但是您不应该将行数据`addRows`作为 JSON 编码的字符串传递给，您应该传递一个数组数据结构数组。我认为可能还有其他用于传递 JSON 字符串的 API 函数，因此我建议您阅读文档并查看示例。

# c# - 如何将帐户添加到网站 ASP.NET C#

> ID：10869871
> 
> 赞同：0
> 
> 时间：2012-06-03T11:20:19.340
> 
> 标签：c#, asp.net

`App_Data`我创建了一个新的 ASP.NET、C# 空网站，文件夹中有我自己的数据库。我在解决方案中也有一个母版页。

无论如何，我想创建一个登录页面，但我的问题是，在浏览网站时如何知道用户是否登录。

更详细地说，当用户打开主页时，它会有一个标签，上面写着“登录”并链接到`/login.aspx`

但是当用户登录时，我希望顶部的“登录”标签更改为`Username`+ `a "Logout" label`（这当然会注销用户）。

我的问题是，假设我转到另一个页面，比如说`/AboutUs.aspx`，我怎么知道是否有人登录以及谁登录了？

我用谷歌搜索了很多，看到了很多解决方案，包括`Membership Provider`and `LoginView`，但我都不理解它们（是的，我读过很多文章；甚至 MSDN 文章）。

我真的不习惯用 ASP.NET 编程。

请提供任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:02:46.053

如您所说，如果您使用自己的数据库来存储用户名和密码，则需要自己处理身份验证过程。最简单的方法是通过继承 System.Web.Security.MembershipProvider 类并重写基本方法（如 bool ValidateUser(string userName, string password)）来编写自己的 Membership 提供程序。然后，您需要通过 web.config 将您的提供商插入您的网站。

另一方面，您可以使用内置的 Membership 提供程序及其数据库。为此，您需要将用户数据复制到此数据库中，该数据库将在您的应用程序第一次使用会员功能时创建（例如，在 VS 中执行 PROJECT -> ASP.NET 配置菜单命令时）。它的名称和位置取决于 web.config 中的连接字符串。如果您选择使用这种方式，一旦您的用户通过身份验证，您将能够在服务器端使用以下代码看到它：

```
User.Identity.IsAuthenticated 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T11:30:10.933

在 ASP.NET 中，我建议使用 Forms 身份验证。 [http://msdn.microsoft.com/en-us/library/ff647070.aspx](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

当用户登录时，用户会话中会有一个 IIdentity 对象，您可以使用该对象来确定用户是否已通过身份验证。但是，您实际上并不需要太多使用它，因为 web.config 将被配置为将所有未经身份验证的用户扔回您的登录页面。

```
<system.web>
  <authentication mode="Forms">
    <forms loginUrl="Login.aspx"
           protection="All"
           timeout="30"
           name=".ASPXAUTH" 
           path="/"
           requireSSL="false"
           slidingExpiration="true"
           defaultUrl="default.aspx"
           cookieless="UseDeviceProfile"
           enableCrossAppRedirects="false" />
  </authentication>
</system.web>

<system.web>
  <authorization>
    <deny users="?" />
  </authorization>
</system.web> 
```

# objective-c - 更改 UIPickerView 主体颜色

> ID：10869873
> 
> 赞同：0
> 
> 时间：2012-06-03T11:20:32.383
> 
> 标签：objective-c

在选取器视图周围有一个灰色的苹果矩形（选取器的身体），我不喜欢。我找不到任何属性来改变它的颜色或不透明度，更温和。

任何的想法 ？

我尝试过：

```
 picker1.backgroundColor=[UIColor clearColor]; 
```

它不会清洁**内部**颜色或**外部（身体）**颜色。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:26:02.017

这些链接应该可以帮助您：

[如何更改 UIPickerView 中的背景颜色？](https://stackoverflow.com/questions/1968288/how-to-change-the-background-color-in-uipickerview)

[更改 UIPickerView 背景](https://stackoverflow.com/questions/965375/change-uipickerview-background)

[论坛问题](http://forums.macrumors.com/showthread.php?t=558988)

[您可以在本教程中下载 Photoshop 模板](http://blog.blackwhale.at/?p=761)

它不可能以编程方式做到这一点......

# java - Signed Jar & doPrivileged 不能解决访问控制异常

> ID：10869877
> 
> 赞同：2
> 
> 时间：2012-06-03T11:21:25.020
> 
> 标签：java, security, applet, accesscontrolexception

我正在尝试调用文件选择器选项并将文件名作为输入。但我得到了 java `AccessControlException`。这在我使用 Web 浏览器启动小程序时工作正常，但在使用小程序查看器尝试时抛出异常。

我试过以下

1.  使用 keytool 和 jarsigner JDK1.6.24 对 JAR 进行签名
2.  使用`AccessController.doPrivileged`.

但是我仍然遇到以下相同的异常。

```
 Exception in thread "AWT-EventQueue-1" java.security.AccessControlException: acc
ess denied (java.util.PropertyPermission user.dir read)
        at java.security.AccessControlContext.checkPermission(AccessControlConte
xt.java:374)
        at java.security.AccessController.checkPermission(AccessController.java:
546)
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
        at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:12
85)
        at java.lang.System.getProperty(System.java:650)
        at java.io.Win32FileSystem.getUserPath(Win32FileSystem.java:296)
        at java.io.Win32FileSystem.resolve(Win32FileSystem.java:312)
        at java.io.File.getAbsolutePath(File.java:501)
        at javax.swing.filechooser.WindowsFileSystemView.isFloppyDrive(FileSyste
mView.java:734)
        at javax.swing.plaf.basic.BasicFileChooserUI$BasicFileView.getIcon(Basic
FileChooserUI.java:1200)
        at javax.swing.JFileChooser.getIcon(JFileChooser.java:1538)
        at javax.swing.plaf.metal.MetalFileChooserUI$DirectoryComboBoxRenderer.g
etListCellRendererComponent(MetalFileChooserUI.java:854)
        at javax.swing.plaf.basic.BasicListUI.updateLayoutState(BasicListUI.java
:1344)
        at javax.swing.plaf.basic.BasicListUI.maybeUpdateLayoutState(BasicListUI
.java:1294)
        at javax.swing.plaf.basic.BasicListUI$Handler.valueChanged(BasicListUI.j
ava:2611)
        at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSel
ectionModel.java:167)
        at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSel
ectionModel.java:147)
        at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSel
ectionModel.java:194)
        at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSele
ctionModel.java:388)
        at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSele
ctionModel.java:398)
        at javax.swing.DefaultListSelectionModel.setSelectionInterval(DefaultLis
tSelectionModel.java:442)
        at javax.swing.JList.setSelectedIndex(JList.java:2179)
        at javax.swing.plaf.basic.BasicComboPopup.setListSelection(BasicComboPop
up.java:1126)
        at javax.swing.plaf.basic.BasicComboPopup.access$300(BasicComboPopup.jav
a:46)
        at javax.swing.plaf.basic.BasicComboPopup$Handler.itemStateChanged(Basic
ComboPopup.java:964)
        at javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1205)
        at javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1262)
        at javax.swing.JComboBox.contentsChanged(JComboBox.java:1309)
        at javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.j
ava:100)
        at javax.swing.plaf.metal.MetalFileChooserUI$DirectoryComboBoxModel.setS
electedItem(MetalFileChooserUI.java:1001)
        at javax.swing.plaf.metal.MetalFileChooserUI$DirectoryComboBoxModel.addI
tem(MetalFileChooserUI.java:972)
        at javax.swing.plaf.metal.MetalFileChooserUI$DirectoryComboBoxModel.acce
ss$900(MetalFileChooserUI.java:897)
        at javax.swing.plaf.metal.MetalFileChooserUI.doDirectoryChanged(MetalFil
eChooserUI.java:648)
        at javax.swing.plaf.metal.MetalFileChooserUI.access$1200(MetalFileChoose
rUI.java:38)
        at javax.swing.plaf.metal.MetalFileChooserUI$5.propertyChange(MetalFileC
hooserUI.java:734)
        at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSup
port.java:339)
        at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSup
port.java:276)
        at java.awt.Component.firePropertyChange(Component.java:8154)
        at javax.swing.JFileChooser.setCurrentDirectory(JFileChooser.java:568)
        at javax.swing.JFileChooser.<init>(JFileChooser.java:334)
        at javax.swing.JFileChooser.<init>(JFileChooser.java:286)
        at StegnoMainFrame.selectFileAction(StegnoMainFrame.java:596)
        at StegnoMainFrame.access$800(StegnoMainFrame.java:48)
        at StegnoMainFrame$4.actionPerformed(StegnoMainFrame.java:201)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:19
95)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.jav
a:2318)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel
.java:387)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242
)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonL
istener.java:236)
        at java.awt.Component.processMouseEvent(Component.java:6289)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
        at java.awt.Component.processEvent(Component.java:6054)
        at java.awt.Container.processEvent(Container.java:2041)
        at java.awt.Component.dispatchEventImpl(Component.java:4652)
        at java.awt.Container.dispatchEventImpl(Container.java:2099)
        at java.awt.Component.dispatchEvent(Component.java:4482)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577
)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)

        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
        at java.awt.Container.dispatchEventImpl(Container.java:2085)
        at java.awt.Component.dispatchEvent(Component.java:4482)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:644)
        at java.awt.EventQueue.access$000(EventQueue.java:85)
        at java.awt.EventQueue$1.run(EventQueue.java:603)
        at java.awt.EventQueue$1.run(EventQueue.java:601)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessCo
ntrolContext.java:87)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessCo
ntrolContext.java:98)
        at java.awt.EventQueue$2.run(EventQueue.java:617)
        at java.awt.EventQueue$2.run(EventQueue.java:615)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessCo
ntrolContext.java:87)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:614)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:269)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:184)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:174)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)

        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)

        at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

请在我使用的代码中找到我的代码部分`doPrivileged`。

```
private boolean selectFileAction(final String titleTextIn, final JTextField fileLocIn, final boolean allowFileFilter, 
        final boolean setOutFile)
{
    String isOkSelected = "false";
    final JFileChooser chooser = new JFileChooser();
    isOkSelected = (String) AccessController.doPrivileged(new PrivilegedAction() {
        public Object run() {
            if (allowFileFilter)
            {
                FileNameExtensionFilter filter = new FileNameExtensionFilter("GIF Images", "gif");
                chooser.setFileFilter(filter);
            }
            if (setOutFile)
            {
                if (hideRadiButton.isSelected())
                {
                    if (titleTextIn.contains("Key"))
                        chooser.setSelectedFile(new File("enckey"));
                    else
                        chooser.setSelectedFile(new File("output.gif"));
                }
                else
                    chooser.setSelectedFile(new File("output.txt"));
            }
            chooser.setDialogTitle(titleTextIn);
            int returnVal = chooser.showOpenDialog(getContentPane());
            boolean tempSelected = false;
            if(returnVal == JFileChooser.APPROVE_OPTION) {
                tempSelected = true;
                fileLocIn.setText(chooser.getSelectedFile().getAbsolutePath());
            }
            System.loadLibrary("awt");
            return tempSelected;
        }
    });

    return Boolean.parseBoolean(isOkSelected);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:11:24.640

> 当我使用网络浏览器启动小程序时，这很好用

所以没有（真正的）问题。

> ..但是用appletviewer 尝试时抛出异常。

SDK 配置的最新版本的小程序查看器是**沙盒**的，即使代码已签名并且您选择了信任它的菜单选项。从 IDE 启动的 Applet 查看器通常具有具有所有权限（即使未签名）的安全策略。

# python - 我该怎么做才能使 Eclipse PyDev 编辑器更具反应性？

> ID：10869881
> 
> 赞同：3
> 
> 时间：2012-06-03T11:22:06.070
> 
> 标签：python, eclipse, ide, pydev

我使用 Eclipse 和[PyDev](http://pydev.org/)来开发 Python 代码，我不想错过它所有有用的 IDE 功能。有一件事有点烦人：我输入和源代码更改之间的延迟有点高。（不像 Sublime Text 2 那样活泼。）

这是由于某些可以禁用的编辑器功能的开销造成的吗？我可以做些什么来调整我的编辑器设置以提高速度和响应能力吗？

文件大小可能是一个因素，但很难说。小文件速度不够快。

系统信息：

MacBookAir3,2

Mac OS X 10.6.8

java 版本“1.6.0_31”Java(TM) SE 运行时环境（构建 1.6.0_31-b04-415-10M3646）Java HotSpot(TM) 64 位服务器 VM（构建 20.6-b01-415，混合模式）

Eclipse IDE for Java Developers 版本：Indigo Service Release 2 Build id：20120216-1857

PyDev 版本 2.5.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:08:57.197

如果您使用的是 OpenJDK，切换到 Oracle JDK 也可以提高响应速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:35:52.923

这可能不是您想要的，但无论如何：

*   停止并停用不必要的服务。
*   增加内存
*   配置或停用常驻软件，例如防病毒软件等。如果您可以在短时间内停用以了解它是否会改变某些内容，而不会影响安全性。

*   根据您的主板规格切换您的 CPU，有时主板配备低成本 CPU，并且可以升级。

*   获得更大更快的机器

# android - 从我自己的应用程序中获取当前屏幕视图

> ID：10869883
> 
> 赞同：1
> 
> 时间：2012-06-03T11:22:37.233
> 
> 标签：android

我正在从我自己的应用程序运行一个外部应用程序，当这个应用程序打开时，我想在我自己的应用程序中查看该外部应用程序。这样我就可以捕获它的屏幕截图。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:28:29.527

我不认为那是可能的。应用程序甚至活动之间的通信仅限于通过意图相互传递数据。我认为跨应用程序共享对对象的引用是不可能的。请纠正我。

如果他们允许您在自己的窗口中启动外部应用程序，那么这样的事情是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:53:09.300

我做了一些搜索，很可能不可能，但是我找到了一种可能的方法。看看[这个](https://stackoverflow.com/questions/10481715/programmatically-take-a-screenshot-from-service)链接，它指出

> 或者，如果您想截取当前设备屏幕（任何应用程序）的屏幕截图，那么您必须获得 root 权限，并读取帧缓冲区以获得当前屏幕的原始数据，然后将其转换为位图或您可以执行的任何图片文件在您的服务中。

这意味着每当您的应用程序启动应用程序时，您都需要创建一个读取`framebiffer`.

请参阅[this](https://stackoverflow.com/questions/5293615/how-can-i-get-root-permissions-through-the-android-sdk)和[this](http://www.stealthcopter.com/blog/2010/01/android-requesting-root-access-in-your-app/)，这些链接也与您的问题有关。看看它是否有效。

希望这可以帮助。

# android - android 活动在其进程被杀死后如何“恢复”？

> ID：10869888
> 
> 赞同：4
> 
> 时间：2012-06-03T11:23:08.590
> 
> 标签：android, android-lifecycle

正如开发指南中所说，活动可以在“应用程序进程被终止”和“用户导航到活动”之后*恢复。*首先，我从来没有见过这样的事情发生。当它的进程被杀死时，我似乎无法“导航回”到一个 Activity，在进程消失后，Activity 只是从堆栈中消失了。

如果发生这样的事情，它究竟会如何发生？

我看到一个奇怪但好的事情是：有一个`Activity A1`启动`Activity A2`另一个应用程序。现在`A2`是前台活动。当内存变低时，至少在模拟器上（我可以很容易地吃掉内存），`A2`将被杀死而不是`A1`.

例如，我担心的是这样的事情：我的应用程序在堆栈上有两个活动，我们称它们为`A0`and `A1`。并且`A1`，再次推出`Activity A2`了另一个应用程序。当`A0`即将启动`A1`时，它给出`A1`了一个数据对象的引用`D`。现在，如果在 A2 处于前台时杀死`A0`and的进程，也会丢失。当A2完成后，似乎至少需要恢复。因此将不得不处理. 更重要的是，A1 必须找到一种方法来告诉仍然死去的人对 restore 的引用。这很复杂还是我走错了路？`A1``D``A1``A1``D``A0``D`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T05:26:15.527

系统将尽其所能保持前台应用程序的活动。

当`Intent`进程即将被杀死时，系统会保存用于启动活动的内容。

这样，一旦用户返回到已被杀死的应用程序，应用程序就会恢复并`Intent`触发相同的活动以启动活动，包括它可能拥有的所有额外内容。

这意味着您传递`Intent`给启动活动的任何数据，在活动恢复时仍然存在。

您可能没有注意到它，但 Android 确实会在日常使用中杀死并重新创建进程，这就是该平台提供的无缝多任务处理的全部意义所在。

您应该始终使用“开发”设置中的“不保留活动”选项来测试您的应用程序。

# c# - 如何从 asp.net webservice 获取会话值

> ID：10869890
> 
> 赞同：0
> 
> 时间：2012-06-03T11:23:19.603
> 
> 标签：c#, asp.net, vb.net, web-services

如标题所示，如何从中获取`session`价值`asp.net web-service`？

`Session("Id")`例如阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:28:28.967

你的意思是：

```
HttpContext.Current.Session.SessionID 
```

（正如我在评论中所写，需要更多信息）

# dotcloud - Dotcloud supervisord 显示错误但进程正在运行

> ID：10869898
> 
> 赞同：2
> 
> 时间：2012-06-03T11:24:20.763
> 
> 标签：dotcloud, supervisord

我的 dotcloud 设置（带有 rabbitmq 的 django-celery）一周前运行良好——进程启动正常，日志也很干净。但是，我最近拒绝了（没有更新任何代码），现在日志显示进程无法启动，即使它们似乎正在运行。

监督日志

```
dotcloud@hack-default-www-0:/var/log/supervisor$ 更多 supervisord.log
2012-06-03 10:51:51,836 CRIT 将 uid 设置为用户 1000
2012-06-03 10:51:51,836 警告包含额外文件“/etc/supervisor/conf.d/uwsgi.c
解析期间的“关闭”
2012-06-03 10:51:51,836 警告包含额外文件“/home/dotcloud/current/supervi
sord.conf”在解析期间
2012-06-03 10:51:51,938 INFO RPC 接口“主管”已初始化
2012-06-03 10:51:51,938 WARN cElementTree 未安装，使用较慢的 XML 解析器
 用于 XML-RPC
2012-06-03 10:51:51,938 CRIT 服务器“unix_http_server”在没有任何 HTTP 的情况下运行
认证检查
2012-06-03 10:51:51,946 INFO 守护进程
2012-06-03 10:51:51,947 INFO supervisord 从 pid 144 开始
2012-06-03 10:51:53,128 产生的信息：'celerycam'，pid 159
2012-06-03 10:51:53,133 信息产生：“apnsd”与 pid 161
2012-06-03 10:51:53,148 信息产生：“djcelery”，pid 为 164
2012-06-03 10:51:53,168 产生的信息：“uwsgi”，pid 为 167
2012-06-03 10:51:53,245 信息已退出：djcelery（退出状态 1；未预期）
2012-06-03 10:51:53,247 信息已退出：celerycam（退出状态 1；未预期）
2012-06-03 10:51:54,698 产生的信息：带有 pid 176 的“celerycam”
2012-06-03 10:51:54,698 INFO 成功：apnsd 进入 RUNNING 状态，进程有 s
超过 1 秒 (startsecs)
2012-06-03 10:51:54,705 信息产生：“djcelery”，pid 177
2012-06-03 10:51:54,706 INFO 成功：uwsgi 进入 RUNNING 状态，进程有 s
超过 1 秒 (startsecs)
2012-06-03 10:51:54,731 信息已退出：djcelery（退出状态 1；未预期）
2012-06-03 10:51:54,754 信息已退出：celerycam（退出状态 1；未预期）
2012-06-03 10:51:56,760 产生的信息：带有 pid 178 的“celerycam”
2012-06-03 10:51:56,765 信息生成：“djcelery”，pid 为 179
2012-06-03 10:51:56,790 信息已退出：celerycam（退出状态 1；未预期）
2012-06-03 10:51:56,791 信息已退出：djcelery（退出状态 1；未预期）
2012-06-03 10:51:59,798 信息产生：'celerycam' pid 180
2012-06-03 10:52:00,538 信息产生： 'djcelery' 与 pid 181
2012-06-03 10:52:00,565 信息已退出：celerycam（退出状态 1；未预期）
2012-06-03 10:52:00,571 信息放弃：celerycam 进入致命状态，st 太多
艺术重试太快
2012-06-03 10:52:00,573 信息已退出：djcelery（退出状态 1；未预期）
2012-06-03 10:52:01,575 信息放弃：djcelery 进入 FATAL 状态，STA 太多
rt 重试太快
dotcloud@hack-default-www-0:/var/log/supervisor$

```

djerror 日志：

```
dotcloud@hack-default-www-0:/var/log/supervisor$ 更多 djcelery_error.log
回溯（最近一次通话最后）：
  文件“hack/manage.py”，第 2 行，在
    从 django.core.management 导入 execute_manager
ImportError：没有名为 django.core.management 的模块
回溯（最近一次通话最后）：
  文件“hack/manage.py”，第 2 行，在
    从 django.core.management 导入 execute_manager
ImportError：没有名为 django.core.management 的模块
回溯（最近一次通话最后）：
  文件“hack/manage.py”，第 2 行，在
    从 django.core.management 导入 execute_manager
ImportError：没有名为 django.core.management 的模块
回溯（最近一次通话最后）：
  文件“hack/manage.py”，第 2 行，在
    从 django.core.management 导入 execute_manager
ImportError：没有名为 django.core.management 的模块
dotcloud@hack-default-www-0:/var/log/supervisor$

```

statusctrl 显示*一些*进程正在运行，但 pid 不同。此外，芹菜功能似乎工作正常。消息已处理，我可以在 django 管理界面中看到正在处理的消息（dj celery cam 正在运行）。

```
#supervisorctl状态
apnsd 运行 pid 225，正常运行时间 0:00:44
celerycam RUNNING pid 224，正常运行时间 0:00:44
djcelery RUNNING pid 226，正常运行时间 0:00:44

```

Supervisord.conf 文件：

```
[程序：djcelery]
目录 = /home/dotcloud/current/
命令 = python hack/manage.py celeryd -E -l info -c 2
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

[程序：celerycam]
目录 = /home/dotcloud/current/
命令 = python hack/manage.py celerycam
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

```

[http://jefurii.cafejosti.net/blog/2011/01/26/celery-in-virtualenv-with-supervisord/](http://jefurii.cafejosti.net/blog/2011/01/26/celery-in-virtualenv-with-supervisord/)说问题可能是使用的python不正确，所以我明确指定了python在supervisord文件中。它现在可以工作了，但它没有解释我在上面看到的内容以及为什么我不得不在上周正常工作时更改我的配置。

此外，并非所有的 pid 都在排队​​：

```
2012-06-03 11:19:03,045 CRIT 服务器“unix_http_server”在没有任何 HTTP 的情况下运行
认证检查
2012-06-03 11:19:03,051 INFO 守护进程
2012-06-03 11:19:03,052 INFO supervisord 从 pid 144 开始
2012-06-03 11:19:04,061 产生的信息：带有 pid 151 的“celerycam”
2012-06-03 11:19:04,066 信息产生：“apnsd”，pid 153
2012-06-03 11:19:04,085 信息产生：“djcelery”，pid 为 155
2012-06-03 11:19:04,104 信息产生：“uwsgi”，pid 156
2012-06-03 11:19:05,271 INFO 成功：celerycam 进入 RUNNING 状态，进程 h
熬夜超过 1 秒（startsecs）
2012-06-03 11:19:05,271 INFO 成功：apnsd 进入 RUNNING 状态，进程有 s
超过 1 秒 (startsecs)
2012-06-03 11:19:05,271 INFO 成功：djcelery 进入 RUNNING 状态，进程 ha
s 熬夜超过 1 秒 (startsecs)
2012-06-03 11:19:05,271 INFO 成功：uwsgi 进入 RUNNING 状态，进程有 s
超过 1 秒 (startsecs)

```

状态显示 celery cam pids 没有排队：

```
#supervisorctl状态
apnsd 运行 pid 153，正常运行时间 0:06:17
celerycam RUNNING pid 150，正常运行时间 0:06:17
djcelery RUNNING pid 155，正常运行时间 0:06:17

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:31:50.747

我的第一个猜测是您使用了错误的 python 二进制文件（`system`python，而不是`virtualenv`python），它导致了这个错误（如下），因为该`system`python 二进制文件没有安装该包。

```
 Traceback (most recent call last):
  File "hack/manage.py", line 2, in 
    from django.core.management import execute_manager
  ImportError: No module named django.core.management 
```

您应该将 supervisord.conf 更改为以下内容，以确保您指向正确的 python 版本。

```
[program:djcelery]
directory = /home/dotcloud/current/
command = /home/dotcloud/env/bin/python hack/manage.py celeryd -E -l info -c 2
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

[program:celerycam]
directory = /home/dotcloud/current/
command = /home/dotcloud/env/bin/python hack/manage.py celerycam
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log 
```

python 路径从 t`python`到`/home/dotcloud/env/bin/python`.

我不确定为什么主管说它不在运行，但希望这个小小的改变将有助于清除您的错误，并使一切恢复正常。

# c# - 为审计目的为我们的每个 Web 应用程序模块创建单独的表是否很好？

> ID：10869912
> 
> 赞同：1
> 
> 时间：2012-06-03T11:25:45.407
> 
> 标签：c#, sql, sql-server-2008

最初，我正在考虑一个可以处理所有审计日志的表，但就灵活性而言，例如在未来，您认为打破表并让每个应用程序拥有自己的审计日志是有意义的桌子？

例如，对于预订，我将有一个审核表来跟踪字段级别的所有更改，然后我将有另一个用于签证申请的审核表。

我目前的审计日志表设计是这样的

```
AuditLogID
Module              
ActivityType
ReferenceNumber 
FieldName
OldValue
NewValue
IPAddress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:57:28.973

您所描述的模式似乎与实体属性值 (EAV) 一致，即每个字段一行。

假设所有模块中所有表的所有字段更改都会导致新的审计行，这种方法存在一些潜在问题

*   审计表会变得非常大
*   写入的数量会很大且很频繁，可能会对性能产生负面影响 - 此审计表的正确集群非常重要
*   为了查看/比较行，您需要将字段重新组合成行以便对用户有意义

您还可能会错过 2 个重要的审计属性，即更改的 UserId 和 TimeStamp

您可以对审计表进行一些规范化，例如，有一个“每行一个”审计表和一个“每字段一个”审计表。例如，IP 地址、ReferenceNumber、Activity Type、UserId 和 TimeStamp 可能是同一行中所有更新字段的常量，这些字段由单个“操作”更改并且每行一次属于一次。

还有其他选择

*   每个 Live 表一个 Audit 表，通常是字段的克隆，加上一个 TimeStamp 字段和一个新的主键（或将其保留为堆）
*   SQL 变更数据捕获 [SQL Server 2008 变更数据捕获与审计跟踪中的触发器](https://stackoverflow.com/questions/10060408/sql-server-2008-change-data-capture-vs-triggers-in-audit-trail)
*   如果所有更改都来自同一个应用程序，您可以使用文档存储（例如，将行存储为 Xml、Blob 或其他元数据），将更改的序列化版本保存在一行中，并且可能只公开几个可索引字段（列名称，日期）用于查询目的。
*   如果您选择文档存储方法，您也可能选择根本不在 RDBMS 中存储审计数据。像 RavenDB 或 MongoDB 这样的 NoSQL 存储擅长存储大容量

# json - 从一个mysql表创建多维数组

> ID：10869919
> 
> 赞同：0
> 
> 时间：2012-06-03T11:26:41.247
> 
> 标签：json, multidimensional-array

我正在尝试从一个 mysql 表中生成嵌套的 json 数据，如本例所示。

```
var data = {
"62" : {
    "section" : "bodyImage",
    "img" : "imageurl/image62.png",
    "label" : "blue",
    "price" : "100"
},
"63" : {
    "section" : "bodyImage",
    "img" : "imageurl/image63.png",
    "label" : "red",
    "price" : "120"
}
} 
```

62 和 63 来自下表中的 data_id 行：

```
+-----------+------------+-------------------------+-------+---------+
| data_id   | section    | img             | label | price   | 
+-----------+------------+-------------------------+-------+----------
| 62        | bodyImage  | imagpath/image62.png    |  blue | 100     |
| 63        | bodyImage  | imagpath/image62.png    |  red  | 120     | 
+-----------+------------+-------------------------+-------+---------

+ 
```

这是带有查询的 php 文件：

```
$result = mysql_query("SELECT data_id, section, img, label, price FROM table WHERE active != 'no'");

$data = array();

while($row=@mysql_fetch_object($result)) {

$data[] = array (

    'section' => $row['sub_section'],
    'img' => $row['big_image'],
    'label' => $row['label_client_en'],
    'price' => $row['price']

);

}
echo json_encode( $data ); 
```

我无法让它工作。请帮助我了解多维数组的正确语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:28:20.900

您不能直接在主数组上对“子数组”进行 json_encode

您必须在 while 中为每个数组执行 json_encode：

```
$data[] = json_encode(array (

'section' => $row['sub_section'],
'img' => $row['big_image'],
'label' => $row['label_client_en'],
'price' => $row['price']
)); 
```

然后你还必须像你已经做的那样对主数组进行编码。

# php - 无法发送关卡切换页面

> ID：10869922
> 
> 赞同：0
> 
> 时间：2012-06-03T11:27:36.597
> 
> 标签：php, pagination

正在处理数组分页。我在形成方程式时遇到了一些麻烦。我想要的是什么时候

```
$CurrentPage = 1 then $Start = 1, 
if $CurrentPage = 2 then $Start = 30, 
if $CurrentPage = 3 then $Start = 60, 
if $CurrentPage = 4 then$Start = 90 
```

等等..

如何编写 if else 块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T11:36:29.373

你也可以使用这个：

```
$Start = ($currentPage==1 ? 1 : ($currentPage-1)*30); 
```

忘记所有的 if/else。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T11:34:05.640

如果当前页面为一，则从结果一显示（出于某种原因，不是从结果 0），如果页面大于一，则从结果（页面 - 1）*30 显示

```
if ((int)$currentPage > 1) {
    $start = ($currentPage - 1)*30;
}
else {
    $start = 1;
} 
```

或更短的方式

```
$start = ($currentPage > 1) ? ((int)$currentPage - 1) * 30 : 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T11:52:05.653

把事情简单化：

```
$Start = max(1, ($currentPage-1) * 30); 
```

# css - youtube 视频后面显示的下拉菜单开始

> ID：10869925
> 
> 赞同：0
> 
> 时间：2012-06-03T11:27:57.523
> 
> 标签：css

我的代码中存在可见性问题。我有一个下拉菜单，它会在 youtube 视频上下拉。发生的情况是菜单显示在 youtube 视频的后面，而不是显示在前面。请帮忙。谢谢 ![在此处输入图像描述](../Images/0c716fc57bdb78480b8fd281a46fbacd.png)

这是我的菜单的代码，

```
<div style="margin-top:-60px;padding-bottom:20px;position:relative;overflow:visible;">

<div class='cssmenu'>
<ul>
   <li><a href='http://financeyoga.com/starthere'><span>Start Here</span></a>
      <ul>
         <li><a href='http://financeyoga.com/starthere'><span>New To The Site? Start Here</span></a></li>
         <li class='active '><a href='index.html'><span>Home</span></a></li>
         <li><a href='http://financeyoga.com/about'><span>About</span></a></li>
         <li><a href='http://financeyoga.com/Contact'><span>Contact</span></a></li>
         <li><a href='http://financeyoga.com/hello-world/'><span>What Is Finance Yoga?</span></a></li>
      </ul>
   </li>
   <li><a href='http://financeyoga.com/SaveMoney'><span>Save Money</span></a>
      <ul>
         <li><a href='http://financeyoga.com/SaveMoney'><span>Ways To Save</span></a></li>
         <li><a href='http://financeyoga.com/category/ways-to-save/moving/'><span>Moving</span></a></li>
         <li><a href='http://financeyoga.com/category/ways-to-save/coupons-and-cash-back/'><span>Coupons & Cash Back</span></a></li>
         <li><a href='http://financeyoga.com/category/ways-to-save/moving/'><span>Moving</span></a></li>
      </ul>
   </li>
   <li><a href='http://financeyoga.com/makemoney '><span>Make Money</span></a>
      <ul>
         <li><a href='http://financeyoga.com/category/make-extra-money/series-make-quick-money/'><span>Series - Make Quick Money</span></a></li>
         <li><a href='http://financeyoga.com/how-to-make-money-with-a-blog/'><span>Make Money Blogging</span></a></li>
      </ul>
   </li>
   <li><a href='http://financeyoga.com/onlinebanking'><span>Online Banking</span></a>
      <ul>
         <li><a href='http://financeyoga.com/onlinebanking'><span>Online Banking</span></a></li>
         <li><a href='http://financeyoga.com/category/checking-accounts/'><span>Best Checking Accounts</span></a></li>
         <li><a href='http://financeyoga.com/onlinebanking'><span>Online Banking</span></a></li>
         <li><a href='#'><span>Finance Tools</span></a></li>
      </ul>
   </li>
   <li><a href='http://financeyoga.com/AmazonDeals'><span>Amazon Deals</span></a>
      <ul>
         <li><a href='href="http://www.amazonwireless.com/b/684177011/?_encoding=UTF8&tag=finayoga-20&linkCode=ur2&camp=1789&creative=9325'><span>Amazon Wireless</span></a></li>
         <li><a href='http://www.amazon.com/b?_encoding=UTF8&site-redirect=&node=281407&tag=finayoga-20&linkCode=ur2&camp=1789&creative=9325'><span>Electronics</span></a></li>
         <li><a href='http://www.amazon.com/b?_encoding=UTF8&site-redirect=&node=4736&tag=finayoga-20&linkCode=ur2&camp=1789&creative=9325'><span>Books</span></a></li>
         <li><a href='href="https://rads.stackoverflow.com/amzn/click/com/B00067L6TQ" rel="nofollow noreferrer"http://www.amazon.com/b?_encoding=UTF8&site-redirect=&node=229534&tag=finayoga-20&linkCode=ur2&camp=1789&creative=9325'><span>Software</span></a></li>
         <li><a href='href="http://www.amazon.com/b?_encoding=UTF8&site-redirect=&node=195209011&tag=finayoga-20&linkCode=ur2&camp=1789&creative=9325'><span>Music</span></a></li>
         <li><a href='href="http://www.amazon.com/b?_encoding=UTF8&site-redirect=&node=51569011&tag=finayoga-20&linkCode=ur2&camp=1789&creative=9325'><span>Apparel & Accessories</span></a></li>
      </ul>
   </li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:55:26.430

# c# - 基础类实例知识

> ID：10869927
> 
> 赞同：1
> 
> 时间：2012-06-03T11:28:13.650
> 
> 标签：c#, oop

我对类实例有点困惑，我试图在互联网上搜索我的具体问题，但找不到答案。

假设我有一个父类`Screen`和子类`GameplayScreen`，并且`SettingsScreen`.

如果在我的主要游戏类中，我会执行以下操作：

```
Screen currentScreen = new Screen(); 
```

然后每次用户想换屏时：

```
if (gameplay) 
    currentScreen = new GameplayScreen(); 
else 
    currentScreen = new SettingsScreen(); 
```

考虑到性能，这是一个好方法吗？有没有更好的方法来做到这一点，比如卸载资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:39:00.497

答案可能取决于`Screen`子类型拥有什么样的资源，它们的初始化是否需要很长时间以及它们是否拥有大量资源（或“宝贵”资源）。

但最可能的答案是您的代码很好，并且您不应该担心在屏幕更改时创建新对象（让垃圾收集器处理旧对象）。

# c# - 将字符串转换为时间说明

> ID：10869931
> 
> 赞同：0
> 
> 时间：2012-06-03T11:28:47.080
> 
> 标签：c#, sql-server

我有一个这样的字符串：`16:00`我希望将它保存在我的 SQL Server 数据库中的一列中，该列的数据类型为`time(7)`...

当然，在我把它保存在那里之前，我需要将我的字符串转换为时间数据类型。

使用`Convert.ToDateTime`时，我得到一个错误：

> 无法将类型“System.DateTime”隐式转换为“System.TimeSpan”

那是因为我正在`Convert.ToDateTime(myString)`从我的数据库中保存到具有`time(7)`数据类型的实体的属性中......

`time(7)`还有其他方法可以将我的字符串转换为与SQL Server 中的数据类型兼容的格式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T11:35:11.480

对应于 SQL`time`数据类型的托管类型是`TimeSpan`（或`TimeSpan?`当可为空时），而不是`DateTime`- 请参阅[映射 CLR 参数数据](http://msdn.microsoft.com/en-us/library/ms131092%28v=sql.105%29.aspx)以获取类型转换列表。

您可以使用它`TimeSpan.Parse(myString)`来转换您的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:34:47.057

使用 SQL Server 的`Convert`功能

```
convert(DateTime, '20:10:00:000', 114); 
```

见[CAST & CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T09:48:28.383

你也可以这样使用

```
Convert.ToDateTime(myString).TimeOfDay(); 
```

这将返回时间。您可以将此值传递给 Sql 命令参数。

`TimeOfDay`返回`TimeSpan`对象。

```
TimeSpan tp = Convert.ToDateTime(myString).TimeOfDay(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-03T11:32:56.610

而不是`Convert.ToDateTime`使用`DateTime.TryParseExact(yourTimeString, "HH:mm",<other parameters>, out dateTime);`

缺少其他参数。请查看`DateTime.TryParseExact`文档。但基本上它会将您的字符串从您指定的格式转换为 dateTime。

# http - Google Apps 脚本中的 Cookie 处理 - 如何在标头中发送 cookie？

> ID：10869932
> 
> 赞同：19
> 
> 时间：2012-06-03T11:28:51.387
> 
> 标签：http, cookies, google-apps-script

我正在尝试编写一个简单的脚本，从网页中获取文本并处理该字符串。但是，那个网站需要我登录。我成功登录了那个网站。这是我登录的方式：

```
var payload = {"name1":"val1","name2":val2"};

var opt ={"payload":payload,"method":"post"};

var respose = UrlFetchApp.fetch("http://website.com/login",opt); 
```

登录后，网站将我置于`http://website.com/home`. 我检查了一下`response.getContentText()`，我可以确认我已经成功登录，因为它包含来自`http://website.com/home`. 现在我需要获取`http://website.com/page`并处理它的内容。我首先假设脚本可以自己处理 cookie 并继续

```
var pagedata = UrlFetchApp.fetch("http://website.com/page);//Did not work 
```

这显然没有用，并`pagedata.getContentText()`说我先登录，这表明 cookie 没有成功通过..

然后，我尝试提取服务器在登录期间响应的 cookie，并将其与此请求一起发送。

```
var cookie = response.getAllHeaders()['Set-Cookie'];     

// variable cookie now contains  a legitimate cookie.

// It contains 'JSESSIONID=blabla;Path=/' and 
// it is the ONLY cookie that server responds. 
```

我试图在我的页面请求中发送那个 cookie。

```
var header = {'Cookie':cookie};

var opt2 = {"header":header};

var pagedata = UrlFetchApp.fetch("http://website.com/page",opt2); 
```

我认为即使是现在 cookie 也没有正确发送，因为内容再次要求我登录。

我是否正确传递了 cookie？我需要有关在请求中发送 cookie 的正确方法的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T08:37:06.597

在这里您可以找到 cookie 规范： [http ://www.w3.org/Protocols/rfc2109/rfc2109](http://www.w3.org/Protocols/rfc2109/rfc2109)

您的代码中存在潜在问题：如果从服务器发回多个 'set-cookie' 属性，则 response.getAllHeaders()['Set-Cookie'] 可以返回字符串或字符串表。

埃里克是对的，你不能在不消化它的情况下退回 cookie。

代码中的第二个错误：

```
var opt2 = {"header":header}; 
```

应该

```
var opt2 = {"headers":header}; 
```

另请注意，GAS 使用 Google IP。可能会发生两次连续提取使用不同 IP 的情况。您要连接的服务器可能依赖于会话 IP。

你确定服务器在认证后只给你发回一个cookie吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T16:50:33.063

看起来您在 UrlFetchApp.fetch() 中正确设置了标题。

我相信 Set-Cookie 标头中的数据与 Cookie 标头中预期的数据格式不同。例如，Set-Cookie 包含过期等信息。

# android - Android - 确定短信发送失败的原因

> ID：10869933
> 
> 赞同：6
> 
> 时间：2012-06-03T11:28:59.153
> 
> 标签：android, sms

我有一个提醒应用程序，它会发送一条短信通知用户他们的提醒时间已经过去。这很好用。但是，我一直在测试当手机睡着并错过提醒时会发生什么。

我`AlarmManager`用来设置警报以对应提醒时间。我的日志显示，当手机重新启动并尝试发送 SMS 时警报响起，但从未收到 SMS。

所以问题是，有没有办法调试为什么不发送短信？

我当前的代码在发生警报事件时设置了 ContentObserver：

```
 private void registerToListenForSentSMS()
{
    MessageSentListener smsObeserver = new MessageSentListener(new Handler());
    ContentResolver contentResolver = TheEveryOtherAlarmAppApplication.getAppContext().getContentResolver();
    contentResolver.registerContentObserver(Uri.parse("content://sms"), true, smsObeserver);
} 
```

MessageSentListener 收到通知发生了*一些*SMS 事件：

```
public class MessageSentListener extends ContentObserver
{

public MessageSentListener(Handler handler)
{
    super(handler);
}

@Override
public void onChange(boolean selfChange)
{
    super.onChange(selfChange);

    Log.d(Constants.ALARM_APP_LOG_TAG, "Something happend");
    ContentResolver contentResolver = AlarmAppApplication.getAppContext().getContentResolver();

    contentResolver.unregisterContentObserver(this);
}
} 
```

但这可能是由与我的应用程序无关的 SMS 事件引起的。无论如何，它并没有真正让我更接近解决方案 - 我想知道什么*都没*发生时出了什么问题！

如果没有发送警报短信，我可以重新发送或使用其他一些通知方法，例如电子邮件等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:34:14.877

您将需要广播接收器和待处理的意图来获得有关失败短信的通知。

下面的代码片段将为您提供帮助

```
//---sends an SMS message to another device---
    private void sendSMS(String phoneNumber, String message)
    {        
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context context, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(context, "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(context, "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(context, "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(context, "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(context, "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context context, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(context, "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(context, "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                        
                }
            }
        }, new IntentFilter(DELIVERED));        

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
```

# javascript - 多个脚本标签和连接+缩小+预处理

> ID：10869937
> 
> 赞同：4
> 
> 时间：2012-06-03T11:29:11.860
> 
> 标签：javascript, performance, minify

我有一个带有多个脚本标签（接近 20 个）的 html 文件。我决定将所有 JS 文件连接成一个，然后缩小连接的文件。我正在使用 ant 任务进行连接，并且也将这样做以进行缩小。我知道我需要提供非连接/非缩小版本的选项以进行调试（也称为开发环境）。

我想知道如何实现这一目标。例如：文件 main.html 有 20 个脚本标签，我想这样做的一种方法是使用 HTML 预处理器并有条件地包含脚本标签：

```
#ifdef perf
    <script src="main.min.js"></script> 
#else 
    <script src="ctrl.js"></script>
    <script src="services.js"></script>
    <script src="directives.js"></script>
    <script src="model.js"></script>
    .
    .
    .P.S
    <script src="file_no_20.js"></script>
#endif 
```

main.min.js 是使用 ant 构建过程中连接和缩小的文件。

有没有更好的方法来做到这一点？这种方法的缺点是什么？

谢谢，克里斯。PS：考虑使用[http://fmpp.sourceforge.net/](http://fmpp.sourceforge.net/)进行 html 预处理，任何其他建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:55:06.173

Chrome 支持一个很棒的功能，称为“源映射”，非常适合此功能。我建议您阅读此处的指南以获取更多信息：

[http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)

如果您在缩小方面使用 AngularJS，有一些注意事项。从文档：

> 由于 Angular 从控制器构造函数的参数名称推断控制器的依赖关系，如果您要缩小 PhoneListCtrl 控制器的 JavaScript 代码，它的所有函数参数也将被缩小，并且依赖注入器将无法识别正确服务。
> 
> 为了克服由缩小引起的问题，只需将一个带有服务标识符字符串的数组分配到控制器函数的 $inject 属性中，就像片段中的最后一行（注释掉）建议的那样：
> 
> ```
> PhoneListCtrl.$inject = ['$scope', '$http']; 
> ```
> 
> 还有另一种方法来指定此依赖项列表并避免缩小问题 - 使用括号表示法将要注入的函数包装到字符串数组（表示依赖项名称）中，然后是要注入的函数：
> 
> ```
> var PhoneListCtrl = ['$scope', '$http', function($scope, $http) { /* constructor body */ }]; 
> ```
> 
> 这两种方法都适用于可以由 Angular 注入的任何函数，因此由项目的样式指南决定使用哪一种。

[http://docs.angularjs.org/tutorial/step_05](http://docs.angularjs.org/tutorial/step_05)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:21:14.213

我建议使用标签库，例如[http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPTags4.html#67771](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPTags4.html#67771)来实现这一点。包括您的脚本，例如：

```
<script:include src="myscript1.js" />
<script:include src="myscript2.js" />
<script:include src="myscript3.js" />
.. 
```

并为您的系统使用页面参数来决定是否必须连接和缩小脚本。如下所示：

www.yourapp.com/app?debugMode=true

默认情况下，脚本被连接和缩小。如果您是从事该项目的开发人员，只需添加一个页面参数，例如 debugMode=true。当 debugMode 为 true 时，只需按原样渲染脚本。

市场上有许多服务，例如[http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)可以与您的项目集成来为您完成这项工作。

不要在每次加载页面时压缩脚本。第一次做并缓存它，这样你就不必每次都做。在任何时候重建最新的脚本文件，只需添加另一个参数，如 ?rebuild=true 以便所有最新的文件都被压缩和缓存。你也可以对 CSS 做同样的事情。

# c - C 中 Sizeof 运算符的复杂声明

> ID：10869950
> 
> 赞同：0
> 
> 时间：2012-06-03T11:31:39.870
> 
> 标签：c, macros, c-preprocessor, sizeof

我在书中某处看到了这个复杂的 sizeof 运算符声明，这在取笑我：

```
#define SIZEOF(int)  (int)&((int *)0)[1] 
```

任何人都可以解释这个声明，这里发生了什么......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T11:37:00.073

这是`[1]`“扩展”部分：

```
(int)(&(*(((int*)0) + 1))) 
```

现在你明白它是如何工作的了吗？

`sizeof` `int`由于指针算术的属性，0 将增加，最后的转换`int`为您提供结果地址的值，即“大小”。

这是完全未定义的行为（null 的算术，可能还有无效指针的取消引用），相当没有意义。

* * *

用宏参数更新没有多大意义。最后的演员应该是`std::uintptr_t`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T11:36:34.693

首先 - 它与术语混淆`int`- 我们自然假设它是熟悉类型的关键字，但在这种情况下它不是 - 相反，它是宏的参数。所以为了简化，考虑如下宏：

```
#define SIZEOF(type)  &((type *)0)[1] 
```

现在这样看，可能更容易看出宏首先将地址 0 转换为指向 的指针`type`，然后获取第二个元素的地址。这将显示大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T11:36:34.723

它定义`SIZEOF`为整数的大小。

*   `(int *)0`是地址为零的 int 指针
*   `[1]`访问该整数之后的*下一个整数。*
*   由于`(int *)0`地址为零，因此它之后的地址`sizeof int`正好位于前一个地址之后。
*   `(int)`将其转换为数字，因为大小是数字，而不是指针。

显然这是一个讨厌的黑客，应该简单地使用`sizeof int`.

# asp.net - 尝试通过 asp.net mvc Web 应用程序创建目录时无法翻译部分或全部身份引用

> ID：10869954
> 
> 赞同：1
> 
> 时间：2012-06-03T11:32:20.707
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, c#-4.0, iis-7

当我的 asp.net Web 应用程序调用 application_start 方法（在 global.asax 中）时，我应该能够在项目的根目录中创建一个默认目录。

由于 IIS 用户没有对 webroot 目录（用于创建目录）的完全权限，我在尝试创建目录时收到拒绝访问错误消息。此外，IIS 用户不会根据客户端获得对根目录的完全访问权限。我计划如下实现满足客户的期望。请让我知道是否有比这种方法更好的出路？

**方法一：**

a.在服务器中创建一个新的用户帐户（windows）。b.将用户帐户名称保留在配置文件中。c.从配置文件中读取该帐户并使用目录安全对象使用该用户帐户创建目录。

**代码：**

```
DirectorySecurity dacl = new DirectorySecurity();
string useraccountForDirectoryCreate = System.Net.Dns.GetHostName() + "\\" +    "testaccount";
dacl.AddAccessRule(new FileSystemAccessRule(useraccountForDirectoryCreate,
                                                    FileSystemRights.FullControl,
                                                    InheritanceFlags.
                                                        ContainerInherit |
                                                    InheritanceFlags.ObjectInherit,
                                                    PropagationFlags.None,
                                                    AccessControlType.Allow));
Directory.CreateDirectory(imageDirectory, dacl); 
```

上面的东西在 IIS 服务器本地工作（尚未在客户端的 IIS 服务器上测试）

我对此的担忧：我认为要求客户端创建一个要在服务器中创建的用户帐户以仅创建单个目录是不可行的。将来他可能需要授予更多用户访问目录创建的权限。继续创建 Windows 帐户是不可行的。

方法2：

a) 创建一个 IIS 用户帐户，该帐户具有对 Web 根目录的完全访问权限以创建目录。（这是更好的出路吗，这与为 IIS 用户提供对 Web 根目录的完全访问权限相同，不是吗？请澄清。） b）将帐户信息保存在 Web 配置文件中。c) 从 web config 文件中读取账户信息，并使用上述代码创建具有权限的目录。

这种方法的问题：我是否收到以下错误。

> 部分或全部身份参考无法翻译

当调用以下语句时。

```
dacl.AddAccessRule(new FileSystemAccessRule(useraccountForDirectoryCreate,
                                                    FileSystemRights.FullControl,
                                                    InheritanceFlags.
                                                        ContainerInherit |
                                                    InheritanceFlags.ObjectInherit,
                                                    PropagationFlags.None,
                                                    AccessControlType.Allow)); 
```

看起来我无法为这个新创建的用户添加访问规则。为什么会这样？我已经用谷歌搜索了上述错误消息并试图理解但我无法解决错误。我根本无法理解错误消息。请帮助解决这个问题。它的交付时间很长。

# c# - 如何将表添加到 Windows Phone 上已部署的 SQL Server CE 数据库？

> ID：10869956
> 
> 赞同：1
> 
> 时间：2012-06-03T11:32:46.673
> 
> 标签：c#, linq-to-sql, sql-server-ce, windows-phone-7.1

如果数据库尚不存在，则通过以下方式创建数据库既好又简单：

```
if (!context.DatabaseExists())
{
    // Create the local database.
    context.CreateDatabase();
} 
```

但是，如果在升级过程中添加了一个新表，是否可以对手机上的数据库进行就地升级，以匹配刚刚创建的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:00:26.543

您可以使用 DatabaseSchemaUpdater 类，请参阅此演练： http: [//msdn.microsoft.com/en-us/library/hh394022 (v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/hh394022(v=VS.92).aspx)

# haskell - 在 Haskell 中比较 2 个字符串

> ID：10869961
> 
> 赞同：-1
> 
> 时间：2012-06-03T11:33:10.183
> 
> 标签：haskell

我在使用 Haskell 时遇到了一些麻烦。我正在寻找一个可以比较 2 个字符串的函数。该函数应输出一个字符串，其中包含两个字符串中的字符。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T11:36:15.053

您正在寻找的是可以与 2 个列表的元素相交的一些功能`[a]`。

有一个来自[Data.List](http://hackage.haskell.org/package/base-4.7.0.2/docs/Data-List.html) : `intersect :: Eq a => [a] -> [a] -> [a]`。

```
> intersect "abcd" "db"
"bd"
it :: [Char] 
```

# c# - 通过 EF Code First 使用列表或集合来播种数据

> ID：10869963
> 
> 赞同：0
> 
> 时间：2012-06-03T11:33:47.120
> 
> 标签：c#, .net, asp.net-mvc-3, ienumerable, ilist

我正在为我的开发数据库添加一些种子数据。我所拥有的似乎相当笨重，有没有办法使用某种 IEnumerable 类型（例如 List 或集合）来使这更容易？

```
public class MusicDBInit : DropCreateDatabaseIfModelChanges<MusicContext>
{
    protected override void Seed(MusicContext db)
    {
        Band bvs = new Band { Name = "Bear vs Shark", Members = 4 };
        Band circa = new Band { Name = "Circa Survive", Members = 4 };
        Band dam = new Band { Name = "Damiera", Members = 3 };

        db.Bands.Add(bvs);
        db.Bands.Add(circa);
        db.Bands.Add(dam);

        base.Seed(db);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:11:01.283

尝试这样的事情（如在`Online Music Store MVC Sample`：

```
 var bands = new List<Band>{
                     new Band { Name = "Bear vs Shark", Members = 4 },
                     new Band { Name = "Circa Survive", Members = 4 },
                     new Band { Name = "Damiera", Members = 3 }
 };

bands.ForEach(x=> db.Bands.Add(x)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:03:53.940

我通常遵循的另一种方法是从 XML 文件加载种子数据。一个单独的类将包含以下内容：

```
 private XmlNodeList readNodes(String xmlFilePath, String nodeName)
    {
        FileStream reader = new FileStream(xmlFilePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
        System.Xml.XmlDocument source = new System.Xml.XmlDocument();
        source.Load(reader);
        return source.GetElementsByTagName(nodeName);
    }

    public List<Band> readBands(String xmlFilePath)
    {
        List<Band> results = new List<Band>();
        foreach (XmlNode node in readNodes(xmlFilePath, "Band"))
        {
            results.Add(new Band { Members = node.Attributes["members"].Value, Name = node.Attributes["name"].Value });
        }
        results.Sort();
        return results;
    } 
```

然后将以下内容添加到您的`Seed`方法中：

```
 foreach (Band b in seeder.readBands(AppDomain.CurrentDomain.BaseDirectory + "App_Data\\Bands.xml"))
    {
        db.bands.Add(b);
    } 
```

然后，您的 XML 将看起来像这样，并位于您的 App_Data 目录下。

```
<?xml version="1.0" encoding="UTF-8"?>
<bands>
    <band name="Bear vs Shark" members="4" />
    <band name="Circa Survive" members="4" />
    <band name="Damiera" members="3" />
</bands> 
```

然后，您可以为每个要播种的表创建种子方法和 XML 文件。请记住，由于您正在使用`Add`而不是在运行`AddOrUpdate`时很可能会添加重复项`Seed`。

# c# - 从超链接设置 WPF 图像源（来自 Internet）

> ID：10869966
> 
> 赞同：4
> 
> 时间：2012-06-03T11:34:30.070
> 
> 标签：c#, wpf, image, hyperlink

我尝试从 Internet 链接设置 WPF 图像源。我怎样才能做到这一点？我试过这个，但不起作用：

```
Image image1 = new Image();
BitmapImage bi3 = new BitmapImage();
bi3.BeginInit();
bi3.UriSource = new Uri("link" + textBox2.Text + ".png", UriKind.Relative);
bi3.CacheOption = BitmapCacheOption.OnLoad;
bi3.EndInit(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T11:44:27.253

附加`"link"`到 URL 肯定是不正确的。只需确保在文本框中输入图像的完整路径即可。

```
// For example, type the following address into your text box:
textBox2.Text = "http://www.gravatar.com/avatar/ccac9a107581b343e832a2b040278b98?s=128&d=identicon&r=PG";

bi3.UriSource = new Uri(textBox2.Text, UriKind.RelativeOrAbsolute); 
```

# sql - 在 vb6 中出现类型不匹配的错误

> ID：10869967
> 
> 赞同：0
> 
> 时间：2012-06-03T11:34:30.130
> 
> 标签：sql, oracle, vb6

我正在使用此代码并收到类型不匹配的错误，运行时错误“13”错误在下面标记的行中，特别是由于`prereq.paid=" + rs1!paid + " "`查询中的条件（）...

```
rs1.Open "select name,nposts,postad.paid as paid from ad,post,postad where ad.adid = " +
         cmbAdno.Text +
         " and ad.adid=postad.adid and postad.pid=post.pid ", con, adOpenDynamic, 
         adLockOptimistic

While Not rs1.EOF
  cmbTitle.AddItem (rs1!Name)    
  rs1.MoveNext
Wend

rs1.MoveFirst

cmbTitle.Text = rs1!Name
txtNposts.Text = rs1!nposts

If IsNumeric(rs1!paid) Then
  MsgBox (rs1!paid + 1)
End If

**rs2.Open "select title from postad,prereq where postad.paid = prereq.paid and prereq.paid=" + 
        rs1!paid + " ", con, adOpenDynamic, adLockOptimistic**

While Not rs2.EOF
  lstPrereq.AddItem (rs2!Title)
  rs2.MoveNext
Wend

rs2.Close

rs1.Close 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:55:16.393

唷，该代码需要一些工作！

加号运算符是这里的罪魁祸首。您可以通过一个小测试用例轻松验证这一点。

```
Dim ADO_Field_Value As Variant
Dim S As String

ADO_Field_Value = True

On Error Resume Next
S = "text" + ADO_Field_Value + ""
If Err Then MsgBox "Plus failed, err " & CStr(Err)
Err.Clear
S = "text" & ADO_Field_Value & ""
If Err Then MsgBox "Amp failed, err " & CStr(Err) 
```

如果您运行它，“+”会产生错误 13，而“&”会按预期工作。

使用 & 符号进行连接。plus only sorta，有点适用于与古代的向后兼容性。使用它需要编译器猜测您的意图，以解决运算符的软重载问题。

您将空字符串连接到 .Value 的“Null hack”并不是特别聪明。如果 rs1 有一个空值，你最终会出现 SQL 语法错误，除非你使用“+”，它会得到一个错误 94。

通过显式使用 .Value 而不是让编译器猜测您想要该字段的默认属性来访问 ADO 字段值更安全。While/Wend 已经过时了，那些多余的括号是怎么回事？

您要求编译器执行此代码中可能不应该执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:21:22.270

rs1!paid 是数据库中的布尔值吗？如果是这样，则 concat 可能存在用于制作查询字符串的问题。在过去，当我使用 VB6 时，我从未访问过这样的字段。我使用了类似 rstRecordSet.Fields(0) 或 rstRecordSet.Fields("field1") 的东西，但如果该字段存在，那应该不是问题。在之前创建一个字符串并将查询的连接传递给它并验证它是否被填充。

另外，您有“...postad.paid aspaid...”，为什么？你不需要重命名那里的字段......

# ruby - Ruby on Rails RSpec put 方法看不到已登录用户

> ID：10869969
> 
> 赞同：0
> 
> 时间：2012-06-03T11:34:54.880
> 
> 标签：ruby, authentication, rspec, ruby-on-rails-3.2

所以我使用 Michael Hartl 的教程已经有一段时间了，我可以说它真的很有用，但是有一个问题，我猜这不是教程的一部分。因此，在“9.2.2 要求正确的用户”一章中，有一个测试用于检查用户是否不能访问其他用户的编辑页面，也不能提交直接的 PUT reauest。

```
describe "as wrong user" do
  let(:user) { FactoryGirl.create(:user) }
  let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
  before { sign_in user }

  describe "visiting Users#edit page" do
    before { visit edit_user_path(wrong_user) }
    it { should_not have_selector('title', text: full_title('Edit user')) }
  end

  describe "submitting a PUT request to the Users#update action" do
    before { put user_path(wrong_user) }
    specify { response.should redirect_to(root_path) }
  end
end 
```

这么久一切似乎都很好，但测试失败了：

```
1) Authentication authorization as wrong user submitting a PUT request to the Users#update action ←[31mFailure/Error:←[0m ←[31mspecify { response.should redirect_to(root_path }←[0m←[31mExpected response to be a redirect to <http://www.example.com/> but was a redirect to <http://www.example.com/signin>←[0m←[36m # ./spec/requests/authentication_pages_spec.rb:107:in `block (5 levels) in <top (required)>'←[0m 
```

这是用户控制器：

```
class UsersController < ApplicationController
before_filter :signed_in_user, only: [:index, :edit, :update]
before_filter :correct_user,   only: [:edit, :update]

def index
  @users = User.all
end

def show
  @user = User.find(params[:id])
end

def new
@user = User.new
end

def create
  @user = User.new(params[:user])
  if @user.save
    sign_in @user
    flash[:success] = "Welcome to the Sample App!"
    redirect_to @user
  else
    render 'new'
  end
end

def edit
end

def update
  if @user.update_attributes(params[:user])
    flash[:success] = "Profile updated"
    sign_in @user
    redirect_to @user
  else
    render 'edit'
  end
end

private

  def signed_in_user
    unless signed_in?
      puts "No user signed in"
    store_location
      redirect_to signin_path, notice: "Please sign in."
    end
  end

  def correct_user
    @user = User.find(params[:id])
  puts "Incorrect user" unless current_user?(@user)
    redirect_to(root_path) unless current_user?(@user)
  end
end 
```

所以你可以看到问题是当使用 RSpec put 方法时，即使在检查正确的用户之前测试也会失败，因为它看到没有用户登录。这是一个很容易被忽略的小问题（不正确的用户不能直接PUT 请求）但对我来说这是一个难题，为什么它不能正常工作，而且我已经很长时间无法得到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:29:00.640

看起来过滤器在触发`signed_in_user`前重定向回登录页面。`correct_user`这表明用户实际上并未通过`sign_in user`before 块中的调用正确登录。

您是否定义了 sign_in in `spec/support/utilities.rb`？

```
include ApplicationHelper

def sign_in(user)
  visit signin_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end 
```

# prolog - 回溯控制

> ID：10869974
> 
> 赞同：1
> 
> 时间：2012-06-03T11:35:31.003
> 
> 标签：prolog

假设回溯完成如下所示。每个端点显示成功或失败。

```
Ex:

    foo(X, search_key).

Backtracking :
                Root

              /   |  \
             /    |   \
            /     |    \
           /|\    |     \
          / | \   |    /|\
         /  f f   |   / | \
        /         |  f  |  f
       f          g     f

Abbreviation  f : fail
              g show first character of name 
```

除非找不到其他方法，否则我不会更喜欢在下一个函数中使用 g 作为参数。但是，在这个示例中，由于没有找到其他方法，我必须在下一个函数中使用 g 作为参数。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:45:47.543

您必须先尝试所有端点并将它们存储在一个列表中（`findall(foo...)`大概有），否则您将不知道以后是否会出现非 g。

然后尝试执行下一个功能，要求 X 不是 g。如果失败，请使用 g 。

```
avoidg(X) :-
    member(A,X),
    A \= f,
    A \= g,
    write(A).

avoidg(X):-
    member(A,X),
    A \= f, 
    write(A). 
```

例子：

```
?- avoidg([f,f,f,g,f,f,f]).
g
true 

 ?- avoidg([f,f,f,g,f,f,h]).
h
true 
```

# java - 在 jdk 中找不到 javax.ws.rs 包

> ID：10869977
> 
> 赞同：31
> 
> 时间：2012-06-03T11:36:10.873
> 
> 标签：java, java-ee-6, jax-rs

我正在尝试进入 JAX-RS。我的项目 jdk 设置为 1.7.03。是否必须定义 JAX-RS(javax.ws.rs) 的注释？如果没有，我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-03T11:40:28.440

这些类（[*JSR 311: JAX-RS: The JavaTM API for RESTful Web Services*](http://jcp.org/en/jsr/detail?id=311)）不是 JDK 的一部分。您需要在 CLASSPATH 中包含适当的 JAR 文件。[您可以在Maven 存储库](http://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/)中找到 API 。

还可以查看[apache-cxf](/questions/tagged/apache-cxf "显示标记为“apache-cxf”的问题")、[jersey](/questions/tagged/jersey "显示标记为“球衣”的问题")（参考实现）、来自 JBoss 的 resteasy、[restlet](/questions/tagged/resteasy "显示标记为“resteasy”的问题")[和](/questions/tagged/restlet "显示标记为“restlet”的问题")其他一些 JAX-RS 实现。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-24T15:00:22.950

试试：http: [//download.oracle.com/otndocs/jcp/jaxrs-2_0_rev_A-mrel-spec/index.html](http://download.oracle.com/otndocs/jcp/jaxrs-2_0_rev_A-mrel-spec/index.html)

下载：javax.ws.rs-api-2.0.rev.A.jar

然后添加到您的项目属性(YourProjectName)->Libraries->Add JAR/Folder

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-05T23:03:33.933

您的 JDK 设置为什么并不重要。

去这里= [http://www.java2s.com/Code/Jar/j/Downloadjavaxwsrsjar.htm](http://www.java2s.com/Code/Jar/j/Downloadjavaxwsrsjar.htm)

或者在 Google 中输入“下载 javax.ws.rs”。

下载“javax.ws/javax.ws.rs.jar.zip”</p>

[![在此处输入图像描述](../Images/e8aed1f99cf46502d72003fa3b2008e6.png)](https://i.stack.imgur.com/evMtX.png)

解压到桌面。生成的文件应该是一个 jar 文件。打开您的项目首选项并将其添加为外部 jar。

[![在此处输入图像描述](../Images/82de4064b9a8f3119e847d3610524511.png)](https://i.stack.imgur.com/clfoI.png)

[![在此处输入图像描述](../Images/6dccb027c5bcdd0a123173ec61cc01e8.png)](https://i.stack.imgur.com/CWvJW.png)

从桌面选择 javax.ws.rs.jar 文件。

单击“应用”，然后单击“确定”。

现在您应该可以使用 javax.ws.rs 库了。你可以通过输入“import javax.ws.rs.GET;”来测试它。在您的 Java 类之一中。

# twitter - Twitter 搜索小部件 - 不按时间顺序拉推文

> ID：10869979
> 
> 赞同：0
> 
> 时间：2012-06-03T11:36:25.060
> 
> 标签：twitter

我有一个问题，即 twitter 小部件没有按正确的顺序拉推文。它可能会在 6 小时前拉出一条推文，然后在 2 分钟前又在 5 小时前拉出一条推文，这非常令人沮丧。

有谁知道这会导致什么？以及如何让小部件以正确的顺序拉推文？

谢谢

BIOS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:18:56.453

搜索可以根据推文的受欢迎程度返回推文。

将此添加到您的查询中

```
result_type=recent 
```

请参阅[文档](https://dev.twitter.com/docs/api/1/get/search)。

# python - 在 2d 直方图中设置 bin 颜色（多色图）

> ID：10869983
> 
> 赞同：1
> 
> 时间：2012-06-03T11:36:37.763
> 
> 标签：python, matplotlib

我正在尝试创建一个覆盖三个单独数据集的二维直方图。我的想法是将数据集着色为红色、绿色和蓝色，以便 bin 中红色数据的密度对应于该 bin 颜色的红色值，蓝色和绿色也是如此。

有这方面的[例子](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2583940/figure/F2/)，但据我所知，matplotlib 中没有多色绘图的实现。

进入表格的网格

```
[[ (r,g,b) , (r,g,b) ... (r,g,b) ] ,
 [ (r,g,b) , (r,g,b) ...         ] , 
   .......                   
 [ (r,g,b) , (r,g,b) ... (r,g,b) ]] 
```

完全没有问题。问题是我发现的所有绘图函数都想将单个 bin 值映射到色标上，它们不允许我设置 bin 的全色值。

我应该寻找一些原始的东西吗？是否已经有直方图可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:57:23.903

如果您的数据已经是 RGB 格式（加权在 0 和 1 之间），那么`imshow`会将-`(M,N,3)`形数组解释为 RGB 数组。用于`interpolation='nearest'`像素化输出：

```
import numpy as np
import matplotlib.pyplot as plt

# Example pixel array
pixels = np.random.rand(100,100,3)
reds = pixels[:,:,1:] = 0\.          # Remove B and G

plt.imshow(reds, interpolation='nearest') 
```

如果它存储为元组列表，则 a`np.array(...)`将进行转换。

# eclipse - 为 Eclipse 安装“objectaid”功能

> ID：10869985
> 
> 赞同：3
> 
> 时间：2012-06-03T11:37:00.683
> 
> 标签：eclipse, eclipse-plugin, installation, diagram

我尝试安装图表的功能 - 用于 eclip 的“objectaid” .. 我在`http://www.objectaid.com/installation`安装过程中按照手册中的所有说明进行操作，但出现错误 -

```
Unable to read repository at http://www.objectaid.com.
Unable to read repository at http://www.objectaid.com.
http://www.objectaid.com is not a valid repository location. 
```

我检查了所有需要的先决条件，`GEF (Graphical Editor Framework)`没关系。

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:38:11.780

看起来更新站点是一个旧的更新站点。我不知道 Eclipse 是否仍然支持它们。

最好的办法是下载该功能的 zip，您可以在此处找到： [http ://www.objectaid.com/update/](http://www.objectaid.com/update/)

然后将其解压缩到您的 eclipse/dropins 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T09:13:16.330

ObjectAid 更新站点确实有效。我最近成功地将 ObjectAid 添加到我的 Eclipse Mars。[我在这里](http://evverythingatonce.blogspot.in/2016/04/tech-talk-reverse-uml-generator-in.html)编译了这些步骤。你可以试试看。此外，请确保在尝试时没有防火墙或网络问题。

# c++ - template using code error

> ID：10869987
> 
> 赞同：0
> 
> 时间：2012-06-03T11:37:33.803
> 
> 标签：c++, templates

I've recently started learning C++ and have a problem with understanding template mechanism. The task is first of all to build a user-defined binary tree. I can't compile my code.

```
#include <iostream>
using namespace std;
template <typename DataType> struct TreeNode
{
    TreeNode(DataType val, TreeNode *leftPtr = null, TreeNode *rightPtr = null)
    {
        left = leftPtr;
        right = rightPtr;
        data = val;
    }
    TreeNode *left, *right;
    DataType data;
};
template <typename DataType> TreeNode *BuildTree()
{
    TreeNode *root = new TreeNode(10, new TreeNode(20), new TreeNode(30));

    TreeNode *curRoot = root;
    curRoot = curRoot->left;
    curRoot->left = new TreeNode(40);
    curRoot->left->left = new TreeNode(70);
    curRoot->right = new TreeNode(50);
    curRoot = curRoot->right;
    curRoot->left = new TreeNode(80, new TreeNode(100), new TreeNode(110));
    curRoot = root->right;
    curRoot->left = new TreeNode(60);
    curRoot = curRoot->left;
    curRoot->right = new TreeNode(90, new TreeNode(120), new TreeNode(130));

    return root;
}
int main()
{
    TreeNode *treeRoot = BuildTree<int>();
    cin.get();
    return 0;
} 
```

Function `BuildTree` builds the concrete instance of tree, with concrete data type. Please help me to understand my mistake. Please don't pay attention to the fact I don't free memory after using. That's just a draft.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T11:40:21.047

Since `TreeNode` is a template class, you have to specify the specialization when you use it:

```
template <typename DataType> TreeNode *BuildTree() 
```

should be

```
template <typename DataType> TreeNode<DataType> *BuildTree() 
```

and

```
TreeNode *root = new TreeNode(10, new TreeNode(20), new TreeNode(30)); 
```

should be

```
TreeNode<DataType> *root = new TreeNode(10, new TreeNode(20), new TreeNode(30)); 
```

and others in the method, plus in `main`:

```
TreeNode<int> *treeRoot = BuildTree<int>(); 
```

instead of

```
TreeNode *treeRoot = BuildTree<int>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:43:43.447

I think your code should look like this:

```
#include <iostream>
using namespace std;
template <typename DataType> struct TreeNode
{
    TreeNode(DataType val, TreeNode<DataType> *leftPtr = null, TreeNode<DataType> *rightPtr = null)
    {
        left = leftPtr;
        right = rightPtr;
        data = val;
    }
    TreeNode<DataType> *left, *right;
    DataType data;
};
template <typename DataType> TreeNode<DataType> *BuildTree()
{
    TreeNode<DataType> *root = new TreeNode(10, new TreeNode<DataType>(20), new TreeNode<DataType>(30));

    TreeNode<DataType> *curRoot = root;
    curRoot = curRoot->left;
    curRoot->left = new TreeNode<DataType>(40);
    curRoot->left->left = new TreeNode<DataType>(70);
    curRoot->right = new TreeNode<DataType>(50);
    curRoot = curRoot->right;
    curRoot->left = new TreeNode<DataType>(80, new TreeNode<DataType>(100), new TreeNode<DataType>(110));
    curRoot = root->right;
    curRoot->left = new TreeNode<DataType>(60);
    curRoot = curRoot->left;
    curRoot->right = new TreeNode<DataType>(90, new TreeNode<DataType>(120), new TreeNode<DataType>(130));

    return root;
}
int main()
{
    TreeNode<int> *treeRoot = BuildTree<int>();
    cin.get();
    return 0;
} 
```

# php - Jquery将php文件加载到div中似乎不起作用

> ID：10869998
> 
> 赞同：-1
> 
> 时间：2012-06-03T11:39:19.187
> 
> 标签：php, jquery

所以我得到了这个脚本：

```
$(document).ready(function(){
$("#feedback").load('check.php');
}); 
```

我想加载 check.php 文件。进入带有 id 反馈的 div。它不会工作。我想念什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:53:46.213

'check.php' 必须在存储当前 php 文件的同一目录中。如果您无法更改文件的位置。更改代码中的路径，例如

```
$("#feedback").load('../path/to/folder/check.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:09:42.317

index.php 在您的问题“localhost/firstapp/ **index.php** /tblUsers/create”文件夹或文件中吗？