# StackOverflow 问答 11100000-11100999

# google-maps-api-3 - Google 地图 KmlLayer 超时且 InfoWindow 未显示

> ID：11100001
> 
> 赞同：0
> 
> 时间：2012-06-19T11:28:36.520
> 
> 标签：google-maps-api-3, kml

我在一个站点中嵌入了一个谷歌地图，该站点使用 KmlLayer在[https://www.getstable.org/who-can-help/treatment-map-kml加载一个 kml 文件。](https://www.getstable.org/who-can-help/therapist-map-kml)有时地图无法加载，我想是因为谷歌地图有严格的超时时间，而且地图上的一些图钉通常不可点击，但有些则没有明确的原因。有谁知道 kmlLayer 的超时限制是多少以及如何增加它？还有什么原因为什么有时某些图钉不可点击（即，当您单击图钉并且光标不会变成手时，不会出现信息窗口）？

这是显示它的代码（一些字段是模板化的）：

```
 <div id="map_canvas" style="width: 856px;height: 540px;">Loading...</div> 
    <script type="text/javascript" src="{protocol}://maps.google.com/maps/api/js?sensor=false"></script>

        <script type="text/javascript">
            var the_map = {
                options : { 
                        zoom:{embed:zoom_level},
                        center:new google.maps.LatLng({embed:latitude},{embed:longitude}),
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                },  
                geocoder : null,
                map : null,
                init : function() {
                    this.geocoder = new google.maps.Geocoder();

                      $('#map_canvas').delegate('a', 'click', function(event) {
                        window.location.href=$(this).attr('href');
                        return false;
                      });
                },                  
                load_map : function() {
                    this.map = new google.maps.Map(document.getElementById("map_canvas"), this.options);

                        query = encodeURI('{site_url}{embed:map_url}');                     
                  var ctaLayer = new google.maps.KmlLayer(query,{
                      preserveViewport:true
                  });
                  ctaLayer.setMap(this.map);      
                }
            }
            $(document).ready(function() {
                the_map.init();
                the_map.load_map();
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:29:02.397

谷歌服务器有一个未指定的超时，但测试显示它是 3-5 秒。此超时不是您可以影响的。解决方案是让您的服务器响应更快。这个问题几乎总是归结为一个太大的文件（你的不是）或动态生成 KML。您需要对此进行优化，这可能意味着要找到一种方法来创建静态 KML 文件。

不可点击的功能几乎肯定是您的 KML 的问题。您可以验证您的 KML 以检查这一点：

*   [提要验证器](http://feedvalidator.org/check.cgi?url=https://www.getstable.org/who-can-help/therapist-map-kml)
*   [KML 验证器](http://kmlvalidator.com/home.htm)

您还可以通过在[maps.google.com](https://maps.google.com/?q=https://www.getstable.org/who-can-help/therapist-map-kml)上加载来测试您的 KML 。

# sql - 在没有延迟约束的情况下工作的正确模式是什么？

> ID：11100004
> 
> 赞同：3
> 
> 时间：2012-06-19T11:28:50.827
> 
> 标签：sql, unique-constraint

我使用的数据库不是 Oracle 或 Postgresql，这意味着我无权访问延迟约束，这意味着约束必须始终有效（而不仅仅是提交时）。

假设我在数据库中存储了一个链表类型结构，如下所示：

```
id     parentId
---------------
1      null
2      1
3      2
4      3
5      4
6      5 
```

`parentId`是对 的外键引用`id`，并且通过约束必须是唯一的。

假设我想将 item 移动`5`到 item 之前`1`，所以我们的数据库看起来像这样：

```
id     parentId
---------------
1      null
2      5 <-- different
3      2
4      3
5      1 <-- different
6      4 <-- different 
```

需要更改三行，即三个更新语句。这些更新语句中的任何一个都将导致违反约束：在约束再次有效之前，所有三个语句都必须完成。

我的问题是：**不违反唯一性约束的最佳方法是什么？**

我目前可以设想两种不同的解决方案，但我都不喜欢：

*   *将*每个受影响的设置`parentId`为`null`然后执行三个更新
**   完全改变我的数据模型，使它更像是一个“写入时复制”风格的版本数据库，这些问题都不是问题。*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:34:15.843

您可以在单个查询中执行此操作。我敢肯定这有很多变化，但这是我会使用的......

```
DECLARE
  @node_id         INT,
  @new_parent_id   INT
SELECT
  @node_id         = 5,
  @new_parent      = 1

UPDATE
  yourTable
SET
  parent_id = CASE WHEN yourTable.id = target_node.id    THEN new_antiscendant.id
                   WHEN yourTable.id = descendant.id     THEN target_node.parent_id
                   WHEN yourTable.id = new_descendant.id THEN target_node.id
              END
FROM
  yourTable          AS target_node
LEFT JOIN
  yourTable          AS descendant
    ON descendant.parent_id = target_node.id
LEFT JOIN
  yourTable          AS new_antiscendant
    ON new_antiscendant.id = @new_parent_id
LEFT JOIN
  yourTable          AS new_descendant
    ON COALESCE(new_descendant.parent_id, -1) = COALESCE(new_antiscendant.id, -1)
INNER JOIN
  yourTable
    ON yourTable.id IN (target_node.id, descendant.id, new_descendant.id)
WHERE
  target_node.id = @node_id 
```

即使 @new_parent_id 为 NULL 或列表中的最后一条记录，这也将起作用。

MySQL 不喜欢更新中的自联接，因此该方法可能是将 LEFT JOIN 放入临时表中以获取新映射。然后加入该表以在单个查询中更新所有三个记录。

```
INSERT INTO
  yourTempTable
SELECT
  yourTable.id    AS node_id,
  CASE WHEN yourTable.id = target_node.id    THEN new_antiscendant.id
       WHEN yourTable.id = descendant.id     THEN target_node.parent_id
       WHEN yourTable.id = new_descendant.id THEN target_node.id
  END             AS new_parent_id
FROM
  yourTable          AS target_node
LEFT JOIN
  yourTable          AS descendant
    ON descendant.parent_id = target_node.id
LEFT JOIN
  yourTable          AS new_antiscendant
    ON new_antiscendant.id = @new_parent_id
LEFT JOIN
  yourTable          AS new_descendant
    ON COALESCE(new_descendant.parent_id, -1) = COALESCE(new_antiscendant.id, -1)
INNER JOIN
  yourTable
    ON yourTable.id IN (target_node.id, descendant.id, new_descendant.id)
WHERE
  target_node.id = @node_id

UPDATE
  yourTable
SET
  parent_id = yourTempTable.newParentID
FROM
  yourTable
INNER JOIN
  yourTempTable
    ON yourTempTamp.node_id = yourTable.id 
```

*（确切的语法取决于您的 RDBMS。）**

# codeigniter - codeigniter 2.0 hybridAuth 库集成

> ID：11100009
> 
> 赞同：0
> 
> 时间：2012-06-19T11:29:11.543
> 
> 标签：codeigniter, hybridauth

我已经从sourceforge下载了使用hybridauth的codeigniter库...我已经将所有内容都作为readme.md文件完成了..但是当我运行代码时，它没有登录，而是指向我的本地主机..你认为有什么问题？？ ?

# microsoft-metro - 在 Metro 风格应用程序 C# 中传递超过 1 个参数

> ID：11100011
> 
> 赞同：0
> 
> 时间：2012-06-19T11:29:25.117
> 
> 标签：microsoft-metro

我有一个**班级学生**，有 2 个变量，一个是字符串**名称**，另一个是整数**roll**。使用 `this.frame.Navigate(typeof(Page1),s1);`//s1 是班级学生的一个对象 我正在尝试将一个对象传递给 page1

但我无法访问 page1 上 s1 的任何变量。

在 Page1 的 NavigatedTo 方法中，我写过：

```
student x= e.Parameter as student;
student n= new student();
n.name=x.name; 
```

无论我尝试访问对象 x 变量，它都会抛出“用户代码未处理的 NullReferenceException”“对象引用未设置为对象的实例”

无法找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:37:20.987

你试过使用`student x = e.ExtraData as student`吗？这是一些相关的[Msdn doco。](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigatingcanceleventargs.extradata.aspx)

# awk - 如何使用 awk 拆分行？

> ID：11100012
> 
> 赞同：3
> 
> 时间：2012-06-19T11:29:46.023
> 
> 标签：awk

我有一个如下的文本文件。

```
 A/B     C/D     E/F 
  1      0.6     4.6  
 2.3      2      0.78 

 A/B     C/D     E/F
  2      5        2
  3      6        4
  ...
  ...
  ...
  ...

 A/B     C/D     E/F
 5       0.8     0.88
8.88     0.35    0.68 
```

我必须按以下方式更改行。我怎样才能用 awk 做到这一点？如何将输出保存到电子表格？

```
A     B    C     D    E     F 
1   2.3   0.6    2   4.6   0.78
2    3    5      6    2    4 
...
...
...

5   8.8   0.8   0.35  0.88  0.68 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:16:30.130

### `awk`：

```
awk '
BEGIN{
    RS=""
    print "A", "B"
}
{
    print $4, $7
}' input.txt 
```

### 结果：

```
A B
1 2.3
2 3 
```

* * *

当`RS`is时`empty`，awk 会将数据解释为多行记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:46:21.900

我同意`kev`。将记录分隔符从换行符（默认）更改为空：

```
awk 'BEGIN { RS=""; OFS=FS="\t"; print "A", "B", "C", "D", "E", "F" } { split ($2, one, " "); split ($3, two, " "); print one[1], two[1], one[2], two[2], one[3], two[3] }' file.txt 
```

结果：

```
A   B   C   D   E   F
1   2.3 0.6 2   4.6 0.78
2   3   5   6   2   4 
```

**编辑：**

我认为您可能需要先删除前导和/或滞后空格（我会使用`sed`它），然后将输出通过管道传输到上面`awk`：

```
sed 's/^[ \t]*//; s/[ \t]*$//' file.txt | awk 'BEGIN { RS=""; OFS=FS="\t"; print "A", "B", "C", "D", "E", "F" } { split ($2, one, " "); split ($3, two, " "); print one[1], two[1], one[2], two[2], one[3], two[3] }' 
```

高温高压

# java - 谷歌应用引擎 http 请求

> ID：11100013
> 
> 赞同：1
> 
> 时间：2012-06-19T11:29:50.190
> 
> 标签：java, android, http, dns, ip

我正在制作一个与谷歌应用引擎交互的应用程序。我遇到了一些超时问题。而且这个问题很烦人。大约每 10 个请求中。9次我得到这个错误

```
org.apache.http.conn.scheme.plainsocketfactory.connectsocket 
```

基本上，每当我尝试发布`http`请求`abc.appspot.com`时，它都会进行反向 DNS 查找。我认为 Android 在 DNS 反向查找方面存在一些[问题](http://mailinglists.945824.n3.nabble.com/Android-and-reverse-DNS-lookup-issues-td3011461.html)。但是我们在谷歌应用引擎只有不同的别名，只有 1 个 IP 地址。

有没有办法使用别名（在这种情况下）直接向谷歌应用引擎的 ip 发送请求，以`abc`避免 DNS 查询？？？

发现[重复](https://stackoverflow.com/questions/5591384/ip-address-block-of-appengine-servers)但没有真正帮助。

任何帮助表示赞赏。

# php - 保留字符串的原始值并将其解码为 json

> ID：11100017
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:30:03.873
> 
> 标签：php, json

我想保留目标字段的原始值并使用 json_decode 将以下字符串用作对象：

```
{
    "translatorID": "f4a5876a-3e53-40e2-9032-d99a30d7a6fc",
    "label": "ACL",
    "creator": "Nathan Schneider",
    "target": "^https?://(www[.])?aclweb\\.org/anthology-new/[^#]+",
    "minVersion": "1.0.7",
    "maxVersion": "",
    "priority": 100,
    "browserSupport": "gcs",
    "inRepository": true,
    "translatorType": 4,
    "lastUpdated": "2012-01-01 01:42:16"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:31:44.053

在解析之前你可以做的`json_decode`是：

```
$string = str_replace('\\', '\\\\\\\\', $string);
var_dump(json_decode($string, true)); 
```

这一定是 json 解析器中的错误。
该方法不是很干净，但至少您得到了结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:52:45.247

你试过把斜线去掉吗？

这对我有用：

```
$string = '{
    "translatorID": "f4a5876a-3e53-40e2-9032-d99a30d7a6fc",
    "label": "ACL",
    "creator": "Nathan Schneider",
    "target": "^https?://(www[.])?aclweb\.org/anthology-new/[^#]+",
    "minVersion": "1.0.7",
    "maxVersion": "",
    "priority": 100,
    "browserSupport": "gcs",
    "inRepository": true,
    "translatorType": 4,
    "lastUpdated": "2012-01-01 01:42:16"
}';

var_dump( json_decode(stripslashes ($string))); 
```

# javascript - 如何使我的弹出窗口不透明且可横向拖动？

> ID：11100022
> 
> 赞同：0
> 
> 时间：2012-06-19T11:30:24.647
> 
> 标签：javascript, jquery, html, css

我正在制作一个 Jquery 弹出/对话框，并且我已经设法将它定位在页面上，以便通过单击使 div 呈现在其他元素上，但页面是透明的，当我拖动它时，我可以向上和向下拖动它但是当我将它横向拖动时，它会调整大小而不是移动。你能告诉我我能做些什么来解决这两个问题吗？

看起来像这样

![在此处输入图像描述](../Images/ec24849c98199136ce4df17d423430b3.png)

我的弹出 HTML 是

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>popup</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>

<table width="100%" border="0" cellspacing="0" cellpadding="2" align="center" class="TB_nb">
  <tr>
  <td colspan="3" class="pusher TB_nb"><h2>Sök person/företag</h2> 
</td>
  <td><a href="javascript:void(0)" onclick="document.getElementById('popupSokNamn').style.display = 'none';" >X</a></td>
</tr>
</table>
<br><br>
<h2 class="pusher">Sök person/företag</h2>
<div id="Vsok">

<div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;">
<span onClick="getElementById('sokF').style.display='', getElementById('bottomA').style.display='none', getElementById('bottomV').style.display='', getElementById('Vsok').style.display='none'" class="link_sm">Visa s&ouml;kformul&auml;r</span>
</div>

</div>

<div id="sokF">

<div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;; padding-bottom: 5px;">
<span onClick="getElementById('sokF').style.display='none', getElementById('bottomA').style.display='none', getElementById('bottomV').style.display='', getElementById('Vsok').style.display=''" class="link_sm">D&ouml;lj s&ouml;kformul&auml;r</span>
</div>

<div style="width: 100%; margin-left: 15px; margin-right: 80px;" class="fontS80">
<fieldset style="border: 1px solid Grey; display:inline;"><legend class="small">Fysisk</legend> 
<div class="fl30">&nbsp;F&ouml;rnamn:</div>
<div class="fl50"><input type="text" size="60" name="searchFornamn" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>
<div class="fl30">&nbsp;Efternamn:</div>
<div class="fl50"><input type="text" size="60" name="searchEfternamn" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
</fieldset>

<fieldset style="border: 1px solid Grey; display:inline;"><legend class="small">Juridisk</legend> 
<div class="fl30">&nbsp;F&ouml;retag:</div>
<div class="fl50"><input type="text" size="60" name="searchForetag" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>
<div class="fl30">&nbsp;Organisationsnummer:</div>
<div class="fl50"><input type="text" size="60" name="searchOrgNummer" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
</fieldset> <br><br>

<!-- <div class="fl30">Attention, c/o etc.:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>

<div class="fl30">Postadress:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>

<div class="fl30">Postnummer:</div>
<div class="fl50"><input type="text" size="30"></div>
<div class="clear"></div> -->

<div class="fl30">Postort:</div>
<div class="fl50"><input type="text" size="40" name="searchPostort" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>

<div class="fl30">Land:</div>
<div class="fl50"><input type="text" size="2" name="searchLandKod" onkeyup="doSubmitByEnter('Namnsokning', 'search')">&nbsp;
                    <select name="searchLand" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
                        <option value="1" SELECTED></option>
                        <option value="2"></option>
                        <option value="3"></option>
                        <option value="4"></option>
                        <option value="5">---------------------------------</option>
</select></div>
<div class="clear"></div>

<!-- <div class="fl30">Region:</div>
<div class="fl20"><select name="">
                        <option value="1" SELECTED></option>
                        <option value="2"></option>
                        <option value="3"></option>
                        <option value="4"></option>
                        <option value="5">-----------------------------------------------</option>
</select></div>
<div class="clear"></div>
<div class="fl30">Tel:</div>
<div class="fl50"><input type="text" size="40"></div>
<div class="clear"></div>

<div class="fl30">Fax:</div>
<div class="fl50"><input type="text" size="40"></div>
<div class="clear"></div>

<div class="fl30">E-post:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>
 -->
<div class="fl50">&nbsp;</div>
<div class="fl5"><input type="button" value="Rensa"></div>
<div class="fl10"><input type="button" value="  S&ouml;k  " onclick="javascript:doSubmit('Namnsokning', 'search')"></div>
<div class="clear">&nbsp;</div>
<div class="clear">&nbsp;</div>
</div>

</div>

<table width="100%" border="0" cellspacing="0" cellpadding="4" align="center">
<tr>    
    <td><h3>Sökresultat:</h3></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr>    
    <td colspan="4">En massa text <span class="link">Hj&auml;lp!</span> </td>
</tr>
<tr>    
    <td><input type="button" value="Visa alla"></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr class="smallb">
    <td>Antal &auml;renden: 527</td>
    <td>&nbsp;</td>
    <td>Visa &auml;renden: &#60;&#60; 1-200 201-400 401-527 &#62;&#62; </td>
<td>&nbsp;</td>
</tr>
</table>

<table width="100%" cellspacing="0" align="center" class="sortable" id="unique_id">
<tr>
    <th class="thkant">F&ouml;rnamn</th>
    <th class="thkant">Efternamn</th>
    <th class="thkant">Adress</th>
    <th class="thkant">Postnr</th>
    <th class="thkant">Postort</th>
    <th class="thkant">Region</th>
    <th class="thkant">Land</th>
    <th class="thkant">Telefonnummer</th>
</tr>

</table>

<div id="bottomV">
<table width="100%" align="center">
<tr>
<td align="left"><input type="button" id="visaknapp" value="Visa" disabled style="width:150px;" onClick="getElementById('sokR').style.display='', getElementById('bottomA').style.display='', getElementById('bottomV').style.display='none', getElementById('Vsok').style.display='', getElementById('sokF').style.display='none'"></td>
<td align="right"><input type="button" value="Avbryt" style="width:150px;" class="checkmargin"><input type="button" value="Infoga" disabled style="width:150px;"></td>
</tr>
</table>
</div>

<div id="bottomA" style="display: none">
<table width="100%" align="center">
<tr>
<td align="left"><input type="button" value="&Auml;ndra i register" style="width:150px;"></td>
<td align="right"><input type="button" value="Avbryt" style="width:150px;" class="checkmargin"><input type="button" value="Infoga" style="width:150px;"></td>
</tr>
</table>

</body>
</html> 
```

CSS是

```
.newpopup {
  position: absolute; 
  top:50%;
  left:50%;
} 
```

Javascript是

```
function popup() {
    alert('test');
    var popup = $('.newpopup');
    popup.draggable();
    popup.resizable();
    //popup.html('<p>Where is pancakes house?</p>');
    //popup.show('fast');

       $.get('/PandoraArendeWeb/popup.jsp', function(data) {   

        popup.html(data); 
        popup.show('fast'); 
    }); 

    var screen_width = $(document).width();
var screen_height = $(document).height();
var box_width = popup.width();
var box_height = popup.height();

var top = (screen_height - box_height) / 2; // you might like to subtract a little to position it slightly higher than half way
var left = (screen_width - box_width) / 2;
    popup.css({ 'position': 'absolute', 'top':top, 'left':left });
}
$(document).ready(function(){
  $('button').click(function(){
     popup();
  });
}) 
```

请告诉我如何

1) 使弹出窗口不透明 2) 使弹出窗口可横向拖动

实际激活弹出窗口的 HTML 很简单：

```
<div class='newpopup'>
</div>
<button>popup</button> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:36:27.713

[好的，我在这里](http://jsfiddle.net/RZWPR/2/)使用 jsfiddle 创建了简单的测试用例，我不认为你的 jquery 有什么问题，但我相信它是 ajax 调用，所以在你的服务器上测试它以确保你的 ajax 调用正常工作（因为我不能），如果你ajax 调用失败它不会弹出。在测试用例中，它会警告“错误”。

HTML：

```
<button>popup</button>
<div class='newpopup'>
</div> 
```

jQuery：

```
function popup() {
    alert('opening popup');
    var popup = $('.newpopup');
    popup.draggable();
    popup.resizable();
    //popup.html('<p>Where is pancakes house?</p>');
    //popup.show('fast');

    //Comment me out and use the version below to show working
    $.ajax({url:'/PandoraArendeWeb/popup.jsp',
            error: function() {
                alert('Error');
            },
            success: function(data) {   
                popup.html("test"); 
                popup.show('fast');
            }
       }
   ); 

   /*
    popup.html("test"); 
    popup.show('fast');
    */
    var screen_width = $(document).width();
var screen_height = $(document).height();
var box_width = popup.width();
var box_height = popup.height();

var top = (screen_height - box_height) / 2; // you might like to subtract a little to position it slightly higher than half way
var left = (screen_width - box_width) / 2;
    popup.css({ 'position': 'absolute', 'top':top, 'left':left });
}
$(document).ready(function(){
  $('button').click(function(){
     popup();
  });
})​ 
```

​ CSS：

```
.newpopup {
  position: absolute; 
  top:50%;
  left:50%;
  background-color:#ff0; //Yellow
} ​ 
```

**编辑** 只记得尝试注释掉ajax并使用下面的位。弹出窗口显示，您可以拖动它:)

# asp.net - ASP.NET 静态子菜单类

> ID：11100027
> 
> 赞同：0
> 
> 时间：2012-06-19T11:30:32.063
> 
> 标签：asp.net, .net

我有以下代码：

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" staticdisplaylevels="2"
    EnableViewState="False" IncludeStyleBlock="False" Orientation="Horizontal">
    <Items>
        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Homepage">
            <asp:MenuItem Text="New Element" Value="New Element"></asp:MenuItem>
            <asp:MenuItem Text="New Element" Value="New Element"></asp:MenuItem>
            <asp:MenuItem Text="New Element" Value="New Element"></asp:MenuItem>
        </asp:MenuItem>
        <asp:MenuItem NavigateUrl="~/About.aspx" Text="Info"/>
    </Items>
</asp:Menu> 
```

这是一个简单的静态 .NET 菜单控件。与`staticdisplaylevels="2"`顶部菜单项一样，子菜单也静态显示在同一行中。但我希望子菜单项显示在顶部菜单项行下的另一行中。我怎样才能做到这一点？有没有办法为我可以通过 CSS 定位的所有子菜单项提供 CSS 类？

生成的 HTML 如下：

```
<ul class="level1 static" tabindex="0" style="position: relative; width: auto; float: left;" role="menubar">

<li class="static" role="menuitem" style="position: relative; float: left;">
<a class="level1 static" href="Default.aspx" tabindex="-1">Homepage</a>
</li>

<li class="static" role="menuitem" style="position: relative; float: left;">
<a class="level2 static" href="#" tabindex="-1">New Element</a>
</li>

<li class="static" role="menuitem" style="position: relative; float: left;">
<a class="level2 static" href="#" tabindex="-1">New Element</a>
</li>

<li class="static" role="menuitem" style="position: relative; float: left;">
<a class="level2 static" href="#" tabindex="-1">New Element</a>
</li>

<li class="static" role="menuitem" style="position: relative; float: left;">
<a class="level1 static" href="About.aspx" tabindex="-1">Info</a>
</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:12:16.187

您可以在样式表中使用以下代码

```
.menu{}
.menu table table {
                   margin-top:10px;} 
```

并在您的菜单中添加上述类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:49:13.483

不，没有内置属性来设置它的样式。

但是你可以使用这样的风格。鉴于 asp 如何呈现其菜单（在表格中），这将允许您向内部表格添加样式。

```
<style>
    .menu{background: #eee;}
    .menu table table {background: #ddd;}
</style> 
```

# android - Android：将短信 (SMS) 标记为未读

> ID：11100031
> 
> 赞同：6
> 
> 时间：2012-06-19T11:30:42.890
> 
> 标签：android, sms

出于某种原因，Android 上的任何短信应用程序似乎都提供了将短信标记为未读的非常基本的功能（即使是旧的哑手机也有）。

我正在考虑自己编写这样一个应用程序，但在开始之前，我想知道一点关于如何做到这一点以及为什么以前没有这样做过。当然这不是不可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:30:05.010

***注意：****首先，只是为了让您知道在 Android 中使用消息系统*（2.3 或更低版本）中的消息系统并不典型，因为使用诸如 SMS 之类的东西需要使用官方不可用的内容提供者进行查询，而且 Android 家伙也有警告过它。您可以在以下 URL 中查看它： [http ://android-developers.blogspot.in/2010/05/be-careful-with-content-providers.html](http://android-developers.blogspot.in/2010/05/be-careful-with-content-providers.html)

**进一步为您的解决方案，只是为了每个人的关注，我想根据 Android 操作系统版本划分我的解释：**

**- 版本 2.3 或更低版本：** 是的，应用程序在[Pankaj Kumar](https://stackoverflow.com/users/550966/pankaj-kumar)的指导下制作起来非常简单，并且适用于上述 Android 操作系统版本及更低版本。

**- 4.0 及以上版本：** 应用程序将***失败且无法工作***。是的，正如 Android Dev Guys 所警告的那样，从这个版本及更高版本开始，您将无法阅读我尝试过的消息内容，因此您的应用程序将无法在即将发布的 Android 版本上运行。您只能获取它们的编号，例如：收件箱、已发送、发件箱失败等……但您无法修改或阅读内容。

**- 版本 > 3.0 & < 4.0：** 从未测试和尝试过。

希望这些信息对您有所帮助并节省您走死胡同的时间:)))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:16:41.897

干得好

**SMS 数据库具有以下列**

```
06-19 17:41:19.723: V/vipul(25223): _id
06-19 17:41:19.723: V/vipul(25223): thread_id
06-19 17:41:19.723: V/vipul(25223): address
06-19 17:41:19.723: V/vipul(25223): person
06-19 17:41:19.723: V/vipul(25223): date
06-19 17:41:19.723: V/vipul(25223): protocol
06-19 17:41:19.723: V/vipul(25223): read
06-19 17:41:19.723: V/vipul(25223): status
06-19 17:41:19.723: V/vipul(25223): type
06-19 17:41:19.723: V/vipul(25223): reply_path_present
06-19 17:41:19.723: V/vipul(25223): subject
06-19 17:41:19.723: V/vipul(25223): body
06-19 17:41:19.723: V/vipul(25223): service_center
06-19 17:41:19.723: V/vipul(25223): locked
06-19 17:41:19.723: V/vipul(25223): error_code
06-19 17:41:19.723: V/vipul(25223): seen
06-19 17:41:19.723: V/vipul(25223): deletable
06-19 17:41:19.723: V/vipul(25223): hidden
06-19 17:41:19.723: V/vipul(25223): group_id
06-19 17:41:19.723: V/vipul(25223): group_type
06-19 17:41:19.723: V/vipul(25223): delivery_date
06-19 17:41:19.723: V/vipul(25223): date_sent 
```

下面的代码段将所有 SMS 标记为未读，您可以将其更改为匹配 id 并仅使该 SMS 未读

```
package org.vipul;

import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;

public class SMSSampleActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Uri uri = Uri.parse("content://sms/inbox");
        Cursor cursor = managedQuery(uri, null, null, null, null);

        for (int i = 0; i < cursor.getColumnCount(); i++) {
            Log.i("vipul", cursor.getColumnName(i));
        }

        if (cursor.moveToFirst()) {
            do {

                String id = cursor.getString(0);

                ContentValues contentValues = new ContentValues();
                contentValues.put("read", false);
                getContentResolver().update(uri, contentValues, "_id=?",
                        new String[] { id });
                contentValues.clear();
            } while (cursor.moveToNext());

        }
    }
} 
```

最后在清单中添加`android.permission.READ_SMS`ans`android.permission.WRITE_SMS`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:37:27.820

有一个名为“标记为未读”的应用程序，由 Christian Asbjørn Skogsberg 发布（检查它）所以我想这是可能的。

# iphone - 如何换行 OHAttributedLabel

> ID：11100039
> 
> 赞同：1
> 
> 时间：2012-06-19T11:31:04.373
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsattributedstring

如何换行[OHAttributedLabel](http://github.com/AliSoftware/OHAttributedLabel)？我下面的代码不起作用。

```
OHAttributedLabel *lbl = [[OHAttributedLabel alloc] init];
lbl.lineBreakMode = UILineBreakModeTailTruncation; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:33:30.603

将标准换行符（\n、\r、\r\n、Unicode 段落分隔符）附加到属性文本属性应该可以解决问题。

# html - 你如何自动将文本框设置为大写？

> ID：11100041
> 
> 赞同：166
> 
> 时间：2012-06-19T11:31:31.400
> 
> 标签：html

我正在使用以下样式属性将用户输入设置为大写，这样当用户开始在文本框中输入时，例如`railway`，它应该被更改为大写字母，就像`RAILWAY` 用户不必按下 Caps-lock 按钮一样。

这是我用于输入的代码：

```
<input type = "text" class = "normal" name = "Name" size = "20" maxlength = "20"> <img src="../images/tickmark.gif" border="0" style='text-transform:uppercase'/> 
```

但是我没有通过使用这个属性得到想要的输出。

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-06-19T11:35:20.103

您已将`style`属性放在`<img>`标签上，而不是`<input>`.

在属性名称和值之间有空格也不是一个好主意......

```
<input type="text" class="normal" 
       name="Name" size="20" maxlength="20" 
       style="text-transform:uppercase" /> 
<img src="../images/tickmark.gif" border="0" /> 
```

请注意，这种转换**纯粹是**视觉的，不会改变 POST 中发送的文本。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2018-04-18T16:36:45.780

我认为确保它以大写形式发布的最强大的解决方案是使用 oninput 内联方法，例如：

```
<input oninput="this.value = this.value.toUpperCase()" />
```

**编辑**

有些人一直抱怨编辑值时光标会跳到末尾，所以这个稍微扩展的版本应该可以解决这个问题

```
<input oninput="let p=this.selectionStart;this.value=this.value.toUpperCase();this.setSelectionRange(p, p);" />
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2016-06-03T14:44:59.160

带有样式的答案`text-transformation:uppercase`不会在提交时将大写数据发送到服务器 - 这是您可能期望的。你可以这样做：

对于您的输入 HTML，请使用 onkeydown：

```
<input name="yourInput" onkeydown="upperCaseF(this)"/> 
```

在您的 JavaScript 中：

```
function upperCaseF(a){
    setTimeout(function(){
        a.value = a.value.toUpperCase();
    }, 1);
} 
```

每次按下按键时，`upperCaseF()`输入的值都会变成大写形式。

我还添加了 1ms 的延迟，以便在 keydown 事件发生后触发功能代码块。

**更新**

根据 Dinei 的建议，您可以使用 oninput 事件而不是 onkeydown 并摆脱`setTimeout`.

对于您的输入 HTML，请使用 oninput：

```
<input name="yourInput" oninput="this.value = this.value.toUpperCase()"/> 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-03-22T19:13:36.350

第一个答案的问题是占位符也是大写的。如果您只希望输入为大写，请使用以下解决方案。

为了只选择非空输入元素，在元素上放置 required 属性：

```
<input type="text" id="name-input" placeholder="Enter symbol" required="required" /> 
```

现在，为了选择它，使用`:valid`伪元素：

```
#name-input:valid { text-transform: uppercase; } 
```

这样，您将只输入大写字符。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-06-19T11:35:05.460

尝试

```
<input type="text" class="normal" 
       style="text-transform:uppercase" 
       name="Name" size="20" maxlength="20"> 
 <img src="../images/tickmark.gif" border="0"/> 
```

而不是图像将样式标签放在输入上，因为您在输入而不是图像上书写

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-06-29T06:04:54.930

设置以下样式以将所有文本框设置为大写

```
input {text-transform: uppercase;} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-07-06T22:30:40.710

使用 CSS`text-transform: uppercase`不会改变实际的输入，只会改变它的外观。如果您将输入数据发送到服务器，它仍然是小写的，或者您输入的数据。要实际转换输入值，您需要添加 javascript 代码，如下所示：

```
document.querySelector("input").addEventListener("input", function(event) {
  event.target.value = event.target.value.toLocaleUpperCase()
})
```

```
<input>
```

在这里，我使用`toLocaleUpperCase()`将`input`值转换为大写。在您需要编辑输入的内容之前，它可以正常工作，例如，如果您输入了 ABCXYZ，现在您尝试将其更改为 ABCLMNXYZ，它将变为 ABCLXYZMN，因为每次输入后光标都会跳到末尾。

为了克服光标的这种跳跃，我们必须对函数进行以下更改：

```
document.querySelector("input").addEventListener("input", function(event) {
  var input = event.target;
  var start = input.selectionStart;
  var end = input.selectionEnd;
  input.value = input.value.toLocaleUpperCase();
  input.setSelectionRange(start, end);
})
```

```
<input>
```

现在一切正常，但如果您的 PC 速度较慢，您可能会在键入时看到文本从小写字母跳到大写字母。如果这让您烦恼，那么现在是使用 CSS 的时候了，应用`input: {text-transform: uppercase;}`到 CSS 文件，一切都会好起来的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-03-25T11:20:11.600

CSS 样式的问题在于它不会更改数据，如果您不想拥有 JS 函数，请尝试...

`<input onkeyup="this.value = this.value.toUpperCase()" />`

就其本身而言，您会看到该字段利用 keyup，因此可能需要将其与`style='text-transform:uppercase'`其他人建议的结合起来。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-06T15:51:35.010

这将同时以大写形式显示输入，并以大写形式通过 post 发送输入数据。

HTML

```
<input type="text" id="someInput"> 
```

JavaScript

```
var someInput = document.querySelector('#someInput');
someInput.addEventListener('input', function () {
    someInput.value = someInput.value.toUpperCase();
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-20T15:07:09.233

正如没有人建议的那样：

如果您想使用带有小写占位符的 CSS 解决方案，您只需单独设置占位符的样式。拆分 2 个占位符样式以实现 IE 兼容性。

```
input {
    text-transform: uppercase;
}
input:-ms-input-placeholder {
    text-transform: none;
}
input::placeholder {
    text-transform: none;
}
```

```
The below input has lowercase characters, but all typed characters are CSS-uppercased :<br/>
<input type="text" placeholder="ex : ABC" />
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-22T01:30:41.303

```
<input style="text-transform:uppercase" type = "text" class = "normal" name = "Name" size = "20" maxlength = "20"> <img src="../images/tickmark.gif" border="0"/> 
```

我选择了海报中的 text-transform:uppercase 样式。然后我也只是在php中做了大写的事情。有些人用那个 javascript 工作太辛苦了。

你很接近风格在错误的地方。您试图大写图像而不是输入。

```
$name = strtoupper($_POST['Name']); 
```

如果它是一个 php 页面，我不知道为什么我想添加一些额外的东西。这是我喜欢做的事情，让填写表格的人更顺畅。

```
<input style="text-transform:uppercase" type = "text" class = "normal" name = "Name" size = "20" maxlength = "20" value="<?php echo $name; ?>"> <img src="../images/tickmark.gif" border="0"/> 
```

这是假设您使用 PHP 作为后端并发布到您所在的同一页面。这将使用户不​​必再次填写表单的该部分。填写表格的人不那么烦人。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-08-18T21:32:28.487

对于我试图实现的目标，这里的各种答案都有各种问题：

仅使用 text-transform 会更改外观，但不会更改数据。使用 oninput 或 onkeydown 会更改光标位置，例如，您不能在现有输入的中间单击并对其进行编辑。保存位置有效，但似乎有点笨拙。

将问题分成两部分对我来说感觉更清晰：在我输入时将我输入的内容大写（文本转换），以及将提交的数据大写（运行 toUpperCase *onchange*）：

```
<input id = "thing" onchange="this.value = this.value.toUpperCase(); pr()" style=text-transform:uppercase /><p>
<b><span id="result"></span></b>
<script>function pr() {document.getElementById("result").innerHTML = document.getElementById("thing").value}</script>
```

在其中输入一些内容，按回车键或单击输入，然后单击上一个条目的中间，添加一些 lc 文本，按回车键...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-06T07:45:11.940

尝试以下解决方案，当用户在第一个索引处的输入字段中仅输入空格时，这也会引起注意。

```
document.getElementById('capitalizeInput').addEventListener("keyup",   () => {
  var inputValue = document.getElementById('capitalizeInput')['value']; 
  if (inputValue[0] === ' ') {
      inputValue = '';
    } else if (inputValue) {
      inputValue = inputValue[0].toUpperCase() + inputValue.slice(1);
    }
document.getElementById('capitalizeInput')['value'] = inputValue;
});
```

```
<input type="text" id="capitalizeInput" autocomplete="off" />
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2018-06-25T08:56:00.667

```
<script type="text/javascript">
    function upperCaseF(a){
    setTimeout(function(){
        a.value = a.value.toUpperCase();
    }, 1);
}
</script>

<input type="text" required="" name="partno" class="form-control" placeholder="Enter a Part No*" onkeydown="upperCaseF(this)"> 
```

# mysql - 从 MySQL 中的周数获取 ToDate ， FromDate

> ID：11100046
> 
> 赞同：2
> 
> 时间：2012-06-19T11:31:51.027
> 
> 标签：mysql

我很容易使用这样的 MySql`Week`函数获得周数`WEEK(SYSDATE())`

我只是想知道如何`from and to date`在 MySQL 中使用周数。

所需结果：

```
Week No From date       To date 
Week 25 June 18, 2012   June 24, 2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:36:08.483

这非常适合这种工作：

```
SELECT
  ADDDATE(CURDATE(), INTERVAL 1-DAYOFWEEK(CURDATE()) DAY) _From,
  ADDDATE(CURDATE(), INTERVAL 7-DAYOFWEEK(CURDATE()) DAY) _To; 
```

请注意，这里的第一天是星期日。这可能取决于您所在的国家/地区公约；）

# css - CSS 样式无法识别数字

> ID：11100048
> 
> 赞同：0
> 
> 时间：2012-06-19T11:31:53.943
> 
> 标签：css

> **可能重复：**
> [哪些字符在 CSS 类名中有效？](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)

如果假设是这样，请不要这样做，但是当我指定一个类：.3plans 时，它不会应用样式。但是当我将类名更改为 .plans 时，它会识别样式。这是为什么？请注意，.3plans 类是独一无二的，在我的工作表中没有其他样式，因此不能重复。这种现象是常见的 CSS 做法吗？（不要在样式中使用数字）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T11:33:38.420

如果`class`&`ID`从数字开始，则 css 无法识别。但是你可以这样写`.plans3`而不是`.3plans`.

根据[W3c](http://www.w3.org/TR/CSS21/syndata.html#characters)

> 在 CSS 中，标识符（包括选择器中的元素名称、类和 ID）只能包含字符 [a-z0-9] 和 ISO 10646 字符 U+00A1 及更高，加上连字符 (-) 和下划线 (_) ; 它们不能以数字或连字符后跟数字开头。标识符还可以包含转义字符和任何 ISO 10646 字符作为数字代码（请参阅下一项）。例如，标识符“B&W？” 可以写成“B\&W\?” 或“B\26 W\3F”。

查看此讨论以获取更多信息[哪些字符在 CSS 类名/选择器中有效？](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T11:33:58.997

这让我困惑了一段时间，直到有人指出这一点。来自 W3C：

> 在 CSS2 中，标识符（包括选择器中的元素名称、类和 ID）只能包含字符 [A-Za-z0-9] 和 ISO 10646 字符 161 及更高，加上连字符 (-)；它们不能以连字符或数字开头。它们还可以包含转义字符和任何 ISO 10646 字符作为数字代码（请参阅下一项）。例如，标识符“B&W?” 可以写成“B\&W\?” 或“B\26 W\3F”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:35:11.227

基本上**，名称必须**以下划线 (_)、破折号 (-) 或字母 (a–z) 开头，后跟任意**数量**的**破折号**、**下划线**、**字母**或**数字**。

现在查看更多信息[http://www.w3.org/TR/CSS21/grammar.html#scanner](http://www.w3.org/TR/CSS21/grammar.html#scanner)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T11:37:33.083

类名可以以数字开头，但是您必须将数字写为转义码：

```
.\33plans { ... } 
```

`33`是字符的十六进制字符代码`3`。

W3C CSS 验证服务说：

> “在 CSS1 中，类名可以以数字（“.55ft”）开头，除非它是维度（“.55in”）。在 CSS2 中，此类类被解析为未知维度（以允许将来添加新单位) 为了使 "3plans" 成为一个有效的类，CSS2 要求第一个数字被转义 ".\33plans" [3plans]"

# jsf - JSF - 未处理的面孔消息阻止重新呈现视图

> ID：11100051
> 
> 赞同：0
> 
> 时间：2012-06-19T11:32:04.723
> 
> 标签：jsf, richfaces

我使用 JSF、RichCalendar 和 a4j。我的问题：我想重新渲染我网站的组件，但是如果有人将一个富日历输入字段的日期编辑为“12.aa.2012”，则会抛出 FacesMessage，这是正确且好的。无论如何，由于未处理的 facesMessages，我的 a4j-rerender-event 没有被触发。在我的 Tomcat 控制台上，我收到此错误消息：

```
WARNUNG: There are some unhandled FacesMessages, this means not every FacesMessage had a chance to be rendered.
These unhandled FacesMessages are: 
- Bitte ein gültiges Datum eingeben! 
```

我该如何处理这个问题，我尝试了几种方法来显示 errorMessage 并且我可以弄清楚如何显示它，但是仍然有警告并且仍然没有触发重新渲染事件？

提前致谢。

更新：这是我的问题的代码。正如您在选择其中一个单选按钮后看到的那样，将显示一个 dateContainer，例如“admissionDateContainer”。如果您将值更改为“asd”，并选择另一个选项，则不会重新渲染相关框，选项会更改但错误的 dateContainer 会保留在那里？！

```
<h:panelGroup layout="block" id="caseTypeContainer" rendered="#{CaseController.isFallContainer}" styleClass="fieldContainer">
    <t:outputLabel for="caseType" styleClass="generalInputLabel" style="width:200px; float:left;" value="#{resources.labels['caseType']}:" title="#{resources.labels['caseType']}" />
    <h:selectOneRadio id="caseType" style="font-size:13px;" value="#{CaseController.caseType}" styleClass="radioButtonTableMasterdata inlineBlock">
    <f:selectItem itemValue="#{resources.labels['caseTypeDocAttrStationaer']}" itemLabel="#{resources.labels['caseTypeDocAttrStationaerLabel']}" />
    <f:selectItem itemValue="#{resources.labels['caseTypeDocAttrAmbulant']}" itemLabel="#{resources.labels['caseTypeDocAttrAmbulant']}"/>
    <f:selectItem itemValue="#{resources.labels['caseTypeDocAttrUnbekannt']}" itemLabel="#{resources.labels['caseTypeDocAttrUnbekannt']}"/>
    <a4j:support oncomplete="initializeFocusBlurEvents(); " event="onchange" reRender="captureDateContainerDiv, admissionDateContainerDiv, dischargeDateContainerDiv, messagesContainer, warnings"/>
    </h:selectOneRadio>
</h:panelGroup>
<t:div id="admissionDateContainerDiv">
    <h:panelGroup layout="block" id="admissionDateContainer" rendered="#{CaseController.isCaseTypeStationaerOrAmbulant}" styleClass="fieldContainer  showDateInputWithTime">
        <t:outputLabel for="admissionDate" rendered="#{CaseController.isCaseTypeStationaer}" styleClass="generalInputLabel" style="width:200px;" value="#{resources.labels['caseAdmissionDateStationaer']}:" title="#{resources.labels['caseAdmissionDateStationaer']}" />
    <t:outputLabel for="admissionDate" rendered="#{CaseController.isCaseTypeAmbulant}" styleClass="generalInputLabel" style="width:200px;" value="#{resources.labels['caseAdmissionDateAmbulant']}:" title="#{resources.labels['caseAdmissionDateAmbulant']}" />
    <rich:calendar id="admissionDate" value="#{CaseController.caseContainerAdmissionDate}" datePattern="dd.MM.yyyy HH:mm" enableManualInput="true" direction="auto">
        <f:facet name="footer">
        <h:panelGrid columns="3" width="100%" columnClasses="fake, width100 talign">
        <h:outputText value="{selectedDateControl}" style="font-weight:bold;" />
    <h:outputText value="{timeControl}" style="font-weight:bold;" />
    <h:outputText value="{todayControl}" style="font-weight:bold;" />
        </h:panelGrid>
    </f:facet>
    </rich:calendar>
    <rich:message for="admissionDate"  />
</h:panelGroup>
</t:div>
<t:div id="messagesContainer" rendered="true"> 
    <p>Messages global</p>
<rich:messages global="true" />
</t:div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:41:23.567

添加`<rich:messages`或`<rich:message`到您的页面

看看[rich:messages](http://livedemo.exadel.com/richfaces-demo/richfaces/messages.jsf?tab=usage&cid=142670)和[rich:message](http://livedemo.exadel.com/richfaces-demo/richfaces/message.jsf?c=message&tab=usage)

还要确保他们`rendered`在你`button`被点击之后......将他们的 id 或他们的包装（`@form`例如）id 添加到`reRender`你的日历中

# ipv6 - IPv6 原始套接字。无法在 SIO_RCVALL 套接字上接收任何数据包。Win2008

> ID：11100053
> 
> 赞同：0
> 
> 时间：2012-06-19T11:32:05.410
> 
> 标签：ipv6, windows-server-2008-r2, packet-sniffers, raw-sockets, traceroute

我将 Windows Server 2008 R2 用于生产目的，因此使用原始套接字功能对我来说一定没有问题。但相反，我在入站 RCVALL 套接字上接收数据时遇到问题。我在做什么：

1.  `m_recv_socket = socket( AF_INET6 , SOCK_RAW , IPPROTO_IPV6 ),`
2.  `setsockopt( m_recv_socket, SOL_SOCKET, SO_RCVTIMEO, reinterpret_cast<const char*>( &recv_timeout_ms ), sizeof(int) );`
3.  `bind( m_recv_socket, reinterpret_cast<sockaddr *>( &sa ), sizeof( sa ) );` **（我在这里将它绑定到我的网卡的 LINK-Local 地址，即 fe80::a077:5573:5f:3ca5）**
4.  `WSAIoctl( m_recv_socket, SIO_RCVALL , &dwBufferInLen, sizeof(dwBufferInLen), &dwBufferLen, sizeof(dwBufferLen), &dwBytesReturned , NULL , NULL );` **（其中 dwBufferInLen 等于 1）**

当我尝试在此套接字上接收数据时，我不断收到 WSA_TIMEDOUT 并且没有收到任何数据。同时，Wireshark 证明此接口上存在入站和出站流量。怎么了？请问有什么帮助吗？为 IPv4 使用而修改的相同代码可以正常工作。上述调用的所有返回码都可以。

让我提供一些线索。存在类型（AF_INET6、SOCK_RAW、IPPROTO_IPV6）的未绑定发送套接字；正在设置 IPV6_HDRINCL。我通过它发送手动形成的 TCP 数据包。Wireshark 证明它通过了。接下来，我看到传入的 TCP(RST, ACK) 与我绑定接收套接字的地址完全一致。但是在数据接收试验时应用程序仍然被阻止。所有校验和都正常，否则不会有任何响应传入数据包。我确定这个传入的数据包是对我的 TCP(SYN) 请求的响应，因为 SEQ/ACK 数字证明了这一点（Wireshark 还向我显示了这个流的序列）。那么这个接收套接字可以做错什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:30:22.050

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ee309610.aspx)：

> 在 Windows Server 2008 和更早版本上，SIO_RCVALL IOCTL 设置不会捕获从网络接口发送的本地数据包。这包括在另一个接口上接收并转发出为 SIO_RCVALL IOCTL 指定的网络接口的数据包。
> 
> 设置此 IOCTL 需要本地计算机上的管理员权限。

这些都适用于你的情况吗？

# spring - grails + 单例服务，用于将对象保存到云应用程序的数据库

> ID：11100063
> 
> 赞同：0
> 
> 时间：2012-06-19T11:32:52.680
> 
> 标签：spring, grails, grails-orm, spring-webflow, grails-plugin

在这里，我有一项名为“DataSaveService”的服务，用于保存对象，例如..

```
class DataSaveService {

    static transactional = true

    def saveObject(object)
    {
        if(object != null)
        {
            try
            {
                if(!object.save())
                {
                    println( ' failed to save ! ')
                    System.err.println(object.errors)
                    return false
                }
                else
                {
                    println('saved...')
                    return true
                }
            }
            catch(Exception e)
            {
                System.err.println("Exception :" + e.getMessage())
                return false
            }
        }
        else
        {
            System.err.println("Object " + object + " is null...")
            return false
        }

    }
} 
```

该服务很常见，并且被许多类的对象用于存储。当有多个请求时，保存速度很慢，或者你可以说它很笨重。由于默认范围，即单例。

所以，我认为为了减少工作量，我打算将此服务作为会话范围。喜欢..

静态范围 = '会话'

然后在我在控制器中访问此服务和方法后，它生成了异常.. 会话范围服务该怎么办？，实现这个场景的任何其他想法......？

主要是我想要在云中获得最佳性能。是的，我需要云的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:55:57.393

单例（如果它没有标记为`synchronized`）可以同时从不同的线程并行调用，没有性能损失，这不是瓶颈。

但是如果你真的需要线程安全（意味着你有一些共享状态，应该在一个方法调用中使用，或者在一个 http 请求期间从应用程序的不同部分使用，甚至来自同一用户的不同请求，并且你不会运行您在云中的应用程序），然后您可以使用不同的范围，例如`session`或`request`范围。但我不确定这是一个好的架构。

对于您当前的示例，使用非单例范围没有任何好处。而且，您必须知道，相同服务的实例很少需要额外的内存和 cpu 资源。

# javascript - 插件数据表：选择要排序的列中的数据

> ID：11100064
> 
> 赞同：1
> 
> 时间：2012-06-19T11:32:52.713
> 
> 标签：javascript, jquery, sorting, datatables

我是 js 中的插件 DataTables 的新手，我没有找到如何选择要在列中排序的特定数据。例如，在我的表中，我有一列带有“评分”。我想只用百分比而不是其他值对它进行排序。

```
 <td>
        <span class="rating">100.00%</span>
        <span class="voteup">3 <img src='/images/voteup.png' alt='voteup' /></span>
        <span class="votedown"> 0 <img src='/images/votedown.png' alt='votedown' /></span>
         <br /> 
        <span class="comment">0 comments</span> <br/> 
        <span class="views">17 views</span>
 </td> 
```

我直接从 dom 加载数据（由 php 生成），这是我在 js 中生成的 DataTables。

```
var oTable;

$(document).ready(function() {

oTable = $('#BuildList').dataTable({
    "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]],
    "iDisplayLength": -1,
    "aoColumns": [
        { "bSortable": false},
        { "bSortable": false},
        { "bSortable": false},
        { "asSorting": [ "asc" ] },
        { "asSorting": [ "desc" ] },
    ]
});

// To sort by default the column 4
oTable.fnSort([[3, 'asc']]);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:25:49.310

问题解决了

```
$.fn.dataTableExt.oSort['rating-desc'] = function(x,y) {

x = parseFloat($(x).first().html());
y = parseFloat($(y).first().html());

return ((x < y) ?  1 : ((x > y) ? -1 : 0));
};
$(document).ready(function() {

oTable = $('#BuildList').dataTable({
    "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]],
    "iDisplayLength": -1,
    "aoColumns": [
        { "bSortable": false},
        { "bSortable": false},
        { "bSortable": false},
        { "asSorting": [ "asc" ] },
        { "asSorting": [ "desc" ], "sType": "rating" }
    ]
});

// To sort by default the column 4
oTable.fnSort([[3, 'asc']]);

}); 
```

# python - 如何在python中将布尔numpy数组保存到文本文件？

> ID：11100066
> 
> 赞同：2
> 
> 时间：2012-06-19T11:33:08.267
> 
> 标签：python, numpy, save, boolean

以下将矩阵的浮动值保存到文本文件中

`numpy.savetxt('bool',mat,fmt='%f',delimiter=',')`

如何保存布尔矩阵？保存布尔矩阵的 fmt 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:03:22.327

没错，布尔值是整数，所以你总是可以在两者之间。

```
 import numpy as np
arr = np.array([True, True, False, False])
np.savetxt("test.txt", arr, fmt="%5i") 

```

这给出了一个文件 1 1 0 0

# javascript - 是否可以在没有 WebGL 的情况下编写像“Temple Run”这样的 3D 游戏？

> ID：11100071
> 
> 赞同：0
> 
> 时间：2012-06-19T11:33:26.527
> 
> 标签：javascript, ios, html, cordova

iOS 还不支持 WebGL，我需要为 iOS 编写一个类似 Temple Run 的 3D 游戏。普通的Canvas能写出这样的游戏吗？还是我应该放弃这个？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:45:01.090

就我个人而言，我不会尝试编写类似在 Canvas 中运行并在 iOS 上使用 PhoneGap 包装的 Temple Run 游戏。存在一个问题，iOS 上的 Safari 使用 Nitro JavaScript 引擎运行速度非常快，但使用 UIWebView （如 PhoneGap）的应用程序仅限于使用较慢版本的 JavaScript 解释器。当您尝试编写诸如 Temple Run 之类的游戏时，这会导致问题。

您可以在 PhoneGap 中编写游戏，但您所谈论的游戏类型确实会最大限度地扩展系统。我不想让你气馁，我只是想让你知道信息。

# javascript - 我们可以将 highcharts 图例更改为单选按钮而不是复选框样式吗？

> ID：11100076
> 
> 赞同：4
> 
> 时间：2012-06-19T11:33:39.577
> 
> 标签：javascript, highcharts

现在，如果我使用任何 highcharts，我可以看到一个图例，并且该图例是可点击的，这将切换图表的行为。图例当前的功能就像一个复选框——您可以在其中单击/切换图例中的多个项目。我希望在任何时候都不应该选择一个以上的选项。

请让我知道这是否可能。如果是这样，请给我一些想法。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:38:05.743

您可以使用类似[**以下**](http://jsfiddle.net/t2MxW/20388/)的内容，它只会显示选定的系列。单击图例中的系列以查看其作用。

# javascript - 如何在javascript中替换特定标签内容

> ID：11100077
> 
> 赞同：4
> 
> 时间：2012-06-19T11:33:41.373
> 
> 标签：javascript, regex

我有一个字符串，**它可能是也可能不是有效的 HTML**，但它应该包含一个 Title 标记。
我想用新内容替换标题的内容。

示例 1：

```
lorem yada yada <title>Foo</title> ipsum yada yada 
```

应该变成：

```
lorem yada yada <title>Bar</title> ipsum yada yada 
```

示例 2：

```
lorem yada yada <title attributeName="value">Foo</title> ipsum yada yada 
```

应该变成：

```
lorem yada yada <title attributeName="value">Bar</title> ipsum yada yada 
```

我不想用正则表达式解析 html - 只需替换标题标签......请不要把我发[到这里](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)......

编辑：经过无数次投票和很多光顾的态度 -
我知道（正如在原始帖子中承认的那样）通常正则表达式不是处理 HTML 的方式。我对任何可以解决我的问题的解决方案持开放态度，但到目前为止，每个 JQuery / DOM 解决方案都不起作用。“正确”是不够的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:03:19.313

使用正则表达式很难*可靠*地做这样的事情（阅读：“不适用于所有情况”），因此如果可能的话，最好使用某种适当的解析器。

也就是说，这是一个适用于您的示例的简单表达式：

```
var re = /(<title\b[^>]*>)[^<>]*(<\/title>)/i;
str = str.replace(re, "$1Bar$2"); 
```

一些这不能处理并且不能正常工作的事情：评论、引用、CDATA 等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T11:36:30.150

```
function replaceTitle( str, replacement ) {
    var tmp = document.createElement("ihatechrome");
    tmp.innerHTML = str;
    tmp.getElementsByTagName("title")[0].innerHTML = replacement;
    return tmp.innerHTML;   
}

replaceTitle( "lorem yada yada <title>Foo</title> ipsum yada yada", "Bar" );
//"lorem yada yada <title>Bar</title> ipsum yada yada" 
```

出于某种原因，如果`img`标签带有`src`. 没有任何意义，但这就是发生的事情。

编辑：

这似乎在 chrome 中工作（不加载图像）：

```
var doc = document.implementation.createHTMLDocument("");

doc.body.innerHTML = "<img src='/'>";

doc.body.innerHTML; //"<img src="/">" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:17:07.310

请上帝不要尝试用正则表达式解析 html（我知道你说你没有解析它，但你是......）jQuery 有一套非常好的原语来操作不在 DOM 中的 html：

```
var htmlishString = "almost <title>HTML</title>";
var $fakeDiv = jQuery('<div />');
$fakeDiv.html(htmlishString).find('title').text('Bar');
var manipulatedString = $fakeDiv.html() 
```

[http://jsfiddle.net/4kQkx/](http://jsfiddle.net/4kQkx/)

# jquery - 使用jquery从页面底部中心向上/向下滑动DIV

> ID：11100084
> 
> 赞同：0
> 
> 时间：2012-06-19T11:33:54.793
> 
> 标签：jquery

我有一个固定在页面底部中心的小 div。现在我希望最初的 div 不可见。当用户单击按钮时，div 将从浏览器的底部边缘向上滑动，当用户再次单击按钮时，div 将向下滑动到底部。

我尝试过这种方式，但我的示例代码无法正常工作

```
 #BusyBox
{
background: -moz-linear-gradient(center top , #F1F2F2 0%, #F1F2F2 100%) repeat scroll 0 0 transparent;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
bottom: 0;
font-size: 0.8em;
font-style: normal;
font-weight: normal;
left: 50%;
margin-left: -45px;
padding-top: 20px;
position: fixed;
text-align: center;
width: 90px;
height: 50px;
margin-top: -50px;
background-repeat:no-repeat;
background-position: center center;
}

<script type="text/javascript">
    $(document).ready(function () {
        var flag = 1;

        $("#Process").click(function () {
            if (flag == 1) {
                $('#BusyBox').stop(true).animate({ 'marginTop': '50px', 'opacity': '0' }, { queue: false, duration: 300 });
                flag = 0;
            }
            else {
                $('#BusyBox').stop(true).animate({ 'marginTop': '-50px', 'opacity': '1' }, { queue: false, duration: 300 });
                flag = 1;
            }

            return false;
        });
    });
</script>

<asp:Button ID="Process" runat="server" Text="Click" />
<div id="BusyBox" >
    <img src="images/loader.gif"  alt="Loading..."/>
    <div>
    <em>Loading Wait...</em>
    </div>
</div> 
```

请帮助我的代码哪里错了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:50:12.847

使用`margin-bottom`您的 div 位于页面底部。看看这个小提琴：

[http://jsfiddle.net/SpMns/](http://jsfiddle.net/SpMns/)

# android - Android - 在webview中登录后提取cookies

> ID：11100086
> 
> 赞同：70
> 
> 时间：2012-06-19T11:33:56.807
> 
> 标签：android, cookies, android-webview, cookiestore

我有一个应用程序在 webview 中打开一个 url，然后用户必须通过 webview 登录到一个站点并在登录后接收一个 cookie。我在登录后获取 cookie 时遇到问题。

问题是，我可以使用 android.webkit.CookieManager 实现这一点，并在单个字符串中输出所有 cookie。

但是，我想使用 cookie 存储（如在 java.net.CookieStore 中）来实现它，所以我需要使用 java.net.CookieManager。

我在 WebViewClient 的 onPageFinished() 中使用以下代码。我知道问题在于打开一个新连接，我需要从当前页面获取内容。我会很感激一些帮助，谢谢

```
 @Override
        public void onPageFinished(WebView view, String url){

            Log.d(TAG, "Finished loading: " + url);

            CookieSyncManager syncManager = CookieSyncManager.createInstance(Main.this);
            syncManager.sync();

            CookieManager manager = new CookieManager();
            manager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);
            CookieHandler.setDefault(manager);

            try {
                URL blah = new URL(url);
                HttpURLConnection con = (HttpURLConnection) blah.openConnection();
                readStream(con.getInputStream()); // outputting html
            } 
            catch (Exception e) {
            }

            CookieStore cookieJar = manager.getCookieStore();
            List<HttpCookie> cookies = cookieJar.getCookies();

            for (HttpCookie cookie: cookies) {
                Log.d(TAG, "cookie name : "+cookie.getName().toString());
            }
        } 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-04T04:52:48.287

您可以通过这种方式从 webview 中提取所有 cookie 当前 url 作为字符串：

```
@Override
public void onPageFinished(WebView view, String url){
    String cookies = CookieManager.getInstance().getCookie(url);
    Log.d(TAG, "All the cookies in a string:" + cookies);
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-11-27T12:01:07.440

已经很晚了，但它可能会对某人有所帮助

您可以使用此获取 cookie 值

```
getCookie("http://www.example.com","cookieName"); 
```

将函数声明为

```
public String getCookie(String siteName,String cookieName){     
    String CookieValue = null;

    CookieManager cookieManager = CookieManager.getInstance();
    String cookies = cookieManager.getCookie(siteName);       
    String[] temp=cookies.split(";");
    for (String ar1 : temp ){
        if(ar1.contains(cookieName)){
            String[] temp1=ar1.split("=");
            CookieValue = temp1[1];
            break;
        }
    }              
    return CookieValue; 
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-09T21:45:00.420

这个答案来自@vimal1083。它返回 a 中的值`Map`，当然也写入`Kotlin`.

```
fun getCookieMap(siteName: String): Map<String,String> {

    val manager = CookieManager.getInstance()
    val map = mutableMapOf<String,String>()

    manager.getCookie(siteName)?.let {cookies ->
        val typedArray = cookies.split(";".toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()
        for (element in typedArray) {
            val split = element.split("=".toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()

            if(split.size >= 2) {
                map[split[0]] = split[1]
            } else if(split.size == 1) {
                map[split[0]] = ""
            }
        }
    }

    return map
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-26T07:39:40.350

检查此链接 - 将 [Cookie 从 HttpURLConnection (java.net.CookieManager) 传递到 WebView (android.webkit.CookieManager)](https://stackoverflow.com/questions/12731211/pass-cookies-from-httpurlconnection-java-net-cookiemanager-to-webview-android)

如果您想从 webview 获取 cookie，则必须使用`android.webkit.CookieManager`, from any `HttpUrlConnection`，但是，您可以使用提取 cookie`java.net.CookieStore`

您将需要解析获取所有 cookie 的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-24T08:10:53.670

您可以使用此功能获取特定的`cookie`

```
fun getCookie(name: String): String? {
    val cookies = cookieManager.getCookie("YOUR_URL_HERE")
    if (cookies == null || !cookies.contains("${name}=")) {
        return null
    }
    return cookies.split("${name}=")[1].split(";")[0]
} 
```

# cassandra - cassandra 1.1.x 通过复合键获取

> ID：11100088
> 
> 赞同：3
> 
> 时间：2012-06-19T11:34:01.477
> 
> 标签：cassandra, thrift, hector, cql, astyanax

是否可以使用 Hector 或 Astyanax 通过复合键获取行（在多列中，而不是序列化为一列的行）？

在 cqlsh 我创建了简单的列族：

```
CREATE COLUMNFAMILY kkvv (x int, y int, val1 varchar, val2 varchar, PRIMARY KEY (x,y)); 
```

根据[Cassandra 开发人员中心](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)，行由 x 作为键存储，其余存储在列中。

我不知道如何为给定的 x 和 y 获取列切片。

在那个 cql 中执行 cql

```
cqlQuery.setQuery("select * from kkvv") 
```

给我行：

> 行(2,ColumnSlice([HColumn(x=2)]))
> 
> 行(10,ColumnSlice([HColumn(x=10)]))

和控制台 cqlsh 给出：

> x | 是 | val1 | val2
> 
> -----+-----+-------+------------
> 
> 2 | 1 | v1_1 | v2_1
> 
> 10 | 27 | v1_4b | v2_4b
> 
> 10 | 91 | v1_4a | v2_4a

任何人都设法在任何 cassandra 客户端的 java 中做到这一点？我可以为此使用节俭，还是只有 cql 的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:42:01.120

这里有两种略有不同的语法：CQL 2 和 CQL 3。默认情况下，Cassandra 连接需要 CQL 2。但是，CQL 2 不理解您在此处所做的那种复合键列族。

因此，您显然正确地将 CQL 3 与 cqlsh 一起使用，因为它以一种理智的方式显示您的列，但您没有将它与 Hector 一起使用。我不确定 Hector 或 Astyanax 是否支持这一点。cassandra-jdbc 驱动程序的最新版本可以，因此，如果 Hector 和/或 Astyanax 使用它，那么它们也应该可以工作。

Thrift 中没有（也可能不会）任何支持将复合比较器列族视为具有多组件主键的表，就像 CQL 3 那样。如果需要，请使用 CQL 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:47:45.400

您是否尝试过cassandra-tutorial 项目中提供的[CompositeQuery.java示例？](https://github.com/zznate/cassandra-tutorial/blob/master/src/main/java/com/datastax/tutorial/composite/CompositeQuery.java)

另外，您是否阅读过 DataStax[的复合列简介？](http://www.datastax.com/dev/blog/introduction-to-composite-columns-part-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:24:05.273

很好的解释如何在 Cassandra 中存储带有复合键的行在[这里](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)。

在 Astyanax 和 Hector 中，我注意到有趣的事情 - 当一个尝试连接时 - 它使用了 CQL2。当我使用 cassandra api（下面的示例代码）通过 CQL3 连接到 Cassandra 时，此设置存储在某处，之后 Astyanax 和 Hector 使用 cql3 而不是 CQL2。连接是作为单独的执行进行的，所以它不能存储在客户端......有人对此有任何想法吗？

可以使用 set_cql_version 方法在 org.apache.cassandra.thrift.Cassandra.Client 上设置 CQL 版本。

如果有人对使用纯 Cassandra api 的工作示例感兴趣：

```
import java.io.UnsupportedEncodingException;
import java.nio.ByteBuffer;
import java.util.List;

import org.apache.cassandra.thrift.Cassandra;
import org.apache.cassandra.thrift.Column;
import org.apache.cassandra.thrift.Compression;
import org.apache.cassandra.thrift.CqlResult;
import org.apache.cassandra.thrift.CqlRow;
import org.apache.cassandra.thrift.InvalidRequestException;
import org.apache.cassandra.thrift.SchemaDisagreementException;
import org.apache.cassandra.thrift.TimedOutException;
import org.apache.cassandra.thrift.UnavailableException;
import org.apache.thrift.TException;
import org.apache.thrift.protocol.TBinaryProtocol;
import org.apache.thrift.protocol.TProtocol;
import org.apache.thrift.transport.TFramedTransport;
import org.apache.thrift.transport.TSocket;
import org.apache.thrift.transport.TTransport;

public class KKVVGetter {
    private static Cassandra.Client client;
    private static TTransport       transport;

    public static void main(String[] args) throws UnsupportedEncodingException, InvalidRequestException,
            UnavailableException, TimedOutException, SchemaDisagreementException, TException {

        transport = new TFramedTransport(new TSocket("localhost", 9160));
        TProtocol protocol = new TBinaryProtocol(transport);
        client = new Cassandra.Client(protocol);        
        transport.open();
        client.set_cql_version("3.0.0");

        executeQuery("USE ks_test3");

        show("select x,y,val1,val2 from kkvv where x > 1 and x < 11 and y < 100 and y > 2");

        System.out.println("\n\n*****************************\n\n");

        show("select x,y,val1,val2 from kkvv");

        transport.close();
    }

    private static int toInt(byte[] bytes) {
        int result = 0;
        for (int i = 0; i < 4; i++) {
            result = (result << 4) + (int) bytes[i];
        }
        return result;
    }

    private static CqlResult executeQuery(String query) throws UnsupportedEncodingException, InvalidRequestException,
            UnavailableException, TimedOutException, SchemaDisagreementException, TException {
        return client.execute_cql_query(ByteBuffer.wrap(query.getBytes("UTF-8")), Compression.NONE);
    }

    private static void show(String query) throws UnsupportedEncodingException, InvalidRequestException,
            UnavailableException, TimedOutException, SchemaDisagreementException, TException {
        CqlResult result = executeQuery(query);
        List<CqlRow> rows = result.getRows();
        System.out.println("rows: " + rows.size());
        for (CqlRow row : rows) {
            System.out.println("columns: " + row.getColumnsSize());
            for (Column c : row.getColumns()) {
                System.out.print("  " + new String(c.getName()));
                switch (new String(c.getName())) {
                    case "x":
                    case "y":
                        System.out.print("  " + toInt(c.getValue()));
                        break;
                    case "val1":
                    case "val2":
                        System.out.print("  " + new String(c.getValue()));
                        break;

                    default:
                        break;
                }
                System.out.println();
            }
        }
    }
} 
```

有问题的架构示例。

# mysql - Mysql 从测试点到多边形的距离

> ID：11100090
> 
> 赞同：1
> 
> 时间：2012-06-19T11:34:04.637
> 
> 标签：mysql, polygon, distance, point, between

我使用几何类型字段将一些地图区域存储到表中。

所以插入是这样的：

```
INSERT INTO zones (zoneName, coords) VALUES ('name',
PolygonFromText('POLYGON((
41.11396418691335 1.2562662363052368,
41.11370552595821 1.2560248374938965,
41.11851079510035 1.2459397315979004,
41.11880984984478 1.2461864948272705,
41.11396418691335 1.2562662363052368))')); 
```

然后我有了用户位置，我需要知道他是否在某个区域内。这适用于这个：

```
SELECT id 
  FROM zones 
 WHERE MBRContains(coords,GeomFromText('POINT(41.117783 1.260590)')) 
```

但有时，用户位置并不完美，所以我认为最好知道哪个区域最接近用户位置。

那是我不知道的部分......我发现了一些查询来获取两点之间的距离，但不是点和多边形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:28:28.300

MBR 系列函数（如`MBRContains`）不适合您尝试做的事情；他们只测试边界矩形包含。

您可能希望跳转到 MySQL 5.6.1，并使用 ST_ 函数，例如`ST_Contains`. 这些函数实际上测试几何。

您正在处理的问题可以定义为当您将其与您的边界项目 `POINT`集合进行比较时，您的位置不确定。`POLYGON`

试试这个：`POLYGON`从你的点创建一个与你的不确定性大小相同的正方形。你可以把这个正方形想象成一个“模糊”点。（您也可以使用八边形或其他更接近圆形的近似值来代替矩形，但您的查询速度会变慢。）

然后使用 ST_Within 查看您是否有一个完全包含您的模糊点的独特多边形。如果你只得到一个多边形，你就完成了。

如果您得到多个完全包含您的模糊点的多边形，这意味着您的一些边界多边形与其他多边形重叠。您需要弄清楚这在您的问题空间中意味着什么。如果您的数据旨在成为结构正确的制图边界数据，则意味着您有数据错误。（注意：这不是闻所未闻的:-)

如果您没有得到完全包含您的模糊点的多边形，那么您的模糊点可能会或可能不会与至少一个多边形的边界重叠。用于`ST_Overlaps`查找这些多边形。

如果你只得到一个，你就完成了——你的模糊点靠近一个多边形的边界。

如果你没有得到，你就完成了——你的模糊点远离所有多边形的边界。

如果你得到不止一个命中，你就会有歧义——你的模糊点在多个多边形的边界附近。

这是很难解决的问题。您可以减小模糊点的大小并重试。这可能只产生一个多边形结果。但是，您可能会欺骗自己，认为您的观点比这样做更准确。

MySQL 没有几何运算符`Area(Intersection(Polygon, FuzzyPoint))`。如果是这样，您可以选择与您的模糊点相交面积最大的多边形，这将是一个很好的消歧器。但这仍然与您的观点一样不准确。

也许您的应用程序应该处理“太靠近 A、B 和 C 的边界而无法确定”的结果类别。

# ruby-on-rails-3 - Rails has_many 自引用

> ID：11100091
> 
> 赞同：4
> 
> 时间：2012-06-19T11:34:09.810
> 
> 标签：ruby-on-rails-3, associations

我有一个如下的帐户模型（简化）：

```
class Account < ActiveRecord::Base
    attr_accessible :account_number, :display_name, :master_account_id

    has_many :child_accounts, :class_name => "Account", :foreign_key => "id"
    belongs_to :master_account, :class_name => "Account", :foreign_key => "master_account_id"
end 
```

`@account.master_account`目前工作正常，但我也希望能够访问`@account.child_accounts`- 我需要做什么才能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T11:39:41.393

我认为它必须是相反的方式：

```
class Account < ActiveRecord::Base
  has_many :child_accounts, :class_name => "Account", :foreign_key => "master_account_id"
  belongs_to :master_account, :class_name => "Account"
end 
```

# php - 坚持使用php表单

> ID：11100093
> 
> 赞同：0
> 
> 时间：2012-06-19T11:34:29.020
> 
> 标签：php, forms, model-view-controller

我正在开发一个 php 网站；我没有使用纯面向对象的代码，因为我仅将类用于我的查询和函数，但我尝试使用 MVC 方法为 html 提供一些干净的视图代码。一切正常，因为我将“业务逻辑”和视图分开，逻辑都在我的“控制器”文件夹中，而不是将所有变量传递给显示的视图。

我被表格困住了。

我通过上述方法传递了表单使用的变量，但是，表单操作呢？我应该在控制器文件中传递 $_POST 数据。

如果检索到“操作”$_GET，则会出现我的管理视图：

```
switch ($action) { 
    default:
        break;
    case "npr":
        require "controller/admincontents/inner/newproject.php";
        break;
    case "mpr":
        require "controller/admincontents/inner/modifyproject.php";
        break;
    case "dpr":
    require "controller/admincontents/inner/deleteproject.php";
    break;
} 
```

然后我去我的 newproject.php 调用我的表单。

```
<?php 
require "views/adminviews/forms/insnuovoprogetto.php";
?> 
```

表单有一个动作，但动作必须指向哪里？我想执行确认视图和成功视图，但我不能将它们放在同一页面中。

如果我不使用这种方法，我可以使用 isset($_POST) 函数来打开和关闭表单、确认和成功。

请您将我重定向到在 MVC 中用于表单的方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T11:50:07.413

根据 MVC 结构，

1.  控制器由 Url 参数（$_GET）决定
2.  同样，视图文件也需要根据控制器进行渲染。您可以创建 setLayout 或 setView 之类的函数来呈现您的视图文件
3.  您必须根据控制器手动提及您的表单操作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T12:03:34.427

最好使用任何 MVC 框架，而不是创建自己的代码。您可以使用 php 框架，如 codeigniter、cakePHP 和 Zend Framework。首先尝试了解这些框架是如何运作的，然后开始开发自己的框架。我个人认为 Codeigniter 是初学者学习 MVC 方法的最佳平台。

# javascript - Extjs 3.3 IE8 链式事件正在中断

> ID：11100096
> 
> 赞同：0
> 
> 时间：2012-06-19T11:34:47.123
> 
> 标签：javascript, internet-explorer, extjs, internet-explorer-8, extjs3

这个是有线的。

这从网格工具栏按钮单击触发：

```
// fires when the client hits the add attachment button.
onAddAttachmentClick: function () {
    var uploadAttachmentsWindow = new Nipendo.ProformaInvoice.Attachment.UploadWindow({
        invoice: this.invoice,
        maxFileSizeInMB: this.maxFileSizeInMB
    });

    uploadAttachmentsWindow.on('uploadcomplete', function (win, message) {
        if (message.msg !== 'success') {
            return;
        }

        win.close();
        var store = this.getStore();

        store.setBaseParam('useCache', false);
        store.load();

        this.fireEvent(
            'attachmentuploaded',
            this.invoice.ProformaInvoiceNumber,
            this.invoice.VendorSiteID,
            this.invoice.CustomerSiteID);

    }, this);

    uploadAttachmentsWindow.show();
} // eo onAddAttachmentClick 
```

这是 uploadcomplete 事件发生的情况：

```
this.uploadBtn.on('click', function () {
    var form = this.uploadForm.getForm();

    if (!form.isValid()) {
        return;
    }

    form.submit({
        url: 'XXX.ashx',
        waitMsg: Nipendo.Localization.UploadingAttachment,
        scope: this,
        success: function (form, action) {
            this.fireEvent('uploadcomplete', this, {
                msg: 'success',
                response: action.response
            });
        },
        failure: function (form, action) {
            switch (action.failureType) {
                case Ext.form.Action.CLIENT_INVALID:
                    this.fireEvent('uploadcomplete', this, {
                        msg: 'Form fields may not be submitted with invalid values'
                    });
                    break;
                case Ext.form.Action.CONNECT_FAILURE:
                    this.fireEvent('uploadcomplete', this, {
                        msg: 'Ajax communication failed'
                    });
                    break;
                case Ext.form.Action.SERVER_INVALID:
                    Ext.Msg.alert(action.result.title, action.result.message);
                    this.fireEvent('uploadcomplete', this, {
                        msg: action.result.message
                    });
                    break;
            }
        }
    });

}, this); 
```

在 IE 8 上，我在调试器中收到此错误：

![在此处输入图像描述](../Images/6f4db93551b1b8ec86ebe7ecefbb83e3.png)

我不知道缺少什么对象...根据我的检查，它们都已定义。

有人知道吗？

请注意，我有一个从侦听器触发的事件（我怀疑它是问题的根源）。

很难看到，但是在 fire 方法中的 ext-all.js 中出现了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:07:08.587

我在以下网址找到了答案：[https ://stackoverflow.com/a/3584887/395890](https://stackoverflow.com/a/3584887/395890)

问题是我列出的事件是 2 个不同的窗口，这在 Ext 中是不可能的。

我为解决它所做的是从弹出窗口调用 opner 窗口以通知更改。

# android - Android：在 Android 2.1 中动态加载视图的最佳方式

> ID：11100099
> 
> 赞同：0
> 
> 时间：2012-06-19T11:35:04.443
> 
> 标签：android, layout

我正在 Android 2.1 中开发一个应用程序，它需要基于按钮单击动态加载视图。这是我的活动的粗略布局。

![在此处输入图像描述](../Images/6c110319c4e3a74195543794c7c53c78.png)

说点击button1，它应该显示imageview，点击button2，它应该显示listview，对于button3 - 按钮和图像的线性布局，等等。所有视图都应仅加载到提供的空白处。

我认为要遵循的方法是“膨胀布局”。但是在单击另一个按钮时，应该删除旧的膨胀布局，并且应该可以看到新的膨胀布局。

有没有更好的方法来实现这一目标？如果膨胀布局是唯一更好的方法，我该如何删除旧的膨胀布局并加载新的膨胀布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:40:31.597

您可以使用 ViewFlipper 来保存三个布局并简单地调用`showNext()`or`setDisplayedChild()`来确定显示哪个布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:46:39.503

当您的布局比一个`ImageView`左右更复杂时，膨胀是很好的。在这种情况下，您应该只动态地创建一个 ImageView 并将其添加到“空白区域”（它应该是一些 ViewGroup（即，RelativeView））。在这种情况下：

```
mRelativeView.removeAllViews();
ImageView newView = new ImageView(mContext);
newView.setImageResource(R.drawable.someImage);
mRelativeView.addView(newView); 
```

当有更复杂的布局时，用 LayoutInflater 来做（但记住膨胀很慢）：

```
mRelativeView.removeAllViews();
View newView = LayoutInflater.from(mContext).inflate(R.layout.some_layout, null);
mRelativeView.addView(newView); 
```

例如，在上面的示例`mContext`中可以是当前活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:48:05.447

听起来您正在尝试做一些非常相似的事情`TabHost`，请尝试在`TabHost`此处阅读：http: [//developer.android.com/reference/android/widget/TabHost.html](http://developer.android.com/reference/android/widget/TabHost.html)

并在此处查看教程：http: [//developer.android.com/resources/tutorials/views/hello-tabwidget.html](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)

我认为你最好使用这样的内置组件，然后自己实现类似的东西

# java - 无法使用 DefaultHttpClient 进行身份验证

> ID：11100106
> 
> 赞同：0
> 
> 时间：2012-06-19T11:35:18.060
> 
> 标签：java, authentication, apache-httpclient-4.x

我想将身份验证标头添加到我的请求中。我正在使用来自 Apache httpclient 4.0 的 DefaultHttpClient。

我发现这是这样做的：

```
URI uri = new URI("http://www.bla.bla/folder/");

String host = uri.getHost();
int port = uri.getPort();

httpClient.getCredentialsProvider().setCredentials(
        new AuthScope(host, port, AuthScope.ANY_SCHEME),
        new UsernamePasswordCredentials("myuser", "mypassword")
        ); 
```

这是执行的，即使使用调试器，我也看到 httpClient 的一些凭据变量是在执行请求时设置的。但我用查尔斯检查网络流量，没有身份验证标头。

变量的内容：

主持人：www.bla.bla

端口：-1

顺便提一句。我启用了 Charles 作为代理来查看请求的标头，其中：

```
HttpHost proxy = new HttpHost("127.0.0.1", 8888, "http");
httpParameters.setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

我认为这不应该改变我的标题，对 webproxy 毫无意义......无论如何，如果我禁用代理的东西它也不起作用（虽然我看不到标题的内容，但我想它是一样的原因）。

还尝试使用 Softhinker.com 的帖子中描述的请求拦截器：[如何在 Android 中发送 HTTP 基本身份验证标头？](https://stackoverflow.com/questions/4250968/how-can-i-send-http-basic-authentication-headers-in-android)

我得到了完全相同的请求，没有身份验证标头。

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:26:09.650

我让它在请求中“手动”设置标题。

```
request.setHeader(new BasicHeader("Authorization", authstring)); 
```

# java - servlet 请求参数字符编码

> ID：11100107
> 
> 赞同：11
> 
> 时间：2012-06-19T11:35:19.883
> 
> 标签：java, servlets, character-encoding

我有一个 Java servlet，它通过 HTTP GET 请求从上游系统接收数据。该请求包含一个名为“text”的参数。如果上游系统将此参数设置为：

```
TEST3 please ignore: 
```

它在上游系统的日志中显示为：

```
00 54 00 45 00 53 00 54 00 33 00 20 00 70 00 6c   //TEST3 pl
00 65 00 61 00 73 00 65 00 20 00 69 00 67 00 6e   //ease ign
00 6f 00 72 00 65 00 3a                           //ore: 
```

（ // 注释实际上并没有出现在日志中）

在我的 servlet 中，我读取了这个参数：

```
String text = request.getParameter("text"); 
```

如果我将 的值打印`text`到控制台，它会显示为：

```
T E S T 3  p l e a s e  i g n o r e : 
```

`text`如果我在调试器中检查 的值，它会显示为：

```
\u000T\u000E\u000S\u000T\u0003\u0000 \u000p\u000l\u000e\u000a\u000s\u000e\u0000 
\u000i\u000g\u000n\u000o\u000r\u000e\u000: 
```

所以看起来字符编码有问题。上游系统应该使用 UTF-16。我的猜测是 servlet 假设为 UTF-8，因此读取的字符数是应有的两倍。对于消息“TEST3 请忽略：”，每个字符的第一个字节是`00`. 这在 servlet 读取时被解释为一个空格，这解释了当 servlet 记录消息时每个字符之前出现的空格。

`text`显然，当我阅读请求参数时，我的目标只是得到消息“TEST3 请忽略：” 。我的猜测是我可以通过指定请求参数的字符编码来实现这一点，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-24T12:02:50.793

像这样使用

```
new String(req.getParameter("<my request value>").getBytes("ISO-8859-1"),"UTF-8") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:57:14.570

尝试为此使用过滤器

```
public class CustomCharacterEncodingFilter implements Filter {

    public void init(FilterConfig config) throws ServletException {
    }

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
                                                       throws IOException, ServletException {
        request.setCharacterEncoding("UTF-8");
        response.setCharacterEncoding("UTF-8");
        chain.doFilter(request, response);
    }

    public void destroy() {
    } 
```

这应该为整个应用程序设置编码权

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:49:31.717

看起来它是用`UTF-16LE`（Little Endian）编码编码的，这是一个成功打印字符串的类：

```
import java.io.UnsupportedEncodingException;
import java.math.BigInteger;

public class Test {
    public static void main(String[] args) throws UnsupportedEncodingException {
            String hex = "00 54 00 45 00 53 00 54 00 33 00 20 00 70 00 6c"  +
                            "00 65 00 61 00 73 00 65 00 20 00 69 00 67 00 6e" +
                           "00 6f 00 72 00 65 00 3a"; // + " 00";
            System.out.println(new String(new BigInteger(hex.replaceAll(" ", ""), 16).toByteArray(), "UTF-16LE"));
    }
} 
```

输出：

```
TEST3 please ignore? 
```

在输入中添加两个零的输出

```
TEST3 please ignore: 
```

**更新**

要让它与您一起工作，您`Servlet`可以尝试：

```
 String value = request.getParameter("text");
  try {
      value = new String(value.getBytes(), "UTF-16LE");
  } catch(java.io.UnsupportedEncodingException ex) {} 
```

**更新**

请参阅以下[链接](http://www.fileformat.info/info/charset/UTF-16LE/encode.htm)，它验证生成的十六进制实际上是`UTF-16LE`

# git - Git：合并多个分支

> ID：11100109
> 
> 赞同：4
> 
> 时间：2012-06-19T11:35:34.093
> 
> 标签：git, git-gui

如果这个问题已经在某个地方得到了彻底、明显和多次的回答，我很抱歉；但是在搜索了至少一周后，我一直无法找到有关我遇到的这个特定问题的信息。

为简化起见，我们有 3 个人在做一个项目，每个人都有自己的分支，我们会定期将其合并回主干。问题是我们要么发生冲突（试图挑选樱桃），要么它似乎只是覆盖了 master 的所有文件，前 2 个分支与最后一个分支合并，实际上什么都不合并，只是覆盖。

我的问题是（希望）很简单：

主干线

```
string test1;
string test2;
string test3; 
```

test1 分支

```
 string test1 = "Dan Branch merged";
 string test2;
 string test3; 
```

test2 分支

```
string test1;
string test2 = "Dave Branch merged";
string test3; 
```

test3 分支

```
string test1;
string test2;
string test3 = "Will Branch merged"; 
```

合并所有 3 个分支时的所需输出：

```
string test1 = "Dan Branch merged";
string test2 = "Dave Branch merged";
string test3 = "Will Branch merged"; 
```

当我尝试合并测试 1 和 2 时，我实际得到的是：

自动合并失败；修复冲突，然后提交结果。

```
 <<<<<<< HEAD
 +        String test1 = "Dan Branch merged";
 +        String test2;
 +        String test3;
  =======
+         String test1;
+         String test2 = "Dave Branch merged.";
+         String test3;
  >>>>>>> test2 
```

我目前在 Windows 上使用 git-gui（计划在我最终了解 git 时更改为 bash/shell/cli）所以如果有可能，如果有专门针对git-gui，但乞丐当然不能选择。

为了让事情变得简单，存储库位于本地网络文件夹而不是任何服务器上。我不知道这是否会影响实现（如果我猜对了它们的用法，我想 push 和 pull 将不会被使用）

目前 Git 已被降级为存储和浏览旧版本的方法，因为所有合并都是手动完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:57:54.000

您处理代码的方式可能不是处理分布式开发的常规方式。我建议（如果在开发过程中可以访问主干线）以下步骤来完成这项工作：

```
git stash     (to put your changes away for the moment)
git pull      (to get the latest commits)
git stash pop (to get back, what was stashed away in the first step) 
```

然后解决你的冲突。这应该不像合并整个分支时那么多。然后：

```
git commit
git push 
```

**重要提示：**避免更改分支并在 master 上工作。分支更常用于并行开发事物，而不是每天都致力于掌握。例如，当启动一个新的、主要版本的软件时，会更改很多旧代码或 api，因此您不能简单地将它们推送到 master，因为提交会破坏整个包的稳定性。

编辑：

为了尊重 David 的评论：在 git 中使用分支并没有什么坏处，但我遇到过一两个案例，其中分支处理不当会导致混乱，没有经验的 git 用户很难理解和解决。不过，那些处理错误不应该是平常的。

编辑：

事实证明，您确实总共只有一个本地存储库。在我看来，起初你有一个你都推送到的 LAN 存储库。所以如果你不改变你的基础设施（我不推荐它。另一种选择是[http://bitbucket.org](http://bitbucket.org)和每个人在他的计算机上都有自己的存储库克隆）那么（我认为）没有其他方法拥有三个分支。我强烈建议您阅读 git 教程，例如[http://www.vogella.com/articles/Git/article.html](http://www.vogella.com/articles/Git/article.html)以更改您的基础架构。祝你好运。

# c# - Asp.Net：将文件保存在路径位置

> ID：11100113
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:35:51.190
> 
> 标签：c#, asp.net

我在客户端上传了pdf文件。

我将路径位置传递给`.ashx file`，由此我在字符串变量中有路径位置。我需要将此文件保存在该路径位置。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:37:42.350

假设`rootPath`是一个包含根路径的变量，并且`fileName`是您要保存的文件的名称：

```
var filePath = System.IO.Path.Combine(rootPath, fileName); 
```

我不知道该文件以什么形式存在。如果您包含该文件，我可以`filePath`从那里就如何处理提供更好的说明。

```
using (var outputStream = File.Open(filePath, FileMode.CreateNew))
{
    // write to outputStream; depends on what form your PDF file is in at this point.
} 
```

# forms - 自定义 GridView - PreRender 上的 AddCustomControlsRow 清空 DataRows

> ID：11100117
> 
> 赞同：1
> 
> 时间：2012-06-19T11:36:07.960
> 
> 标签：forms, gridview, webforms, web, grid

我正在尝试创建一个具有附加功能的自定义 GridView，但我确实遇到了由“Button2”“模拟”的 PostBack 问题。在每个 PostBack（在第一个 DataBinding 之后），一个 DataRow 的内容被删除，直到 GridView 完全为空。它与 PreRender 事件中的 AddCustomControls() 有关。但我不知道如何解决这个问题。有人有想法吗？任何帮助将不胜感激。

也许下图比我的话更好地描述了这种行为。

使用 OnLoad 事件中的 DataBind() 和 OnDataBound 事件中的 AddCustomControls，它工作得很好。表在 PostBacks 之间保持完全相同。但是当我尝试实现网格的编辑时，我不能再使用这个“解决方案”（这也不是很优雅）。从逻辑上讲，TextBoxes 中的编辑值被 OnLoad 中的 DataBind() 覆盖。

不知何故，它与“headerTable.Rows.AddAt(1, controlRow);”有关。如果我执行“headerTable.Rows.Add(controlRow);” 它在最后添加了行，一切正常。所以这种标题行之后的内容被清除了......

![在此处输入图像描述](../Images/29b295dafd0e459060018b831296a983.png)

**网页配置**

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
      <pages>
        <controls>
          <add tagPrefix="asp" assembly="WebApplication11" namespace="WebApplication11"/>
        </controls>
      </pages>
    </system.web>
</configuration> 
```

**默认.aspx**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:mightygridview
            ID="mightyGridView"
            runat="server"
            AllowSorting="true"
            AllowHiding="true"
            AutoGenerateEditButton="false"
            OnRowUpdating="mightyGridView_RowUpdating">
        </asp:mightygridview>

        <br />

        <asp:Button ID="Button1" runat="server" Text="Button - Binding" onclick="Button1_Click" />
        <asp:Button ID="Button2" runat="server" Text="Button - Nothing" />
    </div>
    </form>
</body>
</html> 
```

**默认.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{

}

protected void Button1_Click(object sender, EventArgs e)
{
    DataTable tbl = new DataTable();
    DataRow row;

    tbl.Columns.Add("Spalte A");
    tbl.Columns.Add("Spalte B");
    tbl.Columns.Add("Spalte C");

    row = tbl.NewRow();
    row[0] = "Spalte A, Zeile 1";
    row[1] = "Spalte B, Zeile 1";
    row[2] = "Spalte C, Zeile 1";
    tbl.Rows.Add(row);

    row = tbl.NewRow();
    row[0] = "Spalte A, Zeile 2";
    row[1] = "Spalte B, Zeile 2";
    row[2] = "Spalte C, Zeile 2";
    tbl.Rows.Add(row);

    row = tbl.NewRow();
    row[0] = "Spalte A, Zeile 3";
    row[1] = "Spalte B, Zeile 3";
    row[2] = "Spalte C, Zeile 3";
    tbl.Rows.Add(row);

    mightyGridView.DataSource = tbl;
    mightyGridView.DataBind();
} 
```

**MightyGridView.cs**

```
public class MightyGridView : GridView
{
    public MightyGridView()
    {
        _images = new Dictionary<_imageTypes, string>();
        _images.Add(_imageTypes.SortAsc, "data:;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAJCAYAAADpeqZqAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB9oGEAstLlCBjxcAAABWSURBVBjTY/z45TsDqYCFkYF0wMTAyMiADW/ese8/LjkmbCZt3r73PzKNYRMjAwMDMkZXuHn73v/oalBs2oTDZHRxJph2XBpQNELVMn759pOM0CMDAADRtiJL6bIYOQAAAABJRU5ErkJggg==");
        _images.Add(_imageTypes.SortAscActive, "data:;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAJCAYAAADpeqZqAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oHDgckDaeYtVQAAAA1SURBVBjTY/z//z8DqYCJgQyAU5NK2Yb/JGmCacClkYmQDdg0MhHjJHRxJmL8gC7PSLcgBwAAMRqcsjcZIwAAAABJRU5ErkJggg==");
        _images.Add(_imageTypes.SortDesc, "data:;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAJCAYAAADpeqZqAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB9oGEAstDmvvr98AAABhSURBVBjTY/zy7ScDqYCJgQzA8p/hPwMDAwPDpm17/xNS7OflzAix6T8DA8N/BgY/T4gATg2ezowwtUwYErg0IPsJqhmOfdEU+Ho6M6KrwRoQMI2+OGxm/PTlOzmhRzoAADvsH5oZ616EAAAAAElFTkSuQmCC");
        _images.Add(_imageTypes.SortDescActive, "data:;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAJCAYAAADpeqZqAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oHDgckFi39fLgAAABBSURBVBjTY/z//z8DqYCJgQzAAmOolG0gaOWdrgBGFJtgAoQ0YDgPl0Z0cSZCCrAa9P//f6xYuXT9f1xyjHQLcgCoNDp3uWsOTwAAAABJRU5ErkJggg==");
        _images.Add(_imageTypes.HideColumn, "data:;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAJCAYAAADpeqZqAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oGEAsyFSzQaK0AAADHSURBVBjThZAxCoNQDIbTnsAbCM4eQfAC4uYstCdwFOd2dXNwFZzcxQtI3+bkrIKz4AW+Ln2l7WtpIJB8yf9DIoAAsq4rVVWx77topnMcR6ZpQvdHecS2bXJTSrIsYxgGNE/TFKWU2LZ90MxwvVwvBEFAXdd4nodSis8dQwTI6XTGsiz6vufb3ABd1+G6Lnme4/v+f9E8zziOQ1mWAFIUxbP+KYqiyHCP49gQPb8nIrIsi4Rh+IokSRJp25Y3+OrQNM3XGz7zDsbcHXO0jDwtAAAAAElFTkSuQmCC");
        _images.Add(_imageTypes.ShowAllColumns, "data:;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAfCAIAAAB/DupQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAYdSURBVEhLtZXrb5NlGMb3/6AQjXzigyQaEwwGDDGixGDYQEUSFUWDcnACE7fhtq4HtpX2LV27Hmi7Q0e3MTbWLJtkAyY4NybqGId1Ze16Prynet3P87Yj+4zNnSZ7CL9cua7rvltl6F3FtPastgSeNfmjjd7oL+6Vc85Irf3pKeHJccvjDXOs/dFXpodH9Iuftvxb8+s/Hzf8/dH5Bx/U/fX+2YX3frq/p3b+3dPzu07N5fP5KkDnnpZmn5TuPS79vlS6s1gKz6vfdjyaWFDHF9TwnDZX76h7zy7gz7E5dXRWHflDvXZX8U4qeAzeUnqmlCuTsmdS6gxL9QHxtcN3VlZWquo90ZnFUrH8uRCIXexPfK5bxP+sPOr6UqZQZucPf4JSeTznSTb4s3g0D0uVx1p3+hshtblmemlpqerHy8uhGaXrRgz/XOdaPnE5VudN7K9/0ODPHOuI4PFMV+yQfvXrS4ntR++2hsQ6VxSP31mj+5sTB1rTeDzhyFc3LeOxORDbfSb61umVTQemCH1Yt/Thzw/21C7sOnn/nRPzO47PvXls9vWj97Z9cRffWw/PbJhXP7m95dDtLQdvbT546+Wa6ZeqtdlUPQViZQh92TdaYh+VDz6KOj49pyglWVElWZFkVaRRwlOzRUkpiHKhqOQLSq4o5wryyMRMNi9n8lI6J6eyUiorJjPS7urvCS103+BUVRtVUdTuoZv4BpQPuKKk+EITBVHJg8ugmGxBdnaPMq6UJq6UzIqJjLR9zxFC2wOjjMvlEhdi/QMT+JbBlTDEhV5PMAwo0FxvtiBl8nKnfyiTk1JskkBnpERG3LqjWjOE+UADLke7e0fJCknlUBpRcfiHCQ29RRkmkA85yeruh1ioJm6WuIl0GW29cj18czYw9Jt/YNIXGvcEx5yBYbs3hBffwIS3f9zdN+bsvt7pGxRcQXcw7OodcwTw55DgCVmcfe32gM03LHiHrJ5BiztkdoX0Qq+m2ua5piolhSSTahYdeU3RwQqR9DKLZRhCVkAvWSFlcjLE2rxDZYvhsriWxhQ1tMU7zLjMinJu0As0oGUuoZ29I2QxoGQFcdNZ0erqT2aoFWucmyrGU2VDzF2DG7iwGAK5v6SXtQJ6kRgqwarGuIguK5kdfUDDXwygmFiyrJqjyQfeYhYdEmMVrlRNyRYUCGQ+sAozbiojmmx+QLkPcUhOPoduc4bGbt57LrGRTt+AdT2xEbt/yOYZQGId9gDF5UZ6wQ5Hb5stYBK8BovbZO822gIGwa+z+HRmT4PRpXlt6grJClZO4XtRlFTodfeFC5UKs6pBr+AZYJLZamRYhdOiSQiQ3nQxlqJZTdJo6HZHqMLlLYYPnagw3MA2o8W8EjnJ7AxyH4jLKgwf9BYP+cu4cBncZ4ky+qK9n1YZFovrlRA8/XyVMeQvVjkvocJsNagPiI75K7Z0uGBxRS+46+hWR5+2dbxqRVINW2nleB+oZ1QJo8Wd4j6gEmhbClUTm9vsQHMfVpMFQq8VNEP0wtX/K8ZWoYf3F9eSXzUMYtzQX1iMGHmF4UOctRg+IEbuL9NbjK4VMJrqJmtgw9bBX8TIVk7rA48OMSbSUnnlEBpVGDFqaMZdYaOhm81XSDLpRR+oEtCLGLWVY1cYA38RI4+O58b7gBhh7rMEieXoSLyCvuRjXHYtGReDGEkyv+48tzTFqHGZXsotUUSM0QT0Mslx4kZiZTQaMhiedtAhHRTc/WZHb7vgM5qdVveAxYWt626z+U1Wr8Hs1Ld3GgW/weLVm926dmdLm6PZZG82CheMjkZjZ4PBXm+w1ettPzUJ6w3hP0jl604W2zyD7FRSf/lVQ27gxtj14XqRG5ReMHZWfFiJ5yF5eV210AOLUWG2GtRfumfOoLYa2umha4nENIsTrL/wN1FoNNgourIVMGQ5ll9vCK0GobVTSdshBKhnWtXoRMSTsNWprTJWo9yHep0ALtfLZ3m1jEZD+PXhP8y8D40GJ/ZNu5bsCgN9XmfjW4dKaLmtFc41WSPgxvPLTC+4z6Ev+Q4crdv72cm39325bWfNK2/seyFDv+i5XC4SiTx80R8w/wMqxePff8NAaAAAAABJRU5ErkJggg==");
    }

    private enum _imageTypes { SortAsc, SortAscActive, SortDesc, SortDescActive, HideColumn, ShowAllColumns }
    private readonly Dictionary<_imageTypes, string> _images;

    public new bool AllowSorting { get; set; }
    public bool AllowHiding { get; set; }
    public override object DataSource
    {
        get
        {
            return Page.Session[this.ID + ".DataSource"];
        }

        set
        {
            Page.Session[this.ID + ".DataSource"] = value;
            base.DataSource = value;
        }
    }

    private void AddCustomControlsRow()
    {
        if (DataSource != null)
        {
            if (AllowSorting || AllowHiding)
            {
                DataTable dataTable = GetDataTableFromDataSource();

                if (dataTable.Columns.Count > 0 && dataTable.Rows.Count > 0)
                {
                    if (this.HeaderRow != null && this.HeaderRow.Parent != null)
                    {
                        string sortExpression = dataTable.DefaultView.Sort.Replace(" ASC", "").Replace(" DESC", "");
                        SortDirection sortDirection = dataTable.DefaultView.Sort.EndsWith(" ASC") ? SortDirection.Ascending : SortDirection.Descending;

                        Table headerTable = (Table)this.HeaderRow.Parent;
                        GridViewRow controlRow = new GridViewRow(-1, -1, DataControlRowType.Header, DataControlRowState.Normal);
                        TableCell controlCell;
                        ImageButton imageButton;

                        foreach (TableCell cell in this.HeaderRow.Cells)
                        {
                            // Sicherstellen, dass es nicht die Spalte mit den Bearbeiten-Buttons ist, welche keine Überschrift enthält.
                            if (!(cell.Text.Replace("&nbsp;", "").Trim().Length > 0))
                            {
                                controlCell = new TableCell();

                                cell.Attributes.Add("style", "border-bottom: 0");
                                controlCell.Attributes.Add("style", "border-top: 0; text-align: center");

                                controlRow.Cells.Add(controlCell);
                            }

                            else
                            {
                                controlCell = new TableCell();

                                cell.Attributes.Add("style", "border-bottom: 0");
                                controlCell.Attributes.Add("style", "border-top: 0; text-align: center");

                                if (AllowSorting)
                                {
                                    imageButton = new ImageButton();
                                    imageButton.Attributes.Add("data-column-name", cell.Text);
                                    imageButton.Click += new ImageClickEventHandler(SortColumnAscButton_Click);

                                    if (sortExpression == cell.Text && sortDirection == SortDirection.Ascending)
                                        imageButton.ImageUrl = _images[_imageTypes.SortAscActive];
                                    else
                                        imageButton.ImageUrl = _images[_imageTypes.SortAsc];

                                    controlCell.Controls.Add(imageButton);

                                    imageButton = new ImageButton();
                                    imageButton.Attributes.Add("data-column-name", cell.Text);
                                    imageButton.Click += new ImageClickEventHandler(SortColumnDescButton_Click);

                                    if (sortExpression == cell.Text && sortDirection == SortDirection.Descending)
                                        imageButton.ImageUrl = _images[_imageTypes.SortDescActive];
                                    else
                                        imageButton.ImageUrl = _images[_imageTypes.SortDesc];

                                    controlCell.Controls.Add(imageButton);

                                    controlRow.Cells.Add(controlCell);
                                }

                                if (AllowHiding)
                                {
                                    imageButton = new ImageButton();
                                    imageButton.Attributes.Add("data-column-name", cell.Text);
                                    imageButton.Click += new ImageClickEventHandler(HideColumnButton_Click);
                                    imageButton.ImageUrl = _images[_imageTypes.HideColumn];
                                    controlCell.Controls.Add(imageButton);

                                    controlRow.Cells.Add(controlCell);
                                }
                            }
                        }

                        headerTable.Rows.AddAt(1, controlRow);
                    }
                }
            }
        }
    }

    public static DataTable GetDataTableFromIEnumerable(IEnumerable enumerable)
    {
        DataTable dataTable = new DataTable();
        DataRow row;
        PropertyInfo[] propertyInfos;

        foreach (object obj in enumerable)
        {
            propertyInfos = obj.GetType().GetProperties();

            if (dataTable.Columns.Count == 0)
                foreach (PropertyInfo pi in propertyInfos)
                    dataTable.Columns.Add(pi.Name, pi.PropertyType);

            row = dataTable.NewRow();

            foreach (PropertyInfo pi in propertyInfos)
            {
                object value = pi.GetValue(obj, null);
                row[pi.Name] = value;
            }

            dataTable.Rows.Add(row);
        }

        return dataTable;
    }

    private DataTable GetDataTableFromDataSource()
    {
        DataTable dataTable;

        if (DataSource is DataTable)
            dataTable = (DataTable)DataSource;

        else if (DataSource is IEnumerable)
            dataTable = GetDataTableFromIEnumerable((IEnumerable)DataSource);

        else
            throw new NotSupportedException("Typ wird nicht unterstützt.");

        return dataTable;
    }

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
    }

    protected override void OnLoad(EventArgs e)
    {
        // Weg der funktionierte, jedoch mit Editing Probleme macht: OnLoad: DataBind() / OnDataBound: AddCustomControls.
        // Das DataBinding überschrieb die geänderten Werte wieder.

        base.OnLoad(e);
    }

    protected override void OnDataBinding(EventArgs e)
    {
        base.OnDataBinding(e);
    }

    protected override void OnDataBound(EventArgs e)
    {
        base.OnDataBound(e);
    }

    protected override void OnPreRender(EventArgs e)
    {
        AddCustomControlsRow();

        base.OnPreRender(e);
    }

    protected override void OnUnload(EventArgs e)
    {
        base.OnUnload(e);
    }

    protected void SortColumnAscButton_Click(object sender, ImageClickEventArgs e)
    {
        DataTable dataTable = GetDataTableFromDataSource();
        dataTable.DefaultView.Sort = ((ImageButton)sender).Attributes["data-column-name"] + " ASC";

        DataSource = dataTable;
        DataBind();
    }

    protected void SortColumnDescButton_Click(object sender, ImageClickEventArgs e)
    {
        DataTable dataTable = GetDataTableFromDataSource();
        dataTable.DefaultView.Sort = ((ImageButton)sender).Attributes["data-column-name"] + " DESC";

        DataSource = dataTable;
        DataBind();
    }

    protected void HideColumnButton_Click(object sender, ImageClickEventArgs e)
    {
        // todo: Improve. Backup zum resetten, etc.
        DataTable dataTable = GetDataTableFromDataSource();
        dataTable.Columns.Remove(((ImageButton)sender).Attributes["data-column-name"]);

        DataSource = dataTable;
        DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:06:03.830

将其移至 OnRowCreated，它也会在生命周期的每个 PostBack 上触发：

```
 protected override void OnRowCreated(GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.Header)
        {
            if (AllowSorting || AllowHiding)
                AddHeaderControls(e.Row);
        }

        base.OnRowCreated(e);
    } 
```

它还修复了排序按钮等的行为。单击（排序）按钮不会触发事件，因为 PreRender 中的“绑定”来不及处理事件。我还稍微更改了 AddHeaderControls 方法，而不是添加一整行，而是将控件添加到单元格本身，这是一个片段：

```
foreach (TableCell cell in row.Cells)
{
    // Sicherstellen, dass es nicht die Spalte mit den Bearbeiten-Buttons ist, welche keine &#220;berschrift enth&#228;lt.
    if (cell.Text.Replace(&quot;&amp;nbsp;&quot;, string.Empty).Trim().Length &gt; 0)
    {
        // Write the Header Text into the cell as a (Literal)Control, because it would be lost otherwise.
        cell.Controls.Add(new LiteralControl(cell.Text));
        cell.Controls.Add(new LiteralControl(&quot;&lt;br /&gt;&quot;));

        if (AllowSorting)
        {
            imageButton = new ImageButton();
            imageButton.Attributes.Add(&quot;data-column-name&quot;, cell.Text);
            imageButton.Click += new ImageClickEventHandler(SortColumnAscButton_Click);
            if (sortExpression == cell.Text &amp;&amp; sortDirection == SortDirection.Ascending)
                imageButton.ImageUrl = _images[_imageTypes.SortAscActive];
            else
                imageButton.ImageUrl = _images[_imageTypes.SortAsc];
            cell.Controls.Add(imageButton);

            imageButton = new ImageButton();
            imageButton.Attributes.Add(&quot;data-column-name&quot;, cell.Text);
            imageButton.Click += new ImageClickEventHandler(SortColumnDescButton_Click);
            if (sortExpression == cell.Text &amp;&amp; sortDirection == SortDirection.Descending)
                imageButton.ImageUrl = _images[_imageTypes.SortDescActive];
            else
                imageButton.ImageUrl = _images[_imageTypes.SortDesc];
            cell.Controls.Add(imageButton);
        }

        if (AllowHiding)
        {
            imageButton = new ImageButton();
            imageButton.Attributes.Add(&quot;data-column-name&quot;, cell.Text);
            imageButton.Click += new ImageClickEventHandler(HideColumnButton_Click);
            imageButton.ImageUrl = _images[_imageTypes.HideColumn];
            cell.Controls.Add(imageButton);
        }
    }
} 
```

# arrays - Excel - 在不是错误或空白的列中查找最后一个值

> ID：11100119
> 
> 赞同：3
> 
> 时间：2012-06-19T11:36:08.730
> 
> 标签：arrays, excel, function, spreadsheet

我需要在 Excel 电子表格的列中找到最后一个非错误、非空白值。该列可以有几个 #N/A 实例，它们与实际值交替出现。有几种解决方案可以找到最后一个非空单元格，但这些解决方案不考虑错误，特别是如果最后一个非空单元格有错误。

在这种情况下，解决方案是 3。

![在此处输入图像描述](../Images/349285b65a400abbf0b8e5504ff3eb25.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T12:57:28.743

试试这个公式

`=LOOKUP(2,1/(A1:A100<>""),A1:A100)`

根据需要扩大范围。在 Excel 2007 及更高版本中，您可以使用整个列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T14:29:13.603

使用 IFERROR(. . . 消除 #N/A 错误单元格

然后

{=MAX(COLUMN(A4:A150)*(A4:A150<>0))} 如果 A1 样式

或者

{=MAX(COLUMN(RC4:RC150)*(RC4:RC150<>0))} 如果 RC 样式

{} ...数组公式。.. ctrl+shift+enter

对于 Row - 将 COLUMN 替换为 ROW

# java - Java 中的多租户安全管理器

> ID：11100122
> 
> 赞同：0
> 
> 时间：2012-06-19T11:36:48.547
> 
> 标签：java, security, security-policy

我正在尝试为每个租户将多个策略配置文件加载到 java 安全管理器中。由于[java secuirty 教程](http://docs.oracle.com/javase/1.4.2/docs/guide/security/PolicyFiles.html)指定可以将多个策略文件加载到策略对象，但我的要求是如何在我的 Multi-Tenant 安全模型中指定哪个策略文件必须在运行时加载给哪个用户扩展了默认的安全模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:23:15.893

这听起来有点吓人。如果可能的话，我会为每个租户使用不同的虚拟机。如果你不能这样做，你可能想要使用 Policy.setPolicy。您将需要一个自定义的 Policy 实现，它基本上是多个策略的包装器。它可能必须查阅一些 ThreadLocal 变量来查看哪个用户上下文适用于当前线程，然后委托给适当的包装策略实现。要阅读策略文件，您可能必须直接引用[Sun 安全提供程序](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/provider/PolicyFile.java)。不要忘记默认禁止反射，否则您的策略逻辑将很容易规避。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T11:21:46.027

试着看看[这篇博文](http://www.jayway.com/2014/06/13/sandboxing-plugins-in-java/)。Jens Nordahl 描述了如何对不受信任的插件进行沙箱处理，这听起来像是您所需要的。

附言。很抱歉打扰了这篇文章，但它是谷歌上最高的帖子之一。

# asp.net-mvc - 用于导航到 T4MVC 链接的 Visual Studio 宏

> ID：11100124
> 
> 赞同：3
> 
> 时间：2012-06-19T11:36:56.600
> 
> 标签：asp.net-mvc, visual-studio, macros, t4mvc, visual-studio-macros

我使用 T4MVC，我对它很满意并希望保留它——它可以减少运行时缺陷。不幸的是，它使得导航到视图和内容（在 T4MVC 中也称为视图和链接）变得更加困难。即使使用 Resharper，我也无法导航到引用的项目：

[T4MVC 和 Resharper 导航](https://stackoverflow.com/questions/9269279/t4mvc-and-resharper-navigation)

我可以帮忙构建一个宏来执行此操作吗？以前从未构建过 VS IDE 宏，我不知道如何处理某些事情，比如“转到定义”过程的内部结果，如果可能的话。

如果您不熟悉 T4MVC，宏可能会提供以下帮助：

1.  给定令牌：`Links.Content.Scripts.jQuery_js`在文件 MyView.cshtml 中，'(F12) Go To Definition'。这表现得很好。

2.  完成相关任务后： `public readonly string jQuery_js = "~/Content/Scripts/jQuery.js";`在 T4MVC 生成的文件中（非常好，谢谢 David，但我们真的不需要查看），捕获分配的字符串并关闭文件。

3.  在解决方案资源管理器中导航到由捕获的字符串表示的 PhysicalPath。

此过程也适用于视图/布局/母版页/部分等。

如果您提供宏或宏链接来执行此操作，或者有其他解决方案，那就太好了。否则，将特别感谢有关如何在 VS 宏中简单地执行第 3 步的提示，并获得我的支持。完成后，我会将宏发回此处作为答案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:42:52.907

这是一个可以提供帮助的 Visual Studio 宏。

**它能做什么**

现在你可能会在这样的地方使用 T4MVC 引用：

*   布局 = MVC.Shared.Views.MasterSiteTheme；
*   ScriptManager.AddResource(Links.Content.Script.jQueryXYZ_js);
*   <link type="text/css" href="@Links.Content.Style.SiteTheme_css" />
*   返回视图（MVC.Account.Views.SignIn）；
*   @Html.Partial(MVC.Common.Views.ContextNavigationTree)
*   @Html.ActionLink("登录/注册", MVC.Account.SignIn())

F12（转到定义）已经适用于最后一个项目符号（操作），但此 hack 旨在涵盖其他场景（资源）。

**宏**

```
Imports EnvDTE
Imports System.IO

Public Module NavT4Link
    Sub NavigateToLink()
        DTE.ExecuteCommand("Edit.GoToDefinition")
        Dim navpath As String = Path.GetFileName(DTE.ActiveDocument.FullName)
        Dim isContentLink As Boolean = navpath.Equals("T4MVC.cs")
        If (isContentLink Or navpath.EndsWith("Controller.generated.cs")) Then
            Dim t4doc As TextDocument = DTE.ActiveDocument.Object()
            navpath = CurrentLinePathConstant(t4doc)
            If isContentLink Then
                t4doc.Selection.MoveToPoint(t4doc.Selection.ActivePoint.CodeElement(vsCMElement.vsCMElementClass).StartPoint)
                t4doc.Selection.FindText("URLPATH")
                navpath = Path.Combine(CurrentLinePathConstant(t4doc), navpath)
            End If
            If navpath.StartsWith("~") Then
                DTE.ActiveDocument.Close(vsSaveChanges.vsSaveChangesPrompt)
                Dim proj As Object = DTE.Solution.FindProjectItem(DTE.ActiveDocument.FullName).ContainingProject
                navpath = Path.GetDirectoryName(proj.Fullname()) + navpath.TrimStart("~")
                DTE.ItemOperations.OpenFile(navpath)
            End If
        End If
    End Sub

    Function CurrentLinePathConstant(ByVal t4doc As TextDocument) As String
        t4doc.Selection.SelectLine()
        Dim sa() As String = t4doc.Selection.Text().Split("""")
        If sa.Length > 1 Then Return sa(sa.Length - 2) Else Return ""
    End Function
End Module 
```

**安装**

*   在 Visual Studio 中，按“Alt-F8”打开宏资源管理器。
*   右键单击“我的宏”，选择“新建模块...”，然后单击“添加”。
*   用此处显示的代码替换所有文本。
*   保存并退出宏编辑器。
*   打开“工具：选项”。
*   在左侧窗格中，选择“环境：键盘”。
*   在“显示包含的命令”文本字段中输入“T4”。
*   在“按下快捷键：”字段中按下“F12”键。
*   单击“分配”和“确定”。

在未打补丁的 VS 上，此安装过程不会产生“可绑定”宏。一种解决方法是 (CTRL-SHIFT-RR) 记录一个空宏，并将代码粘贴到其中*而不重命名它*。如果有人知道在 VS 中安装宏的更可记录的方法，请发表评论。

**注释/注意事项**

它旨在替换当前的 F12 功能，因此如果它不是 T4MVC 链接，它将照常执行，否则它会继续打开资源。它处理大多数情况，但不处理 T4MVC 生成的空控制器方法。那些你在你以前做过的地方被抛弃的人。

对于内容/资产/链接资源，在解决方案资源管理器中导航到它可能是正确的，例如图像文件，但我在 Visual Studio 文档中没有看到该功能。

# c# - 在 ASP.NET 中使用 Eval 动态设置图像宽度

> ID：11100130
> 
> 赞同：2
> 
> 时间：2012-06-19T11:37:25.823
> 
> 标签：c#, asp.net, sql-server-2008

我在 ASP.NET 的中继器中有一个图像。我需要将此图像的宽度动态设置为从数据库返回的值。我从 SQL db 中获取信息，然后将转发器绑定到结果集或数据源，并尝试在转发器中指定图像的宽度，如下所示：

```
<asp:Image ID="Image1" runat="server" Width='<%# Eval("ImageSize") %>' ImageUrl="~/Images/ProgressBar.jpg"/> 
```

我收到一条错误消息

```
Specified cast is not valid. 
```

这可能是由于从数据库返回的数据类型引起的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:52:55.090

使用`System.Web.UI.WebControls.Unit.Parse`方法：

```
<asp:Image 
      ID="Image1" 
      runat="server" 
      Width='<%# System.Web.UI.WebControls.Unit.Parse(Eval("ImageSize").ToString()) %>'
      ImageUrl="~/Images/ProgressBar.jpg"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:59:32.620

像这样在 aspx 文件中重写：

```
Width='<%# ConvertToImageSize(Eval("ImageSize")) %>' 
```

**代码隐藏：**

```
protected int ConvertToImageSize(object imageSize)
{
  int i = 0;
  if (imageSize != null)
  {
    i = Convert.ToInt32(imageSize); 

   }

  return i;

} 
```

有点粗糙，但我希望你能轻松完成剩下的处理。

# javascript - 无法在 API 上使用 Jquery 进行事件处理

> ID：11100138
> 
> 赞同：0
> 
> 时间：2012-06-19T11:37:42.257
> 
> 标签：javascript, jquery, html

```
 <!DOCTYPE HTML>
<html>
<head>  
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>   
    <script type="text/javascript">
    $("#myBtn").on("click",function(){
        alert('myBtn Clicked');
    });
    </script>
</head>
<body>
    <button type="button" id="myBtn">Sample</button>    
</body>
</html> 
```

对于上述代码，单击事件未触发。我使用 JSFiddle 它工作正常。在委托的情况下它工作正常。我用于委托的代码如下

```
<!DOCTYPE HTML>
<html>
<head>  
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>   
    <script type="text/javascript">
    $(document).on("click","button",function(){
        alert('myBtn Clicked');
    });
    </script>
</head>
<body>
    <button type="button" id="myBtn">Sample</button>    
</body> 
```

帮我解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:41:48.340

将您的代码放入 document.ready()

```
 <!DOCTYPE HTML>
<html>
<head>  
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>   
    <script type="text/javascript">
    $(document).ready(function(){
    $("#myBtn").on("click",function(){
        alert('myBtn Clicked');
    });
    });
    </script>
</head>
<body>
    <button type="button" id="myBtn">Sample</button>    
</body>
</html> 
```

现在在第二种情况下，您的代码可以正常工作，因为文档首先在页面中加载，并且可以在没有 document.ready 的情况下对其进行附加，但当时可能正在加载 html 元素，因此无法将事件附加到它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:42:22.297

阅读[http://docs.jquery.com/How_jQuery_Works](http://docs.jquery.com/How_jQuery_Works)

所以对你来说，这将是：

```
 $(document).ready(function(){
     $("#myBtn").on("click",function(){
        alert('myBtn Clicked');
     });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:41:21.147

试着把它放在初始化功能上。也许没有加载jquery的javascript

```
$(function () {
    $(document).on("click","button',function(){  
            alert('myBtn Clicked');  
        });  

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:42:41.080

简单：当您添加侦听器时，您的 DOM 尚未加载！确保首先加载 DOM

*   使用`ready`事件
*   将脚本标签移动到正文的末尾

* * *

```
$( document ).ready(function(e) {
    // add listeners here
}); 
```

# android - Facebook SSO，区分登录和墙贴消息

> ID：11100140
> 
> 赞同：0
> 
> 时间：2012-06-19T11:37:45.683
> 
> 标签：android, facebook, facebook-graph-api, android-emulator

我使用 developer.facebook.com 提供的基本 Facebook 库制作了一个在 Facebook 上发布的示例，它与 SSO 配合得很好，

```
 btnPostOnFb.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        {
                facebook.authorize(FBIntegrationSampleActivity.this, new String[]{ "user_photos,publish_checkins,publish_actions,publish_stream"}, new DialogListener() {
                    @Override
                    public void onComplete(Bundle values) {
                        if(values!=null && values.containsKey("access_token")){
                            postOnWall("NEW POST from" +count+"Android -Anuj");
                            Log.e("post on wall", "WALLPOST");
                            Toast.makeText(getApplicationContext(), "SUCCESSFULLY POSTED MSG ON WALL", Toast.LENGTH_SHORT).show();
                        }else if(values!=null)
                            Log.e("LOGINE SUCCESS", "LOGIN SUCCESS");
                            Toast.makeText(getApplicationContext(), "SUCCESSFULLY LOGGED IN", Toast.LENGTH_SHORT).show();
                    }
                    @Override
                    public void onFacebookError(FacebookError error) {
                        Log.e("onFBERROR", "ONFBERROR");
                    }
                    @Override
                    public void onError(DialogError e) {
                        Log.e("on DESI ERROR", "ON_ERROR");
                    }
                    @Override
                    public void onCancel() {
                        Log.e("onCANCEL", "ONCANCEL");
                    }
                });
            }
        }
    }); 
```

哪个成功发布在 Facebook 墙上，我想要的是，我需要向用户显示他已成功登录，然后会在那里发布一条消息。

我面临的问题是`onComplete(Bundle values)`成功登录和成功发布都调用了该方法，我如何区分它们，`key`Bundle 值中是否有一个可以帮助找到差异的方法？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:01:34.760

问题是您用于身份验证和发布。无需这样做：

用于身份验证

```
facebook.authorize(a, PERMISSIONS,-1,new LoginListener()); 
```

并发布：

1）没有对话框`facebook.request(parameters)`

2) 带对话框

```
facebook.dialog(this,"stream.publish",parameters,new TestUiServerListener());

    public class TestUiServerListener implements DialogListener {
    public void onComplete(Bundle values) {
        final String postId = values.getString("post_id");
        if (postId != null) {
            new AsyncFacebookRunner(ZValues.authenticatedFacebook).request(postId,new TestPostRequestListener());
        } else {
            Post_Message_Title.this.runOnUiThread(new Runnable() {
                public void run() {
                }
            });
        }
    }

    public void onCancel() {
    }

    public void onError(DialogError e) {
        e.printStackTrace();
    }

    public void onFacebookError(FacebookError e) {
        e.printStackTrace();
    }
}

public class TestPostRequestListener implements RequestListener {
    public void onComplete(final String response, final Object state) {
        try {
            JSONObject json = Util.parseJson(response);
            String postId = json.getString("id");
            this.runOnUiThread(new Runnable() {
                public void run() { 
                        successLoginShowDialog();  // Dialog after Login succeeds
                }
            });
        } catch (Throwable e) {
        }
    }

    public void onFacebookError(FacebookError e, final Object state) {
        e.printStackTrace();
    }

    public void onFileNotFoundException(FileNotFoundException e,
            final Object state) {
        e.printStackTrace();
    }

    public void onIOException(IOException e, final Object state) {
        e.printStackTrace();
    }

    public void onMalformedURLException(MalformedURLException e,
            final Object state) {
        e.printStackTrace();
    }
} 
```

只需创建一个方法 successLoginShowDialog() 并显示您想要的任何内容，

如果 Post 成功，在 TestPostRequestListener 下面的 Thread 将被调用，所以在这个 Thread 中做所有的东西：

```
this.runOnUiThread(new Runnable() {
        public void run() { 
            successLoginShowDialog();  // Dialog after Login succeeds
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:45:26.883

到 postOnWall() 你可以得到它的回应：

```
public void postToWall(String message) {
        Bundle parameters = new Bundle();
        parameters.putString("message", message);
        parameters.putString("description", "topic share");
        try {
            fbObj.request("me");
            String response = fbObj.request("me/feed", parameters, "POST");
            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("")
                    || response.equals("false")) {
                // showToast("Blank response.");
                Toast.makeText(context, "blank response", Toast.LENGTH_SHORT)
                        .show();
            } else {
                // showToast("Message posted to your facebook wall!");
                Toast.makeText(context,
                        "Message posted to your facebook wall!",
                        Toast.LENGTH_SHORT).show();
            }

        } catch (Exception e) {
            // showToast("Failed to post to wall!");
            e.printStackTrace();

        }
    } 
```

# jruby - 如何摆脱 Capybara (JRuby) 中的 ElementNotFound 错误

> ID：11100143
> 
> 赞同：0
> 
> 时间：2012-06-19T11:37:57.977
> 
> 标签：jruby, capybara

我是水豚和 jruby 的新手。作为我的实践之一，我使用了way2sms 网站。单击发送短信后，控件无法找到输入电话号码的元素。

```
require 'rubygems'
 require 'capybara'
 require 'capybara/dsl'
 require 'selenium-webdriver'
 include Capybara::DSL

  Capybara.run_server = false
  Selenium::WebDriver::Firefox.path = "C:/Program Files/Mozilla Firefox/firefox.exe"
  Capybara.default_driver = :selenium
  visit "http://www.way2sms.com"
  page.find(:xpath, '/html/body/form/div/div/div[2]/div/div/div[2]/a').click

    fill_in('username',:with=>"username")
    fill_in('password',:with=>"password")
    click_button('button')

    page.find(:xpath, '//*[@id="quickclose1"]').click
    page.find(:xpath, '//*[@id="quicksms"]').click

    page.fill_in('MobNo',:with=>"mobile number")
    page.fill_in('textArea',:with=>"Some message5")
    page.find(:xpath, '//*[@id="Send"]').click
    click_button('Send SMS') 
```

当我运行它时，它显示以下错误，

```
Capybara::ElementNotFound: cannot fill in, no text field, text area or password
field with id, name, or label 'MobNo' found. 
```

任何人都可以帮助我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:47:21.227

没有更多信息，我的猜测是其中之一导致手机号码字段可能通过 ajax 出现？

```
 page.find(:xpath, '//*[@id="quickclose1"]').click
 page.find(:xpath, '//*[@id="quicksms"]').click 
```

您是否使用@javascript 运行您的场景？那将是我首先要尝试的。由于默认驱动程序是 rack_test 并且不能处理任何 javascript。为了让 capybara 使用 selenium 的 javascript 驱动程序，默认情况下，您需要使用 @javascript 在 cucumber 中标记您的场景。或者如果您使用的是 RSpec，则使用 :js => true 。[在](http://rubydoc.info/github/jnicklas/capybara/master)水豚自述文件中阅读它

问题的根源在于没有 ID 为“MobNo”的输入。您确定它是输入字段的正确 id 吗？您还可以通过在失败的步骤之前添加步骤“然后显示页面”来查看网页的外观。

# html - 两个 css3 列文本，中间有一个图像

> ID：11100144
> 
> 赞同：4
> 
> 时间：2012-06-19T11:38:00.323
> 
> 标签：html, css

我想达到这个结果

![在此处输入图像描述](../Images/197bc7ea700de88ab05cb45ec478488f.png)

有很多[这样](http://www.alistapart.com/articles/crosscolumn/)的教程，但它们使用固定的文本和列。我以这种方式在我的两列布局中打印可变长度文本

```
#cols {
column-count: 2;
column-gap: 20px;
} 
```

```
<div id="box">
  <p id="cols">
    Lorem Ipsum....
  </p>
</div> 
```

所以我不能使用这样的技术，在这种情况下如何将图像放在中间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:06:11.713

你在这里：http:
[//jsfiddle.net/aX47K/](http://jsfiddle.net/aX47K/)

CSS：

```
.column{  
   width:300px;  
   float:left;  
   margin-right:20px;  
} 

.column div{  
  width:200px;  
  height:210px;  
}

#col-1 div{
  float:right;
}
#col-2 div{
 float:left;
} 

img#center-image{  
  position:absolute;  
  left:110px;
} 
```

# azure - Azure Web 角色上的 ReportViewer：基础连接已关闭

> ID：11100151
> 
> 赞同：0
> 
> 时间：2012-06-19T11:38:22.130
> 
> 标签：azure, reportviewer

我有一个使用 SSL 配置的 Web 角色，它有一个 ReportViewer 控件，用于呈现托管在 Azure Reporting Services 中的报表。

当我使用 ReportViewer 加载页面时，出现错误：

> 基础连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。根据验证程序，远程证书无效。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:58:41.340

这成功了。我将此代码放在具有报表查看器的页面中的 _Load 事件中：

```
ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(BypassSslCertificateValidation);

private static bool BypassSslCertificateValidation(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors error)
{
   return true; //add your validation logic here
} 
```

# javascript - 复制包含网格视图的 div 数据

> ID：11100152
> 
> 赞同：0
> 
> 时间：2012-06-19T11:38:27.310
> 
> 标签：javascript, asp.net

我正在为包含 asp.net gridview 的 div 实现复制到剪贴板功能。我的代码正在运行，即现在我如何才能使其适用于所有浏览器

```
function CopyGridView() {

       var div = document.getElementById('div1');                  
       div.contentEditable = true;
       var controlRange;
       if (document.body.createControlRange) {
           controlRange = document.body.createControlRange();
           controlRange.addElement(div);
           controlRange.execCommand('Copy');
       }
                  div.contentEditable = 'false';
} 
```

请帮忙。

问候，
-尼丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:24:35.693

```
var dataToCopy = 'Hi';
window.clipboardData.setData('text',dataToCopy); 
```

[http://help.dottoro.com/ljctuhrg.php](http://help.dottoro.com/ljctuhrg.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:49:21.970

```
window.clipboardData.setData('text',text); 
```

# android - 无效的 OAUTH 访问令牌，当使用应用程序访问令牌时，Android

> ID：11100155
> 
> 赞同：1
> 
> 时间：2012-06-19T11:38:31.627
> 
> 标签：android, facebook, oauth, access-token

正如标题所说，当我尝试请求获取安装了该字段的朋友列表时：

```
"me/friends?Fields=installed&access_token=..." 
```

我在我的 logcat 中收到以下错误：

```
"Invalid OAuth access token" 
```

在查看 facebook api 时，我看到安装需要获取应用程序访问令牌。因此，我使用 appId 和 app Secret 生成了应用程序访问令牌：

[https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=APP_ID&client_secret=APP_SECRET](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=APP_ID&client_secret=APP_SECRET)

下面是代码：

```
try {

 JSONObject obj = Util.parseJson(mFacebook.request("me/friends?fields=installed&access_token=..."));

  Log.d("json Response", obj.toString());
  JSONArray array = obj.optJSONArray("data");
  if (array != null) {
                      for (int i = 0; i < array.length(); i++) {
                        //  String name = array.getJSONObject(i).getString("name");

                          String id = array.getJSONObject(i).getString("id");

                          Log.d("Friends: ",id);
                      }
                  } 
  }catch (Exception e){
    Log.d("Friends:", e.getMessage());
  } 
```

任何人都知道为什么这样做我一直在寻找。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:01:42.893

您在身份验证后得到的是 App Access Token。

报价：`Authenticating as an App allows you to obtain an access token which allows you to make request to the Facebook API on behalf of an App rather than a User. This is useful, for example to modify the parameters of your App, create and manage test users, or read your application's insights for example. App access tokens can also be used to publish content to Facebook on behalf of a user who has granted a publishing permission to your application`

来自[facebook 文档](https://developers.facebook.com/docs/authentication/applications/)。

您的案例需要的是用户访问令牌。参考[这个](https://developers.facebook.com/docs/authentication/server-side/)。用户需要对您的应用进行身份验证并授予访问权限，您才能访问他的好友列表。

**编辑**

检查单个用户的 url 是 [https://graph.facebook.com/](https://graph.facebook.com/) {uid}?fields=installed&access_token=< ACCESS_TOKEN >

您正在尝试获取用户好友列表，然后检查该应用程序是否已安装。我认为没有用户访问令牌是不可能获得用户朋友列表的。

**编辑 2**

假设从您的评论中知道您有 frind 的列表。然后，您无需为每个用户调用，而是可以使用 FQL。

`https://graph.facebook.com/fql?q=SELECT uid,is_app_user from user where uid IN (uid1,uid2)`

如果你有用户访问令牌，那么你可以直接这样做。

`https://graph.facebook.com/fql?q=SELECT uid,is_app_user from user where uid IN (SELECT uid2 FROM friend WHERE uid1 = me())`

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:38:15.323

~~不要请求/**我**/*朋友*——因为有了应用程序访问令牌，API 将不知道“我”应该是谁——而是请求/**用户 ID** /*朋友*。~~

抱歉，我之前错了——方法是使用**用户访问令牌**，然后将请求设置为 /me/friends...</p>

# c# - 每次在属性获取器中都返回新的 ICommand 是不是很糟糕？

> ID：11100161
> 
> 赞同：10
> 
> 时间：2012-06-19T11:38:48.567
> 
> 标签：c#, .net, wpf, mvvm

是否值得写这段代码：

```
RelayCommand _saveCommand;
public ICommand SaveCommand
{
    get
    {
        if (_saveCommand == null)
        {
            _saveCommand = new RelayCommand(this.Save);
        }
        return _saveCommand;
    }
} 
```

而不是每次都返回新对象：

```
public ICommand SaveCommand
{
    get { return new RelayCommand(this.Save); }
} 
```

据我所知，命令 getter 很少使用，而且[RelayCommand](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id016)的构造函数非常快。写更长的代码更好吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T11:44:31.263

我喜欢[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

```
public ICommand SaveCommand 
{ 
    get { return _saveCommand ?? (_saveCommand = new RelayCommand(this.Save); }
} 
```

如果操作数不为空，则返回左侧操作数，否则返回右侧操作数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T11:55:00.800

这种设计可能会误导您班级的用户。例如，他们可以在具有数千次迭代的循环中读取属性的值。这将创建许多新对象，而用户可能不会想到这一点。

See the documentation of StyleCop warning [CA1819: Properties should not return arrays](http://msdn.microsoft.com/en-us/library/0fss9skc.aspx) - this is a very similar issue.

> Typically, users will not understand the adverse performance implications of calling such a property. Specifically, they might use the property as an indexed property.

Additionally, `SaveCommand == SaveCommand` will be false. I think this is counterintuitive.

To sum up, this might not be the best design, however, if the users of your code know how it works and how to use it properly, then it's ok.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:45:21.713

Yes, it's bad to return a new object every time. Why do it? If, for any reason, that getter is called many times, you'll be creating new objects in memory every time. If you do that for just this one, isolated instance, that's not so terrible. But if you make a habit of programming this way, you'll create hard-to-find issues and have a code base that's difficult to maintain. It's better to be simple, clean and elegant at all times, and end up with a nice, clean, easy-to-maintain code base.

By the way, you could always just initialize the field when you declare it:

```
RelayCommand _saveCommand = new RelayCommand(this.Save); 
```

Then your getter only needs this in it:

```
return _saveCommand; 
```

# oracle - oracle form6i中如何添加库

> ID：11100162
> 
> 赞同：1
> 
> 时间：2012-06-19T11:38:51.893
> 
> 标签：oracle, oracleforms

我对 Oracle Forms 很陌生。

在我的项目中，我有一个 pkg_voice.pll 包含一些函数和过程。这些用于另一种形式的触发器。

当我打开我的表单时，它显示一个错误：“pkg_voice。必须声明”。我将 .pll 库附加到该表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:45:55.983

将库导入表单时是否删除了路径？似乎根本找不到该 pll 文件，或者您执行这些程序不正确（参数错误等）

尝试将 pll 文件放在 fmb 所在的同一目录下。然后使用它的快捷方式打开 Oracle Forms，其中您已将“开始”定义到您的文件所在的同一目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:46:14.797

您的库`pkg_voice.pll`实际上是否*包含*任何也称为的过程、函数或包`pkg_voice`？

请记住，您实际上并不是指 PL/SQL 中的 PLL 文件名，而是指在 PLL 中定义的过程、函数或包。

# eclipse-rcp - Display类的syncExec()和asyncExec()的区别

> ID：11100171
> 
> 赞同：13
> 
> 时间：2012-06-19T11:40:18.593
> 
> 标签：eclipse-rcp

我正在开发一个使用 Eclipse 后台处理的插件项目。[Display类的](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FDisplay.html)[syncExec()](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FDisplay.html&anchor=syncExec(java.lang.Runnable))和[asyncExec()](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FDisplay.html&anchor=asyncExec(java.lang.Runnable))方法有
什么区别？它们适用于哪些情况？任何示例都可能会有所帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T11:46:44.517

来自[问：为什么我会收到错误“org.eclipse.swt.SWTException: Invalid thread access”？](http://www.eclipse.org/swt/faq.php#uithread)

> 为了允许后台线程对属于 UI 线程的对象执行操作，使用了 Display 的方法 syncExec(Runnable runnable) 和 asyncExec(Runnable runnable)。这些是 SWT 中唯一可以从任何线程调用的方法。它们允许 UI 线程同步执行 runnable，导致后台线程等待 runnable 完成，或者异步允许后台线程继续执行而不等待结果。使用syncExec() 执行的runnable 与对UI 操作的等效直接调用最接近，因为Java 方法调用总是在继续之前等待结果，就像syncExec() 一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-15T15:20:00.973

除了 Tom Seidel 的回答之外，以下是您可能想要使用其中一种情况的示例：

*   `asyncExec`当您想要更新 UI 中的某些内容而不关心结果时使用。例如更新标签或进度条。

*   `syncExec`在该方法调用之后的代码需要确保 UI 处于一致状态或需要来自 UI 的一些数据的地方使用。例如从用户对话框中获取一些数据。或者你更新了一个小部件，在做任何其他事情之前（例如另一个 UI 更新）你想知道小部件更新已经完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-16T10:47:26.640

SWT 实现单线程 UI 模型。在这个模型中，只有 UI 线程可以调用 UI 操作。如果您尝试从 UI 线程外部访问 SWT 对象，则会收到异常“org.eclipse.swt.SWTException: Invalid thread access”。因此，为了允许其他线程对属于 UI 线程的对象执行操作，SWT 提供了 syncExec 和 asyncExec 方法。

这个[链接](http://self-learning-java-tutorial.blogspot.in/2017/04/swt-syncexec-vs-asyncexec.html)可以帮助你一个例子

# codeigniter - 代码点火器加入不起作用

> ID：11100172
> 
> 赞同：0
> 
> 时间：2012-06-19T11:40:20.897
> 
> 标签：codeigniter

```
<?php 

$this->db->select('*');
$this->db->from('venue');
$this->db->join('venue_type vt1', 'vt1.venue_type_id = venue.venue_type_id1');
$this->db->join('venue_subtype vst1', 'vst1.venue_subtype_id = venue.venue_subtype_id1');
$this->db->join('venue_type vt2', 'vt2.venue_type_id = venue.venue_type_id2');
$this->db->join('venue_subtype vst2', 'vst2.venue_subtype_id = venue.venue_subtype_id2');
$this->db->join('venue_type vt3', 'vt3.venue_type_id = venue.venue_type_id3');
$this->db->join('venue_subtype vst3', 'vst3.venue_subtype_id = venue.venue_subtype_id3');
$this->db->where('venue_id',$id);
$query = $this->db->get(); 
```

我有场地表，它有超过 1 个字段关系 b/w 场地类型。当我试图给出第一个关系时

```
 <?php
 $this->db->join('venue_type vt1', 'vt1.venue_type_id = venue.venue_type_id1');
 $this->db->join('venue_subtype vst1', 'vst1.venue_subtype_id = venue.venue_subtype_id1'); 
```

它工作正常，但我尝试访问整个它不工作。

请帮我。（这可能很简单，但我卡住了）

萨拉瓦南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:29:17.727

**Codeigniter**中没有任何`$this->db->from`功能。改为使用**`$this->db->select('venue.*')`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:54:49.987

您需要为多个连接使用别名。

选择`st_id`，`table1`。`us_login`, `table2`. `us_login` FROM( `stream`) LEFT JOIN `users`AS table1 ON `table1`。`us_id`= `stream`。`st_id_user_from` LEFT JOIN `users`AS table2 ON `table2`。`us_id`= `stream`。`st_id_user_to`

见链接：[http ://codeigniter.com/forums/viewthread/151176/](http://codeigniter.com/forums/viewthread/151176/)**

# c# - 在客户端中找不到端点

> ID：11100173
> 
> 赞同：0
> 
> 时间：2012-06-19T11:40:23.643
> 
> 标签：c#, asp.net-mvc, wcf, web-services

我有一项服务 ( `EmailSender`)。这是配置文件：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="Conn" connectionString="Data Source=localhost;Initial Catalog=DT.DBTest;Integrated Security=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>      
    </bindings>
    <services>
      <service name="DT.myapp.Services.PremieraInteraction">
        <endpoint address="" binding="webHttpBinding"
                  bindingConfiguration="webHttpBindingWithJsonP"
                  contract="DT.myapp.Services.IPremieraInteraction"
                  behaviorConfiguration="webHttpBehavior"/>
      </service>
      <service name="DT.myapp.Services.EmailSender">
        <endpoint address="" binding="webHttpBinding"
                  contract="DT.myapp.Services.IEmailSender"
                  behaviorConfiguration="webHttpBehavior"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>       
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

在另一个（asp.net mvc）应用程序中，我想调用此服务。这是代理类：

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
    [System.ServiceModel.ServiceContractAttribute(ConfigurationName = "IEmailSender")]
    public interface IEmailSender
    {

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IEmailSender/SendRegistrationEmail", ReplyAction = "http://tempuri.org/IEmailSender/SendRegistrationEmailResponse")]
        void SendRegistrationEmail();

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IEmailSender/SendETicket", ReplyAction = "http://tempuri.org/IEmailSender/SendETicketResponse")]
        void SendETicket();

        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IEmailSender/SendTestEmail", ReplyAction = "http://tempuri.org/IEmailSender/SendTestEmailResponse")]
        void SendTestEmail();
    }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
    public interface IEmailSenderChannel : IEmailSender, System.ServiceModel.IClientChannel
    {
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
    public partial class EmailSenderClient : System.ServiceModel.ClientBase<IEmailSender>, IEmailSender
    {

        public EmailSenderClient()
        {
        }

        public EmailSenderClient(string endpointConfigurationName) :
            base(endpointConfigurationName)
        {
        }

        public EmailSenderClient(string endpointConfigurationName, string remoteAddress) :
            base(endpointConfigurationName, remoteAddress)
        {
        }

        public EmailSenderClient(string endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) :
            base(endpointConfigurationName, remoteAddress)
        {
        }

        public EmailSenderClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) :
            base(binding, remoteAddress)
        {
        }

        public void SendRegistrationEmail()
        {
            base.Channel.SendRegistrationEmail();
        }

        public void SendETicket()
        {
            base.Channel.SendETicket();
        }

        public void SendTestEmail()
        {
            base.Channel.SendTestEmail();
        }
    } 
```

而且，我如何拨打电话：

```
Binding binding = new BasicHttpBinding(BasicHttpSecurityMode.None);
EndpointAddress endpointAddress = new EndpointAddress(new Uri("http://localhost:12736/EmailSender.svc"));
EmailSenderClient client = new EmailSenderClient(binding, endpointAddress); 
client.SendTestEmail(); 
```

但是，我得到错误：

```
There was no endpoint listening at http://localhost:12736/EmailSender.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. 
```

`InnerException`说：

```
The remote server returned an error: (404) Not Found. 
```

哪里有错误？
谢谢。

# mysql - MySQL 查询缓存 (2)

> ID：11100177
> 
> 赞同：0
> 
> 时间：2012-06-19T11:40:42.220
> 
> 标签：mysql, caching

这不是问题，但它属于站点优化。我有 110K 的酒店记录。当我使用 SELECT something 查询时，它会从 110k 记录中提取数据。

如果我搜索超过 3 星级的酒店列表，价格在 100 - 300 美元之间，并且在墨西哥城内。假设我得到了 45 个匹配结果。

当我添加更多细化时，还有其他方法吗，它只会从 45 个匹配中提取数据，而不是与 110K 数据一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:45:35.870

关键是我的朋友的索引...确保您拥有 WHERE 中使用的所有项目的索引，这将减少选择时的基数...

另一方面，110k 行对于 MySQL 来说仍然是一个非常小的数据集，因此如果您没有在表上获得正确的索引，则不应该造成太大的性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:45:11.660

这更多地取决于您的数据更新频率。

看。

1.  [MySQL 查询缓存](http://www.petefreitag.com/item/390.cfm)
2.  [MySQL 中的查询缓存](https://stackoverflow.com/questions/1748637/query-caching-in-mysql?rq=1)
3.  [缓存问题 MySQL 或文件系统](https://stackoverflow.com/questions/1433243/caching-question-mysql-or-filesystem?rq=1)

> 我是说当我添加更多细化时还有其他方法吗，它只会从 45 个匹配项中提取数据，而不是与 110K 数据一起使用。

然后查看这 45 行并对其应用查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:45:28.730

使用查询创建视图

```
Create view refined as select * from .... 
```

然后向该视图添加更多选择查询，例如

```
 Select * from refined where ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T11:53:44.180

首先，我倾向于同意[Brian](https://stackoverflow.com/a/11100235/620813)的观点，索引很重要。

1.  检查哪种查询最频繁，并相应地在表上构建多列索引。请注意，索引中列的顺序确实很重要（因为索引是一棵树，第一列出现在树根中，所以如果您的查询不使用该列 - 整个树是无用的）。

2.  启用慢查询日志以查看哪些查询实际上需要很长时间（如果有），或者不使用索引，以便您可以随着时间的推移改进索引。

话虽如此，**如果您的表数据大部分是读取的**，那么查询缓存是一个真正的性能提升。这是一篇关于 mysql 查询缓存的[有用文章。](http://www.mysqlperformanceblog.com/2006/07/27/mysql-query-cache/)

# iphone - 在 iOS 5 中将联系人添加到特定组

> ID：11100179
> 
> 赞同：1
> 
> 时间：2012-06-19T11:40:55.573
> 
> 标签：iphone, contact

我们在 iOS 5 中将联系人添加到特定联系人组时遇到问题。我们在模拟器和设备中进行了测试，但结果相同。联系人已添加但未添加到“OUR”组。

在以前的 iOS 版本中，一切正常！可能有人遇到过这样的问题吗？

# c# - 格式化 XElement 值

> ID：11100182
> 
> 赞同：0
> 
> 时间：2012-06-19T11:41:14.080
> 
> 标签：c#, linq-to-xml

有什么方法可以控制此语句的格式？

```
var element = new XElement("Element", true); 
```

这样我就可以得到这个输出，例如：

```
<Element>True</Element> 
```

我正在寻找可插入的格式化程序，而不是类似的东西`true ? "True": "False"`

之后我尝试遍历元素，但似乎 XElement 的构造函数调用`ToString()`了该值，这意味着我很难评估类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:49:51.570

完全改版的答案：

以前我推荐过 XmlWriter，但事实证明这是不可能的。

我正在编辑这个答案，因为`XElement`没有像我想的那样保留类型，即

```
var x = new XElement("element", true);
x.WriteTo(new XmlTextWriter(Console.Out)); // Write stuff to console using XmlTextWriter 
```

`WriteValue(Boolean)`永远不会被调用，该值存储`XText`在`XElement`.

对于感兴趣的人，XElement.WriteTo 调用 XmlWriter.WriteElement（扩展方法），而后者又调用 XmlWriter.WriteString。

可以更改 XmlWriter.WriteString 的行为，但这也会更改

```
var x = new XElement("element", "true"); // String instead of bool 
```

因为没有存储类型。

我的解决方案是创建一个工厂并通过它控制 XElements 的创建方式。IE：

```
class XElementFactory {
      public static XElement CreateXElement(string name, object value) {
          var type = obj.GetType();
          if (typeof(boolean).Equals(type))
             // Format the XText accordig to specification, use the XText ctor for clarification and readability
             return new XElement(name, (bool) obj ? new XText("True") : XText("False")); 
          // Maybe add additional if clauses if there are just a few special cases
          return new XElement(name, obj); // Let it through
      }
} 
```

反射严重损害了性能，但由于我们正在处理 XML，我的猜测是性能一开始并不那么重要。如果需要，请使用构建器模式，根据类型调用正确的构建器，即类似于以下内容：

```
Builders.First(b => b.Types.Contains(objToBuild.GetType())).BuildXElement(objToBuild); // Builders could maybe be filled by MEF? 
```

这个答案有点长（但我在长时间的电话会议中做了一些事情=P），本质上问题不是格式问题，而是创建问题。

# c++ - C++ - 队列中的最小值

> ID：11100187
> 
> 赞同：4
> 
> 时间：2012-06-19T11:41:50.033
> 
> 标签：c++, struct, queue

我有来自结构类型的队列

```
struct test {
   int numbers;
};

queue<test> q; 
```

如何从以下位置找到最小值：

```
q.front().numbers; 
```

例如，如果数字中有 5、1、3，我需要找到 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:04:15.787

由于您需要一个整数队列，因此最简单的解决方案是使用[`std::deque<int>`](http://en.cppreference.com/w/cpp/container/deque). 然后您可以使用[`std::min_element`](http://en.cppreference.com/w/cpp/algorithm/min_element)查找队列中的最小元素：

```
std::deque<int> q{5, 1, 3};
std::deque<int>::iterator it = std::min_element(q.begin(), q.end());
std::cout << *it << std::endl; 
```

通过这样做，您不需要使用`struct test`. 尤其如此，因为它似乎只存储一个整数。另一方面，如果`struct test`更复杂（具有更多字段），那么您可以使用完全相同的方法，但定义一个比较函数`struct test`（有关此类比较函数的示例，请参见@fljx 答案）。

如果您只能使用 a`queue`您可以执行的操作类型受到限制。因此，您需要执行以下操作：

```
std::queue<int> q;
/* fill queue ... */
int min_value = INT_MAX;
std::size_t size = q.size();
while (size-- > 0) {
    int x = q.front();
    q.pop();
    q.push(x);
    if (x < min_value)
        min_value = x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:04:52.870

网上有很多解释它的页面。

您需要创建一个`operator <`说明如何比较您的结构。

```
struct test {
   int numbers;

    bool operator < ( const test &t ) const
    { return this->numbers < t.numbers; }
}; 
```

（我没有测试此代码是否存在任何愚蠢的错误，但如果您发现任何问题，下面的链接可能会有所帮助）。

之后，使用`#include <algorithm>`来访问`min_element()`.

参考资料： [http](http://www.cplusplus.com/reference/algorithm/min_element/) : //www.cplusplus.com/reference/algorithm/min_element/ http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html

# forms - 在 symfony2 中使用方法（断言真/假）验证没有实体的表单（跨字段）

> ID：11100189
> 
> 赞同：1
> 
> 时间：2012-06-19T11:42:08.623
> 
> 标签：forms, validation, symfony

我有一个不与任何实体绑定的注册表单。我想出了如何指定验证器（`validation_constraint`选项）。如果我使用简单的验证器也没关系。

但是如果我想进行跨字段验证，比如比较“密码”和“重复密码”字段怎么办？

如果它是一个实体，那么它就像向自定义方法添加“@Assert/True”注释一样简单，但在这里我一无所知，在文档或网络中找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:32:35.383

在`buildForm`表单的功能中，您可以使用`CallbackValidator`：

```
 use Symfony\Component\Form as Form;

 //...

 public function buildForm(FormBuilder $builder, array $options)
 {
    // build your form...
    $builder->addValidator(new Form\CallbackValidator(function(Form\FormInterface $form)
    {
       if ($form["password"]->getData() != $form["repeat_password"]->getData())
       {
            $form->addError(new Form\FormError('passwords must be the same'));
       }
    });
    //...
 } 
```

在 symfony 2.1+ 中，你应该为 POST_BIND 事件添加一个事件监听器：

```
$builder->addEventListener(FormEvents::POST_BIND, function(FormEvent $event)
{
    $form = $event->getForm();

    if($form['password']->getData() !== $form['password_confirm']->getData())
    {
        $form['password_confirm']->addError(new FormError('error.form.passwords-not-match'));
    }
}); 
```

# svn - SVN：添加文件元数据

> ID：11100191
> 
> 赞同：0
> 
> 时间：2012-06-19T11:42:16.103
> 
> 标签：svn, version-control

对于 SVN 中的项目，我们需要在文件版本中添加一些元数据，例如*buggy status*、*review status*等。

我认为我不能使用自定义属性，因为它是在元素级别而不是在版本上。

我想在提交的注释中添加元数据，但是该注释由该更改集的所有文件版本共享，因此无法使用。

是否有任何可用于此的 SVN 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:10:11.257

要在 TortoiseSVN 中设置/编辑修订属性：右键单击工作副本中的顶级项目 -> 显示日志 -> 右键单击​​要为其设置属性的修订 -> 显示修订属性 -> 推送新-> 高级 -> 等等。

您不必单击顶级项目本身，但您需要一个项目，其日志将显示您要为其设置属性的修订版。

# php - Hadoop Hive 数据库

> ID：11100199
> 
> 赞同：1
> 
> 时间：2012-06-19T11:42:59.317
> 
> 标签：php, hadoop, hive, thrift

我是 Hadoop Hive 的新手，现在我正在使用 Apache thrift 连接 Hive PHP，它运行良好。我想知道服务器中的 Hive 数据库文件存储在哪里？（数据库文件路径）。谁能帮帮我，我想把我的桌子转移到另一台服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:09:02.707

数据存储在 HDFS 上，而不是本地文件系统上。

尝试从您的工作跟踪器运行它：

```
hadoop fs -ls /user/hive/warehouse/ 
```

至少这是默认路径。

# powershell - Powershell 测试连接：运行 AsJob 与直接运行时的不同结果

> ID：11100201
> 
> 赞同：1
> 
> 时间：2012-06-19T11:43:04.950
> 
> 标签：powershell, ping, jobs

***简短版**：为什么运行时`Test-Connection`只提供**一个**结果`-AsJob`？*

* * *

***详细版本：***

当`Test-Connection`(ping!) 命令在 Powershell 中运行（以管理员身份运行）时，它使用参数的默认`4`值`Count`。这给了我预期的结果（为清楚起见，删除了一些不相关的数据）：

```
PS C:\Windows\system32> Test-Connection www.stackoverflow.com

Destination     IPV4Address      IPV6Address   Bytes    Time(ms) 
-----------     -----------      -----------   -----    -------- 
www.stackove... 64.34.119.12     {}            32       117      
www.stackove... 64.34.119.12     {}            32       113      
www.stackove... 64.34.119.12     {}            32       111      
www.stackove... 64.34.119.12     {}            32       113 
```

但是，当我使用`-AsJob`标志运行它时，似乎（运行时`Receive-Job`，等待几秒钟后）`Count`只有 1，但我希望它是 4，并获得与上述类似的结果。相反，我得到了这个：

```
PS C:\Windows\system32> Test-Connection www.stackoverflow.com -AsJob

Id         Name            State      HasMoreData     Location     Command        
--         ----            -----      -----------     --------     -------        
1          Job1            Running    False           .            Test-Connection

PS C:\Windows\system32> Receive-Job 1

Destination     IPV4Address      IPV6Address   Bytes    Time(ms) 
-----------     -----------      -----------   -----    -------- 
www.stackove... 64.34.119.12     {}            32       113 
```

`AsJob`变体始终**返回**一行，*即使您为 提供特定值也是如此`Count`*。

我的 Google-fu 和[Get-Help-fu](http://technet.microsoft.com/library/dd347597.aspx)似乎还不够。有人可以解释一下这里发生了什么，最好用一些指针自己如何以及在哪里找到这些信息（例如，哪些帮助文件或来源解释了这种行为）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:31:01.360

可能是一个错误。在 v3 中，您会返回 4 个 ping。

# .net - GenericRepository 和 EF。好吗？

> ID：11100205
> 
> 赞同：5
> 
> 时间：2012-06-19T11:43:27.947
> 
> 标签：.net, asp.net-mvc, entity-framework

我刚刚看到了 GenericRepository 的实现：

```
namespace ContosoUniversity.DAL
{
    public class GenericRepository<TEntity> where TEntity : class
    {
        internal SchoolContext context;
        internal DbSet<TEntity> dbSet;

        public GenericRepository(SchoolContext context)
        {
            this.context = context;
            this.dbSet = context.Set<TEntity>();
        }

        public virtual IEnumerable<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            string includeProperties = "")
        {
            IQueryable<TEntity> query = dbSet;

            if (filter != null)
            {
                query = query.Where(filter);
            }

            foreach (var includeProperty in includeProperties.Split
                (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                query = query.Include(includeProperty);
            }

            if (orderBy != null)
            {
                return orderBy(query).ToList();
            }
            else
            {
                return query.ToList();
            }
        }

        public virtual TEntity GetByID(object id)
        {
            return dbSet.Find(id);
        }

        public virtual void Insert(TEntity entity)
        {
            dbSet.Add(entity);
        }

        public virtual void Delete(object id)
        {
            TEntity entityToDelete = dbSet.Find(id);
            Delete(entityToDelete);
        }

        public virtual void Delete(TEntity entityToDelete)
        {
            if (context.Entry(entityToDelete).State == EntityState.Detached)
            {
                dbSet.Attach(entityToDelete);
            }
            dbSet.Remove(entityToDelete);
        }

        public virtual void Update(TEntity entityToUpdate)
        {
            dbSet.Attach(entityToUpdate);
            context.Entry(entityToUpdate).State = EntityState.Modified;
        }
    }
} 
```

这里：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp- net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application) ，我认为它非常好，但我想问你一个问题。这种方法与单独实现（每个实体存储库在单独的类中）有什么优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:47:47.087

即使您决定需要`Repository`为每个实体提供具体的类，至少使用通用存储库作为基础仍然是绝对有意义的，这样您就不会重复代码，并且可以在一个地方测试通用功能。

实际上，这种做法没有任何缺点。如果您需要修改其中一种方法对特定实体的工作方式，您只需覆盖它，修复它，并确保它包含在单元测试中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:52:22.880

这比其他任何东西都更具个人品味。就我个人而言，我不喜欢存储库这个术语，因为它太笼统了，并且存储库的含义/目的已经丢失。我发现存储库通常是通用且重复的，就好像每个实体都需要它自己的存储库一样。然后 repo 获得了太多的一次性查询方法。很快你就会得到一个用于数据访问的神级。这是我的经验。

使用通用存储库，您可以使用继承对特定实体进行子类化以进行开关查询。我更喜欢组合而不是继承，所以我避免使用 repos 的另一个原因。

相反，我喜欢将数据访问视为查询（读取）和命令（写入）对象。其中每个对象都有 1 种方法来检索数据的特定投影（查询）或修改持久数据（命令）。

最后，只要您和您的团队了解架构并且代码是可维护的，您就有一个可靠的解决方案。这不是真的好或坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:57:55.103

关于使用泛型装饰器有几种观点。基本上有两个阵营。第一个阵营发现通用存储库是一个有漏洞的抽象，这意味着您通常并没有真正用它来抽象数据源。因此，根本不应该使用它。例如阅读[这个答案](https://stackoverflow.com/a/9329039/264697)。

我在第二个营地。我知道这是一个泄漏的抽象，但是一个通用的存储库（尤其是有`IQuerable`支持的）只会导致过于表达和可测试的代码，而被忽略。我写[了一篇关于通用存储库的文章](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=84 ".NET Junkie - 伪造您的 LINQ 提供程序第 1 部分")。这是处理链接点添加的另一种方法。它为您提供了一种不同的通用存储库方法，重点是可维护性和可测试性。您可能会发现它很有用。

# c++ - SHBrowseForFolder：非活动控件

> ID：11100208
> 
> 赞同：0
> 
> 时间：2012-06-19T11:43:42.437
> 
> 标签：c++, visual-studio-2010, winapi

我有带按钮的对话框窗口（IDC_browse）。SHBrowseForFolder 显示允许用户选择 Shell 文件夹的对话框。但我不能使用滚动和按钮确定和取消。连点击都不行！请告诉我有什么问题。宣言：

```
BROWSEINFO   bi;
LPITEMIDLIST  pidl; 
```

在 CALLBACK 函数中

```
case IDC_browse:   
 ZeroMemory(&bi, sizeof(bi));  
 bi.hwndOwner = hWnd; 
 bi.pszDisplayName = szDisplayName; 
 bi.lpszTitle = TEXT("Text"); 
 bi.ulFlags = BIF_RETURNONLYFSDIRS;  
 pidl = SHBrowseForFolder(&bi); 
 break; 
```

PS MS Visual Studio 2010，win32 api 项目。在 Windows 7 (x64) 上开发

# html - Quicktime 对象不会改变宽度或高度

> ID：11100210
> 
> 赞同：0
> 
> 时间：2012-06-19T11:43:48.993
> 
> 标签：html, object, quicktime

我正在编辑使用音频 QuickTime 对象并将其嵌入页面的现有设置。每当我调整对象的宽度或高度时，实际控件和背景图像都不会改变，它们只是保持相同的大小并以新定义的高度和宽度居中。

这是我的代码：

```
<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="256" width="472">

    <param name="src" value="PATH-TO-AUDIO-M4A">
    <param name="autoplay" value="false">
    <param value="false">
    <embed bgcolor='##000000' src="PATH-TO-AUDIO-M4A" height="100%" width="472" autoplay="false" pluginspage="http://www.apple.com/quicktime/download/">

</object> 
```

我希望对象的宽度为 472px，但它只是在其中居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:40:38.017

尝试使用`scale="tofit"`属性 -

```
<object
classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"
codebase="http://www.apple.com/qtactivex/qtplugin.cab"
height="136"
width="472" >
<param name="src" value="sample.mov"/>
<param name="scale" value="tofit" />
<param name="controller" value="true" /> 
<param name="autoplay" value="false" />
<embed type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"
height="136" width="472" src="sample.mov" scale="tofit" controller="true" autoplay="false" />
</object> 
```

scale 是一个可选值，它将根据指定的高度和宽度乘以给定的值来缩放媒体显示。默认值为 1（即 1x）。如果您使用 2，则显示将是指定高度和宽度的两倍（即 2x）。您还可以使用值“tofit”和“aspect”。"tofit" 将拉伸或压缩（更改）影片以适应指定的高度和宽度。“aspect”将在不改变其纵横比的情况下尽可能接近指定的高度和宽度。

# java - 增强休眠 IdentityGenerator 并且不中断模式导出

> ID：11100211
> 
> 赞同：3
> 
> 时间：2012-06-19T11:44:05.663
> 
> 标签：java, spring, hibernate, testing, hsqldb

我正在尝试将自定义 IdentityGenerator 应用于我的实体， - 正如此线程中所建议的那样：

[在 Hibernate 中绕过 GeneratedValue（合并不在数据库中的数据？）](https://stackoverflow.com/questions/3194721/bypass-generatedvalue-in-hibernate-merge-data-not-in-db)

现在，它**确实**起作用了——好吧，生成器的行为被考虑在内。

尝试执行我的集成测试时，我收到以下错误堆栈跟踪：

```
org.hibernate.exception.SQLGrammarException: DEFAULT keyword cannot be used as column has no DEFAULT
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:146)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy52.prepareStatement(Unknown Source)
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$2.doPrepare(StatementPreparerImpl.java:105)
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:166)
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:103)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.prepare(IdentityGenerator.java:89)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:52)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2757)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3268)
    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:78)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:272)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:304)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:195)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:128)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:642)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:635)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:631)
    at dk.dsa.core.datamodel.entities.IdentityGenerationTest.absent_identifier_gets_generated_by_hibernate(IdentityGenerationTest.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.sql.SQLSyntaxErrorException: DEFAULT keyword cannot be used as column has no DEFAULT
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.<init>(Unknown Source)
    at org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138)
    ... 51 more
Caused by: org.hsqldb.HsqlException: DEFAULT keyword cannot be used as column has no DEFAULT
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.ParserDML.compileInsertStatement(Unknown Source)
    at org.hsqldb.ParserCommand.compilePart(Unknown Source)
    at org.hsqldb.ParserCommand.compileStatement(Unknown Source)
    at org.hsqldb.Session.compileStatement(Unknown Source)
    at org.hsqldb.StatementManager.compile(Unknown Source)
    at org.hsqldb.Session.execute(Unknown Source)
    ... 58 more 
```

我能够追查到这与模式是在没有标识列的情况下生成的事实有关。

查看由 Hibernate 的 SchemaExport'er 生成的“create”语句，确认这是问题所在：

```
create table TranslationNamespace (
   id bigint not null, 
   description varchar(255), 
   name varchar(255) not null, 
   primary key (id), 
   unique (name)
) 
```

如果您从我的实体中删除自定义的 IdentityGenerator，则会生成以下“创建”语句：

```
create table TranslationNamespace (
   id bigint generated by default as identity (start with 1), 
   description varchar(255), 
   name varchar(255) not null, 
   primary key (id), 
   unique (name)
) 
```

我知道问题的原因出在哪里，它与`org.hibernate.mapping.SimpleValue`确定列是否为标识字段的方式有关，更具体地说是这段代码（第 226-227 行）：

```
return identifierGeneratorFactory.getIdentifierGeneratorClass( identifierGeneratorStrategy )
            .equals( IdentityGenerator.class ); 
```

由于我的自定义 IdentityGenerator 基于扩展 IdentityGenerator 类，因此类型**不**等于`IdentityGenerator.class`. 我似乎找不到解决此问题的方法。

非常感谢任何输入，作为如何修改此问题。

附加信息：

**技术（及其各自的版本）**

*   休眠（v. 4.0.1.Final）
*   HSQLDB (v. 2.2.8)
*   春季测试（v. 3.1.0.RELEASE）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-28T21:50:44.920

这个问题似乎在 Hibernate 5 中得到解决。代码如下所示。

```
IdentityGenerator.class.isAssignableFrom(identifierGeneratorFactory.getIdentifierGeneratorClass( identifierGeneratorStrategy )); 
```

# python - Python oauth2 - 获取访问令牌

> ID：11100216
> 
> 赞同：1
> 
> 时间：2012-06-19T11:44:29.160
> 
> 标签：python, django, api, oauth, vimeo

我想将经过身份验证的 vimeo 用户的视频集成到我的 Web 应用程序中。我有这个代码[https://gist.github.com/2944212](https://gist.github.com/2944212)

我打了授权电话，现在我得到了**oauth_token, oauth_token_secret, oauth_verifier**。我将所有这些内容添加到参数中并向以下 url 发出请求，但现在我收到此错误

```
>>> url = 'http://vimeo.com/oauth/access_token'
>>> req = oauth.Request(method='GET', url=url, parameters=params)
>>> req.sign_request(signature_method, consumer, token)
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/usr/lib/python2.7/dist-packages/oauth2/__init__.py", line 502, in sign_request
self['oauth_signature'] = signature_method.sign(self, consumer, token)
File "/usr/lib/python2.7/dist-packages/oauth2/__init__.py", line 838, in sign
key, raw = self.signing_base(request, consumer, token)
File "/usr/lib/python2.7/dist-packages/oauth2/__init__.py", line 832, in signing_base
key += escape(token.secret)
AttributeError: 'str' object has no attribute 'secret' 
```

使用它如何获取**access_token**并使此方法起作用[https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.getUploaded](https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.getUploaded)

我是 oauth 的新手，我需要你的帮助。

谢谢！

**更新**

现在我解决了这个错误。我唯一需要的是获取访问令牌和脚本来请求此方法[https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.getUploaded](https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.getUploaded)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:16:15.453

如果我理解正确，您现在拥有访问令牌？

要向 API 端点发出请求，请遵循相同的过程，但使用访问令牌（作为 oauth_token 参数）和 req.sign 方法。当然，也将您的请求指向 API URL :)

一旦您拥有访问令牌，您就不需要 oauth_verifier。

# c++ - 八度 C++ 和 VS2010

> ID：11100220
> 
> 赞同：9
> 
> 时间：2012-06-19T11:44:43.080
> 
> 标签：c++, matlab, visual-c++, octave

我正在尝试将 Octave 与 Visual C++ 一起使用。

我已经下载了[`octave-3.6.1-vs2010-setup-1.exe`](http://sourceforge.net/projects/octave/files/Octave%20Windows%20binaries/Octave%203.6.1%20for%20Windows%20Microsoft%20Visual%20Studio/)。创建了一个新项目，添加了 octave`include`文件夹以包含路径`octinterp.lib`和`octave.lib`lib 路径，并将 Octave`bin`文件夹添加为运行目录。

该程序编译并运行良好，除了`feval`导致异常的函数：

> Microsoft C++ 异常：内存位置 0x0012faef 处的 octave_execution_exception

在八度方面：

> 无效的调整大小操作或对越界数组元素的不明确分配。

我究竟做错了什么？

* * *

[独立程序](https://www.gnu.org/software/octave/doc/interpreter/Standalone-Programs.html#Standalone-Programs)的代码：

```
#include <octave/octave.h>
#include <octave/oct.h>
#include <octave/parse.h>

int main(int argc, char **argv)
{
    if (octave_main (argc, argv, true))
    {
        ColumnVector NumRands(2);
        NumRands(0) = 10;
        NumRands(1) = 1;
        octave_value_list f_arg, f_ret;
        f_arg(0) = octave_value(NumRands);
        f_ret = feval("rand",f_arg,1);
        Matrix unis(f_ret(0).matrix_value());
    }
    else
    {
        error ("Octave interpreter initialization failed");
    }
    return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T05:57:48.547

我自己试过了，问题似乎出`feval`在线路上。

现在我没有解释为什么，但是通过简单地切换到`"Release"`配置而不是配置来解决问题`"Debug"`。

我正在使用`Octave3.6.1_vs2010`构建，在 WinXP 上使用 VS2010。

这是我测试的代码：

```
#include <iostream>
#include <octave/oct.h>
#include <octave/octave.h>
#include <octave/parse.h>

int main(int argc, char **argv)
{
    // Init Octave interpreter
    if (!octave_main(argc, argv, true)) {
        error("Octave interpreter initialization failed");
    }

    // x = rand(10,1)
    ColumnVector sz(2);
    sz(0) = 10; sz(1) = 1;
    octave_value_list in = octave_value(sz);
    octave_value_list out = feval("rand", in, 1);

    // print random numbers
    if (!error_state && out.length () > 0) {
        Matrix x( out(0).matrix_value() );
        std::cout << "x = \n" << x << std::endl;
    }

    return 0;
} 
```

输出：

```
x =
 0.165897
 0.0239711
 0.957456
 0.830028
 0.859441
 0.513797
 0.870601
 0.0643697
 0.0605021
 0.153486 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:25:39.910

我猜它实际上停止指向下一行，而错误实际上在于这一行：

```
f_arg(0) = octave_value(NumRands); 
```

您似乎试图从向量中获取一个值（哪个值？），然后将其分配给尚未定义为向量的向量的元素 0。

不过我真的不知道......我从来没有尝试过编写这样的八度音程代码。我只是想通过将代码翻译成标准的 matlab/octave 代码来解决这个问题，那行对我来说似乎真的很奇怪......

# jquery-mobile - jquery mobile中的依赖下拉菜单不起作用

> ID：11100221
> 
> 赞同：1
> 
> 时间：2012-06-19T11:44:43.817
> 
> 标签：jquery-mobile, drop-down-menu

我正在 jquery mobile 中创建州和城市的相关下拉列表。这对我不起作用。我也无法隐藏第二个下拉菜单。我正在使用的代码是：

的HTML：

```
 <select name="selectmenu5" id="selectmenu5">
     <option value="0">Select State</option>   
     <option value="1">Andaman and Nicobar</option>  
     <option value="2">Andhra Pradesh</option>  
</select>

        <select name="selectmenu4" id="selectmenu4">
          <option class="city" id="1">Select City</option>
          <option class="city" id="2">option 2</option>
          <option class="city" id="3">Option 3</option>
    </select> 
```

和js：

```
 $(document).ready(function() {
        $("#selectmenu4").hide();
    $("#selectmenu5").live("change",function() {
       $("#selectmenu4").show();
        switch($("#this").val()){ 
            case "1":
                $(".city").hide().parent().find("#1").show();
                break;
            case "2":
                $(".city").hide().parent().find("#2").show();
                break;

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:20:02.333

这是你想要的吗？jsFiddle：http: [//jsfiddle.net/WXbbj/40/](http://jsfiddle.net/WXbbj/40/)

创建所有选择：

```
<select name="selectmenu5" id="selectmenu5">
 <option value="0">Select State</option>   
 <option value="1">Andaman and Nicobar</option>  
 <option value="2">Andhra Pradesh</option> 
```

```
 <select class='cityList' name="selectmenu1" id="selectmenu1">
      <option class="city" id="0">Select City</option>
      <option class="city" id="1">city1</option>
      <option class="city" id="2">city2</option>
</select>

 <select class='cityList' id="selectmenu2">
      <option class="city" id="0">Select City</option>
      <option class="city" id="1">city3</option>
      <option class="city" id="2">city4</option>
</select> 
```

基本上我使用 css 来隐藏“选择菜单”：

```
#selectmenu1,#selectmenu2{
display:none;
} 
```

这是只显示正确选项的 jquery 函数：

```
 $(document).ready(function() {         
  $("#selectmenu5").on("change",function() {        
  $(".cityList").hide();         

  $("#selectmenu"+$(this).val()).show();
 }); }); 
```

# jquery - 向 jXHR.js 添加超时函数

> ID：11100222
> 
> 赞同：0
> 
> 时间：2012-06-19T11:44:44.887
> 
> 标签：jquery, jsonp

如何向 jXHR.js 添加超时功能，可从以下网址获得：http: [//mulletxhr.com/](http://mulletxhr.com/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:47:37.743

它有`SETTIMEOUT`，在这里查看它的源代码：

[http://mulletxhr.com/jXHR.js](http://mulletxhr.com/jXHR.js)

我们在`send`功能中使用了它。在那里搜索`send:`。

**更新：**

在`jXHR.js`文件中修改这个函数：

```
 send:function(){
            SETTIMEOUT(function(){
                scriptElem = doc.createElement("script");
                scriptElem.setAttribute("type","text/javascript");
                scriptElem.onload = scriptElem.onreadystatechange = function(){handleScriptLoad.call(scriptElem);};
                scriptElem.setAttribute("src",script_url);
                doc.getElementsByTagName("head")[0].appendChild(scriptElem);
            },60000);
            fireReadyStateChange(2);
        }, 
```

参见我`60000`在上面的代码中添加了 60 秒，您可以根据需要进行修改。

# java - eclipse显示中点击事件的坐标

> ID：11100224
> 
> 赞同：1
> 
> 时间：2012-06-19T11:44:54.173
> 
> 标签：java, eclipse-plugin, swt, eclipse-gef

我正在使用 Gef 开发一个 Eclipse 插件。我正在创建一个视图部分，女巫拿着我的图表和我正在绘制的所有内容的画布。通过几个数字上的鼠标事件，我可以获得点击位置。这些职位与我的观点有关。无论如何要获得与整个日食窗口相关的位置/坐标？

谢谢，基里亚科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:46:43.173

以下文章中的示例（如何在图形顶部放置外壳）可能会有所帮助。展示了一个 map() 方法，它将图形的相对坐标转换为持有控件的相对坐标，例如主外壳

[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.draw2d.doc.isv/guide/coordinates.html](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.draw2d.doc.isv/guide/coordinates.html)

# salesforce - 来自多态域的非法多态分配 [SOBJECT:User, SOBJECT:Calendar]

> ID：11100225
> 
> 赞同：0
> 
> 时间：2012-06-19T11:44:55.857
> 
> 标签：salesforce, apex-code

我正在编写任务的触发器并在销售人员中收到错误来自多态域的非法多态分配 [SOBJECT:User,SOBJECT:Calendar]

```
trigger Status_Change on Task (after update) {

    List<Task>updated_tasks=trigger.new;
    List<Task> tt=trigger.old;
    Task_History__c history=new Task_History__c();
    Integer i=0;
    for(i=0;i<updated_tasks.size();i++)
    {
    history.Name=tt.get(i).Subject;
    history=new Task_History__c();
    history.OldValue__c=tt.get(i).Status;
    history.NewValue__c=updated_tasks.get(i).Status;
    history.User__c=updated_tasks.get(i).Owner;
    insert history;

    }
} 
```

错误在线 history.User__c=updated_tasks.get(i).Owner;

当我写 history.User__c=updated_tasks.get(i).owner.id 时没有错误，但是当我尝试从此 id 获取用户的电子邮件地址时，它显示没有与此 id 对应的用户。如何从任务 SObject 的所有者字段中获取所有者的用户 ID。我认为错误是由于 Owner 是对 [SObject.User,SObject.Calender] 的查找。所以所有者的 id 应该与 User'id 不同。但是如何从 Task 对象的 Owner 字段中仅获取用户的 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:55:43.073

你是如此接近。语法是：

```
history.User__c=updated_tasks.get(i).OwnerId; 
```

你是对的。task.Owner 字段是一个 SObject，task.Owner.Id 是有效的，但是被引用的值没有填充到触发器上下文中。

您的触发器写得不是很好，它在循环中有一个 dml 语句，并且似乎没有从任务历史到任务的查找，我在下面的更新示例中引用了一个。

```
trigger Status_Change on Task (after update) {
    List<Task_History__c> histories = new List<Task_History__c>();
    Task oldValue;
    for(Task task : Trigger.new) {
        oldValue = Trigger.oldMap.get(task.Id);
        histories.add(new Task_History__c(
            Name=task.Subject,
            OldValue__c=oldValue.Status,
            NewValue__c=task.Status,
            User__c=task.OwnerId,
            //This should be created as well
            Task__c=task.Id
        ));
    }
    if(histories.size() > 0) {
        insert histories;
    }
} 
```

# iphone - 奇怪的内存泄漏

> ID：11100226
> 
> 赞同：0
> 
> 时间：2012-06-19T11:45:04.123
> 
> 标签：iphone, ios, memory-management, memory-leaks

我一直在使用使用 sqlite 数据库的 iPhone 应用程序。我已经检查了 iPad、iPhone 4 中的内存泄漏，并且没有内存泄漏。但相同的代码显示 iPhone-3GS 中的内存泄漏。请看下面的屏幕截图，我认为没有比仪器显示泄漏后的泄漏。请给我建议。

提前致谢。

![在此处输入图像描述](../Images/4f3007a70520a33aa09638b2e773d79a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:49:49.163

它实际上并不奇怪，看看你如何为两者分配`Query`内存`Query1`via `[[NSArray alloc] init`。但是，您通过调用覆盖它们的指针`[database executeQuery:]`，因此分配的内存被泄漏。

看起来您实际上并不需要数组分配，因此您可以简单地删除该行。但是，`[Query release]`and`[Query1 release]`不会使应用程序崩溃（或至少在以后的某个时间点），表明`[database executeQuery:]`返回保留的内存并因此将其所有权委托给调用者，内存指南不鼓励这样做。你应该返回一个自动释放的对象 `executeQuery:` ，因为你从不使用返回的值，你可以简单地将方法简化为：

```
[self databaseOpen];
[database executeQuery:@"Delete from ActivityList"];
[database executeQuery:@"Select* from ActivityList"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T11:50:41.243

问题是这样的：

```
NSArray *Query = [[NSArray alloc] init];
// later:
Query = [database executeQuery:str]; 
```

因此，您分配了一个 NSArray，然后重用它的指针，因此您失去了对第一个分配对象的引用。你不需要做

```
NSArray *Query = [[NSArray alloc] init]; 
```

因为该`executeQuery:`方法返回一个初始化的数组。

Query1 也是如此（您也错误地分配了它）。

（顺便说一句，你在使用我的 SQLHelper 库吗？如果是这样，你*不能*释放查询返回的数组；它是自动释放的，并且会在过度释放时崩溃）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:52:41.703

那是因为您正在分配`NSArray`但从不使用它们`Query`，`Query1`您立即将指针更改为其他东西，即您的`[xxxx executeQuery:xxx]`. 将它们更改为这些，应该没问题。

```
NSArray* Query = [database executeQuery:str];
NSArray* Query1 = [database executeQuery:str1]; 
```

# asp.net - 带有 ValidationGroup 的RequiredFieldValidator 不验证

> ID：11100230
> 
> 赞同：7
> 
> 时间：2012-06-19T11:45:25.420
> 
> 标签：asp.net, requiredfieldvalidator, validationgroup

这是我的标记：

```
Name: 
<asp:TextBox ID="txtNewName" runat="server" ValidationGroup="NewDepartmentValidationGroup" />
<asp:RequiredFieldValidator ID="vldtxtNewName" runat="server" ControlToValidate="txtNewName"
    ErrorMessage="Required Field" /><br />
Description: 
<asp:TextBox ID="txtNewDescription" runat="server"          
    ValidationGroup="NewDepartmentValidationGroup"/>
<asp:RequiredFieldValidator ID="vldtxtNewDescription" runat="server" 
    ControlToValidate="txtNewDescription" ErrorMessage="Required Field" /><br />
<asp:Button ID="cmdCreate" runat="server" Text="Create"
     ValidationGroup="NewDepartmentValidationGroup" OnClick="cmdCreate_Click" /> 
```

当我删除 ValidationGroup 属性时，行为符合预期，客户端代码警告该字段是必需的。

但是，当我指定 ValidationGroup（如上面的示例中所述）并单击文本框为空的按钮时，客户端代码什么也不做，按钮单击事件触发并且 Page.IsValid 等于 true 并且我的代码继续执行，与预期什么。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T11:52:40.867

您缺少验证器上的验证组。

无需在控件（文本框）上指定验证组，而是在验证器上指定验证组以及您希望在其上发布有效数据的按钮！

试试这个：

```
 Name: 
<asp:TextBox ID="txtNewName" runat="server" />
<asp:RequiredFieldValidator ID="vldtxtNewName" runat="server"
     ControlToValidate="txtNewName" ValidationGroup="NewDepartmentValidationGroup" 
     ErrorMessage="Required Field" /><br />
Description: 
<asp:TextBox ID="txtNewDescription" runat="server" />
<asp:RequiredFieldValidator ID="vldtxtNewDescription" runat="server" 
    ControlToValidate="txtNewDescription" ErrorMessage="Required Field"
    ValidationGroup="NewDepartmentValidationGroup" /><br />
<asp:Button ID="cmdCreate" runat="server" Text="Create"
     ValidationGroup="NewDepartmentValidationGroup" OnClick="cmdCreate_Click" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T11:56:11.427

在不在文本框中的验证器中尝试 ValidationGroup="NewDepartmentValidationGroup"

```
<asp:TextBox ID="txtNewName" runat="server"  />
        <asp:RequiredFieldValidator ID="vldtxtNewName" runat="server" ControlToValidate="txtNewName"  ValidationGroup="NewDepartmentValidationGroup"
            ErrorMessage="Required Field" /><br />
Description: 
<asp:TextBox ID="txtNewDescription" runat="server"          
    />

<asp:RequiredFieldValidator ID="vldtxtNewDescription" runat="server" 
    ControlToValidate="txtNewDescription" ErrorMessage="Required Field" ValidationGroup="NewDepartmentValidationGroup"/><br />

<asp:Button ID="cmdCreate" runat="server" Text="Create"
      ValidationGroup="NewDepartmentValidationGroup" OnClick="cmdCreate_Click" causesvalidation="true" /> 
```

# eclipse - 在类文档中嵌入 MediaWiki 页面

> ID：11100232
> 
> 赞同：1
> 
> 时间：2012-06-19T11:45:26.807
> 
> 标签：eclipse, documentation, javadoc, mediawiki

我想知道是否有可能在 Eclipse 的 javadoc 视图中嵌入 mediawiki 页面？

我们维护一个 wiki，其中包含与我们的模块、某些功能、遇到的特定问题和其他内容相关的信息。我想让这个文档更接近我们的代码库。将所有内容从 wiki 迁移到 javadoc 是不可能的，因为 wiki 也可供不访问代码的人访问，而且 javadoc 中也缺乏对图像的支持。

我想到了显示类似于类的维基页面，我目前正在查看的 javadoc 或使用特殊的 javadoc 标签。

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:19:49.250

您可以使用 html 代码将您的 JavaDoc 中的链接添加到您的 wiki。您可以使用不带`@see`标签的链接，因此它不会列在文档底部。

```
/**
 * @see <a href="http://google.com">http://google.com</a> 
 */ 
```

您可以在 Eclipse 中的 JavaDoc-View 中打开链接，因此它不会在源视图中打开。

# mysql - mysql create trigger on insert do update using where condition is not working

> ID：11100239
> 
> 赞同：0
> 
> 时间：2012-06-19T11:45:58.460
> 
> 标签：mysql, database, triggers

我在插入触发器上有一个表 orderlines 正在工作，但是在 ordernumber 表中我想根据序列号更新 ordernumber

所以对于更新我写了两行

第 1 行：`UPDATE TEMPSTORAGE SET`ORDERNUMBER `=orderno+1,`SERIALNUMBER`=serialno;` 在没有 where 条件的情况下工作正常

第 2 行：`UPDATE ORDERNUMBER SET`ORDERNUMBER `=orderno+1 WHERE`SERIALNUMBER`= serialno;` 不起作用，任何机构都可以建议我....如何根据序列号更新订单号

```
DELIMITER $$

USE `temp`$$

DROP TRIGGER /*!50032 IF EXISTS */ `trg_updateordernumber`$$
CREATE TRIGGER `trg_updateordernumber` AFTER INSERT ON `ORDERLINES` 
    FOR EACH ROW BEGIN

        DECLARE orderno VARCHAR(255);
        DECLARE serialno VARCHAR(255);
        SET @orderno = 'xxx';

        SELECT ORDERNUMBER, SERIALNUMBER INTO orderno, serialno 
        FROM ORDERLINES 
        WHERE ID=NEW.ID;

        UPDATE TEMPSTORAGE SET 
            `ORDERNUMBER` =orderno+1, 
            `SERIALNUMBER` =serialno;

        UPDATE ORDERNUMBER SET 
            `ORDERNUMBER`=orderno+1 
        WHERE `SERIALNUMBER` = serialno;
    END;
$$

DELIMITER ; 
```

mysql触发器有什么问题（希望没有）......？如果不是，那么请建议我为什么 line2 不工作？

谢谢并恭祝安康;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:30:21.940

您需要`BEFORE INSERT`触发器，但不需要`AFTER INSERT`。

我不确定`ORDERLINES`和`ORDERNUMBER`表之间的关系，
但建议尝试以下（未测试）：

```
DELIMITER $$

USE `temp`$$

DROP TRIGGER /*!50032 IF EXISTS */ `trg_updateordernumber`$$
CREATE TRIGGER `trg_updateordernumber` BEFORE INSERT ON `ORDERLINES` 
    FOR EACH ROW BEGIN
        UPDATE TEMPSTORAGE SET 
            `ORDERNUMBER` =NEW.ORDERNUMBER+1, 
            `SERIALNUMBER` =NEW.SERIALNUMBER;

        UPDATE ORDERNUMBER SET 
            `ORDERNUMBER`==NEW.ORDERNUMBER+1 
        WHERE `SERIALNUMBER` = NEW.SERIALNUMBER;
    END;
$$

DELIMITER ; 
```

# ios5 - 在 iPad 上调试网络连接。有什么工具或技术吗？

> ID：11100241
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:46:17.737
> 
> 标签：ios5, https, dns, network-tools

我正在尝试让我的 iPad（第 3 代）通过连接访问我的工作站上的网站`https`（尽管我可能应该提到我也无法通过 HTTP 连接到它）。目的是进行带有证书的双向身份验证的工作演示。

我已经在 iPad 上安装了客户端证书，并在我们的网络上安装了许多 Windows 和 OSX 机器。但 iPad 似乎无法从本地 DNS 服务器获取 IP，或者根本无法访问 DNS 服务器。由于似乎没有`Hosts`文件或任何调试 iPad 网络端的方式，我有点卡住了。

有没有人有任何提示/技巧/工具可以让我的生活半途而废？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:52:26.040

不幸的是，像你提到的东西不是内置在 iOS 中的。我会在 App Store 中查看并获得一个应用程序来执行 ping 和 DNS 查找。也许[NetTools](http://itunes.apple.com/nl/app/nettools/id297964828?mt=8)可以为您工作？

# python - pdfminer 的单词坐标

> ID：11100244
> 
> 赞同：0
> 
> 时间：2012-06-19T11:46:39.547
> 
> 标签：python, pdf

我正在尝试在 python 中编写一个 pdf 布局分析器。使用 Pandas 进行工作，我已经能够产生一些相当不错的结果。但是，到目前为止，我一直在使用 JPedal 生成的数据，但是生成的坐标似乎包含一些相当大的不准确之处，这会影响最终结果。目前，我正在使用 Pandas DF 中表示的数据，如下所示：

```
 font  page           style words   x1   x2   y1   y2
0  Times-Roman     1  font-size:22pt     K  206  214  120  144
1  Times-Roman     1  font-size:22pt     O  226  234  120  144
2  Times-Roman     1  font-size:22pt     H  245  253  120  144 
```

现在我正在考虑尝试使用 pdfminer 来生成包含相同基本属性的数据。据我了解，我应该使用 pdfminer 布局对象来获取这些数据。不幸的是，文档有点模糊。指向解决方案的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T12:16:51.460

我一直在一个项目中使用 PDFMiner，只需使用它的命令行工具来生成 XML，并使用那里的坐标。

这将获取单个字符的坐标 - 我正在从那里进行自己的布局分析，因为我没有发现内置分析在我的文档上运行得足够好。

# php - Wordpress：print_thumbnail 输出不正确的 URL。文件权限没有影响

> ID：11100248
> 
> 赞同：1
> 
> 时间：2012-06-19T11:46:47.087
> 
> 标签：php, wordpress, permissions, thumbnails

我的一个网站 - [http://www.sweetrubycakes.com.au](http://www.sweetrubycakes.com.au) - 最近的缩略图停止工作（他们一直工作到昨天，昨天域名注册商有一些问题，但我所知道的没有其他可能导致它）。

如果您查看源代码，您会发现它们在 URL 中包含太多内容：

```
<img src="/home2/sweetrub/public_html/wp-content/uploads/et_temp/t-rex-tiny-63339_203x203.jpg" class="item-image" alt="T- Rexcellent"> 
```

它应该在哪里：

```
<img src="/wp-content/uploads/et_temp/t-rex-tiny-63339_203x203.jpg" class="item-image" alt="T- Rexcellent"> 
```

我不认为我使用的是最新版本的主题，但是我做了一些调整并且不想更新。

输出该图像的代码是这样的：

```
<?php
   $work_count = 0;
   $recent_work_args = apply_filters( 'evolution_recent_work_args', array(
      'showposts' => (int) get_option('evolution_posts_work_num'),
      'category__not_in' => (array) get_option('evolution_exlcats_work')
   ) );
   $recent_work_query = new WP_Query( $recent_work_args );
   while ( $recent_work_query->have_posts() ) : $recent_work_query->the_post();
      ++$work_count;
      $width = apply_filters( 'evolution_home_work_width', 203 );
      $height = apply_filters( 'evolution_home_work_height', 203 );
      $titletext = get_the_title();
      $thumbnail = get_thumbnail($width,$height,'item-image',$titletext,$titletext,true,'Work');
      $thumb = $thumbnail["thumb"];
      $lightbox_title = ( $work_title = get_post_meta($post->ID, 'work_title',true) ) ? $work_title : $titletext;
      $work_description = ( $work_desc = get_post_meta($post->ID, 'work_description',true) ) ? $work_desc : truncate_post( 50, false );
?>
      <div class="r-work<?php if ( 0 == $work_count % 3 ) echo ' last'; ?>">
         <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, 'item-image'); ?>
         <span class="overlay"></span>
         <!--<a href="<?php the_permalink(); ?>" class="more"></a>-->
         <a href="<?php echo esc_url($thumbnail['fullpath']); ?>" class="zoom fancybox" title="<?php echo esc_attr( $lightbox_title ); ?>" rel="work_gallery" style="right: 77px !important;"></a>
         <p><?php echo esc_html( $work_description ); ?></p>
      </div> <!-- end .r-work -->
<?php endwhile; wp_reset_postdata(); ?> 
```

print_thumbnail 函数如下所示：

```
if ( ! function_exists( 'print_thumbnail' ) ){
function print_thumbnail($thumbnail = '', $use_timthumb = true, $alttext = '', $width = 100, $height = 100, $class = '', $echoout = true, $forstyle = false, $resize = true, $post='') {
    global $shortname;
    if ( $post == '' ) global $post;

    $output = '';
    $thumbnail_orig = $thumbnail;

    $thumbnail = et_multisite_thumbnail( $thumbnail );

    $cropPosition = '';

    $allow_new_thumb_method = false;

    $new_method = true;
    $new_method_thumb = '';
    $external_source = false;

    $allow_new_thumb_method = !$external_source && $new_method && $cropPosition == '';

    if ( $allow_new_thumb_method && $thumbnail <> '' ){
        $et_crop = get_post_meta( $post->ID, 'et_nocrop', true ) == '' ? true : false; 
        $new_method_thumb =  et_resize_image( et_path_reltoabs($thumbnail), $width, $height, $et_crop );
        if ( is_wp_error( $new_method_thumb ) ) $new_method_thumb = '';
    }

    if ($forstyle === false) {
        $output = '<img src="' . esc_url( $new_method_thumb ) . '"';

        if ($class <> '') $output .= " class='" . esc_attr( $class ) . "' ";

        $output .= " alt='" . esc_attr( strip_tags( $alttext ) ) . "' />";

        if (!$resize) $output = $thumbnail;
    } else {
        $output = $new_method_thumb;
    }

    if ($echoout) echo $output;
    else return $output;
} 
```

}

我已经看到其他一些帖子表明它是一个文件权限文件夹（[wp print_thumbnail 函数不起作用](https://stackoverflow.com/questions/8851075/wp-print-thumbnail-function-is-not-working)），但这似乎对我不起作用。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:58:23.423

I think `print_thumbnail` is the problem in your code. Instead of `print_thumbnail` try below options.

```
<?php
if ( has_post_thumbnail() ) {
    the_post_thumbnail(); // Outputs <img/> object with src="thumbnail-href"
}
?> 
```

Similarly, this would also work:

```
<?php
if ( has_post_thumbnail() ) {
    echo( get_the_post_thumbnail( get_the_ID() ) );
}
?> 
```

[Check this stackoverflow answer](https://stackoverflow.com/questions/9408851/wordpress-print-thumbnail-not-giving-correct-url#9409061)

# java - javamelody tomcat 虚拟主机

> ID：11100251
> 
> 赞同：2
> 
> 时间：2012-06-19T11:47:03.800
> 
> 标签：java, tomcat, virtualhost, java-melody

我正在运行 tomcat 7，并且在测试服务器上配置了 2 个虚拟主机。称它们为“hostA”和“hostB”。

工作得很好，但我现在想使用 javamelody 来监控这两个应用程序。仅在 1 个应用程序上使用 javamelody 可以按预期工作。但是同时将 javamelody 部署到两个应用程序时会出现问题。

查看 tomcat/temp/javamelody/ 我看到为每个上下文创建了不同的目录。不幸的是，javamelody 将 hostA 和 hostB 视为相同的上下文（ROOT）。

简而言之，javamelody 无法区分 hostA 和 hostB，因为两者都是 ROOT 上下文，即使配置为不同的虚拟主机 javamelody 也会忽略这一点。

我正在寻找一种监视应用程序的方法，但出于生产目的，我需要它们成为 ROOT 上下文，否则用户将看到 URL 不正确。

例如必须是

www.hostA.co.uk

www.hostB.co.uk

不是

www.hostA.co.uk/contextA/

www.hostB.co.uk/contextB/

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:49:05.790

我已经解决了这个问题，我在 javamelody 中找到了一个设置，可以让你设置一个自定义存储目录，现在两个上下文都是 root，但数据是分开的，所以没有冲突。

server.xml 的更改部分如下

```
<Host name="localhost"  appBase="webappsA/">
  <Context docBase="ROOT" path="" reloadable="false" >
    <Parameter name='javamelody.storage-directory' value='storeA'/>
  </Context>
</Host>

<Host name="127.0.0.1"  appBase="webappsB/"> 
  <Context docBase="ROOT" path="" reloadable="false" >
    <Parameter name='javamelody.storage-directory' value='storeB'/>
  </Context>
</Host> 
```

# android - MediaPlayer 从 /res/raw 播放下一首曲目

> ID：11100253
> 
> 赞同：0
> 
> 时间：2012-06-19T11:47:09.377
> 
> 标签：android, media-player

我正在制作一个摇篮曲应用程序。最初，我的 /res/raw 文件夹中有两首曲目。在完成第一首曲目时，我希望它播放下一首曲目。我使用 onCompletionListener 做到了这一点。但它显示强制关闭错误。下面是我的代码。那么谁能告诉我该怎么做？

```
public class PlayRandom extends Activity implements OnCompletionListener{
        MediaPlayer mp;
    int rnum;
    TextView tv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playrandom);
                mp.setOnCompletionListener(this);
        mp = MediaPlayer.create(this, R.raw.lullaby1);
        mp.start();     
    }
    @Override
    public void finish() {
        // TODO Auto-generated method stub
        super.finish();
        mp.stop();
    }
    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub
        File pdfFile = new File("res/raw/lullaby2.mp3");
        Uri path = Uri.fromFile(pdfFile);
        mp.stop();
        try{
            mp.setDataSource(getApplicationContext(), path);
        mp.prepare();
        mp.start();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
} 
```

* * *

我试过了，但仍然无法正常工作。这意味着 OnClickListener 有问题。

```
public class PlayRandom extends Activity implements OnCompletionListener{
    MediaPlayer mp;
int rnum;
TextView tv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playrandom);
            mp.setOnCompletionListener(this);
    mp = MediaPlayer.create(this, R.raw.lullaby1);
    mp.start();     
}
@Override
public void finish() {
    // TODO Auto-generated method stub
    super.finish();
    mp.stop();
}
public void onCompletion(MediaPlayer mp) {
    // TODO Auto-generated method stub
    Toast.makeText(this,"Yuppieee!!", Toast.LENGTH_SHORT);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:58:17.087

用于`AssetFileDescriptor` 从原始文件夹播放文件：

```
 AssetFileDescriptor afdes = getAssets().openRawResourceFd(R.raw.lullaby2);
    mp.reset();
    mp.setDataSource(afdes.getFileDescriptor(), afdes.getStartOffset(), afdes.getLength());
    mp.prepare();
    mp.start(); 
```

# html - 列表定位不合作

> ID：11100254
> 
> 赞同：0
> 
> 时间：2012-06-19T11:47:15.090
> 
> 标签：html, css, list, position

再一次，列表让我难以置信。

```
<div id="headbottom">
            <ul id="headnavbutton">
                <li id="button1" class="headnavbutton"></li>
                <li id="button2" class="headnavbutton"></li>
            </ul>   
 </div> 
```

CSS：

```
#headbottom{position:relative;width:960px;height:29px;margin:auto;bottom:10px;}
#headnavbutton{float:right;height:100%;width:250px;padding:0;}
.headnavbutton{float:right;border: 1px solid #ccc;padding-top:0px;list-style:none;}
#button1 {width:100px;height:100%;background:url(../images/headnavbutton.gif);}
#button2 {width:100px;height:100%;background:url(../images/headnavbutton.gif);} 
```

你可能会说，看起来很甜美和简单。但是由于某种我不知道的原因，该列表被从父 div 中推出。

这是一个 JSfiddle：它不准确，但它很好地代表了正在发生的事情。

[http://jsfiddle.net/WXbbj/5/](http://jsfiddle.net/WXbbj/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:52:22.560

现在在您的 div **headnavbutton**中定义边距，如下所示

```
#headnavbutton {
    margin: 0;
} 
```

# java - 应用服务器作业还是数据库作业？

> ID：11100257
> 
> 赞同：0
> 
> 时间：2012-06-19T11:47:25.030
> 
> 标签：java, oracle11g, weblogic, jobs

在我的基于 java 的应用程序中，我需要一项工作来从一组表中读取数据并将它们插入到另一个表中。在我的第一个设计中，我创建了一个 oracle 作业并安排它经常执行该过程。不幸的是，当作业失败时，没有足够的信息来说明失败的根本原因。此外。为许多系统实例部署系统使工作更加困难。作为一项替代工作，我试图将这项工作作为 Weblogic 工作转移到我的应用程序服务器中。这是一个好的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:49:00.787

将我的工作转移到应用程序服务器后，我面临以下优势：

1.  跟踪作业失败更容易。
2.  非 DBA 用户可以轻松阅读应用程序服务器日志并修复问题。（很多用户在生产线没有访问数据库的权限。）
3.  作业的逻辑已经从我的数据访问层移到了我的业务逻辑层，并且由于设计模式而更容易接受。

# oracle-adf - 如何通过单击按钮使用 oracle-adf 从任何文本框中获取任何值？

> ID：11100258
> 
> 赞同：1
> 
> 时间：2012-06-19T11:47:26.387
> 
> 标签：oracle-adf

如何通过按钮单击使用 oracle-adf 从文本框 adf 组件获取任何值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:42:01.227

@生活，

您的查询并不完全清楚，所以我假设 UI 启用了支持 bean。

在 UI 上，让我们有一个“文本框”和“命令按钮”来完成这项工作。

在 backing bean 中只需编写一个方法..，

```
public String cb1_action() 
{

    String a = (String)it1.getValue(); // To recieve value from UI InputText Component
    System.out.println(a);

    return null;
} 
```

"it1" 是 InputText 组件的 id，所以现在将此方法 {cb1_action()} 映射到 jDev IDE 的 Property Inspector 中的 Action Field。

希望你明白了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T09:42:13.267

在 ADF 的文本框组件中，您有一个名为`Value`. 通过使用，`EL`您可以在 bean 中设置值。

现在在按钮中，`actionListner`您只需调用之前在 bean 中设置的 id 的 get 方法即可获取值。

# c++ - 复制构造函数快捷方式

> ID：11100261
> 
> 赞同：3
> 
> 时间：2012-06-19T11:47:42.080
> 
> 标签：c++, copy-constructor

我有一个大约有 50 名成员的班级。其中1个是指针。所以，自然我必须创建自己的复制构造函数，复制所有内容并创建该对象的新实例。我的问题是：是否有一种快捷方式或某种特殊方法可以复制所有内容（就像默认的复制构造函数一样），然后只处理那个指针？而不是手动复制每个成员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T11:50:58.540

我会将您的指针包装到一个帮助类中，该类以您喜欢的方式进行复制。这样，您就可以使用默认的复制 ctor 离开大类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:31:41.020

既然您说默认副本不起作用，我将假设您的对象拥有指针。

如果您只需要一个正确清理的浅拷贝，请使用`shared_ptr`C++11 或 boost。

如果您需要深拷贝，我首先建议通过值而不是指针来存储包含的对象。然后您就可以免费获得副本，而且您不必担心额外的一组内存管理。

最后，如果这些都不是一个选项，我会编写一个处理深拷贝语义的指针包装器（我不相信 boost 提供这样的类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:52:24.773

改用智能指针，然后依赖类的默认复制构造函数。

标准智能指针 ( `unique_ptr`, `shared_ptr`) 没有可以复制其对象的复制构造函数，但您可以汇总自己的。

# php - Codeigniter 查看到 PDF

> ID：11100262
> 
> 赞同：1
> 
> 时间：2012-06-19T11:47:42.330
> 
> 标签：php, html, css, codeigniter, pdf

我使用过 DOMpdf、mpdf、tcpdf 并没有成功输出。

我把我尝试过的所有东西都放在这里，包括 HTML。

***输出预览：***

直接查看文件：http: [//jsfiddle.net/QdhdW/](http://jsfiddle.net/QdhdW/)

DOMpdf 和 mPDF 输出：[https ://www.box.com/s/f7cb2283d196db530702](https://www.box.com/s/f7cb2283d196db530702)

***问题***：

*DOM pdf :*

*   看起来很糟糕的 CSS（并不完全按照要求）
*   离开 6-7 页
*   pdf中的刹车记录不在页面然后没有进入下一页

*mPDF：*

*   使输出尽可能小，以便所有记录都覆盖在一页中。（不如 A4 页面好）
*   每行之间的边界。（在 HTML 中，行之间没有边框。）

> 我不介意使用任何 pdf 生成器库，即使我们更改 CSS 或使 CSS 内联，也没关系。问题是我正在寻找与视图文件中显示的相同的 PDF 输出。
> 
> 请帮助我，弄清楚。从昨天开始挣扎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:53:08.380

看看[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，它是一个使用 webkit 渲染引擎和 qt 将 html 转换为 pdf 的 shell 实用程序。

这将为您提供比其他结果更好的结果，因为它不会尝试解析 php.ini 中的 html/css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:53:05.390

最后我解决了。

感谢大家的尝试。

通过更改 CSS 仅在 DOM Pdf 中解决它。

*编辑：* 让它通过这个

[http://code.google.com/p/dompdf/issues/detail?id=507](http://code.google.com/p/dompdf/issues/detail?id=507)

如果其他人有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:54:51.407

PhantomJS 使用 webkit 渲染器，可以输出为 PDF。

[http://code.google.com/p/phantomjs/wiki/QuickStart](http://code.google.com/p/phantomjs/wiki/QuickStart)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:14:42.630

[pdfcrowd](http://pdfcrowd.com/)是用于将 HTML 转换为 PDF 的 Web 服务。

# javascript - 如何填补 ASP.NET 网络表单中服务器端和客户端之间的空白？

> ID：11100270
> 
> 赞同：0
> 
> 时间：2012-06-19T11:48:23.013
> 
> 标签：javascript, jquery, asp.net, jquery-ui, webforms

伙计们，

我想知道如何填补 ASP.NET 网络表单中服务器端和客户端之间的空白，如何从服务器端触发客户端和虎钳诗句？如何从服务器端打开 jQuery UI 对话框？如何获得带有回发的模态对话框，例如，如果我在 jQuery UI 模态对话框中有一个分页的 GridView 并且当用户更改页面时它会关闭。我需要知道什么是最好的填补这个空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:54:13.607

Asp.net 默认的解决方案是使用[更新面板](http://msdn.microsoft.com/en-us/library/bb399001.aspx)。这将创建 ajax 请求并将它们发送到服务器。（照顾你的分页问题。）

要打开有关服务器上发生的事件的对话框：

默认情况下 Http 是无连接的，您将**无法**在开箱即用的 asp.net 中执行此操作。

您可以查看诸如[comet 之](http://en.wikipedia.org/wiki/Comet_%28programming%29)类的方法。这可以在 asp.net 中使用异步调用来完成。

网上有一些[使用 asp.net 的彗星样本。](http://www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push)但这可能涉及对您的代码的重大更改。还有一些像[Signar](http://signalr.net)这样的库可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:58:15.787

当涉及到在 Web 环境中与客户端交互的服务器时，您必须处理相当严格的限制。我将在这里的回答中笼统地回答。

当您想将某些内容从客户端传递到服务器时，这通常很容易做到。一种相对常见的方法是通过 AJAX。最简单的 ASP.NET WebForms 通过`<form>`提交进行通信。

做相反的事情（即服务器向客户端发起消息），这是一个更困难的用例。HTTP，只是从它的实现方式来看，很容易`client -> server`，但`server -> client`几乎是不可能的。它只是不是为此而设计的。如果没有客户端首先要求，服务器就不能向客户端发送一些东西。这就是一个大问题：*客户端如何知道服务器何时需要发送一些东西？*有点违背了目的。

当然，目前有一些东西正在用来弥补这一点。其中一个更有希望的是[web sockets](http://www.websocket.org/)，这是一种可靠、具体的方式，允许服务器在客户端不请求的情况下将消息推送到客户端（请注意，开箱即用的 IIS 7 不支持 web插座AFAIK）。另一个是 Comet，甚至是通过定期轮询的 AJAX。

您似乎想要的功能的一个很好的包装是[SignalR](https://github.com/SignalR/SignalR)。我已经使用它一段时间了，到目前为止它似乎工作得很好。它在可用时使用 Web 套接字，而在不可用时静默使用回退。

# c# - 你能把两个数字相加，就好像它们是正数一样，即使它们可能是负数

> ID：11100272
> 
> 赞同：1
> 
> 时间：2012-06-19T11:48:44.887
> 
> 标签：c#

大多数信息不需要回答我的问题，我将其包括在内，以防有人知道更简单的方法，我的问题在最后。

我有一个 X 和 Y 向量，我正在使用它是一个移动球的路径。当那个球撞到墙上时，比如说顶墙，它会向负方向反弹，这很容易。但如果它撞到有角度的墙，我可以很容易地计算出一个方向，我想将其余的力加到另一个方向上。把它想象成乒乓球或迷你高尔夫。

例子。

一个球正在移动 5,10，这意味着它每向右移动 5 个像素，它就会向下移动 10。当它到达底部时，我将 Y 轴乘以 -1，使其变为 5,-10

但是如果我击中一个 45 度角，而不是一些力将转移到 X 方向。无论哪种方式。

**问题：** 我需要使 X+Y 总数为 15，如果其中一个为负数，我需要将其视为正数。

```
-10+5 = 15
-5+10 = 15  
 5+10 = 15
-5+-10 = 15 
```

我知道我可以先将它们全部转换为正值，然后进行比较，但这似乎很笨重。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T11:50:14.133

使用`Math.Abs`函数将 -15 和 +15 都变成 +15：

```
var a = -10;
var b = 5;

Console.WriteLine(Math.Abs(a) + Math.Abs(b)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:01:47.397

在我看来，您正在寻找向量的长度。长度计算如下：

```
Math.Sqrt((x*x) + (y*y)) 
```

通过向量的长度，您也可以将向量与其他方向进行比较，例如 (2, 11) 与 (5, 10) 的长度相同。

# c++ - 生成某些形式的两个值 (x,y) 的某些向量的函数

> ID：11100277
> 
> 赞同：0
> 
> 时间：2012-06-19T11:49:10.473
> 
> 标签：c++, python, random, distribution, data-generation

编辑：我简单地重新表述了这个问题：如何在 C++ 或 Python 中生成随机点 (x,y) 以下：圆形分布、方形分布和三角形分布。

这是正方形的简单代码，例如：

```
def generateSquare(min, max, size):
    data = []

    for i in range(size):
        x = randint(min, max)
        y = randint(min, max)
        data += [[x, y]]

    return data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:08:16.493

首先，与其将坐标存储在向量中，不如使用`std::pair`自定义类：

```
struct Point
{
    int x;
    int y;
}; 
```

那么你只需要有一种生成随机点的方法，比如

```
Point randomPoint(Point const & min, Point const & max)
{
    static std::mt19937 gen;
    std::uniform_int_distribution<> distribX(min.x, max.x);
    std::uniform_int_distribution<> distribY(min.y, max.y);

    return Point{distribX(gen), distribY(gen)};
} 
```

然后你可以使用这个生成函数来填充你的向量，例如`generate_n`：

```
unsigned int const nbPoints = 100;

std::vector<Point> points;

std::generate_n(back_inserter(points), nbPoints, 
    std::bind(randomPoint, Point{0, 0}, Point{1000, 1000})); 
```

请注意，这将生成随机点，因此不能保证最终得到正方形、三角形等。如果您想生成一个罐头，您可以使用非均匀分布（如果您知道坐标的分布跟随）生成您的数字，或使用拒绝抽样来丢弃不在您想要的区域内的点。

生成一个三角形归结为绘制三个随机点。

要生成一个正方形，您可以绘制两个点，对应于正方形的两个对角。

等等......我认为没有适用于任何形状的“通用”解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:28:53.447

作为 Luc Touraille 帖子的补充。

对于一个正方形，找到两个随机点，让这两个点成为正方形的两个最远的角。

对于三角形，找到三个随机点，让三角形成为这三个点组成的三角形。

对于一个圆，找一个随机点作为圆心和另一个随机点，让两者之间的距离为圆的半径。

更通用的方法可能是找到图形的中心点，并通过进一步随机生成的数字来找到参数（比例、旋转等）。（我想有点像 Rook 建议的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:03:57.720

您的问题未指定。

没有“圆形分布”或“三角形分布”之类的东西。

您可能的意思是：圆形、矩形、三角形形状的均匀分布。甚至没有唯一指定的三角形......

重点是*统一*。

例如，二维中的标准正态分布可能看起来有点圆形，但它并不完全是圆形。

没有随机生成器直接产生一个密度均匀的圆；至少我不知道。最常见的方法就是**生成一个正方形，并拒绝那些你不想拥有的点**。

例如，在 [0:1]x[0:1] 上生成 (x,y) 对，并拒绝距离 0.5,.5 大于 0.5 的那些 - 然后你就得到了圆。

如果您 - 正如其他用户所建议的那样 - 生成半径和距离，那么生成的点将不会均匀分布在圆上。

# ios - 在实际设备上使用 selenium webdriver 自动化 iOS 测试

> ID：11100281
> 
> 赞同：2
> 
> 时间：2012-06-19T11:49:29.163
> 
> 标签：ios, ruby, selenium

我下载了 iwebDriver 项目并将其安装在 ipad 中。服务器在“http://10.10.10.55:3001/wd/hub”上启动。我想在上面点击“www.google.com”，但我得到了错误。我在下面粘贴代码和堆栈跟踪。

注意：它在 iOS 模拟器上完美运行，但在 ipad 上失败。我的 iPad 版本是 4.3.3，XCode 版本是 4.2，iOS SDK 是 5.1

```
require 'selenium-webdriver'

browser = Selenium::WebDriver.for :remote, :url => "http://10.10.10.55:3001/wd/hub", :desired_capabilities => "ipad"
browser.get "http://www.google.com" 
```

我收到错误：-

> URI::InvalidURIError: 方案 http 不接受注册表部分：(null):(null)（或错误的主机名？）来自 /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/ 1.9.1/uri/generic.rb:199:in `initialize' from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/uri/http.rb:78:in`initialize' 来自 /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/uri/common.rb:177：来自`new' from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/uri/common.rb:177:in`/Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/uri/common.rb:628:in `parse' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/http/default.rb:57:in`request' 来自 /Users/rohit/.rvm/ gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/http/common.rb:40:in `call' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:598:in`raw_execute' 来自 /Users/rohit/.rvm/ gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:92:in`create_session' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:68:in`从 /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/common/driver.rb:33:in `new' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/common/driver.rb:33:in`for 初始化'来自 /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver.rb:65:in `for' from (irb):5 from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in`'

当我使用 "https" 时，我看到以下内容 -

```
browser = Selenium::WebDriver.for :remote, :url => "https://10.10.10.55:3001/wd/hub", :desired_capabilities => "ipad" 
```

> OpenSSL::SSL::SSLError: SSL_connect SYSCALL returned=5 errno=0 state=SSLv2/v3 从 /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9 读取服务器 hello A。 1/net/http.rb:678:in `connect' from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:678:in`block in connect' 来自 /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/timeout.rb:44:in `timeout' from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/timeout.rb:89:in`timeout '来自 /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:678:in `connect' from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:637:in`do_start' 来自 /Users/rohit/.rvm/rubies/ ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:626:in `start' from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:1168:in`request' 来自 /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/ selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/http/default.rb:76:in`response_for' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/http/default.rb:38:in`来自 /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/http/common.rb:40:in 的请求`call' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:598:in`raw_execute' 来自 /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:92:in`create_session' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/remote/bridge.rb:68:in`初始化'来自 /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/common/driver.rb:33:in `new' from /Users/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver/common/driver.rb:33:in`for' 来自 /用户/rohit/.rvm/gems/ruby-1.9.2-p290@playerTests/gems/selenium-webdriver-2.22.2/lib/selenium/webdriver.rb:65:in `for' from (irb):6 from /Users/rohit/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in`'1.9.2p290:007 >

请建议，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:11:01.133

**为什么 selenium-webdriver 不能在 ipad 上工作：-**

1.  我的 ipad2 版本是 4.3.3，我在同一个 ipad2 上安装了 iWebDriver 项目。
2.  试图运行有问题的简单 ruby​​ 代码。
3.  代码出错，堆栈跟踪也有问题。

**selenium-webdriver 如何开始在 ipad 上工作：-**

1.  我在 'New ipad' ios 5.1 版上安装了 iWebdriver 项目。它也适用于版本为5.0的iphone 4S
2.  然后运行简单的 ruby​​ 代码

    ruby 'selenium-webdriver' 驱动程序 = Selenium::WebDriver.for :remote, :url => "http://10.10.10.88:3001/wd/hub", :desired_capabilities => :ipad

3.  desired_capabilities 没关系，你可以给任何东西 :iphone 或 :ipad

4.  上面的 ruby​​ 代码返回了我的对象，我可以这样做：-

    driver.get "http://www.google.com"

5.  它奏效了。
6.  我观察到，selenium-webdriver 存在 iOS 版本依赖关系。

所以，问题是为什么 selenium-webdriver 不能在低于 5.0 的 iOS 版本上运行，比如 4.3.3、4.3.1 等。

感谢所有帮助过我的人。

# iphone - 如何让设备包含应用程序名称

> ID：11100285
> 
> 赞同：0
> 
> 时间：2012-06-19T11:49:40.757
> 
> 标签：iphone

我正在开发一个应用程序，我需要在其中获取设备上安装的应用程序列表。如何获取设备上已安装应用程序的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:51:12.157

您无法获得此类列表，如果您的设备已越狱，也许您可​​以获得，但以合法方式您无法获得此类信息

# asp.net-mvc-3 - 隐藏部分视图并在 mvc3 中显示另一个部分视图

> ID：11100287
> 
> 赞同：1
> 
> 时间：2012-06-19T11:49:57.390
> 
> 标签：asp.net-mvc-3

我在网格中有一个超链接列。单击链接时，我必须隐藏部分视图（网格部分），并且必须显示/加载另一个部分视图，即细节部分。请提供解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:51:02.377

你可以使用javascript。用 jQuery 表示将对应的[`.toggle()`](http://api.jquery.com/toggle/)函数或[`.show()`](http://api.jquery.com/show/)/[`.hide()`](http://api.jquery.com/hide/)函数。所以基本上你将订阅链接的点击事件，并在这个处理程序中显示和隐藏相应的部分。为此，您显然应该将这些部分放置在占位符 div 中，以便您可以显示/隐藏整个占位符。

如果除了显示部分视图之外，您还需要从服务器获取一些新信息，那么您可以使用 AJAX 请求控制器操作，该操作将返回部分视图的新数据，您将在正确的占位符位置注入到 DOM 中。为了在 jQuery 中发送 AJAX 请求，您可以使用该[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)函数或直接使用该[`.load()`](http://api.jquery.com/load/)函数。

# java - 从 JFileChooser 获取带引号的路径？

> ID：11100302
> 
> 赞同：2
> 
> 时间：2012-06-19T11:50:40.287
> 
> 标签：java, jfilechooser

是否可以让用户在 JFileChooser 中输入带引号的路径并获得不带引号的路径？

例如，用户`"c:\path\to\File"` 在文件名文本字段中输入：但是当我得到选定的文件时，我得到了当前目录 + `"c:\path\to\File"`。他们是解决这个问题的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:57:18.613

你可以这样做：

```
String str = "\"C:\\foor\\bar\"";
System.out.println(str);
String newStr = str.replaceAll("\"?(.+?)\"?", "$1");
System.out.println(newStr); 
```

印刷：

> "C:\foo\bar"
> 
> C:\foo\bar

这将删除`"`恰好位于字符串开头和结尾的引号 ( )。正`?`则表达式中的 表示引号可能不存在，因此例如，以下内容都应该产生相同的结果：

> "C:\foo\bar"
> 
> "C:\foo\bar
> 
> C:\foo\bar"
> 
> C:\foo\bar

但是，据我所知，该`"`字符不会成为有效文件路径的一部分，因此您可以通过执行以下操作来解决：`str.replaceAll("\"","");`.

编辑：看到您的评论和问题编辑，我制作了这段简短的代码，似乎可以满足您的需求。也就是说，我不会删除我之前的答案，以防其他人发现它有用。

```
JFileChooser chooser = new JFileChooser();
chooser.setCurrentDirectory(new java.io.File("."));
chooser.setDialogTitle("Hello");
chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
chooser.setAcceptAllFileFilterUsed(false);
if (chooser.showOpenDialog(f) == JFileChooser.APPROVE_OPTION) 
{ 
    File file = chooser.getSelectedFile();
    if (file.getName().contains("\""))
    {
        Pattern pattern = Pattern.compile("\"?(.*?)\"?");
        Matcher m = pattern.matcher(file.getName());
        if (m.matches())
        {
            System.out.println("Group Found: " + m.group(1));
        }
    }
} 
```

这似乎是你所追求的，我在文件文本框中粘贴了以下内容：`"C:\foo\bar.txt"`和打印的代码`C:\foo\bar.txt`，不包括初始段。

# devexpress - DevExpress 如何在运行时设置和获取树节点文本和名称？

> ID：11100315
> 
> 赞同：3
> 
> 时间：2012-06-19T11:51:24.700
> 
> 标签：devexpress

我是开发快递技术的新手。我在使用 devexpress XtraTreeList 时遇到问题，因为我无法获取节点“NAME”和“TEXT”属性。请任何人通过代码帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:43:46.050

也许这个例子可以帮助你：

```
Public Sub LoadTree()
    TreeList1.Columns.Add().Name = "DisplayColumn"

    Dim node1 = TreeList1.Nodes.Add("Father")
    node1.Tag = "Father"

    Dim node1_1 = TreeList1.Nodes.Add("Child Node")
    node1_1.Tag = "Child Node"

    Dim node1_1_1 = node1.Nodes.Add("This is a grandchild node")
    node1_1_1.Tag = "Grandchild 1"

    Dim node1_1_2 = node1.Nodes.Add("Another grandchild node")
    node1_1_2.Tag = "Grandchild 2"

End Sub

Public Sub DisplayNodeValue(ByVal tag As String)
    Dim valueToPresent = FirstTagValueInNode(TreeList1.Nodes, tag)
    MsgBox(valueToPresent.ToString)
End Sub

Public Function FirstTagValueInNode(ByVal nodes As DevExpress.XtraTreeList.Nodes.TreeListNodes, ByVal tagSearch As Object)
    For Each node As DevExpress.XtraTreeList.Nodes.TreeListNode In nodes
        If node.Tag = tagSearch Then
            Return node.GetValue(TreeList1.Columns(0))
        End If
        If node.Nodes.Count > 0 Then
            Return FirstTagValueInNode(node.Nodes, tagSearch)
        End If
    Next

    Return Nothing
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:13:01.093

您需要记住的一件事是每个节点都可以由多个值组成。基于显示的列数。因此，您实际想要访问的是节点的特定列，以便访问或设置节点中该列的值。

例如：

```
TreeListColumn columnID1 = treeList1.Columns["Budget"];
// Get a cell's value in the first root node. 
object cellValue1 = treeList1.Nodes[0][columnID1]; 
```

和

```
string columnID2 = "Budget";
// Get the display text of the focused node's cell 
string cellText = treeList1.FocusedNode.GetDisplayText(columnID2); 
```

也请查看 devExpress[文档](http://documentation.devexpress.com/#WindowsForms/CustomDocument5593)。这很有帮助。

# html - 用 DIV 表示表

> ID：11100316
> 
> 赞同：-3
> 
> 时间：2012-06-19T11:51:36.247
> 
> 标签：html, css, html-table

我有一张桌子

```
<td colspan="6">
    <table width="100%" border="0">
      <tr align="center">
        <td width="5%"><input type="checkbox" name="chkAll" class="chkAll" value="1" /></td>
        <td width="7%"><strong>Item Id </strong></td>
        <td width="20%"><strong>Item</strong></td>
        <td width="17%"><strong>Type</strong></td>
        <td width="17%"><strong>Rate</strong></td>
        <td width="17%"><strong>Quantity</strong></td>
        <td width="17%"><strong>Price</strong></td>
      </tr> 
```

我通过`<DIV>`这样的方式代表表格

```
<div id="table">
             <div class="row" id="row" align="center">
                <div id="cell"><input type="checkbox" name="chkAll" class="chkAll" value="1" /></div>
                <div id="cell"><strong>Item Id </strong></div>
                <div id="cell"><strong>Item</strong></div>
                <div id="cell"><strong>Type</strong></div>
                <div id="cell"><strong>Rate</strong></div>
                <div id="cell"><strong>Quantity</strong></div>
                <div id="cell"><strong>Price</strong></div>
             </div> 
```

但我找不到任何替代品`colspan="6"`。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:17:40.473

好的，让我们第 100 次直截了当。

## 桌子并不邪恶。

表格用于表格数据。如果您有标题、行或列，那就太酷了。表是要使用的东西。

在 HTML 中。表。

## 滥用元素是邪恶的

出于错误的原因使用任何元素都是错误的。

`h1`图像

`table`用于布局

`button`对于链接

这些事情是错误的。而且不好。

## 概括

使用表格而不是布局，每个人都会很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:13:12.530

Div 不使用列的概念。您可以拥有任意数量的 div 连续。您可以固定 div 的宽度，然后可以使用它们来构建表格。顺便说一句，你可以选择像 bootstrap 这样的 CSS 框架会更有效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:57:05.107

以这样的方式制作 div 宽度，它将占据“TD”部分。

为此，您只需要在其中添加一个宽度更高的类，并在新行上添加一些更少的 div。

# java - Scanner 类的问题

> ID：11100317
> 
> 赞同：0
> 
> 时间：2012-06-19T11:51:42.390
> 
> 标签：java, groovy, dsl, java.util.scanner, basic

我正在使用 Groovy 构建将处理 BASIC 脚本的 DSL。

我有这样的一行：

```
100 INPUT V 
```

这是由一个正则表达式提取的，它将一些代码注入正在执行的脚本中：

```
 def retString = "scan = new Scanner(System.in);"
    retString += "${matcher[0][1]} ="
    retString += "scan.nextLine()\n"
    return retString 
```

此代码已正常执行但永远不会返回（即 Scanner 永远不会从 nextLine() 返回，因此不会返回 V/matcher[0][1] 的值，而是无论多少次代码都卡在等待键盘输入我按了回车键。）

我在这里投票错了什么？输入在输入时在 TextArea 中回显（即，这是当时的焦点） - 它与此有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:19:04.130

我不知道这是问题中的拼写错误还是真正的错误，但您有：

```
retString + "${matcher[0][1]} =" 
```

不应该是这个吗？

```
retString += "${matcher[0][1]} =" 
```

但是，这可能不会影响您缺乏回报。我猜测问题是文本区域的输入流不是System.in。您应该检查正在使用的流并围绕该流而不是 System.in 创建一个新的扫描仪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:41:32.640

最后，这似乎是 BASIC 比 Java 或 Groovy 具有更强表达能力的那些（罕见）领域之一——为了解决这个问题，我不得不改变窗口代码（添加一个 JTextField 来接受输入），编写一个 ActionListener 并实现一些闭锁。与 BASIC 的 1 相比，不是特别难，但大约 25 行代码。

# actionscript-3 - As3 不同的 if-case

> ID：11100320
> 
> 赞同：0
> 
> 时间：2012-06-19T11:51:50.893
> 
> 标签：actionscript-3

当我使用以下内容时：

```
var child:DisplayObjectContainer = dso.getChildAt( dso.numChildren -1 ) as DisplayObjectContainer;
trace(child); // [object MenuView] 
```

我现在的问题是，如果我想使用 if-case 来查看它真的是 MenuView ......类似于：

```
if( child == 'MenuView'){... 
```

我无法弄清楚如何将这种情况设置为工作：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:54:27.427

您可以使用[**is**](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fd1.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f65)运算符：

```
if( child is MenuView){ 
```

**更新：**如果在您的情况下无法导入`MenuView`类，那么您可以尝试使用[**describeType**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#describeType%28%29)全局函数：

```
//if 'MenuView' class does not have 'namespace'
if( describeType(child).@name == "MenuView" ){ 

//if 'MenuView' class does have 'namespace'
if( describeType(child).@name.indexOf('MenuView') !== -1 ){ 
```

# qmake - 如何使用 qmake INSTALLS 重命名文件

> ID：11100321
> 
> 赞同：0
> 
> 时间：2012-06-19T11:51:52.033
> 
> 标签：qmake

我想为我的项目制作 INSTALLS 选项。我想要的是当我调用“make install”来移动和重命名一个或多个文件时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:46:16.810

根据[QMake's INSTALLS option](http://doc.qt.nokia.com/4.7-snapshot/qmake-environment-reference.html#installs)的文档，您可以通过为“.extra”指定一些内容来指定用于安装步骤的操作

```
configInstall.extra = cp myApp.cfg.default $$MY_INSTALL_PATH/myApp.cfg
INSTALLS += configInstall 
```

如果我正确地编写了示例，执行“make install”将导致`myApp.cfg.default`对应于定义并重`MY_INSTALL_PATH`命名为的安装目录`myApp.cfg`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:08:15.010

[我在 Qt论坛](http://www.qtcentre.org/threads/49545-It-is-possible-to-rename-file-with-qmake?highlight=)找到了真正的答案

例如我给了我自己的测试

```
MY_INSTALL_PATH =$$PWD/NewFolder
extra_install.path = $$MY_INSTALL_PATH
extra_install.extra = cp test.txt renamed.txt
extra_install.files = renamed.txt
INSTALLS += extra_install 
```

这是创建名为 rename.txt 的 test.txt 的副本，然后将此文件放入 NewFolder

# haskell - 为什么 Haskell/GHC 不支持记录名重载

> ID：11100322
> 
> 赞同：15
> 
> 时间：2012-06-19T11:52:02.657
> 
> 标签：haskell, record, naming

我是一个 Haskell 新手。我注意到 Haskell 不支持记录名称重载：

```
-- Records.hs

data Employee = Employee
  { firstName :: String
  , lastName :: String
  , ssn :: String
  } deriving (Show, Eq)

data Manager = Manager
  { firstName :: String
  , lastName :: String
  , ssn :: String
  , subordinates :: [Employee]
  } deriving (Show, Eq) 
```

当我编译这个时，我得到：

```
[1 of 1] Compiling Main             ( Records.hs, Records.o )

Records.hs:10:5:
    Multiple declarations of `firstName'
    Declared at: Records.hs:4:5
                 Records.hs:10:5

Records.hs:11:5:
    Multiple declarations of `lastName'
    Declared at: Records.hs:5:5
                 Records.hs:11:5

Records.hs:12:5:
    Multiple declarations of `ssn'
    Declared at: Records.hs:6:5
                 Records.hs:12:5 
```

鉴于 Haskell 类型系统的“强度”，编译器似乎应该很容易确定要访问哪个字段

```
emp = Employee "Joe" "Smith" "111-22-3333"
man = Manager "Mary" "Jones" "333-22-1111" [emp]
firstName man
firstName emp 
```

是否有一些我没有看到的问题。我知道 Haskell 报告不允许这样做，但为什么不呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T11:56:17.180

历史原因。[Haskell已经有](http://research.microsoft.com/en-us/um/people/simonpj/Papers/records.htm) 许多为更好的记录系统而设计的[竞争性设计——事实上如此之多，以至于](http://www.haskell.org/haskellwiki/Extensible_record)[无法达成共识](http://www.haskell.org/pipermail/haskell-prime/2006-March/000836.html)。然而。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T12:18:04.437

当前的记录系统不是很复杂。如果没有记录语法，它主要是一些语法糖，可以用于样板文件。

特别是，这：

```
data Employee = Employee
  { firstName :: String
  , lastName :: String
  , ssn :: String
  } deriving (Show, Eq) 
```

生成（除其他外）一个函数`firstName :: Employee -> String`。

如果您还允许在同一模块中使用此类型：

```
data Manager = Manager
  { firstName :: String
  , lastName :: String
  , ssn :: String
  , subordinates :: [Employee]
  } deriving (Show, Eq) 
```

那么`firstName`函数的类型是什么？

它必须是两个独立的函数重载同名，这是 Haskell 不允许的。除非你想象这会隐式生成一个类型类并为所有具有名为的字段创建实例`firstName`（在一般情况下会变得混乱，当字段可能具有不同的类型时），否则 Haskell 的当前记录系统将无法支持同一模块中的多个同名字段。Haskell 目前甚至没有尝试做任何这样的事情。

当然，它可以做得更好。但是有一些棘手的问题需要解决，基本上没有人想出解决方案来让每个人相信有一个最有希望的方向前进。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-07T12:50:38.283

避免这种情况的一种选择是将您的数据类型放在不同的模块中并使用合格的导入。通过这种方式，您可以在不同的数据记录上使用相同的字段访问器，并使您的代码保持干净和更具可读性。

您可以为员工创建一个模块，例如

```
module Model.Employee where

data Employee = Employee
  { firstName :: String
  , lastName :: String
  , ssn :: String
  } deriving (Show, Eq) 
```

还有一个用于管理器的模块，例如：

```
module Model.Manager where

import Model.Employee (Employee)

data Manager = Manager
  { firstName :: String
  , lastName :: String
  , ssn :: String
  , subordinates :: [Employee]
  } deriving (Show, Eq) 
```

然后无论你想在哪里使用这两种数据类型，你都可以导入它们，并按如下方式访问它们：

```
import           Model.Employee (Employee)
import qualified Model.Employee as Employee
import           Model.Manager (Manager)
import qualified Model.Manager as Manager

emp = Employee "Joe" "Smith" "111-22-3333"
man = Manager "Mary" "Jones" "333-22-1111" [emp]

name1 = Manager.firstName man
name2 = Employee.firstName emp 
```

请记住，毕竟您使用的是两种不同的数据类型，因此 Manger.firstName 是 Employee.firstName 之外的另一个函数，即使您知道这两种数据类型都代表一个人并且每个人都有一个名字。但是，抽象数据类型能走多远取决于您，例如从那些“属性集合”中创建一个 Person 数据类型。

# javascript - 如何使用 javascript 隐藏/显示 div

> ID：11100330
> 
> 赞同：0
> 
> 时间：2012-06-19T11:52:34.667
> 
> 标签：javascript, css, html, show-hide

我想用 html 中的 div 实现隐藏/显示，但是以这种方式。

这是我的html：

```
<div id="left"></div>
<div id="middle"> 
<input type="button" id="button"/>
</div>
<div id="right"></div> 
```

这是我的CSS：

```
body 
{ 
 height: 100%; 
 margin: 0; 
 padding: 0 ;
 border: 0 none;
}
#left
{
background-color:#EEEEEE;
height:570px;
width:73.9%;
float:left;
}
#center
{
background-color:#D4EAE4;
color:#535353;
height:570px;
width:15.25%;
float:left;
margin:0;
}
#right
{
background-color:#D4EAE4;
 float:left;
 width:11%;
 height:570px;
 margin:0;
} 
```

当我单击 div 上的按钮`center`以隐藏 div并为 div的大小`right`扩展 div然后将 div一直向右移动时，我想这样做。我想用水平动画隐藏/显示它们，例如从左到右或从右到左。玩这些词可能会很棘手，所以我做了一些小图片，这样你就可以真正看到我在说什么：`left``right``center`

开始阶段： ![开始阶段](../Images/6c6864dea3cec8943c9177660ec05aa6.png)

和结束阶段： ![在此处输入图像描述](../Images/66f9d7859578a111fa71918f37e10d2e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:01:51.043

你可以在这里看到一个工作演示...... [http://jsfiddle.net/miqdad/3WDbz/](http://jsfiddle.net/miqdad/3WDbz/)

或者你可以在这里看到增加第一个 div 宽度的其他演示 .. [http://jsfiddle.net/miqdad/3WDbz/1/](http://jsfiddle.net/miqdad/3WDbz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:37:51.907

几天前我几乎有同样的问题，也许它对你也有帮助。此示例使用复选框来隐藏 div。并使另一个 div 的宽度为 100%。

[javascript，当右 div 被隐藏时，左 div 必须是 100% 宽度](https://stackoverflow.com/questions/11015286/javascript-when-right-div-is-hidden-left-div-has-to-be-100-width)。

示例中的 javascript 代码：

```
$(function() {
    $("#foo").on("click",function() {
        if ($(this).is(':checked')) $('#checked-a').show('fast',function() {
            $('#checked-b').css("width","60%");
            $('#checked-a').css("width","40%");
        }) ;
        else $('#checked-a').show('fast',function(){
           $('#checked-b').css("width","100%").show();         
           $('#checked-a').css("width","0%").hide();

        });
    });
}); 
```

和一个例子：http: [//jsfiddle.net/mplungjan/5rdXh/](http://jsfiddle.net/mplungjan/5rdXh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-04T02:32:02.387

这是使用 JavaScript 隐藏 div 元素的最佳方法之一：

```
<html>
<head>
    <script>
      function hideDiv() {
      document.getElementById("myP2").style.visibility = "hidden";
      }
    </script>
</head>
<body>
    <button onClick="hideDiv()">Hide</button>
    <br>
    <br>
    <p id="myP2">Hello world!</p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:01:22.810

用 JQuery 实现很容易。看看这个 JSFiddle 示例：http: [//jsfiddle.net/q39wv/2/](http://jsfiddle.net/q39wv/2/)

（对所有人：通常我不会在这里只放一个 JSFiddle 链接，但这次我认为值得向 OP 展示整个事情是如何工作的，并对他的 HTML 和 CSS 进行一些调整）。

仅 Javascript 的解决方案将更难以实现。

# gwt - 在 GWT 中动态替换 DIV 的内部文本

> ID：11100341
> 
> 赞同：2
> 
> 时间：2012-06-19T11:53:09.103
> 
> 标签：gwt, smartgwt

我正在寻找在动态更改元素的内部 HTML 文本方面提供`GWT`的可能性。`SmartGWT`

**让我们来看一个例子：**

我在一个`DIV`元素中有一些 lorem ipsum 文本，如下所示：

```
<div id="text">
    Lorem <span style="background-color:red">ipsum </span>
    dolor sit amet, consectetur adipiscing elit. 
    Duis convallis iaculis 
    <span style="background-color:red">ipsum </span>
    magna sagittis vel. Lorem
    <span style="background-color:red">ipsum </span> dolor sit amet.
</div> 
```

**所需功能：**

我希望允许用户在*运行时*决定“标记”哪些文本（红色）。这种影响体现在两件事上：

*   能够*删除*一个跨度元素，从而替换

```
<span style="background-color:red">ipsum </span> 
```

经过

```
ipsum 
```

*   能够*添加*跨度元素（通过相反的方式）

一旦用户选择了他想要“标记”的文本，我就会使用类似的东西

```
RootPanel.get("text").getElement().
setInnerHTML("html content with some new spans tags"); 
```

用新的*选择*更新 HTML 代码（以实现我有一些 GWT 类来跟踪*标记*的文本）。

这对我来说似乎*有点残酷*，因为我经常更新内部 HTML 代码。

有没有办法使用 GWT（与 DOM 密切合作）或 SmartGWT，以一种不那么*暴力*的方式实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:52:16.737

要访问页面的 DOM，您可以调用`Document.get()`，它有一种通过 id 查找元素的便捷方法`Document.get().getElementById("test");`

当然，你应该保留对这个元素的引用，这样就不必每次想要访问它时都必须在 DOM 中搜索，因为这很残酷。

```
私有元素 testDiv = Document.get().getElementById("test");
...

testDiv.setInnerHTML("一些 html");
...
testDiv.setInnerHTML("其他一些 html");

```

但是一旦你引用了这个元素，调用 setInnerHTML 是做你想做的最有效的方法。我不知道你为什么认为这是残酷的。这可能比在小部件上调用方法来更改其内容（例如`setText(" ...")`在 a上）更有效`TextBox`，因为这些方法通常检查作为参数传递的值以确保安全。

安全性也可能是您关心的问题，具体取决于用户可以执行的操作。但通常如果用户可以修改您页面中的 HTML，这是一个问题。您可能想查看 GWT 的[SafeHTML](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml)功能。

如果您正在寻找 RichText 组件，您可以查看[GWT 的 RichTextArea](http://gwt.google.com/samples/Showcase/Showcase.html#!CwRichText)例如。但是这种类型的组件通常不是所有浏览器都很好地支持，并且会占用比你已经在做的更多的资源，所以我不推荐它。

# java - 用于 JDK 1.4 的 Solrj

> ID：11100344
> 
> 赞同：1
> 
> 时间：2012-06-19T11:53:24.013
> 
> 标签：java, solrj, jdk1.4

是否有为 JDK 1.4 构建的 Solrj 版本？
我在单独的 Tomcat 实例上安装了最新版本的 Solr，但我必须通过使用 JDK 1.4 开发（和部署）的应用程序发送请求[http://www.us.apache.org/dist/lucene/solr](http://www.us.apache.org/dist/lucene/solr/)
上的存档[/](http://www.us.apache.org/dist/lucene/solr/) 似乎只包含与 JDK5 或更高版本兼容的版本

# google-apps-script - 管理两个 UI 的最佳方法是什么？

> ID：11100349
> 
> 赞同：1
> 
> 时间：2012-06-19T11:53:45.467
> 
> 标签：google-apps-script

我创建了两个用户界面。如何关闭第一个并激活下一个？谷歌应用脚​​本下是否可以有两个用户界面？

我尝试过类似的东西：

```
var app = UiApp.getActiveApplication();
app.add(app.loadComponent("APPGui"));
var panel1 = app.getElementById("LoginPanel1");
panel1.setVisible(false);
return app; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:22:52.010

最简单的方法可能是在同一个 GUI 构建器中设计两个面板，一个在 2 个单独的面板中彼此重叠，“登录面板”在另一个上方，它会在活动时屏蔽另一个。当您将其设置为“不可见”时，您会看到下面的那个。根据您的用例，登录面板可能会隐藏全部或仅部分主面板。GUI 构建器具有所有必要的工具来决定哪个在前面或后面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:55:05.550

这是一个接一个显示的三个对话框的示例，通过**CacheService**对象维护它们之间的状态/数据。

（您可以使用 UserProperties、ScriptProperties 甚至隐藏字段作为替代方案，但每个都有自己的范围......）

希望这在不解释 UI Builder 中每个对话框包含什么的情况下是有意义的。

```
function showDialog1(){
  var app = UiApp.createApplication();
  app.add( app.loadComponent("Dialog1") );
  SpreadsheetApp.getActiveSpreadsheet().show(app);
}

function onDialog1OKButton(e){
  CacheService.getPrivateCache().put("n1", e.parameter.n1);

  var app = UiApp.getActiveApplication();
  var d2 = app.loadComponent("Dialog2");
  app.add(d2);

  SpreadsheetApp.getActiveSpreadsheet().show(app);
}

function onDialog2OKButton(e){
  var c = CacheService.getPrivateCache();
  c.put("n2", e.parameter.n2);

  var app = UiApp.getActiveApplication();
  app.add(app.loadComponent("DialogResult")); 

  var n1 = c.get("n1");
  var n2 = c.get("n2");
  var l = app.getElementById("Label2");
  l.setText( "" + n1 + " + "  + n2 + " = " + (parseInt(n1) + parseInt(n2)) );

  SpreadsheetApp.getActiveSpreadsheet().show(app);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T19:16:52.000

我更喜欢构建多个 GUI。使用此代码，您可以在它们之间跳转。

```
function doGet() {

   var app = UiApp.createApplication();
   var base0 =app.createAbsolutePanel().setId('GUI_base0').setHeight('630px').setWidth('1125px');
   app.createAbsolutePanel().setId('GUI_base1');  // create all abs_panells but not use
   // you need to create all abspanels if you want to jump between them
   app.createAbsolutePanel().setId('GUI_base2');  // create here all the absolute panels (1 for every GUI)
   // app.createAbsolutePanel() ... GUI3, GUI4 ...

   var component0 = app.loadComponent("GUI_password");  // load first GUI (his name is "password"

         /// this is an example of code for the 1st GUI ////////////////////
         /// I can  check if the user can see the second GUI
         var label_ID = app.getElementById('LB_ID');
         var user = Session.getActiveUser().getEmail();
         if ( user == 'XXX@yyyy.com' ) { 
            label_ID.setText(user).setTag(user);  // only show if ....
         }
         ////////////////////////////////////////////////////////////////////

    base0.add(component0);   // GUI_password over absolute panel
    app.add(base0);

    // handler Button1  // we can show a button only if the password is correct or is a valid user or ...
    app.getElementById('BT_jump').addClickHandler(app.createServerHandler('NOW_gui1'));

    return app;  

};

function NOW_gui1(e) {

    var app = UiApp.getActiveApplication();

    var base0 = app.getElementById("GUI_base0").setVisible(false); // hide 1st abs_panel created with code
    var base2 = app.getElementById("GUI_base2").setVisible(false); // hide 3rd abs_panel created with code
    ///  hide all others abs_panel

    var base1 = app.createAbsolutePanel().setId('GUI_base1').setHeight('630px').setWidth('1125px');  // maybe get by ID ??, but this work
    var component1 = app.loadComponent("GUI_1");  // load the second GUI

    base1.add(component1);  // load GUI_1 over 2n absolute panel
    app.add(base1);

    // HERE THE CODE OF THE GUI_1

    // handler Button2  
    app.getElementById('BT_jump_1_to_2').addClickHandler(app.createServerHandler('NOW_gui2')); 

    return app;
}; 
```

# mysql - 如何使用 Asterisk MYSQL 命令调用存储过程？

> ID：11100352
> 
> 赞同：0
> 
> 时间：2012-06-19T11:53:58.863
> 
> 标签：mysql, asterisk

我有一个存储过程。它有两个输出参数。如何使用 Asterisk MYSQL 命令调用它？当我使用这个命令时，我没有得到任何结果：

```
exten => s,n,MYSQL(Query resultid ${connid} CALL RemainingTime(${WeekID}, @rDay, @rHour)\;SELECT @rDay, @rHour\;)
exten => s,n,MYSQL(Fetch foundRow ${resultid} remainingDay remainingHour)
exten =>s,n,NoOp(${remainingDay})
exten =>s,n,NoOp(${remainingHour}) 
```

剩余日和剩余时间为空；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:28:04.607

使用函数而不是过程。

如果需要返回超过 1 个值，我通常使用 concat(a,':',b) 之类的东西。

还建议使用 func_odbc 而不是 mysql。它有更多选项并自动设置连接池。命令 MySQL 已弃用，将在未来版本中删除。

# vb.net - VB.NET 获取页面源 WebBrowser 控件

> ID：11100359
> 
> 赞同：1
> 
> 时间：2012-06-19T11:54:21.780
> 
> 标签：vb.net, browser

我想获取网站的html源代码，

它类似于：

```
wb.Document... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T11:54:48.503

1：

```
webbrowser1.document.body.innerhtml 
```

2：

```
Dim webClient As New System.Net.WebClient
Dim result As String = webClient.DownloadString("http://www.google.co.il") 
```

;)

# ios - 在 xcode 中打开方法下拉菜单的快捷方式

> ID：11100364
> 
> 赞同：67
> 
> 时间：2012-06-19T11:54:32.747
> 
> 标签：ios, xcode, macos, keyboard-shortcuts

我正在寻找一种方法来打开当您单击 XCode 中的导航栏时出现的方法弹出窗口。

有没有办法通过使用快捷方式来做到这一点？

![在此处输入图像描述](../Images/63fbef80e49a7eb6e6d3d5001f2ad384.png)

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-06-19T12:02:41.403

快捷方式是 ^6（又名 Control+6）。要更改快捷方式，请转到 Xcode-->Preferences...->Key Bindings，然后查找 View Menu 列表。它被称为“标准编辑器 -> 显示文档项”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T11:59:05.633

**控制+6**。按下控制和6一起。:)

# networking - 在 vmware 中创建有线连接 b/w 两个 vm

> ID：11100367
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:54:49.647
> 
> 标签：networking, configuration, interface, vmware

我只是好奇我是否可以使用 vmware 播放器连接在同一机器上运行的任何两个 vm 的任何两个接口，就好像这两个接口是通过网线连接的一样。我需要这个设置来模拟一些网络测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:29:34.323

在工作站下，您可以非常轻松地创建您想要的东西，但是，在播放器中，如果您只选择主机，网络上将有 3 个东西，主机和 2 个来宾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:27:02.413

我不知道投反对票的原因。无论如何，我认为再创建一个像 vmnetX 这样的虚拟网络，然后让两个接口连接到同一个接口可以解决问题。如果我错了，请纠正。

PS：很明显你不能使用'Wire'连接两个虚拟机:)

# c - 可以打印但不能将字符串存储到 C 中的数组中

> ID：11100372
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:55:03.280
> 
> 标签：c

我的问题是这样的：我必须读取一个包含一些字符串的文件。任务是在 C 程序中读取数据并存储在适当的数据结构中。

目前我的程序打印所有值，但访问这些变量是一个问题......

```
using namespace std;

int split(char* str, char splitstr[15][10]);
int main ()
{ 
  FILE *fp;

  char str[20] = {0}; // temp variable for accessing a line from file

 // for opening of file

  fp = fopen("C:\\Cross Crystal Sheet.csv", "r") ;

  char input[256];
  char result[15][10];
  char *protein[700];
  char p[1000];
  int j=0;

  if (NULL != fp) 
  {

    while(fgets(str,sizeof(str),fp)!=NULL)
    {
      strcpy(input, str);
      int count = split(input, result);
      int tmp=count;
      //j=result[0]-'0';
      for (int i=0; i<count; i++) 
      { 
        printf("%s\n", result[i]);
        //printf("%s\n",*(result+i));

        protein[j]=*(result+i);
          //*((protein)+j);
        printf("%s \n",*(protein+j));
        j++;
      }

     }

    }

}

int split(char* str, char splitstr[15][10])
{
   char* p;
   int i=0;
   char *string = strdup(str);
   p = strtok (string, ",");
  // i=i+count;

   while(p!=NULL)
   {
       strcpy(splitstr[i++], p);
       p = strtok (NULL, ",");

       if( p ==NULL)
        {
         break;
        }
     unsigned charlength = strlen(p);
     if(charlength==1 ||charlength==2 )
        {
          break;
        }
   }
   return i;
} 
```

我期待像这样的蛋白质 []={1,ABL1,ABL2,AURKA,AURKB,...}

数据文件是这样的：

```
1,ABL1,ABL2,,,,
,,AURKA,,,,
,,AURKB,,,,
,,BMX,,,,
,,BTK,,,,
,,KIT,,,,
,,LCK,,,,
,,MAPK14,,,,
,,PRKACA,,,,
,,SYK,,,,
,,EGFR,,,,
,,INSR,,,,
,,MAPK11,,,,
,,,,,,
2,ABL2,ABL1,,,,
,,AURKA,,,,
,,AURKB,,,,
,,CAMK4,,,,
,,CDKL2,,,,
,,CLK3,,,,
,,CSNK1G3,,,,
,,KIT,,,,
,,LCK,,,,
,,MAPK14,,,,
,,PRKACA,,,,
,,SLK,,,,
,,SYK,,,,
,,,,,,
3,ACVR1,ACVR2A,,,,
,,ACVRL1,,,,
,,PIM1,,,,
,,PRKAA2,,,,
,,,,,,
4,ACVR2A,ACVR1,,,,
,,CAMK2D,,,,
,,MST4,,,,
,,PRKAA2,,,,
,,SLK,,,,
,,,,,,
5,AKT1,PRKACA,,,,
,,,,,,
,,,,,,
6,ALK,FES,,,,
,,MET,,,,
,,,,,,
7,AURKA,ABL1,,,,
,,ABL2,,,,
,,AURKB,,,,
,,CDK2,,,,
,,CHEK1,,,,
,,PLK1,,,,
,,PRKACA,,,,
,,,,,,
8,AURKB,ABL1,,,,
,,ABL2,,,,
,,AURKA,,,,
,,PRKACA,,,,
,,,,,,
9,BMX,ABL1,,,,
,,BTK,,,,
,,LCK,,,,
,,MAPK14,,,,
,,,,,,
10,BRAF,CDK8,,,,
,,KDR/VEGFR2,,,,
,,MAPK14,,,,
,,RAF,,,,
,,,,,, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:06:04.223

根据您的代码，我认为问题在于您没有为“蛋白质 []”分配内存，您应该为蛋白质的每个索引分配内存以存储您的字符串。其次，将字符串从一个地方复制到花药不仅仅是像这样的简单任务：

`protein[j]=*(result+i);`

使用`strncpy`来做到这一点。以上都是我对你的问题的分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:29:32.460

我已经解决了这些问题。下面是我的代码。请建议显示我可以使此代码更通用。

```
using namespace std;

int split(char* str, char splitstr[16][11]);

int main ()
{ 
  FILE *fp;
  char str[20] = {0}; 
  fp = fopen("C:\\Cross Crystal Sheet.csv", "r") ;

  char input[256];
  char s[619][15];
  string str2, str3;
  char result[16][11];
  int j=0;
  if (NULL != fp) 
       {
            while(fgets(str,sizeof(str),fp)!=NULL)
             {
                strcpy(input, str);
                int count = split(input, result);
                int tmp=count;

                for (int i=0; i<count; i++) 
                   { 
                      str2 = result[i]; // "generalities"
                      char * cstr;
                      cstr = new char [str2.size()+1];
                      strcpy (cstr, str2.c_str());
                      strcpy (s[j], cstr);
                      j++;
                   }

             }
       }

   char ss[10] ={0};
   printf("Enter any main string to find \n");
   scanf("%10s",ss);
 //  printf("%d \n",atoi(s[16]));

  int temp=0;
  for (int k=0;k<j;k++)
  { 
       if (strncmp(s[k],ss,8)!=0)
         {
           temp=k; 
         }
       else
         {  
           int x=0;
           x=atoi(s[k-1]);
           if(x >=1 && x <=95)
            {
               printf("found at %d \n",k);
                    for(k=k;k<k+15;k++)
                        {
                          if (strncmp(s[k],"\n",2)!=0)
                             {
                              printf("%s \n",s[k]);
                             }
                          else
                             {
                              return 0;
                             }
                       }
             }
             else

         {
                 continue;
             }
            }

         }
   }

int split(char* str, char splitstr[16][11])
{
   char* p;
   int i=0;
   char *string = strdup(str);
   p = strtok (string, ",");

   while(p!=NULL)
   {
       strcpy(splitstr[i++], p);
       p = strtok (NULL, ",");

       if( p ==NULL)
        {
         break;
        }
     unsigned charlength = strlen(p);
     if(charlength==1 ||charlength==2 )
        {
          break;
        }
   }
   return i;
}
======= 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:03:07.690

您的代码需要一行并将其存储在变量中`result`。然后你指定蛋白质指向`result`。

循环的下一次迭代用下一行的内容`for`覆盖。`result`

可以静态声明一大块内存，但动态分配内存可能会更好，特别是如果您不知道输入文件的最大大小。

# ios - 为什么我的 IBOutlet 在 ARC 下发布？

> ID：11100374
> 
> 赞同：6
> 
> 时间：2012-06-19T11:55:14.013
> 
> 标签：ios, cocoa-touch, automatic-ref-counting, iboutlet

**问题**

一个 IBOutlet 在我有机会使用它之前就发布了。

**我想要的是**

我想从我的应用程序委托访问导航控制器，以便重新加载表格视图。

**我的设置**

我有：

*   在目标设置中设置为主界面的 Main.xib
*   导航控制器的 IBOutlet 作为我的应用程序委托上的 ivar
*   此 IBOutlet 连接到 Main.xib 中的正确导航控制器
*   App Delegate 在 xib 中实例化，但未设置为文件的所有者

我正在使用 ARC、Xcode 4.3.2 和 iOS5.1

**我试过的**

*   更改部署目标
*   为导航控制器、应用程序委托在 dealloc 上设置断点——它们永远不会被调用
*   阅读我在 ARC 和 IBOutlets 上可以找到的所有内容 - 似乎没有什么与我正在做的事情相矛盾
*   创建一个只需要最少类的新项目 - 我看到完全相同的问题

**代码**

**KPAppDelegate.h**

```
@interface KPAppDelegate : UIResponder <UIApplicationDelegate> {
    IBOutlet  KPBrowseExpensesNavigationController *nc;
}

@property (strong) IBOutlet KPBrowseExpensesNavigationController *nc; 
```

**KPAppDelegate.m**

```
@implementation KPAppDelegate

@synthesize nc;

-(void)setNc:(KPBrowseExpensesNavigationController *)nc_ {
    nc = nc_; // This gets called on view load and nc gets set.
}

...snip...

// This is called about 5 seconds after app startup
-(void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects {
        // By the time we get here, nc is nil.
        UITableViewController *tvc = [[nc viewControllers] objectAtIndex:0];
        [[tvc tableView] reloadData];
}

@end 
```

**更新**

我*必须*在这里做一些非常愚蠢的事情。即使是一个非常简单的项目仍然会显示这个问题。请参阅下面的链接。

[下载一个显示问题的简单测试项目。](https://dl.dropbox.com/u/86403596/TestIBOutletDelloc1.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:33:56.810

你的接口生成器的出口是否设置为一种`KPBrowseExpensesNavigationController`类型？如果不是，它不会在您的 nib 和 ViewController 之间创建连接。

您应该在 Identity Inspector 中将其自定义类设置为 KPBrowseExpensesNavigationController

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:51:28.980

在 Window nib 中，将 FilesOwner 类设置为 UIApplication，然后将它的委托从 Outlets 指向 AppDelegate 对象。这是您的项目示例中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:19:16.387

我不确定您为什么将其声明为财产和非财产。我应该做这样的事情：

```
@interface KPAppDelegate : UIResponder <UIApplicationDelegate> 

@property (nonatomic, strong) IBOutlet KPBrowseExpensesNavigationController *nc; 
```

在您的实施中：

```
@implementation KPAppDelegate

@synthesize nc = _nc; // So you don't accidentally use nc

...snip...

// This is called about 5 seconds after app startup
-(void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects {
        // By the time we get here, nc is nil.
        UITableViewController *tvc = [[**self.nc** viewControllers] objectAtIndex:0];
        [[tvc tableView] reloadData];
}

@end 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:45:08.897

我没有看到您分配导航控制器的位置。仅声明该属性不会为其分配任何值，因此它将为零。在您`-didFinishLaunchingWithOptions`的应用程序委托中，设置您的 alloc/init 语句。其他一切看起来都很好。

```
KPBrowseExpensesNavigationController *nc = [[KPBrowseExpensesNavigationController alloc] init]; 
```

如果您有自定义初始化，您也可以使用它，但请确保在尝试使用它之前进行设置。

# windows-installer - 无法在 Win7 上安装 Windows Identity Foundation (WIF)

> ID：11100376
> 
> 赞同：0
> 
> 时间：2012-06-19T11:55:16.320
> 
> 标签：windows-installer, wif

我正在尝试在 Win7 Professional 64bit 上安装 WIF。我安装了 .Net Framework 4（加上 4.5 Beta）

但是，如果我尝试安装“Windows6.1-KB974405-x86.wsu”（是的，对于 32 位，但与 x64 相同），我会收到消息：“此更新不适用于您的计算机”，这意味着，我想，我没有满足所有要求，我以为我做到了。而且我不认为这与公司代理有关，我落后了。

任何人都有类似的经验或更好的解决方案想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:43:41.267

如果您尝试在 64 位 Windows 上运行 32 位安装程序，您将收到此错误消息。你确定你有合适的安装程序吗？这个对我有用：

[http://download.microsoft.com/download/D/7/2/D72FD747-69B6-40B7-875B-C2B40A6B2BDD/Windows6.1-KB974405-x64.msu](http://download.microsoft.com/download/D/7/2/D72FD747-69B6-40B7-875B-C2B40A6B2BDD/Windows6.1-KB974405-x64.msu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:20:29.613

最后，它似乎只是由 .NET-4.5 RC Famework 引起的，这显然与 WIF 不兼容，这似乎是合乎逻辑的，因为它已经包含用于标识模型的类。

# navigation - 解决方案：Python3 Tkinter 使用返回和下一步按钮从一个窗口跳转到另一个窗口

> ID：11100380
> 
> 赞同：5
> 
> 时间：2012-06-19T11:55:36.230
> 
> 标签：navigation, python-3.x, window, tkinter

我一直在研究 python3 中的 tkinter，发现很难在线找到好的文档和答案。为了帮助其他人在同样的问题上苦苦挣扎，我决定为一个似乎没有在线文档的简单问题发布解决方案。

问题：创建一个类似向导的程序，为用户提供一系列窗口，用户可以在窗口之间移动，点击下一步和返回按钮。

解决方案是：

*   创建一个根窗口。
*   创建尽可能多的框架来呈现给用户。将所有框架附加到根窗口。
*   用它需要的所有小部件填充每个框架。
*   当所有帧都填充完毕后，使用该`grid_forget()`方法隐藏每个帧，但不隐藏第一帧，使其变为可见帧。框架上的所有子小部件都将与框架一起隐藏。
*   当用户单击窗口上的 Next 或 Back 按钮时，调用一个子程序来隐藏其他框架（使用`grid_forget()`）并使需要的框架可见（使用`grid()`）。
*   当您希望程序结束时，对根窗口使用destroy - 方法。

因此，您将创建一个窗口并在其上显示不同的框架。

（顺便说一句，开始学习 tkinter 的最佳地点是：[http](http://www.tkdocs.com/tutorial/index.html) ://www.tkdocs.com/tutorial/index.html ）

这是 Python3 中的示例实现。它有 3 个简单的窗口，每个窗口都有一个文本标签和两个用于浏览不同窗口的按钮。

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
#

# Creates three "windows" that the user can navigate through using Back and Next - buttons.

import tkinter
import tkinter.ttk

def create_widgets_in_first_frame():
    # Create the label for the frame
    first_window_label = tkinter.ttk.Label(first_frame, text='Window 1')
    first_window_label.grid(column=0, row=0, pady=10, padx=10, sticky=(tkinter.N))

    # Create the button for the frame
    first_window_quit_button = tkinter.Button(first_frame, text = "Quit", command = quit_program)
    first_window_quit_button.grid(column=0, row=1, pady=10, sticky=(tkinter.N))
    first_window_next_button = tkinter.Button(first_frame, text = "Next", command = call_second_frame_on_top)
    first_window_next_button.grid(column=1, row=1, pady=10, sticky=(tkinter.N))

def create_widgets_in_second_frame():
    # Create the label for the frame
    second_window_label = tkinter.ttk.Label(second_frame, text='Window 2')
    second_window_label.grid(column=0, row=0, pady=10, padx=10, sticky=(tkinter.N))

    # Create the button for the frame
    second_window_back_button = tkinter.Button(second_frame, text = "Back", command = call_first_frame_on_top)
    second_window_back_button.grid(column=0, row=1, pady=10, sticky=(tkinter.N))
    second_window_next_button = tkinter.Button(second_frame, text = "Next", command = call_third_frame_on_top)
    second_window_next_button.grid(column=1, row=1, pady=10, sticky=(tkinter.N))

def create_widgets_in_third_frame():
    # Create the label for the frame
    third_window_label = tkinter.ttk.Label(third_frame, text='Window 3')
    third_window_label.grid(column=0, row=0, pady=10, padx=10, sticky=(tkinter.N))

    # Create the button for the frame
    third_window_back_button = tkinter.Button(third_frame, text = "Back", command = call_second_frame_on_top)
    third_window_back_button.grid(column=0, row=1, pady=10, sticky=(tkinter.N))
    third_window_quit_button = tkinter.Button(third_frame, text = "Quit", command = quit_program)
    third_window_quit_button.grid(column=1, row=1, pady=10, sticky=(tkinter.N))

def call_first_frame_on_top():
    # This function can be called only from the second window.
    # Hide the second window and show the first window.
    second_frame.grid_forget()
    first_frame.grid(column=0, row=0, padx=20, pady=5, sticky=(tkinter.W, tkinter.N, tkinter.E))

def call_second_frame_on_top():
    # This function can be called from the first and third windows.
    # Hide the first and third windows and show the second window.
    first_frame.grid_forget()
    third_frame.grid_forget()
    second_frame.grid(column=0, row=0, padx=20, pady=5, sticky=(tkinter.W, tkinter.N, tkinter.E))

def call_third_frame_on_top():
    # This function can only be called from the second window.
    # Hide the second window and show the third window.
    second_frame.grid_forget()
    third_frame.grid(column=0, row=0, padx=20, pady=5, sticky=(tkinter.W, tkinter.N, tkinter.E))

def quit_program():
    root_window.destroy()

###############################
# Main program starts here :) #
###############################

# Create the root GUI window.
root_window = tkinter.Tk()

# Define window size
window_width = 200
window_heigth = 100

# Create frames inside the root window to hold other GUI elements. All frames must be created in the main program, otherwise they are not accessible in functions. 
first_frame=tkinter.ttk.Frame(root_window, width=window_width, height=window_heigth)
first_frame['borderwidth'] = 2
first_frame['relief'] = 'sunken'
first_frame.grid(column=0, row=0, padx=20, pady=5, sticky=(tkinter.W, tkinter.N, tkinter.E))

second_frame=tkinter.ttk.Frame(root_window, width=window_width, height=window_heigth)
second_frame['borderwidth'] = 2
second_frame['relief'] = 'sunken'
second_frame.grid(column=0, row=0, padx=20, pady=5, sticky=(tkinter.W, tkinter.N, tkinter.E))

third_frame=tkinter.ttk.Frame(root_window, width=window_width, height=window_heigth)
third_frame['borderwidth'] = 2
third_frame['relief'] = 'sunken'
third_frame.grid(column=0, row=0, padx=20, pady=5, sticky=(tkinter.W, tkinter.N, tkinter.E))

# Create all widgets to all frames
create_widgets_in_third_frame()
create_widgets_in_second_frame()
create_widgets_in_first_frame()

# Hide all frames in reverse order, but leave first frame visible (unhidden).
third_frame.grid_forget()
second_frame.grid_forget()

# Start tkinter event - loop
root_window.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:45:25.437

由于您冒昧地将答案作为问题发布。我想发表评论作为答案，并建议您也许应该将其贡献给 TkDocs（单击他们的[关于选项卡](http://www.tkdocs.com/about.html)，他们谈论对站点的贡献）。

我认为如果该站点通过更多示例进行改进，而不是将这个站点变成一本食谱，那会更好。我认为你也可以为[Active State recipes](http://code.activestate.com/recipes/)做出贡献，它们似乎是 Tcl/Tk 火炬的载体，所以 Tkinter 的东西在那里也很有意义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-11T22:33:29.463

感谢您的工作——我用它作为这个例子的灵感，虽然在内容方面非常轻巧，但它是一种很酷的方式来制作任意数量的窗口，您可以在它们之间切换。您可以移动下一步和后退按钮的位置，将它们变成箭头，随心所欲。

```
from tkinter import *
master=Tk()

class makeframe(object):
    def __init__(self,i):
        self.i=i
        self.frame=Frame(master)
        self.nextbutton=Button(self.frame,text='next',command=self.next)
        self.nextbutton.grid(column=2,row=0)
        self.backbutton=Button(self.frame,text='back',command=self.back)
        self.backbutton.grid(column=0,row=0)
        self.label=Label(self.frame,text='%i'%(self.i+1)).grid(column=1,row=0)
    def next(self):
        self.frame.grid_forget()
        p[self.i+1].frame.grid()
    def back(self):
        self.frame.grid_forget()
        p[self.i-1].frame.grid()

n=7
p=[0]*n
for i in range(n):
    p[i]=makeframe(i)
p[0].frame.grid()
p[0].backbutton.config(state=DISABLED)
p[-1].nextbutton.config(state=DISABLED) 
```

# java - 使用 java 程序编辑文本文件中的特定行

> ID：11100381
> 
> 赞同：3
> 
> 时间：2012-06-19T11:55:36.727
> 
> 标签：java, java-io

好的，假设我有一个名为“people.txt”的文本文件，它包含以下信息：

```
 1 adam 20 M
 2 betty 49 F
 3 charles 9 M
 4 david 22 M
 5 ethan 41 M
 6 faith 23 F
 7 greg 22 M
 8 heidi 63 F 
```

基本上，第一个数字是人的 ID，然后是人的姓名、年龄和性别。假设我想用不同的值替换第 2 行，或者 ID 号为 2 的人。现在，我知道我不能使用`RandomAccessFile`它，因为名称并不总是相同的字节数，年龄也不相同。在随机搜索 Java 论坛时，我发现`StringBuilder`或者`StringBuffer`应该足以满足我的需求，但我不确定如何实现。它们可以用来直接写入文本文件吗？我希望这可以直接从用户输入中工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T12:19:06.443

刚刚为您创建了一个示例

```
public static void main(String args[]) {
        try {
            // Open the file that is the first
            // command line parameter
            FileInputStream fstream = new FileInputStream("d:/new6.txt");
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
            String strLine;
            StringBuilder fileContent = new StringBuilder();
            //Read File Line By Line
            while ((strLine = br.readLine()) != null) {
                // Print the content on the console
                System.out.println(strLine);
                String tokens[] = strLine.split(" ");
                if (tokens.length > 0) {
                    // Here tokens[0] will have value of ID
                    if (tokens[0].equals("2")) {
                        tokens[1] = "betty-updated";
                        tokens[2] = "499";
                        String newLine = tokens[0] + " " + tokens[1] + " " + tokens[2] + " " + tokens[3];
                        fileContent.append(newLine);
                        fileContent.append("\n");
                    } else {
                        // update content as it is
                        fileContent.append(strLine);
                        fileContent.append("\n");
                    }
                }
            }
            // Now fileContent will have updated content , which you can override into file
            FileWriter fstreamWrite = new FileWriter("d:/new6.txt");
            BufferedWriter out = new BufferedWriter(fstreamWrite);
            out.write(fileContent.toString());
            out.close();
            //Close the input stream
            in.close();
        } catch (Exception e) {//Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:00:06.270

一种解决方案可能是逐行读取文件，操作您需要的行（执行一​​些解析/标记化以获取 ID/名称/等），然后将所有行写入文件（覆盖其当前内容）。此解决方案取决于您正在使用的文件的大小：文件太大会消耗大量内存，因为您一次将其所有内容保存在内存中

另一种方法（减少内存需求）是逐行处理文件，但不是将所有行保存在内存中，而是在处理完每一行后将当前行写入临时文件，然后移动临时文件到输入文件的位置（覆盖该文件）。

这些类应该可以帮助您读取`FileReader`/`FileWriter`写入文件。您可能希望将它们包装在`BufferedReader`/`BufferedWriter`中以提高性能。

另外，不要忘记在完成读取（写入）文件时关闭读取器（也是写入器），因此不会因为文件仍处于打开状态而阻止对文件的后续访问

# ios - 捆绑子目录访问

> ID：11100388
> 
> 赞同：0
> 
> 时间：2012-06-19T11:55:53.153
> 
> 标签：ios, objective-c, avaudioplayer, nsdata

我正在尝试在我的程序中实现更改界面的能力，比如主题。我决定使用捆绑包，所以在我的情况下，它们看起来像这样：

*   Theme1.bundle
*   Theme2.bundle

每个捆绑包都有文件夹：

*   Theme1.bundle
    *   形象的
        *   pic1.png
        *   pic2.png
    *   声音
        *   声音1.wav
        *   sound2.wav

因此，我可以使用以下代码从捆绑包中获取任何所需图片的路径：

```
path = [NSString stringWithFormat:@"%@.bundle/graphic/%@", selectedBundle, imageName]; 
```

当我从包中获取图片时没有问题，路径看起来像这样（我使用断点检查它）： **Theme1.bundle/graphic/pic1.png**并创建`UIImage`

```
image = [UIImage imageNamed:path]; 
```

图片加载没有任何问题。
但是当我尝试使用 播放声音时`AVAudioPlayer`，我以相同的方式获得声音路径，路径如下所示： **Theme1.bundle/sound/sound1.wav**，但是当我尝试创建 NSData

```
sound = [NSData dataWithContentsOfFile:path]; 
```

它没有被初始化。
当我尝试将声音保留在主包中并使用

```
path = [[NSBundle mainBundle] pathForResource:@"sound1" ofType:@"wav"]; 
```

一切正常，路径看起来像这样
**/var/mobile/Applications/E8313E88-CE05-44B2-A80C-B05331D8596F/Myapp.app/sound1.wav**

我不明白为什么这适用于图片而不适用于声音？
为什么我无法从 bundle 中获得声音？我只能建议一件事 -`imageNamed:`做一些工作来找到正确的文件路径而`dataWithContentsOfFile:`不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:24:29.567

在您的代码中，而不是

```
sound = [NSData dataWithContentsOfFile:path]; 
```

采用

```
NSString * path = [NSString stringWithFormat:@"%@.bundle/sounds/%@", selectedBundle, soundName]; 
NSString *fullPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:path];
sound = [NSData dataWithContentsOfFile:path]; 
```

说明： `ImageNamed`将应用程序的路径附加到您指定的图像名称

# java - 更改 AppEngine DataStore 主键

> ID：11100389
> 
> 赞同：0
> 
> 时间：2012-06-19T11:55:56.583
> 
> 标签：java, google-app-engine, jpa

我正在使用 JPA，对于我拥有的主键：

```
@Id
private String emailAddress; 
```

是否可以更新主键电子邮件地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:02:10.000

尽管这可能会受到支持，但它非常危险，您最好创建一种新的实体并用它替换现有的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:55:19.587

不支持。一点也不。DataNucleus 内部几乎肯定会拒绝这种变化。

# java - 通过 Spring-Social 集成 Facebook

> ID：11100390
> 
> 赞同：0
> 
> 时间：2012-06-19T11:56:00.830
> 
> 标签：java, facebook, spring-social

我尝试配置 facebook 集成。但我没有正确接收 accessToken。我收到空值。记录器向我显示变量 AccesToken 和 UserID 并且它为空。

所以这里是我的配置。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">
    <bean
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="customArgumentResolver" ref="facebookWebArgResolver" />
    </bean>
    <bean id="facebookWebArgResolver"
        class="org.springframework.social.facebook.FacebookWebArgumentResolver">
        <constructor-arg name="apiKey" value="${facebook.appId}"/>
    </bean>
</beans> 
```

这是我的带有 FacebookProvider 和 jsp 页面的回调控制器。

```
@Controller
public class SocialTutorial {
    private static final Logger LOG = Logger.getLogger(SocialTutorial.class);
    @Autowired
    FacebookProvider facebookProvider;

    @RequestMapping(value = "/connect/facebook", method = RequestMethod.POST)
    public String connectAccountToFacebook(@FacebookAccessToken String accessToken, @FacebookUserId String facebookUserId) {
        LOG.error("HERE facebook authnticate:" + accessToken + " And user id:" + facebookUserId);
        return "redirect:/pages/social.jsp";
    }

} 
```

提供者

```
@Repository("facebookProvider")
public class FacebookProvider {
    @Value("${facebook.appId}")
    private String apiKey;// = "240362226072898";
    @Value("${facebook.appSecret}")
    private String appSecret;// = "     ";

    public String getApiKey() {
        return apiKey;
    }

    public void setApiKey(String apiKey) {
        this.apiKey = apiKey;
    }

    public String getAppSecret() {
        return appSecret;
    }

    public void setAppSecret(String appSecret) {
        this.appSecret = appSecret;
    }

    public FacebookTemplate createTemplate(String accesToken) {
        return new FacebookTemplate(accesToken);
    }
} 
```

JSP 页面

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib prefix='c' uri='http://java.sun.com/jstl/core_rt'%>
<%@ taglib prefix="sec"
    uri="http://www.springframework.org/security/tags"%>
<%@ taglib
    uri="http://www.springframework.org/spring-social/facebook/tags"
    prefix="facebook"%>

<%@ page contentType="text/html;charset=UTF-8" language="java"%>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Update Status</title>

<script
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"
    type="text/javascript"></script>

</head>
<body>

    <a href="<c:url value='/j_spring_security_logout'/>">Logout</a>

    <h2>Services</h2>

    <!--  FACEBOOK -->

    <c:if test="${connectedToFacebook}">
    Connected to Facebook as <c:out
            value="${facebookProfile.firstName }" />
        <c:out value="${facebookProfile.lastName }" />
    </c:if>
    <c:if test="${!connectedToFacebook}">

        <%/* Connect to Facebook */ %>

        <form id="fb_signin" action="<c:url value="/connect/facebook" />"
            method="post">
            <div class="formInfo"></div>
            <div id="fb-root"></div>
            <p>
                <fb:login-button perms="email,publish_stream,offline_access"
                    onlogin="$('#fb_signin').submit();" v="2" length="long">Connect to Facebook</fb:login-button>
            </p>
        </form>

        <facebook:init />
    </c:if>

    <br />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:22:39.470

尝试这个。它应该适合你：

```
FacebookConnectionFactory connectionFactory = 
new FacebookConnectionFactory("clientId", "clientSecret");
OAuth2Operations oauthOperations = connectionFactory.getOAuthOperations();
OAuth2Parameters params = new OAuth2Parameters();
params.setRedirectUri("https://my-callback-url");
String authorizeUrl = oauthOperations.buildAuthorizeUrl(GrantType.AUTHORIZATION_CODE, params);
response.sendRedirect(authorizeUrl);

// upon receiving the callback from the provider:
AccessGrant accessGrant = oauthOperations.exchangeForAccess(authorizationCode,      "https://my-callback-url", null);
Connection<Facebook> connection = connectionFactory.createConnection(accessGrant); 
```

有关更多信息，请尝试[此](http://static.springsource.org/spring-social/docs/1.0.x/reference/html/serviceprovider.html)。

# android - 安卓应用慢

> ID：11100391
> 
> 赞同：0
> 
> 时间：2012-06-19T11:56:05.337
> 
> 标签：android, memory

我曾尝试分析我的应用程序，但发现 TraceView 不是那么用户友好，所以我没有找出原因。

我认为这可能是因为我在某处分配了太多内存。因此，在附图中，我每 2 秒收到一次这些消息。这是内存分配错误的迹象吗？

![GC_FOR_MALLOC](../Images/60671f9b8aa357ecae90b38d4fc8ccc0.png)

非常感谢你，

理查德·休斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:04:40.250

不，我认为这不是问题。GC 只是根据其要求释放其内存。

要了解有关内存分配的更多信息，请参阅以下内容：[http](http://codelog.dexetra.com/getting-around-android-memory-blues) ://codelog.dexetra.com/getting-around-android-memory-blues 他们对此进行了精彩的解释。

这也可能是由于您的应用程序中的内存泄漏而发生的。试着找出来。你可以在eclipse中使用MAT（插件），一开始它有点难理解，但是当你使用它时，你就会明白，它是一个非常好的软件，可以在我们的应用程序中查找内存泄漏。

# android - 如何在操作栏中执行此操作（2 个垂直 TextView）

> ID：11100393
> 
> 赞同：0
> 
> 时间：2012-06-19T11:56:07.663
> 
> 标签：android, android-actionbar, actionbarsherlock

它可以在actionbar sherlock中做到这一点吗？我知道如何设置图标而不是垂直布局位置中的 2 textview ..这是一个 Photoshop 图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:01:33.197

您可以在操作栏中添加自定义视图

```
 ActionBar ab =  this.getActionBar();
        if(null!=ab){
            ab.setDisplayShowCustomEnabled(true);
            View cView =getLayoutInflater().inflate(<id>, null);
            ab.setCustomView(cView);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:47:11.970

操作栏具有标题和副标题。如果您同时设置两者，则两者都将出现在彼此之上。

需要注意的一件事是它们将左对齐，这与您的 Photoshop 图像相反（似乎已被删除）。

# python - 无法导入包含 .pyc 文件的包

> ID：11100395
> 
> 赞同：2
> 
> 时间：2012-06-19T11:56:13.017
> 
> 标签：python, importerror, python-import

我有一个文件夹层次结构如下：

```
test\  
  dbtest.py
  lib1\
       __init__.pyc
       lib2\
         test.pyc
         __init__.pyc 
```

在 dbtest.py 我想导入 test.pyc

为此，我写了以下声明：`import lib1.lib2.test`

但是当我尝试执行该代码时，我收到以下错误：

```
ImportError: DLL load failed: The specified module could not be found. 
```

我已经搜索过它并找到了各种替代方法，例如 append to sys path 和 from 关键字，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:09:11.777

几点：

1.  您的`_init_.pyc`文件应该是`__init__.pyc`，但我怀疑这只是一个转录错误，或者您的错误消息会有所不同。

2.  .pyc 文件不能跨 Python 版本移植。例如，Python 2.7 将拒绝运行使用 2.6 创建的 .pyc 文件。

3.  您的错误消息提到了 DLL，但您没有告诉我们有关 DLL 的信息。你有更多信息吗？

# c# - EF 更新事务中的表单视图

> ID：11100399
> 
> 赞同：4
> 
> 时间：2012-06-19T11:56:33.060
> 
> 标签：c#, asp.net, entity-framework, transactions

我想更新事务中的两个表单视图。如果其中一个失败，另一个也应该失败。Formviews 有自己的实体数据源。

```
button1_click(..........)
{
   formview1.updateItem(true);
   formview2.updateItem(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:42:23.427

好的，所以这可能不是世界上最简单的事情。

基本的答案是，是的，你可以做到。如果 updateItem 方法打开数据库连接，代码将与此类似。

```
using (TransactionScope scope = new TransactionScope())
{
    formview1.updateItem(true);
    formview2.updateItem(true);
    scope.Complete();
} 
```

另一方面，如果在调用 updateItem 时连接已经打开，那么您将需要做更多类似的事情

```
using (TransactionScope scope = new TransactionScope())
{
    formview1.Connection.EnlistTransaction(Transcation.Current);
    formview2.Connection.EnlistTransaction(Transcation.Current);
    formview1.updateItem(true);
    formview2.updateItem(true);
    scope.Complete();
} 
```

# c# - 在 .Net 2.0 中转换为通用存储库模式

> ID：11100400
> 
> 赞同：-1
> 
> 时间：2012-06-19T11:56:38.773
> 
> 标签：c#, .net, oop, design-patterns, domain-driven-design

到目前为止，我有以下功能非常有限的图书馆管理系统。

1.  以下代码是否以正确的存储库模式编写？

2.  如果我将其作为 WCF 服务，我应该将 MyOracleReservationRepository 和 MyOracleBookRepository 作为 DataContracts 吗？（业务层会被服务层调用）

3.  您能否提供解释如何使其成为**通用**存储库模式的代码？

代码

```
namespace LibraryBL
{
  public class ReservationManager
  {
    //LibraryDAL.ReservationDAL resDAL = new LibraryDAL.ReservationDAL();
    //LibraryDAL.BookDAL bookDAL = new LibraryDAL.BookDAL();

    LibraryRepository.IReservationRepository reservationRepository;
    LibraryRepository.IBookRepository bookRepository;

    public ReservationManager(LibraryRepository.IReservationRepository resRepositroy, LibraryRepository.IBookRepository bookRepositroy)
    {
        reservationRepository = resRepositroy;
        bookRepository = bookRepositroy;
    }

    public List<LibraryDTO.Reservation> GetAllReservations()
    {

        List<LibraryDTO.Reservation> allReservations = reservationRepository.GetAllReservations();

        //Book object inside allReservations has two values as NULL (author and BookTitile).
        //These values need to be set using foreach loop
        foreach (LibraryDTO.Reservation reservation in allReservations)
        {
            int bookID =reservation.ReservedBook.BookID;
            LibraryDTO.Book book = bookRepository.GetBookByID(bookID);
            reservation.ReservedBook = book;
        }
        return allReservations;
    }

 }
}

namespace LibraryRepository
{
public interface IReservationRepository
{
    List<LibraryDTO.Reservation> GetAllReservations();
}

public interface IBookRepository
{
    LibraryDTO.Book GetBookByID(int bookID);
}

public class MyOracleReservationRepository : IReservationRepository
{
    public List<LibraryDTO.Reservation> GetAllReservations()
    {

        int databaseValueResID1 = 1;
        DateTime databaseValueResDate1 = System.Convert.ToDateTime("1/1/2001");
        int databaseValueResBookID1 = 101;

        List<LibraryDTO.Reservation> reservations = new List<LibraryDTO.Reservation>();

        LibraryDTO.Reservation res = new LibraryDTO.Reservation();
        res.ReservationID = databaseValueResID1;
        res.ReservedDate = databaseValueResDate1;
        res.ReservedBook = new LibraryDTO.Book();
        res.ReservedBook.BookID = databaseValueResBookID1;
        res.ReservedBook.Author = null; //Set as null as we don't have values in Reservation DAL
        res.ReservedBook.BookTitle = null; //Set as null as we don't have values in Reservation DAL

        reservations.Add(res);
        return reservations;
    }
}

public class MyOracleBookRepository : IBookRepository
{
    public LibraryDTO.Book GetBookByID(int bookID)
    {
        LibraryDTO.Book book = null;
        if (bookID == 101)
        {
            book = new LibraryDTO.Book();
            book.BookID = 101;
            book.Author = "First Author";
            book.BookTitle = "Book 1";
        }
        return book;
    }
 }

} 
```

阅读

1.  [为每个对象创建通用存储库与特定存储库的优势？](https://stackoverflow.com/questions/1230571/advantage-of-creating-a-generic-repository-vs-specific-repository-for-each-obje?lq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:10:42.047

您必须学习存储库模式并转换自己并在这里提出问题/问题以获得解决方案。

请通过以下网址供您参考，

[http://www.remondo.net/repository-pattern-example-csharp/](http://www.remondo.net/repository-pattern-example-csharp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:34:32.587

您不能像魔术一样将 DAL“转换”为存储库。

您需要阅读有关此模式的更多信息，并从一开始就开始编写此模式中的代码。

[在 MSDN http://msdn.microsoft.com/en-us/library/ff649690.aspx](http://msdn.microsoft.com/en-us/library/ff649690.aspx)中阅读有关存储库模式的更多信息

# qt - 将 QTabWidget 添加到 QDialog 时出错

> ID：11100405
> 
> 赞同：0
> 
> 时间：2012-06-19T11:56:57.583
> 
> 标签：qt, qt4.8, qtabwidget

我正在尝试创建像..![用户界面](../Images/14e5506b1d999f142a80fc08175ce74b.png)

为此从 QDialog 创建了一个子类并尝试通过 QVBoxLayout 添加 Menubar 和 Tabwidget，我能够成功添加 MenuBar，但是当我添加 Tabwidget ..

```
TabWidget = new QTabWidget();
TabWidget->addTab(new QWidget(),tr("Tab 1"));
VerticalLayout->addWidget(TabWidget); 
```

出现运行时错误，显示为“Microsoft Visual C++ 运行时库此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序支持团队以获取更多信息”，点击确定按钮。

当我使用调试器时，它会给出错误“收到信号，劣质停止，因为它收到了来自操作系统的信号”

有人可以帮我解决这个问题吗？

我在 win 7 的 Qt Creator 2.4.1 中使用 Qt 4.8.1

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:48:48.387

明白了...这是我的错误，没有调用初始化 TabWidget 对象的方法。

# xml - 如何使用 XML 进行数据通信

> ID：11100410
> 
> 赞同：2
> 
> 时间：2012-06-19T11:57:12.170
> 
> 标签：xml

我的任务是将模拟工具的数据通信的现有 ASCII 格式转换为 XML 格式。XML 或先前的 ASCII 数据包含服务器计算任务所需的数据库信息和其他参数。

使用 JAXB ，我设法填充了所需的数据。当我编组它时，我可以看到模式定义的 XML 结构。

```
item item1 = new item();

Parameter par1 = new Par1();
par1.setName("DatabaseNr);
par1.setContent("1500");

------Marshalling---------

Marshaller mar = context.createMarshaller();
mar.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

----Printing----

<Item >
    <Parameter Name="databaseNr">1500</Parameter>
    <Parameter Name="pressure"></Parameter>
    <Parameter Name="time"></Parameter>
</Item> 
```

我的问题是如何从非常大的 XML 中找到最重要的信息（如数据库编号）以进行进一步的步骤？这是我需要解析的地方吗？感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:16:38.743

You appear to be using your [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) implementation with a very generic object structure. It would be easier to navigate if you had a more domain specific model such as the following:

**Item**

```
package forum11100410;

import java.util.Date;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlType(propOrder={"databaseNr", "time", "pressure"})
public class Item {

    private int databaseNr;
    private int pressure;
    private Date time;

    public int getDatabaseNr() {
        return databaseNr;
    }

    public void setDatabaseNr(int databaseNr) {
        this.databaseNr = databaseNr;
    }

    public int getPressure() {
        return pressure;
    }

    public void setPressure(int pressure) {
        this.pressure = pressure;
    }

    public Date getTime() {
        return time;
    }

    public void setTime(Date time) {
        this.time = time;
    }

} 
```

**Demo**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<item>
    <databaseNr>1500</databaseNr>
    <pressure>1</pressure>
    <time>2012-06-19T09:16:35.666-04:00</time>
</item> 
```

**Output**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<item>
    <databaseNr>1500</databaseNr>
    <pressure>1</pressure>
    <time>2012-06-19T09:16:35.666-04:00</time>
</item> 
```

# c# - MSChart 具有不同数据开始时间的多个实时数据系列

> ID：11100416
> 
> 赞同：0
> 
> 时间：2012-06-19T11:57:21.780
> 
> 标签：c#, windows, winforms, c#-4.0, mschart

我正在使用 MS Chart，并在同一图表区域显示 3 个系列（样条线和阶梯线）。图表中的数据是实时的，每个系列每秒都会获得几次新的数据点。

系列 3 首先开始获取数据，在系列 2 和 1 之前，我希望当系列 2 和 1 开始获取数据时（从系列 3 延迟 10 秒~），第一个元素/点将显示在同一条垂直线上在系列 3 的最后一个元素/点所在的图表区域上，而不是从图表区域的开头（左侧，X = 0），作为默认值。

因此，如果系列 3 已经有 100 个点并且现在系列 2 和 1 开始，它们从系列 3 的第 100 个元素/点所在的相同“X 位置”（在聊天区域轴上）开始。

这是一个演示默认状态和我愿意做的图像：

![](../Images/e67e278ccf757f6fbfc50f817b25f731.png)

知道怎么做吗？

# iphone - 使用 AVFoundation 保存视频

> ID：11100417
> 
> 赞同：1
> 
> 时间：2012-06-19T11:57:24.087
> 
> 标签：iphone, ios, cocoa, avfoundation, video-recording

我正在将 AVFoundation 用于“应用内”摄像机。我实际上可以在 UIView 中录制视频`AVCaptureSession`，但我正在寻找一种方法将这些视频保存在我的 iPad 中的某个位置（专辑、文档文件夹......）。

我试过使用：

```
AVCaptureMovieFileOutput
AVCaptureDeviceInput 
```

但仍然无法正常工作。有没有其他方法可以保存由 录制的视频`AVCaptureSession`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:11:34.620

```
NSString *docPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/yourrecoredfile"];
[dataFile writeToFile:docPath 
          atomically:YES 
            encoding:NSUTF8StringEncoding 
               error:NULL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-30T12:26:01.177

如果您不想要带有我用于提示的选择器的 obj c 方法，则可以使用 nil。

```
 func fileOutput(_ output: AVCaptureFileOutput, didFinishRecordingTo outputFileURL: URL, from connections: [AVCaptureConnection], error: Error?) {

    if (error != nil) {
        print("Error recording movie: \(error!.localizedDescription)")
    } else {

        UISaveVideoAtPathToSavedPhotosAlbum(outputFileURL.path, nil, #selector(CameraController.video(_:didFinishSavingWithError:contextInfo:)), nil)

    }
    outputURL = nil

} 
```

# php - wordpress 多分类列表

> ID：11100418
> 
> 赞同：1
> 
> 时间：2012-06-19T11:57:47.660
> 
> 标签：php, wordpress, drop-down-menu, taxonomy

大家好，有一个小插件叫做

> 下拉自定义分类

[但它在我的测试http://sibzal.ru/](http://sibzal.ru/)上一次搜索一个参数示例链接 有什么方法可以使其搜索顺序/同时进行，就像我收集所有需要的参数然后`submit`像这里[http://mchome.com 一样。 mx/propiedades/](http://mchome.com.mx/propiedades/)他们要查询或我应该如何以及在哪里插入`relation => AND` 是插件代码

```
`

function the_dropdown_taxonomy($taxonomy) {
  $id = "{$taxonomy}-dropdown";
  $js =<<<SCRIPT
<script type="text/javascript">
 jQuery(document).ready(function($){
  $("select#{$id}").change(function(){
    window.location.href = $(this).val();
  });
 });
</script>
SCRIPT;
  echo $js;
  $terms = get_terms($taxonomy);
  echo "<select name=\"{$id}\" id=\"{$id}\">";
  echo '<option value="#"> - Выбрать - </option>';
  foreach($terms as $term) {
    echo '<option value="';
    echo get_term_link(intval($term->term_id),$taxonomy);
    echo '">' . "{$term->name}</option>";
  }
  echo "</select>";
  }

add_action('init','jquery_init');
function jquery_init() {
  wp_enqueue_script('jquery');
}
?>
` 
```

这是我当前的显示代码

```
`

<div id="browselist" class="clearfix">
<h3 class="sidetitle"> Подобрать помещение</h3>
<p class="listin"><span>Город</span><br/><?php the_dropdown_taxonomy('city'); ?></p>
<p class="listin"><span>Район</span><br/><?php the_dropdown_taxonomy('location'); ?></p>
<p class="listir"><span>Тип помещения</span><br/><?php the_dropdown_taxonomy('property'); ?></p>
<p class="listin"><span>Площадь в м2</span><br/><?php the_dropdown_taxonomy('area'); ?></p>
<p class="listir"><span>Вместимость (чел.)</span><br/><?php the_dropdown_taxonomy('capacity'); ?></p>
<p class="listir"><span>Ценовой диапазон</span><br/><?php the_dropdown_taxonomy('range'); ?></p>
</div>
` 
```

# sql - DELETE FROM table WHERE var = value 不删除条目

> ID：11100419
> 
> 赞同：1
> 
> 时间：2012-06-19T11:57:52.200
> 
> 标签：sql, ms-access

所以我通过 c# 从 mdb 文件中获取了一些数据

```
"SELECT * FROM " + listBox1.GetItemText(listBox1.SelectedItem) + " WHERE Note = '" + listBox2.GetItemText(listBox2.SelectedItem).Replace("'","\'") + "'"; 
```

选择正确的数据，这里是

```
SELECT * FROM Main WHERE Note ='Hello' 
```

mdb 数据结构看起来像这样被绘制为 CSV 文件：

```
"Record ID";Status;Placement;Private;Category;Note;Blob
14341665;4;2147483647;True;3;"""Hello"" - Neues 
```

但是当我尝试删除条目时

```
"DELETE FROM " + listBox1.GetItemText(listBox1.SelectedItem) + " WHERE \"Record ID\" LIKE '" + dr[0] + "';"; 
```

或者

```
"DELETE FROM " + listBox1.GetItemText(listBox1.SelectedItem) + " WHERE \"Record ID\" = '" + dr[0] + "';"; 
```

例如，这看起来像

```
DELETE FROM Main WHERE "Record ID" LIKE '14341665'; 
```

条目只是留在那里。我可以重新运行 select 命令，甚至重新启动我的应用程序，mdb 没有改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:00:15.400

记录 ID 是数字字段吗？如果是这样，请丢失引号。

```
DELETE FROM Main WHERE [Record ID] = 14341665; 
```

请注意，字段（列）名称中的空格始终是个问题。这样的列名必须用方括号括起来，用保留字命名的列也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:03:00.373

记录 id 是数字，所以不要在它周围加上撇号：

```
"DELETE FROM " + listBox1.GetItemText(listBox1.SelectedItem) + " WHERE \"Record ID\" = " + dr[0] 
```

注意：您应该避免`select *`在生产代码中使用，您应该指定要返回的数据。此外，您应该使用参数化查询而不是将值连接到查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:01:28.190

如果我没记错的话，“like”仅适用于字符串数据，请检查记录 ID 的数据类型。

如果记录 ID 是数字，您可能需要使用数据库的转换函数将其转换为字符串，然后再使用“like”进行过滤。

顺便说一句，请记住确保正确转义 dr[0]。

# android - 用于增加和减少值的 ui ... 就像 android 中的 datepicker

> ID：11100422
> 
> 赞同：0
> 
> 时间：2012-06-19T11:58:03.603
> 
> 标签：android, user-interface, datepicker

我想在android中做这样的事情

![值选择器](../Images/3c20b9b35d971e933d8ebcb88b021445.png)

这是日期选择器的一部分，所以我如何提取它以仅使用值选择器。

如果不适合这样做，请告诉我任何替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:53:46.113

参考链接

[http://www.quietlycoding.com/?p=5](http://www.quietlycoding.com/?p=5)

[http://www.technologichron.net/?p=42](http://www.technologichron.net/?p=42)

类似的问题在这里问

[Android 号码选择器对话框](https://stackoverflow.com/questions/3359510/android-number-picker-dialog)

[Android 对话框编号选择器](https://stackoverflow.com/questions/7633343/android-dialog-number-picker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:28:08.167

标准的 android NumberPicker 小部件看起来完全一样。不幸的是，它仅适用于 Android 3.0 及更高版本，因此如果您针对的是早期版本，则需要使用库。

可以在[此处](http://developer.android.com/reference/android/widget/NumberPicker.html)找到 android 版本的文档。

由于其他人已经向您指出了可能的库，我不会在这里重复。我将向您展示如何使用适用于 Android 3.0+ 的标准 NumberPicker。

在您的 xml 布局中（将宽度设置为 100 dip 允许使用三位数，根据您的需要进行调整）：

```
<NumberPicker
    android:id="@+id/numberpicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:width="100dip" /> 
```

在您的代码中：

```
NumberPicker np = (NumberPicker) findViewById(R.id.numberpicker);  // get the widget
np.setMaxValue(10);                                                 // set the max value
np.setMinValue(0);                                                 // set the min value
np.setValue(5);                                                    // set initail display value
np.setWrapSelectorWheel(true);                                     // start over when reaching top or bottom 
```

以及它的截图：

![在此处输入图像描述](../Images/6a4517571407a6a467e34be413c81319.png)

# android - 以编程方式将文本添加到android中的图像

> ID：11100428
> 
> 赞同：14
> 
> 时间：2012-06-19T11:58:19.940
> 
> 标签：android, user-interface, text, imageview, tablelayout

我想制作一个应用程序，就像 android 的打开屏幕一样。我正在将图像动态添加到 tableLayout 的行中。我只在 xml 文件中定义了 tableLayout，其余代码在 java 中。我已成功添加图像，但在设置该图像的文本（我想在图像下显示文本）和图像为特定填充方面没有任何帮助。如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-19T12:08:26.343

使用以下函数在图像上写入文本：

```
private BitmapDrawable writeTextOnDrawable(int drawableId, String text) {

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId)
            .copy(Bitmap.Config.ARGB_8888, true);

    Typeface tf = Typeface.create("Helvetica", Typeface.BOLD);

    Paint paint = new Paint();
    paint.setStyle(Style.FILL);
    paint.setColor(Color.WHITE);
    paint.setTypeface(tf);
    paint.setTextAlign(Align.CENTER);
    paint.setTextSize(convertToPixels(mContext, 11));

    Rect textRect = new Rect();
    paint.getTextBounds(text, 0, text.length(), textRect);

    Canvas canvas = new Canvas(bm);

    //If the text is bigger than the canvas , reduce the font size
    if(textRect.width() >= (canvas.getWidth() - 4))     //the padding on either sides is considered as 4, so as to appropriately fit in the text
        paint.setTextSize(convertToPixels(mContext, 7));        //Scaling needs to be used for different dpi's

    //Calculate the positions
    int xPos = (canvas.getWidth() / 2) - 2;     //-2 is for regulating the x position offset

    //"- ((paint.descent() + paint.ascent()) / 2)" is the distance from the baseline to the center.
    int yPos = (int) ((canvas.getHeight() / 2) - ((paint.descent() + paint.ascent()) / 2)) ;  

    canvas.drawText(text, xPos, yPos, paint);

    return new BitmapDrawable(getResources(), bm);
}

public static int convertToPixels(Context context, int nDP)
{
    final float conversionScale = context.getResources().getDisplayMetrics().density;

    return (int) ((nDP * conversionScale) + 0.5f) ;

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-19T12:21:27.227

相反，您可以做的是使用 RelativeLayout 将 TextView 叠加到 ImageView :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-16T17:21:08.530

这是 Kotlin 版本 Arun 的[解决方案](https://stackoverflow.com/a/11100582/706387)：

```
import org.jetbrains.anko.dip

fun Context.writeTextOnDrawable(drawableId: Int, text: String) =
        DrawableUtil.writeTextOnDrawableInternal(this, drawableId, text, 25, -2, 0)

object DrawableUtil {

    fun writeTextOnDrawableInternal(context: Context, drawableId: Int, text: String,
            textSizeDp: Int, horizontalOffset: Int, verticalOffset: Int): BitmapDrawable {

        val bm = BitmapFactory.decodeResource(context.resources, drawableId)
                .copy(Bitmap.Config.ARGB_8888, true)

        val tf = Typeface.create("Helvetica", Typeface.BOLD)

        val paint = Paint()
        paint.style = Paint.Style.FILL
        paint.color = Color.WHITE
        paint.typeface = tf
        paint.textAlign = Paint.Align.LEFT
        paint.textSize = context.dip(textSizeDp).toFloat()

        val textRect = Rect()
        paint.getTextBounds(text, 0, text.length, textRect)

        val canvas = Canvas(bm)

        //If the text is bigger than the canvas , reduce the font size
        if (textRect.width() >= canvas.getWidth() - 4)
            //the padding on either sides is considered as 4, so as to appropriately fit in the text
            paint.textSize = context.dip(12).toFloat()

        //Calculate the positions
        val xPos = canvas.width.toFloat()/2 + horizontalOffset  

        //"- ((paint.descent() + paint.ascent()) / 2)" is the distance from the baseline to the center.
        val yPos = (canvas.height / 2 - (paint.descent() + paint.ascent()) / 2) + verticalOffset

        canvas.drawText(text, xPos, yPos, paint)

        return BitmapDrawable(context.resources, bm)
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-26T17:17:17.843

我成功实现了在图像上添加文本的问题。看看下面的代码。首先将一个视图作为该布局中的相对布局在该 EditText 和该按钮之后获取 ImageView。给每个人一个id。下面写一个 loadBitmapFromView 函数。

```
public Bitmap loadBitmapFromView(View v) {
        Bitmap b = Bitmap.createBitmap(v.getWidth(), v.getHeight(), Config.ARGB_8888);
        Canvas c = new Canvas(b);
        v.layout(v.getLeft(), v.getTop(), v.getRight(), v.getBottom());
        v.draw(c);
        return b;
    } 
```

并单击按钮。

```
 Bitmap bitmap = loadBitmapFromView(relativeLayout);
                File dir = new File(Environment.getExternalStorageDirectory().getAbsolutePath(),         "folderName");
                if (!dir.exists())
                    dir.mkdirs();

                File file = new File(dir, "capture.jpg");
                try {
                    FileOutputStream fos = new FileOutputStream(file);
                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos);
                    imageView.setImageBitmap(bitmap);    
                } catch (Exception e) {
                    Log.e("ExpressionEditImageActivity", "Error, " + e);
                } 
```

享受...

有关更多参考，请参阅以下屏幕截图： [![在此处输入图像描述](../Images/82dc742f83f68defa1e201af8ba41104.png)](https://i.stack.imgur.com/KE7Ig.jpg)

# ajax - 是否可以在 grails 中进行 ajax 调用时将 json 数据呈现为 javascript 变量？

> ID：11100432
> 
> 赞同：0
> 
> 时间：2012-06-19T11:58:38.240
> 
> 标签：ajax, grails, gsp

是否可以在 grails 中进行 ajax 调用时将 json 数据呈现为 javascript 变量？

我正在使用[submitToRemote](http://grails.org/doc/latest/ref/Tags/submitToRemote.html)以便从我的 grails 视图对我的 grails 控制器中的操作进行 ajax 调用。该操作返回一个 json 变量/值。我需要将此值分配给一个 javascript 变量，以便在我的网页上进一步使用。这有可能实现吗？任何线索都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:27:32.853

您可以使用`onSuccess`回调`submitToRemote`来读取请求的结果并将它们传递给 javascript 变量。

```
<script type="text/javascript">
    function passResult(result) {
        yourVariable = result.responseText      
    }
</script>

<g:form action="show">
    Login: <input name="login" type="text" />
    <g:submitToRemote update="updateMe" onSuccess="passResult(result)"/>
</g:form>

<div id="updateMe">this div will be updated with the form submit response</div> 
```

上面的代码未经测试，但应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:19:45.343

`submitToRemote`具有`onSuccess`可用于检索 json 数据的选项。从文档：

> onSuccess (可选) - 成功时调用的 JavaScript 函数

[在这篇博](http://blogs.bytecode.com.au/glen/2008/12/06/a-cute-tinyurl-codec.html)文中可以看到如何做到这一点的一个例子。

# lua - 如何在 Lua-C API 5.2 中创建类对象？

> ID：11100435
> 
> 赞同：11
> 
> 时间：2012-06-19T11:58:48.240
> 
> 标签：lua

我使用 Lua 5.2 的 Lua-C API 用 Lua 包装了一个 C 函数：

```
#include <lua.h>
#include <lauxlib.h>
#include <stdlib.h>
#include <stdio.h>

int foo_gc();
int foo_index();
int foo_newindex();
int foo_dosomething();
int foo_new();

struct foo {
  int x;
};

static const luaL_Reg _meta[] = {
    {"__gc", foo_gc},
    {"__index", foo_index},
    {"__newindex", foo_newindex},
    { NULL, NULL }
};
static const luaL_Reg _methods[] = {
    {"new", foo_new},
    {"dosomething", foo_dosomething},
    { NULL, NULL }
};

int foo_gc(lua_State* L) {
  printf("## __gc\n");
  return 0;
}
int foo_newindex(lua_State* L) {
  printf("## __newindex\n");
  return 0;
}
int foo_index(lua_State* L) {
  printf("## __index\n");
  return 0;
}
int foo_dosomething(lua_State* L) {
  printf("## dosomething\n");
  return 0;
}
int foo_new(lua_State* L) {
  printf("## new\n");

  lua_newuserdata(L,sizeof(Foo));
  luaL_getmetatable(L, "Foo");
    lua_setmetatable(L, -2); 

  return 1;
}

void register_foo_class(lua_State* L) {
    luaL_newlib(L, _methods); 
  luaL_newmetatable(L, "Foo");
  luaL_setfuncs(L, _meta, 0);
  lua_setmetatable(L, -2);
  lua_setglobal(L, "Foo");
} 
```

当我运行这个 Lua 时：

```
local foo = Foo.new()
foo:dosomething() 
```

...我看到这个输出（有错误）：

```
## new
## __index
Failed to run script: script.lua:2: attempt to call method 'dosomething' (a nil value) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T20:57:57.003

好的，让它工作。我不得不添加`__index`and`__metatable`到`Foo`新的元表中，如下所示：

```
void register_foo_class(lua_State* L) {
  int lib_id, meta_id;

  /* newclass = {} */
  lua_createtable(L, 0, 0);
  lib_id = lua_gettop(L);

  /* metatable = {} */
  luaL_newmetatable(L, "Foo");
  meta_id = lua_gettop(L);
  luaL_setfuncs(L, _meta, 0);

  /* metatable.__index = _methods */
  luaL_newlib(L, _methods);
  lua_setfield(L, meta_id, "__index");  

  /* metatable.__metatable = _meta */
  luaL_newlib(L, _meta);
  lua_setfield(L, meta_id, "__metatable");

  /* class.__metatable = metatable */
  lua_setmetatable(L, lib_id);

  /* _G["Foo"] = newclass */
  lua_setglobal(L, "Foo");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T00:40:23.343

我尝试回复您的解决方案，但显然我还没有这样做的声誉，所以这里有一个单独的答案。

您的解决方案非常好，但它不允许我想做的事情：对对象进行“类似数组”的访问并且仍然具有函数。看看这个 Lua 代码：

```
Foo = {}

mt = {
__index = function(table, key)
  print("Accessing array index ", tostring(key), "\n")
  return 42
end
}
setmetatable(Foo, mt)

Foo.bar = function()
  return 43
end

print(tostring(Foo[13]), "\n")
print(tostring(Foo.bar()), "\n")

--[[
Output:
Accessing array index 13
42
43
]]-- 
```

使用您的解决方案注册一个类似乎不允许这样做，因为该`__index`条目已被覆盖。在一个类上同时拥有数组访问和函数访问可能没有意义，但为了简单起见（提供一个 C 函数来注册这两种类型的类），我想在任何地方使用相同的代码。有谁知道如何绕过这个限制，以便我可以从 C 创建一个类，它既有函数 Foo.bar() 又有 Foo[13]？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-07T00:36:57.247

以下是我如何同时满足您和 j_schultz 的标准

```
#include <lua.h>
#include <lauxlib.h>
#include <stdlib.h>
#include <stdio.h>

#define LUA_FOO "Foo"

typedef struct {
    int x;
} Foo;

static int foo_gc(lua_State *L) {
    printf("## __gc\n");
    Foo *foo = *(Foo**)luaL_checkudata(L, 1, LUA_FOO);
    free(foo);
    return 0;
}

static int foo_doSomething(lua_State *L) {
    printf("## doSomething\n");
    Foo *foo = *(Foo**)luaL_checkudata(L, 1, LUA_FOO);
    lua_pushinteger(L, foo->x);
    return 1;
}

static int foo_new(lua_State* L) {
    printf("## new\n");
    Foo *foo = malloc(sizeof(Foo));
    int i = 1 + lua_istable(L, 1);
    foo->x = !lua_isnoneornil(L, i) ? luaL_checkinteger(L, i) : 0;
    *(Foo**)lua_newuserdata(L, sizeof(Foo*)) = foo;
    luaL_setmetatable(L, LUA_FOO);
    return 1;
}

static int foo_index(lua_State *L) {
    printf("## index\n");
    int i = luaL_checkinteger(L, 2);
    lua_pushinteger(L, i);
    return 1;
}

int luaopen_foo(lua_State *L) {
    // instance functions
    static const luaL_Reg meta[] =
    {   { "__gc"        ,foo_gc          },
        { NULL          ,NULL            }  };
    static const luaL_Reg meth[] =
    {   { "doSomething" ,foo_doSomething },
        { NULL          ,NULL            }  };
    luaL_newmetatable(L, LUA_FOO);
    luaL_setfuncs    (L, meta, 0);
    luaL_newlib      (L, meth);
    lua_setfield     (L, -2, "__index");
    lua_pop          (L, 1);

    // static functions
    static const luaL_Reg static_meta[] =
    {   { "__index" ,foo_index },
        { "__call"  ,foo_new   },
        { NULL      ,NULL      }  };
    static const luaL_Reg static_meth[] =
    {   { "new"     ,foo_new   },
        { NULL      ,NULL      }  };
    luaL_newlib      (L, static_meth);
    luaL_newlib      (L, static_meta);
    lua_setmetatable (L, -2);
    return 1;
} 
```

卢阿代码：

```
local Foo = require('foo')
local foo = Foo.new(12)
local bar = Foo(24)

print(Foo[13])
print(foo:doSomething())
print(bar:doSomething()) 
```

卢阿输出：

```
## new
## new
## index
13
## doSomething
12
## doSomething
24
## __gc
## __gc 
```

# c++ - 特定位大小的 C++ 指针

> ID：11100443
> 
> 赞同：5
> 
> 时间：2012-06-19T11:59:17.160
> 
> 标签：c++, pointers, struct, bit-fields

我的问题是关于指向奇数大小的内存块。

假设我有一个`struct`这样的声明：

```
typedef struct{
   int32 val1  : 29; 
   int32 val2  : 26;
   char  val3;
}MyStruct; 
```

让我们假设在结构中声明特定的位字段是可取的（为什么我们要使用位字段不是问题）。

如果我想声明一个指向这些字段之一的指针，我可能会尝试这样的事情：

```
MyStruct test;
int32 *myPtr = &(test.val1); 
```

除了这会产生错误“*不允许获取位域的地址*”。

假设我们想要，有没有办法以这种方式指向这些字段？我知道 C++ 可能会将字段填充到下一个字节（在本例中为 32 位）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T12:02:34.663

在 C++ 中，最小的可寻址值必须具有至少 1 个字节的大小。所以不，你不能用指针获取位域的地址。

**C++03 标准 9.6 位域：**
**第 3 段：**

> ...地址运算符& 不应应用于位域，因此没有指向位域的指针。……

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T12:14:54.220

> 除了这会产生错误“不允许获取位字段的地址”。

标准明确不允许这样做。参见**[class.bit]** 9.6/3：

> 地址运算符 & 不应应用于位域，因此没有指向位域的指针。

一个字节（`CHAR_BIT`位宽，`CHAR_BIT`至少为 8）是您可以寻址的最小值。

> 假设我们想要，有没有办法以这种方式指向这些字段？

不，你可以有一个指向封闭`struct`类型对象的指针。这是从 C 中直接继承的；请参阅[C 常见问题解答 2.26](http://c-faq.com/struct/bitfields.html)：

> 当您还希望能够将某些位集合作为一个整体进行操作（可能是复制一组标志）时，位域很不方便。

您可能想查看其他替代方案，例如`std::bitset`or [`boost::dynamic_bitset`](http://www.boost.org/doc/libs/1_36_0/libs/dynamic_bitset/dynamic_bitset.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:44:04.303

没有办法获得指向位域的指针。但是，如果您愿意自己实现一个等效结构，使用移位和掩码，您应该能够在其中定义一个智能指针。就像是：

```
class BitFieldPointer
{
    unsigned* myData;
    unsigned  myMask;
    unsigned  myShift;

    class DereferenceProxy
    {
        BitFieldPointer const* myOwner;
    public:
        DereferenceProxy(BitFieldPointer const* owner) : myOwner( owner ) {} operator unsigned() const
        {
            return (*myOwner->myData && myOwner->myMask) >> myOwner->myShift;
        }

        void operator=( unsigned new_value ) const
        {
            *myData = (*myOwner->myData && ~myOwner->myMask) |
                    ((new_value << myOwner->myShift) && myOwner->myMask);
        }
    };
public:
    //  ...
    DereferenceProxy operator*() const
    {
        return DereferenceProxy(this);
    }
}; 
```

（这只是一个粗略的想法。您可能需要一个指针和一个指向 const 的指针，代理的生命周期与其所有者的生命周期可能是一个问题。）

# java - 最后日期未在 org.joda.time.LocalDate 中打印？

> ID：11100449
> 
> 赞同：0
> 
> 时间：2012-06-19T11:59:44.227
> 
> 标签：java, jodatime

这是我在两个日期之间打印的代码，它不包括星期六和星期日，但这个不打印给定月份的最后一个日期。

```
import org.joda.time.DateTimeConstants;
import org.joda.time.LocalDate;

public class DatesexcludingWeekend {
    public static void main(String[] args) {
        final LocalDate start = new LocalDate(2012, 05, 1);
        final LocalDate end = new LocalDate(2012, 05, 31);
        LocalDate weekday = start;
        if (start.getDayOfWeek() == DateTimeConstants.SATURDAY|| start.getDayOfWeek() == DateTimeConstants.SUNDAY) {
            weekday = weekday.plusWeeks(1).withDayOfWeek(DateTimeConstants.MONDAY);
        }

        while (weekday.isBefore(end)) {
            String dateValues[] = weekday.toString().split("-");
            //System.out.println(dateValues[2]+"/"+dateValues[1]+"/"+dateValues[0]);
            String date=dateValues[2]+"/"+dateValues[1]+"/"+dateValues[0];
            System.out.println("date : "+date);
            if (weekday.getDayOfWeek() == DateTimeConstants.FRIDAY)
                weekday = weekday.plusDays(3);
            else
                weekday = weekday.plusDays(1);
        }
    }
} 
```

这是上面代码的输出：

```
date : 01/05/2012
date : 02/05/2012
date : 03/05/2012
date : 04/05/2012
date : 07/05/2012
date : 08/05/2012
date : 09/05/2012
date : 10/05/2012
date : 11/05/2012
date : 14/05/2012
date : 15/05/2012
date : 16/05/2012
date : 17/05/2012
date : 18/05/2012
date : 21/05/2012
date : 22/05/2012
date : 23/05/2012
date : 24/05/2012
date : 25/05/2012
date : 28/05/2012
date : 29/05/2012
date : 30/05/2012 
```

如果你看到这`31-05/2012`没有被打印出来

请帮我解决这个问题。

问候托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:02:25.443

那是因为你说：

```
while (weekday.isBefore(end)) 
```

如果要包括最后一天，则有两种选择：

1.  将结束设置为目标日期后的一天（保持`while`原样）

2.  改变`while`条件。

另一种 while 条件是这样的：

```
while (weekday.isBefore(end) || weekday.equals(end)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:03:33.340

我认为问题出在您的 while 循环中：

```
weekday.isBefore(end) 
```

`31/05/2012`不只是之前`end`- 它们是相等的日期

请参阅[javadoc](http://joda-time.sourceforge.net/apidocs/org/joda/time/base/AbstractPartial.html#isBefore%28org.joda.time.ReadablePartial%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T12:03:58.423

我怀疑是因为你用过

```
while (weekday.isBefore(end)) 
```

2012 年 5 月 31 日不在 2012 年 5 月 31 日之前。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T12:05:14.413

日子`2012, 05, 31`不早了`2012, 05, 31`。

尝试更改`weekday.isBefore(end)`为`!end.isBefore(weekday)`

# jsf - 从 ${SPRING_SECURITY_LAST_EXCEPTION.message} 到 FacesMessage？

> ID：11100454
> 
> 赞同：0
> 
> 时间：2012-06-19T12:00:20.327
> 
> 标签：jsf, spring-security, primefaces

有人知道如何将 Spring Security **${SPRING_SECURITY_LAST_EXCEPTION.message}** “翻译/覆盖”成**JSF FacesMessage**，以便在 PrimeFaces **p:growl**组件中显示它吗？

**可以用JavaScript**代码做到这一点吗？

这是一些代码：

```
<h:form id="loginForm" prependId="false">
    <p:panel id="panelLogin">

        <h:panelGrid columns="2">
            <h:outputLabel for="j_username" value="User" />
            <p:inputText id="j_username" required="true" label="Username" name="j_username" />

            <h:outputLabel for="j_password" value="Pwd" />
            <p:password id="j_password" required="true" label="Password" />

        </h:panelGrid>

        <p:commandButton value="GO!" ajax="false"
            onclick="document.loginForm.action='#{request.contextPath}/j_spring_security_check';document.loginForm.method='post';" />

    </p:panel>
</h:form>           

<!-- This works: -->
<c:if test="${not empty param.login_error}">
    <h:outputText value="${SPRING_SECURITY_LAST_EXCEPTION.message}" />
</c:if>

<!-- Target component to show FacesMessages -->
<p:growl id="loginGrowl" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:29:04.223

我自己这样做：

```
<c:if test="${not empty param.login_error}">
    <p:growl>
        <f:event type="preRenderComponent" listener="#{GrowlCtrl.preRender}" />
        <f:attribute name="error" value="${SPRING_SECURITY_LAST_EXCEPTION.message}"/>
    </p:growl>
</c:if>

public class GrowlCtrl implements Serializable {

    public void preRender(ComponentSystemEvent cse) throws AbortProcessingException {
        Map<String, Object> atributos = cse.getComponent().getAttributes();
        String error = (String)atributos.get("error");
        if (error != null && !"".equals(error)) {
            FacesContext facesContext = FacesContext.getCurrentInstance();
            facesContext.addMessage("", new FacesMessage(error));
        }
    }

} 
```

# linux - 根据编号将名称中带有数字的文件中的数据解析为单个文件

> ID：11100455
> 
> 赞同：0
> 
> 时间：2012-06-19T12:00:20.670
> 
> 标签：linux, parsing, sed, naming

我有一个包含强制力的文件列表作为唯一的编号，如下所示。

```
Force1.txt
Force2.txt
Force3.txt
Force4.txt 
Force5.txt
. . .
. . . 
. . .
Force100.txt 
```

我想以相同的顺序将所有这些力放在文件中。但是，当我使用以下命令将它们排列在单个文件中时。

```
sed -n '/^[0-9.]*$/w Result.txt' Force*.k 
```

我的意思是上述文件的输入按以下顺序列在输出文件中 -

```
Force1.txt
Force10.txt
Force2.txt
Force3.txt
Force4.txt 
Force5.txt
. . .
. . . 
. . .
Force99.txt 
```

问题是linux用这个命令按顺序收集数据，而不是按照数量的优先级。对此有何建议？

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:24:49.507

在“e”上拆分并按“列”二中的数字排序：

```
ls Force*.txt | sort -n -k 2 -t 'e' |xargs cat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:11:04.943

最简单的一种，虽然不是最有效的：

```
for i in `seq 100`; do ls Force$i.txt; done 
```

# codeigniter - HMVC 与 hybridauth codeigniter 扩展的集成

> ID：11100456
> 
> 赞同：0
> 
> 时间：2012-06-19T12:00:27.190
> 
> 标签：codeigniter, hmvc, hybridauth

我正在做一个项目，我正在使用 codeigniter 的 HMVC & hybridauth 扩展。HMVC 工作正常。但是我在运行 hybridauth 扩展时遇到了问题。在对 hybridauth 进行初始设置后，当我运行它时，会显示以下两个错误：

> ```
> A PHP Error was encountered
> 
> Severity: Notice
> 
> Message: Undefined property: CI::$hybridauthlib
> 
> Filename: MX/Loader.php
> 
> Line Number: 165
> 
> A PHP Error was encountered
> 
> Severity: Warning
> 
> Message: Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\SADD_contest\system\core\Exceptions.php:185)
> 
> Filename: Hybrid/Auth.php
> 
> Line Number: 354 
> ```

我认为第二个错误是由于第一个错误造成的。hybridauth 库与 MX_controller 不兼容吗？我是这两个图书馆的新手。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:41:06.427

你可以在这个 url [Hybrid Auth with](https://stackoverflow.com/questions/10422573/hybrid-auth-with-codeigniter) Codeigniter 查看我的答案，这是我用于 hybridauth 和 HMVC 的代码。

# ajax - jQuery -- 可变字符串打印为一个单词

> ID：11100458
> 
> 赞同：0
> 
> 时间：2012-06-19T12:00:35.803
> 
> 标签：ajax, jquery

我正在编写一些 jquery 来获取一组 xml 文件。然后它将遍历这些并解析它们以在页面上显示它们。我有这个工作但我想做的一件事是在它列出内容之前，我希望它打印文件的名称。这是我的代码。

```
$.get('inc/getMenuFiles.php', function(data) {
    var catSplit = data.split(",");
    var menuitems = $('.menuitems');
    menuitems.empty();

    for (i=2; i<catSplit.length; i++) {

        url = "inc/menulists/" +catSplit[i].replace(/"/g, '').replace(/]/g, '');
        catName = catSplit[i].replace(/"/g, '').replace(/.xml/g, '').replace(/]/g, '');

        menuitems.append(catName);

        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: function(xml) {
                $(xml).find('item').each(function(){
                    var name =  $(this).find('name').text();
                    var price = $(this).find('price').text();
                    menuitems.append(name + " - $" +price + "<br />");
                });
            }
        });
    }
}); 
```

这是无效的，但如果我这样做，它会起作用

```
$.ajax({
                type: "GET",
                url: url,
                async: true,
                dataType: "xml",
                success: function(xml) {
                    $(xml).find('item').each(function(){
                        var name = $(this).find('name').text();
                        var price = $(this).find('price').text();
                        menuitems.append(name + " - $" +price + "<br />");
                    });
                }
            }).delay(); 
```

所以我想我只需要在那个ajax调用之后适当地添加一个延迟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:27:41.800

发生这种情况是因为您的 Ajax 回调在当前执行路径完成之前不会执行。要解决这个问题，您可以等到在 ajax 回调中追加 catName。这应该有效：

```
$.get('inc/getMenuFiles.php', function(data) {
    var catSplit = data.split(",");
    var menuitems = $('.menuitems');
    menuitems.empty();

    for (i=2; i<catSplit.length; i++) {

        url = "inc/menulists/" +catSplit[i].replace(/"/g, '').replace(/]/g, '');
        catName = catSplit[i].replace(/"/g, '').replace(/.xml/g, '').replace(/]/g, '');

        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: (function(catName){
                return function(xml) {
                    menuitems.append(catName);

                    $(xml).find('item').each(function(){
                        var name =  $(this).find('name').text();
                        var price = $(this).find('price').text();
                        menuitems.append(name + " - $" +price + "<br />");
                    });
                }
            })(catName)
        });
    }
}); 
```

您仍然（就像在您的原始代码中一样）无法保证您的请求可以完成的顺序，因此有时`appetizers.xml`会`beer.xml`以相反的顺序加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:10:46.140

发生这种情况是因为您的 for 循环比 AJAX 调用更快。请记住，AJAX 中的第*一个***A**代表*异步*。画出这个...

 **> 您正处于 for 循环的开头。您取第一个`catName`，并将其附加到`menuitems`. `name`然后你启动一个 AJAX 调用来获取`price`. 同时，AJAX 请求还没有响应，所以我们将一个移动到第二个，启动另一个 AJAX 请求。第一个还没有完成，我们刚刚发出了第二个请求；所以现在我们有 2 个 AJAX 响应待处理。与此同时，我们继续第三个。`item``catName``catName``catName`
> 
> *等等等等...*

**解决方案**

1.  将[`async`](http://api.jquery.com/jQuery.ajax/)内部 AJAX 调用中的属性设置为`false`. 这将使 for 循环暂停，直到请求完成。
2.  ** **PREFERRED ****在 for 循环之前进行 AJAX 调用，将响应存储在某处（可能在数组中），然后使用此数组运行 for 循环。**

# iphone - iOS：在后台运行部分代码

> ID：11100459
> 
> 赞同：0
> 
> 时间：2012-06-19T12:00:38.080
> 
> 标签：iphone, ios, multithreading, asihttprequest, grand-central-dispatch

> **可能重复：**
> [当应用程序不活动时 iOS 后台下载](https://stackoverflow.com/questions/8861390/ios-background-downloads-when-the-app-is-not-active)

当应用程序进入后台时，我希望我的 iOS 应用程序代码部分继续运行。

我有一些应该运行函数序列的类。每个函数都使用 ASIHTTPRequest 异步加载数据。我想在应用程序处于后台并且最后一个 ASIHTTP 请求完成时继续运行这些功能，我应该显示本地通知。

我有类似遵循代码的东西

```
- (void) start //call this method from another class
{
    __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setShouldContinueWhenAppEntersBackground:YES];
    [request setCompletionBlock:^{
        NSData *responseData = [request responseData];

        NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:responseData];
        [xmlParser setDelegate:self];
        [xmlParser parse];
        [xmlParser release];
    }];
    [request startAsynchronous];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    //parse xml
    if(all is Ok)
    {
        [self func1];
    }
}

- (void) func1
{
    __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setShouldContinueWhenAppEntersBackground:YES];
    [request setCompletionBlock:^{
        [self func2];
    }];
    [request startAsynchronous];
}

- (void) func2
{
    //like func1 
    ....
    [self func3];

}

- (void) func3
{
    __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setShouldContinueWhenAppEntersBackground:YES];
    [request setCompletionBlock:^{
        //Handling Local Notifications if app is in background
    }];
    [request startAsynchronous];
} 
```

我尝试使用下一个代码包装每个方法，当应用程序在后台时，最后一个请求函数永远不会完成： `dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, (unsigned long)NULL), ^(void) { ..func's scope.. }];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:05:41.647

您需要为您的 dispatch_async 使用 beginBackgroundTaskWithExpirationHandler，否则当应用程序在后台时它不会运行。

# pthreads - 在 RMO 下运行时，在 SPARC 上使用 pthread 同步原语（锁/屏障）是否安全？

> ID：11100461
> 
> 赞同：0
> 
> 时间：2012-06-19T12:00:51.967
> 
> 标签：pthreads, solaris, sparc

我计划在 RMO 内存模型下，在 SPARC 架构上运行一些基于 pthread 的并行应用程序。我只是想知道 pthread 实现是否可以安全地用于这种内存模型，或者我需要一个自定义锁定库？

谢谢，

E.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:47:20.153

这是对您的问题的深入讨论。

[http://developers.sun.com/solaris/articles/atomic_sparc/](http://developers.sun.com/solaris/articles/atomic_sparc/)

简短的回答：

pthreads == 好的。

# c# - 如何读取“.doc”文件或如何使用 ASP.NET 将其转换为“.docx”

> ID：11100470
> 
> 赞同：3
> 
> 时间：2012-06-19T12:01:28.067
> 
> 标签：c#, asp.net, ms-word, .doc

这是我面临的两个问题，在这两个问题中，应该解决一个问题，以使我的项目正常工作。

所以这里是那些：

1.  如何在**不使用 Word 自动化或任何付费 SDK（如 Aspose.Words** ）的情况下阅读“.doc”文件。

    （如果第一个不可能，那么）

2.  如何将“.doc”文件转换为“.docx”？**无需使用 Word 自动化或任何付费 SDK，如 Aspose.Words**。

搜索了很多，我发现只有 .docx 的开源解决方案。

**这是在服务器上完成的，所以没有安装 Word。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:54:54.310

您可能想试一试这个纯 .NET 解决方案：

> [**b2x 翻译器**](http://b2xtranslator.sourceforge.net/)

它不需要您在服务器上安装任何 Office 应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:18:42.123

看看[NPOI](http://npoi.codeplex.com/ "非营利组织") - 它是用 .NET 编写的，并且是免费和开源的。该[路线图](http://npoi.codeplex.com/wikipage?title=NPOI%20Road%20Map&referringTitle=Documentation "路线图")打算在未来支持创建新格式，但现在您可以使用它来读取旧格式并使用其他解决方案来编写新格式，这是一个开放标准（请参阅[此处的 MS 规范](http://msdn.microsoft.com/en-us/library/bb669147.aspx)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-06T02:56:05.397

我也面临同样的问题。如果要将 .doc 转换为 .docx，可以使用 Microsoft.Office.Interop.Word 库。这个对我有用。这是代码。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using Word = Microsoft.Office.Interop.Word;
    using System.Reflection;
    using System.IO;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {

            Word._Application application = new Word.Application();
            object fileformat = Word.WdSaveFormat.wdFormatXMLDocument;
            DirectoryInfo directory = new DirectoryInfo(@"D:\abc");
            foreach (FileInfo file in directory.GetFiles("*.doc", SearchOption.AllDirectories))
            {
                if (file.Extension.ToLower() == ".doc")
                {
                    object filename = file.FullName;
                    object newfilename = file.FullName.ToLower().Replace(".doc", ".docx");
                    Word._Document document = application.Documents.Open(filename);

                    document.Convert();
                    document.SaveAs(newfilename, fileformat);
                    document.Close();
                    document = null;
                }
            }
            application.Quit();
            application = null;

        }
    }
} 
```

它也对你有用..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T12:04:12.793

`OpenXML SDK`如果你想要开源，你可以使用。否则 .NET 中有一个使用 Interop.Word API 的选项。您可以使用此 api 打开文件并将其保存为 docx。

[http://msdn.microsoft.com/de-de/library/microsoft.office.interop.word(v=office.11​​).aspx](http://msdn.microsoft.com/de-de/library/microsoft.office.interop.word%28v=office.11%29.aspx)

但这需要在机器上安装单词。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T12:05:20.403

有一个微软批量转换工具可以做到这一点。我在[这里找到了参考。](http://blogs.msdn.com/b/ericwhite/archive/2008/09/19/bulk-convert-doc-to-docx.aspx)

否则我认为你别无选择，只能使用 Word Automation。毕竟，即使是 OpenOffice 也无法打开一些 .doc 文件并将它们转换为 .docx / OpenXML，这意味着自己编写任何类型的解析工具都会很麻烦。

# iphone - 当导航栏是超级视图视图时，如何在导航栏后面放置视图？

> ID：11100472
> 
> 赞同：0
> 
> 时间：2012-06-19T12:01:30.280
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uikit

我有一个 UITableView 和一个小的自定义视图。我希望自定义保持在导航栏下方，但在表格视图上方。所以当自定义视图上下移动时，看起来自定义视图从导航栏的后面弹出。

起初，我将自定义视图设为 tableview 的子视图，一切看起来都很好。但是当滚动tableview时，自定义视图的位置也发生了变化，这不是我想要的。

然后我将导航栏设置为超级视图，但现在自定义视图保留在导航栏上方。而且我不知道如何更改父视图和子视图之间的 z 顺序。

那么有人可以给我一些建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:05:52.680

根据您创建视图层次结构的方式 - 将其插入表格视图上方或导航栏下方：

```
- (void)viewDidLoad
    [super viewDidLoad];
    // let's assume self.tableView is table view
    // and self.navigationBar is navigation bar
    // that both are subviews of [self view]
    UIView *customSubview = [[UIView alloc] initWithFrame:someRect];

    [[self view] insertSubview:customSubview aboveSubview:[self tableView]];
    // -- OR --
    [[self view] insertSubview:customSubview belowSubview:[self navigationBar]];
} 
```

还有一个选项可以在某个索引处插入您的子视图。因此，如果您的导航栏位于最顶部（即索引 0）并且表格视图位于最底部（即 索引`[[[[self view] subviews] count] - 1]`），您可以在中间插入自定义视图，如下所示：

```
[[self view] insertSubview:customSubview atIndex:1]; 
```

这样，您的表格视图将在其父视图中下降一级，并且子视图的“分层”将如下：

1.  索引 0 - 导航栏
2.  索引 1 - 自定义子视图
3.  索引 2 - 表视图

请注意，尽管将您的自定义子视图放入标准超级视图中，但您必须自己维护该位置，因为它不会像以前那样与 tableview 一起滚动。

# wordpress - 使用元值订购 Wordpress 帖子

> ID：11100473
> 
> 赞同：4
> 
> 时间：2012-06-19T12:01:33.010
> 
> 标签：wordpress

我在下面有这段代码，它基本上创建了 4 个链接，让我可以在前端对帖子进行排序。

```
 <div class="sort">
            Sort projects by:
            <a href="http://mydomain.com/find-work/" >Latest Projects</a>
            <a href="http://mydomain.com/find-work/?order=asc&orderby=date" >Ending Soon</a>
            <a href="http://mydomain.com/find-work/?order=asc&orderby=meta_value_num&meta_key=proj_budget" >Budget Low</a>
            <a href="http://mydomain.com/find-work/?order=desc&orderby=meta_value_num&meta_key=proj_budget" >Budget High</a>
        </div>

        <?php   $my_query = new WP_Query( array( 
                        'post_type' => 'project',
                        'orderby' => get_query_var('orderby'),
                        'order' => get_query_var('order'),
                        ));      
                while ( $my_query->have_posts() ) : $my_query->the_post(); ?> 
```

第二个链接，按日期排序工作正常，但按元值排序的两个链接不起作用。我显然在我的查询中遗漏了一些东西，但我一生都无法解决。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T13:10:48.253

元值有点神奇：

```
$my_query = new WP_Query( array( 
                    // 'post_type' => 'project',
                    'meta_key' => 'proj_budget',
                    'orderby' => 'meta_value_num'
                    )); 
```

codex 中解释了所有可能的值：http: [//codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-21T22:49:25.987

这很简单：

```
new WP_Query( array( 
              //I used meta_value_num below, because it's about a numeric field
              //if you don't have a numeric field, just use meta_value
              "orderby" => 'meta_value_num',
              "meta_key" => 'price',
              "order" => 'DESC'
              )); 
```

# opencl - 每个计算单元的 OpenCl 最大扭曲和工作组

> ID：11100475
> 
> 赞同：3
> 
> 时间：2012-06-19T12:01:33.807
> 
> 标签：opencl, workgroup, warp

我可以通过 clGetDeviceInfo 之类的功能在一个计算单元上获得最大扭曲/工作组吗？从我发现的数字仅取决于计算能力。那么有什么功能可以检测到它吗？

谢谢jikra

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:51:15.817

我认为您正在寻找[clGetKernelWorkGroupInfo](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clGetKernelWorkGroupInfo.html)。

具体来说，CL_KERNEL_WORK_GROUP_SIZE 和 CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE 将帮助您调整工作组大小。

# iphone - UILabel 中的子弹

> ID：11100476
> 
> 赞同：0
> 
> 时间：2012-06-19T12:01:34.007
> 
> 标签：iphone, objective-c, xcode, ipad

我需要一个帮助，我不知道如何在`UILabel`文本中实现项目符号。我搜索了很多链接，但找不到解决方案。请帮我。等待解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:20:47.877

对字符串中的项目符号字符使用 Unicode 代码点？试试这个：

myLabel.text = @"\u2022 这是一个列表项！";

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:40:33.890

你应该看看[AliSoftware 的 OHAttributedLabel。](https://github.com/AliSoftware/OHAttributedLabel)它是绘制 NSAttributedString 的 UILabel 的子类

试试这个：

#import "OHAttributedLabel.h"
#import "NSAttributedString+Attributes.h"

```
OHAttributedLabel *myLabel=[[OHAttributedLabel alloc]init];
[myLabel setFrame:CGRectMake(0, 0, 70, 20)];
NSMutableAttributedString* attrStr = [NSMutableAttributedString attributedStringWithString:@"\u2022 list item!!!"];
[attrStr setTextColor:[UIColor redColor]];
[attrStr setTextColor:[UIColor blackColor] range:NSMakeRange(0,1)]; 
myLabel.attributedText = attrStr;
[self.view addSubview:myLabel]; 
```

* * *

如果您只想添加项目符号而不是使用此：

```
myLabel.text = @"\u2022  list item!!!!!!!!!"; 
```

* * *

[更多unicode列表](http://unicode.org/charts/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:19:25.113

嗨@Anamika 也试试这个

```
 myLabel.text = @"\u25A0 This is a list item!"; 
```

对于更多形状，您可以从此处更改值： [http ://www.alanwood.net/unicode/geometric_shapes.html](http://www.alanwood.net/unicode/geometric_shapes.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-11T16:37:20.033

如果用项目符号格式化文本是一个问题，我发现[这篇 Stack Overflow 帖子](https://stackoverflow.com/questions/29546390/custom-bullets-from-images-on-uitextview-or-uilabel-swift)很有帮助。他们向您展示了如何使用情节提要创建和对齐包含项目符号的段落。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-19T12:04:51.420

Mac 上的 Cmd+K 将插入一个项目符号字符。

# sql-server - 通过 JDBC 检索 SQL Server 查询统计信息

> ID：11100479
> 
> 赞同：1
> 
> 时间：2012-06-19T12:01:41.733
> 
> 标签：sql-server, jdbc

我想检索`SET STATISTICS IO ON`通过 JDBC 接口使用时 SQL Server 返回的统计信息。

获取执行计划非常简单，因为在运行`SET SHOWPLAN_XML ON`调用的结果之后`Statement.execute()`将是执行计划。当使用`SET STATISTICS XML OFF`第二个 ResultSet 时，`Statement`实例返回。

但是，`SET STATISTICS IO ON`在使用之前运行时，`Statement.execute()`只返回查询结果。没有更多的结果集，没有任何警告。

有谁知道我如何获得这些信息？它可能隐藏在哪里？

我尝试对 SQL Server 2005、SQL Server 2008R2 和 SQL Server 2012 使用 jTDS 以及 Microsoft 的 JDBC 驱动程序（3.0 和 4.0）。

我检查了查询返回的所有 ResultSets（使用检查`Statement.getMoreResults()`），以及由`Connection.getWarnings()`and返回的警告对象`Statement.getWarnings()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:42:41.110

与此相反`SET SHOWPLAN_XML ON`，将任何后续语句的结果集更改为计划而不是查询的结果，`SET STATISTICS IO ON`不会。

`SET STATISTICS IO ON`让查询执行并将统计信息显示为消息。请参阅[http://msdn.microsoft.com/en-us/library/ms131350.aspx](http://msdn.microsoft.com/en-us/library/ms131350.aspx)

在 ADO.NET 中，SqlConnection 对象上有一个名为 InfoMessage 的事件，您可以在该事件上插入一个处理程序并获取服务器显示的任何消息，例如打印或 IO 统计信息。

我快速查看了 SQL Server 的 MS JDBC 驱动程序，但没有找到任何接近的东西，我发现最好的是：[Is there a way to display PRINT results with SQL server JDBC driver?](https://stackoverflow.com/questions/1759801/is-there-a-way-to-display-print-results-with-sql-server-jdbc-driver) . 我的 Java 知识很薄，尽管 SQL Server 消息结果上的上述链接仅提到“SQL Server Native Client OLE DB 提供程序”，但其他驱动程序中可能会有类似的东西。

* * *

在查看了更多信息后，我发现您可以获取运行跟踪的消息（使用分析器），并且该消息显示为“用户错误消息”事件类下的跟踪消息，其中包含您可以用来关联的 TransactionID它到你的批次。

在 SQL Server 的后台运行默认跟踪。请参阅[http://www.simple-talk.com/sql/performance/the-default-trace-in-sql-server---the-power-of-performance-and-security-auditing/](http://www.simple-talk.com/sql/performance/the-default-trace-in-sql-server---the-power-of-performance-and-security-auditing/)和[http:// www.sqlservercentral.com/articles/sql+server+2005/64547/](http://www.sqlservercentral.com/articles/sql+server+2005/64547/)并且您可以在跟踪中插入您需要的事件，或者运行另一个然后从中读取。

虽然老实说，但我希望你能找到更好的解决方案。

编辑 ：

我不知道为什么您可以使用 JDBC 函数获取打印消息但不能获取 IO 统计信息，但我可以按照我开始跟踪的方向提出其他建议。

您可以使用扩展事件来做到这一点，将句柄放在正确的事件上，然后使用以下内容读取跟踪：

首先在 DB 上执行：

```
CREATE EVENT SESSION QueryStats ON SERVER
ADD EVENT sqlserver.error_reported
(
    ACTION(sqlserver.sql_text)
    WHERE (severity = 10
        AND state = 0
        AND user_defined = 0
        AND error = 3615)
)
ADD TARGET package0.ring_buffer
WITH(max_dispatch_latency = 1 seconds)
GO 
```

然后围绕你的陈述：

```
ALTER EVENT SESSION QueryStats ON SERVER STATE = START

SET STATISTICS IO ON

select * from MyTable -- your statement(s)

SET STATISTICS IO OFF

WAITFOR DELAY '00:00:01'; -- you have to wait because you can't set under 1 second of max_dispatch_latency 
WITH QueryStats
AS (
    SELECT CAST(target_data AS xml) AS SessionData
    FROM sys.dm_xe_session_targets st
        INNER JOIN sys.dm_xe_sessions s ON s.address = st.event_session_address
    WHERE name = 'QueryStats'
)
SELECT
    error.value('(@timestamp)[1]', 'datetime') as event_timestamp
    ,error.value('(action/value)[1]', 'nvarchar(max)') as sql_text
    ,error.value('(data/value)[5]', 'varchar(max)') as [message]
FROM QueryStats d 
    CROSS APPLY SessionData.nodes ('//RingBufferTarget/event') AS t(error)
ALTER EVENT SESSION QueryStats ON SERVER STATE = STOP
GO 
```

在那里，您将获得第二个包含 IO 统计信息的结果集。

尽管如此，解决方案还远未最终确定，因为需要消除等待时间并更好地确定跟踪范围，这可能是可能的。您还可以让跟踪运行并在以后及时获取所有语句/IO 统计信息，具体取决于您打算如何处理这些。

# jquery - 如何在使用jquery单击退格时禁用按钮并启用？

> ID：11100480
> 
> 赞同：-2
> 
> 时间：2012-06-19T12:01:46.133
> 
> 标签：jquery, asp.net-mvc-3

我正在使用一个按钮进行搜索，单击搜索按钮后它应该处于禁用模式，为此我编写了如下代码，

```
$('input[type=submit]', this).attr('disabled', 'disabled'); 
```

我需要在搜索结果之后启用搜索按钮，所以它也可以正常工作，但是如果我点击退格键，它会在禁用模式下显示搜索按钮，但它在 Firefox 中发生，只有剩下的一切正常，所以我尝试使用退格键事件启用按钮如下

```
$(document).keydown(function(event)
{
  if ( event.keyCode == 8 ) 
  {
    $('input[type=submit]', this).removeattr('disabled');     
  }
} 
```

但它永远启用按钮，无论我需要在哪里禁用，它也处于启用模式。那么我该如何解决这个问题..谢谢你的建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:11:23.040

而不是文档，我认为您应该在字段上捕获键并使用 keypress

```
$("#target").keypress(function(event) {
  if ( event.which == 8 ) {
     $('input[type=submit]').attr('disabled','');
     //event.preventDefault();// if you need to stop fire the default
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:03:53.340

首选使用`attr('disabled','')`删除启用

```
$(document).keydown(function(event) 
{ 
   if ( event.keyCode == 8 ) 
   { 
      $('input[type=submit]', this).attr('disabled','');
   } 
} 
```

# maven - 由于执行顺序，将子用作模块时父中的 Maven 依赖管理失败

> ID：11100484
> 
> 赞同：3
> 
> 时间：2012-06-19T12:01:51.873
> 
> 标签：maven, maven-dependency-plugin

有没有更简单的方法可以强制 maven 在模块之前构建父级？

用例：我试图了解解决以下问题的最佳实践是什么

我有两个项目，我将命名为“A”和“B”他们都有一个父项目，我将命名为“P”

“P”对共享资源有一个依赖管理，这将允许对共享工件使用相同的版本。

“P”也用于将“A”和“B”作为模块运行。

问题：添加新工件时，我在“P”中添加版本，在“A”中添加依赖项（例如）。现在在进行 Maven 全新安装时，我得到 'dependencies.dependency.version' is missing for .

这是因为 maven 首先在他自己之前构建它的模块，然后“A”没有版本。

我知道我可以在以下内容下放入“A”pom：../ 并且它有效（但并非总是如此）。

回到我的问题：有没有一种更简单的方法可以强制 maven 在模块之前构建父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:47:41.857

我发现我的问题不仅是上面提到的相对路径，而且我的父 pom 版本是一个变量 ${version} 并且在构建期间没有被替换。

为了解决这个问题，我硬编码在父 POM 中编写了父版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:21:14.120

在您的情况下，这就是模块的父级 == 模块的聚合器的情况，只要它们位于同一个构建反应器中，Maven 就应该在其模块之前构建父级，这通常意味着您应该从`P`项目级别构建所有模块。即使你不这样做，如果你在模块`<relativePath`中的块中有适当的 > 标签，父母也应该得到解决（例如看[这里）。](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Example_2)默认情况下，那里有值，这意味着工件的父级位于文件系统的父目录中。`<parent>``pom.xml``..`

# php - 照片 RSS 提要显示

> ID：11100485
> 
> 赞同：4
> 
> 时间：2012-06-19T12:02:00.190
> 
> 标签：php, wordpress, rss

我有一个 wordpress 博客[http://cgvector.com](http://cgvector.com)，我想**在 RSS Feed 中显示特色图片**。我怎样才能做到这一点？我的提要地址是： http: [//feeds.feedburner.com/cgvector](http://feeds.feedburner.com/cgvector)

我已经添加了这段代码，但它不起作用。

```
function featuredtoRSS($content) {
    global $post;

    if ( has_post_thumbnail( $post->ID ) ){
    $content = '' . get_the_post_thumbnail( $post->ID, 'thumbnail', array( 'style' => 'float:left; margin:0 15px 15px 0;' ) ) . '' . $content;
    }

    return $content;
}

add_filter('the_excerpt_rss', 'featuredtoRSS');
add_filter('the_content_feed', 'featuredtoRSS'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:58:28.653

```
function custom_feed($content) {
    return wp_get_attachment_image(get_post_thumbnail_id(), 'full') . '<br />' . $content;
}
add_filter('the_content_feed', 'custom_feed'); 
```

这个应该可以为您解决问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:11:54.140

您的代码看起来不错，但是您可以将此代码（无论如何都一样）粘贴到`functions.php`位于您的`wp-content/themes/yourtheamefolder`

```
function img_to_rss($content) {
    global $post;
    if(has_post_thumbnail($post->ID)) {
        $content = '<p>'.get_the_post_thumbnail($post->ID).'</p>' . get_the_content();
    }
    return $content;
}
add_filter('the_excerpt_rss', 'img_to_rss');
add_filter('the_content_feed', 'img_to_rss'); 
```

请记住，它会`Feedburner`缓存您的提要，因此请等待 12-24 小时以使其更新，然后再看到这些更改。

# android - 没有在 Android Emulator（虚拟设备）上找到 SD 卡文件夹？

> ID：11100486
> 
> 赞同：1
> 
> 时间：2012-06-19T12:02:05.850
> 
> 标签：android, sd-card, android-sdcard

实际上，我正在尝试在我的 Android 模拟器上创建一个 SD 卡空间，并且我成功了。但问题是，当我通过单击“应用程序”选项查找 MyFile 文件夹时，它在 Android 虚拟设备上不可用。当我查看设置时也没有显示可用空间 - >存储。

但是当我将一个应用程序转移到 sd 卡中时，它会显示 sd 卡中的总空间和可用空间，但仍然无法找到 SD 卡内存的文件夹。

我怎么发现它请帮助我......

提前感谢您的任何帮助或建议......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:54:27.107

转到DDMS->文件资源管理器->mnt->sd卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:50:58.730

单击 DDMS，从设备中选择您的模拟器。从 FileExplorer 中选择 mnt/sdcard。这是模拟器的 SDCard 的路径。但是要查找已安装的应用程序，请遵循 Riteeka 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:17:17.503

模拟器中没有名为 MyFile 的文件夹，您可以在 FileExplorer 中浏览 sdcard 内容。sdcard 后面的路径是 FileExplorer -> Data/Data/mnt/sdcard。

我想这可能对你有帮助！！

# iphone - 替换 NSString 的值

> ID：11100487
> 
> 赞同：-1
> 
> 时间：2012-06-19T12:02:08.833
> 
> 标签：iphone, objective-c, nsstring

我正在尝试将 NSString 中的月份名称替换为其两位数字值的名称，例如“January”=>“01”、“February”=>“02”。我使用的方法如下：

```
if (mois==@"january") { mois=@"01";}   
if (mois==@"February") { mois=@"02";} 
```

...但它不工作。我该如何进行这个替换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T12:03:22.543

`if ([mois isEqualToString:@"january"])`就是你要找的。

您所做的是比较指针而不是存储在其中的值，这就是为什么 Objective-C 中的几个类都有这些`isEqualTo:`方法的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:04:17.363

用这个

```
if ([mois isEqualToString:@"january"]) { mois=@"01";}   
if ([mois isEqualToString:@"February"]) { mois=@"02";} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:03:46.790

你应该试试`[mois isEqualToString:@"january"]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:04:13.293

使用 iOS 提供的 Date 函数。看看 NSDate 和 NSDateFormatter

通过使用日期函数，您可以让 SDK 将月份名称转换为月份代码。这也意味着您不必担心月份是否使用不同的语言或大小写不同，或者是否使用“Jan”而不是“January”等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T12:19:28.150

NSString 是一个对象，因此你不能使用 mois==@"january"。您必须使用方法 isEqualToString:(NSString *)aString。

尼古拉。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-19T12:05:45.460

NSStrings 是不可变的，不是吗？我认为您要么必须使用 NSMutableString，要么使用 mois=[NSString stringWithString:@"01"];

希望这会有所帮助，内森

# group-by - GROUP BY 混淆

> ID：11100495
> 
> 赞同：0
> 
> 时间：2012-06-19T12:02:32.480
> 
> 标签：group-by, sql-server-2008-r2

我正在提取 SQL Server 中的一些数据，我想要`GROUP BY`我的结果，但无法让它工作。

这是我当前的 SQL 语句：

```
SELECT
   PA01201.CUSTNMBR, 
   PA01201.PACONTNUMBER, 
   PA01201.PAcontid, 
   PA01100.CUSTNMBR AS Expr1, 
   PA01100.PAcontname, 
   PA01100.PAcontid AS Expr2, 
   PA01100.PACONTNUMBER AS Expr3, 
   PA01201.PAprojname, 
   PA01201.PAPROJNUMBER
   PA01201.Cost

FROM        
   PA01201 
INNER JOIN
   PA01100 ON PA01201.CUSTNMBR = PA01100.CUSTNMBR AND 
              PA01201.PACONTNUMBER = PA01100.PACONTNUMBER AND 
              PA01201.PAcontid = PA01100.PAcontid 
```

它返回以下结果：

```
CUSTNMBR    PACONTNUMBER    PAcontid    Expr1   Pacontname  Expr2   Expr3   Paprojname  PAPROJNUMBER    Cost
AD001           8051    8051    AD001           Company 1   8051    8051    Project 1   08051P          951
AP001           8063    8063    AP001           Company 2   8063    8063    Project 2   08063P          2651
AR002           8096    8096    AR002           Company 3   8096    8096    Project 3   08096P          807
AR003           9033    9033    AR003           Company 4   9033    9033    Project 4   09033P          458
AS001           8013    8013    AS001           Company 5   8013    8013    Project 5   08013C          3297
AS001           8013    8013    AS001           Company 5   8013    8013    Project 5   08013P          48
AS001           8013    8013    AS001           Company 5   8013    8013    Project 5   08013P          641
AR002           8096    8096    AR002           Company 3   8096    8096    Project 3   08096P          1000 
```

我希望能够将结果分组`PAcontid`。

谁能建议最简单的方法来做到这一点？

当我尝试插入一个`GROUP BY`子句时，我收到一条错误消息，指出该子句中不包含其他列（CUSTNMBR、PAPROJNUMBER）等？？？？

非常感谢任何帮助。

所有工作都在 SQL Server Management Studio 2008 R2 中完成

* * *

抱歉，由于某种原因，我的最后一篇专栏（成本）没有通过。我已经更新了我的问题以显示正确的字段。基本上我想要做的是获得每个 Pacontid 的总成本。

我希望我的结果看起来像........

```
CUSTNMBR    PACONTNUMBER    PAcontid    Expr1   Pacontname  Expr2   Expr3   Paprojname  PAPROJNUMBER    Cost
    AS001           8013    8013    AS001           Company 5   8013    8013    Project 5   08013P          3986
    AD001           8051    8051    AD001           Company 1   8051    8051    Project 1   08051P          951
    AP001           8063    8063    AP001           Company 2   8063    8063    Project 2   08063P          2651
    AR002           8096    8096    AR002           Company 3   8096    8096    Project 3   08096P          1807
    AR003           9033    9033    AR003           Company 4   9033    9033    Project 4   09033P          458 
```

这可能在我想做的事情中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:05:38.860

使用时`GROUP BY`，所有选定的列都必须在`GROUP BY`子句中，如果不是，则必须在它周围的`aggregate`函数（例如：`SUM`、、、、`MAX`）`MIN`中`AVG`！

有关更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/ms177673.aspx)。

* * *

在您的情况下，可能的解决方案可能是：

```
SELECT  MAX(PA01201.CUSTNMBR),
        MAX(PA01201.PACONTNUMBER),
        PA01201.PAcontid,
        MAX(PA01100.CUSTNMBR AS Expr1,
        MAX(PA01100.PAcontname),
        MAX(PA01100.PAcontid) AS Expr2,
        MAX(PA01100.PACONTNUMBER) AS Expr3,
        MAX(PA01201.PAprojname),
        MAX(PA01201.PAPROJNUMBER)
FROM       PA01201
INNER JOIN PA01100 ON PA01201.CUSTNMBR = PA01100.CUSTNMBR
       AND PA01201.PACONTNUMBER = PA01100.PACONTNUMBER
       AND PA01201.PAcontid = PA01100.PAcontid
GROUP BY PA01201.PAcontid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:08:31.290

`GROUP BY`在子句中添加所有选定的列。但首先从所需的列开始：`PAcontid`.

```
SELECT
    PA01201.CUSTNMBR, 
    PA01201.PACONTNUMBER, 
    PA01201.PAcontid, 
    PA01100.CUSTNMBR AS Expr1, 
    PA01100.PAcontname, 
    PA01100.PAcontid AS Expr2, 
    PA01100.PACONTNUMBER AS Expr3, 
    PA01201.PAprojname, PA01201.PAPROJNUMBER
FROM
    PA01201 
INNER JOIN
    PA01100 ON PA01201.CUSTNMBR = PA01100.CUSTNMBR AND 
    PA01201.PACONTNUMBER = PA01100.PACONTNUMBER AND 
    PA01201.PAcontid = PA01100.PAcontid 
GROUP BY 
    PAcontid, CUSTNMBR, PACONTNUMBER, PAcontname, PAprojname, PAPROJNUMBER 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:21:10.673

如果您添加了一个

```
 Order by CUSTNMBR , PAcontid 
```

这将为您提供左侧的客户列表，然后是 PAcontid 组中的数据。

或者

```
 Order by PAcontid ,CUSTNMBR 
```

这将按 PAcontid 对其进行排序，然后将客户按顺序排列..

通常你会说

```
ann apple 10
pete strawberry 3
Lucy strawberry 12

select fruit, sum(count) as total from lunch group by fruit 
```

要得到

```
apple 10
strawbery 15 
```

# java - 如何从 C++ 调用 java 应用程序

> ID：11100496
> 
> 赞同：0
> 
> 时间：2012-06-19T12:02:33.367
> 
> 标签：java

我在 java 中编写了一个代码，它根据作为命令行参数提供的值调整系统音量。我想从我的 C++ 应用程序中执行这段代码。做这个的最好方式是什么...

我需要在部署机器上安装jdk吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:06:00.313

您可以将运行时与您的软件捆绑在一起，然后从您的程序中调用它，但是，更好的解决方案是执行 Java 应用程序在您的 C++ 应用程序中本机执行的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:13:21.230

您可以像运行任何其他可执行文件一样从 C++ 运行 Java 应用程序。

使用您的 Java 类名作为参数运行“java.exe”，就像从命令行执行 Java 应用程序时通常所做的那样：

```
java.exe MyClass myParamToJavaClass 
```

或者，您可以将您的类打包到一个可执行的 jar 存档中，在这种情况下，您运行 Java 应用程序的命令看起来像这样

```
java.exe -jar MyJarr.jar myParamToJavaClass 
```

如果您不在 Windows 下运行，请将“.exe”替换为其他内容。

在上面的示例中，我假设“java.exe”位于“路径”环境变量中定义的目录中，就像通常一样。

您不需要安装 JDK，但部署机器上需要存在 JRE。

# mysql - 将结果中的逗号分隔值从一列拆分为两行。MySQL

> ID：11100501
> 
> 赞同：2
> 
> 时间：2012-06-19T12:02:54.587
> 
> 标签：mysql

mysql。两列，同一张表。
第 1 列有 product_id
第 2 列有 category_ids（有时是 2 个类别，所以看起来像 23,43）

如果有超过 1 个 category_id 与产品 ID。

即
**表：**

```
product_id | category_ids 
100        | 200,300
101        | 201 
```

**查询结果：未尝试修改表**

```
100 | 200
100 | 300
101 | 201 
```

编辑：（注意）我实际上根本不想操纵表格。只需在 PHP 中进行查询，以便我可以根据需要使用数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:25:23.013

您的数据库表实现似乎设计不佳，但是在您的情况下，您需要的是 GROUP_CONCAT 的反向函数，但不幸的是它在 MySQL 中不存在。

您有两个可行的解决方案：

1.  更改存储数据的方式（允许在`product_id`字段上重复并将多个相同的记录`product_id`用于不同的记录`category_id`）
2.  从您的应用程序中操作查询结果（您在问题中提到了 PHP），在这种情况下，您必须拆分`category_ids`列值并自己组装一个结果集

我还发现第三种解决方案就像一个技巧（使用临时表和存储过程），首先你必须声明这个存储过程：

```
DELIMITER $$
CREATE PROCEDURE csv_Explode( sSepar VARCHAR(255), saVal TEXT )
body:
BEGIN

  DROP TEMPORARY TABLE IF EXISTS csv_Explode;
  CREATE TEMPORARY TABLE lib_Explode(
    `pos` int unsigned NOT NULL auto_increment,
    `val` VARCHAR(255) NOT NULL,
    PRIMARY KEY  (`pos`)
  ) ENGINE=Memory COMMENT='Explode() results.';

  IF sSepar IS NULL OR saVal IS NULL THEN LEAVE body; END IF;

  SET @saTail = saVal;
  SET @iSeparLen = LENGTH( sSepar );

  create_layers:
  WHILE @saTail != '' DO

    # Get the next value
    SET @sHead = SUBSTRING_INDEX(@saTail, sSepar, 1);
    SET @saTail = SUBSTRING( @saTail, LENGTH(@sHead) + 1 + @iSeparLen );
    INSERT INTO lib_Explode SET val = @sHead;

  END WHILE;

END; $$
DELIMITER ; 
```

然后，您必须调用传递要爆炸的列中的数组的过程：

```
CALL csv_explode(',', (SELECT category_ids FROM products WHERE product_id = 100)); 
```

在此之后，您可以通过这种方式在临时表中显示结果：

```
SELECT * FROM csv_explode; 
```

结果集将是：

```
+-----+-----+
| pos | val |
+-----+-----+
|   1 | 200 |
|   2 | 300 |
+-----+-----+ 
```

这可能是你的起点......

# java - 如何使用 Maven 作为一个健全的构建系统？

> ID：11100504
> 
> 赞同：3
> 
> 时间：2012-06-19T12:03:13.790
> 
> 标签：java, maven

是的，这是一个真正的问题。

我想在基于 Maven 的多模块项目中满足以下工作流程：

*   在模块 X 中进行更改
*   在模块 Y 中运行 Java 应用程序

模块 Y 可能直接或间接依赖于模块 X，我需要递归地编译受另一个更改影响的所有模块。我不想运行测试。

在 Maven 中，我如何在不必每次都编译和安装所有内容的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:25:10.100

为什么每次都要制作和安装？我发现的最简单的解决方案是`mvn install`一次。然后，您可以进入各个项目并随时构建它们。如果您需要确保链条被拾起，只需从顶部构建并使用`mvn -amd -pl projectname`

这表示要构建一个特定的项目及其依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:22:42.230

**发展阶段**

我认为您不能仅使用 Maven 轻松做到这一点。但是，在开发过程中，您可以跳过添加`-DskipTests`.

maven 无法正确进行增量编译。正确的做法是使用 IDE，它将 maven 项目导入 IDE 的项目中，然后您可以快速轻松地进行开发。IntelliJ IDEA 与 maven 配合得很好。

**生产阶段**

对于发布版本，您可以在目标工件中使用显式版本。因此，在模块 X 发生更改后，如果您构建最终发布工件模块 Y，您可以在其中添加显式依赖项。在这种情况下，X 和 Y 之间的所有模块都将具有旧版本（但您应该假设它们将与新的 X 一起使用，这总是不正确的）。

# c# - NHibernate (c#.net) - 自动将 SQLQuery 的结果映射到 dto 对象

> ID：11100514
> 
> 赞同：1
> 
> 时间：2012-06-19T12:04:09.093
> 
> 标签：c#, .net, nhibernate

到目前为止（使用 NHibernate）我已经使用了实体映射，并没有真正参与创建原始 sql 查询 - 但有些事情出现在我需要这样做的地方。

我遇到的问题是我想自动将查询的列别名映射到 Dto 对象。

这可行，但我必须按查询顺序指定列别名'。

SQL

```
string sql = "select mycol1 as ColumnOne from mytable"; 
```

NHibernate 查询

```
var query = session.CreateSQLQuery(sql)
            .AddScalar("ColumnOne", NHibernateUtil.Int32)
            .SetResultTransformer(
                  NHibernate.Transform.Transformers.AliasToBean<MyDtoObject>()
            ); 
```

MyDtoObject

```
 public class MyDtoObject 
 {
     public int ColumnOne {get;set;}
 } 
```

但是有没有办法让 NHibernate 在不创建映射类的情况下自动执行查询中的列和 Dto 之间的映射？

我已经看到了一些在查询中使用别名的例子，例如

```
string sql = "select mycol1 as {ColumnOne} as ColumnOne from mytable"; /// ??? 
```

但不能让它工作，因为别名 {ColumnOne} 在作为 sql 语句发送到数据库之前似乎没有被替换。

任何想法？

TIA

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:25:25.417

也许 System.Linq.Dynamic 会有所帮助：

```
use System.Linq.Dynamic;

string ColumnAlisName = "ColumnOne";
var query = mytable.Select(String.Format("new (mycol1 as {0})",ColumnAlisName)); 
```

# java - java中的快速文本文件解析

> ID：11100517
> 
> 赞同：0
> 
> 时间：2012-06-19T12:04:14.930
> 
> 标签：java, parsing, file-io, text-files

我有许多文本文件，它们采用固定的重复格式，例如：

```
Q 32,0 16
q 27
b 21
I 0
P 1
d 0
m 31,0
Q 48,0 16
q 27
b 2
I 2
P 1
d 0
m 31,0
.
.
. 
```

我想用Java解析它们。我想知道的是解析这样一个文本文件的最快方法。如果这有助于提高性能，我可以更改文本文件的输出格式，因为这里唯一的要求是解析速度。我也可以使用外部库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:06:35.270

最快的解析速度是使用二进制格式。我建议您使用本机字节顺序，并且您应该能够每秒读取大约 2000 万条此类数据的条目。

* * *

这里是一个以高吞吐量和低延迟读取和写入二进制数据的示例。

[https://github.com/peter-lawrey/Java-Chronicle](https://github.com/peter-lawrey/Java-Chronicle)

此格式设计为在写入时读取（进程之间的延迟小于一微秒）

您可以使用比这更简单的格式，因为我怀疑您需要的只是高吞吐量。;)

顺便说一句：该库支持从内存映射的 ByteBuffer 读取和写入诸如值目录`long`之类的文本的无 GC 读取和写入。`double`因此，它可以用作快速文本记录器，每秒支持超过一百万条真实文本消息。

# rest - 使用 SDK 使用 REST Web 服务是否等同于使用插件查看内容？

> ID：11100521
> 
> 赞同：0
> 
> 时间：2012-06-19T12:04:24.053
> 
> 标签：rest, hateoas

网络工作的原因是因为您不必对每个网站都采取二进制依赖关系。可能与不鼓励使用 Flash 和 Silverlight 的原因相同。使用自定义 SDK 使用 REST Web 服务是否与使用插件查看内容同义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:50:02.857

使用 SDK 使用 REST Web 服务*并不*等同于使用插件查看内容。它更像是使用别人编写的浏览器引擎，而不是自己编写。

# linux - 英特尔 MSR 每线程频率缩放

> ID：11100522
> 
> 赞同：7
> 
> 时间：2012-06-19T12:04:38.407
> 
> 标签：linux, linux-kernel, intel, frequency

我正在扩展 Linux 内核以控制某些线程的频率：当它们被调度到一个内核（任何内核！）上时，内核的频率会通过将正确的 p-state 写入寄存器来更改`IA32_PERF_CTL`，如 Intel 的建议手动的。但是当调度具有不同“自定义”频率的不同线程时，似乎所有线程的吞吐量都会增加，就好像所有内核都以最大设定频率运行一样。

我在不同的负载和配置条件下做了很多试验和测量，但结果是一样的。在使用 CPUFreq 进行了一些试验后（没有运行应用程序，我在每个内核上设置了不同的频率，最后用 cpufreq-info -w 测量的频率相等），我想知道 CPU 内核是否**真的**可以以不同的**独立频率**运行，或者是否存在硬件策略或限制。

最后，是否有一种 CPU 模型可以使这种细粒度的频率缩放变得可行？

我使用的 CPU 是 Intel Core i5 750

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T22:59:44.697

您无法控制活动核心的单个核心频率。但是，您可以将所有活动核心的频率控制为相同。原因在前面的答案中 - 所有内核都在同一个有源电压平面上。希望下一代 Haswell 处理器能够单独控制每个内核。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:02:36.360

我认为你错过了一大块图片！

阅读电源和时钟域。域内的所有处理器内核都以相同的 P 状态运行（即相同的频率和电压）。所有内核在该域中运行的 P 状态将始终是请求该域中最高 P 状态的内核的 P 状态。MSR 根本不反映这一点，内核公开的接口也没有。

Anandtech 对此有一篇很好的文章： [http ://www.anandtech.com/show/2658/2](http://www.anandtech.com/show/2658/2)

“这与 AMD 的 Phenom 非常相似，但两者的不同之处在于它们处理电源管理的方式。**虽然 AMD 将允许单个内核请求不同的时钟速度，但 Nehalem 试图以相同的频率运行其所有内核**；如果一个核心处于空闲状态，然后它只是电源门控，核心被有效地关闭。”

我还没有将功率计连接到 SB/IB，但我的猜测是行为是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T01:04:55.273

**cpufreq-info**将显示有关哪些内核需要在其 P 状态下同步的信息：

```
[root@navi ~]# cpufreq-info
cpufrequtils 008: cpufreq-info (C) Dominik Brodowski 2004-2009
Report errors and bugs to cpufreq@vger.kernel.org, please.
analyzing CPU 0:
  driver: acpi-cpufreq
  CPUs which run at the same hardware frequency: 0 1 <---- THIS
  CPUs which need to have their frequency coordinated by software: 0 <--- and THIS
  maximum transition latency: 10.0 us. 
```

至少正因为如此，我建议通过 cpufreq 接口而不是直接设置寄存器，并且可以在可能有不常见要求的非英特尔 CPU 上运行。

还要检查如何使内核线程坚持特定的内核，以避免意外切换，如果你还没有这样做的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-22T12:40:09.470

我要感谢大家的贡献！进一步调查，我发现了我与社区分享的其他细节。

正如建议的那样，Nehalem 将所有内核放在一个时钟域中，以便将所有内核中设置的最大频率应用于所有内核；某些工具可能会在空闲内核上显示不同的频率，但运行任何应用程序以将频率提高到最大值就足够了。根据我的测试，这也适用于 Sandy Bridge，其中内核和 LLC 切片都位于相同的频率/电压域中。我假设这种行为也发生在 Ivy Bridge 上，因为它只是一个“滴答”的迭代。相反，我相信 Haswell 将内核和 LLC 切片放置在不同的单一域中，从而实现每内核频率。这也在几个页面上做广告，比如 [http://www.anandtech.com/show/8423/intel-xeon-e5-version-3-up-to-18-haswell-ep-cores-/4](http://www.anandtech.com/show/8423/intel-xeon-e5-version-3-up-to-18-haswell-ep-cores-/4)

# c# - 使用正则表达式重命名文件

> ID：11100523
> 
> 赞同：0
> 
> 时间：2012-06-19T12:04:39.437
> 
> 标签：c#, .net, regex, windows-7-x64

我有一组格式相同的文件`somethingname___someotherstuff.txt`

我想搭车`___someotherstuff`。

（`___`= 3 个下划线）

它是字母和数字的组合

我该怎么做？

**编辑：**操作系统 = Windows 7

**再次编辑：**每个文件中的“someotherstuff”位都不相同。不同数字和字符的组合

**再次编辑**：有人回答它然后撤回它。为什么？你有正确的答案。 *_* \w+ 谢谢。如果你愿意，把它放回去，我会把你的标记为答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:05:20.517

你可以大致这样做：

```
string[] files = Directory.GetFiles(path);
foreach (string f in files)
{
    if (file.IndexOf("___") != -1)
    {
        File.Move(file, Regex.Replace(file, "___.*\.txt$", ""));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T17:17:31.693

以下正则表达式模式可能满足要求...

```
string newFileName = Regex.Replace(fileName, @"___\w*(?=\.)", "") 
```

# javascript - 使用 css3 或 javascript 动画 webkit 渐变的方法？

> ID：11100526
> 
> 赞同：0
> 
> 时间：2012-06-19T12:04:48.313
> 
> 标签：javascript, jquery, css, webkit

基本上我已经设置了一个 CSS3 渐变，并希望在悬停时将它的一种颜色转换为更大，但我不确定如何实现这一点。

此刻我的小提琴在悬停时有点疯狂，然后将尺寸调整到正确的尺寸，我宁愿过渡更加平滑，蓝色区域刚刚增长而不是飞离页面。如果有人能提供一些建议，那就太好了。

小提琴：http: [//jsfiddle.net/VQaGh/2/](http://jsfiddle.net/VQaGh/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:17:45.753

在这种情况下，您不需要转换`background-position`，只需转换`background-size`- 就像这样[http://jsfiddle.net/VQaGh/4/](http://jsfiddle.net/VQaGh/4/)

你为什么要使用古老的 webkit 语法？请参阅[正确的语法](http://dev.w3.org/csswg/css3-images/#linear-gradients)。

此外，您可以查看我不久前做的这个[动画渐变演示。](http://dabblet.com/gist/2771602)

# jquery - 如何将可拖动的jquery ui多次应用于同一元素

> ID：11100528
> 
> 赞同：0
> 
> 时间：2012-06-19T12:04:51.260
> 
> 标签：jquery, jquery-ui

如何将 jquery ui 可拖动或调整大小多次应用于同一元素？例如：

```
<div style="height: 50px; left: 216px; position: absolute; top: 64px; width: 444px; z-index: 1; class="test-12 ui-resizable ui-draggable" id="div-77">
   <div class="ui-resizable-handle ui-resizable-e" style="z-index: 1000;"></div>
   <div class="ui-resizable-handle ui-resizable-s" style="z-index: 1000;"></div>
   <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 1000;"></div>
   <div class="ui-rotatable-handle ui-draggable show"></div> 
</div> 
```

我想用这些其他 div 将 jquery 可拖动和调整大小应用到这个 div (id=div-77)

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:18:35.850

像 jQuery 中的大多数东西一样，您可以使用 CSS 选择器来选择您想要的元素。这将使所有`div`s 可调整大小和可拖动。

```
$('div')
    .resizable()
    .draggable(); 
```

如果你只想要 ```id="div-77" 的 div，你可以使用。

```
$('#div-77')
    .draggable()
    .resizable(); 
```

多次调用`draggable`或在同一个元素上没有不良影响。`resizable`jQuery UI 内部足够聪明，可以知道它已经制作了元素`draggable`或`resizable`相应地制作了元素。

# ajax - 如何使用来自服务器的 JSON 数据填充 jQuery Mobile 列表视图？

> ID：11100531
> 
> 赞同：6
> 
> 时间：2012-06-19T12:04:57.250
> 
> 标签：ajax, json, listview, jquery-mobile, cordova

我将 jQuery Mobile 与 PhoneGap 一起使用。如何（从服务器）提取 JSON 数据并将其填充到列表视图中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T14:05:47.260

[查看w3schools](http://www.w3schools.com/jquery/ajax_getjson.asp)和[jQuery API](http://api.jquery.com/jQuery.getJSON/)上的 jQuery.getJSON() 方法。

来自 jQuery API 的示例：

> ```
> $.getJSON('ajax/test.json', function(data) {
>   var items = [];
> 
>   $.each(data, function(key, val) {
>     items.push('<li id="' + key + '">' + val + '</li>');
>   });
> 
>   $('<ul/>', {
>     'class': 'my-new-list',
>     html: items.join('')
>   }).appendTo('body');
> }); 
> ```
> 
> 当然，这个例子依赖于 JSON 文件的结构：
> 
> ```
> {
>   "one": "Singular sensation",
>   "two": "Beady little eyes",
>   "three": "Little birds pitch by my doorstep"
> } 
> ```
> 
> 使用这种结构，该示例循环访问请求的数据，构建一个无序列表，并将其附加到正文中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T06:02:20.437

试试这个：

```
$.ajax({                                                                   
    type: "POST",                                                                        
    url: "your_url",  
    contentType: "application/json; charset=utf-8",                                                            
    dataType: "json",   
    success:successFunction,                                               
    error: function(msg) {              

        alert(msg.statusText);

     } 
});  

function success:successFunction(data){

     var html ='';
     $.each(data.d, function(index, item) {
         html += '<li><a href="#">' + item.Your_data+ '</a></li>';
     });

    $('#ul_id').append($(html));

    $('#ul_id').trigger('create');    
    $('#ul_id').listview('refresh');

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T01:35:00.907

```
function makeList() {
    $.post("http://example.com/getlist.php",
        function(resultfromphp) {
            $('#ulListview').append(resultfromphp);
            $('#ulListview').trigger('create');    
            $('#ulListview').listview('refresh');
    });
}

$("#pageName").live('pagebeforeshow', function(event) {
    makeList();

}); 
```

这对我来说非常有效。php 正在返回`<li></li>`标签 html 是一个`<ul id="ulListview"></ul>`标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:22:52.740

我正在使用 JQM 进行类似的项目，稍后我将通过电话间隙。上面的答案虽然可用于使用 ajax 动态填充数据，但是不要解决覆盖 JQM ajax 的含义，因为 Jquery ajax 并没有真正具备处理 JQM 事件的能力，这些事件是为那些为那些正在扩展 DOM 事件而构建的有兴趣或像我一样遇到类似的困境，我希望下面的页面可以帮助您对您的项目做出明智的决定。

[http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html)

# php - Preg_match 包含键值模式的字符串

> ID：11100537
> 
> 赞同：2
> 
> 时间：2012-06-19T12:05:21.017
> 
> 标签：php, regex, preg-match, preg-match-all

我需要一个 PHP 的正则表达式，`preg_match`它可以处理以下内容：

```
variable1=true&variable2=1,2,3&variable3="test"&variable4!=true&variable5!=4,5,6&variable!="test" 
```

我会更改为 json 之类的东西，但这不支持我需要的向后兼容性，任何建议，我得到的最接近的是：

```
/((\w+)(=|!=)("\w+"|true|false|\d+)*)/ 
```

这是部分成功的，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:10:45.517

### 使用字符串函数

```
$string = 'variable1=true&variable2=1,2,3&variable3="test"&variable4!=true&variable5!=4,5,6&variable!="test"';
$pairs = explode('&', $string);
foreach ($pairs as $pair) {
    if (strstr($pair, '!=')) {
        list($key, $value) = explode('!=', $pair);
    } else {
        list($key, $value) = explode('=', $pair);
    }
    $values[$key] = $value;
} 
```

[^(*在键盘*上查看输出)](http://codepad.org/p7sgh933)

 *此代码首先使用`&`, 将字符串拆分为键值对。之后，它遍历每一对并尝试再次拆分它，首先使用`!=`，如果失败，使用`=`。

* * *

### 使用正则表达式

```
preg_match_all('/((\w+)(=|!=)("\w+"|true|false|[\d\,]+)*)/', $string, $matches); 
```

`[...]`我添加了括号`\d`和转义的逗号`\,`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:18:15.287

实际上有一个内置函数[`parse_str`](http://php.net/parse_str)，正是为了这个目的。这里不需要正则表达式。*

# php - 无法通过 PHP 的 SoapClient 连接到 MS Web 服务

> ID：11100539
> 
> 赞同：1
> 
> 时间：2012-06-19T12:05:24.740
> 
> 标签：php, soap, appharbor

我在连接到 appharbor.com 上托管的 MS Web 服务时遇到了一些问题

这是php代码：

```
ini_set('soap.wsdl_cache_enabled',0);
ini_set('soap.wsdl_cache_ttl',0);

$options = array( 
    'soap_version'=>SOAP_1_2, 
    'exceptions'=>true, 
    'trace'=>1, 
    'cache_wsdl'=>WSDL_CACHE_NONE 
);

try {
    $client = new SoapClient("http://ppjparsanje.apphb.com/Prazniki.asmx?wsdl", $options);
    print_r($client->__call("get_praznike", array("json")));
    print_r($client->get_praznike("json"));
    print_r($client->__soapCall("get_praznike", array("json"), array('soapaction' => 'http://ppjparsanje.apphb.com/get_praznike')));
} catch(Excteption $e) {
    echo $e->getMessage()."<br />";
} 
```

错误是：

```
Fatal error:  Uncaught SoapFault exception: [HTTP] Could not connect to host 
```

这很奇怪，因为服务似乎工作正常。我也尝试添加端口 14275，但没有运气。有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:46:02.630

你犯了一个错误，肥皂的版本是 1 na 你在选项中传递了 1.2 那么它将如何连接

```
 $soapClient = new SoapClient('http://ppjparsanje.apphb.com/Prazniki.asmx?wsdl', array('cache_wsdl' => WSDL_CACHE_NONE) );

     print_r($soapClient); 
```

我得到输出：-因此由于代码错误，您会收到错误

```
 SoapClient Object ( [_soap_version] => 1 [sdl] => Resource id #3 ) 
```

好吧，我在这里有访问英国邮件 api 看看我是如何调用一个方法的，它有点不同，但你会明白的

[用于英国邮件 web 服务 api 的 php 肥皂客户端？](https://stackoverflow.com/questions/10511478/php-soap-client-for-uk-mail-webservice-api)

# java - 如何初始化一个类字段？

> ID：11100546
> 
> 赞同：0
> 
> 时间：2012-06-19T12:05:42.087
> 
> 标签：java, class

我见过开发人员以不同的方式初始化他们的类字段。其中三个非常受欢迎！有什么区别，它们中的任何一个更合适吗？

```
class Test {
    ArrayList<String> myArr = new ArrayList<String>(); // First Method 
}

class Test {
    ArrayList<String> myArr;
    public Test() {
        myArr = new ArrayList<String>(); // Second Method
    }
}

class Test {
    ArrayList<String> myArr;
    public Test() {
    }
    public void Init() {
        myArr = new ArrayList<String>(); // Third Method
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:08:30.680

1 和 2 或多或少是等效的，并且还允许您`final`在字段上使用修饰符。

（不同的是，在情况 1 中，该字段在构造函数调用之前被初始化，而在情况 2 中，该字段在调用构造函数时被初始化。）

3 是惰性初始化模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:09:31.773

第一个和第二个之间没有太大区别：区别在于语法上。

在第一种方法中，您将声明和定义放在一起，这样您就不会忘记初始化变量。

如果您想根据某些条件进行不同的初始化，则第二种和第三种方法可以提供更大的灵活性。

第三个是更多的框架，你必须有一个无参数的构造函数，并将分别调用“真正的”初始化方法（带有所有必要的参数）。第三种方法还允许更容易地将对象“重置”到其初始状态。

*注意*：如果您有一个`final`字段，则只能使用第一种或第二种方法，因为一旦发生初始分配，就无法重新分配它，并且该分配必须在构造函数结束时发生

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:29:44.467

1 和 2 是等价的，但是如果变量是静态的，那么行为会有所不同，如下面的代码

```
public class Test {
static String s="2"; // 1

Test()
{
    System.out.println(s);
    s="3"; //2
}

public static void main(String[] args) throws IOException {

    System.out.println("1="+s);
    new Test();
    System.out.println("1="+s); 
 } 
```

In 1 初始化在类加载时发生，但如果您在构造函数 (2) 中初始化静态变量，则将在构造对象时分配值。

3）根据需要，您正在初始化变量。

```
class Test {
ArrayList<String> myArr;
public Test() {
}
public void Init() {
    myArr = new ArrayList<String>(); // Third Method
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:09:45.673

这是关于控制和可读性：

第一个和第二个是等价的。

第二个帮助您控制初始化的顺序。

第三个可以提供延迟（惰性初始化），就像您测试您的课程并且不想创建所有内容一样。

# wcf - 服务调用上的 WCF 超时异常

> ID：11100551
> 
> 赞同：4
> 
> 时间：2012-06-19T12:05:52.107
> 
> 标签：wcf, wcf-data-services

我有一个 WCF 服务在现场给出以下错误

```
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 19/06/2012 10:39:09 
Event time (UTC): 19/06/2012 09:39:09 
Event ID: 501c1b630958413db7c7f746b0a467f7 
Event sequence: 74336 
Event occurrence: 742 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/5/ROOT-1-129844753959691296 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: <private> 
    Machine name: <private> 

Process information: 
    Process ID: 6112 
    Process name: w3wp.exe 
    Account name: IIS APPPOOL\<private> 

Exception information: 
    Exception type: TimeoutException 
    Exception message: The HTTP request to '<private>/EndPoint.svc' has exceeded the allotted timeout of 00:01:00\. The time allotted to this operation may have been a portion of a longer timeout.
   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)

The operation has timed out
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

Request information: 
    Request URL: http://<private>/ 
    Request path: / 
    User host address: <private> 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: IIS APPPOOL\<private>  

Thread information: 
    Thread ID: 110 
    Thread account name: IIS APPPOOL\<private>  
    Is impersonating: False 
    Stack trace:    at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)

Custom event details: 
```

我们的网站已关闭，我不知道在这里做什么。任何想法都是最受欢迎的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:27:25.280

尝试增加服务/客户端配置中的[SendTimeout](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.sendtimeout.aspx)和[ReceiveTimeout](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.receivetimeout.aspx)属性。

[WCF服务，如何增加超时？](https://stackoverflow.com/questions/1520283/wcf-service-how-to-increase-the-timeout)

# wpf - WPF 3D 性能

> ID：11100554
> 
> 赞同：1
> 
> 时间：2012-06-19T12:05:56.660
> 
> 标签：wpf, performance, 3d

我想画点云，在网上搜索显示 3D 中没有点，我需要绘制立方体。

所以我尝试添加到 viewPort3D 50,000 个立方体，它只需要很多时间（~ 5 分钟）

我可以对这段代码做些什么来获得更好的性能吗？

这是我的代码：

```
 public partial class MainWindow : Window
{
    private Int32Collection _indices;
    DiffuseMaterial _diffuseMaterial = new DiffuseMaterial(Brushes.Gray);

    public MainWindow()
    {
        Int32CollectionConverter icc = new Int32CollectionConverter();
        _indices = (Int32Collection)icc.ConvertFromString(@"
                                  3,2,4 2,7,4 
                                  2,1,7 7,1,6
                                  4,7,5 5,7,6
                                  0,3,4 0,4,5
                                  1,0,5 1,5,6
                                  1,2,3 1,3,0      
                                 ");

        InitializeComponent();

        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();

        for (int i = 0; i < 50000; i++)
        {
            AddFeature(1, i, 1);
        }

        stopwatch.Stop();
        Console.WriteLine(stopwatch.Elapsed.TotalSeconds + "sec");
    }

    private void AddFeature(double x, double y, double z, double size = 1)
    {
        GeometryModel3D geometryModel3D = new GeometryModel3D();
        MeshGeometry3D model = new MeshGeometry3D();

        model.Positions.Add(new Point3D(-size + x, -size + y, -size + z));
        model.Positions.Add(new Point3D(size + x, -size + y, -size + z));
        model.Positions.Add(new Point3D(size + x, -size + y, size + z));
        model.Positions.Add(new Point3D(-size + x, -size + y, size + z));
        model.Positions.Add(new Point3D(-size + x, size + y, size + z));
        model.Positions.Add(new Point3D(-size + x, size + y, -size + z));
        model.Positions.Add(new Point3D(size + x, size + y, -size + z));
        model.Positions.Add(new Point3D(size + x, size + y, size + z));

        model.TriangleIndices = _indices;
        geometryModel3D.Material = _diffuseMaterial;
        geometryModel3D.Geometry = model;
        model3DGroup.Children.Add(geometryModel3D);
    }

} 
```

XAML：

```
<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Viewport3D x:Name="Viewport3D" Margin="4,4,4,4" Grid.Row="0" Grid.Column="0" ClipToBounds="False" IsHitTestVisible="False">
        <ModelVisual3D>
            <ModelVisual3D.Content>
                <Model3DGroup x:Name="model3DGroup">
                    <!-- Lights -->
                    <AmbientLight Color="Gray"/>
                    <DirectionalLight Color="Gray" Direction="1,-2,-3" />
                    <DirectionalLight Color="Gray" Direction="-1,2,3" />
                </Model3DGroup>
            </ModelVisual3D.Content>
        </ModelVisual3D>

        <Viewport3D.Camera>
            <PerspectiveCamera 
              Position = "2, 4, 6"
              LookDirection = "-1, -2, -3"
              UpDirection = "0, 1, 0"
              FieldOfView = "60">
                <PerspectiveCamera.Transform>
                    <Transform3DGroup>
                        <ScaleTransform3D x:Name="scaleTransform3D" CenterX="0" CenterY="0" CenterZ="0" />
                        <RotateTransform3D>
                            <RotateTransform3D.Rotation>
                                <AxisAngleRotation3D x:Name="axisAngleRotate1"
                                  Axis="0 1 0" 
                                   />
                            </RotateTransform3D.Rotation>
                        </RotateTransform3D>
                        <RotateTransform3D>
                            <RotateTransform3D.Rotation>
                                <AxisAngleRotation3D x:Name="axisAngleRotate2"
                                  Axis="1 0 0" 
                                   />
                            </RotateTransform3D.Rotation>
                        </RotateTransform3D>
                    </Transform3DGroup>
                </PerspectiveCamera.Transform>
            </PerspectiveCamera>
        </Viewport3D.Camera>
    </Viewport3D>

</Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:05:39.017

您可以对代码进行两项更改以显着提高性能：

1.  在通过调用该方法`GeometryModel3D`将其添加到组之前冻结每个。通过对and 对象`GeometryModel3D.Freeze()`调用 freeze，您可能还会看到一个小的改进。`MeshGeometry3D``MeshGeometry3D.Positions`

2.  将所有`GeometryModel3D`对象添加到一个临时`Model3DCollection` 实例，并`Model3DGroup.Children`在 for 循环结束时将实例分配给。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:12:12.100

您需要将这些模型添加到一个组中，这会大大提高性能。

你可以在这里找到完整的例子。 [http://msdn.microsoft.com/en-US/System.Windows.Media.Media3D.Model3DGroup.aspx](http://msdn.microsoft.com/en-US/System.Windows.Media.Media3D.Model3DGroup.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:04:35.533

与 OpenGL 和 DirectX 相比，WPF 3D 在速度上有很大的限制，您可以轻松达到极限。

# java - 这个方法在java中重载吗？

> ID：11100559
> 
> 赞同：2
> 
> 时间：2012-06-19T12:06:09.623
> 
> 标签：java, inheritance, overloading

在下面的代码中，我可以说`class B`有重载的`add`方法吗？

```
class A
{
   public void add()
     {
           //some code
     }

}
class B extends A
{
    public void add(int a)
     {
            // some code
     }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:07:37.203

*点头*

是的，这是方法重载的一个例子。方法覆盖的一个例子是，

```
class B extends A{
    @Override
    public void add(){
        // do stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:08:37.797

从 暴露的 API 的角度来看`B`，一个`add`方法已经存在，即使是超类提供的。由于您提供了另`add`一种具有不同参数的方法，因此这是重载。提供相同的签名将是压倒一切的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:12:27.070

是的，这是方法重载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:23:00.393

是的。考虑这个更直接的重载示例：

```
class A
{
   public void add()
     {
           //some code
     }

   public void add(int a)
     {
           //this method is overloading add() from within its own class
     }

} 
```

现在，由于 B，在您的示例代码中扩展了 A，它继承了 add()，因此可以肯定地说，即使 add() 没有在 B 中明确定义，该方法也是可用的，因此定义 add(int a) 可能被认为是 add() 的重载

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T12:14:52.883

是的，你可以说类`B`重载了方法`add()`。由于`public void add()`继承，在 B 类中已经存在。创建具有相同名称但签名不同（即参数的数量、类型和顺序）的方法是重载。

# c# - 将网格中的列转换为图片

> ID：11100564
> 
> 赞同：0
> 
> 时间：2012-06-19T12:06:40.170
> 
> 标签：c#, image, windows-phone-7.1

有没有办法将整个列从网格转换为 Windows Phone 7.1 应用程序中的图像。我试图找到一种方法来做到这一点，但找不到任何东西。

我的问题是我必须改变它：

```
 <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="50"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Image Grid.Row="0" Grid.Column="0" Height="150" HorizontalAlignment="Left" Name="image1" Stretch="Fill" Width="180" Source="{Binding ***0}" />
        <Grid Grid.Row="1" Grid.Column="0" Background="White">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="150"/>
            </Grid.ColumnDefinitions>

            <Image Grid.Column="0" Height="30" Width="30" Source="{Binding ***1}"/>
            <TextBlock Grid.Column="1" Height="30" Foreground="Black" Text="{Binding ***2}" TextAlignment="Center" />
        </Grid>
    </Grid> 
```

成一张图片。所以我必须将整个 Grid.Column="0" 从主网格更改为大小为 180x180 的图片。之后，我必须将其保存到 *.jpg 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:28:50.643

您可以[从 UI 元素创建位图](http://msdn.microsoft.com/en-us/library/dd638675%28v=vs.95%29.aspx)，然后[将其保存为 jpeg](http://msdn.microsoft.com/en-us/library/ff769549%28v=vs.92%29.aspx)。

由于您有多个元素（列中的所有内容），您可能必须捕获多个位图，将它们组合起来，然后另存为 jpeg。

# javascript - jQuery 从 HTML 字符串构建不正确的 DOM

> ID：11100567
> 
> 赞同：0
> 
> 时间：2012-06-19T12:06:58.893
> 
> 标签：javascript, jquery, html, dom

我发现 jQuery 并不总是从 HTML 字符串创建正确的 DOM。这是一个小示例代码：

```
var x = "<div><p><ul><li>1</li></ul></p></div>";
console.log('x = ' + x);
console.log('jQuery(x) = ' + jQuery(x).html());
var y = "<div><div><ul><li>1</li></ul></div></div>";
console.log('y = ' + y);
console.log('jQuery(y) = ' + jQuery(y).html()); 
```

这是我用 jQuery 1.7.1 运行的输出：

```
x = <div><p><ul><li>1</li></ul></p></div>
jQuery(x) = <p></p><ul><li>1</li></ul><p></p>
y = <div><div><ul><li>1</li></ul></div></div>
jQuery(y) = <div><ul><li>1</li></ul></div> 
```

如您所见，第二个示例创建了正确的 DOM，而第一个示例没有。唯一的区别是`<p>`标签而不是`<div>`. 这是 jQuery 的错误还是功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T12:10:19.387

这*可能*是浏览器的细微差别，[因为elements 在elements`<ul>`中是非法的`<p>`](https://stackoverflow.com/a/5681514/304588)。

可能发生的情况是，当 jQuery 尝试在您的字符串中创建它所理解的 HTML 元素时，浏览器会“自动更正”随着 jQuery 生成的 HTML。

# c# - 禁用 Richtextbox 上的平滑滚动

> ID：11100569
> 
> 赞同：5
> 
> 时间：2012-06-19T12:07:17.453
> 
> 标签：c#, .net, winforms, richtextbox

我有一个标签，它根据 RichTextBox 上的文本标记行号。我已经挂钩了 Vscroll 的事件来处理标签。

```
private void rtbLogicCode_VScroll(object sender, EventArgs e)
{
    Point pt = new Point(0, 1);
    int firstIndex = rtbLogicCode.GetCharIndexFromPosition(pt);
    int firstLine = rtbLogicCode.GetLineFromCharIndex(firstIndex);

    pt.X = ClientRectangle.Width;
    pt.Y = ClientRectangle.Height;
    int lastIndex = rtbLogicCode.GetCharIndexFromPosition(pt);
    int lastLine = rtbLogicCode.GetLineFromCharIndex(lastIndex);

    // Small correction
    if (rtbLogicCode.Text.EndsWith("\n"))
        lastLine++;

    labelLogicCode.ResetText();
    LabelLineNum(firstLine+1,lastLine);
}
#endregion

private void LabelLineNum(int startNum, int lastNum)
{
    labelLogicCode.Font = UIConstant.DDCLogicCodeFont;
    for (int i = startNum; i < lastNum; i++)
    {
        labelLogicCode.Text += i + Environment.NewLine;
    }
} 
```

除了 RichTextBox 使用平滑滚动功能之外，一切似乎都正常工作，在许多情况下，当用户没有一直滚动到下一行时，它会搞砸我的行号。这会导致行号与 RichTextBox 上显示的实际文本不同步。

最后，我需要禁用平滑滚动功能来完成此操作。有人告诉我，您可以覆盖 RichTextBox 的 postMessage API 以禁用上述功能，但是在搜索了许多文档后，我找不到任何好的文档。

我希望有一个关于如何禁用平滑滚动功能的尽可能详细的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:29:49.653

这是 Microsoft 的一个[VB 示例](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/f41045bf-7f19-4303-b297-09f93cf56cd2)，建议您需要拦截`WM_MOUSEWHEEL`消息。

这是 C# 中的一个快速原型：

```
class MyRichTextBox : RichTextBox {

    [DllImport("user32.dll")]
    public static extern IntPtr SendMessage(
          IntPtr hWnd,      // handle to destination window
          uint Msg,       // message
          IntPtr wParam,  // first message parameter
          IntPtr lParam   // second message parameter
    );

    const uint WM_MOUSEWHEEL = 0x20A;
    const uint WM_VSCROLL = 0x115;
    const uint SB_LINEUP = 0;
    const uint SB_LINEDOWN = 1;
    const uint SB_THUMBTRACK = 5;

    private void Intercept(ref Message m) {
        int delta = (int)m.WParam >> 16 & 0xFF;
        if((delta >> 7) == 1) {
            SendMessage(m.HWnd, WM_VSCROLL, (IntPtr)SB_LINEDOWN, (IntPtr)0);
        } else {
            SendMessage(m.HWnd, WM_VSCROLL, (IntPtr)SB_LINEUP, (IntPtr)0);
        }
    }

    protected override void WndProc(ref Message m) {
        switch((uint)m.Msg) {
            case WM_MOUSEWHEEL:
                Intercept(ref m);
                break;
            case WM_VSCROLL:
                if(((uint)m.WParam & 0xFF) == SB_THUMBTRACK) {
                    Intercept(ref m);
                } else {
                    base.WndProc(ref m);
                }
                break;
            default:
                base.WndProc(ref m);
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-12T05:02:39.023

我知道这已经过时了，但是如果 Dan Sporici 的[网站](https://codingvision.net/c-disable-richtextboxs-smooth-scrolling)出现故障，我想我会发布他出色的解决方案。它很简单，只需复制和粘贴即可轻松工作。

```
class editedRichTextBox : RichTextBox
{
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern int SendMessage(IntPtr hWnd, int wMsg, IntPtr wParam, IntPtr lParam);

    //this message is sent to the control when we scroll using the mouse
    private const int WM_MOUSEWHEEL = 0x20A;

    //and this one issues the control to perform scrolling
    private const int WM_VSCROLL = 0x115;

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_MOUSEWHEEL)
        {
            int scrollLines = SystemInformation.MouseWheelScrollLines;
            for (int i = 0; i < scrollLines; i++)
            {
                if ((int)m.WParam > 0) // when wParam is greater than 0
                    SendMessage(this.Handle, WM_VSCROLL, (IntPtr)0, IntPtr.Zero); // scroll up 
                else  
                    SendMessage(this.Handle, WM_VSCROLL, (IntPtr)1, IntPtr.Zero); // else scroll down
            }
            return;
        }
        base.WndProc(ref m);
    }
} 
```

# cakephp - CakePHP：有还是没有 Auth 组件？

> ID：11100571
> 
> 赞同：0
> 
> 时间：2012-06-19T12:07:24.583
> 
> 标签：cakephp, authentication, cakephp-2.0

我目前正在将其用于我的管理面板：**[管理部分](http://www.jamesfairhurst.co.uk/posts/view/cakephp_1_3_3_admin_section_template_files/)**

**我有一个简单的问题：**我是否必须使用 Auth 组件，或者这是用于管理部分的足够安全的方式？

如果你推荐 Auth Component，有没有像样的教程？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:16:51.517

您发布的该教程在 CakePHP 1.3.3 上进行了测试，您的问题被标记为 CakePHP 2.0 。如果您使用的是 2.0 > 使用 Auth 很可能会防止向后不兼容的问题，如果对 Auth 进行了更改，那么 CakePHP 作者会在迁移指南中为您提供建议。

对不起，我不知道一个好的教程，但是有手册，一个好的谷歌应该提供一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:16:32.507

I recommend using Auth Component... Here is a great Auth CakePHP 2.0 tutorial:

[http://www.youtube.com/watch?v=zvwQGZ1BxdM](http://www.youtube.com/watch?v=zvwQGZ1BxdM)

# collections - Backbone.js - 通过集合通过 ID 列表获取模型列表

> ID：11100572
> 
> 赞同：0
> 
> 时间：2012-06-19T12:07:29.183
> 
> 标签：collections, backbone.js, models, fetch

我想通过模型 ID 列表的集合来获取一堆模型。我的问题是我必须一次获取几十个模型。我不想在触发 GET 请求时将几十个 ID 放入 URL。

我正在考虑一个 POST 请求。但这可以通过 Collection 来完成吗？

也许这样：[https ://gist.github.com/2953670](https://gist.github.com/2953670)

我知道我正在强奸一个 POST/create 请求。或者，我想到了 jQuery.post()。

更好的方法是什么？

在此先感谢，JW

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:16:35.510

每次模型/集合执行同步调用时，它实际上都会执行`return (this.sync || Backbone.sync).call...`. 这允许您为特定模型或集合实现自定义同步。

```
var Equipment.Collection = Backbone.Collection.extend({ 
    ...

    "sync": urSync,

    ...
}); 
```

# caching - 当多个 sstable 中存在相同的密钥时，cassandra 密钥缓存如何工作？

> ID：11100573
> 
> 赞同：4
> 
> 时间：2012-06-19T12:07:30.260
> 
> 标签：caching, cassandra

1）根据datastax键缓存存储rowkey的主键索引。

2）在我们的例子中，我们为键缓存分配了足够的内存，并且相同的键存在于具有不同列的多个 sstable 中。

3) 如果没有调用从多个 sstables 访问所有这些相同的密钥，那么索引如何存储在密钥缓存中？它会存储所有 sstable 的索引还是仅存储最近访问的最后一个 sstable 的索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:16:48.517

来自[文档](http://www.datastax.com/dev/blog/maximizing-cache-benefit-with-cassandra)

> 键缓存以每个列族为基础在内存中保存键的位置。

~~密钥缓存用作它存在的所有 sstable 中的密钥的索引。~~

每个 sstable 都维护密钥缓存。因此，密钥缓存可以为每个 SSTable [最少] 节省一次磁盘寻道。每个键查找最终都会至少命中所有 sstable 的布隆过滤器。成功时验证密钥缓存只是为了跳过 sstable 索引 [pointers to key sample @ interval of 127 by default] 查找。

阅读 cassandra 的路径是这样的

**Memtable -> Row Cache (Off heap) -> Bloom filter -> Key cache -> SSTable Index [if miss]** -> *Disk*

粗体表示的所有内容都保存在内存中（在堆中或堆外）。因此它们不会加起来磁盘寻道

每个 sstable 都应该维护自己的密钥缓存。来自幻灯片 101 的源和[来自](http://www.slideshare.net/acunu/cassandra-eu-2012-storage-internals-by-nicolas-favrefelix)幻灯片 23 的[Source2](http://www.slideshare.net/aaronmorton/cassandra-does-what-code-mania-2012)

在关键缓存未命中的情况下，使用 sstable 索引 - 这将提供线索，即第 128 个范围可能是关键所在。从那时起磁盘寻找键开始[可以是 1 到多个]。

如果我得到任何关于 cassandra 如何决定每个 sstable 的密钥缓存大小可能是 [key_cache_conf/no_of_sstables] 的线索，我将再次更新答案？

# java - Android 2.3.3，使用 tabhost 和第二个 tabhost 加载布局不起作用

> ID：11100576
> 
> 赞同：0
> 
> 时间：2012-06-19T12:07:45.053
> 
> 标签：java, android, layout, android-tabhost, android-sdk-2.3

下面是我想要的图片。

![在此处输入图像描述](../Images/4b83979b67e8e4bc7748a4c39c31ff7e.png)

马上。当我点击一个项目（见图 2）时，会出现不正确的版本（见图 3）。

如何将第二个 tabhost（见图 3）加载到第一个 tabhost 的框架布局中？

现在的代码（位于 2 中，见图）（产生不正确的布局）是这样的：

```
listView.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                Intent i = new Intent(StaticResources.FrameContainer.getContext(), AppSecondTabHost.class);
                StaticResources.FrameContainer.getContext().startActivity(i);
            }
        }); 
```

静态变量：StaticResources.FrameContainer 在主活动中设置（参见图片中的 1），如下所示：

```
StaticResources.FrameContainer = (View)getTabHost().getTabContentView(); 
```

知道如何重写 onitem 点击事件以显示正确的版本吗？如图所示，右下角版本有 2 个标签主机。

**编辑**

要特别清楚。我在图片 1 中创建了 tabhost。当我单击其中一个选项卡时，一个活动开始并且该活动显示一个列表（图 2）。当我 THEN 点击这个列表中的一个项目时，这个项目会将它的 id 存储在一个意图中，并在第一个 tabhost 中打开第二个 tabhost（图 3-4）。然后，第二个 tabhost（图 3）将读取在 onitemclick 事件中在图 2 中设置的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:33:43.067

如果您使用的是 tabhost，如果您将所有选项卡添加到 tabhost，它将自动处理所有选项卡单击事件。您不需要使用 onClickListener 手动更改 tabview。

以下是我的应用程序中的一个示例：

```
 intent = new Intent().setClass(this, deployment.class);
    intent.putExtra("deploy_data", deployRawData);

    spec = tabHost.newTabSpec("Deployment").setIndicator("Deployment",
                      res.getDrawable(R.drawable.man))
                  .setContent(intent);

    tabHost.addTab(spec); 
```

通过这种方式，您实际上是在添加到 tabhost 之前将活动和 tabview 捆绑在一起。它应该可以帮助您节省大量对 onClickListener 进行编码的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:36:02.157

TabHost tabHost=getTabHost(); TabHost.TabSpec tabSpec; 资源 res=getResources();

tabSpec=tabHost.newTabSpec("第一"); tabSpec.setIndicator("FirstTabName",res.getDrawable(R.drawable.image)); Intent i1=new Intent(this,NextClass.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); tabSpec.setContent(i1); tabHost.addTab(tabSpec);

像这样，您将 Intent 定义为选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:43:09.393

```
 TabHost tabHost=getTabHost();
    TabHost.TabSpec tabSpec;
    Resources res=getResources();

    tabSpec=tabHost.newTabSpec("First");
    tabSpec.setIndicator("FirstTabName",res.getDrawable(R.drawable.image));
    Intent i1=new Intent(this,NextClass.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    tabSpec.setContent(i1);
    tabHost.addTab(tabSpec); 
```

像这样，您将 Intent 定义为选项卡。因此，您的标签将保持不变，底部内容将是您的活动。

从列表中选择一个项目时，将其指向下一个类，其中您有一个不同的布局，只有两个选项卡。.

# java - Java：GridLayout 单元格似乎合并

> ID：11100577
> 
> 赞同：2
> 
> 时间：2012-06-19T12:07:48.717
> 
> 标签：java, swing, merge, cell, grid-layout

首先，我是编程新手，这是我在 Java 和一般编程方面的第一个主要任务，所以如果我做了一些非常愚蠢的事情，请告诉我，这样我就可以改正这个坏习惯。

无论如何，对于这个问题，我目前正在尝试创建一个 gridLayout ，它具有可变数量的行，这些行将填充一个标签，该标签具有来自文件的文本。我的问题特别是在 gridLayout 上，我添加的标签和常量似乎正在消失在一个巨大的单元格中。到目前为止，我所做的研究都没有导致任何结果，所以我想我不妨提出这个问题。

```
public void fillTimetablePane(JPanel pane){
    int noOfRows = pref.getNoOFPeriods()+1; 
    pane.setLayout(new GridLayout(noOfRows,4));
    pane.setBorder(BorderFactory.createLineBorder(Color.black));
    JLabel label = new JLabel();
    int i=0;
    while (i<4){

        switch (i) {
        case 0: label.setText("Lesson");
                break;
        case 1: label.setText("Period");
                break;
        case 2: label.setText("Room");
                break;
        case 3: label.setText("Teacher");
                break;
        }
        i++;
        pane.add(label);
    }
} 
```

这是我添加运行以下代码时发生的情况的图像： [http ://www.freeimagehosting.net/1hqn2](http://www.freeimagehosting.net/1hqn2)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:19:24.307

您添加了 4 次相同的标签。将新的 JLabel 移动到您的 while 循环中

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T13:05:22.420

```
public void fillTimetablePane(JPanel pane){
    int noOfRows = pref.getNoOFPeriods()+1; 
    pane.setLayout(new GridLayout(noOfRows,4));
    pane.setBorder(BorderFactory.createLineBorder(Color.black));
    //JLabel label = new JLabel();   // from here
    int i=0;                         //   V
    while (i<4){                     //   V
        JLabel label = new JLabel(); // to here
        switch (i) {
        case 0: label.setText("Lesson");
                break;
        case 1: label.setText("Period");
                break;
        case 2: label.setText("Room");
                break;
        case 3: label.setText("Teacher");
                break;
        }
        i++;
        pane.add(label);
    }
} 
```

Ok, why is it not working in your case but works fine in my case? The problem is that you add your label 4 times and change the text inbetween. In a Layout, a single component can only be existing once. So what happens is that when you add your label a second/third/fourth time, its location in the grid will be updated and not added again.

In my case, I actually create a new `JLabel` in every iteration of the loop and therefore adding a different label to the `JPanel`.

Hope this is clear enough. Just ask if something is not clear.

# c# - 私有静态只读字段的代码合同和失败

> ID：11100587
> 
> 赞同：4
> 
> 时间：2012-06-19T12:08:40.170
> 
> 标签：c#, settings, code-contracts, contracts, requires

我的班级中有一个私有静态只读字段：

```
public class MyClass
{
    // ISSUE #1 -- requires unproven: path != null
    private static readonly DirectoryInfo MyDirectory =
        new DirectoryInfo(Settings.Default.MyDirectoryPath);

    protected virtual void SomeMethod()
    {
        if (MyDirectory.Exists)
        {
            // ISSUE #2 -- requires unproven: !string.IsNullOrEmpty(path)
            var catalog = new DirectoryCatalog(MyDirectory.FullName);
        }
    }
} 
```

对于问题 #1，我使用了一个空合并运算符来默认为某个魔术字符串并修复了它，但我真的不喜欢那个解决方案。我希望有更好的解决方案。

对于问题 #2，我唯一能想到的是使用 Contract.Assumes，因为如果我尝试使用`Contract.Requires(MyDirectory.Exists || !String.IsNullOrEmpty(MyDirectory.FullName));`它会抱怨可见性（在受保护方法的要求中使用的私有字段）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:28:15.413

在当前项目中使用代码合同一段时间后，我发现它确实有时会迫使您重写代码以纠正问题。你真的有两个选择。

1.  您可以将该设置添加到您的项目设置中，以输出要应用的正确属性是忽略某些警告。这是通过将“-outputwarnmasks”标志添加到项目文件设置的“代码合同”选项卡的“高级”部分下的“额外静态检查器选项”来完成的。这会将信息添加到构建输出窗口，为您添加正确的属性以忽略个别情况。（在处理实体框架时非常有用）。
2.  您可以重写您的代码以将正确的 Requires 和 Ensures 添加到您的代码中，这样警告就不会出现。

如果您想重写代码：要解决问题 #1，您必须包装 Settings 类并将新的 MyDirectoryPath 作为不是代码生成的属性公开，以便您可以在其中添加检查并返回一个空字符串和`Contract.Ensures(Contract.Result<string>() != null)`在属性的 Getter 顶部添加。

要解决问题 #2，您必须将对类字段的访问封装在一个私有静态属性中，该属性添加了正确的 Ensures 和 Requires。

我通常会尽可能地重写代码，除了需要添加属性的实体框架/LINQ，尤其是复杂查询。

** 免责声明 ** 这些只是我找到的解决问题的方法，因为没有大量关于解决这些类型项目的其他方法的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:55:01.090

**问题 #1**是由 Visual Studio 生成的代码的结果，`Settings.Default.MyDirectoryPath`而该属性没有任何合同。此问题不仅限于空字符串。现在许多 API 的合约要求 a`TimeSpan`为非负数，但直接在 API 中使用设置会生成代码合约警告。

解决此问题的一种方法是将设置包装在具有合同的方法中。例如：

```
String GetMyDirectoryPath() {
  Contract.Ensures(Contract.Result<String>() != null);
  var myDirectoryPath = Settings.Default.MyDirectoryPath;
  Contract.Assume(myDirectoryPath != null);
  return myDirectoryPath;
} 
```

请注意`Contract.Assume`实际如何验证您的设置（代码合同无法验证，因为它由外部配置文件控制）。如果它`TimeSpan`是预期为非负数的，您可以使用您自己的异常来`Contract.Assume`进行验证，从而导致`ContractException`使用您自己的异常或其他方法。

添加这个额外的层有点乏味，但是因为设置是在应用程序之外定义的，所以它需要在某个时候进行运行时验证，就像您必须验证交互式用户输入一样。

**问题 #2**可能是因为`DirectoryInfo`没有定义任何合同。最简单的方法是使用`Contract.Assume`. 这将声明您认为是预期行为，`DirectoryInfo`但运行时检查仍将到位，以确保您的信念是正确的（前提是您将检查保留在代码中）。

```
var path = MyDirectory.FullName;
Contract.Assume(!string.IsNullOrEmpty(path));
var catalog = new DirectoryCatalog(path); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:28:36.663

好吧，对于问题#2，我想你可能想使用`&&`not `||`。但除此之外，也许对于问题#1，您可以将这些检查放在静态构造函数中？问题#2 的另一个选项是将目录作为参数的方法：

```
private static readonly DirectoryInfo MyDirectory;

static MyClass()
{
    Contract.Requires(Settings.Default.MyDirectoryPath != null);
    MyDirectory = new DirectoryInfo(Settings.Default.MyDirectoryPath);
}

protected void SomeMethod()
{
    SomeOtherMethod(MyDirectory);
}

protected virtual void SomeOtherMethod(DirectoryInfo directory)
{
    Contract.Requires(directory.Exists && !String.IsNullOrEmpty(directory.FullName));

    var catalog = new DirectoryCatalog(directory.FullName);
} 
```

我没有太多使用`Contract`API 的经验，所以我可能会对这一切感到不快。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T03:29:00.100

> Contract.Requires(MyDirectory.Exists || !String.IsNullOrEmpty(MyDirectory.FullName));

不要这样做！`MyDirectory.Exists`可以随时更改*，*调用者无法保证。如果目录不存在，只需抛出异常 - 这就是异常的用途。

# sql - 从表到表的批量插入

> ID：11100589
> 
> 赞同：10
> 
> 时间：2012-06-19T12:08:42.180
> 
> 标签：sql, sql-server, insert, bulkinsert

我正在实现**A/B/View**场景，这意味着**View**指向**表 A**，而**表 B**被更新，然后发生切换，并且在加载表 A 时视图指向表 B。

切换每天发生。有数百万行要更新，成千上万的用户正在查看视图。我在 SQL Server 2012 上。

我的问题是：

*   如何以最快的方式将数据从另一个表插入到一个表中？（在存储过程中）
*   有什么方法可以使用 BULK INSERT？或者，是使用常规插入/选择最快的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:20:20.513

我倾向于使用 SSIS。

将表 A 设为 OLEDB 源，将表 B 设为 OLEDB 目标。您将绕过事务日志，从而减少数据库的负载。使用 T-SQL 执行此操作的唯一方法（我能想到的）是更改整个数据库的恢复模型，这远非理想，因为这意味着不存储任何事务，而不仅仅是用于传输的事务。

**设置 SSIS 传输**

创建一个新项目并将数据流任务拖到您的设计图面上

![工具箱菜单](../Images/b6b93f1515a9a6bc972927b4df8beff3.png)

双击您的数据流任务，这将带您进入“数据流”选项卡。然后从“数据流源”菜单拖放一个 OLE DB 源，从“数据流目标”菜单拖放一个 OLE DB 目标

![数据流源](../Images/8291632eee3bb0d44a3d3244c3fc77a7.png)![数据流目的地](../Images/2ae8bb77f97a529d9ba0ccc0d3795bbc.png)

双击 OLE DB 源，设置与服务器的连接，选择要从中加载的表，然后单击确定。将绿色箭头从 OLE DB 源拖动到目标，然后双击目标。设置您的连接管理器、目标表名称和列映射，您应该一切顺利。

**[MSDN 上的 OLE DB 源文档](http://msdn.microsoft.com/en-us/library/ms141696.aspx)**

**[MSDN 上的 OLE DB 目标文档](http://msdn.microsoft.com/en-us/library/ms141237.aspx)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:33:45.263

你可以从 SrcTable 中将一个 Select ColA、ColB 放入 DestTable_New。加载 DestTable_New 后，重新创建索引和约束。

然后将 DestTable 重命名为 DestTable_Old 并将 DestTable_New 重命名为 DestTable。重命名非常快。如果结果出现问题，您还可以备份附近的前一个表 (DestTable_Old)。

我曾经做过这种场景，我们必须让系统 24/7 运行并且每天需要加载数千万行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T14:54:56.053

你可以这样做

```
SELECT fieldnames
INTO DestinationTable
FROM SourceTable 
```

正如几个答案所暗示的那样，这应该尽可能快（取决于您需要重新创建多少索引等）。

但我建议使用**[同义词](http://msdn.microsoft.com/en-us/library/ms187552.aspx "这里")**将指针从一个表更改为另一个表。它们非常透明，在我看来，比更新视图或重命名表更干净。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-26T06:39:17.470

我知道这个问题很老，但我一直在寻找同一个问题的答案，但没有发现任何真正有用的东西。是的，SSIS 方法是一种可能性，但问题需要一个存储过程。

令我高兴的是，我（几乎）发现了原始问题想要的解决方案；您可以使用 CLR SP 来完成。

将 TableA 中的数据选择到 DataTable 中，然后使用 SqlBulkCopy 类的 WriteToServer(DataTable dt) 方法，将 TableB 作为 DestinationTableName。

唯一的小缺点是 CLR 过程必须使用外部访问才能使用 SqlBulkCopy，并且不适用于上下文连接，因此您需要稍微调整一下权限和连接字符串。但是，嘿！没有什么是完美的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:18:52.820

`INSERT... SELECT...`功能与`BULK INSERT`. 您可以使用 SSIS，就像@GarethD 说的那样，但是如果您只是将行从 table1 复制到 table2，那可能会过于复杂。

如果您要复制大量数据，请密切注意事务日志——在进行大量插入时，它会迅速膨胀。一种解决方法是“分块”您正在插入的数据，方法是循环处理一次仅处理 100,000 或 10,000 行的插入语句（取决于行的宽度，即每次传递多少 MB）。

（只是好奇，你是在`ALTER VIEW`重置视图吗？我曾经做过类似的事情，尽管我们必须有四个表和四个视图来支持过去/现在/下一个/交换集。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T13:24:47.857

你可以简单地这样做

```
 select * into A from B Where [criteria] 
```

这将根据条件从 B 中选择数据并将其插入 A，前提是列相同，或者您可以指定列名而不是 *。

# javascript - window.location.pathname Chrome vs Mozilla

> ID：11100591
> 
> 赞同：0
> 
> 时间：2012-06-19T12:08:53.507
> 
> 标签：javascript, browser

我想通过函数 window.location.pathname 更改路径名。我有这个源代码。

```
var hash = window.location.hash;
window.location.pathname = hash; 
```

在 Mozilla 中它可以正常工作，但在 Chrome 中却不行。Chrome 给我写这个地址。

> /%23!stranka=novinky&cisloStranky=1&rubrika=novinky&clanek=783?stranka=kontakty#!stranka=novinky&cisloStranky=1&rubrika=novinky&clanek=783

哈希值是`#!stranka=novinky&cisloStranky=1&rubrika=novinky&clanek=783`

有人知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:24:27.973

你必须明白这也`location.hash`包括它`#`本身。根据规范，其余部分`location.hash`是 URL 编码的，但`#`不是。

*我说的是“按规格”，因为 Firefox 有一个与该属性相关的[错误。](https://bugzilla.mozilla.org/show_bug.cgi?id=483304)`location.hash`*

如果要更改`location.pathname`为包含值的散列，则必须在执行此操作`#`之前对其进行编码。

*例子：*

```
var hash=location.hash.substring(1)
location.pathname='%23'+hash 
```

如果您不想包含哈希，只需使用

```
var hash=location.hash.substring(1)
location.pathname=hash 
```

# c - 错误：未知类型名称'GtkObject'

> ID：11100593
> 
> 赞同：0
> 
> 时间：2012-06-19T12:09:01.337
> 
> 标签：c, gtk

```
#include <gtk/gtk.h>
#include <gtksourceview/gtksourceview.h>

static gboolean delete_event(GtkWidget *widget, GdkEvent  *event, gpointer data) {
  gtk_main_quit();
}

int main(int argc, char *argv[]) {
  gtk_init (&argc, &argv);

  /* Set up window */
  GtkWidget *window;
  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  g_signal_connect(window, "delete-event", G_CALLBACK(delete_event), NULL);

  /* Draw widgets */
  gtk_widget_show (window);

  gtk_main ();

  return 0;
} 
```

这是我的代码，我是这样编译的：

```
gcc -o file `pkg-config --cflags --libs gtk+-3.0 gtksourceview-2.0` file.c 
```

知道我做错了什么吗？谢谢你。

```
In file included from /usr/include/gtksourceview-2.0/gtksourceview/gtksourceview.h:30:0,
                 from lidedit.c:2:
/usr/include/gtksourceview-2.0/gtksourceview/gtksourcecompletion.h:60:2: error: unknown type name ‘GtkObject’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:54:16.063

gtksourceview 2 需要 GTK+-2。要与 GTK+-3 一起使用，您应该使用 gtksourceview 3。

# asp.net - 如何在 ASP.NET 中制作正则表达式验证器以停止插入数据？

> ID：11100597
> 
> 赞同：0
> 
> 时间：2012-06-19T12:09:15.220
> 
> 标签：asp.net, regex

我在 ASP.NET 中有一个网格视图，网格的一列是时间（hh：mm）。我已经为该领域使用了验证器。他们看起来像这样

```
 <FooterTemplate>
            <asp:TextBox ID="st_timef" runat="server"/>
             <asp:RegularExpressionValidator ID="stRegularExpressionValidator" runat="server" ErrorMessage="HH:MM!"
                            ValidationExpression="/(?:[01]?\d|2[0-3]):(?:[0-5]\d)$/" ControlToValidate="st_timef" />
            <asp:RequiredFieldValidator ID="stValidator" runat="server"  ControlToValidate="st_timef" Text="*" ValidationGroup="validaiton"/>
        </FooterTemplate> 
```

验证器工作，但我对正则表达式验证器有疑问，

虽然它显示错误输入格式的错误，但它仍然允许我按下更新数据的按钮（这不是普通验证器的情况）。

我需要验证器停止运行我的更新功能，它在验证中显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:42:46.787

您必须为和验证器设置属性的*通用*验证组名称。`ValidationGroup``TextBox``Button``RegularExpression`

> 插入正确格式后如何使错误消失？

将错误描述设置`Text`为验证控件的属性（将空字符串设置为 ErrorMessage 属性）。

# google-app-engine - NDB 这个查询的兼容版本是什么？

> ID：11100599
> 
> 赞同：4
> 
> 时间：2012-06-19T12:09:24.143
> 
> 标签：google-app-engine, app-engine-ndb

也许这是错误的，但我总是在我的应用程序中使用这个查询：

```
cme_only = Comput.all().filter('__key__ =', cid.key()) 
```

NDB 这个查询的兼容版本是什么？元数据查询非常不同..

**编辑**： cid 是一个实体，而 cme_only 是一个我确定只有一个值的可迭代对象

```
cid = Comput.get_by_id(int(self.request.get('id')))
cme_only = Comput.all().filter('__key__ =', cid.key()) 
```

然后在模板中：

```
{{ for Comput in cme_only }} 
```

我不喜欢它，但它已经足够了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:36:25.100

不需要元数据查询。NDB 拼写查询的方式`__key__`如下：

```
ModelClass.query(ModelClass._key == key_value) 
```

也就是说，就像通过过滤来查询属性 foo 一样`ModelClass.foo == value`，`ModelClass._key`是一个表示键的伪属性。

其他海报是正确的，如果你只是一个给定完整密钥的单个实体，则使用`get()`Key 对象上的方法会更好（更快更便宜）。此外，如果 e 是一个实体（模型实例），在 NDB 中，键不是`e.key()`but `e.key`（或者`e._key`- 是的，这与我上面提到的 _key 属性相同，它既可以用作类属性，也可以用作实例属性）。

事实上，如果你有一个 urlsafe 键（例如`'agFfcg4LEghFbXBsb3llZRgDDA'`），那么将它变成一个 Key 对象的方法是`ndb.Key(urlsafe='agFfcg4LEghFbXBsb3llZRgDDA')`.

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:25:09.140

如果`cid`是您的实体，那么您可以这样做：

```
from google.appengine.ext import ndb
cme_only = ndb.Key(Comput, cid.key.id()).get() 
```

但这将返回与您开始时基本相同的实体`cid`，但通常这是按键查询的一种方式。

您可以在文档中查看有关如何[构造密钥的更多信息。](https://developers.google.com/appengine/docs/python/ndb/keyclass#Constructors)

# ruby-on-rails - Ruby on Rails 多个字段的验证问题

> ID：11100600
> 
> 赞同：1
> 
> 时间：2012-06-19T12:09:24.440
> 
> 标签：ruby-on-rails, validation, unique

我在验证多个字段时遇到了一些问题，特别是区分大小写的唯一验证以及错误消息。

假设我想确保以下字段组合在我的 [Postgres] 数据库中是唯一的并且区分大小写（Mary == mary）：

```
user_id
first_name
last_name 
```

例如
{4,Mary,Smith}
{4,mary,Smith}
不应该保存。

我知道我需要做 2 件事：
1\. 在 db 中创建唯一索引
2\. 在我的模型中 validate_uniqueness_of

1.  对于索引，我创建了它，尽管我没有找到确保区分大小写的方法（从我的阅读来看，似乎 MySQL 是，而 Postgres 不是）。除非有人知道如何做到这一点，否则我会考虑这样做。
2.  我的模型中有以下代码：

```
 validates_uniqueness_of :user_id,
                :case_sensitive => false,
                :scope => [:first_name, :last_name],
                :if => :name_subcat_is_name?,
                :message => "You have already saved this contact information combination." 
```

问题是区分大小写似乎只适用于 user_id，而不适用于名字和姓氏。那么如何将区分大小写应用于所有字段的验证呢？

此外，我的错误消息包括模型的名称：

**用户**您已经保存了此联系信息组合。

我尝试使用 yaml，但它没有删除“用户”类。我发现[了这个](http://lindsaar.net/2008/4/23/tip-14-custom-error-messages-in-validations)，但不知道如何让它检查我的所有字段而不仅仅是一个。如何将所有字段添加到范围中并查看该范围是否为“:taken”？

**更新 1 2012 年 6 月 24 日：**
使用我自己的验证方法听起来正是我所需要的，但我在实现代码时遇到了一些麻烦。MyModel.find(:first) 方法已被贬低，所以我尝试用这个代替它：

```
existing_record = ContactInfo.where(:conditions => ["first_name ILIKE ? AND last_name ILIKE ?", first_name, last_name]) 
```

但是当它到达下一行时

```
`unless existing_record.blank?` 
```

`我收到一个错误：`

 ````
PG::Error: ERROR:  column contact_infos.conditions does not exist
LINE 1: SELECT COUNT(*) FROM "contact_infos"  WHERE "contact_infos"....
SELECT COUNT(*) FROM "contact_infos"  WHERE "contact_infos"."conditions" IN ('first_name ILIKE ? AND last_name ILIKE ?', 'mary', 'Smith') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:10:12.727

您可以定义自己的验证方法来执行此操作。它可能看起来像：

```
validate :user_id_uniqueness

def user_id_uniqueness
  return unless name_subcat_is_name?

  existing_record = MyModel.find(:first, :conditions => ["first_name ILIKE ? AND last_name ILIKE ?", first_name, last_name])
  unless existing_record.blank?
    errors.add(:user_id, "has already been saved in this contact information combination")
  end
end 
```

（'ILIKE' 特定于 Postgresql）

希望这可以帮助！`

# paypal - 贝宝自适应付款销售税

> ID：11100606
> 
> 赞同：1
> 
> 时间：2012-06-19T12:09:37.780
> 
> 标签：paypal, paypal-adaptive-payments

使用 Paypal 的 Adaptive Payments API，我正在销售需要发货地址的实物商品 - 在 Paypal 购买页面上，我通知 Paypal 让客户选择一个地址。如果我在我的商家帐户上设置了销售税规则，我如何获得自适应付款以将销售税添加到订单中 - 我将小计交给它，并根据用户选择的地址中的状态，计算并添加总的小计的销售税？

这难道不是 Paypal 的全部意义——客户向 Paypal 提供这些信息，然后只向我提供交易所需的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:07:02.313

您是对的，但 AFAIK，因为 PayPal 不想保留因国家和您运送的商品类型而异的税率。因此，您可以尝试使用

```
GetShippingAddresses 
```

执行支付前的api调用，并添加

```
totalTax 
```

期间的信息

```
SetPaymentsOptions 
```

称呼..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:35:33.973

似乎无法自行计算 - 我最终保留了一个解决方案。提示用户提供货物将运往的州，然后在将订单总额（小计 + 税）发送到 Paypal 工作流程之前自行计算税金。令人失望，海事组织。

# three.js - 在导入的模型中按名称定位特定材料

> ID：11100609
> 
> 赞同：4
> 
> 时间：2012-06-19T12:09:48.593
> 
> 标签：three.js

我正在尝试在 Three.js 中的导入模型（通过 Collada 加载器）中选择特定材料。我知道这可以通过该`getChildByName`方法完成，但它对我不起作用。我也找不到包含此方法的任何工作示例。

我在这里做错了什么？

```
loader = new THREE.ColladaLoader();
loader.load('myModel.dae', function ( collada ) {
    model = collada.scene;

    var myMaterial = model.getChildByName( 'materialName', true );
    myMaterial.material = new THREE.MeshBasicMaterial( { wireframe: true } );
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:18:52.120

我想这就是你所追求的。

```
collada.scene.traverse( function ( child ) {

    if ( child.material && child.material.name === 'materialName' ) {

        child.material = new THREE.MeshBasicMaterial( { wireframe: true } );

    }

} ); 
```

# sql-server - 带有声明变量的 SQL Server charindex

> ID：11100612
> 
> 赞同：1
> 
> 时间：2012-06-19T12:09:56.833
> 
> 标签：sql-server, variables, char

`charindex`我对 SQL SERVER函数有一个简单的问题。

```
DECLARE @VAR1 varchar
SET @VAR1 = 'abcdef'
PRINT CHARINDEX('c', @VAR1) 
```

上面的语句应该打印**3**但打印**0**。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:11:19.073

> 当在数据定义或变量声明语句中未指定 n（长度）时，默认长度为 1。

* * *

这样做，你的问题就解决了：

```
DECLARE @VAR1 varchar(10)
SET @VAR1 = 'abcdef'
PRINT CHARINDEX('c', @VAR1) 
```

* * *

有关更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/ms176089.aspx)。

# regex - 我的 if 条件有什么问题？

> ID：11100614
> 
> 赞同：1
> 
> 时间：2012-06-19T12:10:06.920
> 
> 标签：regex, r, if-statement, logical-operators, control-flow

所以我一直试图找出我的 if 条件有什么问题，但我一无所获。我还是 R 新手，所以也许我在这里不了解一些非常基本的概念？

我有一个数据框（dc），我在其中附加了一个带有逻辑“FALSE”的列。现在，我想根据我使用 regexpr() 指定的两列 dc（dc$Probe 和 dc$Resp）中的值将每个 FALSE 更改为 TRUE。

到目前为止，它所做的是，对于两个 if 条件，它将每个 FALSE 更改为 TRUE，而不管 dc 的第 5 列中的值如何。当我单独运行 if 条件时，我可以看到它们似乎在条件的 OR 部分上运行良好，这意味着代码仅在 dc$Probe 中的字符串与 OR 中指定的字符串之一匹配时才生成 TRUE -部分。但是，AND 部分似乎被忽略了？因此，当我运行完整的代码时，我得到一个只有 TRUE 的列，这不是我想要的。

编辑：只有当 Probe 中的字符串以某种模式结束（如我编写的两个 if 条件中的任何一个中指定）并且 Resp 中的相应值对于我第一个中指定的模式而言，我应该得到一个 TRUE条件或我的第二个条件中指定的模式的“200”。因此，对于以 (sg|s|w1|w3|s1|s2) 结尾的字符串，Resp 必须是“100”才能获得 TRUE，而对于以 (\d\dg|\d\d) 结尾的字符串，Resp 必须是“200”得到一个TRUE。所有其他情况都应为 FALSE。例如，如果一个字符串以 s1 结尾，而 Resp 中的对应值为 200，则代码应返回 FALSE。

编辑：一些示例数据：

```
>dc<-data.frame(Subject=rep("SN",6), item.c=(1:6),  Stim=c("XYZc02s03","XYZc01s30","XYZc02s29", "XYZc01s38", "XYZc02s11", "XYZc06w21"), Probe=c("XYzf02s03","XYZf01s30g","XYZf02s29w1","XYZf01s38sg","XYZf02s11s","XYZv06w21s1"), Resp=c(200, 100, 100, 100, 100, 200)) 
```

这是我的代码：

```
>dc$Resp<-as.character(dc$Resp) #column 5 in dc
 dc$Probe<-as.character(dc$Probe)

 dc$correct_response <- FALSE

 for (i in 1:nrow(dc)) {
     if (regexpr("^.*sg$", dc$Probe[i])==1 || regexpr("^.*s$", dc$Probe[i])==1 || regexpr("^.*w1$", dc$Probe[i])==1 || regexpr("^.*w3$", dc$Probe[i])==1 || regexpr("^.*s1$", dc$Probe[i])==1 || regexpr("^.*s2$", dc$Probe[i])==1 && dc[i,5]=="100") {(dc$correct_response[i]<- TRUE)}
     if (regexpr("^.*\\d\\dg$", dc$Probe[i])==1 || regexpr("^.*\\d\\d$", dc$Probe[i])==1 && dc[i,5]=="200") {(dc$correct_response[i]<- TRUE)}
} 
```

我使用的正则表达式有问题吗？我用 glob2rx() 检查了它们，看起来它们没问题...我对“OR”（||）或/和“AND”（&&）的使用不正确吗？如何正确实施 AND 部分？我还为 AND 部分尝试了以下代码，但它没有改变任何东西：

```
regexpr("200", dc$Resp[i])==1 
```

我阅读了关于正则表达式和控制流的 R 帮助，但我仍然看不到我做错了什么。查阅其他有关逻辑表达式的网页也对我没有帮助。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:48:50.387

我想知道是否可以将其全部简化为以下内容：

```
dc<- read.table(header=T,text="Subject item.c      Stim       Probe Resp
      SN      1 XYZc02s03   XYzf02s03  200
      SN      2 XYZc01s30  XYZf01s30g  100
      SN      3 XYZc02s29 XYZf02s29w1  100
      SN      4 XYZc01s38 XYZf01s38sg  100
      SN      5 XYZc02s11  XYZf02s11s  100
      SN      6 XYZc06w21 XYZv06w21s1  200")

cond1<-regexpr("^.*(sg|s|w1|w3|s1|s2)$", dc$Probe)==1 & dc$Resp==100
cond2<-regexpr("^.*(\\d\\dg|\\d\\d)$", dc$Probe)==1 & dc$Resp==200
dc$correct_response<-cond1|cond2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:13:31.023

一方面，您在第一条`if`语句的第二个和第三个子句之间缺少一个逻辑运算符。

# coldfusion - 在会话中寻找结构键

> ID：11100619
> 
> 赞同：0
> 
> 时间：2012-06-19T12:10:30.480
> 
> 标签：coldfusion

我正在尝试编写会话助手并面临测试会话中是否存在 Struct 键的问题？

我正在尝试

```
<cffunction name="Exists" access="public" output="false" returntype="boolean" >
    <cfargument name="Key" required="true" type="Any" />
    <cfreturn Evaluate( "StructKeyExists( Session, #Arguments.Key# )" ) />
</cffunction> 
```

我在哪里调用函数

```
<cfif Exists("data.fromdate") >
 ...
</cfif> 
```

我应该怎么写？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:33:39.913

如果您正在检查会话结构中是否存在键“Test”，请尝试以下操作：

```
<cffunction name="Exists" access="public" output="false" returntype="boolean" >
    <cfargument name="Key" required="true" type="String" />

    <cfreturn StructKeyExists(session, arguments.Key) />
</cffunction>

<cfif Exists("Test") >
 ....
</cfif> 
```

另一个或两个概念，因为您正在会话中寻找一个结构是：

```
<cffunction name="Exists" access="public" output="false" returntype="boolean" >
    <cfargument name="Key" required="true" type="String" />

    <cfreturn (structKeyExists(session, listFirst(arguments.Key,"."))
                AND structKeyExists(session[listFirst(arguments.Key,".")], listLast(arguments.Key, "."))) />
</cffunction>

<cfif Exists("data.Test") >
....
</cfif> 
```

和

```
<cffunction name="Exists" access="public" output="false" returntype="boolean" >
    <cfargument name="struct" required="true" type="String" />
    <cfargument name="Key" required="true" type="String" />

    <cfreturn (structKeyExists(session, arguments.struct)
                AND structKeyExists(session[arguments.struct], arguments.key)) />
</cffunction>

<cfif Exists("data", "Test") >
 ....
</cfif> 
```

希望所有这些都有助于为您指明正确的方向，祝您好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:44:54.107

正如上面提到的 Al Everett，我不记得上次我有一个没有启用会话的应用程序是什么时候。我想如果你不能确定，那么看看 Session 是否存在是有意义的。我的代码将包括：

```
<!--- in the application.cfc --->
<cffunction name="onSessionStart" output="false">
    <!--- default session structure, you can also add default values to the data
         structure here to ensure they exist later --->
    <cfset session.data = {} />
</cffunction>

<!--- then in code use structKeyExists instead of a whole new function --->
<cfif structKeyExists(session.data, myKey)>

<!--- if you really wanted the "exists" function --->
<cffunction name="dataKeyExists" returntype="boolean" output="false">
    <cfargument name="key" required="true" />
    <cfreturn structKeyExists(session.data, arguments.key) />
</cffunction> 
```

根据发生的情况，我可能会选择传入会话以保持封装。但是，仅仅为了维护一种模式而成为 OO 的奴隶并引入复杂性并不总是有意义的。传入会话结构*并*评估密钥实际上只是使用“structKeyExists”函数的一个重要解决方法。

我也不喜欢有一个名为“exists”的函数，因为它没有告诉我它真正评估的是什么。我假设这样的函数类似于“isDefined”，并且比仅测试特定结构中的键更通用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T23:10:18.750

以下代码将检查任何深度结构，并正确锁定 Session 范围。

```
<cffunction name="Exists" access="public" output="false" returntype="boolean">
    <cfargument name="Key" required="true" type="string">

    <cfset local.mainKeyList = ListChangeDelims(ListDeleteAt(Arguments.Key, ListLen(Arguments.Key, "."), "."), ",", ".")>

    <cfset local.StructChain = "Session">
    <cfloop list="#local.mainKeyList#" index="local.CurrentKey">
        <cfset local.StructChain &= '["#local.CurrentKey#"]'>
    </cfloop>

    <cflock scope="session" type="readonly" timeout="3">
        <cftry>
            <cfset local.Exists = StructKeyExists(Evaluate(local.StructChain), ListLast(Arguments.Key, "."))>

            <cfcatch>
                <cfset local.Exists = false>
            </cfcatch>
        </cftry>
    </cflock>

    <cfreturn local.Exists>
</cffunction>

<cflock scope="session" type="exclusive" timeout="3">
    <cfset Session.data.log.deep = "I'm here!">
</cflock>
<cfoutput>#Exists("data.log.deep")#</cfoutput> 
```

希望这个函数中的代码量能够证明帮助函数为什么有用，对于那些思考你的原因的人来说。这目前还没有，但可以增强以处理数组内部的结构。这也不会处理空的 Arguments.Key，或者在 cflock 超时时正常失败，但应该让你开始。

此外，那些想要评论不需要 cflock 的人，请先阅读[ColdFusion cflock 文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7cc4.html)。

**简化，但在极少数情况下可能会提供不准确的结果**

在代码中进行`IsDefined`内联将提供误报的机会，但是在`IsDefined`内部使用 udf 或 cfc 方法可以大大降低这种风险，以至于它可能不需要考虑。如果您乐于抓住这个机会，那么您可以`IsDefined`按照 Peter Boughton 的建议简化函数。

```
<cffunction name="Exists" access="public" output="false" returntype="boolean">
    <cfargument name="Key" required="true" type="string">

    <cflock scope="session" type="readonly" timeout="3">
        <cfset local.Exists = IsDefined("Session." & Arguments.Key)>
    </cflock>

    <cfreturn local.Exists>
</cffunction> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:13:59.483

```
<cfif structkeyexists(session, "data") and structkeyexists(session["data"], key)>
...
</cfif> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T14:17:41.003

为什么不直接打电话`<cfif isNull(session.data.fromdate)>`

如果key`data`不存在`session`则不会抛出，只是返回false。

# authentication - Symfony2 基于接受 eula 的自定义用户检查器

> ID：11100628
> 
> 赞同：10
> 
> 时间：2012-06-19T12:11:15.440
> 
> 标签：authentication, symfony, doctrine-orm, eula

我想创建自定义用户检查器来验证针对上次接受的 eula 的登录操作。'思路很简单，eula会有很多版本，用户需要接受最新的eula**才能登录。**

场景是：

1.  用户创建新帐户并接受 eula。
2.  欧拉更新了
3.  用户尝试登录，但他没有接受最新的 eula
4.  用户获得相同的登录表单，但附加字段“接受最新的 eula”
5.  用户登录和系统插入信息：当前日期和时间、用户 id、Eula id 以跟踪 eula 接受情况。

我发现了这个： [https ://groups.google.com/forum/#!msg/symfony2/D0V0bFks9S0/Qg9mrbpfB3IJ](https://groups.google.com/forum/#!msg/symfony2/D0V0bFks9S0/Qg9mrbpfB3IJ)

但不幸的是，没有完整版的自定义用户检查器。我如何实现它的其余部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-20T14:17:22.113

答案其实很明显。在您的自定义捆绑包中：

配置.yml

```
parameters:
    security.user_checker.class: Acme\Bundle\UserBundle\Security\UserChecker 
```

用户检查器：

```
class UserChecker extends BaseUserChecker
{
    /**
     * {@inheritdoc}
     */
    public function checkPreAuth(UserInterface $user)
    {
        //do your custom preauth stuff here
        parent::checkPreAuth($user);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-20T11:01:39.060

`security.user_checker`你可以在你的 bundle中重新定义 Symfony 的用户检查服务（ ）：

```
# services.yml
security.user_checker:
    class: MyBundle\Checker\UserChecker
    arguments: [ "@some.service", "%some.param%" ] 
```

然后扩展 Symfony 的 UserChecker：

```
# UserChecker.php

use Symfony\Component\Security\Core\User\UserChecker as BaseUserChecker;

class UserChecker extends BaseUserChecker
{
    public function checkPreAuth(UserInterface $user)
    {
        parent::checkPreAuth($user);

        // your stuff
    }

    public function checkPostAuth(UserInterface $user)
    {
        parent::checkPostAuth($user);

        // your stuff
    }
} 
```

该服务在身份验证过程中`security.user_checker`被调用`\Symfony\Component\Security\Core\Authentication\Provider\UserAuthenticationProvider::authenticate()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:30:01.497

Why not attach event listener to the `kernel.request` event and watch if the current logged user has accepted the latest EULA?

To get the current user you can use something like this:

```
$securityContext = $this->container->get('security.context');
if (!$securityContext) {
    return;
}

$user = $securityContext->getToken()->getUser(); 
```

# linux - 在Linux中从串口接收一个字节

> ID：11100630
> 
> 赞同：0
> 
> 时间：2012-06-19T12:11:18.730
> 
> 标签：linux, serial-port

我知道这可能以前被问过，但是对于我的问题，我找不到解决方案。我需要一个`receive(int recv)`在循环中调用并接收一个字节的函数。到目前为止，我已经设置了我的串行端口（termios.h）并且能够使用接收`read()` 但是我只能接收端口的整个缓冲区。所以`read(fd, recv, 255);`总是返回多个字节。我需要的是一个缓冲区，我在其中接收字节，当`receive(int recv)`被调用时，它总是给出这个缓冲区的第一个字节。这样的缓冲区会是什么样子？我很乐意对此提供任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:26:48.560

这应该足够了：

```
// ...
char buf[1];
read(fd, &buf, 1);
// ... 
```

# php - 用php反转字符串

> ID：11100634
> 
> 赞同：4
> 
> 时间：2012-06-19T12:11:25.243
> 
> 标签：php, string, reverse

我正在尝试找到一种反转字符串的方法，我已经看到了替代方案，但我想以这种方式在框外思考而不使用其他任何人的代码作为替代方案，下面的代码反转了字符串，但我不断得到这个错误：

注意：未定义的偏移量：第 15 行 C:\wamp\www\test\index.php 中的 25

25 是正在减量的字符串的长度。

```
//error_reporting(NULL);
$string = trim("This is a reversed string");

//find length of string including whitespace
$len =strlen($string);

//slipt sting into an array
$stringExp = str_split($string);

//deincriment string and echo out in reverse
for ($i = $len; $i >=0;$i--)
{
echo $stringExp[$i];
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T12:13:15.020

你太努力了，在你最终“重新发明轮子”之前，总是查阅手册和/或搜索引擎来检查是否有本地函数来做你想做的事情：

> **strrev** — 反转字符串

[http://php.net/manual/en/function.strrev.php](http://php.net/manual/en/function.strrev.php)

```
$string = "This is a reversed string";
echo strrev($string);
// Output: gnirts desrever a si sihT 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T12:15:30.247

正如其他人所说，`strrev()`必须这样做。

如果您想自己构建它（用于学习？）：您的问题是您的索引一开始太高 - 长度为 25 的字符串的索引从 0 到 24，因此您的循环必须看起来像这样：

```
for ($i = $len - 1; $i >=0;$i--)
{
   echo $stringExp[$i];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-30T17:38:26.260

```
$string = 'mystring';
$length = strlen($string);

for ($i = $length; $i > 0; $i--){
echo $string[$i-1];
}

OUTPUT: gnirtsym 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T12:13:55.120

你必须得到`$len-1`，因为字符串从`0`to`$len-1`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T12:13:55.270

这个[strrev有一个函数](http://bg2.php.net/manual/en/function.strrev.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T12:15:52.320

```
echo strrev("This is a reversed string!"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-19T12:16:19.517

php 在字符串函数方面非常完整，您只需要传递字符串即可。这就是为什么php很容易:)

使用**strrev** php 函数[http://bg2.php.net/manual/en/function.strrev.php](http://bg2.php.net/manual/en/function.strrev.php)

```
<?php
  echo strrev("This is a reversed string");
 ?>

// Output: gnirts desrever a si sihT 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-17T13:03:15.097

```
<?php
// Reversed string and Number
//  For Example :
    $str = "hello world. This is john duvey";
    $number = 123456789;
    $newStr = strrev($str);
    $newBum = strrev($number);

    echo $newStr;
    echo "<br />";
    echo $newBum; 
```

```
OUTPUT : 
 first : yevud nhoj si sihT .dlrow olleh
 second: 987654321 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-19T12:13:47.973

```
for ($i = $len-1; $i >=0;$i--)
{
  echo $stringExp[$i];
} 
```

由于索引从 0 开始

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-19T12:13:48.670

将您的 for 循环更改为

```
for ($i = $len-1; $i >=0;$i--)
{
echo $stringExp[$i];
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-03T19:04:34.130

```
<?php
echo strrev("PHP TUTORS");
?> 
```

**上述脚本的输出**

```
SROTUT PHP 
```

[参考源代码](http://phptutors.wordpress.com/2013/03/14/php-strrev-function-example/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-10T09:47:19.790

你可以使用它：

```
echo $reversed_s = join(' ',array_reverse(explode(' ',"Hello World"))); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-15T18:25:32.093

```
public function stringReverse($string="Jai mata di")
{
    $length = strlen($string) - 1;
    $i = 0;
    while ($i < $length + 1) {
        echo $string[$length - $i];
        $i++;

    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-04T07:41:15.407

***我们可以在以下方法的帮助下进行字符串反转***

```
 $string = "Hello world!"; 
```

1.  第一种方法：

    ```
    echo strrev($string); 
    ```

2.  第二种方法：

    ```
     $stringSplit = str_split($string);
                for ($i = $len-1; $i >=0;$i--)
                {
                echo $stringSplit[$i];
                } 
    ```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-26T07:34:17.067

这将起作用

```
class StringUtils {

    public function stringReverse($string){
        $arr1 = str_split($string);
        $arr2 = array();
        for($i = count($arr1); $i >= 0; $i--){
            $arr2[count($arr1) - $i] = $arr1[$i];
        }
        return implode("", $arr2);
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-08-16T09:16:14.800

```
<?php
/* Reverse a string with php */
echo strrev("Hello World!"); 
?> 
```

[反转字符串php](https://www.phprun.org/DWCxsz)

# c# - 一切都与 CLR 托管有关

> ID：11100636
> 
> 赞同：-6
> 
> 时间：2012-06-19T12:11:37.967
> 
> 标签：c#, .net

为什么我们需要 CLR 托管？我可以使用 C# 进行 CLR 托管吗？如果是，请举例说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:13:14.083

CLR 托管是当您有一个本机应用程序想要在同一进程中运行 CLR 时。谈论使用 C# 托管 CLR 是没有意义的，因为如果您正在运行 C# 代码（除了一些非常奇怪的情况） ，那么您已经在*运行CLR。*

基本上，如果您需要询问它，您几乎可以肯定不需要这样做。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd380850.aspx)。

# sql - INFORMATION_SCHEMA 外键

> ID：11100637
> 
> 赞同：1
> 
> 时间：2012-06-19T12:11:46.500
> 
> 标签：sql, tsql, information-schema

我有这段代码允许我识别 tsql 过程中的标识列：

```
SELECT 
    c.column_name, (columnproperty(object_id(@table_name),c.column_name,'isIdentity')) pk
from information_schema.columns c
where c.table_name = @table_name 
```

有人可以帮我修改此代码以允许识别外键吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:14:51.460

您可以使用此 T-SQL 语句来获取引用特定表的所有外键：

```
;WITH ReferencingFK AS 
(
    SELECT 
        fk.Name AS 'FKName',
        OBJECT_NAME(fk.parent_object_id) 'ParentTable',
        cpa.name 'ParentColumnName',
        OBJECT_NAME(fk.referenced_object_id) 'ReferencedTable',
        cref.name 'ReferencedColumnName',
        fk.delete_referential_action,
        fk.update_referential_action
    FROM 
        sys.foreign_keys fk
    INNER JOIN 
        sys.foreign_key_columns fkc ON fkc.constraint_object_id = fk.object_id
    INNER JOIN 
        sys.columns cpa ON fkc.parent_object_id = cpa.object_id AND fkc.parent_column_id = cpa.column_id
    INNER JOIN 
        sys.columns cref ON fkc.referenced_object_id = cref.object_id AND fkc.referenced_column_id = cref.column_id
)
SELECT 
    FKName,
    ParentTable,
    ParentColumnName,
    ReferencedTable,
    ReferencedColumnName
FROM 
    ReferencingFK
WHERE
    ReferencedTable = 'YourTableNameHere'
ORDER BY 
    ParentTable, ReferencedTable, FKName 
```

如果您想要**所有**外键，则只需完全删除该`WHERE`子句。

# xml - 如何使用 webdriver 从页面获取 XML 文本

> ID：11100639
> 
> 赞同：1
> 
> 时间：2012-06-19T12:11:46.597
> 
> 标签：xml, webdriver

我需要读取浏览器中显示的 XML 文件。

我有一个 XMLVIEWING 按钮，当我单击它时，会打开新窗口并显示所需的 xml 文件。

那么我怎样才能读取这个文件呢？我尝试了 getPageSource()，但它返回了带有 div、脚本等的大字符串。

# android - 无法在 RemoteView Android 上更改 ImageView 资源

> ID：11100641
> 
> 赞同：1
> 
> 时间：2012-06-19T12:11:56.233
> 
> 标签：android

我正在尝试制作一个带有可点击图像的简单小部件，当它被点击时会改变。我不明白为什么它不起作用

```
 public class AppWidget extends AppWidgetProvider {

@Override
public void onReceive(Context context, Intent intent) {
if (intent.getAction()==null) {
    context.startService(new Intent(context,
            ToggleService.class));

} else {
super.onReceive(context, intent);
}

}
@Override
public void onUpdate(Context context, AppWidgetManager
appWidgetManager, int[] appWidgetIds) {
    context.startService(new Intent(context, 
            ToggleService.class)); 

}
public static class ToggleService extends IntentService { 
    public ToggleService() { 
        super("AppWidget$ToggleService");
    }
    @Override
    protected void onHandleIntent(Intent intent) {
    ComponentName me=new ComponentName(this, AppWidget.class);
    AppWidgetManager mgr=AppWidgetManager.getInstance(this);
    mgr.updateAppWidget(me, buildUpdate(this));
    }
    private RemoteViews buildUpdate(Context context) {
    RemoteViews updateViews=new
    RemoteViews(context.getPackageName(),R.layout.widget);
    int a = 1;
    if(a ==
            1) {

            updateViews.setImageViewResource(R.id.phoneState,
            R.drawable.dual_off);
    } else {
    updateViews.setImageViewResource(R.id.phoneState,
    R.drawable.dual_on);
    }
    Intent i=new Intent(this, AppWidget.class);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, i,0); 
    updateViews.setOnClickPendingIntent(R.id.phoneState,pi); 
    return updateViews; 
    }
}

 } 
```

我已经在**for**循环中尝试了所有类型的东西，但它不会改变图像。我是从一本关于 android 开发的书中完成的，我是 java 和 android 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:30:59.250

您将通过**AppWidgetManager**更新您的小部件，`after`更改 remoteview 的源。在此代码段中，我尝试更改其 AppWidgetProvider 名称为**DictionWidgetProvider**的小部件布局：

```
private void hideWidgetInstances() {
    hideViews = new RemoteViews(App.getContext().getPackageName(),
    R.layout.hide);
    AppWidgetManager mManager = AppWidgetManager.getInstance(App
    .getContext());
    ComponentName cn = new ComponentName(App.getContext(),
    DictionWidgetProvider.class);
    mManager.updateAppWidget(cn, hideViews);
} 
```

这里的**App**是一个扩展**Application**的类。您可以使用 Application Context 来访问**ComponentName**。

# eclipse - 使用 Jubula 和 Maven 自动化“Eclipse 插件”测试

> ID：11100646
> 
> 赞同：2
> 
> 时间：2012-06-19T12:12:34.240
> 
> 标签：eclipse, testing, maven, plugins, jubula

我需要自动化 Eclipse 插件 UI 测试。

Jubula 是一个 UI 测试自动化。插件是使用 Maven (3.0 版本) 构建的

有谁知道集成它们（Jubula 和 Maven）并自动化测试过程..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:57:56.637

这个问题可能已经在 J​​ubula 论坛中得到解答：

[http://www.eclipse.org/forums/index.php/t/365105/](http://www.eclipse.org/forums/index.php/t/365105/)

# tsql - T-SQL - 修剪前导字符

> ID：11100647
> 
> 赞同：0
> 
> 时间：2012-06-19T12:12:35.520
> 
> 标签：tsql, texttrimming

我有一个列（`nvarchar(255)`），我正在寻找修剪，只显示名称

输入

```
22;#Simon Smith
103;#John Doe
34;#Sarah Jones
1;#Robert Snow
... 
```

需要输出

```
Simon Smith
John Doe
Sarah Jones
Robert Snow 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:22:07.810

假设`;#`总是存在，这应该可以解决问题：

```
select substring('22;#Simon Smith', charindex(';#', '22;#Simon Smith')+2, 255) 
```

* * *

现在您需要更新您的表格：

更新表名 set columnname = substring(columnname, charindex(';#', columnname)+2, 255)

用正确的值替换`tablename`和。`columnname`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:24:02.623

```
SELECT 
RIGHT(YOUR_COLUMN, LEN(YOUR_COLUMN) - CHARINDEX('#', YOUR_COLUMN)) 
FROM YOUR_TABLE 
```

# magento - Magento 可以在一次安装下拥有多个商店吗？

> ID：11100648
> 
> 赞同：0
> 
> 时间：2012-06-19T12:12:42.293
> 
> 标签：magento

我想知道是否可以在 1 个 Magento 安装下拥有多个商店。这意味着我的网站上将集成 3-4 个 Paypal 帐户，并且每个产品都集成到其中的 1 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:10:11.357

是的。所有 PayPal 模块设置都有`website`或`store view`配置范围。

# git - 将提交移到合并之上

> ID：11100649
> 
> 赞同：1
> 
> 时间：2012-06-19T12:12:51.407
> 
> 标签：git

在 git 中，我有 2 个提交和一个分支合并，它们已被重新设置为如下所示

```
7
6_
  5
  4
3_|
2
1 
```

合并是用 no-ff 完成的。

我的客户不想推出提交 1 和 2，所以我试图重新设置它看起来像这样

```
1
2
7
6_
  5
  4
3_| 
```

这是可取的，因为这样我就可以从提交 7 分支出来，这就是我的生产版本。

变基 -i XXXX

使整个事情变得平坦并且有大量的冲突。由于我试图准备生产部署，我不想发生冲突，因为代码将不得不返回测试。

当我这样做时

变基 -i -p XXXXXX

它正确地移动了提交 1 和 2，但它删除了合并和与之相关的 4 周工作。我到底是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:18:07.113

从两个提交创建一个补丁，并以反向模式将它们应用到 head。

临：

1.  简单的解决方案
2.  非常安全，具体取决于更改的大小

缺点：

1.  将提交保留在提交历史记录中
2.  根据两次提交中对代码的更改量（即更改发生在 rev. 3-7 中的代码），反向应用将不起作用

另一个技巧是在没有最后 7 次修订的情况下结帐。然后为修订版 3-7 创建补丁并应用这些补丁。应该给你相同的结果和干净的提交历史。

但在这两种情况下，我都很谨慎，因为你在变基期间遇到了很多冲突。

# php - yii 以表格形式管理子表的数据

> ID：11100650
> 
> 赞同：1
> 
> 时间：2012-06-19T12:12:51.647
> 
> 标签：php, yii

我正在研究 YII 框架，我是新手。我有如下所示的用户注册表单：

用户名：[文本框]

电子邮件：[文本框]

地址：【文字区】

用户贷款类型：（复选框列表如下）

*   贷款类型 1
*   贷款类型 2
*   贷款类型 3
*   贷款类型 4
*   贷款类型 5

状态[是/否]

现在我有 3 个模型：

1) 用户（用于用户数据）

2) LoanType（仅用于贷款类型列表）

3）UserLoanType（用户与贷款类型的映射）

正如我们通常在 YII 中所做的那样，所有 3 个模型都有 HAS_MANY 和 BELONGS_TO 关系。

现在，当用户单击注册按钮时，我也想将数据保存在 user_loan_type 表中。我可以简单地在 actionCreate 中添加核心 php 逻辑。但是有没有任何标准的 YII 实践呢？因为我需要验证，所以在编辑等过程中保持表单处于选中状态。谁能指导我如何做到这一点？或者指向我任何示例链接，我已经用谷歌搜索但没有帮助。

谢谢。

* * *

我能够将数据保存在数据库中，现在在编辑期间我想检索第三张表的（tbl_user_loan_request_type）数据。我使用了下面的代码。

```
$user = User::model()->findByPk(5); 
    print_r($user->UserLoanTypes); 
```

但它给了我空白数组。我哪里错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:38:44.490

您可以在类中定义 afterSave 方法，如下所示：

模型用户

```
public function relations()
{
    return array(
        'UserLoanTypes' => array(self::MANY_MANY, 'LoanType', 'UserLoanType(userId, loanId)'),
    );
}

// relation
        array('UserLoanTypes', 'safe'),

// label
        'UserLoanTypes' => 'User Loan Type'

protected function afterSave()
{
    parent::afterSave();
    UserLoanType::model()->deleteAll('userId=:id', array(':id' => $this->id));
    foreach ($this->UserLoanTypes  as $loanId) {
         $userLoanType = new UserLoanType();
         $userLoanType->userId = $this->id;
         $userLoanType->loadId = $loadId;
         $userLoanType->save();
    }
}

protected function afterDelete()
{
    parent::afterDelete();
    UserLoanType::model()->deleteAll('userId=:id', array(':id' => $this->id));
} 
```

通知：

```
<div class="row">
    <?php echo $form->labelEx($model,'UserLoanTypes'); ?>
    <?php echo $form->checkBoxList($model,'UserLoanTypes', CHtml::listData($LoanTypes, 'id', 'loanName')); ?>
    <?php echo $form->error($model,'UserLoanTypes'); ?>
</div> 
```

鉴于您可以：

```
<?php $this->widget('zii.widgets.CDetailView', array(
    'data'=>$model,
    'attributes'=>array(
        'id',
        'name',
        'UserLoanTypes' => array(
            'name'  => 'UserLoanTypes',
            'value' => implode(',', CHtml::listData($model->UserLoanTypes, 'id', 'name')),
        ),
     ),
   )); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:42:52.997

如果您不需要将多个loanTypes 分配给一个用户，那会更容易。您只需要用于表单可视化的用户模型：

```
<?php $form = $this->beginWidget('CActiveForm', array(
    'id'=>'user-form',
)); ?>

<?php echo $form->errorSummary($model); ?>

<div class="row">
    <?php echo $form->labelEx($model,'Username'); ?>
    <?php echo $form->textField($model,'Username'); ?>
    <?php echo $form->error($model,'Username'); ?>
</div>
<div class="row">
    <?php echo $form->labelEx($model,'Email'); ?>
    <?php echo $form->textField($model,'Email'); ?>
    <?php echo $form->error($model,'Email'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'Address'); ?>
    <?php echo $form->textArea($model,'Address'); ?>
    <?php echo $form->error($model,'Address'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'UserLoanType'); ?>
    <?php echo $form->checkBoxList($model,'idLoanType', CHtml::listData(LoanType::model()->findAll, 'id', 'name')); ?>
    <?php echo $form->error($model,'UserLoanTypes'); ?>
</div>

<?php $this->endWidget(); ?> 
```

# sql - Oracle 查询特定状态和描述的记录结果

> ID：11100653
> 
> 赞同：0
> 
> 时间：2012-06-19T12:12:56.877
> 
> 标签：sql, oracle11g

我有一个如下所示的 Oracle 表：

```
Orders
---------
OrderFullFillID
Description
OrderDate
OrderStatus
Qty

Below are sample records

1    PTS123   1/1/2012     Settled     10
2    PTS123   1/1/2012    ArchSettled  10
3    PTS124   2/1/2012    Settled      10
4    PTS124   2/1/2012    Settled      20
5    PTS125   2/1/2012    Settled      20
6    PTS125   2/1/2012    Settled      20
7    PTS126   2/1/2012    Settled      20
8    PTS126   2/1/2012    ArchSettled  20 
```

如何显示具有相同描述和重复状态='已解决'的记录？将有两条描述相同的记录，statusdate 但不同的状态。我只需要列出 status='Settled' 并且描述相同的那些。

在上面的示例中，查询应返回以下内容：

```
 3    PTS124   2/1/2012    Settled      10
    4    PTS124   2/1/2012    Settled      20
    5    PTS125   2/1/2012    Settled      20
    6    PTS125   2/1/2012    Settled      20 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:28:48.797

```
SELECT OrderFulFillID,
       Description,
       OrderData,
       OrderStatus,
       Qty
  FROM orders a
 WHERE status = 'Settled'
   AND NOT EXISTS( SELECT 1
                     FROM orders b
                    WHERE a.description = b.description
                      AND a.statusDate  = b.statusDate
                      AND a.status     != b.status ) 
```

应该管用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:44:00.220

```
SELECT OrderFulFillID,
       Description,
       OrderData,
       OrderStatus,
       Qty
  FROM orders a
  WHERE status = 'Settled'
    AND EXISTS( SELECT 1
                  FROM orders b
                  WHERE a.description     = b.description
                    AND a.OrderFulFillID != b.OrderFulFillID
                    AND a.status          = b.status ) 
```

# wordpress - 如何获取帖子类别

> ID：11100655
> 
> 赞同：0
> 
> 时间：2012-06-19T12:13:02.550
> 
> 标签：wordpress

在主页上我正在打印帖子，我想在 foreach 循环中打印类别名称？我怎样才能做到这一点？

示例代码：

```
 if (have_posts()) : 

        $args = array(
            'showposts' => '5',
            'paged' => $paged
        );

        $thePosts = query_posts($args);

        foreach($thePosts as $post) : setup_postdata($post);

    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:27:56.273

解决了：

```
<?php

            GLOBAL $wpdb;

            $query = "
            SELECT 
                terms.slug, r.term_taxonomy_id, terms.name AS cat_name 
            FROM 

                {$wpdb->prefix}term_taxonomy t, {$wpdb->prefix}terms terms, $wpdb->posts p, $wpdb->term_relationships r 

            WHERE 

                t.term_id=terms.term_id AND 
                p.ID = r.object_id AND
                r.term_taxonomy_id = t.term_taxonomy_id AND 
                p.ID = '".$post->ID."'

            ORDER BY terms.term_order ASC, terms.term_id DESC";

            $categories = $wpdb->get_results($query, ARRAY_A);

            if(is_array($categories)){

                $i=1;
                foreach($categories as $category) { 

                    echo '<span>'.$category['cat_name'].'</span>';

                    ++$i;
                }#end foreach($categories 

            }#end if

            ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:38:12.550

将此代码放在您的循环中。

```
<?php
/* translators: used between list items, there is a space after the comma */
$categories_list = get_the_category_list( __( ', ', 'twentyeleven' ) );

if ( '' != $categories_list ) {
$utility_text = __( 'This entry was posted in %1$s', 'twentyeleven' );
} 
printf( $utility_text );
?> 
```

这将打印当前帖子的类别。希望您使用的是 211 的儿童主题。

# mysql - 创建表的存储过程

> ID：11100669
> 
> 赞同：5
> 
> 时间：2012-06-19T12:13:43.813
> 
> 标签：mysql, stored-procedures

我可以使用存储过程创建表吗？

我正在使用 MySQL。我在网上搜索了有关如何使用存储过程创建表的说明，但没有找到任何结果，我只是发现可以创建临时表。如果我使用存储过程创建表有什么问题吗？

实际上我想检查一个表是否存在，然后我必须创建它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:21:07.177

您可以使用 mysql 中的过程创建表。

```
delimiter |
CREATE PROCEDURE SP_CREATE_TABLE_TEST ()
   BEGIN
      CREATE TABLE TEST 
      (
        TestID int(11) default NULL,
        TestName varchar(100) default NULL
      ) 
      ENGINE=InnoDB DEFAULT CHARSET=utf8;
   END;

| 
```

[参考链接。](http://www.php-example.com/2011/04/creating-table-using-mysql-stored.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-31T21:03:50.563

* * *

编辑：谢谢彼得！所以这个特定问题的解决方案：

```
DELIMITER //
CREATE PROCEDURE createTable(IN tableName VARCHAR(40))
BEGIN
SET @table := tableName;
SET @sql_text:=CONCAT('CREATE TABLE ',@table,'(id INT NOT NULL AUTO_INCREMENT, FILENAME VARCHAR(40) NOT NULL, DATA BLOB NOT NULL, PRIMARY KEY (ID))');

PREPARE stmt from @sql_text;
EXECUTE stmt;
END //
DELIMITER ; 
```

除了手册之外，我还发现了 Roland Bouman 的一个非常有用的 tut：

[http://rpbouman.blogspot.com/2005/11/mysql-5-prepared-statement-syntax-and.html](http://rpbouman.blogspot.com/2005/11/mysql-5-prepared-statement-syntax-and.html)`enter code here`

El autor de la respuesta: Conrad Ljungström

[原文链接： https](https://forums.mysql.com/read.php?98,495352) ://forums.mysql.com/read.php? 98,495352

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:20:21.530

您可以毫无问题地在存储过程中创建表。例子：

```
delimiter |

create procedure createtab () 
begin 
    create table a(id int);
    insert into a select 1;
    select * from a;
    drop table a;
end
|

delimiter ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:20:43.407

像这样的东西应该工作。

```
delimiter |
CREATE PROCEDURE SP_CREATE_TABLE( )
BEGIN
  CREATE TABLE employees (emp_id int, emp_name varchar(100));
END;
| 
```

# objective-c - NSCell 中的动画

> ID：11100676
> 
> 赞同：0
> 
> 时间：2012-06-19T12:13:58.543
> 
> 标签：objective-c, macos, cocoa

我想`NSCell`在`NSTableView`. 我能够通过使用计算正确图像的对象来实现这一点，并且我强制更新受影响的单元格以获得大约 25-30 fps。我很确定这不是它应该工作的方式，因为它会消耗大量的 CPU。任何建议如何更有效地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:17:28.173

我在 didSelectRowAtIndexPath 委托方法中执行此操作，因此当用户触摸单元格时，它会在右侧的附件视图中添加一个微调器。

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
UIActivityIndicatorView *activityView = 
[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
[activityView startAnimating];
[cell setAccessoryView:activityView];
[[NSRunLoop currentRunLoop] runUntilDate: [NSDate dateWithTimeIntervalSinceNow:0.01]]; 
```

*注意这适用于 iOS，但我认为它与 OSX 非常相似

# java - 如何将 FileInputStream 转换为 InputStream？

> ID：11100677
> 
> 赞同：118
> 
> 时间：2012-06-19T12:14:11.587
> 
> 标签：java, fileinputstream

我只想将 a 转换为 a `FileInputStream`，`InputStream`我该怎么做？

例如

```
FileInputStream fis = new FileInputStream("c://filename");
InputStream is = ?; 
fis.close(); 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-06-19T12:21:18.750

```
InputStream is;

try {
    is = new FileInputStream("c://filename");

    is.close(); 
} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

return is; 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-06-19T12:17:38.737

```
InputStream is = new FileInputStream("c://filename");
return is; 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-06-19T12:16:24.733

FileInputStream*是*一个输入流。

```
FileInputStream fis = new FileInputStream("c://filename");
InputStream is = fis;
fis.close();  
return is; 
```

当然，**这不会做你想做的事**；您返回的流已经关闭。只需返回 FileInputStream 并完成它。调用代码应该关闭它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-19T12:16:07.117

您通常会首先从输入流中读取，然后将其关闭。您可以将 FileInputStream 包装在另一个 InputStream（或 Reader）中。当您关闭包装流/阅读器时，它将自动关闭。

如果这是一个将 InputStream 返回给调用者的方法，那么调用者有责任在完成流后关闭它。如果你在你的方法中关闭它，调用者将无法使用它。

要回答您的一些评论...

要将内容 InputStream 发送到远程使用者，您可以将 InputStream 的内容写入 OutputStream，然后关闭两个流。

远程消费者对您创建的流对象一无所知。他只是在他将创建、读取和关闭的 InputStream 中接收内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T12:18:42.357

如果将一个流包装到另一个流中，则不会关闭中间流，这非常重要：在完成使用外部流之前不要关闭它们。因为你也会关闭外部流。

# python - 如何指定 setuptools 输出目录？

> ID：11100678
> 
> 赞同：6
> 
> 时间：2012-06-19T12:14:24.897
> 
> 标签：python, setuptools

使用`setuptools`Python，是否可以在安装 python 项目时指定输出目录？

在我的项目目录中：

`python setup.py install`

例如，我想将项目安装到`/usr/share/myproject/`目录中。

我不想在命令行中指定输出目录。我想将此输出目录指定到`setup.py`.

# asp.net - 如何在 Facebook 上分享图像并将图像打开为灯箱

> ID：11100680
> 
> 赞同：3
> 
> 时间：2012-06-19T12:14:33.673
> 
> 标签：asp.net, facebook, image, lightbox, share

我想在 facebook 上分享图片我设置了以下代码

```
 var obj = {

    method: 'feed',

    link: 'http://cwsv2.lokpunjab.org/PhotoGallery/facebookimage.aspx?imageurl=("ContentPlaceHolder1_DataListUploadedPhotos_ImageUploaded_0").src.toString().replace("LargeThumbs/", "")',
///how to set link so on clicking image it will open as lightbox in facebook
   <br> picture: document.getElementById("ContentPlaceHolder1_DataListUploadedPhotos_ImageUploaded_0").src.toString().replace("LargeThumbs/", ""),
    name: 'CWS Photo Gallery',

   <br> caption: caption12
    }; 
```

我想在 facebook 中打开图像作为 facebook 内置灯箱，但我不知道如何在 var obj 中设置链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:11:52.270

我能想到的最快方法实际上是将图像上传到 Facebook。然后，用户将在他们的时间轴中看到它，当他们点击它时 - 它会按照您的意愿显示。

# android - Android EditText 失去对 TabChange 的关注

> ID：11100686
> 
> 赞同：0
> 
> 时间：2012-06-19T12:15:01.473
> 
> 标签：android, tabs, focus

在我的应用程序中，我有多个选项卡。在其中一个选项卡中，我有一个 EditText，当用户移动到该选项卡时，默认情况下它需要具有焦点。

但是，当标签更改时，Edittext会丢失焦点。

我尝试了这一切。

在我的 Xml 文件中指向我想要关注的 EditText。

```
<requestFocus /> 
```

在我的 java 代码 onCreate()

```
userIdInput.post(new Runnable() 
    {
      public void run() 
       {
        userIdInput .requestFocus();
       }
    }); 
```

并且，

```
userIdInput.setFocusable(true);
    userIdInput.setFocusableInTouchMode(true);
    userIdInput.requestFocus(); 
```

但仍然，当标签更改时，焦点会丢失。谁能告诉我这里可能缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:28:37.567

假设您的每个选项卡都有不同的容器布局，请`setOnFocusChangeListener()`为该容器布局（包含编辑文本的布局）实现并`onFocusChange()`检查容器布局是否具有焦点，如果是，请使用

```
userIdInput.post(new Runnable() 
{
  public void run() 
   {
    userIdInput .requestFocus();
   }
}); 
```

# intellij-idea - IntelliJ IDEA 11.1.2 不会将 SQL 文件复制到 out 文件夹

> ID：11100690
> 
> 赞同：5
> 
> 时间：2012-06-19T12:15:11.587
> 
> 标签：intellij-idea, gradle

我正在使用带有 Gradle 1.0 多模块项目的 IntelliJ IDEA 11.1.2 Ultimate。一个模块代表域。![模块结构](../Images/19559876fcad6c159f4bda313841a487.png)

项目输出指向*[project-root]\out。*但是，如果我运行单元测试，域模块的输出文件夹根本不包含任何 .sql 文件。![域的输出文件夹](../Images/d4bef69137c4eec0811e1d1894005bee.png). 这就是我在 IntelliJ IDEA 中运行 JUnit 测试的方式![测试配置](../Images/f7b37be542e7ad8e9c28ce2f49b1b47e.png)。

如果我从命令行使用 Gradle 运行项目，一切正常。

![IDEA项目结构](../Images/d0dfc9e6ba69be8f83febd97e2fc08b6.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T12:20:55.480

`Settings`| `Compiler`| `Resource Patterns`, 添加`sql`扩展的模式。

# javascript - 文档准备好之前的 Javascript onload 事件和其他事件

> ID：11100691
> 
> 赞同：0
> 
> 时间：2012-06-19T12:15:12.427
> 
> 标签：javascript, jquery, html

```
if (typeof $ == "undefined"){

console.log("$ is undefined. Adding javascript element to the document");
jQs = document.createElement("script");
jQs.type = 'text/javascript';
jQs.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js';
var s = document.getElementsByTagName('script')[0]; 
s.parentNode.insertBefore(jQs, s);

// Run script once jQuery is loaded
    console.log(" startScript() Start");
    jQs.onload = startScript;

} 
```

我有上面的脚本，如果 $ 未定义，它会添加一个指向 jquery 的脚本标记。我尝试在文档开始之前插入标签并执行 startScript 函数。但我认为发生的是 body.onload 触发 startScript 的速度不够快。这会阻止它的执行。一旦 jquery 脚本标签/文档准备好，是否有一个事件会触发 startScript？

我认为答案在于每当jquery标签准备好并且文档一起准备好时执行startscript..但我不知道如何实现效果..

请注意，将代码放入 $(document).ready() 是一个不相关的解决方案，因为如果脚本中没有包含 jquery 文件，它将 $ 未定义

另请注意，我不想在 jquery 标记 onload 事件上执行 onload 函数，因为这可能意味着该函数被多次触发

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:20:35.300

```
 function init() {
    if (typeof $ == "undefined"){

    console.log("$ is undefined. Adding javascript element to the document");
    jQs = document.createElement("script");
    jQs.type = 'text/javascript';
    jQs.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js';
    var s = document.getElementsByTagName('script')[0]; 
    s.parentNode.insertBefore(jQs, s);

    // Run script once jQuery is loaded
        console.log(" startScript() Start");
        jQs.onload = startScript;

    }
}
window.onload = init; 
```

# batch-file - 如何在批处理文件中压缩

> ID：11100696
> 
> 赞同：5
> 
> 时间：2012-06-19T12:15:37.137
> 
> 标签：batch-file, compression, batch-processing

我在压缩批处理文件中的目录或文件时遇到问题。我该怎么做，有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:17:48.323

[对于 SuperUser](https://superuser.com/questions/110991/can-you-zip-a-file-from-the-command-prompt-using-only-windows-built-in-capabili)上的 Post 上的类似问题有一个很好的解决方案，我已将其复制粘贴在下面。

CScript zip.vbs C:\test3 C:\someArchive.zip

其中 zip.vbs 包含以下内容

```
'Get command-line arguments.
Set objArgs = WScript.Arguments
InputFolder = objArgs(0)
ZipFile = objArgs(1)

'Create empty ZIP file.
CreateObject("Scripting.FileSystemObject").CreateTextFile(ZipFile, True).Write "PK" & Chr(5) & Chr(6) & String(18, vbNullChar)

Set objShell = CreateObject("Shell.Application")

Set source = objShell.NameSpace(InputFolder).Items

objShell.NameSpace(ZipFile).CopyHere(source)

'Required!
wScript.Sleep 2000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:20:41.533

您可以使用 3rd 方工具，我建议您使用[7-Zip](http://www.7-zip.org/)，它有一个可以批量使用的命令行版本。

有关可用命令和示例的列表，请参见[此处](http://www.dotnetperls.com/7-zip-examples)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T15:52:54.913

[在这里您可以找到两种不](https://stackoverflow.com/questions/28043589/how-can-i-compres-zip-and-uncopress-unzip-files-and-folders-with-batch-f)使用任何外部工具的方法。

最好使用使用 Shell.Application 对象的[WSH/Jscript 脚本。](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/zipjs.bat)

# jpa - 如何在 JPQL join 中有多个条件

> ID：11100702
> 
> 赞同：8
> 
> 时间：2012-06-19T12:16:08.190
> 
> 标签：jpa, jpql

我想加入两个表使用`JPQL`：

```
SELECT * FROM A LEFT JOIN 
B ON A.ID = B.A_ID AND B.lng = 'en' 
```

重要的部分是**AND B.lng = 'en'**

这可能`JPQL`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T14:49:34.587

JPA 2.0 不支持 ON 子句，但 JPA 2.1 草案支持。

EclipseLink 2.4 支持 ON 子句。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:20:41.263

是的，有可能，这里有一个[类似的问题](https://stackoverflow.com/questions/3730625/jpa-join-in-jpql)。但是，如果您的实体已被映射，您应该能够在查询中访问它们。

# php - CodeIgniter 看不到图像（使用 file_exists）

> ID：11100706
> 
> 赞同：0
> 
> 时间：2012-06-19T12:16:24.960
> 
> 标签：php, mysql, codeigniter

我正在学习 CodeIgniter。我有一个`img`包含图像的目录（路径`/img/`）。我正在尝试通过 CI 视图访问它并使用以下代码检查是否存在：

```
 $av = '../../../img/content/users/'.$userID.'.jpg';
    if(file_exists($av)) {
        $avatar = $av;
    } else {
    $avatar = 'img/content/users/none.jpg';
    } 
```

有趣的是，回声`<img src="'.$av.'">`有效。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:19:46.820

CI 总是在 上运行`index.php`，所以路径从那里总是相对的。

假设`index.php`和`/img`在根目录中处于同一级别，请尝试以下操作：

```
$av = 'img/content/users/'.$userID.'.jpg';
if(is_file($av)) { // or better yet, make sure it's really an image
    $avatar = $av;
} else {
    $avatar = 'img/content/users/none.jpg';
} 
```

> 有趣的是，呼应`<img src="'.$av.'">`作品

这是因为浏览器正在寻找与服务器不同的位置。我建议不要使用`../../relative/paths`，而是使用`base_url()`和`img()`. 当 URL 中有其他段时，相对路径会中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:21:12.120

URL 和文件路径不相同。从当前 URL`../../../img/content/users`可能和很可能与视图文件所在的硬盘上的文件路径完全不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:44:35.657

使用以下步骤

1）在配置文件（/application/config/）中创建一个自定义配置文件名site_config.php并粘贴以下代码

```
<?php

$config['base_url'] = "http://".$_SERVER['SERVER_NAME'] . str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);

if(!defined('DOCUMENT_ROOT')) define('DOCUMENT_ROOT',str_replace('system/application/config','',substr(__FILE__, 0, strrpos(__FILE__, '/'))));

$config['base_path']    =   constant("DOCUMENT_ROOT");
?> 
```

2) 编辑 autoload.php 以自动加载 site_config.php (/application/config/autoload.php)

```
$autoload['config'] = array('site_config'); 
```

3）然后使用以下代码查看图像

```
$image_path = $this->config->item('base_path').'folder_name/'.$userID.'.jpg';
if(file_exists($image_path)) {
  $avatar = $this->config->item('base_url').'folder_name/'.$userID.'.jpg';
} else {
  $avatar = $this->config->item('base_url').'default_folder_name/profile.jpg';
}
echo '<img src="'.$avatar.'" />'; 
```

我想它会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:20:37.053

试试这个：

```
$av = './img/content/users/'.$userID.'.jpg'; 
```

# node.js - 如何使用节点 js 版本 0.6.18 输出 twitter api respose

> ID：11100709
> 
> 赞同：2
> 
> 时间：2012-06-19T12:16:28.450
> 
> 标签：node.js, twitter

我希望创建第一个节点 js 应用程序。为此，我需要拉出公共推特推文并将推文作为请求响应输出。我搜索了很多，但我得到了用旧节点版本代码编写的代码（即 createServer、addListener 之类的）。我们如何编写请求 twitter 调用的代码并将 json 作为节点版本 0.6.18 中的响应输出？

以下是我尝试过的旧代码

```
var http = require("http");
var events = require("events");
var port = 8001;
var twitterClient = http.createClient(80, 'api.twitter.com');
var tweetEmitter = new events.EventEmitter();
var request = twitterClient.request("GET", "/1/statuses/public_timeline.json", {"host": "api.twitter.com"});

function getTweats() {

    request.addListener("response", function (response) {
        var body = "";

        response.addListener("data", function (data) {
            body += data;
        });

        response.addListener("end", function (end) {
            var tweets = JSON.parse(body);
            if (tweets.length > 0) {
                tweetEmitter.emit("tweets", tweets);
                console.log(tweets, 'tweets loaded');
            }
        });
    });

    request.end();
}

setInterval(getTweats(), 1000);

http.createServer(function (request, response) {
    var uri = url.parse(request.url).pathname;
    console.log(uri);
    if (uri === '/stream') {
        var cb = function (tweets) {
            console.log('tweet'); // never happens!
            response.writeHead(200, {"Content-Type": "text/plain"});
            response.write(JSON.stringify(tweets));
            response.end();
            clearTimeout(timeout);
        };
        tweetEmitter.addListener("tweets", cb);

        // timeout to kill requests that take longer than 10 secs
        var timeout = setTimeout(function () {
            response.writeHead(200, {"Content-Type": "text/plain"});
            response.write(JSON.stringify([]));
            response.end();
            tweetEmitter.removeListener("tweets", cb);
        }, 10000);

    } else {
        loadStaticFile(uri, response);
    }

}).listen(port);

console.log("Server running at http://localhost:" + port + "/"); 
```

并得到错误

```
$ node tweet.js 
Server running at http://localhost:8001/

timers.js:223
    callback.apply(timer, args);
             ^
TypeError: Cannot call method 'apply' of undefined
    at Timer.ontimeout (timers.js:223:14) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:38:53.510

你的错误很常见。代替：

```
setInterval(getTweats(), 1000); 
```

你需要

```
setInterval(getTweats, 1000); 
```

这是因为您要`setInterval`调用`getTweats`函数*本身*。

您的代码`getTweats()`带有括号。这首先*调用* `getTweats`，并将*结果*提供给`setInterval`. 由于这个结果是`undefined`（你的函数不返回任何东西），节点不能调用它。

# java - 在 Akka 中从客户端向服务器发送毒药

> ID：11100710
> 
> 赞同：0
> 
> 时间：2012-06-19T12:16:28.637
> 
> 标签：java, akka

我有一个使用 Java API 编写的客户端服务器程序。正在尝试向服务器发送消息，然后服务器将向客户端发送一些回复消息。然后客户端向服务器发送毒药。如果服务器收到毒丸消息，它必须关闭。下面的代码片段相同。在 ClientActor 中：

```
remoteActor.tell(poisonPill()); 
```

在 ServerActor 中：

```
public void onReceive(Object message) throws Exception {        
  if (message instanceof String) {          
    getSender().tell(message + " got something");       
  } else if (message instanceof PoisonPill) {           
    getContext().system().shutdown();       
  } 
} 
```

但是该`message instanceof PoisonPill`行没有执行，因此服务器始终在运行。

谁可以帮我这个事？为什么这条线根本没有执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:18:48.013

PoisonPill 由 Akka 自动处理。您不应该从 Actor 内部终止 ActorSystem。它相当于在业务对象中调用 System.exit(0)。如果要停止 ServerActor，请执行以下操作： context.stop(self)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:26:41.400

难道不应该

```
remoteActor.tell(new PoisonPill()); 
```

# xml - 运行测试用例时出现 NoSuchMethodError 错误

> ID：11100714
> 
> 赞同：2
> 
> 时间：2012-06-19T12:16:40.417
> 
> 标签：xml, xml-serialization

我面临一个奇怪的错误。我已经在 IntelliJ Idea 中设置了我的代码。

在运行测试用例时，我收到以下错误

```
java.lang.NoSuchMethodError: org.apache.xml.serializer.SerializationHandler.addAttribute(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Z)V

 transformerHandler.getTransformer().transform(new StreamSource(sourceFile), result); 
```

这似乎是一个序列化程序错误。我也尝试删除它，但我无法摆脱这个错误。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:39:54.703

此类问题通常是因为编译时类路径与运行时类路径不匹配，因此编译时存在的方法在运行时不存在。检查您的 IntelliJ 项目配置。

这是一个 Java 问题，与 XML 完全无关。

# java - 如何创建虚拟磁盘空间以避免节省硬盘？

> ID：11100718
> 
> 赞同：0
> 
> 时间：2012-06-19T12:16:47.863
> 
> 标签：java, ghostscript

我正在开发一个编辑 Pdf 文件的 Java 应用程序。此外，带有 ghostscript 的 shell 脚本用于制作 Pdf 的图像，然后将图像作为缓冲图像在 Java 应用程序中读取。当然，图像的创建需要一些时间。可以避免将图像保存在硬盘上吗？相反，我想使用仅存在于 RAM 中的虚拟位置。我试图搜索这个，但我不确定我在寻找什么关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:57:43.843

您可以让 Ghostscript 将图像（不是到磁盘文件，而是）输出到`stdout`. 然后您可以制作另一个程序（或您的 Java 应用程序）来读取`stdin`.

因此，很容易通过***管道***连接两个应用程序。管道肯定是*“仅存在于 RAM 中的虚拟位置”*，您无需为此创建额外的虚拟文件系统。

Ghostscript 语法（Linux、Unix、MacOSX）：

```
gs \
  -q \
  -dBATCH \
  -dNOPAUSE \
  -sOutputFile=%stdout \
  -sDEVICE=tiffg4 \
  -r600 \
  -dLastPage=1 \
   input.pdf \
| \
identify - 
```

这肯定会避免将输出文件写入磁盘......

但是，您主要担心的是，将输出实际写入磁盘（并再次从磁盘读取）会花费您太多宝贵的处理时间。

*Ghostscript 的实际处理可能*比将结果写入磁盘要慢得多。在这种情况下，如果您避免磁盘 I/O，您的净收益不会那么好。

好消息是您可以轻松测量和基准测试两种方法之间的差异（（1）首先使用 Ghostscript 将文件写入磁盘，然后使用第二个应用程序再次从磁盘读取文件；（2）将文件写入管道并直接从管道读取使用第二个应用程序）使用一些典型的 PDF 输入：

**首先，“写入磁盘并再次从磁盘读取”方法：**

```
time \
(gs \
  -q \
  -dBATCH \
  -dNOPAUSE \
  -sOutputFile=1.tiff \
  -sDEVICE=tiffg4 \
  -r600 \
  -dLastPage=1 \
   input.pdf \
&& \
identify 1.tiff) 
```

我对示例 PDF 的结果：

```
real  0m1.231s
user  0m1.188s
sys   0m0.024s 
```

**其次，“通过管道连接两个程序，避免磁盘 I/O 开销”方法：**

```
time \
gs \
  -q \
  -dBATCH \
  -dNOPAUSE \
  -sOutputFile=%stdout \
  -sDEVICE=tiffg4 \
  -r600 \
  -dLastPage=1 \
   input.pdf \
| \
identify - 
```

我对相同示例 PDF 的结果：

```
real  0m1.459s
user  0m1.422s
sys   0m0.036s 
```

**第三，测量您的第二个程序需要从磁盘读取和处理文件的时间：**

```
identify 1.tiff 
```

我在这个例子中的结果：

```
real  0m0.023s
user  0m0.011s
sys   0m0.006s 
```

当然，您的样品结果可能会非常非常不同。但是进行（并重复多次）此类测量是确定在您的情况下“避免磁盘 I/O”是否会导致值得的性能提升以及可以预期的增益的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:20:06.200

试试[Apache Commons VFS](http://commons.apache.org/vfs)。它带来了一个虚拟文件系统 API 以及几个方便的实现，尤其是[RAM](http://commons.apache.org/vfs/filesystems.html#ram)之一

# objective-c - 如何避免重复代码objective-c

> ID：11100719
> 
> 赞同：1
> 
> 时间：2012-06-19T12:16:49.190
> 
> 标签：objective-c, ios, oop

我有两种不同的方式在我的应用程序中表示数据：通过`UITableView`或`UIScrollView`。
所以我有 2 个主要课程：`AppTableView: UITableView`和`AppScrollView: UIScrollView`. 我想对两个视图实现相同的添加。所以我写了两个类：`SomeAdditionsTableView: UITableView`和`SomeAdditionsScrollView: UIScrollView`. 这个类的代码是一样的。主类现在看起来像
`AppTableView: SomeAdditionsTableView`和`AppScrollView: SomeAdditionsScrollView`。

如何避免此代码重复？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:59:33.317

是的，这是 Objective-c 中缺少多重继承的问题。当在这里分别需要 UIView 和 UIScrollView 的子类上的某些方法时，我遇到了同样的问题：[Subclassing UIView vs UIScrollView](https://stackoverflow.com/questions/9438145/subclassing-uiview-vs-uiscrollview)。我知道有 3 种可能的解决方案：

1.  如果您不需要存储任何类型的实例变量，只需在 UIScrollView 上声明一个类别并确保将该类别导入两个子类中。这是最简单的解决方案，但最不可能工作，因为如果您要进行子类化，您可能需要存储状态信息。
2.  只创建 UITableView 的子类，当你不想要 UITableView 时，根本不要将其用作 UITableView。从技术上讲，您可以将 UITableView 用作 UIScrollView 而无需调用任何 tableView 的方法。当然，您最终会承担 tableView 的“权重”（所有这些都是实例变量），但没有理由必须将 UITableView 用作 UITableView 而不仅仅是 UIScrollView。
3.  将尽可能多的代码委托给一个单独的对象，以最大限度地减少代码重复。在每个单独的子类中携带一个实例变量，该变量是方法委托并将*方法调用转发到该委托*。现在这里很有趣。您可以使用协议在子类中声明委托方法并覆盖特殊的 NSObject 方法：`- (id) forwardingTargetForSelector:(SEL)aSelector`以确保将这些方法调用发送到委托。您在子类上使用符合委托类中声明的协议的类别。这将在子类中公开委托类的所有方法，而无需您在子类中实际实现这些方法。当运行时在子类中找不到声明的方法时，会调用`- (id) forwardingTargetForSelector:(SEL)aSelector`，您可以使用它来返回您的委托/转发类。这将防止您需要转发每个单独的方法。根据这些方法调用的作用，这可能需要更多的“接线”，但最终会为您节省大量代码编写。它本质上是使用协议“模仿”objective-c 中的多重继承。有关更多详细信息，请参阅我的问题/答案：[https](https://stackoverflow.com/a/9419587/1147934) ://stackoverflow.com/a/9419587/1147934 。

Of the three, the last option tends to work the best for me. It takes a little work to get your head around but will significantly reduce code duplication. I also use it when I want to subclass without subclassing. The biggest requirement, though, is any class that you want to do this with will have to move it's method declarations out of it's interface into a separate protocol. But it's really not a big deal and the benefits of getting 'multiple inheritance like behavior' is great.

Also, there are times you may need the forwarded class to access instance variables in the forwarding class (the subclass). You can achieve this by using a delegate pattern whereby the forwarded class maintains a weak reference to the forwarding class in order to access those instance variables. For example, in your case, if you're trying to delegate methods that operate on a UIScrollView, those methods may need to be able to access that view. If those methods are stuck in a delegate class, they won't have direct access to the view's variables unless you give it to them. As usual with any delegate pattern, be very careful you don't create a retain cycle.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:25:59.883

如果您的添加不需要任何自己的状态，您可以将它们[设置](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)为`UIScrollView`. 然后，由于 a`UITableView`是 的一种`UIScrollView`，您也可以在其中一个上使用类别方法。

如果他们确实需要定义新变量，那么我会将其设为一个独立的类，并拥有一个`MyTableView : UITableView`具有`SomeAdditions`属性的子类，类似地，`MyScrollView : UIScrollView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:01:19.223

You can achieve a lot by using protocols and "has_a"-relationships, instead of inheritance's "is_a"-relationships.
One very common pattern is delegate, but protocols are also useful for forwarding methods calls to encapsulated or wrapped objects.
in the following example to classes, that are not related to each other, share a common object, but it is also possible, that objects of the same kind use objects of different classes, that all implement a common protocol, so equal objects could do very different stuff.

```
@interface ClassA : NSObject
@property (strong) id<BrainProtocol> *brain
@end

@@implementation ClassA
@synthezise brain;

-(void)theMethod
{
    [brain theMethod];
}
@end 
```

* * *

```
@interface ClassB : NSObject
@property (strong) id<BrainProtocol> *brain
@end

@@implementation ClassB
@synthezise brain;

-(void)theMethod
{
    [brain theMethod];
}
@end 
```

* * *

```
ClassA *a = [[ClassA alloc] init];
ClassB *b = [[ClassB alloc] init];

//A object, that implements the BrainProtocol

Brain *brain = [[brain alloc] init];
[a setBrain:brain];
[b setBrain:brain]; 
```

# facebook - 是否可以使用 Heroku 将 index.jsp 以外的文件放在 SSL 上？

> ID：11100721
> 
> 赞同：0
> 
> 时间：2012-06-19T12:16:51.593
> 
> 标签：facebook, ssl, heroku, indexing

我使用 Heroku 来托管我的 Facebook 应用程序。该应用程序运行良好。唯一的事情是我的应用程序依赖于两个文件：即 index.jsp 和 result.jsp。

现在，默认情况下 index.jsp 文件位于安全 ssl (https) 上，但是当我的应用程序将用户重定向到 result.jsp 时，它会在 http 上加载（而不是在 ssl 上）

有什么办法可以将另一个文件（即result.jsp）也放在ssl上吗？

是否有任何Git命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:07:24.497

您将需要手动检测用户是否使用 http 请求标头访问了非 https url `x-forwarded-proto`，然后将它们重定向到 https url。

# cryptography - 使用 PKCS#7 加密解密

> ID：11100723
> 
> 赞同：1
> 
> 时间：2012-06-19T12:16:58.797
> 
> 标签：cryptography, bouncycastle, public-key-encryption, pkcs#7

我想使用 PKCS #7 加密解密数据。在探索时，我发现一本书《**Beginning Cryptography With Java**
》在本书的第 9 章中有一个示例代码如下

```
import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.cert.*;
import java.util.Arrays;

import org.bouncycastle.cms.CMSProcessable;
import org.bouncycastle.cms.CMSProcessableByteArray;
import org.bouncycastle.cms.CMSSignedData;
import org.bouncycastle.cms.CMSSignedDataGenerator;

/**
 * Example of generating a detached signature.
 */
public class SignedDataExample
    extends SignedDataProcessor
{
    public static void main(String[] args) throws Exception
    {
        KeyStore         credentials = Utils.createCredentials();
        PrivateKey       key = (PrivateKey)credentials.getKey(
                                          Utils.END_ENTITY_ALIAS, Utils.KEY_PASSWD);
        Certificate[]    chain = credentials.getCertificateChain(
                                                           Utils.END_ENTITY_ALIAS);
        CertStore        certsAndCRLs = CertStore.getInstance(
                                "Collection", new CollectionCertStoreParameters(
                                                      Arrays.asList(chain)), "BC");
        X509Certificate  cert = (X509Certificate)chain[0];

        // set up the generator
        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();

        gen.addSigner(key, cert, CMSSignedDataGenerator.DIGEST_SHA224);
        gen.addCertificatesAndCRLs(certsAndCRLs);

        // create the signed-data object
        CMSProcessable data = new CMSProcessableByteArray(
                                                     "Hello World!".getBytes());

        CMSSignedData signed = gen.generate(data, "BC");

        // re-create
        signed = new CMSSignedData(data, signed.getEncoded());

        // verification step
        X509Certificate rootCert = (X509Certificate)credentials.getCertificate(
                                                                Utils.ROOT_ALIAS);
        if (isValid(signed, rootCert))

        {
           System.out.println("verification succeeded");
        }
        else
        {
           System.out.println("verification failed");
        }
     }
  } 
```

我有几个问题

1.  加密数据在哪里以及如何将其写入文件
2.  如何从加密数据中恢复原始数据
3.  我是否需要将密钥库发送给解密加密数据的人。
4.  我应该以什么格式发送加密数据

**多谢**

# visual-studio-2010 - VS2010：如何防止重新启动时将水平选项卡组更改为垂直选项卡组？

> ID：11100726
> 
> 赞同：3
> 
> 时间：2012-06-19T12:17:10.540
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, tabs, ide

在 Visual Studio 中，我可以通过拖动或右键单击选项卡来创建新选项卡组。当没有创建选项卡组时，可以选择该组是垂直的还是水平的。稍后可以只创建与第一个相同类型的组。

是否可以将水平布局更改为垂直布局？

主要问题是当 VS 关闭并再次打开时，垂直组变为水平组。

**编辑** VS2012 中存在问题，并且可接受的解决方案有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-06T17:43:11.137

我遇到了同样的问题，我的标签组突然变成了垂直的。相同的症状：如果我启动 VS2010 然后加载项目，则水平选项卡组；直接打开项目时的垂直选项卡组。我不知道是什么开始的，但我确实在它开始的时候运行了一个实验性蜂巢。

**这个解决方案对我有用：**

1.  打开`C:\Documents\Visual Studio 2010\Settings\CurrentSettings.vssettings`*
2.  寻找`DocumentGroupContainer Orientation="Vertical"`
3.  删除`Orientation="Vertical"`, （我的设置有两个，您可能会找出哪个对应于您的问题，但我只是将它们都删除了）

*请参阅“工具 | 选项 > 导入和导出设置”以找到您的实际设置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:49:11.297

您可以从组中拖动单个选项卡并在任何其他组中创建新组。你不能为一个整体做这件事。

# wpf-controls - IP 地址控制未绑定 WPF

> ID：11100727
> 
> 赞同：0
> 
> 时间：2012-06-19T12:17:10.930
> 
> 标签：wpf-controls

嗨，我正在使用 MVVM 模型，我按照 [http://firstbit.blogspot.com/2011/07/wpf-c-ipaddress-control.html](http://firstbit.blogspot.com/2011/07/wpf-c-ipaddress-control.html) 进行 IP 控制。但是当我应用绑定时，它不会显示在控件中。谁能帮我。

```
cs:IPAddressControl  Text="{Binding ViewData.StartIP,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" DataContext="{Binding}" x:Name="startIPControl" Grid.Row="3" Grid.Column="1" VerticalContentAlignment="Center" OverridesDefaultStyle="False">            
    </cs:IPAddressControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T14:32:12.933

从外观上看，控件没有实现 Text 属性的依赖属性，所以这可能是问题所在。

据我所知，您只能绑定到 DependencyObject 上的 DependencyProperty，请看这里：

[http://www.codeproject.com/Articles/71348/Binding-on-a-Property-which-is-not-a-DependencyPro](http://www.codeproject.com/Articles/71348/Binding-on-a-Property-which-is-not-a-DependencyPro)

我没有时间通过​​您提供的链接向您发送控件的更新版本，但我可以告诉您我对这个也不支持绑定的控件做了什么：

[https://wpfipaddress.codeplex.com/](https://wpfipaddress.codeplex.com/)

下载它的源代码，在*IPAddressControl.xaml.cs*中删除*Properties*区域，并用这个替换：

```
 #region Text dependency property

    /// <summary>
    /// Dependency property field for TextProperty.
    /// </summary>
    public static readonly DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(IPAddressControl), new PropertyMetadata("0.0.0.0", new PropertyChangedCallback(OnTextPropertyChanged)));

    #region Text dependency property callbacks

    /// <summary>
    /// Dependency property TextProperty changed callback.
    /// </summary>
    /// <param name="d">Dependency object.</param>
    /// <param name="e">Event arguments.</param>
    private static void OnTextPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        IPAddressControl o = d as IPAddressControl;

        // Do stuff here, then raise event for property changed.

        try
        {
            var value = e.NewValue as string;
            var splitValues = new string[4];
            if (value != null)
            {
                var splits = value.Split(new char[] { '.' }, StringSplitOptions.None);
                Array.Copy(splits, splitValues, splits.Length);
            }
            o.txtboxFirstPart.Text = splitValues[0];
            o.txtboxSecondPart.Text = splitValues[1];
            o.txtboxThridPart.Text = splitValues[2];
            o.txtboxFourthPart.Text = splitValues[3];
        }
        catch (Exception ex)
        {                
            throw new Exception("Error in IP control see inner exception!", ex);
        }

        o.RaiseTextChanged(e);
    }

    #endregion Text dependency property callbacks

    /// <summary>
    /// Gets or sets Text.
    /// </summary>
    public string Text
    {
        get { return (string)this.GetValue(IPAddressControl.TextProperty); }
        set { this.SetValue(IPAddressControl.TextProperty, value); }
    }

    /// <summary>
    /// Occurs when dependency property TextProperty changed.
    /// </summary>
    public event DependencyPropertyChangedEventHandler TextChanged;

    /// <summary>
    /// Raises TextChanged event.
    /// </summary>
    /// <param name="e">Event arguments.</param>
    protected virtual void RaiseTextChanged(DependencyPropertyChangedEventArgs e)
    {
        if (this.TextChanged != null)
            this.TextChanged(this, e);
    }

    #endregion Text dependency property 
```

# vb.net - VB.NET 获取进程列表并杀死进程

> ID：11100732
> 
> 赞同：3
> 
> 时间：2012-06-19T12:17:26.860
> 
> 标签：vb.net, process

我想插入所有运行到列表框中的进程，
以及如何“杀死”进程并启动进程？

```
for i = 0 to procCount
...
next i 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T12:18:57.020

列表+杀死：

```
For Each p As Process In Process.GetProcesses
    ListBox1.Items.Add(p.ProcessName.ToString)
    If String.compare(p.ProcessName, "iexplore",true) = 0 Then
        p.Kill()
    End If
Next 
```

使用`kill()`杀死进程
打开进程：

```
Process.Start("pname.exe") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T12:40:27.993

您还可以在以编程方式启动 Excel 之前创建一个包含所有正在运行的 Excel 进程的列表（使用 Linq 语句）：

```
Dim lstExcelProcess As List(Of Process) = (From p As Process In Process.GetProcesses Where p.ProcessName.ToUpper Like "Excel*".ToUpper).ToList 
```

在你完成你必须做的事情之后，杀死之前没有列出的唯一进程：

```
Dim process As Process = (From p As Process In process.GetProcesses Where p.ProcessName.ToUpper Like "Excel*".ToUpper And Not lstExcelProcess.Contains(p))(0)
            process.Kill() 
```

# javascript - Mozilla 需要对 JavaScript 进行任何修改吗？

> ID：11100736
> 
> 赞同：-2
> 
> 时间：2012-06-19T12:17:39.087
> 
> 标签：javascript

> **可能重复：**
> [需要适用于所有浏览器的将表格导出到 Excel 的 JavaScript 解决方案](https://stackoverflow.com/questions/11050462/in-need-of-javascript-solution-for-exporting-table-to-excel-which-works-in-all-b)

我的要求是我希望通过单击“导出”按钮将表格导出到 Excel。在我的代码中，我在 Exporting HTML table (in JSP Page) to Excel 中有一个问题。截至目前，它是从 Internet Explorer 导出的，而不是从 mozillaFireFox 导出的。我想从所有浏览器（通过单击按钮）导出它，例如 mozilla firefox、Internet Explorer。任何人都可以帮助我吗？我的java脚本如下。

```
function Export_to_Excel()
{ 
    alert (" Welcome !  Have a Nice Day"); 

    var x=excel.rows;

    var objExcel  = new ActiveXObject("Excel.Application"); 

    objExcel.Visible = true; 
    var objWorkbook = objExcel.Workbooks.Add; 

    for(i=0;i<x.length;i++)
    { 

        var y=x[i].cells; 

        for(j=0;j<y.length;j++)
        { 
              objWorkbook.ActiveSheet.Cells(i+1, j+1).value=y[j].innerText; 
        } 

    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:19:42.823

如[http://support.mozilla.org/en-US/kb/ActiveX](http://support.mozilla.org/en-US/kb/ActiveX)所述，Firefox 不支持 ActiveX。

# ruby - Ruby 是否与 C# 中的 TimeSpan 等效？

> ID：11100741
> 
> 赞同：14
> 
> 时间：2012-06-19T12:17:52.280
> 
> 标签：ruby, timespan

在 C# 中有一个 TimeSpan 类。它代表一段时间，从许多日期操作选项中返回。您可以创建一个并添加或减去日期等。

在 Ruby 中，尤其是 rails 中，似乎有很多日期和时间类，但没有代表时间跨度？

理想情况下，我想要一个可以使用标准日期格式选项轻松输出格式化日期的对象。

例如。

```
ts.to_format("%H%M") 
```

有这样的课吗？

如果我能做类似的事情会更好

```
 ts = end_date - start_date 
```

我知道减去两个日期会导致分隔所述日期的秒数，我可以从中计算出来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:21:11.763

你可以做类似这样的事情：

```
irb(main):001:0> require 'time'         => true
irb(main):002:0> initial = Time.now     => Tue Jun 19 08:19:56 -0400 2012
irb(main):003:0> later = Time.now       => Tue Jun 19 08:20:05 -0400 2012
irb(main):004:0> span = later - initial => 8.393871
irb(main):005:0> 
```

这只是返回一个以秒为单位的时间，看起来并不那么漂亮，您可以使用该`strftime()`函数使其看起来很漂亮：

```
irb(main):010:0> Time.at(span).gmtime.strftime("%H:%M:%S") => "00:00:08" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:25:42.433

像这样的东西？[https://github.com/abhidsm/time_diff](https://github.com/abhidsm/time_diff)

```
require 'time_diff'
time_diff_components = Time.diff(start_date_time, end_date_time) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:21:29.647

不，它没有。您可以只添加秒数或使用`advance`方法。

`end_date - start_date`会有`Float`类型

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T02:45:20.537

最后，我在@tokland 的回答中提出了建议。不太确定如何使它成为一个合适的宝石，但它目前对我有用：

[time_diff 的时间跨度分支](https://github.com/toxaq/timespan)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T01:51:04.667

还没有@toxaq ......但我已经开始了一些事情！

[https://gist.github.com/thatandyrose/6180560](https://gist.github.com/thatandyrose/6180560)

```
class TimeSpan
attr_accessor :milliseconds

def self.from_milliseconds(milliseconds)
    me = TimeSpan.new
    me.milliseconds = milliseconds
    return me
end

def self.from_seconds(seconds)
    TimeSpan.from_milliseconds(seconds.to_d * 1000)
end

def self.from_minutes(minutes)
    TimeSpan.from_milliseconds(minutes.to_d * 60000)
end

def self.from_hours(hours)
    TimeSpan.from_milliseconds(hours.to_d * 3600000)
end

def self.from_days(days)
    TimeSpan.from_milliseconds(days.to_d * 86400000)
end

def self.from_years(years)
    TimeSpan.from_days(years.to_d * 365.242)
end

def self.diff(start_date_time, end_date_time)
    TimeSpan.from_seconds(end_date_time - start_date_time)
end

def seconds
    self.milliseconds.to_d * 0.001
end

def minutes
    self.seconds.to_d * 0.0166667
end

def hours
    self.minutes.to_d * 0.0166667
end

def days
    self.hours.to_d * 0.0416667
end

def years
    self.days.to_d * 0.00273791
end
end 
```

# c++ - 如何使 Qt 小部件可调整大小

> ID：11100745
> 
> 赞同：0
> 
> 时间：2012-06-19T12:18:08.517
> 
> 标签：c++, qt

> **可能重复：**
> [如何在 Qt Creator 中添加可调整大小的小部件？](https://stackoverflow.com/questions/7195781/how-can-i-add-resizable-widgets-in-qt-creator)

我正在使用 QTreeView 和 QListView 并且我想让它们变得相当大，即当我走到 QTreeview 的顶端时，指针应该被转换成一个垂直箭头，它允许我通过鼠标拖放来向上调整大小，这个功能现在在许多应用程序中都可以看到。

怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:09:59.720

您可以将小部件放入`QSplitter`.

# html - CSS 翻译 vs 改变绝对定位值

> ID：11100747
> 
> 赞同：12
> 
> 时间：2012-06-19T12:18:16.097
> 
> 标签：html, web-applications, css, webkit-animation

我一直在为 iPad 和其他平板电脑编写一个 web 应用程序，并且在考虑到正确和有效的定位和动画方面遇到了很多视口问题。我最近想出了对所有自由浮动元素使用 -webkit-transform 的想法。我的问题是，**使用 CSS 规范提供的转换是否会比更改元素内部的 lrtb 值更好地实现流畅可靠的动画`position:relative`？** 启用硬件加速后，我发现移动元素会随机闪烁，尤其是在方向变化期间。（绝对定位的元素）所以，由于没有著名的博客使用这种方法，我想检查是否有一些专业提示的原因，这是一个坏主意。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-29T16:46:08.083

补充 Luca 的观点，这里有两篇文章测试翻译与位置对象的性能。

TLDR：

使用`transform: translate(x,y);`CSS 过渡会大大增加元素的绘制时间。

但是，`position: absolute;` `top/left`如果在没有过渡的元素上使用会更快。

[为什么使用 translate 移动元素优于绝对位置，上/左](http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)（Paul Irish）：

> 动画指南：
> 
> *   如果可能，请使用 CSS 关键帧动画或 CSS 过渡。浏览器可以在这里优化绘画和合成。
>     
>     
> *   如果需要是基于 JS 的动画，请使用 requestAnimationFrame。避免 setTimeout、setInterval。
>     
>     
> *   如果可以，请避免更改每一帧的内联样式（jQuery animate()-style），CSS 中的声明式动画可以通过浏览器进行更多优化。
>     
>     
> *   使用 2D 变换而不是绝对定位通常会通过更短的绘制时间和更流畅的动画来提供更好的 FPS。
>     
>     
> *   使用时间轴框架的模式来调查是什么减慢了你的行为 “显示绘制矩形”和“渲染复合层边框”是很好的专业动作来验证你的元素在哪里被渲染。

[神话破坏变换：平移与位置顶部/左侧](http://blog.tumult.com/2013/02/28/transform-translate-vs-top-left/)（Tumult 博客）：

> 主要结论
> 
> *   如果您不使用转换，设置顶部/左侧属性将比使用转换更快。
>     
>     
> *   如果目标是 WebKit，则最快的帧速率将来自使用带有 translate 属性的转换，并为 Safari/Mobile Safari 强制图形加速（Chrome 会自动执行此操作）。
>     
>     
> *   如果合成不透明的项目，在 WebKit 中强制图形加速将在 Safari/Mobile Safari 中产生巨大的性能提升，在 Chrome 中会有适度的提升。
>     
>     
> *   如果只合成不透明的项目，在 WebKit 中强制图形加速将对性能产生负面影响。

注意：为了确保移动浏览器中的 GPU 加速转换，请使用`transform: translate3d(0,0,0)`. （[http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/](http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/)）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-19T13:00:37.977

it is possible to achieve better performances with transform rather than position.

I'll quote a few bits from this excellent article, but you should really read it to get the whole picture:

[http://www.html5rocks.com/en/tutorials/speed/html5/](http://www.html5rocks.com/en/tutorials/speed/html5/)

> Currently most browsers only use GPU acceleration when they have a strong indication that an HTML element would benefit from it. The strongest indication is that a 3D transformation was applied to it. Now you might not really want to apply a 3D transformation, but still gain the benefits from GPU acceleration - no problem. Simply apply the identity transformation:

```
-webkit-transform: translateZ(0); 
```

reason behind this, is that you delegate some of the work that the CPU has to do, to the GPU, however be considerate as this won't necessarily be always worth, especially on a mobile device like the iPad, that is your environment:

> Please be warned that this applying this transformation does not guarantee to help your performance. It might simply crank up your GPU, use up more battery but deliver the same performance as before. So be careful with this technique and only use it if you experience a true performance win.

# java - 集中式 Java 日志记录

> ID：11100760
> 
> 赞同：29
> 
> 时间：2012-06-19T12:18:49.767
> 
> 标签：java, logging, log4j, distributed-computing, logback

我正在寻找一种方法来集中分布式软件（用 Java 编写）的日志记录问题，这将非常容易，因为所讨论的系统只有一个服务器。但请记住，将来很可能会运行更多特定服务器的实例（并且需要更多应用程序），必须有类似 Logging-Server 的东西，它处理传入的日志并使支持团队可以访问它们。

*现在的情况是，几个 java 应用程序使用 log4j 将其数据写入本地文件，因此如果客户遇到问题，支持团队必须要求提供日志，这并不总是那么容易并且需要很多时间. 在服务器故障的情况下，诊断问题没有那么大，因为无论如何都有远程访问，但是即使通过 Logging-Server 监控所有内容仍然很有意义。*

当我处理有关“集中日志记录”的问题时，我发现了另一个[问题](https://stackoverflow.com/questions/1737693/whats-the-best-practice-for-centralised-logging)（实际上是唯一一个（在这种情况下）可用答案的问题。问题是，所有应用程序都在封闭环境中（在一个网络内）和安全指南中运行不允许任何与内部软件有关的东西离开环境网络。

我还发现了一篇关于如何[实现](http://java.sys-con.com/node/36267)这样的 Logging-Server 的精彩文章。由于这篇文章是在 2001 年写的，我会认为有人可能已经解决了这个特定的问题。但是我的搜索结果一无所获。

**我的问题**：是否有一个日志框架可以通过支持团队访问的中央服务器处理网络日志？

规格：

*   可用性
*   服务器必须由我们运行。
*   Java 1.5 兼容性
*   与异构网络的兼容性。
*   最佳情况：协议使用 HTTP 发送日志（以避免防火墙问题）
*   最佳情况：使用 log4j 或 LogBack 或基本上任何实现 slf4j

**没有必要，但很高兴拥有**

*   身份验证和安全性当然是一个问题，但至少可以推迟一段时间（如果它是开放软件，我们会将其扩展到我们的需求*OT：我们总是回馈项目*）。
*   数据挖掘和分析对于改进软件非常有帮助，但也可以是外部应用程序。

我最坏的情况是他们不是那样的软件。对于这种情况，我们可能会自己实现。但是如果有这样一个客户端-服务器应用程序，我将非常感谢不需要做这个特别有问题的工作。

提前致谢

**更新：**该解决方案必须在多个支持 java 的平台上运行。（主要是 Windows、Linux、一些 HP Unix）

**更新：**经过大量研究，我们实际上找到了我们能够获得的解决方案。[clusterlog.net](http://www.clusterlog.net/)（至少从 2015 年中开始离线）为分布式软件提供日志服务，并兼容 log4j 和 logback（兼容 slf4j）。它让我们可以通过应用程序分析每个用户。因此，很容易重现报告的错误（甚至是未报告的错误）。它还通过电子邮件通知我们重要事件，并有一个报告系统，将相同来源的日志汇总为易于访问的格式。几天前，他们在这里部署了（完美无瑕），并且运行良好。

更新（2016 年）：这个问题仍然有很多流量，但我提到的网站已经不存在了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:34:02.560

您可以将 Log4j 与 SocketAppender 一起使用，因此您必须将服务器部分编写为 LogEvent 处理。见[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketAppender.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-12T10:36:11.763

> **NXLOG**或**LogStash**或**Graylogs2**

或者

> ***LogStash + ElasticSearch（+可选 Kibana）***

例子：

1) [http://logstash.net/docs/1.3.3/tutorials/getting-started-simple](http://logstash.net/docs/1.3.3/tutorials/getting-started-simple)

2) [http://logstash.net/docs/1.3.3/tutorials/getting-started-centralized](http://logstash.net/docs/1.3.3/tutorials/getting-started-centralized)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T12:40:15.370

看看 logFaces，看起来你的规格已经满足了。 [http://www.moonlit-software.com/](http://www.moonlit-software.com/)

*   可用性（检查）
*   服务器必须由我们运行。（查看）
*   Java 1.5 兼容性（检查）
*   与异构网络的兼容性。（查看）
*   最佳情况：协议使用 HTTP 发送日志（以避免防火墙问题）（几乎是 TCP/UDP）
*   最佳情况：使用 log4j 或 LogBack 或基本上任何实现 slf4j 的东西（检查）
*   身份验证（检查）
*   数据挖掘和分析（可能通过扩展 api）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-19T13:07:07.050

**Facebook 有一个现成的解决方案 - [Scribe](https://github.com/facebook/scribe)** - 在后台使用 Apache Hadoop。然而，据我所知，大多数公司仍然倾向于为此开发内部系统。大约两年前，我在一家这样的公司工作并在那里处理日志。我们还使用了 Hadoop。在我们的例子中，我们有以下设置：

*   我们有一个小型专用机器集群用于日志聚合。
*   工作人员从生产服务中挖掘日志，然后解析各个行。
*   然后 reducer 会聚合必要的数据并准备报告。

我们感兴趣的报告数量很少且数量固定。在极少数情况下，当我们想要执行不同类型的分析时，我们只需为此添加一个专门的 reducer 代码，并可选择针对旧日志运行它。

如果您无法提前确定您感兴趣的分析类型，那么最好将工作人员准备的结构化数据存储在 HBase 或其他一些 NoSQL 数据库中（[例如，人们使用 Mongo DB](http://www.cubrid.org/blog/dev-platform/log-analysis-system-using-hadoop-and-mongodb/)）。这样您就不需要从原始日志中重新聚合数据，而是能够查询数据存储。

有很多关于这种日志聚合解决方案的好文章，例如，[使用 Pig 查询聚合数据](http://www.cloudera.com/blog/2009/06/analyzing-apache-logs-with-pig/)。[Pig](http://pig.apache.org)允许您使用类似 SQL 的查询来查询基于 Hadoop 的大型数据集。

# c - 为什么要使用线程特定的数据？

> ID：11100763
> 
> 赞同：3
> 
> 时间：2012-06-19T12:19:05.063
> 
> 标签：c, multithreading, pthreads

由于每个线程都有自己的堆栈，因此可以将其私有数据放在上面。例如，每个线程可以分配一些堆内存来保存一些数据结构，并使用相同的接口来操作它。那么**为什么特定于线程的数据是有帮助的**呢？

我能想到的唯一情况是，每个线程可能有多种私有数据。如果我们需要访问该线程中调用的任何函数中的私有数据，我们需要将数据作为参数传递给所有这些函数，这既无聊又容易出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:11:43.663

线程局部存储是一种避免全局状态的解决方案。如果数据不是跨线程共享而是由多个函数访问，则可以使其成为线程本地的。无需担心破坏可重入性。使调试更容易。

从性能的角度来看，使用线程本地数据是一种避免*错误共享*的方法。假设您有两个线程，一个负责写入变量*x*，另一个负责读取变量*y*。如果要将它们定义为全局变量，它们可能位于同一缓存行上。这意味着如果其中一个线程写入*x*，CPU 将更新缓存行，这当然包括变量*y*，因此缓存性能会下降，因为没有理由更新*y*。

如果您使用线程本地数据，一个线程将只存储变量*x*而另一个只存储变量*y*，从而避免错误共享。但请记住，还有其他方法可以解决此问题，例如缓存行填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:30:31.530

与堆栈不同（就像线程本地数据专用于每个线程），线程本地数据很有用，因为它通过函数调用持续存在（不像堆栈数据，如果在其函数之外使用可能已经被覆盖）。

另一种方法是使用专用于每个线程的相邻全局数据，但是当涉及 CPU 缓存时，这会影响性能。由于不同的线程很可能在不同的内核上运行，这种全局数据的“共享”可能会带来一些不希望的性能下降，因为来自一个内核的访问可能会使另一个内核的缓存行无效，而后者会导致更多的交互核心流量以确保缓存一致性。

相比之下，使用线程本地数据在概念上不应涉及弄乱其他内核的缓存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T12:47:49.077

将线程本地存储视为另一种全局变量。从某种意义上说，它是全球性的，您不必传递它，不同的代码可以随意访问它（当然，鉴于声明）。但是，每个不同的线程都有自己独立的变量。通常，全局变量在多线程编程中非常糟糕，因为其他线程可以更改该值。如果将其设为线程本地，则只有您的线程可以看到它，因此其他线程不可能意外更改它。

另一个用例是当您被迫使用（设计糟糕的）API 时，该 API 期望您使用全局变量将信息传递给回调函数。这是一个强制进入全局变量的简单实例，但使用线程本地存储使其线程安全。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T13:11:31.200

好吧，我已经编写多线程应用程序 30 多年了，但从未发现任何需要使用 TLS。如果线程需要数据库绑定到线程的数据库连接，线程可以打开自己的一个并将其保留在堆栈上。由于线程不能被调用，只能发出信号，所以没有问题。每次我看到这个神奇的“TLS”时，我都意识到它不能解决我的问题。

在我典型的消息传递设计中，对象排队进入永不终止的线程，因此不需要 TLS。

使用线程池就更没用了。

我只能说使用 TLS=bad design。有人把我说对了，如果可以的话:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T12:22:52.057

我将线程本地存储用于数据库连接，有时用于请求/响应对象。举两个例子，都来自 Java webapp 环境，但原则是成立的。

Web 应用程序可能包含大量调用各种子系统的代码。其中许多可能需要访问数据库。就我而言，我编写了每个需要 db 从 db 池中获取 db 连接、使用该连接并将连接返回到池的子系统。线程本地存储提供了一种更简单的替代方案：创建请求时，从池中获取数据库连接并将其存储在线程本地存储中。然后每个子系统只使用来自线程本地存储的数据库连接，当请求完成时，它会将连接返回到数据库池。该解决方案具有性能优势，同时也不需要我通过每个级别传递数据库连接：即我的参数列表仍然更短。

在同一个 Web 应用程序中，我决定在一个远程子系统中真正想要查看 Web 请求对象。所以我必须重构以将这个对象一直向下传递，这将涉及大量的参数传递和重构，或者我可以简单地将对象放入线程本地存储中，并在需要时检索它。

在这两种情况下，您都可以争辩说我一开始就搞砸了设计，只是使用线程本地存储来保存我的培根。你可能有一点。但我也可以争辩说 Thread Local 使代码更简洁，同时保持线程安全。

当然，我必须非常确定我放入 Thread Local 的东西确实是每个线程一个且只有一个。对于 Web 应用程序，Request 对象或数据库连接非常适合此描述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T15:47:06.867

我想补充一下上面的答案，据我所知，在性能方面，堆栈分配比堆分配快。

关于跨调用传递本地数据，好吧 - 如果你在堆上分配，你需要将指针/引用（我是一个 Java 人:)）传递给调用 - 否则，你将如何访问内存？

TLS 也可以很好地存储用于在线程内跨调用传递数据的上下文（我们使用它来保存跨线程登录用户的信息 - 某种会话管理）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-02T09:06:27.173

当特定线程的所有函数都需要访问一个公共变量时，使用线程特定数据。该变量是该特定线程的本地变量，但充当该线程所有函数的全局变量。

假设我们有任何进程的两个线程 t1 和 t2。变量“a”是 t1 的线程特定数据。然后，t2 不知道“a”，但 t1 的所有函数都可以将“a”作为全局变量访问。t1 的所有函数都会看到“a”的任何变化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-18T14:59:55.703

有了新的 OOP 技术，我发现线程特定的数据是无关紧要的。您可以传递函子，而不是将函数传递给线程。您传递的函子类可以保存您需要的任何线程特定数据。

例如。使用 C++11 或 boost 的示例代码如下所示

```
MyClassFunctor functorobj;       <-- Functor Object. Can hold the function that runs as part of thread as well as any thread specific data
boost::thread mythread(functorobj);

Class MyClassFunctor
{
private:
 std::list mylist; <-- Thread specific data
public:
    void operator () ()
    {
      // This function is called when the thread runs
      // This can access thread specific data mylist.
    }
}; 
```

# .net - Windows 编程与 Unix 编程有何不同

> ID：11100775
> 
> 赞同：2
> 
> 时间：2012-06-19T12:19:29.673
> 
> 标签：.net, windows, macos, cocoa, api

如果不是专业的程序员，我至少熟悉从 OS X 或 Linux 编程所需的基本步骤，但是我没有 Windows 系统的经验。我的工作主要集中在安全应用程序上。

是什么让 Windows 上的编程与众不同？

需要明确的是，我不是在寻找辩论，而是在寻找一份清单，然后我可以将其用作填补我知识空白的起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:00:39.957

简单地说，Windows 有它自己的功能——方法，如果你处理 OOP——它可以使你的程序与底层的 Windows 操作系统交互。

例如，如果要创建一个在特定用户的安全上下文中运行的新进程，则可以调用该`CreateProcessAsUser` 函数。

一般来说，Windows 自己的功能比各自的 Unix 风格更丰富。此外，在 Windows 中，您通常有不止一种或两种方法来完成工作。

# c# - 正则表达式

> ID：11100779
> 
> 赞同：2
> 
> 时间：2012-06-19T12:19:41.717
> 
> 标签：c#, regex

我有一个文本文件，我想用正则表达式解析它。如何将“Entry #”之间的文本块提取到下一个“Entry #”之前的空行

```
GmtOffset=120
GmtExistFlag=0
LocalTimeFlag=0
Entry #1
EventType=1
FieldType=256
FieldValue=12-05-2010, 11:00:00
FieldType=512
FieldValue=12-05-2010, 11:30:00
FieldType=1
FieldValue(3)=Jku

Entry #2
EventType=1
FieldType=256
FieldValue=15-05-2010, 06:00:00
FieldType=512
FieldValue=15-05-2010, 06:30:00
FieldType=1
FieldValue(3)=Lsh
FieldType=1024
FieldValue=15-05-2010, 05:45:00
FieldType=65536
FieldValue=1

Entry #3
EventType=4
FieldType=1
FieldValue(4)=STYL
FieldType=1024
FieldValue=13-05-2010, 11:00:00
FieldType=65536
FieldValue=1
FieldType=2097152
FieldValue=2
FieldType=8388608
FieldValue=-2147483648 
```

如何 ？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T12:21:35.513

按[拆分](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.100%29.aspx)`Entry #`会给你你想要的。这里不需要正则表达式。只需拆分并删除最后的空行：

```
var blocks = text.Split("Entry #");
foreach (var block in blocks)
{
    // removing the line with the entry number
    block = block.Substring(block.IndexOf(Environment.NewLine));

    // removing the empty lines
    block = block.Trim('\n', '\r');

    // add your processing here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:51:42.753

虽然我同意@ie 的解决方案，但我认为该解决方案会忽略`Entry #`. 在这种情况下， Regex.Split 将起作用。

```
string[]  matches = Regex.Split(inputStrng, @"Entry #\d+\s+");
foreach (string match in matches)
{     
    Console.WriteLine(match);
} 
```

# actionscript-3 - 如何将键码值存储到变量？（闪存 as3）

> ID：11100783
> 
> 赞同：0
> 
> 时间：2012-06-19T12:19:44.010
> 
> 标签：actionscript-3, flash, variables, keycode

我是 AS3 的新手。我试图用键盘事件移动一个对象。我使用 if/else 条件来检查是否键码是这个......然后语句运行。

但我不能用 switch 方法来做到这一点。我想取一个变量。什么将存储我按下的键码。& 它将检查我按下 37 键的语句，所以对象向左移动。

所以我的问题是，如何将当前键码（按下什么键）存储到变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:33:55.600

```
 stage.addEventListener(KeyboardEvent.KEY_DOWN, _keyboard);

    private function _keyboard(e:KeyboardEvent):void 
    {
        switch (e.keyCode) {
            case 38: // arrow up
                trace("It Works!");
            break;
        }
    } 
```

这有什么问题吗？

如您所见，您的事件存储有关键码的信息，您可以通过它访问它。另请注意，侦听器已添加到舞台。

# jquery - 滑块中未定义的数字链接

> ID：11100788
> 
> 赞同：0
> 
> 时间：2012-06-19T12:19:59.453
> 
> 标签：jquery, slider, numeric

我有一个 jquery 滑块，链接：[http ://ekallevig.com/jshowoff/](http://ekallevig.com/jshowoff/)

这是我的html代码：

```
<div id="features">
<div>1</div>
<div>2</div>
<div>3</div>
</div> 
```

滑块代码：

```
<script type="text/javascript">     
$(document).ready(function(){
 $('#features').jshowoff({
  speed:3500,
  changeSpeed:400,
  links: false,
  animatePause: true,
  controls: true,
  effect: 'slideLeft',
  controlText:{play:'Play',pause:'Stop',previous:'Prev',next:'Next'},
  hoverPause: true 
 });                
});
</script> 
```

除了数字链接之外，我的滑块中的所有内容都可以正常工作！

如果我启用它：

```
links: true, 
```

我会得到未定义的代码！它应该是 1 2 3 not undefined undefined undefined

请看我的照片：

[http://s7.postimage.org/buf1wehsr/sliders.jpg](http://s7.postimage.org/buf1wehsr/sliders.jpg)

我如何修复数字链接？我希望你们能理解我，对不起我的英语不好:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:38:11.677

```
<div id="features">
    <div title="1">1</div>
    <div title="2">2</div>
    <div title="3">3</div>
</div> 
```

# jquery - jQuery validate 插件没有验证我喜欢的选择框

> ID：11100789
> 
> 赞同：0
> 
> 时间：2012-06-19T12:20:00.833
> 
> 标签：jquery, jquery-validate

在我的表单中，使用了精美的选择框。这导致创建一些跨度并显示它并使用`style = "display:none"`

在谷歌搜索时，我发现 jQuery 验证插件不会验证隐藏字段或表单上不可见的字段。但在我的情况下，我如何利用 jQuery validate 来验证那些花哨的选择框？我应该如何应用该例外。

请注意，我也知道该`ignore`选项。这部分实际上对隐藏字段有很大帮助，这些字段现在在表单上不可见。

我只想为那些实际上对用户可见但被那些花哨的样式隐藏的选择框添加一些例外。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:24:55.537

我想最简单的事情就是覆盖`display: none;`声明。

尝试：

```
.hidden {
    display: block !important; /* !important to override inline style */
    position: absolute;
    visibility: hidden;
    left: -999em;
    z-index: -20;
} 
```

您要显示的元素在哪里`.hidden`（或者您可以使用 javascript 将此类添加到元素中）

# javascript - JQuery 文本动画 - 如何用新文本值替换当前文本值

> ID：11100792
> 
> 赞同：0
> 
> 时间：2012-06-19T12:20:17.103
> 
> 标签：javascript, jquery

我有一个应用于 div 的 jquery fly-in 文本动画师。现在 div 只能是一定的大小，因此允许一定数量的文本行。现在我想在动画中添加更多的文本行，基本上替换当前的，然后再次循环回到第一行文本。检查我的代码以了解我的意思：

查询：

```
<script type="text/javascript">

$(document).ready(function(){

    $('.flying1 .flying-text').css({opacity:0});
    $('.flying1 .active-text').animate({opacity:1, marginLeft: "0px"}, 1500); //animate first text
    var int = setInterval(changeText, 2000);    // call changeText function every 5 seconds

function changeText(){  
    var $activeText = $(".flying1 .active-text");     //get current text    
    var $nextText = $activeText.next();  //get next text
    /*if($activeText.next().length == 0) $nextText = $('.container .flying-text:first');

    $activeText.animate({opacity:0}, 1000);
    $activeText.animate({marginLeft: "-100px"});*/

     if ($activeText.next().length == 0) {
        $nextText = $('.flying1 .flying-text:first'); //if it is last text, loop back to first text

        // To fade all out
        var $allText = $(".flying1 div");
        $allText .animate({
            opacity: 0
        }, 1000);
        $allText .animate({
            marginLeft: "-100px"
        });
    }

    $nextText.css({opacity: 0}).addClass('active-text').animate({opacity:1, marginLeft: "0px"}, 1500, function(){

        $activeText.removeClass('active-text');                                           
    });
}
});
</script> 
```

HTML：

```
<div class="flying1">
  <div class="flying-text active-text">Text1</div>                  
  <div class="flying-text">Text2</div>                      
  <div class="flying-text">Text3</div>
  <div class="flying-text">Text4</div>
  <div class="flying-text">Text5</div>  
  <div class="flying-text">Text6</div>                   
</div> 
```

这是由于空间限制，Div(.flying1) 可以占用的最大文本量...我想在 Text1-6 之后运行的文本动画中再添加 6 行，所以它们基本上是 Text7-12 运行在与 Text1-6 相同的空间...

谢谢你！！

# javascript - Spring Faces 中的 onclick 事件来自哪里？

> ID：11100793
> 
> 赞同：0
> 
> 时间：2012-06-19T12:20:19.193
> 
> 标签：javascript, spring, jsf

我试图抑制由 Spring Faces 添加的 onclick 事件。这看起来像是对使用 ProgressiveCommandLinkRenderer 呈现的任何链接的 Spring.remoting.submitForm 调用。但是，它不在服务器返回的响应中。相反，客户端似乎有一些 javascript 将元素从 an 更改为 an 并添加此 onclick。

即使在通过 Spring.uncompressed.js、Spring.Dojo.uncompressed.js 和其他搜索之后，我似乎也找不到这个 javascript，或者除了直接调用之外的任何对 Spring.remoting.submitForm 的引用（即不是通过突兀的 javascript onclick处理程序）。这个代码在哪里？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:41:16.910

我最终发现这实际上是作为“渲染回调”添加到 BaseHtmlTagRenderer 中的。这是作为内联脚本片段添加的，它在客户端调用 Spring.addDecoration ，这反过来会修改呈现的 HTML 以匹配呈现回调所说的内容。

此处详细介绍了此的 Spring javascript 实现（未提及 Spring Faces 的具体用法）：http: [//static.springsource.org/spring-webflow/docs/2.0.x/reference/html/ch11s04.html](http://static.springsource.org/spring-webflow/docs/2.0.x/reference/html/ch11s04.html)

# tridion - 如何向 Tridion 的联系人视图添加选项卡？

> ID：11100800
> 
> 赞同：7
> 
> 时间：2012-06-19T12:20:42.580
> 
> 标签：tridion

SDL Tridion 2011 SP1

我正在尝试使用 GUI 扩展向 Tridion 中的 ContactView 页面添加一个标签页。我设法使用以下方法将扩展添加到 ComponentView：

```
<ext:tabpages>
  <ext:add>
    <ext:extension assignid="ContactWishlist" name="Wishlist Info"
                   insertbefore="InfoTab">
      <ext:control>/WebUI/Editors/ContactWishlist/ContactWishlist.ascx</ext:control>
      <ext:pagetype>ContactWishlist.WishlistInfo</ext:pagetype>
      <ext:dependencies>
        <cfg:dependency>ContactWishlist.WishlistInfo</cfg:dependency>
      </ext:dependencies>
      <ext:apply>
        <ext:view name="ComponentView">
          <ext:control id="MasterTabControl"/>
        </ext:view>
      </ext:apply>
    </ext:extension>
  </ext:add>
</ext:tabpages> 
```

但是，当我将“ComponentView”更改为“ContactView”时，联系人屏幕中的“信息”选项卡前面没有显示任何内容（也没有错误）。出站电子邮件是否需要对 GUI 扩展进行不同的设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:03:00.970

好吧，您需要考虑以下几点：

*   要扩展任何现有的编辑器，您需要创建自己的扩展编辑器。此扩展编辑器将包含选项卡和配置文件所需的所有文件，以及资源组和扩展节点。

*   事实上，OE 是一个不同的编辑器。所以你应该仔细设置你想要扩展的目标编辑器：

```
<ext:editorextensions>
   <ext:editorextension target="OEEditorName">...</ext:editorextension>
</ext:editorextensions> 
```

此外，应正确设置视图名称和控件 ID。

*   您可以将控件的路径指定为相对于它定义的编辑器的路径。您只需要在开头加上“~”标记：

```
<ext:control>~/ContactWishlist.ascx</ext:control> 
```

应该这样做，因为前面的路径是可配置的，并且在不同的设置中可能会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:48:22.973

我相信 Outbound Email Contact 视图本身就是一个扩展，因此您可能需要扩展 OE 编辑器而不是标准的 CME 编辑器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:04:04.733

ext:view 属性设置尝试加载扩展的范围。

尝试将 ext:view ComponentView 更改为 * 并查看它是否加载。Tridion 文档没有明确的视图列表，我们可以从文件夹 Tridion\web\WebUI\Editors\CME\Views 中的列表中猜测。

# java - Switching between .Net Webservice and Java Webservice by changing URL

> ID：11100803
> 
> 赞同：0
> 
> 时间：2012-06-19T12:20:51.567
> 
> 标签：java, .net, web-services, client, stubs

Here is the situation. I have received a WSDL (and included XSD) from someone that is generated by an Apache/Tomcat server (Java). The company i do a project for, prefers .NET so i used wsdl.exe to generate a partial class and created the webservice.

Then I created a .NET client (in this case I am using VB.NET) that has a web reference to the java wsdl. This works fine. Then I change the url using code and make it point to my newly created .NET service but i cannot seem to get it to work. Doing it the other way round, also doesnt seem to work.

Been fiddling a bit with the namespaces and the service name but can't seem to crack it. Keeps giving me an error about HTTP header unable to find . as a method. This indicates a transport problem.

I really do not want to revert to plan B, being the creation of a Java Webservice and then linking this to the .NET environment. I know this will work since you will never have to change the urls.

Any suggestions ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:37:16.240

So to summarise you have:
SERVER SIDE: java, WSDL: java generated
.NET client -> java server - WORKS .NET client -> .NET server -> FAILS

If thats the case this has not much to do with Java!
But I do know as I aluded to earlier that .NET servers are fussy about the soap action header.
Is there a soapAction in your WSDL?
If so, you need to send that value, but I don't know how to do this in .NET (Google would be your friend here).
If not, check out the comments in this question for how to determine the required soap action header value: stackoverflow.com/questions/2262781/soap-action-wsdl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:19:38.793

After a bit of searching through the devine knowledge base (Google), i have managed to get this fixed.

In addition to being very carefull in specifying the portnames (the default ones are not always what is requested so you need to override it) but most importantly, i found that adding

as part of the asm class header solved my problem. Now all I need to do is find out why?

But trust me, it works...

[I found the solution here](http://blogs.msdn.com/b/vedap/archive/2010/12/23/server-did-not-recognize-the-value-of-http-header-soapaction.aspx)

# php - PHP 变量可以知道它的名字吗？

> ID：11100818
> 
> 赞同：0
> 
> 时间：2012-06-19T12:21:32.220
> 
> 标签：php, variables

> **可能重复：**
> [如何在 PHP 中将变量名作为字符串获取？](https://stackoverflow.com/questions/255312/how-to-get-a-variable-name-as-a-string-in-php)

例子：

可以在 PHP 中实现这样的事情吗？

```
$Age = 43;

output_variable_name_and_value($Age);

    /*
    outputs:
    "The requested variable name is Age and its current value is 43"; 
    */

//If possible, how would the line marked below with ? ? ? ? be?

function output__variable_name_and_value($input)

{

    $var_name = get_name_somehow($input);   // ? ? ? ? 

    echo "The requested variable name is {$var_name} 
          and its current value is {$input}";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:25:29.370

您可以使用此功能：

```
function var_name(&$iVar, &$aDefinedVars) {
    foreach ($aDefinedVars as $k=>$v)
        $aDefinedVars_0[$k] = $v;

    $iVarSave = $iVar;
    $iVar     =!$iVar;

    $aDiffKeys = array_keys (array_diff_assoc ($aDefinedVars_0, $aDefinedVars));
    $iVar      = $iVarSave;

    return $aDiffKeys[0];
} 
```

像这样称呼它：

```
var_name($Age, get_defined_vars()); 
```

^(资料来源： http: [//mach13.com/how-to-get-a-variable-name-as-a-string-in-php](http://mach13.com/how-to-get-a-variable-name-as-a-string-in-php))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:25:40.273

这是不可能的，很容易。你必须使用 $GLOBALS;

```
function get_variable_name($var) {
    foreach($GLOBALS as $k => $v) {
        if ($v === $var) {
            return $k;
        }
    }
    return false;
} 
```

唯一的缺点是，如果它们都具有相同的值，它可能会返回不同的变量名。

或这个，

```
function varName( $v ) {
    $trace = debug_backtrace();
    $vLine = file( __FILE__ );
    $fLine = $vLine[ $trace[0]['line'] - 1 ];
    preg_match( "#\\$(\w+)#", $fLine, $match );
    print_r( $match );
} 
```

我在这里找到：[如何在 PHP 中将变量名作为字符串获取？](https://stackoverflow.com/questions/255312/how-to-get-a-variable-name-as-a-string-in-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:25:47.247

好..

`output__variable_name_and_value`您可以使用 debug_backtrace找出调用该函数的内容。

然后您知道文件名和行号，因此您可以尝试解析源文件并找出 和 之间`output__variable_name_and_value(`的内容`)`。

不过可能是个坏主意！

# mysql - 数据库设计：自定义数据布局和权限管理

> ID：11100820
> 
> 赞同：0
> 
> 时间：2012-06-19T12:21:36.760
> 
> 标签：mysql, sql, database

我正在为我的大学做一个项目，我对我当前的数据库设计有点好奇：

首先，数据库表的常见命名习惯是什么：单数还是复数？我曾经读过一些关于我的东西，但我不记得了？！（例如表：用户或用户）

第二个问题是针对该项目的：

用户可以登录网站，必须从列表中选择 10 个元素，并为每个元素附加从 1 到 4 的优先级。我的第一次尝试是将用户的选择保存在单行中作为 CSV（例如1,2,3;4,5,6;7,8;9,10 表示选择优先级为 1 的元素 1,2,3 等）。第二次尝试是将每个选项保存为单个条目，例如：[user_id]|[choosen_element]|[choosen_priority]。您认为更好的变体是什么，或者我还没有想到更好的变体？

第三个问题更多的是关于登录和权限管理：

用户可以选择的元素是分组的。每个元素可以在多个组中。有些版主拥有与元素相同的组或其中的一个子集，他们可以编辑他们所拥有的组的所有元素。除了组之外，还有用户的权限，例如用户、版主、管理员等。

在我的上一个设计中，我将用户的权限定义为组表的一部分，以便主持人组中的每个用户都可以编辑他所在的组的项目。

在我的第一次尝试中，我在一个单独的表中拥有组和权限，在我的应用程序中具有单独的逻辑！

将应用程序权限与组分开会更好吗？

如果我错过了什么，或者有人只是喜欢看图片，这是我当前布局的图；）

[http://screens.rofln.de/2012-06-19-4f3o3A.png](http://screens.rofln.de/2012-06-19-4f3o3A.png)

谢谢！

顺便说一句：如果有人想知道，我正在使用 PHP 和 MySql！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:29:42.633

1.  这是主观的，但如果你按照流行的 ORM 提供的约定，看起来多元化是很常见的。我不认为你选择了哪个重要，只要你选择了就保持一致。
2.  代表每个选择的记录是最有意义的。这允许排序以及查询以查找高评价元素等。最后，读取应用程序中的数据并改变其显示方式会更容易，因为您将使用项目列表而不是打包价值。
3.  这很难回答，因为我不熟悉您的问题域。我建议开发用例，然后将它们应用到您提出的模型中，以查看裂缝在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:06:01.550

1.  使用单数还是复数并不重要，重要的是您在使用标准时保持一致。

2.  MySQL 中的逗号分隔值很*糟糕*，主要是因为它不是使用关系数据库的一致方式。标准数据库关系或多对多表是更好的主意。

3.  当您使您的权限管理系统更加灵活时，它会变得更加复杂。在这种情况下，一个很好的启发式方法是**构建满足您要求的最简单的系统，但不会更简单**。

说到简单，为什么你有一个单独的用户数据表？您是否希望某些用户拥有两组名称和详细信息？

# javascript - 用于验证文件名的 Javascript 正则表达式

> ID：11100821
> 
> 赞同：17
> 
> 时间：2012-06-19T12:21:39.560
> 
> 标签：javascript, regex

我有一个正则表达式来验证文件名。就这个：

```
/[0-9a-zA-Z\^\&\'\@\{\}\[\]\,\$\=\!\-\#\(\)\.\%\+\~\_ ]+$/ 
```

它应该允许这样的文件名：

```
aaa
aaa.ext
a#
A9#.ext 
```

不允许使用以下字符`\ / : * ? \" < > |`

问题是文件名喜欢`*.txt`或`/\kk`通过了验证。我正在使用 keyup 事件进行验证。因此，当我在不允许的一个字符之后添加一个额外的字符时，它表明一切都是正确的。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-19T13:06:41.143

对于 Windows 名称。

```
var isValid=(function(){
  var rg1=/^[^\\/:\*\?"<>\|]+$/; // forbidden characters \ / : * ? " < > |
  var rg2=/^\./; // cannot start with dot (.)
  var rg3=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i; // forbidden file names
  return function isValid(fname){
    return rg1.test(fname)&&!rg2.test(fname)&&!rg3.test(fname);
  }
})();

isValid('file name'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T12:23:43.293

您需要添加一个起始锚点：

```
/^[0-9a-zA-Z ... ]+$/ 
```

这告诉引擎从输入的开头一直匹配到输入的结尾，而对于您的原始表达式，它只需要在输入的结尾进行匹配。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-19T12:23:31.410

您需要使用`^`and来锚定表达式`$`。例如：

```
/^[-\w^&'@{}[\],$=!#().%+~ ]+$/ 
```

请注意，您需要`-`在字符类中转义，或将其放置在第一个/最后一个。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-08T03:46:31.390

```
/^(?!\.)(?!com[0-9]$)(?!con$)(?!lpt[0-9]$)(?!nul$)(?!prn$)[^\|\*\?\\:<>/$"]*[^\.\|\*\?\\:<>/$"]+$/

Must not be empty.
Must not start with .
Must not be com0-com9, con, lpt0-lpt9, nul, prn
Must not contain | * ? \ : < > $
Must not end with . 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-05T14:53:42.950

由于[这篇文章（regex-for-windows-file-name）](https://stackoverflow.com/questions/34172275/regex-for-windows-file-name)重定向到这个问题，我假设它是关于 windows 文件名的。

根据@Leon 对@AndrewD 的回答的评论和[参考](https://docs.microsoft.com/de-de/windows/desktop/FileIO/naming-a-file)，我制作了这个正则表达式，它对我有用。

```
/^(con|prn|aux|nul|com[1-9]|lpt[1-9])$|([<>:"\/\\|?*])|(\.|\s)$/ig 
```

根据命名约定（参见上面的参考资料），我同意“com0”应该是一个有效的文件名，但是如果您尝试在 Windows 上将文件命名为“com0”，它就不起作用，所以我猜这篇文章中缺少.

所以这个正则表达式会更安全

```
/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$|([<>:"\/\\|?*])|(\.|\s)$/ig 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-17T15:16:04.057

我会尝试使用这个正则表达式（你甚至可以用它为 ASP.NET MVC 制作一个验证属性！）：

```
@"^[^\u0022\u003C\u003E\u007C\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\u0008\u0009\u000A\u000B\u000C\u000D\u000E\u000F\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001A\u001B\u001C\u001D\u001E\u001F\u003A\u002A\u003F\u005C\u002F]*$" 
```

如果它与输入匹配，则它是有效的文件名（至少在 Windows 上）。

# .htaccess - 从 htpasswd 保护中排除受保护的 Wordpress 站点下的单个目录

> ID：11100822
> 
> 赞同：0
> 
> 时间：2012-06-19T12:21:41.713
> 
> 标签：.htaccess, password-protection, .htpasswd

尽管在这里进行了大量搜索，但我无法找到解决此问题的方法。

我有一个 .htaccess 文件来保护我正在开发的 Wordpress 网站。我想保护除目录 /images/ 之外的整个站点，但我不知道如何执行此操作。目前，我的 .htaccess 文件位于站点的根目录中，如下所示：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

# basic password protection
<IfModule mod_authn_file.c>
 AuthUserFile /home/*****/.htpasswd
 AuthName "Username and password required"
 AuthType Basic
 <Limit GET POST>
  Require valid-user
 </Limit>
</IfModule> 
```

有人可以帮我修改它以允许对 /images/ 目录的开放访问吗？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:24:59.060

您可以在 /images/- 目录中创建一个新的 .htaccess 文件：

```
Order Deny,Allow
Allow from all
Satisfy any 
```

这应该删除此文件夹的密码保护。

# plot - 如何在 MS Excel 中使用非数字列创建散点图？

> ID：11100823
> 
> 赞同：0
> 
> 时间：2012-06-19T12:21:44.737
> 
> 标签：plot, excel-2007, scatter-plot

我在excel中有两列，一列是日期（X），另一列是一些文本（Y）。我可以知道如何使用这些数据在 MS Excel 中创建散点图吗？谢谢。

```
Date (X)        Category (Y)
01/04/2012 00   Middleware
01/10/2012 09   End User
01/11/2012 02   End User
01/11/2012 15   Middleware
01/26/2012 03   End User
02/15/2012 09   End User
02/16/2012 07   End User
02/20/2012 10   Middleware
03/17/2012 01   OS
03/20/2012 01   Middleware
03/23/2012 11   Middleware
04/09/2012 07   Middleware
04/26/2012 06   Middleware 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:53:12.987

您需要在图表中绘制数值。您是否只是在特定类别的特定高度显示带有标记的时间线？在这种情况下，为该类别插入一个具有任意数值的列（例如，1=OS、2=Middleware、3=End User）。将其绘制为 Y 对 X 的时间。使用文本框覆盖 Y 轴上的 1、2、3，标签显示类别。

# mysql - 如何处理 MySQL `WHERE` 子句中的变音符号？

> ID：11100829
> 
> 赞同：1
> 
> 时间：2012-06-19T12:22:25.813
> 
> 标签：mysql, unicode

我的表排序规则是`utf8_general_ci`，字符集是`utf8`. 如果我运行如下查询，它不会显示任何值。

```
SELECT * FROM mytable WHERE myfield = "BjÃ¶rn Borg"
OR myfield = "FrüFrü & Tigerlily"; 
```

那么我如何从表中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:57:41.820

问题可能出在您的连接字符集中。尝试运行

```
SET NAMES 'utf8' 
```

然后是您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:37:09.803

MySQL 定义字符集的地方更多，包括列级别。

检查数据库设置： SHOW VARIABLES LIKE 'char%'; 显示像'collat​​ion%'这样的变量；

检查表设置：SHOW CREATE TABLE tablename;

检查各个列： SHOW FULL COLUMNS IN tablename;

如果您使用错误的编码创建了一个数据库，您将不得不更改所有这些错误字符集的每一次出现。

# git - Jenkins - 推广构建和 Git

> ID：11100834
> 
> 赞同：3
> 
> 时间：2012-06-19T12:22:45.837
> 
> 标签：git, continuous-integration, hudson, jenkins, promotions

是否可以让 Jenkins Promoted Builds 插件调用第二个作业，该作业又是从*被提升的提交*而不是从最新版本构建的？

所以流程会是这样的：

*   提交 A
*   “开发”作业从提交 A 执行构建 #1
*   提交 B 已完成
*   “开发”作业从提交 B 执行构建 #2
*   用户手动提升 Dev #1
*   “暂存”作业从提交 A（不是 B）构建 #1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:01:46.477

Jenkins 中有一个错误阻止了这种情况的发生。

通常人们会：

*   安装Promoted Builds插件
*   安装参数化触发器
*   将 Job Dev 配置为可升级，指定“ *Trigger/call builds on other projects* ”，然后设置“ *Pass-through Git Commit that was built* ”的参数

[遗憾的是，Promoted Builds 插件](https://groups.google.com/forum/#!topic/jenkinsci-dev/VFQsTn1lAF8/discussion)中似乎存在一个错误，这意味着并非所有数据都通过了。存在[一个修复](https://github.com/jenkinsci/promoted-builds-plugin/pull/12)，但它似乎正在等待集成。

我[在 Jenkins 的 JIRA](https://issues.jenkins-ci.org/browse/JENKINS-14145)中提出了一张票，如果你也受到这个问题的困扰，你们都应该投票。

# encoding - NSString 类别以获得更好的百分比转义

> ID：11100839
> 
> 赞同：1
> 
> 时间：2012-06-19T12:22:59.653
> 
> 标签：encoding, nsstring, urlencode, percent-encoding

我为我的一个项目写了一个小 NSString 类别，更好地实现了百分比转义：@im

```
plementation NSString (Escaping)
- (NSString *)stringByAddingSafePercentEscapesUsingEncoding:(NSStringEncoding)encoding
{
    NSRange wholeString = NSMakeRange(0, [self length]);
    NSMutableString *escaping = [NSMutableString stringWithString:[self stringByAddingPercentEscapesUsingEncoding:encoding]];
    [escaping replaceOccurrencesOfString:@"$" withString:@"%24" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"&" withString:@"%26" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"+" withString:@"%2B" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"," withString:@"%2C" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"/" withString:@"%2F" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@":" withString:@"%3A" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@";" withString:@"%3B" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"-" withString:@"%2D" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"=" withString:@"%3D" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"?" withString:@"%3F" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"@" withString:@"%40" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@" " withString:@"%20" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"\t" withString:@"%09" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"#" withString:@"%23" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"<" withString:@"%3C" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@">" withString:@"%3E" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"\"" withString:@"%22" options:NSCaseInsensitiveSearch range:wholeString];
    [escaping replaceOccurrencesOfString:@"\n" withString:@"%0A" options:NSCaseInsensitiveSearch range:wholeString];
    NSString *escaped = [NSString stringWithString:escaping];

    return escaped;
}
@end 
```

在这个项目中，它工作得很好，我喜欢使用它。但是当我将它移植到另一个项目时，该代码通过 EXC_BAD_ACCESS。我可以在该代码中做得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:40:04.693

我只是偶然发现了我的问题：

由于字符串在将一个字符替换为三个字符时会有效地改变其长度，因此字符串长度会随着每次替换而改变。因此，该类别的正确实现是：

```
@implementation NSString (Escaping)
- (NSString *)stringByAddingSafePercentEscapesUsingEncoding:(NSStringEncoding)encoding
{
    NSRange wholeString = NSMakeRange(0, [self length]);
    NSMutableString *escaping = [NSMutableString stringWithString:[self stringByAddingPercentEscapesUsingEncoding:encoding]];
    [escaping replaceOccurrencesOfString:@"$" withString:@"%24" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"&" withString:@"%26" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"+" withString:@"%2B" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"," withString:@"%2C" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"/" withString:@"%2F" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@":" withString:@"%3A" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@";" withString:@"%3B" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"-" withString:@"%2D" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"=" withString:@"%3D" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"?" withString:@"%3F" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"@" withString:@"%40" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@" " withString:@"%20" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"\t" withString:@"%09" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"#" withString:@"%23" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"<" withString:@"%3C" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@">" withString:@"%3E" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"\"" withString:@"%22" options:NSCaseInsensitiveSearch range:wholeString];
    wholeString = NSMakeRange(0, [escaping length]);
    [escaping replaceOccurrencesOfString:@"\n" withString:@"%0A" options:NSCaseInsensitiveSearch range:wholeString];
    NSString *escaped = [NSString stringWithString:escaping];

    return escaped;
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:49:17.713

我认为应该是：

```
NSRange wholeString = NSMakeRange(0, [self length]-1); 
```

如果您的 replaceOccurrencesOfString:withString:options:range: 方法遍历字符串中的最后一个字符，您将获得“错误访问”。

或者，您可以将类似的方法用于您的替换方法，这些方法已经在整个长度上进行迭代。但是，我不确定默认搜索选项是什么：

```
escaping = [escaping stringByReplacingOccurencesOfString:@"$" withString:@"%24"]; 
```

# c# - C# 方法给了我一个错误

> ID：11100852
> 
> 赞同：-2
> 
> 时间：2012-06-19T12:23:41.957
> 
> 标签：c#, asp.net

我在 c# 中创建了一种具有两个参数的方法。我刚刚更改了它的参数名称，但现在它给了我旧的参数值。并且错误在运行时出现。

这是我改变了它的参数的新方法

```
public void UpdatePagedDataSet(string configKey, string configValue)
{
---SOME CODE---
} 
```

这是旧方法工作正常

```
public void UpdatePagedDataSet(string CONFIGKEY, string CONFIGVALUE)
{
---SOME CODE---
} 
```

错误：

```
could not find a non-generic method 'UpdatePagedDataSet' that has parameters: CONFIG_VALUE, configKey, configValue 
```

我做错了什么……？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:26:03.253

如果您没有重新构建，这通常会发生。

点击

```
Build->Rebuild solution 
```

在视觉工作室。

-- 编辑以反映问题/信息的变化 --

看起来您缺少重载函数

```
public void UpdatePagedDataSet(string CONFIG_VALUE, string configKey, string configValue)
{
---SOME CODE---
} 
```

当您调用该函数时，您是否不小心用 3 个参数而不是 2 个参数调用它？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:29:47.750

该问题似乎与未识别但参数数量错误的方法无关。

根据错误描述，3 个参数被发送到`UpdatePagedDataSet`方法 ( `CONFIG_VALUE, configKey, configValue`)，而 2 个是预期的 ( `configKey, configValue`)。

请粘贴您如何调用该方法。

# silverlight - 找不到 Infragistics.Controls.Charts.OlapAxis.v11.2 类？

> ID：11100854
> 
> 赞同：0
> 
> 时间：2012-06-19T12:23:44.473
> 
> 标签：silverlight, infragistics

嗨，我正在尝试使用基础技术将枢轴网格数据与 Silverlight 中的图表绑定。但我收到类似 Infragistics.Controls.Charts.OlapAxis.v11.2 类未找到的错误。但我正在使用 v11.1 基础架构，所以它没有显示要引用的类，所以其他解决方案该怎么做才能实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:37:45.227

检查您的项目是否有对 11.2 程序集的引用，如果发现任何引用，请删除该引用并添加 11.1 版本的程序集。如果您的项目中没有对 11.2 的引用，则检查您所引用的任何程序集以查看它们是否包含对 11.2 的引用，并删除更改对 11.1 版本的引用并重新编译。

# c++ - 在 VS C++ 中使用 dll、pdb 文件和源代码进行调试

> ID：11100855
> 
> 赞同：2
> 
> 时间：2012-06-19T12:23:46.563
> 
> 标签：c++, debugging, visual-studio-2008, dll, pdb-files

关于 pdb 文件的问题。是用于在 Visual Studio 中调试的 pdb 文件吗？如果是这样，为什么它们也存在于我的 Release 文件夹中？pdb 文件在 Debug 文件夹中是正常的，但为什么它们也在 Release 文件夹中。

所以我现在有一个由集成团队构建的 Release 文件夹，其中包含所有 pdb 文件。现在我可以加载所有相应的源（在 GIT 中），所以我确定二进制文件对应于源。那么我是否需要重新构建才能在 Visual Studio 中进行调试？如果没有，我必须做什么才能快速完成工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:30:40.880

如上所述，PDB 与发布二进制文件一样重要！软件发布后，您可以在之后对其进行调试（取决于公共符号和私有符号是否可用）。如果 PDB 包含私有符号，请记住这些描述了您的代码（参数、类型、返回值、符号......）。[这里有一篇文章](http://www.codeproject.com/Articles/37456/How-To-Inspect-the-Content-of-a-Program-Database-P)解释了可执行文件与其 PDB 之间存在的逻辑链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:27:00.243

实际上你也可以调试你的发布版本——如果你有 PDB 文件的话。因此，最好保留已交付产品（发布版本）的 PDB 文件。对于调试，您需要可执行文件和匹配的 PDB 以及匹配的源文件。就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:25:33.267

您也可以调试发布版本，只是由于所有额外的优化，它没有那么有用。如果您不需要 pdb 文件，可以在发布版本的项目属性中指定它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:22:16.847

是用于在 Visual Studio 中调试的 pdb 文件吗？是的。

为什么它们也存在于我的 Release 文件夹中？转到“您的项目”属性页（目标版本）-> 链接器-> 调试。设置选项生成程序数据库文件。即发布/myExe.pdb

# java - NETTY ISSUE 客户端 1024 字节消息

> ID：11100864
> 
> 赞同：2
> 
> 时间：2012-06-19T12:24:36.897
> 
> 标签：java, netty

我想直接报告这个错误，但是从主页netty.io上还没有找到任何可能

我在向通道发送数据时发现了一个错误。它并不总是发生，在 10-20% 的情况下，但它确实发生了。下列的，

1.  例如，如果我获得第一个与 1024 字节数据消息的连接，那么到目前为止一切都很好，而不是我使用 HexDumpProxyInboundHandler 创建转发地址的套接字

2.  这里一切都很好，除了一件事，我在转发地址上创建了一个带有流量日志的监听器，在那里我得到了 Netty 发送的消息。我希望它上面有 1024 字节的数据，但它并不总是发生，也不是在 100% 的情况下。有时...

3.  正是有时噩梦从这里开始，如果我在 1024 字节消息之后在同一频道上收到下一条消息，则数据将以下列可能的形式写入：

3.1第一条消息和第二条消息被合并，我在端口监听器上获得的数据是正确的，1024 + 72（例如）并且字节顺序也正确（但在合并的形式中，对我来说已经不正确的数据）

3.2 或者第一条消息和第二条消息也被合并，但有一点区别，不同的顺序，72（例如）+ 1024字节，即使数据被服务器套接字正确接收，并且顺序正确..发送顺序也不正确。

3.3 或最后 1024 的第一条消息按原样发送，第二条消息也按原样发送，所以这里一切都很好，这是正确和预期的行为..

此外，错误并不总是发生，但它总是发生，并且总是发生，如果发生，它只有在第一次连接时第一条消息是 1024 字节长并且第二条消息是在第一条消息之后立即发送而之前没有接收到数据时才会发生。

现在社区的问题是，是否可以在 Netty 中关闭这种奇怪的缓冲行为？这样在服务器套接字上接收到的所有消息都以完全相同的方式发送到客户端套接字通道，而无需合并数据。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:37:51.423

这种“奇怪”的行为与 netty 无关。一次传输多少字节取决于网络层，所以它真的希望看到这一点。如果您需要全部 1024 个字节，您将需要缓冲它们，直到您收到足够的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:33:59.740

好的，经过漫长的夜晚，我终于解决了我的问题。看来，Netty 项目在这种情况下仍然存在问题，并且会接受传入消息以错误的顺序发送。所以，我所做的，我用传入的消息填充缓冲区，直到客户端的远程连接被打开，所以我发送的不是完整的正确缓冲区，而是让 Netty 完成。

# ruby-on-rails - Rails 3.2 路由错误

> ID：11100865
> 
> 赞同：-1
> 
> 时间：2012-06-19T12:24:42.183
> 
> 标签：ruby-on-rails, webrick

在我使用 Rails 的第一种方法中，我只是创建了一个 void`SayController`和静态`hello.rhtml`视图，但是当页面`http://localhost:3000/say/hello`开始时，我会返回一个路由错误，如下所示：

```
No route matches [GET] "/say/hello"
Try running rake routes for more information on available routes. 
```

导轨版本：3.2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:28:19.983

好像您没有为您的文件添加[路由。](http://guides.rubyonrails.org/routing.html)`hello``config/routes.rb`

```
YourApp::Application.routes.draw do
  match 'say/hello' => 'say#hello', :as => :hello
end 
```

`say/hello`这将匹配到控制器的路由`say`（之前的部分`#`）和动作`hello`（之后的部分`#`）。

`:as => :hello`使其成为[命名路由](http://guides.rubyonrails.org/routing.html#naming-routes)，因此您可以`hello_path`在应用程序中对其进行引用。

错误消息告诉您运行`rake routes`（从控制台），它将向您显示应用程序中的[现有路由](http://guides.rubyonrails.org/routing.html#seeing-existing-routes-with-rake)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:30:01.750

您应该有一些东西`config/routes.rb`来定义该路线。尝试：

```
match 'say/hello' => 'say#hello', :as => 'say_hello' 
```

还请`localhost:3000/say/hello` 查看此文档：

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:30:04.273

我假设，控制器：**说**和行动：**你好**

将以下内容添加到 config/route.rb

```
 get 'say/hello' => 'Say#hello' 
```

# c++ - LoadLibrary 貌似加载了错误的 DLL

> ID：11100867
> 
> 赞同：1
> 
> 时间：2012-06-19T12:24:46.793
> 
> 标签：c++, windows, loadlibrary

我在 Windows 上遇到了 LoadLibrary 的一个奇怪问题。首先是一些背景。此应用程序依赖于 Qt，并且 Qt 被拆分为多个库。我正在尝试升级 Qt 的版本，但不会破坏任何人。较新的 Qt 库向后兼容旧的库。这意味着使用旧版本构建的应用程序可以在加载新版本时运行。反之则不然——如果加载了旧版本，使用新版本构建的应用程序将缺少符号。

Qt DLL 位于特定于版本的目录中（例如`c:\qt\qt-4.5.2\lib`，`c:\qt\qt-4.8.1\lib`作为示例）。大多数开发人员在他们的 PATH 中还有一个公共目录，其中包含我们使用的所有第三方库的“当前”版本（称为它`c:\common\lib`）。这是运行应用程序时通常可以找到 Qt 库的地方。

我将新的 Qt 版本库放在公共位置，一切似乎都工作正常，除了一种情况。有问题的应用程序被拆分为多个库，其中一些是通过调用加载的`LoadLibrary()`。其中一些运行时加载的 DLL 依赖于 Qt 库。在一种情况下，加载的 DLL 依赖于`QtXml`，而后者本身又依赖于`QtCore`.

这就是它变得奇怪的地方。应用程序依赖`QtCore`并加载依赖于`QtXml`. 应用程序和库是与旧版本的 Qt 链接构建的。如果此应用程序仅使用 PATH 中的公共目录运行，则一切正常，因为新的 Qt 版本 DLL 是从公共目录加载的。*但是，如果 PATH 包含在公共目录之前*存储旧 Qt 版本 DLL的目录，则加载运行时 DLL 会失败并丢失符号。

（在进行自动化单元测试时会出现这种情况，脚本显式设置 PATH 以使用特定的库版本。）

据我所知，应用程序正在加载旧版本，`QtCore.dll`运行时加载的 DLL 正在（不知何故）加载新版本`QtXml.dll`，因为已经加载`QtCore`的没有它需要的符号，所以失败了。

但这似乎是不可能的，因为 PATH 类似于`c:\qt\qt-4.5.2\lib;c:\common\lib`（加上其他不相关的路径）。如果我从公共 lib 目录*中删除*较新`QtXml`的（不是用旧版本替换，只是删除它），然后`LoadLibrary()`成功，因为它加载了所有 Qt 库的 4.5.2 版本。但这不是一个好的长期解决方案，因为在 PATH（常见）中没有 Qt 特定版本目录的情况下运行将无法找到`QtXml`.

这怎么可能？如何`LoadLibrary()`（或任何它递归调用以解决库的依赖项）从*后面*的`PATH`? 我找不到任何表明公共库目录被特别考虑的东西（它不是一个设置的 DLL 目录）。在构建过程中没有提到它，它只是开发人员`PATH`为了方便而拥有的东西。

顺便说一句，在 Linux 上存在类似的情况`LD_LIBRARY_PATH`and `dlopen()`，它在那里工作得很好。这是 Windows 正在做的不同的事情，我不明白。有没有人知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:16:45.453

`LoadLibrary` has lots of surprising behaviors. Make sure you fully grok all of the [Remarks](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx) for it in MSDN.

If there's already a library loaded (any version) with the same name, LoadLibrary just returns a handle to the already-loaded DLL. That may be coming into play in your scenario.

Next, if you've specified a relative path or just a file name, LoadLibrary applies [arcane search rules](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx). Your PATH variable is typically the *last place to search*. It's likely that some other rule is finding the "wrong" DLL before it even gets to checking the PATH. A good guideline is to always use an absolute path the file you want to load to be sure that its search rules don't grab the wrong file. A common security flaw is to not control where LoadLibrary searches, and an attacker convinces your application to load a doctored DLL.

And, finally, it's possible for an installer to apply [DLL redirection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682600%28v=vs.85%29.aspx) that can override what you ask for and where it might be found. I'm not sure if this is common for Qt DLLs or not, but you might want to check your registry.

I've occasionally used [ProcMon from SysInternals](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx) to observe a program while it's loading DLLs. You can see each place it checks, which may give you a clue as to why it's finding the wrong version.

# php - 使用 https 协议的 Codeigniter file_get_content() 错误权限

> ID：11100868
> 
> 赞同：0
> 
> 时间：2012-06-19T12:24:47.933
> 
> 标签：php, codeigniter, https, download

我使用 codeigniter 框架，我在控制器中放置了一个脚本来强制下载某个文件夹中的现有文本文件。连接使用HTTPS协议。当我点击从服务器下载文本文件时，出现错误，如下：

```
Message: file_get_contents() [function.file-get-contents]: Unable to find the wrapper "https" - did you forget to enable it when you configured PHP?
Filename: controllers/process.php 
```

当我打印`"var_dump(stream_get_wrappers());"`出这样的结果时：

```
array(10) {
  [0]=>
  string(3) "php"
  [1]=>
  string(4) "file"
  [2]=>
  string(4) "glob"
  [3]=>
  string(4) "data"
  [4]=>
  string(4) "http"
  [5]=>
  string(3) "ftp"
  [6]=>
  string(13) "compress.zlib"
  [7]=>
  string(14) "compress.bzip2"
  [8]=>
  string(4) "phar"
  [9]=>
  string(3) "zip"
} 
```

所以数组中不存在 https 包装器。

如何着手解决这个问题？

谢谢你的任何建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:44:10.253

也许您无权访问 https 协议。

试试这个[如何让 file_get_contents() 与 HTTPS 一起工作？](https://stackoverflow.com/questions/1975461/file-get-contents-with-https)

或使用 curl 或套接字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T05:21:17.637

确保`php_openssl.dll`或`php_openssl.so` 已启用。

# jquery - jQuery UI 对话框调整大小助手

> ID：11100870
> 
> 赞同：2
> 
> 时间：2012-06-19T12:24:54.877
> 
> 标签：jquery, jquery-ui, resize, jquery-ui-dialog

我在 UI 对话框中有一些繁重的内容，并且只需要在调整大小过程结束时调整它一次。当为对话框设置助手选项时，我需要可调整大小的行为，因此我可以使用“停止”事件来调整我的内容大小。这里描述了同样的问题： [jQuery 论坛](http://forum.jquery.com/topic/specify-drag-and-resize-option-for-dialogs)

可能有人知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:41:02.963

可调整大小的小部件的帮助器功能确实存在问题。您可以通过销毁小部件来解决它，然后立即使用适当的帮助选项重新创建它：

```
$("#yourDialog").dialog({
    // options...
}).dialog("widget").resizable("destroy").resizable({
    helper: "ui-resizable-helper"
}); 
```

[你会在这里](http://jsfiddle.net/3bUjv/20/)找到一个更新的小提琴。

# ios - 在后台继续下载

> ID：11100874
> 
> 赞同：12
> 
> 时间：2012-06-19T12:25:03.037
> 
> 标签：ios, uiapplicationdelegate, background-task

我正在创建一个应用程序，其中我正在从服务器下载一些数据。在后台运行时，我希望该连接应继续运行，以便可以下载数据。**我知道appDelegate**中有方法

 **```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

当应用程序进入后台时调用。但是由于连接是在 viewController 中创建的，如何在 appDelegate 中进行管理**呢**？
还有/还有其他方法可以做到吗？我已经浏览了[**这个**](https://stackoverflow.com/questions/3612963/download-in-background-in-iphone)链接，但是有什么简单的实现吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T01:32:10.420

在后台继续执行某些操作的一种方法是创建一个单独的线程来进行下载。在线程内部，将您的下载操作括在对 beginBackgroundTaskWithExpirationHandler: 和 endBackgroundTask 的调用之间。您不需要检查您是否在后台运行，您只需始终调用这两个方法。

```
// Tell iOS this as a background task in case we get backgrounded
UIBackgroundTaskIdentifier taskId = [[UIApplication sharedApplication] 
          beginBackgroundTaskWithExpirationHandler:NULL];

//----------------------------------------------
// Perform your download operations here
//----------------------------------------------
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

// Tell iOS that we are done with stuff that needed to keep going even if backgrounded    
[[UIApplication sharedApplication] endBackgroundTask:taskId]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:30:28.733

[编辑]对不起，我不正确，正如评论中指出的那样，您可以延长您必须在应用程序进入后台之前/之前执行一次操作的时间限制。这是[Apple的官方文档](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:15:54.027

我不知道您如何准确处理数据下载。但是你可以看看[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)。**如果您将编译器标志设置为-fno-objc-arc**，它非常简单明了，并且可以与 ARC 一起使用。有了这个，你只需要使用

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setShouldContinueWhenAppEntersBackground:YES]; //For iOS 4.0 and up 
```

那行得通。

[在这里](http://allseeing-i.com/ASIHTTPRequest/How-to-use)你可以看到 ASIHTTPRequest 是如何工作的

希望能帮助到你！**

# rss - 每次更新页面时自动发送时事通讯

> ID：11100876
> 
> 赞同：0
> 
> 时间：2012-06-19T12:25:06.143
> 
> 标签：rss, content-management-system, newsletter

我有这个页面：

[http://www.thedome.it/cmsms/index.php?page=alla-spina](http://www.thedome.it/cmsms/index.php?page=alla-spina)

我想在每次更新此页面时自动向订阅者发送新闻通讯。我没有这个 CMS 的管理员权限，因此我无法安装模块，所以我正在考虑一个像 FeedBurner 这样的服务，只要这个页面有一个唯一的 RSS 提要（但 AFAIK 它没有，对吧？）。

你知道任何可以让我解决这个特定问题的服务/软件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:35:30.963

要在不访问服务器的情况下执行此操作，您将需要另一台启用玉米作业的服务器。如果我在那里，我将创建一个简单的抓取脚本，该脚本还将检查页面内容是否未更改。使用页面的打印版本可能会更容易处理。最后要做的是设置一个玉米作业，它将以所需的时间间隔运行脚本。

# canvas - 添加元素后，FabricJS 画布“卡住”

> ID：11100878
> 
> 赞同：6
> 
> 时间：2012-06-19T12:25:09.517
> 
> 标签：canvas, fabricjs

我正在使用创建一个应用程序`fabric.js`，并且遇到了非常奇怪的行为。我正在使用常规`fabric.Canvas`（不是`fabric.StaticCanvas`）添加图像和文本实例，并且在添加后无法移动或调整这些项目的大小。我只添加了每种类型的几个。基本功能包含在与某个按钮上的单击事件相关的回调中，但核心结构功能看起来像这样（简化，但就结构相关代码而言，几乎所有内容都相同）：

```
<canvas id="myCanvas" height=600 width=800></canvas>
<input id="addStuff" type="button" value="Add!" />
....
var canvas = new fabric.Canvas('myCanvas');
canvas.renderOnAddition = true;

$(function(){
  $('#addStuff').on('click', function(e) {

      var text   = new fabric.Text("Hello, world", {
        top        : 100,
        left       : 100,
        fontSize   : 12,
        fontFamily : 'Delicious_500'
      });
      text.hasControls = false;

      canvas.add(text);

      fabric.Image.fromURL('./img/pic.png', function(img) {
        var imgX = img.set({
          top: 200,
          left: 100,
        });

        canvas.add(imgX);
      });

      canvas.renderAll();
  });
}); 
```

上面的代码很好地呈现了元素，但它们不能调整大小或移动，并且是静态的。**奇怪的是，如果我打开和关闭我的 chrome 开发面板（使用 F12 或 [Ctrl/CMD]+SHIFT+I 两次），画布恢复了功能，一切都恢复了**。我也发生了一些服务器端的事情（这只是我正在做的一个模拟示例），但我不知道如何进一步追踪到这种奇怪的行为。我正在使用最新的代码（从 gi​​thub repo 构建）。想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-24T17:46:11.707

画布内部偏移可能未正确更新。页面上的某些东西可能会改变尺寸/位置，使画布位于与初始化期间不同的位置。尝试在调用`canvas.calcOffset()`后`renderAll()`调用，或在添加这些对象后调用。

`calcOffset`未调用的原因`renderAll`是出于性能原因。`renderAll`是整个画布的重绘。每当画布上的某些内容发生变化并且需要重绘画布时，都会发生这种情况。正如你可以想象的那样，它经常被调用（有时每秒几十次），每次重绘时计算新的偏移量是非常浪费的。

还要考虑在大多数情况下，画布位置在整个页面生命周期中都不会改变。它可能很少发生。主要在页面加载期间。

在高度动态的环境中——画布经常改变位置——你可以通过显式调用来解决偏移“问题” `calcOffset()`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-09T14:45:13.587

我遇到了同样的问题，除了 kangax 解决方案，在非常极端的环境中，您可以在渲染发生时强制它重新计算偏移量，并带有事件。

`canvas.on('after:render', function(){ this.calcOffset(); });`

# ios - 谷歌日历数据的 NSDateFormatter dateFormat

> ID：11100880
> 
> 赞同：2
> 
> 时间：2012-06-19T12:25:17.093
> 
> 标签：ios, datetime, nsdate, nsdateformatter, date-format

在尝试将 Google 日历日期字符串（从公共 JSON 解析）转换为 NSDate 格式时，我似乎遇到了很大的困难。

Google 日历 API 的结果采用以下格式：

```
"2012-06-20T11:00:00.000+01:00" 
```

我正在尝试将其格式化为 NSDate，如下所示：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
NSDate *gmtDate = [formatter dateFromString:[whenDict objectForKey:@"startTime"]]; 
```

但是，我一直得到一个空结果，所以我想知道是否**有人知道我试图转换的结果的正确 [NSDate dateformat] 是什么**......

我已经尝试了各种 dateFormat 变体，但在与多个字母变体搞砸了几个小时之后，我还没有找到合适的变体！

即我相信问题出在：

```
formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz"; 
```

干杯，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:43:46.283

似乎 +01:00 不是标准时区，因此您必须将其更改为 +0100 从中删除冒号（请参阅[iPhone NSDateFormatter Timezone Conversion](https://stackoverflow.com/questions/3094730/iphone-nsdateformatter-timezone-conversion)）

您可以使用以下代码

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSZZZ";
NSString *dataString = @"2012-06-20T11:00:00.000+01:00";
NSMutableString *mutableDate = [dataString mutableCopy];
[mutableDate deleteCharactersInRange:NSMakeRange(mutableDate.length - 3, 1)];

NSDate *gmtDate = [formatter dateFromString:mutableDate]; 
```

# ruby - 如何压缩数组中的空元素

> ID：11100888
> 
> 赞同：1
> 
> 时间：2012-06-19T12:25:29.733
> 
> 标签：ruby

Ruby仅在序列具有 nil 值时才[压缩](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-compact)序列，如何压缩“”空值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T12:28:02.763

像这样的东西：

```
a = [1, nil, 2, '', 3]
a.reject{|x| x == '' || x.nil?} # => [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:31:37.190

与 Sergio 类似的方法：

```
irb(main):006:0> a = [1,nil,2,'']                   => [1, nil, 2, ""]
irb(main):007:0> a.reject!{|x| x.nil? || x == ''}   => [1, 2] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T15:37:40.227

我知道这没有 Ruby on Rails 标记，但是如果您使用该框架，恕我直言，最好的解决方案是：

```
a = [1, nil, 2, '', 3]
a.select(&:present?)
#=> [1, 2, 3] 
```

在普通的 Ruby 中，我会选择[Sergio 的答案](https://stackoverflow.com/a/11100930/220147)，或者`a.select { |x| x.empty? || x.nil? }`如果数组只能包含`String`s 和`nil`s。

# c++ - 如何在超类方法的参数中使用子类？

> ID：11100895
> 
> 赞同：0
> 
> 时间：2012-06-19T12:25:49.137
> 
> 标签：c++, header-files

我对 C++ 非常陌生，并且在传递指向对象的指针向量时遇到问题。具体来说，问题是对象是该方法所在类的子类。我收到一个错误：

```
'Player' was not declared in this scope 
```

`Player`是一个子类，`Visual`在我的文件 Visual.cpp 中我有以下函数，它也在我的头文件中声明。

```
bool Visual::DrawStatusInformation(Timer* timer, std::vector<Player*>* playerList) {
    // Draw Info
} 
```

我尝试`class Player;`在头文件中进行前向声明，但出现错误：

```
error: invalid use of incomplete type ‘struct Player’
error: forward declaration of ‘struct Player’ 
```

我认为问题在于我的定义是循环的，Player 扩展了 Visual 但 Visual 必须了解 Player 才能处理 Player 指针向量。

**我的问题是：**

如果可能，如何在超类方法的参数中使用子类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:34:07.843

我会考虑重新设计。继承对*is-a*关系建模，这反过来意味着在您的设计中，`Player` *is-a* `Visual`并且因此它知道`DrawStatusInformation`其他`Player`s 的方式。这看起来合乎情理吗？

您可能希望提供一个接口，每个可绘制元素都实现，包括`Player`，然后提供一种能够*绘制*任何可绘制对象的类型，`Player`尤其是可能的 s 。这样做你会打破循环依赖，设计会更合理。

请注意，这不是实现的问题，而是设计的问题。如果您真的觉得这是解决您的问题的最佳设计，那么您可以将前向声明与包含的内容结合起来，正如 Luchian 已经提到的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:28:41.800

> Player 扩展了 Visual，但 Visual 必须了解 Player 才能处理 Player 指针向量。

按文件：

*   **Player.h** - 将实现包含`Visual.h`并移动到实现文件
*   **Player.cpp** - 应该没问题
*   **Visual.h** - 前向声明`Player`
*   **Visual.cpp** - 包括`Player.h`

这只是修复了编译错误，但您的设计似乎也有问题。如果`Player`是从 派生的`Visual`，为什么该方法

```
Visual::DrawStatusInformation(Timer* timer, std::vector<Player*>* playerList) 
```

存在？我确定您可以将其替换为

```
Visual::DrawStatusInformation(Timer* timer, std::vector<Visual*>* playerList) 
```

并将其覆盖在`Player`. 另外，为什么 a`vector*`而不是 a `vector&`？

# ruby - 如何检查方法使用 RSpec 获得的参数？

> ID：11100901
> 
> 赞同：0
> 
> 时间：2012-06-19T12:26:06.093
> 
> 标签：ruby, unit-testing, rspec

假设我有一个名为 MyClass 的类，基本上我想做这样的事情：

```
我的班级   
  定义初始化（一）
    do_stuff a, 4, 11   
  结尾

  def do_stuff(a,b,c)
     # ...   
  结尾
结尾

# rspec 下面
MyClass.any_instance.should_receive(:do_stuff).with_the_values(10,
     任何东西，任何东西）
MyClass.new 10

```

基本上，我想检查初始化是否会调用，并将正确的值传递给`do_stuff`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:31:21.647

我认为你应该测试你的班级是否行为正确，而不是看谁把什么传给了谁。

我想，该`do_stuff`方法应该会产生某种副作用。如果是这样，请检查此副作用是否是您所期望的。这样你就可以自由地改变你的类的实际实现，而无需每次都重写你的规范。

# mysql - 无法删除表：外键约束失败

> ID：11100911
> 
> 赞同：80
> 
> 时间：2012-06-19T12:26:42.657
> 
> 标签：mysql, sql, drop-table

在 MySQL 中，我想删除一个表。我尝试了很多东西，但我一直收到无法删除
名为 table 的错误。`bericht`这是我得到的错误：

> #1217 - 无法删除或更新父行：外键约束失败

如何删除此表？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2014-04-25T12:25:14.133

这应该可以解决问题：

```
SET FOREIGN_KEY_CHECKS=0; DROP TABLE bericht; SET FOREIGN_KEY_CHECKS=1; 
```

正如其他人指出的那样，这几乎不是您想要的，即使它是问题中所问的。更安全的解决方案是根据删除`bericht`前删除表`bericht`。有关如何做到这一点，请参阅 CloudyMarble 答案。当我不想或无法删除并重新创建数据库本身时，我使用 bash 和我的帖子中的方法删除数据库中的所有表。

`#1217`当其他表对您尝试删除的表具有外键约束并且您正在使用 InnoDB 数据库引擎时，会发生该错误。此解决方案暂时禁用检查约束，然后重新启用它们。阅读[文档](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_foreign_key_checks)以获取更多信息。请务必根据 删除表中的外键限制和字段`bericht`，否则您可能会使数据库处于损坏状态。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-06-19T12:31:32.950

尝试这个：

```
SELECT * 
FROM information_schema.KEY_COLUMN_USAGE 
WHERE REFERENCED_TABLE_NAME = 'YourTable'; 
```

这应该向您提供哪些表对您要删除的表的引用，一旦您删除这些引用，或者引用此表中数据集的数据集，您将能够删除该表

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-19T12:30:27.240

用于`show create table tbl_name`查看外键

您可以使用此语法删除外键：

`ALTER TABLE tbl_name DROP FOREIGN KEY fk_symbol`

这里还有更多信息（参见 Frank Vanderhallen 的帖子）： [http ://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-08-18T05:58:40.633

但幸运的是，使用 MySQL FOREIGN_KEY_CHECKS 变量，您根本不必担心 DROP TABLE 语句的顺序，您可以按照您喜欢的任何顺序编写它们 - 甚至完全相反 - 如下所示：

```
SET FOREIGN_KEY_CHECKS = 0;
drop table if exists customers;
drop table if exists orders;
drop table if exists order_details;
SET FOREIGN_KEY_CHECKS = 1; 
```

有关更多说明，请查看以下链接：

[http://alvinalexander.com/blog/post/mysql/drop-mysql-tables-in-any-order-foreign-keys/](http://alvinalexander.com/blog/post/mysql/drop-mysql-tables-in-any-order-foreign-keys/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-05T10:19:29.033

这可能与其他模式具有相同的表，这就是您收到该错误的原因。

您需要先删除子行，然后再删除父行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-09T10:31:27.730

我意识到这已经过时了一段时间，并且已经选择了一个答案，但是允许外键为***NULL***然后选择**ON DELETE SET NULL**的替代方法怎么样。

基本上，你的表应该像这样改变：

`ALTER TABLE 'bericht' DROP FOREIGN KEY 'your_foreign_key';`

`ALTER TABLE 'bericht' ADD CONSTRAINT 'your_foreign_key' FOREIGN KEY ('column_foreign_key') REFERENCES 'other_table' ('column_parent_key') ON UPDATE CASCADE ON DELETE SET NULL;`

就我个人而言，我建议同时使用“ON UPDATE CASCADE”和“ON DELETE SET NULL”来避免不必要的并发症，但是您的设置可能需要不同的方法。

希望这可以帮助。

# apache-flex - 更改运行时共享库 文件的默认位置

> ID：11100912
> 
> 赞同：1
> 
> 时间：2012-06-19T12:26:46.097
> 
> 标签：apache-flex, ant, rsls

为了使我的 Ant 生成的 swf 尽可能小，我使用了运行时共享库​​，如该[URL](http://soenkerohde.com/2008/04/using-the-flash-player-cache-for-the-flex-framework/)中所述。

默认情况下，RSL 文件应位于已编译的 swf（无 RSL）中。

因此，您知道如何更改 SRL 文件的位置属性吗？

因为我在许多目录中都有已编译的 swf，这就是为什么我们应该只有一个 RSL 资源以及一个单独的目录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:36:54.540

查看 RSL 链接定义：

```
<runtime-shared-library-path>
    <path-element>libs/framework.swc</path-element>
    <rsl-url>http://fpdownload.adobe.com/pub/swz/flex/4.6.0.23201/framework_4.6.0.23201.swz</rsl-url>
    <policy-file-url>http://fpdownload.adobe.com/pub/swz/crossdomain.xml</policy-file-url>
    <rsl-url>framework_4.6.0.23201.swz</rsl-url>
    <policy-file-url></policy-file-url>
</runtime-shared-library-path> 
```

节点定义应用程序将在`rsl-url`何处查找库。它将首先尝试从第一个 URL 获取它；如果失败，它将尝试第二个；依此类推，直到找到有效或失败的链接。
您可以添加任意数量的 URL，但对于框架 RSL，您通常会将指向 Adob​​e 存储库的链接作为第一个 URL，并在您自己的服务器上添加一个备用 URL。

这些 URL 可以是绝对的或相对的。例如，如果您希望 SDK RSL 位于应用程序所在目录下名为“sdk”的目录中，只需将辅助`rsl-url`节点更改为：

```
<rsl-url>sdk/framework_4.6.0.23201.swz</rsl-url> 
```

如果您希望通过编译器参数来实现，同样的原则也适用。你可以这样做：

```
-runtime-shared-library-path=${swc},${swz.primary},http://fpdownload.adobe.com/pub/swz/crossdomain.xml,${swz.secondary} 
```

# c# - 我的深拷贝没有做真正的深拷贝

> ID：11100924
> 
> 赞同：2
> 
> 时间：2012-06-19T12:27:28.187
> 
> 标签：c#, .net

我有一门课，我正试图在上面运行深拷贝。此类的成员之一是“MeshContainers”，它是 MeshContainerCollection 的一个实例。

MeshContainerCollection<> 继承自我的 SceneObjectCollection<> 类，该类继承自 List<>

我注意到，源对象在 meshcontainercollection 中有 1 个项目，而克隆对象有 0。在逐步执行 DeepCopy 过程时，我注意到当我尝试获取 MeshContainerCollection 的字段时，它没有找到任何项目。现在 MeshContainerCollection 没有任何直接字段（只有继承的字段）所以我认为这是问题所在。

但我使用：

```
FieldInfo[] fields = type.GetFields(BindingFlags.Public |
        BindingFlags.NonPublic | BindingFlags.Instance); 
```

其中（afaik）还应该返回私有继承成员。我已经查看了现有的 BindingFlags，但无法确定是否还有另一个 BindingFlag 我应该使用它来获取继承的私有字段。

有人能告诉我如何做一个真正的深拷贝吗？

我正在使用的深度复制方法：

```
private static object Process(object obj)
{
    if (obj == null)
        return null;
    Type type = obj.GetType();
    if (type.IsValueType || type == typeof(string))
    {
        return obj;
    }
    else if (type.IsArray)
    {
        Type elementType = Type.GetType(
             type.FullName.Replace("[]", string.Empty));
        var array = obj as Array;
        Array copied = Array.CreateInstance(elementType, array.Length);
        for (int i = 0; i < array.Length; i++)
        {
            copied.SetValue(Process(array.GetValue(i)), i);
        }
        return Convert.ChangeType(copied, obj.GetType());
    }
    else if (type.IsClass)
    {
        object toret = FormatterServices.GetUninitializedObject(obj.GetType());
        FieldInfo[] fields = type.GetFields(BindingFlags.Public |
                    BindingFlags.NonPublic | BindingFlags.Instance);
        foreach (FieldInfo field in fields)
        {
            object fieldValue = field.GetValue(obj);
            if (fieldValue == null)
                continue;
            field.SetValue(toret, Process(fieldValue));
        }

        return toret;
    }
    else
        throw new ArgumentException("Unknown type");
} 
```

EDIT1：我不喜欢通过序列化而是通过反射来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:36:29.060

如[GetFields 文档](http://msdn.microsoft.com/en-us/library/6ztex2dc.aspx)中所述，

> 不返回基类上的私有字段。

试试这个方法：

```
public static IEnumerable<FieldInfo> GetAllFields(this Type type)
{
    IEnumerable<FieldInfo> fields = type.GetFields(
        BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

    if (type.BaseType == null)
        return fields;
    else
        return GetAllFields(baseType).Concat(fields);
} 
```

（你可能想重写它以避免所有的枚举和连接，但你明白了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:30:41.433

您可以实现此目的的方法之一是序列化对象，然后将其反序列化..编写一个函数来做同样的事情..仅供参考，您的类需要为此标记`[Serializable]`..

有一些库可以做同样的事情.. [Copyable](http://ox.no/software/copyable)就是其中之一.. 我建议不要尝试重新发明轮子，而是建立在这个库上，因为当你深度复制时有太多的边缘条件需要处理..也许你也可以向作者提交补丁..

# asp.net-mvc - ASP.NET MVC Webgrid 高效分页

> ID：11100929
> 
> 赞同：1
> 
> 时间：2012-06-19T12:27:56.630
> 
> 标签：asp.net-mvc, pagination, webgrid, skip-take

我有一个 ASP.NET MVC 4 项目和一个 SQL 视图 (vvItem)。项目控制器

```
 MVCAppEntities db = new MVCAppEntities();
    public ActionResult Index()
    {
        var itemqry = db.vvItem.OrderBy(s => s.name);
        //var pageditems = itemqry.Skip(10).Take(20); // 25 seconds
        return View(itemqry.ToList()); // 88 seconds
    } 
```

Index.cshtml 视图

```
@model IEnumerable<MVCApplication1.Models.vvItem>
@{
    var norows = 20;
    var grid = new WebGrid(Model, canPage: true, rowsPerPage: norows);
    grid.Pager(WebGridPagerModes.NextPrevious);  
    @grid.GetHtml(tableStyle: "table",  headerStyle: "header", columns: grid.Columns(
          grid.Column(columnName: "name", header: "Name", canSort: true),
          grid.Column(columnName: "quantity", header: "Quantity", canSort: true),  
          grid.Column(columnName: "code", header: "Code", canSort: true),
          grid.Column(columnName: "Price", header: "Price", canSort: true),
          ))} 
```

在 vvItem 我有近 400000 条记录。我认为 webgrid Pager 只会加载 (Take()) 显示的记录，如果我要转到下一页，它会知道 Skip() 第一个记录。

**问**：如何有效地使视图仅加载显示的记录？

我找到了 2 个解决方案：[JSON 版本](http://www.dotnetcurry.com/ShowArticle.aspx?ID=618)和[NerdDinner](http://nerddinnerbook.s3.amazonaws.com/Part8.htm)

我不太擅长 JSON，所以我尝试了 NerdDinner 解决方案。正如我评论的行 `//var pageditems = itemqry.Skip(10).Take(20);`itemqry 已经加载了所有记录，加载需要很长时间。

**Q2**：我现在如何进行分页？我需要修改页码。从索引方法。

```
public ActionResult Index(int? page, string filter1 = " ", string filter2 = " ") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:57:27.860

我做了一个 SQL 存储过程

```
CREATE PROCEDURE SkipTake 
    @pagNo int, 
    @pageSize int
AS    
    select *
    from (select *, row_number() over (order by COD) as rn 
          from vvSTOC
         ) as T
    where T.rn between (@pagNo - 1) * @pageSize + 1 and @pagNo * @pageSize 
```

我在函数导入的 EF 模型中添加了这个 sp，以便它返回一个实体 (vvSTOC)

```
 public ActionResult Index(int? page)
    {
        const int pageSize = 20;
        return View(db.spSkipTake(page, pageSize).ToList());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:54:52.973

只要 itemqry 是 IEnumerable 或 IQueryable 类型，它就不应立即执行查询。您可以将其转换为 IQueryable 如下吗？

```
public ActionResult Index()
{
    IQueryable<vvItem> itemQry = db.vvItem;
    return View(itemQry.OrderBy(s => s.name).Skip(10).Take(20).ToList());
} 
```

如果 itemqry 是正确的类型，则在调用 .ToList() 将其转换为 IList 类型之前，它不会被执行。检查正在生成的 SQL 以确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:12:27.530

```
public ActionResult Index(int? pageIndex)
{
   int pageSize = 20;
   var itemIndex = ((pageIndex??1) -1) * pageSize;

    return View(db.vvItem.OrderBy(s => s.name).Skip(itemIndex).Take(pageSize).ToList()); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:02:29.480

谢谢你。

我对此进行了调整，以使用我的 SP 中的一些输入参数来控制 PageSize、PageNumber、SortIndex 和 SortOrder：

```
declare @sql nvarchar(1000) = '
select * from
(
    select *, row_number() over(order by '+@SortIndex+' '+@SortOrder+') as RowNumber from #Results
) as T
where T.RowNumber between ('+@PageNumber+' - 1) * '+@PageSize+' + 1 and '+@PageNumber+' * '+@PageSize

exec sp_executesql @sql 
```

# junit - 如何在junit 4.10中动态添加测试套件

> ID：11100937
> 
> 赞同：0
> 
> 时间：2012-06-19T12:28:32.097
> 
> 标签：junit, junit4

我想知道是否有任何方法可以在 junit 4 中动态添加测试套件。

例如，我有一个如下所述的 TestClassA，其中包含测试用例“test1”

```
class TestClassA 
{
    @Test
    public void test1()
    {
        createTestClassDynamically(); // this creates a test class having
                        // setUp(), tearDown() methods and one test case .
    }
} 
```

测试用例 test1 有一个方法 createTestClassDynamically()，它动态地创建一个新的测试类（比如说 TestClassB），它有 setUp()、tearDown() 方法和一个测试用例（比如说 test2()）。

我想运行 test1，然后当动态生成 TestClassB 时，我希望也执行测试用例“test2”。

我知道这很复杂，而且不是最好的做法，但在我的框架中，我需要这样做以动态生成大量测试类，而不是将它们物理地放在包中。任何人都可以提供任何帮助/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:15:43.390

我已经解决了这是我的框架，它使用 Junit 4 的参数化功能帮助执行具有不同参数的相同测试用例。
下面提到的是我如何实现它的示例代码，如果它对任何人有帮助，请考虑发布它。
另外，如果有人有更好的解决方案，请随时发布。

```
class TestClassA 
{

  private TestClassB classBObj;

  public TestClassA(TestClassB obj) {
   classBObj= obj;
  }

@Test
public void test1()
{
// createTestClassDynamically(); // remove this method as Parameterized 
                // feature will take care of dynamic test execution.
}

@Test
public void test2()
{
 // Test case from Test class B using TestClassB object (classBObj)

}

public static Collection<Object[]> getParameters() {
  Collection<Object[]> parameteres = new ArrayList<Object[]>();

  Object[] obj1 = new Object[]{new TestClassB()};
  Object[] obj2 = new Object[]{new TestClassB()};

  parameteres.add(obj1);
  parameteres.add(obj2);

  // ....... add more test data this way or create a loop

  return parameteres;
   }
} 
```

# java - 在 Android 上将视频分成多个部分

> ID：11100947
> 
> 赞同：1
> 
> 时间：2012-06-19T12:29:00.693
> 
> 标签：java, android, asp.net, video, upload

我正在尝试将视频发送到 android 上的 asp.net 服务器。但是，由于视频大小约为 26 MB，我无法发送视频？有没有办法将视频分成几部分并使用java通过android将它们发送到.net服务器？

```
 import java.io.DataOutputStream;
 import java.io.File;
 import java.io.FileInputStream;
 import java.net.HttpURLConnection;
 import java.net.URL;
 import android.app.Activity;
 import android.content.Intent;
 import android.database.Cursor;
 import android.net.Uri;
 import android.os.Bundle;
 import android.provider.MediaStore;
 import android.util.Log;

 public class VideoUploader extends Activity 
 {
/** Called when the activity is first created. */

public static final int SELECT_VIDEO=1;
public static final String TAG="UploadActivity";
String path="";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    openGaleryVideo();
}

public void openGaleryVideo()
{
    Intent intent=new Intent();
    intent.setType("video/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Video"),SELECT_VIDEO);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_VIDEO) {
            Uri videoUri = data.getData();
            path= getPath(videoUri);
            doFileUpload();
        } 
    }
}
public String getPath(Uri uri)
{   
    String[] projection = { MediaStore.Video.Media.DATA};
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

public void doFileUpload()
{
        String pathToOurFile = path;//this will be the file path        
        String urlServer = "http://192.168.10.177/androidweb/default.aspx";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 2*1024* 1024;

        try
        {
        FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile));

        URL url = new URL(urlServer);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type",  "multipart/form-data");
        connection.setRequestProperty("SD-FileName", "Chrysanthemum.JPEG");

        DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        while (bytesRead > 0)
        {
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }//end of while statement

         int serverResponseCode = connection.getResponseCode();
         String serverResponseMessage = connection.getResponseMessage();
         Log.d("ServerCode",""+serverResponseCode);
         Log.d("serverResponseMessage",""+serverResponseMessage);
         fileInputStream.close();
         outputStream.flush();
         outputStream.close();
        }//end of try body

        catch (Exception ex)
        {
            //ex.printStackTrace();
            Log.e("Error: ", ex.getMessage());
        }
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:41:39.227

首先，如果视频在重新组装之前不需要播放，只需在每个片段中发送这么多字节并让服务器重新组装它。其余部分将假设您需要将其分成多个*可以*单独播放的视频。

您可能会查看 ICS 中的视频编辑示例，但取决于它的实现方式可能会将您限制在最新的设备上。

否则：

大多数压缩视频格式可以被认为是绝对信息（关键帧）的重复序列，然后是相对于该基础编码的帧的相对信息。如果您了解您正在使用的未指定格式的详细信息，您可能会了解如何识别一个接近您希望剪切的位置的位置，即新部分以完整关键帧开始的位置。您将在那里拆分视频，在新部分中创建任何必要的文件头，并调整原始头中的任何长度信息。

虽然自己这样做会很有教育意义，但寻找现有的解决方案也是值得的。

# objective-c - NSException 和 NSError 自定义异常/错误

> ID：11100951
> 
> 赞同：13
> 
> 时间：2012-06-19T12:29:26.707
> 
> 标签：objective-c, exception, nserror, nsexception

我最近开始学习Objective-C，我正在开发一个iOS应用程序作为练习，无论如何，我想通过抛出异常来处理溢出（我来自Java背景），我搜索了仅有的参考`NSException`，但后来我阅读有关异常处理的主题部分，他们说使用`NSError`，我阅读了参考，但它们具有相同的协议和方法，那么它们之间有什么区别？哪个更好？

另外，我想创建自己的异常或错误类，是否应该包含任何方法或字段？（就像`Exception`在 Java 中实现接口时一样）。谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T12:49:14.643

`NSError`专为非致命的、可恢复的错误而设计。设计为由 an 捕获的问题`NSError`通常是*用户错误*（或者是可以呈现给用户的错误），通常可以从（因此[`-presentError:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/presentError:)和[`NSErrorRecoveryAttempting`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSErrorRecoveryAttempting_Protocol/Reference/Reference.html#//apple_ref/occ/cat/NSErrorRecoveryAttempting)）中恢复，并且通常是预期或可预测的错误（例如试图打开一个您无权访问的文件，或尝试在不兼容的字符串编码之间进行转换）。

`NSException`专为可能致命的程序员错误而设计。这些错误旨在表示您的应用程序中的潜在缺陷，您没有正确检查执行某些操作的先决条件（例如尝试访问超出其边界的数组索引，或尝试改变不可变对象）。[Exception Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Exceptions/Exceptions.html)的介绍稍微解释了这一点。

# ios - NSString isEqualToString：不起作用

> ID：11100957
> 
> 赞同：6
> 
> 时间：2012-06-19T12:29:54.463
> 
> 标签：ios, nsstring, compare

我在我的应用程序中使用此代码。刚比较韩语时发现不正确

```
 for (NSString *lang in array){
        NSString *currentLang = [[MLLanguage sharedInstance] lang];
        BOOL flag = [lang isEqualToString:currentLang];
        NSLog(@"\n'%@' isEqual to '%@', %d\n%@\n%@", lang, currentLang, flag?1:0, [lang dataUsingEncoding:NSUTF8StringEncoding], [currentLang dataUsingEncoding:NSUTF8StringEncoding]); 
```

错误结果：两个韩语单词比较不同

```
 2012-06-19 21:16:52.681 Motilink[10188:11903] -[MLSettingLanguageViewController             loadDownloadedData][Line 50] 
        'English' isEqual to '한국어', 0
        <456e676c 697368>
        <ed959cea b5adec96 b4>
        2012-06-19 21:16:52.682 Motilink[10188:11903] -[MLSettingLanguageViewController             loadDownloadedData][Line 50] 
        '한국어' isEqual to '한국어', 0
        <e18492e1 85a1e186 abe18480 e185aee1 86a8e184 8be185a5>
        <ed959cea b5adec96 b4>
        2012-06-19 21:16:52.682 Motilink[10188:11903] -[MLSettingLanguageViewController             loadDownloadedData][Line 50] 
        '中国语' isEqual to '한국어', 0
        <e4b8ade5 9bbde8af ad>
        <ed959cea b5adec96 b4> 
```

正确一个：

```
 2012-06-19 21:35:00.908 Motilink[10188:11903] -[MLSettingLanguageViewController loadDownloadedData][Line 50] 
        'English' isEqual to '中国语', 0
        <456e676c 697368>
        <e4b8ade5 9bbde8af ad>
        2012-06-19 21:35:00.909 Motilink[10188:11903] -[MLSettingLanguageViewController             loadDownloadedData][Line 50] 
        '한국어' isEqual to '中国语', 0
        <e18492e1 85a1e186 abe18480 e185aee1 86a8e184 8be185a5>
        <e4b8ade5 9bbde8af ad>
        2012-06-19 21:35:00.909 Motilink[10188:11903] -[MLSettingLanguageViewController loadDownloadedData][Line 50] 
        '中国语' isEqual to '中国语', 1
        <e4b8ade5 9bbde8af ad>
        <e4b8ade5 9bbde8af ad> 
```

似乎： NSString 自己使用编码，

英语只使用 7 字节，如 ascii

中文使用使用 9 字节也许是 utf8

但在韩语中，出现了两种不同的结果，

有人知道吗

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T14:49:17.957

这里的问题是您比较非规范化字符串。在 Unicode 中，您可以直接使用字符，也可以由其他字符组合它们。例如在德语中，字符“ä”可以由代码点“ä”或“¨”和“a”的代码点序列表示。

韩语字符串在这里也有同样的问题：虽然它们在输出中看起来相同，但其中一个被分解（这导致更长的 UTF-8 数据表示），而另一个则不是。

解决此问题的一种方法是使用以下方法标准化所有字符串 `- [NSString precomposedStringWithCanonicalMapping]`：

```
BOOL flag = [[lang precomposedStringWithCanonicalMapping] isEqualToString:
                    [currentLang precomposedStringWithCanonicalMapping]]; 
```

# mysql - 在 MySQL 中使用动态 SQL（带有查询结果的子查询）

> ID：11100962
> 
> 赞同：0
> 
> 时间：2012-06-19T12:30:07.510
> 
> 标签：mysql, sql

我不确定这是否可行，但我知道是否可行，stackoverflow 社区是我可以找到答案的地方。我基本上是在尝试预处理一些数据，以便我可以加快我的应用程序。这是我正在尝试做的一个例子：

```
SELECT id 
FROM data AS data1 
WHERE rangeVal < (SELECT rangeVal FROM data WHERE id = data1.id - 1)
AND actiondate >= '1980-05-18' 
AND actiondate <= '2012-05-18'
ORDER BY actiondate DESC 
```

本质上，只有当它们的 rangeVal 小于第二天的 rangeVal 时，我才试图获取我的数据的 ID。

任何帮助或正确方向的观点将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:34:22.123

如果您的日子是增量的并且您每天都有一行，而不是尝试依赖从增量 id 中减去，这可能由于行删除和其他问题而非常不可靠，您可以使用`DATE_SUB()`or`DATE_ADD()`作为连接表加盟条件：

```
SELECT 
  id
FROM 
  data data_today
  /* JOIN on a date manipulation */
  JOIN data data_tomorrow ON DATE_ADD(data_today.actiondate, INTERVAL 1 DAY) = data_tomorrow.action_date
WHERE 
  data_today.rangeVal < data_tomorrow.rangeval
  AND data_today.actiondate BETWEEN '1980-05-18' AND '2012-05-18' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:40:31.213

子查询也可以

```
SELECT id 
FROM data AS data1 
WHERE rangeVal < 
    (
     SELECT rangeVal FROM data d2 WHERE d2.id = data1.id  AND d2.actiondate= 
     DATE_ADD(d2.action_date, INTERVAL 1 DAY)
    )
AND actiondate BETWEEN '1980-05-18' AND '2012-05-18'
ORDER BY actiondate DESC 
```

# java - 是否可以使用 SWT 显示默认的 Windows 进度对话框

> ID：11100964
> 
> 赞同：1
> 
> 时间：2012-06-19T12:30:19.607
> 
> 标签：java, dialog, swt, progress-bar, progressdialog

我可以使用 SWT 显示默认的 Windows 进度对话框吗？这是我所指的对话框：

![在此处输入图像描述](../Images/fab44d76b1e4f86a8b42835edf39f7ba.png)

我在 .Net 中看到了它的一些实现，但对在 Java 中做同样的事情感到好奇。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T12:34:20.433

您可以使用[ProgressMonitorDialog](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/dialogs/ProgressMonitorDialog.html)（它与 Window 的不完全相同）。

这是查找 JFace/SWT 标准对话框的有用[链接。](http://sureshkrishna.wordpress.com/2008/03/15/jface-dialogs-which-one-is-right-for-you/)

# java - 如何让 EAR 引用 WAR 共享库

> ID：11100966
> 
> 赞同：1
> 
> 时间：2012-06-19T12:30:21.987
> 
> 标签：java, weblogic, shared-libraries, application-server

我想得到大家的帮助。以下是我目前面临的问题。

我在 EAR 文件的 weblogic-application.xml 中添加了对 WAR 共享库的引用。

在 EAR 中，我确实有一个 ejb 模块，它在 application.xml 中有“library-directory”标签。我希望 ejb 模块引用共享库中的 jar 文件，但它会在 EAR 的 lib 文件夹中查找 jar 文件。

在 EAR 的 lib 文件夹中，jar 文件不可用，但 jar 在 WAR 共享库中可用。

如何解决这个问题并使EAR的ejb模块引用WAR共享库的jar。

如果问题不能完全理解，请添加评论。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:43:25.707

尝试在*application.xml*中将您需要的 jar 定义为模块。就像是：

```
<module>
    <java>pathToWarLib/needed.jar</java>
</module> 
```

# java - 如何从 Java 设置系统变量？

> ID：11100967
> 
> 赞同：5
> 
> 时间：2012-06-19T12:30:25.970
> 
> 标签：java

我需要从程序中设置某些系统变量。我的谷歌 fu 让我无法找到任何方法来做到这一点。我该怎么做？（我可以接受 hacky 方法。我需要能够在 Windows、Linux 和 Mac 上运行这个应用程序。）

**编辑：**

在此处添加我在帖子下方的评论，因为那里不容易看到：

> 我能找到的最好的链接是[this](https://stackoverflow.com/questions/318239/how-do-i-set-environment-variables-from-java)，它只在内存中设置变量。它们在程序退出后不会持续存在。

**编辑：**

我正在编写一个安装程序，需要以某种方式在系统级别记录安装发生（以及一些目录的路径）。下次用户运行安装程序时，安装程​​序将检查系统中是否已存在变量，在这种情况下，用户将收到适当的警告。

如果玩弄环境变量不是一个好主意，那么实现上述目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:40:22.803

使用系统类的以下方法

```
// Get a system property
String dir = System.getProperty("user.dir");

// Set a system property
String previousValue = System.setProperty("application.property", "newValue"); 
```

更多详情请参考

[http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF8QFjAA&url=http%3A%2F%2Fdocs.oracle.com%2Fjavase%2Ftutorial%2Fessential%2Fenvironment% 2Fsysprop.html&ei=oHLgT6agKcborAf_3L3-DA&usg=AFQjCNGWSWRjk3ityPQqreuwx_O7Bp7kdg&sig2=Y1tfYzdXAmNX-hpB8Z64kw](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CF8QFjAA&url=http%3A%2F%2Fdocs.oracle.com%2Fjavase%2Ftutorial%2Fessential%2Fenvironment%2Fsysprop.html&ei=oHLgT6agKcborAf_3L3-DA&usg=AFQjCNGWSWRjk3ityPQqreuwx_O7Bp7kdg&sig2=Y1tfYzdXAmNX-hpB8Z64kw)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:36:03.677

如果您希望您的环境变量在程序结束后仍然存在，我建议您使用`Properties`该类。它可以很容易地保存到文件中，反之亦然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:27:52.177

首先，Properties 是一个 java 类，用于保存您的程序可能需要的属性。您所说的基本属性是由操作系统提供的。并非所有这些都可以更改。如果您尝试，您将得到一个 SecurrityException（例如，您不能更改 os.name）。基本属性是从计算机的内存中读取的（基本上），您可以通过在您使用的操作系统中设置环境变量来添加其他变量。例如在 Win95 中，您可以在 autoexec.bat 中添加以下行： set BARTENDER_NAME=Carl 此行可以放在任何批处理文件中，并且 BARTENDER_NAME 将等于 Carl，直到您重置它。在你的 java 程序中如果你添加行 System.out.println(System.getProperty("BARTEDER_NAME")); 您将得到 Carl 作为输出。

您可以为您的 java 程序创建自己的一组属性并将它们存储在一个文件中，然后使用 Properties load() 方法加载它们。希望这可以帮助

从

[http://www.coderanch.com/t/387634/java/java/Permanently-setting-System-property](http://www.coderanch.com/t/387634/java/java/Permanently-setting-System-property)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:39:53.070

好的，这不在我的脑海中，所以它非常hacky和东西。

获取一个进程并运行将设置系统变量的命令行命令。这不是便携式的，但在您找到更好的解决方案之前，它应该足够短期使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T12:52:32.053

因为没有标准的解决方案，所以我建议您为此使用工厂模式。它的意思是：

`envManager = null`

`if`系统是`Windows`

```
 `envManager = WindowsEnvManager` 
```

`else if`系统是`Linux`

```
 `envManager = LinuxEnvManager` 
```

`else if`系统是`Mac`

```
 `envManager = macEnvManager` 
```

`persistEnvironment(envManager);`

并且该`persistEnvironment`方法将调用`EnvManager`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T13:27:46.573

[使用Java Preferences API](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)怎么样。这样，如果您在 Windows 上运行，您可以将此类数据存储在注册表中。简单教程[在这里](http://www.vogella.com/articles/JavaPreferences/article.html)。

您可以存储每个系统或每个用户的偏好，并且偏好是持久的，就像您想要的一样。

* * *

**编辑**

例子：

```
package com.stackoverflow.Q11100967;

import java.util.prefs.Preferences;

/**
 * @author maba, 2012-06-20
 */
public class App {

    public static void main(String[] args) {
        Preferences preferences = Preferences.systemNodeForPackage(App.class);

        if (!preferences.getBoolean("installed", false)) {
            // Install the stuff...
            preferences.putBoolean("installed", true);
            preferences.put("version", "1.2.3");
        }
    }
} 
```

在 Windows 上，首选项将存储在`HKEY_LOCAL_MACHINE/SOFTWARE/JavaSoft/Prefs/com/stackoverflow/Q11100967`.

为了使其工作，您必须以管理员权限或类似方法运行您的进程。

* * *

**编辑2**

在 Linux 上，首选项将存储`/etc/.java/.systemPrefs/com/stackoverflow/Q11100967/`在一个名为`prefs.xml`以下内​​容的文件中：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE map SYSTEM "http://java.sun.com/dtd/preferences.dtd">
<map MAP_XML_VERSION="1.0">
  <entry key="installed" value="true"/>
  <entry key="version" value="1.2.3"/>
</map> 
```

# java - android比较2个日期以发现差异

> ID：11100974
> 
> 赞同：2
> 
> 时间：2012-06-19T12:30:51.770
> 
> 标签：java, android

我有一个预订表格，要求用户在日期旁边输入他们的详细信息。用户不能提交 24 小时内的日期。必须在 24 小时后进行预订。

我该如何实施？我已经获得了当前的日期和时间。

因此，如果当前日期和时间为 19062012 1324，则在 20062012 1324 之前无法进行预订

我试图做的是：

```
long mdates = (long) (Long.parseLong(date.getText().toString()));
    long mprefered= (long) (Long.parseLong(date2.getText().toString()));
        long sub = mprefered - mdates;

    if (preferedDateEditText.getText().toString() != null
            && !preferedDateEditText.getText().toString()
                    .equalsIgnoreCase("") && sub>100000000) {
        emailBody += "Prefered date & Time:"
                + preferedDateEditText.getText().toString().trim()
                + "\n sub="+sub;
    } else {
        errorMessage += "A booking cannot be made within 24 hours.";
    } 
```

这有效但是如果首选日期是 01072012 1324 那么它不会接受提前 24 小时任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:46:22.507

日期 date1 = 新日期（毫秒）；

日期 date2 = 新日期（毫秒）；

```
 if(date1.compareTo(date2)>0)
        {

        }
        else if(date1.compareTo(date2)<0)
        {

        }
        else 
        {
            //both are equal
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:38:54.250

使用 SimpleDateFormat 将日期字符串解析为 Date 对象。然后您可以使用这些对象进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:34:43.680

```
Date date = new Date(long);
if (date.before(other_date)) {
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:12:48.520

您可以使用 Date 和 DateFormat 将日期字符串解析为 Date 对象，然后使用 Date.before(Date) 和 Date.after(Date) 函数进行比较。

```
public checkTimePassed(String datestring){
        DateFormat dfm = new SimpleDateFormat("ddMMyyyy hm");
        Date preferred_date = dfm.parse(datestring);
        Date now = new Date();
        double minimum_time = preferred_date.getTime() + (24 * 60 * 60);
        return now.getTime() > minimum_time;
    } 
```

# asp.net-mvc - ASP.NET MVC 在新窗口中打开 pdf 文件

> ID：11100981
> 
> 赞同：10
> 
> 时间：2012-06-19T12:31:13.180
> 
> 标签：asp.net-mvc, pdf

我有一个 MVC 应用程序。当用户单击页面上的打开按钮时，我需要打开 pdf 文件。存储 pdf 的文件路径是从数据库中读取的，它是 c: 上的文件。如何在我的 html 代码中打开它？我有这个代码：

```
<a href="@Model.CertificatePath" target="_blank" class="button3">Open</a> 
```

但这不会打开我的文件。我需要做什么？我需要在某处指定它是pdf？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T12:34:37.060

您将需要提供将接收文件名的操作的路径，解析完整路径，然后将磁盘上的文件从服务器流式传输到客户端。谢天谢地，网络上的客户端无法直接从服务器的文件系统中读取文件（除非......您是否建议*远程用户*`@Model.CertificatePath`机器上的文件路径？）。

 *```
public ActionResult Download(string fileName)
{
   string path = Path.Combine(@"C:\path\to\files", fileName);

   return File(path, "application/pdf");

} 
```

**更新**

如果`@Model.CertificatePath`是客户端实际机器上的位置，请尝试：

```
 <a href="file://@Model.CertificatePath" target="_blank" class="button3">Open</a> 
```

请注意，某些浏览器可能具有不允许您打开本地文件的安全设置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T10:18:53.677

在您的视图中尝试这样

```
@Html.ActionLink("View", "ViewPDF", new { target = "_blank" }) 
```

现在链接将在新窗口中打开。您可以在 ViewPDF 控制器方法中写入 pdf 字节

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:40:39.030

您可以让链接触发一种方法，例如下面的方法，然后将您选择的文件流式传输到文件下载，而不是在浏览器中打开 pdf。

```
/// <summary>
/// Forces a file to be displayed to the user for download.
/// </summary>
/// <param name="virtualPath"></param>
/// <param name="fileName"></param>
public static void ForceDownload(string virtualPath, string fileName)
{
    HttpResponse response = HttpContext.Current.Response;
    response.Clear();
    response.AddHeader("content-disposition", "attachment; filename=" + fileName);
    response.WriteFile(virtualPath);
    response.ContentType = "";
    response.End();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-09T18:40:03.317

好吧，如果您获得路径值并且该值在 @Model.CertificatePath

这行不通

```
<a href="@Model.CertificatePath" target="_blank" class="button3">Open</a> 
```

你需要添加这个

```
<a href="@Url.Content(Model.CertificatePath)" target="_blank" class="button3">Open</a> 
```

并通过添加这个来确保你的路径是相对的 ~ 例如，如果你的路径是`/Content/pdfs/CertificatePath.pdf`

它需要看起来像

`~/Content/pdfs/CertificatePath.pdf`

这应该是使其工作的最简单方法。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T12:35:36.497

不幸的是，您无法指定打开 PDF 的位置，主要是因为您无法保证安装了 Adob​​e Acrobat 阅读器插件或其运行方式。

理论上你可以打开一个新窗口，并且在那个新窗口中有一个 JavaScript 函数来打开 PDF 文件，但同样你不能保证它会在没有插件的情况下在嵌入式窗口中打开，你能希望的最好的结果是“最好的尝试”。*

# google-chrome - 背景颜色与透明边框图像

> ID：11100982
> 
> 赞同：0
> 
> 时间：2012-06-19T12:31:17.707
> 
> 标签：google-chrome, background, png, border, css

我尝试用只有 1 个图像和 1 个 div 构建一个漂亮的盒子。这是我的代码：

```
border-width: 14px;
-moz-border-image:url(box.png) 14 round;
-webkit-border-image:url(box.png) 14 round;
-o-border-image:url(box.png) 14 round;
border-image:url(box.png) 14 round; 
```

还有一个例子：

[http://jsfiddle.net/ZHKbn/](http://jsfiddle.net/ZHKbn/)

在 Safari 和 Firefox 中，框的背景是白色的，但在 Chrome 中，它是透明的。

哪个浏览器是正确的？我需要白色背景版本，是否有解决办法让它在 Chrome 中工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:36:32.820

这足够了吗？

我添加了一个带有背景颜色的内部 div。似乎现在可以在 chrome 和 firefox 中使用。

[http://jsfiddle.net/ZHKbn/2/](http://jsfiddle.net/ZHKbn/2/)

这适用于 chrome，但不适用于 Firefox：

[http://jsfiddle.net/ZHKbn/7/](http://jsfiddle.net/ZHKbn/7/)

好的，最后一个。适用于 chrome 和 firefox：

[http://jsfiddle.net/ZHKbn/8/](http://jsfiddle.net/ZHKbn/8/)

```
border-width: 14px;
-moz-border-image:url(http://cl.ly/041l44390l002l2j1307/box.png) 14 round;
-webkit-border-image:url(http://cl.ly/041l44390l002l2j1307/box.png) 14 fill round;
-o-border-image:url(http://cl.ly/041l44390l002l2j1307/box.png) 14 round;
border-image:url(http://cl.ly/041l44390l002l2j1307/box.png) 14 fill round; 
```

​</p>

# ios - CGContextDrawLayerAtPoint 在 iPad 3 上很慢

> ID：11100984
> 
> 赞同：0
> 
> 时间：2012-06-19T12:31:21.907
> 
> 标签：ios, ipad, core-graphics, ipad-3

我的应用程序中有一个自定义视图（继承自`UIView`）。自定义视图覆盖

`- (void) drawRect:(CGRect) rect`

问题是：iPad 3 上的`drawRect:`执行时间是 iPad 2 上的许多倍（iPad 3 上大约 0.1 秒，iPad 2 上大约 0.003 秒）。它慢了大约 30 倍。

基本上，我使用一些预先创建的图层并将它们绘制在`drawRect:`. 最后一次通话

```
CGContextDrawLayerAtPoint(context, CGPointZero, m_currentLayer); 
```

花费大部分时间（大约 95% 的总时间`drawRect:`）

是什么让事情变得如此缓慢，我应该如何解决这个原因？

更新：

没有直接涉及的线程。我确实调用`setNeedsDisplay:`了一个线程并`drawRect:`从另一个线程调用，但就是这样。锁也是如此（没有使用锁）。

视图被重绘以响应触摸（它是一个着色书应用程序）。在 iPad 2 上，我在触摸和屏幕更新之间得到了合理的延迟。我想在 iPad 3 上达到同样的效果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T14:25:13.357

所以，iPad 3 在很多方面肯定要慢一些。我对此有一个理论。 [Marco Arment 指出](http://twitter.com/marcoarment/statuses/181167414636056576)，这种方法`renderInContext`在新 iPad 上速度慢得离谱。在尝试为自定义文本视图创建放大镜时，我也发现了这种情况。最后我不得不放弃`renderInContext`自定义核心图形绘图。

`wait_fences`我在这里的核心图形绘图上也遇到了可怕的错误： [Only on new iPad 3: wait_fences: failed to receive reply: 10004003](https://stackoverflow.com/questions/10938328/only-on-new-ipad-3-wait-fences-failed-to-receive-reply-10004003/10938889#10938889)。

这是我到目前为止所知道的。iPad 3 显然有 4 倍的像素来驱动。这可能会在两个地方引起问题：

1.  首先，CPU。所有核心图形的绘制都是由 CPU 完成的。在旋转事件的情况下，如果 CPU 绘制时间过长，它会遇到`wait_fences`错误，我认为这只是一个调用，告诉设备等待更长时间才能实际执行旋转，从而延迟。
2.  将图像传输到 GPU。GPU 显然可以很好地处理视网膜分辨率（请参阅 Infinity Blade 2）。但是当核心图形绘制时，它会将其图像直接绘制到 GPU 缓冲区以避免 memcpy。然而，要么 GPU 缓冲区自 iPad 2 以来没有变化，要么只是没有使它们变得足够大，因为这些缓冲区很容易过载。发生这种情况时，我相信 CPU 会将图像写入标准内存*，然后在 GPU 缓冲区可以处理时将它们复制到 GPU*。我认为这是导致性能问题的原因。额外的副本对于如此多的像素非常耗时，并且会大大减慢速度。

为了避免 memcpy，我推荐了几件事：

1.  只画你需要的。不惜一切代价避免在屏幕外画任何东西。如果您正在绘制一个大视图，但只显示该视图的一部分（例如覆盖它的子视图），请尝试找到一种仅绘制可见内容的方法。
2.  如果您必须绘制一个大视图，请考虑将视图分解为子视图或子层（在您的情况下可能是子层）。并且只重绘你需要的东西。以知名度应用程序为例。当您放大时，您可以从字面上看到它一次重绘一个正方形。或者在 Safari 中，您可以在滚动时看到它更新方块。不幸的是，我不必这样做，所以我不确定方法。
3.  尽量保持你的图纸简单。我有一个很棒的自定义核心文本视图，必须在输入的每个字符上重新绘制。非常慢。我将背景更改为简单的白色（在核心图形中），它加速得很好。对我来说最好不要重绘背景。

我想指出，我的理论是猜想。苹果并没有真正解释他们到底做了什么。我的理论只是基于他们所说的以及 iPad 的响应方式以及我自己的实验。

***更新***

所以苹果现在已经发布了 2012 WWDC 开发者视频。他们有两个视频可以帮助您（需要开发者帐户）：

1.  [iOS 应用程序性能：响应性](http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)
2.  [iOS 应用性能：图形和动画](http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)

我认为他们谈论的一件事可能会对您有所帮助，那就是使用以下方法：`setNeedsDisplayInRect:(CGRect)rect`. 使用此方法而不是普通方法`setNeedsDisplay`并确保您的`drawRect`方法仅绘制给定的矩形可以极大地提高性能。就个人而言，我使用以下功能：`CGContextClipToRect(context, rect);`将我的绘图仅剪辑到提供的矩形。

例如，我有一个单独的类，用于使用 Core Text 将文本直接绘制到我的视图中。我的 UIView 子类保留对这个对象的引用并使用它来绘制它的文本，而不是使用 UILabel。`setNeedsDisplay`我曾经在文本更改时刷新整个视图 ( )。现在我让我的 CoreText 对象计算更改后的 CGRect 并用于`setNeedsDisplayInRect`仅更改包含文本的视图部分。这确实有助于我在滚动时的表现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:21:58.207

我最终使用了@Kurt Revis[对类似问题的回答中](https://stackoverflow.com/a/10424635/249690)描述的方法。

我最小化了使用的层数，添加`UIImageView`并将其图像设置为`UIImage`包装我的`CGImageRef`. 请阅读上述答案以获取有关该方法的更多详细信息。

最后，我的应用程序变得比以前更简单，并且在 iPad 2 和 iPad 3 上以几乎相同的速度运行。

# mod-rewrite - 如何简单地重建所有别名（友好的 url）以使它们基于页面标题？（MODX 革命）

> ID：11100989
> 
> 赞同：0
> 
> 时间：2012-06-19T12:31:40.490
> 
> 标签：mod-rewrite, friendly-url, modx

我在文档树上创建了很多文档和子文档。但是在前端页面上有基于 ID 的友好 url。如何简单地更新别名并根据页面标题重写它们？我试图放入列

```
`alias`, `uri` 
```

字符串生成表单页面标题，但在刷新 modx 缓存时出现错误。你知道一些简单地完成这项工作的附加组件或 SQL 查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:09:56.420

系统设置中有一个开关（我相信它位于 FURL 选项卡中的某处）。这几乎是 MODx 的强制设置。

# iphone - 如何从 Appdelegate 导航到另一个视图控制器

> ID：11100991
> 
> 赞同：1
> 
> 时间：2012-06-19T12:31:57.877
> 
> 标签：iphone, uiviewcontroller, presentmodalviewcontroller

在我的 iPhone 应用程序中，我使用的是 Pushnotifications。当我收到通知时，我想从当前视图控制器移动到另一个视图控制器。我`- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`在 appdelegate 本身中写了。我正在使用基于视图的应用程序，所以我想使用`presentModalViewController`（我认为）。我使用了以下代码：

```
UIViewController *view = (UIViewController*)self.viewController.presentedViewController;
                [view presentModalViewController:self.anotherVC animated:NO]; 
```

但有错误

```
2012-06-19 17:47:52.521 iPhoneApp[1450:607] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present a nil modal view controller on target <HomeScreenVC: 0x1fb77cc0>.' 
```

这里出了什么问题？任何想法。

**编辑** 我将详细说明这个问题：我有视图控制器 VC1、VC2、VC3 和 VC4。我的 rootviewcontroller 是 VC1。如果当我在 VC2 或 VC4 时收到推送通知，当我单击通知警报的确定按钮时，我想移动到 VC3。但是警报视图的委托方法在 appdelegate.m 中。

我已经更新了我的代码

```
 self.menuVC = [[MenuScreenVC alloc] initWithNibName:@"MenuScreenVC" bundle:nil];
        UIViewController *view = (UIViewController*)self.viewController.presentedViewController;
        [view presentModalViewController:self.menuVC animated:NO]; 
```

现在如果我在 VC2，我可以导航到 VC3，如果我在 VC4，我不能。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:33:56.200

而不是您使用的执行以下操作

```
[self.window.rootViewController presentModalViewController:self.anotherVC animated:NO]; 
```

# android - 是否有包含所有崩溃报告的文件在 andorid 设备中

> ID：11100993
> 
> 赞同：0
> 
> 时间：2012-06-19T12:32:08.607
> 
> 标签：android, crash, crash-reports

作为我的标题，我需要知道一个文件是否包含 android 中的所有崩溃报告。让我详细解释一下。在 iphone 中，开发人员可以通过将设备同步到 Mac 中特定目录中的系统来获取 iphone 应用程序中的所有崩溃报告。所有崩溃报告都存储在具有单个设备名称的目录中。

同样，我需要获取 android 设备的所有崩溃报告。当我用谷歌搜索时，我得到了一些建议，因为使用 ACRA 我们可以在 Google Doc 或电子邮件中获得崩溃报告。

有没有一种方法可以获取崩溃报告或任何其他方法来获取它？如果是这样，请指导获取崩溃报告。我的时间不多了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:42:33.503

请参阅此处的 rrainn 答案[从我的 Android 应用程序获取崩溃数据（至少堆栈跟踪）？](https://stackoverflow.com/questions/601503/how-do-i-obtain-crash-data-from-my-android-application)

您可以在 SD 卡上所需的任何特定位置获取崩溃报告，如果需要，您也可以发送到服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:30:42.870

我在运行 Jellybean 4.1.2 的 Galaxy Note S2 上也遇到了同样的问题。我的 Gingerbread 和 ICS 测试设备工作正常。我还看到这篇文章表明该问题与某些版本的 Webkit 中的一些 CSS 处理错误有关：

[http://css-tricks.com/crashing-mobile-webkit/](http://css-tricks.com/crashing-mobile-webkit/)

在我的情况下，添加单个输入控件或按钮足以可靠地触发问题。

您的帖子和链接非常有帮助。我要看看我是否不能剥离我的 CSS 来减轻这个错误。

# unity3d - 刚体和碰撞。接触

> ID：11100996
> 
> 赞同：1
> 
> 时间：2012-06-19T12:32:18.120
> 
> 标签：unity3d, collision

我正在尝试再次为 2.5D 平台游戏重新发明轮子。

我用 CharacterController 尝试了一些事情，但它只发送“侧面”信息，而不是它是否特别向左或向右碰撞。

所以现在我正在使用 RigidBody 和 OnCollisionEnter() 函数

所以事情是，碰撞返回的所有点。联系人似乎有一些优先级。这是我在游戏中拥有的

*   绿色框是 BoxColider
*   红色立方体是`collision.contacts`刚体碰撞时返回的接触点

![在此处输入图像描述](../Images/9bf69b6a8dbd905a80e4bd502c018cd4.png)

正如你所看到的，如果我碰一堵墙，所有的接触点都在盒子的“地面”一侧。

如果我跳：

![在此处输入图像描述](../Images/94fe03d41a0853f16f36930c4f407f88.png)

我有一点需要它们（这里是左侧），因为在空中。但是一旦我触地，我就会从返回的数组中丢失所有左/右点。所有点都回到我们在第一个屏幕截图中看到的内容。

因此，当 Box 的侧面（特别是左侧或右侧）被触摸时，我一无所知。

任何想法 ？还是更好的方法？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:28:07.437

我想你可以试着用

```
OnCollisionStay() 
```

获取所有联系点。来自[http://unity3d.com/support/documentation/ScriptReference/CharacterController.html](http://unity3d.com/support/documentation/ScriptReference/CharacterController.html)

# python - Django / Python中的自动增量字段

> ID：11100997
> 
> 赞同：1
> 
> 时间：2012-06-19T12:32:18.740
> 
> 标签：python, django, postgresql

我在 django 应用程序中有一个表，其中一个字段称为 Order（按排序顺序）并且是一个整数。每次输入新记录时，该字段都会自动递增到下一个数字。我的问题是，当一条记录被删除时，我希望其他记录向上移动一个数字，并且找不到任何可以重新计算表中所有记录并在删除记录时将它们向上移动一个数字的东西。

例如，表中有 5 条记录，其中订单号分别为 1、2、3、4 和 5。有人删除了 2 号记录，现在我希望将 3、4 和 5 号向上移动以获取已删除的 2 号记录放置所以订单号现在将是 1、2、3 和 4。python、postgres 和 django 有可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:36:02.097

您将不得不自己实现该功能，我非常怀疑关系数据库是否会为您做到这一点，并且有充分的理由：这意味着在删除一行时更新潜在的大量行。

你确定你需要这个吗？它可能会变得昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T14:58:38.147

这是我最终使用的：

```
item.delete()
items = table.objects.order_by('order')
count =0
for element in items:
  element.order = count
  element.save()
  count=count+1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:19:52.583

您最好将表中的值单独保留并使用查询来生成编号。如果您准备编写一些 SQL，则可以使用窗口函数来执行此操作。

```
SELECT
   output_column,
   ...,
   row_number() over (
     order by
       order_column)
FROM
  TheTable; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:39:12.100

而不是删除订单 - 您应该创建一个布尔字段（您可以随意调用它 - 例如，`deleted`）并将该字段设置`1`为“已删除”订单。

弄乱一个串行字段（这是您在 postgres 中调用的自动增量字段）将在以后导致问题；特别是如果您有外键和与表的关系。

它不仅会影响数据库服务器的性能；它也会影响您的业务，因为最终您将有两个具有相同订单号的订单浮动；即使您已经从数据库中“删除”了一个，订单号也可能已经在其他地方被引用——比如在您为客户打印的收据中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:40:45.320

您可以尝试使用[信号](https://docs.djangoproject.com/en/1.4/topics/signals/)post_save 和 post_delete 来查询适当的对象，对它们进行排序，然后查找丢失的数字并根据需要重新分配/保存。这对于大量数据来说可能非常繁重，但对于很少更改的少数项目来说，这还可以。

```
from django.db.models.signals import post_delete
from django.dispatch import receiver

def fix_order(sorted_objects):
    #ensures that the given objects have sequential order values from 1 upwards
    i = 1
    for item in sorted_objects
        if item.order != i:
            item.order = i
            item.save()
        i += 1

@receiver(post_delete, sender=YourSortedModel)
def update_order_post_delete(sender, kwargs):
    #get the sorted items you need
    sort_items = YourSortedModel.objects.filter(....).order_by('order')
    fix_order(sort_items) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T19:18:57.643

我在寻找其他东西时遇到了这个问题，并想指出一些事情：

通过将顺序存储在与数据相同的表中的字段中，您会失去数据完整性，或者如果您对它进行索引，如果您遇到冲突，事情会变得非常复杂。换句话说，很容易有一个错误（或其他东西）给你两个 3，一个缺失的 4，并且可能发生其他奇怪的事情。我继承了一个对应用程序至关重要的手动排序顺序的项目（还有其他问题），这一直是一个问题，只有 200-300 个项目。

处理手动排序顺序的正确方法是使用单独的表来管理它并使用连接进行排序。这样，您的 Order 表将正好有 10 个条目，其中只有 PK（订单号）和与要排序的项目 ID 的外键关系。已删除的项目将不再有参考。

您可以继续对删除进行排序，类似于您现在的操作方式，您只需将 Order 模型的 FK 更新为列表，而不是遍历和重写您的所有项目。效率更高。

这将轻松扩展到数百万个手动排序的项目。但是，您不想使用自动递增的整数，而是希望在您想要放置它的两个项目之间为每个项目提供一个随机订单 ID，并保持足够的空间（几十万应该这样做），这样您就可以任意重新-对它们进行排序。

我看到你提到你这里只有 10 行，但是第一次设计你的架构就可以很好地扩展，作为一种实践，这会让你在以后头疼，一旦你习惯了它，它就赢了真的不会再花时间了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-19T12:34:20.333

尝试`sequence`使用 pgadmin 在 postgres 中设置类型的值。

# facebook-comments - Facebook 评论有时无法加载

> ID：11100998
> 
> 赞同：2
> 
> 时间：2012-06-19T12:32:34.040
> 
> 标签：facebook-comments

我恳请您告知为什么 Facebook 评论有时不会出现在我的网站上。

我使用从 Facebook 开发者网站生成的标准代码。

请注意，评论框位于彩色框下方。通常，它会在重新加载页面后出现。真实站点示例：

[http://wakemovies.com/?ND201206190204](http://wakemovies.com/?ND201206190204)

[http://wakemovies.com/?BL201206190157](http://wakemovies.com/?BL201206190157)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:45:18.000

如果我没记错的话，Facebook 评论需要对停靠类型进行一些自定义，它们有特殊的格式。您应该将此行添加到您的码头类型

```
xmlns:fb="http://www.facebook.com/2008/fbml" 
```

另一件事是，您使用 Facebook 之类的按钮使您的页面超载。考虑到大多数人在他们的浏览器中安装了共享插件，我认为一个绰绰有余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T13:56:40.977

我通过添加延迟 1 秒的 setTimeout 解决了这个问题

例子：

```
setTimeout(function() {
    // Your Facebook Comments JavaScript Code Here
}, 1000); 
```