# StackOverflow 问答 11521000-11521999

# android - 如何以编程方式检查列表视图中的项目？

> ID：11521001
> 
> 赞同：0
> 
> 时间：2012-07-17T10:53:13.973
> 
> 标签：android

我在我的应用程序中使用列表项。我正在使用适配器：

```
adapter adapter = new ArrayAdapter<Settingsmodel>(this,
                android.R.layout.simple_list_item_checked, listItems); 
```

在那我想手动检查所选列表项的刻度线。我搜索了很多。找不到办法。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:24:32.067

每次单击 CustomAdapter 中的复选框时，您都可以使用列表并添加标签。

```
CheckBox chkbox= (CheckBox)view.findViewById(R.id.checkBox1);

            chkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(
                        CompoundButton buttonView, boolean isChecked) {
                    isSelected.set(position, isChecked);
                }
            });
Where isSelected is     private List<Boolean> isSelected= new ArrayList<Boolean>(); 
```

您可以通过分析 isSelected 列表在以下 while 循环中完成所有工作

```
while(isSelected.contains(true))
            {
                int pos=isSelected.indexOf(true);
                isSelected.set(pos, false);
                sendMail.add(listMap.get(pos).get("email"));

                //                  if(listMap.get(pos).get("email_2")!=null){
                //                      sendMail.add(listMap.get(pos).get("email_2"));
                //                  }
                //                  if(listMap.get(pos).get("email_3")!=null){
                //                      sendMail.add(listMap.get(pos).get("email_3"));
                //                  }

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:17:06.773

创建自己的适配器....

```
public class SettingsmodelAdapter extends ArrayAdapter<Settingsmodel>
{
    .....

    public final View getView(final int position, final View convertView, final ViewGroup parent)
    {
        final View row = super.getView(position, convertView, parent);
        final CheckBox checkBox = (CheckBox) row.findViewById(android.R.id.checkbox);
        checkBox.setChecked(your value);
        .....
    }
    .....
} 
```

# css - CSS：图像透明度键

> ID：11521004
> 
> 赞同：3
> 
> 时间：2012-07-17T10:53:28.227
> 
> 标签：css, image, image-processing

我想知道这在纯 CSS 中是否可行。假设您有一张白色背景的图像。是否有一个 CSS 属性可以从图像中删除指定的颜色并使其透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:00:44.817

没有 Alireza，恐怕用 css 是不可能的。

# objective-c - 仅针对 Instruments 中的系统库显示内存泄漏

> ID：11521005
> 
> 赞同：2
> 
> 时间：2012-07-17T10:53:30.710
> 
> 标签：objective-c, ios, memory-leaks, instruments

没有“选择隐藏系统库”的内存泄漏快照- ![记忆仪器快照 1](../Images/eee94ebdbaf9cdd73bfd705858ad0eba.png)

带有“选择隐藏系统库”的内存泄漏快照- ![隐藏系统库后的 Memory Instruments 快照 2](../Images/39415400993c966dc0e264e7c64db312.png)

我是否需要担心这些泄漏，因为经过许多内存周期后，我已经到了这一点，在我的应用程序中找不到内存泄漏源。我的理解还好吗？

这张图片显示了循环和根模式下的内存泄漏 - ![根循环模式](../Images/5a4b492d3e56db850b67a28a5700065f.png)

# php - PHP - file_put_contents() 不在输出中保留文件名

> ID：11521006
> 
> 赞同：1
> 
> 时间：2012-07-17T10:53:35.267
> 
> 标签：php, file, compression, gzip

我想在我的服务器上压缩一个 .csv 文件并使用 PHP 将其放入 .gz (gzip) 文件中。

我使用了`file_put_contents()，如下所示：

```
$input = "test.csv";
$output = $input.".gz";

file_put_contents("compress.zlib://$output", file_get_contents($input)); 
```

但是，当我打开 gzip 文件（使用 winrar / 7zip）时，.gz 存档中缺少文件扩展名；它只是“**测试**”（没有文件扩展名）？

它没有像我想要的那样显示“ **test.csv ”。**如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:58:50.157

让我们试试这个。，

```
$input = "test.txt";
exec("gzip ".$input); 
```

它将在linux服务器上运行...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:59:42.433

我不确定您要问什么，但 PHP 已经有一个 gzip 压缩功能[gzencode](http://www.php.net/manual/en/function.gzencode.php)。

像这样使用它

```
<?php
    $data = implode("", file("bigfile.txt"));
    $gzdata = gzencode($data, 9);
    $fp = fopen("bigfile.txt.gz", "w");
    fwrite($fp, $gzdata);
    fclose($fp);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:06:30.113

您的示例至少在 PHP 5.3.10 上正常工作：

```
-rw-rw-r-- 1 mats mats  8 Jul 17 13:05 test.csv
-rw-rw-r-- 1 mats mats 31 Jul 17 13:05 test.csv.gz 
```

您没有在资源管理器/导航器中隐藏已知文件类型的文件扩展名？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T11:30:49.617

该压缩文件中没有关于任何“文件名”的信息。您只是压缩输入文件的原始二进制数据并将其转储到输出文件中。.gz 文件没有关于其中包含多少文件或它们的名称的元信息。这就是[TAR](http://en.wikipedia.org/wiki/Tar_%28file_format%29)文件格式的用途，提供这种元信息。您应该制作一个 tarball，然后使用 gz 将其压缩为 .tar.gz。

除了通过`exec`.
您可能希望将[ZIP](http://php.net/manual/en/book.zip.php)视为具有原生 PHP 支持的替代方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T17:57:22.633

这对我有用：

```
$input = "test.csv";
$output = $input.".xml.gz"; 
```

我知道这很丑，但是当使用 gzopen 和 gzwrite 时，我发现这是在存档中保留 xml 扩展名的唯一方法。这样，当我提取它时，我得到了 xml 文件。

稍后，一旦创建文件，您可以重命名它以删除扩展名 [.gz] 之前的 [.xml]

# java - 在 Java 中使用省略号来表示可选参数是个好主意吗？

> ID：11521009
> 
> 赞同：0
> 
> 时间：2012-07-17T10:53:41.560
> 
> 标签：java, ellipsis

我想知道使用省略号表示可选参数是否是个好主意？

```
public void update(Object object, boolean... checkFirst)
{
    if (checkFirst[0])
    {
        ...
    } //if
} //update 
```

我正在使用连接到没有主键以允许多次插入的数据库表的代码（遗留代码，所以请原谅这里的任何不良实践想法）。因此，我认为我可以使用省略号来实现相同的效果，而不是使用两种方法（重载）。但你认为这是一种可怕的做法吗？

干杯，

阿列克谢蓝。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T11:13:53.057

省略号的正确术语是[varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。Varargs 允许开发人员传递可变数量的参数。

**使用可变参数提供一个**可选参数不是一个好主意。最好使用下面的代码示例中的[重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)。

```
public void update(Object object)
{
    update(update, false);
}

public void update(Object object, boolean check)
{
    if (check)
    {
        ...
    } //if
} 
```

这样，开发人员无法传入多个布尔值，但可以不传入任何值。

# javascript - 将类属性设置为元素不适用于 javascript 和 jquery？

> ID：11521010
> 
> 赞同：0
> 
> 时间：2012-07-17T10:53:42.710
> 
> 标签：javascript, jquery, jquery-ui

我有以下几行代码：

jQuery

```
$(".datepicker").datepicker({
    showOn: "button",
    buttonImage: "images/calendar.gif",
    buttonImageOnly: true,
    dateFormat: "MM d, yy",
    changeMonth: true,
    changeYear: true
}); 
```

Javascript

```
var element1 = document.createElement("input");
element1.type = "text";
element1.setAttribute("class", "datepicker"); 
```

假设我在 javascript 中创建的元素必须是 datepicker，所以我将其类设置为 jQuery 代码中定义的“datepicker”。但这东西行不通。

任何可能的解决方案？设置在 css 中定义的类对我有用，但是这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:00:03.480

```
$(document).append($('<input/>', {
  'class': 'datepicker',
   type: 'text'
})).on('click', function() {
  $(this).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        dateFormat: "MM d, yy",
        changeMonth: true,
        changeYear: true
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:55:47.217

只要 jQuery 代码*在*您的元素被创建**并附**加到 DOM 之后运行，您正在做的事情应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:22:15.183

为什么不为此使用 jQuery？

```
$('input').addClass('datepicker'); 
```

# html - 为什么基本标签不适用于相对路径？

> ID：11521011
> 
> 赞同：65
> 
> 时间：2012-07-17T10:53:43.607
> 
> 标签：html, tags, base

我在页面部分 有一个`<base>`如下标签：`<head>`

```
<base href="http://localhost/framework"> 
```

下面是一个相对的脚本（当然是在 之后`<base>`）：

```
<script src="/assets/jquery-1.7.1.min.js"> 
```

但是当我从 firebug 打开 jQuery 时，它显示：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>404 Not Found</title>
</head><body> 
Blah Blah Blah.... 
```

当我使用以下链接时，它没关系：

```
<script src="http://localhost/framework/assets/jquery-1.7.1.min.js"> 
```

我到处寻找答案，但似乎我做对了！那么问题是什么？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-07-17T10:55:38.863

`/assets/jquery-1.7.1.min.js`不是相对的，而是绝对的*，`/`即使带有`base`标签，也会将其带到根目录。

如果你删除它`/`，它应该使它相对于当前路径，当`base`标签存在时，它会是`http://localhost/framework/`.

**注意：**您还需要在 末尾添加一个尾随`/`，`href`以表明它是一个文件夹。

完整的工作示例：

```
<!doctype html>
<html>
<head>
<base href="/test/" />
<script src="assets/test.js"></script>
<body>
hi
</body>
</html> 
```

`*`实际上取决于你问的是谁，它仍然是相对的，因为它与当前域无关。但我更喜欢称它为绝对，因为它表示路径来自根，基于当前域。虽然，我想从技术上讲，这使得它在宏伟的计划中是相对的，而仅就当前领域而言是绝对的。任何。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-17T10:59:24.070

尝试使用您的基本标签，例如：

```
<base href="http://localhost/framework/"> 
```

和你的脚本标签，如：

```
<script src="assets/jquery-1.7.1.min.js"> 
```

# java - 从对象列表中分离子列表

> ID：11521015
> 
> 赞同：0
> 
> 时间：2012-07-17T10:53:47.903
> 
> 标签：java, list, collections

我有一个类似物品（比如玩具）的数组列表，我每天都会得到这些物品。

```
List<Toy> toyList; 
```

玩具豆将有四个属性，分别是名称、类型、代码、编号。

*   代码可以是从 1 到 10 的任何整数（不需要我每天都得到所有代码）
*   类型可以是字符串“一”或字符串“二”

我想输出一份总结玩具类型和代码的报告，如下所示：

```
One

name     type    number
--------------------------------
abc      1       19
pqr      1       20

Code 1 total     39

lmn      9       15

Code 9 total     15  

========================================  

Two

name     type    number
--------------------------------
hmn      6       18
efg      6       20

Code 6 total     38

jkl      5       15

Code 5 total     15 
```

为了从我拥有的列表中轻松创建这样的报告，我必须将列表分为两个级别：首先基于类型（一和二），然后基于今天可用的代码（并非所有代码每天都可用） .

实现这一目标的最有效方法是什么？

我可以通过迭代主列表并创建子列表来实现它。但是如何处理所有代码将不会每天可用的部分？如何仅为今天可用的代码创建子列表？

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:56:05.023

您可以遍历所有玩具并获取`Set`类型、代码等。您可能希望将其设为 SortedSet，以便它们以一致的顺序出现。

```
Set<Type> types = EnumSet.noneOf(Type.class);
SortedSet<String> codes = new TreeSet<String>();
for(Toy toy: toys) {
   types.add(toy.getType());
   codes.add(toy.getCode());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:19:25.063

查看 Lambdaj 库[分组功能](http://code.google.com/p/lambdaj/wiki/LambdajFeatures)（滚动到分组项目部分）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:29:14.227

您可以尝试使用这些库中的任何一个：

*   [Apache Commons -](http://apachecommonstipsandtricks.blogspot.in/2009/01/examples-of-functors-transformers.html)用于过滤值集合的谓词功能

*   [谷歌番石榴](https://code.google.com/p/guava-libraries/wiki/GuavaExplained)

*   [j过滤器](http://code.google.com/p/jfilter/)

# c++ - 缩小从无符号到双精度的转换

> ID：11521016
> 
> 赞同：42
> 
> 时间：2012-07-17T10:54:01.757
> 
> 标签：c++, c++11, warnings, double, type-conversion

```
static_assert(sizeof(unsigned) == 4, ":(");
static_assert(sizeof(double) == 8 ,":(");
unsigned u{42};
double x{u}; 
```

g++ 4.7.1 抱怨这段代码：

```
warning: narrowing conversion of 'u' from 'unsigned int' to 'double' inside { } 
```

为什么这是一个缩小转换？不是每个都可以`unsigned`完美地表示为`double`吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-17T11:02:12.570

> 为什么这是一个缩小转换？

因为定义包括（我强调）：

> **C++11 8.5.4/7***窄化转换*是从整数类型 [...] 到浮点类型的隐式转换 [...]，但**源是常量表达式**和后面的实际值除外转换将适合目标类型，并在转换回原始类型时生成原始值。

`u`不是常量表达式，因此无论源类型的所有可能值是否都可以在目标类型中表示，这都是一种缩小转换。

> 不是每个都可以`unsigned`完美地表示为`double`吗？

那是定义的实现。在 32 位`unsigned`和`double`52 位尾数的常见情况下，就是这样；但是某些实现具有更大`unsigned`和/或更小的`double`表示形式，因此依赖于该假设的代码不可移植。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T11:01:37.467

您收到的警告是因为您使用非常量表达式初始化 x

```
Ilyas-iMac:TestC++11 sandye51$ cat main.cpp                   
int main()
{
    static_assert(sizeof(unsigned) == 4, ":(");
    static_assert(sizeof(double) == 8 ,":(");
    constexpr unsigned u{42};
    double x{u};

    return 0;
}Ilyas-iMac:TestC++11 sandye51$ gcc -o main main.cpp -std=c++11
Ilyas-iMac:TestC++11 sandye51$ 
```

如您所见，上面的代码可以正常工作，没有任何警告或错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:01:41.933

（让我们试试看：）`double`正好有 52 位有效（二进制）数字（根据 ieee 标准），而`unsigned int`在其他一些系统上可能有很好的 64 位。因此`unsigned int`，您系统上的实际宽度可能对此检查没有任何价值。

# maven - Maven 在可执行 Jar 中包含依赖项

> ID：11521017
> 
> 赞同：0
> 
> 时间：2012-07-17T10:54:04.497
> 
> 标签：maven, maven-2, jar-signing

我是新手`Maven`...

试图创建一个简单的`applet`.

1.  包括`applet`. 为此，我尝试过：

    ```
     <repository>
     <id>lib</id>
     <name>lib</name>
     <releases>
     <enabled>true</enabled>
     <checksumPolicy>ignore</checksumPolicy>
     </releases>
     <snapshots>
      <enabled>false</enabled>
     </snapshots>
     <url>file://${project.basedir}/lib</url>
     </repository> 
    ```

    我将这些文件包含在`lib`我的项目结构下的文件夹中。这个库包含几个`jar`文件和一个`JNI dll`我需要在我的`applet`. 有没有`repository`比上述更好的创作方式，欢迎分享？

2.  打包`jar`带有依赖项的小程序。为此，我尝试过：

    ```
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>      
    <executions>
    <execution>
    <id>jar-with-dependencies</id>
    <phase>package</phase>
    <goals>
      <goal>single</goal>
    </goals>       
    <configuration>                 
    <descriptorRefs>
      <descriptorRef>jar-with-dependencies</descriptorRef>
    </descriptorRefs>
    </configuration> 
    ```

我希望上面将我的依赖项包装成一个单一`jar`的，但事实并非如此。生成的`jar`文件大小不包含依赖`jar`文件。（我可以说因为文件的大小**保持**`jar`不变，无论`jars`是否有依赖项都是相同的）

我是否以正确的方式做事`Maven`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:26:24.510

看看[shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/ "阴影插件")，这个插件创建可执行的“uber jar”，或者如果你真的需要一些非常复杂的[程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/ "组装插件")。

# java - 如何连接几个不同格式的字符串然后拆分它们

> ID：11521022
> 
> 赞同：0
> 
> 时间：2012-07-17T10:54:21.920
> 
> 标签：java, string, split, concat

大家好。
我想在java中连接一些没有指定格式的字符串。例如，我想连接多个对象，如签名和 BigInteger 和字符串，所有这些对象都转换为字符串。所以我不能使用指定的分隔符，因为每个分隔符都可能存在于这些字符串中。我如何连接这些字符串然后拆分它们？
谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:59:03.803

使用定义明确的格式，例如 XML 或 JSON。或者选择一个分隔符并转义每个字符串中此分隔符的每个实例。或者在消息中添加每个部分的长度。例如：

```
10/7/14-<10 chars of signature><7 chars of BigInteger><14 chars of string> 
```

或者

```
10-<10 chars of signature>7-<7 chars of BigInteger>14-<14 chars of string> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:26:21.790

您可以转义字符串中的分隔符。例如，假设您有以下字符串：

```
String a = "abc;def";
String b = "12345:";
String c = "99;red:balloons"; 
```

你希望能够做这样的事情

```
String concat = a + delim + b + delim + c;
String[] tokens = concat.split(delim); 
```

但是，如果我们`";"`的定界符很明显，这还不够，因为我们将有 5 个标记，而不是 3 个。我们可以使用一组可能的定界符，在字符串中搜索那些定界符，然后使用第一个不是的定界符在目标字符串中，但这有两个问题。首先，我们如何知道使用了哪个分隔符？其次，如果字符串中存在所有分隔符怎么办？这不是一个有效的解决方案，而且它肯定不健壮。

我们可以通过使用转义分隔符来解决这个问题。让我们`":"`用作我们的转义分隔符。我们可以用它来表示“下一个字符只是一个普通的旧字符，它并不意味着任何重要的东西。”

所以如果我们这样做：

```
String aEscaped = a.replace(";",":;");
String bEscaped = b.replace(";",":;");
String cEscaped = c.replace(";",":;"); 
```

然后，我们可以像这样拆分连接的字符串

```
String tokens = concat.split("[^:];") 
```

但是有一个问题：如果我们的文本实际上包含`":;"`或以 结尾`":"`怎么办？无论哪种方式，这些都会产生误报。在这种情况下，我们还必须转义我们的转义字符。它基本上说的和以前一样：“下一个角色没有什么特别的。”

所以现在我们的转义字符串变成了：

```
// note we escape our escape token first, otherwise we'll escape 
// real usages of the token
String aEscaped = a.replace(":","::").replace(";",":;");
String bEscaped = b.replace(":","::").replace(";",":;");
String cEscaped = c.replace(":","::").replace(";",":;"); 
```

现在，我们必须在正则表达式中说明这一点。如果有人知道适用于此的正则表达式，他们可以随时对其进行编辑。我发生的事情类似于`concat.split("(::;|[^:];)")`，但似乎并没有完成工作。解析它的工作将非常容易。我为它拼凑了一个小型测试驱动程序，它似乎工作得很好。

[在http://ideone.com/wUlyz](http://ideone.com/wUlyz)找到的代码

结果：

```
abc;def becomes abc:;def
ja:3fr becomes ja::3fr
; becomes :;
 becomes 
: becomes ::
83;:;:;;;; becomes 83:;:::;:::;:;:;:;
:; becomes :::;
Final product:
abc:;def;ja::3fr;:;;;::;83:;:::;:::;:;:;:;;:::;
Expected 'abc;def', Actual 'abc;def', Matches true
Expected 'ja:3fr', Actual 'ja:3fr', Matches true
Expected ';', Actual ';', Matches true
Expected '', Actual '', Matches true
Expected ':', Actual ':', Matches true
Expected '83;:;:;;;;', Actual '83;:;:;;;;', Matches true
Expected ':;', Actual ':;', Matches true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:59:33.697

您可以使用连接运算符 ( `+`) 进行连接，如下所示：

```
String str1 = "str1";
String str2 = "str2";
int inte = 2;

String result = str1+str2+inte; 
```

但是要再次拆分它们，您需要一些特殊字符作为分隔符，因为 String 中的拆分函数适用于分隔符。

# maven - 使用 maven 生成 struts2-archetype-blank 项目后，出现构建错误

> ID：11521024
> 
> 赞同：-1
> 
> 时间：2012-07-17T10:54:26.337
> 
> 标签：maven, struts2, archetypes

我正在使用 Eclipse、M2E 插件、Maven3 进行 Web 开发。

我正在尝试使用他们的 struts2-archetype-blank 创建基本的 struts2 项目：

```
mvn archetype:generate -B -DgroupId=tutorial \
  -DartifactId=tutorial \
  -DarchetypeGroupId=org.apache.struts \
  -DarchetypeArtifactId=struts2-archetype-blank \
  -DarchetypeVersion=2.3.4 
```

所以我收到了这个错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:testCompile (default-testCompile) on project GetVsPostTest: Compilation failure
[ERROR] /code/tutorial/src/test/java/tutorial/example/ConfigTest.java:[65,28] cannot find symbol
[ERROR] symbol  : method addConfigurationProvider(com.opensymphony.xwork2.config.providers.XmlConfigurationProvider)
[ERROR] location: class com.opensymphony.xwork2.config.ConfigurationManager 
```

在 ConfigTest.java 的这一行：

```
configurationManager.addConfigurationProvider(c); 
```

![在此处输入图像描述](../Images/35a5b8f10105f2bc6b0979fe6dc57283.png) 有人可以告诉我出了什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:45:54.537

至少对于 2.3.3 和 2.3.4，struts2-archetype-blank 中似乎存在一个错误。您可以在 ConfigTest.java 中更改此行：

```
configurationManager.addConfigurationProvider(c); 
```

对此：

```
configurationManager.addContainerProvider( c ); 
```

它应该可以工作。

仅供参考 - 我为此提交了一个错误：[https ://issues.apache.org/jira/browse/WW-3864](https://issues.apache.org/jira/browse/WW-3864)

# java - DataOutputStream 和 ObjectOutputStream 有什么区别？

> ID：11521027
> 
> 赞同：22
> 
> 时间：2012-07-17T10:54:39.900
> 
> 标签：java, android, sockets

我正在学习 Java 中的套接字编程。我已经看到客户端/服务器应用程序示例，其中一些 using`DataOutputStream`和一些 using `ObjectOutputStream`。

两者有什么区别？

有性能差异吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-17T11:01:02.823

DataInput/OutputStream 通常表现更好，因为它更简单。它只能读/写原始类型和字符串。

ObjectInput/OutputStream 可以读/写任何对象类型以及原语。如果您想发送复杂的数据，它的效率较低但更易于使用。

我会假设 Object*Stream 是最佳选择，直到您*知道*它的性能是一个问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-17T09:47:57.163

这可能对几年后仍在寻找答案的人有用......根据我在最近的 JVM (1.8_51) 上的测试，这比读取/写入大量 double 数组`ObjectOutput/InputStream`快了近 2 倍！`DataOutput/InputStream`

下面是写入 1000 万个项目数组的结果（对于 100 万个结果基本相同）。为了完整起见，我还包括了文本格式（BufferedWriter/Reader）：

```
TestObjectStream written 10000000 items, took: 409ms, or 24449.8778 items/ms, filesize 80390629b
TestDataStream written 10000000 items, took: 727ms, or 13755.1582 items/ms, filesize 80000000b
TestBufferedWriter written 10000000 items, took: 13700ms, or 729.9270 items/ms, filesize 224486395b 
```

阅读：

```
TestObjectStream read 10000000 items, took: 250ms, or 40000.0000 items/ms, filesize 80390629b
TestDataStream read 10000000 items, took: 424ms, or 23584.9057 items/ms, filesize 80000000b
TestBufferedWriter read 10000000 items, took: 6298ms, or 1587.8057 items/ms, filesize 224486395b 
```

我相信 Oracle`ObjectStream`在最近的 Java 版本中已经为使用 s 对 JVM 进行了大量优化，因为这是写入/读取数据（包括序列化）的最常见方式，因此位于 Java 性能关键路径上。

所以看起来今天没有太多理由再使用`DataStream`s 了。“不要试图智取 JVM”，用最直接的方式，就是`ObjectStream`s :)

这是测试的代码：

```
class Generator {
    private int seed = 1235436537;
    double generate(int i) {
        seed = (seed + 1235436537) % 936855463;
        return seed / (i + 1.) / 524323.;
    }
}

class Data {
    public final double[] array;
    public Data(final double[] array) {
        this.array = array;
    }
}

class TestObjectStream {
    public void write(File dest, Data data) {
        try (ObjectOutputStream out = new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(dest)))) {
            for (int i = 0; i < data.array.length; i++) {
                out.writeDouble(data.array[i]);
            }
        } catch (IOException e) {
            throw new RuntimeIoException(e);
        }
    }
    public void read(File dest, Data data) {
        try (ObjectInputStream in = new ObjectInputStream(new BufferedInputStream(new FileInputStream(dest)))) {
            for (int i = 0; i < data.array.length; i++) {
                data.array[i] = in.readDouble();
            }
        } catch (IOException e) {
            throw new RuntimeIoException(e);
        }
    }
}

class TestDataStream {
    public void write(File dest, Data data) {
        try (DataOutputStream out = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(dest)))) {
            for (int i = 0; i < data.array.length; i++) {
                out.writeDouble(data.array[i]);
            }
        } catch (IOException e) {
            throw new RuntimeIoException(e);
        }
    }
    public void read(File dest, Data data) {
        try (DataInputStream in = new DataInputStream(new BufferedInputStream(new FileInputStream(dest)))) {
            for (int i = 0; i < data.array.length; i++) {
                data.array[i] = in.readDouble();
            }
        } catch (IOException e) {
            throw new RuntimeIoException(e);
        }
    }
}

class TestBufferedWriter {
    public void write(File dest, Data data) {
        try (BufferedWriter out = new BufferedWriter(new FileWriter(dest))) {
            for (int i = 0; i < data.array.length; i++) {
                out.write(Double.toString(data.array[i]));
                out.newLine();
            }
        } catch (IOException e) {
            throw new RuntimeIoException(e);
        }
    }
    public void read(File dest, Data data) {
        try (BufferedReader in = new BufferedReader(new FileReader(dest))) {
            String line = in.readLine();
            int i = 0;
            while (line != null) {
                if(!line.isEmpty()) {
                    data.array[i++] = Double.parseDouble(line);
                }
                line = in.readLine();
            }
        } catch (IOException e) {
            throw new RuntimeIoException(e);
        }
    }
}

@Test
public void testWrite() throws Exception {
    int N = 10000000;
    double[] array = new double[N];
    Generator gen = new Generator();
    for (int i = 0; i < array.length; i++) {
        array[i] = gen.generate(i);
    }
    Data data = new Data(array);

    Map<Class, BiConsumer<File, Data>> subjects = new LinkedHashMap<>();
    subjects.put(TestDataStream.class, new TestDataStream()::write);
    subjects.put(TestObjectStream.class, new TestObjectStream()::write);
    subjects.put(TestBufferedWriter.class, new TestBufferedWriter()::write);

    subjects.forEach((aClass, fileDataBiConsumer) -> {

        File f = new File("test." + aClass.getName());

        long start = System.nanoTime();
        fileDataBiConsumer.accept(f, data);
        long took = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - start);

        System.out.println(aClass.getSimpleName() + " written " + N + " items, took: " + took + "ms, or " + String.format("%.4f", (N / (double)took)) + " items/ms, filesize " + f.length() + "b");
    });
}

@Test
public void testRead() throws Exception {
    int N = 10000000;
    double[] array = new double[N];
    Data data = new Data(array);

    Map<Class, BiConsumer<File, Data>> subjects = new LinkedHashMap<>();
    subjects.put(TestDataStream.class, new TestDataStream()::read);
    subjects.put(TestObjectStream.class, new TestObjectStream()::read);
    subjects.put(TestBufferedWriter.class, new TestBufferedWriter()::read);

    subjects.forEach((aClass, fileDataBiConsumer) -> {
        File f = new File("test." + aClass.getName());

        long start = System.nanoTime();
        fileDataBiConsumer.accept(f, data);
        long took = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - start);

        System.out.println(aClass.getSimpleName() + " read " + N + " items, took: " + took + "ms, or " + String.format("%.4f", (N / (double)took)) + " items/ms, filesize " + f.length() + "b");
    });
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-17T11:01:10.920

`DataOutputStream`and `ObjectOutputStream`: 在处理基本类型时，除了创建的标头之外没有区别`ObjectOutputStream`。

使用`ObjectOutputStream`该类，实现的类的实例`Serializable`可以写入输出流，并且可以使用`ObjectInputStream`.

`DataOutputStream`只能处理基本类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T11:02:25.457

只有实现`java.io.Serializable`接口的对象才能使用`ObjectOutputStream`.Primitive 数据类型写入流，也可以使用 DataOutput 中的适当方法将其写入流。也可以使用 writeUTF 方法写入字符串。但`DataInputStream`另一方面，允许应用程序以可移植的方式将**原始 Java 数据类型**写入输出流。

[对象输出流](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)

[数据输入流](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInputStream.html)

# javascript - 如何检测（所有）鼠标点击？

> ID：11521028
> 
> 赞同：2
> 
> 时间：2012-07-17T10:55:12.377
> 
> 标签：javascript, event-handling, click

我使用这样的代码来捕捉用户的点击：

```
Event.observe(document, 'click',function(e){
    var x = Event.pointerX(e);
    var y = Event.pointerY(e);
    //exec data storage over ajax
} 
```

问题是当用户单击某个链接时，下一个函数没有时间完全执行，并且在重定向到单击的链接之前我无法保存单击数据。

我看到了一些 jquery[实现](https://stackoverflow.com/questions/3056875/catch-intercept-all-mouse-clicks)，但我不使用 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:56:56.563

如果您必须在重定向之前执行一个函数，您需要覆盖链接的默认操作，一旦您的函数完成执行，然后手动调用重定向。

我猜它是重定向之前需要完成的ajax？如果是这样，那么您需要在 ajax 的回调函数中添加重定向。

# c - 如何在没有指数的情况下显示双倍？

> ID：11521030
> 
> 赞同：0
> 
> 时间：2012-07-17T10:55:26.100
> 
> 标签：c, printf

我正在打印一个双倍计时器的输出。

我得到**1.84e-308**作为输出。

我正在打印`printf("Time: %4.3g\n",tm.getTime());`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:56:31.147

你试过使用`%f`吗？

```
printf("Time: %4.3f\n",tm.getTime()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:47:41.513

`printf("Time: %400.399f\n",tm.getTime())`

是的？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T11:13:10.960

在这里，您必须将数据类型格式更改为双精度。编写代码如下所述：

> **printf("时间: %4.3g\n",tm.getTime(double_variable))**

你可以从上面的编码中得到 1.84e-308。

# c++ - 如何在禁用的 MFC CEdit 控件中显示插入符号？

> ID：11521033
> 
> 赞同：2
> 
> 时间：2012-07-17T10:55:33.630
> 
> 标签：c++, windows, mfc, cedit

如果编辑控件被禁用，插入符号就会消失。在这种情况下，如果编辑显示的是长文本，则无法看到其余的单词。使用插入符号 i，我们可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:05:45.473

我认为您必须使用启用的只读编辑控件而不是禁用的。

在编辑框属性窗口中勾选“只读”或`ES_READONLY`在调用时使用`Create`。另外，不要忘记检查*Auto HScroll* ( `ES_AUTOHSCROLL`) （如果多行，则检查*AutoVScroll*）。

```
CEdit* pEdit = new CEdit;
pEdit->Create(ES_MULTILINE | WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER
  | ES_AUTOHSCROLL | ES_READONLY, (10, 10, 100, 100), this, 1); 
```

# html - 在 WebGL 中与 HTML 背景混合

> ID：11521035
> 
> 赞同：5
> 
> 时间：2012-07-17T10:55:45.477
> 
> 标签：html, webgl, alpha, blending

我正在将平面颜色和纹理绘制到 WebGL 画布中。我的颜色和纹理具有不同的 alpha 值，我希望它们能够正确混合。我想要透明背景（它们应该与位于画布下的 HTML 内容混合）。

在 WebGL 中，我使用

```
gl.clearColor(0, 0, 0, 0);
gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
gl.enable(gl.BLEND); 
```

当 HTML 背景为黑色时，它可以正常工作。但是当我将 JPG 图案设置为 的背景时，我绘制黑色三角形 (alpha=1) 和白色三角形 (alpha=0.5)，我可以在三角形相交的地方看到背景图案。这是正确的行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T02:15:20.443

`gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)`意味着得到的 ​​alpha 是

```
A_final = A_s * A_s + (1 - A_s) * A_d 
```

在您的示例中，在绘制黑色三角形（alpha=1）后，帧缓冲区中绘制的像素将具有 alpha

```
1 * 1 + (1 - 1) * 0 == 1 + 0 == 1 
```

所以它将是完全不透明的。接下来，在绘制白色三角形（alpha=.5）后，两个三角形相交处的像素将具有 alpha

```
.5 * .5 + (1 - .5) * 1 == .25 + .5 == .75 
```

这意味着最终颜色将被视为部分透明，并且当它与页面合成时，页面背景将显示出来。

这在常规 OpenGL 中是一个不太常见的问题，因为内容通常是在空背景下合成的。但是，当您绘制到 FBO 并且必须将结果与您的上下文中的其他内容合成时，它确实会出现。有几种方法可以解决这个问题。

一种方法是让你的 alpha 与 混合`gl.ONE`，`gl.ONE_MINUS_SRC_ALPHA`所以你得到

```
A_final = A_s + (1 - A_s) * A_d 
```

这就是你通常想要的 alpha 混合。但是，您希望您的颜色仍然与`gl.SRC_ALPHA`,混合`gl.ONE_MINUS_SRC_ALPHA`。您可以使用[gl.blendFuncSeparate](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glBlendFuncSeparate.xml)而不是分别`gl.blendFunc`设置颜色混合和 alpha 混合功能。在这种情况下，你会打电话

```
gl.BlendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA); 
```

另一种选择是利用带有预乘 alpha 的颜色（[WebGL 实际上已经假设您正在使用它](http://www.khronos.org/registry/webgl/specs/latest/#5.2)，例如，在从纹理中采样颜色时）。如果您绘制第二个三角形，其中 alpha 已经与颜色相乘（因此半透明的白色三角形将`gl_FragColor`设置为`vec4(.5, .5, .5, .5)`），那么您可以使用混合模式

```
gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA) 
```

它会为你想要的颜色和阿尔法。

第二个选项是您在 WebGL 示例中通常会看到的，因为（如前所述）WebGL 已经假设您的颜色是预乘的（所以`vec4(1., 1., 1., .5)`超出了色域，渲染输出未定义，驱动程序/GPU 可以输出任何疯狂的颜色它想要）。在常规的 OpenGL 示例中更常见`gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)`，这会导致一些混乱。

# javascript - connect.facebook.net/en_US/all.js 是做什么的

> ID：11521038
> 
> 赞同：7
> 
> 时间：2012-07-17T10:55:49.667
> 
> 标签：javascript, facebook

我想知道，来自 facebook 的 all.js 将哪些功能添加到点赞按钮？- 我正在尝试实现它，并找到了一个非常好的方法，即使没有加载 all.js 文件，类似的工作也很好，它会被注册和任何东西..

但是有什么我会想念的吗？如果我的页面上只有一个简单的点赞按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T18:51:31.137

如果您只想使用 like 功能，则不需要 all.js。

like 功能非常受欢迎，以至于在您使用的时候有独立的插件。

使用 all.js，您可以做更多事情。例如，在其他人的墙上发布故事或在他们同意的情况下访问他们的个人数据。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-11-16T23:53:18.770

此刻，什么都没有。该站点已关闭或该脚本可能已被移动。

# r - 箱线图（图形）与 bwplot（点阵图）中的公式表示法

> ID：11521041
> 
> 赞同：1
> 
> 时间：2012-07-17T10:56:00.637
> 
> 标签：r, lattice, boxplot

自从我昨天发布了[这个问题](https://stackoverflow.com/q/11495406/1270695)的答案以来，这一直困扰着我。

考虑以下数据：

```
carpaint <- data.frame(paint = c(rep(c("blue", "black", "red"), 
                                     times=3)),
                       car1 = c(100, 138, 123, 143, 112, 
                                144, 343, 112, 334), 
                       car2 = c(111, 238, 323, 541, 328, 
                                363, 411, 238, 313), 
                       car3 = c(432, 123, 322, 342, 323, 
                                522, 334, 311, 452)) 
```

如果我想按颜色生成箱线图（忽略“汽车”的二次分组），我可以轻松地使用`bwplot`from中的公式表示法`lattice`。

```
library(lattice)
bwplot(car1 + car2 + car3 ~ paint, data=carpaint) 
```

![点阵输出](../Images/a0f1275a1ea77697592b292984171c06.png)

`boxplot`但是，要使用from获得类似的绘图`graphics`，公式表示法是不同的，因此我必须先将数据转换为长格式然后绘图，如下所示：

```
carpaint.l = reshape(carpaint, direction="long", varying=2:4, sep="")
boxplot(car ~ paint, data=carpaint.l) 
```

![图形输出](../Images/bdbe34450be2138ef04bb4df79860118.png)

**问题**：有没有办法在不首先重塑数据的情况下使用`boxplot`from获得相同的图`graphics`，最好使用公式表示法？（这忽略了这样一个事实，即这甚至可能不是链接问题的 OP 想要的输出类型——他们仍然没有评论我的答案或@RomanLuštrik 的问题。我只是想满足我的好奇心并学会更好地理解公式符号。）

> > **注意**：绝对欢迎提供替代方案，但我希望任何答案也能帮助我理解为什么某些选项有效而其他选项无效。例如，为什么`boxplot(as.matrix(carpaint[, 2:4]) ~ carpaint$paint)`有效但`boxplot(carpaint[, 2:4] ~ carpaint$paint)`无效。我觉得这很奇怪，因为文档中`boxplot`有一些示例，它们在绘图之前将矩阵转换为数据帧，即使这似乎没有必要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:50:20.603

`carpaint[, 2:4]`是一个列表，而两者`cbind(car1, car2, car3)`都有`as.matrix(carpaint[, 2:4])`一个基础的原子向量表示。boxplot 的帮助页面说 'y' 参数需要是一个数字向量。`boxplot.formula`用途`split`：`boxplot(split(mf[[response]], mf[-response]), ...)`。`grp`参数被回收`split`以匹配响应向量的长度。`split`无法使用 list/data.frame 形式的三个向量来做到这一点。

# javascript - Mongoosejs：如何在没有 Schema 的情况下创建模型？

> ID：11521043
> 
> 赞同：0
> 
> 时间：2012-07-17T10:56:09.613
> 
> 标签：javascript, node.js, mongoose

我找到了这个教程：[http ://dailyjs.com/2010/12/06/node-tutorial-5/](http://dailyjs.com/2010/12/06/node-tutorial-5/)

它使用与构建模型模式略有不同的方法，然后是 mongoosejs.com 文档。

它不会在 mongoose.Schema 的帮助下创建 MongooseModel：

```
var Some = mongoose.model('Some', new mongoose.Schema({
    property: { Type: String }
}), 'Somes'); 
```

但有类似的东西：

```
var Some = mongoose.model('Some', {
    setters: {
        toLowerCase: function(string) {
            return string.toLowerCase();
        }
    }
}, 'Somes'); 
```

我个人对第二种方法的问题较少，并且可以更好地阅读。不幸的是，文档中没有关于这种方法的任何信息......

是否已经有使用这种方式定义猫鼬模型的经验？我在哪里可以找到更多关于的文档？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:58:50.857

嗯，我还没有看到这个符号，从发布日期（2010 年 12 月 6 日）来看，它很可能是完全过时的语法

文档中的相关部分（虽然可能有点稀疏）：http: [//mongoosejs.com/docs/getters-setters.html](http://mongoosejs.com/docs/getters-setters.html)

请注意，这并不意味着您不必再定义您的模式，setter（和 getter）可以在需要的地方扩充模型。

hth

# django - 如何使用另一个翻译进行模板渲染

> ID：11521045
> 
> 赞同：3
> 
> 时间：2012-07-17T10:56:12.523
> 
> 标签：django, localization, internationalization, django-templates

如果我使用 i18n，我如何告诉渲染函数我的电子邮件应该使用哪种语言？

仅供参考：现在看起来像这样

```
{% load i18n %}
{% language language %}
{% trans "Hello" %} {{ name }}
{% endlanguage %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:01:01.147

您可以将模板包装在[`language`](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#std%3atemplatetag-language)标签中：

```
{% load i18n %}
{% language email_language %}

...

{% endlanguage %} 
```

在您的 Python 代码中，您应该将值传递`email_language`给模板。`language`这是当标记为模板的该部分激活该语言时呈现电子邮件的语言。

# javascript - jQuery - 追加/替换事件监听器（当事件处理程序未知时）

> ID：11521047
> 
> 赞同：2
> 
> 时间：2012-07-17T10:56:14.283
> 
> 标签：javascript, jquery, events, event-handling

我试图找到我的问题的答案，但没有成功 - 如果答案非常明显，我深表歉意:)。这是我要解决的问题的前提。

*   我有很多带有原生事件的 UI 元素（按钮、超链接等）（例如，单击链接执行功能）
*   我无权访问这些事件侦听器，也不知道需要调用哪些函数/处理程序
*   我想做一个通用函数，它会： o 横穿 DOM，找到 UI 元素，如按钮或超链接，并附加额外的侦听器来执行相同的处理程序/函数（例如，我想附加“touchend”侦听器将执行与“click”事件相同的处理程序/函数）

有没有办法让我以某种方式找出用于特定 UI 元素的事件处理程序，然后通过 .on() 方法为同一处理程序附加新的侦听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:09:09.777

嗨，即使您的困境有点开放，希望这对您的事业有所帮助`:)`

阅读这篇文章 -*你可能不知道的关于 JQuery 的事情*= [http://james.padolsey.com/javascript/things-you-may-not-know-about-jquery/](http://james.padolsey.com/javascript/things-you-may-not-know-about-jquery/)

您可以通过 jQuery 的事件存储访问绑定到元素（或任何对象）的所有事件处理程序：

```
// List bound events:
console.dir( jQuery('#elem').data('events') );

// Log ALL handlers for ALL events:
jQuery.each($('#elem').data('events'), function(i, event){
    jQuery.each(event, function(i, handler){
        console.log( handler.toString() );
    });
});

// You can see the actual functions which will occur
// on certain events; great for debugging! 
```

PS - 我建议您更好地了解您的 DOM，但以上应该会有所帮助。`B-)`

# entity-framework - 实体框架中多条记录的插入顺序

> ID：11521057
> 
> 赞同：18
> 
> 时间：2012-07-17T10:56:41.510
> 
> 标签：entity-framework, entity-framework-5

当我尝试一次添加一个具有多个子级的实体时，我遇到了 EF 重新排序插入的问题。`Outer 1--* Item 1--* SubItem`我有一个 3 级结构，每个 ( )之间具有一对多的关系。如果我尝试插入带有项目和子项目的新外部，则包含子项目的项目最终会被首先插入。

示例代码（.NET 4.5、EF 5.0.0-rc）：

```
public class Outer
{
    public int OuterId { get; set; }
    public virtual IList<Item> Items { get; set; }
}

public class Item
{
    public int OuterId { get; set; }
    [ForeignKey("OuterId")]
    public virtual Outer Outer { get; set; }

    public int ItemId { get; set; }
    public int Number { get; set; }

    public virtual IList<SubItem> SubItems { get; set; }
}

public class SubItem
{
    public int SubItemId { get; set; }

    [ForeignKey("ItemId")]
    public virtual Item Item { get; set; }
    public int ItemId { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Outer> Outers { get; set; }
    public DbSet<Item> Items { get; set; }
    public DbSet<SubItem> SubItems { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());
        MyContext context = new MyContext();

        // Add an Outer object, with 3 Items, the middle one having a subitem
        Outer outer1 = new Outer { Items = new List<Item>() };
        context.Outers.Add(outer1);
        outer1.Items.Add(new Item { Number = 1, SubItems = new List<SubItem>() });
        outer1.Items.Add(new Item { Number = 2, SubItems = new List<SubItem>(new SubItem[] { new SubItem() }) });
        outer1.Items.Add(new Item { Number = 3, SubItems = new List<SubItem>() });

        context.SaveChanges();

        // Print the order these have ended up in
        foreach (Item item in context.Items)
        {
            Console.WriteLine("{0}\t{1}", item.ItemId, item.Number);
        }
        // Produces output:
        // 1       2
        // 2       1
        // 3       3
    }
} 
```

我知道[Alex James 的这个回答，](https://stackoverflow.com/a/921712/163495)其中指出插入可能需要重新排序以满足关系约束，但这不是这里的问题。他的回答还提到他们无法在诸如列表之类的保持顺序的结构中跟踪项目的顺序。

我想知道如何订购这些插件。虽然我可以依靠 PK 以外的字段对插入的项目进行排序，但如果我可以依靠 PK 顺序，效率会高得多。我真的不想使用多个 SaveChanges 调用来完成此操作。

我正在使用 EF5 RC，但从周围其他未回答的问题来看，这已经存在了一段时间！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T11:50:32.383

> 我想知道如何订购这些插件。

你不能。数据库命令的顺序是 EF 的内部行为。如果您想控制命令的顺序，请不要使用将您从低级数据库交互中抽象出来的工具 - 直接使用 SQL。

根据评论编辑：

是的，这是低级交互，因为在使用不受您控制的抽象时，您对 SQL 命令的顺序寄予厚望。在高层次上，您会得到不同的东西，因为您使用的期望不适用于该抽象。如果您想控制 SQL 命令的顺序，您必须通过一项一项（=> 多个`SaveChanges`和`TransactionScope`）保存项目来强制执行 EF，或者自己编写 SQL。否则使用单独的列进行排序。

顺便提一句。如您所见，EF 不会保存实体。它有自己的更改跟踪器，保存对所有附加实例的引用。引用保存在多个`Dictionary`实例中，字典[不保留插入顺序](https://stackoverflow.com/questions/7387874/is-there-a-dictionary-preserves-entries-insertion-order-order)。如果这些集合用于生成 SQL 命令（我猜它们是），则无法保证顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:18:04.157

数据库中的表是集合。这意味着订单无法保证。我假设在您的示例中您想要按“数字”排序的结果。如果这是您想要的，如果该数字发生变化并且不再反映数据库中的顺序，您会怎么做？

如果您真的希望以特定顺序插入行，多个 SaveChanges 是您最好的选择。

没有人愿意多次调用 SaveChanges 的原因是因为这感觉就是这样：一个肮脏的 hack。

由于主键是一个技术概念，因此在此键上对结果进行排序应该没有任何功能意义。您可以按特定字段对结果进行排序，并为此使用数据库索引。您可能不会看到速度上的差异。

明确排序还有其他好处：对于必须维护它的人来说更容易理解。否则，该人必须知道主键排序很重要并给出正确的结果，因为在应用程序的其他（完全）不相关部分中，它意外地与数字字段的顺序相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-05T13:42:52.087

我找到了一种方法。它只是想我会让你知道：

```
using (var dbContextTransaction = dbContext.Database.BeginTransaction())
{
  dbContext.SomeTables1.Add(object1);
  dbContext.SaveChanges();

  dbContext.SomeTables1.Add(object2);
  dbContext.SaveChanges();

  dbContextTransaction.Commit();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-13T00:51:38.537

另一种方法是通过实体状态更改的组合，在添加每个条目后无需数据库往返（尽管严重依赖于应用程序逻辑）。

在我的情况下 - 节点层次结构 - 我必须先保留根节点，然后再保留层次结构的其余部分，以便自动路径计算工作。

所以我有一个*根节点*，没有提供父 ID，而子节点提供了父 ID。

EF Core 随机（或通过复杂和智能的逻辑 - 根据您的喜好 :) 随机调度节点用于插入、中断路径计算过程。

因此，我使用覆盖上下文的*SaveChanges*方法并检查集合中的实体，我需要为其维护一定的插入顺序 -首先*分离*任何子节点，然后保存更改，然后*附加*子节点并再次保存更改。

```
// select child nodes first - these entites should be added last
List<EntityEntry<NodePathEntity>> addedNonRoots = this.ChangeTracker.Entries<NodePathEntity>().Where(e => e.State == EntityState.Added && e.Entity.NodeParentId.HasValue == true).ToList();

// select root nodes second - these entities should be added first
List<EntityEntry<NodePathEntity>> addedRoots = this.ChangeTracker.Entries<NodePathEntity>().Where(e => e.State == EntityState.Added && e.Entity.NodeParentId.HasValue == false).ToList();

        if (!Xkc.Utilities.IsCollectionEmptyOrNull(addedRoots))
        {
            if (!Xkc.Utilities.IsCollectionEmptyOrNull(addedNonRoots))
            {
                // detach child nodes, so they will be ignored on SaveChanges call
                // no database inserts will be generated for them
                addedNonRoots.ForEach(e => e.State = EntityState.Detached);

                // run SaveChanges - since root nodes are still there, 
                // in ADDED state, inserts will be executed for these entities
                int detachedRowCount = base.SaveChanges();

                // re-attach child nodes to the context
                addedNonRoots.ForEach(e => e.State = EntityState.Added);

                // run SaveChanges second time, child nodes are saved
                return base.SaveChanges() + detachedRowCount;
            }
        } 
```

这种方法不允许您保留单个实体的顺序，但是如果您可以将实体分类为必须首先插入的实体，以及可以稍后插入的实体 - 这种*hack*可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-14T14:20:15.650

保存之前的多个 Add() 或保存之前的 AddRange() 不会保留顺序。此外，当您阅读集合时，不能保证以与最初添加的顺序相同的顺序返回结果。您需要向您的实体添加一些属性，并在查询时使用 OrderBy() 以确保它们按您想要的顺序返回。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-20T16:53:15.823

这不专业。但是，我用这种方法解决了我的问题。

PublicMenu.cs 文件：

```
public class PublicMenu
    {
        public int Id { get; set; }

        public int? Order { get; set; }

        public int? ParentMenuId { get; set; }

        [ForeignKey("ParentMenuId")]
        public virtual PublicMenu Parent { get; set; }

        public virtual ICollection<PublicMenu> Children { get; set; }

        public string Controller { get; set; }

        public string Action { get; set; }

        public string PictureUrl { get; set; }

        public bool Enabled { get; set; }
} 
```

PublicMenus.json 文件

```
[
    {
        "Order": 1,
        "Controller": "Home",
        "Action": "Index",
        "PictureUrl": "",
        "Enabled": true
    },
    {
        "Order": 2,
        "Controller": "Home",
        "Action": "Services",
        "PictureUrl": "",
        "Enabled": true
    },
    {
        "Order": 3,
        "Controller": "Home",
        "Action": "Portfolio",
        "PictureUrl": "",
        "Enabled": true
    },
    {
        "Order": 4,
        "Controller": "Home",
        "Action": "About",
        "PictureUrl": "",
        "Enabled": true
    },
    {
        "Order": 5,
        "Controller": "Home",
        "Action": "Contact",
        "PictureUrl": "",
        "Enabled": true
    }
] 
```

数据上下文种子文件

```
 public class DataContextSeed
        {
            public static async Task SeedAsync(ICMSContext context, ILoggerFactory loggerFactory)
            {
                try
                {
                       if (!context.PublicMenus.Any())
                        {
                            var publicMenusData = File.ReadAllText("../Infrastructure/Data/SeedData/PublicMenus.json");
                            var publicMenus = JsonSerializer.Deserialize<List<PublicMenu>>(publicMenusData);
                            foreach (var item in publicMenus)
                            {
                                context.PublicMenus.Add(item);
                                await context.SaveChangesAsync();
                            }
                       }
                }
                catch (Exception ex)
                {
                    var logger = loggerFactory.CreateLogger<ICMSContextSeed>();
                    logger.LogError(ex.Message);
                }
            }
   } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-10T14:47:30.560

废话！

这个问题是 9 年前提出的，微软仍然没有做任何事情。

在 EF6 中，我发现如果我使用

for(int i=0; i<somearray.Length; i++)
   db.Table.Add(new Item {Name = somearray[i]});

它按顺序执行，但如果我使用
foreach(var item in somearry)
   db.Table.Add(new Item {Name = item})
则不按顺序。

当我使用 EF core 3.1 时，总是不符合上述两种情况的顺序。

# javascript - 如何在触发javascript事件时用一些内容填充tinymce？

> ID：11521063
> 
> 赞同：1
> 
> 时间：2012-07-17T10:56:58.530
> 
> 标签：javascript, tinymce, wysiwyg

我想在javascript中选择框的onchange事件触发时用一些内容填充tinymce主体。我尝试了一些东西，但它对我不起作用。请指导我正确的方向。这是我在 textarea 上附加 tinymce 的代码

```
$(function() {
appendTinyMCE();
function appendTinyMCE(){
    tinyMCE.init({

        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "preview",
        // Theme options
        theme_advanced_buttons1 : "forecolor,backcolor,|,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,|,formatselect,fontselect,fontsizeselect,sub,sup,|,bold,italic,underline,strikethrough",
        theme_advanced_buttons2 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true

});} 
```

});

这是html代码

```
<td>
        <textarea rows="15" name="MyTinymceContent" cols="90" >MyTestContent</textarea> 
```

现在我想在 javascript 中更改选择框时用新内容填充 tinymce。所以我写了下面的代码片段来改变选择框

```
 function populateMyTinyMCE() {
  document.form.MyTinymceContent.value ="MyNewContent";
 } 
```

**但它并没有将新内容放入tinymce正文中。我不确定我在这里缺少什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:04:48.360

您可以在某些事件触发器上调用以下任何一个：

```
tinyMCE.get('your_editor').setContent("MyNewContent");
//OR
tinyMCE.activeEditor.setContent('MyNewContent'); 
```

见：[这里了解更多](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.setContent)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:06:14.493

Tinymce 不等于 textarea。在编辑器初始化时，会创建一个 contenteditable iframe。此 iframe 保存编辑器内容并不时被写回编辑器源 html 元素（在您的情况下为 textarea）。要设置编辑器内容，您需要使用 tinymce`setContent`函数。我也会展示替代方案：

```
 function populateMyTinyMCE() {

    var editor = tinymce.editors[0];

    // other ways to get the editor instance
    // editor = tinymce.get('my editor id');
    // editor = tinymce.activeEditor;

    editor.setContent('my new content');

    // alternate way of setting the content
    // editor.getBody().innerHTML = 'my new content';
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:59:57.390

尝试

```
tinyMCE.activeEditor.setContent("MyNewContent"); 
```

# xml - 是否有简化 XML 子集的规范？

> ID：11521064
> 
> 赞同：4
> 
> 时间：2012-07-17T10:57:06.327
> 
> 标签：xml, xml-parsing, subset, specifications, microxml

当我第一次听说 W3C 支持的[MicroXML](http://www.w3.org/community/microxml/)时，我想到了几年前在某处读到的一个想法：XML 规范的一个更简单的子集，没有属性（也没有命名空间 IIRC）。理论上，这样的规范将允许更简单、更快和内存效率更高的解析器实现，可以在完整 XML 被认为过于繁重且不需要其大部分功能的情况下使用。

然而，事实证明，MicroXML 并不是那么简单——例如，虽然它*更*简单，但它确实保留了属性。

那么这样的事情存在吗？规格？一个实现（最好是Java）？我发现的最接近的东西是Christopher Diggins 的 XML——（XML 减号），但它似乎从未流行起来[。](http://www.artima.com/weblogs/viewpost.jsp?thread=135693)

注意：我确实意识到在我描述的情况下可以使用 JSON 或其他几种格式。不过，出于好奇，我对 XML 子集感兴趣，它可以被常规 XML 解析器读取，并且可以（即使被“简化的”特殊解析器解析）通过 DOM 或 SAX API 访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:48:40.993

我是提出这个想法的人`XML--` ，最后我发现JSON完全满足了我的需求，我没有追求XML规范。我更喜欢 JSON，因为它可以被 Javascript 实现快速解析，比 XML 简洁得多，并且可以根据需要轻松转换为 XML。

# string - 使用 Process 编写 Scala 脚本时的空格问题

> ID：11521068
> 
> 赞同：1
> 
> 时间：2012-07-17T10:57:30.187
> 
> 标签：string, scala, scripting, process, system

我正在尝试编写一个自动化脚本来 pngcrush 我的图像（对于我正在开发的网站），并且我使用 scala 作为脚本语言来编写脚本来执行此操作。一切都很顺利，除了我在执行命令时遇到了关于使用空格的问题。我读到你需要使用

```
Seq(a,b,c,d) 
```

其中 a,b,c,d 是字符串（用单个空格分隔），用于处理 Scala/Java 如何处理字符串

我用于生成要执行的命令的相关代码在这里。结果变量包含每个文件名的文字路径

```
for (fileName <- result) {
    val string = Seq("pngcrush","brute","-d","\"" + folder.getPath + "/\"","-e",fileName.getName) ++ fileName.getCanonicalPath.replace(" ","\\ ").split(" ").toSeq 
```

然后我用

```
string! 
```

执行命令。问题是命令最后一部分的文件名（在“-e”标志之后）没有正确执行，因为它无法处理有空格的目录。示例输出如下所示

```
List(pngcrush, brute, -d, "/tmp/d75f7d89-9ed5-4ff9-9181-41ae2fd82da8/", -e, users_off.png, /Users/mdedetrich/3dot/blublocks/src/main/webapp/img/sidebar/my\, group/users_off.png) 
```

如果我运行 reduceLeft 来取回空格，我显然会得到正确的字符串。

```
pngcrush brute -d "/tmp/1eaca157-0e14-430c-b0a4-677491d70583/" -e users_off.png /Users/mdedetrich/3dot/blublocks/src/main/webapp/img/sidebar/my\ group/users_off.png 
```

这是正确的命令应该是什么（在终端中手动运行字符串可以正常工作）。但是，当我尝试通过 Scala 脚本运行它时，我得到了这个

```
Could not find file: users_off.png
Could not find file: /Users/mdedetrich/3dot/blublocks/src/main/webapp/img/sidebar/my\
Could not find file: group/users_off.png
   CPU time decoding 0.000, encoding 0.000, other 0.000, total 0.000 seconds 
```

知道我做错了什么吗？Scala 不解析有空格的字符串似乎是一个问题（并且用 Seq 分割它也不起作用）。我尝试过使用带空格的文字字符串和 Seq，但似乎都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:10:19.323

你为什么做这个：

```
replace(" ","\\ ").split(" ") 
```

*这*就是分裂论点的原因，而不是`Process`。你为什么不只使用以下内容？

```
val string = Seq("pngcrush",
                 "brute",
                 "-d","\"" + folder.getPath + "/\"",
                 "-e",fileName.getName, 
                 fileName.getCanonicalPath) 
```

# linq - VB.NET 过滤/分组数据表

> ID：11521071
> 
> 赞同：0
> 
> 时间：2012-07-17T10:57:44.510
> 
> 标签：linq, datatable, vb.net-2010

**示例场景**

我在数据库中有一个表，其中包含以下字段：- SerialNo，GroupNo，Description，Quantity。目前，我正在围绕一个从 ADO.NET 数据集填充的 DataTable 循环，并将字段添加到列表中，如下所示...

```
' Gets the items from the database and created a DataSet
' The DataSet has a named DataTable called MyTable
ds = GetItems 

' Item is an model in my MVC project
Dim Item As Item

' I am creating a List of items...
i As List(Of Item)

For Each row As DataRow In ds.Tables("MyTable").Rows
    Item = New Item() With {
        .SerialNo = If(Not IsDBNull(row("SerialNo")), CInt(row("SerialNo")), 0),
        .GroupNo = If(Not IsDBNull(row("GroupNo")), CStr(row("GroupNo")), ""),
        .Description = If(Not IsDBNull(row("Description")), CStr(row("Description")), ""),
        .Quantity = If(Not IsDBNull(row("Quantity")), CInt(row("Quantity")), 0)
    }

    ai.Add(Item)
Next 
```

**要求**

而不是获取每一行，我只想获取每个 GroupNo 的第一次出现并将此结果返回到列表中。例如...

*   序列号 = 1 组号 = 1 描述 = 项目 A 数量 = 100
*   SerialNo = 2 GroupNo = 1 描述 = 项目 B 数量 = 100
*   SerialNo = 3 GroupNo = 1 描述 = 项目 C 数量 = 100
*   序列号 = 4 组号 = 2 描述 = 项目 D 数量 = 100
*   序列号 = 5 组号 = 2 描述 = 项目 E 数量 = 100
*   SerialNo = 6 GroupNo = 3 描述 = 项目 F 数量 = 100

...实际上应该修改为返回...

*   序列号 = 1 组号 = 1 描述 = 项目 A 数量 = 100
*   序列号 = 4 组号 = 2 描述 = 项目 D 数量 = 100
*   SerialNo = 6 GroupNo = 3 描述 = 项目 F 数量 = 100

我正在使用带有 .NET 4.0 的 Visual Studio 2010 (VB.NET)。

我试图研究各种方法，但我要么卡住试图提取所有 4 列似乎没有正确分组。注意：我不想将查询修改为只返回数据子集。我需要用代码过滤/分组它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:09:35.553

因此，您只想使用`DataRow`每个组中的第一个来初始化您的`Item`：

```
Dim items = From row In ds.Tables("MyTable").AsEnumerable()
            Let GroupNo = row.Field(Of Int32)("GroupNo")
            Group row By GroupNo Into Group
            Select New Item() With {
                .GroupNo = GroupNo,
                .SerialNo = Group.First().Field(Of Int32)("SerialNo"),
                .Quantity = Group.First().Field(Of Int32)("Quantity"),
                .Description = Group.First().Field(Of String)("Description")
            } 
```

如果您想将其复制到 a`List(Of Item)`中，您只需调用`items.ToList()`.

# visual-studio-2010 - Visual Studio中MFC的列表控件如何动态存储？

> ID：11521073
> 
> 赞同：-1
> 
> 时间：2012-07-17T10:57:59.800
> 
> 标签：visual-studio-2010, visual-c++, mfc, listcontrol

我正在使用 Visual Studio 2010 中的 MFC 处理基于对话框的应用程序。我使用列表控件作为报告类型来显示 . 我设法在该输出窗口上显示了一些硬编码数据。这是代码。代码有什么问题

```
 void CuserspecificationDlg::OnAdd()     // This function add file by clicking on Add button
    {
// TODO: Add your control notification handler code here
CFileDialog ldFile(TRUE);
// Show the File Open dialog and capture the result
if (ldFile.DoModal() == IDOK)
    { 

     CStdioFile fileName;
  //TCHAR buf[100]; // it is declared in h file

       while(  fileName.ReadString(buf,99))
      {}
              fileName.Close();

}

     void CuserspecificationDlg::InsertItems()
    {
    //
list.cx = 100;
list.pszText   = "Project";      // this project is the column heading of the dialog
list.iSubItem = 2;
::SendMessage(hWnd  ,LVM_INSERTCOLUMN, 
    (WPARAM)1,(WPARAM)&list);

SetCell(hWnd,"1",0,0);
SetCell(hWnd,buf,0,1);    // these 1,G,X,X are the hardcoded entries. 
SetCell(hWnd,"G ",0,2);
SetCell(hWnd," X",0,3); 
```

//----- //

}

如何显示该缓冲区？它不起作用。buf 没有正确显示文件中的内容。由于某些字符 1、G 和 X 在输出窗口中可见，但 buf 语句未正确显示字符。.. 代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:35:15.280

要将项目添加到列表控件，您首先需要创建一个列：

```
LVCOLUMN lvCol;
lvCol.mask = LVCF_TEXT | LVCF_WIDTH;
lvCol.pszText = L"Column Header Text";
m_CListCtrl.InsertColumn(0, &lvCol);

// ... 
```

然后将项目插入到结构类型的列表控件中`LVITEM`

```
LVITEM item;
item.mask = LVIF_TEXT;
item.pszText = "Column Text";
item.iItem = numItem;      // Item number
item.iSubItem = 0;         // Sub item number (column number)
m_CListCtrl.InsertItem(&item); 
```

# python - wxPython窗口卡在后台

> ID：11521074
> 
> 赞同：0
> 
> 时间：2012-07-17T10:58:02.730
> 
> 标签：python, windows-7, wxpython

我有一个 wxPython 项目，它在 Windows 7 中显示出一些奇怪的症状（在 Mac OS X 上一切正常，Windows 7 是我们针对此版本测试的唯一 win 版本）。该应用程序有一个 wx.TaskBarIcon 的子类，它带有一个右键菜单，该菜单应创建应始终位于顶部的窗口。每个窗口都是 wxFormBuilder 创建的 wx.Frame 或 wx.Dialog 的子类。

有时，我找不到重现它的步骤，窗口不显示并且不能被调用到前面。应用程序的图标将出现在任务栏中，但不会出现窗口。单击该图标不会执行任何操作，即使关闭所有其他窗口也不会显示该窗口。

我当前如何显示窗口的片​​段：

```
#Initialization code, calling super's __init__ etc.
self.Center()
self.Show()
self.SetWindowStyle( self.GetWindowStyle() | wx.STAY_ON_TOP ) 
```

由于我无法重现调试问题，因此很难。我试过在 self.Show 之后调用 self.Raise 和 self.SetFocus ，但问题不时出现。有没有人遇到过类似的 wxPython 问题或知道任何可能的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:30:09.193

我记得，您通常无法在初始化后可靠地更改 Frame 样式。您应该将 STAY_ON_TOP 样式标志放在 Frame 的 init 中。对于对话框，使用 ShowModal()。现在我考虑了一下，您还可以使用框架的 MakeModal() 方法，这可能也可以。

# python - pycharm 2.5.1中的导入sys错误

> ID：11521078
> 
> 赞同：1
> 
> 时间：2012-07-17T10:58:07.550
> 
> 标签：python, pycharm

我是一个使用 python 和 ubuntu 的新手，我正在尝试`import sys`我的代码，但它总是给我一个正在使用的元素的错误`sys`：

```
import sys
Q = sys.argv[1] 
```

使用 sys 的每条语句都会出现错误，即使我评论有错误的语句，它之后的语句也会出错......

```
Q = sys.argv[1] 
```

错误：

```
"IndexError: list index out of range" 
```

问：有什么要导入`sys`的`pycharm`吗？？

问：它的先决条件是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:00:46.207

这与`import`. `sys.argv[1]`是提供给 Python 脚本的第一个参数。

所以如果你这样做（例如）

```
C:\Python27> python.exe myscript.py Hello! 
```

然后`sys.argv`是`["myscript.py", "Hello!"]`，所以`sys.argv[1]`是`"Hello!"`。

如果您不提供参数，那么`sys.argv`将只是`["myscript.py"]`- 因此，您无法访问`sys.argv[1]`，因为它不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:00:20.700

您已正确导入`sys`。绑定到 access 时会发生错误`sys.argv[1]`，这是您传递给`python`可执行文件的参数。

如果您只是运行`python scriptname.py`，没有任何其他参数，则没有`sys.argv[1]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:47:41.600

一种方法是在终端（Mac、Linux 或 Unix）或命令提示符（Windows）中运行您的代码，如 Tim 在上面的答案中提到的，但对于 Linux/Unix/Mac，您从 python 中取出 .exe如下：`python myscript.py Hello`

如果你仍然想在 PyCharm 中做类似的事情，你必须按如下方式传递参数：

1.  从顶部的菜单栏中，单击**运行**
2.  然后点击**编辑配置..**
3.  将打开一个对话框，然后在“**脚本参数**”字段中输入您的参数
4.  单击**确定**或**应用**
5.  然后运行或调试您的代码，它就会运行！

# joomla - Joomla K2链接到模块中的类别或项目？

> ID：11521080
> 
> 赞同：1
> 
> 时间：2012-07-17T10:58:15.033
> 
> 标签：joomla, joomla-k2

我正在编写一个访问 K2 表的 Joomla 模块，例如 K2 项目和 K2 类别。我已经设法从 MySQL 数据库中提取了我希望显示的 K2 项目，但我希望能够创建一个指向 K2 项目或其 K2 类别的可点击链接。我无法找到此信息。我查看了 K2 项目模板，但如果我尝试对链接使用相同的代码，它不包含完整路径。它省略了 http:// 和域。

在 Joomla 中创建指向 K2 项目或 K2 类别的链接与必须为 Joomla 文章或 Joomla 类别创建链接的方式不同吗？无论哪种方式，我如何在我的 Joomla 模块中为 K2 项目和 K2 类别创建一个。

这是我在 Joomla K2 中使用的 PHP 代码示例：

```
$db = & JFactory::getDBO();
$category = & JTable::getInstance('K2Category', 'Table');
$category->load($catid);
$item->category=$category;
$item->category->link = urldecode(JRoute::_(K2HelperRoute::getCategoryRoute($category->id.':'.urlencode($category->alias))));

echo $item->category->link; 
```

这会打印出路径，但不包括域。/joomla/index.php/component/k2/itemlist/category/4-something-here 我期望它在此示例中打印出来以使其成为该类别的有效链接： [http ://example.com/ joomla/index.php/component/k2/itemlist/category/4-something-here](http://example.com/joomla/index.php/component/k2/itemlist/category/4-something-here)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:03:07.920

如果要获取站点的基本 URL，可以使用[`JURI::base()`](http://docs.joomla.org/JURI/base)获取它。我不完全确定您想要做什么，但您最好先使用应用程序`JFactory::getApplication();`然后使用`setRedirect`.

# ruby-on-rails - Nokogiri 与 Microsoft WCF（二进制）的通信？

> ID：11521095
> 
> 赞同：1
> 
> 时间：2012-07-17T10:58:57.033
> 
> 标签：ruby-on-rails, ruby, wcf, nokogiri

我正在使用 Ruby (Nokogiri) 与用 Microsoft WCF 编写的服务交谈。最近开发人员已将其更改为使用二进制表示而不是纯文本。Nokogiri 支持这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:28:16.663

不，Nokogiri 不会读取二进制数据。

我发现[bindata](http://bindata.rubyforge.org/)对于读取二进制数据非常有用。

祝你好运！

# asp.net - 页面生命周期导致 sub 中的用户控件出现错误

> ID：11521096
> 
> 赞同：1
> 
> 时间：2012-07-17T10:59:01.983
> 
> 标签：asp.net, vb.net, page-lifecycle

感谢@Angkor Wat，我朝着我的目标迈出了重要的一步：将字符串动态添加到字符串中。但是我遇到了另一件事我无法解决。

这是脚本：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="addtostring.aspx.vb" Inherits="demo_addtostring" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <p><asp:textbox id="tb" runat="server"></asp:textbox></p>
        <asp:Panel ID="tbPanel" runat="server"></asp:Panel>
    </div>
    </form>
</body>
</html> 
```

这是后面的代码：

```
Partial Class demo_addtostring
    Inherits System.Web.UI.Page

    Public Property gesStr As String
        Set(value As String)
            ViewState("gesStr") = value
        End Set
        Get
            Dim o As Object = ViewState("gesStr")
            If o Is Nothing Then
                Return ""
            Else
                Return o
            End If
        End Get
    End Property

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
        If Page.IsPostBack Then
        Else
            gesStr = "1;"
        End If
        tb.Text = gesStr
        Dim iButton As New Button
        iButton.Text = "add"
        iButton.CommandArgument = "1;"
        iButton.CommandName = "1;"
        AddHandler iButton.Click, AddressOf add
        tbPanel.Controls.Add(iButton)

        If Page.IsPostBack Then
        Else
            anzeige()
        End If
    End Sub

    Private Sub add(ByVal sender As Object, ByVal e As EventArgs)
        Dim myButton As Button = DirectCast(sender, Button)
        Dim addString As String = myButton.CommandArgument
        gesStr += addString
        tb.Text = gesStr
        anzeige()
    End Sub

    Private Sub anzeige()
        Dim gesArray As Array = Split(gesStr, ";")
        For xLauf As Integer = 0 To UBound(gesArray) - 1
            Dim anzeigeDiv As New System.Web.UI.HtmlControls.HtmlGenericControl("div")
            Dim anzLabel As New Label
            anzLabel.Text = gesArray(xLauf)
            anzeigeDiv.Controls.Add(anzLabel)
            Dim iButton2 As New Button
            iButton2.Text = xLauf.ToString
            iButton2.ID = "test" & xLauf.ToString
            iButton2.CommandArgument = "1;"
            iButton2.CommandName = "1;"
            AddHandler iButton2.Click, AddressOf add
            anzeigeDiv.Controls.Add(iButton2)
            tbPanel.Controls.Add(anzeigeDiv)
        Next
    End Sub
End Class 
```

单击添加按钮应添加“1;” to `gesStr`- 动态循环生成的按钮应该做同样的事情 -.- 有人知道吗？我将**非常**感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:25:46.703

为了让回发知道按钮的事件处理程序，需要在生命周期中调用处理程序的点之前重新创建按钮。换句话说，您总是需要在 Page_Load 中重新创建按钮。

这是对您的代码的修改：

```
<form id="form1" runat="server">
<div>
    <p><asp:textbox id="tb" runat="server"></asp:textbox></p>
    <br />
    <asp:Button runat="server" ID="btnAdd" Text="add" CommandArgument="1;" />
    <asp:Panel ID="tbPanel" runat="server"></asp:Panel>
</div>
</form> 
```

和代码隐藏：

```
Public Property gesStr As String
    Get
        Dim o As Object = ViewState("gesStr")
        If o Is Nothing Then
            Return ""
        Else
            Return DirectCast(o, String)
        End If
    End Get
    Set(value As String)
        ViewState("gesStr") = value
    End Set
End Property

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        gesStr = "1;"
    End If

    tb.Text = gesStr
End Sub

Private Sub add(ByVal sender As Object, ByVal e As CommandEventArgs) Handles btnAdd.Command
    Dim addString As String = e.CommandArgument
    gesStr += addString
    tb.Text = gesStr
    CreateNewButton(tbPanel.Controls.Count, addString.Substring(0, addString.Length - 1))
End Sub

Protected Overrides Sub CreateChildControls()
    MyBase.CreateChildControls()

    Dim gesArray As Array = Split(gesStr, ";")
    For xLauf As Integer = 0 To UBound(gesArray) - 1
        CreateNewButton(xLauf, gesArray(xLauf))
    Next
End Sub

Private Sub CreateNewButton(ByVal xLauf As Integer, ByVal labelText As String)
    Dim anzeigeDiv As New Panel
    anzeigeDiv.ID = "div" & xLauf.ToString()

    Dim anzLabel As New Label
    anzLabel.Text = labelText
    anzeigeDiv.Controls.Add(anzLabel)

    Dim iButton2 As New Button
    iButton2.Text = xLauf.ToString
    iButton2.ID = "test" & xLauf.ToString()
    iButton2.CommandArgument = "1;"
    iButton2.CommandName = "1;"
    AddHandler iButton2.Command, AddressOf add
    anzeigeDiv.Controls.Add(iButton2)

    tbPanel.Controls.Add(anzeigeDiv)
End Sub 
```

我已经将始终存在的添加按钮移到了 aspx 页面中，这样动态面板将只包含基于`gesStr`值添加的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:06:54.850

必须在每次回发时重新创建动态控件，有关详细信息，请参阅[本文](http://www.singingeels.com/Articles/Dynamically_Created_Controls_in_ASPNET.aspx)。

# c# - 如何使用具有不同值列表的组合框单元填充文本框和组合框的 DataGridView

> ID：11521097
> 
> 赞同：2
> 
> 时间：2012-07-17T10:59:02.620
> 
> 标签：c#, datagridview, datagridviewcolumn, datagridviewcombobox, datagridviewcomboboxcell

我按顺序有三列，文本框，组合框和文本框：

```
this.columnLocalName = new System.Windows.Forms.DataGridViewTextBoxColumn();
this.columnLocalAddress = new System.Windows.Forms.DataGridViewComboBoxColumn();
this.columnLocalPort = new System.Windows.Forms.DataGridViewTextBoxColumn(); 
```

它们又在 datagridview 中，如下所示：

```
this.dataGridViewLocalProfile.Columns.AddRange(
new System.Windows.Forms.DataGridViewColumn[] {
                    this.columnLocalName,
                    this.columnLocalAddress,
                    this.columnLocalPort}); 
```

稍后我将尝试为每个组合框单元格添加不同的值，如下所示：

```
foreach (profile in localProfile.List)
{
DataGridViewComboBoxCell cell =(DataGridViewComboBoxCell)
(dataGridViewLocalProfile.Rows[dataGridViewLocalProfile.Rows.Count - 1].
Cells["columnLocalAddress"]);

cell.Items.Clear();
cell.Items.Add(profile.Address.ToString());

dataGridViewLocalProfile.Rows.Add(
new string[] { profile.Name, profile.Address, profile.Port });
} 
```

这会产生一个数据网格，其中第一列和最后一列已填充，并且组合框列为空。带有我处理的数据错误。消息是：

```
DataGridViewComboBoxCell value is not valid. 
```

我已经阅读了大部分帖子，但找不到解决方案。

我尝试过像这样设置数据源：

```
cell.DataSource = new string[] { profile.Address }; 
```

仍然得到空的组合框列，并带有数据错误说

```
DataGridViewComboBoxCell value is not valid. 
```

我认为这非常棘手，因为我为每个组合框单元添加了不同的值。

任何人都可以，请帮助我如何完成这项工作。

/最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T23:07:46.563

游戏迟到了，但无论如何这是解决方案。

问题出在`foreach`循环中。最后一个现有行中的`ComboBox`单元格填充了一个项目。`profile`但是随后，使用当前对象添加了一个全新的行：

```
dataGridViewLocalProfile.Rows.Add( new string[] { profile.Name, profile.Address, profile.Port }); 
```

`ComboBox`此新行中单元格的项目为空，因此`profile.Address` *无效*。改变`foreach`循环看起来像这样，你是黄金：

```
foreach (Profile p in this.localProfile)
{
  DataGridViewRow row = new DataGridViewRow();
  row.CreateCells(this.dataGridView1);

  DataGridViewComboBoxCell cell = (DataGridViewComboBoxCell)row.Cells[1];
  cell.Items.Clear();
  cell.Items.Add(p.Address);

  row.Cells[0].Value = p.Name;
  row.Cells[1].Value = p.Address;
  row.Cells[2].Value = p.Port;
  this.dataGridView1.Rows.Add(row);
} 
```

# svn - 只有在提交影响特定路径时才执行操作的提交后挂钩

> ID：11521100
> 
> 赞同：1
> 
> 时间：2012-07-17T10:59:09.607
> 
> 标签：svn, batch-file, hook, visualsvn-server, post-commit

在某些情况下，仅当满足某些条件时才需要执行提交后操作。

*例如，仅当提交的修订影响“/tags”*目录时才发送电子邮件。我在网上搜索了这样的脚本示例以在 Windows 环境中运行，但找不到任何脚本示例，所以我不得不自己编写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:59:09.607

*post-commit.bat*代码：

```
REM The command checks whether the committed revision changes any data under '/tags'
"%VISUALSVN_SERVER%bin\svnlook.exe" dirs-changed %1 --revision %2 | findstr /b "[Tt]ags"

REM If 'findstr' returns error code 0, it means that the commit involves the '/tags' directory.
REM So if the the returned code is 0 the command runs external batch 'post-commit-run.bat'
If %ERRORLEVEL% EQU 0 call %~dp0post-commit-run.bat %* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:51:52.710

我有一个 post commit *Watcher*脚本，它将完全按照您的要求进行。这是一个 Perl 脚本，但您可以从 ActiveState 或 Strawberry Perl 项目下载适用于 Windows 的 Perl。

我的提交后挂钩位于[GitHub](https://github.com/qazwart/SVN-Watcher-Hook)中。它使用*配置文件*来指定要监视的目录。（其实每个用户都可以设置自己的*配置文件*）。

# android - 在安卓手机的菜单中隐藏应用程序图标

> ID：11521106
> 
> 赞同：3
> 
> 时间：2012-07-17T10:59:25.347
> 
> 标签：android, android-layout, android-emulator

我是安卓新手。我想在运行时从主菜单中隐藏我的应用程序图标。我相信清单文件负责应用程序在主菜单中的存在。但我希望我的应用程序在打开 android 手机时处于运行过程中。但它不会在手机菜单中显示应用程序图标。请你告诉我一个相同的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T11:13:01.767

这是工作代码片段：

```
ComponentName componentToDisable = new ComponentName(
                    getApplicationContext().getPackageName(), Constant.main_package_name
                            + ".Splash"); // .Splash Launcher Activity
            getPackageManager().setComponentEnabledSetting(
                    componentToDisable,
                    PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                    PackageManager.DONT_KILL_APP);

            finishActivities(); // Finish All activity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:20:56.387

如果您不希望您的应用程序出现在带有图标的可启动应用程序中，只需编辑`AndroidManifest.xml` 并删除以下内容：

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

以下行将告诉 android 在启动器中显示应用程序。

# cloud - 开发 SaaS 应用程序

> ID：11521108
> 
> 赞同：0
> 
> 时间：2012-07-17T10:59:30.463
> 
> 标签：cloud, saas

我想开发一个将在云上的应用程序。

我只需要逐步了解要做什么。任何图表或流程图类型的东西都可以工作 - 细节将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:30:16.467

也许你应该看看 Coursera 的 SaaS 软件工程课程：

[https://www.coursera.org/course/saas](https://www.coursera.org/course/saas)

# c# - 如何使用 javascript/jquery/c# 搜索和突出显示包含特殊字符的文本

> ID：11521109
> 
> 赞同：0
> 
> 时间：2012-07-17T10:59:31.037
> 
> 标签：c#, javascript, jquery

> **可能重复：**
> [HTML 中的全文搜索忽略标签 / &](https://stackoverflow.com/questions/5886858/full-text-search-in-html-ignoring-tags)

我做了很多谷歌搜索，但没有找到任何帮助。我有一个 webbrowser 控件，它有 HTML body.Body 包含的数据也包括特殊字符。我想添加搜索框 wchich 将在页面中搜索并突出显示它。文本可以包含特殊字符，如 \,/,?,$,^,&,<,> 。我应该如何使用 jquery/javascript 或 c# 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:06:48.547

这是我对类似问题的回答：

[https://stackoverflow.com/a/5887719/96100](https://stackoverflow.com/a/5887719/96100)

但是，[`window.find()`](https://developer.mozilla.org/en/DOM/window.find)上述答案所依赖的 ，[将来可能会从浏览器中删除，](http://lists.w3.org/Archives/Public/public-whatwg-archive/2012Jun/0283.html)并且不会在短期内被替换。既然如此，我已经为我的[Rangy](http://code.google.com/p/rangy)库编写了一个灵活的搜索功能。演示（突出显示）在这里：

[http://rangy.googlecode.com/svn/trunk/demos/textrange.html](http://rangy.googlecode.com/svn/trunk/demos/textrange.html)

# charts - 压缩/扩展 JavaFX 2 数据图表

> ID：11521118
> 
> 赞同：2
> 
> 时间：2012-07-17T10:59:51.600
> 
> 标签：charts, javafx-2, line-plot

有一个 XY 折线图我想通过鼠标左键单击压缩/扩展 X 和 Y 轴的数据可视化，按住并拖动左/右和上/下。

这是一个图表示例

![在此处输入图像描述](../Images/4abec767902f6ce57111dc3394f7fc06.png)

这是绘制样本数据的代码

```
public class BaseXYChart extends Application {

@Override
public void start(Stage stage) {
   stage.setTitle("Linear plot");

   final CategoryAxis xAxis = new CategoryAxis();
   final NumberAxis yAxis = new NumberAxis(1, 22, 0.5);

   yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis){
        @Override
    public String toString(Number object){
        return String.format("%7.2f", object);
    }
});
final LineChart<String, Number>lineChart = new LineChart<String, Number>(xAxis, yAxis);

   lineChart.setCreateSymbols(false);
   lineChart.setAlternativeRowFillVisible(false);
   lineChart.setLegendVisible(false);

   XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1));
    series1.getData().add(new XYChart.Data("Feb", 1.5));
    series1.getData().add(new XYChart.Data("Mar", 2));
    series1.getData().add(new XYChart.Data("Apr", 2.5));
    series1.getData().add(new XYChart.Data("May", 3));
    series1.getData().add(new XYChart.Data("Jun", 4));
    series1.getData().add(new XYChart.Data("Jul", 6));
    series1.getData().add(new XYChart.Data("Aug", 9));
    series1.getData().add(new XYChart.Data("Sep", 12));
    series1.getData().add(new XYChart.Data("Oct", 15));
    series1.getData().add(new XYChart.Data("Nov", 20));
    series1.getData().add(new XYChart.Data("Dec", 22));

    BorderPane pane = new BorderPane();
    pane.setCenter(lineChart);          
    Scene scene = new Scene(pane, 800, 600);
    lineChart.getData().addAll(series1);

    stage.setScene(scene);
    stage.show();
}

public static void main(String[] args) {
    launch(args);
}   
} 
```

我怎样才能做到这一点？我在任何地方都没有找到任何例子！

谢谢。

添加图片

![鼠标左键单击，按下并在 Y 轴上从上到下拖动后的结果](../Images/78cbf0abeb03f65cd9ea340072f363ef.png)

鼠标左键单击，按下并在 Y 轴上从上到下拖动后的结果

相同的结果应该是 X 轴通过鼠标左/右键拖动来获取压缩线数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:38:47.623

如果我正确理解了您的问题，也许您可​​以使用类似下面的内容，它会根据在轴上的单击和拖动来调整图表的大小。

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.event.EventHandler;
import javafx.scene.*;
import javafx.scene.chart.*;
import javafx.scene.effect.DropShadow;
import javafx.scene.effect.Effect;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

public class DraggableAxisResizableChart extends Application {
  private static final int UNDEFINED = -1;
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    final NumberAxis xAxis = new NumberAxis();
    final NumberAxis yAxis = new NumberAxis();
    final LineChart<Number, Number> chart = new LineChart(
      xAxis, yAxis,
      FXCollections.observableArrayList(
         new XYChart.Series("April", FXCollections.observableArrayList(
           new XYChart.Data(0, 4), new XYChart.Data(1, 10), new XYChart.Data(2, 18), new XYChart.Data(3, 15)
         ))
      )      
    );
    chart.setPrefSize(400, 300);
    chart.setMaxSize(400, 300);
    makeXAxisDraggable(xAxis, chart);
    makeYAxisDraggable(yAxis, chart);

    StackPane layout = new StackPane();
    layout.getChildren().add(chart);
    stage.setScene(new Scene(layout, 800, 600));
    stage.show();
  }

  private void makeXAxisDraggable(final NumberAxis xAxis, final LineChart<Number, Number> chart) {
    final Delta d = new Delta();
    xAxis.setOnMouseDragged(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent event) {
        if (d.x == UNDEFINED) {
          d.x = event.getSceneX(); 
          d.y = event.getSceneY();
        } else { 
          chart.setMaxHeight(
            chart.getPrefHeight() * (
              (chart.getPrefHeight() + (event.getSceneY() - d.y) * 2) / chart.getPrefHeight()
            )
          );
        }  
      }
    });

    xAxis.setOnMouseReleased(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent event) {
        d.x = UNDEFINED; d.y = UNDEFINED;
        chart.setPrefSize(chart.getMaxWidth(), chart.getMaxHeight());
      }
    });

    addMouseoverGlow(xAxis);
  }

  private void makeYAxisDraggable(final NumberAxis yAxis, final LineChart<Number, Number> chart) {
    final Delta d = new Delta();
    yAxis.setOnMouseDragged(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent event) {
        if (d.x == -1) {
          d.x = event.getSceneX(); 
          d.y = event.getSceneY();
        } else { 
          chart.setMaxWidth(
            chart.getPrefWidth() * (
              (chart.getPrefWidth() - (event.getSceneX() - d.x) * 2) / chart.getPrefWidth()
            )
          );
        }  
      }
    });

    yAxis.setOnMouseReleased(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent event) {
        d.x = UNDEFINED; d.y = UNDEFINED;
        chart.setPrefSize(chart.getMaxWidth(), chart.getMaxHeight());
      }
    });

    addMouseoverGlow(yAxis);
  }

  // create a glow feedback effect on a node when the mouse is hovered over it.
  private void addMouseoverGlow(final Node n) {
    final Effect glow = new DropShadow(10, Color.GOLDENROD);
    n.setOnMouseEntered(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent event) {
        n.setEffect(glow);
      }
    });
    n.setOnMouseExited(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent event) {
        n.setEffect(null);
      }
    });
  }

  // records a relative point location.
  class Delta { double x = UNDEFINED, y = UNDEFINED; }
} 
```

替代实现可以在节点上使用比例。

上面的实现在调整图形大小时会留下轻微的幽灵痕迹，因此如果示例证明有用，您可能希望以某种方式修复它。

# spring - 使用带有 Hibernate 的 Spring JPA 从数据库中获取数据时启用强制验证

> ID：11521119
> 
> 赞同：1
> 
> 时间：2012-07-17T10:59:54.790
> 
> 标签：spring, hibernate, jpa

我正在使用 Spring JPA 2.0 和 Hibernate 作为 ORM 提供程序开发一个应用程序。我们对数据库只有只读访问权限，并将生成报告。我想在获取数据时进行一些验证。

```
@Column(name = "LOGICAL_ID", nullable = false)
@NotNull
private Long logicalId; 
```

我添加了实现 JSR 303 规范的 Hibernate 验证器。但是在获取它时不会抛出任何运行时异常或 ConstraintViolationException？我在配置中添加了一些东西还是我错过了一些东西？请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:35:05.727

就像我[在 Java 中实现交叉验证中发布的一样](https://stackoverflow.com/questions/11451746/implementing-cross-validation-in-java/11451890#11451890)

您可以使用以下代码手动验证实体；

```
ValidatorFactory factory = Validation.byDefaultProvider().configure().traversableResolver(new CustomTraversableResolver() ).buildValidatorFactory();
Validator validator = factory.getValidator();
Set<ConstraintViolation<YourBaseClass>> constraintViolations = Validator.validate(myEntityToValidate); 
```

如果您希望自动为您完成此操作，可能是“javax.persistence.validation.mode”属性设置为无（[http://docs.jboss.org/hibernate/entitymanager/3.6/reference/ zh/html/configuration.html](http://docs.jboss.org/hibernate/entitymanager/3.6/reference/en/html/configuration.html)）。

不过，我更喜欢手动验证，因为从那时起你就可以控制和细节，其中的约束没有通过。

# image - 为 CSS 动画预加载图像？

> ID：11521120
> 
> 赞同：1
> 
> 时间：2012-07-17T10:59:57.067
> 
> 标签：image, animation, css, preload

我在图像上有一个 css 动画，我希望它在页面加载时播放。当前发生的情况是在加载页面的前几次没有播放动画的情况下加载图像。之后工作正常。我猜图像被缓存了。

有没有办法预加载图像以便动画立即生效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:09:28.953

我建议不要在图像加载之前应用动画，而不是预加载图像。使用 jQuery，只有在所有内容都加载后，您才能将类应用于图像：

```
$(window).bind("load", function(){
    $("#future-head-hand").addClass("loaded");
}); 
```

然后将动画应用于该类：

```
.loaded {
    position: absolute;
    left: 60%;
    bottom: -40%;
    margin-left: -190px;
    -webkit-animation-name: FadeIn;
    -webkit-animation-timing-function: ease;
    -webkit-animation-duration: 1s;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
    -webkit-animation-name: movinghand;
    -webkit-animation-duration: 0.5;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:02:19.337

如果您使用的是 Adob​​e Edge，您可以进入`View > Preloader Stage`并添加一个微调器或类似的东西，以显示动画在实际准备好之前正在加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:59:23.193

我认为您可以通过将所有内容`js`移到底部来完成相同的操作，`html`以便在所有 css 和图像之后加载。

# java - 使用本地端口从网站发送 TCP/IP 请求

> ID：11521123
> 
> 赞同：0
> 
> 时间：2012-07-17T11:00:08.653
> 
> 标签：java, php, asp.net, tcp, tcpclient

我想创建一个 Web 实用程序，它将使用本地端口发送 TCP/IP 请求。

是否可以使用客户端端口发送 TCP/IP 请求？

我知道如果我们从 Web 服务器发送 TCP/IP 请求并且服务器上允许特定端口是可能的。但我想使用客户端端口发送请求。

我需要做什么？我应该创建一个 Java Applet/Plugin 还是可以使用 PHP/.net？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:29:36.370

这取决于您想做什么，但从根本上说，您无法使用 PHP 等服务器端代码在客户端上启动操作。

Javascript 能够使用 XHR (Ajax) 和[WebSockets](http://en.wikipedia.org/wiki/WebSocket)以及包装诸如[socket.io](http://socket.io)之类的库进行一些网络操作。也许这足以满足您的需求。

Java Applet 的功能会更强，但除非您签署代码，否则[它的功能会受到限制。](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)当然，客户端的启动速度会更慢。

# android - 自定义图片库

> ID：11521125
> 
> 赞同：0
> 
> 时间：2012-07-17T11:00:10.280
> 
> 标签：android, android-layout, android-imageview, android-gallery

我有图片库的工作样本。

现在，如果我在图库中有**10**张图片，最初显示的图片很少，比如说**3**张（基于图片缩略图尺寸），其余的图片可以通过滚动图库来查看。

我想稍微改变一下。
根据图像缩略图尺寸，最初应该显示少量图像，而不是滚动，应该有**上一个和下一个按钮**，单击哪些图像将向左或向右移动。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:04:01.090

您可以使用 gallery 和 onButtonPress 调用 onFling（用于平滑滚动，或简单地选择下一个图像）事件来更改所选项目。或者您可以使用 LinearLayout，计算图像尺寸运行时，为父 linearLayout 创建子 imageViews 并点击用您的图像填充此视图

# c# - NTAccount.Translate 方法因错误而失败 部分或全部身份引用无法翻译

> ID：11521129
> 
> 赞同：4
> 
> 时间：2012-07-17T11:00:26.003
> 
> 标签：c#, .net, translate, user-accounts

```
PipeAccessRule par = new PipeAccessRule("Everyone", PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow); 
```

此代码失败并出现错误：

> 部分或全部身份参考无法翻译。

我想这是因为我在非英语本地启动我的应用程序时使用了“所有人”。在英文系统上一切正常。

如何避免这种情况？是否有一些枚举描述了一般用户组？

堆栈跟踪：

```
at System.Security.Principal.NTAccount.Translate(IdentityReferenceCollection sourceAccounts, Type targetType, Boolean forceSuccess)    
at System.Security.Principal.NTAccount.Translate(Type targetType)    
at System.Security.AccessControl.CommonObjectSecurity.ModifyAccess(AccessControlModification modification, AccessRule rule, Boolean& modified)    
at System.Security.AccessControl.CommonObjectSecurity.AddAccessRule(AccessRule rule)    
at System.IO.Pipes.PipeSecurity.AddAccessRule(PipeAccessRule rule) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T12:52:18.370

通过使用 PipeAccessRule 和 SecurityIdentifier 的第二个构造函数而不是字符串来解决：

```
System.Security.Principal.SecurityIdentifier sid = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.BuiltinUsersSid, null);
PipeAccessRule par = new PipeAccessRule(sid, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-23T09:46:14.640

由于某些原因，BuiltinUsersSid 在我的情况下似乎无法正常工作（远程服务器可以访问管道但本地访问管道失败！）

这是我用来访问几乎所有内容的代码，现在可以在本地或远程访问管道：

请注意，DomainSid 参数在某些情况下会填充当前用户域

```
using System.IO.Pipes;
using System.Security.Principal;
using System.Security.AccessControl;
[...]

            PipeSecurity lPipeSecurity = new PipeSecurity();
            try
            {
                PipeAccessRule lPar1 = new PipeAccessRule(@"NT AUTHORITY\NETWORK", PipeAccessRights.FullControl, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar1);
            }
            catch (Exception E1)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give pipe rights to AUTORITY NT NETWORK"+E1.Message);
            }
            try
            {
                System.Security.Principal.SecurityIdentifier lSid = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.BuiltinUsersSid, null);
                PipeAccessRule lPar2 = new PipeAccessRule(lSid, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);

                lPipeSecurity.AddAccessRule(lPar2);
            }
            catch (Exception E2)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give pipe rights to BuiltInSid "+E2.Message);
            }
            try
            {
                PipeAccessRule lPar3 = new PipeAccessRule(string.Format(@"{0}\{1}", Environment.UserDomainName, Environment.UserName), PipeAccessRights.FullControl, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar3);
            }
            catch (Exception E3)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give pipe rights to current user "+E3.Message);
            }
            try
            {
                System.Security.Principal.SecurityIdentifier lSidWorld = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.WorldSid, null);
                PipeAccessRule lPar4 = new PipeAccessRule(lSidWorld, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar4);
            }
            catch (Exception E4)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give rights to World "+E4.Message);
            }

            try
            {
                System.Security.Principal.SecurityIdentifier lSidLocal = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.LocalSid, null);
                PipeAccessRule lPar5 = new PipeAccessRule(lSidLocal, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar5);
            }
            catch (Exception E5)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give rights to Local "+E5.Message);
            }
            try
            {
                PipeAccessRule lPar6 = new PipeAccessRule(@"geneos", PipeAccessRights.FullControl, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar6);
            }
            catch (Exception E6)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give pipe rights to geneos" + E6.Message);
            }
            try
            {
                WindowsIdentity lCurrentId = WindowsIdentity.GetCurrent();
                System.Security.Principal.SecurityIdentifier lSidLocal = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.AccountAdministratorSid, lCurrentId.User.AccountDomainSid);
                PipeAccessRule lPar5 = new PipeAccessRule(lSidLocal, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar5);
            }
            catch (Exception E7)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give rights to administrators " + E7.Message);
            }
            try
            {
                System.Security.Principal.SecurityIdentifier lSidLocal = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.AuthenticatedUserSid, null);
                PipeAccessRule lPar8 = new PipeAccessRule(lSidLocal, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar8);
            }
            catch (Exception E8)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give rights to authenticated users " + E8.Message);
            }
            try
            {
                WindowsIdentity lCurrentId = WindowsIdentity.GetCurrent();
                System.Security.Principal.SecurityIdentifier lSidLocal = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.AuthenticatedUserSid, lCurrentId.User.AccountDomainSid);
                PipeAccessRule lPar9 = new PipeAccessRule(lSidLocal, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);
                lPipeSecurity.AddAccessRule(lPar9);
            }
            catch (Exception E9)
            {
                Console.WriteLine(PrinterBase.DumpTimestamp(DateTime.UtcNow, true) + ": Exception when trying to give rights to authenticated users on current user domain " + E9.Message);
            }

            lPipeServer = new NamedPipeServerStream(
                lNamedPipe, 
                PipeDirection.InOut, 
                NamedPipeServerStream.MaxAllowedServerInstances, 
                PipeTransmissionMode.Byte, 
                PipeOptions.Asynchronous, 
                0, 
                0, 
                lPipeSecurity); 
```

# javascript - SVG 和 JavaScript

> ID：11521130
> 
> 赞同：0
> 
> 时间：2012-07-17T11:00:26.920
> 
> 标签：javascript, svg

如何使用 Javascript 创建两个 SVG 圆圈并将其拖放到圆圈中？所有浏览器都支持 SVG 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:02:57.847

将 SVG 与 Javascript 一起使用的最佳方法是使用像[Raphaël](http://raphaeljs.com/)这样的库。

要确定浏览器支持，请查看[http://caniuse.com/](http://caniuse.com/)

# java - 通过元素 XPath 从 XSD 读取注释

> ID：11521132
> 
> 赞同：2
> 
> 时间：2012-07-17T11:00:33.320
> 
> 标签：java, xml, validation, xpath, xsd

我有 XSD 构建的 XML 文档。XSD 中的每个元素都带有注释。当我通过 XSD 验证 XML 时，我可以生成错误的 XPath（使用堆栈），我如何使用元素的 XPath 从 XSD 读取注释？

我正在使用 XSOM 读取 XSD 架构。

# android - OpenGL 着色器：如何分别移动每个顶点？

> ID：11521133
> 
> 赞同：3
> 
> 时间：2012-07-17T11:00:40.200
> 
> 标签：android, opengl-es, shader, rajawali

我正在尝试 Android 的 Rajawali 库在场景中绘制一些基本的 3d 对象。有一个样本 2000 个平面，展示了如何使用一个着色器非常“廉价”地渲染大量顶点。我可以将顶点数组传递给着色器并绘制它们。

我想升级这个示例并相互独立地移动一些顶点。

我已经尝试过 glBufferSubData，但我无法更改现场的任何内容。我发现的一种方法是更改​​数据并重新创建缓冲区，但我希望有一种更简单的方法来仅更改必要的数据。

例如，我只想从已经创建和绑定的缓冲区中更改一些位置。

初始化职位

```
 float[] planePositions = new float[numVertices * 3];
    .... 
```

创建缓冲区

```
 mGeometry.createBuffer(mPlanePositionsBufferInfo, BufferType.FLOAT_BUFFER, mPlanePositions,     GLES20.GL_ARRAY_BUFFER);
    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0); 
```

设置位置

```
 GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, planePosBufferHandle);
    GLES20.glEnableVertexAttribArray(maPlanePositionHandle);
    fix.android.opengl.GLES20.glVertexAttribPointer(maPlanePositionHandle, 3, GLES20.GL_FLOAT,
            false, 0, 0); 
```

以及如何修改例如第一个平面的第一个顶点的位置？（planePositions[0] = a;planePositions[1] = b;planePositions[1] = c... 现在我必须将此修改后的数组传递给 opengl 但不知道如何）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:17:26.723

您需要做的就是修改缓冲区数据，然后从 PlanesGalore 类中调用 mGeometry.changeBufferData()。我将以下代码放在了一个更新方法中，该方法在我的 Renderer 类的 onDrawFrame() 事件期间调用。

```
for (int i = 0; i < vertices.length; i += 3) {
   mPlanePositions= mPlanePositions.put(i, mPlanePositions.get(i) - 0.01f);
}

mGeometry.changeBufferData(mCubePositionsBufferInfo, mPlanePositions, 0); 
```

这是我能找到的完成动作的最佳方式。此外，我在这个[问题](https://github.com/MasDennis/Rajawali/issues/142)上提出了一个更改，让您可以指定缓冲区的哪些部分发生了更改，这应该提供更高的性能。

编辑

我对引擎的更改已获得批准，因此您现在可以像这样进一步优化它。

```
// The offset position should be vertices.length * object #. In my use case this is 72*x
// allowing me to update the XYZ coordinates of all 24 vertices of a cube.
int offsetPosition = 0;
mGeometry.changeBufferData(mCubePositionsBufferInfo, mPlanePositions, offsetPosition, offsetPosition + vertices.length); 
```

# java - 惰性初始化在 Spring MVC 3 中不起作用

> ID：11521138
> 
> 赞同：0
> 
> 时间：2012-07-17T11:00:47.660
> 
> 标签：java, spring, inversion-of-control

我遇到了 Spring 依赖注入的问题。我有一个应用程序，一旦部署检查它是否先前配置，如果没有，则启动配置管理器并询问用户数据库主机、端口、管理员登录和密码等。

现在我找不到注入这些配置值的方法。我假设我必须使用惰性初始化 bean，但是当我添加注释 @Lazy 时，Spring 仍在尝试在运行时注入它们，并且由于尚未配置主机和端口而出现错误。我错过了什么：/？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:05:24.177

您需要一个*查找方法*，一个只能通过 XML 配置访问的功能。有一个几乎古老的[JIRA 问题](https://jira.springsource.org/browse/SPR-5192)仍然悬而未决，仍未解决。

请务必检查有关上述问题的[评论](https://jira.springsource.org/browse/SPR-5192?focusedCommentId=74109&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-74109)，它描述了一种可能适合您的解决方法。

# extjs - 为移动设备制作应用程序的最佳程序（android、iphone 等）

> ID：11521140
> 
> 赞同：0
> 
> 时间：2012-07-17T11:00:57.457
> 
> 标签：extjs, appcelerator-mobile, appmobi

我现在尝试使用 appmobi、sencha 和 appcelerator 的 appmobi XDK phoneGap XDK 为手机制作应用程序，但除了 iphone 之外，该应用程序在 android 手机中运行良好。除了这些或任何技巧之外的任何其他程序使它在android和其他人中更好地工作？

任何帮助都将非常重要

谢谢

* * *

实际上我想避免这种情况。我想同时为所有手机构建。这就是我使用这些程序的原因。我不知道很多想法，我正在寻找一种简单的方法来做到这一点。我想要一种我可以在互联网上阅读它的方法，我可以找到想法，因为除了 jquery mobile 我找不到任何其他图书馆。那么有人知道我如何找到最好的方法，这是我的问题。感谢您的时间和回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:35:53.230

不知道你为什么要一个“程序”，然后引用一些技术/工具（Appcelerator、PhoneGap 等）。

无论如何，在过去的几个月里，我一直在使用 Appcelerator 开发跨平台的移动应用程序。但是，您选择的技术也取决于您的需求。

现在有三种移动开发：

1.  **原生移动开发：**使用 Objective-C（语言）+ X-Code for iOS 和 Java（语言）+ Android SDK for Android 等。如前所述，如果您针对多个平台，您始终可以选择 Appcelerator 之类的东西。**适用于：**性能、本机功能（例如，使用相机）。**推荐工具：** [Titanium Appcelerator](http://www.appcelerator.com)。
2.  **移动 Web 开发：**如果您只有 Web 技能（HTML/CSS/JavaScript），您始终可以使用 jQuery Mobile 或 Sencha Touch 等工具使您的 Web 应用程序与移动设备兼容。**推荐工具：** [jQuery Mobile](http://www.jquerymobile.com)、[Sencha Touch](http://www.sencha.com/products/touch)。
3.  **混合移动开发：**为您的应用程序使用 Web 技术（您将加载网页），但使用本机应用程序（Web 包装器）使应用程序在 Play Market 或 AppStore 上成为本机（并可分发）。**推荐工具：** [PhoneGap](http://www.phonegap.com)、[Trigger.io](http://www.trigger.io)，或者您甚至可以使用[Titanium Appcelerator](http://www.appcelerator.com)并使用[Web 视图组件](https://wiki.appcelerator.org/display/guides/The+WebView+Component)

## 你应该如何做决定？

*   您是否需要本机功能（使用相机、加速度计等）？如果你，你需要去原生或混合。
*   您计划支持多少个平台？如果只有 Android 和 iOS，那么您可以使用 Appcelerator 或将其设为原生。如果您计划支持更多平台，PhoneGap 或 Web 应用程序听起来更可靠。
*   您是否计划通过 AppStore/Play Market 交付您的应用程序？然后你需要让它成为原生/混合。

**注意/建议：**通过阅读您的问题，我注意到您对移动和编程的东西真的很困惑。在此之前，您应该花一些时间阅读有关整体开发的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:06:22.103

也许不完全是一个程序，但可以非常方便（根据您的应用程序需求）将它变成一个 web 应用程序。然后，您可以使用 Jquery mobile 等库来使网站适应移动平台，并结合仅在智能手机上可用的技术，例如 swipe、orientationchange 等。然后您可以为 android 和 iphone 制作一个简单的 Webviewer，可以单独制作.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:34:01.247

You can look at [Kendo UI](http://demos.kendoui.com/mobile/overview/index.html "Kendo UI")

kendo UI mobile have support for : iOS 3.0+, Android 2.0+ and BlackBerry touchscreen devices.

What i really liked about it is native-like UI experiences for end users automatically on same code base for different OS.

You can check [demo](http://demos.kendoui.com/mobile/tabstrip/index.html) , change OS using OS SIMULATOR MODE

I am not associated with Kendo.

# android - 如何摆脱数据库锁定异常？

> ID：11521141
> 
> 赞同：2
> 
> 时间：2012-07-17T11:00:59.360
> 
> 标签：android, sqlite

我正在实现一个应用程序，我经常在其中进行数据库调用。

我使用以下代码打开数据库：

```
public DataBaseHelper open() throws SQLException {

      mDbHelper = new DatabaseHelper(this.mCtx);
      this.mDb = mDbHelper.getWritableDatabase();
      return this;
 } 
```

但我在以下行中得到数据库锁定异常：

```
 this.mDb = mDbHelper.getWritableDatabase(); 
```

请帮我解决这个异常。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:04:50.990

当您对数据库使用多个连接时，就会出现此问题。尽量避免创建到数据库的多个连接，并将一个与所有功能一起使用

[数据库锁定异常](https://stackoverflow.com/questions/11213436/database-locked-exception)

# objective-c - 目标 C MKMapView EXC_BAD_ACCESS

> ID：11521143
> 
> 赞同：1
> 
> 时间：2012-07-17T11:01:02.057
> 
> 标签：objective-c, mapkit

我是一名新手 ObjC 程序员（上周开始学习）；我试图从 MKMapView 的中心获取纬度和经度时出现了一些意想不到的结果。

当地图更改区域时，我有以下方法被调用：

```
- (void)mapView:(MKMapView*)mapView regionDidChangeAnimated:(BOOL)animated {
    NSLog(@"------> %@", mapView);
    latLabel.text = [[NSString alloc] initWithFormat:@"%@", [mapView centerCoordinate]];
} 
```

在我没有得到（null）的日志中，我得到了一个 MKMapView 对象的打印输出；但在下一行我得到一个未处理的 EXC_BAD_ACCESS。

任何帮助表示赞赏，如果需要，我很乐意提供更多信息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:08:16.500

`CLLocationCoordinate2D`不是Objective-C 对象，它是C 结构。您不能直接将其转换为`NSString`类似的。

尝试：

```
CLLocationCoordinate2D center = [mapView centerCoordinate];
latLabel.text = [NSString stringWithFormat:@"(%f, %f)", center.latitude, center.longitude]; 
```

* * *

**编辑：**由于您是 Objective-C 的新手，因此您可能想了解一下这个问题是如何发生的以及为什么错误消息如此不具描述性。

`[NSString stringWithFormat:...]`接受格式字符串和任意数量的参数。然后它解析格式字符串并根据需要填写参数。

`%@`格式字符串中的标记指定了一个 Objective-C 对象；即它的一个`NSObject *`或子类。`NSObject`定义`description`提供`NSString *`对象描述的方法。`stringWithFormat:`调用`description`为令牌提供的参数以将`%@`其填充到格式字符串中。

这样做的结果是调用`objc_msgSend`您的`CLLocationCoordinate2D`结构来进行`description`调用，因为`NSString`假设您提供了正确类型的参数。然后发生崩溃，因为`objc_msgSend`将结构视为`NSObject *`指针并尝试访问错误位置的内存。因此`EXC_BAD_ACCESS`.

**免责声明：**这是基于我在几年后对 Objective-C 的理解，所以如果我有任何错误，请随时纠正我。

# java - 电子邮件方法不起作用

> ID：11521148
> 
> 赞同：0
> 
> 时间：2012-07-17T11:01:24.097
> 
> 标签：java, search, hashmap

嘿，我有一个 EmployeeStore，为此我使用了哈希图。地图存储的变量是电子邮件名称和 ID。我有一个名为 SearchByEmail 的方法，但这有一个问题。当用户在 UI 中输入正确的员工电子邮件时，该方法返回 false。

这是我的代码：这是在 MainApp

```
 case 2:
               System.out.println("Search by Email.");
               Employee employeeSearchEmail = MenuMethods.userInputByEmail();
                 Store.searchByEmail(employeeSearchEmail.getEmployeeEmail()); 
```

菜单方法

```
//Imports
import java.util.Scanner;
//********************************************************************

public class MenuMethods 
{
    private static Scanner keyboard = new Scanner(System.in);

    //Methods for the Company Application menu.
    //Method for validating the choice.
         public static int getMenuChoice(String menuString, int limit, String prompt, String errorMessage) 
         {
                System.out.println(menuString);
                int choice = inputAndValidateInt(1, limit, prompt, errorMessage);
                return choice;
         }
    //********************************************************************
    //This method is used in the getMenuChoice method.
            public static int inputAndValidateInt(int min, int max, String prompt, String errorMessage) 
            {
                int number;
                boolean valid;
                do {
                    System.out.print(prompt);
                    number = keyboard.nextInt();
                    valid = number <= max && number >= min;
                    if (!valid) {
                        System.out.println(errorMessage);
                    }
                } while (!valid);
                return number;
            }
    //********************************************************************
    public static Employee userInput()
    {
         String temp = keyboard.nextLine();
         Employee e = null;
         System.out.println("Please enter the Employee Name:");
         String employeeName = keyboard.nextLine();
         System.out.println("Please enter the Employee ID:");
         int employeeId = keyboard.nextInt();
         temp = keyboard.nextLine();
         System.out.println("Please enter the Employee E-mail address:");
         String employeeEmail  = keyboard.nextLine();
         return e = new Employee(employeeName , employeeId, employeeEmail);

    }
    //********************************************************************
    public static Employee userInputByName()
    {
        //String temp is for some reason needed.  If it is not included
        //The code will not execute properly.
         String temp = keyboard.nextLine();
         Employee e = null;
         System.out.println("Please enter the Employee Name:");
         String employeeName = keyboard.nextLine();

         return e = new Employee(employeeName);

    }
    //********************************************************************
    public static Employee userInputByEmail()
    {
        //String temp is for some reason needed.  If it is not included
        //The code will not execute properly.
         String temp = keyboard.nextLine();
         Employee e = null;
         System.out.println("Please enter the Employee Email:");
         String employeeEmail = keyboard.nextLine();
        //This can use the employeeName's constructor because java accepts the parameters instead
         //of the name's.
         return e = new Employee(employeeEmail);

    }
    //********************************************************************

} 
```

通过电子邮件搜索

```
public boolean searchByEmail(String employeeEmail) 
    {
            //(for(Employee e : map.values()) {...}) 
            //and check for each employee if his/her email matches the searched value
            boolean employee = map.equals(employeeEmail);    
            System.out.println(employee);
            return employee;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:03:34.240

首先，

```
map.equals(employeeEmail); 
```

真的没有意义。`map`是一个`Hashmap`，并且`employeeEmail`是一个`String`。在什么条件下它们会相等？

目前还不清楚您在地图中存储的内容以及如何存储，因为您既没有包含地图的声明，也没有包含插入新值的代码。我现在假设您存储映射，例如`name -> Employee`. 如果您想根据电子邮件地址搜索员工，我建议您执行类似的操作

```
Employee findByEmail(String email) {
    for (Employee employee : yourMap.values())
        if (employee.getEmail().equals(email))
            return employee;

    // Not found.
    return null;
} 
```

然后检查员工是否`email`存在，你可以做

```
public boolean searchByEmail(String employeeEmail) {
    boolean employee = findByEmail(employeeEmail) != null;
    System.out.println(employee);
    return employee;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:04:27.877

我假设 map 是`Map<S,T>`某些 S,T 的类型，因此它与 的类型不同`employeeEmail`，特别是它不是`equals()`。

我怀疑您正在寻找[`Map.containsValue()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#containsValue%28java.lang.Object%29)（如果电子邮件是地图中的值）或[`Map.containsKey()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#containsKey%28java.lang.Object%29)（如果电子邮件是地图的键），这取决于`map`映射的确切内容，如果映射是到/来自字符串值。

**编辑：**基于对评论的澄清：
由于电子邮件不是 中的键或值`map`，因此建议的解决方案将无法正常工作。因此，您可以选择其中之一：

1.  使用@aioobe 的解决方案来迭代和检查每封电子邮件。
2.  向类添加一个额外的字段：`Map<String,Employee> map2`它将映射：`email_address->employee`。鉴于此地图，您可以使用 搜索电子邮件`map2.containsKey(email)`。它将确保从电子邮件中更快地查找员工并扩大持有额外地图的范围。如果我是你，我会选择这个。

# objective-c - Dropbox OAuth 令牌

> ID：11521150
> 
> 赞同：2
> 
> 时间：2012-07-17T11:01:27.747
> 
> 标签：objective-c, xcode, dropbox

有谁知道如何在 Xcode 上开发的目标 c iPad/iphone 中将 Auth 令牌用于保管箱？我搜索了很多教程，我发现最接近的是：

[http://code.google.com/p/oauthconsumer/wiki/UsingOAuthConsumer](http://code.google.com/p/oauthconsumer/wiki/UsingOAuthConsumer)

但它适用于mac。我想要做的是将所有应用程序用户链接到同一个保管箱帐户（我的）而不显示用于登录的 safari 窗口。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:49:32.557

这是可能的，但*不*推荐。

**警告**：这将允许任何人读取/写入您的保管箱帐户（或应用程序文件夹，具体取决于您允许的访问权限）。

我认为您正在按照入门指南中的建议设置您的应用程序： [https ://www.dropbox.com/developers/core/authentication#ios](https://www.dropbox.com/developers/core/authentication#ios)

它的工作原理如下：登录 Dropbox 后，您将被重定向回您的应用。Dropbox 通过让您注册一个 URL Scheme 并使用以下 AppDelegate 方法来做到这一点：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url; 
```

Dropbox在参数中传递`oauth_token`、`oauth_token_secret`和。然后，当您使用以下方法进行 API 调用时，它会保存这些以供以后使用：`uid``url``DBSession`

```
- (BOOL)handleOpenURL:(NSURL *)url; 
```

因此，您可以创建一个使用相同`App Key`和`Secret`.

**测试应用**

```
DBSession* dbSession =
    [[[DBSession alloc]
      initWithAppKey:@"APP_KEY"
      appSecret:@"APP_SECRET"
      root:ACCESS_TYPE] // either kDBRootAppFolder or kDBRootDropbox
     autorelease];
[DBSession setSharedSession:dbSession]; 
```

请求授权

```
if (![[DBSession sharedSession] isLinked]) {
    [[DBSession sharedSession] linkFromController:yourRootController];
} 
```

然后添加 AppDelegate 方法来接收授权`url`

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {
            NSLog(@"App linked successfully! url: %@", url);
            // At this point you can start making API calls
        }
        return YES;
    }
    // Add whatever other url handling code your app requires here
    return NO;
} 
```

这将`url`使用授权令牌记录。复制它，然后在您的生产应用程序中（在您配置 DBSession 之后）执行此操作（将字符串替换为您之前复制的字符串）：

**生产应用程序**

```
DBSession* dbSession =
    [[[DBSession alloc]
      initWithAppKey:@"APP_KEY"
      appSecret:@"APP_SECRET"
      root:ACCESS_TYPE] // either kDBRootAppFolder or kDBRootDropbox
     autorelease];
[DBSession setSharedSession:dbSession];

if (![[DBSession sharedSession] isLinked]) {
    [[DBSession sharedSession] handleOpenURL:[NSURL URLWithString:@"db-APP_KEY://1/connect?oauth_token=********&oauth_token_secret=********&uid=********"]];
} 
```

这将自动链接`DBSession`到您的 Dropbox 帐户。

您可以在授权之前通过调用它来测试它：

```
[[DBSession sharedSession] unlinkAll]; 
```

**另一个警告** 我可以下载你的应用程序，提取授权令牌，然后开始进行我想要的所有读/写 API 调用。这是完全不安全的，只能被视为一种教育练习。

# c++ - 运算符和构造函数

> ID：11521155
> 
> 赞同：1
> 
> 时间：2012-07-17T11:01:38.140
> 
> 标签：c++

我有一个类，我在其中实现了自己的构造函数、析构函数、复制构造函数和复制赋值运算符。

该类有一组核心成员，我在上述所有内容中都有，还有一组“状态变量”，我添加为一些方法的助手。

这些状态变量永远不会（只是因为我没有费心去做）在构造函数中初始化，而是在使用之前初始化。

因此，复制构造函数和复制赋值对它们没有任何作用。他们只是复制我明确想要的成员。

*   这会是个问题吗？
*   没有显式复制的成员会发生什么（顺便说一句，这些成员中没有指针）？
    *   它们也没有在构造函数中初始化
*   这会导致任何“隐藏”的问题吗？

干杯安德烈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:07:13.223

`Can this be a problem?`

- 如果您在使用前初始化它们并且不要忘记释放（在指针的情况下），我看不到任何问题。

`What happens to members that aren't explicitly copied (btw, no pointers in these members)? they are also not initialized in the constructor`

- 他们拿着垃圾

`Can this lead to any "hidden" problems?`

-不，如果你小心的话

但我建议您无论如何都在构造函数中初始化它们，因为这样更容易捕获错误，并且使您的对象始终保持完整状态。例如，捕获`nullptr`指针比捕获垃圾指针或指向已释放对象的指针要容易得多。因为在第一种情况下程序只会崩溃（取消引用空指针是 UB，但通常它只是崩溃）

如果可能的话，我更愿意创建局部变量来存储中间结果。如果它不是单个方法的中间结果 - 那么它可能是一个坑，如果在初始化之前在其他方法中使用此变量，您可能会跌倒。在这种情况下，最好存储零初始化变量 - 这样您就可以`assert`在对其进行计算之前使其处于有效状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:43:40.887

如果这些变量是对象状态的一部分，那么它们应该被复制。如果变量不是对象状态的一部分，它们不应该是成员。如果接口中任何函数的结果取决于操作开始之前该变量的值，则变量是对象状态的一部分。

上面的一般规则很少有例外，特别是有一些成员变量不参与对象的状态（它们通常标记为`mutable`）作为同步机制或复杂操作结果的缓存。

回到您的问题，从描述看来，您可能仅将这些成员用作不同成员函数之间的通信机制。接口中的一个函数设置值，然后调用读取/修改它们的其他函数。如果是这种情况，请考虑将变量作为参数传递给函数。通过使用成员，您可以有效地隐藏函数对这些值的依赖关系，同时向类添加依赖关系。

如果接口中的任何函数访问这些成员，情况会更糟，在这种情况下，在分配（或复制构造）之后，源和目标将表现不同，这打破了在复制初始化/分配之后源和目标的假设目标对象是*等价*的。

基本上，从实际的角度来看，如果这些成员不是对象状态的一部分，您可能会放弃当前的方法，但我真的会重新考虑设计。如果它们确实参与了对象的状态，你不应该以任何方式避免复制它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:40:18.010

从 c++ 的角度来看，这里没有错，但 c++ 并不能保护您免于被自己的脚踢伤。几个月后，您可能会调试一个仅在发布版本中发生的错误，然后您将花费几天时间找出发生这种情况的原因。有很多问题为什么我的应用程序可以在 Release 中运行但不能在 Debug 中运行，原因之一是调试堆初始化了分配的内存。

# javascript - 同步客户端和服务器端时间

> ID：11521156
> 
> 赞同：5
> 
> 时间：2012-07-17T11:01:38.947
> 
> 标签：javascript, synchronization, client-side, clock

我有一个收集实时市场数据并将其显示在网络前端的网络服务。

我的前端（jQuery）需要显示一个与服务器时钟同步的时钟（+- 几秒钟就可以了）。

我正在考虑在客户端加载时与服务器提供的其余数据一起提供 UTC 时间戳。

然后，我会启动一个计时器，每 1 秒增加显示的时钟。

这是一个好方法还是使用时间服务器更好？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T11:24:44.527

您需要考虑网络延迟。来自您服务器的数据不会立即发送给您。我建议使用[Cristian 算法](http://en.wikipedia.org/wiki/Cristian%27s_algorithm)：

1.  客户端标记当前客户端时间（T1）并向服务器发送请求。
2.  服务器将时间（T2）发送给客户端。
3.  客户端收到服务器应答并再次标记其当前时间（T3）。
4.  T3 - T1 是往返服务器所需的总时间请求 (RTT)。现在我们可以假设从服务器到客户端大约需要一半的时间。所以，你的“正确”时间是 T2 + (T3 - T1)/2

在维基百科上阅读更多关于[时钟同步算法的信息](http://en.wikipedia.org/wiki/Clock_synchronization)

# java - 使用java从网站下载多个文件

> ID：11521157
> 
> 赞同：0
> 
> 时间：2012-07-17T11:01:38.777
> 
> 标签：java, html, file, download

我正在使用代理登录到一个安全站点，并希望能够将所有文件和文件夹下载到我的本地磁盘上。这就是我到目前为止所拥有的。

**编辑-**目前下面的代码将从给定的根目录开始并下载所有子目录中的所有文件......非常酷:)但它不会复制我需要的文件夹结构。请问有什么帮助吗？**编辑**

首先我得到 4 个参数（所以可以在 Linux 的 cmd 行上使用）

1) 我要下载的目录的 url 2) 安全登录的用户名 3) psw​​ 4) 我希望将文件保存在本地磁盘上的目录

```
 public class ApacheUrl4
{
// this is the entry point for what I want the instase of the class to do
    public static void main(String args[]) throws Exception {

        String url  = args[0];
        final String username  = args[1];
        final String password1  = args[2];
        String directory  = args[3];

        checkArguments(args);

        ApacheUrl4 max = new ApacheUrl4();
        max.process(url, username, password1, directory);

    }
    public void process (String url, String username1, String password1, String directory) throws Exception {

        final char[] password  = password1.toCharArray();   
        final String username = username1;
         Authenticator.setDefault(new Authenticator(){
              protected  PasswordAuthentication  getPasswordAuthentication(){
               PasswordAuthentication p=new PasswordAuthentication(username , password);
               return p;
              }
             });

        BufferedInputStream in = null;
        BufferedInputStream in2 = null;
        FileOutputStream fout = null;
    // proxy 
        String proxyip = "000.000.000" ;
        int proxyport = 8080;
        Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyip, proxyport));
     // URL connection to file 
        URL file = new URL(url);
        URLConnection connection = file.openConnection(proxy);      
        ((HttpURLConnection)connection).getResponseCode();
        int reponsecode = ((HttpURLConnection)connection).getResponseCode();
        System.out.println("response code " + reponsecode);

        if (reponsecode == HttpURLConnection.HTTP_FORBIDDEN){
            System.out.println("Invalid username or psw");
            return;
        }
        if (reponsecode != HttpURLConnection.HTTP_OK){
            System.out.println("Unable to find response");
            return;
        }

        //Save the file into the chosen folder
        in = new BufferedInputStream(connection.getInputStream());

        //Create instance of DocumentBuilderFactory
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        //Get the DocumentBuilder
        DocumentBuilder docBuilder = factory.newDocumentBuilder();
        //Using existing XML Document
        Document doc = docBuilder.parse(in);

        //create the root element 
        Element root = doc.getDocumentElement();
        NodeList nodeList = root.getElementsByTagName("li"); 

        for(int i=0; i<nodeList.getLength(); i++){
          Node childNode = nodeList.item(i);
          if (childNode.getTextContent().contains("/")) {

            //  System.out.println(url + childNode.getTextContent());
                process(url + childNode.getTextContent(), username, password1, directory);                        

        }

    if (childNode.getTextContent().contains(".") && !childNode.getTextContent().contains("..")) {

            String textcon =  url + childNode.getTextContent();
            System.out.println("aaa " + textcon);

            if (url.endsWith("/")) {
                System.out.println("ends with a /");    
            }

            textcon = textcon.replace( " ", "%20");
            URL file2 = new URL(textcon);

            String[] urlparts = textcon.split("/");
            int urllength = urlparts.length;
            String lastarray = urlparts[urllength-2];
            System.out.println("last array " + lastarray);

            URLConnection connection2 = file2.openConnection(proxy);        
            in2 = new BufferedInputStream(connection2.getInputStream());
            String test2 = childNode.getTextContent();
            System.out.println("eeee " + childNode.getTextContent());

            String filename = (directory + test2 );
              File f=new File(filename);
                  if(f.isDirectory())
                  continue;

              //InputStream inputStream= new FileInputStream("InputStreamToFile.java");
              OutputStream out=new FileOutputStream(f);
              byte buf[]=new byte[1024];
              int len;
              while((len=in2.read(buf))>0)
              out.write(buf,0,len);
              out.close();
              in2.close();

        }
    }
}

    // this is part of the validation of arguments provided by user
    private static void checkArguments(String[] args) {
        while (args.length < 4 || args[0].isEmpty() || args.length > 4 ) {
                System.out.println("Please specify five arguments in the following format \n "  +
                " URL USERNAME PASWORD FILEPATH FILENAME " +
                "EG: \"java helloW http://www.google.com user_name password C:\\path/dir/ filename.exe\" ");
                System.exit(1);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:25:52.923

为了下载目录中的文件，您首先需要目录列表。如果允许，这将由服务器自动生成。首先，使用您的浏览器检查此特定服务器上是否存在这种情况。

然后您需要解析列表页面，并下载每个 url。坏消息是这些页面没有标准。好消息是大多数互联网都托管在 apache 或 IIS 上，所以如果你能管理这两个，你就有了很好的部分。

您可能只需将文件解析为 xml (xhtml) 并使用 xpath 来恢复所有 url。

# c# - 将方法从 webservice 设置为 javascript

> ID：11521158
> 
> 赞同：1
> 
> 时间：2012-07-17T11:01:38.593
> 
> 标签：c#, javascript, asp.net, web-services

我在 javascript 中有这个函数，它为每个标记设置所有标记和弹出信息。

```
var infowindow = new google.maps.InfoWindow();
for (var i = 0; i < arraylng.length - 1; i++) {
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(arraylng[i], arraylat[i])
    });
    var infowindow = new google.maps.InfoWindow({
        content: " "
    });
    makeInfoWindowEvent(map, infowindow, marker, i);
    markers.push(marker);
}

function makeInfoWindowEvent(map, infowindow, marker, i) {
    google.maps.event.addListener(marker, 'click', function() {
        alert(arraylat[i]); // working nice 
        alert(arraylng[i]); // working nice 
        infowindow.setContent(arraylng[i] + ", " + arraylat[i]);
        infowindow.open(map, marker);
    });
}

                } 
```

我的问题是：如何从 web 服务添加我的方法，该方法从数据库返回地址？这是代码。

```
[WebMethod]
public string GetAddressMarker(string lat, string lng) {
    string address = "";
    var plac = GoogleapiBO.getClinicByLatLng(lat, lng);
    address = plac.address + ", " + plac.city;
    address = "'" + address + "'";
    return address;
} 
```

我需要的只是从这个方法（方法需要`string lat=arraylat[i] & string lng=arraylng[i]`）中获取一个地址并将其设置为`infowindow.setContent(*here*);`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:51:27.197

## 解决方案#1

网络服务：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string GetAddressMarker(string lat, string lng) {
    string address = "";
    var plac = GoogleapiBO.getClinicByLatLng(lat, lng);
    address = plac.address + ", " + plac.city;
    address = "'" + address + "'";
    return address;
} 
```

Javascript

```
function makeRequest(url, message) {
    if (window.XMLHttpRequest) {
        httpRequest = new XMLHttpRequest();
    }
    else if (window.ActiveXObject) {
        httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
    }
    httpRequest.onreadystatechange = getResponse;
    httpRequest.open("POST", url, true);
    httpRequest.setRequestHeader("Content-Type", "application/json");
    httpRequest.send(message);
}

function getResponse() {
    if (httpRequest.readyState == 4 && httpRequest.status == 200) {
        //convert JSON string into object
        progressInfo(JSON.parse(httpRequest.responseText)) 
    }
}

function progressInfo(info) {
    //doing something with object info - in your case it should be the string
} 
```

调用方法：

```
makeRequest("http://..../webservice/Service.asmx/GetAdressMarker"); 
```

## 解决方案#2

在 c# 代码中设置一个 javascript 变量：

```
<script type="text/javascript">
     var address= '<%= _address%>';
</script> 
```

代码隐藏：

```
public partial class Entscheidungen : System.Web.UI.Page
{
    private string _address;

    protected void Page_Load(object sender, EventArgs e)
    {
         bt.Command += new CommandEventHandler(bt_Command);
    }

    void bt_Command(object sender, CommandEventArgs e)
    {
         _address = Service.GetAddressMarker(string lat, string lng)
    }

    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:38:25.877

试试这个它可能对你有用

```
<script type="text/javascript" language="Javascript" src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.1.min.js"></script>

<script language="javascript" type="text/javascript">

    var webServiceUrl = "../MathService.asmx/GetFullName";
    $("#btnAjax").click(function() {
        var webServiceUrl = "../MathService.asmx/GetFullName";
        var name = $("#txtBoxName").val();
        $.ajax({
            type: "POST",
            url: webServiceUrl,
            data: "{'name':'" + name + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: SuccessCallBack,
            error: FailureCallBack
        });
    });

    function SuccessCallBack(data) {
        alert(data.d);
    }

    function FailureCallBack(data) {
        alert(data.staus + " : " + data.statusText);
    }</script> 
```

不要忘记将此属性添加到服务中：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string GetAddressMarker(string lat, string lng) {
    string address = "";
    var plac = GoogleapiBO.getClinicByLatLng(lat, lng);
    address = plac.address + ", " + plac.city;
    address = "'" + address + "'";
    return address; 
```

}

# javascript - 一种附加事件监听器的方法，所有主流浏览器都支持

> ID：11521160
> 
> 赞同：5
> 
> 时间：2012-07-17T11:01:42.380
> 
> 标签：javascript, jquery, internet-explorer, javascript-events

我需要编写一段代码，将侦听器附加到选定的事件，并且可以在任何流行的浏览器、任何版本的浏览器中工作。在做了一些搜索后，我得出了以下功能：

```
function addListener(event, thefunction)
{
    if(window.addEventListener)
    {
        //All browsers, except IE before version 9.
        window.addEventListener(event, thefunction, false);
    } 
    else if(window.attachEvent)
    {
        //IE before version 9.
        window.attachEvent(event, thefunction);
    }
} 
```

很简单，似乎不言自明。

事件可能存在一些问题`DOMContentLoaded`，因为没有任何版本的 IE (AFAIK) 可以识别它，并且开发人员有义务使用它`onreadystatechange`。解决这个问题似乎也相当简单，直到 Internet Explorer 9。你只需要在 中多写一行`else if(window.attachEvent)`：

```
event = (event == 'DOMContentLoaded') ? 'onreadystatechange' : "on" + event; 
```

这部分总是在任何版本的 Internet Explorer 中触发，并且这一行提供了事件名称的简单翻译，因此始终使用正确的名称。

但是 Internet Explorer 9（及更高版本）呢？其中，微软决定放弃`attachEvent`支持`addEventListener`. 但不会`onreadystatechange`变成`DOMContentLoaded`.

我不能`window.addEventListener`部分使用上面的行，因为即使对于其他浏览器，这也会重写`DOMContentLoaded`为`onreadystatechange`事件并在那里失败，因为他们使用`DOMContentLoaded`.

所以，解决这个问题的唯一方法是在部件中添加浏览器检测（类型和版本）`window.addEventListener`，如果它检测到脚本正在处理 IE 9 或更高版本，它会将事件名称从`DOMContentLoaded`to重写`onreadystatechange`（并补充其他事件名称with `on`, IE 需要)，如果是其他浏览器，事件名称是否会保持不变？

或者也许我错了，因为正如我刚刚测试的那样，在我的 IE 8 中也`DOMContentLoaded`没有`onreadystatechange`被触发（第一个在 FF / Chrome 中正确触发）。

那么jQuery的`.on()`功能（或类似的）呢？有谁知道，如果它支持跨浏览器附加`DOMContentLoaded`，那么我可以确定这种特定类型的事件将被我的脚本捕获，无论是在哪个浏览器或我使用的版本中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T11:13:01.970

IE9 支持 DOMContentLoaded。见[这里](http://ie.microsoft.com/testdrive/HTML5/DOMContentLoaded/Default.html)。

考虑到这一点，您几乎可以*假设，如果`addEventListener`支持，则 DOMContentLoaded 也支持。

（* 除非有人使用 Opera 8 或 Safari 3.0 登陆您的页面，否则可能不太可能）。

至于 jQuery，它遵循支持 DOMContentLoaded 的方法，但在其他方面回退到其检测 DOM 就绪的历史方法，这涉及反复检查 DOM 树以查看是否`document.body`存在。所以你可以只使用它的 DOM-ready 处理程序：

```
$(function() { 
```

无需使用`on()`.

有关 jQuery 如何[在此答案中](https://stackoverflow.com/questions/5959194/how-does-jquerys-document-ready-function-work)执行此操作的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T11:35:06.870

[`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMContentLoaded)在 IE9 及更高版本中原生支持，并且可以通过[`addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener)也在 IE9 中实现的 W3C 标准方法附加：

```
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM ready');
}, false); 
```

这将适用于所有现代浏览器和 IE 版本 9 及更高版本。

jQuery 1.x 与 IE6+ 和任何其他最新的浏览器兼容。[jQuery 可以通过DOM 就绪处理程序](http://api.jquery.com/ready/)填充对 IE6-8 的支持，从而挂钩 DOM 就绪事件跨浏览器：

```
$(function() {
    //DOM has loaded, put your code here
}); 
```

* * *

`.on()`提供[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)，但这与问题无关。

# php - 在特定单选按钮单击时设置多个表单字段

> ID：11521163
> 
> 赞同：0
> 
> 时间：2012-07-17T11:01:53.493
> 
> 标签：php, javascript, radio-button

我正在开发一个 Web 应用程序，我必须在其中集成一个 Paypal 帐户。页面上有许多单选按钮，代表各种积分及其价格等。我的问题是，我想要一些功能，通过它我可以在单选按钮单击之一上设置各种其他表单字段。每个单选按钮的这些值都不同。

```
<form action='<?php echo $paypal_url; ?>' method='post' name='form'>
    <div class="crea_paka_title">Creadit Pakages</div>
    <?php
    foreach($admin_credits as $credits){ 
    ?>
        <div class="creadit_fields">
            <span class="for_radio">
                <input type="radio" name="1" id="<?php echo $credits['AdminCredit']['id'];?>" value="" />
            </span>
            <span class="for_creadit">
                <?php echo $credits['AdminCredit']['tx_total_credits']; ?> Credits
            </span>
            <span class="for_cre_value">
                $<?php echo $credits['AdminCredit']['nu_total_price']; ?>
            </span>
        </div>
        <div style="clear:both;"></div>
    <?php
    }
    ?>
<input type='hidden' name='business' value='<?php echo $paypal_id; ?>'>
<input type='hidden' name='cmd' value='_xclick'>
<input type='hidden' name='item_name' value='<?php echo $credits['AdminCredit']['tx_total_credits'];?> Credits'>
<input type='hidden' name='item_number' value='<?php echo $credits['AdminCredit']['id'];?>'>
<input type='hidden' name='amount' value='<?php echo $credits['AdminCredit']['nu_total_price'];?>'>
<input type='hidden' name='no_shipping' value='1'>
<input type='hidden' name='currency_code' value='USD'> 
```

就像上面在我的代码中一样，我必须更改单选按钮单击时的输入值。任何建议表示赞赏。

![在此处输入图像描述](../Images/847a41ab064b2500391e7d0f09b6b802.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:09:31.133

jQuery 会这样做：

```
$("#rbID").click(finction(){
  $("otherRB").attr("checked",true);
}); 
```

# web-services - 在spring rest xml响应中添加xml属性

> ID：11521165
> 
> 赞同：0
> 
> 时间：2012-07-17T11:02:06.410
> 
> 标签：web-services, spring-mvc

如何将内部属性添加到 Spring REST Web 服务响应？

我的网络服务返回的示例 xml：

```
<books>
<bookId>5</bookId>
<bookName>testBook</bookName>
</books> 
```

我想使用 book id 作为 bookName 的 xml 属性：

```
<books>
<bookName id="5">testBook</bookName>
</books> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:20:09.027

根据您的 java 类型是如何定义的，您可以使用`@XmlAttribute`或可能需要编写您的自定义[XmlAdapter来注释您的类](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html)

# c++ - 有没有办法在不重建任何项目的情况下重新链接解决方案？

> ID：11521167
> 
> 赞同：8
> 
> 时间：2012-07-17T11:02:16.613
> 
> 标签：c++, visual-studio-2008, visual-c++, linker, build-process

我在 Visual Studio 2008 中有一个大型 C++ 解决方案，其中包含许多项目，这些项目链接到其他库。有时我想将解决方案链接到不同的库，为此并创建一个新的 exe 文件，我需要重新链接解决方案。

但是，只有当至少有一个项目需要重建时，才能进行重新链接。所以我手动更改代码中的一行并将其改回...

有没有更好的方法只重做链接过程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T11:21:48.703

项目的上下文菜单中没有选项吗？仅项目 -> 仅链接？抱歉，我刚刚从我的德语开发工作室 2008 翻译了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:08:42.660

你可以删除exe。因此它需要重建，这是一个简单的链接。

尽管如果您使用不同的库，如果需要删除对象，您是否需要不同的标头 - 在这种情况下，最好重新构建主项目。

可能最完整但最难实现的替代方法是触摸（即更改修改时间戳）您要使用的库和标头，然后 Visual Studio 构建将执行最小构建。

# ios - CALayer 没有实现自定义 drawLayer:inContext: 方法

> ID：11521172
> 
> 赞同：0
> 
> 时间：2012-07-17T11:02:44.413
> 
> 标签：ios, cocoa-touch, core-animation, calayer

我在研究 CALayers 时看到了这个[解决方案。](https://stackoverflow.com/questions/2015353/using-calayer-delegate)我正在寻找一种在具有多个子层的 UIView 中实现自定义绘图的方法。我这样命名我的子层：

```
layer1.name = @"Back";
layer2.name = @"Middle";
layer3.name = @"Front"; 
```

我创建了由这些层实现的自定义方法

```
-(void)drawBackLayer:(CALayer *)layer inContext:(CGContextRef)ctx
-(void)drawMiddleLayer:(CALayer *)layer inContext:(CGContextRef)ctx
-(void)drawFrontLayer:(CALayer *)layer inContext:(CGContextRef)ctx 
```

问题是这些方法没有被实现，而是`drawLayer:inContext:`被视图根层使用的 ，被实现了四次。这意味着自定义层实现了此方法而不是自定义方法。谁能向我解释为什么？

**注意：**我在链接中提到的解决方案是 Dave Lee 提供的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:26:57.790

UIView 使用的层必须是实现这些消息的自定义 CALayer。获取 UIView 子类以使用特定层的方式是通过类方法“+(Class)layerClass”。

所以： - 子类化一个 UIView（或它的子类，如 UIImageView 等） - 实现 layerClass 方法，并返回 [MyCALayer 类]；

现在该视图将使用您的 CALayer 子类。

# java - 将格式化文本附加到 EditText 视图

> ID：11521178
> 
> 赞同：3
> 
> 时间：2012-07-17T11:03:14.943
> 
> 标签：java, android, android-edittext

我有一个 EditText 视图，用于向用户显示信息。我能够附加一个字符串，它可以使用以下方法正常工作：

```
 public void PrintToUser(String text){
         MAIN_DISPLAY.append("\n"+text);
      } 
```

该应用程序是一个有战斗的 RPG 游戏，当用户战斗时，我想以 RED 显示字符串。所以我尝试使用 SpannableString。（改变了方法）

```
 public void PrintToUser(String text, int Colour){

       if(Colour == 0){
       //Normal(Black) Text is appended
       MAIN_DISPLAY.append("\n"+text);

       }else{
       //Colour text needs to be set.

       //Take the CurrentText
       String CurrentText = MAIN_DISPLAY.getText().toString();
       CurrentText = CurrentText+"\n";

       SpannableString SpannableText = new SpannableString(CurrentText + text);  

       switch(Colour){
       case 1:
              SpannableText.setSpan(new ForegroundColorSpan(Color.RED), CurrentText.length(), SpannableText.length(), 0); 
       break;
       }

     //You cannot append the Spannable text (if you do you lose the colour)
    MAIN_DISPLAY.setText(SpannableText, BufferType.SPANNABLE);
    } 
```

这种新方法有效，新行显示为红色。

**问题**

1.  只有最后一行格式化为红色。如果将新行设置为红色，则由于我检索文本的方式会丢失以前的格式

    > 字符串 CurrentText = MAIN_DISPLAY.getText().toString();

2.  当我只将字符串附加到 EditText 时，它现在在使用 SetText 时显示 EditText 框的底部（最后一个输入），用户看到的是顶部。

**最后我的问题：**

有没有办法附加格式化的文本？

*或者...*我可以从 EditText 检索格式化文本，然后当我使用 .setText 时，我可以保持当前格式吗？

*如果是这样...*有没有办法将显示集中在底部而不是顶部？

*谢谢！如果需要更多信息，请发表评论我已经坚持了一段时间了。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T15:03:27.237

我的建议是使用以下方法：

```
myTextView.setText(Hmtl.fromHtml(myString)); 
```

myString 可以是以下格式：

```
String myString = "Hello <font color=\'#ff0000\'>World</font>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:16:55.643

以下修改`PrintToUser()`应该可以工作..

```
public void PrintToUser(String text, int Colour){
    ...
    ...
    Editable CurrentText = MAIN_DISPLAY.getText();
    int oldLength = CurrentText.length();
    CurrentText.append("\n" + text); 

    switch(Colour){
       case 1:
         CurrentText.setSpan(new ForegroundColorSpan(Color.RED), 
                             oldLength, CurrentText.length(), 0); 
       break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T14:51:42.830

尝试改变

```
SpannableText.setSpan(new ForegroundColorSpan(Color.RED), CurrentText.length(), SpannableText.length(), 0); 
```

在

```
SpannableText.setSpan(new ForegroundColorSpan(Color.RED), 0, SpannableText.length(), 0); 
```

# c++ - 从整数值返回固定长度的 std::string

> ID：11521183
> 
> 赞同：3
> 
> 时间：2012-07-17T11:03:34.413
> 
> 标签：c++, string, stringstream

问题 -> 将固定长度的字符串返回到 std::string*。
目标机器 -> Fedora 11 。

我必须派生一个接受整数值并将固定长度的字符串返回到字符串**指针**的函数；
例如 -> int 值在 0 到 -127 的范围内

所以对于 int 值 0 -> 它应该显示 000
来表示值 -9 -> 它应该返回 -009
来表示值 -50 -> 它应该返回 -050
​​来表示值 -110 -> 它应该返回 -110

所以简而言之，长度在所有情况下都应该相同。

**我做了什么：**我已经根据如下所示的要求定义了功能。

**我需要帮助的地方：**我已经导出了一个函数，但我不确定这是否是正确的方法。当我在 Windows 端的独立系统上测试它时，exe 有时会停止工作，但是当我将此功能包含在 Linux 机器上的整个项目中时，它可以完美运行。

```
 /* function(s)to implement fixed Length Rssi */
 std::string convertString( const int numberRssi, std::string addedPrecison="" )
 {
     const std::string         delimiter   =   "-";
                stringstream   ss;

     ss  << numberRssi ;
     std::string tempString = ss.str();
     std::string::size_type found = tempString.find( delimiter );
     if( found == std::string::npos )// not found
     {
         tempString = "000";
     }
     else
     {
         tempString = tempString.substr( found+1 );
         tempString = "-" +addedPrecison+tempString ;
     }
     return  tempString;

 }

 std::string stringFixedLenght( const int number )
 {
     std::string str;
     if( (number <= 0) && (number >= -9) )
       {
           str = convertString( number, "00");
       }
       else if( (number <= -10) && (number >= -99) )
       {
           str = convertString( number, "0");
       }
       else
       {
           str= convertString(number, "");
       }
     return str;
 }
// somewhere in the project calling the function
ErrorCode A::GetNowString( std::string macAddress, std::string *pString )
{
    ErrorCode result = ok;
    int lvalue;
    //some more code like iopening file and reading file 
    //..bla
    // ..bla     
    // already got the value in lvalue ;

    if( result == ok )
    {
         *pString = stringFixedLenght( lValue );
    }

    // some more code

    return result;

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T11:11:23.713

您可以使用[I/O 操纵器](http://www.cplusplus.com/reference/iostream/manipulators/)来设置所需的宽度，并用零填充。例如，这个程序打印`00123`：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main() {
    cout << setfill('0') << setw(5) << 123 << endl;
    return 0;
} 
```

但是，您必须自己处理负值：`cout << setfill('0') << setw(5) << -123 << endl`prints `0-123`，而不是`-0123`. 检查该值是否为负，将宽度设置为`N-1`，并在前面添加一个减号。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-17T11:15:12.843

如何使用`std::ostringstream`和标准输出格式化操纵器？

```
std::string makeFixedLength(const int i, const int length)
{
    std::ostringstream ostr;

    if (i < 0)
        ostr << '-';

    ostr << std::setfill('0') << std::setw(length) << (i < 0 ? -i : i);

    return ostr.str();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T11:42:17.950

请注意，您的示例与您的描述相矛盾：如果值为 -9，并且固定长度为 3，则输出应该是“-009”（如您的示例）还是“-09”（如您所描述）？如果是前者，显而易见的解决方案是仅使用以下格式标志`std::ostringstream`：

```
std::string
fixedWidth( int value, int width )
{
    std::ostringstream results;
    results.fill( '0' );
    results.setf( std::ios_base::internal, std::ios_base::adjustfield );
    results << std::setw( value < 0 ? width + 1 : width ) << value;
    return results.str();
} 
```

对于后者，只需删除 , 中的条件`std::setw`并通过 `width`。

作为记录，虽然我会避免它，但这是`printf`比`ostream`. 使用`snprintf`：

```
std::string
fixedWidth( int value, int width )
{
    char buffer[100];
    snprintf( buffer, sizeof(buffer), "%.*d", width, value );
    return buffer;
} 
```

您可能希望捕获 的返回值`snprintf`并在其后添加一些错误处理，以防万一（但`char`对于大多数当前机器来说，100 秒就足够了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:08:07.203

像这样？

```
#include <cstdlib>
#include <string>

template <typename T>
std::string meh (T x)
{
    const char* sign = x < 0 ? "-" : "";
    const auto mag = std::abs (x);
    if (mag < 10)  return sign + std::string ("00" + std::to_string(mag));
    if (mag < 100) return sign + std::string ("0" + std::to_string(mag));
    return std::to_string(x);
}

#include <iostream>
int main () {
    std::cout << meh(4) << ' '
              << meh(40) << ' '
              << meh(400) << ' '
              << meh(4000) << '\n';
    std::cout << meh(-4) << ' '
              << meh(-40) << ' '
              << meh(-400) << ' '
              << meh(-4000) << '\n';
} 
```

> `004 040 400 4000`
> 
> `-004 -040 -400 -4000`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T11:54:08.507

我对使用流的版本没有任何意见，但你可以自己做这一切，比你的代码更简单：

```
std::string fixedLength(int value, int digits = 3) {
    unsigned int uvalue = value;
    if (value < 0) {
        uvalue = -uvalue;
    }
    std::string result;
    while (digits-- > 0) {
        result += ('0' + uvalue % 10);
        uvalue /= 10;
    }
    if (value < 0) {
        result += '-';
    }
    std::reverse(result.begin(), result.end());
    return result;
} 
```

# android - TextView 中的 HTML 字符串

> ID：11521186
> 
> 赞同：-3
> 
> 时间：2012-07-17T11:03:45.207
> 
> 标签：android, android-layout

我有一个字符串，如下所示

```
&lt;p&gt;&lt;strong&gt;Lorem Ipsum is simply dummy text&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;enter code here
&lt;td&gt;
&lt;ul&gt;
&lt;li&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/li&gt;
&lt;li&gt;Ut imperdiet tortor sit amet enim bibendum eget fermentum lectus auctor.&lt;/li&gt;
&lt;li&gt;Cras mattis mi nec dolor iaculis a rhoncus ligula lacinia.&lt;/li&gt;
&lt;li&gt;Phasellus sit amet lorem ut nunc iaculis lacinia nec at diam.&lt;/li&gt;
&lt;li&gt;Duis nec turpis ac diam vehicula malesuada.&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;ul&gt;
&lt;li&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/li&gt;
&lt;li&gt;Ut imperdiet tortor sit amet enim bibendum eget fermentum lectus auctor.&lt;/li&gt;
&lt;li&gt;Cras mattis mi nec dolor iaculis a rhoncus ligula lacinia.&lt;/li&gt;
&lt;li&gt;Phasellus sit amet lorem ut nunc iaculis lacinia nec at diam.&lt;/li&gt;
&lt;li&gt;Duis nec turpis ac diam vehicula malesuada.&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse interdum sem ante, scelerisque vehicula libero. Sed porttitor tincidunt lacus, et lacinia mauris placerat at. Fusce laoreet scelerisque turpis sit amet dignissim. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mollis, urna sed adipiscing posuere, erat orci facilisis neque, quis fringilla ipsum neque ut libero. Sed eget arcu massa, sodales fermentum lorem. Morbi fringilla commodo magna lobortis porttitor. Etiam tortor elit, cursus non placerat vel, dapibus vitae velit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam euismod nisl vitae orci viverra imperdiet.&lt;/strong&gt;&lt;/p&gt; 
```

我想在没有 HTML 标记的情况下显示所有这些。

请帮助我......如果可以的话，请建议我以任何方式做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:05:02.500

尝试使用`Html.fromHtml(yourHtml)`..
[http://developer.android.com/reference/android/text/Html.html](http://developer.android.com/reference/android/text/Html.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:09:13.240

首先用真正的 HTML 制作它，即 <> 然后用正则表达式删除 HTML 标签。

```
mTextView.setText(HTML.fromHtml("&lt;p&gt;&lt;strong&gt;L...." ));
String regexNoHTML = "\\<.*?\\>";    
String finalStringNoHTML = mTextView.getText.replaceAll(noHTMLString, "");
mTextView.setText(finalStringNoHTML); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:09:20.633

嗨，您可以像下面这样分配

```
txtUpgrade.setText(Html.fromHtml(getString(R.string.upgrade_text))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:09:48.830

首先将您的字符串值存储到一个变量中，然后使用下面的代码将此字符串显示到 textview 中。

```
String s="&lt;li&gt;Duis nec turpis ac diam vehicula malesuada.&lt;/li&gt;";
mTxtView1.setText(Html.fromHtml(s)); 
```

# c# - 在三层项目中放置 DTO / POCO

> ID：11521192
> 
> 赞同：3
> 
> 时间：2012-07-17T11:04:06.957
> 
> 标签：c#, entity-framework, poco, dto, 3-tier

我一直在为网站重新编写后端，并将其移向三层架构。

我的意图是这样构建它：

`Web site <--> WCF Service (1) <--> Business Layer (2) <--> Data Layer (3)`

我的问题是在这个结构中放置 DTO。我需要使用 DTO 在业务层和 WCF 服务之间以及从 WCF 服务到消费网站之间移动数据。

在我在这里的研究期间，我读过一些很好的讨论，尽管我有点摸不着头脑：

*   Davide Piras 在[这篇文章](https://stackoverflow.com/a/7474357/543538)中提出了一些重要的观点，如果我要遵循这个设计，那么我会在一个单独的项目中声明 POCO 的接口。然后，这些将由层 (1) 和 (2) 实施。虽然我喜欢使用接口，但通过在 (1) 和 (2) 中声明 POCO，然后使用 AutoMapper 之类的东西来回复制它们的数据，我似乎确实可以为自己做更多的工作。

*   [这篇文章](https://stackoverflow.com/a/7510526/543538)使用了一个系统，在该系统中创建了一个业务对象项目，该项目将被所有层引用。这似乎比其他解决方案更简单，并且似乎引导我找到一个解决方案

`Web site <--> WCF Service (1) <--> Business Layer (2) <--> Data Layer (3)`

 ````
^               ^                       ^
|               |                       |
[ -- Business Objects Referenced here --] 
````  `我的问题是：跨解决方案的三层共享业务对象是否有代码味道，或者我上面列出的两种方法只是破解同一个问题的两种不同方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:29:09.630

我会说这通常取决于您正在构建的项目的复杂性。对于我构建的较小项目，我在各个层之间共享我的“实体”（它们只是简单的 DTO，具有 getter 和 setter 的可序列化数据桶），并且不太关心这一点。最大的缺点是逻辑分散在整个项目中（不仅在“业务层”中）并且到处都是程序风格。这看起来真的很像贫血领域模型，但由于项目没有增长太多，复杂性并没有蔓延。Entity Framework 有一些模板，您可以根据这些模板构建实体（如果我没记错的话，它们被称为自我跟踪实体？）。

对于中/大型项目，我不会使用这种方法，而是将实体和 DTO 分开，因为它们将扮演不同的角色。DTO 可能具有与您的实体完全不同的形状，并且尝试在层/层之间共享它们通常会很臭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T16:15:30.397

让我们将您的 UI（网站）和服务（WCF + BL + DAL）视为两个不同的实体。

*   如果您对两者都有 100% 的控制权，则应该选择方法 #2，因为它将避免 WCF 代理对象和 UI 层中的业务对象之间的转换。

*   否则，您最好使用方法＃1，因为其中一个实体是一种“黑匣子”，并且会受到外部利益相关者的更改。因此，维护一组内部业务对象更安全。这将需要在您的业务对象和 WCF 代理对象之间进行转换（通过扩展方法或转换器框架）。

现在，不完全确定您的 UI 层复杂性或其实现（MVC、WebForms 等），因此您可能需要也可能不需要 View 特定对象（数据绑定更轻，序列化为 JSON 更快等），让我们将此对象称为`Model`.

*   如果您不需要特定的 UI `Model`，建议将您的业务对象标记为`DataContract`（在 WCF 的上下文中）并跨层使用它们。不要忘记显式标记实体，就`Serializable`好像您正在通过 Web ( `$.ajax`) 调用 WCF。

*   否则，`DataContract`在服务和翻译器中使用`DataContract`以`Model`在 UI 层中转换。A`Service Adapter`在这里很合适 - 它位于 UI 层，负责使用 WCF 服务并在 和 之间进行`DataContract`转换`Model`。您可以`Service Proxy`在 UI 层中使用 a，它是 WCF 服务的包装器，可在 Web 上使用。

最后，您是不是缺少对数据层中业务对象的引用？我相信您将从数据层本身的数据存储中填充您的业务对象。`

# google-chrome-extension - 为 chrome、safari、firefox 和 IE 扩展创建单一设置？

> ID：11521203
> 
> 赞同：2
> 
> 时间：2012-07-17T11:05:09.983
> 
> 标签：google-chrome-extension, cross-browser, firefox-addon, bho, safari-extension

我已经为所有四种主流浏览器构建了一个扩展，比如 firefox(.xpi)、chrome(.crx)、safari(.safariextz) 和 IE(.exe)。我可以单独安装这些扩展。但是我需要为所有四个扩展设置一个设置。谁能指导我如何为所有四个扩展创建一个设置项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:45:41.440

您可以使用任何类型的安装程序来执行此任务。

在 Windows 上，我使用[NSIS](http://nsis.sourceforge.net/Main_Page)，它具有允许您写入注册表、操作文件、检测浏览器版本等的功能/插件。这基本上是您安装浏览器扩展程序所需的唯一东西

# eclipse - 在 Eclipse 中使用大 URL 进行调试

> ID：11521212
> 
> 赞同：0
> 
> 时间：2012-07-17T11:06:07.407
> 
> 标签：eclipse, debugging, url, jakarta-ee, tomcat6

我正在使用从浏览器发送到服务器的 URL（来自应用程序日志）在 eclipse 上调试我的应用程序。然而，在应用程序发生一些变化后，形成的 URL 非常大，因此我无法再调试它了。（我正在使用 GET 方法）。

有什么办法可以让它工作吗？

# android - android中的文本字段动画

> ID：11521213
> 
> 赞同：1
> 
> 时间：2012-07-17T11:06:08.437
> 
> 标签：android, textview

谁能告诉我如何在android中创建动画效果。我想要`TextView`说姓名、年龄、性别从左侧移动到屏幕上的特定位置。例如：就像`TextView`从屏幕的左端移动一样。这些字段垂直排列在线性布局上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:31:17.620

在 res/anim/ 中创建一个名为 ltor.xml 的新 xml，其中包含内容

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
        <translate android:fromXDelta="-100%" android:toXDelta="0%"
          android:fromYDelta="0%" android:toYDelta="0%"
         android:duration="700"/>
       </set> 
```

在要设置动画的视图中提供以下属性。

`android:animation="@anim/ltor"`

# xcode - cocos2d中对角线的碰撞检测

> ID：11521221
> 
> 赞同：0
> 
> 时间：2012-07-17T11:06:31.517
> 
> 标签：xcode, cocos2d-iphone, collision-detection

我正在使用 Cocos2d 框架开发一款小型 iPhone/iPad 游戏。基本上游戏的想法很简单，有一个球以一定的速度移动。用户可以画一条线，使球在相反的方向反弹。

现在我已经让球移动了，用户也可以画一条线。（当他画一条线时，它会成为一个数组的成员，并在几秒钟后消失。）

但问题是如何检测球和线之间的碰撞？线不必是水平或垂直的，也可以是对角线。这完全取决于用户如何绘制这条线。

我有这条线的坐标：请参阅我上一个问题的答案：[带角度的 CGRect](https://stackoverflow.com/questions/11230090/cgrect-with-an-angle)

你们能指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:33:39.167

您可以使用 box2d 来检测碰撞。实际上，如果你的球和这些线在 b2World 中有实体，你将无法自己检查碰撞。所有的变化、反弹等物理都会为你完成。您只需要根据其身体在物理世界中的位置来同步对象的视图位置（也可以同步角度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:08:49.650

您可以使用像素完美碰撞，所以当球和线碰撞时，它不是检查矩形，而是检查像素碰撞......

在这个论坛你得到你想要的..

[http://www.cocos2d-iphone.org/forum/topic/18522/page/3](http://www.cocos2d-iphone.org/forum/topic/18522/page/3)

# jquery - 从 Spring MappingJacksonJsonView 中访问 JSON

> ID：11521227
> 
> 赞同：0
> 
> 时间：2012-07-17T11:06:53.567
> 
> 标签：jquery, json, spring, jackson

下面是我尝试访问 json 的方式，我需要用 jQuery 更改 dataType 吗？

```
service : 
    @RequestMapping("VIEW")
    @ResourceMapping("myUrl")
    public MappingJacksonJsonView savePortletData() {

        jsonString = outStream.toString();      
        argMap.addAttribute("portletDataResponseJson", "{\"test\": \"tester2\"}");

        return new MappingJacksonJsonView();
        }
        }

jquery:  
        $.ajax({
        url: "myUrl",       
        type: 'post',
        dataType : "json",
        success : function(jsonResponse) {  
        console.log('JSON IS '+jsonResponse;
        },
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:23:58.990

我们正在使用 @ResponseBody 对象（要转换为 json）

```
public @ResponseBody PortletData savePortletData(){
} 
```

所以你不需要创建单独的视图，spring会检测json作为请求并自动应用消息转换器。

# c# - 在 asp.net 中将行添加到未绑定的 DataGridView

> ID：11521230
> 
> 赞同：0
> 
> 时间：2012-07-17T11:07:17.863
> 
> 标签：c#, asp.net, datagridview

我想在 Asp.net 中向 UnBounded DataGridView 添加一行。我可以在 Winform 中创建这样的行，但不知道如何在 ASPX 中添加行，因为它没有 GridView.Rows.Add() 方法。

这是我的代码

在页面加载事件中声明数据表。

```
dt.Columns.Add("Account_Code", Type.GetType("System.String"));
dt.Columns.Add("Account_Name", Type.GetType("System.String"));

dt.Rows.Add();
int rowCount=dt.Rows.Count-1;
dt.Rows[rowCount]["Account_Code"] = txtAccountCode.Text;
dt.Rows[rowCount]["Account_Name"] = txtAccountName.Text;
gvVoucherDetail.DataSource = dt;
gvVoucherDetail.DataBind(); 
```

当我在调试模式下看到数据表时，它会显示添加到 DataTable 的行。但不知道为什么它没有显示在网页中。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:26:58.517

您需要将数据表保存在会话变量中以在回发期间保持状态。这是我用来让它工作的链接。

[http://www.tek-tips.com/viewthread.cfm?qid=1282063](http://www.tek-tips.com/viewthread.cfm?qid=1282063)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:09:28.950

因为当你绑定它时，它会清除所有现有的行并注入它的新行。如果您希望在 DataBind 调用之后显示手动添加的行，则必须在 RowDataBound 事件完成后或在该过程中添加它们。

# c# - 从数据集中读取 xml

> ID：11521231
> 
> 赞同：0
> 
> 时间：2012-07-17T11:07:26.060
> 
> 标签：c#, xml, datareader

我发布了一个关于这个主题的问题，但没有运气，所以这里是：

我有一个 asmx Web 服务，通过该 Web 服务，我使用给定的 XSD 模式解析给定的 XML 文档。我以某种方式解析 XML 文档，首先将 XML 转换为字符串，然后将其放入 DataSet。我正在解析数据集并将数据传递给数据库。

我有一个小问题，我有这个复杂的节点：

```
<QuantityInIssueUnit uom="KO">288.000</QuantityInIssueUnit> 
```

我必须使用 xsd 提取“KO”和“288.000”值，我编写了以下代码：

```
if (!dr_art_line.Table.Columns.Contains("QuantityInIssueUnit") || dr_art_line["QuantityInIssueUnit"].ToString().Length <= 0)
{
    QuantityInIssueUnit.Value = 0;
    QuantityInIssueUnit.uom = "";
}
else
{
    QuantityInIssueUnit.Value = Convert.ToDecimal(dr_art_line["QuantityInIssueUnit"]);
    QuantityInIssueUnit.Value = QuantityInIssueUnit.Value.ToString().Length > 15 ? Convert.ToDecimal(QuantityInIssueUnit.Value.ToString().Substring(0, 14)) : QuantityInIssueUnit.Value;

    QuantityInIssueUnit.uom = Convert.ToString(dr_art_line["QuantityInIssueUnit uom"]);
} 
```

但是，它不起作用，我假设没有节点“QuantityInIssueUnit”，它总是 0...

那么有没有办法写这个但使用DataRow？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:10:24.507

到目前为止，我编写了这段代码并且它正在工作：

```
using (XmlReader reader = XmlReader.Create(new StringReader(str)))
                            {
                                //UOM
                                reader.ReadToFollowing("QuantityInIssueUnit");
                                reader.MoveToFirstAttribute();
                                string value = reader.Value;
                                QuantityInIssueUnit_uom = value;  
                            } 
```

我得到 QuantityInIssueUnit_uom = KO，这就是我想要的，现在我只需要写一个 pic 就可以得到 288.000，任何建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:13:52.070

这也是值 288 的代码

```
using (XmlReader reader = XmlReader.Create(new StringReader(str)))
                            {
                                reader.ReadToFollowing("QuantityInIssueUnit");

                                if (reader.Read())
                                {
                                    // I want to get all the TEXT contents from the this node
                                    QuantityInIssueUnit_value = reader.Value;

                                }

                            } 
```

这有点不同，但它有效....

# c - 指针未给出预期结果

> ID：11521232
> 
> 赞同：0
> 
> 时间：2012-07-17T11:07:29.710
> 
> 标签：c, pointers

我是初学者。当我发现一些奇怪的东西时，我正在使用指针：

```
#include<stdio.h>

int* fun(int*);

int main()
{
    int i=4,*j;
    j=fun(&i);
    printf("%d ",*j);//gives correct answer -> how??
    printf("%d",*j);//gives incorrect answer
}

int* fun(int *i)
{
    int k;
    k=*i;
    return (&k);
} 
```

在`main(), I am using`printf("%d",*j);` 2 次。第一个给了我正确的答案，但第二个没有。为什么？

但这很好用-#include int *func();

```
int main()
{
int *p;
p=func();
printf("%u", p);
printf("\n%d", *p);
printf("\n%d", *p);
printf("\n%d", *p);
printf("\n%d", *p);

}

int* func()
{
int i=10;
printf("%u", &i);
printf("\n%d", i);
return (&i);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T11:09:23.923

您通过返回指向局部变量的指针来调用*未定义的行为。*函数`fun`返回后，局部变量占用的空间`k`不再有效。实际上，之前使用的堆栈空间`fun`可能会被第一次调用覆盖`printf`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:12:51.577

您正在返回本地变量的地址`fun`；一旦`fun`退出，该变量不再存在，并且指针不再有效。严格来说，行为是未定义的。

最有可能发生的情况是，`k`在第一次调用`printf`.

# android - 在 android 中流式传输和播放 .m4a 流（iTunes 预览网址）

> ID：11521234
> 
> 赞同：11
> 
> 时间：2012-07-17T11:07:36.717
> 
> 标签：android, stream, media-player, itunes, aac

我想流式传输和播放 iTunes 预览网址，例如[http://a2.mzstatic.com/us/r1000/044/Music/e9/40/ec/mzm.evyxvimp.aac.p.m4a](http://a2.mzstatic.com/us/r1000/044/Music/e9/40/ec/mzm.evyxvimp.aac.p.m4a)。我尝试使用[AAC 解码器 Android](http://code.google.com/p/aacplayer-android/)库。通过它 **我可以**流式传输和播放 AAC 流 URL，例如[http://http.yourmuze.com:8000/play/paradise/l.aac](http://http.yourmuze.com:8000/play/paradise/l.aac)。但它 dnt 流 m4a url（Logcat 说`java.io.FileNotFoundException: http://a2.mzstatic.com/us/r1000/044/Music/e9/40/ec/mzm.evyxvimp.aac.p.m4a`）。

**如何流式传输 .m4a 链接？**

我的代码：

```
public class AACPlayerActivity extends Activity implements OnClickListener,PlayerCallback{

private Button btnPlay;
private ProgressBar progress;
private Handler uiHandler;

private MultiPlayer multiPlayer;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnPlay = (Button)findViewById(R.id.playButton);
    progress = (ProgressBar)findViewById(R.id.progress);
    progress.setVisibility(View.INVISIBLE);

    btnPlay.setOnClickListener(this);

    uiHandler = new Handler();
}

public void playerException(Throwable arg0) {
    // TODO Auto-generated method stub

}

public void playerMetadata(String arg0, String arg1) {
    // TODO Auto-generated method stub

}

public void playerPCMFeedBuffer(boolean arg0, final int audioBufferSizeMs, final int audioBufferCapacityMs) {
    // TODO Auto-generated method stub
    uiHandler.post(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
             progress.setProgress( audioBufferSizeMs * progress.getMax() / audioBufferCapacityMs );
        }
    });
}

public void playerStarted() {

    uiHandler.post(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            progress.setProgress( 0 );
            progress.setVisibility( View.VISIBLE );
        }
    });

}

public void playerStopped(int arg0) {
    // TODO Auto-generated method stub
    uiHandler.post(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            progress.setVisibility( View.INVISIBLE );
        }
    });

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if(btnPlay.getText().equals("Play")){
        start();
        btnPlay.setText("stop");
    }else{
        stop();
    }
}

 private void start() {
        stop();
        // we cannot do it in playerStarted() - it is too late:
        multiPlayer = new MultiPlayer(this,MultiPlayer.DEFAULT_AUDIO_BUFFER_CAPACITY_MS, MultiPlayer.DEFAULT_DECODE_BUFFER_CAPACITY_MS);
        multiPlayer.playAsync("http://a2.mzstatic.com/us/r1000/044/Music/e9/40/ec/mzm.evyxvimp.aac.p.m4a");
    }

    private void stop() {
        if (multiPlayer != null) {
            multiPlayer.stop();
            multiPlayer = null;
        }
    } 
```

**更新**

1.  我尝试使用[ServeStream](http://sourceforge.net/projects/servestream/)它说无法打开网址。
2.  我尝试使用[Vitamio SDK](http://vov.io/vitamio/)也无法播放`itunes preview Urls`.

`itunes preview urls`安卓可以玩吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T03:47:25.917

看看[ServeStream](http://sourceforge.net/projects/servestream/)：

> 适用于 Android 的 HTTP 媒体服务器浏览器和流播放器。
> 
> **特征：**
> 
> *   支持 Android 2.2+、3.0+（不支持 < 2.2）
> *   播放 Android 支持的媒体文件
> *   对 m3u、m3u8、pls 和 asx 播放列表的额外支持
> *   支持多任务/在后台播放音频
> *   重复和随机播放模式
> *   闹钟支持
> *   主屏幕小部件
> *   利用 HTML 解析来导航为 HTML 页面提供服务的 HTTP 媒体服务器

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T15:48:40.807

Android 支持 M4A 和 AAC。我建议阅读此页面：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

您应该注意的几件事 a) 较旧的设备可能没有特定的编码或格式支持（特别是，如果您低于 OS 2.2） b) 一些便宜的设备可能在音频/视频堆栈中集成了非常奇怪的东西。我在几个便宜的中国设备上看到了它。

所以，你可以尝试使用 MediaPlayer API 来播放它：http: [//developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

您可以在这里查看示例： [http ://blog.endpoint.com/2011/03/api-gaps-android-mediaplayer-example.html](http://blog.endpoint.com/2011/03/api-gaps-android-mediaplayer-example.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:28:22.097

它与媒体格式等无关。Apple 只是阻止非 Apple 客户访问预览。您可以欺骗 User-Agent 标头并访问预览。

在此处阅读我的相关博客文章：[http](http://ahmetalpbalkan.com/blog/how-to-bypass-itunes-music-previews-protection/) ://ahmetalpbalkan.com/blog/how-to-bypass-itunes-music-previews-protection/这就是为什么您在 Android 上播放音乐时得到 404 的原因。这应该回答你的问题。

# ruby - 安装rvm后的困难

> ID：11521237
> 
> 赞同：1
> 
> 时间：2012-07-17T11:08:05.697
> 
> 标签：ruby, rvm, dpkg

我已经正确安装了rvm。

但是，每次安装某些东西时，我都会收到此错误：

```
Errors were encountered while processing:

ruby-rvm

Error in function: 

Setting up ruby-rvm (1.6.9-0ubuntu2) ...

dpkg-statoverride: error: syntax error: unknown group 'admin' in statoverride file

dpkg: error processing ruby-rvm (--configure):

subprocess installed post-installation script returned error exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:37:41.857

你不应该使用由 ubuntu 打包的 rvm，它很旧，并且附带了已经在 rvm 中修复的问题，但是该包没有更新为使用稳定版本。

使用这个答案：[https](https://stackoverflow.com/a/9056395/497756) ://stackoverflow.com/a/9056395/497756来修复。

# performance - 完整磁盘和 SQL Server 性能

> ID：11521240
> 
> 赞同：0
> 
> 时间：2012-07-17T11:08:24.783
> 
> 标签：performance, sql-server-2008

我有一台服务器，里面有 2 个硬盘 - 每个 400 GB。一个托管 SQL Server 文件，另一个仅用于备份。备份磁盘不时填满，我必须进去删除旧备份。我不是 DBA，所以我仍在尝试找出一种自动删除旧备份的方法。

如果备份磁盘几乎已满且剩余空间不足 100 MB，SQL Server 是否会运行缓慢；即使它上面没有数据库文件也只有备份？

保存数据库文件的第一个磁盘永远不会满。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:21:42.283

您有性能问题（'sql server 性能不佳'），因此应将其作为性能问题进行调查。遵循[Waits 和 Queues 之](http://technet.microsoft.com/en-us/library/cc966413.aspx)类的方法。遵循[性能故障排除流程图](http://sqlcat.com/sqlcat/b/presentations/archive/2008/04/18/troubleshooting-sql-server-2005-2008-performance-and-scalability-flowchart.aspx)。停止[猜测](http://rusanu.com/2010/03/31/the-bizzaro-guide-to-sql-server-performance/)和采取随机行动。措施。

# javascript - 值和引用类型

> ID：11521242
> 
> 赞同：20
> 
> 时间：2012-07-17T11:08:29.870
> 
> 标签：javascript

我知道 JavaScript 中有 6 种数据类型。

JavaScript 中的“引用”类型是什么，JavaScript 中的“值”数据类型是什么？有人可以按这两个类别列出它们吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-17T11:11:41.040

`undefined`, `null`, `number`, `string`,`boolean`和`object`其中只有`object`一个“参考”类型。

在 javascript 中没有引用分配或引用传递，每当您传递/分配“引用”类型时，您传递/分配引用的副本，您不会创建具有不同含义的引用的引用。

您可以使用以下功能：

```
function isReferenceType( value ) {
     return Object(value) === value;
}

function isPrimitiveType( value ) {
     return Object(value) !== value;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T11:19:07.623

来自[标准#sec-8](http://ecma-international.org/ecma-262/5.1/#sec-8)

> ECMAScript 语言类型有 Undefined、Null、Boolean、String、Number 和 Object

唯一的`"reference"`类型是`Object`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T11:16:54.703

undefined、null、number、string、boolean 和 object

object 是一个引用类型。

# ruby-on-rails - attr_accessor，无法访问属性

> ID：11521249
> 
> 赞同：1
> 
> 时间：2012-07-17T11:09:09.713
> 
> 标签：ruby-on-rails, ruby

这可能是一个非常愚蠢的问题，但我们开始吧

```
class Foo < ActiveRecord::Base
 attr_accessor :group_id
end 
```

来自*irb*

```
# gets record which has group_id set to 106    
foo = Foo.find(1)
foo.group_id
=> nil 
```

如果我去移除

> attr_accessor :group_id

一切正常

```
foo = Foo.find(1)
foo.group_id
=> 106 
```

我的问题是为什么？不应该 attr_accessor 为属性 :group_id 创建访问器/突变器，这就是为什么一切都应该工作的原因。我错过了什么？

**更新**

好的答案如下，正如我在这里的动机的解释是我想使用某些属性的质量分配（从 Rails 3.2.x 开始你需要这个）。为此，您需要 attr_accessible ，我发现这样代码更干净，当然如果负责任地使用:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:13:24.980

看起来`group_id`已经是您对象上的一个属性（从省略`Foo`时返回 106 的事实可以看出）。`attr_accessor`通过添加`attr_accessor`，您将覆盖已经存在的内容并创建一个名为 reader 和 writer 的方法`group_id`。新定义的返回`group_id`为零，因为您没有定义任何内容。

从概念上讲，你最终会得到这样的结果：

```
class Foo < ActiveRecord::Base
  def group_id  # overriding previous definition of 'group_id'
    nil
  end
end 
```

* * *

**编辑：**

如果您的目标是公开属性，那么可以，使用`attr_accessible`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T11:15:29.723

这是因为 ActiveRecord 自动将数据库表中的属性映射到实际模型中的属性。当您添加时`attr_accessor`，您使用自己的新定义属性掩盖了数据库属性。

基本上，rails 会自动`attr_accessor`为相应数据库表中的所有属性定义（或类似的东西）。

如果您正在寻找一些方法来使您的某些属性仅可用于多重分配，您应该查看`attr_accessible`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:17:31.333

如果没有访问器，肯定你`'belongs_to :group'` 的 Foo 模型中有一个，所以如果你调用 'group_id' 到 'Foo' 的一个实例，你将得到这个字段的值。

例如，如果您设置了一个名为该属性（group_id）的访问器，它将覆盖原始字段，如果没有分配任何值，它将返回 nil。

```
class Foo < ActiveRecord::Base
  attr_accessor :group_id
end

# gets record which has group_id set to 106    
foo = Foo.find(1)
foo.group_id
=> nil
foo.group_id = "wadus"
=> "wadus"
foo.group_id
=> "wadus" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:20:31.330

如果表中有名为 group_id 的列，则 ActiveRecord 会为您定义访问器。当你像你一样覆盖它时，你的调用只是搜索一个名为 group_id 的常规实例变量，它返回 nil。

# android - CSS：在冰淇淋三明治浏览器上，媒体查询不再起作用

> ID：11521258
> 
> 赞同：1
> 
> 时间：2012-07-17T11:09:30.577
> 
> 标签：android, html, css, mobile, android-4.0-ice-cream-sandwich

我有一个 HTC Evo 3D。当我的手机运行 Gingerbread 时，如果我使用手机访问[莱斯特市议会网站](http://www.leicester.gov.uk/ "莱斯特市议会")，它将尊重加载 CSS 链接元素，如下所示：

```
<link href="mobile.css"  
      media="only screen and (max-device-width: 520px)" 
      type="text/css" 
      rel="stylesheet" /> 
```

（桌面浏览器会忽略这些相同的链接元素。）

由于我升级到 Ice Cream Sandwich，因此无法加载上述 CSS 链接元素。结果是该网站看起来与桌面版本相同。

我能做些什么来制作上面的 CSS 链接，适用于 ICS 的浏览器吗？

**编辑：**自从从事这项工作以来，我发现 ICS 上的 Chrome 按预期工作，所以我现在将使用它进行移动测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:30:26.020

Android 添加了在 ICS 中查看桌面版或移动版网站的选项。您是否尝试从设置（第二个菜单按钮）中取消选中“查看桌面站点”？

有关这方面的更多详细信息，请使用“ICS 浏览器查看桌面版”谷歌

# php - 在 CakePHP 中将斜杠参数传递给 requestAction

> ID：11521261
> 
> 赞同：4
> 
> 时间：2012-07-17T11:09:41.227
> 
> 标签：php, cakephp, url-routing, cakephp-2.0

我正在尝试将字符串传递给 requestaction。

在**myController**文件中：

```
public function myAction($name) {
    $data = unserialize( file_get_contents( $name) );
    return $data;
} 
```

在我的视图文件中：

```
$f="/home/myaccount/file.txt";

$g = $this->requestAction( array( 'controller' => 'myController',
         'action' => 'myAction' ), $f ); 
```

如何传递具有特殊字符的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:01:55.297

希望以下代码对您有所帮助：

```
 $g = $this->requestAction('/myController/myAction', array('pass' => urlencode($f)); 
```

[此链接](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3arequestAction)将指导您如何访问控制器操作中的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:09:41.227

正确的解决方案是：

```
$g = $this->requestAction('app/myController/'.urlencode($f)); 
```

# php - 使用 Slim 框架具有相同匿名回调的多个路由

> ID：11521264
> 
> 赞同：12
> 
> 时间：2012-07-17T11:09:50.837
> 
> 标签：php, slim

如何定义使用相同匿名回调的多个路由？

```
$app->get('/first_route',function()
{
   //Do stuff
});
$app->get('/second_route',function()
{
   //Do same stuff
}); 
```

我知道我可以使用对可以工作的函数的引用，但我更喜欢使用匿名函数的解决方案以与代码库的其余部分保持一致。

所以基本上，我正在寻找的是一种做这样的事情的方法：

```
$app->get(['/first_route','/second_route'],function()
{
       //Do same stuff for both routes
}); 
```

〜或〜

```
$app->get('/first_route',function() use($app)
{
   $app->get('/second_route');//Without redirect
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-02T18:54:23.550

您可以使用条件来实现这一点。我们用它来翻译 URL。

```
$app->get('/:route',function()
{
    //Do same stuff for both routes
})->conditions(array("route" => "(first_route|second_route)")); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-17T11:19:31.503

我无法为您提供特定于框架的解决方案，但如果有帮助，您可以参考匿名函数：

```
$app->get('/first_route', $ref = function()
{
   //Do stuff
});
$app->get('/second_route', $ref); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-18T09:42:52.933

回调是代表。所以你可以做这样的事情：

```
$app->get('/first_route', myCallBack);
$app->get('/second_route', myCallBack);

function myCallBack() {
    //Do stuff
} 
```

# android - 基于gps的报警

> ID：11521266
> 
> 赞同：0
> 
> 时间：2012-07-17T11:10:00.047
> 
> 标签：android, gps

我想开发一个Android应用程序，使用gps跟踪在特定识别位置提醒用户，首先我们识别一些特定区域，当用户接近这个区域时，他必须得到警报，请帮助我从基础知识，因为我是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:14:24.877

看一下[`LocationManager.addProximityAlert`](http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert%28double,%20double,%20float,%20long,%20android.app.PendingIntent%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:28:38.800

```
 i think you have to require following steps like
    [1] google md5 certificate for your map
    see https://developers.google.com/maps/documentation/android/mapkey
    [2] make gps location listenr service in your project
    see http://www.javacodegeeks.com/2010/09/android-location-based-services.html
    [3] also Create AlaramService which notify the location and Alert using Brodcase Receiver
       here do require code for AlaramService
    [4] Add Require Permission and service register  in Manifest 
      like 
      <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>  
        <uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"></uses-permission>  
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"> </uses-permission>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
        <uses-permission android:name="android.permission.INTERNET"></uses-permission>
this some steps which may useful to you 
```

# c# - 从列表 c#.Net 4 将字符串“yyyyMMdd”格式化为“dd/MM/yyyy”

> ID：11521267
> 
> 赞同：1
> 
> 时间：2012-07-17T11:10:02.317
> 
> 标签：c#, asp.net, .net, c#-4.0

我有一个字符串，我从一个代表日期的来源获得，就像这样 "19941201" **(Year+Month+Day)**。

我需要它是**"01/12/1994"**甚至是**"01-12-1994"**。

我正在**使用 linq 从 List 中**检索这些数据。

有没有一种“整洁”的方法来做到这一点？我使用 c# 和 .Net4.0 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T11:12:15.937

```
DateTime datetime = DateTime.ParseExact(date, "yyyyMMdd", CultureInfo.InvariantCulture); 
```

然后你可以简单地做`datetime.ToString("dd/MM/yyyy");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:20:06.323

看看[这里](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

并[在这里阅读](http://www.dotnetperls.com/datetime)

当您阅读而不是其他人为您阅读时，您将获得更好的理解。我学会了艰难的方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:24:13.567

```
 static void Main(string[] args)
    {
        Console.WriteLine(ParseDate("19941201"));
        Console.ReadLine();
    }

    public static string ParseDate(string uglyDate)
    {
        return DateTime.ParseExact(uglyDate, "yyyyMMdd", CultureInfo.InvariantCulture).ToString("dd/MM/yyyy");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:13:24.330

看看 DateTime.Parse() 和 DateTime.ToString() 方法：http: [//msdn.microsoft.com/en-us/library/1k1skd40.aspx](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

# opengl - openGL：选择纹理单元而不是另一个纹理单元的标准

> ID：11521268
> 
> 赞同：0
> 
> 时间：2012-07-17T11:10:04.083
> 
> 标签：opengl, graphics, textures

我总是只画一个纹理选择 0 纹理单元

```
glActiveTexture(GL_TEXTURE0); 
```

选择另一个纹理单元的标准是什么？

我的意思是：如果我必须使用多个纹理，我应该选择哪个单元？我是 openGL 的初学者，我想知道是否可以为我的所有图形纹理使用相同的 0 纹理单元。有多少个纹​​理单元？如果有 N 个纹理单元，我可以使用最多 N 个纹理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:27:33.673

“纹理单元的数量取决于实现，但必须至少为两个。”

参见：[glActiveTexture 文档](http://www.opengl.org/sdk/docs/man/xhtml/glActiveTexture.xml)

在 glActiveTexture() 调用之后，您使用 glBindTexture() 绑定纹理。您可以将多个纹理绑定到同一个单元。但只有其中一个被采样。

请参阅：[纹理绑定](http://www.opengl.org/wiki/Texture_Binding)

因此，如果您有 N 个纹理单元，您最多可以在一个着色器中采样 N 个纹理。

# bash - 尝试将 awk 结果传递给变量时出错

> ID：11521271
> 
> 赞同：0
> 
> 时间：2012-07-17T11:10:47.700
> 
> 标签：bash, awk

我正在尝试创建一个简单的 bash 脚本来从 CURL 获取 HTTP 代码

所以这是我的代码：

```
#!/bin/bash
AWKRESULT = $(curl -sL -w "result=%{http_code}" "http://192.168.8.69:8080/myReport/archive" -o "/tmp/reportlog" | awk -F= '{print $2}')
echo $AWKRESULT 
```

的结果

```
curl -sL -w "result=%{http_code}" "http://192.168.8.69:8080/myReport/archive" -o "/tmp/reportlog" | awk -F= '{print $2}' 
```

是 500。

然而它总是有这个结果：

> ./test.sh[2]：AWKRESULT：未找到。

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:13:17.403

删除周围的空格`=`：

```
AWKRESULT=$(...) 
```

# c# - 在 .net 中编辑 xsd 枚举值

> ID：11521273
> 
> 赞同：0
> 
> 时间：2012-07-17T11:10:55.000
> 
> 标签：c#, xsd

如何使用 c sharp 更新 xml 架构 (.xsd) 中的枚举值？我正在使用 xsd 进行 xml 验证。xsd 具有带枚举的简单类型。我想在验证 xml 之前以编程方式更新 xsd 中的这些枚举值。

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" >
    <xs:simpleType name="Level">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Overall"/>
            <xs:enumeration value="Component" />
            <xs:enumeration value="Element" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="StatPot">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Potential" />
            <xs:enumeration value="Status" />
            <xs:enumeration value="NA" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="Classification">
        <xs:restriction base="xs:string">
            <xs:enumeration value="NotAssessed" />
            <xs:enumeration value="Bad" />
            <xs:enumeration value="Poor" />
            <xs:enumeration value="Moderate" />
            <xs:enumeration value="Good" />
            <xs:enumeration value="NotHigh" />
            <xs:enumeration value="High" />
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="Str255">
        <xs:restriction base="xs:string">
            <xs:maxLength value="255"></xs:maxLength>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="Str100">
        <xs:restriction base="xs:string">
            <xs:maxLength value="100"></xs:maxLength>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="Str20">
        <xs:restriction base="xs:string">
            <xs:maxLength value="20"></xs:maxLength>
        </xs:restriction>
    </xs:simpleType>
    <xs:element name="xml">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="ClassificatonData">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element maxOccurs="unbounded" name="WBClassification">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="SupprortingInfo">
                                            <xs:complexType>
                                                <xs:sequence>
                                                    <xs:element name="Driver" maxOccurs="1"  minOccurs="0" type="xs:string"/>
                                                    <xs:element name="DataSource" maxOccurs="1"  minOccurs="0" type="Str100"/>
                                                    <xs:element name="Contact" maxOccurs="1"  minOccurs="0" type="Str100"/>
                                                    <xs:element name="DateRetrieved" maxOccurs="1"  minOccurs="0" type="xs:date"/>
                                                </xs:sequence>
                                            </xs:complexType>
                                        </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="WBName" type="xs:string" use="required" />
                                    <xs:attribute name="WBId" type="xs:string" use="required" />
                                    <xs:attribute name="ClassItemName" type="xs:string" use="required" />
                                    <xs:attribute name="ClassItemId" type="xs:string" use="required" />
                                    <xs:attribute name="Level" use="required" type="Level"/>
                                    <xs:attribute name="Classification" type="Classification" use="required" />
                                    <xs:attribute name="StatPot" use="optional" type="StatPot"/>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                        <xs:attribute name="Year" type="xs:unsignedShort" use="required" />
                        <xs:attribute name="Overwrite" type="xs:boolean" use="required" />
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
            <xs:attribute name="RootEntityType" type="xs:string" use="required"/>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:14:51.713

XML 模式只是一个 XML 文档，就像任何其他文档一样。您可以使用诸如 Linq-to-XML API (XDocument) 之类的标准方法来加载此文件并对其进行修改，然后再对其进行解析以创建您的架构。

# iphone - 二维码扫描问题

> ID：11521282
> 
> 赞同：0
> 
> 时间：2012-07-17T11:11:56.123
> 
> 标签：iphone, ios, qr-code, zxing

我正在使用 Zxing SDK 扫描（解码）二维码，它运行良好，但它不扫描某些二维码，尤其是对于较小尺寸的二维码。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-31T13:05:03.070

将这些类型的代码添加到扫描类中，它将支持所有类型的代码。**let supportedCodeTypes = [AVMetadataObjectTypeUPCECode, AVMetadataObjectTypeCode39Code, AVMetadataObjectTypeCode39Mod43Code, AVMetadataObjectTypeCode93Code, AVMetadataObjectTypeCode128Code, AVMetadataObjectTypeEAN8Code, AVMetadataObjectTypeEAN13Code, AVMetadataObjectTypeAztecCode, AVMetadataObjectTypePDF417Code, AVMetadataObjectTypeQRCode]**

# cocoa - WebUIDelegate(contextMenuItemsForElement) 与“检查元素”冲突

> ID：11521286
> 
> 赞同：0
> 
> 时间：2012-07-17T11:12:20.570
> 
> 标签：cocoa, webview, osx-mountain-lion

我正在为 Mac OS X 开发一个应用程序。我昨天迁移到 OSX 10.8，发现 WebView 的“检查元素”不再可用。使用在 10.7 LION 下运行良好的相同源代码库，新版本仅在此处显示 menuitem，但单击后什么也不做。我挖了一会儿，发现我的 WebUIDelegate 实现导致了这个问题（仅在 10.8 山狮中）

即使这样也行不通：

```
    - (NSArray *)webView:(WebView *)sender
        contextMenuItemsForElement:(NSDictionary *) 元素
        defaultMenuItems:(NSArray *)defaultMenuItems
    {
        返回默认菜单项；
    };

```

如果我评论上面的整个函数，那个“检查元素”确实工作得很好。

我不知道这是一个错误还是我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T02:06:12.877

我相信您遇到了[WebKit 错误 89323](https://bugs.webkit.org/show_bug.cgi?id=89323)中描述的问题的症状。它已在 Safari 6.0.2 中修复。

# java - Android：Xml 拉解析器不工作

> ID：11521289
> 
> 赞同：1
> 
> 时间：2012-07-17T11:12:42.880
> 
> 标签：java, android, xml-parsing, xmlpullparser

我正在尝试从 Xml 文件中提取数据，我遵循了本教程： [XmlPullParser 教程](http://xjaphx.wordpress.com/2011/10/16/android-xml-adventure-parsing-xml-data-with-xmlpullparser/)

现在有以下代码：

```
public void parse(InputStream is) {
        // create new Study object to hold data

        try {
            // get a new XmlPullParser object from Factory
            XmlPullParser parser = XmlPullParserFactory.newInstance().newPullParser();
            // set input source
            parser.setInput(is, null);
            // get event type
            int eventType = parser.getEventType();
            // process tag while not reaching the end of document
            while(eventType != XmlPullParser.END_DOCUMENT) {
                switch(eventType) {
                    // at start of document: START_DOCUMENT
                    case XmlPullParser.START_DOCUMENT:

                        break;

                    // at start of a tag: START_TAG
                    case XmlPullParser.START_TAG:
                        // get tag name

                        String tagName = parser.getName();
                        Log.i("AT START TAG","AT START TAG..."+tagName);
                        // if <study>, get attribute: 'id'
                        if(tagName.equalsIgnoreCase("Date")) {
                            Log.i("****PARSER INFO","TAG NAME="+tagName+"...."+parser.nextText());
                            eventDates.add(parser.nextText());
                            //study.mId = Integer.parseInt(parser.getAttributeValue(null, Study.ID));
                        }
                        // if <content>
                        else if(tagName.equalsIgnoreCase("Name")) {
                            Log.i("****PARSER INFO","TAG NAME="+tagName+"...."+parser.nextText());
                            performanceNames.add(parser.nextText());
                            //study.mContent = parser.nextText();
                        }
                        // if <topic>
                        else if(tagName.equalsIgnoreCase("RequestURL")) {
                            Log.i("****PARSER INFO","TAG NAME="+tagName+"...."+parser.nextText());
                            eventsURLS.add(parser.nextText());
                            //study.mTopic = parser.nextText();
                        }
                        break;
                }
                // jump to next event
                eventType = parser.next();
            }
        // exception stuffs
        } catch (XmlPullParserException e) {
            //study = null;
        } catch (IOException e) {
            //study = null;
        }

        // return Study object

    } 
```

出于某种原因，IF 语句中的代码没有运行，即使我已确保标记名称与上面的字符串相同。我究竟做错了什么？

# iphone - 不同子视图中的UILabel

> ID：11521291
> 
> 赞同：0
> 
> 时间：2012-07-17T11:12:46.253
> 
> 标签：iphone, objective-c, uiscrollview, nsarray, uilabel

我正在创建我的第一个应用程序。这将是一个产品目录，您可以滚动浏览。我创建了`UIScrollView`一个宽度为 960 (320*3) 并添加了一个`UIPageControl`. 在其中我添加了 3 个不同的视图，每个视图代表我的一种产品 - 包含我需要的所有信息 - 名称、图像、描述、价格等。

我可以看到视图在移动，因此我将第一个产品设置为带有`UILabel`类和`UIImageView`. 我想知道是否可以在用户切换到它时使用`NSArray`和设置`UILabel`'`text`属性并`imageNamed`在下一个视图中。

我的问题是每个视图都有不同的`UILabel`元素。

感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:17:38.870

是的，您可以使用 NSArray 来存储每个视图的数据。我建议首先使用属性 labelText 和 imageName 创建一个简单的对象；

然后，您可以像这样创建自定义对象的 NSArray：

```
MyObject obj1 = [MyObject new];
obj1.labelText = @"My Text 1";
obj1.imageName = @"My Image 1";

//Other objects..

then

NSArray *myArray = [[NSArray alloc] initWithObjects: obj1, obj2, obj3, nil]; 
```

然后，当您切换页面时，只需执行以下操作：

```
MyObject *myPageInfo = [myArray objectAtIndex:pageNumber];
myLabel.text = myPageInfo.labelText;
mylabel.imageName = myPageInfo.imageName; 
```

希望有帮助。

# svn - SVN 提交后和 Jenkins 的问题

> ID：11521302
> 
> 赞同：8
> 
> 时间：2012-07-17T11:13:26.143
> 
> 标签：svn, jenkins, post-commit-hook

我正试图让 CI 与 Jenkins 合作。迄今为止，我们已经在我们的环境中执行了两次预定的构建，但我们的开发人员希望让 CI 正常工作。我已按照 Jenkins Subversion Plugin wiki 页面中概述的说明进行操作：

[https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin)

这让我得到了一个在命令行执行的脚本就好了，但是当我在 Subversion 中提交更改（使用 TortoiseSVN 客户端）时，提交似乎挂起，我没有看到 Jenkins 收到通知。

这是我的脚本：

```
#!/bin/sh

REPOS="$1"
REV="$2"
UUID=`svnlook uuid $REPOS`
XSLT_FILE=/var/www/svn/codelog.xslt
RSS_FILE=/var/www/html/code_all.rss
MAX_RESULTS=40

/usr/bin/wget \
  --auth-no-challenge \
  --no-check-certificate \
  --header "Content-Type:text/plain;charset=UTF-8" \
  --post-data "`svnlook changed --revision $REV $REPOS`" \
  --output-document "-" \
  --timeout=2 \
  https://192.168.100.16/subversion/${UUID}/notifyCommit?rev=$REV
svn log "file://$REPOS" --limit "$MAX_RESULTS" -v --xml | xsltproc "$XSLT_FILE" - > "$RSS_FILE" 
```

RSS 提要已经在脚本中。这已经工作了一年多。

我也更新了文件权限，以防出现问题：

```
[root@Subversion hooks]# ls post-commit -ao
-rwxrwxr-x 1 apache 530 Jul 17 06:27 post-commit 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:40:18.640

为了在 Jenkins 中启用推送模式，您应该在作业的配置页面中启用*Poll SCM*构建触发器。它告诉 Jenkins，只要 SCM 发生更改，它就应该构建作业。

因为您不必进行任何轮询（您从钩子中获取信息），您可以将该字段留空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:01:58.853

尝试增加你的超时时间——2 秒就像......太低了。

这对我有用：

```
/usr/bin/wget --http-user=jenkins \
              --http-passwd=passwordGoesHere \
              --header "Content-Type:text/plain;charset=UTF-8" \
              --post-data "`svnlook changed --revision $REV $REPOS`" \
              --output-document "/var/log/svn/svn-notify-commit-post" \
              --timeout=10 \
              --read-timeout=10 \
              --tries=2 \
              "http://jenkins:8082/jenkins/subversion/${UUID}/notifyCommit?rev=$REV" \
              >> /var/log/svn/svn-notify-commit-post.log 2>&1 
```

（确保您拥有`/var/log/svn`正确用户拥有的目录）。

此外，启用 SCM 轮询并设置 cron 规则，如`*/30 * * * *`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T16:13:41.277

请查看您的网址。由于 Jenkins 是在 servlet 容器中运行的 Web 应用程序，因此必须使用以下应用程序：

http(s)://server_name:server_port/application_name/subversion/${UUID}/notifyCommit?rev=$REV"

这个想法是通过

“颠覆/${UUID}/notifyCommit?rev=$REV”

到正确的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T15:11:47.563

我从不喜欢 SVN 插件页面的编写方式。说你需要在 SVN 中设置一个 Post Commit Hook 才能使事情正常工作，这很容易阅读。你没有！

我们的 Jenkins 盒子上有大约 10 个构建。所有这些都链接到 SVN 存储库，并且都由 SVN 存储库中的更改触发。它们都不依赖于必须在 SVN 中使用 Post Commit Hook。

为此，我们已将构建配置为按计划简单地“轮询 SCM”。“提交”构建使用“*/5 * * * *”计划。每 5 分钟轮询一次。我们的“每日”构建使用“1 1 * * *”的时间表，因此如果有任何更改，构建将在凌晨 1:01 开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:06:52.110

您是否检查过您是否启用了 SELinux？

我有同样的问题并在这里写了一个解决方案[https://stackoverflow.com/a/15408506/2169568](https://stackoverflow.com/a/15408506/2169568)

我得到的错误是它无法连接到 url（但是当从命令行调用它时它确实有效）。

# c# - 如何为 EF 中的特定类或实体指定数据库名称？

> ID：11521303
> 
> 赞同：1
> 
> 时间：2012-07-17T11:13:25.577
> 
> 标签：c#, entity-framework, database-design, architecture, entity-framework-4.1

我们正在使用两个数据库，因为我需要单独继承这个模型或实体表。为此，如何在实体框架工作中为特定类或实体表指定数据库名称。有可能的？

```
Database Name: "Test1"

public class User : BaseEntity
{        
    public string Email { get; set; }
    public string Password { get; set; }
} 
```

**现在如何将此模型设置为另一个模型中的导航属性。像，**

```
Database Name: "Test2"

public class Test: BaseEntity
{
  public int UserId { get; set; }

  public virtual User User { get; set; }
}

public class BaseEntity
{
   public int Id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:40:13.957

实体框架`DbContext` **可以处理一个 Database**。那么你`DbContext`的两个数据库应该有两个。

* * *

***更新 ：***

我建议你不要那样做。换句话说，你**的数据库和你的模型应该是和谐的**“*我喜欢这个词*:)”

除此之外，我认为它应该在服务类“层”中。

因此，在您的示例中，您假设有一个`UserService`类来获取您的用户，并且不要在`Test`类中执行此逻辑。

需要注意的另一件事：如果您的模型以这种方式连接在一起，那么您应该只有一个数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:28:16.960

如果你想`inherit`从课堂上到你的`User`课，这就是它的样子

```
public class Test: User 
{
   public int UserId { get; set; } 
} 
```

现在`Test`类将具有基类 ( `User`) 的所有属性以及它自己的属性`UserId`

# java - OS X：从 shellscript 启动 Java/Swing 应用程序时设置应用程序图标

> ID：11521305
> 
> 赞同：1
> 
> 时间：2012-07-17T11:13:33.613
> 
> 标签：java, macos, swing

到目前为止，我`JavaApplicationStub`在一个`.app`目录结构中使用了在 OS X 上启动我们的 Java/Swing 应用程序。在其中配置的停靠图标`Info.plist`工作正常。

现在我尝试使用`.app`目录结构中的 shell 脚本启动应用程序，但停靠图标仅在`Info.plist`很短的时间内显示配置的那个，然后回退到 Java 默认图标。我需要做什么才能使配置的图标保留在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:37:32.167

好的，我找到了解决方案。我不得不添加`-Xdock:icon=<path>`命令行选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:25:19.520

您是否尝试使用[Window.getIconImages](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#setIconImages%28java.util.List%29)？

# android - Android 计费测试 - 如何与测试用户一起测试？

> ID：11521306
> 
> 赞同：3
> 
> 时间：2012-07-17T11:13:34.703
> 
> 标签：android, android-billing

我设置了测试用户，以便我可以测试应用内计费是否有效，但我对这个过程有点困惑。

我在这里遵循 android 开发者计费测试指南：http: [//developer.android.com/guide/google/play/billing/billing_testing.html](http://developer.android.com/guide/google/play/billing/billing_testing.html)

它有一些令人困惑的地方。它说不要发布您的应用程序，但不知何故我需要在我的手机上获取该应用程序。那么如何在手机上获取未发布的应用程序？

另外，我是否应该在应用程序上使用 google 保留的 4 个产品 id 并尝试购买它们，然后一旦我看到它有效，就可以摆脱那些按钮来购买那些测试产品？这就是这样做的意思吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:24:00.457

> 它说不要发布您的应用程序，但不知何故我需要在我的手机上获取该应用程序。那么如何在手机上获取未发布的应用程序？

无需发布您的应用即可安装。创建一个签名的构建（参见[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)）。`adb install <apk name>`然后使用必须上传到 Playstore 仪表板的相同版本将其安装在手机上。上传后，您将看到 2 个选项：

> 发布
> 
> 节省

点击“保存”。保存您上传的应用程序后，您将能够为该应用程序添加 InApp 产品。您必须保存并发布您的应用内产品才能对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:50:33.993

您应该将apk上传到您的开发者帐户并填写必填字段并保存而不发布它，然后您可以为应用程序创建应用内产品并发布它。请注意，应用内商品必须在测试计费前发布。但是您不需要发布应用程序来测试计费。

试试适用于 Android 的 MoVend 库。它支持 google play 应用内计费、paypal 等等。

[http://www.movend.com/](http://www.movend.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:15:23.977

[How to sign an android apk file](https://stackoverflow.com/a/4853025/842697)

To install it you can use adb or you can send this file by mail. Then download in the device and install it.

Check that `Settings > Applications > Unknown sources` is checked in the Device.

If you are having problems implementing in-app purchase I recommend you the library [AndroidBillingLibrary](https://github.com/robotmedia/AndroidBillingLibrary).

# c# - .net 中的 html 抓取

> ID：11521307
> 
> 赞同：1
> 
> 时间：2012-07-17T11:13:38.017
> 
> 标签：c#, asp.net, vb.net

在 .net 中，抓取 HTML 网页的最佳方式是什么。

是否有在 .net 框架 2 上运行并将所有 html 放入对象的开源软件。我已经阅读了“HTML Agility Pack”，但还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:31:31.497

我认为 HtmlAgilityPack 是，但你也可以使用

1.  [Fizzler](http://code.google.com/p/fizzler/)：C# 的 css 选择器引擎
2.  [SgmlReader](http://developer.mindtouch.com/SgmlReader) : 将 html 转换为有效的 xml
3.  [SharpQuery](http://code.google.com/p/sharp-query/) : fizzler 的替代品

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:05:51.947

您可以使用 Tidy.net，它是 Tidy 库的 ac# 包装器，可将 HTML 转换为 XHTML，可在此处获取：http: [//sourceforge.net/projects/tidynet/](http://sourceforge.net/projects/tidynet/)，因此您可以获得有效的 XML 并按此方式处理它。

我会这样：

```
 // don't forget to import TidyNet and System.Xml.Linq

        var t = new Tidy();
        TidyMessageCollection messages = new TidyMessageCollection();
        t.Options.Xhtml = true;

        //extra options if you plan to edit the result by hand
        t.Options.IndentContent = true;
        t.Options.SmartIndent = true;
        t.Options.DropEmptyParas = true;
        t.Options.DropFontTags = true;
        t.Options.BreakBeforeBR = true;

        string sInput = "your html code goes here";
        var bytes = System.Text.Encoding.UTF8.GetBytes(sInput);

        StringBuilder sbOutput = new StringBuilder();

        var msIn = new MemoryStream(bytes);
        var msOut = new MemoryStream();

        t.Parse(msIn, msOut, messages);
        var bytesOut = msOut.ToArray();
        string sOut = System.Text.Encoding.UTF8.GetString(bytesOut);

        XDocument doc = XDocument.Parse(sOut);

        //process XML as you like 
```

否则，HTML 敏捷包是可以的。

# jquery-mobile - JQM 本机应用程序中的页面刷新 (F5) 清除 dom -> 未加载样式和脚本

> ID：11521313
> 
> 赞同：0
> 
> 时间：2012-07-17T11:14:20.077
> 
> 标签：jquery-mobile

我在应用程序的头部加载了一个更大的 .js 文件。入口点 (index.html) 而不是在其 data-role="page" div 中加载特定于页面的脚本。

因此，我在一个 js 中拥有所有特定于页面的脚本，该脚本从始终保留在 DOM 中的 index.html 加载一次。

因此，例如，我有如下处理程序：

$(document).on('pageshow', '#page_Albums', function()
{ // albums.html 页面的代码 });

..ETC

这是我的问题：

当您开始浏览应用程序时，一切正常，直到您按下 f5 或浏览器刷新按钮。

这种所谓的全刷新不会加载我的中央 js 文件，而且 index.html（js 和 css）头部所需的 jquery-mobile 资源也会丢失。

因此，很明显问题出在哪里。当我从 index.html 刷新时，一切正常。

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:33:43.277

在导航链接上尝试使用`data-ajax="false"`它将重新命令您的 js...

例如，

```
<a href="#xyz" data-ajax="false>Link</a> 
```

# arrays - Postgres：如何有效地使用数组作为存储过程参数？

> ID：11521317
> 
> 赞同：1
> 
> 时间：2012-07-17T11:14:27.953
> 
> 标签：arrays, performance, postgresql, parameter-passing

我需要创建一个 Postgres 9.1 PL/pgSQL 存储过程，除其他参数外，它采用一系列值，这些值直接引用我的一个数据库列中的值。据我所知，在 Postgres 中执行此操作的规范方法是使用[数组](http://www.postgresql.org/docs/current/interactive/arrays.html)。

当然，这是一项相当基本的任务。我的问题是可扩展性：我的代码基本上可以工作，但是一旦传入的序列变大（如数百或数千个值），性能就会很差：

在我的存储过程中使用表单中的数组甚至是相当简单的 SELECT 语句

```
SELECT <some columns>
FROM   <some tables>
WHERE  <some other select criteria>
AND    <column with values selected by array parameter>
         IN (SELECT * FROM unnest(<array parameter>)) 
```

即使数据库还不是很大并且数组中只有几十个值，也需要几秒钟来执行。

我的第一个怀疑是这`unnest(...)`就是问题所在，但是仅从具有数组参数中引用的列的表中选择非常快：

```
SELECT <some columns>
FROM   <table with column ref'd in array parameter>
WHERE  <column with values selected by array parameter>
         IN (SELECT * FROM unnest(<array parameter>)) 
```

只需要几毫秒。

**我的问题**：

1.  有没有使用数组作为参数的替代方法？
2.  如何让我的查询表现更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:48:12.290

> 如何让我的查询表现更好？

如果您重写查询，我希望性能更快

```
SELECT <some columns>
FROM   <some tables>
WHERE  <some other select criteria>
AND    <column with values selected by array parameter>
         IN (SELECT * FROM unnest(<array parameter>)); 
```

到：

```
SELECT <some columns>
FROM   (SELECT unnest(<array parameter>) AS param) x
JOIN   <filtered table>  ON <filter column> = x.param
JOIN   <other table> ON <join criteria>
WHERE  <some other select criteria>; 
```

听起来查询计划者选择了一个次优计划，`WHERE`与 IN 子句相比，误判了其他条件的成本。通过将其转换为显式`JOIN`子句，您应该获得更好的查询计划。

通常，`JOIN`s 往往比`IN`PostgreSQL 中的大子句更快。

* * *

> 有没有使用数组作为参数的替代方法？

是的。
您可以创建临时表，填充它并针对它运行查询连接。

```
CREATE TEMP TABLE x(id int);

INSERT INTO x VALUES
(1), (2), (17), (18);

SELECT <some columns>
FROM   x
JOIN   <filtered table>  ON <filter column> = x.id
JOIN   <other table> ON <join criteria>
WHERE  <some other select criteria>; 
```

或者，更快的是，将[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)用于相同目的：

```
WITH x(id) AS (
    VALUES (1::int), (2), (17), (18) -- type-cast on first element is enough
    )
SELECT <some columns>
FROM   x
JOIN   <filtered table>  ON <filter column> = x.id
JOIN   <other table> ON <join criteria>
WHERE  <some other select criteria>; 
```

只要你想使用一个函数，一个数组参数，里面不嵌套也是我的选择。您还可以在函数内部使用我上一个示例中的 CTE，只需使用 unnest(arr) 而不是 VALUES 子句。

# asp.net-mvc-3 - 通过 ColorBox 调用部分时加载 JavaScript？

> ID：11521319
> 
> 赞同：0
> 
> 时间：2012-07-17T11:14:37.610
> 
> 标签：asp.net-mvc-3, razor, colorbox

似乎在通过 ColorBox（不使用 iframe）加载 Razor 局部视图时，JavaScript 库没有正确初始化或者它是局部的工件。如果我在父页面中包含库，则 JavaScript 函数在部分 jsut 内运行良好。当库处于部分状态时，我没有看到来自浏览器的任何错误，但它不起作用。如果我将库（在这种情况下`fileuploader.js`）移到部分之外并将函数保留在部分中，它可以正常工作。

例子：

```
<script src="@Url.ContentArea("~/Scripts/plugins/ajaxUpload/fileuploader.js")" type="text/javascript"></script>

                   <div id="file-uploader">
                        <noscript>
                            <p>
                                Please enable JavaScript to use file uploader.</p>
                        </noscript>
                    </div>

<script>

 $(function () {
        var fileCount = 0;
        var uploader = new qq.FileUploader({
            element: document.getElementById('file-uploader'),
            action: '/Admin/Avatar/AvatarUpload',
            debug: true,
            params: {
                'userId': '@ViewBag.UserId'
            },
            onSubmit: function (id, fileName) {
                fileCount++;
            },
            onComplete: function (id, fileName, responseJson) {
                if (responseJson.success) {
                    if (createAvatar(responseJson.file, responseJson.imageId)) {
                        fileCount--;

                    } else {
                        fileCount--;

                    }
                } else {
                    $("span.qq-upload-file:contains(" + fileName + ")").text(responseJson.errorMessage);
                    fileCount--;
                }

                if (fileCount == 0) {
                 .....
                }

            },
            onCancel: function (id, fileName) {
                fileCount--;
                if (fileCount == 0) {
                    ....
                }
            }
        });
    });

<script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:24:44.380

您可能需要检查是否存在对您正在使用的 JavaScript 库的重复引用（一个在父库中，一个在部分库中）。

这是一个常见问题，它不会引发任何错误，但会阻止您的 JavaScript 代码执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T01:01:38.310

我认为这是一个时间线问题。在“部分视图”加载（或附加 div）之前，JavaScript 尝试绑定它并失败。所以它找不到您的部分视图文档中的元素。我遇到了类似的问题这与“ColorBox”。我已经找到了解决这个问题的方法。例如：当您调用 GET 或 POST 方法时，查询后放置一个这样的控制点。例如绑定“colorbox”：

```
function getMyPartial(partialname) {
    var resultDiv = document.getElementById("content");
    $.ajax({
        type: "GET",
        url: partialname,                                                                                 
        async: false,
        success: function (data) {
            resultDiv.innerHTML = "";
            resultDiv.innerHTML = data.toString();
        }
    });    
    var indd = 0; //This is Control Point
    if (partialname == "YourPartialName") {
        var yourelementinpartial= document.getElementById("example");
        while (!yourelementinpartial) {
            indd++;
        }  
        $(".group4").colorbox({ rel: 'group4' }); //binding point
    }      
} 
```

在控制点，如果您的 PartialView 文档中的任何元素已找到，它将绑定。

# sencha-touch - 防止可滚动容器（Sencha 2）内的轮播滚动？

> ID：11521320
> 
> 赞同：1
> 
> 时间：2012-07-17T11:14:39.413
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个带有页眉、内容（轮播）和页脚的容器。因此，容器本身是可滚动的（垂直），以便能够向下滚动到页脚。轮播可以水平滑动以更改活动项目。我想锁定它只做两件事：

*   如果开始垂直移动，只滚动 Container
*   如果开始水平移动，只滚动 Carousel

如果您现在抓住 Carousel，您可以同时滚动两种方式。示例代码：

```
Ext.define('MyApp.view.MyContainer', {
    extend: 'Ext.Container',

    config: {
        scrollable: true,
        items: [
            {
                xtype: 'container',
                items: [
                    {
                        xtype: 'label',
                        html: 'abc'
                    }
                ]
            },
            {
                xtype: 'carousel',
                height: 200,
                scrollable: false,
                items: [
                    {
                        xtype: 'label',
                        html: 'x'
                    },
                    {
                        xtype: 'label',
                        html: 'y<br/>y<br/>y<br/>y<br/>y<br/>y<br/>y<br/>y'
                    }
                ]
            },
            {
                xtype: 'container',
                items: [
                    {
                        xtype: 'label',
                        html: 'def'
                    }
                ]
            }
        ]
    }

}); 
```

使用煎茶触控 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:02:18.203

您可能需要阻止过度滚动。这将有助于防止同时发生垂直滚动和轮播项目​​更改。在您的可滚动容器中尝试此代码。

```
 scrollable: {
           directionLock: true,
            direction: 'vertical',
            momentumEasing:  {
             momentum: {
               acceleration: 30,
               friction: 0.5
             },
             bounce: {
                acceleration: 0.0001,
                springTension: 0.9999,
             },
             minVelocity: 3
          },
          outOfBoundRestrictFactor: 0   
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:18:49.787

试试这个。它对我来说很好用。

```
Ext.define('MyApp.view.MyContainer', {
    extend: 'Ext.Container',

    config: {
        scrollable: {
            direction: 'vertical'
        },
        items: [
            {
                xtype: 'container',
                items: [
                    {
                        xtype: 'label',
                        html: 'abc'
                    }
                ]
            },
            {
                xtype: 'carousel',
                height: 200,
                direction: 'horizontal',
                directionLock: true,
                items: [
                    {
                        xtype: 'label',
                        html: 'x'
                    },
                    {
                        xtype: 'label',
                        html: 'y<br/>y<br/>y<br/>y<br/>y<br/>y<br/>y<br/>y'
                    }
                ]
            },
            {
                xtype: 'container',
                items: [
                    {
                        xtype: 'label',
                        html: 'def'
                    }
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T16:13:42.080

**如果开始水平移动，只滚动 Carousel**

只需将其添加到容器的配置中：

```
config: {
  scrollable: {
    direction: 'vertical',
    directionLock:true
  }
} 
```

我还没有弄清楚当你垂直滚动时如何锁定轮播。如果我发现了，我会告诉你的。

# ruby-on-rails - 从数组元素的基数采样

> ID：11521325
> 
> 赞同：-1
> 
> 时间：2012-07-17T11:14:54.983
> 
> 标签：ruby-on-rails, ruby

我有一个类似的数组`prods[[1,2] [3,4]]`，其中第一个元素（1,3）是product_id，第二个元素（2,4）是数量。我需要列出所有产品及其数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:19:21.720

您可以迭代数组：

```
[[1,2],[3,4]].each { |product_id,qty|
  puts "#{product_id} => #{qty}"
} 
```

输出：

```
1 => 2
3 => 4 
```

# wcf - https 与 webHttpBinding 的问题

> ID：11521326
> 
> 赞同：2
> 
> 时间：2012-07-17T11:14:59.663
> 
> 标签：wcf

我在使用 webHttpBinding 实现 https 时遇到问题。我得到以下错误

找不到与具有绑定 WebHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]

下面是我的 web.config 代码。请帮忙

```
<system.serviceModel>
<bindings>
  <webHttpBinding>
    <binding name="webHttpMobile" maxReceivedMessageSize="2147483647">
      <security mode="Transport">
        <transport clientCredentialType="None" />
      </security>
      <readerQuotas maxStringContentLength="2147483647" />
    </binding>
  </webHttpBinding>
</bindings>
<services>

  <service behaviorConfiguration="mybehavior"          name="SoIn.Services.MobileWebRole.Command">
    <endpoint address="mobile" behaviorConfiguration="web" binding="webHttpBinding"    bindingConfiguration="webHttpMobile" contract="SoIn.Services.MobileWebRole.ICommand" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
  <service behaviorConfiguration="mybehavior" name="SoIn.Services.MobileWebRole.Query">
    <endpoint address="mobile" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="webHttpMobile" contract="SoIn.Services.MobileWebRole.IQuery" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
  <service behaviorConfiguration="mybehavior" name="SoIn.Services.MobileWebRole.Configuration">
    <endpoint address="mobile" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="webHttpMobile" contract="SoIn.Services.MobileWebRole.IConfiguration" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="mybehavior">
      <serviceMetadata  httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-17T11:29:52.310

试试下面提到的配置。

```
<system.serviceModel>
<bindings>
  <webHttpBinding>
    <binding name="webHttpMobile" maxReceivedMessageSize="2147483647">
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
      <readerQuotas maxStringContentLength="2147483647" />
    </binding>
  </webHttpBinding>
</bindings>
<services>

  <service behaviorConfiguration="mybehavior"          name="SoIn.Services.MobileWebRole.Command">
    <endpoint address="mobile" behaviorConfiguration="web" binding="webHttpBinding"    bindingConfiguration="webHttpMobile" contract="SoIn.Services.MobileWebRole.ICommand" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
  <service behaviorConfiguration="mybehavior" name="SoIn.Services.MobileWebRole.Query">
    <endpoint address="mobile" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="webHttpMobile" contract="SoIn.Services.MobileWebRole.IQuery" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
  <service behaviorConfiguration="mybehavior" name="SoIn.Services.MobileWebRole.Configuration">
    <endpoint address="mobile" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="webHttpMobile" contract="SoIn.Services.MobileWebRole.IConfiguration" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="mybehavior">
      <serviceMetadata  httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

# java - Spring ApplicationContext Beans-接线

> ID：11521331
> 
> 赞同：0
> 
> 时间：2012-07-17T11:15:36.840
> 
> 标签：java, spring

我的项目（非常庞大的项目）有两个 ApplicationContexts。一个带有数据的旧 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans default-autowire="autodetect">
</beans> 
```

现在我需要将我的其他项目 applicatinContext 添加到它或任何其他方式，这样任何模块都不会受到影响

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<bean id="positionResponsesDAO"
    class="com.xxx.modules.worklist.DAO.Impl.PositionResponsesDAOImpl">
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="positionDAO"
    class="com.xxx..modules.worklist.DAO.Impl.PositionDAOImpl">
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="nextActionDAO"
    class="com.xxx..modules.worklist.DAO.Impl.NextActionDAOImpl">
    <property name="dataSource" ref="dataSource" />
</bean>
     <bean>
      ....... few more
     </bean>

   <bean id="workOrderManager" class="com.xxx.modules.worklist.action.manager.impl.WorkOrderManagerImpl">
    <property name="positionDO" ref="positionDO" />
    <property name="moveWorkOrderDO" ref="moveWorkOrderDO" />
    <property name="nextActionDO" ref="nextActionDO" />
    <property name="positionDAO" ref="positionDAO" />
    <property name="moveResponsesDAO" ref="moveResponsesDAO" />
    <property name="moveWorkOrderDAO" ref="moveWorkOrderDAO" />
    <property name="nextActionDAO" ref="nextActionDAO" />
    <property name="positionResponsesDAO" ref="positionResponsesDAO" />
</bean>

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close">
    <property name="driverClass" value="oracle.jdbc.driver.OracleDriver" />
    <property name="jdbcUrl" value="driverUrl" />
    <property name="user" value="MCMGR" />
    <property name="password" value="MC123" />
</bean>
  </beans> 
```

第一个启用了自动接线，而这个需要手动接线。我如何将它们结合起来放入一个 xml 或读取两个配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:24:47.900

我不明白为什么读取两个或多个应用程序上下文文件很困难。通常的 Spring 习惯用法是按层划分配置。我通常有持久性、服务、Web 等的配置。如果它是一个 Web 应用程序，我只需将它们都添加到使用`ContextLoaderListener`. 您可以根据需要指定任意数量的配置文件。

我会认为一个巨大的配置文件是一种责任，就像我看不起一个巨大的类一样。分解是计算机科学的基础。我建议对您的配置进行分区。

混合基于注释和基于 XML 的配置也不是问题。

如果两种配置重叠，您只会遇到问题。您必须为冲突的 bean 删除一个或另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:22:11.220

您可以使用`<import/>`标签。见[http://forum.springsource.org/showthread.php?41811-Application-Context-and-include](http://forum.springsource.org/showthread.php?41811-Application-Context-and-include)

# javascript - OpenLayer 坐标系

> ID：11521332
> 
> 赞同：8
> 
> 时间：2012-07-17T11:15:38.140
> 
> 标签：javascript, geolocation, geocoding, openlayers

我正在努力理解 OpenLayers 使用的坐标系。

英国莱斯特大约是。

```
Latitude:  52.63973017532399
Longitude: -1.142578125 
```

但是要使用 OpenLayers 显示相同的位置，我必须使用：

```
Latitude:  6915601.9146245
Longitude: -125089.1967713 
```

例如：

```
var center  = new OpenLayers.LonLat(-125089.1967713, 6915601.9146245);
var map     = new OpenLayers.Map("demoMap");
map.addLayer(new OpenLayers.Layer.OSM());
map.setCenter(center, 12); 
```

这些显然不是经纬度坐标，我需要考虑一些转换吗？

一个工作示例是[http://craig-russell.co.uk/demos/openlayers/so_map.html](http://craig-russell.co.uk/demos/openlayers/so_map.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:36:23.130

看起来我确实需要在坐标系之间进行映射。这是通过如下`transform()`函数完成的：

```
var coor_from = new OpenLayers.Projection("EPSG:4326");
var coor_to   = new OpenLayers.Projection("EPSG:900913");
var center    = new OpenLayers.LonLat(-1.142578125, 52.63973017532399);
var map       = new OpenLayers.Map("demoMap");
center.transform(coor_from, coor_to);
map.addLayer(new OpenLayers.Layer.OSM());
map.setCenter(center, 12); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T17:16:47.020

现在可以这样做：

```
var map = new OpenLayers.Map("demoMap");
var p = map.getView().getProjection();
var cord = ol.proj.fromLonLat([longitude, latitude], p); 
```

# performance - 负载测试随机化：如何设置 WCAT 为每个虚拟客户端使用不同的场景？

> ID：11521334
> 
> 赞同：2
> 
> 时间：2012-07-17T11:15:51.623
> 
> 标签：performance, load-testing, performance-testing, wcat

我想在我的 Web 应用程序中运行 POST 操作之一的负载测试。问题在于，只有在 POST 数据中接收到唯一的电子邮件地址时，才能完成该操作。我生成了带有数千个请求的 wcat 脚本，每个请求都带有唯一的电子邮件，例如：

```
 transaction                        
  {                                  
    id = "1";     
    weight = 1;
    request 
    { 
        verb = POST; postdata = "Email=test546546546546%40loadtest.com&..."; 
        setheader { name="Content-Length"; value="..."; 
    } 
    // more requests like that
  } 
```

我的 UBR 设置文件如下：

```
settings
{
    counters
    {
        interval = 10;
        counter = "Processor(_Total)\\% Processor Time";
        counter = "Processor(_Total)\\% Privileged Time";
        counter = "Processor(_Total)\\% User Time";
        counter = "Processor(_Total)\\Interrupts/sec";
    }
    clientfile     = "<above-wcat-script>";
    server         = "<host name>";
    clients        = 3;
    virtualclients = 100;
} 
```

当我运行测试时，3x100 = 300 个客户端开始发送请求，但它们以相同的顺序发送请求，因此处理来自第一个客户端的第一个请求，然后来自其他客户端的接下来的 299 个请求不再是唯一的。然后处理来自某个客户端的第二个请求，来自其他客户端的 299 个相同请求不是唯一的。我需要一种方法来随机化请求或以不同的顺序运行它们，或者为每个虚拟客户端设置单独的场景脚本，以便每个请求都带有唯一的电子邮件地址。用 WCAT 可以做到这一点吗？

或者也许有其他工具可以做这样的测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-28T05:53:13.343

您是否考虑过使用`rand(x,y)`WCAT 内部函数将随机整数添加到电子邮件地址？通过这样做，您可以想象使用随机电子邮件地址的单个请求的单个事务。因此，您可以使用单个随机事务 1000 次，而不是手动创建（例如）1000 个具有唯一电子邮件地址的请求。

您的新随机交易可能如下所示：

```
transaction                        
  {                                  
    id = "1";     
    weight = 1;
    request 
    { 
        verb = POST;
        postdata = "Email=" + rand("100000", "1000000") + "@loadtest.com&...";
        setheader { name="Content-Length"; value="...";
    } 
  } 
```

如果 using`rand(x,y)`不能使其足够随机，那么您可以尝试使用其他函数来使数据更加随机。也许是这样的：

```
postdata = "Email=" + rand("100000", "1000000") + "@loadtest" + clientindex() + vclientindex() + ".com&..."; 
```

您可以[在此处找到 WCAT 6.3 文档](http://mvolo.com/assets/pre-migration/cs-attachments/wcat.doc)，包括可用的内部函数列表。如果内置功能不够用，您甚至可以构建自己的功能。

# asp.net - 邮政编码正则表达式验证

> ID：11521335
> 
> 赞同：2
> 
> 时间：2012-07-17T11:15:53.877
> 
> 标签：asp.net, regex, telerik-radmaskedtextbox

我想要一个用于验证邮政编码的正则表达式验证器。我的邮政编码长度最多为 9 位。用户可以输入 5 或 9。如果他输入 5 位或 9 位，我应该有效。除此之外我想提出错误的任何事情。

我试过这个表达

`ValidationExpression="\\d{5}(-\\d{4})?$"`

这是我的设计，我正在使用 rad 控件

```
<telerik:RadMaskedTextBox Mask="#####-####" runat="server" ID="txtcontactZipCode"
                                                    Width="200px" ValidationGroup="contactValidation">
                                                </telerik:RadMaskedTextBox>
                                                &nbsp;
                                                <asp:RequiredFieldValidator runat="server" ID="rqrdcontactZipCode" ValidationGroup="contactValidation" Display="Dynamic"
                                                    ForeColor="Red" ControlToValidate="txtcontactZipCode" ErrorMessage="Zip Code is required"></asp:RequiredFieldValidator>
                                                    <asp:RegularExpressionValidator ID="regexpcontactZipCode" runat="server" ControlToValidate="txtcontactZipCode"
                                                        ValidationGroup="contactValidation" Display="Dynamic" ForeColor="Red" ErrorMessage="Should be 5 or 9 Digits"
                                                        ValidationExpression="\\d{5}(-\\d{4})?$"></asp:RegularExpressionValidator> 
```

但是如果我输入如下，我将无法验证`11111-____`

有人能帮我吗..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T11:20:48.273

问题是您的正则表达式表明如果您有破折号，则必须存在四位数字。通常这没关系，但由于您使用的是输入掩码，因此破折号始终存在，即使它只有五位数。试试下面的表达式。

```
ValidationExpression="\d{5}-?(\d{4})?$" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T11:21:23.407

`\\`当您通过 C# 代码隐藏设置它时，您应该只使用转义。

用这个...

```
ValidationExpression="\d{5}(-\d{4})?$" 
```

如果您在后台通过 C# 设置它，那么您将需要`\\d`因为`\d`将被视为控制字符...

```
txtcontactZipCode.ValidationExpression = "\\d{5}(-\\d{4})?$"; 
```

除非您在字符串前面加上`@`，在这种情况下，它可以作为...

```
txtcontactZipCode.ValidationExpression = @"\d{5}(-\d{4})?$"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:20:40.810

关于什么 ：-`[0-9]{5}(\-[0-9]{4})?`

*   `[0-9]`0 到 9 之间的任何数字，`{5}`= 只有 5 个字符；Altarnativly`\d`取决于您觉得更容易阅读的内容。
*   `( )`- 创建一个组
*   `\-[0-9]{4}`一个破折号后跟 4 个数字
*   `?`可选 - 零或一

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T17:46:33.533

使用此方法：

```
public static boolean validateZip( String zip )
{
   return zip.matches( "\\d{5}" );
} 
```

# actionscript-3 - 为什么即使在添加 crossdomain.xml 后我也会收到安全沙箱破坏错误？

> ID：11521337
> 
> 赞同：0
> 
> 时间：2012-07-17T11:16:01.343
> 
> 标签：actionscript-3, apache-flex, flex3

我早些时候收到了这个错误

```
Security sandbox voilation: cannot load data from http://sample:8080/SignOut 
```

我知道它是在`tomcat/webapps/ROOT/`文件夹中添加一个crossdomain.xml。

但有趣的是，即使添加了这个，我也会得到同样的错误。为什么？

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-access-from domain="*" />
</cross-domain-policy> 
```

# iphone - 如何在 iPhone 中手动更改 TabItem？

> ID：11521339
> 
> 赞同：2
> 
> 时间：2012-07-17T11:16:07.667
> 
> 标签：iphone, delegates, uitabbarcontroller

我正在使用`TabbarController`. 当我在第一个选项卡中时，所有其他 tabItem 都处于禁用模式，并且我在第一个选项卡视图控制器中有一个按钮，单击该按钮时它应该移动到第二个 tabitem。我已经实现了 setselectedindex 但没有改变。

```
 - (void)clinicBtnTapped
 {        
    enteredSecondTab==YES;
    CustomTabBar *tabbar=[[CustomTabBar alloc] init];

    [self.tabBarController setSelectedIndex:1];

    AppSys_SplitView *apptmtSys=[[AppSys_SplitView alloc] init];

    [tabbar tabBarController:tabbar.tabBarController shouldSelectViewController:apptmtSys];
    tabindex=1;
    [tabbar tabBarController:tabbar.tabBarController didSelectViewController:appsys];

} 
```

在应该选择 ViewController

```
 - (BOOL)tabBarController:(UITabBarController *)tabBarControlle shouldSelectViewController:(UIViewController *)viewController{

   tabindex = [[tabBarControlle viewControllers] indexOfObject:viewController];
    NSLog(@"index %d",index);

    for(UIImageView *view in[self.view subviews]){

        [view removeFromSuperview];
    }
        tabBarController.imgV.frame=CGRectMake(0, 717, 1024, 53);

    switch (tabindex) {

        case 0:

            enteredFirstTab = YES;
            enteredSecondTab = NO;
            enteredThirdTab = NO;
            enteredFourthTab = NO;
            tabBarController.imgV.image=[UIImage imageNamed:@"select_TrackClinic_icon.png"];

            return YES;
            break;

        case 1:             
            if(enteredSecondTab == YES)
            {
                enteredFirstTab = NO;
                enteredSecondTab = YES;
                enteredThirdTab = NO;
                enteredFourthTab = NO;
                tabBarController.imgV.image=[UIImage imageNamed:@"select_Application_icon.png"];
                return YES;
            }
            else 
            {
                return YES;
            }

            break;

        case 2:

            return NO;

            enteredFirstTab = NO;
            enteredSecondTab = NO;
            enteredThirdTab = YES;
            enteredFourthTab = NO;
            tabBarController.imgV.image=[UIImage imageNamed:@"select_regularOnsite_icon.png"];

            break;

        case 3:

            return NO;

            enteredFirstTab = NO;
            enteredSecondTab = NO;
            enteredThirdTab = NO;
            enteredFourthTab = YES;
            tabBarController.imgV.image=[UIImage imageNamed:@"select_resultUpdate_icon.png"];
            break;

        default:

            break;

    }       

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:49:12.957

在这里我可以给你一些实现自定义标签栏的教程

委托.h 文件

```
@interface cTabBarAppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate> 
@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;
@property (nonatomic, retain) IBOutlet UIImageView *imgV;
@end 
```

委托.m 文件

```
@implementation cTabBarAppDelegate

@synthesize window=_window;
@synthesize tabBarController=_tabBarController;
@synthesize imgV = _imgV;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    // Add the tab bar controller's current view as a subview of the window
    self.tabBarController.delegate=self;
    self.imgV.frame=CGRectMake(0, 425, 320, 55);
    [self.tabBarController.view addSubview:self.imgV];
    self.tabBarController.selectedIndex=0;
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewController];

    switch (index) {
        case 0:
            self.imgV.image=[UIImage imageNamed:@"tBar1.png"];
            break;
        case 1:
            self.imgV.image=[UIImage imageNamed:@"tBar2.png"];
            break;
        case 2:
            self.imgV.image=[UIImage imageNamed:@"tBar3.png"];
            break;
        case 3:
            self.imgV.image=[UIImage imageNamed:@"tBar4.png"];
            break;
        case 4:
            self.imgV.image=[UIImage imageNamed:@"tBar5.png"];
            break;
        default:
            break;
    }

    return YES;
} 
```

以下代码放入 viewcontroller.m

```
 AppDelegate   *delegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];

    SearchVctr *viewController1 = [[SearchVctr alloc] initWithNibName:@"SearchVctr" bundle:nil];
    UINavigationController *navForRentResidental= [[UINavigationController alloc]initWithRootViewController:viewController1];

    UIViewController *viewController2 = [[FavouriteVctr_iphone alloc] initWithNibName:@"FavouriteVctr_iphone" bundle:nil];
    UINavigationController *navForFavorite= [[UINavigationController alloc]initWithRootViewController:viewController2];

    UIViewController *viewController3 = [[LoginAndRegisterVctr alloc] initWithNibName:@"LoginAndRegisterVctr" bundle:nil];
    UINavigationController *navForLogin= [[UINavigationController alloc]initWithRootViewController:viewController3];
    navForLogin.navigationBar.hidden=TRUE;    

    UIViewController *viewController4 = [[ContactUsVctr alloc] initWithNibName:@"ContactUsVctr" bundle:nil];
    UINavigationController *navForContact= [[UINavigationController alloc]initWithRootViewController:viewController4];

    UIViewController *viewController5 = [[MoreVctr_iphone alloc] initWithNibName:@"MoreVctr_iphone" bundle:nil];
    UINavigationController *navForMore= [[UINavigationController alloc]initWithRootViewController:viewController5];

    navForContact.navigationBar.hidden=TRUE;
    navForMore.navigationBar.hidden=TRUE;
    navForLogin.navigationBar.hidden=TRUE;
    navForFavorite.navigationBar.hidden = TRUE;

    if([sender tag] == 1){
        delegate.tabBarController.viewControllers = [NSArray arrayWithObjects:navForRentResidental, navForFavorite, navForLogin, navForContact, navForMore, nil];
        delegate.tabBarController.selectedIndex = 3;
        delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t4.png"]];
        delegate.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:delegate.tabBarController animated:YES];
    }else if([sender tag] == 2){
        UIViewController *viewController5 = [[AboutVctr alloc] initWithNibName:@"AboutVctr" bundle:nil];
        delegate.tabBarController.viewControllers = [NSArray arrayWithObjects:navForRentResidental, navForFavorite, navForLogin, navForContact, viewController5, nil];
        delegate.tabBarController.selectedIndex = 4;
        delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t5.png"]];
        delegate.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:delegate.tabBarController animated:YES];
    }
        else if([sender tag] == 3){
        UIViewController *viewController5 = [[ServicesVctr alloc] initWithNibName:@"ServicesVctr" bundle:nil];
        UINavigationController *navcontroller= [[UINavigationController alloc]initWithRootViewController:viewController5];
        navcontroller.navigationBar.hidden=TRUE;
        delegate.tabBarController.viewControllers = [NSArray arrayWithObjects:navForRentResidental, navForFavorite, navForLogin, navForContact, navcontroller, nil];
        delegate.tabBarController.selectedIndex = 4;
    delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t5.png"]];
        delegate.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:delegate.tabBarController animated:YES];
    }
    else if([sender tag] == 4){
        delegate.tabBarController.viewControllers = [NSArray arrayWithObjects:navForRentResidental, navForFavorite, navForLogin, navForContact, navForMore, nil];
        delegate.tabBarController.selectedIndex = 2;
        delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t3.png"]];
         delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t3.png"]];
        delegate.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:delegate.tabBarController animated:YES];
    }
        else if([sender tag] == 5){
        delegate.tabBarController.viewControllers = [NSArray arrayWithObjects:navForRentResidental, navForFavorite, navForLogin, navForContact, navForMore, nil];
        delegate.tabBarController.selectedIndex = 0;
        delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t1.png"]];
        delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t1.png"]];
                        delegate.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:delegate.tabBarController animated:YES];

    } 
```

此代码可能有助于开发。

# jquery - 仅当调试器暂停时才发送 Ajax 调用

> ID：11521341
> 
> 赞同：0
> 
> 时间：2012-07-17T11:16:12.623
> 
> 标签：jquery, ajax

我有以下 jquery Ajax 调用：

```
$.get("http://localhost/site/envoi.php", {nom: contactNom, email: contactEmail})
    .success(function(result2){
});
debugger; 
```

如果我查看 Chrome 检查元素工具，我会看到 Ajax 调用仅在存在调试器行并且我在调试中停留在该行一段时间*时才发送。*

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:19:53.980

这是一种错觉，您在此 AJAX 调用的任何一方都做了什么？在 AJAX 调用之后你有某种重定向调用吗？可能更多的事实是 AJAX 调用在执行其余代码之前没有足够的时间返回。如果你需要它是同步的，那么还有其他方法可以做到这一点，如果你需要调用是异步的，但只在调用完成后做一些事情，这应该在成功处理程序中完成。

**实际上我忘记了 .success 处理程序也符合`ajax()`jQuery 中的函数，所以实际上你的语法很好。**

# url - 如何获取 twitter 之类的 url 附加字符串，即 twitter inc？

> ID：11521343
> 
> 赞同：-4
> 
> 时间：2012-07-17T11:16:47.073
> 
> 标签：url, ssl, safari, twitter

![](../Images/e580514b637e3d55d692cd5509d1b1b4.png)

我还想在我的网站中添加**Twitter, Inc.**之类的占位符 ，即在标有twitter**红色边框的 url 中的绿色，****即如果我的网站是 www.pks.com，那么 PKS, Inc. 应该在 url 内以绿色显示**有没有这方面的API。

![Twitter, Inc 标有红色边框]！[Twitter, Inc 标有红色边框](../Images/ab4d89a00fcef0349f74930053c4f76b.png)

> 此外，**谷歌在其 url 中没有它**。这是什么意思？它是否缺少额外的 ssl 证书，或者它是 safari 浏览器的功能。我对这个功能一无所知，请帮助我知道。如果不清楚发表评论，请不要投反对票。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:21:34.313

Twitter 在访问其网站时使用安全连接。这称为 HTTPS。

为了获得绿条，他们使用了扩展验证 SSL 证书 (EV SSL)，可从所有主要证书供应商如 VeriSign、Comodo、StartSSL 等处获得。

# asp.net - 无法在 Application_Start 中获取配置文件数据

> ID：11521352
> 
> 赞同：2
> 
> 时间：2012-07-17T11:17:47.977
> 
> 标签：asp.net, profile, httpcontext, application-start

我在 Application_Start 的某个时候有以下代码

```
MembershipUserCollection users = Membership.GetAllUsers();

foreach (MembershipUser u in users)
{
    ProfileBase profile = ProfileBase.Create(u.UserName, false);

    if (profile["Index"] != null)
    {
        // Some code
    }
} 
```

问题是，当我尝试访问配置文件属性时，我得到“请求在此上下文中不可用”httpException。我试过使用 profile.GetPropertyValue 但也没有运气。

为什么配置文件需要请求对象，我怎样才能让它工作？

**编辑：**

我查看了 .NET 代码，发现在某些时候`SqlProfileProvider.GetPropertyValuesFromDatabase(string userName, SettingsPropertyValueCollection svc)`被调用，其中包含以下代码字符串：

```
if (!current.Request.IsAuthenticated) 
```

显然，如果不在请求上下文中，这将永远不会起作用。Onur 的答案中描述的解决方法可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:27:26.010

显然，您正在尝试访问在您的情况下不可能的请求对象。

请查看以下链接并尽可能应用其中一种解决方法。 [http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart](http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart)

如果您提供更多信息，我们可以找到另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-30T14:29:57.680

您可以通过查询 aspnet_Profiles 表并解析字符串来获取“字符串值”属性。

```
SELECT [UserName]
  ,[PropertyNames]
  ,[PropertyValuesString]
FROM [aspnet_Profile]
LEFT JOIN [aspnet_Users] on [aspnet_Users].UserId = [aspnet_Profile].UserId 
```

PropertyValuesString 可以用一些代码来解析。此链接应详细说明格式[https://msdn.microsoft.com/en-us/library/aa478953.aspx#persistence_format](https://msdn.microsoft.com/en-us/library/aa478953.aspx#persistence_format)。

# javascript - 在 Angular.js 中对函数进行数据绑定

> ID：11521353
> 
> 赞同：7
> 
> 时间：2012-07-17T11:17:52.567
> 
> 标签：javascript, angularjs

在角度中，我发现您可以将模板绑定到返回数组的函数，如下所示：

```
<div class="cal_row" id ="id_{{task.id}}" ng-repeat="task in calendar.filtered()">
  <div class="id">{{task.id}}</div>
      <div class="task">{{task.task}}</div>
  <div class="start">{{task.start}}</div>
  <div class="finish">{{task.finish}}</div>
</div> 
```

这很酷，因为这样我就可以，例如，避免为了维护数据的过滤版本而必须保留一个变量。

但是，我也失去了与原始数据的绑定：当底层数据发生变化时，我似乎无法让 angular.js 发现变化并更新视图。

有没有办法做到这一点？我试图在文档中找到任何内容，但找不到

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T12:52:28.220

如果您从外部角度对某些数据进行更改，则必须使用`$myScope.$apply`角度知道某些内容已更改。[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$apply](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)

# java - 是否有任何原因 EnumMap 和 EnumSet 不可导航

> ID：11521356
> 
> 赞同：36
> 
> 时间：2012-07-17T11:18:08.163
> 
> 标签：java, collections, enums

枚举是可比较的，这意味着您可以拥有

```
NavigableSet<AccessMode> modes = new TreeSet<>();
NavigableMap<AccessMode, Object> modeMap = new TreeMap<>(); 
```

这些有 O(ln N) 访问时间。

枚举集合具有 O(1) 访问时间，但不可导航

```
NavigableSet<AccessMode> modes = EnumSet.noneOf(AccessMode.class); // doesn't compile
NavigableMap<AccessMode, Object> modeMap = new EnumMap<>(AccessMode.class);  // doesn't compile 
```

我想知道枚举集合是否不可导航（和排序）是否有原因。即我错过了什么吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-19T09:05:03.840

JDK 及其各种 API 缺少许多“明显”的特性。为什么这个特殊功能被忽略/忘记了？我们只能猜测。但是您的问题长期以来一直是 Sun/Oracle 的 RFE：

*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6278287](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6278287)
*   [http://www.java.net/node/644910](http://www.java.net/node/644910)

您可以通过评论来支持这些 RFE。请注意，这是 Joshua Bloch 关于该主题的权威回答：

> 我隐约记得考虑过它，但我不记得我们是否有充分的理由明确拒绝它。当我实现 EnumSet 和 EnumMap 时，我们的时间非常少，可能是时间在我们的决定中发挥了作用

[http://comments.gmane.org/gmane.comp.java.jsr.166-concurrency/2158](http://comments.gmane.org/gmane.comp.java.jsr.166-concurrency/2158)

所以即使*他*也不得不猜测:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T08:52:30.703

我最好的猜测是，可导航性并未被视为枚举集的主要用例。实现中没有任何东西会阻止导航性。`TreeSet`将一组枚举成员的需求与可导航性结合在一起的罕见用例`TreeMap`由

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T09:46:18.847

*The post doesn't directly answers the question, neither attempts to, it merely conveys why Navigable was introduced*

*Post as I was requested to (and it's too long for a comment)*

> The short answer is that Navigable exists because we didn't have anything like upcoming "defenders" -- Sorted didn't describe all the common functionality, and there was no way to do so except to introduce a new interface. In practice, I'm sure "Sorted" is still used much more often than "Navigable" as a declaration type, because most people don't need the methods defined in Navigable but not Sorted. Plus "Navigable" is just not a very nice name :-)
> 
> -Doug

# java - 从 GPS 获取位置并发送到邮件服务无活动

> ID：11521359
> 
> 赞同：0
> 
> 时间：2012-07-17T11:18:36.307
> 
> 标签：java, android, gprs

我正在从事没有任何活动的服务。它只在后台工作。它接收纬度和经度并通过邮件发送。问题是程序没有发送邮件，我使用的是 Java Mail API。这是代码：

这是主要活动

```
public class MainActivity extends Service {

    LocationManager lm;
    LocationListener lis;
    Location loc;
    Double lat;
    Double lan;
    Location location;
    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 10000; // in Milliseconds
 LocationManager locationManager;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);

        locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                                    LocationManager.GPS_PROVIDER,
                                    MINIMUM_TIME_BETWEEN_UPDATES,
                                    MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                                new MyLocationListener()
                        );

        sendMail( showcurrentlocation());

    }

    private String showcurrentlocation() {
        // TODO Auto-generated method stub
        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        String message = null;
        if (location != null) {
 message = String.format(
                                "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                                location.getLongitude(), location.getLatitude()
                            );

                    }

return message;

    }

    public void sendMail(String msg) {
        try {
            GMailSender sender = new GMailSender("user",
                    "password");
            sender.sendMail("subject",body, "sender",
                    "recepients");
        } catch (Exception e) {
            Log.e("SendMail", e.getMessage(), e);
        }

    }

    private class MyLocationListener implements LocationListener {

                public void onLocationChanged(Location location) {
                   String message = String.format(
                        "New Location \n Longitude: %1$s \n Latitude: %2$s",
                            location.getLongitude(), location.getLatitude()

                           );

                   Toast.makeText(MainActivity.this, message, Toast.LENGTH_LONG).show();
                }

                public void onStatusChanged(String s, int i, Bundle b) {
                    Toast.makeText(MainActivity.this, "Provider status changed",
                        Toast.LENGTH_LONG).show();
                    }

                public void onProviderDisabled(String s) {
              Toast.makeText(MainActivity.this,
                                "Provider disabled by the user. GPS turned off",
                        Toast.LENGTH_LONG).show();
                    }

                    public void onProviderEnabled(String s) {
                    Toast.makeText(MainActivity.this,
                            "Provider enabled by the user. GPS turned on",
                                Toast.LENGTH_LONG).show();
                }

        }

} 
```

另一个类是广播接收器

```
public class MyBroadcastReceiver extends BroadcastReceiver{

    public static final String TAG = "LocationLoggerServiceManager";

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Intent service = new Intent(context, MainActivity.class);
        context.startService(service);

        }

}public class MyBroadcastReceiver extends BroadcastReceiver{

    public static final String TAG = "LocationLoggerServiceManager";

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Intent service = new Intent(context, MainActivity.class);
        context.startService(service);

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:00:19.997

无需为此编写广播接收器。如果您提及要更新位置的距离/时间，Android 会提供更新的位置。请检查您的位置更改后是否调用 sendMail() 的天气。

# ruby-on-rails - Rails 对关联记录进行排序

> ID：11521362
> 
> 赞同：4
> 
> 时间：2012-07-17T11:18:51.413
> 
> 标签：ruby-on-rails

使用 Rails 3.0.10 和 Ruby 1.9.2。

我有一个 Book 模型，它有很多页。

```
class Book < ActiveRecord::Base
  has_many :pages

  # is this right?
  def pages
    Page.order('page_number asc').find_all_by_book_id(:id)
  end
end

class Page < ActiveRecord::Base
  belongs_to :book
end 
```

当我检索一本书的页面时，我总是希望它们按页码排序。处理此问题的正确方法是什么，以便调用 book.pages 将按顺序返回所有页面？

在编辑本书时，我还会显示可以编辑的每一页的内容。如果我使用嵌套属性，假设我之前的问题得到解决，这是否会以正确的顺序返回页面？

```
<%= form_for [@book, @pages] do |f| %>
  <%= f.fields_for :pages do |page| %>
    do something
  <% end %>
<% end %> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T11:22:12.960

我相信您实际上可以直接在关联声明中指定默认顺序：

```
class Book < ActiveRecord::Base
    has_many :pages, :order => "page_number asc"
end

class Page < ActiveRecord::Base
  belongs_to :book
end 
```

这样，您不必自己指定`Book#pages`方法，默认情况下仍会对其进行排序`page_number asc`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-11T21:41:57.173

对于较新版本的 Rails，语法发生了变化：

```
class Book < ActiveRecord::Base
    has_many :pages, -> { order "page_number asc" }
end

class Page < ActiveRecord::Base
  belongs_to :book
end 
```

# php - 如何使 nginx 虚拟目录在 php 中可访问？

> ID：11521363
> 
> 赞同：9
> 
> 时间：2012-07-17T11:18:51.890
> 
> 标签：php, nginx

假设我有一个 Web 服务器（nginx）`server.com`，其中只有一个 php 文件`index.php`（没有目录结构）。我希望能够在 server.com 之后访问任何内容。这将是一个 url 结构。例如 server.com/google.com、server.com/yahoo.com.au 等...

一个例子是`http://whois.domaintools.com/google.com`（他们没有一个名为*/google.com*的目录，对吧？）

**Q1：**如何从*index.php访问 'server.com' 之后的任何内容*

**Q2：**我可以从这样的 URL 获取协议吗？例如`server.com/http://www.google.com`或`server.com/https://www.google.com`

**PS** 我不确定这里是否正确使用了*虚拟目录这个术语。*我只想做我在别处看到的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T01:46:27.657

```
location / {
    rewrite ^/(.*)$ /index.php?q=$1
}

location = /index.php {
    #Do your normal php passing stuff here now
} 
```

那是你要找的吗？

作为第二个问题的答案，您可以在 php.ini 中解析协议。Nginx 不需要这样做。要解析url，可以使用[`parse_url`](http://php.net/manual/en/function.parse-url.php)函数

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T15:55:38.040

```
location / {
    try_files $uri @dynamic;
}

location @dynamic {
    fastcgi_pass backend;

    include fastcgi_params;
    fastcgi_param  PATH_INFO        $uri;
    fastcgi_param  SCRIPT_NAME      /index.php;
    fastcgi_param  SCRIPT_FILENAME  /absolute/path/to/index.php;
} 
```

* * *

该`fastcgi_params`文件与 nginx 捆绑在一起

```
$ cat fastcgi_params

fastcgi_param  QUERY_STRING       $query_string;
fastcgi_param  REQUEST_METHOD     $request_method;
fastcgi_param  CONTENT_TYPE       $content_type;
fastcgi_param  CONTENT_LENGTH     $content_length;

#fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
fastcgi_param  REQUEST_URI        $request_uri;
fastcgi_param  DOCUMENT_URI       $document_uri;
fastcgi_param  DOCUMENT_ROOT      $document_root;
fastcgi_param  SERVER_PROTOCOL    $server_protocol;
fastcgi_param  HTTPS              $https if_not_empty;

fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;

fastcgi_param  REMOTE_ADDR        $remote_addr;
fastcgi_param  REMOTE_PORT        $remote_port;
fastcgi_param  SERVER_ADDR        $server_addr;
fastcgi_param  SERVER_PORT        $server_port;
fastcgi_param  SERVER_NAME        $server_name;

# PHP only, required if PHP was built with --enable-force-cgi-redirect
fastcgi_param  REDIRECT_STATUS    200; 
```

您可以使用 PHP 中的内置`$_SERVER`数组访问所有这些 fastcgi 环境参数。[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

*   [http://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)
*   [http://nginx.org/r/try_files](http://nginx.org/r/try_files)
*   [http://nginx.org/r/fastcgi_param](http://nginx.org/r/fastcgi_param)
*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/r/include](http://nginx.org/r/include)
*   [http://nginx.org/en/docs/http/ngx_http_core_module.html#variables](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-20T03:47:08.770

好吧，matzahboy 和 VBart 已经提供了 nginx 配置摘录，它们正确地向您展示了如何将 URL 重写为 GET 变量。但为了使用它，您必须解释`$_GET['q']`. 您还没有指定要遵循的规则，所以这里有一个建议。

要按此顺序进行测试：

1.  *[根据RFC2396](http://www.faqs.org/rfcs/rfc2396)使用 PHP 的 Validate Filter 的有效 URL*：使用 cURL 进行测试，对 HTTP 响应代码 < 400 响应 TRUE，对其他任何内容响应 FALSE。
2.  ***(host.)example.com/path** (missing protocol)*：假设 HTTP 协议，按照 #1 进行测试。
3.  ***host.example.com**（仅限主机名）*：与 #2 相同
4.  ***example.com**（仅限域）*：测试为 #2，然后测试为**www.example.com**。
5.  *其他任何事情*：失败。

如果这对您有意义，那么以下 index.php 可能会帮助您入门：

```
<?php

function http_response($url) {
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_HEADER, TRUE);
  curl_setopt($ch, CURLOPT_NOBODY, TRUE); // remove body
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
  $head = curl_exec($ch);
  $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
  curl_close($ch);

  if (!$head) {
    return FALSE;
  }

  if ($httpCode < 400) {
    return $url;
  } else {
    return FALSE;
  }
}

function test_string($q) {
  if (filter_var($q, FILTER_VALIDATE_URL)) {
    // Matches RFC2396, so let's generate a hit.
    return http_response($q);
  }
  elseif (preg_match('/^([a-z0-9][a-z0-9-]+\.)+[a-z]{2,}(:[0-9]+)?\/.+$/', $q)) {
    // Matches: (host.)example.com/path
    return http_response("http://" . $q);
  }
  elseif (preg_match('/^([a-z0-9][a-z0-9-]+\.){2,}[a-z]{2,}$/', $q)) {
    // Matches: host.example.com
    return http_response("http://" . $q . "/");
  }
  elseif (preg_match('/^([a-z0-9][a-z0-9-]+\.)+[a-z]{2,}$/', $q)) {
    // Matches: example.com
    $ret=http_response("http://" . $q . "/");
    if ($ret === FALSE) {
      return http_response("http://www." . $q . "/");
    } else {
      return $ret;
    }
  }
  else {
    return FALSE;
  }
}

$q = $_GET['q'];
//$q = $argv[1]; // for command-line testing

$url = test_string($q);

if ($url === FALSE) {
  printf("<p>The URL <strong>%s</strong> is invalid.</p>\n", $q);
} else {
  printf("<p>The URL is <strong>%s</strong>.</p>\n", $url);
} 
```

我并没有声称这是最漂亮或最安全的代码，但至少它为提供的 URL 实现了分析策略，例如：

*   `http://example.com/https://www.example.net/foo/bar`,
*   `http://example.com/example.org/foo/bar`或者
*   `http://example.com/example.org`

请注意，cURL 的 gopher 支持可能会被破坏，并且上面的代码不支持其他协议（不返回 HTTP 响应代码）。如果您需要支持 HTTP 和 HTTPS 以外的协议，请在您的问题中说明，我会相应地调整 PHP。

具体来说，如果您希望能够检查`http://example.com/ping://host.example.net`它并不难，但它必须与 cURL 处理的位分开编码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T08:13:49.867

使用 matzahboy 的 nginx 代码：

```
location / {
     rewrite ^/(.*)$ /index.php?q=$1
} 
```

以及以下 PHP 代码：

```
$basis = array(
    'scheme' => 'http',
);

$info = array_merge( $base, parse_url( 'www.google.com' ) );

print_r( $info ); 
```

这将为 example.com/google.com 或 example.com/http://google.com/ 返回类似的内容

```
Array ( [scheme] => http [path] => www.google.com ) 
```

请注意，$base 数组包含 'http' 的 'scheme' 值。这会默认方案的值，以便您以后可以执行类似的操作

```
$info['scheme'] . '://' . $info['path']; 
```

这将导致[http://google.com/](http://google.com/)

希望这能回答您的全部问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-21T15:27:02.220

你想过重写吗？我只知道 Apache 的规则。在 Apache 中，我会这样做：

```
RewriteCond $1 !^(index\.php|js|css|admin|images|img|png|robots\.txt|sitemap\.xml|sitemap\.xml\.gz|sitemap\.kml|robots\.txt|javascripts|style.css)
RewriteRule ^(.*)$ index.php/?page=$1 [L] 
```

这会将所有内容传递给`$_GET['page']`(PHP)，除非 URL 中的任何内容与`index.php`、`js`和`css`其他内容匹配。

如果您有任何问题，请告诉我。希望这有帮助。

# c# - 从 CSV 中读取数字作为字符串

> ID：11521364
> 
> 赞同：1
> 
> 时间：2012-07-17T11:19:02.720
> 
> 标签：c#, csv

> **可能重复：**
> [如何在 .Net 中以我想要使用 OleDB 的格式从 CSV 导入值？](https://stackoverflow.com/questions/237763/how-in-net-do-i-import-values-from-a-csv-in-the-format-i-want-using-oledb)

我有一个使用 OleDbCommand 读取的 csv 文件。

CSV 包含的列是用 0 填充的数字。当我读取这些列时，我得到的结果没有任何前导 0 字符：它现在是一个数字。

CSV 中的这些值：

```
UserNumber    LocationNumber
00001234      00023456
00891234      00000456 
```

变成

```
UserNumber    LocationNumber
1234      23456
891234      456 
```

在由我的 OleDbDataAdapter 填充的结果数据表中。

有什么办法可以防止这种情况发生吗？

PS，填充不是问题，但由于所做工作的性质，这不是一个好的解决方案，因为 CSV 文件没有设置格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:15:05.330

在我看来，尽管只是将整个文件作为字符串读取，但您并不介意。你可以很容易地像这样构建你的 Schema.ini 文件。

使用您的原始连接：

```
DataTable GetSchemaTable() 
{
    try
    {
        OleDbDataAdapter da; // init adapater with your own connection
        DataSet ds = new DataSet();
        System.Data.DataTable[] dtTables = da.FillSchema(ds, SchemaType.Source);
        return dtTables[0];
    }
    catch (System.Exception se)
    {
        throw new System.Exception("Problem retrieving Schema: " + se.Message);
    }
}

void CreateSchemaIni(string csvDirectory, string csvFileName) 
{       
    DataTable dt = GetSchemaTable();
    FileStream fsOutput = new FileStream(csvDirectory + "\\schema.ini", FileMode.Create, FileAccess.Write);
    StreamWriter srOutput = new StreamWriter(fsOutput);
    string s1, s2, s3;
    s1 = "[" + csvFileName + "]";
    s2 = "ColNameHeader=False";
    s3 = "Format=CSVDelimited";
    srOutput.WriteLine(s1 + '\n' + s2 + '\n' + s3 + '\n');
    StringBuilder strB = new StringBuilder();
    for (int i = 1; i <= dt.Columns.Count; i++)
    {
        strB.Append("Col" + i.ToString());
        strB.Append("=F" + i.ToString());
        strB.Append(" Text\n");
        srOutput.WriteLine(strB.ToString());
        strB = new StringBuilder();
    }
    srOutput.Close();
    fsOutput.Close();
} 
```

# c# - 试图获取文本框的值

> ID：11521365
> 
> 赞同：2
> 
> 时间：2012-07-17T11:19:05.497
> 
> 标签：c#, sql

我正在 c# 中创建一个 sql 语句，并且我试图从以前表单中的文本框中获取值：

```
SqlParameter PeriodFrom = new SqlParameter("@PeriodFrom", SqlDbType.VarChar);
PeriodFrom.Value = 
```

我只是不确定等号之后是什么。我试过表格`name.textbox name`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:58:15.870

在表单后面的代码中，在表单类中，您可以声明一个属性：

```
public string TextBoxValue
{
    get
    {
        return textBoxName.Text;
    }
} 
```

您可以将它与您的 SqlParameter 一起使用，如下所示：

```
 SqlParameter PeriodFrom = new SqlParameter("@PeriodFrom", SqlDbType.VarChar); 
```

> ~~PeriodFrom.Value = FormClassName.TextBoxValue;~~

编辑：

这是行不通的，因为 Form 类对象不是静态的，也不会持续存在。要完成这项工作，您需要对 Program 类进行更改。您需要在 Program 类中添加一个静态数据成员，如下所示：

```
public static FormClassName form; 
```

并且需要在 main 方法中传递它，如下所示：

```
form = new FormClassName();
Application.Run(form); 
```

在 SQLParameter 中，您可以像这样传递它：

```
SqlParameter PeriodFrom = new SqlParameter("@PeriodFrom", SqlDbType.VarChar);
PeriodFrom.Value = Program.form.TextBoxValue; 
```

我试图为您提供一种获得价值的方法，但我认为这不是一个好习惯。理想情况下，为了在表单或层之间传递值，您需要有某种机制来存储和检索值，例如上下文或会话。这不是解决方案，而是一种解决方法。如果代码因上述更改而混乱，我不承担任何责任。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:20:53.640

```
YourPreviousForm.YourTextBox.Text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:21:44.000

使用 的`Text`属性获取文本框的值`TextBox`。

```
 PeriodFrom.Value =PrevForm.TextBox.Text; 
```

正如您所说，由于保护级别，没有访问权限，您需要处理 form from `protected`to的访问修饰符，`public`以便可以访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:27:15.073

然后将文本框的修饰符属性更改为 Public

formname.textboxname.Text

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T11:28:07.367

```
<%@ PreviousPageType VirtualPath="~/SourcePage.aspx" %> 

if(PreviousPage != null)
{
    if(PreviousPage.IsCrossPagePostBack == true)
    {
            PeriodFrom.Value =PrevForm.TextBox.Text;
    }
}
else
{
    PeriodFrom.Value = "Not a cross-page post.";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T11:25:53.063

如果您的 TextBox 在表单上公开声明，那么您将能够从创建它的范围访问它的属性。

```
PeriodFrom.Value = otherForm.TextBoxName.Text; 
```

如果您现在无法使用“以前的”表单对象，那么您将必须检索该值并将其作为参数传递给您的新表单（或类似的东西）。如果您在此处需要帮助，请提供更多代码/详细信息。

# phpmyadmin - php注册系统错误

> ID：11521368
> 
> 赞同：-2
> 
> 时间：2012-07-17T11:19:11.293
> 
> 标签：phpmyadmin, xampp, registration, php

我正在尝试使用 xampp 在 php 中创建一个注册页面，但我遇到了问题。当我运行我的 php 文件时，它给出了以下错误：

> 注意：未定义索引：第 3 行 C:\xampp\htdocs\register.php 中的用户名
> 
> 注意：未定义索引：第 4 行 C:\xampp\htdocs\register.php 中的 UserSurname
> 
> 注意：未定义索引：第 5 行 C:\xampp\htdocs\register.php 中的 UserMail
> 
> 注意：未定义索引：第 6 行 C:\xampp\htdocs\register.php 中的 UserPassword
> 
> 注意：未定义索引：第 7 行 C:\xampp\htdocs\register.php 中的 UserTel
> 
> 警告：require(class.phpmailer.php) [function.require]：打开流失败：第 24 行的 C:\xampp\htdocs\register.php 中没有这样的文件或目录
> 
> 致命错误：require() [function.require]：在 C:\xampp\htdocs\register.php 中打开所需的 'class.phpmailer.php' (include_path='.;C:\xampp\php\PEAR') 失败第 24 行

我的 php 文件 register.php：

```
 <?php
$username=$_POST['UserName'];
$usersurname=$_POST['UserSurname'];
$usermail=$_POST['UserMail'];
$userpass=$_POST['UserPassword'];
$usertelephone=$_POST['UserTel']; 
    $con = mysql_connect("localhost","root","rockenpeace");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("dbe", $con);

mysql_query("INSERT INTO user (UserName,UserSurname,UserMail, UserPassword, UserTel) 
        VALUES('$username','$usersurname','$usermail','$userpass','$usertelephone')");

mysql_close($con);

try
{
    require("class.phpmailer.php");
    $mail = new PHPMailer();   
    $mail->IsSMTP();
    $mail->Mailer = "smtp";
    $mail->Host = "ssl://smtp.gmail.com";
    $mail->Port = 465;
    $mail->SMTPAuth = true;
    $mail->CharSet="utf-8";
    $mail->Username = "user@gmail.com";
    $mail->Password = "password";
    $mail->From     = "user@gmail.com";
    $mail->FromName="DBE Yazılım";
    $mail->AddAddress($_POST['usermail']); 
    $mail->Subject  = "Registration Information";
    $mail->Body     = "Hello your password is " . $userpass;
    //$mail->AddAttachment($path);
    $mail->Send();
    echo 'Message has been sent.';  
}
catch(Exception $e)
{
    echo 'hata'.$e->getMessage();
}
header("location:confirmation.php"); ?> 
```

在我的 html 页面中：

```
<input type="text" name="UserMail" id="UserMail" size="30" />   
<input type="text" name="UserName" id="UserName" size="30" />   
<input type="text" name="UserSurname" id="UserSurname" size="30" /> 
<input type="text" name="UserTel" id="UserTel" size="30" /> 
<input type="password" name="UserPassword" id="UserPassword" size="30" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:03:01.897

在：

```
<input type="text" name="fname" id="UserName" size="30" /> 
```

更改`name="fname"`为`name="UserName"`。
对其他字段执行相同操作。

`$_POST`使用`name`属性，而不是`ID`.

* * *

您必须检查您的`$_POST`变量是否使用[`isset()`](http://php.net/manual/en/function.isset.php)or设置[`empty()`](http://php.net/manual/en/function.empty.php)。

示例**`isset()`**：

```
if(isset($_POST['UserName'])) $username = $_POST['UserName'];
else die("Username variable is not set."); 
```

示例**`empty()`**：

```
if(!empty($_POST['UserName'])) $username = $_POST['UserName'];
else die("Username variable is empty."); 
```

* * *

您应该想到的另一件事是，在 SQL 查询中使用字符串之前，您应该转义字符串，方法是使用[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)

例子：

```
$username = mysql_real_escape_string($_POST['UserName']); 
```

您可能还想将[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)与转义结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:23:08.157

嗯，好像

a）您的`$_POST`超全局是空的（或者至少不包含您认为的内容）。这是在这种情况下首先要怀疑的事情。跑`print_r($_POST)`过去看看里面有什么。

*假设*POST/GET 变量正在进入是不安全的。通过检查这个`isset()`并检查它们是否包含您认为应该包含的内容。简而言之，我们正在谈论验证。

b）听起来您的包含路径是错误的。同样，这很容易检查。运行`echo file_exists('path/to/include')`- 如果你没有看到`1`，路径是错误的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:25:01.377

用于[`isset`](http://php.net/isset)验证 $_POST 数组中是否存在密钥。

至于您失败的包含，这意味着该文件不在您的文件中，[`get_include_path`](http://php.net/get_include_path)因此您可以使用[`set_include_path`](http://php.net/set_include_path)（**注意**这可能会影响您的其他相关包含）进行设置，或者您可以使用`absolute path`.

最后，[`mysql_real_escape_string`](http://php.net/mysql_real_escape_string)在您的输入变量上使用，否则您很容易受到`SQL injection`.

**样本**

```
if (!isset($_POST['userName'], $_POST['key2'], .....)) {
   // handle this error, you don't have the correct inputs
} else {

   // Validate inputs

   // Escape inputs prior to inserting into database
   $username = mysql_real_escape_string($_POST['userName']);
   ...
   ...

   // Your queries
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:41:32.663

签入表单操作是此页面的页面，如果

该页面中输入标签的名称属性与您在此处尝试检索的相同。

喜欢

```
 <input type='submit' name='submit' value='register' />
</form> 
```

在 register.php 中

```
if(isset($_POST['submit']))
{
   // value in quotes should be same as name attribute in input tag
    $username=$_POST["username"] 
    ..
} 
```

- 更新

```
<form method ='post' action='register.php' >
    <input type="text" name="UserMail" id="UserMail" size="30" />   
    <input type="text" name="fname" id="UserName" size="30" />  
    <input type="text" name="lname" id="UserSurname" size="30" />   
    <input type="text" name="telephone" id="UserTel" size="30" />   
    <input type="password" name="userPassword" id="UserPassword" size="30" />
     </form 
```

并在注册页面

```
if(isset($_POST['UserMail']))
{
   $mail =mysql_real_escape_strings($_POST['UserMail']);
 }
if(isset($_POST['fname']))
{
   $mail =mysql_real_escape_strings($_POST['fname']);
 }
 if(isset($_POST['lname']))
 {
   $mail =mysql_real_escape_strings($_POST['lname']);
 } 
```

# eclipse - 从插件执行上次启动的调试/运行

> ID：11521374
> 
> 赞同：1
> 
> 时间：2012-07-17T11:19:34.600
> 
> 标签：eclipse, eclipse-plugin

我正在为我们基于 Eclipse 的 IDE 编写一个插件。我目前让插件在工具栏中显示一个按钮。现在，当用户按下此按钮时，我希望插件执行“运行上次启动”或“调试上次启动”命令（除了其他一些事情）。我在任何地方都找不到任何教程或文档。这可能吗？

# xml - 了解rest服务的wadl文件

> ID：11521375
> 
> 赞同：0
> 
> 时间：2012-07-17T11:19:46.793
> 
> 标签：xml, rest, httpwebrequest

我四处搜索，但我真的不知道如何解释我必须使用的其余服务的 wadl 文件。（底部包括 wadl ..）

就像我认为这样的简单 GET 请求应该可以工作：

```
http://<IP HERE>:8080/RestZone-it/resources/be.zonit.rest.data?plaats=<SOME LOCATION> 
```

（荷兰语 -> 英语）plaats = 位置

但它不起作用，我仍然得到所有数据.. 有人可以解释如何使用该服务吗？（再简单地告诉我如何做这个单一的请求将不胜感激^^）

```
<application xmlns="http://research.sun.com/wadl/2006/10">
    <doc xmlns:jersey="http://jersey.java.net/" jersey:generatedBy="Jersey: 1.8 06/24/2011 12:17 PM"/>
    <resources base="http://<IP-HERE>:8080/RestZone-it/resources/">
        <resource path="be.zonit.rest.data">
            <method id="create" name="POST">
                <request>
                    <representation mediaType="application/xml"/>
                    <representation mediaType="application/json"/>
                </request>
            </method>
            <method id="findAll" name="GET">
                <response>
                    <representation mediaType="application/xml"/>
                    <representation mediaType="application/json"/>
                </response>
            </method>
            <method id="edit" name="PUT">
                <request>
                <representation mediaType="application/xml"/>
                <representation mediaType="application/json"/>
                </request>
            </method>
            <resource path="{id}">
                <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="id" style="template" type="xs:int"/>
                <method id="find" name="GET">
                    <response>
                        <representation mediaType="application/xml"/>
                        <representation mediaType="application/json"/>
                    </response>
                </method>
                <method id="remove" name="DELETE"/>
            </resource>
            <resource path="count">
                <method id="countREST" name="GET">
                    <response>
                        <representation mediaType="text/plain"/>
                    </response>
                </method>
            </resource>
            <resource path="{from}/{to}">
                <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="to" style="template" type="xs:int"/>
                <param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="from" style="template" type="xs:int"/>
                <method id="findRange" name="GET">
                    <response>
                        <representation mediaType="application/xml"/>
                        <representation mediaType="application/json"/>
                    </response>
                </method>
            </resource>
        </resource>
    </resources>
</application> 
```

响应示例

```
<data>
    <aantalDeelnemers>50</aantalDeelnemers>
    <begin>15:30</begin>
    <datum>5/07/2012</datum>
    <einde>1:00</einde>
    <gemeente>Gent</gemeente>
    <huisnr>2</huisnr>
    <id>1</id>
    <indoor>0</indoor>
    <omschrijving>
    Gent Jazz Festival vindt dit jaar plaats van 5 t.e.m. 14 juli in de tuinen van De Bijloke in Gent.
    </omschrijving>
    <ownerID>1</ownerID>
    <plaats>Bijlokesite</plaats>
    <straat>Godshuizenlaan</straat>
    <titel>Gent Jazz Festival</titel>
</data> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:26:31.753

试试这个网址：

```
 http://<IP HERE>:8080/RestZone-it/resources/be.zonit.rest.data/<SOME LOCATION> 
```

# perl - DBD::Sybase 中的 syb_describe

> ID：11521376
> 
> 赞同：0
> 
> 时间：2012-07-17T11:19:51.677
> 
> 标签：perl, sybase

我希望为表中的所有列提取 Sybase 数据类型。当我尝试使用 来实现这一点`$sth->{TYPE}`时，我得到了数据类型的数字版本（即，而不是 sybase 数据类型`varchar`，我得到了`0`）。

从 DBD::Sybase 文档中，我注意到函数的`SYBTYPE`属性`syb_describe`可能能够产生我正在寻找的东西。但似乎我的理解并不正确。`SYBTYPE`也仅以数字形式打印数据类型。

有没有办法获取实际 Sybase 数据类型的文本表示（而不是数字）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:44:58.570

听起来您希望对创建表定义进行*逆向工程。*这是一个可用于 Sybase 或 SQL Server 表的 SQL 脚本。

```
select c.name,
        "type(size)"=case
                     when t.name in ("char", "varchar") then
                          t.name + "(" + rtrim(convert(char(3), c.length)) + ")"
                     else t.name
                     end,
       "null"=case
              when convert(bit, (c.status & 8)) = 0 then "NOT NULL"
              else "NULL"
              end
from syscolumns c, systypes t
where c.id = object_id("my_table_name")
and   c.usertype *= t.usertype
order by c.colid
go 
```

注意：这仍然可以使用 nawk 脚本进行编辑，以创建真正的 SQL 模式文件。nawk 脚本将去除页眉，添加“create table my_table_name”，添加逗号，去除页脚并添加“go”。

好 SQL，晚安！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:37:51.787

我找到了一种解决方法（注意：但这并不能回答问题）：

我所做的只是简单地加入了`sysobjects`,`systypes`和`syscolumns`system 表。

# android - 如何使用 Phonegap 在 Android 中加载应用引擎托管的 HTML 文件

> ID：11521377
> 
> 赞同：4
> 
> 时间：2012-07-17T11:19:52.300
> 
> 标签：android, google-app-engine, cordova, server-error

我想在不使用 Android 的`WebView`. 当我在 PhoneGap 中使用以下代码时，它显示消息，**连接到服务器不成功。**

代码：

```
public class HelloCordovaActivity extends DroidGap {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    super.loadUrl("http://5.appid.appspot.com/");
  } 
```

或者建议使用 Phonegap 在应用引擎中加载显式托管文件的替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:26:04.610

阅读[此处](http://rickluna.com/wp/2012/04/solving-the-connection-to-the-server-was-unsuccessful-error-in-androidphonegap/)，报告的错误可能是由超时问题引起的。

`loadUrl`我会尝试在语句上方添加此调用：

`super.setIntegerProperty("loadUrlTimeoutValue", 70000);`

# eclipse - 我怎样才能写出对两件事之一的引用？

> ID：11521380
> 
> 赞同：0
> 
> 时间：2012-07-17T11:20:08.363
> 
> 标签：eclipse, xtext

我正在编写 Xtext 语法，我想支持交叉引用以在我的目标语言中使用变量或参数。

所以目标语言看起来像：

```
function(p1) {
  x1 = eat(p1) // line 1
  x2 = eat(x1) // line 2
} 
```

为此，我定义了：

```
Instruction:
  name=Value '=' 'eat' '(' ref=[Instruction|Value] ')' 
```

这适用于第 2 行，但不适用于第 1 行，因为参数不是指令。我尝试将其定义为：

```
Instruction:
  name=Value '=' 'eat' '(' ref=([Instruction|Value] | [Parameter|Value]) ')' 
```

或者这种变化的各种变体——例如，使用可以是两种可能的参考可能性之一的单一`Ref`规则——但所有这些都被 Xtext 拒绝。这是可行的，如果可行，怎么做？

[（我想另一种方法是定义一个代表参数和指令的单个元素，然后引用它，但如果不允许语法或整个指令出现在参数列表中，我无法弄清楚如何做到这一点)]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:37:40.483

如果指令和参数都有一个共同的祖先，那么您可以编写一个引用该祖先的规则。

然后一些次要的验证器/内容辅助配置，您可以禁止任何其他可能的配置。

这不是最好的解决方案，因为它引入了一个基类，用于模型而不是向下转换的版本，但我不知道解决这个问题的任何其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:18:45.620

我找到了解决方案。正如我所怀疑的，参数和指令**必须**有一个共同的祖先——但这个祖先实际上不必出现在任何语法规则的右侧。所以我定义：

```
ValueDef:
  Parameter | Instruction 
```

进而

```
Instruction:
  name=Value '=' 'eat' '(' ref=[ValueDef|Value] ')' 
```

... 和本身的规则`Instruction`保持`Parameter`不变。这意味着指令在需要参数的地方不可行，但两者都定义了`ValueDef`引用。

# vb6 - 获取表单的调用树

> ID：11521381
> 
> 赞同：1
> 
> 时间：2012-07-17T11:20:12.300
> 
> 标签：vb6, vb6-migration

我有一个包含一组表单的 VB 项目。该项目中有许多类模块/公共模块文件。

我想为每个表单生成树层次结构。

假设有 10 种形式 f1, f2 .... f10。表格 f1 具有 fun1、fun2...fun5 功能。

我想在表单级别查看树层次结构。这意味着从每个表单调用的所有函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:23:17.003

VB6 IDE 中没有类似的内置函数。

[您需要像http://www.aivosto.com/project/project.html](http://www.aivosto.com/project/project.html)这样的第三方工具来分析您的代码。

我以前用过项目分析器，非常好。标准版应该足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:57:28.800

如果您可以访问 VB6 IDE，那么我相信您可以使用对象浏览器窗口来做您想做的事。您可以在项目中选择一个表单（或类或模块），它将显示包含的功能。

# height - 如果 body 或 h2 具有 line-height，则链接高度大于父 h2

> ID：11521384
> 
> 赞同：1
> 
> 时间：2012-07-17T11:20:24.733
> 
> 标签：height, css

[这里减少了测试用例。](http://dabblet.com/gist/3128786)

我试图理解为什么会发生这种情况。

如果我有一个`<a>`inside并在或链接高度`<h2>`上设置的行高大于.`<body>``<h2>``<h2>`

[更新澄清] 问题是 .title a 的计算高度为 58px，而其父 h2.title 的计算高度为 50px。我希望它们都具有相同的计算高度。[/更新]

我已经给它们两个底部边框以更好地说明问题。

[更新 2] 我已经阅读了[line-height 规范](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)以尝试理解这一点。

`a`从我对规范的阅读来看，块级元素中的内联元素似乎`h2`应该继承父行高。我在[这里](http://dabblet.com/gist/3143850)编辑了我的示例，在`h2`. 给出`a`inline-block 的显示显然使它适合，但它仍然没有通过以及完全删除 line-height （因此使用浏览器默认 line-height 1.2）。

这可能不是*问题*，我只是想了解这种行为。

[更新 3] 我已经意识到，如果我将 的 更改`line-height`为`a`大于盒子`h2`的总高度（上面示例中的粉红色）*确实会*增加，所以是从. 令人困惑的是链接高度（可点击区域）和边框底部位置不会改变，而边框底部会随着行高移动。`h2`*`a``line-height``h2``h2`*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:33:57.813

我没有看到你的问题。在您提供的链接中，绝对没有什么奇怪的。您在 h2 中有一个链接。所以链接的字体大小得到h2的字体大小。但是 a 不比 h2 大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:35:24.410

您是否尝试过删除 的边距`<H3>`？在大多数浏览器中，它的默认边距为 0.5em。

如果这是问题，您可以阅读有关[Reset CSS](http://meyerweb.com/eric/tools/css/reset/)的内容。

**编辑：**
您有 2 种类型的容器，一个具有严格固定高度的浮动块元素；并且一个内联女巫具有自动仇恨..和默认边距和间距（想象一个链接作为段落的一部分......）。

要获得预期的结果，您可以 `display:inline-block`在`<a>`. 所以它们都将被视为具有固定高度的盒子。

[http://dabblet.com/gist/5219955](http://dabblet.com/gist/5219955)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:36:22.100

这不是问题吗？

但是添加`display:block;`到您的锚点，它会更像您期望的那样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:36:27.440

你有一个包含链接的 h2。

h2 和链接的行高为 1（继承），但链接的明确字体大小为 3em。

这意味着，字体大小作为容器更大，这可能会导致在不同的浏览器中产生不同的结果。

在 Firefox（版本 13）中，结果是父容器（h2）的顶部和底部溢出。*

# mysql - MongoDB Map&Reduce 比 MySQL group by 慢得多

> ID：11521386
> 
> 赞同：0
> 
> 时间：2012-07-17T11:20:39.753
> 
> 标签：mysql, mongodb, mapreduce

我正在尝试评估用于新项目的数据库系统。

目前我比较 MySQL 和 MongoDB 来完成手头的任务。

我有大约 500 万条记录和 350 个数字字段，我必须使用这些数据为某些图形绘制提供不同的粒度级别。

我将数据泵入 MongoDB 和 Mysql，并在 Mysql 上生成了一些具有 10/th、100/th 和 1000/th 粒度的临时表。然后应用程序选择与当前任务最匹配的正确表，然后查询那里的数据。

使用这种技术，我可以足够快地获取数据（< 100 ms）。我使用的 SQL 查询是：

```
SELECT from_unixtime(CAST(FLOOR(MIN(STAMP/1000)) AS SIGNED INTEGER)),
MIN(RING),MIN(STATE),CAST(FLOOR(MIN(STAMP)) as SIGNED INTEGER),AVG(w21030401)
FROM project1 GROUP BY FLOOR((stamp - 1181589892000)/60000); 
```

我使用相同的查询来创建临时表。唯一的区别是，有 350 个 wXXXXXX 字段。

```
INSERT INTO project1_10 (TTIME,RING,STATE,STAMP,w21030401,.........)
SELECT from_unixtime(CAST(FLOOR(MIN(STAMP/1000)) AS SIGNED INTEGER)),
MIN(RING),MIN(STATE),CAST(FLOOR(MIN(STAMP)) as SIGNED INTEGER),AVG(w21030401),.......
FROM project1 GROUP BY FLOOR((stamp - 1181589892000)/60000); 
```

然后我尝试用 MongoDB 做同样的事情。我将所有数据输入 MongoDB，并在表单中获得了 480 万个文档：

```
{ "_id" : ObjectId("50040b3f0cf2872a8d3af90d"), "TTIME" : 
ISODate("2008-11-30T06:40:07Z"), "STAMP" : NumberLong("1228027207000"), 
"STATE" : 2531, "RING" : 1, "w13010096" : 34.991, "w13010097" : 1.432, 
"w23010001" : 292, "w18030180" : 84, "w18030380" : 95, "w21030002" : 51.113, 
"w21030005" : 60.321, "w21030004" : 274.662, "w21030008" : 149.629, 
"w21030009" : 126.565, "w21030010" : 576.296, ........... } 
```

然后我尝试使用以下 mapReduce 生成临时文档：

```
keylist =  [ 'w21030401', 'w13011114', ....  ];

m = function (){
    var result = {};
    result['STAMP'] = this['STAMP'];
    result['RING'] = this['RING'];
    result['TTIME'] = this['TTIME'];
    result['STATE'] = this['STATE'];
    for(var key in keylist){
        if(key in this) {
            result[key] = this[key];
            result['cnt_' + key] = 1;
        }
    }
    var zone = Math.floor((this['STAMP'] - 1171004118000) / 1000000);
    emit( zone , result );
};
r = function (name, values){
    var result = {};
    result['STAMP'] = values[0]['STAMP'];
    result['RING'] = values[0]['RING'];
    result['TTIME'] = values[0]['TTIME'];
    result['STATE'] = values[0]['STATE'];
    for(var key in keylist) {
        result[key] = 0;
        result['cnt_' + key] = 0;
    }
    for ( var i=0; i<values.length; i++ ) {
        if(values[i]['STAMP'] < result['STAMP']) {
            result['STAMP'] = values[i]['STAMP'];
            result['TTIME'] = values[i]['TTIME'];
        }
        if(values[i]['RING'] < result['RING']) {
            result['RING'] = values[i]['RING'];
        }
        if(values[i]['STATE'] < result['STATE']) {
            result['STATE'] = values[i]['STATE'];
        }
        for(var key in keylist) {
            if(key in values[i]) {
                result[key] += values[i][key];
                result['cnt_' + key] += values[i]['cnt_' + key];
            }
        }
    }
    return result;
};
f = function(who, val){
    var result = {};
    result['STAMP'] = val['STAMP'];
    result['RING'] = val['RING'];
    result['TTIME'] = val['TTIME'];
    result['STATE'] = val['STATE'];
    for(var key in keylist) {
        if(key in val) {
            result[key] = val[key]/val['cnt_'+key];
        }
    }
    return result;
};

db.project1.mapReduce( m, r, { finalize : f, scope: { keylist: keylist }, out : {replace : 'project1_100'} , jsMode : false }); 
```

MySQL 用了 210 秒来创建临时表，MongoDB 用了大约 4 小时。

我的问题是：MongoDB 不适合我的问题吗，我是否只需要比 MySQL 更大的 MongoDB 硬件，还是我的 MapReduce 做错了什么？

谢谢

彼得

# php - 在 Symfony2 项目中 Guzzle 注释不适用于 Doctrine2 注释解析器

> ID：11521389
> 
> 赞同：0
> 
> 时间：2012-07-17T11:20:51.190
> 
> 标签：php, symfony, doctrine

我有一个 Symfony2 项目，正在尝试集成[GuzzleBundle](https://github.com/ddeboer/GuzzleBundle)以构建 Web 服务客户端。我正在使用`@guzzle`客户端命令的注释（扩展`Guzzle\Service\Command\AbstractCommand`）。

它似乎在开发环境中正常工作，但是当我尝试使用 prod 环境加载页面时，我得到一个 Doctrine `AnnotationException`：

```
 PHP Fatal error:  Uncaught exception 'Doctrine\Common\Annotations\AnnotationException' with message '[Semantical Error] The annotation "@guzzle" in class Admin\FindAnExpertBundle\Entity\SymplecticClient\Rest\Command\UserById was never imported. Did you maybe forget to add a "use" statement for this annotation?' 
```

我还收到有关缺少`Proxy`类文件的错误：

```
PHP Warning:  require(/home/httpd/sites/experts.admin/app/cache/prod/doctrine/orm/Proxies/AdminFindAnExpertBundleEntityRelationshipTypeProxy.php) [<a href='function.require'>function.require</a>]: failed to open stream: No such file or directory in /home/httpd/sites/experts.admin/vendor/doctrine/lib/Doctrine/ORM/Proxy/ProxyFactory.php 
```

我认为这是因为致命错误正在停止创建所有代理类。

Guzzle 似乎没有使用 Doctrine 注释解析器，所以我想知道是否有办法让它忽略`@guzzle`注释或以某种方式注册它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:04:58.090

您必须导入 Guzzle 的注解解析器，它处理“@guzzle”注解，例如：

```
use Guzzle\Service\Inspector as guzzle; 
```

但是不知道是哪个班。

也许[这个 gist 文件](https://gist.github.com/3074476)可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:44:13.043

我最终将与 Web 服务客户端相关的类从 Entity 文件夹中移出，这阻止了 Doctrine 注释解析器读取它们。回想起来，这些类无论如何都不应该在那个文件夹中。

# android - 获取 android 代理凭据

> ID：11521395
> 
> 赞同：0
> 
> 时间：2012-07-17T11:21:14.397
> 
> 标签：android, proxy, credentials, http-get

我在我的 Android 设备上配置了代理。我正在开发一个应用程序，我需要在其中使 HTTP 通过代理。我可以获取 HTTP，但我必须再次将用户和密码设置到 httpclient 中，那么，如何获取存储在 android 设备中的代理凭据？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:19:14.077

我认为这可以帮助你：[https ://stackoverflow.com/a/1626616/355465](https://stackoverflow.com/a/1626616/355465)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T05:17:46.457

cntlm 是免费的本地代理 ( [http://cntlm.sourceforge.net/](http://cntlm.sourceforge.net/) ) 并且可以用作您的设备和具有用户名的代理之间的中间件，它具有 cntlm -H 选项来存储您的密码，所以您无需更改代码，只需将设备配置为使用 cntlm 代理

# c# - 以下方法或属性之间的调用不明确：

> ID：11521396
> 
> 赞同：1
> 
> 时间：2012-07-17T11:21:20.327
> 
> 标签：c#, asp.net-mvc

我有 2 个网站；一个是公共的，另一个是管理员的。这些都是独立的网站。theSite.dll 用于公共，theSiteCMS 用于管理员。

下面的代码来自AdminSite，即SiteCMS。该站点还包含theSite.dll 引用，它也具有相同的成员函数Html.ActiveLinkImage。

我怀疑我无法隔离这些调用；因此出现错误。请建议正确的方法。

**Code theSiteCMS（管理站点）**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<theSiteCMS.Helpers.Pagination<theSiteCMS.Models.Article>>"%>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Articles Management
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <script type="text/javascript" language="javascript">
        function goToPage(pageIndex) {
            $("#page").val(pageIndex);
            $('#SearchForm').submit();
        }

        function sortField(fld, sortDirection) {
            $("#sort_field").val(fld);
            $("#sort_dir").val(sortDirection);
            $('#SearchForm').submit();
            return false;
        }     
    </script>
    <h2>Articles Management</h2>
    <% string[] articles_status = { "Draft", "Submitted", "Published", "Archived", "Deleted" }; %>
    <% var _gridState = (theSiteCMS.Controllers.ArticlesController.GridState)ViewData["GridState"];
       var queryCollection = new { 
                    sort_field= _gridState.sort.field
                    ,sort_dir = (_gridState.sort.direction == theSiteCMS.Controllers.AppController.SortDirection.Descending) ? "desc" : "asc"
                    ,status = _gridState.status
                    ,keyword = _gridState.keyword
                    ,username = _gridState.username
                    ,section_id = _gridState.section_id
                    ,category_id = _gridState.category_id
                    ,page = _gridState.page
       };
    %>
    <%Html.BeginForm("index", "Articles", FormMethod.Post, new { id="SearchForm"}); %>   
    <table width="100%">
        <tr>
            <td width="16%">Status</td>
            <td width="16%">Section</td>
            <td width="16%">Category</td>
            <!--td width="16%">Published</td-->
            <td width="16%">User</td>
            <td width="16%">Keyword</td>
            <td width="4%">&nbsp;</td>
        </tr>
        <tr>
        <td><%= Html.DropDownList("status", theSiteCMS.Controllers.ArticlesController.ArticleStatusList(_gridState.status), "ALL", new { onchange = "this.form.submit();" })%></td>
        <td><%= Html.DropDownList("section_id", theSiteCMS.Controllers.SectionsController.SectionsList(_gridState.section_id), "--select all--", new { onchange = "this.form.submit();" })%></td>
        <td><%= Html.DropDownList("category_id", theSiteCMS.Controllers.SectionsController.CategoriesList(_gridState.section_id, _gridState.category_id), "--select all--", new { onchange = "this.form.submit();" })%></td>
        <!--td><%/* Html.jQuery().DatePicker()
                    .Name("publish_at")
                    .DateFormat("mm-dd-yy")
                    .NavigationAsDateFormat(true)
                    .HtmlAttributes(new { style="width:100px"})
                    .Render();*/ %></td-->
        <td><%= Html.TextBox("username", _gridState.username, new { style = "width:100px" })%></td>
        <td><%= Html.TextBox("keyword", _gridState.keyword, new { style="width:100px"})%></td>
        <td width="15%"><input type="submit" value="find" /></td>
        </tr>
    </table>
    <%=Html.Hidden("sort_dir", _gridState.sort.direction == theSiteCMS.Controllers.AppController.SortDirection.Descending?"desc":"asc") %>
    <%=Html.Hidden("sort_field", _gridState.sort.field) %>

    <%=Html.Hidden("page", _gridState.page) %>
   <%Html.EndForm(); %>

   <hr />

    <table width ="100%">
    <caption><%= ViewData["Message"] %></caption>
        <tr>
            <th>Action</th>
           <th><%= Html.ActionLink("Title", "Index", new { action="Index"}, new { @class = Html.GetSortCssClass(_gridState.sort, "title"), onclick = "return sortField('title','asc');" })%></th>
            <th><%= Html.ActionLink("Author", "Index", new { action="Index"}, new { @class = Html.GetSortCssClass(_gridState.sort, "user_id"), onclick = "sortField('user_id','asc');return false;" })%></th>
            <th><%= Html.ActionLink("Date", "Index", new { action="Index"}, new { @class = Html.GetSortCssClass(_gridState.sort, "publish_at"), onclick = "sortField('publish_at','asc');return false;" })%></th> 
            <th><%= Html.ActionLink("Status", "Index", new { action="Index"}, new { @class = Html.GetSortCssClass(_gridState.sort, "status"), onclick = "sortField('status','asc');return false;" })%></th>           
            <th>
                Comments
            </th>
            <th>
                View count
            </th>
        </tr>

    <% foreach (var item in Model)
       { %>

        <tr>
            <td width="100">
                <%=Html.ActionLinkImage("Edit", Url.Content("~/images/icons/pencil.png"), "Edit", new { action = "Edit", id = item.id }, new { title = "Edit" })%>
                <%=Html.ActionLinkImage("View", Url.Content("~/images/icons/eye.png"), "Details", new { action = "Details", id = item.id }, new { title = "View" })%><br />
                <% if (item.status ==0){ //draft%>
                    <%=Html.Image("~/images/icons/application_edit.png", new {@class="disabled"}) %>
                <%} else {%>
                    <%=Html.ActionLinkImage("Draft", Url.Content("~/images/icons/application_edit.png"), "changeStatus", new { action = "changeStatus", id = item.id, s = 0 }, new { title="Draft"})%>
                <%} %> 

                <% if (item.status ==1){ //submit%>
                    <%=Html.Image("~/images/icons/application_go.png", new {@class="disabled"}) %>
                <%} else {%>
                    <%=Html.ActionLinkImage("Draft", Url.Content("~/images/icons/application_go.png"), "changeStatus", new { action = "changeStatus", id = item.id, s = 1 }, new { title = "Submit" })%>
                <%} %> 
                <% if (item.status ==2){ //publish %>
                    <%=Html.Image("~/images/icons/accept.png", new {@class="disabled"}) %>
                <%} else {%>
                    <%=Html.ActionLinkImage("Publish", Url.Content("~/images/icons/accept.png"), "changeStatus", new { action = "changeStatus", id = item.id, s = 2 }, new { title = "Publish" })%>
                <%} %>                                  
                <% if (item.status ==3){ //archive %>
                    <%=Html.Image("~/images/icons/compress.png", new {@class="disabled"}) %>
                <%} else {%>
                    <%=Html.ActionLinkImage("Archive", Url.Content("~/images/icons/compress.png"), "changeStatus", new { action = "changeStatus", id = item.id, s = 3 }, new { title = "Archive" })%>
                <%} %>
                <% if (item.status ==4){ //deleted %>
                    <%=Html.Image("~/images/icons/application_delete.png", new {@class="disabled"}) %>
                <%} else {%>
                    <%=Html.ActionLinkImage("Archive", Url.Content("~/images/icons/application_delete.png"), "changeStatus", new { action = "changeStatus", id = item.id, s = 4 }, new { title = "Delete" })%>
                <%} %>                     
            </td>
            <td>
                <%= Html.Encode(item.title)%><br/>
                <%= Html.Encode(item.Category.Section.title)%> , <%= Html.Encode(item.Category.title)%>
            </td>
            <td>
                <%= Html.Encode(item.User.username)%>
            </td>

            <td>
                <%= Html.Encode(String.Format("{0:g}", item.publish_at))%>
            </td>

            <td>
                <%= Html.Encode(articles_status[item.status])%>
            </td>
            <td>                
                <%= Html.Encode(item.Comments.Count())%>
            </td>
            <td>
                <%= Html.Encode(item.viewcount)%>
            </td>

        </tr>

    <% } %>

    </table>

    <div class="pagination">
        <% if (Model.HasPreviousPage)
           { %>
            <%= Html.RouteLink("previous",
                               "Default",
                               new { page = (Model.PageIndex - 1) })%>

        <% }
           else
           { %>
           previous
        <%} %>
         | 
        <% if (Model.HasNextPage)
           { %>

            <%= Html.RouteLink("next",
                               "Default",
                               new { page = (Model.PageIndex + 1) })%>

        <% }
           else
           { %>    
           next
        <%} %>
    </div>
</asp:Content> 
```

**我得到的错误：**

```
The call is ambiguous between the following methods or properties:
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)'
 and
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)'
\My Documents\Visual Studio 2008\Projects\3ICMS\Views\Articles\Index.aspx   111 
------
The call is ambiguous between the following methods or properties:
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)'
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)'
\My Documents\Visual Studio 2008\Projects\3ICMS\Views\Articles\Index.aspx   116 
------
The call is ambiguous between the following methods or properties:
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)' 
and
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)' 
\My Documents\Visual Studio 2008\Projects\3ICMS\Views\Articles\Index.aspx   106 
------
The call is ambiguous between the following methods or properties:
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)' and
'System.Web.Mvc.Html.HtmlExtensions.ActionLinkImage(System.Web.Mvc.HtmlHelper, string, string, string, object, object)' 
\My Documents\Visual Studio 2008\Projects\3ICMS\Views\Articles\Index.aspx   101 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:28:10.677

看起来您以某种方式引用了 2 个不同版本的 System.Web.Mvc dll，但它不知道该调用哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:18:47.610

我的建议是删除 System.Web.MVC 的任何引用`'theSiteCMS'`（因为`'theSite.dll'`已经包含它），然后添加`theSiteDLL`为*项目*引用。

我假设它们都在同一个解决方案文件中。我希望这有帮助。

# asp.net - 无法访问数据库文件

> ID：11521398
> 
> 赞同：2
> 
> 时间：2012-07-17T11:21:23.953
> 
> 标签：asp.net, sql, database

上周我在我的机器上创建了一个 ASP.NET Web 应用程序项目。它正在连接到 SQL Server 数据库文件以进行测试。该数据库是在 Visual Studio 的服务器资源管理器部分中创建的，它创建了一个包含所有信息的数据库文件。我正在使用 Windows 身份验证连接到数据库。

最近我的电脑已经迁移到我公司的一个新网络上。现在我不再有权访问数据库文件。我得到的错误是`Login failed for user "DOMAIN/USER"`. 我猜这是因为域发生了变化，我的计算机和数据库服务器位于不同的域中。但是，我无权访问旧域来添加新的登录名或具有访问数据库的权限的用户。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:14:35.537

You cannot get around this, unless an admin is willing to give you a copy of the files from the old drive.

**So, you must re-create your database.**

Fortunately, if you took proper precautions, this will be easy.

Option 1: If your database is under source control, simply checkout the latest good version of the database.

Option 2: Load the latest backup of the database.

# iphone - 用户位置奇怪问题

> ID：11521401
> 
> 赞同：0
> 
> 时间：2012-07-17T11:21:33.750
> 
> 标签：iphone, map, annotations, mkmapview, userlocation

我对地图的工作原理有所有概念，但我陷入了一个非常奇怪的问题。

打开我的地图控制器后，我的默认蓝色可见（MKUserLocation），但是当我加载自定义引脚（IVMyLocation，注释类）时，默认引脚消失。

我正在正确管理自定义引脚的删除，以便默认引脚不应该像这样消失

```
for (id<MKAnnotation> annotation in _mapView.annotations) {

    if([annotation isKindOfClass:[IVMyLocation class]])

        [_mapView removeAnnotation:annotation];
} 
```

但我的默认引脚仍然消失。它只是第一次可见。

**注意：它在 Xcode4 模拟器中工作正常，它只在设备中消失**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:03:13.427

你`nil`应该回来`MKUserLocation``mapView:viewForAnnotation:`

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation

    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;
    // etc 
```

这允许显示默认的蓝点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T09:00:17.587

减少您的对象数量。对我有帮助。

# php - PHP 5.4：为什么类可以覆盖具有不同签名的特征方法？

> ID：11521403
> 
> 赞同：12
> 
> 时间：2012-07-17T11:21:37.243
> 
> 标签：php, inheritance, overriding, traits

我想知道在当前的 PHP 5.4 实现中是否有任何充分的理由说明这种行为是可能的：

```
trait T {
    public function test(PDO $pdo) {}
}

class C {
    use T;
    public function test(DOMDocument $dom) {}
} 
```

我认为一个类使用特征的事实保证了这个类有一个特定的接口可用。但是在这里，如果我们出于其他目的无意中重写了 trait 方法，我们甚至不会像经典继承那样收到严格标准的通知。

这是故意允许的吗？做什么的？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-17T11:36:26.783

此行为已记录在案。从 php.net ( [http://php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php) ):

> 从基类继承的成员被由 Trait 插入的成员覆盖。优先顺序是当前类中的成员覆盖 Trait 方法，这反过来又覆盖继承的方法。

这里没有通知的理由。

**编辑：**

我看了一些更严肃的文献来阐明这个话题:)。看起来这种行为是特征定义的一部分。他们被要求以这种方式工作。这是来自研究“Traits: Composable Units of Behavior”（欧洲面向对象编程会议论文集）：

> 特征组合的另一个特性是组合顺序是不相关的，因此必须明确消除冲突的特征方法（参见第 3.5 节）。类中定义的方法与合并特征定义的方法之间的冲突使用以下两个优先规则来解决。
> 
> – 类方法优先于特征方法。
> 
> – 特征方法优先于超类方法。这源于扁平化属性，该属性表明 trait 方法的行为就像它们是在类本身中定义的一样。

你可以在这里阅读更多：http: [//scg.unibe.ch/archive/papers/Scha03aTraits.pdf](http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf)

# php - 自定义模板不适用于以下选项

> ID：11521414
> 
> 赞同：0
> 
> 时间：2012-07-17T11:22:02.187
> 
> 标签：php, wordpress, templates, wordpress-theming

我为页面特定模板遵循了本教程——http: [//codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

通过 wordpress 管理面板创建一个页面 - `Blog Page`URL 类似 -`http://localhost/wordpress/blog-page/`并从管理面板本身将模板设置为我的模板“Swapnesh”。

创建了我的特定页面模板，`page-blog-page.php`其中包含以下代码——

```
<?php

/*
Template Name: Swapnesh
*/

get_header(); ?>

        <div id="primary">
            <div id="contentabc" style="border:7px solid red;">

                <?php while ( have_posts() ) : the_post(); ?>

                    <?php get_template_part( 'content', 'page' ); ?>

                    <?php comments_template( '', true ); ?>

                <?php endwhile; // end of the loop. ?>

            </div><!-- #content -->

            <?php get_sidebar(); ?>

        </div><!-- #primary -->

<?php get_footer(); ?> 
```

现在，当我导航到`http://mysite/wordpress/blog-page/`我没有得到那个边界以便我可以继续前进时，让我知道我做错了什么。

**注意**-在“ `Reading Settings`” mu帖子页面选择下是“博客页面”，当我选择此选项时，它向我显示`red border`但没有帖子:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:31:34.353

您是否在创建新页面时选择了 Swapnesh 作为页面模板？您可以从右侧的页面属性中选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:01:54.707

我不知道你是否已经解决了这个问题，但我认为这个问题与你在这里结束的皮带和大括号方法有关。通过命名您的自定义模板 page-blog-page.php，它应该不需要将其显式分配为具有 slug 博客页面的页面的自定义模板。

尝试完全更改自定义模板的名称 - my-template.php - 看看会发生什么。我看不出您的代码有任何明显错误。

# c# - c#代码生成的.xls文件无法在iPad和Android平板电脑上打开

> ID：11521415
> 
> 赞同：2
> 
> 时间：2012-07-17T11:22:01.877
> 
> 标签：c#, android, asp.net, ipad, xls

我有一个要求，我必须将生成的报告转换为 .xls 文件。我已经在台式机上成功地做到了这一点，但是当我在 iPad 或 Android 平板电脑上测试它时，它无法打开工作表。我很困惑为什么。我是否缺少任何特定的标题或内容类型？

我用过这个`Header`和`ContentType`：

```
Response.ContentType = "application/vnd.ms-excel"; 
Response.AddHeader("Content-disposition", "attachment; filename=table.xls"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:26:21.460

通过这种方式，您可以设置内容类型。但是您如何生成 xls？

microsoft office 自动将 HTML 页面转换为类似 excel 的格式，只需更改内容类型：如果页面中有表格，它将变成 excel 表格！

但其他软件不是那么通用……您应该始终使用格式正确的 XLS 文件。

# selenium - 使用 testNG 的 Selenium 命令级报告

> ID：11521416
> 
> 赞同：1
> 
> 时间：2012-07-17T11:22:06.447
> 
> 标签：selenium, command, reporting, testng

我是 Selenium WebDriver 的新手，目前正在使用 Eclipse 上的 TestNG（import org.testng.Reporter）报告测试用例和测试套件，目前 TestNG 为测试输出文件夹上的测试用例、方法和套件生成高级报告功能，类似于此 --> [http://testng.org/test-output/index.html](http://testng.org/test-output/index.html)。

我正在寻找一种方法来关注由 testNG 创建的报告，

*   在我的测试方法中执行的所有 selenium 命令都应显示在 index.html &
*   与报告相关的失败命令的失败截图，类似于 loggingSelenium ---> [http://loggingselenium.sourceforge.net/samples/sampleResultSuccess.html](http://loggingselenium.sourceforge.net/samples/sampleResultSuccess.html)

我喜欢这种方式的原因是它更容易，因为通过这种方式我可以确切地知道执行了哪些 selenium 命令，我会得到正确的信息，什么地方出了问题，以及何时发生这种情况并且输入参数属于特定的 selenium 命令。

在testNG中可以吗？

# c++ - 在 vc++ 中仅从文件的完整路径中查找文件名

> ID：11521422
> 
> 赞同：8
> 
> 时间：2012-07-17T11:22:22.767
> 
> 标签：c++, file, visual-c++

假设有一个 CString 变量存储文件的完整路径。现在我只能从 if 中找到文件名。如何在 vc++ 中执行此操作。

```
CString FileName = "c:\Users\Acer\Desktop\FolderName\abc.dll"; 
```

现在我只想要**abc.dll**。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T11:26:31.897

您可以使用[`PathFindFileName`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773589%28v=vs.85%29.aspx).

请记住，您必须转义`\`路径字符串中的字符！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-17T11:43:43.847

与上面已经说明的相同，但是当您使用 MFC 框架时，这将是执行此操作的方法。虽然这不会检查文件是否存在。

```
CString path= "c:\\Users\\Acer\\Desktop\\FolderName\\abc.dll";
CString fileName= path.Mid(path.ReverseFind('\\')+1); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-17T11:31:31.450

```
std::string str = "c:\\Users\\Acer\\Desktop\\FolderName\\abc.dll";
std::string res = str.substr( str.find_last_of("\\") + 1 ); 
```

会给你“abs.dll”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T11:32:48.053

我会使用[Boost::FileSystem](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/index.htm)进行文件名操作，因为它了解名称的各个部分。你想要的函数是 filename()

如果您只是获取文件名，则可以使用 CString 函数执行此操作。首先使用 ReverseFind 找到 ast 反斜杠，然后 Right 得到想要的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T11:37:25.043

下面的代码演示了从完整路径中提取文件名

```
#include <iostream>
#include <cstdlib>
#include <string>
#include <algorithm>

std::string get_file_name_from_full_path(const std::string& file_path)
{
    std::string file_name;

    std::string::const_reverse_iterator it = std::find(file_path.rbegin(), file_path.rend(), '\\');
    if (it != file_path.rend())
    {
        file_name.assign(file_path.rbegin(), it);
        std::reverse(file_name.begin(), file_name.end());
        return file_name;
    }
    else
        return file_name;
}

int main()
{
    std::string file_path = "c:\\Users\\Acer\\Desktop\\FolderName\\abc.dll";
    std::cout << get_file_name_from_full_path(file_path) << std::endl;
    return EXIT_SUCCESS;
} 
```

# c# - 读取此 xml 的特定行？

> ID：11521426
> 
> 赞同：1
> 
> 时间：2012-07-17T11:22:55.340
> 
> 标签：c#, xml, windows-phone-7

无论如何要阅读此xml中的特定行吗？

[http://i.stack.imgur.com/hDPIg.jpg](http://i.stack.imgur.com/hDPIg.jpg)

```
 var guide = from query in dataFeed.Descendants("MaxPayne3")
                                                 select new NewGamesClass
                                                 {
                                                     GameTitle = (string)query.Element("Title"),
                                                     Gamedescription = (string)query.Element("Description"),
                                                     GameGuide = (string)query.Element("Guide")
                                                 };
                GuidesListBox.ItemsSource = guide.Where(ngc => ngc.GameGuide.StartsWith("See 'Payne In The Ass'")).Take(1); 
```

这将显示 xml 中的所有指南。

这项工作：

```
 var guide = from query in dataFeed.Descendants("MaxPayne3")
                                                 select new NewGamesClass
                                                 {
                                                     GameTitle = (string)query.Element("Title"),
                                                     Gamedescription = (string)query.Element("Description"),
                                                     GameGuide = (string)query.Element("Guide")
                                                 };
                //GuidesListBox.ItemsSource = guide.Where(ngc => ngc.GameGuide.StartsWith("See 'Payne In The Ass'")).Take(1);
                GuidesListBox.ItemsSource = guide.Where(ngc => ngc.GameTitle.StartsWith("Serious")); 
```

所以从 XML 中的第一个子元素开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:30:49.163

只需使用 where 子句继续您的语句：（根据您的需要更改条件）

```
 var guides = from query in dataFeed.Descendants("MaxPayne3")
                                             select new NewGamesClass
                                             {
                                                 GameGuide = (string)query.Element("Guide")

                                             };

AchivementsListBox.ItemsSource = guides.Where( ngc => ngc.GameGuide.StartsWith("Chapter 4:")); 
```

# c# - 由于正则表达式注释中无法识别的转义序列，ASP.Net MVC3 应用程序无法编译

> ID：11521427
> 
> 赞同：0
> 
> 时间：2012-07-17T11:23:02.470
> 
> 标签：c#, regex, asp.net-mvc-3, razor

我正在尝试使用正则表达式来验证名称输入字段。正则表达式非常简单，因为我只想允许字母和空格（现在）。这是我正在使用的代码：

```
[RegularExpression("[A-Za-z\s]+",ErrorMessage="UserName can only consist of letters or spaces")]
    [Required]
    [DisplayName("User Name")]
    public string UserName { get; set; } 
```

但是，当我尝试构建它时，我收到指定“无法识别的转义序列”的错误。[使用这张表](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)中的不同字符来玩这个表达式，我注意到有些会构建，有些不会：

将构建： // /b /n

不会构建：/s /k /B /D /d /? /（逃逸空间）

谁能解释为什么其中一些有效而有些无效，以及如何让我想要的表达方式起作用（空格和字母）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:27:16.087

编译器对字符串的处理方式与通常处理反斜杠的方式完全相同。您的反斜杠是转义字符的入口。试试这个：

```
[RegularExpression(@"[A-Za-z\s]+",ErrorMessage="UserName can only consist of letters or spaces")] 
```

@ 符号告诉编译器您正在处理任何转义字符。

另一个例子是文件路径。反斜杠必须用双反斜杠转义：

```
string fileName = "C:\\my_folder\\my_file.ext"; 
```

..否则，您可以使用@符号：

```
string fileName = @"C:\my_folder\my_file.ext"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:26:25.687

如果字符串没有预先转义，则`\\s`尝试在它到达正则表达式处理器之前对其进行转义。`\s``\s`

# php - 支票号码是平衡的（彼此相差1）（PHP）

> ID：11521430
> 
> 赞同：3
> 
> 时间：2012-07-17T11:23:08.723
> 
> 标签：php, math, numbers

我知道必须有 100 种方法可以做到这一点 - 但有人可以推荐“最佳/最简单”的方法来检查三个整数变量是否在一个点内。

```
$a = 1; $b = 2; $c = 1; 
```

由于每个 var 彼此相差 1 点，因此所需的公式应返回 TRUE；

谁能建议最好的功能/方法来做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:49:58.230

以为我会在这里加倍努力

```
function scope_check()
{
    // usage: bool scope_check(mixed $range, mixed $val1 [, mixed $val2 [,mixed $...]])
    $array=func_get_args();
    if(sizeof($array)<=1) return false;
    $range=array_shift($array);

    $max=max($array);
    $min=min($array);

    if($max-$min<=$range) return true;
    return false;
}

$valid=scope_check(1, -10, -11, -12, 4, 5 ,7);
if($valid) echo 'valid'; else echo 'not valid'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:38:36.643

```
function scope_check()
{
    $array=func_get_args();
    $max=max($array);
    $min=min($array);

    if($max-$min<=1) return true;
    return false;
}

$valid=scope_check($a, $b, $c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:29:04.000

您可以使用以下[`abs()`](http://php.net/abs)功能：

```
abs($a-$b) <= 1 && abs($a-$c) <= 1 && abs($b-$c) <= 1 
```

# java - 内部漏洞扫描报告

> ID：11521432
> 
> 赞同：0
> 
> 时间：2012-07-17T11:23:23.437
> 
> 标签：java, pci-dss, pci-compliance

如何为我的项目编写内部漏洞扫描报告？
我必须使用工具来生成此报告吗？我在网上搜索了与此相关的内容，但我一直无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:28:05.000

内部漏洞扫描通常由自动化工具执行。市场上有很多，包括 FOSS 和商业软件。如果您不知道从哪里开始寻找，那么 PCI 网站上的[认可扫描供应商 (ASV)](https://www.pcisecuritystandards.org/approved_companies_providers/approved_scanning_vendors.php)列表是一个不错的起点。您不必*使用*ASV 进行内部扫描，但他们肯定会提供可以帮助您的产品。

内部漏洞扫描通常从可以访问内部环境的控制台运行。它将从网络探测开始，并根据它找到的内容在堆栈中向上工作。鉴于它是一种自动扫描，不要期望它提供与目标渗透测试相同级别的详细信息，但这是了解您的安全性所在的良好开端。

编写自己的漏洞扫描程序是非常不寻常的，因为它需要网络、操作系统和应用程序以及安全漏洞的专业知识。随着堆栈中的新漏洞被发现，它需要保持最新。如果您具备所有这些技能，那么其​​中一家商业公司可能会为您提供工作！

# jquery - 在 jQuery 中合并两个 ready() 函数

> ID：11521434
> 
> 赞同：1
> 
> 时间：2012-07-17T11:23:26.040
> 
> 标签：jquery, jquery-plugins, ready

我的 HTML 文件中有两个`$(document).ready(function($)`函数。现在因为有两个`ready()`函数，所以只有一个执行！由于我对 jQuery 不太了解，因此无法合并它们。

```
<script type="text/javascript">

    $(document).ready(function($){

        $('#mega-1').dcVerticalMegaMenu({
            rowItems: '3',
            speed: 'fast',
            effect: 'show',
            direction: 'right'
        });
        $('#mega-2').dcVerticalMegaMenu({
            rowItems: '3',
            speed: 'slow',
            effect: 'fade',
            direction: 'left'
        });
        $('#mega-3').dcVerticalMegaMenu({
            rowItems: '4',
            speed: 'slow',
            effect: 'slide',
            direction: 'right'
        });
        $('#mega-4').dcVerticalMegaMenu({
            rowItems: '3',
            speed: 'fast',
            effect: 'slide',
            direction: 'left'
        });

    });
    </script> 
```

jQuery函数2：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#featured > ul").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:48:51.463

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Page Title</title>

<script src="some_javascript_file.js"></script>
<script src="another_js_file.js"></script>

</head>
<body>

<!-- HTML HERE -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="jQuery_plugin_1.js"></script>
<script src="jQuery_plugin_2.js"></script>
<script>
(function($){ // remap $ to jQuery

    $(function(){
        $('#mega-1').dcVerticalMegaMenu({
            rowItems: '3',
            speed: 'fast',
            effect: 'show',
            direction: 'right'
        });
        $('#mega-2').dcVerticalMegaMenu({
            rowItems: '3',
            speed: 'slow',
            effect: 'fade',
            direction: 'left'
        });
        $('#mega-3').dcVerticalMegaMenu({
            rowItems: '4',
            speed: 'slow',
            effect: 'slide',
            direction: 'right'
        });
        $('#mega-4').dcVerticalMegaMenu({
            rowItems: '3',
            speed: 'fast',
            effect: 'slide',
            direction: 'left'
        });

        // =====================================

        $("#featured > ul").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);

    });

})(jQuery);
</script>

</body>
</html> 
```

# java - Java 单个 ActionListener 和一个 Overarching ActionListener

> ID：11521435
> 
> 赞同：1
> 
> 时间：2012-07-17T11:23:30.150
> 
> 标签：java, swing, awt, jbutton, actionlistener

也许我正在以错误的方式解决这个问题。让我知道使用 Swing 和 AWT，我在一个框架上设置了几个按钮，它们每个都有一个 ActionListener 对应于它们的特定功能 IE

```
JButton foo_button = new JButton("Foo-Me");
foo_button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        //Fancy schmancy code work
    } 
})
JButton bar_button = new JButton("Bar None");
bar_button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        //Fancy schmancy code work
    } 
}) 
```

所以这些按钮中的每一个都做自己的事情。但是，如果我希望所有按钮都做某件事（每个按钮都使用相同的方法），在我的情况下，在他们做自己的事情之前清除标签怎么办。

显然，我可以将whatever_label.setText("") 添加到每个actionPerformed() 中，但这需要很多重复，我不太喜欢。

哦，Java 和 Swing 大师来帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T11:27:44.637

您可以将自己的实现子类化`ActionListener`：

```
private static abstract class MyListener implements ActionListener {

    @Override
    final public void actionPerformed(ActionEvent evt) {
        theSameTask();
        uniqueTask(evt);
    } 
    private void theSameTask() {
        // the identical task
    }
    public abstract void uniqueTask(ActionEvent evt);
} 
```

然后，新的侦听器将如下所示：

```
JButton bar_button = new JButton("Bar None");
bar_button.addActionListener(new MyListener() {
    @Override public void uniqueTask(ActionEvent evt) {
        //Fancy schmancy code work
    } 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:08:07.680

另一种可能性是使用[“装饰器”模式](http://en.wikipedia.org/wiki/Decorator_pattern)`ActionListener`，并为常见行为编写装饰器。您的代码将采用以下形式

```
bar_button.addActionListener(new MyActionListenerDecorator( new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        //Fancy schmancy code work
    }  }) ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T12:17:39.050

我认为最好的方法是使用[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html). 这样所有的听众总是做同样的事情。

# exception-handling - 如何在 Kohana 3.0 中自定义错误页面

> ID：11521436
> 
> 赞同：1
> 
> 时间：2012-07-17T11:23:31.073
> 
> 标签：exception-handling, error-handling, custom-error-pages, kohana-3.0

我一直在尝试找到有关如何在**Kohana 3.0**中自定义错误页面的完整解释，但到目前为止我并不幸运。那么，根据[Kohana Guide](http://kohanaframework.org/3.0/guide/kohana/tutorials/error-pages)提供的解决方案，谁能告诉我该怎么做？

当我说完整的解释时，我的意思是类的位置、它们的名称、要扩展的类、完整的代码，以及其中一个错误的视图。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:33:16.330

我建议您阅读[http://kohanaframework.org/3.0/guide/kohana/conventions](http://kohanaframework.org/3.0/guide/kohana/conventions)。您可以根据类名和 Kohana 自动加载的方式计算出需要为自己创建的文件。Kohana 对我来说的美妙之处在于它不会尝试为您做所有事情，因此在我看来阅读文档非常重要。

*注意：我没有特别使用 Kohana 3.0，但这应该适用。*

例如，在第**1**部分中，这段代码是：

```
<?php defined('SYSPATH') or die('No direct access');

class HTTP_Response_Exception extends Kohana_Exception {} 
```

Kohana 使用“[级联文件系统”，因此您可以将](http://kohanaframework.org/3.0/guide/kohana/files)**2**中所示的代码添加到

> 应用程序/类/ **kohana/异常**.php

在该文件中，您将扩展 Kohana 异常处理程序

```
class Kohana_Exception extends Kohana_Kohana_Exception {

   public static function exception_handler(Exception $e)
   {
       ...
   }
} 
```

显示的**[路线](http://kohanaframework.org/3.0/guide/kohana/routing)**被添加到您的应用程序引导程序中

> 应用程序/bootstrap.php

在[路由](http://kohanaframework.org/3.0/guide/kohana/routing)错误时，您可以知道控制器将是什么：

```
Route::set('error', 'error/<action>(/<message>)', array('action' => '[0-9]++', 'message' => '.+'))
->defaults(array(
    'controller' => 'error_handler'
)); 
```

因此将在以下位置创建一个[控制器](http://kohanaframework.org/3.0/guide/kohana/mvc/controllers)：

> 应用程序/类/**控制器/error_handler** .php

这看起来像：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Error_Handler extends Controller_Template {

    ...

    public function action_404()
    {
        $this->template->title = '404 Not Found';
        // A view example
        $view = View::factory('error/404');
        $view->render();
        ...
    }
} 
```

然后，您的[意见](http://kohanaframework.org/3.0/guide/kohana/mvc/views)将（可能）置于：

> 应用程序/视图/**错误/404** .php

文档简短的原因是因为相同的答案并不适用于所有人。例如，大多数人（我知道）使用他们自己的模板等。

# php - 空值问题

> ID：11521440
> 
> 赞同：0
> 
> 时间：2012-07-17T11:23:57.123
> 
> 标签：php, arrays, codeigniter, foreach, null

我有一个 foreach 循环将数组中的值添加到 codeigniter where 函数中。当我将带有内容的值传递到此循环中时，它不会改变。但是，当一个空值进入时，它会与数组中它之前的项目的值一起出现。

这是代码：

```
if(is_null($data['psc_opt_5'])){ echo "null"; }else{ echo $data['psc_opt_5']; }
foreach($data as $field => $value)
{

    if(!is_null($value))
    {

        $this->db->where($field, $value);

    }
    else
    {

        $this->db->where($field." IS NULL");

    }

}

if(is_null($data['psc_opt_5'])){ echo "null"; }else{ echo $data['psc_opt_5']; } 
```

该数组包含 psc_opt_1 - psc_opt_5。

有任何想法吗？

**编辑**

第一个 if 语句证明 psc_opt_5 在循环之前为空，这是我正在测试的数组：

> 数组（[psc_opt_1] => 1 [psc_opt_2] => 2 [psc_opt_3] => 3 [psc_opt_4] => 4 [psc_opt_5] => ）
> 
> 数组（ [psc_opt_1] => 5 [psc_opt_2] => 2 [psc_opt_3] => 3 [psc_opt_4] => 4 [psc_opt_5] => ）
> 
> 数组（ [psc_opt_1] => 7 [psc_opt_2] => 2 [psc_opt_3] => 3 [psc_opt_4] => 4 [psc_opt_5] => ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:07:44.670

问题似乎是foreach不喜欢将null值传递给它，因此它保留了前一个循环的值。我发现如果我添加如下安培，它会通过以下方式传递空值：

```
foreach($data as $field => &$value)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:46:08.777

这似乎是一个 NULL vs. Empty 问题。NULL 是一个非值，而 ' ' 是一个包含 0 个字符的空字符串。

编辑代码：

```
<?php
$data = array (
    "psc_opt_1" => '1',
    "psc_opt_2" => '2',
    "psc_opt_3" => '3',
    "psc_opt_4" => '4',
    "psc_opt_5" => '',          
);

foreach($data as $field => $value)
{

 echo 'Now processing: '.$field.' | ';

    if(!is_null($value) && !empty($value))
    {
        echo $field.' has value of: '.$value;
    }
    else
    {
        echo $field.' is empty of NULL';
    }
    echo '</br>';

} 
```

# php - 搜索 - 处理空标准字段

> ID：11521447
> 
> 赞同：0
> 
> 时间：2012-07-17T11:24:14.340
> 
> 标签：php, mysql, search

我需要一些用于**快速**多条件搜索的结构建议。所有表格列都有输入字段可供搜索。

如何处理空字段（不由用户填写/仅按给定信息搜索）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:27:10.937

最好的方法是

```
WHERE
(col1=@col1 or @col1 is null) and
(col2=@col2 or @col2 is null) and
(col3=@col3 or @col3 is null) and
.
. 
```

假设如果跳过该列进行搜索，则传递 null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:32:36.337

您可以构建并附加 where 子句，如下所示

```
$query ="SELECT fields FROM tableName ";
$where ="";

 if(isset($_POST['field1']))
 {
   $field1=  mysql_real_escape_string($_POST['field1']);
   if($field1 != '')
   {
      $where . = "field1Name = $field1 AND ";
   }
 } 
   if(isset($_POST['field2']))
 {
   $field2=  mysql_real_escape_string($_POST['field2']);
   if($field2 != '')
   {
      $where . = "field2Name = $field2 AND ";
   }
 } 

 $where = rtrim($where, " AND ");
 $query . =$where; 
```

# php - 过滤全文搜索的结果以仅包含用户“喜欢”的文档

> ID：11521448
> 
> 赞同：1
> 
> 时间：2012-07-17T11:24:13.780
> 
> 标签：php, solr, full-text-search

我们使用 Solr 的全文搜索功能，假设我们正在索引各种新闻文章的文本。

搜索所有文章非常简单；但是，用户可以“喜欢”他们觉得有趣的文章。

我正在尝试实现一个功能，每个用户都可以搜索他们的“喜欢的历史记录”。

我已经提出了几种可能的方法来做到这一点，但我不知道如何实际实施它们中的任何一种，如果它们甚至可以实施并且完全不知道在性能和效率方面哪个是最好的。

1）我想出的第一种方法是使用一个单独的 MySQL 数据库，其中每一行保存用户的 id 和用户喜欢的文章。

可以对 MySQL 表进行查询以返回任何用户喜欢的文章 ID，但是如何缩小 Solr 的搜索结果以仅返回具有从 MySQL 数据库中检索到的 ID 的文章？

2）我能想到的唯一另一种方法是在每次用户喜欢一篇文章时在另一个 Solr 核心中创建一个重复的文档，并添加一个 user_id 字段；但是，如果 100,000 左右的用户每人喜欢 100-1,000 篇文章，这将消耗不必要的存储空间。

第二种方法的另一个问题是，如果原文章的文本发生变化，那么为每个喜欢该文章的用户更新每个相关文档就成了另一个必须处理的麻烦问题。

3) 与第 2 种方法相同的想法，除了不创建重复文档，而是将包含“喜欢”信息的文档链接到包含“喜欢”文章的文档索引。

第二种方法是我知道可以完成并且知道如何实现的 3 种方法中唯一的一种，但是每当需要更新文章时，它似乎在存储和性能方面都是浪费的，这种情况经常发生。

按照我的逻辑，第三种和第一种方法似乎是更好的方法，按照这个顺序，如果 y 可以实现，但我肯定是错的。如果它们可以实现并且/是/最好的方法，您能否解释如何实现它们，如果没有，您认为使用方法 2 中描述的第二个 Solr 内核是否值得所需的额外存储空间和文章文本更改时需要大规模重新索引？

有没有更好的选择来做这种性质的事情？我不限于使用 Solr，我只是认为使用关系数据库会更好，因为它是用于全文索引的。

感谢您在我的问题上提供的任何信息。

更新：在 aitchnyu 的问题的答案中找到的 Solr 的 ExternalFileField 似乎很有希望。如果他们有一个字段来索引外部文件，那么有一种方法可以将一个文档的索引链接到另一个文档是有意义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:21:28.813

我会选择第一个选项。运行 SQL 查询，然后运行 ​​Solr 查询 - 但将过滤器查询 (fq) 参数设置为从数据库检索到的 ID 列表。过滤器查询用于提取返回的搜索结果的子集 - 在您的情况下，您只需要出现在特定用户的喜欢历史记录中的那些文档。

# c - 无法反转链表

> ID：11521452
> 
> 赞同：1
> 
> 时间：2012-07-17T11:24:33.373
> 
> 标签：c

我试图反转一个链表，但是每当我执行以下函数时，我只得到最后一个元素。例如，如果列表之前包含 11、12、13。执行该函数后，它只包含13个。请指出我代码中的错误

* * *

```
void reverselist() {
    struct node *a, *b, *c;
    a = NULL;
    b = c = start;

    while (c != NULL) {
        c = b->next;
        b->next = a;
        a = b;
        b = c;
    }
    start = c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:30:37.910

1.  您的循环保护是否确保 start 为空？
2.  如果您不使用 start 来标识列表的第一个元素，那么您正在使用的变量仍然指向第一个元素，现在是最后一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:41:52.083

我会做一个前置函数，并完成以下操作：

```
struct node* prepend(struct node* root, int value)
{
    struct node* new_root = malloc(sizeof(struct node));
    new_root->next = root;
    return new_root;
}

struct node* reverselist(struct node* inlist)
{
    struct node* outlist = NULL;

    while(inlist != NULL) {
        struct node* new_root = prepend(outlist, inlist->value);
        outlist = new_root;
        inlist = inlist->next;
    }

    return outlist;
} 
```

没有测试过这个，但猜你掌握了它的想法。可能只是你的变量名，它没有描述任何内容，但我认为这种方法更清晰，更容易理解实际发生的情况。

编辑：

有一个问题为什么我不就地做，所以我会在这里回答：

1.  你能就地做吗？您确定不想保留原始列表吗？
2.  你需要就地做吗？malloc 是否耗时/这是代码的性能关键部分吗？请记住：过早优化是万恶之源。

事情是，这是第一个实现。它应该工作，而不是优化。它还应该在考虑这个实现之前编写一个测试，并且你应该保持这个缓慢的、未优化的实现直到测试通过，并且你已经证明它对你的使用来说很慢！

当您通过了单元测试并证明实现速度很慢时，您应该优化代码，并确保它仍然通过测试，而不更改测试。

另外，答案是否有必要就地操作？在恢复它之前分配内存怎么样，这样你只有一个分配调用，并且应该希望得到一个很好的性能提升。

这样每个人都很高兴，您的代码更简洁，并且避免了 Bob 叔叔拿着猎枪出现在您家门口的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:01:39.177

```
// 你应该假设 Node 有一个名为 next 的 Node*
// 指向列表中的下一项
// 如果成功则返回反向列表的头部，否则为 NULL / 0
节点 *reverse( 节点 *head )
{
    节点 *prev = NULL;

    而（头！= NULL）
    {
        // 保存下一个，因为我们将销毁它
        节点 *next = head->next;

        // 下一个和上一个现在颠倒了
        头->下一个=上一个；

        // 遍历列表
        上一页=头；
        头=下一个；
    }
    返回上一个；
}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:24:31.353

c 是一个辅助指针。

```
void reverselist()
{
    struct node *a, *b, *c;
    a=NULL;
    b=start;
    while(b!=NULL)
    {
        c=b->next
        b->next=a;
        a=b
        b=c
    }
    start=a;
} 
```

# php - preg_replace (#\s+#) 的简单模式的含义？

> ID：11521456
> 
> 赞同：7
> 
> 时间：2012-07-17T11:24:46.983
> 
> 标签：php

很抱歉这个非常基本的问题，但是在 Google 或[SymbolHound中](https://meta.stackexchange.com/questions/32879/is-it-possible-to-search-for-punctuation-special-characters)[都](http://www.symbolhound.com/)*没有简单的方法来搜索这样的字符串* 。[在 PHP 手册（模式语法](http://de3.php.net/manual/en/reference.pcre.pattern.syntax.php)和[preg_replace](http://php.net/manual/en/function.preg-replace.php)）中也没有找到答案。

此代码位于接收`$content`和`$length`参数的函数内。
那有什么`preg_replace`用？

```
$the_string = preg_replace('#\s+#', ' ', $content);
$words = explode(' ', $the_string);

if( count($words) <= $length ) 
```

另外，使用它会更好[`str_word_count`](http://php.net/manual/en/function.str-word-count.php)吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T11:29:01.753

此模式用单个常规空格 (' ') 替换连续的空格字符（注意，不仅是空格，还包括换行符或制表符）。`\s+`表示“匹配一个由一个或多个空格字符组成的序列”。

`#`符号是模式的分隔符。可能更常见的是看到由正斜杠分隔的模式。（实际上，您可以在没有分隔符的情况下在 PHP 中执行 REGEX，但这样做会影响模式的处理方式，这超出了此问题/答案的范围）。

[http://php.net/manual/en/regexp.reference.delimiters.php](http://php.net/manual/en/regexp.reference.delimiters.php)

依靠空格在字符串中查找单词通常不是最好的方法——我们可以使用`\b`单词边界标记来代替。

```
$sentence = "Hello, there. How are you today? Hope you're OK!";
preg_match_all('/\b[\w-]+\b/', $sentence, $words); 
```

这就是说：抓取较大字符串中仅由字母数字字符或连字符组成的所有子字符串，并且由单词边界包围。

`$words`现在是句子中使用的单词数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:27:40.787

`#`是[分隔符](http://de3.php.net/manual/en/regexp.reference.delimiters.php)

> 常用的分隔符是正斜杠 (/)、井号 (#) 和波浪号 (~)。以下是有效分隔模式的所有示例。

```
$the_string = preg_replace('#\s+#', ' ', $content); 
```

它将`\s`用单个空格替换多个空格（）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:26:41.623

`\s+`用于匹配多个空格。您正在用一个空格替换它们，使用`preg_replace('#\s+#', ' ', $content);`

`str_word_count`可能是合适的，但您可能需要指定额外的字符作为单词，或者函数在使用 UTF-8 字符时报告错误的值。

```
str_word_count($str, 1, characters_that_are_not_considered_word_boundaries); 
```

**示例**：

```
print_r(str_word_count('holóeóó what',1)); 
```

返回

```
Array ( [0] => hol [1] => e [2] => what ) 
```

# php - PHP 执行多次

> ID：11521458
> 
> 赞同：4
> 
> 时间：2012-07-17T11:24:50.377
> 
> 标签：php

我的机器上有一个标准的 LAMP 设置。今天早上，它开始多次执行脚本。

例如，在代码中：

```
log_message('error', "here be a message ".rand()); exit; 
```

尽管脚本中有退出，但我的日志文件正在记录**两条**具有不同随机数的日志消息。我以前没有过这个，有点难过。谁能给我任何关于为什么会发生这种情况的线索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T11:27:40.063

如果您正在重写 URL，一个常见问题可能是浏览器请求`/favicon.ico`，这会导致第二个请求。检查这一点的最简单方法是将 REQUEST_URI 临时添加到您的日志行：

```
log_message('error', "{$_SERVER['REQUEST_URI']} - here be a message ".rand());
exit; 
```

# mysql - VB.NET & MySQL：显示 MonthName 的 DataGrid 错误

> ID：11521462
> 
> 赞同：0
> 
> 时间：2012-07-17T11:25:01.673
> 
> 标签：mysql, vb.net, datagridview

无法从 MySQL 中的数据在 DataGridView 中显示 MonthName

**询问：**

```
SELECT ItemName, Description, PurchaseDate, MONTHNAME(PurchaseDate) AS PurchaseMonth FROM tblItems 
```

**错误：**

> System.ArguementException：参数无效

显示月份编号，使用`MONTH(PurchaseDate)`效果很好，但是当我尝试显示月份名称时，出现数据网格错误。当我在 MySQL 中运行 SQL 时，它会返回预期的结果。

`MONTHNAME(PurchaseDate)`当我添加 DataError 事件时，它只会在应该在的字段中显示一个红色的感叹号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:46:52.897

解决了。尽管 MonthName(PurchaseDate) 在直接针对数据库运行时有效，但从 VB.NET 传入时，我必须在 SQL 字符串中使用 Cast

修改后的 SQL：

```
SELECT ItemName, Description, PurchaseDate, CAST(MONTHNAME(PurchaseDate) AS CHAR) AS PurchaseMonth FROM tblItems 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:53:56.543

你为什么要这样做？

只需加载原始日期并使用格式字符串来获取名称

```
dim purchaseDate as DateTime = DateTime.Now

dim purchaseMonth as String = purchaseDate.Format("MMMM")
' or
dim purchaseMonth as String = String.Format("{0}", purchasDate") 
```

数据绑定也支持格式化。

这种方法的优点是它尊重用户环境中的本地人：

```
' english: July
' german:  Juli 
```

# asp.net - 无法从我在生产服务器中托管的 asp.net 应用程序访问 Active Directory

> ID：11521465
> 
> 赞同：0
> 
> 时间：2012-07-17T11:25:19.720
> 
> 标签：asp.net, ldap

我编写了一个 asp.net 应用程序并使用 Active Directory 验证了登录用户。它在我的本地机器 IDE 中完美运行。但是当托管在我的生产服务器中时，它无法与 AD 服务器通信。我在服务器的 IIS 中启用了 Windows 身份验证，并且在我的 web.config 中放置了身份模拟。错误是得到是

```
Error Trace :System.Runtime.InteropServices.COMException (0x8007054B): The specified 
domain either does not exist or could not be contacted. 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:11:52.043

该错误通常意味着它所说的 - 它找不到要针对指定域进行身份验证的 DC。您确定生产框可以通过 DNS 访问域吗？如果服务器是 Windows，您可以使用 nslookup。这将确认您实际上可以击中它。如果是安全/权利问题，您通常会看到不同的错误。

如果它是 Windows 框，请尝试使用 nslookup domain_name 并查看是否返回任何 IP 地址。如果他们不是，那是你的问题。如果是这种情况，您可能需要手动配置 IP 地址，或者如果您无法通过 IP 访问它，则可能需要解决潜在的路由问题。

# android-screen-support - 小屏幕上的错误

> ID：11521466
> 
> 赞同：1
> 
> 时间：2012-07-17T11:25:20.267
> 
> 标签：android-screen-support

我的清单中有以下代码。

```
<supports-screens android:resizeable="true"
              android:smallScreens="true" 
              android:normalScreens="true" 
              android:largeScreens="true"
              android:anyDensity="true"
              /> 
```

但它没有在星系 y 中显示完整的屏幕。

# php - facebook从私人页面打开图表帖子，但网址是公开的

> ID：11521474
> 
> 赞同：1
> 
> 时间：2012-07-17T11:25:31.237
> 
> 标签：php, facebook-graph-api, facebook-opengraph

我有一个网站需要使用开放图与 facebook 深度集成。但是，我无法发布至少 1 个操作。我的所有行为都得到了批准。所以，问题来了；

我有一个私人主页，用户可以看到他们的提要。主页因用户而异。但是，我有一个`website.com/g/user_name/id`公开的页面。我正在使用 php-sdk 发布操作。我有一个可以通过这段代码访问的静态单例 facebook 助手类；

`Fb::get_instance()->post_timeline( $params);`

公共页面 ( `website.com/g/user_name/id`) 具有正确的所有元标记。但是，我在主页中没有元标记，因为它都是私有的。因此，即使我在主页中有元标记，facebook 也无法解析它。

我想要的是以下内容；

当用户单击主页中的添加按钮（这是私有的）时，facebook-php-sdk 会发送一个帖子以发布操作。但是，我收到以下消息；

`(#3502) Object at URL http://website.com/g/user_name/id has og:type of 'website'. The property '[OBJECT_TYPE]' requires an object of og:type '[APP_NAMESPACE]:[OBJECT_TYPE]'. (http response code: 206)`

但我确定我有`og:type`领域`<head></head>`

在公共页面 ( `http://website.com/g/user_name/id`)

那么，我在这里做错了什么？

可以从私人页面发帖吗？？

如果没有，像foursquare这样的网站如何管理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:47:03.223

> URL 处的对象`http://website.com/g/user_name/id`具有**og:type of 'website'**。

这就是问题所在……</p>

> 属性 '[OBJECT_TYPE]'**需要 og:type '[APP_NAMESPACE]:[OBJECT_TYPE]' 的对象**。

……这就是它应该的样子。

# sencha-touch-2 - sencha touch 2.0 numberfield 格式仅在 ios

> ID：11521478
> 
> 赞同：0
> 
> 时间：2012-07-17T11:25:53.793
> 
> 标签：sencha-touch-2

当我在 numberfield 中输入大数字并将其模糊时，仅在 IOS 中添加 beetween number 中的昏迷，我想删除此功能。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:45:13.117

我刚刚处理了这个问题。不幸的是，numberfield 的 HTML5 规范建议默认使用逗号。我发现在 iOS 上没有办法解决这个问题。

我的解决方案是使用“文本字段”组件并使用正则表达式“onblur”去除所有非数字字符。

或者，如果您只需要基本号码，您可以始终使用“文本字段”并将其类型设置为“电话”，这将为您提供手机上的电话键盘。

希望这可以帮助。

代码示例：

去除所有非数字字符的 Texfield 组件。这将在视图内。即使在控制器内部，您也可以使用“控制”配置对象来监听模糊：

```
{
    xtype: 'textfield',
    ui: 'plain',
    listeners: {
        //  listen for blur event
        blur: function(field){
            var val = field.getValue(); // store a ref to our field's value
            val = val.replace(/[^\d]*/g, ""); // strip non-digit characters
            field.setValue(val); // update our field value
        }
    }
} 
```

这是将类型设置为 tel 的示例：

```
{
    xtype     : 'textfield',
    label     : 'Phone Number',
    component : {
        type : 'tel'
    }
} 
```

# windows-8 - WinRT（windows.networking.socket）中select（）函数（在winsock2.h下）的等价物是什么？

> ID：11521481
> 
> 赞同：0
> 
> 时间：2012-07-17T11:26:06.233
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winsock2

WinRT 或 Metro 风格不支持 winsock2.h。但是我的应用程序使用了 winsock2.h 的 select() 函数，我想将我的应用程序移植到 Metro 风格。Metro 风格将 windows.networking.sockets 用于与套接字相关的目的。我需要知道**windows.networking.sockets中****select()**的等价物

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:34:49.050

您需要[Windows.Networking.Sockets.StreamSocketListener](http://msdn.microsoft.com/en-us/library/windows/apps/br226906.aspx)类。[ConnectionReceived](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.streamsocketlistener.connectionreceived.aspx)事件在客户端连接时触发。**

# java - RPC 上的 GWT 序列化

> ID：11521493
> 
> 赞同：0
> 
> 时间：2012-07-17T11:26:43.110
> 
> 标签：java, gwt, serialization, rpc

即使浏览了大量博客，我也找不到解决这个问题的方法。

1.  是的，我的模型（POJO）实现了 Serializable（也尝试了 IsSerializable）
2.  我之前在 RPC 上取得了成功，但我不知道为什么现在会出现此错误：

    ```
    com.google.gwt.user.client.rpc.StatusCodeException: 500 The call failed on the server; see server log for details
        at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:209)
        at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
        at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
        at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
        at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
        at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
        at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
        at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
        at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
        at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
        at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
        at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
        at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
        at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
        at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
        at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
        at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
        at java.lang.Thread.run(Unknown Source) 
    ```

* * *

### 服务器堆栈跟踪：

```
Starting Jetty on port 8888
        [WARN] Exception while dispatching incoming RPC call
        com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract com.project.package.gwt.shared.User com.project.package.gwt.client.ProService.loginServer(java.lang.String,java.lang.String)' threw an unexpected exception: java.lang.NullPointerException
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
    Caused by: java.lang.NullPointerException
    at com.project.package.gwt.server.ProServiceImpl.loginServer(ProServiceImpl.java:85)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 22 more 
```

也可以通过电线序列化字符串吗？

并且显示空指针异常，因为 RPC 不成功。如果 RPC 成功，我希望返回一个对象

添加源代码

```
com.project.package.gwt.server.ProServiceImpl.loginServer.java

public User loginServer(String uname, String password) {

    System.out.println("Making User Login Call to the server");
    System.out.println("Username is : "+uname+" Password is : "+password);

    return loginObj.validateLogin(uname, password);
} 
```

validate login 方法，用于验证用户

```
public User validateLogin(String username, String password) {

    System.out.println("Inside Server/");
    //ApplicationContext ac = new ClassPathXmlApplicationContext("jdbc-context.xml");
    ApplicationContext ac = new ClassPathXmlApplicationContext("jdbc-context.xml");
    DataSource dataSource = (DataSource) ac.getBean("dataSource");

    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);

    System.out.println("Inside Server/Login Handler");

    String result = null;
    String query = "SELECT emp_name FROM emp_name = ? AND emp_password = ?";

    try {
        result = jdbcTemplate.queryForObject(query, String.class);
    } catch (EmptyResultDataAccessException e) {
        // TODO: handle exception#
        e.printStackTrace();
    }

    if (result == null) {
        System.out.println("The result of the SQL query is null");
    } else {
        System.out.println("The result of the SQL query is " + result);
        user.setUsername(result);
    }
    return user;
}

} 
```

控件未进入验证登录方法（内部服务器/未打印），这意味着我的 RPC 失败，因此是 NPE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:22:01.603

你的 99%`loginObj`是空的。请确保这是真的。

```
System.out.println(loginObj == null);
return loginObj.validateLogin(uname, password); 
```

并将您的第 85 行`ProServiceImpl.java`源代码提供给我们。我们还能等多久？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:46:56.933

那么你在 com.project.package.gwt.server.ProtasServiceImpl.loginServer(ProtasServiceImpl.java:85) 有一个 java.lang.NullPointerException

您需要确定是什么原因造成的。

# php - PHP、AJAX 和 HTML，从未调用过的函数

> ID：11521494
> 
> 赞同：0
> 
> 时间：2012-07-17T11:26:47.807
> 
> 标签：php, javascript

> **可能重复：**
> [如何从表单按钮调用 PHP 函数](https://stackoverflow.com/questions/11518422/how-to-call-a-php-function-from-a-form-button)

我有一个这样的按钮：

```
<form method="post" id="submit" action="script/gen.php">
    <input type="button" onClick="getKey()" value="Generate key"/> 
```

这会在同一个文件中调用一个 javascript，如下所示：

```
<script type="text/javascript">
        function getKey() {
            if (window.XMLHttpRequest) {
                xmlhttp=new XMLHttpRequest();

        }
        else {
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("innhold").innerHTML=xmlhttp.responseText;
        }
    }
        xmlhttp.open("GET","script/gen.php?returnKey",true);
        xmlhttp.send();
    }
</script> 
```

`alert()`我知道通过在脚本中添加几个位置来调用这个 javascript 。当我尝试`isset`在我的 php 代码中执行操作时会出现问题：

```
else if(isset($_GET['returnKey'])) {
returnKey();
} 
```

这个函数永远不会被调用，即使我`echo`在调用函数之前添加了一个`returnKey()`

谁能看出问题出在哪里？

**编辑**

这是控制台必须告诉我的，来自 chrome：

```
XMLHttpRequest cannot load file:///C:/wamp/www/Webpanel/script/gen.php?returnKey. Cross    origin requests are only supported for HTTP.
Uncaught Error: NETWORK_ERR: XMLHttpRequest Exception 101 index.html:37
getKey index.html:3 
```

**编辑 2**

天哪，我想通了。必须在我的浏览器中输入 localhost/Webpanel。这是漫长的一天，所以我不太清楚..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:48:37.437

解决问题：

我试图在`index.html`本地打开我的，这是正确的方法，ofc。在`localhost`浏览器中输入。你必须跑`WAMP`。

# google-chrome - Chrome：有什么方法可以同步扩展？

> ID：11521497
> 
> 赞同：1
> 
> 时间：2012-07-17T11:27:01.857
> 
> 标签：google-chrome, google-chrome-extension

我想知道是否有任何方法可以在 2 台计算机上安装相同的 chrome 扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:30:25.023

*   [Chrome Sync](https://support.google.com/chrome/bin/answer.py?hl=en&answer=185277)在您的计算机之间同步已安装的应用程序和扩展程序；
*   [chrome.storage API](http://code.google.com/chrome/extensions/storage.html)允许开发人员通过 Chrome Sync 在用户计算机之间同步应用程序/扩展程序的数据。

# php - 从 xml 字符串中删除属性

> ID：11521499
> 
> 赞同：0
> 
> 时间：2012-07-17T11:27:05.727
> 
> 标签：php, xml, string

```
<soap-env:envelope xmlns:soap-enc="" xmlns:soap-env="">
    <soap-env:header>
    </soap-env:header>
    <soap-env:body>
        <ns1:createuserresponse>
            <username>weqew_825</username>
            <password>uwnoqedcjs</password>
            <result>
                <succeeded>true</succeeded>
                <errorcode>0</errorcode>
                <errortext></errortext>
            </result>
        </ns1:createuserresponse>
    </soap-env:body>
</soap-env:envelope> 
```

我想 `xmlns:soap-enc="" xmlns:soap-env=""`从上面的字符串中删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:32:05.497

你可以使用 preg_replace

```
$string = preg_replace('/xmlns:.*\"/','',$string); 
```

但是最好避免这种情况，因为再次使用 SimpleXML 解析该 xml 会产生很多警告（可能会被 @ 抑制）。

更可靠的解决方案

*   [使用 simplexml 解析带有命名空间的 XML](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)
*   [PHP：如何处理 SOAP 响应以获取标记值？](https://stackoverflow.com/questions/2927849/php-how-to-process-soap-response-to-get-a-tag-value)

希望它有所帮助

# javascript - 客户端事件库 (asp.net)

> ID：11521505
> 
> 赞同：0
> 
> 时间：2012-07-17T11:27:24.790
> 
> 标签：javascript, asp.net, ajax, web-services

任何人都知道一些好的库来实现由服务器创建的客户端事件？例如，客户端通过 web 服务启动一个操作，然后服务器在状态发生变化时向客户端发送事件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:35:56.330

`Http`目前依赖于`Request/Response`因此一旦您从 Web 服务获得响应，您就无法获取有关要引发哪个事件的更多信息，
我认为您想要的是`Sockets`这样，一旦连接，您就可以从服务器多次传输数据到客户端，并且客户端可以做出决定因此
，我使用的 1 个套接字库`SignalR`虽然使用 LongPolling，但在可用时切换到套接字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:37:26.300

Knockout 是免费的开源客户端库。

可能值得一看

[http://knockoutjs.com/](http://knockoutjs.com/)

# c# - 获取 .MP4 文件及其属性中的音频和视频流计数

> ID：11521508
> 
> 赞同：0
> 
> 时间：2012-07-17T11:27:36.933
> 
> 标签：c#, audio, video, encoding

我必须从 MP4 文件中获取以下信息

```
Count of video streams
Count of audio streams
For each video stream:
* language
* bitrate mode (fixed or variable)
* maximum bitrate
* length (seconds)
* stream size (megabytes)
* frame size
* framerate
* codec info
* codec profile
for each audio stream:
* language
* bitrate mode (fixed or variable)
* maximum bitrate
* length (seconds)
* stream size (megabytes)
* channels count
* codec info 
```

这必须是完全托管且安全的代码，并且必须在 Windows Phone 7 上运行（在 Windows Phone 7 上测试）。

有没有人有任何建议我们如何做到这一点。

谢谢维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-05T18:57:43.803

所有这些信息（以及更多信息）都以 MP4 文件格式提供。如果您必须以编程方式执行此操作，您可能需要解析 MP4 文件，但这并不难。

可以在[此处](https://developer.apple.com/library/mac/documentation/quicktime/qtff/QTFFChap1/qtff1.html)找到文件格式的描述（好的，这就是 Quicktime，但它几乎完全符合您的需求。）

您需要找到一堆原子并从中读取值。原子（或有时称为盒子）与包含其他盒子的盒子是分层的。

要找到“流”的数量，您需要轨道的数量 - 每个轨道都有一个 TRAK 原子（原子都有四个字符名称）您可以通过查看顶层 MOOV 原子并计算其中有多少 TRAK 原子来找到它.

要找出您需要查看的每个轨道类型

MOOV->TRAK->MDIA->HDLR atom 并找到它的 Component Subtype 字段，它将是“声音”的音频和“视频”的视频

其他原子包含您正在寻找的其他字段 - 建议通读链接文档以找出答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:35:44.007

可以使用 FFMPEG 获得该特定信息。一个控制台应用程序。您可以将 FFMPEG 的输出定向到您的应用程序。但 FFMPEG 在 Windows 手机上可能不可用。我对 Windows 手机不熟悉。

# mysql - 带有计数器的新选择列会根据 SQL 中的条件而增加

> ID：11521511
> 
> 赞同：0
> 
> 时间：2012-07-17T11:27:39.863
> 
> 标签：mysql, sql, rank, row-number

我需要根据某些条件在 SQL 中创建一个带有计数器的新列

IE

```
ID ||| COLUMN1 ||| COLUMN2 ||| COLUMN3 ||| COLUMN 4 |||NEW_COLUMN
1        null        null        null         12    
2         13         null        null         18           1
3        null        null        null         82            
4        null        null        null         81           
5        null        null        31           89           2
6        null        22          32           91           3
7        null        92          null         95           4 
```

只有当 COLUMN1 或 COLUMN2 或 COLUMN 3 != null 时，计数器才会增加

这句话是这样的：

```
SELECT COLUMN1,COLUMN2,COLUMN3,COLUMN4, (SELECT .....) FROM ... WHERE ... 
```

我不知道这是否可能，或者这是否是在效率方面面对这个问题的正确方法。其他可能性是使用 java 或 Jasper Reports 来做这件事，但我认为 SQL 是最简单的方法

欢迎任何建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:33:27.590

```
select t.*, (@row := case 
                     when column1 is not null or column2 is not null or column3 is not null 
                     then @row
                     else null
            end) as NEW_COLUMN,
            (@row := case 
                     when column1 is not null or column2 is not null or column3 is not null 
                     then @row + 1 
                     else @row 
            end) as TEMP_COLUMN
from your_table t, (select @row := 0) r 
```

我用 a`temp_column`作为助手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:14:21.023

其他方式

```
select a.ID,a.COLUMN1,a.COLUMN2,a.COLUMN3,a.COLUMN4,COUNT(b.ID) from
(select * from <your_table> where coalesce(column1,column2,column3) is not null)a
join 
(select * from <your_table> where coalesce(column1,column2,column3) is not null)b
on a.ID>=b.ID
group by a.ID,a.COLUMN1,a.COLUMN2,a.COLUMN3,a.COLUMN4 
union all
select *,null from <your_table> where coalesce(column1,column2,column3) is null
order by id 
```

# python - 无法使用 Python 和 PyVisa 连接到特定的以太网端口

> ID：11521516
> 
> 赞同：6
> 
> 时间：2012-07-17T11:28:02.480
> 
> 标签：python, visa

我正在尝试使用 Python 中的 pyVisa 通过以太网连接连接到温度室。[该设备仅允许通过端口 2049 进行连接。我通过PuTTY](http://en.wikipedia.org/wiki/PuTTY)或[HyperTerminal](https://en.wikipedia.org/wiki/Hilgraeve)连接到它没有问题，但是当我在 Python 中尝试此命令时

```
import visa
chamber = visa.instrument("TCPIP::10.2.17.130::2049") 
```

我收到此错误：

> VI_ERROR_RSRC_NFOUND：位置信息不足或系统中不存在请求的设备或资源

我知道该设备在那里，因为我可以在 PuTTY 中通过它进行交谈，但我似乎无法让 Python 代码工作。有什么提示吗？pyvisa 默认使用[SSH](http://en.wikipedia.org/wiki/Secure_Shell)吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-11T11:52:37.467

访问**VISA 资源**的最简单方法（恕我直言）仍然是使用**VISA 设备检测**，该检测将通过：

*   `visa.ResourceManager().list_resources()`, 如果你正在使用`pyVisa`
*   或者`viFindRsrc()`，`viFindNext()`如果您使用该`visa32.dll`库。

现在默认情况下，使用任何一种方法都**不会检测到****LAN**连接。这让您有两个选择：

 ***   如果您已安装**NI-MAX**（*National Instruments*的*Measurement & Automation Explorer*可**免费**下载），请在*“设备和接口”*下，右键单击*“网络设备”*，选择*“创建新的 VISA TCP/IP 资源”。 .'*并按照说明进行操作。**NI-MAX**将自动检测您的仪器并提供其**VISA**资源名称。**请注意**，现在此资源将由和/************`list_resources()``viFindRsrc()``viFindNext()`************
**********   如果没有，您必须向**VISA**提供**正确**的资源名称。如果您使用**VISA 护照**（例如LeCroy 示波器的*VICP*），那么您应该适当地更改**VISA 标头**（将*TCPIP*替换为*VICP*）。然后，语法如下：**[visa-header]::[instrument-ip]::INSTR**或**[visa-header]::[instrument-ip]::[instrument-port]::INSTR***********

 ******实际上，它并不总是**INSTR**，具体取决于资源类（请参阅[http://zone.ni.com/reference/en-XX/help/371361J-01/lvinstio/visa_resource_name_generic/](http://zone.ni.com/reference/en-XX/help/371361J-01/lvinstio/visa_resource_name_generic/)）。

请务必将**字节**字符串发送到仪器（尤其是使用**Python 3+**时），否则您将收到以下错误：

> VI_ERROR_RSRC_NFOUND：位置信息不足或系统中不存在请求的设备或资源

也可以通过`0xBFFF0011`或 的返回值来识别`-1073807343`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T11:39:06.690

您确定温度室支持 LAN 仪器协议吗？

如果不确定，请尝试使用原始套接字，即

```
chamber = visa.instrument("TCPIP::10.2.17.130::2049::SOCKET") 
```

（pyvisa 默认不使用 SSH）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T19:39:02.333

尝试这个：

```
import socket
HOST = "10.2.17.130"    # The remote host
PORT = 2049             # The same port as used by the server

    s = socket.socket (socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT)) 
```********

# php - 通过 .com 查找从字符串中删除 Url

> ID：11521517
> 
> 赞同：0
> 
> 时间：2012-07-17T11:28:05.757
> 
> 标签：php, url

> **可能重复：**
> [从混合字符串中删除所有 URL ( php )](https://stackoverflow.com/questions/2051977/strip-all-urls-from-a-mixed-string-php)

我需要一种从 var 中删除 url 字符串的方法，但不需要找到`.`然后删除它。不，我需要它通过查找`http`和查找`.com`或然后删除整个链接`.net``.info`

这是我的previoys代码

```
 function cleaner($url) {
  $U = explode(' ',$url);

  $W =array();
  foreach ($U as $k => $u) {
    if (stristr($u,'http') || (count(explode('.',$u)) > 1)) {
      unset($U[$k]);
      return cleaner( implode(' ',$U));
    }
  }
  return implode(' ',$U);
}

$url = "$first"; 
```

但是那个删除 . 不是 .com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:56:02.793

您可以使用 preg_match 方法来捕获 http 和 .com 之间的内容

```
preg_match('%^((https?://)|(www\.))([a-z0-9-].?)+(:[0-9]+)?(/.*)?$%i', $url); 
```

我认为完成此任务但并非没有错误的最简单方法是：

```
$url="http://codepad.org/";
$arry=explode(".",$url);
$arry1= explode("//",$arry[0]);
echo $arry1[1]; 
```

# f# - 在 F# 中，运算符类型周围的括号是什么意思？

> ID：11521520
> 
> 赞同：1
> 
> 时间：2012-07-17T11:28:19.647
> 
> 标签：f#

> **可能重复：**
> [类型差异很小](https://stackoverflow.com/questions/5093173/small-difference-in-types)

在`fsi`：

```
> (>);;
val it : ('a -> 'a -> bool) when 'a : comparison = <fun:it@12-2>

> (fun x y -> x > y);;
val it : 'a -> 'a -> bool when 'a : comparison = <fun:clo@15-4> 
```

为什么第一个例子有`()`围绕类型定义，而第二个没有？

# c# - OpenSSL.net：空密码

> ID：11521527
> 
> 赞同：2
> 
> 时间：2012-07-17T11:28:39.940
> 
> 标签：c#

全部，

我正在研究 OpenSSL.NET 并且遇到了一些问题。正如我所说，我只是在研究它，但是工作中的项目需要使用它，所以我不能真正使用其他任何东西。我遇到的问题是我正在使用 Cipher 属性来选择一种加密类型，但每个都抛出以下错误：

```
The type initializer for 'OpenSSL.Crypto.Cipher' threw an exception. 
```

此外，当我查看调试器时，每个密码都有“null”作为它的值。我已经引用了 ManagedOpenSsl.dll，并且 libeay32.dll 和 ssleay32.dll 都在工作目录中，所以我有点卡住了。

对此的任何帮助将不胜感激。另外，有没有人在 OpenSSL 库上找到任何好东西可以阅读？我花了两个小时寻找，但没有任何有用的东西出现。

干杯

# sqlite - 在发布配置上找不到 SQLite 客户端

> ID：11521535
> 
> 赞同：0
> 
> 时间：2012-07-17T11:29:13.447
> 
> 标签：sqlite, windows-phone-7

我正准备通过应用程序向市场提交，我想运行“市场测试套件”。我已经阅读了一些文章，并且在那里我将活动配置更改为 Release|Any CPU。

当我想重建时，我遇到了一些与我在我的应用程序中使用的 SQLClient 连接的引用的问题。通常一切都运行良好。就在我从调试切换到发布时，它们出现：

```
The type or namespace name 'SQLiteClient' could not be found (are you missing a using directive or an assembly reference?) 
```

当他表明我已经这样定义它们时，我会放置：

```
using SQLiteClient; 
```

参考添加为 Community.Csharp.Sqlite.WP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:48:07.793

哦，可怜的我；）

我刚刚删除/再次添加了 dll 并且有效！

[在发布模式下显示错误](https://stackoverflow.com/questions/11414994/showing-error-in-release-mode)

上面有类似问题的主题

# excel - 在 VBA 中切换锁定和解锁的工具箱元素

> ID：11521540
> 
> 赞同：1
> 
> 时间：2012-07-17T11:29:32.637
> 
> 标签：excel, locked, vba

我目前正在尝试切换“锁定”元素，以便在执行检查后不再锁定。在按钮的属性中，我将默认值设置为“锁定”，以便用户无法使用它的功能。

当单击另一个按钮时，我的宏运行一个进程，如果该进程返回 true，那么另一个“锁定”按钮应该是“解锁”并且包含名称的文本框应该是“锁定”以防止更改。该处理在一个名为“PNC_Module2”的模块中完成，我希望在其上锁定和解锁元素的表单称为“folder_creator_window”。

我目前正在使用以下几行来尝试实现“锁定和解锁”，但它似乎没有做任何事情：

```
 'This is supposed to unlock the create_folders_button
    folder_creator_window.create_folders_button.Locked = False  

    'This is supposed to lock the p_name_textbox textbox
    folder_creator_window.p_name_textbox.Locked = True 
```

我没有包含其余的代码，因为它没有真正说明这里发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:53:16.833

查看其余代码可能会发现问题，因为您的语法看起来不错

但是根据您的要求，正常的切换方法是使用`NOT`. 即`Locked`在 UserForm1 上打开 CommandButton1，您将使用：

```
UserForm1.CommandButton1.Locked = Not UserForm1.CommandButton1.Locked 
```

# c# - C# 列表查询和分组

> ID：11521543
> 
> 赞同：0
> 
> 时间：2012-07-17T11:29:42.730
> 
> 标签：c#, asp.net

我有这个清单：

```
OrderId    ProductId    DateTime

1               1                10.01.2012
1               2                09.01.2012
2               1                11.01.2012
3               1                12.01.2012
3               2                13.01.2012 
```

我想从中提取另一个 List 是唯一的`ProductId==1`，而 DateTime 是`10.01.2012`.

即仅`productId==1`适用于每个 OrderId。

另外，我只想要该项目的最少 dateTime 版本。

所以对于上面的列表，10.01.2012 是 productId==1 的最短 dateTime。

结果表；

```
OrderId    ProductId    DateTime

1               1                10.01.2012 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:43:46.407

这是一个可能的解决方案：

```
myList = myList.Where(x.ProductId == 1).OrderBy(x => x.DateTime); 
```

这将按 productId 等于 1 的 DateTime 值对您的新列表进行排序。如果您只想获取第一个，可以使用列表的 .First() 方法，例如：

```
myCustomType = myList.Where(x => x.ProductId == 1).OrderBy(x => x.DateTime).First(); 
```

# .htaccess - 301 重定向规则在不同的托管环境下给出不同的结果

> ID：11521547
> 
> 赞同：3
> 
> 时间：2012-07-17T11:29:57.537
> 
> 标签：.htaccess, mod-rewrite, redirect, query-string

我一直在为测试环境中的客户进行一些 URL 重写，这在我的环境中运行良好，但是当我转移到他们的环境时，我得到了不同的结果并且规则失败了。

我正在 301 以以下格式重定向旧版动态 URL：

```
http://www.companyname.com/page.php?pagename=AboutCompany&lang=EN
to
http://www.companyname.com/EN/about-company/ 
```

使用下面的规则集在我的“Heart Internet”共享主机上运行良好，但在他们的“Go Daddy”共享主机上失败（下面的配置）。在 Go Daddy 环境中，旧版 URL 被重定向到：

```
http://www.companyname.com/GET/about-company/
instead of
http://www.companyname.com/EN/about-company/ 
```

'GET' 来自哪里？这是一个准系统页面，没有其他代码影响这些规则。

```
RewriteCond %{QUERY_STRING} pagename=AboutCompany
RewriteCond %{QUERY_STRING} lang=([^&]+)
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /page.php
RewriteRule ^page.php$ /%1/about-company/? [R=301,L]

RewriteRule ^([A-Za-z]+)/about-company$ page.php?pagename=AboutCompany&lang=$1 [NC,L]
RewriteRule ^([A-Za-z]+)/about-company/$ page.php?pagename=AboutCompany&lang=$1 [NC,L] 
```

'lang' 查询字符串因用户语言偏好（EN 或 FR 或 DE 等）而异

**测试环境：**
Windows
IIS7.5
PHP 5.3.6

**客户环境：**
Linux
Apache
PHP 5.2

谢谢，M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:56:02.857

> 'GET' 来自哪里？这是一个准系统页面，没有其他代码影响这些规则。

在您的规则片段中，您**`%1`**的`RewriteRule`. 这引用了上一个中的最后一个`()`匹配`RewriteCond`，恰好是`(GET|HEAD)`：

```
RewriteCond %{QUERY_STRING} lang=([^&]+)
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /page.php
RewriteRule ^page.php$ /%1/about-company/? [R=301,L] 
```

您想切换这两个条件：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /page.php
RewriteCond %{QUERY_STRING} lang=([^&]+)
RewriteRule ^page.php$ /%1/about-company/? [R=301,L] 
```

这样**`%1`**参考`([^&]+)`

# c++ - 在 solaris 上链接 zeromq 静态库

> ID：11521551
> 
> 赞同：4
> 
> 时间：2012-07-17T11:30:06.793
> 
> 标签：c++, linker, g++, solaris, zeromq

我想在我的构建中链接 zeromq 库，这样它们就不必单独安装在最终用户的机器上。

我使用以下方法配置了 zeromq：

```
./configure --enable-static --disable-shared --prefix=/home/xx/out 
```

但是当我这样做时：

```
g++ -o zclient zmqclient.o /home/xx/out/lib/libzmq.a 
```

我收到链接错误：

```
Undefined                       first referenced
 symbol                             in file

recv                                /opt/zmq/out/lib/libzmq.a(libzmq_la-signaler.o)
send                                /opt/zmq/out/lib/libzmq.a(libzmq_la-signaler.o)
__xnet_connect                      /opt/zmq/out/lib/libzmq.a(libzmq_la-tcp_connecter.o)
__xnet_socket                       /opt/zmq/out/lib/libzmq.a(libzmq_la-ip.o)
__xnet_getsockopt                   /opt/zmq/out/lib/libzmq.a(libzmq_la-tcp_connecter.o)
accept                              /opt/zmq/out/lib/libzmq.a(libzmq_la-tcp_listener.o)
listen                              /opt/zmq/out/lib/libzmq.a(libzmq_la-tcp_listener.o)
uuid_generate                       /opt/zmq/out/lib/libzmq.a(libzmq_la-uuid.o)
setsockopt                          /opt/zmq/out/lib/libzmq.a(libzmq_la-tcp_listener.o)
getaddrinfo                         /opt/zmq/out/lib/libzmq.a(libzmq_la-ip.o)
freeaddrinfo                        /opt/zmq/out/lib/libzmq.a(libzmq_la-ip.o)
__xnet_socketpair                   /opt/zmq/out/lib/libzmq.a(libzmq_la-signaler.o)
__xnet_bind                         /opt/zmq/out/lib/libzmq.a(libzmq_la-tcp_listener.o)
uuid_unparse                        /opt/zmq/out/lib/libzmq.a(libzmq_la-uuid.o)
ld: fatal: symbol referencing errors. No output written to zclient
collect2: ld returned 1 exit status 
```

谁能告诉我哪里出错了，或者为我提供替代方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:36:13.353

原来图书馆：

```
-lsocket -lnsl -luuid 
```

在 linux 上是标准的，但在 solaris 上不是，需要像这样包含在 Makefile 中：

```
g++ -lsocket -lnsl -luuid  zmqclient.cpp /home/xx/out/lib/libzmq.a   -o zmqclient 
```

# javascript - Backbone.js fetch() 返回对象而不是子对象

> ID：11521553
> 
> 赞同：1
> 
> 时间：2012-07-17T11:30:14.570
> 
> 标签：javascript, google-chrome, object, backbone.js

我完成了 peepcodebackbone.js 基础教程，据我所知，我的代码与截屏视频相同，但我的控制台行为非常不同。

我的 Chrome 控制台（在 screecast 中使用）产生了这个结果。

```
albums = new Albums()
child
albums.fetch()
Object
albums.models()
TypeError: Property 'models' of object [object Object] is not a function 
```

截屏控制台看起来像这样

```
albums = new Albums()
inherits.child
albums.fetch()
inherits.child
albums.models()
[ inherits.child, inherits.child ] 
```

我完全不知道这是在哪里分崩离析。是我的代码（见下文）、我的浏览器还是其他什么？

```
(function($) {

window.Album = Backbone.Model.extend({

    isFirstTrack: function(index) {
        return index == 0;
    },

    isLastTrack: function(index) {
        return index >= this.get('tracks').length - 1;
    },

    trackUrlAtIndex: function(index) {
        if (this.get('tracks').length >= index) {
            return this.get('tracks')[index].url;
        }
        return null;
    }

});

window.Albums = Backbone.Collection.extend({
    model: Album,
    url: "/albums"
});

window.AlbumView = Backbone.View.extend({
    tagName: 'li',
    className: 'album',

    initialize: function() {
        _.bindAll(this, 'render');
        this.model.bind('change', this.render);

        this.template = _.template($('#album-template').html());
    },

    render: function() {
        var renderedContent = this.template(this.model.toJSON());
        $(this.el).html(renderedContent);
        return this;
    }

});

})(jQuery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:01:05.480

您的代码很好，示例/截屏有错误或正在使用较旧的backbonejs 实现并且正在使用较旧的chrome，因此child vs inherits.child 输出。

*   fetch 应该返回对象 - 它是一个 jquery 延迟对象，您可以使用它来解决成功和错误回调（在 jquery API 文档中查看更多关于 jquery deferred - 很棒的东西！）
*   没有`Backbone.Collection`模型方法 - 它是模型实例上的一个属性，应该由`albums.models`而不是访问`albums.models()`

# wpf - 使控件的属性可用于外部绑定

> ID：11521557
> 
> 赞同：1
> 
> 时间：2012-07-17T11:30:26.350
> 
> 标签：wpf, data-binding, controls

我有一个这样实现的控件：

```
<Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        <TextBox Grid.Column="0"/>
        <Button Grid.Column="1" Content="Browse..." Margin="5,0,5,0"/>
        <Button Grid.Column="2" Content="Load File" Margin="5,0,5,0"/>
    </Grid> 
```

这被设计为用作独立控件。例如，我如何允许此控件的使用者绑定到`Text`文本框的属性。我是否需要实现自己的依赖属性并自己处理实际的文本框数据，或者有没有办法让消费者直接绑定到内部属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:19:16.230

如果这是一个供其他人在 XAML 中使用的控件，那么是的，您应该将您的属性公开为 DependencyProperties。这允许使用您的控件的任何人在您的控件上使用绑定等。

```
public partial class MyControl: UserControl
{
    public static readonly DependencyProperty FileNameProperty = 
           DependencyProperty.Register("FileName ", typeof(string), typeof(MyControl));

    public string FileName
    {
        get 
        {
            return (string )GetValue(FileNameProperty ); 
        }
        set 
        {
            SetValue(FileNameProperty , value); 
        }
    }
} 
```

然后，您可以将控件标记中的自己的文本框绑定到相同的属性：

```
<UserControl x:Class="MyControl">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        <TextBox Grid.Column="0" Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type MyControl}}, Path=FileName}" />
        <Button Grid.Column="1" Content="Browse..." Margin="5,0,5,0"/>
        <Button Grid.Column="2" Content="Load File" Margin="5,0,5,0"/>
    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:06:38.570

嗨，让您控制的公共财产为

```
public string PropertyName
       {
           get{return _propertyName;}
           set{
               _propertyName=value;
                BindingOperations.SetBinding(textboxName,TextBox.TextProperty,new Binding(){Mode=BindingMode.TwoWay,Source=PropertyName})
              }
       } 
```

并让消费者简单地指定 PropertyName="PropertyToBind" 。我希望这会有所帮助。textboxName 是您的控件 TextBox 的名称。

# file - 将文件放在服务器根目录之外

> ID：11521559
> 
> 赞同：0
> 
> 时间：2012-07-17T11:30:42.360
> 
> 标签：file, server-side

当人们说将敏感文件（例如数据库配置文件）放在服务器根目录之外时，是在 public_html 之外吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:32:45.543

是的。

如果文件在`public_html`其中且未得到正确保护，则可以通过键入指向它们的 url 轻松访问它们。

如果它们在 之外`public_html`，则无法从 Internet 访问它们。

# groovy - Gradle命令行执行不工作

> ID：11521564
> 
> 赞同：3
> 
> 时间：2012-07-17T11:30:51.730
> 
> 标签：groovy, gradle

当我尝试创建任务类型 Exec 时，我正在创建自己的插件。它没有运行任何命令。我收到命令行错误，说明命令不正确。我已经在 Exec 命令中显示了生成的命令到命令提示符，并且当我运行它时它可以工作。代码在 gradle 插件范围内没有工作。

```
task myrun (type: Exec) {
    def cp = project.files(
    project.sourceSets.main.output.classesDir,
    project.sourceSets.main.resources,
    project.configurations.runtime
    ).getAsPath()

String myCommand = "visage -cp ${cp} visage.javafx.scene.effect.EffectTest"

println "RUN COMMAND : ${myCommand}"
workingDir project.sourceSets.main.output.classesDir
// classpath project.files([project.sourceSets.main.output.classesDir,project.sourceSets.main.resources, project.configurations.runtime,])
commandLine = [myCommand]
} 
```

谁能告诉我代码中是否有任何错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T11:42:59.147

[以下是您在 Gradle 论坛中](http://forums.gradle.org/gradle/topics/command_line_exec_not_working)的同一帖子的答案：

`commandLine`是一个列表，每个参数都成为该列表的一个单独元素：

```
commandLine "visage", "-cp", cp, "visage.javafx.scene.effect.EffectTest" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T16:16:52.963

另一种方法是使用这样的东西

```
exec clause
{
executable = "bash"
args = [ "-c", """ "command arg1 arg2... argn" """]
...
} 
```

# css - 带有 css 的鼠标悬停工具提示未正确对齐

> ID：11521567
> 
> 赞同：0
> 
> 时间：2012-07-17T11:31:00.833
> 
> 标签：css

我正在尝试使用 css 创建一个工具提示来跨越元素，但是当我将鼠标悬停时，它会为原始文本添加额外的填充。有没有办法解决这个问题？

这是代码 [http://codepen.io/anon/pen/BmJqj](http://codepen.io/anon/pen/BmJqj)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:38:25.000

你需要使用

*   `position: absolute;`开`span:before`和`span:after`

和

*   `position: relative;`上`span`。

像这样：

```
span {
    color: #333;
  text-decoration: none;
  position: relative;
}

span:hover:after{
    content: attr(data);
  dislpay: block;
  padding: .4em;
  color: #fff;
  background-color: #333;
  border-radius: .4em;
  position: absolute;
  top: 1.75em;
  left: 0;
  white-space: nowrap;
}

span:hover:before {
    display:block;
  content:"";
  position: absolute;
  border-right: .5em solid transparent;
  border-bottom: .5em solid #333;
  border-left: .5em solid transparent;
  top: 1.25em;
  left: .5em;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:40:48.700

给它绝对位置。你现在拥有它的方式，内容作为普通内容插入：之后。因此，它处于正常流程中并转移其余部分。当你把 position:absolute 放在它上面时，你把它从流程中取出来，可以按照喜欢的方式定位它。

# android - 使用 android 4.0.4 在 Galaxy Nexus 上使用 Google 地图没有 GPS 定位

> ID：11521568
> 
> 赞同：0
> 
> 时间：2012-07-17T11:31:04.523
> 
> 标签：android, google-maps, geolocation, gps

我尝试在线使用 Google 地图，但无法找到我的位置。谷歌地图应用程序完美运行。我尝试了 Firefox 14 和 Chrome 18。

我问是因为我想使用 html5 和谷歌地图进行开发，并且在寻找位置时遇到问题。

有人知道这是怎么回事吗，我从来没有调查过。

到目前为止感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:52:33.727

不知道为什么。但是，您可以创建一个 LocationListener 类来跟踪用户的位置。然后，您可以使用 javascript 创建用于 Web 调用的接口。这样您就可以使用手机硬件从网站访问用户的位置。Commonsware 的一本书中描述了这个实现。

# java - MigLayout 行高和更改字体大小

> ID：11521570
> 
> 赞同：2
> 
> 时间：2012-07-17T11:31:10.310
> 
> 标签：java, swing, user-interface, miglayout

我在将 MigLayout 与动态更改 MigLayout 单元格中显示的组件的字体大小结合使用时遇到问题。

详细说明：我通过 MigLayout 向 JPanel 添加了一个 JCheckBox。JCheckBox 的字体大小为默认值（12pt？），包含 JCheckBox 的行的首选高度为 17lp。这一切都很好。（在这里查看：http: [//www.bilderload.com/bild/227327/migproblemcellheight1UQXP2.png](http://www.bilderload.com/bild/227327/migproblemcellheight1UQXP2.png)）

现在我将字体大小更改为例如 20pt 并再次启动程序。现在 JCheckBox 的文本被剪切，因为该行的高度也为 17lp。（在这里查看：http: [//www.bilderload.com/bild/227328/migproblemcellheight2DDPGJ.png](http://www.bilderload.com/bild/227328/migproblemcellheight2DDPGJ.png)）

例如，如果我让行定义为空（“[]”），则文本以两种字体大小正确显示 - 正常和大字体。但在这种情况下，遗憾的是，该行永远不会达到最低 17lp。（它总是至少有 23lp 左右）

如何更改 MigLayout 定义以获得 17lp 的最小行高并让单元格与组件字体大小/文本等一起正确增长？或者也许这是一个 L&F 问题？

谢谢和最好的问候，

菲利普

这是我的示例代码（工作示例）：

```
import java.awt.Font;

import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;

import net.miginfocom.swing.MigLayout;

public class TestMigLayoutFontSize extends JFrame {
  public TestMigLayoutFontSize() {
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(600, 400);
    setContentPane(getTestPanel());
    setVisible(true);
  }

  private JPanel getTestPanel() {
    JCheckBox testBox = new JCheckBox("Program argument");
    Font normalFont = testBox.getFont();
    Font largeFont = new Font(testBox.getFont().getName(), testBox.getFont().getStyle(), 20);
    // testBox.setFont(normalFont);
    testBox.setFont(largeFont);

    JPanel tempPanel = new JPanel(new MigLayout("debug", "0lp![grow,fill]0lp!", "[17lp:17lp:n]"));
    tempPanel.add(testBox);

    JPanel testPanel = new JPanel(new MigLayout("", "[grow,fill]", "[grow,fill]"));
    testPanel.add(tempPanel);

    return testPanel;
  }

  public static void main(String[] args) {
    new TestMigLayoutFontSize();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:46:35.953

您可以通过减小边框大小来减少复选框周围的空间，例如 put

```
testBox.setBorder(BorderFactory.createEmptyBorder(1, 1, 1, 1)); 
```

分配后直接`testBox`。然后，您可以将行定义留空，并且仍然可以获得面板的合理高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:33:34.247

以下对我有用。我认为问题在于，您指定了首选尺寸。

问候罗杰

```
package de.test;

import java.awt.Font;

import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;

import net.miginfocom.swing.MigLayout;

public class MigTest extends JFrame {
  public MigTest() {
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(600, 400);
    setContentPane(getTestPanel());
    setVisible(true);
  }

  private JPanel getTestPanel() {
    JCheckBox testBox = new JCheckBox("Program argument");
    Font normalFont = testBox.getFont();
    Font largeFont = new Font(testBox.getFont().getName(), testBox.getFont().getStyle(), 90);
    // testBox.setFont(normalFont);
    testBox.setFont(largeFont);

    JPanel tempPanel = new JPanel(new MigLayout("debug", "0lp![grow,fill]0lp!", "[80:n:]"));
    tempPanel.add(testBox);

    JPanel testPanel = new JPanel(new MigLayout("", "[grow,fill]", "[grow,fill]"));
    testPanel.add(tempPanel);

    return testPanel;
  }

  public static void main(String[] args) {
    new MigTest();
  }
} 
```

# iphone - 如何从 iOS 应用程序发送添加好友请求（给 facebook 用户）？

> ID：11521580
> 
> 赞同：5
> 
> 时间：2012-07-17T11:31:39.563
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我知道关于这个主题有很多问题，但没有一个问题能得到令人满意的答案。同样，我对帮助不是那么有信心，因为我最后 3 个问题中有 2 个没有得到解答。好吧，问题是，**我们有什么方法可以从一个 iOS 应用程序向任何 facebook 用户发送好友请求？**当然，我们有该用户的用户 ID。

因为我搜索了很多并浏览了许多链接，包括

1.  [如何通过 iPhone 应用向 Facebook 中的人发送好友请求？](https://stackoverflow.com/questions/7835311/how-send-friend-request-to-a-person-in-facebook-through-iphone-app)
2.  [可以从我自己的应用程序发送 Facebook 好友请求吗？](https://stackoverflow.com/questions/8360882/can-a-facebook-friend-request-be-sent-from-my-own-app)
3.  [https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)
    等。

最后我找到了它：

[http://www.facebook.com/dialog/friends?id=100002487216939&app_id=123050457758183&redirect_uri=http://www.example.com/response/](http://www.facebook.com/dialog/friends?id=100002487216939&app_id=123050457758183&redirect_uri=http://www.example.com/response/)

此对话框执行我想要的相同操作。那么在图中是否有任何等价物。或者 iOS sdk 中的东西，`FBDialogueDelegate`. 任何可以帮助我的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:55:57.373

对于[用户对用户的](https://developers.facebook.com/docs/reference/dialogs/requests/)请求，您可以这样做（使用 ARC）：

```
 NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys: message, @"message", title, @"title", nil];
[[self facebook] dialog: @"apprequests"
                          andParams: [params mutableCopy]
                        andDelegate: delegate]; 
```

对于[应用程序到用户的](https://developers.facebook.com/docs/reference/api/user/)请求，您可以这样做：

```
NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys: message, @"message", nil];
[[self facebook] requestWithGraphPath: @"[FRIEND ID]/apprequests"
                            andParams: [params mutableCopy]
                        andHttpMethod: @"POST"
                          andDelegate: delegate]; 
```

确保您拥有正确的访问令牌和正确的 Facebook 配置（画布页面设置等）。

# lucene.net - 在 Lucene.NET 中更新索引

> ID：11521582
> 
> 赞同：0
> 
> 时间：2012-07-17T11:31:50.997
> 
> 标签：lucene.net

我正在使用 Lucene.NET 对搜索进行 POC。

我启动了一个存储过程，它从数据库中获取大约 50000 条记录。这些记录我放在 Lucene 索引中。

现在当数据库中的记录发生变化时，如何更新 Lucene 索引。删除整个以前的索引并创建一个新索引将花费大量时间。

我想将数据库中的新记录附加到现有索引中。

我怎样才能做到这一点。有任何想法吗 ？？？

谢谢，阿尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:36:33.460

只需使用 lucene AddDocument 方法，如下所示：

```
IndexWriter iw = new IndexWriter(folder, GetAnalyzer(), false);
  try
  {
    Document luceneDoc = new Document();
    /// add fields to the lucene document
    iw.AddDocument(luceneDoc);
  }
  finally
  {
    iw.Close();
  } 
```

# perl - 为什么包 A 中的函数在递归调用时不会被导入包 B？

> ID：11521584
> 
> 赞同：4
> 
> 时间：2012-07-17T11:31:52.937
> 
> 标签：perl, recursion, package

我正在尝试使用两个包并从一个到另一个调用函数，但是我遇到了这个错误：

未定义的子例程 &module2::method_1_2 在 module2.pm 第 20 行调用。

有没有办法从一个包调用函数到另一个包而不会出现此错误？

提前致谢。

夏比

执行错误：

```
./test.pl
method_1_1
method_2_1
method_2_2
Undefined subroutine &module2::method_1_2 called at module2.pm line 20. 
```

示例代码（test.pl）：

```
#!/usr/bin/perl

use strict;
use module1;
use module2;

method_1_1();
method_2_2(); 
```

模块1.pm

```
package module1;

use strict;

use module2;

require Exporter;
use vars qw(@ISA @EXPORT);
@ISA     = qw(Exporter);
@EXPORT  = qw( method_1_1 method_1_2 );

sub method_1_1
{
   print "method_1_1\n";
   method_2_1();
}

sub method_1_2
{
   print "method_1_2\n";
}

1; 
```

模块2.pm：

```
package module2;

use strict;

use module1;

require Exporter;
use vars qw(@ISA @EXPORT);
@ISA     = qw(Exporter);
@EXPORT  = qw( method_2_1 method_2_2 );

sub method_2_1
{
   print "method_2_1\n";
}

sub method_2_2
{
   print "method_2_2\n";
   method_1_2();
}

1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:33:28.123

问题是您`@EXPORT`在它已经使用后分配给它。以下内容抄自[迷你教程：导出模块的相互使用](http://www.perlmonks.org/?node_id=778639)

* * *

[ 使用这种技术的需要是系统中设计缺陷的一个非常强烈的指标，但我认识到资源并不总是可用于修复设计缺陷。]

如果ModA使用ModB，ModB使用ModA，ModA或ModB从对方导入符号，需要注意代码执行顺序。我发现避免问题的最佳方法是在加载任何其他模块之前设置 Exporter。

```
# ModA.pm

package ModA;

use strict;
use warnings;

use Exporter qw( import );
BEGIN { our @EXPORT_OK = qw( ... ); }

use This;
use ModB;
use That;

...

1; 
```

```
# ModB.pm

package ModB;

use strict;
use warnings;

use Exporter qw( import );
BEGIN { our @EXPORT_OK = qw( ... ); }

use This;
use ModA;
use That;

...

1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T13:36:48.527

问题是，首先要做的`module1`是`use module2`。这意味着在仍在编译的`module2`同时读取并执行所有内容。`module1`

接下来发生的事情就是`module2`这样`use module1`。因为`module1`已经找到并放入`%INC`Perl 不会再次执行它，而只是`module1->import`获取导出的符号。

但当然`module1`实际上几乎没有开始编译，`@module1::EXPORT`甚至不存在，更不用说它的两个子例程了。这使得`Exporter`import 什么都没有进入`module2`，因此在进行调用时，`method_1_2()`它对此一无所知。

解决此问题的最简洁方法是在编译*之后*（包括所有`use`语句和`BEGIN`块）但*在*运行时之前进行导入。Perl 的[`INIT`块](http://perldoc.perl.org/perlmod.html#BEGIN,-UNITCHECK,-CHECK,-INIT-and-END)非常适合这种情况，我们可以通过将模块更改为下面的形式来使代码正常工作。我只`module2`在这里展示了，因为调用模式意味着这就是解决这个特定问题所需的全部内容，但一般情况需要对所有协作模块进行等效更改。

```
package module2;

use strict;
use warnings;

use module1;
INIT { module1->import }

use base 'Exporter';
our @EXPORT  = qw( method_2_1 method_2_2 );

sub method_2_1 {
   print "method_2_1\n";
}

sub method_2_2 {
   print "method_2_2\n";
   method_1_2();
}

1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:48:30.963

有趣的是，我不确定为什么`method_1_2`没有被导出到`module2`命名空间中，但是您可以通过显式引用包来解决这个问题：

模块1.pm

```
package module1;

use strict;
use warnings;

use module2 (); #don't import methods

use base 'Exporter';
our @EXPORT  = qw( method_1_1 method_1_2 );

sub method_1_1
{
   print "method_1_1\n";
   module2::method_2_1();
}

sub method_1_2
{
   print "method_1_2\n";
}

1; 
```

模块2.pm

```
package module2;

use strict;
use warnings;

use module1 (); #don't import methods

use base 'Exporter';
our @EXPORT  = qw( method_2_1 method_2_2 );

sub method_2_1
{
   print "method_2_1\n";
}

sub method_2_2
{
   print "method_2_2\n";
   module1::method_1_2();
}

1; 
```

好的，我想我知道发生了什么，但请对此持保留态度。该`use`函数实际上是一个`BEGIN`块，并且`BEGIN`块在解析后立即运行，因此代码在执行顺序上看起来像这样。

1.  `perl`开始解析`test.pl`
2.  它看到`use module1;`所以它加载`module1.pm`并开始解析它
3.  `perl`看到所以它加载并`use module2;`开始解析它`module1.pm``module2.pm`
4.  此时，里面的函数`module1`还不存在，所以无法导入
5.  解析继续

Borodin 说的一些话让我找到了最好的解决方案：“@module1::EXPORT 甚至不存在”。这里的问题是该`@EXPORT`变量不存在。这可以通过将它放在一个`BEGIN`块中来解决：

模块1.pm

```
package module1;

use strict;
use warnings;

use base 'Exporter';
BEGIN {
    our @EXPORT  = qw( method_1_1 method_1_2 );
}

use module2;

sub method_1_1
{
   print "method_1_1\n";
   module2::method_2_1();
}

sub method_1_2
{
   print "method_1_2\n";
}

1; 
```

模块2.pm

```
package module2;

use strict;
use warnings;

use base 'Exporter';
BEGIN {
    our @EXPORT  = qw( method_2_1 method_2_2 );
}

use module1;

sub method_2_1
{
   print "method_2_1\n";
}

sub method_2_2
{
   print "method_2_2\n";
   method_1_2();
}

1; 
```

重要说明：我不相信在任何这些情况下都会尊重[原型](http://perldoc.perl.org/perlsub.html#Prototypes)`module1`（而且我不知道它们是如何`module2`被编译`module1`的，所以它不知道原型存在）。这是另一个[永远不要使用原型](http://www.perlmonks.org/?node_id=861966)的论点。

# javascript - Google Maps API v3 点击事件监听器调用了两次

> ID：11521585
> 
> 赞同：1
> 
> 时间：2012-07-17T11:32:03.097
> 
> 标签：javascript, google-maps-api-3

在默认的谷歌地图（API v3，firefox）上，以下点击事件侦听器被调用两次：

```
google.maps.event.addListener(map, "rightclick", function(event) {
        alert('rightclick!');
}); 
```

为什么？解决方法是什么？

我已经检查了 QA [Google Maps Api V3: click 事件触发两次](https://stackoverflow.com/questions/6490151/google-maps-api-v3-click-event-firing-twice)，但这并没有解决问题。

**更新**：使用console.log而不是警报按预期工作 - 侦听器只调用一次！？！

# sql-server-2008 - 将字符串转换为逗号分隔值

> ID：11521586
> 
> 赞同：0
> 
> 时间：2012-07-17T11:32:04.980
> 
> 标签：sql-server-2008

我有一张如下表

```
DECLARE @T TABLE(Data VARCHAR(MAX))
INSERT INTO @T
SELECT 'SQL' UNION ALL SELECT 'JOB' 
```

需要如下输出，但不使用任何 UDF。

```
Data  String
------------
SQL   S,Q,L
JOB   J,O,B 
```

请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:26:25.180

你当然可以 ：）。也可以缩短...

```
DECLARE @T TABLE(Data VARCHAR(MAX))
INSERT INTO @T
SELECT 'SQL' UNION ALL SELECT 'JOB';    

With cte as
(
    Select Data, Len(Data) DataLength, 1 level
    From @t
    Union All 
    Select Data, DataLength - 1, level + 1
    From cte
    Where DataLength > 1 
),
cte2 as
(
    Select Data, SUBSTRING(Data, DataLength, 1) DataLetter, level
    From cte
),
cte3 as
(
    Select Data, 
        (
            SELECT DataLetter + ','
            FROM cte2 c
            Where c.Data = cte2.Data
            Order By level desc
            FOR XML PATH(''), TYPE

        ).value('.[1]', 'NVARCHAR(1000)') DataComa
    From cte2
    Group By Data
)
Select Data, substring(DataComa, 1, Len(DataComa) - 1) Data2
From cte3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:00:41.687

派对迟到了，但这里有一个略短的版本：

```
DECLARE @T TABLE(Data VARCHAR(MAX));

INSERT INTO @T VALUES('SQL'),('JOB'),('FLOOB');

;WITH n AS (SELECT TOP (SELECT MAX(LEN(Data)) FROM @T) 
  n = ROW_NUMBER() OVER (ORDER BY [object_id]) FROM sys.all_objects
),
t AS (SELECT n, Data, Letter = SUBSTRING(t.Data, n.n, 1) FROM n
  INNER JOIN @T AS t ON SUBSTRING(t.Data, n.n, 1) > ''
)
SELECT Data, STUFF((SELECT ',' + letter FROM t AS t2
  WHERE t2.Data = t.Data ORDER BY t2.n FOR XML PATH(''), 
  TYPE).value(N'./text()[1]', N'varchar(max)'), 1, 1, '')
FROM t GROUP BY Data; 
```

结果：

```
FLOOB   F,L,O,O,B
JOB     J,O,B
SQL     S,Q,L 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:28:07.000

使用 UDF 很容易做到。但是如果你想要没有UDF，我能想到的唯一一种方法是

像这样的东西

```
DECLARE @T TABLE(Data VARCHAR(MAX))
INSERT INTO @T
SELECT 'SQL' UNION ALL SELECT 'JOB'

select replace(replace(replace(data,'S','S,'),'Q','Q,'),'L','L,') from @T 
```

在这里，您必须使用替换功能替换所有 26 个字符。即，“A”与“A”，“B”与“B”，......“Z”与“Z”，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T12:47:21.010

使用我在此处用于 Initcap 函数的相同方法[http://beyondrelational.com/modules/2/blogs/70/posts/10901/tsql-initcap-function-convert-a-string-to-proper-case.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10901/tsql-initcap-function-convert-a-string-to-proper-case.aspx)

```
DECLARE @T TABLE(Data VARCHAR(MAX)) 
INSERT INTO @T 
SELECT 'SQL' UNION ALL SELECT 'JOB' 

select data,
        upper(replace(replace(replace(replace(replace(replace(replace(
        replace(replace(replace(replace(replace(replace(replace(
        replace(replace(replace(replace(replace(replace(replace(
        replace(replace(replace(replace(replace(
            ' '+data ,
        ' a','a,'),' b','b,'),'c','c,'),'d','d,'),'e','e,'),'f','f,'),
        ' g','g,'),' h','h,'),'i','i,'),'j','j,'),'k','k,'),'l','l,'),
        ' m','m,'),' n','n,'),'o','o,'),'p','p,'),'q','q,'),'r','r,'),
        ' s','s,'),' t','t,'),'u','u,'),'v','v,'),'w','w,'),'x','x,'),
        ' y','y,'),' z','z,')) as splitted_data
from
    @t 
```

# ios - 如何使 UIPopoverController 自动改变其箭头方向

> ID：11521589
> 
> 赞同：0
> 
> 时间：2012-07-17T11:32:06.650
> 
> 标签：ios, cocoa-touch, uipopovercontroller

我在 UIPopOverController 中遇到了奇怪的问题。通常，我以这种方式呈现弹出框：

```
[popoverVC presentPopoverFromRect:sender.frame
              inView:sender.superview
              permittedArrowDirections:UIPopoverArrowDirectionLeft
              animated:NO]; 
```

但是，有时按钮（发送者）右侧没有足够的空间，并且弹出框显示在带有 UIPopoverArrowDirectionUP 的按钮下方。这是有道理的——如果弹出框不能正确显示，控制器会尝试用不同的箭头显示它。

但是当我将按钮（发送器）向左移动大约 10 个像素时，popover 不会以这种方式运行。仍然没有足够的空间来正确显示它，但它并没有改变它的箭头，尽管 popover 的宽度约为 20px，所以它太小了。

有没有办法说popovercontroller：“如果popover没有足够的空间来显示所有内容，改变箭头方向”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:27:19.877

为什么不使用`UIPopoverArrowDirectionAny`Apple 推荐的，或者，如果你绝对必须使用，`UIPopoverArrowDirectionLeft | UIPopoverArrowDirectionUp`？弹出框箭头的确切方向很少那么重要。

如果这不起作用，我想唯一的选择是在操作方法中做一些数学运算。（免责声明：我从来没有尝试过这个，但我不明白为什么你不能这样做，如果你绝对必须这样做。）首先将发送者的边界转换为顶级视图的坐标空间。根据应用程序视图层次结构的具体情况，您可能需要将边界/框架转换为适当的视图/从适当的视图转换。除非你有一些奇怪的事情发生，否则这应该有效：

```
[self.view convertRect:[sender bounds] fromView:sender] 
```

然后检查生成的矩形是否距离屏幕右边缘超过*X个点，其中**X*是弹出框的宽度（包括黑色边框和箭头）。如果有足够的空间，请按照上面的说明呈现弹出框。如果没有，请改用 UIPopoverArrowDirectionUp。

# magento-1.6 - Magento 管理员使用 cURL 登录

> ID：11521590
> 
> 赞同：0
> 
> 时间：2012-07-17T11:32:08.530
> 
> 标签：magento-1.6

我想使用用户名和密码通过 cURL 登录管理面板来执行一些操作。
不像[这里](https://stackoverflow.com/questions/4973134/magento-admin-login-through-curl)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:20:19.043

试试这个

```
$APIURL = "http://APIURL:port/API/login/";
$method = "POST";
$http = new Varien_Http_Client(APIURL."?username=".$login['username']."&password=".$login['password']);
$response = $http->request($method);
$body = $response->getBody();

try {
     $verifyUser = json_decode($body);
}
catch (Exception $e) {
    throw Mage::exception('Mage_Core', $e);
} 
```

# iphone - 键值编码键路径

> ID：11521592
> 
> 赞同：0
> 
> 时间：2012-07-17T11:32:11.440
> 
> 标签：iphone, objective-c, xcode, cocoa

有人可以给我一个关于 Cocoa KVC 概念中关键路径的教程，因为我无法理解它们。我了解他们的工作，但他们是如何做到的？我真的更喜欢带有示例示例的教程，我能找到的所有 tuts 信息量都非常少，而且大多数时候都缺少示例。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T11:33:54.827

恭喜，今天是你的幸运日！事实证明，Apple 认为这也很重要，因此他们在他们的网站上为您创建了一个闪亮而精美的指南，您可以[在此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html#//apple_ref/doc/uid/10000107-SW1)查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:55:20.677

令人惊讶的是，我找不到教程以及易于获得的示例代码。[下面关于KVO 和 KVC](http://www.tomdalling.com/blog/cocoa/how-cocoa-bindings-work-via-kvc-and-kvo)的网页很短，很简单，有代码，很好的解释了 KVC 和 KVO 最基本的概念。

# php - preg_match_all 更改字符串之间的文本

> ID：11521594
> 
> 赞同：0
> 
> 时间：2012-07-17T11:32:17.190
> 
> 标签：php, regex, preg-match, preg-match-all

我需要使用 preg_match_all 获取某些字符串之间的文本。我试过使用交替，但我没有得到正确的信息。我需要的是获取工作日字符串之间的随机文本。从星期五开始，它应该到正文的结尾。

我的数据如下：

```
Monday 1.1.
randomtext
randomtext
Tuesday 2.1.
randomtext
randomtext
Wednesday 3.1
randomtext
randomtext
Thusday 4.1.
randomtext
randomtext
randomtext
Friday 5.1
randomtext
randomtext 
```

我现在拥有的是这个，但它只在星期一之后捕获这些东西，它应该停止到星期二然后再做一次：

```
/(Monday|Tuesday|Wednesday|Thursday|Friday)([\s\S]+)/ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:49:17.670

试试这个，使用`m`修饰符和`^`+`$`来匹配文本的每一行。

```
$datas = <<<data
Monday 1.1.
randomtext
randomtext
Tuesday 2.1.
randomtext
randomtext
Wednesday 3.1
randomtext
randomtext
Thusday 4.1.
randomtext
randomtext
randomtext
Friday 5.1
randomtext
randomtext
data;
preg_match_all('#^(?!Monday|Tuesday|Wednesday|Thusday|Friday)\w+$#im',$datas,$matches);
print_r($matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:01:40.213

您可以使用`preg_split()`.

```
$day_pattern = '/([a-z]+?day [\d\.]+\n)/i';
$bits = preg_split(
    $day_pattern,
    $str,
    null,
    PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE
);
if ($bits)
    foreach($bits as $bit)
        echo preg_match($day_pattern, $bit)
            ?
            '<h3>'.$bit.'</h3>'
            :
            '<p>'.$bit.'</p>'; 
```

输出

```
<h3>Monday 1.1.</h3>
<p>randomtext
randomtext</p>
<h3>Tuesday 2.1.</h3>
<p>randomtext
randomtext</p>
<h3>Wednesday 3.1</h3>
<p>randomtext
randomtext</p>
<h3>Thusday 4.1.</h3>
<p>randomtext
randomtext
randomtext</p>
<h3>Friday 5.1</h3>
<p>randomtext
randomtext</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:47:51.633

在您的示例中，实际上“随机文本....”不在某些字符串之间，因为它在末尾缺少字符串，即在星期五之后

```
Monday 1.1.
randomtext1
randomtext2
Tuesday 2.1.
randomtext3
randomtext4
Wednesday 3.1
randomtext5
randomtext6
Thursday 4.1.
randomtext7
randomtext8
randomtext9
Friday 5.1
randomtext10
randomtext11
Monday 
```

If the text will be like above, ie it will be between Weekday string always, you can use the following pattern.

```
 (?<=Monday|Tuesday|Wednesday|Thursday|Friday)([\s\S]+?)(?=Monday|Tuesday|Wednesday|Thursday|Friday) 
```

# java - java：控制台应用程序主线程产生一个关键监听线程

> ID：11521597
> 
> 赞同：0
> 
> 时间：2012-07-17T11:32:19.163
> 
> 标签：java, key, listener, interrupt, system.in

我写了一个工具，它正在执行一些步骤 1..n 一些步骤需要用户交互（从 System.in 中读取） 其他步骤循环直到满足某些条件或用户按下某个键（当用户按下键时循环应该结束，主要应​​该进入下一步）

我为那些提供键循环中断的步骤所做的是生成一个线程，该线程从 System.in 读取 -> 如果按下键，则此线程然后中断该步骤。这工作正常，但是当循环条件得到满足时，这个关键的侦听器线程将阻塞 System.in，因此需要用户交互的下一步将受到影响

我的关键监听线程的运行基本上是：

```
new InputStreamReader(System.in).read() > 0; 
```

当然是哪些块，所以我正在寻找解决此问题的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:32:19.163

当我将关键侦听器线程更改为：

```
try
{
InputStreamReader reader = new InputStreamReader(System.in);
while (!reader.ready()) { Thread.sleep(100); }
if (reader.read() > 0) { // interrupt this step and proceed to the next one }
}
catch (IOException e) { // do something }
catch (InterruptedException e) { // noone needs me anymore } 
```

在 step 循环之后，我只是中断了关键侦听器线程，因为它不再需要了。

所以这对我来说很好，因为我没有找到解决这些问题的方法，所以想在这里为后代发布它:)

# jquery - jquery用另一个#div的内容替换#div的内容？

> ID：11521601
> 
> 赞同：2
> 
> 时间：2012-07-17T11:32:32.470
> 
> 标签：jquery, html, replace

如何正确地将 div 的内容替换为另一个 div 的内容？

*   div1
*   div2

我希望 div2 的内容替换 div1 的内容

```
 $('#start').load('#start_hidden'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T11:33:56.810

```
$('#div2').html($('#div1').html()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T11:37:10.590

**工作演示** [http://jsfiddle.net/M4v4M/](http://jsfiddle.net/M4v4M/)

API：`.replaceWith` [http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

希望能满足你的需要`:)`

**代码**

```
$('#div2').replaceWith($('#div1').html());​ 
```

# selenium - selenium 获取元素类和文本

> ID：11521602
> 
> 赞同：0
> 
> 时间：2012-07-17T11:32:31.777
> 
> 标签：selenium

我无法从以下 html 页面中找到 test1,test2...：

```
<dd class="class subclass">
test1, test2, test3
</dd> 
```

试过 //dd[contains(@class = 'class subclass') 和 contains(text(), 'test1')

我猜是空间的问题？还是在 dd 标签中？

PS 出现错误

错误：无效的 xpath [2]: //dd[contains(@class, "class subclass") and text() = test1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:51:17.463

尝试

```
//dd[contains(text(),"test1")] 
```

# uml - UML类图中虚线箭头是什么意思？

> ID：11521607
> 
> 赞同：25
> 
> 时间：2012-07-17T11:32:58.850
> 
> 标签：uml, class-diagram, command-pattern

UML 类图中的虚线箭头一般是什么意思？

举个例子：这张图中虚线箭头的含义是什么（从客户端到ConcreteCommand）：

![在此处输入图像描述](../Images/257197a345b0e9ed2acb1a5df8fe0450.png)

文章：[命令模式](http://en.wikipedia.org/wiki/Command_pattern)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T12:10:15.377

在 Client 和 ConcreteCommand:: 之间
表示依赖。
**Dependency**：如果更改箭头端的分类器，则依赖分类器的定义或实现可能会更改。

ConcreteCommand 和 Command 之间的意思是 Realization::
**Realization**：该类实现了接口定义的操作和属性。接口位于连接器的箭头端。
（*使用继承工具创建类和接口之间的实现。*）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T11:55:11.300

虚线箭头（从客户端到 ConcreteCommand）表示这些类的实例之间存在（单向）关联。客户端实例正在使用 ConcreteCommand 的实例，但 ConcreteCommand 的生命周期（创建和销毁）不依赖于客户端实例。箭头方向表示 Client 实例使用 ConcreteCommand 实例，反之则不然

# php - 使用循环更新 sql (PDO)

> ID：11521608
> 
> 赞同：0
> 
> 时间：2012-07-17T11:33:02.050
> 
> 标签：php, sql, pdo

如果有人愿意看看我的代码并告诉如何处理它。我认为这是对的，但显然不是。

```
<? require_once("dblogin.php");
$sth = $conn->prepare("SELECT * FROM country_city_zip WHERE country = US");
$sth->execute();
while ($row = $sth->fetch(PDO::FETCH_ASSOC)) { 

$sql ="UPDATE country_city_zip SET uni = '".$row['country']."-".$row['zip']."' WHERE country = '".$row['country']."' AND zip = '".$row['zip']."'"; 
$count = $conn->exec($sql);

} ?> 
```

我想根据国家代码和邮政编码创建一个唯一 ID：例如。US-28172

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:42:37.797

试试这个查询

```
$sql= "UPDATE country_city_zip SET uni = '".concat($row['country'],"-",$row['zip'])."' WHERE country = '".$row['country']."' AND zip = '".$row['zip']."'"; 
```

我假设您在 sql 查询中有问题，并且基于我将发布我的答案

我希望问题得到解决，如果您遇到任何问题，请告诉我..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:37:22.210

试试这个：

```
UPDATE country_city_zip SET uni = Concat(country,'-',zip) 
```

不需要循环...

# java - 从无状态 EJB 访问 SessionScoped 对象

> ID：11521613
> 
> 赞同：4
> 
> 时间：2012-07-17T11:33:24.693
> 
> 标签：java, jakarta-ee, cdi

我确实有一个 SessionScoped 类。对于每个用户访问，我需要一个自己的此类实例。很长一段时间一切都很好。但是现在我还需要在没有任何用户交互的情况下从后端访问这些对象。我确实有一个无状态企业 bean，但是每当我想访问会话范围的对象时，我都会得到一个异常。一个简单的示例代码如下：

```
@SessionScoped
public class SessionObj implements Serializable {

    public String getValue() {
        return "Hello World";
    }
}

@Stateless
public class StatelessBean {

    private static final Logger LOG=Logger.getLogger(StatelessBean.class);

    @Inject
    private SessionObj sessionObj;

    public void test() {
        LOG.info("session object: "+sessionObj);
        LOG.info("Method call: "+sessionObj.getValue());
    }

} 
```

但是调用测试方法会以异常结束，例如：

```
12:19:10,484 ERROR [org.jboss.as.ejb3.tx.CMTTxInterceptor] (EJB default - 6)    javax.ejb.EJBTransactionRolledbackException: WELD-001303 No active contexts for scope type javax.enterprise.context.SessionScoped
12:19:10,484 ERROR [org.jboss.ejb3.invocation] (EJB default - 6) JBAS014134: EJB Invocation failed on component StatelessBean for method public void package.StatelessBean.test(): javax.ejb.EJBTransactionRolledbackException: WELD-001303 No active contexts for scope type javax.enterprise.context.SessionScoped
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleInCallerTx(CMTTxInterceptor.java:139) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:204) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:306) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    ...
Caused by: org.jboss.weld.context.ContextNotActiveException: WELD-001303 No active    contexts for scope type javax.enterprise.context.SessionScoped
    at org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:598) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:71) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at package.SessionObj$Proxy$_$$_WeldClientProxy.toString(SessionObj$Proxy$_$$_WeldClientProxy.java) [ws_core_job_manager.jar:]
    at java.lang.String.valueOf(String.java:2826) [rt.jar:1.6.0_21]
    at java.lang.StringBuilder.append(StringBuilder.java:115) [rt.jar:1.6.0_21]
    at package.StatelessBean.test(StatelessBean.java:29) [ws_core_job_manager.jar:]
    ... 
```

所以我的问题是：* 即使没有会话，是否有任何选项可以通过任何技巧访问对象？* 是否有任何选项可以从我的无状态类中生成一个会话？

我了解异常的原因，但我想为现有代码的这种新用法设置一个“全局”会话。实际上，这当然不是那么容易，将会话范围的代码更改为 POJO 和会话范围的容器也不是那么容易。

环境：

*   JDK 1.6
*   JBOSS 7.1.1

# 解决方案：

正如 Jan 所说：扩展 StatelessBean 如下：

```
@Stateless
public class StatelessBean {

    private static final Logger LOG=Logger.getLogger(StatelessBean.class);

    @Inject
    private BoundSessionContext sessionContext;

    @Inject
    private SessionObj sessionObj;

    public void test() {
        Map<String,Object> myMap=new HashMap<String,Object>();
        sessionContext.associate(myMap);
        sessionContext.activate();

        LOG.info("session object: "+sessionObj);
        LOG.info("Method call: "+sessionObj.getValue());

        sessionContext.invalidate();
        sessionContext.deactivate();
    }

} 
```

这个例子很有效！现在我只需要了解细节;-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T04:11:15.630

问题不在于访问会话范围的 bean 本身，问题在于**会话不是活动**的，可能是因为它从未启动过（例如 EJB 远程处理）。

你可以做的是`BoundSessionContext`手动启动，看看[这里](http://docs.jboss.org/weld/reference/latest/en-US/html/contexts.html)。我这样做是为了对话，效果很好。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-17T12:24:41.270

您无法使用无状态 bean 访问会话或在其中存储某些内容，这就是它们被称为无状态的原因！您唯一可以访问的是 EjbContext，您可以从中获取调用者主体和凭据，但不要忘记先配置登录模块。

# r - 在数据框的列中查找特定标签并将单独列中的标签添加到同一数据框

> ID：11521618
> 
> 赞同：0
> 
> 时间：2012-07-17T11:33:44.630
> 
> 标签：r, regex, dataframe

我使用了回答我之前问题的用户的 R 代码（请参阅此处： [Split values of a column in a data frame by specific tag and add them as extra row](https://stackoverflow.com/questions/11517966/split-values-of-a-column-in-a-data-frame-by-specific-tag-and-add-them-as-extra-r)）来实现以下目标：

```
df <- data.frame(var1 = c("A", "B", "C", "D", "E"),            

             var2 = c("test", "5 | 6", "X & Y", "M | N | O", "none"))

> df         
  var1          var2
1    A          test
2    B         5 | 6
3    C         X & Y
4    D     M | N | O
5    E          none

t1 <- c("", "|")[df$var1 %in% df$var1[grep("\\|", df$var2)]+1]

t2 <- c("", "&")[df$var1 %in% df$var1[grep("&", df$var2)]+1]

t1[which(t2 == "&")] <- "&"

df$var3 <- t1

> df
  var1          var2     var3
1    A          test     
2    B         5 | 6        |
3    C         X & Y        &
4    D     M | N | O        |
5    E          none 
```

我只是想知道是否有更好的方法，因为我真的想改进我的 R 编码方式。对我来说，这并不是一项简单的任务，但我愿意学习 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:51:18.897

假设您的数据确实组织得很好，具有适当的间距等，您可以`gsub`与`substring`.

```
df$var3 = substring(gsub("([a-zA-Z0-9 ])", "", df$var2), 1, 1)
df
#   var1      var2 var3
# 1    A      test     
# 2    B     5 | 6    |
# 3    C     X & Y    &
# 4    D M | N | O    |
# 5    E      none 
```

1.  对于您的搜索模式，查找所有字母、数字和空格，并将它们替换为空。
2.  然后，将`substring`(or `substr`) 与`start`and `stop`as一起使用`1`。

# 更新

假设 中可能有不同的标点符号，一种更通用的方法`var2`是：

```
gsub("[^[:punct:]]", "", df$var2)
# [1] ""   "|"  "&"  "||" "" 
```

同样， using`substr`将允许您仅选择每个字符串中的第一个字符。

```
substr(gsub("[^[:punct:]]", "", df$var2), 1, 1)
# [1] ""  "|" "&" "|" "" 
```

如果您肯定只有这两个分隔字符，则可以将搜索模式从 更改`[^[:punct:]]`为`[^\\||\\&]`。

在此更新的示例中，`^`（在方括号内）表示匹配*除*这些字符之外的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:44:28.807

您可以改用它：

```
t3 <- rep("",length(df$var1))
t3[which(grepl("&",df$var2))] <- "&"
t3[which(grepl("\\|",df$var2))] <- "|"
df$var3 <- t3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:11:18.757

我找到了另一种解决方案，它只在一行中对我有用:-)

```
library(stringr)

df$var3 <- str_extract(df$var2, "\\||&") 
```

但是，我不得不说我不关心将 's 添加到找不到匹配项的代码。

感谢您提供的所有解决方案！确实很棒！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:46:14.690

```
grepl("\\|",df$var2)
grepl("&",df$var2) 
```

是相同的

```
df$var1 %in% df$var1[grep("\\|", df$var2)]
df$var1 %in% df$var1[grep("&", df$var2)]+1 
```

所以你可以使用例如

```
ifelse(grepl("\\|",df$var2),'|','')
ifelse(grepl("&",df$var2),'&','') 
```

# html - 单击时添加阴影做图像链接

> ID：11521627
> 
> 赞同：0
> 
> 时间：2012-07-17T11:34:08.880
> 
> 标签：html, css

我在向单击的链接添加样式时遇到问题 - 这是一个图像，我希望它在单击后有一个阴影，但我无法做到这一点，似乎也没有做任何事情`shadow`。`box-shadow`

我设法让它在 jsFiddle 上运行：

[http://jsfiddle.net/4GgBe/](http://jsfiddle.net/4GgBe/)

但它不适用于我的页面：

[http://jovansfreelance.com/booklist/list/man/Best-Stand-Alone-Fantasy-Books](http://jovansfreelance.com/booklist/list/man/Best-Stand-Alone-Fantasy-Books)

当您舔绿色的“1 reranks”按钮时，您可以看到该链接（它是带有小彩条的那个）。我什至尝试将整个 CSS 从页面复制到 jsFiddle，它仍然可以在 jsFiddle 上运行，但不能在页面上运行。有人能发现问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:53:41.613

您链接上的类与您的 CSS 不匹配。分配给链接的类是“showerranks”，但 CSS 规则分配给“shower”。

你只需要编辑你的实时 CSS 看起来像这样：

```
a.showeranks:active{
    box-shadow: 2px 2px 2px 2px blue;
} 
```

# html - 图片上的价格标签

> ID：11521630
> 
> 赞同：0
> 
> 时间：2012-07-17T11:34:15.177
> 
> 标签：html, image, css

我如何获得图像上的价格标签（使用纯 CSS），就像这个附加图像中的情况一样？

我用了

```
content:'';
    width:0px; height:0px; 
    position: absolute; left:194px; top:-20px;
    border:10px solid;
    border-color: transparent transparent rgba(0,0,0,0.8) transparent; 
```

但它没有帮助！

![在此处输入图像描述](../Images/c88ec925a5922c87f25f3ea2484f9ca8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T11:47:28.387

试试这样的[http://jsfiddle.net/chriscoyier/xtCb9/1/](http://jsfiddle.net/chriscoyier/xtCb9/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T11:39:03.787

你可以做这样[的事情](http://jsfiddle.net/hWnYa/)

假设您将在 'tag' id div 中有一个价格标签的图像，然后是它下面的图像

编辑

我现在已经更新了这个，所以你可以有这样的东西[，](http://jsfiddle.net/hWnYa/2/)你可以在 div 中使用它的价格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:39:23.533

目前尚不清楚您目前得到什么结果，除非它不起作用。所以也许你应该进一步指定问题。

对于仅在 CSS 中创建三角形，您可以查看这个 CSS 技巧，但它不允许将文本或样式添加到三角形：[http ://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

如果需要，您应该使用转换来获得类似的结果。

# php - $post 不适用于 jquery mobile

> ID：11521632
> 
> 赞同：0
> 
> 时间：2012-07-17T11:34:21.260
> 
> 标签：php, javascript, jquery, mobile, kohana

我遇到了 js $post 无法与 Jquery mobile 一起使用的问题。基本上，我的购物篮中有一个产品列表，而删除单个产品可以使用不同的按钮正常工作，使用复选框并尝试大量删除它是行不通的。

这是javascript

```
$('.usunZbiorczo').click(function() {

                var zaznaczone = "";

                $(".zaznacz").each(function() {
                    if ($(this).is(':checked'))
                    {

                        zaznaczone = zaznaczone +
                            $(this).val() + "|";
                    }
                });

                if (zaznaczone != "")
                { 

                    $post('<?php echo url::site("koszyk/ajaxUsunZbiorczo/", "http"); ?>', {zaznaczone: zaznaczone}, function(xml) {
                       window.location.replace("/koszyk")
                    });
                }

        //if ($(".zaznacz").filter(':checked').length == 0) return;

        //$('#usunZbiorczo').dialog("open");
        //e.preventDefault();

    }); 
```

这是复选框：

```
<?php echo form::checkbox("zaznacz_" . $pozycja->ks_Id, $pozycja->ks_Id, false, array("class" => "zaznacz", "data-inline" => "true", "data-iconpos" => "top", "data-mini" => "true", "style"=>"visibility: hidden")) ?> 
```

它来自 Kohana 框架，基本上是一个生成简单 HTML 复选框代码的 PHP 函数。在数组中你有标准的 HTML 属性。

这是接收它的 PHP 文件：

```
$zaznaczone = explode("|", $_POST["zaznaczone"]);

    foreach ($zaznaczone as $zazn) {
        if ($zazn == "")
            continue;

        $koszyk = ORM::factory("Koszyk")
                ->where("ks_Id", "=", $zazn)
                ->and_where("ks_uzytkownikId", "=", zalogowany::id())
                ->and_where("ks_magazynId", "=", magazyn::aktualny())
                ->and_where("ks_kontrahentId", "=", kontrahent::aktualny())
                ->find();

        $koszyk->delete();
    } 
```

ORM 的东西也来自 Kohana，基本上是在 MySQL 基础上做的。但我的问题是 javascript 中的 $post 甚至不会关闭......该页面不会向第二个 PHP 发布任何内容。

哦，这里也是启动整个操作的按钮，不好意思也是Kohana的，虽然生成的很简单

```
 <?= html::anchor("#", html::image("media/strona/img/delete.gif") . " " . __('Usuń'), array("class" => "usunZbiorczo", "style" => "margin-left: 10px;")) ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:35:07.913

它不应该是[`$.post`](http://api.jquery.com/jQuery.post/)$post。

# c++ - C++ 参数更改为垃圾，即使使用常量调用也是如此

> ID：11521635
> 
> 赞同：1
> 
> 时间：2012-07-17T11:34:45.503
> 
> 标签：c++, memory, compiler-construction, parameters

**它现在似乎可以工作了，谢谢。**

我的问题是参数似乎在其中一个函数中丢失了。

我在 Windows 7 上将 Code::Blocks 与 GNU GCC 编译器一起使用。

好的，我有一个需要 6 个 GLfloat 参数的函数。

```
void ProMesh::gen_quad_world(GLfloat _w,GLfloat _h,GLfloat _x1,GLfloat _y1,GLfloat _x2,GLfloat _y2); 
```

如您所见，它是 ProMesh 类的一部分。在 ProMesh 中，我有一个初始化函数，它调用有问题的 gen_quad_world 函数。

```
void ProMesh::initialize(GLfloat _w, GLfloat _h,GLfloat _x1,GLfloat _y1,GLfloat _x2,GLfloat _y2)
    {
        numverts = 18;
        numtexcoords = 12;
        vert_array = NULL;
        tex_array = NULL;
        id = glGenLists(1);
        gen_quad_world(_w,_h,_x1,_y1,_x2,_y2);
    } 
```

如您所见，它只是将参数传递给 gen_quad_world。

到目前为止一切都好吗？

不管 _w 和 _h 的值是什么，gen_quad_world 都会收到愚蠢的长数字。

示例：我打电话

```
gen_quad_world(1,2,345,4,5,6); 
```

我在 gen_quad_world 函数中得到 _w: 3.7648e-039 _h: 7.4044e+031 _x1: 345 _y1: 4 _x2: 5 _y2: 6。怎么会这样？这很奇怪。此外，有时当我在调试模式下逐行遍历它时，它可以正常工作。

更复杂的是，我有一个几乎相同的函数 gen_quad_local，它需要相同的参数。如果我用那个代替它，那么它工作正常。

-------------------------要查看 gen_quad_world 函数，请看下面----------------- ---

```
void ProMesh::gen_quad_world(GLfloat _w,GLfloat _h,GLfloat _x1,GLfloat _y1,GLfloat _x2,GLfloat _y2)
{
                            std::ofstream myfile("gen_quad_world.txt");
                            myfile<<"_w: "<<_w<<"\n_h: "<<_h<<"\n";
                            myfile<<"_x1: "<<_x1<<"\n_y1: "<<_y1<<"\n";
                            myfile<<"_x2: "<<_x2<<"\n_y2: "<<_y2<<"\n";
                            myfile.close();
    glNewList(id,GL_COMPILE);
        glBegin(GL_TRIANGLES);
            glVertex3f(_w,0,0);
            glVertex3f(0,0,0);
            glVertex3f(0,_h,0);
            glVertex3f(0,_h,0);
            glVertex3f(_w,_h,0);
            glVertex3f(_w,0,0);
        glEnd();
    glEndList();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:52:52.453

imo您的问题看起来像使用覆盖其他结构数据的已删除对象-检查适用于指针的代码-确保您没有调用已删除数据的任何方法，将您不再使用的所有指针清除为NULL（也确保所有都在 ctors 中初始化） - 这将允许您轻松找到对已删除对象的 foo-> 的调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:37:09.047

看起来您正在调用未初始化对象的方法。像这样：

```
Foo *foo;
foo->method(1,2,3,4,5,6); 
```

# php - 数组到新的 PHP 文件

> ID：11521640
> 
> 赞同：1
> 
> 时间：2012-07-17T11:35:10.090
> 
> 标签：php

> **可能重复：**
> [将数组插入 PHP 文件](https://stackoverflow.com/questions/11502159/inserting-array-into-a-php-file)

我们正在尝试将数组插入到 php 文件中。但是，我们可以将数组插入到 php 文件中，但格式不符合要求。我们有 2 个文件。

```
File1.php

    <?php
    include_once("../dc/dcCommonLib.php");
    include_once("../dc/persistence/UserData.php");
    require_once("../../lib/include/connect.inc.php");

    $_SESSION["survey"] = "BestBuyAug2012";
    $idLink = dbconnect($_SESSION["survey"]);
    $surveyWidget = rendererSurveyLoadHandler();
    setDataToSession("surveywidget",$surveyWidget);
    $userData = &UserData::getInstance();
    $userData->setSurvey($surveyWidget);
    saveFkidsToOidToFkidMappingArray($userData->OidToFkidMapping);

    // prepare demo array
    prepareItemArray($userData->OidToFkidMapping["Demographic"]["Q"],$demo,"b");

    // prepare item array
    prepareItemArray($userData->OidToFkidMapping["Default"]["Q"],$item,"i");
    prepareItemArray($userData->OidToFkidMapping["Default"]["M"],$item,"i");

    // prepare comment array
    prepareCommentArray($userData->OidToFkidMapping["Comment"]["C"],$comment);

    if(!function_exists('file_put_contents')) {
        function file_put_contents($filename, $data,$type, $file_append = false) {
          $fp = fopen($filename, (!$file_append ? 'w+' : 'a+'));
            if(!$fp) {
              trigger_error('file_put_contents cannot write in file.', E_USER_ERROR);
              return;
            }
        if($type){

        $count = count($data);
        $i = 1;
        //loop through your type array and append comma , to each except last
        foreach($data as $key=>$val) {

         //if we are before last key, append comma    
         if($i < $count)
              $data[$key] .= ',';

           $i++;
        }

        //run same preg_replace as before
        $data2 = preg_replace('/[\[\]]/','"',print_r($data,TRUE));

        //write to file 
        fputs($fp, "$" . $type . " = " . print_r($data2,TRUE));     

     }      else {
            fputs($fp, print_r($data, TRUE));
          }
          fclose($fp);
        }
    }
    print("Strart writting ...................");
    file_put_contents("staticSurveyDataFileTest.php", "<?php\n","",true);
    file_put_contents("staticSurveyDataFileTest.php", $item,"itemFkids",true);
    file_put_contents("staticSurveyDataFileTest.php", $demo,"demoFkids",true);
    file_put_contents("staticSurveyDataFileTest.php", $comment,"commentFkids",true);
    file_put_contents("staticSurveyDataFileTest.php", "?>","",true);
    print("written ...");

    function prepareItemArray($userDataArray, &$item, $itemStr) {
        if(is_array($userDataArray)) {
            foreach($userDataArray as $questId=>$respGrp) {
                $selectionGrp=array_unique($respGrp);
                if(count($selectionGrp)==1) {
                    $respGrpId=key($respGrp);
                    $respId = key($respGrp[$respGrpId]);
                    $item[$questId."_".key($respGrp)]=$itemStr.$respGrp[$respGrpId][$respId];           
                }else {
                    foreach ($respGrp as $respGrpId=>$resp) {
                        $respGrp[$respGrpId]=$itemStr.$resp;
                    }
                    $item[$questId."_".key($respGrp)]=$respGrp;
                }
            }
        }   
    }

function prepareCommentArray($userDataArray, &$item) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);               
                $item[$questId."_".key($respGrp)]=$respGrp[$respGrpId]["fk_id"];            
            }
        }
    }   
}

?> 
```

该文件中的数组被插入到 staticSurveyDataFileTest.php

```
staticSurveyDataFileTest.php

    <?php
    $itemFkids = Array
    (
        "203_19" => i27,//double quotes missing for all the lines . See below for desired output//
        "207_22" => i28,
        "357_22" => i99,
        "370_70" => i104,
        "377_72" => i105,
        "140_8" => i1,
        "141_8" => i2,
        "142_8" => i3,
        "143_8" => i4,
        "144_8" => i5,
        "145_8" => i6,
        "151_8" => i7,
        "152_8" => i8,
        "158_8" => i9,
        "164_8" => i10,
        "165_8" => i11,
        "166_8" => i12,
        "167_8" => i13,
        "168_8" => i14,
        "169_8" => i15,
        "175_8" => i16,
        "176_8" => i17,
        "182_8" => i18,
        "183_8" => i19,
        "184_8" => i20,
        "190_8" => i21,
        "196_8" => i22,
        "197_8" => i23,
        "198_8" => i24,
        "199_8" => i25,
        "200_8" => i26,
        "214_8" => i29,
        "215_8" => i30,
        "216_8" => i31,
        "222_8" => i32,
        "223_8" => i33,
        "224_8" => i34,
        "225_8" => i35,
        "226_8" => i36,
        "227_8" => i37,
        "233_8" => i38,
        "234_8" => i39,
        "235_8" => i40,
        "236_8" => i41,
        "237_8" => i42,
        "243_8" => i43,
        "244_8" => i44,
        "245_8" => i45,
        "251_8" => i46,
        "252_8" => i47,
        "253_8" => i48,
        "254_8" => i49,
        "255_8" => i50,
        "256_8" => i51,
        "257_8" => i52,
        "263_8" => i53,
        "264_8" => i54,
        "265_8" => i55,
        "266_8" => i56,
        "267_8" => i57,
        "268_8" => i58,
        "269_8" => i59,
        "270_8" => i60,
        "271_8" => i61,
        "272_8" => i62,
        "278_8" => i63,
        "279_8" => i64,
        "280_8" => i65,
        "281_8" => i66,
        "282_8" => i67,
        "283_8" => i68,
        "289_8" => i69,
        "290_8" => i70,
        "296_8" => i71,
        "297_8" => i72,
        "298_8" => i73,
        "299_8" => i74,
        "300_8" => i75,
        "301_8" => i76,
        "307_8" => i77,
        "308_8" => i78,
        "309_8" => i79,
        "310_8" => i80,
        "311_8" => i81,
        "312_8" => i82,
        "313_8" => i83,
        "314_8" => i84,
        "315_8" => i85,
        "316_8" => i86,
        "317_8" => i87,
        "318_8" => i88,
        "324_26" => i89,
        "328_37" => i90,
        "332_48" => i91,
        "338_59" => i92,
        "344_59" => i93,
        "345_59" => i94,
        "351_8" => i95,
        "352_8" => i96,
        "353_8" => i97,
        "354_8" => i98,
        "364_8" => i100,
        "365_8" => i101,
        "366_8" => i102,
        "367_8" => i103 
    )//comma missing
    $demoFkids = Array
    (
        "129_2" => b1
    )//comma missing
    $commentFkids = Array
    (
        "373_375" => 1,
        "380_382" => 2
    )//comma missing
    ?>

We need to insert a file something like this

Desired Output

    <?php
        $itemFkids = Array
        (
            "203_19" => "i27",//notices the double quotes here
            "207_22" => "i28",
            "357_22" => "i99",
            .
            .
            .

            .
            .
    .

        ),//notice a comma here
        $demoFkids = Array
        (
            "129_2" => "b1"//notices the double quotes here
        ),//notice a comma here
        $commentFkids = Array
        (
            "373_375" => "1",
            "380_382" => "2"//notices the double quotes here
        ),//notice a comma here
        ?> 
```

请通过编辑或帮助我编辑相同的代码来帮助我提前感谢您的帮助:)

# asp.net-mvc-3 - MVC 3 我无法添加新的控制器或视图

> ID：11521644
> 
> 赞同：1
> 
> 时间：2012-07-17T11:35:19.897
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我已经安装了 MVC 3，但是在我创建了那个项目之后，如果我想添加一个新的控制器或视图，但列表中没有项目。请参阅下面的图片。怎么了 ？

该项目的目标框架当然是.NET 4

我已经安装了这些项目：

![在此处输入图像描述](../Images/4c9b38b7ce4920db5cf260dfd696aa8c.png)

![在此处输入图像描述](../Images/404cbe91fa292c6f3a020a806349335e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:38:37.950

看起来您正在尝试将 MVC 组件添加到 ASP.NET Web 项目，而不是 ASP.NET MVC Web 项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:46:30.753

## 解决了

目的是，当我打开`.csproj`文件时出现错误`ProjectTypeGuids`。我已经用空项目中的数据替换了它们，现在可以了。

# magento - Magento - 主页网址

> ID：11521645
> 
> 赞同：1
> 
> 时间：2012-07-17T11:35:24.120
> 
> 标签：magento, url-rewriting, apache2, magento-1.4, magento-1.5

我有两个商店的magento安装，我的主页网址有问题：在两个商店中，主页都是cms页面，在cms.xml布局中，路径是cms_index_index。这似乎是其中一家商店的问题，该商店对于已登录和未登录的用户具有完全不同的布局：登录后，来自 www.mystore.com 的 url 变为*www.mystore.com/index.php/cms/ index/index/*，如果我注销 url 仍然是*www.mystore.com/index.php/cms/index/index/*。我需要商店网址保持*www.mystore.com*。我怎样才能做到这一点？是可以使用 xml 或其他 magento 配置完成的事情，还是与其他相关的事情（例如 apache、rewrite、...）？

谢谢，卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:51:51.667

问题可能在于模板文件。

获取主页 url 的方法有很多种（它可能使用一种对您没有帮助的方法）。

这是应该从模板中进行的正确调用：

```
Mage::getBaseUrl(); 
```

这个电话可以在任何地方进行 - 只要确保回应它。逾越节

# objective-c - Objective-C - 复制 exit(0) 并修复 EXC_BAD_ACCESS

> ID：11521649
> 
> 赞同：0
> 
> 时间：2012-07-17T11:35:27.873
> 
> 标签：objective-c, ios, opengl-es, exc-bad-access

我的最新应用程序遇到了一些严重令人沮丧的问题！

我正在使用 OpenGLES 1 将不断更新的模型绘制到屏幕上，然后您可以截取屏幕截图并随意分享，之后您可以返回应用程序开始屏幕并重新开始。

应用程序第一次运行时似乎一切正常，没有崩溃。但是如果你运行一次然后尝试再次运行，一旦 OpenGLES 绘图视图必须开始绘制元素，它就会在我的行上抛出一个`EXC_BAD_ACCESS`错误。`glDrawElements`

我暂时放弃尝试修复此错误，过去 2 周我没有运气！！

我已经在我的 plist 中设置了该属性，以便该应用程序不会在后台运行，并且每当我运行它一次，然后退出它并再次加载它时，它会再次运行，绝对没问题。

所以我想知道我是否可以以某种方式模拟该功能的`exit(0)`功能，但实际上不退出应用程序？

所以本质上，每次用户从共享页面导航回到主页时，应用程序都会运行`exit`代码，让应用程序再次从头开始运行。

至少在我看来，这根本不是处理这种情况的好方法，但我需要快速得到结果，这似乎是一个很好的出路，直到我能够深入了解实际错误。

谢谢，

马特

编辑 1：我不希望将应用程序放在商店中并进行此修复，这只是暂时的。

编辑 2：发布的代码包含我的绘图功能，取自[Bill Dudney 的 WaveFront .obj 加载器并改编自](http://bill.dudney.net/roller/objc/entry/wave_front_obj_textures_working)

```
for(WaveFrontOBJGroup *group in scene.groups)
{
    NSString *matPath = [NSString stringWithFormat:@"%@%@.mtl", materialName, modelPart];
    NSArray *materialArray = [WaveFrontOBJMaterial materialsFromLibraryFile:matPath];
    WaveFrontOBJMaterial *mat = [materialArray objectAtIndex:0];

    if(group.smoothing)
        glShadeModel(GL_SMOOTH);
    else
        glShadeModel(GL_FLAT);

    // load (if necessary) and bind the vertices
    GLuint verticesName = [group verticesName:GL_STATIC_DRAW];
    glBindBuffer(GL_ARRAY_BUFFER, verticesName);
    glVertexPointer(3, GL_FLOAT, 0, 0);

    // load (if necessary) and bind the normals
    GLuint normalsName = [group normalsName:GL_STATIC_DRAW];
    glBindBuffer(GL_ARRAY_BUFFER, normalsName);
    glNormalPointer(GL_FLOAT, 0, 0);

    ColorRGBA color = mat.ambientColor;
    glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, (GLfloat *)&color);
    color = mat.diffuseColor;
    if(alpha)
        glColor4f(color.red, color.green, color.blue, mat.disolve);
    else
        glColor4f(color.red, color.green, color.blue, color.alpha);
    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, (GLfloat *)&color);
    color = mat.specularColor;
    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, (GLfloat *)&color);
    glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, mat.shine);

    // load (if necessary) and bind the texture
    if(group.textureCoordinatesIndexData.length > 0)
    {
        glEnableClientState(GL_TEXTURE_COORD_ARRAY);
        GLuint textureCoordsName = [group textureCoordinatesName:GL_STATIC_DRAW];
        glEnable(GL_TEXTURE_2D);
        glBindBuffer(GL_ARRAY_BUFFER, textureCoordsName);
        glTexCoordPointer([group texCoordSize], GL_FLOAT, 0, 0);
        GLuint texId = [mat.diffuseTexture textureName];
        glBindTexture(GL_TEXTURE_2D, texId);
    }

    GLuint indexesName = [group indexesName:GL_STATIC_DRAW];
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexesName);

    glDrawElements(GL_TRIANGLES, group.indexCount, GL_UNSIGNED_SHORT, NULL);
    //^^This line above is where I get the "EXC_BAD_ACCESS" message

    if(group.textureCoordinatesIndexData.length > 0)
        glDisableClientState(GL_TEXTURE_COORD_ARRAY);
} 
```

我检查`group.indexCount`了断点和 NSLog，它不为空，它与第一次运行时完全相同，效果很好。

我意识到它不一定会在那条线上，我听说过其他人谈论它是由于变量没有被初始化为指针`*`- 或者 NSStrings 没有匹配的标识符和值`(@"%@ sometext %@", variable);`，但我在我的代码，当然我很容易错过一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:00:36.113

我不确定为什么您的应用程序无法在模拟器上编译，但您应该尝试适当地链接您的库，以便您可以启动并运行它 - 没有什么比僵尸更好的访问错误。

如果您知道您的错误来自调用，`glDrawElements`那么您应该查看传递给它的内容。[此链接](http://www.touch-code-magazine.com/how-to-debug-exc_bad_access/)可能会对您有所帮助。

您无法在应用程序中获得退出应用程序的“功能”的原因是它不是应用程序的功能 - 它是操作系统丢弃与应用程序相关的所有内容然后重新加载它。根据定义，如果不实际关闭，您将无法执行此操作。

但是，如果您的问题由此得到解决，那么您的设置中可能有一些需要重做的东西（初始化、声明等）。检查以查看设置`nil`或丢弃的内容，然后将其重新设置。

如果不查看您的代码，我不能肯定地说，但是您可以编写一个方法来覆盖/重新初始化所有当前变量。这可能会复制您需要的退出应用程序的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:42:16.673

记住两点：

1）您`-(void)viewWillAppear:(BOOL)animated`的家庭 ViewController 中有一个方法。当用户返回此屏幕时，这将始终调用（！）（不像 viewDidLoad）。

2）如果您甚至像您描述的那样执行此操作，您可能还没有进入 AppStore！

# java - 使用 Kerberos 和 WAS7 验证应用程序用户

> ID：11521653
> 
> 赞同：0
> 
> 时间：2012-07-17T11:35:34.290
> 
> 标签：java, authentication, kerberos, jaas, websphere-7

我正在努力解决这个问题，但没有运气。我正在尝试使用 Kerberos 通过 AD 对我的 java 应用程序用户进行身份验证。我创建了如下 KDC：

```
[libdefaults]
default_realm = X.LOCAL
default_tkt_enctypes = des-cbc-md5 des-cbc-crc des3-cbc-sha1 rc4-hmac arcfour-hmac arcfour-hmac-md5 aes128-cts-hmac-sha1-96 
default_tgs_enctypes = des-cbc-md5 des-cbc-crc des3-cbc-sha1 rc4-hmac arcfour-hmac arcfour-hmac-md5 aes128-cts-hmac-sha1-96 
permitted_enctypes = des-cbc-md5 des-cbc-crc des3-cbc-sha1 rc4-hmac arcfour-hmac arcfour-hmac-md5 aes128-cts-hmac-sha1-96 

[realms]
X.LOCAL = {
kdc = machine_name.X.LOCAL 
default_domain = X.LOCAL 
}

[domain_realm]
.X.LOCAL = X.LOCAL 
```

我定义了一个新领域，如下所示： • Global security>JAAS – 应用程序登录 • 创建了一个名为“client”的新登录并分配了 com.ibm.ws.security.auth.kerberos.Krb5LoginModuleWrapperClient 资源。

在代码级别，我正在设置 KDC 的路径：`System.setProperty(java.security.krb5.conf, “KDC” path);`

尝试登录：

```
loginContext = new LoginContext(moduleName, getUsernamePasswordHandler(userName, secret));
loginContext.login(); 
```

我正进入（状态：

登录错误：com.ibm.security.krb5.KrbException，状态码：14 消息：KDC 不支持加密类型

你会说不支持加密类型:) 我知道。

问：1）我错过了什么？（卡在这里超过 1 周）2）我做错了什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:53:11.190

在我回答您的问题之前，您必须清理配置并重试：

1.  省略 *_enctypes 并让两者协商最佳 enctype。
2.  不要从应用程序内部设置属性。传递`krb5.conf`位置和环境属性。这为您提供了充分的灵活性。
3.  您应该使用票证缓存或密钥表。没有必要从客户端再次请求凭据。这将使 Kerberos 变得多余。您只需登录一次操作系统并使用票证缓存。
4.  不要**使用**DES 加密，它不安全并且已被弃用。
5.  确保您拥有的 TGT 至少具有 RC4 (Arcfour) 加密。

你的问题大概是这样的：

AD 是禁用 DES 但您允许使用 DES 的 Windows Server 2008。这行不通。DES 在 2008 年被禁用是有充分理由的，或者您的客户端在顶部的 enctypes 列表中发送带有 AES 的初始请求。Windows Server 2003 无法处理这个问题。最常见的分母是 RC4-HMAC。

使用 Wireshark 检查流量。这将极大地帮助您理解问题和 Kerberos。编写一个独立的测试程序，它将帮助您作为概念证明。

# tapestry - 如何在 valueChange 上禁用 textarea

> ID：11521654
> 
> 赞同：0
> 
> 时间：2012-07-17T11:35:38.417
> 
> 标签：tapestry, mixins

我正在使用挂毯框架，我有选择和文本区域。我想根据在选择中选择的值来禁用文本区域。是否需要编写一个 mixin 或者有一些简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:56:48.220

我只想使用普通的旧javascript。

您可以通过@Import 在页面或组件类中包含 js 资源。

# firefox - Firefox 和 IE9 中不显示字体字符

> ID：11521655
> 
> 赞同：2
> 
> 时间：2012-07-17T11:35:39.823
> 
> 标签：firefox, fonts, internet-explorer-9, font-face, inkscape

我使用 Inkscape 为一组图标制作了自定义字体，并使用 Free Online Font Converter 和 Font Squirrel 生成不同的字体类型（woff、eot、ttf、svg）和包含的@font-face 代码。

该字体在带有 ttf、svg 和 woff-font 的 Google Chrome 以及 Internet Explorer 7 和 8 中运行良好，但在 FireFox 13 和 IE9 中某些图标无法呈现。字体的其他图标确实可以正常工作，因此文件交付没有问题。也因为字体在 Chrome 中工作，转换似乎已经成功。

我认为这个问题与我正在使用的图标的类型或形状有关，但我找不到任何特别的东西可以将这两个图标与我使用的其他图标区分开来。

这个问题可以在我的 ASP.NET 项目中重现，也可以在本地使用 Font Squirrel 提供的测试文件重现。

**更新：**仍然没有找到解决方案，但我发现当在 Windows 中安装相同的 TTF 字体时，它在 Firefox 中确实可以工作。但是当它通过@font-face 引用时，它不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:20:16.597

猜测这与您的字体或字体的 CSS 不是从同一个域调用的事实有关。Firefox 和 IE9 都强制执行同域来源限制。因此，不要在链接标签或 CSS 字体代码中使用域。

# java - 如何与大量的数字数组？

> ID：11521658
> 
> 赞同：6
> 
> 时间：2012-07-17T11:35:44.977
> 
> 标签：java, design-patterns, data-structures

我有 200 个排序的正整数数组（其中一些有超过一百万个数字）。我需要找到每个数组中存在的第一个数字。你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:39:52.850

*   在每个数组上保留一个索引。
*   从第一个数组的第一个数字作为参考开始。
*   是第n个数组的第一个数字低于参考，增加它的索引。
*   第 n 个数组的第一个数字是否等于参考，增加 n 并继续 - 下一个数组。
*   第 n 个数组的第一个数字是否高于参考值，使用该数字作为参考并重新开始。
*   如果 n == 201，则您的引用存在于每个数组中。

编辑：代码示例：

```
while n < len(data):
    item = data[n][indices[n]]
    if item < reference:
        indices[n] += 1
    elif item == reference:
        n += 1
    elif item > reference:
        reference = item
        n = 0

print reference 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:39:10.730

您可以对数组进行 k 路合并并检查出现`k`次数的第一个元素。

另一种方法是创建一个[直方图](http://en.wikipedia.org/wiki/Histogram)，并选择直方图中出现`k`时间的第一个元素。java中的直方图可以通过以下方式轻松实现`Map<Element,Integer>`

两种解决方案都是数组`O(kn)`的`k`数量和数组`n`的平均大小，因此它在输入的大小上基本上是线性的。

# c# - 当水晶报表中打印机的页面类型更改时，应用程序正在关闭

> ID：11521660
> 
> 赞同：0
> 
> 时间：2012-07-17T11:35:55.503
> 
> 标签：c#, crystal-reports, visual-studio-2005

我正在使用 C#.NET 和 Crystal Reports 开发一个 Windows 应用程序。

开发环境为IDE：Visual Studio 2005，操作系统：Windows Server 2003

出于开发目的，选择了网络打印机作为默认打印机。

在“.rpt”文件中更改打印机或页面类型（A3、A4 等）时，IDE 将被关闭。

有时它会用一些十六进制数字显示错误“除以零”。

谁能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:41:41.293

试试这个

1) 首先安装 Microsoft XPS Document Writer。

2) 将 Microsoft XPS Document Writer 设置为默认打印机。

# jsf-2 - jsf2 导航问题

> ID：11521662
> 
> 赞同：0
> 
> 时间：2012-07-17T11:36:00.653
> 
> 标签：jsf-2, seam3

我有一个使用 jsf2、jboss 6.1 和 seam 3 的应用程序。我想做这样的事情：

如果用户尝试访问应用程序但未通过身份验证，则应将其引导至登录页面。如果用户已经登录，即使他输入了登录 url，他也应该被引导到主页，而不是再次登录。所以我把它放在 faces-config.xml

```
<navigation-rule>
    <navigation-rule>
    <from-view-id>/login.xhtml</from-view-id>
    <navigation-case>
        <if>#{identity.loggedIn}</if>
        <to-view-id>/user/search.xhtml</to-view-id>
        <redirect>
            <view-param>
                <name>cid</name>
                <value>#{userBean.conversation.id}</value>
            </view-param>
        </redirect>
    </navigation-case>
</navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
        <from-action>#{identity.login}</from-action>
        <if>#{identity.loggedIn}</if>
        <to-view-id>/user/search.xhtml</to-view-id>
        <redirect>
            <view-param>
                <name>cid</name>
                <value>#{userBean.conversation.id}</value>
            </view-param>
        </redirect>
    </navigation-case>
    <navigation-case>
        <from-action>#{identity.login}</from-action>
        <from-outcome>failed</from-outcome>
        <to-view-id>/denied.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-outcome>login</from-outcome>
        <to-view-id>/login.xhtml</to-view-id>
        <redirect />
    </navigation-case>
</navigation-rule> 
```

但第一条规则不起作用。如果用户使用 login.xhtml 键入 url，他将停留在页面上。我需要他被重定向。我怎样才能做到这一点？

谢谢

凯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:18:09.990

我认为你必须使用 seam-faces 模块。它与接缝安全性相结合。您应该仔细查看[文档的这一部分](http://docs.jboss.org/seam/3/faces/latest/reference/en-US/html/viewconfig.html#viewconfig.enum)。

在我的项目中，我不使用任何导航规则，我的 Pages 配置对象如下所示：

```
@ViewConfig
public interface Pages {
    static enum Configuration {
        @ViewPattern("/pages/*")
        @LoggedIn
        PRIVATE,

        @UrlMapping(pattern="/pages/home.xhtml")
        @ViewPattern("/login.xhtml")
        @FacesRedirect(false)
        LOGIN,

        @ViewPattern("/*")
        @FacesRedirect
        @LoginView("/login.xhtml")
        ALL;

    }

} 
```

[这个其他问题](https://stackoverflow.com/questions/9299023/how-does-seam-3-handles-the-redirect-to-capture-view-feature-after-login)也帮助我做你需要的。

# c++ - 如何在 C++ 中获取 GMT 时间和任何时区之间的差异

> ID：11521674
> 
> 赞同：0
> 
> 时间：2012-07-17T11:36:58.230
> 
> 标签：c++

我想要 C++ 中的灵魂来获得 GMT 时间和任何时区之间的小时差异。例如，这是我想用 C++ 制作的 Java

```
// New York
Calendar c = new GregorianCalendar(TimeZone.getTimeZone("America/New_York"));  

// Alaska  
c = new GregorianCalendar(TimeZone.getTimeZone("America/Anchorage"));
// Difference between New York and Alaska 
```

请告诉我如何在 C++ 中获得这个时区

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-26T13:29:37.493

您可以使用[cctz](https://github.com/google/cctz)库来计算某个特定时间两个不同时区之间的 UTC 偏移差异。

```
#include <chrono>
#include "cctz.h"
using namespace std::chrono;

cctz::TimeZone nyc;
cctz::LoadTimeZone("America/New_York", &nyc);

cctz::TimeZone anc;
cctz::LoadTimeZone("America/Anchorage", &anc);

const auto now = system_clock::now();
const auto nyc_off = cctz::BreakTime(now, nyc).offset;
const auto anc_off = cctz::BreakTime(now, anc).offset;

const auto off_diff = nyc_off - anc_off; 
```

* * *

现在，事实是你真的不想那样做。真的。健康、现代的代码永远不应该（我说从不，因为我的意思是**从不**）关心 UTC 偏移量。使用 UTC 偏移量计算是*你的时区库的工作*，如果你的时区库不能为你处理，那么你使用了错误的时区库。如果您认为您关心 UTC 偏移量，那么我鼓励您查看以下内容：

*   在其 github 页面上阅读 CCTZ 的基本概念部分
*   观看CppCon 2015 的[时间编程基础](https://youtu.be/2rnIHsqABfM)
*   阅读 cctz.h 头文件（简短而简单）

[免责声明：我是 cctz 的作者。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-02T01:18:33.773

几天来，我一直在盯着[Greg 的好答案，并正在考虑在](https://stackoverflow.com/a/33347016/576911)[我的时区库](http://howardhinnant.github.io/tz.html)中添加一些语法糖：

```
namespace date
{

class zoneverter
{
    const Zone* zp1_;
    const Zone* zp2_;

public:
    zoneverter(const Zone* z1, const Zone* z2)
        : zp1_(z1)
        , zp2_(z2)
        {}

    zoneverter(const Zone* z1, const std::string& z2)
        : zoneverter(z1, locate_zone(z2))
        {}

    zoneverter(const std::string& z1, const Zone* z2)
        : zoneverter(locate_zone(z1), z2)
        {}

    zoneverter(const std::string& z1, const std::string& z2)
        : zoneverter(locate_zone(z1), locate_zone(z2))
        {}

    template <class Rep, class Period>
    auto
    operator<<(std::chrono::time_point<std::chrono::system_clock,
                                       std::chrono::duration<Rep, Period>> tp) const
    {
        return zp1_->to_local(zp2_->to_sys(tp)).first;
    }
};

}  // namespace date 
```

这添加了一个“流式对象”，它允许`std::chrono::time_point`通过它流式传输 a 以将其从一个时区转换为另一个时区。这是一个非常简单的设备，除了添加一些语法糖外，什么都不做，但会从[我的时区库](http://howardhinnant.github.io/tz.html)中删除一些信息。

它将像这样使用：

```
int
main()
{
    // So things don't get overly verbose
    using namespace date;
    using namespace std::chrono;

    // Set up the zone converters:
    zoneverter nyc_from_utc{"America/New_York",  "UTC"};
    zoneverter anc_from_nyc{"America/Anchorage", "America/New_York"};

    // Get the current time in New York and convert that to the current time in Anchorage
    auto now_nyc = nyc_from_utc << system_clock::now();
    auto now_anc = anc_from_nyc << now_nyc;

    // Output the difference
    std::cout << make_time(now_nyc - now_anc) << '\n';
} 
```

这目前为我输出：

04:00:00.000000

我也不确定这种语法糖是否比当前语法好到足以保证它的存在：

```
int
main()
{
    // So things don't get overly verbose
    using namespace date;
    using namespace std::chrono;

    // Set up the zones:
    auto nyc_zone = locate_zone("America/New_York");
    auto anc_zone = locate_zone("America/Anchorage");

    // Get the current time in New York and the current time in Anchorage
    auto now_utc = system_clock::now();
    auto now_nyc = nyc_zone->to_local(now_utc).first;
    auto now_anc = anc_zone->to_local(now_utc).first;

    // Output the difference
    std::cout << make_time(now_nyc - now_anc) << '\n';
} 
```

# c# - Metro c#中缺少String.Intern()方法

> ID：11521675
> 
> 赞同：2
> 
> 时间：2012-07-17T11:37:01.730
> 
> 标签：c#, windows-8, microsoft-metro

如何在 Metro c# 中获取字符串实习生方法。如果在 windows 8 c# 中找不到，是否有任何等效方法来维护系统对指定字符串的引用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T12:44:36.657

这是 CLR 中内置的语言投影不可避免的副作用，它启用了“.NET for Metro 风格应用程序”api。该投影将从 WinRT api 调用获得的字符串映射到 System.String。底层字符串根本不是托管字符串，也不存在于垃圾收集堆上。它是[一个 HSTRING。](http://msdn.microsoft.com/en-us/library/br205775%28v=vs.85%29.aspx) 语言投影使其表现得像 System.String

因此，在该 api 中，String 类没有非常特定于托管字符串的方法。像 Intern() 和 IsInterned() 一样，它只能用于托管字符串。Copy、Clone 和 GetEnumerator 也一样。对此没有解决方法，对 mscorlib 中托管 String 类的访问完全被引用程序集阻止，它将类型转发到 System.Runtime.dll。如果没有这种方法，你必须让它工作。

# iphone - 如何将选定的行从 UITableview 保存到 NSString 变量？

> ID：11521678
> 
> 赞同：0
> 
> 时间：2012-07-17T11:37:08.483
> 
> 标签：iphone, objective-c, xcode, uitableview, xcode3.2

我是 xcode 的新手，正在制作我的第一个 iPhone 应用程序。

我`UITableview`在选项卡式屏幕中有 8 行。我有一个代码，让用户一次最多选择 4 行，并在选择时用检查标记它。

现在，当我更改视图并导航到下一个选项卡时，我想将这些选中行中的文本保存在一个`NSString`以逗号分隔的变量中。

有可能这样做吗？谢谢，非常感谢您的帮助。

这是我要保存所选行的第一个选项卡的代码。

```
@implementation Psychological

static int count = 0;
- (void)viewDidLoad {
[super viewDidLoad];

listOfItems = [[NSMutableArray alloc] init];

[listOfItems addObject:@"1 option"];
[listOfItems addObject:@"2 option"];
[listOfItems addObject:@"3 option"];
[listOfItems addObject:@"4 option"];
[listOfItems addObject:@"5 option"];
[listOfItems addObject:@"6 option"];
[listOfItems addObject:@"7 option"];
[listOfItems addObject:@"8 option"];    

}
#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section     {
// Return the number of rows in the section.
return [listOfItems count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...
NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
cell.text = cellValue;

return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
if ([selectedCell accessoryType] == UITableViewCellAccessoryNone) {
    if(count < 4)
    {
    [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];
    [selectedIndexes addObject:[NSNumber numberWithInt:indexPath.row]];
        count++;
    }

} else {
    [selectedCell setAccessoryType:UITableViewCellAccessoryNone];
    [selectedIndexes removeObject:[NSNumber numberWithInt:indexPath.row]];
    count --;
}
[tableView deselectRowAtIndexPath:indexPath animated:NO];

}

- (void)dealloc {

[listOfItems release];
[super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:56:23.470

最简单的方法是 make 方法，它将返回您需要的字符串。方法看起来像这样：

```
- (NSString *) selectedItems {
    NSMutableString *result = [NSMutableString string];
    for (int i = 0; i < [itemsArray count]; i++) {
        NSIndexPath *path = [NSIndexPath indexPathForRow:i inSection:0];
        [tableView scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionMiddle animated:NO];
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];
        if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
            [result appendFormat:@"%@",cell.textLabel.text];
        }
    }
    if (result.length > 2) {
        [result replaceCharactersInRange:NSMakeRange(result.length-1, 1) withString:@""];
    }
return result;
} 
```

要在另一个视图控制器中获取此行，您应该在 navigationController.viewController 中找到心理视图控制器并调用此方法。

```
- (void) method {
    for (UIViewController *vc in self.navigationController.viewControllers) {
        if ([vc isKindOfClass:[Psychological class]]) {
            NSString *str = vc.selectedItems;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:56:18.177

希望以下代码符合您的要求：

//didSelect 方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath         *)indexPath {

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    if ([selectedCell accessoryType] == UITableViewCellAccessoryNone) {

     if(count < 4) {

         [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];
         [selectedIndexes addObject:[NSNumber numberWithInt:indexPath.row]];
         count++;
     }

  } else {

    [selectedCell setAccessoryType:UITableViewCellAccessoryNone];
    [selectedIndexes removeObject:[NSNumber numberWithInt:indexPath.row]];
    count --;
}

    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

全局声明 selectedCell 以在所有选项卡中访问

```
NSMutableString *selectedCell = [[NSMutableString alloc]init]; //Should declare this string globally 
```

//在 -viewWillDisappear 方法或您认为合适的地方使用以下代码（从当前类导航时调用的方法）

```
for(int i = 0; i < [selectedIndexes count]; i++){

 [selectedCell appendString:[selectedIndexes objectAtIndex:i];
 [selectedCell appendString:@","];

}

NSRange range = {[selectedCell length]-1,1};
[selectedCell deleteCharactersInRange:range]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:37:37.820

```
NSMutableString *selectedRow=[NSMutableString alloc]init];

for(int i=0; i<[count];i++)
{
    selectedRow=[arrayName objectAtIndex:row];
    [selectedRow appendString:@","];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T06:30:32.163

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    if (selectedCell.accessoryType == UITableViewCellAccessoryNone) {
if(count<4){
        selectedCell.accessoryType = UITableViewCellAccessoryCheckmark;
        [[listOfItems objectAtIndex:indexPath.row]setObject:@"YES" forKey:@"Selected"];
count++;
}

    } else if (selectedCell.accessoryType == UITableViewCellAccessoryCheckmark) {
        if(count>=0){
        selectedCell.accessoryType = UITableViewCellAccessoryNone;
        [[listOfItems objectAtIndex:indexPath.row]setObject:@"NO" forKey:@"Selected"];
count--;
    }  
} 
```

替换上面的代码，当你想在那个时候浏览你的页面时检查 Selected 值是或否，如果是，则传递该值，否则离开它。

```
for (int i =0 ; i<[listOfItems count]; i++) {
        if ([[[listOfItems objectAtIndex:i]valueForKey:@"Selected"]isEqualToString:@"YES"]) {
            if ([selectedId length]==0) {
                selectedId = [NSString stringWithFormat:@"%@",[[listOfItems objectAtIndex:i]valueForKey:@"user_id"]];
            }else {
                selectedId = [selectedId stringByAppendingFormat:@",%@",[[listOfItems objectAtIndex:i]valueForKey:@"user_id"]];
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T11:50:06.510

您可能想要一个全局数组。将选定的值存储到该全局数组中，然后很容易在其他地方显示它们.. :-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T11:51:09.943

创建一个新类，我们将其命名为`Option`，并为其赋予两个属性。一个是 NSString 调用`name`，另一个是 BOOL 调用`selected`。与其`listOfItems`作为字符串数组，不如将其设为`Option`对象列表。让每个`Option`人跟踪它当前是否被选中。

将拥有的控制器类`listOfItems`设为 a`UITabBarControllerDelegate`并实现`tabBarController:didSelectViewController:`，以便它构建字符串并将其传递给下一个选定的控制器。

# java - 如何确定是否在 JVM 实例上设置了 -server 选项

> ID：11521691
> 
> 赞同：6
> 
> 时间：2012-07-17T11:37:35.170
> 
> 标签：java, jvm, jvm-arguments

我正在尝试确定是否在我的 JVM 实例上默认启用了 JVM（使用 jdk 1.7u3）-server 选项。根据我的环境（Windows 2008 Server R2）和[服务器级机器检测信息](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/server-class.html)，我希望它被设置，但我想明确知道。当然，我可以使用该选项显式启动 JVM，尽管有一种简单的方法来确定是否相同，但我很可能会这样做。

我已经尝试过以下方法，但似乎都没有明确说明我在寻找什么。也许它编码在其他一些细节中。

1.  通过 jVisualVM 查看 JVM 并查看 JVM Arguments，未明确列出
2.  以编程方式尝试查看 JVM 参数，匹配通过 jVisualVM 观察到的参数

    ```
    RuntimeMXBean RuntimemxBean = ManagementFactory.getRuntimeMXBean();
    List<String> arguments = RuntimemxBean.getInputArguments(); 
    ```

3.  使用 JVM 选项 -XX:+PrintCommandLineFlags，这提供了详细的详细信息，但仍然没有证据表明 -server 选项已设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:29:09.443

您可以通过运行 java -version 命令找到它：

下面是使用 -server 标志运行的 JVM 的示例

java 版本“1.7.0_17”
Java(TM) SE 运行时环境（构建 1.7.0_17-b02）
Java HotSpot(TM) 64 位服务器 VM（构建 23.7-b01，混合模式）

在 -client 的情况下，它将显示 64 位客户端 VM

大多数情况下，它取决于 CPU 和物理内存的数量。更多 @ [http://docs.oracle.com/javase/7/docs/technotes/guides/vm/server-class.html](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/server-class.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:02:18.050

您可以使用`System.getProperty("java.vm.name")`和解析字符串。

例子：

```
public class Test {
  public static void main(String{[] args) {
    System.out.println(System.getProperty("java.vm.name"));
  }
} 
```

此示例将导致：

```
OpenJDK Client VM 
```

或者如果您使用 -server：

```
OpenJDK Server VM 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T11:59:51.873

打开 JConsole -> 检查 java.lang.Runtime -> VmName 属性。它为我显示 Java HotSpot(TM) Client VM。如果您正在运行服务器模式 - 检查它为您显示的值。

如果您需要使用程序进行检查 - 您需要向管理工厂查询上述属性。

# java - 如何检查对象是否为 c 类类型？

> ID：11521692
> 
> 赞同：1
> 
> 时间：2012-07-17T11:37:36.167
> 
> 标签：java

我正在尝试执行以下操作，但它不会编译并一直说“bo instanceOf T”不兼容

```
public retur boolean (BaseObject bo,String text, Class<?> T){
    return (bo.getText().equals(text) && bo instanceOf T)

} 
```

我试图确保 get 是相同的，并且 bo 必须是 T 类型。

哦，是的，我如何确保“T”扩展了 BaseObject？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:41:35.437

```
T.isAssignableFrom(bo.getClass()); 
```

有关详细信息，请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:45:51.727

```
public boolean test(BaseObject bo,String text, Class<? extends BaseObject> clazz){
   return ( bo.getText().equals(text) && clazz.isAssignableFrom(bo.getClass()) );
} 
```

# ruby-on-rails-3 - 如何将“dd.mm.yyyy”字符串转换为日期时间？

> ID：11521695
> 
> 赞同：3
> 
> 时间：2012-07-17T11:37:49.647
> 
> 标签：ruby-on-rails-3

我是 ruby​​ 新手，我需要帮助将格式为“dd.mm.yyyy”的字符串转换为日期时间。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T11:45:28.133

```
Date.strptime('03.02.2001', '%d.%m.%Y') 
```

**更新**：这将返回一个 Date 对象

正如大卫在下面正确地指出的那样：

```
DateTime.strptime('03.02.2001', '%d.%m.%Y') 
```

会给你一个红宝石 DateTime 对象。

# macros - 用 memfn 定义函数

> ID：11521699
> 
> 赞同：2
> 
> 时间：2012-07-17T11:38:11.010
> 
> 标签：macros, clojure

我正在研究一些 java 库包装器。我们有一些带有方法的对象，可以使用`(.method object ...)`. 我想用更多的功能创建更方便的 api `(method object ...)`。

我写了一个简单的宏：

```
(defmacro ^{:private true} gen-method [method & argv]
  `(def ~method (memfn ~method ~@argv))) 
```

现在我可以调用`(gen-method charAt i)`例如，之后我可以使用`(charAt "string" 1)`.

但我有很多方法可以生成并想要使用类似的东西：

```
(map #(gen-method (-> %1 name symbol arg)) [:charAt :substring ...]) 
```

但这不起作用。下一个示例也不起作用：

```
(map #(let [fname (-> %1 name symbol)] (gen-method fname arg)) [:charAt :substring ...]) 
```

我需要在宏中更改什么或为正确的行为添加一些东西？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:48:06.517

您将不得不`map`在宏本身内部进行操作，因为该`map`操作应该在编译时发生，即在扩展时而不是在运行时发生。

如下所示：

```
(defmacro ^{:private true} gen-methods [methods]
`(do 
       ~@(map (fn [[x & i]] (let [m (-> x name symbol)] `(def ~m (memfn ~m ~@i)) )) methods)))

(gen-methods [ [:charAt i] [:substring i]]) 
```

# backbone.js - 如何使用 Eco 显示 Backbone 嵌套属性？

> ID：11521705
> 
> 赞同：1
> 
> 时间：2012-07-17T11:38:26.597
> 
> 标签：backbone.js, eco

我按照 Ryan Bates 在 Backbone.js 上的示例使用 Backbone + Eco 开始了一个项目。这很棒。但是，我一直在尝试显示嵌套属性。例如，我正在尝试这样做：`<%= @stream.user.get('name') %>`in `index.jst.eco` and I'm getting`Uncaught TypeError: Cannot call method 'get' of undefined` 但是，我可以开始`<%= @stream.get('stream_type') %>`工作。

这是 REST API 数据：

```
[
:   {
:   :   "id":"5004095283de4ca9ff000005",
:   :   "created_at":"2012-07-16T12:30:10Z",
:   :   "stream_type":"project",
:   :   "user":
:   :   {
:   :   :   "id":"5002f30560de7d0ffb000003",
:   :   :   "name":"Regular User2"
:   :   },
... 
```

我也尝试过使用扩展我的模型，`Backbone.DeepModel`但这似乎不起作用。

```
class Project1.Collections.Streams extends Backbone.Collection
  url: '/streams'
  model: Topaz.Models.Stream

class Project1.Models.Stream extends Backbone.DeepModel 
```

这是我对收藏的看法，很标准。

```
class Project1.Views.StreamsIndex extends Backbone.View
  #views/streams/index.js
  template: JST['streams/index']

  initialize: ->
    @collection.on('reset', @render, this)
    @collection.on('add', @appendStream, this)  #rerenders entire template

  render: ->
    $(@el).html(@template())
    @collection.each(@appendStream)
    this

  appendStream: (stream) =>
    view = new Topaz.Views.Stream(model: stream)
    @$('#streams').append(view.render().el) # looks for the #entries element within the view’s element and not on the page directly 
```

这是模型的视图

```
class Project1.Views.Stream extends Backbone.View

  template: JST['streams/show']
  className: 'stream-item'

  initialize: ->
    @model.on('change', @render, this)   #The change event is triggered by Backbone when a model saves

  render: ->
    $(@el).html(@template(stream: @model))
    this 
```

# linux - 拦截出口

> ID：11521710
> 
> 赞同：1
> 
> 时间：2012-07-17T11:38:42.443
> 
> 标签：linux, bash, shell

我正在为 bash 脚本编写单元测试，并想检查脚本是否因错误退出（我使用`exit`错误代码）。

有什么方法可以捕获`exit`（我知道`trap`），但不要中断命令流（类似于异常捕获）？

我的测试脚本：

```
do_smth1 && echo OK || echo Fail
do_smth2 && echo OK || echo Fail
do_smth3 && echo OK || echo Fail 
```

我的主要脚本：

```
do_smth1(){
   ...
   ...
   [ $? -eq 0 ] && success || error_exit
} 
```

等等。

我想一个接一个地执行所有测试。现在第一个命令后流中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:47:18.197

You can write:

```
success=0
error_code=1
do_smth1(){          
   ...          
   ...          
   [ $? -eq 0 ] && return $success || return $error_code         
}

do_smth1 && echo OK || echo Fail             
do_smth2 && echo OK || echo Fail             
do_smth3 && echo OK || echo Fail 
```

Refer the man pages for exit and return, to know when to use which.

# css - CSS：如何使用背景图像和由图标分隔的居中条目正确设置水平菜单栏的样式

> ID：11521720
> 
> 赞同：1
> 
> 时间：2012-07-17T11:39:17.433
> 
> 标签：css, layout, xhtml, header

我遇到了以下问题。我有一个水平菜单栏，我想在页面顶部设置样式。这是它的 html 的样子：

```
<body>
  <div id="container">
    <div id="left">
    </div>
    <div id="center">
      <!-- stuff above header here ... -->
      <div id="header">
        <ul>
          <li class="first"><a href="#">Products</a></li>
          <li><a href="#">Customers</a></li>
          <li><a href="#">Invoices</a></li>
        </ul>
      </div>
      <!-- stuff below header here ... -->
    </div>
    </div id="right">
    </div>
  </div>
</body> 
```

我希望它看起来像这样：

```
+--------------------+-----+--------------------+-----+--------------------+
+                    +     +                    +     +                    +
+      Products      +  /  +      Customers     +  /  +      Invoices      +
+                    +     +                    +     +                    +
+--------------------+-----+--------------------+-----+--------------------+ 
```

基本上，我需要以下内容：

1.  整个页面在中心 (id="center") 是固定宽度 (960px) 并具有可扩展的可变大小侧边栏 (id="left" 和 id="right")。

2.  导航栏跨越中心 div，因此也是 960px 宽

3.  导航栏有一个 960px 宽的背景图像，并且有一个已知的高度（不确定导航栏的高度是否已知对 CSS 样式有影响）。

4.  标有“/”的部分是显示此“/”字符的图像。这些图像与导航栏的高度相同，宽度为 30 像素。

5.  我希望包含链接产品、客户和发票中的每一个的区域具有相同的宽度，而不管文本宽度的差异。每个的宽度应为 300 像素。

6.  如果其中一个链接的名称很长（例如，如果我们在其中一个标题中有“产品列表的超长标题”而不是“产品”，那么文本不应换行到下一行，但应该被截断（可能在文本末尾显示一个省略号）。在实践中，我们希望文本始终完全适合，因为中心 div 的宽度是固定的，因此分配较小的字体是必要的。

7.  我希望每个产品、客户和发票链接在其边界框内垂直和水平居中。

就是这样，这就是我一直在努力做的。

但是我在文本居中时遇到了问题，部分原因是我永远无法判断是否应该将属性应用于元素（例如，a，或其父 div，或其祖父 div），而且我不知道是否有些属性一直沿 DOM 树继承，或者继承是否仅取决于 DOM 树中哪些元素相邻，因为它们涉及父子关系。

到目前为止，我想出了如何照顾 1\. 如下：

```
 div#left { float: left; }
  div#right { float: right; }
  div#center { width: 960px; margin: 0px auto; } 
```

我还从 PSD/JPG 模型中切出了标题背景和标题分隔线。

但是，我无法让其余的工作，特别是 5\. 和 7.

有什么建议么？

* * *

好的，这就是我最终做的事情：

在这种情况下，由于图像是分隔符而不是项目指示符，因此您不能在 ul 元素内使用 list-style-image 设置它，因为这意味着图像也位于第一张图像的右侧，这会产生错误的效果。

所以我的解决方案是清除：都在包含的 div 上，以确保它单独出现在一行上。然后将 ul 的列表样式设置为无。然后如果 W 是标题 div 的宽度并且菜单中有 N 个超链接，则计算：

floor({W - [(N - 1) * SEPARATOR_IMAGE_WIDTH]} / N) 计算每个包含块的链接的宽度，并为每个 li 元素设置它。除了第一个之外，还为每个 li 设置一个 SEPATATOR_IMAGE_WIDTH 的填充和一个背景。

然后设置 ul、li 的高度和一个指向分隔符图像高度的链接，以防止其折叠。如果您不想一直写下 40px，可以使用继承属性而不是行高。

将链接中的文本居中对齐，并使用一些顶部填充将文本从顶部向下移动一点（因为我找不到更好的方法将文本垂直居中在这 40px 内，欢迎任何想法）

```
 div#header_middle { clear: both; }
  div#header_middle ul { list-style: none; background: url(images/header_middle_navbar_background.jpg); height: 40px; }
  div#header_middle ul li { float: left; padding-left: 14px; background: url(images/header_middle_entryseparator.jpg) no-repeat; height: 40px; }
  div#header_middle ul li.first { padding-left: 0px; background: none; }
  div#header_middle ul li a { display: block; float: left; text-transform: uppercase; font-size: medium; width: 110px; text-align: center; padding-top: 8px; height: 40px; color: white; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:07:19.500

这是一个开始，向我们展示您至少可以从该列表中检查更多数字：

```
div#header {background-color: green; text-align: center;}
#header li { display: inline-block; }
#header li a { width:300px; display: block; text-align: center; background-color: red;} 
```

顺便说一句，为什么不只是谷歌一个水平导航栏并复制它呢？

# bash - 可以在 bash 脚本中使用 httpclient 吗？对于基于会话的 HTTP GET 和 POST

> ID：11521721
> 
> 赞同：2
> 
> 时间：2012-07-17T11:39:19.840
> 
> 标签：bash, http, cookies, httpclient

我想自动登录网站并下载文件。由于它是基于会话的，我必须从 html 内部发送一个令牌，并将登录凭据作为 POST，我想知道在 bashscript 中是否有解决方案？！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:57:23.850

[`curl`](http://curl.haxx.se/docs/manpage.html)可能是您问题的答案。它支持从文件保存和加载cookies。

该`--cookie-jar <file>`选项导致 curl 在请求后将 cookie 转储到给定文件。

并且该`--cookie <file>`选项会导致 curl 在请求之前从给定文件加载 cookie。

所以你可以像这样使用这些选项：

```
curl --cookie cookies.txt --cookie-jar cookies.txt http://www.example.com/ 
```

可以通过多种方式发布，但 --data-urlencode 选项更容易：

```
curl --data-urlencode "username=john.doe" --data-urlencode "password=dummy" --cookie [...] http://www.example.com/ 
```

# php - php中return、break和continue关键字的Perl等价物是什么？

> ID：11521726
> 
> 赞同：-2
> 
> 时间：2012-07-17T11:39:33.703
> 
> 标签：php, perl

使用此代码时出现此错误

```
if($DirEnt == "." || $DirEnt == "..") continue;

if($DirEnt == "default" && $ignore_default) continue; 
```

错误：-

```
syntax error at test.pl line 35, near ")  continue"

syntax error at test.pl line 38, near ") continue" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T12:17:09.797

它们是：[`return`](http://perldoc.perl.org/functions/return.html)、[`last`](http://perldoc.perl.org/functions/last.html)和[`next`](http://perldoc.perl.org/functions/next.html)。

他们可以这样做：

```
next if $DirEnt =~ /^[.]{1,2}$/;
last if $DirEnt eq 'LastEntry!!'; 
```

为了完整起见

*   还有一种方法可以重新开始循环：[`redo`](http://perldoc.perl.org/functions/redo.html).
*   所有这些都带有标签：

    ```
    OUTER: while ( <$in1> ) { 
        ...
        while ( <$in2> ) { 
            ....
            redo OUTER if i_feel_like_it( $_ );
        }
    } 
    ```

*   最后，[`continue`](http://perldoc.perl.org/functions/continue.html)它不像在 C/Java 家族中那样工作。它用于

    1.  在循环的迭代之间进行簿记，这是一个 continue*块*（请参阅链接）。
    2.  在最近的 switch 结构中切换到下一个匹配的情况，称为 given-when 块。Perl switch 块中的所有条件块都类似于`case`以 a 结尾的 C- 块`break`——除了带有 a 的块`continue`，它允许 switch 找到它匹配的*其他情况*（它不只是像在 C 和 Java 中那样丢弃）。

对于所有这些和各种排列，请参阅[`perldoc perlsyn`](http://perldoc.perl.org/perlsyn.html)。[perldoc.perl.org](http://perldoc.perl.org/)是学习这些东西的更好地方，而不是 Stackoverflow。

# linux - Bash 脚本 cd 问题

> ID：11521729
> 
> 赞同：-1
> 
> 时间：2012-07-17T11:40:09.900
> 
> 标签：linux, macos, bash, unix

大家好，我的脚本有一些问题。我读过从脚本中更改当前目录有点问题。基本上我正在寻找一个带有项目文件夹和其中任何子文件夹的单个 php 文件。我想将目录更改为该文件夹所在的位置并为其执行命令。到目前为止还没有运气。

```
function findPHP(){
declare -a FILES
FILES=$(find ./ -name \*.php)
for file in "${FILES[@]}"
do

DIR=`dirname file`
( cd $DIR && doSomethingInThisDir &(...))

done 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:04:58.927

`FILES`您正在尝试作为数组进行迭代，但它只有一个元素。为了将您的子shell的结果变成一个数组，您可以：

```
FILES=($(find ./ -name \*.php)) 
```

请注意，它将文件名拆分为空格，因此即使您在下面正确引用，它也无济于事。或者，您可以让它在下面拆分（即使用您现有的`FILES`）并改用：

```
for file in $FILES 
```

如果您正在使用`bash 4`，您可能想看看递归通配符......这会使它更容易一些：

```
for file in **/*.php 
```

请注意，您必须`globstar`设置 shell 选项，您可以使用`shopt -s globstar`. 这种方式更简单，不会在空白处中断。

此外，您可能想要`$file`这里：

```
DIR=`dirname $file` 
```

或者只是使用参数扩展：

```
DIR=${file%/*} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:25:09.250

没有理由使用数组，或者无论如何存储文件列表。如果你的`find`支持`-execdir`（例如 gnufi​​nd 4.2.27），然后使用它。否则，像您所做的那样在子shell中 cd ：

```
#!/bin/bash
doSomethingInThisDir() ( cd $(dirname $1); ... )
export -f doSomethingInThisDir
find . -type f -exec bash -c 'doSomethingInThisDir {}' \; 
```

我已经使用`()`而不是定义了函数`{}`，但在这种情况下这不是必需的。通常， using`()`会导致函数在子 shell 中运行，但无论如何都会发生这种情况，因为 find 为每个文件运行一个单独的进程。

# android - android如何通过显示进度对话框等待其他线程的结果

> ID：11521733
> 
> 赞同：0
> 
> 时间：2012-07-17T11:40:23.737
> 
> 标签：android, multithreading

有人可以告诉线程和AsynTask之间的区别吗~我不得不这样的事情：

```
class A{

  int nTmp;
  ClassB BTmp = new ClassB();
  ClassC CTmp = new ClassC();

//I want to put the next two lines into a separate thread, because they will consume so much time
//and I want to display a ProgressDialog when do this two lines

   Method1(nTmp, BTmp);
   CTmp = Method2();

   if(Method2(CTmp)){
      return true;
   }
   return false;
} 
```

这是我的问题：

1.  如果我使用新线程，我无法将属于 A 类的 [nTmp] 和 [BTmp] 传递给单独的线程。
2.  因为我想使用这两行的结果，所以当它必须显示进度对话框时，我必须在 UI 线程中等待结果 [CTmp]。
3.  我尝试了AsynTask，但仍然存在问题2。

我发现对我来说重点是**如何通过显示 progressdialog 来等待其他线程的结果**。有班级可以做那件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:52:49.923

您不应该等待其他任务 B 完成，而是任务 B 应该告诉任务 A 它已完成。根据您的方法的用途，您还可以使用其他功能来启动后台处理，例如 IntentService。AsyncTask 很可能会为您提供最好的服务。

# wcf - 将大型 JSON 发布到我的 WCF 服务返回错误请求？

> ID：11521736
> 
> 赞同：4
> 
> 时间：2012-07-17T11:40:32.257
> 
> 标签：wcf

我有一个接受 JSON 字符串实体的 WCF 服务，这是方法：

**更新：我解决了这个问题，因为这与 WCF 服务无关，而是与我使用的 GSON 格式有关，因为它没有格式化像“ù”这样的特殊字符，并且服务器拒绝接受这个字符。**

```
 <WebInvoke(UriTemplate:="UpdateUser", ResponseFormat:=WebMessageFormat.Json, RequestFormat:=WebMessageFormat.Json, Method:="POST", BodyStyle:=WebMessageBodyStyle.WrappedRequest)> _
Public Function UpdateUser(user As String) As Stream Implements IService1.UpdateUser

End Function 
```

如果我尝试通过 JAVA HttpClient 使用下面的代码和短 JSON 字符串发布 JSON 字符串，则一切正常，但如果 JSON 字符串的大小更大，则 IIS 7.5 响应为：

**-MODULE_SET_RESPONSE_ERROR_STATUS ModuleName ManagedPipelineHandler Notification 128 HttpStatus 400 HttpReason Bad Request HttpSubStatus 0 ErrorCode 0 ConfigExceptionInfo Notification EXECUTE_REQUEST_HANDLER ErrorCode Operazione completata。(0x0)**

我已经尝试在 Web.Config 中使用 MaxReceivedMessageSize 和其他大小设置，但没有成功。

这是我的 Web.Config 文件

```
 <services>
  <service name="WBVoice4Facebook.Service1" behaviorConfiguration="ServiceBehaviour">
    <endpoint address="" binding="webHttpBinding" bindingConfiguration="StreamedRequestWebBinding" contract="WBVoice4Facebook.IService1" behaviorConfiguration="web">
    </endpoint>
  </service>
 </services>

<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
      <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <dataContractSerializer maxItemsInObjectGraph="2147483646" />
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors>

<bindings>
  <netMsmqBinding>
    <binding name="NewBinding0">
      <security>
        <transport msmqAuthenticationMode="None" msmqProtectionLevel="None" />
      </security>
    </binding>
  </netMsmqBinding>
  <webHttpBinding>
    <binding name="StreamedRequestWebBinding" 
             openTimeout="10:15:00" 
             receiveTimeout="10:15:00" 
             sendTimeout="10:15:00" 
             bypassProxyOnLocal="true" 
             hostNameComparisonMode="WeakWildcard"
             maxBufferSize="2147483647" 
             maxBufferPoolSize="2147483647" 
             maxReceivedMessageSize="2147483647" 
             transferMode="Streamed" 
             useDefaultWebProxy="false">
      <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="InheritedFromHost" />
      </security>
    </binding>
  </webHttpBinding>
</bindings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:56:23.620

asp.net 运行时也有限制。更多信息[在这里](http://msdn.microsoft.com/en-us/library/e1f13641%28v=VS.100%29.aspx)

# windows - 由于“collect2：ld 返回 1 个退出状态”，无法运行编译代码。错误

> ID：11521738
> 
> 赞同：0
> 
> 时间：2012-07-17T11:40:41.010
> 
> 标签：windows, qt, phonon

在编译输出部分构建代码后，会显示此错误。

```
C:\Qt\2009.04\mingw\bin\..\lib\gcc\mingw32\3.4.5\..\..\..\..\mingw32\bin\ld.exe: cannot find -lphonond
collect2: ld returned 1 exit status.
mingw32-make[1]: *** [debug\addressbook.exe] Error 1
mingw32-make: *** [debug] Error 2
Exited with code 2.
Error while building project addressbook
When executing build step 'Make' 
```

不管我正在构建什么代码，我都会得到这个通用的。我正在使用 Windows 7 和 Qt 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:52:41.033

如果您想要的不仅仅是传递帮助，您需要提供更多详细信息。makefile 的相关部分将是一个好的开始。

找出`libphonond`存储位置并将路径传递给链接器，`-L`如果路径不存在。

可能是这样的：

*   该库未安装。如果您从源代码构建 Qt，`libphonond`则可能不是默认构建的一部分。
*   该库未配置为在生成文件中正确链接
*   您没有构建所有调试库

反正有地方开始...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:54:55.723

来自[http://www.qtcentre.org/wiki/index.php?title=Building_the_Phonon_backend_plugin_on_Windows_using_MinGW](http://www.qtcentre.org/wiki/index.php?title=Building_the_Phonon_backend_plugin_on_Windows_using_MinGW)：

> 这篇文章 [*使用 MinGW 在 Windows 上构建 Phonon 后端插件*] 自 4.6 版起已过时。Qt 现在默认支持声子。

查看您的构建路径，您的版本似乎早于 4.6（发布于 2009 年 12 月 1 日，而您拥有的 Qt 是 2009.04 年 4 月）。

换句话说：获取更新版本的 Qt。

# extjs - 无法从 ExtJS 4.1 中的面板拖动可拖动 DIV

> ID：11521743
> 
> 赞同：0
> 
> 时间：2012-07-17T11:40:55.167
> 
> 标签：extjs, drag-and-drop

我用 ExtJS 拖放创建了一些简单的例子，它可以[在这里找到](http://jsfiddle.net/Rqqkc/2/)。还有一些问题 - 我无法从侧面板（或区域）拖动可拖动的 div - 可拖动的 div 停留在中心区域下方。这是 Ext 中的错误还是我的代码中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:22:43.593

我已经以黑客的方式完成了。看起来像[这样](http://jsfiddle.net/Rqqkc/4/)

简而言之，我将元素附加到文档`body`标签 - 并且拖动的元素显示得很好。

# android - GalleryView 项目更改侦听器

> ID：11521745
> 
> 赞同：2
> 
> 时间：2012-07-17T11:41:14.457
> 
> 标签：android, galleryview

我想检测画廊视图幻灯片到 Android 中的下一个项目，例如如果画廊视图当前索引为 0，如果将画廊视图滑动到下一个图像我想在 android 中的滑动事件上检测此事件项目更改侦听器！我不知道这个概念请帮助我任何人谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T09:44:29.560

我找到了我的答案。使用 `setOnItemSelectedListener`滑动或按键很容易找到当前关注的项目：

```
g.setOnItemSelectedListener( new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> arg0, View arg1, int pos, long arg3) {
        Log.v("Changed----->", ""+pos);
        change_position=pos;
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:47:40.850

为此，您需要创建自定义图库并覆盖 GestureDetector 类的 onFling() 方法。在这种方法中，您可以轻松检测到您的视图滑动方向。

# javascript - CSS Sprites 在页面的 HTML 中工作，但不是在 Javascript 中？

> ID：11521748
> 
> 赞同：0
> 
> 时间：2012-07-17T11:41:32.553
> 
> 标签：javascript, css, sprite

CSS Sprites 在页面的 HTML 中工作，但不是在 Javascript 中？

我正在尝试安装[http://www.spyka.net/scripts/javascript/easy-social-bookmarks](http://www.spyka.net/scripts/javascript/easy-social-bookmarks)并添加 CSS Sprites 以最小化服务器调用。

我创建了这样的样式表：

```
<style type="text/css">
<!--
.i_blinklist
{
width:21px;
height:21px;
background-repeat: no-repeat;
background-image: url(img_socialsprites.jpg);
background-position: 0 0;
}
.i_blogmarks
//-->
</style> 
```

此代码在页面的 HTML 中工作，如下所示：

```
<div class=i_blinklist></div> 
```

当我像这样将它添加到javascript时，它不起作用：

```
sites[0] = new Array('http://blinklist.com/index.php?Action=Blink/addblink.php&Url={url}', 'Blinklist',  '<div class=i_blinklist></div>'); 
```

这是脚本的主要工作方式，也可能会影响它：

```
function swgbookmarks()
{
    for(i = 0; i < sites.length; i++)
    {
        var g = sites[i];
        var u = g[0];
        u = u.replace('{url}', escape(window.location.href));
        u = u.replace('{title}', escape(window.document.title));
        var img = (imagepath == '0') ? '' : '<img src="'+g[2]+'" alt="'+g[1]+'" />&nbsp; ';
        var k = '<a href="'+u+'">'+img+g[1]+'</a>&nbsp;';
        window.document.write(html_before+k+html_after);                
    }
} 
```

非常感谢任何想法或帮助。

谢谢你。

更新：

我一直在玩这个，终于让它工作了:o)

这是我所做的更改。

社交书签和图片 JS 代码：

```
sites[0] = new Array('http://blinklist.com/index.php?Action=Blink/addblink.php&Url={url}', 'Blinklist',  'socialsprite social blinklist'); 
```

这是脚本基础的 JS 代码：

```
function swgbookmarks()
{
    for(i = 0; i < sites.length; i++)
    {
        var g = sites[i];
        var u = g[0];
        u = u.replace('{url}', escape(window.location.href));
        u = u.replace('{title}', escape(window.document.title));
        var img = (imagepath == '0') ? '' : '<img src="transparent1x1.gif" class="'+g[2]+'" alt="'+g[1]+'" />&nbsp; ';
        var k = '<a href="'+u+'">'+img+g[1]+'</a>&nbsp;';
        window.document.write(html_before+k+html_after);                
    }
} 
```

这是 CSS 样式表代码：

```
<style type="text/css">
<!--
.socialsprite {background:url(img_socialsprites.jpg);}
    .social {height:22px;}
    .social {width:22px;}

        /* Social Images */
.blinklist {background-position:0px 0px;}
.blogmarks {background-position:0px -22px;} 
```

这似乎奏效了。

* * *

我现在有这个工作。

请参阅底部的主要帖子更新。

我在那里写了更新，因为该网站不会让我在几个小时内发布我自己的答案，而且我不想浪费任何人的时间。

感谢您的建设性意见，他们帮助了很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:44:40.790

查看生成的 HTML。看起来您在类名周围缺少一些引号：

```
sites[0] = new Array('http://blinklist.com/index.php?Action=Blink/addblink.php&Url={url}', 'Blinklist',  '<div class=i_blinklist></div>'); 
```

**应该**

```
sites[0] = new Array('http://blinklist.com/index.php?Action=Blink/addblink.php&Url={url}', 'Blinklist',  '<div class="i_blinklist"></div>'); 
```

* * *

****编辑**** 另外，将变量“k”记录到控制台“ ***console.log(k)*** ”并验证 html。它生成以下内容，这也是不正确的。请注意，您的***img src***等于 div 而不是实际路径：

```
<a href="http://blinklist.com/index.php?Action=Blink/addblink.php&Url=http%3A//fiddle.jshell.net/_display/"><img src="<div class="i_blinklist"></div>" alt="Blinklist" />&nbsp; Blinklist</a>&nbsp; 
```

据我所知，你应该使用类似的东西：

```
 var k = '<a href="'+u+'">'+img+g[1]+'</a>&nbsp;'; 
```

随着生成：

```
<a href="..."><div class="i_blinklist"></div>&nbsp; Blinklist</a>&nbsp; 
```

最后一点是，您应该在锚标记内使用**跨度**而不是**div 。**同样，这不是有效的 HTML。有关更多信息，请参阅[https://stackoverflow.com/a/1828032/1220302](https://stackoverflow.com/a/1828032/1220302)。

# java - 服务结束后通知消失

> ID：11521752
> 
> 赞同：8
> 
> 时间：2012-07-17T11:41:47.983
> 
> 标签：java, android, notifications

我有一项服务可以抓取网站的数据，然后在必要时向用户发出通知。

我遇到的问题是，一旦服务关闭（可能是立即的）通知就会消失。以下代码是应用程序具有的所有通知代码。我没有输入任何代码来取消通知。

```
public static void CreateNotificationCompat(int notificationID, String link, String title, String text, Context ctx)
{
    Intent notificationIntent = new Intent("android.intent.action.VIEW", Uri.parse(link));
    PendingIntent contentIntent = PendingIntent.getActivity(ctx.getApplicationContext(), 0, notificationIntent, 0);

    NotificationManager nm = (NotificationManager) ctx
            .getSystemService(Context.NOTIFICATION_SERVICE);

    NotificationCompat.Builder builder = new NotificationCompat.Builder(ctx);
    Resources res = ctx.getResources();

    builder.setContentIntent(contentIntent)
                .setSmallIcon(R.drawable.notify_icon)
                .setWhen(System.currentTimeMillis())
                .setContentTitle(title)
                .setContentText(text)
                .setAutoCancel(false);

    Notification n = builder.getNotification();

    nm.notify(notificationID, n);
} 
```

如果它有任何区别（很确定它没有），我在这里使用应用程序上下文。

我的服务会定期启动，处理网站，在需要时通知，然后关闭。

在我的服务结束时，我不只是调用 stopSelf()，而是休眠 30 秒左右，然后调用 stopSelf()。然后通知会停留 30 秒，然后消失。通知消失时，logcat 中没有任何相关内容出现。

到目前为止，我只能使用 ICS 进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T20:38:46.207

您发布的代码有效。我从 jb 上的活动和服务中对其进行了测试，并且当组件停止时通知仍然存在。我什至证实我可以终止进程并且通知仍然存在。尝试剥离应用程序，看看问题是否仍然存在。具体检查以查看您没有错误地在通知上调用取消。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:48:32.203

您似乎忘记先查看开发人员手册。请参阅此处[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)并查找 FLAG_ONGOING_EVENT 和 FLAG_NO_CLEAR 标志。

> 到目前为止，我只能使用 ICS 进行测试。

这就是模拟器非常有用的原因。试试看。它是 SDK 的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T03:51:19.910

请在同一设备上尝试旧方法，并告诉我们它的行为是否相同：

```
private static void CreateNotificationCompat(int notificationID, String link, String title, String text, Context ctx) {
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) ctx.getSystemService(ns);
    Notification notification = new Notification(R.drawable.notify_icon, title, System.currentTimeMillis());
    notification.flags = Notification.FLAG_AUTO_CANCEL;
    PendingIntent contentIntent;
    Bundle bundle = new Bundle();
    Intent notificationIntent = new Intent("android.intent.action.VIEW", Uri.parse(link));
    contentIntent = PendingIntent.getActivity(ctx, notificationID,
                notificationIntent, 0);
    notification.setLatestEventInfo(ctx, title, text,
            contentIntent);
    mNotificationManager.notify(notificationID, notification);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-06T09:16:14.980

请注意，当使用 startForeground() 然后调用 stopSelf() 时会发生此行为。

# github - GitHub Wiki 上的语法突出显示拒绝工作

> ID：11521756
> 
> 赞同：2
> 
> 时间：2012-07-17T11:42:01.663
> 
> 标签：github, pygments, gollum-wiki

这让我发疯了。

语法突出显示不适用于 GitHub 项目中的单个 Wiki 页面。

以这个页面为例：[https ://github.com/oscar-broman/PAWN-Boilerplate/wiki/Built-in-modules](https://github.com/oscar-broman/PAWN-Boilerplate/wiki/Built-in-modules)

这是它的来源：[https ://gist.github.com/3128950](https://gist.github.com/3128950)

哦，太好了，语法高亮甚至在那里也有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:26:37.417

似乎原因是我放在`C++`某些地方，只有`c++`被 Wiki 接受。如果一个地方有大写 C，则不会突出显示。

# windows - 定期下载文件

> ID：11521760
> 
> 赞同：0
> 
> 时间：2012-07-17T11:42:13.113
> 
> 标签：windows, haskell, windows-7, chromium

为了帮助我学习Haskell，我想写一个脚本，用于每两天自动下载最新的[chromium mini_installer.exe并安装它。](http://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html)有什么建议么？我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:45:11.273

您可以使用其中一个 URL 获取库。一个例子是[下载卷曲](http://hackage.haskell.org/package/download-curl-0.1.4)。

然后它很简单：

```
import qualified Data.ByteString as B
import Network.Curl.Download

main = do
   bs <- openURI "http://example.com/example.txt"
   case bs of
      Left err -> error err
      Right d  -> B.writeFile "mydata" d 
```

要实现类似于“cron”的 2 天休眠行为，您可以使用您的操作系统服务，或者实现休眠机制。

# twitter-bootstrap - 引导滚动间谍不起作用

> ID：11521763
> 
> 赞同：5
> 
> 时间：2012-07-17T11:42:19.677
> 
> 标签：twitter-bootstrap, twitter-bootstrap-2

这是我面临的问题。

[http://bittu.github.com/folderGrid/](http://bittu.github.com/folderGrid/)

它首先突出显示最后一个选项卡，并且在滚动时它在滚动的每一步仅在两个标签之间切换。

这是我使用的一小段代码。

```
<body data-spy="scroll" data-target=".subnav" data-offset="50">

<div class="subnav">
    <ul class="nav nav-pills">
        <li><a href="#contents">Contents</a></li>
        <li><a href="#config">Config Options</a></li>
        <li><a href="#usage">Usage</a></li>
        <li><a href="#examples">Examples</a></li>
    </ul>
</div>

<div class="row">
    <div class="span12">
        <section id="contents">
            ....
        </section>
        <section id="config">
            ....
        </section>
        <section id="usage">
            ....
        </section>
        <section id="examples">
            ....
       </section>
    </div>
</div> 
```

包括所有必要的文件。并尝试了所有数字`data-offset`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:44:10.903

几个小时前我也遇到了这个问题。我以与您相同的方式使用它（窥探`body`并`section`用作目标）。最后，我发现我只是错过了`<!DOCTYPE html>`文件开头的 ，尽管我检查了您的演示站点并且已经有一个 html5 声明。

顺便说一句，我切换到引导 v2.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:14:00.223

Twitter 的引导程序没有定义`subnav`类。它在 Twitter 的 Bootstrap 页面中提供，但要重用它，您必须包含他们的[CSS](http://twitter.github.com/bootstrap/assets/css/docs.css)中的一些代码。它是专门为这个特定页面设计的。Subnav 在滚动时固定位置，要查看它是如何工作的，请查看 CSS 和[JS](http://twitter.github.com/bootstrap/assets/js/application.js)。

# url - 对应于 Tcode 的动态 URL

> ID：11521764
> 
> 赞同：-1
> 
> 时间：2012-07-17T11:42:26.953
> 
> 标签：url, sap-gui, sap-bsp

我想在提供 Tcode 时动态创建 URL。导入 Tcode 时，是否有任何功能模块或类来导出 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:08:07.547

WEBGUI 是 SAP GUI for HTML 的服务。当我们执行该服务时，URL 将是

**[http://hostname:portno/sap/bc/gui/sap/its/webgui](http://hostname:portno/sap/bc/gui/sap/its/webgui)**

我们必须连接**~transaction=tcode**。然后该 URL 可用于在 SAP GUI for HTML 中打开 Tcode。

# linux - 如何在 Rcpp 的代码中放置`library (RgoogleMaps)`？

> ID：11521768
> 
> 赞同：0
> 
> 时间：2012-07-17T11:42:41.397
> 
> 标签：linux, r, rcpp

```
#include "rtest.h"
#include <iostream>

SEXP rcpp_hello_world ()
{
    using namespace Rcpp ;
    CharacterVector x = CharacterVector::create( "foo", "bar" );
    NumericVector y   = NumericVector::create( 0.0, 1.0 );
    List z                   = List::create (x, y);

    return z;
}

void funcA ()
{
    std :: cout << "\nsdfsdfsdf\n";
}

int main () {return 0;} 
```

**如何放置上面
`library(RgoogleMaps)`
的
`png (filename="Rg.png", width=480, height=480)`
代码？**

我将其运行为：`R CMD SHLIB rtest.cpp`

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
> 
```

`Rcpp`的版本是`0.9.13`

**我试过：**
`R CMD SHLIB -lRgoogleMaps rtest.cpp`

结果是：

```
anisha@linux-y3pi:~/> R CMD SHLIB -lRgoogleMaps rtest.cpp

g++ -I/usr/lib64/R/include -DNDEBUG  -I/usr/local/include   -I/usr/lib64/R/library/Rcpp/include -fpic  -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables  -c rtest.cpp -o rtest.o
g++ -shared -L/usr/local/lib64 -o rtest.so rtest.o -lRgoogleMaps -L/usr/lib64/R/lib -lR
/usr/lib64/gcc/x86_64-suse-linux/4.5/../../../../x86_64-suse-linux/bin/ld: cannot find -lRgoogleMaps
collect2: ld returned 1 exit status
make: *** [rtest.so] Error 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T11:57:30.940

我认为你在什么之间有一点概念上的问题

```
 library(RgoogleMaps) 
```

在 R 中做了什么，以及库对于编译器来说是什么

```
 -lfoo -Lpath/to/library 
```

尽管我们在这两种情况下都使用了英文名词“library”，但两者并不相同。

您可能需要稍微复习一下有关编程、编译器、链接器等方面的内容...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T11:58:53.303

你为什么想做这个？**Rcpp**设计用于在 R 会话中连接 C++ 代码，以便您可以利用更快的计算或重用现有的 C++ 库。

编写一个调用 Rcpp 代码的 R 包装器，让该包装器安排使包可用（使用`require(RgoogleMaps)`）。

其次，您不想对绘图设备进行硬编码。同样，您可以在 R 中执行此操作：

```
png(filename="Rg.png", width=480, height=480)
##
## call Rcpp function
## in here
dev.off() 
```

Rcpp 不适合编写独立的 C++ 应用程序，您仍然希望通过 R 会话与它进行交互。

# java - 如何从 .t xt 文件（android）获取输入流？

> ID：11521769
> 
> 赞同：-1
> 
> 时间：2012-07-17T11:42:42.037
> 
> 标签：java, android, fileinputstream

我想将我的 .txt 文件中的数据读入 android 中的 ReaderClass，字段由“;”分隔

----这是我上一篇文章的解决方案：

```
public void cut()
  {
  try{    

  InputStream input =context.getResources().openRawResource(R.raw.textfile);
  BufferedReader br = null;
  br=new BufferedReader(new InputStreamReader(input,"iso-8859-1"));
  String line = null; 

  while ((line = br.readLine()) != null)   {        

      String[] decoupage= line.split(";");

      String titre=decoupage[0];
      String description=decoupage[1];
      String reponse=decoupage[2];
      String explication=decoupage[3];
      String categorie=decoupage[4];
      String etat=decoupage[5];       

                    //test Logcat

            Log.d("information ", " buffer");
        Log.i("titre : ",titre);
        Log.i("description : ",description);
        Log.i("reponse : ",reponse);
        Log.i("explication : ",explication);
        Log.i("categorie : ",categorie);
        Log.i("etat : ",etat);

      }
  in.close();

    }catch (Exception e){
  System.err.println("Error: " + e.getMessage());
  System.err.println("\n File not found");
  }
  //end
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:47:53.143

```
FileInputStream fis;
fis = openFileInput("sample.txt");
StringBuffer Content = new StringBuffer("");

byte[] buffer = new byte[1024];
int length;
while ((length = fis.read(buffer)) != -1) {
    Content.append(new String(buffer));
}

you will get entire content in a string buffer ,convert it into string, then you can apply yourString.split(";") to get all values which you can keep in some array. 
```

# python - 如何在 python 控制台中实现 bash 的竖线操作符？

> ID：11521770
> 
> 赞同：2
> 
> 时间：2012-07-17T11:42:47.163
> 
> 标签：python, bash, console

我希望我能像这样写

```
>>> print many_lines_message | tail -1 
```

在python控制台中，该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T11:43:33.847

```
print many_lines_message.splitlines()[-1] 
```

如果你想模拟`head`和`tail`/或`grep`命令，使用切片和/或列表推导很容易。

如果您想做一些不同的事情，请给我们更多示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:57:06.900

如果您真的想将任意 Python 表达式的输出传递给外部命令，则需要启动一个进程并使用管道。在 bash 中，管道是拼写`|`的，在 Python 中，[子进程](http://docs.python.org/library/subprocess.html)模块可以帮助您。但是，如果您只需要给出的示例，那么 eumiro 和 Jon Clements 的答案就是您所需要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T13:20:08.187

我在摆弄@eumiro 的解决方案，因为我认为它可能太慢了，而 tail 可以更有效。实际上，它要慢得多，但仍然不是很重要。虽然`tail -1`消耗这个时间：

```
$ seq 1 10000000 > f
$ time tail -1 f
10000000

real    0m0.003s
user    0m0.000s
sys 0m0.000s 
```

Python 版本消耗的时间多达 200 倍：

```
>>> #message = "\n".join(str(i) for i in range(0, 10000000))
>>> %timeit message.splitlines()[-1]
1 loops, best of 3: 679 ms per loop 
```

当然，这无关紧要：您甚至看不到花了多少时间，因为半秒几乎无法察觉。总而言之，eumiro的解决方案就是*解决*方案。

但是，对于某些文件（例如大日志）来说，它可能会变得太慢，因此更快的 Python 解决方案可能会有所帮助：

```
>>> %timeit message.rsplit('\n', 1)[-1]
10 loops, best of 3: 50.7 ms per loop 
```

在这种情况下，我使用[`rsplit()`](http://docs.python.org/library/stdtypes.html#str.rsplit)，它将每个`'\n'`字符处的字符串从末尾到开头精确地拆分一次。也就是说，它将字符串拆分为两个字符串，一个包含除最后一行之外的所有消息，另一个包含最后一行本身。然后，我得到`-1`索引的最后一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T11:53:33.397

获取可迭代的最后一个元素的一种方法是使用`deque`：

```
from collections import deque
last_item = deque(your_message, maxsize=1)[0] 
```

# verilog - 如何在 Verilog 中将长语句分成几行

> ID：11521775
> 
> 赞同：9
> 
> 时间：2012-07-17T11:42:56.527
> 
> 标签：verilog

例如，我有一个很长的声明：

```
 $display("input_data: %x, 
              output_data: %x,
              result: %x",
              input_data,
              output_data,
              result); 
```

如何在 Verilog 中将其变为单个语句和多行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T13:07:16.663

您需要分解带引号的字符串。这是一种方法：

```
module tb;

initial begin
    integer input_data  = 1;
    integer output_data = 0;
    integer result      = 55;
    $display("input_data: %x "  , input_data,
             "output_data: %x " , output_data,
             "result: %x "      , result);
end

endmodule 
```

输出：

```
input_data: 00000001 output_data: 00000000 result: 00000037 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-20T15:26:37.240

更一般地，您还可以使用字符串连接运算符：

{“字符串 1”、“字符串 2”、“字符串 3”}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-19T11:20:28.983

来自[http://www.asic-world.com/systemverilog/literal_values4.html](http://www.asic-world.com/systemverilog/literal_values4.html)

```
string  a;
a = "This is multi line comment \
     and this is second line";

/*

Outputs:

a = This is multi line comment^M
        and this is second line

*/ 
```

//您将拥有 ^M 这是换行符的 dos 字符。如果你想避免这种情况，那么应该使用下一个解决方案

```
string tmg ={" \n"                                               ,
    "//periodic signal intf.KEYCONTROL_CLK \n"         ,
    "fork\n"                                           ,
    "   begin\n"                                       ,
    "     the_clock = 0;\n"                            ,
    "     forever begin\n"                             ,
    "       if(the_clock == 0)\n"                      ,
    "          #(5000000/2 * 1ps);\n"                  ,
    "       else\n"                                    ,
    "          #((5000000-5000000/2) * 1ps);\n"        ,
    "       the_clock=~the_clock;\n"                   ,
    "     end\n"                                       ,
    "   end\n"                                         ,
    "join_none\n"};

    `uvm_info("record_key_control_map_and_record", $sformatf("Start recording of interface if_record_key_control"), UVM_DEBUG);
    $fdisplay ( mcd0,tmg); 
```

# android - 自定义设备上的 android 操作系统升级

> ID：11521777
> 
> 赞同：0
> 
> 时间：2012-07-17T11:43:03.017
> 
> 标签：android, upgrade

我不确定这是发布此查询的正确平台。

我的要求：我有一个移植了 ICS android 的自定义设备。未来版本需要软件升级支持。这是我从未尝试过的东西，或者说不知道。

它是如何在标准设备中完成的？说市场上有什么商用电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:03:27.590

如果“软件更新”是指固件，我相信你必须在定制硬件上自己处理。也许（因为我从未检查过自己）您可以使用固件更新程序的现有代码（假设它是 AOSP 的一部分）作为起点。

# silverlight - Silverlight 中用于用户控件的滚动条

> ID：11521780
> 
> 赞同：0
> 
> 时间：2012-07-17T11:43:12.600
> 
> 标签：silverlight

我有一个这样定义的用户控件：

```
<UserControl
x:Class="Client.UserControl1"
d:DesignWidth="640" d:DesignHeight="480" MinWidth="400" MinHeight="400"                 
    ScrollViewer.HorizontalScrollBarVisibility="Auto"
    ScrollViewer.VerticalScrollBarVisibility="Auto">

<Grid x:Name="LayoutRoot" Background="White">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="24"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <RichTextBox Margin="10" Grid.Row="1" HorizontalScrollBarVisibility="Auto">
        <Paragraph><Run Text="RichTextBox"/></Paragraph>
    </RichTextBox>
    <sdk:Label Margin="0" Height="24" HorizontalAlignment="Center"    
      Content="Message"/>
 </Grid>
 </UserControl> 
```

然后我在一个页面中使用这个控件，如下所示：

```
<navigation:Page 
Style="{StaticResource PageStyle}" ScrollViewer.HorizontalScrollBarVisibility="Auto" 
ScrollViewer.VerticalScrollBarVisibility="Auto">

<Grid x:Name="LayoutRoot" Background="Blue" 
 ScrollViewer.HorizontalScrollBarVisibility="Auto" 
 ScrollViewer.VerticalScrollBarVisibility="Auto">
    <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
            <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Client:UserControl1 Margin="10"/>
</Grid>
</navigation:Page> 
```

我希望用户控件填充页面。随着页面的扩展，用户控件也随之扩展。这工作正常。但是，我为用户控件指定了最小高度和宽度。如果页面小于此，我希望显示滚动条。但是，当我使页面小于最小尺寸时，不会出现滚动条。

我尝试将用户控件包装在滚动查看器中，但这并没有给我想要的行为。在这种情况下，包含的富文本框现在被完整地绘制，即它不再有任何自己的滚动条。我还是希望富文本框受页面大小的约束，即如果浏览器最大化，富文本框包含100s行文本，我仍然可以看到富文本框的边框，富文本框文本框将具有滚动条以允许查看其内容。当浏览器窗口小于控件的最小大小时，我想要用户控件的滚动条。

这可能吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:02:37.527

只需在页面上的“Client:UserControl1”周围包裹一个 ScrollViewer。

```
<ScrollViewer HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Auto">
  <<Client:UserControl1 Margin="10"/>
</ScrollViewer> 
```

同时删除对 ScrollViewer.Horizo​​ntalScrollBarVisibility 和 ScrollViewer.VerticalScrollBarVisibility 的所有其他引用。

干杯

# c# - 性能相关问题

> ID：11521782
> 
> 赞同：0
> 
> 时间：2012-07-17T11:43:20.867
> 
> 标签：c#, sql-server, asp.net-3.5

有以下场景：我正在开发一个基于电信的项目，该项目为提供的站点详细信息输入生成价格。

输入以 Excel 表格的形式传递，相应的输出显示在 gridview 中。

输出网格包含两个根据站点详细信息填充的下拉列表。这意味着gridview的每一行都有两个下拉列表，通过点击数据库填充

目前这个工具在 200 个站点上运行良好，但现在客户想要从 excel 表中传递 10,000 个站点作为输入。

访问 10,000 个站点的数据库将是一项非常繁琐的工作，并且会降低系统的性能。

我正在`asp.net 3.5`使用`C#`和数据库`sql server 2008`

有没有人有最好的方法来完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:48:43.050

可扩展性是您的关键。

您应该尽可能利用负载平衡，如果您可以使某些进程异步然后执行它 - 使用 ActiveMQ 或 RabbitMQ 之类的东西，这将停止 UI 挂起。

还可以考虑使用集群数据库服务器。

您的目标应该始终是尽快给用户反馈（异步反馈），保证工作处理（队列/消息系统），处理大量用户（负载平衡）。

代码优化还有很多要说的，看看你的代码，看看是否有任何地方你可以“修剪脂肪”来加快速度。

# javascript - 如何从backbone.js中的模型获取数组元素

> ID：11521788
> 
> 赞同：3
> 
> 时间：2012-07-17T11:43:56.187
> 
> 标签：javascript, jquery, backbone.js

我有以下代码：

```
Person = new Backbone.Model({
 data:[
    { age: "27" },
    {name: "alamin"}
]
}); 
```

现在，我怎样才能获得价值？

```
person=new Person();
person.get(?); 
```

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-29T16:00:08.360

如果您使用此模型：

```
Person = new Backbone.Model({

data:[
    { age: "27" },
    {name: "alamin"}
]

}); 
```

因此，如果您想显式地从模型中的数组中提取，您应该尝试以下操作：

```
i = new App.Model.Person();
i.fetch();
i.get("data")[0].age; 
```

这将返回：

```
27 
```

从那里您可以根据自己的喜好迭代数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:52:35.713

定义模型时我不知道数据属性-也许您的意思是默认值？如在

```
var Person = Backbone.Model.extend({
   defaults: {
      property1: value1,
      property2: value2,
      property3: ["arrval1", "arrval2", "arrval3"]
   }); 
```

[您将使用get](http://backbonejs.org/#Model-get)检索某些属性的值：myperson.get('property1')。要设置属性的值，请使用[set](http://backbonejs.org/#Model-set)： myperson.set('property1', 'newValueOfProperty')

如果属性是数组 myperson.get('property3')[ index ]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:48:11.223

将数组作为对象获取：

利用`person.get('data')`

要从数组中获取属性的值：

利用`person.get('data').name`

或者 `person.get('data')['name']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T22:36:35.837

获取数组特定元素的属性：

```
var people = person.get('data'); // This gets the array of people.
var individual = people[0];      // This gets the 0th element of the array.
var age = individual.age;        // This gets the age property.
var name = individual.name;      // This gets the name property. 
```

# android - 使用 Android 估计 WiFi 延迟

> ID：11521790
> 
> 赞同：1
> 
> 时间：2012-07-17T11:43:59.900
> 
> 标签：android, wifi, delay

我有一个简单而明确的问题：在使用 Android 设备收到来自接入点的确认信号后，是否可以一次发送一个数据包？信号的类型并不重要，只是传递到进程的总时间（在 ns 的分辨率内或我们适合我的应用程序）对我来说很重要，我对 Android 一无所知，但如果可以完成这样的任务关在Android，我会学习Android。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:50:01.583

您可以将 System.nanoTime() 值发送到另一台设备，然后减去...问题是如果 2 个设备的时间不完全相同，则该值将不是真实的...无论如何，您可以同步。两个设备都从固定的距离发送一个“测试包”，所以你可以根据测试包测量差异。

# google-maps - 特定 latlang 周围的地区

> ID：11521791
> 
> 赞同：0
> 
> 时间：2012-07-17T11:44:06.187
> 
> 标签：google-maps, latitude-longitude, google-places-api

我需要通过 Google Places 列出特定纬度和经度周围的地区列表。目前我正在打电话

[https://maps.googleapis.com/maps/api/place/search/json?location=12.96207210,77.71577370&radius=3700&types=political&sensor=false&key=API_KEY](https://maps.googleapis.com/maps/api/place/search/json?location=12.96207210,77.71577370&radius=3700&types=political&sensor=false&key=API_KEY)

但是，它只返回距离那个地方大约 3700 m 的地方。我需要输出中返回的所有位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:38:13.363

您似乎正在尝试检索您附近的所有位置结果，因为您正在`type`按 type 过滤您的请求`political`。

不幸的是，Google Places API 不是为此而设计的，每次请求区域识别时只会返回两个政治和位置结果。

如果您认为每次请求返回两个以上的政治或地区结果对 Google Places API 来说是一个有用的功能，您可以在[此处](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)提交“Places API - 功能请求” 。

# ruby - 跨约 10 个互连的 ruby /rails/capistrano/rabbitMQ 服务管理发布版本

> ID：11521792
> 
> 赞同：0
> 
> 时间：2012-07-17T11:44:10.680
> 
> 标签：ruby, web-services, version-control, architecture, service

所以我们正在构建一个包含大约 10 个服务的非常核心的应用程序——我们应该如何最好地管理应用程序版本之间的依赖关系？

我们决定将事物拆分为服务，每个服务负责一个小的逻辑任务*（词分析器只分析词，词服务允许其他服务获取有关词和特殊词的信息，分类器使用来自执行分类的世界分析器）*

独立的应用程序都有定义良好的接口——但有时这些会发生变化（例如，需要一个新字段）。

当它们发生变化时，我们需要跟踪现在存在依赖关系的事实：分析器的 0.2 版现在需要 o.6 版的 word 服务。

其他人如何做到这一点？什么有效，什么是屁股痛？我们希望能够快速且经常地发布。我们已经让詹金斯辛勤地运行所有的规格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:19:53.637

版本化您的协议并向后兼容。v 0.2 的分析器必须与新版本 0.6 的 word service**以及**现有部署的 v 0.5 的 word service 一起使用。解散永远是几个重叠版本的舞蹈。顺便说一句，接口*永远不会*改变。接口的新*版本*是发布的，客户端和实现者都必须能够区分正在使用的版本。您的服务必须优雅地降级为与其交互的协议的所有已部署版本。*如果*您可以确定不再部署，则可以停用不再部署的版本。如果服务/协议公开暴露，你应该保持向后兼容性**很多**更长。

[REST 设计手册](https://rads.stackoverflow.com/amzn/click/com/B00890OBFI)是关于这个主题的好读物。

# facebook - 来自 facebookexternalhit 机器人的过多流量

> ID：11521798
> 
> 赞同：18
> 
> 时间：2012-07-17T11:44:31.780
> 
> 标签：facebook, robot

有谁知道如何告诉“facebookexternalhit”机器人传播其流量？

我们的网站每 45 至 60 分钟受到一次冲击，峰值约为 每秒 400 个请求，来自 facebook 网络块的 20 到 30 个不同的 IP 地址。在尖峰之间，流量不会消失，但负载是可以接受的。当然，我们不想阻止机器人，但这些尖峰是有风险的。我们希望看到机器人随着时间的推移平均分配它的负载。并看到它的行为就像 Googlebot 和朋友一样。

我看过相关的错误报告（[第一个错误](http://developers.facebook.com/bugs/468422429851941)、[第二个错误](http://developers.facebook.com/bugs/409818929057013)和第三个错误 (#385275384858817)），但找不到任何关于如何管理负载的建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T19:25:11.887

根据其他答案，来自 Facebook 的半官方用词是“suck it”。让我感到困惑的是，他们[无法遵循 Crawl-delay](https://stackoverflow.com/questions/7716531/facebook-and-crawl-delay-in-robots-txt)（是的，我知道它不是“爬虫”，但是在几秒钟内获取 100 页是一种爬虫，无论你想怎么称呼它）。

由于无法吸引他们的狂妄自大，并且放弃他们的 IP 块非常严厉，因此这是我的技术解决方案。

在 PHP 中，为每个请求尽快执行以下代码。

```
define( 'FACEBOOK_REQUEST_THROTTLE', 2.0 ); // Number of seconds permitted between each hit from facebookexternalhit

if( !empty( $_SERVER['HTTP_USER_AGENT'] ) && strpos(  $_SERVER['HTTP_USER_AGENT'], 'facebookexternalhit' ) === 0 ) {
    $fbTmpFile = sys_get_temp_dir().'/facebookexternalhit.txt';
    if( $fh = fopen( $fbTmpFile, 'c+' ) ) {
        $lastTime = fread( $fh, 100 );
        $microTime = microtime( TRUE );
        // check current microtime with microtime of last access
        if( $microTime - $lastTime < FACEBOOK_REQUEST_THROTTLE ) {
            // bail if requests are coming too quickly with http 503 Service Unavailable
            header( $_SERVER["SERVER_PROTOCOL"].' 503' );
            die;
        } else {
            // write out the microsecond time of last access
            rewind( $fh );
            fwrite( $fh, $microTime );
        }
        fclose( $fh );
    } else {
        header( $_SERVER["SERVER_PROTOCOL"].' 429' );
        die;
    }
} 
```

您可以使用以下命令从命令行进行测试：

```
$ rm index.html*; wget -U "facebookexternalhit/1.0 (+http://www.facebook.com/externalhit_uatext.php)" http://www.foobar.com/; less index.html 
```

欢迎提出改进建议......我猜它们可能是一些并发问题，并且会引起巨大的轰动。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-06T13:07:28.533

我知道这是一个古老但没有答案的问题。我希望这个答案对某人有所帮助。

有一个名为 Open Graph 的标签`og:ttl`，可以让您减慢 Facebook 爬虫发出的请求：（[参考](https://developers.facebook.com/docs/sharing/best-practices#crawl)）

> **爬虫速率限制** 您可以标记页面和对象以更改 Facebook 的爬虫等待检查新内容的时间。`og:ttl`如果我们的爬虫过于激进，请使用object 属性来限制爬虫访问。

检查[对象属性](https://developers.facebook.com/docs/sharing/opengraph/object-properties)是否`og:ttl`表明每个共享的规范 URL 的默认 ttl 为 30 天。因此，如果您有大量的共享对象，那么设置这个 ttl 元标记只会减慢请求。

但是，如果 Facebook 的爬虫因为实际的实时流量（用户同时分享了很多你的故事）而接触到你，这当然行不通。

您有太多爬虫请求的另一种可能性是，您的故事没有使用正确的规范 url ( `og:url`) 标签共享。假设您的用户可以从多个不同的来源访问您网站上的某篇文章（实际上可以查看和分享同一篇文章，但他们看到的 URL 不同），如果您没有`og:url`为所有这些人设置相同的标签，Facebook 会认为这是一篇不同的文章，因此会随着时间的推移对所有这些文章生成爬虫请求，而不仅仅是对唯一的规范 URL。更多信息[在这里](https://developers.facebook.com/docs/sharing/webmasters)。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-08T14:34:24.653

我们在我们的网站/服务器上遇到了同样的问题。问题是`og:url metatag`. 删除它后，大多数 facebookexternalhit 调用的问题都得到了解决。

另一个问题是，我们在 og:image 标签中指定的一些图片不存在。因此，facebookexternhit scraper 会为每次调用 url 调用 url 上的每个图像。

# java - 使用 jsf 和页面重定向注销

> ID：11521799
> 
> 赞同：3
> 
> 时间：2012-07-17T11:44:34.457
> 
> 标签：java, jsf

我有带有注销按钮的页面，它使会话无效并重定向到登录页面。这很好用。但我还需要在超时后使会话无效。

在服务器端会话也无效，但是当服务器使会话无效时，页面也应该被重定向到登录页面。现在它适用于元标记：

```
<meta http-equiv="refresh" content="900; URL=/MyApplication-web/ibm_security_logout?logoutExitPage=/" /> 
```

这表示浏览器在 15 分钟（超时）后重定向到实际发生注销的 URL 地址。

我使用 JSF SessionBeans，用户使用一页抛出 ajax，15 分钟后使用一页浏览器将其重定向到注销页面。

如何将重定向到注销页面与服务器端超时注销同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:20:49.837

这可以使用自定义 Servlet 和 ajax 轮询来完成。每 N 秒使用 ajax 轮询 Servlet。在 servlet 中，您可以检查 http 会话是否是新的（在 HttpSession 接口中有这样的方法），如果会话是新的，则意味着前一个（工作会话）已超时。有[一篇文章](http://in.relation.to/Bloggers/ImplementingGracefulSessionTimeoutWithSeamJSFAndJQuery)描述了使用 Seam2 的解决方案 + 实现，但是您可以将其移植到任何框架。

# c - 802.11 数据包的大小

> ID：11521806
> 
> 赞同：-1
> 
> 时间：2012-07-17T11:45:22.833
> 
> 标签：c, pcap, libpcap, wifi

鉴于以下 pcap 回调的声明：

```
void my_callback(u_char *args, const struct pcap_pkthdr *header, const u_char *packet) 
```

如何确定数据包中存在的字节总数？我需要该值，以便可以将其传递给 crc32() 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:52:24.560

根据[此参考](http://www.ferrisxu.com/WinPcap/html/structpcap__pkthdr.html)，有关数据包大小的信息在`pcap_pkthdr`'s 结构中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T15:04:25.483

信息在`pcap_pkthdr`变量中。

给定您的回调，完整的数据包大小由下式给出

```
header->len 
```

并且捕获的数据包大小（如果您设置了一个碰巧小于实际数据包大小的 snaplen，它可能会更小）由下式给出

```
header->caplen 
```

# javascript - Sortabletable：在开始时标记几行

> ID：11521807
> 
> 赞同：0
> 
> 时间：2012-07-17T11:45:22.740
> 
> 标签：javascript, php, sorting

我正在使用这个[可排序的脚本](http://tablefilter.free.fr)。我需要在开始时标记几行 - 我发现这些属性 `...select_row_at_start: true, row_index_at_start: 3,...` 几乎可以满足我的需要，但我想再添加几行但我找不到方法。

# python - 在 python 中使用多个子目录进行运行时导入

> ID：11521810
> 
> 赞同：0
> 
> 时间：2012-07-17T11:45:38.707
> 
> 标签：python, import, python-2.7, subdirectory

在 python 中执行这种类型的导入的最佳方法是什么

要导入的文件位于位置 one/ne_one/one_two/"

文件名：两个.py

```
def foo():
    print "venkatttt!" 
```

主文件：main.py

```
s = __import__("one.one_one.one_two.two", fromlist=[])
function_class =  getattr(s,"one_one")
function_class1 =  getattr(function_class,"one_two")
function_class2 =  getattr(function_class1,"two")
print s
print function_class
print function_class1
print function_class2
function_class2.foo() 
```

此代码的输出：

```
<module 'one' from '/opt/auto/src/ex/one/__init__.pyc'>
<module 'one.one_one' from '/opt/auto/src/ex/one/one_one/__init__.pyc'>
<module 'one.one_one.one_two' from '/opt/auto/src/ex/one/one_one/one_two/__init__.pyc'>
<module 'one.one_one.one_two.two' from '/opt/auto/src/ex/one/one_one/one_two/two.py'>
venkatttt! 
```

我正在寻找执行此导入的最佳方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:53:20.017

`__init__.py`从您的输出中，我可以看到您在每个子目录中已经有文件，因此，您可以简单地使用`import`它们：

```
$> from one.one_one.one_two.two import foo
$> foo() 
```

如果您想要每个模块的句柄，您可以单独导入它们：

```
$> import one.one_one as function_class
$> import one.one_one.one_two as function_class1
$> import one.one_one.one_two.two as function_class2 
```

最后，您还可以定义`__all__`in`one/__init__.py`并让此自动导入在`import one`执行时自动发生。

# asp.net - IIS URL 重写模块和动态压缩

> ID：11521812
> 
> 赞同：2
> 
> 时间：2012-07-17T11:45:42.623
> 
> 标签：asp.net, compression, url-rewrite-module

我在使用重写模块时遇到了一些问题。尝试使用动态压缩时出现异常。因此，通过在“web.config”文件中禁用此功能来修复它：

```
<urlCompression doStaticCompression="false" doDynamicCompression="false" /> 
```

但是，如果我注意到要启用此功能怎么办？有没有办法同时使用重写模块和动态压缩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:51:35.350

如果你在谈论 OUTBOUND 重写，你*可以*，但我个人从来没有对此感到高兴。[在这里](http://forums.iis.net/t/1165899.aspx)查看这篇文章

这与出站重写只能对未压缩的响应进行这一事实有关，但是如果您查看上面的线程，则有一些繁琐的解决方法。

您可以启用静态压缩！

# mysql - MySQL：GROUP_CONCAT() 慢查询（3 秒以上） - 如何优化？

> ID：11521817
> 
> 赞同：1
> 
> 时间：2012-07-17T11:45:47.903
> 
> 标签：mysql, group-concat

我有以下查询，它按照他们的**排行榜**位置顺序选择**玩家**，并在旁边给出他们的最新**帖子**和一些涉及该玩家的最新**故事**，这些故事是 group_concatted 所以我每个玩家有一行，每行有多个故事。

 ******```
SELECT  players.player_name, 
        posts. * , 
        GROUP_CONCAT( DISTINCT stories.story_title 
                      ORDER BY stories.story_published DESC 
                      SEPARATOR  '[sep]' ) 
                      AS headlines, 
        GROUP_CONCAT( DISTINCT stories.story_link 
                      ORDER BY stories.story_published DESC 
                      SEPARATOR  '[sep]' )
                      AS links
FROM    players, player_stories, stories, posts, leaderboard
WHERE   cs_player_id = player_id
  AND   cs_story_id = story_id
  AND   post_player = player_id
  AND   leaderboard.name = players.player_name
GROUP BY players.player_name
ORDER BY leaderboard.1 DESC , leaderboard.3 DESC , leaderboard.6 DESC , leaderboard.144     DESC 
```

我在所有 _id 字段上都有主键，并且在连接中使用的所有其他字段上都有索引。

但它加载缓慢 - 每个查询大约 3 秒。

所有字段都是固定长度（VARCHAR 或 INT）

有没有办法优化这个查询？

编辑：这是在 SQL Fiddle 上：[http ://sqlfiddle.com/#!2/b55cf/1/0](http://sqlfiddle.com/#!2/b55cf/1/0)

值得注意的是，在我的实际实现中，每个表都有 1000 到 3000 行。

EXPLAIN EXTENDED 给出：

```
id  select_type  table          type      possible_keys         key        key_len  ref                                       rows  Extra
1   SIMPLE       player_stories index     PRIMARY               PRIMARY    8        NULL                                      1169  Using index; Using temporary; Using filesort
1   SIMPLE       players        eq_ref    PRIMARY               PRIMARY    4        player_stories.cs_player_id               1 
1   SIMPLE       leaderboard    ref       Bothnames,name        name       152      func                                      1     Using where
1   SIMPLE       posts          ref       uniqueLink,post_playeruniqueLink 4        players.player_id                         24    Using where
1   SIMPLE       stories        eq_ref    PRIMARY               PRIMARY    4        player_stories.cs_story_id                1 

Variable_name                   Value
bulk_insert_buffer_size         8388608
innodb_buffer_pool_awe_mem_mb       0
innodb_buffer_pool_size         8388608
innodb_log_buffer_size          1048576
join_buffer_size                    131072
key_buffer_size                 8384512
myisam_sort_buffer_size         8388608
net_buffer_length                   16384
preload_buffer_size                 32768
read_buffer_size                    131072
read_rnd_buffer_size            262144
sort_buffer_size                    2097144 
```******

# android - Android：如何判断被叫号码是有效还是无效

> ID：11521819
> 
> 赞同：3
> 
> 时间：2012-07-17T11:46:02.333
> 
> 标签：android, telephony, telephonymanager

我有一个很大的选择加入号码列表。其中一些是伪造的或伪造的。

我需要编写一个执行以下操作的小应用程序：-

*   从 excel 文件中读取数字
*   拨打每个号码：如果电话接通（电话响铃或占线/占线），我们在 Excel 表的新列中将该号码标记为有效。如果号码无效，我们将该号码标记为无效。

**有可能在Android中实现这一点吗？**

**我们可以在从应用程序拨打电话时获取响应状态吗？** 示例：状态 = 响铃、状态 = 忙碌/忙碌、状态 = 无效等

有没有更好的方法来确定电话号码是有效还是无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:19:12.480

您无法在 Android 中执行此操作，但您可以使用[呼叫控制 XML (CCXML)](http://www.w3.org/TR/ccxml/)和具有良好呼叫进度分析的平台（如[Voxeo](http://evolution.voxeo.com/) ）在基于云的 IVR 系统中开发它。看看[这个答案](https://stackoverflow.com/questions/9176290/check-to-see-if-telephone-number-is-active-real)，它提供了更多细节。请谨慎使用此类解决方案，因为有管理自动通知的法律。正如您从对该问题的评论和否决票中看到的那样，很多人对机器呼叫他们非常敏感。确保人们选择接受这种类型的通知/验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:58:57.687

你不能。除了发出调用设备的电话应用程序的意图之外，您无法拨打任何电话号码来完成这项工作，因此几乎不可能实现完全流畅的自动化。您可以尝试这样做，同时设置自己的侦听器以了解呼叫是否成功，但这远非您想要的。

# javascript - Extjs 4、事件处理、范围、自定义组件

> ID：11521820
> 
> 赞同：3
> 
> 时间：2012-07-17T11:46:06.043
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我有以下问题。我有网格`tbar`。里面`tbar`我有数量`Ext.form.field.Trigger`。

当用户单击触发按钮时，我想使用提供的功能过滤商店`grid`。我想定义`triggerclick`内部定义的功能`class`，所以我可以用不同的方式重用这个组件`grid`。

所以，简而言之，我想找到放置被点击组件的面板并调用面板函数，或者将面板的引用传递`triggerclick`给更好的方法来实现这一点。

> 代码（FilterField -> 触发器扩展）：

```
Ext.define('GSIP.core.components.FilterField', {
    extend: 'Ext.form.field.Trigger',
    alias: 'widget.filterfield',
    initComponent: function() {

        this.addEvents('filterclick');
        this.callParent(arguments);
    },
    onTriggerClick: function(e, t) {

        //Ext.getCmp('gsip_plan_list').filterList(); - working but dont want this

        //this.fireEvent('filterclick'); - controller cant see it,

        //this.filterList; - is it possible to pass scope to panel or reference to panel

        //e.getSomething() - is it possible to get panel via EventObject? smth like e.getEl().up(panel)

    }
}); 
```

* * *

> 面板代码：

```
Ext.define('GSIP.view.plans.PlanReqList', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.gsip_devplan_list',
    id: 'gsip_plan_list',
    title: i18n.getMsg('gsip.view.PlanReqList.title'),
    layout: 'fit',
    initComponent: function() {

        this.store = 'DevPlan';

        this.tbar = [{
            xtype: 'filterfield',
            id: 'filter_login',
            triggerCls: 'icon-user',
            //scope:this - how to pass scope to panel without defining onTriggerClick here
            //          onTriggerClick: function() { 
            //              this.fireEvent('filterclick'); //working event is fired but controller cant see it
            //              this.filterList; //this is working but i dont want to put this code in every filterfield
            //          },
            //          listeners : {
            //              filterclick: function(btn, e, eOpts) { //this is working

            //              }
            //            },
        }];

        this.columns = [{
            id: 'id',
            header: "Id",
            dataIndex: "id",
            width: 50,
            sortable: true,
            filterable: true
        }, {
            header: "Name",
            dataIndex: "name",
            width: 150,
            sortable: true,
            filterable: true
        }, {
            header: "Author",
            dataIndex: "author",
            sortable: true,
            renderer: this.renderLogin,
            filterable: true
        }];

        this.callParent(arguments);

    },
    filterList: function() {
        this.store.clearFilter();

        this.store.filter({
            property: 'id',
            value: this.down("#filter_id").getValue()
        }, {
            property: 'name',
            value: this.down("#filter_name").getValue()
        });
    },
    renderLogin: function(value, metadata, record) {
        return value.login;
    }
}); 
```

* * *

> 控制器部分代码：

```
init: function() {
    this.control({
        'attachments': {
            filesaved: this.scanSaved,
        }
    }, {
        'scan': {
            filesaved: this.attachmentSaved
        }
    }, {
        '#filter_login': {
            filterclick: this.filterStore //this is not listened 
        }
    });
},
filterStore: function() {
    console.log('filtering store');

    this.getPlanListInstance().filter();
}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:48:00.500

控制器可以听任何东西。只需要准确指定要做什么。但我会在面板级别触发事件 - 将其添加到您的触发器处理程序中：

```
this.up('panel').fireEvent('triggerclicked'); 
```

# java - java中网络字节顺序到主机字节顺序

> ID：11521830
> 
> 赞同：0
> 
> 时间：2012-07-17T11:46:37.797
> 
> 标签：java, io, byte, socket.io

我一直在解释从 C 服务器到我的 java 应用程序的响应。希望 C 服务器以 BIG_ENDIAN 格式响应我的 java，我的问题是如何将响应转换为`Integer`. 我正在粘贴从 C 服务器获得的响应，并想知道如何在 java 中执行“be64toh”函数。

来自 C 服务器的响应 -

> ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^H^@^@^@^@^@^A^A^B^@^@ ^@^N^@^@^@^@^@^@^@^@^@^@^@^H^@^@^@^@^@^@^@^A^@^@^@ ^K^@^@^@^@^@^@^@^@^@^@^@<80>^@^@^@^@^@^@^BÃ^@^@^@^A您的要求已成功注册并正在处理中。^@^@^@^@^D^@^@^@^@^@^@^@Â¨Ã½f^@^@^@^@^@mX@^ @^@^@^@^@^@^@^@^N^@^@^@^@^@^@^@^@^@^@^@^H

我不知道如何解释不可读的字节，当转换为十六进制时，它们中的大多数都是，但其中很少有人像等`null`那样填充数据。你能帮我找到一个解决方案吗？`^H``^A`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:55:22.730

假设您有一个 java.nio.SocketChannel 可供读取，您可以使用 ByteBuffer 进行转换：

```
private static final int BUFFER_SIZE = 1024;

ByteBuffer readBuffer = ByteBuffer.allocate(BUFFER_SIZE).order(ByteOrder.BIG_ENDIAN);
int bytesRead = socketChannel.read(readBuffer);
readBuffer.flip(); 
```

现在您可以从缓冲区中读取数据，例如：

```
int someInt = readBuffer.getInt();
long someLong = readBuffer.getLong(); 
```

# cloud-foundry - 无法将 VMC 指向我的本地云：HTTP 异常：Errno::ECONNREFUSED：无法建立连接，因为目标机器主动拒绝了它

> ID：11521831
> 
> 赞同：0
> 
> 时间：2012-07-17T11:46:43.643
> 
> 标签：cloud-foundry

## 我想做什么

[尝试按照https://github.com/cloudfoundry/vcap/](https://github.com/cloudfoundry/vcap/)中提到的步骤在我的机器上的 UBUNTU SERVER VM 上设置 VCAP

## 问题是什么

事情似乎工作正常，但在第 5 步（https://github.com/cloudfoundry/vcap/#step-5-validate-that-you-can-connect-and-tests-pass）我在尝试执行以下命令 - vmc target api.vcap.me

我在控制台上看到的异常是：

主机不可用或无效：'http://api.vcap.me'

你想看看回复吗？[yN]：是的

HTTP 异常：Errno::ECONNREFUSED:No connection could be made because the target machine主动拒绝它。- 连接（2）

## 任何其他相关信息

对于一些早期的实验，我使用的是 MicroCloud（由 CloudFoundry 提供下载）。我在将我的 VMC 指向这个 Microcloud 时也遇到了问题。

在 Micro Cloud 控制台上，我看到以下消息：

要访问您的 Micro Cloud Foundry 实例，请使用：vmc target [http://api.agoel.cloudfoundry.me](http://api.agoel.cloudfoundry.me)

当我从 Windows7 上的 Ruby 命令提示符设置运行此 vmc 命令时，出现以下错误：

主机不可用或无效：'http://api.agoel.cloudfoundry.me'

你想看看回复吗？[yN]：是的

HTTP异常：Errno::ETIMEDOUT:连接尝试失败，因为连接方在一段时间后没有正确响应，或者ost没有响应。- 连接（2）

## VMC 信息显示什么

我在命令提示符下运行了 vmc info 命令。它显示了以下信息

VMware 的云应用平台

如需支持，请访问支持 DOT cloudfoundry DOT com

目标：http://api DOT cloudfoundry DOT com (v0.999)

客户端：v0.3.18

用户：ankitgoel1987@gmail.com

使用：内存（1.1G 共 2.0G）

```
 Services (2 of 16 total)

      Apps     (2 of 20 total) 
```

## 我的设置详情

在 4GB RAM 上运行的 Windows7

已经安装了来自 Cloudfoundry 的 Microcloud（这是作为其他练习的一部分完成的。我最近的实验要求我设置一个带有 VCAP 的 Ubuntu 服务器。所以这个 MicroCloud 应该不重要）

vmc 0.3.18（安装在我的 Windows7 机器上）

红宝石 1.9.2p290 (2011-07-09) [i386-mingw32]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:13:09.387

在您的主机文件中添加以下条目：

IP_of_ubuntu_server vcap.me api.vcap.me

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:19:46.243

如果您想避免每次部署新应用时都必须编辑主机文件，并且根据您使用的虚拟化平台，您可以将您自己计算机的端口 80 上的所有流量转发到 VM。

*.vcap.me 设置为解析为 127.0.0.1，因此这是一个理想的解决方案。为此，您应该将网络设置设置为 NAT 而不是桥接（也许您已经这样做了），然后将端口 80 设置为转发到来宾操作系统的 IP。例如，在 VMWare Fusion 中，这就像编辑设置文件一样简单。

# c# - 选中从 gridview1 到 gridview2 的选定行 ASP.NET C#

> ID：11521833
> 
> 赞同：0
> 
> 时间：2012-07-17T11:46:51.990
> 
> 标签：c#, asp.net, gridview, checkbox

正如标题所说，无论如何我有一张桌子是`sql-server` ***产品***。

其中有产品 id、名称、价格和 cetegory。

我所做的是我将数据`GridView`明智地放入第一类，我想要的是当我检查特定行或多行并单击选择按钮时，它会在第二个网格视图中显示产品名称和价格。

但它的作用是将下一个选定项目覆盖到第二个网格视图中先前选定的项目，并仅显示一行而不是多个选定项目。

有谁能够帮我 ？？

这是一个代码

```
protected void Button1_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {

            CheckBox chbox = GridView1.Rows[i].Cells[0].FindControl("CheckBox1") as CheckBox;

            if (chbox.Checked == true)
            {
                string conn = ConfigurationManager.ConnectionStrings["Test_T3ConnectionString2"].ConnectionString;
                SqlConnection con = new SqlConnection(conn);
                string query = "select prod_name,price from products where prod_id = '" + GridView1.Rows[i].Cells[1].Text + "'";
                SqlCommand cmd = new SqlCommand(query, con);
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataTable dt = new DataTable();
                da.Fill(dt);

                GridView2.DataSource = dt;
                GridView2.DataBind();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:06:42.123

您绑定网格的次数过多。

```
protected void Button1_Click(object sender, EventArgs e) {
List<string> checkedIDs = new List<string>();

 for (int i = 0; i < GridView1.Rows.Count; i++) {

    CheckBox chbox = GridView1.Rows[i].Cells[0].FindControl("CheckBox1") as CheckBox;

    if (chbox.Checked == true)
    {
        checkedIDs.Add("'" + GridView1.Rows[i].Cells[1].Text + "'");
    }

}

        string conn = ConfigurationManager.ConnectionStrings["Test_T3ConnectionString2"].ConnectionString;
        SqlConnection con = new SqlConnection(conn);
        string query = "select prod_name,price from products where prod_id in (" + string.Join(",", checkedIDs.ToArray()) + ")";
        SqlCommand cmd = new SqlCommand(query, con);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);

        GridView2.DataSource = dt;
        GridView2.DataBind();
} 
```

# maven - 如何为使用 Maven 构建的 Eclipse 插件自动化版本号更新过程

> ID：11521839
> 
> 赞同：15
> 
> 时间：2012-07-17T11:47:06.810
> 
> 标签：maven, eclipse-plugin, release, tycho, version-numbering

[我正在使用与此处描述](http://www.vogella.com/articles/EclipseTycho/article.html)的项目类似的项目 。因此，它在父 pom.xml 中有一些模块：

```
 <modules>
    <module>../de.vogella.tycho.plugin</module>
    <module>../de.vogella.tycho.feature</module>
    <module>../de.vogella.tycho.p2updatesite</module>
 </modules> 
```

这些模块有一个通用的版本号，例如`1.0.0-SNAPSHOT`或没有`-SNAPSHOT`。feature.xml 文件需要包含相同的版本号：

```
<feature
      id="com.my.feature"
      label="My plugin feature"
      version="1.0.0"> 
```

和：

```
<plugin
      id="com.my.plugin"
      download-size="0"
      install-size="0"
      version="1.0.0"
      unpack="false"/> 
```

文件 category.xml（在 p2 更新站点项目中）和 MANIFEST.MF（在插件项目中）需要包含相同的值。

问题是：如何使用 Maven 自动化所有这些文件中的版本号更新过程？

我尝试使用 maven-release-plugin 和 maven-versions-plugin 解决这个问题。第一个插件做了很多未使用的操作（比如做很多 CVS 提交，我在这个项目中没有使用）。第二个插件只修改pom.xml文件，不修改feature.xml、category.xml和MANIFEST.MF，还是我用的不太好。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-17T15:07:21.280

对于这个问题，有一个特殊的[tycho-versions-plugin](http://www.eclipse.org/tycho/sitedocs/tycho-release/tycho-versions-plugin/plugin-info.html)。它（有意）与 maven-versions-plugin 相同，但也会更新 feature.xml 和 MANIFEST.MF 中的（冗余）版本。

更重要的是，该插件还更新了指定确切版本的引用，例如对 feature.xml 中插件的引用，或对 category.xml 中的功能的引用。所以最后，所有出现的工件版本都会更新，就像在重构中一样。

对于具有确切版本的参考资料，在正常的 Tycho 构建期间还会自动更新。因此，例如，如果您的功能在 version 中引用了您的插件`1.0.0.qualifier`，则此版本字符串将使用限定符的实际值进行更新，例如`1.0.0.201207171147`. 您可以使用此功能来最小化需要由 tycho-versions-plugin 更新的位置数量：您可以使用魔法版本，而不是在参考中指定当前版本文字`0.0.0`。作为正常构建的一部分，此版本也会自动更新到最新版本。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-12-06T15:30:38.907

我想为像我这样经验不足的 maven 用户添加一些实用提示[Tobias Oberlies](https://stackoverflow.com/users/1523648/oberlies)的回答：

目标`tycho-versions:set-version`将更改从主 pom 引用的所有项目的版本。maven 配置文件（pom.xml）的版本字符串以及相应的 Eclipse/OSGi 工件（MANIFEST.MF、feature.xml、category.xml）将一致地更改。

要从命令行运行目标，请使用以下命令：

```
mvn org.eclipse.tycho:tycho-versions-plugin:set-version -DnewVersion=1.2.0-SNAPSHOT 
```

在本例中，`newVersion`用户属性`1.2.0-SNAPSHOT`是要设置的新版本。

上面的命令行将使用最新版本的`tycho-versions-plugin`. 如果要使用某个版本的插件，则`tycho-version-plugin`需要将其添加到`project/build/plugins`主 pom.xml 的元素中。

```
<plugin>
  <groupId>org.eclipse.tycho</groupId>  
  <artifactId>tycho-versions-plugin</artifactId>  
  <version>${tycho-version}</version>  
</plugin> 
```

替换`${tycho-version}`为当前版本的 Tycho 或使用该名称和适当的值定义一个属性。

# c# - 在List sql c#中存储列

> ID：11521842
> 
> 赞同：0
> 
> 时间：2012-07-17T11:47:22.503
> 
> 标签：c#, sql, list

```
while (Running)
{
    while (rdr.Read())
    {
        List<PackageDetailFile> pkgFiles = rdr.Read().ToString().ToList();
    }
} 
```

您好， read() 返回一个包含 7 8 列的内部连接表，是否可以将它们存储在 List 中？如果我们能正确转换 rdr.read(), ( to string to list ... ? )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:57:22.883

根据你的`PackageDetailFile`类的结构和基础数据，你可以做这样的事情

```
var packageDetailFiles = new List<PackageDetailFile>();

while (Running)
{
    while (rdr.Read())
    {
        var detailFile = new PackageDetailFile();

        // the following will depend on your data structure and class properties
        detailFile.Property1 = rdr.GetString(0);
        detailFile.Property2 = rdr.GetString(1);
        detailFile.Property3 = rdr.GetString(2);

        packageDetailFiles.Add(detailFile);
    }
} 
```

注意：您可以使用 AutoMapper 之类的程序集从数据读取器映射到 POCO，从而减少繁琐的工作，`MyObject.MyProperty = dataReader[collectionIndex]`使您的代码更具可读性和测试友好性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:59:51.857

尝试使用 rdr 对象的 GetValues 方法。我想 rdr 是一个 SqlDataReader 或另一个 DataReader。

此方法返回一个对象数组，其中包含当前行的所有列。在它之后，您可以将对象数组存储在对象列表中。如果要存储在另一种类型的列表中，则必须在存储之前将每个元素转换为正确的类型。

# visual-studio - OpenCV - 获取视频帧内检测到的图像的法线

> ID：11521847
> 
> 赞同：1
> 
> 时间：2012-07-17T11:47:40.547
> 
> 标签：visual-studio, image-processing, opencv, 3d, computer-vision

我有一个应用 SURF（加速鲁棒功能）的项目，以便在另一组图片或来自我的网络摄像头的实时流视频中检测给定图片。

它的工作原理类似于此视频中的说明：

[http://www.youtube.com/watch?NR=1&v=uKI9qyi1wMg&feature=fvwrel](http://www.youtube.com/watch?NR=1&v=uKI9qyi1wMg&feature=fvwrel)

问题是构成参考图片的矩形是 2D 的，我想获得它相对于 3D 的位置。基本上这是图像的正常值。

有没有办法根据确定的矩形获得图像的法线？

矩形类似于：

```
Top Left = (x1, y1) 
Top Right = (x2, y1)
Bottom Left = (x3, y3)
Bottom Right = (x4, y4) 
```

有没有办法根据这个坐标获得图像相对于框架的法线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:48:12.797

您可以获得将输入点集与检测到的矩形相匹配的 3D 变换：

```
cv::Mat in = 0, 0
             w, 0
             0, h
cv::Mat ou = x1, y1
             x2, y2
             x3, y3
cv::Mat mat = cv::getAffineTransform(in, ou); 
```

然后使用这个矩阵来变换输入图像的法线：

```
[row, col] = mat * [0, 0, 1] 
```

# asp.net-mvc - 您如何跟踪来自 MVC 4 的内部服务器错误？

> ID：11521849
> 
> 赞同：2
> 
> 时间：2012-07-17T11:47:41.437
> 
> 标签：asp.net-mvc, asp.net-web-api

由于 ASP.NET MVC 4 和 WebAPI 的持续问题，请参阅链接：

[MVC 4 Web API - CreateResponse(status, object) 导致 HTTP 500](https://stackoverflow.com/questions/11361810/mvc-4-web-api-createresponsestatus-object-causes-http-500)

我需要检测内部 Web API 管道并查看发生了什么。

我该怎么做呢？

谢谢

卢克

**更新 **

我现在实现了一个 ITraceWriter，我现在可以看到 TraceRecord 上有一个异常属性，我可以转储甚至中断它，也许。

谢谢，我想回答了这个问题。

更多信息在这里：

[http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:15:56.527

您可以为整个堆栈启用所有级别的跟踪（从基本的“信息”跟踪）。

如果您使用流行的库之一（即 nLog），您可以轻松地将其全部写入文件或事件日志（如果您愿意）。

只需将默认 ITraceWriter 替换为您的自定义类：

```
GlobalConfiguration.Configuration.Services.Replace(typeof(ITraceWriter), new NLogger()); 
```

您会看到各种内部跟踪消息填满了日志。

我在这里写了博客[http://www.strathweb.com/2012/06/using-nlog-to-provide-custom-tracing-for-your-asp-net-web-api/](http://www.strathweb.com/2012/06/using-nlog-to-provide-custom-tracing-for-your-asp-net-web-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:20:20.350

您是否尝试过设置：

```
 GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always; 
```

[这](http://weblogs.asp.net/fredriknormen/archive/2012/06/11/asp-net-web-api-exception-handling.aspx)是一篇关于 Web API 中的错误处理和跟踪的好文章。

# xcode - Xcode 4.3.3：如何在初始化时分配视图控制器

> ID：11521850
> 
> 赞同：-1
> 
> 时间：2012-07-17T11:47:46.170
> 
> 标签：xcode, ios5, storyboard

大家好。由于我使用的是 IOS 5，因此我使用的是故事板。在旧版本中，我可以很容易地编写`initWithNibName:@"Details"`，而且它就像一个魅力。现在在故事板中，由于我没有使用任何 XIB 文件，我需要做同样的事情。这是我的代码片段：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //Get the selected country
    NSString *selectedAuthors = [theauthors objectAtIndex:indexPath.row];

    //Initialize the detail view controller and display it.
    Details *dvController = [[Details alloc] initWithNibName:@"Details" bundle:nil];

    dvController.selectedAuthors = selectedAuthors;
    [self.navigationController pushViewController:dvController animated:YES];
    [dvController release];
    dvController = nil;
} 
```

我的新片段：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //Get the selected country
    NSString *selectedAuthors = [theauthors objectAtIndex:indexPath.row];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard.storyboard" bundle:nil];
    Details *dvController = [storyboard instantiateViewControllerWithIdentifier:@"Details"]; //Or whatever identifier you have defined in your storyboard

    //Initialize the detail view controller and display it.
    //Details *dvController = [[Details alloc] init/*WithNibName:@"Details" bundle:nil*/];

    dvController.selectedAuthors = selectedAuthors;
    [self.navigationController pushViewController:dvController animated:YES];
    [dvController release];
    dvController = nil;
} 
```

应用程序日志：

```
2012-07-17 16:30:15.760 AuthorsApp[6534:f803] WARNING: Using legacy cell layout due to delegate implementation of tableView:accessoryTypeForRowWithIndexPath: in <AuthorVC: 0x6857ba0>.  Please remove your implementation of this method and set the cell properties accessoryType and/or editingAccessoryType to move to the new cell layout behavior.  This method will no longer be called in a future release.
2012-07-17 16:30:16.167 AuthorsApp[6534:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Storyboard (<UIStoryboard: 0x6867750>) doesn't contain a view controller with identifier 'Details''
*** First throw call stack:
(0x1595022 0x1726cd6 0x500fef 0x3151 0x1675c5 0x1677fa 0x9fc85d 0x1569936 0x15693d7 0x14cc790 0x14cbd84 0x14cbc9b 0x147e7d8 0x147e88a 0xd6626 0x1dc2 0x1d35)
terminate called throwing an exception(lldb) 
```

最新申请日志：

```
2012-07-17 16:35:15.352 AuthorsApp[6600:f803] WARNING: Using legacy cell layout due to delegate implementation of tableView:accessoryTypeForRowWithIndexPath: in <AuthorVC: 0x688d810>.  Please remove your implementation of this method and set the cell properties accessoryType and/or editingAccessoryType to move to the new cell layout behavior.  This method will no longer be called in a future release.
2012-07-17 16:35:15.912 AuthorsApp[6600:f803] Everything is ok now !
(lldb) 
```

最终日志

```
Couldn't register com.test.erc.AuthorsApp with the bootstrap server. Error: unknown error code.
This generally means that another instance of this process was already running or is hung in the debugger.(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:57:55.417

您可以像这样实例化位于情节提要中的控制器：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"myStoryboard" bundle:nil];
Details *dvController = [storyboard instantiateViewControllerWithIdentifier:@"Details"]; //Or whatever identifier you have defined in your storyboard 
```

* * *

由于您使用的是故事板，因此另一个选择是使用[segues](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboardSegue_Class/Reference/Reference.html)进行过渡。[这是一个很好的例子](http://www.scott-sherwood.com/?p=219)。使用 segues 免费获得的一件事是目标控制器会自动为您实例化。委托方法如下所示：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"Details"]){
         Details *dvController = (Details *)[segue destinationViewController];
         // Pass any data to destination controller
         // The transition is handled by the segue and defined in the Storyboard ('push' for example)
     }
} 
```

**编辑** 这是一个便于参考的屏幕截图： ![在此处输入图像描述](../Images/f5912547272064615fc7f511e45112b9.png)

# javascript - 简单的 Html5 Canvas 操作拖慢浏览器

> ID：11521852
> 
> 赞同：0
> 
> 时间：2012-07-17T11:47:57.823
> 
> 标签：javascript, html, html5-canvas

我最近一直在玩画布，今天开始使用 setInterval 定期刷新/动画它。我很惊讶地看到这对 cpu 来说是多么沉重并且减慢了一切。看看网上的例子，我确信我的做法有问题。然后我最大程度地简化了我想做的事情（不是玩图像而是矩形，不使用太多对象等），但仍然遇到同样的问题。

我试图在两个矩形上获得一个白色闪光灯（12fps）......所以一点也不复杂......

这是我的代码。

```
function Canvas(name){
this.ctx=document.getElementById(name).getContext('2d');
this.canvas=this.ctx.canvas;
this.width=this.canvas.width;
this.height=this.canvas.height;
this.layers=new Array();

this.draw = function() {
this.canvas.width = this.canvas.width;
    this.ctx.beginPath();
    this.ctx.rect(0,0,this.width,this.height);
    this.ctx.closePath();
    this.ctx.fillStyle="#eaeaea";
    this.ctx.fill();
    this.ctx.beginPath();
    this.ctx.rect(250,50,300,250);
    this.ctx.closePath();
    this.ctx.fillStyle="#ff0000";
    this.ctx.fill();

    intensity=Math.random();
    this.flash(intensity);
 };

this.flash = function(intensity) {
    this.ctx.globalAlpha = intensity;
    this.ctx.beginPath();
    this.ctx.rect(0,0,this.width,this.height);
    this.ctx.closePath();
    this.ctx.fillStyle="#fff";
    this.ctx.fill();
    this.ctx.globalAlpha = 1;
    setInterval(this.draw.bind(this),1000);
};

function initCanvas(){
mycanvas=new Canvas('myCanvas');
mycanvas.draw();
}

$(document).ready(function() {
    initCanvas();
}); 
```

* * *

找到的解决方案：

使用[setTimeout](http://www.w3schools.com/jsref/met_win_settimeout.asp)而不是[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:04:16.447

你有大量的内存泄漏，因为你一直`setInterval`在`flash`函数中使用。让我们看看事件的顺序

*   已创建 mycanvas 对象
*   画（）
*   绘制调用闪光
*   `draw`flash 设置每隔一秒调用一次的时间间隔
*   draw 调用 flash 并设置另一个间隔
*   过程重复，直到你有很多间隔调用`draw`

要解决它，请使用`setTimeout`in `flash`。所以它`draw`在一秒钟后调用，它调用`flash`，然后`draw`在一秒钟内再次调用。此外，1000ms 不会给你 12fps。1000/12 将。

此外，用于`ctx.closePath();`关闭您打开的路径`beginPath()`

您也从未`Canvas`使用`}`.

这是一个[演示](http://jsfiddle.net/AKSmS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:59:30.910

关闭您打开的所有路径：

```
this.draw = function() {
    this.canvas.width = this.canvas.width;
    this.ctx.beginPath();
    this.ctx.rect(0,0,this.width,this.height);
    this.ctx.closePath();    //Closing
    this.ctx.fillStyle="#eaeaea";
    this.ctx.fill();
    this.ctx.beginPath();
    this.ctx.rect(250,50,300,250);
    this.ctx.closePath();    //Closing
    this.ctx.fillStyle="#ff0000";
    this.ctx.fill();

    this.flash(40);
};

this.flash = function(intensity) {
    this.ctx.globalAlpha = intensity;
    this.ctx.beginPath();
    this.ctx.rect(0,0,this.width,this.height);
    this.ctx.closePath();    //Closing
    this.ctx.fillStyle="#fff";
    this.ctx.fill();
    this.ctx.globalAlpha = 1;
    setInterval(this.draw.bind(this),1000);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T01:59:41.477

我不知道这是否相关，但我发现自己处于类似情况并想给出更好的答案。使用`requestAnimationFrame(yourLoop)`，特别是对于游戏，因为它更快并且具有更好的性能。 [http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/](http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/)

# c++ - Windows xp 32 位 d3d9.dll 与 Windows 7 64 位 d3d9.dll

> ID：11521856
> 
> 赞同：0
> 
> 时间：2012-07-17T11:48:12.303
> 
> 标签：c++, debugging, direct3d

我有问题要为我的 hack 做代码洞穴。

windows xp 32bits d3d9.dll 运行时返回地址

```
4fe50000 (base address)
4fe58840 (drawindexedprimitive virtual table address)
4fe571b0 (endscene virtual table address) 
```

windows 7 64bits d3d9.dll 运行时返回地址

```
72c30000 (base address)
72c5b6b1 (drawindexedprimitive virtual table address)
72c5279f (endscene virtual table address) 
```

如果你仔细看，大小似乎不同。

好吧，我什至尝试调试这个 => "windows 7 x64's c:\windows\syswow64\d3d9.dll"，它返回不同的地址 5e1cxxxx

我不确定我错过了什么。但返回为“72c30000”，我可以保证它是 32 位 d3d9.dll

有什么解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:11:43.867

如今，DirectX 已成为 Windows 不可或缺的一部分。特别是 Aero 依赖于它，d3d9.dll 是预先安装的。所以简单的解释是地址不同是因为DLL不同。通过查看 Windows 资源管理器中的“属性 + 详细信息”选项卡，您可以轻松看到一些内容。注意不同的文件版本。

在不同的 Windows 版本中，您不能指望函数的地址一致。或者在一个版本上，安全补丁或服务包会改变地址。或者就某个特定文件版本而言，地址空间布局随机化功能专门设计用于阻止您尝试执行的操作。

# iphone - 检查配置文件的开发者证书有效性

> ID：11521857
> 
> 赞同：5
> 
> 时间：2012-07-17T11:48:14.967
> 
> 标签：iphone, ios, openssl, certificate, ios-provisioning

我想允许客户上传他们自己的配置文件，包括图标，这样我就可以让他们动态地成为我的应用程序的自定义版本，然后他们可以发布。

但是，我在验证配置文件时遇到了一点问题。特别是，我想检查 DeveloperCertificate 是否实际上是一个有效的证书。配置文件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>ApplicationIdentifierPrefix</key>
    <array>
        <string>ABCDEFGH</string>
    </array>
    <key>CreationDate</key>
    <date>2012-03-28T11:17:23Z</date>
    <key>DeveloperCertificates</key>
    <array>
        <data>
        MIIFajCCBFKgAwIBAgIIddUra9YprMQwDQYJKoZIhvcNAQEFBQAwgZYxCzAJ
        BgNVBAYTAlVTMRMwEQYDVQQKDApBcHBsZSBJbmMuMSwwKgYDVQQLDCNBcHBs
        ZSBXb3JsZHdpZGUgRGV2ZWxvcGVyIFJlbGF0aW9uczFEMEIGA1UEAww7QXBw
        ...     
        </data>
    </array>
    ...
</dict> 
```

所以，我提取证书然后想要检查它们，最好使用`openssl`命令。这些证书使用的加密是什么，如何使用 openssl 验证它们？我认为这使用 pkcs12，但尝试这样做会给我一个错误：

```
$ openssl pkcs12 -noout -in testcertificate
140653159306912:error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag:tasn_dec.c:1319:
140653159306912:error:0D07803A:asn1 encoding routines:ASN1_ITEM_EX_D2I:nested asn1 error:tasn_dec.c:381:Type=PKCS12 
```

谁能指出我正确的方向？我必须以某种方式验证开发人员证书的有效性。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T12:44:55.077

我一直在研究这个，事实证明它并不像大卫描述的那么难。解决方案其实很简单：

该证书是 base64 编码的 DER 证书。您需要执行以下操作：

*   从 XML 中提取证书
*   Base64 解码证书：

    base64 -d 证书 > 证书.crt

*   使用 OpenSSL 测试证书：

    openssl x509 -inform DER -in certificate.crt -noout -text

或者，如果我们管道它：

```
cat certificate | base64 -d - | openssl x509 -inform DER -noout -text 
```

该`-text`选项使 openssl 提供所有详细信息，但您可以根据自己的意愿指定。例如，假设您只对证书是否是实际的分发证书感兴趣，您可以改用该`-subject`选项并查看该`CN=`字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T21:23:36.703

好吧，我有好消息和坏消息。我有一个朋友是 Mac/iOS 的安全专家，他在这方面做了很多工作。他居然要这么相似的东西。我从他那里得到的信息如下。但坏消息是没有命令行方式来做到这一点 - 您很可能必须使用以下技术旋转 Mac 应用程序才能做到这一点。

-- 技术 ---

该 XML 文件中的证书......被读入 NSData 对象；虽然通常有 3 个证书；至少在 Apple 生成的配置文件中。不知道是不是这样。

如果有 3 个证书，通常足以检查其中一个（通常是最后一个）是否称为“Apple Root CA”，并且 SHA1 值为十六进制“611E5B662C593A08FF58D14AE22452D198DF6C60” - 为此，我使用 openssl.h 中的 SHA1 函数。

如果只有一个证书，那可能是叶子证书。要检查它是否正常，它会更复杂，因为您通常需要一个完整的“信任链”来进行验证。

在任何情况下，您都必须链接到 Security.framework，调用 SecCertificateCreateWithData() 和 NSData（适当地强制转换）以获得 SecCertificateRef。

一个相对的快捷方式可能是调用 SecCertificateCopyValues() 以获取“授权密钥标识符 (2.5.29.35)”字段（该字段的字典键似乎是 kSecOIDAuthorityKeyIdentifier）并检查该字段的值是否为十六进制“E7342A2E22DE39606BB494CE7783612F31A07C35”，这似乎对于所有 Apple 颁发的证书都是如此。SecCertificateCopyValues() 的返回是一个嵌套的字典字典，因此必须深入查找它。

完整和完整的答案是将证书 ref 传递给 SecTrustSettingsCopyTrustSettings()，依次使用 kSecTrustSettingsDomainUser、kSecTrustSettingsDomainAdmin、kSecTrustSettingsDomainSystem，检查证书是否明确受信任。除非中间证书安装在机器上，如果它是叶证书，则可能会失败。

# objective-c - YUV 帧转换成 CGContext

> ID：11521864
> 
> 赞同：1
> 
> 时间：2012-07-17T11:48:49.340
> 
> 标签：objective-c, frame, cgcontext, yuv

如何将 YUV 帧数据写入 CGContext？

请帮我，

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:15:49.547

您需要做什么以及一些伪代码的一般路线图如下所示：

1.  首先创建一个要绘制的 CG 位图上下文。[此处](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-CJBEAGHH)提供了像素格式列表。正如您在 iOS 上看到的，您唯一真正的选择是具有 16 bpp 或 32 bpp 和 alpha 通道的 RGB 风格。Mac OS X 上有更多选项，但您仍然希望使用某种 RGB 风格。

    ```
    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef frameContext = CGBitmapContextCreate(NULL, w, h, 8, bytesPerRow, rgbColorSpace, kCGImageAlphaNoneSkipFirst);
    CGColorSpaceRelease(rgbColorSpace);
    void * data = CGBitmapContextGetData(frameContext); 
    ```

2.  将您的 YUV 帧数据转换为 RGB 并将 RGB 数据写入 CG 位图上下文的数据缓冲区。[您可以在YUV](http://en.wikipedia.org/wiki/YUV#Converting_between_Y.27UV_and_RGB)的 Wikipedia 页面上获取有关如何执行此操作的公式。

3.  将 CG 位图上下文转换为 CG 图像。

    ```
    CGImageRef frameImage = CGBitmapContextCreateImage(frameContext); 
    ```

4.  将 CG 图像绘制到 CG 上下文中。

    ```
    CGContextDrawImage(myCGContext, myCGRect, frameImage); 
    ```

# android - eclipse Juno的复制/粘贴问题

> ID：11521866
> 
> 赞同：21
> 
> 时间：2012-07-17T11:48:57.400
> 
> 标签：android, eclipse, eclipse-juno

我在 Mac OS 10.7.4 和 Android ADT 上使用 Eclipse Juno。

有时在复制和粘贴代码时，复制和粘贴事件发生在我在编辑器上打开的上一个文件中。

它确实得到了重新启动 Eclipse 的修复，但它很烦人。

有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T11:57:01.760

根据这个[错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=368354)和这个[论坛帖子](http://www.eclipse.org/forums/index.php/m/895704/)，从 Preferences -> General -> Keys 取消绑定 Cmd+C/X/V 似乎可以解决问题。

如果没有，请提交错误报告。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T21:14:18.297

我也厌倦了这个错误。

经过一番搜索，发现是Juno上ADT 20的问题：

[http://code.google.com/p/android/issues/detail?id=34630](http://code.google.com/p/android/issues/detail?id=34630)

并修复了 20.0.2。

在 Eclipse 中运行更新检查并将 ADT 更新到最新版本（当前为 20.0.3），问题就消失了 =）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-25T05:43:51.947

禁用`Hyperlinking`为我解决了这个问题。如果您仍想使用超链接，您也可以将其更改`Default modifier key`为其他内容。`Ctrl`

转到**Window** -> **Preferences** -> **General** -> **Editors** -> **Text Editors** -> **Hyperlinking**并取消选中`Enable on demand hyperlink style navigation`或更改`Default modifier key`。我`Default modifier key`改为`alt`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T19:09:54.227

“在较新的报告中，`Jun Luo suggested`周一在 Eclipse Preferences -> General -> Keys 中取消绑定剪切、复制和粘贴的键盘快捷键。我尝试删除 Ctrl+C 绑定，整个星期我都没有遇到这个问题，所以我我称它已修复。我使用 Mac 的同事也没有报告自从删除 ⌘+C 绑定后再次出现的问题。

参考：[http ://aaron-kelley.net/blog/2012/05/ctrlc-to-copy-does-not-always-work-in-eclipse/#comment-440339](http://aaron-kelley.net/blog/2012/05/ctrlc-to-copy-does-not-always-work-in-eclipse/#comment-440339)

# android - 为 Sherlock 操作栏中的标题和菜单项应用阴影和文本颜色

> ID：11521873
> 
> 赞同：6
> 
> 时间：2012-07-17T11:49:43.733
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在努力实现两件事

1.  菜单项的白色文本，标题文本颜色有效
2.  标题和菜单项的文本阴影

所有这些都基于 XML。

什么有效，经过实验？

1.  自定义操作栏布局适用于阴影。
2.  所有 Tiles 的文本颜色都有效，但文本阴影无效
3.  菜单项的文本颜色在任何地方都不起作用。在示例代码中，当我在主主题标签中声明 MenuTextStyle 时，我可以更改文本大小但不能更改颜色。

    ```
    <style name="Theme.SexyApp" parent="Theme.Sherlock.Light">
        <item name="actionBarStyle">@style/Widget.SexyApp.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.SexyApp.ActionBar</item>
        <item name="android:actionBarItemBackground">@drawable/list_state</item>
        <item name="actionBarItemBackground">@drawable/list_state</item>
        <item name="android:actionMenuTextAppearance">@style/Theme.SexyApp.ActionBar.MenuTextStyle</item>
        <item name="actionMenuTextAppearance">@style/Theme.SexyApp.ActionBar.MenuTextStyle</item>

    </style>

    <style name="Widget.SexyApp.ActionBar" parent="@style/Widget.Sherlock.Light.ActionBar">
        <item name="android:displayOptions">showHome|useLogo|showTitle</item>
        <item name="android:titleTextStyle">@style/Theme.SexyApp.ActionBar.TextAppearance</item>
        <item name="titleTextStyle">@style/Theme.SexyApp.ActionBar.TextAppearance</item>
    </style>

    <style name="Theme.SexyApp.ActionBar.TextAppearance" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">@color/white</item>
        <item name="android:textSize">20dp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:shadowColor">#333333</item>
        <item name="android:shadowRadius">1</item>
        <item name="android:shadowDy">1</item>
    </style>

    <style name="Theme.SexyApp.ActionBar.MenuTextStyle" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Menu">
        <item name="android:textColor">@color/white</item>
        <item name="android:textSize">13dp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:shadowColor">#333333</item>
        <item name="android:shadowRadius">1</item>
        <item name="android:shadowDy">1</item>
    </style> 
    ```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T16:51:21.610

要更改菜单项文本颜色，您需要将 actionMenuTextColor 项添加到您的主题样式中，如下面的代码所示：

```
<style name="ThemeName" parent="@style/Theme.Sherlock.Light">
    <item name="actionMenuTextColor">@color/white</item>
    <item name="android:actionMenuTextColor">@color/white</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T07:41:14.847

要更新菜单项文本外观（颜色、大小、样式），您需要在两个不同的位置进行更改。以下答案适用于 sherlock.actionbar

1：在您的主题.xml 文件中添加以下行：

```
<style name="Theme.Mytheme" parent="@style/Theme.Sherlock">
    <item name="android:actionMenuTextAppearance">@style/CustomMenuItem</item>   // define custom style in the style.xml file.
    <item name="actionMenuTextColor">@color/mycolor</item>     
    <item name="android:actionMenuTextColor">@color/mycolor</item> 
```

2：在你的styles.xml中

```
<style name="CustomMenuItem" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Menu">
    <item name="android:textStyle">normal</item>
    <item name="android:textSize">15sp</item>
    <item name="android:textAllCaps">false</item>
</style> 
```

# jquery - jquery tablesorter 在 IIS 生产服务器上不起作用

> ID：11521877
> 
> 赞同：0
> 
> 时间：2012-07-17T11:50:14.903
> 
> 标签：jquery, iis, tablesorter

我的应用程序的几个页面中有表格排序器插件，当我从 Visual Studio 内部运行它时，它在 localhost 上运行良好。但是当我在生产服务器上的 IIS 上发布时，它根本不起作用！

我不知道可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:35:49.110

jQuery 与 II 无关。jQuery 是一个客户端、基于浏览器的 JavaScript 框架。它不在服务器上运行。

如果您部署了应用程序并且它停止工作，那是因为以下原因之一：

*   您的 html 中的路径错误 - 本地路径与服务器上的路径不同

*   您正在执行 AJAX 调用和以下操作之一：

    *   prod 服务器上的安全性/权限。

    *   跨站点脚本错误（浏览器不允许它们）。

    *   服务器上的路径已更改（与我上面的第一点相同）

*   您没有部署所有文件

*   您正在使用其他浏览器

# android - 无法下载我的应用在 Google Drive 上创建的文件，但可以获取该文件的元数据

> ID：11521883
> 
> 赞同：4
> 
> 时间：2012-07-17T11:50:42.103
> 
> 标签：android, google-drive-api

我遵循了 google drive sdk 中提到的所有步骤。我在我的设备（android，运行果冻豆）上创建了一个示例应用程序，并且能够将文件上传到驱动器。尝试下载同一个文件时，我能够获取文件 ID、文件标题、文件下载 URL 等元数据，但无法下载内容。我收到 401 未经授权的错误。

我的应用 AUTH SCOPE 是 AUTH_TOKEN_TYPE = "oauth2: [https://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file) ";

我正在执行以下操作来获取 OAUTH 令牌：

```
AccountManager am = AccountManager.get(this);
        Bundle options = new Bundle();
        am.getAuthToken(
                mAccount,                               
                AUTH_TOKEN_TYPE,                        
                options,                                
                this,                                   
                new OnTokenAcquired(),                  
                new Handler(){
                    @Override
                    public void handleMessage(Message msg) {
                        invadiateToken();                       
                        super.handleMessage(msg);
                    }
                }); 
```

基于令牌，这就是我构建 Drive 对象的方式

```
Drive buildService(final String AuthToken) {
    HttpTransport httpTransport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();

    Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
    b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {

        @Override
        public void initialize(JsonHttpRequest request) throws IOException {
            DriveRequest driveRequest = (DriveRequest) request;
            driveRequest.setPrettyPrint(true);
            driveRequest.setKey(API_KEY);
            driveRequest.setOauthToken(AuthToken);
        }
    });

    return b.build();
} 
```

我可以使用以下代码上传文件：

```
private void uploadLocalFileToDrive(Drive service) throws IOException{

        // File's metadata.
        String mimeType = "text/plain";
        File body = new File();
        body.setTitle("myText.txt");
        body.setDescription("sample app by varun");
        body.setMimeType("text/plain");

        // File's content.
        java.io.File fileContent = new java.io.File(mInternalFilePath);
        FileContent mediaContent = new FileContent(mimeType, fileContent);

        service.files().insert(body, mediaContent).execute();

    } 
```

在尝试下载此应用上传的相同文件时，我`HttpResponse resp = service.getRequestFactory().buildGetRequest(url).execute()`在以下代码段的此行收到 401 未经授权的错误

```
private void downloadFileFromDrive(Drive service) throws IOException {
        Files.List request;
            request = service.files().list();
            do {
                FileList files = request.execute(); 
                for(File file:files.getItems()){
                    String fieldId = file.getId();
                    String title = file.getTitle();
                    Log.e("MS", "MSV::  Title-->"+title+"  FieldID-->"+fieldId+" DownloadURL-->"+file.getDownloadUrl());
                    if (file.getDownloadUrl() != null && file.getDownloadUrl().length() > 0 ) {
                        GenericUrl url = new GenericUrl(file.getDownloadUrl());
                        HttpResponse resp = service.getRequestFactory().buildGetRequest(url).execute();
                        InputStream isd = resp.getContent();
                        Log.e("MS", "MSV:: FileOutPutStream--->"+getFilesDir().getAbsolutePath()+"/downloaded.txt");

                    } else {
                        Log.e("MS", "MSV:: downloadURL for this file is null");
                    }
                }
                request.setPageToken(files.getNextPageToken());
            } while (request.getPageToken()!=null && request.getPageToken().length()>0);
    } 
```

谁能帮助我，让我知道我做错了什么？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T16:19:08.300

这是一个已知问题，将随着[Google Play 服务](https://developers.google.com/android/google-play-services/)API 的发布而得到解决。

由于您的应用程序已获得该`https://www.googleapis.com/auth/drive.file`范围的授权，并且下载端点不支持`?key=`查询参数，因此我们的服务器无法知道哪个项目正在发出请求（以确保应用程序有权读取此文件的内容） .

同时，我可以推荐的唯一解决方法是使用广泛的范围：`https://www.googleapis.com/auth/drive`. 请在开发应用程序和等待 Google Play 服务发布时仅使用它。

要详细了解如何在 Android 中使用新的授权 API，您可能会对这 2 个 Google I/O 演讲感兴趣：[构建使用 Web API 的 Android 应用程序](https://developers.google.com/events/io/sessions/gooio2012/121/)和 [为 Android 编写高效的驱动器应用程序](https://developers.google.com/events/io/sessions/gooio2012/705/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:59:16.397

我已经回答了这个问题，以及所有与 Android 相关的 Drive 问题，在这里：

[Android 打开和保存文件到/从 Google Drive SDK](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk)

在该答案中，我发布了用于从 Google Drive 下载文件的方法的代码（如果以下代码本身不清楚，请查看我链接到的完整答案。）

```
private java.io.File downloadGFileToJFolder(Drive drive, String token, File gFile, java.io.File jFolder) throws IOException {
    if (gFile.getDownloadUrl() != null && gFile.getDownloadUrl().length() > 0 ) {
        if (jFolder == null) {
            jFolder = Environment.getExternalStorageDirectory();
            jFolder.mkdirs();
        }
        try {

            HttpClient client = new DefaultHttpClient();
            HttpGet get = new HttpGet(gFile.getDownloadUrl());
            get.setHeader("Authorization", "Bearer " + token);
            HttpResponse response = client.execute(get);

            InputStream inputStream = response.getEntity().getContent();
            jFolder.mkdirs();
            java.io.File jFile = new java.io.File(jFolder.getAbsolutePath() + "/" + getGFileName(gFile)); // getGFileName() is my own method... it just grabs originalFilename if it exists or title if it doesn't.
            FileOutputStream fileStream = new FileOutputStream(jFile);
            byte buffer[] = new byte[1024];
            int length;
            while ((length=inputStream.read(buffer))>0) {
                fileStream.write(buffer, 0, length);
            }
            fileStream.close();
            inputStream.close();
            return jFile;
        } catch (IOException e) {        
            // Handle IOExceptions here...
            return null;
        }
    } else {
        // Handle the case where the file on Google Drive has no length here.
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T10:03:16.910

我认为我们不需要任何访问令牌来下载文件。我有同样的问题，这有效：

```
private class DownloadFile extends AsyncTask<Void, Long, Boolean> {

    private com.google.api.services.drive.model.File driveFile;
    private java.io.File file;

    public DownloadFile(File driveFile) {
        this.driveFile = driveFile;
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        if (driveFile.getDownloadUrl() != null
                && driveFile.getDownloadUrl().length() > 0) {
            try {
                HttpResponse resp = mDriveService
                        .getRequestFactory()
                        .buildGetRequest(
                                new GenericUrl(driveFile.getDownloadUrl()))
                        .execute();
                OutputStream os = new FileOutputStream(file);
                CopyStream(resp.getContent(), os);
                os.close();

                return true;
            } catch (IOException e) {
                e.printStackTrace();
                return false;
            }
        } else {
            return false;
        }
    }

    @Override
    protected void onPostExecute(Boolean result) {
        //use the file
    }
}

public static void CopyStream(InputStream is, OutputStream os) {
    final int buffer_size = 1024;
    try {
        byte[] bytes = new byte[buffer_size];
        for (;;) {
            int count = is.read(bytes, 0, buffer_size);
            if (count == -1)
                break;
            os.write(bytes, 0, count);
        }
    } catch (Exception ex) {
    }
} 
```

# mysql - mySQL 结合来自 2 个数据库的数据

> ID：11521885
> 
> 赞同：1
> 
> 时间：2012-07-17T11:50:47.273
> 
> 标签：mysql, database, merge

## 问题。

我有一个最近切换到新服务器 php/mysql 的网站。

它是一个电子商务网站，当它被切换时，切换的人没有切换网站上所有页面的数据库，所以我有一些数据存在于两个mysql数据库（新旧服务器）上，以及旧服务器上存在但新服务器上不存在的一些数据，反之亦然。

我需要将 2 个数据库中的数据合并到一个包含所有数据的数据库中。

## 我的解决方案：

我在想解决这个问题的最好方法是编写一个从旧服务器获取数据的 php 脚本，检查新服务器上是否存在字段（除了主 ID），如果记录不存在然后将其插入新服务器上的新表中。

结构没有那么复杂，但是orders表有一个对order details表的查找字段（使用orders表的主键作为外键）

关于更简单快捷的方法的任何想法，phpmyadmin中是否有可以合并两个数据库的东西？

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:05:12.213

您可以在新服务器上使用联合存储引擎创建另一个表。 [http://dev.mysql.com/doc/refman/5.5/en/federated-usagenotes.html](http://dev.mysql.com/doc/refman/5.5/en/federated-usagenotes.html)

然后，您可以在单个 sql 查询中访问两者。假设您有权允许其他主机连接到您的旧服务器。

# c - 使用 GDB 在 x86 机器上进行 MIPS 反汇编；可能的？

> ID：11521886
> 
> 赞同：2
> 
> 时间：2012-07-17T11:50:48.327
> 
> 标签：c, assembly, gdb, x86, mips

我有一台 x86 开发机器和为 mips 开发内核模块。我想反汇编一个例程来查找模块的问题。

所以我的问题是“我可以在 x86 机器上拆解它还是我必须获得 MIPS 开发机器？”

我试过了，但它在 x86 指令集中反汇编。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:34:08.707

你基本上需要某种形式的[交叉编译](http://en.wikipedia.org/wiki/Cross_compiler)。交叉编译器将允许您在主机（在您的情况下为 x86）上为目标机器（在您的情况下为 MIPS）编译。因此，您将能够从您的 x86 机器生成 MIPS 二进制文件。此外，您还将获得与编译器相关的所有其他工具，例如`objdump`. 在这里，您可以获得有关[如何为 GCC 构建交叉编译器](http://wiki.osdev.org/GCC_Cross-Compiler)的指南。

假设您正在使用`objdump`反汇编二进制文件，您可能不需要构建交叉编译器。`objdump`属于[binutils](http://www.gnu.org/software/binutils/)并且可能只编译 binutils 以使用 MIPS 作为目标（我从未尝试创建 binutils 的跨平台构建，所以我不是 100% 确定）。

**编辑：**我刚刚再次阅读标题，并意识到您正在使用`gdb`. 在这种情况下，我相信您需要创建一个完整的交叉编译器，并创建一个跨平台版本的`gdb`.

# bash - Cat 文件查找纪元，然后将纪元转换为日期

> ID：11521888
> 
> 赞同：1
> 
> 时间：2012-07-17T11:50:50.333
> 
> 标签：bash, date, epoch

我有一个文件：

```
....1342477599376
    1342479596867
    1342480248580
    1342480501995
    1342481198309
    1342492256524
    1342506099378.... 
```

这些行`...`意味着各种字符。我想用 cat 读取这个文件（我需要这样做）并用 sed 命令获取这些行，而不是我想将时代转换为日期......

```
cat myfile.log  | sed '...*//' | sed 's/...*//' | date -d @$1 
```

不幸的是，这是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:17:02.790

一种方法，使用`sed`：

```
cat file.txt | sed "s/^.*\([0-9]\{13\}\).*/date -d @\1/" | sh 
```

结果：

```
Thu Jun  4 14:16:16 EST 44511
Sat Jun 27 17:07:47 EST 44511
Sun Jul  5 06:09:40 EST 44511
Wed Jul  8 04:33:15 EST 44511
Thu Jul 16 05:58:29 EST 44511
Sat Nov 21 05:42:04 EST 44511
Fri Apr 29 10:56:18 EST 44512 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T07:52:24.020

这是类似的解决方案，但它会在流中找到一个时间戳

```
cat test.txt | sed 's/^/echo "/; s/\([0-9]\{13\}\)/`date -d @\1`/; s/$/"/' | bash 
```

# ios - 寻找一种方法来提示用户如何翻转 pageViewController

> ID：11521890
> 
> 赞同：1
> 
> 时间：2012-07-17T11:51:03.787
> 
> 标签：ios, user-interface, uipageviewcontroller

我在我的应用程序中使用 PageViewController。

在测试版中，一些用户抱怨他们不明白他们可以翻页。

我看到在某些应用程序中有一个提示动画会卷曲页面的右上角。

这是我可以使用 PageViewContoller 实现的，还是自定义动画？如果你知道我会喜欢一个方向。

谢谢

沙尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:21:03.490

我在我的应用程序中所做的是在导航栏的右上角添加一个分段控件，带有一个指向左的三角形和一个指向右的三角形。现在用户知道他们可以翻阅视图。一旦他们知道了这一点，他们就可以稍后使用手势来做同样的事情——这比需要的功能更多。

动画等的问题在于它们帮助了第一次使用的用户，然后惹恼了长时间的用户。获得有用但不烦人的帮助“叠加层”是我尚未掌握的艺术。

# html - 移动缩放宽度的响应式设计不正确

> ID：11521903
> 
> 赞同：0
> 
> 时间：2012-07-17T11:52:03.053
> 
> 标签：html, css, responsive-design

**编辑：**找到答案，请参阅下面的答案。

* * *

我正在使用不同的响应式网格框架测试水域，我将在未来将其集成到我的网站中。

我从 Bootstrap 开始（大量追随者，经常更新），但在移动设备上测试时遇到了问题。

首先，我通过[http://screenqueri.es](http://screenqueri.es)进行了尝试——一切看起来都很好，然后在我的 iPhone / iPad 上进行了尝试——一切看起来都很好。

然后我让我的朋友试穿他的三星 GT I9000 Galaxy S，它已经坏了。

* * *

第一张图片是它在 iPhone / iPad / 浏览器窗口上的样子：http: [//imgur.com/o3cVX](http://imgur.com/o3cVX)

下一张图片来自 Adob​​e 设备管理器，这是我朋友手机上的样子：http: [//imgur.com/kd47G](http://imgur.com/kd47G)

请注意顶部的规则（在帮助按钮下）如何保持在屏幕的约束范围内，但下面的框似乎在屏幕外。

我`<meta name="viewport" content="width=device-width, initial-scale=1.0">`用来确保设备正确呈现页面。

这是我的 HTML：

```
<div class="container">
    <div class="row-fluid>
        <div class="span9></div>
        <div class="span3>Help button is here</div>
    </div>
    <div class="row-fluid>
        <div class="span6></div>
        <div class="span6></div>
    </div> 
</div> 
```

CSS 很简单： http: [//twitter.github.com/bootstrap/assets/css/bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css) + [http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css](http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css)

页面的两个部分写得完全相同，但显示方式不同。

它可以专门为此设备使用固定宽度来解决，但我宁愿有一些适用于所有设备的东西 - 我注意到 Bootstrap 在他们的文档上没有这个问题，所以一定是我错过的东西/做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:38:05.983

我发现了问题 - 盒子正在使用：

```
* {
    box-sizing: border-box;
} 
```

我的测试平台是 iOS5 和最新的 Chrome 版本，所以不需要前缀。

在 <= iOS4 和 Android <= 2.3 上，这需要以 为前缀`-webkit-`，如果不是，它会像通常那样计算填充（在我的情况下，使宽度变大 - 将其推出视口）。

这是来源： http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

希望它可以帮助某人，如果他们有同样的问题。

# eclipse - Android模拟器没有启动，虽然它说它正在运行

> ID：11521904
> 
> 赞同：1
> 
> 时间：2012-07-17T11:52:03.087
> 
> 标签：eclipse, android-emulator

我已经使用 eclipse 工作了一年，但是在我升级到 Android SDK Tools v20 之后，模拟器无法工作（绝对没有任何反应）。我像往常一样安装了所有东西，但是当我运行模拟器时，它不再出现（尽管在安装 SDK Tools v20 之后它工作了两次）。我什至再次安装了 SO (Linux Mint)，在我尝试了我在这里阅读的所有内容之后，奇怪的是，模拟器工作了 4 或 5 次。症状如下：

- 当我运行应用程序时，我的笔记本电脑上什么也没有发生，但是如果我将鼠标放在运行应用程序的绿色三角形上，它会显示：运行（已经运行）

-我试图用 adb 杀死服务器但不起作用

- 如果我列出带有 adb 设备的设备，它不会列出任何设备，即使 eclipse 说它正在运行模拟器

-我尝试了两种不同版本的 Eclipse：Juno 和 Galileo，但它是一样的

-我尝试过独立运行模拟器，但它不起作用

-我创建了几个具有不同 API 和特性的 AVD，但没有任何反应

有人对此有任何解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:05:18.543

制作的好主意：项目->清理
窗口->AVD管理器->选择您的虚拟设备->编辑->快照（确保已禁用）->编辑AVD（再试一次，如果仍然不工作，然后尝试启动模拟器直接从 AVD 管理器 -> 开始）。模拟器启动后，您可以再次检查快照选项。

如果这些都不起作用，请尝试再次卸载/安装 SDK。

# python - 通过矢量幅度为 vtkUnstructuredGrid 着色

> ID：11521905
> 
> 赞同：4
> 
> 时间：2012-07-17T11:52:08.197
> 
> 标签：python, qt, vtk, paraview

我正在尝试在 Qt/VTK 应用程序中显示 EnSight 文件。更准确地说，我想显示一个特定的 EnSight 部件，并根据其中一个矢量变量的大小对其进行着色。据我了解，VTK 阅读器的输出是 a `vtkMultiBlockDataSet`，每个部分一个块。每个块都是一个`vtkUnstructuredGrid`，变量是`pointdata`.

我到目前为止的代码如下。不幸的是，它显示了统一的颜色（当在 ParaView 中加载相同的文件时，它会显示一些局部变化）。

显然我错过了一些东西，但我不知道在哪里。我会很感激任何提示。

```
casefile = "data/Results/exported/blahblah.case"
part_id = 0
var_id = 2

reader = vtk.vtkGenericEnSightReader()
reader.SetCaseFileName(casefile)
reader.Update()

# Color map
colormap = vtk.vtkLookupTable()
colormap.SetHueRange(0.667, 0.0)
colormap.SetVectorModeToMagnitude()
colormap.Build()

multiblock = reader.GetOutput()
ugrid = multiblock.GetBlock(part_id)
pointdata = ugrid.GetPointData()
data = pointdata.GetArray(var_id)
data_range = data.GetRange(-1)

mesh_mapper = vtk.vtkDataSetMapper()
mesh_mapper.SetInput(ugrid)
mesh_mapper.SetColorModeToDefault()
mesh_mapper.SetScalarRange(data_range)
mesh_mapper.SetScalarVisibility(True)
mesh_mapper.SetLookupTable(colormap)
#
mesh_actor = vtk.vtkActor()
mesh_actor.SetMapper(mesh_mapper)
mesh_actor.GetProperty().SetDiffuseColor(1., 1., 1.)

renderer = vtk.vtkRenderer()
renderer.AddActor(mesh_actor)
renderer.AddActor2D(colorbar) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-19T01:16:17.843

```
colormap = vtk.vtkLookupTable()
colormap.SetHueRange(0.667, 0.0)
colormap.SetVectorModeToMagnitude()
colormap.Build() 
```

将生成一个范围在 0 到 1 之间的查找表。这是您的示例数据中的数据范围吗？

如果没有，请将数据范围设置为元组中的最小值/最大值`data_range`，然后调用`Build()`- 我认为这应该会有所帮助 - 你有示例数据吗？

# ios - 无法使用 sencha touch 2 本机构建在 iOS 上启用正确的横向模式

> ID：11521906
> 
> 赞同：1
> 
> 时间：2012-07-17T11:52:10.317
> 
> 标签：ios, ios-simulator, sencha-touch-2, landscape-portrait

我目前正在构建一个 sencha touch 2 应用程序并尝试在 iPad 上部署它。我正在研究“mac OS Snow Leopard”并尝试将我的应用程序部署在装有 iOS 5.1 的 iPad2 上。

在构建和部署应用程序时遇到一些问题后，我设法解决了这个问题：[http ://www.sencha.com/forum/showthread.php?192946-2.0.1RC-Native-build-seem-to-破碎](http://www.sencha.com/forum/showthread.php?192946-2.0.1RC-Native-build-seem-to-be-broken); 我似乎有一个新的方向问题。

事实上，即使在我的“packager.json”文件中给出了特定的“landscapeLeft”方向配置，iOSSimulator 和 iOS 都会以横向模式启动应用程序，但是一旦 sencha 标志消失，我的视图就会进入纵向模式并卡住在这种模式下。当我执行 Ext.getOrientation() 时，无论我的设备的方向是什么，我总是得到“肖像”作为答案。没有启动异常或控制台消息，并且在访问了很多很多帖子之后，我还没有发现任何真正解决我的问题的东西。我找到的最接近的是这个：[http](http://www.sencha.com/forum/showthread.php?151238-landscape-gt-portrait-orientation-how-does-it-work-now) ://www.sencha.com/forum/showthread.php? 151238-landscape-gt-portrait-orientation-how-does-it-work-now，但遗憾的是没有效果.

我还想保留 sencha 的原生构建，并尽可能避免使用 phonegap。

有没有人遇到过这个问题，或者对这个问题有任何想法？我很迷茫，需要尽快解决这个问题。

谢谢。

# android - android canvas.drawText在自定义视图中

> ID：11521907
> 
> 赞同：1
> 
> 时间：2012-07-17T11:52:11.207
> 
> 标签：android, canvas, android-custom-view, custom-view

我有一个自定义视图，我想在其中使用这些参数绘制文本。

```
int stopY = 500;

// ...

Log.info("Drawing line " + line + " at " + String.valueOf(stopY));
canvas.drawText(line, 40, stopY, Paint); 
```

我有一个文本数组，我正在画画

```
 for (int i = startLineNumber; i < (startLineNumber + linesVisible); i++, screenDisplayLine++)
        {
            if (i >= totalLines)
            {
                break;
            }
            int startY = (int) (i*lineSpacing + (screenDisplayLine * lineSpacing));
            int stopY = startY + lineSpacing;
       canvas.drawText(line, 40, stopY, Paint);//stop y increments by 20 every time i use 
    } 
```

它可以直接使用，但是当我需要 startnumber 为 50 时

这意味着

```
 stopy = stopY+(linenumber*20)//(stopY + (50 * 20)) 
```

但在这种情况下它失败了

任何帮助

通过LogCat可以在日志中看到正确的值，但是没有画出文字。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:58:16.730

我认为它超出了屏幕尺寸，使用较少的 Y 值和绘图。

**或者**

油漆功能可能有问题

```
canvas.drawText(String.valueOf(angle_Top), 15, 25, new Paint()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:53:36.347

```
canvas.drawText(String.valueOf(stopY), 40, stopY, Paint);
                ^^^^^^^^^^^^^^^^^^^^^ 
```

你设置油漆的颜色了吗？例如：

```
mPaint.setColor(Color.RED); 
```

**或者**

您正在使用`stopY=500;`// 可能不在您的屏幕上

尝试`stopY=40;`检查输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T05:53:44.097

感谢您的两个回答；我找到了答案

```
int stopY = 500;

scrollTo(0,stopY);
canvas.drawText(line, 0, stopY, Paint); 
```

这工作正常。正如你所说，它超出了我使用的屏幕尺寸

```
scrollTo(0,stopY); 
```

这样它会滚动到屏幕上的那个点，当我使用

```
canvas.drawText(line, 0, stopY, Paint); 
```

它把它画在那里没有任何问题。

# c# - 尝试在流程顶部处理 Catch

> ID：11521908
> 
> 赞同：0
> 
> 时间：2012-07-17T11:52:12.503
> 
> 标签：c#

如果我这样做：

```
try 
{
    //code
}
catch (Exception)
{
    throw;
} 
```

异常是否包含所有信息？这个想法是在应用程序的顶部处理错误。在那里我会执行一些 SQL sp 来填充管理员的表，以便他知道异常。

我想存储`Exception.Message`异常的源（方法、函数等）。但我不知道如何引用异常发生的“哪里”。是`Exception.Source`吗？`Exception.TargetSite`?

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:57:12.603

异常的类型会告诉你它是什么类型的异常（IndexOutOfRangeException、SqlException 等），你也会做出相应的反应：

```
try 
{
    //code
}
catch (SqlException ex)
{
    // Handle code
}
catch (IndexOutOfRangeException ex)
{
    // Handle code
}
catch (Exception ex)
{
    // Handle code
} 
```

至于它发生在哪里......你应该用一个`try catch`而不是大的代码块来封闭容易发生异常的区域。这样，您将知道异常的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:58:49.190

简短的回答是肯定的：只需调用 throw 就可以传递有关异常的所有信息。

*   throw ex 重置堆栈跟踪（因此您的错误似乎源自 HandleException）
*   throw 不会 - 原始违规者将被保留。

（引自 Mark Gravell）

# google-chrome - chrome 扩展的动态清单值

> ID：11521909
> 
> 赞同：1
> 
> 时间：2012-07-17T11:52:24.153
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

我有一个我开发的 chrome 扩展，我想为每个用户提供某种 ID。

理想情况下，我会将此 ID 放在清单中，并通过`chrome.app.getDetails().userid`

然后我可以使用此 id 每 X 小时获取一次提要，并且每个提要都不同`userid`。

如果我自己提供 CRX 文件，我可以通过简单地编写一个快速的 PHP 脚本来执行此操作，该脚本会根据下载请求更改清单并使用特定逻辑插入 id，同时还将相同的 id 插入到 mysql 表中。

在通过 Chrome 网上应用店提供扩展程序时如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:34:16.560

不要在清单文件中包含用户特定的值。更好的方法是使用扩展的持久性。

定义这种 id 的一个合乎逻辑的地方是[选项页面](http://code.google.com/chrome/extensions/options.html)。
另一个可能的选项是后台脚本，它遵循以下逻辑：

```
 var userid = localStorage.getItem('userid');
    if (!userid) {
        // Create new useruid, either via a server-side script, or client-side
        // ...
        localStorage.setItem('userid', 'new user id');
    } 
```

在这个例子中，我曾经`localStorage`启用持久性。您也可以改用^(Chrome 20+)，它允许用户同步他们的配置文件和设置。[`chrome.storage`](http://code.google.com/chrome/extensions/storage.html)

除了在第一次运行时检查和检索 id，您还可以在服务器端实现逻辑。例如，假设服务器的响应格式是 JSON。然后，只需在响应中定义 uid（可选，仅当它已更改时）：

```
var userid = localStorage.getItem('userid');
var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://example.com/feeds/json?userid=' + userid);
xhr.onload = function() {
    var response = JSON.parse(xhr.responseText);
    if (response.userid) { // Set new uid if needed
        localStorage.setItem('userid', userid = response.userid);
    }
    // ... your application's logic ...
};
xhr.send(); 
```

服务器必须实现以下内容：

1.  如果请求（查询字符串？）包含`userid`键，请检查用户 ID 是否有效且已知。
    *   如果`userid`无效，则生成一个，并将其包含在响应中。
2.  *您的应用程序的逻辑在这里*

这导致响应看起来像（要使用 PHP 生成 JSON，请使用[`json_encode`](http://php.net/json_encode)）：

```
{"userid":"some unique user identifier", ....} 
```

# media-queries - 媒体查询奇怪的行为

> ID：11521911
> 
> 赞同：0
> 
> 时间：2012-07-17T11:52:33.470
> 
> 标签：media-queries

我有以下媒体查询规则：

1.  `@media only screen and (max-width: 854px), only screen and (max-device-width: 854px)`（对于 <= 854px 的设备）

2.  `@media only screen and (min-width: 855px), only screen and (min-device-width: 855px)`（适用于 > 854px 的设备）

这很奇怪，但 Chrome（可能是其他浏览器）同时使用此规则（例如当宽度为 800 像素时）（检查屏幕）。怎么了？
![stange 媒体查询行为](../Images/b575350c4b01fce7e17050505565ca58.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:09:36.297

它们回退到相同的规则，因为您正在使用`device-width`,`device-width`目标设备的物理宽度的条件，因此如果满足该条件，那么这就是将应用的唯一规则（无论您是否将浏览器调整为任何宽度）。`device-width`从您的媒体查询中删除这两个条件，这应该可以解决您的问题。

要详细了解 和 之间的区别`device-width`，`width`请参阅此链接：[http ://www.w3.org/TR/css3-mediaqueries/#media1](http://www.w3.org/TR/css3-mediaqueries/#media1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:57:12.917

谢谢你，苏维。
我通过更改浏览器的宽度（而不是更改屏幕分辨率）来测试媒体查询规则。因为我的浏览器宽度小于 854px，所以应用了以下规则 - `@media only screen and (max-width: 854px)`。因为我的屏幕分辨率大于 854px，所以应用了以下规则-`only screen and (min-device-width: 855px)`

# c++ - 用 / 分割 C++ 字符串

> ID：11521914
> 
> 赞同：3
> 
> 时间：2012-07-17T11:52:38.757
> 
> 标签：c++, string

我在 C++ 中有一个这样的字符串：`"dirname/filename.ini"`. 我需要在`/`.
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T11:53:06.180

使用`find`和`substr`方法来自`std::string`.

```
std::string fullpath = "dirname/filename.ini";
int beginIdx = fullpath.rfind('/');
std::string filename = fullpath.substr(beginIdx + 1); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-17T11:59:26.963

要扩展 Luchian 的回答，如果路径可以包含正斜杠或反斜杠字符，请使用[`std::string::find_last_of()`](http://en.cppreference.com/w/cpp/string/basic_string/find_last_of)：

```
const int idx = fullpath.find_last_of("\\/");
if (std::string::npos != idx)
{
    std::string filename(fullpath.substr(idx + 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-03T16:32:42.997

这就是我用来分割字符串的方法。它也适用于多次出现的分隔符：

```
 char delimiter = '/';
  std::string tmp = "", originalString = "this/might/be/it";
  std::vector<std::string> parts;

  std::istringstream iss(originalString);
  while(std::getline(iss, tmp, delimiter)) {
    parts.push_back(tmp);
  } 
```

# java - J2me 应用程序在多个时间文件播放时出现内存不足异常

> ID：11521916
> 
> 赞同：1
> 
> 时间：2012-07-17T11:52:41.090
> 
> 标签：java, memory, java-me, mp3, mmapi

在我的 j2me 应用程序中，每次用户单击一个项目时，我都必须播放一个小声音文件。但问题是当我多次播放声音文件时，比如在 10-14 次之后，它给了我内存不足的异常。虽然我每次播放文件时都会释放播放器，但它仍然会出现内存不足异常：这是代码片段，

```
public void playSound(String soundFile) {
    try{
        if (player!=null) {   
            try {
                player.deallocate(); //deallocate the unnecessary memory.
            } catch (Exception ex) {
                player=null;  
                System.gc();
            }
        }

        player = Manager.createPlayer(getClass().getResourceAsStream(musicFolder + soundFile), "audio/mpeg");
        // player = Manager.createPlayer(is, "audio/mpeg");
        player.realize();

        // get volume control for player and set volume to max
        VolumeControl vc = (VolumeControl) player.getControl("VolumeControl");
        if (vc != null) {
            vc.setLevel(100);
        }

        player.prefetch();
        player.start();
        isException=false;
    } catch (Exception e) {

         isException=true;
    }
} 
```

有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:58:49.953

3件事要记住

*   如果您要多次播放相同的声音，您可能希望保留一个 Player 预取并简单地启动它多次。

*   当你想正确清理播放器时，你应该调用 Player.close()

*   您可能希望使用媒体事件侦听器来独立于用户输入来关闭和/或重新启动播放器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:18:45.213

我想你也应该打电话

```
player.close() 
```

紧接着

```
player.deallocate(); 
```

根据文档“当 deallocate 返回时，播放器处于 UNREALIZED 或 REALIZED 状态。” 但 close 更进一步……“当方法返回时，Player 处于 CLOSED 状态，不能再使用。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:04:59.267

我不确定为什么取消分配不起作用。我想要么取消分配比创建一个新的需要更长的时间，要么取消分配由于某种原因而失败。是否有一个 player.stop() 来匹配 player.start()？

另一件要尝试的事情（如果没有别的，为了好的形式:) 是不要创建新玩家，除非你需要/应该。即移动

```
 if(player!=null){ 
```

所以它也涵盖

```
 player = Manager.createPlayer(getClass().getResourceAsStream(musicFolder + soundFile), "audio/mpeg"); 
```

！

# java - 加载 JavascriptConfiguration.xml 时出错

> ID：11521917
> 
> 赞同：1
> 
> 时间：2012-07-17T11:52:45.107
> 
> 标签：java, htmlunit

我第一次尝试使用 HtmlUnit。在 Eclipse 中为 EE 工作。我的构建路径中有 jar 文件。该项目可以编译，但在运行时会出现运行时错误：

com.gargoylesoftware.htmlunit.javascript.configuration.JavaScriptConfiguration loadConfiguration 严重：加载 JavascriptConfiguration.xml 时出错

java.lang.NullPointerException 在 com.gargoylesoftware.htmlunit.javascript.configuration.JavaScriptConfiguration.getConfigurationFileAsReader(JavaScriptConfiguration.java:256) 在 com.gargoylesoftware.htmlunit.javascript.configuration.JavaScriptConfiguration.loadConfiguration(JavaScriptConfiguration.java:180) 在 com. gargoylesoftware.htmlunit.javascript.configuration.JavaScriptConfiguration.(JavaScriptConfiguration.java:142) 在 com.gargoylesoftware.htmlunit.javascript.configuration.JavaScriptConfiguration.getInstance(JavaScriptConfiguration.java:237) 在 com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.( JavaScriptEngine.java:117) 在 com.gargoylesoftware.htmlunit.WebClient.init(WebClient.java:215) 在 com.gargoylesoftware.htmlunit.WebClient.(WebClient.java:189)

发现一些帖子说从哪里获取该文件以及将其放在哪里，但没有任何帮助。有人知道吗？谢谢

# css - 对齐标题的基线

> ID：11521922
> 
> 赞同：0
> 
> 时间：2012-07-17T11:52:59.637
> 
> 标签：css, html

我有一些标记如下

```
 <header>
    <h1>{{site.title}}</h1><h2>&nbsp;{{site.subtitle}}</h2>
    <nav>
      <a href="/">Home</a> |
      <a href="/me.html">About Me</a>
    </nav>
  </header> 
```

我想对齐所有基线，同时将`<nav>`元素向右浮动。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:05:40.140

我找到了以下解决方案（更少）：

```
header {
  position: relative;
  display: table;
  width: 900px;

  span {
    display: table-cell;
    text-align: left;
  }   

  h1, h2 {
    display: inline-block;
    margin: 0;
  }   

  nav {
    display: table-cell;
    text-align: right;
    float: none;
  }   
} 
```

我必须在标题元素周围添加一个跨度。

# iphone - 解析 JSON - iPhone

> ID：11521925
> 
> 赞同：0
> 
> 时间：2012-07-17T11:53:15.707
> 
> 标签：iphone, ios, json

我是 json 新手，我需要你的帮助。

我收到这样的 JSON 字符串：

```
{"network":
   {
   "network_id":111,
   "name":"test name",
   "city":"test city",
   "country":"test country",
   "description":"test desc"
   }
} 
```

我如何处理这个字符串并拆分键/值以便在我的视图中使用它们？

```
- (void) connectionDidFinishLoading:(NSURLConnection *)connection {    
    [connection release];

    NSString *responseString = [[NSString alloc] initWithData:self.responseData encoding:NSUTF8StringEncoding];

    self.responseData = nil;

//*********** How I can parse responseString *********//

[networkIDLabel setText:@"ADD THE VALUE"];
[nameLabel setText:@"ADD THE VALUE"];

    [responseString release];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:01:54.930

在 iOS 5 及更高版本中，您可以直接使用 NSJSONSerialization 解析响应数据：

```
[NSJSONSerialization JSONObjectWithData:self.responseData …]; 
```

如果要支持早期版本的 iOS，可以使用[JSONKit](https://github.com/johnezang/JSONKit/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:04:03.637

在objective-c中，json可以表示为Dictionary

```
-(void)getData:(NSData*)response{

 // You have to include the SBJSON or else you can also use the NSJSONSerialization

 //NSDictionary *jsonData          =           [NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&erro];

SBJSON *parse                               =           [[SBJSON alloc]init];

NSString *jsonString                        =           [[NSString alloc] initWithData:response
                                                                              encoding:NSUTF8StringEncoding]; 

NSDictionary *jsonData                      =           [parse objectWithString:jsonString error:&erro];
NSDictionary *insideData                          =           [jsonData objectForKey:@"network"];

if(![insideData isKindOfClass:[NSNull class]])
{

        NSString *data1         =       [insideData objectForKey:@"network_Id"];

         NSString *data2         =       [insideData objectForKey:@"name"];

 }

} 
```

# javascript - 当我们按下回车键时不会触发 keypress 事件

> ID：11521926
> 
> 赞同：1
> 
> 时间：2012-07-17T11:53:16.080
> 
> 标签：javascript, jquery, jquery-events

我正面临有关该`keypress`事件的问题。当我按下回车键时`keypress`，不会触发事件，但它与其他键一起工作正常。

这是我的代码：

```
$(document).ready(function () {
        alert('hi');
        $("#ctl00_popupPageBody_txtFirstName,#ctl00_popupPageBody_txtLastName").keypress(function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            alert(code);
            if (code == 13) { //Enter keycode
                //Do something
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:56:21.993

您应该为此使用**keyup**事件

```
$(document).ready(function() {
    $("#ctl00_popupPageBody_txtFirstName,#ctl00_popupPageBody_txtLastName").keyup(function(e) {
        if (e.which == 13) {
            //Enter keycode //Do something 
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:01:44.870

仅使用[e.which](http://api.jquery.com/event.which/)作为跨键的标准化：

```
$(document).ready(function () {
        alert('hi');
        $("#ctl00_popupPageBody_txtFirstName,#ctl00_popupPageBody_txtLastName").keypress(function (e) {
            var code = e.which; 
            alert(code);
            if (code === 13) { //Enter keycode
                e.preventDefault();
                //your code goes here
            }
        });
    }); 
```

注意：在我的情况下，我绑定 do .keydown

# python - 如何访问模块中的变量，该模块在主函数中导入并在 python 的 main() 中定义

> ID：11521929
> 
> 赞同：0
> 
> 时间：2012-07-17T11:53:16.977
> 
> 标签：python, python-2.7, jython

我是python的新手。我正在尝试访问在主函数`main()`中的模块中定义的变量。`imported`我想要一种方法来获得这个，将`deviceid`变量传递给`get_a()`
**main.py:-**

```
global deviceid
import lib
deviceid=123
lib.get_a() 
```

**lib.py:-**

```
def get_a():
    global deviceid
    prnit deviceid 
```

调用`main`或尝试`deviceid`从 python shell 访问正在返回

`Traceback (most recent call last): File "<stdin>", line 1, in <module> File "t.py", line 4, in pp print a NameError: global name 'deviceid' is not defined`

我尝试`global deviceid`在模块和功能内外的许多地方提供帮助。没有任何帮助。

有人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:07:04.430

Python 中没有对整个程序是全局的名称。Python 中的全局变量对特定模块是全局的。要在多个模块中使用一个值，请将其名称从一个模块导入另一个模块，使其在两个模块中可用：

```
# main.py
import lib
deviceid = 123
lib.get_a()

# lib.py
import main
def get_a():
    print main.deviceid 
```

正如其他评论者所指出的，不使用全局变量可能是一个更好的选择。

```
# main.py
import lib
deviceid = 123
lib.get_a(deviceid)

# lib.py
def get_a(deviceid):
    print deviceid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:33:56.137

您可以将 deviceid 变量放在 lib 模块中并通过 lib.deviceid 使用它

如果您通过执行更改代码中某处的 deviceid 的值`lib.deviceid = X`，并且如果您在其他地方重新导入 lib 模块并再次请求该 deviceid，它将具有 X 作为值。

# jquery - jQuery reel & fancybox - 第一次工作，但如果重新打开就停止工作

> ID：11521934
> 
> 赞同：1
> 
> 时间：2012-07-17T11:53:34.717
> 
> 标签：jquery, fancybox

我发帖是希望有人尝试和我在这里做同样的事情，并遇到同样的问题并且已经找到了修复或解决方法。

我使用 jQuery [Reel](http://jquery.vostrel.cz/reel)和[Fancybox 2](http://fancyapps.com/fancybox/)的目的很简单，就是将一个可拖动的卷轴放在一个花式框弹出窗口中——卷轴脚本由 AJAX 加载到花式框中。

第一次在页面中使用它时它工作得很好，但是如果你关闭框并单击以重新打开它（不重新加载页面） - 你不能左右拖动图像（尽管鼠标滚轮仍然有效）。

我猜一个事件处理程序正在被清除而不是重新附加，或者类似的东西 - 但以前没有一起使用这两个插件。

我在这里建立了一个非常基本的页面，只包含这两个[组件](http://www.codecraft.dyndns.org/fancy-reel/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:31:32.470

另一个自我回答 - 但万一有人觉得它有用！

我的问题与 Reel v1.1.4 有关，这是直到两天前的当前版本！

全新版本 (v1.2) 修复了该问题，无需进一步修改即可使用现有代码。

# android - 调用不同的包并选择正确的包

> ID：11521938
> 
> 赞同：0
> 
> 时间：2012-07-17T11:54:02.947
> 
> 标签：android, android-intent, apk

我必须从第一个 apk 切换到第二个 apk，并且我已经成功完成。但问题是我必须在多个包之间进行选择。如果包是正确的，那么应用程序应该切换。因此，为此我尝试将多个包名称放在字符串中并以意图调用，但它仅用于其他部分。

代码片段是：

我初始化一个字符串变量

```
String value="com.android.example"; 
```

并有意通过这里

```
intent = pm.getLaunchIntentForPackage(value); 
```

当我运行 apk 时，它不接受任何值，即使是正确的包并进入 else 部分。请给我同样的建议，如果我可以通过任何其他方法做同样的事情，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:16:06.190

使用 PackageManager 检查您要查找的包是否存在于此设备上，然后根据您从检查中获得的结果采取相应措施。

# php - 是否可以只升级 DateTime 库 PHP

> ID：11521940
> 
> 赞同：3
> 
> 时间：2012-07-17T11:54:12.023
> 
> 标签：php, datetime, upgrade

在本地机器上使用一些 DateTime 函数时，后来我发现我们的服务器有 5.2.x 而我在本地机器上有 5.3.x。

是否可以仅将 DateTime 库升级为像 5.3.x 一样，因为我们有一些应用程序可能无法在 php 5.3.x 中运行。

最好的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:56:23.700

DateTime 不是一个库，它是 PHP 核心的一部分：[http ://www.php.net/manual/en/datetime.requirements.php](http://www.php.net/manual/en/datetime.requirements.php)

所以这是不可能的。

您究竟需要什么功能？

# mysql - 按表格中出现的次数排序

> ID：11521944
> 
> 赞同：0
> 
> 时间：2012-07-17T11:54:49.390
> 
> 标签：mysql, database, sorting

我有一个包含许多表的数据库。每个表只存储了 ID。现在我想做的是：

```
SELECT id FROM table1, table2, table3
GROUP BY id; 
```

但我也想按出现的递减顺序对它们进行排序。

例如，所有 3 个表中的 ID 应该出现在顶部，而只出现在一个表中的 ID 应该出现在底部。关于如何做到这一点的任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:27:51.563

也试试这个

```
select id from
(
    SELECT id FROM table1
    union all
    select id from table2
    union all
    select id from table3 
) as t
GROUP BY id
order by count(id) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:12:20.993

```
select sum(t1.id IS NOT NULL,t2.id IS NOT NULL, t3.id IS NOT NULL) as total,t1.id from table1 as t1 join table2 as t2 on t1.id=t2.id join table3 as t3 on t3.id = t1.id order by total desc; 
```

我不确定您的问题，但这可以提供帮助

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-17T12:00:46.743

```
select id from
(
    SELECT id FROM table1
    union all
    select id from table2
    union all
    select id from table3 
) as t
GROUP BY id
order by id desc 
```

# android - APK 不存在

> ID：11521948
> 
> 赞同：0
> 
> 时间：2012-07-17T11:54:59.613
> 
> 标签：android, apk

我的 Android 项目有问题。到目前为止，我还没有遇到任何问题，但是今天，在我的设备上进行了一些安装后，我无法运行它。每次我想运行它或从中制作 apk 时，它都会写入该项目有编译错误。apk 不存在。但是apk在bin目录下，所以不知道为什么不好。

如果可以，请提供帮助，因为我尝试了项目 - clean 方法，并修复了项目属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:57:40.483

删除文件夹`.apk`中的文件和二进制`/bin`文件，然后清理项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:14:32.587

尝试这个，

运行 avd 管理器。那里显示您的 avd 上的可用版本，我们可以识别我们有效的 android 虚拟设备的刻度线。如果您的 avd 版本正确，则刻度线将显示为绿色或红色。首先检查一下。在那之后，我将进一步提供帮助。

# android - 将数据（日期、时间和按钮 ID）存储到某个文本文件中并编辑该文件以进行日志记录

> ID：11521952
> 
> 赞同：0
> 
> 时间：2012-07-17T11:55:13.003
> 
> 标签：android, eclipse

1.  我想将当前数据/时间和按钮 ID 存储到某个文件中。
2.  目前，我正在使用内部存储来执行此操作，但这对我不起作用。
3.  我能够存储字符串（我们大多数人都可以在各种教程中找到），但我无法存储日期/时间和按钮 ID。对于 String，我们可以很容易地使用 fos.write(string.getbyte[])。
4.  我想做的另一件事是将数据存储到文件中后，我想访问该文件以便可以从中操作数据。

例如。按钮很少，TV_ON、TV_OFF、DVD_ON 等。如果我单击 TV_ON 按钮，它将存储按钮 ID 以及按下该按钮的时间。并且如果按下TV_OFF，它会存储对应的Id和Time。这样我就可以获得电视打开的持续时间。通过这种方式，我将能够解释在此期间消耗的能量（使用一些计算）。

请指导！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:04:55.343

使用 Android 的内置日志实用程序可能会更好。完成日志记录后，您可以从设备上获取日志文件。不清楚您是想在运行时还是之后修改日志文件。

一个例子：

```
//For information
String date = getDate(); //put your date here
Button id = R.id.your_button_id
Log.i(logTag, "Date is: " + date + " - Button id: " + id); 
```

其他日志记录级别包括：

```
Log.d(String, String) //for debugging
Log.w(String, String) //for warnings
Log.e(String, String) //for errors 
```

日志输出如下所示

```
07-17 14:03:39.670: I/[my logtag](1810): [my message] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:11:56.610

您需要将 a 转换`Date`为`String`使用 a `formatter`，因为相同的日期可以用许多不同的方式表示。打印按钮 ID 很简单：

```
Date date = new Date();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String logMsg = "Date: " + formatter.format(date) + " Button id: " + R.id.your_button_id;
Log.i(tag, logMsg);
fos.write(logMsg); 
```

# ssis - 在 SSIS 中解压缩受密码保护的文件

> ID：11521956
> 
> 赞同：3
> 
> 时间：2012-07-17T11:55:30.503
> 
> 标签：ssis

我在解压缩 SSIS 包中受密码保护的文件时遇到问题。我总是使用执行进程任务但是这次从 ftp 下载 zip 文件后，它必须解压缩它，然后我将它用作平面文件。现在的问题是我无法解压缩文件，因为它的密码受保护。我有文件的密码，但我现在不知道如何使用它。有命令行之类的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:45:43.590

您需要找到一个可以解压缩受密码保护的 zip 文件的[命令行工具](http://www.dotnetperls.com/7-zip-examples)，然后您可以像往常一样使用执行进程任务。如果您不想将密码硬编码到 SSIS 包中，可以将其放入包变量中，从包配置或[dtexec 参数](http://msdn.microsoft.com/en-us/library/ms162810%28v=sql.105%29.aspx)中填充变量，然后动态设置执行进程任务的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:08:53.953

终于找到了...使用执行进程任务并设置参数如下：
可执行文件：C：\ Program Files \ WinRAR \ WinRAR.exe .....（winrar位置）
参数：e -o + -ppassword“文件名”。 .......ie e -o+ -p12345 "D:\TRFolder\TR0426.zip"
工作目录：D:\TRFolder ....... UnzipPath
和平

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-29T06:24:56.360

我得到了它实际上对我有用。

我们需要在执行流程任务编辑器中传递一些参数

![单击此处获取执行过程任务编辑器图像](../Images/6b824e4f899f02d2b77405f60dbb90ef.png)

可执行文件：`C:\Program Files\7-Zip\7z.exe` [安装 7z 的源文件]

参数：这里我们必须传递源、密码（如果有）和目标。其次是`e`（即提取）

例如：

```
e "D:\App\File\TextDoc.7z" -p1234@Abcd -oD:\App\File\Extract * -r 
```

这里

*   `e`意思是提取
*   资源：`D:\App\File\TextDoc.7z`
*   密码：`1234@Abcd`
*   目的地：`D:\App\File\Extract`
*   `r`: 这是为了阅读。表示提取的文件文件将在提取时可见

# joomla - 在joomla中执行sql查询

> ID：11521957
> 
> 赞同：2
> 
> 时间：2012-07-17T11:55:38.617
> 
> 标签：joomla, joomla2.5, joomla-component

大家好，我在 joomla 2.5 中为后端做了一个组件，但是我在执行 sql 查询时遇到问题，我的变量是空的，所以它什么都不显示。

我还有其他文件和文件，但这里对我的问题很重要。

首先在我的controller.php 我有这个里面的管理文件

```
class BusquedaController extends JController
{
    protected $default_view= 'restaurantes';
    public function display(){
     parent::display();
    }
} 
```

在我的模型文件中，我有 restaurante.php

```
class BusquedaModelRestaurante extends JModelList{
    function getListaRestaurantes(){
        $db= JFactory::getDBO();
        $sql= "SELECT * FROM #__restaurantes";
        $db->setQuery($sql);
        return $db->loadObjectList();   
    }
} 
```

在我的控制器文件中我有这个

```
class BusquedaControllerRestaurantes extends JControllerAdmin
{

    public function getModel($name = 'Restaurante', $prefix = 'BusquedaModel', $config = array('ignore_request' => true))
    {
        $model = parent::getModel($name, $prefix, $config);
        return $model;
    }

    function listado(){
        $firephp->log('hola');
        $view=& $this->getView('restaurantes', 'html');
        $model= $this->getModel("restaurante");
        $listaMensajes= $model->getListaRestaurantes();
        $view->assignRef('resList', $listaMensajes);
        $view->display();
        }
} 
```

最后在我的视图文件中，我有一个带有 default.php 的 tmpl 文件，它显示了一个表格

```
foreach ($this->resList as $item):
        $checked=JHTML::_('grid.id', $n, $item->id); ?>
            <tr>
                <td><?php echo $checked; ?></td>
                <td><?php echo $item->id; ?></td>
                <td><?php echo $item->nombre; ?></td>
                <td><?php echo $item->direccion; ?></td>
                <td><?php echo $item->telefono; ?></td>
                <td><?php echo $item->web; ?></td>
                <td><?php echo $item->tipo; ?></td>
                <td><?php echo $item->zona; ?></td>
                <td><?php echo $item->metro; ?></td>
            </tr>
            <?php 
```

但是元素 reslist 是空的，我不知道我的组件做得好不好！！，有人知道在 joomla 2.5 中做组件的教程或东西

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T10:15:51.077

抛出运行时异常

```
try
{
    $db->setQuery($query);
    $result = $db->loadResult(); // If it fails, it will throw a    RuntimeException 
}
catch (RuntimeException $e)
{
    throw new Exception($e->getMessage());
} 
```

也在控制器中将变量声明为受保护

```
protected $resList; 
```

将值分配给变量，例如

```
$this->resList = $model->getListaRestaurantes(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T11:26:52.207

试试这个，在控制器中将 $listaMensajes 更改为 $this->resList

$this->resList= $model->getListaRestaurantes();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:48:47.410

尝试在组件的开头添加 error_reporting(E_ALL) ，它有望向您展示您做错了什么。

如果这无助于查看查询在 getListaRestaurantes() 方法中返回的内容，请通过 simplle `print_r($db->loadObjectList()); jexit();`

PS 在 JModels 中，您可以使用 $this->_db 来获取对 JDatabase 对象的引用（而不是 JFactory::getDBO()）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-17T12:36:09.667

看看我们的[Joomla 组件创建器](http://www.notwebdesign.com/joomla-component-creator/)。我想你会发现它很有用。

我建议尽可能坚持使用 MVC 框架并使用 getItems() 等。只需复制 com_weblinks 正在做的事情。或者更好 - 让组件创建者为您完成所有工作。

# performance - UIView self.layer.shouldRasterize = YES 和性能问题

> ID：11521959
> 
> 赞同：15
> 
> 时间：2012-07-17T11:55:43.840
> 
> 标签：performance, ios5, caemitterlayer

我想分享我`self.layer.shouldRasterize = YES;`在 UIViews 上使用标志的经验。

我有一个`UIView`已`self.layer.shouldRasterize`打开的类**层次**结构以提高滚动性能（**它们都具有大于设备屏幕的 STATIC 子视图**）。

今天在我用来`CAEmitterLayer`制作漂亮粒子效果的一个子类中。

尽管粒子数非常**低（50 个粒子）** ，但**性能确实很差**。

 **这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-17T12:35:26.063

我将引用 Apple Doc 并解释：

```
@property BOOL shouldRasterize 
```

> 当此属性的值为 YES 时，图层在其本地坐标空间中呈现为位图，然后与任何其他内容合成到目的地。阴影效果和滤镜属性中的任何滤镜都被光栅化并包含在位图中。但是，图层的当前不透明度未栅格化。如果光栅化位图在合成过程中需要缩放，则根据需要应用 minificationFilter 和 magnificationFilter 属性中的过滤器。

所以基本上当 shouldRasterize 设置为 YES 时，将计算构成图层的每个像素，并将整个图层缓存为位图。

*   你什么时候能从中受益？

当您只需要绘制一次时。这意味着当您只需要纯粹的“简单”动画（例如移动、变换、缩放...）时，因为 CoreAnimation 实际上会使用该层，而无需在每一帧都重新绘制它。结合 CoreAnimation 缓存复杂图层（带有阴影和角半径）是一个非常强大的功能。

*   它什么时候会杀死你的帧率？

当你的图层多次*重新显示*时，因为在已经生效的绘图之上，`shouldRasterize`会处理所有像素以缓存位图数据。

因此，您应该问自己的真正问题是：*“我在哪一层上应用`shouldRasterize`YES ？该层多久重绘一次？”*

希望这已经足够清楚了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-17T12:04:00.187

关闭 self.layer.shouldRasterize 将性能提高到正常水平。

这是为什么？

根据苹果开发者网站上的视频（我不记得视频了，请帮忙？） self.layer.shouldRasterize 的规则很简单：如果您的所有子视图都是静态的（它们的位置、内容等，没有改变或动画) 然后将 self.layer.shouldRasterize 打开是受益者。另一方面，如果任何子视图发生变化，那么框架需要重新缓存视图层次结构，这是一个巨大的瓶颈。在底层，瓶颈是 CPU 和 GPU 之间的内存复制。**

# php - 使用php重命名文件

> ID：11521962
> 
> 赞同：1
> 
> 时间：2012-07-17T11:55:59.690
> 
> 标签：php, opendir

有以下脚本。

```
<?php

if ($handle = opendir('files/')) {
    while (false !== ($fileName = readdir($handle))) {
        $newName = str_replace("SKU#","",$fileName);
        rename(fileName, $newName);
    }
    closedir($handle); } ?> 
```

我的脚本在 iss 的根目录中。

```
inetpub/wwwroot 
```

因此，我试图访问文件夹 files/，它是 wwwroot 的一级。其中包含一张名为：

```
"WV1716BNSKU#.zoom.1" 
```

我正在使用 Windows 操作系统，不知道为什么这不起作用，代码看起来是文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:11:09.940

你得到什么错误？确保 PHP 设置为显示所有错误。

您的脚本还必须与要重命名的文件位于同一文件夹中，因为所有路径都是相对的。

试试这个：

```
if ($handle = opendir('./')){

    while (false !== ($fileName = readdir($handle))){
        $newName = str_replace("SKU#", "", $fileName);
        rename($fileName, $newName);
    }

    closedir($handle);
} 
```

# php - 使用 PHP SDK 在 Facebook 上进行 APP 身份验证

> ID：11521965
> 
> 赞同：0
> 
> 时间：2012-07-17T11:56:04.570
> 
> 标签：php, facebook, facebook-graph-api, authentication

我在使用通过 Facebook PHP SKD 生成的链接验证我的 Facebook APP 时遇到问题：

当我单击链接时，facebook 上出现错误（发生错误。请稍后再试。）我不会被重定向到“应用程序登录页面”。

> [https://www.facebook.com/dialog/oauth?redirect_uri=http%3A%2F%2Fxxx.test.net%2Fstart.php&state=8d0ea10xxxxxxx290be6c654f02xxxa&scope=user_likes](https://www.facebook.com/dialog/oauth?redirect_uri=http%3A%2F%2Fxxx.test.net%2Fstart.php&state=8d0ea10xxxxxxx290be6c654f02xxxa&scope=user_likes)

这是 index.php 的代码：

```
<?php
  require_once("./fbsdk/facebook.php");
//test.net
  $config = array();
  $config[‘appId’] = '37353621936xxxx'; 
  $config[‘secret’] = 'fd39e0f0861f2bdae4fc79274749xxxx';
  $config[‘fileUpload’] = false; // optional

  $facebook = new Facebook($config);

?>
<!DOCTYPE html>
<html>
<head>
<title>
FB-DEV-TEST
</title>

</head>
<body>

<?php

$params = array(
  'scope' => 'user_likes',
  'redirect_uri' => 'http://xxx.test.net/start.php'
);

$loginUrl = $facebook->getLoginUrl($params);

echo "<a href=\"$loginUrl\">Login</a>";

?>

</body>
</html> 
```

我已经阅读[了这篇](https://stackoverflow.com/questions/7231939/redirecting-to-authentication-dialog-an-error-occurred-please-try-again-late)文章，但我仍然无法找出问题所在......我必须在 Facebook APP 中心进行任何更改，然后才能登录？感谢您的帮助和抱歉，因为我的英语不好！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:50:39.717

我能想到的一些清单：

*   确保您的 Facebook 应用程序未处于沙盒模式（除非您在单击登录链接之前已登录您的 Facebook 帐户）

*   在[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)：
    必须选中“使用 Facebook 登录的网站”，但对于“站点 URL”，您可以输入任何登陆 URL。

*   同样在[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)：
    确保在 App Domains 下输入您的站点域。

或者，您可能想查看[Opauth](http://opauth.org)，这是一个为您处理这些的 PHP 身份验证框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:39:23.137

检查您的redirect_url 域是否与developers.facebook.com 上的应用设置中的“站点URL：”匹配。

# java - 自动人类可读的时间间隔

> ID：11521967
> 
> 赞同：9
> 
> 时间：2012-07-17T11:56:13.913
> 
> 标签：java, api, date, datetime, time

我想以人类可读的格式表达一些**时间间隔**。我正在寻找一个能够自动选择正确尺寸单位的库。时间间隔从几毫秒到几周不等。就像是

*   0.2s
*   2:00
*   4天
*   ...

我知道我可以手动检查参数的大小然后转换它，但在重新发明轮子之前我想问是否有一个（标准）库来实现这一点。

*   [TimeUnit](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html)进行转换，但不知道参数的大小
*   [Joda-Time](http://www.joda.org/joda-time/) [Duration](http://www.joda.org/joda-time/key_duration.html)正是我需要的，但我没有找到太多关于表示的信息（但对于[ReadableDuration](http://www.joda.org/joda-time/apidocs/org/joda/time/ReadableDuration.html)的 ISO8601 格式）

**编辑**：

我的输入以纳秒为单位，输出如上所述。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-17T11:58:35.100

检查[漂亮时间](http://ocpsoft.org/prettytime/)

> PrettyTime 是一个开源时间格式库。完全可定制，PrettyTime 创建人类可读的相对时间戳，就像在 Digg、Twitter 和 Facebook 上看到的那样。很简单，“现在就开始！” 超过 18 种语言！

**例如**

```
 PrettyTime p = new PrettyTime();
    System.out.println(p.format(new Date()));
    //prints: “right now”

    PrettyTime t = new PrettyTime(new Date(3155692597470L * 3L));
    t.format(new Date(0));
    //3 centuries ago 
```

# command-line - Maven：如何通过命令行激活非活动代理？

> ID：11521974
> 
> 赞同：7
> 
> 时间：2012-07-17T11:56:26.743
> 
> 标签：command-line, maven-2, proxy

我通过每个用户的 settings.xml 文件为 Maven 配置了代理服务器。截断默认 settings.xml 模板的文档表明，可以通过命令行开关影响使用哪个已配置代理：

```
<!-- proxies
 | This is a list of proxies which can be used on this machine to connect to the network.
 | Unless otherwise specified (by system property or command-line switch), the first proxy
 | specification in this list marked as active will be used.
 |--> 
```

但是，我没有找到任何关于这应该如何工作的文档。[Maven 文档](http://maven.apache.org/guides/mini/guide-proxies.html)具有非常相同的模板，但没有提及任何命令行开关或其他内容。

因此，假设我配置了一个代理，但标记为`<active>false</active>`，如下例所示：

```
<proxies>
    <proxy>
        <id>firstProxy</id>
        <active>false</active>
        <protocol>http</protocol>
        <host>proxy.example.invalid</host>
        <port>3128</port>
    </proxy>
</proxies> 
```

根据评论，会有一些方法可以“激活”它，可能会给出它的 id 或类似的东西。尝试使用“明显” `mvn -Dproxies.proxy.firstProxy.active=true java:compile`，但没有成功。

我对 Maven 很陌生，无法摆脱我以某种方式在错误的树上吠叫的感觉。我正在尝试做的事情是否可能——如果是这样，任何人都可以指出我如何做的描述——还是我在浪费我的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-27T15:35:13.103

正如@khmarbaise 建议的那样：

使用许多 settings.xml，例如将它们放在项目根目录中

```
mvn package -s setings.A.xml

mvn package -s setings.B.xml 
```

# iphone - NSArray arrayWithObjects 中的颜色

> ID：11521975
> 
> 赞同：-2
> 
> 时间：2012-07-17T11:56:28.140
> 
> 标签：iphone, colors, nsarray, nsnumber

我有一个简单的 iphone 游戏排行榜表，可以让我查看以前的高分，但是背景是黑色的，因此不可见。我正在使用代码：

`[highscores addObject:[NSArray arrayWithObjects:@"Title",[NSNumber numberWithInt:5000],nil]];`

我可以轻松更改颜色吗？

非常感谢所有帮助，我希望它很简单，但谷歌回来的很少。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:29:44.330

更改颜色与 Array 无关。它与显示**Title**的容器有关。**您可以将Title**字符串绑定到任何 UILabel。

所以你必须将**textColor**属性设置为白色。

例如：**label1.textColor = [UIColor whiteColor];**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:30:23.573

要使 UILabel 变白，请删除以下代码：

```
[label1 setRGB:0 :0 :0]; 
```

并添加这样做：

```
[label1 setTextColor:[UIColor whiteColor]]; 
```

让我知道这是否对您有帮助。发布您的代码肯定会有所帮助。你在 14 岁时表现出色，所以继续努力。

# asp.net-mvc-3 - Telerik ASP .NET 控件

> ID：11521977
> 
> 赞同：1
> 
> 时间：2012-07-17T11:56:47.540
> 
> 标签：asp.net-mvc-3, telerik

我想在我的 ASP MVC 应用程序中创建一个组织结构图。我们已经获得 Telerik AJAX 控件的许可证 - 它具有组织结构图控件。

有谁知道我们是否可以在 MVC 应用程序中使用 Telerik ASP.NET 控件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:59:20.470

Telerik 有一个 ASP.NET MVC 部分，它显示了图表的使用：

[http://www.telerik.com/products/aspnet-mvc.aspx](http://www.telerik.com/products/aspnet-mvc.aspx)

但是，我认为您必须与他们核实这是否是您的许可证的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:00:31.743

虽然没有真正回答您的问题，但您不能使用 Telerik 控件，而是使用 Google 提供的 JavaScript 库（免费）。

这是取自[Google 网站](https://developers.google.com/chart/interactive/docs/gallery/orgchart)的示例代码。

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['orgchart']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Name');
        data.addColumn('string', 'Manager');
        data.addColumn('string', 'ToolTip');
        data.addRows([
          [{v:'Mike', f:'Mike<div style="color:red; font-style:italic">President</div>'}, '', 'The President'],
          [{v:'Jim', f:'Jim<div style="color:red; font-style:italic">Vice President</div>'}, 'Mike', 'VP'],
          ['Alice', 'Mike', ''],
          ['Bob', 'Jim', 'Bob Sponge'],
          ['Carol', 'Bob', '']
        ]);
        var chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
        chart.draw(data, {allowHtml:true});
      }
    </script>
  </head>

  <body>
    <div id='chart_div'></div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T23:00:33.660

简而言之，是的。

我们没有使用组织图表，但我们在 MVC 项目的视图中使用了一些 Telerik asp.net ajax 控件（最新版本的日历、网格和树视图）。

您只需要在视图中引用 Telerik.Web.UI。

显示正在使用的日历的基本代码：

```
<%@ Register TagPrefix="telerik" Namespace="Telerik.Web.UI" Assembly="Telerik.Web.UI" %>

<asp:Content ID="aboutTitle" ContentPlaceHolderID="TitleContent" runat="server">
    About Us
</asp:Content>

<asp:Content ID="aboutContent" ContentPlaceHolderID="MainContent" runat="server">
    <h2>About</h2>
    <p>
        Put content here.
    </p>
    <telerik:RadScriptManager ID="RadScriptManager1" runat="server" />

    <telerik:RadCalendar ID="RadCalendar1" runat="server" TitleFormat="MMMM yyyy" CultureInfo="English (United States)"
        PresentationType="Preview" EnableNavigation="false" EnableMonthYearFastNavigation="false">
    </telerik:RadCalendar>
</asp:Content> 
```

# java - Google App Engine 中的哈希密码和实例小时数配额

> ID：11521979
> 
> 赞同：1
> 
> 时间：2012-07-17T11:56:56.467
> 
> 标签：java, security, google-app-engine, passwords, hash

我已经阅读了很多关于密码存储、散列、加盐、“peppering”、MAC 等的内容，因为我即将创建一个新网站，安全性对我来说非常重要，但是我正在考虑有一些原因不使用目前不相关的 Google 身份验证（或 Facebook、OpenID 或任何其他），但这让我想到了这一点。

我是 Google App Engine 的新手，这将是我的第一个项目，我对“实例小时数”以及它如何不再有“CPU 时间”但上述配额有点困惑。更糟糕的是，我无法理解什么是 Instance Hours Free Quota。

这就是为什么我担心配额以及这与我的安全问题有什么关系：我在各处阅读的一个建议是进行多次迭代并对密码进行多次散列，因为这会使攻击者花费很多更多时间（我没有数字，但它们在[https://security.stackexchange.com/](https://security.stackexchange.com/)上随处可见）。

多次迭代对 CPU 时间有直接影响，如果 GAE 有 CPU 时间配额，我认为每次用户登录时进行 1000 次迭代可能是一个问题，但是如果他们计算的是从请求完成到 up 的实例小时数到十五分钟后，在[GAE 配额文档](https://developers.google.com/appengine/docs/quotas?hl=es)中阅读的是：

> 通常，实例使用根据实例的正常运行时间按小时计费。计费在实例启动时开始，在实例关闭十五分钟后结束。您只需为空闲实例付费，最多为在管理控制台的性能设置选项卡中设置的最大空闲实例数。运行时开销计入实例内存。

那么这意味着如果我的用户登录（哈希 1000 次），然后他们继续使用该网站，Instance Hours 将继续求和，直到他们全部离开页面 + 15 分钟？如果这是真的，那么让它迭代 1000 次不会对我的配额产生重大影响，除了用户登录所需的“额外”时间，但我知道这一点，这是我的代价'愿意付钱。

我将进行的迭代次数将使得登录时间对用户来说可以接受且不易察觉，所以不要担心这一点。

**我的问题是：**

1.  **进行许多迭代是否会对实例小时数产生直接影响，或者我对如何对实例小时数求和的假设是否正确？**
2.  **我以某种方式缺少的 Google App Engine 上是否有 CPU 时间配额？它有免费配额吗？**
3.  **什么是实例小时免费配额？**

答案：

1.  看看 Moishe 接受了答案和他提出的另一个问题（尚未回答但有有用[的评论） App Engine 调度程序何时使用新线程与新实例？](https://stackoverflow.com/questions/11525717/when-does-the-app-engine-scheduler-use-a-new-thread-vs-a-new-instance)
2.  根据谷歌没有CPU时间配额：http: [//googleappengine.blogspot.com.es/2009/02/skys-almost-limit-high-cpu-is-no-more.html](http://googleappengine.blogspot.com.es/2009/02/skys-almost-limit-high-cpu-is-no-more.html)
3.  在此处找到问题 3 的答案：已[达到 Google App Engine 前端实例小时数限制](https://stackoverflow.com/questions/11044186/google-app-engine-frontend-instance-hours-limit-reached)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:24:33.190

只要服务器正在运行、响应请求等，实例时间就是如此。如果您的服务器没有运行，它就无法在请求或任何事情上唤醒。

将实例时间想象为打开计算机。当它打开时，你会被计费，而不是在它关闭时。

你可以有多个实例，假设你有两个实例，你的实例小时数是原来的两倍。

您的密码散列不会影响这一点，因为它只会在实例打开时产生实例小时数，而当它关闭时，它不会产生任何实例小时数，但它也不会散列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:08:48.377

如果处理请求需要很长时间，例如。您正在做一些计算量非常大的事情，并且您不希望其他用户等待很长时间，App Engine 调度程序可能会启动您的应用程序的另一个实例来处理传入请求。

想象一下，计算密码的哈希值需要 1 分钟，而在那一分钟内，您的应用程序会收到另一个用户的请求。该用户可以等待一分钟以获得对其请求的响应，或者 App Engine 调度程序可以启动另一个实例来服务该请求并更快地获得响应。您可以使用管理控制台中应用程序设置页面上的性能滑块调整是否会出现另一个实例。

基本上，您需要询问的有关实例时间的问题是：您是否可能会收到重叠的请求（即，在当前请求完成之前收到新请求）。如果这种情况不经常发生，并且您希望为您的用户提供快速响应，您将需要预算更多的实例小时数。

我怀疑您需要进行的大型计算并不常见——例如，仅在初始登录时生成 cookie，而不是针对每个请求。

要明确回答您的问题 #1，进行多次迭代只会在导致重叠请求时对您的实例小时数产生影响。如果您每 30 秒只收到一个请求，则您可以花费 30 秒来处理每个请求（包括计算每个哈希和执行其他操作）并且不超过您的免费实例小时配额。相反，如果您每秒收到 10 个请求并花费超过 100 毫秒来处理请求，那么您将很快开始超过您的实例小时数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:19:39.227

有多个来源涵盖密码。您显然已经阅读了一些鼓励多遍散列的内容。在最终确定此决定之前，请考虑下面的第一个链接。此页面的摘录：“很容易得意忘形并尝试组合不同的哈希函数，希望结果会更安全。但在实践中，这样做没有任何好处。它所做的只是产生互操作性问题，有时甚至会降低哈希的安全性。”

需要考虑两个有价值的链接（第一个有上面的引用，第二个是好的“如何”来源）：

[http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

[http://throwingfire.com/storing-passwords-securely/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+throwingfire+%28Throwing+Fire%29#notpasswordhashes](http://throwingfire.com/storing-passwords-securely/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+throwingfire+%28Throwing+Fire%29#notpasswordhashes)

# .net - 报表查看器 Web 控件需要 Web 表单上的 System.Web.UI.ScriptManager

> ID：11521984
> 
> 赞同：12
> 
> 时间：2012-07-17T11:57:06.820
> 
> 标签：.net, reporting-services, rdl

我试图调用在 SSRS 中创建的 .rdl 报告以在 aspx 页面中调用；但我收到以下错误：

> 报表查看器 Web 控件需要一个`System.Web.UI.ScriptManager`在线表单

我的代码如下，

```
protected void Page_Load(object sender, EventArgs e)
{
    //string query = Session["ClosedBugsResult1"].ToString();

    if(!IsPostBack)
    ReportViewer1.ProcessingMode = ProcessingMode.Remote; 
    ReportViewer1.ServerReport.ReportServerUrl = new Uri("http://localhost/reportserver"); 
    ReportViewer1.ServerReport.ReportPath = @"D:\Users\XXX\Documents\Visual Studio 2008\Projects\BugtrackerSample1\BugTrackerSample\BugTrackerSample\Report1.rdl"; 

    //ReportParameter[] param = new ReportParameter[1]; 
    //param[0] = new ReportParameter("CustomerID", txtparam.Text);
    //ReportViewer1.ServerReport.SetParameters(param);
    System.Web.UI.ScriptManager scriptManager = new ScriptManager(); 
    Page page = new Page();
    System.Web.UI.HtmlControls.HtmlForm form = new HtmlForm();
    form.Controls.Add(scriptManager); 
    form.Controls.Add(ReportViewer1); 
    page.Controls.Add(form);
    page.DataBind();  //exception here 
    ReportViewer1.ServerReport.Refresh();
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-22T09:07:17.520

在报表表单上，在报表控件之前从工具箱中添加一个脚本管理器：打开工具箱并选择 Ajax Extensions - Script Manager，然后将其拖到表单上。使用 Visual Studio 2012，我最终得到的是表单上的以下新控件：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager> 
```

有关 Visual Studio 2012 的完整详细信息，请访问[http://msdn.microsoft.com/en-us/library/ms252104.aspx](http://msdn.microsoft.com/en-us/library/ms252104.aspx)

# java - Rally 使用 Java Toolkit for Rally REST API 从 Java 更新变更集数据

> ID：11521986
> 
> 赞同：0
> 
> 时间：2012-07-17T11:57:19.437
> 
> 标签：java, rest, rally

我需要为故事创建一个新的变更集条目，因为我有故事的 formattedID 和 objectID。我正在使用给定的 Java Toolkit for Rally REST API (http://developer.rallydev.com/help/java-toolkit-rally-rest-api)

这里的任何帮助都会非常有用，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:54:06.730

以下是如何完成此操作的示例：

```
public class RestExample_AddChangesetToUserStory {

    public static void main(String[] args) throws URISyntaxException, IOException {

        // Rally parameters
        String rallyURL = new String("https://rally1.rallydev.com");
        String wsapiVersion = new String("1.36");
        String userName = new String("user@company.com");
        String userPassword = new String("password");
        String applicationName = new String("RestExample_AddChangeSetToStory");

        // Workspace and Project refs
        String workspaceRef = new String("/workspace/12345678910");
        String projectRef = new String("/project/12345678911");

        // Create and configure a new instance of RallyRestApi
        RallyRestApi restApi = new RallyRestApi(
                                                    new URI(rallyURL), 
                                                    userName,
                                                    userPassword
                                                );
        restApi.setWsapiVersion(wsapiVersion);
        restApi.setApplicationName(applicationName);

        // Changeset Owner Username
        String changesetOwner = new String("changesetowner@company.com");

        // SCM Repository Name
        String scmRepositoryName = new String("SVNRepository");

        // FormattedID of Artifact to associate to
        String storyFormattedID = "US14";

        //Read User
        QueryRequest userRequest = new QueryRequest("User");
        userRequest.setFetch(new Fetch("UserName", "Subscription", "DisplayName"));
        userRequest.setQueryFilter(new QueryFilter("UserName", "=", changesetOwner));
        QueryResponse userQueryResponse = restApi.query(userRequest);
        JsonArray userQueryResults = userQueryResponse.getResults();
        JsonElement userQueryElement = userQueryResults.get(0);
        JsonObject userQueryObject = userQueryElement.getAsJsonObject();        
        String userRef = userQueryObject.get("_ref").toString();
        System.out.println("userRef: " + userRef);

        // Query for SCMRepository which pertains to this ChangeSet
        QueryRequest scmRequest = new QueryRequest("SCMRepository");
        scmRequest.setFetch(new Fetch("ObjectID","Name","SCMType"));
        scmRequest.setWorkspace(workspaceRef);
        scmRequest.setProject(projectRef);
        scmRequest.setQueryFilter(new QueryFilter("Name", "=", scmRepositoryName));
        QueryResponse scmQueryResponse = restApi.query(scmRequest);
        JsonObject scmJsonObject = scmQueryResponse.getResults().get(0).getAsJsonObject();
        String scmRef = scmJsonObject.get("_ref").toString();
        System.out.println("scmRef: " + scmRef);

        // Query for Story to which we want to add ChangeSet
        QueryRequest storyRequest = new QueryRequest("HierarchicalRequirement");
        storyRequest.setFetch(new Fetch("FormattedID","Name","Changesets"));
        storyRequest.setQueryFilter(new QueryFilter("FormattedID", "=", storyFormattedID));
        storyRequest.setWorkspace(workspaceRef);
        storyRequest.setProject(projectRef);
        QueryResponse storyQueryResponse = restApi.query(storyRequest);
        JsonObject storyJsonObject = storyQueryResponse.getResults().get(0).getAsJsonObject();
        JsonArray changesetJsonArray = storyJsonObject.getAsJsonArray("Changesets");
        String storyRef = storyJsonObject.get("_ref").toString();

        System.out.println("storyRef: " + storyRef);
        System.out.println("Number of existing Changesets: " + changesetJsonArray.size());

        // Setup JsonObject for new Changeset
        JsonObject newChangeset = new JsonObject();
        newChangeset.addProperty("SCMRepository", scmRef);
        newChangeset.addProperty("Author", userRef);
        newChangeset.addProperty("Revision", "2451");
        newChangeset.addProperty("Uri", "https://svnrepo.company.com:8001");
        newChangeset.addProperty("CommitTimestamp", "2012-07-18T18:00Z");
        // Artifacts JsonArray for collection on Changeset
        JsonArray artifactsJsonArray = new JsonArray();
        artifactsJsonArray.add(storyJsonObject);

        // Associate newChangeset to Story artifact
        newChangeset.add("Artifacts", artifactsJsonArray);

        try {

            //Create the Changeset
            System.out.println("Creating Changeset...");

            CreateRequest createRequest = new CreateRequest("Changeset", newChangeset);
            System.out.println(createRequest.getBody());
            CreateResponse createResponse = restApi.create(createRequest);

            if (createResponse.wasSuccessful()) {
                System.out.println(String.format("Created %s", createResponse.getObject().get("_ref").getAsString()));
                String[] warningList;
                warningList = createResponse.getWarnings();
                for (int i=0;i<warningList.length;i++) {
                    System.out.println(warningList[i]);
                }
            } else {
                String[] errorList;
                errorList = createResponse.getErrors();
                for (int i=0;i<errorList.length;i++) {
                    System.out.println(errorList[i]);
                }
            }

        } finally {
            //Release all resources
            restApi.close();
        }
    }
} 
```

# c++ - 当类成员隐藏其父类的类成员时，C++ 会生成警告吗？

> ID：11521989
> 
> 赞同：18
> 
> 时间：2012-07-17T11:57:23.430
> 
> 标签：c++, gcc

当派生类成员变量名称隐藏其父类之一时，是否有办法生成警告，例如

```
class Mother 
{
public:
  Mother() : i(0) {}
  virtual ~Mother() {}
protected:
  int i;
};

class Child : public Mother
{
public:
  Child() : Mother(), i(0) {}
  virtual ~Child() {}
protected:
  int i; /* NOK Expecting warning : declaration of 'int Child::i' shadows 'int Mother::i' */
}; 
```

`-Wshadow`上面的代码在使用 g++编译时不会产生警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:33:44.797

我实际上看到了如下代码，它显示了影子警告的必要性。

```
int val = 0;

if (flag == aval) 
  int val = firstval;
else if (flag == bval)
  int val = secondval;
else if
.
.
.

switch (val)
{

// put cases here

} 
```

我还看到了阴影警告，其中内部变量是本地变量，对外部变量没有影响，并且不应该引用阴影变量。实际上，更改名称以防止警告更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-26T09:09:33.157

在我的测试中，`gcc`7.4.0 确实没有显示警告`-Wshadow`（也没有显示其他`-Wshadow*`标志，并且[当前文档](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)没有说明这种可能性。

但是`clang`6.0.0 有选项`-Wshadow-field`（包含在 中`-Wshadow-all`），它提供了您的代码：

> main.cxx:43:7：警告：“孩子”阴影成员的非静态数据成员“i”继承自“母亲”类型 [-Wshadow-field]
> 
> 诠释我; /* NOK 期待警告：'int Child::i' 的声明 shadows 'int Mother::i' */
> 
> main.cxx:34:7: 注意：在这里声明

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-07-17T12:19:23.390

这不会显示警告，因为这是允许的。这是可能的，因为*“最多其中一个名称实际上是在该范围内定义的；其他名称将仅在该范围内可见。名称解析规则确定选择哪个名称，如果有多个候选人......你真的这样做了不想对编译器在备选方案之间进行选择的每种情况发出警告。”* - [@MSalters](https://stackoverflow.com/a/964019/195488)。

# node.js - Mongoose 和 Kue - Node.js - 传递的对象没有保存方法

> ID：11521990
> 
> 赞同：2
> 
> 时间：2012-07-17T11:57:26.747
> 
> 标签：node.js, mongodb, request, mongoose, kue

我正在使用 mongoose 和 Kue 进行流量控制。我将从数据库中检索到的对象传递给 Kue。当作业得到处理时，该对象不再具有某些功能，例如 .save() 等。

```
 jobs.process('process', 5, function(job, done) {
        var url = job.data.url;
        var objo = job.data.comp;

        request({uri:url, json:true}, function(err, res, body) {
            objo.meta = body;

            // Here it throw an error that save is note defined
            // TypeError: Object #<Object> has no method 'save'
            objo.save(function(err) {
                if (err)
                    throw err;
                console.log('Saved data for ' + objo.title);
                done();
            });
        });
    });

    var q = db.Entity.find({}).sort('_id', 1).limit(10);

    q.execFind(function(err, docs) {
        docs.forEach(function(objo) {

            jobs.create('process', {
                comp : objo,
                url : 'http://example.com/' + encodeURIComponent(objo.permalink) + '.js'
            }).save();
        })
    }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T01:48:01.313

这是因为 Kue 并没有完全保存对象，它只是保存了调用`JSON.stringify()`它的值。您需要传入对象的 id，然后将 mongoose 表示从您的工作人员的数据库中取出。

# c# - 为什么 VBScript 服务只有在用户登录时才能工作？

> ID：11521994
> 
> 赞同：0
> 
> 时间：2012-07-17T11:57:30.490
> 
> 标签：c#, vbscript

我们从一个 Web 服务中执行一个脚本，该脚本在 VBScript 中执行一些操作。此脚本从命令行运行而不会出现错误。当我们使用 ProcessStartInfo 从服务运行此脚本时，当运行该进程的用户未登录时，它不会执行。我们收到此错误：CScript 错误：加载您的设置失败。（访问被拒绝。）虽然，当执行服务的用户通过远程桌面登录时，服务运行成功。什么可能导致这种情况，我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:31:05.953

当您收到“访问被拒绝”消息时，运行 VBScript 的用户身份是什么？我敢打赌`NT AUTHORITY\NETWORK SERVICE`，这可以解释它。

当您在通过 cmd 登录或在资源管理器中双击时运行任何内容时，该进程将在当前用户的用户身份（安全上下文）下运行。当您在本地控制台会话（例如服务会话）之外运行它时，它通常以父服务进程的用户身份运行。

“服务”是指 Windows 服务（您在 Services.msc 中看到的）还是您的 Web 服务？如果它是 Web 服务，那么它会在当前 IIS 应用程序池的用户身份下运行。

尝试从您的 Web 服务脚本运行“whoami”（它是一个命令行程序）并将控制台输出重定向到一个文件。这将告诉您当前正在使用的用户身份。

# javascript - Javascript数组转换为函数不起作用？

> ID：11521997
> 
> 赞同：0
> 
> 时间：2012-07-17T11:57:39.923
> 
> 标签：javascript, arrays, dynamic, add, field

我经常使用这个网站进行研究等，发现它非常有用。

我一直在开发一些代码，它将获取输入 id 名称的列表，然后使用 javascript/jquery 将这些值添加在一起。

这就是我到目前为止所拥有的 - 因为我还是个新手，所以它可能很离谱。

到目前为止，代码可以很好地获取输入的名称。它的计算也很好，但是当我将数组放入“var fieldnames”时，计算停止工作了吗？

当我将数组复制出来（将其放入输入之后）并将其粘贴到“var fieldnames”中时，它可以正常工作。

问题似乎是数组没有正确传递给“var fieldnames”？

这是页面中的代码-它将数组放入底部的输入中仅用于调查目的，但除非您手动输入输入名称，否则计算不起作用！

任何帮助将非常感激。谢谢

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head><body>

<script type="text/javascript" language="javascript">
function getTotal(oForm)
  {
var arrayOfIDs = $('.myClass').map(function() { return this.id; }).get();
var test = (arrayOfIDs.length ? "'" + arrayOfIDs.join("','") + "'" : "");

 document.getElementById("sum").value = test;

  var field, i = 0, total = 0, els = oForm.elements;
  var fieldnames = [test];

  document.getElementById("sum1").value = fieldnames;

  for (i; i < fieldnames.length; ++i)
  {
  field = els[fieldnames[i]];
  if (field.value != '' && isNaN(field.value))
  {
  alert('Please enter a valid number here.')
  field.focus();
  field.select();
  return '';
  }
  else total += Number(field.value);
  }
  return ' ' + total;
  }
</script>

<div id="listing">
<form>
<table>
<td>8065020</td>
<td>2012-04-10</td>
<td>household</td>
<td><input    class="myClass" id="pay47" type="text" name="pay47" value="38.45"/></td>
</tr>
<tr>
<td>8065021</td>
<td>2012-04-10</td>

<td>household</td>
<td><input   class="myClass" id="pay48" type="text" name="pay48" value="37.4"/></td>
</tr>
<tr>
<td>8065022</td>
<td>2012-04-10</td>
<td>household</td>
<td><input   class="myClass"  id="pay49" type="text" name="pay49" value="375"/></td>
</tr>
<tr>
<td>8065014</td>
<td>2012-04-04</td>

<td>household</td>
<td><input type="text"  class="myClass"  id="pay50" name="pay50" value="06"/></td>
</tr>
<tr>
<td>8065015</td>
<td>2012-04-04</td>
<td>motorprotect</td>
<td><input type="text"  class="myClass"  id="pay51" name="pay51" value="01"/></td>
</tr>
<tr>
<td>8065011</td>
<td>2012-03-06</td>

<td>household</td>
<td><input type="text"   class="myClass" id="pay52" name="pay52" value="55"/></td>
</tr>
<tr>
<td>8065012</td>
<td>2012-03-06</td>
<td>household</td>
<td><input type="text"  class="myClass"  id="pay53" name="pay53" value="56"/></td>
</tr>
<tr>
<td>1</td>
<td/>

<td>household</td>
<td><input type="text"   class="myClass" id="pay54" name="pay54" value="56"/></td>
</tr>
<tr>
<td>2</td>
<td/>
<td>household</td>
<td><input type="text"  class="myClass"  id="pay55" name="pay55" value="52"/></td>
</tr>
<tr>
<td>3</td>
<td/>
<td>household</td>

<td><input type="text"  class="myClass"  id="pay56" name="pay56" value="53"/></td>
</tr>
<tr>
<td>4</td>
<td/>
<td>household</td>
<td><input type="text"  class="myClass"  id="pay57" name="pay57" value="55"/></td>
</tr>
<tr>
<td>8065001</td>
<td/>
<td>landlord</td>
<td><input type="text"  class="myClass"  id="pay58" name="pay58" value="5"/></td>

</tr>
<tr>
<td>8065002</td>
<td/>
<td>landlord-basic</td>
<td><input type="text"   class="myClass" id="pay59" name="pay59" value="59"/></td>
</tr>
<tr>
<td>8065003</td>
<td/>
<td>household</td>
<td><input type="text"  class="myClass"  id="pay60" name="pay60" value="5"/></td>
</tr>

<tr>
<td>8065004</td>
<td/>
<td>household</td>
<td><input type="text"  class="myClass"  id="pay61" name="pay61" value="5"/></td>
</tr>
<tr>
<td>8065005</td>
<td/>
<td>household</td>
<td><input type="text"   class="myClass" id="pay62" name="pay62" value="5"/></td>
</tr>
<tr>

<td>8065006</td>
<td/>
<td>landlord-basic</td>
<td><input type="text"   class="myClass"  id="pay63" name="pay63" value="64"/></td>
</tr>
<tr>
<td>8065008</td>
<td/>
<td>household</td>
<td><input type="text"   class="myClass" id="pay64" name="pay64" value="5" /></td>
</tr>
<tr>
<td>8065010</td>

<td/>
<td>business-basic</td>
<td><input type="text"  class="myClass"  id="pay65" name="pay65" value="10" /></td>
</tr>
</table>

<input id="total" type="text" name="total" value="" readonly="readonly" /> 
<input type="button" value="Get Total" onclick="total.value=getTotal(this.form)" />
<br /><br />
<input name="totalpay" id="sum" type="text" />sum<br />
<input name="totalpay" id="sum1" type="text" />sum1
</form>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:43:06.800

1-更换线路

```
var test = (arrayOfIDs.length ? "'" + arrayOfIDs.join("','") + "'" : ""); 
```

经过

```
var test = (arrayOfIDs.length ? arrayOfIDs.join(",") : ""); 
```

2-更换

```
var fieldnames = [test]; 
```

经过

```
var fieldnames = test.split(","); 
```

3-更换

```
field = els[fieldnames[i]]; 
```

经过

```
field = document.getElementById(fieldnames[i]); 
```

我在这里所做的只是纠正你的代码来解决你的问题，但我确信你可以用更简单的方式做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:17:02.020

如果我正确理解了您的问题，并且您只想将您的值相加，同时提供基本的有效性检查，那么您的代码就会变得复杂。像 jQuery 这样的框架为您提供了更简单的方法。

而不是遍历所有输入元素，获取它们的 id 然后再次遍历它们，只需执行一次。

```
var getTotal (oForm) {
    var sum = 0;
    // loop through all inputs with class "myClass" inside oForm
    $("input.myClass", $(oForm)).each(function (index, value) {
        // add up all values that are non empty and numeric
        if (value !== "" && !isNaN(value)) {
            // parse the value
            sum += parseFloat(value, 10);
        } else {
            // show an alert, focus the input and return early from $.fn.each
            alert("Please enter a valid number here!");
            $(this).focus();
            return false;
        }
    });

    // set the value of 
    $("sum").val(sum);
} 
```

这是从我的头顶写的，但应该可以正常工作。