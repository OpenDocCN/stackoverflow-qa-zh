# StackOverflow 问答 10152000-10152999

# optimization - 用遗传算法建立排名，

> ID：10152002
> 
> 赞同：3
> 
> 时间：2012-04-14T07:52:42.300
> 
> 标签：optimization, genetic-algorithm, ranking, mathematical-optimization, traveling-salesman

BIG版后的问题：

我需要使用遗传算法建立一个排名，我有这样的数据：

```
P(a>b)=0.9
P(b>c)=0.7
P(c>d)=0.8
P(b>d)=0.3 
```

现在，让我们解释`a,b,c,d`为足球队的名称，并且`P(x>y)`是`x`获胜的概率`y`。我们想要建立团队排名，我们缺乏一些观察`P(a>d)`，`P(a>c)`由于缺乏 a vs d 和 a vs c 之间的匹配而丢失。目标是找到最能描述这四支球队联赛现状的球队名称排序。

如果我们只有 4 个团队而不是简单的解决方案，首先我们计算`4!=24`四个团队的所有排序的概率，同时忽略我们拥有的缺失值：

`P(abcd)=P(a>b)P(b>c)P(c>d)P(b>d)`

`P(abdc)=P(a>b)P(b>c)(1-P(c>d))P(b>d)`

...

`P(dcba)=(1-P(a>b))(1-P(b>c))(1-P(c>d))(1-P(b>d))`

我们选择概率最高的排名。我不想使用任何其他健身功能。

**我的问题 ：**

由于 n 元素的排列数量`n!`对于大 n （我的 n 约为 40）不可能计算所有排序的概率。我想使用遗传算法来解决这个问题。

变异算子是两个（或更多）排名元素位置的简单切换。

但是如何使两个排序交叉？

可以`P(abcd)`解释为不对称 TSP 问题中路径“abcd”的成本函数，但从 x 到 y 的旅行成本与从 y 到 x 的旅行成本不同，`P(x>y)=1-P(y<x)`？TSP问题的交叉算子有很多，但我想我必须设计自己的交叉算子，因为我的问题与TSP略有不同。您对概念分析的解决方案或框架有什么想法吗？

在概念和实现级别上，最简单的方法是使用交叉运算符，它可以在两个解决方案之间交换子排序：

`CrossOver(ABcD,AcDB) = AcBD`

对于元素的随机子集（在本例中为大写字母的“a，b，d”），我们将第一个子排序 - 元素“a，b，d”的序列复制并粘贴到第二个排序。

**版本**：不对称 TSP 可以变成对称 TSP，但有禁止的子排序，这使得 GA 方法不适合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:19:06.627

这绝对是一个有趣的问题，而且似乎大多数答案和评论都集中在问题的语义方面（即适应度函数的含义等）。

我将提供一些关于句法元素的信息——你如何以有意义的方式进行交叉和/或突变。显然，正如您在与 TSP 平行时所指出的那样，您有一个排列问题。因此，如果您想使用 GA，候选解决方案的自然表示只是您的点的有序列表，小心避免重复 - 即排列。

TSP 就是这样一个排列问题，您可以从 TSP 算法中获取并直接使用许多交叉运算符（例如[Edge Assembly Crossover ）。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.114.5015)但是，我认为您会遇到这种方法的问题。基本上，问题是这样的：在 TSP 中，解决方案的重要质量是*邻接*性。也就是说，*abcd与**cdab*具有相同的适应度，因为它是相同的游览，只是在不同的城市开始和结束。在您的示例中，*绝对位置比这种**相对*位置的概念重要得多。*abcd*在某种意义上意味着*a*是最好的点——重要的是它排在列表的首位。

要获得有效的交叉算子，您必须做的关键是考虑使它们成为良好的父项中的属性，并尝试准确地提取和组合这些属性。[Nick Radcliffe 称之为“尊重重组”](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.34.5083)（请注意，论文相当古老，现在对理论的理解有所不同，但原理是合理的）。采用 TSP 设计的运算符并将其应用于您的问题将最终产生试图保存来自父母的不相关信息的后代。

理想情况下，您需要一个尝试在字符串中保留*绝对位置的运算符。*我所知道的最好的副手称为 Cycle Crossover (CX)。我想念一个很好的参考资料，但我可以向您指出[一些我在研究生工作中实现它的代码](https://github.com/deong/sls/blob/master/src/crossover.cpp)。CX 的基本思想描述起来相当复杂，而且在实际操作中更容易看到。采取以下两点：

```
abcdefgh
cfhgedba 
```

1.  在父节点 1 中随机选择一个起点。为简单起见，我将从位置 0 开始，使用“a”。

2.  现在直接下降到父 2，并观察那里的值（在本例中为“c”）。

3.  现在在 parent 1 中搜索“c”。我们在位置 2 找到它。

4.  现在再次垂直下降，并观察父级 2 位置 2 中的“h”。

5.  再次，在父 1 中搜索这个“h”，在位置 7 找到。

6.  直接下降并观察父 2 中的“a”。

7.  此时请注意，如果我们在 parent one 中搜索“a”，我们会到达我们已经到过的位置。继续过去只会循环。事实上，我们将我们访问过的位置序列 (0, 2, 7) 称为“循环”。请注意，我们可以简单地在父母之间作为一个组交换这些位置的值，并且父母双方都将保留排列属性，因为我们在父母双方的循环中的每个位置都有相同的三个值，只是顺序不同。

8.  对循环中包含的头寸进行交换。

请注意，这只是一个周期。然后，您每次都从一个新的（未访问的）位置开始重复此过程，直到所有位置都包含在一个循环中。在上述步骤中描述的一次迭代之后，您将获得以下字符串（其中“X”表示循环中在父项之间交换值的位置。

```
cbhdefga
afcgedbh
X X    X 
```

继续寻找和交换周期，直到你完成。

我从我的 github 帐户链接的代码将与我自己的元启发式框架紧密绑定，但我认为从代码中提取基本算法并使其适应您自己的系统是一项相当容易的任务。

请注意，您可能会从针对您的特定域进行更多定制的事情中获得很多。我认为像 CX 这样的东西会比基于 TSP 运算符的东西更好的黑盒算法，但黑盒通常是最后的手段。其他人的建议可能会引导您获得更好的整体算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T18:50:48.247

我研究了一个有点类似的排名问题，并遵循了类似于我在下面描述的技术。这对你有用吗：

假设`value`对象的未知数通过某种分布（例如，正态分布）偏离您的估计。解释您的排名陈述，例如`a > b, 0.9`陈述“价值`a`位于以 为中心的分布的 90% 百分位`b`”。

对于每个语句：

```
def realArrival = calculate a's location on a distribution centered on b
def arrivalGap = | realArrival - expectedArrival | 
def fitness = Σ arrivalGap 
```

健身功能是`MIN(fitness)`

FWIW，我的问题实际上是一个装箱问题，其中相当于您的“排名”语句是用户提供的排名（1、2、3 等）。所以不是TSP，而是NP-Hard。OTOH，装箱有一个与接受的错误成比例的伪多项式解决方案，这是我最终使用的。我不太确定这是否适用于您的概率排名陈述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T22:02:23.427

多么有趣的问题！如果我理解它，你真正要问的是：

“给定一个加权的有向图，图中的每个边权重表示弧线在正确方向上绘制的概率，返回具有最大概率成为图拓扑排序的完整节点序列。”

因此，如果您的图有 N 条边，则有 2^N 个不同可能性的图，其中一些排序出现在不止一个图中。

我不知道这是否会有所帮助（非常简短的谷歌搜索并没有启发我，但也许你会更加坚持不懈地取得更大的成功）但我的想法是寻找“拓扑排序”与任何“概率”相结合，“随机”，“噪声”或“错误”（因为边缘权重可以被视为可靠性因素）可能会有所帮助。

不过，我强烈质疑您的断言，在您的示例中，不需要 P(a>c)。您最了解您的应用程序空间，但在我看来，指定 P(a>c) = 0.99 将给出与指定 P(a>c) = 0.01 不同的 f(abc) 适应度。

您可能还想加入“贝叶斯”，因为根据您的条件和假设的解决方案，您可能能够开始推断（在您的示例中） P(a>c) 的值。问题是，“拓扑排序”和“贝叶斯”会给你带来一大堆与马尔可夫链和马尔可夫决策问题相关的命中，这可能有帮助，也可能没有帮助。

# windows-phone-7 - 在 Windows Phone 7 上更新像素

> ID：10152005
> 
> 赞同：0
> 
> 时间：2012-04-14T07:52:59.460
> 
> 标签：windows-phone-7

我应该如何在 Windows Phone 上更新我的像素？我不能在我的 Windows Phone 应用程序上使用 writepixels。还有其他更新像素或显示像素的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:58:15.167

您可以在 Windows Phone 环境中使用多种形状：椭圆、直线、路径、多边形、折线、矩形。因此，基本上，您可以显示一个高度 = 1 和宽度 = 1 的矩形。

我想你也可以查看这些教程： http: [//www.windowsphonegeek.com/tips/drawing-in-wp7-1-getting-started-and-line-shape](http://www.windowsphonegeek.com/tips/drawing-in-wp7-1-getting-started-and-line-shape)

# dotnetnuke - 如何在 DotNetNuke 中将 Html 模块标题对齐？

> ID：10152008
> 
> 赞同：0
> 
> 时间：2012-04-14T07:53:52.453
> 
> 标签：dotnetnuke

我正在使用 DotNetNuke 最新版本开发一个多语言网站（阿拉伯语、英语），并且我已启用站点本地化，因此页面顶部有两个图标，在 Html 模块中，我可以使用编辑器将模块的内容对齐，但是标题仍然在左边，那么如何将标题对齐到右边呢？，我想我应该编辑css文件（default.css，container.css），但英文版也使用这些文件。

那么将标题向右对齐的最佳解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:40:53.290

Radi，我以前没有做过从右到左语言的多语言。但这里有一些东西需要研究。通常在 DNN 中，当您在语言之间切换时，会有一些新的 URL 参数或 DNN 变量可用。在您的皮肤中，您可以检查语言并包含一个额外的 CSS 文件，该文件仅针对从右到左的语言加载，然后在该 CSS 文件中进行对齐。可能是更好的方法，但这应该可行。

# php - 在php中作为csv文件上传时将法语转换为英语

> ID：10152009
> 
> 赞同：0
> 
> 时间：2012-04-14T07:54:06.487
> 
> 标签：php

我正在使用这种方法将法语转换为英语。当我从我的 html 表单中获取法语字符时，它运行良好。但我必须上传包含一些法语字符的 csv 文件。上传 csv 文件时它没有转换。

这是我上传 csv 时的代码

```
function UploadQuiz(){
   $row =& $this->getTable('quiz');
   $fileName='uploadFile';
   $fileName=$_FILES['uploadFile']['tmp_name'];
   $f = fopen($fileName,"r");

   $success_counter=0; $failure_counter=0;
   while ( ($data = fgetcsv($f, 10000, ",") ) !== FALSE ){
     //perform string escapes so data is entered into database correctly
     $quiz_question = $data[0];
     $option_a = $data[1];
     $option_b = $data[2];
     $option_c = $data[3];
     $option_d = $data[4];
     $option_e = $data[5];
     $quiz_answer = $data[6];
     $quiz_explanation = $data[7];
     $quiz_difficulty = $data[8];
     $chapter_id = $data[9];

     $chapter=$this->check_chapter_id_exist($this->_data['course_id'],$chapter_id);
     if(!$chapter->chapter_id){
       $failure_counter++;
       continue;
     }

     $data['quiz_id'] = '';
     $data['course_id'] = $this->_data['course_id'];
     $data['quiz_question'] = $this->_convertgsm->convertgsm($quiz_question);
     $data['quiz_optionA'] = $this->_convertgsm->convertgsm($option_a);
     $data['quiz_optionB'] = $this->_convertgsm->convertgsm($option_b);
     $data['quiz_optionC'] = $this->_convertgsm->convertgsm($option_c);
     $data['quiz_optionD'] = $this->_convertgsm->convertgsm($option_d);
     $data['quiz_optionE'] = $this->_convertgsm->convertgsm($option_e);

  return $data;
} 
```

这是我的php文件中的方法：

```
function convertgsm($data){
    $normalizeChars = array(
    '`'=>"'",'Ë'=>'E','Â'=>'A','À'=>'A','Í'=>'I', 'Ì'=>'I', 'Ã'=>'A', 'Î'=>'I',    'Ä'=>'A','Ç'=>'C','Ò'=>'O','Ï'=>'I','È'=>'E','Ó'=>'O','É'=>'E','Ô'=>'O','Ê'=>'E','Õ'=>'O','Ö'=>'O','ê'=>'e','Ù'=>'U','ë'=>'e','Ú'=>'U','ë'=>'e','Ú'=>'U','î'=>'i','Û'=>'U','Û'=>'U','Ü'=>'U','ô'=>'o','Ý'=>'Y','õ'=>'o','â'=>'a','û'=>'u','ã'=>'a','ÿ'=>'y','ç'=>'c','ï'=>'i'    
    );

    $result_data =  strtr($data, $normalizeChars);
    return $result_data;
  } 
```

你能帮我在上传 csv 文件时将法语转换为英语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:10:13.823

用法一

```
$translate = new TranslateCSV ();
$str = 'who will win à wôrld cup ?';
var_dump ( $translate->customStrtr ( $str ) ); 
```

输出

```
 string 'who will win a world cup ?' (length=26) 
```

用法2

```
$translate = new TranslateCSV ();
$translate->process ( "PATH_TO_UPLOADED CSV" );

if (! empty ( $translate->getErrors () )) {
    print_r ( $translate->getErrors () );
} else {
    echo "CSV Transalation Completed";
} 
```

班级

```
class TranslateCSV {
    private $chars = array (
            '`' => "'",
            'Ë' => 'E',
            'Â' => 'A',
            'À' => 'A',
            'Í' => 'I',
            'Ì' => 'I',
            'Ã' => 'A',
            'Î' => 'I',
            'Ä' => 'A',
            'Ç' => 'C',
            'Ò' => 'O',
            'Ï' => 'I',
            'È' => 'E',
            'Ó' => 'O',
            'É' => 'E',
            'Ô' => 'O',
            'Ê' => 'E',
            'Õ' => 'O',
            'Ö' => 'O',
            'ê' => 'e',
            'Ù' => 'U',
            'ë' => 'e',
            'Ú' => 'U',
            'ë' => 'e',
            'Ú' => 'U',
            'î' => 'i',
            'Û' => 'U',
            'Û' => 'U',
            'Ü' => 'U',
            'ô' => 'o',
            'Ý' => 'Y',
            'õ' => 'o',
            'â' => 'a',
            'û' => 'u',
            'ã' => 'a',
            'à' => 'a',
            'ÿ' => 'y',
            'ç' => 'c',
            'ï' => 'i' 
    );

    private $output = array ();
    private $errors = array ();
    private $charsKeys = array ();
    private $charsValues = array ();
    function setChars($chars) {
        $this->chars = $chars;
    }

    function getErrors() {
        return $this->errors;
    }

    function customStrtr($str) {

        if (empty ( $this->charsKeys )) {
            $this->charsKeys = array_keys ( $this->chars );
        }

        if (empty ( $this->charsValues )) {
            $this->charsValues = array_values ( $this->chars );
        }

        $str = str_replace ( $this->charsKeys, $this->charsValues, $str );
        $str = iconv ( 'UTF-8', 'ISO-8859-1//TRANSLIT//IGNORE', $str );
        return $str;
    }

    function process($csvFile, $csvOut = "") {
        if (! is_file ( $csvFile )) {
            $this->errors [] = "CSV  files does not exist";
            return false;
        }

        if (! empty ( $csvOut ) && ! @touch ( $csvOut )) {
            $this->errors [] = "Can't Create Output CSV";
            return false;
        }

        $fpRead = @fopen ( $csvFile, "r" );

        if (! empty ( $csvOut )) {
            $fpWrite = fopen ( $csvOut, 'w' );
        }

        while ( ($data = fgetcsv ( $fpRead, 1000, "," )) !== FALSE ) {
            $num = count ( $data );
            $field = array ();
            for($c = 0; $c < $num; $c ++) {
                $field [] = $this->customStrtr ( $data [$c] );
            }

            if (! empty ( $csvOut )) {
                fputcsv ( $fpWrite, $field );
            }
        }
        fclose ( $fpRead );

        if (! empty ( $csvOut )) {
            fclose ( $fpWrite );
        }
        return true;
    }
} 
```

# jquery-ui - PrimeFaces 图标

> ID：10152012
> 
> 赞同：23
> 
> 时间：2012-04-14T07:54:19.513
> 
> 标签：jquery-ui, jsf, primefaces

我找不到`icons`像`PickList`组件中那样选择箭头的方法，以便在其他`CommandButtons`.

好吧，我知道要在 CommandButton 中使用图标，必须遵循以下说明：

```
<p:commandButton outcome="target" icon="star" title="With Icon"/> 
```

在 css 文件中定义了星形图标：

```
.star {
    background-image: url("images/star.png");
} 
```

但我更愿意使用与 PickList 组件完全相同的箭头。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-14T09:57:45.970

这里是所有可用 jQuery UI 图标的列表

[jQueryUI Icons Cheatsheet N#1](http://jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html)（点击`Toggle text`获取所有图标名称）

[jQueryUI 图标备忘单 N#2](http://www.petefreitag.com/cheatsheets/jqueryui-icons/)

至少在您可以使用例如`<p:commandLink`应用图标（不记得尝试相同- 总是首选）`styleClass``styleClass="ui-icon ui-icon-trash"``p:commandButton``<p:commandLink`

顺便说一句，`<p:commandButton`没有`outcome`属性，`<p:button`有它...

* * *

**此外**，从 PF v5.1.1 开始，您还可以通过将上下文参数设置为 true 来使用[**Font Awesome**](http://fortawesome.github.io/Font-Awesome/)开箱即用的图标，就像这样`primefaces.FONT_AWESOME`

```
<context-param>
   <param-name>primefaces.FONT_AWESOME</param-name>
   <param-value>true</param-value>
</context-param> 
```

并像这样使用它：

```
<p:commandButton value="Download" icon="fa fa-download" type="button"/> 
```

或者

```
<p:menuitem value="Refresh" url="#" icon="fa fa-refresh"/> 
```

查看展示：[PrimeFaces - FontAwesome - 自 v5.1.1 起](http://www.primefaces.org/showcase/ui/misc/fa.xhtml)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-14T08:30:10.977

Primefaces 使用[jQuery themeroller](http://jqueryui.com/themeroller/)来设置 UI 样式。Primefaces 中所有使用的图标都来自那里。只要你喜欢的鼠标悬停图标（在themeroller中）和类似的东西：`.ui-icon-arrow-1-e`就会弹出。然后像这样使用它：

```
<p:commandButton action="target" icon="ui-icon ui-icon-arrow-1-e" value="Arrow icon"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T10:29:13.383

试试这个它对我有用

```
.star {background:url("images/star.png") no-repeat !important;
     width:20px;
     height:16px;
    } 
```

# php - PHP/ADODB/MySQL：是否可以在准备好的语句中使用命名占位符？

> ID：10152015
> 
> 赞同：0
> 
> 时间：2012-04-14T07:54:30.643
> 
> 标签：php, mysql, pdo, prepared-statement, adodb

据我所知，MySQL 不直接在准备好的语句中支持命名占位符。所以，你不能写这样的东西：

```
SET @s = 'SELECT SQRT(POW(:a,2) + POW(:b,2)) AS hypotenuse';
PREPARE stmt2 FROM @s;
SET @a = 6;
SET @b = 8;
EXECUTE stmt2 USING @a, @b; 
```

但是可以使用例如 PDO 来做到这一点。例如：

```
$a = 6;
$b = 8;
$stmt = $conn->dbh->prepare('SELECT SQRT(POW(:a,2) + POW(:b,2)) AS hypotenuse;');
$stmt = bindParam(':a', $a);
$stmt = bindParam(':b', $b);
$stmt->execute(); 
```

我想知道这是否也适用于 ADODB，因为我计划很快开始使用 ADODB。

# sql-server-2008 - 在 Sql 中合并行

> ID：10152019
> 
> 赞同：3
> 
> 时间：2012-04-14T07:55:12.850
> 
> 标签：sql-server-2008, tsql, stored-procedures

我想按如下方式合并 SQL Server 中的行。

桌子

```
PK  F1      F2      F3      Order
A   NULL    NULL    Grapes  2
B   NULL    Fig     NULL    1
C   Apple   Orange  Banana  0 
```

输入和预期结果如下。

```
Input       Expected Result     
2       Apple   Fig    Grapes
1       Apple   Fig    Banana
0       Apple   Orange Banana 
```

如何在 sql 存储过程中执行此操作？我更喜欢在 Sql 中做而不是在代码中。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T11:32:56.060

如果我理解您的输入正确，那么可能是这样的：

**测试数据**

```
DECLARE @T TABLE
(
    PK VARCHAR(5),
    F1 VARCHAR(10),
    F2 VARCHAR(10),
    F3 VARCHAR(10),
    [Order] INT
)

INSERT INTO @T
VALUES
    ('A',NULL,NULL,'Grapes',2),
    ('B',NULL,'Fig',NULL,1),
    ('C','Apple','Orange','Banana',0) 
```

**询问**

```
;WITH CTE
AS
(   
    SELECT
        ROW_NUMBER() OVER(ORDER BY [Order]) AS RowNbr,
        T.*
    FROM
        @T AS T
)
, CTE2
AS
(
    SELECT
        CTE.RowNbr,
        CTE.PK,
        CTE.F1,
        CTE.F2,
        CTE.F3,
        CTE.[Order]
    FROM
        CTE
    WHERE
        CTE.RowNbr=1
    UNION ALL
    SELECT
        CTE.RowNbr,
        CTE.PK,
        ISNULL(CTE.F1,CTE2.F1),
        ISNULL(CTE.F2,CTE2.F2),
        ISNULL(CTE.F3,CTE2.F3),
        CTE.[Order]
    FROM
        CTE
        JOIN CTE2 ON CTE.RowNbr=CTE2.RowNbr+1

)
SELECT
    CTE2.[Order],CTE2.F1,CTE2.F2,CTE2.F3
FROM
    CTE2
ORDER BY
    CTE2.RowNbr DESC 
```

**结果**

```
2   Apple   Fig     Grapes
1   Apple   Fig     Banana
0   Apple   Orange  Banana 
```

# ruby - 两个（看似）相同的查询，一个更快，为什么？

> ID：10152022
> 
> 赞同：0
> 
> 时间：2012-04-14T07:55:44.643
> 
> 标签：ruby, ruby-on-rails-3, benchmarking

两个看似相同的查询（据像我这样的新手所知，但第一个在部分模板渲染时间总体上更快（除了 ids 语句没有其他变化）。此外，当通过 rails 控制台进行测试时，后者将明显运行一个查询，前者不会。我不明白为什么——以及为什么第一个语句比第二个快几*毫秒*——尽管我猜这是由于更短的方法链接以获得相同的结果。

更新：我的错。他们没有运行相同的查询，但有趣的是，所有列上的选择比一列上的选择更快。与方法链接相比，这可能是微不足道的差异。

```
ids = current_user.activities.map(&:person_id).reverse
SELECT "activities".* FROM "activities" WHERE "activities"."user_id" = 1
SELECT "people".* FROM "people" WHERE "people"."id" IN (1, 4, 12, 15, 3, 14, 17, 10, 5, 6) Rendered activities/_activities.html.haml (7.4ms)

ids = current_user.activities.order('id DESC').select{person_id}.map(&:person_id)
SELECT "activities"."person_id" FROM "activities" WHERE "activities"."user_id" = 1 ORDER BY id DESC    
SELECT "people".* FROM "people" WHERE "people"."id" IN (1, 4, 12, 15, 3, 14, 17, 10, 5, 6) Rendered activities/_activities.html.haml (10.3ms) 
```

该语句的目的是按照人员在活动表中出现的顺序（在其 PK 上）检索对人员的外键引用。注意：我将[Squeel](https://github.com/ernie/squeel)用于 SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:03:01.057

在第一个查询中，您链接了 .map 和 .reverse，而在第二个查询中，您使用了 .order('id DESC') .select(person_id)，如果添加了 .reverse，则这是不必要的

# git - git嵌套项目

> ID：10152031
> 
> 赞同：1
> 
> 时间：2012-04-14T07:56:35.523
> 
> 标签：git, github, nested, git-submodules

我有一个稳定且运行良好的项目`X`。我想添加一个模块，它来自我目录`Y`中 github 上的其他项目。`modules`

我已经`git remote add Y git@github.neel/Y.git`关注了`git fetch Y` 但是`Y`目录上还没有任何内容。我关注了[http://progit.org/book/ch6-7.html](http://progit.org/book/ch6-7.html) 并且也进行了结帐，但目录仍然是空的

我不想破坏我现有的子模块项目我已经做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:34:14.067

您运行的命令好像`Y`是 的克隆`X`，但事实并非如此。

相反，您必须将其注册为`X`, with的子模块`git submodule add`，并使用`git submodule init --update`

```
git submodule add git@github.neel/Y.git modules/Y
git submodule init --update 
```

# architecture - ATAM 中实用程序树的用途

> ID：10152034
> 
> 赞同：11
> 
> 时间：2012-04-14T07:57:43.710
> 
> 标签：architecture, software-design

什么是实用程序树，在架构权衡分析方法 (ATAM) 的情况下它的目的是什么？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-14T17:55:00.327

软件架构是一种设计。虽然“常规”设计主要是关于功能需求 - 架构主要是关于“非功能性”或“-illities”或更好的名称“质量属性”。

如果你去找利益相关者并询问他们关于质量属性的问题，他们会说他们想要性能、可用​​性、可伸缩性等，但这并没有真正的帮助。ATAM（和其他方法）促进将质量属性表达为上下文中的场景。例如

> 可用性 -> 修复时间 -> 在正常情况下，系统将在不到 5 秒的时间内检测到组件中的故障。
> 
> 适应性 -> 添加/删除功能 -> 一旦投入生产，界面中的更改将至少兼容一个版本

效用树是组织这些质量属性的一种方式。关于 ATAM，它们可以作为一种优先考虑质量属性的方法，然后可以评估候选架构与需求的适用性。我还喜欢将它们用作参考需求和故事（或主题取决于大小）作为敏捷开发积压工作的一部分。

您可以在我不久前写的几篇文章中阅读更多关于质量属性和实用树的内容： [质量属性介绍](http://arnon.me/2010/05/quality-attributes-introduction/)和[实用树 - 孵化质量属性](http://arnon.me/2010/05/utility-trees-hatching-quality-attributes/)。如果您想在 ATAM 的上下文中了解它们，您应该阅读[评估软件架构：方法和案例研究](https://rads.stackoverflow.com/amzn/click/com/020170482X)Paul Clements、Rick Kazman 和 Mark Klein（还有我就该主题所做的旧[演示](http://www.rgoarchitects.com/Files/ATAM.ppt)）。

编辑：添加了[一篇](http://arnon.me/2012/04/utility-trees-quality-attributes/)扩展上述解释的博客文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:20:24.210

基本上，效用树是关于 ATAM 坐标中效用度量的树。它说明了适当的非功能性需求是否通过提议的架构选项来满足。对于每一个 lave，都有一个相关的信心水平。

# asp.net - 数据绑定列表视图

> ID：10152040
> 
> 赞同：0
> 
> 时间：2012-04-14T07:58:46.950
> 
> 标签：asp.net, vb.net

```
Dim  _tableBackLogs As System.Data.DataTable  

 Do While i - 2 > 0
        _tableBackLogs = Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i - 2 & "'")
        i = i - 2
    Loop

lvBackSubjects.DataSource = _tableBackLogs
lvBackSubjects.DataBind() 
```

这样做只绑定`i`提供给`ListView`.I want all the data.Suppose的最后一个值的数据`i=5`。所以我希望`ListView`有数据。`i=3,1`希望我不会让你们感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:41:01.147

看起来循环正在覆盖变量 _tableBackLogs。可能最好做这样的事情：

```
dim semesters as New System.Text.StringBuilder()

Do While i - 2 > 0
    semesters.Append("'" & i & "',")
    i = i - 2
Loop

' remove the last ,
semesters.Remove(semesters.Length -1,1)

_tableBackLogs = Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester in (" & semesters.ToString() & ")" 
```

# objective-c - CCCrypt 解码的明文长度错误

> ID：10152042
> 
> 赞同：3
> 
> 时间：2012-04-14T07:59:00.920
> 
> 标签：objective-c, ios, cryptography

最近，我正在使用 CCCrypt 来实现一些自定义的加密算法。但是，当我使用 CCCryptorUpdate 解密密文时，输出总是比原始纯文本少 8 个字节。以下是我的代码：

```
+ (void) EncryptBy3DES:(NSInputStream*)strmSrc Output:(NSOutputStream*)strmDest CryptoRef:(CCCryptorRef)tdesCrypto
{   
    size_t  dataOutMoved;
    uint8_t inputBuf[BlockSize];
    uint8_t outputBuf[BlockSize];

    CCCryptorStatus cryptStatus;
    int iBytesRead = 0;

    while ( (iBytesRead = [strmSrc read:inputBuf maxLength:BlockSize]) > 0 ) 
    {
        NSLog(@"Bytes read from plain buffer: %d", iBytesRead);
        [Util FillBuffer:inputBuf Length:BlockSize Current:iBytesRead];

        cryptStatus = CCCryptorUpdate(tdesCrypto, &inputBuf, BlockSize, &outputBuf, BlockSize, &dataOutMoved);
        assert(dataOutMoved<=BlockSize && cryptStatus==noErr);
        NSLog(@"EncDataOutMoved: %ld", dataOutMoved);
        [Util FillBuffer:outputBuf Length:BlockSize Current:dataOutMoved];
        [strmDest write:outputBuf maxLength:BlockSize];
    }
}

+ (void) DecryptBy3DES:(NSInputStream*)strmSrc Output:(NSOutputStream*)strmDest CryptoRef:(CCCryptorRef)tdesCrypto
{       
    size_t  dataOutMoved;
    uint8_t inputBuf[BlockSize];
    uint8_t outputBuf[BlockSize+kCCBlockSize3DES];

    CCCryptorStatus cryptStatus;
    int iBytesRead = 0;

    while ( (iBytesRead = [strmSrc read:inputBuf maxLength:BlockSize]) > 0 ) 
    {
        NSLog(@"Bytes read from cipher buffer: %d", iBytesRead);
        cryptStatus = CCCryptorUpdate(tdesCrypto, &inputBuf, BlockSize, &outputBuf, BlockSize+kCCBlockSize3DES, &dataOutMoved);
        NSLog(@"Lengh needed: %zu", CCCryptorGetOutputLength(tdesCrypto, BlockSize, YES));
        NSLog(@"DecDataOutMoved: %ld", dataOutMoved);
        assert(dataOutMoved<=BlockSize && cryptStatus==noErr);
        [strmDest write:outputBuf maxLength:dataOutMoved];
    }
}

I encrypted 3 buffer of 4096\. When decrypting them, the log shows that the size of 1st decrypted data is 4088, BUT! The missing data is actually in the begining of the 2nd decrypted data. 

2012-04-14 15:17:41.929 otest[25168:7803] Bytes read from cipher buffer: 4096
2012-04-14 15:17:41.929 otest[25168:7803] Lengh needed: 4104
2012-04-14 15:17:41.930 otest[25168:7803] DecDataOutMoved: 4088
end of 1st block:<..d71eaf27 affc4c8c b1c54afa c5434397 ebc17a49>

2012-04-14 15:17:45.291 otest[25168:7803] Bytes read from cipher buffer: 4096
2012-04-14 15:17:45.292 otest[25168:7803] Lengh needed: 4104
2012-04-14 15:17:45.293 otest[25168:7803] DecDataOutMoved: 4096
begining of 2nd block <**86b61bce b4342728** 88240a64 837327d4 0bb572a2 f5220928 
```

请注意，**86b61bce b4342728**在加密之前位于第一个块的末尾。

我还检查了第一个块的开头，我确信我没有弄乱数据范围。似乎数据已解密，但直到下一次操作才检索到它们。

我想在每个加密/解密操作中获得一个完整的块，但我不想使用 CCCrypt 函数，因为我必须将 Key 和 Iv 位都传递给它。我只是想把CCCryptorRef传给它，比较简单。

休伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T14:08:47.857

您需要通过调用来完成加密和解密[`CCCryptFinal`](http://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man3/CCCrypt.3cc.html)。这将负责添加/删除填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T06:51:52.423

我使用 CCCrypt 函数对某些东西进行 DES 加密。当要加密的数据长度不是 8 字节的倍数时，就会发生错误大小。

所以我处理如下：

```
- (NSString *) encryptUseDES:(NSString *)plainText key:(NSString *)key
{
    NSString *ciphertext = nil;
    const char *textBytes = [plainText UTF8String];
    NSUInteger dataLength = [plainText length];
    NSUInteger len1=dataLength % 8;

    if(len1!=0)
    {
        dataLength+=(8-len1);
    }    
    unsigned char buffer[1024];
    memset(buffer, 0, sizeof(char));
    size_t numBytesEncrypted = 0;

    Byte iv[] = {0x02, 0x00, 0x01, 0x02, 0x00, 0x06, 0x00, 0x05};

    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmDES,
                                          NULL,
                                          [key UTF8String], kCCKeySizeDES,
                                          iv,
                                          textBytes, dataLength,
                                          buffer, 1024,
                                          &numBytesEncrypted);
.....
} 
```

然后一切正常！

# ruby - 错误的参数类型字符串（预期的数组）

> ID：10152053
> 
> 赞同：6
> 
> 时间：2012-04-14T08:01:13.910
> 
> 标签：ruby, sinatra, jekyll, jekyll-extensions

我正在尝试在我的新 Macbook 上使用[Octopress](http://octopress.org/)`bundle exec jekyll --server` （基于 Jekyll 的博客引擎），运行时出现此错误：

（缩短路径）

```
/path/to/markdown.rb:118:in `to_html': wrong argument type String (expected Array) (TypeError)
from /path/to/markdown.rb:118:in `convert'
... 
```

（完整路径）

```
/usr/local/rvm/gems/ruby-1.9.2-p290/gems/jekyll-0.11.0/lib/jekyll/converters/markdown.rb:118:in `to_html': wrong argument type String (expected Array) (TypeError)
from /usr/local/rvm/gems/ruby-1.9.2-p290/gems/jekyll-0.11.0/lib/jekyll/converters/markdown.rb:118:in `convert'
... 
```

查看第 118 行，我看到：

```
RDiscount.new(content, *@rdiscount_extensions).to_html 
```

如果我将此行替换为“hello”之类的字符串，则服务器启动正常。但是如果我用类似的东西替换它`RDiscount.new("hello").to_html`，我会得到同样的错误。但是，启动 irb 并运行`RDiscount.new("hello").to_html`正常。

有什么想法有什么问题吗？我可以在我拥有的另一台计算机上启动服务器，但我不确定如何弄清楚两台计算机在做什么之间有什么区别（某个库的不同版本？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:19:12.603

只是一个想法，但您是否尝试过更新您的 gemset？最新版本的 jekyll 是 0.11.2，它默认使用 maruku 而不是 RDiscount。

[https://github.com/mojombo/jekyll/wiki/Install](https://github.com/mojombo/jekyll/wiki/Install)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:10:37.360

我要做的第一件事是检查所有版本。ruby -v，gem -v，gem list -d sinatra，gem list -d octopress。等并寻找差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T21:45:37.577

我也有这个错误。我通过创建一个新的 RVM gemset 并重新运行 bundle install 解决了这个问题。

另见[https://github.com/rtomayko/rdiscount/issues/66](https://github.com/rtomayko/rdiscount/issues/66)

```
$ rvm gemset create gaga
'gaga' gemset created (/Users/chaffee/.rvm/gems/ruby-1.9.3-p125@gaga).
$ rvm use @gaga
Using /Users/chaffee/.rvm/gems/ruby-1.9.3-p125 with gemset gaga
$ bundle install
...
Installing rdiscount (1.6.8) with native extensions 
...
$ irb
>> require 'rdiscount'
=> true
>> RDiscount.new("hello").to_html
=> "<p>hello</p>\n" 
```

# python - 从开发 GAE 服务器获取一条信息到本地文件系统

> ID：10152055
> 
> 赞同：0
> 
> 时间：2012-04-14T08:01:26.313
> 
> 标签：python, google-app-engine

我有一个使用 Python API 在 GAE 之上开发的应用程序。我现在正在使用本地开发服务器。该应用程序涉及解析从外部服务接收的大量 XML 数据。

所以问题是 - 有没有一种简单的方法可以将这些 XML 数据从 GAE 应用程序中导出 - 例如，在常规应用程序中我只会将其写入临时文件，但在 GAE 应用程序中我不能这样做。那么我能做些什么呢？我不能轻易地在 GAE 之外运行产生服务调用的所有代码，因为它使用一些 GAE 函数来创建调用，但如果我可以取出 XML 结果并在外部开发/测试解析器部分会容易得多然后将其放回 GAE 应用程序。

我尝试使用它记录它`logging`，然后从控制台中提取它，但是当 XML 变大时，它就不能正常工作了。我知道有批量数据导入/导出 API，但对于仅提取这一条信息以将其写入数据存储然后导出整个存储似乎有点过头了。那么如何以最好的方式做到这一点呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:27:42.383

如何将 XML 数据写入 blobstore，然后编写一个使用 send_blob 下载到本地文件系统的处理程序？

您可以使用 files API 从您的应用程序写入 blobstore。

# ios - 应用程序进入后台时 iOS 外部附件断开连接

> ID：10152056
> 
> 赞同：2
> 
> 时间：2012-04-14T08:01:47.967
> 
> 标签：ios

我有一个外部配件。当应用程序进入后台时，它似乎断开连接。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T02:57:06.783

在您的应用程序 plist 文件中添加以下标志“必需的背景模式”=“应用程序与附件通信”

此解决方案仅适用于 iOS 5 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T03:14:03.937

如果 Info.plist 中没有添加 External Accessory 后台模式字符串，应用程序将不会获得任何后台运行时间。（请参阅[iOS 应用程序编程指南](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW21)）

如果添加了后台模式项，您可以响应已连接附件的传入字节。

在后台模式下没有计时器可用。他们只是在超时时不会开火。因此，如果您需要轮询，您需要弄清楚需要什么并将请求从 MFi 设备发送到 iOS。

# javascript - 无法将 js/css 文件添加到 xcode4 中 phonegap 中的 www 文件夹

> ID：10152057
> 
> 赞同：1
> 
> 时间：2012-04-14T08:02:12.003
> 
> 标签：javascript, cordova

我已经开始在 phonegap 中编码，我可以让 helloworld 项目运行，但问题是，我无法将另一个 js/css 文件添加到 www 文件夹，并且当我以某种方式添加文件时，我不是能够参考他们。那么任何人都可以建议我添加 js/css 文件的正确方法以及如何从 index.html 文件中引用它。

提前致谢

# entity-framework - 在自定义 Db Initializer 中播种数据不起作用/EF，代码优先

> ID：10152058
> 
> 赞同：1
> 
> 时间：2012-04-14T08:02:13.053
> 
> 标签：entity-framework, ef-code-first

我正在尝试使用自定义数据库初始化程序播种一些数据，但无法使其正常工作。我尝试向 appConfig 文件添加一些配置，但这也不起作用。

这是一个 WPF 应用程序，我不想引用我的 EntityLibrary。我想使用上下文的构造函数来播种数据。它出什么问题了？

编辑：问题是没有数据被填充。调试时，我看到调用了上下文的构造函数 SetInitiazlier 函数，但从未调用过重写的 Seed 方法，实际上调试器从未进入 Seed 方法。

同时 XAML 解析器给出了一个错误，抱怨 DropCreateDatabaseIfModelChanges 的 TContext 类型参数。我不能给出确切的错误，因为我家里没有代码。

这是我的自定义初始化程序：

```
public class DbInitializer : DropCreateDatabaseIfModelChanges<DemirbaşContext>
    {
        protected override void Seed(DemirbaşContext context)
        {
            Kullanıcı kullanıcı = new Kullanıcı
            {
                Ad = "Mert",
                Soyad = "Mert",
                KullanıcıAdı = "admin",
                Şifre = "password",
                Email = "mert@mert.com"
            };

            context.Kullanıcılar.Add(kullanıcı);
            context.SaveChanges();

            base.Seed(context);
        }
    } 
```

这是我的上下文构造函数：

```
public DemirbaşContext():base("Demirbaş")
    {
        Database.SetInitializer<DemirbaşContext>(new DbInitializer());
    } 
```

编辑 1：这是我当前的代码，但它仍然没有播种数据。你能看出有什么问题吗？

初始化器：

```
public class DbInitializer : DropCreateDatabaseIfModelChanges<DemirbaşContext>
{
    protected override void Seed(DemirbaşContext context)
    {
        Kullanıcı kullanıcı = new Kullanıcı
        {
            Ad = "Mert",
            Soyad = "Mert",
            KullanıcıAdı = "admin",
            Şifre = "password",
            Email = "mert@mert.com"
        };

        context.Kullanıcılar.Add(kullanıcı);
        context.SaveChanges();

    }
} 
```

应用程序启动：

```
public partial class App : Application
    {
        public App()
        {
            // Seed data, remove after getting seeding in custom db initiazlier to work
            DemirbaşContext context = new DemirbaşContext();
            DbInitializer initializer = new DbInitializer();
            Database.SetInitializer<DemirbaşContext>(initializer);
            context.Database.Initialize(false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:43:50.823

将您的初始化代码移动到您的应用程序启动。它不属于上下文的构造函数并手动强制初始化：

```
Database.SetInitializer<DemirbaşContext>(new DbInitializer());
context.Database.Initialize(false); 
```

# paint - 是否可以为 Kinect Paint 按钮添加音效？

> ID：10152063
> 
> 赞同：0
> 
> 时间：2012-04-14T08:02:44.313
> 
> 标签：paint, kinect, soundplayer

对不起我的英语不好和直截了当。

我有一些关于编码的问题要问...

我想问，是否可以为所有按钮添加声音？

似乎选择时带有“点击”声音的按钮会很好。

有人有什么想法吗？

是在此处的某处添加 .wav 文件源吗？

```
 new BrushSelection(
        new Uri("/KinectPaint;component/Resources/pen-unselected.png", UriKind.RelativeOrAbsolute), 
        new Uri("/KinectPaint;component/Resources/pen-selected.png", UriKind.RelativeOrAbsolute), 
        KinectPaintbrush.Marker, 
        "pen"), 
```

或者

```
SoundPlayer ClickSound = new SoundPlayer(@"c:\Media\ClickSound.wav");
    ClickSound.Play(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:27:54.650

您可以为将触发播放声音剪辑的按钮设置一个事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T15:07:39.530

我让这段代码工作，一旦你定义了`PlaySound`方法，去选择 wpf 上的所有按钮并选择`EventHandler`属性下的设置，然后将`PlaySound`方法添加到`CLick`事件中，显然`startSoundPlayer`将是你想要调用的任何东西声音播放器。哦，这是使用 Wpf

```
 namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    System.Media.SoundPlayer startSoundPlayer = new System.Media.SoundPlayer(@"C:\Windows\Media\chord.wav");

    private void PlaySound(object sender, RoutedEventArgs e)
    {
        startSoundPlayer.Play();
    } 
```

希望这可以帮助

# c# - 为什么 MonoTouch.Dialog 对某些元素选项使用公共字段，而对其他选项使用公共属性

> ID：10152065
> 
> 赞同：2
> 
> 时间：2012-04-14T08:02:49.920
> 
> 标签：c#, xamarin.ios, monotouch.dialog

当我在设置 DVC 后设置它时，我试图在 UI 中更新 StringElement 的“值”。

例如：

```
public partial class TestDialog : DialogViewController
{
    public TestDialog() : base (UITableViewStyle.Grouped, null)
    {
        var stringElement = new StringElement("Hola");
        stringElement.Value = "0 Taps";
        int tapCount = 0;
        stringElement.Tapped += () => stringElement.Value = ++tapCount + " Taps";

        Root = new RootElement("TestDialog")
        {
            new Section("First Section")
            {
                stringElement,
            },
        };
    }
} 
```

但是 StringElement.Value 只是一个公共字段，并且仅在初始化期间调用 Element.GetCell 时写入 UICell。

为什么它不是一个属性，在设置器中具有更新 UICell 的逻辑（如大多数元素，例如 EntryElement.Value）：

```
public string Value 
{
    get { return val; }
    set 
    {
        val = value;
        if (entry != null)
            entry.Text = value;
    }
} 
```

**编辑：**
我制作了自己的版本`StringElement`，源自`Element`（基本上只是从这里逐字复制[源代码）](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs)

然后我将其更改为对在中创建的单元格进行类范围引用`GetCell`，而不是函数范围。然后将`Value`字段更改为属性：

```
public string Value 
{
    get { return val; }
    set 
    {
        val = value;
        if (cell != null)
        {
            // (The below is copied direct from GetCell)

            // The check is needed because the cell might have been recycled.
            if (cell.DetailTextLabel != null)
                cell.DetailTextLabel.Text = Value == null ? "" : Value;
        }
    }
} 
```

它适用于初始测试。但是我不确定是否允许引用单元格，其他元素似乎都没有这样做（它们只引用放置在单元格内的控件）。是否有可能基于一个`MonoTouch.Dialog.Element`实例创建多个“活动”* 单元？

*我说 live 表示当前是活动 UI 的一部分的单元格。从子对话框导航回对话框时，我确实注意到再次调用 GetCell 方法并基于元素创建一个新单元格，但这仍然是元素和活动单元格之间的 1-1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:54:41.190

对于主要问题：

> 为什么 MonoTouch.Dialog 对某些元素选项使用公共字段，而对其他选项使用公共属性？

我已经阅读了代码，但我认为使用其中任何一个都没有一致的理由。

Dialog 项目最初不是 MonoTouch 项目的一部分——我认为 Miguel 在开始编写和发展它时并不知道它会有多大用处——我认为他当时更专注于编写其他应用程序，例如 TweetStation .

我知道有几个人（包括我！）已经对代码进行了分支并针对他们的目的进行了调整。我猜想在未来某个时间点，Xamarin 可能会编写一个具有更严格编码标准的 2.0 版本。

> 参考活细胞

对于有限的使用，你可以这样做......但一般***不要***。

表格视图的想法是，当用户上下滚动时，单元格会被重用——尤其是为了节省内存和 ui 资源。由于这是一个很长的列表，因此多个元素可能会引用同一个单元格。

如果您确实想缓存单元格引用，那么您可能应该覆盖 GetCell() 以便它永远不会尝试重用现有单元格（永远不会调用 DequeueReusableCell）

或者，您可以尝试更改基本 Element 类中的一些代码，以查明 Element 是否具有当前附加的单元格 - 这就是 CurrentAttachedCell 在我的 Dialog 分支[https://github.com/slodge/MvvmCross/中所做的事情blob/master/Sirrious/Cirrious.MvvmCross.Dialog/Dialog/Elements/Element.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Dialog/Dialog/Elements/Element.cs)（但该分支具有其他附加功能和依赖项，因此您可能不想将其用于当前工作！）

# java - 在Android中获取字体字符间距

> ID：10152068
> 
> 赞同：4
> 
> 时间：2012-04-14T08:03:18.930
> 
> 标签：java, android, fonts, spacing

当我在画布上绘画时，我试图在 Android 中获取任何字体的字符间距，我在谷歌中搜索但找不到任何东西。

有没有办法获得字体字符间距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:32:39.570

我准备制作一个 WAG，这个用例真正需要的是更符合以下方面的方法：

*   [`Paint.getTextBounds()`](http://developer.android.com/reference/android/graphics/Paint.html#getTextBounds%28char%5b%5d,%20int,%20int,%20android.graphics.Rect%29)
*   [`Paint.getTextWidths()`](http://developer.android.com/reference/android/graphics/Paint.html#getTextWidths%28java.lang.String,%20float%5b%5d%29)

这两种方法都是重载的。该链接指向文档中第一个出现的链接。

可能您没有找到有关字符之间距离的信息的原因是，对于大多数用途而言，它是无关紧要的。相关的是渲染文本的最终宽度，或者它的边界。

> 这适用于画布吗？

当我看到它时，我正在浏览^(1的)[方法！](http://developer.android.com/reference/android/graphics/Canvas.html#pubmethods)为了强调这一点，我是 Android 新手，但在使用标准桌面 Java (J2SE) 方面经验丰富。在 J2SE 中，我从未听说过有关字符间距的问题。很多很多关于宽度或界限的问题。 [`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html)

但一定要检查我一直在查看的相同文档，搜索“paint”并找到在呈现文本时可以使用它的方式。

1.  此时，该文档顶部的**开发人员指南链接对您也很有帮助。**他们倾向于涵盖这类事情。

# android - 自定义单选按钮

> ID：10152070
> 
> 赞同：0
> 
> 时间：2012-04-14T08:03:30.540
> 
> 标签：android

我正在处理自定义单选按钮。它工作正常（因为它在 options.xml 中定义）但是当我从 options.xml 切换到 main.xml 时，它变成默认值，意味着它不再突出显示。它应该像我按下它之前一样工作它不应该变成默认值..这是radiobutton_selector.xml

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:drawable="@drawable/radio_down" android:state_checked="true"/>
        <item android:drawable="@drawable/radio" android:state_checked="false"/>
        </selector> 
```

我在 options.xml 中使用这些来调用单选按钮设置。

```
 <RadioGroup
            android:id="@+id/sound"
            android:layout_width="150dp"
            android:layout_height="100dp"
            android:layout_gravity="right"
            android:layout_marginRight="0dp"
            android:layout_marginTop="50dp"
            android:orientation="vertical"
            android:padding="0dp" >

            <RadioButton
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:button="@drawable/radiobutton_selector"
                android:id="@+id/on"
                />

            <RadioButton
                android:layout_width="100dp"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:button="@drawable/radiobutton_selector"
                android:id="@+id/off"
                />
        </RadioGroup> 
```

请帮我找出问题所在。提前致谢 ！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:34:05.843

你可以为你的`RadioGroup`. 您需要保存您选择的单选按钮，为此您可以使用如下所示的一个变量。

```
int check_radio=-1;
public static final int RADIO_BUTTON_ON=1;
public static final int RADIO_BUTTON_OFF=2;

       mRadioGroup
                .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(RadioGroup group,
                            int checkedId) {

                        switch(checkedId){

                                            case R.id.on:
                                            //Radio Button on is True
                                            check_radio=RADIO_BUTTON_ON;
                     SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
                     SharedPreferences.Editor editor = settings.edit();
                      editor.putInt("RadioButton", RADIO_BUTTON_ON);
                     // Commit the edits!
                     editor.commit();
                                            break;
                                           case R.id.off:
                                          //Radio Button off is True
                                           check_radio=RADIO_BUTTON_OFF;
                       SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
                     SharedPreferences.Editor editor = settings.edit();
                      editor.putInt("RadioButton", RADIO_BUTTON_OFF);
                     // Commit the edits!
                     editor.commit();
                                          break;
                    }
                }); 
```

现在你的 Activity 的 Resume 你可以检查一个条件，如下所示。从 SharedPrefrence 中获取价值，如下面的代码；

```
 //If you have save your value in SharedPrefrence it will return your stored int value.
   SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
   check_radio = settings.getInt("RadioButton", -1);

  if(check_radio==RADIO_BUTTON_ON){
     mRadioOn.setChecked(true);
  }else if(check_radio==RADIO_BUTTON_OFF){
    mRadioOff.setChecked(true);
  } 
```

您可以通过以下步骤使用 SharedPreferences

```
 public static final String PREFS_NAME = "MyPrefsFile";
   SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); 
```

# jquery - jQuery .html() 没有设置文本区域的值

> ID：10152074
> 
> 赞同：2
> 
> 时间：2012-04-14T08:05:10.437
> 
> 标签：jquery, textarea

```
 $(document).ready( function () {
        $('#test').click(function(){
            videofix();
        });
    }
    function videofix(){
        $('#article').text($('#article').val().replace(/\[video\](http:\/\/(www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9]+))\[\/video]/g,'[video=youtube;$3]$1[/video]'));
    }
            </script>
    <textarea id="article" name="article"></textarea><br>
    <input type="button" id="test" value="test"> 
```

基本上我的问题是，调用videofix函数时，它不会替换textarea的文本。我实际上已经将我的代码从这里复制到 jsfiddle 并在那里尝试了它并且它有效。所以我不确定到底发生了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T08:15:57.020

要为 textarea 设置值，您应该使用`val()`method 而不是`html()`;

```
$("#article").val("something"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T08:19:18.110

我在您的代码中看到的唯一文本区域有`id="article"`. 据我所知，你永远不会使用它来设置它的价值`.html()`。

无论如何，如果 .html() 不起作用，不妨试试这个：

```
$("#article").empty().append(data); 
```

# mysql - CF - ORM 数据源 - 登录后声明？

> ID：10152075
> 
> 赞同：0
> 
> 时间：2012-04-14T08:05:22.613
> 
> 标签：mysql, orm, coldfusion, datasource

**更新：问题已回答**

但是，由于我不知道如何“删除”或“取消”一个问题......

**[原始问题]**

我有一个使用 ORM 的 ColdFusion 应用程序，它为不同的公司提供服务。所以我需要在他们登录后更改 ORM 数据源（识别自己）。我目前正在使用此代码：

```
 <cfset this.datasource = SESSION.USER.DBSOURCE> 
```

不，这是在登录后创建的 - 在应用程序启动后。但是，据我所知，ORM 数据源需要在任何登录之前声明。

我不确定我是否正确地表达了这个问题，但有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:50:27.583

True：CF ORM DSN 需要在任何登录之前声明。

# php - 在嵌套数组中获取父键

> ID：10152078
> 
> 赞同：0
> 
> 时间：2012-04-14T08:05:40.710
> 
> 标签：php, multidimensional-array, nested

我正在构建一个从数据库中获取的“嵌套”数组；这是我的脚本：

```
while ($row_rsMaster = mysql_fetch_assoc($rsMaster)) {
    $numbers[] = array("Page ");
} 
```

我想获得以下数组（使用 print_r() 函数），但我完全不知道如何获取页码：

```
Array
(
    [0] => Array
        (
            [0] => Page 1
            [1] => 1
        )

    [1] => Array
        (
            [0] => Page 2
            [1] => 2
        )

    [2] => Array
        (
            [0] => Page 3
            [1] => 3
        )

    [3] => Array
        (
            [0] => Page 4
            [1] => 4
        )

) 
```

我试过了：

```
$numbers[] = array("Pagina " . key($numbers)+1, key($numbers)+1); 
```

但它并没有导致预期的结果（在我看来，它应该获取“父”数组的当前键号并递增 1）

请问，有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:07:50.083

自己数就行了：

```
$n = 0;
while ($row_rsMaster = mysql_fetch_assoc($rsMaster)) {
    $n++;
    $numbers[] = array("Page ".$n, $n);
} 
```

或者，`count($numbers)+1`在您的代码中使用：

```
while ($row_rsMaster = mysql_fetch_assoc($rsMaster)) {
    $numbers[] = array("Page ".(count($numbers)+1), count($numbers)+1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:07:56.280

感谢datacompboy，我终于明白了：

```
while ($row_rsMaster = mysql_fetch_assoc($rsMaster)) {
    $counter = count($numbers)+1;
    $numbers[] = array("Page " . $counter, $counter);
} 
```

# css - 对 CSS 框阴影使用一种以上的颜色

> ID：10152083
> 
> 赞同：13
> 
> 时间：2012-04-14T08:06:35.123
> 
> 标签：css

我正在尝试在 div 的三个侧面使用深色阴影颜色，并在一侧使用浅色“发光”——本质上是使用两种不同的颜色作为 CSS 框阴影。到目前为止，我想出的最好的解决方案是在除一个之外的所有侧面放置一个阴影，并使用第二个带有发光的 div 和第三个 div 来隐藏除一侧之外的所有发光，边距和溢出隐藏. 我只是想知道是否有比我正在实施的更好的（仅 CSS）方法？有任何想法吗？

在这里演示 - [http://swanflighthaven.com/css-shadow-glow.html](http://swanflighthaven.com/css-shadow-glow.html)

在浅色背景下看起来不太好：http: [//swanflighthaven.com/css-shadow-glow2.html](http://swanflighthaven.com/css-shadow-glow2.html)

```
#main {
    max-width:870px;
    min-width:610px;
    margin:0px auto;
    position:relative;
    top:40px;
    min-height:400px;
}
#maininside {
    position:relative;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    overflow:hidden;
    padding:0px 25px 25px 25px; 

}
#maininner {
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    overflow:hidden;
    box-shadow: 0px 0px 28px rgba(0, 0, 0, 0.80);
    -moz-box-shadow: 0px 0px 28px rgba(0, 0, 0, 0.80);
    -webkit-box-shadow: 0px 0px 28px rgba(0, 0, 0, 0.80);
    min-height:385px;
    padding:0px 15px 15px 15px;
    background:url(center.png) repeat;

}
#glow {
    position:absolute;
    height:50px;
    top:0px;
    box-shadow: 0 -10px 20px -5px #7b272c;
    -moz-box-shadow: 0 -10px 20px -5px #7b272c;
    -webkit-box-shadow: 0 -10px 20px -5px #7b272c;
    display: block;
    position:absolute;
    height:auto;
    bottom:0;
    top:0;
    left:0;
    right:0;
    margin-right:25px;
    margin-left:25px;
    margin-bottom:25px;
}

    <div id="main">
      <div id="glow">
      </div>
      <div id="maininside">
        <div id="maininner" ></div>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-14T08:25:04.773

你可以只写多个阴影，用逗号分隔：

```
{
 box-shadow: 0px 0px 28px rgba(0, 0, 0, 0.80), 0 -10px 20px -5px #7b272c;
} 
```

见[https://developer.mozilla.org/En/CSS/Box-shadow](https://developer.mozilla.org/En/CSS/Box-shadow)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T08:59:59.437

## 在 box-shadow css 中尝试负传播值

与其使用花哨的边距和隐藏创建第二个 div，不如尝试使用负价差值。它可以减少您不希望阴影出现的两侧的出血。使用我的 jsfiddle 上的示例，将价差设置为 0、-10、-5 ......你会很快掌握它的窍门。

```
#glow {
              /* x     y   blur spread color */
    box-shadow: /* ie */
                 0px -10px 15px -6px  rgba(255,000,000,0.7), /* top - THE RED SHADOW */
                 0px  5px  15px  0px  rgba(000,000,000,0.3), /* bottom */
                 5px  0px  15px  0px  rgba(000,000,000,0.3), /* right */
                -5px  0px  15px  0px  rgba(000,000,000,0.3); /* left */
    -webkit-box-shadow:
                 0px -10px 15px -7px  rgba(000,255,000,0.7), /* top - THE RED SHADOW */
                 0px  5px  15px  0px  rgba(000,000,000,0.3), /* bottom */
                 5px  0px  15px  0px  rgba(000,000,000,0.3), /* right */
                -5px  0px  15px  0px  rgba(000,000,000,0.3); /* left */
    -moz-box-shadow:
                 0px -9px  10px -8px  rgba(000,000,255,0.9), /* top - THE RED SHADOW */
                 0px  5px  10px  0px  rgba(000,000,000,0.3), /* bottom */
                 5px  0px  10px  0px  rgba(000,000,000,0.3), /* right */
                -5px  0px  10px  0px  rgba(000,000,000,0.3); /* left */
}

body {
    padding: 10%;
    background-color: #fefefe;
}

div {
    height: 300px;
    width: 300px;
    margin: 0px auto;
    border-radius: 2pt;
    border: 1px solid rgba(0,0,0,0.8);
    background-color: #fefefe;
}
```

```
<div id="glow"></div>
```

我不得不对这些属性进行一些调整，以使它们在不同的浏览器中看起来相似。Mozilla/FF 是最大的痛苦。看看这些值有多大不同......这是一种乏味的猫捉老鼠游戏，通过传播来抵消模糊......

*   box-shadow 用于 IE。
*   在 Chrome 中使用 webkit。
*   moz 在 Firefox 中使用。

[http://jsfiddle.net/CoryDanielson/hSCFw/](http://jsfiddle.net/CoryDanielson/hSCFw/)

# jquery - 不可关闭的 Jquery UI 模态表单

> ID：10152084
> 
> 赞同：0
> 
> 时间：2012-04-14T08:06:54.710
> 
> 标签：jquery

再会！

如果可能，我只想使模态表单无法关闭。

我的目标是：

1.  我的网页将检测用户的 IP 地址。
2.  如果用户来自另一个国家，他将无法访问该页面，因此将打开一个模态表单，并且他将无法关闭它。

如何关闭它的方法是通过它的关闭按钮并按 esc 对吗？（还有其他方法吗？）我该如何摆脱这些？

帮助任何人？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:27:30.193

您可以将函数绑定到对话框的 beforeClose 事件并防止在那里关闭。

```
$(function() {
    $( "#dialog" ).dialog({
            beforeClose: function(event, ui) { return false; }
    });
});​ 
```

# ruby - 通过减少变量的使用来节省或释放内存？

> ID：10152088
> 
> 赞同：0
> 
> 时间：2012-04-14T08:07:18.047
> 
> 标签：ruby, performance, memory

我想知道减少变量的数量是否会大大节省或释放内存。有时我在可读代码或性能之间左右为难。

例如在 Ruby 中，这样编码是否更好：

```
 def touch_updated_at
    a = self.model_name
    a.touch
  end 
```

或这个：

```
 def touch_updated_at
    self.model_name.touch
  end 
```

考虑到此功能仅在模型或控制器中使用。无需将其传递给查看。请指教。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:15:51.560

这取决于这个变量的数量。通常，这两种情况都没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:20:08.277

我不是任何 ruby​​ 解释器的实现者，但我认为它们完全相同。

临时局部变量不太可能更早被垃圾收集，无论它是否命名。

当然，除非`a`实际上是一个属性。

如果您想更改此代码的速度或内存使用情况，您应该少担心它的外观，而多关注它的作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T12:15:02.990

与引用它们的变量相比，实际对象对内存的影响可能更大。

变量的生命周期由其作用域决定：

*   当地的
*   关闭
*   目的
*   班级
*   持续的
*   全球的

然而，只有当所有引用它的变量都消失时，垃圾收集器才会释放对象。此外，它们可能会比引用消耗更多的内存。

您可以将变量视为标识对象的数字。他们使用的内存小到可以忽略不计。我想解释器也可能会优化它们。

```
def touch_updated_at
  model_name.touch
end 
```

尽管这种用法不会显着提高内存使用率，但它*更加*简洁。

# c - 一个网页请求中的多个 DNS 查询

> ID：10152089
> 
> 赞同：0
> 
> 时间：2012-04-14T08:07:49.310
> 
> 标签：c, proxy, web, dns

我正在开发一个网络代理。逻辑是客户端向代理发送请求，代理向服务器发送相同的请求，然后将答案发送回客户端。例如，我想访问 www.baidu.com。我在 GET: 包中得到“Host:www.baidu.com”，用于发送 dns 请求，然后我得到“www.baidu.com”的 ip，建立代理和服务器之间的套接字。问题是当我使用wireshark 来捕获不使用代理的普通包时，我发现除了对www.baidu.com 的查询之外，还有更多的dns 请求查询访问“www.baidu.com”。它将在不同的套接字中查询nsclick.baidu.com和suggest.baidu.com。但是没有信号让我启动这些DNS查询，不像查询“www.baidu.com”，我可以在其中启动当我检测到“主机：”时它。有人能帮我吗 ？感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:27:54.070

这可能不是首先应该如何工作的。

想象一下，我在浏览器中点击 www.baidu.com，它通过您的代理发送流量。目前，对于您的代理，www.baidu.com 是唯一需要查找的内容。

当我的浏览器最终收到此请求的 html 块时，收到的 html/js 代码然后加载来自 nsclick.baidu.com 的一些图像的请求。同样可以请求其他资源（css、js、图像）。反过来，他们都再次通过您的代理，然后您将执行通常的 dns 查询。

# javascript - 如何检测用户是否在 IE 中设置主页模型窗口上单击“是或否”？

> ID：10152092
> 
> 赞同：0
> 
> 时间：2012-04-14T08:08:01.497
> 
> 标签：javascript, jquery

我在互联网上搜索了大多数地方，他们说我们无法检测到设置主页模型窗口中的点击。但是当我看到雅虎网站[http://www.yahoo.com/bin/set](http://www.yahoo.com/bin/set)时？他们实际上是在检测用户是否设置了主页。

如果设置了主页，它们会显示一条消息，表明您已经设置了页面。

我的问题：

1）有没有办法检测它？如果有任何脚本/jquery 有人可以在这里帮助我吗？2）雅虎是如何检测到这一点的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:19:41.990

我敢打赌雅虎的解决方案只适用于 IE。IE 提供了一种称为行为的功能，并且默认行为集具有**主页**行为。您可以使用它来设置主页，导航到主页并检查页面是否为主页。

[在http://msdn.microsoft.com/de-de/library/ms531418%28v=vs.85%29.aspx](http://msdn.microsoft.com/de-de/library/ms531418%28v=vs.85%29.aspx)查看示例代码

# asp.net - 打开 .aspx 时，Visual Studio 崩溃

> ID：10152094
> 
> 赞同：1
> 
> 时间：2012-04-14T08:08:36.247
> 
> 标签：asp.net, visual-studio-2010

当我打开一个具有母版页的 aspx 页面时，Visual Studio 崩溃了。没有错误或任何东西只在 Visual Studio 的标题栏中显示 Not Responding 。当我进入标记时没问题，但当我进入设计器时崩溃了。只有具有母版页的页面才会崩溃 .visual studio 2010 终极版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:12:38.247

希望这将帮助您找到问题的原因。

[http://connect.microsoft.com/VisualStudio/feedback/details/534902/visual-studio-2010-crashes-when-editing-a-master-page-or-aspx-code-behind](http://connect.microsoft.com/VisualStudio/feedback/details/534902/visual-studio-2010-crashes-when-editing-a-master-page-or-aspx-code-behind)

# c# - 使用单一数据类型的数据对象从多个 Web 服务中获取信息

> ID：10152097
> 
> 赞同：0
> 
> 时间：2012-04-14T08:09:51.503
> 
> 标签：c#, web-services, asmx, ofx

我有一个助手类，

```
 public class Bill
    {
        public string BillId {get; set;}
        public double Amount {get; set;}
        public DateTime DueDate {get; set;}
    } 
```

**WebService1**：对比尔的引用

```
 [WebMethod]
    public Bill GetBill(string accountId)
    {
        /* Create and return the bill object */
    } 
```

**WebService2**：对比尔的引用

```
 [WebMethod]
    public Bill GetBill(string accountId)
    {
        /* Create and return the bill object */
    } 
```

**客户端应用程序**：引用 Bill、WebService1、WebService2

```
 public void GetBillInformaton
    {
        /* Looping through all the bill requests from a user */
        List<Bill> bills = new List<Bill>();
        foreach (BillRequest)
            if (BillRequest.ServiceProvider = Service1)
                bills.Add(WebService1.GetBill(BillRequest.AccountId)
            else if (BillRequest.ServiceProvider = Service2)
                bills.Add(WebService2.GetBill(BillRequest.AccountId)
            ....
            ....
    } 
```

如果我想要两个 Web 服务（最初可能会更多）以上述类对象的形式向我返回他们的合同信息，并在一个引用这两个 Web 服务的客户端应用程序中使用它，

**Q1**我可以在这里尝试做什么吗？ **Q2**如果没有，请提供更好的方法。

**附加信息** 对于一个场景，我在这里尝试做的是在计费者之间实现原型标准协议，以便客户端应用程序可以使用公共数据对象聚合信息。

# javascript - 让客户端在标签关闭 node.js 上发送断开连接事件

> ID：10152098
> 
> 赞同：3
> 
> 时间：2012-04-14T08:09:55.760
> 
> 标签：javascript, node.js, dom-events, disconnect

我正在使用带有 socket.io 的 node.js 服务器和带有用于客户端的 js 文件的 html5 画布制作多人游戏。

现在我有 `socket.on('disconnect',function(){my code here});` 服务器端，但是当用户关闭客户端正在运行的选项卡时，它不会触发服务器中的任何断开连接事件，但我需要服务器在用户关闭选项卡时通知。

当关闭正在运行的选项卡时，如何使客户端正确触发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:18:02.283

我不认为，这是可能的。所以我建议为服务器上的每个套接字连接设置一个超时时间以自动关闭它。在客户端，您可以发送“ping”以保持连接打开，但什么也没有发生。;） 那个怎么样？

# php - PHP嵌入html图像作为链接

> ID：10152099
> 
> 赞同：2
> 
> 时间：2012-04-14T08:10:22.203
> 
> 标签：php

如何在 php 中使用图像作为链接？我从来没有将两个 html 元素放在一个 echo 中，所以这对我来说有点新。这是我的代码：

htmltest.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<?
   require("includes/conn.php"); //link to the database
?>
<html> 
<title>HTML with PHP</title>
<body>

<?php
      echo  "<a  href="pageone.php"><img src="homelogo.jpg"  /></a>";
?>

</body>
</html> 
```

那是我的代码。我收到以下错误：

PHP Parse 错误：语法错误，意外的 T_STRING，期待 ',' 或 ';' 在第 11 行的 /home6/dreamsm2/public_html/htmltest.php

谁能告诉我我做错了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T08:12:16.823

将行更改为：

```
echo  '<a href="pageone.php"><img src="homelogo.jpg"  /></a>'; 
```

或者

```
echo  "<a href=\"pageone.php\"><img src=\"homelogo.jpg\"  /></a>"; 
```

正如错误所暗示的那样，问题在于 PHP 解释器无法确定您的字符串应该在哪里开始和结束。使用`\"`转义引号。在字符串周围使用`'`会在字符串周围提供唯一的字符串分隔符，因此您可以在内部自由使用双引号。

注意，如果你需要单双：

```
echo  '<a href="pageone.php" title="Andy\'s Link"><img src="homelogo.jpg"  /></a>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:15:22.667

您也可以使用`'`代替`"`字符串，例如

这有效：`echo '"Hello!"'; => "Hello!"`

这行不通：`echo "'Hello'";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T09:24:50.270

只需这样做：

```
echo '<a href="page.php"><img src="Downloads_clip_image010.jpg" /></a>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-28T17:39:00.637

对于 WordPress

```
<div class="floatLeft"> 
    <a href="http://trophydevelopers.com">
        <img src="<?php bloginfo('template_url'); ?>/images/powered-by.png">
    </a>
</div> 
```

# c - 在C中将节点添加到链表堆栈

> ID：10152102
> 
> 赞同：0
> 
> 时间：2012-04-14T08:11:31.900
> 
> 标签：c, list, linked-list, stack

所以我已经有了这个代码：http: [//pastebin.com/3wuFNWGA](http://pastebin.com/3wuFNWGA)

我在 .h 文件中有这些 typedef：http: [//pastebin.com/JTG9XHvW](http://pastebin.com/JTG9XHvW)

我需要我的 push 函数通过为节点分配内存、将数据（新元素）存储在节点中并将节点插入堆栈顶部来将节点添加到 my_stack。代码运行，但是当我在将新值推送到堆栈后尝试打印 my_stack->top->data 中的值时，它总是打印零，而不是我应该推送到堆栈上的元素。

对于我的生活，我无法弄清楚为什么。我认为当我创建新节点并将值存储在数据中时不会出现问题，所以我认为当我尝试将 my_stack->top 指向最近添加的节点时会出现问题？

这也是我在 Stack Overflow 上的第一篇文章。我希望我做的一切都是正确的。

这是将值压入堆栈的 push 函数：

```
void push( Stack *my_stack, int newElement ) {
    Node_s *newNode;
    newNode = (Node_s *) malloc(sizeof(Node_s));
    if( newNode == NULL ) {
            printf("Error: malloc failed in push\n");
            exit(EXIT_FAILURE);
    }
    newNode->data = newElement;
    newNode->next = my_stack->top;
    my_stack->top = newNode;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:21:03.183

您的代码将为堆栈的大小打印零，因为您永远不会增加它。

它还为元素打印 0，因为数据字段的类型被声明为，`double`但您使用整数说明符打印它。

改变：

```
printf("The value at the top of the stack is %d\n", my_stack->top->data); 
```

到

```
printf("The value at the top of the stack is %lf\n", my_stack->top->data); 
```

修复了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T08:19:45.863

这很清楚！

检查这个：

```
typedef struct Node_s {
  double data;
  struct Node_s* next;
}Node_s; 
```

数据被定义为双精度。

但在这儿...

```
push(my_stack, 100); 
```

你试着推一个int。

所以......也许你检查推送到`push(my_stack, 100.00);`或`typedef struct Node_s`到：

```
typedef struct Node_s {
   int data;
   struct Node_s* next;
 }Node_s; 
```

# macos - 代码在win7上运行良好，但在OSX上存在问题

> ID：10152108
> 
> 赞同：0
> 
> 时间：2012-04-14T08:12:53.310
> 
> 标签：macos, r, statistics, plot

我在 OSX 中执行我的 R 代码时遇到问题。那是我的代码：

```
i <- 1
while (i <= 20000) {
  repeat{
    z1=((runif(1,0,1)*2)-1)
    z2=((runif(1,0,1)*2)-1)
    h=z1**2+z2**2
    if((h > 0) && (h <= 1)){break}
   }
  x[i] <- z1
  y[i] <- z2
  q[i] <- h

  i <- i + 1
} 

j <- 1
while (j <= 20000) {
  h=sqrt((-2*ln(q[j]))/q[j])
  p[j] <- h
  j <- j + 1
}

a=x*p
b=y*p
points(a,b, pch=c(20,20),col=c("dark green","red"),cex=0.6) 
```

当我初始化 x,y,q,p 并使用日志时，它可以工作。

但是为什么会出现这些错误，但是为什么？

```
error in x[i] <- z1: object 'x' not fund
error: no function for "ln" fund
error: object 'x' not fund
error: object 'y' not fund 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T12:29:41.893

这是另一种方法。如果您减少需要迭代地做某事的次数，您的代码通常应该更快。具体来说，您的所有`runif(1,0,1)`调用都可以替换为一个大的`runif()`值向量，然后根据该向量对向量进行子集化。

我以@Mark Miller 的函数为起点，进行了以下修改。请注意，如果过采样器保留前一组随机数中的良好值并且只填充直到达到，这可以进一步改进`n`，但无论如何这都非常快。对于速度比较，我逐字记录了他的代码并将其包装在`fun2 <- function() {...}`

```
fun1 <- function(n, oversample = 1.50){
  #oversample
  over <- ceiling(n * oversample)
  goodvars <- NA
  while (length(goodvars) < n){
    z1 <- runif(over,-1,1)
    z2 <- runif(over,-1,1)
    h <- z1^2 + z2^2  
    goodvars <- which(h > 0 & h < 1)
  }
  goodvars <- goodvars[1:n]
  x <- z1[goodvars]
  y <- z2[goodvars]
  q <- h[goodvars]
  p <- sqrt((-2 * log(q)) / q)
  a <- x * p
  b <- y * p
  return(cbind(a,b))
 }

##Mark's code put into a function
fun2 <- function() {
  i <- 1

  x <- rep(NA, 20)
  y <- rep(NA, 20)
  q <- rep(NA, 20)
  p <- rep(NA, 20)

  while (i <= 20) {

    repeat{
      z1=((runif(1,0,1)*2)-1)
      z2=((runif(1,0,1)*2)-1)
      h=z1**2+z2**2
      if((h > 0) & (h <= 1)){break}
    }
    x[i] <- z1
    y[i] <- z2
    q[i] <- h

    i <- i + 1
  } 

  j <- 1
  while (j <= 20) {

    h=sqrt((-2*log(q[j]))/q[j])

    p[j] <- h

    j <- j + 1
  }

  a=x*p
  b=y*p
}

#Do some speed checking with rbenchmark. Also checkout compiler package for some free speed
library(compiler)
library(rbenchmark)
#Compile functions to see improvements
cfun1 <- cmpfun(fun1)
cfun2 <- cmpfun(fun2)
#run benchmark tests
benchmark(fun1(n = 20), fun2(), cfun1(n = 20), cfun2(),
          replications = 1000,
          columns=c("test", "elapsed", "relative"),
          order = "elapsed") 
```

和结果

```
 test elapsed  relative
3 cfun1(n = 20)   0.042  1.000000
1  fun1(n = 20)   0.055  1.309524
4       cfun2()   0.407  9.690476
2        fun2()   0.882 21.000000 
```

从新的 R 会话开始，复制和粘贴上面的代码不会返回错误。这是一个例子：

```
test <- fun1(n = 1000)
plot(test) 
```

![在此处输入图像描述](../Images/54728bcb1703344f4ac10a698223b295.png)

[![在此处输入图像描述](../Images/365886a668d8acb39198f0473fd5fd96.png)](https://i.stack.imgur.com/sa73o.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T08:42:48.383

这是做你想做的吗？一世：

1.  添加向量来存储 x、y、q 和 p。
2.  将 ln 更改为 log
3.  添加了一个 plot(a,b) 语句。
4.  出于调试目的将 20000 更改为 20。

我没有 Mac。

```
i <- 1

x <- rep(NA, 20)
y <- rep(NA, 20)
q <- rep(NA, 20)
p <- rep(NA, 20)

while (i <= 20) {

repeat{
    z1=((runif(1,0,1)*2)-1)
    z2=((runif(1,0,1)*2)-1)
    h=z1**2+z2**2
if((h > 0) & (h <= 1)){break}
 }
x[i] <- z1
y[i] <- z2
q[i] <- h

i <- i + 1
} 

j <- 1
while (j <= 20) {

h=sqrt((-2*log(q[j]))/q[j])

p[j] <- h

j <- j + 1
}

a=x*p
b=y*p
plot(a,b)
points(a,b, pch=c(20,20),col=c("dark green","red"),cex=0.6) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T09:46:18.893

您不能从 Windows 上一个全新的空工作区开始。' `x`' 对象必须已经存在，否则你也会在那里得到错误。在 Windows 和 OSX 中执行`ls()`并查看是否有 ' `x`'。我会把钱放在 Windows 上而不是 OSX 上。

# ajax - Zepto 加载功能中断隐藏显示

> ID：10152109
> 
> 赞同：1
> 
> 时间：2012-04-14T08:12:57.047
> 
> 标签：ajax, mobile, zepto

我们正在使用 Zepto.js 构建一个移动网站。我们的大部分功能都很简单，可以避免使用 JQuery mobile 所需的更大文件。但 ....

当我使用 .load() 时，它似乎会破坏相关 div 的隐藏/显示。我的页面结构是：

```
<div id="content">
  <div id="maincntr">
  Normal page
  content ...
  <div class="rvw">show more</div>
  </div>
  <div id="ajxcntr">

  </div>
</div> 
```

脚本是：

```
$('.rvw').click(function(){
$('#ajxcntr').show(),
$('#maincntr').hide(),
$('#ajxcntr').load('more/stuff.htm')
});

$('.bck').click(function(){
$('#maincntr').show(),
$('#ajxcntr').hide()
}); 
```

stuff.htm 包含一个`<div class="bck">Back</div>`

初始功能工作正常，div 被关闭/打开并加载文件。但是 .bck 隐藏/显示功能不起作用。如果我从 .rvw 中删除 .load() 行并简单地触发显示隐藏方面，那么两者都可以正常工作。

所以我猜这是由 .load() 方面引起的问题。有什么想法或建议吗？

**休息后...**

搞定了，我需要在加载额外内容后启动 .bck 函数。

```
$('.rvw').click(function(){
   $('#ajxcntr').show(),
   $('#maincntr').hide(),
   $('#ajxcntr').load('reviews/th-north.htm', function(){  
       $('.bck').click(function(){
           $('#maincntr').show(),
           $('#ajxcntr').hide()
       })
   })
}); 
```

# html - 我的下拉列表仅显示我选择的元素的第一个单词（仅在 IE 中出现）

> ID：10152114
> 
> 赞同：0
> 
> 时间：2012-04-14T08:14:29.220
> 
> 标签：html, css

我的观点有一个下拉列表：

![在此处输入图像描述](../Images/6786ae7df2e3d4512fe31fb1cc9f387a.png)

我注意到（加载页面时）我的下拉列表中的元素没有完全显示。如果元素由 4 个单词组成，则仅显示前 3 个单词。

如果我点击它，我可以完整地看到元素。

![在此处输入图像描述](../Images/8b847e8d4d5cc7b1338fd560afc2457f.png)

**如果仅使用 Internet Explorer**在我的所有下拉列表中具有相同的行为。

任何想法？

如何避免这种情况？

谢谢。

* * *

更新

这是CSS：

![在此处输入图像描述](../Images/f57e31480a06dde20069d63c01fc3a6b.png)

我注意到，如果我取消单击上面屏幕截图上蓝线的复选框，我就没有这个问题。这是 jQuery 主题 CSS。这怎么可能？为什么这个下拉菜单不够聪明（至少在页面加载时）无法调整？

谢谢。

# web-services - Web-Service vs Client-Server 分布式计算技术

> ID：10152115
> 
> 赞同：4
> 
> 时间：2012-04-14T08:14:29.723
> 
> 标签：web-services, client-server

假设我是 Web 服务技术的新手，并且刚刚开始研究它们，我无法准确理解为什么要实现 Web 服务而不是标准的客户端/服务器协议。

1 - 有人可以帮我理解吗？

* * *

我在网上找到了一些迹象，但希望您确认/扩展它们，以帮助我将所有部分放在一起。

2 - 以下陈述是否正确，您能否向我解释一下？

**1.**

```
A guideline that I was told: 
If you plan on reaching out to multiple clients (Linux, Windows, etc.), 
then use Web Services; otherwise, use Client / Server. 
```

**2.**

```
If your application needs to be run on machines that would access the data 
over a public network (internet) then you should go with web services because 
the traditional client/server model is not acceptable due to not wanting 
to expose your server publicly.
The web services you would expose publicly could be secure (HTTPS),
require some kind of authentication and only expose what you WANT to expose, 
versus exposing a whole database 
```

**3.**

```
One of the better reasons to use remoting is that it gives a large increase in
performance. But one of the down falls is that it is a good bit more complicated
to program than Web Services. 
```

**4.**

```
The proper use of web services is really based on your "remote connectivity"
needs. If your application is going to be run in a controlled environment such as
a LAN/WAN where you can see the server thru a private or secure (VPN) network,
then you can build a traditional client/server application 
```

**5.**

```
Web Services:

Though there are no major differences in the output of service with both these
models, the mobility and accessibility is definitely an advantage. 
However, the lack of a great deal of personalization does come as a con against 
the web-server based model.

Client Server:

The added security of client server is definitely a one up and it also gives the 
option of controlling the updates and upgrades if any. 
Initially though, client servers may come with a higher front-end cost. 
```

声明摘自以下链接：

*   [http://www.ehow.com/facts_7644572_services-vs-client-server.html](http://www.ehow.com/facts_7644572_services-vs-client-server.html)
*   [http://metrix.fcny.org/wiki/download/attachments/7328/Web-based+Apps+vs+Client-Server+Software.pdf?version=1](http://metrix.fcny.org/wiki/download/attachments/7328/Web-based+Apps+vs+Client-Server+Software.pdf?version=1)
*   [http://p2p.wrox.com/net-web-services/17221-web-service-vs-client-server.html](http://p2p.wrox.com/net-web-services/17221-web-service-vs-client-server.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T09:23:37.370

一段时间过去了，在研究了很多关于论点的教程之后，我终于可以回答我自己的问题了：

* * *

> **1.** 为什么要实现Web Service而不是标准的Client/Server协议

* * *

实际上，Web 服务是*另一种*分布式计算技术（如 CORBA、RMI、EJB 等）。它们允许我们准确地创建客户端/服务器应用程序，因此不能替代它们。

客户端（想要访问 Web 服务的程序）联系 Web 服务（在服务器中），并发送一个服务请求，询问一些信息。服务器通过服务响应返回想要的信息。

当然，这是 Web 服务如何工作的一个非常粗略的示例，但您可以看到它与普通客户端/服务器协议如何工作的概念完全相同。

那么，是什么让 Web 服务与众不同？

嗯，Web 服务与其他技术相比具有一定的优势：

*   Web 服务独立于平台和语言，因为它们使用标准的 XML 语言。这意味着我的客户端程序可以用 C++ 编程并在 Windows 下运行，而 Web 服务是用 Java 编程并在 Linux 下运行。

*   大多数 Web 服务使用 HTTP 来传输消息（例如服务请求和响应）。如果您想构建 Internet 规模的应用程序，这是一个主要优势，因为大多数 Internet 代理和防火墙不会干扰 HTTP 流量（与 CORBA 不同，后者通常会遇到防火墙问题）。

当然，Web Services 也有一些缺点：

*   高架。以 XML 传输所有数据显然不如使用专有二进制代码高效。你在便携性上赢得了什么，你就会在效率上失去什么。即便如此，这种开销对于大多数应用程序通常是可以接受的，但您可能永远不会找到使用 Web 服务的关键实时应用程序。

*   缺乏通用性。目前，Web 服务不是很通用，因为它们只允许一些非常基本的服务调用形式。例如，CORBA 为程序员提供了许多支持服务（如持久性、通知、生命周期管理、事务等）。幸运的是，有许多新兴的 Web 服务规范（包括 WSRF）正在帮助使 Web 服务变得越来越通用。

但是，Web 服务有一个重要特征。虽然 CORBA 和 EJB 等技术面向高度耦合的分布式系统，其中客户端和服务器非常依赖于彼此，但 Web 服务更适用于松散耦合系统，其中客户端可能没有 Web 服务的先验知识直到它真正调用它。高度耦合的系统非常适合 Intranet 应用程序，但在 Internet 规模上表现不佳。然而，Web 服务更适合满足 Internet 范围应用程序的需求。

* * *

> **2.**下面的说法正确吗？请您给我解释一下吗？

* * *

> **1)**如果您打算接触多个客户端（Linux、Windows 等），请使用 Web 服务；否则，使用客户端/服务器。

**真的**

如上所述：

Web 服务独立于平台和语言，因为它们使用标准的 XML 语言。这意味着我的客户端程序可以用 C++ 编程并在 Windows 下运行，而 Web 服务是用 Java 编程并在 Linux 下运行。

相反，如果您的分布式系统架构在所有节点上都是已知的并且是同质的，那么您可以使用固定的编程语言编写更简单且耦合度更高的客户端/服务器应用程序。

> **2）**如果您的应用程序需要在可以通过公共网络（互联网）访问数据的机器上运行，那么您应该使用 Web 服务，因为传统的客户端/服务器模型不可接受，因为不想公开您的服务器。您公开公开的 Web 服务可能是安全的 (HTTPS)，需要某种身份验证，并且只公开您想要公开的内容，而不是公开整个数据库

**真的**

对于 Web 服务，您公开向外部世界公开的唯一东西是标准 Web 服务器（客户端可以向其发送 HTTP 请求）。相反，所有宝贵的数据和方法都受到保护，无法访问。

相反，如果您直接向 Internet 提供服务器进程的访问端点（例如 IP 地址和服务端口号），这将使任何进程都可以访问您的数据和方法。

> **3)**使用远程处理的更好理由之一是它大大提高了性能。但是其中一个缺点是它的编程比 Web 服务要复杂得多。

**真的**

远程处理允许您构建更通用的服务，并避免传递大量 XML 数据，因此性能更高。

> **4)** Web 服务的正确使用实际上是基于您的“远程连接”需求。如果您的应用程序将在受控环境中运行，例如 LAN/WAN，您可以通过私有或安全 (VPN) 网络查看服务器，那么您可以构建传统的客户端/服务器应用程序

**真的**

再次引用答案的第一部分：

Web 服务更适合松散耦合的系统，其中客户端可能在实际调用 Web 服务之前不知道它。高度耦合的系统非常适合 Intranet 应用程序，但在 Internet 规模上表现不佳。然而，Web 服务更适合满足 Internet 范围应用程序的需求。

> **5）**网络服务：
> 
> 尽管这两种模型的服务输出没有重大差异，但 Web 服务的移动性和可访问性绝对是优于标准 C/S 范式的优势。然而，缺乏大量的个性化确实是对基于 Web 服务器的模型的不利影响。
> 
> 客户端服务器：
> 
> 客户端服务器的附加安全性绝对是一个提升，它还提供了控制更新和升级（如果有）的选项。不过，最初，客户端服务器可能会带来更高的前端成本。

**真的**

该声明的第一部分指的是 Web 服务更独立于平台和语言，因此更易于访问，但正如所述，更多的是更少的通用性。

第二部分说明了这样一个事实，即通过更多功能，您可以更轻松地控制和隐藏更新和升级。

例如，如果 Web 服务的维护者决定改变服务的接口，从而改变它的 WSDL 描述，客户端必须再次经历发现阶段。如果使用标准 C/S 协议，则不会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:25:37.080

Web 服务是客户端/服务器“应用程序”。

使用您的浏览器，当您连接网站时，服务器会输出 html 或您的浏览器可以读取的任何其他内容。html 可以从 php 或 .net 等应用程序层生成。您的浏览器是客户端。

Web 应用程序（php / java /etc...）本身可以是另一个 Web 应用程序的客户端。想象一下，您的应用需要显示天气报告，以便将其提供给浏览器。

您在服务器上的应用程序将通过协议（rest/soap/xml-rpc/etc ...）连接另一个应用程序以从服务器应用程序推送或提取数据，服务器应用程序可以是任何 php java、dotnet、您的客户端应用程序不在乎，因为他们通过定义的协议进行交谈。

因此，Web 服务允许客户端和服务器一起交谈。

并且没有 webservice vs client server ，因为 webservices 都是关于客户端/服务器通信的。

编辑：我真的不知道您引用的文字在说什么……请提供该文字的来源。

# php - 对 PHP/MySQL 数据使用复选框

> ID：10152118
> 
> 赞同：0
> 
> 时间：2012-04-14T08:15:31.937
> 
> 标签：php, mysql, checkbox

我已经想出足够多的循环遍历我的表格并返回将与产品匹配的复选框列表。我现在的问题是，我无法找出在选择它们后循环遍历它们的正确方法，并将它们作为给定产品的选中/未选中返回。认为涉及到一些 MySQL，那部分不是问题，我知道如何插入数据库或更新......当从下拉列表中选择产品时，我需要能够填充复选框。

这是我用来最初显示所有可供选择的类别的代码......

```
<ul class="categories">
  <?php 
    $query = "SELECT * FROM products";
    $result = mysql_query($query) or die(mysql_error());
    while ($row = mysql_fetch_assoc($result)) {
     $category = $row['category'];
     $catId    = $row['id'];  
     echo "<li><input class='catCheck' type='checkbox' name='p_cat[]' value='$catId' /> $category</li>";
    }
  ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:32:11.400

*   你应该给每个复选框一个自己的名字。例如，p_cat1、p_cat2、...
*   然后你必须记住你给复选框起的名字。例如，如果名称是 p_cat1、p_cat2、...，您必须知道复选框的数量。因此，您应该将此计数放在隐藏字段中或再次从数据库中检索它。
*   如果你想设置复选框的选中状态，你必须使用“checked”html属性，而不是“value”：

.

```
echo "<li><input class='catCheck' type='checkbox' name='p_cat[]' ".($is_checked? " checked " : "")."/> $category</li>"; 
```

*   当请求来自客户端时，您应该手动遍历所有 $_POST["p_cat$i"] 变量并使用类似 isset($_POST["p_cat$i"]) 的方式获取状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:37:11.643

在html页面中这样做

```
echo "<li><input class='catCheck' type='checkbox' name='p_cat['.$row['id'].']' value='$catId' /> $category</li>"; 
```

在后端这样做

```
$delete = $_POST['p_cat'];

foreach ($delete as $id => $val) {
    if($val=='checked'){
        $query="DELETE FROM TABLE WHERE id = '".$id."'";
        $result= mysqli_query($connection, $query) or die("Invalid query");
    }
} 
```

# delphi - TVirtualStringTree 的 Ctrl+End 行为

> ID：10152120
> 
> 赞同：3
> 
> 时间：2012-04-14T08:15:52.567
> 
> 标签：delphi, scroll, virtualtreeview, tvirtualstringtree

当用户按下 Ctrl+End 时，VirtualStringTree 会垂直跳到结尾，这很好，但也可以水平跳。我不希望它水平地走到尽头。水平滚动应保持原样。

这个怎么讲？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T08:19:19.970

`OnKeyAction`以下代码中的处理程序检查或`CTRL + HOME`是否`CTRL + END`被按下，如果是，它会（仅垂直）滚动到顶部或底部，具体取决于按下的内容。

```
procedure TForm1.VirtualTreeKeyAction(Sender: TBaseVirtualTree;
  var CharCode: Word; var Shift: TShiftState; var DoDefault: Boolean);
begin
  if (ssCtrl in Shift) then
  case CharCode of
    VK_HOME:
    begin
      DoDefault := False;
      VirtualTree.ScrollIntoView(VirtualTree.GetFirst, False);
    end;
    VK_END:
    begin
      DoDefault := False;
      VirtualTree.ScrollIntoView(VirtualTree.GetLast, False);
    end;
  end;
end; 
```

# c# - 删除实体框架对象时出现异常

> ID：10152121
> 
> 赞同：0
> 
> 时间：2012-04-14T08:15:54.887
> 
> 标签：c#, asp.net, entity-framework

我不知道到底出了什么问题，或者我应该怎么做才能无一例外地正确删除对象，所以这是我遇到问题的函数：

```
protected void RemoveAddDrugSurg()
{
    Surgery sur;
    DrugsList drug;
    Surgery surObject;
    DrugsList drugObject;
    try
    {
        if (Session["OldSurgs"] != null)
        {
            var SurgList = Session["OldSurgs"] as List<Surgery>;
            if (SurgList.Count > 0)
            {

                foreach (ListItem li in chlSurg.Items)
                {
                    surObject = null;
                    Int64 index = Convert.ToInt64(li.Value);
                    surObject = SurgList.Find(s => s.SurgeryID == index);
                    if (surObject == null && li.Selected)
                    {
                        sur = new Surgery();
                        sur.VisitID = Convert.ToInt64(Session["VID"]);
                        sur.SurgeryID = Convert.ToInt32(li.Value);
                        Diabetes.AddToSurgeries(sur);
                    }
                    else if (surObject != null && !li.Selected)
                    {

                        Diabetes.CreateObjectSet<Surgery>().Attach(surObject);
                        Diabetes.ObjectStateManager.ChangeObjectState(surObject, EntityState.Deleted);
                    }
                }
                Diabetes.SaveChanges();
            }
        }
        if (Session["OldDrugs"] != null)
        {
            var DrugList = Session["OldDrugs"] as List<DrugsList>;
            if (DrugList.Count > 0)
            {
                foreach (ListItem li in chlDrugs.Items)
                {
                    drugObject = null;
                    Int64 index = Convert.ToInt64(li.Value);
                    drugObject = DrugList.Find(d => d.DrugID == index);
                    if (drugObject == null && li.Selected)
                    {
                        drug = new DrugsList();
                        drug.VisitID = Convert.ToInt64(Session["VID"]);
                        drug.DrugID = Convert.ToInt32(li.Value);
                        Diabetes.AddToDrugsLists(drug);
                    }
                    else if (drugObject != null && !li.Selected)
                    {
                        Diabetes.CreateObjectSet<DrugsList>().Attach(drugObject);
                        Diabetes.ObjectStateManager.ChangeObjectState(drugObject, EntityState.Deleted);
                    }
                }
                Diabetes.SaveChanges();
            }
        }
    }
    catch (Exception ex)
    {
        throw;
    }
} 
```

出现的例外是：

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T11:35:00.710

最后我明白了，我为每个范围使用了关键字“使用”以避免会话之间的中断。

谢谢大家的帮助：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:17:07.073

您的代码没有显示**surObject**的来源。我的猜测是您正在尝试将 surObject 附加到新的 ObjectContext。如果“糖尿病”ObjectContext：您可能是在 HTTP 请求中创建它，并且 surObject（来自会话）来自先前的请求。一个 EntityObject 一次只能附加到一个 ObjectCONtext。如果要将其转移到另一个 ObjectContext 中，则需要先将其分离。

要删除一个对象，您应该调用**ObjectContext.DelteObject**，这也应该从父集合中删除它。

# java - j2me 导入外部 jar：什么类路径？

> ID：10152128
> 
> 赞同：1
> 
> 时间：2012-04-14T08:17:12.233
> 
> 标签：java, java-me, classpath

我想在 j2me 项目中导入一些外部 jar 文件（不包括在最终构建中）。所以我会在设备上复制我的 jar 和外部 jar，运行我的 jar 并使用这个 jar 中的类。（就像 import ext_pack.ext_class; 然后像 ext.class.ext_method() 一样使用它）。我应该写什么类路径，我应该把我的罐子放在设备上的什么地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:33:40.147

类加载在大多数 J2ME 配置文件中通常不可用（不在[CLDC 1.1](http://docs.oracle.com/javame/config/cldc/ref-impl/cldc1.1/jsr139/index.html)规范中）。你不能这样做。

# java - 任何用于将十六进制数更改为其在 Java 中等效的字符串的内置函数

> ID：10152129
> 
> 赞同：0
> 
> 时间：2012-04-14T08:17:18.970
> 
> 标签：java, string, function, hex

有什么方法可以使用java中的一些内置函数直接将十六进制值转换为其字符串等效形式。

例如：

输入：“68656c70”

输出：“帮助”

我知道如何使用内置函数来做相反的事情，但是对于这个问题，存在吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:54:39.420

对于一个班轮尝试

```
String hex = "68656c70";
String text = new String(new BigInteger(hex, 16).toByteArray(), 0);
System.out.println(text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:31:17.093

不，没有这样的内置功能。您必须进行字符串拆分，`parseInt(<bits>, 16);`然后手动转换为字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T08:31:06.337

没有内置功能，但可以帮助您：

```
import java.io.IOException;

public class RunT {

    public static void main(String[] args) throws IOException {
        try {

            String str = stringToHex("help");

            System.out.println(str);

            String str1 = convertHexToString(str);

            System.out.println(str1);

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    static String stringToHex(String str) {
        char[] chars = str.toCharArray();
        StringBuffer strBuffer = new StringBuffer();
        for (int i = 0; i < chars.length; i++) {
            strBuffer.append(Integer.toHexString((int) chars[i]));
        }
        return strBuffer.toString();
    }

    public static String convertHexToString(String hex) {

        StringBuilder sb = new StringBuilder();
        StringBuilder temp = new StringBuilder();

        for (int i = 0; i < hex.length() - 1; i += 2) {
            String output = hex.substring(i, (i + 2));
            int decimal = Integer.parseInt(output, 16);
            sb.append((char) decimal);
            temp.append(decimal);
        }
        return sb.toString();
    }

} 
```

# python - 如何索引列表中的 3 个最高值？

> ID：10152131
> 
> 赞同：28
> 
> 时间：2012-04-14T08:18:06.990
> 
> 标签：python

所以我有这两个列表：

```
score = [350, 914, 569, 223, 947, 284, 567, 333, 697, 245, 227, 785, 120, 794, 343, 773, 293, 995]
name = [Ryan, Stacy, Jenna, Peter, Sophie, Bryan, Cole, Andrea, Emily, Blake, Mike, Stephan, Rob, Eliza, Heather, Daniel, Elisabeth, Samantha] 
```

我必须找到 3 个最高分，并将这些分数与名单中各自的得分手相提并论，这样我才能有新的名单

```
top3score = [947, 995, 914]
top3name = [Sophie, Samantha, Stacy] 
```

我正在考虑对最高分数进行索引，将它们附加到列表中，而不是使用索引将这些分数与名称进行统计。

我的问题是如何索引列表中的 3 个最高值？然后，我如何使用索引在姓名列表中查找得分手姓名，以便我可以将它们附加到 top3name 列表中？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-14T08:21:33.760

我认为这会做到

```
sorted(zip(score, name), reverse=True)[:3] 
```

所以你明白发生了什么：

[zip](http://docs.python.org/library/functions.html#zip)：将可迭代对象作为参数，并从每个可迭代对象中获取一个元素，将它们放在一个元组中。

所以：

```
>>> zip(score, name)
[(350, 'Ryan'), (914, 'Stacy'), (569, 'Jenna'), (223, 'Peter'), (947, 'Sophie'), (284, 'Bryan'), (567, 'Cole'), (333, 'Andrea'), (697, 'Emily'), (245, 'Blake'), (227, 'Mike'), (785, 'Stephan'), (120, 'Rob'), (794, 'Eliza'), (343, 'Heather'), (773, 'Daniel'), (293, 'Elisabeth'), (995, 'Samantha')] 
```

[sorted](http://docs.python.org/library/functions.html#sorted)：将对数据进行排序。默认情况下，元组元素按索引为 0 的元素排序，因此本例中的分数。Reverse=True 将首先对其进行降序排序。

最后，`[:3]`is slice 表示法，说给我从开始到第三个元素的所有元素。这也可以写成`[0:3]`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-14T08:28:21.207

如果您只对前 3 名感兴趣，则有[`heapq.nlargest`](http://docs.python.org/py3k/library/heapq.html#heapq.nlargest)：

```
>>> heapq.nlargest(3, zip(score, name))
[(995, 'Samantha'), (947, 'Sophie'), (914, 'Stacy')] 
```

来自[官方文档](http://docs.python.org/py3k/library/heapq.html#heapq.nlargest)：

> `heapq.nlargest(n, iterable, key=None)`
> 
> > 从 iterable 定义的数据集中返回一个包含 n 个最大元素的列表。key，如果提供，指定一个参数的函数，用于从 iterable 中的每个元素中提取比较键：`key=str.lower`等价于：`sorted(iterable, key=key, reverse=True)[:n]`

**业绩预告：**

> 后两个 [`nlargest`和] 对于较小的*n*`nsmallest`值表现最佳。对于较大的值，使用该函数更有效。此外，当 时，使用内置和函数更有效。*`sorted()``n==1``min()``max()`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-05T12:09:43.737

如果您想获取**索引**而不是另一个列表中**的相应元素**，我创建了一个函数来按列表值对索引进行排序。

```
def sort_index(lst, rev=True):
    index = range(len(lst))
    s = sorted(index, reverse=rev, key=lambda i: lst[i])
    return s 
```

## 输出

让我们尝试对样本列表的索引进行排序。

```
>>> score = [12, 48, 100, 9, 30]
>>> sort_index(score)
[2, 1, 4, 0, 3] 
```

如果要获取三个最大值的索引，只需对列表进行切片即可。

```
>>> sort_index(score)[:3]
[2, 1, 4] 
```

* * *

它还支持使用参数从小到大排序`rev=False`。

```
>>> sort_index(score, rev=False)
[3, 0, 4, 1, 2] 
```*

# python - 如何使用给定 ClientID 的 MMC 和 python 广告词库获取活动详细信息

> ID：10152132
> 
> 赞同：2
> 
> 时间：2012-04-14T08:18:10.653
> 
> 标签：python, google-ads-api

下面是我尝试使用 python api 从 adwords 获取所有活动和活动详细信息的基本代码。我正在使用 MCC。那么，如果给定客户 ID，我如何遍历帐户中的所有广告系列并检索所有广告系列设置？

```
import os
import datetime
from adspygoogle.adwords.AdWordsClient import AdWordsClient
from adspygoogle.common import Utils
from pprint import pprint

google_service = 'https://adwords.google.com'
headers = {
      'email': 'test@gmail.com',
      'password': 'test',
      'userAgent': 'Test',
      'developerToken': 'xxxxxxxxxxx',
    }

google_service = 'https://adwords.google.com'
api_version = 'v201109'

client = AdWordsClient(headers=headers)
client.use_mcc = True
client.SetDebug=True
client.SetClientCustomerId='11111111111'
campaign_service = client.GetCampaignService(google_service, api_version) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:23:55.963

我对 Python 库不太熟悉，但我快速浏览了示例，发现奇怪的是，您应该开始使用的示例代码已放入报告文件夹中。如果您查看[下载活动统计信息](http://code.google.com/p/google-api-ads-python/source/browse/trunk/examples/adspygoogle/adwords/v201109/reporting/get_campaign_stats.py)的示例，您应该能够弄清楚如何提取您想要的内容。

您需要浏览[CampaignService 文档](http://code.google.com/apis/adwords/docs/reference/latest/CampaignService.html)以找到您想要的字段，并且还要记住许多活动设置需要通过其他服务获取：即[CampaignCriterionSerivce](http://code.google.com/apis/adwords/docs/reference/latest/CampaignCriterionService.html)、[CampaignTargetService](http://code.google.com/apis/adwords/docs/reference/latest/CampaignTargetService.html)和[CampaignAdExtensionService](http://code.google.com/apis/adwords/docs/reference/latest/CampaignAdExtensionService.html)。

如果您需要更多帮助，那么最好的地方是[AdWords API 官方论坛](https://groups.google.com/forum/?fromgroups#!forum/adwords-api)；在办公时间，您通常会收到 Google AdWords API 工程师的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T16:00:12.470

以下内容将起作用，并作为[Adwords Github repo](https://github.com/googleads/googleads-python-lib/tree/master/examples/adwords/v201506/account_management)中的示例提供。这将返回您的 MCC 帐户下的所有客户 ID 的列表。从那里您可以编写循环来对每个客户端 ID 执行某些功能。

```
from googleads import adwords

def DisplayAccountTree(account, accounts, links, depth=0):
  prefix = '-' * depth * 2
  print '%s%s, %s' % (prefix, account['customerId'], account['name'])
  if account['customerId'] in links:
    for child_link in links[account['customerId']]:
      child_account = accounts[child_link['clientCustomerId']]
      DisplayAccountTree(child_account, accounts, links, depth + 1)

def main(client):
  # Initialize appropriate service.
  managed_customer_service = client.GetService(
      'ManagedCustomerService', version='v201506')

  # Construct selector to get all accounts.
  selector = {
      'fields': ['CustomerId', 'Name']
  }
  # Get serviced account graph.
  graph = managed_customer_service.get(selector)
  if 'entries' in graph and graph['entries']:
    # Create map from customerId to parent and child links.
    child_links = {}
    parent_links = {}
    if 'links' in graph:
      for link in graph['links']:
        if link['managerCustomerId'] not in child_links:
          child_links[link['managerCustomerId']] = []
        child_links[link['managerCustomerId']].append(link)
        if link['clientCustomerId'] not in parent_links:
          parent_links[link['clientCustomerId']] = []
        parent_links[link['clientCustomerId']].append(link)
    # Create map from customerID to account and find root account.
    accounts = {}
    root_account = None
    for account in graph['entries']:
      accounts[account['customerId']] = account
      if account['customerId'] not in parent_links:
        root_account = account
    # Display account tree.
    if root_account:
      print 'CustomerId, Name'
      DisplayAccountTree(root_account, accounts, child_links, 0)
    else:
      print 'Unable to determine a root account'
  else:
    print 'No serviced accounts were found'

if __name__ == '__main__':
  # Initialize client object.
  adwords_client = adwords.AdWordsClient.LoadFromStorage()
  main(adwords_client) 
```

# entity-framework - SQL Server 2008 R2 Express 拒绝保存记录

> ID：10152141
> 
> 赞同：0
> 
> 时间：2012-04-14T08:20:14.460
> 
> 标签：entity-framework, sql-server-2008-r2, sql-server-express

我创建了一个过程，将 Microsoft Access 数据库中的所有记录导入 SQL Server 2008 R2 Express 服务器。SQL 服务器位于带有 EntityFramework 4 的 WCF 服务后面。我的 MS Access 数据库包含约 500 000 条记录，但只写入了约 100 000 条记录。EntityFramework 不会抛出任何异常，它只是正常工作，就好像一切正​​常。我认为这是 SQL db 没有自动增长的问题，因为它说“剩余空间”小于 1 MB。但是我手动增加了数据库大小，问题仍然存在。SQL Server 忽略我的写入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:54:24.847

为什么我总是要自己找到答案，但只有在我问过别人之后？...结果我假设 MS Access 数据库主键是唯一的，这是错误的。EF 确实进行了 500k 次调用，其中 oll 成功了，但我的逻辑包括检查 MS Access 是否存在 PK 的代码，如果存在，则更新它。所以它很可能做了 10 万次添加和 40 万次更新。

# mysql - 如何在 MySQL 中测试 Null 和非 Null 列

> ID：10152142
> 
> 赞同：-1
> 
> 时间：2012-04-14T08:20:25.163
> 
> 标签：mysql, null

假设我有一个包含两列 A 和 B 的表。我想获得一个满足以下条件的结果集：

获取结果集在哪里

1.  A 列为空
2.  B 列不为空

所以我执行以下 SQL：

```
SELECT * FROM myTestTable WHERE columnA IS NULL and columnB IS NOT NULL; 
```

但它会引发错误？

有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:05:34.870

更新！

此查询将与添加的反引号 (`) 一起使用，如下所示：

```
SELECT * FROM `myTestTable` WHERE `columnA` 为 NULL 并且 `columnB` 不为 NULL；

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:37:09.893

您尚未发布遇到的错误，但您可以试试这个。

```
CREATE table ex(column1 varchar(10), column2 varchar(10));

INSERT into ex VALUES(NULL,'gvd');
INSERT into ex VALUES(NULL,'vish');
insert into ex VALUES('b',NULL);
insert into ex VALUES(NULL,NULL);

SELECT * FROM ex
where column1 is NULL AND column2 is NOT null;

column1    column2
---------- ----------
NULL       vish
NULL       gvd 
```

（2 行受影响）

好吧，在我的情况下它工作正常，请遵循上述查询。

# clojure - “foo = bar || baz”的惯用 Clojure 是什么？

> ID：10152143
> 
> 赞同：18
> 
> 时间：2012-04-14T08:21:02.463
> 
> 标签：clojure, idioms

我想提供一个可以被覆盖的默认值。我知道我可以使用三元组，如下所示：

```
(def foo (if (not (nil? bar)) bar baz)) 
```

但是在 Clojure 中肯定有一种更惯用的方式来表示“使用 bar，或者如果 bar 为 nil，则使用 baz。

有什么建议么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-14T08:25:29.690

这将分配`bar`，除非它是`nil`or `false`，`baz`否则。

```
(def foo (or bar baz)) 
```

**编辑**

如果您想`nil`精确检查，您可以稍微优化您的原始代码，如下所示：

```
(def foo (if (nil? bar) baz bar)) 
```

我相信，这是最短的方法，虽然不是惯用的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T20:18:38.293

您的问题并没有具体询问多个变量，但是如果您确实希望对多个变量进行默认设置，那么惯用的方法是在地图上使用`:or`默认解构。

例如，使用这个带有 map 参数`m`的函数，预期的 map 的键为`:a`, `:b`, &`:c`但如果`:b`和/或未`:c`提供，则默认值取自`:or`子句

```
(defn foo [m]
    (let [{:keys [a b c], :or {b 100 c 200}} m]
      (println "a:" a)
      (println "b:" b)
      (println "c:" c)))

user> (foo {:a 1 :b 2})
a: 1   ; no default, use supplied value
b: 2   ; value supplied, default ignored
c: 200 ; no value supplied, use default from :or
nil 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T21:39:23.633

`fnil`也是一种选择：

```
user> (def default-to (partial fnil identity))
#'user/default-to

user> (let [bar :foo
            baz :default]
        ((default-to baz) bar))
:foo

user> (let [bar nil
            baz :default]
        ((default-to baz) bar))
:default 
```

# java - Java中的排序数组：我该如何实现？

> ID：10152147
> 
> 赞同：-6
> 
> 时间：2012-04-14T08:22:00.490
> 
> 标签：java, arrays, sorting

1.  实现一个检查数组并返回 0 或 1 的函数，其中 0 表示数组未排序，1 表示数组已排序。
2.  如果数组未排序，则实施选择排序，在排序过程中删除重复项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:25:38.733

第 1 点应该很简单：

```
loop through the whole array
{
    if (array[THIS INDEX] > array[THIS INDEX + 1]) //the element before is greater than the next one
        ARRAY IS NOT SORTED
}

//IF LOOP IS COMPLETED AND CODE REACHES THIS POINT
ARRAY IS SORTED 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:25:31.807

1.  当且仅当表达式`i`中 的 each产生 true 时，才会对数组进行排序（确保您理解为什么此约束很重要）。`[0,array.length)``array[i] <= array[i+1]`
2.  实现选择排序相当简单；查看维基百科中的[算法](http://en.wikipedia.org/wiki/Selection_sort#Algorithm)。

# php - 如何通过 Google Play Market 确认应用内结算信息

> ID：10152148
> 
> 赞同：1
> 
> 时间：2012-04-14T08:22:14.570
> 
> 标签：php, android, in-app-purchase, in-app-billing

我正在制作一个包含计费的应用程序。我有采购工作，否则。

该应用程序链接到 PHP 服务器。我想将应用内购买信息保存在我的服务器上并确认使用 Google Play Market。

我已设法将应用内购买信息保存在我的服务器上，但我无法通过 Google Play Market 确认。

我试过使用[这个](http://code.google.com/p/android-market-license-verification/)库，但我看到的是：

> “这个库（目前）不支持验证通过 Google Play 的应用内结算进行的购买。”

我想做的事可能吗？如果是这样，怎么做？

这是我的PHP：

```
$signedData = $request['signedData'];
$signature = $request['signature'];

$signedData = str_replace('\\', '', $signedData);
$signature = str_replace('\\', '', $signature);

define('PUBLIC_KEY', 'MY GOOGLE MARKET PUBLIC KEY');
define('PACKAGE_NAME', 'MY APP PACKAGE NAME');

$validator = new AndroidMarket_Licensing_ResponseValidator(PUBLIC_KEY, PACKAGE_NAME);
$valid = $validator->verify($signedData, $signature);

if($valid){
    $result['respon'] = 'sucessed';
} else {
    $result['respon'] = 'fail';
}

SendData($result);

$db -> close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-18T23:54:33.983

是的，这是完全可能的。谷歌还建议您在他们的安全设置中这样做，以便在最佳实践中做到这一点。以下代码块是我在生产中使用的代码之一，感谢 [https://gist.github.com/menny](https://gist.github.com/menny)

谷歌最佳实践：[https ://developer.android.com/google/play/billing/billing_best_practices.html](https://developer.android.com/google/play/billing/billing_best_practices.html)

以下代码返回 true 或 false。您可以使用 packageName 和 orderId 的唯一性，这样任何人都无法进行重放攻击。

问题的答案：

```
function verify_market_in_app($signed_data, $signature, $public_key_base64) 
{
    $key =  "-----BEGIN PUBLIC KEY-----\n".
        chunk_split($public_key_base64, 64,"\n").
        '-----END PUBLIC KEY-----';   
    //using PHP to create an RSA key
    $key = openssl_get_publickey($key);
    //$signature should be in binary format, but it comes as BASE64\. 
    //So, I'll convert it.
    $signature = base64_decode($signature);   
    //using PHP's native support to verify the signature
    $result = openssl_verify(
            $signed_data,
            $signature,
            $key,
            OPENSSL_ALGO_SHA1);
    if (0 === $result) 
    {
        return false;
    }
    else if (1 !== $result)
    {
        return false;
    }
    else 
    {
        return true;
    }
} 
```

# php - 使用查询获取 id

> ID：10152149
> 
> 赞同：1
> 
> 时间：2012-04-14T08:22:44.057
> 
> 标签：php, jquery, html

我正在创建一个电子商务网站，我正在尝试添加选项，买家通过下拉列表选择项目大小，然后将变量传递给 jquery，然后 jquery 将其传递给 php，如果项目大小可用有货时会显示添加到购物车按钮，否则会显示缺货按钮。我设法让它工作，直到它将项目大小传递给 php，但我不知道如何传递检查数据库所需的产品 ID。

尺寸选择：

```
<form id="form1" name="form1" method="post" action="cart.php">
    <label>Size:</label>
    <select name="search" class="search" id="searchbox">
    <option value="XS">XS</option>
    <option value="S">S</option>
    <option value="M">M</option>
    <option value="L">L</option>
    <option value="XL">XL</option>
    <option value="XXL">XXL</option>
    <option value="3XL">3XL</option>
    <option value="4XL">4XL</option>
    <option value="5XL">5XL</option>
    </select>
    <input type="hidden" name="product_id" id="product_id" value="'.$pid.'" />
    </form>
    <div id="display">
    </div> 
```

我的查询代码：

```
<script type="text/javascript">
$(document).ready(function(){
$(".search").change(function() 
{
var searchbox = $(this).val();
var dataString = 'searchword='+ searchbox;
if(searchbox=='')
{}
else
{
$.ajax({
type: "POST",
url: "check_stock.php",
data: dataString,
cache: false,
success: function(html)
{
$("#display").html(html).show();
}
});
}return false; 
});
});
</script> 
```

任何帮助表示赞赏

到目前为止我得到的示例 [http://mysandbow.webatu.com/view_product?product=2](http://mysandbow.webatu.com/view_product?product=2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:26:37.750

您使用这行代码获取 ID

```
myId =$(this).attr("id"); 
```

# c++ - C++链表内存泄漏

> ID：10152150
> 
> 赞同：0
> 
> 时间：2012-04-14T08:22:48.313
> 
> 标签：c++, memory, memory-leaks, valgrind

嗨，我通过 valgrind 运行了我的程序，这是报告

堆摘要：退出时使用：1 个块中的 8 个字节 总堆使用量：1 个分配，0 个释放，分配 8 个字节泄漏摘要：肯定丢失：1 个块中的 8 个字节

这是我的程序

```
int main() {    
NodeData nodedata1(1, 'a');
List list1;
list1.insert(&nodedata1);

   return 0;
}
//---my List class
class List {
public:
   List(); 
   bool insert(NodeData*);                     // insert one Node into list
   bool isEmpty() const; 
private:
   struct Node {              // the node in a linked list
      NodeData* data;         // pointer to actual data, operations in NodeData
      Node* next;
   };
   Node* head;                                 // pointer to first node in list
};
// my bool insert method
bool List::insert(NodeData* rightPtr) {  
   Node* newPtr = new Node;
   newPtr->data = rightPtr;    
   if (isEmpty() || *newPtr->data < *head->data) {
      newPtr->next = head;                           
      head = newPtr;
   }
   else {
      Node* current = head; 
      while (current->next !=NULL && *current->next->data < *newPtr->data) {
           current = current->next;
      }
      newPtr->next = current->next;
      current->next = newPtr;
   }
   return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T09:07:19.183

通过声明它创建的对象将在其范围结束之前被销毁。*除非您手动删除它，否则使用new*创建的对象不会被销毁。以下示例演示了对象的生命周期。

```
#include <iostream>
using namespace std;

class Data {
    protected:
        char* name;
    public:
        Data(char* n) {
            name = n;
            cout << name <<  " is created." << endl;
        }

        ~Data() {
            cout << name <<  " is destroyed." << endl;
        }
};

void ScopeDemo() {
    Data obj1("Obj1");
    Data* obj2 = new Data("Obj2");
}

int main()
{
    ScopeDemo();
    return 0;
} 
```

在现代操作系统中，应用程序使用的内存将在应用程序终止时被释放。

* * *

**在您的示例中，当List**对象被销毁（通过对象析构函数）以及从**List**中删除节点时，您将需要手动删除。

```
List::~List() {
    if (!isEmpty()) {
        Node* toDelete = head;
        while(toDelete != NULL) {
            Node* next = toDelete->next;
            delete toDelete;
            toDelete = next;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T08:26:18.997

您`Node`在`insert`方法中动态分配 a 并且永远不会删除它：

```
Node* newPtr = new Node; 
```

您需要跟踪这些`Nodes`并在析构函数中删除它们`List`，或者有一些其他的安排来处理内存（即将 的所有权传递`Nodes`给负责在正确时刻删除它们的东西）。

# ruby - 在 Formtastic 操作链接中指定 HTML 方法

> ID：10152151
> 
> 赞同：1
> 
> 时间：2012-04-14T08:23:00.223
> 
> 标签：ruby, ruby-on-rails-3.1, formtastic

在 Formtastic`semantic_form_for`中，我希望*Cancel*链接通过以下方法指向控制器的销毁操作`delete`：

```
= semantic_form_for @user, url: password_reset_path(params[:id]) do |f|
    = f.inputs do
        = f.input :password
        = f.input :password_confirmation
    = f.actions do
        = f.action :submit, label: 'Reset password'
        = f.action :cancel, label: 'Cancel password reset',
            as: :link, url: password_reset_path(params[:id]), html: { method: :delete } 
```

这是`html: { method: :delete }`我想要开始工作的部分，因此`password_resets#destroy`当用户单击“*取消*”链接时，我的临时资源“密码重置”会立即被销毁。

请注意，这不是为整个表单指定 HTML 方法（正如其他地方所要求的那样）。

上面的代码忽略了 DELETE 方法，所以我想知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:37:39.217

使用`button_html`选项。

尝试一下！

```
<%= f.action :cancel, :label => "Cancelar", url: order_path(@order), button_html: {method: :delete} %> 
```

# c++ - 由于第三方库的名称冲突导致的段错误

> ID：10152153
> 
> 赞同：1
> 
> 时间：2012-04-14T08:24:08.387
> 
> 标签：c++, linker, segmentation-fault, hydra

我正在尝试使用来自 Sixense 的专有 sdk（游戏控制器的驱动程序）。看起来它们静态链接到 boost::thread。我的应用程序和它的一些依赖项也使用了 boost::thread，我得到了一个段错误。

```
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7bd1bb5 in boost::thread::start_thread() () from /usr/lib/libboost_thread.so.1.42.0
(gdb) bt
#0  0x00007ffff7bd1bb5 in boost::thread::start_thread() () from /usr/lib/libboost_thread.so.1.42.0
#1  0x00007ffff79869bb in USBDetector::start_hotplug_thread() ()
   from /home/joschu/Downloads/sixenseSDK_linux_OSX/samples/linux_x64/sixense_simple3d/libsixense_x64.so
#2  0x00007ffff7986c7e in USBDetector::start(std::vector<unsigned int, std::allocator<unsigned int> >, std::vector<std::vector<unsigned int, std::allocator<unsigned int> >, std::allocator<std::vector<unsigned int, std::allocator<unsigned int> > > >, std::vector<unsigned int, std::allocator<unsigned int> >) () from /home/joschu/Downloads/sixenseSDK_linux_OSX/samples/linux_x64/sixense_simple3d/libsixense_x64.so
#3  0x00007ffff7987298 in USBManagerLinux::start(std::vector<unsigned int, std::allocator<unsigned int> >, std::vector<std::vector<unsigned int, std::allocator<unsigned int> >, std::allocator<std::vector<unsigned int, std::allocator<unsigned int> > > >, std::vector<unsigned int, std::allocator<unsigned int> >, int) () from /home/joschu/Downloads/sixenseSDK_linux_OSX/samples/linux_x64/sixense_simple3d/libsixense_x64.so
#4  0x00007ffff79842f3 in USBManager::start(std::vector<unsigned int, std::allocator<unsigned int> >, std::vector<std::vector<unsigned int, std::allocator<unsigned int> >, std::allocator<std::vector<unsigned int, std::allocator<unsigned int> > > >, std::vector<unsigned int, std::allocator<unsigned int> >, int) () from /home/joschu/Downloads/sixenseSDK_linux_OSX/samples/linux_x64/sixense_simple3d/libsixense_x64.so
#5  0x00007ffff79a03d6 in DriverMain::start(int) ()
   from /home/joschu/Downloads/sixenseSDK_linux_OSX/samples/linux_x64/sixense_simple3d/libsixense_x64.so
#6  0x00007ffff79a1e32 in sixenseInit ()
   from /home/joschu/Downloads/sixenseSDK_linux_OSX/samples/linux_x64/sixense_simple3d/libsixense_x64.so
#7  0x0000000000400d0d in main () at /home/joschu/bulletsim/src/hydra/hi.cpp:6 
```

如果我切换项目链接的方式，我发现我的其他库最终调用了 Sixense 的 boost::thread。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:55:49.410

> 看起来它们静态链接到 boost::thread

你没有说他们静态链接`boost::thread`到什么。我假设他们将其链接到`libsixense_x64.so`.

有几种避免名称冲突的通用方法：

1.  要求 sdk 开发人员清理他们的行为。他们*应该*做的是静态链接提升并*隐藏*该事实，例如通过使用 -fvisibility=hidden 进行编译，并且只导出他们想要的接口，而不是导出*所有内容*（这听起来就是他们所做的）。
2.  如果不能强制 sdk 开发者清理，可以通过`dlopen`with `RTLD_LOCAL`binding 加载他们的 sdk 库。这使得使用 sdk 有点尴尬，但应该将其符号保留在全局动态链接器命名空间中。
3.  最后，为了完整性：如果您在 Linux 上（您的消息建议但未说明），您可以使用`dlmopen`将 sdk 加载到完全独立的动态链接器命名空间中。与选项 2 相比，我没有看到任何优势，并且有几个缺点。

# java - HTMLUNIT 2.9 jar 发表评论

> ID：10152154
> 
> 赞同：-1
> 
> 时间：2012-04-14T08:24:11.967
> 
> 标签：java, post, comments, htmlunit, htmlcontrols

我写了这段代码：

```
import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlSubmitInput;
import com.gargoylesoftware.htmlunit.html.HtmlTextArea;
import java.util.ArrayList;
import java.util.List;

/**
*
* @author user
*/
public class YouTubeComment {

public static void main(String[] args) {
    boolean f = YouTubeLogin.login();
    try {
        if (f) {
            WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
            webClient.setRedirectEnabled(true);
            webClient.setJavaScriptEnabled(false);
            HtmlPage firstPage = webClient.getPage("http://www.youtube.com/watch?v=kqDacBDoVM4&feature=related");
            List<HtmlForm> forms = new ArrayList();
            forms = (List<HtmlForm>) firstPage.getForms();
            HtmlForm form = firstPage.getForms().get(1);

            HtmlTextArea commentArea = (HtmlTextArea)form.getTextAreaByName("comment");
            commentArea.setText("good");
         HtmlSubmitInput submitButton =(HtmlSubmitInput)form.getInputByName("");
            HtmlPage pageAfterPost = (HtmlPage) submitButton.click();
        } else {
            System.out.println("Sorry..! Login is not successful");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

此应用程序可以使用用户名和密码登录 YouTube 帐户。
我想写一些代码在成功登录后发表评论。
请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T08:51:18.637

好的，因此您可能应该尝试在 Firefox 上使用 Firebug 查看页面的 HTML 内容，以查看用于发表评论的字段。

从我所见，您需要找到一个名为“comments-view”的 div。在那个 div 更深一点，有一个带有 action 的表单`/comment_servlet?add_comment=1`。然后你应该填写 textarea 注释（它的 name 属性设置为 'comment'）。最终，您需要找到“发布”按钮并单击它。

# ios - 外部附件和 NSlog 语句

> ID：10152155
> 
> 赞同：1
> 
> 时间：2012-04-14T08:24:35.350
> 
> 标签：ios

我的 iPad 中插入了一个外部配件。我看不到我的 NSLog 语句，因为我的 ipad 无法再连接到我的计算机。有没有办法仍然看到 NSLog 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:15:32.330

是的，您可以将 NSLog 语句重定向到文件以供以后显示。请参阅[记录到 iPhone 上的文件](https://stackoverflow.com/q/202299/1318452)。

这将导致将日志语句写入指定文件。如果您想知道它是如何工作的，请查看 C 文本输入/输出的工作原理，包括标准输入、标准输出和标准错误。

```
freopen([newFileName UTF8String], "w+", stderr); 
```

您可以将该文件保存到 Documents 目录，然后通过 iTunes 文件共享检索它。或者，一旦您的设备重新插入，您可以让应用程序将其日志内容转储到控制台。请记住首先禁用该重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T08:33:16.473

您可以访问源代码吗？如果是，那么您可以在所有 UIView 上添加一些 UITextView 或 UILabelView，并将所有 NSLog 语句放在那里。

# documentation - 验证用户输入是否是功能需求的一部分？

> ID：10152163
> 
> 赞同：3
> 
> 时间：2012-04-14T08:25:32.430
> 
> 标签：documentation, report, methodology, requirements

我正在使用 FURPS+ 模型来满足我的要求。而且我知道功能类别是功能需求，其余的是非功能需求。

但我想知道，验证算作功能性需求还是非功能性需求？验证界面上的用户输入。我正在考虑将其列为可用性类别下的非功能性。

我这样说对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:41:39.787

当您说用户输入验证时，它是要完成的功能的组成部分。让我们说需求说输入字段不应该包含任何数字数据。所以现在它是功能需求。您可以验证这确实需要在需求中提及。如果是需求并且在文档中提到，那么这个是一个功能需求。如果这不是真正的需求，或者可能由于一些其他功能的实现而隐式实现，那么不必太担心。但是现在我们将验证用户输入以提高应用程序的稳定性，因此可以将其视为功能需求。

对于与非功能性需求相关的一件事，应用程序的性能不是功能性需求的一部分。它标识了应用程序的行为。这样你就可以真正区分它。

# python - Python：检测物理非 HT CPU 的跨平台解决方案？

> ID：10152173
> 
> 赞同：2
> 
> 时间：2012-04-14T08:26:40.293
> 
> 标签：python, windows, linux, multiprocessing

我正在尝试使用跨平台方法检测机器上非超线程内核的数量。

Multiprocessing 的[cpu_count](http://hg.python.org/cpython/file/60f7719c0415/Lib/multiprocessing/__init__.py#l108)只检测处理器总数，我可以在 Linux 机器上 grep /proc/cpuinfo 找到答案。但是，我正在寻找 Windows 解决方案。

这个新闻组[线程](https://groups.google.com/forum/?fromgroups#!topic/nzpug/_5sFW9BEMQ4)有点帮助，但我仍然没有找到答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-04-11T05:41:17.227

平台独立且在 python 标准库中：

> psutil.cpu_count(逻辑=假)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T09:25:10.543

您可以使用 Tim Golden 的 WMI 绑定来访问有关 Windows 上 CPU 的 wmi 信息。请参阅[Tim 的 wmi 模块食谱](http://timgolden.me.uk/python/wmi/cookbook.html)。您可能想要使用`Win32_Processor`该类 - 请参阅 [Microsoft 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)。

请注意，在*备注*部分中，Microsoft 文档指出：

> > 要确定是否为处理器启用了超线程，请比较 NumberOfLogicalProcessors 和 NumberOfCores。如果在 BIOS 中为处理器启用了超线程，则 NumberOfCores 小于 NumberOfLogicalProcessors。例如，包含两个启用超线程的处理器的双处理器系统可以运行四个线程或程序或同时运行。在这种情况下，NumberOfCores 为 2，NumberOfLogicalProcessors 为 4。

[Dag Wieer 的](http://dag.wieers.com/blog/is-hyper-threading-enabled-on-a-linux-system)`/proc/cpuinfo`博客展示了一种从Linux上提取超线程信息的方法。

我认为，如果第一行和第二行的输出

```
cat /proc/cpuinfo | egrep 'physical|processor' | grep -v sizes | \
                    tail -n2 | cut -d : -f 2` 
```

不同的是，启用了超线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T13:34:15.940

对于独立于平台的方法，请参阅 python 绑定到 hwloc：

```
#!/usr/bin/env python
import hwloc
topology = hwloc.Topology()
topology.load()
print topology.get_nbobjs_by_type(hwloc.OBJ_CORE) 
```

hwloc 旨在跨操作系统和体系结构移植。

# jquery - 如何获得整页宽度的菜鸟幻灯片？

> ID：10152174
> 
> 赞同：-1
> 
> 时间：2012-04-14T08:26:48.603
> 
> 标签：jquery, css, mootools

我正在尝试为我的网站创建一个完整的页面。*我尝试在style.css*中将宽度更改为 100%，但它不起作用。

这是我正在处理的示例的副本。 [http://dl.dropbox.com/u/39803954/noobslide_demo/index.html](http://dl.dropbox.com/u/39803954/noobslide_demo/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:29:17.353

您需要根据您的目标更改一两件事：

1.  在第 67 行的 style.css 中替换`width: 600px`为`width: 100%`
2.  如果您需要更改实际内容幻灯片的宽度，您可以在第 5 行的 style.css 中进行编辑，将`width: 600px`其更改为您需要的任何内容。

如果这不起作用，请进行更改并发表评论。

# javascript - 谷歌地图和 DART

> ID：10152177
> 
> 赞同：10
> 
> 时间：2012-04-14T08:27:07.803
> 
> 标签：javascript, api, google-maps, google-maps-api-3, dart

我是飞镖的新手。是否可以在 DART 上使用 Google Maps Javascript API？如果现在不能直接实现，还有其他替代方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T18:42:18.787

您现在可以使用[pub](http://pub.dartlang.org)上提供的[google_maps 包](http://pub.dartlang.org/packages/google_maps)。该库允许您从 dart 脚本中使用 Google Maps JavaScript API。

只需将依赖项添加到您的*pubspec.yaml*

```
dependencies:
  google_maps: ">=1.0.1 <2.0.0" 
```

使用`<script>`标签包含 Maps API JavaScript。

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

然后，您可以使用 dart 脚本中的 Google 地图。这是一个简单的例子：

```
import 'dart:html';
import 'package:google_maps/google_maps.dart';

void main() {
  final mapOptions = new MapOptions()
    ..zoom = 8
    ..center = new LatLng(-34.397, 150.644)
    ..mapTypeId = MapTypeId.ROADMAP
    ;
  final map = new GMap(query("#map_canvas"), mapOptions);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T09:55:42.680

目前，如果你想与 JavaScript 通信，你需要使用Dart 的[postMessage （这最终会改变）。](http://api.dartlang.org/html/Window.html#postMessage)因此，现在您需要向您的应用程序添加一些 JavaScript 代码，以协调与 Google maps JS API 和 Dart 之间的消息：

```
function googleMapsCallback(s) { 
   window.postMessage(JSON.stringify(s), '*'); 
} 
```

然后在你的 Dart 代码中：

```
class GoogleMap { 
  GoogleMap() {
     window.on.message.add(received, false); 
  }

  received(MessageEvent e) { 
    var data = JSON.parse(e.data); 
    // do stuff with google maps data 
  } 
} 
```

或者，您可以使用XMLHttpREquest 直接从 Dart使用[Google Maps REST API](https://developers.google.com/maps/documentation/staticmaps/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T23:29:16.710

Dart 现在有一个 JavaScript 互操作性库：[http ://www.dartlang.org/articles/js-dart-interop/](http://www.dartlang.org/articles/js-dart-interop/)

该页面上的示例之一是如何与 Google Apps 进行互操作。

# java - 当我调用 repaint() 时，为什么我的 JPanel 没有改变？

> ID：10152178
> 
> 赞同：2
> 
> 时间：2012-04-14T08:27:19.103
> 
> 标签：java, swing, event-listener

我有以下代码需要帮助...

```
public class Nodes extends JPanel implements ActionListener, MouseListener, MouseMotionListener {

    private static JPanel p1;
    private static JPanel p2;
    private JButton linkButton, nodeButton;
    private Vector nodeVector, linkVector;
    private Vector<Integer> data;
    private String s1,s2;
    public int x;
    int pt1;
    public int pt2;
    private Rectangle Node;
    private boolean f1, f2 = false;

    Nodes () {
        JFrame F = new JFrame ("Add Node / Add Link");
        nodeVector = new Vector ();
        linkVector = new Vector ();
        data = new Vector <Integer> ();
        F.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        F.setVisible (true);
        F.setSize (500, 500);
        p1 = new JPanel ();
        p2 = new JPanel ();
        linkButton = new JButton ("Add Link");
        nodeButton = new JButton ("Add Node");
        linkButton.addActionListener (this);
        nodeButton.addActionListener (this);
        p2.addMouseListener (this);
        p2.addMouseMotionListener (this);
        p1.add (linkButton);
        p1.add (nodeButton);
        F.add (p1,BorderLayout.SOUTH);
        F.add (p2,BorderLayout.CENTER);
        p2.setBackground (Color.WHITE);
    }

    public void paintComponent (Graphics g) {
        super.paintComponent (g);
        Graphics2D g2d = (Graphics2D)(g);
        BufferedImage buffImage = new BufferedImage (25,25,BufferedImage.TYPE_INT_RGB);
        Graphics2D gg = buffImage.createGraphics ();
        gg.setColor (Color.GRAY);
        gg.fillRect (0, 0, 25, 25);
        gg.setStroke (new BasicStroke (12.0f));
        gg.setColor (Color.BLUE);
        gg.drawString ("" + data, 10, 10);
        g2d.setPaint (new TexturePaint (buffImage, new Rectangle (25,25)));
        g.drawRect (pt1, pt2, 10, 10);
        repaint ();
    }

    public void actionPerformed(ActionEvent e){                   
        if(e.getSource()==linkButton){
        s1 = JOptionPane.showInputDialog (null, "Insert the first Node Number");
            s2 = JOptionPane.showInputDialog (null, "Insert the second Node Number");
        }
        if (e.getSource () == nodeButton){
            x = Integer.parseInt ((JOptionPane.showInputDialog (null, "Insert the Node Number")));
            for (int i = 0 ; i < data.size (); i++){ 
                if (x == (int) data.get (i))
                    x = Integer.parseInt (JOptionPane.showInputDialog (null, "Used before insert another number"));
            }
            data.add (x);
            f1 = true; 
        }
    }

    public void mouseClicked (MouseEvent e){
           f2 = true;
           if (f1){ 
               JOptionPane.showMessageDialog (null, "you clicked at" + e.getPoint ());
               pt1 = e.getX ();
               pt2 = e.getY ();
               f1 = !f1;
               repaint ();
           }
    }

    public static void main (String[] args) {
        new Nodes();
    }   
} 
```

我正在尝试通过调用来更新显示`repaint()`，但是该`paintComponent()`方法不起作用，并且实际上没有任何变化。在正确的行为中，当我按下“添加节点”按钮然后单击面板上的任意位置时，应绘制一个带有用户输入数字的矩形。

谁能帮助解释我的代码有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T09:06:29.750

您的主类是 JPanel，但它没有添加到 JFrame 及其 Panels/Buttons/whatnot 中。

试试这种方式：

```
private Vector<Integer> data;
public int x;
int pt1;
public int pt2;
private Rectangle Node;
private boolean f1, f2 = false;
private JButton linkButton, nodeButton;

Nodes ()
{
    JFrame F = new JFrame ("Add Node / Add Link");
    Vector nodeVector, linkVector;
    nodeVector = new Vector ();
    linkVector = new Vector ();
    data = new Vector <Integer> ();
    F.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    F.setVisible (true);
    F.setSize (500, 500);

    JPanel p1 = new JPanel ();
    linkButton = new JButton ("Add Link");
    nodeButton = new JButton ("Add Node");
    linkButton.addActionListener (this);
    nodeButton.addActionListener (this);
    addMouseListener (this);
    addMouseMotionListener (this);
    p1.add (linkButton);
    p1.add (nodeButton);
    F.add (p1, BorderLayout.SOUTH);
    F.add (this, BorderLayout.CENTER);
    setBackground (Color.WHITE);
} 
```

许多属性可以是局部变量。JPanel p2 被移除并替换为 JPanel `this`，它允许使用要使用的paintComponent 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T08:44:33.637

您永远不会将节点添加到组件层次结构中，因此永远不会调用paintComponent。

# c++ - c++：继承和模板性能权衡

> ID：10152182
> 
> 赞同：1
> 
> 时间：2012-04-14T08:27:44.580
> 
> 标签：c++, templates, inheritance

昨天有人问我一个问题，使用继承和模板之间的性能权衡是什么？

我说过在虚函数的情况下，动态链接在继承时会引起一些性能问题。但是，使用模板，专用类将在编译时本身生成，因此除了可执行文件的大小随着专用类的数量而增长之外，没有性能问题。

谁能解释这里是否还有其他需要考虑的事情？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:34:12.997

首先 - 在我看来，继承和模板是相互正交的（有关这方面的章节，请参阅 OOSC）。在 C++ 中，权衡基本上归结为：

*   模板在可执行文件中需要空间，因为每个特化都需要生成代码。
*   继承虚函数需要一个虚表，所有非静态方法调用都需要一个额外的参数（this），并且对虚函数的调用通过虚表间接调用。

所以这是空间与速度。但是您可以在同一个课程中同时拥有两者的优点和缺点（请参阅我的第一句话——它们想要达到的功能是正交的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:35:35.257

您说虚函数可能具有性能开销并且模板实例化具有代码大小开销是非常正确的，但是两者都可以得到缓解。

我不断提醒自己，C++ 是建立在不为你不使用的东西付费的前提下的，所以对于继承的类，你总是可以将公共代码移动到非虚拟函数中以避免 vtable 查找，并且有时会做一个内联方法可以很好地配合编译器的优化，使代码更快（没有函数调用）*和*更小。

与模板类似，任何不依赖于模板类型的代码都可以推入非模板基类，因此该函数只会有一个副本。

# wpf - 如何确定控件已分配的样式

> ID：10152190
> 
> 赞同：0
> 
> 时间：2012-04-14T08:29:30.667
> 
> 标签：wpf, wpf-controls, styles

我有一个测验应用程序，其中最多可以有 3 个可能的答案。答案是已分配样式的按钮。所有的答案按钮都有相同的点击事件......

```
Private Sub butAnswer_Click(ByVal sender as Object, ByVal e as System.Windows.RoutedEventArgs)
    'An Answer has been clicked

    Dim butC as Button
    Dim butS as String = TryCast(sender, Button).Name.ToString()
    'Cycle through all answers and set style
    For x = 1 to 3
        butC = DirectCast(FindName("butAnswer" & x), Button) 
        If butS = "butAnswer" & x.ToString Then
            butC.Style = DirectCast(FindResource("GlassButtonSelected"), Style)
        Else
            butC.Style = DirectCast(FindResource("GlassButton"), Style)
        End If
    Next

End Sub 
```

我现在想对此进行扩展，以便如果用户第二次单击“选定”答案，则样式将恢复为“GlassButton”

```
If butS = "butAnswer" & x.ToString Then
'Check what style the button has
   If 'style is GlassButton' Then
      butC.Style = DirectCast(FindResource("GlassButtonSelected"), Style)
   Else
      butC.Style = DirectCast(FindResource("GlassButton"), Style)
   End If
Else
   butC.Style = DirectCast(FindResource("GlassButton"), Style)
End If 
```

我的问题是如何确定按钮的样式？

附加更新

肯特，谢谢，我是 wpf 的新手，不知道所有这些额外的控件......我现在已经将我的按钮转换为 ToggleButtons，并且有一个所有 ToggleButtons 都使用的选中和未选中事件。我已经修改了我的样式，以便目标是 ToggleButton，我现在只有一个。我已经摆脱了用于指示选定答案的样式 - 基本上是背景颜色的变化。我的 Checked 事件有...

```
Private Sub togAnswer_Checked(ByVal sender as Object, ByVal e as System.Windows.RoutedEventArgs)
    'togAnswer was clicked....
    Dim togC as ToggleButton
    Dim togS as String = TryCast(sender, ToggleButton).Name.ToString()
    'Cycle through all answers and set style
    Dim bc = New BrushConverter()

    For x = 1 to 3
        togC = DirectCast(FindName("togAnswer" & x), ToggleButton) 

        If togS = "togAnswer" & x.ToString Then
                            'Set ToggleButton to selected colour
            togC.Background = DirectCast(bc.ConvertFrom("#AAFF8020"), Brush)
        Else    
            'Set other ToggleButtons to unselected colour
            togC.Background = DirectCast(bc.ConvertFrom("#AA000000"), Brush)
        End If
    Next
End Sub 
```

不幸的是，按钮颜色没有改变。知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:44:10.493

简而言之，你做错了。您需要识别行为（处于两种状态之一的按钮）并将其与该行为的视觉表现区分开来。这样做会导致您使用 a`ToggleButton`并根据其`IsChecked`属性简单地更改其外观。

# entity-framework - 关于使用 Code First、Repository Pattern 和 n-Tier 的一些问题？

> ID：10152193
> 
> 赞同：2
> 
> 时间：2012-04-14T08:30:06.300
> 
> 标签：entity-framework, tdd, repository-pattern, n-tier-architecture

我想首先使用 EF 代码。我正在使用存储库模式。我想实现一个 n 层架构。我真正想要的是使用 TDD，但我遇到了聚合路由的问题。我的问题是这个...

我有一个博客对象。可以从此博客对象添加相关文件。伟大的。所以我本质上有 1 个聚合根，我为它创建了我的存储库，然后我需要添加一些允许我将关联文件“添加”到博客的方法。但是我把这个放在哪里？它是一个数据访问层的东西，所以我真的想要它。但老实说，这也是一个业务逻辑挑战。该产品的一部分是能够添加关联文件。那么我应该将逻辑添加到 DAL 或 BLL 中吗？

希望有人能给我一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:19:39.323

您正在谈论存储库和聚合根，所以我假设您说您想做 DDD。在 DDD 中，您应该有一个域模型，该模型应该是您与系统用户一起开发的模型。在任何情况下，它都应该包含普通用户应该理解的概念。因此，如果用户将博客视为具有关联文件的东西，并且这些文件可以添加到博客中，那么关联文件属于您的域模型，并且您的博客对象应该有一个 add 方法。我的猜测是您的 BLL 是您要放置这些关联文件的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T13:23:39.407

首先，在您知道有界上下文之前，您无法识别聚合根。没有明确的 BS，就没有 AR。根据上下文，任何对象都可以是 AR。我不知道您的域，因此我将博客添加文件所需的信息视为有效信息。所以添加功能在 AR 中。

存储库处理与持久性相关的所有内容，即保存在数据库中。在这种情况下，它应该包含一个方法，仅此而已。

```
public interface IBlogFilesRepository
 {
     void Save(Blog);
 } 
```

您总是将域/业务逻辑放在域/BL 层中。DAL 仅处理保存/加载到数据库，它在处理域行为方面没有业务（原文如此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T09:37:07.520

我认为您的意思是 DDD 而不是 TDD，因为您所说的在 TDD 的上下文中意义不大。

您需要坐下来思考文件对您的系统意味着什么，是否有任何规则可以连接文件和帖子。例如，如果我们删除一个帖子，文件应该有什么？我们也删除它们吗？我们可以将相同的文件“添加”到多个帖子中吗？您坐下来，思考并收集有关您文件的知识，然后决定它是否值得在您的域中引入。

我可以想象的一些示例域：

```
public class Post
{
    private List<File> _files;
    public IEnumerable<File> AssociatedFiles {get {return _files;}}
    public void AssociateFile(File file){//...}
    public void DisassociateFile(File file ){//...}

    //It doesn't delete it just do some logic. Maybe we can't delete this post and need to throw exception or whatever logic you need
    public void Delete()
    {
        foreach (File file in AssociatedFiles) DisassociateFile(file);
    }
}

public class File 
{
    public String Url;
    public DateTime Created;
    public DateTime Modified;
}

public class PostRepository
{
    public void Delete(Post post)
    {
        post.Delete();
        DbContext<Post>.Delete(post); //I Don't remember EF syntax for this
        DbContext.SaveChanges();
    }
} 
```

**更新：让我们继续...**

在对您的领域进行了 5 分钟的思考后，我发现我的初始设计遗漏了重要的概念（与 DDD 一样，您会一点一点地刮取知识）。

谁负责上传文件？用户可以将他已经上传的文件关联到 Post，他可以添加新的文件（未上传的）文件来发布吗？他能把这些东西混在一起吗？这些都是重要的问题，你需要再次考虑它并设计你的系统。

# php - OrientDB PHP/Gremlin 桥

> ID：10152198
> 
> 赞同：5
> 
> 时间：2012-04-14T08:31:25.683
> 
> 标签：php, groovy, orientdb, gremlin

我正在使用 OrientDb 并想通过 PHP 运行 Gremlin 命令。有人知道是否有任何可以连接这两种语言的桥梁或产品吗？

虽然我知道 OrientDB-PHP 和 OrientDB-REST 包，但它们都不允许执行 Gremlin 命令。

或者，从哪里开始学习如何编写和实现这样一段脚本的最佳地点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:07:13.037

使用 REST 协议向该 URL 发送一个 HTTP POST：

[http://localhost:2480/command/demo/gremlin](http://localhost:2480/command/demo/gremlin)

包含此内容：gV

有关更多信息，请查看[http://code.google.com/p/orient/wiki/OrientDB_REST#POST_-_Command](http://code.google.com/p/orient/wiki/OrientDB_REST#POST_-_Command)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T06:37:33.940

有一个项目致力于抽象出 ODB（和其他图形数据库）SQL（以及 Gremlin）。

它被称为蜘蛛。

[https://github.com/spider/spider](https://github.com/spider/spider)

它仍处于 alpha 阶段，还有很多工作要做，但如果有的话，它应该可以帮助您稍后在多个图形数据库（不仅仅是 ODB）上运行查询。它也应该允许直接查询 Gremlin。

请关注回购，甚至提供一些反馈。

斯科特

# php - 试图用其名称完整的php保存图像

> ID：10152202
> 
> 赞同：0
> 
> 时间：2012-04-14T08:32:10.190
> 
> 标签：php

嗨，我正在使用下面的脚本将来自另一个域的图像保存到我自己的域中。

```
 //get image name and extension
  $img = 'http://otherdomain.com/image/123.jpg';
  $getname = explode('/', $img);
  $thumbname = $getname[count($getname) - 1];
  //save the image file
  $file = file_get_contents($img);
  $path = 'thumbs/'+ $thumbname;
  file_put_contents($path, $file); 
```

但我不能让它工作。$path 导致`123`但不是`123.jpg`（我需要）。我在做文件获取内容和文件放置内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:36:00.723

您可以使用`basename()`来确定路径的最后一部分（= 文件名）。

```
$image_name = basename($img); // This will contain 123.jpg 
```

[请参阅http://php.net/manual/en/function.basename.php](http://php.net/manual/en/function.basename.php)上的文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T08:36:13.167

我可能会使用[http://php.net/parse_url](http://php.net/parse_url)。

并且`+`是 PHP 中的加法，而不是串联。将其更改为`.`

```
$path = 'thumbs/' . $thumbname; 
```

# hibernate - 部署在 jboss 上的应用程序不会更新数据库架构

> ID：10152206
> 
> 赞同：0
> 
> 时间：2012-04-14T08:32:33.843
> 
> 标签：hibernate, jakarta-ee, jboss, datasource, hbm2ddl

我开始学习 j2ee 并查看了 jboss7 quickstarts。确切地说是 jboss-as-login 示例。它工作得很好，但是当我更改默认数据源（使用新创建的数据源）和persistence.xml 时，尽管在persistence.xml 中设置了属性，但它不会使用hbm2ddl 更新数据库模式。并且日志中**没有更新的迹象**

这是我的文件

persistence.xml - [http://pastebin.com/2M5gx0Tp](http://pastebin.com/2M5gx0Tp) 启动日志 - [http://pastebin.com/U0zZVQn0](http://pastebin.com/U0zZVQn0)

我会说，如果我更改实体代码中的某些内容，然后手动更正数据库，一切正常。但我不想手工创造一切。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:28:15.530

不应该调用属性`hibernate.hbm2ddl.auto`吗？在您的配置中，您将其称为`hbm2ddl.auto`.

# c# - 除非我在 InitializeComponent 方法之前调用该方法，否则无法使用 graphsharp 在 wpf 中绘图

> ID：10152208
> 
> 赞同：1
> 
> 时间：2012-04-14T08:32:41.693
> 
> 标签：c#, wpf

[我按照http://graphsharp.com](http://graphsharp.com)上的视频教程介绍了如何将 graph# library 与 WPF 一起使用，并且很容易找到一些顶点和连接它们的边。该图的代码写在一个方法中，该方法在该`MainWindow`方法之前的`InitializeComponent`方法中调用，因此在编译时，该图会自动出现。问题是我试图在方法中调用相同的绘图`button_click`方法，但是每次点击按钮时什么都没有出现。

这是我的代码

```
public partial class MainWindow : Window
{
    private IBidirectionalGraph<object, IEdge<object>> _graphToVisualize;

    public IBidirectionalGraph<object, IEdge<object>> GraphToVisualize
    {
        get { return _graphToVisualize; }
    }

    public MainWindow()
    {
        //CreateGraphToVisualize();     //When compiling with this instruction uncommented, the graph is drawn
        InitializeComponent();
    }

    private void CreateGraphToVisualize()
    {
        var g = new BidirectionalGraph<object, IEdge<object>>();

        // add the vertices to the graph
        string[] vertices = new string[5];
        for (int i = 0; i < 5; i++)
        {
            vertices[i] = i.ToString();
            g.AddVertex(vertices[i]);
        }

        // add edges to the graph
        g.AddEdge(new Edge<object>(vertices[0], vertices[1]));
        g.AddEdge(new Edge<object>(vertices[1], vertices[2]));
        g.AddEdge(new Edge<object>(vertices[2], vertices[3]));
        g.AddEdge(new Edge<object>(vertices[3], vertices[1]));
        g.AddEdge(new Edge<object>(vertices[1], vertices[4]));

        _graphToVisualize = g;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        CreateGraphToVisualize();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T09:31:15.163

您的问题是，该窗口使用绑定到 graphvisualize

```
<Window x:Class="MainWindow "
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:graphsharp="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
        xmlns:zoom="clr-namespace:WPFExtensions.Controls;assembly=WPFExtensions"
        Title="Window1" Height="300" Width="300" x:Name="root">
  <Grid>
    <zoom:ZoomControl>
      <graphsharp:GraphLayout x:Name="graphLayout"
                              Graph="{Binding ElementName=root,Path=GraphToVisualize}"
                              LayoutAlgorithmType="FR" OverlapRemovalAlgorithmType="FSA"
                              HighlightAlgorithmType="Simple" />
    </zoom:ZoomControl>
  </Grid>
</Window> 
```

使用依赖属性或使用 INotifyPropertyChanged 接口来解决您的问题

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private IBidirectionalGraph<object, IEdge<object>> _graphToVisualize;

    public IBidirectionalGraph<object, IEdge<object>> GraphToVisualize {
      get { return this._graphToVisualize; }
      set {
        if (!Equals(value, this._graphToVisualize)) {
          this._graphToVisualize = value;
          this.RaisePropChanged("GraphToVisualize");
        }
      }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void RaisePropChanged(string name) {
      var eh = this.PropertyChanged;
      if (eh != null) {
        eh(this, new PropertyChangedEventArgs(name));
      }
    }

    private void CreateGraphToVisualize()
    {
        var g = new BidirectionalGraph<object, IEdge<object>>();

        // add the vertices to the graph
        string[] vertices = new string[5];
        for (int i = 0; i < 5; i++)
        {
            vertices[i] = i.ToString();
            g.AddVertex(vertices[i]);
        }

        // add edges to the graph
        g.AddEdge(new Edge<object>(vertices[0], vertices[1]));
        g.AddEdge(new Edge<object>(vertices[1], vertices[2]));
        g.AddEdge(new Edge<object>(vertices[2], vertices[3]));
        g.AddEdge(new Edge<object>(vertices[3], vertices[1]));
        g.AddEdge(new Edge<object>(vertices[1], vertices[4]));

        GraphToVisualize = g;
    }
} 
```

希望这可以帮助

# c - C函数没有按顺序执行

> ID：10152221
> 
> 赞同：0
> 
> 时间：2012-04-14T08:36:20.700
> 
> 标签：c, execution

我知道可能会有类似的问题，只是它们是在C++中的，我不知道它们是否相同。我有一些代码

```
void BuildApp(char *AppName)
{
        char *cmd;
        cmd = combine("mkdir ./Projects/", AppName);
        cmd = combine(cmd, "/Package/");
        // Make the package dir.
        system(cmd);
        cmd = "";
        cmd = combine("mkdir ./Projects/", AppName);
        cmd = combine(cmd, "/Package/DEBIAN");
        system(cmd);
        cmd = "";
        cmd = combine("mkdir ./Projects/", AppName);
        cmd = combine(cmd, "/Package/Applications");
        system(cmd);
        cmd = "";
        cmd = combine("mkdir ./Projects/", AppName);
        cmd = combine(cmd, "/Package/Applications/");
        cmd = combine(cmd, AppName);
        cmd = combine(cmd, ".app");
        system(cmd);
        cmd = "";
        cmd = combine("mkdir ./Projects/", AppName);
        cmd = combine(cmd, "/Package/Applications/");
        cmd = combine(cmd, AppName);
        cmd = combine(cmd, ".app/Inc");
        system(cmd);
        cmd = "";
        cmd = combine("cp ./Projects/", AppName);
        cmd = combine(cmd, "/Assets/app.icon.png ./Projects/");
        cmd = combine(cmd, AppName);
        cmd = combine(cmd, "/Package/Applications/");
        cmd = combine(cmd, AppName);
        cmd = combine(cmd, ".app/Icon.png");
        system(cmd);
        printf("Building application...");
        cmd = "";
        cmd = combine("cd ./Projects/", AppName);
        system(cmd);
        printf(cmd);
        cmd = "";
        cmd = combine("gcc App.c -o ", AppName);
        printf(cmd);system(cmd);
        system(cmd);
} 
```

但它似乎执行不正常。这是在 Linux（实际上是 cygwin）上运行的，并使用 GCC 编译。出于某种原因，`system();`应该执行 GCC 编译操作的函数在`cd`命令之前执行，给我这个输出：

```
gcc: App.c: No such file or directory
gcc: no input files
Building application...
cd ./Projects/Sample 
```

但是，在`cd`声明之后（我打印出来检查它们执行的顺序），GCC 编译命令没有执行，给我留下一个未编译的 App.c，并且程序执行出错。任何有关为什么会发生这种情况的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T08:43:46.720

你有两个“问题”：

*   您看到的输出来自`stderr`（GCC 错误消息）和`stdout`（其余部分）。您推断这些消息出现在您的终端上的顺序与生成它们的代码运行的顺序相同 - 您不能依赖它。`stdout`通常是缓冲的，而`stderr`通常不是，因此它们出现在屏幕上的顺序并不是代码执行顺序的指标。
*   The `system("cd whatever");` call is a bug. It spawns a new shell, that shell changes directories and... promptly exists. It has no side-effect whatsoever on the parent process or the subsequent `system` calls. You need to use `chdir` in the parent process, or do the `cd` and `gcc` in the same `system` call.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T08:43:45.297

每个`system`命令都作为一个单独的进程执行。您更改了刚刚结束的新流程的工作。它对下一个执行的流程没有影响。

采用`system("cd dir; command");`

# assembly - 汇编 - 字符串指针数组的冒泡排序算法

> ID：10152224
> 
> 赞同：0
> 
> 时间：2012-04-14T08:37:01.677
> 
> 标签：assembly, bubble-sort

我正在尝试为我的程序集类的字符串数组执行冒泡排序操作。字符串存储在字符串指针数组中，经过多次挫折，现在可以正常工作。现在，我面临一个新问题，排序本身......

以前在我的 C++ 课上做过，但是哇，Assembly 本身就是一头野兽。我很混乱。

无论如何，这是我的代码：

```
.586
.MODEL FLAT

INCLUDE io.h            ; header file for input/output

.STACK 4096

.DATA
myStrings       byte    "fabc dui.",0
                byte    "abcdfe.",0
                byte    "efghi.",0
                byte    0

myStrArr        dword   20 DUP (?) ;array that will point to myStrings
strInc          dword   0       

labelPrint      byte    "The output is: ",0
stringOut       dword   ?

.CODE
_MainProc PROC

            mov     edi, offset myStrings
            mov     esi, offset myStrArr 
```

;这个子程序将把字符串转换成双字数组

L1：

```
 cmp     byte ptr [edi], 0
            jz      OL
            mov     dword ptr [esi], edi
            add     esi, 4
            inc     strInc
            xor     ecx, ecx
            not     ecx
            xor     al, al
            repne   scasb
            jmp     L1

            xor     ebx, ebx 
```

;这将在传输完成后运行

```
OL:

            xor     edx, edx
            mov     ebx, offset myStrArr        ;ebx -> myStrArr
            mov     esi, [ebx]                  ;esi -> [ebx] -> myStrArr[i]
            mov     edi, [ebx+4]                ;edi -> [ebx+4] -> myStrArr[i+1]    
            mov     ecx, strInc
            dec     ecx                         

                                                ;PROF'S TIP:  mov ebx, offset myStrArr
                                                ;             mov esi, [ebx]
                                                ;             mov edi, [ebx+4]

IL:
            cmp     edi, esi                    ;compares the first character of the two strings
            jbe                                 ;jumps to NC if there's no change
            mov     dl, 1                       ;set direction flags
            mov     edi, [ebx]                  ;swaps it around
            mov     esi, [ebx+4]                    

NC:

            mov     [ebx], edi                  ;point to next value
            add     esi, 4                      ;point to next value
            loop    IL
            or      dl, dl
            jnz     OL

                                                ;IN CASE OF ME GETTING SOMETHING RIGHT, ERASE COMMENTS
                                                ; mov       ebx, dword ptr [edi]
                                                ; output    labelPrint, dword ptr [ebx]

                                                ; mov       esi, dword ptr [edi]
                                                ; output  labelPrint, dword ptr [esi]
                                                ; add       esi, 4
                                                ; mov       esi, dword ptr [edi]
                                                ; output  labelPrint, dword ptr [esi]   

            mov     eax, 0                      ; exit with return code 0
            ret
_MainProc ENDP

END                                                ; end of source code 
```

似乎我正在使用字符串指针数组进行冒泡排序，但我想我已经超出了我在这里听到的范围。非常感谢有关如何处理的一些指导！

提前感谢大家！

# c# - Graphics.DrawImage 的另一个意外结果

> ID：10152225
> 
> 赞同：1
> 
> 时间：2012-04-14T08:38:07.513
> 
> 标签：c#, gdi+

在以下代码中：

```
void f10(Graphics g)
{
    var img = new Bitmap(1, 1);
    img.SetPixel(0, 0, Color.Black);
    var destRect = pictureBox1.ClientRectangle;
    destRect.Inflate(-5, -5);
    g.DrawRectangle(new Pen(Color.Blue), destRect);
    var srcRect = new RectangleF(-.5f, -.5f, img.Width, img.Height);
    g.InterpolationMode = InterpolationMode.NearestNeighbor;
    g.DrawImage(img, destRect, srcRect, GraphicsUnit.Pixel);
}

private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    f10(e.Graphics);
}

private void pictureBox1_Resize(object sender, EventArgs e)
{
    textBox1.Text = pictureBox1.ClientSize.Width + "x" + pictureBox1.ClientSize.Height;
    pictureBox1.Invalidate();
} 
```

我得到以下结果：

[结果 http://www.uploadup.com/di-XJ2I.png](http://www.uploadup.com/di-XJ2I.png)

该表单包含一个适合整个表单内部内容的图片框和一个显示图片框尺寸的文本框。我希望黑盒子的右侧适合蓝色矩形的整个内部。为什么没有？！

[差距 http://www.uploadup.com/di-YGWL.png](http://www.uploadup.com/di-YGWL.png)

通过更改尺寸值（调整图片框的大小），间隙会发生变化。

* * *

我使用以下代码根据图像宽度值查找错误的偏移量：

```
void f11(Graphics g)
{
    var img = new Bitmap(1, 1);
    img.SetPixel(0, 0, Color.Black);
    var bmp = new Bitmap(10010, 6);
    var destRect = new Rectangle(0, 0, 3, bmp.Height);
    var bmpG = Graphics.FromImage(bmp);
    var srcRect = new RectangleF(-.5f, -.5f, img.Width, img.Height);
    bmpG.InterpolationMode = InterpolationMode.NearestNeighbor;
    g.DrawString("Please Wait...", SystemFonts.DefaultFont, Brushes.Black, 10, 10);
    for (; destRect.Width < bmp.Width; destRect.Width++)
    {
        bmpG.DrawRectangle(new Pen(Color.Blue), new Rectangle(destRect.X, destRect.Y, destRect.Width-1, destRect.Height-1));
        bmpG.DrawImage(img, new Rectangle(destRect.X+1, destRect.Y+1, destRect.Width-2, destRect.Height-2), srcRect, GraphicsUnit.Pixel);
        //g.FillRectangle(new SolidBrush(bmp.GetPixel(destRect.Width-2, 1)), pictureBox1.ClientRectangle);
        int n = 0;
        while (!bmp.GetPixel(destRect.Width - 2 - n, 1).ToArgb().Equals(Color.Black.ToArgb())) n++;
        Console.WriteLine("{0}\t{1}", destRect.Width-2, n);
    }
    g.FillRectangle(new SolidBrush(pictureBox1.BackColor), pictureBox1.ClientRectangle);
    g.DrawString("Done.", SystemFonts.DefaultFont, Brushes.Black, 10, 10);
}

private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    f11(e.Graphics);
} 
```

结果是：

[结果](http://hamidi2.persiangig.com/result.txt)

你能帮我找到解决方法吗？谢谢

# c# - 用于重载运算符 << 和 >> 的自定义字符串实现，用于 c# 中字符串字符的二进制移位

> ID：10152229
> 
> 赞同：0
> 
> 时间：2012-04-14T08:39:08.920
> 
> 标签：c#, string, overloading, operator-keyword

我想知道如何在 c# 中实现 MyString 类并重载运算符`<<`和`>>`. 例如 ：

```
MyString name = "string";

Console.Write(name<<3) // It will print **ingstr** by shifting last 3 to left 
```

我目前的实现如下：

```
public sealed class MyString
{
    private readonly string _value="";

    public MyString(string str)
    {
        _value = str;
    }

    public override string ToString()
    {
        return _value;
    }

    public static implicit operator MyString(string str)
    {
        var myString = new MyString(str);
        return myString;
    }

    public static explicit operator string(MyString myString)
    {
        return myString._value;
    }

    public override bool Equals(Object obj)
    {
        if (obj == null)
        {
            return false;
        }

        var s = obj as MyString;
        if ((object)s == null)
            return false;

        return _value.Equals(obj);
    }

    public bool Equals(MyString str)
    {
        return _value.Equals(str);
    }

    public override int GetHashCode()
    {
        return _value.GetHashCode();
    }

    public static bool operator ==(MyString a, MyString b)
    {
        return a._value.Equals(b.ToString());
    }

    public static bool operator !=(MyString a, MyString b)
    {
        return !(a == b);
    }

    public static MyString operator <<(MyString s, int shift)
    {
        if (shift <= 0)
        {
            return s;
        }

        shift = shift % s._value.Length;
        return s._value.Substring(shift, s._value.Length - shift)
             + s._value.Substring(0, shift);
    }

    public static MyString operator >>(MyString s, int shift)
    {
        if (shift <= 0)
            return s;
        shift = shift%s._value.Length;

        return s._value.Substring(shift, s._value.Length - shift) +             s._value.Substring(0,shift);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:44:53.217

如果我真的需要它，我会写一些类似的东西：

```
public static string operator << (MyString s, int shift)
{
    if(shift <= 0)
    {
        return s;
    }

    shift = shift % s.Length;
    return s.String.Substring(shift, s.Length - shift)
         + s.String.Substring(0, shift);
} 
```

但是，尚不清楚您为什么要将 shift 实现为您自己的类的运算符。仅仅在 String 本身上定义一个[扩展方法怎么样？](http://msdn.microsoft.com/en-us/library/bb383977.aspx)然后，您将能够执行以下操作：

```
string str = "name".ShiftLeft(2); 
```

# python - 在 Tkinter 中将行设置为变量

> ID：10152230
> 
> 赞同：0
> 
> 时间：2012-04-14T08:39:16.277
> 
> 标签：python, grid, tkinter

我无法更新 Tkinter 中的行。

如果我将行设置为常规变量，它不会更新。这显示在第一个脚本中。如果我像处理文本一样将行设置为 IntVar 类型，它会拒绝数据类型。这显示在第二个脚本中。

需要注意的 2 件事：如果您观察脚本 1 中的计数器，它会正常上升，但不会被应用。如果您使用 self.activeRow.get() 而不是 self.activeRow，它将有效地将其转换为正常变量，其结果与脚本 1 中显示的结果相同。

脚本 1

```
from tkinter import *

class Example(Frame):

    def move(self):
        self.activeRow += 1
        print(self.activeRow)

    def __init__(self, parent):
        Frame.__init__(self, parent)   
        self.parent = parent
        self.initUI()

    def initUI(self):

        self.columnconfigure(0, pad=0)      
        self.columnconfigure(1, pad=0)
        self.columnconfigure(2, pad=0) 
        self.rowconfigure(0, pad=0)
        self.rowconfigure(1, pad=0)
        self.rowconfigure(2, pad=0)

        Label(self, text= 'row 0').grid(row=0, column=0)
        Label(self, text= 'row 1').grid(row=1, column=0)
        Label(self, text= 'row 2').grid(row=2, column=0)

        #regular variable
        self.activeRow = 0
        b = Button(self, text="normal variable {0}".format(self.activeRow), command=self.move)
        b.grid(row=self.activeRow, column=1)

        self.pack()

def main():
    root = Tk()
    app = Example(root)
    root.mainloop()  

if __name__ == '__main__':
    main() 
```

脚本 2

```
from tkinter import *

class Example(Frame):

    def move(self):
        self.activeRow.set(self.activeRow.get() + 1)
        print(self.activeRow.get())

    def __init__(self, parent):
        Frame.__init__(self, parent)   
        self.parent = parent
        self.initUI()

    def initUI(self):

        self.columnconfigure(0, pad=0)      
        self.columnconfigure(1, pad=0)
        self.columnconfigure(2, pad=0) 
        self.rowconfigure(0, pad=0)
        self.rowconfigure(1, pad=0)
        self.rowconfigure(2, pad=0)

        Label(self, text= 'row 0').grid(row=0, column=0)
        Label(self, text= 'row 1').grid(row=1, column=0)
        Label(self, text= 'row 2').grid(row=2, column=0)

        #Tkinter IntVar
        self.activeRow = IntVar()
        self.activeRow.set(0)

        b = Button(self, text="IntVar", command=self.move)
        b.grid(row=self.activeRow, column=1)

        self.pack() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T13:06:08.350

如果要移动现有的小部件，则必须再次调用`grid`更新此小部件的方法（即`widget.grid(row=other_value)`）。要删除小部件，您可以使用该`grid_forget()`方法。

```
from Tkinter import *

class Example(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.initUI()

    def move(self):
        info = self.b.grid_info()
        previous_row = int(info["row"]) #int() needed because datas are stored as string
        self.b.grid(row=previous_row+1)

    def initUI(self):
        for i in range(5):
            l = Label(self, text="Row {0}".format(i))
            l.grid(row=i, column=0)

        self.b =  Button(self, text="Moving button", command=self.move)
        self.b.grid(row=0, column=1)

        self.pack()

root = Tk()
app = Example(root)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:36:11.327

您可以使用常规 python 变量或 Tkinter 变量。下面是两个工作示例。

Tkinter 变量类是可以“跟踪”更改的变量（即，您可能会收到值已更改的通知）。它们与具有值（Scale、Entry...）的小部件一起使用，例如检索值或同步两个小部件。

```
def initUI(self):
    #regular variable
    self.activeRow = 0
    for i in range(5):
        b = Button(self, text="normal variable {0}".format(self.activeRow))
        b.grid(row=self.activeRow, column=0)
        self.activeRow += 1

    #Tkinter IntVar
    self.activeRow = IntVar()
    for i in range (5):
        b = Button(self, text="IntVar {0}".format(self.activeRow.get()))
        b.grid(row=self.activeRow.get(), column=1)
        self.activeRow.set(self.activeRow.get() + 1) 
```

# mysql - Rails 控制台、MySQL 和 application.rb 中的时间正确，但时间戳错误

> ID：10152232
> 
> 赞同：2
> 
> 时间：2012-04-14T08:39:28.620
> 
> 标签：mysql, ruby-on-rails, ruby, time

这是我在控制台中的输出：

```
mysql> select CURRENT_TIMESTAMP;
+---------------------+
| CURRENT_TIMESTAMP   |
+---------------------+
| 2012-04-14 16:35:57 |
+---------------------+
1 row in set (0.00 sec)

mysql> exit
Bye
VNMB:qhuen VictorNg$ rails c
Loading development environment (Rails 3.1.1)
1.8.7 :001 > Time.now
 => Sat Apr 14 16:36:28 +0800 2012 
1.8.7 :002 > Time.zone.now
 => Sat, 14 Apr 2012 16:36:31 MYT +08:00 
1.8.7 :003 > 
```

在我`application.rb`的设置中：

```
config.time_zone = 'Kuala Lumpur' 
```

但是当我的 rails 模型被触摸时，该`updated_at`列显示：

```
2012-04-14 08:36:21 
```

我还需要做什么来纠正这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:44:14.237

您可能会误解 Rails 在各个地方使用的时间格式。我过去回答的一个问题可能会有所帮助：

[为什么`config.time_zone`似乎没有做任何事情？](https://stackoverflow.com/questions/5073917/why-doesnt-config-time-zone-seem-to-do-anything/5074193#5074193)

如果您希望在实际数据库记录中使用本地时区，您可以在 application.rb 中设置 config.active_record.default_timezone = :local（假设 Rails3）

# android - 动态增加列表视图中的元素数量

> ID：10152236
> 
> 赞同：3
> 
> 时间：2012-04-14T08:40:36.593
> 
> 标签：android, android-listview, dynamic-data

我想增加列表视图滚动到末尾时动态显示的项目数。就我而言，我的列表视图最初将显示 10 个项目。然后当我们滚动到最后一个项目时，它必须开始显示另外 10 个项目，依此类推。我怎样才能做到这一点？？

这是我的自定义数组适配器

```
 package com.android.listview;

import java.util.ArrayList;

import com.android.listview.R;
import com.android.listview.Product;

import android.widget.ArrayAdapter;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;
import com.android.listview.ListViewActivity;

public class CustomArrayAdapter extends ArrayAdapter<Product> implements
        OnScrollListener {

    private final Context context;
    private final ArrayList<Product> values;

    static class ViewHolder {
        public TextView text;
        public ImageView image;
    }

    public CustomArrayAdapter(Context arg0, int arg1, int arg2,
            ArrayList<Product> arg3) {
        super(arg0, arg1, arg2, arg3);
        this.context = arg0;
        this.values = arg3;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int product_id = 0;
        View rowView = inflater.inflate(R.layout.feed_items, parent, false);
        try {

            ImageView wic_logo = (ImageView) rowView.findViewById(R.id.logo);
            TextView label = (TextView) rowView.findViewById(R.id.label);

            Product p = values.get(position);
            product_id = p.productId;
            String date = new java.text.SimpleDateFormat("dd/MM/yy")
                    .format(new java.util.Date(p.timeStamp));
            label.setText(p.productName + "\n" + p.reportedPrice + "   MRP: "
                    + p.mrp + "\n" + "Discount: " + p.discount + "%   "
                    + p.area + "  " + p.city + "\n" + "Shared by " + p.userName
                    + " " + "on" + " " + date);

            wic_logo.setImageResource(R.drawable.wic_logo_small);
            Log.d("date", "" + date);

            Log.d("Custom Array Adapter", "at" + position);
        } catch (Exception e) {
            Log.d("Custom Array Adapter", "catch");
        }

        return rowView;
    }

    public void onScroll(AbsListView arg0, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        Log.d("entered onScroll", " " + firstVisibleItem + visibleItemCount
                + totalItemCount);
        if (((firstVisibleItem + visibleItemCount) >= totalItemCount - 1)) {
            Log.d("entered if", " " + firstVisibleItem + visibleItemCount
                    + totalItemCount);
            // if we're at the bottom of the listview, load more data
            addData(totalItemCount, values.get(totalItemCount).productId);
        }
    }

    private void addData(int totalItemCount, int productId) {

        Toast.makeText(getContext(), "last item", Toast.LENGTH_SHORT).show();
    }

    public void onScrollStateChanged(AbsListView arg0, int arg1) {

    }
} 
```

这是我的活动

```
package com.android.listview;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.android.listview.CustomArrayAdapter;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.Button;
import android.widget.ListView;

public class ListViewActivity extends Activity {

    static Product[] feed_products_list;
    private JSONArray JArray;
    private InputStream is;
    private StringBuilder sb;
    private String result;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button feed_button = (Button) findViewById(R.id.feedButton_feed);
        feed_button.setBackgroundResource(R.color.grey);
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://10.0.2.2/wic2/mobile/feed");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                sb = new StringBuilder();
                sb.append(reader.readLine() + "\n");
                String line = "0";
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
                Log.d("result", result);
            } catch (Exception e) {
                Log.e("error", "Error in http connection" + e.toString());
            }

            Log.e("response", "response is:" + response.toString());
        } catch (Exception e) {
            Log.e("error", "Error in http connection" + e.toString());
        }

        ListView tv = (ListView) findViewById(R.id.feedListView);
        try {
            Log.d("JArray", "entered try");
            JArray = new JSONArray(result);
            int length = JArray.length();
            feed_products_list = new Product[length+1];
            Log.d("JArray", "try last line");
        } catch (JSONException e) {
            Log.d("JArray", "in catch");
            e.printStackTrace();
        }

        JSONObject jsonObj;

        for (int i = 0; i < JArray.length(); i++) {
            try {
                Log.d("jsonObj", "entered try");
                jsonObj = JArray.getJSONObject(i);
            } catch (Exception e) {
                Log.d("jsonObj", "in catch");
                continue;
            }

            try {
                Log.d("feed_products_list", "entered try");
                feed_products_list[i] = new Product(jsonObj.getInt("id"),
                        jsonObj.getString("image"),
                        jsonObj.getString("product_name"),
                        jsonObj.getString("reported_price_formated"),
                        jsonObj.getString("store_area"),
                        jsonObj.getString("store_city"),
                        jsonObj.getString("mrp"),
                        jsonObj.getString("user_name"),
                        jsonObj.getLong("reported_timestamp"),
                        jsonObj.getInt("discount"));
                Log.d("feed_products_list", feed_products_list[i].productName);
            } catch (JSONException e) {
                Log.d("feed_products_list in catch",
                        feed_products_list[i].productName);
                e.printStackTrace();
            }
        }

        tv.setAdapter(new CustomArrayAdapter(this, R.layout.feed_items,
                R.id.label, feed_products_list));

    }
} 
```

还有一个问题是我必须用 JArray 中的项目数来初始化我的数组 feed_products_list[length]。所以每次滚动到最后一项并重新填充整个列表时，我都无法更改数组大小

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:11:51.287

首先，您的代码存在一些问题。在您的`Activity`，将您的变量更改`values`为 an`ArrayList<Product>`因为您无法在创建后操纵数组的长度。接下来，将 JArray 重命名为 jArray；如果第一个字母是大写字母，则表明您正在处理的是类而不是变量。

此外，您没有使用 ViewHolder 模式，这大大提高了性能。查看[vogella.com 上有关 ListView 的链接](http://www.vogella.com/articles/AndroidListView/article.html)；更具体地说，*请查看第 3.1 和 3.2 章*。

在`CustomArrayAdapter`中，实现`OnScrollListener`并添加所需的方法。然后，在 中`onScroll(...)`，确定是否要添加数据（例如，用户到达列表底部）。最后，加载新项目，将它们添加到您的数据集中，`values.add(product)`其中`values.addAll(products)`products 是`List`s`Product`的 a ，并在每次调用or后`notifyDataSetChanged`从您的内部调用。`CustomArrayAdapter``values.add(...)``values.addAll(...)`

例如，您可以在代码中更改以下内容：

在您的**活动**中：

*   删除线条

    ```
    int length = JArray.length();
    feed_products_list = new Product[length+1]; 
    ```

*   从您的中删除“静态”`feed_products_list`并将其更改为 ArrayList：

    ```
    private ArrayList<Product> feed_products_list = new ArrayList<Product>(); 
    ```

*   而不是`feed_products_list[i] = new Product(jsonObj.getInt("id"), .... yadiya ...`调用 feed_products_list.add(new Product(jsonObj.getInt("id"), ... yadiya ...`。

在您的**适配器**中：

*   创建class `implement OnScrollListener`，并将`onScroll()`-method 设置为如下所示：

    ```
    public void onScroll(AbsListView view, int firstVisibleItem,
                            int visibleItemCount, final int totalItemCount) {
        if(((firstVisibleItem + visibleItemCount) >= totalItemCount)) {

            // if we're at the bottom of the listview, load more data
            addData(totalItemCount);
        }
    } 
    ```

*   创建一个方法`addData(long offset)`：

    ```
    private void addData(long offset) {

        // download your data, pass the offset so you know where to start
        // and when you convert your json into `Product`s
        Product product = new Product(JSONObject.getInt("id"), ... yadiya ...);
        this.add(product);
        this.notifyDataSetChanged();

        // make sure to call notifyDataSetChanged() on your UI-Thread.
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T08:51:12.997

对于动态增加大小，最好使用 ArrayList。对于滚动，您可以使用 @Mayank 想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T08:45:59.150

你应该`scroll listener`在你的`listview`

```
ListView lv = (ListView)findViewById(R.id.list_view); 
lv.setOnScrollListener(new OnScrollListener() { 
    @Override 
    public void onScroll(AbsListView view, int firstVisibleItem,  
        int visibleItemCount, int totalItemCount) { 
        //Check if the last view is visible 
        if (view.getLastVisiblePosition()+1 == 10) { 
            //load more content 
        } 
    } 
}); 
```

**更新**

因此，最初在您的项目中`feed_products_list`，您将有 10 个项目，当用户向下滚动时，向列表中添加 10 个项目并将其重置`CustomArrayAdapter`为`listView`. 继续这样做，直到您拥有列表中的所有项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T08:50:50.250

您不需要这样做。Android 列表视图可以轻松处理数千个条目——前提是您仔细编写适配器并重用视图。因此，在您的 getView() 方法中，您必须检查是否提供了 converView 并且是否正确，然后使用新值填充它。（Andriod 非常聪明，它提供回收现在不可见的列表条目） - 这将立即提升性能

像这样做：

```
View rowView = convertView;
if(rowView == null) {
   // do what you are doing now to inflate view
}
// do what you are doing now to set up view

return rowView; 
```

如果您不想立即从任何存储中加载所有条目，则增加列表的大小是有意义的——在这种情况下，您必须注册滚动侦听器并通过加载丢失的条目来对其做出反应，然后发出列表数据已更改的信号。而且您不必使用数组作为后备存储 - 列表将完美匹配此目的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T09:00:20.777

使用 ArrayList 而不是这样的数组

```
public class CustomArrayAdapter extends ArrayAdapter<Object> {

    private final Context context;
    private final ArrayList<Product> values; 
```

在你的`getView()`

```
 Product p = values.get(position); 
```

您可以在适配器内部提供一个方法来向 ArrayList 添加元素，`notifyDataSetChange()`它看起来像这样

```
public void addElement(Product p){
values.add(p);
notifiyDataSetChange();
} 
```

使用`OnScrollListener`加载更多数据示例：

```
listView.setOnScrollListener(new OnScrollListener() { 
    @Override 
    public void onScroll(AbsListView view, int firstVisibleItem,  
        int visibleItemCount, int totalItemCount) { 

        if (totalItemCount - visibleItemCount <= firstVisibeItem + 5) { 
            //load more content 

            .....
            adpater.addElement(p);

        } 

     } 
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T09:09:05.967

我认为您想要像[Lazy loading 之](https://github.com/desertjim/LazyLoadingGridView)类的东西。

它被称为延迟加载。我相信你还没有尝试过这样的搜索。我给了你GridView的例子。这是 Listview 的[其他链接 Other Link](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

# c++ - 使用 Visual Studio C++ 创建和测试应用程序时记录应用程序的活动

> ID：10152237
> 
> 赞同：0
> 
> 时间：2012-04-14T08:40:46.357
> 
> 标签：c++, visual-studio, visual-studio-2010, logging

我使用 Visual Studio C++ 2010 阅读源代码，理解并修改它。我发现如果在应用程序“编译并运行”之后有一个日志文件会非常有帮助。日志文件必须记录以下内容：哪个函数被执行（按顺序），“if”语句是真还是假（最好能列出其所有组件的真假）。Visual Studio 中是否有这样的功能或插件来做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:48:34.820

好吧，您要求的是完整的运行时代码流和语义分析。据我所知，没有工具可以做到这一点。可以使用静态代码分析工具，但这不是您想要的。IntelliTrace 不是一个选项，因为它不支持 C++。代码覆盖率工具可能会部分帮助您。但目前分析代码流的最好方法是设置断点和分析调用堆栈。想象一下，对于您想要为多个线程构建正确日志（可能是流程图？）的工具来说，这将是多么困难。

# asp.net - 在 ASPX 中附加隐藏类型的输入标签？

> ID：10152240
> 
> 赞同：0
> 
> 时间：2012-04-14T08:40:57.017
> 
> 标签：asp.net

我想`input`在我的 HTML 页面中有一个隐藏标签，所以我尝试了以下方法：

`<input type=hidden runat=server id=currentItem value="runtime_determinted" />`

但它不会显示在客户端上，所以我无法用 javascript 找到它。

如果标签不在服务器端运行，我将不得不将它附加到文档的末尾，但我应该使用哪个函数？

还是有其他合适的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:43:39.620

为什么你不能用这个，你也可以用javascript找到它

```
<asp:HiddenField id="currentItem" runat="server" /> 
```

进而

```
var text = $('#<%= currentItem.ClientID %>').val(); 
```

# iphone - 检测 ASIHTTPReuquest 是否正在工作

> ID：10152241
> 
> 赞同：0
> 
> 时间：2012-04-14T08:41:24.503
> 
> 标签：iphone

我希望检测 ASIHTTPRequest 是否正常工作，因此我可以取消 ASIHttp 的异步请求。

有没有办法检测 ASIHTTPReuquest 请求是否有效？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:45:38.927

使用下面的代码它肯定会工作：

```
NSURL *url = [NSURL URLWithString:@"Your Url"];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

[request setRequestMethod:@"POST"];

[request setPostValue:[NSString stringWithFormat:@"%i",catId] forKey:@"categoryid"];

[request setDelegate:self];

[request startAsynchronous]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:50:11.770

您可以使用该代码取消所有正在运行的异步请求：

```
 for (ASIHTTPRequest *request in ASIHTTPRequest.sharedQueue.operations)
{
    [request cancel];
    [request setDelegate:nil];
} 
```

# java - 在 Java 中使用 SQL 身份验证登录

> ID：10152242
> 
> 赞同：0
> 
> 时间：2012-04-14T08:41:28.790
> 
> 标签：java

我正在尝试使用 Java 构建登录 UI。但是我的SQL认证有问题

这是代码：

```
 public void actionPerformed(ActionEvent e){
            if (e.getSource() == Login)

                    try {
                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                Connection con=DriverManager.getConnection("jdbc:odbc:MessageStore","sa","12345"); 
                Statement cmd=con.createStatement(); 
                ResultSet rs=cmd.executeQuery("select * from UserList where UserName='"+nameText.getText());
    } 
```

但是有一个带有“rs”的警告：未使用局部变量rs的值

如何解决这个问题呢？

还是有更直接的代码来实现 SQL 身份验证？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T12:32:13.363

在“未使用变量 X 的值”的大多数情况下，您可以选择忽略该消息或删除对它的赋值。在这些情况下，您对价值不做任何事情。

但是，在这种情况下，您只对数据库执行查询，而不会对结果执行任何操作。因此，您不知道您要验证的用户是否确实是有效用户。

因此，您必须使用变量“rs”来检查是否确实有结果并允许用户登录。

```
public void actionPerformed(ActionEvent e){
  if (e.getSource() == Login){
    try {
      Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); // may not be needed since JDBC4
      Connection con=DriverManager.getConnection("jdbc:odbc:MessageStore","sa","12345"); 
      PrePareStatement cmd=con.prepareStatement("select * from UserList where username=?"); // safer, protect against 
      cmd.setString(1,nameText.getText());
      ResultSet rs=cmd.executeQuery();
      if( rs.next() ){
        // username does exist, now check the password
      }else{
        // username does not exist
      }
    }catch(Exception e){}
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:48:32.390

将 ResultSet 设为全局变量。

```
public void actionPerformed(ActionEvent ae) {
if (ae.getSource() != null) {
String connectionUrl = "jdbc:sqlserver://localhost:1420;" + "databaseName=TestsampleDB1;";
Connection con = null;
Statement stmt = null;
ResultSet rs = null;
try {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    System.out.println("Driver okay");
    con = (Connection) DriverManager.getConnection("jdbc:odbc:MessageStore", "sa", "12345");
    System.out.println("Connection Made");
    PreparedStatement cmd = con.prepareStatement("select * from UserList where username=?");

    if (rs.next()) {
        // login user exist
    } else {
    // user doesn't exist}
    }
} catch (Exception e) {
    e.printStackTrace();
  } 
```

} }

# php - 使用 php javascript ajax 的多个单选按钮

> ID：10152245
> 
> 赞同：0
> 
> 时间：2012-04-14T08:42:09.273
> 
> 标签：php, html, radio-button

我正在制作一个带有多个单选按钮的调查表。问题在数据库中，我选择问题并将选项显示为单选按钮

```
<div id="question">
    <form id="pollform">;
<?php
    $i=0;
    while(list($ID,$Question,$form,$one,$two,$three,$four,$five)=mysql_fetch_array($result)){
        $i++; 
?>
        <p><?php echo $ID.") ".$Question; ?></p>
        <input type="radio" name="radio<?php echo $i;?>" value="1" /> <?php echo $one; ?><br />
        <input type="radio" name="radio<?php echo $i;?>" value="2" /> <?php echo $two; ?><br />
        <input type="radio" name="radio<?php echo $i;?>" value="3" /> <?php echo $three; ?><br />
        <input type="radio" name="radio<?php echo $i;?>" value="4" /> <?php echo $four; ?><br />
        <input type="radio" name="radio<?php echo $i;?>" value="5" /> <?php echo $five; ?><br />
<?php 
    } 
?>
    <input type="button" id="review-submit" value="Submit" onclick="pollsubmit();">
    <form>
</div> 
```

为了处理这个并使用 Ajax 发送选定的答案，我使用了以下代码

```
<script language=Javascript>
function pollsubmit(){
<?php
    $dbquerry="SELECT `ID`, `Question`, `Form`, `one`, `two`,`three`,`four`,`five` FROM `pollquestions` Order by `ID`";
    $result=mysql_db_query($dbname,$dbquerry);
?>
    var answers = new Array();
    var form1=document.getElementById("pollform");
<?php
    $count=0;
    while(list($ID,$Question,$form,$one,$two,$three,$four,$five)=mysql_fetch_array($result)){
        $count++;
?>
        for (var i=1;i<=5;i++) {
            if(form1.radio<?php echo $count;?>[i].checked) {
                answers[<?echo $ID;?>]= form1.radio<?php echo $count;?>.value;
            }
        }
<?php 
    }
?>
}
</script> 
```

但这让我`Cannot read property 'checked' of undefined`在这两个地方都有一个名字是radio1。而如果我只使用字符串，例如`name="radio1"`它正在工作，但如果我使用`name="radio<?php echo $i;?>"`它则不起作用。你能帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:45:49.120

javascript for 循环应该从 0 开始。对于这个值，你需要一个 [i]。

```
for (var i=0;i<5;i++) {
    if(form1.radio<?php echo $count;?>[i].checked) {
        answers[<?echo $ID;?>]= form1.radio<?php echo $count;?>.value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:24:18.367

```
<script language=Javascript>
function pollsubmit(){
<?php
    $dbquerry="SELECT `ID`, `Question`, `Form`, `one`, `two`,`three`,`four`,`five` FROM `pollquestions` Order by `ID`";
    $result=mysql_db_query($dbname,$dbquerry);
?>
    var answers = new Array();
    var form1=document.getElementById("pollform");
<?php
    $count=0;
    while(list($ID,$Question,$form,$one,$two,$three,$four,$five)=mysql_fetch_array($result)){
        $count++;
?>
        for (var i=1;i<=5;i++) {
            if(form1.['radio<?php echo $count;?>'][i].checked) {
                answers[<?echo $ID;?>]= form1.['radio<?php echo $count;?>'].value;
            }
        }
<?php 
    }
?>
}
</script> 
```

编辑：

```
for (var i=1;i<=5;i++) {
                if(form1.['radio<?php echo $count;?>'][i].checked) {
                    answers[<?echo $ID;?>]= form1.['radio<?php echo $count;?>'].value;
                }
            } 
```

# visual-studio-2010 - 在 Visual Studio 中创建自定义项目类型？

> ID：10152250
> 
> 赞同：3
> 
> 时间：2012-04-14T08:43:22.613
> 
> 标签：visual-studio-2010

Visual Studio 中有许多标准项目类型（文件->新建->项目）。

如何创建**自定义项目类型**并安装它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:49:22.037

MSDN上的这篇文章有你需要的信息：http: [//msdn.microsoft.com/en-us/library/6db0hwky.aspx](http://msdn.microsoft.com/en-us/library/6db0hwky.aspx)

可以使用此工具创建多项目模板以提供帮助：http: [//vsix.codeplex.com/](http://vsix.codeplex.com/)

# android - Android Emulator - Intent.createChooser 在为 pdf 类型文档打开它时说“没有应用程序可以执行此操作”

> ID：10152252
> 
> 赞同：2
> 
> 时间：2012-04-14T08:43:31.393
> 
> 标签：android, pdf, android-intent, android-emulator

我需要让**用户从设备内部/外部存储器中选择一个 pdf 文档**，下面是我正在使用的代码。**它适用于真实设备，但不适用于 Emulator**。**我已经在模拟器上安装了 Pdf Viewer。**

它不会引发错误，但会显示消息框窗口，上面写着**“没有应用程序可以执行此操作”**

```
 Intent intent = new Intent();
     intent.setType("pdf/*");
     //intent.setType("application/pdf");
     intent.setAction(Intent.ACTION_GET_CONTENT);

     try {
         Intent pdfIntent = Intent.createChooser(intent, "Select pdf");
         startActivityForResult(pdfIntent, SELECT_PDF_DIALOG);
 } 
 catch (ActivityNotFoundException e) {
     CommonMethods.ShowMessageBox(this, "No Application Available to View PDF.");
 }
 catch(Exception e)
 {
     CommonMethods.ShowMessageBox(this, e.toString());
 } 
```

我需要此代码才能在模拟器上工作，因为我无法检查/测试我的应用程序的全部功能。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T08:47:12.890

这是因为 Android 不提供任何内置功能来读取`.pdf`扩展。因此，您必须安装任何第三方阅读应用程序`.pdf`（任何 PDF 查看器）才能使其正常工作。

好的，那就试试这个，

将您的 PDF 文件保存在 SDCard 中并尝试使用这些东西执行它，

```
 File file = new File("/sdcard/Android.pdf");

            if (file.exists()) {
                Uri path = Uri.fromFile(file);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(path, "application/pdf");
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                try {
                    startActivity(intent);
                } 
                catch (ActivityNotFoundException e) {
                    Toast.makeText(YourActivity.this, 
                        "No Application Available to View PDF", 
                        Toast.LENGTH_SHORT).show();
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T08:44:51.413

您需要在您的设备或模拟器上安装一些 pdf 查看器才能完成这项工作。

# c++ - 如何在遵守得墨忒耳定律的同时延迟加载？

> ID：10152265
> 
> 赞同：4
> 
> 时间：2012-04-14T08:45:19.120
> 
> 标签：c++, law-of-demeter

我愿意遵守得墨忒耳法则。但我也想延迟加载一些传递给构造函数的对象。我应该如何实施？传递一个包装类？传递函数指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T16:24:52.130

您实际上可以编写一个通用包装器来完成此操作：

```
template <typename T>
class Lazy {
public:
  explicit Lazy(T const& t): _loader(), _item(t) {}
  explicit Lazy(T&& t): _loader() _item(t) {}
  explicit Lazy(std::function<T()> l): _loader(l), _item() {}

  T& operator*() { return this->get(); }
  T const& operator*() const { return this->get(); }

  T* operator->() { return &this->get(); }
  T const* operator->() const { return &this->get(); }

private:
  T& get() { if (not _item) { _item = _loader(); } return *_item; }
  T const& get() const { if (not _item) { _item = _loader(); } return *_item; }

  std::function<T()> _loader;
  mutable boost::optional<T> _item;
}; // class Lazy 
```

此类保证加载器执行一次，只要它完成。如果它没有完成，那么将在下一次访问时重试执行。它不是线程安全的。

用法：

```
// Output prime numbers as text
bool isPrime(int);
std::string toEnglish(int);

void print(int i, Lazy<std::string> const& heavy) {
    if (not isPrime(i)) { return; }

    std::cout << *heavy << "\n";
}

int main(int argc, char* argv[]) {
    if (argc < 2) { return 1; }

    int max = atoi(argv[1]);
    for (int i = 2; i <= max; ++i) {
        print(i, [=](){ return toEnglish(i); });
              // ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~ C++11 lambda syntax
    }
} 
```

在这里，`toEnglish`仅对素数调用。

# java - 将监听器添加到 SpanElement

> ID：10152272
> 
> 赞同：1
> 
> 时间：2012-04-14T08:46:25.400
> 
> 标签：java, gwt

我想将鼠标悬停在侦听器上添加到我创建的 SpanElement：

```
SpanElement span = Document.get().createSpanElement();
span.setInnerText("my text"); 
```

我在谷歌中找到了如何使用标签包装器，但我想在没有任何包装器的情况下做到这一点。是否可以？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T12:34:42.270

没有 JSNI 也是可能的。

所以用你的元素：

```
SpanElement span = Document.get().createSpanElement();
span.setInnerText("my text"); 
```

将事件侦听器直接添加到元素：

```
Event.sinkEvents(span, Event.ONCLICK);
Event.setEventListener(span, new EventListener() {

    @Override
    public void onBrowserEvent(Event event) {
        if(Event.ONCLICK == event.getTypeInt()) {
            //do your on click action
        }
    }
}); 
```

...而且它看起来真的很难看；）正如您所注意到的 - 事件侦听器对于该元素构想的所有 dom 事件都是“通用的”。因此，为了确保您处理正确的事件，您应该在接收多个事件类型时检查事件类型（这次是开销——因为我们只接收了 CLICK 事件的位）。至于下沉 -> 这会初始化元素以参与 gwt 全局 dom 事件调度系统 - 事件被全局处理以减少闭包的数量，从而最大限度地减少旧 IE 浏览器中的内存泄漏。在另一件事上。您只能为每个元素设置一个事件侦听器 - 如果您设置一个新事件侦听器，它会覆盖前一个事件侦听器。因此，我假设稍后您想将 MOUSEOVER 侦听器添加到您的跨度中，而不是清除所有已添加的 CLICK 侦听器，您可能会执行以下操作：

```
//add mouseover event bit to existing sunk event bits
Event.sinkEvents(span, Event.getEventsSunk(span) | Event.ONMOUSEOVER);
final EventListener oldListener = Event.getEventListener(span);
Event.setEventListener(span, new EventListener() {

    @Override
    public void onBrowserEvent(Event event) {

        if(Event.ONMOUSEOVER == event.getTypeInt()) {
            //your mouseover action
        }

        if(oldListener != null) {
            oldListener.onBrowserEvent(event);
        }
    }
}); 
```

或一次添加更多事件：

```
//add mouseover event bit to existing sunk event bits
Event.sinkEvents(span, Event.ONCLICK | Event.ONMOUSEOVER | Event.ONMOUSEOUT);
Event.setEventListener(span, new EventListener() {

    @Override
    public void onBrowserEvent(Event event) {

        switch(event.getTypeInt()) {
            case Event.ONCLICK:
                break;
            case Event.ONMOUSEOVER:
                break;
            case Event.ONMOUSEOUT:
                break;
        }
    }
}); 
```

所以在说完你可能会使用一个标签小部件来包装你的跨度之后;)

```
Label.wrap(span).addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {
        //do your on click action
    }
}); 
```

最后一件事，即使你想做 DOM 编程，也不要害怕小部件——将它们视为类似于 jquery 节点包装器对象的东西。它们并不重，但提供了很大的力量。您还可以将小部件直接包装在现有的 DOM 元素上，而无需将它们附加到“面板基础结构”。

# ruby - ruby：`read'：File.read 处的参数无效 -(Errno::EINVAL)

> ID：10152273
> 
> 赞同：5
> 
> 时间：2012-04-14T08:46:34.347
> 
> 标签：ruby, directory, crc, crc32

我正在做一个简单的脚本来检查所有文件的 crc ...

```
require "zlib"
exit if Object.const_defined?(:Ocra)

files = Dir.glob("*")

File.open('dir.txt', 'a+') do |file|  
 file.puts files
end

File.read('dir.txt').each_line { |line|
    file = File.read(line) ; nil
    file_crc = Zlib.crc32(file,0).to_s(16)
    puts line, file_crc
} 
```

问题在于`File.read('dir.txt').each_line { |line|` 我收到此错误：

```
test.rb:13:in `read': Invalid argument - 1.exe (Errno::EINVAL)
        from C:/Users/Administrador/Desktop/1.rb:13:in `block in <main>'
        from C:/Users/Administrador/Desktop/1.rb:12:in `each_line'
        from C:/Users/Administrador/Desktop/1.rb:12:in `<main>' 
```

PD：`1.exe`是“dir.txt”中列出的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T08:50:34.067

您是否检查过该行不包含多余的字符？`p line`.

IIRC`line`将包含换行符，使用`line.chomp`.

# jquery - jQuery事件实时点击不起作用

> ID：10152275
> 
> 赞同：1
> 
> 时间：2012-04-14T08:47:08.103
> 
> 标签：jquery

我有一个允许使用 Bing API 显示搜索结果的脚本，例如：[JsFiddle](http://jsfiddle.net/aHCT5/30/)

如果你输入一些东西，你会得到两个结果。var`WebOffset`允许结果在 Total 结果中向上移动。例如，如果计数为 2（现在这样），通过设置`WebOffset=10`您将在前 10 个之后得到两个结果，因此结果为 11 和 12。有了这个，您可以像这样进行分页：

```
$("li.pageli").live('click', function(){

WebOffset = "Web.Offset=" + $("a", this).html();

var v6 = $('#searchbox').val();
doSearch(v6); 

}); 
```

所以根据`li.pageli a`我可以做分页的数量。一切正常，然后我注意到它在 IE8 中不起作用。

所以我要问这个问题。但是，当我在 JsFiddle 中设置示例时，我注意到它也在那里工作！这真的很奇怪，因为完全相同的代码在我的桌面上使用 Chrome/Firefox 为我工作。那么为什么它在 IE8 和 JsFiddle 中不起作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:50:51.813

我发现问题是什么...

显然 'href' 应该写成不带空格的......所以这是错误的：

```
<a href="#"> 20 </a> 
```

这很好：

```
<a href="#">20</a> 
```

我们都知道 IE 应该在树林里被拿出来枪毙，但我觉得奇怪的是 JsFiddle 也是这样连接的。无论如何，案件已结束：）

# android - 为安卓和iPhone开发跨平台游戏？

> ID：10152280
> 
> 赞同：-2
> 
> 时间：2012-04-14T08:48:46.750
> 
> 标签：android, iphone

我知道以前有人问过这个问题，但我真的找不到任何适合我需要的东西。所以我想开发一款类似于 Draw Something 的 2d 游戏。游戏在图形或类似的东西上并不是很重，所以我的游戏最好的开发环境是什么谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:01:42.990

使用 Cocos2D 进行游戏开发。从这里阅读......

[游戏教程1](http://code.google.com/p/cocos2d-iphone/)

[游戏教程 2](http://dev.lethain.com/notes-on-cocos2d-iphone-development/)

[游戏教程 3](http://iphonesdkdev.blogspot.com/2009/01/xcode-template-for-cocos2d.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:04:37.420

你应该从[cocos2d-x](http://www.cocos2d-x.org/projects/cocos2d-x/wiki)开始，这将帮助你为 android 和 iOS 编写跨平台的 2-D 游戏

# .net - Task.Factory 的并行代码比线性代码慢

> ID：10152281
> 
> 赞同：1
> 
> 时间：2012-04-14T08:48:59.737
> 
> 标签：.net, f#, parallel-processing

我正在玩并行编程和 F#。我创建了一个集成 1 变量函数的函数，然后我尝试以两种不同的方式使其并行：

```
module Quadrature = 

    let Integrate (f: double -> double) (x1: double) (x2: double) (samples: int64) =
        let step = (x2 - x1) / (double samples)
        let samplePoints = seq {x1 + step .. step .. x2 - step}
        let sum = samplePoints |> Seq.map (fun x -> f x) |> Seq.sum
        let sum = sum + ((f x1) + (f x2)) / 2.0
        step * sum

    let IntegrateWithStep (f: double -> double) (x1: double) (x2: double) (step: double) =
        let samples = (x2 - x1) / step |> round |> int64
        Integrate f x1 x2 samples

    let IntegrateWithTasks (f: double -> double) (x1: double) (x2: double) (samples: int64) (tasks: int) =
        let step = (x2 - x1) / (double samples)
        let samplesPerTask = ceil <| (double samples) / (double tasks)
        let interval = step * samplesPerTask
        let intervals = 
            seq { 
                for i in 0 .. (tasks - 1) do
                    let lowerBound = x1 + (double i) * interval
                    let upperBound = min (lowerBound + interval) x2  
                    yield (lowerBound, upperBound)
                }
        let tasks = intervals 
                    |> Seq.map (fun (a, b) -> Task.Factory.StartNew(fun () -> IntegrateWithStep f a b step))
        tasks |> Seq.map (fun t -> t.Result) |> Seq.sum

    let IntegrateParallel (f: double -> double) (x1: double) (x2: double) (samples: int64) (tasks: int) =
        let step = (x2 - x1) / (double samples)
        let samplesPerTask = ceil <| (double samples) / (double tasks)
        let interval = step * samplesPerTask
        let intervals = 
               [| for i in 0 .. (tasks - 1) do
                    let lowerBound = x1 + (double i) * interval
                    let upperBound = min (lowerBound + interval) x2  
                    yield (lowerBound, upperBound) |]
        intervals |> Array.Parallel.map (fun (a, b) -> IntegrateWithStep f a b step)
                  |> Array.sum 
```

我在具有 4 个内核的机器上使用以下输入运行此代码：

```
let f = (fun x -> - 1.0 + 2.0 * x - 3.0 * x * x + 4.0 * x * x * x ) 
let x1, x2 = 0.0, 1.0
let samples = 100000000L
let tasks = 100 
```

但是，使用任务工厂的方法总是比线性方法稍慢，而使用 Parallel.map 的方法给了我很好的加速。

我曾尝试将任务数量从数千变为核心数量，但使用 Task.Factory 的实现总是比线性的慢。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:54:03.423

请记住，序列是延迟加载的。这是第一次开始任务：

```
tasks |> Seq.map (fun t -> t.Result) |> Seq.sum 
```

而且您按顺序启动它们并阻止每个它们的结果（调用时`t.Result`。您需要将任务列表保存为数组，然后`.WaitAll`在收集结果之前调用以确保它们都并行启动。

尝试：

```
let tasks = intervals 
            |> Seq.map (fun (a, b) -> Task.Factory.StartNew(fun () -> IntegrateWithStep f a b step))
            |> Array.ofSeq

tasks.WaitAll() 
```

# php - php simplexml 查找特定字段的值

> ID：10152282
> 
> 赞同：1
> 
> 时间：2012-04-14T08:49:15.417
> 
> 标签：php, simplexml

XML，我有：

```
<?xml version="1.0" encoding="windows-1252" ?> 
    - <Tables>
        - <Table name="I_BOOKING">
            - <Row action="UPDATE" success="Y">
              <Field name="AUTOBOOK">888800</Field> 
              <Field name="TOUROP">01</Field> 
              <Field name="REFERENCE">GSDFFD</Field> 
              <Field name="NBPAX">2</Field> 
              <Field name="NBINF">1</Field> 
              </Row>
      </Table>
      - <Table name="I_EXCDATERESA">
          - <Row action="UPDATE" success="Y">
               <Field name="EXCURS">KNO</Field> 
               <Field name="DATE">2012-04-12</Field> 
               <Field name="BOOKNR">125445</Field> 
               <Field name="NAME">TEST 12/4</Field> 
               <Field name="PICKUPTIME">00:00:00</Field> 
           </Row>
         - <Row action="UPDATE" success="Y">
               <Field name="EXCURS">KNO</Field> 
               <Field name="DATE">2012-04-13</Field> 
               <Field name="BOOKNR">14574575</Field> 
               <Field name="NAME">TEST 13/4</Field> 
               <Field name="PICKUPTIME">00:00:00</Field> 
          </Row>
       </Table>
    </Tables> 
```

当我处理 table`I_EXCDATERESA`时，我需要获取 Field 的值`BOOKNR`，所以`125445`或者`14574575`在这个例子中，根据我正在处理的行并将其加载`$autobook`：

```
...

$simplexml = simplexml_import_dom($dom);

foreach ($simplexml->Table as $value)
{
    $tableName = $value->attributes()->name;
    foreach ($value->Row as $value)
    {
        if ($tableName == 'I_EXCDATERESA')
        {
            if ($value->Field->attributes()->name == 'BOOKNR')
            {
            $autoBook = $value->Field; 
```

这不起作用，`$autobook`未加载，因为它不在第一个“字段”上，而是在第三个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:26:36.177

这是 XPath 的一个很好的用例：

```
$search = $simplexml->xpath('/Tables/Table[name="I_EXCDATERESA"]/Row/Field[name="BOOKNR"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:51:24.803

有几种方法可以解决这种情况

1.  使用[DOM](http://php.net/manual/en/book.dom.php)

2.  [使用这里](https://stackoverflow.com/questions/1256796/how-to-get-the-value-of-an-attribute-from-xml-file-in-php)介绍的 simplexml 中的 attribute() 函数

3.  并且可能最简单的选择是注意到 BOOKNER 是每一行中的第三个节点，我会做这样的事情。

    for ($i = 0; $i < count($simplexml->->children()); $i++){ echo $simplexml->Table[$i]->Table->Field[2]; }

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:09:58.337

测试一下，它对我有用：

```
foreach ($simplexml->Table as $value)
{
    $tableName = $value->attributes()->name;
    foreach ($value->Row as $value_1)
    {
        if ($tableName == 'I_EXCDATERESA')
        {
            foreach ($value_1->Field as $value_2)
            {
                if ($value_2->attributes()->name == 'BOOKNR')
                {
                    $autoBook = $value_2[0];
                    echo $autoBook;
                }
            }
        }
    }
} 
```

你的问题是：

```
 $value->Field->attributes()->name=='BOOKNR' 
```

这太过分了：我在每个元素行的字段上添加了另一个循环！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T08:25:11.643

```
$simplexml->xpath('/Tables/Table[name="I_EXCDATERESA"]/Row/Field[name="BOOKNR"]'); 
```

不起作用，你错过了@

```
$simplexml->xpath('/Tables/Table[@name="I_EXCDATERESA"]/Row/Field[@name="BOOKNR"]'); 
```

# javascript - 如何改进此 Javascript，以将事件附加到页面中的所有元素？

> ID：10152283
> 
> 赞同：4
> 
> 时间：2012-04-14T08:49:20.760
> 
> 标签：javascript, performance, events, dom-events

我正在开发一个 Web 应用程序，我需要捕获所有元素的所有事件，我自己编写了一个代码，但我需要你们可爱的专家来尽可能地提高我的代码性能。

```
// Create mouse event callbacks and an array to store callbacks,
// This array is to prevent creation of callback functions multiple times
var mouseEventCallbacks = {};
var mouseEvents = [
    'mouseover', 
    'mouseout', 
    'mousedown', 
    'mouseup', 
    'click', 
    'mousemove', 
    'contextmenu', 
    'dblclick', 
    'mousewheel'
];

function mouseEventCallback(eventType){
    if(!mouseEventCallbacks[eventType])
        mouseEventCallbacks[eventType] = function(event) {
            self.port.emit('new-event', {
                x: event.pageX + window.pageXOffset, 
                y: event.pageY + window.pageYOffset
            },{
                type: eventType
            });
        }

    return mouseEventCallbacks[eventType];
}

// Attach all events to all elements
var elems = window.document.querySelectorAll('*');

for(var j = 0, s = elems.length; j < s; j++) {
    attachMouseEvents(elems[j]);
}

function attachMouseEvents(element){
    for(var k = 0, s = mouseEvents.length; k < s; k++){
        element.addEventListener(mouseEvents[k],
                                 mouseEventCallback(mouseEvents[k]),
                                 false);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T09:07:27.550

不要将事件处理程序附加到每个元素，而是使用[事件委托](http://api.jquery.com/delegate/)。当事件被触发时，它会在 DOM 中冒泡到正文（或处理事件的第一个元素），因此您可以在正文的事件处理程序中处理所有事件。然后，您拥有`event.target`引用实际触发它的 DOM 元素的属性

PS 我已经链接了 jQuery 文档，但这是一般性建议，而不仅仅是使用 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:13:35.727

您可以使用 jQuery 和 .bind 事件到所有元素使用 jQuery 通用选择器，但是 jquery * 选择器非常慢，并且事件委托优于 .bind。

```
$("*").bind(events...) 
```

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

JavaScript: The Definite Guide 的作者 David Flangan 说：

> 处理事件的困难之一是 IE（直到 IE9）实现了与所有其他浏览器不同的事件 API。为了解决这个难题，jQuery 定义了一个适用于所有浏览器的统一事件 API。在其简单的形式中，jQuery API 比标准或 IE 事件 API 更易于使用。并且在其更复杂的全功能形式中，jQuery API 比标准 API 更强大。”

# windows - 如何在不丢失窗口最大化状态的情况下删除 Windows 中 .emacs 中的工具栏？

> ID：10152287
> 
> 赞同：3
> 
> 时间：2012-04-14T08:50:01.733
> 
> 标签：windows, emacs

当我尝试使用以下命令禁用 .emacs 中的工具栏时：

```
(custom-set-variables
  '(tool-bar-mode nil)
) 
```

或（更新）以下：

```
(tool-bar-mode -1) 
```

窗口的最大尺寸缩小到屏幕的一部分。

它甚至不在“恢复的窗口大小模式”中，但它确实认为它已最大化，因此再次最大化它（例如使用 w32-send 命令）没有效果。

如果我在以 lisp-interatction 模式启动后应用相同的命令，则不会发生此行为。

更新：非常相关：[如何在启动时在 Windows 上最大化 Emacs？](https://stackoverflow.com/questions/815239/how-to-maximize-emacs-on-windows-at-startup)

虽然这个问题是关于删除工具栏，另一个是关于最大化状态，但事实证明这个问题是关于同一个问题：那里的工具栏也阻止了用户最大化他的窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:03:11.350

这确实是一个错误。然而，这里提供了一个简单的解决方法：

[如何在启动时在 Windows 上最大化 Emacs？](https://stackoverflow.com/questions/815239/how-to-maximize-emacs-on-windows-at-startup)

肯尼詹森

为方便起见，我在这里重复一遍：

```
(w32-send-sys-command #xf030)
(add-hook 'window-setup-hook (lambda () (tool-bar-mode -1))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T14:59:22.597

这是一个错误，请报告它`M-x report-emacs-bug`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T09:00:48.193

禁用次要模式给出否定论点

```
(tool-bar-mode -1) 
```

更新：至少在 linux 上，它不会缩小

# ruby-on-rails - 自定义身份验证：请求规范的登录助手

> ID：10152289
> 
> 赞同：1
> 
> 时间：2012-04-14T08:50:27.897
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 RSpec 的新手。[我已经按照此 railscast](http://railscasts.com/episodes/270-authentication-in-rails-3-1)中的描述从头开始创建了身份验证，我希望登录代码在我的一些（不是全部）请求（集成）规范之前运行。我已经考虑了几个解决方案，但我想知道解决这个问题的最佳方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:57:24.730

[您可以在How to do integration testing with RSpec and Devise/CanCan](https://stackoverflow.com/questions/5865555/how-to-do-integration-testing-with-rspec-and-devise-cancan)中尝试 Matt Connoly 的回答？.

显然，您需要根据您的身份验证设置重写方法，但它应该可以帮助您。

# javascript - python websocket握手（RFC 6455）

> ID：10152290
> 
> 赞同：7
> 
> 时间：2012-04-14T08:50:30.493
> 
> 标签：javascript, python, websocket

我正在尝试使用 RFC 6455 协议在 python 上实现一个简单的 websoket 服务器。我从[这里](http://en.wikipedia.org/wiki/WebSocket#WebSocket_protocol_handshake)和[这里](https://www.rfc-editor.org/rfc/rfc6455#section-1.3)采取了握手格式。

我使用 Chromium 17 和 Firefox 11 作为客户端，并收到此错误：

`Uncaught Error: INVALID_STATE_ERR: DOM Exception 11`

我希望`hello from server`在我的浏览器和`hello from client`服务器日志中看到。

我想我的握手是错误的，你能指出我的错误吗？

##服务器日志，请求：

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: 127.0.0.1:8999
Origin: null
Sec-WebSocket-Key: 8rYWWxsBPEigeGKDRNOndg==
Sec-WebSocket-Version: 13 
```

##服务器日志，响应：

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: 3aDXXmPbE5e9i08zb9mygfPlCVw= 
```

##原始字符串响应：

```
HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: 3aDXXmPbE5e9i08zb9mygfPlCVw=\r\n\r\n 
```

##服务器代码：

```
import socket
import re
from base64 import b64encode
from hashlib import sha1

websocket_answer = (
    'HTTP/1.1 101 Switching Protocols',
    'Upgrade: websocket',
    'Connection: Upgrade',
    'Sec-WebSocket-Accept: {key}\r\n\r\n',
)

GUID = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11"

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind(('127.0.0.1', 8999))
s.listen(1)

client, address = s.accept()
text = client.recv(1024)
print text

key = (re.search('Sec-WebSocket-Key:\s+(.*?)[\n\r]+', text)
    .groups()[0]
    .strip())

response_key = b64encode(sha1(key + GUID).digest())
response = '\r\n'.join(websocket_answer).format(key=response_key)

print response
client.send(response)

print client.recv(1024)
client.send('hello from server') 
```

##客户端代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript">
        var s = new WebSocket('ws://127.0.0.1:8999');
        s.onmessage = function(t){alert(t)};
        s.send('hello from client');
    </script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T11:02:47.613

您的服务器握手代码看起来不错。

客户端代码看起来会在（异步）握手完成之前尝试发送消息。您可以通过将消息发送移动到 websocket 的 onopen 方法来避免这种情况。

建立连接后，服务器不会以纯文本形式发送或接收消息。有关详细信息，请参阅规范的[数据框架](https://www.rfc-editor.org/rfc/rfc6455#section-5)部分。（客户端代码可以忽略这一点，因为浏览器会为您处理数据框架。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-14T14:20:36.823

我正在尝试同样的事情，但永远无法让它发挥作用。[最后，我找到了Aymeric Augustin](https://pythonrepo.com/repo/aaugustin-websockets-python-websocket)的文章Library for building WebSocket servers and clients in Python 。他这样做的方式（下面的代码）会自动为您握手。

```
import asyncio
import websockets

async def echo(websocket, path):
    async for message in websocket:
        await websocket.send(message)

asyncio.get_event_loop().run_until_complete(websockets.serve(echo, 'localhost', 8765))
asyncio.get_event_loop().run_forever() 
```

# php - 带有服务器配置的 cron 命令根本不起作用

> ID：10152294
> 
> 赞同：0
> 
> 时间：2012-04-14T08:51:04.207
> 
> 标签：php, cron

我创建了以下命令行以每 2 分钟运行一次 cron 作业

```
 2 * * * *  php -f /home/u260451427/public_html/cron/cron_sms_sending_queue.php 
```

我的服务器配置看起来像这样![cron_job](../Images/2cb58081b05e10aee83a011f03ce5205.png)

但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:06:43.850

`2 * * * * <command>`每小时每两分钟运行一次。

来自'man 5 cron'：

```
Step values can be used in conjunction with ranges...
Steps are also permitted after an asterisk, so if you 
want to say ``every two hours'', just use */2 
```

因此，您的 crontab 条目应该是

`*/2 * * * * <command>`

# javascript - 某些公式中的 Javascript 计算问题

> ID：10152298
> 
> 赞同：0
> 
> 时间：2012-04-14T08:51:23.120
> 
> 标签：javascript, formatting, decimal

我在 Javascript 中有一些公式并试图格式化它们但无法做到这一点。这是我试图从中进行计算的JS代码我有这两个变量，我从中获取输入然后进行计算

```
var pkrusd;
var pkrusd = parseFloat(document.getElementById('txtpkrusd').value, 10); 
var ratelb;
ratelb = parseFloat(document.getElementById('txtRatelb').value, 10); 
```

这是我显示结果的公式

```
var res;
res=roundNumber((pkrusd*ratelb)/100.00,2);
document.getElementById('txtF5').value = addCommas(res);
//Per Kg
var perkg=((pkrusd*ratelb)/100.00)*2.20462262184878;
document.getElementById('txtperkg').value=addCommas(roundNumber(perkg,2));
//RS Per Maund
var perMaund=roundNumber((((pkrusd*ratelb)/100.00)*2.20462262184878)*37.3242,2);
document.getElementById('txtperMaund').value=addCommas(perMaund); 
```

问题是当我 res 公式和值 pkrusd 和 ratelb 是 91 和 100 并且这些公式是 (91*100)/100 时结果是 91 但我想设置一些应该显示为 91.00 的格式并且当值是 ( 91*250)*100 则结果为 227.5 但我想显示为 227.50。如果有任何可能，请帮我这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:58:29.317

看看[toFixed()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)

例子：

```
var n=91;
alert(n.toFixed(2)); 
```

那输出`91.00`

# php - 如何在 PHP 中实现这个歌词 API？

> ID：10152299
> 
> 赞同：0
> 
> 时间：2012-04-14T08:51:23.270
> 
> 标签：php, javascript, api

[我在http://www.lyrdb.com/services/lws-tech.php](http://www.lyrdb.com/services/lws-tech.php)找到了一个歌词 API 。它基本上在被查询时返回一组结果。坦率地说，我并不精通 PHP，但我对此有所了解，返回的结果集需要存储在 String 变量中，然后用户单击从中提取的歌曲 ID 以检索歌词通过歌曲 ID。

任何人都可以帮我编写脚本吗？非常感谢您的帮助:)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:42:04.360

没有人可以在 SO 上教你 PHP。但是，要让您开始，您基本上需要 PHP 的两个功能。

1.  [文件获取内容](http://php.net/manual/en/function.file-get-contents.php)
2.  [分裂](http://php.net/manual/en/function.split.php)

下面是一个示例代码，它将为您执行此操作：

```
abhinavsingh@ubuntu:~$ cat lyrdb.php 
<?php

$res = file_get_contents("http://webservices.lyrdb.com/lookup.php?q=we%20are%20the%20champions&for=trackname&agent=agent");
//echo $res;
$res = split(PHP_EOL, $res);
//print_r($res);
foreach($res as $k=>$v) {
    $v = split("\\\\", $v);
    //print_r($v);
    $lyr = file_get_contents("http://webservices.lyrdb.com/getlyr.php?q=".$v[0]);
    //echo $lyr;
}

?> 
```

这会获取从第一个查询返回的所有结果的歌词。您可能只想在有限的数据集上执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:52:23.560

让你开始

```
$titles = explode("\n",file_get_contents("http://webservices.lyrdb.com/lookup.php?q=Elton+John&for=artist&agent=testservice")); 
```

# android - 安装 facebook sdk

> ID：10152301
> 
> 赞同：0
> 
> 时间：2012-04-14T08:51:26.087
> 
> 标签：android, facebook-android-sdk

我是为 android 开发的新手，我在安装`facebook sdk`.

我已按照[本教程](http://developers.facebook.com/docs/mobile/android/build/%20this)`step 4`进行操作，但 在尝试运行应用程序（*根本不更改我以前的工作代码*）后遇到问题，我在 facebook 中遇到错误![我添加了一张图片](../Images/9caa98300e80412d8ff8394e1cbf2980.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:15:10.687

尝试清理 facebook 项目。它可以提供帮助。

# ruby-on-rails-3 - Rails：设计覆盖创建方法和呈现错误

> ID：10152305
> 
> 赞同：1
> 
> 时间：2012-04-14T08:52:34.177
> 
> 标签：ruby-on-rails-3, forms, devise, fancybox, registration

我是 Rails 新手，开发第一个应用程序变得很困难，因为你知道一些事情，但你不知道如何去做。

我将我的注册表单设置**在一个**使用“fancy-box”jquery 弹出窗口的框中。当某些用户注册失败时，我希望页面**保留在**验证错误的框中，当他正确注册时，我想将他重定向到主页，但我不能这样做：

我的控制器覆盖了设计方法：

```
def setup
  @society = Society.new
end

# GET /resource/sign_up
def new
  super
end

# POST /resource
def create
  build_resource

  if resource.save
   if resource.active_for_authentication?
      set_flash_message :notice, :signed_up if is_navigational_format?
      sign_in(resource_name, resource)
      respond_with resource, :location => after_sign_up_path_for(resource)
    else
      set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
      expire_session_data_after_sign_in!
     respond_with resource, :location => after_inactive_sign_up_path_for(resource)
    end
  else
    clean_up_passwords resource
    render action: new  
  end
end

protected

def after_sign_up_path_for(resource)
  '/vetrina/index'  #my homepage
end 
```

和形式：

```
<%= simple_form_for @society, :html => { :class => 'form-horizontal' } do |f| %>
  <fieldset>

  #all the inputs are here

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to 'Cancel', "#", :class => 'btn' %>
  </div>
</fieldset> 
```

有什么帮助吗？

# vba - 多参数 subs vba

> ID：10152306
> 
> 赞同：23
> 
> 时间：2012-04-14T08:52:36.163
> 
> 标签：vba, arguments, call

使用带有 Access 2010 的 VBA，我有一个子：

```
Public Sub setInterest(account As String, dmonth As Integer)
    ...somecode...
End Sub 
```

我用它来称呼它

```
setInterest("myAccount",3) 
```

我得到语法错误。
将 sub 修改为仅接受一个参数并省略 3 不会出错，问题仅在我有 2 个参数时。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-14T08:57:18.233

使用多个参数时，您可以编写：

```
 setInterest "myAccount", 3 
```

或者

```
 Call setInterest("myAccount", 3) 
```

在这两个示例中，您都可以命名参数：

```
setInterest account:="myAccount", dmonth:= 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-14T06:49:53.063

我添加了这个答案，**为什么你的语法适用于一个参数？**

```
Public Sub setInterest(account As String)
    '...somecode...
End Sub

setInterest ("myAccount") 
```

> **注意：**当and之间
> 没有任何内容时，VBA 认为它是一个*公式*并且恰好是一个参数。`,``(``)`

 *当公式计算结果将是这样的：

```
Dim str As String
str = ("TEST")
Debug.Print str

[Output:]
TEST 
```*

# php - 似乎正在制作有效的 JSONarray 对象，但如何让 php 处理它？

> ID：10152307
> 
> 赞同：0
> 
> 时间：2012-04-14T08:52:37.847
> 
> 标签：php, android, json, web-services

我正在向 php 脚本发送一个字符串，并尝试从中制作一个 jsonarray 以进行处理并将其放入 sql 表中。我将一个字符串从一个 android 应用程序发送到服务器：

```
[{"name":"bob","datetime":"2012-04-14 10:40"},{"name":"Anonymous","datetime":"2012-04-14 10:40"}] 
```

我使用[http://jsonlint.com/](http://jsonlint.com/)来验证 jsonarray 并且它是有效的。当我有以下 php 脚本时：

```
<?php

$json_as = stripslashes($_POST["json_a"]);
//$out.=json_decode(jsoninfo);
$realjson = json_decode($json_as, true);

//print $json_as;
//echo $realjson[name];
//print $realjson[name];
print $json_as;

?> 
```

我在我的 LogCat 中看到了以下信息：

```
The Response text is [{"name":"bob","datetime":"2012-04-14 10:40"},{"name":"Anonymous","datetime":"2012-04-14 10:40"}] 
```

我一直在尝试使用它作为参考，但没有运气：[http ://webhole.net/2009/08/31/how-to-read-json-data-with-php/](http://webhole.net/2009/08/31/how-to-read-json-data-with-php/)

但是，当我尝试更改 php 脚本以从变量 $realjson 中提取某些内容时，什么也没有返回。如何从我发送的 json 字符串中获取信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:59:28.520

发送一个 JSON 格式的字符串，然后使用以下代码：

```
$json_as = stripslashes($_POST["json_a"]);
trim($json_as, "[");
trim($json_as, "]"); 
$realjson = json_decode($json_as, true);
//$uses = "name";

mysql_select_db("thoughtsdata",$con);

foreach($realjson as $item) {
    $name = $item[name];
    $datetime = $item[datetime];
    //processed code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:02:43.647

这是在 PHP 和 Android 之间发送和接收[JSON 数据](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)的完整教程。

我希望这可以帮助你。

询问：

> http://localhost/testJson.php?data=[{%22name%22:%22bob%22,%22datetime%22:%222012--04-14%2010:40%22},{%22name%22: %22Anonymous%22,%22datetime%22:%222012-04-14%2010:40%22}]

PHP代码：

代码 ：

```
<?php
$data = $_REQUEST['data'];

print_r(json_decode($data));

?> 
```

结果 ：

> 数组 ( [0] => stdClass 对象 ( [name] => bob [datetime] => 2012--04-14 10:40 ) [1](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php) => stdClass 对象 ( [name] => 匿名 [datetime] => 2012- 04-14 10:40))

# jquery - 如何为中心赋予点击功能 | 旋转木马中的焦点图像？

> ID：10152312
> 
> 赞同：0
> 
> 时间：2012-04-14T08:54:10.883
> 
> 标签：jquery, jquery-plugins, carousel

我正在尝试在 jQuery 中围绕 carousel 提供单击功能以聚焦图像（中心图像）。

[http://fredhq.com/projects/roundabout/demos/images](http://fredhq.com/projects/roundabout/demos/images)在这个 url 我需要点击功能，应该去其他网页。我只需要这个功能用于中心（焦点）图像而不是其他子图像。对于其他图像，它应该成为焦点，然后我需要点击才能发生。

例如 ：

单击中心或焦点图像时，我需要转到（打开新窗口）google.com

问题 ：

1.  有没有办法为焦点图像调用 onclick 事件？
2.  如果无法通过环形交叉路口旋转木马，是否还有其他支持此功能的旋转木马。
3.  [http://fredhq.com/projects/roundabout](http://fredhq.com/projects/roundabout) 有没有我可以在点击事件中使用的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:29:35.320

您可以利用[`focus`](http://fredhq.com/projects/roundabout#focus)插件触发的事件：

```
$('li').bind('focus', function(e){ console.log(e.target); }) 
```

`li`环形交叉路口的 HTML 的子节点在哪里，并且`e.target`将是当前位于轮播的焦点/前端和中心的 DOM 元素。

## 更新

我意识到**仅**`focus`事件并不是您所需要的全部，因为您希望在单击焦点元素时执行某些**操作**。对于这种情况，您可以使用 jQuery 的[`on()`](http://api.jquery.com/on/)方法或[`delegate()`](http://api.jquery.com/delegate/)（取决于您使用的 jQuery 版本）

```
// jQuery >= 1.7
$('ul').on('click', '.roundabout-in-focus', function(e) { console.log(this); });

// jQuery >= 1.4.2
$('ul').delegate('.roundabout-in-focus', 'click', function(e){ console.log(this); }) 
```

这使用[事件委托](https://stackoverflow.com/questions/1687296/what-is-dom-event-delegation)将侦听器附加到父`ul`节点，该侦听器仅在被单击的元素具有`roundabout-in-focus`看起来像回旋处插件默认提供焦点类的类时触发，我认为我不能 100% 确定这是有保证的永远如此。在回调中，`this`指的`li`是被点击的元素。

# php - 将上传的图像传递给 facebook->api 函数的 PHP SCRIPT 问题

> ID：10152313
> 
> 赞同：1
> 
> 时间：2012-04-14T08:54:14.710
> 
> 标签：php, facebook, facebook-graph-api

如果我提供图像的直接链接，我有这个代码并且它的工作非常好。

* * *

只有一个问题，我无法将我上传的图片传递给 facebook->api（无论它是否有效）并且以下总是回显

* * *

echo '仅支持 jpg、png 和 gif 图像类型！';

* * *

我什至删除了对图像类型的检查并尝试从 $img = realpath($_FILES["pic"]["tmp_name"]); 但是 $img 什么都没有，并默认在 facebook 上上传一个空图像作为我的页面 请检查我的以下代码，让我知道我的代码有什么问题以及我应该怎么做才能上传图像

以下CODE的在线链接：[http ://radiations3.com/facebook/1.php](http://radiations3.com/facebook/1.php)

```
 <?

require 'src/facebook.php';

$app_id = "364900470214655";
$app_secret = "xxxxxxxx";

$facebook = new Facebook(array(
 'appId' => $app_id,
 'secret' => $app_secret,
 'cookie' => true,
 'fileUpload' => true,
));

$user = $facebook->getUser();
//echo $user;

if(($facebook->getUser())==0)
{
 header("Location:{$facebook->getLoginUrl(array('req_perms' => 'user_status,publish_stream,user_photos,offline_access,manage_pages'))}");
 exit;
}
else {
$accounts_list = $facebook->api('/me/accounts');
echo "i am connected";
}
  $valid_files = array('image/jpeg', 'image/png', 'image/gif');

//to get the page access token to post as a page
foreach($accounts_list['data'] as $account){
      if($account['id'] == 194458563914948){      // my page id =123456789
        $access_token = $account['access_token'];
        echo "<p>Page Access Token: $access_token</p>";
        }
    }

//posting to the page wall

if (isset($_FILES) && !empty($_FILES))
{  
if( !in_array($_FILES['pic']['type'], $valid_files ) )
{
  echo 'Only jpg, png and gif image types are supported!';
 }
 else{
  #Upload photo here
  $img = realpath($_FILES["pic"]["tmp_name"]);
$attachment = array('message' => 'this is my message',
                'access_token'  => $access_token,
                'name' => 'This is my demo Facebook application!',
                'caption' => "Caption of the Post",
                'link' => 'example.org',
                'description' => 'this is a description',
                'picture' => '@' . $img,
                'actions' => array(array('name' => 'Get Search',
                                  'link' => 'http://www.google.com'))
                );
$status = $facebook->api('/194458563914948/feed', 'POST', $attachment);   // my page id =123456789
var_dump($status);
}
}
?>
<body>
 <!-- Form for uploading the photo -->
 <div class="main">
  <p>Select a photo to upload on Facebook Fan Page</p>
  <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" enctype="multipart/form-data">
  <p>Select the image: <input type="file" name="pic" /></p>
  <p><input class="post_but" type="submit" value="Upload to my album" /></p>
  </form>
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:05:05.663

上传后，我收到以下回调

> 我是 connectedarray(1) { ["id"]=> string(31) "194458563914948_415487041812098" }

graph api explorer 提示上传成功

[https://developers.facebook.com/tools/explorer?method=GET&path=194458563914948_415487041812098](https://developers.facebook.com/tools/explorer?method=GET&path=194458563914948_415487041812098)

# python - 如何使用 gsm 和 python 拨打电话号码

> ID：10152317
> 
> 赞同：0
> 
> 时间：2012-04-14T08:55:38.263
> 
> 标签：python

如何使用 gsm 和 python 拨打电话号码。我在窗口中尝试了很多软件，但我无法使用 python 找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:27:31.113

我找到[了这个](http://www.codeproject.com/Articles/111277/Cellular-Development-with-Telit-GSM-Module-and-Pyt)，也许它对你有用。

个人 iv'e 成功地使用了 .NET 框架的 GSMComm 库。如果可能的话，也许你应该考虑通过 IronPython 使用这个库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:01:13.240

您应该从 python 打开一个到 gsm 调制解调器的 COM 串行端口并使用 AT 命令，在 Wikipedia 中搜索那些，它们用于与 gsm 设备通信

# javascript - 在 html/css/js 之上是否有任何用于富 Web 客户端的框架？

> ID：10152318
> 
> 赞同：1
> 
> 时间：2012-04-14T08:55:40.793
> 
> 标签：javascript, python, rad, rich-internet-application, rich-client-platform

一些 RAD 工具（如 openobject）使用富 Web 客户端。即他们的客户端代码驻留在浏览器中，他们只通过 xml-rpc 或 json-rpc 与服务器对话并相应地更改视图，所有的 javascript 和 css 只传输一次。这样的富 Web 客户端将提高具有大量流程和表单等的企业级 Web 应用程序的生产力。

我想在我自己的应用程序中使用这样一个丰富的 Web 客户端。我试图搜索，但只找到了与其服务器紧密集成的 openerp-web。是否有其他可用的富 Web 客户端框架？如果没有，是否有任何设计细节我可以研究来创建自己的？

谢谢。

编辑：浏览器是一个客户端，它使用 http 和类似协议与提供客户端显示页面的 Web 服务器对话。富 Web 客户端是位于浏览器之上的客户端，它与服务器对话、发送数据、接收数据和有关如何更新视图等的信息并执行此操作。与 Vaadin 类似，这样的富 Web 客户端将消除客户端的任何代码需求，并且所有编码都将在服务器端完成。下面就是这样的瘦客户端。

1.  pjax ( jquery )
2.  vaadin ( java )
3.  openobject web 客户端 ( python )
4.  nagare (蟒蛇)
5.  海边（smalltalk）
6.  p4a ( php )

这些都是这样的客户端，一旦正确设置将允许仅在服务器上进行编码，并且仍然提供类似 ajax 的出色体验。

编辑 2：我想我为我想要的东西找到了更好的名字。[http://en.wikipedia.org/wiki/Rich_client_platform](http://en.wikipedia.org/wiki/Rich_client_platform) 富客户端平台，但基于 web。http://en.wikipedia.org/wiki/Rich_AJAX_Platform 与此最相似。现在我想要这个在 python 中。如果我自己移植它，我会发布链接。

编辑 3： http: [//lucumr.pocoo.org/2011/11/15/modern-web-applications-are-here/](http://lucumr.pocoo.org/2011/11/15/modern-web-applications-are-here/)这里是关于类似技术的相关文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:54:13.587

对于未来的读者，

我最终使用了 angularjs.org，它很容易在普通 html 上扩展。

# facebook - Exchange token js api 或 php 多查询

> ID：10152320
> 
> 赞同：0
> 
> 时间：2012-04-14T08:56:23.210
> 
> 标签：facebook, token

是否可以通过 js api 获取用户扩展令牌？

如果不是通过单个查询获取多个用户令牌呢？

我得到这样的令牌；

`https://graph.facebook.com/oauth/access_token?client_id=xxx&client_secret=xxx&grant_type=fb_exchange_token&fb_exchange_token=".$u[token]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:37:33.390

您不能向该 url 发出 ajax 请求，因为 ajax 请求仅限于您的域（跨域安全策略），但您也许可以使用 facebook javascript sdk，尽管我不确定它是否会起作用。

就像是：

```
FB.api("oauth/access_token", "get", {
    client_id: xxx,
    client_secret: xxx,
    grant_type: "fb_exchange_token",
    fb_exchange_token: currentToken
}, function(response) {
    console.log(response);
}); 
```

即使这可行，它也不是您应该使用的东西，因为您**必须**在请求中包含应用程序密码，并且由于您想从客户端这样做，这意味着应用程序密码将不再是一个秘密.

另外，这样做有什么意义？只要用户正在与您的应用程序交互，您就可以简单地使用它在[处理无效和过期访问令牌](http://developers.facebook.com/docs/authentication/access-token-expiration/)中的状态：

> **使用 Javascript SDK 实现身份验证的桌面 Web 和移动 Web 应用程序**
> 
> 调用 FB.getLoginStatus() 或确保 status: true 在您调用 FB.init() 时设置意味着下次用户登陆您的应用程序并登录 Facebook 时，您将通过这些调用传递 authResponse 对象将包含一个新的、有效的访问令牌。
> 
> 在这种情况下，它只是用户使用您的应用程序的行为，它隐式地生成了一个新的访问令牌。

至于您的另一个问题，facebook api 有所谓的[Batch Requests](http://developers.facebook.com/docs/reference/api/batch/)，它可以让您在一个请求中进行一些 api 查询，但我不确定它是否适用于相对路径“oauth/access_token”，但不客气试试看。

# mfc - 如何在 MFC/C++ 中修改配置文件中的值

> ID：10152327
> 
> 赞同：0
> 
> 时间：2012-04-14T08:57:42.103
> 
> 标签：mfc

我是 MFC 编程的新手。我必须编写一个读取配置文件的应用程序来初始化应用程序。配置文件格式类似于：

```
server={192.168.1.254;8080}
device={panasonic}
printer={172.168.10.50;9100} 
```

我想知道如何读取每个键及其值，然后将新值写回配置文件。如果你能给我代码示例，我将非常感谢你的好意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:01:03.383

使用该`.ini`格式，MFC 支持该格式。

检查[文档](http://msdn.microsoft.com/en-us/library/kayts37a%28v=vs.80%29.aspx)，查找“.INI”条目。

# c# - 在 .NET 中从内存中下载和运行 JAR

> ID：10152328
> 
> 赞同：4
> 
> 时间：2012-04-14T08:57:44.677
> 
> 标签：c#, .net, jar, download

我有一个 C# 应用程序，我需要在其中下载并运行 JAR 文件，而无需将其保存到磁盘。这在 C# 中可能吗？我可以通过 WebClient 将文件下载到磁盘（这是我在发布时所做的）并通过保存然后删除的批处理脚本启动它，但我想更进一步，不让任何东西接触驾驶。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T15:05:02.103

JAR 文件需要由 JVM 的 javaw.exe 执行。另一个进程无权进入您的虚拟内存空间并读取文件数据。*除非两个*进程合作并使用共享内存部分，否则不会。你从 javaw.exe 得不到这样的合作，它需要一个文件。

这在 Windows 中不是问题，因为 javaw.exe 实际上会从内存中读取文件。当您在程序中写入文件时，实际上是写入文件系统缓存。它在 RAM 中缓冲文件数据，延迟将其写入磁盘。只要文件不是很大（千兆字节或更多）并且您不会等待太长时间来启动 java（分钟）并且机器有足够的 RAM（千兆字节或两个）然后 javaw.exe 从文件中读取文件系统缓存。RAM，而不是磁盘。与旧的 RAM 磁盘完全相同的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T16:15:00.027

您可以编写一个特殊的 Java 类加载器，它通过进程间通信 (IPC) 从 .NET 进程而不是文件加载类。此外，您还需要一个小型启动器 JAR，它首先安装类加载器，然后执行通过 IPC 检索到的 JAR。您需要在 .NET 应用程序中实现 IPC 通信的服务器部分。

但是这值得吗？如此复杂的软件有什么好处？

# xslt - XSLT 参数始终为空

> ID：10152329
> 
> 赞同：0
> 
> 时间：2012-04-14T08:58:27.267
> 
> 标签：xslt, umbraco

我使用以下参数创建了一个名为 GraphicsRowSlider 的 xslt

```
<xsl:param name="mediaFolderId" select="/macro/mediaFolderId" />
<xsl:param name="title" select="/macro/title" /> 
```

并将参数 title 和 mediaFolderId 添加到相关宏中。

然后我创建了新的宏容器数据类型并选择宏 GraphicsRowSlider 作为允许的宏。然后，我将新数据类型的新字段添加到文档类型中，然后将该字段导入模板中。

最后，从内容中，我插入了宏并添加了标题并选择了媒体文件夹......但是，我可以看到宏调用了正确的 xslt，并具有正确的标题和 mediaFolderId，但参数始终为空！

任何想法？！注意，我总是得到这个

```
<?UMBRACO_MACRO macroalias="GraphicsRowSlider" title="Add Title here" mediaFolderId="1159" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:48:16.910

您使用的语法表明您使用的是旧的 umbraco 版本，您使用的是哪一个？

如何使用宏参数的定义可以在 umbraco wiki 上找到：http: [//our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters](http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters)

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:07:13.677

您的输入是一个属性（至少您的 xml 示例表明了这一点），因此您的 xpath 应如下所示：

```
<xsl:param name="mediaFolderId" select="/macro/@mediaFolderId" />
<xsl:param name="title" select="/macro/@title" /> 
```

# macos - 在 OSX Snow Leopard 上使用全局快捷方式启动 Shell 脚本

> ID：10152332
> 
> 赞同：0
> 
> 时间：2012-04-14T08:58:50.027
> 
> 标签：macos, osx-snow-leopard

我有一个 shell 脚本，我每天工作期间都会启动几次。我通过启动终端并从内部启动脚本来做到这一点。但是，我希望能够使用全局 OSX 键盘快捷键（例如 Cmd+Shift+R）启动它（从终端内）。

已经有相当多的应用程序以这种方式工作（例如 EverNote、RemindMeLater，甚至是默认的 Cmd-Space，它会启动搜索实用程序），因此，我猜这至少在理论上应该是可能的。

有人可以告诉我是否以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:04:44.853

与其使用全局快捷键，不如尝试创建一个运行 shell 脚本的 applescript？因此，只需在 AppleScript Editor 中打开，然后输入类似这样的内容。

```
do shell script "//Your script"; 
```

然后将其保存为格式下拉列表中的应用程序。

之后，您只需使用 Spotlight 之类的工具打开应用程序即可运行脚本。

# wordpress - Facebook喜欢按钮对所有帖子做出反应

> ID：10152335
> 
> 赞同：0
> 
> 时间：2012-04-14T08:59:59.200
> 
> 标签：wordpress, facebook-like

我认为我在下面使用的查询有问题。我想显示多个缩略图，每个缩略图都有自己的类似按钮。一切正常，但是当您按下 1 按钮时，它也会像所有其他图像一样。尝试了重置查询，但我想它不起作用或者我弄错了。有人遇到了类似的问题或知道如何解决这个问题？

```
 <?php query_posts('cat=1'); ?>
        <?php if (have_posts()) : ?>
        <?php while (have_posts()) : the_post(); ?>
        <?php $thumb = get_post_meta($post->ID, 'thumb', $single = true); ?>
            <ul>
                <li>
                <a href="<?php the_permalink() ?>" title="View <?php the_title(); ?>'s showcase"><img src="<?php echo $thumb; ?>" alt="View <?php the_title_attribute(); ?>'s showcase" width="150" height="111" /></a>  
                    <div class="design"><a href="<?php the_permalink() ?>" title="View <?php the_title(); ?>'s showcase"><?php the_title(); ?></a></div>
                    <div class="subtitle"><a href="<?php the_permalink(); ?>">view feature</a></div>
                    <!-- AddThis Button BEGIN -->
                    <div class="addthis_toolbox addthis_default_style ">
                    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
                    </div>
                    <!-- AddThis Button END --> 
                </li>
            </ul>
        <?php endwhile; ?>    
        <?php else : ?>    
        <?php endif; ?>
        <?php wp_reset_query() ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:12:55.337

为like 按钮添加一个 fbml href 属性。

```
<a class="addthis_button_facebook_like" fb:like:layout="button_count" fb:like:href="<?php the_permalink(); ?>"></a> 
```

# php - Javascript 或 PHP 获取位置并将其发送给我？

> ID：10152338
> 
> 赞同：-4
> 
> 时间：2012-04-14T09:00:44.263
> 
> 标签：php, javascript, iphone, gps, location

> **可能重复：**
> [Javascript/PHP 我可以获取 GPS 位置并将其发送给我吗？](https://stackoverflow.com/questions/10149233/javascript-php-can-i-get-gps-location-and-send-it-to-me)

好的，这就是我想要的：

我需要 Javascript 或 PHP 脚本之类的东西来从访问者那里获取 gps 位置，然后偷偷发送给我（我不会用这个坏的，它是用于防止我的 iPhone 被盗的网站）

我希望如果小偷打开网站（我将使用 webclip、命名 Safari 并给出 safari 图标）我会自动获取他的位置并将他重定向到谷歌或其他

所以基本上是这样的：

```
navigator.geolocation.getCurrentPosition(GetLocation);
function GetLocation(location) {
    //Some script that sends the location secretly to me
}
{
    windows.location="http://google.com";
} 
```

你能帮我吗？

PS：我不会用这个坏的，因为它只会在我的 iPhone 上，我知道有它的应用程序，但那些要花钱，我不知道它是否值得。

更新：

我发现了以下内容：我不知道它到底做了什么，但我猜它需要该位置并将其发送到 location.php ???

```
function ajaxFunction() {
$.ajax({
  url:'location.php',
  type:'POST',
  data:'lat='+lat+'&long='+long,
  success:function(d){
    console.log(d);
  },
  error(w,t,f){
    console.log(w+' '+t+' '+f);
  }
});
} 
```

现在我如何让它重定向到谷歌并将它放在我的网站上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:02:25.260

打开站点并授予它访问该位置的权限，选择“记住此决定”或任何选项。那么提示以后就不会出现了。

但是，为此编写一个应用程序可能是一个更好的主意。

# php - 如何检查用户是否在他们的 Yahoo! / 邮箱帐号

> ID：10152341
> 
> 赞同：1
> 
> 时间：2012-04-14T09:01:03.803
> 
> 标签：php, gmail, yahoo, loginstatus

我网站的大部分用户都进入了 Yahoo! 和 Gmail 电子邮件。我想在我的管理员部分添加一个页面，显示其中哪些人现在已登录其电子邮件帐户，以便管理员可以选择向他们发送电子邮件。

有可能实现这样的事情吗？

# c# - 使用 C# 从注册表中删除子项时出错

> ID：10152344
> 
> 赞同：1
> 
> 时间：2012-04-14T09:01:23.960
> 
> 标签：c#, registry

我正在尝试删除我的程序之前创建的子项，但出现以下错误：

> 无法删除子项树，因为子项不存在。

这是代码：

```
RegistryKey reg;
reg = Registry.CurrentUser.OpenSubKey("SOFTWARE\\MyCompany\\MyProgram",true);
if (reg != null)
{
    reg.DeleteSubKey("mysubkey");
    reg.Close();
} 
```

我已经在注册表中验证了子项存在。

# c# - 如何在 C# 中创建和使用 DLL 模块？不是 DLL 汇编

> ID：10152345
> 
> 赞同：0
> 
> 时间：2012-04-14T09:01:29.607
> 
> 标签：c#, dll

我想创建一个使用动态连接到应用程序的 DLL 模块的应用程序。例如：创建一个包含DLL模块的特殊文件夹，用户可以添加新模块，程序在启动时扫描这个文件夹并连接它。所以我不能像 csc /out:TestCode.exe /reference:MathLibrary.DLL TestCode.cs 那样编译，因为我没有 DLL 名称。将有许多具有明确结构的 DLL：Load()、Free()、Settings()、Name() 等等。

另外我想知道，在这个 DLL 中是否有一个名为 XXX 的函数（对于可选函数，例如 Settings() 可能存在也可能不存在）。

语言：用于应用程序和 DLL 的 C#。

就像应用程序中的插件一样。在 C 中，这很容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:04:05.393

查看[托管可扩展性框架](http://mef.codeplex.com/)。

# matlab - 将多个matlab文件中的变量提取到一个文件中

> ID：10152347
> 
> 赞同：0
> 
> 时间：2012-04-14T09:01:39.620
> 
> 标签：matlab

我有这个项目任务，我在解决它时遇到了问题。
我抽取了 10 个人所说的 1 到 10 个单词的样本。从每个样本中，我提取了每个单词，例如，我将所有样本中的单词 1 提取到不同的文件中。我现在有 10 个文件，每个文件都有提取的第一个单词。我想将它们组合成一个数组。

```
file = wavread( 'G:\Segmented Data\amir.wav');    
t = linspace(0,8,length(file));    
t2=linspace(0,.8,8820);    
section1 = file(1:8820,:);    
sound(section1, 11025);    
figure(1),    
plot(t2,section1); 
```

我有 10 个具有上述代码的文件。我想从所有这些中提取变量部分到一个新文件中，并将它们存储在一个数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:49:21.217

你想[连接数组](http://www.weizmann.ac.il/matlab/techdoc/ref/vertcat.html)吗？

```
>> a = 1.0:0.1:1.9    % your data, obtained from `wavread()`

a =

    1.0000    1.1000    1.2000    1.3000    1.4000    1.5000    1.6000    1.7000    1.8000    1.9000

>> b = 2.0:0.1:2.9    % your data, obtained from `wavread()`

b =

    2.0000    2.1000    2.2000    2.3000    2.4000    2.5000    2.6000    2.7000    2.8000    2.9000

>> c = 3.0:0.1:3.9    % your data, obtained from `wavread()`

c =

    3.0000    3.1000    3.2000    3.3000    3.4000    3.5000    3.6000    3.7000    3.8000    3.9000

>> combined = [a; b; c]    % a, b, and c in one array

combined =

    1.0000    1.1000    1.2000    1.3000    1.4000    1.5000    1.6000    1.7000    1.8000    1.9000
    2.0000    2.1000    2.2000    2.3000    2.4000    2.5000    2.6000    2.7000    2.8000    2.9000
    3.0000    3.1000    3.2000    3.3000    3.4000    3.5000    3.6000    3.7000    3.8000    3.9000 
```

当然，这仅在`a`和的列宽相同`b`时才有效。`c`如果它们的大小不同，则必须用零填充它们，以使它们*具有*相同的大小。

# java - 由于 xml 签名导致的错误

> ID：10152350
> 
> 赞同：3
> 
> 时间：2012-04-14T09:01:52.900
> 
> 标签：java, xml-signature

我有一个 xml 文档。当我使用 java 库打印文档时，我得到了正确的 xml 输出。然后我使用 xmlsignatures 对 xml 文档进行签名。签名后，我尝试再次打印文档。但是这一次文档的打印方式是所有**元素都是 JUMBLED**。所以我想知道xml签名是否修改了xml文档？如果是，那为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:19:31.990

签名可以通过规范化来修改您的结构。这是必要的，因为您的 xml 可以有不同的有效表示。为了验证签名，所有各方必须就一种规范化的表示达成一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T03:18:25.680

像@Mat 一样，我想详细了解您所说的 JUMBLED 是什么意思。尽管如此，如果您选择了 ENVELOPED（或明显 DETACHED）签名方法，则不应更改原始文档的结构。相反，选择 ENVELOPING 方法确实会通过将原始文档包装在包含签名的容器中来更改原始文档。

# asp.net - ASP.NET 计时器：在滴答之前调用 JS

> ID：10152355
> 
> 赞同：2
> 
> 时间：2012-04-14T09:02:28.863
> 
> 标签：asp.net, timer

我想在计时器滴答后回发之前调用 js 方法。怎么做到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:04:29.467

ajax调用事件之前的用户，您必须注册第一个注册事件

```
Sys.WebForms.PageRequestManager.instance.add_beginRequest(beginRequestHandler) 
```

事件处理程序

```
function BeginRequestHandler(sender, args)
{
    alert("Before ajax call");
} 
```

# workflow-foundation-4 - 从 Activity 访问工作流 ExectionProperties

> ID：10152358
> 
> 赞同：1
> 
> 时间：2012-04-14T09:03:12.337
> 
> 标签：workflow-foundation-4

当我从 NativeActivity 派生活动时，我可以使用 NativeActivityContext 访问工作流执行属性，如下所示：

`context.Properties.Find("propertyname");`

我的一些活动派生自 Activity，因为我使用 Implementation 属性定义了编码工作流。Activity 有一个 ActivityContext，它不提供对工作流执行属性的访问，它没有 Properties 属性。

是否有另一种方法可以从 Activity 中访问工作流执行属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T11:26:50.757

似乎不是。使用 Reflector 可以看到 ExecutionProperties 类只暴露在两个地方。一个是`NativeExecutionContext.Properties`，另一个与`IReceiveMessageCallback.OnReceiveMessage()`.

# titanium - Titan android 模块可以读取使用 Ti.Database 创建的数据库吗？

> ID：10152365
> 
> 赞同：0
> 
> 时间：2012-04-14T09:04:03.503
> 
> 标签：titanium, titanium-mobile, titanium-modules

`Ti.Database`使用钛代码创建（和更新）数据库。我创建了一个安卓模块。创建的android模块是否可以读取使用钛代码（使用Ti.Database）创建的数据库？

基本上，我想知道访问数据库的路径是什么？Titanium 应用程序名称为“testApp”，模块名称为“testAndroidModule”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:58:48.560

是的。看看核心模块是怎么做的，同样做：[https ://github.com/appcelerator/titanium_mobile/tree/master/android/modules/database/src/java/ti/modules/titanium/database](https://github.com/appcelerator/titanium_mobile/tree/master/android/modules/database/src/java/ti/modules/titanium/database)

# objective-c - 在 Objective-C 中，为什么变量的类型必须为 @property 重复？

> ID：10152370
> 
> 赞同：1
> 
> 时间：2012-04-14T09:04:40.073
> 
> 标签：objective-c, properties

对于**Objective-C**，在以下头文件中：

```
@interface Peg : NSObject {
    char color;
}

@property char color; 
```

我想知道成员变量是否已经说是**char**类型，那为什么`@property`还要重复呢？（否则它不会编译）。编译器不能告诉它是**char**吗？不可能是别的，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T09:08:55.087

这是因为一般属性不必与类的任何声明的实例变量相关。您可能有一个属性，但没有将变量包含到您的类头中。这就是为什么你必须声明它的类型。

使用属性而不是变量可以使您的标头干净，隐藏实现。

所以，你可以只声明一个属性，然后`@synthesize`它

```
@interface Peg : NSObject

@property char color;

@implementation Peg

@synthesize color;

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T09:14:44.883

实际上，它不再需要，至少在使用 clang 为 x64 编译时是这样。如果您省略实例变量，`@synthesize`将为您创建一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T09:14:25.690

只需使用以下

```
@interface Peg : NSObject {}

@property char color; 
```

# codeigniter - 如何添加 QuickBase 一个 CodeIgniter

> ID：10152372
> 
> 赞同：0
> 
> 时间：2012-04-14T09:05:30.283
> 
> 标签：codeigniter, sdk, quickbase

我正在寻找如何将 QuickBase API 集成到使用 CodeIgniter 框架开发的网站中，我将 api 添加为库

```
$this->load->library('quickbase', 'login','password', true, 'table'); 
```

当我打电话时显示错误

```
A PHP Error was encountered
Severity: Warning

Message: Missing argument 1 for QuickBase::__construct(), called in /var/www/vhosts/************/httpdocs/system/core/Loader.php on line 1099 and defined

Filename: libraries/quickbase.php

Line Number: 43

A PHP Error was encountered

Severity: Warning

Message: Missing argument 2 for QuickBase::__construct(), called in /var/www/vhosts/**************/httpdocs/system/core/Loader.php on line 1099 and defined

Filename: libraries/quickbase.php

Line Number: 43

A PHP Error was encountered

Severity: Notice

Message: Undefined variable: un

Filename: libraries/quickbase.php

Line Number: 45

A PHP Error was encountered

Severity: Notice

Message: Undefined variable: pw

Filename: libraries/quickbase.php

Line Number: 49 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:10:46.297

您的错误是因为 Quickbase API 文件的调用格式与 CodeIgniter 库需要使用的`load->library`语法不同。您需要阅读手册的[创建库](http://codeigniter.com/user_guide/general/creating_libraries.html)部分，然后创建您自己的与 CodeIgniter 兼容的 Quickbase 库，其中包含 Quickbase API 的文件。

# android - 无法建立 HTTPConnection

> ID：10152375
> 
> 赞同：0
> 
> 时间：2012-04-14T09:06:11.457
> 
> 标签：android

我是 android 开发新手，我正在尝试制作 HTTPConnection。我制作了两个文件，一个是 ParsingActivity.java（主活动文件），另一个是 XMLParser.java（用于设置 HTTPRClient 请求）。

ParserActivity.java

```
package ok.done;

import android.app.Activity;
import android.os.Bundle;

public class ParsingActivity extends Activity {

    String URL = "http://api.androidhive.info/pizza/?format=xml";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        System.out.println("t1==========>"+URL);

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);

        System.out.println("t2==========>"+xml);
    }
} 
```

XMLParsing.java

```
package ok.done;

import java.io.IOException;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

public class XMLParser {

    // constructor
    public XMLParser() {

    }

    public String getXmlFromUrl(String url) {
        String xml = null;

        System.out.println("t3==========>"+xml);
        System.out.println("t4==========>"+url);

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            System.out.println("t5==========>"+url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

            System.out.println("t6==========>"+xml);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

} 
```

我还在 AndroidManifest.xml 中添加了权限

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ok.done"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".ParsingActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

</manifest> 
```

我的 System.out.println 的 LogCat 结果是

对于 t1==========>http://api.androidhive.info/pizza/?format=xml t3==========>null t4======= ===>http://api.androidhive.info/pizza/?format=xml t5==========>null t6==========>null t2=== =======>空

但是如果在我这个简单的代码中一切都是完美的，那么 t6,t2 的结果就是 xml 文件描述。

任何人请建议我应该做什么或任何其他有助于我创建 XML 解析类型应用程序的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T15:25:57.930

您确定 http 服务器在触发后会提供有效的 xml。为确保在 Web 浏览器上触发 url，如果服务器提供 xml，您将获得 xml 内容。

# multiprocessing - python多处理的替代使用模式避免全局状态的扩散？

> ID：10152377
> 
> 赞同：10
> 
> 时间：2012-04-14T09:06:13.837
> 
> 标签：multiprocessing, python, pool

这个（非常简化的示例）工作正常（Python 2.6.6，Debian Squeeze）：

```
from multiprocessing import Pool
import numpy as np

src=None

def process(row):
    return np.sum(src[row])

def main():
    global src
    src=np.ones((100,100))

    pool=Pool(processes=16)
    rows=pool.map(process,range(100))
    print rows

if __name__ == "__main__":
    main() 
```

然而，经过多年被教导***全球状态不好！***，我所有的直觉都在告诉我，我真的很愿意写一些更接近于：

```
from multiprocessing import Pool
import numpy as np

def main():
    src=np.ones((100,100))

    def process(row):
        return np.sum(src[row])

    pool=Pool(processes=16)
    rows=pool.map(process,range(100))
    print rows

if __name__ == "__main__":
    main() 
```

但当然这不起作用（挂断无法腌制某些东西）。

这里的例子很简单，但是当你添加多个“进程”函数时，每个函数都依赖于多个额外的输入......好吧，这一切都让人想起 30 年前用 BASIC 编写的东西。尝试使用类至少用适当的函数聚合状态似乎是一个明显的解决方案，但在实践中[似乎并不那么容易。](https://stackoverflow.com/q/1816958/24283)

是否有一些推荐的模式或风格来使用 multiprocessing.pool 以避免全局状态的扩散以支持我想要并行映射的每个功能？

经验丰富的“多处理专家”如何处理这个问题？

**更新**：请注意，我实际上对处理更大的数组感兴趣，因此上述对`src`每个调用/迭代进行腌制的变体不如将其分叉到池的工作进程中的变体。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T09:44:20.510

您总是可以像这样传递一个可调用对象，然后该对象可以包含共享状态：

```
from multiprocessing import Pool
import numpy as np

class RowProcessor(object):
    def __init__(self, src):
        self.__src = src
    def __call__(self, row):
        return np.sum(self.__src[row])

def main():
    src=np.ones((100,100))
    p = RowProcessor(src)

    pool=Pool(processes=16)
    rows = pool.map(p, range(100))
    print rows

if __name__ == "__main__":
    main() 
```

# javascript - 为什么我的 JavaScript 对象看不到以下方法？

> ID：10152378
> 
> 赞同：0
> 
> 时间：2012-04-14T09:06:25.803
> 
> 标签：javascript

```
<html>
<body>
<script type="text/javascript">

    MyClass = function (id) {
    }

    MyClass.prototype.myFunc1 = function () {
        alert("myFunc1");
    }

    MyClass.prototype = {
        myFunc2:function () {
            alert("myFunc2");
        }
    }
    var myInstance = new MyClass({});
    myInstance.myFunc1();
</script>
</body>
</html>
​ 
```

运行上面我收到错误消息

未捕获的类型错误：对象 # 没有方法“myFunc1”

如果我完全删除 myFunc2，错误消息就会消失。这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T09:09:32.183

有一个错误，因为您通过为其分配一个新对象来覆盖原型 - 因此您将摆脱`myFunc1`.

执行以下任一操作：

```
MyClass.prototype.myFunc1 = function() {...}
MyClass.prototype.myFunc2 = function() {...} 
```

或者

```
MyClass.prototype = {
    myFunc1: function() {...},
    myFunc2: function() {...}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T09:09:44.813

首先，您通过添加来更改对象的原型`myFunc1`。然后，您将原型完全替换为新原型，并删除`myFunc1`.

您可以交换语句，这样就`.prototype = ...`可以了。然后`myFunc1`将被**添加**到`myFunc2`定义的原型中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T09:10:26.817

[这是一个演示](http://jsfiddle.net/aB2hq/2/)（观看控制台）和简单的解释

```
var MyClass = function(id) {}

//here you are adding to the prototype object
MyClass.prototype.myFunc1 = function() {
    alert("myFunc1");
}

//here, you replaced the whole prototype object with another object
MyClass.prototype = {
    myFunc2: function() {
        alert("myFunc2");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T10:09:11.113

试试这个......它正在工作。

```
MyClass = function (id) {
}

MyClass.prototype = {
    myFunc2: function () {
        alert("myFunc2");
    }
}

MyClass.prototype.myFunc1 = function () {
    alert("myFunc1");
}

var myInstance = new MyClass({});
myInstance.myFunc1(); 
```

# c - 在没有 \n 的情况下捕获输入

> ID：10152381
> 
> 赞同：2
> 
> 时间：2012-04-14T09:06:40.173
> 
> 标签：c, input, terminal

我正在终端中制作一个简单的 2d 游戏，我一直想知道如何在不返回的情况下获得标准输入。因此，用户不必按 w\n （\n 表示返回），他们只需按“w”，它就会前进。scanf、gets 和 getchar 无法做到这一点，但我之前已经在 Vi 等程序中看到过。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:25:47.167

您需要将终端设置为非规范模式。您可以使用 tcsetattr 和 tcgetattr 等函数来设置和获取终端属性。这是一个简单的例子：

```
int main(int argc, const char *argv[])
{
    struct termios old, new;
    if (tcgetattr(fileno(stdin), &old) != 0) // get terminal attributes
        return 1;

    new = old;
    new.c_lflag &= ~ICANON; // turn off canonical bit.
    if (tcsetattr(fileno(stdin), TCSAFLUSH, &new) != 0) // set terminal attributes
        return 1;

    // at this point, you can read terminal without user needing to
    // press return

    tcsetattr(fileno(stdin), TCSAFLUSH, &old); // restore terminal when you are done.

    return 0;
} 
```

有关这些函数的更多信息，请参阅[glibc 文档。](http://www.gnu.org/software/libc/manual/html_node/Low_002dLevel-Terminal-Interface.html#Low_002dLevel-Terminal-Interface)尤其是[这部分。](http://www.gnu.org/software/libc/manual/html_node/Canonical-or-Not.html#Canonical-or-Not)

# objective-c - 必须至少存在以下架构之一： armv7 (-19033) 无法验证您的应用程序。- （无效的）

> ID：10152382
> 
> 赞同：8
> 
> 时间：2012-04-14T09:06:43.430
> 
> 标签：objective-c, ios, ios5, app-store

我正在开发一个仅限 Ipad 的应用程序，但是当我尝试在 Apple Store 上提交时，我在“应用程序由于无效的权利而导致协同设计验证失败”错误中遇到了很多问题，还有一些我在下面提到的问题。我正在使用 Xcode 4.3.2 和 IOS 5.1 进行开发，目标是 IOS 5.0

```
1\. iPad: application executable is missing a required architecture.  At least one of the following architecture(s) must be present: armv7 (-19033) 
```

为此，我确实像其他人提到的那样

```
ARCHS = armv7 armv6 
```

我添加了 Architecture armv7 但它在这里不起作用是构建设置的链接我没有人们告诉我的权利文件但如果你能帮助我

![在此处输入图像描述](../Images/b4203cdc792cb3b1253237022025a8f8.png)

![在此处输入图像描述](../Images/e2465a59995cdda46fb8f40ed02680aa.png)

```
2\. Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)

3\. Unable to extract entitlements from application: (null) (-19045) 
```

这是完全错误，希望你们能带我走得更远，谢谢

```
Validate /Users/bourne/Library/Developer/Xcode/DerivedData/TurfNutritionTool_ver_5.1-azcqbuzeebaybzdjeksuhyuvyrmw/Build/Products/Release-iphoneos/TurfNutritionTool_ver_5.1.app
    cd /Development/TurfNutritionTool_IOS_5.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/bourne/Library/Developer/Xcode/DerivedData/TurfNutritionTool_ver_5.1-azcqbuzeebaybzdjeksuhyuvyrmw/Build/Products/Release-iphoneos/TurfNutritionTool_ver_5.1.app

warning: iPad: application executable is missing a required architecture.  At least one of the following architecture(s) must be present: armv7 (-19033)
Unable to validate your application. - (null)

warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)
Executable=/Users/bourne/Library/Developer/Xcode/DerivedData/TurfNutritionTool_ver_5.1-azcqbuzeebaybzdjeksuhyuvyrmw/Build/Products/Release-iphoneos/TurfNutritionTool_ver_5.1.app/Info.plist
codesign_wrapper-0.7.10: using Apple CA for profile evaluation
AssertMacros: exec,  file: codesign.c, line: 170
AssertMacros: binary,  file: codesign.c, line: 235
AssertMacros: code_signatures,  file: codesign_wrapper.c, line: 945
 - (null)

warning: Unable to extract entitlements from application: (null) (-19045)
Unable to validate your application. - (null) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:26:59.287

**通过将架构**设置为仅**armv7**并将**部署目标**更改为**4.3**（之前是 4.0）解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T20:54:22.553

**我遇到了这个问题，并通过将“仅构建活动架构”**设置为**“否**”来修复它（在开发过程中将其设置为“是”实际上是一个主要的加速**！**）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-14T09:14:46.783

请检查您的应用程序中的以下设置：

在 Info.plist 中。检查“所需设备功能”信息，并查看里面的数据。你应该有 2 个项目（NSArray）：armv6 和 armv7

# c# - 通过c#调用javascript函数

> ID：10152387
> 
> 赞同：0
> 
> 时间：2012-04-14T09:07:34.850
> 
> 标签：c#, javascript

我有一个要发送到 c# 的 javascript 函数。

然后，c# 函数将该信息发送到财务打印机。

该函数将从 html 文档中获取元素 id。

函数看起来像这样

```
function senddata(price)
{
  priceElem=document.getElemById("price");
} 
```

我想将数据发送到将要打印的 c# 函数。我有一个由 .net 创建的文件，我想将其包含在我的 c# 函数中。

此 .dll 文件将连接到财务打印机和 c# 函数。.dll 将有助于程序和财务打印机之间的通信。html 和 javascript 正在另一个程序中检索此信息。我正在使用 incotex 财务打印机。这个 c# 程序将打印收据。请外面有人帮忙。

问候，马西拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:35:20.660

我不完全清楚您的系统是如何设置的，所以这是我的假设：您想加载一些网页（本地或使用 URL）并使用 C# 代码与该网页进行通信。您可能想在网页中调用 JavaScript 函数，或者您可能想在加载的网页中监听事件，例如按钮单击。所有这些都可以通过使用浏览器控件来完成。您可以创建浏览器控件的实例，也可以在 WinForms 或 WPF UI 中使用它。我假设您的场景是桌面应用程序。

1.  如果要调用 JavaScript 函数，请使用 Browser.InvokeScript() 方法。有[一篇关于如何做的详细文章](http://www.west-wind.com/weblog/posts/2008/Sep/27/Calling-JavaScript-functions-in-the-Web-Browser-Control)。
2.  如果您想在浏览器控件中监听事件，例如按钮单击或链接单击，[请参阅这篇文章以了解操作方法](https://stackoverflow.com/questions/9110388/web-browser-control-how-to-capture-document-events)。
3.  如果您想进行更高级的自定义，请查看[此 C# 包装器](http://www.codeproject.com/Articles/18935/The-most-complete-C-Webbrowser-wrapper-control)。

# javascript - 围绕一个圆圈动态排列一些元素

> ID：10152390
> 
> 赞同：42
> 
> 时间：2012-04-14T09:08:11.017
> 
> 标签：javascript, jquery

我正在寻找一个功能来围绕一个圆圈排列一些元素。
结果应该是这样的：

![在此处输入图像描述](../Images/04696a6f1c4dec30cfbc0c72a7bac009.png)

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-14T09:16:39.917

这里有一些代码可以帮助你：

```
var numElements = 4,
    angle = 0
    step = (2*Math.PI) / numElements;
for(var i = 0; i < numElements.length; i++) {
    var x = container_width/2 + radius * Math.cos(angle);
    var y = container_height/2 + radius * Math.sin(angle);
    angle += step;
} 
```

它不完整，但应该给你一个好的开始。

* * *

更新：这是真正有效的东西：

```
var radius = 200; // radius of the circle
var fields = $('.field'),
    container = $('#container'),
    width = container.width(),
    height = container.height(),
    angle = 0,
    step = (2*Math.PI) / fields.length;
fields.each(function() {
    var x = Math.round(width/2 + radius * Math.cos(angle) - $(this).width()/2),
        y = Math.round(height/2 + radius * Math.sin(angle) - $(this).height()/2);
    $(this).css({
        left: x + 'px',
        top: y + 'px'
    });
    angle += step;
}); 
```

演示： http: [//jsfiddle.net/ThiefMaster/LPh33/](http://jsfiddle.net/ThiefMaster/LPh33/)
这是一个[改进的版本](http://jsfiddle.net/ThiefMaster/LPh33/4/)，您可以在其中更改元素计数。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-14T09:18:42.233

对于以 ( *x* , *y* ) 为中心、距离为*r*的元素，该元素的中心应位于：

```
(x + r cos(2kπ/n), y + r sin(2kπ/n)) 
```

其中*n*是元素的数量，*k*是您当前定位的元素的“数量”（介于 1 和*n*之间）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-28T18:36:04.087

我将 ThiefMaster 的小提琴与 jQuery pointAt 插件结合起来：

演示：http: [//jsfiddle.net/BananaAcid/nytN6/](http://jsfiddle.net/BananaAcid/nytN6/)

```
the code is somewhat like above.
might be interesting to some of you. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-22T06:44:52.873

# 将元素排列成圆圈（Javascript）

```
function arrangeElementsInCircle (elements, x, y, r) {
    for (var i = 0; i < elements.length; i++) {
        elements[i].scaleX = 1 / elements.length
        elements[i].scaleY = 1 / elements.length
        elements[i].x = (x + r * Math.cos((2 * Math.PI) * i/elements.length))
        elements[i].y = (y + r * Math.sin((2 * Math.PI) * i/store.length))
    }
} 
```

其中`x,y`是点坐标，`elements`是要放置的元素数组，`r`是半径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-19T16:32:35.547

**小偷大师答案的纯Javascript版本**

```
function distributeFields(deg){
  deg = deg || 0;
  var radius = 200;
  var fields = document.querySelectorAll('.field'), //using queryselector instead of $ to select items 
      container = document.querySelector('#container'),
      width = container.offsetWidth,  //offsetWidth gives the width of the container
      height = container.offsetHeight,
      angle = deg || Math.PI * 3.5,
      step = (2 * Math.PI) / fields.length;
      console.log(width, height)

     //using forEach loop on a NodeList instead of a Jquery .each, 
     //so we can now use "field" as an iterator instead of $(this)

      fields.forEach((field)=>{
        var x = Math.round(width / 2 + radius * Math.cos(angle) - field.offsetWidth/2);
        var y = Math.round(height / 2 + radius * Math.sin(angle) - field.offsetHeight/2);
        console.log(x, y)
        field.style.left = x + 'px';  //adding inline style to the document (field)
        field.style.top= y + 'px';

        angle += step;
      })
}

distributeFields(); 
```

# vba - Excel 2010 VBA 在所有打开的文件中运行

> ID：10152398
> 
> 赞同：3
> 
> 时间：2012-04-14T09:10:22.270
> 
> 标签：vba, excel, excel-2010

我在第一张纸上有一个带有 VBA 代码的 excel 文件 (*.xlsm)：

```
Private Sub Worksheet_Calculate()
ActiveSheet.ChartObjects("Podtlak").Chart.Axes(xlCategory, xlPrimary).MaximumScale = Range("AV79").Value
End Sub 
```

第二个带有宏的 excel 文件正在更改第一个 excel 中单元格中的值（它会自动重新计算），然后从第一个 excel 复制新结果的值并将其粘贴到第二个 excel 文件中。

问题是：当宏转到第二个 excel 并粘贴值时，重新计算工作表并调用第一个 excel 中的代码，但由于在第二个 excel 中找不到图表对象“Podtlak”而停止并出现错误。

如何将 worksheet_calculate() 设置为仅针对写入的文件运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:57:09.107

尝试指定工作簿：

`ThisWorkbook.ActiveSheet.ChartObjects("Podtlak").Chart.Axes(xlCategory, xlPrimary).MaximumScale = Range("AV79").Value`

或指定工作表和工作簿：

`ThisWorkbook.Worksheets("yourWorksheetName").ChartObjects("Podtlak").Chart.Axes(xlCategory, xlPrimary).MaximumScale = Range("AV79").Value`

我最喜欢第二个选项，因为您清楚地指定了运行此函数的工作表和工作簿。每当您使用`ActiveSheet`or`ActiveWorkbook`时，您都依赖于您的预期工作表在代码运行时处于活动状态这一事实。

# vim - vim 在 tmux 上通过 ssh 滚动缓慢

> ID：10152402
> 
> 赞同：5
> 
> 时间：2012-04-14T09:10:48.427
> 
> 标签：vim, ssh, tmux

我最近一直在我的服务器上尝试使用 tmux 来替代 byobu（屏幕）。当我开始在 vim 上编辑一些代码时，我发现当我按住并上下滚动时它非常`j`滞后`k`。

我认为这可能是因为我的连接有问题，但我尝试在没有 tmux 的情况下在 vim 上编辑相同的文件，我发现它的响应速度更快，几乎没有延迟。

那么，我能做些什么来让 tmux 上的 vim 不滞后？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T10:01:58.293

听起来您在 ssh 上使用 tmux。如果是这样，您可能想尝试一下[mosh](http://mosh.mit.edu/)。它建立在 ssh 之上，但与 ssh 相比具有许多优势。其中之一是：

> 摆脱网络滞后。
> 
> SSH 在显示您自己的输入之前等待服务器的回复。这可能会导致糟糕的用户界面。Mosh 不同：它对输入、删除和行编辑提供即时响应。它可以自适应地执行此操作，甚至可以在 emacs 和 vim 等全屏程序中工作。在连接不良的情况下，突出的预测带有下划线，因此您不会被误导。

根据我的经验，它比通过 ssh 工作得更好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-10T15:53:10.267

我经常在远程机器上工作，我也有同样的 vim 滚动问题。当您在 tmux 中使用 vim 并且同时打开多个窗格时，tmux 不能只重绘运行 vim 的屏幕部分，而是必须重绘更大的部分（可能是整个屏幕）。这会增加 tmux 通过您的连接发送的转义字符的数量。

就我而言，启用 ssh 压缩大大减少了这种缓慢。您可以尝试一下：

```
ssh -C user@host 
```

或放入`Compression yes`您`~/.ssh/config`的使其永久化。

# jquery-mobile - CheckBox 事件未在移动浏览器中触发，但在桌面上运行正常

> ID：10152404
> 
> 赞同：2
> 
> 时间：2012-04-14T09:11:03.537
> 
> 标签：jquery-mobile

我的移动设备浏览器上的复选框单击事件有一些问题。

以下代码在桌面浏览器上运行良好。单击 Checkbox ic 后，我可以看到 TempPage 上显示的文本。

```
<script type="text/javascript">
    $(document).ready(function(){
    // Check Box click event
    $(".checkboxclass").bind ("click", function (event)
        {
          var tempstring ='<p> CHECKBOX Click works </p>'
          $('.class-TempPage').append(tempstring);
        });
    }
</script>
<!-- ########### -->
<!-- TEMP page -->
<!-- ########### -->
<div data-role="page" id="id-TempPage">
    <div data-role="content">   
        <div class="class-TempPage">
        </div>
    </div><!-- /content -->
</div><!-- /page -->

<!-- ########### -->
<!-- CHECKBOX page -->
<!-- ########### -->

<div data-role="page" id="id-CheckBoxPage">
    <div data-role="content">   
        <div class="class-CheckBoxPage">
                <ul id="dataPointList" data-role="listview" data-filter="true">
                    <li>
                        <input type="checkbox"  id="checkbox-4"  />
                            <label class="checkboxclass" for="checkbox-4" data-iconpos="right">blah4</label>
                    </li>
                </ul>
        </div>
    </div><!-- /content -->
</div><!-- /page --> 
```

但是，当我在手机的浏览器（例如 Dolphin）上运行它时，它不起作用。

为什么呢？如何解决这个问题？

这个链接——http: [//jquerymobile.com/demos/1.0a4.1/docs/forms/forms-checkboxes.html——](http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-checkboxes.html)提到了一些东西，不确定是否相关。

谢谢。

# python - 通过 appengine 数据存储中的外键元素获取

> ID：10152405
> 
> 赞同：0
> 
> 时间：2012-04-14T09:11:05.983
> 
> 标签：python, google-app-engine, webapp2

我有三个数据库表：

```
class Book(bd.Model):
    title = db.StringProperty()
    pub_time = db.DateTimeProperty()
    subject = db.StringProperty()

class Author(db.Model):
    name = db.StringProperty()
    age = db.IntegerProperty()

class Match(db.Model):
    bk = ReferenceProperty(Book, collection_name='book')
    ath = ReferenceProperty(Author, collection_name='books_written') 
```

**问题：**我想过滤作者写的书`ATH`，关于主题`SUB`

**我的方法：**

```
class BookSearch(webapp2.requestHandler):
    def post(self):
        b = Books.all().filter("subject =", 'SUB')
        a = Author.all().filter("name =", "ATH")
        ret = Match.all().filter("bk =", b). filter("ath =", a)
        self.response.out.write(ret.count()) 
```

但这不起作用，我得到一个错误：

```
BadValueError: Unsupported type for property  : <class 'google.appengine.ext.db.Query'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T13:04:10.187

a 和 b 是查询而不是实体。您需要先获取实体，然后才能将其用作另一个查询中的过滤器：

```
class BookSearch(webapp2.requestHandler):
    def post(self):
        b = Books.all().filter("subject =", 'SUB').get()
        a = Author.all().filter("name =", "ATH").get()
        ret = Match.all().filter("bk =", b).filter("ath =", a)
        self.response.out.write(ret.count()) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T09:15:09.020

您应该使用`bk IN`而不是，`bk =`因为结果`b`可以是多个单个值。

试试这个：

```
ret = Match.all().filter("bk IN", b). filter("ath IN", a) 
```

文档在这里[https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_filter](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_filter)

# sql - 在sql server中的查询中计算不同ip的数量

> ID：10152408
> 
> 赞同：0
> 
> 时间：2012-04-14T09:11:40.640
> 
> 标签：sql, sql-server

我需要一点帮助来查询。我想从结果集中计算重复的 ip 并将其与用户名放在一起。

原始结果集是

```
Name | IP
--------------
Bert | 192.168.1.1
Bert | 192.168.1.5
Laura| 192.168.1.2 
```

我想要这个：

```
Name | IpCount
--------------
Bert | 2
Laura| 1 
```

到目前为止，我的查询是：

```
select ips.userName, COUNT(ips.userIP) as cnt 
from (select u.userName, u.userIP from 
users) as ips
group by ips.userName, ips.userIP 
```

但这给了我错误的计数，有人可以帮助我吗？

编辑：

我用了重复这个词，但它应该是：不同的。对不起各位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:20:49.977

假设您的示例有错字，您的意思是

```
Name | IP
--------------
Bert | 192.168.1.1
Bert | 192.168.1.1
Laura| 192.168.1.2 
```

你的表被命名为用户。这个查询应该做

```
select Name, COUNT(IP) as cnt 
from users
group by Name 
```

**更新**

正如@Andriy M 所指出的，这个查询应该做

```
select Name, COUNT(distinct IP)
from users
group by Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:24:48.447

```
SELECT   name, COUNT(*) as Totalcount
FROM     users
GROUP BY name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T09:34:08.373

或者只有超过 1 个 ip 的用户：

```
SELECT   name, COUNT(*)
FROM     users
GROUP BY name
HAVING COUNT(*) > 1 
```

# asp.net - 在不丢失先前行的情况下将行添加到 DataTable

> ID：10152414
> 
> 赞同：0
> 
> 时间：2012-04-14T09:12:56.983
> 
> 标签：asp.net, vb.net

```
Dim  _tableBackLogs As System.Data.DataTable

Do While i - 2 > 0
_tableBackLogs = Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i - 2 & "'")
i = i - 2
Loop 
```

这样做会替换`DataTable`. 我想保留以前的数据，即我希望将新行添加到 DataTable 中而不替换以前的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:38:13.073

用以下代码替换您的代码。

```
Dim _tableBackLogs As New System.Data.DataTable

Do While i - 2 > 0
    _tableBackLogs.Merge(Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i - 2 & "'"))
    i = i - 2
Loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:19:28.933

> 使用合并方法

```
Dim  _tableBackLogs As System.Data.DataTable

Do While i - 2 > 0
_tableBackLogs.Merge(Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i - 2 & "'"))
i = i - 2
Loop 
```

# c# - 嵌套的 If 语句不起作用

> ID：10152416
> 
> 赞同：0
> 
> 时间：2012-04-14T09:13:33.730
> 
> 标签：c#, if-statement, xmltextreader

我最近刚刚发布了关于尝试让 XMLTextReader 工作的帖子，我终于做到了。不幸的是，现在我无法让它从 XML 文件中获取数据，因为我的 if 语句做错了。我需要在另一个 if 语句中包含这些 if 语句，因为它们需要首先创建 Student 类。我不知道如何处理这个了。下面是我的代码，我敢肯定这是愚蠢的。我的编码不好，所以我知道我缺少的东西。

```
 while (reader.Read())
    {
        reader.MoveToContent();            

        if (reader.NodeType == XmlNodeType.Element && reader.Name == "student")
        {
            Student s = new Student();

                if (reader.Name == "id")
                {
                    s.ID = reader.ReadString();
                }
                if (reader.Name == "firstname")
                {
                    s.FirstName = reader.ReadString();
                }
                if (reader.Name == "lastname")
                {
                    s.LastName = reader.ReadString();
                }
                if (reader.Name == "score")
                {
                    s.TestScores.Add(Convert.ToInt32(reader.ReadString()));
                }
            s.Average = 6.00;
            Students.Add(s);
        }
    } 
```

[编辑] 即使在我告诉 XMLreader 用 reader.MoveToCONntent(); 移动到下一行之后 它仍然会跳过所有 if 语句。

我是编程的初学者，我将不胜感激任何新的想法和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:15:50.800

为了使第一个`if`陈述为真，`reader.Name`必须是“学生”。任何嵌套`if`检查的值是否为`reader.Name`“student”以外的任何值都将始终为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:37:44.313

> 它仍然跳过所有 if 语句，只是设置学生平均值并将其添加到列表中

我首先想到的是字符串上的相等性失败，所以首先要尝试的是

```
 if (reader.Name.Equals("id",StringComparison.InvariantCultureIgnoreCase)).. 
```

如果这也不起作用，请尝试使用 simple`XmlDocument`并查看它是否有效，如果没有，我会说您的代码中的其他内容是错误的，这在提供的代码中是不可见的。

一个简单的使用示例`XmlDocument`可以在这里找到：

[使用 XmlDocument 读取 XML 文件](http://www.c-sharpcorner.com/UploadFile/bulentozkir/ReadingXmlUsingXmlDocument11142005010141AM/ReadingXmlUsingXmlDocument.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T09:38:44.423

除非你上传一些关于它为什么不工作的错误，否则很难说。语法没有错。我会说在 Visual Studio 中查看调试错误以获取详细信息。如果你不明白错误然后上传它听到之后我们可以指导你。

我认为你应该尝试关闭读者。您的阅读器已打开。最后写 reader.close() 。

# javascript - 流星在 Mac 上安装在哪里？

> ID：10152418
> 
> 赞同：6
> 
> 时间：2012-04-14T09:14:08.540
> 
> 标签：javascript, node.js, meteor

我安装了流星并按照 tut [http://docs.meteor.com/#quickstart创建了一个应用程序](http://docs.meteor.com/#quickstart)

在finder中，我搜索了流星，但我找不到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-01T12:49:37.843

作为更通用的解决方案，bash shell 命令`type`为任何命令完成此操作：

```
 $ type meteor
    meteor is /usr/local/bin/meteor 
```

对于其他 shell，请[在 superuser 上查看这个出色的答案](https://superuser.com/a/351995/257781)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-14T09:20:31.200

`/usr/local/meteor`- 您可以在[http://install.meteor.com/的安装脚本中找到它](http://install.meteor.com/)

# django - 将 .png 文件附加到 satchmo 发送的电子邮件

> ID：10152423
> 
> 赞同：0
> 
> 时间：2012-04-14T09:14:38.790
> 
> 标签：django, satchmo

在 Satchmo 商店中，我需要在 django 完成订单后发送的电子邮件中附加一个小的 .png（条形码）。使用调用 send_store_mail() 的 send_order_confirmation() 将电子邮件格式化为 HTML 格式（都是 satchmo 的一部分。）这些函数都没有提供附加文件的能力（我认为）所以我应该重写它们吗？我想知道是否有可能/更好地使用信号来做到这一点。也许 rendering_store_mail() ？

顺便说一句，条形码将是动态生成的，因此无法在某处的服务器上链接到文件。

非常感谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:16:19.203

好吧，我也不得不在确认电子邮件中添加额外的信息，不过只有文本。因此，这将是使用信号向电子邮件添加额外内容的非常简单的方法，恕我直言，这是最好的方法。如果可以避免覆盖satchmo-core，请始终使用信号；-)

1.  定义你的监听器来为渲染添加一些上下文。在这种情况下，我将添加一个额外注释字段的内容，以及此订单的条形码，假设有一个名为 的函数`get_barcode_img(<order>)`到上下文中。我也在这里假设，该`get_barcode_img`函数不仅会返回 png，而且会返回类似于 MIMEImage（如`from email.MIMEImage import MIMEImage`）的内容，以便能够将其包含在内。此外，可能还需要更多信息，例如 img 的 MIME 标头。

    ```
    # localsite/payment/listeners.py

    def add_extra_context_to_store_mail(sender,
            send_mail_args={}, context={}, **kwargs):
        if not 'order' in context:
            return
        context['barcode_header'] = get_barcode_header(context['order'])
        context['barcode_img'] = get_barcode_img(context['order'])
        context['notes'] = context['order'].notes 
    ```

2.  将侦听器连接到肯定会“发现”代码的某个地方的信号，例如`models.py`：

    ```
    # localsite/payment/models.py 

    from satchmo_store.shop.signals import rendering_store_mail, order_notice_sender

    rendering_store_mail.connect(payment_listeners.add_extra_context_to_store_mail, sender=order_notice_sender) 
    ```

3.  在本地覆盖模板（例如`order_placed_notice.html`）以添加新上下文。请注意您将模板放在哪里，因为路径对于 django 获取新模板而不是 satchmo 的模板至关重要。在这种情况下，从项目的根路径开始，可能有一个模板文件夹，其中的路径必须与 satchmo 文件夹中的路径完全相同。例如 /templates/shop/email/order_placed_notice.html ...这可以应用于应用程序内的任何“有效”模板文件夹。由您决定，模板的组织位置/方式。

    ```
    <!-- templates/shop/email/order_placed_notice.html -->
    <!DOCTYPE ...><html>
    <head>
        <!-- include the image-header here somewhere??? -->
        <title></title>
    </head>
    <body>        
    ...
    Your comments:
    {{ notes }}

    Barcode:
    {{ barcode_img }}" 
    ```

# javascript - 有没有办法让我使用javascript检查字符串是否以“error”开头？

> ID：10152432
> 
> 赞同：0
> 
> 时间：2012-04-14T09:15:37.673
> 
> 标签：javascript

我有以下内容：

```
if (data == 'error') {
   mvcOnFailure(data)
} 
```

有什么方法可以改变它，以便检查以“error”或“Error”开头的字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:17:23.770

尝试使用正则表达式匹配：

```
if (data.match(/^[eE]rror/)) {
   mvcOnFailure(data) 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:17:37.447

```
if(data.toLowerCase().indexOf("error") == 0){
   // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T09:23:04.370

作为克里斯回答的更新，我更喜欢

```
data.match(/^error/i) 
```

这是不区分大小写的（将比所要求的提问者略多匹配）。

*** 更新 ***

遵循 Juicy Scripter 的评论，我现在更喜欢

```
/^error/i.test(data) 
```

因为它返回一个布尔值，而不是匹配的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T09:18:33.200

这应该可以解决问题：

```
if ( data.toLowerCase ().substr ( 0, 5 ) === 'error' ) {
  ..
} 
```

# javascript - 使用 jQuery 的带有 XML 的 HTML

> ID：10152435
> 
> 赞同：0
> 
> 时间：2012-04-14T09:16:11.047
> 
> 标签：javascript, html, xml

我有包含大量数据的 xml 文件。现在我想选择一个有条件的价格。我在 javascript 函数中设置了一个参数，但它没有给出期望的结果。我认为可以通过 childnode 完成，但我不知道

**XML 文件**

```
<flights updated="2012-03-09T04:38:00.437" type="flights" ob_id="45792117" lastedit="2012-03-09T15:10:01" partner_id="63" activate_date="2012-02-15T00:00:00" page_id="9646" page_pk_id="12597" pos_pk_id="51565" pos="1" module_id="3" pos_name="Flights" product_type_id="4" product_type="flight" headline="Bali" destination="Bali" localised_destination="Denpasar" headline_no_html="Bali" price="199" deals_space_limited="0" deals_sold_out="0" qa_approved="1" tp_available="0" tp_weight="10" partner_eapid="0-25" partner_pid="25" publish_path="\\dubvappdaily01\daily_aus\data\psf\" partner_lang_id="3081"  FrTLAs="PER" ToTLAs="DPS" FrDate="2012-04-27T00:00:00" ToDate="2012-05-04T00:00:00" Airline="QZ"/>

<flights updated="2012-03-09T04:38:00.437" type="flights" ob_id="45792117" lastedit="2012-03-09T15:10:01" partner_id="63" activate_date="2012-02-15T00:00:00" page_id="9646" page_pk_id="12597" pos_pk_id="51565" pos="1" module_id="3" pos_name="Flights" product_type_id="4" product_type="flight" headline="Bali" destination="Bali" localised_destination="Denpasar" headline_no_html="Bali" price="199" deals_space_limited="0" deals_sold_out="0" qa_approved="1" tp_available="0" tp_weight="10" partner_eapid="0-25" partner_pid="25" publish_path="\\dubvappdaily01\daily_aus\data\psf\" partner_lang_id="3081"  FrTLAs="SYD" ToTLAs="DPS" FrDate="2012-04-27T00:00:00" ToDate="2012-05-04T00:00:00" Airline="QZ"/> 
```

**网页**

```
<head>
  <script type="text/javascript">

    function myXml(origin, destination ) {
      var x = xmlDoc.getElementsByTagName("flights");

      for(i=0; i<x.length; i++) {
          if (x[i].getAttribute('FrTLAs') == origin
           && x[i].getAttribute('destination') == destination) {
              alert(x[i].getAttribute('price'))
          }
      }
    }
  </script>
</head>

<body>
  <a href="#" onclick="myXml('SYD','Bali')">click me</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:24:07.410

你错过了吗？

```
xmlDoc=loadXMLDoc("flights.xml"); 
```

查这个页面

```
http://www.w3schools.com/dom/prop_element_attributes.asp 
```

example2 非常清楚如何使用它

```
x=xmlDoc.getElementsByTagName("book")[0].attributes;
   //here its would be getElementsByTagName("flights") in the loop
   //then .attributes on it
   // and then this
frtlas=x.getNamedItem("FrTLAs");
desti=x.getNamedItem("destination");

//and your code here 
```

希望这可以帮助

# android - 进度对话框不会在 AsyncTask onProgressUpdate 上更新

> ID：10152443
> 
> 赞同：2
> 
> 时间：2012-04-14T09:17:28.350
> 
> 标签：android, multithreading, dialog, ui-thread

我正在开发 Android 3.1 及更高版本的应用程序。

我有这个代码来下载一些 json 数据：

```
public class FormsListActivity extends ListActivity
{
    private List<Form> mForms;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.formlist);

      FormListAsyncTask formAsyncTask = new FormListAsyncTask(this);
      formAsyncTask.execute("http://192.168.1.128/RestServiceImpl.svc/forms/");
    }

    private class FormListAsyncTask extends AsyncTask<String, Integer, List<Form>> {

        private Context mContext;
        private ProgressDialog loadingDialog;

        FormListAsyncTask(Context context)
        {
            mContext = context;
            loadingDialog = new ProgressDialog(mContext);
            loadingDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            loadingDialog.setMessage("Downloading. Please wait...");
            loadingDialog.setCancelable(false);
            loadingDialog.setMax(100);
            loadingDialog.show();
        }

        @Override
        protected List<Form> doInBackground(String... url)
        {
            Log.v("doInBackground", "retreiving forms");
            return FormSpringController.LoadAll(url[0]);
        }
        // Just some example code to update your progress dialog
        protected void onProgressUpdate(Integer... values)
        {
            Log.v("onProgressUpdate", "updating: " + ((int) ((values[0] / (float) values[1]) * 100)));
            loadingDialog.setProgress((int) ((values[0] / (float) values[1]) * 100));
        }

        protected void onPostExecute(List<Form> forms)
        {
            if (forms != null)
            {
                ListActivity act = (ListActivity) mContext;
                act.setListAdapter(new FormAdapter(act, R.layout.form_list_item, forms));
                mForms = forms;
            }
            else
            {
                TextView errorMsg = (TextView)
                        ((FormsListActivity) mContext).findViewById(R.id.formErrorMsg);
                errorMsg.setText("Problem downloading forms. Please try again later.");
            }
            loadingDialog.dismiss();
        }
    }
} 
```

为什么loadingDialog的进度没有在onProgressUpdate上更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:22:14.887

我 `publishProgress();`在您的代码中找不到任何内容。

`doInBackground()`从您的which 调用中调用 publishProgress()`onProgressUpdate()`隐式覆盖。

# math - verices=|V| 的有向图中的最大循环数 和边 =|E|

> ID：10152447
> 
> 赞同：2
> 
> 时间：2012-04-14T09:18:04.463
> 
> 标签：math, time-complexity, depth-first-search

尊敬的先生，

我正在使用代表 2 人正常形式游戏（博弈论）的特定图形结构。我知道我可以通过 Tarjans 在 O(V+E) 中计算有向图的所有强连通分量，但是想知道计算强连通分量的所有简单循环的复杂性是多少？并且，在给定定义强连通分量的顶点数的情况下，是否存在已知的此类简单循环数的上限？

我正在寻找与这两个问题相关的任何文献/算法。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:27:30.367

在您的情况下，可能的简单 2k 周期数为`(n choose k) * (m choose k)`. 如果 n、m 和 k 不小，则它呈指数增长。

枚举周期是不可行的。我怀疑是否有可能在合理的时间内为任意图形计算它们。即使使用动态编程技术，这也需要指数级的时间和空间（但指数比没有这些技术时要低）。

# ruby - 如何在多个 sinatra 应用程序中包含配置

> ID：10152448
> 
> 赞同：1
> 
> 时间：2012-04-14T09:18:11.617
> 
> 标签：ruby, configuration, sinatra

如果我的 Sinatra 应用程序结构是这样的。复制自 Sinatra 帮助

```
 require 'sinatra/base'

class LoginScreen  Sinatra::Base
  enable :sessions

  get('/login') { haml :login }

  post('/login') do
    if params[:name] == 'admin' && params[:password] == 'admin'
      session['user_name'] = params[:name]
    else
      redirect '/login'
    end
  end
end

class MyApp  Sinatra::Base
  # middleware will run before filters
  use LoginScreen

  before do
    unless session['user_name']
      halt "Access denied, please login."
    end
  end

  get('/') { "Hello #{session['user_name']}." }
end 

```

问题是这两个应用程序是否需要相同的配置，例如助手、寄存器和资产包。如何在不复制代码的情况下使其在两个应用程序之间保持一致。我可以做这样的事情吗？

```
 require 'sinatra/base'

class LoginScreen  Sinatra::Base
  include_relative("config_file.rb")
  enable :sessions

  get('/login') { haml :login }

  post('/login') do
    if params[:name] == 'admin' && params[:password] == 'admin'
      session['user_name'] = params[:name]
    else
      redirect '/login'
    end
  end
end

class MyApp  Sinatra::Base
  # middleware will run before filters
  include_relative("config_file.rb")
  use LoginScreen

  before do
    unless session['user_name']
      halt "Access denied, please login."
    end
  end

  get('/') { "Hello #{session['user_name']}." }
end

config_file.rb
helpers Sinatra::Helper1
helpers Sinatra::Helper2
helpers Sinatra::Helper3
register Sinatra1
register Sinatra2
register Sinatra3 

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T00:05:16.927

如何使用继承？

```
class MyBase < Sinatra::Base
  configure do
    helpers Sinatra::Helper1
    register Sinatra1
  end
end

class LoginScreen < MyBase
end

class MyApp < MyBase
  use LoginScreen
end 
```

这种方式配置在所有从`MyBase`.

# iphone - 在 iOS 中是否可以有一个模型/视图并创建第二个视图，在第二个屏幕上自动复制第一个视图？

> ID：10152450
> 
> 赞同：1
> 
> 时间：2012-04-14T09:18:28.320
> 
> 标签：iphone, objective-c, ios, ipad

假设我为 iPad 创建了一个模型和一个视图。如果我有第二个屏幕并想在第二个屏幕上复制该视图，是否有一种功能可以在 iOS 中自动执行此操作（实时自动镜像第二个视图中的第一个视图）？

这种机制是否适用于 vga 和 airplay ？

似乎这个问题太难了，似乎没有人知道？

准确地说，第一个视图必须保留在 iPad 上，第二个视图将在第二个视图上并与第一个视图同步（相同型号）。即当用户修改第一个视图时，第二个视图应该显示相同的更新。

我的视图不会只包含图像，它们可以包含任何东西（字段、webview、按钮等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:39:38.367

我还没有完全理解你的问题。你想在第二个屏幕上看到与第一个视图相同的视图，还是想在第二个视图中制作第一个视图的镜像效果？

如果您想要与第二视图中的第一个视图相同的视图，则直接将对象作为第一个视图并将其添加为第二个视图中的子视图。

如果你想创建镜像效果，那么你已经写了一个逻辑代码，我不知道有没有第三方库，

请解释你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:48:27.020

我自己没有尝试过，但是[ReflectionView](https://github.com/nicklockwood/ReflectionView)做了一些非常相似的事情。您也许可以对其进行调整以解决您的问题。

# java - Java泛型中的奇怪擦除

> ID：10152465
> 
> 赞同：4
> 
> 时间：2012-04-14T09:20:54.947
> 
> 标签：java, generics, inheritance

我有以下界面：

```
public interface Translator
{
    public <T, F> T translate(F from, T to, Class<T> clazz); 
} 
```

以及以下实现：

```
class TranslatorImpl implements Translator
{
    @Override
    public <T, F> T translate(F from, T to, Class<T> clazz)
    {
        //some code
    }
} 
```

但是对于类中的`translate()`方法`TranslatorImpl`，Eclipse 报错如下：

> 名称冲突：TranslatorImpl 类型的方法 translate(F, T, Class) 与 Translator 类型的 translate(F, T, Class) 具有相同的擦除，但不会覆盖它

更新：当我进行 Maven 构建时，它会正确构建。我使用JDK 1.6 update 31。Eclipse中的JDK合规级别是1.6

我该如何克服呢？

更新 2：

合规级别设置：![在此处输入图像描述](../Images/8ce2a3d59921668e9b1be29b24291689.png)

安装的JRE：![在此处输入图像描述](../Images/21ac43bf00ec773e42a1a5e78a588f77.png)

更新 3：我的`.classpath`文件内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/classes" path="src/main/java"/>
    <classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
    <classpathentry combineaccessrules="false" kind="src" path="/dbmodel"/>
    <classpathentry combineaccessrules="false" kind="src" path="/uimodel"/>
    <classpathentry combineaccessrules="false" kind="src" path="/common"/>
    <classpathentry kind="var" path="MAXIMUS_DEV_DIR/resources/dependencies/java/log4j/log4j-1.2.16/log4j-1.2.16.jar"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

更新 4：项目特定的编译器合规级别设置： ![在此处输入图像描述](../Images/bd2656e5c7697edc50da2c8e4204a5e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:02:00.667

以前的 Java 6 @Override 注释不允许用于实现接口，这可能是正在发生的事情。您可以尝试删除注释，它应该可以工作。在 Eclipse 项目属性中正确修复检查源级别的合规性。

# html - 如何将两个按钮放在同一行

> ID：10152466
> 
> 赞同：2
> 
> 时间：2012-04-14T09:21:05.047
> 
> 标签：html, css

我需要关于下面显示的图像的帮助。两个按钮“编辑和返回”按钮不在线显示。两个按钮的代码如下。他们都在同一个里面`<td></td>`

```
<tr><td>
  <input type="hidden" name="token" value="<?php echo $token; ?>"/>
  <input type="submit" name="edit" value="Edit"/>
  <?php
    //create a  back button that takes user back to referer url on click
    if (isset($HTTP_REFERER)) {
      echo '<a href="$HTTP_REFERER"><img src="images/buttons/back.gif" alt="back"></a>';
    } else {
      echo '<a href="javascript:history.back()"><img src="images/buttons/back.gif" alt="back"></a>';
    }
  ?>
</td></tr> 
```

我不能直接上传图片所以这里是我上传图片图片来源的链接：http: [//i39.tinypic.com/2miab.png](http://i39.tinypic.com/2miab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:34:55.440

好吧，我注意到某些解决方案在不同的浏览器中可能会有所不同，将您的按钮放在另一个没有任何属性的小表格中会使它们保持在一行中

```
<table><tr> <td><input type="hidden" name="token" value="<?php echo
$token; ?>"/></td> <td> <?php
//create a  back button that takes user back to referer url on click
if (isset($HTTP_REFERER)) {
echo '<a href="$HTTP_REFERER"><img1 src="images/buttons/back.gif" alt="back"></a>';
} else {
echo '<a href="javascript:history.back()"><img1 src="images/buttons/back.gif" alt="back"></a>';
}
?> </td> </tr></table> 
```

希望这是你想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:30:05.717

试试这个：

```
<td>
    <input type="hidden" name="token" value="<?php echo $token; ?>"/>
    <input type="submit" name="edit" value="Edit"/>
</td>
<td>
 <?php
    //create a  back button that takes user back to referer url on click
    if (isset($HTTP_REFERER)) {
        echo '<a href="$HTTP_REFERER"><img src="images/buttons/back.gif" alt="back"></a>';
    } else {
        echo '<a href="javascript:history.back()"><img src="images/buttons/back.gif" alt="back"></a>';
    }
    ?>
</td> 
```

# html - 显示块导致Firefox出现问题

> ID：10152468
> 
> 赞同：0
> 
> 时间：2012-04-14T09:21:41.020
> 
> 标签：html, alignment

我在那个表里面有一个 html 表我有两行像 `<table>` `<tr>` `<td></td>` `<td> </td>` `.` `.` `.` `<td>` `</td>`

`</tr>` `<tr>` `</tr>` `table`

问题是每当我将样式设置为`<tr display:block>`对齐在 Firefox 中混乱但它仅在 IE 中工作正常。有人请帮忙吗？我有很多谷歌，找不到解决方案。我已经设置`%`了我的`td`标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T12:06:47.700

**这是解决方案，**

要显示`tr`，请使用`display:table-row`而不是`display:block`。

要显示`td`，请使用`display:table-cell`而不是`display:block`。

# html - 在 MVC 3 Razor 中以两列而不是一列显示字段的模板

> ID：10152469
> 
> 赞同：0
> 
> 时间：2012-04-14T09:21:45.267
> 
> 标签：html, css, asp.net-mvc, forms

MVC 3 的 Details 模板返回了一个视图`<fieldset>`，用于显示代表一列中所有字段的元素。但我需要在两列或多列中显示模型的元素或字段。有什么好的模板吗？你的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T15:39:20.270

这里没有关于 MVC 的具体内容。这只是普通的旧 html 和 css。我建议买一本关于 HTML 和 CSS 的好书，这些事情你会很清楚。

您可以使用的许多方法之一：

[http://www.gethifi.com/blog/html-forms-the-right-ways](http://www.gethifi.com/blog/html-forms-the-right-ways)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:34:03.807

您正在寻找的是修改生成该视图的脚手架模板。

或者其他选项可以手动执行，检查“显示”每个模型的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T12:25:43.227

您拥有的一种选择是使用 MVC 的编辑器模板，它允许您控制如何生成模型的 html 呈现。这是一个带有示例的博客文章

[在 MVC 3 中使用 EditorTemplates](http://goo.gl/LP0oi)

# ruby - RSpec 和 Capybara：测试页面内容的位置

> ID：10152470
> 
> 赞同：1
> 
> 时间：2012-04-14T09:21:49.837
> 
> 标签：ruby, ruby-on-rails-3, rspec, capybara

在使用 RSpec 和 Capybara 进行 Rails 测试中，是否可以测试某个内容在页面上的**位置？**

我有一个页面列出了“待处理”和“已接收”不同部分的订单，我想测试特定订单是否可以从“待处理”移动到页面上的“已接收”部分。

如果我可以测试内容是否在特定的`div`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T11:37:35.457

我想说最简单的方法是将此权利构建到您的选择器中，并断言该元素在正确部分中的存在，而在旧部分中不存在。以下示例假设您将订单 ID 保留在数据属性中：

```
page.should have_selector '#received-orders .order[data-order-id="12345"]'
page.should_not have_selector '#pending-orders .order[data-order-id="12345"]' 
```

# php - codeigniter 加载一个模型，该模型具有带参数的构造函数

> ID：10152471
> 
> 赞同：2
> 
> 时间：2012-04-14T09:21:50.127
> 
> 标签：php, codeigniter

我的模型课：

```
<?php class Permissions extends CI_Model {

    private $userID   = '';
    private $permissions = '';

    function __construct($userID)
    {
        // Call the Model constructor
        parent::__construct();

        $this->userID = $userID;
        ....
    }
    function __construct()
    {.....}
?> 
```

我想用一个参数加载这个模型，显然我做不到。如果没有参数，我可以通过这种方式加载无参数构造函数：

```
$this->load->model('Permissions'); 
```

我的第一个问题：加载带有参数的模型是无意义的吗？第二个：如果可行，我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-18T06:30:55.893

您可以实例化它自己的类，而不是加载它。

$permission = new Permission($param);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T11:03:36.680

你可以看看这个论坛主题：[http ://codeigniter.com/forums/viewthread/115681/](http://codeigniter.com/forums/viewthread/115681/)

但是我不明白为什么要以权限检查的方式将用户标识作为参数提供？猜测你使用会话来保存用户数据，在会话中写入用户 ID 并在模型中使用 $this->session->userdata('user_id') 调用它。

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T11:08:19.870

您可以在模型的功能级别进行自定义。如果您提供为什么要扩展模型，我可以说它是否有意义。如果要创建用户特定规则，最好在控制器上进行。

```
class Shop_m extends CI_Model {

 function getProductPriceInfo($cat,$id) {
        $this->db->where('shop_price.catid', $cat); 
                $this->db->where('shop_price.relid', $id); 
                $this->db->select('optional.title,optional.desc,shop_price.*');
                $this->db->join('optional', 'optional.id = shop_price.relid');
        $q = $this->db->get('shop_price');
        if($q->num_rows() > 0) {
            foreach ($q->result() as $row) {
                $data[] = $row;
            }
        return $data;
        }
    } 
```

# android - 位图 inPurgable 在 android 中的行为

> ID：10152472
> 
> 赞同：2
> 
> 时间：2012-04-14T09:21:54.730
> 
> 标签：android, bitmap

任何人都可以解释该`inPurgable`选项设置为 true 时的工作原理吗？从[文档](http://developer.android.com/reference/android/graphics/BitmapFactory)

> 如果设置为 true，则生成的位图将分配其像素，以便在系统需要回收内存时可以清除它们。在这种情况下，当需要再次访问像素时（例如，绘制位图，调用 getPixels()），它们将被自动重新解码。为了进行重新解码，位图必须能够访问编码数据，方法是共享对输入的引用或复制它。

我对此的解释是，它要么保留对加载位图像素的文件名的引用，要么在某处复制像素。对于前者，如果位图被清除，我是否可以期望 drawBitmap 在我的 onDraw 方法中执行可能很慢的 IO 操作？对于后者，副本是如何制作的，这对内存使用有什么影响？

# asp.net - ASP.NET MVC3 动态路由

> ID：10152473
> 
> 赞同：0
> 
> 时间：2012-04-14T09:22:09.927
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-routing, custom-routes

我在任何地方都找不到这个问题的答案。

我需要创建一个表单，用户可以在其中创建帖子并将网址更改为帖子。

例如，如果默认路由是

```
http://www.domain.com/posts/[the-title-of-the-post] 
```

用户可以将其更改为

```
http://www.domain.com/[modified-title-of-the-post]. 
```

`[modified-title-of-the-post]`可以是用户想要制作的任何东西。这意味着它不再与帖子的标题相关联，不仅如此，而且`/posts/`也消失了。

我想我还应该提到这应该是全局的，这意味着用户应该能够更改网站上其他内容的 url（如上所述），`/topics/`或者`/blog/`

任何帮助将不胜感激，

谢谢， 希瓦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:27:21.597

您可以在 global.asax 中创建两条路线。像这样的东西

```
routes.MapRoute("", "posts/{url}", new { controller = "Home", action = "Posts" });
routes.MapRoute("", "{url}", new { controller = "Home", action = "Posts" }); 
```

他们都指向`HomeController`和动作`Posts`

```
public ActionResult Posts(string url)
{

} 
```

处理您应该考虑扩展[RouteBase](http://msdn.microsoft.com/en-us/library/system.web.routing.routebase.aspx)类的每个 url

应该做这样的事情

```
public class CustomRouting : RouteBase
{
  public override RouteData GetRouteData(HttpContextBase httpContext)
  {
    RouteData result = null;
    string requestUrl = httpContext.Request.AppRelativeCurrentExecutionFilePath;

    //Handle the request
    //Compile the RouteData with your data
    result = new RouteData(this, new MvcRouteHandler());
    result.Values.Add("controller", "MyController");
    result.Values.Add("action", "MyAction");
    result.Values.Add("id", MyId);
    }
  }
  return result;
}

public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
{
  //I only need to handle outbound so here is ok
  return null;
} 
```

}

在您的 global.asax 中注册您的自定义路由处理程序

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.Add(new CustomRouting());

  routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "Home", action = "Index", id = UrlParameter.Optional });
} 
```

# networking - 是否有用于不同协议中所有传入流量的命令行工具？

> ID：10152475
> 
> 赞同：0
> 
> 时间：2012-04-14T09:22:31.047
> 
> 标签：networking

我发现 netcat 通过使用 -l port-number 来监听 TCP 连接非常有用，但我想知道是否有更强大的工具可用于分析所有传入协议，如 RADIUS 客户端请求，所以我可以查看请求是什么由，如果服务器收到请求

netstat 可能是使用 -c 标志的方式，但它甚至不显示带有自定义端口号的 tcp 连接

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:24:44.687

Wireshark 提供命令行工具和 GUI (http://www.wireshark.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:24:54.153

你为什么不使用`netstat`和`grep`输出只过滤你需要的端口？

输出类似于：

```
Proto Recv-Q Send-Q  Local Address          Foreign Address        (state)    
tcp4       0      0  192.168.1.7.63364      64.34.119.101.80       ESTABLISHED
tcp4       0      0  192.168.1.7.63357      64.34.119.13.80        ESTABLISHED 
```

并且通过协议、端口、地址和状态来 grep 结果非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T04:00:05.997

[Bro](http://www.bro-ids.org)是一个（命令行）工具，可以从网络流量中提取大量信息。它与端口无关，例如，可以检测非标准端口上的 HTTP，并具有适用于各种协议的应用程序解析器。连接日志在流粒度上提供了很多有用的信息，包括：

*   时间戳
*   连接五元组（源主机、源端口、目的主机、目的端口、传输协议）
*   应用层协议
*   期间
*   发送的传输层字节（源和目标）
*   连接状态
*   数据包数（源和目标）

有关示例输出，请参[见此答案](https://stackoverflow.com/a/10066658/1170277)。

# algorithm - 这种 DAG 拓扑重构怎么称呼？

> ID：10152476
> 
> 赞同：4
> 
> 时间：2012-04-14T09:22:36.803
> 
> 标签：algorithm, directed-acyclic-graphs, topological-sort

我对直接无环图 (DAG) 很感兴趣，在阅读了 Wikipedia 上的拓扑排序后，我没有发现任何特别提到涉及**层编号**的方法（尽管在绘图中广泛提到了层）。使用这种方法，图形在技术上不是拓扑排序的，但是知道每个节点都包含正确的层（级别）编号，我们总是可以判断一个特定节点是否比另一个节点“更大”。另一方面，只要我们没有有序列表，我们就无法在拓扑上枚举节点（尽管这可以通过比较节点级别的最终常规排序来完成）。

这种方法允许实现任意连接，同时保持关卡信息的正确性。步骤可以是：

*   对于任何新添加的节点（没有任何连接），应用的级别为 1。
*   如果请求两个节点之间的连接（从 m 到 n）并且 n.level > m.level 那么它们只是简单地连接，不需要对其他节点进行级别修复。
*   如果对于请求的连接（从 m 到 n）n.level<=m.level，那么我们将 n.level 更改为 (m.level + 1) 并递归检查 n 的任何依赖关系是否有类似的级别增加（或者如果级别不增加，则不增加在递归步骤上是兼容的）。
*   如果我们保留递归输入节点的列表，那么我们可以检测到尝试循环并执行某种撤消操作（将所有受影响节点的级别返回到以前的值）

对于任何一组已知节点和它们之间的连接，我们只需将所有应用 level=1 的节点添加到它们，并尝试应用它们之间的所有已知连接（忽略和撤消 cicles）。

最终级别信息不仅​​允许在拓扑上比较节点，而且还包含其他有用的信息。例如：

*   每个 level = 1 的节点都没有传入连接（每条路径都从其中一个开始）。所以任何 DAG 枚举都可以从它们开始。
*   最长路径（边数）不能长于（最大层级+1）

我想对于一些人工数据（n 个节点，每个节点（n）连接到节点（n + 1）），这个算法可能非常慢。但是对于我尝试使用的真实数据（维基百科类别 - 800,000 个节点 - 2,000,000 个连接），时间很合适（5-10 分钟），关卡和循环尝试的数量很低（369 个关卡，1000 次循环尝试）

那么这种方法是新的还是众所周知的，但只是没有在维基百科和其他资源中广泛呈现？既然它不是一个排序（技术上），它应该被称为数据重组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:50:49.303

考虑一个由两条“平行”有向路径组成的 DAG，`n`它们共享起始节点和最后一个节点。这里的层编号比拓扑顺序更严格。在拓扑顺序中，您可以将路径 A 的倒数第二个节点放在路径 B 的第二个节点之前，即使其层数更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T11:39:21.810

可能有人之前已经想到了这一点，但由于它的最坏情况是线性的，我很难将你指向一篇描述它的研究文章。该算法解决的问题的名称是“增量拓扑排序”（或动态，也可以删除边）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T15:55:40.980

有一些关于增量维护图中节点的拓扑顺序的论文，以及您描述的算法的变体。

如果图形有`n`节点和`m`边，则`O(m + n)`每次插入边时都会花费时间。`k`论文问插入边缘需要多少时间？琐碎，`O(k * (n + m))`。但实际上你可以显示更好的上限——比如`O(k * sqrt(m + n))`for large enough `k`。

下面的一些链接，还有更多：

[http://igitur-archive.library.uu.nl/math/2007-0725-201647/2005-011.pdf](http://igitur-archive.library.uu.nl/math/2007-0725-201647/2005-011.pdf)

[http://arxiv.org/abs/0802.1059](http://arxiv.org/abs/0802.1059)

[http://www.siam.org/proceedings/soda/2009/SODA09_120_benderm.pdf](http://www.siam.org/proceedings/soda/2009/SODA09_120_benderm.pdf)

# http - 如何与 http.Client 建立长连接？

> ID：10152478
> 
> 赞同：0
> 
> 时间：2012-04-14T09:22:51.473
> 
> 标签：http, go

我尝试将 http 服务器连接为长连接，如下所示：

```
func main() {
    request, err := http.NewRequest("GET", "http://long.connection.org:8080/", nil)
    request.SetBasicAuth("xxx", "oooo")

    http_client := &http.Client{}
    response, _ := http_client.Do(request)

    var buf []byte
    for {
        _, err := response.Body.Read(buf)
        if err == io.EOF { break }
        fmt.Printf("%s", string(buf))
    }
} 
```

但从响应中读取。正文总是空的。而且似乎我不能使用 response.Body 将数据发送到服务器。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:24:39.370

这似乎有效：

```
package main

import (
        "fmt"
        "io"
        "log"
        "net/http"
)

func main() {
        request, err := http.NewRequest("GET", "http://www.example.com/", nil)
        if err != nil {
                log.Fatal(err)
        }

        http_client := &http.Client{}
        response, err := http_client.Do(request)
        if err != nil {
                log.Fatal(err)
        }

        buf := make([]byte, 4096) // any non zero value will do, try '1'.
        for {
                n, err := response.Body.Read(buf)
                if n == 0 && err != nil { // simplified
                        break
                }

                fmt.Printf("%s", buf[:n]) // no need to convert to string here
        }
        fmt.Println()
} 
```

编辑：添加了 NewRequest 的遗忘错误处理。

# sql - SQL 中的地理位置查询结果不一致

> ID：10152480
> 
> 赞同：0
> 
> 时间：2012-04-14T09:23:35.583
> 
> 标签：sql, join, geolocation, between

我编写了一个简单的网络应用程序，可以让你在谷歌地图上标记跳蚤市场的摊位。每个展位都存储在**sqlite3**数据库中，其中包含其地理位置和其他信息。这是 stand 表的 CREATE 语句：

```
CREATE TABLE stands (
id INTEGER PRIMARY_KEY,
name TEXT,
address TEXT,
u REAL,
v REAL,
); 
```

u 和 v 分别是纬度和经度。此外，我有一个城市表，其中存储了每个设有展台的城市的名称和地理范围。这用于让用户在城市之间快速导航。

```
CREATE TABLE cities
(name TEXT PRIMARY_KEY,
u_min REAL,
u_max REAL,
v_min REAL,
v_max REAL); 
```

添加新站时，会在城市表中添加新行，或者如果站位于已知城市中，则仅在需要时更新城市的边界。

以下是一些样品架：

```
592077673|Kierrätystori Rovaniemellä|Urheilukatu 1, 96100 Rovaniemi, Suomi|66.4978306921681|25.7220569153442
1321495145|Kruununhaka|Liisankatu, 00170 Helsinki, Suomi|60.1742596|24.9555782    
571688977|Viikki asukastalo LAVAn edusta|Biologinkatu 5, 00790 Helsinki, Suomi|60.2342312|25.04058
563089951|Hämeentie 156|Hämeentie 156, 00560 Helsinki, Suomi|60.2130467082539|24.9785856067459    
518892420|Joensuu - Ilosaari|Siltakatu 1, 80100 Joensuu, Finland|62.5990455742272|29.7706540507875 
```

和城市：

```
 Rovaniemi|66.4978306921681|66.4978306921681|25.7220569153442|25.7220569153442
Helsinki|60.1577049447137|60.2556221042622|24.9216988767212|25.0662129772156
Järvenpää|60.4513724|60.4513724|25.0819323000001|25.0819323000001
Joensuu|62.5990455742272|62.5990653244875|29.7706540507874|29.7706540507875
Vantaa|60.2731724937748|60.2731724937748|24.9571491285278|24.9571491285278 
```

我遇到的问题是检索每个城市的展位数量。到目前为止，我一直在使用以下查询：

```
SELECT cities.name AS city,
  cities.u_min,
  cities.u_max,
  cities.v_min,
  cities.v_max,
  count(stands.id) AS count
FROM cities
LEFT OUTER JOIN stands
  ON ((stands.u BETWEEN cities.u_min AND cities.u_max)
    AND(stands.v BETWEEN cities.v_min AND cities.v_max))
GROUP BY cities.name; 
```

这将返回：

```
Helsinki|60.1577049447137|60.2556221042622|24.9216988767212|25.0662129772156|9
**Joensuu|62.5990455742272|62.5990653244875|29.7706540507874|29.7706540507875|0**
Järvenpää|60.4513724|60.4513724|25.0819323000001|25.0819323000001|1
Rovaniemi|66.4978306921681|66.4978306921681|25.7220569153442|25.7220569153442|1
Vantaa|60.2731724937748|60.2731724937748|24.9571491285278|24.9571491285278|1 
```

这是不正确的，因为名为 Joensuu 的城市在其边界内确实有 1 个展台：

```
518892420|Joensuu - Ilosaari|Siltakatu 1, 80100 Joensuu, Finland|62.5990455742272|29.7706540507875 
```

但以下查询返回预期的立场：

```
SELECT * FROM stands where u between 62.5990455742272 and 62.5990653244875 and v between 29.7706540507874 and 29.7706540507875; 
```

我真的不明白这里出了什么问题。任何帮助将不胜感激。

顺便说一句，我将此数据库导入 Mysql 并且发生了同样的事情，所以我怀疑这是一个 sqlite3 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:51:55.700

我认为这与浮点精度错误有关。处理此类问题的方法之一是引入一个小数字并将其添加到您的边界以使其更宽一些 - 这消除了精度错误。

一种方法是直接扩大每个查询的边界：

```
SET @e = 0.0000000000001;

SELECT cities.name AS city,
  cities.u_min,
  cities.u_max,
  cities.v_min,
  cities.v_max,
  count(stands.id) AS count
FROM cities
LEFT OUTER JOIN stands
  ON ((stands.u BETWEEN cities.u_min - @e AND cities.u_max + @e)
    AND(stands.v BETWEEN cities.v_min - @e AND cities.v_max + @e))
GROUP BY cities.name; 
```

另一种方法是将扩大的边界存储在城市表中：

```
SET @e = 0.0000000000001;

UPDATE cities
SET cities.u_min = cities.u_min - @e,
  cities.u_max = cities.u_max + @e,
  cities.v_min = cities.v_min - @e,
  cities.v_max = cities.v_max + @e; 
```

PS我不确定变量语法是否适用于SQLite，但如果没有，只需将所有替换`@e`为`0.0000000000001`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:34:57.903

原因是你使用`LEFT JOIN`，所以它包括所有城市，不管表中是否有匹配`stands`。请注意该行的`COUNT`返回`0`方式。

只需使用`INNER JOIN`而不是`LEFT JOIN`. 这将告诉 MySQL 只返回`ON`满足条件的行。

**UPD**：我误解了这个问题，所以这个答案是错误的。我会发布另一个答案。

# lilypond - 在 LaTeX 中包含 Lilypond

> ID：10152486
> 
> 赞同：4
> 
> 时间：2012-04-14T09:24:30.503
> 
> 标签：lilypond

它[在这里](http://lilypond.org/doc/v2.14/Documentation/usage/latex)声明，我必须像这样将 Lilypond 包含到 LaTeX 中：

```
\documentclass[a4paper,10pt]{report}
\usepackage[utf8x]{inputenc}

\begin{document}
\begin{lilypond}
\relative c'' {
\time 4/4

< a e' a >2 
< a e' a >4
< a e' a >8
< a e' a >8 

} 
\end{lilypond}
\end{document} 
```

但这不起作用，因为命令`\begin{lilypond}`没有被识别，所以我最终一无所获。我必须包括任何包裹还是什么？那个教程太牛了。。。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T09:49:32.150

具有 lilipond 环境的 .tex 文件必须使用 编译`lilipond-book`，例如使用命令 `lilypond-book -f latex --psfonts --output OUTPUT TEX_FILE.tex`

这在 lilipond 文档的不同部分进行了解释：http: [//lilypond.org/doc/v2.12/Documentation/user/lilypond-program/Invoking-lilypond_002dbook#Invoking-lilypond_002dbook](http://lilypond.org/doc/v2.12/Documentation/user/lilypond-program/Invoking-lilypond_002dbook#Invoking-lilypond_002dbook)

# objective-c - 未在自定义 NSView 的 initWithtFrame 方法中设置标识符

> ID：10152496
> 
> 赞同：0
> 
> 时间：2012-04-14T09:25:13.090
> 
> 标签：objective-c, macos, cocoa

我已将标识符（在用户界面项标识符下）设置为字符串值，但是当我尝试在 initWithFrame 中将其打印出来时，它为空。当我在 drawRect 中打印它时，它已经设置好了。我猜它还没有从笔尖加载？在什么情况下我可以查看标识符的值，最好是在它进入油漆之前，或者我应该调用一个方法来加载值？

蒂亚

```
- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
       ...
       NSLog(@"ident: %@", [self identifier]); // prints (null) here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:35:38.633

对象已初始化，但标识符未从 nib 加载。改用 awakeFromNib 中的 NSLog ()。

# performance - ARM9 上 Linux 上的慢线程性能

> ID：10152497
> 
> 赞同：1
> 
> 时间：2012-04-14T09:25:17.160
> 
> 标签：performance, embedded, pthreads, arm9

当我编写一个运行 10 分钟的简单应用程序时，它启动 10 个线程（pthreads）一次，每个线程在一个循环中休眠 1 毫秒（不做任何其他事情），CPU 被使用。44%（`top`报告）。它是一个 450 MHz 的 ARM9 CPU，使用 Linux 2.6.37 作为操作系统。没有其他程序在运行，它尝试了不同的内核配置（动态滴答、软/硬 IRQ、高分辨率计时器、...、...、...），不同的优先级（最多 99），但数字保持不变相同。`/usr/bin/time -v`显示约。5'200'000 次自愿上下文切换，大约 在内核空间中花费了 3 分钟。在每个线程中休眠约。5 毫秒，CPU 利用率下降到 ca。IMO 仍然疯狂的 9%（40'500'000 次循环以保护一些寄存器）。clock_nanosleep 用于睡眠（CLOCK_REALTIME/CLOCK_MONOTONIC 没有改变任何东西）。

我知道 ARM9 上的完整上下文切换很昂贵，因为必须清除缓存。但是一个简单的线程切换，或者切换到操作系统不应该是那么昂贵的恕我直言（地址空间保持不变，不需要缓存/TLB 刷新）。这是常见的还是我应该尝试找到内核中的瓶颈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:54:27.383

您正忙着醒来并以 100uS 的间隔重新入睡——10 个线程，1ms，平均为 100uS。请记住，每个 100uS 间隔都有两个上下文切换，因此平均每 50uS 有一个上下文切换，即每秒 20,000 次。

也许这就是您正在寻找的答案？

# iphone - 单击添加按钮在 uitableview 底部添加一个新单元格

> ID：10152498
> 
> 赞同：1
> 
> 时间：2012-04-14T09:25:30.943
> 
> 标签：iphone, uitableview

在我看来，我希望在右上角有一个添加按钮，当我们单击它时，它会提供带有文本字段的警报视图。当我们添加数据并单击 alertview 上的添加按钮时，应使用用户输入的文本创建一个新单元格。

我的代码：

```
-(IBAction)addNewBreed:(id)sender{
    UIAlertView *addAlert=[[UIAlertView alloc]initWithTitle:@"Add New Breed" message:@"\n\n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add",nil];
    UITextField *addTextField=[[UITextField alloc]initWithFrame:CGRectMake(12,45,260,25)];
    [addTextField becomeFirstResponder];
    [addTextField setBackgroundColor:[UIColor whiteColor]];
    addTextField.clearButtonMode=UITextFieldViewModeWhileEditing;
    [addAlert addSubview:addTextField];
    [addAlert show];
    [addAlert release];

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];

if ([buttonTitle isEqualToString:@"Add"]) {

    [treeTable insertRowsAtIndexPaths:[NSArray arrayWithObject:addIndexPath] withRowAnimation:UITableViewRowAnimationBottom];
}
else
        return;
} 
```

请帮助我在底部的表格中添加新单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:06:03.780

您可以使用此方法**插入行**，试试这个

```
[self.tableView insertRowsAtIndexPaths: [NSArray arrayWithObject: indexPath] withRowAnimation:UITableViewRowAnimationLeft]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T11:19:29.847

如果要插入新单元格，`insertRowsAtIndexPath`则必须首先更新表的数据源。此外，此方法应在以下之间调用：

```
[table beginUpdates]; 
```

和

```
[table endUpdates]; 
```

从此：[_](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/insertRowsAtIndexPaths%3awithRowAnimation%3a)

> `beginUpdates`请注意在由and方法定义的动画块中调用此方法时的行为`endUpdates`。UITableView 将任何行或节的插入推迟到它处理了行或节的删除之后。无论插入和删除方法调用的顺序如何，都会发生这种情况。这与在可变数组中插入或删除项目不同，其中操作会影响用于连续插入或删除操作的数组索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T09:33:32.057

在数组或字典中添加新值（无论您使用什么来显示 cell.textlable.text），然后使用 UitableView 的重新加载数据方法。

[MyTableView 重载数据];

# android - Android：将我的 android 应用程序连接到 SQL 服务器的策略或步骤

> ID：10152500
> 
> 赞同：0
> 
> 时间：2012-04-14T09:25:42.233
> 
> 标签：android, sql-server

朋友们

任何人都可以告诉我，将我的 android 应用程序连接到 SQL 服务器的策略或步骤是什么？

我想开发android应用程序，这个应用程序直接连接到Sql server，什么是最好的选择？？？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:57:08.583

您可以使用 Web 服务来提供面向服务的架构 (SOA)。

例如，您可能有一个连接了 PHP/Java/.Net 应用程序的数据库。当移动设备向该应用程序发出 Web 请求时，它会向设备返回数据。

返回的数据可以选择 json 或 xml 等格式。如果涉及移动设备，我个人更喜欢 json，因为 json 的占用空间由于其特性而小于 xml。尽管如此，如果您在响应中需要元数据，那么 xml 可能更有用。

有很多关于这方面的教程和帮助反序列化响应的库（当涉及 Json 时，来自谷歌的 GSON 很好），因此当我之前的其他人之前已经解释过并且可能更好时，我不会重新发明轮子。

最后; 网络服务的使用允许多个平台与您的数据库（以及您提供的其他服务）进行通信，并允许在服务器而不是移动设备上完成任何“繁重的工作”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:08:56.190

从您对 Graham Smith 的回答的评论中，我了解到您更喜欢直接连接到 SQL Server，而不需要显式的 Web 服务或其他通信层。

您必须了解：android 设备通常是*移动*设备，因此通常首选不需要 android 设备与 SQL Server 位于同一网络中的间接连接（包括企业环境中带来的安全隐患）。

回到实际问题：您可以使用 JDBC 从 Android 访问 SQL Server。要么使用 Microsoft 自己的[JDBC Driver for SQL Server](http://msdn.microsoft.com/en-us/sqlserver/aa937724)，要么使用 Open Source [jTDS](http://jtds.sourceforge.net/)。后者似乎解决了一些人似乎在使用 Microsoft 驱动程序时遇到的一些连接问题。

# python - 通道 API 存在未触发

> ID：10152501
> 
> 赞同：36
> 
> 时间：2012-04-14T09:25:47.120
> 
> 标签：python, google-app-engine, channel-api

我正在尝试使用 Channel API 中的 Presence 来处理断开/连接状态。

这是我的一些代码。

**应用程序.yaml**

```
handlers:
- url: /(.*\.(gif|png|jpg|ico|js|css))
  static_files: \1
  upload: (.*\.(gif|png|jpg|ico|js|css))

- url: .*
  script: main.py

inbound_services:
- channel_presence 
```

**主文件**

```
class onConnect(webapp.RequestHandler):
  def post(self):
    for user in users:
      users = User.all().fetch(1000)
      client = client_id = self.request.get('from')
      channel.send_message(user.channel,' connected');

class onDisconnect(webapp.RequestHandler):
  def post(self):
    Mainpage()
    for user in users:
      users = User.all().fetch(1000)
      client = client_id = self.request.get('from')
      channel.send_message(user.channel, ' disconnected');

application = webapp.WSGIApplication(
                                     [('/', MainPage),
                                     ('/_ah/channel/connected/',onConnect),
                                     ('/_ah/channel/disconnected/',onDisconnect),
                                     ('/chat',handleChat)],
                                     debug=True) 
```

Javascript

```
<script>
        openChannel = function(){
            var token = '{{ token }}';
            var channel = new goog.appengine.Channel(token);
            var handler = {
                  'onopen': onOpened,
                  'onmessage': onMessage,
                  'onerror': function() {},
                  'onclose': function() {}
                };
            var socket = channel.open(handler);
            socket.onopen = onOpened;
            socket.onmessage = onMessage;

            var chat = document.getElementById('chatinput');
                chat.onkeyup = function(e){
                    if(e.keyCode == 13){
                        sendChat(this.value);
                        this.value = '';
                    }
                }
        }

        sendMessage = function(path, opt_param) {
            if (opt_param) {
                path += '?' + opt_param;
            }
            var xhr = new XMLHttpRequest();
            xhr.open('POST', path, true);
            xhr.send();
        };

        onOpened = function(){
            console.log('Channel Opened');  
            var chatlog = document.getElementById('chatlog');
            var msg = document.createElement('div');
                msg.innerHTML = 'Channel Opened';
                chatlog.appendChild(msg);
            sendMessage('/chat','m='+'A User Joined.');
        }

        onMessage = function(m){
            console.log('Message Recieved');
            var chatlog = document.getElementById('chatlog');
            var msg = document.createElement('div');
            var d = new Date();
                msg.innerHTML = d.toLocaleTimeString() + ': ' + m.data;
                chatlog.appendChild(msg);
        }

        sendChat = function(msg){
            console.log(msg);
            sendMessage('/chat','m='+msg);
        }

        openChannel();
    </script> 
```

使用此代码，`connnect`并且`disconnect`不会在用户关闭浏览器或其他任何内容时触发。

这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-27T11:46:06.253

是的，路线列表是错误的。放在`('/', MainPage)`路线列表的末尾。来自[webapp2 URI 路由指南](https://webapp-improved.appspot.com/guide/routing.html#simple-routes)：

> 当应用程序收到请求时，它会尝试依次匹配每一个，直到匹配到一个，然后调用相应的处理程序。

# iphone - 网站似乎在除 iphone 之外的所有东西上都很好

> ID：10152505
> 
> 赞同：0
> 
> 时间：2012-04-14T09:26:00.707
> 
> 标签：iphone, web

我正在为一个朋友建立一个网站，除了更多内容外，它即将完成，但现在他告诉我它在他的 iPhone 上看起来不正确。我已经在笔记本电脑上的 Safari、Opera、IE、Chrome 和 Firefox 以及我的 Android 手机和基于网络的 iphone 模拟器上检查过它，一切看起来都很好。我让他检查别人的 iphone，其中一个问题出现了，但另一个问题仍然存在。我的网站非常基本，只有 html 和 css，但我是第一个承认，因为我是新手，所以我的代码可能会更好。

第一个问题是，在标题上方，他的 iphone 显示有最好的描述为 5 块沿顶部均匀分布的红砖。这不会显示在他的队友 iphone 上。

第二个问题是在“产品”页面上，图片下方的右栏文字排列不正确，他的朋友iphone就是这种情况。我不知道该怎么做，因为如果我改变我用来排列东西的填充，它在其他所有浏览器/设备上都不会正确。

我不确定我最好在这里发布什么，该网站的整个代码似乎太多了，但是任何需要帮助回答的东西都让我知道。产品页面的网址是[http://www.doortodoordrinksyork.com/products.html](http://www.doortodoordrinksyork.com/products.html)

就像我说我是新手，所以请保持简单的答案。

提前致谢。

大卫。

PS 希望任何有 iphone 的人告诉我网站如何在上面显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:46:15.040

如果您使用 Mac，您可以使用[XCode](https://developer.apple.com/xcode/)附带的 iOS Simulator 工具在虚拟 iPhone/iPod 中测试您的网站。您甚至可以比较不同版本的内置浏览器，我认为这是导致您伴侣设备之间差异的原因。

通常，精心构建的网站无需修改即可在移动设备上“工作”，但您可能需要研究[媒体查询](http://mediaqueri.es/)，这是一项 CSS 功能，可让您使用不同的规则定位特定的屏幕尺寸。

# regex - 正则表达式末尾的“\2”是什么意思

> ID：10152512
> 
> 赞同：7
> 
> 时间：2012-04-14T09:27:24.303
> 
> 标签：regex, linux, bash

我有以下任务：

一首歌的歌词在一个名为 stairway.txt 的文件中。在此命令之后将打印出以下哪几行：

```
grep -E '(^.{4})(.{2}).*[ ]\2' stairway.txt

(a) Yes, there are two paths you can go by but in the long run

(b) Its just a spring clean for the May queen.

(c) Don't be alarmed now.

(d) If there's a bustle in your hedgerow.

(e) Theres still time to change the road you're on. 
```

不明白`\2`结尾是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-14T09:29:02.237

这是一个反向引用。

来自[http://www.selectorweb.com/grep_tutorial.html](http://www.selectorweb.com/grep_tutorial.html)：

> 反向引用是一个表达式 \n 其中 n 是一个数字。它匹配表达式中第 n 组括号的内容。

此外，答案是（d）：

```
$ grep -E '(^.{4})(.{2}).*[ ]\2' test.txt
If there's a bustle in your hedgerow. 
```

# javascript - Meteor 中的外部依赖项（如引导程序）

> ID：10152515
> 
> 赞同：9
> 
> 时间：2012-04-14T09:27:41.437
> 
> 标签：javascript, meteor

假设我有一个像 Bootstrap 这样的外部依赖项。我想从那里导入一些 LESS，因为这样我可以在我的代码中使用 Bootstrap mixins。

由于 Meteor 已经在编译和连接我的树中的所有 LESS（对吗？），因此仅复制 LESS 目录然后不时手动更新它不是解决方案。事实上，使用默认的 LESS 目录，似乎每个 LESS 源文件都会在输出中出现两次：一次是因为它是在 中导入的`bootstrap.less`，一次是因为文件本身。

有没有办法让流星忽略某些路径？`public/`听起来很近；但我真的不想提供引导程序回购。

另外，这可能会解决 LESS，但是在引导程序中处理 JS 扩展的适当方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:12:27.640

我想出了一个潜在的解决方案。Meteor 想要将所有东西都捆绑在它的目录中......所以让我们把依赖关系放在它的范围之外:)

具有以下目录结构：

```
.
|-- ext
|   `-- bootstrap
`-- myapp
    |-- .meteor
    `-- ... 
```

在我的 LESS 文件中，我执行以下操作：

```
@BOOTSTRAP: "../../ext/bootstrap/less";
@import "@{BOOTSTRAP}/reset.less"; 
```

这仍然不起作用，但我认为这归因于[LESS bug](https://github.com/cloudhead/less.js/issues/592)。

不幸的是，Meteor 产生的错误信息在这里完全没用：

```
[[[[[ ~/Code/igl/igl ]]]]]

Running on: http://localhost:3000/
Errors prevented startup:
Exception while bundling application:
ReferenceError: err is not defined
    at /usr/local/meteor/packages/less/package.js:33:62
    at [object Object].add_file (/usr/local/meteor/app/lib/bundler.js:193:5)
    at /usr/local/meteor/app/lib/bundler.js:97:16
    at Array.forEach (native)
    at Function.<anonymous> (/usr/local/meteor/app/lib/third/underscore.js:76:11)
    at /usr/local/meteor/app/lib/bundler.js:96:11
    at Array.forEach (native)
    at Function.<anonymous> (/usr/local/meteor/app/lib/third/underscore.js:76:11)
    at Object.add_files (/usr/local/meteor/app/lib/bundler.js:95:9)
    at [object Object].on_use (/usr/local/meteor/app/lib/packages.js:136:11)
Your application is crashing. Waiting for file change. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T09:43:27.270

根据我的经验，直接在 Meteor 项目中包含 Bootstrap LESS 文件是个坏主意：

*   它会使你的开发环境变慢很多，因为许多额外的文件需要由 Meteor 转换并由你的浏览器获取。
*   它不满足显式依赖核心引导包的第三方包的依赖关系。如果您添加其中之一，您最终将在项目中获得两个引导程序。
*   包的资源比项目文件更早加载。如果你有一个扩展 bootstrap 的外部包，它的样式将在 bootstrap 之前加载。
*   必须重命名所有导入以结束，`.lessimport`这使得很难跟上更新的引导程序版本。
*   Meteor 加载引导 javascript 文件的顺序（按字母顺序）不正确，导致 Javascript 错误只能通过重命名文件来修复。

我创建了一个 shell 脚本来从预编译的发行版或您自己的 Bootstrap Git 存储库的克隆生成自定义引导 Meteor 包。

您可以在这里找到它以及使用信息： [https ://github.com/wojas/meteor-package-bootstrap](https://github.com/wojas/meteor-package-bootstrap)

# php - 未定义的属性 | 使用两个类时出错

> ID：10152523
> 
> 赞同：0
> 
> 时间：2012-04-14T09:29:31.050
> 
> 标签：php, api, class, curl

我有以下两个课程：

第一类：

```
<?php

/**
 * Wrapper class for the Envato marketplaces API
*/ 

class envato_api_wrapper {

  protected   $api_key;
  protected   $cache_dir = 'cache';
  public      $cache_expires = 2;
  protected   $public_url = 'http://marketplace.envato.com/api/edge/set.json';

  public function __construct($api_key = null) {
    if ( isset($api_key) ) $this->api_key = $api_key; // allow the user to pass the API key upon instantiation
  }

 /**
  * Attach your API key. 
  *
  * @param string $api_key Can be accessed on the marketplaces via My Account 
  * -> My Settings -> API Key
  */
  public function set_api_key($api_key)
  {
     $this->api_key = $api_key;
  }

 /**
  * Retrieve the value of your API KEY, if needed.
  *
  * @return string The requested API Key.
  */
  public function get_api_key()
  {
     if ( ! isset($this->api_key) ) return 'No API Key is set.';
     return $this->api_key;
  }

 /**
  * Sets the cache directory for all API calls. 
  *
  * @param string $cache_dir 
  */
  public function set_cache_dir($cache_dir)
  {
     $this->cache_dir = $cache_dir;
  }

 /**
  * Retrieve the value of your cache directory, if needed.
  *
  * @return string The requested cache directory.
  */
  public function get_cache_dir()
  {
     return $this->cache_dir;
  }   

  /**
   * Available sets => 'vitals', 'earnings-and-sales-by-month', 'statement', 'recent-sales', 'account', 'verify-purchase', 'download-purchase'
   * 
   */ 
  public function private_user_data($user_name, $set, $purchase_code = null)
  {
     if ( ! isset($this->api_key) ) exit('You have not set an api key yet. $class->set_api_key(key)');
     if (! isset($set) ) return 'Missing parameters';

     $url = "http://marketplace.envato.com/api/edge/$user_name/$this->api_key/$set";
     if ( !is_null($purchase_code) ) $url .= ":$purchase_code";
     $url .= '.json';

     $result = $this->fetch($url);

     if ( isset($result->error) ) return 'Username, API Key, or purchase code is invalid.';
     return $result->$set;
  }

 /**
  * Can be used to verify if a person did in fact purchase your item.
  *
  * @param $user_name Author's username.
  * @param $purchase_code - The buyer's purchase code. See Downloads page for 
  * receipt.
  * @return object|bool If purchased, returns an object containing the details.
  */ 
  public function verify_purchase($user_name, $purchase_code)
  {
     $validity = $this->private_user_data($user_name, 'verify-purchase', $purchase_code);
     return isset($validity->buyer) ? $validity : false;
  }

 /**
  * Retrieve details for your most recent sales.
  *
  * @param string $user_name The username attached to your API KEY.
  * @param int $limit The number of sales to return.
  * @return array A list of your recent sales.
  */
  public function recent_sales($user_name, $limit = null)
  {
     $sales = $this->private_user_data($user_name, 'recent-sales');
     return $this->apply_limit($sales, $limit);
  }

 /**
  * Retrieve your account information -- balance, location, name, etc.
  *
  * @param string $user_name The username attached to your API KEY.
  * @return array A list of account information for the user.
  */
  public function account_information($user_name)
  {  
     $private_data = $this->private_user_data($user_name, 'account');
     return json_decode(json_encode($private_data), true);
  }

 /**
  * Grab quick monthly stats - number of sales, income, etc.
  *
  * @param string $user_name The username attached to your API KEY.
  * @param int $limit The number of months to return.
  * @return array A list of sales figures, ordered by month.
  */
  public function earnings_by_month($user_name, $limit = null)
  {
     $earnings = $this->private_user_data($user_name, 'earnings-and-sales-by-month');
     return $this->apply_limit($earnings, $limit);
  }

 /**
  * Generic method, to be used in combination with the marketplace API docs.
  *
  * @param string $user_name The user name of the seller to track.
  * @return array The returned data wrapped in an array.
  */
  public function public_user_data($user_name)
  {
     $url = preg_replace('/set/i', 'user:' . $user_name, $this->public_url);
     return $this->fetch($url, 'user');
  }

 /**
  * Retrieve the details for a specific marketplace item.
  *
  * @param string $item_id The id of the item you need information for. 
  * @return object Details for the given item.
  */
  public function item_details($item_id)
  {
     $url = preg_replace('/set/i', 'item:' . $item_id, $this->public_url);
     return $this->fetch($url, 'item');
  }

 /**
  * Similar to new_files, but focuses on a specific author's files.
  *
  * @param string $user_name The desired username.
  * @param string $marketplace_name The desired marketplace name.
  * @param int $limit The number of files to return.
  * @return array A list of recently added files by one user.
  */
  public function new_files_from_user($user_name, $marketplace_name = 'themeforest', $limit = null)
  {
     $cache_path = "$this->cache_dir/$user_name-$marketplace_name-new_files";

     $url = preg_replace('/set/i', 'new-files-from-user:' . $user_name . ',' . $marketplace_name, $this->public_url);

     return $this->apply_limit( $this->fetch($url, 'new-files-from-user'), $limit );
  }

  /**
  * Display the number of items the author has for sale by marketplace
  *
  * @param string $user_name The desired username.
  */
  public function user_items_by_site($user_name)
  {
     $cache_path = "$this->cache_dir/$user_name";

     $url = preg_replace('/set/i', 'user-items-by-site:' . $user_name, $this->public_url);

     return $this->fetch($url, 'user-items-by-site');
  }

 /**
  * Retrieves general marketplace member information.
  *
  * @param string $user_name The username to query.
  * @return object Contains the requested user information.
  */
  public function user_information($user_name)
  {
     $url = preg_replace('/set/i', 'user:' . $user_name, $this->public_url);
     return $this->fetch($url, 'user');
  }

  /*
  * Either fetches the desired data from the API and caches it, or fetches the cached version
  *
  * @param string $url The url to the API call
  * @param string $set (optional) The name of the set to retrieve. 
  */
  protected function fetch($url, $set = null) 
  {
     // Use the API url to generate the cache file name. 
     // So: http://marketplace.envato.com/api/edge/collection:739793.json
     // Becomes: collection-739793.json
     $cache_path = $this->cache_dir . '/' . str_replace(':', '-', substr(strrchr($url, '/'), 1));

     if ( $this->has_expired($cache_path) ) {
        // get fresh copy
        $data = $this->curl($url);

        if ($data) {
           $data = isset($set) ? $data->{$set} : $data; // if a set is needed, update
        } else exit('Could not retrieve data.');

        $this->cache_it($cache_path, $data);

        return $data;
     } else {
        // if available in cache, use that
        return json_decode(file_get_contents($cache_path));
     }
  }

 /**
  * Filters returned result, according to the supplied $limit.
  *
  * @param string $orig_arr The original array to work on.
  * @param int $limit Specifies the number of array items in the result.
  * @return array A new array with a count equal to the passed $limit.
  */
  public function apply_limit($orig_arr, $limit)
  {
     if ( !is_int($limit) ) return $orig_arr;

     // Make sure that there are enough items to filter through... 
     if ( $limit > count($orig_arr) ) $limit = count($orig_arr);

     $new_arr = array();
     for ( $i = 0; $i <= $limit - 1; $i++ ) {
        $new_arr[] = $orig_arr[$i];
     }
     return $new_arr;
  }

 /**
  * General purpose function to query the marketplace API.
  *
  * @param string $url The url to access, via curl.
  * @return object The results of the curl request.
  */
  protected function curl($url) 
  {
     if ( empty($url) ) return false;

     $ch = curl_init($url);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

     $data = curl_exec($ch);
     curl_close($ch);

     $data = json_decode($data);

     return $data; // string or null
  }

  /*
  * Caches the results request to keep from hammering the API
  *
  * @param string $cache_path - A path to the cache file
  * @param string $data - The results from the API call - should be encoded
  */
  protected function cache_it($cache_path, $data)
  {
     if ( !isset($data) ) return;
     !file_exists($this->cache_dir) && mkdir($this->cache_dir);
     file_put_contents( $cache_path, json_encode($data) );

     return $cache_path;
  }

  /*
  * Determines whether the provided file has expired yet 
  *
  * @param string $cache_path The path to the cached file
  * @param string $expires - In hours, how long the file should cache for.
  */
  protected function has_expired($cache_path, $expires = null) 
  {
     if ( !isset($expires) ) $expires = $this->cache_expires;

     if ( file_exists($cache_path) ) {
        return time() - $expires * 60 * 60 > filemtime($cache_path);
     }

     return true;
  }

  /*
  * Helper function that deletes all of the files in your cache directory.
  */
  public function clear_cache(){
     array_map('unlink', glob("$this->cache_dir/*"));
   }
} 
```

二级：

```
<?php

/**
* Operation Class for Envato API Wrapper
*/

class envato_api_class {

    protected   $api_key;
    protected   $username;
    public      $envato_api_wrapper;
    public      $path_to_envato_api_wrapper;

    public function __construct($api_key = null, $username = null) {
        if ( isset($api_key) ) {
            $this->api_key = $api_key;
        } elseif ( isset($username) ) {
            $this->username = $username;
        }
        $this->path_to_envato_api_wrapper = 'envato_api_wrapper.php';
        require($this->path_to_envato_api_wrapper);
        $this->envato_api_wrapper = new envato_api_wrapper($api_key);
    }

    public function get_all_items_by_site() {
        $items_by_marketplace = $this->envato_api_wrapper->user_items_by_site($this->username);
        $marketplaces = array();
        foreach ($items_by_marketplace as $key) {
            $marketplaces[] = array(
                'Marketplace'  => $key->site,
                'Items'        => $key->items
            );
        }
        foreach ($marketplaces as $key) {
            $items[$key['Marketplace']] = $this->envato_api_wrapper->new_files_from_user($this->username, $key['Marketplace']);
        }
        return json_decode(json_encode($items), true);
    }

    public function get_all_items() {
        $items_by_marketplace = $this->envato_api_wrapper->user_items_by_site($this->username);
        $marketplaces = array();
        $items = array();
        $item = array();
        foreach ($items_by_marketplace as $key) {
            $marketplaces[] = array(
                'Marketplace'  => $key->site,
                'Items'        => $key->items
            );
        }
        foreach ($marketplaces as $key) {
            $items[$key['Marketplace']] = $this->envato_api_wrapper->new_files_from_user($this->username, $key['Marketplace']);
        }
        foreach ($items as $main_key) {
            foreach ($main_key as $secondary_key) {
                $item[] = array(
                    'ID'        => $secondary_key->id,
                    'Item'      => $secondary_key->item,
                    'URL'       => $secondary_key->url,
                    'User'      => $secondary_key->user,
                    'Thumb'     => $secondary_key->thumbnail,
                    'Sales'     => $secondary_key->sales,
                    'Rating'    => $secondary_key->rating,
                    'Cost'      => $secondary_key->cost,
                    'Uploaded'  => $secondary_key->uploaded_on,
                    'Tags'      => $secondary_key->tags,
                    'Category'  => $secondary_key->category,
                    'Preview'   => $secondary_key->live_preview_url
                );
            }
        }
        return $item;
    }

}

?> 
```

我正在尝试在另一个文件中执行以下代码，该文件位于类所在的三个级别之上：

```
<?php

                require 'assets/class/envato/envato_api_class.php';

                $api_key = 'some_key_here';

                $username = 'some_username_here';

                $envato = new envato_api_class($api_key, $username);

                $items = $envato->get_all_items();

                function rating($cluster) {
                    for ($i = 1; $i <= $cluster; $i++) {
                        echo '<img src="assets/gfx/filled-star.png" alt="Rating" />';
                    }
                    $empty = 5 - $cluster;
                    if ($empty > 0) {
                        for ($i = 0; $i < $empty; $i++) {
                            echo '<img src="assets/gfx/empty-star.png" alt="Rating" />';
                        }
                    }
                }

                // Adding Rows instead of altogether...
                $halfway = floor(count($items)/2);
                $count=0;

                echo '<div class="item-row">';

                foreach ($items as $key) {

                    // Check if we can add the second row
                    if($count==$halfway){
                        echo '</div><div class="item-row">';
                    }
                    $count++;

                    echo '<div class="product id-'.$key['ID'].'">';
                        echo '<div class="description">';
                            echo '<div class="thumb">';
                                echo '<i class="icon"><img src="'.$key['Thumb'].'" alt="Thumb"/><span class="preview" data-image-link="'.$key['Preview'].'"><img src="assets/gfx/zoom-icon.png" alt="Zoom"/></span></i>';
                            echo '</div>';
                            echo '<div class="info">';
                                echo '<div class="sales">';
                                    echo '<div class="icon">';
                                        echo '<img src="assets/gfx/sales-icon.png" alt="Sales Icon"/>';
                                    echo '</div>';
                                    echo '<div class="text">';
                                        echo '<p>'.$key['Sales'].'</p>';
                                    echo '</div>';
                                echo '</div>';
                                echo '<div class="rating">';
                                    rating($key['Rating']);
                                echo '</div>';
                            echo '</div>';
                        echo '</div>';

                        echo '<div class="purchase">';
                            echo '<div class="info">';
                                echo '<i class="icon"><span class="tooltip">$ '.$key['Cost'].'</span></i>';
                            echo '</div>';
                            echo '<div class="proceed">';
                                echo '<a class="button" href="'.$key['URL'].'?ref='.$username.'">Purchase</a>';
                            echo '</div>';
                        echo '</div>';
                    echo '</div>';
                }

                echo '</div>'; // End Item Row
            ?> 
```

但是在 localhost 上进行测试时，出现以下错误：

```
Notice: Undefined property: stdClass::$user-items-by-site in C:\xampp\htdocs\Envato\assets\class\envato\envato_api_wrapper.php on line 233 
```

有人能告诉我为什么会出现这个错误吗？我在那里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:43:53.093

由于这一行（198），您会收到该错误：

```
return $this->fetch($url, 'user-items-by-site'); 
```

结合第 233 行：

```
$data = isset($set) ? $data->{$set} : $data; // if a set is needed, update 
```

您显然正在尝试访问不存在的成员。

因为数据来自远程源，然后被解析为 JSON，我们可能无能为力。

# java - 在具有内存限制的未排序输入中查找缺失的数字

> ID：10152525
> 
> 赞同：0
> 
> 时间：2012-04-14T09:30:00.100
> 
> 标签：java, algorithm, search, binary-search

我正在阅读有关从 40 亿个 32 位整数系列中查找缺失数字的问题`Programming Pearls`，但无法完全找到解决方案。

> 给定一个包含最多 40 亿个随机顺序的 32 位整数的顺序文件，找到一个不在文件中的 32 位整数。
> 约束：几百字节的主内存，但在磁盘上大量使用外部临时文件

所描述的解决方案是一个过程，我们使用高位分隔范围内的数字（即在第一遍中，我们将具有前导`0`位的那些写入一个文件，将具有前导位的那些写入另一个文件`1`。我们继续使用第二个位等。 ) 并将包含小于该范围内一半数字的一半用作新搜索范围。

[我用谷歌搜索并在SO](https://stackoverflow.com/questions/1642474/find-a-missing-32bit-integer-among-a-unsorted-array-containing-at-most-4-billion)中找到了一个类似的帖子，它并没有完全回答我的问题，即**如何找到*确切的*数字**（我不明白二进制搜索如何适合单独的范围）。
@Damien_The_Unbeliever 的答案似乎是最相关的，但从我的角度来看，我认为按照这个过程我们最终会得到 2 个文件：一个范围内有 2 个数字的文件和一个有 1 个数字的文件。
通过将一个文件中的（一个）数字与其他文件中最大的数字相减，我们可以得到一个缺失的数字（不需要位掩码，我不太确定我们是否真的可以应用位掩码，因为范围在任何时候都是未知的）。

我错了吗？有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:07:57.030

您无需复制数据本身或将任何内容写入磁盘；只需计算数据的某些分区的成员即可识别开口。在传递次数和内存之间进行权衡（更多的内存允许更多的计数，更小的分区）。

这是8遍的解决方案。我们将一次使用 4 位对数据进行分区。2^4 = 16 个可能的值，因此我们需要 64 个字节来存储 16 个分区中的每个分区的计数。所以每个 4 位半字节值都有一个相关的计数。

通过数据，增加与数字前四位中的半字节匹配的相关计数。如果分区已满，则其计数将为 2^28。选择一个未满的半字节——这将是你结果的第一个半字节。

将您的计数归零并再次通过，忽略与第一个半字节不匹配的数字并增加与该数字中的第二个半字节相关的计数。一个完整的第二个半字节将具有 2^24 的值。挑一个没满的。

以这种方式进行，直到你有所有 8 个半字节，并且在 O(N) 中有你的答案。

如果您一次只检查一位，~~这将是一个~~需要 32 遍的二进制搜索。（编辑：不是真正的二分搜索，因为您仍然需要读取您正在跳过的值。这就是为什么它是 O(N)。请参阅下面的编辑。）如果您有 KB 的内存用于计数，您可以这样做4次通过；使用 256 KB，您可以在 2 内完成 --- 实际上是 128 KB，因为您可以使用短整数进行计数。在这里，我们被限制在几百个字节 --- 可能是 6 位/6 次传递/256 字节？

编辑： Li-aung Yip 的解决方案可以更好地扩展，显然它可以修改为一次通过不止一位进行分区。如果写入比读取慢，那么最好的解决方案可能是这个只读答案和 Li-aung Yip 基于磁盘的答案之间的混合。

如上所述计算半字节，然后在计算第二组半字节时，根据第二半字节仅将匹配第一个半字节的数字（或可能只是它们的最后 28 位）写入 16 个文件。

选择第二个半字节并读取它以获取第三个半字节的计数，仅写入与第二个半字节匹配的数字，等等。如果文件接近容量，如果数字分布相当均匀，或者如果你选择最少满每次半字节，您必须写入不超过文件大小的 6.66% (1/16+1/16^2...)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T10:07:25.647

在将数字重复二进制分区为越来越小的文件后，您将得到：

*   一堆包含两个数字的文件，它们仅在最后一个有效位上有所不同
*   一个文件，其中只有一个数字。

通过翻转文件中数字的最后一位来获取丢失的数字。

以从 0x00 到 0x07 的数字为例，缺少 0x04：

```
000
001

010
011

... (missing)
101

110
111 
```

取`101`，翻转最低有效位，然后得到`100`，这是缺少的`0x04`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T00:02:13.030

使用 32 位整数可以表示 40 亿个整数。将数字与自身进行 XOR 是在汇编代码中将寄存器归零的标准技巧。如果您保证只有一个数字丢失，那么整数的按位异或就可以解决问题，这是一种 O(N) 解决方案，只需要一个额外的 32 位整数空间。考虑一个简单的例子，一个 3 位数字，因此数字 0-7 可表示，其中一个缺失。假设 6 (110) 缺失 缺失 = n1 XOR n2 XOR n3 XOR .. XOR n7。= 000 异或 001 异或 010 异或 011 异或 100 异或 101 异或 111

如果问题是找到 1 到 100 之间的缺失数字，您需要开始我对必须排除的元素进行异或运算。通过屏蔽数字中的位，可以使用 AND 从 32 位整数范围下降到更小的范围。

# ios - 苹果自己的 ASLR 实现是如何工作的？

> ID：10152527
> 
> 赞同：7
> 
> 时间：2012-04-14T09:30:07.213
> 
> 标签：ios, linux, memory, aslr

根据ASLR（Address Space Layout Randomization），它在每次进程启动时提供随机堆栈和堆分配以及页面加载，并随机化放置对象在给定进程的虚拟空间中的地址。

但是在我在ios上运行的应用程序中，我创建了一个名为ObjectA的对象，经过几次重新加载进程后，我发现ObjectA的地址都是一样的，没有随机化。

苹果自己的 ASLR 实现是如何工作的？为什么ObjectA的地址都是一样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T13:55:31.427

“几次重新加载”是什么意思？您应该明确退出应用程序，因为您可能会重新打开同一个进程的多任务处理。

例如。这是我打印出 UIViewController 实例地址的应用程序之一，您可以看到每次执行时对象的地址都不同。

```
First run: <DCViewController: 0x13d4a0>
Second run: <DCViewController: 0x2880f0>
Third run: <DCViewController: 0x2a2050> 
```

（我不认为是这种情况，但在 XCode 中有一个选项可以在“构建设置”下启用 PIE（位置独立可执行文件），它被称为“不要创建位置独立可执行文件”，您可以轻松找到它，但输入“pie " 在搜索框中。此选项应设置为否）。

编辑：

此外，如果部署目标 >= 4.3，Xcode 只会生成 PIE 二进制文件

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:43:29.240

为了完整起见，回答这个问题的人是[Apple iOS 4 安全评估](http://www.trailofbits.com/resources/ios4_security_evaluation_paper.pdf)中的 Dino Zovi 。如果有人在 Dino 之前发表过文章，我深表歉意（我不知道你的作品或你是谁）。

Zovi 早在 Apple 发布[iOS Security](http://images.apple.com/ipad/business/docs/iOS_Security_May12.pdf)之前就发布了他的东西。迪诺的作品还是比较完整的。

# windows-phone-7 - Windows Phone 中出现此异常的原因是什么

> ID：10152528
> 
> 赞同：1
> 
> 时间：2012-04-14T09:30:25.760
> 
> 标签：windows-phone-7, exception

我的 Windows Phone 应用程序会在没有任何警告的情况下退出，这有点奇怪，大多数情况下它工作正常。

然后我跟踪Application_UnhandledException，发现异常消息是：

```
[ExceptionMessage]:[NullReferenceException]
[StackTrace]:[
   at wpapp.MainPage.<DispatcherLoad>b__1(Object sender, EventArgs e)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName)
] 
```

我没有详细的信息来找出异常的原因。有没有人遇到过这个异常并得到了解决方案？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:48:10.347

从外观上看，您的 MainPage 中很可能有一个 DispatcherLoad 方法，并且您在该方法中调用了一个 lambda 函数。就像是：

```
 private void DispatcherLoad()
    {
        this.Dispatcher.BeginInvoke(() => Console.WriteLine("hello world;"));
    } 
```

错误发生在 lambda 中（在我的示例中：`Console.WriteLine("hello world;")`部件）。所以现在你只需要找到正确的 lambda，并找出你的代码崩溃的原因。

给定“object sender, EventArgs e”参数，它可能是一个事件处理程序。您是否将 lambda 分配给 DispatcherLoad 函数中某处的事件处理程序？例如：

```
 private void DispatcherLoad()
    {
        this.Button.Click += (sender, e) => Console.WriteLine("hello world;");
    } 
```

注意：如果您的方法中有许多 lambda，并且您无法确定哪个正在崩溃，您可以尝试使用 Reflector (http://www.reflector.net/) 打开您的程序集。它会反编译你的 dll，然后你可以看到哪个 lambda 被称为“<DispatcherLoad>b__1”。

# javascript - Knockout.js 如何从绑定中构建字符串

> ID：10152529
> 
> 赞同：0
> 
> 时间：2012-04-14T09:30:41.793
> 
> 标签：javascript, knockout.js

我正在使用淘汰赛绑定创建链接列表：

Javascript 和视图模型如下所示：

```
$(function () {
   var adminViewModel = function()
   {
       var self = this;
       self.leftItems = ko.observable([ { Name: "Item1", Id: 0 }]);
       self.getChildren = function (id, list) {
           var url ="@Url.Content("~/api/Test/GetChildren/")" + id;
           $.getJSON(url, function (data) {
              list(data);
           });
        };
    }
    var Admin3App = window.Admin3App = window.Admin3App || {};

    Admin3App.viewModel = new adminViewModel();
    ko.applyBindings(Admin3App.viewModel);

    function getLeftChildren(id)
    {
        Admin3App.viewModel.getChildren(id, Admin3App.viewModel.leftItems);
    }
    getLeftChildren(0);

} 
```

（编辑： init`ko.observable`缺少一个 Id （即使这没有导致错误，添加它）

这是如何工作的，视图模型将加载一堆没有父项（id 0）的项目。为了简单起见，我只包括了左侧版本。但是该页面的左侧和右侧都有一个项目列表，因此每个项目都有一个功能。

左侧项目被填充以查看模型左侧项目并显示如下。但是每个项目都是一个链接，一旦通过 javascript 单击将根据父 ID 刷新项目。（很像在资源管理器中浏览文件夹查看器）。

但我不知道如何在淘汰赛中声明绑定以建立 url。我知道这可能非常容易，我只是想念它。

这是我尝试过的html

```
<div class="leftView">
    <div data-bind="foreach: leftItems">
        <a data-bind="text: Name, attr : { href:'javascript:getLeftChildren(' + Id + ')' }"></a><br />
    </div>
</div> 
```

（编辑：错过了一个单引号，但还是得到了同样的错误）但我不断收到一个绑定错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T12:21:57.307

有几件事：

1) leftItems 理想情况下应该是一个 observableArray

2) 您推入 leftItems 的初始对象没有 Id 属性

这是一个 JSfiddle，它纠正了一些事情并演示了加载一组初始数据，然后再次调用以加载不同的数据。我还在 viewModel 中移动了外部 JavaScript 调用，并切换到使用单击处理程序来传递刷新数据（请注意，单击绑定会自动将数据项作为第一个参数发送到事件处理程序中，因此您可以访问创建 URL 所需的 id）。

[http://jsfiddle.net/jearles/xTHFg/](http://jsfiddle.net/jearles/xTHFg/)

# forms - 编辑时在对象上设置相关实体 会覆盖之前的相关实体

> ID：10152535
> 
> 赞同：0
> 
> 时间：2012-04-14T09:32:25.120
> 
> 标签：forms, symfony, entity-relationship

不久前，Ryan Weaver 在 Stack 上向我解释了如何通过将一种表单类型嵌入到另一种表单中来使用我的表单中的关系。为了防止重复，请花一点时间在这里阅读我最初的问题上下文： [Symfony2 form where the data objects does not match what needs to be added](https://stackoverflow.com/questions/7648117/symfony2-form-where-the-data-objects-doesnt-match-exactly-what-needs-to-be-fill)

该表格在注册新机器时效果很好。用户输入一个监视器序列号，一切顺利。但是，当通过更改监视器序列号来编辑现有机器时（即用户已将他的监视器替换为另一个并通过给我新的序列号让我知道），会发生一些奇怪的事情。

机器正确链接到新监视器，这很好。但不知何故，以前的监视器发现它的序列号值被“新序列号”覆盖。就像用户正在编辑 Monitor 对象一样，这不是想法。

我想这发生在执行 '$form->bindRequest($this->getRequest());' 时，Machine 对象随后被刷新。但它应该只与新的监视器一起刷新，因为它是关系，而不是对旧监视器做任何事情。

有谁知道我可以做些什么来防止这种情况发生，或者我可能做错了什么？该代码是 Ryan 在链接帖子中告诉我的内容的精确复制品。

欢呼和感谢，

迪特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:56:14.290

基本上，你想调用 $em->refresh($originalMonitor); 当你知道你有一台新显示器时。这将重新加载原始监视器的数据，正如您推测的那样，在调用 bindRequest 时正在修改这些数据。

# android - Afreechart 的问题 - LineChart 水平滚动 - Android

> ID：10152537
> 
> 赞同：2
> 
> 时间：2012-04-14T09:32:33.303
> 
> 标签：android, jfreechart

我用 Afreechart 库创建了折线图。我有 3 个类别，有 20 个值。我在线性布局中添加了图形...问题是图形在一个视图中显示所有值，并且值之间的边距很小。我想启用水平滚动，因为它具有垂直滚动。

![在此处输入图像描述](../Images/d37b18bfde52e1660ada6cf2b28f370c.png)

# c# - Protobuf-net 序列化/反序列化

> ID：10152539
> 
> 赞同：10
> 
> 时间：2012-04-14T09:33:01.727
> 
> 标签：c#, serialization, bytearray, protocol-buffers, protobuf-net

我检查了但似乎无法看到如何直接将一个类序列化为一个字节数组，然后使用 Marc Gravell 的 protobuf-net 实现从一个字节数组反序列化。

编辑：我更改了问题并提供了代码，因为如何序列化为 byte[] 而无需通过流的原始问题无疑是微不足道的。我很抱歉。

更新的问题：有没有办法不必处理泛型，而是在通过构造函数时通过反射推断属性“MessageBody”的类型？我假设我不能序列化对象类型，对吗？当前的解决方案看起来非常繁琐，因为每次实例化一个新消息时，我都需要传入 MessageBody 的类型。有没有更时尚的解决方案？

我想出了以下内容：

```
class Program
{
    static void Main(string[] args)
    {
        Message<string> msg = new Message<string>("Producer", "Consumer", "Test Message");

        byte[] byteArray = msg.Serialize();
        Message<string> message = Message<string>.Deserialize(byteArray);

        Console.WriteLine("Output");
        Console.WriteLine(message.From);
        Console.WriteLine(message.To);
        Console.WriteLine(message.MessageBody);

        Console.ReadLine();

    }
}

[ProtoContract]
public class Message<T>
{
    [ProtoMember(1)]
    public string From { get; private set; }
    [ProtoMember(2)]
    public string To { get; private set; }
    [ProtoMember(3)]
    public T MessageBody { get; private set; }

    public Message()
    {

    }

    public Message(string from, string to, T messageBody)
    {
        this.From = from;
        this.To = to;
        this.MessageBody = messageBody;
    }

    public byte[] Serialize()
    {
        byte[] msgOut;

        using (var stream = new MemoryStream())
        {
            Serializer.Serialize(stream, this);
            msgOut = stream.GetBuffer();
        }

        return msgOut;
    }

    public static Message<T> Deserialize(byte[] message)
    {
        Message<T> msgOut;

        using (var stream = new MemoryStream(message))
        {
            msgOut = Serializer.Deserialize<Message<T>>(stream);
        }

        return msgOut;
    }   
} 
```

我喜欢做的事情是：

Message newMsg = new Message("Producer", "Consumer", Foo); byte[] byteArray = newMsg.Serialize();

和消息 msg = Message.Deserialize(byteArray);

（其中 Deserialize 是一个静态方法，它总是反序列化为 Message 类型的对象，并且只需要知道将消息体反序列化为什么类型）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T13:06:59.047

这里有几个不同的问题，所以我会回答我能看到的：如果我错过了什么，请告诉我。

首先，如前所述，MemoryStream 是获取 byte[] 的最常见方式。这与大多数序列化程序一致——例如，XmlSerializer、BinaryFormatter 和 DataContractSerializer*也*没有“作为 byte[] 重载”，但会接受 MemoryStream。

泛型：你不需要使用泛型；v1 有 Serializer.NonGeneric，它把它从你身上包装了。在 v2 中，“核心”是非泛型的，可以通过 RuntimeTypeModel.Default 访问；当然 Serializer 和 Serializer.NonGeneric 继续工作。

对于必须包含类型的问题：是的，protobuf 规范假设接收者知道他们正在接受什么类型的数据。这里一个简单的选择是使用一个简单的包装对象作为“根”对象，具有多个类型的数据属性（其中只有一个是非空的）。另一种选择可能来自通过 ProtoInclude 的内置继承支持（注意：作为实现细节，这两种方法是相同的）。

在您的具体示例中，也许考虑：

```
[ProtoContract]
[ProtoInclude(1, typeof(Message<Foo>))]
.... More as needed
[ProtoInclude(8, typeof(Message<Bar>))]
public abstract class Message
{   }
[ProtoContract]
public class Message<T> : Message
{
    ...
} 
```

然后只需序列化`<Message>`- API 将自动创建正确的类型。

在最近的版本中，还有一个**DynamicType**选项，其中包含您的类型数据，例如：

```
[ProtoContract]
public class MyRoot {
    [ProtoMember(1, DynamicType=true)]
    public object Value { get; set; }
} 
```

这适用于任何持有契约类型实例的值（但不适用于原语，理想情况下不涉及继承）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-28T20:56:24.703

OP 发布的代码对我来说不太适用，以下是稍微适应一下 Marc Gravell 的建议。需要从 Message 继承以防止“不允许循环继承”，并且正如 GetBuffer 下面的代码注释中所述，它也没有成功。

希望它对其他人有帮助，我花了几个小时才让它全部工作......

```
 [ProtoContract]
      public abstract class Message
      {
        public byte[] Serialize()
        {
          byte[] result;
          using (var stream = new MemoryStream())
          {
            Serializer.Serialize(stream, this);
            result = stream.ToArray(); //GetBuffer was giving me a Protobuf.ProtoException of "Invalid field in source data: 0" when deserializing
          }
          return result;
        }
      }

      [ProtoContract]
      public class Message : Message
      {
        [ProtoMember(1)]
        public string From { get; private set; }
        [ProtoMember(2)]
        public string To { get; private set; }
        [ProtoMember(3)]
        public T MessageBody { get; private set; }

        public Message()
        { }

        public Message(string from, string to, T messageBody)
        {
          this.From = from;
          this.To = to;
          this.MessageBody = messageBody;
        }

        public static Message Deserialize(byte[] message)
        {
          Message result;
          using (var stream = new MemoryStream(message))
          {
            result = Serializer.Deserialize>(stream);
          }
          return result;
        }
      } 
```

# java - JBoss AS 7：如何独立部署 EJB 和依赖 WAR？

> ID：10152546
> 
> 赞同：2
> 
> 时间：2012-04-14T09:34:16.813
> 
> 标签：java, ejb, classpath, ejb-3.0, jboss7.x

我有一个带有一个 EJB ( `mwf_ejb.jar`) 和一个 WAR ( `mwf_web.war`) 的应用程序。如果我将它们打包在同一个 EAR 中，一切正常。有没有办法先部署 EJB，然后部署 WAR ？

如果我尝试一下，我的 EJB JAR 部署得很好，但是当我部署我的 WAR 时，我收到以下错误（在 JBoss AS 7.1.1 中）：

```
MSC00001: Failed to start service jboss.deployment.unit."mwf_web.war".STRUCTURE:           org.jboss.msc.service.StartException in service jboss.deployment.unit."mwf_web.war".STRUCTURE: Failed to process phase STRUCTURE of deployment "mwf_web.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31]
Caused by: java.lang.IllegalArgumentException: Given parent is not an ancestor of this virtual file
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:116)
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:122)
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:122)
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:122)
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:122)
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:122)
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:122)
    at org.jboss.vfs.VirtualFile.getPathNameRelativeTo(VirtualFile.java:110)
    at org.jboss.as.server.deployment.module.ManifestClassPathProcessor.createAdditionalModule(ManifestClassPathProcessor.java:193) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.module.ManifestClassPathProcessor.handlingExistingClassPathEntry(ManifestClassPathProcessor.java:185) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.module.ManifestClassPathProcessor.deploy(ManifestClassPathProcessor.java:160) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more 
```

在 META-INF/MANIFEST.MF 中，我添加了一个“Class-Path”语句，以标准方式定义依赖关系：

```
Manifest-Version: 1.0
Dependencies: org.apache.log4j
Class-Path: mwf_ejb.jar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:43:11.553

我终于设法使它工作，这个**MANIFEST.MF**文件：

```
Manifest-Version: 1.0
Dependencies: org.apache.log4j, deployment.mwf_ejb.jar 
```

**另外，在我的@EJB**注释中添加了一个查找属性（原来是空白的：@EJB）：

```
@EJB(lookup="java:global/mwf_ejb/UserManager") 
```

但是，我认为`deployment.`前缀对于 JBoss 是可以的，但对于其他应用程序服务器则不行。

# jquery - 使用 jQuery 隐藏元素 - 让其他元素滑动到新位置？

> ID：10152552
> 
> 赞同：0
> 
> 时间：2012-04-14T09:35:54.190
> 
> 标签：jquery, jquery-plugins

我有一个不同类别的项目网格，以及一些可以禁用某些类别的复选框。现在它们淡出，然后其他元素“跳”到它们的新位置。有没有插件可以让它们以某种方式滑动？

```
 $(document).ready(function() {
$('#hidefoo').click(function() {
    $('.foo').fadeToggle("fast");
});
});

<div class="griditem foo"></div>
<div class="griditem bar"></div>
<div class="griditem foo"></div>
<div class="griditem bar"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:49:17.493

那[http://jsfiddle.net/zUnHc/](http://jsfiddle.net/zUnHc/)怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:45:36.643

像这样的东西：

```
$('.foo').animate({height:0}); 
```

# android - 安卓提醒应用

> ID：10152553
> 
> 赞同：0
> 
> 时间：2012-04-14T09:36:04.273
> 
> 标签：android, android-intent

如何使用 datepicker 和 timepicker 从 android 创建提醒应用程序？

我在不使用 datpicker 的情况下创建了一个示例应用程序。但我需要使用 datpicker 和 timpicker 来了解它

```
Calendar cal = Calendar.getInstance();       //for using this you need to import java.util.Calendar;

    // add minutes to the calendar object
    cal.set(Calendar.MONTH, 3);
    cal.set(Calendar.YEAR, 2012);               
    cal.set(Calendar.DAY_OF_MONTH, 4);
    cal.set(Calendar.HOUR_OF_DAY, 12);
    cal.set(Calendar.MINUTE, 43);

    Intent alarmintent = new Intent(getApplicationContext(), AlarmReceiver.class);
    alarmintent.putExtra("title","Title of our Notification");
    alarmintent.putExtra("note","Description of our  Notification");
    PendingIntent sender = PendingIntent.getBroadcast(getApplicationContext(), HELLO_ID,
            alarmintent,PendingIntent.FLAG_UPDATE_CURRENT|  Intent.FILL_IN_DATA);

    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:02:27.830

只需拖放小部件日期选择器和时间选择器即可使对象像

```
DatePicker dt=(DatePicker)findViewById(R.id.yourid); 
```

现在您可以使用 dt 来获取日期、月份和年份

```
dt.getMonth();
dt.getYear();
dt.getDay(); 
```

这就是您可以类似地使用日期选择器时间选择器的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:54:51.217

您可以将此演示用于**[datepicker](http://developer.android.com/resources/tutorials/views/hello-datepicker.html)**并将其用于[timepicker](http://developer.android.com/resources/tutorials/views/hello-timepicker.html)以允许用户选择日期和时间并将它们存储在变量中，而不是将静态数字设置为存储变量中的日历集值。

其余代码将保持不变。

如果你想使用任何花哨的日期和时间选择器，只需转到这个开源项目，他们使用 WheelView 来显示日期和时间，就像这里的 iPhone 风格**[AndAlarm](http://www.java2s.com/Open-Source/Android/Clock/andalarm/Catalogandalarm.htm)**

# c# - 允许用户通过拖动来调整 WPF TreeView 节点的大小

> ID：10152554
> 
> 赞同：3
> 
> 时间：2012-04-14T09:36:07.453
> 
> 标签：c#, wpf, xaml, treeview, treeviewitem

我想让用户能够通过拖动其边框来调整 TreeView 节点的大小，就像调整窗口大小一样。

我应该在 TreeNode 模板中放置什么控件才能使这成为可能？

或者，如果没有这样的控制，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T16:16:22.350

我正在玩 GridSpliter 并被提醒您的问题。这是另一种方法，更轻松，无需 3rd 方控件，此外，拥有选项总是很不错的 :) 这只是一个示例，可以让您了解网格拆分器：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition x:Name="Column1" Width="35*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition x:Name="Column2" Width="65*"/>
    </Grid.ColumnDefinitions>
    <Border BorderBrush="Gray" BorderThickness="1" Margin="2">
        <TextBlock>your treeview</TextBlock>
    </Border>
    <GridSplitter Width="2" ResizeBehavior="PreviousAndNext" Grid.Column="1"/>
    <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="2" Margin="2"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:12:19.723

您可以使用 avalon 对接库。它是免费的，而且非常容易设置。甚至这里也有一些帖子（堆栈溢出）。但基本上你可以把树视图固定在一边，设置一些属性不允许浮动或关闭，你就可以走了。

概述/教程 [http://avalondock.codeplex.com/documentation](http://avalondock.codeplex.com/documentation)

1.3的下载：http: [//avalondock.codeplex.com/releases/view/48794](http://avalondock.codeplex.com/releases/view/48794)

# php - error_reporting 无法正常工作以显示致命错误

> ID：10152556
> 
> 赞同：2
> 
> 时间：2012-04-14T09:36:10.347
> 
> 标签：php

我有一个简单的页面：

```
error_reporting(-1);
require('test.txt'); 
```

我知道 test.txt 不存在。我想尝试**error_reporting()**函数。在这种情况下，我们传递数字**-1**来运行正确报告的所有错误，如下所示：

```
Warning: require(test.txt) [function.require]: failed to open stream: No such file or directory in C:\wamp\www\PHP_Class\session_5\errors.php on line 11
Fatal error: require() [function.require]: Failed opening required 'test.txt' (include_path='.;C:\php\pear') in C:\wamp\www\PHP_Class\session_5\errors.php on line 11 
```

当我们将数字**2传递给****error_reporting(2) 之类**的函数时，仅报告 E_WARNING 错误，这也是正确的：

```
Warning: require(test.txt) [function.require]: failed to open stream: No such file or directory in C:\wamp\www\PHP_Class\session_5\errors.php on line 11 
```

但是当我将数字**1**传递给**error_reporting(1)**仅用于报告 E_ERROR 错误时，不会显示错误。什么是问题？请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T09:47:37.687

我认为 require 不会抛出一个，`E_ERROR`而是一个`E_COMPILE_ERROR`.
所以请尝试一下`error_reporting(E_COMPILE_ERROR);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T09:45:22.627

这个怎么样

```
error_reporting (E_ALL & ~E_WARNING & ~E_NOTICE & ~E_DEPRECATED) ; 
```

这应该给你你需要的所有错误

**更新**

查一下这个网址

[http://www.php.net/manual/en/function.require.php](http://www.php.net/manual/en/function.require.php)

它说

> 包括除了失败，它还会产生致命的 E_COMPILE_ERROR 级别错误。

所以这段代码总是会给出编译错误......上面的配置最适合你的生产环境......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T09:47:50.527

试试这个

```
error_reporting(64);
require('test.txt'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T09:39:57.980

如果您想抑制错误，这是正确的方法

```
error_reporting(E_COMPILE_ERROR );
require('test.txt'); 
```

`advice`反正不是这样的..

# joomla - 模板参数菜单 Joomla 2.5

> ID：10152560
> 
> 赞同：2
> 
> 时间：2012-04-14T09:37:00.880
> 
> 标签：joomla, joomla-extensions, joomla1.7, joomla-template, joomla2.5

我尝试在后端制作一个带有可用选项的模板，我拿了关于选项的文档，我可以看到有一个设置列出了可用菜单并选择您希望出现在特定位置的菜单（关闭位置声明通过模块）。

templateDetails.xml 中的参数（来自文档> [http://docs.joomla.org/Menu_form_field_type](http://docs.joomla.org/Menu_form_field_type)）：

**模板详细信息.xml**

```
<field name="mymenu" type="menu" 
default="mainmenu" label="Select a menu" 
description="Select a menu" /> 
```

**索引.php**

```
<?php // no direct access 
defined( '_JEXEC' ) or die( 'Restricted access' ); 
$mymenu = $this->params->get("mymenu");
?>

...

<?php echo $mymenu; ?> 
```

所以我虽然录制的菜单列表，选择和保存是可能的，那方面不用担心。我的问题是我不明白如何在我的模板的 index.php 中显示选定的菜单。我可以检索此菜单的名称，但如何显示它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:28:54.430

您需要在 TemplateDetails.xml 中定义一个模块位置（例如：菜单）。在您的模板中，将这行代码放在您希望它显示的位置：

```
<jdoc:include type="modules" name="menu" /> 
```

最后，在后端，在“菜单”位置定义 main_menu。

# html - Modernizr+html5shiv VS ie9.js

> ID：10152566
> 
> 赞同：1
> 
> 时间：2012-04-14T09:37:39.087
> 
> 标签：html, css, modernizr, html5shiv

我正在使用 HTML5 构建响应式设计。起初我使用了 Modernizr 和 HTML5 Boilerplate 的 CSS 重置，但当然 IE<9 无法识别 html5 元素的类和 id。

因此，我最需要的是对 html5 元素的完全支持，最好是对具有“最大宽度”的图像进行良好的显示后备，而不使用 CSS hack。

我应该遵循哪些选项？

1.  包含带有条件注释的 html5shiv 和 ie9.js
2.  仅包含适用于所有浏览器的 ie9.js
3.  忘记 ie9.js

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T11:52:59.890

html5shiv 和 ie9.js 做完全不同的事情。html5shiv 解决了旧版本 Internet Explorer 中的一个错误，其中任意元素（例如由 HTML5 引入的那些，浏览器早于这些元素）无法通过 CSS 设置样式。ie9.js 尝试修复旧版本 IE 中的某些渲染错误并添加对新 CSS3 功能的支持。包括哪一个的问题归结为您的意思：

> 完全支持 html5 元素

您是否需要使用这些元素并支持旧版本的 IE？然后你需要html5shiv。你需要使用 CSS3 属性和选择器吗？然后你会想要ie9.js。仅仅为了添加对 ie9.js 的支持而包含 ie9.js`max-width`并不是一个好主意。

* * *

还有一件事情：

> 仅包含适用于所有浏览器的 ie9.js

永远不应该是一种选择 - 这样做只会对您的页面在其他浏览器上的性能产生不利影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:41:44.940

Modernizr 包含用于将新标签添加到 IE<9 的 shiv 代码。确保在其他 javascript 链接/代码之前将链接添加到 head 部分。

只需从 HTML5BoilerPlate 中提供的 index.html 和其他文件文件开始，然后添加您的代码。

# c# - 使用 linq 创建 xamdatachart

> ID：10152568
> 
> 赞同：0
> 
> 时间：2012-04-14T09:37:59.477
> 
> 标签：c#, silverlight, linq, infragistics

我使用 Silverlight 和 Infragistic 作为控件开发项目，以创建使用数据库数据的数据图表。

我使用论坛建议的 Linq，MainPage.xaml.cs

```
 private void studentDomainDataSource_LoadedData(object sender, LoadedDataEventArgs e)
    {
        if (e.HasError)
        {
            System.Windows.MessageBox.Show(e.Error.ToString(), "Load Error", System.Windows.MessageBoxButton.OK);
            e.MarkErrorAsHandled();
        }
        else
        {
            var ChartData =
                (from std in e.Entities
                 group std by (std as Student).ProgramCode into program
                 select new ChartData
                {
                    ProgrammName = (program.First() as Student).Programme.ProgramName,
                    StudentsCount = program.Count()
                }).ToList();
            xamDataChart1.DataContext = ChartData;
        }
    }
}

public class ChartData
{
    public string ProgrammName { get; set; }
    public int StudentsCount { get; set; }
} 
```

这里 MainPage.xaml

```
<UserControl x:Class="ChartWithRIA.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400" xmlns:riaControls="clr-    namespace:System.Windows.Controls;assembly=System.Windows.Controls.DomainServices"     xmlns:my="clr-namespace:ChartWithRIA.Web" xmlns:ig="http://schemas.infragistics.com/xaml">

   <Grid x:Name="LayoutRoot" Background="White">
    <riaControls:DomainDataSource
        AutoLoad="True" 
        d:DesignData="{d:DesignInstance my:Student, CreateList=true}"
        Height="0"
        LoadedData="studentDomainDataSource_LoadedData" 
        Name="studentDomainDataSource"
        QueryName="GetStudentsQuery" 
        Width="0">
        <riaControls:DomainDataSource.DomainContext>
            <my:StudentsProgramDomainContext />
        </riaControls:DomainDataSource.DomainContext>
    </riaControls:DomainDataSource>

    <ig:XamDataChart
        Name="xamDataChart1">

        <ig:XamDataChart.Axes>
            <ig:CategoryXAxis
                x:Name="xAxis"
                ItemsSource="{Binding}"
                Label="{}{ProgrammName}"/>

            <ig:NumericYAxis
                x:Name="yAxis"/>
        </ig:XamDataChart.Axes>

        <ig:XamDataChart.Series>
            <ig:LineSeries
                ItemsSource="{Binding}"
                XAxis="{Binding ElementName=xAxis}"
                YAxis="{Binding ElementName=yAxis}"
                ValueMemberPath="StudentsCount"/>
        </ig:XamDataChart.Series>

    </ig:XamDataChart>
    </Grid>
  </UserControl> 
```

构建此解决方案后，没有出现错误，但未显示图表。仅显示布局。有人知道我的项目发生了什么或问题吗？先感谢您。

# javascript - 将值从模态 iframe 传递到父 iframe

> ID：10152571
> 
> 赞同：0
> 
> 时间：2012-04-14T09:38:35.820
> 
> 标签：javascript, html, iframe

您好，我有一个模态 iframe 中的数据（我们称之为第 1 帧），我应该将它传递到父窗口中包含的 iframe（rte_ticket_message）中。

在带有 javascript 的模态 iframe（第 1 帧）中

```
parent.document.getElementById("detailed_req").innerHTML=”test”; 
```

我无法将值传递给 parten 窗口中包含的 iframe。

在父窗口中，我有 iframe id=“rte_ticket_message”，其中包含一个正文

id="detailed_req" 我想把我存储在 iframe1 中的值放在哪里。

这里是iframe id=rte_ticket_message的父winow的结构

```
<div class="container">
<iframe id="rte_ticket_message" frameborder="0" style="width: 100%; height: 150px;">
<html>
<head>
<body id="detailed_req" class="editorWYSIWYG" style="margin:0px 0px 0px 0px"> 
</html>
</iframe> 
```

请插入相关说明：

有人对我应该使用的脚本有什么建议吗？谢谢

F。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:57:42.333

您可以尝试使用 cookies`document.cookie`命令。

# ios - CATextLayer 旋转后文字模糊

> ID：10152574
> 
> 赞同：3
> 
> 时间：2012-04-14T09:38:55.890
> 
> 标签：ios, core-animation, transform, retina-display, catextlayer

我有与问题相关的[问题](https://stackoverflow.com/questions/3815443/how-to-get-text-in-a-catextlayer-to-be-clear)
，我设置了 contentsScale，之后文本看起来不错，但如果我应用 3d 旋转变换，文本会变得模糊。

图片[在这里](http://dl.dropbox.com/u/17481057/tags.png)

初始化代码

```
 // init text
    textLayer_ = [CATextLayer layer];
    …
    textLayer_.contentsScale = [[UIScreen mainScreen] scale];

    // init body path
    pathLayer_ = [CAShapeLayer layer];
    …
    [pathLayer_ addSublayer:textLayer_]; 
```

轮换代码

```
 // make the mirror
    pathLayer_.transform = CATransform3DRotate(pathLayer_.transform, M_PI, 0, 1, 0);
    textLayer_.transform = CATransform3DRotate(textLayer_.transform, M_PI, 0, 1, 0);
    [textLayer_ setNeedsDisplay]; 
```

为了测试，我在初始化期间分别旋转了文本。

```
 // init text
    textLayer_ = [CATextLayer layer];
    …
    textLayer_.transform = CATransform3DRotate(textLayer_.transform, M_PI, 0, 1, 0);
    textLayer_.contentsScale = [[UIScreen mainScreen] scale]; 
```

文本可以旋转并[在此处](http://dl.dropbox.com/u/17481057/tags_fun.png)
保持清晰的 图像

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T04:14:15.407

## 光栅化

这里可能发生的是它决定必须将 textLayer 渲染为像素。请注意[CALayer 类参考中的 shouldRasterize](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/shouldRasterize)警告：

> 当此属性的值为 NO 时，图层将尽可能直接合成到目标中。如果合成模型的某些特征（例如包含过滤器）需要，图层仍可以在合成之前进行光栅化。

所以，CATextLayer 可能会突然决定光栅化。如果它是旋转层的子层，它决定栅格化。所以，不要让这种情况发生。

## 单面层

这将带您回到导致文本反转的解决方案。您可以通过关闭`doubleSided`文本图层来防止这种情况。您的标志现在将在远端为空白，因此添加第二个文本层，相对于第一个旋转 180 度。

声明两个文本层：

```
@property (retain) CAShapeLayer *pathLayer;
@property (retain) CATextLayer *textLayerFront;
@property (retain) CATextLayer *textLayerBack; 
```

然后，将它们初始化为单面，背面层旋转 180 度：

```
CAShapeLayer *pathLayer = [CAShapeLayer layer];
// Also need to store a UIBezierPath in the pathLayer.

CATextLayer *textLayerFront = [CATextLayer layer];
textLayerFront.doubleSided = NO;
textLayerFront.string = @"Front";
textLayerFront.contentsScale = [[UIScreen mainScreen] scale];

CATextLayer *textLayerBack = [CATextLayer layer];
textLayerBack.doubleSided = NO;
// Eventually both sides will have the same text, but for demonstration purposes we will label them differently.
textLayerBack.string = @"Back";
// Rotate the back layer 180 degrees relative to the front layer.
textLayerBack.transform = CATransform3DRotate(textLayerBack.transform, M_PI, 0, 1, 0);
textLayerBack.contentsScale = [[UIScreen mainScreen] scale];

// Make all the layers siblings.  These means they must all be rotated independently of each other.

// The layers can flicker if their Z position is close to the background, so move them forward.
// This will not work if the main layer has a perspective transform on it.
textLayerFront.zPosition = 256;
textLayerBack.zPosition = 256;

// It would make sense to make the text layers siblings of the path layer, but this seems to mean they get pre-rendered, blurring them.
[self.layer addSublayer:pathLayer];
[self.layer addSublayer:textLayerBack];
[self.layer addSublayer:textLayerFront];

// Store the layers constructed at this time for later use.
[self setTextLayerFront:textLayerFront];
[self setTextLayerBack:textLayerBack];
[self setPathLayer:pathLayer]; 
```

然后，您可以旋转图层。只要您始终旋转相同的数量，它们就会显示正确。

```
CGFloat angle = M_PI;
self.pathLayer.transform = CATransform3DRotate(self.pathLayer.transform, angle, 0, 1, 0);
self.textLayerFront.transform = CATransform3DRotate(self.textLayerFront.transform, angle, 0, 1, 0);
self.textLayerBack.transform = CATransform3DRotate(self.textLayerBack.transform, angle, 0, 1, 0); 
```

然后你会发现你可以在文字保持清晰的情况下将你的标志旋转到任何角度。

![每边都有文字的旋转标志](../Images/955f21c02c2ea5b4cc74514784d8cf02.png)

## 文本到路径

如果您确实需要以导致 CATextLayer 光栅化的方式来操作文本显示，还有另一种方法：将文本转换为`UIBezierPath`表示形式。然后可以将其放置在 CAShapeLayer 中。这样做需要深入研究 Core Text，但结果是强大的。例如，您可以[为正在绘制的文本设置动画](http://oleb.net/blog/2010/12/animating-drawing-of-cgpath-with-cashapelayer/)。

```
// - (UIBezierPath*) bezierPathWithString:(NSString*) string font:(UIFont*) font inRect:(CGRect) rect;
// Requires CoreText.framework
// This creates a graphical version of the input screen, line wrapped to the input rect.
// Core Text involves a whole hierarchy of objects, all requiring manual management.
- (UIBezierPath*) bezierPathWithString:(NSString*) string font:(UIFont*) font inRect:(CGRect) rect;
{
    UIBezierPath *combinedGlyphsPath = nil;
    CGMutablePathRef combinedGlyphsPathRef = CGPathCreateMutable();
    if (combinedGlyphsPathRef)
    {
        // It would be easy to wrap the text into a different shape, including arbitrary bezier paths, if needed.
        UIBezierPath *frameShape = [UIBezierPath bezierPathWithRect:rect];

        // If the font name wasn't found while creating the font object, the result is a crash.
        // Avoid this by falling back to the system font.
        CTFontRef fontRef;
        if ([font fontName])
            fontRef = CTFontCreateWithName((__bridge CFStringRef) [font fontName], [font pointSize], NULL);
        else if (font)
            fontRef = CTFontCreateUIFontForLanguage(kCTFontUserFontType, [font pointSize], NULL);
        else
            fontRef = CTFontCreateUIFontForLanguage(kCTFontUserFontType, [UIFont systemFontSize], NULL);

        if (fontRef)
        {
            CGPoint basePoint = CGPointMake(0, CTFontGetAscent(fontRef));
            CFStringRef keys[] = { kCTFontAttributeName };
            CFTypeRef values[] = { fontRef };
            CFDictionaryRef attributesRef = CFDictionaryCreate(NULL, (const void **)&keys, (const void **)&values,
                                                               sizeof(keys) / sizeof(keys[0]), &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);

            if (attributesRef)
            {
                CFAttributedStringRef attributedStringRef = CFAttributedStringCreate(NULL, (__bridge CFStringRef) string, attributesRef);

                if (attributedStringRef)
                {
                    CTFramesetterRef frameSetterRef = CTFramesetterCreateWithAttributedString(attributedStringRef);

                    if (frameSetterRef)
                    {
                        CTFrameRef frameRef = CTFramesetterCreateFrame(frameSetterRef, CFRangeMake(0,0), [frameShape CGPath], NULL);

                        if (frameRef)
                        {
                            CFArrayRef lines = CTFrameGetLines(frameRef);
                            CFIndex lineCount = CFArrayGetCount(lines);
                            CGPoint lineOrigins[lineCount];
                            CTFrameGetLineOrigins(frameRef, CFRangeMake(0, lineCount), lineOrigins);

                            for (CFIndex lineIndex = 0; lineIndex<lineCount; lineIndex++)
                            {
                                CTLineRef lineRef = CFArrayGetValueAtIndex(lines, lineIndex);
                                CGPoint lineOrigin = lineOrigins[lineIndex];

                                CFArrayRef runs = CTLineGetGlyphRuns(lineRef);

                                CFIndex runCount = CFArrayGetCount(runs);
                                for (CFIndex runIndex = 0; runIndex<runCount; runIndex++)
                                {
                                    CTRunRef runRef = CFArrayGetValueAtIndex(runs, runIndex);

                                    CFIndex glyphCount = CTRunGetGlyphCount(runRef);
                                    CGGlyph glyphs[glyphCount];
                                    CGSize glyphAdvances[glyphCount];
                                    CGPoint glyphPositions[glyphCount];

                                    CFRange runRange = CFRangeMake(0, glyphCount);
                                    CTRunGetGlyphs(runRef, CFRangeMake(0, glyphCount), glyphs);
                                    CTRunGetPositions(runRef, runRange, glyphPositions);

                                    CTFontGetAdvancesForGlyphs(fontRef, kCTFontDefaultOrientation, glyphs, glyphAdvances, glyphCount);

                                    for (CFIndex glyphIndex = 0; glyphIndex<glyphCount; glyphIndex++)
                                    {
                                        CGGlyph glyph = glyphs[glyphIndex];

                                        // For regular UIBezierPath drawing, we need to invert around the y axis.
                                        CGAffineTransform glyphTransform = CGAffineTransformMakeTranslation(lineOrigin.x+glyphPositions[glyphIndex].x, rect.size.height-lineOrigin.y-glyphPositions[glyphIndex].y);
                                        glyphTransform = CGAffineTransformScale(glyphTransform, 1, -1);

                                        CGPathRef glyphPathRef = CTFontCreatePathForGlyph(fontRef, glyph, &glyphTransform);
                                        if (glyphPathRef)
                                        {
                                            // Finally carry out the appending.
                                            CGPathAddPath(combinedGlyphsPathRef, NULL, glyphPathRef);

                                            CFRelease(glyphPathRef);
                                        }

                                        basePoint.x += glyphAdvances[glyphIndex].width;
                                        basePoint.y += glyphAdvances[glyphIndex].height;
                                    }
                                }
                                basePoint.x = 0;
                                basePoint.y += CTFontGetAscent(fontRef) + CTFontGetDescent(fontRef) + CTFontGetLeading(fontRef);
                            }

                            CFRelease(frameRef);
                        }

                        CFRelease(frameSetterRef);
                    }
                    CFRelease(attributedStringRef);
                }
                CFRelease(attributesRef);
            }
            CFRelease(fontRef);
        }
        // Casting a CGMutablePathRef to a CGPathRef seems to be the only way to convert what was just built into a UIBezierPath.
        combinedGlyphsPath = [UIBezierPath bezierPathWithCGPath:(CGPathRef) combinedGlyphsPathRef];

        CGPathRelease(combinedGlyphsPathRef);
    }
    return combinedGlyphsPath;
} 
```

这是使用上述方法创建的旋转轮廓文本。也可以在文本层的 z 位置不明显的情况下添加透视图。

![旋转符号概述的文本和透视](../Images/1706ee7df4fe0a8f6237375483c3f80f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-24T00:50:34.827

这对我有用：

```
myTextLayer.contentsScale = UIScreen.mainScreen.scale; 
```

即使转换后，文本也会变得清晰。

# jquery - 从标签中删除一个类并将其添加到另一个

> ID：10152576
> 
> 赞同：-1
> 
> 时间：2012-04-14T09:39:13.510
> 
> 标签：jquery

我有以下 html 我无法编辑 html：

```
<tr>
    <td>
        <font class="text colors_text"><span class="percarton" style="font-weight: normal;"><font class="text colors_text">
                <b>Price Per Carton </b></font></span><span class="csqft_price">$101.82</span></font><br>
        <b> <span class="percarton" style="font-weight: normal;">Members Price 1: </span>
            <span class="csqft_price"><font class="pricecolor colors_productprice">$96.82<br>
            </font></span></b>
    </td>
</tr> 
```

每当 html 中有会员价格时，`<span class="csqft_price"></span>`每箱的价格应该被删除，它应该被应用到 96.82 美元，也`<span class="csqft_price"></span>`应该在字体标签被删除之前。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:48:41.820

```
function removeClass(el, name) {

  var classes = el.className || '',
    bits = classes.split(' '),
    str = '',
    len = bits.length,
    i = 0;

  for (; i < len; i++) {
    if (bits[i] != name) str += bits[i] + ' ';
  };

  el.className = str;

}; 
```

这里有一个演示[http://jsfiddle.net/NQq2z/1/](http://jsfiddle.net/NQq2z/1/)

# html - 不能在 Safari/iOS 中工作？

> ID：10152577
> 
> 赞同：4
> 
> 时间：2012-04-14T09:39:29.337
> 
> 标签：html, ios

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T07:58:05.350

你可以设置`href="#"`，我注意到同样的跳转到页面顶部。`#`是页内锚点，我相信它指的是页面顶部。我不清楚为此定义的行为。但是，唉，你想取消它。

在 iPhone 5.0.1 Simulator 中，结合使用这两种取消方法，并且不会滚动到顶部。这是我的完整`test.html`文件。它适用于模拟器、Chrome 和 OS X Safari。

```
<div style="height: 1000px; background-color: blue;"></div>
<a href="#" onClick="event.preventDefault(); return false;">Poke it!</a>
<div style="height: 1000px; background-color: red;"></div> 
```

作为记录，删除`event.preventDefault();`重复的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T15:45:48.717

根据您的描述，这似乎是 iOS 浏览器 JS 实现中的一个错误（也许创建一个最小的代码来演示它？）。

一个简单的解决方法是将 替换`<a href...>`为`<span style="cursor:pointer;">`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T09:42:47.497

您是否尝试过完全从 javascript 绑定元素？

```
<a href="#" id="nogo">Foo</a>

document.getElementById('nogo').onclick = function(ev) {
ev.preventDefault();
}; 
```

# asp.net-mvc - Uploadify - 如何为 scriptdata 捕获新创建的 ID？

> ID：10152579
> 
> 赞同：0
> 
> 时间：2012-04-14T09:39:49.593
> 
> 标签：asp.net-mvc, jquery-plugins

我现在自己解决了这个问题，下面是解决方案：没有问题了。我写这个只是为了让我的文字得到验证。

```
<script type="text/javascript">

    /***************************************************/
    /* THIS VARIABLE IS USED TO TRANSPORT THE NEW ID. */
    var assignmentId;
    /***************************************************/

    $("#btnSave").click
    (
        function () {
            var inputData = $("form").serialize();
            var url = $("form").attr("action");
            $.post(url, inputData, function (data) {

    /********************************************************/ 
    /* NOW UPLOADIFY GETS THE NEW ID!! */ 
    assignmentId = data.AssignmentID; 
    alert(assignmentId.toString()); 
    $('#fileuploader').uploadifySettings("scriptData", { 'currentValue': assignmentId }); 
    /********************************************************/

                $('#fileuploader').uploadifyUpload();
            });
        }
    );

    $("#fileuploader").uploadify({
        'uploader': '@Url.Content("/Scripts/uploadify/uploadify.swf")',
        'cancelImg': '/Scripts/uploadify/cancel.png',
        'buttonText': 'Browse For File',
        'script': '@Url.Action("Upload")',
        'folder': '/uploads',
        'scriptData': { 'currentValue': assignmentId },
        'onAllComplete': function (event, data) { window.location = "/Assignment/" + assignmentId; },
        'onError': function (a, b, c, d) {
        },
        'onSelectOnce': function (event, data) { noFilesToUpload = false; },
        'fileDesc': 'Media Files',
        'fileExt': '*.jpg;*.jpeg;',
        'sizeLimit': 27000000,
        'multi': false,
        'auto': false
    });

</script> 
```

谢谢！我现在自己解决了这个问题，下面是解决方案：没有问题了。我写这个只是为了让我的文字得到验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T12:34:22.083

```
<script type="text/javascript"> 

    /***************************************************/ 
    /* THIS VARIABLE IS USED TO TRANSPORT THE NEW ID. */ 
    var assignmentId; 
    /***************************************************/ 

    $("#btnSave").click 
    ( 
        function () { 
            var inputData = $("form").serialize(); 
            var url = $("form").attr("action"); 
            $.post(url, inputData, function (data) { 

    /********************************************************/  
    /* NOW UPLOADIFY GETS THE NEW ID!! */  
    assignmentId = data.AssignmentID;  
    alert(assignmentId.toString());  
    $('#fileuploader').uploadifySettings("scriptData", { 'currentValue': assignmentId });  
    /********************************************************/ 

                $('#fileuploader').uploadifyUpload(); 
            }); 
        } 
    ); 

    $("#fileuploader").uploadify({ 
        'uploader': '@Url.Content("/Scripts/uploadify/uploadify.swf")', 
        'cancelImg': '/Scripts/uploadify/cancel.png', 
        'buttonText': 'Browse For File', 
        'script': '@Url.Action("Upload")', 
        'folder': '/uploads', 
        'scriptData': { 'currentValue': assignmentId }, 
        'onAllComplete': function (event, data) { window.location = "/Assignment/" + assignmentId; }, 
        'onError': function (a, b, c, d) { 
        }, 
        'onSelectOnce': function (event, data) { noFilesToUpload = false; }, 
        'fileDesc': 'Media Files', 
        'fileExt': '*.jpg;*.jpeg;', 
        'sizeLimit': 27000000, 
        'multi': false, 
        'auto': false 
    }); 

</script> 
```

# mysql - MySql中的虚拟文件夹系统，带有“模板”

> ID：10152582
> 
> 赞同：0
> 
> 时间：2012-04-14T09:40:43.547
> 
> 标签：mysql, sql, database

我必须在 MySql 中创建一个“虚拟文件系统”（使用 asp.net 作为 Web 应用程序）。它不会很复杂，可能最多 2-3 个“深”子文件夹，每个文件夹中最多可能有 10 个文件。每个用户登录后都会有自己的文件夹和文件。管理员应该能够制作“模板”，并将模板分配给新用户。模板中将包含一些文件夹和文件。这就是我正在摸索如何制作的东西。我想我至少接近设计表格，但我不确定。这是我到目前为止创建的表：

```
Files
 ID
 Name
 ContentType
 FileDataSize
 FileData
 Parent_Folder_ID

Folders
 ID
 Name
 Parent_Folder_ID

Users
 ID
 Name
 Email
 Password

Templates
 ID
 Name

User_Templates
 User_ID
 Template_ID 
```

我在正确的轨道上吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:47:32.343

这看起来很简单，这可能只适用于您的目的。您将遇到的唯一问题是您将需要几个查询来确定叶节点的完整路径。

解决此问题的最简单方法是将完整路径实际存储在单独的列中，例如：

文件夹 1/文件夹 2/节点

不那么漂亮，但肯定是最容易处理的。

或者，您可以使用前序树遍历算法，但这可能更复杂，虽然获取子树的速度很快，但更新可能非常慢。

# node.js - WebSockets - 连接后在ws/wss之间切换？

> ID：10152589
> 
> 赞同：3
> 
> 时间：2012-04-14T09:42:54.617
> 
> 标签：node.js, websocket

是否可以先建立一个 ws:// 连接（不是 SSL 加密的），然后在与 wss:// 通信后在同一连接上进行位切换（反之亦然）？

由于 WebSocket 是长期存在的连接，因此对我来说似乎很有意义。我真的需要它在我的一个项目中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:38:26.697

您不能在同一个套接字连接中从未加密 (ws) 切换到加密 (wss)。如果您担心设置延迟，您可以从一开始就建立两个连接，并且在准备好之前不要使用加密的连接。否则，只需在准备好后创建一个新的加密会话。

# cryptography - 哪个消息用于使用 HMAC-MD5 进行身份验证的 ip 数据包？

> ID：10152594
> 
> 赞同：0
> 
> 时间：2012-04-14T09:44:03.897
> 
> 标签：cryptography, udp, md5, cisco

这本身不是一个编程问题，但它与我试图制作的 ac 程序有关，以便响应 cisco 路由器发送的 ip sla 控制消息。我知道它使用 MD5 和密钥链来验证数据包（可以是 MD5 或 HMAC）。我知道关于 HMAC 和 MD5 的理论，以及关于书上理论给我们的所有信息和密钥以及所有这些东西……但我有一个问题，至少对我来说似乎不是很简单，那就是哪一个是经过散列并添加到数据包中的“消息”，以便另一端可以知道他的数据包是有效的？

谢谢你的帮助...

编辑：我有两台路由器，一台作为 ip sla 生成器，另一台作为 ip sla 响应器。ip sla 生成器使用 MD5 和密钥对发送的数据进行身份验证。

使用 Wireshark 捕获离开 ip sla 生成器接口的数据包我发现了这个：

未身份验证的数据包：
IP标头
45000000000000000000000000FF1136E3C0A801C3C0A801A6
UDP HEADER E2E607AF003CCDBD PAIMOLAD 010400003400000000000000000000000000000000000000000000000000000000000000000000000000000000
来
了

用密钥“ Cisco”进行身份验证的数据包：
IP Header
45000050000000000000000000000FF1136E3C0A801C3C0A801A6
UDP
HEADER C20107AF003CD296
有效载荷
010440034000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000个CC01415001CEC5CCERCECREN1CCERCECRECER *LOAD* LOLA

*在有效负载的末尾，您可以看到 0x01ff 是用于验证数据包的密钥号，而 0xb9c0ae94fec238bd43d13129a6625ed 是验证字符串

Capturing another Authenticated packet with key "cisco" I got this:
IP Header
4500005000000000ff1136e3c0a801c3c0a801a6
UDP Header
d47607af003cc021
Payload
01040034000000000004001000000000c0a801a6ea6014500001001c00000000* *01ff0000b9c0ae94fec238bd43d13129a6625eda* *

如您所见，UDP 标头发生了变化，但经过身份验证的消息保持不变，这导致我推断要散列的消息只是有效负载，但散列以下组合不会产生所需的身份验证：

*   有效载荷的 MD5 未经过身份验证
*   有效载荷的 MD5 未经身份验证 + 十六进制密钥
*   有效载荷的 Hmac-Md5 未经过身份验证
*   有效载荷的 Hmac-Md5 未经身份验证 + 十六进制密钥
*   更多组合太长无法列出...

所以我认为消息并不像有效负载那么简单，或者思科使用的身份验证方法不标准。我错过了什么吗？或者还有什么我可以尝试的？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T13:05:11.957

答案是：是的，这取决于协议（我找不到）。不过，我在文档中没有看到任何提及 HMAC，因此密钥更有可能作为哈希计算的最后一部分包含在内，但不在包中（当然）。这与附加零不同。然后将普通的 MD5 哈希用作一些穷人的身份验证方案。

所有这些都来自思科令人困惑的文档和相对难以阅读的问题——当然还有加密的一般知识。

# javascript - JavaScript：用浏览器打开窗口

> ID：10152598
> 
> 赞同：0
> 
> 时间：2012-04-14T09:44:30.127
> 
> 标签：javascript, window

我希望能够为用户打开另一个窗口并使用 URL 栏，就像用户使用它一样。这似乎不可能，但我不妨问一下。

基本上我想模拟打开一个新标签/窗口的行为，输入一些非 URL，并让你的浏览器做出相应的行为（通常它会使用你的默认搜索引擎）。

这可以用 JavaScript 完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T09:46:19.827

不，那是不可能的。

无法模拟在地址栏中键入非 URL 时浏览器会执行的操作，例如使用`window.open()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:15:00.023

在地址栏中，您可以这样输入以打开新窗口

```
javascript:window.open(); 
```

清除地址栏中的文本并尝试此操作，它将打开新标签

```
javascript:showModalDialog("#","","") 
```

如果您想在新窗口中打开相同的链接，这也可以正常工作

# android - Radio Group 没有在 Android 中获得关注

> ID：10152599
> 
> 赞同：7
> 
> 时间：2012-04-14T09:44:34.240
> 
> 标签：android, focus, radio-group

所以我有一个包含两个 EditText 组件和一个 RadioGroup 的表单。当我单击其中一个 EditText 字段时，键盘会弹出，我可以正确，一切都很好。直到我单击其中一个 RadioButtons 并在键盘仍然不在的情况下单击它！当我使用键盘时，它会在最后聚焦的 EditText（Android 4.0）中写入，而在我的 Galaxy S2（Android 2.3.6）上，它会使应用程序崩溃！！我研究了这个问题，发现这是（Android 2.0-）中的一个已知问题，那么我在做什么有什么问题？

我希望能够使用 onFocusChange 侦听器来验证 RadioGroup 选择吗？任何想法将不胜感激。

# suhosin - 苏霍辛的变化

> ID：10152600
> 
> 赞同：0
> 
> 时间：2012-04-14T09:44:34.410
> 
> 标签：suhosin, ipb

我最近购买了一个虚拟服务器，以便将其用作我的站点的阶段开发，该站点基于论坛脚本 (ipb)。

问题是在安装之前和之后，ipb 向我显示了一些关于 suhostin 限制的消息。例如

```
'suhosin.post.max_vars' is 1000 and has to be changed to 4096
'suhosin.request.max_vars' is 1000 and has to be changed to 4096 
```

对于这两种情况，它都说这些设置在我的 php.ini 上。查了一下，里面没有提到suhosin。但是我在 /etc/php5/conf.d/suhosin.ini 找到了它们，然后我继续并用正确的值更改了它们。

问题是我不断收到错误消息，当我加载 phpinfo 时，我看到旧值仍然存在。我重新启动了 apache，甚至重新启动了服务器，但即使我编辑 suhosin.ini 文件并看到我的编辑内容，suhosin 仍然具有旧值。

谁能解释我做错了什么？我什至将这些行添加到 php.ini 但仍然没有任何改变。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:16:44.963

您需要在您的管理目录中创建一个名为“php.ini”的文件（您可以通过您的论坛所在的根目录找到它）并放入以下内容。根据需要更改值。

```
suhosin.request.max_varname_length = 400
suhosin.get.max_value_length = 2000
suhosin.request.max_vars = 4100
suhosin.post.max_vars = 4100 
```

# objective-c - Xcode - NSDate CountDown 计时器的设置限制

> ID：10152601
> 
> 赞同：0
> 
> 时间：2012-04-14T09:44:53.810
> 
> 标签：objective-c, xcode, nsdate, nstimer, nstimeinterval

我正在使用 xCode 4.3.2，在我的倒计时计时器项目（代码如下所示）中，我想在 30 秒后停止倒计时。如何为我的倒计时设置此限制？请你帮助我好吗？

```
int countLimit=30; //seconds
NSDate *startDate;

- (void)countDown{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = -([currentDate timeIntervalSinceDate:startDate]);
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    self.myCounterLabel.text = timeString;
    [dateFormatter release];
}

- (void)updateCounter{

    self.myCounterLabel.text = @"00:00:00";
    startDate = [[NSDate date]retain];

    myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
    target:self
    selector:@selector(countDown)
    userInfo:nil
    repeats:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:53:48.857

只需添加到您的**倒计时**

```
if([[NSDate date] timeIntervalSinceDate:startDate]>=countLimit)

[myTimer invalidate]; 
```

# ruby - Authlogic 密码仅在测试模式下无效

> ID：10152602
> 
> 赞同：2
> 
> 时间：2012-04-14T09:45:06.597
> 
> 标签：ruby, ruby-on-rails-3, integration-testing, capybara, authlogic

我正在使用 Authlogic 和 Rails 3.2.3。Authlogic 在开发模式下正确验证用户，我可以在注册后使用活动用户登录，但在测试模式下，当我使用 Capybara 运行集成测试时`password is not valid`出现错误。

我已经确保密码是相同的、有效的，我什至尝试过设置

```
 acts_as_authentic do |c|
   c.validate_password_field = false
  end 

```

在我的测试中，我使用工厂，这是我的工厂定义。

```
 FactoryGirl.define do
  factory :user do
    sequence :email do |i| 
      "test_user_#{i}@example.com"
    end
    sequence :name do 
      |i| "test user#{i}"
    end
    password "testtesttest"
    password_confirmation "testtesttest"
    password_salt "passwordsalt"
    perishable_token "windowintheskies"
    single_access_token "123123123"
  end  
end 

```

我的数据库字段都允许 crypted_pa​​ssword 字段是 Varchar(255)

```
 +---------------------+--------------+------+-----+---------+----------------+
| Field               | Type         | Null | Key | Default | Extra          |
+---------------------+--------------+------+-----+---------+----------------+
| id                  | int(11)      | NO   | PRI | NULL    | auto_increment |
| crypted_password    | varchar(255) | NO   |     | NULL    |                |
| password_salt       | varchar(255) | NO   |     | NULL    |                |
| email               | varchar(255) | NO   |     | NULL    |                |
| persistence_token   | varchar(255) | NO   |     | NULL    |                |
| single_access_token | varchar(255) | NO   |     | NULL    |                |
| perishable_token    | varchar(255) | NO   |     | NULL    |                |
| login_count         | int(11)      | NO   |     | 0       |                |
| failed_login_count  | int(11)      | NO   |     | 0       |                |
| last_request_at     | datetime     | YES  |     | NULL    |                |
| current_login_at    | datetime     | YES  |     | NULL    |                |
| last_login_at       | datetime     | YES  |     | NULL    |                |
| current_login_ip    | varchar(255) | YES  |     | NULL    |                |
| last_login_ip       | varchar(255) | YES  |     | NULL    |                |
| name                | varchar(255) | NO   |     |         |                |
| created_at          | datetime     | NO   |     | NULL    |                |
| updated_at          | datetime     | NO   |     | NULL    |                |
| active              | tinyint(1)   | YES  |     | 0       |                |
+---------------------+--------------+------+-----+---------+----------------+ 

```

我正在使用 capybara 运行我的集成测试，我发现错误只发生在测试模式而不是开发模式。

另外，我确定密码不为空

我的集成测试规范看起来像这样

```
 require 'spec_helper'
describe "/lists" do    
  before(:each) do        
    @user = FactoryGirl.build(:user, :password => 'testtesttest', :password_confirmation => 'testtesttest') 
    @user.activate!    
  end

  it "loads the list creation pages on clicking the new list button" do    
    visit new_user_session_path
    fill_in "user_session_email", :with => @user.email
    fill_in "user_session_password", :with => 'testtesttest'
    click_button "Login"
    page.should have_content "My Lists"        
    visit lists_path
    click_link "Create A New List"
    page.should have_content('New List')
  end 

```

我的 user_sessions_controller 看起来像这样

```
 def create
    @user_session = UserSession.new(params[:user_session])
    puts "*" * 50
    puts " Password - #{params[:user_session][:password].to_s}"
    puts " User #{User.where(:email => params[:user_session][:email]).first.inspect}"
    puts "Valid #{User.where(:email => params[:user_session][:email]).first.valid_password?(params[:user_session][:password])}"
    puts " Active =  #{User.where(:email => params[:user_session][:email]).first.active?}"
    puts "*" * 50
    if @user_session.save!
      flash[:notice] = "Login successful!"
      redirect_back_or_default lists_url
    else                          
      puts "Error : #{@user_session.errors.inspect}"
      render :action => :new
    end
  end 

```

# php - 将 CSV 数据导入 MySQL 表

> ID：10152603
> 
> 赞同：0
> 
> 时间：2012-04-14T09:45:18.280
> 
> 标签：php, mysql, csv, import

我有一个 CSV 文件，其中包含用制表符分隔的数据。我需要将数据导入到一个由两列组成的 MySQL 表中。第一个 CSV 列应该进入表格的第一列，第二列也是如此。

```
<?php 
$con=mysql_connect("localhost","root",""); 
mysql_select_db("translation",$con); 
$open=fopen("EH_excel.txt","r"); 
while(($get=fgetcsv($open,1000,","))!==false) { 
  mysql_query("insert into   dictionary(english,croatian)     
  values('".$get[0]."','".$get[1]."')"); 
} 
fclose($open); echo "Import Done."; 
?> 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:02:18.163

因为你所拥有的被称为`Tab Delimited Files`

这是您将其导入到的方式

SQL

```
LOAD DATA LOCAL INFILE 'sample.txt' INTO TABLE sample 
FIELDS TERMINATED BY '\t'
OPTIONALLY ENCLOSED BY '' 
ESCAPED BY '' 
LINES TERMINATED BY '\n'; 
```

# c# - c#中的多线程概念和锁

> ID：10152613
> 
> 赞同：1
> 
> 时间：2012-04-14T09:46:26.830
> 
> 标签：c#, multithreading, locking

我读过关于锁的书，虽然什么都不懂。我的问题是为什么我们要使用未使用`object`并锁定它，以及这如何使某些东西成为线程安全的，或者这如何有助于多线程？没有其他方法可以制作线程安全的代码。

```
public class test {
    private object Lock { get; set; }

    ...
    lock (this.Lock) { ... }
    ...
} 
```

对不起，我的问题很愚蠢，但我不明白，虽然我已经用过很多次了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T13:56:31.003

从一个线程访问一段数据而其他线程正在修改它被称为“数据竞争条件”（或只是“数据竞争”），并可能导致数据损坏。(*)

锁只是一种避免数据竞争的机制。如果两个（或更多）并发线程锁定**同一个锁对象**，则它们不再是并发的，并且在锁期间不再会导致数据竞争。本质上，我们正在**序列化**对共享数据的访问。

诀窍是保持你的锁**尽可能“宽”**以避免数据竞争，**但尽可能“窄”以**通过并发执行获得性能。这是一个很好的平衡，很容易在任一方向上失控，这就是多线程编程很难的原因。

一些指导方针：

*   只要**所有**线程都只是读取数据并且没有人会修改它，就不需要锁定。
*   相反，如果至少有一个线程可能在某个时刻修改数据，那么访问相同数据的**所有并发代码路径**必须通过锁正确序列化，即使是那些只读取数据的。
    *   在一个代码路径而不是另一个代码路径中使用锁将使数据对竞争条件开放。
    *   此外，在一个代码路径中使用一个锁对象，但在另一个（并发）代码路径中使用*不同*的锁对象不会序列化这些代码路径，并使您对数据竞争敞开大门。
    *   另一方面，如果两个并发代码路径访问不同的数据，它们可以使用不同的锁对象。*但是*，只要有多个锁对象，就要注意[死锁](http://en.wikipedia.org/wiki/Deadlock)。死锁通常也是“代码竞争条件”（和 heisenbug，见下文）。
*   锁定对象不需要（并且通常不是）与您尝试保护的数据相同。不幸的是，没有语言工具可以让您“声明”哪些数据受哪个锁定对象保护，因此您必须非常仔细地为可能维护您的代码的其他人以及您自己记录您的“锁定约定”（因为即使在很短的时间之后，您*也会*忘记锁定约定的一些角落和缝隙）。
*   尽可能保护锁对象免受外界影响通常是一个好主意。毕竟，您将它用于非常敏感的锁定任务，并且您不希望它被外部参与者以不可预见的方式锁定。这就是为什么使用`this`或公共字段作为锁定对象通常是一个坏主意。
*   `lock`关键字只是[Monitor.Enter](http://msdn.microsoft.com/en-us/library/de0542zz.aspx%5C)和[Monitor.Exit](http://msdn.microsoft.com/en-us/library/system.threading.monitor.exit.aspx)的更方便的语法。
*   锁对象可以是 .NET 中的任何对象，*但* [值对象](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)将在对 的调用中被**装箱**`Monitor.Enter`，这意味着线程不会共享同一个锁对象，从而使数据不受保护。因此，只能使用引用类型作为锁对象。
*   对于进程间通信，您可以使用全局互斥锁，它可以通过将非空传递`name`给[Mutex Constructor](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)来创建。全局互斥锁提供与常规“本地”锁定基本相同的功能，不同之处在于它们可以在单独的进程之间共享。
*   除了锁之外还有同步机制，例如信号量、条件变量、消息队列或[原子操作](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)。混合不同的同步机制时要小心。
*   锁也表现为[内存屏障](http://en.wikipedia.org/wiki/Memory_barrier)，这在现代多核、多缓存 CPU 上越来越重要。这就是为什么您需要锁定读取数据而不仅仅是写入的*部分原因。*

(*)*之所以称为“竞赛”，是因为并发线程正在“竞赛”对共享数据执行操作，而赢得该竞赛的人将决定操作的结果。所以结果取决于执行的**时间**，这在现代抢占式多任务操作系统上基本上是随机的。更糟糕的是，通过调试器等工具观察程序执行的简单行为很容易修改时序，这使它们成为[“heisenbugs”](http://en.wikipedia.org/wiki/Heisenbug)（即，被观察的现象仅因观察行为而改变）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T02:34:20.193

对于那些刚刚熟悉`lock`C# 中的关键字的人来说，您的困惑是非常典型的。你是对的，`lock`语句中使用的对象实际上只不过是一个定义临界区的标记。该对象本身对多线程访问没有任何保护。

其工作方式是 CLR 在称为同步块的对象头（类型句柄）中保留一个 4 字节（32 位系统）部分。同步块只不过是存储实际临界区信息的数组的索引。当您使用`lock`关键字时，CLR 将相应地修改此同步块值。

这种方案有优点也有缺点。优点是它为定义关键部分提供了一个相当优雅的解决方案。一个明显的缺点是每个对象实例都包含同步块，并且大多数实例从不使用它，因此在大多数情况下这似乎是浪费空间。另一个缺点是可以使用装箱值类型，这几乎总是错误的并且肯定会导致混乱。

我记得早在 .NET 首次发布时，关于`lock`关键字对语言的好坏有很多讨论。普遍的共识（至少我记得它）是它很糟糕，因为`using`关键字本来可以很容易地使用。事实上，使用`using`关键字的解决方案实际上会更有意义，因为它可以在不需要同步块的情况下完成。c# 设计团队甚至公开表示，如果他们有第二次机会，`lock`关键字永远不会进入语言。¹

* * *

¹*我能找到的唯一参考资料是 Jon Skeet 的[网站](http://www.yoda.arachsys.com/csharp/threads/alternative.shtml)。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T09:49:47.257

该`lock`声明引入了互斥的概念。任何时候只有一个线程可以获取给定对象的锁。这可以防止线程同时访问共享数据结构，从而破坏它们。

如果其他线程已经持有锁，则 lock 语句将阻塞，直到它能够在其参数上获得排他锁，然后才允许其块执行。

请注意，唯一要做的`lock`就是控制代码块的入口。对类成员的访问与锁完全无关。由类本身来确保必须同步的访问通过使用`lock`或其他同步原语来协调。另请注意，对部分或所有成员的访问可能不必同步。例如，如果你想维护一个计数器，你可以使用[Interlocked](http://msdn.microsoft.com/en-us/library/system.threading.interlocked%28v=vs.71%29.aspx)类而不加锁。

* * *

锁定的替代方案是无锁数据结构，它在存在多个线程的情况下表现正确。必须非常仔细地设计无锁数据结构上的操作，通常借助无锁原语，例如比较和交换 (CAS)。

这种技术的一般主题是尝试以原子方式对数据结构执行操作，并检测何时由于其他线程的并发操作而导致操作失败，然后重试。这适用于不太可能发生故障的轻负载系统，但随着故障率攀升和重试成为主要负载，可能会产生失控行为。这个问题可以通过降低重试率来改善，有效地限制负载。

* * *

一个更复杂的替代方案是软件事务内存。与 CAS 不同，STM 将失败和重试的概念推广到任意复杂的内存操作。简单来说，您启动一​​个事务，执行所有操作，最后提交。系统检测是否由于其他线程执行的冲突操作而导致操作无法成功，这些线程击败了当前线程。在这种情况下，STM 要么彻底失败，要求应用程序采取纠正措施，要么在更复杂的实现中，它可以自动回到事务的开始并重试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T09:50:08.697

当您有不同的线程同时访问相同的变量/资源时，它们可能会覆盖此变量/资源，并且您可能会得到意想不到的结果。锁定将确保只有一个线程可以按时评估变量，并且保持线程将排队以访问该变量/资源，直到锁定被释放

假设我们有一个账户的余额变量。两个不同的线程读取它的值为 100 假设第一个线程将 50 添加到它，如 100 + 50 并保存它并且余额将有 150 因为第二个线程已经读取了 100 并且平均时间。假设它像 100-50 一样减去 50，但这里要注意的是，第一个线程的余额为 150，所以第二个线程应该为 150-50，这可能会导致严重的问题。

所以 lock 确保当线程想要更​​改某些资源状态时，它会锁定它并在提交更改后离开

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T09:50:17.457

是的，确实还有另一种方式：

```
using System.Runtime.CompilerServices;

class Test
{
    private object Lock { get; set; }

    [MethodImpl(MethodImplOptions.Synchronized)]
    public void Foo()
    {
        // Now this instance is locked
    }
} 
```

虽然它看起来更“自然”，但它并不经常使用，因为对象以这种方式锁定*自身*，因此*其他*代码无法冒险锁定该对象——它可能导致死锁。

因此，您通常会创建一个引用对象的（延迟初始化的）私有字段，并将该对象用作锁。这将保证没有其他人可以锁定与您相同的对象。

* * *

关于引擎盖下发生的事情的更多细节：

当您“锁定对象”时，您*并没有*锁定对象*本身*。相反，您在整个程序中将该对象用作保证唯一的内存地址。*当您“锁定”时，运行时获取对象的地址，使用它在另一个*表（对您隐藏）中查找*实际*锁定，并将*该*对象用作“锁定”（也称为“临界区” ”）。

 **所以，对你来说，一个对象实际上只是一个代理/符号——它本身并没有做任何事情；它只是充当一个独特的指标，永远不会与同一程序中的另一个有效对象发生冲突。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-14T09:51:25.093

`Lock`对象就像单人间的一*扇门*，每次只有一位客人可以进入。房间可以是你的*数据*，客人可以是你的*功能*。

*   定义数据（房间）
*   添加门（锁定对象）
*   邀请客人（功能）
*   使用`lock`指令关闭/打开门，每次只允许一名客人进入房间。

为什么我们需要这个？如果您同时在文件中写入数据（只是一个示例，可以是其他 1000 个），您将需要将您的功能（为客人关闭/打开门）的访问同步到写入文件，因此任何功能都将附加到末尾文件的（假设这是本示例的要求）

这自然不仅是同步线程的方式，还有更多：

*   监视器
*   等等哈德勒...

查看链接以获取每个链接的完整信息和描述

[线程同步](http://msdn.microsoft.com/en-us/library/ms173179.aspx)**

# java - 即时压缩和检索 ArrayList

> ID：10152617
> 
> 赞同：0
> 
> 时间：2012-04-14T09:47:34.630
> 
> 标签：java, gzip

我有一个图表应用程序，如下所示。

一旦用户请求了 10 年数据（通过滑块或通过使用从和到日期字段），我正在查询 MySQL 数据库以获取图表数据。数据将在 ArrayList 中。由于数据非常大，我可以使用 java GZIP 压缩该数据以将其从 DAO 传输到 servlet 吗？

还是会成为额外的负担？

![在此处输入图像描述](../Images/e8249022d003bb97e30270a7167db7b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:15:04.420

A[`GZIPOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/GZIPOutputStream.html)可以接受`OutputStream`，所以“是”。

> ..这会是额外的负担吗？

在压缩/解压缩时的 CPU 周期中，是的。对于实际的转移，它应该是一个明显较轻的负担（我怀疑这是您希望规避的瓶颈）。

# session - 浏览器关闭时如何结束会话

> ID：10152619
> 
> 赞同：0
> 
> 时间：2012-04-14T09:47:43.303
> 
> 标签：session, cookies, extjs

在我的应用程序中，我正在保存用户的注销时间。当用户单击登录按钮时，这工作正常，但我的要求是即使用户关闭浏览器也要存储注销时间。如果这是不可能的，请告诉我如何在用户关闭窗口后立即销毁会话。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:51:27.763

过去，您必须在事件处理程序中执行*同步Ajax。*不知道在现代浏览器中是否仍然如此。如果您采用异步方式，请务必使用真实的客户端负载进行测试，这样您就不会遇到仅在您的用户中出现的竞争条件。

我建议从客户端发出某种心跳 Ajax 呼叫，比如每五分钟一次。如果您连续错过两个这样的调用，您将终止会话服务器端。这将处理用户未注销的所有情况（浏览器崩溃、操作系统崩溃、网络故障等）。

作用于卸载事件的潜在问题：

*   如果用户在多个选项卡中打开您的应用程序/网站并关闭其中一个，会发生什么情况？您需要通知用户将进行交叉表注销。
*   浏览器有限制您在卸载时可以执行的操作的历史，以防止出现阻止用户关闭浏览器的弹出窗口和无限循环。你永远不知道未来会发生什么。这里的历史：[http](http://www.hunlock.com/blogs/Mastering_The_Back_Button_With_Javascript) : //www.hunlock.com/blogs/Mastering_The_Back_Button_With_Javascript 并通过上面回复中的 StackOverflow 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T14:14:07.683

这回答了问题的最后一部分。通过关闭浏览器自动关闭会话。根据[Wikipedia](http://en.wikipedia.org/wiki/HTTP_cookie#Session_cookie)：如果在 cookie 创建时未设置到期日期或有效期间隔，则会创建会话 cookie。Web 浏览器通常会在用户关闭浏览器时删除会话 cookie。

手头的任务是使用`Ext-state-CookieProvider`. 完全省略`expires`配置，将导致 ExtJS 将其默认为 7 天。检查[来源](http://docs.sencha.com/extjs/4.2.1/source/CookieProvider.html#Ext-state-CookieProvider-cfg-expires)。因此，您需要使用显式`expires`null 创建 cookie，如下所示：

```
var cp = Ext.create('Ext.state.CookieProvider', {
    expires: null
}); 
```

当浏览器关闭时，所有 cookie 值都将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:01:28.530

根据[这个答案](https://stackoverflow.com/a/2816916/11963 "ExtJS：处理浏览器退出事件（点击交叉退出）")，您应该能够处理该`beforeunload`事件，然后执行 AJAX 注销。

未经测试，但它应该像这样工作：

```
Ext.EventManager.on(window, 'beforeunload', function() {
  Ext.Ajax.request({
    url: 'logout.json',
    timeout: 60000
  });
}); 
```

# http - Chrome & Expires 标头 - 图像缓存

> ID：10152622
> 
> 赞同：2
> 
> 时间：2012-04-14T09:47:55.223
> 
> 标签：http, google-chrome, tomcat, caching

我有一个包含几百个小图像的 Web 应用程序，并且在加载时表现非常糟糕。

为了解决这个问题，我想在浏览器中缓存静态文件。

[在 Tomcat 7 上](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/filters/ExpiresFilter.html)使用servlet 过滤器，我现在在静态文件上正确设置了 expires 标头，并且可以看到这已返回给 Chrome：

```
Accept-Ranges:bytes
Cache-Control:max-age=3600
Content-Length:40284
Content-Type:text/css
Date:Sat, 14 Apr 2012 09:37:04 GMT
ETag:W/"40284-1333964814000"
**Expires:Sat, 14 Apr 2012 10:37:05 GMT**
Last-Modified:Mon, 09 Apr 2012 09:46:54 GMT
Server:Apache-Coyote/1.1 
```

但是，我注意到 Chrome 仍然在重新加载时为每个静态资源往返于服务器，发送一个 if-modified 标头并从 Tomcat 获得正确的 304 Not Modified 响应。

有什么方法可以让 Chrome 避免向服务器发出这 100 多个请求，直到真正过期为止？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T18:45:48.470

有 3 种加载页面的方式 -

1.  将 url 放在地址栏中并按 Enter 键，这相当于从超链接导航（默认浏览行为）。这将尊重 Expires 标头，并首先检查静态内容的缓存是否有效，然后如果 Expires 标头时间在将来，它将直接从缓存中加载它。在这种情况下，浏览器根本不会向服务器发出任何请求。如果缓存的内容无效，它将向服务器发出请求。

2.  按 f5 刷新页面。这基本上会向服务器发送一个 if-modified 标头并验证内容是否已更改。如果它已更改，您将收到 200 响应，否则将收到 304 响应。在这两种情况下，图像都不会加载到页面上，直到收到来自服务器的响应。

3.  按 ctrl+f5 将强制清除所有缓存并重新加载所有图像。它不会花时间验证图像是否已更改或未使用标题。

我猜你所期待的行为是第一种。您唯一应该注意的是加载页面的方式。通常人们不会按 f5 或 ctrl+f5 ，因此您的静态内容不会每次都重新验证。它将强制清除缓存并重新加载页面上的每个静态项目。

简而言之，请记住 - 通过在地址栏中按 enter 来重新加载页面。浏览器将尊重您提供的标题。这不是特定于 chrome 的，它是 W3C 标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:11:55.200

测试时要小心。我注意到在 Chrome 版本 20 中，如果我按 F5 重新加载页面，然后在网络面板中我会看到新请求。Hoewer 如果我将光标放在标题栏上，在当前页面 url 之后，然后按 Enter，我会从缓存中获取资源，而标题被设置为缓存。

也是一个很好的阅读：

[http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/](http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T15:42:10.147

假设您已经排除了已经建议的各种陷阱，我发现 Google Chrome 可以忽略 Cache-Control 指令，除非它包含`public`，并且它必须是第一个。例如：

```
Cache-Control: public, max-age=3600 
```

在我的实验中，我还从服务器响应中删除了 ETag，所以这可能是一个因素，但我没有回去检查。

# sql - ora-30926 错误

> ID：10152623
> 
> 赞同：-1
> 
> 时间：2012-04-14T09:48:05.997
> 
> 标签：sql, oracle, merge

> **可能重复：**
> [ORA-30926：无法在源表中获得一组稳定的行](https://stackoverflow.com/questions/2337271/ora-30926-unable-to-get-a-stable-set-of-rows-in-the-source-tables)

我正在尝试执行以下合并语句，但向我显示 ora-30926 错误

```
merge into test_output target_table 
USING (SELECT c.test_code, 
  c.v_report_id, upper_score,
        CASE WHEN c.test_code = 1 THEN b.mean_diff 
             WHEN c.test_code = 2 THEN b.norm_dist 
             WHEN c.test_code = 3 THEN b.ks_stats 
             WHEN c.test_code = 4 THEN b.ginni 
             WHEN c.test_code = 5 THEN b.auroc 
             WHEN c.test_code = 6 THEN b.info_stats 
             WHEN c.test_code = 7 THEN b.kl_stats 
                    END val1 
     FROM   combined_approach b inner join test_output c
          on  b.v_report_id = c.v_report_id 
          and c.upper_score = b.band_code 
             WHERE c.v_report_id = lv_report_id  
                        ORDER  BY c.test_code) source_table
                        on(target_table.v_report_id = source_table.v_report_id
                        and  target_table.v_report_id = lv_report_id)
                when matched then         
update  SET    target_table.upper_value = source_table.val1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T13:55:47.747

我认为你有这个错误，因为你有行在 using 子句上具有相同的 v_report_id 你可以试试这个

```
merge into test_output target_table 
USING (SELECT 
        CASE WHEN c.test_code = 1 THEN b.mean_diff 
             WHEN c.test_code = 2 THEN b.norm_dist 
             WHEN c.test_code = 3 THEN b.ks_stats 
             WHEN c.test_code = 4 THEN b.ginni 
             WHEN c.test_code = 5 THEN b.auroc 
             WHEN c.test_code = 6 THEN b.info_stats 
             WHEN c.test_code = 7 THEN b.kl_stats 
                    END val1 
     FROM   combined_approach b inner join test_output c
          on  b.v_report_id = c.v_report_id 
          and c.upper_score = b.band_code 
             WHERE c.v_report_id = lv_report_id  
              group by v_report_id          
) source_table
on (target_table.v_report_id = source_table.v_report_id
    and  target_table.v_report_id = lv_report_id)
when matched then update  
   SET   target_table.upper_value = source_table.val1; 
```

# objective-c - 如何触摸和拖动动画图像？这是我的动画代码：

> ID：10152625
> 
> 赞同：1
> 
> 时间：2012-04-14T09:48:13.963
> 
> 标签：objective-c, ios, animation, drag-and-drop

```
- (void)viewDidLoad
{
    [super viewDidLoad];

        [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:4];
    [UIView setAnimationRepeatCount:50];
    [UIView setAnimationRepeatAutoreverses:NO];

    CGPoint abc =chem1.center;

    abc.y= 480;
    chem1.center=abc; 

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:4];
    [UIView setAnimationRepeatCount:50];
    [UIView setAnimationRepeatAutoreverses:NO];

    CGPoint def =chem2.center;

    def.y= 480 ;
    chem2.center=def; 

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:4];
    [UIView setAnimationRepeatCount:50];
    [UIView setAnimationRepeatAutoreverses:NO];

    CGPoint hij =nat1.center;

    hij.y= 480;
    nat1.center=hij; 

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:4];
    [UIView setAnimationRepeatCount:50];
    [UIView setAnimationRepeatAutoreverses:NO];

    CGPoint klm =nat2.center;

    klm.y= 480;
    nat2.center=klm;  
} 
```

我非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:08:22.230

您的问题有两个部分：**如何点击动画图像**和**如何拖动图像**。

* * *

# 如何点击动画图像。

## 背景

当您为视图（或更准确地说是其图层）设置动画时，您更改的属性（在您的情况下`position`（通过设置`center`））立即更改为其最终值。如果您只制作动画（例如使用 CABasicAnimation，那么正确的可能根本不会改变。

这意味着如果您尝试点击视图（或图层），它将位于您将其移动到的位置（其最终位置（尽管动画的任何持续时间或重复计数）。

## 点击测试移动层

为了能够对正在移动的东西进行测试，您需要对[`presentationLayer`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/presentationLayer)您尝试点击的视图层进行测试。

```
CGPoint touchPoint = [gestureRecognizer locationInView:[self view]];

if ([[[[self movingView] layer] presentationLayer] hitTest:touchPoint]) {
    // Yeah, you hit the moving (animating) layer!
} 
```

现在用户已经点击了移动视图（在您的情况下为图像），您可以开始处理拖动。

# 如何拖动图像

当您拖动图像时，您将图层移动到用户手指拖动图像的任何位置。

## 移除到移动视图的动画

首先，您应该取消该视图的正在进行的动画（拥有动画名称可以让您只取消一个动画。

```
[[[self movingView] layer] removeAllAnimations]; 
```

或者，如果您为运动动画设置了名称。

```
[[[self movingView] layer] removeAnimationForKey:@"nameOfMovingAnimation"]; 
```

## 将视图移动到用户手指的位置

接下来，您应该（持续）在用户移动手指时更新视图的位置。您不应该对此进行动画处理，因为它会增加手指移动和视图之间的时间，并使您的应用程序看起来像是滞后的。*拖动时进行动画处理**不会**使其看起来平滑。*

**注意：**因为您的问题并没有说明用户拖动图像后您想要做什么，或者当他们放下图像时会发生什么。我无法进一步解释。

## 需要更多帮助？

在网络（或 StackOverflow）上搜索类似“iOS 拖动视图”的内容，您可能会找到有关如何拖动 imageViews 的更多信息。

否则，一旦你走到这一步，就在 StackOverflow 上问另一个问题（即你可以点击移动的图像，它们会停止移动）。

# javascript - JQuery distinct后代（过滤掉结果集中的所有父母）

> ID：10152627
> 
> 赞同：0
> 
> 时间：2012-04-14T09:48:41.120
> 
> 标签：javascript, jquery, plugins, filter

我[需要一种方法](https://stackoverflow.com/questions/10094743/reduce-array-of-dom-elements-to-the-ones-with-the-deepest-level-in-javascript)来过滤掉结果集中其他元素的父元素。我试着写一个插件：

```
jQuery.fn.distinctDescendants = function() {
    var nodes = [];
    var result = this;

    jQuery(result).each(function() {
        var node = jQuery(this).get(0);
        if(jQuery(node).find(result).length == 0) {
            nodes.push(node);
        }
    });

    return nodes;
}; 
```

[当我在此示例页面](http://www.maquinastudio.com/contact/)上运行以下命令时：

```
jQuery('body, textarea').distinctDescendants(); 
```

我得到（错误的）结果：

```
[body.contact-page, textarea, textarea] 
```

这是错误的，因为 body 是结果中至少一个其他元素的父元素（两个文本区域）。因此，预期的结果将是：

```
[textarea, textarea] 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:06:22.143

你为什么不`jQuery('body > input')`改用？

您可以使用以下（详细）代码来实现您想要的；它应该可以替代您的插件代码。

```
jQuery.fn.distinctDescendants = function() {
    var nodes = [];
    var parents = [];

    // First, copy over all matched elements to nodes.
    jQuery(this).each(function(index, Element) {
        nodes.push(Element);
    });

    // Then, for each of these nodes, check if it is parent to some element.
    for (var i=0; i<nodes.length; i++) {
        var node_to_check = nodes[i];
        jQuery(this).each(function(index, Element) {

            // Skip self comparisons.
            if (Element == node_to_check) {
                return;
            }

            // Use .tagName to allow .find() to work properly.
            if((jQuery(node_to_check).find(Element.tagName).length > 0)) {
                if (parents.indexOf(node_to_check) < 0) {
                    parents.push(node_to_check);
                }
            }
        });
    }

    // Finally, construct the result.
    var result = [];
    for (var i=0; i<nodes.length; i++) {
        var node_to_check = nodes[i];
        if (parents.indexOf(node_to_check) < 0) {
            result.push(node_to_check);
        }
    }

    return result;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:50:20.423

你的方法看起来不错，但你的例子可能是错误的。你说 -

`jQuery('body, input').distinctDescendants();`

我得到（错误的）结果：

```
[body.contact-page, textarea, textarea] 
```

如果选择器中没有 textarea，你怎么会得到它？使用这种方法也要小心。记住 -

jQuery('div, input').distinctDescendants(); 表示一些输入在考虑中的 div 内部，而一些在外部。虽然结果不是不可预测的，但显然很难猜到。所以大多数时候尝试使用具有类名或 id 的选择器。

请让我们知道您的反馈……我觉得功能还可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:22:34.497

我认为这是你所期待的

```
jQuery('body, input').filter(function(){if($(this).children().length >0) return false; else return true; }) 
```

或者可能是

```
jQuery('body, input, textarea').filter(function(){if($(this).children().length >0) return false; else return true; }) 
```

这将只返回文本区域（如您在示例中所希望的那样）

```
jQuery('body, textarea').filter(function(){if($(this).children().length >0) return false; else return true; }) 
```

**更新**

所以你想要这样的东西

```
var elems = 'textarea';

jQuery('body, '+ elems )
      .filter(function(){
           if($(this).find(elems ).length >0) 
               return false; 
           else return true; 
       }) 
```

返回

```
[textarea, textarea] 
```

# .net - 从 MS Access 的多个表中获取数据到 vb.net 中的数据网格视图中

> ID：10152630
> 
> 赞同：0
> 
> 时间：2012-04-14T09:49:08.443
> 
> 标签：.net, database

你好朋友这里是我的代码

```
connect()
        cmd.CommandText = "Select RegID,Name,EmailID,DOB,State,Nation,Contact1 As Contact,ParmanentAdd as Address,Religion,WillNo as WillNumber,Will from SelfInformation"
        cmd.Connection = cn
        dr = cmd.ExecuteReader(CommandBehavior.CloseConnection)
        tb.Clear()
        tb.Load(dr)
        DataGridView1.DataSource = tb
        cmd.Dispose()
        cn.Close()

        'family.........

connect()
        'cmd.CommandText = "Select RegID,FName As Father,MName As Mother,MStatus As Marital,Degree,Childran As Children,NOC As NumberOfChild from Faimly"
        'cmd.CommandType = CommandType.Text
        'cmd.Connection = cn
        'dr = cmd.ExecuteReader(CommandBehavior.CloseConnection)
        'tb.Clear()
        'tb.Load(dr)
        'DataGridView1.DataSource = tb
        'cmd.Dispose()
        'cn.Close() 
```

数据仅在 datagrid 视图中获取第二个表数据。我想从两个表中加载数据

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:53:30.083

您需要加入两个表`cmd.CommandText`并将其加载到 DataGridView 中。

```
cmd.CommandText = "Select si.RegID,si.Name,si.EmailID,si.DOB,si.State,si.Nation,si.Contact1 As Contact, " & _
           "si.ParmanentAdd as Address,si.Religion,si.WillNo as si.WillNumber,si.Will," & _
           "f.FName as Father, f.MName as Mother, f.MStatus as Marital, f.Degree, f.Childran As Children, f.NOC As NumberOfChild " & _
           " FROM SelfInformation si, Family f WHERE si.RegID = f.RegID" 
```

# ios - iOS如何在标签栏控制器中加载viewController

> ID：10152639
> 
> 赞同：-3
> 
> 时间：2012-04-14T09:49:35.433
> 
> 标签：ios, uitabbarcontroller

我有一个 tabbarController 应用程序，它有 4 个标签栏项目，我需要在第一个项目中只在这里打开一个 viewController。

我试试这个

[自我presentModalViewController：nvc动画：NO]；

工作又要回来以前的看法？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:46:57.930

从您的评论中，我现在认为我理解了这个问题，但让我重新措辞以确保我是正确的：

您想知道的是，如果您使用 presentModelViewController 打开一个模态视图控制器，您如何关闭它以返回呈现它的视图控制器。

如果这是正确的问题，这是您的答案：

如果 iOS 5.x 调用，则在已呈现的 viewController 上（模态的）

```
[self.presentingViewController dismissModalViewControllerAnimated:NO]; 
```

如果没有，请致电

```
[self.parentViewController dismissModalViewControllerAnimated:NO]; 
```

# javascript - javascript - 将字符串与正则表达式数组匹配

> ID：10152650
> 
> 赞同：63
> 
> 时间：2012-04-14T09:50:47.110
> 
> 标签：javascript, arrays, expression

JavaScript 中有没有办法获取字符串与正则表达式数组匹配的布尔值？

这个例子是（'if'语句代表我想要实现的目标）：

```
var thisExpressions = [ '/something/', '/something_else/', '/and_something_else/'];
var thisString = 'else';

if (matchInArray(thisString, thisExpressions)) {

} 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2016-06-28T11:50:21.457

使用更实用的方法，您可以使用[数组函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)通过单线实现匹配：

ECMAScript 6：

```
const regexList = [/apple/, /pear/];
const text = "banana pear";
const isMatch = regexList.some(rx => rx.test(text)); 
```

ECMAScript 5：

```
var regexList = [/apple/, /pear/];
var text = "banana pear";
var isMatch = regexList.some(function(rx) { return rx.test(text); }); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-14T10:00:23.697

[http://jsfiddle.net/9nyhh/1/](http://jsfiddle.net/9nyhh/1/)

```
var thisExpressions = [/something/, /something_else/, /and_something_else/];
var thisExpressions2 = [/else/, /something_else/, /and_something_else/];
var thisString = 'else';

function matchInArray(string, expressions) {

    var len = expressions.length,
        i = 0;

    for (; i < len; i++) {
        if (string.match(expressions[i])) {
            return true;
        }
    }

    return false;

};

setTimeout(function() {
    console.log(matchInArray(thisString, thisExpressions));
    console.log(matchInArray(thisString, thisExpressions2));
}, 200)​ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-14T12:20:31.847

您可以使用[.test()](http://www.w3schools.com/jsref/jsref_regexp_test.asp)在另一个字符串中找到您要查找的内容时返回一个布尔值：

```
var thisExpressions = [ '/something/', '/something_else/', '/and_something_else/'];
var thisString = new RegExp('\\b' + 'else' + '\\b', 'i');
var FoundIt = thisString.test(thisExpressions);  
if (FoundIt) { /* DO STUFF */ } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-14T20:52:53.127

往这边看……

```
function matchInArray(stringSearch, arrayExpressions){
    var position = String(arrayExpressions).search(stringSearch);
    var result = (position > -1) ? true : false
    return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-09T11:59:50.210

您可以将所有正则表达式合并为一个。这样字符串只被扫描一次。即使使用稍微复杂的正则表达式。

```
var thisExpressions = [ /something/, /something_else/, /and_something_else/];
var thisString = 'else';

function matchInArray(str, expr) {
    var fullExpr = new RegExp(expr
        .map(x=>x.source) // Just if you need to provide RegExp instances instead of strings or ...
        // .map(x=>x.substring(1, x.length -2)  // ...if you need to provide strings enclosed by "/" like in original question.
        .join("|")
    )
    return str.match(fullExpr);

};

if (matchInArray(thisString, thisExpressions)) {
    console.log ("Match!!");
} 
```

事实上，即使使用这种方法，如果您需要针对多个字符串检查相同的表达式集，这也不是最理想的，因为每次调用函数时您都在构建（和编译）相同的正则表达式。

更好的方法是使用这样的函数构建器：

```
var thisExpressions = [ /something/, /something_else/, /and_something_else/];
var thisString = 'else';

function matchInArray_builder(expr) {
    var fullExpr = new RegExp(expr
        .map(x=>x.source) // Just if you need to provide RegExp instances instead of strings or ...
        // .map(x=>x.substring(1, x.length -2)  // ...if you need to provide strings enclosed by "/" like in original question.
        .join("|")
    )   

    return function (str) {
        return str.match(fullExpr);

    };
};  

var matchInArray = matchInArray_builder(thisExpressions);

if (matchInArray(thisString)) {
    console.log ("Match!!");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-15T22:52:20.090

考虑将这个问题分成两部分：

1.  `filter`取出`match`给定正则表达式的项目
2.  确定过滤后的列表中是否有`0`匹配项

```
const sampleStringData = ["frog", "pig", "tiger"];

const matches = sampleStringData.filter((animal) => /any.regex.here/.test(animal));

if (matches.length === 0) {
  console.log("No matches");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-23T13:19:24.477

```
let expressions = [ '/something/', '/something_else/', '/and_something_else/'];

let str = 'else'; 
```

这里将检查以下表达式：

```
if( expressions.find(expression => expression.includes(str) ) ) {

} 
```

使用 Array .find() 方法遍历数组和 .include 来检查子字符串

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-12T23:55:23.233

**如果您有全局标志，Andersh 的解决方案将不起作用。**
真正的回报将在未来的相同测试中打开和关闭。

```
regexArray.some(rx => rx.test("a"));    //true
regexArray.some(rx => rx.test("a"));    //false
regexArray.some(rx => rx.test("a"));    //true 
```

[（在这里](https://stackoverflow.com/questions/1520800/why-does-a-regexp-with-global-flag-give-wrong-results)阅读为什么）

这有效，而且也是单线：

```
const regexList = [/apple/, /pear/];
const string = "banana pear";
const isMatch = regexList.map(rx=>rx.source).includes(string); 
```

.source 返回 RegExp 模式的文本。
箭头函数返回每个元素的源数组。它们现在将是字符串。
如果字符串在数组中，.includes 返回（如果需要索引，请使用 .indexOf）

或者：

```
function isInsideArray(string, regexArray){
    return(regexArray.map(regex=>regex.source).includes(string)); 
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-05-06T11:26:55.873

所以我们创建了一个函数，它接收一个文字字符串，以及我们想要查看的数组。它返回一个包含找到匹配项的新数组。我们在这个函数中创建一个新的 regexp 对象，然后对数组中的每个元素执行 String.search。如果找到，它将字符串推入一个新数组并返回。

```
// literal_string: a regex search, like /thisword/ig
// target_arr: the array you want to search /thisword/ig for.

function arr_grep(literal_string, target_arr) {
  var match_bin = [];
  // o_regex: a new regex object.
  var o_regex = new RegExp(literal_string);
  for (var i = 0; i < target_arr.length; i++) {
    //loop through array. regex search each element.
    var test = String(target_arr[i]).search(o_regex);
    if (test > -1) {
    // if found push the element@index into our matchbin.
    match_bin.push(target_arr[i]);
    }
  }
  return match_bin;
}

// arr_grep(/.*this_word.*/ig, someArray) 
```

# ruby - 在 Ruby 的 google API 搜索字符串中编码日文字符

> ID：10152653
> 
> 赞同：0
> 
> 时间：2012-04-14T09:51:32.947
> 
> 标签：ruby, api, unicode

我正在尝试使用自定义谷歌搜索 api 执行日语搜索，如下所示：

```
require 'httparty'
require 'json'

class Search
  include HTTParty
  format :json
end

@response = Search.get('https://www.googleapis.com/customsearch/v1?key=etcetc&q=JAPANESE SEARCH TERM') 
```

当使用日文文本时，它无法抱怨“无效的多字节字符（US-ASCII）”

如何以 Ruby 允许且谷歌自定义 api 也接受的格式输入日语文本？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:46:07.517

添加

```
# encoding: utf-8 
```

到文件顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:00:14.520

作为后续，google api 可能仍然不接受这些日语搜索词 - 使用 URI.escape 将它们转义并在搜索中使用它们非常简单

```
require 'uri' 
retVal = URI.escape("Japanese term", Regexp.new("[^#{URI::PATTERN::UNRESERVED}]")) 
```

# macos - 在 OS X 上安装 Apache Struts2

> ID：10152654
> 
> 赞同：0
> 
> 时间：2012-04-14T09:52:01.353
> 
> 标签：macos, apache, jsp, struts2

我决定看看 JSP 技术和一些围绕 JSP 的框架。但是，我很难找到有关安装 JSP API、servlet API 以及如何将它们全部配置为在 OS X 上通过 Apache 运行的信息。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:16:31.973

据我了解，这两个依赖项将由您将使用的容器提供，因为它们是规范的一部分。

要使用 Struts2，您只需将所需的依赖项放在类路径（项目的 lib 文件夹）中，当您部署应用程序时，上述依赖项将由容器完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:45:45.357

Struts2 和 JSP api 都是独立于平台的，所以不管你使用的是 OS X 还是其他操作系统。

也许让 Struts2 应用程序（包括 servlet 和 jsp apis）工作的最简单方法是[安装 maven](http://maven.apache.org/guides/getting-started/index.html)，然后执行[AppFuse](http://appfuse.org/display/APF/AppFuse+QuickStart)提供的命令行文本。

AppFuse 的 maven 项目会为你提供 Jetty，JSP api 会被标记为提供的依赖

```
<dependency>
 <groupId>javax.servlet.jsp</groupId>
 <artifactId>jsp-api</artifactId>
 <version>${jsp.version}</version>
 <scope>provided</scope>
</dependency> 
```

# css - 文字奇怪的蓝色下划线？

> ID：10152658
> 
> 赞同：1
> 
> 时间：2012-04-14T09:52:37.267
> 
> 标签：css, hover, underline

```
<p>Text adjustement
 <span>
  - [b](text)[/b] for <b>Bold</b><br>
  - [u](text)[/u] for <u>Underlined</u><br>
  - [i](text)[/i] for <i>Italic</i><br>
  - [s](text)[/s] for <s>Strike</s><br>
  <br>
  - [big](text)[/big] for big text<br>
  - [medium](text)[/medium] for medium-large text<br>
  - [small](text)[/small] for small text<br>
 </span>
</p> 
```

```
table.fancy td.tdtop p {
    color: blue;
    display: block;
}

table.fancy td.tdtop p:hover {
    text-decoration: underline;
    cursor: pointer;
}

table.fancy td.tdtop p span {
    color: black;
    display: none;
    padding: 2px;
    padding-left: 4px;
    border: 1px solid #e0e0e0;
    background: #f0f0f0;
    text-decoration: none;
}

table.fancy td.tdtop p:hover span {
    display: block;
    text-decoration: none !imporant;
    color: black !imporant;
} 
```

当您将鼠标悬停在 <p> 时，我试图让一个框显示出来，但这就是我得到的：

![](../Images/c6a509223f2f0de34f7005341edc3b8c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:18:10.627

**[演示](http://jsfiddle.net/PYhvc/)**

这是你需要的吗？清理 css 的问题。

# image - 图像不显示在 wordpress 可视化编辑器中

> ID：10152659
> 
> 赞同：0
> 
> 时间：2012-04-14T09:53:08.810
> 
> 标签：image, wordpress, visual-editor

当我查看在可视化编辑器中创建的页面时，我看不到它，而是得到一个图标，表明它没有加载。我上传了一张图片，希望它能更好地解释我的意思[http://imgur.com/OKWkO](http://imgur.com/OKWkO)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:26:38.430

问题是我没有通过wordpress添加图像文件，而是直接将路径写入静态html页面。

# objective-c - Objective-C 中的堆栈 - 框架 - 堆

> ID：10152661
> 
> 赞同：4
> 
> 时间：2012-04-14T09:53:32.883
> 
> 标签：objective-c, memory-management, heap-memory, stack-memory, stack-frame

我在这个网站上找到的所有问题都只涉及`Stack`vs`Heap`并且不讨论`Frame`所以这是我的问题。不要理解这三个之间的区别。

我知道的：

`Frame`: A`frame`就像是一个函数的实例变量的黑板。当函数运行时，所有实例变量都存储在该`frame`函数的内部。当一个函数被调用时，它 `frame`会在`stack`.

`Stack`: A`stack`可以可视化为 的物理`stack`。`frames`当一个方法（或函数）被执行时，它会从`stack`.

`Heap`: 所有对象指针都存在于`heap`.

堆栈和框架很清楚（我认为），但我的`Heap`陈述是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T11:08:58.607

> 堆：所有对象指针都存在于堆上。
> 
> Stack and Frame 很清楚（我认为），但我的 Heap 语句是否正确？

不完全的。大多数（*）动态分配的*对象*都存在于堆中，*指向*这些对象的指针存在于其他对象（或变量，它们本质上是相同的东西）中——它们可能位于堆栈或堆中。“对象”和“指向对象的指针”之间的这种区别在 Objective-C 中很重要（并非在所有语言中都如此），并且说所有“对象指针都存在于堆上”是不正确的。

(*) “最多”，因为在堆栈上分配动态对象是可能的，有时非常有用。您不能对 Objective-C 对象执行此操作，但您可以对 C 对象执行此操作（并且 C 是 Objective-C 的一部分）。不用担心这个，这个脚注更多地说明了这里描述的模型是一个简化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:57:32.847

是的。堆是动态内存的非连续空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T02:04:05.057

基于@CRD的回答...

考虑堆的另一种方式是顾名思义 - 一堆乱七八糟的东西。我们需要指针来帮助找到回到堆上的对象的方法。

# ios - NSStringWithFormat 崩溃

> ID：10152665
> 
> 赞同：1
> 
> 时间：2012-04-14T09:54:33.723
> 
> 标签：ios, nsstring, stringwithformat

简单地说，下面的代码让我对它为什么会失败感到困惑。

```
// This line works
NSString * string = [NSString stringWithFormat:@"%lu",[[NSDate date] timeIntervalSince1970]];

// This line works
string = [NSString stringWithFormat:@"%@",@"somestring"];

// This line generates and EXEC_BAD_ACCESS error
string = [NSString stringWithFormat:@"%lu%@",[[NSDate date] timeIntervalSince1970],@"somestring"]; 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:02:16.043

返回的值`[[NSDate date] timeIntervalSince1970]`是您正在打印`NSTimeInterval`的类型 。替换为and 就可以了。`typedef double NSTimeInterval;``unsigned int``@"%lu%@"``@"%f%@"`

# javascript - 允许在复选框限制脚本中进行最少选择

> ID：10152670
> 
> 赞同：1
> 
> 时间：2012-04-14T09:55:21.037
> 
> 标签：javascript

我有一个限制复选框选择的 javascript 代码。

它获取给定页面中复选框的数量，并且只允许选择其中的 30%。

这是代码：

```
function chkcontrol(j) {
  var length = document.forms['form1'].elements['item[]'].length;

  var max = Math.round(length * 0.3);
  var total = 0;
  for(var i = 0; i < length; i++){  
    if(document.forms['form1'].elements['item[]'][i].checked){
      total = total + 1;
    }
    if(total > max){
      alert("MAX 33%") ;
      document.forms['form1'].elements['item[]'][i].checked = false ;
      return false;
    }
  }
} 
```

它工作正常，但我想设置一个绝对最小保证可选复选框数。

在简单的文本中，这是我要实施的规则：

*   允许 30% 的复选框，并且如果 30% 的限制允许少于 5 个复选框 --> 允许 5 个。

例子：

页面中有 7 个复选框，仅允许 2 个。（限制为 2，小于保证的最小值 5 --> 脚本应提高限制以允许 5）

任何想法如何做到这一点？在 php 中，一个简单的 IF 条件可以解决问题，但我不熟悉 javascript！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:01:05.767

为什么不使用这样简单的东西：

```
var max = Math.max(5, Math.round(length * 0.3)); 
```

`max`是 5 或计算出的 30% 的最大值 - 这样，`max`永远不会小于 5。

# c# - 基准测试 HTTP 服务器，参考测试

> ID：10152676
> 
> 赞同：1
> 
> 时间：2012-04-14T09:56:53.430
> 
> 标签：c#, http, benchmarking

我正在为.NET 构建一个类似于 Javas Netty 的套接字框架。参考实现是一个 HTTP 服务器，我想对其进行基准测试。

是否有任何参考测试（对其他 Web 服务器的测试）已经定义了应该提供的文档？还是我必须自己测试所有服务器（以获得比较）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:24:12.143

我发现这篇文章很有帮助： http: [//www.pps.univ-paris-diderot.fr/~kerneis/research/web-benchmark/](http://www.pps.univ-paris-diderot.fr/~kerneis/research/web-benchmark/)

我还发现了这些工具：[http ://en.wikipedia.org/wiki/Web_server_benchmarking](http://en.wikipedia.org/wiki/Web_server_benchmarking)

与 HTTP 服务器相比，您的套接字服务器的开销可能要少得多，因此进行这种正面比较可能并不那么有趣。

# c# - 无法在 C# 控制台应用程序中运行 hello world 程序

> ID：10152679
> 
> 赞同：6
> 
> 时间：2012-04-14T09:57:28.327
> 
> 标签：c#

我正在学习 C# 并为控制台应用程序运行 hello world 程序。当我使用 f5 运行时，控制台弹出并立即消失。

```
 using System;

namespace CSharpConsoleApps
{
    class Program
    {
        static void Main()
        {
            Console.WriteLine("hello c sharp world ");
        }
    }
} 
```

以下是它在输出中显示的消息

```
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Windows.Forms\v4.0_4.0.0.0__b77a5c561934e089\System.Windows.Forms.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Drawing\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Drawing.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities.Sync\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.Sync.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Debugger.Runtime\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Debugger.Runtime.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Users\skumar\Documents\Visual Studio 2010\Projects\CSharpConsoleApps\CSharpConsoleApps\bin\Debug\CSharpConsoleApps.vshost.exe', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Core\v4.0_4.0.0.0__b77a5c561934e089\System.Core.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml.Linq\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.Linq.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Data.DataSetExtensions\v4.0_4.0.0.0__b77a5c561934e089\System.Data.DataSetExtensions.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.CSharp\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.CSharp.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
The thread '<No Name>' (0x12b0) has exited with code 0 (0x0).
The thread 'vshost.LoadReference' (0x674) has exited with code 0 (0x0).
'CSharpConsoleApps.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Users\skumar\Documents\Visual Studio 2010\Projects\CSharpConsoleApps\CSharpConsoleApps\bin\Debug\CSharpConsoleApps.exe', Symbols loaded.
The thread 'vshost.RunParkingWindow' (0xdd8) has exited with code 0 (0x0).
The thread '<No Name>' (0x1424) has exited with code 0 (0x0).
The program '[4320] CSharpConsoleApps.vshost.exe: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-14T09:59:02.070

您的程序成功执行，但控制台立即关闭。

为防止这种情况，请使用`Ctrl+F5`而不仅仅是`F5`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T09:59:16.777

这和你说的完全一样！

基本上，该代码只是说“显示这行文本”。因此，一旦完成，无事可做，它就会停止运行。

尝试添加

```
Console.ReadKey(); 
```

然后再次运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T06:09:06.810

计算机*完全按照*它们被编程的方式去做。在这种情况下，原始代码并没有指示计算机在终止之前等待用户的输入。因此，计算机按照显示的说明进行操作，并正常终止程序。

你可以试试：

```
namespace CSharpConsoleApps
{
    class Program
    {
        static void Main()
        {
            Console.WriteLine("hello c sharp world ");
            Console.ReadLine();
        }
    }
} 
```

并再次运行它。然后计算机将等待您在关闭控制台窗口之前按 ENTER。

# c - 带有种子的随机数生成器

> ID：10152684
> 
> 赞同：0
> 
> 时间：2012-04-14T09:58:14.233
> 
> 标签：c, random, srand

我正在使用 srand(time(NULL)) 生成随机数。知道为什么它总是给出偶数随机数吗？就我而言，它是如此。请帮助我也需要奇数。我需要一组 0 和 1。例如：{1,1,0,0,1,0,0,0,1,1,0}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:03:48.597

称呼

```
srand(time(NULL)); 
```

只有在你的程序开始时，它会“打乱”随机序列。

然后打电话

```
rand(); 
```

它会返回一个范围`0`为的数字`RAND_MAX`。

如果你只想要 0 或 1 那么你可以尝试

```
int n = rand() % 2; 
```

或者

```
int n = rand() & 0x01; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:12:03.553

想想初始化 PRNG 就像初始化一个变量......你不这样做

```
// pseudo-code
// print numbers from 1 to 10
do 10 times
    number_to_print = 1
    print number_to_print
    number_to_print++
end loop 
```

同样，`srand()`每个程序运行只应调用一次。

```
call srand() // initialize PRNG
loop
    rand()
end loop 
```

# php - 将 Ajax 数据发送到 PHP

> ID：10152685
> 
> 赞同：0
> 
> 时间：2012-04-14T09:58:18.267
> 
> 标签：php, jquery, location

我的页面上有以下 jQuery 代码：

```
function ajaxFunction() {
$.ajax({
  url:'location.php',
  type:'POST',
  data:'lat='+lat+'&long='+long,
  success:function(d){
    console.log(d);
  },
  error(w,t,f){
    console.log(w+' '+t+' '+f);
  }
});
} 
```

现在我应该在 location.php 中放入什么来让数据进入我的邮箱？我是一个完全的菜鸟，查找代码或教程是行不通的，因为我不明白......

如果脚本完成，我也可以让页面重定向到另一个页面吗？我可以添加：

```
window.location.href = "http://stackoverflow.com"; 
```

还是我应该放更多代码...我在互联网上找到了所有这些男女同校，因为我什么都不懂，所以你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:26:38.460

在您的 location.php 中，您可以执行以下操作以使 php 脚本接收到的数据进入您的邮箱：

```
$messageBody = "lat: " . $_POST['lat'] . " long: " . $_POST['long'];
if (mail("youremail@domain.com", "The Subject Line", $messageBody)) {
    echo "success";
    exit;
} 
```

查看链接以获取有关 mail() 函数的更多信息：http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

重定向：

```
function ajaxFunction(lat, long) {
$.ajax({
  url:'location.php',
  type:'POST',
  data:'lat='+lat+'&long='+long,
  success:function(d){
    // When the ajax call is successful, the redirection should happen here
    window.location = "http://stackoverflow.com";
  },
  error(w,t,f){
    // this is when the ajax call fails
    console.log(w+' '+t+' '+f);
  }
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:02:36.073

您可以使用[`mail()`](http://de.php.net/manual/en/function.mail.php)PHP 中的函数发送电子邮件。
您还需要修复您的 JS 代码 - 除非您实际创建了全局变量`lat`，否则`long`它们将是未定义的。

# asp.net-mvc - _PublishedWebsites 不包括网络字体？

> ID：10152689
> 
> 赞同：1
> 
> 时间：2012-04-14T09:59:20.480
> 
> 标签：asp.net-mvc, webfonts, build-script

我有点困惑，我在 Visual Studio 2010 中有一个 MVC3 项目，并且作为我们的构建脚本的一部分，它将编译输出到“输出”目录。

这一切都很好，但是我们现在使用 webfonts 作为我们网站的一部分，无论我尝试什么，webfonts 都无法找到 _PublishedWebsites 文件夹，即使复制到输出目录只是将它放在一般输出文件夹中而不是_PublishedWebsites 一...

所以我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:09:14.817

也有同样的问题。打开项目后，在解决方案资源管理器中选择所有 webfont 文件。右键单击任何内容，然后从上下文菜单中选择“属性”。在将出现的集合属性对话框中，将“构建操作”设置为“内容”。这将告诉包汇编程序确实将这些文件视为内容。

# java - 如何安全地为桌面应用程序实现“自动登录”功能？

> ID：10152691
> 
> 赞同：0
> 
> 时间：2012-04-14T09:59:46.300
> 
> 标签：java, security, client-side

这就是问题所在：我正在开发一个桌面应用程序来与服务器交互，并且客户端必须登录。类似于 Skype 或 IM 应用程序。我想给客户自动登录的选项，即。无需在每次加载应用程序时都输入他们的凭据。

我怎样才能做到这一点，同时保护客户的信息？

谢谢，我这几天一直在思考这个问题，但我似乎无法提出解决方案。在这个阶段，任何帮助或指导都是黄金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:26:21.557

如果您使用与服务器的安全通信通道（例如使用 SSL），那么您可以发送用户名和密码的哈希（使用像 SHA-512 这样的加密安全哈希函数 - 没有已知的可行冲突或原像攻击）。

您在本地保存的是用户名和密码的哈希值。鉴于与服务器的通信通道是安全的，其他任何人都不会看到发送的信息（不可能进行重放攻击）。并且使用加密安全的哈希函数意味着它是一个单向函数，不会“返回”到原始输入。

另一种方法是在成功登录后从服务器获取身份验证令牌。然后协议可以在一定的时间内接受用户的身份验证并结合令牌。然后你不必在本地存储密码的哈希值，只需要用户名和令牌。因此，如果有人获得令牌，它将在某个时候过期。但请记住，不应使用另一个令牌重新颁发令牌，只能使用正确的用户名/密码组合。此外，如果使用令牌登录，用户也不应该能够更改/查看密码。如果您想走得更远，您还可以将令牌限制为只能从某些 IP 地址工作。

# windows-phone-7 - windows phone 7中的提醒功能？

> ID：10152692
> 
> 赞同：1
> 
> 时间：2012-04-14T09:59:46.797
> 
> 标签：windows-phone-7

我正在开发 Windows Phone 7 应用程序。如何在 7.0 中设置提醒功能？

我们可以在 7.0 中设置提醒功能吗？我看到一些仅在 7.1 中支持的文章。但是我的应用程序是在 7.0 中的。怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:52:48.527

7.0 中没有可用的提醒功能

# css - 动态和固定 div 高度

> ID：10152695
> 
> 赞同：0
> 
> 时间：2012-04-14T09:59:57.220
> 
> 标签：css, dynamic, html, height, fixed

我正在尝试创建一个包含 3 个不同 div 的 div：页眉、内容和页脚。页眉和页脚有固定的 div，分别位于容器 div 的顶部和底部。内容应该填满剩余的可用空间，并在容器 div 调整大小时动态适应，并带有一个 overflow: auto 和一个与容器剩余空间相对应的 max-height。我怎样才能实现这种行为？

```
#container
     #header
     #body
     #footer

#container {
    display: table;
    height: 300px;
    width: 300px;
}

#container #header {
    background: #888;
    height: 30px;
    width: 100%;
    display: table-row;
}

#container #body {
    background: #777;
    display: table-row;
    height: 100%;
    max-height: 100%;
    overflow: auto;
    width: 100%;
}

#container #footer {
    background: #888;
    display: table-row;
    height: 30px;
    width: 100%;
} 
```

这是我已经拥有的。这里的问题是 #body 不会接受任何 max-height 参数并根据其内容调整自身大小。演示[http://jsfiddle.net/deHvH/1/](http://jsfiddle.net/deHvH/1/)，带有 jQ​​uery UI Resizable [http://jsfiddle.net/deHvH/2/](http://jsfiddle.net/deHvH/2/)

编辑： flexbox 模型是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T12:42:37.080

您可以使用以下 CSS 相应地调整最大高度。

```
#container {
    height: 300px;
    width: 300px;
}

#container #header {
    background: #888;
    height: 30px;
    width: 100%;
}

#container #body {
    background: #777;
    max-height: 200px;
    overflow: auto;
}

#container #footer {
    background: #888;
    height: 30px;
    width: 100%;
} 
```

这解决了你的顾虑吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:55:53.900

flexbox 模型正是我所需要的！

```
#container {
    display: table;
    height: 300px;
    width: 300px;
    display: box;
}

#container #header {
    background: #888;
    height: 30px;
}

#container #body {
    background: #777;
    box-flex: 1;
    overflow: auto;
}

#container #footer {
    background: #888;
    height: 30px;
} 
```

# java - “ArrayList ”和“ArrayList ”之间的实际区别是什么？

> ID：10152697
> 
> 赞同：5
> 
> 时间：2012-04-14T10:00:03.193
> 
> 标签：java, generics

我查看了问题[q1](https://stackoverflow.com/questions/1750273/what-is-the-difference-between-bounded-wildcard-and-type-parameters)、[q2](https://stackoverflow.com/questions/6361107/what-is-the-difference-between-using-extends-someabstract-vs-someabstract)、[q3](https://stackoverflow.com/questions/8055389/whats-the-difference-between-and-extends-object-in-java-generics)，但它们并没有完全涵盖我的问题。

请注意，`ArrayList<A> and ArrayList<? extends A>`用于声明变量或参数（不用于创建新的泛型类）。

声明对象属性时，这两个表达式是否等效（案例 1）？：

```
class Foo {

  private ArrayList<A> aList; // == ArrayList<? extends A> aList;
} 
```

编辑：从允许将什么样的对象添加到的角度来看，这两个表达式是否等效`aList`？，但在以下情况下的意义不同？

但是在参数声明中使用时它们是不同的（案例2）？：

```
void methodFoo(ArrayList<A> al)  !=  void methodFoo(ArrayList<? extends A> al) 
```

因为第一个只允许传递 ArrayList 对象，而第二个就像“更宽松”允许发送 `ArrayList<A1>`和`ArrayList<A2>`（只要 A1 和 A2 扩展 A）？

如果这是正确的，是否还有其他两种表达方式实际上不同的情况？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T10:40:26.653

让我们看一些实际的例子。说，你有：

```
List<Number> list; 
```

这意味着分配给此变量或字段的任何内容都需要`Number`和输出`Number`，因此您始终知道会发生什么。`Integer`可以添加到此列表中，因为`Integer`extends `Number`。但是，您不能分配`ArrayList<Long>`给这个列表。

但是考虑一下这种情况：

```
List<? extends Number> list; 
```

这个说：嘿，这是一个扩展的东西的列表`Number`，但没有人知道究竟是什么。这是什么意思？这意味着您可以分配`ArrayList<Long>`给这个列表，例如，在第一种情况下您不能。您仍然知道此列表*输出*的内容将是 a `Number`，但您不能*再将*a`Integer`放入其中。

还有一个相反的情况：

```
List<? super Number> list; 
```

通过打印你说：这是一个列表`Number`或其超类。这就是一切反之亦然的地方。该列表现在可以参考`ArrayList<Object>`和`ArrayList<Number>`。现在我们不知道这个列表会*输出*什么。会是一个`Number`吗？会是一个`Object`吗？但是现在我们知道我们可以*将*a`Number`以及`Number`like`Integer`或的任何子类放入此列表中`Long`。

顺便说一句，有一条规则，说**producer extends，consumer super**（简称PECS）。如果您需要列表来输出值，它是生产者，这是第二种情况。如果你需要列表接受值，它是一个消费者，这是第三种情况。如果两者都需要，请不要使用通配符（这是第一种情况）。

我希望这能解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T10:39:44.473

这将解释差异：

```
public class GenericsTest {
  private ArrayList<A> la;
  private ArrayList<? extends A> lexta;

  void doListA(ArrayList<A> la) {}
  void doListExtA(ArrayList<? extends A> lexta) {}

  void tester() {
    la = new ArrayList<SubA>(); // Compiler error: Type mismatch
    doListA(new ArrayList<SubA>());  // Compiler error: Type mismatch
    lexta = new ArrayList<SubA>();
    doListExtA(new ArrayList<SubA>());
  }

  static class A {}
  static class SubA extends A {}
} 
```

如您所见，调用方法和分配变量/实例字段具有相同的规则。将方法调用视为将参数分配给其声明的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:24:01.420

`private ArrayList<A> aList;`用作变量声明并不等同于使用通配符`private ArrayList<? extends A> aList;`

通配符版本将允许您分配扩展 A 和 A 本身的任何类型的 ArrayLists，但会拒绝将元素添加到列表中，因为它无法确定它是否是类型安全的。`ArrayList<A>`另一方面，您只能分配 A 类型的 ArrayList（或 ArrayList 的扩展），然后您可以添加 A 元素和任何扩展 A 的元素。

仅供参考：您应该更喜欢使用更抽象的类型来声明变量/参数，例如`List<A>`or `Collection<A>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T10:04:22.467

`ArrayList<A>`表示特定的 A 类，其中 as`ArrayList<? extends A>`表示 A 类或任何扩展 A 的类（A 的子类），这使其更通用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T11:22:25.920

主要区别在于，如果泛型形式用作基类（或接口）中方法的参数或返回类型，则它允许更大范围的类型签名计为覆盖而不是重载。

[Java中的函数重载](https://stackoverflow.com/questions/2047793/function-override-overload-in-java)

例如，以下代码是合法的（在 Java 7 中）：

```
interface A
{
    List<? extends Number> getSomeNumbers();
}

class B implements A
{
    @Override
    public ArrayList<Integer> getSomeNumbers()
    {
        return new ArrayList<>();
    }
} 
```

[枚举<? 扩展 ZipEntry> 和 Enumeration<ZipEntry>？](https://stackoverflow.com/questions/618148/difference-between-enumeration-extends-zipentry-and-enumerationzipentry)

所有这一切意味着，有时您可以编写在其他人使用时需要较少强制转换的代码。这不仅应该减少他们必须做的打字量，而且还应该消除可能的失败。

当然，Java 泛型的问题在于它们是以一种受向后兼容性限制的方式引入的。因此，并非一切都像您认为应该的那样有效，而且关于哪些具体有效，哪些无效，细节变得非常棘手。

[http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ812](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ812)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T10:54:23.543

一开始很难掌握，但继承*不适*用于泛型，即如果 B 扩展 A，`List<B>`则不是 (不能分配给) 的“子类” `List<A>`。此外，`List<? extends A>`不是（不能分配给）的“子类” `List<A>`。

# ruby-on-rails - heroku 重定向 uri 错误

> ID：10152698
> 
> 赞同：0
> 
> 时间：2012-04-14T10:00:15.560
> 
> 标签：ruby-on-rails, facebook-graph-api, heroku

我有带有 oauth2、omniauth 和 fb_graph 的应用程序，并且在本地工作得很好。我有开发、测试和生产环境。我的omniauth.rb是

```
 if Rails.env.production?
 provider :twitter, '***', '***'
 provider :facebook, '***', '***', {:scope => 'user_about_me,friends_about_me,user_activities,friends_activities,user_birthday,friends_birthday,user_checkins,friends_checkins,user_education_history,friends_education_history,user_events,friends_events,user_groups,friends_groups,user_hometown,friends_hometown,user_interests,friends_interests,user_likes,friends_likes,user_location,friends_location,user_notes,friends_notes,user_online_presence,friends_online_presence,user_photo_video_tags,friends_photo_video_tags,user_photos,friends_photos,user_questions,friends_questions,user_relationships,friends_relationships,user_relationship_details,friends_relationship_details,user_religion_politics,friends_religion_politics,user_status,friends_status,user_videos,friends_videos,user_website,friends_website,user_work_history,friends_work_history,email,read_friendlists,read_insights,read_mailbox,read_requests,read_stream,xmpp_login,ads_management,create_event,manage_friendlists,manage_notifications,offline_access,publish_checkins,publish_stream,rsvp_event,publish_actions,manage_pages,user_subscriptions', :client_options => {:ssl => {:ca_file => "/usr/lib/ssl/certs/ca-certificates.crt"}}}
 elsif Rails.env.development?
 provider :twitter, '******',     '******'
 provider :facebook, '******', '*******', :scope => 'user_about_me,friends_about_me,user_activities,friends_activities,user_birthday,friends_birthday,user_checkins,friends_checkins,user_education_history,friends_education_history,user_events,friends_events,user_groups,friends_groups,user_hometown,friends_hometown,user_interests,friends_interests,user_likes,friends_likes,user_location,friends_location,user_notes,friends_notes,user_online_presence,friends_online_presence,user_photo_video_tags,friends_photo_video_tags,user_photos,friends_photos,user_questions,friends_questions,user_relationships,friends_relationships,user_relationship_details,friends_relationship_details,user_religion_politics,friends_religion_politics,user_status,friends_status,user_videos,friends_videos,user_website,friends_website,user_work_history,friends_work_history,email,read_friendlists,read_insights,read_mailbox,read_requests,read_stream,xmpp_login,ads_management,create_event,manage_friendlists,manage_notifications,offline_access,publish_checkins,publish_stream,rsvp_event,publish_actions,manage_pages,user_subscriptions', :client_options => {:ssl => {:ca_file => "/etc/ssl/certs"}} 
```

身份验证后的本地化使用此重定向 uri 进行授权

```
 http://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=*******&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Ffacebook%2Fcallback&display=page&response_type=code&perms=user_about_me%2Cfriends_about_me%2Cuser_activities%2Cfriends_activities%2Cuser_birthday%2Cfriends_birthday%2Cuser_checkins%2Cfriends_checkins%2Cuser_education_history%2Cfriends_education_history%2Cuser_events%2Cfriends_events%2Cuser_groups%2Cfriends_groups%2Cuser_hometown%2Cfriends_hometown%2Cuser_interests%2Cfriends_interests%2Cuser_likes%2Cfriends_likes%2Cuser_location%2Cfriends_location%2Cuser_notes%2Cfriends_notes%2Cuser_online_presence%2Cfriends_online_presence%2Cuser_photo_video_tags%2Cfriends_photo_video_tags%2Cuser_photos%2Cfriends_photos%2Cuser_questions%2Cfriends_questions%2Cuser_relationships%2Cfriends_relationships%2Cuser_relationship_details%2Cfriends_relationship_details%2Cuser_religion_politics%2Cfriends_religion_politics%2Cuser_status%2Cfriends_status%2Cuser_videos%2Cfriends_videos%2Cuser_website%2Cfriends_website%2Cuser_work_history%2Cfriends_work_history%2Cemail%2Cread_friendlists%2Cread_insights%2Cread_mailbox%2Cread_requests%2Cread_stream%2Cxmpp_login%2Cads_management%2Ccreate_event%2Cmanage_friendlists%2Cmanage_notifications%2Coffline_access%2Cpublish_checkins%2Cpublish_stream%2Crsvp_event%2Cpublish_actions%2Cmanage_pages%2Cuser_subscriptions&fbconnect=1&from_login=1&client_id=****** 
```

这是正确的重定向 uri。

但是在身份验证后的heroku中，使用此重定向uri进行授权

```
 http://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=******&redirect_uri=http%3A%2F%2Feap2.heroku.com%2Fauth%2Ffacebook%2Fcallback&display=page&response_type=code&perms=email%2Coffline_access&fbconnect=1&from_login=1&client_id=******* 
```

这是错误的；显然缺少权限。我不知道为什么。

ps我的gemfile

```
 source 'http://rubygems.org'

  gem 'rails', '3.0.11'
  gem 'pg'
  gem 'devise'
  gem "recaptcha", :require => "recaptcha/rails"
  gem 'sinatra'
  gem 'mogli'
  gem 'gravatar_image_tag', '1.0.0.pre2'
  gem 'rails-i18n'
  gem 'will_paginate', '~> 3.0.pre2'
  gem 'RedCloth'
  gem 'coderay'
  gem 'validate_url'
  gem 'thin'
  gem 'acts-as-taggable-on', '~> 2.2.2'
  gem 'omniauth'
  gem 'omniauth-twitter'
  gem 'omniauth-facebook'
  gem 'omniauth-openid'
  gem 'omniauth-github'
  gem 'multi_json'
  gem 'dalli'
  gem 'oauth2'
  gem 'fb_graph'

  group     :test do
     gem 'sqlite3'
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:32:22.340

我之前的production.rb

```
 config.cache_classes = true
  config.cache_store = :dalli_store
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.action_mailer.default_url_options = { :host => 'eap2.heroku.com' }
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
     :address              => "smtp.gmail.com",
     :port                 => 587,
     :domain               => 'gmail.com',
     :user_name            => '****@gmail.com',
     :password             => '*****',
     :authentication       => 'plain',
     :enable_starttls_auto => true  }
  config.action_dispatch.x_sendfile_header = "X-Sendfile"
  config.i18n.fallbacks = true
  config.active_support.deprecation = :notify
  provider :twitter, '***', '***'
  provider :facebook, '***', '***', :scope => user_about_me,friends_about_me,user_activities,friends_activities
 end 
```

和我的解决方案后的生产 rb

```
 config.cache_classes = true
  config.cache_store = :dalli_store
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.action_mailer.default_url_options = { :host => 'eap2.heroku.com' }
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
     :address              => "smtp.gmail.com",
     :port                 => 587,
     :domain               => 'gmail.com',
     :user_name            => '****@gmail.com',
     :password             => '*****',
     :authentication       => 'plain',
     :enable_starttls_auto => true  }
  config.action_dispatch.x_sendfile_header = "X-Sendfile"
  config.i18n.fallbacks = true
  config.active_support.deprecation = :notify
  end 
```

这意味着 Rails 只需要 config/initializers/omniauth.rb 文件而不是 config/environements/production.rb 文件中的 twitter 和 facebook 配置。

# php - 从 iFrame 中提取 url 变量

> ID：10152705
> 
> 赞同：0
> 
> 时间：2012-04-14T10:01:03.077
> 
> 标签：php, javascript, iframe

我正在使用 Bits-on-the-run API 使用[这些说明](http://www.longtailvideo.com/support/bits-on-the-run/15984/upload-videos-within-your-cms)上传视频，问题是我必须将上传表单包含到 iframe 中，上传表单将上传视频，完成后它将重定向到另一个以视频 ID 作为 url 变量的页面。

我要做的是在上传完成时从 iframe 中获取该 url 变量。

这是 iframe 示例：

```
<iframe width="650" scrolling="auto" height="220" frameborder="0" src="http://developer.longtailvideo.com/botr/demo/upload/"></iframe> 
```

当上传完成时，iframe 重定向到：

```
<iframe width="650" scrolling="auto" height="220" frameborder="0" src="http://developer.longtailvideo.com/botr/demo/upload/show.php?video_key=xxxxx"></iframe> 
```

这样 xxxxx 是我要在父页面中提取的视频密钥，我将在隐藏输入中使用此视频密钥以提交另一个表单。

当重定向发生时，我可以得到这个 url 变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:37:08.807

试试这个：

```
ifr=document.getElementById('Your_Iframe_Id');

ifr.contentWindow.onload=function (){
  ssearch=ifr.contentWindow.location.search; // = ?video_key=xxxxx
  /* do something with ssearch */
  return;
} 
```

在这种情况下，计时非常重要，因为`ifr.contentWindow`在首次加载之前不存在。我建议，您首先从服务器加载一个页面`IFRAME`，然后将`onload`-eventhandler 从该页面分配给主机页面。

或者您可以等到整个主机页面加载`window.onload`完毕（），然后为`ifr.contentWindow`.

# java - SSO，未知数

> ID：10152708
> 
> 赞同：2
> 
> 时间：2012-04-14T10:01:33.567
> 
> 标签：java, spring-security, single-sign-on, cas

我开始为我们为同一个客户端制作并仍在维护的 3 个不同的 web 应用程序开发**SSO解决方案。**

**问题是，所有 3 个都通过第四个单独的应用程序**将他们的用户和登录信息存储在同一个地方，该应用程序只提供基本的 restful api 服务。这基本上意味着当一个人尝试登录时，我们实际上会调用其余服务来询问此用户名和密码是否正确。

在某种程度上，这第四个宁静的东西已经完成了我们需要*的至少*一半的工作。

我们现在需要一种方法让用户登录到 webapp A，然后点击链接（或简单地输入其 url）到 webapp B（或简单地输入其 url）并到达已**登录**的位置（反之亦然）。

我已经阅读了很多关于**CAS**和**openID**甚至**oauth**的内容，但我并不能真正下定决心。这种**模式**是中心化的吗？去中心化？

我的一万英尺视图表明我只需要以某种方式将这个“缺失的功能”添加到我们宁静的 api 服务器。

但是怎么做？

ps：这3个是完全分开的。部署在不同的机器上（其中两台在 glassfish 上运行，另一台在 tomcat 上运行）。不同的域也是。

pps：它们都是 spring 驱动的 webapps（因此它们使用**spring-security**）

ppps：截至今天，还有其他 webapps 使用我们的 restul api（非 spring，非 java）。这个 sso 解决方案可能也必须准备好处理这些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:52:57.117

是的，听起来您需要一个“真正的”单点登录系统，而不仅仅是一个集中的凭证存储库。正如您所提到的，有几种选择：

1.  OpenId - 更适合您希望允许用户使用由第三方维护的凭据登录您的系统的 Internet 类型的应用程序。Stackoverflow 就是一个典型的例子。您可以使用您的谷歌帐户等登录。

2.  Oauth 提供伪身份验证和 sso - 而 OpenId 说“这是用户 x” oauth 说“这个用户可以访问 x 的信息”......所以你可以假设用户是 x。

3.  [CAS](http://www.jasig.org/cas)、[Cloudseal](http://www.cloudseal.com)、[OpenAM](http://forgerock.com/openam.html)等都提供真正的单点登录，适用于 Intranet 或 Extranet 环境。CAS 和 Cloudseal 对 Spring 的支持特别好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:03:42.270

*   受信任的站点（白名单中的依赖方 (RP) - 在您的情况下为应用程序 a、b、c）向主站点（提供者 - “第四个单独的应用程序”）发出请求（重定向），并带有返回 url。
*   主站点确保请求（returnURL）来自域白名单
*   登录用户（如果未登录，则显示登录表单），将用户标记为登录数据库并将临时令牌添加到用户数据库。
*   主站点返回（重定向）到带有令牌的 RP。
*   RP 使用令牌查看数据库，记录用户并删除令牌。

SSOff 也很简单：只需将用户数据库中的每个请求都检查到布尔记录（userLogged）中。没有重定向。注销时只需将记录 (userLogged) 更改为 false，每个站点都会知道。

# algorithm - 二部图中的最佳匹配（将标签与图上的点进行关联）

> ID：10152710
> 
> 赞同：4
> 
> 时间：2012-04-14T10:01:53.267
> 
> 标签：algorithm, mapping, plot, bipartite

我正在尝试从绘制点并且部分或全部具有标签的图形 xy 图中提取语义。标签被绘制在“点附近”，以便人们通常可以理解哪个标签与哪个点对应。例如，在此图中，可以清楚地看到哪个标签（数字）属于哪个点（*），并且基于欧几里得距离的算法将起作用。（标签和点没有语义排序 - 例如散点图）

```
 *1
    *2

        *3

      *4 
```

在拥挤的图中，创作软件/人可以将标签放置在不同的方向以避免重叠。例如在

```
1**2
 **4
 3 
```

人类读者通常可以计算出哪个标签与哪个标签相关联。

我接受的一种解决方案是创建一个欧几里得距离矩阵并打乱行以获得函数的最小值（例如，对角线或其他启发式距离的平方和）。在第二个示例中（从 NW 角顺时针标记为 a、b、c、d 的点）我们有一个距离矩阵（到 1 dp）

```
 a   b   c   d
 1ab2    1  1.0 2.0 2.2 1.4    
  dc4    2  2.0 1.0 1.4 2.2
  3      3  2.0 2.2 1.4 1.0
         4  2.2 1.4 1.0 2.0 
```

我们需要给`a1 b2 c4 d3`. 交换第 3 行和第 4 行给出对角线的最小和。这是一个更复杂的示例，其中简单地选择最近的可能会失败

```
 *1*2*5
  **4
  3 *6 
```

如果解决了这个问题，那么我将需要处理标签数量可能小于或大于点数的情况。

如果算法是标准的，我将不胜感激开源 Java 的指针（例如 JAMA 或 Apache 数学）

注意：这个 SO 答案[将附近的点与路径关联起来](https://stackoverflow.com/questions/6605834/associating-nearby-points-with-a-path)并不能很好地作为答案，因为给出了通过这些点的路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T01:31:01.820

你有一个[完整的二部图](http://%28http://en.wikipedia.org/wiki/Bipartite_graph%29)，一部分是数字，另一部分是点。该图中边的权重是数字和点之间的欧几里得距离。你的任务是找到最小重量的[匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29)。

这是一个已知问题，并且有一个众所周知的算法，名为[`Hungarian Algorithm`](http://en.wikipedia.org/wiki/Hungarian_algorithm)：

**来自维基：**

> 给定一个非负 n×n 矩阵，其中第 i 行第 j 列中的元素表示将第 j 个点分配给第 i 个数的成本。我们必须找到将点分配给成本最低的数字。如果目标是找到产生最大成本的分配，则可以通过将每个成本替换为减去成本的最大成本来更改问题以适应设置。
> 
> 如果我们使用二分图来表述问题，则该算法更容易描述。我们有一个完整的二部图 G=(S, T; E)，有 n 个顶点 (S) 和 n 个点顶点 (T)，每条边都有一个非负成本 c(i,j)。我们希望以最低的成本找到完美的匹配。匈牙利方法是一种组合优化算法，它在多项式时间内解决了分配问题，并预见了后来的原始对偶方法。F

**有关详细的算法和代码，您可以查看[topcoder 文章](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=hungarianAlgorithm) 和此[pdf](http://www.cse.ust.hk/%7Egolin/COMP572/Notes/Matching.pdf)可能使用**

有一个[媒体](http://www.wikihow.com/Use-the-Hungarian-Algorithm)文件来描述它。（该视频解释了匈牙利算法为何有效）

> 算法：步骤1：-准备一个成本矩阵。如果成本矩阵不是方阵，则添加一个具有零成本元素的虚拟行（列）。
> 
> 第 2 步：- 从相应行的所有元素中减去每行中的最小元素。
> 
> 步骤3：-通过从相应列的所有元素中减去每列的最小元素来进一步修改结果矩阵。从而获得修改后的矩阵。
> 
> 第 4 步：- 然后，绘制最小数量的水平和垂直线以覆盖结果矩阵中的所有零。让最小的线数量为 N。现在有 2 种可能的情况。
> 
> 案例 1 - 如果 N=n，其中 n 是矩阵的阶，则可以进行最佳分配。因此进行分配以获得所需的解决方案。
> 
> 情况 2 - 如果 N 小于 n 则继续执行步骤 5
> 
> 步骤5：确定矩阵中最小的未覆盖元素（N行未覆盖的元素）。从所有未覆盖元素中减去这个最小元素，并在水平和垂直线的交点处添加相同的元素。从而获得第二个修改矩阵。
> 
> 第 6 步：- 重复第 (3) 步和第 (4) 步，直到我们得到第 4 步的情况 (1)。
> 
> 第 7 步：- （进行零分配）连续检查行，直到找到逐行精确的单个零。circle(o) 这个零进行分配。然后在所有零上标记一个 cross(x) 如果位于带圆圈的零的列，表明它们不能被考虑用于将来的分配。以这种方式继续，直到检查完所有的零。对列也重复相同的过程。
> 
> 第 8 步：- 连续重复第 6 步，直到出现以下情况之一 - (i) 如果没有留下未标记的零，则过程结束或 (ii) 如果在任何列或行中存在多个未标记的零然后，任意圈出未标记的零之一，并在其行或列中剩余零的单元格中标记一个十字。重复该过程，直到矩阵中没有未标记的零。
> 
> 第 9 步：- 因此，在矩阵的每一行和每一列中恰好有一个标记为圆圈的零。与这些标记的圆零对应的分配将给出最佳分配。

有关详细信息，请参阅 wiki 和[http://www.ams.jhu.edu/~castello/362/Handouts/hungarian.pdf](http://www.ams.jhu.edu/%7Ecastello/362/Handouts/hungarian.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:33:58.123

如果我理解了您的问题，那么您展示的每个示例都有一个独特的最佳解决方案，可以最小化点和标签之间距离的平方和。点和标签之间有指数级的映射，但也许您可以尝试以下方法：

1.  在多项式时间内，计算每个标签到每个点的距离。在一般图中，您必须解决*所有对最短路径问题*。在这里，正如 Mikola 指出的那样，您可以使用双重嵌套并使用坐标几何：选择欧几里得距离或曼哈顿距离。

2.  在多项式时间内，找到点和标签之间的*最小成本二分匹配。*此问题的解决方案将为您提供点和标签之间的匹配，以最小化总距离。

所有算法（最短路径、欧几里得距离、最小成本二分匹配）都是标准的，可以在 Wikipedia 上找到。

稍微不标准的是，如果您以最低成本找到不止一个二分匹配。如果发生这种情况，您可以尝试所有这些，看看是否有一个匹配可以最小化距离平方和。如果还有*平手*，我建议您将水平距离视为略短于垂直距离，然后再次运行算法。如果您仍然有联系，则可能没有唯一的解决方案，或者您可能希望将“右侧标签”视为比左侧标签稍微“接近”。

但是当有一个唯一的解决方案时，所有对最短路径遵循最小成本二分匹配应该找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:29:31.820

我还没有看到这种情况下的通用算法。因此，我会务实地解决这个问题：

假设属于某个点的标签始终是最近的（可能与其他标签），您可以定位[区域增长](http://en.wikipedia.org/wiki/Region_growing)算法（参见动画 gif）。迭代每个增长步骤的每个点（红色）（围绕数字标签圈）。增长步长由点和标签之间的最小距离决定。

![区域增长](../Images/b9df9ba770f4ecedad20b39aeabf4d6f.png)

对点和标签使用临时列表。每次找到一个确定的对，删除相应的点和标签。如果有多个最近点（此处：标签 2），则只需跳过标签。通过解决其他点标签组合（此处为标签 3），它们应该在另一个迭代中映射。

在由于整体情况不明确而没有任何进展的迭代之后，您可以定义一种选择方法来解决它们（例如，更喜欢顶部而不是底部，左侧优于右侧）。

# gwt - gwt 初学者 - 是跨 gwt 应用程序的不同模块保留的会话变量+跨重定向到 3rd 方站点并返回到我们的站点

> ID：10152716
> 
> 赞同：0
> 
> 时间：2012-04-14T10:02:18.290
> 
> 标签：gwt, oauth

我正在尝试在 gwt 应用程序中实现 oauth 身份验证。

在此，最初显示一个登录页面——用户在这里选择他的 oauth 提供者，然后一些数据存储在会话中，并且用户被重定向到 oauth 提供者。登录后，他将返回到同一 GWT 应用程序中的另一个页面。

这就是我想要的流程，但我对存储在会话中的数据感到困惑——在用户访问 oauth 提供商的网站之前存储的数据，在成功登录后用户被送回后仍然可以访问吗？在 GWT 应用程序中将数据存储在会话中是否有任何条件/捕获会影响上述场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:27:12.123

如果您的服务器端是 java，那么 GWT 中的所有内容都是 servlet，因此 GWT 的工作方式实际上没有区别。会话一旦创建就会有一个过期时间，它将在整个应用程序中可见。

如果第三方页面到您的站点重定向在会话提供的时间内执行。您存储在会话中的所有数据将对您可见。

# maven - 是否有支持 P2P 模式的 Maven 插件？

> ID：10152719
> 
> 赞同：0
> 
> 时间：2012-04-14T10:03:01.010
> 
> 标签：maven, maven-2, maven-plugin, p2p

我在一家大公司工作，我们使用内部安装的 Maven 代理来下载依赖项。我们必须使用代理，因为我们的网络（Websense）不允许下载扩展名为 .jar 的文件。因此，每当 pom 声明外部依赖项时，maven 都会尝试从代理获取 jar 文件。如果它不在代理中，则代理本身会从 Internet 下载它，因为代理不在此 Websense Nonsense 的权限范围内。这种方法虽然并不完美，但总的来说很有效。

不起作用的事情是

1.  每当我们需要包含在代理服务器中没有声明存储库的依赖项时，必须手动包含该存储库 url。
2.  内部 Maven 代理没有足够的带宽来扩展。有时下载 7 MB 的 jar 文件需要 10 分钟。

作为一种解决方法，我们认为如果可以在 maven 中安装 P2P 插件，那么每当需要 jar 文件时，maven 可以在访问内部 maven 之前首先检查同行（例如坐在我旁边的开发人员的本地 maven 存储库）代理。这将大大减少下载依赖项所需的时间，并可能避免让某人发送电子邮件以手动添加 maven 存储库 url 的官僚作风。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:49:04.667

您应该安装存储库管理器（按字母顺序排列的 Artifactory、Archiva、Nexus）。目的是有一个通过代理访问互联网的单点，这应该可以解决问题。所有开发人员只能访问存储库管理器。

# jquery - 向文本框 onFocus 添加阴影

> ID：10152720
> 
> 赞同：0
> 
> 时间：2012-04-14T10:03:06.017
> 
> 标签：jquery, css, shadow

我想在我的注册表单上制作这种 Pinterest 效果 - 当用户关注输入文本字段或文本区域时，我希望该字段或区域周围有一个柔和的阴影，如下所示：

![在此处输入图像描述](../Images/2e0dad152afefad333c15c54aa4dd51e.png)

所以我尝试了以下方法 - 我写了一个 CSS 类

```
.inputShadow{
box-shadow:0 0 10px 5px #900;
} 
```

并尝试使用 onFocus="addShadow()" 添加它，这是 addShadow() 函数：

```
function addShadow(){
    $(this).addClass("inputShadow");
} 
```

但我没有得到任何阴影。然后我尝试了这个：

```
$(function(){
    $("input").onfocus("addClass","inputShadow");
}); 
```

也没有结果。最后我尝试了这个：

```
$(function(){
    $("input").onfocus("css","box-shadow:0 0 10px 5px #900;");
}); 
```

但这也没有帮助我。

任何想法如何使它工作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:12:54.310

此任务无需使用 jQuery，您也可以仅使用 css：

```
input:focus {
  /* Your shadow css here */
  -moz-box-shadow:0 0 10px 5px #900;
  -webkit-box-shadow:0 0 10px 5px #900;
  box-shadow:0 0 10px 5px #900;
} 
```

但是 creminsn 是对的，box-shadow 可能不适用于每个浏览器，您需要添加浏览器特定的前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:07:56.483

您使用什么浏览器作为 mozilla 和 chrome 浏览器具有不同的 css 规则。

例如

```
.inputShadow {
    -moz-box-shadow:0 0 10px 5px #900;
    -webkit-box-shadow:0 0 10px 5px #900;
    box-shadow:0 0 10px 5px #900;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:08:23.700

尚未对其进行测试，但这应该可以：

```
$(function(){
   $("input").on("focus",function(){
       $(this).addClass(".inputShadow");
   });
}); 
```

编辑：还检查浏览器兼容性，如其他答案中所述

# python - 中小型项目的 Flask 框架

> ID：10152721
> 
> 赞同：3
> 
> 时间：2012-04-14T10:03:08.343
> 
> 标签：python, flask

我即将尝试 Flask 框架，看看它是否符合我的需求。我和 Django 一起工作过，这很酷，但我想试试 Flask。我有一个小型项目，也许还有一个中型项目，想问一下 Flask 是否适合用于这些项目？

你们有使用 Flask 运行中型（甚至大型）项目的经验吗？很高兴听到事实，而不仅仅是“我喜欢 Django，因为它很酷”或“我喜欢 Flask 只是因为它很小”:)

无论如何，我会尝试玩它，只是出于好奇。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T10:05:14.230

Flask 也适用于较大的应用程序。

查看[烧瓶文档的“大型应用程序”页面](http://flask.pocoo.org/docs/patterns/packages/)；它有一些关于如何保持代码结构正确的建议。

如果您需要例如 ORM，您可以使用[Flask-SQLAlchemy](http://packages.python.org/Flask-SQLAlchemy/)，它将 SA 很好地集成到您的 Flask 环境中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T10:05:39.350

Flask 非常适合所有类型的项目。只要您不需要 Django 的 ORM（以及所有像管理员页面这样的电池），Flask 就是正确的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-05T14:14:17.853

通常我使用 Flask。但是为了快速开发，我只想用 Django 构建一个项目，但我不知道这是一种负担。当我不想使用它的默认身份验证机制并随心所欲地去想时，很难摆脱内置的结构。另一方面，使用 Flask 更加灵活和可维护。正如我所说的，我只是想加快开发速度，但接受 Django 的僵硬需要一段时间。所以这不是我个人的最爱。只是想写即使这是一个旧帖子。

# android - Android Widget 重启后不工作

> ID：10152723
> 
> 赞同：0
> 
> 时间：2012-04-14T10:03:58.887
> 
> 标签：android

> **可能重复：**
> [为什么小部件在重新启动后不起作用？](https://stackoverflow.com/questions/9231495/why-widget-does-not-work-after-reboot)

我有一个通过服务定期更新的 appwidget。现在当系统重新启动时，appwidget 不再显示或响应点击服务。我尝试通过使用广播接收器来启动服务，但到目前为止还没有运气。有什么问题？...

这是广播接收器：

```
 public void onReceive(final Context context, Intent intent) {
        Log.d(TAG, "received boot completed broadcast receiver... starting service");
        mycontext = context;
        String action = intent.getAction();

        if(action.equals(Intent.ACTION_BOOT_COMPLETED)){

        int[] allids = AppWidgetManager.getInstance(context).getAppWidgetIds(new ComponentName(context, WeatherWidgetProvider.class));
        for(int appWidgetId:allids){

            Intent weatherSettings = new Intent(context, WeatherService.class);
             weatherSettings.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
             mycontext.startService(weatherSettings);

        }
    }   
  } 
```

这就是我从服务中检索 appwidget 的方式：

```
 public void onStart(Intent intent, int startId){

         context = getApplicationContext();

      if(intent.getExtras()!= null){
      appWidgetId = intent.getExtras().getInt(AppWidgetManager.EXTRA_APPWIDGET_ID); //get this here, also from the configuration class

   }

      RemoteViews remoteView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.weather_appwidget);
      AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(getApplicationContext());

      /*get sharedPreferences Value*/
      prefs = context.getSharedPreferences(WeatherForecastConfigure.WEATHER_PREF_NAME, MODE_WORLD_READABLE);

      city = prefs.getString(CITY + appWidgetId,"nothing");
      chk_celsius = prefs.getBoolean(CHECKED_CELSIUS + appWidgetId, true);
      updateRate = WeatherForecastConfigure.convertToMillis(prefs.getInt(REFRESH_UPDATE + appWidgetId, 1));

             //web service call and update the widget here    
     } 
```

我也从配置类中获取了 appwidgetId，所以我不知道是否应该指定不同的意图操作。谢谢你。

# sql-server - WHILE 循环问题在 SQL Server 2005 中不起作用

> ID：10152724
> 
> 赞同：-3
> 
> 时间：2012-04-14T10:04:09.113
> 
> 标签：sql-server

> **可能重复：**
> [查询在 while 循环中无法正常工作](https://stackoverflow.com/questions/10152885/query-not-working-fine-in-while-loop)

我有一个 WHILE 循环，我试图在其中插入

```
DECLARE @CurrentOffer int  =121
DECLARE @OldestOffer int  = 115

WHILE 1 = 1
BEGIN
     INSERT INTO Temp WITH (TABLOCK)
        SELECT TOP (100) clubcard  
        FROM TempClub WITH (NOLOCK) 
        WHERE ID BETWEEN @MinClubcardand AND @MaxClubcard

     declare @sql varchar(8000)

     while @OldestOffer <= @CurrentOffer
     begin
          print @CurrentOffer
          print @OldestOffer

          set @sql = 'delete from Temp where Clubcard 
                      in (select Clubcard 
                          from ClubTransaction_' + convert(varchar, @CurrentOffer) +
                     ' with (nolock))'

          print (@sql)
          exec (@sql)

          SET @CurrentOffer = @CurrentOffer-1  

          IF @OldestOffer = @CurrentOffer
          begin
             -- my logic
          end
     end
END 
```

我在这里做的是我将行批量插入表中`Temp`并检查表中是否存在`ClubTransaction_121`

如果确实退出，我需要在此处删除它，我的循环获取前 100 张俱乐部卡，然后检查`ClubTransaction_121`并移动以检查下一个报价，即 120

但是我的表`Temp`有 3000 行，需要`ClubTransaction_121`与所有行的表一起检查。

它只检查前 100 条记录，然后检查下一个 ClubTransaction_120。

我需要检查我所有的俱乐部卡所有 3000 行以及所有 `ClubTransaction_121`表格的`ClubTransaction_120`所有行`ClubTransaction_119`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T15:31:07.010

首先，我建议去掉 TABLOCK 和 NOLOCK，因为它们会导致数据不一致。

接下来在您的循环中的每次迭代中，我将 BEGIN TRANSACTION 和 COMMIT TRANSACTION 假设每个步骤在完成时都可以认为是好的，并且如果 10 个循环完成，并且第 11 个循环失败，则可以不回滚整个事务。

像这样的东西：

```
DECLARE @CurrentOffer int  =121
DECLARE @OldestOffer int  = 115

WHILE 1 = 1
BEGIN
    BEGIN TRANSACTION;
     INSERT INTO Temp 
        SELECT TOP (100) clubcard  
        FROM TempClub 
        WHERE ID BETWEEN @MinClubcardand AND @MaxClubcard

     declare @sql varchar(8000)

     while @OldestOffer <= @CurrentOffer
     begin
          print @CurrentOffer
          print @OldestOffer

          set @sql = 'delete from Temp where Clubcard 
                      in (select Clubcard 
                          from ClubTransaction_' + convert(varchar, @CurrentOffer)

          print (@sql)
          exec (@sql)

          SET @CurrentOffer = @CurrentOffer-1  

          IF @OldestOffer = @CurrentOffer
          begin
             -- my logic
          end
     end
    COMMIT TRANSACTION;
END 
```

# java - 如何在 Java 中创建线程安全的一次写入多次读取 Map？

> ID：10152726
> 
> 赞同：4
> 
> 时间：2012-04-14T10:04:28.200
> 
> 标签：java, thread-safety

我有一个带有私有静态映射的 Java 类，用于在应用程序执行期间存储信息。我只会将一个键/值放入 M​​ap 中，但 Map 值可能会被读取多次。

所以我现在拥有它的方式，代码执行获取并检查是否为空。如果为空，那么我收集我需要的数据并将其放入地图中。客户端代码的后续调用将保证从映射中获取值。客户端不需要进行空值检查。

这样做的原因是，将数据放入地图可能会很昂贵，所以我只想对每个键执行一次。

这有什么模式吗？我似乎找不到任何讨论这种情况的东西。

TIA

这是一个完全非线程安全的示例：

```
public class TestWorm {

    private static Map<String, Object> map = new HashMap<String, Object>(32);

    public Object getValue(String key) {
        if (map.get(key) != null) {
            return map.get(key);
        }

        // do some process to get Object
        Object o = new Object();
        map.put(key, o);
        return o; 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:14:18.710

你最好的选择是 ConcurrentHashMap ，它是 putIfAbsent 方法。

您的实现不是线程安全的。为了使其线程安全，声明字段 final，将实现类更改为 ConcurrentHashMap 就足够了，如果您不关心有时值是否会被计算和存储多次（这种情况很少见：如果两个线程同时进入 get 和尚未计算相应的值。这通常是一个很好的权衡，因为通常最常见的情况是缓存中有东西时。在这种情况下，您不使用任何额外的同步来检索现有值。）

如果您想确保应用程序中最多存在一个给定键的值，您可以通过使用 putIfAbsent 而不是 put 来进一步扩展您的实现。

实现这一点的另一种方法是使用番石榴库：[http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MapMaker.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MapMaker.html)

另一种方法是使用 ConcurrentHashMapV8 的 computeIfAbsent (http://gee.cs.oswego.edu/cgi-bin/viewcvs.cgi/jsr166/src/jsr166e/ConcurrentHashMapV8.java?view=markup)有一天会出现在 Java 8 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T10:10:20.230

checkout[`ConcurrentHashMap.putIfAbsent()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#putIfAbsent%28K,%20V%29)将为您提供同步存储和检索所需的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:17:42.750

这是典型的缓存模式。

例如[Spring Framework 从 3.1 开始就提供了一个很好的 API](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)

但是那里也有专门的框架，比如[Ehcache](http://ehcache.org/)。

# ruby-on-rails-3 - 尝试使用 rolify gem 的应用程序在 heroku 中运行迁移时出错，未初始化的常量 Rolify::Roles

> ID：10152727
> 
> 赞同：0
> 
> 时间：2012-04-14T10:04:45.027
> 
> 标签：ruby-on-rails-3, heroku, devise, cancan

我基本上有一个基本的 rails 3.1 应用程序，我想部署到 heroku。我已按照[本教程](https://github.com/EppO/rolify/wiki/Tutorial)使用 Devise、Cancan 和 Rolify。（我在用户表中添加了一个用户名列）

在我的开发服务器上一切正常，但是当我尝试运行时`heroku run rake db:migrate`，出现错误“rake aborted！未初始化的常量 Rolify::Roles”

这是我的 user.rb 文件

```
class User < ActiveRecord::Base
  include Rolify::Roles
  has_and_belongs_to_many :roles, :join_table => :users_roles

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :username
end 
```

我尝试运行`heroku restart`然后再次尝试迁移，但没有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:07:50.880

更改`include Rolify::Roles`为`rolify`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T01:38:13.853

所以，我已经解决了这个问题，忘了在这里发布答案。我在开发环境中使用的 rolify 版本比 heroku 使用的版本旧，所以我运行 bundle update 并按照 rolify git 页面上的更新说明进行操作，一切都很好。

# java - SQL 查询正在拉动一切？

> ID：10152730
> 
> 赞同：0
> 
> 时间：2012-04-14T10:05:22.657
> 
> 标签：java, mysql, sql, minecraft

这是我的世界的插件。它应该使用在配置中设置的客户 ID 拉出玩家并在游戏中显示他们。相反，它会吸引所有人，无论他们的客户 ID 是什么。

```
if(cmd.getName().equalsIgnoreCase("getaward"))
    {
        Player player = (Player)sender;
        try {
            Class.forName("com.mysql.jdbc.Driver");

        con = DriverManager.getConnection (dbUrl,dbUser,dbPass);

    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery("SELECT * FROM `votesdb` WHERE `nick` = '"+player.getName().substring(0,player.getName().length()/2)+"' AND `customer_id` LIKE "+config.getString("customer_id")+"");
    //ResultSet rs = stmt.executeQuery("SELECT nick,votes FROM `votesdb` WHERE nick='"+player.getName()+" LIMIT 1");
    if(rs.next())
    {
        if(rs.getInt("votes")!=0)
        {
            player.sendMessage(ChatColor.GREEN+"[VFD]"+ChatColor.AQUA+"Thanks for voting! You will find something special in your inventory. :)");
            bukkit.broadcastMessage(ChatColor.GREEN+"[VFD]"+ChatColor.AQUA+player.getDisplayName()+" has been rewarded for Voting for the Server!");
            stmt.executeUpdate("UPDATE `votesdb` SET flag=0 WHERE `nick` LIKE '"+player.getDisplayName().substring(0,player.getDisplayName().length()/2)+"'");
            player.getInventory().addItem(new ItemStack(this.matID,this.matAmt));

        }
        else
        {
            player.sendMessage(ChatColor.RED+"You have already claimed your reward.");
        }   
    }
    else
    {
        player.sendMessage(ChatColor.RED+"We could not find you in the database! Please make sure you used the correct name when you voted!");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:16:04.250

1.  让您的查询尽可能简单，看看它是否有效，然后才能朝着您的目标前进。
2.  除了客户 ID 之外，任何其他条件都没有任何意义。您说您需要所有具有该客户 ID 的玩家。
3.  如前所述，ID 应该被限制为单个值，而不是像某个字符串。

# javascript - XUL 中的显示数组

> ID：10152731
> 
> 赞同：0
> 
> 时间：2012-04-14T10:05:32.733
> 
> 标签：javascript, arrays, xul

我有一个 javascript 字符串数组，我想在 XUL 面板的下方显示一个在另一个下方。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:01:51.987

最好`<description>`使用常用的 DOM 方法为所有字符串创建元素：

```
var strings = ["foo", "bar"];
var container = document.getElementById("panel");
for (var i = 0; i < strings.length; i++)
{
  var description = document.createElement("description");
  description.textContent = strings[i];
  container.appendChild(description);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:18:50.757

您可以在 XUL 中以多种方式进行操作，例如 XUL 树、列表、网格等...

[https://developer.mozilla.org/en/XUL/listbox](https://developer.mozilla.org/en/XUL/listbox) [http://www.xul.fr/tutorial/xul/listbox.xul](http://www.xul.fr/tutorial/xul/listbox.xul) [https://developer.mozilla.org/en/XUL/tree#A_tree_with_several_columns](https://developer.mozilla.org/en/XUL/tree#A_tree_with_several_columns) [https ://developer.mozilla.org/en/XUL_Tutorial/Grids](https://developer.mozilla.org/en/XUL_Tutorial/Grids)

请参阅链接以获取示例代码。

# eclipse - 如何在eclipse中运行sencha touch代码

> ID：10152738
> 
> 赞同：0
> 
> 时间：2012-04-14T10:06:21.310
> 
> 标签：eclipse, html, ide, sencha-touch, sencha-touch-2

我即将进入一个名为“sencha touch 2.0”的新领域。我对此并不熟悉。早些时候我使用“Eclipse”IDE 来创建网页。我尝试使用相同的方式使用 sencha 框架创建 html 页面，但它似乎不起作用。我在互联网上搜索了很多关于如何运行网页的信息它在 eclipse 上有 sencha touch 框架，但没有找到对我有帮助的 antyhing。所以请有人告诉我如何使用 eclipse 运行 sencha touch 代码。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:21:23.713

当您说要在 Eclipse 上运行 sencha touch 时，您到底是什么意思？Eclipse 使用内置浏览器运行网页，sencha touch 仅适用于 webkit 浏览器，Eclipse 使用 mozilla'a 作为内置渲染引擎。这就是您在 Eclipse 中看不到 UI 的原因。您可以在 Chrome 中打开该页面，它会正常工作。

# java - 区分 TCP IP 中的数据包

> ID：10152745
> 
> 赞同：1
> 
> 时间：2012-04-14T10:08:21.397
> 
> 标签：java, tcp, tcpclient

我有一个服务器首先发送文件大小和文件数据的情况。在客户端读取时如何区分整数值和文件数据？

服务器的相同代码（os 是缓冲的输出流）：

```
 // Construct a 1K buffer to hold bytes on their way to the socket.
            byte[] mybytearray = new byte[(int) myFile.length()];

          //File Size
            os.write((int) myFile.length());

    FileInputStream fis = null;
    System.out.println("test+sendbytes");
    // Copy requested file into the socket's output stream.
      try {
          fis = new FileInputStream(myFile);
      } catch (FileNotFoundException ex) {
          // Do exception handling
      }
      BufferedInputStream bis = new BufferedInputStream(fis);

      try {
          bis.read(mybytearray, 0, mybytearray.length);
          os.write(mybytearray, 0, mybytearray.length);
          os.flush();
          os.close();
          os.close();

          // File sent, exit the main method
          return;
      } catch (IOException ex) {
          // Do exception handling
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:12:11.373

`int`除非您假设所有文件的长度不超过 255 个字节，否则您需要将长度写为 an 。试试 DataOutputStream.writeInt()

对于阅读，您必须承担订单。即您假设先发送长度，然后发送内容。使用 DataInputStream.readInt() 读取长度。

# ruby-on-rails - Mongoid 嵌入式查询

> ID：10152749
> 
> 赞同：1
> 
> 时间：2012-04-14T10:08:35.693
> 
> 标签：ruby-on-rails, mongodb, mongoid

嗨，我有嵌入的文档，但我无法通过 id 查询它们。我可以用检查输出所有内容，并且有正确的 ID，但无法查询它们。我有一个 embeds_many :course_members 的课程模型和一个带有 embedded_in :course, :inverse_of => :course_members 的 CourseMember 模型

我试过这个没有任何成功：

```
puts Course.where("course_members.id" => params[:id]) 
```

使用此代码，我可以访问正确的文档：

```
c = Course.where("course_members.accepted" => 2).all
c.each do |l|
 l.course_members.each do |f|
  puts f.inspect
 end
end 
```

但是如何通过一个 Mongoid 查询获取我的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T10:14:23.250

我猜

```
puts Course.where("course_members._id" => BSON::ObjectId(params[:id])) 
```

MongoDB 中真正的 id 参数是`_id`， mongoid 中的函数`.id`只是一个方便的包装器。

**编辑：**您还必须将字符串转换`params[:id]`为正确的 BSON ID。

# php - 必填字段错误

> ID：10152753
> 
> 赞同：0
> 
> 时间：2012-04-14T10:08:56.467
> 
> 标签：php

如果字段不完整，我在显示错误消息时会遇到严重问题。我希望在摘要为空时显示错误消息，但如果已填写，我希望提交按钮转到他们的帐户页面（在会话中）PHP：

```
session_start();
// this sets variables in the session
$id = $_SESSION['user_id'];
foreach($_POST as $key => $value)
$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");
$err = array();

if(empty($_SESSION['$user_id']))  // user not logged in; redirect to somewhere else
if (!empty($_POST['doThesis']) && $_POST['doThesis'] == 'Save')
{

list($id) = mysql_fetch_row($result);

/// Automatically collects the hostname or domain  like example.com)
$host  = $_SERVER['HTTP_HOST'];
$host_upper = strtoupper($host);
$path   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
if(empty($err)) {

 $sql_insert = "INSERT into `thesis`
(`user_id`,`thesis_Name`,`abstract`  )
VALUES
('$id','$thesis_Name','$abstract') ";

mysql_query($sql_insert,$link) or die("Insertion Failed:" . mysql_error());
}

else{

header("location: myaccount.php?id=" . $_SESSION['user_id']. "");
exit();
}
}
} 
```

在 HTML 中：

```
<script>
$(document).ready(function(){
$.validator.addMethod("abstract", function(value, element) {
return this.optional(element) || /^[a-z0-9\_]+$/i.test(value);
}, "Thesis.");
$("#regForm").validate();
});
</script>

<?php
if(!empty($err))  {
echo "<div class=\"msg\">";
foreach ($err as $e) {
echo "* $e <br>";
}
echo "</div>";
}
?> 
```

如果您需要更多信息，请告诉我，因为我需要让它工作！

# android - 从其他活动返回文本

> ID：10152754
> 
> 赞同：0
> 
> 时间：2012-04-14T10:08:56.513
> 
> 标签：android, android-activity

我想从activityA开始activityB并从activityB返回字符串然后恢复activityA是否可能？我指的是[Android：捕获活动的返回](https://stackoverflow.com/questions/449484/android-capturing-the-return-of-an-activity)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:13:45.497

你将不得不继续工作`onActivityResult()`。这里有一些教程。

[一](http://android-er.blogspot.in/2011/08/return-result-to-onactivityresult.html), [二](http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html)

在示例一中，您将找到答案。希望这已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:52:08.523

如果需要从活动传回数据，可以使用 startActivityForResult() 方法。例如：从活动 B 返回数据

活动一：

Step1：调用StartActivityForResult()方法

```
Intent i = new Intent(A.this,B.class);
// use startActivityForResult(Intent,request_code)  method()
//with request_code is used to identify.
starActivityForResult(i,1) 
```

Step2：必须实现 onActivityResult(int requestCode,int resultCode,Intent data) 方法

```
//check requestCode and resultCode    
if(requestCode==1)
{

  if(resultCode==RESULT_OK)

  {
    //get Data
    String temp =  data.getData().toString();
   }  

} 
```

活动 B：

```
 //set Data return Activity B at anywhere you want
 Intent data = new Intent()
 data.setData("String_Test");

 setResult(RESULT_OK,data)
 //close the activity
 finish(); 
```

注意：除了使用 setData method()，您还可以使用 putExtras(Bunble object) 来发送数据。

# matlab-guide - 关于 gui 菜单项

> ID：10152758
> 
> 赞同：1
> 
> 时间：2012-04-14T10:09:34.257
> 
> 标签：matlab-guide

在我的 gui 中，我创建了一个包含文件、视图、编辑、编译结果、帮助等内容的菜单......使用 gui 布局编辑器中的菜单编辑器。我打算“刷新菜单下方的 gui 内容” 例如，当用户在我的 gui 中单击视图时，他将能够查看视图模拟结果页面，而不是当人们第一次打开我的 gui 时的“首页”。

你能教/指导我怎么做吗？在menu-view回调函数的内容下，我输入了一个openfig('new figure.fig')，这样当ppl按下视图菜单时，它会打开另一个新的内容和图形的图形。但它会打开另一个数字，最后我有两个数字。我喜欢在菜单下方刷新新内容，而不是使用“新页面”。matlab gui能够做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:55:40.823

您可以只使用一个图形，给它一个句柄名称并打开保持：

```
fig = figure;
hold on; 
```

然后有两组轴，或者如果您不需要轴，只需两个由矩阵定义的图形对象，即 (axes)

```
screen_1 = axes;
screen_2 = axes; 
```

或（图形对象）

```
screen_1 = plot(NaN,NaN);
screen_2 = plot(NaN,NaN); 
```

然后您可以更改它们在堆栈中的顺序：

```
uistack(screen_1,'bottom'); 
```

或将他们（和他们的任何孩子）设置为不可见：

```
set(screen_1,'Visible','off') 
```

另外，请注意：（来自 MATLAB）

> 注意 在 GUI 中，坐标区对象的级别始终低于 uicontrol 对象。您不能将坐标区对象堆叠在 uicontrol 对象之上。

# android-emulator - 在 Android 应用程序中无需用户干预即可发送邮件

> ID：10152761
> 
> 赞同：1
> 
> 时间：2012-04-14T10:10:02.213
> 
> 标签：android-emulator

我正在使用以下链接中的步骤和代码

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-android-a)

它在 Emulator 中对我有用，但在 Real Phone 设备中不起作用。

也没有错误和警告。

谁能帮我纠正这个问题。

提前致谢。

# linux - 在 Linux 上获取机器 ID 的最佳方法？

> ID：10152762
> 
> 赞同：33
> 
> 时间：2012-04-14T10:10:08.027
> 
> 标签：linux, unique, gnu, uniqueidentifier

在架构中获取唯一机器 ID 的最佳实践方法是`GNU/Linux`什么？`i386`

`mac`除了地址还有什么好的方法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-14T10:14:35.080

根据您的内核，DMI 信息可以通过 sysfs 获得。试试那些：

```
# cat /sys/class/dmi/id/board_serial
xxxxxxxxxxxxxxx
# cat /sys/class/dmi/id/product_uuid
xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx 
```

或使用工具

```
# dmidecode -s baseboard-serial-number
...
# dmidecode -s system-uuid
... 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2020-07-29T07:30:01.033

在具有 systemd 的现代机器上：机器 ID 由[systemd-machine-id-setup](https://www.freedesktop.org/software/systemd/man/systemd-machine-id-setup.html#)创建。机器 ID 的位置记录在案 - 在[freedesktop machine-id](https://www.freedesktop.org/software/systemd/man/machine-id.html)和[man machine-id](https://man7.org/linux/man-pages/man5/machine-id.5.html)中，并且机器 ID 具有更标准化的格式 -[请参阅 RFC4122](https://www.rfc-editor.org/rfc/rfc4122)。只是：

```
cat /etc/machine-id 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-15T08:32:53.007

您可以使用 lshal。这需要先安装 hal（apt-get install hal 或 yum install hal）。这样您就可以在没有 root 权限的情况下访问 dmidecode 的所有信息。

**非根等价物**

```
# dmidecode | grep -i uuid 
```

**将会**

```
$ lshal |grep -i system.hardware.uuid 
```

同样根据您的需要提供其他信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-06T02:44:47.967

计算您自己的 sysid 的一种简单且可移植的方法可能是在字符串中序列化 uname()、gethostid() 和一些 inode，例如 /home 或您的应用程序 homedir（通过 stat() 获得）等，然后对其进行哈希处理。

# python - Python：元组的最后一个元素

> ID：10152766
> 
> 赞同：2
> 
> 时间：2012-04-14T10:10:33.757
> 
> 标签：python, tuples

我会隔离一个元组的最后一个元素，比如

```
a = (3,5,5)
last = a[-1] 
```

但问题是我有这样一个不错的代码

```
if var == last:
  do something 
```

它需要第一个`5`而不是第二个，我该怎么做才能拿最后一个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T10:13:41.717

你试图做的事情是不可能的。这两个五是完全一样的。

但是，在遍历元组时，您可以检查是否到达了最后一个元素，如下所示：

```
a = (3, 5, 5)
for i, var in enumerate(a):
    if i == len(a) - 1:
        print 'last element:'
    print var 
```

演示：

```
In [1]: a = (3, 5, 5)
In [2]: for i, var in enumerate(a):
   ...:     if i == len(a) - 1:
   ...:         print 'last element:'
   ...:     print var
   ...:
3
5
last element:
5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T13:47:51.867

你可以像这样解压元组：

```
t = (3, 5, 5)
*_, last = t
assert last == 5 
```

# javascript - 如果我从 JS 调用 SWF，而 SWF 已经忙于处理来自 JS 的另一个调用，会发生什么情况？

> ID：10152772
> 
> 赞同：1
> 
> 时间：2012-04-14T10:11:22.407
> 
> 标签：javascript, multithreading, actionscript-3, externalinterface

JS-to-AS3 回调以异步方式工作，对吗？因此，例如，如果我要求 SWF 下载某个文件，这可能需要一些时间（取决于该文件的大小），并且在下载它时，要求它执行一些其他操作（假设 SWF 有多个回调用于各种目的） ，在这种情况下会发生什么？SWF 是否会继续下载文件并在不同的线程中处理我的第二个请求，或者它崩溃或抛出一些错误？

我知道这是一个很好的测试案例，但我想知道是否有人已经这样做了，或者可能有关于我找不到的案例的公开信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:39:26.267

一般来说，JS/AS3 桥接器是同步的，但是答案将取决于 AS3 端的功能实现。

如果 AS3 端是异步操作，那么你需要制定一个回调策略，以便 AS3 可以在完成时回调一个 JS 函数。

# c# - 开源用T4生成HTML页面

> ID：10152774
> 
> 赞同：4
> 
> 时间：2012-04-14T10:11:53.293
> 
> 标签：c#, asp.net, .net, t4

是否有任何使用 T4 生成 HTML 页面或 HTML 内容的开源 .NET 项目？

我需要构建一个 Web 报告工具来读取 MS SQL 模式并生成显示来自 DB 的数据的页面。

# google-api - Google Calendar API - 未找到构造函数

> ID：10152775
> 
> 赞同：0
> 
> 时间：2012-04-14T10:11:54.270
> 
> 标签：google-api, google-calendar-api, google-api-java-client

我开始使用 Google Calendar API。[但是当我尝试链接https://developers.google.com/google-apps/calendar/instantiate](https://developers.google.com/google-apps/calendar/instantiate)中的设置时，我遇到了一个大问题。

我尝试实现构造函数

```
Calendar service = new Calendar(httpTransport, accessProtectedResource, jsonFactory); 
```

但是这个不在库中，这个构造函数不存在。

任何人都可以帮我找到解决这个问题的新方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:18:23.493

Make sure you are referring to the Calendar service class defined in `com.google.api.services.calendar.Calendar` and not the model class defined in `com.google.api.services.calendar.model.Calendar`.

# python - 使用 java 处理和 python 创建 mac os x 软件包

> ID：10152776
> 
> 赞同：0
> 
> 时间：2012-04-14T10:11:55.840
> 
> 标签：python, bundle, processing

我使用 Java Processing.org 编程语言编写了一个程序，它使用了一些 python 脚本。存在我无法在处理中更改或重写这些 python 脚本的情况。

我的问题是我需要将所有这些捆绑在一起并为 Mac OS X 创建软件包以便于安装。我知道处理 IDE 中有创建软件包的选项，但这会忽略 python 文件，即使客户端的机器无法安装 python。

我考虑过创建 python 可执行文件并将其放入包中。谁能建议我更好的选择或软件工具来做到这一点。

问候， 瓦鲁纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:51:05.727

Python 随 Mac OS X 一起提供，因此您的客户端应该能够运行这些脚本。

您不需要创建“Python 可执行文件”，因为 Python 解释器可以只运行这些`.py`文件。

Mac OS X 应用程序包（本质上是一个文件夹）包含一个文件夹`Contents`，该文件夹又包含二进制应用程序文件、资源等。您可以将`.py`文件放在`.app`包中并从 Java 代码中调用它们。

捆绑文档可在此处[获得 http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T13:27:26.863

听起来您正试图以用户友好的方式提供一些 Python 模块（即，最终用户无需了解 easy_install 或其他任何内容）。

我不是这方面的专家，但在我看来，您正在尝试解决 Mercurial 人解决的类似问题，您可能想看看他们做了什么。这就是 Mercurial 在 Mac 上的交付方式 - [http://mercurial.berkwood.com/](http://mercurial.berkwood.com/)。

# c# - 实时重定向网络流量

> ID：10152780
> 
> 赞同：0
> 
> 时间：2012-04-14T10:12:17.380
> 
> 标签：c#, networking, traffic

我正在编写一个应该能够实时重定向流量的软件。

该软件应该作为某种客户端在普通的 Windows 盒子上运行。

因此，带有客户端的计算机向 IP 3.3.3.3:80 发送请求，软件会自动将其指向不同的 IP 等 4.4.4.4:80。

据我所知，唯一的方法是在 Windows 上使用 hosts 文件。

还有其他方法可以重定向流量吗？因为我想实时进行，而不是对系统进行永久性更改。

C# 中首选的示例

# php - 在 MySQL 中使用 LIKE 子句优化表以进行搜索

> ID：10152782
> 
> 赞同：2
> 
> 时间：2012-04-14T10:12:32.287
> 
> 标签：php, mysql, indexing

我正在为我的站点的消息部分构建一个搜索功能，并且有一个包含超过 9,000,000 行的消息数据库，以及在 、 和 字段上`sender`的`subject`索引`message`。我希望在查询中使用 LIKE mysql 子句，例如 (ex)

SELECT `sender`, `subject`, `message`FROM `Messages`WHERE `message`LIKE '%EXAMPLE_QUERY%';

检索结果。不幸的是，当存在前导通配符时，MySQL 不使用索引，这是搜索查询可能出现在消息中的任何位置所必需的（这就是通配符的工作方式，不是吗？）。查询**非常非常慢**，我也不能使用全文索引，因为烦人的 50% 规则（我不能排除那么多）。无论如何（甚至，任何替代方法）都可以使用 like 和两个通配符优化查询吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:29:41.683

您应该使用全文索引（您说过不能），自己设计全文搜索或从 MySQL 卸载搜索并使用 Sphinx/Lucene。对于 Lucene，您可以使用 Zend Framework 中的 Zend_Search_Lucene 实现或使用 Solr。

MySQL 中的普通索引是 B+Trees，如果字符串的开头未知，则不能使用它们（当您在开头有通配符时就是这种情况）

另一种选择是使用参考表自行实现搜索。将文本拆分为单词并创建包含单词 record_id 的表。然后在搜索中，您将查询拆分为单词并搜索参考表中的每个单词。通过这种方式，您不会将自己限制在整个文本的开头，而仅限于给定单词的开头（无论如何您都会匹配其余单词）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:22:11.827

`'%EXAMPLE_QUERY%';`是一个非常非常糟糕的主意..我会给你一些

A. 避免在 LIKE 查询开始时使用`'EXAMPLE_QUERY%';`通配符

B. 创建您可以轻松使用的关键字`MATCH`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T11:41:24.717

如果你想坚持使用 MySQL，你应该使用 FULL TEXT 索引。全文索引索引文本块中的单词。然后，您可以搜索词干并按相关性顺序返回结果。所以你可以在一段文本中找到“example”这个词，但是你仍然不能在“xampl”上有效地搜索到“example”。

MySQL 的全文搜索功能不是很好，但功能齐全。

[http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-14T10:24:33.780

```
select * from emp where ename like '%e'; 
```

给出以字母 e 结尾的 emp_name.

```
select * from emp where ename like 'A%'; 
```

给出以字母 a 开头的 emp_name.

```
select * from emp where ename like '_a%'; 
```

给出第二个字母是 a 的 emp_name.

# python - python / numpy中随机位置给定数字的矩阵

> ID：10152787
> 
> 赞同：3
> 
> 时间：2012-04-14T10:12:59.943
> 
> 标签：python, random, matrix, numpy

我有一个用零填充的 NxN 矩阵。现在我想添加到矩阵中，比如说，n 个和 m 个二到随机位置。即我想创建一个矩阵，其中在随机位置有一些固定数量的给定数字，并且在随机位置可能有固定数量的其他给定数字。我该怎么做呢？

在 Matlab 中，我会通过使用 randperm() 对矩阵索引进行随机排列，然后用 1 填充矩阵的 randperm 给出的第 n 个第一个索引，然后用 2 填充 m 下一个索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T10:39:48.380

您可以使用`numpy.random.shuffle`就地随机排列数组。

```
>>> import numpy as np
>>> X = np.zeros(N * N)
>>> X[:n] = 1
>>> X[n:n+m] = 2
>>> np.random.shuffle(X)
>>> X = X.reshape((N, N)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T10:38:50.790

会`numpy.random.permutation`是你要找的吗？

你可以这样做：

```
In [9]: a=numpy.zeros(100)

In [10]: p=numpy.random.permutation(100)

In [11]: a[p[:10]]=1

In [12]: a[p[10:20]]=2

In [13]: a.reshape(10,10)
Out[13]: 
array([[ 0.,  1.,  0.,  0.,  0.,  2.,  0.,  1.,  0.,  0.],
       [ 0.,  0.,  1.,  0.,  0.,  0.,  0.,  0.,  2.,  0.],
       [ 0.,  2.,  0.,  0.,  0.,  0.,  2.,  0.,  0.,  1.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  2.,  0.,  2.,  1.,  1.,  0.],
       [ 0.,  0.,  0.,  0.,  1.,  0.,  2.,  0.,  0.,  0.],
       [ 0.,  2.,  0.,  2.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.,  0.,  0.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  2.,  0.,  0.,  0.,  1.,  0.]]) 
```

在这里，我们创建一个随机排列，然后将从排列中获取的前 10 个索引设置`a`为 1，然后将接下来的 10 个索引设置为 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:20:09.283

要生成元素的索引，用于添加 1 和 2 的位置，这又如何呢？

```
# assuming N, n and m exist.
In [1]: import random
In [3]: indices = [(m, n) for m in range(N) for n in range(N)]
In [4]: random_indices = random.sample(indices, n + m)
In [5]: ones = random_indices[:n]
In [6]: twos = random_indices[n:] 
```

按照 Petr Viktorin 的评论进行了更正，以便在`ones`和中不存在重叠索引`twos`。

生成索引的另一种方法：

```
In [7]: import itertools
In [8]: indices = list(itertools.product(range(N), range(N))) 
```

# c# - 创建类别的最佳方式

> ID：10152788
> 
> 赞同：0
> 
> 时间：2012-04-14T10:13:07.020
> 
> 标签：c#, wpf, sql-server, xml

我想给使用创建类别的机会

例如：

```
Web Programming
  Microsoft
    ASP.NET
      C#
      VB
  PHP

System Programming
  C#
    Console
    WinForms
    WPF
  VB 
```

我有带有产品表的数据库，我想将其连接到类别。

请建议我如何解决这个问题。

我是否使用 sql 或 xml 或其他的东西？

PS我不知道有多少类别和子类别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T13:23:54.347

您使用 PK FK 关系。如果一个产品可以属于多个类别，那么您可以使用多对多表

```
Category:
ID PK 
Name 

Product:
ID PK
Name 

Cat2Prod
IDcat PK, FK to Category.ID
IDprod PK, FK to Product.ID

Select Category.Name, Product.Name 
From Cat2Prod 
Join Category on Category.ID = Cat2Prod.IDcat 
Join Category on Product.ID = Cat2Prod.IDprod
where ... 

if it is not many to many then just 

Product:
ID PK
Name
IDcat FK to Category.ID 
```

# delphi - 当程序在后台时，如何使菜单快捷方式起作用？

> ID：10152790
> 
> 赞同：1
> 
> 时间：2012-04-14T10:13:43.027
> 
> 标签：delphi

我有一个带有快捷键 F2 的隐形菜单。即使程序不在焦点上，我也希望它每次按 F2 时都执行代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:21:42.297

您可以使用[RegisterHotKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx) API 来定义系统范围的热键。

# jquery - 我如何显示添加的人？插入数据库后的JQuery

> ID：10152793
> 
> 赞同：0
> 
> 时间：2012-04-14T10:14:21.487
> 
> 标签：jquery

我基本上将人插入我的数据库并使用下面的代码。插入数据库后 if(response==ok)

它将人员添加到数据库。但是，我必须显示添加的人。如果我使用重新加载它发送主页。你对此有何建议？

```
function AddData(par){

    var artistName =  $("input[name='"+par+"']").attr('id') + '-'+$("input[name='"+par+"']").val();

   $.post('/json/management/AddDataAjax2', 
    {
       "artistName": artistName
    },
    function(response){
        console.log(response);
        if(response =='ok')
             alert("Başarıyla eklendi");
         else{
             alert("Sanatçı bulunamadı, yönlendiriliyorsunuz");
             window.location.replace("http://www.sinemalar.com/management/artistAddEditRemove/");
         }
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:20:35.837

您必须阅读文档：[http](http://api.jquery.com/jQuery.post/) ://api.jquery.com/jQuery.post/ 。您的响应可以是任何内容，例如 HTML、JSON...

# android - 如何在android的arraylist中存储空值？

> ID：10152800
> 
> 赞同：0
> 
> 时间：2012-04-14T10:15:05.200
> 
> 标签：android

在我的项目中，我创建了一个**数组列表来存储选定的复选框值**。即如果选中了一个复选框，我将它的 id 值存储在 arraylist 中，如果未选中，我将从 arraylist 中删除它。**此外，如果在该页面中未选中或未选中任何复选框，我将在数组列表中存储“00”。****if 和 elseif 条件在我的代码中工作正常**，但 * *else 部分不起作用..* *我哪里出错了？请帮我解决这个问题......

我的代码：

```
public static ArrayList<String> selchkboxlist = new ArrayList<String>();

cbs[k].setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        if (((CheckBox) v).isChecked()) {
            selchkboxlist.add(Integer.toString(v.getId()));
            System.out.println("chkboxlist size" + selchkboxlist.size());
            System.out.println("selected checkboxes" + selchkboxlist);
        } 
        else if(!(((CheckBox) v).isChecked()))
        {
            selchkboxlist.remove(Integer.toString(v
                    .getId()));
            System.out.println("after delete chkboxlist size" + selchkboxlist.size());
            System.out.println("un selected checkboxes" + selchkboxlist);
        }
        else
        {
            selchkboxlist.add("00");
            System.out.println("nothing selected selected checkboxes"
                    + selchkboxlist);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:21:43.963

else case 永远不会被输入，因为一个复选框要么被选中，要么没有被选中。

在您实际单击复选框之前，不会调用 onclick 侦听器。

我不完全确定您想要完成什么，但您可能只想将选中的复选框添加到选中的项目列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:26:44.087

复选框只能选中或不选中，else 语句在您的代码示例中无法访问。

使用 OnCheckedChangeListener 而不是点击：

```
selchkboxlist.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
            //user checked checkbox
        }else{
            //user unchecked checkbox
        }
    }
}); 
```

然后，当“提交”您的复选框时，请在您的循环中检查以查看用户是否未选择该框

if(!checkbox.isChecked()) selchkboxlist.add("00");

# php - 是否有将 Java、JavaScript 或 Python 转换为 PHP 的工具？

> ID：10152804
> 
> 赞同：0
> 
> 时间：2012-04-14T10:17:56.183
> 
> 标签：php

我有兴趣将库[google-diff-match-patch](http://code.google.com/p/google-diff-match-patch/)与 PHP 一起使用。不幸的是，它不支持这种语言。它仅在 Java、JavaScript、Dart、C++、C#、Objective C、Lua 和 Python 中可用。

那么有没有一种工具可以自动将其中一种语言转换为 PHP 呢？你有其他建议我可以如何使用这个库和 PHP。我想避免通过调用它`exec()`来简化程序的安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:25:40.980

自动转换？那会奏效吗？这是一个 PHP 端口：[diff_match_patch-php](https://github.com/mikkorantalainen/diff_match_patch-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T09:59:24.013

是的，可以将 Java 转换为 PHP，但仍然需要一些手动干预。见这里：http: [//javatophp.com](http://javatophp.com)

# cakephp - Cakephp 2.1 beforeSave 不工作

> ID：10152809
> 
> 赞同：4
> 
> 时间：2012-04-14T10:18:21.690
> 
> 标签：cakephp, cakephp-2.1, before-save

我有一个用户模型、一个用户控制器和一个**使用**用户模型的帐户控制器（帐户控制器在创建帐户、登录、注销时使用）。

一切正常，除了 AccountController 中的 beforeSave 函数。我正在尝试使用 beforeSave 对我的密码进行哈希处理，但它不起作用（密码保存在数据库中，未经哈希处理）。

```
public function beforeSave() {
    parent::beforeSave();   

    if (isset($this->request->data['User']['password'])) {
        $this->request->data['User']['password'] = sha1($this->request->data['User']['password']);
    }

    return true;
} 
```

几点注意事项：

*   我使用“sha1”对密码进行哈希处理，因为我正在将旧系统转换为 CakePHP（旧系统使用 sha1 对密码进行哈希处理）
*   即使我`return false;`仍然执行保存功能（我认为不应该是这种情况
*   打电话`debug($this->request->data)`给我什么
*   我在我的 UsersController 中添加了相同的 beforeSave 函数，但效果不佳

我认为在我的情况下**beforeSave**没有被调用，我只是不知道为什么。

* * *

**已解决：** beforeSave 函数必须进入模型内部，这是我现在的 beforeSave 函数：

```
public function beforeSave($options = array()) {
        parent::beforeSave();
        $this->data['User']['password'] = sha1($this->data['User']['password']);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T11:14:23.620

beforeSave 是一个[模型回调](http://book.cakephp.org/2.0/en/models/callback-methods.html)，所以在你的模型中定义它。

# android - 使用电话号码搜索联系人

> ID：10152810
> 
> 赞同：0
> 
> 时间：2012-04-14T10:18:26.977
> 
> 标签：android, android-contacts

我想检索与传入消息编号关联的联系人姓名。我想出了以下代码。

```
Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(msgSender));
        Cursor c = getContentResolver().query(lookupUri, new String[]{Contacts.DISPLAY_NAME},null,null,null);

        try {
            c.moveToFirst();
            displayName = c.getString(0);
        } catch (Exception e) {
            // TODO: handle exception
        }finally{
            c.close();
        } 
```

问题是，它可以在模拟器上运行，但不能在我的移动设备上运行。我尝试重新启动我的手机。但仍然无法正常工作。我搜索了与此类似的代码，但不适用于实际手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:45:38.407

您需要应用以下代码才能在具有 android 版本 2.1 的 Real Mobile 中工作

```
 //String msgSender="Mobile No";
    Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(msgSender));
    Cursor c = getContentResolver().query(lookupUri, new String[]{ContactsContract.Data.DISPLAY_NAME},null,null,null);
    try {
        c.moveToFirst();
     String  displayName = c.getString(0);
    } catch (Exception e) {
        // TODO: handle exception
    }finally{
        c.close();
    } 
```

在 Android 2.1 中我们必须使用`ContactsContract`并且也`PhoneLookup`应该是`ContactsContract`.

确保您已授予以下权限。

```
 <uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

# date - 在 PowerShell 中设置 System.DateTime 对象的时间

> ID：10152811
> 
> 赞同：1
> 
> 时间：2012-04-14T10:18:34.247
> 
> 标签：date, powershell, time

我希望使用 $time 的时间设置下面的 System.DateTime 对象：

```
$CurrentTime = (date)
$Time = "9:00" 
```

如何从 $CurrentTime 获取日期，但从 $time 获取小时、分钟、秒？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T06:46:08.493

尝试这个：

```
[datetime]::ParseExact("09:00","hh:mm",$null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:51:48.820

这应该有效：

```
$CurrentTime = [System.DateTime]::Parse((date).ToString("yyyy.MM.dd"))
$Time = [System.Timespan]::Parse("9:00")
$Result = $CurrentTime.Add($Time) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T11:12:05.313

```
Get-Date -Year $CurrentTime.Year `
         -Month $CurrentTime.Month `
         -Day $CurrentTime.Day `
         -Hour $time.split(':')[0] `
         -Minute $time.split(':')[-1]
         -Second $time.split(':')[-1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-05T14:33:16.913

```
$CurrentTime = Get-Date -Hour "09" -Minute "00" -Second "00" 
```

# windows - 总是将 Windows 中的特定文件类型保存到一个位置？

> ID：10152812
> 
> 赞同：1
> 
> 时间：2012-04-14T10:18:34.793
> 
> 标签：windows, vb.net, visual-studio-2010, registry

我正在尝试执行以下操作我不确定是否可以使用 VB.NET。我想为所有文件类型指定默认保存点，例如：

在我的程序中，您为图片选择路径“C:\Users\Markus\Pictures”，每次从网站下载图片文件，或者在打开“保存文件”对话框时使用 Skype 或任何其他程序（外部程序不通过我的程序或连接到 vb.net 只是 windows 默认一个）然后它将始终为 .jpg .gif 类型的文件等显示“C:\Users\Markus\Pictures”...

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T11:11:23.393

这段代码应该可以解决您的问题

```
SaveFileDialog1.InitialDirectory = @"C:\Users\Markus\Pictures" 
```

InitialDirectory 属性表示第一次出现打开文件对话框时要显示的目录。

```
SaveFileDialog1.Filter = "txt files (*.jpg)|*.jpg|All files (*.*)|*.*" 
```

Filter 属性表示打开文件对话框上的过滤器，用于过滤打开文件对话框中的浏览选项期间要加载的文件类型。

[有关更多信息，请参阅此链接](http://www.vbdotnetheaven.com/uploadfile/mahesh/savefiledialog-in-VB-Net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T23:04:40.930

您可以在注册表项中以编程方式修改 Windows 特殊目录（我的图片等）的路径：

**HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell 文件夹**

但是，您的应用必须被授予这样做的权限（请参阅[RegistryPermission 类](http://msdn.microsoft.com/en-us/library/system.security.permissions.registrypermission%28v=vs.100%29.aspx#Y1300)）

当然，这适用于在此注册表项中有条目的文件类型，并且仅当外部应用程序使用此注册表项时

# android - 如何延迟加载设备图库图像？

> ID：10152813
> 
> 赞同：0
> 
> 时间：2012-04-14T10:18:35.323
> 
> 标签：android

我想将设备图库图像延迟加载到我的应用程序中。因为当有数百张图像时，设备需要时间来加载图像。

谢谢，拉姆。

# matlab - matlab：如何创建投影

> ID：10152817
> 
> 赞同：0
> 
> 时间：2012-04-14T10:19:10.343
> 
> 标签：matlab

我想在 x,y 平面上创建一个 3D 图像的透视投影，焦距为 10，主点为 (-1, -5)。

我发现：查看
viewmtx

但我不知道如何告诉 matlab 我想使用 x,y 平面，也不知道如何设置焦距？有人可以解释我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T15:22:00.713

恐怕您不是在寻找正确的功能。该`view`函数只改变当前轴上的视点，同时`viewmtx`返回一个变换矩阵。您可能想做一些类似于这篇文章[如何在 MATLAB 中绘制纹理映射三角形？](https://stackoverflow.com/questions/2274383)，其中`maketform`和`imtransform`是将平面图像重新投影到另一个特定 3d 平面的关键函数。

# eclipse - 在 Eclipse Juno (4.2) 中安装 Google AppEngine 插件时出错

> ID：10152818
> 
> 赞同：9
> 
> 时间：2012-04-14T10:19:18.367
> 
> 标签：eclipse, google-app-engine

当我尝试为 GAE 安装 eclipse 插件时，出现错误：

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Google App Engine Java SDK 1.6.4 1.6.4.v201203300216r37（com.google.appengine.eclipse.sdkbundle.e37.feature.feature.group 1.6.4.v201203300216r37）

我正在使用[http://dl.google.com/eclipse/plugin/3.7](http://dl.google.com/eclipse/plugin/3.7)更新 URL，这是我能找到的最新 URL。有没有人解决过这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T18:49:29.580

使用这个： http: [//dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)作为更新站点

来源：[http ://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=71#makechanges](http://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=71#makechanges)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T23:10:40.813

对我来说，问题是忘记以管理员身份启动 eclipse。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T07:44:41.640

请参阅这篇解释如何解决此问题的帖子：https: [//plus.google.com/110140945975184013033/posts/ePFpQZYhPQq](https://plus.google.com/110140945975184013033/posts/ePFpQZYhPQq)

```
How to Install GWT Plugin for Eclipse on 3.8 or Juno:

1\. Download zipped update site for 3.7 
   from http://code.google.com/eclipse/docs/install-from-zip.html
2\. Unzip content.jar; rm content.jar
3\. Edit content.xml; change 
   <required namespace='org.eclipse.equinox.p2.iu' 
       name='org.eclipse.platform.feature.group' range='[3.7.0,3.8.0)'/> 
   to 
   <required namespace='org.eclipse.equinox.p2.iu' 
       name='org.eclipse.platform.feature.group' range='3.7.0'/>
4\. jar cMf content.jar content.xml (zip won't work)
5\. Install from local update site 
```

请注意，插件的某些功能可能无法正常工作（例如，在调试模式下运行时，我的 Eclipse Juno 崩溃了几次）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T04:38:37.477

If the issue is that we don't yet support 4.2, answer is to have patience. Eclipse plugins are complex beasts, and 4.2 is fairly new.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T02:02:25.437

事实证明，防病毒软件（出于某种未知原因）阻止了 xml 文件的读取。解决方案：安装过程中暂停保护。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T12:23:58.387

当我尝试在 eclipse 4.2.2中安装[指向插件的插件链接时，我也遇到了这样的问题](https://dl.google.com/eclipse/plugin/4.2)

错误：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Google Plugin for Eclipse 4.2 -rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.2.1.v201303211244-rel-r42) 缺少要求：Google Suite Plugin 3.2.1 .v201303211244-rel-r42 (com.google.gdt.eclipse.suite.ext 3.2.1.v201303211244-rel-r42) 需要 'bundle org.eclipse.mylyn.commons.ui 0.0.0' 但找不到无法满足依赖关系：来自：Google Plugin for Eclipse 4.2 3.2.1.v201303211244-rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.2.1.v201303211244-rel-r42) 到： com.google.gdt.eclipse.suite.ext [3.2.1.v201303211244-rel-r42]

我通过单击**Help -> Check for updates**解决了这个问题，之后我安装了这个插件并按预期工作。

# drupal - Drupal 7 和 Addthis

> ID：10152819
> 
> 赞同：1
> 
> 时间：2012-04-14T10:19:23.990
> 
> 标签：drupal, drupal-7, addthis

所以我需要使用addthis。请访问我正在尝试实施的页面添加此内容。

[http://www.iamvishal.com/dev/node/13](http://www.iamvishal.com/dev/node/13)

添加此按钮不会显示在我的页面上。我可以使用纯 html 代码来实现它，但 drupal 实现不起作用。

js 正在加载，但我无法调试问题，因为我无法找到发生这种情况的问题。

干杯，维沙尔

ps - 有关 addthis 的更多信息，请访问[http://www.addthis.com/](http://www.addthis.com/)

代码：

```
<script type="text/javascript">
(function ($) {
    Drupal.behaviors.slider = {
        attach:function(context) {
            var script = 'http://s7.addthis.com/js/250/addthis_widget.js#domready=1';
            if (window.addthis) {
                window.addthis = null;
            }
            $.getScript(script);
        }

    };

}(jQuery));
</script>

<div id="sociallinks">
<div class="viewing">Request a viewing</div>

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style addthis_32x32_style">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>

<!-- AddThis Button END -->
</div><!-- end of social links --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:50:17.473

在 D7 中对我有用的是创建一个新的“文本格式”，其中*没有*启用过滤器。无论出于何种原因，D7 都认为 AddThis 代码有错误或不完整。

配置 > 内容创作 > 文本格式 > 添加文本格式

试一试。

# sql - 作业中的 SSAS 多维数据集进程失败

> ID：10152820
> 
> 赞同：0
> 
> 时间：2012-04-14T10:19:26.527
> 
> 标签：sql, ssas, jobs

我有一些 ssis 包和一个立方体要在我的工作计划中处理。当我在 Visual Studio 中处理多维数据集时，即使我在 sql 的分析服务中手动尝试它也可以正常工作，它也可以在那里工作。但是我的工作未能说出流程立方体的步骤。

这是错误消息的一部分：

处理时发现重复的属性键：表：'dbo_Customer'，列：'Updated_By'，值：'

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:53:29.443

我自己完成了，我的一个 Excel 模板在“更新者”列中没有分配值，因此数据库中没有任何值。它是空白的。因此在处理多维数据集时会产生问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:04:16.553

您应该阅读有关维度上的 UnknowMember 的信息。遇到与维度无关的事实的情况很常见。

基本上它的作用是在面对这种情况时，它不会中断刷新，而是用您在 UnknowMemberName 上配置的任何内容替换缺失的值（例如 N/A）

# ruby-on-rails - 提交后Rails POST参数为空？

> ID：10152821
> 
> 赞同：1
> 
> 时间：2012-04-14T10:19:32.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我有一个奇怪的 rails 3.2 问题。当我提交这样的表格时：

```
<%= form_for @job, :url => job_preview_path do |f| %>
<dl>
  <dt><%= f.label :job_title, "Job Titel" %></dt>
  <dd><%= f.text_field :job_title %></dd>
  <dt>Checkbox please!</dt>
  <dd><%= f.check_box :extra_featured %> </dd>
</dl>
<%= f.submit "Submit" %></p>
<% end %> 
```

其中动作路线定义为

```
match 'job/preview' => 'jobs#preview', :as => :job_preview, :via => :post 
```

POST 参数的值在提交后保持为空，除了 check_box 值。在提交后控制器中的操作中，我将参数重新分配给模型，因此我可以重用参数来保存条目。

```
def preview
  @job = Job.new(params[:job])
end 
```

对这种奇怪的行为有什么建议吗？我是盲人，没有看到错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T14:24:21.640

你在 Rails 3.2.3 上吗？Rails 3.2.3 对 Active Record 的更改之一是“默认将所有属性分配列入白名单”。请参阅[[ANN] Rails 3.2.3 已经发布！](http://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/)

# android - 重用 XML 布局文件以显示不同的信息（Android 应用程序）

> ID：10152823
> 
> 赞同：0
> 
> 时间：2012-04-14T10:20:00.223
> 
> 标签：android, sliding-window, xml-layout

我是 Android 新手，有一个简单的问题。目前我正在开发一个产品应用程序，它允许用户添加、删除和浏览各种产品。该应用程序使用预定义的基于 XML 的布局文件作为填充整个屏幕以显示当前产品详细信息的模板。当用户添加新产品时，我想重新使用相同的布局文件，但用新产品的信息填充它。此外，我想保留以前添加的产品（例如 ArrayList），用户可以通过水平滑动（从左到右或从右到左）浏览此列表。现在，最好用什么来表示每个产品（视图、子视图等），以及如何重用相同的基于 XML 的布局文件来显示不同产品的详细信息。请原谅我的英语并提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T14:05:41.190

您所描述的内容由[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)实现。除了 API 参考之外，开发者网站上还有一篇[博文。](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

要实现它，您需要创建一个`PagerAdapter`子类来为`ViewPager`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T11:04:57.873

您可以创建一个扩展 ArrayAdapter 的新类，然后覆盖 getView() 方法来扩展您的自定义布局。getView() 将返回单行的视图。这样您就可以重复使用您的布局。所以它看起来像：

```
public class ProductAdapter extends ArrayAdapter<Product> {

    private LayoutInflater li;

    public ProductAdapter(Context context, List<Product> products) {
        super(context, 0, products);
        li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        // Get the product of the position
        Product product = getItem(position);

        View v = convertView;
        if ( v == null ) {
           // Your custom layout file for a single row in the list.
            v = li.inflate(R.layout.product_row, null);
        }

        // Populate your view here. Use v.findViewById().

        return v;
    }

} 
```

要在 ListActivity 中显示列表，请使用：

```
// The variable products is your initial list of products.
ProductAdapter adapter = new ProductAdapter(this, products); 
setListAdapter(adapter); 
```

添加产品时，您可以通过调用 adapter.add()（如果您想将产品添加到列表末尾）或 insert()（指定您在产品列表中的位置）将其添加到 ArrayAdapter想要在 ProductAdapter 上插入新产品）方法。之后，您可以调用 adapter.notifyDataSetChanged() 来通知您的适配器数据已更改并且必须刷新列表。

# c# - Windows phone 7 页面导航

> ID：10152824
> 
> 赞同：-3
> 
> 时间：2012-04-14T10:20:02.267
> 
> 标签：c#, windows, windows-phone-7

如何在 Visual Studio 2010 for Windows Phone 中的一个项目文件之间导航到另一个项目文件，以便我们可以在彼此中使用 xaml 文件或使用其他 cs 文件............

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T10:24:22.517

这是你需要做的：

```
private void hyperlinkButton1_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/SecondPage.xaml", UriKind.Relative));
        } 
```

您可以从这里找到详细信息[http://msdn.microsoft.com/library/windows/apps/ff626521(v=vs.105).aspx](http://msdn.microsoft.com/library/windows/apps/ff626521(v=vs.105).aspx)

# java - Netbeans GUI 不会显示

> ID：10152825
> 
> 赞同：1
> 
> 时间：2012-04-14T10:20:07.167
> 
> 标签：java, netbeans

我在 windows 上的 netbeans 中设计了一个简单的 gui，但是当我尝试运行它时，什么都没有显示。我的主类被调用`ModelApp.java`，我在 netbeans 中设计的 gui 部分被调用`app.java`。当我尝试在命令提示符下运行 jar 时，出现错误

```
Error: Could not find or load main class ModelApp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:23:58.503

您的`ModelApp`课程可能不在清单文件或类似文件中写入的文件夹中。

请参阅[JAR 基础知识](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/build.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:49:36.697

如果要通过单击 jar 来运行应用程序，则需要在 jar 中的 META-INF/MANIFEST.MF 文件中指定主类，如[http://docs.oracle.com/javase/tutorial/deployment所述/jar/appman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html/%22here%22%22)。确保您已正确定义它。

在创建 jar 文件期间，您应该能够在 Netbeans 中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:40:40.853

是不是忘记在 ModelApp.java 中创建 main 方法了？

```
public static void main(String[] argv) {
app gui = new app();
} 
```

通常这应该工作

# javafx-2 - JavaFX 2 自动列宽

> ID：10152828
> 
> 赞同：50
> 
> 时间：2012-04-14T10:20:58.943
> 
> 标签：javafx-2

我有一个显示联系人详细信息的 JavaFX 2 表，假设有三列：名字、姓氏和电子邮件地址。当我的应用程序启动时，它会在表格中填充几行关于系统中已有人员的数据。

问题是列宽都是一样的。大多数情况下，名字和姓氏会完整显示，但电子邮件地址会被截断。用户可以双击标题中的分隔线来调整列的大小，但这很快就会变得乏味。

预先填充表格后，我想以编程方式调整所有列的大小以显示它们包含的数据，但我不知道如何实现这一点。我可以看到我可以打电话`col.setPrefWidth(x)`，但这并没有真正帮助，因为我必须猜测宽度。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-14T10:47:39.317

如果您的总列数是已知的。您可以在 tableview 的宽度之间分配列宽：

```
nameCol.prefWidthProperty().bind(personTable.widthProperty().divide(4)); // w * 1/4
surnameCol.prefWidthProperty().bind(personTable.widthProperty().divide(2)); // w * 1/2
emailCol.prefWidthProperty().bind(personTable.widthProperty().divide(4)); // w * 1/4 
```

在这段代码中，当 tableview 调整大小时，列的宽度比例保持同步，因此您不需要手动执行此操作。也`surnameCol`占用了 tableview 宽度的一半空间。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-02-08T08:42:08.880

这在 JavaFX 8 中对我有用

```
table.setColumnResizePolicy( TableView.CONSTRAINED_RESIZE_POLICY );
col1.setMaxWidth( 1f * Integer.MAX_VALUE * 50 ); // 50% width
col2.setMaxWidth( 1f * Integer.MAX_VALUE * 30 ); // 30% width
col3.setMaxWidth( 1f * Integer.MAX_VALUE * 20 ); // 20% width 
```

在您遇到问题的其他示例中，垂直滚动条宽度被忽略。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-18T11:38:29.843

当我使用 SceneBuider 时，我只是将 MinWidth 和 MaxWidth 定义到某些列和主列，我只是将 PrefWidth 定义为“USE_COMPUTED_SIZE”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-31T17:07:16.380

3年后，我终于找到了解决方案，[tableview中的javafx列自动调整大小](https://stackoverflow.com/questions/14650787/javafx-column-in-tableview-auto-fit-size)

```
import com.sun.javafx.scene.control.skin.TableViewSkin;
import javafx.scene.control.Skin;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class GUIUtils {
    private static Method columnToFitMethod;

    static {
        try {
            columnToFitMethod = TableViewSkin.class.getDeclaredMethod("resizeColumnToFitContent", TableColumn.class, int.class);
            columnToFitMethod.setAccessible(true);
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }

    public static void autoFitTable(TableView tableView) {
        tableView.getItems().addListener(new ListChangeListener<Object>() {
            @Override
            public void onChanged(Change<?> c) {
                for (Object column : tableView.getColumns()) {
                    try {
                        columnToFitMethod.invoke(tableView.getSkin(), column, -1);
                    } catch (IllegalAccessException | InvocationTargetException e) {
                        e.printStackTrace();
                    }
                }
            }
        });
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-12T12:37:47.103

如果您有 4 列，并且只有最后一列需要扩展以填充表格的其余部分宽度，并且其他列保持我在 Scene Builder 中设置的大小。

```
double width = col1.widthProperty().get();
width += col2.widthProperty().get();
width += col3.widthProperty().get();

col4.prefWidthProperty().bind(table.widthProperty().subtract(width)); 
```

或者，如果您有 2 列需要扩展。

```
double width = col1.widthProperty().get();
width += col3.widthProperty().get();

col2.prefWidthProperty().bind(table.widthProperty().subtract(width).divide(2));
col4.prefWidthProperty().bind(table.widthProperty().subtract(width).divide(2)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-13T09:23:31.330

此外，一个非常简单的基于 an 的技巧`AnchorPane`将是一个很好的解决方案。

我们将把它包装`TableView`成一个`AnchorPane`，但我们也会像这样锚定左右两侧`TableView`：

```
AnchorPane wrapper = new AnchorPane();

AnchorPane.setRightAnchor(table, 10.0);
AnchorPane.setLeftAnchor(table, 10.0);
wrapper.getChildren().add(table); 
```

这个简单的代码也将`TableView`在两个方向（左右）拉伸，它会在添加滚动条时进行调整。

观看此动画 gif，您可以了解其工作原理。

[![在此处输入图像描述](../Images/0f9968d7ce6a3352bd6b964e5485da5e.png)](https://i.stack.imgur.com/QvVS6.gif)

现在您可以调整列的大小，添加以下行：

```
fnColumn.setMaxWidth( 1f * Integer.MAX_VALUE * 30 ); // 30% width
lnColumn.setMaxWidth( 1f * Integer.MAX_VALUE * 40 ); // 40% width
emColumn.setMaxWidth( 1f * Integer.MAX_VALUE * 30 ); // 30% width 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-12T16:00:10.030

我的想法。

```
table.getColumns().add(new TableColumn<>("Num") {
    {
        // 15%
        prefWidthProperty().bind(table.widthProperty().multiply(0.15));
    }
});
table.getColumns().add(new TableColumn<>("Filename") {{
    // 20%
    prefWidthProperty().bind(table.widthProperty().multiply(.2));
}});
table.getColumns().add(new TableColumn<>("Path") {{
    // 50%
    prefWidthProperty().bind(table.widthProperty().multiply(.5));
}});
table.getColumns().add(new TableColumn<>("Status") {
    {
        // 15%
        prefWidthProperty().bind(table.widthProperty().multiply(.15));
    }
}); 
```

# iphone - 带有 UITableView 的页面

> ID：10152830
> 
> 赞同：2
> 
> 时间：2012-04-14T10:21:15.167
> 
> 标签：iphone, ios, ipad, uitableview, uipagecontrol

我想显示 UITableView，但我想将它与 Page Control 一起使用。例如，如果用户更改页面，我会显示其他数据（在同一张桌子上）。

我知道点击页面控制后我可以更改数据并重新加载表格。但是我想在水平滚动时更改数据，我希望它看起来像我滑到其他表。我不知道怎么开始？

我想要那样的东西（而是用普通的桌子）：![在此处输入图像描述](../Images/c61e8f8725dfda41452d80b1d332c518.png)

我怎样才能开始呢？也许有任何开源示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:40:54.623

我同意[Oscar](https://stackoverflow.com/a/10152857/1088519)，使用`UIScrollView`具有您以后可以使用漂亮幻灯片动画的优点。看看[`PanelTableView`](https://github.com/honcheng/PanelTableView)控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:25:06.740

创建一个带有分页的 UIScrollView，看这里： http: [//www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)

然后只需在每个子视图（页面）中创建一个 UITableView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:32:05.177

不完全确定这是否能解决您的问题，但任何时候我想要 UITableView 水平滚动而不是垂直滚动，我都会将它翻转到一边。

```
//Rotate the table 90 degrees counterclockwise
CGAffineTransform rotateTable = CGAffineTransformMakeRotation(-M_PI_2);
self.myTableView.transform = rotateTable;
//Code to reset the position of your table as the rotation throws it off 
```

然后在 tableView:cellForRowAtIndexPath: 旋转单元格

```
//Rotate the cell 90 degrees clockwise
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

     ...

     CGAffineTransform rotateCell = CGAffineTransformMakeRotation(M_PI_2);
     cell.transform = rotateCell;    

     return cell;
} 
```

在每个单元格中，您将放置代表一个“屏幕”或“页面”的控件。作为 UIScrollView 的 UITableView 支持分页，因此您可以利用它。

# c# - 主键生成方法

> ID：10152833
> 
> 赞同：1
> 
> 时间：2012-04-14T10:21:40.503
> 
> 标签：c#, sql-server

为表生成主键时最好的方法是什么？

即当数据库接收到的数据不是单射的，不能作为主键时。

在代码中，管理表行的主键的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:23:01.920

`AUTO_INCREMENT`在 mysql 中，`IDENTITY`在 SQL Server 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T14:56:01.330

首先建议远离任何主键的唯一标识符。尽管它有一些有趣的简单方法可以在客户端生成它，但它几乎不可能在主键上有任何可能有用的索引。如果我能及时返回并在 99% 的地方禁止使用唯一标识符，这将在过去 2 年中节省超过 3 人年的 dba/开发时间。

这是我的建议，使用 INT IDENTITY 作为主键。

```
create table YourTableName(
   pkID int not null identity primary key,
   ... the rest of the columns declared next.
) 
```

其中 pkID 是您的主键列的名称。

这应该做你正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T12:57:10.193

`IDENTITY`在 SQL Server 中

如果你需要知道你的新 ID 是什么同时`INSERT`-ing 数据，使用`OUTPUT`语句子句`INSERT`- 所以新行的副本被放入 table-type 参数。

如果由于某种原因在 SQL 中生成唯一 ID 不适合您，请在您的应用程序中生成 GUID - GUID 具有非常高的唯一性（但实际上并不能保证）。SQL Server 为列提供了专用的 GUID 类型 - 它被称为`uniqueidentifier`.

[http://msdn.microsoft.com/en-us/library/ms187942.aspx](http://msdn.microsoft.com/en-us/library/ms187942.aspx)

# sql - ColdFusion 中的 SQL 注入防护

> ID：10152839
> 
> 赞同：6
> 
> 时间：2012-04-14T10:22:44.013
> 
> 标签：sql, coldfusion, code-injection, cfqueryparam

我正在尝试提高我的应用程序的安全性。每当我从用户（无论是通过 POST 还是通过 GET）接收到应该是整数的数据时，我都会适当地验证它。但通常数据是 VARCHAR，有时可以包含 HTML。

在这种情况下，如何保护我的数据库免受 SQL 注入？

是否 `<cfqueryparam value="#form.textInput#" cfsqltype="cf_sql_varchar">`保护查询免于在 VARCHAR 值内发送恶意 SQL 语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T10:33:37.977

简短的回答是肯定的。

cfqueryparam 将阻止某些 sql 注入攻击的发生。

还有其他可以使用的攻击变量，所以要小心，但是写得好的coldfusion可以非常安全。

如果您正在存储并稍后显示输入 html，请注意跨站点脚本攻击，尤其要小心 javascript 标记。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T02:48:37.850

您的问题的简短回答是“是”。

我使用三种方法阻止黑客攻击。

1.  我在所有数据库查询中都使用 cfqueryparam。我将在模板/cfm 文件的顶部使用 cfparam 作为 url 范围变量。

2.  我用过 Portcullis 或它的变种。您可以从[http://portcullis.riaforge.org/](http://portcullis.riaforge.org/)获得它。Portcullis 还将防御一些跨站点脚本攻击。

3.  我使用 Windows IIS 7.5 (Windows Server 2008 R2)。我使用 URL 重写功能来阻止大量基于 URL 的攻击。你可以用 Apache 和它支持的重写来做类似的事情。这是我的 IIS URL 重写规则：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <appcmd>
        <CONFIG CONFIG.SECTION="system.webServer/rewrite/globalRules" path="MACHINE/WEBROOT/APPHOST" overrideMode="Inherit" locked="false">
            <system.webServer-rewrite-globalRules>
                <rule name="SQL Injection - EXEC - SCRIPT_NAME" stopProcessing="true">
                    <match url="^.*EXEC\s*[\(|%28].*$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - EXEC - QS" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{QUERY_STRING}" pattern="^.*EXEC\s*[\(|%28].*$" />
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - CAST - SCRIPT_NAME" stopProcessing="true">
                    <match url="^.*CAST\s*[\(|%28].*$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - CAST - QS" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{QUERY_STRING}" pattern="^.*CAST\s*[\(|%28].*$" />
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - DECLARE - SCRIPT_NAME" stopProcessing="true">
                    <match url="^.*DECLARE.*$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - DECLARE - QS" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{QUERY_STRING}" pattern="^.*DECLARE.*$" />
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - NVARCHAR - SCRIPT_NAME" stopProcessing="true">
                    <match url="^.*CHAR\s*[\(|%28].*$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - NVARCHAR - QS" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{QUERY_STRING}" pattern="^.*CHAR\s*[\(|%28].*$" />
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - sp_password - SCRIPT_NAME" stopProcessing="true">
                    <match url="^.*sp_password.*$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - sp_password - QS" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{QUERY_STRING}" pattern="^.*sp_password.*$" />
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - xp - SCRIPT_NAME" stopProcessing="true">
                    <match url="^.*%20xp_.*$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
                <rule name="SQL Injection - xp - QS" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{QUERY_STRING}" pattern="^.*%20xp_.*$" />
                    </conditions>
                    <serverVariables>
                    </serverVariables>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
                </rule>
            </system.webServer-rewrite-globalRules>
        </CONFIG>
    </appcmd> 
    ```

这些规则被添加到 IIS 的 C:\Windows\System32\inetsrv\config\applicationHost.config 文件中。但是，我 ****NOT**** 建议您直接编辑此文件。一个错误，IIS 将无法加载。而是复制并粘贴上面的规则并将它们保存为“iis-global-rewrite.xml”。然后运行以下批处理文件将规则添加到您的 IIS 服务器：

```
C:\Windows\System32\inetsrv\appcmd.exe set config -in < iis-global-rewrite.xml 
```

IIS 重写规则应该适用于 IIS 7.0 (Windows Server 2008)，但我尚未对其进行测试。

如果您无权访问服务器，也可以使用 web.config 文件将这些规则应用于单个站点。

为什么我使用三种不同的保护方法？因为它们都没有覆盖所有的基础。IIS 重写规则只能防止基于 URL 的攻击。黑客也可以使用做同样事情的表单提交攻击。我更喜欢将 IIS 规则作为第一道防线，因为它适用于服务器上的所有站点，包括 PHP、ASP 等。Portcullis 是 ColdFusion 的第二道防线，因为它可以捕获基于表单的攻击和一些跨站点脚本攻击。最后一道防线是 cfqueryparam/cfparam 代码，它可以防止基于 URL/表单的 SQL 注入攻击。

如果使用所有这三种方法，则服务器/站点应该非常安全。随着攻击的发展和改进，我仍然建议不时查看服务器日志。

# tinymce - < 和引用更改为 tinyMCE 中的 HTML 实体

> ID：10152840
> 
> 赞同：2
> 
> 时间：2012-04-14T10:22:56.117
> 
> 标签：tinymce

在 DB 中，如下所示。

```
<img src="../../../../assets/images/frontpage/big_tree.jpg" alt="" 
width="516" height="200" /> 
```

但是当它在tinyMCE中时，所有的<，>和“都会变成这样的html实体。所以它不会显示在FF中。

```
&lt;img src=&quot;../../../../assets/images/frontpage/big_tree.jpg&quot; 
alt=&quot;&quot; width=&quot;516&quot; height=&quot;200&quot; /&gt; 
```

我怎样才能避免这个问题？

我有以下 tinyMCE 初始化

```
tinyMCE.init({
        mode : "textareas",
        /* // if I want to add to a specific area then use this
        mode : "specific_textareas",
        editor_selector : "mceEditor", // add class="mceEditor" where you want to add tinyMCE
        */

        theme : "advanced",
        plugins : "advimage,advlink,media,contextmenu",
        //theme_advanced_buttons1_add_before : "newdocument,separator",
        theme_advanced_buttons1_add : "fontselect,fontsizeselect",
        theme_advanced_buttons2_add : "separator,forecolor,backcolor,liststyle",
        theme_advanced_buttons2_add_before: "cut,copy,separator,",
        theme_advanced_buttons3_add_before : "",
        theme_advanced_buttons3_add : "media",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        //extended_valid_elements : "hr[class|width|size|noshade]",
        extended_valid_elements : "span[class|align|style]",
        file_browser_callback : "ajaxfilemanager",
        paste_use_dialog : false,
        theme_advanced_resizing : true,
        theme_advanced_resize_horizontal : true,
        apply_source_formatting : true,
        force_br_newlines : true,
        force_p_newlines : false,   
        relative_urls : true
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:20:58.860

您需要将tinymce 内容按原样保存在数据库中（“<”和“>”作为真实字符），否则您需要在将数据库内容呈现到网页之前对它们进行实体解码。根据您的脚本语言（perl、php、python、...），有一些特殊的功能可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T10:36:44.013

在 php 中，您可以使用[html_entity_decode](http://www.php.net/manual/en/function.html-entity-decode.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-19T03:35:18.617

我有同样的问题，我通过添加来纠正它

```
 $_POST = array_map( 'stripslashes', $_POST ); 
```

# css - 字体检测浏览器插件

> ID：10152841
> 
> 赞同：0
> 
> 时间：2012-04-14T10:22:56.823
> 
> 标签：css, font-face

我对 Web Developer Toolbar 和 Colorzilla 插件非常满意。我喜欢如何使用这些功能轻松检测网页中使用的 HTML 结构和颜色。但是在我寻找一个好的 CSS 字体检测工具时，我没有遇到任何以类似方式工作的东西。有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:36:38.883

为此，我使用了一个名为[WhatFont的工具](http://chengyinliu.com/whatfont.html)

![](../Images/d6c8b32d5e4980a6b93d2854c3075f92.png)

它显示了有关每个 DOM 元素中使用的字体的各种信息，例如字体系列、颜色、大小，甚至`@font-face`文件的来源。它以小[书签](http://chengyinliu.com/whatfont.html#whatfont-install-bookmarklet)或[Chrome 插件的](https://chrome.google.com/webstore/detail/jabopobgcpjmedljpbcaablpmlmfcogm)形式提供。

# android - Android 和 slf4j：“java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory”

> ID：10152848
> 
> 赞同：3
> 
> 时间：2012-04-14T10:23:53.290
> 
> 标签：android, eclipse, slf4j

两天前，当我在 Eclipse 中的 android 项目仍然有效时，我在我的 SDK 中添加了“android SDK 4.0.3”（除了 android SDK 2.1）。

从那一刻起，我就遇到了**slf4j-android**库的问题；这是一个例外：

```
Uncaught handler: thread main exiting due to uncaught exception
  java.lang.ExceptionInInitializerError
  at java.lang.Class.newInstanceImpl(Native Method)
  at java.lang.Class.newInstance(Class.java:1479)
  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:123)
  at android.app.ActivityThread.main(ActivityThread.java:4363)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:521)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
  at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory
  at it.cefriel.swa.urbanopoly.client.game.UrbanopolyActivity.<clinit>(UrbanopolyActivity.java:11) 
```

我使用的 JAR 是**slf4j-android-1.5.8.jar**。构建路径似乎设置正确。我还尝试使用 slf4j 创建另一个项目，但我得到了同样的错误..

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T03:28:39.997

尝试添加 slf4j-api-1.5.8.jar 或最新版本以及当前的 slf4j-android-1.5.8.jar

# android - 通过服务下载文件时出现巨大延迟

> ID：10152850
> 
> 赞同：0
> 
> 时间：2012-04-14T10:24:00.233
> 
> 标签：android, service, delay, lag

我有一个接收要下载的 URL 的服务。该服务然后下载这些 URL 并将它们保存到 SD 卡上的文件中。

当我在下载队列中放入超过 2 个项目时，我的设备无法使用。它几乎冻结了。巨大的滞后等等。任何的想法？

源代码：

```
private static boolean downloading = false;
    private static ArrayList<DownloadItem> downloads = new ArrayList<DownloadItem>();

    /**
     * called once when the service started
     */
    public static void start() {
        Thread thread = new Thread(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    if (downloads.size() > 0 && !downloading) {
                        downloading = true;
                        DownloadItem item = downloads.get(0);
                        downloadSingleFile(item.getUrl(), item.getFile());
                    }
                }
            }
        });
        thread.start();
    }

    public static void addDownload(DownloadItem item) {
        downloads.add(item);
    }

    private static void downloadSuccessfullFinished() {
        if (downloads.size() > 0)
            downloads.get(0).setDownloaded(true);
        downloadFinished();
    }

    private static void downloadFinished() {
        // remove the first entry; it has been downloaded
        if (downloads.size() > 0)
            downloads.remove(0);
        downloading = false;
    }

    private static void downloadSingleFile(String url, File output) {
        final int maxBufferSize = 4096;

        HttpResponse response = null;
        try {
            response = new DefaultHttpClient().execute(new HttpGet(url));
            if (response != null
                    && response.getStatusLine().getStatusCode() == 200) {
                // request is ok
                InputStream is = response.getEntity().getContent();
                BufferedInputStream bis = new BufferedInputStream(is);
                RandomAccessFile raf = new RandomAccessFile(output, "rw");
                ByteArrayBuffer baf = new ByteArrayBuffer(maxBufferSize);
                long current = 0;
                long i = 0;

                // read and write 4096 bytes each time
                while ((current = bis.read()) != -1) {
                    baf.append((byte) current);
                    if (++i == maxBufferSize) {
                        raf.write(baf.toByteArray());
                        baf = new ByteArrayBuffer(maxBufferSize);
                        i = 0;
                    }
                }

                if (i > 0) // write the last bytes to the file
                    raf.write(baf.toByteArray());

                baf.clear();
                raf.close();
                bis.close();
                is.close();

                // download finished get start next download
                downloadSuccessfullFinished();
                return;
            }
        } catch (Exception e) {
            // not successfully downloaded
            downloadFinished();
            return;
        }
        // not successfully downloaded
        downloadFinished();
        return;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:23:41.860

您应该使用 AsyncTask 或 Thread 来启动下载过程。

# php - 计算当前年份和当前月份的星期日到今天的数量？

> ID：10152860
> 
> 赞同：1
> 
> 时间：2012-04-14T10:25:52.830
> 
> 标签：php

如何计算从当前`YEAR`到今天已经过去的星期日数。我还想计算从现在`MONTH`到今天已经过去的星期天数。

例如

```
today is 14 April 2012 I should get 2 for the Number of Sundays
that are passed from the current month. 
```

谁能给我一个提示或教程如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T10:48:53.183

[好吧，我想使用date()](http://php.net/manual/en/function.date.php)函数很简单

```
//will give you the amount of sundays from the begining of the year
$daysTotal = ceil((date("z") - date("w")) / 7); 
//will give you the amount of sundays from the begining of the month
$daysTotal = ceil((date("j") - date("w")) / 7); 
```

我没有测试它，您可能想检查 round() 函数在这种情况下是否正常工作，但我认为这一点已经通过

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:21:08.100

Date('W') 可能会对您有所帮助。检查 php 手册的格式 - [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)。

不要忘记根据手册 - ISO-8601 年的周数，从星期一开始的周数。所以本周将被计算在内，即使这还不是星期天。因此，在这种情况下，将数字减少 1。

```
function get_sunday_since_year_start($today=null)
{
  if($today==null) $today = time();

  if(date('D',$today)=='Sun')
    return Date('W',$today);
  else
    return Date('W',$today)-1;
}

function get_sunday_since_month_start()
{
   return get_sunday_since_year_start()-get_sunday_since_year_start(strtotime(date('Y-m-01 00:00:00')));
} 
```

# entity-framework - 从 Role.OnStart() 产生的线程中的 EF 使用

> ID：10152866
> 
> 赞同：1
> 
> 时间：2012-04-14T10:26:43.040
> 
> 标签：entity-framework, azure

我使用 EF 代码优先来管理我的数据库连接，并在 web.config 中声明了一个显式连接字符串。我想安排一些数据库清理过程（比如每天删除测试事务），所以我从 Role.OnStart() 产生一个线程，并在实例之间进行适当的并发管理。

但是我得到了数据库数据库异常，例如数据库与我的模型不匹配，而我确信它确实如此（从应用程序“内部”使用的相同代码运行良好）。所以我的猜测是线程中没有使用 web.config，所以 EF 可能使用了默认的连接字符串。

从那里使用我的连接字符串的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T11:50:21.333

OnStart 方法与您的 Web 应用程序不在同一进程中运行，这意味着它不使用 web.config。我建议您将连接字符串存储在服务配置中，并在初始化上下文时从此处读取。

另一个优点是您无需重新部署应用程序即可更改设置。

# android - 带有图像和两个项目的列表视图？

> ID：10152871
> 
> 赞同：1
> 
> 时间：2012-04-14T10:27:35.367
> 
> 标签：android, listview, add

嗨，我想在列表视图中显示两个项目。我知道我们可以通过以下方式做到这一点。 `ArrayList<Map<String, String>>` 但我需要与这两个项目一起显示一张图片。
这是我想要的图像。

![在此处输入图像描述](../Images/eb30fe37e5d7b7d6cee60ee0aee71b83.png)

我用一个图像视图和两个文本视图创建 xml 文件。我不明白该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:30:59.307

您应该实现该类`ArrayAdapter`并创建自己的`ListAdapter`.

见：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:32:07.063

您需要使用您的单元设计创建一个布局文件。在适配器中，然后您以编程方式从布局中获取一个视图，调用当前布局的 inflate 方法，并填充字段并返回它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T11:20:27.893

对我来说，这样做的方法是使用 BaseAdapter。您需要在活动上拥有列表视图，为项目布局提供一个 xml，然后在列表视图上使用适配器调用 setAdapter()。

您可以在此处找到一些信息： [Android 中 Listview 上的延迟加载图像（初级）？](https://stackoverflow.com/questions/2912054/lazy-load-images-on-listview-in-androidbeginner-level)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T11:21:28.443

首先，您应该使用带有自己的对象的 ArrayList，例如

```
Class MyListeItem {

    String text1;
    String text2;
    String image;
}

List<MyListItem> = new ArrayList<MyListItem>(); 
```

然后创建一个扩展 BaseAdapter 的类来保存列表。创建一个 xml 文件，即。res/layouts 文件夹和 BaseAdapter 的 getView() 方法中的“my_listitem”执行类似

```
LinearLayout layout =  (LinearLayout)View.inflate(context, R.layout.my_listitem, null); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T11:14:12.127

这是这样一个列表的实现：[Contact-Picture-Sync](https://github.com/heinrisch/Contact-Picture-Sync)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-27T15:40:51.020

这是一个`list item`xml 布局文件，您可以使用`simplest attributes`

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:orientation="horizontal"
    android:padding="16dp">

    <ImageView
        android:id="@+id/list_item_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"/>

    <LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:orientation="vertical"
        android:paddingLeft="16dp">

        <TextView
            android:id="@+id/list_item_date_textview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Tomorrow"/>

        <TextView
            android:id="@+id/list_item_forecast_textview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Clear"/>

    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:id="@+id/list_item_high_textview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="25°"/>

        <TextView
            android:id="@+id/list_item_low_textview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="6°"/>
    </LinearLayout>

</LinearLayout> 
```

这会像这样

[![在此处输入图像描述](../Images/52d37b7129367a68fd3e9ed082d5a912.png)](https://i.stack.imgur.com/rNzpX.jpg)

你是最后一个符合你要求`can remove`的嵌套`LinearLayout`

这里是`invisible boundaries` [![在此处输入图像描述](../Images/105566402284ed7e914fbace3d2c3646.png)](https://i.stack.imgur.com/OAufx.jpg)

# iphone - 此类与键视图的键值编码不兼容

> ID：10152872
> 
> 赞同：52
> 
> 时间：2012-04-14T10:27:47.783
> 
> 标签：iphone, objective-c, ios, xcode

我对 xcode 很陌生...制作了一个应用程序（简单的计算器）工作非常好（在模拟器和设备上）。**当我在Target的****摘要**选项中设置主界面时，启动模拟器时出现以下错误：

 **> 2012-04-14 12:17:27.123 CalcTest[27550:f803] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，
> 
> 原因：“ `[<UIApplication 0x6a14650> setValue:forUndefinedKey:]`：此类不符合键计算器屏幕的键值编码。”
> 
> *** First throw call stack: (0x12db022 0x18f8cd6 0x12daee1 0xcc2022 0xc33f6b 0xc33edb 0xc4ed50 0x53671a 0x12dcdea 0x12467f1 0x53526e 0x536eb7 0x313ce1 0x313ff8 0x31317f 0x322183 0x322c38 0x316634 0x27fcef5 0x12af195 0x1213ff2 0x12128da 0x1211d84 0x1211c9b 0x312c65 0x314626 0x1bad 0x1b15 0x1) terminate called throwing an exception(lldb)

为了找到问题，我开始了一个新的基于视图的项目。

在模拟器上运行空的新项目-->works，

但是当我将主界面设置为 ViewController 时，在**摘要**中--> 模拟器崩溃了

> 2012-04-14 12:11:17.492 crash[27494:f803] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：
> 
> ' `[<UIApplication 0x6a6f4b0> setValue:forUndefinedKey:]`：这个类不符合键视图的键值编码。 ***首先抛出调用栈：
> 
> (0x13c7022 0x1558cd6 0x13c6ee1 0x9bf022 0x930f6b 0x930edb 0x94bd50 0x23371a 0x13c8dea 0x13327f1 0x23226e 0x233eb7 0x10ce1 0x10ff8 0x1017f 0x1f183 0x1fc38 0x13634 0x12b1ef5 0x139b195 0x12ffff2 0x12fe8da 0x12fdd84 0x12fdc9b 0xfc65 0x11626 0x1d4d 0x1cb5) terminate called throwing an exception

有解决问题的方法吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-14T10:40:13.317

如果您的 nib（xib 文件）中有一个控件链接到视图控制器中的属性（IBOutlet）或方法（IBAction），并且您已删除或重命名该属性或方法，则运行时找不到它因为它已被重命名，因此崩溃。

在您的情况下，您已将项目的 Main Interface 属性设置为 ViewController.nib。这是一个问题，因为应该用作主界面的唯一 nib 中应该有 UIWindows，并且该 nib 中的文件所有者应该设置为 AppDelegate。nib 中的 UIWindow 应链接到文件所有者 (AppDelegate) 的窗口属性。因为您使用没有运行时正在寻找的特征的 nib 设置它，所以它会给您这个错误。

解决方案是将主界面留空，因为您不必再​​手动设置 UIWindows。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-15T20:13:25.573

刚刚遇到了同样的问题，并通过在 xib 文件中右键 Control-Clicking 控件来修复它以查看引用的 Outlets。原来，某些控件仍在引用旧名称并导致此错误发生。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-01T16:54:43.320

如果您收到类似于以下内容的消息：

*   由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：

'[ setValue:forUndefinedKey:]: 这个类不符合键的键值编码

单击 BreakPoint 导航区域左下角的添加 (+)，选择“添加异常断点”，因为它因“NSUnknownKeyException”而崩溃，然后选择“全部”。运行程序。程序在第一个异常处停止。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-06T06:00:41.590

试试这个，选择 File's Owner 然后点击“Connection Inspector”（右窗格顶部的上方），你会看到所有的出口。寻找任何像这样（！）的标志，你会在小圆圈上找到它，表明**缺少插座**，你所要做的就是正确连接它或移除插座。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-23T07:43:04.903

尝试这个，

转到目标=>构建阶段=>编译源

然后包括'calculatorScreen.m'

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-10T21:02:37.653

我面临着同样的问题。就我而言，我已重命名 .h 文件中的文本标签。因此，在我的 main.storyboard 文件中有多个对该标签的引用。一旦我删除了旧参考，我的代码就开始工作了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-04T07:10:11.660

![](../Images/3334054b19c0868be0c5a21f2e87d1e5.png)

请检查您的目标会员选择第一个选项。这可能对其他人有所帮助**

# c# - 哪个是更好的解决方案？

> ID：10152876
> 
> 赞同：1
> 
> 时间：2012-04-14T10:28:19.030
> 
> 标签：c#, asp.net, vb.net

**解决方案1：**

```
Dim i As Integer = CInt(_table.Rows(0).Item(3))
Do While i - 2 > 0
                _tableBackLogs.Merge(Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i - 2 & "'"))
                i = i - 2
            Loop 
```

**溶液 2：**

```
 If i = 1 Then
                Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i & "'")
            ElseIf i = 2 Then
                Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i - 2 & "'")
            ElseIf i = 3 Then
                Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade FROM SubjectPI WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & "' AND Status='Fail' AND Semester='" & i - 2 & "'")
                'On and on....upto i=8
            End If 
```

就性能和执行速度而言，哪一个是更好的解决方案？

**更新：**我将数据存储到数据表中......然后将其与 ListView 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:54:10.970

有什么理由不使用“IN”在一个查询中获取所有这些学期数字，就像这样吗？

```
Global.DataAccess.GetDataTable("SELECT SubjectID,SubjectName,Grade 
    FROM SubjectPI 
    WHERE RegNo='" & CInt(HttpContext.Current.Session("userName")) & 
           "' AND Status='Fail' 
              AND Semester IN ('8', '6', '4', '2'))"); 
```

因为如果您*可以*使用“IN”，请执行此操作。“不要重复自己，”是的，当然，你打赌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:35:45.610

编写软件的一个原则是：不要重复自己（DRY）。所以解决方案1肯定更好。否则，您将遇到代码维护问题。我怀疑您会在两种解决方案之间获得任何可测量的速度差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:53:59.360

```
Which one is a better solution in terms of performance and speed of execution?? 
```

好吧，抛开对字符串连接的担忧，最好的方法是在对数据库的最少调用次数中获取所需的所有数据。

您应该更改代码以确定需要哪些学期，然后将所有内容放在一个唯一的查询中。
所以，正如你所说，在你的评论中，`(Semester=1 OR Semester=2 OR Semester=3")`会更好。

从您的代码中，我假设这`semester`是一个 varchar 字段。这很糟糕，因为如果它是一个数字，您可以使用最小值和最大值编写更好的查询。（另外，如果你能保证学期是连续的。）。`(Semester >= 1 AND Semester <= 3)`

但是，您可以从中获得的最佳性能是您的数据表中是否具有正确的索引。

# sql - 查询在 while 循环中无法正常工作

> ID：10152885
> 
> 赞同：1
> 
> 时间：2012-04-14T10:30:48.620
> 
> 标签：sql, tsql, sql-server-2005

我有一个正在尝试插入的 While 循环。

```
 DECLARE @CurrentOffer int  =121
        DECLARE @OldestOffer int  = 115
        DECLARE @MinClubcardID bigint=0
              DECLARE @MaxClubcardID bigint=1000
                    WHILE 1 = 1
                        BEGIN
                        INSERT INTO Temp WITH (TABLOCK)
                        SELECT  top (100) clubcard  from TempClub   with (nolock) where ID between 
                        @MinClubcardand and @MaxClubcard

                        declare @sql varchar (8000)
                        while @OldestOffer <= @CurrentOffer
                        begin
                        print @CurrentOffer
                        print @OldestOffer

                                set @sql = 'delete from Temp where Clubcard 
                                 in (select Clubcard from ClubTransaction_'+convert(varchar,@CurrentOffer)+' with (nolock))'
                                 print (@sql)
                                 exec (@sql)

                                SET @CurrentOffer = @CurrentOffer-1  
                                IF @OldestOffer = @CurrentOffer
                                    begin

                                        -- my logic
                                    end

                        end
                    end 
```

我的 TempClub 表总是只检查前 100 条记录。我的 TempClub 表有 3000 条记录。我需要使用 ClubTransaction_121,ClubTransaction_120,ClubTransaction_119 表检查我所有的俱乐部卡所有 3000 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T14:56:10.410

为了进行批处理类型处理，您需要将 @MinClubcardID 设置为最后处理的 ID 加 1 并包含 ORDER BY ID 以确保按顺序返回记录。

但是......我不会使用使用主键作为我的“索引”的方法。您正在寻找的是基本的分页模式。在 SQL Server 2005+ 中，Microsoft 引入了 row_number() 函数，这使得分页变得更加容易。

例如：

```
 DECLARE @T TABLE (clubcard INT)

 DECLARE @start INT
 SET @start = 0

 WHILE(1=1)
 BEGIN
   INSERT @T (clubcard)
   SELECT TOP 100 clubcard FROM 
   (
      SELECT clubcard,
      ROW_NUMBER() OVER (ORDER BY ID) AS num
      FROM dbo.TempClub
   ) AS t
   WHERE num > @start

  IF(@@ROWCOUNT = 0) BREAK;

  -- update counter
  SET @start = @start + 100

  -- process records found

  -- make sure temp table is empty
  DELETE FROM @T
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:51:57.413

第`SELECT`8 行的查询只返回前 100 项

```
SELECT top (100) clubcard from TempClub ... 
```

如果要检索所有项目，请删除`top (100)`语句的一部分

```
SELECT clubcard from TempClub ... 
```

# sql-server - 是否可以在“case”语句的“when”部分使用“or”？

> ID：10152886
> 
> 赞同：3
> 
> 时间：2012-04-14T10:30:51.197
> 
> 标签：sql-server, sql-server-2008-r2

如何`or`在语句`when`部分使用？`case`

```
DECLARE @TestVal INT
SET @TestVal = 1
SELECT
CASE @TestVal
WHEN 1 THEN 'First'--- this line
WHEN 2 THEN 'First'--- and this line
WHEN 3 THEN 'Third'
ELSE 'Other'
END 
```

而不是使用上面两行我想使用这样的东西：

```
when 1 or 2 then 'First' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T10:33:53.223

你可以这样做：

```
CASE 
    WHEN @TestVal in (1, 2) THEN 'First OR Second'
    WHEN @TestVal = 3 THEN 'Third'
    ELSE 'Other'
END 
```

[这](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.100%29.aspx)是官方文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:37:04.443

```
SELECT
CASE 
WHEN @TestVal = 1 or @TestVal = 2 THEN 'First'
... 
```

# android - 动画后如何设置按钮的位置？

> ID：10152889
> 
> 赞同：0
> 
> 时间：2012-04-14T10:31:12.930
> 
> 标签：android, animation, position, clickable

我有一个带有动画的按钮（放置在线性布局中）。动画完成后（简单 translateAnimation），我希望启用该动画按钮。我意识到使用动画仅对可绘制按钮有影响，因此可点击的“位置”保持在原始位置。

```
layout= (LinearLayout) findViewById (R.id.newitemtext);
 layout.setBackgroundResource(R.drawable.white_box);
btn = (Button) findViewById (R.id.btn);
 moveLefttoRight = new TranslateAnimation(0,0 , 0, 200);
            moveLefttoRight.setDuration(1000);
            moveLefttoRight.setFillAfter(true); 

            animbutton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    layout.startAnimation(moveLefttoRight);
                    layout.setEnabled(true);

                }
            });

btn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Log.i("TAG", "CCIK");

                }

}); 
```

btn 按钮位于 LinearLayout 布局中。动画后如何设置位置？我尝试使用 setPadding 但没有成功。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T12:49:46.710

使用[`View.setLayoutParams()`](http://developer.android.com/reference/android/view/View.html#setLayoutParams%28android.view.ViewGroup.LayoutParams%29), 更新视图参数 - 请注意，它取决于视图内部的布局类型以及如何更新参数。例如，如果您的视图位于 a 中`LinearLayout`，那么您将只能调整与 a 相关的参数`LinearLayout`（重力、重量、宽度、高度等），因此您将无法调整绝对 X/Y 坐标。您可能想要切换到类似的东西，[`RelativeLayout`](http://developer.android.com/reference/android/widget/RelativeLayout.html)以尝试根据其他视图的位置将视图移动到最终目的地。

# php - PHP 替换 à->a、è->e 等特殊字符

> ID：10152894
> 
> 赞同：56
> 
> 时间：2012-04-14T10:32:38.170
> 
> 标签：php, utf-8, preg-replace, decode

我有 php 文档 signup.php，它将表单（在 form.php 文档中）的内容保存到 MySQL 库。当我想重新格式化输入内容时出现问题。我想解码像 à->a 这样的 UTF-8 字符。

```
 $first_name=$_POST['first_name'];
  $last_name=$_POST['last_name'];
  $course=$_POST['course'];

  $chain="prêt-à-porter";

$pattern = array("'é'", "'è'", "'ë'", "'ê'", "'É'", "'È'", "'Ë'", "'Ê'", "'á'", "'à'", "'ä'", "'â'", "'å'", "'Á'", "'À'", "'Ä'", "'Â'", "'Å'", "'ó'", "'ò'", "'ö'", "'ô'", "'Ó'", "'Ò'", "'Ö'", "'Ô'", "'í'", "'ì'", "'ï'", "'î'", "'Í'", "'Ì'", "'Ï'", "'Î'", "'ú'", "'ù'", "'ü'", "'û'", "'Ú'", "'Ù'", "'Ü'", "'Û'", "'ý'", "'ÿ'", "'Ý'", "'ø'", "'Ø'", "'œ'", "'Œ'", "'Æ'", "'ç'", "'Ç'");

$replace = array('e', 'e', 'e', 'e', 'E', 'E', 'E', 'E', 'a', 'a', 'a', 'a', 'a', 'A', 'A', 'A', 'A', 'A', 'o', 'o', 'o', 'o', 'O', 'O', 'O', 'O', 'i', 'i', 'i', 'I', 'I', 'I', 'I', 'I', 'u', 'u', 'u', 'u', 'U', 'U', 'U', 'U', 'y', 'y', 'Y', 'o', 'O', 'a', 'A', 'A', 'c', 'C'); 

$chain = preg_replace($pattern, $replace, $chain);

echo $chain; // print pret-a-porter

$first_name =  preg_replace($pattern, $replace, $first_name);

echo $first_name; // does not change the input!?! 
```

为什么它对 $chain 非常有效，但对于 $first_name 或 $last_name 不起作用？

我也试试

```
echo $first_name; // print áááááábéééééébšššš
$trans = array("á" => "a", "é" => "e", "š" => "s");
echo strtr("áááááábéééééébšššš", $trans); // print aaaaaabeeeeeebssss
echo strtr($first_name,$trans);  // print áááááábéééééébšššš 
```

但是，正如您所看到的，问题是一样的！

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-04-14T10:35:05.183

有一种更简单的方法可以做到这一点，使用`iconv`- 从用户注释中，这似乎是你想要做的：[characters transliteration](http://www.php.net/manual/en/function.iconv.php#94946)

```
// PHP.net User notes
<?php
    $string = "ʿABBĀSĀBĀD";

    echo iconv('UTF-8', 'ISO-8859-1//TRANSLIT', $string);
    // output: [nothing, and you get a notice]

    echo iconv('UTF-8', 'ISO-8859-1//IGNORE', $string);
    // output: ABBSBD

    echo iconv('UTF-8', 'ISO-8859-1//TRANSLIT//IGNORE', $string);
    // output: ABBASABAD
    // Yay! That's what I wanted!
?> 
```

对您的字符编码**非常认真**，因此您在流程的所有阶段都保持相同的编码 - 前端、表单提交、源文件的编码。PHP 和表单中的默认编码是 ISO-8859-1，在 PHP 5.4 之前它更改为 UTF8（终于！）。

您可以使用一些功能来获得想法。首先来自 CakePHP 的变形器类，称为`slug`：

```
public static function slug($string, $replacement = '_') {
    $quotedReplacement = preg_quote($replacement, '/');

    $merge = array(
        '/[^\s\p{Ll}\p{Lm}\p{Lo}\p{Lt}\p{Lu}\p{Nd}]/mu' => ' ',
        '/\\s+/' => $replacement,
        sprintf('/^[%s]+|[%s]+$/', $quotedReplacement, $quotedReplacement) => '',
    );

    $map = self::$_transliteration + $merge;
    return preg_replace(array_keys($map), array_values($map), $string);
} 
```

它取决于一个`self::$_transliteration`与您在问题中所做的类似的数组 - 您可以[在 github 上查看变形器的来源](https://github.com/cakephp/utility/blob/master/Inflector.php)。

另一个是我个人使用的一个函数，[来自这里](https://web.archive.org/web/20150304084816/http://sourcecookbook.com/en/recipes/8/function-to-slugify-strings-in-php)。

```
function slugify($text,$strict = false) {
    $text = html_entity_decode($text, ENT_QUOTES, 'UTF-8');
    // replace non letter or digits by -
    $text = preg_replace('~[^\\pL\d.]+~u', '-', $text);

    // trim
    $text = trim($text, '-');
    setlocale(LC_CTYPE, 'en_GB.utf8');
    // transliterate
    if (function_exists('iconv')) {
        $text = iconv('utf-8', 'us-ascii//TRANSLIT', $text);
    }

    // lowercase
    $text = strtolower($text);
    // remove unwanted characters
    $text = preg_replace('~[^-\w.]+~', '', $text);
    if (empty($text)) {
        return 'empty_$';
    }
    if ($strict) {
        $text = str_replace(".", "_", $text);
    }
    return $text;
} 
```

这些函数所做的是音译并从任意文本输入创建“ [slugs](http://en.wikipedia.org/wiki/Slug_%28web_publishing%29) ”，这在制作 Web 应用程序时在您的工具箱中非常有用。希望这可以帮助！

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-07-04T10:20:47.600

这是一种在应该丢弃什么和应该替换什么方面具有一定灵活性的方法。这就是我目前的做法。

> $string = 'À 一些带有垃圾 Ĩ Ä 的字符串';

```
$replace = [
    '&lt;' => '', '&gt;' => '', '&#039;' => '', '&amp;' => '',
    '&quot;' => '', 'À' => 'A', 'Á' => 'A', 'Â' => 'A', 'Ã' => 'A', 'Ä' => 'Ae',
    '&Auml;' => 'A', 'Å' => 'A', 'Ā' => 'A', 'Ą' => 'A', 'Ă' => 'A', 'Æ' => 'Ae',
    'Ç' => 'C', 'Ć' => 'C', 'Č' => 'C', 'Ĉ' => 'C', 'Ċ' => 'C', 'Ď' => 'D', 'Đ' => 'D',
    'Ð' => 'D', 'È' => 'E', 'É' => 'E', 'Ê' => 'E', 'Ë' => 'E', 'Ē' => 'E',
    'Ę' => 'E', 'Ě' => 'E', 'Ĕ' => 'E', 'Ė' => 'E', 'Ĝ' => 'G', 'Ğ' => 'G',
    'Ġ' => 'G', 'Ģ' => 'G', 'Ĥ' => 'H', 'Ħ' => 'H', 'Ì' => 'I', 'Í' => 'I',
    'Î' => 'I', 'Ï' => 'I', 'Ī' => 'I', 'Ĩ' => 'I', 'Ĭ' => 'I', 'Į' => 'I',
    'İ' => 'I', 'Ĳ' => 'IJ', 'Ĵ' => 'J', 'Ķ' => 'K', 'Ł' => 'L', 'Ľ' => 'L',
    'Ĺ' => 'L', 'Ļ' => 'L', 'Ŀ' => 'L', 'Ñ' => 'N', 'Ń' => 'N', 'Ň' => 'N',
    'Ņ' => 'N', 'Ŋ' => 'N', 'Ò' => 'O', 'Ó' => 'O', 'Ô' => 'O', 'Õ' => 'O',
    'Ö' => 'Oe', '&Ouml;' => 'Oe', 'Ø' => 'O', 'Ō' => 'O', 'Ő' => 'O', 'Ŏ' => 'O',
    'Œ' => 'OE', 'Ŕ' => 'R', 'Ř' => 'R', 'Ŗ' => 'R', 'Ś' => 'S', 'Š' => 'S',
    'Ş' => 'S', 'Ŝ' => 'S', 'Ș' => 'S', 'Ť' => 'T', 'Ţ' => 'T', 'Ŧ' => 'T',
    'Ț' => 'T', 'Ù' => 'U', 'Ú' => 'U', 'Û' => 'U', 'Ü' => 'Ue', 'Ū' => 'U',
    '&Uuml;' => 'Ue', 'Ů' => 'U', 'Ű' => 'U', 'Ŭ' => 'U', 'Ũ' => 'U', 'Ų' => 'U',
    'Ŵ' => 'W', 'Ý' => 'Y', 'Ŷ' => 'Y', 'Ÿ' => 'Y', 'Ź' => 'Z', 'Ž' => 'Z',
    'Ż' => 'Z', 'Þ' => 'T', 'à' => 'a', 'á' => 'a', 'â' => 'a', 'ã' => 'a',
    'ä' => 'ae', '&auml;' => 'ae', 'å' => 'a', 'ā' => 'a', 'ą' => 'a', 'ă' => 'a',
    'æ' => 'ae', 'ç' => 'c', 'ć' => 'c', 'č' => 'c', 'ĉ' => 'c', 'ċ' => 'c',
    'ď' => 'd', 'đ' => 'd', 'ð' => 'd', 'è' => 'e', 'é' => 'e', 'ê' => 'e',
    'ë' => 'e', 'ē' => 'e', 'ę' => 'e', 'ě' => 'e', 'ĕ' => 'e', 'ė' => 'e',
    'ƒ' => 'f', 'ĝ' => 'g', 'ğ' => 'g', 'ġ' => 'g', 'ģ' => 'g', 'ĥ' => 'h',
    'ħ' => 'h', 'ì' => 'i', 'í' => 'i', 'î' => 'i', 'ï' => 'i', 'ī' => 'i',
    'ĩ' => 'i', 'ĭ' => 'i', 'į' => 'i', 'ı' => 'i', 'ĳ' => 'ij', 'ĵ' => 'j',
    'ķ' => 'k', 'ĸ' => 'k', 'ł' => 'l', 'ľ' => 'l', 'ĺ' => 'l', 'ļ' => 'l',
    'ŀ' => 'l', 'ñ' => 'n', 'ń' => 'n', 'ň' => 'n', 'ņ' => 'n', 'ŉ' => 'n',
    'ŋ' => 'n', 'ò' => 'o', 'ó' => 'o', 'ô' => 'o', 'õ' => 'o', 'ö' => 'oe',
    '&ouml;' => 'oe', 'ø' => 'o', 'ō' => 'o', 'ő' => 'o', 'ŏ' => 'o', 'œ' => 'oe',
    'ŕ' => 'r', 'ř' => 'r', 'ŗ' => 'r', 'š' => 's', 'ù' => 'u', 'ú' => 'u',
    'û' => 'u', 'ü' => 'ue', 'ū' => 'u', '&uuml;' => 'ue', 'ů' => 'u', 'ű' => 'u',
    'ŭ' => 'u', 'ũ' => 'u', 'ų' => 'u', 'ŵ' => 'w', 'ý' => 'y', 'ÿ' => 'y',
    'ŷ' => 'y', 'ž' => 'z', 'ż' => 'z', 'ź' => 'z', 'þ' => 't', 'ß' => 'ss',
    'ſ' => 'ss', 'ый' => 'iy', 'А' => 'A', 'Б' => 'B', 'В' => 'V', 'Г' => 'G',
    'Д' => 'D', 'Е' => 'E', 'Ё' => 'YO', 'Ж' => 'ZH', 'З' => 'Z', 'И' => 'I',
    'Й' => 'Y', 'К' => 'K', 'Л' => 'L', 'М' => 'M', 'Н' => 'N', 'О' => 'O',
    'П' => 'P', 'Р' => 'R', 'С' => 'S', 'Т' => 'T', 'У' => 'U', 'Ф' => 'F',
    'Х' => 'H', 'Ц' => 'C', 'Ч' => 'CH', 'Ш' => 'SH', 'Щ' => 'SCH', 'Ъ' => '',
    'Ы' => 'Y', 'Ь' => '', 'Э' => 'E', 'Ю' => 'YU', 'Я' => 'YA', 'а' => 'a',
    'б' => 'b', 'в' => 'v', 'г' => 'g', 'д' => 'd', 'е' => 'e', 'ё' => 'yo',
    'ж' => 'zh', 'з' => 'z', 'и' => 'i', 'й' => 'y', 'к' => 'k', 'л' => 'l',
    'м' => 'm', 'н' => 'n', 'о' => 'o', 'п' => 'p', 'р' => 'r', 'с' => 's',
    'т' => 't', 'у' => 'u', 'ф' => 'f', 'х' => 'h', 'ц' => 'c', 'ч' => 'ch',
    'ш' => 'sh', 'щ' => 'sch', 'ъ' => '', 'ы' => 'y', 'ь' => '', 'э' => 'e',
    'ю' => 'yu', 'я' => 'ya'
];

echo str_replace(array_keys($replace), $replace, $string); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-02-08T11:01:38.677

自 PHP >= 5.4.0 起

```
$translatedString = transliterator_transliterate('Any-Latin; Latin-ASCII; [\u0080-\u7fff] remove', $string); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-14T10:42:37.303

字符串 $chain 与数组中的字符采用相同的字符编码 - 甚至很可能 $first_name 字符串采用不同的编码，因此这些字符不匹配。您可能想尝试使用多字节字符串函数。

尝试 mb_convert_encoding。您可能还想尝试使用 HTML_ENTITIES 作为 to_encoding 参数，那么您不必担心字符将如何转换 - 这将是非常可预测的。

假设您对该脚本的输入是 UTF-8，可能不是一个糟糕的起点......

```
$first_name = mb_convert_encoding($first_name, "HTML-ENTITIES", "UTF-8"); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-01-19T02:37:41.073

希望我早点找到这个线程。我制作的功能（花了我太长时间）如下：

```
function CheckLetters($field){
    $letters = [
        0 => "a à á â ä æ ã å ā",
        1 => "c ç ć č",
        2 => "e é è ê ë ę ė ē",
        3 => "i ī į í ì ï î",
        4 => "l ł",
        5 => "n ñ ń",
        6 => "o ō ø œ õ ó ò ö ô",
        7 => "s ß ś š",
        8 => "u ū ú ù ü û",
        9 => "w ŵ",
        10 => "y ŷ ÿ",
        11 => "z ź ž ż",
    ];
    foreach ($letters as &$values){
        $newValue = substr($values, 0, 1);
        $values = substr($values, 2, strlen($values));
        $values = explode(" ", $values);
        foreach ($values as &$oldValue){
            while (strpos($field,$oldValue) !== false){
                $field = preg_replace("/" . $oldValue . '/', $newValue, $field, 1);
            }
        }
    }
    return $field;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-19T21:30:53.063

简单的功能。将'ÁbçÉfg'之类的字符串转换为'abc_efg'

```
/**
 * @param $str
 * @return mixed
 */
function sanitizeString($str) {
    $str = preg_replace('/[áàãâä]/ui', 'a', $str);
    $str = preg_replace('/[éèêë]/ui', 'e', $str);
    $str = preg_replace('/[íìîï]/ui', 'i', $str);
    $str = preg_replace('/[óòõôö]/ui', 'o', $str);
    $str = preg_replace('/[úùûü]/ui', 'u', $str);
    $str = preg_replace('/[ç]/ui', 'c', $str);
    $str = preg_replace('/[^a-z0-9]/i', '_', $str);
    $str = preg_replace('/_+/', '_', $str);

    return $str;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-19T04:57:40.183

CodeIgniter 方式：

```
$this->load->helper('text');

$string = convert_accented_characters($string); 
```

此函数使用配套配置文件`application/config/foreign_chars.php`来定义 to 和 from 数组以进行音译。

[https://www.codeigniter.com/user_guide/helpers/text_helper.html#ascii_to_entities](https://www.codeigniter.com/user_guide/helpers/text_helper.html#ascii_to_entities)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-03T21:37:05.833

```
function correctedText($txt=''){
  $ss = str_split($txt);

  for($i=0; $i<count($ss); $i++){
    $asciiNumber = ord($ss[$i]);// get the ascii dec of a single character

    // asciiNumber will be from the DEC column showing at https://www.ascii-code.com

    // capital letters only checked 
    if($asciiNumber >= 192 && $asciiNumber <= 197)$ss[$i] = 'A';
    elseif($asciiNumber == 198)$ss[$i] = 'AE';
    elseif($asciiNumber == 199)$ss[$i] = 'C';
    elseif($asciiNumber >= 200 && $asciiNumber <= 203)$ss[$i] = 'E';
    elseif($asciiNumber >= 204 && $asciiNumber <= 207)$ss[$i] = 'I';
    elseif($asciiNumber == 209)$ss[$i] = 'N';
    elseif($asciiNumber >= 210 && $asciiNumber <= 214)$ss[$i] = 'O';
    elseif($asciiNumber == 216)$ss[$i] = 'O';
    elseif($asciiNumber >= 217 && $asciiNumber <= 220)$ss[$i] = 'U';
    elseif($asciiNumber == 221)$ss[$i] = 'Y';
  }

  $txt = implode('', $ss);

  return $txt;
} 
```

# jakarta-ee - 在调试会话结束时关闭 EntityManagerFactory

> ID：10152895
> 
> 赞同：0
> 
> 时间：2012-04-14T10:32:40.090
> 
> 标签：jakarta-ee, jpa

我是java ee编程的新手。我有使用 jpa 连接到数据库的网络应用程序。我的问题是，在调试程序后， entityManagerFactory 保持打开状态（我猜）。所以在下一个调试会话中，我遇到了诸如“java.lang.ClassCastException: entity.User cannot be cast to entity.User”之类的错误。如果我重新启动 Web 服务器，问题就会消失。我该如何解决这个问题，请帮忙。

我正在使用 netbeans 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:19:36.123

好的，我找到了解决这个问题的方法。我刚刚创建了一个关闭 jpa 的 junit 测试用例（或可执行文件）。在结束调试会话之前，我只需运行测试。

# c - 在 C 中同时执行两个本地套接字服务器

> ID：10152896
> 
> 赞同：0
> 
> 时间：2012-04-14T10:32:47.733
> 
> 标签：c, linux, sockets, dhcp

我正在尝试将 DHCP 服务器模拟为大学任务。需要执行至少 2 个服务器（或更多，最多 255 个），因为多个客户端将使用 BROADCAST 向这些服务器发送消息（这就是“仅”255 个服务器的限制的来源）。

但是当我试图在 Ubuntu 的 2 个不同终端中执行 2 个服务器时，执行的第二个服务器被拒绝。我猜这是由于同一本地主机上的 IP 或其他原因（对不起，我对通信协议不太了解）

如何在同一台机器上运行多个服务器？我们的老师告诉我们使用VMWare运行另一个Linux操作系统，并尝试运行两者，但对我来说这个解决方案与我的想法相去甚远......我将发布服务器和客户端连接语句，虽然我不知道是否C 语句或操作系统配置等存在问题。

服务器：

```
int sockfd, newsockfd, clilen, n;
struct sockaddr_in  cli_addr, serv_addr ;
char host_name[200];
int size = sizeof(struct DHCP);
char buffer[size];
struct MACIP *macip;

if ((sockfd = socket(AF_INET, SOCK_DGRAM,0)) < 0) {
    printf("server: can't open datagram socket\n");
    return -1;
}

serv_addr.sin_family        = AF_INET;
serv_addr.sin_addr.s_addr   = htonl(0); 
serv_addr.sin_port          = htons(SERV_UDP_PORT);

if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) <0) {
    printf("server: can't bind local address\n");
    return -1;
} 
```

客户：

```
int sockfd, n, clilen;
struct sockaddr_in  serv_addr, cli_addr;
char serv_host_addr[30];
int size = sizeof(struct DHCP);
char buffer[size];  

printf("Dirección IP del servidor (a.b.c.d) => ");
gets(serv_host_addr);

if ((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
    perror("client: can't open datagram socket");
    return -1;
}

int opt=1;
if (setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST,&opt, sizeof(opt))<0) {
    perror("Error opcion socket");
    close(sockfd);
    return 1;
}

bzero((char *)&cli_addr,sizeof(cli_addr));
cli_addr.sin_family         = AF_INET;
if (bind(sockfd, (struct sockaddr *) &cli_addr,sizeof(cli_addr)) < 0)  {
    perror("client: can't bind a port");
    return -1;
}

serv_addr.sin_family        = AF_INET;
inet_pton(AF_INET, serv_host_addr,&serv_addr.sin_addr);
//serv_addr.sin_addr.s_addr = inet_addr(serv_host_addr);
serv_addr.sin_port          = htons(SERV_UDP_PORT); 
```

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:56:07.130

您的 UDP 服务器的每个实例都必须侦听另一个端口。您的代码中的关键行是这样的：

```
serv_addr.sin_port = htons(SERV_UDP_PORT); 
```

看起来您将端口号作为常量（`SERV_UDP_PORT`）。要使多个服务器同时运行，您需要为每个服务器使用另一个端口。

在您的情况下，最好的解决方案可能是有一个命令行参数来定义您启动服务器的端口。

每个客户端还需要知道要连接到哪个端口（当然还有地址）。所以让你的客户接受类似的命令行参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:39:37.343

要运行多个服务器，它们应该侦听同一网络接口上的不同端口。您可以通过在具有不同 ips 的同一网络上使用两个网络接口（例如 wifi 和以太网）来摆脱困境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T12:21:44.517

`alias interfaces`您可能会尝试在现有界面上进行设置。这样`alias interfaces`就得到了各自的ip地址。

`lo`使用典型已分配的环回接口 ( )，`127.0.0.1`然后可以调用此接口的此类别名`lo:0`, `lo:1`... 并将携带 ip 地址`127.0.0.2`, `127.0.0.3`, ....

有关如何实现此目的的详细信息，请参阅`man ifconfig`。

# android - 在android中滚动列表视图时重复动画自定义控件

> ID：10152898
> 
> 赞同：0
> 
> 时间：2012-04-14T10:33:35.153
> 
> 标签：android, listview, scroll, scrollview

我在列表视图中有一个自定义控件，用于在单击列表项时显示播放进度。

当我单击一个列表项并播放声音时，我会显示一个进度圈，但是如果我滚动列表视图，这个自定义控件会显示上面的每 6 行。

**这是我的问题：http:** [//i43.tinypic.com/34dsx2e.png](http://i43.tinypic.com/34dsx2e.png)

这是我的 CustomAdapter 的 getView：

```
public View getView(int position, View convertView, ViewGroup parent) {
     final ViewHolder holder;

    if (convertView == null) {
         mInflater = (LayoutInflater)  mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);          
         convertView = mInflater.inflate(mResourceId, parent, false);
         holder = new ViewHolder(convertView); 
         convertView.setTag(holder);
    } else {
         holder = (ViewHolder) convertView.getTag();
    }

    holder.position = position;

    Item item = getItem(position);
    holder.progressWheel.setPosition(position);
    holder.textViewTitle.setText(item.getName());
    return convertView;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T15:09:33.670

出现进度圈是因为您正在回收 convertView（列表视图在 convertView 参数上向您发送以前使用的视图以减少内存使用）。有两种解决方案：

A）不要回收convertView（次优）

代替：

```
if (convertView == null) {
     mInflater = (LayoutInflater)  mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);          
     convertView = mInflater.inflate(mResourceId, parent, false);
     holder = new ViewHolder(convertView); 
     convertView.setTag(holder);
} else {
     holder = (ViewHolder) convertView.getTag();
} 
```

和：

```
 mInflater = (LayoutInflater)  mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);          
 convertView = mInflater.inflate(mResourceId, parent, false);
 holder = new ViewHolder(convertView); 
```

B）在“返回转换视图”之前隐藏视图上的progressWheel

# php - 如何修复因不正确的字节计数长度而损坏的序列化字符串？

> ID：10152904
> 
> 赞同：106
> 
> 时间：2012-04-14T10:34:43.893
> 
> 标签：php, mysql, serialization, content-management-system

我正在使用带有图像上传插件的 Hotaru CMS，如果我尝试将图像附加到帖子中，我会收到此错误，否则不会出现错误：

> unserialize() [function.unserialize]：偏移量错误

有问题的代码（错误指向与**一致）：

```
/**
     * Retrieve submission step data
     *
     * @param $key - empty when setting
     * @return bool
     */
    public function loadSubmitData($h, $key = '')
    {
        // delete everything in this table older than 30 minutes:
        $this->deleteTempData($h->db);

        if (!$key) { return false; }

        $cleanKey = preg_replace('/[^a-z0-9]+/','',$key);
        if (strcmp($key,$cleanKey) != 0) {
            return false;
        } else {
            $sql = "SELECT tempdata_value FROM " . TABLE_TEMPDATA . " WHERE tempdata_key = %s ORDER BY tempdata_updatedts DESC LIMIT 1";
            $submitted_data = $h->db->get_var($h->db->prepare($sql, $key));
            **if ($submitted_data) { return unserialize($submitted_data); } else { return false; }** 
        }
    } 
```

表格中的数据，注意末尾有图像信息，我不是 PHP 专家，所以我想知道你们/gals 会怎么想？

临时数据值：

```
a:10:{s:16:"submit_editorial";b:0;s:15:"submit_orig_url";s:13:"www.bbc.co.uk";s:12:"submit_title";s:14:"No title found";s:14:"submit_content";s:12:"dnfsdkfjdfdf";s:15:"submit_category";i:2;s:11:"submit_tags";s:3:"bbc";s:9:"submit_id";b:0;s:16:"submit_subscribe";i:0;s:15:"submit_comments";s:4:"open";s:5:"image";s:19:"C:fakepath100.jpg";} 
```

编辑：我想我找到了序列化位......

```
/**
     * Save submission step data
     *
     * @return bool
     */
    public function saveSubmitData($h)
    {
        // delete everything in this table older than 30 minutes:
        $this->deleteTempData($h->db);

        $sid = preg_replace('/[^a-z0-9]+/i', '', session_id());
        $key = md5(microtime() . $sid . rand());
        $sql = "INSERT INTO " . TABLE_TEMPDATA . " (tempdata_key, tempdata_value, tempdata_updateby) VALUES (%s,%s, %d)";
        $h->db->query($h->db->prepare($sql, $key, serialize($h->vars['submitted_data']), $h->currentUser->id));
        return $key;
    } 
```

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-04-14T10:48:12.980

`unserialize() [function.unserialize]: Error at offset`是`invalid serialization data`由于长度无效

**快速解决**

你可以做的是`recalculating the length`序列化数组中的元素

**您当前的序列化数据**

```
$data = 'a:10:{s:16:"submit_editorial";b:0;s:15:"submit_orig_url";s:13:"www.bbc.co.uk";s:12:"submit_title";s:14:"No title found";s:14:"submit_content";s:12:"dnfsdkfjdfdf";s:15:"submit_category";i:2;s:11:"submit_tags";s:3:"bbc";s:9:"submit_id";b:0;s:16:"submit_subscribe";i:0;s:15:"submit_comments";s:4:"open";s:5:"image";s:19:"C:fakepath100.jpg";}'; 
```

**无需重新计算的示例**

```
var_dump(unserialize($data)); 
```

输出

```
Notice: unserialize() [function.unserialize]: Error at offset 337 of 338 bytes 
```

**重新计算**

```
$data = preg_replace('!s:(\d+):"(.*?)";!e', "'s:'.strlen('$2').':\"$2\";'", $data);
var_dump(unserialize($data)); 
```

输出

```
array
  'submit_editorial' => boolean false
  'submit_orig_url' => string 'www.bbc.co.uk' (length=13)
  'submit_title' => string 'No title found' (length=14)
  'submit_content' => string 'dnfsdkfjdfdf' (length=12)
  'submit_category' => int 2
  'submit_tags' => string 'bbc' (length=3)
  'submit_id' => boolean false
  'submit_subscribe' => int 0
  'submit_comments' => string 'open' (length=4)
  'image' => string 'C:fakepath100.jpg' (length=17) 
```

**推荐**..我

而不是使用这种快速修复......我建议你更新问题

*   你如何序列化你的数据

*   你是如何保存它的..

**================================= 编辑1 ================ ================**

**错误**

由于使用双引号`"`而不是单引号而生成错误`'`，这就是`C:\fakepath\100.png`转换为的原因`C:fakepath100.jpg`

**修复错误**

你需要改变`$h->vars['submitted_data']`From （注意单相当`'`）

代替

```
 $h->vars['submitted_data']['image'] = "C:\fakepath\100.png" ; 
```

和

```
 $h->vars['submitted_data']['image'] = 'C:\fakepath\100.png' ; 
```

**附加过滤器**

您还可以在调用 serialize 之前添加这个简单的过滤器

```
function satitize(&$value, $key)
{
    $value = addslashes($value);
}

array_walk($h->vars['submitted_data'], "satitize"); 
```

如果你有 UTF 字符，你也可以运行

```
 $h->vars['submitted_data'] = array_map("utf8_encode",$h->vars['submitted_data']); 
```

**如何检测未来序列化数据中的问题**

```
 findSerializeError ( $data1 ) ; 
```

输出

```
Diffrence 9 != 7
    -> ORD number 57 != 55
    -> Line Number = 315
    -> Section Data1  = pen";s:5:"image";s:19:"C:fakepath100.jpg
    -> Section Data2  = pen";s:5:"image";s:17:"C:fakepath100.jpg
                                            ^------- The Error (Element Length) 
```

`findSerializeError`功能

```
function findSerializeError($data1) {
    echo "<pre>";
    $data2 = preg_replace ( '!s:(\d+):"(.*?)";!e', "'s:'.strlen('$2').':\"$2\";'",$data1 );
    $max = (strlen ( $data1 ) > strlen ( $data2 )) ? strlen ( $data1 ) : strlen ( $data2 );

    echo $data1 . PHP_EOL;
    echo $data2 . PHP_EOL;

    for($i = 0; $i < $max; $i ++) {

        if (@$data1 {$i} !== @$data2 {$i}) {

            echo "Diffrence ", @$data1 {$i}, " != ", @$data2 {$i}, PHP_EOL;
            echo "\t-> ORD number ", ord ( @$data1 {$i} ), " != ", ord ( @$data2 {$i} ), PHP_EOL;
            echo "\t-> Line Number = $i" . PHP_EOL;

            $start = ($i - 20);
            $start = ($start < 0) ? 0 : $start;
            $length = 40;

            $point = $max - $i;
            if ($point < 20) {
                $rlength = 1;
                $rpoint = - $point;
            } else {
                $rpoint = $length - 20;
                $rlength = 1;
            }

            echo "\t-> Section Data1  = ", substr_replace ( substr ( $data1, $start, $length ), "<b style=\"color:green\">{$data1 {$i}}</b>", $rpoint, $rlength ), PHP_EOL;
            echo "\t-> Section Data2  = ", substr_replace ( substr ( $data2, $start, $length ), "<b style=\"color:red\">{$data2 {$i}}</b>", $rpoint, $rlength ), PHP_EOL;
        }

    }

} 
```

**保存到数据库的更好方法**

```
$toDatabse = base64_encode(serialize($data));  // Save to database
$fromDatabase = unserialize(base64_decode($data)); //Getting Save Format 
```

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2014-01-27T19:05:02.000

我没有足够的声誉发表评论，所以我希望使用上述“正确”答案的人能看到这一点：

从 php 5.5 开始，preg_replace() 中的 /e 修饰符已被完全弃用，上面的 preg_match 将出错。php 文档建议使用 preg_match_callback 代替它。

请找到以下解决方案作为上述 preg_match 的替代方案。

```
$fixed_data = preg_replace_callback ( '!s:(\d+):"(.*?)";!', function($match) {      
    return ($match[1] == strlen($match[2])) ? $match[0] : 's:' . strlen($match[2]) . ':"' . $match[2] . '";';
},$bad_data ); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-27T08:54:54.100

失败的另一个原因`unserialize()`是您错误地将序列化数据放入数据库中，请参阅此处的[官方说明](http://www.php.net/manual/en/function.serialize.php)。由于`serialize()`返回二进制数据和php变量不关心编码方法，所以把它放到TEXT中，VARCHAR()会导致这个错误。

解决方案：将序列化数据存储到表中的 BLOB 中。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-08-08T08:54:14.410

**快速解决**

重新计算序列化数组中元素的长度 - 但不要使用 (preg_replace) 它已弃用 - 最好使用 preg_replace_callback：

**编辑：新版本现在不仅长度错误，而且还修复换行符并使用 aczent 计算正确字符（感谢[mickmackusa](https://stackoverflow.com/users/2943403/mickmackusa)）**

```
// New Version
$data = preg_replace_callback('!s:\d+:"(.*?)";!s', 
    function($m) {
        return "s:" . strlen($m[1]) . ':"'.$m[1].'";'; 
    }, $data
); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-12-29T12:27:53.843

```
$badData = 'a:2:{i:0;s:16:"as:45:"d";
Is \n";i:1;s:19:"as:45:"d";
Is \r\n";}'; 
```

**您无法使用建议的正则表达式修复损坏的序列化字符串：**

```
$data = preg_replace('!s:(\d+):"(.*?)";!e', "'s:'.strlen('$2').':\"$2\";'", $badData);
var_dump(@unserialize($data)); // Output: bool(false)

// or

$data = preg_replace_callback(
    '/s:(\d+):"(.*?)";/',
    function($m){
        return 's:' . strlen($m[2]) . ':"' . $m[2] . '";';
    },
    $badData
);
var_dump(@unserialize($data)); // Output: bool(false) 
```

**您可以使用以下正则表达式修复损坏的序列化字符串：**

```
$data = preg_replace_callback(
    '/(?<=^|\{|;)s:(\d+):\"(.*?)\";(?=[asbdiO]\:\d|N;|\}|$)/s',
    function($m){
        return 's:' . strlen($m[2]) . ':"' . $m[2] . '";';
    },
    $badData
);

var_dump(@unserialize($data)); 
```

输出

```
array(2) {
  [0] =>
  string(17) "as:45:"d";
Is \n"
  [1] =>
  string(19) "as:45:"d";
Is \r\n"
} 
```

或者

```
array(2) {
  [0] =>
  string(16) "as:45:"d";
Is \n"
  [1] =>
  string(18) "as:45:"d";
Is \r\n"
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-24T14:56:19.667

此错误是由于您的字符集错误引起的。

打开标签后设置字符集：

```
header('Content-Type: text/html; charset=utf-8'); 
```

并在您的数据库中设置 charset utf8 ：

```
mysql_query("SET NAMES 'utf8'"); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-02-28T09:09:19.220

```
public function unserializeKeySkills($string) {
    $output = array();
    $string = trim(preg_replace('/\s\s+/', ' ',$string));
    $string = preg_replace_callback('!s:(\d+):"(.*?)";!', function($m) { return 's:'.strlen($m[2]).':"'.$m[2].'";'; }, utf8_encode( trim(preg_replace('/\s\s+/', ' ',$string)) ));
    try {
        $output =  unserialize($string);
    } catch (\Exception $e) {
        \Log::error("unserialize Data : " .print_r($string,true));
    }
    return $output;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-06-23T12:23:14.087

您可以使用以下函数修复损坏的序列化字符串，并进行**多字节字符**处理。

```
function repairSerializeString($value)
{

    $regex = '/s:([0-9]+):"(.*?)"/';

    return preg_replace_callback(
        $regex, function($match) {
            return "s:".mb_strlen($match[2]).":\"".$match[2]."\""; 
        },
        $value
    );
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-19T15:18:24.770

官方[文档](http://php.net/manual/en/function.unserialize.php)说它应该返回 false 并设置 E_NOTICE

但是由于您遇到错误，因此错误报告设置为由 E_NOTICE 触发

这是一个允许您检测错误返回的修复程序`unserialize`

```
$old_err=error_reporting(); 
error_reporting($old_err & ~E_NOTICE);
$object = unserialize($serialized_data);
error_reporting($old_err); 
```

您可能要考虑使用 base64 编码/解码

```
$string=base64_encode(serialize($obj));
unserialize(base64_decode($string)); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-08T04:47:14.547

此问题中的损坏与序列化字符串末尾的单个子字符串隔离，可能被懒惰地想要更新`image`文件名的人手动替换。这个事实将在我下面使用 OP 发布的数据的演示链接中很明显 - 简而言之，`C:fakepath100.jpg`没有长度`19`，它应该是`17`。

由于序列化的字符串损坏仅限于不正确的字节/字符计数，因此以下将使用正确的字节计数值更新损坏的字符串做得很好。

## 以下基于正则表达式的替换仅在纠正字节数方面有效，仅此而已。

看起来许多早期的帖子只是从其他人那里复制粘贴一个正则表达式模式。 **如果不打算在替换中使用它，则没有理由捕获可能损坏的字节计数。** 此外，`s`如果字符串值包含换行符/换行符，添加模式修饰符是一个合理的包含。

*对于那些不知道使用序列化处理多字节字符的人，您**不能`mb_strlen()`在自定义回调中使用，因为存储的是字节数而不是字符数**，请参阅我的输出...

代码：（[带有OP数据的](https://3v4l.org/DA7IY)Demo ）（[带有任意样本数据](https://3v4l.org/R3MgC)的Demo ）（[带有条件替换](https://3v4l.org/FsZv1)的Demo ）

```
$corrupted = <<<STRING
a:4:{i:0;s:3:"three";i:1;s:5:"five";i:2;s:2:"newline1
newline2";i:3;s:6:"garçon";}
STRING;

$repaired = preg_replace_callback(
        '/s:\d+:"(.*?)";/s',
        //  ^^^- matched/consumed but not captured because not used in replacement
        function ($m) {
            return "s:" . strlen($m[1]) . ":\"{$m[1]}\";";
        },
        $corrupted
    );

echo $corrupted , "\n" , $repaired;
echo "\n---\n";
var_export(unserialize($repaired)); 
```

输出：

```
a:4:{i:0;s:3:"three";i:1;s:5:"five";i:2;s:2:"newline1
Newline2";i:3;s:6:"garçon";}
a:4:{i:0;s:5:"three";i:1;s:4:"five";i:2;s:17:"newline1
Newline2";i:3;s:7:"garçon";}
---
array (
  0 => 'three',
  1 => 'five',
  2 => 'newline1
Newline2',
  3 => 'garçon',
) 
```

* * *

**一条腿在兔子洞里……**即使双引号出现在字符串值中，上述方法也能正常工作，但如果字符串值包含`";`或其他一些令人费解的 sbustring，则需要更进一步并实现“环视”。我的新模式

检查前导`s`是：

*   整个输入字符串的开头或
*   之前`;`

并检查`";`是：

*   在整个输入字符串的末尾或
*   其次是`}`或
*   后跟一个字符串或整数声明`s:`或`i:`

我没有测试每一种可能性。事实上，我对序列化字符串中的所有可能性相对不熟悉，因为我从不选择使用序列化数据——在现代应用程序中总是使用 json。如果还有其他可能的前导或尾随字符，请发表评论，我将扩展环视。

扩展片段：（[演示](https://3v4l.org/SApBV)）

```
$corrupted_byte_counts = <<<STRING
a:12:{i:0;s:3:"three";i:1;s:5:"five";i:2;s:2:"newline1
newline2";i:3;s:6:"garçon";i:4;s:111:"double " quote \"escaped";i:5;s:1:"a,comma";i:6;s:9:"a:colon";i:7;s:0:"single 'quote";i:8;s:999:"semi;colon";s:5:"assoc";s:3:"yes";i:9;s:1:"monkey";wrenching doublequote-semicolon";s:3:"s:";s:9:"val s: val";}
STRING;

$repaired = preg_replace_callback(
        '/(?<=^|;)s:\d+:"(.*?)";(?=$|}|[si]:)/s',
        //^^^^^^^^--------------^^^^^^^^^^^^^-- some additional validation
        function ($m) {
            return 's:' . strlen($m[1]) . ":\"{$m[1]}\";";
        },
        $corrupted_byte_counts
    );

echo "corrupted serialized array:\n$corrupted_byte_counts";
echo "\n---\n";
echo "repaired serialized array:\n$repaired";
echo "\n---\n";
print_r(unserialize($repaired)); 
```

输出：

```
corrupted serialized array:
a:12:{i:0;s:3:"three";i:1;s:5:"five";i:2;s:2:"newline1
newline2";i:3;s:6:"garçon";i:4;s:111:"double " quote \"escaped";i:5;s:1:"a,comma";i:6;s:9:"a:colon";i:7;s:0:"single 'quote";i:8;s:999:"semi;colon";s:5:"assoc";s:3:"yes";i:9;s:1:"monkey";wrenching doublequote-semicolon";s:3:"s:";s:9:"val s: val";}
---
repaired serialized array:
a:12:{i:0;s:5:"three";i:1;s:4:"five";i:2;s:17:"newline1
newline2";i:3;s:7:"garçon";i:4;s:24:"double " quote \"escaped";i:5;s:7:"a,comma";i:6;s:7:"a:colon";i:7;s:13:"single 'quote";i:8;s:10:"semi;colon";s:5:"assoc";s:3:"yes";i:9;s:39:"monkey";wrenching doublequote-semicolon";s:2:"s:";s:10:"val s: val";}
---
Array
(
    [0] => three
    [1] => five
    [2] => newline1
newline2
    [3] => garçon
    [4] => double " quote \"escaped
    [5] => a,comma
    [6] => a:colon
    [7] => single 'quote
    [8] => semi;colon
    [assoc] => yes
    [9] => monkey";wrenching doublequote-semicolon
    [s:] => val s: val
) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-06-27T20:46:08.253

这是用于修复损坏的序列化字符串[的在线工具。](https://puvox.software/tools/serialization-fixer.php)

我想补充一点，这主要是由于在数据库上进行了搜索和替换，并且序列化数据（*特别*是`key length`）没有根据替换更新，这会导致“损坏”。

尽管如此，上述工具使用以下逻辑来修复序列化数据（[从这里复制](https://stackoverflow.com/a/38890855/807104)）。

```
function error_correction_serialise($string){
    // at first, check if "fixing" is really needed at all. After that, security checkup.
    if ( unserialize($string) !== true &&  preg_match('/^[aOs]:/', $string) ) {
         $string = preg_replace_callback( '/s\:(\d+)\:\"(.*?)\";/s',    function($matches){return 's:'.strlen($matches[2]).':"'.$matches[2].'";'; },   $string );
    }
    return $string;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-16T12:32:09.227

您必须将排序规则类型更改为`utf8_unicode_ci`，问题将得到解决。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-07-16T16:17:55.493

在我的情况下，我将序列化数据存储在`BLOB`MySQL DB 的字段中，该字段显然不足以包含整个值并截断它。这样的字符串显然不能反序列化。
一旦将该字段转换`MEDIUMBLOB`为问题就消失了。此外，可能需要将表格选项切换`ROW_FORMAT`到`DYNAMIC`或`COMPRESSED`。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-09-14T13:08:56.107

在此页面上尝试了一些东西但没有成功后，我查看了页面源代码并注意到序列化字符串中的所有引号都已被 html-entities 替换。解码这些实体有助于避免很多头痛：

```
$myVar = html_entity_decode($myVar); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-17T15:01:43.780

此问题的另一个原因可能是“有效负载”会话表的列类型。如果您在会话中有大量数据，那么文本列是不够的。您将需要 MEDIUMTEXT 甚至 LONGTEXT。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-03-27T03:47:32.997

更改特定字段的列大小（LONGTEXT）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-11-16T10:42:39.740

**您可以在所有情况下使用它：**

```
$newdata = preg_replace_callback(
    '/(?<=^|\{|;)s:(\d+):\"(.*?)\";(?=[asbdiO]\:\d|N;|\}|$)/s',
    function($m){
        return 's:' . strlen($m[2]) . ':"' . $m[2] . '";';
    },
    $badData
); 
```

# jquery - 依赖选择框问题

> ID：10152905
> 
> 赞同：0
> 
> 时间：2012-04-14T10:34:44.450
> 
> 标签：jquery, drop-down-menu, jquery-selectbox

我正在尝试制作两个相关的选择框。有两个**相同**的选择框，第一个选择在选择时隐藏另一个，如下所示：

**第一个选择框**
   选项一
   选项二（已选择）
   选项三

**第二个选择框**
   选项一
   选项二（消失）
   选项三

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:46:48.017

你可以写这样的东西

```
<select id="s1">
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>
<select id="s2">
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select> 
```

和

```
$('#s1').change(function() {
    $('#s2').empty().append($('#s1 :not(:selected)').clone());
}); 
```

在这里尝试[http://fiddle.jshell.net/zDLMZ/](http://fiddle.jshell.net/zDLMZ/) 不是最佳的，但应该适用于不是很大的选项集

# android - 从多个活动进行异步服务器通信的最佳方式

> ID：10152906
> 
> 赞同：-1
> 
> 时间：2012-04-14T10:34:54.720
> 
> 标签：android, asynchronous, communication

我在试图找到异步进行双向服务器通信的最佳方法时遇到了问题。我能够将服务器通信硬编码到服务器（无封装，异步调用），但我想知道最好的方法是什么。有一个用于登录、注册、更改位置等的协议。服务器通信使用 JSON 和 HTTPPost。该应用程序将发送 JSON 数据并接收它并将其放入数据库中。

我想制作一个 ServerCommunications 类来保存用户名、密码等数据，并实例化 HTTPRequest 对象和其他常见对象。这可能在绑定服务内。

现在我可以将绑定服务与 AsyncTask 一起使用，但是应用程序中的多个活动将需要进行服务器通信，因此这意味着将服务绑定到多个活动。

1.  这可能吗？
2.  有没有更好的办法？
3.  如果我要使用绑定服务，最好使用 Messengers 还是扩展 Binder 类？

你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:31:20.030

一种可能是使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)来处理异步代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:07:39.713

也许你可以使用一个真正的线程并将它传递给一个单例的处理程序。然后，您可以在所有活动中使用处理程序。

# android - 为什么带有缓存按钮的适配器在 Android 中不能按预期工作？

> ID：10152908
> 
> 赞同：0
> 
> 时间：2012-04-14T10:35:05.870
> 
> 标签：android, listview, click

**Edit3：将代码交换为完整的可运行测试用例。**

Edit2：添加了一些代码，可在五秒后更新按钮数量。发生这种情况时，无论您使用什么布局，按钮都会变得不可点击。

Edit1：这似乎取决于用于 ListView 的布局。我会进一步调查。

我想创建一次按钮，即缓存它们。由于各种原因，我无法使用提供的 convertView 并对其进行编辑（每一行最终都会包含几个组件，它们都是由另一个框架创建的）。

如果我创建一个如下所示的适配器，这似乎非常合理并且 imo 应该可以工作，那么只有在 ListView 之外并且被滚动回的按钮是可点击的。

似乎按钮的可点击区域在首次显示时设置不正确。谁能解释为什么？

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.*;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Timer;
import java.util.TimerTask;

public class TestActivity extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        final ListView listView = new ListView(this);

        final ArrayList<View> cachedButtons = new ArrayList<View>(Arrays.asList(new View[20]));

        listView.setAdapter(new BaseAdapter() {
            public View getView(int position, View convertView, ViewGroup parent)
            {
                if (cachedButtons.get(position) == null) {
                    Button b = new Button(parent.getContext());
                    b.setText("Button " + position);
                    b.setClickable(true);
                    cachedButtons.set(position, b);
                }
                return cachedButtons.get(position);
            }

            public int getCount() { return cachedButtons.size(); }
            public Object getItem(int position) { return null; }
            public long getItemId(int position) { return position; }
        });

        // Add a new button after five seconds
        new Timer().schedule(new TimerTask() {
            public void run()
            {
                runOnUiThread(new Runnable() {
                    public void run()
                    {
                        cachedButtons.addAll(Arrays.asList(new View[1])); // Add one more
                        ((BaseAdapter) listView.getAdapter()).notifyDataSetChanged();
                        Toast.makeText(listView.getContext(), "Now you can't press the buttons anymore", 0).show();
                    }
                });
            }
        }, 5000);

        // Doesn't work with these lines
        LinearLayout layout = new LinearLayout(this);
        layout.addView(listView);
        setContentView(layout);

        // Works with this, so no Layout works.
        //setContentView(layout);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:18:05.180

答案很简单，却让我想了好几个小时。只需覆盖 getItemViewType ，视图将不会被回收。至少它现在似乎有效。我仍然觉得 JavaDocs 对此感到困惑。

```
public int getItemViewType(int position)
{
    return AdapterView.ITEM_VIEW_TYPE_IGNORE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T12:41:10.653

我认为 Android 正在重用您的视图，这给您带来了问题。我建议您使用视图持有者。它是一个为您保存视图的静态类。请参阅[本](http://www.vogella.com/articles/AndroidListView/article.html)教程

# video - 使用 ffmpeg 编码没有音频的 flv 视频

> ID：10152910
> 
> 赞同：0
> 
> 时间：2012-04-14T10:35:19.993
> 
> 标签：video, ffmpeg, flv

我正在制作一个需要将视频转换为 webm 或 mp4 的应用程序，它适用于我尝试过的所有视频，但如果我使用没有音频通道的 flv 文件，它会失败。

```
$ ffmpeg -i 0986229665-339108519108-86498841039-6078455325.flv out.webm
ffmpeg version 0.7.3-4:0.7.3-0ubuntu0.11.10.1, Copyright (c) 2000-2011 the Libav developers
  built on Jan  4 2012 16:08:51 with gcc 4.6.1
  configuration: --extra-version='4:0.7.3-0ubuntu0.11.10.1' --arch=amd64 --prefix=/usr --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --enable-shared --disable-static
  WARNING: library configuration mismatch
  avutil      configuration: --extra-version='4:0.7.3ubuntu0.11.10.1' --arch=amd64 --prefix=/usr --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-vaapi --enable-libopenjpeg --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdirac --enable-libmp3lame --enable-librtmp --enable-libx264 --enable-libxvid --enable-libvo-aacenc --enable-version3 --enable-libvo-amrwbenc --enable-version3 --enable-libdc1394 --enable-shared --disable-static
  avcodec     configuration: --extra-version='4:0.7.3ubuntu0.11.10.1' --arch=amd64 --prefix=/usr --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-vaapi --enable-libopenjpeg --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdirac --enable-libmp3lame --enable-librtmp --enable-libx264 --enable-libxvid --enable-libvo-aacenc --enable-version3 --enable-libvo-amrwbenc --enable-version3 --enable-libdc1394 --enable-shared --disable-static
  libavutil    51\.  7\. 0 / 51\.  7\. 0
  libavcodec   53\.  6\. 0 / 53\.  6\. 0
  libavformat  53\.  3\. 0 / 53\.  3\. 0
  libavdevice  53\.  0\. 0 / 53\.  0\. 0
  libavfilter   2\.  4\. 0 /  2\.  4\. 0
  libswscale    2\.  0\. 0 /  2\.  0\. 0
  libpostproc  52\.  0\. 0 / 52\.  0\. 0
[flv @ 0x2184560] Could not find codec parameters (Audio: [0][0][0][0] / 0x0000, 0 channels)
[flv @ 0x2184560] Estimating duration from bitrate, this may be inaccurate
Input #0, flv, from '0986229665-339108519108-86498841039-6078455325.flv':
  Metadata:
    audiocodecid    : -1
    server          : Red5 Server 1.0.0 RC1 $Rev: 4193 $
    duration        : 3
    canSeekToEnd    : true
    videocodecid    : 2
  Duration: 00:00:03.02, start: 0.000000, bitrate: N/A
    Stream #0.0: Video: flv, yuv420p, 640x362, 1k tbr, 1k tbn, 1k tbc
    Stream #0.1: Audio: [0][0][0][0] / 0x0000, 0 channels
Incompatible sample format '(null)' for codec 'libvorbis', auto-selecting format 's16'
[buffer @ 0x21852c0] w:640 h:362 pixfmt:yuv420p
[libvpx @ 0x2184040] v0.9.6
[libvorbis @ 0x2185ee0] oggvorbis_encode_init: init_encoder failed
Output #0, webm, to 'out.webm':
    Stream #0.0: Video: libvpx, yuv420p, 640x362, q=2-31, 200 kb/s, 90k tbn, 1k tbc
    Stream #0.1: Audio: libvorbis, 0 channels, s16, 64 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
  Stream #0.1 -> #0.1
Error while opening encoder for output stream #0.1 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

如果我通过 -an 选项，它可以工作，但我不能这样做，因为那样所有视频都没有音频。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:18:46.240

这是非常不寻常的。如果源文件没有音频流，那么 FFmpeg 不应该尝试对音频流进行转码。

您从哪里获得此版本的 FFmpeg？你自己编译的吗？版本看起来有点过时了。输出中的这一行并不适合我：

```
WARNING: library configuration mismatch 
```

此外，这些 FLV 文件可能有些奇怪（如果元数据正确，则由 Red5 输出）。也许出于某种原因有一个 NULL 音频标签。你能提供一个小样本供研究吗？

# javascript - 如何在 Jquery 中计算一行文本的宽度？

> ID：10152917
> 
> 赞同：1
> 
> 时间：2012-04-14T10:37:25.440
> 
> 标签：javascript, jquery

我想弄清楚如何用 jquery 计算一行文本的宽度。

我在字符串中有以下文本

> “1号线
> 
> 2号线
> 
> 3号线
> 
> 4号线废话
> 
> 5号线"

在测试以查找页面上显示的文本的宽度时，它始终显示 77 px，其中第 4 行是最长的。

使用 Jquery 命令 .append() 将文本放入元素 id #text

用于元素的代码是

```
<div id = 'terminal'><pre><span id = 'text'></span></pre> 
```

我将如何计算第 5 行的宽度？

谢谢 - 瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:43:44.363

> *   **演示：http:** [//jsbin.com/otaquf/5](http://jsbin.com/otaquf/5)

```
$(function(){
  var text =  $.trim($('#demo').text());
  // this may vary browser to browser...
  var text_w_no_empty_lines = text.replace(/[\r\n]+/g, '\n');
  var lines = text_w_no_empty_lines.split('\n');
  // line number you want  total - 1
  var line_5 = lines[4];
  // .tick { white-space:nowrap;display:inline-block;display:none }
  alert( $('<p class="tick">').html(line_5).appendTo('body').width() )
}); 
```

* * *

```
 <p id="demo" style="white-space:pre">
        Line 1

        Line 2

        Line 3

        Line 4 Blah

        Line 5
        </p> 
```

> *   **注意：**这里的技巧是使用 css`white-space:pre`来保持真实的高度和预样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:50:34.807

将字符串放在多个 div 元素中，并在 5 日使用 .width()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:53:46.630

您可以将文本附加到具有宽度：auto 的 div，并采用该 div 的宽度。

像这样的东西：

```
var auxDiv = $("<div>").css({width : "auto"}).appendTo($("body")).html("<div id = 'terminal'><pre><span id = 'text'></span></pre>");

var widthOfText = auxDiv.width();
auxDiv.remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T10:54:15.817

**HTML：**

```
<style>.temp{display:none}</style>
​&lt;pre class="preview"></pre>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
​&lt;span class="temp"></span> 
```

**JS：**

```
$(document).ready(function(){

    var string = 'line 1\nline 2 ... \nline 3..',
        lines = string.split('\n'),
        $temp = $('.temp').show();

    $('.preview').html(string);

    $.each(lines, function(key, str) {
        console.log(key + ': ' + $temp.html(str).width())
    })
    $temp.hide();

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T10:58:58.830

不需要jquery ...你可以只使用`offsetWidth`DOM中元素的属性

# paypal - 如何从我的网站取消贝宝定期付款？

> ID：10152919
> 
> 赞同：4
> 
> 时间：2012-04-14T10:37:38.123
> 
> 标签：paypal, paypal-sandbox, paypal-subscriptions

我目前正在我的网站中集成 paypal 定期付款流程（感谢[https://www.paypal.com/uk/cgi-bin/webscr?cmd=_pdn_subscr_techview_outside](https://www.paypal.com/uk/cgi-bin/webscr?cmd=_pdn_subscr_techview_outside)），目前它可以工作。

但是我有一个简单的问题，我在互联网上找不到答案。假设用户在 2 个月后在我的网站上删除了他的帐户。我怎样才能自动取消他的订阅？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:56:54.650

需要花点功夫才能找到，但 Paypal 确实发布[了订阅指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)。

要取消某人的订阅，您需要创建一个指向 Paypal 的链接——请参阅该参考资料的第 171 页。似乎没有 API 可以让您取消他们的订阅：他们需要单击指向 Paypal 的链接并自行取消订阅。

指南实际上说

> 将代码粘贴到您的网页*[原文如此]*附近的文本中，该文本解释了订阅取消的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T14:44:38.947

显然，可以使用 API 取消定期付款。看：

[您可以通过 API 取消 PayPal 自动付款吗？（通过托管按钮创建的订阅）](https://stackoverflow.com/questions/3809587/can-you-cancel-a-paypal-automatic-payment-via-api-subscription-created-via-hos)

这肯定比贝宝给你的“取消订阅”按钮更复杂，但是......它实际上可以工作。“取消订阅”按钮要求人们的付款来自他们的 PayPal 帐户，如果他们在信用卡上设置定期付款（无需登录 PayPal），则情况并非如此。

# php - php多维数组获取值

> ID：10152920
> 
> 赞同：25
> 
> 时间：2012-04-14T10:38:17.933
> 
> 标签：php, arrays, multidimensional-array, foreach

这是我在 php **$hotels中的数组**

```
Array
(
    [0] => Array
        (
        [hotel_name] => Name
        [info] => info
        [rooms] => Array
            (
                [0] => Array
                    (
                        [room_name] => name
                        [beds] => 2
                        [boards] => Array
                            (
                                [board_id] => 1
                                [price] =>200.00
                            )
                    )
                )
        )
) 
```

如何获得**board_id**和**price**我尝试了几个 foreach 循环但无法获得结果

```
foreach($hotels as $row)
{
    foreach($row as $k)
    {
        foreach($k as $l)
        {
            echo $l['board_id'];
            echo $l['price'];
        }
    }
} 
```

这段代码不起作用。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-14T10:40:54.727

这是迭代这个数组的方法：

```
foreach($hotels as $row) {
       foreach($row['rooms'] as $k) {
             echo $k['boards']['board_id'];
             echo $k['boards']['price'];
       }
} 
```

您想迭代酒店和房间（带有数字索引的房间），因为在这种情况下，它们似乎是“集合”。其他数组仅保存和分组属性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-04-12T08:21:23.467

对于搜索`php multidimensional array get values`并真正想要解决问题的人来自从 2 维数组中获取一列值（比如我！），这是一种比 using 更优雅的方式`foreach`，即[`array_column`](https://www.php.net/manual/en/function.array-column.php)

例如，如果我只想`hotel_name`从下面的数组中获取，并形成另一个数组：

```
$hotels = [
    [
        'hotel_name' => 'Hotel A',
        'info' => 'Hotel A Info',
    ],
    [
        'hotel_name' => 'Hotel B',
        'info' => 'Hotel B Info',
    ]
]; 
```

我可以这样做`array_column`：

```
$hotel_name = array_column($hotels, 'hotel_name');

print_r($hotel_name); // Which will give me ['Hotel A', 'Hotel B'] 
```

* * *

对于这个问题的实际答案，也可以通过`array_column`and美化[`call_user_func_array('array_merge', $twoDimensionalArray);`](https://stackoverflow.com/questions/8754980/how-to-convert-two-dimensional-array-to-one-dimensional-array-in-php5)

让我们在 PHP 中制作数据：

```
$hotels = [
    [
        'hotel_name' => 'Hotel A',
        'info' => 'Hotel A Info',
        'rooms' => [
            [
                'room_name' => 'Luxury Room',
                'bed' => 2,
                'boards' => [
                    'board_id' => 1,
                    'price' => 200
                ]
            ],
            [
                'room_name' => 'Non Luxy Room',
                'bed' => 4,
                'boards' => [
                    'board_id' => 2,
                    'price' => 150
                ]
            ],
        ]
    ],
    [
        'hotel_name' => 'Hotel B',
        'info' => 'Hotel B Info',
        'rooms' => [
            [
                'room_name' => 'Luxury Room',
                'bed' => 2,
                'boards' => [
                    'board_id' => 3,
                    'price' => 900
                ]
            ],
            [
                'room_name' => 'Non Luxy Room',
                'bed' => 4,
                'boards' => [
                    'board_id' => 4,
                    'price' => 300
                ]
            ],
        ]
    ]
]; 
```

这是计算：

```
$rooms = array_column($hotels, 'rooms');
$rooms = call_user_func_array('array_merge', $rooms);
$boards = array_column($rooms, 'boards');

foreach($boards as $board){
    $board_id = $board['board_id'];
    $price = $board['price'];
    echo "Board ID is: ".$board_id." and price is: ".$price . "<br/>";
} 
```

这将为您提供以下结果：

```
Board ID is: 1 and price is: 200
Board ID is: 2 and price is: 150
Board ID is: 3 and price is: 900
Board ID is: 4 and price is: 300 
```

# wordpress - 如何将指定类别的帖子限制数量设置到该类别的页面中？

> ID：10152921
> 
> 赞同：0
> 
> 时间：2012-04-14T10:38:46.623
> 
> 标签：wordpress, limit, categories, posts

我想知道如何将可见帖子的限制数量设置到指定类别的页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:53:31.877

把它放在你的functions.php中

```
function main_query_mods( $query ) {
    if(!$query->is_main_query()) {
        return;
    }
    // show 15 posts per page if category has id 7
    // check http://codex.wordpress.org/Conditional_Tags#A_Category_Page
    if ( is_category('7')) {
        $query->set('posts_per_page',15);
    }
}
add_action( 'pre_get_posts', 'main_query_mods' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:44:55.153

你应该使用这个：

```
<?php $the_query = new WP_Query ('cat=7&posts_per_page=15'); ?>
<?php while ($the_query->have_posts()) : $the_query->the_post(); ?>
    <div><?the_title(); //display post title?></div>
    <div><?the_content(); //display post content?></div>
<?php endwhile; ?> 
```

`cat` 如果添加到查询的帖子将选择随机帖子，则类别 ID
`post_per_page`是限制。

`&orderby=rand`

你可以在这里找到完整的文档：http: [//codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

# android - HTC 人脸解锁培训

> ID：10152924
> 
> 赞同：0
> 
> 时间：2012-04-14T10:38:56.920
> 
> 标签：android, android-intent, android-4.0-ice-cream-sandwich

正如android.se 上关于 HTC 手机上的人脸解锁的[问题](https://android.stackexchange.com/questions/21645/how-do-i-train-face-unlock)中所述，我们发现 HTC 已经从他们的设置菜单中删除了“训练”人脸的能力。

我希望能够编写一个链接到缺少的功能的单键应用程序（假设它没有被完全删除）。

我认为这是某个应用程序的活动，所以大概我可以使用意图打开它。但是我不知道如何找到*要触发哪个应用程序的哪个活动*？我查看了开发人员参考，但找不到任何东西，我应该查看 Android 源代码吗？ [这个答案](https://stackoverflow.com/a/8632686/1091553)可能表明这对我没有帮助。

我可以试试[这个解决方案](https://stackoverflow.com/a/2780475/1091553)——我会使用设置作为目标应用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:04:21.397

调用训练活动的意图称为：

```
Package: com.android.facelock
Class: com.android.facelock.AddToSetup 
```

# wcf - WCF：如何在合约中创建大量的类？

> ID：10152925
> 
> 赞同：0
> 
> 时间：2012-04-14T10:38:59.883
> 
> 标签：wcf, serialization

好吧，我正在创建一个 WCF 服务，它有大量的类与客户端通信，这些类也有很多属性。

主要是，这些类是使用 edmx 的代码生成器创建的 POCO 类，我有 .tt 文件。

要使用这些类和属性，我必须使用 DataContract 和*DataMember*，因此在每个类中我必须设置*DataContract*并在每个类的每个属性中设置*DataMemeber*。所以这是一个很大的工作，所以如果我需要对数据库做一些修改，我必须重新生成 tt 文件，然后重复工作。

有没有办法自动做到这一点？我正在使用 .NET 4.0 和 EF 4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T13:17:25.697

有带有 WCF 数据服务的[实体框架提供程序](http://msdn.microsoft.com/en-us/library/dd673932.aspx)，可能对您有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T15:34:22.293

添加到项目中的 .tt 文件的全部意义在于，您可以修改模板以满足您的需要。您需要做的就是更改模板，使其添加`[DataContract]`到实体类定义和`[DataMember]`实体属性定义中。

从那里，任何时候更改数据库时，您只需使用“从数据库更新模型”功能，您的实体将使用现有模板自动重新生成其代码。

综上所述，我将建议您*不要*直接从您的服务层公开您的数据库实体，无论是否 POCO。您确实应该使用域分离进行设计，并在服务级别使用消息传递和[CQRS](http://martinfowler.com/bliki/CQRS.html)类型模式。然后，您只需使用一些简单的映射方法将这些消息/命令之间的数据转换为您的实体。

# .net - .net 中的通用“数据容器”/命名空间提供程序

> ID：10152927
> 
> 赞同：1
> 
> 时间：2012-04-14T10:39:08.433
> 
> 标签：.net, ienumerable, iqueryable

是否有定义嵌套“数据提供者”关系的通用接口？也就是说，给定标识符的某个对象提供了一个对象。

像 IEnumerable 一样，这种情况一直在发生并且可以/应该/已经被抽象出来。它已经部分包含在 IQueryable 中，但 IQueryable 非常通用，并且并不总是产生 IQueryable 本身，因此它不是可组合的。

这发生在 Rest 服务（网站/rest 数据）、类型系统（类/属性）、文件系统（目录/文件）、编程（文档/类名）等中......

代表这个想法的最接近的接口是什么？

# php - CakePHP：单独表格中的用户和配置文件

> ID：10152929
> 
> 赞同：0
> 
> 时间：2012-04-14T10:39:22.693
> 
> 标签：php, cakephp

在我的应用程序中，我有两个表：用户和配置文件。用户有个人资料，个人资料属于用户。我这样做的原因是因为我想让表格保持简单，并且每个控制器都更小，例如 UserController 处理登录、忘记密码等，而 ProfileController 处理编辑、配置文件视图等。

现在，当链接到其他模型时，例如帖子或评论或朋友，我遇到了困境！

目前，我通过 user_id 外键向用户发布和评论，然后使用查询中的包含提取个人资料信息，但对于我通过个人资料 ID 链接的朋友。

那么更好的选择是什么？因为通过个人资料 ID 链接似乎更好，因为这更相关，并且将来如果用户有其他东西。例如组或页面（想想 Facebook），那么很难区分链接到个人资料的内容和链接的内容链接到同一用户的组或页面。

我知道这是一个稍微开放的问题，但如果其他人可以分享想法，这将对我有所帮助，尤其是在性能和​​代码效率方面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T12:13:40.267

使用个人资料 ID 链接朋友对我来说毫无意义（因为朋友是用户表上的递归关系）。

# sql - Pl/PgSQL 模糊区间

> ID：10152931
> 
> 赞同：0
> 
> 时间：2012-04-14T10:39:39.923
> 
> 标签：sql, postgresql, plpgsql

`Pl/PgSQL`是否已经为模糊间隔编码了任何存储过程？喜欢`few minutes ago`，`just now`或者我需要自己写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:57:11.123

我认为永远不会有这样的事情，因为每个人都会对“模糊间隔”有自己的定义，就像`just now`在`50ms`OLTP 或`30min`DWH 数据库中一样。

这将完全取决于您的应用程序需求和逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:42:52.387

我很确定没有，但是使用[PL/PgSQL 日期函数应该很容易编写](http://www.postgresql.org/docs/7.4/static/functions-datetime.html)

# sql - 接近 0 的语法错误

> ID：10152935
> 
> 赞同：0
> 
> 时间：2012-04-14T10:40:01.470
> 
> 标签：sql, sql-server, sql-server-2008, select

以下陈述有什么问题？我正在使用 SQL Server 2008。

```
use Demo;

SELECT * FROM users
limit 0 , 30 
```

我有：

```
Msg 102, Level 15, State 1, Line 4
Incorrect syntax near '0'. 
```

这真的很奇怪。我尝试了谷歌，但没有找到太多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T10:42:04.790

`LIMIT`是 MySQL 关键字。在 MS SQL Server 中使用`TOP`or关键字。`ROWCOUNT`

注意`TOP`可以接受一个变量，例如`SELECT TOP( @NumberOfRows ) * FROM Foo;`

请参阅：[如何在 SQL Server 2005 中使用 LIMIT 关键字？](https://stackoverflow.com/questions/455008/how-to-use-limit-keyword-in-sql-server-2005)（也适用于 2008 年）

根据`LIMIT`使用方式，和（[数据范围/页面](http://www.mysqlfaqs.net/mysql-faqs/SQL-Statements/Select-Statement/How-to-use-LIMIT-clause-in-MySQL)与仅限制结果数量）之间**存在**重要区别。在这种情况下，MS SQL 语法更加冗长；通常 ROW_NUMBER() 函数结合一些简单的逻辑来计算对所需页面有效的值。`LIMIT``TOP`

## 简单范围选择示例

```
SELECT * FROM
(
    SELECT 
        ROW_NUMBER() OVER( ORDER BY SomeColumn ASC ) AS RowNumber, 
        AnotherColumn 
    FROM dbo.MyTable
) Q

WHERE RowNumber BETWEEN 20 AND 30; -- these integers can be variables 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T10:41:23.567

```
select top 30 * from users 
```

SQL Server 使用*该*语法而不是`limit`表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:41:33.983

SQL Server 不支持该`limit`子句（即 MySQL 和 PostgreSQL 语法）。你应该`top`这样使用：

```
select top 30 * from users 
```

# editor - 如何在深色背景下发表评论

> ID：10152939
> 
> 赞同：1
> 
> 时间：2012-04-14T10:40:28.940
> 
> 标签：editor

叫我疯了...嘿，我想知道你们在黑暗背景下是如何评论或提问的。我是该站点的新手，因此尝试搜索常见问题解答但找不到答案。你如何在不同的背景下写你的代码相关的东西，在简单的背景下写一般的句子？

```
 **Its a Check and it works.** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:45:01.213

你的意思是

> 喜欢这样，因为这是一个块引用，您可以使用 > 前缀或突出显示并单击语音标记

另一个是`a bit like this`反勾号`，表示代码块，或者您可以像这样突出显示代码

```
namespace SomeNameSpace
{
    public class SomeClass
    {
        public int foo() 
        {
            return 1+1;
        }
    }
} 
```

哪个做类似的事情，你可以通过突出显示一个块并单击`{}`按钮来做到这一点，或者你可以从开头缩进 4 ，但它会进入该模式。

编辑器中有格式提示（橙色问号）

# ipad - 在 iOS5 中检测重叠屏幕区域上的手势

> ID：10152944
> 
> 赞同：1
> 
> 时间：2012-04-14T10:41:02.910
> 
> 标签：ipad, ios5, uigesturerecognizer

如下图所示，我的应用程序有几个UIView `B`、`C`和`D`并排，并且都包含在一个封装的 UIView 中`A`：

![在此处输入图像描述](../Images/c2aa4fccdb18d02f27e23664d86db66c.png)

我`UIPinchGestureRecognizer`在`B`,`C`和中都有一个`D`。我还想做的是识别整个区域的不同手势`A`（不妨碍其他手势识别器的工作）。

最好的策略是什么？我的目标是 iOS5+，不需要向后兼容。

还值得注意的是，手势识别器`A`可能必须是自定义手势识别器，因为我想检测捏合但涉及 > 2 个手指。

**想法：**

如果安装手势识别`A`器效果不佳，则可以通过使用`touchesBegan`etc 以旧方式进行操作。正如[`UIResponder`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)所指出的，您可以拥有一个`UIView`just call的子类，`[super touchesBegan:touches withEvent:event]`如果您将其传递到响应者链中'对触摸不感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:47:28.570

It turns out just adding gesture recognizers in the straightforward obvious way works, at least for the gestures I want to recognize. I imagined it would be more complicated.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:10:32.053

像往常一样将 GestureRecognize 添加到 A 中。

现在您需要先对触摸的内容进行命中测试。

首先，您需要测试项目的 z-index。例如，如果您触摸 B，那么您的函数将对所有受影响的项目进行循环/命中测试，在本例中为 A 和 B。在您的函数检测到 A 和 B（B 超过 A）命中测试后，它应该检查 z 索引。例如 B 的 z-index 是 2，那么 A z-index 是 1。现在您知道 B 是用户想要触摸的东西，因为它的 z-index 更高，这意味着它在顶部。

在确定了目标（B）之后，在执行它的 GestureRecognize 之前，您需要暂时禁用 A 的 GestureRecognize 以消除重叠的 GestureRecognize 之间的任何冲突。在 B 触摸完成/结束后，启用 A 的 GestureRecognize。

# javascript - JavaScript 中的未定义错误

> ID：10152952
> 
> 赞同：0
> 
> 时间：2012-04-14T10:41:36.487
> 
> 标签：javascript, html, xml

我正在从 XML 获取数据。我可以成功地从 XML 中获取价格，但是当我使用下面给出的函数时，会出现一个名为 undefined 的意外错误；

```
<html>
  <head>
    <script type="text/javascript">
      function myXml(origin, destination) {
        var x=xmlDoc.getElementsByTagName("flights");

        for(i=0;i<x.length;i++) {
          if(x[i].getAttribute('FrTLAs')==origin && x[i].getAttribute('destination')==destination) {
            document.write(x[i].getAttribute('price'))
          }
        }
      }
    </script>
  </head>
  <body>
    <script type="text/javascript">
      document.write(myXml('SYD','Bali'));
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:48:49.067

`myXml('SYD','Bali')`调用返回`undefined`，因为您不会在函数体中返回任何内容。所以

```
document.write(myXml('SYD','Bali')); 
```

将打印`"undefined"`。只需将上面的代码替换为：

```
myXml('SYD','Bali'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:52:19.283

工程师是正确的，或者更好地从您的 myXml 函数返回值。

因此，不会发生 document.write(undefined) 并且您可能不会收到上述错误。

# python - ImportError（djangobook 第 3 章，第 1 部分，python 版本 2.7.2）

> ID：10152956
> 
> 赞同：0
> 
> 时间：2012-04-14T10:42:29.523
> 
> 标签：python, django, import

我正在关注 (http://www.djangobook.com/en/2.0/chapter03/) Djangobook 2，第 3 章，子章节“您的第一个 Django 支持的页面：Hello World”。

我收到 ImportError，“没有名为视图的模块”（检查帖子末尾的 url）。

我正在使用 Python 2.7.2

我将逐步完成我所做的一切：

```
$ pwd /home/name/Desktop/sc
$ django-admin.py startproject mysite2
$ cd mysite2

$ pwd /home/name/Desktop/sc/mysite2
$ ls -R
.:
manage.py  mysite2  views.py~

./mysite2:
__init__.py   settings.py   urls.py   urls.pyc  wsgi.pyc
__init__.pyc  settings.pyc  urls.py~  wsgi.py 
```

然后我`views.py`在`~Desktop/sc/mysite2`.

```
from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello world") 
```

然后我去了`~Desktop/sc/mysite2/mysite2`。我将我的更改`urls.py`为包含以下内容：

```
from django.conf.urls.defaults import *
from mysite2.views import hello

urlpatterns = patterns('',
    ('^hello/$', hello),
) 
```

然后我在浏览器`python manage.py runserver`中运行“/home/name/Desktop/sc/mysite2 `. When I paste`http://127.0.0.1:8000/”，得到以下屏幕：

[http://tinypic.com/r/23th72v/5](http://tinypic.com/r/23th72v/5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:52:50.653

**更新：**完全使用 Django`1.4.0-final`

总的来说，我建议重新执行该`startproject`步骤并从头开始；我将总结您需要采取的步骤：

**1）创建一个新的Django项目**

```
$ django-admin.py startproject helloWorldProject 
```

这将创建一个`helloWorldProject`包含一些存根文件的新文件夹。

**2）创建一个新文件`views.py`**_INSIDE_*你*的`helloWorldProject/helloWorldProject`文件夹。它应该包含以下代码：

```
from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello world") 
```

**3）更新`urls.py`文件**（在同一文件夹中`views.py`）：

```
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('',
  url(r'^$', 'helloWorldProject.views.hello', name='hello'),
) 
```

**4)使用已知命令**运行您的服务器：****

 **```
$ python manage.py runserver 
```

这应该会给你一些类似于这个的输出

```
Validating models...

0 errors found
Django version 1.4, using settings 'helloWorldProject.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C. 
```

**5) 检查您的“Hello World”视图是否有效**——将您的浏览器指向[http://127.0.0.1:8000/](http://127.0.0.1:8000/)

**注意：**如果你定义了一个类似的 URL 模式`('^hello/$', 'helloWorldProject.views.hello', name='hello'),`，你必须将你的浏览器指向[http://127.0.0.1:8000/hello/](http://127.0.0.1:8000/hello/)否则你会得到一个 HTTP 404 错误消息......

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:59:46.193

Django book 描述了旧的 django 版本。引自[第 2 章](http://www.djangobook.com/en/2.0/chapter02/)

> 官方版本有一个版本号，例如 1.0.3 或 1.1，最新的版本总是可以在 [http://www.djangoproject.com/download/](http://www.djangoproject.com/download/)获得。

在最新的 1.4 中，项目布局已[更新](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)，因此请小心使用该书中的示例。我建议您首先尝试官方文档中的[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)。

我认为您应该`views.py`在`~Desktop/sc/mysite2/mysite2`附近创建`urls.py`**

# c# - C# 中的路径/文件名反斜杠

> ID：10152968
> 
> 赞同：0
> 
> 时间：2012-04-14T10:43:40.033
> 
> 标签：c#, .net

我正在从 VB 转换为 C#，在 C# 中我似乎无法简单地将路径字符串写入应用程序设置..

```
D:\Something  becomes D:\\Something 
```

我也试过`@"D:\Something"`了，但这也行不通。

那么正确的方法是什么？假设我想要两个设置；路径和文件名。为了使 Path.Combine 成为数据库的有效文件路径/名称，或者换句话说，使用单个反斜杠，我应该如何格式化它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:47:35.503

您的代码工作正常 - 当您读取带有双斜杠的字符串时，它们再次变为单斜杠。这称为*转义*。它旨在让您输入特殊字符作为以`\`. 单斜线在此方案中变得特别，因此您还需要使用斜线对其进行转义。

# objective-c - 如何在 UIViewController 中设置视图

> ID：10152970
> 
> 赞同：0
> 
> 时间：2012-04-14T10:43:53.180
> 
> 标签：objective-c, uiview, uiviewcontroller

我创建了一个几乎空的 UIViewController 类，名为`MyViewController`. 在*viewDidLoad*中，我设置了标题并向*navigationItem.leftBarButtonItem*添加了一个关闭按钮。

我`MyViewController`这样介绍我的：

```
MyViewController *myViewController = [[MyViewController alloc] init];

UINavigationController *nc = [[UINavigationController alloc] myViewController];
nc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentModalViewController:nc animated:YES]; 
```

当 viewController 出现时，它的视图的背景是黑色的。如何设置它的视图以用空视图填充屏幕 - 就像在 Storyboard 中设置 UIViewController 一样？

我尝试将以下内容添加到*viewDidLoad*，但视图仍然是黑色的：

```
self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:47:02.263

您可以添加带有自定义图像的 UIImageView，然后将其发送回所以在您的视图控制器中`viewDidLoad`

```
UIImageView *back = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"MyBG"]];
[self.view addSubview:back];
[self.view sendSubViewToBack:back]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:57:38.330

如果您使用的是 XIB 文件，您应该通过方法[initWithNibName: 初始化视图控制器：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName%3abundle%3a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T15:38:40.840

默认情况下，会创建一个 VC 视图`-loadView`，您通常既不调用也不覆盖该视图。当您第一次请求 VC 的`view`属性时，它会自动调用。
视图的大小会自动设置为“空白空间”，就像除了没有 NavigationController 的状态栏之外的所有内容，在使用导航栏时减去导航栏等。你不应该担心它的大小 - 通常它很好。

您可以`-viewDidLoad`在`-viewDidUnload`.

# javascript - 一页上有许多社交网络的分享按钮

> ID：10152971
> 
> 赞同：1
> 
> 时间：2012-04-14T10:44:09.880
> 
> 标签：javascript, ajax, performance, social-networking

我目前正在研究数据库上做一些工作，他们决定希望能够在社交网络（Facebook、Twitter、LinkedIn 和 Google+）上分享该网站的文章链接。

这最好通过各自网络提供的共享按钮来完成。通过遵循每个网络的实施说明，我很快让按钮正常工作并在网站上正确显示。

我的问题是该网站提供了在单个搜索结果页面上显示 1000 (1K) 个帖子的可能性。这意味着当创建这样一个页面时，它需要为每个社交网络创建 1000 个共享按钮（实际上是 4000 个）。

可悲的是，这似乎压倒了浏览器，因为它提供停止社交网络提供的 javascript 以及您是否选择停止它 - 页面最终陷入僵局，等待来自社交网络的响应并且永远不会完成页面加载过程.

我有一个想法，问题可能是大量的异步请求意味着浏览器以某种方式错过了一些响应，因此最终永远等待一个永远不会到来的响应。

如前所述，只有如此大量的帖子才会出现问题，例如，如果一个页面显示 100 个帖子（实际上是 400 个分享按钮），它就可以完美运行。

虽然有人可能会说单页上 1000 个帖子是多余的，但遗憾的是，限制显示帖子的最大数量并不是一种选择。

因此，我的问题是你们中是否有人知道解决此类问题的方法，或者我唯一真正的选择是创建不需要通过社交网络提供的 javascript 创建的自定义共享按钮？

以下参考指向每个共享按钮的文档。

*   [推特](https://dev.twitter.com/docs/tweet-button)
*   [Facebook](http://developers.facebook.com/docs/reference/plugins/like/)
*   [领英](http://developer.linkedin.com/plugins/share-plugin-generator)
*   [谷歌+](https://developers.google.com/+/plugins/+1button/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T11:20:13.127

对于所有这些按钮，有一个主要的 js 文件来完成繁重的工作。因此，**对于 LinkedIn**，添加脚本标签：

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script> 
```

一次在页面中。并在需要时使用以下脚本作为linkedin 按钮的占位符。（不要忘记替换`data-url`下面脚本中的属性）

```
<script type="IN/Share" data-url="http://developer.linkedin.com/plugins/share-plugin-generator" data-counter="top"></script> 
```

**类似地，对于 Twitter**，下面的脚本标签需要在页面中添加一次，因为它的工作是获取主 js 文件并将其添加到页面中。

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

下面的脚本需要在任何你想要的地方多次添加。将 data-url 属性替换为您单击它时需要发送推文的 url。

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://dev.twitter.com" data-via="your_screen_name" data-lang="en">Tweet</a> 
```

当您获得**[FB](http://developers.facebook.com/docs/reference/plugins/like/)**或**[Google Plus](http://www.google.com/webmasters/+1/button/)**之类的代码时，您将获得一个需要添加一次的脚本，然后将代码添加到您需要的任何地方。

**编辑：** 根据您在下面的评论：脚本肯定会引起问题，因为它们需要将每个占位符转换为一个好看的“喜欢”按钮。以下是一些提高性能的方法：

1.  仅在页面加载时运行这些脚本（即，在加载时添加主脚本）
2.  使用`setTimeout`or `setInterval`，一次处理每 100 个占位符（需要更改主脚本）
3.  Lazy load the init of like buttons. When the user scrolls the page and the like buttons will show up in the page, then initialize the buttons (requires change in main scripts)
4.  **Recommended Approach**: Keep just one set of like buttons. When user hovers over a search result, then add this set of buttons to that div and change the attributes related to url in the buttons. With this way, only one set of buttons will be shown and won't take time at all to init them.

# perl - 如何使用 Mojolicious 上传文件？

> ID：10152973
> 
> 赞同：13
> 
> 时间：2012-04-14T10:44:39.730
> 
> 标签：perl, file-upload, mojolicious

我一直在尝试基于 perl 的 Mojolicious Web 框架。我已经尝试开发一个完整的应用程序而不是 Lite。我面临的问题是我正在尝试将文件上传到服务器，但下面的代码不起作用。

请指导我有什么问题。此外，如果文件被上传，那么它是在应用程序的公共文件夹中还是在其他地方。

提前致谢。

```
sub posted {
 my $self = shift;
 my $logger = $self->app->log;

 my $filetype = $self->req->param('filetype');
 my $fileuploaded = $self->req->upload('upload');

 $logger->debug("filetype: $filetype");
 $logger->debug("upload: $fileuploaded");

 return $self->render(message => 'File is not available.')
  unless ($fileuploaded);

 return $self->render(message => 'File is too big.', status => 200)
   if $self->req->is_limit_exceeded;

 # Render template "example/posted.html.ep" with message
 $self->render(message => 'Stuff Uploaded in this website.');
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T17:09:04.887

`method="post"`（首先，您需要一些带有and`enctype="multipart/form-data"`和 a `input type="file"`with的HTML 表单`name="upload"`。只是为了确定。）

如果没有错误，`$fileuploaded`将是一个`Mojo::Upload`. 然后你可以检查它的大小，它的标题，你可以用`$fileuploaded->move_to('path/file.ext')`.

取自一个[奇怪的例子](http://web.archive.org/web/20110218095830/http://d.hatena.ne.jp/yukikimoto/20100212/1265989676)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-15T11:34:43.290

要处理上传文件，您应该使用`$c->req->uploads`

```
post '/' => sub {
   my $c = shift;
   my @files;
   for my $file (@{$c->req->uploads('files')}) {
     my $size = $file->size;
     my $name = $file->filename;

     push @files, "$name ($size)";
     $file->move_to("C:\\Program Files\\Apache Software Foundation\\Apache24\\htdocs\\ProcessingFolder\\".$name);
   }
   $c->render(text => "@files");
} => 'save'; 
```

在此处查看完整代码：[https ://stackoverflow.com/a/28605563/4632019](https://stackoverflow.com/a/28605563/4632019)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T14:46:13.943

您可以使用 Mojolicious::Plugin::RenderFile

[Mojolicious::插件::RenderFile](https://metacpan.org/pod/Mojolicious%3a%3aPlugin%3a%3aRenderFile)

# c++ - c++中重载赋值运算符的返回类型

> ID：10152978
> 
> 赞同：4
> 
> 时间：2012-04-14T10:45:11.607
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [为什么复制赋值运算符必须返回引用/常量引用？](https://stackoverflow.com/questions/3105798/why-must-the-copy-assignment-operator-return-a-reference-const-reference)
> [运算符= C++ 中的重载](https://stackoverflow.com/questions/5463437/operator-overloading-in-c)

我已经问过一个关于这个赋值运算符重载的问题。我可能在问一个愚蠢的问题。对不起。

我的班级声明是这样的：

```
class Circle
{
    public:
       Circle();
       Circle(const Circle &);
       Circle(unsigned short rad);
       unsigned short getRadius() const { return itsradius; }
       void setRadius(unsigned short rad) { itsRadius = rad; }
    private:
       unsigned short itsRadius:
}; 
```

我的班级定义：

```
Circle::Circle()
{
   itsRadius = 0;
}
Circle::Circle(unsigned short rad)
{
   itsRadius = rad;
}
Circle::Circle(const Circle & rhs)
{
   itsRadius = rhs.getRadius();
} 
```

我正在重载赋值运算符，如下所示：

```
SimpleCircle & SimpleCircle::operator=(const SimpleCircle & rhs)
{
   itsRadius = rhs.getRadius();
   return *this;
} 
```

当我们在像“itsRadius = rhs.getRadius()”这样处理当前对象时，当前对象的半径会发生变化，那么，返回“*this”有什么需要呢？这个函数可以重写为无效函数吗？有什么问题吗？或者它只是一个要遵循的标准？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T10:49:43.717

这是一个很好的约定，可以与`operator=`内置类型的行为保持一致。

使用内置类型，您可以执行以下操作：

```
int a, b, c;
// ...
a = b = c = 10; 
```

如果您不返回对 的引用`*this`，则您的类型将不支持分配链。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:50:22.727

Returning`*this`允许您像这样链接分配，

```
SimpleCircle a, b, c(10);
a = b = c; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T10:52:13.803

这是惯例，请参阅[wikipedia](http://en.wikipedia.org/wiki/Assignment_operator_%28C%2B%2B%29)和[Richard Gillam 的链接文章](http://icu-project.org/docs/papers/cpp_report/the_anatomy_of_the_assignment_operator.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T10:55:25.693

它允许您在一个语句中分配多个实例，如下所示：

```
s1 = s2 = s3; 
```

# android - 是否可以同时访问一个类文件以通过服务访问其方法或变量，而通过活动访问另一个类文件？

> ID：10152979
> 
> 赞同：0
> 
> 时间：2012-04-14T10:45:33.623
> 
> 标签：android, service

我有一个名为 PatientDetails 的类，我在其中存储来自 xml 的值，然后需要在同一时间点从服务以及活动中访问其变量和方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:28:27.280

`Application`共享“助手”类的一种方法是在应用程序的组件中保存对它的单个实例的“静态”引用。例子...

```
public class MyApp extends Application {

    public static detailsHelper;

    @Override
    public void onCreate() {

        detailsHelper = new PatientDetails();
    }
} 
```

当您需要在任何其他组件中使用“助手”时，`Activity`您只需按如下名称`Service`引用它...`Application`

```
MyApp.detailsHelper.doSomething(); 
```

从技术上讲，在默认情况下，不会出现两个组件*同时访问某些内容的情况，*因为 Android`Application`及其所有组件都存在于`process`单个`thread`执行中。

但是，如果任何组件执行使用线程的代码，您应该非常小心。例如，`Activity`使用 an`AsyncTask`或可能使用 an`IntentService`创建自己的工作线程来完成工作。在这种情况下，请确保“助手”类中写入数据的任何方法都以线程安全的方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:14:31.427

这是典型的多线程场景。只要您只是读取数据，您就可以毫无困难地做到这一点。

如果您正在通过您的活动从患者详细信息类中读取数据并通过您的服务将数据写入其中，您将进入运行时异常。在这种情况下，您已仔细同步变量或方法。

# javascript - 使用 nodelist 的特定索引值调用函数

> ID：10152980
> 
> 赞同：1
> 
> 时间：2012-04-14T10:45:37.563
> 
> 标签：javascript, jquery

是否可以在存储 div 的节点列表的特定索引值上调用函数，如下所示：

```
var txtElem = txtdiv.getElementsByTagName("div"); 
```

我想要的是我在 txtElem 节点列表中存储分区列表现在我想在节点列表中存储的第 3 个 div 的单击事件上调用一个函数。分区是动态创建的，它们没有任何 id，因此它们不能通过 id 访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:51:26.023

这个问题很不清楚。看到 jQuery 标签，我想到了这些：

一种在指定索引上调用 jQuery 函数的方法[`.eq()`](http://api.jquery.com/eq/)：

```
var n = 1; //the index you need
$(txtElem).eq(n).css('color', 'red'); 
```

获取 DOM 元素的简单 Javascript：

```
var n = 1; //the index you need
var elem = txtElem[n]; //elem will hold the DOM element

//call simple DOM methods on it:
var s = elem.innerHTML;

//you can also call jQuery functions on it:
$(elem).css('color', 'red'); 
```

顺便说一句`txtElem`，它不是一个对象，它是一个[`NodeList`](https://developer.mozilla.org/En/DOM/NodeList)“类数组对象”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:58:29.627

根据您的要求，似乎可以这样做：

```
function toPseudoArray(nodeList) {
    var ar = [];
    for(var i in nodeList)
        if(nodeList[i].nextSibling) // or for that case any other way to find if this is an element
            ar.push(nodeList[i]);
    return ar;
} 
```

将您的 nodeList 传递给此函数，将其返回的内容用作包含您的元素且仅包含您的元素的数组。

顺便说一句，您可以简单地使用 my_fab_function(txtElem[0]); 直接在特定元素上调用函数。- 当然，直到你不超过计数。

# html - 是否允许 ul 在 html 或 xhtml 中嵌入内联 li？

> ID：10152983
> 
> 赞同：0
> 
> 时间：2012-04-14T10:45:59.497
> 
> 标签：html, css

注意带有子 ul 的 li 是 display:inline - 代码示例如下

```
<style type="text/css">
ul.nav_main li { display: inline }
ul.nav_submenu li { display: block }
</style>

<ul class="nav_main">
    <li>Item 1
        <ul class="nav_submenu">
            <li>Option 1</li>
            <li>Option 2</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T10:54:02.310

CSS 不影响 HTML 源代码的有效性。然而，它可能会导致不可预知的结果，因为浏览器会尽力将 UL 放在内联元素中（即使它是有效的！）

无论如何，随时欢迎您**[自己检查](http://validator.w3.org/ "W3 验证服务")**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T10:56:57.840

我认为 XHTML 1.0 没有问题。如果要检查，可以使用 W3C Validator：http: [//validator.w3.org/check](http://validator.w3.org/check)

因此，您需要一个虚拟页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<style type="text/css" media="all">
ul.nav_main li { display: inline }
</style>
</head>
<body>
<ul class="nav_main">
    <li>Item 1
        <ul class="nav_submenu">
            <li>Option 1</li>
            <li>Option 2</li>
        </ul>
    </li>
</ul>
</body>
</html> 
```

W3C Validator 没有错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T11:04:10.870

`<ul>`在 CSS 中允许嵌套

如果你想`nav-main`用垂直获得水平`nav_submenu`，你应该`display: inline-block`有`ul.nav-main > li`

```
<style>
    ul.nav_main li { display: inline-block }
    ul.nav_submenu li { display: block }
</style>

<ul class="nav_main">
    <li>Item 1
        <ul class="nav_submenu">
            <li>Option 1.1</li>
            <li>Option 1.2</li>
        </ul>
    </li>
    <li>Item 2
        <ul class="nav_submenu">
            <li>Option 2.1</li>
            <li>Option 2.2</li>
        </ul>
    </li>
</ul> 
```

* * *

在 Linux 上的 Firefox 11 和 Chrome 17 中测试

# jquery - 在页面上单击另一个视频时暂停 jquery jPlayer

> ID：10152985
> 
> 赞同：0
> 
> 时间：2012-04-14T10:46:29.460
> 
> 标签：jquery, jplayer

我在所有页面（jPlayer）上都播放了背景音乐，当在帖子或页面或侧边栏上单击/播放另一个嵌入视频时，我需要暂停它，尽管此代码似乎不起作用：

```
<script>
//pauses jplayer
var selectors = [
        "iframe[src^='http://player.vimeo.com']", 
        "iframe[src^='http://www.youtube.com']", 
        "iframe[src^='https://www.youtube.com']", 
        "iframe[src^='http://www.kickstarter.com']", 
        "object", 
        "embed"
      ];
  $selectors.click(function() {
  $.jPlayer.pause();
});
</script> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:11:00.190

```
$(function() {
    // Find all videos
    var selectors = [
        "iframe[src^='http://player.vimeo.com']", 
        "iframe[src^='http://www.youtube.com']", 
        "iframe[src^='https://www.youtube.com']", 
        "iframe[src^='http://www.kickstarter.com']", 
        "object", 
        "embed"
      ];
        // The element that is fluid width
    var $allVideos = $(this).find(selectors.join(','));
    // Figure out and save aspect ratio for each video
        $allVideos.hover(function(){
            $.jPlayer.pause(); 
        });
}); 
```

适用于悬停 - 对于不同的播放器 API，点击很复杂

# sms - 是否可以使用 PlayN 构建短信游戏？

> ID：10152991
> 
> 赞同：1
> 
> 时间：2012-04-14T10:47:38.720
> 
> 标签：sms, sms-gateway, playn

是否可以使用 PlayN（HTML、Java 和 Android 版本）创建用户可以通过短信玩的游戏？我正在考虑像井字游戏这样的游戏。

还是我应该尝试一些不同于 PlayN 的东西来创建我的游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:00:36.753

没有内置支持通过 PlayN 发送 SMS。在非移动平台上支持接收和处理 SMS 消息是不可能的，我不确定在移动平台上是否可能（由于缺乏 API）。我从未听说过通过短信发送和接收数据的游戏，但也许存在这样的事情。

您应该考虑使用我们称为 Internet 的这种奇特的东西来发送您的游戏数据。它适用于成千上万的现有桌面、HTML、Flash、Android 和 iOS 多人游戏。

# java - 使用 PayPal API 获取交易历史

> ID：10152994
> 
> 赞同：1
> 
> 时间：2012-04-14T10:48:09.873
> 
> 标签：java, paypal

我想获取一个帐户的所有交易列表。根据 API，我正在使用 TransactionSearch API。我也在使用 PayPal 提供的[示例代码](https://www.x.com/paypal-apis-transaction-search-java-1.6/nvp)，但我没有得到正确的响应。正如我应该根据[API](https://cms.paypal.com/es/cgi-bin/?&cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_TransactionSearch#id09BKCB000TA) 这里是我得到的响应 Timestamp ：

```
INFO [NVPAPICaller] - TIMESTAMP=2012%2d04%2d14T10%3a41%3a27Z&CORRELATIONID=5e18132a3167&ACK=Success&VERSION=51%2e0&BUILD=2769757 Ack : 200  Elapsed Time : 2,491 ms 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:15:38.047

使用 TransactionSearch 解决