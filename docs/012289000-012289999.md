# StackOverflow 问答 12289000-12289999

# java - 双击键绑定 Java

> ID：12289005
> 
> 赞同：0
> 
> 时间：2012-09-05T20:10:35.323
> 
> 标签：java, swing, jframe, fullscreen, key-bindings

```
public void fullscreenKey(final JFrame frame)
{
    k = KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0);
    getInputMap(WHEN_IN_FOCUSED_WINDOW).put(k, k.toString());
    getActionMap().put(k.toString(), new AbstractAction()
    {
        public void actionPerformed(ActionEvent e)
        {
            fullscreen(!f1, frame);
            f1 = !f1;
        }
    });  
} 
```

每当我将此方法调用到其他类中时，什么都没有发生。由于 getInputMap 和 getActionMap，我无法将此方法设为静态。我用 Main main = new Main(); main.fullscreenKey(frame); 此方法在 Main 构造函数中调用。如何在其他类中调用此方法并使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:46:13.917

不确定这是否是您所追求的

```
public void fullscreenKey(JComponent comp, final JFrame frame)
{
    k = KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0);
    comp.getInputMap(WHEN_IN_FOCUSED_WINDOW).put(k, k.toString());
    comp.getActionMap().put(k.toString(), new AbstractAction()
    {
        public void actionPerformed(ActionEvent e)
        {
            fullscreen(!f1, frame);
            f1 = !f1;
        }
    });  
} 
```

如果您正在寻找“全局”键处理程序（即您想在应用程序中随时处理击键），您可以查看[Toolkit.addAWTEventListener](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#addAWTEventListener%28java.awt.event.AWTEventListener,%20long%29)，这是非常低的级别，因此可能需要一点努力它才能正常工作。

您还可以查看[KeyboardFocusManager](http://docs.oracle.com/javase/7/docs/api/java/awt/KeyboardFocusManager.html) ( [Java Global JFrame KeyListener](http://jonathanweatherhead.com/2011/09/16/java-global-jframe-key-listener/) )

# android - android地图项目未清除

> ID：12289015
> 
> 赞同：1
> 
> 时间：2012-09-05T20:11:03.107
> 
> 标签：android, android-mapview

我在 MapActivity 中每 x 秒重复一次以下代码：

```
 mapview.invalidate();
 for (int i=0; i<mapview.getOverlays().size(); i++ ) 
 {
     mapview.getOverlays().remove(i);
 }

 mapview.getOverlays().clear();
 List<Overlay> mapOverlays = mapview.getOverlays();
 //set new geoponts here and add 2 markers via itemizedoverlay.addOverlay(overlayitem);
 mapOverlays.add(itemizedoverlay);
 mapview.invalidate(); 
```

虽然我可以在 GUI 上看到它没有刷新页面，但它总是在它上面绘制。在放新东西之前似乎没有清除内容。

使用`postinvalidate()`也不行

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:26:53.080

的引用 `itemizedoverlay`不在那个函数中，我把它移到了那里，现在它可以工作了。

# mysql - innodb 交易和房间预订

> ID：12289017
> 
> 赞同：4
> 
> 时间：2012-09-05T20:11:21.980
> 
> 标签：mysql, transactions, innodb

我目前正在阅读很多有关 InnoDB 中事务的信息，此时我只使用过 myISAM 表，所以我不太习惯这一切：

这是我的表格方案：

```
CREATE TABLE IF NOT EXISTS `reservations` (
  `id_reservation` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `id_room` mediumint(8) unsigned NOT NULL,
  `date_from` date NOT NULL,
  `date_to` date NOT NULL,
  `cancelled` enum('Y','N') NOT NULL DEFAULT 'N',
  PRIMARY KEY (`id_reservation`),
  KEY `id_room` (`id_appartement`)
) ENGINE=InnoDB; 
```

现在假设我想为房间 ID 15 插入一个新的预订，从 2012 年 2 月 15 日到 2012 年 2 月 24 日，这是我认为根据我阅读的内容我应该做的事情：

1.  开始交易：

    ```
    START TRANSACTION; 
    ```

2.  插入行

    ```
    INSERT INTO reservations SET 
      id_room = 15, 
      date_from = '2012-02-15', 
      date_to='2012-02-24', 
      cancelled='N'; 
    ```

3.  检查是否有与我刚刚进行的预订相冲突的预订

    ```
    SELECT * FROM reservations WHERE 
      id_room = 15 
      AND cancelled = 'N' 
      AND date_from < '2012-02-24' AND date_to > '2012-02-15' 
      AND id_reservation <> LAST_INSERT_ID(); 
    ```

4.  如果不，`COMMIT;`

5.  别的，`ROLLBACK;`

问题是，在默认隔离模式（REPEATABLE-READ）下，一旦我开始事务，我将看不到在这个事务之外进行的任何其他 INSERT。那么，如果在步骤 1）之后，另一个用户插入了一个冲突的预订，会发生什么？

也许我应该在这种情况下使用 READ-COMMITED ？但这不会导致问题吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T20:53:59.857

你所拥有的很好，但是你需要在你的事务中添加一个表和一个查询。

该表需要每一行`id_room`。你可能已经有了那张桌子。

因此，在 START TRANSACTION 之后立即执行以下操作：

```
SELECT * FROM room WHERE id_room=15 FOR UPDATE; 
```

这将阻止下一个尝试预订同一个房间的人，直到您提交或回滚您的事务，只要下一个人也使用此 FOR UPDATE 语法。

[http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:56:13.150

因此，假设我使用 php 脚本访问我的数据库，使用 PDO 和事务为您预订房间一段时间的预订系统。时段为 30 分钟，但房间将被预订至少一小时。因此，一旦预订了之前的时间段，它也将被禁用，因为只能预订 30 分钟。假设两个或更多客户尝试访问并预订某个时间段或之前的一个时间段，第一个会成功而其他人将被拒绝，这意味着脚本将结束，或者他们会在第一个完成后等待，如果他确实预订了当他们再次尝试或在他决定不预订房间的情况下，他们将被拒绝，第二个将选择并经历相同的事件序列

# performance - 为什么我的 wordpress 网站这么慢，而且我有这么多停机时间？

> ID：12289023
> 
> 赞同：0
> 
> 时间：2012-09-05T20:11:40.590
> 
> 标签：performance, wordpress, pagespeed, yslow, downtime

我已经使用 Yslow 和 PageSpeed 来查找原因，但我似乎无法弄清楚为什么我的博客[http://www.fotokringarnhem.nl](http://www.fotokringarnhem.nl)有时加载速度非常快（我猜是缓存文件），而其他时间大约需要 10 秒或更长的时间来加载。

我在共享服务器上，但在共享服务器上的其他网站上没有遇到这样的问题。

我正在使用 cloudflare 来加速我的博客以加快速度，但无济于事。

我错过了什么吗？

过去 30 天的 Pingdom 报告（另见[http://stats.pingdom.com/hseaskprwiaz](http://stats.pingdom.com/hseaskprwiaz)）：

*   平均响应时间：7.620 ms
*   最慢平均：18.307 毫秒
*   最快平均：4.237 毫秒
*   正常运行时间：96.24%

**编辑 1**：来自 basicstate.com

诊断

+dns +connect -request -response

所以我猜它在请求上失败了。缩小范围的选项？

**编辑 2**：

我使用[P3（插件性能分析器）](http://support.godaddy.com/godaddy/wordpress-p3-plugin/)来确定哪些插件导致的加载时间最长。结果是用户访问管理器导致了大约 60% 的加载时间，所以我删除了它。

这做了一些事情，我现在的超时时间减少了，但是屏幕上弹出任何东西仍然需要很长时间。

我使用插件[SQL 监视器](http://blog.sjinks.pro/wordpress-plugins/sqlmon/)并确定有 82 个查询正在按请求执行，大约需要 10 秒！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:13:52.980

如果您有一个没有数百万用户的静态站点并且性能变化很大，那么您的主机可能是罪魁祸首。我已经尝试了大约 8 个不同的主机并研究了其他十几个，我强烈建议 Media Temple (mt)。您可以获得最好的客户服务和性能。

此外，查看 WP Engine 的速度测试工具： http: [//speed.wpengine.com/](http://speed.wpengine.com/) - 深入了解您的网站为何运行缓慢。需要几个小时才能生成报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:16:45.943

使用 P3 插件并使用本文进一步优化您的网站：[http ://andbreak.com/articles/guide-speed-wordpress/](http://andbreak.com/articles/guide-speed-wordpress/)

当一切都失败时，尝试切换供应商

**编辑**

事实证明，删除所有自动保存的页面和帖子备份以及概念是关键。这极大地减少了我对服务器的查询时间。现在以闪电般的速度！以下是最近几天的报告：正常运行时间：99.21% 总体平均：3.322 毫秒

WP 有一个有用的插件，也可以限制帖子和页面的自动保存和概念的数量：顺便说一句，[修订控制](http://dd32.id.au/wordpress-plugins/revision-control/) 结果不是即时的。用了一天才生效。

Basicstate 结果（当我在 12 日的 11 日删除修订和概念时清楚地显示了改进（不确定是哪个））。

```
date          uptime       dns   connect   request      ttfb      ttlb
2012-09-18     98.97     0.031     0.047     0.047     0.353     0.475
2012-09-17    100.00     0.031     0.047     0.047     0.389     0.810
2012-09-16    100.00     0.029     0.045     0.045     0.342     0.499
2012-09-15     93.81     0.029     0.045     0.045     0.739     1.035
2012-09-14     98.97     0.053     0.068     0.068     0.387     0.565
2012-09-13    100.00     0.058     0.074     0.074     0.499     0.853
2012-09-12     95.00     0.030     0.046     0.046     5.994     7.024
2012-09-11     96.97     0.051     0.096     0.096     9.707     9.949
2012-09-10     73.15     0.027     0.043     0.043     6.765     6.952
2012-09-09     43.48     0.027     0.121     0.121     3.652     3.724
2012-09-08     31.82     0.028     0.045     0.045     2.757     2.867
2012-09-07     71.93     0.026     0.042     0.042     5.917     6.091
2012-09-06     60.49     0.027     0.043     0.043     4.590     4.751 
```

# powershell - 获取使用 Register-ObjectEvent 注册的 Powershell 作业的输出

> ID：12289024
> 
> 赞同：0
> 
> 时间：2012-09-05T20:11:41.497
> 
> 标签：powershell

我有这个正在执行但不返回输出的脚本。

```
function code-Build-RepoWeb
{
     $job = Start-Job { code-Build-Component RepoWeb; Start-Sleep -seconds 5 }

     Register-ObjectEvent $job -EventName StateChanged `
    -SourceIdentifier JobStateChanged `
    -Action {$jobInfo = Receive-Job -Keep $Sender; Write-Host $jobInfo }
 } 
```

我不是 Powershell 的专家，在提问之前阅读了一些文档。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:46:38.517

无需注册活动，您可以这样做：

```
 Start-Job { ... } | Wait-Job | Receive-Job -Keep 
```

如果您需要非阻塞命令。这将创建一个全局变量来保存作业的结果：

```
$job = Start-Job { Start-Sleep -Seconds 5; 1..5 }

$null = Register-ObjectEvent $job -EventName StateChanged -SourceIdentifier JobEnd -Action {

    if($sender.State -eq 'Completed')
    {
        $global:jobInfo = Receive-Job $job        
    } 
}   

$jobInfo 
```

# c# - catch 关键字如何确定抛出的异常类型？

> ID：12289027
> 
> 赞同：1
> 
> 时间：2012-09-05T20:11:41.827
> 
> 标签：c#, .net, exception, try-catch

关键字如何`catch`确定抛出的异常类型？选择执行哪个 catch 块会发生什么过程？

```
try
{
    int[] myArray = new int[0];
    myArray[1] = 0;
}
catch (IndexOutOfRangeException ex) { } // how does the CLR know to enter here?
catch (InvalidCastException ex) { } 
```

通过 ILdasm

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       28 (0x1c)
  .maxstack  3
  .locals init (int32[] V_0,
           class [mscorlib]System.IndexOutOfRangeException V_1,
           class [mscorlib]System.InvalidCastException V_2)
  IL_0000:  nop
  .try
  {
    IL_0001:  nop
    IL_0002:  ldc.i4.0
    IL_0003:  newarr     [mscorlib]System.Int32
    IL_0008:  stloc.0
    IL_0009:  ldloc.0
    IL_000a:  ldc.i4.1
    IL_000b:  ldc.i4.0
    IL_000c:  stelem.i4
    IL_000d:  nop
    IL_000e:  leave.s    IL_001a
  }  // end .try
  catch [mscorlib]System.IndexOutOfRangeException 
  {
    IL_0010:  stloc.1
    IL_0011:  nop
    IL_0012:  nop
    IL_0013:  leave.s    IL_001a
  }  // end handler
  catch [mscorlib]System.InvalidCastException 
  {
    IL_0015:  stloc.2
    IL_0016:  nop
    IL_0017:  nop
    IL_0018:  leave.s    IL_001a
  }  // end handler
  IL_001a:  nop
  IL_001b:  ret
 } // end of method Program::Main 
```

但仍不清楚该`catch`关键字的作用是为了确定引发的异常类型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T21:12:09.820

只是一个简短的答案，真正的答案需要一本书。.NET 中的异常处理异常复杂，涉及许多活动部件。包括对 Windows 中异常的本机支持（SEH，结构化异常处理），CLR 中最大和最复杂的代码块之一（excep.cpp，232KB 代码），程序集中的元数据（这就是你为什么不这样做的原因）看不到它占用任何 IL 地址）和抖动。

*throw 引发*异常*关键字，它在运行时触发 RaiseException() Windows api 函数。Windows 通过运行由 RtlAddFunctionTable() 注册的异常过滤器来寻找愿意处理异常的代码。哪些是在 CLR 中实现的。它反过来使用由抖动生成的元数据，即当抖动将 IL 转换为机器代码时在即时编译时构建的数据表。抖动使用通过 .try 和 catch 等指令添加到程序集元数据的元数据信息，您在反汇编中看到的内容。表数据包含有关代表特定异常类型的 catch 子句的代码范围的信息。允许 CLR 选择应恢复执行的位置并告诉 Windows 继续处理异常。*

 *知道它从哪里开始并知道在哪里停止，Windows 现在开始展开堆栈帧，并在必要时调用 finally 块。接下来，它在 catch 块的第一条机器代码指令处设置的指令指针。

除此之外还有很多很多令人讨厌的小细节。与 ThreadAbortException 的语义一样，vb.net Catch When 关键字、finally 阻塞引发异常的复杂性、SEH 纯粹基于堆栈帧时处理 try 阻塞范围、线程需要中止时无法捕获的异常的概念。需要一本书但没人会写的东西，因为读者会立即入睡。

.NET 中的异常处理是一座充满铅的冰山。99% 在水下，这是CLR*中*最成功的抽象之一。除了程序员经常使用 catch 关键字之外，这与它的实现方式没有任何关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:23:57.787

*免责声明*：我没有阅读 CLR 规范，我知道异常比“正常”代码复杂得多。但是，这是一种非常简单的方法，我相信它会起作用。

1.  当抛出异常时，生成它的代码将使用特定类型，例如`IndexOutOfBounds`或`HttpException`而不是基类`Exception`
2.  当一个异常在一个`try`块内被捕获时，运行时将有一个预期类型的​​异常列表（即每个`catch`块一个）。假设它会是`List<Type> TheseExceptionsMayOccur`
3.  最后，它会像

.

```
foreach(Type ExceptionType in TheseExceptionMayOccur)
{
    if(e is ExceptionType )
        //run the respective catch block
} 
```*

# ios - 使用 GPS 在后台运行的应用程序以及如何停止它

> ID：12289031
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:11:52.420
> 
> 标签：ios, background, geolocation

我知道，为了让应用程序能够在后台继续工作，它的 info.plist 必须包含诸如 UIBackgroundModes 之类的内容，其值为“位置”（例如），以便在后台接收更新。

我想做的是一个应用程序，它将继续以最大精度更新用户位置，每 30 秒或更长时间将其坐标发送到网站。所有这一切都在后台。

首先，我想知道这是否可行，如果可以，有没有办法让用户使用按钮完全停止应用程序？我的意思是，如果用户打开应用程序然后按主页键，应用程序将在后台继续运行。但是当他想停止它时，他应该重新打开它，然后按下一个“停止按钮”，这将删除后台功能。

如果这一切都是可能的，我能得到一些指示吗？不需要代码，只需要获取更多信息的地方。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:15:53.783

You basically answered your own question:

> info.plist must include something like UIBackgroundModes with value 'location' (for example) to receive updates while in background

If that's not good enough, you can ask the OS to terminate your app when the user presses the Home button by setting a Boolean 'YES' value for the `UIApplicationExitsOnSuspend` key in Info.plist.

# c - 重新分配失败后自由悬空对象警告

> ID：12289036
> 
> 赞同：4
> 
> 时间：2012-09-05T20:12:14.803
> 
> 标签：c, pointers, warnings, dangling-pointer

我正在完成用于安全字符串检索的函数，并决定打开编译器警告，看看我的任何代码是否引发了任何标志。

目前，我在 Pelles C IDE 上收到以下编译器警告：

```
stringhandle.c(39): warning #2800: Potentially dangling object 'str' used after call to function 'realloc'.
stringhandle.c(50): warning #2800: Potentially dangling object 'str' used after call to function 'realloc'. 
```

这是我的功能（如果您想在阅读代码之前完整阅读问题，请阅读下文）：

```
char *getstr(void)
{
    char *str, *tmp;
    int bff = STRBFF, ch = -1, pt = 0;

    if(!(str = malloc(bff)))
    {
        printf("\nError! Memory allocation failed!");
        return 0x00;
    }
    while(ch)
    {
        ch = getc(stdin);
        if (ch == EOF || ch == '\n' || ch == '\r') ch = 0;
        if (bff <= pt)
        {
            bff += STRBFF; 
            if(!(tmp = realloc(str, bff))) 
            {
                free(str);  //line 39 triggers first warning
                str = 0x00;
                printf("\nError! Memory allocation failed!");
                return 0x00;
            }
            str = tmp;
        }
        str[pt++] = (char)ch;
    }
    str[pt] = 0x00;
    if(!(tmp = realloc(str, pt)))
    {
        free(str); //line 50 triggers second warning
        str = 0x00;
        printf("\nError! Memory allocation failed!");
        return 0x00;
    }
    str = tmp;
    return str;
} 
```

我想明白为什么我被警告`str`可能悬而未决。`str`如果发生错误，我将释放所指向的分配空间，但是我的函数`str`在被释放后没有进一步的调用。作为修复，我只是尝试`free(str)`做`str = 0x00`. 那不应该使指针`str`不再悬空吗？它与我的`tmp`指针有关吗？我没有释放或设置`tmp`为任何一个，因为如果失败`0x00`它应该已经是。但是我是否应该将其设置为成功，因为它在技术上仍然准确地指出了哪里需要和不再需要？`0x00``realloc``0x00``str`

简而言之：

1.  为什么我的编译器警告`str`可能悬空？
2.  如何删除警告？
3.  我`tmp`是否正确处理了我的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:00:16.570

只是为了说明我的观点：

```
#include <stdio.h>
#include <stdlib.h>

static inline void * myrealloc(void *org, size_t newsize)
{
char * new;
new = realloc(org, newsize);
if (!new) {
        fprintf(stderr, "\nError! Memory allocation failed!\n");
        free (org);
        return NULL;
        }
return new;
}

char *getstr(void)
{
#define STRBFF 256

    char *str = NULL;
    size_t size , used ;

    for (size=used=0; ; ) {
        int ch;
        if (used >=size) {
            str = myrealloc(str, size += STRBFF);
            if(!str) return NULL;
        }
        ch = getc(stdin);
        if (ch == EOF || ch == '\n' || ch == '\r') ch = 0;
        str[used++] = ch;
        if (!ch) break;
    }
    str = myrealloc(str, used);
    return str;
} 
```

现在，如果您的编译器支持内联，对 myrealloc() 的调用将被替换为与原始代码等效的代码，并且实际的 myrealloc() 函数实际上将消失。（检查反汇编的输出）。

# python - 任务调度服务

> ID：12289040
> 
> 赞同：1
> 
> 时间：2012-09-05T20:12:22.883
> 
> 标签：python, cron, scheduled-tasks, amqp

我们需要一个可以用来安排事件的服务。例如，我们可能有一项任务需要在 3 点钟运行（一次）或每 2 小时运行一次（多次）。最好每个任务都可以配置一个 AMQP 队列，它将发布到该队列。

我们可以通过创建 OS 计时器事件轻松实现这一点。我担心的是如果这项服务出现故障，如何恢复。如果它允许即时调度，我们可以使用 CRON。

我一直在寻找一种方法来避免重新发明轮子。如果还没有一个项目可以做到这一点，我们将创建一个。不过，这是一件很常见的事情，所以如果现在还没有人把它放在那里，我会感到惊讶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:16:34.360

[芹菜](http://celeryproject.org/)解决了这个问题。

[celery.schedules](http://packages.python.org/celery/reference/celery.schedules.html)让你定义周期性任务。你可以覆盖`is_due`做一些事情，比如[每月安排一次](https://stackoverflow.com/questions/4397530/how-do-i-schedule-a-task-with-celery-that-runs-on-1st-of-every-month)。您可以使用或[celery-beat](http://celery.github.com/celery/userguide/periodic-tasks.html)（我相信这是现在的标准方法）[安排任务在特定时间执行。](https://stackoverflow.com/questions/1990531/how-can-i-schedule-a-task-to-execute-at-a-specific-time-using-celery)另一种方法是使用[Task.apply_async](http://celery.github.com/celery/faq.html#module-celery.task.base)的参数。`periodic_task``eta`

# c# - 从 c# webservice 运行 powershell 命令

> ID：12289042
> 
> 赞同：0
> 
> 时间：2012-09-05T20:12:32.180
> 
> 标签：c#, powershell

我正在从 c# 运行一个 powershell 命令，我通过 web 服务调用它

这是命令`Set-MailboxAutoReplyConfiguration -identity`

这是我的代码。

```
string command = "Set-MailboxAutoReplyConfiguration -identity " + user; 
```

我通过网络服务传递的用户。

但是，当我运行它时，我得到了这个错误。

`System.Management.Automation.RemoteException: The term &#39;Set-MailboxAutoReplyConfiguration -identity babbey&#39; is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.`

我不确定 ' 在我的命令之前和之后来自哪里。但是，如果我取出 +user 部分，它工作正常。所以我的问题是命令变量中的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:08:57.533

如果使用`PowerShell.AddCommand`，则只需指定命令名称，例如`Set-MailboxAutoReplyConfiguration`. 然后在命令上调用 AddParameter 以添加参数，例如：

```
var ps = PowerShell.Create();
ps.AddCommand("Set-MailboxAutoReplyConfiguration");
ps.AddParameter("Identity", user); 
```

# javascript - 如何编写易于调试/维护的 JavaScript 事件处理程序

> ID：12289045
> 
> 赞同：3
> 
> 时间：2012-09-05T20:12:53.300
> 
> 标签：javascript, jquery

事件处理程序主要可以写成两种方式：

```
<input type="button" onclick="clickFunction()" /> 
```

或者

```
 $('#btnID).click( function(){ .. }); 
```

稍后必须有人调试/维护此代码。在第一种情况下，我们可以“检查元素”并快速找到执行的内容。在第二种情况下，我们必须找到正确的 Document Loader 代码才能找到它的分配位置。

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:20:54.060

推荐的方法是编写一个事件处理程序（第二种选择）。[有关这背后的原因，请查看这篇精彩文章](http://omniti.com/seeds/javascript-tips-for-non-specialists)中的“2\. 不要编写内联 Javascript” 。

此外，如果您希望编写更易于调试的代码，请考虑为您的回调命名。这样，它们将显示在带有函数名称而不是“未定义”的 js 错误中。

```
$('#btnID).click( function someEvent(){ .. }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:06:28.490

第二种方法是首选方法。这有几个原因：

首先，它将表示与逻辑分开。您不希望您的演示文稿 (HTML) 与您的逻辑混淆，因为事情变得难以维护。我喜欢有一个专门用于“绑定”的 JavaScript 区域，这样我就可以很容易地看到我的 JavaScript 逻辑与我的 HTML 挂钩的位置。但重要的是不要将其排除在 HTML 本身之外。

其次，它可以防止代码重复。内联方法通常会产生如下代码：

```
[ <a href="javascript:void(0)" onclick="closeWindow()">X</a> ]
...
<button onclick="closeWindow()">Close Window</button> 
```

问题是您最终会得到许多引用单个函数或方法的不同元素。如果该函数或方法发生任何变化，您将需要四处寻找所有参考。这违反了基本的反代码复制措施。做这样的事情要好得多

```
[ <a href="javascript:void(0)" class="closeWin">X</a> ]
...
<button class="closeWin">Close Window</button>
...
<script type="text/javascript">
    $(function() {
        $(".closeWin").on("click", closeWindow);
    });
</script> 
```

第三，它允许为某些用户操作设置一个阻塞点，您可以在其中添加断点以进行调试。当然，您可以在任何被调用的函数中执行此操作，但是拥有一个专用的绑定区域似乎可以加快速度。

第四，它允许多个绑定。例如，您可能有三个按钮，前两个执行一个操作，后两个执行另一个操作（因此第二个按钮执行两个操作）。您可以开始在 onclick 中抛出多行 JavaScript，如下所示：

```
<button onclick="one();">One</button>
<button onclick="one();two();">Two</button>
<button onclick="two();">Three</button> 
```

这看起来和它一样丑陋。您还可以使用一些笨拙的中间方法，如下所示：

```
<button onclick="one();">One</button>
<button onclick="oneAndTwo();">Two</button>
<button onclick="two();">Three</button> 
```

这也是超级丑陋的，将成为维护的噩梦。或者你可以做一些简单的绑定：

```
<button class="actionOne">One</button>
<button class="actionOne actionTwo">Two</button>
<button class="actionTwo">Three</button>
...
<script type="text/javascript">
    $(function() {
        $(".actionOne").on("click", one);
        $(".actionTwo").on("click", two);
    });
</script> 
```

更清洁，更易于维护。

现在，至于您对如何确定附加了哪些事件处理程序的担忧，我没有一个完美的答案，但我确实有一个很好的答案：获取 Google Chrome（这可能也适用于 Safari）。当您在 Google Chrome 中检查元素时，它会为您提供附加到该元素的事件处理程序列表。

如果您遵循我关于在 JavaScript 中添加“绑定”部分的建议，那么很容易缩小绑定到什么的范围。但是使用 Chrome 会更快更容易。欢迎您编写您认为最好的代码。尽管人们普遍认为远程绑定优于内联绑定。除此之外如何处理它们取决于您自己的经验和编程风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T21:00:05.673

除了上述所有出色的答案之外，我还发现了一个名为 Visual Event 的工具，它为事件处理程序提供了很多可见性。

[http://www.sprymedia.co.uk/article/Visual+Event](http://www.sprymedia.co.uk/article/Visual+Event)

# python - 多次定义一个函数

> ID：12289046
> 
> 赞同：0
> 
> 时间：2012-09-05T20:12:55.880
> 
> 标签：python

我有一个动态的 Python 服务，它将在每条记录的基础上定义函数，但我遇到了一些我无法弄清楚的事情。假设我已经设置了一个测试程序，如下所示：

```
func_str = """
def func():
  print "top"
"""
exec func_str

func_str = """
def func():
  print "bottom"
"""
exec func_str

func() 
```

这当然会 print `"bottom"`，因为第二次调用会`exec func_str`覆盖第一次调用。我很好奇引擎盖下会发生什么。是否以某种方式删除了第一个函数定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T20:14:46.960

编译函数体，然后将其分配给变量 name 下的本地命名空间`func`。

然后，当您运行第二`exec`条语句时，会以相同的名称存储一个新函数，并覆盖第一个。您可以通过以新名称存储对它的引用来保留第一个：

```
foo = func 
```

因此您以后仍可以将其称为`foo`：

```
foo() 
```

您还可以将其存储在字典、列表中或作为另一个对象的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:16:24.530

与此相同：

```
>>> a = 5
>>> print a
5
>>> a = 'hello'
>>> print a
'hello' 
```

换句话说，它只是将一个函数分配给一个名称（在本例中为*func*），并在随后的调用中将相同的名称*func*重新分配给另一个函数。

# asp.net-mvc-3 - 将用户名从 ViewBag 传递到淘汰视图模型

> ID：12289047
> 
> 赞同：1
> 
> 时间：2012-09-05T20:12:56.470
> 
> 标签：asp.net-mvc-3, razor, knockout.js, httpcontext

试图在这里拼凑一些碎片。

**第 1**部分：我知道我可以通过以下方式获取 MVC 中的当前用户名：

```
@HttpContext.Current.User.Identity.Name 
```

在我看来。

**第 2**部分：我在一个单独的 JS 文件中有一些 MVVM 样式的代码，相关部分如下所示：

```
var FeedbackViewModel = function () {
    var self = this;
    self.username = ko.observable("");
    self.feedbackText = ko.observable("");
    self.userNameCaptured = ko.computed(function () { return self.username().length > 3; }, self);
};

var feedbackViewModel = new FeedbackViewModel();
ko.applyBindings(feedbackViewModel, document.getElementById("feedbackModal")); 
```

**问题**：如何将当前用户名从 MVC3 传递到 Knockout viewModel，以便我可以观察并根据它采取行动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:47:32.320

我假设`feedbackViewModel`它被定义为一个全局变量，所以你可以简单地在 CSHTML 文件中添加一些代码来内联填充它：

```
<script type="text/javascript">
feedbackViewmodel.username("@HttpContext.Current.User.Identity.Name");
</script> 
```

另一种选择是将变量作为构造函数元素传递给 ViewModel 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:21:00.177

（我宁愿将此作为评论发布而不是回答，但不知何故在这里没有选择）

我过去也遇到过类似的问题（剃须刀和 javascript 之间的切换）。我发现的最佳答案是创建一个隐藏控件（#hiddenval 或 #username），然后可以由 JQuery 选择器“读取”。

这种方法每次都对我有用。它不优雅，可能会将信息暴露给获取 html 的用户......

如果不明显，@HttpContext.Current.User.Identity.Name 应该作为标记的一部分填充

# matlab - 在 Matlab 中以年、日、月和小时计算年龄

> ID：12289048
> 
> 赞同：1
> 
> 时间：2012-09-05T20:12:57.273
> 
> 标签：matlab

我对matlab很陌生。我想在matlab中以年、日、月和小时计算一个人的年龄？**用户以DD/MM/YYYY**格式输入他/她的出生日期。比如我输入我的出生日期为 27/11/1989 我怎么能找到我现在的年龄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:47:01.790

你应该看看这个页面： http: [//www.mathworks.nl/help/techdoc/matlab_prog/bspgcx2-1.html](http://www.mathworks.nl/help/techdoc/matlab_prog/bspgcx2-1.html)

我会使用[datenum](http://www.mathworks.nl/help/techdoc/ref/datenum.html)将输入转换为日期序列号。然后减去[now](http://www.mathworks.nl/help/techdoc/ref/now.html)，并使用[datestr](http://www.mathworks.nl/help/techdoc/ref/datestr.html)将结果转换回您想要的 'DD/MM/YYYY' 格式的可读字符串。

示例：[http ://www.mathworks.nl/support/solutions/en/data/1-3W2LZP/index.html?product=SL&solution=1-3W2LZP](http://www.mathworks.nl/support/solutions/en/data/1-3W2LZP/index.html?product=SL&solution=1-3W2LZP)

完整代码（阅读并理解它，看看我提供的链接！）

```
str='27/11/1989';

birth_numdate=datenum(str,'DD/mm/YYYY');
myage=datestr(now-birth_numdate,'DD/mm/YYYY'); 
```

如您所见，您应该使用`'mm'`代替`'MM'`('MM' 对应于 'minutes' 而不是 'months'。

或者你可以使用 datevec，它会给你一个包含 #years、months、days、hours、minutes 和 seconds 的向量：

```
vec_myage=datevec(now-birth_numdate); 
```

这在我的电脑上导致：

```
ans =
   23.0000    8.0000    9.0000   22.0000   52.0000    7.1783 
```

现在去看看我住在哪个时区；）

# python - 导入 init_db（烧瓶教程）

> ID：12289049
> 
> 赞同：2
> 
> 时间：2012-09-05T20:13:09.297
> 
> 标签：python, import, flask

我已经通过烧瓶教程（http://flask.pocoo.org/docs/tutorial/introduction/）

现在我遇到错误，你能帮帮我吗？:)

在 github 上，它在自述文件中说...（https://github.com/mitsuhiko/flask/tree/master/examples/flaskr/）

```
fire up a python shell and run this:

from flaskr import init_db; init_db() 
```

所以我打开我的python shell并输入它......唯一的问题是我收到一个导入错误，说它找不到flaskr......

如果我尝试在本地运行 flaskr.py 文件，我就会得到这个

```
sqlite3.OperationalError OperationalError: unable to open database file 
```

总的来说，我对这个和 python 真的很陌生，所以任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:16:13.753

您是否创建了数据库文件？

在[flaskr.py](https://github.com/mitsuhiko/flask/blob/master/examples/flaskr/flaskr.py)的第 19 行，给出了数据库的路径。

```
DATABASE = '/tmp/flaskr.db' 
```

该文件需要存在。

# php - Facebook 应用程序通知 PHP

> ID：12289057
> 
> 赞同：0
> 
> 时间：2012-09-05T20:13:36.710
> 
> 标签：php, facebook

我一直在阅读 facebook 开发人员文档，我有点困惑，我想重新吸引大量已经过时的用户，让他们稍微了解一下他们在我们的应用程序上的不活动状态......

这样做的当前“最佳实践/最新方法”是什么，似乎是通过通知 API？ [https://developers.facebook.com/docs/app_notifications/#imp](https://developers.facebook.com/docs/app_notifications/#imp)

如果我是正确的，有人可以给我一些关于 PHP 实现的指示，本质上它将是一个 cron 每月/每两周运行一次，通过一段时间没有登录的用户来刺激他们。

谢谢

马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:38:25.033

好吧，因为没有人对此做出回应，所以我从文档中找到了一个简单的工作解决方案。要通知用户，他们必须授权您的应用。

```
$book = new Facebook((array(
'appId'  => 'XXXXXX',
'secret' => 'XXXXXX',
'grant_type' => 'client_credentials')
 ));

$vars = array(
"access_token" => $book->getAppId().'|'.$book->getApiSecret(),
"href" => "index.php", 
"template" => "Some text to send up to 180 characters",
"ref" => "This is what shows up in insights so you can track responses"
);

$post = $book->api('/' . $userid . '/notifications/', 'post', $vars); 
```

您可以通过用 {} 将 facebook 用户 ID 括起来将用户名插入模板，即：“{12345} 想和你玩一些游戏。” . 如果 uid 引用的用户尚未验证您的应用程序，它将引发异常。

Href 会自动将您的画布 url 插入到它的前面，因此无需完整的域/路径。

ref 用于见解界面，因此您可以查看哪些通知正在产生流量！

就是这样，重新吸引那些似乎已经消失的用户非常简单！

干杯

马克

# javascript - 从一个输入计算年龄并更新另一个

> ID：12289064
> 
> 赞同：1
> 
> 时间：2012-09-05T20:14:12.873
> 
> 标签：javascript, jquery

我知道我必须在这里遗漏一些简单的东西，但我希望得到一些帮助。

首先，HTML：

```
<input type="text" name="dob" />
<input id="age" type="text" name="age" /> 
```

和 Javascript

```
$('input[name=dob]').change(getAge);
$('input[name=age]').change(getAge);
function getAge() {
    var today = new Date();
    var birthDate = new Date($('input[name=dob]').val());
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    $('#age').val(age);
 }; 
```

这对我不起作用。当我在“dob”字段中输入日期时，“age”字段返回 NaN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:36:37.840

我假设您没有得到正确的年龄（或根本没有任何数字回报）。几点建议：

1.  你有一个单引号挂在代码块的末尾。删除它，因为它可能会导致未捕获的错误。

2.  您似乎没有强制或验证“dob”输入的任何格式。Date 对象只接受特定类型的输入。找出您想要的，然后执行它（向用户发送消息并在使用前进行检查）。

3.  在你的“if”语句的第二部分，使用括号来确保它正在检查你想要的东西。我相信你写它的方式会导致这个检查：`( (m === 0) && today.getDate() ) < birthDate.getDate()`. 试试这个：`(m === 0) && ( today.getDate() < birthDate.getDate() )`。我希望这会有所帮助。

# processing - 处理：从 1.51 迁移到 2.0b1 - 视频库问题

> ID：12289066
> 
> 赞同：1
> 
> 时间：2012-09-05T20:14:21.477
> 
> 标签：processing

我正在尝试迁移到新的处理，因为我在生活中经常使用（这是一个更新，所以我继续......）。

这是我的设置：

*   Mac OS X 10.7.3
*   处理 2.0b1（以 32 位模式启动程序）

* * *

```
$ java -version
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11-402-11D50b)
Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02-402, mixed mode) 
```

我的设置曾经在 Processing 1.5 上工作 - 我现在看到的所有问题都是我在使用该版本时没有遇到的。

第一的：

库/视频/捕获中的任何示例都不起作用。有时它会崩溃，有时它会冻结。

AsciiVideo 之后的控制台日志：

> DVFreeThread - CFMachPortCreateWithPort hack = 0xc083b7c0，fPowerNotifyPort= 0xc085a0f0 DVFreeThread - CFMachPortCreateWithPort hack = 0xc0809a60，fPowerNotifyPort= 0xc0808080 DVFreeThread - CFMachPortCreateWithPort hack = 0xc08159a0，fPowerNotifyPort= 0xc08

我也使用 GSVideo，并尝试从那里运行 AsciiVideo。

控制台错误：

> GSVideo 版本：1.0.0 19200 位置 0x0 eip=0x97cee3ba 的内存访问无效

并引发了一个错误窗口

> 进程：java [25673] 路径：/usr/bin/java 标识符：com.apple.javajdk16.cmd 版本：1.0 (1.0) 代码类型：X86 (Native) 父进程：JavaApplicationStub [24849]
> 
> 插件路径：/var/folders/*/libjogl_desktop.jnilib 插件标识符：libjogl_desktop.jnilib 插件版本：??? （？？？）
> 
> 日期/时间：2012-09-05 17:04:08.993 -0300 操作系统版本：Mac OS X 10.7.3 (11D50b) 报告版本：9
> 
> ...

我使用 SimpleOpenNI、GSVideo、GLgraphics、SurfaceMapper... 我昨天决定迁移，以便在渲染视频时使用相同的 CPU 来提高性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:02:30.917

我觉得这个问题最好在[处理论坛](http://forum.processing.org/)上问。出现此错误的原因是视频库是在处理 2 中从头开始重写的，并且它基于 GSVideo。查看处理 2.0b3 中的视频示例。此外，SurfaceMapper 目前无法与 Processing 2.0 一起使用，我会调查一下。

最好的问候，乔纳斯，伊克斯康

# linq - 实体框架似乎不必要地加入同一个表两次

> ID：12289070
> 
> 赞同：12
> 
> 时间：2012-09-05T20:14:38.290
> 
> 标签：linq, entity-framework

**更新**这可能已经修复：[http ://entityframework.codeplex.com/workitem/486](http://entityframework.codeplex.com/workitem/486)

...

针对我的实体的一个相当简单的 LINQ 语句会导致不必要的复杂 SQL。稍后会详细介绍，这是设置：

**表**

*出版物*

*   出版物 ID (pk)
*   TopicId (fk 到一个主题表)
*   ReceiptCount（针对查询性能进行了非规范化）
*   插入日期

*收据*

*   收据 ID (pk)
*   PublicationId (fk 到上表)
*   插入日期

**LINQ**

```
var query = from r in context.Receipts.Include("Publication")
            where r.DateInserted < lagDate
            && r.ReceiptId > request.AfterReceiptId
            && r.Publication.TopicId == topicEntity.TopicId
            && r.Publication.ReceiptCount > 1
            select r; 
```

**SQL**

```
exec sp_executesql N'SELECT TOP (25) 
[Project1].[ReceiptId] AS [ReceiptId], 
[Project1].[PublicationId] AS [PublicationId], 
[Project1].[DateInserted] AS [DateInserted], 
[Project1].[DateReceived] AS [DateReceived], 
[Project1].[PublicationId1] AS [PublicationId1], 
[Project1].[PayloadId] AS [PayloadId], 
[Project1].[TopicId] AS [TopicId], 
[Project1].[BrokerType] AS [BrokerType], 
[Project1].[DateInserted1] AS [DateInserted1], 
[Project1].[DateProcessed] AS [DateProcessed], 
[Project1].[DateUpdated] AS [DateUpdated], 
[Project1].[PublicationGuid] AS [PublicationGuid], 
[Project1].[ReceiptCount] AS [ReceiptCount]
FROM ( SELECT 
    [Extent1].[ReceiptId] AS [ReceiptId], 
    [Extent1].[PublicationId] AS [PublicationId], 
    [Extent1].[DateInserted] AS [DateInserted], 
    [Extent1].[DateReceived] AS [DateReceived], 
    [Extent3].[PublicationId] AS [PublicationId1], 
    [Extent3].[PayloadId] AS [PayloadId], 
    [Extent3].[TopicId] AS [TopicId], 
    [Extent3].[BrokerType] AS [BrokerType], 
    [Extent3].[DateInserted] AS [DateInserted1], 
    [Extent3].[DateProcessed] AS [DateProcessed], 
    [Extent3].[DateUpdated] AS [DateUpdated], 
    [Extent3].[PublicationGuid] AS [PublicationGuid], 
    [Extent3].[ReceiptCount] AS [ReceiptCount]
    FROM   [dbo].[Receipt] AS [Extent1]
    INNER JOIN [dbo].[Publication] AS [Extent2] ON [Extent1].[PublicationId] = [Extent2].[PublicationId]
    LEFT OUTER JOIN [dbo].[Publication] AS [Extent3] ON [Extent1].[PublicationId] = [Extent3].[PublicationId]
    WHERE ([Extent2].[ReceiptCount] > 1) AND ([Extent1].[DateInserted] < @p__linq__0) AND ([Extent1].[ReceiptId] > @p__linq__1) AND ([Extent2].[TopicId] = @p__linq__2)
)  AS [Project1]
ORDER BY [Project1].[ReceiptId] ASC',N'@p__linq__0 datetime,@p__linq__1 int,@p__linq__2 int',@p__linq__0='2012-09-05 19:39:21:510',@p__linq__1=4458824,@p__linq__2=90 
```

**问题**

出版物被加入两次：

1.  LEFT OUTER JOIN 因为`.Include("Publication")`
2.  INNER JOIN 因为`where`.

如果我从 SQL 中完全删除 [Extent2]，并将 WHERE 位更改为使用 [Extent3]，我会得到相同的结果。由于我没有在我的实体上使用延迟加载，我必须`.Include("Publication")`......有什么解决方案吗？

我使用的是 EF4，但从 NuGet 获取 EF5 以查看它是否已修复，但它产生了相同的结果（尽管我不知道如何判断我的 EDMX 是否真的在使用 EF5）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:22:40.383

但是，有一种解决方法。它可能不是最优雅的解决方案，但它完全符合您的要求；它只生成一个连接。

改变：

```
var query = from r in context.Receipts.Include("Publication")    
            where r.DateInserted < lagDate 
            && r.ReceiptId > request.AfterReceiptId 
            && r.Publication.TopicId == topicEntity.TopicId 
            && r.Publication.ReceiptCount > 1 
            select r; 
```

成为：

```
var query = from r in context.Receipts
            join pub in context.Publication on r.PublicationId equals pub.PublicationId
            where r.DateInserted < lagDate 
            && r.ReceiptId > request.AfterReceiptId 
            && pub.TopicId == topicEntity.TopicId 
            && pub.ReceiptCount > 1 
            select new {
                Receipt = r,
                Publication = pub
            }; 
```

请注意，我们已经删除了包含并且我们不再使用 r.Publication.?? 在 where 子句中。相反，我们使用的是 pub.??

现在，当您遍历查询时，您将看到 r.Publication 不为空：

```
foreach ( var item in query)
{
    //see that item.Publication is not null
    if(item.Receipt != null && item.Receipt.Publication != null)
    {
        //do work based on a valid Publication
    }
    else
    {
        //do work based on no linked Publication
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-19T11:17:24.797

`let`通过使用临时变量（例如， pub = r.Publication）可以避免这种行为。

```
var query = from r in context.Receipts
            let pub = r.Publication // using a temp variable
            where r.DateInserted < lagDate
            && r.ReceiptId > request.AfterReceiptId
            && pub.TopicId == topicEntity.TopicId
            && pub.ReceiptCount > 1
            select new { r, pub }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:24:01.103

我将通过更改以下代码来优化前人的答案，这消除了加入的需要，因此您不必知道需要加入哪些列，也不必在加入条件发生更改时更改 LINQ。这应该是不必要的，但 MS 现在并不专注于修复他们的 sql 代码生成。

```
 var query = from pub in context.Publications
                from r in pub.Reciepts
                where r.DateInserted < lagDate 
                && r.ReceiptId > request.AfterReceiptId 
                && pub.TopicId == topicEntity.TopicId 
                && pub.ReceiptCount > 1 
                select new {
                       Receipt = r,
                       Publication = pub
                }; 
```

# c# - 特殊字符编码

> ID：12289073
> 
> 赞同：0
> 
> 时间：2012-09-05T20:14:53.860
> 
> 标签：c#, json, special-characters

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:29:36.613

# c++ - 带 delim 的 getline() 无法按预期工作

> ID：12289076
> 
> 赞同：0
> 
> 时间：2012-09-05T20:15:00.000
> 
> 标签：c++, console-application, getline, split

我试图用逗号分隔这个字符串作为分隔符。我输入了一个字符串“Smith,Erdos,William”，它只输出“William”，而不是 Smith 和 Erdos。这里一定有什么问题，我只是看不到，有人可以帮忙吗？

```
#include <iostream>
#include <string>
#include <vector>
#include <sstream>

int main() {
    int numScenarios(0);
    int numPapers(0);
    int numWriters(0);
    std::vector<std::string> paperTitles (1);
    std::vector<std::string> paperAuthors (1);
    std::vector<std::string> splitAuthors (1);
    std::string token;
    std::string input;
    std::cin >> numScenarios;
    std::cin >> numPapers >> numWriters; 
    for (int i(0); i < numPapers; ++i) {
        std::getline(std::cin,input);
        std::istringstream iss(input);
        while(getline(iss,token,','));
        {
            std::cout << token << std::endl;
        }
        //paperTitles.push_back(input);
        //input = '\0';
    }
    for (int i(0); i < numWriters; ++i) {
        getline(std::cin,input);
        paperAuthors.push_back(input);
        input = '\0';
    }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T20:19:59.240

`while(getline(iss,token,',')); // <== look closely`

# java - If else seems to be ignored in my java application

> ID：12289086
> 
> 赞同：0
> 
> 时间：2012-09-05T20:15:54.403
> 
> 标签：java

I just started programming in java and i am creating a simple waiting list. it al seems to work well but i decided to include a if else construction to check the textfield not beeing empty. the problem is that it seems to be ignored because i don't get a error or something.. and i googled alot for the if else example and i can't solve the problem somehow.. what am i doing wrong? below you can find the relevant code. Thanks in advance.

```
public void actionPerformed(ActionEvent e) {

    // check if veld1 is filled in.
    if ( veld1 == null || veld1.equals( "" ) ) { 
        // give error
        System.out.println("U heeft niets ingevuld in veld1");
    }
    else {
        veld4.setText( veld3.getText() );
        veld3.setText( veld2.getText() );
        veld2.setText( veld1.getText() );
        textveld1.append( veld4.getText() + "\n" );
        veld1.setText("");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T20:18:24.827

看来 veld1 不是字符串，而是一些 Swing 控件。你可能想做

```
if(veld1.getText() == null || veld1.getText().equals( "" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:18:41.547

如果`veld1`持有 JTextField，您可能希望将语句更改为`veld1 == null || veld1.getText() == null || veld1.getText().equals( "" )`，因为在您当前的代码中，您检查字段本身是否存在，而不是其内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:19:21.303

很难在没有看到其余部分的情况下授予，但`veld1.equals("")`看起来很可疑。您正在与`veld1`空字符串进行比较，但`veld1`看起来像一个组件。也许你的意思是`veld1.getText().equals("")`（并且，同样，`veld1.getText() == null`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:19:13.450

veld1.equals("") 和 veld1.getText().equals("") 是不一样的，第一个是将 veld1 对象与一个空字符串进行比较，会一直为 false。

# javascript - 如何将 css 类添加到 使用 jQuery 包含给定 ID 的元素？

> ID：12289087
> 
> 赞同：-5
> 
> 时间：2012-09-05T20:16:08.013
> 
> 标签：javascript, jquery

我想在`<li>`ID 所在的位置添加一个活动类，例如：

```
<li><a href="" id="foo">text</a></li> 
```

如何在其中添加一个`<li>`类`#foo`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:18:01.893

```
$('#foo').parent('li').addClass("yourclass") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:18:35.000

```
$("#foo").closest("li").addClass("bar"); 
```

如果您的`<a>`标签可能包含在其他元素中，而不是 , 的直接子元素，`<li>`则将`parent('li')`不起作用：

[http://jsfiddle.net/PMfVK/](http://jsfiddle.net/PMfVK/)

HTML

```
<ul>
    <li><div><a id="foo">Foo</a></div></li>
    <li><div><a id="bar">Bar</a></div></li>
</ul>​ 
```

JS

```
$("#foo").closest("li").addClass("foo"); // this will correctly grab the li
$("#bar").parent("li").addClass("bar");​  // this will grab nothing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:21:25.523

```
$("li").has("#foo").addClass("yourclass") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T20:18:27.617

```
$('#foo').parent('li').addClass('active'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T20:20:03.420

首先`foo`使用[ID 选择器选择](http://api.jquery.com/id-selector/)具有 ID 的元素。然后，使用[`.parents`](http://api.jquery.com/parent/)选择该元素的`<li>`父元素。用于[`.eq(0)`](http://api.jquery.com/eq/)确保仅找到最近的父项。最后，用于[`addClass`](http://api.jquery.com/addClass/)将类添加到`<li>`元素。

由于我们使用*的是 parent ，* 即使具有`foo`ID 的元素嵌套在下面的几个元素中，`<li>`它仍然会被选中。

```
$("#foo").parents("li").eq(0).addClass("bar");​​ 
```

[请参阅我在 jsFiddle 上的示例。](http://jsfiddle.net/adamzr/7SR3A/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T20:25:33.450

```
$('a[id]').closest('li').addClass('active'); 
```

[演示](http://jsfiddle.net/zZ2D4/)

# php - PHP Sqlite 和 PDO 插入

> ID：12289093
> 
> 赞同：1
> 
> 时间：2012-09-05T20:16:30.743
> 
> 标签：php, sql, sqlite, insert, pdo

我正在使用 SQLite 和 PHP 在我的 Mac 上开发一个简单的资金跟踪网络应用程序。我在使用带有 insert 语句的参数将数据插入到 sqlite db 时遇到问题。这不是权限问题，因为我已经能够编写静态插入语句并且它可以正常执行。这是我的代码：

```
try
{
$databaseins = new PDO("sqlite:/datastores/trackmoney.db")  or die("Could not open database"); 
$databaseins->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$sql = "INSERT INTO Transactions 
    (TransactionID, TransactionName, Expense, Description, TransactionDate, DateEntered, RecordedBy) 
VALUES (:TransactionID,:TransactionName,:Expense,:Description,:TransactionDate,:DateEntered,:RecordedBy);";
// below is a static insert that works
//$sql = "INSERT INTO Transactions (TransactionID, TransactionName, Expense, Description, TransactionDate, DateEntered, RecordedBy) VALUES ('$guidTransactionID','Test',12.12,'test','3/2/2012','12/12/2012',1);";
$q = $databaseins->prepare($sql);
$q->bindParam(':TransactionID', $guidTransactionID, SQLITE3_TEXT);
$q->bindParam(':TransactionName', $strTransName, SQLITE3_TEXT);
$q->bindParam(':Expense', $fltTransAmount, SQLITE3_FLOAT);
$q->bindParam(':Description', $strTransDescrip, SQLITE3_BLOB);
$q->bindParam(':TransactionDate', $strDateOfTrans, SQLITE3_TEXT);
$q->bindParam(':DateEntered', "1/1/2013", SQLITE3_TEXT);
$q->bindParam(':RecordedBy', 1, SQLITE3_INTEGER);

$count = $q->execute() or die($databaseins->errorInfo());
print("<b>" + $count + "</b>");
$databaseins = null;
}
catch(PDOException $e)
{
echo $e->getMessage();//this getMessage throws an exception if any 
} 
```

我没有收到任何错误消息。请注意，所有变量的值都已设置并具有值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:39:36.183

感谢 andrewsi 和 JvdBerg 的帮助。我的问题的解决方法是使用 bindValue 而不是 bindParam 并将 SQLITE3_BLOB 更改为 SQLITE3_TEXT。

# git - 如何用'--ours'克服git合并历史模糊/混淆？

> ID：12289094
> 
> 赞同：1
> 
> 时间：2012-09-05T20:16:31.727
> 
> 标签：git, merge, revision-history

我想知道是否有任何工具可以提供更详细的文件历史记录，尤其是在`our`保留更改的合并方面。这个问题最好用一个例子来解释。

假设我对`master`一个`feature`分支进行了冲突的更改：

```
git checkout master
<made some change to file.txt>
git commit -a -m "Change on master"
git checkout -b feature
<made conflicting change to file.txt>
git commit -a -m "Change on feature" 
```

如果我合并`feature`并`master`保留我的更改，`git checkout --ours file.txt`我会得到不同的结果，而`file.txt`不是我要合并`master`到`feature`（然后合并`feature`到`master`快进`master`）。（我理解`--ours`有效的合并也可能在不经意间用`mergetool`.）

在这两种情况下使用`git log -p`，合并提交不会报告任何更改`file.txt`，但其内容在不同的情况下是不同的。现在`file.txt`的变更历史被混淆了，很难知道是哪个版本`master`。我可以运行`git log -- file.txt`，但此解决方案无法扩展，并且要求您已经知道哪些文件是错误合并的一部分。

如果有人做出错误的合并决定，则很难追踪哪些文件保持不变。否则，如果合并对文件进行了更改，则很容易看到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:47:39.243

如果冲突得到解决，它们只是得到了错误的解决（根据您对此答案的评论），查看`file.txt`两个分支之间差异的一种方法是`git diff`：

```
git diff master feature -- file.txt 
```

如果您在`git diff master feature`没有任何文件规范的情况下发布，您将看到所有 repo 文件中的所有差异。的创造性应用程序`git diff`将允许您隔离几乎任何您想要的更改。

否则，您最好的选择可能是合并提交本身。默认情况下，提交消息将输出一个冲突部分，我建议不要删除它。

# c# - 如何使用带有 MVVM 的 WPF 应用程序中的 FolderBrowserDialog

> ID：12289100
> 
> 赞同：5
> 
> 时间：2012-09-05T20:16:57.700
> 
> 标签：c#, .net, wpf, mvvm, folderbrowserdialog

我正在尝试使用[`FolderBrowserDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)我的 WPF 应用程序中的 - 没什么特别的。我不太关心它是否具有 Windows 窗体的外观。

我找到了一个有合适答案的问题（[How to use a FolderBrowserDialog from a WPF application](https://stackoverflow.com/questions/315164/how-to-use-a-folderbrowserdialog-from-a-wpf-application)），但我使用的是 MVVM。

[**这**](https://stackoverflow.com/a/315436/1583019)是我“实现”的答案，除了我无法获取窗口对象而且我只是在`ShowDialog()`没有任何参数的情况下调用。

问题是这样的：

```
var dlg = new FolderBrowserDialog();
System.Windows.Forms.DialogResult result = dlg.ShowDialog(this.GetIWin32Window()); 
```

在我`ViewModel`那里，我`this`没有`GetIWin32Window()`办法获取 Window 上下文。

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:46:50.920

首先，您可以使用不需要窗口的 ShowDialog 签名。

```
var dlg = new FolderBrowserDialog();
DialogResult result = dlg.ShowDialog(); 
```

其次，您可以将应用程序的主窗口作为拥有窗口发送。

```
var dlg = new FolderBrowserDialog();
DialogResult result = dlg.ShowDialog(Application.Current.MainWindow.GetIWin32Window()); 
```

第二个选项可能不被认为是非常 MVVMish。

请参阅@ [Dr. ABT](https://stackoverflow.com/users/303612/dr-abt)在[此问题](https://stackoverflow.com/questions/7519171/mvvm-access-other-views-element-from-viewmodel)中的答案，了解将指向您的 View 的指针注入您的 ViewModel 的方法（不确定这是一个好主意还是坏主意，但我不会让它阻止我）使用这种技术，如果您确实想让该视图成为 FolderBrowserDialog 的所有者，您将可以在您的 VM 中访问相应的视图。

@ChrisDD 关于定义接口和包装 FolderBrowserDialog 是正确的。我们就是这样做的：

```
 public interface IFolderBrowserDialog
  {
    string Description { get; set; }
    Environment.SpecialFolder RootFolder { get; set; }
    string SelectedPath { get; set; }
    bool ShowNewFolderButton { get; set; }
    bool? ShowDialog();
    bool? ShowDialog(Window owner);
  }

  //Decorated for MEF injection
  [Export(typeof(IFolderBrowserDialog))]
  [PartCreationPolicy(CreationPolicy.NonShared)]
  internal class WindowsFormsFolderBrowserDialog : IFolderBrowserDialog
  {
    private string _description;
    private string _selectedPath;

    [ImportingConstructor]
    public WindowsFormsFolderBrowserDialog()
    {
      RootFolder = System.Environment.SpecialFolder.MyComputer;
      ShowNewFolderButton = false;
    }

    #region IFolderBrowserDialog Members

    public string Description
    {
      get { return _description ?? string.Empty; }
      set { _description = value; }
    }

    public System.Environment.SpecialFolder RootFolder { get; set; }

    public string SelectedPath
    {
      get { return _selectedPath ?? string.Empty; }
      set { _selectedPath = value; }
    }

    public bool ShowNewFolderButton { get; set; }

    public bool? ShowDialog()
    {
      using (var dialog = CreateDialog())
      {
        var result = dialog.ShowDialog() == DialogResult.OK;
        if (result) SelectedPath = dialog.SelectedPath;
        return result;
      }
    }

    public bool? ShowDialog(Window owner)
    {
      using (var dialog = CreateDialog())
      {
        var result = dialog.ShowDialog(owner.AsWin32Window()) == DialogResult.OK;
        if (result) SelectedPath = dialog.SelectedPath;
        return result;
      }
    }
    #endregion

    private FolderBrowserDialog CreateDialog()
    {
      var dialog = new FolderBrowserDialog();
      dialog.Description = Description;
      dialog.RootFolder = RootFolder;
      dialog.SelectedPath = SelectedPath;
      dialog.ShowNewFolderButton = ShowNewFolderButton;
      return dialog;
    }
  }

  internal static class WindowExtensions
  {
    public static System.Windows.Forms.IWin32Window AsWin32Window(this Window window)
    {
      return new Wpf32Window(window);
    }
  }

  internal class Wpf32Window : System.Windows.Forms.IWin32Window
  {
    public Wpf32Window(Window window)
    {
      Handle = new WindowInteropHelper(window).Handle;
    }

    #region IWin32Window Members

    public IntPtr Handle { get; private set; }

    #endregion
  } 
```

然后我们在要使用FolderBrowser 的地方创建VM/Command 导入IFolderBrowserDialog。在应用程序中，IFolderBrowserDialog.ShowDialog 显示对话框。在单元测试中，我们模拟 IFolderBrowserDialog 以便我们可以验证它是否使用正确的参数调用和/或将选定的文件夹发送回 sut 以便测试可以继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:18:21.627

如果你确定要使用FolderBrowserDialog，我会使用这种设计。

首先，在您的视图上创建一个 DependencyProperty 以公开其句柄。

```
public static readonly DependencyProperty WindowHandleProperty =
    DependencyProperty.Register("WindowHandle", typeof(System.Windows.Forms.IWin32Window), typeof(MainWindow), new PropertyMetadata(null));

// MainWindow.cs
public System.Windows.Forms.IWin32Window WindowHandle
{
    get { return (System.Windows.Forms.IWin32Window)GetValue(WindowHandleProperty); }
    set { SetValue(WindowHandleProperty, value); }
} 
```

现在，当您的窗口加载时，您可以使用链接到的问题中提供的扩展名检索句柄：

```
// MainWindow.cs
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    var binding = new Binding();
    binding.Path = new PropertyPath("WindowHandle");
    binding.Mode = BindingMode.OneWayToSource;
    SetBinding(WindowHandleProperty, binding);

    WindowHandle = this.GetIWin32Window();
} 
```

因此，您使用“WindowHandle”属性将单向绑定到源。因此，如果您的 ViewModel 具有 WindowHandle 属性，它将与相关视图的有效 IWin32Handle 保持同步：

```
// ViewModel.cs
private System.Windows.Forms.IWin32Window _windowHandle; 
public System.Windows.Forms.IWin32Window WindowHandle
{
    get
    {
        return _windowHandle;
    }
    set
    {
        if (_windowHandle != value)
        {
            _windowHandle = value;
            RaisePropertyChanged("WindowHandle");
        }
    }
} 
```

这是一个很好的解决方案，因为您没有硬编码一个 ViewModel 来与一个特定的 View 配对。如果您使用具有相同 ViewModel 的多个视图，它应该可以正常工作。如果您创建了一个新视图但您没有实现 DependencyProperty，它只会使用空句柄进行操作。

**编辑：**

附带说明一下，您是否实际测试过不提供 IWin32Owner 参数？对我来说，它仍然会自动作为应用程序的模式对话框打开，并阻止用户与应用程序的所有窗口进行交互。你还需要它做其他事情吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T10:37:21.923

MVVM + WinForms FolderBrowserDialog 作为行为

```
public class FolderDialogBehavior : Behavior<Button>
{
    public string SetterName { get; set; }

    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.Click += OnClick;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.Click -= OnClick;
    }

    private void OnClick(object sender, RoutedEventArgs e)
    {
        var dialog = new FolderBrowserDialog();
        var result = dialog.ShowDialog();
        if (result == DialogResult.OK && AssociatedObject.DataContext != null)
        {
            var propertyInfo = AssociatedObject.DataContext.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public)
            .Where(p => p.CanRead && p.CanWrite)
            .Where(p => p.Name.Equals(SetterName))
            .First();

            propertyInfo.SetValue(AssociatedObject.DataContext, dialog.SelectedPath, null);
        }
    }
} 
```

用法

```
 <Button Grid.Column="3" Content="...">
            <Interactivity:Interaction.Behaviors>
                <Behavior:FolderDialogBehavior SetterName="SomeFolderPathPropertyName"/>
            </Interactivity:Interaction.Behaviors>
     </Button> 
```

[博文： http](http://kostylizm.blogspot.ru/2014/03/wpf-mvvm-and-winforms-folder-dialog-how.html) ://kostylizm.blogspot.ru/2014/03/wpf-mvvm-and-winforms-folder-dialog-how.html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:50:30.810

MVVM方式：

为 FolderBrowserDialog 定义一个新接口。创建一个新类并实现该接口。（实现是通过实际的 FolderBrowserDialog 类完成的）。

这样您就不会将 MVVM 绑定到特定的实现，并且可以稍后测试实际的逻辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T23:10:16.670

要处理 mvvm 模式中的任何类型的对话内容，您应该使用一种 Dialog-Service。在[这篇文章](https://stackoverflow.com/questions/6595312/creating-an-mvvm-friendly-dialog-strategy)中，您将找到一些使用这种方法的提示。

将对话内容放入服务中可以保持 mvvm 模式不变。该服务负责对话的所有创建并提供结果。视图模型只是调用方法并订阅服务提供的事件。

如果您对服务（接口）使用依赖注入，您将获得通过模拟保持解决方案可测试的优势。或者，如果有 wpf，您可以替换表单文件夹浏览器对话框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-27T14:41:55.463

在这种情况下使用行为很方便。添加一个依赖属性，您可以使用它将对话框中的值绑定到视图模型中的属性。

```
public class FolderBrowserDialogBehavior : Behavior<System.Windows.Controls.Button>
{
    /// <summary>
    /// Dependency Property for Path
    /// </summary>
    public static readonly DependencyProperty PathProperty =
        DependencyProperty.Register(nameof(Path), typeof(string), typeof(FolderBrowserDialogBehavior));

    /// <summary>
    /// Property wrapper for Path
    /// </summary>
    public string Path
    {
        get => (string) this.GetValue(PathProperty);
        set => this.SetValue(PathProperty, value);
    }

    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.Click += OnClick;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.Click -= OnClick;
    }

    /// <summary>
    /// Triggered when the Button is clicked.
    /// </summary>
    private void OnClick(object sender, RoutedEventArgs e)
    {
        using (var dialog = new FolderBrowserDialog())
        {
            try
            {
                if (dialog.ShowDialog() == DialogResult.OK)
                {
                    FilePath = dialog.SelectedPath;
                }
            }
            catch (Exception ex)
            {
                //Do something...
            }
        }
    }
} 
```

在视图中；

```
<Button ...>
    <i:Interaction.Behaviors>
        <behaviors:FolderBrowserDialogBehavior FilePath="{Binding Path=SomePropertyInViewModel, Mode=TwoWay}"/>
    </i:Interaction.Behaviors>
</Button> 
```

# delphi - DataSnap 将入站请求限制为 16k

> ID：12289101
> 
> 赞同：2
> 
> 时间：2012-09-05T20:17:03.283
> 
> 标签：delphi, delphi-xe2, indy, datasnap, indy10

我用 Delphi XE2 构建了一个 DataSnap 服务器，它实现了`TDSHTTPService`. 当入站请求进来时，`TIdIOHandler.InitComponent`在线程中调用，然后将执行交给 in 调用的方法`TServerMethods`。我在服务器中没有任何 Indy 组件，因此 DataSnap 在后台使用 Indy 10。

*`.InitComponent()`*将 IO 处理程序的*最大行长度*设置为硬编码值 ( `FMaxLineLength := IdMaxLineLengthDefault;`)，即*16384*。我找不到增加价值的方法。我什至尝试将*IdIOHandler 单元*复制到项目文件夹并更改常量值。但它仍然会从 Indy 10 构建中获取*IdIOHandler.dcu*，并忽略我的项目文件夹中复制的文件。我还尝试向`TIdIOHandlerStream`服务器项目添加一个组件并将其设置`MaxLineLength`为无济于事。

*   计划 A =**正确**设置`MaxLineLength`DataSnap 服务器中的值。
*   计划 B = 以某种方式将修改后的`IdIOHandler.pas`文件编译到我的项目中。

这些都可能吗？我已经为此工作了几个小时，在我的所有搜索中都找不到类似的东西，而且似乎无法通过实验取得任何进展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T14:42:28.453

在 Delphi XE3 中重新编译所有 Indy 包后，将 IdMaxLineLengthDefault 常量更改为 512 * 1024，然后按预期工作，我开始寻找解决此问题的最简单方法。所以，我发现这是一个简单的解决方法。

您可以为 DataSnap REST Server 项目的主单元中使用的 TIdHTTPWebBrokerBridge 对象的 OnContextCreated 事件实现一个过程。在这种情况下，将收到 AContext 对象，该对象是为对 DataSnap 服务器的每个请求创建的。因此，在此过程的代码中，您只需覆盖此属性的默认值，如下所示：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  FServer := TIdHTTPWebBrokerBridge.Create(Self);

  {Here you assign the new procedure for this event}
  FServer.OnContextCreated:= OnContextCreated; 
end;

procedure TForm1.OnContextCreated(AContext: TIdContext);
begin
   AContext.Connection.IOHandler.MaxLineLength:= 512*1024 {or whatever value you need);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:54:09.337

没有删除 Indy 10 的 Delphi XE2 安装并下载源代码，调整常量值并永远编译/维护我自己的构建......，我解决了这个问题。

我在 DataSnap 服务器中创建了一个附加方法，以便我可以通过调用第一个方法在数据库中创建一条记录，然后通过将其余数据一次传递给第二个方法 16k 以增量方式流式传输 - 缓冲它在 DataSnap 服务器中，直到收到所有部分。然后，我使用来自 DataSnap 服务器的完全缓冲值更新数据库中的记录。

也许不是最有效的解决方案，但它可以工作并且可以根据需要进行扩展。

# c# - 从 JSON 字符串中选择一个随机条目

> ID：12289102
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:17:06.670
> 
> 标签：c#, json, parsing, microsoft-metro

我的代码检索了大量的项目，然后显示它们。我想做的是检索列表，然后随机选择一个条目并仅显示该条目，我将如何处理？这是我尝试过的：

```
using (var wc = new HttpClient())
            {

                string json = await wc.GetStringAsync(trendingURL);
                dynamic obj = JsonConvert.DeserializeObject(json);
                foreach (var item in obj)
                {
                    string Name = item.title;
                }
            } 
```

那么在这种情况下，是否有替代执行 foreach 语句的方法？我可以以某种方式获取条目数并选择数字 50 并显示它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:44:05.360

```
Random rnd = new Random(); //Create this random class only once.

JArray obj = (JArray)JsonConvert.DeserializeObject(json);
dynamic item = obj[rnd.Next(0, obj.Count)];
Console.WriteLine(item.title); 
```

# java - Java - 在另一个线程中使用可变对象引用的首选设计？

> ID：12289105
> 
> 赞同：3
> 
> 时间：2012-09-05T20:17:10.817
> 
> 标签：java, multithreading, synchronization, thread-safety, object-reference

```
public class ObjectA {

   private void foo() {
       MutableObject mo = new MutableObject();
       Runnable objectB = new ObjectB(mo);
       new Thread(objectB).start();
   }

}

public class ObjectB implements Runnable {

    private MutableObject mo;

    public ObjectB(MutableObject mo) {
        this.mo = mo;
    }

    public void run() {
       //read some field from mo
    }
} 
```

从上面的代码示例可以看出，我将一个可变对象传递给一个实现 Runnable 的类，并将在另一个线程中使用该可变对象。这是危险的，因为 ObjectA.foo() 在启动新线程后仍然可以改变可变对象的状态。在这里确保线程安全的首选方法是什么？将 MutableObject 传递给 ObjectB 时是否应该复制它？可变对象是否应确保内部正确同步？我以前曾多次遇到过这种情况，尤其是在尝试在许多 GUI 应用程序中使用 SwingWorker 时。我通常会尝试确保仅将不可变对象引用传递给将在另一个线程中使用它们的类，但有时这可能很困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:50:12.477

这是一个很难回答的问题，不幸的是，答案是“视情况而定”。当涉及到你的类的线程安全时，你有三个选择：

1.  让它不可变，那么你不必担心。但这不是你要问的。
2.  使其成为线程安全的。也就是说，在类内部提供足够的并发控制，客户端代码不必担心并发线程修改对象。
3.  使其不是线程安全的，并强制客户端代码进行某种外部同步。

你本质上是在问你应该使用#2还是#3。您担心其他开发人员使用该类但不知道它需要外部同步的情况。我喜欢使用[JCIP 注释](http://jcip.net/annotations/doc/net/jcip/annotations/package-summary.html) `@ThreadSafe @Immutable @NotThreadSafe`作为记录并发意图的一种方式。这不是万无一失的，因为开发人员仍然必须阅读文档，但如果团队中的每个人都理解这些注释并始终如一地应用它们，它确实会让事情变得更清晰。

对于您的示例，如果您想让该类不是线程安全的，您可以使用`AtomicReference`它来使其清晰并提供同步。

```
public class ObjectA {

  private void foo() {
     MutableObject mo = new MutableObject();
     Runnable objectB = new ObjectB(new AtomicReference<>( mo ) );
     new Thread(objectB).start();
  }
}

public class ObjectB implements Runnable {

  private AtomicReference<MutableObject> mo;

  public ObjectB(AtomicReference<MutableObject> mo) {
    this.mo = mo;
  }

  public void run() {
   //read some field from mo
   mo.get().readSomeField();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:24:12.577

我认为你过于复杂了。如果它是示例（一个没有保留引用的局部变量），您应该相信没有人会尝试写入它。如果可能的话，如果它更复杂（`A.foo()`有更多的 LOC），那么创建它只是为了传递给线程。

```
new Thread(new MutableObject()).start(); 
```

如果不是（由于初始化），请在一个块中声明它，以便它立即超出范围，甚至可能在单独的私有方法中。

```
{
   MutableObject mo = new MutableObject();    
   Runnable objectB = new ObjectB(mo);    
   new Thread(objectB).start();    
}
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:29:26.743

复制对象。您不会有任何奇怪的可见性问题，因为您将副本传递给新线程。Thread.start 总是发生在新线程进入其运行方法之前。如果更改此代码以将对象传递给现有线程，则需要适当的同步。我推荐一个来自 Java.util.concurrent 的阻塞队列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T20:29:31.333

如果不知道你的具体情况，这个问题将很难准确回答。答案完全取决于`MutableObject`代表什么，有多少其他线程可以同时修改它，以及读取对象的线程是否关心在读取对象时其状态是否发生变化。

就线程安全而言，内部同步所有读取和写入`MutableObject`被证明是“最安全”的事情，但它是以性能为代价的。如果读取和写入的争用非常高，那么您的程序可能会遇到性能问题。您可以通过牺牲一些互斥保证来获得更好的性能 - 这些牺牲是否值得性能提升完全取决于您要解决的具体问题。

你也可以玩一些关于“内部同步”你的游戏`MutableObject`，如果那是你最终要做的。如果您还没有，我建议您阅读 和 之间的区别`volatile`，`synchronized`并了解如何使用它们来确保不同情况下的线程安全。

# sql - 使用 case、like 和 have 的 SQL 语句

> ID：12289107
> 
> 赞同：0
> 
> 时间：2012-09-05T20:17:24.657
> 
> 标签：sql, oracle11g

我正在使用基于 Oracle 的系统。

你如何一起使用like、have和case语句？

我基本上是在尝试列出在事务表中找到的具有超过 4 个“A 类”事务或超过 1 个“B 类”事务的所有唯一个人。我之所以要使用`like`，是因为区分事务类的唯一方法是`like`在事务类型列中使用语句。

例如，有许多交易类型，但只有“A 类”作为其交易类型的一部分，而“B 类”是其交易类型列中`'%ABC%'`没有的所有其他类型。`'%ABC%'`

因此，我希望我的查询仅返回具有超过 4 个“A 类”事务或 1 个“B 类”事务的个体 ID。

这是我到目前为止所拥有的：

```
select tt.indiv_id, count(*) from transactiontable tt
group by tt.indiv_id
case when tt.tran_type like '%ABC'
having count(*) > 4
else
having count(*)>1. 
```

我在网站上搜索了很多，但没有找到同时使用所有这些功能的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:21:11.610

```
select tt.indiv_id, 
    count(case when tt.tran_type like '%ABC' then 1 end) as ClassACount,
    count(case when tt.tran_type not like '%ABC' then 1 end) as ClassBCount
from transactiontable tt
group by tt.indiv_id
having count(case when tt.tran_type like '%ABC' then 1 end) > 4
    or count(case when tt.tran_type not like '%ABC' then 1 end) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:21:39.050

您的查询已关闭。您希望在 having 子句中分别跟踪每种交易类型：

```
select tt.indiv_id, count(*)
from transactiontable tt
group by tt.indiv_id
having sum(case when tt.tran_type like '%ABC%' then 1 else 0 end) > 4 or
       sum(case when tt.tran_type not like '%ABC%' then 1 else 0 end) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:19:24.010

尝试这个

```
select tt.indiv_id, count(*) 
from transactiontable tt  
group by tt.indiv_id, tt.tran_type
having count(*) > case when tt.tran_type like '%ABC' then 4 else 1 end 
```

# javascript - 将负载放入变量

> ID：12289108
> 
> 赞同：0
> 
> 时间：2012-09-05T20:17:47.480
> 
> 标签：javascript, jquery, variables, load

一个简单的问题，如何将加载文件的内容放入 JavaScript 变量中？

```
function myfunc(){
    $('.layer').load('content.txt');
} 
```

当然，我可以使用 div class="layer" 来访问它，但是我怎样才能将结果传递给变量呢？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:21:02.907

我想这就是你想要的：

```
var content = "";
$('.layer').load("./content.txt", function(responseText, textStatus, XMLHttpRequest) {
    content = responseText;

    /* do stuff with content */
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:19:47.197

快速回答：

```
var plainText = $('.layer').content(); 
```

# objective-c - 从另一个 modalViewController 解雇ModalViewController

> ID：12289109
> 
> 赞同：1
> 
> 时间：2012-09-05T20:17:47.320
> 
> 标签：objective-c, ios, uiviewcontroller

所以我有一个 viewController A，它呈现一个模态 viewController B。

然后 B 呈现一个 viewController C。

我想要做的是解雇 viewController B，因为我不再需要它了。有没有一种简单的方法可以解除 B 并将 C 作为 A 的孩子留在屏幕上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:43:26.603

显然，正如许多人所说，在教科书世界中，这将/应该是代表情况。在哪里`A`礼物`B`和`B`礼物`C`。然后什么时候`C`完成它会告诉`B`which dismisses`C`然后`B`告诉`A`to dismiss `B`。

我认为您实际上是在创建一组模态呈现的视图控制器，相当于一个导航堆栈。我可能会这样实现它。`A`根视图控制器在哪里。`A`然后将推入`B`堆栈并`B`推入`C`堆栈。什么时候`C`完成它可以简单地`popToRootViewControllerAnimated:`或者`popToViewController:A animated:YES`如果`A`不是rootViewController。

`B`从下面移除`C`似乎也有问题。但根据您的评论，这听起来并不是一成不变的：

> 但无论如何，如果我将那个 viewController 放在那里一段时间，它就不是世界末日。——</p>

这至少可以实现相当干净的委托设置。

似乎您基本上知道，当用户完成后，`C`他们将不再需要`B`。如果是这种情况，您可以一次盲目地关闭两个或多个视图控制器。一次两个的代码相当简单。（假设 iOS 版本 > 5.0）

```
[self.presentingViewController.presentingViewController dismissModalViewControllerAnimated:YES]; 
```

请注意我说的是盲目的！这段代码是不宽容的，并且会做出假设。例如，最明显的是视图控制器确实有一个`presentingViewController`，并且该视图控制器有一个`presentingViewController`. 如果不满足这些条件中的任何一个，则此代码将不执行**任何操作**。如果您在任何时候重组您的应用程序，这很容易发生。

再说一遍，如果您选择使用这行代码，请非常小心地使用它。请考虑`UINavigationController`为这个视图层次结构使用 a，或者至少是委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:36:11.943

您可以尝试让 A 符合定义 C 呈现方式的协议，然后让 B 调用 A 来触发 C 的呈现，而不是 B 负责呈现 C 本身。如果 C 可以独立于 B 存在，则 A 有效地充当两者的“父母”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:30:51.747

You might be able to make this work:

*   provide a property on B like "dieOnDismiss"

*   implement 'dismissViewControllerAnimated:YES' in B, and forward the message to super

*   C optionally sets that property

*   when C sends B 'dismissViewControllerAnimated:', B sends the dismiss to super, immediately sends A 'dismissViewControllerAnimated:NO'

Not sure if you can use animated on one transition and have it look right - you may be able to. But if not you can probably just return to A with no animation.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:19:16.870

您可以拥有一个共享实例，其中包含指向根视图控制器的弱指针（此处为 A）。通过使用此指向 A 的指针，使用此共享实例在任何时候从 A 中呈现/关闭 C。

**编辑**

这是为了跟进 TimD 的回答。在任何情况下，在我提出的方法中，C 和 B 都将从 A 呈现。

# jquery - 与 div 一起滑动的按钮

> ID：12289110
> 
> 赞同：1
> 
> 时间：2012-09-05T20:17:48.550
> 
> 标签：jquery

我有一个表格和按钮。表单是隐藏的，但是当我单击按钮时，它会从左侧滑出。但是如何做到这一点，当我单击按钮时，按钮与幻灯片一起出现，当我再次单击时（当表单可见时），按钮与表单一起滑回位置。

```
$(document).ready(function () {
   $(".feedbackform").hide();
   $("#feedbackbutton").click(function () {
       $("#feedbackbutton").slideToggle({
           left: "300px"
       });
       $(".feedbackform").animate({
           width: "toggle"
       });
   });
});

#feedbackbutton {
   height: 30px;
   width: 100px;
   background: #ccc;
   position: absolute;
   left: 0;
   top: 30 % ;
}

.feedbackform {
   background: #09C;
     width: 300px;
     height: auto;
     position: absolute;
     top: 30%;
     left: 0;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:42:48.683

## *[jsBin 演示](http://jsbin.com/irozum/3/edit)*

**动画一个共同的父母**。
将元素包装到 DIV ( `#feedback`)

```
<div id="feedback">
  <div class="feedbackform">

    FORM HERE

  </div>
  <div id="feedbackbutton">FEEDBACK</div>     
</div> 
```

CSS：

```
#feedback{
  position:absolute;
  left:-300px; /* -width */
  width:300px;/*same as form*/
}

#feedbackbutton {
    height: 30px;
    width: 100px;
    background: #ccc;
    position: absolute;
    right: -100;/*minus width*/
    top: 30%;   
}

.feedbackform{
     background: #09C;
     width: 300px;
     height: auto;
     position: absolute;
     top: 30%;
     left: 0;   
} 
```

jQuery：

```
 var c=0;
  $("#feedbackbutton").click(function(){
      $('#feedback').stop().animate({left: c++%2*-300 }, 800);
  }); 
```

# javascript - 免费的 JQuery 表格排序插件（带搜索）

> ID：12289112
> 
> 赞同：1
> 
> 时间：2012-09-05T20:17:53.173
> 
> 标签：javascript, jquery, html

好奇是否有人知道基于 jQuery 的免费表格排序插件。我可以使用搜索栏进行过滤，通过单击列名等对表格进行排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T20:23:16.603

试试这个：[http](http://datatables.net/) ://datatables.net/这使用起来非常简单，具有搜索和排序功能，并且基于 jquery。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T20:21:34.057

试试这个排序：[http](http://tablesorter.com/docs/) ://tablesorter.com/docs/这个过滤： http: [//gregweber.info/projects/uitablefilter](http://gregweber.info/projects/uitablefilter)

# list - 过滤单词列表

> ID：12289113
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:17:54.183
> 
> 标签：list, prolog, filtering

目标：

过滤掉列表中不以指定字符开头的所有单词。以指定字符开头的单词应该存储在一个没有第一个字符的新列表中。

问题：

如果允许列表中的所有单词，则它按预期工作。当不允许列表中的单词时，检查失败（如预期的那样）但它退出谓词而不尝试继续列表中的下一个单词（不是预期的），如回溯并尝试重做下一个单词。

```
filter_word([Char|Rest], Char, Rest).

filter([], _, []).
filter([Word|Words], Char, [H|T]) :-
    filter_word(Word, Char, H),
    filter(Words, Char, T). 
```

这是一个家庭作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:23:25.740

> 它退出谓词而不尝试继续列表中的下一个单词（不是预期的），如回溯并尝试重做下一个单词。

那是因为没有子句`filter`来处理单词与过滤器不匹配的情况。这个问题分三种情况：

1.  空列表。
2.  非空，列表的第一个元素匹配过滤器。
3.  非空，列表的第一个元素与过滤器不匹配。

你应该相应地写三个子句。

# c# - 如何克隆 UltraGridColumn (Infragistics)？

> ID：12289115
> 
> 赞同：2
> 
> 时间：2012-09-05T20:17:56.917
> 
> 标签：c#, infragistics

```
reportGrid = new DataGridView();
foreach (DataGridViewColumn col in grid.Columns)
{
    DataGridViewColumn newCol = new DataGridViewColumn();
    newCol = (DataGridViewColumn)col.Clone();
    reportGrid.Columns.Add(newCol);
} 
```

我试图模仿上面一些适用于 DatagridView 但适用于 UltraGrid 但不确定如何克隆列的现有代码，我查看了适用于 UltraGridRows 的 CopyFrom。

```
 foreach (UltraGridColumn col in grid.DisplayLayout.Bands[0].Columns)
 {
      UltraGridColumn newCol = new UltraGridColumn();  //Errror here as well
      //newCol = (UltraGridColumn)col.Clone();
      newCol.CopyFrom(col);

      reportGrid.DisplayLayout.Bands[0].Columns.Add(newCol);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:40:18.250

要重构**InitializeLayout**方法，我的意思是提取为此方法编写的所有代码（通常为显示或网格的其他一次性配置格式化列）并将所有内容放在可直接从代码调用的不同方法中。

然后，当您的用户按下按钮打印网格时，使用相同的数据源初始化 gridReport，调用相同的公共代码并对第二个网格上的列执行特定的隐藏。

此伪代码假设您已经声明了两个网格（带有初始数据的 grdMain 和用于打印的 grdReport）我还假设存在一个 ultraGridPrintDocument 来启动打印过程

```
private void gridMain_InitializeLayout(object sender, InitializeLayoutEventArgs e)
{
    CommonInitializeLayout(gridMain, e);
}

private void CommonInitializeLayout(UltraWinGrid grd, InitializeLayoutEventArgs e)
{
   UltraGridBand b = e.Layout.Bands[0];
   // Now do the customization of the grid passed in, for example....
   b.Override.AllowRowFiltering = Infragistics.Win.DefaultableBoolean.True;
   b.Override.AllowAddNew = AllowAddNew.No;
   b.Override.NullText = "(Not available)";
   b.Columns["CustName"].Header.Caption = "Customer Name";
   ....... etc ....
}

private void cmdMakeReport_Click(object sender, EventArgs e)
{
    // This assignment will trigger the InitializeLayout event for the grdReport
    grdReport.DataSource = grdMain.DataSource;
    // Now the two grids have the same columns and the same data 

    // Start to hide the columns not desired in printing
    grdReport.DisplayLayout.Bands[0].Columns["CustID"].ExcludeFromColumnChooser =
                                                             ExcludeFromColumnChooser.True 
    grdReport.DisplayLayout.Bands[0].Columns["CustID"].Hidden = true;
    // .... other columns to hide.....

    // Now print the grdReport
    ultraGridPrintDocument.Grid = grdReport;
    ultraGridPrintDocument.Print();
}

private void gridReport_InitializeLayout(object sender, InitializeLayoutEventArgs e)
{
    CommonInitializeLayout(griReport, e);
} 
```

# html - 如何在 iOS Picker Wheel 中更改字体大小

> ID：12289125
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:18:29.837
> 
> 标签：html, mobile, mobile-safari

我正在写一个网页，有时选择元素上的“选择器”轮会缩小字体以便可以阅读，有时它只是在文本中放置“...”以缩短​​它但保留字体的大小原封不动。

有没有办法指定使用哪种方法？我希望适当缩放字体大小。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:06:41.570

您使用返回视图而不是字符串的选取器数据源方法。在视图中放置标签，并根据需要设置字体选项：

```
– pickerView:viewForRow:forComponent:reusingView: 
```

# c# - 如何从查询字符串中的输入字段发回文本？

> ID：12289126
> 
> 赞同：0
> 
> 时间：2012-09-05T20:18:29.693
> 
> 标签：c#, javascript, asp.net, search

好的，所以这应该是一件相当容易的事情，但是我认为我遗漏了一些东西。我有一个像这样的输入字段。

```
<input id="jobSearchField" class="searchField" runat="server" 
onkeypress="javascript:GoToFunc(event, this.value)" type="text" 
onfocus="if (this.value == 'Seach jobs by JobID, JobTitle, Keywords, or Location') this.value=''" 
value="Seach jobs by JobID, JobTitle, Keywords, or Location" /> 
```

我也有一个像这样的按钮。

```
<button id="filterSubmit" runat="server" class="filterSubmit">Submit</button> 
```

这是我“尝试”构建的javascript。

```
<script type="text/javascript">
    function GoToFunc(e, value) {
        if (e.keyCode == 13) {
            var location = document.location.href + "&query=" + value;
            document.location.href = location;
            document.open();
        }
    }
</script> 
```

我“尝试”构建的 javascript 函数假设将该查询字符串传递回 url，以便我可以解析用户想要的内容。我使用 ASP.NET 和 C# 作为语言。

所以问题是我如何在 url 中作为参数返回用户输入的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:26:39.263

您应该使用 encodeURI 或[encodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

```
var location = document.location.href + "&query=" + encodeURI(value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:29:32.793

首先，您正在重新创建表单的功能。如果您只有一个表格，它将起作用。

对于您的代码，通过返回 false 来停止输入键操作。您还需要将返回添加到事件处理程序。这也期望查询字符串值不存在。

```
<input id="jobSearchField" class="searchField" runat="server" 
onkeypress="return GoToFunc(event, this.value)" type="text" 
onfocus="if (this.value == 'Seach jobs by JobID, JobTitle, Keywords, or Location') this.value=''" 
value="Seach jobs by JobID, JobTitle, Keywords, or Location" />

<script type="text/javascript">
    function GoToFunc(e, value) {
        if (e.keyCode == 13) {
            var newLocation = window.location.href + "&query=" + encodeURIComponent(value);
            window.location.href = newLocation;
            return false; //stop event key
        }
    }
</script> 
```

# regex - 正则表达式从字符串中提取一组数字

> ID：12289134
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:18:57.760
> 
> 标签：regex

这是我的字符串：

```
a:1:{i:0;a:4:{s:1:"i";s:5:"19807";s:1:"c";s:19:"7025462932180014917";s:1:"a";
d:88.719999999999998863131622783839702606201171875;s:2:"ba";
d:88.719999999999998863131622783839702606201171875;}} 
```

我只是想`702546`在`7`. 该数字的长度可能不同，但始终以引号开头`702546`并始终以引号结尾。

所以我最终的选择是`7025462932180014917`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:23:57.867

使用这个正则表达式`(?<=")(702546\d+)(?=")`

如果你的正则表达式引擎不支持后向使用这个正则表达式`"(702546\d+)"`匹配将在第 1 组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:27:40.813

基本的正则表达式是`702546[^"]*`匹配任何这样的字符串，但您可能希望使用某种编程语言来实际提取这些字符串。

```
vnix$ grep -o '702546[^"]*' file 
```

或者在脚本语言中，类似这样的东西；

```
perl -nle 'print $1 while m/(702546[^"]*)/g' file 
```

不过，您的问题描述使我相信这实际上不是您应该做的。 [你真正想解决什么问题？](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:27:42.323

根据您使用的技术/语言，这可能会有所不同，但基本上您可以使用类似这样的东西

```
(?<=")702546\d+(?=") 
```

`(?<=")`如果您的字符串中没有以 702546 开头的其他数字的风险，则第一个可能是矫枉过正。

打破这个：

```
(?<=") // a zero-width assertion (lookbehind), so we will only match if preceded by double-quotes
 702546 // literal match
 \d+    // one or more additional digits
 (?=")  // another zero-width assertion (lookahead), so we will only match if followed by double-quotes 
```

基本上，零宽度断言仅意味着该值必须存在才能使匹配成功，但该值不会成为匹配的一部分。我们在这里使用它们是因为我们希望确保该值包含在引号中，而不是使引号成为我们匹配的一部分。

# c++ - 使用 igraph 时出现未定义的引用错误

> ID：12289145
> 
> 赞同：1
> 
> 时间：2012-09-05T20:19:55.140
> 
> 标签：c++, ubuntu, undefined, igraph

我在 ubuntu 12.04 上使用 graph-0.6

IDE Eclipse CDT C++

[从http://igraph.sourceforge.net/doc/html/ch04s02.html#igraph_add_vertices](http://igraph.sourceforge.net/doc/html/ch04s02.html#igraph_add_vertices)获取此示例代码
当我尝试编译时，我得到

> 未定义参考：igraph_vector_init 和其余函数。

它找到头文件并可以创建图形结构（igraph_gt;）

```
#include <iostream>
#include <igraph.h>

using namespace std;

int main() {
igraph_t g;

igraph_attribute_table_t *
igraph_i_set_attribute_table(const igraph_attribute_table_t * table);

igraph_t g1;
igraph_vector_t v1;
int ret;

/* Create a graph */
igraph_vector_init(&v1, 8);
VECTOR(v1)[0]=0; VECTOR(v1)[1]=1;
VECTOR(v1)[2]=1; VECTOR(v1)[3]=2;
VECTOR(v1)[4]=2; VECTOR(v1)[5]=3;
VECTOR(v1)[6]=2; VECTOR(v1)[7]=2;
igraph_create(&g1, &v1, 0, 0);
igraph_vector_destroy(&v1);

/* Add more vertices */
igraph_add_vertices(&g1, 10, 0);
if (igraph_vcount(&g1) != 14) {
return 1;
}

igraph_destroy(&g1);

return 0;
} 
```

# django - 当我只有一个时，我应该在哪里为我的 Django Sites 框架站点设置域？

> ID：12289148
> 
> 赞同：24
> 
> 时间：2012-09-05T20:20:01.763
> 
> 标签：django, django-sites

我有一个 Django 项目，用于我正在构建的一个简单的博客/论坛网站。

我正在使用[联合提要框架](https://docs.djangoproject.com/en/dev/ref/contrib/syndication/)，它似乎使用来自[站点框架](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)的当前站点的域为提要中的项目生成 URL 。

我以前不知道站点框架。我的项目不会用于多个站点，只会用于一个。

我想要做的是设置`domain`当前站点的属性。我应该在我的 Django 项目中的哪个位置执行此操作？/settings.py 中的某个地方？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T20:28:10.627

如果我理解正确，Sites 框架数据存储在数据库中，所以如果我想永久存储它，我想它适合在一个[`initial_data`fixture 中](https://docs.djangoproject.com/en/dev/howto/initial-data/)。

我启动了 Django shell，并执行了以下操作：

```
>>> from django.contrib.sites.models import Site
>>> one = Site.objects.all()[0]
>>> one.domain = 'myveryspecialdomain.com'
>>> one.name = 'My Special Site Name'
>>> one.save() 
```

然后我在命令行中抓取了这些数据：

```
python manage.py dumpdata sites 
```

并将其粘贴到我预先存在的`initial_data`固定装置中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-03-05T10:42:54.180

其他答案建议在管理员、shell 或数据库中手动更新站点。这是个坏主意——它应该是自动的。

您可以创建一个在您运行迁移时自动执行此操作的迁移，因此您可以确保它始终被应用（例如当您部署到生产时）。[文档中也建议](https://docs.djangoproject.com/en/2.0/ref/contrib/sites/#enabling-the-sites-framework)这样做，但它没有列出说明。

首先，运行`./manage.py makemigrations --empty --name UPDATE_SITE_NAME myapp`创建一个空迁移。然后添加以下代码：

```
from django.db import migrations
from django.conf import settings

def update_site_name(apps, schema_editor):
    SiteModel = apps.get_model('sites', 'Site')
    domain = 'mydomain.com'

    SiteModel.objects.update_or_create(
        pk=settings.SITE_ID,
        defaults={'domain': domain,
                  'name': domain}
    )

class Migration(migrations.Migration):

    dependencies = [
        # Make sure the dependency that was here by default is also included here
        ('sites', '0002_alter_domain_unique'), # Required to reference `sites` in `apps.get_model()`
    ]

    operations = [
        migrations.RunPython(update_site_name),
    ] 
```

确保您已在设置`SITE_ID`中进行设置。然后运行`./manage.py migrate`以应用更改:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-02-04T22:17:45.063

您可以使用 django 管理站点更改它。

只是去`127.0.0.1:8000/admin/sites/`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-06T11:43:21.247

您可以手动修改数据库中的站点条目。导航到名为“ **django_site** ”的表。然后，您应该只看到一个条目（行）。您需要修改名为“**域**”的字段（列）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-03-02T12:13:46.717

对于那些在 Django 管理页面上难以找到“站点”部分的人，对于较新的 Django 版本，您需要启用可选的**站点框架**，如下所示：

在您的**settings.py**文件中，将其添加到您的“INSTALLED_APPS”中：

```
'django.contrib.sites' 
```

然后为默认站点指定一个 ID（因为它可能是您要指定的第一个站点，您可以使用 ID 1）：

```
SITE_ID = 1 
```

运行您的迁移并检查“站点”部分是否在您的 Django 管理页面上可用。

更多详细信息，请访问[https://docs.djangoproject.com/en/3.0/ref/contrib/sites/#enabling-the-sites-framework](https://docs.djangoproject.com/en/3.0/ref/contrib/sites/#enabling-the-sites-framework)

# c# - httphandler 永远不会被击中

> ID：12289150
> 
> 赞同：0
> 
> 时间：2012-09-05T20:20:05.077
> 
> 标签：c#, asp.net, .net, httphandler

我正在使用 HttpHandler 从数据库中检索图像，然后在我的网页 (aspx) 上的 Image Web 控件中使用 Handler 作为 ImageUrl。代码如下所示。但它不起作用，到目前为止我不知道为什么。问题是 HttpHandler 永远不会被命中，如果我将断点保留在 processrequest() 它永远不会被命中

下面是Handler中的简单代码

```
public class ImageHandler : IHttpHandler
{
    StaffMemberRepository db = new StaffMemberRepository();
    public void ProcessRequest(HttpContext context)
    {
        int id = Convert.ToInt32(context.Request.QueryString["id"].ToString());
        byte[] image = db.GetImage(id);
        context.Response.ContentType = "image/jpg";
        context.Response.BinaryWrite(image);
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

以下是我网页中的标记

```
asp:Image ID="imgStaff" runat="server" ImageAlign="Middle" ImageUrl="~/Handlers/ImageHandler.ashx?id=2" 
```

有人可以让我知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:51:17.527

好吧，我现在可以看到我的愚蠢了。我刚刚在 web.config 中注册了我的处理程序，现在一切正常。

# asp.net - 服务器违反了协议。Section=ResponseStatusLine

> ID：12289152
> 
> 赞同：3
> 
> 时间：2012-09-05T20:20:19.163
> 
> 标签：asp.net, web-config, httpwebrequest, httpwebresponse

请有人帮助我。我已经研究了几个小时，尝试了许多不同的建议修复，但我完全不知道为什么我仍然会收到这个错误。

我有一个*ASP.NET 4.0*网页，其中包含以下代码：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(targetHref);
// request.KeepAlive = false;
// request.ProtocolVersion = System.Net.HttpVersion.Version10;
// request.ServicePoint.Expect100Continue = false;

HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

我已经尝试了所有我能想象到的取消注释上述 3 条注释行的组合。

我的 web.config 中有这个：

```
<system.net>
   <settings>
      <httpWebRequest useUnsafeHeaderParsing ="true"/>
   </settings>
</system.net> 
```

当我在我的开发机器上运行*Fiddler*时，页面无异常运行，fiddler 在返回顶部显示此消息：

> HTTP/1.0 200 这个有问题的服务器没有返回标头

如果没有 Fiddler 运行，我每次上`request.GetResponse()`线都会收到错误消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T21:44:44.370

好吧，我尝试了我在 StackOverflow 和网络上其他地方可以找到的每一个建议，但从来没有实现 HttpWebRequest 为我工作，所以我在阅读以下内容后尝试使用 TcpClient 代替： [How To Set useUnsafeHeaderParsing For .NET Compact Framework](https://stackoverflow.com/questions/4812047/how-to-set-useunsafeheaderparsing-for-net-compact-framework)

为了让它为我工作，我不得不修改这一行：

```
 sw.WriteLine(string.Format("GET /{0} HTTP/1.1", pathAndQueryString)); 
```

到：

```
 sw.WriteLine(string.Format("GET /{0} {1}", pathAndQueryString, Environment.NewLine+Environment.NewLine)); 
```

这奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T17:05:19.560

在带有 C# 的 asp.net 中，此问题仅与端口相关联。

许多程序使用 80 端口，这就是您收到此错误的原因，因此请摆脱此问题，无需配置，只需关闭您的

Skype、VPN 软件等。它将解决您的问题。

在我的情况下，实际上不是 Skype，而是热点屏蔽（一个免费的 VPN）软件在后台运行，退出该软件解决了我的问题。

# .net - Dapper 不会与具有自定义 getter/setter 的成员一起使用吗？

> ID：12289168
> 
> 赞同：6
> 
> 时间：2012-09-05T20:21:46.443
> 
> 标签：.net, dapper

根据我正在使用的一些代码，这似乎是这种情况。[我在dapper 文档](http://code.google.com/p/dapper-dot-net/)中找不到任何明确表示它不适用于具有自定义 get/set 逻辑的成员的内容，但我确实看到了这个示例：

```
public class Dog
{
    public int? Age { get; set; }
    public Guid Id { get; set; }
    public string Name { get; set; }
    public float? Weight { get; set; }

    public int IgnoredProperty { get { return 1; } }  //red flag?
} 
```

具有自定义 get 行为的成员的前缀`Ignored`似乎表明 Dapper 不会尝试填充这些值。这是真的？这是在文档中，我只是忽略了它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T20:37:14.053

dapper 会忽略它的原因是*它没有 setter*。它不关心你的属性是如何在内部实现的，但它*需要*一个 setter 来使用一个属性（尽管 setter 不必是公共的）。

顺便说一句，它还可以使用字段。

# php - 如何在 WordPress 中获取当前的分类术语 ID（不是 slug）？

> ID：12289169
> 
> 赞同：138
> 
> 时间：2012-09-05T20:21:50.063
> 
> 标签：php, wordpress, taxonomy

我在我的 WordPress 主题文件夹中创建了一个 taxonomy.php 页面。我想获取函数的当前术语 id。我怎样才能得到这个？

`get_query_var('taxonomy')`只返回术语 slug，我想要 ID

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2012-09-05T20:32:02.767

没关系！我找到了 ：）

```
get_queried_object()->term_id; 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2017-03-21T13:27:12.160

简单易行！

```
get_queried_object_id() 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-09-22T01:15:39.980

这是所需的整个代码片段：

```
$queried_object = get_queried_object();
$term_id = $queried_object->term_id; 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-08-31T15:45:42.367

**使用以下代码**

这将打印您当前的分类名称和描述（可选）

```
<?php 
   $tax = $wp_query->get_queried_object();
   echo ''. $tax->name . '';
   echo "<br>";
   echo ''. $tax->description .''; 
?> 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-01-11T21:43:47.167

如果您在分类页面中。

这就是您获取有关分类的所有详细信息的方式。

```
get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) ); 
```

这就是您获取分类 ID 的方式

```
$termId = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) )->term_id; 
```

* * *

但是，如果您在帖子页面中（分类 -> 孩子）

```
$terms = wp_get_object_terms( get_queried_object_id(), 'taxonomy-name');
$term_id = $terms[0]->term_id; 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-03-15T23:04:47.703

```
<?php 
$terms = get_the_terms( $post->ID, 'taxonomy');
foreach ( $terms as $term ) {
    $termID[] = $term->term_id;
}
echo $termID[0]; 
?> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-01-24T09:24:24.773

见[**wp_get_post_terms()**](https://codex.wordpress.org/Function_Reference/wp_get_post_terms)，你会做这样的事情：

```
global $post;
$terms = wp_get_post_terms( $post->ID, 'YOUR_TAXONOMY_NAME',array('fields' => 'ids') );

print_r($terms); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-10T14:20:54.893

这是你想要的术语 slug。看起来你可以得到这样的 id 如果这是你需要的：

```
function get_term_link( $term, $taxonomy = '' ) {
    global $wp_rewrite;

    if ( !is_object($term) ) {
        if ( is_int( $term ) ) {
            $term = get_term( $term, $taxonomy );
        } else {
            $term = get_term_by( 'slug', $term, $taxonomy );
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-16T07:50:09.090

这适用于所有页面类型，而不仅仅是分类术语档案

```
$category_id = get_the_category( get_the_ID());
$id          = get_category($category_id[0]->term_id); 
```

# ruby - 我如何通过创建的和键、值对对这个哈希进行排序

> ID：12289170
> 
> 赞同：0
> 
> 时间：2012-09-05T20:21:55.697
> 
> 标签：ruby, hash

嗨，我很难制作这个散列并通过 created of 和 key 、 value 对对其进行排序。

这是我的代码

```
 hash_answers = {}
 unless answers.blank?
  answers.each_with_index do |ans ,index|
    voted_up_users = ans.votes_up_by_all_users(ans)
    voted_down_users = ans.votes_down_by_all_users(ans)
    hash_answers[ans.id] = voted_up_users.count -voted_down_users.count #line one
    hash_answers[index+1] = ans.created_at # line 2
  end
end 
```

如果我在代码中只有第 1 行而不是第 2 行，那么下面的代码对我来说很好

```
 @answers = hash_answers.sort_by { |key, value| value }.reverse 
```

但我也想按 craeted_at 对其进行排序

我怎样才能做到这一点或以另一种方式制作散列

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:28:47.863

```
answers.sort_by do |ans|
  [ans.net_votes, ans.created_at]
end 
```

然后在你的 Answers 课上

```
def net_votes
  votes_up_by_all_users - votes_down_by_all_users
end 
```

您不必像在`ans.votes_up_by_all_users(ans)`. 对象总是了解自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:30:53.710

Usually you can sort on a number of things by creating an array of these things and use that as your sort key:

```
@answers = hash_answers.sort_by { |k, v| [ v[:created_at], v[:count] } 
```

This is dependent on having a sortable structure to start with. You're jamming two entirely different things into the same hash. A better approach might be:

```
hash_answers[ans.id] = {
  :id => ans.id,
  :count => voted_up_users.count -voted_down_users.count,
  :created_at => ans.created_at
} 
```

You can adjust the order of the elements in the array to sort in the correct order.

# java - Terracotta 3.7 DSO Clustered Quartz 2.1 ClassNotFoundException: com.terracotta.express.ClientFactoryImpl

> ID：12289172
> 
> 赞同：1
> 
> 时间：2012-09-05T20:22:02.720
> 
> 标签：java, exception, quartz-scheduler, terracotta

我正在尝试将石英从 1.7 升级到 2.1，将 Terracotta 从 3.3 升级到 3.7。我无法使用 Terracotta 3.7 DSO (TerracottaJobStore) 使石英正确聚类。我的应用程序使用 Terracotta DSO 运行良好（使用 RAMJobStore）。我能够得到一个简单的独立石英示例，它与 Terracotta 3.7 Express 集群，但当然，如果没有 DSO，我们的应用程序将无法运行。

我不太确定为什么会出现以下错误，任何帮助将不胜感激，我唯一的猜测是石英认为我在 Terracotta Express 下运行，而实际上我正在运行 Terracotta DSO，但不知道为什么会这样。（顺便说一句，我们需要 DSO！）

* * *

```
java.lang.RuntimeException: Problem obtaining node id from TerracottaJobStore.
    at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1204)
    at org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1484)
    at controller.job.SimpleExample.run(SimpleExample.java:38)
    at controller.SController.<clinit>(SController.java:95)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    at 

org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
    at 

org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
    at 

org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at 

org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1093)
    at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:286)
    at org.springframework.web.servlet.handler.SimpleUrlHandlerMapping.registerHandlers(SimpleUrlHandlerMapping.java:129)
    at org.springframework.web.servlet.handler.SimpleUrlHandlerMapping.initApplicationContext(SimpleUrlHandlerMapping.java:104)
    at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at 

org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4420)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4733)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1194)
    ... 61 more

Caused by: java.lang.ExceptionInInitializerError
    at org.terracotta.quartz.AbstractTerracottaJobStore.init(AbstractTerracottaJobStore.java:62)
    at org.terracotta.quartz.AbstractTerracottaJobStore.getUUID(AbstractTerracottaJobStore.java:77)
    ... 66 more
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.terracotta.express.ClientFactoryImpl
    at org.terracotta.express.Util.getImplInstance(Util.java:14)
    at org.terracotta.express.ClientFactory.<clinit>(ClientFactory.java:14)
    ... 68 more

Caused by: java.lang.ClassNotFoundException: com.terracotta.express.ClientFactoryImpl
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.__tc_loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.terracotta.express.Util.getImplInstance(Util.java:11)
    ... 69 more

It gets this exception, Caused by: java.lang.ClassNotFoundException: com.terracotta.express.ClientFactoryImpl, because terracotta toolkit runtime isn't included, which has this class, this is because we are using DSO and not express.  If I were to include that jar it would complain that I am using a terracotta bootjar. I am not sure how to get it to load up the correct DSO replacement to ClientFactoryImpl 
```

* * *

```
 VM arguments: 
-Xbootclasspath/p:C:\Users\j\branch\Agg\dso-boot-hotspot_win32_160_30.jar -Xms80m -Xmx1500m -XX:MaxPermSize=1024m -Dtc.install-root=C:\Program Files (x86)\Terracotta\terracotta-3.7.0 -Dtc.config=C:\Users\j\branch\Agg\tc-config.xml -Dcatalina.base=C:\Users\j\branch\.metadata\.plugins\org.eclipse.wst.server.core\tmp0 -Dcatalina.home=C:\tomcat -Dwtp.deploy=C:\Users\j\branch\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps -Djava.endorsed.dirs=C:\tomcat\endorsed -Dfile.encoding=Cp1252 

Class path: 
C:\tomcat\bin\bootstrap.jar;C:\Users\j\branch\third-libs\lib\spring-framework\2.5.6\jakarta-commons\commons-logging.jar;C:\Users\j\branch\third-libs\lib\spring-framework\2.5.6\log4j\log4j-1.2.15.jar;C:\Users\j\branch\third-libs\lib\spring-framework\2.5.6\slf4j\slf4j-api-1.5.0.jar;C:\Users\j\branch\third-libs\lib\spring-framework\2.5.6\slf4j\slf4j-log4j12-1.5.0.jar;C:\Users\j\branch\CoreTC\build\classes;C:\Users\j\branch\third-libs\lib\zmq\2.1.10\zmq.jar;C:\Users\j\branch\third-libs\lib\apache-commons\lang\2.6\commons-lang-2.6.jar;C:\Users\j\branch\third-libs\lib\terracotta\tim-quartz-1.7\2.3.0\quartz-terracotta-2.3.0.jar;C:\Users\j\branch\third-libs\lib\terracotta\quartz\2.1.5\quartz-all-2.1.5.jar;C:\Program Files\Java\jdk1.6.0_30\lib\tools.jar;C:\Users\j\branch\third-libs\lib\spring-framework\2.5.6\cglib\cglib-nodep-2.2.3.jar;C:\Users\j\branch\third-libs\lib\terracotta\tim-quartz-1.7\2.3.0\tim-quartz-2.0-2.3.0.jar;C:\Users\j\branch\third-libs\lib\terracotta\tim-quartz-1.7\2.3.0\tim-quartz-2.x-ui-2.3.0.jar;C:\Users\j\branch\third-libs\lib\terracotta\tim-tomcat\tim-session-common-2.4.0.jar;C:\Users\j\branch\third-libs\lib\terracotta\tim-tomcat\tim-session-ui-2.4.0.jar;C:\Users\j\branch\third-libs\lib\terracotta\tim-tomcat\tim-tomcat-6.0-2.4.0.jar;C:\Users\j\branch\third-libs\lib\terracotta\tim-tomcat\tim-tomcat-common-2.4.0.jar

Library path: 
C:\Program Files\Java\jre6_30\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Imaging\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\;C:\Users\j\workspace\third-libs\lib\zmq\2.1.7\win\;C:\Program Files (x86)\Shoreline Communications\ShoreWare Client\;C:\Program Files\TortoiseGit\bin;C:\Program Files (x86)\OpenSSH\bin;.
Boot class path: 
C:\Users\j\branch\Agg\dso-boot-hotspot_win32_160_30.jar;C:\Program Files\Java\jre6_30\lib\resources.jar;C:\Program Files\Java\jre6_30\lib\rt.jar;C:\Program Files\Java\jre6_30\lib\sunrsasign.jar;C:\Program Files\Java\jre6_30\lib\jsse.jar;C:\Program Files\Java\jre6_30\lib\jce.jar;C:\Program Files\Java\jre6_30\lib\charsets.jar;C:\Program Files\Java\jre6_30\lib\modules\jdk.boot.jar;C:\Program Files\Java\jre6_30\classes 
```

* * *

```
quartz.properties

org.quartz.scheduler.instanceName = DefaultQuartzScheduler
org.quartz.scheduler.rmi.export = false
org.quartz.scheduler.rmi.proxy = false
org.quartz.scheduler.wrapJobExecutionInUserTransaction = false
org.quartz.scheduler.makeSchedulerThreadDaemon = true

org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 10
org.quartz.threadPool.threadPriority = 5
org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread = true
org.quartz.threadPool.makeThreadsDaemons = true
org.quartz.jobStore.misfireThreshold = 60000

org.quartz.scheduler.instanceId = AUTO
org.quartz.spi.InstanceIdGenerator = org.quartz.simpl.HostnameInstanceIdGenerator
org.quartz.jobStore.class = org.terracotta.quartz.TerracottaJobStore
org.quartz.jobStore.tcConfigUrl = C:/Users/j/branch/Agg/tc-config.xml 
```

* * *

tc-config 的相关部分

```
<clients>
    <logs>terracotta/client-logs</logs>
    <modules>
        <module group-id="org.terracotta.toolkit" name="terracotta-toolkit-1.6" version="5.0.0" />
        <module name="tim-quartz-2.0" version="2.3.0" />
        <module name="tim-tomcat-6.0"/>
    </modules>
</clients> 
```

我应该注意，我们使用的是 Spring 3.1.0，对 2.5.6 的引用是与版本无关的文件。

# java - 使用模板时效果不起作用 - JSF

> ID：12289175
> 
> 赞同：0
> 
> 时间：2012-09-05T20:22:19.677
> 
> 标签：java, templates, jsf

我有两个 xhtml 文件。一个作为要显示的完整页面，另一个使用模板（）。当我直接调用文件（完整文件）时，包含在其中的所有效果都可以正常工作，但是当我调用使用模板的页面时，页面已加载，但分页效果不起作用并给出以下异常：

> “17:14:07,031 严重 [javax.enterprise.resource.webcontainer.jsf.application] (http - 0.0.0.0-8090-3) JSF1007：在预览中发现组件 ID 重复消息。17:14:07,031 严重 [javax .enterprise.resource.webcontainer.jsf.application] (http - 0.0.0.0-8090-3) + id: j_id1 "

完整代码（fileA.xhtml）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:p="http://primefaces.org/ui"> 
<h:head>
  <title>Parâmetros Integrator</title>
</h:head>       
<h:body>
<f:view>       
    <h:form prependId="false">    
    <p:dataTable id="dataTable" var="valor" value="#{parametroBean.listaParametro}"  
                 paginator="true" rows="10"  
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                 rowsPerPageTemplate="4,5,7"
                 style="max-width: 580px; min-width: 550px">  
        <f:facet name="header">  
            Parâmetros Integrator  
        </f:facet>    
        <p:column style="max-width: 40px; min-width: 40px; overflow: hidden" >  
            <f:facet name="header">  
                <h:outputText value="Parametro" />  
            </f:facet>  
            <h:outputText value="#{valor.parametro}" />  
        </p:column>    
        <p:column style="max-width: 50px; min-width: 50px; overflow: hidden">  
            <f:facet name="header">  
                <h:outputText value="Valor" />  
            </f:facet>  
            <h:outputText value="#{valor.valor}" />  
        </p:column>    
        <p:column style="max-width: 50px; min-width: 50px; overflow: hidden">  
            <f:facet name="header">  
                <h:outputText value="Descricão" />  
            </f:facet>  
            <h:outputText value="#{valor.desParametro}" />  
        </p:column>    
    </p:dataTable> 

</h:form>    
</f:view> 
</h:body>
</html> 
```

使用模板的代码（fileB.xhtml）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

  <ui:composition  template="/templates/conteudo.xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

  <ui:define name="content">

    <p:dataTable id="dataTable2" var="valor" value="#{parametroBean.listaParametro}"  
                 paginator="true" rows="10"  
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                 rowsPerPageTemplate="4,5,7"
                 style="max-width: 980px; min-width: 950px">  
        <f:facet name="header">  
            Parâmetros Integrator  
        </f:facet>  

        <p:column style="max-width: 40px; min-width: 40px; overflow: hidden" >  
            <f:facet name="header">  
                <h:outputText value="Parametro" />  
            </f:facet>  
            <h:outputText value="#{valor.parametro}" />  
        </p:column>  

        <p:column style="max-width: 80px; min-width: 80px; overflow: hidden">  
            <f:facet name="header">  
                <h:outputText value="Valor" />  
            </f:facet>  
            <h:outputText value="#{valor.valor}" />  
        </p:column>  

        <p:column style="max-width: 80px; min-width: 80px; overflow: hidden">  
            <f:facet name="header">  
                <h:outputText value="Descricão" />  
            </f:facet>  
            <h:outputText value="#{valor.desParametro}" />  
        </p:column>  

    </p:dataTable>  

    </ui:define>

  </ui:composition> 
```

谁能告诉我可能是什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:39:40.817

我认为您的问题位于组件 ID 中的某个位置。如果您不自己命名组件，它将自动完成。尝试让自己的 id 名称有所不同。不要忘记在您的模板文件中也这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:42:04.143

您得到的错误是指 JSF 生成的页面中的重复 ID。我会检查你的模板`(conteudo.xhtml`）是否有相同的组件 ID（模板和复合 facelet）。如果您有 Firebug 或 IE 开发人员工具，则可能更容易查明（取决于您使用的浏览器）。

# c# - EFCodeFirst : 无法定义两个对象之间的关系，因为它们附加到不同的 ObjectContext 对象

> ID：12289180
> 
> 赞同：2
> 
> 时间：2012-09-05T20:22:48.287
> 
> 标签：c#, asp.net-mvc-3, ef-code-first, entity-framework-4.3

我试图找出导致此错误的原因，我列出了我的代码的一些相关区域，希望能帮助回答我的问题。

配方实体的成员集合如下图所示：

```
public virtual IList<Member> Members { get; set; } 
```

这是成员实体上的 Recipes 集合：

```
public virtual IList<Recipe> Recipes { get; set; } 
```

为了在单独的表中建立多对多关系，我在创建 DbContext 时执行以下操作

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // have to specify these mappings using the EF Fluent API otherwise I end up with
        // the foreign key fields being placed inside the Recipe and Member tables, which wouldn't
        // give a many-to-many relationship
        modelBuilder.Entity<Recipe>()
            .HasMany(r => r.Members)
            .WithMany(m => m.Recipes)
        .Map(x => {
            x.ToTable("Cookbooks"); // using a mapping table for a many-to-many relationship
            x.MapLeftKey("RecipeId");
            x.MapRightKey("MemberId");
        });

        modelBuilder.Entity<Recipe>()
            .HasRequired(x => x.Author)
            .WithMany()
            .WillCascadeOnDelete(false);

    } 
```

当模型更改时，我也会为我的数据库播种，我所要做的就是添加到食谱的成员集合中，它似乎能够为我整理出其余部分并将相关键放在我的食谱关系表中。

这是我的配方控制器操作中执行工作的一些代码：

```
var memberEntity = memberRepository.Find((int)memberId);
var recipeEntity = recipeRepository.Find(recipeId);
recipeEntity.Members.Add(memberEntity);
recipeRepository.InsertOrUpdate(recipeEntity);
recipeRepository.Save(); 
```

这是我的食谱存储库中的插入或更新方法

```
 public void InsertOrUpdate(Recipe recipe)
    {
        if (recipe.Id == default(int))
        {
            // New entity
            context.Recipes.Add(recipe);
        } else
        {
            // Existing entity
            context.Entry(recipe).State = EntityState.Modified;
        }
    } 
```

我收到“InvalidOperationException：无法定义两个对象之间的关系，因为它们附加到不同的 ObjectContext 对象”的错误。在这条线上：

```
context.Entry(recipe).State = EntityState.Modified; 
```

有谁知道为什么会这样？我是否必须将成员添加到配方中，反之亦然才能使其正常工作？我不确定问题是什么，因为 recipeEntity 似乎是正确的。

任何帮助将不胜感激，谢谢。

**编辑 如图所示，正在每个存储库（RecipeRepository 和 MemberRepository）中创建上下文，所以我认为这是每个 .Find() 请求使用不同的上下文的问题？这会导致问题吗？**

```
private EatRateShareDbContext context = new EatRateShareDbContext(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T20:29:42.097

我不确定这是解决方案，但似乎您在存储库中使用了不同的上下文。
首先确保您在每个生命周期中都有相同的上下文。根据您的项目类型，生命周期可能会有所不同。（例如对于 web 项目，*通常*每个[HttpContext](https://stackoverflow.com/a/1297100/337294)都是相同的）。您可以使用 IoC 来管理您的上下文生命周期。.Net 的优秀 IoC 库是[autofac](http://code.google.com/p/autofac/)和[Castle Windsor](http://docs.castleproject.org/Windsor.MainPage.ashx)

另外，我认为您对`InsertOrUpdate`方法的调用是不必要的（除非您在`Find`没有跟踪的情况下调用方法。）只需删除该行并查看它是否有效：

```
var recipeEntity = recipeRepository.Find(recipeId);
recipeEntity.Members.Add(memberEntity);
recipeRepository.Save(); 
```

[这里](https://stackoverflow.com/a/6334865/337294)`HttpRequest`提到了一种共享 DbContext 的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T16:37:47.663

如果您使用 AutoFac，则必须将 SingleInstance() 添加到您的注册码中。

示例：builder.Register(a => new EntityContainer()).As().SingleInstance()

EntityContainer 是你的 DbContext

# ffmpeg - 从 FFMPEG 获取每个提取帧的日志行

> ID：12289181
> 
> 赞同：3
> 
> 时间：2012-09-05T20:22:53.263
> 
> 标签：ffmpeg

我正在使用 FFMPEG.exe 从各种视频中提取帧。由于这是一个编程解决方案，并且获得总帧数和/或持续时间可能会很棘手（使用 ffprobe），我想我可以使用控制台输出来检测单个帧的时间戳，但我每 N 帧得到一个输出行像这样：

```
frame=   20 fps=0.0 q=0.0 size=       0kB time=00:00:01.72 bitrate=   0.0kbits/s
frame=   40 fps= 38 q=0.0 size=       0kB time=00:00:04.02 bitrate=   0.0kbits/s
frame=   60 fps= 39 q=0.0 size=       0kB time=00:00:06.14 bitrate=   0.0kbits/s
frame=   70 fps= 38 q=0.0 Lsize=       0kB time=00:00:07.86 bitrate=   0.0kbits/s 
```

是否有命令行选项来强制输出每一帧？如果是这样，我可以提取该`time=`部分。这是当前使用的命令行：

```
ffmpeg.exe -i video.avi -y -threads 0 -vsync 2 %10d.jpeg 
```

理想情况下，替换`%10d.jpeg`为写入帧时间戳的其他格式，但我认为这不存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T06:55:48.073

获取时间戳的错误方法。要获取时间戳，请使用 ffprobe -show_packets 或 ffprobe -show_frames 并解析输出。ffmpeg 管道中的时间每隔几毫秒更新一次，而不是每一帧\

编辑 ffprobe 将尽可能快地运行，因为它在文件上运行。如果文件被播放，它打印的时间戳是帧的实际显示和解码时间戳。

如果您想要 ffmpeg 运行时的时间戳，请更改 ffmpeg 中的代码。有一个名为 do_video_stats 的函数，所有这些都打印在 ffmpeg.c 中。应该能够根据自己的喜好对其进行操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T12:37:41.740

您可以像这样使用[showinfo](http://ffmpeg.org/ffmpeg-filters.html#showinfo)过滤器：

```
ffmpeg -nostats -i  input.wmv -vsync passthrough -an -vf showinfo %10d.png 
```

它产生如下输出：

```
 <..>
    Stream mapping:
      Stream #0:0 -> #0:0 (wmv2 -> png)
    Press [q] to stop, [?] for help    
    n:0 pts:16550 pts_time:16.55 pos:4205325 fmt:rgb24 sar:0/1 s:640x480 i:P iskey:1 type:I checksum:95895BC9 plane_checksum:[95895BC9]
    n:1 pts:24591 pts_time:24.591 pos:6685325 fmt:rgb24 sar:0/1 s:640x480 i:P iskey:0 type:P checksum:FF4CC015 plane_checksum:[FF4CC015]
    'n=...' lines are repeated for each of the extracted frames. 
```

比解析流和使用`pts_time`部分。

# spring - Spring 安全 SessionRegistry 和基于 bean 的配置问题

> ID：12289183
> 
> 赞同：0
> 
> 时间：2012-09-05T20:22:55.433
> 
> 标签：spring, session, spring-security

我正在使用 Spring Security 3.0.5 并尝试获取当前登录用户的计数。我的场景是预认证并使用基于 bean 的配置，而不是`<http>`基于命名空间的配置（在这种情况下，这似乎是微不足道的。

我的配置文件如下：

```
 <beans:bean id="springSecurityFilterChain"
    class="org.springframework.security.web.FilterChainProxy">
    <filter-chain-map path-type="ant">
        <filter-chain pattern="/**/resources/**" filters="none" />
        <filter-chain pattern="/**/logout/**" filters="none" />
        <filter-chain pattern="/service/**" filters="none" />
        <filter-chain pattern="/**"
            filters="sif,concurrencyFilter,shibbolethFilter,smf,logoutFilter,etf,fsi" />

    </filter-chain-map>
</beans:bean>

<beans:bean id="sif"
    class="org.springframework.security.web.context.SecurityContextPersistenceFilter" />

<beans:bean id="scr"
    class="org.springframework.security.web.context.HttpSessionSecurityContextRepository" />

<beans:bean id="smf"
    class="org.springframework.security.web.session.SessionManagementFilter">
    <beans:constructor-arg name="securityContextRepository"
        ref="scr" />
    <beans:property name="sessionAuthenticationStrategy"
        ref="sas" />
</beans:bean>

<beans:bean id="shibbolethFilter"
    class="PreAuthenticatedShibbolethAuthenticationFilter">
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="exceptionIfHeaderMissing" value="true" />
    <beans:property name="continueFilterChainOnUnsuccessfulAuthentication"
        value="true" />
    <beans:property name="developmentMode" value="true" />
    <beans:property name="authenticationSuccessHandler"
        ref="customAuthenticationSuccessHandlerBean" />
</beans:bean>

<beans:bean id="sas"
    class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <beans:constructor-arg name="sessionRegistry"
        ref="sessionRegistry" />
    <beans:property name="maximumSessions" value="1" />
</beans:bean>

<beans:bean id="sessionRegistry"
    class="org.springframework.security.core.session.SessionRegistryImpl" />

<beans:bean id="concurrencyFilter"
    class="org.springframework.security.web.session.ConcurrentSessionFilter">
    <beans:property name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="expiredUrl" value="/session-expired.html" />
</beans:bean>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref='preauthAuthProvider' />
</authentication-manager>

<beans:bean id="preauthAuthProvider"
    class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <beans:property name="preAuthenticatedUserDetailsService">
        <beans:bean id="userDetailsServiceWrapper"
            class="org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper">
            <beans:property name="userDetailsService" ref="userDetailsService" />
        </beans:bean>
    </beans:property>
</beans:bean>

<beans:bean id="logoutHandlerBean"
    class="LogoutSuccessHandlerImpl" />

<beans:bean id="userDetailsService"
    class="CustomJdbcDaoImpl">
    <beans:property name="dataSource" ref="projectDS" />
    <beans:property name="enableGroups" value="true" />
    <beans:property name="enableAuthorities" value="false" />
</beans:bean> 
```

在我的控制器中，我有以下代码：

> @Resource(name="sessionRegistry") 私有 SessionRegistry sessionReg;

```
private void doTest() {
    List<Object> principals = sessionReg.getAllPrincipals();
    for (Object o : principals) {
        List<SessionInformation> siList = sessionReg.getAllSessions(o,
                true);
        for (SessionInformation si : siList) {
            logger.error(si.getSessionId() + " " + si.getPrincipal());
        }
    }
} 
```

该列表`principals`始​​终为空。我觉得应该得到一个to的`PreAuthenticatedShibbolethAuthenticationFilter`过滤器，但是，没有可以设置的这样的属性。`extends` `AbstractPreAuthenticatedProcessingFilter``ref``ConcurrentSessionControlStrategy`

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:58:50.787

SecurityContextPersistenceFilter 需要一个 SecurityContextRespository

```
<bean id="sif" class="org.springframework.security.web.context.SecurityContextPersistenceFilter" >
<property name="securityContextRepository" ref="scr" />
</bean> 
```

# c# - 如何检查附加程序是否被禁用/启用

> ID：12289184
> 
> 赞同：0
> 
> 时间：2012-09-05T20:22:55.653
> 
> 标签：c#, logging, log4net

是否可以确定附加程序是否被禁用（即`<level value="Off">`）？

我想要一个全局标志来确定我的附加程序是否已启用：

```
public static bool isAppenderEnabled = /*...*/; 
```

如果启用了附加程序，那么我将记录以下内容：

```
if(isAppenderEnabled)
{
    MyAppender.Warn("****************************************");
    MyAppender.Warn("Warning title!");
    MyAppender.Warn(String.Format("Some warning message! A:{0}, B:{1}, C:{2}, D:{3}", 0, 1, 2, 3));
    MyAppender.Warn("****************************************");
} 
```

拥有`isAppenderEnabled`标志很重要，因为当附加程序被禁用时，我会节省大量的 CPU 时间，因为我没有构建所有这些字符串。检查附加程序是否关闭的最佳/最简单方法是什么？

PS我试过了`MyAppender.Logger.IsEnabledFor(log4net.Core.Level.Off);`，但是，如果我将日志级别设置为`Warn`它总是返回true `Off`（基本上，它总是说记录器被禁用），所以这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:24:39.820

推荐的做法是，不是有一个全局标志来说明是否启用了日志记录，而是测试每个调用的实际日志记录级别，例如

```
if (MyAppender.IsWarnEnabled)
{
    MyAppender.Warn(String.Format("Some warning message! A:{0}, B:{1}, C:{2}, D:{3}", 0, 1, 2, 3));
} 
```

...

```
if (MyAppender.IsDebugEnabled)
{
    MyAppender.Debug(String.Format("Some debug info! A:{0}, B:{1}, C:{2}, D:{3}", 0, 1, 2, 3));
} 
```

...

```
if (MyAppender.IsErrorsEnabled)
{
    MyAppender.Error(String.Format("Some error message! A:{0}, B:{1}, C:{2}, D:{3}", 0, 1, 2, 3));
} 
```

此方法的优点是您可以将日志设置并保留为 Level.Error 或 Level.Fatal，而无需在警告/调试和信息消息中构造所有字符串。

话虽如此，这是您的选择。要回答您的问题，原因`MyAppender.Logger.IsEnabledFor(log4net.Core.Level.Off);` 不起作用，如果级别设置为 x**或更高**， MyAppender.Logger.IsEnabledFor(x) 将返回 true 。因此，我希望这个调用总是返回 true。

下一个级别是（AFAIK） `log4net.Core.Level.Emergency` ，因此可以检查，但由于该级别不常用，您也可以检查`log4net.Core.Level.Fatal`

`MyAppender.IsFatalEnabled`只是一个属性包装器`MyAppender.Logger.IsEnabledFor(log4net.Core.Level.Fatal)`，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:36:11.293

根据我对 log4net 所基于的 log4j 的理解，您可以通过调用来检查 LOGGER 是否配置为您感兴趣的级别：

```
logger.isEnabledFor(Priority.WARN)  // or whatever log priority you want 
```

没有任何东西可以告诉您是否启用了附加程序。但是，您可以检查是否将给定的命名附加程序分配给您的记录器。你会检查：

```
if(logger.getAppender("MyAppender") == null) 
```

# .htaccess - 将所有内容重定向到 https://www.domain.com

> ID：12289186
> 
> 赞同：0
> 
> 时间：2012-09-05T20:23:15.993
> 
> 标签：.htaccess

我如何将 .htaccess 文件写入[https://www.domain.com](https://www.domain.com)

例子

```
domain.com => https://www.domain.com
www.domain.com => https://www.domain.com
https://domain.com => https://www.domain.com
http://www.domain.com => https://www.domain.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:41:13.147

尝试以下规则：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:38:53.330

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^(.*)$ https://www.domain.com/$1 [R=301,L] 
```

这是我使用的代码。我也在[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)上查看过：)

# php - 在 for 循环中使用 HTTP 请求的更快方法

> ID：12289191
> 
> 赞同：0
> 
> 时间：2012-09-05T20:23:32.200
> 
> 标签：php, mysql, curl, foursquare

我有一个 for 循环，它遍历 MySQL 查询的结果数组。

查询从登录用户创建的表中选择所有行，`wait_times`如下所示：

```
SELECT * FROM `wait_times` WHERE `user_id` = ? 
```

我的问题是我需要检索每一行的场地信息。目前，我正在遍历该数组并向foursquare 发送单独的请求以获取场地信息。此方法可能非常慢，具体取决于查询返回的行数。

为了加快速度，我计划将场地信息存储在一个单独的表中，这最终应该比向 Foursquare API 发送 curl 请求更快。

请你告诉我是否有任何其他方法可以加快这个过程？

我查看了多个查询，但用户可能没有 Foursquare 帐户，并且 API 要求用户注册并登录。

这是我的代码：

```
$query = $this->db->query("SELECT * FROM `wait_times` WHERE `user_id` = ?", array($uid));

$wait_times = $query->result();

foreach ($wait_times as $wait_time) {

    $wait_time->venue = $this->venue_info($wait_time->venue_fq_id);

}

function venue_info($vid) {

    $v = date('Ymd');
    $url = "https://api.foursquare.com/v2/venues/{$vid}?client_id=" . FQ_CLIENT_ID . "&client_secret=" . FQ_CLIENT_SECRET . "&v={$v}";
    curl_setopt($this->ch, CURLOPT_URL, $url);
    $resp = curl_exec($this->ch) or die(curl_error($this->ch));
    $json = json_decode($resp, TRUE);

    if ($json['meta']['code'] == 400)
         return FALSE;

    $venue = $json['response']['venue'];

    return $venue;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:26:35.387

你可以做某种形式的缓存吗？我强烈建议改用参考表。FS 可能对 API 请求有一些规则，您最终可能会被列入黑名单。由于多次握手，任何形式的 HTTPS 通信都很慢。如果可以的话，把时间花在一张桌子上。您甚至可以作弊并使用序列化对象。

# php - PHP MYSQL - 同一查询中的计数和平均值

> ID：12289192
> 
> 赞同：3
> 
> 时间：2012-09-05T20:23:32.033
> 
> 标签：php, mysql, count, average

这可能非常简单，但我正在尝试执行一个返回结果平均值的查询，但我也希望它计算用于获取平均值的行数。例如：

```
Row 1 = 5
Row 2 = 2
Row 3 = 9
Row 4 = 1

Average = 4.25
Count = 4 
```

有没有办法通过一个查询与两个查询来做到这一点。当我使用 avg 函数时，它总是只返回一行，所以我的计数是 1 而不是 4。我需要一个能够平均但也告诉我它经历了多少记录的查询。

我试图避免使用两个查询。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T20:25:13.260

这是非常基本的，应该可以通过搜索发现。

```
SELECT COUNT(field) as `count`, AVG(field) as `average` FROM table_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:27:35.370

在你所说的条件下 - 如果你不是 GROUPing 或类似的东西 - 你只需写

```
SELECT COUNT(col) AS cnt, AVG(col) AS avg FROM tbl; 
```

你应该没有问题。你会得到一行，字段 cnt 和 col 包含你需要的内容。

您遇到的问题可能是由于使用`mysql_num_rows`来获取计数，这是不正确的。 **忘了补充**：或者您没有提供整个问题的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:25:21.890

您可以在单个查询中使用多个聚合函数：

```
SELECT COUNT(*), AVG(field) FROM mytable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:25:43.433

```
SELECT COUNT(*), AVG(YourColumn)
    FROM YourTable 
```

# javascript - 小书签中的 jQuery.getScript() 继续回调，但未成功执行插件

> ID：12289198
> 
> 赞同：0
> 
> 时间：2012-09-05T20:24:16.210
> 
> 标签：javascript, jquery, jquery-plugins, bookmarklet, dom-manipulation

我在创建一个工具时遇到问题，该工具通过代码生成插件在页面上提供自定义覆盖，一旦用户单击外部站点上的书签，该插件就会从服务器中获取。

在小书签内部调用时`$.getScript`，小书签成功获取脚本并开始执行回调函数。一切正常，直到我开始访问插件本身以开始生成 HTML。但是，一旦调用了插件方法，我就无法从控制台接收任何内容，并且覆盖也无法出现。

插件结构（方法本身的来源被省略，因为它是一个公司项目 - 不幸的是，我知道，但很遗憾是必要的）。：

```
(function(jQuery){

    var methods = {
        generateHeader : function () {

        },
        generateItem : function(arguments) {

        },
        generateGridList : function(arguments) {

        },
        hideOverlay : function(){

        }
    }

    jQuery.fn.generator = function(method) {
        console.log("generator reached"); //Doesn't print.
        if(methods[method]){
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method[method] === 'object' || !method){
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.generator');
        }
    };

})( jQuery ); 
```

还有我相关的书签内容：

```
$.getScript(<scriptURL>, function() {

    //generate data to send to server   

    //send unordered lists to server for processing
    $.ajax({
        requestType:'GET',
        url: <url>,
        dataType: 'jsonp',
        jsonp: 'callback',
        success: function(returnedData){
            //success param inside as data is required to proceed.
            $.each(returnedData.data, function(i, val){
                var htmlToAdd,
                content;

                console.log(val); //succeeeds, not null.

                htmlToAdd = $.generator('generateItem', val);

                console.log(htmlToAdd); //fails to reach log at this point

                //code to append to page
            });
        }
    });
}); 
```

所有的方法都是基于 $.css 和 $()、var.append() 和 var.html() 函数以及几个隐藏/删除函数来生成 HTML 和 CSS，以便在退出时将其清除。

这里很晚（发帖时接近晚上 9:30），我正在失去注意力，所以我明天早上到达办公室时会仔细检查这些方法，我只是想澄清这种方法存在的任何缺陷，或者如果我的 AJAX 请求、getScript() 的使用或我的插件结构中有任何明显的错误。如果我知道这可能是一个基于方法的问题，那会缩小我的搜索范围并允许对某些函数进行潜在的重写。

提前致谢，

克雷格·多姆维尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:25:14.353

> 我只是想澄清这种方法存在的任何缺陷，或者如果我的 AJAX 请求、我使用 getScript() 或我的插件结构中有任何明显的错误。

我认为您的基本方法没有任何问题。

需要考虑的一些事项：在使用之前`$.generator(...)`，添加`console.log($.generator)`并查看它是否返回您期望的功能代码。不要假设仅仅因为触发了 getScript 回调，该脚本就被正确执行了。您似乎认为 $ == jQuery; 也许这是一个安全的假设，也许不是。

# android - 广告未显示-Adwhril,Admob

> ID：12289202
> 
> 赞同：0
> 
> 时间：2012-09-05T20:24:32.217
> 
> 标签：android, admob

我实施了 Adwhirl，但没有广告出现

下面是我在其中添加我的 AdWhirl 布局的线性布局的 xml 代码：

```
<LinearLayout
    android:id="@+id/ll_ad"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff"
    >
    </LinearLayout> 
```

下面是我创建 Adwhril 布局并将其添加到 LinearLayout“ll_ad”的代码：

AdWhirlManager.setConfigExpireTimeout(1000 * 60 * 5);

```
 AdWhirlTargeting.setAge(23);
    AdWhirlTargeting.setGender(AdWhirlTargeting.Gender.MALE);
    AdWhirlTargeting.setKeywords("online games gaming");
    AdWhirlTargeting.setPostalCode("94123");
    AdWhirlTargeting.setTestMode(false);

    AdWhirlLayout adWhirlLayout = new AdWhirlLayout(this,
            "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");

    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    int diWidth = 320;
    int diHeight = 52;
    float density = getResources().getDisplayMetrics().density;

    adWhirlLayout.setAdWhirlInterface(this);
    adWhirlLayout.setMaxWidth((int) (diWidth * density));
    adWhirlLayout.setMaxHeight((int) (diHeight * density));
    layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

    LinearLayout layout = (LinearLayout) findViewById(R.id.ll_ad);

    layout.setGravity(Gravity.CENTER_HORIZONTAL);
    layout.addView(adWhirlLayout, layoutParams);
    layout.invalidate(); 
```

以下是 logcat 消息：

```
09-05 23:09:39.055: I/AdWhirl SDK(278): Creating adWhirlManager...
09-05 23:09:39.055: D/AdWhirl SDK(278): Locale is: en_US
09-05 23:09:39.105: D/AdWhirl SDK(278): Hashed device ID is: XXXXXXXXXXXXXXXXXXXXXXXXXXX
09-05 23:09:39.105: I/AdWhirl SDK(278): Finished creating adWhirlManager
09-05 23:09:39.154: D/AdWhirl SDK(278): Prefs{xxxxxxxxxxxxxxxxxxxxxxxx}: {"config": "{"extra":{"location_on":1,"background_color_rgb":{"red":255,"green":255,"blue":255,"alpha":1},"text_color_rgb":{"red":0,"green":0,"blue":0,"alpha":1},"cycle_time":30,"transition":8},"rations":[{"nid":"xxxxxxxxxxxxxxxxxxxxx","type":20,"nname":"zestadz","weight":50,"priority":2,"key":"xxxxxxxxxxxxxxxxxxxxxxxx"},{"nid":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","type":1,"nname":"admob","weight":50,"priority":1,"key":"xxxxxxxxxxxxxxxxxxxxxx"}]}
09-05 23:09:39.154: D/AdWhirl SDK(278): ", "timestamp": 1346886053654}
09-05 23:09:39.164: I/AdWhirl SDK(278): Stored config info not present or expired, fetching fresh data
09-05 23:09:39.284: D/AdWhirl SDK(278): HTTP/1.1 200 OK
09-05 23:09:39.304: D/AdWhirl SDK(278): Received jsonString: {"extra":{"location_on":1,"background_color_rgb":{"red":255,"green":255,"blue":255,"alpha":1},"text_color_rgb":{"red":0,"green":0,"blue":0,"alpha":1},"cycle_time":30,"transition":8},"rations":[{"nid":"xxxxxxxxxxxxxxxxxxxxxxxx","type":20,"nname":"zestadz","weight":50,"priority":2,"key":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},{"nid":"xxxxxxxxxxxxxxxxxxxxxxxxx","type":1,"nname":"admob","weight":50,"priority":1,"key":"xxxxxxxxxxxxxxxxxxxx"}]}
09-05 23:09:39.374: I/AdWhirl SDK(278): Rotating Ad
09-05 23:09:39.384: D/AdWhirl SDK(278): Dart is <11.333519576064566> of <100.0>
09-05 23:09:39.384: D/AdWhirl SDK(278): Showing ad:
09-05 23:09:39.384: D/AdWhirl SDK(278):     nid: xxxxxxxxxxxxxxxxxxxxx
09-05 23:09:39.384: D/AdWhirl SDK(278):     name: admob
09-05 23:09:39.384: D/AdWhirl SDK(278):     type: 1
09-05 23:09:39.384: D/AdWhirl SDK(278):     key: xxxxxxxxxxxxxxxxxxxx
09-05 23:09:39.384: D/AdWhirl SDK(278):     key2: 
09-05 23:09:39.384: D/AdWhirl SDK(278): Valid adapter, calling handle()
09-05 23:09:39.584: D/dalvikvm(278): GC_FOR_MALLOC freed 2017 objects / 531040 bytes in 159ms
09-05 23:09:39.594: E/Ads(278): The android:configChanges value of the com.google.ads.AdActivity must include screenLayout.
09-05 23:09:39.594: E/Ads(278): The android:configChanges value of the com.google.ads.AdActivity must include uiMode.
09-05 23:09:39.594: E/Ads(278): The android:configChanges value of the com.google.ads.AdActivity must include screenSize.
09-05 23:09:39.594: E/Ads(278): The android:configChanges value of the com.google.ads.AdActivity must include smallestScreenSize.
09-05 23:09:39.594: E/Ads(278): You must have AdActivity declared in AndroidManifest.xml with configChanges. 
```

我已经在我的 AndroidManifest 中声明了 AdActivity，但它仍然在 LogCat 中显示为警告。我还尝试在 configChanges 中添加 uiMode、screenSize 等，但它给了我错误。按照显示 Android Manifest 中 AdActivity 的 decalration 的代码：

```
<activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" /> 
```

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:56:17.740

根据[AdMob 的文档](https://developers.google.com/mobile-ads-sdk/docs/)，您需要包含额外的 configChanges。清单中的 AdActivity 应如下所示：

```
<activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

您还应该考虑使用[AdMob 中介](https://support.google.com/admob/bin/answer.py?hl=en&answer=2413211&topic=2403413&parent=1307209&rd=1)而不是 AdWhirl。AdMob 中介得到更好的支持，应该有更多的广告网络集成到其中。

# php - mysqli_error：更新表（程序样式）

> ID：12289203
> 
> 赞同：0
> 
> 时间：2012-09-05T20:24:32.840
> 
> 标签：php, mysqli, updating

我正在使用 PHP 来尝试更新我在 mysqli 表中的信息。我决定尝试使用 mysqli 而不是 mysql。不幸的是，我似乎无法在任何地方找到我的答案，因为我也在尝试以程序风格完成它，因为我不了解 OOP 并且所有教程（我发现的）都在 OOP 中。

下面是我创建的脚本。我添加了评论来说明我认为每个命令在做什么。

```
<?php    
DEFINE('DB_USER', 'root');
DEFINE('DB_PASS', 'password');
DEFINE('DB_NAME', 'test');
DEFINE('DB_HOST', 'localhost');

//connect to db
$dbc = @mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME) or die(mysqli_connect_error($dbc));
mysqli_set_charset($dbc, 'utf8');

//form not submitted
if(!isset($_POST['submit'])){

    $q = "SELECT * FROM people WHERE people_id = $_GET[id]";//compares id in database with id in address bar
    $r = mysqli_query($dbc, $q);//query the database
    $person = mysqli_fetch_array($r, MYSQLI_ASSOC);//returns results from the databse in the form of an array

}else{//form submitted

    $q = "SELECT * FROM people WHERE people_id = $_POST[id]";//compares id in database with id in form
    $r2 = mysqli_query($dbc, $q);//query the database
    $person = mysqli_fetch_array($r2, MYSQLI_ASSOC);//returns results from the database in an array

    $fname = $_POST['fname'];
    $lname = $_POST['lname'];
    $age = $_POST['age'];
    $hobby = $_POST['hobby'];
    $id = $_POST['id'];

    //mysqli code to update the database
    $update = "UPDATE people
               SET    people_fname = $fname,
                      people_lname = $lname,
                      people_age = $age,
                      people_hobby = $hobby
               WHERE  people_id = $id";

    //the query that updates the database
    $r = @mysqli_query($dbc, $update) or die(mysqli_error($r));

    //1 row changed then echo the home page link
    if(mysqli_affected_rows($dbc) == 1){    
        echo "<a href=\"index.php\">home page</a>";
    }
}
?> 
```

更新表格

```
<form action="update.php" method="post">
    <p>First name<input type="text" name="fname" value="<?php echo "$person[people_fname]" ?>" /></p>
    <p>Last name<input type="text" name="lname" value="<?php echo "$person[people_lname]" ?>" /></p>
    <p>Your age<input type="text" name="age" value="<?php echo "$person[people_age]" ?>" /></p>
    <p>Your hobby<input type="text" name="hobby" value="<?php echo "$person[people_hobby]" ?>" /></p>
    <input type="hidden" name="id" value="<?php echo $_GET['id'] ?>" />        
    <input type="submit" name="submit" value="MODIFY" />
</form>` 
```

当我提交表单时，我收到以下错误消息

```
Warning: mysqli_error() expects parameter 1 to be mysqli, boolean given in C:\xampp\htdocs\sandbox\update.php on line 39 
```

我意识到这告诉我问题出在

`$r = @mysqli_query($dbc, $update) or die(mysqli_error($r));`

所以我尝试将sqli代码作为第二个参数放入（我意识到这与放入变量相同，但这是最后的手段），但它似乎不正确并且仍然不起作用。我还查看了 php.net，但无法从他们给出的示例中找出答案

请指教，我以为这很简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:28:37.877

```
$update = "UPDATE people
           SET    people_fname = $fname,
                  people_lname = $lname,
                  people_age = $age,
                  people_hobby = $hobby
           WHERE  people_id = $id"; 
```

您需要引用变量：

```
$update = "UPDATE people
           SET    people_fname = '$fname',
                  people_lname = '$lname',
                  people_age = '$age',
                  people_hobby = '$hobby'
           WHERE  people_id = '$id'"; 
```

**然而**

您应该查看绑定参数 - 您正在接受用户输入并将其直接写入您的数据库，这意味着恶意用户可以做各种恶作剧。

查看[mysqli 的 bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)的手册页- 有很多示例代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:38:04.780

在我看来，问题出在数据库连接 ($dbc) 上。因为你正在使用

```
@mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME) 
```

'@' 可能以某种方式隐藏了连接错误。

另外，请告诉我你在现实生活中进行数据清理，对吧？如果没有，您必须对所有 POST 和 GET 数据运行 mysqli_real_escape_string()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:28:24.913

不要传递`$r`给 mysqli_error。它接受一个可选的 mysql 链接，但无论如何都不接受查询结果。

在您的情况下，将执行查询。计算结果为 false，分配给`$r`. 赋值计算为假，导致您以假的方式`die(mysqli_error($r))`调用`$r`。

我认为你的意思是传递`$dbc`给 mysqli_error。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-09T14:10:06.943

你写了

```
//returns results from the database in an array
$person = mysqli_fetch_array($r2, MYSQLI_ASSOC); 
```

但你应该写

```
//returns results from the database in an array
$person = mysqli_fetch_array(MYSQLI_ASSOC); 
```

# oracle - 具有一对多关系的分页（Hibernate/Spring/Oracle）

> ID：12289205
> 
> 赞同：0
> 
> 时间：2012-09-05T20:24:45.183
> 
> 标签：oracle, spring, hibernate, one-to-many

我需要为具有一对多关系的对象列表实现一致且高效的分页。列表中的项目按组显示，组成员的数量因组而异。某些组可能不包含任何成员。寻呼应该由组成员的数量决定。

例如，考虑一个家庭照片目录。以下是规则：

1.  每个家庭单元在页面上被分组为一组。
2.  同一页面上可以出现任意数量的族。
3.  每页应该有大约 10 张照片。
4.  全家人必须出现在同一页面上。如果页面上的最后一个家庭超出了 10 张图片的限制，要么将该家庭保留在此页面上，要么将它们显示在下一页上，并始终如一地执行此操作。
5.  如果没有家庭成员的照片，家庭分组将显示没有任何照片。由于没有图片，该组将不计入 10 张图片的限制。
6.  一个家庭有10张以上的照片是可能的，这种情况应该处理。

请分享开发此算法的任何提示。我也非常感谢任何特定于平台的提示。该应用程序使用 Hibernate 3.3.2 和 Spring 2.5.6。数据库是Oracle 10g。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:01:28.123

在 Hibernate 中，您可以限制查询返回的行数，即设置页面大小，使用

```
Query.setMaxResults(nbr); 
```

当您想加载与第一页不同的页面时，您可以将页面的第一行设置为

```
query.setFirstResult(rowNr); 
```

两者都只对主表（家庭）有影响，但不限制子表（照片）的行数。然后你有非常特殊的要求（如果第一个家庭有三张照片，那么第二个家庭在那个页面上只允许七张照片，而不是像往常一样十张）。为此，我建议忘记家庭中的 Hibernate 一对多关系，而您手动进行。这使您可以完全控制加载照片并限制它们的数量。

*   在家庭中，您*不*包括照片的休眠属性。
*   相反，您在类族中编写一个方法“getPhotos(int nbr_of_photos)”，您可以在其中手动从照片表中加载该族的照片（使用会话和查询）。您可以根据需要限制他们的数量。如果方便（可选，不必要），您可以将结果缓存在族对象中。
*   在照片中，您可以将族的 id 定义为简单的数字或字符串属性，或者您可以为族定义多对多属性。

# php - 可以在单个 MySQL 事务中将一个查询的结果用于另一个查询吗？

> ID：12289206
> 
> 赞同：1
> 
> 时间：2012-09-05T20:24:58.007
> 
> 标签：php, mysql, transactions, pdo

我正在使用 PHP PDO 和 MySQL 进行编码。

在这种情况下，我是否可以编写一个事务来运行第一个查询（或一系列查询），然后将此查询的结果用作另一个查询的输入？

例如，我想（1）在表 A 中创建新记录并获取自动递增的 ID，（2）在表 B 中创建新记录并获取自动递增的 ID，（3）输入生成的 ID上面来自表 A 和 B 的表 C 的两个字段，表示 A 和 B 之间的关系。

我可以在一次交易中完成上述操作吗？另外，我可以在每个查询之间添加一些编程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:48:02.430

简短的回答：**是**的。

长答案：

当然，这就是交易的设计目的。

只要您的 SQL 供应商支持事务（mysql 在 InnoDB 表上支持），您就可以使用它们来执行一系列查询。

> 另外，我可以在每个查询之间添加一些编程吗？

是的，但是，如果您要更新某个第三方，您可以确保自己回滚更改。

例子：

```
try {
  $db->beginTransaction();
  $db->exec('INSERT INTO tableA (id, column) VALUES (NULL, NOW())');
  $db->exec('SELECT id FROM tableB ORDER BY id DESC LIMIT 1');
  // ...
  $httpClient->post(sprintf('/notify/foo/%d?value=ok', $id));
  $db->commit();
} catch (\PDOException $e) {
    $db->rollback();
    $httpClient->post(sprintf('/notify/foo/%d?value=cancel', $id));
} 
```

请注意，您也可以嵌套事务并`SAVEPOINT`在 InnoDB 表上使用。

# php - 使用 PHP 执行自定义文件名（通过 Apache）

> ID：12289207
> 
> 赞同：0
> 
> 时间：2012-09-05T20:25:00.413
> 
> 标签：php, apache, .htaccess

在我的开发机器上，这按预期工作（请求以`server.com/.myhandler`php 执行），但是当我上传到生产机器（运行 ubuntu 服务器 11.04）时，它只提供未执行的 php。我必须配置什么额外的东西才能让它工作吗？

文件内容`.htaccess`：

```
AddType text/html .myhandler
<FilesMatch "\.myhandler$">
    SetHandler application/x-httpd-php
</FilesMatch>

DirectoryIndex .myhandler index.php index.htm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:53:27.313

`.htaccess`在您的脚本和 .htaccess 所在的目录中，很可能不允许这种类型的配置。把它放在您的 Apache 站点/VirtualHost 配置中：

```
<Directory /absolute/path/to/webroot/>
    AllowOverride All
</Directory> 
```

# php - htaccess - 如何重写小写和大写网址的规则

> ID：12289213
> 
> 赞同：0
> 
> 时间：2012-09-05T20:25:22.767
> 
> 标签：php, .htaccess, google-index

我有以下 .htaccess，我在 google 中获得了双 url....我尝试了一些代码来阻止大写 url....但对我没有任何作用...

双网址示例

```
/Come.php
/come.php 
```

我的 htaccess 文件

```
RewriteEngine On

RewriteRule ^my/shop/([a-zA-Z0-9-]+)/?$ /my/shop/shop.php?cid=$1 [L,QSA]
RewriteRule ^my/brand/([a-zA-Z0-9-]+)/?$ /my/brand/brand.php?cid=$1 [L,QSA]
RewriteRule ^my/social-share/([a-zA-Z0-9-]+)/?$ /my/social-share/share.php?shareid=$1

ErrorDocument 404 http://www.myweb.co.uk/404.php 
```

我不知道如何阻止大写网址..

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:28:25.013

你可以试试：

```
RewriteEngine On

RewriteRule ^my/shop/([a-z0-9-]+)/?$ /my/shop/shop.php?cid=$1 [L,QSA]
RewriteRule ^my/brand/([a-z0-9-]+)/?$ /my/brand/brand.php?cid=$1 [L,QSA]
RewriteRule ^my/social-share/([a-z0-9-]+)/?$ /my/social-share/share.php?shareid=$1

ErrorDocument 404 http://www.myweb.co.uk/404.php 
```

只需删除每个查询中的 AZ...然后正则表达式就不会匹配。

# javascript - 更改内容信息窗口地图 v3

> ID：12289214
> 
> 赞同：15
> 
> 时间：2012-09-05T20:25:24.460
> 
> 标签：javascript, maps, infowindow

我试图使更改显示在作为信息窗口内容的 DIV 中的内容成为可能。我已经能够在信息窗口中将内容从 Hello 更改为 YO。问题是当我关闭信息窗口并重新打开它时，更新的内容会恢复为原始内容。下面是我的代码：

```
 google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
      if (event.type == google.maps.drawing.OverlayType.MARKER) {
          //event.overlay.setTitle("Hello");
          var infowindow = new google.maps.InfoWindow({
              content: '<div id="content" onmouseover="updateContent()">Hello</div>',
              maxWidth: 10
          });
          google.maps.event.addListener(event.overlay, 'click', function() {
              infowindow.open(map, event.overlay);
          });
      }
  });

  function updateContent() {
      document.getElementById('content').innerHTML = "Yo";
  } 
```

我基本上想创建一个默认信息窗口，并允许用户在页面上放置标记后输入自己的文本......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-09-04T00:32:33.767

我发现上面接受的答案不起作用，因为我必须使用 setContent() 如下：

```
google.maps.event.addListener(drawingManager, 'overlaycomplete', function (event) {
    if (event.type == google.maps.drawing.OverlayType.MARKER) {
        //event.overlay.setTitle("Hello");
        var infowindow = new google.maps.InfoWindow({
            content: '<div id="content" onmouseover="updateContent()">Hello</div>',
            maxWidth: 10
        });
        google.maps.event.addListener(event.overlay, 'click', function () {
            infowindow.open(map, event.overlay);
        });
    }
});
function updateContent() {
    infowindow.setContent("Yo");
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-05T21:04:03.507

您必须通过 setContentHTML 方法设置内容

```
var infowindow ;
google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
    if (event.type == google.maps.drawing.OverlayType.MARKER) {
        //event.overlay.setTitle("Hello");
        infowindow = new google.maps.InfoWindow({
            content: '<div id="content" onmouseover="updateContent()">Hello</div>',
            maxWidth: 10
        });
        google.maps.event.addListener(event.overlay,'click',function()
        infowindow.open(map,event.overlay);
     });
}});

function updateContent(){
    infowindow.setContent("YO");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-04T22:57:50.393

最好的方法是不使用 HTML 字符串，而是使用 DOM 元素来创建 InfoWindow 的内容。所以替换：

```
new google.maps.InfoWindow({
        content: '<div id="content" onmouseover="updateContent()">Hello</div>'
    }); 
```

和：

```
var domElement = document.createElement('div');
domElement.innerHTML = '<div id="content" onmouseover="updateContent()">Hello</div>';
new google.maps.InfoWindow({
        content: domElement
    }); 
```

现在您可以轻松地访问 div`document.getElementById("content");`并进行所有您想要的 DOM 操作。

# php - 为 Selenium RC 脚本生成真实的美国街道地址

> ID：12289222
> 
> 赞同：4
> 
> 时间：2012-09-05T20:26:01.920
> 
> 标签：php, google-maps, webdriver, selenium-rc, street-address

我有一些 Selenium RC 测试（用 PHP 编写）在用户需要输入物理地址的沙箱中测试应用程序。地址必须是真实的，否则应用程序会显示错误消息。我希望脚本在每次测试运行时输入一个新的真实美国地址。任何想法如何实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:05:22.040

1.  在以下位置获取一批假名和地址：假名**[生成器](http://www.fakenamegenerator.com/order.php)**。

2.  通过 CASS 认证的服务（例如**[LiveAddress for Lists ）处理列表](http://smartystreets.com/demo)**。这将识别恰好生成的所有*真实有效的美国地址。*

3.  仅为您的测试目的提取有效地址（请参阅下载随附的*简单邮寄文件）。*

如果您在该网站上生成数千个随机地址，您应该会获得大量有效地址进行测试，这纯属偶然。

我确实在 SmartyStreets 工作，这就是我们获取“虚假”数据以展示我们的服务或用于帮助和指导目的（不暴露实际私人信息）的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:19:07.967

您可以使用以下步骤来做到这一点： 1- 从谷歌地图中选择一个随机地点（明智地选择它，您不想选择一个离水太近的地方）。

2-获取该位置的纬度和经度。

3-生成随机数（小的，非常小的，正数和负数）并将它们添加到选定的纬度和经度。

4-使用[google-maps api](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)，您可以检索靠近该位置的地址。

5- 对每个随机的纬度和经度重复 - 现在您已经自动化了任务。

# r - R中的排序和排序

> ID：12289224
> 
> 赞同：56
> 
> 时间：2012-09-05T20:26:18.177
> 
> 标签：r, sorting, r-faq

我无法理解 R 函数`rank`和 R 函数之间的区别`order`。它们似乎产生相同的输出：

```
> rank(c(10,30,20,50,40))
[1] 1 3 2 5 4
> order(c(10,30,20,50,40))
[1] 1 3 2 5 4 
```

有人可以为我解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-05T20:35:05.317

```
set.seed(1)
x <- sample(1:50, 30)    
x
# [1] 14 19 28 43 10 41 42 29 27  3  9  7 44 15 48 18 25 33 13 34 47 39 49  4 30 46  1 40 20  8
rank(x)
# [1]  9 12 16 25  7 23 24 17 15  2  6  4 26 10 29 11 14 19  8 20 28 21 30  3 18 27  1 22 13  5
order(x)
# [1] 27 10 24 12 30 11  5 19  1 14 16  2 29 17  9  3  8 25 18 20 22 28  6  7  4 13 26 21 15 23 
```

`rank`返回一个带有每个值的“等级”的向量。第一个位置的数字是第 9 低的。`order`返回将初始向量`x`按顺序排列的索引。

的第 27 个值`x`是最低的， -`27`的第一个元素也是如此`order(x)`，如果您查看`rank(x)`，则第 27 个元素是`1`。

```
x[order(x)]
# [1]  1  3  4  7  8  9 10 13 14 15 18 19 20 25 27 28 29 30 33 34 39 40 41 42 43 44 46 47 48 49 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-05T20:36:25.327

事实证明，这是一个特例，让事情变得混乱。我在下面为任何感兴趣的人解释：

`rank`返回升序列表中每个元素的顺序

`order`返回每个元素在升序列表中的索引

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-07T01:10:08.733

想到两者之间的区别，我总是觉得很困惑，我总是想，“我怎样才能`order`使用`rank`”？

从贾斯汀的例子开始：

### 使用等级排序：

```
## Setup example to match Justin's example
set.seed(1)
x <- sample(1:50, 30) 

## Make a vector to store the sorted x values
xx = integer(length(x))

## i is the index, ir is the ith "rank" value
i = 0
for(ir in rank(x)){
    i = i + 1
    xx[ir] = x[i]
}

all(xx==x[order(x)])
[1] TRUE 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-16T07:18:13.533

`rank`更复杂，不一定是索引（整数）：

```
> rank(c(1))
[1] 1
> rank(c(1,1))
[1] 1.5 1.5
> rank(c(1,1,1))
[1] 2 2 2
> rank(c(1,1,1,1))
[1] 2.5 2.5 2.5 2.5 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-03-11T17:48:05.657

在外行的语言中，`order`在对值进行排序后给出值的实际位置/位置例如：

```
a<-c(3,4,2,7,8,5,1,6)
sort(a) [1] 1 2 3 4 5 6 7 8 
```

`1`in的位置`a`是 7。同样`2`in的位置`a`是 3。

```
order(a) [1] 7 3 1 2 6 8 4 5 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-07T14:35:54.180

正如 R 提示符中的 ?order() 所述，order 只返回一个排列，它将原始向量排序为升序/降序。假设我们有一个向量

```
A<-c(1,4,3,6,7,4);
A.sort<-sort(A); 
```

然后

```
order(A) == match(A.sort,A);
rank(A) == match(A,A.sort); 
```

此外，我发现该订单具有以下属性（未经理论上验证）：

```
1 order(A)∈(1,length(A))
2 order(order(order(....order(A)....))):if you take the order of A in odds number of times, the results remains the same, so as to even number of times. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-16T23:32:52.553

一些意见：

```
set.seed(0)
x<-matrix(rnorm(10),1)
dm<-diag(length(x))

# compute  rank from order and backwards:
rank(x)  == col(x)%*%dm[order(x),]
order(x) == col(x)%*%dm[rank(x),]

# in special cases like this
x<-cumsum(rep(c(2,0),times=5))+rep(c(0,-1),times=5)
# they are equal
order(x)==rank(x) 
```

# php - CodeIgniter - 文件上传需要验证

> ID：12289225
> 
> 赞同：33
> 
> 时间：2012-09-05T20:26:18.113
> 
> 标签：php, codeigniter, validation

我有 2 个文本字段和 1 个文件上传都是必需的。当我只需要文本字段时，一切正常，但是当我需要文件上传时，验证错误仍然显示需要文件，即使我选择了一个。有人知道我在做什么错吗？提前谢谢了。

//看法

```
<?php echo form_open_multipart('add'); ?>

<fieldset>
    <input type="text" name="name" /><br>
    <input type="text" name="code" /><br>
    <input type="file" name="userfile" /><br><br>
    <input type="submit"value="Add" />
</fieldset>

<?php echo form_close(); ?> 
```

//控制器

```
public function add() {

    $this->form_validation->set_rules('name', 'Name', 'required');
    $this->form_validation->set_rules('code', 'Code', 'required');
    //$this->form_validation->set_rules('userfile', 'Document', 'required');
    //when the above line is active the upload does not go through

    if ($this->form_validation->run() == FALSE) {

        $data['page_view'] = $this->page_view;
        $data['page_title'] = $this->page_title;
        $this->load->view('template', $data);
    }
    else
    {
        $this->load->library('upload');

        if (!empty($_FILES['userfile']['name']))
        {
            $config['upload_path'] = './uploads/';
            $config['allowed_types'] = 'gif|jpg|png|jpeg';     

            $this->upload->initialize($config);

            if ($this->upload->do_upload('userfile'))
            {
                $img = $this->upload->data();
                $file_name = $img['file_name'];

                $name = $this->input->post('name');
                $code = $this->input->post('code');

                $this->load->model('create', 'create_model');
                $this->create_model->create_entry($name, $code, $file_name);

                $data['page_view'] = $this->page_view;
                $data['page_title'] = $this->page_title;
                $this->load->view('template', $data);
            }
            else
            {
                echo $this->upload->display_errors();

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-10T18:13:56.587

我找到了一个完全符合我要求的解决方案。

我变了

```
$this->form_validation->set_rules('name', 'Name', 'trim|required');
$this->form_validation->set_rules('code', 'Code', 'trim|required');
$this->form_validation->set_rules('userfile', 'Document', 'required'); 
```

到

```
$this->form_validation->set_rules('name', 'Name', 'trim|required');
$this->form_validation->set_rules('code', 'Code', 'trim|required');
if (empty($_FILES['userfile']['name']))
{
    $this->form_validation->set_rules('userfile', 'Document', 'required');
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-11T13:00:02.137

> CodeIgniter 文件上传可选......完美运行...... :)

- - - - - 控制器 - - - - -

```
function file()
{
 $this->load->view('includes/template', $data);
}

function valid_file()
{
 $this->form_validation->set_rules('userfile', 'File', 'trim|xss_clean');

 if ($this->form_validation->run()==FALSE) 
 {
    $this->file();
 }
 else
 {
  $config['upload_path']   = './documents/';
  $config['allowed_types'] = 'gif|jpg|png|docx|doc|txt|rtf';
  $config['max_size']      = '1000';
  $config['max_width']     = '1024';
  $config['max_height']    = '768';

  $this->load->library('upload', $config);

  if ( !$this->upload->do_upload('userfile',FALSE))
  {
    $this->form_validation->set_message('checkdoc', $data['error'] = $this->upload->display_errors());

    if($_FILES['userfile']['error'] != 4)
    {
        return false;
    }

  }
  else
  {
    return true;
  }
} 
```

我只是使用这条线，使它成为可选的，

```
if($_FILES['userfile']['error'] != 4)
{
 return false;
}

$_FILES['userfile']['error'] != 4 is for file required to upload. 
```

您可以通过 using 使其变得不必要`$_FILES['userfile']['error'] != 4`，然后它将传递此错误以获取所需的文件，并且可以通过使用**return false**与其他类型的错误一起使用，希望它对您有用....

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-06T04:11:03.473

检查此表单验证扩展库可以帮助您验证文件，当您验证上传字段时，当前表单验证将其视为输入字段，其中值为空 看看这个非常好的表单验证库扩展

[MY_Formvalidation](http://devbro.com/testing/ci_form_validation/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-11T11:06:44.150

你可以使用回调函数，像这样

```
 $this->form_validation->set_rules('userfile', 'Document', 'callback_file_selected_test');

    if ($this->form_validation->run() == FALSE) {
         //error
     }
    else{
           // success       
      }

function file_selected_test(){

    $this->form_validation->set_message('file_selected_test', 'Please select file.');
    if (empty($_FILES['userfile']['name'])) {
            return false;
        }else{
            return true;
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T08:35:25.633

您可以通过覆盖 CI_Form_Validation 的 Run 函数来解决它

将此函数复制到扩展 CI_Form_Validation 的类中。

该函数将覆盖父类函数。在这里我只添加了一个额外的检查，它也可以处理文件

```
/**
 * Run the Validator
 *
 * This function does all the work.
 *
 * @access  public
 * @return  bool
 */
function run($group = '') {
    // Do we even have any data to process?  Mm?
    if (count($_POST) == 0) {
        return FALSE;
    }

    // Does the _field_data array containing the validation rules exist?
    // If not, we look to see if they were assigned via a config file
    if (count($this->_field_data) == 0) {
        // No validation rules?  We're done...
        if (count($this->_config_rules) == 0) {
            return FALSE;
        }

        // Is there a validation rule for the particular URI being accessed?
        $uri = ($group == '') ? trim($this->CI->uri->ruri_string(), '/') : $group;

        if ($uri != '' AND isset($this->_config_rules[$uri])) {
            $this->set_rules($this->_config_rules[$uri]);
        } else {
            $this->set_rules($this->_config_rules);
        }

        // We're we able to set the rules correctly?
        if (count($this->_field_data) == 0) {
            log_message('debug', "Unable to find validation rules");
            return FALSE;
        }
    }

    // Load the language file containing error messages
    $this->CI->lang->load('form_validation');

    // Cycle through the rules for each field, match the
    // corresponding $_POST or $_FILES item and test for errors
    foreach ($this->_field_data as $field => $row) {
        // Fetch the data from the corresponding $_POST or $_FILES array and cache it in the _field_data array.
        // Depending on whether the field name is an array or a string will determine where we get it from.

        if ($row['is_array'] == TRUE) {

            if (isset($_FILES[$field])) {
                $this->_field_data[$field]['postdata'] = $this->_reduce_array($_FILES, $row['keys']);
            } else {
                $this->_field_data[$field]['postdata'] = $this->_reduce_array($_POST, $row['keys']);
            }
        } else {
            if (isset($_POST[$field]) AND $_POST[$field] != "") {
                $this->_field_data[$field]['postdata'] = $_POST[$field];
            } else if (isset($_FILES[$field]) AND $_FILES[$field] != "") {
                $this->_field_data[$field]['postdata'] = $_FILES[$field];
            }
        }

        $this->_execute($row, explode('|', $row['rules']), $this->_field_data[$field]['postdata']);
    }

    // Did we end up with any errors?
    $total_errors = count($this->_error_array);

    if ($total_errors > 0) {
        $this->_safe_form_data = TRUE;
    }

    // Now we need to re-set the POST data with the new, processed data
    $this->_reset_post_array();

    // No errors, validation passes!
    if ($total_errors == 0) {
        return TRUE;
    }

    // Validation fails
    return FALSE;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-29T15:01:26.257

1.  设置规则以检查文件名（如果表单是多部分的）

    `$this->form_validation->set_rules('upload_file[name]', 'Upload file', 'required', 'No upload image :(');`

2.  覆盖`$_POST`数组如下：

    `$_POST['upload_file'] = $_FILES['upload_file']`

3.  然后做：

    `$this->form_validation->run()`

# emacs - 如何在 Tmux emacs 复制模式下复制文件的全部内容（> 1 窗格）？

> ID：12289227
> 
> 赞同：4
> 
> 时间：2012-09-05T20:26:35.193
> 
> 标签：emacs, tmux

我想在 tmux 中使用 emacs 复制模式复制文件的全部内容。

但是，当我进入复制模式时，键入 C-space 开始突出显示文本，然后键入 M-> 跳转到文件末尾，我最终只是跳转到 tmux 窗格底部的文件信息部分。

这是一张显示发生了什么的图片：

编辑：我是新用户，显然还不能发布图片。但基本上你可以想象在 tmux 复制模式下黄色突出显示（选定）的文本。而不是文件的末尾，我只能突出显示到窗格的底部（看起来有点像这样）：

```
-u-:----F1 file_name.rb      Top L1      (Ruby)--------------------------------- 
```

我的问题是，我怎样才能进入复制模式，开始选择文本，然后跳转到文件末尾？

如果这不是实现我的目标的最佳方法（在 tmux 中复制整个文件的内容），那么有什么更好的方法呢？

谢谢！

ps

我已按照此处的说明进行操作：[https ://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard](https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard)

以及实用 tmux 书中的说明。

如果有帮助，这里是我的 .tmux.conf 文件中的相关行（我主要从实用的 tmux 书中复制）：

```
# use pbcopy|pbpaste wrapper script
set-option -g default-command "reattach-to-user-namespace -l zsh"

# send contents of current tmux buffer to system clipboard
bind C-c run "tmux save-buffer - | reattach-to-user-namespace pbcopy"

# support pasting from the system clipboard
bind C-v run "tmux set-buffer $(reattach-to-user-namespace pbpaste); tmux paste buffer"

# overriding "auto-detection" to always use emacs
set-option -g status-keys emacs
set-option -gw mode-keys emacs 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:35:45.383

答案是肯定的，而且很简单：

您需要运行 tmux 命令之一。您可以通过执行 Ctrl+b+: 并键入命令来运行 tmux 命令。

```
load-buffer path 
```

或者

```
loadb path 
```

简称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T04:14:59.557

*tmux*并不真正了解您在它提供的 tty中运行*emacs 。*它只知道已写入该 tty 的内容；因此，当您在*tmux* `copy-mode`中按 M-> 时，它只会移动到窗格的回滚历史记录的底部（M-> while in`copy-mode`运行 ( `copy-mode`-specific) *tmux*命令`history-bottom`）。

你真的需要从*emacs*内部解决这个问题。以下是一些（可交互运行的）示例函数，您可以绑定到*emacs*中的键：

```
(defun write-region-to-tmux-buffer (beg end)
  (interactive "r")
  (shell-command-on-region beg end "tmux load-buffer -" nil nil nil t))

(defun write-buffer-to-tmux-buffer ()
  (interactive)
  (write-region-to-tmux-buffer (point-min) (point-max))) 
```

如果您想绕过缓冲区并改用文件（即从磁盘上的文件创建缓冲区，而不是缓冲区的（可能已修改的）内容），您可以使用如下内容：

```
(defun write-buffer-file-to-tmux-buffer ()
  (interactive)
  (let ((fn (buffer-file-name)))
    (if fn
        (shell-command
         (concat "tmux load-buffer "
                 (shell-quote-argument fn)))
      (error "Not a file-backed buffer")))) 
```

# java - 使用 Spring MVC 提供 sitemap.xml 和 robots.txt

> ID：12289232
> 
> 赞同：22
> 
> 时间：2012-09-05T20:26:56.947
> 
> 标签：java, spring, spring-mvc, sitemap, robots.txt

`sitemap.xml`服务器和`robots.txt`使用的最佳方式是什么`Spring MVC`？我希望`Controller`以最干净的方式通过服务器这些文件。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-05T20:41:03.020

我依靠 JAXB 为我生成 sitemap.xml。

我的控制器如下所示，并且我有一些数据库表来跟踪我想出现在站点地图中的链接：-

**站点地图控制器.java**

```
@Controller
public class SitemapController {

    @RequestMapping(value = "/sitemap.xml", method = RequestMethod.GET)
    @ResponseBody
    public XmlUrlSet main() {
        XmlUrlSet xmlUrlSet = new XmlUrlSet();
        create(xmlUrlSet, "", XmlUrl.Priority.HIGH);
        create(xmlUrlSet, "/link-1", XmlUrl.Priority.HIGH);
        create(xmlUrlSet, "/link-2", XmlUrl.Priority.MEDIUM);

        // for loop to generate all the links by querying against database
        ...

        return xmlUrlSet;
    }

    private void create(XmlUrlSet xmlUrlSet, String link, XmlUrl.Priority priority) {
        xmlUrlSet.addUrl(new XmlUrl("http://www.mysite.com" + link, priority));
    }

} 
```

**XmlUrl.java**

```
@XmlAccessorType(value = XmlAccessType.NONE)
@XmlRootElement(name = "url")
public class XmlUrl {
    public enum Priority {
        HIGH("1.0"), MEDIUM("0.5");

        private String value;

        Priority(String value) {
            this.value = value;
        }

        public String getValue() {
            return value;
        }
    }

    @XmlElement
    private String loc;

    @XmlElement
    private String lastmod = new DateTime().toString(DateTimeFormat.forPattern("yyyy-MM-dd"));

    @XmlElement
    private String changefreq = "daily";

    @XmlElement
    private String priority;

    public XmlUrl() {
    }

    public XmlUrl(String loc, Priority priority) {
        this.loc = loc;
        this.priority = priority.getValue();
    }

    public String getLoc() {
        return loc;
    }

    public String getPriority() {
        return priority;
    }

    public String getChangefreq() {
        return changefreq;
    }

    public String getLastmod() {
        return lastmod;
    }
} 
```

**XmlUrlSet.java**

```
@XmlAccessorType(value = XmlAccessType.NONE)
@XmlRootElement(name = "urlset", namespace = "http://www.sitemaps.org/schemas/sitemap/0.9")
public class XmlUrlSet {

    @XmlElements({@XmlElement(name = "url", type = XmlUrl.class)})
    private Collection<XmlUrl> xmlUrls = new ArrayList<XmlUrl>();

    public void addUrl(XmlUrl xmlUrl) {
        xmlUrls.add(xmlUrl);
    }

    public Collection<XmlUrl> getXmlUrls() {
        return xmlUrls;
    }
} 
```

对于 robots.txt，它看起来如下所示，显然，您需要根据自己的喜好对其进行配置：-

**机器人控制器.java**

```
@Controller
public class RobotsController {

    @RequestMapping(value = "/robots.txt", method = RequestMethod.GET)
    public String getRobots(HttpServletRequest request) {
        return (Arrays.asList("mysite.com", "www.mysite.com").contains(request.getServerName())) ?
                "robotsAllowed" : "robotsDisallowed";
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-06T06:28:41.017

将此行添加到您的调度程序 servlet xml 文件中：

```
<mvc:resources mapping="/robots.txt" location="/WEB-INF/robots.txt" order="0"/> 
```

将 robots.txt 放在 WEB-INF/robots.txt 中。yoursite.com/robots.txt 可以访问该文件

# c# - UserControl 使用的内存是否存储在堆中？

> ID：12289233
> 
> 赞同：0
> 
> 时间：2012-09-05T20:26:57.923
> 
> 标签：c#, wpf, silverlight, memory-management, heap-memory

> **可能重复：**
> [类的字段，它们是存储在堆栈中还是堆中？](https://stackoverflow.com/questions/2565331/fields-of-class-are-they-stored-in-the-stack-or-heap)

我正在阅读一些关于堆栈与堆的文章（只是为了刷新我的知识）。

据我所知，如果我在引用类型（类）中创建值类型，则值类型也将存储在堆中。因为存储值类型的位置取决于其创建位置。

但是，当我们创建我们的应用程序（比如 WPF/Silverlight）时，当我们创建我们的 UserControl、ViewModel 时，它们不也是一个类（一个对象）一个引用类型吗？

所以我有点想知道，所以无论我在 UserControl 和 ViewModel 中创建什么，也会在 Heap 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:29:29.657

> 所以我有点想知道，所以无论我在 UserControl 和 ViewModel 中创建什么，也会在 Heap 中？

是的，这是真的。是一个类，所以它的`UserControl`内存，以及其中的任何变量，都将存储在堆上。

这里有两件事：

1.  这纯粹是一个实现细节。内存的存储位置并不/不应该真正重要。使用语义才是最重要的（即：传递给方法只是复制引用，而不是整个对象等）
2.  变量值可能会在您使用它们时被复制到堆栈中。[有关详细信息，请参阅Eric Lippert 的](https://stackoverflow.com/a/2561622/65358)这个（非常详细的）答案，详细说明存储在类中的字段会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:32:03.423

是的，UserControl 的类以及它包含的所有属性值（即使其中许多是值类型）都将存储在堆上。

不要太担心堆栈与堆。通常了解以下内容就足够了：

*   存储在堆栈上的对象（包括对堆上对象的引用，它们是 IntPtr 值类型）的范围和生存期仅限于为其创建堆栈帧的调用堆栈层。
*   存储在堆上的对象的范围和生命周期仅限于对堆栈或堆上该对象的任何引用。

现在去代码:)

# c++ - C / C ++中简单快速的矩阵向量乘法

> ID：12289235
> 
> 赞同：20
> 
> 时间：2012-09-05T20:27:14.883
> 
> 标签：c++, c, matrix

我需要经常使用`matrix_vector_mult()`which 将矩阵与向量相乘，下面是它的实现。

**问题：有没有一种简单的方法可以显着加快速度，至少快两倍？**

备注：1）矩阵大小约为300x50。它在运行期间不会改变。2) 它必须在 Windows 和 Linux 上都可以运行。

```
double vectors_dot_prod(const double *x, const double *y, int n)
{
    double res = 0.0;
    int i;
    for (i = 0; i < n; i++)
    {
        res += x[i] * y[i];
    }
    return res;
}

void matrix_vector_mult(const double **mat, const double *vec, double *result, int rows, int cols)
{ // in matrix form: result = mat * vec;
    int i;
    for (i = 0; i < rows; i++)
    {
        result[i] = vectors_dot_prod(mat[i], vec, cols);
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-05T20:48:45.223

这是理论上一个好的编译器应该自己做的事情，但是我尝试使用我的系统（g ++ 4.6.3）并通过手动展开 4 个乘法（每个矩阵大约 18us 而不是每个矩阵 34us）：

```
double vectors_dot_prod2(const double *x, const double *y, int n)
{
    double res = 0.0;
    int i = 0;
    for (; i <= n-4; i+=4)
    {
        res += (x[i] * y[i] +
                x[i+1] * y[i+1] +
                x[i+2] * y[i+2] +
                x[i+3] * y[i+3]);
    }
    for (; i < n; i++)
    {
        res += x[i] * y[i];
    }
    return res;
} 
```

但是，我希望这种级别的微优化的结果在系统之间会有很大差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T20:49:38.467

正如甄亚所说，只需使用一个好的 BLAS 或矩阵数学库。

如果由于某种原因您不能这样做，请查看您的编译器是否可以展开和/或矢量化您的循环；假设您发布的函数可用于内联，确保*rows*和*cols*在调用站点都是常量可能会有所帮助

如果您仍然无法获得所需的加速，您正在考虑手动展开，并使用扩展或内联汇编器进行矢量化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:54:18.193

如果大小是恒定的并且事先已知，则将其作为预编译器变量传递，这将允许编译器进行更充分的优化。

# c - Strtok + If 语句

> ID：12289236
> 
> 赞同：1
> 
> 时间：2012-09-05T20:27:21.717
> 
> 标签：c, if-statement, strtok

我是新来的，我对我的程序感到头疼，问题是我需要从键盘获取输入，然后使用 strtok 将其分隔，但必须使用 4 种不同的情况来分隔令牌，并且在每种情况下我都需要打印结果并将其保存到这样的字符串中：

```
input String : Label Instruction #50,Y; Label <with> 
```

输出应如下所示：

```
Label: Label
Instruction: Instruction
Character [1]: #50
Character [2]: Y
Comentaries: Label <with> 
```

如果像这样错过了一条指令，它还必须能够重新调整：

```
Input String: adda
Output String
Label: -----
Instruction: adda
Character 1: -----
Comentaries: ----- 
```

我的代码可以接受第一个和正确的指令，但是当我在第二个输入中输入不正确的指令时，它会忽略它并像第一次尝试一样继续，有时只是添加，我尝试使用 if 能够将每个标记与其分隔符分开但是每次我编译它时，它都会忽略 if 语句，无论我给它什么参数我不知道还能做什么这是我的代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdbool.h>
#include <ctype.h>
int main() {     char word[256];
    fgets(word,256,stdin);
char *token;
while (token != NULL){
            char delimiter[]="\n , ;";
            token=strtok (word,delimiter);
            //if(token != "\n")            //{
            //char delimiter[]="\n , ;";
//token=strtok (word,delimiter);
//if (delimiter != " "||"\t" || "_")
            printf("Label \"%s\"\n", token);
token = strtok (NULL, "\n , ;");   //(NULL, "_,.-")//}
            //token=strtok (word,delimiter);            //}
//printf("Label ----------\n");
if (delimiter != "\n"||"\t")//{
            printf("Instruction \"%s\"\n", token);
token = strtok (NULL, "\n , ;");   //(NULL, "_,.-")//}
printf("Character \"%s\"\n", token);
token = strtok (NULL, "\n , ;");   //(NULL, "_,.-")
printf("Character 2 \"%s\"\n", token);
token = strtok (NULL, "\n , ;");   //(NULL, "_,.-")
printf("Comentaries \"%s\"\n",token);
token = strtok (NULL, ";");
//            printf("Character 2\"%s\"\n", token);
//           token = strtok (NULL, "\n , ;");   //(NULL, "_,.-")
token = NULL;}
//token = NULL;
//printf("Comentaries \"%s\"\n", token);
//token = NULL;
return(0);
} 
```

// 评论是我尝试使其工作的所有失败尝试=（有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T20:28:35.123

```
char *token;
while (token != NULL){ 
```

在哪里`token`初始化？

然后：

```
if (delimiter != "\n"||"\t") 
```

您只是在比较`if`控制表达式中的指针：使用`strcmp`函数来比较字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:32:32.963

我可以看到您的代码存在各种问题，如下所示：

1.您的while循环基于`token`未初始化的。最好使用`do/while`.

2.`delimiter`是一个字符串，不能使用`!=`运算符进行比较。使用`strcmp/strncmp`.

3.每次迭代时检查分隔符的意义何在每次都分配相同的值？我不确定你这样做是为了达到什么目的。AFAIK，`delimiter`调用`strtok`.

4.`token`每次调用前都应通过 NULL 检查，`strtok`因为您允许输入“错误”字符串。

5.这没什么问题，但是`fgets`当你可以简单地做一个时，为什么确切地用于从标准输入中获取输入`scanf`？

以上希望能解决你的问题。

# image - 是否存在任何开源独立的 RESTful 图像服务器？

> ID：12289244
> 
> 赞同：14
> 
> 时间：2012-09-05T20:28:04.620
> 
> 标签：image, image-processing, nginx, gridfs

我计划开发一个具有以下功能的独立的静态图像服务器，但首先想知道开源世界中是否已经存在类似的东西（语言不重要）：

*   主图像上的宁静（粗糙），例如：`/GET/asd983249as`
*   可能批量获取 / LIST
*   支持与图像直接相关的元数据（知识共享信息、尺寸等）（不包括从域到这些图像的引用）
*   宁静的懒惰获取图像的不同“再现”。即，如果演绎版不存在，则根据请求创建它。显然原始图像需要存在。允许不同的操作（调整大小和裁剪开始）
*   例如：（`/GET/asd983249as/100x100`简单调整大小）
*   允许的尺寸是可配置的，所以不要被 DoS 攻击（反正不是那么快）

非功能性：

*   合理的性能/可扩展/ HA（是的，我知道这并没有真正说明什么）
*   可能是内存缓存

考虑走 Mongo GridFS 路线，几乎免费获得 MongoDb 分片和复制。将 Nginx 放在前面，也许（部分）直接使用 nginx-gridfs（见下文）应该允许其余的东西，并且通过一些配置，如果 gridfs 无法自行处理（不知道）一些简单的缓存

**资料来源：**

nginx-gridfs [http://www.coffeepowered.net/2010/02/17/serving-files-out-of-gridfs/](http://www.coffeepowered.net/2010/02/17/serving-files-out-of-gridfs/)

懒惰的想法（以及我正在寻找的简单实现，尽管它似乎比积极维护的项目更业余） [http://sumitbirla.com/2011/11/how-to-build-a-scalable -缓存调整图像服务器/](http://sumitbirla.com/2011/11/how-to-build-a-scalable-caching-resizing-image-server/)

其他接近但不是最终解决方案的东西 [https://github.com/adamdbradley/foresight.js/wiki/Server-Resizing-Images](https://github.com/adamdbradley/foresight.js/wiki/Server-Resizing-Images)

任何已经这样做的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-06T06:50:55.353

我会向你推荐这个项目： [https ://github.com/imbo/imbo](https://github.com/imbo/imbo)

它易于使用，稳定并用于大型项目。

但我仍然对替代方案感到好奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T07:39:37.993

我正在寻找一个项目的选项，我在下面找到了这两个。它们并不完全符合您的要求，但看起来相当成熟。不过，我还没有与他们打交道的经验。

1.  [https://imageresizing.net/](https://imageresizing.net/) Essential 版是开源的。更高级的解决方案不是。
2.  [http://thumborize.me/](http://thumborize.me/)（与相关的[github](https://github.com/thumbor/thumbor)）有许多有趣的功能，如人脸检测、新编解码器、智能裁剪。

# html - XSLT 属性节点 (id) 不能在包含元素的子元素之后创建

> ID：12289248
> 
> 赞同：0
> 
> 时间：2012-09-05T20:28:27.560
> 
> 标签：html, xslt, weblogic, weblogic12c

通常我在 Weblogic12 服务器上执行 XSLT 进程。我一直遇到这个问题

```
net.sf.saxon.trans.DynamicError: An attribute node 
(id) cannot be created after the children of the containing element 
```

在迁移之前，我们的团队完全没有问题......

知道为什么吗？我最近从 BEA Weblogic3 升级到 Oracle Enterprise Weblogic 12。还是我缺少库？

这困扰着我们整个团队！谢谢！

编辑1：

错误指向`<xsl:attribute name="id">`在`<xsl:template name="makeErrorDiv">`

```
<td>
            <xsl:copy-of select="@colspan | @align | @style | @valign | @class | @id | @name"/>
            <xsl:if test="@colspan = '1' and $columnWidth != '' and not(@suppressColWidth='true')"><xsl:attribute name="width"><xsl:value-of select="$columnWidth"/></xsl:attribute></xsl:if>
            <xsl:if test="@rowspan != '1'"><xsl:copy-of select="@rowspan"/></xsl:if>

            <xsl:if test="descendant::ErrMsg">
                <xsl:call-template name="makeErrorDiv"/>
            </xsl:if>
        </td>

<xsl:template name="makeErrorDiv">      
        <div style="display:none;">
            <xsl:choose>
                <xsl:when test="descendant::*[ParentId]">
                    <xsl:attribute name="id"><xsl:value-of select="descendant::ParentId[position() = 1]"/><![CDATA[$err]]></xsl:attribute>
                </xsl:when>         
                <xsl:when test="descendant::*[ErrMsg][Name]">
                    <xsl:attribute name="id"><xsl:value-of select="descendant::*[ErrMsg][position() = 1]/Name"/><![CDATA[$err]]></xsl:attribute>
                </xsl:when>
                <xsl:when test="not(descendant::*[ErrMsg])">
                    <xsl:variable name="name"><xsl:value-of select="descendant::*[Name][position() = 1]/Name"/></xsl:variable>
                    <xsl:variable name="parsed"><xsl:value-of select="substring-before($name, '!')"/></xsl:variable>
                    <xsl:attribute name="id"><!--error here! -->
                        <xsl:choose>
                            <xsl:when test="$parsed = ''"><xsl:value-of select="$name"/></xsl:when>
                            <xsl:otherwise><xsl:value-of select="$parsed"/></xsl:otherwise>
                        </xsl:choose>
                    <xsl:text><![CDATA[$err]]></xsl:text></xsl:attribute>   
                </xsl:when>
                <xsl:when test="descendant::*[ErrMsg][not(Name)]">
                    <xsl:variable name="name"><xsl:value-of select="descendant::*[Name][position() = 1]/Name"/></xsl:variable>
                    <xsl:variable name="parsed"><xsl:value-of select="substring-before($name, '!')"/></xsl:variable>
                    <xsl:attribute name="id">
                        <xsl:choose>
                            <xsl:when test="$parsed = ''"><xsl:value-of select="$name"/></xsl:when>
                            <xsl:otherwise><xsl:value-of select="$parsed"/></xsl:otherwise>
                        </xsl:choose>
                    <xsl:text><![CDATA[$err]]></xsl:text></xsl:attribute>                   
                </xsl:when>
            </xsl:choose>   
            <span style="color: #FF0000; font-family: Arial, Helvetica, sans-serif; font-size: 10px; font-weight: bold; text-decoration: none;"><xsl:value-of select="descendant::ErrMsg[position() = 1]"/></span>
        </div>      
    </xsl:template> 
```

XML 示例...不确定是否有用...整个 XML 文件有 1000 多行

```
<DisclosureRowColor template="OneColumn" position="8" lastPosition="30" colCount="4" color1="#F2F8FE" color2="#ffffff">
                <Cell colspan="1">
                    <ListBox onchange="toggleAddressByAjax();">
                        <Name>APPLICATION_CUSTOMER.EMPLOYED_SINCE_MM!YLI</Name>
                        <Size>1</Size>
                        <Default rtexprvalue="true">mb.getValue("APPLICATION_CUSTOMER.EMPLOYED_SINCE_MM!YLI", "A")</Default>
                        <Map rtexprvalue="true">mb.getGenericLookup("V_YEAR")</Map>
                        <ReadOnly rtexprvalue="true">mb.isReadonly(2)</ReadOnly>
                    </ListBox>
                    <Label class="sTGBFBS">
                        <Caption> &amp;nbsp;&amp;nbsp;Jahre </Caption>
                    </Label>
                    <ListBox onchange="toggleAddressByAjax();">
                        <Name>APPLICATION_CUSTOMER.EMPLOYED_SINCE_MM!MLI</Name>
                        <Size>1</Size>
                        <Default rtexprvalue="true">mb.getValue("APPLICATION_CUSTOMER.EMPLOYED_SINCE_MM!MLI", "A")</Default>
                        <Map rtexprvalue="true">mb.getGenericLookup("V_MONTH")</Map>
                        <ReadOnly rtexprvalue="true">mb.isReadonly(2)</ReadOnly>
                    </ListBox>
                    <Label class="sTGBGBS">
                        <Caption> &amp;nbsp;&amp;nbsp;Monate </Caption>
                    </Label>
                    <ErrMsg/>
                </Cell>
            </DisclosureRowColor> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:12:47.287

我*认为*您的问题可能是元素`<xsl:text>`内部的节点`<xsl:attribute>`

```
<xsl:text><![CDATA[$err]]></xsl:text></xsl:attribute> 
```

我认为应该说

```
<![CDATA[$err]]></xsl:attribute> 
```

因为您正在创建一个属性，而不是一个文本节点。

**更新：** 我试图重现错误，但不能。但是，我确实发现撒克逊人在属性中使用了空格。您可能想尝试去掉一些 XSL 元素之间的一些空白。

```
<xsl:when test="not(descendant::*[ErrMsg])">
                <xsl:variable name="name"><xsl:value-of select="descendant::*[Name][position() = 1]/Name"/></xsl:variable>
                <xsl:variable name="parsed"><xsl:value-of select="substring-before($name, '!')"/></xsl:variable>
                <xsl:attribute name="id"><xsl:choose>
                        <xsl:when test="$parsed = ''"><xsl:value-of select="$name"/></xsl:when>
                        <xsl:otherwise><xsl:value-of select="$parsed"/></xsl:otherwise>
                    </xsl:choose><xsl:text><![CDATA[$err]]></xsl:text></xsl:attribute>   
            </xsl:when> 
```

这可能会解决您看到的实际错误：

```
 <div style="display:none;"><xsl:choose> 
```

我认为必须先将一些文本添加到您的“div”元素中，然后才能添加 id 属性。

# ruby - 指南针不会在图像名称后重新生成精灵

> ID：12289253
> 
> 赞同：4
> 
> 时间：2012-09-05T20:28:50.920
> 
> 标签：ruby, compass-sass

我只是安装并尝试指南针。

我做了`compass create compass_test`

我创建了一个 images/icons 文件夹并将几个 .png 文件放入其中。在 sass 中，我创建了一个文件 icons.scss

```
@import "icons/*.png";
@include all-icons-sprites; 
```

当我`compass compile`第一次执行或添加新文件时，它会生成 sprite 和 css 文件。但是当我修改 .png 文件的名称或将其删除时，它不会注意到差异。

当文件名更改或删除时，有什么方法可以要求指南针重新编译文件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T19:45:20.963

删除正在导入精灵目录的生成样式表文件。

# html - 菜单栏仅垂直保持固定

> ID：12289255
> 
> 赞同：1
> 
> 时间：2012-09-05T20:29:16.290
> 
> 标签：html, css, css-position

我想创建一个菜单栏，当您向上和向下滚动屏幕时，该菜单栏保持垂直，但如果用户左右滚动，我希望菜单栏与其余内容一起左右移动。

例如，如果用户在主页上并决定向下滚动以阅读公告。我希望左侧菜单栏保持原位。但是假设用户放大了我们的网页，因此整个页面不适合屏幕。如果用户决定一直滚动到页面的右侧，我希望菜单栏与页面最左侧的其他内容一起消失。

有没有办法只用css做到这一点？ ![在此处输入图像描述](../Images/e80aedf8a9fd2c7fe2bf8f7c260a3ab3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T06:18:18.683

I had a similar problem and I found some help and did some customizations for my own need. Check my code below:

CSS

```
#sidebar {
  top:70px; // make it for your own
  left: 0px; //make it for your own
  position: absolute;
} 
```

jQuery

```
var leftOffset = parseInt($("#sidebar").css('left'));

$(window).scroll(function() {

  $("sidebar").css({

    'left': $(this).scrollLeft + leftOffset
  })
}); 
```

# css - 如何使用 CSS 编写带有圆角和阴影的 3 边框（没有左侧）？

> ID：12289256
> 
> 赞同：0
> 
> 时间：2012-09-05T20:29:15.837
> 
> 标签：css

我希望我的盒子看起来像这样，除了左侧是空白的：

```
.box{
    width: 190px;
    height: 90px;
    display: inline-block;
    padding: 5px;
    margin: 50px;
}

#box4sides{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -moz-box-shadow: 0 0 1px 1px #dbdbdb;
    -webkit-box-shadow: 0 0 1px 1px #DBDBDB;
    box-shadow: 0 0 1px 1px #DBDBDB;
    background: white;
    border: 1px solid #CDCDCC;
} 
```

这是我最好的尝试：http: [//jsfiddle.net/7dpUA/2/](http://jsfiddle.net/7dpUA/2/)

我发现了其他 3 面盒子的例子，但它们的顶部或底部都被移除了，我无法将其转化为我的案例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:52:08.090

我的建议是从您的 3 面框中删除该类`shadow`，并在您的 3 面框上添加这一点 css。

```
box-shadow: 1px 1px 1px 0 #DBDBDB, 1px -1px 1px 0 #DBDBDB;
-webkit-border-top-right-radius: 5px;
-webkit-border-bottom-right-radius: 5px;
-moz-border-radius-topright: 5px;
-moz-border-radius-bottomright: 5px;
border-top-right-radius: 5px;
border-bottom-right-radius: 5px; 
```

box-shadow 属性的解释：
`box-shadow: 1 2 3 4 color;`

1.  水平偏移 - 正值向右移动阴影，负值向左移动。
2.  垂直偏移 - 正值向下移动阴影，负值向上移动。
3.  模糊半径 - 值越大，越模糊。
4.  传播距离 - 正值扩展阴影，负值收缩。

颜色是不言自明的。**[这是您编辑的 jsFiddle 以显示您想要的内容。](http://jsfiddle.net/7dpUA/6/)**

就影子而言，你也不再需要`position: relative;`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:55:15.780

这是[***你***](http://jsfiddle.net/jcurran/9afLV/)要找的吗？为了强调，我夸大了边框等，并增加了阴影元素的第一个参数以将其向右扔一点，避免“假边框”效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T22:17:27.550

在盒子周围创建一个包装 div，**溢出**为**隐藏**，并为*#box4sides* div提供**负边距。**

 *检查这个 jsFiddle：http: [//jsfiddle.net/7dpUA/22/](http://jsfiddle.net/7dpUA/22/)

这是你需要的吗？*

# ruby-on-rails - Rails omniauth 并用 vk 设计麻烦

> ID：12289263
> 
> 赞同：0
> 
> 时间：2012-09-05T20:29:33.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth, vk

我将为我的 rails 应用程序实现 facebook 和 vkontakte 登录（注册），并且使用 facebook 一切正常（登录和重新登录都可以），按照手册 [here完成](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

但是由于 vkontakte 出了点问题，我仍然会得到“空”页面

这是我的代码：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    # You need to implement the method below in your model (e.g. app/models/user.rb)
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end

  def vkontakte
    @user = User.find_for_vkontakte_oauth(request.env["omniauth.auth"], current_user)
    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Vkontakte"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.vkontakte_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

和型号：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable,
         :token_authenticatable, :lockable, :timeoutable, :omniauthable #:confirmable, 

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :provider, :uid, :name
def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
    unless user
      user = User.create(name:auth.extra.raw_info.name,
                           provider:auth.provider,
                           uid:auth.uid,
                           email:auth.info.email,
                           password:Devise.friendly_token[0,20]
                           )
    end
    user
  end

  def self.new_with_session(params, session)
    super.tap do |user|
      if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
        user.email = data["email"] if user.email.blank?
      end
      if data = session["devise.vkontakte_data"] && session["devise.vkontakte_data"]["extra"]["raw_info"]
        user.email = data["email"] if user.email.blank?
      end
    end
  end

  def self.find_for_vkontakte_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
    unless user
      user = User.create(name:auth.info.name,
                           provider:auth.provider,
                           uid:auth.uid,
                           email:auth.extra.raw_info.domain+'@vk.com',
                           password:Devise.friendly_token[0,20]
                           )
    end
    user
  end 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:16:38.963

你试过 Ryan Bates 制作的omniauth railscasts 吗？

[http://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication) - 这里是 facebook

[http://railscasts.com/episodes/235-omniauth-part-1](http://railscasts.com/episodes/235-omniauth-part-1) http://railscasts.com/episodes/236-omniauth-part-2

这些用于来自不同社交网络的身份验证。我开始使用 VK api，所以如果您在实施这些 railscast 时遇到问题 - 请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:53:26.563

检查您的服务器主机是否像在 vk 中注册的一样。对于开发，您可以编辑 /etc/hosts 并通过此主机访问您的站点。

示例：站点是 inmyhouse.su

/etc/hosts: 127.0.1.1 local.inmyhouse.su

# android - 带有 EditText 的 AlertDialog 的更好解决方案

> ID：12289267
> 
> 赞同：5
> 
> 时间：2012-09-05T20:30:00.857
> 
> 标签：android, android-alertdialog, android-edittext, ime

我想要一个带有 EditText 字段的 AlertDialog 来接受输入。这本身就很简单。但是，我希望有一些“明显”的功能可以作为此请求的结果。我会一个接一个。我正在寻找对这些事情有更简单解决方案的人。我猜解决方案是，“写你自己的自定义对话框，你这个懒惰的人。”

**`AlertDialog`带着`EditText`**

```
final EditText input = new EditText(context);
final AlertDialog dlg = new AlertDialog.Builder(this).
    setTitle("Title").
    setView(input).
    setCancelable(false).
    setPositiveButton(android.R.string.ok, new OnClickListener()
    {
        @Override
        public void onClick(final DialogInterface dialog, final int which)
        {
            /* Handle ok clicked */
            dialog.dismiss();
        }
    }).
    setNegativeButton(android.R.string.cancel, new OnClickListener()
    {
        @Override
        public void onClick(final DialogInterface dialog, final int which)
        {
            /* Handle cancel clicked */
            dialog.dismiss();
        }
    }).create();
dlg.show(); 
```

耶，效果很好。如果该输入字段立即获得焦点（并显示键盘）肯定会很好，对吗？

**`AlertDialog`重点关注`EditText`** 以下代码将在之后`create()`和之前`dlg.show()`

```
/** This requires API Level 8 or greater. */
dlg.setOnShowListener(new OnShowListener()
{
    @Override
    public void onShow(final DialogInterface dialog)
    {
        input.requestFocus();
        ((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(input, 0);
    }
}); 
```

干得好……我猜。现在我有了这个专注的输入，如果它尊重输入 IME 选项会很好......

**`AlertDialog`专注`EditText`于自定义 IME 选项**

```
input.setImeOptions(EditorInfo.IME_ACTION_DONE);
input.setOnEditorActionListener(new OnEditorActionListener()
{
    @Override
    public boolean onEditorAction(final TextView v, final int actionId, final KeyEvent event)
    {
        /** Same code here that goes in the dialog.setPositiveButton OnClickListener */
        dlg.dismiss();
        return true;
    }
}); 
```

现在这确实不是一个很好的解决方案（重复代码），但它可以工作......

人们是否有更好的方法来解决这个问题，或者在对话中向用户询问一小段信息真的很少见，还是我只是一个赢家，应该去写我自己的对话？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T20:45:39.547

*根据对 OP 的评论：*

您不必在`OnEditorActionListener`. 您可以告诉操作系统在激活时单击“确定”按钮，而不是重复代码。

像这样的东西：

```
public boolean onEditorAction(final TextView v, final int actionId, final KeyEvent event) {
    dlg.getButton(DialogInterface.BUTTON_POSITIVE).performClick(); // Click OK button
    return true;
} 
```

总的来说，我会说您采用了正确的方法（[有关通过对话框收集信息的文档](http://developer.android.com/guide/topics/ui/dialogs.html)）。正如我在评论中提到的，操作系统使用`AlertDialog`w/`EditText`来添加字典单词（到用户字典），所以这是操作系统中的预期功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:35:31.677

您可以随时切换到`Activity`带有主题的`Theme.Dialog`主题或`DialogFragment`在调整小部件时为您提供更多自由的主题。`AlertDialogs`可能更适合显示信息。希望这可以帮助。

# asp.net - How to call WCF at a scheduled timings?

> ID：12289271
> 
> 赞同：0
> 
> 时间：2012-09-05T20:30:39.863
> 
> 标签：asp.net, wcf, scheduling

I have to export data from a database in the form of flat files. I already have an asp.net website which saves data into the db. I am thinking of creating a WCF webservice project as part of the website solution. This WCF webservice will have methods to export flatfiles. I am also planning to create a console app to call this webservice at scheduled times.

I have the following questions:

1.  Once the website is hosted on IIS along with WCF, can the console app call the WCF or WCF has to be hosted separately?
2.  How to debug the process?
3.  is there any better way of doing it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:13:51.593

你的计划对我来说听起来不错。

如果我这样做，我可能会创建一个具有[单向操作](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx#S1)的 WCF 服务，以便客户端应用程序在作业完成之前不会等待响应。

我可能会使用 Powershell 和计划任务来访问 WCF 服务，或者甚至使用免费的[Pingdom](http://www.pingdom.com/)服务来定期访问服务端点。

要在本地调试 - 如果 WCF 是它自己的项目，请确保将其设置为 VS 中的启动项目，然后应用断点，运行调试并通过浏览器或[Fiddler](http://www.fiddler2.com/fiddler2/)请求端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:34:49.057

> 一旦网站与 WCF 一起托管在 IIS 上，控制台应用程序是否可以调用 WCF 或 WCF 必须单独托管？

控制台应用程序可以调用 WCF Web 服务。它**不必**单独托管。

> 如何调试进程？

理想情况下，在您自己的 PC 上。简单的方法是在 Visual Studio 的一个实例中启动 WCF Web 服务，在 VS 的另一个实例中启动控制台应用程序。您可以在每个项目上放置断点并遵循逻辑

> 有没有更好的方法呢？

有很多方法可以做一件事，但在这种情况下，你的方法对我来说看起来不错。

# php - 如何使用 XPath 检查是否 节点存在

> ID：12289272
> 
> 赞同：8
> 
> 时间：2012-09-05T20:30:44.403
> 
> 标签：php, xml, xpath

我正在使用 PHP 和 XPath 连接到基于 XML 的远程 API。来自服务器的示例响应如下所示。

```
 <OTA_PingRS>
        <Success />
        <EchoData>This is some test data</EchoData>
    </OTA_PingRS> 
```

您可以看到没有起始标签`<Success>`，那么如何搜索`<Success />`使用 Xpath 的存在？

谢谢西蒙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T20:47:32.570

该`<Success />`元素是一个[空元素](https://stackoverflow.com/questions/2279501/what-is-an-empty-element)，这意味着它没有任何价值。它既是开始标签，也是结束标签。

您可以[使用 XPath 函数测试节点是否存在`boolean()`](http://www.w3.org/TR/xpath/#function-boolean)

> 布尔函数将其参数转换为布尔值，如下所示：
> 
> *   一个数为真当且仅当它既不是正零也不是负零也不是 NaN
> *   一个节点集当且仅当它非空时为真
> *   字符串为真当且仅当其长度非零
> *   四种基本类型以外的类型的对象以依赖于该类型的方式转换为布尔值

* * *

为此，`DOMXPath`您需要使用该[`DOMXPath::evaluate()`](http://php.net/manual/en/domxpath.evaluate.php)方法，因为它将返回一个类型化的结果，在本例中为 a `boolean`：

```
$xml = <<< XML
<OTA_PingRS>
    <Success />
    <EchoData>This is some test data</EchoData>
</OTA_PingRS>
XML;

$dom = new DOMDocument;
$dom->loadXml($xml);

$xpath = new DOMXPath($dom);
$successNodeExists = $xpath->evaluate('boolean(/OTA_PingRS/Success)');

var_dump($successNodeExists); // true 
```

[演示](http://codepad.viper-7.com/hBfops)

* * *

当然，你也可以只查询`/OTA_PingRS/Success`返回的是否有结果`DOMNodeList`：

```
$xml = <<< XML
<OTA_PingRS>
    <Success />
    <EchoData>This is some test data</EchoData>
</OTA_PingRS>
XML;

$dom = new DOMDocument;
$dom->loadXml($xml);

$xpath = new DOMXPath($dom);
$successNodeList = $xpath->evaluate('/OTA_PingRS/Success');

var_dump($successNodeList->length); 
```

[演示](http://codepad.viper-7.com/6t7FiA)

* * *

您还可以使用[SimpleXML](http://php.net/manual/en/simplexml.examples-basic.php)：

```
$xml = <<< XML
<OTA_PingRS>
    <Success />
    <EchoData>This is some test data</EchoData>
</OTA_PingRS>
XML;

$nodeCount = count(simplexml_load_string($xml)->xpath('/OTA_PingRS/Success'));

var_dump($nodeCount); // 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:22:50.677

语法：

```
<Success /> 
```

完全[等同](http://www.w3.org/TR/xhtml1/#h-4.6)于

```
<Success></Success> 
```

为了测试 的存在`<Success />`，您只需使用如下路径：

```
//OTA_PingRS/Success[1] 
```

您现在可以测试 uf 结果为空。如果是，则该`<Success />`元素不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T09:15:49.263

使用`boolval($xpath)`函数检查要检查是否存在的 xpath 的布尔值。

# c# - FirstOrDefault() 方法是处理这种情况的好方法吗

> ID：12289274
> 
> 赞同：2
> 
> 时间：2012-09-05T20:30:47.290
> 
> 标签：c#, entity-framework, entity-framework-4.1

我有一个类`Group`，其中包含作为组成员的用户列表。
我使用`FirstOrDefault()`方法来检查打开组页面的用户是否已经在该组中。
基于此，我显示“加入组”或“离开组”按钮。
我只是想知道这是否是这种情况的好方法还是有更好的方法？

```
public class Group
{
    public virtual ICollection<UserInGroup> UsersInGroups { get; set; }
    ...
} 
```

在详细操作方法中，我首先加载组，然后检查组中的用户：

```
public ActionResult Show(int groupId, string title)
{
    GroupViewModel groupiewModel = new GroupViewModel();

    var model = groupsRepository.GetGroupById(groupId);

    groupiewModel.Group = model;

    Guid userId = (Guid)Membership.GetUser().ProviderUserKey;
    var alreadyInGroup = model.UsersInGroups.FirstOrDefault(x => x.UserId == userId);

    if (alreadyInGroup != null)
        groupiewModel.IsInThisGroup = true;
    ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T20:32:10.553

我认为`Any`是更好的选择

```
bool alreadyInGroup = model.UsersInGroups.Any(x => x.UserId == userId); 

if (alreadyInGroup)
{
     .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:33:38.887

使用 Any 而不是 FirstOrDefault 意味着您不会在创建实例上浪费时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:35:17.527

我了解到您希望在数据库服务器上执行过滤条件。您正在调用`FirstOrDefault`an `IEnumerable`，这意味着您正在下载*所有*用户并在内存中进行过滤。

所以这不是正确的方法。

相反，构建一个 LINQ 查询并执行它。

在这种情况下，您可以切换到`Any`.

# php - 语法错误 - 意外的“：”

> ID：12289278
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:31:18.773
> 
> 标签：php, syntax-error, form-submit

我的 php 脚本根据按下的提交按钮指向一个 url。但是，当我运行测试时，我收到一条错误消息，指出第 4 行包含意外的“：”，但我的第 4 行是带有 url 的标题脚本？

我很困惑，因为我还有其他类似的脚本，但他们没有给我那个错误。谁能告诉我我错过了什么，可能很简单，我之前被抓到很简单。

```
<?php
if ($_REQUEST['Dish1'] == 'Dish1')
{
header(“Location: http://blahblah”.urlencode($_POST[‘uid’]));
}
else if ($_REQUEST['Dish1'] == 'Dish2')
{
header(“Location: http://blahblah2”.urlencode($_POST[‘uid’]));
}
else if ($_REQUEST['Dish1'] == 'Dish3')
{
header(“Location: http://blahblah3”.urlencode($_POST[‘uid’]));
}
etc.....
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:33:15.290

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:33:54.507

You are using the wrong quotes... use "" instead of “”. [Refer to Wikipedia](http://en.wikipedia.org/wiki/Quotation_mark), you must use typewriter quotes, not curly or inverted commas.

PD: Also `PHP Parse error: syntax error, unexpected '.' on line 15` ; )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:43:12.083

Replace you code with following

```
<?php

if ($_REQUEST['Dish1'] == 'Dish1')
{
header("Location: http://blahblah.urlencode".($_POST['uid']));
}
else if ($_REQUEST['Dish1'] == 'Dish2')
{
header("Location: http://blahblah2".urlencode($_POST['uid']));
}
else if ($_REQUEST['Dish1'] == 'Dish3')
{
header("Location: http://blahblah3".urlencode($_POST['uid']));
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:53:09.743

Is it not much easier to write:

```
$lookup = array('Dish1' = > 'http://blba1', 'Dish2' = > 'http://blba2');

if( isset($lookup[$_REQUEST['Dish1']]))
  header("Location: " . $lookup[$_REQUEST['Dish1']]); 
```

# mysql - 选择特定年份的所有行，以及受影响组的所有行

> ID：12289283
> 
> 赞同：1
> 
> 时间：2012-09-05T20:31:44.800
> 
> 标签：mysql, select

我有一个表，其中每百行具有相同的 id（请参阅下面缩短的示例中的“chart_id”）。

如果我们将具有相同“chart_id”的每一行视为“图表”，我如何使用 mysql 查询选择其中包含特定年份的每个图表。

例如，如何选择其中包含 2009 年的每个图表（图表 2 和图表 3）：

*编辑*：如果我寻找 2009 年，应该选择 id 为 4,5,6 和 7,8,9 的行。

```
id   chart_id  time
1    1         2008
2    1         2008
3    1         2008

4    2         2008
5    2         2008
6    2         2009

7    3         2009
8    3         2009
9    3         2009

10   4         2010
11   4         2010
12   4         2010 
```

有什么建议么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:35:24.477

只需使用`DISTINCT`：

```
SELECT DISTINCT chart_id
FROM myTable
WHERE time = 2009 
```

或者，您的意思是您想要该图表[SQL Fiddle](http://sqlfiddle.com/#!2/484c7/1)的所有行：

```
SELECT *
FROM myTable t1
WHERE EXISTS(SELECT 1 
             FROM myTable t2 
             WHERE t2.chart_id = t1.chart_id AND t2.time = 2009) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:33:53.100

似乎`SELECT DISTINCT chart_id WHERE year ...`可行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:35:15.223

```
SELECT DISTINCT chart_id FROM table_name WHERE time = 2009 
```

# javascript - jquery 的 attr() 是异步的吗？

> ID：12289284
> 
> 赞同：4
> 
> 时间：2012-09-05T20:31:45.723
> 
> 标签：javascript, jquery, asynchronous

假设我有一个循环，它在每次迭代时附加一个带有 img 标签的 div，然后使用以下内容加载其 src 属性：

```
$("img").last().attr('src', imageSource); 
```

如果我对几个不同的图像进行几次迭代，我是否会异步加载这些图像？

如果没有，如何通过循环异步加载图像？我很乐意得到一些 ajax 技巧。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T20:35:15.033

`attr`不是异步的。这是一个非常简单的操作，可以立即有效地进行。

但是，从服务器加载图像需要更长的时间。该过程*是*异步的：一旦您设置了属性，您就可以忘记它，浏览器将在后台为您加载图像。

异步加载图像不是一种选择：它实际上是加载图像的唯一方式。

# javascript - 节点类型：一切看起来都像文本。而且不是很有趣的文字。为什么？

> ID：12289285
> 
> 赞同：0
> 
> 时间：2012-09-05T20:31:48.957
> 
> 标签：javascript, html, dom, drag-and-drop

我有一个 LI 的 UL，每个都包含一个 IMG 和一个包含一些简短文本的 SPAN，我的代码旨在在有人将鼠标悬停在 IMG 上时显示 SPAN，正在查找和查找仅 TEXT 节点。

代码，直到某一点，是：

```
drag.mousemove = function (event) {
   if (event == null) {
       event = window.event;
   }
   var lowest_distance = +Infinity;
   var lowest_distance_index = null;
   var root = document.getElementById('path1');
   if (!root) {
       return;
   }
   var intermediate = root.childNodes;
   var images = [];
   var best_image = null;
   for (var outer = 0; outer < intermediate.length; ++outer) {
       console.log('Outer: ' + intermediate[outer].nodeName);
   }
} 
```

它唯一报告的是“外部：#text”。path1 DIV 包含任何拖到它上面的图像；从浏览器行为的角度来看，看起来图像已成功拖放，并且沿途丢失了 SPAN。但是控制台并没有进入 path1 的子节点的内部循环；在我引用的内容之后是“内部：”记录的子节点到外部子节点的遍历，我不记得在日志中看到过“内部：”。当我记录节点的内容时，它们都是一个换行符和八个空格，没有制表符。

而且，在 HTML 源代码中，path1 的开始和结束 DIV 标记之间的全部内容是一个换行符和八个空格，没有制表符。

是否有一种明智的方法来进行适用于图像的拖放操作，并且旨在将包含 LI 的（在这种情况下）移动到目标区域，但 DOM 检查仅发现文本节点？或者，是否有理由将初始 DOM 内容冻结为唯一可以识别的内容？

# html - 在 HTML5 中，一个 在技 术上是块级元素，但表现为内联元素。这是一个特殊的“混合”元素吗？

> ID：12289288
> 
> 赞同：1
> 
> 时间：2012-09-05T20:32:01.743
> 
> 标签：html, inline, block

W3Schools 定义的块级元素在元素之前和之后都有换行符，例如*p、h1*等。非嵌套内联元素要么从它们自己的行开始（无换行符），要么保持在同一行，如果嵌套。

虽然*span*表现正常（以及所有其他内联元素）。*div*永远不会像块元素一样创建换行符，而只会在 div 元素开头的新行上开始。

也许我错过了一些东西，因为每个人都在谈论*DIV*是块级的，但它的行为就像一个内联元素，如果没有嵌套，它会开始一个新行，不会创建换行符，但是当一个*div*与另一个*div*嵌套它只是创建一个新行。

*DIV*是唯一这样的“混合”元素吗？我错过了更基本的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T20:40:25.563

没有元素会创建换行符。您只是看到不同默认样式的效果，它们具有不同的`margin`和`padding`值。默认样式因浏览器而异，但通常看起来类似于 HTML 4 规范中包含的 [非常过时] 参考样式表：http: [//www.w3.org/TR/CSS2/sample.html](http://www.w3.org/TR/CSS2/sample.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:40:47.290

[Mozilla Developer Network](https://developer.mozilla.org)或 MDN 是了解 HTML 的最佳场所。

这里有一个解释`<div>`：**[div | Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/HTML/Element/div)**：

> Document Division ( `<div>`) HTML 元素是***流内容的通用容器，它本身并不代表任何东西***。它可用于对元素进行分组以进行样式化（使用 class 或 id 属性），或者因为它们共享属性值，例如 lang。只有在没有其他语义元素（例如`<article>`或`<nav>`）合适时才应使用它。

**以下是块级**元素和**内联**元素之间的比较：

* * *

**[块级元素](https://developer.mozilla.org/en-US/docs/HTML/Block-level_elements)：**

* * *

> 内联元素和块级元素之间的区别是：
> 
> **格式化**
> 
> 默认情况下，块级元素从新行开始。
> 
> **内容模型**
> 
> 通常，块级元素可能包含内联元素和其他块级元素。这种结构区别中固有的想法是块元素创建比内联元素“更大”的结构。

* * *

**[内联元素](https://developer.mozilla.org/en-US/docs/HTML/Inline_elements)：**

* * *

> 内联元素和块级元素的区别：
> 
> **内容模型**
> 
> 通常，内联元素可能只包含数据和其他内联元素。
> 
> **格式化**
> 
> 默认情况下，内联元素不以新行开头。

# objective-c - NSInvalidArgumentException：对象不能为零

> ID：12289290
> 
> 赞同：0
> 
> 时间：2012-09-05T20:32:06.713
> 
> 标签：objective-c, nsarray, null

我对 Xcode 比较陌生，正在尝试编写一个应用程序来播放教程中的 iTunes 视频，但我的应用程序不断崩溃。

它给了我错误代码：

> 'NSInvalidArgumentException'，原因：' *** -[__NSArrayM insertObject:atIndex:]：对象不能为 nil'

我使用了断点并找到了问题所在，但我不确定如何解决它。给我带来问题的行是：

```
[list addObject:[item valueForProperty:MPMediaItemPropertyAssetURL]]; 
```

有没有人有任何想法？以下是 .m 文件代码：

```
@implementation iPodLibrary

+(NSArray *) movieList {

    NSMutableArray *list =

    [[[NSMutableArray allocWithZone:NULL] init] autorelease];

    MPMediaQuery *query = [[MPMediaQuery alloc] init];

    [query addFilterPredicate:[MPMediaPropertyPredicate

                               predicateWithValue:[NSNumber numberWithInteger:(MPMediaTypeAny ^ MPMediaTypeAnyAudio)]
                               forProperty:MPMediaItemPropertyMediaType]];

    for (MPMediaItem* item in [query items]) {
        [list addObject:[item valueForProperty:MPMediaItemPropertyAssetURL]];
    }
    [query release];

    return list;    
}

+ (NSString *) movieTitle:(NSURL *)aURL {

    NSString *aTitle = nil;

    if (aURL) {

        AVAsset* aAsset = [[AVURLAsset allocWithZone:NULL]
                           initWithURL:aURL options:nil];

        for (AVMetadataItem* metadata in [aAsset commonMetadata]) {

            if ([[metadata commonKey] isEqualToString:AVMetadataCommonKeyTitle]) {

                aTitle = [metadata stringValue];

                break;              
            }
        }       
    }

    return aTitle;    
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:07:09.743

检查 [item valueForProperty:MPMediaItemPropertyAssetURL] 是否实际返回一个值。NSMutableArray 不允许使用 addObject 方法添加 nil 值。请参阅[NSMutableArray addObject：文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/addObject%3a)

您可以像这样检查它是否为空：

```
for (MPMediaItem* item in [query items]) {
    id itemValue = [item valueForProperty:MPMediaItemPropertyAssetURL];
    [list addObject:itemValue]; // break point this line and see what itemValue is.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:09:09.623

在 Objective C 中，您不能将 nil 值放入`NSArray`or `NSDictionary`。

# javascript - 从 window.onbeforeunload 调用方法后面的代码？

> ID：12289295
> 
> 赞同：0
> 
> 时间：2012-09-05T20:32:14.430
> 
> 标签：javascript, jquery, asp.net

我想从 window.onbeforeunload执行方法背后的代码**（比如将数据保存到数据库） 。**由于保存方法中的**非共享成员（txtboxed、cmbboxes 等）** ，我无法使用 PageMethods 。如何处理这种情况？这简直是​​在消磨我的时间。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:38:05.107

在事件中执行与服务器相关的操作的唯一方法`onbeforeunload`是向服务器发出新请求，例如使用页面方法。该页面已经在离开的路上，因此没有其他方式与服务器通信。

将实际保存重构为单独的静态方法，您可以从常规事件和页面方法中调用该方法。例子：

```
public static void ActualSave(string somedata, string otherdata) {
  // save
}

public void SaveButton_Click(object sender, EventArgs e) {
  string somedata = SomeControl.Text;
  string otherdata = OtherControl.Text;
  ActualSave(somedata, otherdata);
} 
```

# c# - string.Split() 和 if 语句

> ID：12289303
> 
> 赞同：1
> 
> 时间：2012-09-05T20:33:15.630
> 
> 标签：c#, string-split

我有一个文本文件，我用`\n`.

文本文件（测试）读取

```
1
2
3
4 
```

现在是令人困惑的部分。

代码

```
string test = System.IO.File.ReadAllText(@"C:\Custom tests\"+testselect.Text+".txt");

string[] check = test.Split('\n');

if (check[0] == "1")
{
     label.Text = "whatever";
} 
```

这不起作用。标签保持默认值。但是，如果我：

```
label.Text = check[0]; 
```

标签显示 1。

我不明白这个请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:35:30.957

首先 - 你应该能够使用[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)而不是阅读文本和拆分....

您可能需要修剪结果。如果行上有多余的空格，则条件可能会失败。尝试使用：

```
if (check[0].Trim() == "1")
{ 
```

这将修剪掉任何空白，这应该会导致您的条件成功。

您还可以在调试器中放置断点并检查值。这将帮助您更好地诊断问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:37:43.087

我相信你应该使用 Environment.NewLine。不同的操作系统使用不同的换行符。

[所有操作系统的通用换行符是什么？(LF 和 CR)](https://stackoverflow.com/questions/3720612/what-is-the-universal-newline-for-all-operating-systems-lf-and-cr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:39:01.877

你只是在比较数字吗？需要检查大小写和空格..

```
string.Equals(check[0].Trim(), "some value", StringComparison.OrdinalIgnoreCase); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:41:12.677

你可以使用这样的东西：

如果有任何退货，请删除

```
string[] check = test.Replace("\r", "").Split('\n');

        if(check[0] == "1") 
```

或用新行分割并取出数组中的字符并检查它。

```
string[] check = test.Split('\n');

        if(check[0][0] == '1') 
```

我会使用选项二。

编辑：

或类似的东西，但它有点 OTT，你得到了所有的 \r\n

```
 char[] check = test.SplitMeUp();

        if(check[0] == '1')

 static class Extensions
{
    public static char[] SplitMeUp(this string str)
    {
        char[] chars = new char[str.Length];
        for (int i = 0; i < chars.Length; i++)
            chars[i] = str[i];

        return chars;
    }
} 
```

编辑：

过滤掉特定字符的其他方法

```
public static char[] SplitMeUp(this string str, char[] filterChars = null)
    {
        List<Char> chars = new List<char>();
        for (int i = 0; i < str.Length; i++)
        {
            if(filterChars != null && filterChars.Length > 0 && filterChars.Contains(str[i]))
                    continue; 

            chars.Add(str[i]);
        }

        return chars.ToArray();
    } 
```

并像使用它一样

```
char[] check = test.SplitMeUp(new char[] {'\r', '\n'});

        if(check[0] == '1') 
```

它会忽略所有这些 \r\n 并且只是将所有内容分开。

# vb.net - 如何从代码端访问 UserControl 的属性？

> ID：12289305
> 
> 赞同：0
> 
> 时间：2012-09-05T20:33:28.137
> 
> 标签：vb.net, user-controls, handle

制作我自己的 UserControl，我可以将新的 TabPages 聚合到 TabControl，然后在 TabPage 内部，我使用以下代码添加自己的 UserControl。

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim TabX As New Windows.Forms.TabPage("Tab " & TabCount.ToString) '(ConfiguracionTabPage)
    Dim MyControl As New ClientesEmpresa
    MyControl.Name = "Control" & TabCount.ToString

    If ClientesTabControl.TabPages.Count = 10 Then
        ClientesTabControl.TabPages.RemoveAt(9)
    End If
    TabX.Controls.Add(MyControl)

    TabX.Name = "Tab" & TabCount.ToString
    TabX.Text = "Tab" & TabCount.ToString

    MyControl.TitularLbl.Text = "Coca Cola"

    Me.ClientesTabControl.TabPages.Insert(0, TabX)
    Me.ClientesTabControl.SelectedIndex = 0
    TabCount += 1
End Sub 
```

我的用户控件有几个标签、文本框和 TabPages（在 TabControl 内）。

现在我想从源代码中动态更改一些属性，但我不知道如何访问它们。我发现的最相似的主题是[How to Acces of an User control in c#](https://stackoverflow.com/questions/411316/how-to-access-properties-of-a-usercontrol-in-c-sharp)，但是，正如标题所说，在 C# 中，我如何在 VB.NET 中做到这一点？

* * *

抱歉，我只是注意到 Enter 键发布了评论。:(

感谢您的反馈，我明白您在说什么，但我在中间遗漏了一些东西。

当我在上面的代码中在运行时创建控件时，我可以轻松访问所创建对象的属性，在本例中是我的 UserControl，但我不明白如何从外部访问该控件的特定实例的属性Button_Click; IE。另一个 button_click 事件（第二个按钮）

我正在考虑使用类似的东西

```
Dim ControlList As Windows.Forms.Control() = Me.ClientesTabControl.TabPages(0).Controls.Find("ModeloLbl", True) 
```

或者

```
ClientesTabControl.TabPages(0).Controls.OfType(Of AlarmasVehiculo)() 
```

但我被困在这里。

------------------------------------- 第 3 篇文章 ------------ ----

谢谢史蒂夫，我使用“Control.Find”和 For Each 解决了，但您的解决方案更容易。

有什么方法可以获取选定选项卡的名称，或者我必须在创建新 TabPage 时创建一个数组？，想法是仅在用户或每个用户选择时更新选定选项卡内的控件文本5 秒，但只是在选定的一个。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:50:09.327

从 C# 问题中借用 M4N 的答案，并将其翻译为 VB：

最干净的方法是将所需的属性公开为用户控件的属性，例如：

```
Public Class MyUserControl
    ' expose the Text of the richtext control (read-only)
    Public ReadOnly Property TextOfRichTextBox As String
        Get 
            Return richTextBox.Text
        End Get
    End Property

    ' expose the Checked Property of a checkbox (read/write)
    Public Property CheckBoxProperty As Boolean
        Get 
            Return checkBox.Checked
        End Get
        Set (value As Boolean)
            checkBox.Checked = value
        End Set
    End Property

    '...
End Class 
```

通过这种方式，您可以控制要公开的属性以及它们应该是读/写还是只读的。（当然，您应该为属性使用更好的名称，具体取决于它们的含义）。

这种方法的另一个优点是它隐藏了用户控件的内部实现。如果您想将您的富文本控件与其他控件交换，您不会破坏控件的调用者/用户。

要回答您的第二个问题，如果您需要访问动态创建的控件，您可以使用它们的名称轻松完成，例如：

```
Dim c As ClientesEmpresa= CType(Me.ClientesTabControl.TabPages("Tab1").Controls("Control1"), ClientesEmpresa)
c.CheckBoxProperty = True 
```

# zend-framework - 如何在视图助手 $this->view 中获取变量？

> ID：12289307
> 
> 赞同：1
> 
> 时间：2012-09-05T20:33:32.037
> 
> 标签：zend-framework, variables, controller, view-helpers

我需要在我的 zend 项目中运行，在一个控制器中，例如： `<?php for($i=1; $i<10; $i++){ $this->view->someVariable.$i = $someClassName->someFunction(); } ?>` 但它不起作用。我试图声明`$this->view->someVariable`，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:38:58.170

`$this->view->someVariable.$i`是一个表达式而不是一个变量，所以你不能给它赋值。如果`$this->view->someVariable`是一个数组，您可以为其元素赋值，例如，

```
<?php 
for ($i=1; $i<10; $i++){ 
    $this->view->someVariable[$i] = $someClassName->someFunction(); 
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:49:30.710

也许你需要花括号：

```
$this->view->{$this->view->someVariable . $i} = $someClassName->function(); 
```

虽然我不禁想知道你想要达到什么目的。你有没有丢弃的返回值`$someClassName->function()?`

# javascript - Facebook 分享者链接适用于用户，但不适用于粉丝页面管理员

> ID：12289319
> 
> 赞同：1
> 
> 时间：2012-09-05T20:34:34.243
> 
> 标签：javascript, facebook, hyperlink, share

我想通过图片上的 facebook 分享器链接分享，点击我的网站。

这是我目前使用的功能：

```
function shareFacebook()
{
    // Parameters
    var title       = "Test";
    var url         = "http://test.creabox.biz/Crash%20tests/Facebook%20sharer/";
    var description = "Test de partage sur page fan...";
    var image0      = "http://images.forum-auto.com/mesimages/676992/camion-tire-par-un-boeuf1213352668.1216465659.jpg";

    // Encode complete URI
    var completeURL = encodeURI("http://www.facebook.com/sharer.php?s=100&p"+
        "[title]="+title+"&p"+
        "[url]="+url+"&p"+
        "[images][0]="+image0+"&p"+
        "[summary]="+description);

    // Facebook popup
    window.open(completeURL, "sharer", "menubar=1, resizable=1, width=640, height=350");

    // Debug
    console.log(new Date(), completeURL);
    document.getElementById('debugDiv').innerHTML = completeURL;

    return false;
} 
```

有了这个功能，我可以使用我的日常用户在我的墙上分享，但是当我通过我的粉丝专页连接时，我无法分享任何东西。弹出窗口出现，但当我验证时，按钮变为灰色并在几秒钟后恢复正常。

为了说明我的问题，我创建了一个页面，您可以在以下位置查看来源： [http ://test.creabox.biz/Crash%20tests/Facebook%20sharer/](http://test.creabox.biz/Crash%20tests/Facebook%20sharer/)

在此先感谢您的帮助。最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:14:14.900

使用元标记`og:image,og:title,og:description`。

将它们包含在页面中并`sharer.php`与`u`&`t`选项一起使用。或者更好的是，`u`仅在包含 URL 的情况下使用 with 选项，并且您的 URL 应该具有元标记来获取信息。

# matrix - 创建全球气候模型

> ID：12289321
> 
> 赞同：1
> 
> 时间：2012-09-05T20:34:35.833
> 
> 标签：matrix, modeling, weather

我正在尝试创建一个全球气候模型。最终结果是游戏，但我的第一个目标是创建一个工作模型。

我读过很多关于气象学的书，我相信我了解基本动态：

```
-Heat from Sun travels to Earth
-Clouds block Sun where clouds are present
-Surface heats up (moreso over land than water)
-Water vaporization occurs where water is present
-Hot areas become Low pressure zones
-Cooler areas become High pressure zones
-Low and High pressure zones create wind and clouds
-Wind and clouds rotate perpendicular to the line between the H/L systems (CW in N, CCW in S)
-Air pressure (specifically an increase) causes clouds to rain 
```

现在我想基本上预测天气并将预测用作我的程序的天气。它不必非常准确，但它应该遵循与我们在地球上所经历的相同的前提。我想波动是否足以导致相当多变的天气条件。

我更喜欢将模型保持为平铺格式，但这并不是绝对必要的。

我将从地形（具有高度）和可能每天都不同的辐射模式开始，以模拟每个瓷砖上的能量输入。从那里我可以比较海拔类型（山、土地、水等）和辐射，以确定压力。土壤中以前的瀑布可能会影响湿度。从这里我开始遇到一个问题，因为风暴在相反的压力系统的边界上形成并且倾向于垂直移动。当使用分布的点数而不是具有权重的实际系统时，这很难计算。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:53:53.280

[在这里](http://www.easterbrook.ca/steve/?p=2183)查看开源气候模型列表。还有[Java 气候模型](http://jcm.climatemodel.info/web/source.html)，也是开源的。

# wpf - CallerMemberName 要与 VB 的 INotifyPropertyChange 一起使用？

> ID：12289323
> 
> 赞同：3
> 
> 时间：2012-09-05T20:34:49.093
> 
> 标签：wpf, vb.net, inotifypropertychanged

我正在尝试实现 CallerMemberName 以用于提升属性。我正在尝试在 vb 中执行此操作，但在 system.runtime.compilerservices 中找不到此接口。第一个问题是这对 vb 是否可行，还是仅适用于 c#？感谢帮助。

```
Public Sub RaisePropertyChanged(<CallerMemberName> Optional propertyName As String = Nothing)
    RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(propertyName))
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T05:21:02.163

`CallerMemberName`真的是`CallerMemberNameAttribute`在`System.Runtime.CompilerServices`。只要您使用.Net 4.5，它就肯定存在。至少对我来说，它在 VB.Net 中工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:56:43.550

确保目标框架设置为 .NET 4.5

# xcode - 保存对 NSManagedObject 的更改

> ID：12289325
> 
> 赞同：1
> 
> 时间：2012-09-05T20:34:55.967
> 
> 标签：xcode, nsmanagedobject, nsmanagedobjectcontext, nsfetchrequest

我在对 ManagedObjects 进行更改并将这些更改保存到持久存储时遇到问题。

起作用的是删除对象，插入对象。并获取这些对象。如前所述，我无法对获取的托管对象进行更改。

我有两个视图控制器。两者都有公共财产：

`@property (nonatomic, strong) NSManagedObjectContext *managedObjectContext;`

AppDelegate.m 文件为应用程序中的第一个视图控制器设置此属性：didFinishLaunchingWithOptions: 方法如下：

```
// get reference to view controller //
//..
controller1.managedObjectContext = self.managedObjectContext; 
```

视图控制器 1 在推送到第二个视图控制器时再次传递 managedObjectContext，它在 prepareForSegue: 方法中执行此操作，如下所示：

```
// Get reference to the detail view //
MySecondViewController *controller2 = segue.destinationViewController;        
// Pass the managed object context //
controller2.managedObjectContext = self.managedObjectContext; 
```

在第二个视图控制器中，我从核心数据中获取对象，并将它们存储在视图控制器的属性中，如下所示：

```
@property (nonatomic, strong) MyKindOfObject *object;
...
self.object = [fetchResults lastObject]; 
```

获取对象似乎工作正常，因为我很好地得到了结果..

获取的对象有许多属性，其中一个是 NSString 类型。我在 UITextField 中显示的此属性的值。用户可以在此处更改值，完成后按下按钮。我捕捉到动作并执行以下操作：

```
self.object.mytext = textField.text; 
```

然后尝试保存到核心数据：

```
// Save to CoreData //
NSError *error = nil;
if(![self.managedObjectContext save:&error]){
    // handle the error //
    NSLog(@"is error");
}
else{
    NSLog(@"no error");
} 
```

1) 下次用户返回此视图控制器时，将再次获取该对象。但它仍然具有旧值。

2) 我还使用了一个名为 SQLite Manager 的 Firefox 插件来关注相关 sqlite 文件中的数据。单步执行代码时，调用 save 方法后文件中没有任何变化。

3) 同样在 Xcode 中，我使用变量视图来关注 self.managedObjectContext 对象。当我将新数据存储到我的对象中时，就在调用 save 之前，self.managedObjectContext 的所有属性都没有改变（如 unprocessedChanges 或 changedObjects）。

4）我还添加了对 managedObjectContext 的 hasChanges 方法的调用，但这返回 NO：

```
if([self.managedObjectContext hasChanges]){
   NSLog(@"changes managed object context!");
} 
```

5）我还添加了对相关 managedObject 的 hasChanges 方法的调用，但这也返回 NO：

```
if([self.object hasChanges]){
    NSLog(@"changes in managed object!");
} 
```

我可能在这里做错了什么，但我不知道它是什么。我真的希望有人可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:00:42.373

好吧，让我回答我自己的问题：作为新手，我确实做了一些完全错误的事情。我在想我比苹果自己更了解。教训：我没有！

在模型中创建实体后，我为每个实体创建了自定义托管对象类（或者实际上是每个实体的 NSManagedObject 子类）。在生成的实现文件中，所有属性（属性）都实现为@dynamic。由于缺乏知识，我不理解/认识到这一点。所以我心中的新手想：让我们把这一切都改成@synthesize。

希望这篇文章可以帮助其他一些新手不要犯同样的错误。

# iphone - 有没有办法在没有互联网连接的情况下将多个 iPad（客户端应用程序）连接到中央 iPad（服务器应用程序）？

> ID：12289327
> 
> 赞同：0
> 
> 时间：2012-09-05T20:34:59.327
> 
> 标签：iphone, ios, ipad, bluetooth

我想在不使用互联网连接的情况下将数据从客户端应用程序（ipad 应用程序客户端）发送到服务器应用程序（ipad 服务器应用程序），因为没有无线路由器。

我相信我可以一次使用蓝牙一个设备发送数据有没有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:42:10.220

这个庞大的教程可以指导您使用蓝牙[http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1](http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1)

# asp.net - 创建 111 行或更多行后回发错误

> ID：12289335
> 
> 赞同：0
> 
> 时间：2012-09-05T20:35:19.803
> 
> 标签：asp.net, dynamic, row, creation

我正在向表中动态添加行，当总数没有时一切正常。行数是 110，但是当我将行数增加到 111 或更多时，它会引发错误（在回发后创建）。我正在使用 .net4，vs2010 高级版。

> Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：500

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:54:49.010

当我有一个 WCF 服务发送太多数据以至于它会崩溃时，我曾经遇到过这种错误。消费网页会收到类似的 500 错误。在我的情况下，我们跟踪了服务，发现服务只发送了大部分数据。我们必须增加“缓冲区”才能获取所有数据。

我需要更多信息才能对您的情况有所帮助，因为我不知道您是在调用 Web 服务、数据库还是只是在代码隐藏中动态创建数据。

# c# - 比较两个数组并显示字符数

> ID：12289342
> 
> 赞同：-2
> 
> 时间：2012-09-05T20:35:39.023
> 
> 标签：c#, algorithm, pseudocode

我有两个数组：

```
 string[] array1 = {"a","b","c","d","e"}

 string[] array1 = {"x","y","a","b","a"} 
```

我想打印这样的结果：

```
a = 3
b = 2
c = 1
d = 1
e = 1
x = 1
y = 1
z = 1 
```

我可以在循环内运行一个循环并找出它，但有没有更好的方法来实现相同的结果？

我想在不使用 LINQ 的普通 C# 中执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T20:38:22.477

您可以使用 LINQ 来完成此操作：

```
var counts = array1.Concat(array2)
                  .GroupBy(v => v)
                  .Select(g => new { Value=g.Key, Number=g.Count() });

foreach(var item in counts.OrderBy(i => i.Value))
    Console.WriteLine("{0} = {1}", item.Value, item.Number); 
```

* * *

鉴于出于某种原因您想避免使用 LINQ 和扩展方法，您可以构建自己的字典：

```
var counts = new Dictionary<string, int>();
foreach(string item in array1)
{
    if (counts.ContainsKey(item))
        counts[item]++;
    else
        counts[item] = 1;
}
foreach(string item in array2)
{
    if (counts.ContainsKey(item))
        counts[item]++;
    else
        counts[item] = 1;
}

// Print out counts
foreach(var kvp in counts)
    Console.WriteLine("{0} = {1}", kvp.Key, kvp.Value); 
```

请注意，这不会对结果进行排序 - 如果您需要对它们进行排序，您也必须这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T20:38:34.593

您可以使用[`Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx),[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)和[`OrderByDescending`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending):

```
var both = array1.Concat(array2);
var groups = both.GroupBy(s => s).OrderByDescending(g => g.Count());
Console.Write(
    String.Join(
        Environment.NewLine, 
            groups.Select(g => String.Format("{0} = {1}", g.Key, g.Count())))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:39:09.487

这看起来像是 Linq 的工作：

```
var charCounts = array1.Concat(array2)
                    .GroupBy(c=>c)
                    .Select(g=>new Tuple<char, int>(g.Key, g.Count());
                    .OrderBy(t=>t.Item1);

foreach(var result in charCounts)
   Console.WriteLine(String.Format("{0} = {1}", t.Item1, t.Item2)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T20:44:46.053

通读这两个数组并将它们放入一个字典中。键是数组中的成员，如“a”、“b”等。值是整数作为计数。因此，如果存在键，则增加计数；否则将键放入字典中，值为 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T21:17:37.553

好吧，基于字符串类型的最简单的实现是这样的：

```
class Program
{
    static void Main(string[] args)
    {
        string[] array1 = {"a", "b", "c", "d", "e"};
        string[] array2 = {"x", "y", "a", "b", "a"};

        var histogram = new Dictionary<string, int>();
        Fill(histogram, array1);
        Fill(histogram, array2);

        foreach (var p in histogram)
        {
            Console.WriteLine("{0}={1}",p.Key,p.Value);
        }
    }

    private static void Fill(Dictionary<string, int> histogram, string[] a)
    {
        foreach (string s in a)
        {
            if (histogram.ContainsKey(s))
                histogram[s] += 1;
            else
                histogram[s] = 1;
        }
    }
} 
```

这是构建动态直方图，打印。另一种简单的方法是这样的，但它的可读性较差：

```
 static void Main(string[] args)
    {
        string[] array1 = {"a", "b", "c", "d", "e"};
        string[] array2 = {"x", "y", "a", "b", "a"};

        string [] concat = new string[array1.Length+array2.Length];
        Array.Copy(array1,concat,array1.Length);
        Array.Copy(array2,0,concat,array1.Length,array2.Length);
        Array.Sort(concat);

        int pos = 0;
        while(pos<concat.Length)
        {
            var cur = concat[pos];
            int count = 0;
            while ( (pos<concat.Length) && (concat[pos]==cur))
            {
                pos += 1;
                count += 1;
            }
            Console.WriteLine("{0}={1}",cur,count);
        }
    } 
```

通常 - 排序数据的连接，排序，直方图。

# silverlight - DownloadStringAsync 需要 UI 线程？

> ID：12289343
> 
> 赞同：0
> 
> 时间：2012-09-05T20:35:40.967
> 
> 标签：silverlight, asynchronous

> **可能重复：**
> [在 UI 线程被阻塞时在后台线程中执行 WebRequest](https://stackoverflow.com/questions/8466036/execute-a-webrequest-in-a-background-thread-while-ui-thread-is-blocked)

看看这段代码：

```
Thread t = new Thread((a) =>
    {
        var client = new WebClient();

        client.DownloadStringAsync(new Uri("http://www.google.com"));

        bool pointB = true;
    });

t.Start();
t.Join(10000); 
```

当它在 Silverlight 的 UI 线程上运行时，即使快速调用 DownloadStringAsync()，直到 Join() 超时后才会到达 pointB。这意味着 DownloadStringAsync() 必须以某种方式要求 UI 线程完成其工作。**注意：这与对 DownloadString的*****回调*****无关***。我知道 WebClient 的回调发生在 UI 线程上（请参阅此处：[Silverlight Background Thread using WebClient](https://stackoverflow.com/questions/4326937/silverlight-background-thread-using-webclient)）。*

 *我的代码的行为似乎表明异步调用方法本身 (DownloadStringAsync()) 也需要 UI 线程。是对的吗？如果是这样，为什么？我还想注意在使用时会表现出相同的行为`HttpWebRequest.BeginGetResponse()`

编辑：为了让事情一目了然，我在逐步执行此代码时看到的操作顺序是

1.  t.Start()
2.  t.加入（10000）；
3.  var client = new WebClient();
4.  client.DownloadStringAsync(new Uri(" [http://www.google.com](http://www.google.com) "));
5.  （... Join() 超时）
6.  布尔点 B = 真；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:22:25.940

好吧，我想我经过多一点挖掘后找到了答案。似乎确实所有网络代码最终都在 UI 线程上运行： http: [//non破坏性me.com/2010/11/23/silverlight-and-networking-the-ui-thread/](http://nondestructiveme.com/2010/11/23/silverlight-and-networking-the-ui-thread/)

好消息是微软似乎修复了这个“错误”，正如你在 Silverlight 5 中调用它的理由：http: [//msdn.microsoft.com/en-us/library/gg986857 (VS.95).aspx](http://msdn.microsoft.com/en-us/library/gg986857(VS.95).aspx)

（在页面底部的性能改进下：“通过使用后台线程进行联网来减少网络延迟。这对于使用客户端 HTTP Web 请求的场景很有帮助。”）

一旦我在 Silverlight 5 上测试我的代码以查看它是否确实解决了问题，我将编辑此答案。

编辑：针对 Silverlight 5 构建，我仍然遇到同样的问题。我认为是时候放弃尝试完全阻止 UI 线程了……*

# javascript - 在 javascript 中挣扎于 webkit-transition

> ID：12289346
> 
> 赞同：0
> 
> 时间：2012-09-05T20:36:20.933
> 
> 标签：javascript, css, webkit

我已经尝试了一些使用 webkit-transition 的变体，这些变体是从谷歌搜索中找到的，但我一直无法使用。我有一些音频控件出现在点击事件上，它们突然出现并且生涩，所以我想将它们淡入。目标浏览器是 iOS，所以我正在尝试 webkit 扩展。

这是我目前拥有的：

```
 <div id = "controls">
    <audio id = "audio" controls></audio>
  </div>

#controls {
    position:absolute;
    top: 35px;
    left:73px;
    height: 20px;
    width: 180px;
    display:none;
}

#audio {
    opacity:0.0;
}

audio.src = clip;
audio.addEventListener('pause',  onPauseOrStop, false);
audio.addEventListener('ended',  onPauseOrStop, false); 
audio.play();
audioControls.style.display = 'block';
audio.style.setProperty("-webkit-transition", "opacity 0.4s");
audio.style.opacity = 0.7; 
```

webkit-transition 的文档说它对属性的更改生效，所以我假设在最后一行更改 style.opacity 会启动它。

控件以 0.7 的不透明度显示，但我希望它淡入并且动画没有发生。

我也试过这个：

```
#audio {
    opacity:0.0;
    -webkit-transition-property: opacity;
    -webkit-transition-duration: 1s;
    -webkit-timing-function: ease-in;
} 
```

也试过

```
audio.style.webkitTransition = "opacity 1.4s"; 
```

从这篇文章[如何使用 javascript 设置 CSS3 过渡？](https://stackoverflow.com/questions/8742249/how-to-set-css3-transition-using-javascript)

我什么都做不了，我正在 iOS、Safari 桌面和 Chrome 上进行测试。所有这些都没有相同的结果。

# 更新：

按照提供的答案，控件现在以流畅的方式出现，但将它们淡出不起作用（它们立即消失，我已经投入了很长时间以确保我能看到它发生）

```
if (audioControls.style.display && audioControls.style.display === 'block')  {
    // controls are currently displayed
    audio.removeEventListener('pause',  onPauseOrStop, false);
    audio.removeEventListener('ended',  onPauseOrStop, false); 
    audio.pause();
    audioControls.style.display = 'none';
    setTimeout(function () {
        audioControls.style.webkitTransition = "opacity 4.0s";
        audioControls.style.opacity = 0.0;
    }, 0);
}
else {
    // controls are not displayed, display them and play the audio
    audio.src = clip;
    audio.addEventListener('pause',  onPauseOrStop, false);
    audio.addEventListener('ended',  onPauseOrStop, false); 
    audio.play();

    audioControls.style.display = 'block';

    setTimeout(function () {
        audioControls.style.webkitTransition = "opacity 4.0s";
        audioControls.style.opacity = 0.7;
    }, 0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:36:39.760

所以听起来你遇到的问题是`0.7`页面加载后不透明度被设置为，即使你`0.0`在 CSS 中设置了它，并且在你设置转换后你将不透明度设置为其他东西.

此问题与 Web 浏览器的工作方式有关。它们是单线程的并在事件循环上运行。像动画这样的东西只会在绘制事件期间得到处理。但是，直到您的不透明度设置为*之后*，才会发生绘制事件`0.7`。因此，您需要延迟不透明度设置操作，直到绘制事件有机会处理之后。

完成此操作的最简单方法是将其放入 a`setTimeout`以将其放回事件队列的末尾：

```
audio.style.setProperty("-webkit-transition", "opacity 0.4s");
setTimeout(function () {
    audio.style.opacity = 0.7;
}, 0); 
```

这可能感觉有点尴尬，但它让浏览器有机会在`0.0`不透明地绘制控件，然后再返回绘制它`0.7`（由于 CSS 过渡属性，这将获得动画效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:33:16.370

在我看来，您遇到了 Webkit 错误，我从未见过任何其他 html 元素发生这种情况，因此您一定是在 Webkit 完成绘制`audio`元素控件之前尝试转换。

要解决这个问题，您可以`display: none`从`#controls`（无论如何通过不透明度将不可见）删除或在设置转换时包装超时：

```
setTimeout(function(){
 audio.style.setProperty("-webkit-transition", "opacity 0.4s");
 audio.style.opacity = 0.7;
}, 0) //0 works for me in Chrome, but you might need to increase it for Mobile Safari 
```

[http://jsfiddle.net/zyGF7/](http://jsfiddle.net/zyGF7/)

# python - django-debug-toolbar 通过相对路径查找资产？

> ID：12289349
> 
> 赞同：4
> 
> 时间：2012-09-05T20:36:27.963
> 
> 标签：python, django, django-debug-toolbar

我试图让 django-debug-toolbar 工作，在按照所有说明操作后，我收到了这些错误：

```
[05/Sep/2012 15:33:35] "GET /profile/edit/ HTTP/1.1" 200 43647
[05/Sep/2012 15:33:36] "GET /profile/edit/debug_toolbar/css/toolbar.min.css HTTP/1.1" 404 86163
[05/Sep/2012 15:33:36] "GET /profile/edit/debug_toolbar/css/toolbar.min.js HTTP/1.1" 404 66260 
```

HTML 源代码将这些东西称为相对的。

当我通过调试工具栏源 grep 时，我看到这两行：

```
debug_toolbar/templates/debug_toolbar/base.html:5:<link rel="stylesheet" href="{{ STATIC_URL }}debug_toolbar/css/toolbar.min.css" type="text/css">
debug_toolbar/templates/debug_toolbar/base.html:6:<script type="text/javascript" src="{{ STATIC_URL }}debug_toolbar/css/toolbar.min.js"></script> 
```

但是，我的 STATIC_URL`/static/`在项目的 settings.py 文件中设置为。我在这里配置错误了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:21:07.273

我手动应用了[此处](https://github.com/django-debug-toolbar/django-debug-toolbar/pull/317)提供的错误修正，它对我有用。

# sql - 在 VB.net 中使用 Like 选择 Datatable.Select

> ID：12289352
> 
> 赞同：2
> 
> 时间：2012-09-05T20:36:46.283
> 
> 标签：sql, vb.net, linq

我有一个数据表，我正在尝试执行 datatable.Select(Name Like '#%#') 但出现无效模式错误（期望名称为 col 的表的结果为 #Mike#,#Brow#..）。对所有项目使用转义序列力也可以正常工作。许多人建议使用 Linq - 但对它很陌生。我如何使用此数据表中的 Linq 进行此过滤。

这是我试图做的一个样本..

```
 Dim dtSamp As Data.DataTable
    dtSamp = New Data.DataTable
    dtSamp.Columns.Add("Name")
    dtSamp.Columns.Add("Marks")

    Dim dr As DataRow
    dr = dtSamp.NewRow()
    dr.Item(0) = "AAA"
    dr.Item(1) = "50"
    dtSamp.Rows.Add(dr)
    dr = dtSamp.NewRow()
    dr.Item(0) = "#bbb#"
    dr.Item(1) = "60"
    dtSamp.Rows.Add(dr)
    dr = dtSamp.NewRow()
    dr.Item(0) = "ccc"
    dr.Item(1) = "44"
    dtSamp.Rows.Add(dr)

    Dim drResult As DataRow()
    drResult = dtSamp.Select("Name Like '#%#'")

    Dim dtOutPutTable As Data.DataTable
    dtOutPutTable = drResult.CopyToDataTable() 
```

在 dtOutPutTable 中，我期待 1 行，即其中的 #bbb# .. 但 Select 函数失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:11:00.403

通常 LINQ 查询适用于实现`IEnumerable<T>/ IQueryable<T> Interface`. 但是 DataTable 没有实现这些。所以我们不能直接在 DataTable 上应用 LINQ 查询。

但是 DataTable 类有一个名为的扩展方法`AsEnumerable`，它返回`IEnumerable`DataRow 的集合。因此，我们可以`AsEnumerable`在 DataTable 上应用该函数，然后在结果集合上使用一些 LINQ。

```
var items=(from p in myDataTable.AsEnumerable()
                 select new { ID= p.Field<int>("ID").
                              Name=p.Field<string>("Name")
                           }).ToList();
var filtered=items.Where(x => x.Name.Contains("Mike")); 
```

**编辑：**这是 VB.NET 版本（免责声明：我不是 VB.NET 人。但我可以构建此代码而不会出现任何错误）

```
Dim items = (From p In myDataTable.AsEnumerable() 
               Select New With {.ID = p.Field(Of Integer)("ID"),
                                .Name = p.Field(Of String)("Name")}).ToList()

Dim filtered = items.Where(Function(x) x.Name.Contains("Mike")).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T09:22:02.733

# VB

```
Private Function likes(ByVal dt As DataTable, ByVal column As String, ByVal value As String)
    Dim result = dt.Clone()
    For Each row As DataRow In From row1 As DataRow In dt.Rows Where (row1(column).Contains(value))
        result.ImportRow(row)
    Next
    Return result
End Function 
```

# C＃

```
private DataTable likes(ref DataTable dt, string column, string value)
 {
    DataTable result = dt.Clone();
    foreach (DataRow row in from row1 in dt.Rowswhere (row1(column).Contains(value))) {
        result.ImportRow(row);
    }
    return result;
 } 
```

# java - 替换 .sql 脚本中的变量并使用 Java JDBC 运行它们

> ID：12289358
> 
> 赞同：4
> 
> 时间：2012-09-05T20:37:19.857
> 
> 标签：java, sql, templates, jdbc

我使用 Java JDBC（主要在桌面应用程序中）已经有很长时间了，我意识到我执行的许多操作都可以改进和简化。例如：

*   将 SQL 语句直接硬编码到 Java 中不太实用。

*   用“？”替换变量 在 JDBC 中很好，但最好使用真正的变量名，如“ *USER-NAME* ”或类似的名称。

*   一次执行多个更新语句会很酷。

为了改进 JDBC，我决定编写自己的工具，但在重新发明轮子之前，我想知道是否有任何 Java 实用程序能够：

*   读取和执行 .sql 脚本，最好存储在我的应用程序的 JAR 中。

*   在这些脚本中定义变量，最好使用实名而不是“？” 特点。

*   从这些脚本运行查询 ( *SELECT* ) 和更新 ( *CREATE、INSERT、DELETE, ... ) 语句。*

*   在一个方法调用中执行多个更新语句。例如，这可以让我运行 DDL 和 DML 脚本来初始化数据库。

我知道[JDBC ScriptRunner](http://pastebin.com/f10584951)，但还不够完整。那里有更好的东西吗？老实说，我认为这样的工具会非常有用。

注意：我不介意导入一个库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T23:08:48.500

我只是为此使用[Warework 。](http://warework.com/download/detail.page?lib=com.warework.distribution.warework-java-dist-connected-pcmac&ver=1.0.0)这是一个很大的 JAR，但我认为它可以满足您的需求。我将向您展示它是如何工作的：

**1-**在项目的源文件夹中创建此目录结构：

```
/META-INF/system/statement/sql 
```

**2-**在“ */META-INF/system* ”目录中，创建一个名为“ *pool-service.xml* ”的文件，内容如下：

```
<?xml version="1.0" encoding="UTF-8"?> 
<proxy-service xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://repository.warework.com/xsd/proxyservice-1.0.0.xsd"> 
 <clients> 
  <client name="c3p0-client" connector="com.warework.service.pool.client.connector.C3P0Connector"> 
   <parameter name="driver-class" value="com.mysql.jdbc.Driver" /> 
   <parameter name="jdbc-url" value="jdbc:mysql://host:port/database-name" /> 
   <parameter name="user" value="the-user-name" /> 
   <parameter name="password" value="the-password" /> 
   <parameter name="connect-on-create" value="true" /> 
  </client> 
 </clients> 
</proxy-service> 
```

在此文件中，将参数值替换为连接数据库所需的值。保持“ *connect-on-create* ”等于“ *true* ”。

**3-在“** */META-INF/system/statement/sql* ”目录中编写您的 .sql 脚本。您可以像这样编写*SELECT*语句（每个文件一个语句）：

*查找用户.sql*

```
SELECT * FROM HOME_USERS A WHERE A.ID = ${USER_ID} 
```

和这样的*UPDATE*语句（每个文件一个或多个语句）：

*创建用户.sql*

```
INSERT INTO HOME_USERS (ID, NAME) VALUES (${USER_ID}, ${USER_NAME});
INSERT INTO ACTIVE_USERS (ID) VALUES (${USER_ID}); 
```

**4-**要连接数据库，请执行以下操作：

```
// "Test.class" must be any class of your project (the same project where /META-INF/system directory exists).
// Do not change "full" and "relational-database" strings.
// If you change "system" for "test", then the directory will be /META-INF/test.
RDBMSView ddbb = (RDBMSView) ScopeFactory.createTemplate(Test.class, "full", "system").getObject("relational-database");

// Connect with the database.
ddbb.connect(); 
```

**5-**从 .sql 文件运行*SELECT语句，如下所示：*

```
// Values for variables in the SELECT statement. 
Hashtable values = new Hashtable(); 

// Set variables to filter the query. 
values.put("USER_ID", new Integer(8375)); 

// Read '/META-INF/system/statement/sql/find-user.sql', replace variables and run. 
// -1 values are for pagination (first -1 is the page, second -1 is the max rows per page).
ResultSet result = (ResultSet) ddbb.executeQueryByName("find-user", values, -1, -1); 
```

**6-**从 .sql 文件运行*UPDATE语句，如下所示：*

```
// Values for variables in the UPDATE statements. 
Hashtable values = new Hashtable(); 

// Set variables for the update statement. 
values.put("USER_ID", new Integer(3));
values.put("USER_NAME", "Oompa Loompa");

// Read '/META-INF/system/statement/sql/create-user.sql', replace variables and run. 
// ';' is the character that separates each statement.
ddbb.executeUpdateByName("create-user", values, new Character(';')); 
```

RDBMSView类提供[了](http://api.warework.com/java/warework-java-dist-connected-pcmac/1.0.0/com/warework/service/datastore/view/RDBMSView.html)这些方法以及连接/断开连接、提交、回滚……您还可以直接从字符串对象运行语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:31:34.687

关于命名参数这里是我发现的几个解决方案

*   [http://www.javaworld.com/javaworld/jw-04-2007/jw-04-jdbc.html?page=1](http://www.javaworld.com/javaworld/jw-04-2007/jw-04-jdbc.html?page=1)
*   [JDBC中的命名参数](https://stackoverflow.com/questions/2309970/named-parameters-in-jdbc)

如果您将自己限制为 SELECT/UPDATE/INSERT/DELETE 语句，那么从脚本中提取语句是一项非常简单的任务（但并非微不足道）。只需在任何“;”处拆分 字符不在两个“'”字符之间。如果您还承认 CREATE TRIGGERS 或 CREATE PROCEDURE 等到您的脚本，这将成为一个更复杂的解析问题，因为它们有“;” 作为他们sintax的一部分。

我个人认为将 DDL 排除在外并使用[Liquibase等外部工具管理数据库创建更安全](http://www.liquibase.org/)

# windows-installer - Installshield 在一个对话框中提示多个目标

> ID：12289360
> 
> 赞同：1
> 
> 时间：2012-09-05T20:37:30.653
> 
> 标签：windows-installer, installshield, installscript

使用 InstallShield 2012 spring 并希望在 SdAskDestPath2 对话框中添加另一个文件位置对话框，但不确定如何执行此操作。我以前尝试通过以下方式创建一个自定义对话框（大量谷歌搜索和搜索 InstallShield 帮助）：克隆原始对话框，更改新对话框的 ResourceID，然后创建一个 CustomDialog.rul，其中包含 SdAskDestPath2 中的脚本但无法获得那工作。

这么多问题只是我如何在 InstallScript 中的同一个对话框上连接多个浏览控件？或者自定义对话框有什么问题。

# regex - IIRF - 重写没有查询字符串的 URL

> ID：12289361
> 
> 赞同：0
> 
> 时间：2012-09-05T20:37:31.650
> 
> 标签：regex, iis-6, iirf

我有一个如下所示的 URL：

```
va_article.php?id=296&startRow=10#top 
```

我仍然需要请求查询字符串中的信息，但我希望它在地址栏中显示如下：

```
va_article.php 
```

我已经使用 IIRF 进行了一些直接的 301 重定向和重写，效果很好。但是，我对重写条件做的不多。我可能需要一些重写条件才能使其工作，如果需要，哪些条件？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:36:47.323

除非您愿意将信息隐藏在其他地方（cookie，我不会这样做！），否则这是**不可能的**。

您至少必须将该信息包含在某处的 url 路径中，例如：

```
/296/10/va_article.php 
```

通常，您可以执行以下操作：

```
/articles/296/10
/articles/296?start=10 
```

那么你需要2条规则：

*   将旧网址*重定向*到新闻网址的一项规则
*   将新 url*重写*为内部 url 的一条规则

类似于这两个规则：

```
RedirectRule ^/va_article.php?id=(\d+)&startRow=(\d+)$ /articles/$1/$3 [I,R=302]
RewriteRule ^articles/(\d+)/(\d+)$ /va_article.php?id=$1&startRow=$2 [I,L] 
```

# google-apps-script - 如何正确使用 setTag() 和 getTag()？

> ID：12289362
> 
> 赞同：0
> 
> 时间：2012-09-05T20:37:31.067
> 
> 标签：google-apps-script

我尝试了这个小代码来测试`setTag()`和`getTag()`（在垂直面板上）在 UI 服务中。我不知道为什么它不起作用......有什么建议吗？

[在线测试](https://script.google.com/macros/s/AKfycbyAPOiKr27_SHb2fOVx7s249_E42UH2Sj37aBt9FJIoTlf5cvbO/exec)

```
function doGet() {
  var app = UiApp.createApplication();
  var panel = app.createFlowPanel().setId('panel').setTag('start empty');// sets an initial value
  var txt1 = app.createTextBox().setName('txt1').setId('txt1');
  var txt2 = app.createTextBox().setName('txt2').setId('txt2');
  var label = app.createLabel('type in TextBox 1 and then click button');
  var button = app.createButton('click to trigger clienthandler');
  app.add(panel.add(label).add(txt1).add(txt2).add(button));
  var serverHandler = app.createServerHandler("key").addCallbackElement(panel);// this handler synchronizes the tag with textBox1
  txt1.addKeyUpHandler(serverHandler);

  var clientHandler = app.createClientHandler()
  .forTargets(txt2).setText(panel.getTag()).setStyleAttribute('background','red');;// this client handler is to test the getTag()
  button.addClickHandler(clientHandler)

return app
}

function key(e){
  var app = UiApp.getActiveApplication();
  var panel=app.getElementById('panel');
  var txt2=app.getElementById('txt2');
  var txt1val = e.parameter.txt1;//gets textBox value
  panel.setTag(txt1val);// set tag value
  txt2.setStyleAttribute('background','white');// resets to white when entering text
return app
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:54:24.273

我认为这里的问题是按钮单击正在使用客户端处理程序。setText() 只接受一个静态字符串，该字符串被设置为“开始为空”。如果要将其设置为标记的当前值，则需要使用服务器处理程序。

# lua - 曲线lua corona sdk中的布局对象

> ID：12289363
> 
> 赞同：2
> 
> 时间：2012-09-05T20:37:36.093
> 
> 标签：lua, coronasdk, curve

我需要一个 lua 中的 for 循环来以曲线而不是直线布局对象行。当对象沿曲线定位时，如何计算 y 坐标？x 坐标只是对象的直径 * nr 列加上间隙。但他们？

是否有可能在电晕中这样做的课程？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:07:45.503

不，没有课程，即使因为它不是必需的！你只需要为它开发一个数学函数......

例如，您可能会这样做：

```
object[index].x = initialX + gapX*index;
object[index].y = initialY + object[index].x^2 
```

这将绘制一条抛物线:)

# java - Java：输入流标记限制

> ID：12289365
> 
> 赞同：8
> 
> 时间：2012-09-05T20:37:42.243
> 
> 标签：java, inputstream

根据[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedInputStream.html#mark%28int%29)，Class InputStream 服务器中mark 方法的*readlimit参数用于设置**“在标记位置失效之前可以读取的最大字节数限制”。*. 我有一个名为*sample.txt*的文件，其内容是“hello”。我写了这段代码：

```
import java.io.*;
public class InputStream{
 public static void main (String[] args) throws IOException {
  InputStream reader = new FileInputStream("sample.txt");
  BufferedInputStream bis = new BufferedInputStream(reader);
  bis.mark(1);
  bis.read();
  bis.read();
  bis.read();
  bis.read();
  bis.reset();
  System.out.println((char)bis.read());
 }
} 
```

输出为“h”。但是，如果我在*标记*方法之后读取了多个字节，我不应该得到无效*重置*方法调用的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:04:01.777

我会将其归结为文档错误。

非参数文档`BufferedInputStream`是“请参阅 InputStream 的标记方法的一般合同”，这对我来说表明它的`BufferedInputStream`行为没有不同，尽管有参数文档。

由 指定的总合同`InputStream`是

> readlimit 参数告诉此输入流允许在标记位置无效之前读取许多字节 [...] 如果从流中读取的字节数超过 readlimit 字节，则流根本不需要记住任何数据

换句话说，`readlimit`是一个建议；流可以自由地承诺不足和过度交付。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T20:58:09.873

如果您查看[源代码](http://www.docjar.com/html/api/java/io/BufferedInputStream.java.html)，尤其是 fill() 方法，您会看到（过了一会儿！）它只会在绝对必要时才使标记无效，即它比文档可能建议的更宽容。

```
...
else if (pos >= buffer.length)  /* no room left in buffer */
   if (markpos > 0) {  /* can throw away early part of the buffer */
     int sz = pos - markpos;
     System.arraycopy(buffer, markpos, buffer, 0, sz);
     pos = sz;
     markpos = 0;
   } else if (buffer.length >= marklimit) {
     markpos = -1;   /* buffer got too big, invalidate mark */
     pos = 0;        /* drop buffer contents */
     .... 
```

默认缓冲区大小相对较大（8K），因此在您的示例中不会触发失效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:45:34.150

查看 的实现`BufferedInputStream`，它描述了 JavaDocs（受保护`markpos`字段）中标记位置的重要性：

> [`markpos`是]调用最后一个方法`pos`时字段的值。`mark`
> 
> 该值始终在 范围`-1`内`pos`。如果输入流中没有标记位置，则该字段为`-1`。如果输入流中有标记的位置，则在操作`buf[markpos]`之后作为输入提供的第一个字节`reset`。如果`markpos`不是`-1`，则从位置`buf[markpos]`到的所有字节都`buf[pos-1]`必须保留在缓冲区数组中（尽管可以将它们移动到缓冲区数组中的另一个位置，并对 、 和 的值进行适当`count`调整`pos`）`markpos`；`pos`除非和直到和之间的差异`markpos`超过，否则它们可能不会被丢弃`marklimit`。

希望这可以帮助。看一下 的定义`read`，`reset`以及类中的私有方法`fill`，看看它们是如何联系在一起的。

简而言之，只有当类检索到更多数据以填充其缓冲区时，才会考虑标记位置。`mark`如果读取的字节数多于允许的调用，它将正确无效。因此，调用`read`不一定会触发公共 JavaDoc 注释中公布的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T20:57:34.777

这看起来像一个微妙的错误。如果你减少缓冲区大小，你会得到一个`IOException`

```
public static void main(String[] args) throws IOException {
    InputStream reader = new ByteArrayInputStream(new byte[]{1, 2, 3, 4, 5, 6, 7, 8});
    BufferedInputStream bis = new BufferedInputStream(reader, 3);
    bis.mark(1);
    bis.read();
    bis.read();
    bis.read();
    bis.read();
    bis.reset();
    System.out.println((char)bis.read());
} 
```

# mobile - 不同移动设备上的标准缩放视图

> ID：12289368
> 
> 赞同：1
> 
> 时间：2012-09-05T20:37:59.670
> 
> 标签：mobile, view, zooming, default, viewport

我是 CSS、jQuery 等的新手。我已经创建了一个页面，我需要一些指导。

目前我正在使用具有固定宽度（因为我的页面始终是固定宽度）和初始比例为 1 的元数据视口标签。

缩小后效果非常好 - 在所有设备上。页面以正确的比例呈现，一切都很好，您可以放大和缩小，页面保持不变。

问题是初始缩放级别。当“初始比例”设置为 1 时，它会在手机上放大太多，这对初次观看的人来说是令人不安的。

有没有办法告诉正在查看页面的任何设备，它应该尽可能缩小视口允许的程度？就像你现在用手指做的那样。只是一直缩小，一切都很好......必须有一些简单的方法来完成这个？我已经尽可能多地搜索了网络，我发现的所有解决方案要么不起作用，要么非常复杂，这对我来说似乎没有必要！

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-08T15:32:46.193

原来，整件事是因为我使用逗号 (,) 而不是分号 (;) 来分隔元标记中的参数。这导致我的第一个参数，即 width:810px, [next argument] 变得无效，因为逗号附加到 810px。一旦我用分号替换它，一切正常！

# c++ - c++ oop 初学者 - 在一个函数调用中返回向量中每个创建的对象的输出总和

> ID：12289371
> 
> 赞同：1
> 
> 时间：2012-09-05T20:38:08.400
> 
> 标签：c++, oop, audio, vector, synthesis

我有一个简单的课程

```
#ifndef _VOICE
#define _VOICE
#include "maximilian.h"

class voice{
public:
    voice(int waveType);
    void setNote(double pitch,double amplitude);
    void triggerNote();
    void releaseNote();
    double getOutput();
    bool getState();
private:
    maxiOsc op;
    convert mtof;
    double amp;
    double freq;
    double out;
    int type;
    bool state;
};

#endif // _VOICE

#include "voice.h"

voice::voice(int waveType){
    type=waveType;
    state=false;
    out=0;
}

void voice::setNote(double pitch,double amplitude){
    freq=pitch;
    amp=amplitude;
}

void voice::triggerNote(){
    if(type==1)
        out=op.sinewave(mtof.mtof(freq))*amp;
    if(type==2)
        out=op.triangle(mtof.mtof(freq))*amp;
    if(type==3)
        out=op.saw(mtof.mtof(freq))*amp;
    if(type==4)
        out=op.square(mtof.mtof(freq))*amp;
    state=true;
}

void voice::releaseNote(){
    out=0;
    state=false;
}

bool voice::getState(){
    return state;
}

double voice::getOutput(){
    return out;
} 
```

然后我将这些声音存储在向量中

我希望找到一种更有效的方法来访问向量内所有对象的输出总和

它看起来像这样：

```
double PreMaster;
        PreMaster=voices[0].getOutput()+voices[1].getOutput()+voices[2].getOutput()+voices[3].getOutput()....(n-object)...; 
```

（在我的程序中它是 34）

(for) 不起作用，因为我需要在每个对象中同时输出值...

在类内部应该有一种方法来拥有一个全局函数，该函数将在一个函数调用中返回每个创建的对象的输出总和......

我是 oop 的初学者，所以如果解决方案看起来很明显，请原谅我。如果你能指出一个有用的方向，请提前感谢。

编辑：

我有一个以采样率（44100hz）调用的回调。

我有一个语音对象向量（它们输出简单的合成器波形）来形成一个发声和弦，我需要“同时”对每个语音的输出求和。

然后，我以采样率频率将每个样本的总和馈送到我的声卡。

```
void testApp::audioOut (float * output, int bufferSize, int nChannels){

     for (int i = 0; i < bufferSize; i++){

         for(int j=0;j<voices.size();j++){
            if(keys[j]==true){
                voices[j].triggerNote();
            }
            else if(keys[j]==false)
                voices[j].releaseNote();
         }

        PreMaster=voices[0].getOutput()+voices[1].getOutput()+voices[2].getOutput()+voices[3].getOutput()
                          +voices[4].getOutput()+voices[5].getOutput()+voices[6].getOutput()+voices[7].getOutput()
                          +voices[8].getOutput()+voices[9].getOutput()+voices[10].getOutput()+voices[11].getOutput()
                          +voices[12].getOutput()+voices[13].getOutput()+voices[14].getOutput()+voices[15].getOutput()
                          +voices[16].getOutput()+voices[17].getOutput()+voices[18].getOutput()+voices[19].getOutput()
                          +voices[20].getOutput()+voices[21].getOutput()+voices[22].getOutput()+voices[23].getOutput()
                          +voices[24].getOutput()+voices[25].getOutput()+voices[26].getOutput()+voices[27].getOutput()
                          +voices[28].getOutput()+voices[29].getOutput()+voices[30].getOutput()+voices[31].getOutput()
                          +voices[32].getOutput()+voices[33].getOutput();

        MasterOut.stereo(PreMaster, outputs, 0.5);

        lAudioOut[i] = output[i*nChannels    ] = outputs[0]; /* You may end up with lots of outputs. add them here */
        rAudioOut[i] = output[i*nChannels + 1] = outputs[1];
        }
} 
```

希望这能澄清一点......

是的，我忘记了 += 所以我测试了它，它停止了我的程序形式输出声音。当我用我丑陋的方法做它时，它虽然可以工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:40:30.837

您可以执行一个简单的循环，因为没有理由相信 for 不起作用，给定您的代码示例：

```
double sum = 0;
for (const auto& v : voices) {
  sum += v.getOutput();
} 
```

另一种选择是使用[std::accumulate](http://en.cppreference.com/w/cpp/algorithm/accumulate)和合适的仿函数：

```
// function to sum voice's getOutput() to get running total
double addOutput(double sum, const voice& v) { return sum + voice.getOutput(); }
....
double sum = std::accumulate(voices.begin(), voices.end(), 0.0, addOutput); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:43:58.647

一个例子：

```
int sum = 0;
for(std::vector<voice>::iterator i = voices.begin(); i != voices.end(); i++)
    sum += i->getOutput(); 
```

# c# - xaml 中的图像源取决于变量背后的代码

> ID：12289373
> 
> 赞同：0
> 
> 时间：2012-09-05T20:38:27.780
> 
> 标签：c#, image, xaml

我有图片

```
<Image HorizontalAlignment="Left"  VerticalAlignment="Top" Source="" Width="20" Height="20" /> 
```

我在代码隐藏中有变量 bool IsOk。我怎样才能将它绑定到源属性并有条件，当它是真实的源将是“../Shared/Images/ok.png”，而当它是假的“../Shared/Images/cancel.png”？我可以使用它触发吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:53:44.640

不需要触发器。

只需将 Image 的 Source 属性绑定到 ViewModel 上的一个属性，该属性返回 ok 图像或 cancel 图像。

修改您的代码，以便每当 IsOk 更改时，都会触发按钮图像属性的 PropertyChanged 事件。这样，只要您更改 IsOk 属性，图像就会自动更新。像这样的东西：

```
public bool IsOk
{
    get
    {
        return _isOk;
    }
    set
    {
        if (_isOk != value)
        {
            _isOk = value;
            RaisePropertyChanged("IsOk");
            RaisePropertyChanged("ButtonImage");
        }
    }
}

public Image ButtonImage
{
    get
    {
        if (_isOk)
            return _okImage;
        else
            return _cancelImage;
    }
} 
```

.. 然后在你的 XAML 中：

```
<Image Source="{Binding ButtonImage}" ... /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:58:31.437

Marty 的回答很干净，但如果你真的只是想使用触发器......这样的方法也可能有效，但就像我说的，Marty 的更干净。:)

```
<Image HorizontalAlignment="Left"  VerticalAlignment="Top" Source="" Width="20" Height="20">
          <i:Interaction.Triggers>
                <ei:DataTrigger Value="False"
                                Binding="{Binding BooleanValueBinding}">
                  <ei:ChangePropertyAction PropertyName="Source"
                                           Value="../Shared/Images/cancel.png" />
                </ei:DataTrigger>
                <ei:DataTrigger Value="True"
                                Binding="{Binding BooleanValueBinding}">
                  <ei:ChangePropertyAction PropertyName="Source"
                                           Value="../Shared/Images/ok.png" />                  
                </ei:DataTrigger>
          </i:Interaction.Triggers>
    </Image> 
```

# javascript - 增长到指定大小的 iframe

> ID：12289376
> 
> 赞同：0
> 
> 时间：2012-09-05T20:38:36.230
> 
> 标签：javascript, iframe

我正在尝试设置一个图像，单击该图像时，会打开一个逐渐变大的 iframe，然后关闭 onmouseout。这是我到目前为止所拥有的：

```
<html>  
<head>
<link rel="stylesheet" href="Css/style.css" type="text/css" media="screen" />
<script language="JavaScript" type="text/javascript">
function makeFrame(src) {
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src","");
ifrm.setAttribute("onmouseout","closeFrame()")
ifrm.setAttribute("onclick","grow()")
ifrm.setAttribute("id","amazingIFrame")
ifrm.style.display = "block";
ifrm.style.width = 640+"px";
ifrm.style.height = 400+"px";
ifrm.style.marginLeft = "325";
ifrm.style.marginTop = "125";
ifrm.style.position = "absolute";
ifrm.style.top="0px";
ifrm.style.color="red";
ifrm.style.zIndex= "101";
document.body.appendChild(ifrm);
}
function closeFrame(){
ifrm.style.display = "none";
}
function grow() {
    ifrm = document.getElementById('amazingIFrame');
    if (ifrm.style.width < 500) {
        ifrm.style.width += 10;
    } else {
        clearInterval(interval);  // stop growing when it's big enough
    }
}
function startGrow() {
    interval = setInterval("grow()", 10);  // repeat every 10 ms
}
</script>

</head>
<body>
<img src="" onclick="makeFrame()" "height="100px" width="100px" />

</body>
</html> 
```

但是，这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:59:55.120

只有在单击 iframe 时才会触发您连接的单击事件。给它一个宽边框，点击边框，你会发现它有效。在 之后发出警报`ifrm = document.getElementById('amazingIFrame');`，您会看到。

如果您想在 iframe 内单击时触发 click 事件，则必须在其中放置一些 HTML 并将事件连接到 iframe 本身中的 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:08:41.090

有几个问题。

*   你从不打电话`startGrow()`。
*   创建时 iframe 的大小已经超过 500px
*   ifrm.style.width < 500 是不对的。ifrm.style.width 将包括 px，因此您将 10px 与 500 进行比较...
*   setInterval 语法不正确。应该是 setInterval(grow, 10);
*   高度前面有一个双引号
*   你没有传递任何参数，所以 src 将是空的（真的只是不必要的）。

[像这样](http://jsfiddle.net/mb7DU/4/)试试

```
function makeFrame() {
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src","");
ifrm.setAttribute("onmouseout","closeFrame()")
ifrm.setAttribute("onclick","grow()")
ifrm.setAttribute("id","amazingIFrame")
ifrm.style.display = "block";
ifrm.style.width = 0;
ifrm.style.height = 400+"px";
ifrm.style.marginLeft = "325";
ifrm.style.marginTop = "125";
ifrm.style.position = "absolute";
ifrm.style.top="0px";
ifrm.style.color="red";
ifrm.style.zIndex= "101";
document.body.appendChild(ifrm);
startGrow();
}
function closeFrame(){
ifrm.style.display = "none";
}
function grow() {
    ifrm = document.getElementById('amazingIFrame');
    var width = parseInt(ifrm.style.width.replace("px",""));
    if (width < 500) {
        ifrm.style.width = (width + 10) +"px";
    } else {
        clearInterval(interval);  // stop growing when it's big enough
    }
}
function startGrow() {
    interval = setInterval(grow, 10);  // repeat every 10 ms
} 
```

# c++ - freopen'd 后访问旧标准输出？

> ID：12289380
> 
> 赞同：0
> 
> 时间：2012-09-05T20:38:56.157
> 
> 标签：c++, visual-studio-2010

我有一堆批处理文件，用程序 A 做这样的事情：

```
A > log.txt ; grep 'result:' log.txt > result.txt || raise_hell.sh 
```

我想要做的是修改 A 以便它会打印一堆中间结果。然而，这并不像你想象的那么容易，因为 A 做了以下事情：

*   调用 _freopen("somefile","w",stdout)，然后
*   在一百万个地方调用 printf（及其变体），并期望输出最终出现在某个文件中。

更改项目中的每一个 printf 对我来说并不实际。更改每个批处理文件也不实际，所以我真的不知道我的输出被重定向到哪里。

理想情况下，我想有一些方法来**获得 stdout 的“原始值”**，然后写在那里。**但是怎么做？**我什至可以用其他东西代替对 freopen 的调用，只要输出仍然在它应该的地方结束。

换句话说，我希望 printf 最终出现在一个文件中，并以其他方式将内容打印到标准输出。

我已经尝试了很多事情，部分是基于对这个问题的变体的回答。但是，这些都不起作用，因为它们最终仍然会写入某个文件。欢迎帮助。

*编辑*：为了清楚起见，这是在 Windows 上，使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:48:30.323

好的，我不是 Windows 人，但只是作为对特定问题的回答：如何弄乱 w/stdout。在 UNIX 中，我们使用 dup/dup2，根据：

[http://www.suacommunity.com/dictionary/dup-entry.php](http://www.suacommunity.com/dictionary/dup-entry.php)

只是在 windows 中略有不同。UNIX 中的基本思想是 stdout 是文件描述符 1...更改打开的内容等同于重定向它。使用 dup，您可以先对其进行复制，以备不时之需。

不过，总的来说，我会使用 stderr 来获取进度消息……这就是它存在的原因。

# php - 如何安全地清理输入/输出 - 剥离 html 等

> ID：12289384
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:39:06.273
> 
> 标签：php, codeigniter

使用 codeigniter 从提交的数据中去除 html 等的最佳方法是什么？

（我并不是要为数据库清理它）

是否有内置的方法来做类似 htmlpurifier 的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:42:57.380

看看这个链接：

[http://codeigniter.com/user_guide/libraries/form_validation.html#validationrules](http://codeigniter.com/user_guide/libraries/form_validation.html#validationrules)

您应该能够执行以下操作：

```
$this->form_validation->set_rules('submittedData', 'SubmittedData', 
                                  'trim|xss_clean|strip_tags'); 
```

# jquery - 在模态对话框表单中使用 ajax/json 更新 div 随机失败

> ID：12289385
> 
> 赞同：0
> 
> 时间：2012-09-05T20:39:07.017
> 
> 标签：jquery, ajax, json, dialog, carousel

我正在尝试以模式对话框中显示的形式使用 getJSON 更新 div 控件（#test）。每次用户单击定义的链接时都会显示该对话框。这是调用的函数：

```
// Displays modal dialog with a form
function job_description(job_id) {
    $('<div id="server-form"></div>').load('/description_form').dialog(
        {
            position: { 
                my: 'top top',
                at: 'top top',
                offset: '0 100',
                of: $('body')
            },
            width: 650,
            modal:true,
            resizable: false,
            title: 'Job description details',
            buttons: { 
                "close": {
                class: "btn btn-primary",
                text: "Close",
                click: 
                    function() {
                        $( this ).remove();
                    }
                }
            },
            close: function(event,ui) {
                $(this).remove();
            }
    });
    var response = $.ajax({
      type: 'GET',
      url: '/descriptions_list/'+job_id,
      cache: false,
      datatype: 'json',
      success: function(response){
               var obj = $.parseJSON(response); 
               //console.log(obj.description.title);
               $('#test').html(obj.description.title);
          },
      error: function(msg) {
                alert('error: '+msg);
      }
    });
} 
```

我知道 ajax 调用始终有效（我检查了控制台，但从未收到警报），但 #test div 有时不会更新。它随机发生。开头的 load() 方法调用了一个实际加载表单的 REST 服务，然后使用 ajax 从另一个 url 拉取一些数据。#test div 也在引导轮播中。这是我要更新的 div 部分：

```
<div id="wrapper">
<div id="description-editor" class="carousel slide" style="padding-left: 20%;padding-right: 20%">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <form>
      <div class="item well" style="height: 500px">
        <h3>Title</h3><br/>
        <div id="test" style="width: 300px; height: 200px">I should get updated...</div>
      </div>
      <div class="item well" style="height: 500px">
        <h3>Some other info</h3><br/>
        <p>To be completed</p>
      </div>
    </form>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#description-editor" data-slide="prev" data-interval="">&lsaquo;</a>
  <a class="carousel-control right" href="#description-editor" data-slide="next" data-interval="">&rsaquo;</a>
</div>
</div> 
```

我正在努力弄清楚为什么#test div 在调用成功时并不总是得到更新（总是如此）。我尝试使用 async: false，但这也无济于事……我使用的是 jquery 1.7.1。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:10:35.837

我发现您的代码有 2 个问题：

1.  正如 Chris 所指出的，您调用 jQuery load 的方式假定它会立即（同步）加载，但事实并非如此。您需要`.load()`按照[jQuery 文档](http://api.jquery.com/load/)实现，并且只有在加载完成后才继续使用`.dialog()`and 。`.ajax()`即通过将所有代码放入/触发加载的“完整”回调参数中。请注意，虽然`.load()`确实隐式地异步设置了 div 的内容，但后续的 ajax 调用仍然可以在 div 加载之前发生。

2.  `.ajax()`将数据类型指定为 JSON 时，您不需要将响应解析为 JSON。`.ajax()` [JQuery 文档](http://api.jquery.com/jQuery.ajax/)说：

> **success(data, textStatus, jqXHR)** - 函数获得三个参数：从服务器返回的数据，根据 dataType 参数格式化...

和

> **dataType** - “json”：将响应评估为 JSON 并返回一个 JavaScript 对象

我还将实现其他成功参数，这样当您看到错误时，您可以查看其中是否有任何有趣的东西。

# c++ - CUDA 与 OpenMP 相结合

> ID：12289387
> 
> 赞同：3
> 
> 时间：2012-09-05T20:39:10.003
> 
> 标签：c++, cuda, openmp

我看到了一些关于此的线程，但它们似乎与我遇到的问题无关。

我有我的 CUDA 代码可以工作，但我想并行化与内核代码异步运行的 for 循环（以及在内核完成之后）。

不过，我似乎遇到了链接问题……错误就是这样。

> .../lib/liblalinference.so：错误：未定义对“omp_get_num_threads”的引用
> 
> .../lib/liblalinference.so：错误：未定义对“omp_get_thread_num”的引用
> 
> .../lib/liblalinference.so：错误：未定义对“GOMP_barrier”的引用
> 
> .../lib/liblalinference.so：错误：未定义对“GOMP_single_start”的引用
> 
> .../lib/liblalinference.so：错误：对“GOMP_critical_start”的未定义引用
> 
> .../lib/liblalinference.so：错误：未定义对“GOMP_critical_end”的引用
> 
> .../lib/liblalinference.so：错误：未定义对“__gxx_personality_v0”的引用
> 
> .../lib/liblalinference.so：错误：未定义对“GOMP_parallel_start”的引用
> 
> .../lib/liblalinference.so：错误：未定义对“GOMP_parallel_end”的引用

首先，我想指出我之前有过 opemMP 工作，但是在一个单独的部分中，我用它编译了 C 代码

```
CFLAGS = -g -O2 *many flags here* -fopenmp 
```

其他所有信息都是无关信息，重要的是我只需将 -fopenmp 添加到 makefile 的标志行中。

但是，由于 CUDA 非常复杂，并且使用 nvcc （其中使用 c++ 编译器作为其主干）（对吗？），我似乎不知所措。当我将 -fopenmp 添加到

```
CPPFLAGS =  ... *many cuda flags* -fopenmp 
```

我收到上述错误。

我什至试过

```
CPPFLAGS =  ... *many cuda flags* -fopenmp -lgomp 
```

还要注意的是，当我配置我的项目时，启用 CUDA 时禁用 GCC 标志。

我哪里错了？我需要把旗帜放在别处吗？我需要放弃吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T01:42:22.670

当我执行以下操作时，我发现它有效。

nvcc*标志*-Xcompiler -fopenmp -fgomp*文件内容*

感谢都铎王朝

# jquery - 仅在选中一个或多个复选框时显示HREF链接

> ID：12289390
> 
> 赞同：0
> 
> 时间：2012-09-05T20:39:20.330
> 
> 标签：jquery, events, checkbox

我有一组复选框和一个主复选框，如果我选中主复选框，那么其余的将被选中，但我可以一个一个地检查。所以我有一个链接，我只想在选中一个或多个复选框时显示该链接，如何？

编辑：这是用于测试的 HTML 代码：

```
<table width="100%">
    <thead>
        <tr>
            <td style="text-align:center;"><input type="checkbox" name="message_delivery" /></td>
            <td>Asunto</td>
            <td>Para</td>
            <td>Fecha</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><input type="checkbox" name="message_delivery[]" value="1" /></td>
            <td><a href="messages/show/id/1" class="read">sadasdasdas</a></td>
            <td>Demo Demo</td>
            <td>Wednesday, 05 de September de 2012 - 11:51:19 AM</td>
        </tr>
        <tr>
            <td><input type="checkbox" name="message_delivery[]" value="1" /></td>
            <td><a href="messages/show/id/1" class="read">sadasdasdas</a></td>
            <td>170ead917-FN 170ead917-LN</td>
            <td>Wednesday, 05 de September de 2012 - 11:51:19 AM</td>
        </tr>
        <tr>
            <td><input type="checkbox" name="message_delivery[]" value="1" /></td>
            <td><a href="messages/show/id/1" class="read">sadasdasdas</a></td>
            <td>Demo1 Lastname1</td>
            <td>Wednesday, 05 de September de 2012 - 11:51:19 AM</td>
        </tr>
        <tr>
            <td><input type="checkbox" name="message_delivery[]" value="1" /></td>
            <td><a href="messages/show/id/1" class="read">sadasdasdas</a></td>
            <td>174889ead-FN 174889ead-LN</td>
            <td>Wednesday, 05 de September de 2012 - 11:51:19 AM</td>
        </tr>
    </tbody>
</table>

<div class="button-bar">
    <a href="http://cmv.loc/messages/add">Escribir nuevo</a>
    <a id="btn_delete" class="btn_delete" style="display:none">Borrar marcados</a>
</div> 
```

如果选中一个或多个复选框，我想显示#btn_delete。

提前欢呼和感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:42:54.637

```
$(':checkbox').click(function() {
    $('a').toggle($(':checkbox:checked').length > 0);
});​ 
```

[http://jsfiddle.net/zerkms/RpxZd/1/](http://jsfiddle.net/zerkms/RpxZd/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:45:31.473

将 onChange 事件绑定到每个复选框并检查是否选中了其中任何一个，如果是则显示链接。更好的事件......而不是制作大量事件，只需使用委托来执行此操作。

# javascript - 访问需要通过 JavaScript 进行身份验证的页面

> ID：12289392
> 
> 赞同：1
> 
> 时间：2012-09-05T20:39:22.600
> 
> 标签：javascript, ajax, authentication

我对 JavaScript 很陌生，我正在尝试访问一个需要用户身份验证的页面，然后才能显示该页面。

如何访问此页面？（我有所需的用户名和密码）我知道我们可以使用 XML HTTPrequest 对象通过脚本访问其他 URL。但我不知道有任何选项可以让我先进行身份验证。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:49:24.820

您可能应该向身份验证页面发出请求，发送用户名和密码。这将设置一个浏览器将自行处理的会话 cookie，然后会话 cookie 将自动转发给您发出的以下请求，直到会话到期。

但是请记住跨域脚本的限制，例如，如果您要验证的页面与运行脚本的页面位于不同的域中，则浏览器可能会拒绝发出任何请求。

实际上，这种来自浏览器的自动 cookie 处理是跨域脚本不安全的原因，因此大多数站点都被禁止。

# javascript - 为设置为 1 的位对生成所有组合？

> ID：12289400
> 
> 赞同：6
> 
> 时间：2012-09-05T20:39:49.570
> 
> 标签：javascript, bit-manipulation, combinations, bitwise-operators

我正在尝试为给定位宽内的一对 1 生成所有可能的组合。

假设位宽为 6，即数字 32。这就是我想要生成的：

```
000000
000011
000110
001100
001111
011000
011011
011110
110000
110011
110110
111100
111111 
```

如果我有变量：

```
var a = 1,
    b = 2;
    num = a | b; 
```

并创建一个循环，我会随着`width - 1`时间的推移循环，在我移动 和`a << 1`的地方`b << 1`，我会得到一对的所有组合。在那之后，我几乎被困住了。

有人可以请提供一些帮助。

**更新：工作示例**
基于 Barmar 的数学方法，这是我设法实现的

```
var arr = [],
    arrBits = [];

function getCombs(pairs, startIdx) {
    var i, j, val = 0, tmpVal, idx;

    if (startIdx + 2 < pairs) {
        startIdx = arr.length - 1;
        pairs -= 1;
    }

    if (pairs < 2) {
        return;
    }

    for (i = 0; i < pairs-1; i++) {
        idx = startIdx - (i * 2);
        val += arr[idx];

    }

    for (j = 0; j < idx - 1; j++) {
        arrBits.push((val + arr[j]).toString(2));
    }

    getCombs(pairs, startIdx-1);
}

(function initArr(bits) {
    var i, val, pairs, startIdx;

    for (i = 1; i < bits; i++) {
        val = i == 1 ? 3 : val * 2;
        arr.push(val);
        arrBits.push(val.toString(2));
    }

    pairs = Math.floor(bits / 2);
    startIdx = arr.length - 1;

    getCombs(pairs, startIdx);
    console.log(arrBits);

}(9)); 
```

**JSFiddle 上的工作示例**
[http://jsfiddle.net/zywc5/](http://jsfiddle.net/zywc5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:54:51.713

恰好有一对 1 的数字是序列 3, 6, 12, 24, 48, ...；他们从 3 开始，每次加倍。

有两对 1 的数是 12+3, 24+3, 24+6, 48+3, 48+6, 48+12, ...；这些是从 12 + 原始序列到 n/4 的上述序列。

三对 1 的数字是 48+12+3, 96+12+3, 96+24+3, 96+24+6, ...

这些中的每一个之间的关系表明使用原始加倍序列的递归算法。我现在没有时间写它，但我认为这应该能让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:44:14.200

如果位宽不是那么大，那么最好在循环中为从 0 到 31 的所有数字创建位表示，并简单地忽略位表示中具有奇数个“1”的那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:53:16.873

也许开始以二进制正常计数并将所有 1 替换为 11，如下所示：

```
n = 5
n = n.toString(2)          //= "101"
n = n.replace(/1/g, "11")  //= "11011"
n = parseInt(n, 2)         //= 27 
```

所以你会得到：

```
0   -> 0
1   -> 11
10  -> 110
11  -> 1111
100 -> 1100
101 -> 11011
110 -> 11110
111 -> 111111 
```

等等。您必须在左侧数到 31 左右，并在右侧拒绝超过 6 位的数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:00:47.167

见[http://jsfiddle.net/SBH6R/](http://jsfiddle.net/SBH6R/)

```
var len=6,
    arr=[''];
for(var i=0;i<len;i++){
    for(var j=0;j<arr.length;j++){
        var k=j;
        if(getNum1(arr[j])%2===1){
            arr[j]+=1;
        }else{
            if(i<len-1){
                arr.splice(j+1,0,arr[j]+1);
                j++;
            }
            arr[k]+=0;
        }      
    }
}
function getNum1(str){
    var n=0;
    for(var i=str.length-1;i>=0;i--){
        if(str.substr(i,1)==='1'){n++;}
        else{break;}
    }
    return n;
}
document.write(arr.join('<br />')); 
```

或者，也许您会更喜欢[http://jsfiddle.net/SBH6R/1/](http://jsfiddle.net/SBH6R/1/)。它更简单，但是您将不得不`sort()`使用数组：

```
var len=6,
    arr=[''];
for(var i=0;i<len;i++){
    for(var k=0,l=arr.length;k<l;k++){
        if(getNum1(arr[k])%2===1){
            arr[k]+=1;
        }else{
            if(i<len-1){
                arr.push(arr[k]+1);
            }
            arr[k]+=0;
        }     
    }
}
function getNum1(str){
    var n=0;
    for(var i=str.length-1;i>=0;i--){
        if(str.substr(i,1)==='1'){n++;}
        else{break;}
    }
    return n;
}
document.write(arr.sort().join('<br />')); 
```

如果您想比较性能，请参阅[http://jsperf.com/generate-all-combinations-for-pair-of-bits-set-to-1 。](http://jsperf.com/generate-all-combinations-for-pair-of-bits-set-to-1)似乎最快的代码是 Chrome 上的第一个，而 Firefox 上的第二个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-15T09:22:56.527

You can also do this with bit twiddling. If the lowest two bits are zero, we need to set them, which is equivalent to adding 3\. Otherwise, we need to replace the lowest block of ones by its top bit and a 1-bit to the left of it. This can be done as follows, where `x` is the current combination:

```
x3 = x + 3;
return (((x ^ x3) - 2) >> 2) + x3; 
```

# c++ - 包含 boost::asio 标头时引发运行时异常

> ID：12289409
> 
> 赞同：4
> 
> 时间：2012-09-05T20:40:54.593
> 
> 标签：c++, boost, boost-asio, runtime-error

给定代码。. .

```
#include <boost/asio.hpp> 

int main()
{
    return 0;
} 
```

我编译它并链接到 boost_system-mt，然后运行它并从控制台获取以下输出。

> $ ./clientapp
> 
> 在抛出 'boost::exception_detail::clone_impl 的实例后调用终止
> 
> ' what(): No such file or directory 中止陷阱

这看起来不太好。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T15:05:34.390

Boost::Asio 也需要 pthread。尝试编译将 -lpthread 添加到 gcc 命令。

# html - 有没有IE的开发工具

> ID：12289414
> 
> 赞同：-4
> 
> 时间：2012-09-05T20:41:13.410
> 
> 标签：html, css, internet-explorer, browser

我的网站在 Chrome 和 Firefox 中看起来不错，但在 IE 中，一切都很混乱。我只是想弄清楚哪个css不好。

那么IE中是否有任何开发工具，例如Firefox中的Firebug或Chrome中的开发工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:44:26.633

IE8 及更高版本包括“开发者工具”功能，可以通过 F12 访问，就像 Firebug。

它不像 Firebug 或 Chrome 开发工具那么好，但它确实存在，并且对调试代码很有用。

顺便说一句，在其他网站中看起来不错的网站在 IE 中表现不佳的主要原因之一是您没有指定有效的 DOCTYPE。这将使网站进入“怪癖模式”。这可以通过添加`<!DOCTYPE html>`为 HTML 代码的第一行来解决。IE 的开发工具窗口会显示页面是否处于 quirks 模式——这可能是您应该检查的第一件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:43:15.543

最新的 IE 版本包括一个开发工具。如果我没记错的话，你可以按F12打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:44:02.870

Internet Explorer 开发者工具栏：

[http://www.microsoft.com/en-us/download/details.aspx?id=18359](http://www.microsoft.com/en-us/download/details.aspx?id=18359)

Microsoft Internet Explorer 开发人员工具栏提供了多种用于快速创建、理解和排除网页故障的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:44:20.847

试用 Internet Explorer 开发工具（从 8 版本开始）

[http://msdn.microsoft.com/en-us/library/dd565628%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd565628%28v=vs.85%29.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T22:39:47.423

Google Web Toolkit 是另一种选择

[https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9](https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9)

# javascript - 如何做javascript连续滚动-自动加载

> ID：12289417
> 
> 赞同：0
> 
> 时间：2012-09-05T20:41:16.947
> 
> 标签：javascript

我不精通JavaScript。我不知道人们对这种方法有何要求。我想了解当您向下滚动页面时[http://imgur.com/gallery/hot](http://imgur.com/gallery/hot)如何连续加载页面。

请看一下上面的网址。我的意思是你可以像 Facebook 时间线一样滚动它。

这是什么方法？你知道我可以在哪里学习这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:46:06.473

它被称为无限滚动或连续滚动。这是交易：[http ://designbeep.com/2011/08/12/12-jquery-infinite-scrollingscroll-read-plugins-for-content-navigation/](http://designbeep.com/2011/08/12/12-jquery-infinite-scrollingscroll-read-plugins-for-content-navigation/)

# windows - Windows 脚本：文本字符串的文本操作

> ID：12289420
> 
> 赞同：0
> 
> 时间：2012-09-05T20:41:36.063
> 
> 标签：windows, text, sed, cmd, gawk

再次需要大帮助

文件1：

```
\\server2\share1,\\serverdfs\dfs\test2
\\server1\anothershare,\\serverdfs\dfs\test1 
```

文件2：

```
\\server2\share1,/fs7/server1/share1
\\server1\anothershare,/fs1/serverx/share1
\\server4\newshare,/fs7/server1/share1 
```

脚本：

```
@ECHO OFF 
DEL file3 2 > nul 
FOR /f "tokens=1*delims=," %%i IN (file1.txt) DO ( 
  FOR /f "tokens=1*delims=," %%a IN (file2.txt) DO ( 
   IF /i "%%i"=="%%a" >>file3 ECHO %%i,%%j,%%b>file3.txt
  ) 
) 
```

输出是这样的：

```
\\server2\share1,\\\serverdfs\dfs\test2,/fs7/server1/share1  
\\server1\anothershare,\\\serverdfs\dfs\test1,/fs1/serverx/share1 
```

该脚本将在两个文件（file1.txt 和 file2.txt）之间搜索匹配项（第一个字段 = 逗号前的任何内容）。

例如，问题`\\server4\newshare`仅存在于 file2.txt 中。

在这种情况下，这两行都具有相同的第二个字段：

```
\\server2\share1,/fs7/server1/share1
\\server4\newshare,/fs7/server1/share1 
```

你能想出什么来显示类似这样的输出：

```
\\server2\share1,\\\serverdfs\dfs\test2,/fs7/server1/share1  
\\server1\anothershare,\\\serverdfs\dfs\test1,/fs1/serverx/share1 
```

`only_at_file2.txt, \\server4\newshare,/fs7/server1/share1 same path as \\server2\share1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:42:35.253

像这样运行：

```
awk -f script.awk file1.txt file2.txt 
```

内容`script.awk`：

```
BEGIN {
   FS=OFS=","
}

FNR==NR {
   array[$1]=$2
   next
}

{
   if ($1 in array) { 
      print $1, "\\"array[$1], $2
   }

   else {
      if ($2 in values) {
         print "only_at_" FILENAME ", " $0 " same path as " values[$2]
      }
      else {
         print "only_at_" FILENAME ", " $0 " no path found"
      }
   }
   values[$2]=$1
} 
```

结果：

```
\\server2\share1,\\\serverdfs\dfs\test2,/fs7/server1/share1
\\server1\anothershare,\\\serverdfs\dfs\test1,/fs1/serverx/share1
only_at_file2.txt, \\server4\newshare,/fs7/server1/share1 same path as \\server2\share1 
```

* * *

如果有重复的路径，这将显示找到的最后一个路径`file2.txt`（即`values[$2]=$1`覆盖以前的路径）。例如，如果现在在`/fs7/server1/share1`中找到另一个路径为`file2.txt`的服务器，则输出服务器将是`\\server4\newshare`

# android - Android GCM 注册

> ID：12289421
> 
> 赞同：0
> 
> 时间：2012-09-05T20:41:43.783
> 
> 标签：android, google-cloud-messaging

首先，我使用我的 SENDER_ID 在手机上启动了示例客户端演示，并收到“成功注册”。然后我在同一部手机上使用相同的 SENDER_ID 启动我的应用程序，但什么也没有收到。这正常吗？如果是，我如何删除以前的注册以全面测试我的应用程序的推送通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:46:58.050

您是否尝试过简单的事情，例如卸载示例演示？

在我这边，我已经连续多次重启我的客户端应用程序，每次都获得一个注册 ID（即你不需要“删除以前的注册”）。

你得到什么错误？当没有返回注册 ID 时，您通常会获取信息。

# ruby - 如何检查 Ruby 中是否存在文件夹列表？

> ID：12289423
> 
> 赞同：1
> 
> 时间：2012-09-05T20:41:49.083
> 
> 标签：ruby

我试图在我的 C:/ 驱动器上找到一个匹配的文件夹列表，然后执行一些代码，但它没有按预期工作。

我可以用一个文件夹很好地做到这一点，但不知道如何让它与我想要找到的文件夹列表一起工作。

**我的代码**

```
Dir.glob("C:/*")

directory_list = Array.new

directory_list << "FolderA"
directory_list << "FolderB"

    if Dir.exists?(directory_list)

        puts "Does exist"

    else

        puts "Does not Exist"
    end 
```

**以下解决方案为我提供了概念证明**

```
 dirs = ["FolderA", "FolderB"] 
 reg = Regexp.union dirs exists, 
 rest = Dir.glob("{B,C,D}:/*").partition{ |path| path =~ reg } 
 puts exists 
```

感谢聊天室里的凯尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:50:50.770

```
c_drive = Dir.glob("**/")
%w(FolderA, FolderB).每个都做 |dir|
  如果 c_drive.include?(dir)
    提出“#{dir} 存在”
  别的
    puts "#{dir} 不存在"
  结尾
结尾

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:53:29.807

在 Windows 上，目录前面带有驱动器，因此您需要：

```
"C:/FolderB" =~ /FolderB|FolderA/ 
```

编码：

```
dirs = ["FolderA", "Folderb"] 
reg = Regexp.union dirs 
exists, rest = Dir.glob("C:/*").partition{ |path| path =~ reg }
# now you have two arrays, one of directories that exist and the rest 
```

# sql-server-2008 - SQL Server DBCC CHECKDB 在启动时运行

> ID：12289424
> 
> 赞同：0
> 
> 时间：2012-09-05T20:41:50.253
> 
> 标签：sql-server-2008, dbcc

我们注意到，在启动时，会针对正在重新启动的实例上的所有数据库运行 CHECKDB。起初我认为这是标准程序并做了一些研究。我发现有几篇文章指出，当服务器出现故障而不允许数据库正确关闭时，就会发生这种情况。

虽然这很有道理，但为什么这些 CHECKDB 只需要几分钟就可以完成？即使 PHYICALONLY 也需要一个小时或更长时间才能完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:45:57.700

SQL Server 在启动时并没有真正运行 CHECKDB。Michael Campbell 很好地解释了您所看到的：[为什么 SQL Server 在服务器启动时针对我的数据库运行 DBCC CHECKDB？](http://www.sqlmag.com/blog/practical-sql-server-45/sql-server/why-is-sql-server-running-dbcc-checkdb-against-my-databases-at-server-startup-139458)

# java - Maven 发布模式

> ID：12289425
> 
> 赞同：1
> 
> 时间：2012-09-05T20:41:51.500
> 
> 标签：java, maven

我是 Maven 新手，并试图了解如何发布我的项目。我在 svn 中有以下项目设置：

```
trunk
  |-deployer
  |    |-pom.xml
  |-webapp
  |    |-pom.xml
  |-utils      
       |-pom.xml 
```

在开发**webapp**时，我总是想针对 utils 的最新快照版本进行开发，因此我通过以下方式在 webapp/pom.xml 中声明了对 utils 的依赖：

com.company utils 1.0-SNAPSHOT

Webapp 本身目前的版本也是 1.0-SNAPSHOT。它的 pom.xml 有声明：

```
<artifactId>webapp</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>Sample Webapp</name> 
```

所以一切都很好，但现在我想发布我的软件。在部署程序中，我在 pom.xml 中有以下内容：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.company</groupId>
  <artifactId>deployer</artifactId>
  <packaging>pom</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>Project Release</name>

  <modules>
    <module>externals/webapp</module>
  </modules>

  <properties>
    <url.svn>http://<my-server>/<project>/trunk</url.svn>
  </properties>
  <scm>
    <connection>scm:svn:${url.svn}</connection>
  </scm>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-release-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <tagBase>
            http://<my-server>/<project>/tags
          </tagBase>
        </configuration>
      </plugin>

    </plugins>
  </build>

  <distributionManagement>
    <repository>
      <id>Releases</id>
      <name>Releases</name>
      <url>http://<nexus-server>/nexus/content/repositories/releases</url>
    </repository>
    <snapshotRepository>
      <id>Snapshots</id>
      <name>Snapshots</name>
      <url>http://<nexus-server>/nexus/content/repositories/snapshots</url>
    </snapshotRepository>
  </distributionManagement>

</project> 
```

在部署程序文件夹本身中，我有一个名为“externals”的文件夹，它设置了一个 svn-externals 来检查我的 webapp 项目（我添加了这个，因为 maven 抱怨找不到它），所以我的模块路径应该是正确的。

**问题**

1.）我想发布我的网络应用程序的一个版本，但是当我在我的部署器项目中运行一个`mvn release:prepare`和`mvn release:perform`时，我唯一有形的输出是我在 svn 中标记的主干和一个上传到我的 nexus 存储库的 pom。这是有道理的，因为我的部署器工件包装是“pom”类型，但它也没有完成让我与我的 webapp 发生战争的工作（我应该在这里注意，如果在 webapp 项目中单独发布不过，我会得到战争）。我需要发布多个模块，所以我认为我可以使用部署程序项目中的 Maven 聚合来完成此任务，但它似乎不起作用。

2.）有没有更好的方法来实现我想要做的事情？

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:56:05.857

您应该针对您打算发布的每个模块运行 maven-release-plugin。我从未见过有人有一个特殊的“部署程序”模块来发布其他模块，这不是通常的做法。

通常要发布 webapp 模块，您将针对 webapp 模块运行命令，而要发布 utils 模块，您将针对 utils 模块运行命令。

如果您有一个将 webapp 和 util 联系在一起的父模块，那么我相信您可以针对它运行发布命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:23:57.373

正如 matt b 所说，只需在顶部 pom 中添加一个 maven-release-plugin 条目可能会满足您的需求。如果你想将几个工件收集到一个适当的发布包中，你想为此创建一个模块，但是你想查看 maven 程序集插件。它可以将各种 jars（来自模块或外部依赖项）和资源收集到目录、zip 文件或类似文件中。

# php - 从 PHP 触发 AJAX

> ID：12289433
> 
> 赞同：1
> 
> 时间：2012-09-05T20:42:26.507
> 
> 标签：php, ajax

所以这是一个奇怪的问题，你可能认为它是相反的，但它来了。

我使用了一个名为 Laravel 的框架。并不是说它有任何区别，但我认为值得一提。在这个框架上，我有一个网络应用程序，可以对相册中的图片进行评分。

正在上传的图片来自一个 android 应用程序。图片由手机制作，手机将其转换为 base64 并将其发送到 Web 应用程序。我的 Web 应用程序中的控制器操作正在接收它发送的输入。

以上确实有效！但是现在我想在开始使用控制器操作时在 PHP 中触发某种事件。因此，当上传图片时，使用 Web 应用程序的用户会看到相册中添加了一张新图片。

谁能指出我正确的方向？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:49:13.143

好吧，您可能会受到这个网站的启发，并在 Web 应用程序的顶部放置一个栏，通知用户更改。

或者创建一个亮起并指示更改次数的重新加载按钮。当用户单击该按钮时，可以重新加载图库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:51:45.403

设置轮询器每隔 X 秒检查一次新图像。如果有新图像，请显示它。

这就是 stackoverflow 为新答案工作的方式。如果您检查 Firebug 中的控制台选项卡，您将看到它每 30 秒（ish）轮询一次。

示例（使用 jQuery）：

```
setInterval(function() {
    $.getJSON('/check-for-images', function(data) {
        if (data instanceof Array) {
            $.each(data, function(i, image) {
                $('<img/>').attr('src', image).appendTo('#container');
            }
        }
    });
}, 30000); 
```

PHP：

```
$result = query('SELECT name FROM images WHERE date > :lastUpdated', $lastUpdated);
echo json_encode(fetchArray($results)); 
```

# java - JODA 夏令时转换

> ID：12289434
> 
> 赞同：0
> 
> 时间：2012-09-05T20:42:35.470
> 
> 标签：java, jodatime, dst

在我的一个项目中，我必须将 UTC DateTime 转换为用户特定的日期和时间。我正在使用 xml 来获取时间偏移和夏令时参数。

例如 offset="GMT+2" dst="true"

如果是这种情况，那么考虑到夏令时，我必须将 utc DateTime 转换为 GMT+2。

我阅读了许多博客文章和文章，但没有完全理解如何进行时间和日期转换。有人可以给我看一个使用 JODA DateTime 或 java 中类似内容的示例。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:57:50.503

如果您有`DateTime`任何给定的实例，`DateTimeZone`您可以将其转换为另一个时区，只需`dateTime.toDateTime(otherTimeZone)`.

# jquery - 记住密码时Jquery Textbox的默认值不清除

> ID：12289439
> 
> 赞同：-2
> 
> 时间：2012-09-05T20:42:45.560
> 
> 标签：jquery

我有一个带有电子邮件文本框和密码文本框的登录页面。两个文本框将分别具有以下默认文本 - “电子邮件地址”和“密码”。当用户在任一字段中输入值时，默认文本将被清除。我有这个工作，除非用户设置他们的浏览器来记住他们的密码。

自动填充密码时，默认文本不会清除，因此看起来像 2 段文本。

**相关HTML：**

```
<div class="input-wrapper">
<label for="txtSID">Email address</label>
<input type="text" id="txtSID" name="txtSID" class="text" />
</div>                              

<div class="input-wrapper">
<label for="txtPassword">Password</label>
<input type="password" id="txtPassword"  name="txtPassword" class="text" />
</div> 
```

**相关CSS：**

```
input.text {    
    position: relative;
    display: -moz-inline-box; /* ff2 */
    display: inline-block;
    *display: inline; /* ie6&7 */
    zoom: 1;
}

.input-wrapper {
    position: relative;
    display: -moz-inline-box;
    display: inline-block;
    *display: inline; /* ie6&7 */
    zoom: 1;
}

.input-wrapper input.text {
    z-index: 2;
    margin: 0;
    border: 0;
    background: transparent;
    *background: url(http://hunch.com/media/img/t.png); /* ie7 does weird stuff with transparent background, also please don't deep link to this image from your code */
}

.input-wrapper label {   
    z-index: 1;
    position: absolute;  
    overflow: hidden;
}

.input-wrapper.focus label {
    filter:alpha(opacity=50);
    opacity: 0.6;
}

.input-wrapper.filled label {
    display: none;
} 
```

**相关的jQuery：**

```
$(document).ready(function() {

    var parentSelector = '.input-wrapper',
    inputSelectors = [parentSelector + '>input.text', parentSelector + '>textarea'],
    len = inputSelectors.length,
    i;

    function update(force) {
        var $input = $(this),
        $parent = $input.parent(parentSelector);
        return $parent[force === true || $input.val() ? 'addClass' : 'removeClass']('filled');
    }

    function focus() {
        update.call(this).addClass('focus');
    }

    function blur() {
        update.call(this).removeClass('focus');
    }

    function keydown(evt) {
        var c = evt.keyCode;
        ((47 < c && c < 91) || (95 < c && c < 112) || (185 < c && c < 223)) && update.call(this, true);
    }

    $.fn.prepareInput = function() {
        return this.each(update);
    };

    for (i = 0; i < len; i++) {
        $(inputSelectors[i]).live('focus', focus).live('blur', blur).live('keyup', update).live('click', update).live('keydown', keydown);
    }

    $(function() {
        for (i = 0; i < len; i++) {
            $(inputSelectors[i]).prepareInput();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:43:00.560

出现问题是因为您依赖`KeyDown`事件来清除默认值（实际上称为**Placeholder**）。

### 其他选项：

尝试使用 HTML5 占位符属性：

```
<input type="text" placeholder="Email address" id="txtSID" name="txtSID" class="text"/>
<input type="password" placeholder="Password" id="txtPassword"  name="txtPassword" class="text" /> 
```

虽然浏览器支持还不是 100%，但这将为您提供一种标准方法来实现您想要实现的目标。

**注意：**自动填充似乎会触发`onchange`事件，因此您可以尝试使用它而不是`onkeydown`.

看看[jquery-watermark](http://code.google.com/p/jquery-watermark/)以获得更简单和更清洁的 Placeholder，无需 HTML5。

要关闭自动填充，您可以参考[此处](https://developer.mozilla.org/en-US/docs/How_to_Turn_Off_Form_Autocompletion)。

# spring - 创建 @Scope("session") 的新实例时出现 IllegalStateException

> ID：12289444
> 
> 赞同：3
> 
> 时间：2012-09-05T20:43:02.653
> 
> 标签：spring

我曾经在 XML 中定义了以下 bean（它有效！）：

```
<bean id="session"  class="mrpomario.springcore.bean_scopes.beans.SessionBean" scope="session">
<aop:scoped-proxy/>
</bean> 
```

现在我尝试通过 Java 完成相同的配置：

```
 @Bean
    @Scope("session")
    @ScopedProxy
    public SessionBean session() {
        return new SessionBean();
    } 
```

我收到以下错误...

```
java.lang.IllegalStateException: No Scope registered for scope 'session' 
```

...当我`session()`作为另一个 bean 中的 setter 的参数调用时。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:56:21.640

`@ScopedProxy`不是 Spring 的 Java 配置的一部分。解决方案[在参考手册中](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-java-specifying-bean-scopehttp://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-java-specifying-bean-scopehttp://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-java-specifying-bean-scopehttp://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-java-specifying-bean-scopehttp://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-java-specifying-bean-scope)`proxyMode`-使用`@Scope`注释：

```
@Bean
@Scope(value = "session", proxyMode = ScopedProxyMode.TARGET_CLASS)
public SessionBean session() {
    return new SessionBean();
} 
```

# javascript - foreach jquery 输入名称的值

> ID：12289449
> 
> 赞同：-6
> 
> 时间：2012-09-05T20:43:29.293
> 
> 标签：javascript, jquery, for-loop, foreach

这是关于 JavaScript/jQuery 中的 foreach 函数。

我想要一些关于输入名称通配符的帮助

示例：当单击任何以“field_{something}”开头的输入名称时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:47:19.603

您的问题的格式不是很好，但听起来您正在寻找通配符选择器。

```
$("[name^=field_]").click(function() {
  //do stuff
}); 
```

更多在[这个 SO 线程](https://stackoverflow.com/questions/3697542/is-there-a-wildcard-class-selector)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:49:03.380

```
$("input[name^=field_]").each(function(){
 var currentInput = this;
 //...do something ...  
 }); 
```

# java - 了解 ProcessBuilder

> ID：12289451
> 
> 赞同：2
> 
> 时间：2012-09-05T20:43:42.850
> 
> 标签：java, system-calls, processbuilder

我第二次遇到使用 ProcessBuilder 从系统调用中提取值的问题。

我最后一次使用电话：

```
try {
    String[] cmd = new String[5];
    cmd[0] = "reg";
    cmd[1] = "query";
    cmd[2] = key;
    cmd[3] = "/v";
    cmd[4] = name;

    ProcessBuilder pb = new ProcessBuilder(cmd);
    Process process = pb.start();
    StreamReader reader = new StreamReader(process.getInputStream());

    reader.start();
    int exitValue = process.waitFor();
    reader.join();
    if (exitValue != 0) {
        return null;
    }

    String result = reader.getResult();
    int p = result.indexOf(REGSTR_TOKEN);

    if (p == -1) {
        return null;
    }

    return result.substring(p + REGSTR_TOKEN.length()).trim();
} catch (Exception e) {
    return null;
} 
```

从 Windows 注册表中提取值。

但是该值总是返回一个错误，这与我从命令行调用时发生的情况不同。可以看出环境变量是不同的。

有什么问题？我应该设置任何环境变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:03:41.080

问题是 Java 运行时发现了错误`reg.exe`。当作为命令行执行`\Windows\System32\reg.exe`时，当在调用我的 java 类调用的进程中运行时，它被执行为`\Windows\SysWOW64\reg.exe`。每个`reg.exe`指向不同的注册表。那是错误。

代码必须固定：

```
cmd[0] = "\\Windows\\System32\\reg"; 
```

或者：

```
cmd[0] = "\\Windows\\SysWOW64\\reg"; 
```

# lambda - Lambda 表达式 Contain() 方法在 Advantage Database 9 中不起作用？

> ID：12289454
> 
> 赞同：1
> 
> 时间：2012-09-05T20:43:58.497
> 
> 标签：lambda, advantage-database-server

我正在使用 Sybase Advantage 数据库 9.1

我尝试使用 Lambda 表达式包含方法来检索数据，但它不起作用。

```
var order = order.Where(x => x.name == "James"); 
```

它返回 10 行数据。

但如果我改为

```
var order = order.Where(x => x.name.Contains("James")); 
```

它返回 0。

x.name 是字符串字段。

有人知道为什么会这样吗？

我应该如何使用包含方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:47:58.647

我相信`Contains`随着实体框架 v4 的更改添加了对规范函数的支持。那是在 Advantage v10.x 中。这些更改没有合并回 v9.x 分支。

# shopify - shopify_api gem 展示了一些新消息

> ID：12289455
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:44:02.257
> 
> 标签：shopify

运行一些代码 CLI 风格，我注意到..

```
/Users/fizzy/.rvm/gems/ruby-1.9.3-p194/gems/shopify_api-3.0.1/lib/shopify_api/json_format.rb:3: warning: method redefined; discarding old encode
/Users/fizzy/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:1214: warning: previous definition of encode was here
/Users/fizzy/.rvm/gems/ruby-1.9.3-p194/gems/shopify_api-3.0.1/lib/shopify_api/json_format.rb:13: warning: method redefined; discarding old decode
/Users/fizzy/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/formats/json_format.rb:20: warning: previous definition of decode was here 
```

还有更多......是否有补丁来解决警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:56:13.727

我敢说我们会解决它，但如果它真的让你烦恼，我们会接受`shopify_api`repo 上的拉取请求。

# git - 挑选正确的方式来反向移植和整合主题分支修复吗？

> ID：12289458
> 
> 赞同：3
> 
> 时间：2012-09-05T20:44:13.677
> 
> 标签：git, cherry-pick

这是我的场景：

假设我想修复 github 上的一个开源项目。在高层次上，我遵循以下工作流程：

*   在 github 上 fork 源项目
*   在本地克隆叉子
*   从 master 创建一个主题分支
*   进行修复（在这里挥手无关的细节......）
*   将主题分支推送到 github
*   向原始源项目提交拉取请求

好的，现在假设我已经这样做了几次，所以我有名为 issue#123 和 issue#456 的主题分支。原源项目，除了master分支，还有release分支，比如1.0、1.1等。

我有自己的独立项目，使用这个开源项目的 1.1 版。我不想针对开源项目的“大师”进行构建，因为它还不稳定。我需要的是开源项目 1.1 分支的本地构建，其中还包括我对问题#123 和问题#456 的修复。

很抱歉设置冗长......无论如何，我目前正在做的是创建一个名为 my-1.1 的本地分支（从 1.1 分支），从我的主题分支中挑选修复程序，然后构建它并使用结果我独立的、依赖的项目。

我不是 100% 肯定樱桃采摘是正确的方式，但合并似乎不正确，因为我不希望 master 的所有 1.1 后更改（它们存在于我的主题分支中）流入“my-1.1”分支。这是最好的方法吗？有什么需要注意的问题吗？

我能想到的唯一另一种方法是为每个修复创建重复的主题分支，一个在 master 的分支中，一个在 1.1 的分支中。然后我可以将基于 1.1 的主题分支合并到 my-1.1 中，而不是从基于主的主题分支中挑选提交。但这似乎是个大麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:04:24.830

您要做的是使您的主题分支脱离最旧的分支，然后您可以将其合并到两者中，而不会意外包含较新的内容。换句话说，首先在 1.1 中进行修复，然后将其合并到 master 中，而不是相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:19:30.757

不，这是`git rebase`. 假设您的主题分支`topic123`从`master`. 相反，您希望它分支`1.1`。只需发出以下命令：

```
git rebase --onto 1.1 master topic123 
```

假设`topic123`不依赖于`1.1`and之间引入的代码`master`，那会很好。如果它确实依赖于该代码，那么整个练习无论如何都会失败，因为您在 1.1 版本之后依赖于代码。

```
git checkout 1.1 && git merge topic123 
```

对所有主题分支重复此操作。您已经在远程分支上发出了拉取请求，因此假设您已完成对它们的编码，您的主题分支的本地副本具有较旧的合并基础这一事实并不是什么大不了的事。那写的，如果你想把它们放回顶部`master`，只需颠倒参数：

```
git rebase --onto master 1.1 topic123 
```

或者，如果您不想处理强制推送，请重置为遥控器的副本：

```
git reset --hard <repo>/topic123 
```

# javascript - jquery中的嵌套选择器

> ID：12289465
> 
> 赞同：0
> 
> 时间：2012-09-05T20:45:04.840
> 
> 标签：javascript, jquery

我需要在嵌套的 div 上调用 jquery.animate。div结构是这样的

```
<div id="jsPlumb_1_4" class="container">
       <div id="PlanItemPL1" class="PlanItem">
            <div id="window1" class="window">
            </div>
        </div>
</div> 
```

我对在div类窗口上做mousedown事件、动画事件等操作很感兴趣。有人可以让我知道我应该写什么选择器。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:47:20.890

我建议，在问题中没有进一步的细节，一个通用的方法：

```
$('#jsPlumb_1_4').on('mousedown', function(e){
    $(this).find('div.window').animate({'width' : '100px'}, 1000);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7RYeg/)。

在此演示中，我将`mousedown`事件绑定到`#jsPlumb_1_4`元素（事件将从其任何子元素传播），并`animate()`在包含的`div.window`元素上触发。

为了让它更有趣一点，我`mouseup`也添加了一个事件，以便在`mousedown`缩小`div.window`时，在`mouseup`它上面增长：

```
$('#jsPlumb_1_4').on('mousedown mouseup', function(e){
    var newWidth = e.type == 'mousedown' ? '50%' : '80%';
    $(this).find('div.window').animate({'width' : newWidth}, 1000);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7RYeg/1/)。

`e.type`检索事件（`mouseup`或`mousedown`），`newWidth`变量是`50%`或`80%`取决于事件是否等于`mousedown`。

# python - 获取 Python JSON 序列化日期时间

> ID：12289466
> 
> 赞同：1
> 
> 时间：2012-09-05T20:45:08.317
> 
> 标签：python, datetime, python-2.7, json

有一些我想使用 JSON 序列化的嵌套对象。问题是某些属性包含`datetime`s。当我尝试序列化这些 pbjects 时，Python 抛出异常：

```
TypeError: datetime.datetime(2012, 6, 5, 17, 49, 35, 672115) 不是 JSON 可序列化的

```

使用 Python 2.7，有没有办法告诉 json 序列化程序：“当你看到日期时间时，不要烦人并抛出异常，只需使用以下方法进行序列化：`property.strftime('%Y-%m-%d %I:%M%p')`”

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T21:07:38.983

您需要定义一个将序列化`datetime`对象的辅助函数，并使用`default`json.dump 或 json.dumps 的[kwarg](http://docs.python.org/library/json.html#json.dump)。请参阅带有重复答案链接的评论。

此外，您还需要考虑是否支持时区感知`datetime`对象。以及您是想在序列化期间保留时区还是在序列化之前转换为 UTC。

这是一个假设您要在序列化之前转换为 UTC 的示例。它依赖于[python-dateutil](http://labix.org/python-dateutil)库：

```
from dateutil.tz import tzutc

UTC = tzutc()

def serialize_date(dt):
    """
    Serialize a date/time value into an ISO8601 text representation
    adjusted (if needed) to UTC timezone.

    For instance:
    >>> serialize_date(datetime(2012, 4, 10, 22, 38, 20, 604391))
    '2012-04-10T22:38:20.604391Z'
    """
    if dt.tzinfo:
        dt = dt.astimezone(UTC).replace(tzinfo=None)
    return dt.isoformat() + 'Z' 
```

# android - 使用 AsyncTask 从远程 mySQL 数据库中提取数据；只显示最后一个表格行

> ID：12289468
> 
> 赞同：0
> 
> 时间：2012-09-05T20:45:09.557
> 
> 标签：android, database, parsing, android-asynctask

正如标题所说的那样。我有两列。我想把它们放到文本视图中，所以我做到了。但是，仅显示底部的两个结果，即每列中的一个。很奇怪。这是我的代码： http: [//pastebin.com/qNgfHfT3](http://pastebin.com/qNgfHfT3)

解析/onPostExecute 位于问题所在的底部。

需要注意的一点：标记为“work”和“dontwork”的日志显示了我的所有结果，但是 onPostExecute（Google 和 Google1）中的日志只显示了最后一个结果，所以我认为错误是在从解析到显示的传输中。

非常感谢这里的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:01:25.290

如果您收到 JSON 响应，我建议您使用 Gson 解析它。只要您可以用一对行解析整个内容，就强烈建议您这样做。请注意，创建一个适当的对象就像执行以下操作一样简单：

```
YourObject object = gson.fromJson(responseReader, YourObject.class); 
```

或者即使您正在检索项目列表：

```
Type listType = new TypeToken<List<YourObject>>() {}.getType();
List<YourObject> objects = gson.fromJson(responseReader, listType); 
```

[这是](http://www.softwarepassion.com/android-series-parsing-json-data-with-gson/)一个完全符合您需求的示例

该过程完成后，您将在可访问变量中提供您的对象（或对象列表）。

**编辑：** 首先你的 Asynctask 应该有以下参数：

```
public class HttpTask extends AsyncTask<Void, Void, ArrayList<Driver>> { 
```

并且您的 doInBackground 方法需要将该数组传递给您的 onPostExecute：

```
@Override
protected ArrayList<Driver> doInBackground(Void... params) { 
```

其余的，我在 JSon 解析开始时接受它。

```
//PARSING JSON DATA
try {
    JSONObject json_data;
    Driver d;

    jArray = new JSONArray(result);
    int l = jArray.length();

    if(l>0){
        ArrayList<Driver> drivers = newArrayListList<Driver>();

        for (int i = 0; i < l; i++) {

            json_data = jArray.getJSONObject(i);

            d = new Driver(json_data.optString("Driver_full_name"), json_data.optString("Drives_for"));
            drivers.add(d);

            Log.i("work", returnString);
            Log.i("dontwork", somethingelse);

        }

   } catch (JSONException e1) {
       Log.d("DB", "Error somewhere");
       CurrentSeasonDrivers_DriverName.this.runOnUiThread(new Runnable() {
           public void run() {
               Toast.makeText(CurrentSeasonDrivers_DriversName, "Could not parse data so shut up", Toast.LENGTH_LONG).show();
           }
       });
   }
   return drivers;
}

protected void onPostExecute(ArrayList<Drivers>... drivers) {

   Log.i("Google", returnString);
   Log.i("Google1", somethingelse);

   String firstDriverName = drivers.get(0).name;
   String firstDriverDrivesFor = drivers.get(0).drivesfor;

   String secondDriverName = drivers.get(1).name;

   TextView drivername = (TextView) findViewById(R.id.DriverName);
   drivername.setText(firstDriverName);

   TextView drivesfor = (TextView) findViewById(R.id.DrivesFor);
   drivesfor.setText(firstDriverDrivesFor);

} 
```

有了这个，你的司机的一个对象将完成这个圆圈。

```
public class Driver{

    public String name;
    public String drivesfor;

    public Driver(String _name, String _drivesfor){
        name = _name;
        drivesfor = _drivesfor;
    }

} 
```

我想你可以从这里接管。让我知道你的进展。

# bash - Bash：获取命令行程序执行的输出并设置为变量

> ID：12289472
> 
> 赞同：0
> 
> 时间：2012-09-05T20:45:31.617
> 
> 标签：bash, amazon-web-services, awk, centos, amazon-elastic-beanstalk

我在 CentOS 中运行一个命令，它给我一个多行字符串的输出，我想获取该输出的某个部分并将其设置为一个变量。

例如我运行命令行

```
ebi-describe-env 
```

我的输出如下：

```
ApplicationName | CNAME | DATECreated | DateUpdated | Description | EndpointURL |   
EnvironmentID | EnvironmentName | Health | Stack | Status | TemplateName | 
Version Label -------------------------------------
Web App | domain.com | 2012-02-23 | 2012-08-31 | |
anotherdomain.com | e-8sgkf3eqbj | Web-App-Name | Status | 
Linux | Ready | N/A | 20120831 - daily 
```

我想抓住每次调用都在同一个位置的多字符串的“20120831-daily”部分，并将其设置为一个变量。我相信“------”表示新行或输出。

我对 bash 脚本非常陌生，所以任何帮助都会很棒。谢谢你。

注意：我之前问过这个问题，它是用 awk 解决的，但事实证明它只是用于单行输出。 [上一个问题](https://stackoverflow.com/questions/12223615/bash-grab-part-of-string-from-a-command-line-output)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:52:14.983

您可以轻松添加模式以将特定行与上一个答案匹配：

```
awk -F"|" 'NR == 6 {print $NF}' 
```

块的“模式”`awk`可以是任何条件的。在我的示例`NR`中是行号，以便在第 6 行打印最后一个（管道分隔的）单词。`/Linux/`如果您想要其中包含“Linux”的行，您也可以使用模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:53:31.193

这应该可以解决问题：

```
dateStr=$( ebi-describe-env | grep "Linux | Ready" | cut -t"|" -f4 ) 
```

运行命令并将其输出通过管道`grep`传输，这将只传递包含字符串“Linux | Ready”的行（嗯，行）。然后将其传递给处理“|”的cut 作为分隔符，仅打印第 4 个字段。然后输出被`$(...)`构造捕获并分配给变量`dateStr`。

稍微好一点的是 Ben Jackson 的`awk`解决方案，它可以代替我的`grep/cut`组合：

```
dateStr=$( ebi-describe-env | awk -F"|" 'NR==6 {print $NF}' ) 
```

# linux - 实施提供比线程更好的隔离但性能相当的 Linux 并发原语是否可行？

> ID：12289473
> 
> 赞同：6
> 
> 时间：2012-09-05T20:45:33.850
> 
> 标签：linux, multithreading, concurrency, ipc

考虑以下应用程序：一个 Web 搜索服务器，它在启动时基于从磁盘读取的数据创建一个大型的网页内存索引。一旦初始化，内存中的索引就不能被修改，并且会启动多个线程来服务用户查询。假设服务器被编译为本机代码并使用操作系统线程。

现在，线程模型没有提供线程之间的隔离。有缺陷的线程或任何非线程安全代码可能会损坏索引或损坏由其他线程分配并在逻辑上属于其他线程的内存。此类问题难以检测和调试。

从理论上讲，Linux 允许实施更好的隔离。一旦索引被初始化，它所占用的内存可以被标记为只读。线程可以替换为共享索引（共享内存）的进程，但除此之外具有单独的堆并且不能相互破坏。硬件和操作系统会自动检测非法操作。不需要互斥锁或其他同步原语。完全消除了与内存相关的数据竞争。

这种模式在实践中可行吗？您是否知道任何现实生活中的应用程序可以执行此类操作？或者也许有一些基本的困难使这种模型不切实际？与传统线程相比，您认为这种方法会带来性能开销吗？从理论上讲，使用的内存是相同的，但是是否存在一些与实现相关的问题会使事情变慢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T06:42:52.337

显而易见的解决方案是根本不使用线程。使用单独的进程。由于每个进程都与代码和只读结构有很多共同之处，因此共享只读数据是微不足道的：根据需要对其进行格式化以在文件中使用内存并将文件映射到内存。

使用这种方案，只有变量每个进程的数据是独立的。代码将被共享，静态初始化的数据将被共享，直到被写入。如果一个进程发声，对其他进程的影响为零。完全没有并发问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:56:29.490

您可以使用`mprotect()`使您的索引只读。在 64 位系统上，您可以将每个线程的本地内存映射到一个随机地址（参见[这篇关于地址空间随机化的 Wikipedia 文章](http://en.wikipedia.org/wiki/Address_space_layout_randomization)），这使得一个线程接触另一个线程的内存损坏几率非常小（当然，任何损坏完全错过映射内存将导致段错误）。显然，您需要为每个线程设置不同的堆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:54:20.397

我想你可能会觉得[memcached](http://memcached.org/)很有趣。此外，您可以创建共享内存并将其以只读方式打开，然后创建线程。这不应该导致太多的性能下降。

# javascript - jQuery表单提交脚本不起作用

> ID：12289475
> 
> 赞同：0
> 
> 时间：2012-09-05T20:45:33.383
> 
> 标签：javascript, jquery, forms

我尝试使用以下脚本阻止表单提交，但它总是这样做。我什至尝试过`preventDefault()`文件加载，但它不起作用。

```
$("form").submit(function() {
      if ($("input").eq(3).val() == $("input").eq(4).val()) {
            $("span").text("Validated...").show();
        return true;
      }

      $("span").text("Passwords do not match!").show().fadeOut(1000);
      return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:47:49.937

```
$("form").submit(function(e) {
      if ($("input").eq(3).val() == $("input").eq(4).val()) {
            $("span").text("Validated...").show();
      }
      else{
        $("span").text("Passwords do not match!").show().fadeOut(1000);
        e.preventDefault();
      }
}); 
```

您需要使用`preventDefault()`取消操作。请注意`e`我添加到匿名函数调用的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:52:16.687

我的建议，或者我通常这样做的方式是这样的：

```
$("form").submit(function(e) {
    e.preventDefault(); // form never fires unless I want it to

    if( condition == true ) {
        $(this).submit();
    } else {
        //Don't submit
    }
} 
```

[这](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)是一个很好的解释为什么 preventDefault() > return false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:06:35.253

为了结束这个，我想我找到了一些东西，但这充其量是荒谬的。我的函数在 $(document).ready 中时起作用。为什么？我很乐意听取您的建议。

```
$(document).ready(function(){

$("form").submit(function() {
      if ($("input").eq(3).val() == $("input").eq(4).val()) {
            $("span").text("Validated...").show();
        return true;
      }

      $("span").text("Passwords do not match!").show().fadeOut(1000);
      return false;
});

 }); 
```

# windows - md5sum 在 linux 和 windows 上不同

> ID：12289480
> 
> 赞同：0
> 
> 时间：2012-09-05T20:45:48.293
> 
> 标签：windows, linux, linux-kernel, debian

我面临一个奇怪的问题。相同文本文件的 md5sum 在 windows 和 linux 上是不同的。我希望它是相同的，因为哈希是使用文件中存在的内容生成的，并且不依赖于操作系统。发生这种情况有什么具体原因吗？sha1sum 也一样吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T20:48:03.680

检查文本文件中的行尾。Windows 使用 CR-LF，Linux 使用 NL。“相同的文本文件”在两个系统上有不同的表示，应该有不同的 md5sum。您应该能够通过在 Windows 中将文件作为二进制文件打开来避免这种差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:53:00.840

这并不奇怪，因为存在的内容*取决于*操作系统。
Windows 和 Linux 使用不同的换行符 看这个 [线程](http://ubuntuforums.org/showthread.php?t=1941596)

# c# - 将匿名类型作为 T 传递

> ID：12289487
> 
> 赞同：5
> 
> 时间：2012-09-05T20:46:19.103
> 
> 标签：c#, entity-framework, anonymous-types

在实体框架中，您可以像这样即时运行和绑定自定义查询......

```
protected class NitrogenMoisutreContainer
{
    public double MinN { get; set; }
    public double MaxN { get; set; }
    public double MinM { get; set; }
    public double MaxM { get; set; }
}

// ...

var q = dbcontext.Database.SqlQuery<NitrogenMoisutreContainer>(@"SELECT MAX(NitrogenBalance) as MaxN, MIN(NitrogenBalance) as MinN, MAX(FCWaterPercent) as MaxM, MIN(FCWaterPercent) as MinM
                                                                    FROM agZoneProjectionGrowthStages
                                                                    WHERE NitrogenBalance > 0 AND FCWaterPercent > 0").First(); 
```

问题是，对我来说，这感觉很混乱。我必须为一个查询创建这个类，**我永远不会再将它用于其他任何事情**。结果在执行位置的下一行使用。

有没有办法可以返回匿名类型？即使我必须先声明它，像这样......

```
var anonItem = new {
    MinN = 0d,
    MaxN = 0d,
    MinM = 0d,
    MaxM = 0d
};

var q = dbcontext.Database.SqlQuery<anonItem.GetType()>("..."); 
```

我只是不知道如何将我的匿名类型`Type`作为`T`. 可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T20:50:34.763

如果您设置它以便可以推断类型，则可以做到这一点。例如

```
public static IEnumerable<T> GetObjects<T>(T exampleItem, string sqlQuery) { ... }
var q = GetObjects(anonItem, @""); 
```

我认为这有点骇人听闻，我建议尝试另一种方法，例如实际创建命名类或使用元组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:51:01.300

> 问题是，对我来说，这感觉很混乱。我必须为一个查询创建这个类，**我永远不会再将它用于其他任何事情**。结果在执行位置的下一行使用。

我不认为这是一个问题。

> 有没有办法可以返回匿名类型？

您可以改为创建一个[元组。](http://www.dotnetperls.com/tuple)

# java - 方法监听

> ID：12289489
> 
> 赞同：2
> 
> 时间：2012-09-05T20:46:29.237
> 
> 标签：java, swing, methods, actionlistener

我是 Swing 的新手，所以这可能很愚蠢。

无论如何，我创建了一个扩展 JFrame 的类，并且在面板内包含一个 JTextField、一个 JTextArea 和一个 JButton。

这应该是一个控制台实现，因此当我按下 Enter 或旁边的按钮时，TextField 会将输入打印到 TextArea。

我已经为此制作了听众，一切正常。我现在的问题是如何制作一个希望我在字段上按 Enter 的方法？例如，我有一个需要 3 行输入的方法。第一行调用方法，第二行期望我输入一些东西，第三行期望更多输入。完成所有输入后，我将一些内容打印到 TextArea。

那么实际上该方法必须等待侦听器触发还是什么？有人可以解释一下这个东西是如何工作的，或者给我一个解决方法吗？

请记住，我想要一些可重用的方式，因为我可能会使用多行输入实现很多方法。提前致谢！

更新：这是我扩展 JFrame 的类 - 代码主要是 netbean 生成的，我将确保迟早处理导入语句。我还没有实现一个方法，因为我不知道怎么做，但是希望我添加一小段代码检查输入是否正确（在 ConsoleInputAcionPerformed 内部）并调用该方法（我们称之为 methodX ) 这将需要两条输入线的其余部分。这个类是从我的 main() 中的另一个类调用的。

```
public class MainWindow extends javax.swing.JFrame {
private javax.swing.JButton EnterButton;
private javax.swing.JPanel ConsolePanel;
private javax.swing.JScrollPane ConsoleScroll;
private javax.swing.JTextArea ConsoleOutput;
private javax.swing.JTextField ConsoleInput;

public MainWindow() {
    initComponents();
}

private void initComponents() {

    ConsolePanel = new javax.swing.JPanel();
    ConsoleScroll = new javax.swing.JScrollPane();
    ConsoleOutput = new javax.swing.JTextArea();
    ConsoleInput = new javax.swing.JTextField();
    EnterButton = new javax.swing.JButton();

    setTitle("Graphical Super Console v.1.0");
    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
    setPreferredSize(new java.awt.Dimension(800, 600));

    ConsoleOutput.setColumns(20);
    ConsoleOutput.setRows(5);
    ConsoleOutput.setLineWrap(true);
    ConsoleOutput.setEditable(false);
    ConsoleOutput.setFont(new java.awt.Font("Consolas", 1, 14));

    ConsoleScroll.setViewportView(ConsoleOutput);
    ConsoleScroll.setVerticalScrollBarPolicy(javax.swing.JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    ConsoleInput.setText("");
    ConsoleInput.requestFocusInWindow();
    ConsoleInput.setFont(new java.awt.Font("Consolas", 1, 14));
    ConsoleInput.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            ConsoleInputActionPerformed(evt);
        }
    }); 

    EnterButton.setText(">>");
    EnterButton.setFont(new java.awt.Font("Consolas", 1, 14));
    EnterButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            ConsoleInputActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout ConsolePanelLayout = new javax.swing.GroupLayout(ConsolePanel);
    ConsolePanel.setLayout(ConsolePanelLayout);
    ConsolePanelLayout.setHorizontalGroup(
        ConsolePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(ConsolePanelLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(ConsolePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(ConsoleScroll)
                .addGroup(ConsolePanelLayout.createSequentialGroup()
                    .addComponent(ConsoleInput, javax.swing.GroupLayout.DEFAULT_SIZE, 679, Short.MAX_VALUE)
                    .addGap(18, 18, 18)
                    .addComponent(EnterButton)))
            .addContainerGap())
    );
    ConsolePanelLayout.setVerticalGroup(
        ConsolePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(ConsolePanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(ConsoleScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 536, Short.MAX_VALUE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(ConsolePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(EnterButton)
                .addComponent(ConsoleInput, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addContainerGap())
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(ConsolePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(ConsolePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );

    pack();
    setVisible(true);
    ConsoleInput.requestFocus();
}
private void ConsoleInputActionPerformed(java.awt.event.ActionEvent evt) {
    printf(">"+ConsoleInput.getText()+"\n");
    ConsoleInput.setText("");
}

public javax.swing.JTextArea getConsoleOutput(){
    return ConsoleOutput;
}

public javax.swing.JTextField getConsoleInput(){
    return ConsoleInput;
}

public void printf(Object... obj){
    for(int i=0; i<obj.length; i++){
        ConsoleOutput.append(String.valueOf(obj[i]));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:06:58.417

观察者和可观察者：

这个想法基本上是你让某个类观察另一个类，当发生某些事情时，被观察的类 Observable 将通知该类 Observes，即观察者，并告诉它发生了一些变化。Observable 有方法 setChanged() 和 notifyObservers() 来完成。观察者使用实现的 update() 方法监听该调用。

我将所有内容都放在一个类中，以便您可以复制/粘贴并运行它。当你敲击一个键时，你会看到它是如何工作的。

```
//the textfield is wrapped in a class so that it can extends Observable
public class MyTextField extends Observable {

    private JTextField jTextField = new JTextField();

    //this method notifies the observers you will add   
    public void notify(Object o) {
        this.setChanged();
        this.notifyObservers(o);
    }

    public JTextField getJTextField() {
        return jTextField;
    }

}

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.Observable;
import java.util.Observer;

import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

// The main class that observes the swing component you tell it to
public class Controller implements Observer {

    private final JFrame jFrame = new JFrame();

    private final MyTextField myTextField = new MyTextField();

    public Controller() {

        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.pack();
        jFrame.setVisible(true);
        jFrame.add(myTextField.getJTextField());

        //here we add the Observer (Controller) to myTextField (Observable)
        myTextField.addObserver(this);

        //and the keylistener
        myTextField.getJTextField().addKeyListener(new KeyListener() {

            @Override
            public void keyTyped(KeyEvent e) {
                System.out.println("keyTyped " + e.getKeyCode());
                //now we notify our observers for real
                myTextField.notify(e.getKeyCode());
            }

            @Override
            public void keyReleased(KeyEvent e) {
                System.out.println("keyReleased " + e.getKeyCode());
                myTextField.notify(e.getKeyCode());
            }

            @Override
            public void keyPressed(KeyEvent e) {
                System.out.println("keyPressed " + e.getKeyCode());
                myTextField.notify(e.getKeyCode());
            }
        });
    }

    // this is where the event is received by the Observer 
    // from the observable.
    @Override
    public void update(Observable observable, Object object) {
        System.out.println("Notified by " + observable
                + " with object " + object);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Controller();
            }
        });
    }
} 
```

我希望这是可以理解的，并且可以解决您的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:04:45.117

您可能不得不以与您希望的有所不同的方式执行此操作。基本上你保持你已经收到的所有行的状态，只有当你已经有三行时，然后调用需要三行的方法。一般的想法是这样的：

```
List<String> buffer = new ArrayList<String>();

public void actionPerformed(ActionEvent e) {
    buffer.add(getText())
    if (!expectingMoreInput()) {
        processInput(buffer);
        buffer.clear();
    }
} 
```

因此，对于您的特定情况，`expectingMoreInput()`只需 return `buffer.size() < 3`，并且`processInput`实际上会调用需要三行的方法。

另一种方法是使用多个线程和一个在它们之间传递线路的对象。请注意这一点 - 线程交互可能会变得复杂。就像是：

```
SynchronousQueue<String> queue = new SynchronousQueue<String>();

public void actionPerfomred(ActionEvent e) {
    queue.add(getLine());
}

public void threeLineMethod() {
    String s1, s2, s3;
    try {
        s1 = queue.take();
        s2 = queue.take();
        s3 = queue.take();
    } catch (InterruptedException ex) {

    }
    // process the three lines
} 
```

请注意，在这里，`take`将阻止`put`，这正是您想要的。另一方面是`put`阻塞`take`，所以如果你没有一个线程不断调用`take`，事件线程将阻塞并锁定接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:01:40.530

在等待用户输入时使方法挂起的最简单方法可能是创建一个带有文本框的 JDialog。在用户关闭 JDialog 之前，您的代码不会运行超过显示该对话框的点。然而，这似乎不是您正在寻找的解决方案。

你可能想要在这里让你的代码挂起是使用等待和通知。有关更多信息，请参阅[如何在 Java 中使用等待和通知？](https://stackoverflow.com/questions/886722/how-to-use-wait-and-notify-in-java).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T20:54:40.523

我唯一能想到的是你需要通过一种可以确定当前状态的方法来运行来自字段的输​​入......即

```
public void handleFieldInput(JTextField field) {
    String text = field;
    switch (state) {
        case 0:
            // First line...maybe store the result in a List or array
            state++;
            break;
        case 1:
            // Second line...
            state++;
            break;
        case 2:
            // Third line...
            // Add contents to the text area
            state = 0;
            break;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T20:55:54.007

这是您的解决方案：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class Frame extends JFrame{
    JTextField t = new JTextField(20);
    JPanel p = new JPanel();

    public Frame(){
        p.add(t);
        t.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                t.setText("Hello world");
            }
        });
        add(p);
    }

    public static void main(String[] args){
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                Frame f = new Frame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.pack();
                f.setVisible(true);
            }   
        });
    }
} 
```

# asp.net - 本地托管的父子网站 - MVC

> ID：12289491
> 
> 赞同：2
> 
> 时间：2012-09-05T20:46:36.680
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iis, asp.net-mvc-areas

我有一个 MVC Web 应用程序。让我们称之为“父”网站。为了在我的本地机器上设置网站，我去 IIS，创建一个新网站，在“编辑网站”屏幕中，在“物理路径”中，我给出了我硬盘上文件夹的位置。该网站运行良好，只需对应用程序池、端口号等进行少量修改。

之后我想做的是 - 使用相同的代码库建立另一个“儿童”网站。这个子网站运行单个控制器，很少有特定的模型，很少有特定的视图，但是上面的父网站是公共的服务层。当我在我的本地机器上设置这个新的子网站时，我希望它作为一个独立的网站，只选择与其功能相关的部分主要代码库。如何以有效的方式执行此操作，以便在本地计算机上的 IIS 上分别运行父网站和子网站，并使用一个通用代码库。

这是我尝试过的，但只到此为止.. 不确定这是否是正确的方向。

我尝试为这个子站点创建一个新的 MVC“区域”，例如，我将 ChildController、ChildModels 和 ChildViews 移动到这个新的 ChildArea 中。我希望这会以某种方式使分离父网站和子网站并在本地托管它们变得容易。在主文件夹结构（父）中，我有 site.master 页面，该页面适用于已经托管且运行良好的父网站。我在新的 MVC 区域内还有一个新的 site.master，我需要子网站进行显示。

我需要一些关于如何实现这一目标的帮助和指导。提前感谢您的评论、解决方案和反馈。

![在此处输入图像描述](../Images/3e5af501253013da9c63bf75fbcab01c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:24:16.943

创建一个包含 3 个项目的解决方案。

1.  家长网站
2.  儿童网站
3.  包含共享代码的 DLL 项目。

将公共组件从您的父站点移动到共享项目中。

父站点和子站点都将引用第三个公共代码库。

# java - 是否有必要在关闭之前读取/跳过 InputStream 完成？

> ID：12289494
> 
> 赞同：2
> 
> 时间：2012-09-05T20:46:57.310
> 
> 标签：java, url, inputstream

是否有必要在关闭流之前读取/跳过 InputStream？如果未读取流，这是否会导致未来连接出现任何问题（使用保持活动状态）？使用 Oracle JVM。

```
InputStream is = null;
try {
    URL url = new URL("http://example.com/executeTrigger?id=523");
    is = url.openStream();

} catch (Exception ex) {
} finally {
    if (is != null) {
        try {
            is.close();
        } catch (IOException e) {
        }
    }
} 
```

以上是否有效，或者我应该`is.skip(Long.MAX_VALUE)`在执行后立即调用`url.openStream()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:00:27.087

在 TCP 中，它将导致发送方获得“对等方重置连接”。Web 服务器用于浏览器消失、分页等，因此在这种情况下不会造成任何伤害，但如果您正在实施应用程序协议，情况会有所不同。

# css - 视网膜设备不会读取视网膜 css

> ID：12289508
> 
> 赞同：0
> 
> 时间：2012-09-05T20:48:05.863
> 
> 标签：css, stylesheet, retina-display

我正在开发一个必须支持的新网站`Retina displays`。经过一些 html/css`@media`查询、大量研究和令人难以置信的大量测试后，它仍然无法正常工作。

所以为了解决我的问题，我创建了这个基本的“我有 Retina 显示器吗？”页面。（下面的代码）：

```
<title>Retina Test</title>
<style type="text/css">
    body { background-color: green; }
    @media all and (-webkit-min-device-pixel-ratio : 1.5) {
        background-color:blue;
    }
</style> 
```

我`background-color`只用于基本测试。可能很高兴知道，我有一些视网膜设备要测试：视网膜 macbook pro 和视网膜 iPhone 4。

谢谢转发。鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:13:53.860

改变：

```
background-color:blue; 
```

至：

```
body {background-color:blue} 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:28:11.347

不应该是：

```
body {background-color: green;}
@media all and (-webkit-min-device-pixel-ratio : 1.5) { // targets iphone retina?
    body{background-color:blue;}
}
@media all and (-webkit-min-device-pixel-ratio : 2) {   // targets macbook retina?
    body{background-color:blue;}
} 
```

如果要改变字体颜色，正确的用法是：

```
body {color: green;}
@media all and (-webkit-min-device-pixel-ratio : 1.5) {
    body{color:blue;}
} 
```

请注意，我无法测试是否`@media all and (-webkit-min-device-pixel-ratio : 1.5)`真的针对视网膜显示器。

# c# - 通过 HTTP 或套接字连接与数据库交互？

> ID：12289510
> 
> 赞同：0
> 
> 时间：2012-09-05T20:48:24.663
> 
> 标签：c#, http, sockets, persistent

目前，我每隔几秒钟就有数百个查询从一个 C# 程序（我们称之为 Program1）发送到 HTTP 服务器，然后该服务器使用业务逻辑处理 XML 内容并根据需要更新数据库。

如果不是将我的业务逻辑放在 Web 服务器（PHP 后端）中，而是将业务逻辑放在另一个可以与数据库本身保持持久连接的 C# 应用程序（我们称之为 Program2）中，它会更有效吗以及 Program1 或任何其他可能想要发送 Program2 数据的程序。还是我应该坚持使用现有的 HTTP 路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:03:30.560

我会将 XML 保存在网络服务器硬盘上，然后使用与数据库具有持久连接的 Windows 服务一个接一个地导入这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:04:22.353

我目前为我们的公司业务规则引擎使用类似的设计。（带有多平台客户端的 PHP Web 服务后端）

我们在这个模型上取得了很好的成功。如果您想更改后端业务逻辑代码或平台，使用 HTTP 协议可为您提供良好的灵活性。PHP 作为具有持久数据库连接的 Apache 或 IIS 模块运行可以提高效率。

# django - urls.py 中的 Django 时区逻辑和通用视图引发错误，但它是视图、字段还是我？

> ID：12289515
> 
> 赞同：2
> 
> 时间：2012-09-05T20:48:56.237
> 
> 标签：django, generics, datetime, views

我的博客是用 Django 1.4.1 构建的。该博客没有什么特别之处，主要是 Django 教程和书籍中的示例。数据库是 PostgreSQL。我尝试使用尽可能多的通用东西，包括站点地图框架。不幸的是，生成的站点地图显示时区问题。

博客条目模型中的字段“pub_date”具有 DateTimeField 类型。博客的时区是“欧洲/阿姆斯特丹”。如果我在博客管理界面中输入日期和时间，那么数据库中的列具有正确的值（例如 2012 JUL 10 00:00 管理界面 => 2012 JUL 09 22:00 UTC PostgreSQL）。函数 Blog.get_absolute_url() 确实产生 /2012/07/09/slug。我希望 UTC 日期（这对我来说很好）

我的*urls.py*就像所有的例子一样。

```
info_dict = {
    'queryset': Blog.objects.all(),
    'date_field': 'pub_date',
    }

url(r'^(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$', 'django.views.generic.date_based.object_detail', info_dict), 
```

（注意：我在这里使用基于函数的通用视图，但我也尝试了基于类的视图。两个视图都产生相同的问题）。

问题是：可以使用 get_absolute_url() 中的值找到每个博客条目，但不能找到具有不同本地时区日期和 UTC 的条目（例如 2012 JUL 10 00:00 local => 2012 JUL 09 22:00世界标准时间）。我确实得到了“404”，并且 - 使用 runserver 运行时 - 错误是*RuntimeWarning: DateTimeField received a naive datetime (2012-07-09 23:59:59.999999) while time zone support is active*。

我在网上的搜索确实显示了很多关于 Django 时区问题的帖子。它们中的大多数确实与基于日期的档案的月份格式有关。我正在使用最新的 Django 版本 1.4.1 进行大多数修复。我在 date_based.object_detail 或与时区相关的 DateDetailView 的教程或书籍中没有找到任何示例。目前，我怀疑正确的方法。

可能不是一个好主意

1.  我可以放松“时区”意识（USE_TZ = False），但这忽略了问题
2.  我可以更改 *get_absolute_url()* 以生成本地时区的日期（在此示例中为 2012/07/10/slug），但随后我将数据库格式和用户格式混合在一起

不知道这是否是一个好（或可行）的想法

1.  使用字典 info_dict 执行某些操作以通知通用视图 pub_date 是 UTC 格式。我找不到办法做到这一点
2.  使用字典来更改日期时间格式（例如 pub_date.date），但这会产生语法错误。此外，Django 文档说 DateField 和 DateTimeField 支持通用视图

有什么好方法？关注 pub_date 以转换为 DateField，处理视图以接受 DateTimeField，从通用视图切换到自制视图，还是其他？

Django 解决此问题的最常用方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:23:31.727

几个小时以来，我一直在努力解决这个确切的问题。关键是我的 get_absolute_url 逻辑导致 UTC 响应，但 DateDetailView 期望 URL 与本地时区匹配。

对于 get_absolute_url，我的解决方案如下：

```
from django.utils import timezone

class MyModel(models.Model):
# Other model code here

def _get_absolute_url(self):
    local_pub_date = timezone.localtime(self.entry.pub_date)
    return ('%sblog_detail', (), {
        'year': local_pub_date.year,
        'month': local_pub_date.strftime('%m'),
        'day': local_pub_date.strftime('%d'),=
        'slug': self.slug
    })
get_absolute_url = models.permalink(_get_absolute_url) 
```

这似乎适用于我的目的。不过，我所有的用户都在同一个时区，所以它可能不适合用户群更多样化的网站。

-PT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:55:36.280

我遇到了同样的问题，因为我的 get_absolute_url 显示的是下一个日期。我到处搜索，找不到任何可以帮助最新 Django 版本的东西。我对您的唯一建议是将日期和时间设置为数据库中的单独字段。

# vb.net - 文本框没有被填充 VB.net

> ID：12289516
> 
> 赞同：0
> 
> 时间：2012-09-05T20:49:01.573
> 
> 标签：vb.net

我正在使用 vb.net 开发一个简单的桌面应用程序。fillfeilds 是从另一个类调用的公共函数。该函数正在被调用，但文本框的值没有改变。但是当我调用 Button1_Click 又调用 fillfeilds 时，该例程工作正常。

如果有人能指导我做错了什么，我将不胜感激，因为我不理解这种行为。

谢谢。

> ```
> Public Sub fillFeilds()
> 
>         FirstNamePri.Text = "lll"
>         FirstNamePri.Text = "lll"
>         LastNameAlt.Text = "kkkk"
> 
>     End Sub
> 
>     Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
>         FirstNamePri.Text = "lll"
> 
>         fillFeilds()
>     End Sub 
> ```

'调用fillfeild()函数的类

> 公共类 MainCust
> 
> ```
>  Dim cust As New CustInfo
>     MainWindow.MainPanel.Controls.Add(cust)
> 
>     Dim rec As New Customer
> 
>     Dim dataArr As ArrayList = rec.getFirstCust()
> 
>     Dim customer As New CustInfo
>     customer.fillFeilds(dataArr)
> 
> End Sub
> 
> End Class 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:06:37.000

您正在创建两个单独的`CustInfo`. 您正在显示第一个，但不是第二个。第二个从未显示，是您实际填写字段的那个。试试这个：

```
Dim cust As New CustInfo
MainWindow.MainPanel.Controls.Add(cust)
Dim rec As New Customer
Dim dataArr As ArrayList = rec.getFirstCust()
cust.fillFeilds(dataArr) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:52:46.970

如果您从另一个线程上的另一个类调用，您可能会遇到线程问题？也许？但我会虽然它会抛出异常。它是在另一个线程上调用的吗？

# symfony - 如何在 SonataMediaBundle 中配置默认 值？

> ID：12289519
> 
> 赞同：0
> 
> 时间：2012-09-05T20:49:14.973
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

我用 SonataAdminBundle 安装了 SonataMediaBundle，一切正常。但是表单和过滤器的标签看起来很糟糕。类似于：filter.label_name。

如何将标签设置为“名称”？

我认为这样做是为了轻松集成 SonataPageBundle，但我不使用它。

![在此处输入图像描述](../Images/bc589f2e518a2a54f68db4d9e01b2fef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:32:42.203

标签是使用翻译生成的，因此没有处理它们的事实表明您尚未设置语言环境。

**对于 Symfony 2.0.x**

```
# in app/config.yml

framework:
    session:
        default_locale: %locale% 
```

**对于 Symfony 2.1.x**

```
# in app/config.yml

framework:
    default_locale: %locale% 
```

该`%locale%`参数通常会在您的 parameters.ini 文件中定义，但没有什么可以阻止您直接指定“en”（或我猜的“fr”）。

# c# - 有没有办法在 Windows 8 (WinRT) 中唯一地识别用户？

> ID：12289520
> 
> 赞同：2
> 
> 时间：2012-09-05T20:49:19.637
> 
> 标签：c#, windows-8, windows-runtime

我正在为 Windows 8 (Metro) 开发杂志阅读应用程序。所有杂志问题都应该可以使用应用内购买来购买。我需要唯一标识进行购买的用户。如果我将购买与设备 ID (Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken) 配对，并且用户在多个设备上使用该应用程序，他将不得不再次为每个设备购买内容。我不要那个。有没有办法唯一地识别用户（并将他与发布者系统中购买的内容配对）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:34:48.943

`Windows.System.UserProfile.UserInformation`允许您访问当前用户的信息。`Windows.Security.Authentication.OnlineId`如果您需要对 Live 进行身份验证并在用户同意的情况下获取其他信息，您也可以使用命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:44:58.260

您应该使用应用特定的硬件 ID：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj553431](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431)

# google-apps-script - 超过 3 行电子邮件表单提交响应

> ID：12289521
> 
> 赞同：0
> 
> 时间：2012-09-05T20:49:22.773
> 
> 标签：google-apps-script, google-forms

我见过很多表单电子邮件脚本，但最简单的只有 3 行`Name`,`Email`和`Message`.

有没有办法可以在脚本中添加更多内容以在其中包含更多行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:13:48.550

您应该[在这里](https://developers.google.com/apps-script/class_mailapp)查看您可以做的所有事情的示例，但如果您正在寻找一种方法来布局带有分段符的电子邮件。这是一种显示更复杂的消息正文的方法：

```
 var body = "Dear User,";
  body += "\n\nWe have received your Email.";
  body += "\n\nWe need samples of your work (scripts, portfolio, photos, DVDs) to complete your file.";
  body += "\n\nPlease either mail or email your samples to us.  Our contact information is below.";
  body += "\n\nPlease do not hesitate to contact us if you have any further questions.";
  body += "\n\nThank you,"; 
```

这`\n\n`是返回两次的方式。您也可以使用`\n`简单地返回一次。您可以使用其他高级参数，如下所示：

```
var ccList = "me@me.com";
var mailReplyTo = "me@me.com";
var emailName = "ME!";
var optAdvancedArgs = {replyTo:mailReplyTo, bcc:ccList, name:emailName};

MailApp.sendEmail(userEmail, subject, body, optAdvancedArgs); 
```

# java - Java 项目在 netbeans 中运行，但不是从命令行运行

> ID：12289529
> 
> 赞同：0
> 
> 时间：2012-09-05T20:50:00.793
> 
> 标签：java, netbeans

我是一名 C# 开发人员，最近我在工作中获得了一个 Java 项目。

该项目是修改现有的 Java 应用程序，我已经完成并且很简单。但是，我一辈子都无法让它从命令行运行。

我收到错误

```
Exception in thread "main" java.lang.NullPointerException
         at com.dhl.sop.label.LabelReportHandler.main(LabelReportHandler.java:63) 
```

该文件的第 63 行没有代码。我已经大幅更改了文件，只是为了看到行号发生了变化，但事实并非如此。我真的不知道还能做什么，我用谷歌搜索了一下，我空手而归。非常感谢任何信息和/或建议。

谢谢！- 杰弗里

编辑：这是源代码

```
http://speedy.sh/5wdBq/SOPLabel.zip 
```

编辑：我正在运行的命令

```
generateSOPLabel.cmd 
```

编辑： cmd 脚本正在运行的命令

```
java com.dhl.sop.label.LabelReportHandler 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:06:17.777

好的，在修复 ant 构建脚本以构建文件并将 startscript 指向正确的输出文件之后，它对我来说工作得很好。

您的问题可能是 Netbeans 正在将文件构建到 BUILD 文件夹并且脚本正在查找 CLASSES。

启动脚本的变化：

```
export CLASSFILE_PATH=$SOPLabel/build/
 ..
java  -classpath $CLASSPATH com.dhl.sop.label.LabelReportHandler 
```

添加到 build.xml：

```
 <target name="compile" 
        description="compile the source ">    
    <javac srcdir="src" destdir="build"
             classpathref="classpath"/>   </target> 
```

内置：`ant compile`然后`enter code here`./generateSOPLabel.sh 输出：

> 用法：java LabelReportHandler
> 
> 在哪里
> 
> Request XML MessagePath ：要发送的请求 XML 消息的完整路径。例如 .\RequestXML\shipval.xml
> 
> 响应 PDF 路径：要保存响应 XML 消息的完整目录路径。例如 .\PDFReports\n

# jquery - 使用jquery隐藏失去焦点的无序列表

> ID：12289536
> 
> 赞同：0
> 
> 时间：2012-09-05T20:50:40.073
> 
> 标签：jquery

我的无序列表默认是隐藏的，但是当用户点击按钮时会出现。问题是当我离开无序列表时，我希望整个事物隐藏/消失。有任何想法吗？

```
<script type="text/javascript">

    $(document).ready(function () {
        $('#aboutUsFlyOut').click(function () {
            $('.flyOutMenu').slideToggle('medium');
        });
    });

</script>

<a href="#" style="cursor: pointer;"><img id="aboutUsFlyOut" src="../../button.png" alt="About Us" /></a>        
<ul class="flyOutMenu">
    <li><a href="">menu item 1<a></li>
    <li><a href="">menu item 2</a></li> 
    <li><a href="">menu item 3</a></li> 
    <li><a href="">menu item 4</a></li> 
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:59:12.497

> 问题是当我离开无序列表时，我希望整个事物隐藏/消失。

您可以将`mouseleave`事件附加到`ul`并再次将其切换回来：

```
$(document).ready(function() {
    $('#aboutUsFlyOut').click(function() {
        $('.flyOutMenu').slideToggle('medium');
    });

    $('ul.flyOutMenu').on('mouseleave', function(){
        $(this).slideToggle('medium');
    });
});​ 
```

### [演示](http://jsfiddle.net/ecEmg/)- mouseleave 上的隐藏列表

为了回应`Juan Mendes`的评论，我添加了一个变体，它在再次隐藏之前等待 2 秒，以防用户用鼠标将鼠标悬停在它上面。

```
$(document).ready(function() {
    var mouseHasEntered = false;

    $('#aboutUsFlyOut').click(function() {
        $('.flyOutMenu').slideToggle('medium');
    });

    $('ul.flyOutMenu').on('mouseenter', function() {
        mouseHasEntered = true;
    });

    $('ul.flyOutMenu').on('mouseleave', function() {
        var $list = $(this);

        mouseHasEntered = false;

        setTimeout(function() {
            if (!mouseHasEntered) {
                $list.slideToggle('medium');

                // or use $list.hide() if you don't want it to animate.
            }
        }, 2000);
    });
});​ 
```

### [演示](http://jsfiddle.net/FranWahl/Lvc9G/)- 在鼠标离开时隐藏列表，以防鼠标重新进入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:52:40.697

`mouseout`如果菜单可见，您可以绑定并隐藏菜单：

```
var menu = $('.flyOutMenu');
$('#aboutUsFlyOut').on('click', function () {
    menu.slideToggle('medium');
}).on('mouseout', function(){
    if(menu.is(':visible')
        menu.slideToggle('medium');
}); 
```

您可能需要添加更多检查以确保菜单当前没有动画。

# android - Sql lite vs mysql 数据库

> ID：12289540
> 
> 赞同：4
> 
> 时间：2012-09-05T20:50:53.520
> 
> 标签：android

在android开发中，什么时候使用sql lite vs Web server db好？如果有人删除应用程序或升级我的应用程序，那么如果我使用 sql lite，数据库会被删除吗？

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:53:05.360

使用`SQLite`. Android 对它提供了很好的支持。

通常Android中数据库的位置是：

```
/data/data/[packagename]/databases 
```

sqlite 数据库只是 SDCard 上的一个文件。它与应用程序无关，因此删除和/或更新应用程序不会影响数据库。（除非您编写更新代码来更新您的数据库 :)）

Sqlite 易于使用，结构紧凑，显然可以轻松存储在您的 SDCard 上。连接到它等的能力都是在android中完成的。

如果您打算在设备/人之间共享来自您的应用程序的信息，您只需要一个 Web 服务器数据库。如果数据仅对您的本地设备是必需的，那么一定要使用 sqlite。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:54:51.503

它不会被删除。onUpgrade 方法将被触发，因此您将能够检查数据库版本并对当前数据库执行适当的更改（更新、数据迁移等）。

关于在云中是否有可以同步的服务是您必须自己回答的问题。这些问题可以帮助您了解正确的答案。

*   您的产品/服务是否需要在其他应用程序之间共享数据？
*   您的产品/服务将是跨平台的吗？
*   您的产品/服务与其他服务共享数据是否有优势？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:37:29.020

这取决于您正在构建的应用程序。如果您正在寻找将数据更新或保存到云的应用程序，那么可以在 Web 服务器上使用 mysql。如果您希望构建一个数据只能在手机本地访问的应用程序，那么请使用 SQLite。

# objective-c - 什么是 iOS 中 Android 的 Html.fromHtml() 的等价物？

> ID：12289542
> 
> 赞同：7
> 
> 时间：2012-09-05T20:50:56.767
> 
> 标签：objective-c, ios5

在`Html`课堂上，Android 有：

```
public static Spanned fromHtml (String source) 
```

根据[文档](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)：

> 从提供的 HTML 字符串返回可显示的样式文本。

..并将其与：

```
public void setText (CharSequence text, TextView.BufferType type) 
```

根据[文档](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence,%20android.widget.TextView.BufferType%29)：[_`TextView`](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence,%20android.widget.TextView.BufferType%29)

> 设置此 TextView 要显示的文本（请参阅 setText(CharSequence)），还设置它是否存储在可样式/可跨缓冲区中以及是否可编辑。

.. 可以在 TextView 中显示带有 HTML 标记的字符串（来自[此 StackOverflow 答案](https://stackoverflow.com/a/2938184/700926)的示例）：

```
String styledText = "This is <font color='red'>simple</font>.";
textView.setText(Html.fromHtml(styledText), TextView.BufferType.SPANNABLE); 
```

我的问题是 - 在 iOS 中这相当于什么？

我做了一些研究，似乎[人们建议](https://stackoverflow.com/a/9787109/700926)`UIWebView`为此目的使用- 但这真的是唯一的解决方案吗？这是推荐的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:55:02.457

[苹果自己推荐](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/UIKit/Reference/UITextView_Class/Reference/UITextView.html)，所以它一定是一个相当不错的替代方案……

> 要在您的应用程序中显示更复杂的样式，您需要使用 UIWebView 对象并使用 HTML 呈现您的内容。

如果您真的非常不想使用 UIWebView，您可以使用[NSAttributedString对象并使用](http://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)呈现单行文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T06:53:52.903

```
UITextView *textview= [[UITextView alloc]initWithFrame:CGRectMake(10, 130, 250, 170)];
NSString *str = @"This is <font color='red'>simple</font>";
[textview setValue:str forKey:@"contentToHTMLString"];
textview.textAlignment = NSTextAlignmentLeft;
textview.editable = NO;
textview.font = [UIFont fontWithName:@"vardana" size:20.0];
[UIView addSubview:textview]; 
```

这对我来说很好用

# html - HTML5 支持真正需要什么？

> ID：12289546
> 
> 赞同：0
> 
> 时间：2012-09-05T20:51:06.947
> 
> 标签：html

我正在使用 HTML5 标签，`header`并且正在使用 html5shiv：[http](http://code.google.com/p/html5shiv/) ://code.google.com/p/html5shiv/ 。

浏览文件，似乎一切都被一堆不必要的文件过度了，所以我通过 html5shiv [http://css-tricks.com/snippets/javascript/make-html5-elements-work-in研究了一种更简单的方法-old-ie/](http://css-tricks.com/snippets/javascript/make-html5-elements-work-in-old-ie/)并简单地添加“热链接”：[http](http://html5shiv.googlecode.com/svn/trunk/html5.js) ://html5shiv.googlecode.com/svn/trunk/html5.js并让他们托管其余部分。

然后我在想，即使这段代码似乎也有些过头了。为什么我不能只使用 createelement [http://reference.sitepoint.com/javascript/Document/createElement](http://reference.sitepoint.com/javascript/Document/createElement)，为什么我需要所有的 html5shiv 代码？

下面是一些来自的代码：http: [//html5shiv.googlecode.com/svn/trunk/html5.js](http://html5shiv.googlecode.com/svn/trunk/html5.js)

```
.cloneNode():f=c(a),f.canHaveChildren&&!d.test(a)?
g.appendChild(f):f},a.createDocumentFragment=Function("h,f","return function(){var 
n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join() 
```

我不是 JavaScript 的专业人士，但我不明白为什么这是必要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:59:33.840

HTML5Shiv 修复了在 IE 中使用 HTML5 元素的*几个*问题，而不仅仅是能够首先创建元素的显而易见的问题。第一个版本就是这样，但后来的版本为其他问题添加了进一步的修复。

我知道的另外两个问题是：

*   包含 HTML5 元素的打印页面的错误。
*   `.innerHTML`与 HTML5 元素一起使用时出现的错误。

允许将这些元素添加到页面的基本问题是一段非常简短的代码，但其他两个问题是大部分 HTML5Shiv 代码的来源。

可以在这里找到 HTML5Shiv 历史的完整记录以及添加这些内容的时间：http: [//paulirish.com/2011/the-history-of-the-html5-shiv/](http://paulirish.com/2011/the-history-of-the-html5-shiv/)

# java - 在java中使用正则表达式在空格/标点符号周围拆分字符串时遇到问题

> ID：12289548
> 
> 赞同：2
> 
> 时间：2012-09-05T20:51:25.160
> 
> 标签：java, regex

基本上我有一堆大字符串，我想从中删除空格/标点符号/数字，我只想要单词。

这是我的代码：

```
String str = "hughes/conserdyne corp, unit &lt;hughes capital corp> made bear stearns &lt;bsc> exclusive investment banker develop market 2,188,933 financing design installation micro-utility systems municipalities. company systems self-contained electrical generating facilities alternate power sources, photovoltaic cells, replace public utility power sources.";
        String[] arr = str.split("[\\p{P}\\s\\t\\n\\r<>\\d]");
        for (int i = 0; i < arr.length; i++) {
                    if(arr[i] != null)
                 System.out.println(arr[i]);
        } 
```

这是我得到的输出：

```
hughes
conserdyne
corp

unit

lt
hughes
capital
corp

made
bear
stearns

lt
bsc

exclusive
investment
banker
develop
market

financing
design
installation
micro
utility
systems
municipalities

company
systems
self
contained
electrical
generating
facilities
alternate
power
sources

photovoltaic
cells

replace
public
utility
power
sources 
```

正如你所看到的，有很多空格，并且出现在逗号和数字曾经的位置。如果打印条件，我会得到这个有或没有那个。

然而，如果我将 arr 的所有内容连接成一个新字符串，然后用正则表达式 "\s+" 将其拆分，它就可以工作并产生正确的输出。

那么我当前的正则表达式有什么问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:52:51.897

你应该能够`+`在你的正则表达式的末尾抛出一个：

```
 String[] arr = str.split("[\\p{P}\\s\\t\\n\\r<>\\d]"); 
```

到：

```
 String[] arr = str.split("[\\p{P}\\s\\t\\n\\r<>\\d]+");
                                                 // ^-- This guy 
```

添加`+`匹配 1 个或多个前一个元素的方法，因此如果您连续有多个“中断字符”，它们将被视为单个分隔符，您的结果中不会出现空字符串。

# javascript - jQuery - 正则表达式以防止任何特殊字符

> ID：12289550
> 
> 赞同：1
> 
> 时间：2012-09-05T20:51:35.580
> 
> 标签：javascript, jquery, regex, jquery-validate

我正在使用 jQuery 的验证插件来验证表单。我有一个应该只包含字母或数字的字段。我已经尝试了以下正则表达式，但它仍然允许诸如 ' ; ：

```
[a-zA-Z 0-9]$ 
```

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:54:55.830

尝试这个：

```
^[a-zA-Z 0-9]*$ 
```

如果这是必填字段，则将星号更改为加号：-

```
^[a-zA-Z 0-9]+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:53:31.680

试试这个表达式::

```
^[a-zA-Z 0-9]+$ 
```

# java - 如何等待查看我的 InputStream 是否已收到所有数据以进一步处理？

> ID：12289551
> 
> 赞同：1
> 
> 时间：2012-09-05T20:51:39.543
> 
> 标签：java, amazon-s3, inputstream, outputstream

我必须向其写入数据，`Amazon S3`并使用如下`OutputStream`方式写入数据`InputStream`

```
 final PipedOutputStream outputStream = new PipedOutputStream();
    final PipedInputStream inputStream;
    try {
        inputStream = new PipedInputStream(outputStream);
        new Thread(
                new Runnable() {
                    @Override
                    public void run() {
                        PutObjectRequest putObjectRequest = new PutObjectRequest(S3EnvironmentConfigurator.BucketTypes.source.name(), getProposalName(uniqueId), inputStream, null);
                        amazonS3Client.putObject(putObjectRequest);
                        try {
                            inputStream.close();
                        } catch (IOException e) {

                        }
                    }
                }
        ).start(); 
```

现在`amazonS3Client.putObject`看起来像

```
 @Override
    public PutObjectResult putObject(@Nonnull final PutObjectRequest putObjectRequest)
            throws AmazonClientException, AmazonServiceException {

        try {
            InputStreamReader is = new InputStreamReader(new GZIPInputStream(putObjectRequest.getInputStream()));
            StringBuilder sb=new StringBuilder();
            BufferedReader br = new BufferedReader(is);
            String read = br.readLine();
            while(read != null) {
                System.out.println(read);
                read =br.readLine();

            }
        } catch (IOException e) {
            //ignore
        }
    return super.putObject(putObjectRequest); 
```

*   这当前在控制台上打印出内容

**需要**

我该怎么做

```
while (putObjectRequest.getInputStream() is not completely available) {
   // wait
}

// write inputStream, the entire InputStream is ready and available for processing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:54:22.463

一旦侧写关闭它`OutputStream`，`InputStream`将传递任何尚未读取的字节，然后下一个[`read()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)将返回 -1 以指示输入结束。

> 值字节作为`int`0 到 255 范围内的 an 返回。如果由于到达流的末尾而没有可用的字节，则返回值 -1。此方法会一直阻塞，直到输入数据可用、检测到流结束或引发异常。

如果边写[`close()`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html#close%28%29)在完成时失败，那么阅读器将阻塞等待更多输入，直到写入过程关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:58:46.477

您可以将所有数据复制到字节缓冲区，从而确保您已从输入流中读取所有数据。然后根据这个缓冲区创建新的输入流。就像是：

```
byte[] array = IOUtils.toByteArray(inputStream);
InputStream newInputStream = new ByteArrayInputStream(array); 
```

来自 apache commons 的[IOUtils 。](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html)

# oracle - 在单个语句中获取多个聚合

> ID：12289557
> 
> 赞同：-1
> 
> 时间：2012-09-05T20:52:05.270
> 
> 标签：oracle, plsql

该表包含城市及其分支机构/自动取款机的数据

```
CITY        TYPE       NAME
 ----------------------------------
 agra         atm         X
 agra         branch      X1 
 delhi        atm         X2
 agra         atm         X3
 agra         atm         X4
 delhi        branch      X5
 chennai      branch      X6 
```

期望的结果集是

```
CITY     ATM   BRANCH
------------------------------------
agra       3       1 
delhi      1       1
chennai    0       1 
```

我们是否可以在一个 select 语句中做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:37:29.143

您可以像聚合中的条件求和一样执行此操作：

```
select t.city,
       sum(case when type = 'atm' then 1 else 0 end) as ATM,
       sum(case when type = 'branch' then 1 else 0 end) as branch
from t
group by t.city 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:30:51.647

如果您事先知道列的所有值，那么您可以在查询中对它们进行硬编码。否则它会变得更加复杂。这是在 Oracle SQL 中：

```
with my_data as
    (select 'agra' city, 'atm' "type", 'X' "name" from dual union
    select 'agra' city, 'branch' "type", 'X1' "name" from dual union
    select 'delhi' city, 'atm' "type", 'X2' "name" from dual union
    select 'agra' city, 'atm' "type", 'X3' "name" from dual union
    select 'agra' city, 'atm' "type", 'X4' "name" from dual union
    select 'delhi' city, 'branch' "type", 'X5' "name" from dual union
    select 'chennai' city, 'branch' "type", 'X6' "name" from dual)

select city,
    sum(decode("type", 'atm', 1, 0)) as ATM,
    sum(decode("type", 'branch', 1, 0)) as branch
from my_data
group by city; 
```

如果列数未知，Oracle 有一个“ [PIVOT XML](http://www.oracle-developer.net/display.php?id=506) ”语句，允许它在一个 XML 中返回所有汇总数据：

```
select * from my_data
PIVOT XML (count("name") for "type" in (ANY)); 
```

[您可以使用EXTRACTVALUE()](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions052.htm)函数自己解析每一列，但这仍然意味着您提前知道有多少列。我相信 Oracle SQL 无法创建具有动态列数的数据透视表。不过，它可以在 PL/SQL 中完成，您可以在其中使用游标动态连接您的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:11:18.863

这是您应该在 MS Access 中执行的操作：

```
TRANSFORM Count(Table1.Name) AS CountOfName
SELECT Table1.City
FROM Table1
GROUP BY Table1.City
PIVOT Table1.Type; 
```

我猜PLSQL并没有那么不同，它也有可用的“pivot”子句

**编辑**：

在 PL/SQL 中使用数据透视

```
select * from (
    SELECT city, type FROM t ) 
       PIVOT(count(*)  for (type) in ('atm', 'branch')); 
```

# ruby-on-rails - Rails 3.2.7：多选（select_tag）未保持选中状态

> ID：12289561
> 
> 赞同：1
> 
> 时间：2012-09-05T20:52:28.447
> 
> 标签：ruby-on-rails, multi-select

我遇到了一个问题，我已经解决了几个小时，但自己无法弄清楚或在网上找到答案。

基本上，我有一个显示访问列表的页面，能够按日期和位置过滤访问。日期过滤器是 text_fields（min_date 和 max_date），而位置过滤器是多选（使用 select_tag options_for_select）。

问题是当我在过滤后加载页面时，多选不会保持不变。加载页面后，日期字段将保持填写状态，但位置选择将始终恢复为未选择任何内容。如果我刷新页面、切换排序列/顺序或单击“过滤器”按钮，就会发生这种情况。奇怪的是 location_ids 参数将在 URL 中，但它不会反映在表单中。

以下是相关文件：

index.html.erb

```
<%= javascript_include_tag "jquery.multiselect.min" %>
<%= stylesheet_link_tag "jquery.multiselect.css" %>
<LINK REL=StyleSheet HREF="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.8/themes/ui-lightness/jquery-ui.css" TYPE="text/css" MEDIA=screen>

<h1>Read-Aloud Ideas</h1>
  <%= link_to 'View list of themes', themes_path %>
  <h3>Filter Results</h3>
  <%= form_tag(idea_finder_path, :method => "get", :id => "idea_finder") do %>
      <%= hidden_field_tag :direction, params[:direction] %>
      <%= hidden_field_tag :sort, params[:sort] %>
      <%= label_tag :min_date, 'From' %>
      <%= text_field_tag :min_date, params[:min_date], :id => "min_date"   %>
      <%= label_tag :max_date, 'To' %>
      <%= text_field_tag :max_date, params[:max_date], :id => "max_date" %> <br/>
      <%= label_tag :location_ids, 'Locations' %>
      <%= select_tag :location_ids, options_for_select(@locations_list.collect {|col| [col.name, col.id]}, @locations_list),:multiple => true, :id => "locations" %>
      <%= submit_tag "Filter" %>
  <% end %>

<div id="idea_finder_results">
    <%= render 'results' %>
</div> 
```

_results.html.erb

```
<%= paginate @visits  %>

<table class="pretty">
  <tr>
    <th><%= sortable "date", "Date" %></th>
    <th><%= sortable "location_id", "Location" %></th>
    <th><%= sortable "theme_id", "Theme" %></th>
  </tr>
  <% for visit in @visits %>
    <% if !@locations.nil? && (@locations.include? visit.location) && visit.theme.isrecommended %>
      <tr>
        <td><%= visit.date %></td>
        <td><%= visit.location.name %></td>
        <td><%= link_to visit.theme.name, theme_path(visit.theme.id) %></td>
      </tr>
    <% end %>
  <% end %>
</table>
<%= paginate @visits  %> 
```

application_helper.rb

```
module ApplicationHelper
  def sortable(column, title = nil)
    title ||= column.titleize
    css_class = column == sort_column ? "current #{sort_direction}" : nil
    direction = column == sort_column && sort_direction == "asc" ? "desc" : "asc"
    link_to title, params.merge(:sort => column, :direction => direction, :page => nil), {:class => css_class}
  end
end 
```

控制器

```
 helper_method :sort_column, :sort_direction
  def index
    @locations_list = Location.all
    @locations = Location.idea_search(params[:location_ids])
    @visits = Visit.idea_search(params[:min_date], params[:max_date]).page(params[:page]).per(20).order(sort_column + " " + sort_direction)
  end
  def sort_column
    if (Visit.column_names.include?(params[:sort]))
      params[:sort]
    else
      "date"
    end
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "desc"
  end 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:02:51.853

假设`idea_finder_path`映射到您在问题中共享的索引控制器操作，您似乎将您的默认值设置`options_for_select`为 be `@locations_list`。

考虑像这样构建您的多选标签：

```
<%= select_tag "location_ids", options_from_collection_for_select(@locations_list, "id", "name", @selected_locations.collect{ |l| l.id }), :multiple => true %> 
```

您的控制器的索引操作会更新`@selected_locations`实例变量以包含所选值。

确保替换`"name"`为包含您在 Location 模型中关心的显示属性的任何列。

# apache - 有没有办法用 New Relic 监控 apache？

> ID：12289572
> 
> 赞同：6
> 
> 时间：2012-09-05T20:52:56.283
> 
> 标签：apache, newrelic

我可以从 New Relic 监控使用 Apache 提供的静态页面吗？

也许我应该包括一个模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-19T17:16:20.003

New Relic 现在有插件。一位出版商已经为[Apache](http://newrelic.com/plugins/meetme-inc/59)发布了一个插件。

如果此插件无法以有用的方式为您监控 Apache，您可以分叉此项目并对其进行改进或创建您自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:16:37.573

New Relic 目前还没有 Apache 监控器，而我们在 Apache 移交请求后看到的 Web 应用程序监控器，因此那里的可见性也很少。

New Relic 确实支持“排队时间”度量，它可以让您知道请求在 Apache 和预 Web 应用程序层中的停留时间。这涉及修改您的 Apache 配置以包含一个特殊的 HTTP 标头，该标头包括 Apache 开始处理请求的时间戳。

您可以在此处阅读更多相关信息：[https ://newrelic.com/docs/features/tracking-front-end-time](https://newrelic.com/docs/features/tracking-front-end-time)

# java - 编译器抱怨投射到同一个捕获组

> ID：12289573
> 
> 赞同：0
> 
> 时间：2012-09-05T20:52:57.773
> 
> 标签：java, generics

以下引发编译错误，因为 foo.getClass() 与 F 以某种方式扩展 Foo 不是同一个捕获组：

```
public <F extends Foo> F create (final F foo){

     return foo.getClass().cast(foo);

   } 
```

以下工作正常。

```
return foo; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:54:30.427

[`Object#getClass()`返回 a`Class<? extends Foo>`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)，而不是 a `Class<F extends Foo>`。

> 实际结果类型是`Class<? extends |X|>`调用`|X|`getClass 的表达式的静态类型的擦除。

的擦除`<F extends Foo>`是上限，`Foo`。因此`Class#cast()`调用大致相当于

```
return (Foo) foo; 
```

并不是

```
return (F) foo; 
```

正如您现在可能已经发现的那样， a`Foo`不是 a `F extends Foo`（声明的方法返回类型），因此编译器不会让您返回 a `Foo`。

# c# - 防止窗体从其底部边框调整大小

> ID：12289575
> 
> 赞同：0
> 
> 时间：2012-09-05T20:53:00.883
> 
> 标签：c#, winforms

我喜欢通过拖动它的右侧边框来调整表单的大小......所以我将 BorderStyle 设置为相当大，但同时我不想通过拖动它的底部边框来调整它的大小，所以我想要能够水平而不是垂直调整表单的大小。

我认为如果我为 MinSize 和 MaxSize 属性设置相同的高度值，它应该可以工作，但是不行！一旦我为高度输入一个非零值，它就会开始认为宽度为零也很重要......这是错误的。

如果我需要为它“编码”，那没关系。不值得。但是如果有一些属性我可以设置我的表单来做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:54:23.867

将 MaximumSize 设置为 {99999, yourHeight} 并将 MinimumSize 设置为 {0,yourHeight}。设计师确实认为非零尺寸的零维度很重要。所以不要指定宽度为零作为最大值。

# javascript - 除非单击特定元素，否则触发模糊事件

> ID：12289577
> 
> 赞同：2
> 
> 时间：2012-09-05T20:53:06.813
> 
> 标签：javascript, jquery, onblur

我有三个搜索类别（见第一张图片）。用户选择一个，然后我在类别*空间中显示与该主题相对应的搜索输入（参见第二张图片）。*我使用 jQuery 自动专注于输入，因此用户可以轻松地开始输入。如果用户改变主意并模糊输入，我会隐藏它并再次显示三个类别。

如果用户单击输入进行搜索，这一切都很好，但我也希望允许他们能够单击搜索输入字段旁边的开始按钮。问题是，如果他们尝试单击 go 按钮，输入将被模糊然后隐藏，并且提交单击永远不会被触发（我无法在单击此元素时取消绑定模糊事件，因为它从未被触发 - 首先触发模糊）

![状态 1：](../Images/513e57ba84d79f49e0ea161c8a369730.png)

![状态 2：](../Images/f1c468d1661778e1c5834ec82b38ebcb.png)

那么有什么方法可以执行绑定到模糊事件（隐藏 div）的函数，*除非*使用 jQuery 或 JavaScript 单击此“go”元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:59:22.797

你有几个选择：

1.  如果焦点已经移到其容器之外的某个位置，则只能在模糊时隐藏输入，因此如果焦点已转到“开始”按钮，则根本不会隐藏输入。

2.  您可以将您的代码设计和触发搜索问题作为 ajax 调用而不是表单提交。

3.  您可以在简短后隐藏模糊输入，`setTimeout()`这使表单提交有机会在隐藏之前发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:01:57.893

不要将 blur 事件放在输入上，而是将 blur 事件放在同时包含输入和 Go 按钮的容器上。

# maven - 如何添加 dojo-maven 依赖项？

> ID：12289578
> 
> 赞同：2
> 
> 时间：2012-09-05T20:53:07.610
> 
> 标签：maven, dojo

我目前正在尝试将 dojo 添加为 web 项目中的 maven 依赖项。

我找到了这个链接：[http](http://mvnrepository.com/artifact/org.dojotoolkit/dojo-maven/1.8.0) ://mvnrepository.com/artifact/org.dojotoolkit/dojo-maven/1.8.0 我将依赖节点复制到我的 POM 中。

接下来，我搜索了 dojo-maven 人工制品所在的位置（在哪个存储库中）。但我找不到这些信息。我尝试添加：

```
<repository>
<id>maven2repo</id>
<url>http://central.maven.org/maven2/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository> 
```

但是当我构建它时：在 maven2repo (http://central.maven.org/maven2/) 中找不到工件 org.dojotoolkit:dojo-maven:jar:1.8.0

可以在这里找到 dojo-maven 人工制品[http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22dojo-maven%22](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22dojo-maven%22)

另一个搜索的地方可以在这​​里[http://download.dojotoolkit.org/](http://download.dojotoolkit.org/)在 maven 类别下。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:43:29.050

您的 pom 中是否定义了依赖项？

```
<dependency>
  <groupId>org.dojotoolkit</groupId>
  <artifactId>dojo</artifactId>
  <version>1.8.0</version>
</dependency> 
```

这只会添加“已编译”的 dojo 代码。它不是完整的 SDK（带有构建实用程序等）。将完整的 SDK 发布到 maven 存储库有一张未完成的票。

[http://bugs.dojotoolkit.org/ticket/15120](http://bugs.dojotoolkit.org/ticket/15120)

# go - 在 Go 可执行文件中包含模板文件

> ID：12289582
> 
> 赞同：3
> 
> 时间：2012-09-05T20:53:13.537
> 
> 标签：go

我想解析模板 HTML 文件的文件夹并在构建时缓存（或缓冲）它们以供以后在 Web 项目中使用。基本上我正在努力做到这一点，所以当我构建我的项目时，我不需要在上传可执行文件时随身携带 HTML 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:05:04.737

我想也许您正在谈论将 html 文件嵌入到您的二进制文件中？

如果是这样的话，到目前为止我见过的最好的方法是 camlistores fileembed：[https ://code.google.com/p/camlistore/source/browse/pkg/fileembed/fileembed.go](https://code.google.com/p/camlistore/source/browse/pkg/fileembed/fileembed.go)

有关使用说明，请参见此处：[https ://groups.google.com/d/msg/golang-nuts/LQMv7Zsmsi0/8Aax1XSekjAJ](https://groups.google.com/d/msg/golang-nuts/LQMv7Zsmsi0/8Aax1XSekjAJ)

该线程也为此提供了有关其他软件包的附加信息。

# jdbc - Apache Extras Cassandra-JDBC：方法名称无效：'prepare_cql_query'

> ID：12289583
> 
> 赞同：2
> 
> 时间：2012-09-05T20:53:15.417
> 
> 标签：jdbc, cassandra, thrift, cassandra-jdbc

我在 1.1.1 版上使用 Apache Extras 项目 cassandra-jdbc ( [http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/](http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/) ) 以及 cassandra-thrift 和 cassandra -clientutil 依赖于版本 1.1.1。

我的 Cassandra 版本是 1.0.10。我不得不在 1.1.1 版本上使用 cassandra-jdbc，因为 PreparedStatements 在早期版本中不可用。

我遇到的问题是：

```
org.apache.thrift.TApplicationException: Invalid method name: 'prepare_cql_query'
at org.apache.thrift.TApplicationException.read(TApplicationException.java:108)
at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:71)
at org.apache.cassandra.thrift.Cassandra$Client.recv_prepare_cql_query(Cassandra.java:1438) 
```

我在其他地方读到（[https://wso2.org/jira/browse/CARBON-13577](https://wso2.org/jira/browse/CARBON-13577)），这可以通过将 Cassandra 升级到 1.1.0 来解决，但我使用的是 DataStax，所以我不确定我可以升级它。还有另一种方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:11:23.867

这是因为 Cassandra 1.1 之前不支持准备好的语句：[https ://issues.apache.org/jira/browse/CASSANDRA-2475](https://issues.apache.org/jira/browse/CASSANDRA-2475)

# box-api - 如何在组织级别设置 Box 事件通知 (webhook)？

> ID：12289596
> 
> 赞同：1
> 
> 时间：2012-09-05T20:53:50.273
> 
> 标签：box-api

文档 (http://developers.box.com/webhooks/) 在“用户帐户”的上下文中讨论了 webhook。我将其理解为仅获取有关我有权访问的对象的通知。

假设我希望每次在我的组织中的任何地方都有新的上传时收到通知。我是否需要成为管理员才能完成此操作，还是 webhooks 范围不受我的用户权限的约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:35:25.690

在我们继续增强 webhook 的同时，还内置了一些管理功能。例如，如果您可以为所有用户安装 webhook，并将 webhook 指向一个端点，则可以跟踪您帐户中的所有活动。

有一种方法可以强制以管理员身份对您域中的所有用户进行 webhook。但是，此功能尚未针对使用 webhook 进行内部使用的公司进行优化。这仍在进行中。

如果您想了解最新情况，或者尝试使用我们现有的解决方法，请随时通过 api [at] box [dot] com 与我们联系。有了更多信息，我们可能会根据您的确切需求找到今天有效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:41:17.313

此时，webhook 仅在用户级别提供。如果您以管理员身份登录并设置一个获取 webhook 的应用程序，您将只会收到与您在 Web UI 的“更新”选项卡中看到的相同的一组通知。

我们正在寻求扩展 webhook 的功能，这是我们可能会探索的一个领域。但是，目前没有安排，所以我无法提供任何关于粗略日期的想法。

# c# - 为什么ServiceStack中的Redis缓存客户端对于一个不存在的整型键返回0而不是null？

> ID：12289599
> 
> 赞同：2
> 
> 时间：2012-09-05T20:53:58.743
> 
> 标签：c#, .net, caching, redis, servicestack

我正在使用带有 Redis 的 ServiceStack 缓存客户端来缓存整数。

我在一个我知道不存在的键上调用 Get 方法，如下所示：

```
int? count;
count = cachClient.Get<int>(myKey); 
```

`count``0`在这个调用之后总是有一个值。

从文档中，我期望 Get 方法为不存在的键返回 null 。

我做错了什么或理解错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:59:31.577

您在方法调用中说过，它需要返回不可为空的 int 类型（因此返回默认值 0）。尝试将第二行更改为：

```
count = cachClient.Get<int?>(myKey); 
```

然后看看它是否返回null。

# python - 从 Python 队列中读取行

> ID：12289601
> 
> 赞同：4
> 
> 时间：2012-09-05T20:54:02.567
> 
> 标签：python

我正在涉足 Python 线程。我创建了一个供应商线程，它通过队列从 *nix（串行）/dev 向我返回字符/行数据。

作为练习，我想一次一行地使用队列中的数据（使用 '\n' 作为行终止符）。

我当前的（简单的）解决方案是一次只将 1 个字符放入队列中，因此消费者一次只能获取（）一个字符。（这是一个安全的假设吗？）这种方法目前允许我执行以下操作：

```
...
return_buffer = []
while True:
    rcv_data = queue.get(block=True)
    return_buffer.append(rcv_data)        
    if rcv_data == "\n":
        return return_buffer 
```

这似乎有效，但是当我一次 put() 2 个字符时，我肯定会导致它失败。

我想让接收逻辑更通用，并且能够处理多字符 put()。

我的下一个方法是 rcv_data.partition("\n")，将“剩余”放在另一个缓冲区/列表中，但这需要在队列旁边处理临时缓冲区。（我想另一种方法是一次只 put() 一行，但那有什么乐趣呢？）

有没有更优雅的方式从队列中一次读取一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:28:34.033

这对于生成器来说可能是一个很好的用途。它会在产量后准确地从中断的地方恢复，因此减少了您需要的存储量和缓冲区交换（我无法谈论它的性能）。

```
def getLineGenerator(queue, splitOn):
    return_buffer = []
    while True:
        rcv_data = queue.get(block=True) # We can pull any number of characters here.
        for c in rcv_data:
            return_buffer.append(c)
            if c == splitOn:
                yield return_buffer
                return_buffer = []

gen = getLineGenerator(myQueue, "\n")
for line in gen:
    print line.strip() 
```

**编辑：**

一旦 JF Sebastian 指出行分隔符可能是多字符，我也必须解决这种情况。我还使用了 jdi 答案中的 StringIO 。我再次无法谈论效率，但我相信它在所有情况下都是正确的（至少是我能想到的那些）。这是未经测试的，因此可能需要一些调整才能实际运行。感谢 JF Sebastian 和 jdi 的回答，最终导致了这个问题。

```
def getlines(chunks, splitOn="\n"):
    r_buffer = StringIO()
    for chunk in chunks
        r_buffer.write(chunk)
        pos = r_buffer.getvalue().find(splitOn) # can't use rfind see the next comment
        while pos != -1: # A single chunk may have more than one separator
            line = r_buffer.getvalue()[:pos + len(splitOn)]
            yield line
            rest = r_buffer.getvalue().split(splitOn, 1)[1]
            r_buffer.seek(0)
            r_buffer.truncate()
            r_buffer.write(rest)
            pos = rest.find(splitOn) # rest and r_buffer are equivalent at this point. Use rest to avoid an extra call to getvalue

    line = r_buffer.getvalue();
    r_buffer.close() # just for completeness
    yield line # whatever is left over.

for line in getlines(iter(queue.get, None)): # break on queue.put(None)
    process(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:20:00.577

如果您的特定用例生产者需要逐个字符地放入队列中，那么我想我看不出让它们在消费者中循环有什么问题。但是您可能可以通过使用`StringIO`对象作为缓冲区来获得更好的性能。

```
from cStringIO import StringIO
# python3: from io import StringIO

buf = StringIO() 
```

该对象如果是类似文件的，那么您可以`write`随时对其进行查找、查找和调用`getvalue()`以获取缓冲区中的完整字符串值。与必须不断增长列表、将其连接到字符串并清除它相比，这很可能会给您带来更好的性能。

```
return_buffer = StringIO()
while True:
    rcv_data = queue.get(block=True)
    return_buffer.write(rcv_data)        
    if rcv_data == "\n":
        ret = return_buffer.getvalue()
        return_buffer.seek(0)
        # truncate, unless you are counting bytes and
        # reading the data directly each time
        return_buffer.truncate()

        return ret 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T22:07:39.787

队列完全返回您放入其中的内容。如果你放碎片，你会得到碎片。如果你放线，你就会得到线。

如果允许输入中的部分行并且可以稍后完成，则要逐行使用，您需要一个显式或隐式缓冲区来存储部分行：

```
def getlines(fragments, linesep='\n'):
    buff = []
    for fragment in fragments:
        pos = fragment.rfind(linesep)
        if pos != -1: # linesep in fragment
           lines = fragment[:pos].split(linesep)
           if buff: # start of line from previous fragment
              line[0] = ''.join(buff) + line[0] # prepend
              del buff[:] # clear buffer
           rest = fragment[pos+len(linesep):]
           if rest:
              buff.append(rest)
           yield from lines
        elif fragment: # linesep not in fragment, fragment is not empty
           buff.append(fragment)

    if buff:
       yield ''.join(buff) # flush the rest 
```

它允许片段，任意长度的行。linesep 不应跨越多个片段。

用法：

```
for line in getlines(iter(queue.get, None)): # break on queue.put(None)
    process(line) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-12T21:12:31.733

重要的是要注意队列中可能有多行。此函数将返回（并可选择打印）给定队列中的所有行：

```
def getQueueContents(queue, printContents=True):
    contents = ''
    # get the full queue contents, not just a single line
    while not queue.empty():
        line = queue.get_nowait()
        contents += line
        if printContents:
            # remove the newline at the end
            print line[:-1]
    return contents 
```

# wpf - 如何绑定从文件加载的 ComboBox？

> ID：12289602
> 
> 赞同：1
> 
> 时间：2012-09-05T20:54:02.770
> 
> 标签：wpf, binding, combobox

这是我的情况。我在画布中有多个用户控件。使用 XamlWriter 将此画布保存到 xaml 文件中。众所周知，使用此方法不会保存绑定，因此当我使用 XamlReader 并重新读取用户控件时，绑定不再存在。

对于一个简单的测试，我一直在尝试重新绑定从 XAML 文件加载的 ComboBox ItemsSource（这是我在用户控件内部遇到的问题）。我尝试实现 INotifyPropertyChanged，但是，我的变量：

```
public event PropertyChangedEventHandler PropertyChanged 
```

当我尝试设置 ComboItemsProperty 时始终为空：

```
public ObservableCollection<string> ComboItemsProperty
{
    get { return ComboItems; } //Field
    set 
    {
        ComboItems = value;
        OnPropertyChanged("ComboItemsProperty");
    } 
```

所以，我的最终目标是加载一个 xaml 文件，然后将项目添加到 ComboBox 的 ItemsSource 中，然后使用新项目更新 ComboBox。

我会以错误的方式解决这个问题吗？有人可以为我提供一个简单的工作示例吗？

编辑：

```
protected void OnPropertyChanged(string propertyName)
{
    PropertyChangedEventHandler handler = PropertyChanged
    if (PropertyChanged != null)
    {
         handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

我相当确定它与加载 XAML 和不再设置绑定有关。我试过设置绑定，但没有运气。

第二次编辑：

我想我 99% 确定绑定是原因。只要我没有从文件加载组合框，我的 OnPropertyChanged 就可以正常工作。我尝试按如下方式设置绑定：

```
Binding bind = new Binding();
bind.Mode = BindingMode.TwoWay;
bind.Source = this.ComboItemsProperty; //Not sure about this line.
bind.Path = new PropertyPath("ComboItemsProperty");
this.SetBiding(ComboBox.ItemsSourceProperty, bind); 
```

确认的。当我带回一个简单的组合框时，我绑定它的尝试不起作用。它必须是上面代码中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:27:40.963

`bind.Source`需要指向包含 的对象`ComboItemsProperty`，而不是属性本身。

```
Binding bind = new Binding();
bind.Mode = BindingMode.TwoWay;
bind.Source = this;
bind.Path = new PropertyPath("ComboItemsProperty");
this.SetBiding(ComboBox.ItemsSourceProperty, bind); 
```

您可以通过以下方式检查绑定是否成功：

```
 if (GetBindingExpression(ComboBox.ItemsSourceProperty).Status != BindingStatus.Active)
 { 
    //binding didn't work
 } 
```

# regex - 比较两个文档

> ID：12289603
> 
> 赞同：3
> 
> 时间：2012-09-05T20:54:08.693
> 
> 标签：regex, excel, list, csv

我有两个非常大的列表。它们最初都在 excel 中，但较大的一个是电子邮件列表（大约 160,000 封）以及其他信息，例如他们的姓名和地址等。较小的一个是只有 18,000 封电子邮件的列表。

**我的问题是从第一个文档中删除包含第二个电子邮件地址的所有 18,000 行的最简单方法是什么？**

我在想正则表达式，或者我可以使用另一个应用程序？我曾尝试在网上搜索，但似乎没有太多具体的内容。我也尝试过notepad++，但是当我尝试比较这些大文件时它会冻结。

-先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:06:50.937

好问题。我解决这个问题的一种方法是制作一个 C++ 程序[你可以将这个想法外推到你选择的语言；您从未提到您精通哪种语言]将较小文件的每个项目读入字符串向量。首先，当然，使用 Excel 将文件保存为 CSV 而不是 XLS 或 XLSX，这将使用逗号分隔值，以便您可以更轻松地使用它们。对于较大的列表，“另存为”只是电子邮件地址的副本，暂时删除其他行。

然后，您可以打开较大的列表并使用嵌套循环来检查您是否应该输出到输出文件。就像是：

```
bool foundMatch=false;
for(int y=0;y<LargeListVector.size();y++) {
    for(int x=0;x<SmallListVector.size();x++) {
        if(SmallListVector[x]==LargeListVector[y]) foundMatch=true;
    }
    if(!foundMatch) OutputVector.append(LargeListVector[y]);
    foundMatch=false;
} 
```

这可能是部分伪代码，但你明白吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:49:49.490

所以我读了一个论坛帖子：[这里](http://www.excelforum.com/excel-general/702406-compare-two-columns-delete-duplicates-from-just-one-column.html)

=匹配(B1,$A$1:$A$3,0)>0

B 列将是一个大列表，有 160,000 个输入，A 列是我需要删除的 18,000 个内容的列表。

我用它来匹配所有内容，并在单独的列中粘贴了这个公式。它会打印出错误或 TRUE。如果数据在两列中，则打印为 true。

然后因为我不喜欢 excel，我把这个文本扔到 Notepad++ 中并搜索所有包含 TRUE 的行（匹配大小写，因为在我的例子中，一些数据的单词是 true 而没有大写。）我标记了这些行，然后在搜索，书签，我删除了所有带有书签的行。将其粘贴回excel中，瞧。

我要感谢你们帮助并指出我正确的方向:)

# mysql - 关于mysql的innodb中的autoextend功能

> ID：12289608
> 
> 赞同：0
> 
> 时间：2012-09-05T20:54:22.563
> 
> 标签：mysql, innodb

我有一个存储空间有限的服务器

```
/apps:    available 60GB ;   used 59GB ; free 1GB 
```

我们有指向 /apps 的 mysql 数据目录

```
datadir                   /apps/mysql/data/
/apps/mysql/data/ibdata   50GB 
```

昨天我们观察到服务器关闭并显示表已满错误，基本上是磁盘已满。所以我们已经清除了其中一张表中的一个旧月份数据，并在 innodb 下有 10GB 的可用空间。但文件系统上仍然只有 1GB 的可用空间。

现在如果我再次尝试插入，innodb 是否再次尝试自动扩展 ibdata 文件或它使用了 9GB 可用空间？

# jquery - jqgrid 发送空 ("") 值与 stype:'select' 和 searchoptions:{dataUrl:...} 如果用户提交搜索表单而不更改所选值

> ID：12289610
> 
> 赞同：0
> 
> 时间：2012-09-05T20:54:26.560
> 
> 标签：jquery, search, jqgrid

我正在将 jqgrid 与这样的列一起使用：

```
{label:'test',
name:'dn',
index:'dn_id',
sortable:false,
align:'center',
editable:false,
search:true,stype:'select',
searchoptions:{
    sopt: ['eq'],
    defaultValue:'1000',
    dataUrl:'<?php echo URL::base().'reports_dn/get_dns';?>'}
} 
```

从 dataUrl 成功创建了选择下拉列表。但是如果用户选择搜索并按下提交按钮而不更改当前下拉选择，则会将空值发送到“dn_id”的服务器。但如果我更改下拉选择的值，它可以正常工作。这似乎是一个错误，但我不确定。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T12:14:10.037

i have this problem too! but i don't find any solution by search on web. i resolve this problem temporary by a trick i add one option with value = -1 and text "Please Select" then in change event i remove this option.

please see it

[https://stackoverflow.com/a/17526140/2527458](https://stackoverflow.com/a/17526140/2527458)

it maybe help u

# ruby-on-rails - Rails 和 XMPP(Jabber) 机器人：关于（异步？）队列的建议

> ID：12289611
> 
> 赞同：2
> 
> 时间：2012-09-05T20:54:27.277
> 
> 标签：ruby-on-rails, xmpp, message-queue, background-process

所以，我正在使用 Rails 构建一个小型应用程序。我需要使用 XMPP proto 通过一些命令通知用户来更改用户状态。

以前的版本是一个使用纯 Python（相当丑陋的应用程序）的应用程序，它带有纯 SQL 请求到 DB。有一个表“jabber_queue”，所以在单独的脚本中，机器人每秒检查任何行，处理它（发送消息），删除。这既简单又愚蠢，但没关系。

现在我明白了，我需要将此机器人功能集成到 Rails 中（至少要与 RSpec 一起使用）。

这是我如何做到的几个版本：

1.  使用分离的异步队列解决方案。例如，雷斯克。使用单独的 Ruby 脚本并将事件推送到 Resque，在应用程序中弹出事件（不依赖于 DB，因此很容易适应 RSpec 测试和测试 DB）。但这使我的应用程序有点臃肿——我需要使用第二个具有大量内存和 CPU 额外要求的数据库——这将是我的问题的开销。另外，我不想为这个应用程序支持额外的“东西”，我知道，它可以更容易地完成。

2.  使用延迟作业（使用当前 AR DB 的队列解决方案）。但我不知道如何在单独的脚本中获取 Rails 应用程序的当前 AR DB。无论如何，这是一种肮脏和丑陋的方式。

3.  在 Rails 应用程序内启动 XMPP bot **，作为后台工作人员。**所以工人将可以访问“当前”AR（在测试的情况下，测试数据库）。但我根本不知道该怎么做。我找到了一个[Navvy](https://github.com/jeffkreeftmeijer/navvy/wiki/getting-started)，但我需要在 Rails 的某个地方开始一个字符串，比如“ **Navvy::Job.enqueue(Cow, :speak)** ”，我不知道哪里是最好的开始它与 RSpec 测试和“rails 服务器”一起使用。此外，还有一个 BackgrounDRb，但这个项目类似于 Navvy 并且也处于非活动状态。在stackoverflow上使用搜索，我发现了与我类似的问题，但解决方案将我引导到[background_job](http://codeforpeople.rubyforge.org/svn/bj/trunk/README)，它可以在后台进行任何操作，但我仍然不知道如何在单独的脚本中获取当前的 AR DB 访问权限。

我很抱歉我的问题中有这么多的话，这只是一个脑力激荡。我看到了一些解决方案，但我真的需要更有经验的开发人员的建议和一些话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:43:18.753

所以，这是使用是的，第三种方式解决的。

1.  我创建了一个用于处理机器人命令和 AR 模型的类 - `awesomo.rb`. 没什么特别的，真的。我把它放在`/lib/`Rails 项目中。第二，

2.  创建配置文件以便于设置密码和 JID -`config/awesomo.yml`

    > ```
    > development:
    >   xmpp_jid: ...
    >   xmpp_password: ... 
    > ```

3.  我为我的机器人创建了一个守护进程 - `awesomo_daemon.rb`. 同样，在`/lib/`. 这是它包含的内容：

    > ```
    > #preload rails environment
    > require File.expand_path(File.join(File.dirname(__FILE__),
    >      '..', 'config', 'environment'))
    > 
    > #load xmpp bot class
    > require 'awesomo_daemon'
    > 
    > #load xmpp bot configuration file for current environment
    > AWESOMO_CONFIG = YAML.load_file(File.join(File.dirname(__FILE__),
    >     '..', 'config', 'awesomo.yml'))[Rails.env]
    > 
    > #apply configuration before singleton will be initiated
    > Awesomo.setup AWESOMO_CONFIG['xmpp_jid'], AWESOMO_CONFIG['xmpp_password']
    > 
    > loop {
    >   Awesomo.instance.idle
    >   sleep 1
    > } 
    > ```

4.  创建了守护程序脚本启动器- `script/awesomo`.

    > ```
    > #!/usr/bin/env ruby
    > require 'rubygems'
    > require 'daemons'
    > Daemons.run "lib/awesomo_daemon.rb", dir_mode: :normal,
    >     dir: File.join(File.dirname(__FILE__), '..', 'tmp', 'pids') 
    > ```

5.  只需使用 command 运行它`script/awesomo start`。

我可以在里面使用我的任何模型`awesomo.rb`！另外，对于队列，我正在使用带有字段 jtype（例如，“xmpp_message”）、body（“hey！”）、to（“john@jabber.com”）的小模型 - XMPPJob。在`awesomo.rb` `idle`bot 类的函数中使用`limit(5).each do |job| case jtype ...`.

要为我的“awesomo”发布任何新工作，我正在使用函数`send_message`：

> ```
> def self.send_message to, body
>   xmppjob = XmppJob.new :jtype => "xmpp_message", :body => body, :to => to
>   xmppjob.save
> end 
> ```

除了 XMPP library( `xmpp4r-simple`) 本身之外，一切都运行良好，但我将很快使用`xmpp4r`.

# java - Java notifyAll 没有立即唤醒

> ID：12289613
> 
> 赞同：1
> 
> 时间：2012-09-05T20:54:35.043
> 
> 标签：java, multithreading

所以，我有以下对象（为了举例而简化）：

```
public class SomeListener implements EventListener{
    public final Object lock = new Object();
    public int receivedVal;

    @Override
    public onDataAvailable(int val){
        synchronized(lock){
            System.out.println("listener received val: " + val);
            receivedVal = val;
            lock.notifyAll();
        }
    }
} 
```

我在主线程的某处有这段代码（再次简化）：

```
SomeListener listener = new SomeListener();
EventGenerator generatorThread = new EventGenerator();
generatorThread.addListener(listener);
synchronize(listener.lock){
    generatorThread.start();
    listener.lock.wait();
    System.out.println("value is: " + listener.receivedVal);
}
//some other stuff here.... 
```

现在，EventGenerator 对象使用 val = 1 调用“onDataAvailable”，然后在不同线程上使用 val = 2。基本上，我希望看到的是：

```
listener received val: 1
value is: 1
listener received val: 2 
```

但是，我通常会得到：

```
listener received val: 1
listener received val: 2
value is: 2 
```

就好像第二次调用“onDataAvailable”在主线程被唤醒之前获取了锁。在“onDataAvailable”的同步块之后进行简单的 println 或短暂睡眠就足以获得预期的结果，但这似乎是一个丑陋的补丁。

我在这里做错了什么？

请注意，我无法控制调用侦听器的线程。它基本上是一个通过网络接收事件的线程。有时它会在同一条消息中接收多个事件，因此会一个接一个地多次调用“onDataAvailable”，这导致了我的问题。其他时候，它会在两个不同的消息中接收两个事件，从而为主线程在事件之间唤醒足够的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T20:57:28.723

> 就好像第二次调用“onDataAvailable”在主线程被唤醒之前获取了锁

如果您有多个线程调用`onDataAvailable(...)`. 当`notifyAll()`被调用时，所有等待该对象的线程都被移动到阻塞队列中，但*在*队列中已经存在的任何线程之后。在继续之前，它们都必须等待同步`lock`。

> 其他时候，它会在两个不同的消息中接收两个事件，从而为主线程在事件之间唤醒足够的时间。

对，所以多个网络处理程序线程正在调用`onDataAvailable(...)`. 第二个被阻塞在`synchronized(lock)`等待它。当`notifyAll()`被调用时，另一个线程也进入块队列，但*在*另一个处理程序之后。

如果只有一个处理程序线程，您会得到该输出，我*会感到惊讶。*在这种情况下，被通知的线程应该在单线程处理程序可以解锁、读取另一条消息并再次锁定*之前获得同步锁。*

> 我在这里做错了什么？

问题不在于处理线程的方式，而在于您处理`receivedVal`. 您应该*立即*在处理线程中处理该值，否则您需要将其放入某种同步队列（可能是 a [`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)）中，以便由主线程按顺序打印出来。

如果您使用 a ，`BlockingQueue`那么主队列只​​会执行 a `queue.take()`，这会导致它等待结果，而处理程序线程只会执行`queue.put(...)`. 您不需要自己进行`wait()`or`notifyAll()`调用。

像这样的东西会起作用：

```
private final BlockingQueue<Integer> queue = new LinkedBlockingQueue<Integer>();
...

@Override
public onDataAvailable(int val){
    System.out.println("listener received val: " + val);
    queue.put(val);
}
...

generatorThread.addListener(listener);
generatorThread.start();
while (true) {
    // this waits for the queue to get a value
    int val = queue.take();
    System.out.println("value is: " + val);
} 
```

# mod-rewrite - mod_rewrite 用于带有 uriencoded 查询字符串的漂亮 url

> ID：12289614
> 
> 赞同：0
> 
> 时间：2012-09-05T20:54:38.123
> 
> 标签：mod-rewrite, query-string, friendly-url, uriencoding

好的，所以我尝试了很多我在 SO 和其他地方找到的东西，但我就是无法让它工作，总是收到 404 错误代码。

我想输入这个网址：

```
memorizeit.com/pics/220.0.8251.20120905002352.7982368227/Jameson+tested+the+MemorizeIt%21+Android+app%3A+With+Facebook+%26+Twitter.+Getting+grass+stains. 
```

并让它无形地转换为：

```
memorizeit.com/pics/index.php?pic=220.0.8251.20120905002352.7982368227&title=Jameson+tested+the+MemorizeIt%21+Android+app%3A+With+Facebook+%26+Twitter 
```

index.php 页面正在寻找：

```
$pic = ($_GET["pic"]);
$title = ($_GET["title"]); 
```

在 /pics 目录中的 .htaccess 文件中，我有以下内容：

```
RewriteEngine on
Header set Cache-Control "max-age=2592000"
RewriteRule ^pics/([^\/]*)/([^\/]*)/([^\/]*)$ /pics/index.php?pic=$1&title=$2&extra=$3 [L,QSA]
RewriteRule ^pics/(.+)/(.+)$ /pics/index.php?pic=$1&title=$2 [L,QSA]
RewriteRule ^pics/([^\/]*)$ /pics/index.php?pic=$1 [L,QSA] 
```

我在没有 QSA 的情况下尝试过，我用 .+（任何东西）和 [^/]*（除 / 之外的任何东西）都试过了，所以你可以看到我是如何把它们放在那里的（我想！）。我确实计划让 1 美元只允许包含数字和句点，但我只想让它首先开放。

我不知道为什么它不起作用。在我的基本 url .htaccess 文件中，我有：

```
RewriteCond %{SERVER_PORT} ^80$
RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R,L] 
```

它总是重定向到 https，所以我知道正在读取 .htaccess 文件。我不知道还能尝试什么。任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:30:19.690

事实证明，因为 pics/ 是一个真正的目录，所以重写比继续重写它更努力地到达那里。因此，我在匹配语句中将 pics/ 更改为 p/ 并将规则移至基本 .htaccess 文件，它按预期工作。

哇，这花了很长时间很痛苦......希望它可以节省其他人一些时间。

# ruby-on-rails - 为什么我不能从数据库中提取有序数据？

> ID：12289616
> 
> 赞同：1
> 
> 时间：2012-09-05T20:54:43.020
> 
> 标签：ruby-on-rails, ruby, sqlite

我似乎无法从数据库中提取有序数据。我正在尝试根据用户个人资料的浏览次数在我的主页上列出用户。

我的`users`架构如下所示：

```
# == Schema Information
#
#
# Table name: users
#
#  id              :integer          not null, primary key
#  email           :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#  username        :string(255)
#  password_digest :string(255)
#  views           :integer
# 
```

我的控制器：

```
class PagesController < ApplicationController
  def home
    @users = User.order("'views' DESC")
  end
end 
```

问题是`.order`它什么也没做。`@users`仍然是按顺序排列的`id`，好像我已经完成了一样`User.all`。我尝试`User.order("'views' DESC")`在 Rails 控制台中运行，但得到的结果与`User.all`.

我检查了 development.log，查询似乎已正确执行：

```
[1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY 'views' DESC
Rendered pages/home.html.erb within layouts/application (1.1ms)
Rendered layouts/_header.html.erb (0.5ms)
Rendered layouts/_footer.html.erb (0.0ms) 
```

在客户端进行排序工作，但是我想对用户进行分页，所以这不是一个选项。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:01:02.840

```
@users = User.order("views DESC") 
```

检查[http://guides.rubyonrails.org/active_record_querying.html#ordering](http://guides.rubyonrails.org/active_record_querying.html#ordering)

对于分页，您可以通过此 gem 获得一些帮助： [https ://github.com/mislav/will_paginate](https://github.com/mislav/will_paginate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:03:06.423

周围的`''`视图是导致您的查询失败的原因。不带引号试试：

`User.order("views DESC")`

# jquery - jQuery AJAX POST 请求丢弃 ie9 中的正文

> ID：12289619
> 
> 赞同：3
> 
> 时间：2012-09-05T20:54:51.073
> 
> 标签：jquery, ajax, internet-explorer, internet-explorer-9

我编写了一个 Javascript 方法，它从客户端浏览器向我们用 PHP 编写的 API 发送跨域 POST 请求：

```
$.ajax({
    type:        'POST',
    url:        backend_url,
    data:        postArgs,
    beforeSend:    function( xhr, settings ) {
        xhr.setRequestHeader( 'Connection', 'close' );
    },
    error:        function( xhr, status, errorThrown ) {
        console.log( 'RECONTRIBUTION: Error on AJAX request! status=' + status + ', errorThrown=' + errorThrown + ', statusText=' + xhr.statusText );
        $( '#alert_message' ).showAlertMsg( 'error', 'Oops, we couldn\'t talk to our server!  Please try again in a moment.' );
    },
    success:    function( data, status, response ) {
        //do things
    }
}); 
```

在 Firefox、Chrome 和 Safari 中一切正常，但在 IE9 中我遇到了问题。第一个问题是我收到“无传输”错误，我认为这是由 IE 对跨域请求的限制引起的。通过将 jQuery.support.cors 设置为 true 并包含此插件，我得到了通过的请求，该插件在不同的 SO 线程上找到：[https ://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest/blob/master/jQuery .XDomainRequest.js](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest/blob/master/jQuery.XDomainRequest.js)

现在请求已完成，但 API 返回错误，因为缺少请求正文。

来自 Chrome 的工作请求（网址已编辑）：

```
POST [backendurl] HTTP/1.1
Host: [backendurl]
Connection: keep-alive
Content-Length: 79
Origin: [frontendurl]
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Accept: */*
Referer: [frontendurl]
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
DNT: 1

action=contributeSong&client=TUNEBOT&iTunes_id=17344380&user_id=&query_id=64600 
```

来自 IE9 的非工作请求：

```
POST [backendurl] HTTP/1.1
Accept: */*
Origin: [frontendurl]
Accept-Language: en-US
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: [backendurl]
Content-Length: 0
Connection: Keep-Alive
Pragma: no-cache 
```

奇怪的是，我尝试将 Connection 标头设置为 Close，因为我读到 Keep-Alive 有时会导致 Internet Explorer 出现问题......但请求正在发送 Connection: Keep-Alive 无论如何。有任何想法吗？这几天我一直在扯头发。

**更新：**好的，所以在对 XDR 对象进行了更多阅读之后，我意识到我无法发送自定义标头，这解释了 Keep-Alive 问题。我查看了插件，它没有向服务器发送任何数据（...），所以现在我收到了 APPEARS 发送数据的请求，但仍然得到相同的响应......

```
POST [backendurl] HTTP/1.1
Accept: */*
Origin: [frontendurl]
Accept-Language: en-US
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: [backendurl]
Content-Length: 79
Connection: Keep-Alive
Pragma: no-cache

action=contributeSong&client=TUNEBOT&iTunes_id=23148795&user_id=&query_id=64612 
```

如下所示，添加`cache:false`选项似乎没有任何影响。是`Connection:Keep-Alive`什么在杀死我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:28:03.673

解决它！我下载的 IE9 XDR 插件在执行 XDR 请求时没有向服务器发送任何数据，因此我将数据添加到请求中并修改了我的 API 以根据需要解析 $HTTP_RAW_POST_DATA 变量。多么痛苦，我希望 IE10 像它被证明的那样具有革命性……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:07:15.237

试试这个：一旦你打电话给你`$().ready(function() {`- 确保设置这个：

```
$.ajaxSetup({ cache: false }); 
```

这避免了由于 IE 试图变得聪明而导致的问题。

# objective-c - 用于 JSON 解析的 NSDictionary 或自定义 NSObject

> ID：12289623
> 
> 赞同：1
> 
> 时间：2012-09-05T20:54:55.937
> 
> 标签：objective-c, ios, json, nsdictionary, nsobject

我见过很多人使用`NSDictionary`JSON 解析：

```
//ViewController.m
NSString* forename = [jsonDict valueForKey:@"forename"];
NSString* surname = [jsonDict valueForKey:@"surname"]; 
```

但我也有人`NSObject`从`NSDictionary`.

```
//JSONObject.h
@interface JSONObject : NSObject

@property (nonatomic) NSString* forename;
@property (nonatomic) NSString* surname;
@end

//JSONObject.m
@implementation JSONObect

@synthesize forename = _forename;
@synthesize surname = _surname;

@end

//ViewController.m
JSONObject* jsonObject = [[JSONObject alloc] init];
[jsonObject setForename:[jsonDict valueForKey:@"forename"]];
[jsonObject setSurname:[jsonDict valueForKey:@"surname"]]; 
```

然后将这些存储在`NSMutableArray`：

```
NSMutableArray* jsonObjectsArray = [NSMutableArray arrayWithCapacity:20];
[jsonObjectsArray addObject:jsonObject]; 
```

如果需要，可以稍后访问。

就我而言，我有一个`UITableView`从 JSON 获取数据的方法。数据至少使用一次，但很可能会被使用更多（例如，在设备轮换中）。JSON 数据不应永久存储到文件中，因为它会定期更新并在每次应用启动时下载。

我应该在我的场景中使用自定义`NSObject`还是 a ？`NSDictionary`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:10:23.600

使用自定义对象的一个​​论点是它距离使用 NSManagedObject 仅几步之遥，这将让您利用 Core Data 来管理您的对象图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:18:17.480

使用 NSDictionary 的理由是它更简单、更容易理解，并且您定义的“次要”类（和相关的 h/m 文件）更少，因此在项目中管理的更少。在“不断变化”的项目中编辑/扩展也容易得多。

# iphone - 为什么使用 __weak 不会导致局部变量立即为零？

> ID：12289624
> 
> 赞同：2
> 
> 时间：2012-09-05T20:54:55.873
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

我从事同一个项目已经有一段时间了，随着时间的推移，我对 Objective-C 和 Cocoa 的理解也有了一些变化。回顾我的代码的某些部分，我看到了这一点：

```
__weak ASIFormDataRequest *serverQueueRequest = [ASIFormDataRequest requestWithURL:url2];
[serverQueueRequest setCompletionBlock:^{
    NSLog(@"%@", serverQueueRequest.responseString);
}];
[serverQueueRequest startAsynchronous]; 
```

这就是我处理所有服务器请求的方式。我想我这样做是为了抑制警告，即“在块中捕获请求可能会导致保留周期”。所以我把它变弱了，这似乎解决了我所有的问题。我没有注意到任何真正的问题。

但是，现在看代码，它的工作原理似乎有点奇怪。当我将请求声明为`__weak`时，由于没有人坚持它，它不应该立即归零吗？为什么这段代码有效？

另外，虽然这段代码有效，但我最近发现了一个不起作用的情况：当连续多次调用包含此代码的方法时，比如在一秒钟内调用 5 次，3/5 的请求将有`NULL`响应. 情况一贯如此。删除`__weak`限定符可以解决此问题。对此有何解释？

最后，声明这样的本地请求的正确方法是什么？

**更新**：根据[这个问题](https://stackoverflow.com/questions/7205128/fix-warning-capturing-an-object-strongly-in-this-block-is-likely-to-lead-to-a)，正确的做法是这样的：

```
ASIHTTPRequest *_request = [[ASIHTTPRequest alloc] initWithURL:...
__weak ASIHTTPRequest *request = _request; 
```

编辑：实际上上面的修复并没有解决调用代码 5 次导致 NULL 响应的问题。那个问题依然存在。问题消失的唯一方法是强烈捕获请求而不使用任何限定符。

现在的问题是为什么我的原始代码仍然有效..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:20:00.907

引用[Apple 的 Programming with ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)发行说明：

> 在堆栈上使用 __weak 变量时要小心。考虑以下示例：

```
NSString __weak *string = [[NSString alloc] initWithFormat:@"First Name: %@", [self firstName]]; 
NSLog(@"string:%@", string); 
```

> 虽然在初始赋值后使用了字符串，但在赋值时并没有其他对字符串对象的强引用；因此，它立即被解除分配。日志语句显示该字符串具有空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:52:30.370

我相信这是因为您在一个块中运行弱变量。该块保持弱变量的状态，从而使其工作。一旦块完成，我打赌在变量上做很多工作可能会导致问题。

如果您多次运行它，我猜测它为什么会失败是因为异步 asi 调用堆栈变得很高并且会爆炸。我以前见过这个，如果你非常有耐心，你可以在调试器中捕捉到 asi 爆炸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:08:11.167

obj C 堆栈将始终在范围内保留指针。_weak 并不意味着现在释放它意味着当堆栈超出范围时释放。

当您声明一个 var 然后在同一堆栈范围内对其进行调用时，它不会被释放，直到（最少）堆栈被清理之后。

块扩展了方法范围，因为它们暗示了潜在的异步行为，并且它们利用了调用它们时存在的堆栈。

# c# - 将查询从 linq 复制到数据表时出错

> ID：12289626
> 
> 赞同：1
> 
> 时间：2012-09-05T20:55:02.143
> 
> 标签：c#, linq, ienumerable

我刚开始从事一个需要 . 的项目`Linq to Sql`，并且我已经能够进行查询和检索数据。但是现在我需要`DataTable`用我正在检索的数据填充 a 。

我的第一个代码如下：

```
MyDatabase db = new MyDatabase();
var query = from cust in db.Customers
            where cust.CustomerName != "Dante"
            orderby cust.CustomerName
            select new { Name = cust.CustomerName }; 
```

因此，由于我需要将查询的内容复制到 a`Datatable`我尝试了[这个](https://stackoverflow.com/questions/16/filling-a-dataset-or-datatable-from-a-linq-query-result-set)：

```
 IEnumerable<DataRow> query =
    from order in orders.AsEnumerable()
    where order.Field<DateTime>("OrderDate") > new DateTime(2001, 8, 1)
    select order;

// Create a table from the query.
DataTable boundTable = query.CopyToDataTable<DataRow>(); 
```

然后，我的代码如下所示：

```
IEnumerable<DataRow> myQuery = from cust in db.Customers.AsEnumerable()
                    where cust.Name != "Dante"
                    orderby cust.Name
                    select new { Name = cust.Name };

DataTable myDataTable = myQuery.CopyToDataTable<DataRow>(); 
```

但是使用此代码，编译器会引发错误：

`Cannot implicitly convert type 'System.Collections.Generic.IEnumerable<AnonymousType#1>' to 'System.Collections.Generic.IEnumerable<System.Data.DataRow>`

错误是`select`一言以蔽之。

那么，**我做错了什么？我该怎么做才能避免这种转换问题？**

希望有人可以帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:40:13.863

有一种方法可以`DataTable`从 以外的结果创建`IEnumerable<DataRow>`，但它相当复杂。[实现通用类型 T 不是 DataRow 的 CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb669096.aspx)。

不过，对于您的情况，我建议您按照以下方式进行操作。回到原来的查询：

```
MyDatabase db = new MyDatabase();
var query = from cust in db.Customers
            where cust.CustomerName != "Dante"
            orderby cust.CustomerName
            select new { Name = cust.CustomerName }; 
```

然后定义你的单个字段`DataTable`，因为当你最终创建一个 时`DataRow`，它需要一个模式来工作：

```
DataTable myDataTable = new DataTable();
myDataTable.Columns.Add(
    new DataColumn()
    {
        DataType = System.Type.GetType("System.String"),
        ColumnName = "Name"
    }
); 
```

最后，查看查询结果并手动`DataRows`将`DataTable`.

```
foreach (var element in query)
{
    var row = myDataTable.NewRow();
    row["Name"] = element.Name;
    myDataTable.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T20:58:21.150

问题与错误状态完全相同；您的“选择”子句正在创建具有一个成员“名称”的匿名类型的实例。此匿名类型不是也不能是 DataRow，因此查询生成的内容与您想要将其设置为的变量之间的隐式转换失败。

相反，您应该使用此查询，并为它返回的匿名类型的每个元素添加值作为 DataTable 的新 DataRow。您不能只是从头开始创建一个新的 DataRow；DataRow 类需要一个上下文，即父 DataTable，来定义 DataRow 应具有的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T20:57:00.487

我猜这会做

```
var myQuery = from cust in db.Customers.AsEnumerable()
                    where cust.Name != "Dante"
                    orderby cust.Name
                    select new { Name = cust.Name }; 
```

或试试这个

```
 string[] myQuery = db.Customers.Rows
                       .Cast<DataRow>()
                       .Where(r=>r.Name!="Dante")
                       .Orderby(r=>r.Name)
                       .Select(r=>r.Field<string>("Name"))
                       .ToArray() 
```

# sdl - 如何配置 SDL 以使用 Blackberry Playbook Native SDK / NDK？

> ID：12289628
> 
> 赞同：0
> 
> 时间：2012-09-05T20:55:12.337
> 
> 标签：sdl, blackberry-playbook, blackberry-10, blackberry-qnx

我已经设置好 NDK 并设法在我的剧本上编译和运行 hello native sdk 项目。我从 github 下载了 blackberry sdl 端口。但是，我什至无法使用它编译一个 hello world 项目。此外，它似乎缺少我习惯于编译器设置所需的“lib”文件夹。

编辑：我已经设法让 sdl 在本机 sdk 中打开，看来下载的目的是充当各种项目模板。起初编译器抱怨我需要另一个库 TouchControlOverlay。所以我下载了这个并设置了包含它。但是我再次找不到 lib 文件夹，并且该项目仍然无法编译，说它找不到 -lTouchControlOverlay。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:25:10.347

编译找不到 TouchControlOverlay 的原因是因为它没有安装在您的主机上。要安装它：

1.  从这里克隆 TouchControlOverlay：[https ://github.com/blackberry/TouchControlOverlay](https://github.com/blackberry/TouchControlOverlay)
2.  进入目录并运行：

    制作 && 制作安装

如果您现在导航到：`$QNX_TARGET/armle-v7/lib`您应该看到`libTouchControlOverlay.so`已放置在那里。您现在应该能够使用`-lTouchControlOverlay`

请注意，您需要将此库与您的应用程序一起打包，方法是`<asset>`在`bar-descriptor.xml`文件中将其指定为 an。

# javascript - 使用 Ajax 的后退按钮历史记录，URL 中没有哈希

> ID：12289632
> 
> 赞同：0
> 
> 时间：2012-09-05T20:55:43.437
> 
> 标签：javascript, jquery, html

我有这个代码：

```
 var idRetorno = null;
var link = null;

function handler() 
{
    if(this.readyState == this.DONE) {
    if(this.status == 200) 
    {
           $('#'+idRetorno).html(this.responseText);
           window.history.pushState('', '', link);
    }
  }
}

function link_ajax(linkp, idRetornop)
{
    idRetorno = idRetornop;
    link = linkp;

    var client = new XMLHttpRequest();
    client.onreadystatechange = handler;
    client.open("GET", link);
    client.setRequestHeader('X-Requested-Header', 'XMLHttpRequest');
    client.send();
} 
```

单击链接时，我的应用程序中的所有内容都会调用函数link_ajax，我尝试使用

```
window.history.pushState('', '', link); 
```

但是，后退按钮历史记录没有按预期工作，页面仍然相同。我不能在 URL 中使用哈希（#color:red 示例），因为这是应用程序的要求。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:05:30.640

您是否使用[onpopstate](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)来检测页面状态已更改？

```
window.onpopstate = function(event) {
  alert("location: " + document.location + ", state: " + JSON.stringify(event.state));
}; 
```

# multithreading - 队列请求到 MVC 控制器

> ID：12289633
> 
> 赞同：1
> 
> 时间：2012-09-05T20:55:47.150
> 
> 标签：multithreading, asp.net-mvc-3, jquery

我有一个有趣的问题需要解决，我什至不知道从哪里开始。我正在编写一个 MVC Web 应用程序，它通过表单获取记录列表，并为每个记录进行 ajax 调用。ajax 调用命中的控制器使用一次只能处理一个请求的资源。简单的解决方案是将 ajax 调用更改为同步调用，但是这会挂起浏览器并提供糟糕的体验。

此外，多个用户可能同时使用此应用程序，因此在客户端排队将不起作用。

有人有什么建议吗？

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:09:38.957

首先，我的要求和你的不太一样。我的问题是我的后端数据库往往有点慢，而用户响应能力非常重要。

因此，我不得不从等式中删除数据库交互。

我的解决方案有两个主要部分：

1.  维护数据的服务器端缓存

2.  创建一个单独的进程来包含所有可以与服务器交互的数据库工作

单独的进程被实现为由 Windows 服务托管的命名管道 WCF 服务。

基本流程概述是：

1.  用户单击“保存”，Ajax 将表单发布到 Mvc 控制器
2.  控制器更新缓存数据，然后调用 WCF 管道
3.  该服务将数据推送到并发队列（连同会话 ID），并返回一个 guid 令牌
4.  控制器将令牌作为 JSON 响应返回。
5.  jQuery Ajax 处理程序拦截响应并将令牌保存到 6\. 代表“已保存”表单的 UI 元素中。

服务本身是这样工作的：

1.  在开始时创建一个计时器。
2.  在计时器滴答声中：
3.  停止计时器。
4.  从并发队列中删除所有排队的工作项
5.  发送要由工作处理器处理的每个项目
6.  将项目添加到“已完成”或“有错误”并发字典中，由较早的会话 ID 键入（以及一些时间保留内容以消除陈旧数据）。这包括原始工作令牌。
7.  再次启动计时器。

回到用户区，有一个 javascript setInterval 循环正在运行：

1.  对服务器的 Ajax 请求（心跳控制器）
2.  控制器连接到服务，并传递当前会话 id
3.  该服务返回“已完成”和“错误”字典中的所有项目
4.  控制器将列表作为 JSON 对象数组返回
5.  javascript 循环遍历返回的列表并使用令牌进行适当的 UI 更新

最终结果是一个响应速度非常快的 UI，尽管后端持久服务器很慢。

如果您想要实现代码的任何特定部分，请告诉我。

# reporting-services - 在 SSRS 中将多个报告分组为一个

> ID：12289638
> 
> 赞同：10
> 
> 时间：2012-09-05T20:55:59.967
> 
> 标签：reporting-services

我是 SSRS 的新手，我需要能够将多个报告分组到一个报告中。我搜索了很多，但没有找到太多。我目前有两份报告（以后还会有更多），用户需要能够单独查看/保存。用户还需要将这两个报告作为单个报告查看的选项。本质上只是一个简单的串联。最终，将有多个报告分组，用户将能够呈现所有报告以供在线查看或保存为单个 PDF。

我在主报告中尝试了两个子报告，但它导致很难诊断分页问题。我想知道这里是否有更直接的选择。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T02:09:32.073

将所有报表元素组合到一个报表中是可行的，但用户还需要能够将它们视为单独的报表。为避免同时维护一个主报告和多个单独的报告，您有以下几种选择：

1.  创建一个主报告并将各个报告插入为子报告。如果遇到分页问题，​​请检查报告页面高度和宽度与子报告容器高度和宽度。

2.  （如果您有 SQL Server 2008 R2 或更高版本）考虑将您的个人报告发布为一组报告部分。然后，您可以在主报告中重复使用这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:49:41.043

我也不喜欢子报表，它们在 Crystal 中运行良好，但在报表服务中并不是必需的。

你为什么不把报告合二为一呢？将每个报告中的所有 tablix/其他对象复制到新报告中。您可以非常轻松地选择全部并复制和粘贴，如果不共享，您只需设置参数、数据集和数据源。您可以在每个 tablix 之后设置分页符，或者使用矩形是一个很好的技巧，因为它们可以让您控制其属性中的分页符。

# objective-c - 如何将 NSString 分解为具有非显着空白抑制的单词？

> ID：12289645
> 
> 赞同：3
> 
> 时间：2012-09-05T20:56:44.560
> 
> 标签：objective-c, macos, parsing

我有几个 NSStrings，其格式类似于以下格式：

```
"Hello, how       are   you?" 
```

如何将字符串分解为单词数组？例如，对于上面的句子，我期望一个由以下组成的数组`"Hello,", "how", "are", "you?"`

通常我会使用函数将字符串分解成单词`[NSString componentsSeparatedByCharactersInSet: NSCharacterSet set]`

但是，这在这种情况下**不起作用**，因为单词之间的空格长度不等。注意我不会知道每个单词的大小和它们之间的空格。

我怎样才能做到这一点？我正在为 OSX 而不是 iOS 开发应用程序。

编辑：我的最终目标是检索句子中的*第二个*单词。如果有更简单的方法可以在不将字符串分解为数组的情况下执行此操作，请随时提出建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:05:32.073

尝试这个：

```
NSMutableArray *parts = [NSMutableArray arrayWithArray:[str componentsSeparatedByCharactersInSet:[NSCharacterSet  whitespaceCharacterSet]]];
[parts removeObjectIdenticalTo:@""];
NSString *res = [parts objectAtIndex:1]; // The second string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:26:02.103

如果你不想使用 CharacterSet 试试这个来删除多余的空格：

```
NSString* string = @"word1, word2          word3                        word4";
bool done = false;
do {
    NSString tempStr = [string stringByReplacingOccurrencesOfString:@"  " withString:@" "];
    done = [string isEqualToString:tempStr];
    string = tempStr;
} while (!done);
NSLog(@"%@", string); 
```

这将输出“word1，word2 word3 word4”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:23:57.020

好吧，您实际上可以编写一个循环来遍历字符并在第一个空白之后找到第一个非空白，然后进一步迭代以找到结束空白（或行尾）。可能比使用其他方法之一快大约 5 倍（对象分配少得多），并且可以在大约 10 行内完成。

# c - 如何使用 rand() 创建随机双精度数？

> ID：12289646
> 
> 赞同：0
> 
> 时间：2012-09-05T20:56:51.643
> 
> 标签：c, random, double

为了生成随机双打，有 drand48，但是

> 这些函数被 SVID 3 声明为过时的，它声明应该使用 rand(3) 代替。

如何用 drand48 构造我的随机双精度数？附带说明一下，随机浮动？

简单地连接两个`int`from`rand()`和 cast 可能会导致 `NaN`，这是不可接受的。我想避免只使用 32 个随机位作为双精度位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:07:18.140

不幸的是，在 linux 的手册页中引用了一个过时的标准。如果我没看错，SVID 3 于 1986 年发布，并且已经过时了。POSIX 具有这一系列功能，并且没有计划逐步淘汰它们。

但是，如果您正在使用它，请考虑使用`erand48`而不是`drand48`. 它的优点是您自己为其提供了种子状态。由于它是可重入的，如果您在线程环境中使用它（并以不同方式初始化线程的种子），它通常表现得更好，或者如果您需要它进行可重现的模拟，它是确定性的。

唯一的一点是你必须记住的是它只给你 48 位的伪随机性。通常`double`的算术是 52 位的，所以要小心不要使用最低的 4 位，它们不好。

# c# - 主从网格视图 asp.net C#

> ID：12289650
> 
> 赞同：0
> 
> 时间：2012-09-05T20:57:26.877
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio, master-detail

我正在尝试做这样的事情：

[主细节网格视图](http://csharpdotnetfreak.blogspot.com/2012/01/nested-gridview-inside-gridview-aspnet.html)

但是当我单击 GridView 中的显示详细信息时，在 cs 文件的这一行中给我错误：

```
gvRow.FindControl("GridView2").Visible = true; 
```

当我单击显示详细信息以查看 ID_Proba 为 = 到第一个表中的 ID 的其他表中的名称时，我正在尝试。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="id" DataSourceID="SqlDataSource1" 
    onselectedindexchanged="GridView1_SelectedIndexChanged">
    <Columns>
        <asp:BoundField 
        DataField="id" 
        HeaderText="id" 
        ReadOnly="True" 
        SortExpression="id" InsertVisible="False" />
        <asp:BoundField 
        DataField="name" 
        HeaderText="name" 
        SortExpression="name" />
        <asp:CommandField ShowSelectButton="True" 
              SelectText="Show Details"/>
    </Columns>
    <EmptyDataTemplate>
        <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="id" DataSourceID="SqlDataSource2" Visible="False">
            <Columns>
                <asp:BoundField DataField="id" 
                                HeaderText="id" 
                                SortExpression="id" InsertVisible="False" ReadOnly="True" />
                <asp:BoundField DataField="id_proba" 
                                HeaderText="id_proba" 
                                SortExpression="id_proba" />
                <asp:BoundField DataField="name" 
                                HeaderText="name" 
                                SortExpression="name" />
            </Columns>
        </asp:GridView>
    </EmptyDataTemplate>
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
    SelectCommand="SELECT * FROM [Proba1]"></asp:SqlDataSource>
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
    SelectCommand="SELECT * FROM [proba3] WHERE ([id_proba] = @id_proba)">
    <SelectParameters>
        <asp:Parameter Name="id_proba" Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource>
</form> 
```

这是cs文件：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    foreach (GridViewRow gvRow in GridView1.Rows)
    {
        gvRow.FindControl("GridView2").Visible = true;
    }
    SqlDataSource2.SelectParameters[0].DefaultValue = GridView1.SelectedDataKey[0].ToString();
    GridView1.SelectedRow.FindControl("GridView2").Visible = true;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:57:35.567

您需要将“GridView2”取出`EmptyDataTemplate`并将其放入`TemplateField`. 当您有数据时，`EmptyDataTemplate`根本不会创建，并且每行中也没有网格，因为此模板适用于整个网格。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="id" DataSourceID="SqlDataSource1" 
    onselectedindexchanged="GridView1_SelectedIndexChanged">
    <Columns>
        <asp:BoundField 
        DataField="id" 
        HeaderText="id" 
        ReadOnly="True" 
        SortExpression="id" InsertVisible="False" />
        <asp:BoundField 
        DataField="name" 
        HeaderText="name" 
        SortExpression="name" />
        <asp:CommandField ShowSelectButton="True" 
              SelectText="Show Details"/>
<asp:TemplateField>
    <ItemTemplate>
        <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="id" DataSourceID="SqlDataSource2" Visible="False">
            <Columns>
                <asp:BoundField DataField="id" 
                                HeaderText="id" 
                                SortExpression="id" InsertVisible="False" ReadOnly="True" />
                <asp:BoundField DataField="id_proba" 
                                HeaderText="id_proba" 
                                SortExpression="id_proba" />
                <asp:BoundField DataField="name" 
                                HeaderText="name" 
                                SortExpression="name" />
            </Columns>
        </asp:GridView>
    </ItemTemplate>
<asp:TemplateField>
</Columns>
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
    SelectCommand="SELECT * FROM [Proba1]"></asp:SqlDataSource>
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
    SelectCommand="SELECT * FROM [proba3] WHERE ([id_proba] = @id_proba)">
    <SelectParameters>
        <asp:Parameter Name="id_proba" Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource>
</form> 
```

# ruby - 用于#的未定义方法“ruby” （无方法错误）

> ID：12289652
> 
> 赞同：1
> 
> 时间：2012-09-05T20:57:33.123
> 
> 标签：ruby, bundler

刚刚提取了最新的代码，现在得到：

```
...my_app/Gemfile:2:in `evaluate': 
undefined method `ruby' for #<Bundler::Dsl:0x007fc17c3fc6c8> (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T21:53:28.093

`ruby`允许您指定项目应使用的 Ruby 版本的方法仅[在 Bundler 1.2 中添加](http://gembundler.com/v1.2/whats_new.html)。你有一个`Gemfile`使用这种新`ruby`方法的项目，但有一个旧版本的 Bundler。您只需要使用 Bundler 1.2

```
gem install bundler 
```

你应该很高兴。

# msbuild - 在构建/部署期间，如何绕过仅复制文件的 Nuget 包？

> ID：12289663
> 
> 赞同：0
> 
> 时间：2012-09-05T20:57:51.347
> 
> 标签：msbuild, twitter-bootstrap, less, nuget, nuget-package

## 背景

我有一个 MVC3 项目，我在其中添加了*Twitter.Bootstrap.Less* Nuget 包。

据我所知，所做的只是将相应的 JavaScript / LESS 文件复制到相应的目录中。

但是，当我现在通过我的构建/部署过程将它运行到我的开发服务器上时，MSBuild 不会将 /Content/less 文件夹作为部署包的一部分复制到我的生产服务器。

**我的构建服务器没有 Internet 连接，因此很遗憾，[在不将包提交到源代码管理](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages#Using_NuGet_without_committing_packages_to_source_control)的情况下使用 NuGet 不是一种选择。**

## 问题

如何让 MSBuild 部署这些文件？还是我需要复制文件，卸载 nuget 包，然后手动将它们复制回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:57:26.897

您可以设置自己的内部 NuGet 包源。这将在您的网络内部，意味着构建服务器可以在没有 Internet 连接的情况下获取 NuGet 包。

例如，在服务器上，将您需要的包复制到一个文件夹，并将包源设置到该文件夹​​以供构建服务器使用。

看：

[http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)

# mysql - “mysqld”根访问被拒绝

> ID：12289667
> 
> 赞同：0
> 
> 时间：2012-09-05T20:58:22.853
> 
> 标签：mysql

我的 root 用户具有以下权限：

```
mysql> SHOW GRANTS FOR root@'%';
+--------------------------------------------------------------------------------------------------------------+
| Grants for root@%                                                                                            |
+--------------------------------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY PASSWORD '*81F5E21E35407D884A6CD4A731AEBFB6AF209E1B' |
| GRANT ALL PRIVILEGES ON `bedrock`.* TO 'root'@'%'                                                            |
+--------------------------------------------------------------------------------------------------------------+ 
```

当我尝试执行以下命令时，我收到以下错误消息：

```
mysqladmin root -pSOMEPASSWORD
mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'root'@'localhost' (using password: YES)' 
```

虽然我能够正常执行 mysql 命令，但我无法对 mysqld 执行此操作。有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:29:55.003

1.  您的数据库中可能有一个没有密码的用户。 [以安全模式启动 mysql，](http://24x7servermanagement.com/blog/?p=44)然后检查以确保您的用户都没有空密码字段。如果找到，请添加密码或删除用户。
2.  可能是密码不正确，需要修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T18:11:12.663

对于知识库的改进：问题出在权限和命令上。它在调用时`bin/mysqld_safe --user=mysql`有效`mysqladmin root -pSOMEPASSWORD`。请注意，用户`mysql`已经通过 chown -R 和 chgrp -R 获得了权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T08:09:37.127

试试这个：

```
$ mysqladmin -u root -p password yourChosenPassword
Enter password: 
```

并在提示符处重新输入您选择的相同密码，然后您将能够从命令行调用 mysqladmin：

```
$ mysqladmin -uroot -pyourChosenPassword [OPTIONS] command command.... 
```

# maps - 设置方向时缩放不起作用谷歌地图 v3

> ID：12289672
> 
> 赞同：1
> 
> 时间：2012-09-05T20:58:40.453
> 
> 标签：maps, zooming, directions

希望有人可以帮助我，我试图用缩放和居中显示两个方向点，所以我可以只显示 2 个点而不是所有地图！看来变焦不起作用。

这是我的代码

```
 var map;
        function initialize(){                  
                  var mapOptions = {
                  zoom: 14,
                  disableDefaultUI: true,
                  mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

                var request = {
                        origin:"Mexico",
                        destination:"Montreal",
                        travelMode: google.maps.TravelMode.DRIVING
                };

                var directionsService = new google.maps.DirectionsService();
                var directionsDisplay = new google.maps.DirectionsRenderer();

                // Indicamos dónde esta el mapa para renderizarnos
                directionsDisplay.setMap(map);

                directionsService.route(request, function(result, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                      directionsDisplay.setDirections(result);
                    }
                  }); 
        }

        google.maps.event.addDomListener(window, 'load', initialize); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:59:26.533

要解决您的问题更改：

```
disableDefaultUI: true, 
```

至

```
disableDefaultUI: false, 
```

来自 [Google Maps API]：[https ://developers.google.com/maps/documentation/javascript/controls#DisablingDefaults](https://developers.google.com/maps/documentation/javascript/controls#DisablingDefaults)

> 您可能希望关闭 API 的默认 UI 设置。为此，请将地图的 disableDefaultUI 属性（在地图选项对象内）设置为 true。**此属性会禁用来自 Google Maps API 的任何自动 UI 行为。**

如果您仍想禁用 UI 元素，您可能应该单独执行它们。

# windows - 渲染透明窗口

> ID：12289673
> 
> 赞同：2
> 
> 时间：2012-09-05T20:58:44.660
> 
> 标签：windows, winapi, directx, directx-9

我知道渲染透明窗口的唯一方法是调用 UpdateLayeredWindows，以防我需要渲染 D3D9 Render 目标的结果。
我必须通过调用 GetRenderTargetData 将渲染目标数据读入系统内存，然后我必须通过调用 UpdateLayeredWindow 在屏幕上渲染它。

这里[http://msdn.microsoft.com/en-us/library/windows/desktop/ee890072(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee890072(v=vs.85).aspx) 描述了如何通过“D3D9Ex Flip Mode Present to DWM”优化渲染。

渲染顶级透明窗口是否有某种类似的优化？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-29T09:39:43.743

我在评论中找到了答案：

这篇[文章](http://www.codeproject.com/Articles/17727/Unmanaged-Vista-Power)似乎做了你想做的事。感谢用户[arx](https://stackoverflow.com/users/292432/arx)

# jquery - 带有 jQ uery 验证的表单：IE8 上的 this.appendChild(a) 错误

> ID：12289675
> 
> 赞同：3
> 
> 时间：2012-09-05T20:58:47.907
> 
> 标签：jquery, internet-explorer-8, validation

好的，我希望是关于这个表格的最后一个问题。它功能齐全，除了 IE8 上的一个错误似乎没有在任何地方记录（在这种情况下，我可以找到......）。

如果我在 IE9 的 IE8 模式下运行此表单，我会在开发工具中看到以下内容

`SCRIPT65535: Unexpected call to method or property access. jquery.min.js, line 2 character 65772`

对应`this.appendChild(a)`于 jquery.min.js

但是，如果我忽略该错误，验证在 IE8 中仍然有效。在 IE9、Chrome、Firefox 中完全没有问题。

我的验证码的功能片段...

```
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>

<style>

.incomplete {
    border: 1px solid red;
    }

</style>

<script type="text/javascript">
    //form validation start
   $(document).ready(function() {

   $("#form").validate({
        errorLabelContainer: "input",
        wrapper: ".form",
        keyup: false,
        onfocusout: false,
        onclick: false,
        onchange: false,
        errorElement: "input",
        errorClass: "incomplete",
        rules: {
            organization: {
                defaultInvalid: true,
                required: true,
                minlength: 2
                },
            firstname: {
                defaultInvalid: true,
                required: true,
                minlength: 2
                },
            lastname: {
                defaultInvalid: true,
                required: true,
                minlength: 2
                },
            email: {
                defaultInvalid: true,
                required: true,
                email: true
                },
            phone: {
                defaultInvalid: true,
                required: true,
                minlength: 10
                },
        }
    });
   }); 
</script>

</head>
<body>

<div id="border">
    <div id="form_title">REQUEST INFO</div>
    <form id="form" name="form_container" action="#">
        <!-- fields -->
        <input id="organization" type="text" name="organization" />
        <input id="firstname" type="text" name="firstname" />
        <input id="lastname" type="text"  name="lastname" />
        <input id="email" type="text" name="email" />
        <input id="phone" type="text" name="phone" />
        <!-- submit button -->
        <input id="button" name="submit" class="button" type="submit" value="submit" /> 
    </form>
</div>

</body>
</html> 
```

没有你们的帮助，我目前无法完成这项工作，所以谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:03:12.607

不确定这是否会有所帮助，但您有一个小的语法错误：

```
phone: {
            defaultInvalid: true,
            required: true,
            minlength: 10
            }, 
```

注意额外的逗号。它是列表中的最后一个，不需要它。有可能`appendChild`在这个逗号之后使用了一个空白规则，这就是错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:13:45.513

好的，我永远无法真正深入了解这一点，但我发现了一些在 IE8 中没有错误的东西。

主要区别在于`errorLabelContainer`更改为表单的类而不是单个输入`errorElement`并被删除（我意识到不再需要它）。

```
wrapper: ".formwrapper",
keyup: false,
onfocusout: false,
onclick: false,
onchange: false,
errorLabelContainer: ".form",
errorClass: "incomplete", 
```

# php - 我可以使用 PDO 运行多个 SQL 查询并检索每个语句受影响的行数吗？

> ID：12289679
> 
> 赞同：3
> 
> 时间：2012-09-05T20:59:00.720
> 
> 标签：php, pdo

这是我到目前为止所得到的：

```
/**
 * @param PDO $db
 * @param string $file
 */
function run_sql_file($db, $file) {
    $sql = file_get_contents($file);
    try {
        $affected = $db->exec($sql);
        println("$affected row(s) affected");
    } catch(PDOException $e) {
        exitmsg($e->getMessage());
    }
} 
```

它似乎确实运行了所有查询，但它总是让我返回“0 行受影响”。有没有办法让每个语句受影响的行数？最好与相关查询以及任何错误消息和警告一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:02:03.720

我遇到了同样的问题，例如我正在从一个文件中读取一系列 mysql drop table sql，我想将它们执行到单个 PDO->exec() 中：

```
 $dbh = new PDO('mysql:host=test;dbname=db1', 'user', 'pass');
  try {

    $dbh->exec('drop table test_table1;drop table test_table2;');
  }
catch(PDOException $e)
{
    echo $e->getMessage();
    die();
} 
```

如果第一个删除 sql 成功，那么即使第二个失败（该表名不再存在）也不会引发异常。`PDO_MYSQLND;`似乎只有当第一个失败然后引发 PDO 异常时，您才能检查所有 sql 是否已执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:05:04.550

尝试在执行后设置 count 变量：

$db->e​​xec($sql);

$affected = $db->rowCount();

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T21:31:42.317

假设您没有任何会炸毁爆炸语句的疯狂 SQL...

```
/**
 * @param PDO $db
 * @param string $file
 */
function run_sql_file($db, $file) {
    $sql = file_get_contents($file);
    $sql_lines = explode(';',$sql);
    try {
        foreach($sql_lines as $line) {
            $affected += $db->exec($line);
        }
        println("$affected row(s) affected");
    } catch(PDOException $e) {
        exitmsg($e->getMessage());
    }
} 
```

# android - Android 扩展线性布局和膨胀

> ID：12289681
> 
> 赞同：2
> 
> 时间：2012-09-05T20:59:05.753
> 
> 标签：android, android-layout, android-inflate

我正在扩展一个包含 2 个 TextView 的线性布局。TextViews 是从我创建的模板布局中膨胀而来的。我的问题是我设置的背景覆盖了整个原始内容，而不是仅包含文本的部分。但是，当我不是以动态方式设置相同的布局时，它就可以正常工作并且剪辑得很好。

```
 final LayoutInflater inflater = LayoutInflater.from(this.getContext());

    //The title.
    title = (TextView)inflater.inflate(R.layout.text_view_day_title, null);
    title.setText("bla bla");

    //The info.
    info = (TextView)inflater.inflate(R.layout.text_view_day_info, null);
    info.setText("bla bla 2");

    this.addView(title);
    this.addView(info); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:50:59.217

*   在您的 xml 中进行线性布局并在其上添加视图。
*   确保膨胀的 xml 没有背景背景，并且它们之间有边距以显示主要 xml 布局的背景。

# python - 在 Python 中删除字符串中最后一个破折号后的所有字符，并测试是否为数字？

> ID：12289686
> 
> 赞同：1
> 
> 时间：2012-09-05T20:59:21.000
> 
> 标签：python, string, numeric

如果我有一个字符串：

```
string = 'this-is-a-string-125' 
```

如何获取破折号后的最后一组字符并检查它们是否为数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T21:00:47.533

如果你想验证它们实际上是数字，你可以做

```
x.rsplit('-', 1)[1].isdigit() 
```

“数字”是一个更通用的标准，可以用不同的方式解释。例如“12.87”在某种意义上是数字，但并非所有字符都是数字。

您可以`int(x.rsplit('-', 1)[1])`查看字符串是否可以解释为整数，或者`float(x.rsplit('-', 1)[1])`查看它是否可以解释为浮点数。（如果字符串不是适当意义上的数字，这些将引发 ValueError ，因此您可以捕获该异常并在它不是数字时执行您需要做的任何事情。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T21:01:15.137

```
s = 'this-is-a-string-125'.split('-')[-1].isdigit() 
```

我们用破折号 ( ) 分割字符串，`'-'`它给出了一个子字符串列表（参见 参考资料[`split()`](http://docs.python.org/library/stdtypes.html#str.split)）。然后我们取最后一个 ( `[-1]`) 并验证该字符串是否仅包含数字 ( [`isdigit()`](http://docs.python.org/library/stdtypes.html#str.isdigit))：

```
>>> 'this-is-a-string-125'.split('-')
['this', 'is', 'a', 'string', '125']
>>> 'this-is-a-string-125'.split('-')[-1]
'125'
>>> 'this-is-a-string-125'.split('-')[-1].isdigit()
True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T21:27:47.910

没有人知道[partition](http://docs.python.org/library/stdtypes.html#str.partition)或[rpartition](http://docs.python.org/library/stdtypes.html#str.rpartition)：

```
text.rpartition("-")[-1].isdigit() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T21:03:17.910

怎么样：

```
str.split('-')[-1].isdigit() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T21:21:34.760

似乎一个简单的正则表达式可以同时进行剥离和检查：

```
>>> import re
>>> s = 'this-is-a-string-125'
>>> m = re.search(r'-(\d+)$', s)
>>> m.group(1)
'125'
>>>  s[:m.start()] # gives you what was stripped away.
'this-is-a-string' 
```

匹配对象`m`将是`None`如果字符串缺少一个破折号字符后跟一个或多个数字的末尾。

# javascript - 使用 RequireJS 在 JavaScript 中实现 AMD

> ID：12289691
> 
> 赞同：5
> 
> 时间：2012-09-05T20:59:37.177
> 
> 标签：javascript, jquery, requirejs, amd, revealing-module-pattern

我对 RequireJS 完全陌生，所以我仍在努力寻找解决方法。我有一个运行良好的项目，然后我决定使用 RequireJS，所以我把它搞砸了 :)

顺便说一句，我有几个关于 RequireJS 以及它如何计算一切的问题。我在脚本文件夹中有文件层次结构：

![在此处输入图像描述](../Images/ae44a4a80b3126bf2b96d2120aec3204.png)

我的`_Layout.cshtml`文件中有以下行：

```
<script data-main="@Url.Content("~/Scripts/bootstrap.js")" src="@Url.Content("~/Scripts/require-2.0.6.js")" type="text/javascript"></script> 
```

这是我的 bootstrap.js 文件：

```
require.config({
    shim: {
        'jQuery': {
            exports: 'jQuery'
        },
        'Knockout': {
            exports: 'ko'
        },
        'Sammy': {
            exports: 'Sammy'
        },
        'MD': {
            exports: 'MD'
        }
    },
    paths: {
        'jQuery': 'jquery-1.8.1.min.js',
        'Knockout': 'knockout-2.1.0.js',
        'Sammy': 'sammy/sammy.js',
        'MD': 'metro/md.core.js',
        'pubsub': 'utils/jquery.pubsub.js',
        'waitHandle': 'utils/bsynchro.jquery.utils.js',
        'viewModelBase': 'app/metro.core.js',
        'bindingHandlers': 'app/bindingHandlers.js',
        'groupingViewModel': 'app/grouping-page.js',
        'pagingViewModel': 'app/paging-page.js'
    }
});

require(['viewModelBase', 'bindingHandlers', 'Knockout', 'jQuery', 'waitHandle', 'MD'], function (ViewModelBase, BindingHandlers, ko, $, waitHandle, MD) {
    BindingHandlers.init();

    $(window).resize(function () {
        waitHandle.waitForFinalEvent(function () {
            MD.UI.recalculateAll();
        }, 500, "WINDOW_RESIZING");
    });

    var viewModelBase = Object.create(ViewModelBase);
    ko.applyBindings(viewModelBase);
    viewModelBase.initialize();
});

    require(['viewModelBase', 'bindingHandlers', 'Knockout'], function (ViewModelBase, BindingHandlers, ko) {
        BindingHandlers.init();

        var viewModelBase = new ViewModelBase();
        ko.applyBindings(viewModelBase);
        viewModelBase.initialize();
    }); 
```

然后我使用该`define`函数实现了我的模块。一个例子是 pubsub 模块：

```
define(['jQuery'], function ($) {
    var 
        publish = function(eventName) {
            //implementation
        },
        subscribe = function(eventName, fn) {
            //implementation
        }
    return {
        publish: publish,
        subscribe: subscribe
    }
}); 
```

我基本上对我的所有 javascript 文件都做了同样的事情。请注意，包含 pubsub 模块的实际文件`jquery.pubsub.js`位于`/Scripts/utils`文件夹内。其他模块也是如此。

**更新：**

好的，我现在更新了我的引导文件，因为我*想*我了解什么是 shim 以及为什么我应该使用它。但它仍然对我不起作用，尽管我还宣布了所有我认为会导致我无法正确使用它们的路径。问题是它甚至没有进入`require`引导文件中的回调，所以我想我在配置或定义模块的方式上仍然存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:06:36.877

好吧，首先，如果你要使用一个非 amd 库，比如 jQuery，需要将 jQuery 函数传递给回调，你需要在你的 require 配置中指定一个带有导出的 shim，如下所示：

```
require.config({
    shim: {
        jQuery: {
            exports: '$'
        }
    },
    paths: {
        jQuery: 'jquery-1.8.1.min.js',
    }
}); 
```

除此之外，我不确定我是否了解您的问题到底是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:35:24.237

如果您使用的是 ASP.NET MVC，请查看[RequireJS for .NET](http://www.stefanprodan.eu/2012/09/intro-requirejs-for-asp-net-mvc/)

RequireJS for .NET 项目将 RequireJS 框架与服务器端的 ASP.NET MVC 使用 xml 配置文件、操作过滤器属性、用于继承的基本控制器和帮助程序类顺利集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:01:24.453

我不完全明白问题是什么。但是，如果它与要使用 require.js 加载的 JS 库有关，那么这个引导文件对我有用：

```
require.config({
    paths: {
        "jquery": "/scripts/jquery-1.8.2",
        "sammy": "/scripts/sammy-0.7.1"
    },
    shim: {
        "sammy": {
            deps: ["jquery"],
            exports: "Sammy"
        }
    }
});

require(["jquery", "sammy"], function ($) {
    $(document).ready(function () {
        alert("DOM ready");
    });
}); 
```

请注意，路径中没有“.js”。

顺便说一句，如果您使用 MVC 4，则不再需要“href”和“src”中的@Url.Content。

# ruby - PG gem以随机顺序返回列

> ID：12289696
> 
> 赞同：1
> 
> 时间：2012-09-05T21:00:00.453
> 
> 标签：ruby, postgresql, pg

最新版本的“pg”gem 以随机顺序返回 db 查询列的结果是否正常？我希望'pg' gem 的行为方式与 mysql2 gem 相同，在通过命令行直接查询数据库时按照显示的顺序返回数据。也许我应该使用更好的宝石。下面我的结果示例是使用相同查询“select * from books”的结果

第一次执行：

```
"The Shining","9","7808","4156"
"Dune","15","4513","1866"
"2001: A Space Odyssey","15","4267","2001"
"The Cat in the Hat","2","1608","1809"
"Bartholomew and the Oobleck","2","1590","1809" 
```

第二次执行：

```
"4156","The Shining","9","7808"
"1866","Dune","15","4513"
"2001","2001: A Space Odyssey","15","4267"
"1809","The Cat in the Hat","2","1608"
"1809","Bartholomew and the Oobleck","2","1590" 
```

第三次执行：

```
"9","The Shining","7808","4156"
"15","Dune","4513","1866"
"15","2001: A Space Odyssey","4267","2001"
"2","The Cat in the Hat","1608","1809"
"2","Bartholomew and the Oobleck","1590","1809" 
```

返回结果的代码：

```
confrom = PG::Connection.new(:user => <myuser>, :password => <mypw>, :port => 5432, :host => <myhost>, :dbname => 'booktown')
results = confrom.exec("select * from books")
results.each do |row|
  row.each_value do |x|
    puts x
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:39:26.553

我猜你正在使用 Ruby 1.8.X，其中哈希没有任何定义的顺序。我用 Ruby 1.9.3 尝试了类似的代码，`pg`每次都以相同的顺序出现。

在这里：

```
results.each do |row|
  #...
end 
```

这`row`将是一个简单的`Hash`. 因此，当您使用 Ruby 时`row.each_value`，您不能依赖`x`Ruby 1.8 中以任何特定顺序出现的值；在 1.9 中，您应该`x`按插入顺序获取值。

但无论如何，所有这些都无关紧要：

1.  您应该避免`select * ...`，除非您在数据库中手动浏览；您应该始终这样说`select c1, c2, ...`，以便您确切地知道您从数据库中获得了什么以及所有内容将以什么顺序出现。如果有人添加了列或列更改了位置，那么您的所有代码都会中断。
2.  您有一个`Hash`输入，`row`因此您可以按名称访问结果，这比处理职位更容易且更不容易出错。

# python - 通过 Selenium send.keys 而不是字符串传递变量

> ID：12289700
> 
> 赞同：7
> 
> 时间：2012-09-05T21:00:22.823
> 
> 标签：python, selenium

我正在尝试使用 Selenium 进行一些应用程序测试，并且我需要它在填写表单而不是硬编码字符串时插入一个变量。IE：

这行得通 `name_element.send_keys("John Doe")`
，但这不行 `name_element.send_keys(username)`

有谁知道我怎么能做到这一点？相当大的 Python 菜鸟，但广泛使用 Google 来尝试找出答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:13:18.560

至少在一种情况下，我发现我无法将变量传递给 send_keys ，除非我首先传递一个常规的空字符串：

```
inputElement.send_keys("")
inputElement.send_keys(my_text_variable) 
```

它也可以用作列表：

`inputElement.send_keys("", my_text_variable)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-05T20:25:48.663

尝试这个。

```
用户名 = r'John Doe'

name_element.send_keys（用户名）

```

在我的测试中，我能够在不强制转换的情况下通过字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:42:03.637

你确定你的变量是一个字符串吗？

格雷格的回答将确保这一点。如果你不完全确定，你可以试试

```
name_element.send_keys(str(username)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T22:18:05.400

我不明白...为什么不直接设置 username="John Doe" 我很难弄清楚你想要做什么

```
username ="John Doe"

def some_function():
   name_element.send_keys(username) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-10T21:16:28.553

我认为用户名可能是您正在使用的 python 库中的一个变量。尝试将其称为 Username1 之类的其他名称，看看它是否有效？

# c# - 在后面的代码中更改 GridView 的 DataItem - 可能吗？

> ID：12289706
> 
> 赞同：0
> 
> 时间：2012-09-05T21:00:48.580
> 
> 标签：c#, asp.net, html

如何将 GridView 中的 DataItem“AmountCollected”更改为代码隐藏中的其他内容。我想根据某些条件将 DataItem 更改为 Balance，我想知道它是否可以完成？！这是使用 VS 2005 使用 c# 和 HTML。

提前致谢！！

```
<asp:TemplateField ItemStyle-Width="70" ItemStyle-HorizontalAlign="Center">
<ItemTemplate>
     $<asp:Label ID="lblTotalCollected" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"AmountCollected") %>'></asp:Label>
</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:09:40.823

`RowDataBound`为`GridView`. _ 该事件将为您的数据源中的每个项目运行，您可以根据您的条件修改每一行。

```
public void myGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType != DataControlRowType.DataRow)
    {
        return;
    }

    Label myLabel = e.Row.FindControl("lblTotalCollected") as Label;
    MyClass myDataItem = e.Row.DataItem as MyClass;
    if(...)
    {
        myLabel.Text = myDataItem.Balance;
    }
    else
    {
        myLabel.Text = myDataItem.AmountCollected;
    }
} 
```

# php - 致命错误：无法取消设置字符串偏移错误？

> ID：12289714
> 
> 赞同：19
> 
> 时间：2012-09-05T21:01:19.360
> 
> 标签：php, multidimensional-array, unset

不知道为什么会这样：基本上，我有一个包含以下数组的数组，请参阅`var_dump`：

```
array(2) { 
  [0]=> array(1) { 
    [0]=> string(3) "ivr" 
  } 
  [1]=> array(1) { 
    [0]=> string(9) "ivr_dests" 
  } 
} 
```

显然，这些数据有点多余，但它是使用 xpath 获取值时返回的数据。所以我正在做一个`foreach`循环遍历第一个`array()`并在第一个数组中分配它的嵌套数组值。

基本上，它应该返回这个：

```
array(2) {
  [0]=> string(3) "ivr"
  [1]=> string(9) "ivr_dests"
} 
```

所以这是我设置的：

```
foreach($arr as $key => $arr2){
    $arr2[$key] = $arr2[$key][0];
    unset($arr2[$key][0]); //This returns Fatal error: Cannot unset string offsets
//if I comment out the unset(), $arr[$key] returns the same value as it did (multidim array)
};

        //I tried this too:
$i=0;
foreach($arr as $arr2){
  $arr2[$i] = $arr2[$i][0];
  $i++;
} 
```

任何想法我做错了什么？我应该以另一种方式解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T21:13:58.757

您不需要未设置，而是使用内部数组的值覆盖外部参数，而不是整个数组。

```
$a1 = array("ivr");
$a2 = array("ivr2");

$a3 = array($a1, $a2);

foreach($a3 as $key => $value){
    $a3[$key] = $a3[$key][0];
    //unset($arr2[$key][0]);
};

var_dump($a3); 
```

我认为您对 foreach 的工作方式感到困惑。

```
foreach($array as $key => $value)
{
  echo $key;
  echo $value;
} 
```

将显示数组中每个键/值对的键和值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-22T17:22:45.270

我在稍微不同的情况下遇到了这个错误，这可能很有用。

```
unset($search['param']['complete']) 
```

当 $search['param'] 仍然是**string**而不是**array**时，这会引发相同的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T21:06:34.507

我相信你有`foreach`错误的语法......它应该是`$key => $value`你拥有的地方`$key => $arr2`。所以当你有你在嵌套数组`$arr2[$key]`中寻找元素时。由 引用，它可以是字符串（对于关联数组）或整数（对于非关联数组）。也可以被.`$key``$arr2``$arr2``$key``$arr2``$arr[$key]`

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T10:21:20.357

错误在代码中。
分配后

```
$arr2[$key] = $arr2[$key][0]; 
```

`$arr2[$key]`成为字符串`"ivr"`并且`$arr2[$key][0]`是字符串的第一个字符并且不能取消设置

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-27T11:01:30.520

当您尝试取消设置字符串值时会发生这种情况 - 在以下情况下，您访问数组中的第一个元素是字符串并尝试取消设置它会导致此错误

```
$a=array("hello", "there");
unset($a[0][0]); 
```

这导致：

```
Fatal error:  Cannot unset string offsets in ... on line ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-23T05:12:08.477

是的，仅使用数组键来取消设置，而不是它的值。例子：

`$fruits = ['a' => 'apple', 'b' => 'orange', 'c' => 'banana'];`

如果您尝试`unset($fruits['a]['apple'];`，您将面临此错误。正确使用`unset($fruits['a];`

# python - 如何在python中以随机间隔打印出单个字符？

> ID：12289716
> 
> 赞同：1
> 
> 时间：2012-09-05T21:01:26.737
> 
> 标签：python, string, sleep

> **可能重复：**
> [如何在一行上一次打印一个字符？](https://stackoverflow.com/questions/9246076/how-to-print-one-character-at-a-time-on-one-line)

我正在尝试以很小的随机间隔打印出字符，以使其看起来像是“键入”到屏幕上的。

```
large_string = """line1
                  line2
                  line3
               """
for i in range (0, len(large_string)):
    sys.stdout.write(large_string[i])
    sleep(random.random()) 
```

我的问题是它打印稍等，然后打印出整行而不是逐个字符打印出来。我在这里想念什么？

# java - RC4加密java

> ID：12289717
> 
> 赞同：6
> 
> 时间：2012-09-05T21:01:29.330
> 
> 标签：java, encryption, rc4-cipher

您好，我正在尝试在 Java 中实现 RC4 算法。我发现这段[代码](http://code.google.com/p/a9cipher/source/browse/src/com/a9development/a9cipher/RC4.java?r=1b5bdf2a70b3ef8cc9464f8a31332a2ec9f54e7a)作为一个示例，可以帮助我理解这个想法：

```
public class RC4 {
  private int[] S = new int[256];
  private int[] T = new int[256];
  private int keylen;

  public RC4(byte[] key) throws Exception {
    if (key.length < 1 || key.length > 256) {
      throw new Exception("key must be between 1 and 256 bytes");
    } else {
      keylen = key.length;
      for (int i = 0; i < 256; i++) {
        S[i] = i;
        T[i] = key[i % keylen];
      }
      int j = 0;
      for (int i = 0; i < 256; i++) {
        j = (j + S[i] + T[i]) % 256;
        S[i] ^= S[j];
        S[j] ^= S[i];
        S[i] ^= S[j];
      }
    }
  }

  public int[] encrypt(int[] plaintext) {
    int[] ciphertext = new int[plaintext.length];
    int i = 0, j = 0, k, t;
    for (int counter = 0; counter < plaintext.length; counter++) {
      i = (i + 1) % 256;
      j = (j + S[i]) % 256;
      S[i] ^= S[j];
      S[j] ^= S[i];
      S[i] ^= S[j];
      t = (S[i] + S[j]) % 256;
      k = S[t];
      ciphertext[counter] = plaintext[counter] ^ k;
    }
    return ciphertext;
  }

  public int[] decrypt(int[] ciphertext) {
    return encrypt(ciphertext);
  }
} 
```

我有几个问题：

1.  为什么`int`在上面的代码中纯文本是一个数组？

2.  当我测试这段代码时，我得到了奇怪的结果，有人可以向我解释一下吗？这是我要测试的代码：

    ```
    public class RC4_Main {

        public static void main(String args[]) throws Exception {
            String keyword = "hello";
            byte[] keytest = keyword.getBytes(); //convert keyword to byte

            int[] text = {1, 2, 3, 4, 5}; // text as 12345

            RC4 rc4 = new RC4(keytest);

            System.out.print("\noriginal text: ");
            for (int i = 0; i < text.length; i++) {          
                System.out.print(text[i]);          
            }    

            int[] cipher = rc4.encrypt(text); //encryption      
            System.out.print("\ncipher: ");
            for (int i = 0; i < cipher.length; i++) {          
                System.out.print(cipher[i]);          
            }    

            int[] backtext = rc4.decrypt(cipher); //decryption
            System.out.print("\nback to text: ");
            for (int i = 0; i < backtext.length; i++) {          
                System.out.print(backtext[i]);            
            } 
            System.out.println();
        }
    } 
    ```

结果如下：（原文和回文不一样）为什么？？？

```
original text: 12345
cipher: 1483188254174
back to text: 391501310217 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T22:53:48.707

有几点需要注意：

*   当您需要无符号字节（例如用于索引）时，Java 不是很容易使用；
*   如果您在`S`and中创建一个状态`T`，您应该真正注意到这些值发生了变化，当您*使用相同的实例*进行解密时，您会采用用于加密的状态；
*   上面的代码在内存方面不是很有效，你可以很容易地重写它来获取字节数组；
*   要使用字符串，在将参数重构为 之后`byte[]`，您首先需要先使用[字符编码](/questions/tagged/character-encoding "显示标记为“字符编码”的问题")，例如使用[`String.getBytes(Charset charset)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes(java.nio.charset.Charset));

为了让生活更轻松，并在深夜黑客攻击中获得一些乐趣，我改进了您的代码并使用零字节数组针对[rfc6229中的单个向量对其进行了测试。](https://www.rfc-editor.org/rfc/rfc6229)

更新：正如 micahk 在下面指出的那样，使用的邪恶 C XOR 交换阻止了此代码加密 Java 中输入的最后一个字节。使用常规的旧掉期可以修复它。

**警告**：下面的代码应被视为编码练习。请使用经过严格审查的库而不是下面的代码片段在您的应用程序中执行 RC4（或 Ron 的代码 4、ARC4 等）。这意味着`Cipher.getInstance("RC4");`在 Bouncy Castle 中使用 ARC4 类。

```
public class RC4 {
    private final byte[] S = new byte[256];
    private final byte[] T = new byte[256];
    private final int keylen;

    public RC4(final byte[] key) {
        if (key.length < 1 || key.length > 256) {
            throw new IllegalArgumentException(
                    "key must be between 1 and 256 bytes");
        } else {
            keylen = key.length;
            for (int i = 0; i < 256; i++) {
                S[i] = (byte) i;
                T[i] = key[i % keylen];
            }
            int j = 0;
            byte tmp;
            for (int i = 0; i < 256; i++) {
                j = (j + S[i] + T[i]) & 0xFF;
                tmp = S[j];
                S[j] = S[i];
                S[i] = tmp;
            }
        }
    }

    public byte[] encrypt(final byte[] plaintext) {
        final byte[] ciphertext = new byte[plaintext.length];
        int i = 0, j = 0, k, t;
        byte tmp;
        for (int counter = 0; counter < plaintext.length; counter++) {
            i = (i + 1) & 0xFF;
            j = (j + S[i]) & 0xFF;
            tmp = S[j];
            S[j] = S[i];
            S[i] = tmp;
            t = (S[i] + S[j]) & 0xFF;
            k = S[t];
            ciphertext[counter] = (byte) (plaintext[counter] ^ k);
        }
        return ciphertext;
    }

    public byte[] decrypt(final byte[] ciphertext) {
        return encrypt(ciphertext);
    }
} 
```

快乐编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T21:14:12.923

你的整数数组`S`并`T`没有被构造。因此`NullPointerException`，一旦您尝试使用它们，您就会得到一个。

查看其余代码，我猜它们应该是 256 项数组：

```
private int[] S = new int[256];
private int[] T = new int[256]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-27T02:29:44.637

由于使用了 xor-swap 技术，Java 代码有一个错误：

```
 S[i] ^= S[j];
        S[j] ^= S[i];
        S[i] ^= S[j]; 
```

取而代之的是，您需要使用如下所示的临时变量。我没有深入研究为什么 xor 交换的结果不像预期的那样，但是我遇到了解密错误，通过简单地进行直接交换就可以解决。我怀疑这是为了执行 xor 操作而发生的从 byte 到 int 的隐式转换的微妙副作用。

```
public class RC4 {
    private final byte[] S = new byte[256];
    private final byte[] T = new byte[256];
    private final int keylen;

    public RC4(final byte[] key) {
        if (key.length < 1 || key.length > 256) {
            throw new IllegalArgumentException(
                    "key must be between 1 and 256 bytes");
        } else {
            keylen = key.length;
            for (int i = 0; i < 256; i++) {
                S[i] = (byte) i;
                T[i] = key[i % keylen];
            }
            int j = 0;
            for (int i = 0; i < 256; i++) {
                j = (j + S[i] + T[i]) & 0xFF;
                byte temp = S[i];
                S[i] = S[j];
                S[j] = temp;
            }
        }
    }

    public byte[] encrypt(final byte[] plaintext) {
        final byte[] ciphertext = new byte[plaintext.length];
        int i = 0, j = 0, k, t;
        for (int counter = 0; counter < plaintext.length; counter++) {
            i = (i + 1) & 0xFF;
            j = (j + S[i]) & 0xFF;
            byte temp = S[i];
            S[i] = S[j];
            S[j] = temp;
            t = (S[i] + S[j]) & 0xFF;
            k = S[t];
            ciphertext[counter] = (byte) (plaintext[counter] ^ k);
        }
        return ciphertext;
    }

    public byte[] decrypt(final byte[] ciphertext) {
        return encrypt(ciphertext);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T21:18:56.403

1）int数组：可能是因为Java不支持无符号字节。

2) 空异常：我数第 12 行是这一行：`S[i] = i;`看起来 S 数组在使用之前没有被构造。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-19T19:03:40.537

（我知道这是一个旧线程，但也许我的回答可以帮助谁正在阅读它）

问题不在于 RC4 代码，而在于您如何使用它。您必须了解的是，每次调用 encript 方法时，都会修改 S 数组以生成伪随机密钥。

在此代码中，您在对同一 RC4 类实例进行加密后使用 decript 方法。但是 RC4 类在构造函数中创建了密钥，因此当您执行 decript 方法时，密钥不是最近创建的，因为它已被先前的 encript 修改。而不是这段代码：

```
int[] cipher = rc4.encrypt(text); //encryption      
System.out.print("\ncipher: ");
for (int i = 0; i < cipher.length; i++) {          
    System.out.print(cipher[i]);          
}    

int[] backtext = rc4.decrypt(cipher); //decryption
System.out.print("\nback to text: ");
for (int i = 0; i < backtext.length; i++) {          
    System.out.print(backtext[i]);            
} 
```

在 decript 之前使用 rc4 新实例：

```
int[] cipher = rc4.encrypt(text); //encryption      
System.out.print("\ncipher: ");
for (int i = 0; i < cipher.length; i++) {          
    System.out.print(cipher[i]);          
}    

rc4 = new RC4(keytest);
int[] backtext = rc4.decrypt(cipher); //decryption
System.out.print("\nback to text: ");
for (int i = 0; i < backtext.length; i++) {          
    System.out.print(backtext[i]);            
} 
```

所以 decript 方法将有一个干净的 S 数组，并且它能够以与之前的 encript 方法相同的顺序获得 S 序列。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-23T06:52:52.623

RC4 是一种损坏的算法，如果要保持数据高度安全，建议不要再使用相同的算法。

如果您仍需要有效的实现，则无需在代码中重新创建算法。Java API javax.crypto 可以为您完成。只需生成一个密钥并调用模式设置为加密/解密的 init 方法。

```
static String decryptRC4() throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException{

    byte[] testDataBytes = "testString".getBytes();

    KeyGenerator rc4KeyGenerator = KeyGenerator.getInstance("RC4");
    SecretKey key = rc4KeyGenerator.generateKey();

    // Create Cipher instance and initialize it to encrytion mode
    Cipher cipher = Cipher.getInstance("RC4");  // Transformation of the algorithm
    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] cipherBytes = cipher.doFinal(testDataBytes);

    // Reinitialize the Cipher to decryption mode
    cipher.init(Cipher.DECRYPT_MODE,key, cipher.getParameters());
    byte[] testDataBytesDecrypted = cipher.doFinal(cipherBytes);

    System.out.println("Decrypted Data : "+new String(testDataBytesDecrypted));
    return new String(testDataBytesDecrypted);
} 
```

输出：

[![在此处输入图像描述](../Images/09d31d4db2a56507121e720d31aa03d7.png)](https://i.stack.imgur.com/H40qE.png)

如果您需要将加密数据作为 url 的一部分发送，请使用 Base64Encoding 然后发送。

例如

```
 static String decryptRC4() throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException{

    byte[] plainBytes = "testString".getBytes();

    KeyGenerator rc4KeyGenerator = KeyGenerator.getInstance("RC4");
    SecretKey key = rc4KeyGenerator.generateKey();

    // Create Cipher instance and initialize it to encrytion mode
    Cipher cipher = Cipher.getInstance("RC4");  // Transformation of the algorithm
    cipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] cipherBytes = cipher.doFinal(plainBytes);

    String encoded = encodeBase64(cipherBytes);

    String decoded = decodeBase64(encoded);

    // Reinitialize the Cipher to decryption mode
    cipher.init(Cipher.DECRYPT_MODE,key, cipher.getParameters());
    byte[] plainBytesDecrypted = cipher.doFinal(Hex.decode(decoded));

    System.out.println("Decrypted Data : "+new String(plainBytesDecrypted));
    return new String(plainBytesDecrypted);
}

static String decodeBase64(String encodedData){
    byte[] b = Base64.getDecoder().decode(encodedData);
    String decodedData = DatatypeConverter.printHexBinary(b);
    return decodedData;
}

static String encodeBase64(byte[] data){
    byte[] b = Base64.getEncoder().encode(data);
    String encodedData = new String(b);
    /*String encodedData = DatatypeConverter.printHexBinary(b);*/
    return encodedData;
} 
```

**提示：**如上所示使用 Hex.decode 从 base64 解码字符串中获取字节，否则您将遇到编码问题。尽可能使用 Hex 进行转换，并使用 bouncycastle 方法转换为字节数组。

需要进口：

```
import java.io.IOException;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Base64;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.KeyGenerator;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.xml.bind.DatatypeConverter;

import org.apache.commons.codec.DecoderException;
import org.bouncycastle.util.encoders.Hex; 
```

此外，如果您从自己的字符串生成密钥，则可以使用 MD5Hashing 来实现。

请参阅此以获得有关如何使用自定义字符串创建密钥的帮助： [https ://stackoverflow.com/a/52463858/5912424](https://stackoverflow.com/a/52463858/5912424)

# mysql - MySQL 的 REGEXP 运算符是否支持按字符代码搜索？

> ID：12289724
> 
> 赞同：0
> 
> 时间：2012-09-05T21:01:58.813
> 
> 标签：mysql, sql, database, unicode

假设我正在编写一条 SQL 语句，并且我想找到所有包含奇怪字符的行。有没有办法用 MySQL 做到这一点？

```
SELECT foo, bar, beep, bop
FROM widgets
WHERE widget_name REGEXP '???' 
```

Perl 等价物类似于

```
/\x{FFF}/ # character ordinal 4095, unused tibetan character 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:09:02.577

如果您想查找无法以某种特定编码表示的字符串，例如 Windows-1252，您可以将字符串转换为该编码并与自身进行比较：

```
WHERE CONVERT(widget_name USING latin1) != widget_name 
```

# iphone - 在 NSArray 中存储应用程序文档文件夹文件名？

> ID：12289725
> 
> 赞同：-1
> 
> 时间：2012-09-05T21:02:03.323
> 
> 标签：iphone, ios, ios5

我将一些文件存储在应用程序文档文件夹中。我想将这些文件的名称存储在 NSArray 对象中。例如，我在应用程序中有 3 个 csv 文件，名为一、二、三。我想在 NSArray 中获取这些名称。我正在使用 XCode 4.4.1 和 iOS 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:04:56.177

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);

NSError *error = nil;
NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[paths objectAtIndex:0] error:&error]; 
```

# java - 动态修改数组名称

> ID：12289727
> 
> 赞同：2
> 
> 时间：2012-09-05T21:02:12.820
> 
> 标签：java, arrays

我正在编写 Java 应用程序。

这是我的代码示例：

```
int [] digitPart_1 ={16,7,9,8,5,6,};
int [] digitPart_2 ={1,77,98,86,5,6,};
int [] digitPart_3 ={166,7,49,84,55,6,};

for(int i = 0; i < mfl.size(); i++){
 new DataProcessing(digitPart_+""+(i + 1));
} 
```

在我的设计中，现在每个部分（例如 digitPart_1）都应传入，因为 0 + 1 = 1、1 + 1 = 2，即 digitPart_1 等。但这会导致编译错误。它不允许我修改我传入的数组的名称。'mfl'并不重要，它应该存储数字3。我只是想知道我是否可以像你一样修改我动态传入的数据结构的名称修改您传递给输出流的字符串。

关于如何克服这个问题的任何建议？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:04:23.837

使用二维数组，因为这几乎就是您想要做的。尽管您可以查找 Java 反射（虽然相关，但在这里不是合适的设计工具），但编译语言根本不能像这样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:05:29.047

您不能动态修改变量的名称。但您可以改用数组：

```
int[][] digitPart = {{16,7,9,8,5,6}, {1,77,98,86,5,6}, {166,7,49,84,55,6}};

for(int i = 0; i < mfl.size(); i++){
   new DataProcessing(digitPart[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:06:47.083

在 Java 中不能有动态变量名。

相反，如何使用 Map ？

```
Map<Integer, int[]> myMap = new HashMap<Integer, int[]>();

myMap.put(1 , {16,7,9,8,5,6,} );
myMap.put(2 , {16,7,9,8,5,6,7} );
...

and then 

for ( Integer i : myMap.keySet() ) 
    new DataProcessing(myMap.get(i)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T21:08:35.590

只有在使用字段而不是方法局部变量时才能执行此操作。

```
int[] digitPart_1 = { 16, 7, 9, 8, 5, 6, };
int[] digitPart_2 = { 1, 77, 98, 86, 5, 6, };
int[] digitPart_3 = { 166, 7, 49, 84, 55, 6, };

public void foo() {
    for (int i = 1; i <= 3; i++) {
        try {
            System.out.println(getClass()
                    .getDeclaredField("digitPart_" + i));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

但是，我建议重组您的代码以使用数组数组。

```
int[][] digitPart = { { 16, 7, 9, 8, 5, 6, }, { 1, 77, 98, 86, 5, 6, }, { 166, 7, 49, 84, 55, 6, } };
for (int i = 0; i < 3; i++) {
    System.out.println(digitPart[i]);
} 
```

除非您有特定的低内存要求，否则我会更好地使用 java 集合来表示您的结构。

```
Map<String, List<Integer>> digitPart = new HashMap<String, List<Integer>>();
digitPart.put("digitPart_1", Arrays.asList( 16, 7, 9, 8, 5, 6));
digitPart.put("digitPart_2", Arrays.asList( 1, 77, 98, 86, 5, 6));
digitPart.put("digitPart_3", Arrays.asList(166, 7, 49, 84, 55, 6));

digitPart.get("digitPart_2").get(2); // 98 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T21:05:33.430

你所做的在java中是非法的。我必须在编译时知道变量名。

您可以做的是创建一个`Map`，其中键是变量的名称 ( `digitPart_1`...)，条目是数组 ( `{16, 7,...}...`)。

在循环中，您可以通过`Map`.

# r - POSIXct 值在 reshape2 dcast 中变为数字

> ID：12289731
> 
> 赞同：7
> 
> 时间：2012-09-05T21:02:24.617
> 
> 标签：reshape2, r, reshape2

我正在尝试使用最新[reshape2](/questions/tagged/reshape2 "显示标记为“reshape2”的问题")包（1.2.1）中的 dcast 对 value.var 为 POSIXct 类型的数据框（或 data.table）进行非规范化，但在生成的数据框中，日期值已丢失他们的 POSIXct 类并变成数字。

如果我希望将值恢复为 POSIXct 的值，我真的必须 as.POSIXct() 每个生成的列，还是我遗漏了什么？

```
x <- c("a","b");
y <- c("c","d");
z <- as.POSIXct(c("2012-01-01 01:01:01","2012-02-02 02:02:02"));
d <- data.frame(x, y, z, stringsAsFactors=FALSE);
str(d);
library(reshape2);
e <- dcast(d, formula = x ~ y, value.var = "z");
str(e); 
```

运行上述语句的结果（注意新列 c 和 d 是数字纪元秒而不是 POSIXct）：

```
> x <- c("a","b");
> y <- c("c","d");
> z <- as.POSIXct(c("2012-01-01 01:01:01","2012-02-02 02:02:02"));
> d <- data.frame(x, y, z, stringsAsFactors=FALSE);
> str(d);
'data.frame':   2 obs. of  3 variables:
 $ x: chr  "a" "b"
 $ y: chr  "c" "d"
 $ z: POSIXct, format: "2012-01-01 01:01:01" "2012-02-02 02:02:02"
> library(reshape2);
> e <- dcast(d, formula = x ~ y, value.var = "z");
> str(e);
'data.frame':   2 obs. of  3 variables:
 $ x: chr  "a" "b"
 $ c: num  1.33e+09 NA
 $ d: num  NA 1.33e+09 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T00:40:43.630

执行`debug(dcast)`and `debug(as.data.frame.matrix)`，然后逐步执行您的`dcast()`调用启动的计算将显示这些行`as.data.frame.matrix()`有问题：

```
if (mode(x) == "character" && stringsAsFactors) {
    for (i in ic) value[[i]] <- as.factor(x[, i])
}
else {
    for (i in ic) value[[i]] <- as.vector(x[, i])
} 
```

最新的 POSIXct 对象具有 mode `"numeric"`，因此评估遵循第二个分支，它将结果转换为数字。

如果你使用`dcast()`，看起来你需要对结果进行后处理，*如果*你有正确的`origin`. 像这样的东西（不太`origin`正确）应该可以解决问题：

```
e[-1] <- lapply(e[-1], as.POSIXct, origin="1960-01-01") 
```

* * *

FWIW，基本 R`reshape()`保留 POSIXct 值，但需要您编辑结果列的名称......

```
reshape(d, idvar="x", timevar="y",  direction="wide")
#   x                 z.c                 z.d
# 1 a 2012-01-01 01:01:01                <NA>
# 2 b                <NA> 2012-02-02 02:02:02 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-09T20:18:08.473

在投射/扩大数据集时，对日期完整性进行预处理和/或后处理可能非常麻烦。

在这方面，除非您需要的重塑很复杂，否则 tidyr包中的*pivot_wider* *()*尊重日期对象——在此过程中没有转换。此外，它对铸造/加宽过程提供了更多控制，从而避免了后处理步骤 ( [https://tidyr.tidyverse.org/reference/pivot_wider.html](https://tidyr.tidyverse.org/reference/pivot_wider.html) )。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T22:38:23.223

我也刚遇到这个问题。我首先将日期字段强制转换为字符，然后进行 dcast，然后再转换回日期来解决它。*

# android - 从用户图库设置背景

> ID：12289732
> 
> 赞同：0
> 
> 时间：2012-09-05T21:02:36.143
> 
> 标签：android

在过去的几天里，我试图搜索这个，但没有得到很好的信息。

如果有人能指出我正确的方向，将不胜感激。

如何让用户从自己的图库中选择应用程序的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:05:06.610

没关系...在我发布问题后，右侧的相关主题痛苦指出我回答了我的问题：

[从图库设置应用背景](https://stackoverflow.com/questions/10063763/set-app-background-from-gallery?rq=1)

# php - phpmailer smtp 问题

> ID：12289736
> 
> 赞同：1
> 
> 时间：2012-09-05T21:02:55.570
> 
> 标签：php, email, smtp, phpmailer

最近，由于垃圾邮件，我的主机对我的服务器进行了关于电子邮件的更改。

> 我发现您的服务器正在发送大量垃圾邮件：
> 
> root@server2 [~]# exiqgrep -r ***** ** *** *** .com -c 5814 匹配 6122 条消息
> 
> 这意味着***** ** *** *** .com 是从您的服务器发送的 5,814 条消息的收件人。我已从队列中删除了这些消息，并提高了您服务器上的邮件日志记录和安全级别。我还禁用了您的服务器作为开放中继，这似乎是邮件发送的方式。这很有可能导致延迟，但问题仍然是您有一个被劫持的脚本/帐户试图以这种速度发送邮件。服务器现在设置为不从除 SMTP 用户、root 和 mailman 之外的任何用户发送邮件；因此，您必须确保所有邮件脚本都正确使用 SMTP 身份验证。您可以在此处找到有关如何执行此操作的更多信息：
> 
> [http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)
> 
> 我还强烈建议为此服务器上的任何和所有域打开 DKIM 和 SPF 记录（可以在 cPanel 中的“邮件身份验证”下完成），因为这将减少退回/拒绝邮件以及被列入黑名单的机会已经发出的垃圾邮件。我还在 ***** ** *** ***帐户上运行恶意软件扫描，并关闭了默认电子邮件地址。扫描完成后，我会立即通知您是否有任何点击。

我的脚本现在必须使用 SMTP 身份验证。现在我在更新我的代码后遇到了错误。

> 警告：fsockopen() [function.fsockopen]: php_network_getaddresses: getaddrinfo failed: Name or service not known in /home/ *** /public_html/fkg/lib/phpmailer/class.SMTP.php on line 89
> 
> 警告：fsockopen() [function.fsockopen]：无法连接到邮件。***.* ** *** **** .com:25 (php_network_getaddresses: getaddrinfo failed: Name or service not known) in /home/ *** /public_html/fkg/lib/phpmailer/class.SMTP.php on line 89 SMTP -> ERROR: Failed to连接到服务器：php_network_getaddresses：getaddrinfo 失败：名称或服务未知（0）邮件错误
> 
> 说明：SMTP 错误：无法连接到 SMTP 主机服务器

这是我的代码

```
$mail = new phpmailer();
$mail->SMTPDebug = 1;
$mail->IsSMTP();  // telling the class to use SMTP
$mail->Host = "mail.***.************.com"; // SMTP server
$mail->Port = "25"; 
$mail->SMTPAuth  = true;   //we need to autenticate to the server
//$mail->SMTPSecure = "ssl";  //we use ssl to protected the flow of info
$mail->Username = "noreply+*****.com"; //account 
$mail->Password = "********"; //password 
```

关于正在发生的事情的任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:23:39.420

好吧，在一天结束后，经过长时间的聊天......

几个问题。在这种情况下，另一端的服务器是`exim`，它只允许您在使用`EHLO`命令点击它后进行身份验证。`PHPMailer`，已使用，不允许您强制执行 a `EHLO`，因此对`exim`服务器的身份验证不起作用。

切换到`PEAR::Mail`++ “`PEAR::Net_SMTP`修复`PEAR::Net_Socket`”了这个问题。

参考：

1.  [http://pear.php.net/package/Mail/download/](http://pear.php.net/package/Mail/download/)
2.  [http://pear.php.net/package/Net_SMTP/download](http://pear.php.net/package/Net_SMTP/download)
3.  [http://pear.php.net/package/Net_Socket/download](http://pear.php.net/package/Net_Socket/download)

# java - 状态栏，如何使我的线条、椭圆和矩形可见？

> ID：12289737
> 
> 赞同：0
> 
> 时间：2012-09-05T21:03:02.197
> 
> 标签：java, swing, jframe, jpanel, statusbar

我设置了线条、矩形和椭圆形，我有一个问题。

如何使我的线条、椭圆和矩形在 main 方法中可见？由于某种原因，当我编译和运行文件时它们没有被输出......谢谢

```
 import java.awt.BorderLayout;
 import java.awt.Color;

 import java.awt.Dimension;
 import java.awt.Graphics;

 import javax.swing.JPanel;

 public class LinesRectsOvalsJPanel extends JPanel {

public LinesRectsOvalsJPanel() {

setLayout(new BorderLayout());
setPreferredSize(new Dimension(10, 23));

JPanel rightPanel = new JPanel(new BorderLayout());
rightPanel.setOpaque(true);

add(rightPanel, BorderLayout.EAST);
   }

  public void paintComponent( Graphics g ) {

   super.paintComponent( g ); 

     this.setBackground( Color.WHITE );
     //   x y width height
     g.setColor(Color.BLACK);
     g.drawLine(5,10,5,30);
     g.setColor(Color.BLUE);
     g.drawLine(18,70,127,24);
     g.setColor(Color.RED);
     g.drawLine(25,45,100,38);

     g.setColor(Color.YELLOW);
     g.drawOval(23,25,23,55);
     g.setColor(Color.BLACK);
     g.drawOval(15,14,40,78);
     g.setColor(Color.CYAN);
     g.drawOval(180,102,5,90);
     g.setColor(Color.RED);
     g.drawOval(21,20,89,11);
     g.setColor(Color.BLUE);
     g.drawOval(35,87,39,27);
     g.setColor(Color.YELLOW);
     g.fillRect(87,5,5,60);
     g.setColor(Color.GREEN);
     g.fillRect(105,15,15,85);
     g.setColor(Color.CYAN);
     g.fillRect(14,45,76,86);
     g.setColor(Color.RED);
     g.fillRect(70,79,65,86);
     g.setColor(Color.BLUE);
     g.fillRect(90,108,5,8); 
 }
} 
```

## 代码 2

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
 import java.awt.Dimension;
 import java.awt.Graphics;

 import javax.swing.BoxLayout;
 import javax.swing.JFrame;
 import javax.swing.JLabel;
  import javax.swing.JPanel;
  import javax.swing.SwingConstants;
 import javax.swing.border.BevelBorder;

  public class Main {
    public static void main(String[] args) {
  JFrame frame = new JFrame("");
 frame.setLayout(new BorderLayout());
frame.setSize(300, 300);

JPanel statusPanel = new JPanel();
statusPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));
frame.add(statusPanel, BorderLayout.SOUTH);
statusPanel.setPreferredSize(new Dimension(frame.getWidth(), 16));
statusPanel.setLayout(new BoxLayout(statusPanel, BoxLayout.X_AXIS));
JLabel statusLabel = new JLabel("status");
statusLabel.setHorizontalAlignment(SwingConstants.LEFT);
statusPanel.add(statusLabel);

frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:10:35.440

您尚未添加`LinesRectsOvalsJPanel`组件：

```
frame.add(new LinesRectsOvalsJPanel()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:11:38.020

尝试这样的事情：

这是主类（框架）：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class Frame extends JFrame{

    Panel p = new Panel();

    public Frame(){
        p.setPreferredSize(new Dimension(640,480));
        add(p);
    }

    public static void main(String[] args){
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                Frame f = new Frame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.pack();
                f.setVisible(true);
            }   
        });
    }
} 
```

您的面板类：

```
import javax.swing.*;

public class Panel extends JPanel{
    public void paintComponent(Graphics g){
        g.setColor(Color.BLUE);
        g.fillRect(20, 20, 50, 50);
    }
} 
```

# qt - 无法使 urlChanged 信号起作用

> ID：12289743
> 
> 赞同：2
> 
> 时间：2012-09-05T21:03:27.203
> 
> 标签：qt, qtwebkit

我正在编写一个带有 QWebView 类的应用程序，我想在它使用 urlChanged(const QUrl&) 信号重定向到另一个 url 地址时捕捉它，但在运行时我得到了这个

> Object::connect: 没有这样的信号 QWebView::urlChanged(url)

这是我的代码

```
 #include <QString>
   #include "test.h"
   #include <QUrl>
   #include <QWebView>
   #include <stdio.h>
   QFapp::QFapp(QWidget* parent):QWidget(parent)
   {
      QWebView*view = new QWebView;
      QUrl url("http://google.com");
      view->load(url);
      view->show();
      connect(view,SIGNAL(urlChanged(url)),this,SLOT(GetToken()));
   }
  void QFapp::GetToken()
  {
     printf("Signal is emited");
  } 
```

这是头文件

```
 #include <QWidget>
   #include <QString>
   #include <QUrl>
   #include <QWebView>
   class QFapp: public QWidget
   {
      Q_OBJECT
    public:
        QFapp(QWidget* parent = 0);
    public slots:
      void GetToken();
    private:
      QWebView* view;
        QUrl url;
     }; 
```

并且没有编译时警告。

我不明白我在做什么错。这是我对 Qt 的第一次体验（不是学校作业），所以任何提示都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:51:39.133

问题在于这行代码：

```
 connect(view,SIGNAL(urlChanged(url)),this,SLOT(GetToken())); 
```

SIGNAL 宏接受函数*签名*，而不是函数调用。它应该如下所示：

```
connect(view,SIGNAL(urlChanged(QUrl)),this,SLOT(GetToken())); 
```

每当 WebView 的 url 更改时，都会发出此信号，并将其更改为的 url 传递给您。

# ibatis - 当使用#value# 作为参数时，iBatus 返回 null

> ID：12289744
> 
> 赞同：0
> 
> 时间：2012-09-05T21:03:27.753
> 
> 标签：ibatis

我有一个使用 iBatis 的 select 语句的问题，当我将查询作为 select soc from soc.soc = #value# 时它返回 null，但是当我将 #value# 硬编码为“test”时它返回正确的结果。

我已经搜索了解决方案，并且似乎我使用的方式是正确的。有没有人有类似的问题？

我正在使用 iBatis 2.3 和 oracle db。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:10:01.523

这是因为您在类属性 ( `value`) 中发送了一个空值。调试日志中的属性值。您可以通过设置进行调试：

```
log4j.logger.com.ibatis=DEBUG
log4j.logger.java.sql.ResultSet=DEBUG 
```

以上都可以用来获取sql参数值。

# javascript - 握手授权后卡住 socket.io

> ID：12289745
> 
> 赞同：3
> 
> 时间：2012-09-05T21:03:29.373
> 
> 标签：javascript, node.js, socket.io

当客户端连接到我服务器上的 socket.io 时，日志中会显示以下内容：

```
 info  - handshake authorized mEc9O3ZUWHGWDFEXOETd
   debug - client authorized
   info  - handshake authorized P8qyZTT2Da_2hbc7OETe
   debug - client authorized
   info  - handshake authorized Za3KNS-01iYjSPugOETf
   debug - client authorized
   info  - handshake authorized h2TfSTE3nRzyJkiKOETg
   debug - client authorized
   info  - handshake authorized YrLDHKQuptqNeG8KOETh
   debug - client authorized
   info  - handshake authorized cW5H6R2vSro2_RO0OETi 
```

握手后什么都没有发生。

使用 firebug，我看到正在发出初始 socket.io 请求并返回 200 OK，但是它没有返回应有的响应。

这可能是什么原因造成的？我使用的端口必须在入站和出站都打开吗？

# haskell - Hackage 上的“代数”包中的可交换幺半群

> ID：12289746
> 
> 赞同：6
> 
> 时间：2012-09-05T21:03:29.720
> 
> 标签：haskell, hackage, abstract-algebra

[algebra/2.1.1.2/doc/html](http://hackage.haskell.org/packages/archive/algebra/2.1.1.2/doc/html/Numeric-Algebra-Class.html#t:Multiplicative)的文档显示了大量的类型类。

我如何声明一个有问题的结构必须配备一个交换关联运算和一个单位/恒等元素，但没有其他任何东西（逆、分布等）？

我在想

```
reduce :: Monoid m => (a -> m) -> [a] -> m 
```

但是 Data.Monoid 的实例不应该是可交换的，我希望我的函数的用户通过查看类型来看到他们需要可交换性才能使函数工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T21:29:27.450

`(Abelian m, Monoidal m)`

看起来这`Monoidal`比你想要的要多得多，但这一切都是基于`Natural`成为一个`Semiring`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:26:26.793

看起来该包提供了一个 Commutative 类，如果我错了，请纠正我，但看起来这只是指定第二个类型类的问题：

```
reduce :: (Monoid m, Commutative m) => (a -> m) -> [a] -> m 
```

# php - 无法使用php更新mysql中的日期类型

> ID：12289748
> 
> 赞同：0
> 
> 时间：2012-09-05T21:03:31.827
> 
> 标签：php, mysql, date

一旦用户提交表单并更新日期类型，我就会尝试从用户那里检索出生日期，但我无法更新日期类型。你能告诉我我做错了什么吗？

```
if($_POST){
    $dob = date('Y-m-d',strtotime($_POST['year']."-". $_POST['month']."-".$_POST['day'])); 

    $retur = $userObj->updateProfile($dob);
}

 public function updateProfile($dob){
$db = db_mysql::getInstance();
$qr = $db->query("UPDATE ".USERS." SET dob = $dob WHERE id = '".$udata."'") or die(mysql_error()); 

        return $udata;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:06:40.310

尝试这个：

```
$qr = $db->query("UPDATE ".USERS." SET dob = '$dob' WHERE id = '".$udata."'") or die(mysql_error()); 
```

不过，您应该考虑使用绑定参数 - 它避免了这种事情，并使您的代码更加安全。

编辑添加：

[绑定参数的手册页](http://php.net/manual/en/pdostatement.bindparam.php) 有一些非常有用的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:08:47.100

$udata 是什么，你从哪里得到它？

如果它是一个类属性，那么您需要使用`$this->udata`or`$db::udata`在这种情况下调用它，因为您似乎正在调用一个静态类，或者如果它们都不是，则可能将其传递给函数。

还有为什么你的查询`"UPDATE ".USERS." SET dob = $dob WHERE id = '".$udata."'"`，用户发生了什么？当然它应该只是`"UPDATE USERS SET dob = '$dob' WHERE id = '".$udata."'"`像前面提到的那样在 $dob 周围添加''。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:07:12.523

在日期周围加上引号，现在声明看起来像

```
UPDATE USERS SET dob = 01-02-2012 WHERE id = 'x' 
```

在这种情况下，日期被视为一个数字（我认为是-2013）。;)

更好的是：使用准备好的语句（搜索 PDO）并在日期参数中传递日期。

# regex - 使用带有 RegEx 的 Apache POI 提取大写单词

> ID：12289750
> 
> 赞同：1
> 
> 时间：2012-09-05T21:03:47.017
> 
> 标签：regex, apache-poi

因此，我正在开发一个项目，以从 Java 中的 .doc 文件中提取大写单词。我正在使用正则表达式，但这就是我遇到一些问题的地方。我不熟悉正则表达式，但这就是我使用的。

```
private static final String REGEX = "[A-Z]+";

private void parseWordText(File file) throws IOException {
    FileInputStream fs = new FileInputStream(file);
    HWPFDocument doc = new HWPFDocument(fs);
    WordExtractor we = new WordExtractor(doc);
    if (we.getParagraphText() != null) {
        String[] dataArray = we.getParagraphText();
        for (int i = 0; i < dataArray.length; i++) {
            String data = dataArray[i].toString();
            Pattern p = Pattern.compile(REGEX);
            Matcher m = p.matcher(data);
            List<String> sequences = new Vector<String>();
            while (m.find()) {
                sequences.add(data.substring(m.start(), m.end()));
                System.out.println(data.substring(m.start(), m.end()));
            }
        }
    }
} 
```

使用上面的代码和正则表达式，我得到所有大写字母，而不仅仅是所有大​​写单词。基本上你好不好，但你好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:47:16.647

如果您想匹配单词边界，请使用`\<`and `\>`（并记住`\`'s 需要加倍才能将它们变成字符串，因此您应该编写`\\<`）。分别用于单词的开头和结尾（我认为“单词”定义为`[a-zA-Z0-9_]+`）。所以你的正则表达式是`\<[A-Z]+\>`. 请注意，这也匹配一个字母的单词（例如 the `I`，但不是 the `H`, in `Here I am`）。如果您不想要这些，请使用`{2,}`而不是`+`.

# iphone - 创建点击覆盖指令视图

> ID：12289756
> 
> 赞同：6
> 
> 时间：2012-09-05T21:04:03.287
> 
> 标签：iphone, objective-c, ios, xcode, uiimageview

这里有一个非常简单的问题。你如何创建这样的视图？ ![在此处输入图像描述](../Images/a20667011dbef904bec5bf33e0b6254a.png)

它必须在用户第一次运行应用程序的这一部分时覆盖，并且一旦用户点击它就被永久删除。我知道它应该是一个 UIImageView，但是你如何让它处于活动状态，然后永远将它从视图中移除呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T21:25:07.027

您可以在应用程序启动后使用类的方法`didFinishLaunchingWithOptions`在应用程序委托的方法中添加子视图。以下是您可以如何进行的一些代码片段：`addSubView``UIView`

```
- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  

    UIImageView *imageView = [[UIImageView alloc] 
    initWithImage:[UIImage imageNamed:@"yourimage.png"]];
    [self.window addSubview:imageView];

     UITapGestureRecognizer * recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
     recognizer.delegate = self;
    [imageView addGestureRecognizer:recognizer];
    imageView.userInteractionEnabled =  YES;
    self.imageView = imageView;
}

- (void) handleTap:(UITapGestureRecognizer *)recognize
{
     [self.imageView removeFromSuperView];
} 
```

请注意，您将需要一个属性来在`handleTap`方法中引用您的 imageView。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T21:25:33.133

[`UIView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)拥有您需要的所有方法，例如

*   调用`[myView addSubview:imgView]`以将图像视图添加到当前视图 ( `myView`)
*   完成时调用`[imgView removeFromSuperview]`（即响应点击或计时器后）

确保to`userInteractionEnabled`的属性，以便将触摸传递给。`imgView``NO``myView`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:08:28.140

我的想法是设置一个 NSUserDefault 变量并在 applicationDidFinishLaunchingWithOptions 或应用程序中其他有意义的地方检查它。当您的变量为真与假时，您可以只推送一个单独的视图。

# jquery - 使用 Jquery 的上滑 div

> ID：12289758
> 
> 赞同：0
> 
> 时间：2012-09-05T21:04:07.287
> 
> 标签：jquery

我有一个 250px 高和 160px 宽的 div。加载页面时，除 30px 外，div 将隐藏在内容后面。我想知道如何使 div 可点击，以便它会向上滑动以显示整个 div。提前致谢。

```
 <script type="text/javascript">
            $('#maininfo').click(function() {
                $('.maininfo_tab').slideUp('slow', function() {
                // Animation complete.
             });
           });
</script>
    <div id="maininfo">
        <div class="maininfo_tab" style="position:relative;margin-bottom:35px;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:10:09.387

您可以使用 animate 方法来滑动它，并使用 click 事件来连接它：

```
var nextHeight = 250;
$("#myDiv").click(function() {
    $(this).animate({
        height: nextHeight
    });
    nextHeight = Math.abs(nextHeight - 280);
});​ 
```

小提琴示例：http: [//jsfiddle.net/johnkoer/qu5bz/8/](http://jsfiddle.net/johnkoer/qu5bz/8/)

# sqlite - python的线程安全持久键值存储

> ID：12289759
> 
> 赞同：2
> 
> 时间：2012-09-05T21:04:10.090
> 
> 标签：sqlite, caching, dictionary

我需要做一个大缓存——一个（键，值）字典。我希望能够将此缓存保存/加载到磁盘/从磁盘加载。问题是，字典可能太大而无法放入内存，因此在给定时间点只能将其中的一部分加载到 RAM 中。

有没有处理这个问题的标准方法。我是否被迫使用数据库？我在考虑 sqlite，但它不是线程安全的（？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:30:24.243

如果您只需要一个大字典，您可能希望使用提供键值存储的数据库，而不是 SQLite 之类的关系数据库。

[流行的键值存储](http://en.wikipedia.org/wiki/NoSQL#Key-value_store)包括：

*   [Berkeley DB](http://en.wikipedia.org/wiki/Berkeley_DB) - 持久存储
*   [Memcached](http://memcached.org/) - 非持久性（基于 RAM）
*   [MemcacheDB](http://memcachedb.org/) - 持久化

# apache - Apache、mod_jk 和 JBoss 负载平衡问题

> ID：12289761
> 
> 赞同：3
> 
> 时间：2012-09-05T21:04:14.960
> 
> 标签：apache, jboss, load-balancing, mod-jk

好的，自从过去三天以来，我一直在徒劳地摇头，所以是时候与*大师们*一起讨论了！

**背景**
我试图让一个明显简单的设置工作——我有一个 CentOS 盒子，我想在它上面设置两个 JBoss 节点（即单个、非多宿主服务器上的两个节点），并尝试一个故障转移场景。我读到 Apache 的 mod_jk 模块会帮助我实现它。

我努力尝试遵循[JBoss 5.1 Clustering Guide](http://docs.jboss.org/jbossclustering/cluster_guide/5.1/html/index.html "JBoss 5.1 集群指南")，但不知何故，我似乎在某个地方摸索了。

**问题**
我永远无法`node2`通过 Apache 连接，并且总是收到*503 Service Unavailable*消息。

**配置**
以下是详细信息。

```
中央操作系统 6
阿帕奇 2.2.15
mod_jk 1.2.35
JBoss 5.1.0 正式版

```

`**httpd.conf**`最后有以下行：

```
#包含mod_jk的具体配置文件
包括 conf/mod_jk.conf

```

`**mod_jk.conf**`包含以下行（除其他外）：

```
JkMountFile conf/uriworkermap.properties

```

`**uriworkermap.properites**`看起来像这样：

```
# 简单的worker配置文件
# 将 Servlet 上下文挂载到 ajp13 worker
/jmx-console=负载均衡器
/jmx-console/*=负载均衡器
/web-console=负载均衡器
/web-console/*=负载均衡器
/jspHello=负载均衡器
/jspHello/*=负载均衡器

```

`**workers.properties**`：

```
# 定义将使用的工人列表
# 用于映射请求
worker.list=负载均衡器，状态

# 定义节点1
# 修改主机为你的主机IP或DNS名称。
worker.node1.port=8009
worker.node1.host=127.0.0.1
worker.node1.type=ajp13
worker.node1.lbfactor=1

# 定义节点2
# 修改主机为你的主机IP或DNS名称。
worker.node2.port=8109
worker.node2.host=127.0.0.1
worker.node2.type=ajp13
worker.node2.lbfactor=1

# 负载均衡行为
worker.loadbalancer.type=lb
worker.loadbalancer.balance_workers=node1,node2
worker.loadbalancer.sticky_session=1

# 用于管理负载均衡器的状态工作者
worker.status.type=状态

```

我使用以下命令来调用`node1`and `node2`：

```
./run.sh -c node1 -g DocsPartition -Djboss.messaging.ServerPeerID=1 -Djboss.service.binding.set=ports-default -b 0.0.0.0

./run.sh -c node2 -g DocsPartition -Djboss.messaging.ServerPeerID=2 -Djboss.service.binding.set=ports-01 -b 0.0.0.0

```

另外，我修改`server.xml`了每个目录中的文件，并在标签中`node`添加了相应的`jvmRoute`参数。`Engine`

**观察**
以下是`mod_jk`日志：
*最初当我打开 node1、node2 和 httpd*

```
...
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] do_shm_open::jk_shm.c (561): 将共享内存截断为 1856
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] do_shm_open::jk_shm.c (606): Initialized shared memory /var/run/httpd/mod_jk.shm.14695 size=1856 free=1728地址=0x7fe7cb7c3000
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] do_shm_open_lock::jk_shm.c (476): 打开共享内存锁 /var/run/httpd/mod_jk.shm.14695.lock
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'ServerRoot' -> '/etc/httpd'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.list' -> 'loadbalancer,status'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.node1.port' -> '8009'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.node1.host' -> '127.0.0.1'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.node1.type' -> 'ajp13'
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] jk_map_dump::jk_map.c (589)：地图转储：'worker.node1.lbfactor' -> '1'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.node2.port' -> '8109'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.node2.host' -> '127.0.0.1'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.node2.type' -> 'ajp13'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.node2.lbfactor' -> '1'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589)：地图转储：'worker.loadbalancer.type' -> 'lb'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.loadbalancer.balance_workers' -> 'node1,node2'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.loadbalancer.sticky_session' -> '0'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_map_dump::jk_map.c (589): 地图转储：'worker.status.type' -> 'status'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] build_worker_map::jk_worker.c (241): 创建工作负载均衡器
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (145): 即将创建 lb 的实例负载均衡器
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (158): 即将验证和初始化负载均衡器
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (145): 即将创建 ajp13 的实例 node1
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (158): 即将验证和初始化 node1
[2012 年 9 月 6 日星期四 02:21:54] [14695:140633527957472] [调试] ajp_validate::jk_ajp_common.c (2679)：工作节点 1 联系人是 '127.0.0.1:8009'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_init::jk_ajp_common.c (2877)：设置端点选项：
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2880): keepalive: 0
[2012 年 9 月 6 日星期四 02:21:54] [14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2884)：套接字超时：0
[2012 年 9 月 6 日星期四 02:21:54] [14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2888)：套接字连接超时：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2892)：缓冲区大小：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2896)：池超时：0
[2012 年 9 月 6 日星期四 02:21:54] [14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2900)：ping 超时：10000
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2904)：连接超时：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2908)：回复超时：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2912): prepost timeout: 0
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_init::jk_ajp_common.c (2916)：恢复选项：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2920)：重试次数：2
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2924)：最大数据包大小：8192
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_init::jk_ajp_common.c (2928)：重试间隔：100
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_create_endpoint_cache::jk_ajp_common.c (2737)：将连接池大小设置为 1，最小值为 1 并获取超时 200
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (145): 即将创建 ajp13 的实例 node2
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (158): 即将验证和初始化 node2
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_validate::jk_ajp_common.c (2679)：工作节点 2 联系人是 '127.0.0.1:8109'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_init::jk_ajp_common.c (2877)：设置端点选项：
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2880): keepalive: 0
[2012 年 9 月 6 日星期四 02:21:54] [14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2884)：套接字超时：0
[2012 年 9 月 6 日星期四 02:21:54] [14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2888)：套接字连接超时：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2892)：缓冲区大小：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2896)：池超时：0
[2012 年 9 月 6 日星期四 02:21:54] [14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2900)：ping 超时：10000
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2904)：连接超时：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2908)：回复超时：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2912): prepost timeout: 0
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_init::jk_ajp_common.c (2916)：恢复选项：0
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2920)：重试次数：2
[2012 年 9 月 6 日星期四 02:21:54][14695:140633527957472] [调试] ajp_init::jk_ajp_common.c (2924)：最大数据包大小：8192
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_init::jk_ajp_common.c (2928)：重试间隔：100
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] ajp_create_endpoint_cache::jk_ajp_common.c (2737)：将连接池大小设置为 1，最小值为 1 并获取超时 200
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] validate::jk_lb_worker.c (1702): Balanced worker 0 在域中具有名称 node1 和路由 node1
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] validate::jk_lb_worker.c (1702): Balanced worker 1 在域中具有名称 node2 和路由 node2
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] update_mult::jk_lb_worker.c (262): worker node1 获得多重性 1
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] update_mult::jk_lb_worker.c (262): worker node2 获得多重性 1
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] jk_lb_push::jk_lb_worker.c (353): 从 mem (0->1) 同步 lb 'loadbalancer' 的 shm
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] build_worker_map::jk_worker.c (241): 创建工作状态
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (145): about to create instance status of status
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] wc_create_worker::jk_worker.c (158)：即将验证和初始化状态
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] init::jk_status.c (5078): 状态工作者'status'是读/写并且有css'(null)'，前缀'worker ', 命名空间 'jk:', xml 命名空间 'xmlns:jk="http://tomcat.apache.org"', 文档类型 '(null)'
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [debug] init::jk_status.c (5129): Status worker 'status' 对 '0000000f' 的评价很好，对 '00ff1010' 评价很差
[Thu Sep 06 02:21:54 2012][14695:140633527957472] [info] init_jk::mod_jk.c (3365): mod_jk/1.2.35 已初始化
...

```

*当我尝试访问应用程序时*

```
...
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] find_match::jk_uri_worker_map.c (949): 找到通配符匹配 '/jspHello/*=loadbalancer'
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_handler::mod_jk.c (2621): 进入处理程序 jakarta-servlet worker=loadbalancer r->proxyreq=0
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] wc_get_worker_for_name::jk_worker.c (115): 找到一个工作负载均衡器
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] wc_maintain::jk_worker.c (338)：维护工作负载均衡器
[2012 年 9 月 6 日星期四 02:24:42][14700:140633527957472] [调试] wc_get_name_for_type::jk_worker.c (292): 找到工人类型 'lb'
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] init_ws_service::mod_jk.c (1097): 服务协议=HTTP/1.1 方法=GET ssl=false 主机=(null) addr=:: 1 name=localhost 端口=80 auth=(null) user=(null) laddr=::1 raddr=::1 uri=/jspHello/
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] service::jk_lb_worker.c (1192): service sticky_session=0 id='empty'
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] get_most_suitable_worker::jk_lb_worker.c (1061): found best worker node2 (node2) using method 'Request'
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] service::jk_lb_worker.c (1237): service worker=node2 route=node2
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_get_endpoint::jk_ajp_common.c (3146)：在 0 次重试后获取的连接池 slot=0
[2012 年 9 月 6 日星期四 02:24:42][14700:140633527957472] [调试] ajp_marshal_into_msgb::jk_ajp_common.c (626): ajp 编组完成
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_service::jk_ajp_common.c (2441)：处理 node2 重试 2 次
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_send_request::jk_ajp_common.c (1615): (node2) 所有端点都已断开连接。
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_open_socket::jk_connect.c (485): 套接字 TCP_NODELAY 设置为 On
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_open_socket::jk_connect.c (609): 试图将套接字 14 连接到 127.0.0.1:8109
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [info] jk_open_socket::jk_connect.c (627): 连接到 127.0.0.1:8109 失败 (errno=13)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [info] ajp_connect_to_endpoint::jk_ajp_common.c (992): 无法打开套接字到 (127.0.0.1:8109) (errno=13)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [error] ajp_send_request::jk_ajp_common.c (1621): (node2) 连接到后端失败。Tomcat 可能未启动或正在侦听错误的端口 (errno=13)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [info] ajp_service::jk_ajp_common.c (2614): (node2) 向 tomcat 发送请求失败（可恢复），因为请求发送期间出错（尝试 = 1)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_service::jk_ajp_common.c (2463)：重试 1，在重试前休眠 100 毫秒
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_send_request::jk_ajp_common.c (1615): (node2) 所有端点都已断开连接。
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_open_socket::jk_connect.c (485): 套接字 TCP_NODELAY 设置为 On
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_open_socket::jk_connect.c (609): 试图将套接字 14 连接到 127.0.0.1:8109
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [info] jk_open_socket::jk_connect.c (627): 连接到 127.0.0.1:8109 失败 (errno=13)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [info] ajp_connect_to_endpoint::jk_ajp_common.c (992): 无法打开套接字到 (127.0.0.1:8109) (errno=13)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [error] ajp_send_request::jk_ajp_common.c (1621): (node2) 连接到后端失败。Tomcat 可能未启动或正在侦听错误的端口 (errno=13)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [info] ajp_service::jk_ajp_common.c (2614): (node2) 向 tomcat 发送请求失败（可恢复），因为请求发送期间出错（尝试 = 2)
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [error] ajp_service::jk_ajp_common.c (2634): (node2) 连接到 tomcat 失败。
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_reset_endpoint::jk_ajp_common.c (786): (node2) 使用套接字 -1 重置端点（套接字关闭）
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_done::jk_ajp_common.c (3077)：回收工作节点 2 和套接字 -1 的连接池
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] service::jk_lb_worker.c (1455): worker node2 将本地错误升级为全局错误
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [info] service::jk_lb_worker.c (1469): service failed, worker node2 处于错误状态
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] service::jk_lb_worker.c (1480): 可恢复错误...将尝试在其他工作人员上恢复
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] get_most_suitable_worker::jk_lb_worker.c (1061): found best worker node1 (node1) using method 'Request'
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] service::jk_lb_worker.c (1237): service worker=node1 route=node2
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_get_endpoint::jk_ajp_common.c (3146)：在 0 次重试后获取的连接池 slot=0
[2012 年 9 月 6 日星期四 02:24:42][14700:140633527957472] [调试] ajp_marshal_into_msgb::jk_ajp_common.c (626): ajp 编组完成
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_service::jk_ajp_common.c (2441)：处理 node1 重试 2 次
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_send_request::jk_ajp_common.c (1615): (node1) 所有端点都断开连接。
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_open_socket::jk_connect.c (485): 套接字 TCP_NODELAY 设置为 On
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_open_socket::jk_connect.c (609): 试图将套接字 14 连接到 127.0.0.1:8009
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] jk_open_socket::jk_connect.c (635): socket 14 [127.0.0.1:38909 -> 127.0.0.1:8009] 已连接
[Thu Sep 06 02:24:42 2012][14700:140633527957472] [debug] ajp_connection_tcp_send_message::jk_ajp_common.c (1175): 发送到 ajp13 pos=4 len=570 max=8192
[2012 年 9 月 6 日星期四 02:24:42] [14700:140633527957472] [调试] ajp_connection_tcp_send_message::jk_ajp_common.c (1175): 0000 12 34 02 36 02 02 00 08 48 48 54 54 3 50 2。 ...HTTP/1.1
...

```

如您所见，它在通过 node1 处理请求之前尝试连接到 node2 两次。直到时间到为止`node1`。一旦我把它拿下来，当我尝试访问时，我就开始收到 503 错误。

我不确定这是一个`mod_jk`问题还是我错过了什么。

有什么建议么？

**更新**：它与两个单独的（物理）节点一起工作，但我仍然无法让它在具有单独端口（8009 和 8109）的同一个盒子上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:10:19.533

听起来 JBoss 没有使用您认为的端口。一个好的诊断工具是 lsof（可以通过 yum 安装）；

```
lsof -i -n -P 
```

并查看 JBoss 进程正在侦听的端口。从那里更正您的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:08:10.643

JBoss 可能正在侦听端口 8009 和 8109，但默认情况下，它只侦听 127.0.0.1*接口*，这意味着这些端口不会对远程连接开放。

要让 jboss 监听*所有*接口，请使用这个**运行**选项（来自**run.sh --help**）：

> -b, --host= 绑定所有 JBoss 服务的地址

并将值设置为**0.0.0.0**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T14:49:20.900

解决此问题的方法是将 AJP 端口更改为不同的范围。我的 CentOS /Red Hat 中的 SELinux 阻止了端口 8109。所以我将 AJP 端口更改为 81，问题得到了解决。

# c++ - 链接两个静态库

> ID：12289765
> 
> 赞同：0
> 
> 时间：2012-09-05T21:04:23.973
> 
> 标签：c++, visual-studio-2010, static-libraries

我正在处理一个非常大的项目，其中包含多个 Visual Studio 项目。这些项目构建为静态库并包含在 Main 项目中，我们称之为`Main.exe`.

我创建了一个新项目并将其构建为静态库，我们称之为`MyProj.lib`. 这个库依赖于另一个静态库，我们称之为`API.lib`.

现在，我需要将我的项目链接到主项目。目前我有两个静态库链接到主项目。我之前问过这个问题：[Link static library in another static library](https://stackoverflow.com/questions/12198261/include-static-library-in-static-library)，发现不能嵌套静态库。Paul Michalik 指出，当我构建 Main 项目时，我需要简单地独立链接两个库。

我现在从库中收到几个`LNK2019`错误`MyProj.lib`，说它找不到`API.lib`库中定义的符号。Visual Studio 知道这两个库文件的位置，所以这让我很困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:03:11.403

这种混淆源于错误地认为 .lib 文件在某种程度上是神奇的。链接器可以*看到*.lib 文件具有其他依赖项。事实并非如此，静态 .lib 只是一袋 .obj 文件。一种将编译器输出收集到单个文件中的方法。不多也不少。

尤其令人困惑的是，当您*构建*库时，它永远不会抱怨缺少依赖项。对此的解释很简单，构建库不会*运行*链接器。只是将 .obj 文件收集到一个包中的 lib.exe 工具。

在您实际运行链接器来构建最终的可执行文件之前，它不会组合在一起。现在所有部分都必须放在一起，链接器*还*必须查看包含依赖项的 .obj 或 .lib 文件。当它没有时它会抱怨。

这是 C/C++ 构建模型中的一个非常薄弱的​​环节，很难修复。供应商试图解决这个问题，微软也这样做了。他们添加了非标准的#pragma comment(lib, "something.lib") 功能来告诉链接器它需要链接“something.iib”，而无需您在链接器的附加依赖项设置中明确指定它。非常好。然而，处理“something.lib”的确切*存储*位置是您需要处理的问题。粗鲁。另一个设定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:07:00.717

最简单的解决方案是简单地将`.lib`文件添加到依赖它们的每个项目中。如果它很重要（它可能不适用于 VS），请将依赖库放在依赖库之前。

这样做的（可能的）缺点是库在更改时不会自动重新编译。

# android - 如何确定在不同情况下使用的正确上下文（Toast.makeText、context.getSharedPreferences 等）

> ID：12289770
> 
> 赞同：0
> 
> 时间：2012-09-05T21:04:54.587
> 
> 标签：android, android-activity, toast, android-context

我在想是否有一种方法可以确定传递给类似方法的最佳上下文是什么，`Toast.makeText()`或者当`SharedPreferences`使用`context.getSharedPreferences()`.. 时，是否有理由不总是使用*Application 上下文*来代替`Activity`or`IntentService` 上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:39:08.480

[为了解释差异，从https://stackoverflow.com/a/4128799/1143977](https://stackoverflow.com/a/4128799/1143977)复制

它们都是 Context 的实例，但应用程序实例与应用程序的生命周期相关联，而 Activity 实例与 Activity 的生命周期相关联。因此，他们可以访问有关应用程序环境的不同信息。

如果您阅读 getApplicationContext 上的文档，它会指出，如果您需要一个生命周期与当前上下文分开的上下文，您应该只使用它。

Activity 上下文大概有一些关于当前活动的信息，这些信息是完成这些调用所必需的。如果您显示确切的错误消息，则可能能够指出它到底需要什么。

但总的来说，除非您有充分的理由不这样做，否则请使用活动上下文。

# java - 如何在 Apache Axis2 WebService 中返回自定义对象

> ID：12289787
> 
> 赞同：0
> 
> 时间：2012-09-05T21:05:46.053
> 
> 标签：java, web-services, apache, wsdl, axis2

我一直在尝试使用 Eclipse Juno、Maven 和 java2wsdl 插件部署 Apache Axis2 WebService。但是，我一直遇到一个问题，我认为这是由于映射造成的，希望有人能指出我正确的方向。

我试图在我的 WebService 上调用一个操作，该操作接受一个参数并返回一个自定义对象，但到目前为止还没有运气。

**我的代码**

为了说话，我有以下课程：

```
package com.example.models;
public class MyClass {
    // Does something
} 
```

我在以下操作中返回一个 MyClass 列表：

```
package com.example.service;
import com.example.models;
public class MyService {
    public List<MyClass> getExampleData(// a parameter) {  
        // Do something
        return aListOfMyClass;
    }
} 
```

我的 services.xml 文件：

```
<serviceGroup>
  <service name="MyWebService" targetNamespace="http://com.example.service.MyWebService/">
    <description>JNLPGenerator service</description>
    <schema schemaNamespace="http://com.example.service.MyWebService/" />
    <parameter name="ServiceClass" locked="false">com.example.service.MyWebService</parameter>
    <operation name="getExampleData">
      <messageReceiver class="org.apache.axis2.rpc.receivers.RPCMessageReceiver" />
    </operation>
  </service>
</serviceGroup> 
```

**错误：**

当我部署 WebService 时，我收到以下错误消息，这是由于未映射类 MyClass。

```
<Exception>org.apache.axis2.AxisFault: org.apache.axis2.AxisFault: Mapping qname not fond for the package: com.example.models
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:161)
    at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:173)
    at org.apache.axis2.transport.http.util.RESTUtil.invokeAxisEngine(RESTUtil.java:135)
    at org.apache.axis2.transport.http.util.RESTUtil.processURLRequest(RESTUtil.java:130)
    at org.apache.axis2.transport.http.AxisServlet$RestRequestProcessor.processURLRequest(AxisServlet.java:817)
    at org.apache.axis2.transport.http.AxisServlet.doGet(AxisServlet.java:267)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: org.apache.axis2.AxisFault: Mapping qname not fond for the package: com.example.models
    at org.apache.axis2.databinding.utils.BeanUtil.getPropertyQnameList(BeanUtil.java:261)
    at org.apache.axis2.databinding.utils.BeanUtil.getPullParser(BeanUtil.java:67)
    at org.apache.axis2.databinding.utils.reader.ADBXMLStreamReaderImpl.processProperties(ADBXMLStreamReaderImpl.java:994)
    at org.apache.axis2.databinding.utils.reader.ADBXMLStreamReaderImpl.next(ADBXMLStreamReaderImpl.java:831)
    at org.apache.axis2.util.StreamWrapper.next(StreamWrapper.java:71)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:672)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.build(OMSerializableImpl.java:78)
    at org.apache.axiom.om.impl.llom.OMElementImpl.build(OMElementImpl.java:745)
    at org.apache.axiom.om.impl.llom.OMElementImpl.detach(OMElementImpl.java:723)
    at org.apache.axiom.om.impl.llom.OMNodeImpl.setParent(OMNodeImpl.java:105)
    at org.apache.axiom.om.impl.llom.OMElementImpl.addChild(OMElementImpl.java:297)
    at org.apache.axiom.om.impl.llom.OMElementImpl.addChild(OMElementImpl.java:213)
    at org.apache.axiom.soap.impl.llom.SOAPBodyImpl.addChild(SOAPBodyImpl.java:231)
    at org.apache.axis2.rpc.receivers.RPCUtil.processResponseAsDocLitWrapped(RPCUtil.java:422)
    at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:138)
    ... 25 more
Caused by: org.apache.axis2.AxisFault: Mapping qname not fond for the package: com.example.models
    at org.apache.axis2.databinding.utils.BeanUtil.getPropertyQnameList(BeanUtil.java:117)
    ... 40 more
</Exception> 
```

所以我想知道的是如何做到这一点。我读过[类似的帖子](https://stackoverflow.com/questions/7196843/custom-class-in-axis2-web-service)，但老实说，我仍然不明白我必须在哪里添加这个映射来解决问题。还只是指出 Web 服务的部署很好，而且 wsdl 也可以很好地生成。

对不起，很长的帖子，但希望有人可以帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:03:53.697

问题是由于 Java2WSDL 无法使用 Java 集合，因此解决方案是在使用 Web 服务时不使用 Java 集合，而是使用数组。

基本上为了让我的网络服务正常工作，我做了以下更改。

```
package com.example.service;
import com.example.models;
public class MyService {
    public MyClass[] getExampleData(// a parameter) {  
        // Do something
        return myClassArray;
    }
} 
```

对于任何想要了解有关 Java 集合无法使用 Java2WSDL 的更多信息的人，您可以参考[Java Web 服务：IBM DeveloperWorks 的 Axis2 Data Binding](http://www.ibm.com/developerworks/webservices/library/ws-java3/)。

# c# - FTPWebRequest 读取服务器上的文件并返回文件名列表

> ID：12289789
> 
> 赞同：1
> 
> 时间：2012-09-05T21:05:50.247
> 
> 标签：c#, ftpwebrequest

我创建了一个方法，可以从 FTP 服务器读取所有文件名，扩展名为 *.xml，并返回一个字符串文件名数组。但我收到一些错误“不支持给定路径的格式..”这是代码片段：

```
protected static string[] FTPRelativePaths(string[] filelist)
{
    if (null == filelist)
        return new string[0];

    string[] result = new string[filelist.Length];
    for (int index = 0; index < filelist.Length; ++index)
        result[index] = Path.GetFileName(filelist[index]);

    return result;
}

public static string[] GetFileList(Uri serverUri, string ftpUserID,
    string ftpPassword)
{
     // The serverUri parameter should start with the ftp:// scheme.
     if (serverUri.Scheme != Uri.UriSchemeFtp)
     {
         return null;
     }

     string[] fileList= new string[0];
     try
     {
         WebRequest.DefaultWebProxy = null;
         FtpWebRequest ftprequest =(FtpWebRequest)WebRequest.Create(serverUri);
         //ftprequest.UseBinary = true;
         ftprequest.Method = WebRequestMethods.Ftp.ListDirectory;
         ftprequest.Credentials =new NetworkCredential(ftpUserID, ftpPassword);
         FtpWebResponse response = ftprequest.GetResponse() as FtpWebResponse;
         string ext = "*.xml";
         string[] foundfiles = FTPRelativePaths(
             Directory.GetFiles(serverUri.ToString(), ext));

         if (foundfiles.Length > 0)
         {
             string[] newlist = new string[foundfiles.Length];
             foundfiles.CopyTo(newlist, fileList.Length);
             fileList = newlist;
             System.Array.Sort(fileList);
         }

         response.Close();
         return fileList;
     }
     catch (Exception ex)
     {
         System.Windows.Forms.MessageBox.Show(ex.Message);
         fileList = null;
         return fileList;
     }
 } 
```

一旦我得到一个数组中的所有文件名，我将把它绑定到 ComboBox sitesXmlCombo 对象中，如下所示：

```
Uri uri = new Uri(uriString);               
string[] xmlFiles = FileList.GetFileList(uri, "username", "password");

sitesXmlCombo.DataSource = xmlFiles;
Cursor.Current = Cursors.Arrow; 
```

我怎样才能做到这一点？感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:17:26.980

我认为您在 Uri 上有错误；试试这个：

```
string _remoteHost = "ftp://ftp.name.com/htdocs/directory/";
FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(_remoteHost)); 
```

# javascript - Javascript的依赖管理器？

> ID：12289793
> 
> 赞同：2
> 
> 时间：2012-09-05T21:06:04.957
> 
> 标签：javascript, requirejs, js-amd

是否有任何 JavaScript 依赖管理器不依赖于加载模块异步/从服务器获取数据？我知道 require.js 和其他人，但似乎这不是我想要的，或者我可能误解了他们。

我在一个文件中定义了 Backbone 类，在另一个文件中定义了一些其他内容，我使用 squishit 将所有 JavaScript 文件组合成一个文件（避免多个请求）。一切正常，但我看到将来可能存在依赖处理的一些问题。现在我有一个选择，我可以使用许多 AMD 加载程序之一（例如 require），我的问题将得到解决，但是我再次使用 squishit，因此我可以避免对服务器的多个请求，并且通过使用 AMD 加载程序我不能'不要那样做。我看到如果我使用 Java 或 Node，我可以使用 require-optimizer 将一些模块组合到包中——我没有。

所以我试图寻找一些只做依赖管理而没有异步加载的东西，但没有找到任何东西。

有谁知道会做我想做的事？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:10:20.770

我没有仔细看，但 Google Closure 的依赖管理似乎非常可配置。您可以按照您想要的方式在“编译”时构建所有内容。

[http://blog.carduner.net/2009/11/08/using-google-closure-with-your-js-libraries/](http://blog.carduner.net/2009/11/08/using-google-closure-with-your-js-libraries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:41:40.417

由于没有人在单独的 anwser 上建议 Require.js + 优化器，我将回答我自己的问题。

经过大量搜索和阅读，我发现 Require.js + node 最适合这种情况。

# javascript - 如何使Javascript不覆盖以前的功能？

> ID：12289798
> 
> 赞同：1
> 
> 时间：2012-09-05T21:06:19.977
> 
> 标签：javascript

```
<!-- inEar -->
$("#inEear ul li a").ready(function(){
    thisBlock = $("#dueceBlock");
    maxWidth = 280; /*controls max width of the block*/
    minWidth = 180; /*controls min widht of the block*/

    $("#inEar ul li a").hover(
      function(){
        $(thisBlock).animate({width: minWidth+"px"}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth+"px"}, {specialEasing:'easeInOutBounce', duration:300}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth-"px"}, {specialEasing:'easeInOutBounce', duration:100}, { queue:false, duration:500 });

        thisBlock = this;
      }
    );
})
<!-- inEar end-->

<!-- onEar -->
$(".onEarLink").ready(function(){
    thisBlock = $("#chillBlock");
    maxWidth = 280; /*controls max width of the block*/
    minWidth = 180; /*controls min widht of the block*/

    $(".onEarLink").hover(
      function(){
        $(thisBlock).animate({width: minWidth+"px"}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth+"px"}, {specialEasing:'easeInOutBounce', duration:300}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth-"px"}, {specialEasing:'easeInOutBounce', duration:100}, { queue:false, duration:500 });

        thisBlock = this;
      }
    );
})
<!-- onEar end-->

<!-- overEar -->
$(".overEarLink").ready(function(){
    thisBlock = $("#heroBlock");
    maxWidth = 400; /*controls max width of the block*/
    minWidth = 100; /*controls min widht of the block*/

    $(".overEarLink").hover(
      function(){
        $(thisBlock).animate({width: minWidth+"px"}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth+"px"}, {specialEasing:'easeInOutBounce', duration:300}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth-"px"}, {specialEasing:'easeInOutBounce', duration:100}, { queue:false, duration:500 });

        thisBlock = this;
      }
    );
}) 
```

* * *

我的问题是：我的第三个函数（.overEarLink）不断覆盖第一个函数（#inEar ul li a）和第二个函数（.onEarLink）。这不是我想要的。我想让三个函数调用不同的部分并控制它们自己的动画。我不明白为什么即使我指定了每个函数的不同名称，为什么第三个函数仍然覆盖第一个函数和第二个函数。

感谢大家的帮助。

* * *

添加 var 作品，感谢您的回答。但是，我也在 maxWidth 和 minWidth 上使用了 var。然而，同样的事情发生了，第三个 var 再次覆盖了第一个 var 和第二个 var。这是它的代码：

```
$("#overEar ul li a").ready(function(){
   var thisBlock = $("#heroBlock");
   var maxWidth = 358; /*controls max width of the block*/
   var minWidth = 180;

   var thisBlock = $("#reverbBlock"); /*controls min widht of the block*/
   var maxWidth = 340; 
   var minWidth = 180;

   var thisBlock = $("#solosBlock"); 
   var maxWidth = 402; 
   var minWidth = 180;

    $("#overEar ul li a").hover(
      function(){
        $(thisBlock).animate({width: minWidth+"px"}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth+"px"}, {specialEasing:'easeInOutBounce', duration:300}, { queue:false, duration:500 });
    $(this).animate({width: maxWidth-"px"}, {specialEasing:'easeInOutBounce', duration:100}, { queue:false, duration:500 });

        thisBlock = this;
      }
    );
}) 
```

谢谢大家的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:08:48.410

您需要使用*局部变量*，以便每个函数都有与其他函数不同的变量。例如，改变这个：

```
 thisBlock = $("#heroBlock");
    maxWidth = 400; /*controls max width of the block*/
    minWidth = 100; /*controls min widht of the block*/ 
```

对此：

```
 var thisBlock = $("#heroBlock");
    var maxWidth = 400; /*controls max width of the block*/
    var minWidth = 100; /*controls min widht of the block*/ 
```

`var`关键字将变量的范围限制为声明[它](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)的特定函数。

# spring - 如何使用 JUNIT 在 DAO 测试中使用依赖注入？

> ID：12289800
> 
> 赞同：0
> 
> 时间：2012-09-05T21:06:29.873
> 
> 标签：spring, hibernate, dependency-injection, junit, dao

我正在使用 Hibernate 和 Spring。Mys DAO 正在我的应用程序中工作。我现在需要创建测试，但我有一个问题。

这是我的课堂测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:applicationContext-test.xml"})
@TestExecutionListeners({DependencyInjectionTestExecutionListener.class})
public class MunicipioDaoTest {

    @Autowired
    private MunicipioDAO municipioDAO;

    @Test
    public void testCount() {
        ...     
        municipioDAO.count();
        ...
    }

    @Test
    public void testGet() {
        ...   
        municipioDAO.get(1);
        ...
    } 
```

**testCount() 有效，但使用 testGet() 我得到了这个异常：**

```
org.hibernate.MappingException: Unknown entity: com.eagle.eagleservice.model.entity.Municipio
at org.hibernate.internal.SessionFactoryImpl.getEntityPersister(SessionFactoryImpl.java:1192)
at org.hibernate.internal.SessionImpl.locateEntityPersister(SessionImpl.java:2436)
at org.hibernate.internal.SessionImpl.access$2100(SessionImpl.java:172)
at org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.<init>(SessionImpl.java:2378)
at org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.<init>(SessionImpl.java:2382)
at org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.<init>(SessionImpl.java:2369)
at org.hibernate.internal.SessionImpl.byId(SessionImpl.java:1052)
at org.hibernate.internal.SessionImpl.load(SessionImpl.java:967)
at com.eagle.core.model.dao.AbstractDAO.get(AbstractDAO.java:104)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy56.get(Unknown Source)
at com.eagle.eagleservice.model.dao.MunicipioDaoTest.testFind(MunicipioDaoTest.java:55)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这是我的`applicationContext-test.xml`：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:zksp="http://www.zkoss.org/2008/zkspring/core"
xmlns:jee="http://www.springframework.org/schema/jee"
xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.1.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
    http://www.zkoss.org/2008/zkspring/core http://www.zkoss.org/2008/zkspring/core/zkspring-core.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<context:annotation-config />
<context:component-scan base-package="com.eagle.core, com.eagle.eagleservice" />

<!-- Enables ZK custom scopes for Spring Beans -->
<zksp:zk-config/>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.postgresql.Driver" />
    <property name="url" value="jdbc:postgresql://servidor:5432/eagleservice_tu" />
    <property name="username" value="admin" />
    <property name="password" value="admin" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.eagle.core.model, com.eagle.eagleservice.model" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="javax.persistence.validation.mode">auto</prop>

            <!-- Habilita a alteração do banco de dados automaticamente sempre que o mapeamento das entidades forem alteradas -->
            <prop key="hibernate.hbm2ddl.auto">update</prop>            
        </props>
    </property>
</bean>

<!-- A transaction manager for working with Hibernate SessionFactories -->
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="messageSource"   class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:org/springframework/security/messages"/>
</bean> 
```

**这里有什么问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:03:40.963

Spring 运行正常，DAO 被注入到测试中。

该错误`Unknown entity: com.eagle.eagleservice.model.entity.Municipio`是由于 Hibernate 无法找到 DAO 正在使用的 Municipo 类。

看起来 sessionFactory bean 没有扫描实体所在的`com.eagle.eagleservice.model.entity`包`Municipio`。

在 sessionFactory bean 中，更改

```
<property name="packagesToScan" value="com.eagle.core.model, com.eagle.eagleservice.model" /> 
```

包括`com.eagle.eagleservice.model.entity`

```
<property name="packagesToScan" value="com.eagle.core.model, com.eagle.eagleservice.model, com.eagle.eagleservice.model.entity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:09:39.860

`packagesToScan`不包含实体类所在的包：`com.eagle.eagleservice.model.entity`。

# oop - Scala扩展参数化抽象类

> ID：12289806
> 
> 赞同：12
> 
> 时间：2012-09-05T21:06:40.507
> 
> 标签：oop, scala, inheritance

我对 Scala 相当陌生，正在编写一个 API 库并尝试仅使用 val 和不可变对象（如果可能）。我正在尝试确定建模对象的正确方法。假设有几个“Post”对象，它们都共享一些公共字段，并且每个都添加自己的特定字段：

```
abstract class Post(val id: Int, val name: String, ...)
case class TextPost(val id: Int, val name: String, ..., val text: String) extends Post(id, name, ...)
case class PhotoPost(val id: Int, val name: String, ..., val url: String) extends Post(id, name, ...) 
```

这种方法增加了很多重复的声明和样板代码，尤其是在处理许多 Post 子类和在抽象类中声明的共享字段时。在我看来，这是由于使用只能由构造函数初始化的 vals 引起的。有没有更好的方法来创建这里详述的关系，或者我必须因为只想使用不可变对象而遭受这种痛苦？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T22:09:57.477

首先，`val`case-class 构造函数中的修饰符是多余的，Scala 编译器已经“免费”将它们提供给您（这是 case-classes 的特性之一）。如果您实际上尝试编译它，您将看到由于未声明的覆盖而发生错误：

```
abstract class Post(val id: Int, val name: String )
case class TextPost(id: Int, name: String) extends Post(id, name )
case class PhotoPost(id: Int, name: String) extends Post(id, name )

<console>:10: error: overriding value id in class Post of type Int;
 value id needs `override' modifier
           case class PhotoPost(id: Int, name: String) extends Post(id, name )
                                ^ 
```

我个人建议尽可能少地使用带有构造函数参数的抽象类。Scala 的特性在这里做得更好。您（抽象地）声明字段，而不是构造函数参数；然后案例类开始运行，由于它们自动提出论点`vals`，你就完成了：

```
trait Post { def id: Int; def name: String }
case class TextPost(id: Int, name: String, text: String) extends Post
case class PhotoPost(id: Int, name: String, url: String) extends Post 
```

此外，如果您添加`sealed`到`trait Post`，您可以安全地使用`Post`in 模式匹配的子类型，而不会意外丢失案例。

# jquery - 匿名函数错误

> ID：12289809
> 
> 赞同：1
> 
> 时间：2012-09-05T21:06:47.003
> 
> 标签：jquery, function

有人可以告诉我以下有什么问题吗？

```
$(document).ready(function() {
    $('.nav_menu .dropdown').css('display', 'block');
    $('ul.nav').toggleclass('dropmenu');
    $('.nav_menu > ul').dropmenu({
        effect: 'slide',
        speed: 250,
        timeout: 0,
        nbsp: false
    });
});​ 
```

Safari 报告说，toggleclass 是一个匿名函数，不管这意味着什么！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T21:07:48.967

我想你错过了骆驼案`toggleClass`

```
//                v--- case C instead of c
$('ul.nav').toggleClass('dropmenu'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T21:07:33.603

**这是一个错字： c --> C**
它应该是：

```
.toggleClass()
       ^-------------camelCase, big C 
```

# javascript - 隐藏的 ASP.NET 文本框值不起作用 jquery

> ID：12289812
> 
> 赞同：0
> 
> 时间：2012-09-05T21:06:58.970
> 
> 标签：javascript, jquery, asp.net, textbox, textinput

我有一个 ASPX 页面，我需要在其中使用“YourName”设置“FirstName”的值。两者都是文本框。“YourName”在页面上设置为 visible=false。问题是 Jquery 只能工作`visible=true`。

我的目标是使用 YourName 的条件设置 Firstname 和 YourName `visible=false`。

这是详细信息

```
<asp:TextBox runat="server" ID="fnameTextBox" />
<asp:TextBox runat="server" ID="ynameTextBox" visible="false" />

<script type="text/javascript">
    $(document).ready(function () {
        $('input:text[id*=fnameTextBox]').val($('input:text[id*=ynameTextBox]').val());
    });
</script> 
```

我可以将“ynametextbox”中的值存储到其他类型或变量中，但我不知道如何在 Jquery 中引用（如果可能的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:05:54.767

这是`HiddenField`按要求提供的示例：

Javascript：

```
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $('#<%=fnameTextBox.ClientID %>').val($('#<%=hiddenTextYourName.ClientID %>').val());
    });
</script> 
```

HTML

```
<asp:TextBox runat="server" ID="fnameTextBox" />
<asp:HiddenField runat="server" ID="hiddenTextYourName" Value="Hanlet" /> 
```

隐藏字段对用户当然是不可见的，但要小心，因为他们仍然可以看到 HTML 中的值。

祝你好运..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:46:15.313

当我们写 visible = "false" 时，它不会在 html 中呈现。因此，javascript 无法获取该元素。而是尝试 style="visibility:hidden;"

```
<asp:TextBox runat="server" ID="fnameTextBox" />
  <asp:TextBox runat="server" ID="ynameTextBox" Text="hello" style="visibility:hidden;" />
<script type="text/javascript">
    $(document).ready(function () {
        $('input:text[id*=fnameTextBox]').val($('input:text[id*=ynameTextBox]').val());
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T21:13:05.923

这就是 Control 对象的 ClientID 属性的用途。这为您提供了您将在 jQuery 中使用的 javascript 可访问 ID。参考看起来像这样：

```
$(<%=fnameTextBox.ClientID%>) 
```

请记住，当您在 ASP.NET 服务器控件上设置 Visible="false" 时，它根本不会呈现到 HTML 输出中，因此您将无法在 javascript 中访问它。使用 CSS 属性将其隐藏或将其放置在隐藏的 div 中。

# android - 在android上分离无边框按钮

> ID：12289820
> 
> 赞同：1
> 
> 时间：2012-09-05T21:07:20.990
> 
> 标签：android, button

我正在研究 android 项目，我在屏幕底部对齐 2 个按钮。我正在使用无边界主题，但我想在两个按钮之间进行拆分，以区分它们。

下面是我目前拥有的截图

![我目前拥有的按钮样式](../Images/69a38d88765cc55c517c63a4ddd26fbd.png)

在默认对话框之类的东西上，它显示了一个浅灰色边框，如下面的两个按钮上方的屏幕截图所示，在它们之间，这是一个特定的主题还是我必须做些什么才能获得这种外观。

![我追求的按钮外观](../Images/c6a011982bb685f05a3ad7b8d6036051.png)

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:31:35.687

尝试在宽度为 1dip 的两个按钮之间使用视图

```
<Button 
        android:layout_width="wrap_content"
        android:layout_height="60dip"
        android:id="@+id/play"
        android:text="PLAY"
        />
    <View 
        android:id="@+id/vw"
         android:layout_width="1dip"
         android:layout_toRightOf="@+id/play"
         android:background="#000000"
        android:layout_height="60dip"/>
    <Button 
        android:layout_width="wrap_content"
        android:layout_height="60dip"
        android:layout_toRightOf="@+id/vw"
        android:text="PLAY"
        /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:42:04.293

尝试这样的事情

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="@dimen/button_height"
    android:orientation="horizontal" >

    <Button />

    <View
        android:layout_width="1dp"
        android:layout_height="@dimen/button_height"
        android:background="@color/seperator" />

    <Button />
</LinearLayout> 
```

# jquery - 一页有2个不同的fancybox

> ID：12289821
> 
> 赞同：1
> 
> 时间：2012-09-05T21:07:28.853
> 
> 标签：jquery, fancybox

我在同一页面中有两种类型的花式框：

1.  图片库 - 无边框的花式框（选项中的填充设置为 t 0），不同的关闭按钮等
2.  普通的花式框 - 这有边框等

我遇到的问题是，当我单击图片库时，效果很好。但是在那之后，当我点击正常的fancybox链接时，这个链接似乎也像图片库一样工作（我的意思是没有边框，不同的关闭按钮等）。

反之亦然。即正常链接后点击图片库正常。

我有 2 个不同的链接，有 2 个不同的类——fancybox、fancybox_picture。

在文件加载时我写

```
 $('.fancybox.iframe').fancybox({
 //options
 });

 $('.fancybox_picture.iframe').fancybox({
 //different options
 }); 
```

我也尝试使用 .live () ，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:29:43.273

Fancybox (v2.x) 使用一种特殊`class name`的方式来确定内容的类型：`fancybox.iframe`

您的选择`$('.fancybox.iframe')`器使花式框感到困惑。

最好`$('.fancybox')`只使用`$('.fancybox_picture')`。

另一方面，如果你想用“ `iframe`”类型的内容打开fancybox，你有两个（更好的）选择：

`type: "iframe"`1）在您的自定义fancybox脚本中选择API选项，例如

```
 $('.fancybox').fancybox({
  //options
  type: "iframe"
 });
 $('.fancybox_picture').fancybox({
  //different options
  type: "iframe"
 }); 
```

... 或者

2）将课程添加`fancybox.iframe`到您的锚点，例如

```
<a href="{target}" class="fancybox fancybox.iframe"> open 01</a>
<a href="{target}" class="fancybox_picture fancybox.iframe"> open 02</a> 
```

# php - laravel 中的 RESTful 控制器和路由

> ID：12289827
> 
> 赞同：3
> 
> 时间：2012-09-05T21:07:50.947
> 
> 标签：php, rest, laravel

我来自codeigniter，并试图将我的头脑围绕在路由上。我正在关注 [http://codehappy.daylerees.com/using-controllers](http://codehappy.daylerees.com/using-controllers)教程

如果您向下滚动到 RESTful 控制器，Dayle 谈到 Home_Controller 扩展了 base_controller 并添加了公共函数 get_index() 和 post_index()。我已经复制了代码，但是当我去

```
http://localhost/m1/public/account/superwelcome/Dayle/Wales 
```

我得到：

我们走错了方向。服务器错误：404（未找到）。

有什么明显的我做错了吗？我应该把代码放在别的地方吗？这是我的代码

```
class Base_Controller extends Controller {

    /**
     * Catch-all method for requests that can't be matched.
     *
     * @param  string    $method
     * @param  array     $parameters
     * @return Response
     */
     public function __call($method, $parameters)
     {
       return Response::error('404');
     }

     public $restful = true;

     public function get_index()
     {
       //
     }
     public function post_index()
     {
       //
     }

} 
```

在 routes.php 文件中，我有：

```
// application/routes.php
Route::get('superwelcome/(:any)/(:any)', 'account@welcome'); 
```

我的帐户控制器（来自教程）是：

```
// application/controllers/account.php
class Account_Controller extends Base_Controller
{
       public function action_index()
       {
          echo "This is the profile page.";
       }
       public function action_login()
       {
          echo "This is the login form.";
       }
       public function action_logout()
       {
          echo "This is the logout action.";
       }
       public function action_welcome($name, $place)
       {

          $data = array(
            'name' => $name,
            'place' => $place
          );
          return View::make('welcome', $data);
       }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T07:20:04.520

你应该改变线路`application/controllers/account.php`

```
public function action_welcome($name, $place) 
```

至

```
public function get_welcome($name, $place) 
```

因为 Account_Controller 继承`$restful = TRUE`自 Base_Controller 类，使得`action_`-prefixed 函数名不可用。

此外，出于同样的原因，您必须将所有函数前缀更改`account.php`为:)`get_`

# jquery - 如何检查列表项中是否有某个子 Div？

> ID：12289829
> 
> 赞同：0
> 
> 时间：2012-09-05T21:08:00.693
> 
> 标签：jquery, html, selector, parent-child

如何检查 id 为 #showLogo 的 div 是否存在于父 li 中，其类为“image-rollover”？我不能使用 children().length，因为此列表项的子项数量会有所不同。有没有办法直接根据div的id进行检查？

我需要的是这样的：

```
$('li.image-rollover a').mouseover(function() {
    if ($(this).children('#showLogo')) { 
    showLogo();
    } else { 
    hideLogo();
    }       
}); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:21:36.603

如何使用上下文？

```
$('li.image-rollover a').mouseover(function() {
    if ($('#showLogo', this).length) { 
        showLogo();
    }
    else { 
        hideLogo();
    }       
}); 
```

请记住，页面上应该只有一个`#showLogo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T15:25:30.710

请参阅以下内容：

**[https://jsfiddle.net/JokerDan/m8n5ay1a/](https://jsfiddle.net/JokerDan/m8n5ay1a/)**

使用`.is`JQuery 中的方法可以查看元素是否具有特定的 .class、状态（例如*:hidden*）或 #id 等等。

在此示例中，有一个小列表，当您将已定义 id 的项目（在本例中为“#showLogo”）滚动到其中时，您将收到一条警报，指出已检测到该 ID。只需将警报换成所需的代码并完成“其他”逻辑！

```
$('li.image-rollover a').mouseover(function() {
  //console.log($(this).is('#showLogo'));
  if ($(this).is('#showLogo')) {
    alert("Roll Over Has ID 'showLogo'");
  } else {

  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:12:07.480

我对你的问题不是很清楚..但试试

```
$('#showLogo').parent().hasClass('image-rollover') 
```

# visual-studio-2012 - 如果构建后事件运行返回错误的程序，如何中止或失败 Visual Studio 构建

> ID：12289831
> 
> 赞同：2
> 
> 时间：2012-09-05T21:08:08.483
> 
> 标签：visual-studio-2012, post-build-event

如果一个项目的构建后事件将一些错误代码返回给 Visual Studio，是否可以中止构建具有多个项目的 Visual Studio 解决方案？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T07:27:43.490

我刚刚发现：[文章](http://geekswithblogs.net/dchestnutt/archive/2006/05/30/80113.aspx) 退出 1 意味着构建后事件失败

# c# - 检索 ODBC 表并插入 SQL Server CE 数据库

> ID：12289832
> 
> 赞同：4
> 
> 时间：2012-09-05T21:08:09.413
> 
> 标签：c#, wpf, sql-server-ce

我有一个到需要一个数据表的数据库的 ODBC 连接。该表有大约 20 行和几千行数据。

我打算将此表插入到我的本地 SQL Server CE 数据库中，以便进一步使用。两种连接都已经过测试并且可以正常工作。

我的尝试只是插入一列以保持简单（我是 C#、编程和 stackoverflow 的新手）。

```
OdbcConnection c = new OdbcConnection(ConnectionString1);
SqlCeConnection d = new SqlCeConnection(ConnectionString2);

c.Open();
d.Open();

string sqlC = "SELECT * FROM ODBCTABLE WHERE ODBCCOLUMN='12345'";
OdbcCommand commandC = new OdbcCommand(sqlC, c);

string sqlD = "INSERT INTO SQLCETABLE(SQLCECOLUMN) VALUES (@sql)";
SqlCeCommand commandD = new SqlCeCommand(sqlD, d);

OdbcDataReader reader = commandC.ExecuteReader();

while (reader.Read())
{
  string x = reader[0].ToString();                   
  commandD.Parameters.Add("@sql",SqlDbType.NVarChar, 5).Value = x;
  commandD.ExecuteNonQuery();     
}

c.Close();
c.Dispose();

d.Close();
d.Dispose(); 
```

我收到错误*此 SqlCeParameterCollection 已包含具有此名称的 SqlCeParameter。*

1.  为什么这是错误的？
2.  有没有办法来解决这个问题？
3.  有没有更好的方法来进行这种转移？（我相信 odbc 不存在 sqlbulktransfer）
4.  作为我在 Stackoverflow 上的第一篇文章，我是否正确地发布了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:12:09.277

更改这部分代码

```
commandD.Parameters.Add("@sql",SqlDbType.NVarChar, 5); 
while (reader.Read()) 
{ 
  string x = reader[0].ToString();                   
  commandD.Parameters["@sql"].Value = x ;
  commandD.ExecuteNonQuery();      
} 
```

出现问题的原因是，在每个循环中，您重复将相同的命名参数添加到集合中，从而导致上述错误。
将参数的创建移到循环外并仅更新循环内的值应该可以解决错误。

是的，我认为您已正确发布问题。

# ruby - Ruby 十进制精度

> ID：12289835
> 
> 赞同：3
> 
> 时间：2012-09-05T21:08:25.613
> 
> 标签：ruby, floating-point, decimal

很抱歉，如果这很明显，但我搜索了 Google、Stack Overflow 和 Ruby 文档，但找不到。

我将如何进行更高精度的小数？例如，在 IRB 中，

```
irb(main):001:0> 3.14159265358979323846
=> 3.141592653589793 
```

它切断了一些小数点。如何保留整个小数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:09:29.847

您需要使用`BigDecimal`该类：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)

> BigDecimal 提供任意精度的浮点十进制算法。

例子：

```
irb(main):009:0> BigDecimal.new("654.687465465496876516874651463549867651")
=> #<BigDecimal:2da6878,'0.6546874654 6549687651 6874651463 549867651E3',45(54)> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:40:04.550

试试这个：

```
require 'bigdecimal/math'
include BigMath
puts PI(70) #You'll get a few more digits above 70, but those will be off. 70 is by no means the maximum.
#=> 0.314159265358979323846264338327950288419716939937510582097494459230781640628620899862802532985155833326733E1 
```

# java - JSONObject 和 JSONArray 的区别

> ID：12289844
> 
> 赞同：119
> 
> 时间：2012-09-05T21:08:51.960
> 
> 标签：java, android, json, arrays

在浏览了谷歌之后，我发现这个[链接](http://www.dotnetfunda.com/interview/exam4309-difference-json-arrary-vs-json-object.aspx)描述了差异，但从语法的角度来看。

在编程场景中，什么时候会优先选择另一个？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-09-05T21:18:43.263

当您在 Android 中处理 JSON 数据时，您将使用`JSONArray`解析以数组括号开头的 JSON。JSON 中的数组用于组织相关项目的集合（可以是 JSON 对象）。
例如：`[{"name":"item 1"},{"name": "item2} ]`

另一方面，您将`JSONObject`在处理以花括号开头的 JSON 时使用。JSON 对象通常用于包含与一项相关的键/值对。例如：`{"name": "item1", "description":"a JSON object"}`

当然，JSON 数组和对象可以相互嵌套。一个常见的例子是一个 API，它返回一个 JSON 对象，其中包含一些元数据以及与您的查询匹配的项目数组：

```
{"startIndex": 0, "data": [{"name":"item 1"},{"name": "item2"} ]} 
```

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2013-04-22T11:14:05.927

区别与（哈希）映射与列表相同。

**JSON对象：**

*   包含命名值（key->value 对、元组或任何你想调用它们的东西）
    *   像`{ID : 1}`
*   元素的顺序并不重要
    *   的 JSONObject`{id: 1, name: 'B'}`等于`{name: 'B', id: 1}`。

**JSON数组：**

*   仅包含系列值
    *   像`[1, 'value']`
*   值的顺序很重要
    *   数组`[1,'value']`不一样`['value',1]`

* * *

例子

```
JSON Object --> { "":""}

JSON Array --> [ , , , ]

{"employees":[
    {"firstName":"John", "lastName":"Doe"},
    {"firstName":"Anna", "lastName":"Smith"},
    {"firstName":"Peter", "lastName":"Jones"}
]} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-07-25T06:29:29.340

最好的编程理解。

> 当语法是`{}`那么这是`JsonObject`
> 
> 当语法是`[]`那么这是`JsonArray`

A`JSONObject`是一个类似 JSON 的对象，可以表示为`JSONArray`. `JSONArray`可以包含一个（或多个）`JSONObject`

希望这对你有帮助！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-05T21:18:50.880

我总是使用对象，它更容易扩展，JSON 数组不是。例如，您最初有一些数据作为 json 数组，然后您需要在其上添加状态标头，除非您将数据嵌套在对象中，否则您会有点卡住。唯一的缺点是创建/解析的复杂性略有增加。

所以而不是

```
[datum0, datum1, datumN] 
```

你会有

```
{data: [datum0, datum1, datumN]} 
```

然后稍后您可以添加更多...

```
{status: "foo", data: [datum0, datum1, datumN]} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-08-29T07:35:52.403

为了更容易理解它，以下是 JSON 对象和 JSON 数组之间的差异：

链接到表格差异： [https ://i.stack.imgur.com/GIqI9.png](https://i.stack.imgur.com/GIqI9.png)

**JSON 数组**

```
1\. Arrays in JSON are used to organize a collection of related items
   (Which could be JSON objects)
2\.  Array values must be of type string, number, object, array, boolean or null
3\.  Syntax: 
           [ "Ford", "BMW", "Fiat" ]
4\.  JSON arrays are surrounded by square brackets []. 
    **Tip to remember**  :  Here, order of element is important. That means you have 
    to go straight like the shape of the bracket i.e. straight lines. 
   (Note :It is just my logic to remember the shape of both.) 
5\.  Order of elements is important. Example:  ["Ford","BMW","Fiat"] is not 
    equal to ["Fiat","BMW","Ford"]
6\.  JSON can store nested Arrays that are passed as a value. 
```

**JSON 对象**

```
1\.  JSON objects are written in key/value pairs.
2\.  Keys must be strings, and values must be a valid JSON data type (string, number, 
    object, array, boolean or null).Keys and values are separated by a colon.
    Each key/value pair is separated by a comma.
3\.  Syntax:
         { "name":"Somya", "age":25, "car":null }
4\.  JSON objects are surrounded by curly braces {} 
    Tip to remember : Here, order of element is not important. That means you can go 
    the way you like. Therefore the shape of the braces i.e. wavy. 
    (Note : It is just my logic to remember the shape of both.)
5\.  Order of elements is not important. 
    Example:  { rollno: 1, firstname: 'Somya'} 
                   is equal to 
             { firstname: 'Somya', rollno: 1}
6\.  JSON can store nested objects in JSON format in addition to nested arrays. 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-09-26T16:15:22.173

两者的使用取决于数据的结构。

简单地说，如果您计划优先考虑唯一标识符（例如主键），则可以使用**嵌套对象方法。**

例如：

```
 {
     "Employees" : {
           "001" : {
               "Name" : "Alan",
               "Children" : ["Walker", "Dua", "Lipa"]
                },
           "002" : {
               "Name" : "Ezio",
               "Children" : ["Kenvey", "Connor", "Edward"]
                }
      } 
```

或者，如果您打算存储一组值而无需唯一标识，请使用**数组优先方法。**

例如：

```
 {
        "Employees":[
               {
                   "Name" : "Alan",
                   "Children" : ["Walker", "Dua", "Lipa"]
               },
               {
                   "Name" : "Ezio",
                   "Children" : ["Kenvey", "Connor", "Edward"]
               }
          ]
       } 
```

尽管您可以将第二种方法与标识符一起使用，但在某些情况下查询和理解可能更难或太复杂。此外，根据数据库，可能必须采用合适的方法。例如：[MongoDB](https://docs.mongodb.com/manual/core/data-modeling-introduction/) / [Firebase](https://firebase.google.com/docs/database/ios/structure-data)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-08T05:24:22.020

当 JSON 以它开头时，`{}`它是一个 Object [JSON object](https://i.stack.imgur.com/ppaQd.jpg)，当它以 [] 开头时，它是一个 Array [JSON Array](https://i.stack.imgur.com/OdfJd.jpg)。

JSON 数组可以包含许多对象，称为对象数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-09T13:27:44.513

我知道，以前的所有答案都对您的问题很有见地。在找到这个 SO 线程前一分钟，我也和你一样困惑。在阅读了一些答案之后，我得到了以下信息：**JSONObject 是一个类似 JSON 的对象，可以表示为数组 JSONArray 中的一个元素。换句话说，一个 JSONArray 可以包含一个（或多个）JSONObject。**

# dart - Dart vs Haxe - 当前状态，炒作，可用性，...？

> ID：12289852
> 
> 赞同：19
> 
> 时间：2012-09-05T21:09:16.833
> 
> 标签：dart, haxe

最近我一直在寻找新的（至少对我来说是新的）方法来制作网络应用程序。我发现了两种看起来很有前途的语言。谷歌 Dart 和 Haxe。两者都可以编译为 javascript，因此它们都应该适用于所有浏览器。

现在，我的问题是，对于那些与其中之一或两者一起工作的人，他们的状态如何。他们经常使用吗？它们有用吗？他们的社区是什么？根据您，哪一个是最好的，或者最有希望的？最重要的是，两者的状态如何，它们是否还在积极发展，你认为哪一个会存活最久？

（编辑：作为奖励，我打算在其中制作一个小游戏，可能使用 html5 画布，那么哪一个对此有最好的支持？）

非常感谢！

-巴勃罗

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-07T06:17:27.860

我是 Eric J. Smith 的对立面——我只能代表 Haxe。

Haxe 绝对是一门很棒的语言。我想说它的大部分商业用途是在游戏行业——能够将相同的代码库编译到 Flash、JavaScript、桌面、iPhone、Android、WebOS 和黑莓上确实令人印象深刻 :) 作为一个例子，看一些在上一届 Ludum Dare 48 小时游戏制作比赛中使用 Haxe[创建](http://blog.skialbainn.com/post/30518104225/haxe-roundup-112)的游戏 - 其中一些甚至在 GitHub 上有源代码。

如果您要在 Haxe 中玩游戏，有几个选择。最流行的似乎是使用[NME](http://www.haxenme.org/)，它是 Haxe 之上的一个库，它为您提供了一个类似 Flash/AS3 的 API，可以编译成许多目标。它确实输出到 JavaScript，但它的主要焦点是 Flash 和 Native CPP（用于 iPhone 等）——因为性能比 JavaScript 好得多。您还可以使用专门针对 JavaScript 的框架，例如 CreateJS - 这是[一篇](http://nickalie.com/posts/67)将 NME 与用于 Haxe 的 CreateJS 进行比较的博客文章。我还听说过[Flambe](https://github.com/aduros/flambe)的好消息，它似乎针对 JavaScript 游戏/交互式图形进行了优化。

*（旁注：Haxe 很容易创建'externs'，所以在 Haxe 中可以使用许多普通的 JavaScript 库而不会遇到太多麻烦）*

对于应用程序开发（不是游戏），Haxe 仍然可以很好 - 这就是我所做的更多。我通常使用非常标准的 JS 技术，例如 jQuery，但 Haxe 提供了一大堆不错的附加功能，包括编译时错误检查、一种非常强大的语言以及与服务器共享代码的能力。我确信 Dart 提供了一些相同的优势。

在成熟度、稳定性和支持度方面：

*   Haxe 已经存在了很长时间，虽然它的开发团队更小，但他们非常投入（看看有[多少变化正在被提交](http://code.google.com/p/haxe/source/list)）。
*   Dart 有一家更大的公司支持它。Haxe 正在建立一个官方基金会来促进 Haxe 的未来——但他们不会像谷歌那样有钱！最终，如果 Dart 真的起飞了——我预测有人会尽快设置 Haxe 以输出到 Dart——就像他们在服务器上使用 NodeJS 一样:)
*   两者似乎都有超级忠诚的社区
*   许多可用于 Haxe 的库似乎与游戏相关 - 大量补间、动画、物理等。不知道 Dart 是如何发展的。

我也很想听听使用过这两种语言的人关于实际语言的差异。从我所了解的情况来看，Haxe 的类型似乎更严格（我更喜欢 - 在编译时捕获更多错误！）但有些人不喜欢这样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T00:55:37.600

我只能代表 Dart。我认为它已经是一个很棒的平台，而且才刚刚开始。谷歌在 Dart 上投入了大量资金，我非常有信心它将成为一个令人难以置信的平台。我儿子和我正在使用画布构建客户端/服务器游戏，并在 Dart 中做两面。到目前为止，这是一次非常好的体验！他们有一个具有完整代码完成、导航和重构支持的编辑器，并且它每天都在变得更好。每天更新编辑器很有趣，因为他们添加了新功能并开始玩新玩具！有不少人在上面做画布游戏项目并取得了不错的成功。唯一的缺点是这个项目还很年轻，还没有很多第三方库，但是每天都有新的库出现。

# css - not:first-child 选择器

> ID：12289853
> 
> 赞同：973
> 
> 时间：2012-09-05T21:09:16.673
> 
> 标签：css, css-selectors

我有一个`div`包含多个标签的`ul`标签。

我只能为第一个`ul`标签设置 CSS 属性：

```
div ul:first-child {
    background-color: #900;
} 
```

但是，我以下尝试为`ul`除第一个标签之外的其他标签设置 CSS 属性不起作用：

```
div ul:not:first-child {
    background-color: #900;
}

div ul:not(:first-child) {
    background-color: #900;
}

div ul:first-child:after {
    background-color: #900;
} 
```

我如何用 CSS 编写：“每个元素，除了第一个元素”？

* * *

## 回答 #1

> 赞同：1712
> 
> 时间：2012-09-05T21:11:23.177

您发布的版本之一[实际上适用](http://jsfiddle.net/5TKjB/)于所有现代浏览器（支持[CSS](http://caniuse.com/#feat=css-sel3)[选择器级别 3](http://www.w3.org/TR/css3-selectors/)）：

```
div ul:not(:first-child) {
    background-color: #900;
} 
```

如果您需要支持旧版浏览器，或者如果您受到`:not`选择器的[限制](http://www.w3.org/TR/css3-selectors/#negation)（它只接受一个[简单的选择器](http://www.w3.org/TR/css3-selectors/#simple-selectors-dfn)作为参数），那么您可以使用另一种技术：

定义一个范围比您想要的更大的规则，然后有条件地“撤销”它，将其范围限制在您想要的范围内：

```
div ul {
    background-color: #900;  /* applies to every ul */
}

div ul:first-child {
    background-color: transparent; /* limits the scope of the previous rule */
} 
```

限制范围时，请为您设置的每个 CSS 属性使用[默认值。](http://www.w3.org/TR/CSS2/colors.html#background-properties)

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2013-03-19T21:33:05.643

这个 CSS2 解决方案（“any `ul`after another `ul`”）也可以工作，并且得到更多浏览器的支持。

```
div ul + ul {
  background-color: #900;
} 
```

与`:not`and不同`:nth-sibling`，IE7+ 支持[相邻兄弟选择器。](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)

如果您在页面加载后让**JavaScript**更改这些属性，您应该查看**IE7**和**IE8**实现中的一些已知错误。 [请参阅此链接](http://www.quirksmode.org/css/selectors/)。

对于任何静态网页，这应该可以完美运行。

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2013-02-22T21:07:48.580

由于`:not`不被**IE6-8**接受，我建议你这样做：

```
div ul:nth-child(n+2) {
    background-color: #900;
} 
```

`ul`所以你在它的父元素中挑选每个，*除了第一个*。

[有关更多示例](http://css-tricks.com/useful-nth-child-recipies/)，请参阅 Chris Coyer 的**[“有用的 :nth-child 食谱”](http://css-tricks.com/useful-nth-child-recipies/)**文章。`nth-child`

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2017-08-19T16:36:14.297

`not(:first-child)`似乎不再起作用了。至少对于最新版本的 Chrome 和 Firefox。

相反，试试这个：

```
ul:not(:first-of-type) {} 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2014-10-16T11:10:18.553

```
div li~li {
    color: red;
} 
```

支持IE7

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2021-04-28T21:53:28.527

您可以在“not()”伪类中使用“first-child”伪类。

```
div ul:not(:first-child){
    background-color: #900;
}
```

```
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pseudo Classes</title>
</head>
<body>
  <div>
    <ul>
       <li><a href="#">Home</a></li>
       <li><a href="#">Products</a></li>
    </ul>
    <ul>
       <li><a href="#">About</a></li>
       <li><a href="#">Contact</a></li>
    </ul>
    <ul>
       <li><a href="#">Services</a></li>
       <li><a href="#">Downloads</a></li>
    </ul>
    <ul>
       <li><a href="#">Facebook</a></li>
       <li><a href="#">Instagram</a></li>
    </ul>
  </div>
</body>
</html>
```

替代方式，

1.  使用“nth-child()”，它将选择第 n 个孩子。

```
div ul:not(:nth-child(1)){
    background-color: #900;
}
```

```
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pseudo Classes</title>
</head>
<body>
  <div>
    <ul>
       <li><a href="#">Home</a></li>
       <li><a href="#">Products</a></li>
    </ul>
    <ul>
       <li><a href="#">About</a></li>
       <li><a href="#">Contact</a></li>
    </ul>
    <ul>
       <li><a href="#">Services</a></li>
       <li><a href="#">Downloads</a></li>
    </ul>
    <ul>
       <li><a href="#">Facebook</a></li>
       <li><a href="#">Instagram</a></li>
    </ul>
  </div>
</body>
</html>
```

2.  使用“nth-of-type()”，它将选择其父元素的第 n 个元素。

    ```
    div ul:not(:nth-of-type(1)){
        background-color: #900;
    }
    ```

    ```
    <html>
      <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Pseudo Classes</title>
    </head>
    <body>
      <div>
        <ul>
           <li><a href="#">Home</a></li>
           <li><a href="#">Products</a></li>
        </ul>
        <ul>
           <li><a href="#">About</a></li>
           <li><a href="#">Contact</a></li>
        </ul>
        <ul>
           <li><a href="#">Services</a></li>
           <li><a href="#">Downloads</a></li>
        </ul>
        <ul>
           <li><a href="#">Facebook</a></li>
           <li><a href="#">Instagram</a></li>
        </ul>
      </div>
    </body>
    </html>
    ```

3.  使用“nth-last-child()”，它将选择从最后一个孩子开始计数的第 n 个孩子。如果你有 4 个“ul”标签，你可以这样写。

```
div ul:not(:nth-last-child(4)){
    background-color: #900;
}
```

```
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pseudo Classes</title>
</head>
<body>
  <div>
    <ul>
       <li><a href="#">Home</a></li>
       <li><a href="#">Products</a></li>
    </ul>
    <ul>
       <li><a href="#">About</a></li>
       <li><a href="#">Contact</a></li>
    </ul>
    <ul>
       <li><a href="#">Services</a></li>
       <li><a href="#">Downloads</a></li>
    </ul>
    <ul>
       <li><a href="#">Facebook</a></li>
       <li><a href="#">Instagram</a></li>
    </ul>
  </div>
</body>
</html>
```

4.  使用“nth-last-of-type()”，它将选择其父元素的第 n 个元素，从最后一个子元素开始计数。如果你有 4 个“ul”标签，你可以这样写。

```
div ul:not(:nth-last-of-type(4)){
    background-color: #900;
}
```

```
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pseudo Classes</title>
</head>
<body>
  <div>
    <ul>
       <li><a href="#">Home</a></li>
       <li><a href="#">Products</a></li>
    </ul>
    <ul>
       <li><a href="#">About</a></li>
       <li><a href="#">Contact</a></li>
    </ul>
    <ul>
       <li><a href="#">Services</a></li>
       <li><a href="#">Downloads</a></li>
    </ul>
    <ul>
       <li><a href="#">Facebook</a></li>
       <li><a href="#">Instagram</a></li>
    </ul>
  </div>
</body>
</html>
```

这些是处理此类情况的一些最佳方法。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-03-25T09:11:00.213

您可以使用任何选择器`not`

```
p:not(:first-child){}
p:not(:first-of-type){}
p:not(:checked){}
p:not(:last-child){}
p:not(:last-of-type){}
p:not(:first-of-type){}
p:not(:nth-last-of-type(2)){}
p:not(nth-last-child(2)){}
p:not(:nth-child(2)){} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-05-04T04:04:08.240

您可以使用您的选择器，`:not`如下所示，您可以在`:not()`

```
any_CSS_selector:not(any_other_CSS_selector){
    /*YOUR STYLE*/
} 
```

> 您也可以`:not`在没有父选择器的情况下使用。

```
 :not(:nth-child(2)){
        /*YOUR STYLE*/
   } 
```

更多示例

```
any_CSS_selector:not(:first-child){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:first-of-type){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:checked){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:last-child){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:last-of-type){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:first-of-type){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:nth-last-of-type(2)){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:nth-last-child(2)){
    /*YOUR STYLE*/
}
any_CSS_selector:not(:nth-child(2)){
    /*YOUR STYLE*/
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-08-08T13:13:25.940

上面的一些我没有运气，

这是唯一对我有用的

`ul:not(:first-of-type) {}`

当我试图让页面上显示的第一个按钮不受左边距选项的影响时，这对我有用。

这是我首先尝试的选项，但没有奏效

`ul:not(:first-child)`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-01-24T15:19:07.987

正如我使用`ul:not(:first-child)`的是一个完美的解决方案。

```
div ul:not(:first-child) {
    background-color: #900;
} 
```

为什么这是完美的，因为通过使用`ul:not(:first-child)`，我们可以在内部元素上应用 CSS。比如`li, img, span, a`标签等。

但是当使用其他解决方案时：

```
div ul + ul {
  background-color: #900;
} 
```

和

```
div li~li {
    color: red;
} 
```

和

```
ul:not(:first-of-type) {} 
```

和

```
div ul:nth-child(n+2) {
    background-color: #900;
} 
```

这些仅限制 ul 级别的 CSS。假设我们不能将 CSS 应用`li`为 `div ul + ul li'。

**对于内部级别元素，第一个解决方案完美运行。**

```
div ul:not(:first-child) li{
        background-color: #900;
    } 
```

等等 ...

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-22T08:13:38.543

```
li + li {
    background-color: red;
} 
```

# javascript - 使用 js/jQuery 读取配置文件

> ID：12289857
> 
> 赞同：0
> 
> 时间：2012-09-05T21:09:28.533
> 
> 标签：javascript, jquery, ajax, configuration, get

我想知道如何使用 js/jQuery 读取包含 HEX 颜色的 conf 文件？我想我将不得不使用 Ajax GET 请求来完成它。以及如何以适当的方式解决我将遇到的“跨域”/“同源”安全问题？！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:20:20.677

两种选择：以某种方式返回正确的 CORS 标头，或者使用服务器而不是 jQuery 请求文件。

编辑：也就是说，如果它确实是一个跨域请求。

# symfony-sonata - SonataMediaBundle：文件“”不存在 500 内部服务器错误 - FileNotFoundException

> ID：12289859
> 
> 赞同：2
> 
> 时间：2012-09-05T21:09:32.517
> 
> 标签：symfony-sonata, sonata-admin

我使用 SonataMediaBundle 上传了一些文件，但是当我想添加另一个文件时，我得到了那个错误。

你有什么想法吗？

这是堆栈错误：

```
in /var/www/znata.com/vendor/symfony/symfony/src/Symfony/Component/HttpFoundation/File/MimeType/MimeTypeGuesser.php at line 107  -+

        public function guess($path)
        {
            if (!is_file($path)) {
                throw new FileNotFoundException($path);
            }
            if (!is_readable($path)) { 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-03T15:35:20.223

可能是因为您的 php.ini 设置设置了最大上传大小。

**在php.ini**中将其更改为更高的值

 **```
upload_max_filesize = 2M 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:36:10.147

他找不到文件 if (!is_file($path)) { throw new FileNotFoundException($path); }

我认为您必须重新实例化第二个文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-16T10:30:16.530

如果您的表单没有属性，您可能会遇到类似的错误：enctype="multipart/form-data"**

# python - Python - 如何在视图中模拟实例

> ID：12289861
> 
> 赞同：3
> 
> 时间：2012-09-05T21:09:39.187
> 
> 标签：python, django, unit-testing, mocking

我正在测试我的视图，我需要在将上下文字典发送到 HttpResponse 对象之前对其进行一些断言，以确保我的视图正在按预期进行计算。但是我怎么能断言事情呢？这是我在视图中尝试执行的示例：

```
# some_app/views.py
def my_view(request):
    context = RequestContext(request)

    if request.GET.get('something'):
        value = # calculate the value somehow
        context.update(some_value=value)

    elif request.GET.get('something_else'):
        value = # calculate the value in other way
        context.update(some_value=value)
    # other stuff the view does

    return render_to_response('some_template.html', context_instance=context) 
```

我突然想到，也许我可以修补视图以获得上下文实例：

```
# some_app/tests/unit/test_myview.py
from some_app import views
from mock import patch
from django.test.client import RequestFactory

class MyTest(TestCase):
    def test_my_view(self):
        request = RequestFactory().get('some_url', data={
            'param1': 'a',
            'param2': 'b'
        })
        with patch('some_app.views', [WHAT DO I INCLUDE HERE?]) as context:
            # by now, <context> should be the context instance created in the view
            response = views.my_view(request)
            self.assertTrue(context['some_value']['value1'])
            self.assertFalse(context['some_value']['value2'])
            self.assertRaises(IndexError, some_function,
                              context['some_value']['value1']) 
```

但我想不出一个可行的想法:(

有什么方法可以**在我的测试**中获得我在视图中创建的上下文实例？

谢谢你的帮助 ：）

**PS 在这种情况下，不能进行浏览器内测试或检查生成的 html :(**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:13:34.677

`response.context_data`如果您正在使用，您可以通过测试上下文`TemplateResponse`。尝试：

```
# some_app/views.py
from django.template.response import TemplateResponse

def my_view(request):
    context = {}

    if request.GET.get('something'):
        value = # calculate the value somehow
        context.update(some_value=value)

    elif request.GET.get('something_else'):
        value = # calculate the value in other way
        context.update(some_value=value)
    # other stuff the view does

    return TemplateResponse(request, 'some_template.html', context) 
```

测试：

```
# some_app/tests/unit/test_myview.py
from some_app import views
from django.test.client import RequestFactory

class MyTest(TestCase):
    def test_my_view(self):
        request = RequestFactory().get('some_url', data={
            'param1': 'a',
            'param2': 'b'
        })

        response = views.my_view(request)
        self.assertTrue(response.context_data['some_value']['value1'])
        self.assertFalse(response.context_data['some_value']['value2'])
        self.assertRaises(IndexError, some_function,
                              response.context_data['some_value']['value1']) 
```

# r - R中独立组之间的显着差异检验

> ID：12289863
> 
> 赞同：-4
> 
> 时间：2012-09-05T21:09:48.427
> 
> 标签：r, anova

```
× 6.18 3.76 5.15 4.02 2.52 1.41 3.36 8.67 9.36
是 9.39 13.50 10.80 12.70 14.70 13.40 10.10 4.12 10.30
z 6.35 3.90 5.32 5.08 8.38 5.84 3.96 3.78    
b 1.15 2.26 1.47 1.93 1.25 2.87 4.19 2.55    

```

我想比较 4 个组 x、y、z、b 并得到哪个组显着不同。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:11:18.763

Kruskal-Wallis 是一种非参数检验，它比较多个组以查看一个组是否显着大于其他组。它不决定任何组中的特定值是否重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:17:43.060

您可能会考虑首先查看方法（在将此数据放入数据框“datm”之后）：

```
> aggregate(datm$value, datm['variable'], mean, na.rm=TRUE)
  variable         x
1        x 0.9566667
2        y 1.4277778
3        z 2.3700000
4        b 0.0787500 
```

或在中位数：

```
> aggregate(datm$value, datm['variable'], median, na.rm=TRUE)
  variable     x
1        x 0.750
2        y 1.710
3        z 2.265
4        b 0.010 
```

在包 coin 中有一个基于等级的事后测试（如 kruskal.test 是。）它实际上在 LocationTests 帮助页面的示例中，除了更改公式中的列名称外，无需修改即可复制和数据集名称。该页面没有被引用的作者，但软件包作者在这里：Torsten Hothorn、Kurt Hornik、Mark A. van de Wiel 和 Achim Zeileis：

```
 ### Nemenyi-Damico-Wolfe-Dunn test (joint ranking)
  ### Hollander & Wolfe (1999), page 244 
  ### (where Steel-Dwass results are given)
  if (require("multcomp")) {

    NDWD <- oneway_test(value~variable, data = datm,
        ytrafo = function(data) trafo(data, numeric_trafo = rank),
        xtrafo = function(data) trafo(data, factor_trafo = function(x)
            model.matrix(~x - 1) %*% t(contrMat(table(x), "Tukey"))),
        teststat = "max", distribution = approximate(B = 90000))

    ### global p-value
    print(pvalue(NDWD))

    ### DWin note: prints pairwise p-value for comparison of rankings
    print(pvalue(NDWD, method = "single-step"))
  }
#-----------------------
[1] 0
99 percent confidence interval:
 0.000000e+00 5.886846e-05 

y - x 0.8287000
z - x 0.1039889
b - x 0.1107667
z - y 0.5421778
b - y 0.0053000
b - z 0.0000000 
```

为了回答评论中的问题，这就是我所做的：

```
 dat <- read.table(text="x   y   z   b
 2.06    1.71    2.47    0.00
 1.08    2.73    1.75    0.00
 1.94    2.29    2.44    0.01
 1.32    1.71    2.50    0.01
 0.75    2.40    4.17    0.01
 0.18    0.45    2.09    0.20
 0.72    0.58    1.77    0.30
 0.22    0.35    1.77    0.10
 0.34    0.63  NA NA", header=TRUE)
 require(reshape2)
#Loading required package: reshape2
 datm <- melt(dat)  # then proceeded as above. 
```

# jquery-plugins - 创建一个 Json 作为 Html 数据表的输入

> ID：12289869
> 
> 赞同：0
> 
> 时间：2012-09-05T21:10:16.033
> 
> 标签：jquery-plugins

在 jQuery 中，我试图在下面创建 Json 数据，但由于它与 jQuery 插件“DataTables”相关而遇到了一些困难。

请参阅此 URL 以获取类似示例：[http ://www.datatables.net/release-datatables/examples/data_sources/js_array.html](http://www.datatables.net/release-datatables/examples/data_sources/js_array.html)

我的基于 Json 的变量应该用作以下 DataTable 的输入，但它不起作用（即我的 Datatables Html 表不呈现）：

```
// JSON DATA OF PORTFOLIOS !!
$(this).find("exposureProfile node").each(function () {  
      PfJsonData.aaData.push({
                "PfId": pfId,
                "Name": name,
                "ExpType": expType,
                "Date": nodeDate,
                "Term": term,
                "Exposure": exposure
            });
});

var oTable = $('#pftable').dataTable({             
        "aaData": [PfJsonData],             // "aaData" paramater here !!        
        "aoColumns":[
            { "mData": "PfId" },
            { "mData": "Name" },
            { "mData": "ExpType" },
            { "mData": "Date" },
            { "mData": "Term" },
            { "mData": "Exposure" }
        ],
        'aoColumnDefs': [                              
            { "sTitle": "Pf Id", "aTargets": [0] },    
            { "sTitle": "Name", "aTargets": [1] },
            { "sTitle": "Exp Type", "aTargets": [2] },
            { "sTitle": "Date", "aTargets": [3] },
            { "sTitle": "Term", "aTargets": [4] },
            { "sTitle": "Exposure", "aTargets": [5] },
        ]
    }); 
```

上面的代码根本不会呈现我的 Datatables Html 表。但是，如果我手动创建内联数据，它将正常工作。这是一个示例，仅指出“aaData”参数：

```
 "aaData": [
        {
            "PfId": "11000",
            "Name": "Bob Jr.",
            "ExpType": "Hs Var",
            "Date": "05/01/1967",
            "Term": "term 123",
            "Exposure": "55,000,000"
        },
        {
            "PfId": "12000",
            "Name": "James",
            "ExpType": "Hs Var",
            "Date": "06/14/2003",
            "Term": "term 123",
            "Exposure": "56,000,000"
        }
        ], 
```

如果可能的话，有人可以帮我吗？我希望我的问题足够清楚。

问候，鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:34:34.093

由于您的使用，我假设 PfJsonData.aaData 本身就是一个数组，在这种情况下，我想知道您为什么不简单地使用：

```
"aaData": PfJsonData.aaData, 
```

现有代码似乎将一个对象放在一个新创建的数组中，该数组由 aaData 映射，我不希望它起作用。

# javascript - 更改屏幕高度时的动画功能

> ID：12289872
> 
> 赞同：0
> 
> 时间：2012-09-05T21:10:25.877
> 
> 标签：javascript, jquery, css, jquery-animate, animated

我创建了一个函数，当 jQuery 通过 AJAX 收集新页面内容时，该函数允许将页脚附加/分离到屏幕上。然后从右侧滑入，背景是窗口的 100% 高度和宽度。唯一的事情是，当这个函数被调用时，它会根据新的内容（得到它的高度）跳到正确的大小，让它动画而不是跳来跳去会很棒。

我已经尝试创建第二个函数，当我需要它动画时可以调用它，但它不能正常工作。有没有办法做到这一点，或者这完全不可能？如果是这样，到目前为止我做得如何？任何建议将不胜感激。

当前的“跳跃”功能：

```
function resize() {

    //content_height has been changed to $("#content").height();
    //to collect the new content height
    if($(window).height() < $("#content").height()+291) {
        $(".full").css("height", $(".full").height()+19 + "px");
        $("#footer-wrapper").css({
            bottom: "auto",
            top: ($("#content").height()+147) + "px"
        });
        $(".bg").css("height", ($("#content").height()+272) + "px");
    } else {
        $(".full").css("height", $(window).height()-274 + "px");
        $("#footer-wrapper").css({ bottom: 0, top: "auto" });
        $(".bg").css("height", "100%");
    }
} 
```

动画功能：

```
function animateResize() {
    if($(window).height() < $("#content").height()+291) {
        $(".full").animate({ height: full_height+19 + "px" });
        $("#footer-wrapper").animate({
           bottom: "auto",
           top: ($("#content").height()+166) + "px"
        });
        $(".bg").animate({ height: ($("#content").height()+291) + "px" });
    } else {
        $(".full").animate({ height: $(window).height()-274 + "px" });
        $("#footer-wrapper").animate({ bottom: 0, top: "auto" });
        $(".bg").animate({ height: "100%" });
    }
} 
```

仅供参考，添加的像素是页眉和/或页脚的高度。

# gradle - 如何在 gradle 中使用基本的 groovy 脚本？

> ID：12289876
> 
> 赞同：2
> 
> 时间：2012-09-05T21:10:40.433
> 
> 标签：gradle

所以，我有以下似乎正在按预期工作

```
task deleteJars(type: Delete) {
    ext.collection = files { genLibDir.listFiles() }
    delete ext.collection
}

task copyJars(type: Copy) { 
    from(configurations.compile) {}
    from(fixedLibDir) {}
    into genLibDir
}

copyJars.dependsOn('deleteJars') 
```

我有几个问题

1.  有没有一种更简洁的方式将其写入一个函数中？
2.  以前，我有以下内容，但似乎总是会执行复制功能，而不是在运行 copyJars 任务时？
3.  您如何在任务中编写简单的 groovy（例如删除文件、复制文件等），以便当任务被依赖时，它运行正确？

当任务依赖时，我可怕的尝试让常规运行（但不幸的是，无论我选择什么目标，每次运行都运行）......

```
task('copyJars') { 
    ext.collection = files { genLibDir.listFiles() }
    delete ext.collection
    copy { from configurations.compile into genLibDir }
    copy { from fixedLibDir into genLibDir }
} 
```

所以我的主要问题是如何在任务中编写 groovy 脚本，以便它仅在该任务运行时运行？（因为我认为上面是 groovy 脚本，但它似乎每次都运行）

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:34:07.570

Gradle 构建分为三个阶段：初始化、配置和执行。构建脚本中的大多数代码都在配置阶段进行评估，这与最终将运行哪些任务无关。（只在配置阶段的最后决定运行哪些任务，一旦知道所有任务及其依赖关系。）要添加在任务执行时运行的代码（即在执行阶段），您使用`doFirst`或`doLast`为任务添加所谓的*任务动作*。例如：

```
task copyJars {
    doLast { /* put any Groovy code here */ }
} 
```

[您可以在Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html)中了解有关这些概念的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:33:49.060

好的，所以使用它，这确实有效（尽管必须取出任务类型，否则它不会运行）

```
task copyJars() {
    doLast {
        ext.collection = files { genLibDir.listFiles() }
        delete ext.collection
        copy { from configurations.compile into genLibDir }
        copy { from fixedLibDir into genLibDir }
    }
} 
```

# xslt - XSLT：按 2 个值中的较低值排序

> ID：12289878
> 
> 赞同：8
> 
> 时间：2012-09-05T21:10:43.380
> 
> 标签：xslt, xpath, xslt-1.0

我有一些格式如下的 XML：

```
<products>
  <product>
    <name>Product 1</name>
    <price>
      <orig>15</orig>
      <offer>10</offer>
    </price>
  </product>
  <product>
    <name>Product 2</name>
    <price>
      <orig>13</orig>
      <offer>12</offer>
    </price>
  </product>
  <product>
    <name>Product 3</name>
    <price>
      <orig>11</orig>
    </price>
  </product>
</products> 
```

我需要根据当前价格使用 XSLT 1.0（按升序或降序）对产品进行排序。我的困难在于我需要对两个可能的价格值中的较低值`<orig>`以及它们`<offer>` *是否*都存在进行排序。

对于上面的例子，正确的顺序是：

*   产品 1（最低值 = 10）
*   产品 3（最低值 = 11）
*   产品 2（最小值 = 12）

任何帮助将不胜感激，因为我似乎无法通过搜索找到类似的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T21:40:01.043

*（答案已更新以包含对 XSLT 1.0 和 2.0 的想法）*

**一、XSLT 1.0：**

请注意，XSLT 1.0 没有内置的等价于`min()`; 假设您的解析器支持[`EXSLT`](http://www.exslt.org/)，您可以利用它的[`math:min()`](http://www.exslt.org/math/functions/min/index.html)功能来实现与下面的 XSLT 2.0 变体非常相似的解决方案。

* * *

**二、XSLT 2.0：**

这是一个利用 XPath 2.0 聚合函数的解决方案`min()`。

**当这个 XSLT 2.0 解决方案：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="products">
    <products>
      <xsl:apply-templates select="product">
        <xsl:sort select="min(price/offer|price/orig)"
          data-type="number" order="ascending" />
      </xsl:apply-templates> 
    </products>
  </xsl:template>

</xsl:stylesheet> 
```

**..应用于提供的 XML：**

```
<products>
  <product>
    <name>Product 1</name>
    <price>
      <orig>15</orig>
      <offer>10</offer>
    </price>
  </product>
  <product>
    <name>Product 2</name>
    <price>
      <orig>13</orig>
      <offer>12</offer>
    </price>
  </product>
  <product>
    <name>Product 3</name>
    <price>
      <orig>11</orig>
    </price>
  </product>
</products> 
```

**..产生了想要的结果：**

```
<?xml version="1.0" encoding="UTF-8"?>
<products>
   <product>
      <name>Product 1</name>
      <price>
         <orig>15</orig>
         <offer>10</offer>
      </price>
   </product>
   <product>
      <name>Product 3</name>
      <price>
         <orig>11</orig>
      </price>
   </product>
   <product>
      <name>Product 2</name>
      <price>
         <orig>13</orig>
         <offer>12</offer>
      </price>
   </product>
</products> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T01:33:30.223

**不需要 EXSLT 的 XSLT 1.0 解决方案：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output omit-xml-declaration="no" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="products">
        <products>
            <xsl:apply-templates select="product">
                <xsl:sort select="(price/*[not(. > ../*)])[1]"
                    data-type="number" order="ascending" />
            </xsl:apply-templates> 
        </products>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T03:19:33.973

**I. 有一个通用的纯 XSLT 1.0 解决方案——就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <products>
   <xsl:apply-templates select="*">
    <xsl:sort data-type="number" select=
    "price/*[not(../* &lt; .)]"/>
   </xsl:apply-templates>
  </products>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

**二、如果`price`除了`offer`and`orig`**之外还有其他的孩子——在这种情况下一般的解决方案是**我**。以上（以及此问题的其他两个答案）无法正常工作。

**这是这种情况的正确解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <products>
   <xsl:apply-templates select="*">
    <xsl:sort data-type="number" select=
    "sum(price/orig[not(../offer &lt;= .)])
   +
     sum(price/offer[not(../orig &lt; .)])
    "/>
   </xsl:apply-templates>
  </products>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

**三、如果我们知道`offer`永远不会超过`orig`**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <products>
   <xsl:apply-templates select="*">
    <xsl:sort data-type="number" 
         select="price/offer | price/orig[not(../offer)]"/>
   </xsl:apply-templates>
  </products>
 </xsl:template>
</xsl:stylesheet> 
```

**四。验证**：

当应用于提供的 XML 文档时，上述所有三个转换：

```
<products>
  <product>
    <name>Product 1</name>
    <price>
      <orig>15</orig>
      <offer>10</offer>
    </price>
  </product>
  <product>
    <name>Product 2</name>
    <price>
      <orig>13</orig>
      <offer>12</offer>
    </price>
  </product>
  <product>
    <name>Product 3</name>
    <price>
      <orig>11</orig>
    </price>
  </product>
</products> 
```

**产生想要的正确结果**：

```
<products>
   <product>
      <name>Product 1</name>
      <price>
         <orig>15</orig>
         <offer>10</offer>
      </price>
   </product>
   <product>
      <name>Product 3</name>
      <price>
         <orig>11</orig>
      </price>
   </product>
   <product>
      <name>Product 2</name>
      <price>
         <orig>13</orig>
         <offer>12</offer>
      </price>
   </product>
</products> 
```

**解决方案 II 是三个在应用于此 XML 文档时仍然产生正确结果的唯一**一个（向 中添加了一个`minAcceptable`子项`price`）：

```
<products>
  <product>
    <name>Product 1</name>
    <price>
      <orig>15</orig>
      <offer>10</offer>
      <minAcceptable>8</minAcceptable>
    </price>
  </product>
  <product>
    <name>Product 2</name>
    <price>
      <orig>13</orig>
      <offer>12</offer>
      <minAcceptable>6</minAcceptable>
    </price>
  </product>
  <product>
    <name>Product 3</name>
    <price>
      <orig>11</orig>
      <minAcceptable>7</minAcceptable>
    </price>
  </product>
</products> 
```

**请注意**，其他答案均未正确处理此 XML 文档。

# iphone - 核心数据可转换属性

> ID：12289883
> 
> 赞同：0
> 
> 时间：2012-09-05T21:11:09.373
> 
> 标签：iphone, ios, core-data, nsdictionary, nsmanagedobject

我正在尝试访问可转换的核心数据对象的属性，如下所示：

```
MainObject *localObject = [self.myArray objectAtIndex:indexPath.row];
TransformableObject *actualObject = localObject.transformableObject; 
```

这工作正常。我`NSLog` `actualObject`得到正确的键/值对：

```
actualObject:{

    property = "Foo";
    property2 = "Apple";
} 
```

但是，当我尝试：

`NSLog (@"property:%@",actualObject.property)`我明白了`-[__NSCFDictionary property]: unrecognized selector sent to instance`

我究竟做错了什么？在我的核心数据类中，我有：

```
@interface MainObject : NSManagedObject

@property (nonatomic, retain) TransformableObjectClass *transformableObject; 
```

编辑：这是我在核心数据中设置对象的方式

```
 MainObject *event = (MainObject *)[NSEntityDescription insertNewObjectForEntityForName:@"MainObject" inManagedObjectContext:[AppDelegateMy managedObjectContext]];
        [event setValuesForKeysWithDictionary:[myArrray objectAtIndex:i]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:45:51.167

Core Data 和 Core Data都`-setValuesForKeysWithDictionary:`没有足够的魔力来完成这项工作，而无需您付出更多的努力。现在，您只需将 JSON 响应中的字典分配给新托管对象的`transformableObject`属性。如果您尝试保存上下文，我的猜测是它可能会失败。如果您希望这些字典变成实际`TransformableObjectClass`实例，您需要自己做。

如果您的应用程序中有很多此类东西，您可能需要查看[RestKit](https://github.com/RestKit/RestKit)或其他开源 JSON 到对象映射库之一，如[ClassMapper](https://github.com/pashields/ClassMapper)。

# objective-c - 使用 URL 方案打开应用程序时的奇怪 UI 行为

> ID：12289884
> 
> 赞同：0
> 
> 时间：2012-09-05T21:11:15.237
> 
> 标签：objective-c, ios, xcode, openurl

对我来说，解释这一点的最简单方法是上传一个测试应用程序，因此我删除了所有不必要的内容，并将一个简单的项目上传到 SendSpace。

[http://www.sendspace.com/file/z86g0z](http://www.sendspace.com/file/z86g0z)

我正在编写一个应用程序，它将接收来自 Mobile safari 的自定义 URL，例如“plasma://hello-world”。然后这些由我的应用程序处理，并在屏幕上显示通知。

在测试应用程序中，主类是一个单例，并且有一个“测试”按钮，它演示了当您通过 URL 打开它时会发生什么。您将获得显示在屏幕标签中的自定义链接和顶部的绿色通知标签，然后逐渐消失。在这个过程中，Xcode 控制台会显示这个.....

```
2012-09-05 21:53:29.719 PlasmaLinker[2866:f803] Link: plasma:Test+Link
2012-09-05 21:53:29.778 PlasmaLinker[2866:f803] Show Alert: Success - Link Received
2012-09-05 21:53:35.779 PlasmaLinker[2866:f803] Remove Alert 
```

一切正常。

现在我通过输入“plasma://hello-world”从 Mobile Safari 启动它我按回车键，Safari 切换到我的应用程序，控制台显示完全相同的输出（使用任何 URL 启动它），但是我什么也没得到在用户界面中。链接未放置在文本框中，通知永远不会显示。

我究竟做错了什么？使用 URL 启动后，您可以再次单击测试按钮并查看 UI 元素根据需要更改。它让我发疯，但我不知道能够在通过 URL 启动时让它工作。有人可以对此有所了解吗？

亲切的问候

等离子体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:17:58.737

获取 的单例方法将`PlasmaLinker_ViewController`返回一个与情节提要创建并添加到主窗口的实例不同的实例。

一个有效的例子，（在您的应用程序委托中）

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {

    NSString *link = [NSString stringWithFormat:@"%@",url];
    vc = (PlasmaLinker_ViewController*) self.window.rootViewController;
    [vc processLink:link];

    return YES;

} 
```

另一种选择是覆盖视图控制器`-(id)initWithCoder:(NSCoder *)decoder`并将您的共享实例设置`self`为该方法。

```
+ (PlasmaLinker_ViewController *) sharedInstance
{
    return _sharedInstance;
}

-(id)initWithCoder:(NSCoder *)decoder {

    NSLog(@"In initWithCoder!");
    if (!_sharedInstance) {
        if (self = [super initWithCoder:decoder]) {
            _sharedInstance = self;
        }
    }
    return _sharedInstance;
} 
```

# ruby - 来自两个参数的唯一字符串 (id)

> ID：12289894
> 
> 赞同：0
> 
> 时间：2012-09-05T21:11:34.293
> 
> 标签：ruby, ruby-on-rails-3

我一直在阅读很多关于如何使用哈希、sha、md5 等生成唯一 ID 的内容。

我需要使用两个参数为唯一 url 生成唯一 id，所以我不能使用 md5 哈希或 sha，因为它们太长了，而且 url 会很大。

我喜欢 youtube 识别每个视频的方式，有人知道如何做到这一点吗？有什么要读的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:16:44.107

我认为您应该阅读此线程[如何编写 URL 缩短器？](https://stackoverflow.com/questions/742013/how-to-code-a-url-shortener)它准确地回答了你的问题

# emacs - 如何使用 Emacs 和 GNU Global 找到局部变量的定义？

> ID：12289903
> 
> 赞同：2
> 
> 时间：2012-09-05T21:12:40.277
> 
> 标签：emacs, gnu-global

假设你有这样的 C 代码：

```
void f1() {
    int var1;

    var1 = 1; // local use of var1
}

void f2() {
    int var1;

    var1 = 2; // local use of var1
}

void f3() {
    int var1;

    var 1 = 3; // local use of var1
} 
```

如何在指向本地使用时使用 Emacs 和 GNU Global (gtags.el) 定义局部变量？

我试过**gtags-find-tag**（用“ **var1** ”作为参数），它没有找到任何东西（看起来标签应该是函数），我试过**gtags-find-symbol**，它显示了一个列表具有所有三个**var1**定义（以及可能的用途）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:30:55.753

您不需要 Global 的帮助，但它可以作为键盘宏来完成：

*   记下当前单词，在这种情况下为“var1”
*   使用emacs开头的defun lisp函数向后搜索
*   向前搜索“var1”，这通常是 var1 的定义，因为它是 var1 在当前 defun 中的第一次出现。

从这个 kerboard 宏开始，我编写了以下 lisp 函数：

```
(defun bhj-isearch-from-bod (&optional col-indent)
  (interactive "p")
  (let ((word (current-word)))
    (beginning-of-defun)
    (setq regexp-search-ring (cons (concat "\\b" word "\\b") regexp-search-ring))
    (search-forward-regexp (concat "\\b" word "\\b")))) 
```

# c++ - 使用类进行二维向量值替换；遗传算法变异

> ID：12289904
> 
> 赞同：0
> 
> 时间：2012-09-05T21:12:41.650
> 
> 标签：c++, vector, genetic-algorithm

我有一个由以下类定义的二维向量。请注意，我使用了类，因为我正在尝试编写一个遗传算法，以便创建很多很多 2D 向量并且它们都将是不同的。

```
class Quad: public std::vector<int>
{
    public:
    Quad() : std::vector<int>(4,0) {}
};

class QuadVec : public std::vector<Quad>
{
}; 
```

然而，我的算法的一个重要部分是我需要能够在一定数量的随机选择的 2D 向量中“变异”（随机更改）特定值。这让我很难过。我可以很容易地编写代码来随机选择二维向量中的值，这些值将被选择用于“突变”，但是我如何使用类来实际执行该更改？我了解如何使用已经初始化的一个 2D 向量来完成此操作，但如果尚未初始化，我该怎么做？

如果我没有提供足够的信息或不清楚，请告诉我，因为我倾向于这样做。

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:30:01.787

正如评论中已经指出的那样，继承自在`std::vector`C++ 中被认为是不好的做法，除非有一些非常罕见的情况需要它（请阅读链接以获取更多详细信息）。根据您的问题，您可能正在寻找以下内容：

```
typedef std::vector<std::vector<int>> twodvec; // Create a typedef
twodvec vec1(10, std::vector<int>(4, 0)); // Create twodvec which holds 10 quads
twodvec vec2(20, std::vector<int>(4, 0)); // Create twodvec which holds 20 quads
vec1[0][0] = 1; // Use subscripts to assign values to the preallocated memory
vec2[0][1] = 2; 
```

`push_back`如果您没有预先分配内存，请使用。由于您的课程似乎没有添加任何额外的功能，因此您似乎需要做的只是与上述类似的事情。

要更新显示组成的答案：

```
class QuadVec
{
    std::vector<std::vector<int>> twodvec; // private
public:
    QuadVec() : twodvec(10, std::vector<int>(4, 0))
    {}
    int& operator()(std::size_t row, std::size_t col)
    {
        // checking for out-of-bound indexes would be good to
        return twodvec[row][col];
    }
 }; 
```

然后像这样更新 QuadVec：

```
QuadVec v; 
v(0, 0) = 1; 
```

# coldfusion - 使用 ColdFusion，我如何从给定的 Google Drive 文件夹中检索所有公共文档？

> ID：12289912
> 
> 赞同：0
> 
> 时间：2012-09-05T21:13:05.517
> 
> 标签：coldfusion, google-drive-api

对于我目前的项目，我坚持使用 ColdFusion。我的问题是，在我可以从 Google Drive 上的给定文件夹中检索**“网络上的公共”**文件之前，我需要投入多少工作来重写库功能？换句话说，我有一个预定义的文件夹 ID，需要检索其中的所有公共文件。

这将是我需要的唯一功能，所以如果我只需要一小段，我不想为 GD API 编写完整的功能。

我知道有一个[OAuth 的 ColdFusion 实现](http://oauth.riaforge.org/)，尽管我还没有研究它的功能。我主要关心的是我是否可以在我正在使用的特定情况下完全避免身份验证。

任何指出我正确方向的东西都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:21:31.440

我不知道 Coldfusion，但您可以通过向以下地址发送[授权](https://developers.google.com/drive/about-auth)的GET 请求来[检索文件夹中的公共文件列表](https://developers.google.com/drive/v2/reference/files/list)

```
https://www.googleapis.com/drive/v2/files?q='1234567' in parents and 'anyone' in readers 
```

其中“1234567”是文件夹 ID。

请记住对查询参数进行 URL 编码，以便在发送到 API 时如下所示：

```
'1234567'%20in%20parents%20and%20'anyone'%20in%20readers 
```

您还可以使用[OAuth 2.0 Playground](https://developers.google.com/oauthplayground)尝试相同的请求。

# android - 活动在重新启动时不返回数据

> ID：12289915
> 
> 赞同：0
> 
> 时间：2012-09-05T21:13:25.093
> 
> 标签：android, android-intent, android-activity, application-restart

在 B 重新启动后，我在从活动 A->B->A 出发时遇到了一些麻烦。如何在 B 完成后重新启动活动 B 而不会弄乱如何将意图返回给 A？

使用以下代码从 A 调用 B：

```
 public void activityFunction(Context gameContext){
    //This function was made to pass the player class back and forth between 

    setContentView(R.layout.loadingscreen);
    Intent i = new Intent(gameContext, gamePanel.class);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivityForResult(i,1);
    } 
```

使用以下代码重置 B 游戏活动：

```
 setContentView(R.layout.loadingscreen);
        Intent i = getIntent();
        finish();
        startActivity(i); 
```

B 使用以下代码完成并返回 A：

```
 public void levelOver(){
        setContentView(R.layout.loadingscreen);
        Intent resultIntent = new Intent();
        resultHolder results = new resultHolder(playerStats);
        resultIntent.putExtra(.......);
        resultIntent.putExtra(.......);
        resultIntent.putExtra(.......);
        resultIntent.putExtra(.......);
        setResult(Activity.RESULT_OK, resultIntent);
        finish();
        } 
```

这是在 A 中调用 onActivity 的地方

```
protected void onActivityResult(int requestCode, int resultCode, final Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode) {
    case (1) : {
         if (resultCode == Activity.RESULT_OK) {
         returnedWithResults = true;
         new AsyncReturnGameData().execute(data);
      }
      break;
    } 
  }
} 
```

只要不重新启动，活动 B 100% 的时间返回。当它重新启动时，它会返回一个错误。任何为我指明正确方向的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:58:48.463

尝试改变这一点：

```
 setContentView(R.layout.loadingscreen);
        Intent i = getIntent();
        finish();
        startActivity(i); 
```

对此：

```
 setContentView(R.layout.loadingscreen);
    Intent i = getIntent();       
    startActivity(i);
    finish(); 
```

# c# - 多策略设计模式

> ID：12289918
> 
> 赞同：3
> 
> 时间：2012-09-05T21:13:44.687
> 
> 标签：c#, asp.net-mvc, validation, design-patterns, strategy-pattern

我希望能够收集多个验证实体，它们都共享相同的界面。这就是我想出的：

```
public interface Ivalidateable
{
  bool IsValid(IValidateParam param);
}

public interface IValidateParam
{

}

public abstract EmployeeStrategy: Ivalidateable
{
  public abstract bool IsValid(User user); 
}

public abstract SpreadStrategy: IValidateable
{
 public abstract bool IsAvlid(Campaign campaign);
}

public class User: IValidateParam
{}

public class Campaign: IValidateParam
{}

public EmployeeTypeStragtegy: EmployeeStrategy, IValidateable
{
 public bool IsValid(User user)
 {
  if  (new[]{'e',a','b}.Contains(user.userId.first().toString()))
  return true;

  return false; 
 }
}

public TrailSpreadStrategy: SpreadStrategy, IValidateable
{
 public bool IsValid(Campaign campaign)
 {
  //logic goes here
 }
}

public EvenpreadStrategy: SpreadStrategy:, IValidateable
{
 public bool IsValid(Campaign campaign)
 {
  //logic goes here
 }
}

public class ValidationFactory
{
 private static List<IValidateable> stragtegies;

 static ValidationFactory
 {
  strategies = new List<IValidateable>();
  strategies.Add(new EmployeeTypeStragtegy());
  strategies.Add(new TrailSpreadStrategy());
 }

 public bool IsValid(//Need to pass User/Campaign)
 {
  //what do I do here?
 }
} 
```

传递用户/活动以便我可以循环策略并检查 IsValid 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:51:57.197

这是我的做法：

```
// campaign object class, and it's separate validator logic

public class Campaign
{
}

public class CampaignValidator : IValidationStrategy<Campaign>
{
    public bool IsValid(Campaign test)
    {
        return true;
    }
}

// framework stuff

public interface IValidationStrategy<T>
{
    bool IsValid(T test);
}

public static class ValidationFactory
{
    private readonly static Dictionary<Type, object> _typeValidators;

    static ValidationFactory()
    {
        _typeValidators = new Dictionary<Type, object>();
        _typeValidators[typeof(Campaign)] = new CampaignValidator();
    }

    public static bool IsValid<T>(T obj)
    {
        return ((IValidationStrategy<T>)_typeValidators[typeof(T)]).IsValid(obj);
    }
} 
```

之后，您可以调用`ValidationFactory.IsValid(myObject);`，如果类型在工厂静态构造函数中，它将为您提供真/假。

验证工厂正在做一种 DI/IOC 的事情，即您可以使用 Ninject、Castle 等来实现将类型映射到验证器类型。

您可以动态地或以不同的方式做事，而不必以相同的方式构建字典 - 查看验证器实现的接口的泛型类型参数，或搜索`IValidationStrategy<>`基于 - 的类并再次查看泛型类型参数。但是上面的方法又快又简单。

您是否有理由需要单独的验证器类？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:50:21.200

我建议看看[FluentValidation](http://fluentvalidation.codeplex.com/wikipage?title=CreatingAValidator&referringTitle=Documentation&ANCHOR#Chaining)的嵌套和集合验证功能。如果没有额外的工厂和接口，这应该可以正常工作 - 如果您的策略包含对您想要与它们一起验证的其他实体的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:25:54.650

这个怎么样？

更改您的所有 IsValid 以使用此原型（用户用户、营销活动），例如：

```
public EmployeeTypeStragtegy: EmployeeStrategy, IValidateable
{
 public bool IsValid(User user, Campaign campaign)
 {
    return (new char[]{'e','a','b'}.Contains(user.userId.first().toString());
 }
} 
```

然后按适当的类型处理每个，这样它们都接受相同的参数。进而：

```
public bool IsValid(User user, Campaign campaign)
 {
   bool valid;

   foreach (IValidateable iv in strategies)
   {
      if (!iv.IsValid(user, campaign))
          valid = false;
   }

   // This returns true if all are valid, false if not (not sure if this is the logic you expect)
   return valid;
 } 
```

# javascript - 一周内基于毫秒的舍入算法

> ID：12289925
> 
> 赞同：0
> 
> 时间：2012-09-05T21:14:25.197
> 
> 标签：javascript, algorithm, flot

我试图找出解决四舍五入的最佳方法。

基本上我有这个数字：var weekMilliseconds = 604800000（一周中的毫秒数）

我有另一个函数可以输出一个随机数。

我想做的是基于随机数，我想输出下一个周毫秒的倍数。

例如：

如果随机 # 为 1：向上舍入 604800000

如果随机数为 604800001，则向上取整为 1209600000 (604800000 * 2)

等等.....

实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:26:05.283

使用`Math.ceil()`（它给你下一个整数）：

```
Math.ceil(randomNumber / weekMilliseconds) * weekMilliseconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:19:04.247

你真的可以通过几种方式做到这一点。我建议使用javascript的[`Math.ceil()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)功能。这个想法是，如果你想四舍五入到最接近的数字`y`，则将输入`x`除以`y`。然后将其四舍五入到最接近的整数，并将其乘以要四舍五入的数字。因此，如果您有 11 并且想将其四舍五入为 12，`11/12`则除以 ，将其`~.917`四舍五入`1`，然后乘以`1*12`= 12。所以：`roundTo * ceil(random/roundTo)`

```
weekMilliseconds * Math.ceil(number / weekMilliseconds); 
```

采取以下措施：

1.  228，上限为 49 的倍数。
    *   `49 * ceil(228/49) = 245`
2.  32，上限为 8 的倍数。
    *   `8 * ceil(32/8) = 32`
3.  64，上限为 100 的倍数。
    *   `100 * ceil(64/100) = 100`

# django - Django - 存储所有排序帖子的列表

> ID：12289931
> 
> 赞同：1
> 
> 时间：2012-09-05T21:14:44.647
> 
> 标签：django, django-models

我正在尝试为我的网站建立一个 Reddit 或 Hackernews 风格的社区部分。Upvotes 和 downvotes 以及发布的日期和时间已经实施。Post 模型有一个方法可以返回基于 upvotes、downvotes 和 time 发布的特定帖子的分数。到现在为止还挺好。

现在我不想每次用户加载页面时都对我的所有帖子进行排序。我认为解决方案（如果我错了，请纠正我）是每隔几分钟运行一个脚本，按分数对所有帖子进行排序并保存它们。然后，当用户尝试加载首页时，视图将返回排序帖子列表中的前 20 个帖子，如果有人加载第二页，则视图将返回列表中的下 20 个项目，依此类推。

我天真的方法是有一个看起来像这样的模型：

```
class SortedPosts(models.Model):
    sortedPosts = models.ListField 
```

然后每分钟运行一个脚本，如下所示：

```
from myproject.models import Post, SortedPosts
posts = Post.objects.all()
SortedPosts.sortedPosts = sorted(posts, key = lambda Post: Post.getScore())
SortedPosts.sortedPosts.save() 
```

但是，唉，没有 ListField 这样的东西（至少在香草 Django 中）。当我搜索 SO 时，我发现的唯一解决方案是将列表序列化并将其存储在 TextField 中。那感觉不对。是吗？

Django 中没有 ListField 的事实让我怀疑我开始这样做的方式在更基本的方面是不正确的。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:21:02.460

好吧，假设您已经决定数据库（无论您使用什么）太慢了，而且 Python 也太慢了，无法在每个请求上为您排序列表，那么下一个“正确”的方式真的使用任何可用的众多第三方工具的缓存策略来解决这个问题。

看看[memcached](http://memcached.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T22:35:54.830

实际上，在您的特定情况下，您想象的序列化/反序列化过程可能比使用每个请求对帖子进行排序需要更多时间。

对于 postgresql/mysql 数据库来说，1000 个对象实在是太少了。

没做什么。如果需要，请使用[redis](http://redis.io/)。

要么你需要一个缓存机制，要么你不需要。在你的情况下似乎有点矫枉过正。

更新：

```
Good to know! What if my Post model has a rank field that is kept updated. Can I index by that field and somehow retrieve my posts in order? 
```

所有 django 字段都采用可选参数“db_index”。如果将其设置为它将在`True`其上建立索引。

然后我想你想做类似的事情`Post.objects.order_by('-rank')`

“-”表示`descending`顺序。删除它，你有`ascending`订单。

# soundcloud - 我不小心从 Soundcloud 设置中删除了 Bandpage 连接权限。如何撤消此操作？

> ID：12289932
> 
> 赞同：1
> 
> 时间：2012-09-05T21:14:49.570
> 
> 标签：soundcloud

我的乐队页面仍然有效 - 我无法从 soundcloud 添加任何新歌曲。

我在这里 - [http://soundcloud.com/settings/connections](http://soundcloud.com/settings/connections) - 需要将bandpage连接到“连接的应用程序”

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:29:48.353

如果您将鼠标悬停在右上角的用户名上，则会弹出一个菜单。单击设置，然后单击 soundcloud。然后单击断开 soundcloud（如果它说您可以断开连接）。这将重新加载页面。然后返回相同的过程，但这次连接。这将重置应用程序之间的链接。

# iphone - 通过 UIDataDetectorTypeCalendarEvent 在 iPhone 上为日历事件自动检测哪些日期格式？

> ID：12289933
> 
> 赞同：2
> 
> 时间：2012-09-05T21:15:03.020
> 
> 标签：iphone, ios

当您在 iPhone 上阅读包含“星期四晚上 9 点”之类的短语的电子邮件时，iPhone 会将其变成可点击的链接，允许您在该时间添加日历事件。

以编程方式，这是在某处使用[`UIDataDetectorTypeCalendarEvent`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitDataTypesReference/Reference/reference.html)标志完成的（因此出现）。

我的问题是：此检测器支持哪些时间/日期格式？这是在某处记录的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:54:21.340

解决“在某处使用 UIDataDetectorTypeCalendarEvent 标志”的问题：它适用于 UITextView 视图，如果您关闭了编辑功能，如果您在设置文本值之前告诉它检测类型，我会取得更好的成功。

为了解决您的格式问题：是的..我不知道这是错误还是什么，但日期判断似乎很奇怪。对于使用完全相同格式的日期，我让它看似随机地工作。

这是我使用的格式，但就像我说的，有时它会检测到它，有时它不会。

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterFullStyle];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle]; 
```

我没有找到任何文档......可能是因为它使用了一些疯狂的启发式方法来检测任何“闻起来”像日期/时间的东西。我认为它在检测所有标准格式选项时会完美无缺，但不是。

# stored-procedures - EF5 存储过程问题

> ID：12289937
> 
> 赞同：3
> 
> 时间：2012-09-05T21:15:45.533
> 
> 标签：stored-procedures, entity-framework-5

我有一个实体，它使用存储过程的`Insert`方法。插入操作工作正常，但我目前无法删除记录。我收到此错误：

> *System.Data.Entity.Infrastructure.DbUpdateException：System.Data.Entity.Infrastructure.DbUpdateException：在映射文件中找不到实体类型“LoanDetail”的 DeleteFunctionMapping。---> System.Data.UpdateException：在映射文件中找不到实体类型“LoanDetail”的 DeleteFunctionMapping。*

我在 Julie Lerman 的书中读到，不再需要为所有方法指定 procs。这是 4.x 版的一个特性，现在又被收紧了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:08:28.903

至少在 Beta 版中，这似乎是一个问题。请查看以下 MSDN 线程：

[http://social.msdn.microsoft.com/Forums/en-US/silverlightwcf/thread/9a59afab-a760-4e28-abad-cef34b3a712e/](http://social.msdn.microsoft.com/Forums/en-US/silverlightwcf/thread/9a59afab-a760-4e28-abad-cef34b3a712e/)

其中还引用了这篇文章：

[http://www.code-magazine.com/article.aspx?quickid=0911121&page=3](http://www.code-magazine.com/article.aspx?quickid=0911121&page=3)

简而言之，在 EF5 中进行 SP 映射时必须牢记两个基本注意事项：

1.  您不能映射包含 ComplexTypes 的函数实体
2.  如果您映射了更新，但没有删除，您将得到一个 UpdateException，如您所描述的。

所以是的，至少就 Beta 而言，这是一个已经重新收紧的约束。

# linux - 命令行 SFTP 文件浏览器？

> ID：12289941
> 
> 赞同：1
> 
> 时间：2012-09-05T21:16:09.933
> 
> 标签：linux, node.js, command-line, sftp

我正在编写一个应用程序（在 Node.js 中），我需要在其中访问 SFTP 服务器并允许用户提供凭据并浏览服务器上的文件。我尝试过使用 expect 通过 SSH 进行连接，但我发现对于所有不同的操作系统/发行版/SSH 服务器自定义，这太困难且太容易出错。当用户浏览他们的服务器时，是否有一个命令行工具可以让我轻松地建立连接并获取目录列表？我曾尝试使用 FileZilla 附带的可执行文件，但缺乏文档使我无法实现任何目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:27:57.157

OpenSSH (sftp) 采取了你不应该做你想做的事情的方法（出于安全原因），所以他们让事情变得很困难（他们希望你改用 SSH 密钥身份验证）。我知道使用openSSH 解决这个问题的唯一方法是expect（即欺骗sftp 认为它正在与人类交互）。

我发现的唯一一个允许以编程方式轻松输入密码的 sftp 客户端是[Net::SSH Ruby 库](http://net-ssh.rubyforge.org/sftp/v2/api/)的一部分。

# sql - SQL查找日期之间的活动

> ID：12289944
> 
> 赞同：0
> 
> 时间：2012-09-05T21:16:39.660
> 
> 标签：sql, sql-server, tsql

我正在使用以下脚本来尝试计算从您上次访问组到现在在我们系统上的组中创建的新评论和新讨论的数量。我已经写了以下内容，但无法正常工作：

```
SELECT TOP(6) a.GroupID , a. GroupName, sbuser.sf_NewGroupActivity( a.GroupID ,b.LastVisited) AS NumberUpdates
FROM Groups a
INNER JOIN GroupMembers b ON b .GroupID = a.GroupID
WHERE b. MemberID = 102
GROUP BY a.GroupID , a.GroupName, b.LastVisited
ORDER BY NumberUpdates ASC 
```

sf脚本如下：

```
RETURNS INT
AS
    BEGIN
    DECLARE @OUTSTR INT
    DECLARE @OUT1 INT
    DECLARE @OUT2 INT
    SET @OUT1 = (SELECT CAST(COUNT(GroupDiscussionsID) AS INT) FROM GroupDiscussions
            WHERE MemberID = @GroupID AND CreateDate BETWEEN @LastVisited AND GetDate())
    SET @OUT2 = (SELECT CAST(COUNT(GroupCommentID) AS INT) FROM GroupComments
            WHERE MemberID = @GroupID AND CreateDate BETWEEN @LastVisited AND GetDate())
    SET @OUTSTR = @OUT1 + @OUT2
    RETURN @OUTSTR
    END 
```

我不知道如何让这个列出按更新数量排序的前 6 个更新组。任何想法、建议或解决方案将不胜感激。非常感谢

新杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:57:41.287

我相信您的问题出在函数的 WHERE 子句中：

```
 WHERE MemberID = @GroupID AND . . . 
```

据推测，这应该是比较 MemberID 或 GroupId，但不能相互比较。

但是，我强烈建议您删除函数调用并为计数创建单个查询。这允许 SQL 创建更好的执行计划。如果您想这样做，但不知道如何，请发布另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:26:01.423

如果您想要更新*最多*的 6 个，而不是*最少*的，请将 ASC 更改为 DESC：

```
ORDER BY NumberUpdates DESC 
```

# python - 直接属性访问比定义的 API 更“pythonic”吗

> ID：12289945
> 
> 赞同：0
> 
> 时间：2012-09-05T21:16:40.587
> 
> 标签：python

还有什么“Pythonic”？

```
user.fullname = fullname
user.gender= gender
user.description = description 
```

对比

```
user.update_profile(fullname, gender, description) 
```

显然，后者在大多数情况下只是前者的包装器（也是我的偏好），但是我在网上看到的所有关于直接访问（使用属性装饰器）如何更像 Python 的讨论，我只是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:23:10.533

两者都不像另一个或多或少是pythonic。他们有不同的用例。

当您希望能够逐个更新属性时，请使用前者。需要时将其替换为属性。但是，当设置属性具有超出验证的副作用时，请务必使用显式方法。

当您必须同时更新所有三个属性时使用后者，例如当您需要对值的组合进行完整性检查时。没有特殊的语法可以合理地替换这个习语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:37:18.120

这取决于您打算如何使用该类 - 我经常发现在实现代码之前编写代码的理论用法很有用。例如，您可能会像这样使用 User 类：

```
user = User(fullname='Sally McExample', gender='F', description='...')
user.save()

# Later:
user = User.find(...)
user.fullname = 'Sally McChanged'
user.save() 
```

而对于您提出`update_profile`的示例，相同的代码将很乏味：

```
user = User.find(...)
user.update_profile('Sally McChanged', user.gender, user.description)
user.save() 
```

请注意，如果您需要对数据进行比赋值更精细的处理（如值验证或文本清理），您可以将属性转换为[`property`](http://docs.python.org/library/functions.html#property)... 但如果您从一开始就预见到需要这种行为，那么`update_profile`-type 方法比分配可能发生的更清楚

# c - 从 BST 中找出两个数之和为给定数 K

> ID：12289949
> 
> 赞同：5
> 
> 时间：2012-09-05T21:17:12.937
> 
> 标签：c, performance, algorithm, data-structures, time-complexity

给定一个具有唯一整数和一个数字 K 的 BST。在 BST 中找到一对 (a, b)，使得 a + b = k。

**约束：**

您不能更改树的结构，否则我们可以将其转换为已排序的双向链表并在 O(N) 中找到该对。

该方法应该是就地的。

需要 O(N) 解决方案。

我想到了一些与运行两个指针有关的事情，一个从左到右，另一个从右到左，就像我们在排序数组中找到对的情况一样。但是，我无法清楚地了解如何实施它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T21:58:17.347

正如塞缪尔已经说过的那样，我也认为您的解决方案应该有效。两个指针或迭代器，一个从左到右（从小到大），一个从右到左（从大到小）。如果 (a + b) > k 则从右到左迭代一个（下一个较小的值），否则迭代另一个（下一个较大的值）。如果 a >= b，您可以停止运行时间是线性的，即使在不平衡树的情况下也是如此。每个节点最多访问一次。

我认为在这种情况下，真正的函数递归会变得有些复杂。所以最好使用两个自制的堆栈在一个函数中进行递归。像这样的东西：

```
a = b = root;
while (a.left) {
    astack.push(a)
    a = a.left
}
while (b.right) {
    bstack.push(b)
    b = b.right
}

while (a.value < b.value) {
    if (a.value + b.value == k) found!
    if (a.value + b.value < k) {
        if (a.right){
            a = a.right
            while (a.left) {
                astack.push(a)
                a = a.left
            }
        } else a = astack.pop()
    } else {
        if (b.left){
            b = b.left
            while (b.right) {
                bstack.push(b)
                b = b.right
            }
        } else b = bstack.pop()
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T02:33:48.647

我同意 2 指针方法可行。我确实想到了同样的事情。但是，我认为如果我们尝试使用递归，代码会变得非常复杂/混乱。另一种方法是使用堆栈作为评价最高的答案提及。但是，如果我们必须使用空间来降低复杂性，我们可以完全避免 2 指针方法。

我在这里使用了不同的方法。以您想要的任何顺序遍历树并将元素插入 HashSet。填充此集合后，遍历集合的元素并检查 target_sum 和当前数字之间是否存在差异。如果它确实返回或移动到下一个元素。

这仍然是 O(n) 方法的顺序，但使用 O(n) 并且在我看来更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-15T08:17:47.513

我们同时以 Normal Inorder 和 Reverse Inorder 遍历 BST。以相反的顺序，我们从最右边的节点开始，即最大值节点。在正常的顺序中，我们从最左边的节点开始，即最小值节点。我们在两次遍历中添加当前节点的总和，并将该总和与给定的目标总和进行比较。如果总和与目标总和相同，则返回 true。如果总和大于目标总和，则按逆序遍历移动到下一个节点，否则按正常中序遍历移动到下一个节点。如果任何遍历完成但没有找到一对，我们返回 false。

```
 boolean isPairPresent(Node3 root, int sum) 
   {
    Stack<Node3> stack1 = new Stack<Node3>();
    Stack<Node3> stack2 = new Stack<Node3>();

    boolean done1 = false;
    boolean done2 = false;

    int val1 = 0, val2 = 0;
    Node3  curr1 = root, curr2 = root;

    while(true) {

        while(done1 == false)   {
            if(curr1 != null)   {
                stack1.push(curr1);
                curr1 = curr1.left;
            } else {
                if(stack1.isEmpty())
                    done1 = true;
                else    {
                    curr1 = stack1.pop();
                    val1 = curr1.data;
                    curr1 = curr1.right;
                    done1 = true;
                }
            }   
        }

        while(done2 == false)   {
            if(curr2 != null)   {
                stack2.push(curr2);
                curr2 = curr2.right;
            } else {
                if(stack2.isEmpty())
                    done2 = true;
                else {
                    curr2 = stack2.pop();
                    val2 = curr2.data;
                    curr2 = curr2.left;
                    done2 = true;
                }
            }
        }

        if((val1 != val2) && (val1+val2 == sum))    {
            System.out.println("Pair found: "+val1+" + "+val2+" = "+sum);
            return true;
        } else if(val1 + val2 > sum) {
            done2 = false;
        } else if(val1 + val2 < sum)
            done1 = false;

        if(val1 >= val2)
            return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:57:29.253

上述问题的另一个解决方案（它占用 O(n) 空间，但与在 BST 中查找下一个更大/更小的元素相比，实现要简单得多）对给定的二叉树执行中序遍历并将元素存储在数组中。产生的数组将是一个排序的。首先将 A[1]+A[n] 与 k 进行比较

```
Initialize i=1, j=n

while(A[i]+A[j] <> k)
if A[i]+A[j] < k
  i++;
else
  j--;// typo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-04T05:08:51.193

首先对树进行中序遍历并将结果存储在 中`Array a[]`，然后

```
i = 0 ; j = n;
while(i<=j<=n)
{
  if(a[i]+a[j] == k)
  {
    printf("pair is == %d & %d \n", a[i],a[j]);
    i++;
  }
  else if(a[i]+a[j] > k)
    j--;
  else if(a[i]+a[j] < k)
    i++;
} 
```

# camera - Three.js TrackBall Controls for Camera 行为怪异

> ID：12289954
> 
> 赞同：0
> 
> 时间：2012-09-05T21:17:33.363
> 
> 标签：camera, three.js

我一直在尝试创建一个简单的球体，它能够像[本](http://mrdoob.github.com/three.js/examples/webgl_trackballcamera_earth.html)例中那样用鼠标旋转。

然而，当我尝试旋转球体时，它并没有像前面的例子那样移动，而是在许多不同的方向上移动并且非常加速。

我尝试了几种不同的旋转速度设置组合，但它们都不起作用。

```
 var _container, _camera, _renderer, _scene, _controls;

    $(document).ready(function () {
        // init the animation.
        init();

        // animate.
        animate();
    });

    /* Initialize the animation */
    function init() {
        // get the container size.
        _container = $('#animation');
        var height = _container.innerHeight();
        var width = _container.innerWidth();

        // create the renderer and add it to the container.
        _renderer = new THREE.WebGLRenderer({ precision: 'highp', antialias: true });
        _renderer.setSize(width, height);
        _container.append(_renderer.domElement);

        // create the scene.
        _scene = new THREE.Scene();

        // create the camera and add it to the scene.
        _camera = new THREE.PerspectiveCamera(25, width / height, 50, 1e7);
        _scene.add(_camera);

        var radius = 50;

        // trackback _controls settings.
        _controls = new THREE.TrackballControls(_camera, _renderer.domElement);
        _controls.rotateSpeed = 0.5;
        _controls.zoomSpeed = 1.2;
        _controls.panSpeed = 0.2;
        _controls.noZoom = false;
        _controls.noPan = false;
        _controls.staticMoving = false;
        _controls.dynamicDampingFactor = 0.3;
        _controls.minDistance = radius * 1.1;
        _controls.maxDistance = radius * 100;
        _controls.keys = [65, 83, 68]; // [ rotateKey, zoomKey, panKey ]

        // create a sphere and add it to the scene.
        var sphereGeo = new THREE.SphereGeometry(45, 30, 20);
        sphereGeo.computeTangents();

        var sphere = new THREE.Mesh(sphereGeo,
            new THREE.MeshBasicMaterial({ color: 0xff0000, wireframe: true }));
        _scene.add(sphere);
    }

    /* Animates the scene */
    function animate() {
        requestAnimationFrame(animate);

        // render the scene.
        render();
    }

    /* Renders the Scene */
    function render() {
        // set the camera to always point to the centre of our scene, i.e. at vector 0, 0, 0
        _camera.lookAt(_scene.position);

        // move the camera in a circle with the pivot point in the centre of this circle
        // so that the pivot point, and focus of the camera is on the centre of our scene.
        var timer = new Date().getTime() * 0.0005;

        _camera.position.x = -Math.floor(Math.cos(timer) * 200);
        _camera.position.y = 50;
        _camera.position.z = Math.floor(Math.sin(timer) * 200);

        _controls.update();

        _renderer.clear();
        _renderer.render(_scene, _camera);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:26:43.857

创建一个 TRHEE.Clock 实例并使用 clock.getDelta() 而不是你的计时器。**注意：**不要在动画过程中多次使用clock.getDelta()，将值保存到变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T11:36:06.633

TrackballControls.js 无法处理这些极端角度。相反，您可以使用没有问题的 OrbitControls.js，因为它以不同的方式计算旋转。

# php - 从属性更新特定的 XML 节点

> ID：12289960
> 
> 赞同：0
> 
> 时间：2012-09-05T21:18:24.667
> 
> 标签：php, xml, xmldom

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我有一个 xml 聊天脚本，我在其中通过 php 添加新的聊天。但同时我希望能够更新 xml 中的特定用户徽章，但根本不知道如何？

这是我的xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <players>
    <player id="1">4</player>
    <player id="2">3</player>
  </players>
  <chats>
    <chat playerid="2">Some chat here...</chat>
    <chat playerid="1">skfgjh kjgh fdskgjhdf kgjhdf gkjd gkjdfhg dkfjhg</chat>
  </chats>
</data> 
```

这是我在其中添加新聊天的 php：

```
$file = 'chat.xml';
$fp = fopen($file, "rb") or die("cannot open file");
$str = fread($fp, filesize($file));

$xml = new DOMDocument("1.0", "ISO-8859-1");
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->loadXML($str) or die("Error");

$library = $xml->documentElement;

$message = $xml->createElement("chat","sdlkj oghdfiguh fdiugh eiuh eriu irgh eigu ekgjher");
$messageAttribute = $xml->createAttribute('playerid');
$messageAttribute->value = $opponent;
$message->appendChild($messageAttribute);

$library->childNodes->item(1)->appendChild($message);

echo "<xmp>". $xml->saveXML() ."</xmp>"; 
```

我试图添加这个但没有运气：

```
$xmlPath = new DOMXPath($xml);
$xmlNode = $xmlPath->query('//player[id="1"]'); 
```

我想把 4 改成 0。

有人可以帮忙吗：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:32:00.833

```
$xmlNode = $xml->xpath('//player[@id = "1"]'); 
```

# jsf - 特立尼达自定义错误消息

> ID：12289965
> 
> 赞同：1
> 
> 时间：2012-09-05T21:18:57.770
> 
> 标签：jsf, trinidad

我正在使用特立尼达输入日期组件。我需要覆盖组件提供的错误消息。

这是组件提供的错误消息，请输入与此示例格式相同的日期：29/11/1998

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:48:16.050

您需要将消息包（对于您想要支持的每种语言）添加到您的`faces-config.xml`：

```
<application>
  <locale-config>
    <default-locale>en</default-locale>
    <supported-locale>en</supported-locale>
  </locale-config>
  <message-bundle>
    messages
  </message-bundle>
</application> 
```

并将消息包的相应属性文件添加到应用程序资源中：

```
messages.properties 
```

如果您使用的是 Maven，请确保将资源文件夹（如果还没有）添加`build`到`pom.xml`.

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
  </resource>
</resources> 
```

如果您只想自定义特定`DateTimeConverter`消息，则只能在属性文件中放入以下行：

```
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE_detail=How cute, but it's wrong! 
```

您可以在消息中使用以下参数：

*   {0} 标识组件的标签
*   {1} 用户输入的值
*   {2} 转换器期望的格式示例

如果要自定义所有消息，则需要以下行：

```
org.apache.myfaces.trinidad.UIXEditableValue.REQUIRED=A value is required.
org.apache.myfaces.trinidad.UIXEditableValue.REQUIRED_detail=You must enter a value.
org.apache.myfaces.trinidad.UIXSelectMany.REQUIRED=A selection is required.
org.apache.myfaces.trinidad.UIXSelectMany.REQUIRED_detail=You must make at least one selection.
org.apache.myfaces.trinidad.UIXSelectOne.REQUIRED=A selection is required.
org.apache.myfaces.trinidad.UIXSelectOne.REQUIRED_detail=You must make a selection.
org.apache.myfaces.trinidad.UIXTableSelectOne.REQUIRED=A row selection is required.
org.apache.myfaces.trinidad.UIXTableSelectOne.REQUIRED_detail=You must select a row.
org.apache.myfaces.trinidad.UIXTableSelectMany.REQUIRED=A row selection is required.
org.apache.myfaces.trinidad.UIXTableSelectMany.REQUIRED_detail=You must select one or more rows.
org.apache.myfaces.trinidad.UIXSelectMany.UNSUPPORTED_MODEL_TYPE=Unsupported model type.
org.apache.myfaces.trinidad.UIXSelectMany.UNSUPPORTED_MODEL_TYPE_detail=SelectMany does not support a model of type {0}.
org.apache.myfaces.trinidad.UIXEditableValue.CONVERSION=The value is not the in correct format.
org.apache.myfaces.trinidad.UIXEditableValue.CONVERSION_detail=Enter a value that matches this pattern: {2}
org.apache.myfaces.trinidad.UPLOAD=The file is too large.
org.apache.myfaces.trinidad.UPLOAD_detail=The file could not be uploaded because it is too large.
org.apache.myfaces.trinidad.validator.RangeValidator.MAXIMUM_HINT=Enter a number less than or equal to {0}.
org.apache.myfaces.trinidad.validator.RangeValidator.MINIMUM_HINT=Enter a number greater than or equal to {0}.
org.apache.myfaces.trinidad.validator.RangeValidator.RANGE_HINT=Enter a number between {0} and {1}.
org.apache.myfaces.trinidad.validator.LengthValidator.MAXIMUM_HINT=Enter {0} or fewer characters.
org.apache.myfaces.trinidad.validator.LengthValidator.MINIMUM_HINT=Enter {0} or more characters.
org.apache.myfaces.trinidad.validator.LengthValidator.EXACT_HINT=Enter {0} characters.
org.apache.myfaces.trinidad.validator.LengthValidator.RANGE_HINT=Enter between {0} and {1} characters.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MAXIMUM_HINT=Enter a date on or before {0}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MINIMUM_HINT=Enter a date on or after {0}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.RANGE_HINT=Enter a date between {0} and {1}.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.WEEKDAY_HINT=Enter a date that falls on one of the following days: {0}
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.MONTH_HINT=Enter a date from one of the following months: {0}
javax.faces.validator.LongRangeValidator.MINIMUM=The number is too low.
javax.faces.validator.LongRangeValidator.MINIMUM_detail=The number must be greater than or equal to {2}.
javax.faces.validator.LongRangeValidator.MAXIMUM=The number is too high.
javax.faces.validator.LongRangeValidator.MAXIMUM_detail=The number must be less than or equal to {2}.
javax.faces.LongRange=The number is not a whole number.
javax.faces.LongRange_detail=Enter a whole number.
org.apache.myfaces.trinidad.validator.ByteLengthValidator.MAXIMUM=The value is too long.
org.apache.myfaces.trinidad.validator.ByteLengthValidator.MAXIMUM_detail=Enter a value that is not more than {2} bytes long.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MAXIMUM=The date is after the valid range.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MAXIMUM_detail=The date must be on or before {2}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MINIMUM=The date is before the valid range.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MINIMUM_detail=The date must be on or after {2}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.NOT_IN_RANGE=The date is outside the valid range.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.NOT_IN_RANGE_detail=The date must be between {2} and {3}.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.DAY=The date is not valid.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.DAY_detail=Enter one of the valid dates.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.MONTH=Dates in this month are not valid.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.MONTH_detail=Enter a date in one of the following months: {2}
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.WEEKDAY=The day of the week for this date is not valid.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.WEEKDAY_detail=Enter a date that is on one of the following days: {2}
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.NOT_IN_RANGE=The number is outside the valid range.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.NOT_IN_RANGE_detail=The number must be between {2} and {3}.
org.apache.myfaces.trinidad.validator.LengthValidator.MAXIMUM=There are too many characters.
org.apache.myfaces.trinidad.validator.LengthValidator.MAXIMUM_detail=Enter {2} or fewer characters, not more.
org.apache.myfaces.trinidad.validator.LengthValidator.MINIMUM=There are too few characters.
org.apache.myfaces.trinidad.validator.LengthValidator.MINIMUM_detail=Enter {2} or more characters, not fewer.
org.apache.myfaces.trinidad.validator.LengthValidator.NOT_IN_RANGE=The number of characters is out of range.
org.apache.myfaces.trinidad.validator.LengthValidator.NOT_IN_RANGE_detail=Enter {2} or more characters, up to a maximum of {3}.
org.apache.myfaces.trinidad.validator.LengthValidator.EXACT=The number of characters is incorrect.
org.apache.myfaces.trinidad.validator.LengthValidator.EXACT_detail=Enter exactly {2} characters.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.validator.LongRangeValidator.NOT_IN_RANGE=The number is out of range.
org.apache.myfaces.trinidad.validator.LongRangeValidator.NOT_IN_RANGE_detail=The number must be between {2} and {3}.
org.apache.myfaces.trinidad.validator.RegExpValidator.NO_MATCH=The format is incorrect.
org.apache.myfaces.trinidad.validator.RegExpValidator.NO_MATCH_detail=The value must match this pattern: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.DATE_HINT=Example: {0}
org.apache.myfaces.trinidad.convert.DateTimeConverter.TIME_HINT=Example: {0}
org.apache.myfaces.trinidad.convert.DateTimeConverter.BOTH_HINT=Example format: {0}
org.apache.myfaces.trinidad.convert.ColorConverter.FORMAT_HINT=Example format: {0}
org.apache.myfaces.trinidad.convert.NumberConverter.FORMAT_HINT=Example format: {0}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE=The date is not in the correct format.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE_detail=Enter a date in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_TIME=The time is not in the correct format.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_TIME_detail=Enter a time in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_BOTH=The date and time is not in the correct format.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_BOTH_detail=Enter a date and time in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE_INVALID_DATE=The date or time entered is not valid.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE_INVALID_DATE_detail=Enter a valid date or time.
org.apache.myfaces.trinidad.convert.ColorConverter.CONVERT=The color is not in the correct format.
org.apache.myfaces.trinidad.convert.ColorConverter.CONVERT_detail=Enter a color in the same format as this example: {2}.
org.apache.myfaces.trinidad.convert.ColorConverter.TRANSPARENT=Transparent
org.apache.myfaces.trinidad.convert.IntegerConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.IntegerConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.IntegerConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.IntegerConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.IntegerConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.IntegerConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.LongConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.LongConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.LongConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.LongConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.LongConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.LongConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PATTERN=The format is incorrect.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PATTERN_detail=The format of the number must match this pattern: {2}
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_NUMBER=The value is not a number.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_NUMBER_detail=The value must be a number.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_CURRENCY=The currency format is incorrect.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_CURRENCY_detail=Enter a currency in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PERCENT=The percentage is not in the correct format.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PERCENT_detail=Enter a percentage in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.ShortConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.ShortConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.ShortConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.ShortConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.ShortConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.ShortConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.ByteConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.ByteConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.ByteConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.ByteConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.ByteConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.ByteConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.DoubleConverter.CONVERT=The value is not a number.
org.apache.myfaces.trinidad.convert.DoubleConverter.CONVERT_detail=The value must be a number.
org.apache.myfaces.trinidad.convert.FloatConverter.CONVERT=The value is not a number.
org.apache.myfaces.trinidad.convert.FloatConverter.CONVERT_detail=The value must be a number.
org.apache.myfaces.trinidad.convert.ALERT_FORMAT={0} - {1}
org.apache.myfaces.trinidad.convert.ALERT_FORMAT_detail={0} - {1}
org.apache.myfaces.trinidad.event.FileDownloadActionListener.DOWNLOAD_ERROR=An error occurred downloading the file.
org.apache.myfaces.trinidad.event.FileDownloadActionListener.DOWNLOAD_ERROR_detail=The file was not downloaded or was not downloaded correctly.
org.apache.myfaces.trinidad.component.core.input.CoreInputFile.INPUT_FILE_ERROR=An error occurred uploading the file.
org.apache.myfaces.trinidad.component.core.input.CoreInputFile.INPUT_FILE_ERROR_detail=A file upload error has occurred, please verify your upload data and file name. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:54:18.000

要覆盖单个消息，您可以使用 convertDateTime 元素：

```
<af:inputDate id="date1" label="date">
   <af:convertDateTime messageDetailConvertDate="Insert a date"
                       hintDate="Example: 01/01/2001"/>
</af:inputDate> 
```

# coldfusion-8 - 发布后没有 cfselect 的 Coldfusion MultiSelection 框持续选择

> ID：12289968
> 
> 赞同：0
> 
> 时间：2012-09-05T21:19:05.437
> 
> 标签：coldfusion-8

我在这里试图完成的是用一个项目列表填充一个多选框，这段代码完成了这部分工作。它没有做的是，如果我在列表中选择超过 1 个项目并尝试提交表单，它将不会保留在列表中选择的相同项目。

如果我只选择 1 个项目并提交一个项目确实保持选中状态的表单。这是我使用coldfusion的第一周，这是我的第一个障碍我确信在这一点上这是非常愚蠢和简单的事情，我忘记在这里做但是我整天都在编码并且我的眼睛在交叉。我希望有人会在这方面为我指明正确的方向

```
 <select id="equipmentstatus1" name="equipmentstatus1" multiple="multiple">
 <cfloop list="#trim(cfleqstatus)#" delimiters="#chr(13)##chr(10)#" index="data">
 <cfset counter++>
 <cfoutput><option value="#rows[counter][1]#" <cfif form.equipmentstatus1 EQ rows[counter][1]> selected="selected"</cfif>>#rows[counter][2]#</option></cfoutput>

 </cfloop>
 </select> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:48:34.787

您的 FORM 值将包含项目列表，而不是单个项目。所以你需要改变你的 if 语句：

```
<cfif form.equipmentstatus1 EQ rows[counter][1]> 
```

对此：

```
<cfif ListFind(form.equipmentstatus1, rows[counter][1])> 
```

这将检查项目列表`FORM.equipmentstatus1`并尝试在该列表中找到当前行的值。如果找到它，它将返回 true。

# python - Python:: 输入日期并输出一年中有多少天的程序

> ID：12289971
> 
> 赞同：-2
> 
> 时间：2012-09-05T21:19:25.650
> 
> 标签：python, python-3.x

有人可以帮我弄这个吗？python中的一个程序，它输入一个日期并输出一年中的天数。示例：5 月 5 日是一年中的第 125 天（不考虑闰年）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:48:48.893

尝试这个：

```
from datetime import date

input_date = date(2012, 5, 5)

delta = input_date - date(input_date.year, 1, 1)
print delta.days
>>> 125 
```

或者，如果您想知道从今天起多少天：

```
from datetime import datetime
print datetime.now().timetuple().tm_yday
>>> 249 # or 250 depending on where you are on the world at the moment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:49:08.223

忽略闰年问题，只需将年初日期之前的每个月的天数（如果有）相加，然后加上所请求日期的月份日期。或者，您可以使用 Python 的`datetime`模块。

# scala - 试图理解“最终抽象类 Int private 在 Scala 中扩展 AnyVal

> ID：12289973
> 
> 赞同：28
> 
> 时间：2012-09-05T21:19:35.390
> 
> 标签：scala

来自 Java Land，我一直在尝试自学 Scala。最近我在玩数据类型，我决定在[这里](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.Int)`Int`查找 Int 类的 API 。

令我困惑的是 的类定义`Int`，即`abstract final`.

如果我在问这个问题之前没有阅读 Scala 的含义，我很抱歉`abstract`，`final`但我很好奇，所以我马上打了这个帖子。

所以我想了解的是：Scala 中的语义和`abstract`不同吗？同样，据我所知，在 Java 中，不能同时拥有和。那么我该如何解释呢？`final``extends``abstract``final``final abstract class Int private extends AnyVal`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T21:49:44.910

正如 om-nom-nom 在评论中指出的那样，`abstract`禁止实例化 ( `new Int`)，而`final`禁止子类化 ( `new Int { ... }`)。

原因`scala.Int`是直接用Java虚拟机的原始整数类型表示；其他类似的类型是`Byte`, `Short`, `Char`, `Long`, `Float`, `Double`, `Boolean`. *因为*它们是运行时的原始类型（表现出比所谓的装箱类型更好的性能）并且 JVM 不允许添加新的原始类型，所以没有合法的方法来扩展这些类型。`val i: Int = 33`除了给出文字 ( )之外，没有办法实例化它们。

Scala 拥有这些类型来创建一个统一的对象系统，其中原始类型和“对象”之间没有逻辑上的区别。然而，顶部有一个层次区别，即`AnyRef`（对应于`java.lang.Object`）和`AnyVal`（对应于那些原始类型；并添加 Scala 的新类型`Unit`）。

[Tour of Scala: Unified Types](http://www.scala-lang.org/node/128)提供了更多关于统一类型系统的信息

# java - 有没有办法在 javascript 中验证表单以停止 onSubmit() java 方法触发？

> ID：12289974
> 
> 赞同：0
> 
> 时间：2012-09-05T21:19:42.757
> 
> 标签：java, javascript, html, submit, wicket

我不知道我的问题是否很清楚，但基本上，我正在做的是在我的页面所在的同一个 HTML 文档中验证 javascript 代码中的表单。然后我像这样调用 onsubmit 上的方法：

```
<form wicket:id="editClientForm" id="edit-client-form" 
      onkeypress="return disableEnterKey(event)"  
      onsubmit="return editClientFormSubmitValidation()"> 
```

所以我有一个`<input type="submit" />`每次按下他`onSubmit()`都会调用java中的方法。那么如果javascript中的验证失败，有没有办法真正阻止它触发呢？

**editClientFormSubmitValidation()**

```
var submit = true;

if (addressNumberInput.value.length == 0) {

   showAddressNumberInputError();

   submit = false;
}

//A whole lot of verifications just like this one that will set submit to false.

return submit; 
```

**呈现形式**

```
<form id="edit-client-form" onkeypress="return disableEnterKey(event)" onsubmit="return editClientFormSubmitValidation()" method="post" action="./page?1-1.IFormSubmitListener-editClientForm"> 
```

**渲染提交**

`<input type="submit" id="save-client-button" name="saveClientButton">`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:22:56.333

当验证失败时，从 editClientFormSubmitValidation() 函数返回 false。它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T21:52:38.567

很可能您的内部有 JavaScript 错误`editClientFormSubmitValidation`。如果 JS 事件处理程序失败，则相关事件将照常执行其默认操作 - 对于`form.onsubmit`处理程序而言，这意味着如果验证函数有错误，将提交表单。

如果没有更多代码，我们看不到错误是什么（尽管我怀疑您可能缺少`addressNumberInput`变量的赋值/声明？），所以打开浏览器的 JavaScript 控制台并在那里查找错误。

# c# - ListBox 数据与包含字符串 string int 的列表列表绑定

> ID：12289975
> 
> 赞同：0
> 
> 时间：2012-09-05T21:19:46.480
> 
> 标签：c#, windows-phone-7, data-binding, listbox

我有一个数据列表，其中每一行都是字符串字符串 int。在移植 iOS 应用程序时，我的所有数据都来自 plist。我还有另一个列表，它是 string int double。

我正在使用[本](http://3water.wordpress.com/2010/07/25/listbox-on-wp7/)教程为列表框创建自己的行。

我不想为行数据创建一个类，所以我没有 Transaction 类，并且不确定如何使用 List 列表进行绑定。我当然会知道我是 string string int 还是 string int double。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:48:58.420

您不想为您的行创建类类型的任何原因？使用 XAML 时，这将使您的生活轻松一百万倍。

为您的行创建一个类类型并使其实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)。一旦你的类实现`INotifyPropertyChanged`了，就很容易在你的视图中绑定到它。

假设您遵循 MVVM 模式。这意味着您将拥有一个视图（您使用 XAML 进行编码）和一个 ViewModel。这个视图模型也将是一个实现的类`INotifyPropertyChanged`。在视图的构造函数中，您将`DataContext`属性设置为 ViewModel 类的新实例。

现在是列表部分。在 ViewModel 中，创建一个`ObservableCollection<MyRow>`. An`ObservableCollection<T>`也是一种集合类型，它也实现了`INotifyPropertyChanged`. 或者在您的情况下，听起来您有这些项目的列表。如果这是真的，我建议用另一个自定义类封装列表。它使 MVVM 模式的绑定更加自然。您可以双重嵌套 ObservableCollection，但您必须决定它是否易于阅读和理解。例如，`ObservableCollection<ObservableCollection<MyRow>>`. 在下面的示例中，我假设您创建了一个类 (MySet) 来保存行，而不是双嵌套列表。

## 自定义行类

```
public class MyRow : INotifyPropertyChanged
{
    public event PropertyChanged;

    private string _stringValue = string.Empty;
    public string StringValue
    {
        get { return _stringValue; }
        set
        {
            if( _stringValue != value )
            {
                _stringValue = value;
                if( PropertyChanged != null )
                {
                    PropertyChanged( this, new PropertyChangedEventArgs( "StringValue" ) );
                }
             }
        }
    }

    // continue with the rest of your properties
} 
```

## 行集类

```
public class MySet : INotifyPropertyChanged
{
    public event PropertyChanged;

    private ObservableCollection<MyRow> _rows = null;
    public ObservableCollection<MyRow> Rows
    {
        get { return _rows; }
        set
        {
            if( _rows != value )
            {
                _rows = value;

                if( PropertyChanged != null )
                {
                    PropertyChanged( this, new PropertyChangedEventArgs( "Rows" ) );
                }
            }
        }
    }
} 
```

## 查看模型

```
public class MyViewModel : INotifyPropertyChanged
{
    public event PropertyChanged;

    private ObservableCollection<MySet> _rowSets = null;
    public ObservableCollection<MySet> RowSets
    {
        get { return _rowSets; }
        set
        {
            if( _rowSets != value )
            {
                _rowSets = value;
                if( this.PropertyChanged != null )
                {
                    this.PropertyChanged( this, new PropertyChangedEventArgs( "RowSets" ) );
                }
            }
        }
    }
} 
```

现在在您的 XAML 中，您可以选择如何显示列表的嵌套性质。我推荐[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol%28v=vs.95%29.aspx)容器。您所要做的就是将 设置`ItemsSource`为 ViewModel 的属性名称，然后覆盖`DataTemplate`. 如果这样做，那么每个项目都将具有内部列表的数据上下文。与另一个 ItemsControl 重复，然后您将让项目上下文等于每个内部项目 (MyRow)。

## 视图的 XAML

```
<ItemsControl
    ItemsSource="{Binding Path=RowSets}" >
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ItemsControl
                ItemsSource="{Binding Path=Rows}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock 
                            Text="{Binding Path=StringValue, Mode=OneWay}"
                            Margin="5,0,0,0"
                            />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

并且不要忘记将视图的 DataContext 设置为 ViewModel。

## View 背后的代码

```
public class View : UserControl
{
    public View()
    {
        InitializeComponents();

        this.DataContext = new ViewModel();
    }
} 
```

上面的代码未经测试，仅让您大致了解如何使用它。

# 更新

如果您不想创建一个类而只是绑定到一个数组，您也可以这样做。绑定路径允许索引器语法。您可以输入 XAML `Text="{Binding Path=MyArray[0]}"`。

如果您有一个数组数组，则 XAML 可能如下所示：

```
<ItemsControl ItemsSource="{Binding Path=MyOuterArray}">
    <ItemsControl.ItemTemplate>
        <!-- The data context here is the inner array so the indexer are applied to the inner array -->
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=[0]}" />
            <TextBlock Text="{Binding Path=[1]}" />
            <TextBlock Text="{Binding Path=[2]}" />
        </StackPanel>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

其他几个选项是使用转换器将数组中的值转换为某种字符串格式，或者在负责适当格式化成员的行类上提供一个属性。您只是将数组元素打印为序列中的字符串吗？然后只需在名为“FormattedValue”的行类上创建一个自定义属性，并让它返回所有相关属性的 ToString() 连接。

```
public class MyRow : INotifyPropertyChanged
{
    // ...

    public string FormattedValue
    {
        get 
        {
           return string.Join( ", ", this.MyArray );
        }
     }
} 
```

# iphone - 使用 segue 或其他方法显示 uiviewcontroller 为 uitableview 创建新行

> ID：12289980
> 
> 赞同：0
> 
> 时间：2012-09-05T21:20:27.213
> 
> 标签：iphone, objective-c, ios, ios5

我有一个 uitableview，在导航栏中我有一个 + 按钮，旨在允许用户转到 tableview 中项目的 uiviewcontroller 的可编辑版本，并让他们创建一个新的“记录”。我设置了 + 按钮来对 uiviewcontroller 进行 segue，就像您在查看 tableview 列表中的“记录”之一的详细信息时所做的一样。我试图了解这种技术是否可行，或者我应该以不同的方式显示 uiviewcontroller 以便用户创建新数据，例如模态或简单地以编程方式显示 uiviewcontroller 而不是使用序列。谢谢。我希望我是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:27:44.630

您可以在 prepareForSegue 中创建新对象，并将其设置在目标控制器的属性上。这是否有意义取决于您的应用程序的逻辑和流程；从技术上讲，它没有任何问题。要注意的一件事是，如果用户在此过程中选择退出，例如，他们退出导航，这会给您留下一个插入的垃圾对象。（当然，假设它是某种 NSManagedObject）所以您可能希望很好地处理这种情况，以防止之前的表格视图中出现空白行。您也可以以模态方式执行此操作，无论哪种方式，您都可以在保存到目标控制器时创建对象，从而防止出现空白。但是，您可能需要做一些额外的工作才能让原始控制器引用这个新对象。希望有帮助。

# javascript - 检查 JQuery 对象在命名空间下是否有事件的优雅方法

> ID：12289984
> 
> 赞同：3
> 
> 时间：2012-09-05T21:20:58.413
> 
> 标签：javascript, javascript-events, jquery

例如，假设我们要检查“this”在命名空间代理下是否有任何事件；我目前这样做：

```
// 'this' is not a DOM element
if ($($(this).data('events')).length === 0 || $($(this).data('events').proxy).length === 0) {
    // Do something If there are no events
} 
```

这就是我现在这样做的方式，以确保已创建 .data('events') 对象（如果在读取 .data('events') 之前没有调用 .bind ，它将是未定义的）和它在“代理”命名空间下有一个事件。

有没有更好的方法来做到这一点而不会引发错误？**如果**我能做这样的事情会很棒：

```
if($(this).data('events').proxy.length === 0) {
    // Do something if there are no proxy events
} 
```

**但是**，如果没有任何绑定到 'this' 的代码片段将抛出错误，因为 .data('events') 将是未定义的，因此不会有 .proxy 访问器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:23:41.333

只需相应地加强真实性检查：

```
var data_events = $(this).data('events');
if(!data_events || data_events.proxy.length === 0) {
    // Do something if there are no proxy events
} 
```

# java - Android上传文件到网站抛出html和php

> ID：12289990
> 
> 赞同：2
> 
> 时间：2012-09-05T21:22:15.583
> 
> 标签：java, php, android, html

尝试通过 android 将文件上传到我的网站时出现错误。

一旦我点击照片，我会得到这个： ![在此处输入图像描述](../Images/6a862b472add8f97398cbd44df2e1548.png)

这是我的 Main.java

```
 package test.com.phonegap.app;
import org.apache.cordova.DroidGap;
import android.os.Bundle;

public class Main extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

这是我的 HTML 文件，一切都发生在哪里等等等等

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>File Transfer Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <script type="text/javascript" charset="utf-8">

        // Wait for PhoneGap to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // PhoneGap is ready
        //
        function onDeviceReady() {

        }

        function getImage() {

            // Retrieve image file location from specified source
            navigator.camera.getPicture(uploadPhoto, function(message) {
                    alert('get picture failed');
                },{
                    quality: 50, 
                    destinationType: navigator.camera.DestinationType.FILE_URI,
                    sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
                }
            );

        }

        function uploadPhoto(imageURI) {
            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";

            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;
            options.chunkedMode = false;

            var ft = new FileTransfer();
            ft.upload(imageURI, "http://monaiz.byethost7.com/upload.php", win, fail, options);
        }

        function win(r) {
            console.log("Code = " + r.responseCode);
            console.log("Response = " + r.response);
            console.log("Sent = " + r.bytesSent);
            alert(r.response);
        }

        function fail(error) {
            alert("An error has occurred: Code = " = error.code);
        }

        </script>
</head>
<body>
    <button onclick="getImage();">Upload a Photo</button>
</body>
</html> 
```

这是我网站上的 PHP 文件

```
 <?php
print_r($_FILES);
$new_image_name = "namethisimage.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "/htdocs/".$new_image_name);
?> 
```

谁能给我一个解决这个问题的方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:37:49.440

从您的 PHP 代码中删除这一行

> print_r($_FILES);

如果您想返回文件上传是否成功，您可以执行类似的操作

```
$fileUploaded = move_uploaded_file($_FILES["file"]["tmp_name"], "/htdocs/".$new_image_name);

echo ($fileUploaded) ? 'File uploaded' : 'Upload failed'; 
```

# makefile - 可以在头文件中使用使用“-D”在 Makefile 中定义的标志吗？

> ID：12289991
> 
> 赞同：4
> 
> 时间：2012-09-05T21:22:26.730
> 
> 标签：makefile, g++, conditional-compilation

我注意到我在编译行 (g++) 上定义为 -D__SOME_FLAG=1 的标志在头文件中使用时似乎没有达到预期的效果。即：包含在 a 中的代码`#ifdef __SOME_FLAG ... #endif`似乎没有被编译。我总是可以在标题中使用#define 来完成这项工作。但理想情况下，我希望能够在一个地方进行更改（即：Makefile）。

我想知道我正在尝试的是否可行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:26:54.320

是的，这应该是可能的，而 -D 标志正是为此而设计的。

请检查[http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options)

根据我在那里读到的内容，也许您应该`-D symbol=value`在它们之间使用空格或`-D"symbol=value"`引号..但是我没有尝试，因为我的笔记本电脑的电池目前正在耗尽:)

编辑：
抱歉，只记得在 linux 上不应该有空格，所以你的命令行`-D__SOME_FLAG=1`应该正确地将“__SOME_FLAG”设置为 1。如果你不是在 linux 上而是在 windows 上，你可以尝试使用空格，但我怀疑。此外，如果 GCC 是旧的或时髦的，它实际上可能会忽略 -D 之后的第一个字符，因此可以定义一个“_SOME_FLAG”。我见过它几次，但只在一些非常有问题的端口上..

顺便提一句。也许其他的东西#undefs它？或者您可能忘记将该标志添加到所有文件的所有编译中？-D 选项仅用于当前编译的文件，因此如果您的 Makefile 中有多个 gcc 调用，您可能只将标志添加到其中一些。这通常是我的问题，因为我倾向于只将 -I 和 -D 标志放在第一位，而忘记其他模块..

# llvm - 在 LLVM 中查找特定变量的所有用途

> ID：12289994
> 
> 赞同：6
> 
> 时间：2012-09-05T21:22:51.913
> 
> 标签：llvm, llvm-clang

我对 LLVM 很陌生。

我正在尝试编写一个 llvm Pass 来执行类似于污点分析的操作。在我的努力中，我需要遍历特定预定义变量的 Def-use 链。例如一个C程序的反汇编代码如下

```
 @someVar = external global %struct.something 
```

这是在一个函数上方找到的，我想在我的函数中找到这个 @someVar 的所有用途。我该怎么做？我开始编写函数传递。但是如何获得这个特定标识符的 Def Use 链呢？

我在 LLVM 手册[http://llvm.org/docs/ProgrammersManual.html#iterate_chains](http://llvm.org/docs/ProgrammersManual.html#iterate_chains)中找到了这个。

但我不确定如何在这种情况下使用它。

PS对不起，如果我的问题含糊不清或幼稚。我是新手，我不知道什么信息是相关的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T21:28:48.703

我正在粘贴链接中的代码

```
Function *F = ...;

for (Value::use_iterator i = F->use_begin(), e = F->use_end(); i != e; ++i)
  if (Instruction *Inst = dyn_cast<Instruction>(*i)) {
    errs() << "F is used in instruction:\n";
    errs() << *Inst << "\n";
  } 
```

基本上 F 是您要为其查找链的值

# java - 在 Java 中反序列化复合对象

> ID：12289999
> 
> 赞同：1
> 
> 时间：2012-09-05T21:23:15.373
> 
> 标签：java, deserialization

我有一个关于反序列化复合对象的问题。我的对象如下所示：

```
public class Outside
{
   private String str1;
   private Inside s;
}

public class Inside
{
   private String str2;
   public Inside(String str2) 
   {
    this.field1 = str2;
   }
} 
```

当我想反序列化对 Json 的响应时

```
Outside o = wr.accept(MediaType.APPLICATION_JSON_TYPE).get(Outside .class); 
```

我收到以下异常 ....ClientHandlerException: A message body reader for Java class Outside, Java type class Outside, and MIME media type application/json was not found

我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:27:02.713

> java.lang.NoSuchMethodException: ....Inside.()

这是指表单的构造函数`Inside()`，您没有 - 您只有`Inside(String)`. 序列化需要一个无参数的构造函数，因此它可以轻松地使用反射来实例化您的对象，然后填写字段。

因此，您需要添加一个无参数构造函数。