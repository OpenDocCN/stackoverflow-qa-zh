# StackOverflow 问答 12457000-12457999

# joomla - 具有高级选项的 Joomla 和 Google Analytics

> ID：12457002
> 
> 赞同：1
> 
> 时间：2012-09-17T10:01:12.683
> 
> 标签：joomla, google-analytics

我想在我的 joomla 网站中插入谷歌分析跟踪代码。

所以我在谷歌的官方网站上注册，看到有一个高级选项卡，比标准选项多了三个选项。

我是否必须检查“我想跟踪动态页面”和“我想跟踪 php 页面”？这些选项是否为我提供了更好的结果，或者它们对于像 joomla 这样的基于 php 的动态站点是必需的？

另外我在哪里放置跟踪代码？由于一些错误，有人说最好在标签之后，而其他人说在标签之前。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:05:02.650

从这个关于[设置 GA](http://svhostingblog.com/guides/google-analytics-step-by-step-basic-setup-guide/)`</BODY>`的来源来看，对于 PHP 网站来说，在标签之前的页面底部包含谷歌跟踪脚本很重要。除了选择不同的复选框会向您显示设置脚本的不同说明之外，我正在努力寻找与您上面提到的问题相关的任何信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:22:20.513

1.  一般 SEO 建议：使用 Joomla，您不需要动态跟踪页面，如果需要，您可以打开 SEF 并使用 robots.txt、ror.xml 和 sitemap.xml（第一个和最后一个文件对 google 非常重要） .
2.  我还建议您在发布新文章时使用[谷歌网站管理员工具](http://www.google.com/webmasters/)更新谷歌，并检查是否存在抓取错误并从谷歌中删除“坏”网址。
3.  就像我对另一个答案的评论一样，跟踪代码应该位于[*您网页的结束标记之前*](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingOverview#trackingCodePlacement)- 我建议**将跟踪代码放在模板中！**（即使您可以将其单独复制并粘贴到每篇文章中 - 此选项仅应在您需要将不同参数从不同文章传递给 GA 的极少数情况下完成。

**更新：**
关于您的评论：是的，如果您转到“管理”部分，然后转到“跟踪代码”，您将看到以下选项：

![在此处输入图像描述](../Images/a90c6b0516e275ed140e1955e581533a.png)

它所做的只是提供了一种在您的页面中包含跟踪代码的不同方式。我必须承认，我没有在处理过的一些 Joomla 和 WP 网站上使用此选项，但它仍然可以正常工作。但是，如果 Google 建议这样做 - 一定要继续这样做！

# android - 行更新异常

> ID：12457003
> 
> 赞同：0
> 
> 时间：2012-09-17T10:01:12.917
> 
> 标签：android, sqlite

我得到了例外：

> 09-17 09:49:05.424: 错误/数据库(5971): 使用 UPDATE FTStitleslist SETSuggest_text_1=?,Suggest_text_2=? 在哪里Suggest_text_1 =测试09-17 09：49：05.434：错误/AndroidRuntime（5971）：致命异常：主android.database.sqlite.SQLiteException：没有这样的列：测试：，编译时：更新FTStitleslist SETSuggest_text_1 =？，suggest_text_2 =？WHERESuggest_text_1=在 android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) 测试

当我执行该方法时：

```
public void updateTitle(String oldTitle, String newTitle) {
            ContentValues newValues = new ContentValues();
            newValues.put(KEY_WORD, newTitle);
            newValues.put(KEY_DEFINITION, "null");

            getWritableDatabase().update(FTS_VIRTUAL_TABLE, newValues, KEY_WORD + "=" + oldTitle, null);
        } 
```

对于像这样创建的数据库：

```
private static final String FTS_TABLE_CREATE =
                "CREATE VIRTUAL TABLE " + FTS_VIRTUAL_TABLE +
                        " USING fts3 (" +
                        KEY_WORD + ", " +
                        KEY_DEFINITION + ");"; 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:11:42.077

您的文本值必须用单引号引起来：

```
'Test' 
```

如果不是，编译器将尝试将值（即测试）解释为列名。

从异常消息中：

```
WHERE suggest_text_1=Test 
```

# symfony - 在 SonataAdminBundle 中添加操作

> ID：12457010
> 
> 赞同：10
> 
> 时间：2012-09-17T10:01:45.733
> 
> 标签：symfony, symfony-2.1, sonata-admin

我正在尝试在奏鸣曲管理包中添加一个动作。我改变了我的管理类：

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('id')
        ->add('name')        
        // add custom action links
        ->add('_action', 'actions', array(
            'actions' => array(
                'view' => array(),
                'calculate' => array('template' => 'myappMyBundle:Admin:list__action_calculate.html.twig'),
                'edit' => array(),
            )
        ))
    ;
} 
```

和

```
protected function configureSideMenu(MenuItemInterface $menu, $action, Admin $childAdmin = null)
{
    if (!$childAdmin && !in_array($action, array('edit'))) {
        return;
    }
    $admin = $this->isChild() ? $this->getParent() : $this;
    $id = $admin->getRequest()->get('id');
    $menu->addChild('calculate', array('uri' => 'http://google.com?id=' . $id));
} 
```

并在 src/myapp/MyBundle/Resources/views/Admin/ 中放置一个名为 list__action_calculate.html.twig 的模板：

```
{% if admin.isGranted('EDIT', object) and admin.hasRoute('edit') %}
<a href="{{ admin.generateObjectUrl('calculate', object) }}" class="calculate_link" title="{{ 'action_calculate'|trans({}, 'SonataAdminBundle') }}">
    <img src="{{ asset('bundles/sonataadmin/famfamfam/page_white_edit.png') }}" alt="{{ 'action_calculate'|trans({}, 'SonataAdminBundle') }}" />
</a>
{% endif %} 
```

但是我从 symfony 得到了这个错误：

```
An exception has been thrown during the rendering of a template 
("unable to find the route `mysite.mybundle.admin.myentity.calculate`") 
in "SonataAdminBundle:CRUD:list.html.twig" 
```

我错过了什么？文档中是否有比[Doc](http://sonata-project.org/bundles/admin/2-0/doc/reference/batch_actions.html)的这一页更多的线索。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T14:02:48.193

终于明白了！

在管理类中：

```
protected function configureRoutes(RouteCollection $collection)
{
    $collection->add('calculate');

}

# Override to add actions like delete, etc...
public function getBatchActions()
{
    // retrieve the default (currently only the delete action) actions
    $actions = parent::getBatchActions();

    // check user permissions
    if($this->hasRoute('edit') && $this->isGranted('EDIT') && $this->hasRoute('delete') && $this->isGranted('DELETE'))
    {
        // define calculate action
        $actions['calculate']= array ('label' => 'Calculate', 'ask_confirmation'  => true );

    }

    return $actions;
}

protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('id')
        ->add('name')        
        // add custom action links
        ->add('_action', 'actions', array(
            'actions' => array(
                'view' => array(),
                'calculate' => array('template' => 'chemoinfoEdrugBundle:CRUD:list__action_calculate.html.twig'),
                'edit' => array(),
            )
        ))
    ;
} 
```

在管理控制器中：

```
public function batchActionCalculate(ProxyQueryInterface $selectedModelQuery)
{
    ...
} 
```

在 /src/mysite/mybundle/Resources/views/CRUD 中：

```
{% if admin.isGranted('EDIT', object) and admin.hasRoute('edit') %}
<a href="{{ admin.generateObjectUrl('calculate', object) }}" class="calculate_link" title="{{ 'action_calculate'|trans({}, 'SonataAdminBundle') }}">
    <img src="{{ asset('bundles/sonataadmin/famfamfam/calculator.png') }}" alt="{{ 'action_calculate'|trans({}, 'SonataAdminBundle') }}" />
</a>
{% endif %} 
```

# android - Android logcat蓝牙正则表达式

> ID：12457011
> 
> 赞同：1
> 
> 时间：2012-09-17T10:01:46.810
> 
> 标签：android, regex, bluetooth, logcat, android-logcat

我正在`Bluetooth`Android 上进行调试，我想列出与蓝牙相关的所有可用消息，但我在任何地方都找不到蓝牙标签列表。

```
Is there a `list` available? or a `regex` that allows me to see all messages related to Bluetooth? 
```

仅供参考：`I tried logcat ".*[bB]luetooth.*":V *:S`但它只是输出

```
--------- beginning of /dev/log/main
--------- beginning of /dev/log/system 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:06:05.123

您是否尝试在点元字符上使用非贪婪量词。

```
.*?[bB]luetooth.*?":V *:S 
```

# jar - 将永久参数传递给 jar 文件

> ID：12457020
> 
> 赞同：1
> 
> 时间：2012-09-17T10:02:25.800
> 
> 标签：jar, startup

我有 3 个 jars：jar1、jar2 和 jar3，在同一路径中可以在其他 pc 中更改（例如：c:\prova）

当我运行 jar1 时，它会将 jar2 移动到 Windows Sturtup 文件夹中。

我希望 jar2 在每次 Windows 启动时简单地激活 jar3，但它当然找不到留在第一条路径中的 jar3。

所以我希望 jar1 在移动它时或至少在第一次调用它时将引用（在本例中为路径 c:\prova）传递给 jar2。

我觉得这很困难，因为：我无法在 jar2 中的文本文件中写入路径：jar 中的文本文件不可写。

我无法在 windows 启动文件夹中写入文本文件：它将在每次 win 启动时打开..

我不能将路径作为参数传递，这对第一次调用会很好，但我不能为连续调用存储这个值。

对不起我的英语不好，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:17:13.683

在 jar2 中添加文件`Path.txt`（带有 jar3 的路径）：

```
Runtime.getRuntime().exec("jar uf jar2.jar Path.txt"); 
```

读取 jar2 中的文件（Startup 是我的类名）：

```
 String s = "/Path.txt";
        is = Startup.class.getResourceAsStream(s);
        br = new BufferedReader(new InputStreamReader(is));
        while (null != (line = br.readLine())) {
            list.add(line);
        } 
```

谢谢我！

# java - 鸭子类型和泛型编程

> ID：12457022
> 
> 赞同：6
> 
> 时间：2012-09-17T10:02:38.717
> 
> 标签：java, c++, templates, generics, duck-typing

我在SO中搜索了一段时间，找不到一个明确而笼统的答案，只有一些矛盾和特殊的意见。[1]

所以我想知道鸭子类型和泛型编程之间的关系是什么？（DT < GP，DT == GP，DT > GP）。通过泛型编程，我特别指的是 C++ 模板或 Java 泛型，但如果可能的话，与概念相关的一般答案将受到欢迎。

我知道通用编程将在编译时处理，而鸭子类型将在运行时处理，但除此之外我不知道如何定位它们。

最后，我不想开始辩论，所以我更喜欢诸如理由之类的答案，反对理由。

[1] [C++模板和duck类型有什么关系？](https://stackoverflow.com/questions/6923299/whats-the-relationship-between-c-template-and-duck-typing)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T12:59:01.757

我遇到了“鸭子打字”的两种不同定义。毫无疑问，有人会告诉你其中一个是“正确的”，另一个是“不正确的”。我只是试图记录它们都被使用而不是告诉你它们都是“正确的”，但我个人认为更广泛的含义没有错。

1) 仅运行时类型。类型是对象的属性，而不是变量，因此当您调用对象的方法或以其他方式使用对象因类型而具有的属性时，*必须*在运行时发现该方法的存在与否[* ]。因此，如果它“看起来像鸭子，叫起来像鸭子”（即，如果它有`quack()`功能），那么它“就是”一只鸭子（无论如何，你可以把它当作一只鸭子来对待）。根据这个定义，C++ 模板当然是第一个障碍，它们使用静态类型。

2) 一个更普遍的名称，用于表示如果它看起来像一只鸭子并且嘎嘎叫起来像一只鸭子那么它就是一只鸭子的*原则*，表示任何接口由接口消费者执行的操作*隐式*定义的设置，而不是而不是由生产者明确公布的接口（无论实现接口的）。根据这个定义，C++ 模板确实使用了一种鸭子类型，但是“看起来像鸭子”的东西是否“看起来像鸭子”是在编译时确定的，而不是在运行时，基于它的静态类型而不是动态类型。“编译时检查，这个变量的静态类型能不能嘎嘎？”，而不是“运行时检查，这个对象能不能嘎嘎？”。

在我看来，争论实际上是关于 Python 是否“拥有”这个术语，因此只有类似 Python 的类型系统才能被称为鸭子类型，或者其他人是否可以自由地将这个术语用于在不同的上下文中表示类似的概念. 无论您认为它应该是什么意思，使用“开玩笑”的术语并要求每个人都从中理解相同的正式定义似乎是不负责任的。SO 不是一个合适的论坛来告诉您“应该”一词是什么意思，除非您要询问权威来源，例如字典或任何正式定义它的学术论文。我想它可以告诉你它实际上是什么意思。

“通用编程”可以使用或不使用鸭子类型，具体取决于具体细节。C++ 通用容器确实使用“类型 2”鸭子类型，因为对于 C++ 中的通用类型，不能保证您可以复制、比较它、获取哈希值等。Java 通用容器没有，`Object`已经有足够的方法使其可散列等。

相反，我怀疑您所做的任何使用鸭子类型的事情都可以合理地称为“通用编程”。所以我想，按照你要求的术语，鸭子类型（任一定义）中的 GP > DT 是可以称为“通用”的大量内容的严格子集。

[*] 好吧，在某些情况下，您的动态语言可能会进行一些静态分析，以一种或另一种方式证明这种情况，但是对于静态分析无法最终确定的情况，该语言要求能够将此检查推迟到运行时。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T10:25:11.827

这确实是词汇的问题。在最一般的意义上，泛型编程与编译时与运行时的问题无关：它是对一般问题的解决方案。Python 是运行时泛型编程的一个很好的例子，但也可以在 C++ 中实现运行时泛型编程（执行时间成本很高）。

鸭子类型是一个正交概念，通常用于暗示运行时类型。同样，最常被引用的现代示例是 Python，但从 Lisp 开始的许多语言过去都使用过它。作为一般规则，C++ 和 Java 都明确选择*不*支持鸭子类型。这是一个权衡：安全性与灵活性（或编译时错误与运行时错误）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T10:10:11.410

Java 不支持该语言的鸭子类型。它确实支持可以实现相同目的的反射。据我所知，它与 Java 的泛型没有任何关系，实际上让它们一起工作真的很痛苦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T15:11:04.490

对我来说，“鸭子类型”意味着没有明确的一致性关系。如果一个东西像鸭子一样走路和像鸭子一样说话，它可以被视为鸭子，不需要明确声明它是鸭子。在 C++ 术语中，它不需要从 Duck 基类继承：继承是一种明确声明一个类符合另一个类的接口的方式。

这个概念与类型检查发生在运行时还是编译时是正交的。像 Smalltalk 这样的语言提供了在运行时发生的鸭子类型（并且继承用于重用实现，而不是声明接口的一致性）。C++ 模板是在编译时发生的一种鸭式类型。

最后一句话就是问题的答案。

# jquery - 用户可见时自动刷新页面

> ID：12457033
> 
> 赞同：0
> 
> 时间：2012-09-17T10:03:02.350
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

到目前为止，我们有这样的要求，比如每当用户在页面上处于活动状态时，我们都需要自动刷新该页面。每当用户在另一个窗口上最小化/活动时，我们需要停止自动刷新。

用户提出了新的要求。只要用户可见，我们就需要自动刷新页面。就像我水平/垂直设置了 2 个窗口，这样我就可以在一个窗口上工作并可以查看另一个窗口。我怎样才能实现这个功能？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:24:49.640

尝试这样的一些来检测可见性：

```
var state='';

    (function() {
        var hidden, change, vis = {
                hidden: "visibilitychange",
                mozHidden: "mozvisibilitychange",
                webkitHidden: "webkitvisibilitychange",
                msHidden: "msvisibilitychange",
                oHidden: "ovisibilitychange" /* not currently supported */
            };             
        for (hidden in vis) {
            if (vis.hasOwnProperty(hidden) && hidden in document) {
                change = vis[hidden];
                break;
            }
        }
        if (change)//this is for detecting without  focus, so it works for your second requirement
            document.addEventListener(change, onchange);
        else if (/*@cc_on!@*/false) // IE 9 and lower
            document.onfocusin = document.onfocusout = onchange
        else
            window.onfocus = window.onblur = onchange;

        function onchange (evt) {
            var body = document.body;
            evt = evt || window.event;

            if (evt.type == "focus" || evt.type == "focusin")
           {   
        body.className = "visible";
           state='visible';
            }         else if (evt.type == "blur" || evt.type == "focusout")
            {  body.className = "hidden";     state='';}
                else    {    
                body.className = this[hidden] ? "hidden" : "visible";}
        }

    })();

function timeout_trigger() {
if(state=='visible')
{
//    window.open('PAGE','_SELF'); OR some ajax  
}
}

    setTimeout('timeout_trigger()', 30000); 
```

IE 9 及更低版本需要 onfocusin 和 onfocusout，而所有其他版本都使用 onfocus 和 onblur。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:09:35.367

看看这个答案：[JavaScript / jQuery: Test if window has focus](https://stackoverflow.com/questions/3479734/test-if-window-has-focus) for a method to determine if window has focus。

在`setInterval`上面示例的部分中，您可以添加代码来刷新页面。

你可以添加一个电话到

```
location.reload(); 
```

用于刷新页面

# iphone - 如何在 FirstViewController.h 顶部添加一个简单的函数

> ID：12457038
> 
> 赞同：0
> 
> 时间：2012-09-17T10:03:38.743
> 
> 标签：iphone, objective-c, ios, xcode

我正在编写一个带有 10 个按钮的简单应用程序。一个按钮如下所示：

```
- (IBAction)num1pressed:(UIButton *)sender
{
    // checkSomethingFirst
    self.myLabel.text=[NSString stringWithFormat:@"1"];
} 
```

每个按钮都需要“首先检查某些内容”，因此我想调用一个名为 checkSomethingFirst 的函数，而不是将代码行复制并粘贴到每个 (IBAction)num#pressed 代码段中。也许功能在这里是错误的词？不过我的功能看起来像这样：

```
-(void)checkSomethingFirst
{
// check first thing
// check other thing
// check last thing
} 
```

当我编译我的代码时 - 它看起来像这样：

```
- (IBAction)num1pressed:(UIButton *)sender
{
    checkSomethingFirst;
    self.myLabel.text=[NSString stringWithFormat:@"1"];
} 
```

我在 checkSomethingFirst 处收到错误；<--- 使用未声明的标识符“checkSomethingFirst”。

如何创建一个所有按钮都可以使用的简单函数或过程？注意我不需要返回任何值，因为我的 checkSomethingFirst 函数只是将标签设置为 0 或 1（使用 bool 可能更好，除非我在全局标签上进行设置 - 因此无需返回一个布尔值，我可以简单地询问标签中的值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:04:52.630

你以错误的方式调用你的方法

```
 - (IBAction)num1pressed:(UIButton *)sender
{
    [self checkSomethingFirst];
    self.myLabel.text=[NSString stringWithFormat:@"1"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:05:13.003

您需要使用调用该方法

```
[self checkSomethingFirst]; 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:05:29.180

您需要说明应该在哪个对象上调用该方法

`[self checkSomethingFirst];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:08:14.143

```
- (IBAction)num1pressed:(UIButton *)sender
{
    // checkSomethingFirst
    [self checkSomethingFirst];
    self.myLabel.text=[NSString stringWithFormat:@"1"];
} 
```

# c# - wcf rest ierrorhandler webfaultexception

> ID：12457039
> 
> 赞同：3
> 
> 时间：2012-09-17T10:03:40.323
> 
> 标签：c#, json, wcf, rest, ierrorhandler

我有一个 WCF 4 Rest 服务将由一个 java 客户端和一个 c# mvc3 客户端使用。响应内容需要以 json 格式返回。

我希望能够以一致的方式将任何异常/故障返回给客户端。我读到应该使用 WebFaultException 并且确实可以正常工作。

但是，我不想用 WebFaultExceptions 污染我的应用程序逻辑项目，因为它可能被非 Web 项目使用。

因此，我查看了在 WCF Rest 服务中实现 IErrorHandler 以捕获任何异常，然后对于特定的异常，即 ValidationException，将异常作为包装在 WebFaultException 中的错误返回。但是，这似乎不起作用，当我调用 form fiddler 时，我得到以下 Http 504 响应

[Fiddler] ReadResponse() 失败：服务器没有返回对此请求的响应。

我已将代码简化为最基本的内容，以显示我正在做的事情的本质。

```
public void ProvideFault(Exception error, 
                         MessageVersion version, 
                         ref Message fault)
{
    var ex = new WebFaultException<Exception>(
                                      new Exception("you can't do that"), 
                                      HttpStatusCode.Unauthorized);

    var xmf = ex.CreateMessageFault();
    fault = Message.CreateMessage(version,
                                  null,
                                  xmf,
                                 new DataContractJsonSerializer(xmf.GetType()));
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:31:23.420

这是来自[Carlos 博客](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/07/wcf-extensibility-ierrorhandler.aspx)的示例代码。过去对我有帮助。

```
public class ValidationAwareErrorHandler : IErrorHandler
{
    IErrorHandler originalErrorHandler;
    public ValidationAwareErrorHandler(IErrorHandler originalErrorHandler)
    {
        this.originalErrorHandler = originalErrorHandler;
    }

    public bool HandleError(Exception error)
    {
        return error is ValidationException || this.originalErrorHandler.HandleError(error);
    }

    public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
    {
        ValidationException validationException = error as ValidationException;
        if (validationException != null)
        {
            fault = Message.CreateMessage(version, null, new ValidationErrorBodyWriter(validationException));
            HttpResponseMessageProperty prop = new HttpResponseMessageProperty();
            prop.StatusCode = HttpStatusCode.BadRequest;
            prop.Headers[HttpResponseHeader.ContentType] = "application/json; charset=utf-8";
            fault.Properties.Add(HttpResponseMessageProperty.Name, prop);
            fault.Properties.Add(WebBodyFormatMessageProperty.Name, new WebBodyFormatMessageProperty(WebContentFormat.Json));
        }
        else
        {
            this.originalErrorHandler.ProvideFault(error, version, ref fault);
        }
    }

    class ValidationErrorBodyWriter : BodyWriter
    {
        private ValidationException validationException;
        Encoding utf8Encoding = new UTF8Encoding(false);

        public ValidationErrorBodyWriter(ValidationException validationException)
            : base(true)
        {
            this.validationException = validationException;
        }

        protected override void OnWriteBodyContents(XmlDictionaryWriter writer)
        {
            writer.WriteStartElement("root");
            writer.WriteAttributeString("type", "object");

            writer.WriteStartElement("ErrorMessage");
            writer.WriteAttributeString("type", "string");
            writer.WriteString(this.validationException.ValidationResult.ErrorMessage);
            writer.WriteEndElement();

            writer.WriteStartElement("MemberNames");
            writer.WriteAttributeString("type", "array");
            foreach (var member in this.validationException.ValidationResult.MemberNames)
            {
                writer.WriteStartElement("item");
                writer.WriteAttributeString("type", "string");
                writer.WriteString(member);
                writer.WriteEndElement();
            }
            writer.WriteEndElement();

            writer.WriteEndElement();
        }
    }
} 
```

# java - 我想要java中文件的相对路径

> ID：12457041
> 
> 赞同：0
> 
> 时间：2012-09-17T10:04:07.640
> 
> 标签：java

我是java新手。我想在java中读取一个属性文件。但是我的属性文件在同一个项目的不同路径中。

我不想硬编码它。我想尝试使用动态路径。这是我的代码，

```
 Properties properties = new Properties();
     try{
        File file = new File("myFile.properties");
        FileInputStream fileInput = new FileInputStream(file);

        properties.load(fileInput);

     }catch(Exception ex)
     {
         System.err.println(ex.getMessage());
     } 
```

我的文件在文件夹中，`webapp/txt/myFile.properties`.

任何人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:08:52.560

解决此问题的一种方法是将文件的绝对路径分成两部分

1.  直到您的项目文件夹的路径
2.  从您的项目文件夹开始的路径（相对路径）

您可以在应用程序中使用这两个属性并连接并获取文件的绝对路径。相对路径仍然是可配置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:11:32.930

```
public Properties loadDBProperties() {
    InputStream dbPropInputStream = null;
    dbPropInputStream = DbConnection.class
            .getResourceAsStream("MyFile.properties");
    dbProperties = new Properties();
    try {
        dbProperties.load(dbPropInputStream);
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    return dbProperties;
} 
```

你可以调用这个方法

```
dbProperties = loadDBProperties();
String dbName = dbProperties.getProperty("db.schema");//you can read your line form here of properties file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:05:27.577

如果它的下面`webapp/txt.myFile.properties`和 webapp 是公共 web 空间，那么你需要使用绝对 URL 来阅读它

```
getServletContext().getRealpath("/txt/myFile.properties") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:07:08.410

```
 Properties prop=new Properties();
  InputStream input = getServletContext().getResourceAsStream("/txt/myFile.properties");
  prop.load(input);
  System.out.println(prop.getProperty(<PROPERTY>)); 
```

# iphone - 如何让 UIButton 在预定的时间间隔出现？

> ID：12457046
> 
> 赞同：1
> 
> 时间：2012-09-17T10:04:35.233
> 
> 标签：iphone, objective-c, ios, xcode

所以我有一个定时延迟动作，这样当一个人按下按钮时，它会在设定的时间数字（5秒）后显示一个标签

```
-(IBAction)start{

Desc.text = @"Text appears";
[self performSelector:@selector(delay) withObject:nil afterDelay:5.0];

}

-(void)delay{

Desc2.text = @"Text to appear in 5 seconds";
[self performSelector:@selector(delayA) withObject:nil afterDelay:5.0];

} 
```

至于我试图制作的下一行代码，不是在预定的时间间隔后出现标签，而是试图让 Button 在 5 秒内出现。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:13:23.747

```
UIButton *btn = [UIButton alloc] initWithFrame:[Desc2 frame]];

[btn setTitle: [Desc2 text] forState:UIControlStateNormal];

[self.view addSubview:btn]; 
```

此代码段创建`UIButton`Desc2 所在的位置，`UILabel`并使用 Desc2 的内容设置按钮的标题。

您可以将它放在 delayA 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:13:47.447

```
-(void)delayA{

UIButton *button = [[UIButton alloc] init];
button.frame = CGRectMake(x, y, width, height); //add the parameters
[self.view addSubview:button];
} 
```

希望能帮助到你。快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:20:04.307

您可以使用以下内容：

```
[NSTimer scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:22:46.710

试试这个，

```
NSTimer *aTimer = [NSTimer timerWithTimeInterval:(5.0) target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];
    NSRunLoop *runner = [NSRunLoop currentRunLoop];
    [runner addTimer:aTimer forMode: NSDefaultRunLoopMode]; 
```

并设置您要执行的操作

```
-(void)timerFired:(NSTimer *) theTimer
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T10:32:23.783

如果您只尝试显示和隐藏按钮，请使用 alpha 属性。

```
// show button
[self.yourButton setAlpha: 1]

// hide button
[self.yourButton setAlpha: 0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T10:53:19.033

首先您的 UIButton 必须隐藏，例如您的按钮名称是 btn1 然后在`viewDidLoad:`方法中编写此代码

```
- (void)viewDidLoad
{

    btn1.hidden = YES;

}

-(IBAction)start{
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:5.0
                                             target:self
                                           selector:@selector(targetMethod:)
                                           userInfo:nil
                                            repeats:YES];
}
-(IBAction)targetMethod:(id)sender{
       btn1.hidden = NO;
} 
```

要使用此代码，您可以在 xib 上拖放按钮并命名为 btn1 或如您所愿...

我希望，这个答案对你有帮助..

:)

# iphone - 如何合并透视图（3D 变换）？

> ID：12457047
> 
> 赞同：0
> 
> 时间：2012-09-17T10:04:37.933
> 
> 标签：iphone, uiimage, core-image, cgimage

![在此处输入图像描述](../Images/2a1bead4c9d6dd5f1196eaaeb1ace06a.png)

如何合并这两个图像（见附图）。我正在使用下面的代码。它适用于普通图像，不适用于 3D 变换图像。如何处理这个问题。我已经搜索了很多次仍然没有得到正确的结果。请帮我。提前致谢。

```
UIImage *mergedImage;
UIGraphicsBeginImageContext(backgroundImageView.frame.size);
[backgroundImageView.layer  renderInContext:UIGraphicsGetCurrentContext()]; //bacgroundImageView here
mergedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:24:13.697

您可以创建一个`CGImageRef`包含要放在顶部的失真图像（该图像的背景为 0% alpha），这样您就可以使用上面的代码混合图像。

因此，您真正需要的是如何将 3D 变换应用于图像。更准确地说，当您在自己的话中寻找“透视”时，您正在寻找如何将单应性扭曲到图像。

CoreImage[编程指南](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/CoreImaging/CoreImage.pdf)指定这`CIPerspectiveTransform`是要走的路，不幸的是，从 iOS 5.1 开始，这在 iOS 上不可用。

所以你有几个选择：

*   如果您只想显示结果混合而不是对其进行操作，您可以使用两个`UIImageView`相互叠加的 s，其中一个包含使用巧妙设计的透视图像进行转换`CATransform3D`

*   如果您绝对需要混合图像，则需要使用其他框架，例如[OpenCV](http://opencv.itseez.com)（`warpPerspective()`您正在寻找的功能）或 OpenGL ES

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:41:36.127

不幸的是，`renderInContext:`只能展平 2D 变换。它不能展平应用于图层的 3D 变换。没有办法解决这个问题。

# api - 将 POST 数据作为原始正文接收是 RESTful 吗？

> ID：12457053
> 
> 赞同：1
> 
> 时间：2012-09-17T10:04:55.350
> 
> 标签：api, http, rest

如果我在我的 REST API 中提供一个 POST，比如

```
https://api.myservice.com/myresource 
```

我想从 POST 中接受一个复杂的 JSON 字符串/对象。

我是不是该

*   省略 JSON 并将整个对象映射到 URL（这很不酷）

*   将 JSON 数据作为键 => 值对添加到 JSON

*   我可以访问原始的身体数据还是不会更安静？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:24:53.057

无论您列出的选项如何，我都看不到对任何 REST 约束有任何影响。问问自己我是否违反了任何 REST 约束更有价值，如果是，我会失去什么好处，并根据相关的利弊做出决定。

实现“RESTful”状态不应该是最终目标。选择对您的应用程序很重要的约束并应用它们应该是目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:34:13.733

当您`POST`对 URL执行操作时，`https://api.myservice.com/myresource`您将在正文中创建一个`myresource`带有详细信息的内容。`POST`URL 通常应包含您的资源。

# mongoose - 在moongoose中取消许多字段的最佳方法是什么？

> ID：12457057
> 
> 赞同：0
> 
> 时间：2012-09-17T10:05:04.317
> 
> 标签：mongoose

我想取消设置我的收藏中的字段。此字段位于数组中。

```
var Stuff = new Schema(
 property = String,
_invitedAdmin = [String]
) 
```

使用 mongooDB 我可以做到这一点：

```
Stuff.update({_invitedAdmin:email}, { $unset : {_invitedAdmin : email} }, callback); 
```

我怎样才能对 MongooseJS 做同样的事情？

我尝试：

```
Stuff.find({property:isTtrue}, function(err, stuff) {
{
    for(i=0; i < stuff.length;i++)
    {
     stuff[i]._invitedAdmin = undifined; 
     stuff[i].save();
    }
}); 
```

但它不起作用:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:31:02.353

要从Stuff 集合中所有文档`email`的字段中删除所有实例：`_invitedAdmin`

```
Stuff.update(
    {_invitedAdmin: email}, 
    {$pull : {_invitedAdmin : email}}, 
    {multi: true}, 
    callback); 
```

如果您不包含该`{multi: true}`选项，它只会影响第一个匹配的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:29:10.403

您可以通过将值设置为 undefined 来完全从文档中删除该属性，这将触发 $unset。

```
doc.path = undefined; doc.save() 
```

# c# - 绑定时将文本添加到 TextBlock Text 属性

> ID：12457058
> 
> 赞同：2
> 
> 时间：2012-09-17T10:05:05.860
> 
> 标签：c#, wpf, text, binding, textblock

我有一个`TextBlock`它的`Text`属性与另一个表示值的属性绑定的地方：

```
<TextBlock Text="{Binding Path=Count}" FontWeight="Bold" /> 
```

所以，如果（例如）`Count`是`4`，我会在我的 TextBlock 中看到数字**4**。

现在，如果我想在数字 4 之前和之后添加一些文本（例如，我想在方括号**[4]**中看到该数字），我必须做什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:08:54.093

你应该使用 stringformat

```
<TextBlock Text="{Binding Path=Count, StringFormat={}[{0}]}" FontWeight="Bold" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:11:59.613

您也可以尝试使用 - 基于`MultiBinding`

```
<TextBlock.Text>
    <MultiBinding StringFormat=" {0}{1}{2}">
        <Binding Path="Prefixe"/>
        <Binding Path="Count"/>
        <Binding Path="Suffixe"/> 
    </MultiBinding>
</TextBlock.Text> 
```

注意：设置后缀和前缀

# actionscript-3 - Flex 3 将布尔值与 .as 中的条件绑定

> ID：12457060
> 
> 赞同：1
> 
> 时间：2012-09-17T10:05:11.750
> 
> 标签：actionscript-3, apache-flex, flex3

我想在 actionscript 中绑定一个带有条件的布尔值。这在 mxml 中是可能的，但是如何在 actionscript 上做到这一点？

例子：

.mxml 绑定：

```
enabled={(A_changed || B_changed  || C_changed || D_changed) &amp;&amp; rs.selectedIndex !=-1}/> 
```

.as 绑定：

```
BindingUtils.bindProperty(this.myBtn,'enabled',????); 
```

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:01:06.620

您的问题没有懒惰的解决方案 - Flex 编译器在 MXML 绑定中进行了大量转换，这些转换在 vanilla AS3 中不可用。您必须将[BindingUtils.bindSetter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/binding/utils/BindingUtils.html#bindSetter%28%29)附加到所有属性。就像是：

```
var closure:Function = function(...triggers):void {
     enabled = (A_changed || B_changed || C_changed || D_changed) && rs.selectedIndex !=-1;
}
BindingUtils.bindSetter(closure, this, "A_changed");
BindingUtils.bindSetter(closure, this, "B_changed");
BindingUtils.bindSetter(closure, this, "C_changed");
BindingUtils.bindSetter(closure, this, "D_changed");
BindingUtils.bindSetter(closure, rs, "selectedIndex"); 
```

# mysql - 交叉表更新无法工作

> ID：12457063
> 
> 赞同：0
> 
> 时间：2012-09-17T10:05:15.040
> 
> 标签：mysql

我尝试了很多代码（一些来自stackoverflow），但没有一个可以工作。

这是我的mysql数据库的结构：

```
table hesk_tickets : id, name, email

table hesk_callers : empnum, email, dept 
```

中的`name`列`hesk_tickets`引用员工编号，中的`empnum`列也是如此`hesk_callers`

`hesk_tickets`开始时but中没有其他员工信息`name`。我想在其中添加更多员工信息，以便于回调。

然后我将一个包含员工信息的 xls 文件导入到一个名为`hesk_calles`. 我想`hesk_tickets`在与`hesk_callers`.

我试过这个：

```
UPDATE hesk_tickets t1, hesk_callers t2
SET t1.email = t2.email
WHERE t1.name = t2.empnum; 
```

也试过

```
UPDATE hesk_tickets ht
JOIN hesk_callers hc ON ht.name = hc.empnum
SET ht.email = hc.email 
```

0 行受影响。

hesk_tickets 中有 6000 条记录，hesk_callers 中有 1000 条记录。

任何解决方案将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:23:38.920

尝试执行

`select count(*) from hesk_tickets ht join hesk_callers hc on ht.name = hc.empum`

验证您是否确实有一些匹配的数据要更新。您可能会发现查询返回零。如果返回大于零的数字，则意味着您的 UPDATE 查询影响零行，因为电子邮件地址已经匹配（因此不需要更新）

# php - XML PHP Delete specific Child if？

> ID：12457070
> 
> 赞同：0
> 
> 时间：2012-09-17T10:05:50.127
> 
> 标签：php, xml

我有一个看起来像这样的 xml 文档：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<library>
  <invites>
    <invite>
      <username>0</username>
      <userid>0</userid>
    </invite>
    <invite>
      <username>Danielle</username>
      <gameid>87808</gameid>
    </invite>
    <invite>
      <username>Petra</username>
      <userid>978</userid>
    </invite>
  </invites>
</library> 
```

现在，我想`<invite>`和 Danielle 一起删除，但我不知道怎么做？我现在正在使用它，但这只会删除第一条记录？

```
$file = 'my.xml';
$fp = fopen($file, "rb") or die("cannot open file");
$str = fread($fp, filesize($file));

$xml = new DOMDocument("1.0", "ISO-8859-1");
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->loadXML($str) or die("Error");

$root   = $xml->documentElement;
$fnode  = $root->firstChild;

$ori    = $fnode->childNodes->item(0);

$fnode->removeChild($ori);

$xml->save($file); 
```

我希望能够根据游戏 ID 或用户 ID 删除。我该怎么做？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:10:19.380

您可以使用 XPath 选择具有特定用户 ID 或游戏 ID 的所有节点：http: [//www.w3schools.com/xpath/default.asp](http://www.w3schools.com/xpath/default.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:04:11.343

尝试这个：

使用 DOM 和 DOMXPath。

```
<?php
$dom = new DOMDocument( '1.0' );
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;

// load the xml file
$dom->loadXML( '<?xml version="1.0" encoding="ISO-8859-1"?>
<library>
  <invites>
    <invite>
      <username>0</username>
      <userid>0</userid>
    </invite>
    <invite>
      <username>Danielle</username>
      <gameid>87808</gameid>
    </invite>
    <invite>
      <username>Petra</username>
      <userid>978</userid>
    </invite>
  </invites>
</library>', LIBXML_NOBLANKS );
$xpath = new DOMXPath($dom);

//find all 'invite' nodes with username=Danielle and delete'em.
$node = $xpath->query("//invite[username='Danielle']");

// if found, append the new "value" node
if( $node->length ) {
    foreach ($node as $n) {
        $n->parentNode->removeChild( $n );
    }
}

header('content-type: text/xml');
echo $dom->saveXML();
?> 
```

希望这可以帮助。

# wcf - 更新开发者许可证后出现错误。无法连接到 WCF 服务

> ID：12457071
> 
> 赞同：1
> 
> 时间：2012-09-17T10:05:54.830
> 
> 标签：wcf, azure, microsoft-metro, nettcpbinding, transport-security

我有一个 WCF*自托管*服务，在*Windows Azure*`NetTcpBinding`上使用*回调*和*传输安全*，并带有生产证书和域重定向。

 *在更新我的开发人员许可证之前，一切正常。之后，我在 Reference.cs 文件中得到了这个异常：

> 为扩展 'Microsoft.VisualStudio.Diagnostics.ServiceModelSink.Behavior' 注册的类型 'Microsoft.VisualStudio.Diagnostics.ServiceModelSink.Behavior, Microsoft.VisualStudio.Diagnostics.ServiceModelSink, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 可以不被加载。

我的同事还没有更新她的开发许可证，一切对她来说仍然有效。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:21:24.920

删除项目并从源代码管理重新下载它解决了这个问题。不知道发生了什么...*

# python - 排序和合并两个列表列表

> ID：12457081
> 
> 赞同：-5
> 
> 时间：2012-09-17T10:07:11.560
> 
> 标签：python

我有两个清单，

```
[[1, 2], [4, 7], [11, 13], [15, 21]]

[[3, 4], [5,12], [23, 25]] 
```

我想要这样的输出。

```
[[1, 2], [3,13], [15, 21], [23, 25]] 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:14:45.680

[合并具有重叠时间范围的时间范围元组列表中](https://stackoverflow.com/questions/5679638/merging-a-list-of-time-range-tuples-that-have-overlapping-time-ranges)的算法非常适合您的输入，前提是您将它​​们连接起来：

```
def merge(times):
    saved = list(times[0])
    for st, en in sorted([sorted(t) for t in times]):
        if st <= saved[1]:
            saved[1] = max(saved[1], en)
        else:
            yield tuple(saved)
            saved[0] = st
            saved[1] = en
    yield tuple(saved)

lst1 = [[1, 2], [4, 7], [11, 13], [15, 21]]
lst2 = [[3, 4], [5,12], [23, 25]]

print list(merge(sorted(lst1 + lst2))) 
```

输出：

```
[(1, 2), (3, 13), (15, 21), (23, 25)] 
```

# ruby - “expected_title”过程在预期标题上抛出错误错误

> ID：12457083
> 
> 赞同：2
> 
> 时间：2012-09-17T10:07:31.950
> 
> 标签：ruby, watir, watir-webdriver

我对来自 watir-page-helper 的“expected_title”程序有一些问题。它会抛出一个错误，例如当前网页的标题与预期的不同，尽管它是正确的标题：

```
RuntimeError: Expected title 'Some title' instead of 'Some Title'. 
```

这是随机发生的，我的测试在不同的页面上经常失败。我正在工作的网站在合理的时间内加载，我认为这不是加载页面问题。

要初始化页面，我正在使用下一个方法：

```
@new_mail_editor = Module::Page.new(@browser, false) 
```

这适用于访问链接时打开的页面。

有人知道为什么会这样吗？有没有办法避免这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:30:22.997

Watir-page-helper 已[停止使用](http://watirmelon.com/2012/03/29/watir-page-helper-has-been-end-of-lifed/)，您应该尝试[page-object](https://rubygems.org/gems/page-object) gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:01:53.047

与此同时，我发现我做错了什么。初始化浏览器并检查标题时，我使用的是“has_expected_title？” 而不是“expected_title”。看来我没有正确使用第一个功能现在一切正常。

# c# - 在文件夹中保存具有唯一名称的上传文件

> ID：12457084
> 
> 赞同：1
> 
> 时间：2012-09-17T10:07:34.620
> 
> 标签：c#, asp.net, file-upload

我需要将文件（图像）保存到文件夹中。如果有一个名为“OrignalName”的图像，则将其以原始名称保存到我指定的文件夹中。我在用着

```
string filename = Path.GetFileName(fileupload1.PostedFile.FileName);
GenerateFileName(filename);
fileupload1.SaveAs(Server.MapPath("Images" + filename)); 
```

我应该如何将文件名更改为唯一的，例如时间戳 (yyyymmddMMss) 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:23:07.893

```
System.IO.FileInfo file = new System.IO.FileInfo(FileUpload1.PostedFile.FileName);
    string fname = file.Name.Remove((file.Name.Length - file.Extension.Length));
    fname = fname + System.DateTime.Now.ToString("_ddMMyyhhmmss") + file.Extension; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:19:42.660

您可以将文件名与当前日期和时间连接起来，然后再将其保存到数据库中：

```
 string strtemp =  filename + System.DateTime.Now.ToString("ddMMyyhhmmss"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T10:20:01.997

您可以尝试使用此代码

```
var newPath = filename + DateTime.Now.ToString("yyyymmddMMss");
fileupload1.SaveAs(Server.MapPath("Images/" + newPath)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T10:21:10.643

很容易将文件保存到位置，然后重命名他

```
string newName = System.DateTime.Now.ToString("ddMMyyhhmmss");
Microsoft.VisualBasic.FileIO.RenameFile(file, newName); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-10-06T09:37:51.150

尝试以下操作：

```
 int generatedNo = randomNumber.Next(100, int.MaxValue);
 string filePath=Path.Combine(Server.MapPath("~/finaldesign")+generatedNo+".jpg");
 imageTosave.Save(filePath, ImageFormat.Jpeg); 
```

# python - 没有任何框架的python请求/响应

> ID：12457085
> 
> 赞同：-1
> 
> 时间：2012-09-17T10:07:40.773
> 
> 标签：python, apache

我需要设计一个 API，向 URL 发出请求，然后返回响应。现在我不想使用任何框架。

所以我的问题是我怎样才能做到这一点。我想从网络浏览器发送请求并获得响应。我已经设置了 apache 服务器。那么我的 python 代码应该在哪里接收请求以及如何响应

编辑

```
import urllib2
request = urllib2.Request('http://localhost/')
request.get_method = lambda : 'HEAD'

response = urllib2.urlopen(request)
response.info().gettype() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:17:13.810

试试 Flask，它是一个微框架，并且设置它应该是单行的。

[http://flask.pocoo.org/](http://flask.pocoo.org/)

以下是配置 Apache 以运行它的文档：

[http://flask.pocoo.org/docs/deploying/mod_wsgi/](http://flask.pocoo.org/docs/deploying/mod_wsgi/)

我知道你说没有框架，但这比自己做要简单得多。

# c# - asp按钮找不到事件处理程序

> ID：12457087
> 
> 赞同：0
> 
> 时间：2012-09-17T10:07:48.773
> 
> 标签：c#, asp.net, visual-studio-2010, events, web

我在使用 ASP 在按钮上注册事件时遇到问题。它给了我错误：

```
CS1061: 'ASP.permissions_aspx' does not contain a definition for 'CreateEndUserClick' and no extension method 'CreateEndUserClick' accepting a first argument of type 'ASP.permissions_aspx' could be found (are you missing a using directive or an assembly reference?) 
```

当我在浏览器中访问该页面时，它仍然编译成功。基本上它找不到 onclick 处理程序，但我不知道为什么。

这是我的 asp 文件 Permissions.aspx：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/MainLayout.master" AutoEventWireup="True"  CodeBehind="Permissions.aspx.cs" Inherits="WebProj._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Button ID="Button_CreateEndUser" runat="server" OnClick="CreateEndUserClick" Text="Create New End User/Group" />
</asp:Content> 
```

我显然删除了页面的一些不相关元素。

还有我的代码隐藏文件 Permissions.aspx.cs：

```
namespace WebProj
{
    public partial class Permissions : System.Web.UI.Page
    {
        protected global::System.Web.UI.WebControls.Button Button_CreateEndUser;

        protected void Page_Load(object sender, EventArgs e)
        {
        }

        protected void CreateEndUserClick(object sender, EventArgs e)
        {
            Button_CreateEndUser.Text = "Hamstertext";
        }
    }
} 
```

我不确定为什么它无法找到该功能。可能是因为我使用内容标签将其放在主文件中吗？

对于如何解决此问题，我将不胜感激。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:11:34.413

在您的`Page`指令中尝试更正`Inherits`属性：

```
Inherits="WebProj.Permissions" 
```

此属性应包含类后面的代码名称，在您的情况下为`WebProj.Permissions`(not `WebProj._Default`)。请注意，此处指定的类应在`CodeBehind`属性中指定的文件中定义（`Permissions.aspx.cs`在您的情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:45:50.030

你必须使用

```
 Inherits="WebProj.Permissions" 
```

原因，你有**命名空间 WebProj**和**类 Permissions**。所以继承必须使用相同的。

# vb.net - 如何以编程方式在 Microsoft Word 2010 中打开文档信息面板

> ID：12457090
> 
> 赞同：1
> 
> 时间：2012-09-17T10:08:04.520
> 
> 标签：vb.net, visual-studio-2010, ms-word, office-2010

任何人都可以告诉我如何使用 vb.net 在 word 中打开文档信息面板的示例。如果您碰巧想知道我指的是哪个文档面板，您可以在以下位置查看屏幕截图：

[如何在 Microsoft Word 2010 中打开文档信息面板](http://sharepointsolutions.com/sharepoint-help/blog/2011/07/how-to-open-the-document-information-panel-in-microsoft-word-2010/)

到目前为止，这是我的代码：

```
Dim dialogBox As Word.Dialog = Globals.ThisAddIn.Application.Dialogs(Word.WdWordDialog.wdDialogFileSummaryInfo)
dialogBox.Show() 
```

我已经设法打开它，但它似乎是错误类型的文档面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:41:08.863

尝试这个

```
 Dim oWord As Word.Application
    Dim oDoc As Word.Document

    oWord = CreateObject("Word.Application")
    oWord.Visible = True
    oDoc = oWord.Documents.Add

    oWord.DisplayDocumentInformationPanel = True 
```

# c# - 将 DataTable.Rows 复制到 DataRow[]。比具有相同功能的 Select() 更快的方式？

> ID：12457094
> 
> 赞同：0
> 
> 时间：2012-09-17T10:08:17.787
> 
> 标签：c#, .net-4.0, dataset, asp.net-4.0

我现在遇到了我们的一个非常旧的系统的问题。（！*它已经超过 7 年了，我没有预算和资源对结构进行更大的改变，所以决定尽可能多地改进旧逻辑。*！）

我们有一个自己编写的网格控件。基本上它就像一个普通的 ASP.NET 网格，可以添加、更改、删​​除元素。

问题是网格有一个`BindGrid()`方法，为了进一步使用，将数据源表的行复制到`DataRow[]`. 我需要保留`DataRow[]`，但我想实现将源从表复制到数组中的最佳方法。

目前的解决方案：

```
DataRow[] rows = DataSource.Select("1=1", SortOrderString); 
```

正如我到目前为止所经历的那样，如果我需要获得指定的排序，那可能是最好的方法（我也很感兴趣它是否有更快的方法。）

但是有一些简化的页面，不需要 SortOrder。

所以我可以制作两种方法，一种用于排序顺序，另一种用于没有排序顺序。真正的问题是第二个：

```
 DataRow[] rows = DataSource.Select("1=1"); 
```

因为它非常慢。我做了一些测试，它比CopyTo() 解决方案**慢了 15 倍：**

```
DataRow[] rows = new DataRow[DataSource.Rows.Count];
DataSource.Rows.CopyTo(rows,0); 
```

我想使用更快的方法，但是当我进行测试时，一些旧功能简单地崩溃了。似乎还有另一个区别，我现在才注意到： **Select() 获取像 RowChanges 一样的行被接受。**

因此，如果我删除了一行，并且我不使用`AcceptRowChanges()`（*不幸的是我不能这样做*），那么`Select("1=1")`该行在 .`DataSource`但不在`DataRow[]`.

一个简单`.CopyTo()`的行就在那里，这对我来说是个坏消息。

**我的问题是：**

1) Select("1=1") 是通过 RowChanges 获取行的最佳方式吗？（我有点怀疑，因为它就像 6 岁的部分）

2) 如果 1) 不是，是否有可能以与 .Select("1=1") 相同的结果实现更快的方式？

**更新：**

这是一个非常基本的测试应用程序，我用于速度测试：

```
DataTable dt = new DataTable("Test");

dt.Columns.Add("Id", typeof (int));
dt.Columns.Add("Name", typeof(string));

for (int i = 0; i < 10000; i++)
{
    DataRow row = dt.NewRow();
    row["ID"] = i;
    row["Name"] = "Name" + i;
    dt.Rows.Add(row);
}

dt.AcceptChanges();
DateTime start = DateTime.Now;

DataRow[] rows = dt.Select();

/*DataRow[] rows = new DataRow[dt.Rows.Count];
dt.Rows.CopyTo(rows,0);*/

Console.WriteLine(DateTime.Now - start); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:21:07.113

您可以`Select`不带参数调用：`DataRow[] allRows = DataSource.Select();`这肯定比`"1=1"`应用无意义的`RowFilter`.

另一种方法是使用[`Linq-To-DataSet`](http://msdn.microsoft.com/en-us/library/bb386977.aspx)排序和过滤`DataTable`. 这不是更有效，但更具可读性和可维护性。

我还没有例子或测量，但很明显，有[`RowFilter`](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)比`"1=1"`没有更昂贵。`Select`是这样实现的：

```
public Select(DataTable table, string filterExpression, string sort, DataViewRowState recordStates)
{
    this.table = table;
    this.IndexFields = table.ParseSortString(sort);
    this.indexDesc = Select.ConvertIndexFieldtoIndexDesc(this.IndexFields);
    // following would be omitted if you would use DataSource.Select() without "1=1"
    if (filterExpression != null && filterExpression.Length > 0)
    {
        this.rowFilter = new DataExpression(this.table, filterExpression);
        this.expression = this.rowFilter.ExpressionNode;
    }
    this.recordStates = recordStates;
} 
```

如果您还希望能够选择当前不被接受的行，您可以使用以下重载[`Select`](http://msdn.microsoft.com/en-us/library/b5c0xc84.aspx)：

```
DataRow[] allRows = DataSource.Select("", "", DataViewRowState.CurrentRows | DataViewRowState.Deleted); 
```

这将选择所有行，包括已删除的行，即使`AcceptChanges`尚未调用也是如此。

# c++ - 使用 const，获取参数而不是复制

> ID：12457096
> 
> 赞同：1
> 
> 时间：2012-09-17T10:08:24.670
> 
> 标签：c++

我写了这段代码：

```
class Address{

  private:
    std::string street;
    int house;

  public:
    Address(std::string s, int h):
      street(s), house(h) {}

    void setHouse(int h) {house = h;}

    friend std::ostream &operator << (std::ostream& os, Address &a);
};

class Person{

    private:
      std::string name;
      Address A;

    public:
      Person(std::string n, std::string v, int c) :
        name(n), A(v, c) {}

      Address& getAddress(){return A;}

    friend std::ostream &operator << (std::ostream& os, Person &a);

};

std::ostream &operator << (std::ostream& os, Address &a){

  return os << "[" << a.street << ", " << a.house << "]";
}

std::ostream &operator << (std::ostream& os, Person &p){

  return os << p.name << " " << p.A;
}

int main(){

  Person pietro("Pietro", "Champs Elysees", 16);

  std::cout << pietro << std::endl;

  Address ma = pietro.getAddress();
  ma.setHouse(333); 

  std::cout << pietro << std::endl;

  return EXIT_SUCCESS;
} 
```

我有这些问题：

1.  为什么该行`ma.setHouse(333);`没有任何副作用`pietro`（即在第二个打印中，门牌号没有改变）？
2.  （我知道这不是正确的方法，但是）我怎样才能`ma.setHouse(333);`产生副作用`pietro`？
3.  `const Address& getAddress() const {return A;}`如果上面的代码没有副作用，我为什么要写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:11:34.370

> 为什么行 ma.setHouse(333); 对 pietro 没有任何副作用（即在第二张印刷品中，门牌号没有改变）？

```
 Address ma = pietro.getAddress();
  ma.setHouse(333); 
```

创建对象 ma 并从 复制初始化它`pietro.getAddress()`，因此`ma`与对象没有任何关系`pietro`。

> （我知道这不是正确的方法，但是）我怎样才能制作 ma.setHouse(333); 对 pietro 有副作用吗？

```
Address& ma = pietro.getAddress(); 
```

> 如果上面的代码没有副作用，我为什么要写 const Address& getAddress() const {return A;}？

您应该使您的函数 const - 正确，但`const-reference`在大多数情况下 return 并不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:11:50.250

Q1。因为您正在对 's 的副本进行**操作**：`pietro``Address`

```
Address ma = pietro.getAddress(); // ma is a copy of pietro's address
ma.setHouse(333);                 // modify copy, not pietro 
```

Q2。拿个参考？

```
Address& ma = pietro.getAddress(); // ma is a reference to pietro's Address.
ma.setHouse(333);                  // modifies pietro's Address 
```

Q3。所以你可以有 const 正确性。如果没有 const 方法和 const 返回值，您**可能**会影响对象的内部结构。此外，您不能在 const 实例或引用上调用该方法。

```
const Address& ma = pietro.getAddress(); // Calls const method. Cannot modify pietro
Address& ma = pietro.getAddress(); // calls non-const method. Can modify pietro 
```

# jsp - 在jsp中将项目设置为会话对象

> ID：12457099
> 
> 赞同：1
> 
> 时间：2012-09-17T10:08:40.483
> 
> 标签：jsp, servlets, javabeans, href

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:17:01.290

您可以将`ItemToSetToSession`作为参数传递给 servlet：

```
<a href = "servletName?item=ItemToSetToSession">ItemToSetToSession</a> 
```

在 servlet 代码中，您可以像这样获取此参数

```
session.setAttribute("item",(String)request.getParameter("item")); 
```

# javascript - iframe 的背景图片

> ID：12457107
> 
> 赞同：0
> 
> 时间：2012-09-17T10:08:55.183
> 
> 标签：javascript, html, css

```
 <HTML>
    <HEAD>
    <TITLE> New Document </TITLE>
    <META NAME="Generator" CONTENT="EditPlus">
    <META NAME="Author" CONTENT="">
    <META NAME="Keywords" CONTENT="">
    <META NAME="Description" CONTENT="">
    </HEAD>
    <BODY>
    <div style="background-image: url('images1.jpg');width:800;height:300;border:1px solid black">
    <iframe scrolling="auto" allowtransparency="true" name="main" style="width:100%;height:90%;"> </iframe>
    </div>

    </BODY>
    </HTML> 
```

我需要将背景图像添加到 iframe。所以我尝试将背景图像添加到 iframe 但我不能..所以我使用上面的 div 标签做到了。它在 Firefox 中正常工作，但在 IE 中不能正常工作。如果你知道这一点，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:11:08.883

您可以在 CSS 中使用背景图像

```
iframe{
background:url(http://www.hindsightfishing.com/images/waves_bg.jpg) no-repeat left top
}​ 
```

在这里演示[http://jsfiddle.net/9tndk/](http://jsfiddle.net/9tndk/)

# animation - 使用 VTK 的模型动画

> ID：12457108
> 
> 赞同：3
> 
> 时间：2012-09-17T10:09:04.513
> 
> 标签：animation, 3d, vtk, 3d-modelling

我有一个 3D 模型的 VTK 数据文件，我正在尝试显示应用于它的转换。

我有转换中每个状态的点坐标/多边形数据（应该有大约 10-30 个状态），即我可以为每个步骤编写另一个 VTK 文件。

我正在尝试创建一个漂亮的动画，其中每个状态都会显示 1 秒，然后尽可能流畅地切换到下一个状态。

最好的办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:50:04.977

[在 VTK 中有几种方法](http://www.vtk.org/Wiki/VTK/Examples/Cxx#Animation)可以为某些东西设置动画，VTK Wiki 上有一些示例。

最简单的方法可能是子类化`vtkCommand`（[DataAnimationSubclass](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Utilities/DataAnimationSubclass)），但“VTK/right”方法是使用`vtkAnimationScene`（[AnimationScene](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Utilities/AnimationScene)）。

# javascript - 自动平移谷歌地图

> ID：12457111
> 
> 赞同：1
> 
> 时间：2012-09-17T10:09:33.777
> 
> 标签：javascript, google-maps

我在谷歌地图 v3 上有一个标记，指示车辆的位置。标记移动，指示车辆的移动。当标记试图离开地图的可见部分时，如何自动平移地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:15:02.097

您可以使用地图的[getBounds](https://developers.google.com/maps/documentation/javascript/reference#Map)函数来查询边界。如果您的点移动到边界之外，您可以简单地调用[setCenter](https://developers.google.com/maps/documentation/javascript/reference#Map)来更新您的地图。

# batch-file - 在远程桌面登录上运行批处理文件失败

> ID：12457114
> 
> 赞同：1
> 
> 时间：2012-09-17T10:09:35.303
> 
> 标签：batch-file, remote-desktop

作为额外的保护，我想每晚将远程 sql db 备份到我的位置。没有VPN所以...

我在 2008 db 服务器上创建了一个用户，其唯一目的是从我的办公室登录并每晚下载 db bak 文件。授予此用户对备份目录 (T:\Backup) 的读取权限并添加到远程用户组。

我在我的工作站上创建了一个自动化任务，该任务调用一个以该用户身份成功连接到数据库服务器的 rdp 文件。

rdp 文件在“启动程序”选项卡中指定以下路径：C:\Windows\System32\mstsc.exe T:\Backup\copydb.bat

我已经测试了这两个部分：1）双击rdp文件将自动登录。(WORKS) 2) 然后我可以手动打开 dos 提示符并运行 bat 文件。（作品）

但是，bat 文件似乎没有在 connection 上执行。没有cmd窗口。我可以双击 bat 文件，cmd 窗口将闪烁并消失但不执行。我能够让它执行的唯一方法是打开提示，然后打开文件。

我认为这就是这样做的： C:\Windows\System32\mstsc.exe T:\Backup\copydb.bat

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:16:01.477

这可能是你的问题。

请参阅此 MS 支持文章[您无法使用运行初始程序的 .rdp 文件创建与基于 Windows Server 2008 的计算机的终端服务器会话](http://support.microsoft.com/kb/946410)

> 要变通解决此问题，请将程序路径添加到 RemoteApp 程序列表。为此，请按照下列步骤操作：
> 
> 1.  单击开始，单击运行，键入 remoteprograms.msc，然后单击确定。
>     
>     
> 2.  在操作窗格中，单击“添加 RemoteApp 程序”，然后单击“下一步”。
>     
>     
> 3.  Click Browse, locate the program that you want to approve, click Next, and then click Finish.

# actionscript-3 - Pixel Blender 中的输出值（跟踪）

> ID：12457117
> 
> 赞同：1
> 
> 时间：2012-09-17T10:09:46.027
> 
> 标签：actionscript-3, air, pixel-bender

我对 Pixel Blender 完全陌生（几个小时前开始）。

我的客户希望为他的应用程序提供经典的折叠效果，我向他展示了一些通过蒙版折叠效果的示例，但他不喜欢它们，因此我决定深入 Pixel Blender 尝试为他编写自定义着色器。

感谢上帝，我找到[了这个](http://superflashbros.net/2010/06/28/a-real-page-turner/)，我正在通过玩价值观来修改它。但是如何从 Pixel Blender ToolKit 跟踪/打印/回显值？这将加快我正在做的所有测试。

[我](http://blog.joa-ebert.com/2009/02/27/pixelbender-development-tool/)在评论中发现这是不可能的，这是真的吗？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:27:45.163

好吧，您不能直接在 Pixel Bender 中跟踪值，但是您可以，例如，制作某个位图，然后使用请求的值应用该过滤器并跟踪相关位图的像素值，以找出与所选点相对应的点。

例如，您制作一个 256x256 位图，每个点 (x,y) 具有“x”红色和“y”绿色分量值。然后，您使用选定的值应用该过滤器，并显示结果，或响应点击并跟踪底层颜色的红色和绿色值，这将为您提供源位图上的确切点。

# django - 如何在 Django ORM 中使用 F() 对象来执行此操作？

> ID：12457119
> 
> 赞同：6
> 
> 时间：2012-09-17T10:10:02.453
> 
> 标签：django, datetime, orm

我遇到了这样的模型：

```
class Task(models.Model):
    timespan = models.IntegerField(null=True, blank=True)

class Todo(models.Model):
    limitdate = models.DateTimeField(null=True, blank=True)
    task = models.ForeignKey(Task) 
```

我需要`Todos`使用`limitdate`低于或等于今天日期 + 相关`Task`模型中定义的时间跨度的所有内容进行提取。

类似（虚拟示例）：

```
today = datetime.datetime.now()
Todo.objects.filter(limitdate__lte=today + F('task__timespan')) 
```

现在，我可以用循环来做到这一点，但我正在寻找一种方法来做到这一点，但`F()`我找不到。

我开始怀疑我是否可以使用`F()`. 也许我应该使用`extra`？

请注意，我没有更改型号代码的奢侈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T15:34:31.640

主要问题是数据库不支持`date + integer`并且很难将 ORM 查询写入`date + integer::interval`，例如对于 PostgreSQL，列`integer`的值在哪里`task_timespan`，以天计。

但是，
`limitdate <= today + task__timespan`等于
`limitdate - today <= task__timespan`

我们可以将查询转换为

`Todo.objects.filter(task__timespan__gte=F('limitdate') - today).distinct()`

因此 SQL 变成了类似的东西`integer >= date - date`，它应该在 PostgreSQL 中工作，因为`date - date`输出`interval`可以与`integer`天数进行比较。

在其他数据库（例如 Sqlite）中，这很复杂，因为`julianday()`首先需要使用日期来转换......而且我认为您需要使用 w/`extra()`甚至`raw()`获得正确的 SQL。

此外，正如 Chris Pratt 建议的那样，如果您可以在所有相关字段中使用时间戳，则查询任务可能会变得更容易，因为加减操作的限制较少。

PS我现在没有env来验证，你可以先试试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T14:36:44.793

问题是数据库上没有 TIMESPAN 类型。因此，`F`不能返回在这种情况下您可以实际使用的东西。我不确定您在数据库中实际使用的字段类型，但我能想到的唯一方法是将时间跨度存储为由秒组成的整数，将其添加到“今天”作为时间戳，然后将其转换回日期时间，您可以使用它与`limitdate`. 但是，我不确定 Django 是否会接受这种复杂的逻辑`F`。

# php - 使用 ExpressionEngine 安全破解器隐藏表单字段

> ID：12457120
> 
> 赞同：0
> 
> 时间：2012-09-17T10:10:09.717
> 
> 标签：php, expressionengine, safecracker

我在我的网站的前端创建了一个表单，以允许注册成员发布帖子而无需访问 Admin CP，但是我想从输出中隐藏特定的表单元素。

我们要隐藏的元素是一个复选框，它允许显示只有管理员才能看到的项目。这可以使用自动表单输出吗？我使用了以下安全破解器代码：

```
{global_errors}{error}{/global_errors}

<label for="title">Title</label>
<input type="text" name="title" id="title" value="{title}" size="50" maxlength="100"         onkeyup="liveUrlTitle();">

{status_menu}
  <label for="status">Status</label>
  <select name="status" id="status">
    {select_options}
  </select>
{/status_menu}

{custom_fields}

  <p><label for="{field_name}">{if required}* {/if}{field_label}</label>
  {field_instructions}
  {formatting_buttons}

  {if error}
    <span class="error">{error}</span>
  {/if}
  {if textarea}
    <textarea id="{field_name}" name="{field_name}" dir="{text_direction}" rows="{rows}">{field_data}</textarea>
  {/if}
  {if text}
    <input type="text" dir="{text_direction}" id="{field_name}" name="{field_name}" value="{field_data}" maxlength="{maxlength}" size="50">
  {/if}
  {if select}
    <select id="{field_name}" name="{field_name}">
      {options}<option value="{option_value}"{selected}>{option_name}</option>{/options}
    </select>
  {/if}
  {if date}
    <input type="text" id="{field_name}" name="{field_name}" value="{field_data}" size="50">
  {/if}
  {if checkbox}
    {options}
      <label class="checkbox">{option_value}
        <input type="checkbox" id="{field_name}" name="{field_name}[]" value="{option_value}"{checked}>
      </label>
    {/options}
  {/if}
  {if radio}
    {options}
      <label class="checkbox">{option_value}
        <input type="radio" id="{field_name}" name="{field_name}" value="{option_value}"    {checked}>
      </label>
    {/options}
  {/if}
  {if safecracker_file}
    {display_field}
  {/if}
  {if relationship}
    <select id="{field_name}" name="{field_name}">
      {options}
        <option value="{option_value}"{selected}>{option_name}</option>
      {/options}
     </select>
  {/if}
  {if multiselect}
    <select id="{field_name}" name="{field_name}[]" multiple="multiple">
      {options}
         <option value="{option_value}"{selected}>{option_name}</option>
      {/options}
    </select>
  {/if}
  {if rte}
    <textarea id="{field_name}" class="rte" name="{field_name}" dir="{text_direction}" rows="{rows}">{field_data}</textarea>
  {/if}
</p>
{/custom_fields}
<input type="submit" name="submit" value="Submit"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:39:08.053

您可能会丢失`{custom_fields}`循环并对所有字段进行硬编码。

或者您可以扩展@unexplainedBacn 的计划并添加一个测试`field_name`以及`member_group`- 否则您将隐藏*所有*复选框。

```
{if checkbox}
  {if field_name == 'field_to_hide' && logged_in_group_id == 1} 
    {options}
      <label class="checkbox">{option_value}
        <input type="checkbox" id="{field_name}" name="{field_name}[]" value="{option_value}"{checked}>
      </label>
    {/options}
  {if:elseif field_name != 'field_to_hide'}
    {options}
      <label class="checkbox">{option_value}
        <input type="checkbox" id="{field_name}" name="{field_name}[]" value="{option_value}"{checked}>
      </label>
    {/options}
  {/if}
{/if} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:14:54.390

我不相信这是你可以自动做的事情。

您可以将复选框包装在条件中，检查管理员组（或组）的组 ID：

```
{if logged_in_group_id == 1} 
  <input type="checkbox" [...] />
{/if} 
```

如果您有两个“管理员”组，或者类似以下内容：

```
{if logged_in_group_id == 1 || logged_in_group_id == 7} 
  <input type="checkbox" [...] />
{/if} 
```

具体值取决于用户组的 ID 号（ CP 中的**成员**>**成员组**）。

# mysql - 合并两个表

> ID：12457125
> 
> 赞同：1
> 
> 时间：2012-09-17T10:10:25.040
> 
> 标签：mysql, database, join

我有两个表，其描述如下：

```
record(record_id,min_index,max_index)

points(point_id,point_name,val1,val2,rank), point_id being on auto-increment 
```

, from**记录**表指向点表中的 point_ids `min_index`。即对于特定记录，相应的点是>=min_index 和<=max_index。`max_index`

 **我需要合并这两个表，最终表类似于这样

```
points(point_id,record_id,point_name,val1,val2,rank) 
```

我知道这违反了规范化标准，但这似乎对我遇到的问题非常有效。我不确定如何合并这两个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:14:50.837

只需使用 MySQL 的运算符[连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)[`BETWEEN ... AND ...`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_between)表来指定您的连接条件：

```
SELECT points.point_id,
       record.record_id,
       points.point_name,
       points.val1,
       points.val2,
       points.rank
FROM   points JOIN record ON
         points.point_id BETWEEN record.min_index AND record.max_index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:21:18.630

```
SELECT a.point_id,
   b.record_id,
   a.point_name,
   a.val1,
   a.val2,
   a.rank
from points a , record b
where ((point_id>=min_index)and (point_id<=max_index)) 
```**

# javascript - 使用 javascript 增加 30 分钟的时间 - 不工作

> ID：12457126
> 
> 赞同：-1
> 
> 时间：2012-09-17T10:10:32.730
> 
> 标签：javascript

需要一些帮助来增加当前时间的额外时间

```
currentTime= new Date(); 
var hours2 = currentTime.getHours() + 4;
var minutes2 = currentTime.setMinutes(currentTime.getMinutes() + 30); 
```

但是它输出为： 15:1455880112692PM 并且似乎没有增加 4.5 小时？有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:17:55.227

那是因为你没有得到分钟，你得到的是 Date 对象。该`setMinutes`方法不返回分钟，它返回 Date 对象本身。将 Date 对象转换为字符串以显示它会为您提供自纪元以来的时间（以毫秒为单位）。

首先转换时间，以便您得到一个正确的结束时间，而不是像`27:93`代替`04:33`.

```
currentTime = new Date();
currentTime.setHours(currentTime.getHours() + 4);
currentTime.setMinutes(currentTime.getMinutes() + 30); 
```

然后你可以从中得到小时和分钟：

```
var hours2 = currentTime.getHours();
var minutes2 = currentTime.getMinutes(); 
```

您可以添加 270 分钟，而不是添加 4 小时 30 分钟：

```
currentTime = new Date();
currentTime.setMinutes(currentTime.getMinutes() + 270); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:18:48.090

我对出了什么问题有一些想法：

```
currentTime= new Date(); 
var hours2 = currentTime.getHours() + 4;//doesn't call the setHours method
var minutes2 = currentTime.setMinutes(currentTime.getMinutes() + 30);//works fine for me 
```

所以

```
currentTime= new Date(); 
var hours2 = currentTime.setHours(currentTime.getHours() + 4);//doesn't call the setHours method
var minutes2 = currentTime.setMinutes(currentTime.getMinutes() + 30);//works fine for me 
```

可以正常工作，但是，您可以在单行中执行此操作：

```
currentTime.setMinutes(currentTime.getMinutes() + 270);
//or in seconds:
currentTime.setSeconds(currentTime.getSeconds() + 270*60);//16200 === 4.5 hrs
//or miliseconds:
currentTime.setTime(currentTime.getTime() + 270*60000);//16200000 === 4.5 hrs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:15:36.147

你从不设定时间。尝试：

```
currentTime= new Date(); 
currentTime.setHours(currentTime.getHours() + 4);
currentTime.setMinutes(currentTime.getMinutes() + 30); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:22:19.393

试试这个我真的不明白你遇到的问题是什么？ [http://jsfiddle.net/H9edz/](http://jsfiddle.net/H9edz/)

```
currentTime= new Date(); 
var hours2 = currentTime.getHours() + 4;
var minutes2 = currentTime.setMinutes(currentTime.getMinutes() + 30);
document.write("Ending Time: " + currentTime);
document.write("<br/>");
document.write("Ending Minute: " + currentTime.getMinutes());
document.write("<br/>");
var now = new Date();
now.setMinutes(now.getMinutes() + 30);
document.write("Example Time - From Post:" + now) 
```

​</p>

# java - 以十进制表示法获取天数

> ID：12457127
> 
> 赞同：1
> 
> 时间：2012-09-17T10:10:50.280
> 
> 标签：java, date, datetime, time, unix-timestamp

我正在尝试以十进制表示法将两个日期的差异转换为天，例如，在我这样做的那一刻，

```
Date mostRecentDate = dates[0];
Date previousDate = dates[1];

long mostRecentTime = mostRecentDate.getTime();
long previousTime = previousDate.getTime(); 

long diffInDays = (mostRecentTime - previousTime ) / (1000 * 60 * 60 * 24); 
```

这总是会导致整个天数，但我希望如果两个日期的差异是两天半，我可以返回 2.5，或者如果差异是 6 小时，我可以返回 0.25 等等。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:17:18.990

DataType 是问题。您可以使用双倍。

```
 Date[] dates = new Date[2];
        dates[1] = new Date(System.currentTimeMillis()-12*1000*60*60);
        dates[0] = new Date(System.currentTimeMillis());
        Date mostRecentDate = dates[0];
        Date previousDate = dates[1];

        double mostRecentTime = mostRecentDate.getTime();
        double previousTime = previousDate.getTime(); 

        double diffInDays = (mostRecentTime - previousTime ) / (1000 * 60 * 60 * 24); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:16:26.337

而不是 long 你需要使用 double 来获得实数的差异。

```
double diffInDays = (mostRecentTime - previousTime ) / (1000 * 60 * 60 * 24); 
```

long 类型是整数，因为您将值除以任何答案，它将强制转换为整数并删除小数点

# asp.net - 如何将 Facebook 用户的信息值从脚本传递和保存到服务器？

> ID：12457128
> 
> 赞同：0
> 
> 时间：2012-09-17T10:10:49.067
> 
> 标签：asp.net, ajax, facebook

我有 fblogin 到我的网站。我想将 ID、姓名和电子邮件保存到数据库。所以请告诉我如何将这些值从脚本传递到服务器。由于我没有太多经验，我不知道如何将值从脚本传递到服务器。如果可以从脚本 ta 服务器传递值。请告诉我解决方案。

下面我发布了我的完整编码

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>Facebook Get Logged in User Details UserName,Email,Profile Image</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<script type="text/javascript">
// Load the SDK Asynchronously
(function(d) {
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) { return; }
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
ref.parentNode.insertBefore(js, ref);
} (document));

// Init the SDK upon load
window.fbAsyncInit = function() {
FB.init({
appId: 'XXXXX', // App ID
channelUrl: '//' + window.location.hostname + '/channel', // Path to your Channel File
status: true, // check login status
cookie: true, // enable cookies to allow the server to access the session
xfbml: true  // parse XFBML
});

// listen for and handle auth.statusChange events
FB.Event.subscribe('auth.statusChange', function(response) {
if (response.authResponse) {
// user has auth'd your app and is logged into Facebook
//var uid = "http://graph.facebook.com/" + response.authResponse.userID + "/picture";
var uid = "http://graph.facebook.com/" + response.authResponse.userID + "/education ";
var uuu = "http://graph.facebook.com/me?education=" + response.authResponse.accessToken
FB.api('/me', function(me) {alert(me.first_name)
var Name = me.name;
var Email = me.email

})

document.getElementById('auth-loggedout').style.display = 'none';
document.getElementById('auth-loggedin').style.display = 'block';
} else {
// user has not auth'd your app, or is not logged into Facebook
document.getElementById('auth-loggedout').style.display = 'block';
document.getElementById('auth-loggedin').style.display = 'none';
}
});
$("#auth-logoutlink").click(function() { FB.logout(function() { window.location.reload(); }); });
}
</script>
<form id="form1" runat="server">
<h1>
    &nbsp;Facebook Login Authentication </h1>
<div id="auth-status">
<div id="auth-loggedout">
<div class="fb-login-button" autologoutlink="true" scope=" user_checkins,user_website, user_relationship_details, user_hometown, user_religion_politics, user_education_history, user_about_me, user_birthday, user_status, publish_stream, user_photos, read_stream, friends_likes">Login with Facebook</div>
</div>

<div id="auth-loggedin" style="display: none">
    <br />
    Name:<b><span id="auth-displayname"></span></b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;(<a href="#" id="auth-logoutlink">logout</a>)<br />
First Name: <b><span id="firstname"></span></b><br />

Last Name: <b><span id="lastname"></span></b><br />

Email: <b><span id="Email"></span></b><br />

gender: <b><span id="gender"></span></b><br />

Dob of birth: <b><span id="birth"></span></b><br />

Location: <b><span id="location"></span></b><br />

</div>

    </div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:27:55.037

如果要将用户信息保存在服务器中，那么您需要使用一些服务器端语言。假设您使用PHP，那么在这种情况下，您需要将用户信息传递给服务器并首先检查用户信息是否存在于你的分贝与否..

> //连接你的数据库 //请求用户信息 //查询从数据库获取用户信息
> 
> if(你在数据库中有用户信息){ //显示用户资料 } else{ //上传到你的数据库 }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:35:20.043

我在过去 2 天上网，发现自己的灵魂将价值从客户端传递到服务器。下面我已经粘贴了解决方案......

```
<script type="text/javascript">

var data2Send = '{"fbid":"222222", "fbemail":"aaa@dsf.com", "fbsex":"Male", "fbdob":"22/03/1989"}';
$.ajax({
    type: "POST",
    url: 'passvaluw.aspx/Testmethod',
    data: data2Send,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (arg) {console.log(arg) //call successfull
    $("#lbltxt").text(arg.d);},
    error: function (xhr) {
        //error occurred
    }
});

</script>

 [System.Web.Services.WebMethod]
    public static string TestMethod(string fbid, string fbemail, string fbsex, string fbdob)
    {

return fbemail;

} 
```

# hash - 如果我们使用重复的哈希键插入 dynamo DB 会发生什么？

> ID：12457130
> 
> 赞同：38
> 
> 时间：2012-09-17T10:11:20.373
> 
> 标签：hash, key, amazon-dynamodb

我正在尝试插入发电机数据库。当我调用 putItem 函数时，如果数据库中已经存在哈希键会发生什么？PutItemResult 对象是否包含可以告诉我们是否尝试了重复的哈希条目的内容？我想避免运行另一个查询来检查是否有一个带有我正在使用的哈希键的条目。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-17T13:50:02.793

如果您在现有主键上插入一个项目，它将被覆盖，除非您使用“预期值”。下面是官方文档的介绍：

[http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_PutItem.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_PutItem.html)

> 创建新项目，或用新项目替换旧项目（包括所有属性）。如果指定表中已存在具有相同主键的项，则新项将完全替换现有项。您可以执行条件放置（如果具有指定主键的项不存在，则插入新项），或者如果现有项具有某些属性值，则替换现有项。
> 
> **笔记**
> 
> 要确保新项目**不会替换现有项目，请使用条件 put**操作，并将 Exists 设置为 false 的主键属性或属性。

否则，您还可以使用`UpdateItem`更新预先存在的项目的字段：http: [//docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_UpdateItem.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_UpdateItem.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-06T19:44:18.717

您可以使用“withReturnValues(ReturnValue.ALL_OLD)”，它将从 PutItemResult.getAttributes 返回插入之前存在的值的 Map。

如果 PutItemResult.getAttributes 返回 null，则它是一个新条目。

# android-emulator - 如何在设置中为安卓系统添加语言？

> ID：12457144
> 
> 赞同：2
> 
> 时间：2012-09-17T10:11:58.957
> 
> 标签：android-emulator

我使用 Galaxy Tap7.7 Jelly Bean 4.1.1，我已经将 res\values-km-rkh 中的 framework-res.apk 和 Settings.apk 翻译成高棉语（柬埔寨语），但在设置中它只显示字母“khmer”在语言列表中，我希望它显示“ភាសាខ្មែរ”而不是“khmer”，就像这张图片[高棉语](http://dl.xda-developers.com/attachdl/923c5a07824ef0ac3de70b2b19e56749/5056f000/1/3/2/5/0/2/6/khmer.JPG)。我应该怎么做？

谢谢

# batch-file - 将批处理文件中的多行注释报告给 TeamCity

> ID：12457145
> 
> 赞同：1
> 
> 时间：2012-09-17T10:12:16.957
> 
> 标签：batch-file, teamcity

我有一个批处理文件，它接收包含我想报告给 TeamCity 的多行注释（堆栈跟踪）的输入参数。下面的代码适用于单行注释并从消息中删除括号和引号。问题是只报告多行消息的第一行。

```
rem Try to remove line breaks (not working)
setlocal EnableDelayedExpansion
SET message=%~1
set ^"message=!message:^

= !"

rem Remove square brackets and quotes
SET message=%message:[=%
SET message=%message:]=%
SET message=%message:'=%

rem Print message to console for TeamCity
echo ##teamcity[progressMessage '%message%'] 
```

有没有办法删除所有换行符并在 echo 语句之前用空格替换它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:32:50.550

您可能不走运：虽然可以创建多行变量，但似乎不可能通过批处理文件中的参数接收它们。

如果是批处理调用，您可以将多行值存储在环境变量中并传递变量的名称。

如果您以任何方式控制调用应用程序，您可以考虑替换那里的新闻行，或者可能更好，让它调用批处理文件以外的其他东西。

另请参阅[此 SO 答案](https://stackoverflow.com/a/9866860/63733)和答案中包含的[链接](http://www.dostips.com/forum/viewtopic.php?t=1768)，该链接更详细地讨论了接收多行参数的问题。

顺便说一句，您替换换行符的代码工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:24:59.713

我想没有通用的解决方案。
但它可能为您提供解决方案！

这取决于调用批处理的方式，如果通过新的 cmd 实例调用它，则可以使用 !cmdcmdline! 即使使用换行符和回车符也可以访问完整的参数。

```
@echo off
setlocal EnableDelayedExpansion
set "message=!cmdcmdline!"
for /f %%a in ('copy /Z "%~dpf0" nul') do set "CR=%%a"
set LF=^

REM ** Two empty lines are required
FOR %%L in ("!LF!") do set "message=!message:%%~L=\n!"
FOR %%C in ("!CR!") do set "message=!message:%%~C=\r!"
echo ##teamcity[progressMessage '!message!'] 
```

您可以使用 invoke.bat 对其进行测试

```
@echo off
setlocal EnableDelayedExpansion
set LF=^

for /f %%a in ('copy /Z "%~dpf0" nul') do set "CR=%%a"
cmd /c test one!lf!two!CR!three 
```

# java - 用于 Java 日志记录的 Google 库？

> ID：12457146
> 
> 赞同：3
> 
> 时间：2012-09-17T10:12:20.283
> 
> 标签：java, logging, log4j, guava, apache-commons-logging

是否有来自 Google 的 Java 日志库？

我一直在使用[Google Guava](http://code.google.com/p/guava-libraries/ "Guava：用于 Java 的 Google 核心库")库，发现它比 Apache Commons 更适用于参数验证（即检查先决条件、不变的对象状态、方便地将正确的`Exception`类型放在`null`、empty `String`、内联`null`检查赋值、`Exception`消息格式和可空的特殊类型类型）。我没有看过图书馆的其他功能，但这足以让我切换。

现在很自然的问题：

我正在使用[Apache Commons Logging](http://commons.apache.org/logging/ "Apache Commond 日志记录")进行日志记录，就像我为参数验证所做的那样。我可以切换到谷歌框架的类似“ [this go to *11 ”，并带来复合收益吗？*](http://www.youtube.com/watch?v=ll7rWiY5obI)我不介意 Log4j 或 Commons，但 Guava 在我研究的方面比 Commons 好得多......

我看到 Android 有它的日志框架，我喜欢它，Google 是否也为基本 Java 提供了一个？

* * *

编辑：重新阅读我的问题，我意识到它可能以某种方式暗示对谷歌代码的教条偏好，这是我没有的，并且潜在的假设是谷歌产生的任何东西都将是“完美的”。我根本不持有这些“积极的先入之见”，我的意思是，但未能以书面形式传达的是，为两层采用单一提供者可能会有一些*协同作用。*可能有一些东西可以智能记录，例如 Guava Optional 对象或关联对象，从而节省构建特定 String.format() 的时间。我一直在寻找一个谷歌图书馆来利用这些潜在的协同作用，而不是*先验*偏爱。事实上，在决定切换之前，我确实首先将 Guava 与我以前基于 Commons 的参数检查方式进行了比较。考虑到所有因素，我非常感谢 Google 免费发布的代码，我认为我从中学到了很多，并将继续这样做，因为它的质量非常高。不过，我从未允许这成为一种邪教。

* * *

参考：

*   [Apache Commons 日志记录](http://commons.apache.org/logging/ "Apache Commond 日志记录")
*   [谷歌番石榴](http://code.google.com/p/guava-libraries/ "Guava：用于 Java 的 Google 核心库")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T02:56:04.093

最好避免使用 Commons Logging。请参阅[http://articles.qos.ch/thinkAgain.html](http://articles.qos.ch/thinkAgain.html)进行全面分析。是的，它很老了（是的，作者有既得利益），但这一切都适用。链接[的“Commons Logging 是我的错”](http://radio-weblogs.com/0122027/2003/08/15.html)说明了——对这个库真的没有太多的爱——在任何地方。

显然，Google 的首选解决方案是 java.util.logging。如果您在 Google App Engine 上进行 Java 编程，您将看到这一点。

最好的标准是 slf4j over logback。我认为没有理由避免它。您很可能已经在使用 slf4j - 如果不是直接通过类路径上的其他库间接使用 - 它是事实上的现代标准。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T10:13:59.600

从来没听说过。我推荐使用[slf4j](http://www.slf4j.org/)。

# c# - .cs 文件存储在虚拟操作系统中的什么位置？

> ID：12457148
> 
> 赞同：1
> 
> 时间：2012-09-17T10:12:27.833
> 
> 标签：c#, asp.net, azure

我想直接在**Azure平台的虚拟操作系统中修改我的****asp.net**项目的源代码，但是我找不到**C#**文件。

 ****任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:15:10.690

当您发布到 Azure 时，cs 代码隐藏被编译到 bin\appname.dll 中，您无法“实时”编辑它们。如果实例回收，任何编辑都将被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:22:19.500

代码在部署之前全部编译。它需要这样做的原因有很多，其中最重要的是要确保运行代码所需的一切都包含在其中。

此外 - 如果您的实例被回收，您对虚拟机实例所做的任何更改都将丢失。

部署需要很长时间（比如编译完所有内容后需要 20-30 分钟左右），但这是保证所有实例都运行正确版本的代码的唯一方法，因为每次部署的 VM 都会按原样运行实例开始或循环。****

# c# - 使用 C# 操作 SVG 文件

> ID：12457154
> 
> 赞同：1
> 
> 时间：2012-09-17T10:12:49.720
> 
> 标签：c#, xml, svg

我需要能够编辑已在 Adob​​e Illustrator 中呈现的 SVG 文件的文本和图像。

如何遍历 SVG 文件的元素、检查 type = text、更改值并将文件保存到磁盘？有没有可以帮助我的图书馆？

到目前为止，我已经尝试过[这个基本库](http://www.codeproject.com/Articles/8207/SVGPad-Application-and-class-library-for-editing-S)，但它不适用于复杂的 SVG 结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:15:45.883

[SVG 渲染引擎](http://svg.codeplex.com/)

我在一个项目中使用了这个。有一些缺陷，但它完成了工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T13:02:36.910

这可能很晚才能回答，但如果他们登陆此页面，为了其他人的利益，您可以使用[HTMLAgilityPack](http://www.codeplex.com/htmlagilitypack)。这是一个类似问题的链接：[在 C# 中解析 html 的最佳方法是什么？](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)

我在需要编辑 svg 字符串并替换一些像这样的值的情况下使用了它：

```
 HtmlDocument theDocument = new HtmlDocument();
    theDocument.LoadHtml(svgChartImg1);

    HtmlNodeCollection theNodes = theDocument.DocumentNode.SelectNodes("//tspan"); 
```

这里，`svgChartImg1`是一个 svg xml 字符串。

# c++ - NDK：尚未声明

> ID：12457155
> 
> 赞同：3
> 
> 时间：2012-09-17T10:12:52.300
> 
> 标签：c++, android-ndk, java-native-interface

我正在使用 Android 本机库 NDK 编译 C++ 代码，但是在尝试将[g729a.h](http://pastie.org/4737332)文件包含在[g729_jni.cpp](http://code.google.com/p/sipdroid/issues/attachmentText?id=49&aid=7963991223373796529&name=g729_jni.cpp&token=srtLdoyAVixO0dz0ue5i3s-VlZ0:1347876617974)中时出现以下错误：

**错误：**

```
Compile++ arm    : g729_jni <= g729_jni.cpp
/usr/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++ -MMD -MP -MF ./obj/local/armeabi/objs/g729_jni/g729_jni.o.d -fpic -ffunction-sections -funwind-tables -fstack-protector -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__  -Wno-psabi -march=armv5te -mtune=xscale -msoft-float -fno-exceptions -fno-rtti -O2 -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=300 -I/usr/src/android-ndk-r8/sources/cxx-stl/system/include -Ijni -DANDROID -O3 -Wa,--noexecstack   -O2 -DNDEBUG -g   -I/usr/src/android-ndk-r8/platforms/android-3/arch-arm/usr/include -c  jni/g729_jni.cpp -o ./obj/local/armeabi/objs/g729_jni/g729_jni.o 

In file included from jni/g729_jni.cpp:34:
jni/g729/g729a.h:70: error: 'UWord8' has not been declared
jni/g729/g729a.h:126: error: 'UWord8' has not been declared
jni/g729_jni.cpp: In function 'jint Java_org_sipdroid_codecs_G729_open(JNIEnv*, _jobject*)':
jni/g729_jni.cpp:72: error: 'UWord8' was not declared in this scope
jni/g729_jni.cpp: In function 'jint Java_org_sipdroid_codecs_G729_encode(JNIEnv*, _jobject*, _jshortArray*, jint, _jbyteArray*, jint)':
jni/g729_jni.cpp:111: error: 'UWord8' was not declared in this scope
jni/g729_jni.cpp:111: error: expected ';' before 'serial'
jni/g729_jni.cpp:125: error: 'serial' was not declared in this scope
jni/g729_jni.cpp: In function 'jint Java_org_sipdroid_codecs_G729_decode(JNIEnv*, _jobject*, _jbyteArray*, _jshortArray*, jint)':
jni/g729_jni.cpp:156: error: cannot convert 'unsigned char*' to 'int*' for argument '2' to 'void g729a_dec_process(void*, int*, Word16*, Flag)'
make: *** [obj/local/armeabi/objs/g729_jni/g729_jni.o] Error 1 
```

我用谷歌搜索试图找出这个错误背后的原因。由于C++是区分大小写的，如果大小写有误，就会出现这种错误。但我没有犯这种错误。

如果您有任何想法或建议，请指导我完成。

谢谢

**更新：**

```
[root@localhost sipdroid-read-only]# /usr/src/android-ndk-r8/ndk-build V=1 APP_ABI=armeabi APP_PROJECT_PATH=. obj/local/armeabi/objs/g729_jni/g729_jni.o
make: `obj/local/armeabi/objs/g729_jni/g729_jni.o' is up to date. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:37:08.320

确保您的 typedef.h 类似于[http://siphon.googlecode.com/svn/trunk/g729a/Headers/typedef.h](http://siphon.googlecode.com/svn/trunk/g729a/Headers/typedef.h)

以下是我为重现您的问题而采取的步骤：

```
svn checkout http://sipdroid.googlecode.com/svn/trunk/ sipdroid
cd sipdroid
sed "s/^SILK/include $(CLEAR_VARS)\\nSILK/" -i jni/Android.mk 
```

（请注意，Android.mk 在第 89 行之后需要修复）。

```
svn checkout http://siphon.googlecode.com/svn/trunk/ ../siphon
cp -d ../siphon/g729a/Headers/ jni/g729
wget http://pastie.org/pastes/4737332/download -O jni/g729/g729a.h
wget "http://sipdroid.googlecode.com/issues/attachment?aid=7963991223373796529&name=g729_jni.cpp&token=KHEZCoq6ZYSuV_VhsV8fC3uwsSs%3A1348058591979" -O jni/g729_jni.cpp
sed -e "s/g722_jni/g729_jni/" -i jni/Android.mk
ndk-build.cmd V=1 APP_ABI=armeabi APP_PROJECT_PATH=. obj/local/armeabi/objs/g729_jni/g729_jni.o 
```

...并且您的文件在编译时带有一个小警告。你做了什么不同的事情？

# c# - Lambda 表达式 NotContains 运算符是否存在？

> ID：12457161
> 
> 赞同：11
> 
> 时间：2012-09-17T10:13:26.340
> 
> 标签：c#, lambda

`Contains`我可以使用此代码生成运算符的 Lambda 表达式。

**表达**

```
Company => Company.Name.Contains("test1") 
```

**源代码**

```
var method = typeof(string).GetMethod("Contains", new[] { typeof(string) }); 
var startsWithDishExpr = Expression.Call(argLeft, method, argRight); 
```

它对`Contains`操作员来说工作正常。如何修改代码以供`NotContains`操作员使用。

**源代码**

```
var method = typeof(string).GetMethod("NotContains", new[] { typeof(string) }); 
var startsWithDishExpr = Expression.Call(argLeft, method, argRight); 
```

`NotContains`操作员不工作。有人有建议吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-17T10:22:51.593

没有`string.NotContains`方法，因此创建对被调用方法的调用`NotContains`不起作用。

一个简单的解决方案是将`not`运算符与`Contains`方法结合起来。就像通常你会写`!x.Contains(y)`而不是`x.NotContains(y)`.

要创建这样的表达式，您可以使用[`Expression.Not(callExpression)`](http://msdn.microsoft.com/en-us/library/bb299047.aspx).

# mysql - activemdb 基类不能被继承？

> ID：12457163
> 
> 赞同：2
> 
> 时间：2012-09-17T10:13:39.547
> 
> 标签：mysql, ruby-on-rails, ms-access

我正在尝试通过 activemdb gem 访问 Rails 中的 mdb 文件。我遇到的问题是，当我尝试访问或使用此 gem 时，它会出现以下错误

```
NameError: uninitialized constant ActiveMDB
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:469:in `load_missing_constant'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'
from /home/confiz/Project/redmine/LMS/redmine-1.4/app/models/beacon.rb:2
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:406:in `load_without_new_constant_marking'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:406:in `load_file'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:405:in `load_file'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:285:in `require_or_load_without_engine_additions'
from /home/confiz/Project/redmine/LMS/redmine-1.4/vendor/plugins/engines/lib/engines/rails_extensions/dependencies.rb:132:in `require_or_load'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:451:in `load_missing_constant'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing'
from /home/confiz/.rvm/gems/ruby-1.8.7-p358@lms/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'
from (irb):1 
```

这是我的宝石清单

```
*** LOCAL GEMS ***

actionmailer (2.3.14)
actionpack (2.3.14)
activemdb (0.2.2)
activerecord (2.3.14)
activeresource (2.3.14)
activesupport (2.3.14)
bundler (1.1.3)
coderay (1.0.7)
edavis10-object_daddy (0.4.3)
fastercsv (1.5.5)
hoe (3.0.8)
i18n (0.4.2)
json (1.7.5)
metaclass (0.0.1)
mocha (0.12.3)
mysql (2.8.1)
net-ldap (0.3.1)
rack (1.1.3)
rails (2.3.14)
rake (0.9.2.2)
rdoc (3.12)
rmagick (2.13.1)
ruby-openid (2.1.8)
rubygems-bundler (0.2.8)
rvm (1.11.3.3)
shoulda (2.10.3)
sqlite3 (1.3.6)
tzinfo (0.3.33) 
```

在这里我访问activemdb的代码

```
class Beacon < ActiveMDB::Base
    set_mdb_file 'att2000.mdb'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:41:11.387

这是因为由于某种原因，当 gem 本身被称为“activemdb”时，gem 中的文件是“active_mdb.rb”。这可以防止 rails`require`自动运行它。

尝试将其添加到您的 Gemfile 中：

```
gem 'activemdb', :require => 'active_mdb' 
```

然后它应该工作。

# c++ - 无法调试 C++ eclipse makefile 项目

> ID：12457168
> 
> 赞同：0
> 
> 时间：2012-09-17T10:14:01.390
> 
> 标签：c++, linux, eclipse

我使用有效的 Makefile 导入了一个现有的 C++ 项目。在项目属性中，我勾选了“使用默认构建”和“自动生成 Makefile”

但是我无法调试它。错误是 No source available for "main() " 。我以我能想象的所有可能方式在运行/调试对话框中设置源，并得到相同的错误。

我正在使用 Eclipse Cpp Juno Linux。请问有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:16:04.533

您是否尝试将`-g`标志添加到 makefile 中的构建命令？传输完所有文件后，还要刷新项目。

# cloudbees - 在 Cloudbees 上使用 Jenkins 作为服务

> ID：12457171
> 
> 赞同：1
> 
> 时间：2012-09-17T10:14:08.753
> 
> 标签：cloudbees

我是 Cloudbees 的新手，一直在尝试找出如何运行现有的基于 Jboss Portal Server 的应用程序，我们在 Cloudbees 基础架构中的本地托管 CI 中运行该应用程序。

我们的堆栈有以下组件

*   JDK 1.6 JBoss
*   门户服务器 (EPP 4.3)
*   Oracle 快捷版 (XE)

感谢社区提供的任何帮助，以确保我不会在没有适当研究的情况下放弃在 Cloudbees 平台上的云中运行 Jenkins 的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:08:54.203

您必须设置您的构建作业以安装并启动足够的运行时

JDK 6 可作为 CloudBees 运行时的一部分使用，然后您可以使用 /private 存储库将 EPP 4.3 存储为 zip 并在预构建步骤中扩展至 /tmp

同样的原则也适用于您的数据库，但我不确定您是否可以在没有用户交互且无需 root 的情况下安装 Oracle XE。我记得几年前我自己在 ubuntu 上做过这件事，并不像解压缩二进制发行版那么简单。

您的代码是否与此数据库相关联？或者您是否正在使用一些数据库抽象层，您可以使用它来测试使用另一个数据库运行时（mysql/postgres）？

# yahoo-pipes - 雅虎管道阻止发布旧的 RSS 提要

> ID：12457173
> 
> 赞同：0
> 
> 时间：2012-09-17T10:14:13.073
> 
> 标签：yahoo-pipes

我有一个雅虎管道，我是否正试图阻止旧的 RSS 提要被发布。我已经使用过滤器进行了尝试，如果查看预览，它似乎可以按预期工作。但是，如果我订阅了订阅源，我仍然会收到旧的新闻订阅源。

这是过滤器的屏幕截图

![](../Images/46a3a8fabd382bce96e810df38ce8e64.png)

有人知道为什么会这样吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:41:47.783

我不完全确定这是否是原因，但我认为它可能必须是日期生成器，插入日期格式化程序，然后输入过滤器。看起来日期连接不正确......因为当我这样连接时，它通常会显示类似“文本[有线]”的内容。尝试使用日期格式化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:40:51.780

你是如何格式化日期的？您的格式是否与您使用的提要的日期格式相同？

有关格式化日期的更多信息：[http ://pipes.yahoo.com/pipes/docs?doc=date#DateFormatter](http://pipes.yahoo.com/pipes/docs?doc=date#DateFormatter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:23:30.920

我现在已经开始工作了。在摸索了一段时间的管道后，我最终只是从头开始创建它。这次它出于某种奇怪的原因而起作用。

在我看来，雅虎管道有时只是不更新​​管道，即使我保存它也是如此。

# python - 本地主机隧道在 Python 代码中不起作用

> ID：12457174
> 
> 赞同：-1
> 
> 时间：2012-09-17T10:14:16.057
> 
> 标签：python

我正在使用 pagekite.net 隧道 localhost 来运行我的 Django 应用程序

现在我的隧道 url 类似于“myapp.pagekite.me”。

现在，当我简单地在浏览器中运行它时，它就可以工作了。但是当我简单地在 python 代码中执行 GET 请求时它不起作用。

```
import requests
requests.get("http://myapp.pagekite.me")
>>>401 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:29:31.280

假设`401`您的示例中的 是指 HTTP 响应代码：

`401`是`Unauthorized`

*   如果您发送了凭据，它们要么不正确，要么权限不足。
*   如果您没有发送凭据，则需要进行身份验证。查看`WWW-Authenticate`响应中的标题。

# jquery - 带有多个字段的jquery键盘

> ID：12457175
> 
> 赞同：0
> 
> 时间：2012-09-17T10:14:26.210
> 
> 标签：jquery

我正在寻找一种简单的方法，当我专注于输入字段并允许我使用 jquery 键盘时，问题是当我首先输入另一个字段时，它会从所有输入中获取所有值。

```
$('.controls input').focus(function(evt){
    /*
        jQuery Keyboard
        =============================================================
    */
    var $write = $(this),
    shift = false,
    capslock = false;

    $('#keyboard li').click(function(){
        var $this = $(this),
            character = $this.html(); // If it's a lowercase letter, nothing happens to this variable

        // Shift keys
        if ($this.hasClass('left-shift') || $this.hasClass('right-shift')) {
            $('.letter').toggleClass('uppercase');
            $('.symbol span').toggle();

            shift = (shift === true) ? false : true;
            capslock = false;
            return false;
        }

        // Caps lock
        if ($this.hasClass('capslock')) {
            $('.letter').toggleClass('uppercase');
            capslock = true;
            return false;
        }

        // Delete
        if ($this.hasClass('delete')) {
            var html = $write.html();

            $write.html(html.substr(0, html.length - 1));
            return false;
        }

        // Special characters
        if ($this.hasClass('symbol')) character = $('span:visible', $this).html();
        if ($this.hasClass('space')) character = ' ';
        if ($this.hasClass('tab')) character = "\t";
        if ($this.hasClass('return')) character = "\n";

        // Uppercase letter
        if ($this.hasClass('uppercase')) character = character.toUpperCase();

        // Remove shift once a key is clicked.
        if (shift === true) {
            $('.symbol span').toggle();
            if (capslock === false) $('.letter').toggleClass('uppercase');

            shift = false;
        }

        // Add the character
        $write.val($write.val() + character);
    });
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:17:55.190

你看过 jQuery 的 .keypress()、.keyup() 和 .keydown() 方法吗？

[http://api.jquery.com/category/events/](http://api.jquery.com/category/events/)

# asp.net - JSON 中没有键值

> ID：12457181
> 
> 赞同：0
> 
> 时间：2012-09-17T10:14:58.117
> 
> 标签：asp.net, vb.net, json, web-services

**我正在使用以下代码片段进行`JSON`请求。**

```
 <WebMethod(Description:="Gets the Categories")> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function GetCategories() As String
        Using ds As DataSet = db.ExecuteDataSet(CommandType.Text, "SELECT NodeID,NodeName FROM Nodes WHERE ParentID='1'")
            ' Create a multidimensional jagged array
            Dim JaggedArray As String()() = New String(ds.Tables(0).Rows.Count - 1)() {}
            Dim i As Integer = 0
            For Each rs As DataRow In ds.Tables(0).Rows
                JaggedArray(i) = New String() {rs("NodeName").ToString(), rs("NodeID").ToString()}
                i = i + 1
            Next

            ' Return JSON data
            Dim js As New JavaScriptSerializer()
            Dim strJSON As String = js.Serialize(JaggedArray)
            Return strJSON
        End Using
    End Function 
```

**我得到的回应：**

```
<string xmlns="http://localhost:54511/">
[["Books","BK01"],["Computers","CO01"],["Gaming","GA01"],["Mobile & Accessories","MO01"]]
</string> 
```

**为什么我没有得到`key`？？**

例如：

```
<string xmlns="http://localhost:54511/">
[{"nodename":"Books","nodeid":"BK01"},{"nodename":"Computers","nodeid":"CO01"},{"nodename":"Gaming","nodeid":"GA01"},{"nodename":"Mobile & Accessories","nodeid":"MO01"}]
</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:21:17.133

那是因为您正在序列化一个数组而不是一个对象，对 vb.net 不是很熟悉，但我相信您正在寻找的是 a`Dictionary( Of String, String)`并将值添加到它`dictionary.add('nodename', rs("NodeName").ToString()`...等等

# postgresql - COPY FROM 可以容忍使用错误的 CSV 吗？

> ID：12457190
> 
> 赞同：2
> 
> 时间：2012-09-17T10:15:29.223
> 
> 标签：postgresql, etl, postgresql-9.1

我正在尝试通过将文本数据加载到 postgresql 数据库中`COPY FROM`。数据绝对不是干净的**CSV**。

输入数据并不总是一致的：有时会有多余的字段（分隔符是字段内容的一部分），或者整数字段中有空值而不是 0。

结果是 PostgreSQL 抛出错误并停止加载。

目前我正在尝试通过 perl 将数据按摩成一致性。

有更好的策略吗？

可以要求 PostgreSQL在这方面像**mysql**或**sqlite一样宽容吗？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:20:38.240

PostgreSQL 的`COPY FROM`设计不是为了处理庞大的数据，而且非常严格。对不可靠数据的容忍度几乎没有支持。

在我看到几天前发布的[这个提议的补丁](http://archives.postgresql.org/message-id/002101cd9190%24081c4140%241854c3c0%24@lab.ntt.co.jp)可能包含在 PostgreSQL 9.3 中之前，我认为添加任何内容几乎没有兴趣。该补丁已被强烈拒绝，但表明人们对这个想法很感兴趣；阅读线程。

有时可以进入一个包含所有字段且没有约束`COPY FROM`的临时`TEMPORARY`表。`text`然后，您可以从那里使用 SQL 处理数据。不过，这只有在 SQL 至少格式正确且规则的情况下才有效，而且听起来不像你的那样。

如果数据不干净，您需要使用合适脚本语言的脚本对其进行预处理。

有那个脚本：

*   连接到 PostgreSQL 和`INSERT`行；
*   连接到 PostgreSQL 并使用脚本语言的 Pg API 来插入`COPY`行；或者
*   写出干净的 CSV，你可以`COPY FROM`

Python 的`csv`模块可以很方便地做到这一点。您可以使用任何您喜欢的语言；perl、python、php、Java、C 等等。

如果你有热情，你可以把它写进`PL/Perlu`或`PL/Pythonu`，在你读的时候插入数据并清理它。我不会打扰。

# facebook - 如何创建 facebook auth 对话框预览用户

> ID：12457199
> 
> 赞同：1
> 
> 时间：2012-09-17T10:16:07.753
> 
> 标签：facebook, facebook-opengraph, facebook-test-users

我正在使用开放图发布对用户提要的操作。我的测试适用于管理员用户，现在我想在提交任何批准之前在“验证对话框预览用户”的时间轴上对其进行测试。但是我在任何地方都看不到这个用户。所以我尝试使用以下方法创建他： [https://graph.facebook.com/APP_ID/accounts/test-users?installed=true&name=Auth+Dialog+Preview+User&locale=en_US&permissions=APP_PERMISSIONS&method=post&access_token=APP_ACCESS_TOKEN](https://graph.facebook.com/APP_ID/accounts/test-users?installed=true&name=Auth+Dialog+Preview+User&locale=en_US&permissions=APP_PERMISSIONS&method=post&access_token=APP_ACCESS_TOKEN)。它已成功创建，但是当我尝试在它的时间轴上发布操作时，我收到错误消息：“具有 ID 的应用程序没有被授予使用属性消息的能力”。所以我知道我创建的用户不被识别为测试用户。有什么办法可以得到一个有效的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:27:55.517

如果操作已创建但用户不存在，请单击本节所述的“获取代码”

> 您应该做的第一件事是创建一个 Open Graph Action，方法是单击 Open Graph 链接，如上图所示
> 
> [https://developers.facebook.com/apps/YOURAPPID/opengraph](https://developers.facebook.com/apps/YOURAPPID/opengraph)设置您的命名空间，因为我们需要它来定义您的开放图元数据，如协议中所述 - [http://ogp.me](http://ogp.me)
> 
> 接下来，返回 Open Graph 链接并创建一个操作
> 
> *   计划旅行
> *   遛狗
> *   喝电脑
> 
> 老实说，现在实际行动并不重要。我要做的就是将您引导至 Auth Preview User，接下来的步骤将由您决定。
> 
> 设置完成后，转到 Open Graph Dashboard。
> 
> ![打开图形仪表板](../Images/16d418882683806d65007a3d19357026.png)
> 
> 选择“获取代码”，这应该会返回一个 cURL 命令供您执行
> 
> ```
> curl -F 'access_token=xxx' \
>      -F 'computer=http://samples.ogp.me/465737726804711' \
>         'https://graph.facebook.com/me/@_@:drink' 
> ```
> 
> 您无需执行 cURL 命令，只需转到您的角色，该 Auth Dialog Preview 用户应该用他的白色头像看着您。
> 
> > 帮助！我已经删除了身份验证对话框预览用户，我无法让他回来:(提前谢谢。这很紧急
> 
> 那么通过 Roles 将他添加回来是行不通的，那你打算怎么办？
> 
> 在 Open Graph 操作上再次单击 Get Code，这应该会再次返回 Auth Dialog Preview User。

如果这不起作用，请执行如上所示的 cURL 命令，看看它是如何工作的。

[资料来源： http: [//philippeharewood.com/facebook/summoning-the-auth-dialog-preview-user/](http://philippeharewood.com/facebook/summoning-the-auth-dialog-preview-user/)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:53:55.733

您是否尝试过通过应用程序仪表板来做到这一点？`https://developers.facebook.com/apps/<APP_ID>/roles`底部有“测试用户”和“添加”链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:53:01.663

> 现在我想在提交任何批准之前在“验证对话框预览用户”的时间线上对其进行测试。但是我在任何地方都看不到这个用户。

如果您已经为您的应用设置了 Open Graph 操作，您应该在应用设置的*角色选项卡上找到 Auth 对话框预览用户。*

它是自动创建的，您不要自己这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:20:20.340

您将从[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/) [https://developers.facebook.com/docs/opengraph/authentication/获得有关 1.Authentication 2.Auth 对话框的更多详细信息](https://developers.facebook.com/docs/opengraph/authentication/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T08:59:56.357

最后，我创建了测试用户“Auth Dialog Preview User”。我在仪表板上的测试用户中没有此用户，因此我提交了具有此状态的批准。当然，我的请求被拒绝了，但幸运的是，同时创建了用户。我只是在其时间表上进行测试并重新提交批准。现在一切正常。感谢你所做的一切

# c# - Azure 网站中的诊断监视器

> ID：12457204
> 
> 赞同：5
> 
> 时间：2012-09-17T10:16:26.337
> 
> 标签：c#, azure, azure-web-app-service, azure-diagnostics

可以在 Azure 网站（不是 Web 角色）中使用 Azure DiagnosticMonitor 吗？还是需要计算角色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:27:02.220

不，

Azure DiagnosticsMonitor 仅适用于 Web/Worker 角色。Azure 网站中的诊断对于任何 Web 应用程序都很常见。由于 Azure 网站使用持久存储，因此您可以安全地编写日志文件（请记住，您正在使用多线程环境，例如在任何 ASP.NET/或任何 Web 应用程序中）。此外，您可以在网站的“配置”选项卡中配置其他诊断选项：

![Azure 网站诊断](../Images/ecf3f16fab47d93e299f9eb350d5db30.png)

您可以打开详细的错误消息 + 失败的请求跟踪。您可以从站点的 FTP 服务器下载失败的请求日志。

您可以使用[log4net](http://logging.apache.org/log4net/)在您的 Web 应用程序（如果它是 ASP.NET）中进行详细的错误/跟踪日志记录。[这里有一些教程](http://www.codeproject.com/Articles/37107/Log4Net-with-ASP-NET-3-5-File-Appender)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T10:23:01.157

不可以，不能在 Azure 网站中使用 Windows Azure 诊断 (DiagnosticsMonitor)。您需要为此使用计算角色。

# c# - 非直接相关类的调用方法

> ID：12457205
> 
> 赞同：4
> 
> 时间：2012-09-17T10:16:28.660
> 
> 标签：c#, inheritance

是否可以调用基础方法的基础？IE不是派生类的“直接”祖先？

```
public class a
{
    public virtual void test() { }
}

public class b : a
{
    public override void test()
    {
        //...
        base.test();
    }
}

public class c : b
{
    public override void test()
    {
        //...
        //possible to call test() in  class a, without calling it in class b? 
        //((a)base).test(); //doesnt work

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:18:02.297

不，这是不可能的，而且违反了 OOP 原则。如果您需要这样做，您可能设计错误的系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:18:26.880

不使用 C#。C# 只允许您调用直接基类上的方法。

另一方面，CLR 允许它。您可以通过反射或直接编写 IL 来实现。我假设 C++/CLI 也支持这一点。

但我会重新考虑设计。跳过覆盖会散发出糟糕设计的味道，并会破坏基类的封装。

# eclipse - Eclipse Helios中弹出菜单项的键绑定？

> ID：12457206
> 
> 赞同：1
> 
> 时间：2012-09-17T10:16:44.403
> 
> 标签：eclipse, eclipse-plugin, keyboard-shortcuts

在我们工作的项目中，他们为 eclipse helios 编写了一个插件。他们使用 objectContribution 添加弹出窗口并为它们编写了相应的操作类。我正在尝试为项目资源管理器中的弹出菜单项之一添加快捷键。但我在这里读到[http://www.eclipse.org/forums/index.php/mv/tree/172398/#page_top](http://www.eclipse.org/forums/index.php/mv/tree/172398/#page_top)没有办法从 objectContribution 调用键绑定，需要将其迁移到处理程序/命令。

有没有其他方法可以将键绑定到弹出窗口而不是将它们迁移到处理程序？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:38:56.140

不，objectContributions 不能接受键绑定。从遗留动作扩展点，只有动​​作集正确接受键绑定。

另一个可用的选项（如前所述）是为您想要的命令提供处理程序。处理程序不会干扰 objectContribution 行为（仍将直接从菜单项调用 objectContribution 操作委托类，使用键绑定时将调用处理程序）。

私服

# android - 以编程方式确定android中视图（按钮）的坐标？

> ID：12457212
> 
> 赞同：0
> 
> 时间：2012-09-17T10:17:11.810
> 
> 标签：android

如何以编程方式确定android中视图的坐标（位置）？我在我的 xml 文件中放置了一个按钮。如何在 java 代码中确定该按钮的坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:28:13.570

[这是解决方案](http://android-er.blogspot.in/2012/07/error-of-getlocationinwindow-and.html)。请检查链接以找出视图的屏幕位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:20:13.760

获取 java 代码中的视图引用。

```
 Integer [] location = new Integer[];
   view.getLocationOnScreen(location); 
```

现在整数数组包含屏幕上视图的坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:23:43.590

尝试查看 getLocationInWindow 和 getLocationOnScreen 方法。

http://developer.android.com/reference/android/view/View.html#getLocationInWindow(int[])

# java - java regex 为什么这两个正则表达式不同

> ID：12457216
> 
> 赞同：0
> 
> 时间：2012-09-17T10:17:19.453
> 
> 标签：java, regex

我有一个演示 div 元素的 java 字符串：

```
String source = "<div class = \"ads\">\n" +
                "\t<dl style = \"font-size:14px; color:blue;\">\n" +
                "\t\t<li>\n" +
                "\t\t\t<a href = \"http://ggicci.blog.163.com\" target = \"_blank\">Ggicci's Blog</a>\n" +
                "\t\t</li>\n" +
                "\t</dl>\n" +
                "</div>\n"; 
```

html形式的内容是：

```
<div class = "ads">
    <dl style = "font-size:14px; color:blue;">
        <li>
            <a href = "http://ggicci.blog.163.com" target = "_blank">Ggicci's Blog</a>
        </li>
    </dl>
</div> 
```

我写了这样一个正则表达式来提取 dl 元素：

```
<dl[.\\s]*?>[.\\s]*?</div> 
```

但它什么也没找到，我将其修改为：

```
<dl(.|\\s)*?>(.|\\s)*?</div> 
```

然后它工作。所以我这样测试：

```
System.out.println(Pattern.matches("[.\\s]", "a")); --> false
System.out.println(Pattern.matches("[abc\\s]", "a")); --> true 
```

那为什么是'。不能匹配'a'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:19:01.350

在方括号内，字符按字面意思处理。`[.\\s]`意思是“匹配一个点、一个反斜杠或一个 s”。

* * *

`(.|\\s)`相当于`.`。

* * *

我认为您真的想要以下正则表达式：

```
<dl[^>]*>.*?</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:22:00.220

+1 以上。

我会做：

```
<dl[^>]*>(.*?)</dl> 
```

为了匹配内容`dl`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:22:35.683

语法`[.\\s]`没有意义，因为正如丹尼尔所说，`.`在这种情况下，just 的意思是“一个点”。

`[.\\s]`为什么你不能用更简单的替换你的`.`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:29:21.277

当您在帖子中包含正则表达式时，最好在您实际使用它们时发布它们——在这种情况下，作为 Java 字符串文字。

`"[.\\s]"`是表示正则表达式的 Java 字符串文字`[.\s]`；它匹配文字点或空白字符。正如其他人所说，您的正则表达式不会尝试匹配反斜杠或“s”，但关键因素是`.`它在字符类中失去了特殊含义。

`"(.|\\s)"`是表示正则表达式的 Java 字符串文字`(.|\s)`；它匹配（*除行分隔符*或*任何空白字符*之外的任何内容）。它可以按您的预期工作，但**不要使用它！**如[本答案](https://stackoverflow.com/a/2408599/20938)所述， 它使您极易受到[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)的影响。

但不用担心，您真正需要做的就是使用 DOTALL 模式（也称为单行模式），它可以`.`匹配*包括*行分隔符在内的任何内容。

```
(?s)<dl\b[^>]*>.*?</dl> 
```

# java - Tomcat错误运行war文件

> ID：12457217
> 
> 赞同：3
> 
> 时间：2012-09-17T10:17:22.357
> 
> 标签：java, tomcat, tomcat7

当我尝试运行 Web 应用程序 com tomcat 时出现此错误： FAIL - Encountered exception javax.management.RuntimeOperationsException: Exception invoking method check

我已将 war 文件放在 webapps 文件夹中，然后当我单击“开始”按钮时，出现错误“失败 - 上下文路径 /Black.ArtespPAP 的应用程序无法启动”。

所以我尝试在部署中手动部署应用程序（设置上下文、xml 文件和战争路径），我得到了上面的 javax 异常。

有人可以帮我吗？

catalina.out 日志：

```
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: /home/ubuntu/tomcat/conf/pap.properties (No such file or directory)
        at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:78)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1255)
        at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:714)
        at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:219)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.FileNotFoundException: /home/ubuntu/tomcat/conf/pap.properties (No such file or directory)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:138)
        at java.io.FileInputStream.<init>(FileInputStream.java:97)
        at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:90)
        at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:188)
        at org.springframework.core.io.UrlResource.getInputStream(UrlResource.java:124)
        at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:181)
        at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:161)
        at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:69)
        ... 36 more
Sep 17, 2012 10:14:53 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Sep 17, 2012 10:14:53 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/Black.ArtespPAP] startup failed due to previous errors 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:22:44.480

您检查过tomcat 日志（tomcat/logs/catalina.out 和/或您的应用程序日志）吗？堆栈跟踪在那里......你如何手动部署它？一般来说，对于tomcat，要部署应用程序，只需将.war 文件复制到tomcat/webapps 文件夹中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:33:02.803

从日志中可以清楚地看出该文件`/home/ubuntu/tomcat/conf/pap.properties`丢失。它看起来像 Spring 框架使用的配置文件（基于堆栈跟踪）。Afaik 它不是一个标准文件，而是一个特定于应用程序的文件，因此您必须深入研究您的应用程序代码或文档以找出它的用途以及它应该包含的内容。

# dataset - 通过强类型数据集将数据保存到底层数据库

> ID：12457220
> 
> 赞同：0
> 
> 时间：2012-09-17T10:17:30.243
> 
> 标签：dataset

我的问题可能很愚蠢，但我绝对是初学者，而且我有一个最紧迫的项目要做。

我创建了一个 WinForm 应用程序，它与包含多个表的数据库一起使用。其中一个表是包含以下列的用户表：

UserID - int, is identity = true| 增量 1\. 用户名 - nvarchar。密码 - nvarchar。

当我将数据库添加到我的项目中时，VS2010 自动为我创建了一个强类型数据集。

我创建了一个表单，其中有几个文本框。此表单有一个按钮，应该使用来自多个文本框的信息更新我的数据集，然后通过该`dataadapter.update()`方法更新基础数据库。

不幸的是，数据从未更新到底层数据库，我不明白为什么需要你的帮助。谢谢。

代码示例（按钮单击事件）：

```
LoginDataSetTableAdapters.LoginTableAdapter useraddadapter = new LoginDataSetTableAdapters.LoginTableAdapter();
LoginDataSet useraddset = new LoginDataSet();
LoginDataSet.LoginRow adduser = useraddset.Login.NewLoginRow();
adduser.UserName = textBoxUserName.Text;
adduser.Password = textBoxPassword.Text;
adduser.Email = textBoxEmail.Text;
adduser.Position = textBoxPosition.Text;
useraddset.Login.AddLoginRow(adduser);
useraddset.Tables[0].AcceptChanges();
useraddadapter.Update(useraddset.Login); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:26:14.343

调用 AcceptChanges 方法将提交 DataSet 或 DataTable 中的所有更改。如果在调用 Update 方法之前调用它，则在调用 Update 方法时不会提交任何更改，除非在调用 AcceptChanges 或 AcceptChanges 后进行了进一步的更改。

# facebook - 如何设置 Open Graph 操作以更改美国英语和英国英语之间的拼写？

> ID：12457222
> 
> 赞同：2
> 
> 时间：2012-09-17T10:17:47.523
> 
> 标签：facebook, action, facebook-opengraph

我正在创建一个具有在美国和英国具有不同拼写的开放图形操作（“收藏夹”）的应用程序。我想确保当用户将故事分享到他们的时间线时，会分享正确的拼写。Facebook 表示动作翻译是自动发生的，尽管它们都是英语，我不知道 Facebook 是否将它们视为不同的语言。

国际化文档没有为这个特定问题提供任何答案 - 是否有人对此有任何经验/知道是否会发生拼写更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:58:42.750

1.  使用美式拼写创建 Open Graph 操作
2.  在本地化页面添加语言*英语（英国） ：https://developers.facebook.com/apps/[APP-ID]/localize*
3.  将美国英语的短语“翻译”成英国英语：http://www.facebook.com/translations/admin/browse.php?app=[APP-ID]

# sql - 一个简单的sql查询？

> ID：12457223
> 
> 赞同：0
> 
> 时间：2012-09-17T10:17:49.883
> 
> 标签：sql, sql-server

我有一个名为属性的表：

```
id attributeid type
1         8      2
2         8      1
3         4      1 
```

那么如何选择同时具有 2 和 1 类型的属性 ID。在这种情况下，只有属性 8 是合格的。

```
select attributeid 
from attribute
where type in (1,2) 
```

这不会产生我想要的结果，因为它返回 4,8 这是错误的。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:22:01.097

你可以使用这样的东西：

```
select t1.attributeid
from yourtable t1
where type = 1 
  and exists (select type
              from yourtable t2
              where t1.attributeid = t2.attributeid
                and t2.type = 2) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8bfca/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:33:06.237

假设不能有相同`type`值的多行相同`attributeid`，我认为这样的事情是合适的：

```
select attributeid
from attribute
where type in (1,2)
group by attributeid
having COUNT(*) = 2 
```

这实际上是在询问查询（没有`GROUP BY`and `HAVING`）是否为相同的 生成了两行`attributeid`。如果您添加另一个类型值，这很容易扩展：

```
select attributeid
from attribute
where type in (1,2,6)
group by attributeid
having COUNT(*) = 3 
```

并且通常被称为关系划分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T08:38:45.807

将来您可能会有这样的一行：

```
id attributeid type
1         8      3
1         8      4 
```

那么你会再次改变你的查询以满足这个条件吗？？？像

`where type in(1,2,3,4)`

要使其成为通用查询，您可以尝试

```
select attributeid 
from attribute
where type in (select unique(type) from attribute)
group by attributeid 
having COUNT(*) = (select count(unique(type)) from attribute); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T10:21:54.197

如果您的表名为`attribute`，那么每个属性应该只出现一次。它不应该命名`attributetype`还是什么？

反正：

```
select 
  * 
from 
  Attribute t
where
  exists (
    select * from Attribute t1 
    where t1.AttributeId = t.AttributeId and t1.Type = 1) and
  exists (
    select * from Attribute t1 
    where t1.AttributeId = t.AttributeId and t1.Type = 2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T10:32:47.850

你可以试试

```
SELECT A.attributeid
FROM Table A
WHERE type = 1 
AND EXISTS (SELECT  type FROM Table B WHERE A.attributeid = B.attributeid AND B.type = 2) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-17T10:21:54.587

也许更像是：

从属性中选择attributeid where (type = 1) and (type = 2)

# android - Android淡入淡出动画问题

> ID：12457228
> 
> 赞同：0
> 
> 时间：2012-09-17T10:17:55.017
> 
> 标签：android, animation, splash-screen, fadeout, fadein

我正在尝试通过淡出启动画面和淡入主要活动来自定义两个活动之间的动画。

我尝试了两种解决方案，一种使用fade_in.xml 和fade_out.xml，其中控制alpha（0-1，1-0）并使用overridePendingTransaction（fade_in，fade_out）调用所有内容，另一种使用像ni api demo（api / app /动画/淡入淡出）；

主要问题是闪屏（第一个动画）在向右滑动时也失去了它的 alpha，并且第二个活动正在按需要出现。

如何将启动画面锁定到其原始位置并使其淡出？

褪色

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:fromAlpha="0.0" android:toAlpha="1.0"
       android:duration="@android:integer/config_longAnimTime" /> 
```

抓住

```
<?xml version="1.0" encoding="utf-8"?>

<translate xmlns:android="http://schemas.android.com/apk/res/android"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:fromXDelta="0" android:toXDelta="0"
       android:duration="@android:integer/config_longAnimTime" /> 
```

overridePendingTransition(R.anim.fade, R.anim.hold);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:23:25.743

您可以使用 .fadeOut() 的回调。

# php - 裁剪图像的可见部分

> ID：12457229
> 
> 赞同：0
> 
> 时间：2012-09-17T10:17:56.943
> 
> 标签：php, jquery, css

我有一个`overflow:hidden`包含图像的 div （`.draggable())`通常比 div 大，我只需要获取图像的可见部分并将其发送到服务器端脚本并另存为新文件。所以我的问题是，如何只得到那个可见部分？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:23:11.237

您有两个选择，具体取决于您在 div 中移动图像的方法，使用 javascript 将参数保存在输入中，并在提交时使用 POST 方法传递它们。

例如，您传递图像的 TOP 和 LEFT，并且您已经知道 div 的 WIDTH 和 HEIGHT，因此如果左侧是 -375px，您知道应该将图像从 375px 裁剪为（375px + div 的 WIDTH），同样适用最佳。

更好的选择是使用这个不错的 jQuery 插件：

[http://deepliquid.com/content/Jcrop.html](http://deepliquid.com/content/Jcrop.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:23:23.637

您应该查看图像的绝对顶部和左侧值，并将其与 div 的顶部和左侧进行比较，将差异与 div 宽度一起发送，并将所有这些数据发送到服务器端，您可以在服务器端通过其他方式裁剪图像程序/库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:25:52.807

解决方案是获取可拖动对象的 x,y 位置。您可以通过在您的 div 上使用 .top() 和 .left() 来获取该数据。然后，您应该将整个图像连同**顶部、左侧、宽度、高度**数据一起发送到您的服务器，并在服务器端对其进行裁剪。

请注意，我认为可以通过使用**Canvas** HTML5 元素和一些棘手的 javascript 将其裁剪到客户端。

# html - 如何在 ssrs 2008 的文本框中添加 html 标题标签（h1-h6）？

> ID：12457233
> 
> 赞同：0
> 
> 时间：2012-09-17T10:18:13.327
> 
> 标签：html, header, ssrs-2008

如何在 ssrs 2008 的文本框中添加 html 标题标签（h1-h6）。我是 ssrs 新手，我想在报告中使用标题标签

就像在 html 标题标签（h1-h6）中使用一样。我搜索了分配，但所有人都在说我不知道​​的占位符概念。此外，我只想显示“**文本标题**”，而不是 Dataset 值。

请帮助我。

提前致谢，

苏雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:28:54.237

这很容易。在文本框内右键单击并选择“创建占位符..”，接下来您必须选择 HTML 作为标记类型。您可以将任何 html 代码写入 value 字段。

# javascript - 用 Javascript 加密，用 PHP 解密，使用公钥加密

> ID：12457234
> 
> 赞同：40
> 
> 时间：2012-09-17T10:18:16.697
> 
> 标签：javascript, php, rsa, public-key, pgp

我想用 JavaScript 加密，用 PHP 解密，使用公钥加密。我一直在尝试找到可以完成此任务的库，但遇到了问题。

~~我目前正在查看[openpgpjs](http://openpgpjs.org/)，但我需要所有浏览器的支持，甚至测试页面在唯一列为支持的浏览器（谷歌浏览器）上也有错误。~~

关于最终目标的说明：

**TCP 连接已受 SSL 保护。这层保护的主要目的是防御有意或无意的网络服务器日志记录、故障转储等。**

在 PHP 端，会生成一个临时私钥（它会在短时间内过期）。调用者（在 Javascript 中）负责在新的公钥过期时请求它。私钥过期的原因是为了防止记录的加密数据解密，以防存储私钥的服务器后来被破坏。

服务器受损情况：有人获得了除数据库服务器之外的所有计算机的备份（并且由于防火墙而无法访问数据库，即使他找到了用户和密码）。由于加密记录数据的私钥不再存在，攻击者无能为力。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-25T03:50:29.090

我的登录页面使用了类似的东西；它使用可以在 PHP 中解密的给定公钥信息 (N, e) 对登录凭据进行加密。

它使用以下文件，这些文件属于[`JSBN`](http://www-cs-students.stanford.edu/~tjw/jsbn/)：

*   `jsbn.js`- 处理大整数
*   `rsa.js`- 仅用于 RSA 加密（使用 jsbn.js）
*   `rng.js`- 基本熵收集器
*   `prng4.js`- ARC4 RNG 后端

要加密数据：

```
$pk = '-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY-----';
$kh = openssl_pkey_get_private($pk);
$details = openssl_pkey_get_details($kh);

function to_hex($data)
{
    return strtoupper(bin2hex($data));
}

?>
<script>
var rsa = new RSAKey();
rsa.setPublic('<?php echo to_hex($details['rsa']['n']) ?>', '<?php echo to_hex($details['rsa']['e']) ?>');

// encrypt using RSA
var data = rsa.encrypt('hello world');
</script> 
```

这是您将如何解码发送的数据：

```
$kh = openssl_pkey_get_private($pk);
$details = openssl_pkey_get_details($kh);
// convert data from hexadecimal notation
$data = pack('H*', $data);
if (openssl_private_decrypt($data, $r, $kh)) {
   echo $r;
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-17T10:48:32.157

查看[node-rsa](https://github.com/chrisa/node-rsa)。

这是一个 node.js 模块

> 该模块提供对来自 OpenSSL 的 RSA 公钥例程的访问。支持仅限于 RSAES-OAEP 和使用公钥加密，使用私钥解密。

也许您可以将其移植到浏览器中运行。

**更新**

用于 javascript 的 RSA 客户端库：**（pidcrypt 已正式停产，网站域已过期 - 请参阅@jack 的答案，其中包含与 pidcrypt 所含相同的库）**。 [https://www.pidder.com/pidcrypt/?page=rsa](https://www.pidder.com/pidcrypt/?page=rsa)

PHP服务器端组件： http: [//phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)

祝你好运！

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-12-03T05:38:14.103

实施 RSA 时要小心。事实上，您可能根本不应该使用 RSA。（[改用 libsodium！](https://paragonie.com/blog/2015/09/how-to-safely-implement-cryptography-in-any-application)）

即使您正在使用库（例如直接使用 PHP 的 OpenSSL 扩展，或者直到最近，[`Zend\Crypt`](http://framework.zend.com/security/advisory/ZF2015-10)），仍然有很多可能出错的地方。尤其：

*   PKCS1v1.5 填充是*默认*的（在许多情况下是唯一支持的填充模式），容易受到称为填充预言的一类选择密文攻击。这是由 Daniel Bleichenbacher 首次发现的。**1998 年。**
*   RSA不适合加密大消息，所以实现者经常做的就是取一个长消息，把它分成固定大小的块，然后分别加密每个块。这不仅速度慢，而且类似于对称密钥加密技术[中可怕的 ECB 模式](https://blog.filippo.io/the-ecb-penguin)。

# 最好的事情，用 Libsodium

在走这条路之前，你可能想读几遍[*JavaScript Cryptography Considered Harmful 。*](https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/august/javascript-cryptography-considered-harmful/)但这说...

1.  将 TLSv1.2 与 HSTS 和 HPKP 一起使用，最好使用 ChaCha20-Poly1305 和/或 AES-GCM 以及 ECDSA-P256 证书（重要：当 IETF 命名 Curve25519 和 Ed25519 时，请改用该证书）。
2.  将[libsodium.js](https://github.com/jedisct1/libsodium.js)添加到您的项目中。
3.  在客户端使用`crypto_box_seal()`公钥加密您的消息。
4.  在 PHP 中，使用[`\Sodium\crypto_box_seal_open()`](https://paragonie.com/book/pecl-libsodium/read/08-advanced.md#crypto-box-seal)与公钥对应的密钥来解密消息。

## 我需要使用 RSA 来解决这个问题。

[请不要](https://gist.github.com/tqbf/be58d2d39690c3b366ad)。椭圆曲线密码学更快、更简单，并且在没有侧通道的情况下更容易实现。大多数图书馆已经为您这样做了。（钠！）

## 但是我*真的*很想用RSA！

好的，请严格遵守[这些建议，当您犯了一个错误（就像](http://www.daemonology.net/blog/2009-06-11-cryptographic-right-answers.html)[SaltStack 所做](http://www.cryptofails.com/post/70059600123/saltstack-rsa-e-d-1)的那样）时，不要向 StackOverflow 哭泣，这会使您的密码学无用。

[paragonie/easyrsa](https://github.com/paragonie/EasyRSA)是一种旨在提供简单易用的 RSA 加密的选项（不附带补充的 JavaScript 实现，请不要要求提供）。

*   [它通过使用带有 MGF1+SHA256](https://security.stackexchange.com/questions/32050/what-specific-padding-weakness-does-oaep-address-in-rsa)而不是 PKCS1v1.5的 RSA-OAEP来避免填充预言。
*   它通过巧妙的协议设计避免了 ECB 模式：

### EasyRSA 加密协议

1.  EasyRSA 为对称密钥加密（通过 AES）生成一个随机的 128 位密钥。
2.  您的明文消息使用[defuse/php-encryption 加密](https://github.com/defuse/php-encryption)。
3.  [您的 AES 密钥使用phpseclib](https://github.com/phpseclib/phpseclib)提供的 RSA 加密，使用正确的模式（如上所述）。
4.  这些信息被打包成一个简单的字符串（带有校验和）。

但是，实际上，如果您找到了一个有效的公钥加密用例，您需要 libsodium 来代替。

## 奖励：用 JavaScript 加密，用 PHP 解密

我们将使用[钠加](https://github.com/paragonie/sodium-plus)来实现这一目标。（取自[这篇文章](https://dev.to/paragonie/message-encryption-in-javascript-and-php-cg9)。）

```
const publicKey = X25519PublicKey.from('fb1a219011c1e0d17699900ef22723e8a2b6e3b52ddbc268d763df4b0c002e73', 'hex');

async function sendEncryptedMessage() {
    let key = await getExampleKey();
    let message = $("#user-input").val();
    let encrypted = await sodium.crypto_box_seal(message, publicKey);
    $.post("/send-message", {"message": encrypted.toString('hex')}, function (response) {
        console.log(response);
        $("#output").append("<li><pre>" + response.message + "</pre></li>");
    });
} 
```

然后是一致的 PHP 代码：

```
<?php
declare(strict_types=1);
require 'vendor/autoload.php'; // Composer
header('Content-Type: application/json');
$keypair = sodium_hex2bin(
    '0202040a9fbf98e1e712b0be8f4e46e73e4f72e25edb72e0cdec026b370f4787' .
    'fb1a219011c1e0d17699900ef22723e8a2b6e3b52ddbc268d763df4b0c002e73'
);

$encrypted = $_POST['message'] ?? null;
if (!$encrypted) {
    echo json_encode(
        ['message' => null, 'error' => 'no message provided'],
        JSON_PRETTY_PRINT
    );
    exit(1);
}
$plaintext = sodium_crypto_box_seal_open(sodium_hex2bin($encrypted), $keypair);

echo json_encode(
    ['message' => $plaintext, 'original' => $encrypted],
    JSON_PRETTY_PRINT
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T16:55:34.783

[pidCrypt](https://www.pidder.com/pidcrypt/?page=rsa) (js) 和[phpseclib](http://phpseclib.sourceforge.net/) (php)的 RSA 示例用法。

**不要在此工作示例中重复使用私钥。**

**pidCrypt 加密**

```
//From the pidCrypt example sandbox
function certParser(cert) {
    var lines = cert.split('\n');
    var read = false;
    var b64 = false;
    var end = false;
    var flag = '';
    var retObj = {
    };
    retObj.info = '';
    retObj.salt = '';
    retObj.iv;
    retObj.b64 = '';
    retObj.aes = false;
    retObj.mode = '';
    retObj.bits = 0;
    for (var i = 0; i < lines.length; i++) {
        flag = lines[i].substr(0, 9);
        if (i == 1 && flag != 'Proc-Type' && flag.indexOf('M') == 0)//unencrypted cert?
        b64 = true;
        switch (flag) {
            case '-----BEGI':
                read = true;
                break;
            case 'Proc-Type':
                if (read)retObj.info = lines[i];
                break;
            case 'DEK-Info:':
                if (read) {
                    var tmp = lines[i].split(',');
                    var dek = tmp[0].split(': ');
                    var aes = dek[1].split('-');
                    retObj.aes = (aes[0] == 'AES') ? true : false;
                    retObj.mode = aes[2];
                    retObj.bits = parseInt(aes[1]);
                    retObj.salt = tmp[1].substr(0, 16);
                    retObj.iv = tmp[1];
                }
                break;
            case '':
                if (read)b64 = true;
                break;
            case '-----END ':
                if (read) {
                    b64 = false;
                    read = false;
                }
                break;
                default : if (read && b64)retObj.b64 += pidCryptUtil.stripLineFeeds(lines[i]);
        }
    }
    return retObj;
}

var strCreditCardPublicKey="-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC\/tI7cw+gnUPK2LqWp50XboJ1i\njrLDn+4\/gPOe+pB5kz4VJX2KWwg9iYMG9UJ1M+AeN33qT7xt9ob2dxgtTh7Mug2S\nn1TLz4donuIzxCmW+SZdU1Y+WNDINds194hWsAVhMC1ClMQTfldUGzQnI5sXvZTF\nJWp\/9jheCNLDRIkAnQIDAQAB\n-----END PUBLIC KEY-----\n";

var objParams=certParser(strCreditCardPublicKey);
var binaryPrivateKey=pidCryptUtil.decodeBase64(objParams.b64);

var rsa=new pidCrypt.RSA();

var asn=pidCrypt.ASN1.decode(pidCryptUtil.toByteArray(key));
var tree=asn.toHexTree();
rsa.setPublicKeyFromASN(tree);

var strHexSensitiveDataEncrypted=rsa.encrypt("4111111111111111");

var strBase64SensitiveDataEncrypted=pidCryptUtil.fragment(pidCryptUtil.encodeBase64(pidCryptUtil.convertFromHex(strHexSensitiveDataEncrypted)), 64))

console.log(strBase64SensitiveDataEncrypted); 
```

.

**phpseclib解密**

```
require_once("Crypt/RSA.php");

function decrypt($strBase64CipherText)
{
    //CRYPT_RSA_MODE_INTERNAL is slow
    //CRYPT_RSA_MODE_OPENSSL is fast, but requires openssl to be installed, configured and accessible.
    define("CRYPT_RSA_MODE", CRYPT_RSA_MODE_INTERNAL);

    $rsa=new Crypt_RSA();

    //$strPrivateKey=file_get_contents("private.pem");
    //This private key is for example purposes
    //DO NOT REUSE
    $strPrivateKey="-----BEGIN RSA PRIVATE KEY-----
        MIICXQIBAAKBgQDBNHK7R2CCYGqljipbPoj3Pwyz4cF4bL5rsm1t8S30gbEbMnKn
        1gpzteoPlKp7qp0TnsgKab13Fo1d+Yy8u3m7JUd/sBrUa9knY6dpreZ9VTNul8Bs
        p2LNnAXOIA5xwT10PU4uoWOo1v/wn8eMeBS7QsDFOzIm+dptHYorB3DOUQIDAQAB
        AoGBAKgwGyxy702v10b1omO55YuupEU3Yq+NopqoQeCyUnoGKIHvgaYfiwu9sdsM
        ZPiwxnqc/7Eo6Zlw1XGYWu61GTrOC8MqJKswJvzZ0LrO3oEb8IYRaPxvuRn3rrUz
        K7WnPJyQ2FPL+/D81NK6SH1eHZjemb1jV9d8uGb7ifvha5j9AkEA+4/dZV+dZebL
        dRKtyHLfbXaUhJcNmM+04hqN1DUhdLAfnFthoiSDw3i1EFixvPSiBfwuWC6h9mtL
        CeKgySaOkwJBAMSdBhn3C8NHhsJA8ihQbsPa6DyeZN+oitiU33HfuggO3SVIBN/7
        HmnuLibqdxpnDOtJT+9A+1D29TkNENlTWgsCQGjVIC8xtFcV4e2s1gz1ihSE2QmU
        JU9sJ3YeGMK5TXLiPpobHsnCK8LW16WzQIZ879RMrkeDT21wcvnwno6U6c8CQQCl
        dsiVvXUmyOE+Rc4F43r0VRwxN9QI7hy7nL5XZUN4WJoAMBX6Maos2Af7NEM78xHK
        SY59+aAHSW6irr5JR351AkBA+o7OZzHIhvJfaZLUSwTPsRhkdE9mx44rEjXoJsaT
        e8DYZKr84Cbm+OSmlApt/4d6M4YA581Os1eC8kopewpy
        -----END RSA PRIVATE KEY-----
    ";
    $strPrivateKey=preg_replace("/[ \t]/", "", $strPrivateKey);//this won't be necessary when loading from PEM

    $rsa->loadKey($strPrivateKey);

    $binaryCiphertext=base64_decode($strBase64CipherText);

    $rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
    $strBase64DecryptedData=$rsa->decrypt($binaryCiphertext);

    return base64_decode($strBase64DecryptedData);
}

//The pidCrypt example implementation will output a base64 string of an encrypted base64 string which contains the original data, like this one:
$strBase64CipherText="JDlK7L/nGodDJodhCj4uMw0/LW329HhO2EvxNXNUuhe+C/PFcJBE7Gp5GWZ835fNekJDbotsUFpLvP187AFAcNEfP7VAH1xLhhlB2a9Uj/z4Hulr4E2EPs6XgvmLBS3MwiHALX2fES5hSKY/sfSUssRH10nBHHO9wBLHw5mRaeg=";

$binaryDecrypted=decrypt($strBase64CipherText);

//should output '4111111111111111'
var_export($binaryDecrypted); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:56:58.480

这是基于[Tiny Encryption Algorithm](http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm)的，它是一种对称（私钥）加密系统。尽管如此，由于它的重量轻，它可能对您有用。

现在位于：[http ://babelfish.nl/Projecten/JavascriptPhpEncryption](http://babelfish.nl/Projecten/JavascriptPhpEncryption)

# javascript - 如何在不设置整个 url 的情况下更改 window.location 整个 uri？

> ID：12457238
> 
> 赞同：0
> 
> 时间：2012-09-17T10:18:28.993
> 
> 标签：javascript

假设你有这个网址： http: [//www.domain.com//////](http://www.domain.com//////)。如何通过仅设置相对路径 (window.location = 'home') 而不是绝对路径 (window.location = 'http://www.domain.com/home') 来更改 uri 路径。如果您为 location.href 分配一个相对路径，则上面的 url 将是 www.domain.com/////home。我想要 www.domain.com/home

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:21:40.473

试试这个：

```
location.href = "/home" 
```

将 URL 设置为以“/”开头的字符串会返回到“根”级别，因此就在主机地址之后。使用“../”您可以返回单个级别，例如在文件系统中导航。

# scala - 用一个枚举器喂两个迭代器

> ID：12457239
> 
> 赞同：5
> 
> 时间：2012-09-17T10:18:32.297
> 
> 标签：scala, playframework, iterate

我是玩框架、函数式编程和 Iteratee I/O 的新手，所以也许我的问题非常离题甚至愚蠢。

我想将大文本文件作为流上传到第三方，同时提取有关该文件的元数据（基于其内容，为了简化说它是一个 csv 文件）。

我已经编写了两个工作体解析器：`Iteratee[Array[Byte], B]`一个包含编写逻辑，一个`Iteratee[Array[Byte], MetaData]`包含元数据提取逻辑。您能否告诉我如何结合这两个解析器来同时处理写入和提取内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:00:05.497

如果您有两个迭代器，`it1`并且`it1`，例如，您可以从它们（在下面的代码中）创建一个“压缩”迭代`zippedIt`器，它将接收到的任何输入发送给两个迭代器，`it1`并且`it2`. 请参阅 的[Play Iteratee 文档`zip`](http://www.playframework.com/documentation/api/2.1.0/scala/index.html#play.api.libs.iteratee.Enumeratee%24)。

这是一个例子：

```
import play.api.libs.iteratee.{Enumerator, Iteratee, Enumeratee}

val e = Enumerator("1", "2", "3")
val it1 = Iteratee.foreach[String](v => println("1: " + v))
val it2 = Iteratee.foreach[String](v => println("2: " + v))
val zippedIt = Enumeratee.zip(it1, it2)
e(zippedIt) 
```

这个小片段的控制台输出是：

```
1: 1
2: 1
1: 2
2: 2
1: 3
2: 3 
```

# c# - 如何从我的应用程序中打开当前的 Excel 实例？

> ID：12457240
> 
> 赞同：3
> 
> 时间：2012-09-17T10:18:32.093
> 
> 标签：c#, excel

如何在*当前*打开的 Microsoft Excel 实例中打开我的 Excel 工作表？当我使用我的代码时，会打开一个新的 Excel 实例。

```
 private Excel.Application xlApp;
 private Excel.Workbook xlWorkBook;
 private Excel.Worksheet xlWorkSheet;

 xlApp = new Excel.Application();
 xlApp.Visible = true;

 xlWorkBook = xlApp.Workbooks.Open(textBox1.Text);
 xlWorkSheet = (Excel.Worksheet)xlWorkBook.ActiveSheet; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:31:55.250

您可以执行以下操作来获取对正在运行的 Excel 实例的引用（如果有的话）：

```
public Excel.Application TryGetExistingExcelApplication()
{
    try
    {
        object o = Marshal.GetActiveObject("Excel.Application");
        return (Excel.Application)o;
    }
    catch (COMException)
    {
        // Probably there is no existing Excel instance running, return null
        return null;
    }
} 
```

一旦您引用了正在运行的实例，您就可以访问它的 Workbooks 集合。

一个警告：如果您尝试自动化现有的 Excel 实例，您可能会遇到“服务器繁忙”异常。为避免这种情况，您可以实现`IOleMessageFilter`错误处理程序。[本文](http://msdn.microsoft.com/en-us/library/ms228772(vs.80).aspx)介绍了如何实现 Visual Studio 自动化；该技术与自动化 Excel 相同。

# z3 - Z3并行版什么时候重新激活？

> ID：12457241
> 
> 赞同：3
> 
> 时间：2012-09-17T10:18:46.380
> 
> 标签：z3

目前Z3平行版重启的计划是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T14:24:23.463

Z3 从未广泛支持并行性。在 2.x 版本中，我们包含了一项实验性功能，允许用户使用不同的配置选项并行执行多个副本。不同的副本还可以共享信息并修剪彼此的搜索空间。此功能有一些限制。例如，它在程序化 API 中不可用。它也与长期的研究目标和方向相冲突。因此，此功能已从最新版本中删除。

话虽如此，在 Z3 4.x API 中，创建多个上下文 (Z3_Context) 并从不同线程同时访问它们是安全的。以前的版本不是线程安全的。在 Z3 4.x 中，我们可以使用并行组合器定义自定义策略。例如，组合器并行`(par-or t1 t2)`执行策略。这些组合器可用于编程 API 和 SMT 2.0 前端。以下在线教程包含更多信息：[http ://rise4fun.com/Z3/tutorial/strategies](http://rise4fun.com/Z3/tutorial/strategies)`t1``t2`

以下命令（用于 SMT 2.0 前端）将使用`smt`具有不同随机种子的策略的两个副本来检查断言的公式。

```
(check-sat-using (par-or (! smt :random-seed 10) (! smt :random-seed 20))) 
```

# jquery - resize() 时边框大小变化缓慢

> ID：12457244
> 
> 赞同：6
> 
> 时间：2012-09-17T10:18:52.270
> 
> 标签：jquery

我正在创建 2 个三角形（使用border- *hack*），它们垂直填充页面（所以两个三角形都是页面高度的 50%）。我做得很好。

但是，当我也试图让这个 calc 运行时，`window.resize`它非常慢。我知道我每次都会计算一些变量，但只是想知道是否有人能想出一种方法来加快速度……
看看我的[jsfiddle](http://jsfiddle.net/mrwigster/vuzs9/)，然后调整浏览器窗口的大小。- 警告 jsFiddle 可能会在一段时间后崩溃......这就是它有多糟糕。

目前，三角形计算出主体宽度，减去`.main`宽度，然后除以 2，这样三角形的边缘刚好接触到`.main`div 的边。
它还计算出窗口的高度 ( `$(window).outerHeight();`)，然后将其除以 2，这样每个三角形都有窗口高度的 50%。
然后它也使用这个高度，对`top`第二个三角形应用一个值，使它位于页面的后半部分。

我建议查看 jsfiddle 的代码，但也将其放在这里：

**HTML**

```
<div class="triangleWrap">
    <div class="borderTopLeft"></div>
    <div class="borderBottomLeft"></div>
</div>

<div class="main"></div> 
```

**JS**

```
$('document').ready(function triangleCalc() {
    var bodyWidth = $('body').width();
    var bodyHeight = $(window).outerHeight();
    var mainWidth = $('.main').width();
    var bodyMinusMain = (bodyWidth - mainWidth) / 2;
    var bodyHeightCalc = bodyHeight / 2;
    $('.borderTopLeft, .borderBottomLeft').css('border-right', bodyMinusMain + 'px solid black');
    $('.borderTopLeft').css('border-bottom', bodyHeightCalc + 'px solid transparent');
    $('.borderBottomLeft').css({
        'border-top': bodyHeightCalc + 'px solid transparent',
        'top': bodyHeightCalc + 'px'
    });
    $(window).resize(triangleCalc);
});​ 
```

**CSS**

```
.borderTopLeft, .borderBottomLeft{
    width: 0;    
    height: 0;    
    position: absolute;
}
.borderTopLeft{border-top: 0 solid transparent;}
.borderBottomLeft{border-bottom: 0 solid transparent;}
.borderTopLeft{ 
    border-bottom: 500px solid transparent;       
    border-right:438px solid #2C2C2C;
}
.borderBottomLeft{
    border-top: 500px solid transparent;   
    border-right: 600px solid #2C2C2C;
    top: 500px;
}
.main{width:500px;height:400px;background:orange;margin:auto;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:37:59.430

那只是写得很糟糕的JavaScript。不缓存 DOM 引用是最糟糕的事情。

效果更好吗？： http: [//jsfiddle.net/NpDnu/](http://jsfiddle.net/NpDnu/)

更多优化：

*   限制调整大小事件（无论如何它在操作系统/浏览器中都是一致的）
*   解耦并使用 requestAnimationFrame

# javascript - 控制字体大小，使其尽可能填充容器

> ID：12457250
> 
> 赞同：2
> 
> 时间：2012-09-17T10:19:14.433
> 
> 标签：javascript, css, font-size

我正在构建一个树状图可视化，如下所示：

[http://thejit.org/static/v20/Jit/Examples/Icicle/example2.html](http://thejit.org/static/v20/Jit/Examples/Icicle/example2.html)

我想知道是否有任何方法可以使字体大小尽可能大，以尽可能多地填充容器。

这可能仅使用 CSS 是不可行的，但我想知道 JS 向导是否已经找到了一种方法来做到这一点。

这是我的布局：http: [//jsfiddle.net/Z4TyP/1/](http://jsfiddle.net/Z4TyP/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:24:05.540

这是我在需要相同功能时使用的：[https ://github.com/michikono/boxfit](https://github.com/michikono/boxfit)

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:40:05.577

[slabText](http://www.frequency-decoder.com/demo/slabText/)可能是您正在寻找的。

# java - 如何避免来自 JAXB 序列化的公共 int 字段？

> ID：12457252
> 
> 赞同：4
> 
> 时间：2012-09-17T10:19:14.237
> 
> 标签：java, xml, jaxb

如何避免字段被序列化？我使用 xml 属性。当前字段没有属性，但获取到 xml...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T10:21:41.427

用 注释要排除的字段`@XmlTransient`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T10:49:53.670

**选项 #1 - 更改访问器类型**

默认情况下，[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)实现会将所有公共字段和属性视为已映射。如果您想将此限制为仅公共属性，则可以执行以下操作：

```
@XmlAccessorType(XmlAccessType.PROPERTY)
public class Foo {

    public int bar; // Not considered mapped if access type is set to PROPERTY

} 
```

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

**选项 #2 - 指定字段未映射**

您可以标记一个字段/属性`@XmlTransient`以防止它被映射。

```
public class Foo {

    @XmlTransient
    public int bar; // Not considered mapped

} 
```

*   [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)

# xml - 在 Windows mobile 6/6.5 中使用记事本程序打开 XML 文件

> ID：12457257
> 
> 赞同：0
> 
> 时间：2012-09-17T10:19:36.540
> 
> 标签：xml, windows, windows-mobile, windows-mobile-6.5

所以，

我有一个使用 .NET CF 编写的 windows mobile 6 应用程序，它从 XML 文件加载其设置。问题是 Windows 6.5 使用浏览器打开 xml 文件，我在任何地方都看不到任何“打开方式”选项。

我正在使用一个名为 notepad mobile 的免费应用程序，它很棒，但使用它的打开文件功能我无法浏览到程序文件文件夹（仅限于我的文档）。

理想情况下，我希望能够从手机本身编辑 xml 文件。

所以我的问题是，是否有一个注册表项可以使程序文件夹“可见”或类似的东西？

如果没有，还有其他选择吗？

我知道我可以将我的程序文件放在我的文档文件夹中......但我想避免这种情况

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T04:29:19.980

您正在触摸 Windows Mobile 中的一些“默认值”。

1.) 与桌面窗口一样，文件扩展名与应用程序关联（或不关联）。这由设备的注册表控制（如在桌面窗口上）： [HKEY_CLASSES_ROOT.xml] "Content Type"="text/xml" "Default"="xmlfile" --and-- [HKEY_CLASSES_ROOT\xmlfile\Shell\Open\ Command] "Default"="iexplore.exe file:%1" 您现在可以更改后一个设置并插入您的自定义应用程序以打开 xml 文件作为默认 xml 文件处理程序。

2.) 默认的 OpenFileDialog 和 SaveFileDialog 仅限于 MyDocuments 文件夹。这是由 Windows Mobile OS 设计的。只要程序员不实现自定义打开/保存文件对话框，您就无法在“我的文档”和持久存储卷（如 SD 卡）之外打开/保存文件。您可以尝试在标准对话框中输入完整路径（但我认为它不受支持）。

我建议您更改设置，如 1.) 或使用带有 TotalCommander CE 等编辑器的文件浏览器（免费软件：[http](http://www.ghisler.com/ce.htm) ://www.ghisler.com/ce.htm ）。

玩得开心

约瑟夫

# python - python中的实例

> ID：12457259
> 
> 赞同：1
> 
> 时间：2012-09-17T10:19:43.300
> 
> 标签：python, class

我创建了以下示例来了解 python 中的实例

```
import time;
class test:
    mytime = time.time();   
    def __init__(self):
        #self.mytime = time.time();
        time.sleep(1);
        pass

from test import test

test1 = test()
test2 = test()

print test1.mytime
print test2.mytime

test1.mytime = 12

print test1.mytime
print test2.mytime 
```

在这种情况下，输出 id 如下：

```
1347876794.72
1347876794.72
12
1347876794.72 
```

我预计 test2.mytime 比 test1.mytime 大 1 秒。为什么不在每个实例中创建有关 mytime 的副本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T10:22:35.713

让我们看看这些行：

```
class test:
   mytime = time.time(); 
```

这里设置**类成员值**，在执行类定义时计算一次，所以在加载`time.time()`包含的模块时计算一次。`class test`

的每个实例都`class test`将接收该预先计算的值，并且您必须覆盖该值（例如在 __init__ 方法中），通过`self`（这是存储对实例的引用的特殊参数）访问它，从而设置**实例成员 value**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:23:29.083

在`mytime = time.time()`定义类时执行（当解释器运行类定义代码时，它只会运行一次，所以所有实例都会得到相同的`mytime`。

如果您想`mytime`在不同的实例中有所不同，则必须使用`self`'s ，并使用实例名称而不是类名称来访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:23:36.413

值永远不会改变的原因是因为它是一个类变量，意味着在定义和评估类时而不是在创建实例时设置值。

如果您希望更改值，请将其设置在初始化程序中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T10:29:28.153

mytime 变量首先创建为类变量，而不是实例变量。

Python首先尝试在实例上找到一个名称，如果没有找到，它将在类中查找该名称。您可以通过查看对象的`__dict__`（包含实例变量的字典）来查询任何对象（包括）类的名称空间。

设置后，您就在该对象的 中`test1.mytime = 12`创建了一个**新**`__dict__`名称，从那时起，该名称就隐藏了具有相同名称的类变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T12:19:31.867

让我们从您的代码中取消注释“self.mytime = time.time()”行：

```
class test:
    mytime = time.time();   
    def __init__(self):
        self.newtime = time.time();
        time.sleep(1);
        #pass - no use of pass here

test1 = test()
test2 = test()

print test1.mytime
o/p: 1347883057.638443
print test2.mytime
o/p: 1347883057.638443 
```

在这种情况下，“mytime”变量就像静态类成员。并且 test() 类的所有实例（即：test1 和 test2）将共享相同的类属性值。

```
print test1.newtime
o/p: 1347883063.421356

print test2.newtime
o/p: 1347883068.7103591 
```

而实例变量的值。每个类的实例都会有所不同。

因此，要为每个实例获取不同的时间。您需要在“ **init** ”方法中使用“self”声明实例变量。

*   self = instance 作为类方法中的第一个参数
*   **init** = python 中定义类的默认构造方法

希望，它会有所帮助。

# java - json转xml java

> ID：12457261
> 
> 赞同：2
> 
> 时间：2012-09-17T10:19:48.893
> 
> 标签：java, xml, json

我想将 json 转换为 xml 这里是代码

```
public class ConvertJSONtoXML {

public static void main(String[] args) throws Exception {

    InputStream is = ConvertJSONtoXML.class.getResourceAsStream("demo1.txt");

        String jsonData = IOUtils.toString(is);
        XMLSerializer serializer = new XMLSerializer();
        JSON json = JSONSerializer.toJSON(jsonData);

    String xml = serializer.write((JSON) json);
        System.out.println(xml); 
```

这是demo1.txt

```
{"name":"naveed" } 
```

它读取 demo1.txt 文件并转换为 xml，但我试图将 json 作为字符串传递。

```
String jsonString="{\"name\":\"naveed\" }";
InputStream is = ConvertJSONtoXML.class.getResourceAsStream(jsonString); 
```

但它不适用于字符串..

我的东西`getResourceAsStream(jsonString)`不适用于字符串....请提出任何参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:28:11.817

该方法`getResourceAsStream()`实际上在文件系统上查找由输入字符串标识的资源并为其打开一个输入流。

你应该使用类似的东西

```
InputStream is = new ByteArrayInputStream( jsonString.getBytes() ); 
```

此外，您应该注意使用兼容的字符集。

# jsf-2 - 没有呈现在

> ID：12457262
> 
> 赞同：2
> 
> 时间：2012-09-17T10:19:49.690
> 
> 标签：jsf-2, selectmanylistbox

我从 JSF 开始，并试图让下面的简单示例正常工作，但它只显示一个空矩形

java bean代码是：

```
import javax.faces.model.SelectItem;
import java.util.*;

public class SItemsBean
{ 
  private List options;
  public SItemsBean() 
  {
  options = new ArrayList();
  SelectItem option = new SelectItem("ch1", "choice1", "This bean is for selectItems tag", true);
  options.add(option);
  option = new SelectItem("ch2", "choice2");
  options.add(option);
  option = new SelectItem("ch3", "choice3");
  options.add(option);
  option = new SelectItem("ch4", "choice4");
  options.add(option);
  option = new SelectItem("ch5", "choice5");
  options.add(option);
  }

   public void setOptions(List opt)
  {
   options = opt;
  }

   public List getOptions()
  {
   return options;
  }
} 
```

xhtml代码是：

```
<h:form>
<h:outputText value="Select choices given below :"/><br/><br/>
<h:selectManyListbox id="subscriptions" value="#{SItemsBean.options}" size="3">
<f:selectItems value="#{SItemsBean.options}" />
</h:selectManyListbox>
</h:form> 
```

并在 faces-config.xml 中附加以下内容：

```
<managed-bean>
    <managed-bean-name>sItemsBean</managed-bean-name>
    <managed-bean-class>sItemsBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
        <display-name>options</display-name>
        <property-class>java.util.List</property-class>
    </managed-property>     
</managed-bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:29:02.117

您的问题是由具有以下托管属性引起的：

```
<managed-property>
    <display-name>options</display-name>
    <property-class>java.util.List</property-class>
</managed-property> 
```

托管属性是在构造 bean 之后设置的。这个基本上`options`用一个空列表设置属性，从而覆盖您在 bean 的构造函数中努力填充的列表。

我不确定你为什么这样配置它，但我相信你误解了`<managed-property>`. 它并不是要“声明” bean 的所有可用属性，不，它会在 bean 构造后将 bean 的属性**设置为指定的值。**

要解决您的具体问题，只需**将**其`<managed-property>`从您的`faces-config.xml`.

* * *

**与具体问题无关**，您确定您正在从正确的 JSF 资源中学习吗？到目前为止，您发布的代码是旧 JSF 1.x 的典型代码，根本不使用任何新的 JSF 2.x 特性`@ManagedBean`。确保您从正确的 JSF 资源中学习，因为在 JSF 2.x 中，很多事情的完成方式与在 JSF 1.x 中不同（好得多）。

### 也可以看看：

*   [我们的 JSF 维基页面](https://stackoverflow.com/tags/jsf/info)
*   [我们的`h:selectOneMenu`wiki 页面](https://stackoverflow.com/tags/selectonemenu/info)（带有 JSF 2.x 目标示例）

# html - 在我的 div 中调整背景图像的大小

> ID：12457267
> 
> 赞同：0
> 
> 时间：2012-09-17T10:20:02.470
> 
> 标签：html, css, background-image

> **可能重复：**
> [使用 CSS 在背景图像上设置大小？](https://stackoverflow.com/questions/1341358/set-size-on-background-image-with-css)

我需要找到一个解决方案，如何获得与我在[这里](http://tommywebdesigner.com/Contacto.html)实现的背景图像相同的效果，但使用图像标签。换句话说，我可能需要使用 Javascript 来做到这一点，但我没有找到任何合适的解决方案。

这里是示例页面中我的正文的 Html。

```
 <div id="contacto">

       <div class="home">

       </div>     

  </div> 
```

CSS如下：

```
 #contacto {
  background-image: url("../img/barcelona-buildings.jpg");
  background-attachment: fixed;
  background-position: center 965px;
  height: 350px;
  width: 100%;
  margin-top: 75px;
  box-shadow: 2px 1px 6px 0 #888888 inset;
  -moz-box-shadow: 2px 1px 6px 0 #888888 inset;
  -webkit-box-shadow:  2px 1px 6px 0 #888888 inset;
}

.home {
    overflow: hidden;
    z-index: 1;
} 
```

现在，但我想`background-image: url("../img/barcelona-buildings.jpg");`在 CSS 中删除并 `<img src="../img/barcelona-buildings.jpg" alt="">`在`div class="home"`Javascript 中使用自动调整有关显示宽度的 img

是否可以？我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:24:37.397

对于**IMG**这样写：

```
.home img{
  position:fixed;
  width:100%;
  height:auto;
} 
```

# java - com.day.util 的 Maven 依赖项

> ID：12457270
> 
> 赞同：0
> 
> 时间：2012-09-17T10:20:05.560
> 
> 标签：java, maven, aem

我一直在使用 Adob​​e CQ5.5，需要在 com.day.util 中使用一个类。我没有得到这个 util 的任何 Maven 依赖项。结果，使用此包的类无法编译。

用尽谷歌搜索后，我发布了这个问题。有没有人以前使用过这个包并遇到过类似的问题？

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:06:41.173

以下是 com.day.util 的依赖项

```
<dependency>
        <groupId>com.day.commons</groupId>
        <artifactId>day-commons-misc</artifactId>
        <version>1.1.2</version>
        <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:16:32.167

此工件不是标准 Maven 存储库的一部分。

快速谷歌搜索显示它位于 Adob​​e 的 Maven 存储库中。

您必须修改项目的 pom.xml 以在 <repositories> 部分下包含 Adob​​e 的 Maven 存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:38:33.030

我为此目的使用[jarvana.com ，我发现它非常有用。](http://jarvana.com)

# .net - .NET HttpWebRequest & SendChunked：如何发送大型内容？

> ID：12457277
> 
> 赞同：1
> 
> 时间：2012-09-17T10:20:30.300
> 
> 标签：.net, stream, httpwebrequest, chunks

我正在编写一个控制台应用程序，它必须通过 Web 服务发送数据来将大型 SQL 表从一个数据库复制到另一个数据库。因为表可能非常大，并且它们不能（也不应该）完全存储在内存中，所以我使用 DataReader 顺序读取数据并希望将其流式传输到 Web 服务。

为了做到这一点，我将我的 Web 服务声明如下：

```
<OperationContract()>
<WebInvoke(UriTemplate:="{Id}/SendData", method:="PUT", BodyStyle:=WebMessageBodyStyle.WrappedRequest)>
Sub UploadData(ByVal Id As String, ByVal DataStream As Stream) 
```

在我的控制台应用程序中，我正在创建这样的请求：

```
 Dim tRequest As HttpWebRequest = HttpWebRequest.Create(URL_WEBSERVICES & "DataLoad/" & _Id & "/SendData")
    tRequest.SendChunked = True
    tRequest.Method = "PUT"
    tRequest.ContentType = "application/octet-stream" 
```

然后我打开请求流并像这样写入数据：

```
While tSqlReader.Read
    ' Check if a new chunk of data must be created
    If tRows Is Nothing Then
        tRows = New List(Of Object)
    End If
    ' Fill chunk with data
    tRowValues = New Object(tSqlReader.FieldCount - 1) {}
    tSqlReader.GetValues(tRowValues)
    tRows.Add(tRowValues)
    ' Check if chunk is full and must be sent
    If tRows.Count = CHUNK_ROWS_COUNT Then
        ' Write data to the request stream
        tDataChunk = SerializeToByteArray(tRows)
        tStream.Write(tDataChunk, 0, tDataChunk.Length)
        tRows = Nothing
        tDataChunk = Nothing
    End If
End While
' Write final data to the request stream
If tRows IsNot Nothing Then
    tDataChunk = SerializeToByteArray(tRows)
    tStream.Write(tDataChunk, 0, tDataChunk.Length)
End If 
```

然后我关闭请求流并调用 tRequest.GetResponse()。

SerializeToByArray 是以下函数：

```
Private Function SerializeToByteArray(ByVal pObject As Object) As Byte()
    If pObject Is Nothing Then Return Nothing
    Dim tBinaryFormatter As New Runtime.Serialization.Formatters.Binary.BinaryFormatter
    Dim tMemoryStream As New MemoryStream()
    tBinaryFormatter.Serialize(tMemoryStream, pObject)
    Return tMemoryStream.ToArray
End Function 
```

我的问题是网络服务只接收第一块数据，例如如果 CHUNK_ROWS_COUNT = 5 那么它只接收 5 行数据。（我知道这不是 HttpWebRequest 将产生的块的大小）。

我唯一的猜测是我正在通过流发送许多序列化数据包，每个数据包都由一些序列化标头封装，因此 Web 服务中的反序列化过程只会找到并解封装第一个，但这只是一个想法，我我不知道如何以不同的方式做到这一点。我无法序列化整个内容并分块发送写入，因为整个内容不适合内存。

有什么建议吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:11:30.743

我不确定您是否可以在 WCF 中使用手动 HttpWebRequest 执行此操作。WCF 将自己处理块，不要重新发明轮子。

一些伟大的文章：

*   [http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)
*   [http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx)

不要忘记在 wcf 配置中更改阅读器配额

# doctrine - 扩展 FLOW3 Bootstrap 的正确位置？

> ID：12457280
> 
> 赞同：1
> 
> 时间：2012-09-17T10:20:42.733
> 
> 标签：doctrine, bootstrapping, event-listener, typo3-flow

目前我正在尝试为我的 FLOW3-Package 中的每个请求注册一个 Doctrine-Eventlistener。一些研究将我指向 Package.php，但不幸的是，当调用 boot() 方法时 ObjectManager 不可用。

我没有运气搜索了整个 FLOW3-Documentation [http://flow3.typo3.org/documentation/guide/partiii/bootstrapping.html](http://flow3.typo3.org/documentation/guide/partiii/bootstrapping.html)

有什么提示可以通过访问对象管理器进行包范围设置的正确位置吗？

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:16:47.173

您在引导程序中获得每个对象的时间有点早，我有一个问题，可能与您的问题有关，您可以在[http://forge.typo3.org/issues/33838上查看我的错误报告](http://forge.typo3.org/issues/33838)

为什么你需要一个 Doctrine Eventlistener，也许你可以使用 AOP 来拥有这种特性？

# android - 这有什么问题？5分钟后它没有启动服务..而是仅在1分钟后发送

> ID：12457291
> 
> 赞同：4
> 
> 时间：2012-09-17T10:21:36.180
> 
> 标签：android

这应该在 5 分钟后启动服务，但在 1 分钟后启动

```
Intent myIntent = new Intent(getApplicationContext(), BackgroundDataSender.class);  
            PendingIntent piHeartBeatService = PendingIntent.getService(this, 0, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);
            AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
            alarmManager.cancel(piHeartBeatService);
            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), (5*60*1000) , piHeartBeatService); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:25:25.697

你应该写：

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
    System.currentTimeMillis() + (5*60*1000),
    (5*60*1000) ,
    piHeartBeatService); 
```

如果您希望闹钟在 5 分钟后启动（并在之后每 5 分钟重复一次）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:27:28.800

尝试这个

```
private static final long UPDATE_INTERVAL=300000;

Calendar cal=Calendar.getInstance();
            cal.add(Calendar.MINUTE,0);
            alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(),UPDATE_INTERVAL,pendingIntent); 
```

# iphone - 如何在 Objective C 中使用 NSData 创建 json 对象？

> ID：12457297
> 
> 赞同：4
> 
> 时间：2012-09-17T10:21:50.873
> 
> 标签：iphone, ios, ios5, ios4

如何使用`NSData`in创建 json 对象`Objective C`。我在`NSData`变量中有值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T10:28:01.917

您可以在 iOS 5 中像这样使用它（如果您确定您的 json 结构，您可以直接使用`NSArray`或`NSDictionary`进行强制转换）

```
NSError *jsonError;
id jsonDictionaryOrArray = [NSJSONSerialization JSONObjectWithData:myData options:NULL error:&jsonError];
if(jsonError) {
    // check the error description
    NSLog(@"json error : %@", [jsonError localizedDescription]);
} else {
    // use the jsonDictionaryOrArray
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:39:17.200

```
NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"youur link"]];
id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];
if([jsonObjects isKindOfClass:[NSArray class]]){
    //Is array
}else if([jsonObjects isKindOfClass:[NSDictionary class]]){
    //is dictionary
}else{
    //is something else
} 
```

**为斯威夫特编辑**

```
do {
        if let jsonArray = try JSONSerialization.jsonObject(with: data, options : .allowFragments) as? [Dictionary<String,Any>] {

        } else {
            print("bad json")
        }
    } catch let error as NSError {
        print(error)
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T10:26:30.513

如果您在 NSData 对象中有一个值，那么您可以将其转换为 NSString 变量，如下所示

```
NSString *response = [[NSString alloc] initWithData:receivedData
                                                encoding:NSUTF8StringEncoding]; 
```

**已编辑...**

我不确定你想要什么，但我给你字符串中的 json 数组，如下所示..

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    [responseData release];

    NSError *error;
    SBJSON *json = [[SBJSON new] autorelease];
    NSArray *arrData = [json objectWithString:responseString error:&error];
    [responseString release]; 
```

你可以在数组中获取数据

希望这对你有帮助...

:)

# wordpress - 如何解密wordpress生成的密码

> ID：12457301
> 
> 赞同：8
> 
> 时间：2012-09-17T10:21:57.973
> 
> 标签：wordpress, passwords

我正在使用 wordpress 网站。我只想知道，如何从加密密码（存储在 wordpress 数据库中）中获取纯文本。我用`$wp_hasher->CheckPassword($plain_password, $password_hashed)`来检查密码是否正确。但是这次我想知道如何获取纯文本。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-23T19:26:42.933

这是 Jacob 提到的[文章](http://wordpress.org/support/topic/how-to-decode-wordpress-password-hash)中提出的解决方案之一，它作为手动更改密码的方法非常有效，而无需使用电子邮件重置。

1.  在 DB table 中，向 列`wp_users`添加一个键，例如**abc123**`user_activation`。
2.  访问 yoursite.com/wp-login.php?action=rp&key= **abc123** &login= **yourusername**
3.  系统将提示您输入新密码。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-17T10:24:41.327

您将无法从 wordpress 中检索纯文本密码。

Wordpress 使用单向加密来存储使用 md5 变体的密码。没有办法扭转这种情况。

有关更多信息，请参阅本文[http://wordpress.org/support/topic/how-is-the-user-password-encrypted-wp_hash_password](http://wordpress.org/support/topic/how-is-the-user-password-encrypted-wp_hash_password)

# c# - 是否可以在 SQL Server 中存储 Clickonce 应用程序文件？

> ID：12457311
> 
> 赞同：0
> 
> 时间：2012-09-17T10:22:37.303
> 
> 标签：c#, asp.net, clickonce

我在 ASP.net Web 应用程序中使用 ClockOnce 发布 Windows 窗体应用程序。我知道当用户单击发布按钮时，将下载 clickonce 应用程序。此选项不安全，因为知道下载 URL 的任何人都可以下载。添加身份验证我正在使用 httphandler 根据 codeproject 的 David P Henry 建议一切正常。我想为这种方法添加更多安全性，而不是将 clickOnce 应用程序文件放在 Web 应用程序的 Application Files 文件夹中，我想将这些文件放在 SQL Server 中。所以我的应用程序应该能够从 SQL Server 下载这些文件并将其发送给用户。

在Clockonce有可能吗？

如果可能的话，我想知道这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:39:41.023

对的，这是可能的。使用 VirtualPathProvider 从 SQL 而不是文件系统读取文件。

当 ClickOnce 通过 http/https 请求文件时，可以拦截每个请求并传递您自己的版本（在这种情况下，从 SQL 读取而不是从服务器的文件系统读取）。

下面链接的是一个简单的项目，展示了如何使用自定义 VirtualPathProvider。

[http://www.codeproject.com/Articles/16848/Creating-Custom-Virtual-Path-Provider-in-ASP-Net-2](http://www.codeproject.com/Articles/16848/Creating-Custom-Virtual-Path-Provider-in-ASP-Net-2)

我建议将应存储文件的目录转换为应用程序，并将 Global.asax 添加到应用程序的根目录。

然后为根目录添加 *.deploy 和 *.manifest 的处理程序映射，以便您的 VirtualPathProvider 将在请求每个文件时运行。

在覆盖的 FileExists 方法中（在您的 VirtualPathProvider 中）编写一些逻辑以返回文件是否存在。您可以在此处放置一些授权，但我不知道 ClickOnce 是否缓存 Http 响应，因为如果此函数返回 false，服务器将返回 404。

在 VirtualFile 中的 Stream Open() 中，返回从 SQL 服务器读取的 MemoryStream。

希望这可以帮助。

# biopython - Biopython 找不到文件

> ID：12457314
> 
> 赞同：0
> 
> 时间：2012-09-17T10:22:46.260
> 
> 标签：biopython, blast

我正在尝试从 Python 提示符运行 qblast，在导入我需要的所有库后，Python 找不到我的文件：

```
>>> record = SeqIO.read(open("sinchimeras_1.fasta"), format="fasta")
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IOError: [Errno 2] No such file or directory: 'sinchimeras_1.fasta' 
```

我试图写下文件的所有路径（“/Users/imac ...”）并将文件移动到 Python 和 Biopython 文件夹，我得到了相同的消息。

我必须在哪里保存我的文件？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:50:15.063

您需要将该文件移动到您的工作目录或使用绝对路径。

这个问题与 Biopython 无关；IOError 来自`open("sinchimeras_1.fasta")`.

### 解释

当您为 Python 提供相对路径“sinchimeras_1.fasta”时，它会在当前目录中查找此类文件。因此，不要将您的 Fasta 文件移动到 Python/Biopython 文件夹，而是确保它位于您的工作目录中（[`os.getcwd()`](http://docs.python.org/library/os.html#os.getcwd)可能会有所帮助）。

或者，您可以提供文件的绝对路径来代替“sinchimeras_1.fasta”（例如`open("/Users/imac.../sinchimeras_1.fasta")`）。

# codeigniter - 用于 codeigniter 的 mailjet

> ID：12457316
> 
> 赞同：0
> 
> 时间：2012-09-17T10:22:54.010
> 
> 标签：codeigniter, mailjet

我一直在这里关注这个文档：

[https://www.mailjet.com/docs/code/php/codeigniter](https://www.mailjet.com/docs/code/php/codeigniter)

在我的配置文件夹中，我创建了一个如上所示的 php 文件，如下所示：

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['protocol'] = 'smtp';
$config['smtp_host'] = 'ssl://in.mailjet.com';
$config['smtp_port'] = '465';
$config['smtp_user'] = 'API key';
$config['smtp_pass'] = 'Pass Key';
$config['charset'] = 'utf-8';
$config['mailtype'] = 'html';
$config['newline'] = "\r\n";

?> 
```

但我仍然收到以下错误：

```
An Error Was Encountered
Non-existent class: Email 
```

当我尝试在控制器中加载这样的库时：

```
$this->load->library('email');

$this->email->from('your_sender@address.com', 'You');
$this->email->to('recipient@example.com');
$this->email->subject('My first email by Mailjet');
$this->email->message('Hello from Mailjet & CodeIgniter !');

$this->email->send(); 
```

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-05T15:36:46.910

您在系统目录中没有任何文件电子邮件

# php - 使用复选框时，我应该使用序列化数组还是单独的数据库表？

> ID：12457327
> 
> 赞同：1
> 
> 时间：2012-09-17T10:23:28.270
> 
> 标签：php, mysql

我正在为我工​​作的学校编写一个课程观察系统。

数据库结构如下所示：

![数据库结构](../Images/aefbf2dfae47deb763f48c69db9fab0c.png)

我目前正在为表格开发输入表单，其中`Observations`很多字段都需要勾选框。例如，该`Focus`字段可以是任意数量的十二个选项；`Positive`and`Negative`字段可以是任意数量的近二十个选项。

在上图中，我曾经`VARCHAR`允许一个`serialize`'d 数组。

但是，我开始怀疑这是否是最好的下降路线，特别是考虑到我可能想要对数据进行一些半复杂的分析，例如`top 5 staff for a specific positive attribute such as behaviour`（这将涉及计算`behaviour`每个员工所拥有的属性数量表中的`Positive`字段`Observations`）。

这里有两个问题；

*   我应该使用额外的桌子吗？因为`Focus`我想第一个表有三个字段 - `ID`（键和自动增量）`Observation_ID`和`Focus_ID`. 将`Focus_ID`与另一个名为的表`focii`或仅具有两个字段的表相关联 -`Focus_ID`和`Title`. 我需要两个表`Focus`和三个表`Positive`/ `Development`（相同的选项但不同的日志记录）。
*   如果我使用这些额外的数据库表，我的 SQL 语句在尝试从`Observations`表中检索信息时会是什么样子，包括所有关联的`focuses`,`positives`和`developments`？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:29:00.230

是的，在这种情况下，您应该始终正常化。如果你想做计算甚至修改，存储序列化数据是地狱般的。（你将如何删除第三个元素？）

查询示例：

```
SELECT 
    o.id, 
    COUNT(f.id) AS number_of_focusses 
FROM 
    observations o 
INNER JOIN focuses f 
    ON f.observation_id = o.id 
GROUP BY id 
```

这将为您提供属于每个观察的“焦点记录”的数量。

# apache-flex - 从远程文件中读取UTFBytes

> ID：12457328
> 
> 赞同：0
> 
> 时间：2012-09-17T10:23:28.347
> 
> 标签：apache-flex, file, flex4

是否可以在`readUTFBytes`不提示用户下载屏幕的情况下从远程文件中获取？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:45:04.937

当然，使用`URLLoader`.

```
private var loader:URLLoader;
private var req:URLRequest;

private function init():void {
    loader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.BINARY;
    req = new URLRequest("..."); //url
    loader.addEventListener(Event.COMPLETE, onComplete);
    loader.load(req);
}

private function onComplete(event:Event):void {
    ByteArray(loader.data).readUTFBytes(100);
} 
```

# vba - 我的宏显示运行时错误 1004。请检查

> ID：12457335
> 
> 赞同：0
> 
> 时间：2012-09-17T10:24:01.403
> 
> 标签：vba, excel

运行时出现 1004 错误。错误在这一行：

**If IsNumeric(wkbCurr.Sheets(CTRYname).Range(column & x).Value) = True Then**

我想要做的是选择工作表（CTRYNAME），然后搜索列 5、7、9 等，并按照代码中的方式格式化数字。

```
Public Sub MoM_Check()
Dim inti As Integer
Dim intj As Integer
Dim k As Integer
Dim mnth As Integer
Dim currSALE As Double
Dim prevSALE As Double
Dim diffpercent As Double
Dim CTRYname As String
Dim x As Integer
Dim column As String

    'Find Difference percentage between sales of 24 common months in present month's extarct and previous month's extract

  For n = 1 To 13
  Application.SheetsInNewWorkbook = 4
Set wkbTemp = Workbooks.Add

CTRYname = ThisWorkbook.Sheets("Country lookup").Range("A1").Offset(n, 0).Value

'Open a temporary workbook to do all the Calculations
'First the current month's extract is copied to the first sheet

'We now copy sheets for range from wkbout to wkbtemp using usedrange
wkbCurr.Sheets(CTRYname).Activate
wkbCurr.Sheets(CTRYname).UsedRange.Copy
wkbTemp.Sheets("Sheet1").Range("A1").PasteSpecial
wkbprev.Sheets(CTRYname).Activate
wkbprev.Sheets(CTRYname).UsedRange.Copy

 wkbTemp.Sheets("Sheet2").Range("A1").PasteSpecial

'open the Previous month's Main Extract file as given in the lookup tab. This data is pasted on sheet2 of temporary workbook.
'This sheet helps us to compare the country channels in current month's extract with the previous Month's Extract.
'So the same process is followed for this sheet and similarly we get the country channels from the previous month's extract and paste them on 'sheet3

'Prevcnt contains the number of country channels in the previous month's extract
          k = 1

  For mnth = 0 To 22

  currSALE = wkbTemp.Sheets("Sheet1").Range("AB10").Offset(0, mnth).Value
  prevSALE = wkbTemp.Sheets("Sheet2").Range("AC10").Offset(0, mnth).Value
   If prevSALE = 0 And currSALE <> 0 Then
   diffpercent = 1
   ElseIf prevSALE = 0 And currSALE = 0 Then
   diffpercent = 0
   Else: diffpercent = (currSALE - prevSALE) / prevSALE
   End If

   If diffpercent > 0.01 Or diffpercent < -0.01 Then
   Set wkbRaw = Workbooks.Open(strOutputQCPath & "Errorlog.xlsx")
     wkbRaw.Sheets("Sheet1").Activate

   wkbRaw.Sheets("Sheet1").Range("A1").Offset(i, 1 + n).Value = CTRYname & " Incorrect"

    Exit For
   Else
    Set wkbRaw = Workbooks.Open(strOutputQCPath & "Errorlog.xlsx")
    wkbRaw.Sheets("Sheet1").Activate
    wkbRaw.Sheets("Sheet1").Range("A1").Offset(i, 1 + n).Value = CTRYname & " Correct"

     k = k + 1
     wkbRaw.SaveAs Filename:=strOutputQCPath & "Errorlog.xlsx"
     wkbRaw.Close

      End If
         Next mnth

  For x = 1 To 15

    If x = 1 Or x = 2 Or x = 3 Or x = 4 Or x = 6 Or x = 9 Or x = 10 Or x = 11 Or x = 13      Then
    GoTo Name
    Else
    If IsNumeric(wkbCurr.Sheets(CTRYname).Range(column & x).Value) = True Then
        If wkbCurr.Sheets(CTRYname).Range(column & x).Value > 9.99 Then
            wkbCurr.Sheets(CTRYname).Range(column & x).Value = ">999%"
        ElseIf wkbCurr.Sheets(CTRYname).Range(column & x).Value < -9.99 Then
            wkbCurr.Sheets(CTRYname).Range(column & x).Value = "<-999%"
        End If
    End If
    End If
Name:
  Next x

     wkbTemp.Close savechanges:=False
    Set wkbTemp = Nothing

  Next n 
End Sub 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:46:35.433

您没有给字符串“column”一个值，这就是为什么您在该行收到错误 1004。

# c++ - 在 github 上托管项目中使用的 boost 子集

> ID：12457338
> 
> 赞同：6
> 
> 时间：2012-09-17T10:24:08.687
> 
> 标签：c++, git, boost, github, git-submodules

我在 github 上使用 git 进行源代码控制和托管。我们正在努力使回购尽可能小。

我决定为这个项目添加 boost，它（相对于我们的要求）相当大。我已经提取了所需功能的一个子集。现在我对如何在 git 上处理这个有点困惑。我应该将我的 boost 子集添加到存储库吗？如果我将 boost 添加为子模块，下载大小会有点大（我假设，我还没有测试过）。

这通常是如何完成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T11:13:06.150

除非您有充分的理由不这样做，否则将 boost 作为外部依赖项。（根本不要将它添加到您的存储库中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T11:18:09.807

**更新实际上*不是*一个好的选择，请参阅评论**

您实际上可以通过指定`--depth`克隆时间来避免下载整个提升历史记录，这应该使下载大小非常接近经典`tar.gz`存档。

有关它的详细信息，请参阅[Git 浅子模块](https://stackoverflow.com/q/2144406/11343)。

在您的情况下，对于 Boost Bind 它将是`git clone --depth 1 git://gitorious.org/boost/bind.git`然后将 repo 链接为子模块（请参阅链接的帖子）。

# javascript - 从 HTML 中提取警报文本

> ID：12457350
> 
> 赞同：-2
> 
> 时间：2012-09-17T10:24:54.883
> 
> 标签：javascript, html, image

我在 HTML 中创建了一个表格，表格有多个列和行。我的一些专栏包含文本，并且在该文本旁边有一个图像。单击图像后，我想显示文本警报（下例中为 93）。

```
<td id="Anumber">
  <div id="number5">
    93
    <a href="javascript:OrganiseValue()" onclick="this.className='btn_callOrg aM mL5'" 
      class="btn_callBl aM mL5"></a>
  </div>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:06:55.670

这是一个完整的工作示例：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
 $(document).ready(function(){
    $("#number5").click(function() {
      alert("value: "+ $("#number5").html());
    });
});
</script>
</head>
<body>
<div id="number5">
  93  
</div>
</body>
</html> 
```

我的猜测是它对你不起作用，因为：

```
<a href="javascript:OrganiseValue()" onclick="this.className='btn_callOrg aM mL5'" 
class="btn_callBl aM mL5">******</a> 
```

在我放星星的地方你什么都没有，`*******`所以`<a href..></a>`周围什么都没有——没有什么是很难点击的……

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T11:33:32.327

```
<div>
  93
  <a onclick="alert(this.previousSibling.nodeValue)"></a>
</div> 
```

`this`设置为处理程序中的`<a>`元素，`onclick`因此您可以遍历 DOM 树以获取所需的文本。

# android - 修复对话框视图上的屏幕方向

> ID：12457352
> 
> 赞同：0
> 
> 时间：2012-09-17T10:24:58.830
> 
> 标签：android, screen-orientation, customdialog

我在我的活动中使用自定义对话框。只有当对话框显示在其他地方时，我才想设置屏幕方向，屏幕方向可以从纵向变为横向，反之亦然。有没有办法专门在java代码中修复这种特殊情况的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-21T19:31:48.527

我们必须在从服务启动的全屏对话框中执行此操作。

```
final WindowManager.LayoutParams params = new WindowManager.LayoutParams(WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN);
params.copyFrom(window.getAttributes());
params.width = WindowManager.LayoutParams.MATCH_PARENT;
params.height = WindowManager.LayoutParams.MATCH_PARENT;
params.screenOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;

window.setAttributes(params); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:28:02.867

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
//Show dialog here
//...
//Hide dialog here
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:27:57.953

使用`android:configChanges="orientation"`then Android 不会在方向更改时重新创建活动。如果您不想关闭对话框，请使用该`Activity.showDialog()`方法。如果您仍然想使用，`android:configChanges="orientation"`那么您必须在`Activity.onConfigurationChanged()`方法中手动更改可绘制对象。

# c - 总线错误在 gdb 中消失

> ID：12457355
> 
> 赞同：2
> 
> 时间：2012-09-17T10:25:05.960
> 
> 标签：c, gdb

我有一个可以很好编译的 C 语言大程序，但是当我运行它（./a.out）时，我得到：总线错误 10！我使用 gdb 调试器来跟踪内存错误，但奇怪的是程序在 gdb 内正常完成。这种行为可以以某种方式解释，我现在将如何调试我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:33:19.930

在某些操作系统上，gdb 将在 gdb 中以不同方式加载程序。我知道在 MacOS 上 gdb 将禁用一些地址空间布局随机化，这会改变共享库的重定位方式。在某些操作系统上，gdb 将加载比正常程序执行更多的部分或加载具有更广泛权限的那些部分（不可执行的内存可能在 gdb 下是可执行的，或者只读将变为可写）。

最好的办法是捕获问题的核心转储并从那里继续调试。Valgrind 也擅长捕捉这类错误。

# javascript - 使用 javascript 跟踪对内部链接的点击，同时保持在新选项卡中打开的能力

> ID：12457356
> 
> 赞同：1
> 
> 时间：2012-09-17T10:25:07.540
> 
> 标签：javascript

我需要跟踪在我的网站上点击某些链接的次数。

我使用了一个基于 javascript 的方法，该方法包括绑定 click DOM 事件以调用我的计数函数，然后使用 document.location 方法将用户重定向到链接的 href 属性中最初指向的页面。

这是我的代码当前正在执行的操作的说明：

```
<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <title>Test file</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript">

    $(document).ready(function () {
        $(".myLink").on('click', function (event) {
            console.log(event.which);
            if (event.which == 2 ) { //it's a middleclick
                setTimeout(function () { 
                    alert("click counted!");
                }, 1000);
            } else { //it's a regular click
                setTimeout(function () { 
                    alert("click counted!");
                    document.location = "page_a.html";
                }, 1000);
                event.preventDefault(); //prevents the browser to load the linked page before the click is counted
            }
        });
    });

    </script>
</head>
<body>
    <h1>Test file</h1>
    <a class="myLink" href="page_a.html">Page A</a>
</body>
</html> 
```

这适用于常规点击，但在少数情况下它不会按预期工作：

*   如果用户右键单击该链接，然后单击“在新选项卡中打开”，则该链接不计算在内。
*   如果用户使用 crtl+click（或 mac 上的 command+click），这是在新选项卡中打开链接的默认快捷方式，则单击计数但不是在新选项卡中打开，而是替换当前选项卡，如定期点击就可以了。

如果用户使用 middleclick，这也是在新选项卡中打开链接的常用默认快捷方式，它似乎运行良好。

我的问题很简单：如何在保持能够以不同方式在新选项卡中打开链接的默认行为的同时跟踪我的点击次数。

谢谢！

# c++ - 在c ++中将txt文件读入多变量维度数组

> ID：12457358
> 
> 赞同：0
> 
> 时间：2012-09-17T10:25:10.703
> 
> 标签：c++, multidimensional-array, readfile

我需要读取以这种方式构造的 txt 文件

```
0,2,P,B
1,3,K,W
4,6,N,B
etc. 
```

现在我需要读入像 arr[X][4] 这样的数组
。问题是我不知道这个文件中的行数。
另外我需要2个整数和2个字符......

我想我可以用这个代码示例阅读它

```
ifstream f("file.txt");
while(f.good()) {
  getline(f, bu[a], ',');
} 
```

显然，这只向您展示了我认为我可以使用的东西....但我愿意接受任何建议

提前谢谢我的英语

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:31:20.607

定义一个简单`struct`的来表示文件中的一行并使用其中[`vector`](http://en.cppreference.com/w/cpp/container/vector)的一个`struct`。使用 a`vector`可以避免显式管理动态分配，并且会根据需要增长。

例如：

```
struct my_line
{
    int first_number;
    int second_number;
    char first_char;
    char second_char;

    // Default copy constructor and assignment operator
    // are correct.
};

std::vector<my_line> lines_from_file; 
```

Read the lines in full and then split them as the posted code would allow 5 comma separated fields on a line for example, when only 4 is expected:

```
std::string line;
while (std::getline(f, line))
{
    // Process 'line' and construct a new 'my_line' instance
    // if 'line' was in a valid format.
    struct my_line current_line;

    // There are several options for reading formatted text:
    //  - std::sscanf()
    //  - boost::split()
    //  - istringstream
    //
    if (4 == std::sscanf(line.c_str(),
                         "%d,%d,%c,%c",
                         &current_line.first_number,
                         &current_line.second_number,
                         &current_line.first_char,
                         &current_line.second_char))
    {
        // Append.
        lines_from_file.push_back(current_line);
    }

} 
```

# java - JAVA Md5 返回非确定性结果

> ID：12457359
> 
> 赞同：1
> 
> 时间：2012-09-17T10:25:16.633
> 
> 标签：java, security, hash, md5, md5sum

我编写了以下函数来计算 Java 中的 Md5 校验和。

```
class Utils {
 public static String md5Hash(String input) {
        String result = "";
        try {
            System.out.println("Input=" + input);
            final MessageDigest md = MessageDigest.getInstance("MD5");
            md.reset();
            md.update(input.getBytes());
            result = md.digest().toString();
        } catch (Exception ee) {
            System.err.println("Error computing MD5 Hash");
        }
        return result;
    }
}; 
```

`Utils.md5Hash("abcde")` 多次调用会产生不同的结果。我的理解是 md5 返回一个字符串的确定性和唯一性校验和。那是错的吗？否则请让我知道我的实现中的错误。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T10:27:53.963

字节数组的`toString()`方法不返回有意义的字符串。它返回数组对象的类型，后跟数组的 hashCode。

如果要打印，使用 Hex 或 Base64 编码将字节数组转换为字符串。Apache commons-codec 有方法可以做到这一点。

此外，请确保指定支持任何类型的字符的 en 编码，以将您的字符串转换为字节数组。您正在使用的方法使用平台默认编码，例如，如果它是 latin-1 并且您正在转换非 latin-1 字符，则该方法可能会失败。UTF-8 是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:31:38.717

我已经使用以下方式完成了：

```
 public static String encryptedLoginPassword( String password ) 
    {
        String encryptedData="";
    try{
        MessageDigest algorithm = MessageDigest.getInstance("MD5");
        byte[] defaultBytes = password.getBytes();
        algorithm.reset();
        algorithm.update(defaultBytes);
        byte messageDigest[] = algorithm.digest();

        StringBuffer hexString = new StringBuffer();
        for (int i=0;i<messageDigest.length;i++) {
            hexString.append(Integer.toHexString(0xFF & messageDigest[i]));
        }
        encryptedData=hexString.toString();
    }catch(NoSuchAlgorithmException nsae){

    }
    return encryptedData;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-24T17:12:05.043

在 Dinup Kandel 给出的代码中，我不得不改变这个：

```
for (int i=0;i<messageDigest.length;i++) {
   hexString.append(Integer.toHexString(0xFF & messageDigest[i]));
} 
```

进入

```
 if ((0xff & messageDigest[i]) < 0x10) {
     hexString.append("0"
     + Integer.toHexString((0xFF & messageDigest[i])));
 } else {
     hexString.append(Integer.toHexString(0xFF & messageDigest[i]));
 } 
```

让我的单元测试工作。

注意：我用它来验证正确答案：

```
echo -n MyTestString | md5sum 
```

# php - 为什么我在 foreach 循环中得到奇怪的输出？

> ID：12457360
> 
> 赞同：0
> 
> 时间：2012-09-17T10:25:18.220
> 
> 标签：php, foreach

产生奇怪输出的语句是

```
$response = '{"17366":{"title":"title1","content":"content1"},"22747":{"title":"title2","content":"content2"}}';
$result = json_decode($response, true);

foreach ($result as $document => $details) {
    echo "Title : {$details['title']}, ";
    echo "content : {$details['content']} ";
    echo '<br>';
}

//prints, this one ok
//Title : title1, content : content1 
//Title : title2, content : content2 
```

但如果

```
$response = '{"title":"title1"}';
$result = json_decode($response, true);

foreach ($result as $document => $details) {
    echo "Title : {$details['title']}, ";
    echo "content : {$details['content']} ";
    echo '<br>';
}

//prints
//Title : t, content : t 
```

在这种情况下，我知道它`$details`不是一个数组，并且它没有这样的键，如果是这样，它应该产生异常或错误。但它只打印**这两个**字符串的**第一个字母**。

 **任何人请指出我做错了什么？或者是这种行为，我没有断言什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:40:38.430

因为 $details 包含一个字符串而不是一个数组，所以键 'title' 被强制转换为 int。(int)'title' 返回 0。$details[0] 是 't'。

```
echo (int)'title'; 
```

打印出 0

```
$string = "hello world";
echo $string['title']; 
```

打印出'h'

```
$string = "hello world";
echo $string['1title']; 
```

打印出 'e' 因为 (int)'1title' 被强制转换为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:44:04.120

它打印第一个字母，因为它试图将关联的键转换为整数索引。

因此，当 PHP 将字符串转换为整数时，通常会返回`0`，除非字符串的第一个字符是数字。

另一方面，当您的代码尝试使用索引访问字符串时，PHP 将返回索引指定的字符串的 N 字符。

混合所有：

```
$details = "title";

$details['content'] > $details[(int) 'content'] > $details[0]

$details[0] > "t"

$details[1] > "i" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:39:31.800

由于 details 是一个字符串，如果您在其上使用 [] 语法，您可以从该位置的字符串中选择字符。在 'title' 或 'details' 位置选择一个字符实际上不会产生错误，而是 PHP 处理它就像您选择第一个字符 ie 一样`$details[0]`。

只需添加检查以确保 details 是一个数组：

```
if (is_array($details))
{
   // stuff here
} 
```**

# sql - 如何使用变量作为表名检查表的存在

> ID：12457363
> 
> 赞同：2
> 
> 时间：2012-09-17T10:25:50.313
> 
> 标签：sql, sql-server, sql-server-2008, tsql

a) 检查一个表以查找需要创建的其他表的名称 b) 检查该表是否已经存在 c) 如果不存在，则创建它 d) 用新数据填充她

现在，这一切都可以正常工作，直到必须检查表是否存在的部分：

```
set @NewTablename = (select NAME from SomeTable where ID= @i)
set @Tabelexists = 'select case when exists(select * from sys.tables where name = ''' + @NewTabelname + ''') then 1 else 0 end'

declare @check as int execute(@Tabelexists)

IF    @check is NULL 
BEGIN
Create Table
END
ELSE
BEGIN
execute('Delete from '+ @NewTableName)
END

<other stuff like inserts and so on) 
```

但不知何故，当表不存在时，@check 似乎总是为 NULL，如果存在，则为 1。

如果我`IF @check is null`只检查 TRUE 部分，则如果表不存在则执行。如果它在那一刻*确实存在，则不会执行**任何*操作.....

如果我`IF @check =1` 只检查 ELSE 被执行

@check 的值显然总是 NULL 或 1 或 0.......

我在这里不知所措！如何使用变量作为表名检查表的存在？

达米安，我明白你在说什么。但是，如果我这样做，我仍然没有可以测试的结果：

`declare @check as int execute ('select case when exists(select * from sys.tables where name = ''' + @Tabelnaam + ''') then 1 else 0 end')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:33:07.623

你可以像这样检查

```
if not exists(select * from sys.tables where  type='u' and name = @NewTabelname ) 
BEGIN
Create Table
END
ELSE
BEGIN
execute('Delete from '+ @NewTableName)
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:37:23.760

```
declare @check as tinyint

set @NewTablename = (select NAME from SomeTable where ID= @i)
select @check=1 from sys.tables where name = @NewTabelname 
```

或者

```
set @NewTablename = (select NAME from SomeTable where ID= @i)
IF  not exists(select * from sys.tables where name = @NewTabelname)    
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T10:45:19.487

在检查 sys 表中是否存在某些东西时，我总是倾向于选择一个 count(*)，这样答案总是 0 或肯定的，然后我相应地使用该数字。

```
SELECT @Tabelexists = count(*) FROM sys.tables where name = ''' + @NewTabelname +''') 
```

# php - MySQL 查询在网站中不起作用，在 MySQL 程序中起作用

> ID：12457364
> 
> 赞同：0
> 
> 时间：2012-09-17T10:25:51.107
> 
> 标签：php

我有这个代码：

```
mysql_query("
   SELECT id as tc_id, firstname, surname, position, @concat := CONCAT(firstname,' ',surname) 
   FROM tc 
   WHERE (@concat LIKE '%". mysql_real_escape_string($_REQUEST['search_term']) ."%');"); 
```

search_term 只是指文本输入的值。

当我在本地运行 sequel pro 中的 SELECT 语句时——我的 mysql 程序——它工作得很好，选择了适当的行。但是，当我通过我的 PHP 页面在本地运行查询时，它不会返回任何行，即使它应该返回。帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:39:47.607

`WHERE`不适用于计算列，因此您的查询本身**将不起作用**。

它可能有效，因为您在本地`@concat`声明了一个变量。如果您在特定条件下运行两次查询，它**似乎**也可以工作，因为您的查询实际上可能分配了一个`@concat`变量。

你想要的是

```
SELECT id as tc_id, firstname, surname, position,
    CONCAT(firstname,' ',surname)  AS concat
FROM tc HAVING concat LIKE '%<YOUR SEARCH TERM>%'; 
```

作为测试：

```
-- Declare a minimum table to match the query
CREATE TABLE tc (id integer, firstname varchar(20), surname varchar(20), position integer);

INSERT INTO tc (firstname, surname) VALUES ('alfa', 'bravo');

-- Your query...

SELECT id as tc_id, firstname, surname, position,
    @concat := CONCAT(firstname,' ',surname) FROM tc WHERE (@concat LIKE '%alfa%');

-- ...returns nothing

Empty set (0.00 sec)

-- The proper query works.

SELECT id as tc_id, firstname, surname, position, CONCAT(firstname,' ',surname)  AS concat FROM tc HAVING concat LIKE '%alfa%';
+-------+-----------+---------+----------+------------+
| tc_id | firstname | surname | position | concat     |
+-------+-----------+---------+----------+------------+
|  NULL | alfa      | bravo   |     NULL | alfa bravo |
+-------+-----------+---------+----------+------------+
1 row in set (0.00 sec)

-- But if I declare a @concat variable    

SELECT @concat := 'alfa';
+-------------------+
| @concat := 'alfa' |
+-------------------+
| alfa              |
+-------------------+
1 row in set (0.00 sec)

-- Then your query SEEMS to work.

mysql> SELECT id as tc_id, firstname, surname, position, @concat := CONCAT(firstname,' ',surname)  FROM tc  WHERE (@concat LIKE '%alfa%');
+-------+-----------+---------+----------+------------------------------------------+
| tc_id | firstname | surname | position | @concat := CONCAT(firstname,' ',surname) |
+-------+-----------+---------+----------+------------------------------------------+
|  NULL | alfa      | bravo   |     NULL | alfa bravo                               |
+-------+-----------+---------+----------+------------------------------------------+
1 row in set (0.00 sec)

-- "SEEMS" because the select query isn't actually working:

UPDATE tc SET firstname = 'delta';
Query OK, 1 row affected (0.28 sec)
Rows matched: 1  Changed: 1  Warnings: 0

-- Having renamed the only row to "delta", a search for "alpha" should fail,
-- but since @concat still holds 'alpha', then the query matches ALL rows:

mysql> SELECT id as tc_id, firstname, surname, position, @concat := CONCAT(firstname,'    ',surname)  FROM tc  WHERE (@concat LIKE '%alfa%');
+-------+-----------+---------+----------+------------------------------------------+
| tc_id | firstname | surname | position | @concat := CONCAT(firstname,' ',surname) |
+-------+-----------+---------+----------+------------------------------------------+
|  NULL | delta     | bravo   |     NULL | delta bravo                              |
+-------+-----------+---------+----------+------------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:39:14.060

试试这个：

```
mysql_query("
   SELECT id as tc_id, firstname, surname, position, CONCAT(firstname,' ',surname) as concatt 
   FROM tc 
   WHERE (CONCAT(firstname,' ',surname) LIKE '%". mysql_real_escape_string($_REQUEST['search_term']) ."%');"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:43:47.703

这是因为您的 Sequel Pro 将查询语句翻译成 MySql 查询，而 MySql 不明白“where @concat LIKE ...”是什么意思。

尝试将 PHP 代码上的 where 子句更改为“where CONCAT(firstname,'',surname) LIKE '%...”

完整代码如下：

```
mysql_query("SELECT id as tc_id, firstname, surname, position, CONCAT(firstname,' ',surname) FROM tc WHERE (CONCAT(firstname,' ',surname) LIKE '%". mysql_real_escape_string($_REQUEST['search_term']) ."%');"); 
```

# database-design - 如何优化此数据库设计？

> ID：12457367
> 
> 赞同：1
> 
> 时间：2012-09-17T10:26:07.847
> 
> 标签：database-design

我需要创建的数据库包含**车辆跟踪系统**的数据。因此，有几辆车不断向我的站点发送数据（大约 20 个参数），并将这些值存储在数据库中。

车辆的参数包括车号和硬件id为常数，其余不断变化。因此，对于一辆车，这两个参数始终是恒定的。

我将在该数据库中创建另一个表，其中包含用户的登录凭据，我想在两个表之间创建一个链接，其中包含登录表中的车辆编号（主键）和包含参数的表中的车辆编号。

由于车辆编号列是多余的，我不能将其作为主键。所以我想知道的事情：

> 1.  有什么办法可以实现表之间的链接
> 2.  有没有什么好办法让我不用多次存储这个车号和硬件ID。
> 3.  我应该将每辆车的数据存储在单独的表中而不是全部存储在一个表中吗？

PS：这是我第一次设计数据库，因为我一直只是一名程序员，所以期待好的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:33:17.243

将车辆号码放入登录凭据可能是一个非常糟糕的主意。我不知道您的用户是谁，但我不想使用在我买卖汽车时强迫我更改登录名的网站。我的历史呢？我会失去这一切吗？

主键中的业务逻辑意味着糟糕的设计。

创建一个代理主键并使用它来加入车辆。一个用户可能有很多辆车，所以把 VEHICLE 表中的外键放到 USER 表中。

如果是 1:1，将车辆数据放在单独的表中是没有帮助的。它不会改变除两个值之外的所有值都在变化的事实。

如果您的要求包括保留更改历史记录，您会重新考虑这个想法。由于您没有提及它，我只是在这里猜测。

您提出的任何问题都不会对效率或应用速度产生任何影响。你没有提供足够的细节来让某人对你的设计产生一定的影响。在这一点上，你犯了过早的优化。

# c# - 在 Windows 8 Metro App C# 中打开文件

> ID：12457368
> 
> 赞同：1
> 
> 时间：2012-09-17T10:26:11.910
> 
> 标签：c#, microsoft-metro

**我有一个带有文件路径**的数组（例如“C：\ ...”），我想从我的应用程序中使用默认应用程序打开它们。假设它是一个列表，当我单击其中一个时，它会打开。

这是启动文件异步的方式：

```
await Windows.System.Launcher.LaunchFileAsync(fileToLaunch); 
```

它需要一种`Windows.Storage.StorageFile`文件类型，该文件具有`Path`只读属性，因此我无法设置路径。轻按/单击后如何打开它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:30:01.210

从我在评论中的链接复制：

```
// Path to the file in the app package to launch
   string exeFile = @"C:\Program Files (x86)\Steam\steamapps\common\Skyrim\TESV.exe";

   var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(exeFile);

   if (file != null)
   {
      // Set the option to show the picker
      var options = new Windows.System.LauncherOptions();
      options.DisplayApplicationPicker = true;

      // Launch the retrieved file
      bool success = await Windows.System.Launcher.LaunchFileAsync(file, options);
      if (success)
      {
         // File launched
      }
      else
      {
         // File launch failed
      }
   } 
```

您当然可以省略`var options = **`-Part，这样 ApplicationPicker 就不会被打开

或者你可以使用这个：

```
StorageFile fileToLaunch = StorageFile.GetFileFromPathAsync(myFilePath);
await Windows.System.Launcher.LaunchFileAsync(fileToLaunch); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:31:37.887

您应该 在类型上使用此方法[http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.storagefile.getfilefrompathasync](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.storagefile.getfilefrompathasync) 此方法用于获取文件，如果您已经有
`StorageFile`

`path`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T21:02:44.567

答案在此示例中：[http ://code.msdn.microsoft.com/windowsapps/Association-Launching-535d2cec](http://code.msdn.microsoft.com/windowsapps/Association-Launching-535d2cec)

简短的回答是：

```
// First, get the image file from the package's image directory.
string fileToLaunch = @"images\Icon.Targetsize-256.png";
var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(fileToLaunch);

// Next, launch the file.
bool success = await Windows.System.Launcher.LaunchFileAsync(file); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T10:39:50.770

最好的解决方案是这样的：

```
string filePath = @"file:///C:\Somewhere\something.pdf";

    if (filePath != null)
    {
       bool success = await Windows.System.Launcher.LaunchUriAsync(new Uri(filePath));
       if (success)
       {
          // File launched
       }
       else
       {
          // File launch failed
       }
    } 
```

Tha 应用程序使用系统默认应用程序启动它，在这种情况下使用 Adob​​e Reader。

# android - Android：只有月份和年份的日期选择器

> ID：12457371
> 
> 赞同：1
> 
> 时间：2012-09-17T10:26:16.487
> 
> 标签：android, datetime

我是Android新手，所以请原谅这么简单的问题。如何在 Android 日期选择器中仅设置月份和年份？我不想要里面的日期。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:31:26.333

据我所知，你不能用默认的日期选择器来做

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T04:16:24.863

这是仅包含月份和年份的自定义日期选择器的代码。在这里，我通过单击编辑文本框打开了日期选择器。

```
public class MainActivity extends Activity {
    static final int DATE_DIALOG_ID = 1;
    private int mYear = 2013;
    private int mMonth = 5;
    private int mDay = 30;
    private EditText etPickADate;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        etPickADate = (EditText) findViewById(R.id.et_datePicker);
        etPickADate.setOnClickListener(new OnClickListener() {

            @SuppressWarnings("deprecation")
            @Override
            public void onClick(View arg0) {
                showDialog(DATE_DIALOG_ID);
            }
        });

        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
    }

    DatePickerDialog.OnDateSetListener mDateSetListner = new OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {

            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            updateDate();
        }
    };

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            /*
             * return new DatePickerDialog(this, mDateSetListner, mYear, mMonth,
             * mDay);
             */
            DatePickerDialog datePickerDialog = this.customDatePicker();
            return datePickerDialog;
        }
        return null;
    }

    @SuppressWarnings("deprecation")
    protected void updateDate() {
        int localMonth = (mMonth + 1);
        String monthString = localMonth < 10 ? "0" + localMonth : Integer
                .toString(localMonth);
        String localYear = Integer.toString(mYear).substring(2);
        etPickADate.setText(new StringBuilder()
        // Month is 0 based so add 1
                .append(monthString).append("/").append(localYear).append(" "));
        showDialog(DATE_DIALOG_ID);
    }

    private DatePickerDialog customDatePicker() {
        DatePickerDialog dpd = new DatePickerDialog(this, mDateSetListner,
                mYear, mMonth, mDay);
        try {
            Field[] datePickerDialogFields = dpd.getClass().getDeclaredFields();
            for (Field datePickerDialogField : datePickerDialogFields) {
                if (datePickerDialogField.getName().equals("mDatePicker")) {
                    datePickerDialogField.setAccessible(true);
                    DatePicker datePicker = (DatePicker) datePickerDialogField
                            .get(dpd);
                    Field datePickerFields[] = datePickerDialogField.getType()
                            .getDeclaredFields();
                    for (Field datePickerField : datePickerFields) {
                        if ("mDayPicker".equals(datePickerField.getName())
                                || "mDaySpinner".equals(datePickerField
                                        .getName())) {
                            datePickerField.setAccessible(true);
                            Object dayPicker = new Object();
                            dayPicker = datePickerField.get(datePicker);
                            ((View) dayPicker).setVisibility(View.GONE);
                        }
                    }
                }
            }
        } catch (Exception ex) {
        }
        return dpd;
    }
} 
```

# c# - 如何使用 c# 从 .bas 文件加载 excel 宏模块？

> ID：12457373
> 
> 赞同：0
> 
> 时间：2012-09-17T10:26:23.973
> 
> 标签：c#, excel, excel-addins, office-addins

我正在尝试编写一个自动将预定义模块添加到活动工作簿中的 excel 加载项。

“预定义模块”应满足以下两个要求：

1.  这些模块以 .bas 格式从 excel vba 编辑器导出
2.  这些 .bas 文件不应该对用户可见。

在搜索 MSDN 之后，我发现[这个技巧](http://support.microsoft.com/kb/303872/EN-US)可以做类似的事情：

```
void load_module(EXCEL.Workbook oBook){ 
     VBIDE.VBComponent oModule;
     oModule = oBook.VBProject.VBComponents.Add(VBIDE.vbext_ComponentType.vbext_ct_StdModule);
     oModule.Name = "module_name";
     sCode = "vba script content";
     oModule.CodeModule.AddFromString(sCode);
     //oModule.CodeModule.AddFromFile(file_name);
} 
```

“AddFromFile”方法确实有效，但仅当文件仅包含 vba 代码且文件必须在磁盘上时。

问题是：

1.  excel vba编辑器生成的.bas文件的前几行包含一些“META”数据，以前的方法不会解析这些“META”数据，只是将所有代码输出到一个新的模块中，这是意料之中的。

2.  如果我们使用前面的方法，.bas 文件将对用户可见。但我们需要它们是隐形的。

那么，你有什么办法解决这个烂摊子吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:51:45.403

我会这样做：

1.  将文件从网络位置复制到本地磁盘。
2.  从文件中删除不需要的“META”数据。
3.  加载到 Excel 中。
4.  从磁盘中删除本地副本。

当然，他们也可以访问网络上的文件，但他们应该更难找到。

# c# - 不清楚使用 C# 管理 XML 结构

> ID：12457377
> 
> 赞同：0
> 
> 时间：2012-09-17T10:26:37.910
> 
> 标签：c#, xml

我正在尝试创建一个 XML 结构（不是读/写文件，只有逻辑部分）。我真的很困惑如何去做以及有什么用。在互联网上查看后，我看到了两个候选类：`XmlDocument`和`XDocument`（及其对节点、元素、属性等的相应引用）。

一个必须被弃用，但我检查了最近的帖子（2010 年甚至 2011 年），他们仍然建议使用这两种变体的代码。此外，谷歌检查`XDocument`只给出了所`XmlDocument`带来的点击率的一小部分。

整理完这部分后，我看到了许多不同的示例，这些示例说明了如何组成一个**非常简单**的XML 结构。我想这种方法取决于建议它的人的能力水平，所以我直接问 - 使用什么类和语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:29:45.030

有两种构建 XML 文档的方法：使用将整个文档保存在内存中的类或单向 XML 编写器。

*   [XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)是构建适合内存的 XML 文档的推荐方法。它不适合非常大的 XML 文件。`XmlDocument`尚未标记为已弃用，但我怀疑它可能会出现在框架的未来版本中。

*   另一方面，[XmlWriter适合构建无法放入内存的大型 XML 文档。](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)与此相反，`XDocument`这是一个单向写入器，一旦写入节点，您就不能再返回并修改它。

还有第三种构建 XML 文档的方法，它属于第一类，它是通过 .NET 类型的 XML 序列化。有几个类可以让您实现这一点，例如[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)和[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:30:04.757

性能有差异！

读取[性能：LINQ to XML vs XmlDocument vs XmlReader](http://www.nearinfinity.com/blogs/joe_ferner/performance_linq_to_sql_vs.html)

Linq to XML 比 XmlDocument 更快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:33:40.697

几周前我遇到了同样的问题。显然，您不能相信数字 -`XmlDocument`大约是计数命中的 20 倍，`XDocument` **但**前者已被弃用，而后者将被使用。

至于对这种现象的解释，我假设大量代码是使用已弃用的类创建的（按照那个时期的标准，使用它们**非常**方便）。多年后，人们在使用“什么是有效的”时没有意识到有一个“新来的孩子”。

这是一个关于如何创建逻辑 XML 结构的简单示例。

```
XDocument xml = new XDocument(
  new XElement("main",
    new XElement("first", "---"),
    new XElement("second",
      new XElement("first sub", "---"),
      new XElement("second sub", "---"))
)); 
```

更多关于这个主题的内容可以在[这里](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)阅读。

# jquery-plugins - AJAX 验证不适用于 struts2 Jquery 插件

> ID：12457378
> 
> 赞同：0
> 
> 时间：2012-09-17T10:26:37.847
> 
> 标签：jquery-plugins, struts2

我正在用 struts2 + Jquery 插件编写一个 Web 应用程序。
我正在使用带有 sj:submit 来自 jquery 插件的标签的 AJAX 表单提交。在 sj:submit 中使用“validate=true”标签验证表单 (AJAX) 时遇到问题。以下是 sj:submit 标记：

```
<sj:submit value="ADDUSERNOW" onBeforeTopics="before" onSuccessTopics="success" 
    onErrorTopics="errorState" onCompleteTopics="complete" targets="userMgmntDiv" validate="true"/> 
```

我的 html 头部分还包含对验证所需的两个 js 文件的引用，如下所示。

```
<script language="JavaScript" src="${pageContext.request.contextPath}/struts/utils.js" type="text/javascript"></script>
        <script language="JavaScript" src="${pageContext.request.contextPath}/struts/xhtml/validation.js" type="text/javascript"></script> 
```

下面给出了验证 xml，它被命名为 ActionClass-validation.xml，它与调用验证的类放在同一个包中：

```
 <validators>
            <field name="userModel.userName">
                <field-validator type="requiredstring">
                    <message>UserName Is Required</message>
                </field-validator>
            </field>
        </validators> 
```

提交表单后，不会触发验证，继续执行并调用 struts2 动作类。
我在这里有什么遗漏吗？我搜索了很多，但找不到任何答案。请帮助
struts2-core 版本：2.3.4 struts2-jquery-plugin：3.3.3 动作配置如下所示：

```
<action class="addUserAction" method="addUser">
    <interceptor-ref name="jsonValidationWorkflowStack"/>
    <result>addUser.jsp</result>
</action> 
```

除了上述之外，我使用 spring + struts2 + hibernate 来完成上述任务。当我尝试 struts2-jason wiki 页面中所示的示例时：，我收到错误：找不到名为 AddUserAction 的类的操作（这是一个spring-beans.xml 中的 bean）似乎在调用验证器拦截器时引发了错误。当我注释掉用于验证操作类的注释时 - AddUserAction，此错误消失并且页面加载成功。以下是我的问题： 1）如何使用 spring 和 struts2 约定插件？这是因为，约定插件使用自己的机制来映射 url 和操作（使用注释或默认行为）。2)Prevuosly，我期待 struts.xml 文件可用于 url 到操作的映射，注释可用于验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:09:13.647

struts2`ajax validation`是一个客户端验证，由 dojo 原生提供，这里是[Struts2 Ajax 验证](http://struts.apache.org/2.x/docs/ajax-validation.html)的文档。`struts2-jquery plugin`使用 提供此功能`jsonValidationWorkflowStack`，您可以像这样使用它：[示例](http://code.google.com/p/struts2-jquery/wiki/Validation)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T11:33:46.780

我试过了。它工作得很好。但是，如果您的表单有要上传的输入文件，则 ajax 验证不起作用。

# mysql - 导入的 drupal 节点的批量更新文本格式

> ID：12457380
> 
> 赞同：0
> 
> 时间：2012-09-17T10:26:43.073
> 
> 标签：mysql, drupal-7, drupal-schema

我一直在迁移网站内容，但运气不佳：正在导入内容，但未显示正文。我只是尝试更改输入文本格式，现在显示内容。（我猜这些是原始值。）

我尝试用谷歌搜索 MySQL 命令来批量更新输入类型，但从 Drupal 6 开始似乎都已经过时了。

任何人都可以帮助更新 Drupal 7 上的所有输入类型的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:20:39.443

如果您使用 Drupal 7，我强烈建议您从 drupal.org 下载 feed 模块并走这条路，因为这些帖子是作为博客条目导入的。现在，如果需要，您必须进入内容并将文本格式从过滤后的 HTML 更改为完整格式，如果您安装了 Organic Groups，则将它们放入组中。然而，饲料导入非常简单。如果您从 WordPress 导入，则使用 Wordpress 迁移工具会更容易，它将依赖于 migrate 模块和 migrate extras 模块。

# c++ - c++动态引用函数指针

> ID：12457382
> 
> 赞同：0
> 
> 时间：2012-09-17T10:26:53.630
> 
> 标签：c++

我有一个应用程序要完成以下任务

```
1.) UI application will send command code (integer value).
2.) DLL interface(in c++) will get that integer value and execute corresponding command function. 
```

命令名称和命令代码保持为

```
#define PING 50 
```

将有 500 个命令，应用 SWITCH CASE 听起来不太好。所以我决定在我的代码中实现函数指针，如下所示

```
 #include "stdafx.h"

    #include<iostream>
    #define PING 20

    using namespace std;
    //extern const int PING = 10; 
    void ping()
    { 
                    cout<<"ping command executed";
    }

    void get_status(void)
    {

    cout<<"Get_status called"<<endl;

    }

    class ToDoCommands
    {
            public:
                void getCommand( void (*CommandToCall)() );                         
    };

    void ToDoCommands::getCommand( void (*CommandToCall)())
    {

        void (*CommandToCall1)();

        CommandToCall1  = CommandToCall;

        CommandToCall1();

    }

    int main()
    {
            int code;
            ToDoCommands obj;
            cout<<"enter command code";
            cin>>code;  // if UI send 50 then Ping function get executed as #define PING 50

            obj.getCommand(ping);   // here m passing ping manually..
            //obj.getCommand(get_status);

                return 0;
    } 
```

我如何传递与命令代码对应的命令名称

```
obj.getCommand(ping); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:32:34.330

你快到了：制作一个to 函数指针，使用将字符串名称与相应函数指针配对的数据对其`std::map`进行`std::string`初始化，然后在运行时使用该映射根据传入的字符串参数选择正确的指针。

```
#include <iostream>
#include <string>
#include <map>

using namespace std;

void ping() {
    cout << "ping" << endl;
}
void test() {
    cout << "test" << endl;
}
int main() {
    map<string,void(*)()> m;
    m["ping"] = ping;
    m["test"] = test;
    // I am using hard-coded constants below.
    // In your case, strings will come from command line args
    m["test"]();
    m["ping"]();
    return 0;
} 
```

[链接到演示`std::map`。](http://ideone.com/clone/75RXr)

这是没有 a 的`map`方法（由于线性搜索，它会变慢，但您可以通过按字母顺序排列名称并使用二进制搜索来修复它）。

```
#include <iostream>
#include <cstring>

using namespace std;

void ping() {
    cout << "ping" << endl;
}
void test() {
    cout << "test" << endl;
}
typedef void (*fptr_t)();
int main() {
    const fptr_t fptrs[] = {test, ping};
    const char *names[] = {"test", "ping"};
    const char *fname = "test";
    for (int i = 0 ; i != 2 ; i++) {
        if (!strcmp(fname, names[i])) {
            fptrs[i]();
            break;
        }
    }
    return 0;
} 
```

[链接到带有数组的演示。](http://ideone.com/clone/4afyY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:43:13.230

我应该说@dasblinkenlight 是对的，但如果你不想使用 std::map 你应该自己实现一个地图。这可能是错误的并且不是优化的方式，但是如果您不想使用 STL，似乎您应该自己实现它。

您可以使用 2 个具有相应索引的数组。其中一个是`char *`数组，另一个是函数指针。最好将它们封装在一个名为 MyMap 的类中。

```
class MyMap {
  public:
    ...

    inline void add(char *name, (void (*ptr)(void)) ) {
      names_[currIndex_] = name; // Or stcpy
      ptrs_[currIndex_] = ptr;
      currIndex_++;
    }

    inline (void(*)(void)) get(char *name) {
      int foundIndex = -1;
      for (int i = 0; i < currIndex_; i++) {
        // Find matching index
      }
      if (foundIndex_ >= 0) {
        return ptrs_[foundIndex_];
      }
      return NULL;
    }

  private:
    int currIndex_;
    char *names_[10];
    (void (*ptrs_[10])(void));
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:46:28.367

声明一个函数指针数组。您将索引视为“代码”的位置。例如：

```
void foo(){
    printf("foo\n");
}

void bar(){
    printf("bar\n");
}

int main(void)
{
    void (*code_to_function[100])();
    int code;

    code_to_function[0] = foo;
    code_to_function[1] = bar;
    printf("Enter code: ");
    scanf("%d", &code);
    code_to_function[code]();

    return 0;
} 
```

请注意，对于这个基本示例，输入 0 和 1 以外的整数代码将导致段错误。

# jquery-ui - 仅在使用 alert() 时设置值

> ID：12457385
> 
> 赞同：0
> 
> 时间：2012-09-17T10:27:11.840
> 
> 标签：jquery-ui, jquery-post, jquery

所以我有下面的代码。Holder1/Holder2 只是为了查看将值设置为变量是否有效

```
jQuery.each(substr, function() {
 if ($('div#'+this+' div.widgetcontent iframe').attr("src")!=undefined) {
    //alert('Widget iFrame: '+$('div#'+this+' div.widgetcontent iframe').attr("src"));
    //alert('Report URL: '+$('div#'+this+' div.widgetcontent iframe').contents().find('iframe').attr("src"));
    var holder1 = 'Widget iFrame: '+$('div#'+this+' div.widgetcontent iframe').attr("src");
    var holder2 = 'Report URL: '+$('div#'+this+' div.widgetcontent iframe').contents().find('iframe').attr("src");
    $.post("functions/process.asp", 
    { 
        widget: $('div#'+this+' div.widgetcontent iframe').attr("src"), 
        iframe: $('div#'+this+' div.widgetcontent iframe').contents().find('iframe').attr("src")
    } 
    , function(data) {
    alert("Data Loaded: " + data);
     }
);
} 
```

但是 iframe 值未发布。但是，如果我要使用以下内容，而不是使用 holder1/holder2，则一切正常

```
alert('Widget iFrame: '+$('div#'+this+' div.widgetcontent iframe').attr("src"));
alert('Report URL: '+$('div#'+this+' div.widgetcontent iframe').contents().find('iframe').attr("src")); 
```

显然我不希望它每次都发出警报，所以想知道发生了什么？

我基本上实现了一个仪表板，人们可以在其中添加小部件，然后向上或向下移动它们。默认情况下有一个。如果我添加另一个（成为第二个）然后将其移动到第一个位置，它会给出一个空白值。如果我将它移回第二个，它会起作用。

[编辑]

事实上，如果我只是使用`alert('');`它就可以了！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:31:03.140

我认为，问题在于您在 ajax 请求中使用了“this”。尝试将其保存到变量之前并使用它

```
jQuery.each(substr, function() {
var myobject=this;
        if ($('div#'+myobject+' div.widgetcontent iframe').attr("src")!=undefined) {
            var holder1 = 'Widget iFrame: '+$('div#'+myobject+' div.widgetcontent iframe').attr("src");
            var holder2 = 'Report URL: '+$('div#'+myobject+' div.widgetcontent iframe').contents().find('iframe').attr("src");

            $.post("functions/process.asp", 
            { 
            widget: $('div#'+myobject+' div.widgetcontent iframe').attr("src"), 
            iframe: $('div#'+myobject+' div.widgetcontent iframe').contents().find('iframe').attr("src")
            } 
            , function(data) {
                alert("Data Loaded: " + data);
             }
             );
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T15:06:31.663

我在 1 秒后立即延迟`stop: function(event, ui) {`，这似乎对其进行了排序

# c# - 在具有不同大小的网格中定位图像 - 有些溢出到其他单元格中

> ID：12457386
> 
> 赞同：0
> 
> 时间：2012-09-17T10:27:25.943
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我有一个`Grid`可以容纳四个图像的。图像本身大小相同，但图像的视觉部分可以/将不同（因此部分图像将是透明的）。

我希望图像的透明部分溢出到网格的其他单元格中。

我也在网格上进行了测试。一个用于指针悬停，一个用于按下。

如何在网格中获取这些图像并保持溢出以及命中测试？

到目前为止，我的解决方案是有 9 列，然后：

*   第一张图像采用第 0 到第 2 列，
*   第二张图像需要 2 到 4，
*   第三张图片4到6，
*   第 4 张图像需要 6 到 8 张。

这样图像就会溢出。但问题是，当添加每个后续图像时，它会位于共享列的顶部，因此任何鼠标悬停都会随之而来。

在 WPF 中，您可以派生自`Image`重写`HitTestCore`；使用 Metro，您无法做到这一点。我的计划是只测试非透明像素。

如果我可以对命中测试进行排序，我就可以让这个方法发挥作用。虽然如果有另一个/更好的解决方案，我全神贯注？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:45:47.643

我采用的解决方案是将包含所有图像的网格与另一个包含我想要大小的矩形的网格重叠。然后我可以使用矩形作为命中测试，而不是底层图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:55:06.427

根据Metro Style Apps 的[Microsoft 文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh994936.aspx)：

> 无论透明内容如何，​​Image 和 MediaElement 控件都可以在其定义的矩形上进行命中测试。

因此，我认为 Metro 无法以这种方式实现。请注意，我之前的评论（Canvas）似乎也不起作用（关于下面的链接）。

# atk4 - 如何计算模型保存钩子上的一些字段值并将其存储在数据库中？

> ID：12457390
> 
> 赞同：1
> 
> 时间：2012-09-17T10:27:34.913
> 
> 标签：atk4, php

我想要完成的是以下内容。

我需要在数据库中保存一些字段，该字段的值应使用其模型（或相关模型）中的其他值自动计算。我想我应该使用这些模型钩子之一来做到这一点——beforeInsert、beforeModify、afterInsert、afterModify，但我应该怎么做呢？此外，此字段不应更改，但在 UI 表单/网格中可见。

例如，

```
class Model_Address extends Model_Table{
  public $table='address';
  function init(){
    parent::init();

    $this->hasOne('Territory');
    $this->addField('street');
    $this->addField('house');
    $this->addField('number');
    $this->addField('name')->readonly(true); // this should be calculated on save

    $this->addHook('beforeModify',$this);
  }

  // How to write this to set name=street+house+number+territory.name ???
  function beforeModify($m){
    $ter_name = $m->ref('Territory')->get('name');
    $m['name'] = $m['street'].' '.$m['house'].' '.$m['number'].', '.$ter_name;
    return $m;
  }
} 
```

* * *

编辑：

这个解决方案会正确吗？看起来它正在工作，但我还不确定。

```
class Model_Address extends Model_Table{
  public $table='address';
  function init(){
    parent::init();

    $this->hasOne('Territory');
    $this->addField('street');
    $this->addField('house');
    $this->addField('number');
    $this->addField('name')->readonly(true); // this should be calculated on save

    $this->addHook('beforeSave',$this);
  }

  function beforeSave($m){
    $t=$m->ref('territory_id');
    if($t->loaded()){
      $m=set('name',$m->get('street').' '.$m->get('house').' '.$m->get('number').', '.$t->get('name'));
    }
    return $this;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:41:36.680

这看起来是一个正确的解决方案。至少其中一个:)

```
class Model_Address extends Model_Table{
  public $table='address';
  function init(){
    parent::init();

    $this->hasOne('Territory');
    $this->addField('street');
    $this->addField('house');
    $this->addField('number');
    $this->addField('name')->readonly(true); // this should be calculated on save

    $this->addHook('beforeSave',$this);
  }

  function beforeSave($m){
    $t=$m->ref('territory_id');
    if($t->loaded()){
      $m=set('name',$m->get('street').' '.$m->get('house').' '.$m->get('number').', '.$t->get('name'));
    }
    return $this;
  }
} 
```

我也可以使用 afterLoad 钩子，但我决定更好地将这个连接值保存在数据库中，以最大限度地减少加载时间计算。

此外，当您使用 afterLoad 钩子时，您应该知道它使用延迟加载。也就是说，它只加载这些被询问的模型字段，而不是全部。

例如，如果您的网格仅包含街道、房屋和名称列，则 afterLoad 将仅加载这三个字段。Flat，territory_id 和 number 无论如何都是空的。因此，所需的功能不会完全以这种方式工作。同样适用于使用 addExpression + 回调字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:22:53.067

在以前的版本（4.1）中，钩子已经在框架中，并且函数在调用时什么也不做，除非您在模型中覆盖它们。

我假设这在 4.2 中是相同的，beforeModify、beforeInsert 和 beforeDelete 只需要在模型中定义并在其中添加您需要的任何逻辑 - 这包括添加可能具有计算字段或 php 的其他模型来执行一些 calcs 和 dsql 语句填充。

# ruby-on-rails - 我用过 before_filter :authenticate_user！在我的控制器中，如何以 json 格式获取数据

> ID：12457394
> 
> 赞同：1
> 
> 时间：2012-09-17T10:27:49.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我用过 before_filter :authenticate_user！在我的控制器中，如果我删除它并给出

`curl -H 'Content-Type: application/json' -H 'Accept: application/json' -X GET http://localhost:3000/posts`

然后我看到 json 数据。那么我该如何使用 before_filter :authenticate_user！以使其安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:43:01.183

您可以对 JSON 请求使用[基本身份验证](http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html)，因此身份验证凭据可以包含在 http 标头中。

# android - 从 ImageView 中删除可点击性

> ID：12457395
> 
> 赞同：0
> 
> 时间：2012-09-17T10:27:51.090
> 
> 标签：android, imageview, touch-event

我有一个`ListView`，我希望它在顶部和底部都有阴影。为此，我覆盖了两个`ImageView`包含阴影图像的 -s。`ListView`问题是，当您尝试从顶部或底部开始滚动时，它们会接收触摸事件并且不会滚动。我尝试将`enabled`、`focusable`和properties 设置为 false `clickable`，`longClickable`但这似乎没有奏效。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:32:28.563

设置 imageview focusable="false" 并设置 clickable="false" 应该可以

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:31:47.143

您可以使用 listView.setClickable(false)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:35:06.000

你不能将阴影的图像设置为listView的背景吗？尝试这样的事情：

```
<ListView
...
android:backgroung="@drawable/shadow" 
android:cacheColorHint="#00000000" 
>
...
</ListView> 
```

# python - 使用 elementtree 处理后，XML 标头被删除

> ID：12457400
> 
> 赞同：6
> 
> 时间：2012-09-17T10:27:57.970
> 
> 标签：python, elementtree

我有一个xml文件，我使用Elementtree在xml文件中添加了一个新标签。我处理前的xml文件如下

```
<?xml version="1.0" encoding="utf-8"?>

<PackageInfo xmlns="http://someurlpackage">

<data ID="http://someurldata1">data1</data >
<data ID="http://someurldata2">data2</data >
<data ID="http://someurldata3">data3</data >
</PackageInfo> 
```

我使用以下 python 代码添加新的数据标签并将其写入我的 xml 文件

```
 tree = ET.ElementTree(xmlFile)
 root = tree.getroot()
 elem= ET.Element('data')
 elem.attrib['ID']="http://someurldata4"
 elem.text='data4'
 root[1].append(elem)
 tree = ET.ElementTree(root)
 tree.write(xmlFile) 
```

但生成的 xml 文件`<?xml version="1.0" encoding="utf-8"?>`不存在，文件如下所示

```
<PackageInfo xmlns="http://someurlpackage">
<data ID="http://someurldata1">data1</data >
<data ID="http://someurldata2">data2</data >
<data ID="http://someurldata3">data3</data >
</PackageInfo> 
```

有什么方法可以包含 xml 标头而不是硬编码该行

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T10:33:59.390

看起来您需要`write`方法的可选参数来输出声明。

[http://docs.python.org/library/xml.etree.elementtree.html#elementtree-elementtree-objects](http://docs.python.org/library/xml.etree.elementtree.html#elementtree-elementtree-objects)

```
tree.write(xmlfile,xml_declaration=True) 
```

* * *

恐怕我不太熟悉，`xml.etree.ElementTree`它是 python 版本之间的变化。

这是它的工作原理`lxml.etree`：

```
>>> from lxml import etree
>>> sample = """<?xml version="1.0" encoding="utf-8"?>
... <PackageInfo xmlns="http://someurlpackage">
... <data ID="http://someurldata1">data1</data >
... <data ID="http://someurldata2">data2</data >
... <data ID="http://someurldata3">data3</data >
... </PackageInfo>"""
>>>
>>> doc = etree.XML(sample)
>>> data = doc.makeelement("data")
>>> data.attrib['ID'] = 'http://someurldata4'
>>> data.text = 'data4'
>>> doc.append(data)
>>> etree.tostring(doc,xml_declaration=True)
'<?xml version=\'1.0\' encoding=\'ASCII\'?>\n<PackageInfo xmlns="http://someurlpackage">\n<data ID="http://someurldata1">data1</data>\n<data ID="http://someurldata2">data2</data>\n<data ID="http://someurldata3">data3</data>\n<data ID="http://someurldata4">data4</data></PackageInfo>'
>>> etree.tostring(doc,xml_declaration=True,encoding='utf-8')
'<?xml version=\'1.0\' encoding=\'utf-8\'?>\n<PackageInfo xmlns="http://someurlpackage">\n<data ID="http://someurldata1">data1</data>\n<data ID="http://someurldata2">data2</data>\n<data ID="http://someurldata3">data3</data>\n<data ID="http://someurldata4">data4</data></PackageInfo>' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T13:02:29.737

尝试这个：：：

```
tree.write(xmlFile, encoding="utf-8") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T06:52:14.130

如果您使用的是**python <=2.6** ElementTree.write()
中没有***xml_declaration参数***

```
def write(self, file, encoding="us-ascii"): 
def _write(self, file,node, encoding, namespaces): 
```

您可以在此处使用**lxml.etree**
[安装 lxml](http://lxml.de/installation.html)
示例：

```
from lxml import etree
document = etree.Element('outer')
node = etree.SubElement(document, 'inner')
print(etree.tostring(document, xml_declaration=True)) 
```

BTW：
我发现不需要写xml_declaration
[XML声明节点是强制性的吗？](https://stackoverflow.com/questions/4679136/is-the-xml-declaration-node-mandatory)

> 成功读取文档不需要 XML 声明，因为版本和编码（分别为 1.0 和 UTF-8）都有默认值。

至少，即使 AndroidManifest.xml 没有
我尝试过的 xml_declaration，它也可以工作:-)

# visual-c++ - regsvr32 在 clsid 下创建条目失败

> ID：12457406
> 
> 赞同：1
> 
> 时间：2012-09-17T10:28:32.477
> 
> 标签：visual-c++

我有一个 VC++ dll，我想在我的 32 位 Windows 7 机器上注册`regsvr32.exe`，但是我有一些问题。

当我用 注册我的 DLL 时`regsvr32.exe`，它显示注册成功，但是当我检查 中的条目时`regedit`， 中没有条目`Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID`。

`Computer\HKEY_LOCAL_MACHINE\TypeLib`项目中`guid`提到的只有一个条目。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:36:43.473

您是否在管理员命令提示符下运行？如果没有，那么注册可能会成功，但它实际上已被虚拟化到您的用户区域。[查看虚拟化文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)中提到的位置，您可能会在那里看到 CLSID。如果您从管理员命令提示符运行，那么它应该出现在正确的位置。

# asp.net - 将文件上传控件中的 CSV 直接插入内存流，无需物理路径

> ID：12457407
> 
> 赞同：3
> 
> 时间：2012-09-17T10:28:32.293
> 
> 标签：asp.net, csv, memorystream

我不确定这是否可能，所以很高兴能得到一些帮助。

我想要做的是使用 asp.net 中的文件上传控件来选择一个 csv 文件。然后使用页面上的提交按钮运行我的服务器端代码，该代码将获取该 csv 文件并将其放入内存流中，在那里将对其进行解析，然后将其添加到集合对象中。

我确实知道将 csv 文件保存到物理路径然后在删除文件的地方进行某种清理会更容易，但如果可能的话，我想这样做。

到目前为止，请参见下面的代码：

```
protected void btnUpload_Click(object sender, EventArgs e)
    {
        string connectingString = "";
        if (ctrlFileUpload.HasFile)
        {
            string fileName =
                Path.GetFileName(ctrlFileUpload.PostedFile.FileName);

            string fileExtension =
                Path.GetExtension(ctrlFileUpload.PostedFile.FileName);

            ReadCsv(fileName);
        }
    }

protected void ReadCsv(string fileName)
    {
        // Some logic for parsing csv file in memory stream
    }
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T14:41:10.103

我知道这是一个老问题，但下面的代码可以使用 a 将您发布的文本文件读入内存流`StreamReader`，并且与 .NET 4.0 兼容：

```
protected void ReadCsv()
{
    StreamReader reader = new StreamReader(ctrlFileUpload.PostedFile.InputStream);
    string content = reader.ReadToEnd();
} 
```

请注意，仅当服务器上有足够的内存来同时为多个用户处理较大的文件时，此方法才有效。如果您有数百个用户同时将文件发布到内存流并由于可用内存不足而导致服务器崩溃，您不希望使用这种方法。如果您在共享托管环境中，您还需要检查这是否是可接受的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:32:55.597

这有帮助吗？

这应该给你流。因此，您可以让您的`ReadCsv`方法接受对流的引用，并将其传递给它而不是文件名，然后对流进行处理。

[MSDN FileUpload.FileContent 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.filecontent.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T06:13:31.767

//尝试下面一种从FileUpload Control捕获MemoryStream中的数据

```
 protected void btnFileUpload_Click(object sender, EventArgs e)
    {
        if (FileUploadControl.HasFile)
        {
            try
            {                 
                #region Capture file data in Memory Stream

                byte[] fileData = null;
                Stream fileStream = null;
                int length = 0;

                length = FileUploadControl.PostedFile.ContentLength;
                fileData = new byte[length + 1];
                fileStream = FileUploadControl.PostedFile.InputStream;
                fileStream.Read(fileData, 0, length);

                //Use MemoryStream to capture file data
                MemoryStream stream = new MemoryStream(fileData);

                Session["FileUploaded"] = stream;

                #endregion

                StreamReader strFile;                 

                using (strFile = new StreamReader(stream))
                {
                    string line;
                    DataTable dtStudentData = CreateDataTable();
                    DataRow drStudentRow;
                    List<String> errorMessages = new List<String>();
                    // Read and display lines from the file until the end of the file is reached. 
                    while ((line = strFile.ReadLine()) != null)
                    {
                        if (line.Trim().Length > 0)
                        {
                            System.Threading.Thread.Sleep(1000);
                            string[] columns = line.Split('\t'); //splitting the line which was read by the stream reader object                                  

                            Int32 charpos = (Int32)strFile.GetType().InvokeMember("charPos", BindingFlags.DeclaredOnly | BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.GetField, null, strFile, null);

                            Int32 charlen = (Int32)strFile.GetType().InvokeMember("charLen",
                            BindingFlags.DeclaredOnly |
                            BindingFlags.Public | BindingFlags.NonPublic |
                            BindingFlags.Instance | BindingFlags.GetField
                             , null, strFile, null);

                            int lineno = (Int32)strFile.BaseStream.Position - charlen + charpos;                                

                            //Add data row in Data Table
                            drStudentRow = dtStudentData.NewRow();  
                            // TO DO code - Fill data table
                            dtStudentData.Rows.Add(drStudentRow);
                        }                            
                    }
                    strFile.Dispose();
                    dtStudentData.Rows.RemoveAt(0); //Remove the first column since its the column name not necessary to insert in the database table
                    PopulateStudentInvalidDataGridView(dtStudentData);    // Bind Grid                    
                    Session["StudentData_FileParsedStudentRegistrtaionTable"] = dtStudentData;
                    strFile.Close(); //release the stream reader                        
                }
            }
            catch (Exception ex)
            {
                String error = ex.Message;
            }
        }
    } 
```

# database - 针对点击记录报告的适当数据库的建议

> ID：12457408
> 
> 赞同：0
> 
> 时间：2012-09-17T10:28:32.933
> 
> 标签：database, architecture, amazon-simpledb, amazon-dynamodb

我即将建立一个记录电子商务网站点击和交易的服务。我希望每月记录数百万次点击。

我将使用它来运行报告以评估营销工作和网站使用情况（类似于 Google Analytics*）。我需要能够进行查询，例如畅销产品、点击次数最多的类别、平均利润率等。

*由于某些操作会在以后发生，并且离线 GA 并不能满足我们的所有需求。

报告系统不会有很大的负担，它只会在内部使用。

我的计划是将可记录的操作放在一个队列中，并让一个单独的系统将这些操作存储到数据库中。

我的问题是我应该为此使用什么数据库。由于公司 IT 政策，我只有这些选项；SimpleDB (AWS)、DynamoDB (AWS) 或 MS SQL/My SQL

提前致谢！

最好的祝福，

弗雷德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:09:04.780

你检查过这个优秀的亚马逊文档页面吗？[http://aws.amazon.com/running_databases/](http://aws.amazon.com/running_databases/)它有助于从他们的产品中挑选最好的数据库。

根据我的经验，我建议您不要**为此目的使用 DynamoDB**。没有真正的`select`等价物，您将很难对数据进行建模。这是可行的，但不是微不足道的。

另一方面，**SimpleDB 提供了一种`select`**可以大大简化模型的**操作。**尽管如此，建议不要超过 10GB：[http ://aws.amazon.com/running_databases/](http://aws.amazon.com/running_databases/)

对于最后的选择，RDS，我认为你可以用它做几乎所有事情。

# javascript - 如何在页面加载后立即调用 javascript 方法

> ID：12457409
> 
> 赞同：2
> 
> 时间：2012-09-17T10:28:34.603
> 
> 标签：javascript, jsp

> **可能重复：**
> [页面加载后执行的 Javascript](https://stackoverflow.com/questions/807878/javascript-that-executes-after-page-load)

如何在页面加载后立即调用 javascript 方法。

我有一个需要在加载 jsp 页面后立即调用的 java 脚本，如何在 javascript 中实现这一点。

你们中的任何人都可以帮我吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:34:15.570

您可以编写如下代码片段：-

```
window.onload(function(){
//Your JavaScript here
}); 
```

如果使用 JQuery 那么

```
document.ready(function(){
//Your JavaScript Here
}); 
```

或者您可以在所有 HTML 之后拥有所有 JS。

您甚至可以使用一个名为 :--

```
document.onload(function(){
//Your code Here
}); 
```

最后但并非最不重要的是，您甚至可以尝试一下

```
 <body onload="YourJSMethod();">
        <!-- Some html content -->
    </body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:29:43.667

你可以试试

```
<body onload="someMethod();">
    <!-- Some html content -->
</body> 
```

这将在加载页面的正文标记后立即调用您的方法。或者，您可以使用 jquery 的文档就绪功能。

```
$(document).ready(function() { 
    // your code 
}); 
```

# .net - 使用 Microsoft Dynamics RMS 的 POS UI 的 WinForm 与 WPF

> ID：12457417
> 
> 赞同：0
> 
> 时间：2012-09-17T10:29:05.740
> 
> 标签：.net, wpf, winforms, rms

**微软动态 RMS**

我正在处理 AddIn 创建和自定义 POS 按钮（即自定义）。

对于开发，我主要使用类库类型的项目，创建的 dll 是从 POS 机 (RMS) 调用的。我在我的应用程序中使用了其他 .NET 对象，但所有对象都是通过这个类库调用的。

我只是想知道：

*   我们可以为 UI 使用 WPF 而不是为 POS UI 使用 WinForms 吗？

请详细说明并讨论我们使用这种方法可能面临的任何问题。

# android - 拨打电话并将应用程序放在前面，Android

> ID：12457418
> 
> 赞同：0
> 
> 时间：2012-09-17T10:29:07.090
> 
> 标签：android, call

首先，对不起，我不是以英语为母语的人。

我想只用一个按钮制作和应用程序，当您按下它时拨打电话，但通话必须在后台进行，因为我希望始终保持我的应用程序的屏幕可见。我该怎么做？

我尝试使用 phoneStateListener 但我无法获得预期的结果，因为有时屏幕会关闭并且应用程序无法正确重新启动......

如果我可以在我的应用程序中制作一个按钮来完成通话，我会很惊讶，但这是可选的

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:38:08.683

由于 Android 安全政策，您不能从您的应用中进行此类“隐形”调用

# jquery - .on() jQuery 1.7 和 1.8 的区别

> ID：12457421
> 
> 赞同：0
> 
> 时间：2012-09-17T10:29:21.167
> 
> 标签：jquery, events, jquery-mobile

也许这是一个太基本的问题，但是 jQuery 1.7+ 和 1.8+ 中的 .on() 事件绑定有什么区别？我的问题如下：

我正在使用 ASP MVC 3 和 jQuery Mobile 1.2 RC1 动态创建一个列表，并将单击事件绑定到 li 元素。如果我使用 jQuery 1.7+ 一切正常，但是当我使用 1.8+ 时，单击事件仅在第一个 li 元素上触发。我已经检查了 jQuery 的文档，但实际上应该没有区别还是？

```
<ul data-role="listview" id="immo_list" data-inset="true" 
data-theme="c" data-dividertheme="b" data-filter="true">
  <%
      foreach (var immobilie in Model.immoObjekte)
                        {
  %>
      <li id="immos" val="<%: immobilie.id %>"> <a href="">
          <%: immobilie.strasse %> <%:immobilie.hausnummer%></a>
          <span class="ui-li-count"><%:immobilie.id%></span>
      </li> 
  <%
      }
  %>
  </ul>

$('#immo_list').on('click', '#immos', function () {
    $.mobile.loading('show');

    var immoid = $(this).attr('val');
    var days = $("#interval").val();

    sessionStorage.setItem("clicked", "false");
    sessionStorage.setItem("mode", "");

    sessionStorage.setItem("days", days);
    sessionStorage.setItem("immoid", immoid);

    getAndShowPflichten(immoid, days);

}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:33:08.920

您正在定义具有相同 ID 'immos' 的多个元素。HTML 文档中的每个元素都必须有一个明确的 ID。改用类，并使用类选择器。例如：

```
<li class="immos" ... 
```

和 JQuery 选择器：

```
$('#immo_list').on('click', '.immos', ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T10:33:56.813

您不能拥有多个具有相同 ID 的元素，它必须是唯一的。`#immos`改为上课。

jquery 1.8 包括一个新版本的 Sizzle，他们的选择器引擎。正如你所说的它在 1.7 中有效，我猜新版本在这个意义上更严格。出于性能原因，Sizzle 将在找到元素后立即停止搜索文档`#immos`，因为它希望它是唯一的。

# behat - 步骤 url 应与 Behat 匹配

> ID：12457422
> 
> 赞同：0
> 
> 时间：2012-09-17T10:29:24.843
> 
> 标签：behat, sahi, mink

我正在测试 Mink 的步骤：那么 url 应该匹配“pattern”

我的网址有点像**“/test/34kUñlj”**，这是一个 _blank 目标。这意味着当我点击一个链接时，它会打开一个新窗口，并且 URL 是“/test/34kUñlj”。

我正在使用**sahi**驱动程序。/test/ 之后的模式是随机散列。

第一个问题是：**url应该匹配**的步骤被标记为未定义。我查看了 Mink 的 api，发现这一步不是“”，所以我尝试了这个：**然后 url 应该匹配 /test/ñljñl23**并且仍然将其标记为未定义。

第二个：为什么我跟着打开的新窗口？

最后：该网址“/test/342lñasjf”的模式如何。我使用“/test/\d+”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:29:28.090

a) 貂步骤是用“”定义的，所以你应该使用 Then the url should match "url"

b）您的意思是“我如何关注打开的新窗口？”。如果这就是你的意思，那是做不到的。这是用 sahi 测试的一个问题：当你打开另一个窗口时，Mink 不会跟踪这个，Mink 看到的 url 是原始窗口中的那个。我在类似情况下所做的是，如果环境是“测试”，那么我不会添加“_blank”目标，以便它在同一个窗口中打开。不是一个完美的解决方案，我知道

c) 步骤应该是

```
Then the url should match "/test/\w+" 
```

不是 "/test/\d+" 因为这只匹配数字

# svn - CCnet 电子邮件发布者用户名区分大小写

> ID：12457428
> 
> 赞同：1
> 
> 时间：2012-09-17T10:29:54.770
> 
> 标签：svn, email, configuration, cruisecontrol.net, case-sensitive

我使用 CCnet 1.6.7981 和 SVN 的电子邮件发布者作为版本控制系统。我的问题是 SVN 用户名不区分大小写，但 CCnet 电子邮件发布者是。所以我在我的配置中使用了一个肮脏的解决方法，因为每个人都有一个 3 个字母的用户名：

```
<email from="ccnet@domain.com" mailhost="..." includeDetails="TRUE">
    <users>
        <user name="abc" address="ABCforename.surname@domain.com" />
        <user name="Abc" address="ABCforename.surname@domain.com" />
        <user name="ABc" address="ABCforename.surname@domain.com" />
        <user name="ABC" address="ABCforename.surname@domain.com" />

        <user name="def" address="DEFforename.surname@domain.com" />
        <user name="Def" address="DEFforename.surname@domain.com" />
        <user name="DEf" address="DEFforename.surname@domain.com" />
        <user name="DEF" address="DEFforename.surname@domain.com" />
    </users>
    <modifierNotificationTypes>
        <NotificationType>Failed</NotificationType>
        <NotificationType>Fixed</NotificationType>
        <NotificationType>Exception</NotificationType>
    </modifierNotificationTypes>
</email> 
```

这类问题有一个巧妙的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:00:39.287

您可以使用转换器元素 [http://www.cruisecontrolnet.org/projects/ccnet/wiki/Email_Publisher](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Email_Publisher) 有一个 ldap 转换器和一个正则表达式转换器

# c# - 为什么这种使用条件运算符的方式会比正常的 if/else 提供更好的性能

> ID：12457432
> 
> 赞同：1
> 
> 时间：2012-09-17T10:30:19.047
> 
> 标签：c#

有 3 个代码做同样的事情，但是它们在 x64 版本中的性能不同。

我想这是因为**Branch Prediction**。任何人都可以进一步详细说明？

有条件的： **需要 41 毫秒**

```
for (int j = 0; j < 10000; j++)
{
    ret = (j * 11 / 3 % 5) + (ret % 11 == 4 ? 2 : 1);
} 
```

正常： **需要 51 毫秒**

```
for (int j = 0; j < 10000; j++)
{
    if (ret % 11 == 4)
    {
        ret = 2 + (j * 11 / 3 % 5);
    }
    else
    {
        ret = 1 + (j * 11 / 3 % 5);
    }
} 
```

缓存： **需要 44 毫秒**

```
for (int j = 0; j < 10000; j++)
{
    var tmp = j * 11 / 3 % 5;
    if (ret % 11 == 4)
    {
        ret = 2 + tmp;
    }
    else
    {
        ret = 1 + tmp;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:37:56.867

**编辑 3** 如果我在修复了时序错误的情况下返回原始测试，我会得到与此类似的输出。

> 有条件的耗时 67ms
> 
> 正常耗时 83ms
> 
> 缓存耗时 73ms

这表明三元/条件运算符在`for`循环中可以稍微快一些。鉴于先前的发现，当逻辑分支被抽象出循环时，该`if`块优于三元/条件运算符，我们可以推断，当迭代使用条件/三元运算符时，编译器能够进行额外的优化，至少在一些案例。

我不清楚为什么这些优化不适用于或不适用于标准`if`块。实际差异相当小，我认为这是一个有争议的问题。

**编辑 2**

[此处突出显示的测试代码中](https://stackoverflow.com/q/12462418/659190)有一个明显的错误

`Stopwatch`调用之间没有重置，当我使用而`Stopwatch.Restart`不是`Stopwatch.Start`迭代到 1000000000 时，我得到了结果

> 条件耗时 22404ms
> 
> 正常耗时 21403ms

这更像是我所期待的结果，并被提取的 CIL 所证实。因此，当与周围代码隔离时，“正常”`if`实际上比三元\条件运算符快一点。

**编辑**

经过下面概述的调查后，我建议使用逻辑条件在两个常量或文字之间进行选择时，条件/三元运算符可能~~比~~标准`if`块快得多。~~在我的测试中，它的速度大约是原来的两倍。~~

~~但是我不能完全弄清楚为什么。~~正常生成的 CIL`if`更长，但对于这两个函数，平均执行路径似乎是 6 行，包括 3 次加载和 1 或 2 次跳转~~，有什么想法吗？~~.

* * *

使用此代码，

```
using System.Diagnostics;

class Program
{
    static void Main()
    {
        var stopwatch = new Stopwatch();

        var conditional = Conditional(10);
        var normal = Normal(10);
        var cached = Cached(10);

        if (new[] { conditional, normal }.Any(x => x != cached))
        {
            throw new Exception();
        }

        stopwatch.Start();
        conditional = Conditional(10000000);
        stopWatch.Stop();
        Console.WriteLine(
            "Conditional took {0}ms", 
            stopwatch.ElapsedMilliseconds);

        ////stopwatch.Start(); incorrect
        stopwatch.Restart();
        normal = Normal(10000000);
        stopWatch.Stop();
        Console.WriteLine(
            "Normal took {0}ms", 
            stopwatch.ElapsedMilliseconds);

        ////stopwatch.Start(); incorrect
        stopwatch.Restart();
        cached = Cached(10000000);
        stopWatch.Stop();
        Console.WriteLine(
            "Cached took {0}ms", 
            stopwatch.ElapsedMilliseconds);

        if (new[] { conditional, normal }.Any(x => x != cached))
        {
            throw new Exception();
        }

        Console.ReadKey();
    }

    static int Conditional(int iterations)
    {
        var ret = 0;
        for (int j = 0; j < iterations; j++)
        {
            ret = (j * 11 / 3 % 5) + (ret % 11 == 4 ? 2 : 1);
        }

        return ret;
    }

    static int Normal(int iterations)
    {
        var ret = 0;
        for (int j = 0; j < iterations; j++)
        {
            if (ret % 11 == 4)
            {
                ret = 2 + (j * 11 / 3 % 5);
            }
            else
            {
                ret = 1 + (j * 11 / 3 % 5);
            }
        }

        return ret;
    }

    static int Cached(int iterations)
    {
        var ret = 0;
        for (int j = 0; j < iterations; j++)
        {
            var tmp = j * 11 / 3 % 5;
            if (ret % 11 == 4)
            {
                ret = 2 + tmp;
            }
            else
            {
                ret = 1 + tmp;
            }
        }

        return ret;
    }
} 
```

~~在 x64 发布模式下编译，经过优化，无需附加调试器即可运行。我得到这个输出，~~

 ~~> 有条件的耗时 65ms
> 
> 正常耗时 148ms
> 
> 缓存耗时 217ms~~ 

~~并且没有抛出异常。~~

* * *

使用 ILDASM 反汇编代码，我可以确认这三种方法的 CIL 不同，方法的代码`Conditional`稍微短一些。

* * *

要真正回答“为什么”的问题，我需要了解编译器的代码。我可能需要知道为什么编译器是这样写的。

* * *

~~您可以进一步~~分解它，以便您实际上只比较逻辑函数而忽略所有其他活动。

```
static int Conditional(bool condition, int value)
{
    return value + (condition ? 2 : 1);
}

static int Normal(bool condition, int value)
{
    if (condition)
    {
        return 2 + value;
    }

    return 1 + value;
} 
```

你可以用它迭代

```
static int Looper(int iterations, Func<bool, int, int> operation)
{
    var ret = 0;
    for (var j = 0; j < iterations; j++)
    {
        var condition = ret % 11 == 4;
        var value = ((j * 11) / 3) % 5;
        ret = operation(condition, value);
    }
} 
```

该测试仍然显示出性能差异**，但现在以另一种方式**简化了下面的 IL。

```
... Conditional ...
{
     : ldarg.1      // push second arg
     : ldarg.0      // push first arg
     : brtrue.s T   // if first arg is true jump to T
     : ldc.i4.1     // push int32(1)
     : br.s F       // jump to F
    T: ldc.i4.2     // push int32(2)
    F: add          // add either 1 or 2 to second arg
     : ret          // return result
}

... Normal ...
{
     : ldarg.0      // push first arg
     : brfalse.s F  // if first arg is false jump to F
     : ldc.i4.2     // push int32(2)
     : ldarg.1      // push second arg
     : add          // add second arg to 2
     : ret          // return result
    F: ldc.i4.1     // push int32(1)
     : ldarg.1      // push second arg
     : add          // add second arg to 1
     : ret          // return result
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:55:42.300

> 有 3 个代码做同样的事情，但是它们的性能不同

这并不奇怪，不是吗？写一些不同的东西，你会得到不同的时机。

> 我想这是因为分支预测。

这可以部分解释为什么第一个片段更快。但请注意，`?:`它仍在分支。
另一件需要注意的是，它只是一个大表达式，是优化器的理想领域。

问题是您不能像这样查看代码并得出某个运算符更快/更慢的结论。周围的代码至少同样重要。

# nutch - 稍后使用 Nutch 抓取重定向

> ID：12457444
> 
> 赞同：0
> 
> 时间：2012-09-17T10:31:21.263
> 
> 标签：nutch

nutch-default.xml 建议有一种方法可以在第一次爬网时保存重定向目标，并在下一次爬网时通过将其设置`http.redirect.max`为 0 来爬网。

第一次抓取成功完成，我们可以在存储的段中看到重定向响应。然后我们尝试更新爬网数据库以将重定向目标添加到下一个获取列表中，但我们无法将它们包含在内 - 获取列表似乎大部分是空的，只有几个 nutch 未能在第一次爬。

在解析/更新/生成期间是否需要提供参数/配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:15:37.020

必须增加[topN 参数](http://wiki.apache.org/nutch/NutchTutorial)，以便在fetchlist 中提取所有 url。第二轮的url选择是基于url的分数...我认为不能修改。

# php - 在 PHP 中查找创建的 PHP 进程的 PID

> ID：12457445
> 
> 赞同：0
> 
> 时间：2012-09-17T10:31:24.927
> 
> 标签：php, pid

我首先执行以下命令，

```
 $retVal = proc_close(proc_open("rfcomm connect \/dev\/rfcomm0 &> /dev/null 2> /dev/null &", array(), $pipe)); 
```

我必须在 proc_open 之后立即使用 proc_close，否则该命令会挂起我的 php 页面。稍后在我的脚本中，如果我试图找出这个后台进程的 PID，我只会收到我的 grep 请求：

```
$val = shell_exec("ps aux | grep rfcomm0"); 
```

它只返回我的 grep 命令的过程：

> www-数据 6412 0.0 0.3 2004 624 ? S 12:23 0:00 grep rfcomm0

现在，如果我从 shell_exec 将完全相同的命令输入到服务器上的 SSH 终端，我会得到以下信息：

```
www-data  6047  0.0  0.3   1752   592 ?        S    12:10   0:00 rfcomm connect /dev/rfcomm0 
root      6415  0.0  0.4   3532   804 pts/1    S+   12:27   0:00 grep rfcomm0 
```

第一个结果是我想要的 PID。PHP 是无法检索到自己进程的 PID 还是有其他方法可以解决这个谜团？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:37:57.713

您可以使用 proc_get_status 获取 PID ...

[http://php.net/manual/en/function.proc-get-status.php](http://php.net/manual/en/function.proc-get-status.php)

此函数返回一个数组，其中一个元素是 pid。它的输入参数是 proc_open 的返回 ...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-27T06:09:17.927

通过 usgin `proc_get_status()`，您可以`proc_open`从`pid`value 中获取进程 ID，并获取打开的命令进程 ID，即父 PID 的下一个数字（父 PID + 1）：

```
$desc = [
    ["pipe","r"],
    ["pipe","w"],
    ["pipe","w"],
    ];

$p = proc_open('php ./process.php', $desc, $pipes);
$s = proc_get_status($p);

$parentPID = $s['pid'];      // proc_open itself
$processPID = $s['pid'] + 1; // 'php ./process.php'

proc_close($p); 
```

# matlab - Matlab插值（interpn）忽略NaN的尺寸

> ID：12457446
> 
> 赞同：3
> 
> 时间：2012-09-17T10:31:25.537
> 
> 标签：matlab, nan, boundary, interpolation

> **可能重复：**
> [MATLAB：使用插值替换缺失值（NaN）](https://stackoverflow.com/questions/3628957/matlab-using-interpolation-to-replace-missing-values-nan)

我想使用 interpn 命令插入多个维度的数据。

问题是数据包含 NaN。因此，在某些维度上，阻止 matlab 插值的数据点少于 2 个。在这种情况下，我希望 interpn 返回一个 NaN 值。

示例：我的数据看起来有点像这样

```
 val(:,:,1) =
    -2.3810   -0.9365
     NaN   -0.6910

  val(:,:,2) =
    -2.3354   -0.9271
    NaN   -0.6859 
```

Matlab 在插值时会出错，因为一维中只有 NaN。我希望 matlab 忽略此错误，而是从 interpn 函数返回 NaN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:58:33.830

您可以引入寻找 NaN 的中间函数。

因此，您可以调用执行以下操作的函数，而不是调用 interpn：

如果 true 返回 NaN，则通过搜索`any(any(any(isnan(val)))`NaN，否则它会调用您的函数。

目前尚不清楚您是否需要整个 的 NaN`interpn`或仅用于特定的层/维度。如果是后者，如果您显示更多代码，我将不胜感激。

# android - 如何在 PC 上测试 android 应用程序

> ID：12457448
> 
> 赞同：1
> 
> 时间：2012-09-17T10:31:28.703
> 
> 标签：android, testing

我有一个使用 android eclipse 自己开发的应用程序（简单的计算应用程序）。它在我的系统上运行良好，我想在另一台 PC 上测试 apk 文件。但我不确切知道另一台PC的要求是什么，以及如何将我的apk文件添加到另一个系统进行测试。

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:35:04.617

将你的 android sdk 复制到另一台电脑中，然后使用 ADB 命令创建/启动新的模拟器。之后，您可以使用 ADB 命令在模拟器上安装您的 APK。

ADB 命令参考：http://developer.android.com/tools/help/adb.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:41:55.483

为您的应用创建一个 APK（签名或未签名）。并打开 Eclipse 转到 DDMS Perspective 并将您的 APK 推送到系统文件夹。

然后运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:49:25.137

您可以使用名为 BlueStacks 的应用程序，您可以在其中安装一些应用程序进行测试和使用。尽管它处于测试阶段

此应用程序比 Android SDK 附带的 Android 虚拟机更快。

# bash - 计算终端输出中的行数

> ID：12457457
> 
> 赞同：326
> 
> 时间：2012-09-17T10:31:50.047
> 
> 标签：bash, terminal

在 SO 上找不到这个。我在终端中运行了以下命令：

```
>> grep -Rl "curl" ./ 
```

这将显示出现关键字 curl 的文件列表。我想计算文件的数量。我能想到的第一种方法是计算终端中输出的行数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：575
> 
> 时间：2012-09-17T10:32:36.130

将结果传递给[`wc`](http://en.wikipedia.org/wiki/Wc_%28Unix%29)使用`-l`( *line count* ) 开关：

```
grep -Rl "curl" ./ | wc -l 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2015-09-13T12:34:37.920

将 EaterOfCode 的评论放在这里作为答案。

> grep 本身也有 -c 标志，它只返回计数

所以命令和输出可能看起来像这样。

```
$ grep -Rl "curl" ./ -c
24 
```

**编辑：**

虽然这个答案可能更短，因此看起来可能比接受的答案（即使用`wc`）更好。我不再同意这一点。我想记住你可以通过管道来计算行数`wc -l`更有用，因为你可以将它与其他程序一起使用`grep`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-08-02T23:35:56.407

如果最后一行以换行符结尾（我知道在这种情况下，它会），则管道到“wc”可能会更好。
但是，如果最后一行不以换行符结尾，则“wc -l”会返回错误的结果。

**例如：**

```
$ echo "asd" | wc -l 
```

将返回`1`并

```
$ echo -n "asd" | wc -l 
```

将返回`0`

* * *

所以我经常使用的是`grep <anything> -c`

```
$ echo "asd" | grep "^.*$" -c
1

$ echo -n "asd" | grep "^.*$" -c
1 
```

这比`wc -l`将要回归的更接近现实。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-20T16:08:37.050

`"abcd4yyyy" | grep 4 -c`给出计数为`1`

# css - 是否有浏览器扩展来获取应用于 DOM 元素的所有 CSS？

> ID：12457459
> 
> 赞同：11
> 
> 时间：2012-09-17T10:31:54.877
> 
> 标签：css, google-chrome-extension, firefox-addon, firebug

Firebug 很棒，它允许我查看应用于您选择的 DOM 中的元素的所有 CSS，但您可以：

a）按照CSS中的定义，按应用顺序逐行查看（非常有用，但不是我想要的）或

b) 查看它“已计算”，即所有 CSS 规则和该元素具有的值。

我想要的是一个工具或扩展，它允许我选择一个元素，并以可复制粘贴的形式向我展示为该元素定义的所有 CSS。如果元素具有 font-style:normal 只是因为它是该元素的默认值，我不想在那里（Firebug 在计算视图中显示所有这些）。

基本上我希望能够：

1.  我在我自己的网站上看到了我想在网站上复制的元素（如按钮）。
2.  使用此工具可以将一堆 CSS 应用于该元素。
3.  粘贴在我自己的 CSS 上。
4.  在我的网站中获得相同的外观元素。耶！

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T12:29:26.857

切换到 Chrome 默认元素检查器（按 F12），它有你需要的一切。您会在“计算样式”面板中找到所有内容，包括有用的“显示继承”复选框

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-24T14:09:01.553

我知道这个问题已经有将近 4 年的历史了，但是如果今天有人在寻找它，那么有一个 Chrome 扩展程序可以处理它。[https://github.com/kdzwinel/SnappySnippet](https://github.com/kdzwinel/SnappySnippet)

它在 Chrome Inspector 中添加了一个新选项卡，您只需单击一个按钮即可获取所选元素及其子元素的所有 html 和 css。然后你可以将它导出到codepen、jsfiddle和jsbin，或者复制粘贴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T14:17:06.967

Google Chrome 内置了诸如 Firebug 之类的工具，称为“Chrome 开发者工具”。根据我的经验，它非常强大，大约一年前我从 Firefox/Firebug 切换到 Chrome。有几种不同的方法可以启动开发人员工具。[您可以在https://developers.google.com/chrome-developer-tools/docs/overview](https://developers.google.com/chrome-developer-tools/docs/overview)找到详细文档

当您打开 Chrome 开发者工具并选择一个元素的元素选项卡时，您可以展开右侧的计算样式区域并查看构成该元素的所有样式。

![在此处输入图像描述](../Images/0c1c96b59ed77462c93f01cf945d49ff.png)

如果特定样式的左侧有一个可扩展的三角形，您可以找出样式表以及样式的来源。

![在此处输入图像描述](../Images/3987e1e1aac85162bee90158ce041c6c.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T14:29:37.130

您不需要任何扩展，Firefox 中的内置检查器可以做到这一点。右键单击元素，选择“检查元素”。单击底部工具栏中的样式按钮 - 那里是一个侧边栏，其中包含应用于该元素的所有样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-28T21:59:30.343

我试过 SnappySnippet 并发现[CSSSteal](https://chrome.google.com/webstore/detail/csssteal/ellabkgcnhflepncdcnelhgclfkgmanh)要好得多。它将只抓取 CSS，并以与文档相同的格式执行此操作，这与 SnappySnippet 不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-15T12:47:21.947

`window Object`>>上有一个 API `window.getComputedStyle(DOMElement)`。这是如果我们需要以`computed styles`编程方式工作。

[window.getComputedStyle 的 MDN 文档](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)

祝你好运...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-03T03:56:33.793

我试图通过`window.getComputedStyle`它来计算它，并且需要对其进行优化以消除不必要的样式属性。[https://github.com/aleen42/DOM-mirror](https://github.com/aleen42/DOM-mirror)

# drupal-6 - 仅显示节点作者的节点引用

> ID：12457460
> 
> 赞同：0
> 
> 时间：2012-09-17T10:31:58.363
> 
> 标签：drupal-6, cck

我创建了游戏和视频两种内容类型。现在在视频中，我创建了 1 个字段类型作为节点引用，它将引用游戏类型。

现在假设我的站点上有 2 个用户，分别是 user1 和 user2。User1 创建了以下内容-

Game1（内容类型游戏） Game2（内容类型游戏） Game3（内容类型游戏）

用户 2 有以下内容- Game4(Content Type Game) Game5(Content Type Game)

现在假设 User1 将创建一个视频内容类型。在节点参考选定列表中，我只想查看 Game1、2 和 3。但它正在显示所有游戏。

我该如何解决。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:06:55.073

节点引用字段有一个工具，您可以在其中使用视图来设置可用节点列表以供参考，而不仅仅是选择内容类型。

这是你最好的选择。

您需要创建一个带有参数的视图（为此目的）。该参数将是用户参数。棘手的一点是如何设置该参数的值。即使参数不存在，您也希望使用可用的选项来设置参数。您可能可以将其设置为登录用户，或者，您可能必须在用户个人资料页面上创建视频（节点表单）并根据 URL 选择参数值。您还可以根据发出的包含用户 UID 的链接来设置该字段。

# java - 如何在 Spring MVC 中维护会话？

> ID：12457461
> 
> 赞同：0
> 
> 时间：2012-09-17T10:32:04.507
> 
> 标签：java, spring, session, spring-mvc

使用spring MVC，我需要将我的对象存储到会话中，并且我应该使用jstl在几个jsp页面中使用相同的对象。我试过这样：

```
ModelAndView modelAndView = new ModelAndView("admin/addproduct", "category", categorynameList); 
```

但是我无法访问除`addproduct`page 之外的其他 jsp 页面的类别。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:54:34.943

Spring MVC 提供了不止一种机制来隐藏对`HttpSession`您的普通使用。

查看`@SessionAttributes`注释，它允许您定义将由控制器存储在会话中的属性；此机制主要用于维护您的处理程序的会话状态，并且该状态通常在会话完成后被清除。

此外，您可以将 bean 定义为应用程序上下文中的会话范围，然后使用 ScopedProxyFactoryBean（只需`<aop:scoped-proxy/>`在 bean 定义中添加一个元素），从而能够将该 bean 注入您的单例控制器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:48:37.877

您可以将会话直接传递给任何带注释的控制器方法：

```
@RequestMapping("somePathName")
public String someHandler(HttpSession session) {
  session.setAttribute(... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-24T06:01:16.263

注释**@SessionAttributes 用于类级别**。通常它用于@Controller 类。它的 'value' 元素是 String[] 类型，其值是 @ModelAttribute 在方法级别或处理程序的方法参数级别上使用的匹配名称。

让我们考虑以下安排：

```
@Controller
@SessionAttributes("visitor")
@RequestMapping("/trades")
public class TradeController {

    @ModelAttribute("visitor")
    public Visitor getVisitor (....) {
        return new Visitor(....);
    }
  ....
} 
```

在上面的代码中，当一个请求进来时，Spring首先会注意到@SessionAttributes('visitor')，然后尝试在javax.servlet.http.HttpSession中找到'visitor'的值。如果它没有找到该值，则将调用具有相同名称“访问者”的 @ModelAttribute 方法（方法 getVisitor()）。这种方法的返回值将用于填充名称为“访问者”的会话。

现在 'visitor' 的值已经在 HttpSession 中，让我们考虑以下安排：

```
@Controller
@SessionAttributes("visitor")
@RequestMapping("/trades")
public class TradeController {

    @RequestMapping("/**")
    public String handleRequestById (@ModelAttribute("visitor") Visitor visitor,
                                     Model model,
                                     HttpServletRequest request) {
        model.addAttribute("msg", "trades request, serving page " +
                                                 request.getRequestURI());
        visitor.addPageVisited(request.getRequestURI());
        return "traders-page";
    }
   .......
} 
```

在目标处理程序方法中找到 @ModelAttribute("visitor") 时，Spring 将从会话中检索 'visitor' 的值，并将该值分配给 Visitor 参数并调用该方法。这一步，Spring并不关心session是如何填充'visitor'的，不管是最后的排列方式还是其他方式填充，都无所谓，Spring只需要注解@SessionAttributes('visitor') ，带有@ModelAttribute("visitor")的handler方法参数和HttpSession中'visitor'的值。如果 spring 在 session 中找不到它并且最后的安排不可用，则会抛出以下异常：

**org.springframework.web.HttpSessionRequiredException：预期的会话属性“访客”**

换句话说：当在给定会话中第一次调用目标处理程序方法时，将调用带有@ModelAttribute('visitor) 的方法，返回值填充到 HttpSession 中，并调用具有相同值的处理程序方法。对于同一个 HTTPSession 中的后续请求，Spring 从会话中检索相同的对象，直到会话结束才再次调用带有 @ModelAttribute('visitor') 的方法

以下是完整的控制器类：

```
@Controller
@SessionAttributes("visitor")
@RequestMapping("/trades")
public class TradeController {

    @RequestMapping("/**")
    public String handleRequestById (@ModelAttribute("visitor") Visitor visitor,
                                     Model model,
                                     HttpServletRequest request) {
        model.addAttribute("msg", "trades request, serving page " +
                                                 request.getRequestURI());
        visitor.addPageVisited(request.getRequestURI());
        return "traders-page";
    }

    @ModelAttribute("visitor")
    public Visitor getVisitor (HttpServletRequest request) {
        return new Visitor(request.getRemoteAddr());
    }
} 
```

在上面的示例中，我们正在跟踪同一 HTTP 会话中用户访问的页面。我们使用通配符“/**”，以便所有以“trades”开头的请求都将映射到此控制器。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-17T10:39:57.577

将会话注入您的控制器类，将您的对象存储在那里并在需要时使用它，例如：

```
@Controller
public class SomeController {

  //@Autowired
  //private HttpSession session; This is not desired. See the discussion in the 
  //comments.

  @RequestMapping("somePathName")
  public String someHandler(HttpSession session) { //Session will be injected by 
    //Spring without any additional annotations.
    //...
    session.setAttribute("category", yourObject);
  }
} 
```

如果您需要`category`在其他页面上访问，`admin/addproduct`则需要将其添加到相应的模型中，如下所示：

```
@RequestMapping("somePathName")
public String someHandler(Model model) {
  //...
  model.addAttribute("category", yourObject);
  //...
  return "yourPageName";
} 
```

更新：根据 ALex 的评论，由于线程安全问题，不希望将`HttpSession`实例注入字段，我已经分别更改了源。`strongly`

# vba - 如何设置宏以在每次电子邮件到达 Outlook 2007 中的某个子文件夹时启动？

> ID：12457471
> 
> 赞同：1
> 
> 时间：2012-09-17T10:32:36.610
> 
> 标签：vba, excel, outlook

我有一个宏来导出子文件夹中的相关电子邮件字段，但我需要它在每次收到新电子邮件时自动运行。事实上，我只想导出主题行，当电子邮件到达“M_M_Asia”时，是否有一个脚本会触发该宏（“ExportMessagesToExcel”）？

我在 Outlook 2007 中。

如果有人能提供帮助，我将永远感激不尽。干杯，伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:27:44.143

1.  您应该能够使用模块中的`Application_NewMail`(or `NewMailEx`) 事件`ThisOutlookSession`来调用您自己的宏。

2.  另一种方法是创建一个运行 VBA 脚本的规则，但是您的 VBA 子需要处理 MailItem 参数：

    ```
    Option Explicit

    Sub MyVBARule(poMail As MailItem)

    End Sub 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:03:01.437

或者您可以添加“ItemAdd”事件处理程序，例如：

```
Option Explicit

Private Const ASIA_FOLDER_NAME As String = "M_M_Asia"
Private WithEvents m_outlookFolderItems As Outlook.Items

Private Sub Application_Startup()
    Initialize_Handler
End Sub

Private Sub m_outlookFolderItems_ItemAdd(ByVal Item As Object)
    ' You have new mail in folder ASIA_FOLDER_NAME
    RunExcelMacro
End Sub

Private Sub Initialize_Handler()
    Dim outlookFolder As Outlook.MAPIFolder
    Dim defaultInboxFolder As Outlook.MAPIFolder
    Dim outlookNameSpace As Outlook.NameSpace

    Set outlookNameSpace = Outlook.GetNamespace("MAPI")
    Set defaultInboxFolder = outlookNameSpace.GetDefaultFolder(olFolderInbox)
    Set outlookFolder = defaultInboxFolder.Folders(ASIA_FOLDER_NAME)
    Set m_outlookFolderItems = outlookFolder.Items
End Sub

Public Sub RunExcelMacro()
    On Error GoTo RunExcelMacro_Err

    Const path As String = "C:\temp\Excel_VBA\"
    Const fileName As String = "CallMeFromOutloouk.xlsm"
    Const macroName As String = "CallMeFromOutlook"

    Dim excelObject As Object
    Dim workbookObject As Object

    Set excelObject = CreateObject("Excel.Application")

    On Error Resume Next
    Set workbookObject = excelObject.Workbooks(fileName)
    On Error GoTo RunExcelMacro_Err

    If workbookObject Is Nothing Then
        Set workbookObject = excelObject.Workbooks.Open(path & fileName)
    End If

    excelObject.Run fileName & "!" & macroName

    Exit Sub

RunExcelMacro_Err:
    MsgBox Err.Description
End Sub 
```

# android - 单击选项卡（单选按钮）我的记忆加倍

> ID：12457475
> 
> 赞同：5
> 
> 时间：2012-09-17T10:32:57.563
> 
> 标签：android, memory-leaks, lazy-loading, android-gridview

我的布局非常复杂。我必须使整页可滚动，所以我所做的是 - 我有一个用于我的 gridview 项目的 gridView 适配器和一个具有四个选项卡的自定义适配器，然后我在那个自定义适配器中设置我的 gridview。然后整个视图设置在我的主要活动上，该活动有一个列表视图，所以它现在滚动整页，但问题在于内存。

我在自定义适配器上有 4 个选项卡单击事件，我通过将这些单击事件发送到我有四个 Web 服务的主要活动，并且条件是如果选择了第一个选项卡，则将发生第一个 Web 服务调用并设置新适配器关于主要活动。

**问题**：当我单击第一个选项卡时，我的内存大小为 130 MB，单击第二个选项卡时它会增加一倍，所以当我单击第三个选项卡时也会发生同样的事情。我正在使用延迟加载来加载我的图像，这也维护了我的缓存，我尝试了 clear()、notifyDataSetChanged() 但没有做任何更改。每次点击标签时，我的记忆都会增加。

这是我的代码：

**GallaryLoginMainActivity**：

```
 public class GallaryLoginMainActivity<T> extends BaseClass {

        /**
         * Description:Declare the UI components.
         */

        private List<ArrayList<HashMap<String, String>>> data = null;
        private ListView lstGallaryMain = null;
        public ArrayList<HashMap<String, String>> userDataActivity;
        public ArrayList<HashMap<String, String>> userDataSecondActivity;
        private ProgressDialog loadingDialog = null;
        LinkedHashMap<String, String> linkedMap;
        ArrayList<Assignment> assignmentArrayList;
        private String selectedTab = "popular";
        private ImageLoader imageloader;

        // public static ArrayAdapter mAdapter;
        public ArrayAdapter mAdapter;

        /**
         * Description:This method use for prepare the request to get the response
         * from API
         * 
         */

        public void MediaGetFiles() {

            final GallerySaxParserForGetFiles gsp = new GallerySaxParserForGetFiles();
            final RestService restService = new RestService();

            try {
                linkedMap = new LinkedHashMap<String, String>();
                gsp.parseXML(restService.getResponse());
                // userDataActivity = new ArrayList<HashMap<String, String>>();
                userDataActivity = gsp.userData;
                System.out.println("RR : userDataActivity from LoginMainAct :" + userDataActivity.size());
                System.out.println("RR : from userdataactivty for item:" + userDataActivity.get(0).toString());
                data.add(userDataActivity);

            } catch (Exception e) {

                e.printStackTrace();
            }

        }

        /**
         * Description:This method use for prepare the request to get the response
         * from API
         * 
         */

        public void MediaGetFilesInfo() {

            // new Thread(new Runnable() {

            // public void run() {

            GallerySaxParserForGetFileInfo gisp = new GallerySaxParserForGetFileInfo();

            try {

                RestService restService = new RestService();
                linkedMap = new LinkedHashMap<String, String>();
                System.out.println("From GallaryUserLoginMainActivity1 : " + restService.getResponse());
                gisp.parseXML(restService.getResponse());
                userDataSecondActivity = new ArrayList<HashMap<String, String>>();
                userDataSecondActivity = gisp.userSecondData;
                data.add(userDataSecondActivity);

            } catch (Exception e) {

                e.printStackTrace();
            }

            // }
            // }).start();

        }

        /**
         * Description:This method use for prepare the request to get the response
         * from API
         * 
         */

        public void MediaGetShortedFilesByPopuler() {

            final GallerySaxParserForGetFiles gsp = new GallerySaxParserForGetFiles();
            final RestService restService = new RestService();
            try {
                linkedMap = new LinkedHashMap<String, String>();

                gsp.parseXML(restService.getResponse());
                userDataActivity = new ArrayList<HashMap<String, String>>();
                userDataActivity = gsp.userData;
                data.add(userDataActivity);
                data.add(userDataSecondActivity);
                // };

                // }.execute();

            } catch (Exception e) {

                e.printStackTrace();
            }

        }

        /**
         * Description:This method use for prepare the request to get the response
         * from API
         * 
         */
        public void MediaGetShortedFilesByRecent() {

            final GallerySaxParserForGetFiles gsp = new GallerySaxParserForGetFiles();
            final RestService restService = new RestService();
            try {
                linkedMap = new LinkedHashMap<String, String>();

                gsp.parseXML(restService.getResponse());
                userDataActivity = new ArrayList<HashMap<String, String>>();
                userDataActivity = gsp.userData;
                data.add(userDataActivity);
                data.add(userDataSecondActivity);
            } catch (Exception e) {
                e.printStackTrace();
            }

        }

        /**
         * Description:This method use for prepare the request to get the response
         * from API
         * 
         */

        public void MediaGetShortedFilesByComment() {

            final GallerySaxParserForGetFiles gsp = new GallerySaxParserForGetFiles();
            final RestService restService = new RestService();
            try {
                linkedMap = new LinkedHashMap<String, String>();

                gsp.parseXML(restService.getResponse());
                userDataActivity = new ArrayList<HashMap<String, String>>();
                userDataActivity = gsp.userData;
                data.add(userDataActivity);
                data.add(userDataSecondActivity);
            } catch (Exception e) {

                e.printStackTrace();
            }

        }

        /**
         * Description:This method use for prepare the request to get the response
         * from API
         * 
         */

        public void MediaGetShortedFilesByNearBy() {

            final GallerySaxParserForGetFiles gsp = new GallerySaxParserForGetFiles();
            final RestService restService = new RestService();
            try {
                linkedMap = new LinkedHashMap<String, String>();

                gsp.parseXML(restService.getResponse());
                userDataActivity = new ArrayList<HashMap<String, String>>();
                userDataActivity = gsp.userData;
                data.add(userDataActivity);
                data.add(userDataSecondActivity);
            } catch (Exception e) {

                e.printStackTrace();
            }

        }

        /** Called when the activity is first created. */
        @Override
        protected void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.gallary_login_main_page_list);
            init(GallaryLoginMainActivity.this, R.id.main, getIntent());
            data = new ArrayList<ArrayList<HashMap<String, String>>>();

            imageloader = new ImageLoader(getApplicationContext());

            Intent intent = getIntent();
            if (intent.getExtras().getString("SELECTED_TAB") != null) {
                selectedTab = intent.getExtras().getString("SELECTED_TAB");
            }

                /*
                 * 
                 * This method is used to Show The loading dialog till the data
                 * loads for main page.
                 */

                new AsyncTask<Void, Void, Void>() {
                    protected void onPreExecute() {

                        loadingDialog = ProgressDialog.show(GallaryLoginMainActivity.this, "", "Loading. Please wait...", true);
                    }

                    @Override
                    protected Void doInBackground(Void... params) {

                        return null;
                    };

                    protected void onPostExecute(Void result) {

                        if (selectedTab.equalsIgnoreCase("popular")) {

                            MediaGetShortedFilesByPopuler();
                        } else if (selectedTab.equalsIgnoreCase("recent")) {

                            MediaGetShortedFilesByRecent();
                        } else if (selectedTab.equalsIgnoreCase("commented")) {

                            MediaGetShortedFilesByComment();
                        }
                        if (mAdapter != null) {
                            mAdapter = null;
                            mAdapter.clear();

                        }
                        if (mAdapter == null) {

                            lstGallaryMain = (ListView) findViewById(R.id.lstGallaryMain);
                            mAdapter = new GalleryCustomAdapterForMainPage<T>(GallaryLoginMainActivity.this, data);

                            // mAdapter.notifyDataSetChanged();
                        }
                        lstGallaryMain.setAdapter(mAdapter);
                        if (loadingDialog != null && loadingDialog.isShowing()) {
                            loadingDialog.dismiss();
                        }
                    };
                }.execute();
            }

        }

        @Override
        protected void onResume() {
            System.gc();
            super.onResume();
        }

        @Override
        protected void onPause() {
            super.onPause();
            System.gc();
        }

        @Override
        public void onLowMemory() {
            super.onLowMemory();
            imageloader.clearCache();
        }

        @Override
        protected void onDestroy() {
            lstGallaryMain.setAdapter(null);
            userDataActivity = null;
            userDataSecondActivity = null;

            System.gc();
            super.onDestroy();
        }

    } 
```

**GalleryCustomAdapterForMainPage**：

```
 public class GalleryCustomAdapterForMainPage<T> extends ArrayAdapter<T> {
        public static int gridviewHeight = 0;
        private GridView refGridView;
        /**
         * Description:Declare the UI components.
         */
        List<ArrayList<HashMap<String, String>>> data = null;
        public ArrayList<HashMap<String, String>> userDataActivity;
        public ArrayList<HashMap<String, String>> userDataSecondActivity;
        private ProgressDialog loadingDialog = null;
        // AQuery listAQ;

        private Activity mContext = null;
        private LayoutInflater inflater = null;
        Bitmap galleryBitmapHadnling = null;
        private PopupWindow mpopup;
        LinkedHashMap<String, String> linkedMap;
        Holder1 h1;
        GalleryMainActivityGridViewAdapter gmaga = null;

        private ImageLoader imageloader;

        /**
         * This method is use to set object that will control the listview
         * 
         * @param activity
         *            that creates this thing
         * @param data
         *            bind to this listview
         */

        // This Class is used to Declare a CustomAdapter that we use to join the
        // data set and the ListView

        public GalleryCustomAdapterForMainPage(Activity activity, List data) {
            super(activity, R.layout.gallery_main_page_content, data);

            this.mContext = activity;
            // listAQ = new AQuery(mContext);
            this.data = data;
            this.userDataActivity = this.data.get(0);
            System.out.println("userDataActivity is : " + userDataActivity);
            this.userDataSecondActivity = this.data.get(1);
            // listAQ = new AQuery(mContext);
            // Get a new instance of the layout view
            inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            imageloader = new ImageLoader(mContext);
        }

        // Total number of things contained within the adapter
        @Override
        public int getCount() {

            return this.data.size() - 1;
        }

        // create View for each item referenced by the Adapter
        @SuppressWarnings("deprecation")
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if (convertView == null) {
                /* create a new view of our layout and inflate it in the row */
                // Inflate the layout
                convertView = inflater.inflate(R.layout.gallery_main_page_content, null);
                // System.gc();
                h1 = new Holder1();

                // Initialize the UI components
                h1.imgView_Gallery_Main_Background = (ImageView) convertView.findViewById(R.id.imgView_Gallery_Main_Background);

                h1.txtView_main_img_title = (TextView) convertView.findViewById(R.id.txtView_main_img_title);
                Typeface typeForTitile = Typeface.createFromAsset(getContext().getAssets(), "fonts/helvetica_bold_neue.ttf");
                h1.txtView_main_img_title.setTypeface(typeForTitile);

                h1.texView_featured = (TextView) convertView.findViewById(R.id.texView_featured);
                Typeface typeForFeatured = Typeface.createFromAsset(getContext().getAssets(), "fonts/gotham_black_1.ttf");
                h1.texView_featured.setTypeface(typeForFeatured);

                h1.txtView_assignment_detail = (TextView) convertView.findViewById(R.id.txtView_assignment_detail);
                Typeface typeAssignmentDetail = Typeface.createFromAsset(getContext().getAssets(), "fonts/arial_bold_1.ttf");
                h1.txtView_assignment_detail.setTypeface(typeAssignmentDetail);

                h1.imgView_Main_TumbNail = (ImageView) convertView.findViewById(R.id.imgView_Main_TumbNail);

                h1.txtView_gallery_main_person_name = (TextView) convertView.findViewById(R.id.txtView_gallery_main_person_name);
                Typeface txtViewPersonName = Typeface.createFromAsset(getContext().getAssets(), "fonts/arial_bold.ttf");
                h1.txtView_gallery_main_person_name.setTypeface(txtViewPersonName);

                h1.txtView_gallery_main_views = (TextView) convertView.findViewById(R.id.txtView_gallery_main_views);
                Typeface txtViewViews = Typeface.createFromAsset(getContext().getAssets(), "fonts/arial_bold.ttf");
                h1.txtView_gallery_main_views.setTypeface(txtViewViews);

                h1.texView_gallery_main_comment = (TextView) convertView.findViewById(R.id.texView_gallery_main_comment);
                Typeface txtViewComments = Typeface.createFromAsset(getContext().getAssets(), "fonts/arial_bold.ttf");
                h1.texView_gallery_main_comment.setTypeface(txtViewComments);

                h1.texView_gallery_main_favorite = (TextView) convertView.findViewById(R.id.texView_gallery_main_favorite);
                Typeface txtViewFavorite = Typeface.createFromAsset(getContext().getAssets(), "fonts/arial_bold.ttf");
                h1.texView_gallery_main_favorite.setTypeface(txtViewFavorite);

                h1.btn_Gallery_Main_ShowMe = (RadioButton) convertView.findViewById(R.id.btn_Gallery_Main_ShowMe);

                h1.btn_Gallery_Tab_Popular = (RadioButton) convertView.findViewById(R.id.btn_Gallery_Tab_Popular);
                Typeface TabPopular = Typeface.createFromAsset(getContext().getAssets(), "fonts/helvetica_ce_regular.ttf");
                h1.btn_Gallery_Tab_Popular.setTypeface(TabPopular);
                h1.btn_Gallery_Tab_Popular.setChecked(true);

                h1.btn_Gallery_Tab_recent = (RadioButton) convertView.findViewById(R.id.btn_Gallery_Tab_recent);
                Typeface TabRecent = Typeface.createFromAsset(getContext().getAssets(), "fonts/helvetica_ce_regular.ttf");
                h1.texView_gallery_main_favorite.setTypeface(TabRecent);

                h1.btn_Gallery_Tab_Commented = (RadioButton) convertView.findViewById(R.id.btn_Gallery_Tab_Commented);
                Typeface TabCommented = Typeface.createFromAsset(getContext().getAssets(), "fonts/helvetica_ce_regular.ttf");
                h1.texView_gallery_main_favorite.setTypeface(TabCommented);

                h1.btn_Gallery_Tab_Nearby = (RadioButton) convertView.findViewById(R.id.btn_Gallery_Tab_Nearby);
                Typeface TabNearby = Typeface.createFromAsset(getContext().getAssets(), "fonts/helvetica_ce_regular.ttf");
                h1.texView_gallery_main_favorite.setTypeface(TabNearby);

                h1.imgView_ForPlayVideo = (ImageView) convertView.findViewById(R.id.imgView_ForPlayVideo);

                if (userDataActivity.get(position).get("filetype").toString().endsWith("1")) {
                    h1.imgView_ForPlayVideo.setVisibility(View.GONE);
                } else {
                    h1.imgView_ForPlayVideo.setVisibility(View.VISIBLE);
                } // set the content in grid view of gallery main page

                h1.gridview_Gallery = (GridView) convertView.findViewById(R.id.gridview_Gallery);

                int gridHeight = (int) ((userDataActivity.size() / 3) * 140 * 1.80);
                System.out.println("gridHeigh is : " + gridHeight);

                if (h1.btn_Gallery_Tab_Popular != null) {

                    h1.txtView_gallery_main_person_name.setText("   " + userDataActivity.get(position).get("user_name"));
                    h1.txtView_main_img_title.setText(userDataActivity.get(position).get("title"));
                    h1.txtView_gallery_main_views.setText("     |  " + userDataActivity.get(position).get("hits") + " views");
                    h1.texView_gallery_main_comment.setText("     |  " + userDataActivity.get(position).get("commentcount") + "        ");
                    h1.texView_gallery_main_favorite.setText("     |  " + userDataActivity.get(position).get("votecount") + "        ");

                    imageloader.DisplayImage(userDataActivity.get(position).get("thumbUrl") + "/12", h1.imgView_Gallery_Main_Background);

                    // h1.imgView_Main_TumbNail.setImageBitmap(getBitmap(userDataActivity.get(position).get("thumbUrl")
                    // + "/12"));

                    if (userDataActivity.get(position).get("publicUrl") != null) {

                        imageloader.DisplayImage(userDataActivity.get(position).get("publicUrl") + "/14", h1.imgView_Gallery_Main_Background);

                    } else {

                        h1.imgView_Gallery_Main_Background.setBackgroundResource(R.drawable.loading);
                    }

                }

                userDataActivity.remove(0);
                if (h1.gridview_Gallery != null) {
                    // clearAdapter();
                    // setting the adapter
                    // if (gmaga == null) {
                    gmaga = new GalleryMainActivityGridViewAdapter(mContext, userDataActivity);

                    // }
                    h1.gridview_Gallery.setAdapter(gmaga);

                    // Total number of things contained within the adapter

                    int gridHeight1 = (int) ((h1.gridview_Gallery.getAdapter().getCount() / 3) * 120 * 1.80);
                    h1.gridview_Gallery.setLayoutParams(new LinearLayout.LayoutParams(android.view.ViewGroup.LayoutParams.FILL_PARENT, gridHeight1));
                    h1.gridview_Gallery.setSelector(new ColorDrawable(color.transparent));

                    h1.gridview_Gallery.setOnItemClickListener(new OnItemClickListener() {

                        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

                            Intent intent = new Intent(mContext, GalleryDetailPageActivity.class);

                            System.out.println("pos:" + userDataActivity.get(position).get("id"));

                            // This will send the items via intent to Gallery detail
                            // page to display data on that page.

                            intent.putExtra("tabId", R.id.tab_b01);
                            intent.putExtra("tabBackgroundId", R.drawable.tab_b01_on);
                            mContext.startActivity(intent);

                        }

                    });
                }

                if (h1.btn_Gallery_Tab_Popular != null) {

                    h1.btn_Gallery_Tab_Popular.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {
                            Intent intent = new Intent(mContext, GallaryLoginMainActivity.class);
                            intent.putExtra("SELECTED_TAB", "popular");
                            intent.putExtra("tabId", R.id.tab_b01);
                            intent.putExtra("tabBackgroundId", R.drawable.tab_b01_on);
                            mContext.startActivity(intent);
                            mContext.finish();
                            // }

                        }
                    });
                }

                if (h1.btn_Gallery_Tab_recent != null) {
                    h1.btn_Gallery_Tab_recent.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Intent intent = new Intent(mContext, GallaryLoginMainActivity.class);
                            intent.putExtra("SELECTED_TAB", "recent");
                            intent.putExtra("tabId", R.id.tab_b01);
                            intent.putExtra("tabBackgroundId", R.drawable.tab_b01_on);
                            mContext.startActivity(intent);
                            mContext.finish();

                            // }

                        }
                    });
                }

                if (h1.btn_Gallery_Tab_Commented != null) {

                    h1.btn_Gallery_Tab_Commented.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Intent intent = new Intent(mContext, GallaryLoginMainActivity.class);
                            intent.putExtra("SELECTED_TAB", "commented");
                            intent.putExtra("tabId", R.id.tab_b01);
                            intent.putExtra("tabBackgroundId", R.drawable.tab_b01_on);
                            mContext.startActivity(intent);
                            mContext.finish();
                            // }

                        }
                    });

                }
                    convertView.setTag(h1);

            }
            return convertView;

        }

        private class Holder1 {

            ImageView imgView_Gallery_Main_Background;
            TextView txtView_main_img_title;
            TextView texView_featured;
            RadioButton btn_Gallery_Tab_Popular;
            RadioButton btn_Gallery_Tab_recent;
            RadioButton btn_Gallery_Tab_Commented;
            RadioButton btn_Gallery_Tab_Nearby;
            ImageView imgView_Main_TumbNail;
            TextView txtView_assignment_detail;
            TextView txtView_assignment_name;
            TextView txtView_gallery_main_person_name;
            TextView txtView_gallery_main_views;
            TextView texView_gallery_main_comment;
            TextView texView_gallery_main_favorite;
            RadioButton btn_Gallery_Main_ShowMe;
            GridView gridview_Gallery;
            ImageView imgView_ForPlayVideo;
        }

    } 
```

**GalleryMainActivityGridViewAdapter**：

```
public class GalleryMainActivityGridViewAdapter extends BaseAdapter {

    // AQuery listAQ;
    private Context mContext;
    int layoutResourceId;
    ArrayList<HashMap<String, String>> dataArray;
    ArrayList<Boolean> selected;
    private GallerySmartLazyLoader lazyloader;
    private ImageLoader imageloder;

    public static String dataExtension = " Views";

    public GalleryMainActivityGridViewAdapter(Context context, ArrayList<HashMap<String, String>> resultArray) {
        this.mContext = context;
        // this.layoutResourceId = layoutId;
        this.dataArray = resultArray;
        // listAQ = new AQuery(mContext);
        lazyloader = new GallerySmartLazyLoader(mContext);
        imageloder = new ImageLoader(mContext.getApplicationContext());
        // aa = new ArrayAdapter<Photo>(mContext, layoutResourceId);
    }

    public int getCount() {
        return dataArray.size();
    }

    public void clear() {
        dataArray.clear();

    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    // BitmapFactory.Options options = null;
    // Bitmap cachedImage;

    @SuppressWarnings("deprecation")
    public View getView(int position, View convertView, ViewGroup parent) {
        String url = null;
        GalleryHolder holder = null;

        if (convertView == null) {
            convertView = ((LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.gallery_main_page_grid_item, parent, false);
            convertView.setTag(holder);

        } else {
            holder = (GalleryHolder) convertView.getTag();
        }

        holder = new GalleryHolder();

        try {

            String thumbnail = dataArray.get(position).get("thumbUrl") + "/11";

            holder.imgView_Grid_Thumbnail_Gallery = (ImageView) convertView.findViewById(R.id.imgView_Grid_Thumbnail_Gallery);
            if (holder.imgView_Grid_Thumbnail_Gallery != null) {

            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        holder.txtView_Grid_Name_Gallery = (TextView) convertView.findViewById(R.id.txtView_Grid_Name_Gallery);
        Typeface TabGridname = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/arial_bold.ttf");
        holder.txtView_Grid_Name_Gallery.setTypeface(TabGridname);

        if (holder.txtView_Grid_Name_Gallery != null) {

            // holder.txtView_Grid_Name_Gallery.getId()).text(dataArray.get(position).get("user_name"));
            holder.txtView_Grid_Name_Gallery.setText(dataArray.get(position).get("user_name"));
            Typeface txtViewForName = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/arial_bold.ttf");
            holder.txtView_Grid_Name_Gallery.setTypeface(txtViewForName);

        }

        ImageView v = holder.imgView_GridItem_Gallery = (ImageView) convertView.findViewById(R.id.imgView_GridItem_Gallery);

        if (holder.imgView_GridItem_Gallery != null) {
            String publicUrl = dataArray.get(position).get("publicUrl") + "/14";

            imageloder.DisplayImage(publicUrl, holder.imgView_GridItem_Gallery);

        }
        holder.txtView_Grid_Views_Gallery = (TextView) convertView.findViewById(R.id.txtView_Grid_Views_Gallery);
        Typeface TabGriddetail = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/helvetica_ce_regular.ttf");
        holder.txtView_Grid_Name_Gallery.setTypeface(TabGriddetail);

        if (holder.txtView_Grid_Views_Gallery != null) {

            if (isPopuler) {
                holder.txtView_Grid_Views_Gallery.setText(dataArray.get(position).get("hits") + dataExtension);

            }

            else if (isUpload) {
                GalleryMainActivityGridViewAdapter.dataExtension = dataArray.get(position).get("upload");
                holder.txtView_Grid_Views_Gallery.setText(dataArray.get(position).get("upload"));

            }

            else if (isComments) {

                holder.txtView_Grid_Views_Gallery.setText(dataArray.get(position).get("commentcount") + dataExtension);

            }
            // else if (isNearby) {
            // aq.id(holder.txtView_Grid_Views_Gallery.getId()).text(dataArray.get(position).get("commentcount")
            // + dataExtension);
            // }

            Typeface txtViewForViews = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/arial_bold.ttf");
            holder.txtView_Grid_Views_Gallery.setTypeface(txtViewForViews);
        }

        holder.imgView_Grid_PlayVideo = (ImageView) convertView.findViewById(R.id.imgView_Grid_PlayVideo);
        if (holder.imgView_Grid_PlayVideo != null) {

            if (dataArray.get(position).get("filetype").toString().equals("1")) {
                holder.imgView_Grid_PlayVideo.setVisibility(View.GONE);
            } else {
                holder.imgView_Grid_PlayVideo.setVisibility(View.VISIBLE);
            }
        }

        return convertView;

    }

    class GalleryHolder {
        ImageView imgView_Grid_PlayVideo;
        ImageView imgView_Grid_Thumbnail_Gallery;
        TextView txtView_Grid_Views_Gallery;
        TextView txtView_Grid_Name_Gallery;
        ImageView imgView_GridItem_Gallery;
    }

} 
```

**图片**

![在此处输入图像描述](../Images/b8c3462cc2037d56a94c268aaa347f23.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:28:02.607

您显示的描述表明可能存在内存泄漏。检查我对[这个问题](https://stackoverflow.com/questions/12438235/android-drawables-memory-leak/12438345#12438345)的回答。我的猜测是您应该在代码中使用`Application`上下文而不是`Activity`上下文。使用提到的答案中的视频来了解如何识别泄漏。

# java - Android findContours 上的 OpenCV 抛出异常

> ID：12457477
> 
> 赞同：1
> 
> 时间：2012-09-17T10:33:06.453
> 
> 标签：java, android, opencv

我在 Android 上使用 OpenCV 2.4.0 并尝试在二进制图像中查找轮廓。

```
List<MatOfPoint> contours = new ArrayList<MatOfPoint>();
Mat mIntermediateMat = new Mat();
Imgproc.Canny(img, mIntermediateMat, 50, 100);
Imgproc.findContours(mIntermediateMat, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_SIMPLE); 
```

但是该函数会引发“函数 CvMat ... 中无法识别或不支持的数组类型”异常。

我也尝试将此 Mat 作为输入：

```
Mat mIntermediateMat = new Mat(height, width, CvType.CV_8UC1, new Scalar(0)); 
```

但我得到了同样的例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T02:30:30.410

试试这个功能来寻找轮廓：

```
public static ArrayList<Rect> detection_contours(Mat outmat) {
    Mat v = new Mat();
    Mat vv = outmat.clone();
    List<MatOfPoint> contours = new ArrayList<MatOfPoint>();
    Imgproc.findContours(vv, contours, v, Imgproc.RETR_LIST,
            Imgproc.CHAIN_APPROX_SIMPLE);

    double maxArea = 100;
    int maxAreaIdx = -1;
    Rect r = null;
    ArrayList<Rect> rect_array = new ArrayList<Rect>();

    for (int idx = 0; idx < contours.size(); idx++) {
        Mat contour = contours.get(idx);
        double contourarea = Imgproc.contourArea(contour);
        if (contourarea > maxArea) {
            // maxArea = contourarea;
            maxAreaIdx = idx;
            r = Imgproc.boundingRect(contours.get(maxAreaIdx));
            rect_array.add(r);
          //  Imgproc.drawContours(imag, contours, maxAreaIdx, new Scalar(0,0, 255));
        }

    }

    v.release();

    return rect_array;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:00:10.087

确保在 Canny() 调用之后，您的 mIntermediateMat 是 CvType.CV_8* 类型

# nlp - 街道识别，减轻严重性

> ID：12457479
> 
> 赞同：1
> 
> 时间：2012-09-17T10:33:08.297
> 
> 标签：nlp, artificial-intelligence

我正在尝试对一组短语进行分析，但我不知道“自然语言处理”如何帮助我，或者是否有人可以与我分享他的知识。

目标是提取街道和本地化。这类信息通常不会以结构化的方式呈现给读者，而且很难找到解析它的方法。我有两个主要目标。

首先是街道本身的提取。据我所知，NLP 库可以帮助我对短语进行标记并执行分析，从而获得名词（例如）。但是一条街从哪里开始，又在哪里结束呢？我假设我需要将该分析与街道数据库进行比较，但我不知道哪种方法是最佳方法。

另外，我想扣除严重程度，例如在车祸中。我假设唯一的方法是通过短语中的当前单词来建立一些启发式（例如，如果已故单词出现 + 100）。我对么？

非常感谢一如既往！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:27:25.517

您想要做的第一部分（“首先提取街道本身。[...] 但是街道从哪里开始，在哪里结束？”）是 NLP 的一个子字段，称为[Named Entity Recognition](http://en.wikipedia.org/wiki/Named-entity_recognition)。有许多可用的库可以做到这一点。我自己喜欢 NLTK for Python。根据您的选择，我假设街道名称数据库对于训练识别器很有用，但您可能能够使用默认语料库获得合理的结果。为此，请阅读您的 NLP 库的文档。

第二部分，认识事故严重性，首先可以作为一个独立的问题来处理。您可以将原始单词或其词性标签作为特征，并在其上训练分类器（SVM、HMM、KNN，您的选择）。为此，您需要一个相当大的、正确标记的训练集；从你的描述我不确定你有吗？

“我假设唯一的方法是通过短语中的现在词来建立一些启发式”是非常模糊的，并且可能意味着很多事情。根据下一句话，听起来您认为扫描预定义的关键字列表是唯一的方法。在这种情况下，不，请参阅上面的段落。

一旦这两个部分都工作了，您可以将它们结合起来并计算每条街道的事故数量及其严重程度。使用一些地理编码库，您甚至可以推广到社区或城市。另一个挑战是检测同义词（“Smith Str”与“John Smith Street”）和同音词（伦敦的“Smith Street”与利兹的“Smith Street”）。

# java - 怎么解码中文

> ID：12457481
> 
> 赞同：2
> 
> 时间：2012-09-17T10:33:08.187
> 
> 标签：java, decode, encode

我正要开始解码一些我确定是中文的东西，它在数据库中看起来像这样：`&#34913;`

Sybase 的编码默认是 windows-1252，但是上面是什么？我怎样才能解码它以写出中文字符。不幸的是，它被存储为 nchar 。

如果有人想知道这是如何完成的：

```
int i = new Integer("34913").intValue();

String s = new String(Character.toChars(i)); 
```

正如@Joachim 所说，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:38:59.800

这是由 XML （以及[HTML4](http://www.w3.org/TR/html401/intro/sgmltut.html#h-3.2.3)和[HTML5 ）](http://dev.w3.org/html5/spec/single-page.html#character-references)[定义](http://www.w3.org/TR/2004/REC-xml11-20040204/#dt-charref)[的十进制数字字符引用](http://www.w3.org/International/questions/qa-escapes) 。该数字是 Unicode 代码点的十进制表示。

只需解析数字并将其转换为 an`int`即可获得实际的 unicode 代码点。然后[`Character.toChars()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toChars%28int%29)用来获取对应的`char`值（通常只有一个，但是对于[BMP之外的](https://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)字符会有两个代理值）。

# ios - Safari URL 到 PDF 页面的解决方法？

> ID：12457485
> 
> 赞同：8
> 
> 时间：2012-09-17T10:33:22.850
> 
> 标签：ios, ipad, pdf, safari, paging

我正在尝试使用 Safari 中内置的 Preview.app（在 iPad2 上使用 iOS）从 URL 链接到正在查看的 PDF 文档中的特定页面。我知道 Sarafi 不支持（希望在不久的将来）PDF 参数，例如：

> www.mywebsite.com/information.pdf#page17

或者

> www.mywebsite.com/information.pdf#page=17

这将导致打开时在第 17 页上查看 PDF。但正如我们所知，Safari 会在第一页打开它。

然而！

当我在 Safari 中显示 PDF 并将页码（在 URL 栏中）更改为不同的页码时，它可以工作。它跳转到正确的页面，我一次又一次地更改它，它完美无缺。

所以我想，好吧，也许是因为第一次查看时需要加载 PDF，所以我在缓存中预加载了 PDF，但没有成功。

我怎样才能让它工作，以便在打开 PDF 时转到正确的页面？是否有用于在加载后更改页码的脚本，或者是否有不同的解决方案？

您可以在这里找到我正在谈论的 PDF：http: [//www.michaelmaasdam.nl/mobile/new/pagina/begroting/begroting2012.pdf?page=14](http://www.michaelmaasdam.nl/mobile/new/pagina/begroting/begroting2012.pdf?page=14)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T02:45:49.867

此链接是否从本机应用程序显示？

如果是这样，您可以选择使用[QuickLook](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CDwQFjAC&url=http://developer.apple.com/library/mac/documentation/userexperience/conceptual/quicklook_programming_guide/&ei=T97AUsnaAZH6oAT8loH4AQ&usg=AFQjCNFPMSN7tF43SfNIaM5m9a-sYq6CTw&sig2=4Mh_yz5NjaeJy_OglL0SGw&bvm=bv.58187178,d.cGU)，这样您就可以从内部对此类事情进行更多控制。

# textbox - 三.JS——场景中与文本框冲突的Camera控件

> ID：12457487
> 
> 赞同：4
> 
> 时间：2012-09-17T10:33:25.340
> 
> 标签：textbox, camera, controls, three.js

请你看看下面的链接。

[https://dl.dropbox.com/u/44791710/rotate/rotate.html](https://dl.dropbox.com/u/44791710/rotate/rotate.html)

我的相机控件和文本框有问题。使用控件时无法更改文本框的值。当我删除控制线时，文本框是可编辑的。

请你检查一下。非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T20:10:26.127

尝试这个：

```
controls = new THREE.TrackballControls( camera, renderer.domElement ); 
```

第二个参数默认为`document`，我认为这是问题所在。

（您显然也必须更改某些代码的顺序。）

编辑：作为参考，您还可以使用此构造：

```
// container
container = document.createElement( 'div' );
document.body.appendChild( container );

// renderer
renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
container.appendChild( renderer.domElement );

//controls
controls = new THREE.TrackballControls( camera, container ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T19:05:41.543

点击和按键事件不会到达文本框。您可以删除“控制”代码中的下一行：

```
event.preventDefault();
event.stopPropagation(); 
```

# apache-flex - Flex - 将资产下载到本地

> ID：12457489
> 
> 赞同：0
> 
> 时间：2012-09-17T10:33:30.603
> 
> 标签：apache-flex, download, local, assets

我有一个交互式演示文稿，一切正常。现在我想添加一个功能来下载当前可见的图像/视频。

因为这个演示文稿有很多文件（所有文件都存储在 assets/... 下）并且浏览资源很痛苦，所以我想要一种简单的方法，只需单击一个按钮并获得一个“另存为..”窗口。

我已经设法获取媒体的 url，所以现在我只需要一种方法来显示“另存为..”对话框，以允许用户保存/下载文件并将其保存在本地。

整个演示文稿都应该放在网上，因此所有文件都位于项目内 /assets/.. 文件夹中的某个位置。

关于如何做到这一点的任何想法？=)

谢谢！

编辑#1：现在我使用“navigateToURL”来打开一个带有媒体的新浏览器窗口。这可行，但有没有办法显示“另存为..”对话框而不是打开图像？

或任何其他方式来做到这一点？=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:28:02.013

您正在寻找[FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)类，特别是`FileReference.save( data:*,defaultFileName:String = null )`方法。这将打开一个“保存...”对话框以保存相应的数据对象并允许您设置默认文件名。我不确定这个类是否也可以处理下载，因为我从来没有需要提示保存要下载的东西的时候。如果它无法处理，则需要查看[URLStream](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLStream.html)类。这可以处理下载，并且在 ProgressEvent.PROGRESS 或 Event.COMPLETE 上，您只需`URLStream.readBytes( byteArray );`将下载的字节保存到 ByteArray，然后这就是您保存的数据对象。不过，我会研究 FileReference 类。奇怪的是它也可以处理下载。

# classification - 用于分类的遗传算法

> ID：12457490
> 
> 赞同：2
> 
> 时间：2012-09-17T10:33:32.417
> 
> 标签：classification, genetic-algorithm, genetic-programming

我正在尝试使用 Matlab [GPTIPS](https://sites.google.com/site/gptips4matlab/)框架解决分类问题。到目前为止，我设法建立了合理的数据表示和适应度函数，并且每类的平均准确率接近 65%。

我现在需要的是一些有两个困难的帮助：

1.  我的数据有偏差。基本上我在解决二进制分类问题，只有 20% 的数据属于 1 类，而其他 80% 属于 0 类。我最初使用预测的准确性作为我的适应度函数，但它真的很糟糕。我现在最好的是

    适应度 = 0.5*(PositivePredictiveValue + NegativePredictiveValue) - const*ComplexityOfSolution

请建议，我该如何改进我的功能以纠正数据偏差。

1.  第二个问题是过拟合。我将我的数据分为三部分：训练（70%）、测试（20%）、验证（10%）。我在训练集上训练每个染色体，然后在测试集上评估它的适应度函数。这个例程让我在测试数据上达到 0.82 的适合度，以获得人群中最好的个体。但同一个人在验证数据上的结果只有 60%。每次在生成新种群之前，我都会添加对最佳个体的验证检查。然后我将验证集的适应度与测试集的适应度进行比较。如果差异超过 5%，那么我会增加适应度函数中解决方案复杂性的惩罚。但这没有帮助。我还可以尝试在每一代使用验证集评估所有个体，并简单地删除过度拟合的个体。但后来我不 看不到我的测试和验证数据之间的任何区别。这里还能做什么？

**更新：**

对于我的第二个问题，我发现了很棒的文章[“在遗传编程中控制过度拟合的实验”](http://epia2011.appia.pt/LinkClick.aspx?fileticket=EZfzr1SMpU0=&tabid=562)以及一些文章作者关于处理 GP 中过度拟合的想法，它具有令人印象深刻的评论，其中引用了许多解决该问题的不同方法。现在我有很多新想法可以尝试解决我的问题。不幸的是，在选择合适的适应度函数时仍然找不到任何东西，它会考虑到我数据中不平衡的类比例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:38:31.853

当基线（将所有内容分类为具有最多样本的类）为 80% 时，65% 的准确度非常糟糕。您至少需要实现基线分类才能拥有比幼稚模型更好的模型。

我不会惩罚复杂性。而是限制树的大小（如果可能）。您可以在运行期间识别更简单的模型，例如存储具有质量和复杂性的模型的帕累托前沿作为其两个适应度值。

在[HeuristicLab](http://dev.heuristiclab.com)中，我们集成了基于 GP 的分类，可以做这些事情。有几个选项：您可以选择使用 MSE 进行分类或 R2。在最新的主干构建中，还有一个直接优化准确性的评估器（确切地说，它优化了分类惩罚）。优化 MSE 意味着它为每个类分配一个值 (1, 2, 3,...) 并尝试最小化该值的均方误差。起初这似乎不是最佳选择，但有效。直接优化精度可能会导致更快的过拟合。还有一个公式简化器，可让您修剪和缩小公式（并查看其效果）。

还有，需要GP吗？您是否也尝试过随机森林分类或支持向量机？RF 速度很快，而且通常工作得很好。

# c# - 如何使用实体框架在具有相同列 ID 的数据库中插入多个值

> ID：12457493
> 
> 赞同：-1
> 
> 时间：2012-09-17T10:33:41.083
> 
> 标签：c#, sql-server-2008

我正在做食堂管理系统项目，我想用一个订单 ID 插入我应该在 sql 数据库中插入多个项目。

我将每个食品作为一个订单 ID，但我想将多个食品作为每个订单 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:35:28.377

如果您使用 EntityFramework 或 LinqToSQL，您可以使用以下代码获取项目：

```
var ItemsOfOrder = from n in Orders
where n.id = 1231
select n.Items

foreach(var Item in ItemsOfOrder)
{
   Print(Item);
} 
```

多次插入：

Crete 一个订单和多个项目。然后将 Items 添加到 Order 的导航属性（导航到 Items）

```
Order ord = new Order();

Item item1 = new Item();
Item item2 = new Item();
Item item3 = new Item();

ord.Items.Add(item1);
ord.Items.Add(item2);
ord.Items.Add(item3);

DbContext db = new DbContext();
db.Orders.Add(ord);
db.SaveChanges; 
```

# php - 我正在尝试找出正确的 CSS 以使此代码适用于网站上的 Facebook 提要

> ID：12457494
> 
> 赞同：0
> 
> 时间：2012-09-17T10:33:45.813
> 
> 标签：php, javascript, html, css, facebook

我将下面的代码用于我在网站上的 Facebook 提要。问题是它列出了应有的图像和新闻，但是对于我的生活，我无法弄清楚如何将图像放在它们的上面并将相关的文本很好地显示在它的右侧。有人可以帮忙吗。

这是代码：

```
<?php
//Get the contents of the Facebook page
$FBpage = file_get_contents('https://graph.facebook.com/135860723149188/feed?      access_token=456215171075777|OcFg4Sf293Pg3NXeJkg1h3Bg8wE'
);

//Interpret data with JSON
$FBdata = json_decode($FBpage);
//Loop through data for each news item
foreach ($FBdata->data as $news ) {
//Explode News and Page ID's into 2 values
$StatusID = explode("_", $news->id);
echo '<li class="fbframe"; style="list-style:none;" >';
//Check for empty status (for example on shared link only)

if (!empty($news->picture)) {
printf ('<img src="%s" alt="Image from Facebook" />', $news->picture);
}

if (!empty($news->message)) { echo $news->message; }
echo '</li>';
} //end of fbframe
?> 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:31:17.107

听起来 Nicole Sullivan 的[媒体对象](http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/)正是您正在寻找的，Facebook 和所有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:36:46.920

*   `<li>`将元素包装在`<ul style="list-style:none;">`
*   去掉后面的分号`"fbframe";`

# wcf - 如何在 UriTemplate 中传递 DateTime 参数？

> ID：12457495
> 
> 赞同：0
> 
> 时间：2012-09-17T10:33:46.047
> 
> 标签：wcf, rest

我想知道如何在创建
REST 服务时在 UriTemplate 和 Url 中传递 DateTime 参数（即 datatype=DateTime）？示例：如果我想在 UriTemplate 和 serviceUrl 中将日期作为 9/17/2012 传递，那么该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:37:34.637

我能够成功使用的唯一日期格式是 Unix Epoch 格式。例如，要发送`31Dec2012 05:00:00`，我会发送`1356930000000`

如果您使用的是 javascript，这是我们从`getTime()`日期变量的函数中获得的值：

```
var milliseconds = (new Date).getTime(); 
```

WCF Web 服务接受此值并成功转换为日期时间。

# iphone - iphone / ipad上的初始宽度

> ID：12457513
> 
> 赞同：1
> 
> 时间：2012-09-17T10:35:27.467
> 
> 标签：iphone, html, css, ipad, mobile-safari

我正在将此模板用于wordpress：

[http://demos.itsmattadams.com/jetwire/](http://demos.itsmattadams.com/jetwire/)

当我尝试在 iphone/ipad 上加载时，页面不适合所有宽度，因为只显示一部分。我也不想要水平滚动。

如果我从 ThemeForest 链接打开主题，效果很好（也许对于 iframe？）：

[http://themeforest.net/item/jetwire-powerful-wordpress-blog-theme/full_screen_preview/2919709](http://themeforest.net/item/jetwire-powerful-wordpress-blog-theme/full_screen_preview/2919709)

我尝试将主容器宽度更改为 960px，但不起作用。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:22:39.543

删除此行

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
```

然后该站点应自动适应视口。这条线基本上是告诉设备`width=device-width`通过“放大”来获取设备的像素宽度 ( ) 并将其与您的站点相匹配。假设您的网站宽 960 像素，设备宽 320 像素；然后它将仅显示站点的最左侧部分（320 像素宽），将 640 像素“流过”到右侧。不指定视口宽度将强制设备显示整个站点。

# java - 上下文菜单操作后数据表未更新

> ID：12457515
> 
> 赞同：0
> 
> 时间：2012-09-17T10:35:30.010
> 
> 标签：java, jsp, jsf, primefaces

我有这个代码：

```
 <p:contextMenu for="customersTable">  
            <p:menuitem value="Delete" update="customersTable" icon="ui-icon-close" actionListener="#{customerbean.onDeleteCustomer}"/>  
            </p:contextMenu>  

            <p:dataTable id="customersTable" var="customer" widgetVar="customerTable" value="#{customerbean.customerList}" paginator="true" rows="20" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="10,20,50,100" emptyMessage="#{text['table.customer.filter.notfound']}" filteredValue="#{customerbean.filteredCustomers}" editable="true" draggableColumns="true" rowKey="#{customer.id}" selection="#{customerbean.selectedCustomer}" selectionMode="single"> 
```

我的问题是，当我单击 contextMenu 中的“删除”时，一切正常，因为记录/行正在通过 bean 方法调用从后端删除，但是表没有更新以反映新数据.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:55:36.023

您必须在更新时为 dataTable 提供完整的组件 ID。

```
 <h:form id="frm">
  <p:contextMenu for="customersTable">  
        <p:menuitem value="Delete" update="frm:customersTable" icon="ui-icon-close"  actionListener="#{customerbean.onDeleteCustomer}"/>  
        </p:contextMenu>  
        <p:dataTable id="customersTable" var="customer" widgetVar="customerTable"         value="#{customerbean.customerList}" paginator="true" rows="20" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="10,20,50,100" emptyMessage="#{text['table.customer.filter.notfound']}" filteredValue="#{customerbean.filteredCustomers}" editable="true" draggableColumns="true" rowKey="#{customer.id}" selection="#{customerbean.selectedCustomer}" selectionMode="single"> 

 </h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:35:42.790

好的，我发现了问题所在 - 非常琐碎。我是从数据库中删除它，而不是从 Primefaces 用来在屏幕上呈现它的 Collection 中删除它。它需要从两者中删除。

# c# - AutoMapper IsSourceValueNull 条件不起作用

> ID：12457516
> 
> 赞同：2
> 
> 时间：2012-09-17T10:35:30.063
> 
> 标签：c#, .net, unit-testing, automapper

我正在使用此[Using DynamicMap() and ignore null source value](https://stackoverflow.com/questions/3704512)方法来使映射器忽略源上具有 NULL 值的属性，但这在**2.1.267.0**版本（当前）中似乎不起作用。

这是我的映射配置：

```
Mapper.CreateMap<PersonDTO, Person>().ForAllMembers(
    opt => opt.Condition(srs => !srs.IsSourceValueNull)); 
```

这是我的测试：

```
// Arrange   
var Person = new Person { FirstName = "Bruce", Surname = "Lee"};
var PersonDto = new PersonDTO { FirstName = "Jet", Surname = null };

// Act
Mapper.Map(PersonDto, Person);

// Assert
Assert.AreEqual("Jet", Person.FirstName); // Assert.AreEqual failed. Expected:<Jet>. Actual:<Bruce>. 
Assert.AreEqual("Lee", Person.Surname, "Surname field with NULL value should not have been mapped"); 
```

对你起作用吗？如果是这样，你能在我的代码中发现问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:12:16.143

这应该在 AutoMapper 2.2 版中修复

# git - git合并重复冲突

> ID：12457517
> 
> 赞同：12
> 
> 时间：2012-09-17T10:35:33.130
> 
> 标签：git, merge

我有一个分支`master`和一个`feature`从`master`.

`master`从其他开发人员那里获得提交，我会定期合并`master`回`feature`，以便它跟上其他分支的新开发。

但是，每次执行 a 时，我都会在相同的文件中遇到相同的冲突`git merge master`，尽管我之前解决了冲突并提交了更改。

关于可能是什么原因以及如何预防的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T10:39:30.377

首先考虑不要将集成分支合并到功能分支中。

其次看一下[git rerere](http://gitster.livejournal.com/41795.html)命令并使用它：

```
$ git config --global rerere.enabled true 
```

> 姓名
> 
> ```
>  git-rerere - Reuse recorded resolution of conflicted merges 
> ```
> 
> 描述
> 
> ```
>  In a workflow employing relatively long lived topic branches,
>   the developer sometimes needs to resolve the same conflicts
>   over and over again until the topic branches are done (either
>   merged to the "release" branch, or sent out and accepted upstream) 
> ```

# android - getPositionForSection 和 getSectionForPosition 之间的区别

> ID：12457518
> 
> 赞同：2
> 
> 时间：2012-09-17T10:35:40.463
> 
> 标签：android, listview, sectionheader

我正在使用部分来实现`ListView`，在该部分中，除了常规字母之外，我还显示自定义部分标题作为标题。为了让我`SectionIndexer`正确实现自定义，我希望了解这两种方法`getSectionForPosition`和`getPositionForSection`.

我了解（不确定这是否正确）`getSectionForPosition`返回我们要在节标题中显示的字母表。

我不明白其他方法。此外，它们在任何意义上是否相似（如果有的话）以及它们有何不同（如果它们相似，我认为它们是相似的:)）

任何对此有所了解的人都可以对此发表答案。感谢您花时间解决问题。

**更新：**

我已经浏览了这个[官方页面上](http://developer.android.com/reference/android/widget/SectionIndexer.html)的文档；我正在寻找有关自定义`SectionIndex`实现的详细见解

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:45:42.243

`getPositionForSection(section)`返回索引列上的游标数据从节开始的第一个位置。

例如如果B节的索引为1并且游标的索引列有以下数据

```
Position        Data               getSectionForPosition(position)

_________       __________         ______________________________

0               Abhfdf              0

1               Achahtkh            0

2               Ahtjlarej           0

3               Bchatkd             1

4               Bjklhdsfoi          1

5               Bzhafdlsfk          1

6               Cj fadsfkj          2 
```

然后`getPositionForSection(1)`返回 3

也`getPositionForSection(2)`返回 6

希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:25:39.170

这是我创建的示例实现。也许它澄清了 SectionIndexer 一点。

为了保存您的数据，您可以使用私有内部类：

```
private class Item {
    public int sectionNumber;

    public Long id;
    public String name;
}

private class Section {
    public int startPosition;

    public String header;

    @Override
    public String toString(){
        return header;
    }
} 
```

为您的项目使用一个列表，为您的部分使用一个列表：

```
private List<Item> items = new ArrayList<Item>();
private List<Section> sections = new ArrayList<Section>(); 
```

SectionIndexer 的列表适配器中的实现现在可能如下所示：

```
@Override
public int getPositionForSection(int sectionNumber) {
    return sections.get(sectionNumber).startPosition;
}

@Override
public int getSectionForPosition(int itemPosition) {
    return items.get(itemPosition).sectionNumber;
}

@Override
public Object[] getSections() {
    return sections.toArray();
} 
```

当然，您现在应该实现一个方法来填充适配器的数据列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:42:56.483

该方法`getPositionForSection(int section)`返回列表中的起始索引`section`

而该方法`getSectionForPosition(int position)`返回您包含项目的部分的索引`position`

# html - Metro 应用程序中的 AppBar 命令导航问题？

> ID：12457519
> 
> 赞同：1
> 
> 时间：2012-09-17T10:35:45.907
> 
> 标签：html, windows-8, microsoft-metro, winjs, appbar

我有一个地铁应用程序，其中我的主页中有 AppBar。这里每个 AppBarCommand 将具有不同的功能，例如，如果我单击每个 AppBarCommand，它们将在我的主页中加载不同的列表视图。但是我的问题是当我单击每个listview-item 它必须导航到其他页面，第一个 AppBarCommand 在我的应用程序中运行良好，但是从第二个 AppBarCommand onwords 加载 listviews 运行正常，但是单击该 listview-items 将终止我的应用程序。我尝试了很多但无法解决这个问题。下面我试着给你我的场景。谁能给我一些有用的建议。谢谢！![](../Images/355cb09701537adfcb350adb4e55e814.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:31:04.940

每当发生未处理的异常时，应用程序就会被终止。在调试模式下运行您的应用程序以查看异常，这将帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:37:41.957

您是否尝试过删除 ItemInvoked 的 EventListener 并再次添加它？很高兴看到一些代码！

# .net - 如何使用 CruiseControl 从 SVN 获取特定构建的代码？

> ID：12457523
> 
> 赞同：2
> 
> 时间：2012-09-17T10:36:16.613
> 
> 标签：.net, svn

我正在使用巡航控制 .net 从 SVN 获取应用程序的代码。我想根据更改的集合来获取它，下面是场景。

如果一个团队在构建 1，第二个团队在构建 2，并且他们定期在 SVN 上提交代码。

我只想获取构建 1 的代码，而不是构建 2。如何使用巡航控制 .net 获取它？一个例子将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:19:51.930

对 SVN 的每个提交都有一个唯一的修订号。例如，要将工作版本更新为特定版本，请使用：

```
svn update -r REV 
```

build 1 或 build 2 的修订号在哪里`REV`。有关[`svn update`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.update.html).

或者，如果团队已经分支了他们的构建，请使用[svn switch](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.switch.html)。例如：

```
svn switch URL 
```

`URL`分支的 URL 在哪里。如果您不知道用于构建的修订号，请使用[svn log](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.log.html)查看更改历史以及构建完成时哪个修订是 HEAD。

> 你能告诉我变更集是否是源代码控制的一个功能吗？

“变更集”对于不同的源代码控制系统可能意味着不同的东西。我假设您在询问源代码控制系统是否 (1) 唯一标识一组进行更改的文件，以及 (2) 更改是否是原子的。是的，SVN 两者都做。每个提交（更改）都由一个修订号唯一标识。

> 我们如何使用巡航控制和 nant 来实现它？

查看 NantContrib [svn](http://nantcontrib.sourceforge.net/release/0.91/help/tasks/svn.html)、[svn-checkout](http://nantcontrib.sourceforge.net/release/0.91/help/tasks/svn-checkout.html)和[svn-update](http://nantcontrib.sourceforge.net/release/0.91/help/tasks/svn-update.html) Nant 任务。例如，要将 myproject 的代码放入 c:\src 中，其中 c:\src 不是工作集，请使用：

```
 <svn-checkout 
             destination="c:\src" 
             svnroot="http://server/svn/repos/projects/myproject" 
             revision="HEAD"
             username="user"
             password="password" 
              /> 
```

并将 HEAD 替换为所需的修订号。

# objective-c - 如何在objective-c中实现链表？

> ID：12457524
> 
> 赞同：4
> 
> 时间：2012-09-17T10:36:17.823
> 
> 标签：objective-c

> **可能重复：**
> [在 Objective C 中创建链表](https://stackoverflow.com/questions/4262223/creating-linked-lists-in-objective-c)

我试图了解链表是什么。无论如何在Objective-C或一些示例代码中实现它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T10:45:50.457

链表在 C 中对处理动态长度列表很有用。这不是 Objective-C 中的问题，因为您有`NSMutableArray`.

所以相当于：

```
struct my_list {
  int value;
  struct my_list *next;
};
struct my_list list1;
struct my_list list2;
list1.next = &list2;
list1.value = 5;
list2.value = 10; 
```

将会：

```
NSMutableArray* array = [[NSMutableArray alloc] init];
[array addObject:[NSNumber numberWithInt:5]];
[array addObject:[NSNumber numberWithInt:10]]; 
```

当然，您可以在 Objective-C 应用程序中使用经典的链表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:02:42.040

不需要使用数组。**MyEvent**对象也包含下一个**MyEvent**。所以你只需创建下一个对象。所以你只需要初始化。

例如

```
MyEvent *obj = [[MyEvent alloc]init]; 
```

子节点。

```
obj.nextEvent = [[MyEvent alloc]init]; 
```

# html - 图像悬停不起作用

> ID：12457526
> 
> 赞同：0
> 
> 时间：2012-09-17T10:36:26.873
> 
> 标签：html, css, image, mousehover

我创建了一个包含几个区域的图像地图。

当我将鼠标悬停在特定区域上时，它应该在其顶部显示一个标记。这在 Chrome 中完美运行，但在 Firefox 或 IE 中不适用。

任何建议为什么这不起作用？
HTML：

```
<area class="name sold" 
      shape="poly" 
      coords="121,282,101,277,93,259,93,231,103,212,131,207,157,229,149,272," 
      href="#" alt="" title="" /> 
```

CSS：

```
.name 
{
    position: absolute;
    top: 225px;
    left: 50px;
    display: block;
    width: 150px;
    height: 150px;
    z-index: -100;
}
.name.sold:hover 
{
    background-image: url('sold.png');
    background-position: 0 0;
    background-repeat: no-repeat;
    z-index: 100;
}
.name.sale:hover 
{
    background-image: url('forsale.png');
    background-position: 0 0;
    background-repeat: no-repeat;
    z-index: 100;
} 
```

该区域有效，但是当将鼠标悬停在它上面时它什么也没做。

现场示例：http: [//jonasgeuens.be/test/](http://jonasgeuens.be/test/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:51:30.913

我可能是错的，但我不认为图像映射可以做你在这里尝试做的事情，即将较小的图像放在原始图像映射的顶部。

这里的正常做法可能是使用 javascript。

或者，您可以将大图像作为 DIV 上的背景（或作为具有低 z-index 的常规图像），然后使用绝对定位和更高的 z-index 和 display:block 将链接放在它的顶部。然后悬停在这些链接上，您可以显示您的小图像。

# c# - asp.NET C# - Oracle 命令的 ExecuteNonQuery() 问题

> ID：12457527
> 
> 赞同：0
> 
> 时间：2012-09-17T10:36:27.690
> 
> 标签：c#, oracle

我有一个查询有这个问题，我正在使用 Oracle 命令和参数。我的代码中有数百个其他查询，但只有这个无法执行。这是一个非常简单的更新查询，它可以在 SQL Navigator 中使用，因为我尝试过。

在代码中，执行非查询方法似乎冻结了，我在我的网页中得到“等待 http://localhost:8081/MaintainUserProfile.aspx”。

感谢您的帮助，因为我已经浪费了很多时间，而且在这个阶段我一无所知。

让我知道我是否应该说明更多信息。

下面的代码（请注意我使用 oracle 参数，但在这种情况下，我只是使用纯字符串来调试问题，oracle 参数也会发生同样的情况，它会卡在执行非查询上）：

```
string sqlQuery = @"UPDATE schema_name.table_name
                    SET
                       officer_name = '" + fullName + 
                       "', channel_code = " + channelCode +
                       ", male_female_ind = '" + maleFemale + 
                       "', user_status_code = '" + userStatusCode +
                       "', identity_number = '" + idNumber +
                       "', extension_number = " + extensionNumber +
                       " WHERE user_profile_id = " + userProfileID;

 OracleCommand oraCommand2 = new OracleCommand(sqlQuery, db);
 oraCommand2.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:43:53.090

您可以尝试使用此代码 - 基于`AddWithValue`

```
oraCommand2.CommandText="UPDATE schema_name.table_name SET
                       officer_name = :fullName , channel_code = :channelCode, 
                       male_female_ind = :male_female_ind, user_status_code = :user_status_code,
                       identity_number = :idNumber, extension_number = :extensionNumber 
                       WHERE user_profile_id = :userProfileID";

oraCommand2.Parameters.AddWithValue(":fullName", fullName);
oraCommand2.Parameters.AddWithValue(":channelCode", channelCode);
oraCommand2.Parameters.AddWithValue(":male_female_ind", male_female_ind );
oraCommand2 .Parameters.AddWithValue(":user_status_code", user_status_code );
oraCommand2 .Parameters.AddWithValue(":identity_number", identity_number );
oraCommand2 .Parameters.AddWithValue(":extension_number", extension_number );
oraCommand2 .Parameters.AddWithValue(":user_profile_id", user_profile_id ); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.oracleclient.oracleparametercollection.addwithvalue.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.oracleclient.oracleparametercollection.addwithvalue.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T08:31:20.740

Kenneth 在这篇[文章](https://stackoverflow.com/questions/1172378/oracle-update-hangs)中回答了这个问题，这可能是由于 SQLDeveloper 中未提交的操作（或任何其他未提交的挂起数据库更改）。

# android - Android RSS 源现在显示空白

> ID：12457528
> 
> 赞同：0
> 
> 时间：2012-09-17T10:36:27.957
> 
> 标签：android, rss, xmlhttprequest, android-asynctask

我已经预先解析了这个 RSS 源，现在我已经更新它以使用 AsyncTask 它现在显示一个空白屏幕而不是一个填充的列表视图代码：

```
public class CustomizedListView extends Activity {

static String URL= "http://scout.org/rss/feed/all";
static final String KEY_ITEM = "item"; 
static final String KEY_TITLE = "title";
static final String KEY_DESCRIPTION = "description";
static final String KEY_LINK = "link";
static final String KEY_PUB_DATE = "pubDate";
 String PATH = Environment.getExternalStorageDirectory()
         + "/SCOUTS/";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.news);
    SharedPreferences sharedPrefs =   PreferenceManager.getDefaultSharedPreferences(this);
    URL= sharedPrefs.getString("news_feed", "-1");
    ArrayList<HashMap<String, String>> libraryList = new ArrayList<HashMap<String, String>>();
    list=(ListView)findViewById(R.id.listView1);            
    adapter=new LazyAdapter(CustomizedListView.this, libraryList);        
    list.setAdapter(adapter);
     new MyAsyncTask() .execute();
}

  class MyAsyncTask extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> > {
      private ProgressDialog progressDialog = new ProgressDialog(CustomizedListView.this);

        protected void onPreExecute() {
           progressDialog.setMessage("Loading Latest WOSM News");
           progressDialog.show();}

        ArrayList<HashMap<String, String>> libraryList = new ArrayList<HashMap<String, String>>();

              @Override
          protected ArrayList<HashMap<String, String>> doInBackground(String... params) {
                  try {
                    new DefaultHttpClient().execute(new HttpGet(URL))
                    .getEntity().writeTo(

                            new FileOutputStream(new File(PATH,"news.xml")));
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                  File dir = Environment.getExternalStorageDirectory();
                  File yourFile = new File(dir, "/SCOUTS/news.xml");
                  FileInputStream stream = null;
                try {
                    stream = new FileInputStream(yourFile);
                } catch (FileNotFoundException e2) {
                    // TODO Auto-generated catch block
                    e2.printStackTrace();
                }
                  String jString = null;
                  try {
                      FileChannel fc = stream.getChannel();
                      MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
                      /* Instead of using default, pass in a decoder. */
                      jString = Charset.defaultCharset().decode(bb).toString();
                    } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                    finally {
                      try {
                        stream.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    }

                final ArrayList<HashMap<String, String>> libraryList = new ArrayList<HashMap<String, String>>();

                XMLParser parser = new XMLParser();
                String xml = jString;
                Document doc = parser.getDomElement(xml); 

                NodeList nl = doc.getElementsByTagName(KEY_ITEM);

                for (int i = 0; i < nl.getLength(); i++) {

                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);

                    map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                    map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
                    map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
                    map.put(KEY_PUB_DATE, parser.getValue(e, KEY_PUB_DATE));

                    libraryList.add(map);

            }
            return libraryList;}

          @Override
          protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

                list=(ListView)findViewById(R.id.listView1);            
                adapter=new LazyAdapter(CustomizedListView.this, libraryList);        
                list.setAdapter(adapter);
                this.progressDialog.dismiss();

                list.setOnItemClickListener(new OnItemClickListener() {

                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                          HashMap<String, String> map = libraryList.get(position);

                        Intent in = new Intent(CustomizedListView.this, org.scouts.android.news.Podcast.class);
                        in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
                        in.putExtra(KEY_DESCRIPTION, map.get(KEY_DESCRIPTION));
                        in.putExtra(KEY_LINK, map.get(KEY_LINK));
                        in.putExtra(KEY_PUB_DATE, map.get(KEY_PUB_DATE));

                        startActivity(in);
                    }
                }); 

        ;}}} 
```

我不知道是什么原因造成的，但如果你能帮忙，请做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:05:49.230

我正在和网络家伙交谈，这是一个服务器端问题。

# objective-c - NSThread 和事件

> ID：12457529
> 
> 赞同：0
> 
> 时间：2012-09-17T10:36:32.850
> 
> 标签：objective-c, nsthread

我使用类似于 android toast 的东西向用户发送消息。

此 toast 显示在当前视图中，在这种情况下我想更改视图，并且没有时间阅读消息。

所以，我用一个线程在当前视图中停留了 3 秒，但是 toast 也被延迟了。

```
[theHoleView makeToast:@"OK!!" duration:3 position:@"center" image:[UIImage imageNamed:@"nocorrect.png"]];
[NSThread sleepForTimeInterval:3];
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

我在 Toast 之后执行 NSThread，为什么 toast 延迟了？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:48:29.607

这是因为你还没有回到绘制屏幕的主循环。您可以使用 刷新图形上下文`[CATransaction flush]`，即

```
[theHoleView makeToast:@"OK!!" duration:3 position:@"center" image:[UIImage imageNamed:@"nocorrect.png"]];
[CATransaction flush];
[NSThread sleepForTimeInterval:3];
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

您可能需要添加 Quartz 框架才能使其正常工作，确保将框架添加到目标并将标头导入 ViewController.m 文件中。IE：

```
#import <QuartzCore/QuartzCore.h> 
```

# javascript - Jscrollpane中的绝对位置div

> ID：12457531
> 
> 赞同：2
> 
> 时间：2012-09-17T10:36:36.797
> 
> 标签：javascript, jquery, jscrollpane

Jscrollpane 似乎存在一个根本问题。当滚动窗格内有绝对位置 div 时，垂直滚动不起作用。这是我的代码：

```
<script type="text/javascript">
 $(document).ready(function(){  

$('#test').jScrollPane({showArrows: true,
    verticalArrowPositions: 'split',
    horizontalArrowPositions: 'split',
    autoReintialise: true
    });

});
</script>

<div id="test" style="width:600px; height:500px">

  <div style="width:400px;height:1200px;border:1px solid #000;position:absolute">
            test test test</div>
  </div> 
```

如何使用绝对定位的 div 完成这项工作？

# tfs - 无法将测试用例添加到 IRequirementTestSuite 类型

> ID：12457532
> 
> 赞同：1
> 
> 时间：2012-09-17T10:36:38.183
> 
> 标签：tfs, tfs-sdk

我已经使用 TFS API 创建了一个测试用例工作项。当我尝试将测试用例添加到 IStaticTestSuite 时，它​​是成功的。

```
 if (firstMatchingSuite.TestSuiteType == TestSuiteType.StaticTestSuite)
           ((IStaticTestSuite)firstMatchingSuite).Entries.Add(testCase); 
```

但我无法使用以下代码向 IRequirementTestSuite 添加测试用例。我收到“无法添加或删除测试用例”错误。

```
 if (firstMatchingSuite.TestSuiteType == TestSuiteType.RequirementTestSuite)
          ((IRequirementTestSuite)firstMatchingSuite).TestCases.Add(testCase); 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:37:49.037

是的。

我发现的唯一方法是通过 TFS API 本身（仅使用您所写的内容）：

```
var store = ((IRequirementTestSuite)firstMatchingSuite).Project.WitProject.Store;
var tfsRequirement = store.GetWorkItem(((IRequirementTestSuite)firstMatchingSuite).RequirementId);

tfsRequirement.Links.Add(new RelatedLink(store.WorkItemLinkTypes.LinkTypeEnds["Tested By"], testCase.WorkItem.Id));
tfsRequirement.Save();

((IRequirementTestSuite)firstMatchingSuite).Repopulate(); 
```

它有效，我检查了！

享受 ：）

# search - Solr 只返回完全匹配

> ID：12457535
> 
> 赞同：0
> 
> 时间：2012-09-17T10:36:50.523
> 
> 标签：search, solr, lucene

我终于让我的 Solr 工作了。它为帖子编制索引，我可以从我的网站上搜索它。我遇到了一个问题。

如果我有一个条目为“英格兰”，当我在我的网站上搜索“英格兰”或“英格兰”时，我会得到返回的结果。当我搜索“Eng”时，它告诉我没有结果。我不希望人们必须输入 * 进行查询。

我的问题是，我该如何做到这一点，这样它就不必与要返回的结果完全匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:00:10.970

要实现这种类型的搜索行为，您需要实现[EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory)

# iphone - 尽管 FPS 为 60，但屏幕上的内容更新速度很慢

> ID：12457536
> 
> 赞同：0
> 
> 时间：2012-09-17T10:36:52.637
> 
> 标签：iphone, cocoa-touch

我正在加载一个菜单，其中有 7 个层，我可以在其中滑动。在第一次加载时，刷卡在 60fps 时很流畅，但是我弹出场景并再次推送它，刷卡非常慢，尽管应用程序显示 60fps，并且 ccTouchesMoved 的调用间隔与第一次加载时大致相同。

在每一层上，我添加了一些静态 CCSprite 和一个 CCMenu。

所有项目都已解除分配，我正在 ipad 3 上测试该应用程序（因此速度不是问题）。

我认为原因更多在设置部分，并希望找到解决方案。如果有帮助，这是我的触摸方法：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    //Swipe Detection Part 1
    firstTouch = location;

}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    NSSet *allTouches = [event allTouches];
    UITouch * touch = [[allTouches allObjects] objectAtIndex:0];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    CGSize winSize = [[CCDirector sharedDirector] winSize];

    for(int i=0;i<[layerList count];i++)
    {

        [[layerList objectAtIndex:i] setPosition:CGPointMake((i-currentLayer)*winSize.width + (location.x - firstTouch.x),0) ];
    }
}

-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSSet *allTouches = [event allTouches];
    UITouch * touch = [[allTouches allObjects] objectAtIndex:0];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    //Swipe Detection Part 2
    lastTouch = location;

    //Swipe Detection Part 2
    lastTouch = location;

    //Minimum length of the swipe
    float swipeLength = ccpDistance(firstTouch, lastTouch);

    //Check if the swipe is a left swipe and long enough
    if (firstTouch.x > lastTouch.x && swipeLength > 60) {
        [self doStuffLeft];
    }
    else if (firstTouch.x < lastTouch.x && abs(swipeLength) > 60) {
        [self doStuffRight];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:17:23.140

想通了，[CCDirector sharedInstance] 被暂停了。

# android - 在旧 Android 版本上为 actionBarSherlock 使用 searchView 的原生外观

> ID：12457537
> 
> 赞同：2
> 
> 时间：2012-09-17T10:36:52.213
> 
> 标签：android, filtering, actionbarsherlock, searchview

我注意到没有有效的解决方案显示如何使用操作栏在 listView 项目上使用过滤器，该解决方案适用于较旧的 Android 版本（如 2.3.x）。

我发现的唯一示例是在片段示例的文件“LoaderCursorSupport.java”中。但是，它只有在可以创建 searchView 时才有效，即从 Android 3.x 开始，如代码所示：

```
View searchView=SearchViewCompat.newSearchView(getActivity());
if(searchView!=null)
... 
```

[即使在 actionBarSherlock 的4.2 版](https://github.com/JakeWharton/ActionBarSherlock/tree/dev)中，上述错误（或缺失的功能，无论您如何看待）仍然存在。

所以我制定了自己的解决方案，效果很好（我希望官方库也可以添加我的修复），但我不知道在哪里可以找到负责编辑文本视图中的“x”按钮清除文本。

谁能告诉我如何获得本机外观并将其正确放入代码中？

这是我正在谈论的屏幕截图：

![新 Android 版本上的 searchView](../Images/63ae0d5dc6e6d570cf06aa600a3bc362.png)

对于那些希望使用此功能的人，这是我的代码片段：

```
@Override
public boolean onCreateOptionsMenu(final com.actionbarsherlock.view.Menu menu)
  {
  getSupportMenuInflater().inflate(R.menu.activity_main,menu);
  _searchMenuItem=menu.findItem(R.id.menu_item_action_search);
  View searchView=SearchViewCompat.newSearchView(this);
  if(searchView!=null)
    SearchViewCompat.setOnQueryTextListener(searchView,new OnQueryTextListenerCompat()
      {
        @Override
        public boolean onQueryTextChange(final String newText)
          {
          _listAdapter.getFilter().filter(newText);
          return true;
          }

        @Override
        public boolean onQueryTextSubmit(final String query)
          {
          return super.onQueryTextSubmit(query);
          }
      });
  else
    {
    searchView=new EditText(this);
    searchView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
    ((EditText)searchView).setHint(R.string.search);
    ((EditText)searchView).addTextChangedListener(new TextWatcher()
      {
        String curretTextToFilter =null;

        @Override
        public void onTextChanged(final CharSequence newText,final int start,final int before,final int count)
          {
          if(newText==curretTextToFilter)
            return;
          curretTextToFilter=newText.toString();
          _listAdapter.getFilter().filter(curretTextToFilter==null||curretTextToFilter.length()==0 ? null : curretTextToFilter);
          }

        @Override
        public void beforeTextChanged(final CharSequence s,final int start,final int count,final int after)
          {}

        @Override
        public void afterTextChanged(final Editable s)
          {}
      });
    }
  final View finalSearchView=searchView;
  _searchMenuItem.setOnActionExpandListener(new OnActionExpandListener()
    {
      @Override
      public boolean onMenuItemActionExpand(final MenuItem item)
        {
        if(finalSearchView instanceof EditText)
          {
          final InputMethodManager m=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
          finalSearchView.requestFocus();
          if(m!=null)
            m.toggleSoftInput(0,InputMethodManager.SHOW_IMPLICIT);
          }
        return true;
        }

      @Override
      public boolean onMenuItemActionCollapse(final MenuItem item)
        {
        if(finalSearchView instanceof EditText)
          ((EditText)finalSearchView).setText(null);
        else _listAdapter.getFilter().filter(null);
        return true;
        }
    });
  _searchMenuItem.setActionView(searchView);
  //
  return true;
  }

@Override
public boolean onKeyUp(final int keyCode,final KeyEvent event)
  {
  if(keyCode==KeyEvent.KEYCODE_SEARCH)
    {
    _searchMenuItem.expandActionView();
    return true;
    }
  return super.onKeyUp(keyCode,event);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:30:34.660

除了“X”按钮之外，我认为其余的都可以使用一个名为[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)的主题库来完成。

# css - 选择不包括第一行的表格行

> ID：12457540
> 
> 赞同：0
> 
> 时间：2012-09-17T10:37:07.777
> 
> 标签：css, ruby, xpath, css-selectors, html-table

如何选择不包括第一行的表格行。表格行数可能会有所不同。

这是示例：

```
<table id="grdVerzekeringen" >
    <tr>
        <th>First name</th><th>Last name</th>
    </tr>
    <tr>
        <td>Pera</td><td>Peric</td>
    </tr>
    <tr>
        <td>Mika</td><td>Mikic</td>
    </tr>
    <tr>
        <td>Zika</td><td>Zikic</td>
    </tr>
</table> 
```

在此示例中，我想选择具有实际数据而不是标题数据的表行。我可以使用 css 选择器或 XPath。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:45:21.420

如果标题行使用`th`，你很幸运。只需使用以下 XPath 表达式：

```
table[@id="grdVerzekeringen"]/tr[td] 
```

如果标题也使用`td`，您可以使用该`position()`功能：

```
table[@id="..."]/tr[position()>1] 
```

# android - Android 卡在 LoaderManager 上

> ID：12457541
> 
> 赞同：0
> 
> 时间：2012-09-17T10:37:08.807
> 
> 标签：android, android-loadermanager

我有一个带有数据库和内容提供程序的应用程序。为了在`ListView`'s 中显示数据库中的一些数据，我使用`LoaderManager`. 它很简单，在大多数情况下都能很好地工作。

但是，当来自内容提供者的许多更改通知到达时，UI 就会完全过载。当光标观察到的 uri 上有很多插入（大约每秒 15 次）时，就会发生这种情况。我认为即使光标加载在后台，大量`bindView()`调用也足以使 UI 过载。

所以我想，在某些情况下，如上所述，将加载（以及`onLoadFinished()`调用）的数量限制为每秒一次。

*   有没有办法做到这一点`LoaderManager`？我试过玩但没有成功`startLoading()`，`stopLoading`无论如何不推荐。

*   或者也许我必须自己管理一个`Loader`，但如果这种情况不常见，我会感到惊讶。

谢谢你的建议。

**编辑**

我实际上错过了一种方法......`setUpdateThrottle(long delayMS)`完全按照我的意愿去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:52:26.180

您可以在内容提供程序中覆盖 applyBatch(...) 并执行以下操作：

```
@Override
public ContentProviderResult[] applyBatch(ArrayList<ContentProviderOperation> operations)
        throws OperationApplicationException {
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    db.beginTransaction();
    try {
        final int numOperations = operations.size();
        final ContentProviderResult[] results = new ContentProviderResult[numOperations];
        for (int i = 0; i < numOperations; i++) {
            results[i] = operations.get(i).apply(this, results, i);
        }
        db.setTransactionSuccessful();
        return results;
    } finally {
        db.endTransaction();
    }
} 
```

您可以使用它来将您的插入批处理到一个事务中，这样通知只会发生一次。

# javascript - jsf中的下拉菜单

> ID：12457542
> 
> 赞同：-1
> 
> 时间：2012-09-17T10:37:10.263
> 
> 标签：javascript, jsf

我正在尝试创建一个下拉菜单，如果选择了一个项目，则应该出现另一个下拉菜单。这是代码......任何建议都会很明显......谢谢

```
<p:selectOneMenu style="width:120px;" id="projectType"  value="#{projectManageBean.pmaster.pType}" required="true" 
                           requiredMessage="Project Type is required." >

                            <f:selectItem itemLabel="Select One" itemValue="" />  

                                 <f:selectItems  value="#{projectManageBean.projectList}" var="ptype" itemLabel="#{ptype}" itemValue="#{ptype}" />  
                              <p:ajax  event="change" listener="#{projectManageBean.projectTypeChanged}" update="projectTypeDetai" process="@this"></p:ajax>
                              <!--   <f:ajax  render="@"></f:ajax> -->

                         </p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:07:25.407

更新=“项目类型详细信息”。项目类型详细信息在哪里？不应该是 projectTypeDetail

# javascript - Facebook Graph Api - 获取事件类型

> ID：12457543
> 
> 赞同：0
> 
> 时间：2012-09-17T10:37:14.453
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

有没有办法知道事件的**类型**？例如 - 派对/商务/音乐会......
我认为我们过去可以这样做 - 但由于某种原因，我找不到任何[文件](https://developers.facebook.com/docs/reference/api/event/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:41:57.550

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:17:48.137

[在https://graph.facebook.com/EVENT_ID](https://graph.facebook.com/361768537237241?access_token=AAACEdEose0cBAJ19MxYtX59UzNG5crGpuxFEjbSzpSvQNZBcSjKl2IG4EdOPZBv2sZBgvUdbzj6sS6JEGkA2eNoNZClqQZBNGqSeAML9mkwZDZD)中查找**类别**标签

它似乎嵌套在**owner**下，因此这可能意味着它描述的是所有者而不是事件，但它可能仍然是您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T20:18:08.393

从api v2.4 开始，**类别**字段现在可用[https://developers.facebook.com/docs/graph-api/reference/event](https://developers.facebook.com/docs/graph-api/reference/event)

# html - 动态添加div时父div不调整高度

> ID：12457547
> 
> 赞同：6
> 
> 时间：2012-09-17T10:37:43.763
> 
> 标签：html, css

我正在动态添加 div，如[http://jsfiddle.net/Lijo/ZkLg6/5/](http://jsfiddle.net/Lijo/ZkLg6/5/)所示。

添加子元素时，父#mainHolder div 不会增加其宽度——因此子元素会破坏父 div。我们如何通过调整父 div 的高度来克服这个问题？

![在此处输入图像描述](../Images/8fd4b447a3aa74ebe55f2c45e4a5bfd5.png)

**jQuery**

```
$('input').click(function()
{
 var existingDirectChildrenDivCount = $('#mainHolder > div').size();

 if( existingDirectChildrenDivCount % 3 == 0)
 {
      $('#mainHolder').append ("<div class='firstDiv'> A  </div>")
 }

 if( existingDirectChildrenDivCount % 3 == 1)
 {
      $('#mainHolder').append ("<div class='secondDiv'> B </div>")
 }

 if( existingDirectChildrenDivCount % 3 == 2)
 {
      $('#mainHolder').append ("<div class='thirdDiv'> C  </div>")
 } 
```

}
);

**HTML**

```
<html>

   <input type="submit" value="Add" />
   <br/>   
   <div id="mainHolder">
   S    
  </div>

  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script>

</html> 
```

**CSS**

```
#mainHolder
{
    width: 400px;
    border-top: 3px solid orange;
    border-bottom: 3px solid red;
    border-left: 3px solid purple;
    border-right: 3px solid pink;
    height:auto;
}

.firstDiv
{
    float: left;
    display: inline;
    background-color: #f5B5f5;
    height:100px;
}

.secondDiv
{
    float: left;
    display: inline;
    background-color: #FF007F;
    height:100px;
}

.thirdDiv
{
    float: left;
    display: inline;
    background-color: Pink;
    height:100px;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-17T10:41:19.653

添加溢出：自动

```
#mainHolder
{
    width: 400px;
    border-top: 3px solid orange;
    border-bottom: 3px solid red;
    border-left: 3px solid purple;
    border-right: 3px solid pink;
    height:auto; overflow:auto
} 
```

在这里演示[http://jsfiddle.net/ZkLg6/11/](http://jsfiddle.net/ZkLg6/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:43:36.723

试试这个：http: [//jsfiddle.net/ZkLg6/7/](http://jsfiddle.net/ZkLg6/7/)

解决方法是使用 div 清除浮动元素。我不得不将您的动态元素推入 mainHolder 内的嵌套 div 中，以确保`clear`div 始终位于它们下方，但效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:43:07.070

尝试添加溢出：自动；到#mainHolder 的CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T10:43:31.633

解决方案是在 #mainHolder 末尾添加 a 并在此之前插入元素（或者每次添加新 div 时都删除并重新添加它。这是因为您使用的是浮点数，或者如果您可以删除来自其他 div 的浮动一切都应该按预期工作。溢出：自动；解决方案也很好，看起来更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T10:44:29.860

尝试这样的事情：

```
#mainHolder
{
    min-width: 400px;
    float:left;
    border-top: 3px solid orange;
    border-bottom: 3px solid red;
    border-left: 3px solid purple;
    border-right: 3px solid pink;
    height:20px;
} 
```

这里唯一的问题是字母“S”，但你可以把它放在某个 div 中。喜欢那些有颜色的。[这](http://jsfiddle.net/ZkLg6/9/)是更新的 JS 小提琴。

嗯。但如果你想增加宽度，而不是高度，这很有效。如果你想增加高度 - 只需添加溢出：隐藏；另外，您的 css 中还有一些变化。看看[JSfiddle](http://jsfiddle.net/ZkLg6/15/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T10:47:56.517

你必须清除浮动。您可以插入像 br 这样具有 clear:both 的元素。

这是您可以添加的一段代码以便工作：

```
$('#mainHolder').find("br").remove(); // remove already added br
$("<br>").css({clear : "both"}).appendTo($('#mainHolder')); // append a br after the last element. 
```

我已经更新了你的 jsFiddle：http: [//jsfiddle.net/ZkLg6/13/](http://jsfiddle.net/ZkLg6/13/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T10:50:34.823

检查这个[http://jsfiddle.net/ZkLg6/19/](http://jsfiddle.net/ZkLg6/19/)
我用过`overflow:hidden`

```
#mainHolder
{
width: 400px;
border-top: 3px solid orange;
border-bottom: 3px solid red;
border-left: 3px solid purple;
border-right: 3px solid pink;
height:auto; overflow:hidden;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-24T14:45:04.683

将overflow和height都设置为auto，现在父div的offsetHeight会动态更新！

# iphone - UIImagePickerController 白屏

> ID：12457548
> 
> 赞同：1
> 
> 时间：2012-09-17T10:37:45.237
> 
> 标签：iphone, ios, memory-management, uiimagepickercontroller

我一直在寻找 SO 来解决这个问题，但我没有找到任何可以解决我的问题的东西。所以这里是问题：

当我的应用程序应该在按钮触摸上加载 UIImagePickerController 时，它有时会加载白屏。

这是一个内存问题，因为这仅在触发内存警告时发生。似乎内存警告在两个视图控制器之间的转换时释放了原始视图控制器（加载图像选择器的视图控制器）。

这导致没有原始视图控制器并且没有加载 UIImagePickerController（因为它没有父级），换句话说就是白屏。

另外值得一提的是，我在“呈现” vc ant 之前和之后以编程方式触发了内存警告，它不会重现该问题：

```
[[UIApplication sharedApplication] _performMemoryWarning];
[self presentModalViewController:picker animated:YES];
[[UIApplication sharedApplication] _performMemoryWarning]; 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:50:24.117

我会：

1.  如果可以直接检查：检查`viewWillAppear`是否 `UIImagePicker`已加载并在需要时手动加载。
2.  如果无法直接检查：覆盖`didReceiveMemoryWarning`自定义 UIViewController 子类中的方法。将此函数设置为布尔值，`imagePickerNeedsReload = YES`并在 中检查此标志`viewWillAppear`，然后它们执行 1。

# certificate - WinHttpCertCfg 将证书安装到未知位置

> ID：12457550
> 
> 赞同：2
> 
> 时间：2012-09-17T10:37:57.650
> 
> 标签：certificate, winhttpcertcfg

我正在使用 winhttpcertcfg 将证书安装到“证书（本地计算机）/个人/证书”（MMC）中

```
winhttpcertcfg -i "C:\test.pfx" -c LOCAL_MACHINE\My -p removedForQuestion 
```

运行此命令会显示以下输出（没有错误，但也没有任何迹象表明它已经工作：

> Microsoft (R) WinHTTP 证书配置工具
> 
> 版权所有 (C) Microsoft Corporation 2001。

当我搜索证书时（我检查了当前用户和本地计算机），在 MMC 中没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:34:50.260

它实际上与 一起工作得很好`certutil`，所以我使用它而不是`winhttpcertcfg`安装然后单独授予权限。

```
certutil -f -p removedForQuestion -importpfx "C:\test.pfx" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T13:08:18.250

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384088(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384088(v=vs.85).aspx)

> -i 指定要从个人信息交换 (PFX) 文件导入证书。该参数后面必须跟文件名。**指定此参数时，还必须指定“-a”和“-c”。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T19:29:33.220

在为 winhttpcertcfg 选择替代方案时需要考虑几个复杂性。

查看答案

[https://serverfault.com/questions/620013/importing-a-certificate-and-granting-permissions-on-windows-server-2012-r2/622556#622556](https://serverfault.com/questions/620013/importing-a-certificate-and-granting-permissions-on-windows-server-2012-r2/622556#622556)

# android - 在 android 中使用 SAX 解析器解析远程 xml 文件时出现 ExpatParser$ParseException

> ID：12457552
> 
> 赞同：1
> 
> 时间：2012-09-17T10:38:03.533
> 
> 标签：android, parsing, sax

我正在使用 sax 解析来检索数据，并且在以下位置出现这样的错误`AsyncTask`：

```
org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 1615: not well-formed (invalid token)
org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:515)
org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:474)
org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:321)
org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:279) 
```

这里是我的代码：

```
 protected Void doInBackground(Void... params) {
                    try {
                URL rssUrl = new URL(
                        "http://www.google.co.in xxxxxxxx.in");
                SAXParserFactory mySAXParserFactory = SAXParserFactory
                        .newInstance();
                SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
                XMLReader myXMLReader = mySAXParser.getXMLReader();
                HanldlerImple myRSSHandler = new HanldlerImple();
                myXMLReader.setContentHandler(myRSSHandler);
                InputSource myInputSource = new InputSource(rssUrl.openStream());
                myXMLReader.parse(myInputSource);
                data=myRSSHandler.getdetaillist();
                } catch (Exception e) {
                e.printStackTrace();

            }
            return null;
        } 
```

但是当我传递给 parse 方法时`inputStream`，它不是`inputSource`解析 XML 文件，但仍然存在`telugu,tamil`字符之间的问题

# asp.net - 使用 ASP.Net 从 SQL Server 中的表中导出数据

> ID：12457555
> 
> 赞同：1
> 
> 时间：2012-09-17T10:38:28.703
> 
> 标签：asp.net, xml, sql-server-2008

我正在使用 Visual Studio 2010 和 SQL Server 2008。我需要创建一个如下所示的 XML 文件：

```
 <cat>
   <name> "Categories"</name>
   <link> "link"</link>
 </cat> 
```

和值应从数据库中添加`Categories`。`link`

我已经尝试了一切，但我无法让它工作。我必须在 ASP 中创建一个 XML 文件来执行此操作吗？

这些值在同一个表中，但表中还有其他列。

我的代码看起来像这样：

```
 SqlCommand sqlcmd = new SqlCommand();
        //sqlcmd.CommandText = "Select * from Categories";
        DataSet ds = new DataSet();

        System.Data.SqlClient.SqlDataAdapter da = new       System.Data.SqlClient.SqlDataAdapter("Select * from Categories", "Data Source=something;Initial Catalog=My Database;Integrated Security=True");
        da.Fill(ds);

      int rows;
      rows = ds.Tables[0].Rows.Count;

      int i;

      for (i = 0; i <= rows - 1; i++)
      {
          string Categories = ds.Tables[0].Rows[i].ItemArray[0].ToString();
          string address = "https://www.something.com/";
          string link = address + ds.Tables[0].Rows[i].ItemArray[1].ToString();
      }

      ds.WriteXml(@"c:\output.xml", XmlWriteMode.WriteSchema); 
```

有人可以给我这个问题的详细解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:34:33.197

```
SqlCommand sqlcmd = new SqlCommand();
sqlcmd.CommandText = "Select * from Categories";
DataSet ds = new DataSet();

System.Data.SqlClient.SqlDataAdapter da = new       System.Data.SqlClient.SqlDataAdapter("Select * from Categories", "Data Source=something;Initial Catalog=My Database;Integrated Security=True");
da.Fill(ds);

      int rows;
      rows = ds.Tables[0].Rows.Count;

      int i;
xmlwr.WriteStartElement("Cat");
      for (i = 0; i <= rows - 1; i++)
      {
xmlwr.WriteStartElement("name");
xmlwr.xmlwr.WriteString(ds.Tables[0].Rows[i].ItemArray[0].ToString());
xmlwr.WriteEndElement;

xmlwr.WriteStartElement("link");
xmlwr.xmlwr.WriteString(ds.Tables[0].Rows[i].ItemArray[1].ToString());
xmlwr.WriteEndElement;

      }
xmlwr.WriteEndElement;
      ds.WriteXml(@"c:\output.xml", XmlWriteMode.WriteSchema); 
```

# android - 需要服务器数据库和安卓应用程序之间通信的帮助

> ID：12457556
> 
> 赞同：0
> 
> 时间：2012-09-17T10:38:35.813
> 
> 标签：android, json, networking, webserver, client-server

我正在开发一个基于 Android 的应用程序，它可以同时完成以下两件事：

1.  将数据添加到服务器。
2.  从服务器获取数据。

数据由一个多媒体文件组成，可以是：

1.  图片+有关图片的一些信息
2.  视频 + 关于视频的一些信息
3.  简单文本 + 关于文本的一些信息

在上面，信息由纬度、经度、用户名等组成。

我想知道如何达到预期？

有人建议我使用基于 JSON 的对象并将其传递给 android 应用程序。我知道如何解析 JSON 对象，但不知道以下内容：

1.  在移动设备上运行的 android 应用程序如何请求 JSON 对象？（意思是要问哪个网址）
2.  如何以 JSON 对象的形式将多媒体对象（图片/视频）从服务器传递到 App？
3.  如何将数据从运行基于 android 的手机的 android 应用程序发送到服务器？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:55:37.847

让我试着回答你的问题；

1.  您需要在服务器上运行服务。Android 解析 json 并将其发送到此服务。因此，您需要使用服务的 URL。

2.  您可以通过将多媒体对象转换为 Byte 或 Base64String 来将多媒体对象传递给服务。

3.  关于如何解析 json 并将其发送到服务器，我建议您查看[google-gson](http://code.google.com/p/google-gson/)。这是使用 JSON 时最常用的库之一

查看此[链接](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)以获取有关 Json 解析的更深入的教程 *注意：虽然 JSON 是在服务器之间传递对象的推荐方式，但 wsdl 是您可以使用的另一个选项。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:57:14.023

您可以通过转换为 Base64String 来做到这一点。检查[此链接](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)

# wordpress - wordpress 标头代码插件

> ID：12457564
> 
> 赞同：0
> 
> 时间：2012-09-17T10:39:07.773
> 
> 标签：wordpress

谁能告诉我如何通过插件向主题的 head.php 添加代码？

我想在其中添加一些外部 .css 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:50:29.670

您应该在插件中使用以下代码：

```
add_action('wp_head', 'your_function');
   function your_function(){
      wp_register_style( 'external_css', 'EXTERNAL CSS PATH');           
      wp_enqueue_style('external_css');

   } 
```

仅供参考：可能是您提到的文件名不完整，应该是 header.php，请确定。希望这段代码对您有所帮助。一切顺利 ;）

# iphone - 自定义字体 iphone

> ID：12457567
> 
> 赞同：1
> 
> 时间：2012-09-17T10:39:15.593
> 
> 标签：iphone, uifont

我正在尝试在我的应用程序中添加自定义字体，在网上搜索，有很多帖子，但我收到错误

```
InfoPlist.strings:0: error: validation failed: The data couldn’t be read because it has been corrupted. 
```

我不明白是什么问题，我在我的项目中添加了一个新的字体文件并将此代码添加到 plist 中，我以前从未使用过 plist

```
<key>UIAppFonts</key>
<array>
<string>CloisterBlack.ttf
</string>
</array> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:33:16.950

在 plist 中添加字体，然后通过双击 finder 中的字体文件来检查字体的名称，就像在我的情况下，字体文件名“CloisterBlack.ttf”的字体名称是 Abduction

然后像访问它

```
[UIFont fontWithName:@"Abduction" size:20.0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:51:04.040

我认为您的字体文件已损坏。再次添加它，然后尝试。此链接将帮助您[在应用程序中添加自定义字体](http://kgriff.posterous.com/45359635)。确保您的文件应该是**.ttf**。你有没有**.ttf**文件？**如果是，则将其添加到您的项目文件夹中，然后在info.plist**文件中进行少量更改。

![在此处输入图像描述](../Images/a4a2af319bc21534c277eda8ab20dfb7.png)

如果您没有任何**.ttf**文件，请先下载它。这是你的字体文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:42:02.300

只需将[此类](http://www.cocoacontrols.com/platforms/ios/controls/fontlabel)用于自定义字体

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T10:47:37.320

我认为添加扩展会解决它，我的 plist 文件看起来一样。

```
<key>UIAppFonts</key>
<array>
<string>CloisterBlack.ttf</string>
</array> 
```

# jquery - 响应式向上/向下滑动 div onclick

> ID：12457569
> 
> 赞同：0
> 
> 时间：2012-09-17T10:39:21.070
> 
> 标签：jquery, fadein, show-hide, scrollto, slidedown

我有一个链接，单击时需要向上或向下滑动（取决于状态）一个包含响应式全宽视频的 DIV。由于它的响应性和宽屏视频，高度无法固定（我现有的代码会这样做并且需要更改）。此 DIV（包含视频）必须在页面加载时隐藏。

我在这里有我现有的代码：http: [//jsfiddle.net/D5EMp/](http://jsfiddle.net/D5EMp/)它在一定程度上可以隐藏/显示视频。但是，主要问题是视频的高度在页面加载时可见并创建了一个空白区域。

我需要视频向下/向上滑动并从水平黑条淡入/淡出，而该区域下方的内容在 showreel 状态发生变化时被向下推或向上拉。

一个好处是添加功能，当单击链接时，页面滚动到该打开的 DIV。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:11:03.710

您在 css 中添加的填充导致了差距：

```
padding-bottom: 56.25%; /* 16/9 ratio */
padding-top: 30px; /* IE6 workaround*/ 
```

您可以在显示此填充时对其进行动画处理，[例如此处](http://jsfiddle.net/D5EMp/3/)，但这似乎会导致视频在 Firefox 上变得混乱。

在尝试动画到该高度之前，我会计算正确的高度，并且根本不使用填充。要获得 16/9 视频的正确高度，只需将宽度除以 16，然后将其乘以 9。工作示例：

[http://jsfiddle.net/D5EMp/2/](http://jsfiddle.net/D5EMp/2/)

要将页面自动滚动到视频顶部，您可以将其作为动画的完整功能：

```
function(){$('html, body').scrollTop($('#showreel').offset().top);} 
```

示例：http: [//jsfiddle.net/D5EMp/4/](http://jsfiddle.net/D5EMp/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:59:36.890

空格来自您在#showreel 上设置的填充，只需将其删除即可。

看看[http://jsfiddle.net/D5EMp/1/](http://jsfiddle.net/D5EMp/1/)

最大的问题是如何知道视频的大小。但在我看来，在加载之前不可能知道视频的大小。并且访问iframe会导致一些跨域问题。

em，你可以寻找另一种方法来解决这个问题，而不仅仅是通过技术

这是我的想法

# symfony - 从其他地方调用控制器

> ID：12457573
> 
> 赞同：0
> 
> 时间：2012-09-17T10:39:40.207
> 
> 标签：symfony

假设我们有一个用作 Web 服务的控制器。我们可以在模型类或视图等中调用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:20:35.750

您实际上*可以*做任何您想做的事情，但是 MVC 流程会以这种方式被扼杀。

我假设您的网络服务具有类似的路由`/api/users/98385`，并且如果您通过此类 URL 执行 GET 请求，则返回用户表示。

您不能在模型中引用控制器*，*这会使两者紧密结合：如果您需要在模型中注入内容，则在控制器中执行此操作 - 无论如何，您总是将您的**ORM**委托给水合模型。

视图负责**渲染**内容，因此您只需在控制器中获取数据，然后将其传递给视图。

您可以在页面加载**后**对您的 web 服务进行异步调用，但这超出了服务器代码的范围。

正如我一直建议的那样，请查看[symfony 文档](http://symfony.com/doc/current/book/controller.html)，这是获得流畅 symfony 应用程序开发线索的最快方法。

# ruby-on-rails - Capybara + Rspec + :webkit = undefined javascript_driver

> ID：12457575
> 
> 赞同：0
> 
> 时间：2012-09-17T10:39:42.050
> 
> 标签：ruby-on-rails, ruby, rspec, webkit, capybara

我想将我的默认驱动器更改为使用 javascript 运行测试，使用 javascript 的特定场景，从默认值：selenium，到任何，如：webkit，在 RSpec 中，只需设置：js => true 标志。但是，尝试使用 :webkit 运行“describe 'xxx', :js => true do”，并在 rspec_helper 中加载 javascript_driver，这就是“Capybara:Module 的未定义方法 javascript_driver”所发生的事情

```
undefined method `javascript_driver=' for Capybara:Module (NoMethodError) 
```

我是如何在文件 spec_helper.rb 中定义 loader :webkit 的：

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
Capybara.javascript_driver = :webkit 
```

Capybara 的版本是 1.1.2

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'
gem 'pg', '0.12.2'

gem "meta_search"

# Bootstrap and layouting
gem 'bootstrap-sass', '2.0.3'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'rails3-jquery-autocomplete'

#test support
gem 'faker', '1.0.1'

#login rules
gem 'devise'
gem 'cancan'

#criptar
gem 'bcrypt-ruby', '3.0.1'

#BR
gem 'brazilian-rails'
gem 'rails-i18n'

group :development do
    gem 'annotate', '~> 2.4.1.beta'
    gem 'nested_scaffold'
end

group :development, :test do
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '0.5.5'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'ruby-debug19'
  gem 'linecache19'
  gem 'factory_girl_rails', '1.4.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'capybara', '1.1.2'
  gem 'capybara-webkit'
  gem "launchy"
  gem 'ZenTest'
  #MAC OS Especific
  gem 'rb-fsevent', '0.4.3.1', :require => false
  gem 'growl', '1.0.3'

  #Cucumber
  gem 'cucumber-rails', '1.2.1', require: false
  gem 'database_cleaner', '0.7.0'
end

group :production do
  #gem 'pg', '0.12.2'
end 
```

谢谢你先进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:13:31.940

在 spec_helper.rb 上缺少这个

```
require "capybara/rspec" 
```

谢谢[https://github.com/jnicklas](https://github.com/jnicklas)

# android - 如何将扫描数据存储在 1 个变量中并使用 Zxing 库将其传递给其他活动

> ID：12457580
> 
> 赞同：0
> 
> 时间：2012-09-17T10:39:55.960
> 
> 标签：android, android-activity, qr-code, zxing

我已经通过 zxing Liberary 集成了扫描仪。我希望扫描仪扫描二维码时扫描数据存储在 1 个变量中，此扫描数据比传递给另一个活动。这将如何请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:09:20.753

如果您使用 Intent Integration 开始扫描，您应该已经实现 onActivityResult(..., Intent i)

我持有二维码中的数据，您可以通过调用 i.getStringExtra("SCAN_RESULT") 来获取它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:44:06.927

您可以为此使用 Bundle。你只有原始值要传递吗？否则，您必须进行序列化并通过。

# php - 尽管标题中存在文件大小，但下载文件大小未知

> ID：12457582
> 
> 赞同：2
> 
> 时间：2012-09-17T10:40:02.320
> 
> 标签：php, javascript, jquery, download, zip

我正在网页上进行以下操作：单击元素将一组数据（附加到元素）发送到我的服务器，然后生成自定义 zip 文件：

```
$.post(urlprefix + 'makeZip.php', params, function(data){
    window.location = urlprefix + 'getZip.php?file=' + data; //get file
}).error(handleAJAXError); 
```

`makeZip.php`工作得很好，并返回客户端应该下载的（临时）zip文件的名称。由于我想保持服务器清洁，我通过另一个名为的脚本路由文件，该脚本`getZip.php`执行以下操作：

```
/* RETURN REQUESTED FILE AND DELETE FROM SERVER*/
$filename = $_GET['file'];
/* TRANSFER FILE CONTENTS */
header('Content-type: application/zip');
header('Content-Disposition: attachment; filename="customDownload.zip"');
header('Content-Length: '.filesize($filename));
readfile($filename);
/* REMOVE FILE FROM SERVER */
unlink($filename); 
```

所有浏览器都会成功下载文件，但我面临一个问题：文件可能会变得相当大（高达 200MB），所以我认为估计下载需要多长时间会很好。这就是我发送`Content-Length`标头的原因（指定的文件大小是正确的）。然而，我测试过的所有浏览器都告诉我文件大小未知（这可能导致用户跳过下载）。

这是我的标题信息的某种问题吗？是客户端的问题吗？我应该使用另一种方法让客户端下载文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T10:46:05.820

如果客户端在下载通过 readfile 提供的文件时在对话框中显示“未知文件大小”，您最好检查您的服务器上是否安装了`mod_deflate`, `mod_gzip`,`mod_something-that-shrinks-http`并为给定下载设置异常。

更多信息**[在这里](http://www.webhostingtalk.com/showthread.php?t=728395)**

**由 m90**编辑：****

 **在我的特殊情况下（运行 Apache），我使用以下方法关闭了收缩功能：

```
@apache_setenv('no-gzip', 1);
@ini_set('zlib.output_compression', 0); 
```

现在在所有浏览器中都可以正确发送和接收文件大小标头**

# c# - Lambda 表达式“喜欢”运算符可用吗？

> ID：12457586
> 
> 赞同：-2
> 
> 时间：2012-09-17T10:40:12.497
> 
> 标签：c#, lambda

我正在构建动态 lambda 表达式。我让以下运算符为此代码“包含”、“StartsWith”、“EndsWith”工作。

**源代码**

```
var method = typeof(string).GetMethod(opType.ToString(), new[] { typeof(string) }); 
var startsWithDishExpr = Expression.Call(argLeft, method, argRight); 
```

但是**Like**运算符不起作用。我为“Like”运算符尝试了此代码

```
var likeExpression = Expression.Call(
                    typeof(System.Data.Linq.SqlClient.SqlMethods), "Like", null, argLeft, argRight); 
```

有人对此有答案吗？请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:53:36.787

我相信支持 SqlMethods.Like

[http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.like.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.like.aspx)

如果不使用 lambda 表达式

list.exists(element => element.Contains("你的搜索字符串");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:56:17.027

你不能使用`System.Data.Linq.SqlClient.SqlMethods`，所以你必须自己创建一个`Like`方法。

* * *

**例子：**

```
void Main()
{
    var argLeft = Expression.Constant("Foobar", typeof(string));
    var argRight = Expression.Constant("F%b%r", typeof(string));

    var likeExpression = Expression.Call(typeof(StringHelper), "Like", null, argLeft, argRight);

    Expression.Lambda(likeExpression).Compile().DynamicInvoke().Dump();
}
public static class StringHelper
{
    public static bool Like(string toSearch, string toFind)
    {
        return new Regex(@"\A" + new Regex(@"\.|\$|\^|\{|\[|\(|\||\)|\*|\+|\?|\\").Replace(toFind, ch => @"\" + ch)
                                                                                  .Replace('_', '.')
                                                                                  .Replace("%", ".*") + @"\z", 
                         RegexOptions.Singleline).IsMatch(toSearch);
    }
} 
```

**输出：**

> 真的

（[此处](https://stackoverflow.com/a/5419544/142637)的示例实现）

* * *

**编辑：**

由于您使用的是实体框架，因此您应该[`PatIndex`](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.patindex.aspx)改用。

```
var likeExpression = Expression.GreaterThan(Expression.Call(typeof(SqlFunctions), "PatIndex", null, argLeft, argRight),
                                            Expression.Constant(0, typeof(int?))); 
```

# sorting - Yii - 对具有多个字段的数据提供者进行排序

> ID：12457590
> 
> 赞同：0
> 
> 时间：2012-09-17T10:40:26.980
> 
> 标签：sorting, yii, dataprovider

我正在使用 DataProvider 来显示一些数据。该数据与剧院中的表演有关。我想先展示“当季”的节目，然后再展示非当季的节目。所有节目都应按字母顺序排列。我尝试使用 CSort，但出现错误。这是我的代码：

```
$dataProviderFiaba = new CActiveDataProvider('Show',
                    array(
                        'criteria'=>array(
                            'condition'=>'show_type= '.Show::TYPE_FIABA,
                        ),
                        'sort'=>array(
                            'defaultOrder'=>'on_season', //TO SHOW THE ON SEASON SHOWS FIRST
                            'asc'=>'title', // TO ORDER ALPHABETICALLY
                        ),
                    )); 
```

错误是`Property "CSort.asc" is not defined.`所以我认为我没有使用正确格式的 CSort。进行这种排序的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:17:55.690

您只能在 CSort 的属性上下文中使用“asc”。例如： `$mCSort->attributes = array('title'=>array('asc'=>'title', 'desc' => 'title DESC'));`

为了解决您的排序问题，以下内容应该足够了：

```
$dataProviderFiaba = new CActiveDataProvider('Show',
                    array(
                        'criteria'=>array(
                            'condition'=>'show_type= '.Show::TYPE_FIABA,
                            'order'=>'on_season, title'
                        ),
                    )); 
```

# c# - Nunit 2.6 + Resharper 7 +NCrunch + 视觉工作室 2010

> ID：12457591
> 
> 赞同：5
> 
> 时间：2012-09-17T10:40:37.903
> 
> 标签：c#, visual-studio-2010, nunit, resharper, ncrunch

我在使用 Nunit 2.6 + ReSharper 7 时玩得很开心，但是在安装 Ncrunch 之后，我的 Visual Studio 2010 崩溃了，我无法在单元测试会话中运行单元测试。

错误信息：

```
The project xxxx has not been built 
```

典型的设置是

项目 XXXX - 无主

Project XXXX.Test - 一些代码

XXXX.Test 中的一些代码

```
[TestFixture]
public class Entry
{
    [Test]
    public static void ThisWillPass()
    {
        Assert.AreEqual(1,2);
    }

} 
```

注意：我确实在 xxxx.test 上将配置管理器设置为“构建”

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-12T18:13:50.253

您的项目是否设置为 AnyCPU？如果不检查 resharper 设置以控制它用于运行测试的框架是 32 位还是 64 位的设置，并确保其设置相同。

# javascript - jquery crSpline：奇怪的动画

> ID：12457593
> 
> 赞同：1
> 
> 时间：2012-09-17T10:40:41.833
> 
> 标签：javascript, jquery, animation, jquery-plugins

我尝试了 jquery crSpline 插件（[http://ijin.net/crSpline/demo.html](http://ijin.net/crSpline/demo.html)），但是最后一个坐标我有一些奇怪的运动。

红点的 top 属性在最后一个位置（例如 -3000px）上变得狂野。

在这里你可以找到一些代码：[https ://github.com/xseignard/test-crspline](https://github.com/xseignard/test-crspline)

和这里的演示：http: [//xseignard.github.com/test-crspline/](http://xseignard.github.com/test-crspline/)

你看出什么不对了吗？

甚至更好，既然插件开发似乎已经死了，你有替代方案吗？

问候，

泽维尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:40:59.930

问题是，您不能将字符串值`x`和整数转换`y`为整数。这就是数学与字符串一起工作并进行字符串连接而不是求和（例如在`generateExtension`方法中）的原因。

只需添加`parseInt`到您的坐标转换中，一切都会奏效。

```
$.each(json, function() {
    points.push([parseInt(this.x, 10), parseInt(this.y, 10)]);
}); 
```

# android - OnLongPress 单击列表视图

> ID：12457594
> 
> 赞同：0
> 
> 时间：2012-09-17T10:41:01.307
> 
> 标签：android, onlongclicklistener

我是android编程的新手。我在右侧有三个按钮，在左侧有三个按钮，在中心我有一个动态查看项目的列表视图。

我正在实现 ontouch() (action:UP) 来移动按钮和长按 - 相应的 performclick() 被激活。一切正常，但是当我长按列表视图以激活 performclick() 时。什么都没发生。- 我不知道为什么？

我还尝试为 onlongclick listner 初始化列表视图布局，但它不起作用。

我想让列表视图也为按钮激活 onlongclick 吗？这可能吗？

**注意**：我不想激活 performclick() onITEMselected。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:43:44.183

您是否尝试使用 ListView.setOnItemLongClickListener() 代替？

# perforce - 将变更列表放在另一台 perforce 机器上

> ID：12457600
> 
> 赞同：0
> 
> 时间：2012-09-17T10:41:21.030
> 
> 标签：perforce

我做了 perforce 服务器的迁移。因为仓库多，数据多，而且我们部门不希望服务器宕机一天，所以我做了以下操作：

第 2 步：停止机器 A 上的“旧”perforce 服务器 第 1 步：将所有数据从机器 A 复制到机器 B 第 2 步：再次启动“旧”服务器 Setp 3：进行完整迁移并在机器 B 上启动新服务器

现在的问题是，与此同时，有几个更改列表提交给机器 A。

有没有一种简单的方法可以将更改复制到机器 B ？请注意，我有一个检查点，所以元数据不是问题。

我知道在 git 这样的版本控制上，使用补丁很容易。这样的事情是否也可以通过简单的方式实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:41:09.670

您可能想查看 perforce 给出的 p4 pull 和 p4 replicate 命令。

[P4 Pull](http://www.perforce.com/perforce/r12.1/manuals/cmdref/pull.html)和[P4 Replicate](http://www.perforce.com/perforce/r12.1/manuals/cmdref/replicate.html)是为了这些目的而给出的 2 个命令。对于这些命令，我​​假设您的 p4 服务器是 p4d 2010.2 或更高版本。

另外，我建议您阅读 Perforce 的知识库，了解他们关于[Offline check pointing](http://kb.perforce.com/article/126)的文章。本文不是直接解决您的问题的方法，但它可以让您深入了解如何解决您的问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:46:43.400

当您进行第一次迁移时，您是否截断了您的日志？如果是这样，您可能可以重播最新的生产日志，然后 rsync/robocopy 存档内容（仓库中的文件）。那会让你赶上。

我认为这是一次性活动？

您可能应该与 Perforce 技术支持联系，以确保您没有忽略任何事情。

# c - 链表语法

> ID：12457602
> 
> 赞同：1
> 
> 时间：2012-09-17T10:41:26.293
> 
> 标签：c, list, linked-list

```
typedef struct  {
 char name [25] ;
 char breed [25] ;
 int age  ; 
 struct animal *next ;
 } animal ;

 animal *ptr1 , *ptr2 , *prior ;
 ptr1 = (animal*)malloc( sizeof (animal) ) ;
 strcpy ( (*ptr1).name , "General" ) ;
 strcpy ( (*ptr1).breed , "Foreign breed" ) ;
 (*ptr1).age = 8 ;

 (*ptr1).next = NULL ;
 prior =ptr1 ;
 printf ("%s\n" , (*prior).name ) ;
 printf ("%s\n" , (*prior).breed ) ;
 printf ("%d\n" , (*prior).age ) ;
 printf ("%p\n" , (*prior).next ) ;
 free (ptr1) ;
 ptr1 = (animal*)malloc( sizeof (animal) ) ;
 strcpy ( (*ptr1).name , "General 1" ) ;
 strcpy ( (*ptr1).breed , "Abroad breed" ) ;
 (*ptr1).age = 24 ;
 (*ptr1).next = NULL ;
 (*prior).next = ptr1 ; 
```

这是绘制链表的代码。执行时的整个代码在最后一行显示错误：

> 在函数'main'中：警告：来自不兼容指针类型的赋值[默认启用]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:48:17.113

将您的结构定义更改为此

```
typdef struct Animal_
{
  char name [25];
  char breed [25];
  int age; 
  struct Animal_* next;
} Animal; 
```

没有`Animal_`结构是匿名结构，不能有指向它的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:49:16.083

将您的声明更改为：

```
typedef struct animal {
    char name [25] ;
    char breed [25] ;
    int age;
    struct animal *next;
 } animal; 
```

结构标记`animal`已添加到声明中。您现在拥有类型`animal`的别名`struct animal`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T05:46:53.193

这实际上是一个警告，而不是错误。我不明白你为什么使用 (*s).m 而不是 s->m。它更简单，更自然。我没有在您的代码中看到函数 main 以及出现错误的行，我想除了结构声明之外的所有代码都是函数 main。尝试像这样声明您的结构（您可能还需要添加“typedef struct animal”，具体取决于您的编译器）： struct animal { ... animal *next; };

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:09:05.047

“标记”名称空间（在 之后的名称`struct`）和标识符名称空间（例如，您用 声明的名称空间`typedef`）在 C 中是不同的。

我发现，最简单的方法是始终向前声明`struct`标签并`typedef`一次性声明：

```
typedef struct animal animal; 
```

从那时起，您`typedef`甚至可以在以下声明中轻松使用该名称`struct`：

```
struct animal {
  ....
  animal* next;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T10:47:15.340

`animal`是 typedef 的名称，而不是结构的名称。试试这个：

```
typedef struct _animal {
    char name [25];
    char breed [25];
    int age; 
    struct _animal *next;
} animal; 
```

# python - python多重继承：避免以菱形调用构造函数两次

> ID：12457603
> 
> 赞同：0
> 
> 时间：2012-09-17T10:41:29.693
> 
> 标签：python, initialization, multiple-inheritance, super, diamond-problem

考虑以下代码：

```
class A(object):
    def __init__(self):
        print("A.__init__")
        super(A, self).__init__()          # 1
        print("A.__init__ finished")

class B(A):
    def __init__(self):
        print("B.__init__")
        super(B, self).__init__()          # 2
        print("B.__init__ finished")

class C(A):
    def __init__(self):
        print("C.__init__")
        super(C, self).__init__()
        print("C.__init__ finished")

class D(B, C):
    def __init__(self):
        print("D.__init__")
        print("Initializing B")
        B.__init__(self)                   # 3
        print("B initialized")
        print("Initializing C")
        C.__init__(self)                   # 4
        print("C initialized")
        print("D.__init__ finished")

D()

# D.__init__
# Initializing B
# B.__init__
# C.__init__
# A.__init__
# A.__init__ finished
# C.__init__ finished
# B.__init__ finished
# B initialized
# Initializing C
# C.__init__
# A.__init__
# A.__init__ finished
# C.__init__ finished
# C initialized
# D.__init__ finished 
```

据我了解，算法如下：

```
D.__init__ at (3) -> B.__init__ -> 
-> super().__init__ -> (super of self.__class__).__init__ ->
-> C.__init__ (# why C?) -> super().__init__ -> 
-> A.__init__

D.__init__ at (4) -> C.__init__ ->
-> super().__init__ -> 
-> A.__init__ 
```

实际上存在三个问题：
1\. 为什么`super().__init__()`调用`B.__init__`(at 2) 调用的实例是什么`C.__init__`时候？ 2\. 这种情况下如何避免调用and两次？ 2.1 初始化当前类继承的所有类的正确方法是什么？`self``D`
`C.__init__``A.__init__`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:45:44.720

问：*当 self 是 D 的实例时，**为什么要`super().__init__()`调用`B.__init__`(at 2) 调用？`C.__init__`*

你打电话时

```
super(X, self).__init__ 
```

Python 查找[MRO](http://www.cafepy.com/article/python_attributes_and_methods/python_attributes_and_methods.html#method-resolution-order) `self.__class__.mro()`。`__init__`然后它从X 之后的 MRO 中的*下一个*类调用。

当 self 是 的实例时`D`，`self.__class__.mro()`是`[D, B, C, A]`。所以`super(B, self).__init__()`调用`C.__init__(self)`。

* * *

问：*初始化当前类继承的所有类的正确方法是什么？*

也使用超级输入`D.__init__`：

```
class D(B, C):
    def __init__(self):
        print("D.__init__")
        super(D, self).__init__()
        print("D.__init__ finished") 
```

# html - 垂直对齐应该应用于孩子吗？

> ID：12457604
> 
> 赞同：0
> 
> 时间：2012-09-17T10:41:30.933
> 
> 标签：html, css, google-chrome, cross-browser, vertical-alignment

这个属性是否也应该影响它所应用的元素的子元素？

[这是我的例子](http://jsfiddle.net/5XMk8/4/)

```
span{
 vertical-align:top;
 font-size:27px;
 border-bottom: 1px solid red;
}
a{
  border-bottom: 1px solid green;
}

<span>
  <a>Hi ho hoh ho</a>
  Hi ho hoh ho
  <a>Hi ho hoh ho</a>
</span> 
```

在 Firefox 上，该属性不会影响子级，但在 Chrome 上，子级未对齐。

铬合金 ：![铬合金](../Images/fe419a5c14833107e1c3bb65c16812e9.png)

火狐：![火狐](../Images/75efcbd9ca83462216ed80b576038c11.png)

什么是好的实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:11:24.677

检查这个小提琴：

[http://jsfiddle.net/5XMk8/7/](http://jsfiddle.net/5XMk8/7/)

在“a”标签中添加所有文本并给出`float:left`并制作`display:block`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:39:55.290

按照规范，`vertical-align`是不会继承的，但可能会影响内部元素的基线级别。不过，浏览器对该属性的古怪和不同实现有着悠久的历史。

使用您的确切代码进行测试，我在 Chrome (22beta) 上看到与在 Firefox 上一样，所以也许您在某些旧版本中遇到了奇怪的问题。

要查看浏览器之间的明显差异，请使用不同的字体大小。结果将更难解释。`vertical-align`无论如何，士气是我们应该避免在大多数情况下玩。使用相对定位往往会产生更一致的结果。

# php - MySQL - 选择不同

> ID：12457608
> 
> 赞同：2
> 
> 时间：2012-09-17T10:41:40.527
> 
> 标签：php, mysql, select

我有这个查询，它为一列选择一个不同的值，但我也需要该查询中的其他内容。我需要它来获取与主选择关联的不同行。

让我举例说明...

这是我的查询：

```
$sql = 'SELECT DISTINCT user_id FROM ' . DONATION_SECURITY_TABLE;
$result = mysql_query($sql);

$rows = mysql_fetch_assoc($result);
mysql_free_result($result);

return $rows; 
```

如您所见，它返回此查询返回 user_id 的 DISTINCT。

![我的桌子](../Images/c9d7a5fc3654ea90d69649387a8bc569.png)

如果我在使用上面查询的返回创建的双 foreach 循环中使用这样的函数：

```
public function get_donor_status($user_id)
{
    global $db;

    $sql = 'SELECT payment_status FROM ' .DONATION_SECURITY_TABLE .
           " WHERE user_id = '" . (int) $user_id . "'";
    $result = $db->sql_query($sql);

    $row = $db->sql_fetchrow($result);
    $payment_status = $row['payment_status'];

    $db->sql_freeresult($result);

    return $payment_status;
} 
```

此函数将为 user_id 2 返回**Completed**，但我希望它改为**Pending**。我将如何更改我的查询，使其返回相应 user_id 的最后一个值？

如果我不够清楚，请告诉我，以便我重新解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:44:51.047

只需为用户选择最后一行：

```
"SELECT payment_status FROM " . DONATION_SECURITY_TABLE . " WHERE user_id = '" . (int) $user_id . "' ORDER BY donation_id DESC LIMIT 1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:45:36.857

这个怎么样？

```
$sql = 'SELECT payment_status FROM ' .DONATION_SECURITY_TABLE .
           " WHERE user_id = '" . (int) $user_id . "' ORDER BY donation_id DESC LIMIT 1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:49:45.840

您实际上可以在一条 SQL 语句中获取所有内容，无需双循环：

```
SELECT
    user_id, payment_status
FROM
    DONATION_SECURITY_TABLE t1
WHERE
    donation_id = (select max(donation_id) from DONATION_SECURITY_TABLE t2 WHERE t2.user_id = t1.user_id)
ORDER BY
    user_id 
```

# php - 使用 PHPExcel 以文本格式读取数字

> ID：12457610
> 
> 赞同：20
> 
> 时间：2012-09-17T10:41:44.643
> 
> 标签：php, formatting, phpexcel

我有一个可以存储数字的数组，例如 01、01A、01B、02、2，当我使用 PHPExcel 获取这个值时，例如，在 01、02 的情况下，它会被删除'0'。为了解决这个问题，我尝试格式化这些值将存储在 excel 中的行并将其设置为文本类型，就像在下面的代码中一样：

```
 $objPHPExcel->setActiveSheetIndexByName('BlocksList');
    $objPHPExcel->getActiveSheet()->fromArray($blockNames, null, 'A2');
    $latestBLColumn = $objPHPExcel->getActiveSheet()->getHighestDataColumn();
    $column = 'A';
    $row = 1;
    for ($column = 'A'; $column != $latestBLColumn; $column++) {
        $objPHPExcel->getActiveSheet()->getStyle($column.$row)->getNumberFormat()->setFormatCode( PHPExcel_Style_NumberFormat::FORMAT_TEXT );
    }
    $objPHPExcel->getActiveSheet()->fromArray($blockNames, null, 'A1'); 
```

因此，通过这样做，我得到了数字为 01、01A、02、02B ... 的数组，并将其存储在 A2 行中。我得到了在条件 For 中使用此值的最高列。在这种情况下，我将范围 A 中的第 1 行设置为最高列，以格式化为文本。

我的模板已生成，所有数字都是文本格式，但问题是我认为当我使用“ `fromArray()`”方法时，它会先转换数组的数字，然后才能在 excel 中正确处理。你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-17T10:47:16.893

使用数字格式进行格式化会影响数字的**显示**方式，而不是**存储**方式。

您必须将数字显式**存储**为字符串，因此您不能使用 fromArray()。请改用 setCellValueExplicit() 或 setCellValueExplicitByColumnAndRow()，传递 PHPExcel_Cell_DataType::TYPE_STRING 的 $pDataType 参数。

**编辑**

请注意，您还可以为一系列单元格设置样式，因此无需添加 for 循环的开销：

```
$range = 'A'.$row.':'.$latestBLColumn.$row;
$objPHPExcel->getActiveSheet()
    ->getStyle($range)
    ->getNumberFormat()
    ->setFormatCode( PHPExcel_Style_NumberFormat::FORMAT_TEXT ); 
```

**编辑 #2**使用细胞活页夹

创建一个自定义的单元格值绑定器：

```
class PHPExcel_Cell_MyValueBinder extends PHPExcel_Cell_DefaultValueBinder
    implements PHPExcel_Cell_IValueBinder 
{ 
    public function bindValue(PHPExcel_Cell $cell, $value = null) 
    { 
        // sanitize UTF-8 strings 
        if (is_string($value)) { 
            $value = PHPExcel_Shared_String::SanitizeUTF8($value); 
        } 

        // Implement your own override logic 
        if (is_string($value) && $value[0] == '0') { 
            $cell->setValueExplicit($value, PHPExcel_Cell_DataType::TYPE_STRING); 
            return true; 
        } 

        // Not bound yet? Use default value parent... 
        return parent::bindValue($cell, $value); 
    } 
} 
```

为避免自动加载器出现任何问题，请在 /Classes/PHPExcel/Cell 目录中创建它。否则，为类指定您自己的非 PHPExcel 名称，并确保它是独立加载的。

然后，在使用 fromArray() 调用之前，告诉 PHPExcel 使用您的值绑定器而不是默认绑定器：

```
PHPExcel_Cell::setValueBinder( new PHPExcel_Cell_MyValueBinder() ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-09-02T17:48:51.737

如果您需要**将整个工作表编号转换为 text**，您可以使用`calculateWorksheetDimension()`来获取工作表的尺寸（例如：' *A1:B200* ' 或 ' *A1:C150* '），然后在 中使用它`getStyle()`，如下所示：

```
// Get sheet dimension
$sheet_dimension = $spreadsheet->getActiveSheet()->calculateWorksheetDimension();

// Apply text format to numbers
$spreadsheet->getActiveSheet()->getStyle($sheet_dimension)->getNumberFormat()->setFormatCode(\PhpOffice\PhpSpreadsheet\Style\NumberFormat::FORMAT_TEXT); 
```

**注意：**此示例使用[*PhpSpreadsheet*](https://github.com/PHPOffice/PhpSpreadsheet)，因为它是 PHPExcel 的下一个*版本*。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-12T22:40:58.100

我知道这都是不久前发布的，但想分享一些对我有用的东西，所以你仍然可以使用`->fromArray`而不必遍历整个电子表格。

如果您将值包装在`="VALUE"`其中，它将以文本形式出现，而不是转换它，并且在您的电子表格中它不会有引号

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-31T12:12:35.297

```
$objPHPExcel
   ->getActiveSheet()
   ->getCellByColumnAndRow($col, $row)
   ->setValueExplicit($value, PHPExcel_Cell_DataType::TYPE_STRING); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-17T03:25:23.403

您可以通过在值之前或之后添加字符来将值格式化为文本。示例在值字符后添加“;”

```
$objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow(1, $row,$user->msisdn.';' ); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-13T07:56:34.950

尝试这个 ：

```
$objPHPExcel->getActiveSheet()->setCellValueExplicit("A1","yourvalue",PHPExcel_Cell_DataType::TYPE_STRING); 
```

请看这里 setCellValueExplicit 函数：[https ://github.com/PHPOffice/PHPExcel/blob/1.8/Classes/PHPExcel/Worksheet.php](https://github.com/PHPOffice/PHPExcel/blob/1.8/Classes/PHPExcel/Worksheet.php)

# javascript - Expressjs如何在用户登录时显示/隐藏div

> ID：12457615
> 
> 赞同：2
> 
> 时间：2012-09-17T10:41:58.007
> 
> 标签：javascript, node.js, authentication, forms-authentication, express

我按照这个例子-> [https://github.com/visionmedia/express/tree/master/examples/auth](https://github.com/visionmedia/express/tree/master/examples/auth)

工作正常，但我不喜欢他们在您成功登录或注销时显示内容的方式。

它是否有其他方法可以一次性完成 X 或 Y 用户的身份验证？例子

我有一个用于登录的线性表单，很高兴在用户通过身份验证时隐藏该 div，但我不能这样做

```
$(document).ready(function(){
  if(req.session.user) { $(.class of teh frm to hide).hide(); }
} 
```

我也试过 session.user

一直告诉我它是未定义的。我把它放在布局上。

那么，如果用户经过身份验证，或者如果用户是管理员，我如何在视图上显示内容？

导致 atm 我看到它的唯一方法是授权某些路线并通过以下方式显示特定内容

```
req.session.success = 'Authenticated as ' + req.session.user.name
  + ' click to <a href="/logout">logout</a>. '
  + ' You may now access <a href="/restricted">/restricted</a>.';
} 
```

认为它不是要走的路。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T17:45:23.073

最好使用您的模板引擎来显示不同的内容，而不是使用客户端 javascript。如果您使用的是翡翠，请执行以下操作：

在您的 app.js 中创建一个变量，如果用户登录，该变量将传递给每个视图：

```
app.use(function(req, res, next){
  // all the stuff from the example
  if (req.session.user) {
    res.locals.user = req.session.user
  }
  next();
}); 
```

在您的模板引擎中使用此变量（例如，jade）：

```
if user
  // show stuff here
else
  // for everyone else 
```

# ruby-on-rails - 每当cron作业Rails3时，我如何以及在哪里可以定义rake任务运行的wkhtmltopdf路径

> ID：12457619
> 
> 赞同：2
> 
> 时间：2012-09-17T10:42:21.637
> 
> 标签：ruby-on-rails, ruby, pdf-generation, wkhtmltopdf, wicked-pdf

我想使用 rake 任务在 cron 作业 rails 时运行生成 pdf。当我通过控制台上的这个命令运行这个 rake 任务时，它生成 pdf 很好

```
 bundle exec rake auto_invoice_email 
```

如果我给出这个命令

```
 which wkhtmltopdf 
```

然后我有这个路径“/usr/bin/wkhtmltopdf”

但是当我通过cron作业运行它时，我有这个错误

```
 rake aborted!
       Failed to execute:
       "/usr/bin/wkhtmltopdf" -q        - - 
       Error: PDF could not be generated!
       Tasks: TOP => auto_invoice_email
       (See full trace by running task with --trace) 
```

我如何以及在哪里可以为 cron 作业指定 wkhtmltopdf 的路径

有什么帮助吗？

这是 rake 任务

```
 require 'rubygems'
  require 'wicked_pdf'
 require 'erb'
 require 'date'
 task :auto_invoice_email => :environment do
 #$PATH = '/usr/bin/wkhtmltopdf'
  include ApplicationHelper

  users = User.find_subscribers
    unless users.blank?
     users.each do |user|
     @user = user
    content = File.read "#{Rails.root}/app/views/accountings/generate_invoice_pdf_rake.html.erb"
    template = ERB.new(content)
     html_content = template.result(binding)
     pdf= WickedPdf.new.pdf_from_string(html_content, :wkhtmltopdf => '/usr/bin/wkhtmltopdf')
     name = "#{Rails.root}/public/#{user.subscriber.downcase+" "+Time.now.to_s}.pdf"
     File.open(name, 'wb') do |file|
       file << pdf
     end
   end
end 
```

结尾

谢谢

# javascript - Jquery-image-gallery：不使用任何内部类

> ID：12457620
> 
> 赞同：1
> 
> 时间：2012-09-17T10:42:26.993
> 
> 标签：javascript, jquery

我想删除我编写的不使用类 ie 的脚本`UiUx3DSSVFlow`。
如果不对这个内部类进行硬编码，如何利用它们的父类`#thumbs`？

我不应该再使用脚本中的特定类了。将来这些类可以更改为任何其他*类名*。在不使用内部类名的情况下，我需要以另一种方式实现相同的功能

HTML：

```
<!--Thumbs Image-->

<div id="thumbs">
    <div class="UiUx3DSSVFlow">
        <img src="http://cdn1.iconfinder.com/data/icons/nuvola2/48x48/actions/thumbnail.png">
    </div>
    <div class="UiUx3DSSVFlow">
        <img src="http://cdn1.iconfinder.com/data/icons/nuvola2/48x48/actions/thumbnail.png">
    </div>        
    <div id="Video" class="UiUx3DSSVFlow">
        <div class="video_gallery">     
           <div>
                <iframe src="http://www.youtube.com/embed/iwqoOfZf4hc" allowfullscreen="" frameborder="0" height="250" width="250"></iframe>
           </div>
         </div>
    </div>       
    <div id="Video" class="UiUx3DSSVFlow">
        <div class="video_gallery">     
            <div>
                <iframe src="http://www.youtube.com/embed/iwqoOfZf4hc" allowfullscreen="" frameborder="0" height="250" width="250"></iframe>
            </div>
        </div>
    </div>    
</div>
<p><a class="tprev" href="#">Prev</a>
<p><a class="tnext" href="#">Next</a> 
```

CSS：

```
#thumbs{
    border:1px solid red;
    width:100%;  
}   
#thumbs div{display:inline-block;   }    
#larger{
    border:1px solid black;
    width:100%;
}    
#larger div{display:inline-block;  } 
```

jQuery：

```
function thumbs(i,incr){
    var num_thumbs=2;
    if(i===null){
        i=$("#thumbs").prop('data-index'),
        i+=num_thumbs*incr;
    }
    i=Math.max(1,Math.min(i,$('#thumbs .UiUx3DSSVFlow').length-num_thumbs+1));
    $("#thumbs").prop('data-index',i);
    $('#thumbs .UiUx3DSSVFlow').hide();
    $('#thumbs .UiUx3DSSVFlow:nth-child(n+'+i+'):nth-child(-n+'+Number(i+num_thumbs-1)+')').show();
}

$("#thumbs").prop('data-index',1);
$([['next',1],['prev',-1]]).each(function(){
    var that=this;
    $('.t'+that[0]).click(function(){
        thumbs(null,that[1]);
    });

});
$('.tprev').click(); 
```

[http://jsfiddle.net/T657N/33/](http://jsfiddle.net/T657N/33/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:17:13.693

## *[jsFiddle 演示](http://jsfiddle.net/T657N/35/)*

*在跳入 JS 之前回顾你的 HTML、CSS 知识！*

*   您不能在一个文档中拥有多个**ID ！**
*   元素（因为`div` 它默认是*块*元素）不需要`width:100%`;
*   `display: inline-block`最适合`<span>`元素和 xbrowser，对于其他浏览器，您需要使用某种 hax，例如：

> 显示：内联块；*显示：内联；缩放：1；

HTML：

```
<div id="thumbs">
    <div>
        <img src="http://cdn1.iconfinder.com/data/icons/nuvola2/48x48/actions/thumbnail.png">
        <img src="http://cdn1.iconfinder.com/data/icons/nuvola2/48x48/actions/thumbnail.png">
    </div>
    <div>     
        <iframe src="http://www.youtube.com/embed/iwqoOfZf4hc" allowfullscreen="" frameborder="0" height="250" width="250"></iframe>
        <iframe src="http://www.youtube.com/embed/iwqoOfZf4hc" allowfullscreen="" frameborder="0" height="250" width="250"></iframe>
    </div>
</div>

<p><a class="tprev" href="#">Prev</a>
<p><a class="tnext" href="#">Next</a> 
```

CSS：

```
#thumbs{border:1px solid red;}
#thumbs div{display:inline;} 
```

jQuery：

```
var $tDiv = $('#thumbs div');
var tDivsN = $tDiv.length;
var c = 0;

function display(){
    c= c===-1? tDivsN-1 : c%tDivsN;
    $tDiv.hide().eq(c).show();
}
display();

$('.tprev, .tnext').on('click',function(e){
    e.preventDefault();
    var myCLass= $(this).hasClass('tnext') ? c++ : c--;
    display();
}); 
```

# java - 如何清除对 Arrays.copyof() 的这种模棱两可的调用？

> ID：12457624
> 
> 赞同：14
> 
> 时间：2012-09-17T10:42:36.063
> 
> 标签：java, android, aide-ide

我在我的 Android 手机上运行 AIDE，但无法编译以下 Java 代码：

`elements = Arrays.copyOf(elements, elements.length * 2);`

这里`elements`是类型`int[]`。我从 AIDE 得到的错误是

`Several methods are applicable to (int[], int): 'java.util.Arrays.copyOf(int[], int)' and 'java.util.Arrays.copyOf<T>(T[], int)'`

我原以为编译器会选择前一个选项，但事实并非如此。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:36:26.877

这是一个编译器/IDE 问题。但是，`Arrays.copyOf`这是一个非常微不足道的功能，因此如果问题无法通过 IDE/编译器更新解决，只需编写您自己的版本即可。另一种方法是使用反射来调用它。但它会带来一些运行时开销，也会让代码看起来很尴尬，所以我建议实现你自己的版本。

这是代码：

```
public static int[] copyOf(int[] original, int newLength) {
    int[] copy = new int[newLength];
    System.arraycopy(original, 0, copy, 0,
                     Math.min(original.length, newLength));
    return copy;
} 
```

当然，如果你遇到同样的问题`System.arraycopy`，那么这不起作用。简单地尝试一下。如果它不起作用，你可以将它放在一个帮助类中，并使用一个没有错误的编译器来编译这个帮助类。

# powershell - 从集合中删除项目的推荐方法是什么？

> ID：12457625
> 
> 赞同：3
> 
> 时间：2012-09-17T10:42:48.493
> 
> 标签：powershell, collections

我经常需要根据某些条件从集合中删除一些对象，并且每次我都需要这样做：

```
Get-SomeCollection | ? { $_.SomeProperty -eq "SomeValue" } | % { $_.Delete() } 
```

但这只会删除第一个元素，然后抛出异常“集合已修改......bla bla......”。我明白了例外的意义，但是**推荐的方法是什么？**

我通常使用一些数组`itemsToDelete`，然后再次遍历该数组并执行删除操作：

```
$itemsToDelete = @()
Get-SomeCollection | ? { $_.SomeProperty -eq "SomeValue" } | % { $itemsToDelete += $_ }
$itemsToDelete | % { $_.Delete() } 
```

我想知道这是否*足够好*或者更好的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:38:33.643

您通常会使用过滤器从集合中实际*过滤项目。*因此，您无需修改​​原始集合，而只需过滤掉您感兴趣的那些。

```
Get-SomeCollection | ? { $_.SomeProperty -ne "SomeValue" } 
```

如果您需要对要删除的项目调用操作，您可以简单地创建过滤集合的副本并枚举该集合。这样做非常简单，因为您只需将表达式括在括号中以使其在使用以下命令运行枚举之前进行评估：

```
 (Get-SomeCollection | ? { $_.SomeProperty -eq "SomeValue" }) | % { $_.Delete() } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:42:05.857

我不确定powershell的语法，但是.NET中的简单foreach语句存在这个问题

解决方案是在 for 循环中向后迭代。

而不是这样做：

```
foreach(var item in collection)
{
   if(condition)
   {
      collection.Remove(item); //exception!
   }
} 
```

你做：

```
for(int count = collection.Count - 1; count > 0; count--)
{
   var currentItem = collection[count];
   if(condition)
   {
      collection.RemoveAt(count);
   }
} 
```

# mysql - 正确的数据库？需要改吗？

> ID：12457629
> 
> 赞同：1
> 
> 时间：2012-09-17T10:42:55.987
> 
> 标签：mysql, database, database-design, foreign-keys

我正在创建一个页面，希望用户能够在其中预订活动座位。

* * *

*   1 位用户只能预订 1 个座位
*   用户登录时没有选择座位，首先购买了一个位置
*   需要能够清除座位表，而不会丢失用户表中的任何内容（当然分配的座位除外。）

* * *

我创建了两个表，由于我对 mySQL 还很陌生，所以我想检查一下这是否正确完成：

*   成员表：
*   user_id int(8) 非空 auto_increment
*   用户名 varchar(30) 非空
*   user_pass varchar(255) 非空
*   座位 ID smallint(6) 是 NULL

* * *

*   座位表
*   seat_ID smallint(6) 无 auto_increment
*   user_id smallint(6) 是 NULL
*   座位状态 tinyint(4) 是 NULL
*   座位状态 tinyint(4) 是 NULL

* * *

我创建了 2 个 FK-refs：

```
ALTER TABLE seats
ADD CONSTRAINT FK_seats  
FOREIGN KEY (user_id) REFERENCES members(user_id)  
ON UPDATE CASCADE  
ON DELETE CASCADE;

ALTER TABLE seats
ADD CONSTRAINT FK_seats  
FOREIGN KEY (seat_ID) REFERENCES members(seat_ID)  
ON UPDATE CASCADE  
ON DELETE CASCADE; 
```

我在正确的轨道上吗？使用此设置，我能否发展为体面的最终产品？建议/改进？我不想在几周内重新开始，因为数据库结构质量很差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:55:18.703

首先，如果任何用户在任何给定时间只能持有一个座位，我不明白为什么您要使用第二张桌子，其次应该与成员表中`user_id`的大小相同，否则您将无法一段时间后有座位用户，第三个问题是座位状态的重复，我想这是一个错误，或者你有另一个名字。在我看来，一个更好的主意是如果它是 1->1 映射，则使用单个表并将其定义为`seats-table``user_id``int(8)`

```
CREATE TABLE `members-table` (
   user_id int(8) not null auto_increment,
   user_name varchar(30) not null,
   user_pass varchar(255) not null,
   seat -- your type choice, should be nullable if not seated
); 
```

使用此配置清除座位就像

```
UPDATE `members-table` SET `seat` = NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:55:47.793

```
CREATE TABLE `seats` (
   id int(4) unsigned not null auto_increment primary key,
   row int(2) unsigned not null,
   col int(2) unsigned not null,
   UNIQUE(row, col)
) ENGINE InnoDB;

CREATE TABLE `members` (
   user_id int(8) not null auto_increment primary key,
   user_name varchar(30) not null,
   user_pass varchar(255) not null,
   seat int(4) unsigned null,
   FOREIGN KEY(seat) references seats(id) on delete set null on update restrict,
   UNIQUE(seat)
) ENGINE InnoDB; 
```

您必须使用所有可用的行和列填充座位数据库，插入时使用 null 以使用 auto_increment 功能！

检查是否有座位

```
SELECT COUNT(*) AS occupied FROM members WHERE seat = (SELECT id FROM seats WHERE row = :ROW AND col = :COL); 
```

如果对您更方便，也可以`SELECT (1 - COUNT(*)) AS vacant`在上面的查询中使用。

找到第一个免费座位

```
SELECT MIN(id) FROM seats WHERE NOT EXISTS( SELECT seat FROM members WHERE seat = seats.id); 
```

取消分配所有已占用的座位

```
UPDATE members SET seat = NULL; 
```

# selenium - SVG 和硒

> ID：12457635
> 
> 赞同：1
> 
> 时间：2012-09-17T10:43:17.423
> 
> 标签：selenium, charts, testautomationfx

Hej 伙计们

我使用谷歌可视化 api 绘制堆积条形图。一切都很好，但现在我想用硒测试它，但很难在谷歌图表中找到元素。

例如，我想单击图表元素，但每次尝试通过 xpath 查找元素时，都会出现异常“OpenQA.Selenium.NoSuchElementException：找不到元素”

我用 selenium 读到它很难点击 svg 图像。

有没有人知道解决方案，因为我有点绝望，我自己还没有在网上找到合适的解决方案。

我的图表如下所示：

[http://i48.tinypic.com/21o4swx.png](http://i48.tinypic.com/21o4swx.png)

我想做的是：

```
 webdriver.Navigate().GoToUrl("http://localhost:59777/Tests/TestsMainView");
        IWebElement element = webdriver.FindElement(By.XPath("/html/body/div/div[2]/div[2]/iframe/html/body/div/svg/g[2]/g/g[2]/rect[5]"));
        Actions myAction = new Actions(webdriver);
        myAction.Click(element).Perform();
        Thread.Sleep(9999); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:29:58.663

我注意到 xpath 无法选择 svg 标记中的任何内容。我设法使用 className 或 tagName 选择器找到元素，或者您甚至可以尝试 cssSelectors 但我不确定那个。请注意，您仍然可以使用 xpath 访问 svg 中节点的父节点，方法是：

```
 By.xpath(".."); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:15:19.607

这里有一些可以帮助你的建议。首先你的第二行代码应该是

```
WebElement element = webdriver.FindElement(By.xpath("//img[contains(@src,'http://i48.tinypic.com/21o4swx.png')]")) 
```

你有“IWebElement”（这可能只是你问题中的一个错字）。我改变了查找元素的方式来搜索匹配元素，而不是从顶层开始向下工作。这是一种更好的做法，可以缩小您尝试与之交互的元素的范围，以便对代码的更改不会立即破坏您的测试。此外，除非您使用“//”或“xpath =”启动 xpath 表达式，否则 selenium Webdriver 将无法识别它，因此即使您的路径从未更改过 selenium Webdriver 也无法找到它。

如果我了解您要执行的操作，则还可以删除第 3-5 行并将其替换为以下内容，

```
element.click(); 
```

这将使 selenium Webdriver 放大链接提供的图表。我希望这有帮助

# python - 如何断开 python DBus 连接？

> ID：12457639
> 
> 赞同：1
> 
> 时间：2012-09-17T10:43:35.403
> 
> 标签：python, python-2.7, dbus, qdbus

我为 pidgin 客户端制作了某种应答机，它使用 Linuxes DBus 与 pidgin 建立连接。代码是这样的：

```
class DBus_Answer():
    def __init__(self, text = "No text"):  
        self.answer = text
        bus_loop = DBusQtMainLoop(set_as_default=True)
        self.bus = dbus.SessionBus()
        self.bus.add_signal_receiver(self.pidgin_control_func,
                                     dbus_interface="im.pidgin.purple.PurpleInterface",
                                     signal_name="ReceivedImMsg")

    def pidgin_control_func(self, account, sender, message, conversation, flags):
        obj = self.bus.get_object("im.pidgin.purple.PurpleService", "/im/pidgin/purple/PurpleObject")
        purple = dbus.Interface(obj, "im.pidgin.purple.PurpleInterface")
        purple.PurpleConvImSend(purple.PurpleConvIm(conversation), self.answer) 
```

现在我想将它用作另一个程序中的模块。我这样称呼它：

```
answering_machine.DBus_Answer(message) 
```

问题是，当我停止第二个程序（将这个程序作为模块的程序）然后再次启动它时，我会得到一个`segmentation fault`，因为它想与 DBus 建立另一个连接，而且它接缝不规则！

否则我想给用户禁用这个模块的机会。我试着用一个`if`语句。它将第一次工作。但是如果用户运行该模块一次，他就不能再禁用它了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:38:08.953

发生分段错误是因为在 python 模块（用 C 编写）中，指针为 NULL，或者因为它指向随机内存（可能从未初始化为任何东西），或者因为它指向已释放/解除分配/“删除”的内存。所以您的问题可能与您的记忆有关。尝试使用[此处](https://stackoverflow.com/questions/2663841/python-tracing-a-segmentation-fault/2664232#2664232)描述的方法跟踪段错误

# c# - asp.net mvc 4 simplemembership 与外部数据库

> ID：12457642
> 
> 赞同：0
> 
> 时间：2012-09-17T10:43:45.083
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我正在使用内置的 asp.net mvc 4 WebSecurity 简单成员。我已经从 app_data 文件夹 aspnet.mdf 文件手动生成创建表脚本到托管在 SpeedHost 服务器上的外部数据库，并获得了以下连接字符串，当我从我的机器开发应用程序时它工作得很好。

```
<add name="SAMS" connectionString="Data Source=IP;Initial Catalog=DATABASE;Persist Security Info=True;User ID=USERID;Password=PASSWORD;MultipleActiveResultSets=True;Application Name=EntityFramework" providerName="System.Data.SqlClient" /> 
```

但是当我在 SpeedHost 上部署我的应用程序并单击登录链接按钮，然后重定向到登录页面时，它会引发以下异常：

请帮助我摆脱这个问题。

```
 Server Error in '/' Application.
    A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

    Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)

    Source Error:

    An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

    Stack Trace:

    [SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5064474
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +85
   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +349
   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +265
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +34

[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +163
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +40

[ProviderIncompatibleException: An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.]
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +163
   System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest) +39
   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +46
   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +62
   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +117
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +453
   System.Data.Entity.Internal.InternalContext.CreateObjectContextForDdlOps() +16
   System.Data.Entity.Database.Exists() +42
   SAMS.UI.New.Filters.SimpleMembershipInitializer..ctor() +110

[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]
   SAMS.UI.New.Filters.SimpleMembershipInitializer..ctor() +259

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Threading.LazyHelpers`1.ActivatorFactorySelector() +81
   System.Threading.LazyInitializer.EnsureInitializedCore(T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory) +113
   System.Threading.LazyInitializer.EnsureInitialized(T& target, Boolean& initialized, Object& syncLock) +127
   SAMS.UI.New.Filters.InitializeSimpleMembershipAttribute.OnActionExecuting(ActionExecutingContext filterContext) +28
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +74
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +20
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +511
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +20
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState) +190
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +159
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state) +182
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +478
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +287
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +30
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +343
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +282
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +76
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +236
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8963444
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.237 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T11:00:06.520

问题出在 SimpleMembershipInitializer 的方法构造函数中，特别是在 context.Database.Exists() 中。此代码不使用 web.config 中提供的 SAMS 连接字符串。它尝试连接到本地数据库，但本地数据库只能在开发机器上找到。解决方案是注释整个 using{} 块，并且仅在部署到生产服务器时保留 WebSecurity.InitializeDatabaseConnection(...)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:38:34.840

我认为您需要将连接字符串名称从“SAMS”更改为“DefaultConnection”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:16:44.647

一定要检查 InnerException。

我的是`Login failed for user 'IIS APPPOOL\\dev.XXXXXXXX.com'`- 很容易修复

没有帮助的可怕例外`The provider did not return a ProviderManifestToken string`！

# java - 如何从java类调用guvnor规则

> ID：12457645
> 
> 赞同：0
> 
> 时间：2012-09-17T10:43:52.540
> 
> 标签：java, jboss, drools, drools-guvnor, guvnor

我想从简单的 java 文件中调用 guvnor 规则。但我面临着它的问题。我正在使用 jboss7 进行部署。如果我错过任何事情，请任何人告诉我。

我的 drl 规则

```
package com.rule;

import com.rule.Rule1Bean;
rule "r1"

when 
    $s : Rule1Bean(true)

then

    $s.setB("b");
    System.out.println("finished" );
end 
```

我的豆文件

```
package com.rule;

public class Rule1Bean {

    public Rule1Bean()
    {

    }

    public Rule1Bean(String a) {

        this.a = a;

    }

    private String a;
    private String b;
    public String getA() {
        return a;
    }
    public void setA(String a) {
        this.a = a;
    }
    public String getB() {
        return b;
    }
    public void setB(String b) {
        this.b = b;
        System.out.println("b="+b);
    }

} 
```

变更集.xml

```
?xml version="1.0" encoding="UTF-8"?>
<change-set xmlns='http://drools.org/drools-5.0/change-set'
    xmlns:xs='http://www.w3.org/2001/XMLSchema-instance'
    xs:schemaLocation='http://drools.org/drools-5.0/change-set
    http://anonsvn.jboss.org/repos/labs/labs/jbossrules/trunk/drools-api/src/main/resources/change-set-1.0.0.xsd' >
   <add>
      <resource
      source='http://localhost:8080/drools-guvnor/org.drools.guvnor.Guvnor/package/com.rule/TestRule.drl'
      type='DRL' basicAuthentication="enabled" username="admin" password="admin" />
   </add>
</change-set> 
```

TestGuvnor.java 文件

```
package com.rule;

import junit.framework.TestCase;

import org.drools.KnowledgeBase;
import org.drools.KnowledgeBaseFactory;
import org.drools.agent.KnowledgeAgent;
import org.drools.agent.KnowledgeAgentConfiguration;
import org.drools.agent.KnowledgeAgentFactory;
import org.drools.core.util.FileManager;
import org.drools.io.ResourceChangeScannerConfiguration;
import org.drools.io.ResourceFactory;
import org.drools.io.impl.ResourceChangeScannerImpl;
import org.drools.runtime.StatefulKnowledgeSession;
import org.drools.RuleBase;
import org.drools.WorkingMemory;
import org.drools.agent.RuleAgent;
import java.util.Iterator;

public class TestGuvnor extends TestCase{
    public static void main(String[] args) throws Exception {
        (new TestGuvnor()).testDroolsWithGuvnor();
        /*RuleAgent agent = RuleAgent.newRuleAgent("/Guvnor.properties");
        RuleBase ruleBase = agent.getRuleBase();

        WorkingMemory workingMemory = ruleBase.newStatefulSession();

        Rule1Bean d = new Rule1Bean("Jarek");
        workingMemory.insert(d);

        workingMemory.fireAllRules();

        for (Iterator i = workingMemory.iterateObjects(); i.hasNext();) {
                System.out.println(i.next().getClass().getCanonicalName());
        }*/
}

    public void testDroolsWithGuvnor() throws Exception {
        KnowledgeBase knowledgeBase = createKnowledgeBase();
        StatefulKnowledgeSession session = knowledgeBase.newStatefulKnowledgeSession();
        try {
            Rule1Bean rule = new Rule1Bean();
            rule.setA("aaa");
            System.out.println("creating rule");
            session.insert(rule);
            session.fireAllRules();
            System.out.println("b="+rule.getB());
        }
        finally {
            session.dispose();
        }
    }

    private static KnowledgeBase createKnowledgeBase() {
         KnowledgeAgentConfiguration kaconf = KnowledgeAgentFactory.newKnowledgeAgentConfiguration();
         kaconf.setProperty( "drools.agent.scanDirectories", "false" );
         KnowledgeAgent kagent = KnowledgeAgentFactory.newKnowledgeAgent( "test agent", kaconf );
         kagent.applyChangeSet( ResourceFactory.newClassPathResource("changeset.xml"));
         return kagent.getKnowledgeBase();
    }

} 
```

# android - 什么是 Android 上的“nuclear-pub”设备？

> ID：12457647
> 
> 赞同：1
> 
> 时间：2012-09-17T10:44:02.290
> 
> 标签：android, device, google-play

当我进入 Google Play 商店的开发者控制台时，在“设备统计”部分中，我会看到所有安装了该应用程序的设备类型。

在此列表中，有一个名为“nuclear-pub”的设备。

有谁知道这个设备背后隐藏着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:25:33.210

```
AdapterDeviceID: A13MID. | AdapterDescription: 'Model: 'A13MID', Product: 'nuclear_pub', Manufacturer: 'unknown', Hardware: 'sun5i''. |  | unknown A13MID | softwinners/nuclear_pub/nuclear-pub:4.0.3/IML74K/20120428:eng/test-keys
ycc_rgb_convert_argb!!! 
```

在[这里找到](https://crash-analysis.mozilla.com/rkaiser/2012-07-01/fna-release-14.0-devices-raw.csv)

它是来自一家名为 Allwinner 的制造商的名为 A 13 Mid 的 7 英寸平板电脑 - 运行 ICS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:34:12.293

看起来有人在自定义 rom 中修改了设备名称。

# javascript - Rails：部分远程形式：工作一次，而不是两次

> ID：12457650
> 
> 赞同：5
> 
> 时间：2012-09-17T10:44:07.020
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, forms

最近几天我遇到了一个问题。我想使用远程表单更新对象。当我第一次提交表单时，我基本上可以更新我的对象，但第二次它不起作用。

所以，我有一个部分的远程形式。

查看/任务/_table_form.haml.erb

```
%tr{:class => "tr_mission_#{mission.id} tr_mission"}
  = form_for(mission, :url => mission_path(mission), :html => { :remote => true , :method=> :put, :format => :js, :multipart => true, :class => "my_remote_form" }) do |f|
    = f.text_area :description,  :size => "220x6", :class => "fill_data"
    = f.submit  'Update', :class => "btn btn btn-inverse", :disable_with => "updating..." 
```

这是我的控制器 /app/controllers/missions_controller.rb

```
def update
    @mission = Mission.find(params[:id])
    respond_to do |format|
        format.html {
           render :action => "edit"
        }
        format.js {}
    end
  end 
```

这是 /missions/update.js.erb：

```
$('.tr_mission_<%= @mission.id %>').replaceWith('<%= escape_javascript( render :partial => "table_form", :locals => {:mission => @mission}).html_safe  %>'); 
```

我的对象的更新工作一次，而不是两次，在萤火虫控制台上，我可以看到我的表单类型是第一次：text/javascript，下一次打开 text/html...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:50:44.293

首次在您的页面中加载 javascript。所以它会起作用。下次你的 javascript 不工作意味着你可能会在 document.ready 中添加你的脚本代码......

对于这个问题，您有两种解决方案：

1.  您需要在每次更新时再次调用 javascript 文件。
2.  您在特定的 javascript 函数中指定更新调用，并且您必须在页面中的每个更新触发时调用该 javascript 函数。

# powershell - Powershell v2.0 模块：默认加载路径（用户/Windows 系统文件夹）？

> ID：12457652
> 
> 赞同：17
> 
> 时间：2012-09-17T10:44:29.017
> 
> 标签：powershell, powershell-2.0

这是关于我之前问过的[这个问题-](https://stackoverflow.com/q/10501484/763026) [Powershell：在目标系统上安装模块](https://stackoverflow.com/q/10501484/763026)

*   默认模块加载路径是什么？现在经过这么多天，它已经开始给出这个错误（来自我的 C# 代码）

    `Cannot find path 'C:\Users\angshuman\Documents\WindowsPowerShell\Modules\MyPSModules\MyPsModules.‌​psd1' because it does not exist.`

    *一直很好地从 SysWow64 文件夹路径加载*
*   为什么它突然在**用户**文件夹而不是**Windows**文件夹中搜索？

**我在 Windows 7 64 位操作系统上通过 C# 执行相同的代码**

```
 _ps = PowerShell.Create();   
    _ps.AddScript("Import-Module MyPSModules -PassThru");
    Collection<PSObject> psObjects = _ps.Invoke(); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-08-21T01:34:01.037

如果你想让它们具有更好的可读性，你可以使用这个：

```
$env:PSModulePath.split(';') 
```

[![在此处输入图像描述](../Images/3f57ca923ec4a243b4a62f94eece0e75.png)](https://i.stack.imgur.com/ATOLc.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-17T12:02:52.867

`$env:psmodulePath`是保存用于发现模块的路径的自动变量。如果未设置，PowerShell 会查找`c:\windows\system32\WindowsPowerShell\v1.0\modules`和`MyDocuments\WindowsPowerShell\modules`.

所以默认情况下它应该总是在两个地方寻找。

我没有做太多 32-on-64 编码，但如果您在 64 位操作系统上运行 32 位应用程序，我可以使用 SysWow64（而不是 System32）看到它。

# jquery - 如何在jplayer圈子里重复一首歌

> ID：12457655
> 
> 赞同：1
> 
> 时间：2012-09-17T10:44:37.320
> 
> 标签：jquery, html, jplayer

如何在jplayer圈子里重复一首歌？我正在使用以下代码进行自动播放。我也想实现重复。我试图添加一些选项，例如`repeat:`，但它对我不起作用。

```
<script type="text/javascript">
    $(document).ready(function(){

        /*
         * Instance CirclePlayer inside jQuery doc ready
         *
         * CirclePlayer(jPlayerSelector, media, options)
         *   jPlayerSelector: String - The css selector of the jPlayer div.
         *   media: Object - The media object used in jPlayer("setMedia",media).
         *   options: Object - The jPlayer options.
         *
         * Multiple instances must set the cssSelectorAncestor in the jPlayer options. Defaults to "#cp_container_1" in CirclePlayer.
         */

        var myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
        {
            mp3: "http://gokuldham.siyatechnologies.com/Images/ShreejiDhun.mp3",
            oga: "http://gokuldham.siyatechnologies.com/Images/ShreejiDhun.ogg"
        }, {
            cssSelectorAncestor: "#cp_container_1",
            canplay: function() {
            $("#jquery_jplayer_1").jPlayer("play");
            }

        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:06:50.130

这段代码工作正常。自动播放正在工作，歌曲正在重复。

```
$("#jquery_jplayer_1").jPlayer({
    ready: function (event) {
        $(this).jPlayer("setMedia", {
            m4a:"http://www.jplayer.org/audio/m4a/TSP-01-Cro_magnon_man.m4a",
            oga:"http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg"
        });
    },
    swfPath: "js",
    supplied: "m4a, oga",
    wmode: "window",
    loop: true,
    canplay: function() {
       $("#jquery_jplayer_1").jPlayer("play");
    }       
}); 
```

请注意，我使用的是**循环**而不是重复。

# java - Android 相当于 vb.net StringValue.ToString("0000")

> ID：12457657
> 
> 赞同：0
> 
> 时间：2012-09-17T10:44:43.450
> 
> 标签：java, android, string

是否有一个等效的 vb.nets StringValue.ToString("0000") 以便它将字符串作为四个数字返回。我正在努力解决它：

```
public static String getNextID(int stationID, String tablename) {

        String rtnID;
        rtnID = Integer.toString(stationID) + "-" + getNextID(tablename);

        return rtnID;

    } 
```

因此 rtnID 的值是 4 个字符长，如果需要，它会在正确的位置添加 0

汤姆

编辑：继承人我现在有什么不工作：

```
public static String getNextID(int stationID, String tablename) {

    String rtnID;
    NumberFormat formatter = new DecimalFormat("0000");
    String s = formatter.format(String.valueOf(stationID)); 
    rtnID = s + "-" + getNextID(tablename);

    return rtnID;

} 
```

出现此错误： http: [//pastebin.com/XpvzkC5D](http://pastebin.com/XpvzkC5D)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:46:48.110

你可以使用这个：

```
NumberFormat formatter = new DecimalFormat("0000");
String s = formatter.format(stationID); 
```

# eclipse - nutch2.0 与 cassandra

> ID：12457658
> 
> 赞同：1
> 
> 时间：2012-09-17T10:44:49.423
> 
> 标签：eclipse, cassandra, nutch, gora

```
Exception in thread "main" org.apache.gora.util.GoraException: java.io.IOException
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:167)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:135)
    at org.apache.nutch.storage.StorageUtils.createWebStore(StorageUtils.java:75)
    at org.apache.nutch.crawl.InjectorJob.run(InjectorJob.java:214)
    at org.apache.nutch.crawl.Crawler.runTool(Crawler.java:68)
    at org.apache.nutch.crawl.Crawler.run(Crawler.java:136)
    at org.apache.nutch.crawl.Crawler.run(Crawler.java:250)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.crawl.Crawler.main(Crawler.java:257)
Caused by: java.io.IOException
    at org.apache.gora.cassandra.store.CassandraStore.initialize(CassandraStore.java:88)
    at org.apache.gora.store.DataStoreFactory.initializeDataStore(DataStoreFactory.java:102)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:161)
    ... 8 more
Caused by: java.lang.NullPointerException
    at org.apache.gora.cassandra.store.CassandraMapping.<init>(CassandraMapping.java:117)
    at org.apache.gora.cassandra.store.CassandraMappingManager.get(CassandraMappingManager.java:84)
    at org.apache.gora.cassandra.store.CassandraClient.initialize(CassandraClient.java:84)
    at org.apache.gora.cassandra.store.CassandraStore.initialize(CassandraStore.java:85)
    ... 10 more 
```

**我只是在 cassandra 上运行 nutch2.0。是crawl的输出，TestGoreStorage的输出如下：**

```
Starting!
Exception in thread "main" org.apache.gora.util.GoraException: java.io.IOException
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:167)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:135)
    at org.apache.nutch.storage.StorageUtils.createWebStore(StorageUtils.java:75)
    at org.apache.nutch.storage.TestGoraStorage.main(TestGoraStorage.java:204)
Caused by: java.io.IOException
    at org.apache.gora.cassandra.store.CassandraStore.initialize(CassandraStore.java:88)
    at org.apache.gora.store.DataStoreFactory.initializeDataStore(DataStoreFactory.java:102)
    at org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:161)
    ... 3 more
Caused by: java.lang.NullPointerException
    at org.apache.gora.cassandra.store.CassandraMapping.<init>(CassandraMapping.java:117)
    at org.apache.gora.cassandra.store.CassandraMappingManager.get(CassandraMappingManager.java:84)
    at org.apache.gora.cassandra.store.CassandraClient.initialize(CassandraClient.java:84)
    at org.apache.gora.cassandra.store.CassandraStore.initialize(CassandraStore.java:85)
    ... 5 more 
```

**我可以将 cassandra 与 cassandra-cli 连接起来，然后从 svn 中查看 nutch。这是 gora.properties 中的效果配置：**

```
 gora.datastore.default=org.apache.gora.cassandra.store.CassandraStore
    gora.sqlstore.jdbc.driver=org.hsqldb.jdbc.JDBCDriver
    gora.sqlstore.jdbc.url=jdbc:hsqldb:hsql://210.44.138.8/nutchtest
    gora.sqlstore.jdbc.user=sa
    gora.sqlstore.jdbc.password=
    gora.cassandrastore.servers=210.44.138.8:9160 
```

**和 gora-cassandra-mapping 中的配置：**

```
<keyspace name="webpage" cluster="My Cluster" host="210.44.138.8">
    <family name="p"/>
    <family name="f"/>
    <family name="sc" type="super"/>
</keyspace> 
```

**210.44.138.8是我集群的一个节点，集群名称是“我的集群”，更多信息：关闭防火墙，在eclipse中运行。如果有人给我任何帮助，我很高兴。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:53:21.240

我不确定我是否有完全相同的问题，但我发现在 gora-cassandra-mapping.xml 文件中，我必须向类元素添加一个键空间属性（ **keyspace="ks1" ）：**

```
<keyspace name="ks1" cluster="My Cluster" host="1.2.3.4">
    ...
</keyspace>
<class keyspace="ks1" keyClass="java.lang.String" name="org.apache.nutch.storage.WebPage">
    ...
</class> 
```

# matlab - 在matlab中并行计算时间序列数据的最佳方法

> ID：12457659
> 
> 赞同：1
> 
> 时间：2012-09-17T10:44:48.880
> 
> 标签：matlab, parallel-processing, distributed-computing, mathematical-optimization

我有一个安装了 Matlab 和 PCT 的 linux 集群（128 个使用 Torque Manager 的工作人员），我正在寻找一种并行计算的好方法。

我有一个时间序列轨迹数据 (100k x 2) 矩阵。我执行涉及矩阵对角化、求幂和乘法的最大似然 (ML) 计算，这对于较小的矩阵运行速度很快。我将轨迹数据分成小块并在许多工作人员（粗并行化）上执行计算，并且在这里没有任何问题，因为它工作正常（大约 30 秒内完成）

但计算还取决于我需要改变和测试对 ML 的影响的一些参数。（类似于参数扫描）。

当我尝试使用循环执行此操作时，计算变得越来越慢，由于某种原因我无法弄清楚。

```
%%%%%%% Pseudo- Code Example:

% a [100000x2], timeseries data
load trajectoryData 

% p1,p2,p3,p4 are parameters 
% but i want to do this over a multiple values fp3 & fp4 ;
paramsMat = [p1Vect; p2Vect;p3Vect ;p4Vect];
matlabpool start 128

[ML] = objfun([p1 p2 p3 p4],trajectoryData) % runs fast ~ <30s 

%% NOTE: this runs progressively slow 
for i = 1:length(paramsMat)

     currentparams = paramsMat(i,:);
     [ML] = objfun(currentparams,trajectoryData)
end
matlabpool close 
```

objFunc 函数如下：

```
% objFunc.m
[ML] = objFunc(Params, trajectoryData) 

% b = 2 always
[a b] = size(trajectoryData) ;

% split into fragments of 1000 points  (or any other way)
fragsMat = reshape(trajectoryData,1000, a*2/1000) ;

% simple parallelization. do the calculation on small chunks
parfor ix = 1: numFragments
   % do heavy calculations
   costVal(ix) = costValFrag; 
end

% just an example; 
ML = sum(costVal) ; 

%%%%%% 
```

奇怪的是，一次计算需要大约 30 秒（使用完整的集群），但在 for 循环中，由于某种奇怪的原因，速度会有所衰减，即使在第 100 次计算中，它也会变得非常慢。工作人员仅使用 10-20% 的 CPU。

如果您有任何建议，包括替代并行化建议，那将有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:46:01.480

如果我没看错的话，每个参数集都完全独立于所有其他参数集，而且你的参数集比工人多。

简单的解决方案是使用批处理作业而不是 parfor。

```
job_manager = findresource( ... look up the args that fit your cluster ... )
job = createJob(job_manager);
for i = 1:num_param_sets
    t = createTask(job, @your_function, 0, {your params});
end
submit(job); 
```

这样，您就可以避免内部函数的 parfor 带来的任何通信开销，并且您可以将 matlab 分开。您甚至可以告诉它在任务之间自动重启工作人员（我认为），作为工作参数之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:03:18.393

的价值是`numFragments`多少？如果这并不总是大于您的工人数量，那么您会看到事情变慢了。

我建议尝试使您的外`for`循环成为`parfor`. 通常最好在最外层应用并行性。

# mysql - 如何在 MySQL 的单引号中执行选择查询

> ID：12457664
> 
> 赞同：0
> 
> 时间：2012-09-17T10:45:15.117
> 
> 标签：mysql, stored-procedures

```
set Q1= 'SELECT ID, EnquiryID, EnquiryDate, CompanyName, ContactPerson FROM EnquiryHeader WHERE ';
set Q1 = concat(Q1,RefID); 
```

在上面的查询 RefID 是过程中的参数值和 RefID 值是 'DelFlg=0 和 EnquirySource=3'

那么如何在MYSQL中执行Q1呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:48:35.660

尝试这个：

```
set @Q1 = CONCAT('SELECT ID, EnquiryID, EnquiryDate, CompanyName, ContactPerson FROM Syscon.EnquiryHeader WHERE ',RefID);

PREPARE makeQ FROM @Q1;
EXECUTE makeQ;
DEALLOCATE PREPARE makeQ; 
```

# php - 如何使用 PHP 将 Unicode 印度语言（马拉雅拉姆语）转换为图像

> ID：12457669
> 
> 赞同：1
> 
> 时间：2012-09-17T10:45:21.667
> 
> 标签：php

这是我用于创建带有文本的图像的 php 代码，我使用了马拉雅拉姆语文本，但 PHP 生成了这样的图像“？？？？？？”

```
<?php mb_language('uni'); 
mb_internal_encoding('UTF-8'); 
header('Content-type: image/gif');
$text = 'മലയാളം  ';
$font = 'mlkarthika.ttf';
$im = imagecreatetruecolor(160, 160);
$white = imagecolorallocate($im, 255, 255, 255);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 159, 159, $white);
imagettftext($im, 12, 0, 20, 20, $black, $font, $text);
imagegif($im);
imagedestroy($im);
?> 
```

字体 ML_ttkarthika 在 unicode 字体网站上可用，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:48:06.683

ImageTTFText 和 Unicode 存在问题。

你可能想看看这个：[PHP function imagettftext() and unicode](https://stackoverflow.com/questions/198007/php-function-imagettftext-and-unicode)

# jdbc - JDBC批量选择返回多个ResultSet

> ID：12457679
> 
> 赞同：0
> 
> 时间：2012-09-17T10:46:02.873
> 
> 标签：jdbc

一个小问题，但我想知道是否有人知道我为什么会出现以下行为。我有一个带有 UNION 指令的大型 select 语句。我需要调用此语句以获得输入列表。因此：

```
Connection connection = createConnection();
PreparedStatement statement = connection.prepareStatement(dbLoadOneQuery, TYPE_FORWARD_ONLY, CONCUR_READ_ONLY);

for (Integer param : params) {
    statement.setInt(1, param);
    statement.setInt(2, param);
    statement.addBatch();
}
statement.execute();

do {
    ResultSet resultSet = statement.getResultSet();
    // snip
} while (statement.getMoreResults()); 
```

现在，我知道我可以通过多种方式做到这一点。是否有更好的方法不是问题。相反，我想知道为什么我的结果成堆出现？我需要从我的声明中读取 3-4 个单独的 ResultSet。它们不对应于联合，它们的大小不相等，并且数据不是以任何特定形式分组的。

我猜这是驱动程序特定的事情，但我找不到允许这种行为的 JDBC 规范。驱动程序`com.sybase.jdbc4.jdbc.SybDriver`来自库 jconn4。

```
jConnect (TM) for JDBC(TM)/7.07 GA(Build 26666)/P/EBF19485/JDK 1.6.0/jdbcmain/Wed Aug 31 03:14:04 PDT 2011 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:33:31.813

这不是执行 UNION 查询，而是批处理*n 个* **单独**的查询（即`dbLoadOneQuery`具有*n 个*不同的参数组合），并一次性执行它们，然后检索*n 个*单独的 ResultSet（每个查询一个）。

如果你想要`UNION`s，那么实际执行一个`UNION`查询。

根据您的查询，类似于：

```
StringBuilder query = new StringBuilder();
query.append(dbLoadOneQuery);
int queryCount = params.size();
// If we have more than one parameter add a UNION clause:
while (queryCount-- > 1) {
   query.append(" UNION ").append(dbLoadOneQuery);
}
PreparedStatement statement = connection.prepareStatement(query.toString());
int paramIdx = 1;
for (Integer param : params) {
   statement.setInt(paramIdx++, param);
   statement.setInt(paramIdx++, param);
}
ResultSet rs = statement.executeQuery(); 
```

# php - FOSRestBundle：将附加变量传递给 Twig 模板

> ID：12457683
> 
> 赞同：1
> 
> 时间：2012-09-17T10:46:23.153
> 
> 标签：php, rest, symfony, fosrestbundle

我正在使用相同的操作来处理一个`html`和一个`json`响应，只是在后面的一个路由后面加上`.json`.

`json`工作没有问题，但是当响应是我`html`需要向`Twig`模板传递一个额外的变量时，我不知道也找不到怎么做。目前，我的代码是：

```
// $entity = get my data;

$name = 'foo';

$view = $this->view($entity, 200)
   ->setTemplate('MyBundle:MyController:myTemplate.html.twig')
   ->setTemplateVar('entity')
   ;

return $this->handleView($view); 
```

我怎样才能传递`$name`给`myTemplate.html.twig`？我需要的是这样的：

```
//...
->setTemplate('MyBundle:MyController:myTemplate.html.twig', array('name' => $name))
//... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:56:17.717

好的，我收到了[在 FosRestBundle github 页面中打开问题](https://github.com/FriendsOfSymfony/FOSRestBundle/issues/299)的响应。

目前，没有直接的方法，但以下过程将起作用：

1)在路由默认值中分别添加`_format`带有`html`和值的选项：`json`

```
defaults: { _controller: myBundle:myController:myAction, _format: html } #or json 
```

2）`$_format`作为动作签名的第一个参数添加：

```
public function myActionAction($_format, $any_other_paramer) 
```

3）有条件地向Twig模板添加更多变量：

```
if ($this->get('fos_rest.view_handler')->isFormatTemplating($_format)) {
  $view->setData(array('name' => $name, 'entity' => $view->getData()));
} 
```

# ruby - 控制新选项卡以使用 Watir 进行操作？（红宝石）

> ID：12457690
> 
> 赞同：5
> 
> 时间：2012-09-17T10:46:43.790
> 
> 标签：ruby, watir

我正在使用 watir 进行自动化测试，在运行了一些表格之后，一个图表会在一个新选项卡中打开。但 watir 似乎无法识别新的当前选项卡并继续搜索原始浏览器选项卡。

有什么方法可以告诉您要使用哪个选项卡？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T11:30:42.880

Watir 不关心新页面是在新窗口中还是在新选项卡中打开，因此使用窗口切换 API 切换到新选项卡：

```
browser.window(:title => "annoying popup").use do
  browser.button(:id => "close").click
end 
```

更多信息：[http ://watirwebdriver.com/browser-popups/](http://watirwebdriver.com/browser-popups/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T07:27:25.757

您可以使用此代码

```
browser.windows.last.use 
```

这会将 watir 焦点设置为新打开的或上次打开的选项卡或窗口，并且在完成使用此新选项卡/窗口后，只需告诉 watir 关闭该选项卡/窗口

```
browser.windows.last.close 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-25T13:39:49.710

窗口有 3 个主要选择器：

*   `:title` - 通常是最简单的

*   `:url` - 通常与 Regexp 值一起使用

*   `:element`- 一个独特的元素可能是最不脆弱的（从 Watir 6.18 开始的新元素！）

    browser.window(title: '新窗口') browser.window(url: /my_page.html/) browser.window(element: browser.div(id: 'my-element'))

不再支持按索引定位

更多信息：[Watir 浏览器窗口](http://watir.com/guides/windows/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-13T18:46:37.933

```
@browser.windows[x].use 
```

将“x”替换为您要使用的标签编号。@browser.windows 是一个 Watir 集合，为此可以将其视为一个数组。

# java - 既不能通过java也不能手动删除文件

> ID：12457691
> 
> 赞同：0
> 
> 时间：2012-09-17T10:46:44.457
> 
> 标签：java, file, io, delete-file

我有以下情况，在 servlet 中创建一个文件，然后必须删除它。执行该文件时，我发现该文件仍在服务器中，所以我尝试手动删除它，但不能，我收到以下消息：

> 此文件由另一个程序打开：javaw.exe

这是我的代码：

```
public class GenerateFile extends Action { 
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response) throws IOException {
        System.out.println("ok");
        String fileName = request.getParameter("fileName");
        Integer nbrParam = Integer.parseInt(request.getParameter("nbrParam"));
        String[] valueParam = new String[nbrParam+1];
        for(int i =1;i<=nbrParam;i++)
        {  System.out.println(request.getParameter("param"+i));
            valueParam[i]=request.getParameter("param"+i);
        }
        FileInputStream in = new FileInputStream("C:\\Users\\free\\Desktop\\myworkspace\\gestionRH\\WebRoot\\fiches\\"+fileName+".doc");
        POIFSFileSystem fs = new POIFSFileSystem(in);
        HWPFDocument doc = new HWPFDocument(fs);
        Range r = doc.getRange();
        for(int i=1;i<=nbrParam;i++)
        {   System.out.println("<param"+i+">");
            System.out.println(valueParam[i]);
            r.replaceText("<param"+i+">", valueParam[i]);
        }
        File  file = new File("C:\\Users\\free\\Desktop\\myworkspace\\gestionRH\\WebRoot\\fiches\\temp");
        File temp = File.createTempFile("monfile",".doc",file);
        String tempName =temp.getName();
        doc.write( new FileOutputStream(temp));
        OutputStream out = response.getOutputStream();
        response.setContentType("application/rtf");
        response.setHeader("Content-Disposition","attachment; filename=Decision");
        FileInputStream in1 = new FileInputStream(temp);
        byte[] buffer = new byte[4096];
        int length;

        while ((length = in1.read(buffer)) > 0){
            out.write(buffer, 0, length);
        }
        in1.close();
        out.flush();
        System.out.println("C:\\Users\\free\\Desktop\\myworkspace\\gestionRH\\WebRoot\\fiches\\temp\\"+tempName);
        File f = new File("C:\\Users\\free\\Desktop\\myworkspace\\gestionRH\\WebRoot\\fiches\\temp\\"+tempName);
        f.delete();

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:50:28.780

您应该关闭所有文件读取对象实例。另外，如果你可以手动删除文件，你应该关闭java然后删除它，javaw是在控制台之外启动java的进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T10:54:45.053

问题是您正在创建一个`new FileOutputStream(tempName)`要在该文件上写入的文件，但从不关闭该输出流（或链接到它的另一个输出流）。

做这个：

```
FileOutputStream fos = newFileOutputStream(tempName);
// use it
fos.close(); // CLOSE IT!!

// then you can delete the file 
```

**简化**

也许你可以用另一种方式完成工作，没有临时文件......

例如：`doc.write(new FileOutputStream(tempName))`可以替换为：

```
doc.write(response.getOutputStream()); 
```

这样 doc 将其字节直接发送到您需要它们的位置，而不是发送到临时文件，从而消除了对它的需要。

输入/输出流背后的想法是组合它们。Input/OutputStream 是抽象基类。并且有很多实现：

*   基于内存：ByteArrayInput/OutputStream
*   基于文件：FileInputOutputStream
*   压缩/解压缩到另一个输出流：GZipInputOutputStream
*   等等

它的美妙之处在于应用装饰器模式来添加功能。举例：

```
new GZipOutputStream(new ByteArrayOutputStream());

// creates an outputstreams that compress data received and send it to the other stream
// the BAOS then writes the received bytes to memory

new GZipOutputStream(new FileOutputStream());
// it's the same but sending compressed bytes to a file. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:52:43.307

似乎，您没有关闭文件（输出），因此它保留在此操作的线程中，这限制了它被删除。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T10:54:03.450

也许您应该尝试[使用 ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来找出打开文件的确切进程

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T11:01:13.880

对于 IO 功能，我建议使用社区已经提供的某种 jar。例如common-io.xx.jar、spring-core.jar

```
 Eg, org.apache.commons.io.FileUtils;
        FileUtils.copyDirectory(from, to);
        FileUtils.deleteDirectory(childDir);
        FileUtils.forceDelete(springConfigDir);
        FileUtils.writeByteArrayToFile(file, data);

        org.springframework.util.FileSystemUtils;
        FileSystemUtils.copyRecursively(from, to);
        FileSystemUtils.deleteRecursively(dir); 
```

祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T11:02:45.803

每当您打开文件处理程序时，都应该关闭它。在您想要长时间运行的 Java 应用程序中，强烈建议您在使用完所有未使用的文件处理程序后立即关闭它们。

常见文件处理程序的示例是`FileOutputStream`和`FileInputstream`。这是一个很好的例子，说明如何打开和关闭`FileOutputStream`

```
FileOutputStream fos = null;
try {
    fos = new FileOutputStream(tempName);
    // do something
} catch (IOException ex) {
    // deal with exceptions
} finally {
    // close if fos is not null
    if (fos != null) {
        fos.close();
    }
} 
```

你不应该这样做：

```
doc.write( new FileOutputStream(temp)); 
```

因为如果没有引用文件处理程序，您将永远无法关闭它。

# mysql - 比较日期并在 MySQL 中创建缺失的记录

> ID：12457693
> 
> 赞同：0
> 
> 时间：2012-09-17T10:46:49.313
> 
> 标签：mysql, ruby-on-rails

我在为以下场景寻找解决方案时遇到了问题。对于具有以下 start_date 和 end_date 的产品，我有 3 条记录。

```
Case:1
record1: 03-10-2012 and 30-10-2012
record2: 03-10-2012 and 10-10-2012
record3: 11-10-2012 and 20-10-2012

Case:2
record1: 03-10-2012 and 30-10-2012
record2: 11-10-2012 and 20-10-2012
record3: 21-10-2012 and 30-10-2012

Case:3
record1: 03-10-2012 and 30-10-2012
record2: 03-10-2012 and 10-10-2012
record3: 21-10-2012 and 30-10-2012 
```

在上述所有情况下，我需要创建缺少日期的第 4 条记录（例如，在 case1 中，我需要从 21 日到 30 日的记录）并且想删除如果我有记录时不再需要的记录 1缺少日期。

有什么方法可以一次性完成所有事情吗？我曾尝试使用 case 命令执行此操作，但没有运气。

这就是我写的。

```
select MIN(end_date) AS min_end_date, MIN(start_date) AS min_start_date, 
    CASE WHEN MIN(start_date) <= MIN(end_date) AND MIN(start_date) > DATE '#{start_date}' THEN DATE_SUB(MIN(start_date), INTERVAL 1 day)
        ELSE MIN(end_date)
        END AS min_date 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:19:46.163

好吧...您可以执行以下操作：

```
remainders=(record1.start_date..record1.end_date).to_a - (record2.start_date..record2.end_date).to_a - (record3.start_date..record3.end_date).to_a 
```

之后，您可以进行安全检查——或者，如果你相信你的数据，就让它去吧——

```
if (remainders.first..remainders.last).to_a == remainders
  record4.start_date = remainders.first
  record4.end_date = remainders.last
  record1.destroy
else
  raise
end 
```

# java - Java 比较器和可比较

> ID：12457695
> 
> 赞同：4
> 
> 时间：2012-09-17T10:47:08.850
> 
> 标签：java

我在java中只有类文件，没有源代码，现在我必须对它们进行排序，我应该使用Comparator还是Comparable？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:56:19.563

`Comparable`是由知道如何将自己与该类的另一个实例进行比较的类实现的接口。

`Comparator`是用于比较不同类的两个实例的接口。

如果你有一`Person`堂课，例如

```
public class Person implements Comparable<Person> {
  private final String firstName;
  private final String lastName;

  ...

  public int compareTo(Person that) {
      int rv = lastName.compareTo(that.lastName);
      if (rv == 0) 
        rv = firstName.compareTo(that.firstName);
      return rv;
  }
} 
```

这是一个按姓氏然后按名字的*自然排序顺序*，即斯蒂芬琼斯排在约翰史密斯之前。

如果您想按名字和姓氏对这些对象进行排序，这样 John Smith 排在 Stephen Jones 之前，您可以使用 Comparator

```
public class PersonComparator implements Comparator<Person> {
  public int compare(Person p1, Person p2) {
      int rv = p1.getFirstName().compareTo(p2.getFirstName());
      if (rv == 0) 
        rv = p1.getLastName().compareTo(p2.getLastName());
      return rv;
  }
} 
```

您使用哪个取决于您对类和实例的控制。

例如，如果您有一个未实现的类`Comparable`，但您可以将其子类化以实现接口，并且您确定您将是唯一创建实例的人，那么您可以使用`Comparable`.

但是，总的来说，`Comparator`它更灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:01:01.953

如果可能，您可以扩展该类并编写一个新类，该类实现 Comparable，以便您可以实现 compareTo()。在其他情况下，您可以使用 Comparator as given ，

```
class MyComparator implements Comparator<MyClass>{

    @Override
    public int compare(MyClass o1, MyClass o2) {
        return o1.getType().compareTo(o2.getType());
    }
} 
```

使用比较器可为您提供更多所需的自定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:07:24.870

如果您无权访问源文件，请使用`Comparator`对它们进行排序。

```
 class MyComparator implements Comparator<MyClass>{

@Override
public int compare(MyClass o1, MyClass o2) {
    return o1.getType().compareTo(o2.getType());
}
}
// where getType is the getter method of the field on which you want to sort. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-13T20:27:24.097

# 简单的答案

去**比较**器。

# 两个概念的总结

（摘自[http://www.digizol.com/2008/07/java-sorting-comparator-vs-comparable.html](http://www.digizol.com/2008/07/java-sorting-comparator-vs-comparable.html)）

**可比**

一个可比较的对象能够将自己与另一个对象进行比较。类本身必须实现 java.lang.Comparable 接口才能比较其实例。

**比较器**

比较器对象能够比较两个不同的对象。该类不是比较它的实例，而是比较其他一些类的实例。此比较器类必须实现 java.util.Comparator 接口。

# 考虑您现有的课程

您当前的课程已经实施。即使它已经有一个 Comparable 实现，您也不知道该比较是如何实现的；因此你无法预测你的排序。当您不修改要排序的类的源时，唯一的选择是使用 Comparator。

# sql - 如何优化嵌套选择？

> ID：12457696
> 
> 赞同：0
> 
> 时间：2012-09-17T10:47:09.787
> 
> 标签：sql, openedge

我的用例是检索客户的发票和每张发票的格式代码，该代码是通过连接到一个`customer_list`表找到的，该表连接到一个通用代码表以计算出格式代码。

下面是我的查询的简化版本，它工作正常，但子查询将返回大约 5k 行，我想知道如何优化这使得子查询不包含那么多行。

```
select i.invoice_number,
       f.format_code
  from invoices i
  left join (
    select gc.code_1 as format_code,
           ls.account
      from gen_codes gc,
           customer_list ls
     where gc.code_name = 'invoice-format'
       and gc.code_1 <> ''
       and ls.list_type = gc.code_value
  ) f on account = i.account
      or account = i.billing_account
where i.account = :accountNumber 
```

**注意**：并非所有发票都有格式代码，这很好，也是我执行左连接的原因。

**更新**：不使用内部选择的类似查询将具有以下形式：

```
select i.invoice_number,
       f.code_1 as format_code
  from invoices i
  left join customer_list ls on
    (account = i.account or account = i.billing_account) and ls.list_type in (
           select code_value
             from gen_codes
            where code_name = 'invoice-format'
              and code_1 <> ''
        )
  left join gen_codes f on code_value = ls.list_type
                       and code_name = 'invoice-format'
                       and code_1 <> '' 
```

我有一种感觉，后一个版本可能更有效，因为`gen_codes`匹配查询中只有两打记录，而`customer_list`第一个版本中包含约 50 万条记录，约 5k 匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:12:07.637

我会这样写：

获取与帐户或计费帐户相对应的所有发票（使用 JOIN 和 ON 子句），并仅获取与匹配帐户的 list_types 相关联的那些 gen_codes（使用 LEFT JOIN），其 code_name 为 'invoice-format' 而 gc.code_1 不是空的。

```
SELECT 
    i.invoice_number,
    gc.code_1 as format_code
FROM 
    invoices i
    JOIN customer_list ls
    ON 
        (i.billing_account = ls.account OR i.account = ls.account) AND 
        i.account = :accountNumber
    LEFT JOIN gen_codes gc
    ON 
        ls.list_type = gc.code_value AND 
        gc.code_name = 'invoice-format' AND 
        gc.code_1 != '' 
```

与您问题中的子查询相比，这将修剪与预先输入的 accountNumber 不匹配的 customer_list 记录。

# iphone - 跳过 ViewController 并在 UITabbar 中打开 UITableViewController

> ID：12457698
> 
> 赞同：0
> 
> 时间：2012-09-17T10:47:15.853
> 
> 标签：iphone, ipad, uitabbarcontroller, uitableview

之前有人问过我一个解决方案，我得到了它，如这里的链接[所示](https://stackoverflow.com/questions/12446001/open-uitableviewcontroller-as-an-item-of-uitabbarcontroller/12446140#comment16736006_12446140)

现在，我的问题是：

如果我想直接从其他类打开这个 UITableviewController 并希望它出现在标签栏中但想先跳过查看 ViewController，我该怎么做？希望有人明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:20:40.307

为此，您只需将 tableViewController 添加为 childViewController，方法是替换上面提到的视图控制器所做的...

# android - 在谷歌地图中手动绘制路径

> ID：12457700
> 
> 赞同：2
> 
> 时间：2012-09-17T10:47:21.470
> 
> 标签：android, google-maps

我目前正在做一个包含谷歌地图的安卓应用程序。在这张地图中，我想在两点之间手动绘制一条路径。一个点是我当前的点，另一个是用户标记的点（使用overlay类中的draw方法绘制，代码如下）。请帮助我。

```
 protected class Touchy extends Overlay {

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        Paint paint = new Paint();

        super.draw(canvas, mapView, shadow);
        // Converts lat/lng-Point to OUR coordinates on the screen.
        Point myScreenCoords = new Point();
        mapView.getProjection().toPixels(geoPoint, myScreenCoords);

        paint.setStrokeWidth(1);
        paint.setARGB(255, 255, 255, 255);
        paint.setStyle(Paint.Style.STROKE);

        Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                R.drawable.source);

        canvas.drawBitmap(bmp, myScreenCoords.x, myScreenCoords.y, paint);

        for(int i=0;i<size;i++)
        {
            mapView.getProjection().toPixels(GP[i], myScreenCoords);
            canvas.drawBitmap(bmp,myScreenCoords.x, myScreenCoords.y,                        paint);
        }
        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent e, final MapView m) {
        // TODO Auto-generated method stub

        System.out.println("Hiiiiiiiiiiiiiiiiiiii");

        if (e.getAction() == MotionEvent.ACTION_DOWN) {
            start = e.getEventTime();
            int x = (int) e.getX();
            int y = (int) e.getY();
            touchedPoint = m.getProjection().fromPixels(x, y);
            System.out.println(touchedPoint);
        }

        if (e.getAction() == MotionEvent.ACTION_UP) {
            stop = e.getEventTime();
        }
        if (stop - start > 1500) {

            AlertDialog alert = new AlertDialog.Builder(
                    LocationTrackerActivity.this).create();
            alert.setTitle("Location Tracker");
            alert.setMessage("Enter your Option");

            alert.setButton("Mark", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    if (FlagPin == 0) {

                        OverlayItem overlayItem = new OverlayItem(
                                touchedPoint, "wazzup", "xd");
                        PinPoint custom = new PinPoint(d,
                                LocationTrackerActivity.this);

                        custom.insertPinpoint(overlayItem);
                        overlayList.add(custom);
                        FlagPin = 1;

                        destLat = touchedPoint.getLatitudeE6() / 1E6;
                        desLong = touchedPoint.getLongitudeE6() / 1E6;

                    }

                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:51:56.757

如果您知道两个地理点，请点击此链接在这些点之间绘制一条路径。

[http://lokeshatandroid.blogspot.in/2012/09/draw-path-between-two-geo-points.html](http://lokeshatandroid.blogspot.in/2012/09/draw-path-between-two-geo-points.html)

您已经知道当前位置 GeoPoint 并找到用户指向标记的 lat 和 long 值，然后点击上面的链接。

# clojure - La Clojure Repl 为 dll 设置 java.library.path

> ID：12457701
> 
> 赞同：3
> 
> 时间：2012-09-17T10:47:24.643
> 
> 标签：clojure, intellij-idea, la-clojure

想将 La Clojure Repl 与 jacob 一起使用。所以我需要设置

```
-Djava.library.path=D:/opensource/jacob-1.17-M2 
```

找不到这个 REPL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:40:20.367

转到文件 -> 项目结构 -> 模块 -> 添加方面“Clojure”。您现在应该能够编辑 REPL 的“JVM Arguments”

# iphone - 带有 UITableview 的搜索栏控制器

> ID：12457703
> 
> 赞同：0
> 
> 时间：2012-09-17T10:47:47.743
> 
> 标签：iphone, uitableview, uisearchbardisplaycontrol

我正在使用带有 . 的搜索栏控制器`UITableview`。搜索结果正确出现。我已将 row 设置`height`为`separator` `style`none 和`backgroundColor` `clearColor`and `tranparent`。但问题是结果表视图没有所有这些样式。怎么办？如何应用表视图搜索结果表格视图的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:21:30.783

```
self.searchDisplayController.searchResultsTableView.backgroundColor = [UIColor clearColor]; 
```

i hope this is the way, you are accessing the tableView. Let me know if it worked.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:17:53.363

除了向 tableview(datasource) 提供输入之外，搜索栏控制器没有任何直接依赖关系

我认为（可能是）表视图的内存已更改（内存：再次分配）

# c# - 可能与 .Net 和 Silverlight 程序集的文件名冲突（TFS 部署）

> ID：12457705
> 
> 赞同：0
> 
> 时间：2012-09-17T10:47:56.400
> 
> 标签：c#, .net, deployment, tfs

以下问题：我们在 TFS 2012 中使用门控构建。一旦 TFS 开始构建，所有内容都会被复制到一个文件夹中。

*   我们的实际应用程序是 Silverlight 应用程序。
*   我们的单元测试虽然放在 .Net 项目中

我们应用程序的一部分使用了第 3 方控件。它使用 Silverlight 程序集，该程序集授予特定功能。.Net 程序集提供了相同的功能，我们在并行项目中使用该程序集进行服务器端内容和单元测试。它实际上授予相同的功能（除了 UI 的东西）。这两个程序集都用“copy local = true”引用。

**如果我在本地**构建解决方案（其中包含不同项目中引用的两个程序集），一切正常。但是一旦我尝试通过 TFS 部署它，构建就会因为**FileIOException**或其他原因而失败。它告诉我第 3 方大会不是正确的文件。

我认为发生了这种情况，因为当 TFS 开始构建时，**所有内容**都会被复制到一个文件夹中。**两者**：.Net 程序集和 Silverlight 程序集。它们都具有**相同**的文件名。我认为这就是搞砸 TFS 构建的原因。

你对这个问题有什么建议吗？要求我们仍然拥有包含所有项目的“超级解决方案”。因此，拆分 .Net 和 Silverlight 项目并不是一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:56:23.013

这可能是由于当您通过 TFS 或某些非 IDE 构建器构建时，您在某处指定了输出目录，因此它只是在一个地方整理所有程序集，从而导致问题。

您可以将后缀附加到您的 silverlight 项目程序集，这只会使程序集输出为“YourAssembly.silverlight.dll”而不是“YourAssembly.dll”，它不会在内部与命名空间混淆，尽管这可能会让其他人感到困惑不熟悉您的系统的人，通常您只需使用命名空间将它们分开，这样您的 silverlight 框架将位于 *.silverlight 命名空间内，该命名空间与您的项目名称配对，表明命名空间差异将解决您的问题。

# android - Android上的PhoneGap-localStorage不起作用

> ID：12457706
> 
> 赞同：0
> 
> 时间：2012-09-17T10:48:04.433
> 
> 标签：android, cordova, local-storage

我有一个基于 PhoneGap 2.0 的移动应用程序，它使用 LocalStorage。我的 Android 2.3.3 设备上的 localstorage 似乎像 sessionStorage 一样工作，即信息是持久的，只能在应用程序关闭之前使用。当我重新启动应用程序时，该信息消失了。

我访问/存储这样的信息：

```
function onDeviceReady() 
{
    if(typeof(Storage)!=="undefined")
    {
        if(localStorage.getItem("test") != null)
        {
            alert(localStorage.getItem("test"));
        }
        ...
        localStorage.setItem("test", "test Value");
    }
} 
```

部署到 WP7 手机（使用 window.localStorage）时，同样的解决方案也能正常工作。我试过有无“窗口”。字首。正如某些线程中所建议的那样，我还尝试在显示之前将值从 localStorage 分配给全局变量，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:35:14.440

这适用于 Phonegap 2.1 候选版本、运行 4.1.1 的 Nexus 7 和运行 2.3.3 的模拟器。你在什么设备上测试？

这可能是 2.0 中已修复的错误，尽管我在错误跟踪器中没有看到类似的内容。用 2.1.0 试试看会发生什么？

# android - 如何衡量 Android 移动 Web 应用程序的性能

> ID：12457709
> 
> 赞同：0
> 
> 时间：2012-09-17T10:48:22.640
> 
> 标签：android, performance, mobile, cordova

我是 android 新手，我使用 PhoneGap 使移动 Web 应用程序看起来像原生 Android 应用程序。所以通常像这样的工具

*   Pagespeed [https://developers.google.com/speed/pagespeed/](https://developers.google.com/speed/pagespeed/)
*   [https://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

可用于检查 Web 应用程序的性能。因此，我想在使用 PhoneGap 包装我的 Web 应用程序后检查性能。我正在寻找一种工具来衡量 Android 移动 Web 应用程序的性能，并像上面的工具一样给我相关的图表。我可以用来做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:51:44.230

如您所知，phonegap 是一个基于 html 的框架，所以是的，您可以使用所有这些工具测试您的 htm-javascript 代码性能，但您无法使用它们来衡量您的应用程序性能，因为 phonegap 性能取决于许多因素（使用插件，...）但是根据我使用较少 css 的经验，将极大地提高您的性能。

# javascript - 使用javascript验证html中的输入文本字段

> ID：12457710
> 
> 赞同：8
> 
> 时间：2012-09-17T10:48:22.963
> 
> 标签：javascript, html, validation, form-submit

```
<script type='text/javascript'>   
function required()  
{
    var empt = document.forms["form1"]["Name"].value; 
    if (empt == "")  
    {  
        alert("Please input a Value");  
        return false;  
    }  
}  
</script> 

<form name="form1" method="" action="">
<input type="text" name="name" value="Name"/><br />
<input type="text" name="address line1" value="Address Line 1"/><br /> 
```

我有多个输入文本字段，每个字段都有其默认值。在我提交表格之前，我必须验证是否所有字段都已填写。到目前为止，我得到了 javascript 来检查 null，因为不同的文本框有不同的默认值。如何编写 javascript 来验证用户是否输入了数据？我的意思是，脚本必须识别输入数据不是默认值和空值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T15:15:52.343

如果您不使用 jQuery，那么我只需编写一个验证方法，您可以在提交表单时触发该方法。该方法可以验证文本字段以确保它们不是空的或默认值。该方法将返回一个布尔值，如果它为 false，您可以触发警报并分配类以突出显示未通过验证的字段。

HTML：

```
<form name="form1" method="" action="" onsubmit="return validateForm(this)">
<input type="text" name="name" value="Name"/><br />
<input type="text" name="addressLine01" value="Address Line 1"/><br />
<input type="submit"/>
</form> 
```

JavaScript：

```
function validateForm(form) {

    var nameField = form.name;
    var addressLine01 = form.addressLine01;

    if (isNotEmpty(nameField)) {
        if(isNotEmpty(addressLine01)) {
            return true;
        {
    {
    return false;
}

function isNotEmpty(field) {

    var fieldData = field.value;

    if (fieldData.length == 0 || fieldData == "" || fieldData == fieldData) {

        field.className = "FieldError"; //Classs to highlight error
        alert("Please correct the errors in order to continue.");
        return false;
    } else {

        field.className = "FieldOk"; //Resets field back to default
        return true; //Submits form
    }
} 
```

validateForm 方法分配您要验证的元素，然后在这种情况下调用 isNotEmpty 方法来验证该字段是否为空或未更改默认值。它不断调用 inNotEmpty 方法，直到它返回一个值 true 或者如果该字段的条件失败，它将返回 false。

试一试，让我知道它是否有帮助或您有任何问题。当然，您可以编写额外的自定义方法来仅验证数字、电子邮件地址、有效 URL 等。

如果您完全使用 jQuery，我会考虑试用 jQuery Validation 插件。我在最近的几个项目中一直在使用它，它非常好。有机会就去看看。[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-05T11:43:29.487

```
<form name="myForm" id="myForm" method="post" onsubmit="return validateForm();">
    First Name: <input type="text" id="name" /> <br />
    <span id="nameErrMsg" class="error"></span> <br />
    <!-- ... all your other stuff ... -->
</form>
  <p>
    1.word should be atleast 5 letter<br>
    2.No space should be encountered<br>
    3.No numbers and special characters allowed<br>
    4.letters can be repeated upto 3(eg: aa is allowed aaa is not allowed)
  </p>
  <button id="validateTestButton" value="Validate now" onclick="validateForm();">Validate now</button>

validateForm = function () {
    return checkName();
}

function checkName() {
    var x = document.myForm;
    var input = x.name.value;
    var errMsgHolder = document.getElementById('nameErrMsg');
    if (input.length < 5) {
        errMsgHolder.innerHTML =
            'Please enter a name with at least 5 letters';
        return false;
    } else if (!(/^\S{3,}$/.test(input))) {
        errMsgHolder.innerHTML =
            'Name cannot contain whitespace';
        return false;
    }else if(!(/^[a-zA-Z]+$/.test(input)))
    {
        errMsgHolder.innerHTML=
                'Only alphabets allowed'
    }
    else if(!(/^(?:(\w)(?!\1\1))+$/.test(input)))
    {
        errMsgHolder.innerHTML=
                'per 3 alphabets allowed'
    }
    else {
        errMsgHolder.innerHTML = '';
        return undefined;
    }       

}

.error {
color: #E00000;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T07:17:54.290

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <title>Validation</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script type="text/javascript">
            var tags = document.getElementsByTagName("input");
            var radiotags = document.getElementsByName("gender");
            var compareValidator = ['compare'];
            var formtag = document.getElementsByTagName("form");
            function validation(){
                for(var i=0;i<tags.length;i++){
                    var tagid = tags[i].id;
                    var tagval = tags[i].value;
                    var tagtit = tags[i].title;
                    var tagclass = tags[i].className;
                    //Validation for Textbox Start
                    if(tags[i].type == "text"){
                        if(tagval == "" || tagval == null){
                            var lbl = $(tags[i]).prev().text();
                            lbl = lbl.replace(/ : /g,'')
                            //alert("Please Enter "+lbl);
                            $(".span"+tagid).remove();
                            $("#"+tagid).after("<span style='color:red;' class='span"+tagid+"'>Please Enter "+lbl+"</span>");
                            $("#"+tagid).focus();
                            //return false;
                        }
                        else if(tagval != "" || tagval != null){
                            $(".span"+tagid).remove();
                        }
                        //Validation for compare text in two text boxes Start
                        //put two tags with same class name and put class name in compareValidator.
                        for(var j=0;j<compareValidator.length;j++){
                            if((tagval != "") && (tagclass.indexOf(compareValidator[j]) != -1)){
                                if(($('.'+compareValidator[j]).first().val()) != ($('.'+compareValidator[j]).last().val())){
                                    $("."+compareValidator[j]+":last").after("<span style='color:red;' class='span"+tagid+"'>Invalid Text</span>");
                                    $("span").prev("span").remove();
                                    $("."+compareValidator[j]+":last").focus();
                                    //return false;
                                }
                            }
                        }
                        //Validation for compare text in two text boxes End
                        //Validation for Email Start
                        if((tagval != "") && (tagclass.indexOf('email') != -1)){
                        //enter class = email where you want to use email validator
                            var reg = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
                            if (reg.test(tagval)){
                                $(".span"+tagid).remove();
                                return true; 
                            }
                            else{
                                $(".span"+tagid).remove();
                                $("#"+tagid).after("<span style='color:red;' class='span"+tagid+"'>Email is Invalid</span>");
                                $("#"+tagid).focus();
                                return false;
                            }
                        }
                        //Validation for Email End
                    }
                    //Validation for Textbox End
                    //Validation for Radio Start
                    else if(tags[i].type == "radio"){
                    //enter class = gender where you want to use gender validator
                        if((radiotags[0].checked == false) && (radiotags[1].checked == false)){
                            $(".span"+tagid).remove();
                            //$("#"+tagid").after("<span style='color:red;' class='span"+tagid+"'>Please Select Your Gender </span>");
                            $(".gender:last").next().after("<span style='color:red;' class='span"+tagid+"'> Please Select Your Gender</span>");
                            $("#"+tagid).focus();
                            i += 1;
                        }
                        else{
                            $(".span"+tagid).remove();
                        }
                    }
                    //Validation for Radio End              
                    else{

                    }
                }
                //return false;
            }
            function Validate(){
               if(!validation()){
                    return false;
                }
                return true;
            }
            function onloadevents(){
                tags[tags.length -1].onclick = function(){
                    //return Validate();
                }
                for(var j=0;j<formtag.length;j++){
                    formtag[j].onsubmit = function(){
                        return Validate();
                    }
                }
                for(var i=0;i<tags.length;i++){
                    var tagid = tags[i].id;
                    var tagval = tags[i].value;
                    var tagtit = tags[i].title;
                    var tagclass = tags[i].className;
                    if((tags[i].type == "text") && (tagclass.indexOf('numeric') != -1)){
                        //enter class = numeric where you want to use numeric validator
                        document.getElementById(tagid).onkeypress = function(){
                            numeric(event);
                        }
                    }
                }
            }
            function numeric(event){
                var KeyBoardCode = (event.which) ? event.which : event.keyCode; 
                if (KeyBoardCode > 31 && (KeyBoardCode < 48 || KeyBoardCode > 57)){
                    event.preventDefault();
                    $(".spannum").remove();
                    //$(".numeric").after("<span class='spannum'>Numeric Keys Please</span>");
                    //$(".numeric").focus();
                    return false;
                }
                    $(".spannum").remove();
                    return true;
            }
            if (document.addEventListener) {
              document.addEventListener("DOMContentLoaded", onloadevents, false);
            }
            //window.onload = onloadevents;
        </script>
    </head>
    <body>
        <form method="post">
            <label for="fname">Test 1 : </label><input type="text" title="Test 1" id="fname" class="form1"><br>
            <label for="fname1">Test 2 : </label><input type="text" title="Test 2" id="fname1" class="form1 compare"><br>
            <label for="fname2">Test 3 : </label><input type="text" title="Test 3" id="fname2" class="form1 compare"><br>
            <label for="gender">Gender : </label>
            <input type="radio" title="Male" id="fname3" class="gender" name="gender" value="Male"><label for="gender">Male</label>
            <input type="radio" title="Female" id="fname4" class="gender" name="gender" value="Female"><label for="gender">Female</label><br>
            <label for="fname5">Mobile : </label><input type="text" title="Mobile" id="fname5" class="numeric"><br>
            <label for="fname6">Email : </label><input type="text" title="Email" id="fname6" class="email"><br>
            <input type="submit" id="sub" value="Submit">
        </form>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T23:18:02.543

```
function hasValue( val ) { // Return true if text input is valid/ not-empty
    return val.replace(/\s+/, '').length; // boolean
} 
```

对于多个元素，您可以在输入元素内部传递它们的值，将它们的值循环到该函数参数中。

如果用户插入了一个或多个空格，由于正则表达式`s+`，该函数将返回 false。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T10:11:56.973

对于灵活性和其他您可能想要验证的地方。您可以使用以下功能。

```
`function validateOnlyTextField(element) {
    var str = element.value;
    if(!(/^[a-zA-Z, ]+$/.test(str))){
        // console.log('String contain number characters');
        str = str.substr(0,  str.length -1);
        element.value = str;
    }
}` 
```

然后在您的 html 部分使用以下事件。

`<input type="text" id="names" onkeyup="validateOnlyTextField(this)" />`

您始终可以重用该功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-17T10:58:48.303

```
<pre><form name="myform" action="saveNew" method="post" enctype="multipart/form-data">
    <input type="text"   id="name"   name="name" /> 
<input type="submit"/>
</form></pre>

<script language="JavaScript" type="text/javascript">
 var frmvalidator  = new Validator("myform");
    frmvalidator.EnableFocusOnError(false); 
    frmvalidator.EnableMsgsTogether(); 
    frmvalidator.addValidation("name","req","Plese Enter Name"); 

</script>

before using above code you have to add the gen_validatorv31.js js file 
```

# c# - 我们可以在 C# 中动态添加删除命名空间引用（usings）吗

> ID：12457711
> 
> 赞同：0
> 
> 时间：2012-09-17T10:48:25.200
> 
> 标签：c#, asp.net, wcf, web-services

我需要根据运行时评估的特定条件调用 WCF 服务 1 或 WCF 服务 2。这两种服务相似，但托管在不同的服务器上。

我添加了两个服务引用，NS1 和 NS2 指向不同的 url。当前代码已经使用 NS1。考虑到这个 NS1 实现已经在很多地方完成。重构代码以动态选择必须调用的服务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:59:44.217

通常，直接针对 svcutil.exe 生成的代理进行编程被认为是一种不好的做法。

最好的方法是将它包装在您自己的类中，并在每次需要服务时引用该类。这也将允许您实现更高级的业务逻辑，例如路由（在您的情况下）和其他横切关注点。例如：您现在可以从应用程序中抽象出您用于连接到服务的策略，即服务引用或 ChannelFactory。您可以轻松地在不同程序集之间共享服务，而不会产生歧义。

您是说您有很多直接针对 NS1 编写的代码。磨牙并包起来。这是很多肮脏的工作，但风险非常低。

说了上面的话，我想知道需求本身，服务在另一台服务器上调用它自己的另一个实例（如果我没听错的话）。这闻起来很有趣，您要解决的问题是什么？

# php - 结帐在 magento1.7 中不起作用

> ID：12457712
> 
> 赞同：0
> 
> 时间：2012-09-17T10:48:25.520
> 
> 标签：php, magento, checkout, authorize.net, magento-1.7

我在`Magento 1.7`. 结帐不适用于一家商店。`Billing Information`单击调用该函数的块内的继续按钮后，什么也没有发生`onclick="billing.save()"`。我用萤火虫检查了所有块都正确。我认为问题出在功能`billing.save()`上。我在哪里可以找到这个功能。

***编辑***

我已经`transport.responseText`在`billing.save()`一家商店检查了我的回复，我收到了这样的回复

```
{"goto_section":"shipping_method","update_section":{"name":"shipping-method","html":"<dl class=\"sp-methods\">\r\n<p>We are shipping daily until 12.19.2011 although most orders will arrive for the Holidays, we can not guarentee 12.25.2011 delivery (for orders placed after 12.14.2011). <span style=\"color:red;\">We begin shipping again in January - Order Honeybells Now!<\/span><\/p>\r\n            <dt>Flat Shipping<\/dt>\r\n        <dd>\r\n            <ul>\r\n                            <li>\r\n                                                                   <span class=\"no-display\"><input name=\"shipping_method\" type=\"radio\" value=\"flatship_flatship\" id=\"s_method_flatship_flatship\" checked=\"checked\" \/><\/span>\r\n                                                <label for=\"s_method_flatship_flatship\">Standard US                                                                        <span class=\"price\">$12.00<\/span>                                                <\/label>\r\n                                   <\/li>\r\n                        <\/ul>\r\n        <\/dd>\r\n    <\/dl>\r\n"},"allow_sections":["shipping"],"duplicateBillingInfo":"true"} 
```

对于无法正常工作的商店，它会像这样到来

```
<meta name="google-site-verification" content="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
{"goto_section":"shipping_method","update_section":{"name":"shipping-method","html":"<dl class=\"sp-methods\">\r\n<p>We are shipping daily until 12.19.2011 although most orders will arrive for the Holidays, we can not guarentee 12.25.2011 delivery (for orders placed after 12.14.2011). <span style=\"color:red;\">We begin shipping again in January - Order Honeybells Now!<\/span><\/p>\r\n            <dt>Flat Shipping<\/dt>\r\n        <dd>\r\n            <ul>\r\n                            <li>\r\n                                                                   <span class=\"no-display\"><input name=\"shipping_method\" type=\"radio\" value=\"flatship_flatship\" id=\"s_method_flatship_flatship\" checked=\"checked\" \/><\/span>\r\n                                                <label for=\"s_method_flatship_flatship\">Standard US                                                                        <span class=\"price\">$43.80<\/span>                                                <\/label>\r\n                                   <\/li>\r\n                        <\/ul>\r\n        <\/dd>\r\n    <\/dl>\r\n"},"allow_sections":["shipping"],"duplicateBillingInfo":"true"} 
```

我不知道这个元标记是从哪里来的，当我`response.update_section.name`在旁边 提醒`setStepResponse: function(response){`它的时候是未定义的......

**编辑 2**

现在元标记问题已经解决了。他们在子域文件夹的 index.php 中添加了元标记。 **现在的问题是当我下订单时它显示**

> 网关错误：(TESTMODE) 商户登录ID或密码无效或账户未激活。

任何人有任何想法请帮助我。它在另一家商店工作正常。我正在使用`Authorize.net`付款并启用`Test Mode`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:43:51.720

我有一个非常相似的问题

我发现在 Magento 1.7.0.2 Onepage 结帐时，当我在填写账单详细信息后单击继续按钮时，该按钮消失了，没有其他任何反应。

我试过的：首先调试JS给我以下错误

```
Uncaught TypeError: Cannot set property 'disabled' of undefined opcheckout.js:81
Checkout._disableEnableAll opcheckout.js:81
Checkout.setLoadWaiting opcheckout.js:94
Billing.save opcheckout.js:307
onclick 
```

以及Chrome中的以下错误

```
Uncaught TypeError: Cannot read property 'textContent' of null chrome-extension://dhkplhfnhceodhffomolpfigojocbpcb/cs.js:239
babyCS.getSelectedText chrome-extension://dhkplhfnhceodhffomolpfigojocbpcb/cs.js:239
babyCS.saveSelection chrome-extension://dhkplhfnhceodhffomolpfigojocbpcb/cs.js:209
babyCS.click 
```

我还将服务器回滚到我们最后一个订单之前拍摄的图像，即使我们知道该代码有效（因为使用该代码下订单）当我们运行它时我们现在遇到了同样的问题。

所以我们认为这可能是由于配置设置的变化，而不是代码问题。我们将免费送货（我们唯一的送货选项）的“送货方式”配置从“指定国家/地区”更改为“所有允许的国家/地区”，它解决了这个问题……大约 5 分钟！我们在几个地方对其进行了测试，并且效果很好，所以我们重新开启了折扣，这一切又消失了。

为了达到这一步，我可以在 Fiddler 中看到调用

```
/checkout/onepage/progress/?toStep=billing 
```

但是当我单击继续按钮进入下一步时，它似乎没有调用`/?toStep=shipping`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:39:29.373

这个函数可以在

```
skin/frontend/your_package/your_theme/js/optcheckout.js 
```

或者，如果它不在 /your_package/your_theme/ 和 /your_package/default/ 中，它在 /base/default/

在 Magento 1.7 中应该在文件的第 302 行（如果没有修改）。

但我认为问题不存在。您是否在 Firebug/Developer Tools 中检查了 saveBilling 的响应？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:36:24.317

我认为错误可以自我解释？您是否联系了 Authorize.net 并检查了您的测试帐户是否有效？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T20:47:37.017

关于编辑2：

我相信问题出在您的帐户上。[您可以通过在https://developer.authorize.net/testaccount/](https://test.authorize.net/)下创建另一个测试帐户来检查它您可以在[https://test.authorize.net/](https://developer.authorize.net/testaccount/) 上访问此帐户 尝试在 Magento 中使用测试帐户，看看是否有任何问题。

另外，请记住在设置 Authorize.net 处理真实交易时使用[https://test.authorize.net/gateway/transact.dll](https://test.authorize.net/gateway/transact.dll)网关地址进行测试和[https://secure.authorize.net/gateway/transact.dll 。](https://secure.authorize.net/gateway/transact.dll)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:34:39.407

我猜你在IE9中遇到了问题？结帐存在一个已知问题，仅影响某些 IE 版本。你可以试试 Chrome 或 FF 看看问题是否仍然存在？

如果这确实是同一个问题，这可以通过强制 IE 进入 IE8 模式来解决

您可以尝试将其添加到您的 htaccess 中：

```
BrowserMatch MSIE best-standards-support
Header set X-UA-Compatible IE=8 env=best-standards-support 
```

# android - 如何确定各种密度的图像尺寸？

> ID：12457720
> 
> 赞同：0
> 
> 时间：2012-09-17T10:48:43.273
> 
> 标签：android

我正在为 Galaxy nexus 720P 手机开发。我开发了一个准确的 720P 背景图像。但是图像被拉伸了。图像的高度和宽度应该是多少才不会在手机上拉伸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:37:24.863

基本上有3种密度可用 `120 dpi (1 dp = 0.75 px)` `160 dpi (1 dp = 1 px)` `240 dpi (1 dp = 1.5 px)`

px - 像素 dp - 每英寸点数

检查目标设备的 dpi 并根据您要覆盖的区域创建图像。

例如：如果设备是中等密度（160）并且您想要覆盖 720 dp 创建 720 px 图像，如果设备是高密度（240）并且您想要覆盖 720 dp 1080 px。

这将在为具有其他配置的设备创建图像时为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:57:44.927

这取决于布局属性。如果图像视图高度大于您传递给图像视图的图像，则图像将被拉伸。将 imageview 布局属性 layout_height="wrap_content" 设置为不拉伸图像，否则会根据您的手机高度调整图像大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:59:20.890

如果您是专门为 Galaxy nexus 720p 开发的，那么您的图像应具有以下尺寸：1280 x 720

但你不能指望它在所有设备上都能正确显示......

看看这个：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:04:03.870

试试 draw9patch，它是 Google 提供的用于调整图像大小的工具：D

# iphone - 可达性 startNotifier - 是否需要电话资源

> ID：12457721
> 
> 赞同：0
> 
> 时间：2012-09-17T10:48:44.153
> 
> 标签：iphone, objective-c, ios, reachability

我有时必须检查互联网连接并为此使用“可达性”。

使用“可达性”手动检查互联网连接会更好，例如：

```
BOOL status = ([[Reachability reachabilityForInternetConnection] currentReachabilityStatus] != NotReachable); 
```

或使用可达性通知和

```
//Start listening for reachability notifications on the current run loop
- (BOOL) startNotifier; 
```

通知是否需要一些电话资源，例如电池等，如果我不使用“stopNotifier”，我会遇到一些问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:52:52.740

IMO - 使用通知是要走的路。Reachability 类在用最少的资源跟踪连接方面做得很好。如果您绝对必须有连接才能做某事，请使用通知。另一个好处是您可以使用通知来做其他事情（将数据保存在本地，通知用户等）。当您不再关心连接性时，您会想要使用 stopNotifier。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:58:38.780

这很简单：

*   *如果您需要在某个时间点*检查您是否有互联网连接，请使用单例
**   如果您需要在一段时间内跟踪互联网连接的变化，请使用通知器 + 通知*

# spring - Spring Security - 如果 id 无效，则阻止用户访问页面

> ID：12457722
> 
> 赞同：1
> 
> 时间：2012-09-17T10:48:46.773
> 
> 标签：spring, jakarta-ee, spring-mvc, spring-security

我是 Spring Security 的新手，正在考虑在我的应用程序中使用或不使用它的想法。要求如下：

1.  在我的 Web 应用程序中，我将会话信息存储在数据库中，此密钥存储在 cookie 中 2.现在，每当有人尝试访问不符合流程的 url 时，我都想拒绝访问。3.我可以为此使用 Spring Security。

我使用 Spring MVC、Mongo DB 和 MySQL 作为开发环境。

问候， 阿布舍克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:08:01.153

如果您想简单地控制应用程序的流程，我建议您使用 Spring Webflow。这允许您在多页应用程序中定义设置流。

Spring Security 可用于控制流，但仅用于访问控制。它与 Webflow（以及 Spring MVC）很好地集成，以确保您可以保护部分或全部流。

# proxy - 使用 lighttpd 代理更改 QUERYSTRING

> ID：12457727
> 
> 赞同：1
> 
> 时间：2012-09-17T10:49:37.227
> 
> 标签：proxy, lighttpd

首先对不起我的英语，希望你能理解。

我需要使用 Lighttpd 更改目标服务器的 URL，我的意思是，有人要编写一个类似[http://my.proxy.server.com/MYQUERY](http://my.proxy.server.com/MYQUERY)的 URL ，我需要将其更改为类似[http:// XXX.XXX.XXX.XXX/search?q=MYQUERY](http://XXX.XXX.XXX.XXX/search?q=MYQUERY)。

我尝试像下面的配置一样添加“查询字符串”选项，但它不起作用。

```
proxy.server     = (

                    "" =>
                 (
                   ( "host" => "XXX.XXX.XXX.XXX",
                     "port" => 80,
                     "querystring" => "/search?q=$HTTP[querystring]"
                   )
                 )
                ) 
```

我还尝试使用下面的代码强制更改 URL，但它也不起作用。

```
$HTTP["url"] =~ "^/"{
server.querystring = "/search/q=$HTTP[querystring]"
} 
```

我能做些什么？lighttpd有这个功能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:59:50.877

找到了。首先我需要激活 mod_rewrite，然后在代理配置之前我只需要重写 url，比如：

```
url.rewrite-once = ( "/(.*)" => "/search?q=$1" ) 
```

谢谢你们。

# mysql - 当一个表没有条目时mysql JOIN

> ID：12457730
> 
> 赞同：1
> 
> 时间：2012-09-17T10:49:53.320
> 
> 标签：mysql, join, null

我有两张桌子：

具有 player_id 和名称的玩家

具有 player_id 和 team_id 的团队

并非所有球员都有球队参赛资格。

我正在尝试创建一个查询，给定一个 player_id，如果在 team 表中找不到*player_id ，它将返回名称和 null。*

我已经尝试了各种 JOIN，但我得到 null、null 或在表中找到的第一个 team_id 的名称。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:56:05.617

做这个

```
SELECT p.PlayerID, t.PlayerID
FROM Player p
LEFT JOIN Team t
ON p.PlayerID = t.PlayerID 
```

如果您希望返回 null，请选择 t.PlayerID，因为如果它存在于 Player 中，p.PlayerID 将不会为 null

您的结果将如下所示

```
PlayerID   Player Name    TeamID    PlayerID
-------------------------------------------------
0001       John           NULL      NULL 
```

如您所见，第二个 PlayerID 为 NULL 而不是第一个。选择第二个例如`WHERE t.PlayerID IS NULL`

# java - 在首次应用程序启动期间获取“错误 DefaultExtensionsRegistry - 为字体实例化扩展注册表时出错”

> ID：12457733
> 
> 赞同：1
> 
> 时间：2012-09-17T10:50:15.817
> 
> 标签：java, jasper-reports

我正在使用*JasperReports 3.7.2*、*iReport 3.7.2*和*JRE 1.6.0.20*。

首先，当我生成*PDF*报告时，出现以下错误（但报告已正确生成）：

```
2012-08-24 10:03:49,302 [http-8180-1] ERROR DefaultExtensionsRegistry - Error instantiating extensions registry for fonts
net.sf.jasperreports.engine.JRRuntimeException: java.awt.FontFormatException: bad table, tag=1146308935
        at net.sf.jasperreports.engine.fonts.SimpleFontFace.<init>(SimpleFontFace.java:73)
        at net.sf.jasperreports.engine.fonts.SimpleFontFamily.createFontFace(SimpleFontFamily.java:316)
        at net.sf.jasperreports.engine.fonts.SimpleFontFamily.setNormal(SimpleFontFamily.java:85)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.parseFontFamily(SimpleFontExtensionHelper.java:233)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.parseFontFamilies(SimpleFontExtensionHelper.java:204)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.loadFontFamilies(SimpleFontExtensionHelper.java:173)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.loadFontFamilies(SimpleFontExtensionHelper.java:142)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionsRegistryFactory.createRegistry(SimpleFontExtensionsRegistryFactory.java:63)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.instantiateRegistry(DefaultExtensionsRegistry.java:238)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.loadRegistries(DefaultExtensionsRegistry.java:213)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.loadRegistries(DefaultExtensionsRegistry.java:162)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.getRegistries(DefaultExtensionsRegistry.java:132)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.getExtensions(DefaultExtensionsRegistry.java:104)
        at net.sf.jasperreports.engine.util.JRStyledTextParser.<clinit>(JRStyledTextParser.java:76)
        at java.lang.J9VMInternals.initializeImpl(Native Method)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
        at net.sf.jasperreports.engine.fill.JRBaseFiller.<init>(JRBaseFiller.java:182) 
```

*生成PDF*的后续尝试成功且没有错误。错误仅在运行应用程序后第一次生成*PDF时发生。*

错误与操作系统无关，它发生在*Windows*以及*UNIX*（*AIX*和*Linux*）上。

请有人给我线索来解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-21T22:24:38.810

似乎您的 jar 文件中的一种字体不可解析。我知道您永远不会阅读此评论，但这似乎很明显。它只是跳过该字体，之后不再尝试读取字体扩展名。

# sql - 查询 SQL Server DMV 的性能影响

> ID：12457745
> 
> 赞同：0
> 
> 时间：2012-09-17T10:50:42.673
> 
> 标签：sql, sql-server, performance, sql-server-2008, dmv

当我查询 sys.dm_exec_query_stats、sys.dm_tran_locks 或 sys.dm_db_index_physical_stats 等 DMV 时，对繁忙的生产 SQL Server 2008 是否有任何性能影响？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:58:56.527

每一个都有不同的影响。影响取决于返回了多少条目（这通常意味着必须遍历多少内部数据结构），并且某些 DMv 本质上比其他 DMv 对性能更敏感（例如，仅仅因为锁数据结构太多`sys.dm_tran_locks`就会产生更大的影响`sys.dm_exec_query_stats`比查询缓存更热）。一些 DMv 之类`sys.dm_db_index_physical_stats`的隐含磁盘数据扫描，它们将非常*昂贵*，与全表扫描相当。

# css - 两个 div 固定在顶部

> ID：12457746
> 
> 赞同：2
> 
> 时间：2012-09-17T10:50:54.837
> 
> 标签：css, html, scroll, fixed

我对固定在页面顶部的 2 个 div 有疑问。我已将它们固定在顶部，如果我向下或向上滚动页面一切正常。但如果我左右滚动，我看不到第二个 div。我该如何解决？

[这是我的页面](http://project93.altervista.org/HomePage.php)，您可以通过以下方式查看问题： 1\. 调整浏览器页面大小 2\. 向下滚动 3\. 向右滚动

这里的代码：

```
 <HEAD>

<script type='text/javascript' src='jquery-1.7.1.js'></script>
</HEAD>
<LINK REL="stylesheet" HREF="Stile.css" TYPE="text/css" />
<BODY>
<script type='text/javascript'>
$(window).load(function(){
$(window).scroll(function () { 
    if(($(".container").position().top - $(window).scrollTop()) <= 0)
       {
           $("#cont").addClass("fixmenu");
       }
       else
       {
           $("#cont").removeClass("fixmenu");

       }
}); }); 
</script>

<div class="container" >

<div id="cont">

<div id="menubar">
</div>
<div id="fastlogin">
</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:23:17.847

您可以为较小的屏幕宽度设置单独的样式表，以将右侧 div 放置在另一个位置。

或者，您可以利用框位置和宽度的百分比来使布局流畅。

或者您可以使用`right: #%;`来定位右侧框，而不是设置左边距。

或者，您将流体宽度设置为该左边距。

或者，或者，或者……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:39:02.627

仅用于 y 轴的固定位置，您可以通过这个小脚本来实现：

```
var topOffset = parseInt($("#header").css('top'));
$(window).scroll(function(){
    $('#header').css({
        'top': $(this).scrollTop() + topOffset
    });
}); 
```

[**演示**](http://jsfiddle.net/EzXub/324/)

# uitableview - UITableView 可滚动背景与 UIColorWithImagePattern 奇怪的效果

> ID：12457747
> 
> 赞同：0
> 
> 时间：2012-09-17T10:50:57.613
> 
> 标签：uitableview, ios5, background, uicolor, ios6

我试图在我的 UITableView 中设置一个与表格一起滚动的背景。建议的方法之一（来自先前的研究）是使用：

```
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]]; 
```

不幸的是，这是 iOS 5.1 上的结果： ![在此处输入图像描述](../Images/2e0d7623f49765db2198d807b7ab4635.png)

原始背景应该是：

![在此处输入图像描述](../Images/2ba0f9519abb2e6b300768ac82e7564d.png)

显然这个问题不影响iOS6。关于如何在 iOS5 中修复它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:59:12.047

在我看来，您的部分页眉和页脚视图搞砸了。您是否正确设置了以下委托方法？如果未设置它们，iOS5 存在将它们设为默认值的问题。不过不确定iOS6。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 

- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section 

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section 
```

# c# - DataContext.Refresh 异常

> ID：12457749
> 
> 赞同：0
> 
> 时间：2012-09-17T10:51:21.893
> 
> 标签：c#, linq-to-sql, datacontext

当我尝试使用以下代码块时：

```
 private MarketingDBDataContext DB_Marketing;

    public DBFacade()
    {
        DB_Marketing = new MarketingDBDataContext();
    }        
    public void updateSingleObj(object obj)
    {
        if (obj is Marketing.Cust)
        {
            try
            {                     
                DB_Marketing.Refresh(RefreshMode.OverwriteCurrentValues, obj);
            }
            catch (Exception ex)
            {
            }
        }
    } 
```

我得到了这个例外：

```
An object specified for refresh is not recognized 
```

我有一个与另一个数据上下文和另一个实体对象引用类似的方法，效果很好。

我有一个 Marketing Cust gui，它打开一个新的对话框窗口来输入网站链接。我想在新的 DialogWindow 出现之前检查当前的 Marketing Cust 对象是否更改了此 Weblink 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:48:23.487

发现了问题。有两个控制器，每个控制器都有一个 Database 门面的实例。我尝试在错误的控制器中重用一个方法，忘记了控制器为相应的数据库制作和数据库外观实例，这导致了一个 DataContext，其中该对象不存在。

我给其他人的建议是，检查实例化 DataContext 的位置，并确保对象包含在其中。

# spring - LinkageError：Spring项目中的重复类定义

> ID：12457750
> 
> 赞同：1
> 
> 时间：2012-09-17T10:51:29.017
> 
> 标签：spring, persistence, james

有一个春季非网络项目。添加多个持久性单元会导致错误：

```
Caused by: java.lang.LinkageError: loader (instance of  sun/misc/Launcher$AppClassLoader): attempted  duplicate class definition for name: "org/springframework/stereotype/Service" 
```

当我删除一个单元时，persistence.xml 中的行出错了。

```
<persistence-unit name="James" transaction-type="RESOURCE_LOCAL">
            <!-- Mailbox stuff-->
            <class>org.apache.james.mailbox.jpa.mail.model.JPAMailbox</class>
            <class>org.apache.james.mailbox.jpa.mail.model.JPAUserFlag</class>
            <class>org.apache.james.mailbox.jpa.mail.model.openjpa.AbstractJPAMessage</class>
            <class>org.apache.james.mailbox.jpa.mail.model.openjpa.JPAMessage</class>
            <class>org.apache.james.mailbox.jpa.mail.model.openjpa.JPAMessage</class>
            <class>org.apache.james.mailbox.jpa.mail.model.JPAProperty</class>
            <class>org.apache.james.mailbox.jpa.user.model.JPASubscription</class>
            <class>org.apache.james.domainlist.jpa.model.JPADomain</class>
            <class>org.apache.james.user.jpa.model.JPAUser</class>
            <class>org.apache.james.rrt.jpa.model.JPARecipientRewrite</class>
            <class>com.merve.DenemeEntity</class>

            <properties>
                <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)"/>
                <property name="openjpa.jdbc.MappingDefaults" value="ForeignKeyDeleteAction=cascade, JoinForeignKeyDeleteAction=cascade"/>
                <property name="openjpa.jdbc.SchemaFactory" value="native(ForeignKeys=true)"/>
                <property name="openjpa.jdbc.QuerySQLCache" value="false"/>
            </properties>

        </persistence-unit>

    <persistence-unit name="PU" transaction-type="RESOURCE_LOCAL">

           <properties>
                <property name="hibernate.hbm2ddl.auto" value="create" />
                <property name="hibernate.show_sql" value="false" />

                <property name="hibernate.max_fetch_depth" value="0"  />
                <property name="hibernate.cache.use_second_level_cache" value="true" />
                <property name="hibernate.cache.use_query_cache" value="false" />
                <property name="hibernate.cache.region.factory_class" value="net.sf.ehcache.hibernate.EhCacheRegionFactory" />

                <property name="hibernate.ejb.naming_strategy" value="aclass"/>

            </properties>

        </persistence-unit> 
```

该项目不是我的，它是 Apache James Server。我正在尝试添加其他内容`persistence unit`。我认为这不是 James 特有的，我在网上搜索并遇到一篇帖子，上面说错误是关于`Singleton`在多次`EntityManager`注入期间创建 a 的两个实例。感谢您提供可能的建议。

# php - php中每10个图像的新坐标

> ID：12457752
> 
> 赞同：0
> 
> 时间：2012-09-17T10:51:39.390
> 
> 标签：php, loops, foreach, gd, coordinates

我有这个 foreach 循环

```
foreach ($this->shuffle_with_keys($myBricksAndRatios) as $key) {         

   $bricks_to_choose = mt_rand(1,1);

   $cur = imagecreatefrompng("/var/www/brickmixer/bricks/". $key[0]."".$bricks_to_choose.".png"); 
   imagecopy($img, $cur, $coords, 0, 0, 0, 125, 30); 

   $coords += 132;
} 
```

如何为每 10、每 20、每 30 等图像设置新坐标？

它应该从 x = 0 和 y = 0 开始在一行中输出 10 个图像，然后第 11 个图像将从 x = 0 和 y = 37 开始

然后将第 21 张图像放置在 x = 0、y = 74 等处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:56:44.717

应该很简单。下面的代码可能不是最优化的，但很容易理解。

```
$dx = 132;
$dy = 37;
$x = 0;
$y = 0;
$perrow = 20;
$cnt = 1;

foreach ($this->shuffle_with_keys($myBricksAndRatios) as $key) {         

    $bricks_to_choose = mt_rand(1,1);

    $cur = imagecreatefrompng("/var/www/brickmixer/bricks/". $key[0]."".$bricks_to_choose.".png"); 
    imagecopy($img, $cur, $x, $y, 0, 0, 125, 30);

    $x += dx;

    if(++$cnt % $perrow == 0) {
        $x = 0;
        $y += dy;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:54:41.187

```
$i = 0;
foreach ($this->shuffle_with_keys($myBricksAndRatios) as $key) {         

   $bricks_to_choose = mt_rand(1,1);

   $ycords = (floor(($i++) / 10) * 37);

   $cur = imagecreatefrompng("/var/www/brickmixer/bricks/". $key[0]."".$bricks_to_choose.".png"); 
   imagecopy($img, $cur, $coords, $ycords, 0, 0, 125, 30); 

   $coords += 132;
} 
```

这应该有效。

注意`$ycords = (floor(($i++) / 10) * 37);`线。

**编辑**：当然，如果您不想要任何 X 定位，请更改`$coords`为`0`

# jquery - 使用远程源时，jQuery 自动完成功能不起作用

> ID：12457753
> 
> 赞同：2
> 
> 时间：2012-09-17T10:51:48.110
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

HTML：

```
<input type="text" id="shop-id"> 
```

JS：

```
$(document).ready(function(){

    $( "#shop-id" ).autocomplete({
        source: "/ticket/get_sids",
        select: function(event, ui){
          //...
        }
    }); 
```

});

有一个奇怪的自动完成问题。如果我用这样的静态变量声明源

```
 var data = ["0200","0032"];

    $( "#shop-id" ).autocomplete({
        source: "/ticket/get_sids"
    }); 
```

一切都如预期。

但是使用动态源网址，自动完成似乎不会过滤搜索。就像无论我输入什么作为搜索文本，自动完成都会打开整个源而不进行过滤。例如，我键入一个“g”，它会打开 0200、0032，但它不应该因为“g”与源中的任何内容都不匹配。

动态源返回纯 json，如：`["0200","0032"]`. 这是一个php页面：

```
return new Response(json_encode($data)); 
```

返回

```
["0200","0032"] 
```

在浏览器窗口中。

环境：jQuery 1.7.2 jQuery-Ui 1.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:15:32.567

您缺少将用于发回过滤器值的数据参数......如果这有任何意义。所以你需要在返回响应数据之前实现某种形式的服务器端过滤

*“我输入一个“g”，它会打开 0200、0032，但它不应该是因为“g”与源中的任何内容都不匹配。”*

```
$(document).ready(function(){

    $( "#shop-id" ).autocomplete({
        source: "/ticket/get_sids",
        select: function(event, ui){
          //...
        },
       data: { term: request.term   }  //"term" could be anything, based on parameters your server side method expects
        //...
     })
 }); 
```

我之前回答过一个类似的问题。希望这可以帮助？[https://stackoverflow.com/a/11930525/1105314](https://stackoverflow.com/a/11930525/1105314)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:35:06.483

> 使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。它可以在同一台主机上，也可以在不同的主机上（必须提供 JSONP）。自动完成插件不会过滤结果，而是将请求参数“term”添加到 URL，服务器端脚本应该使用它来过滤结果[。](http://jqueryui.com/demos/autocomplete/)

# android - Android - 想要将数据从 SQLITE db 传输到 Web 服务器

> ID：12457758
> 
> 赞同：4
> 
> 时间：2012-09-17T10:52:11.620
> 
> 标签：android

我在 android 中开发了一个离线数据输入应用程序，用户在其中输入将保存在 sqlite db 中的所有详细信息。

归根结底，我想将数据从 sqlite db 传输到将数据存储在 PostgreSQL db 中的服务器。根据我的要求，我没有找到任何好的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T10:57:07.360

您可以使用 Web 服务将数据发送到服务器。

您可能需要选择的方法是，在您的服务器上托管一个服务（可以用任何编程语言编写），该服务从数据库中检索/发布数据并以 JSON/XML 格式（我做了 JSon 格式）发送数据到应用程序. 在您的应用程序中，使用 HTTPClient 获取/发布数据到服务器上托管的服务。在内置的 JSON API 中使用 Android 解析数据。

如何在 android 中使用 web 服务参考以下链接：

[Android (Java) 使用服务器简单发送和接收 - 快速设置挑战](https://stackoverflow.com/questions/983761/android-java-simple-send-and-recieve-with-server-fast-setup-challenge)

[将数据从android发送到网络服务器](https://stackoverflow.com/questions/9478875/send-data-from-android-to-webserver)

[通过 JSON 将数据从 android 发送到服务器](https://stackoverflow.com/questions/6523761/send-data-from-android-to-server-via-json)

[Android实用程序将sqlite db发送到服务器](https://stackoverflow.com/questions/6042453/android-utility-to-send-sqlite-db-to-sever)

# ruby - 如何用 Ragel 解决这种歧义？

> ID：12457760
> 
> 赞同：1
> 
> 时间：2012-09-17T10:52:32.280
> 
> 标签：ruby, state-machine, ragel

我正在尝试解析以下格式：`(identifier/)?identifier(/keyword)?`，带有第一个标识符以及可选的关键字。关键字不能用作标识符。例如，如果`up`是关键字，则：

*   `simple`匹配第二个标识符，
*   `first/second`匹配`first`作为第一个标识符，`second`作为第二个标识符，
*   `second/up``second`作为第二个标识符和`up`关键字匹配。

将[Ragel](http://www.complang.org/ragel/)与 Ruby 结合使用，我定义了以下 FSM：

```
%%{
  machine simple;

  keyword = "up";
  separator = '/';
  ident_char = any - separator;
  identifier = ident_char+ - keyword;

  action start_string { $start_string = p }

  action first_string { puts "First: #{get_string(data, p)}" }
  action second_string { puts "Second: #{get_string(data, p)}" }

  action keyword_string { puts "Keyword: #{get_string(data, p)}" }

  main := ( identifier >start_string %first_string separator )? 
         :> identifier >start_string %second_string 
          ( separator keyword >start_string %keyword_string )?
  ;

}%%

%% write data;

def get_string(data, p)
  data[$start_string...p].pack("c*")
end

def parse(data)
  data = data.unpack("c*")
  eof = pe = data.length

  %% write init;
  %% write exec;
end

parse("first/second")
puts("---")
parse("second/up") 
```

这给出了以下输出：

```
$ ragel -R simple.rl ; ruby simple.rb
Second: first
---
Second: second
Keyword: up 
```

这是不正确的，因为第一部分应该是`First: first` `Second: second`，但由于`:>`我给出的优先级而预期。

我尝试了不同的优先级组合，但未能获得预期的结果。有没有办法用 Ragel 解决这个问题（即，这可以在没有前瞻的情况下解决）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:23:01.407

试试这个作为你的主机：

```
two_idents = identifier >start_first %first_string . separator . (identifier >start_second %second_string);                             

main := (two_idents | identifier >start_first %first_string) . ( separator . keyword )?; 
```

问题是“第一个标识符”与“第二个标识符”共享一个前缀，所以尝试做一个受保护的连接会捷径第一台机器。工会实际上描述了您要进行的比赛。

# sql-server - 动态数据库名称并将列值存储到变量

> ID：12457762
> 
> 赞同：0
> 
> 时间：2012-09-17T10:52:41.233
> 
> 标签：sql-server, sql-server-2008

我正在使用 SQL Server 2008。我的存储过程必须传递动态数据库名称并将列值存储到变量中

```
ALTER PROCEDURE [dbo].[proc_testproc](@mUserId int)
AS
declare @logCreate BIT;
declare @dbname sysname;
set @dbname = 'finaldb'

exec('SELECT ua.LogCreate AS ' + @logCreate + ' from '+ @dbname
   + 'dbo.User_Access as ua where ua.UserId=' + @mUserId + ')

IF @logCreate = 1 
--- Below some insertion happens based on the select query output-- 
```

谁能帮助我如何传递动态数据库名称并将值存储到变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:31:26.167

你需要的成分是

*   [sp_executesql](http://msdn.microsoft.com/en-nz/library/ms188001.aspx)
*   [输出参数](http://support.microsoft.com/kb/262499)

基本上，使用 sp_executeSQL 构建要运行的动态 SQL 语句，并将变量传递给它。使用声明为 OUTPUT 参数的变量，它可以将结果带出动态 SQL 语句。

```
ALTER PROCEDURE [dbo].[proc_testproc](@mUserId int)
AS
declare @logCreate BIT;
declare @dbname sysname;
set @dbname = 'finaldb'

declare @sql nvarchar(max)
set @sql = '
    SELECT @logCreate=ua.LogCreate
    from '+ @dbname + '.dbo.User_Access as ua
    where ua.UserId=@mUserId'
exec sp_executesql @sql,
    N'@logCreate BIT output,@mUserId int',
    @logCreate output, @mUserId

IF @logCreate = 1 
```

# asp.net-mvc - 从 Jquery datepicker 到 MVC 问题的日期时间绑定

> ID：12457763
> 
> 赞同：1
> 
> 时间：2012-09-17T10:52:41.780
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery-ui-datepicker

我们使用 JQuery UI Datepicker。

当我以这种格式输入日期时：9/22/2012 asp.net MVC 说它的格式无效。

当我查看通过绑定填充的视图模型时，它表示日期字段：`NULL`。

当我查看请求时，我将其视为发布的值：`9%2f22%2f2012`

在`protected override void OnActionExecuting(ActionExecutingContext filterContext))`我设置了这样的文化

```
 CultureInfo culture = new CultureInfo(language.LanguageISO);
            Thread.CurrentThread.CurrentCulture = culture;
            Thread.CurrentThread.CurrentUICulture = culture; 
```

在这种情况`language.LanguageISO`下，' `en`'

我以为模型粘合剂会吸收文化？

日期中的斜线被转义为 可能是一个问题`%2f`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:00:41.170

在`OnActionExecuting`事件中设置文化为时已晚。模型绑定器已在此阶段运行。您需要在模型绑定器运行之前提前设置它。例如，您可以实现`IAuthorizationFilter`接口：

```
public class SomeCustomAttribute : ActionFilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        // TODO: set the culture here so that it's picked up by the model binder

        CultureInfo culture = new CultureInfo(language.LanguageISO);
        Thread.CurrentThread.CurrentCulture = culture;
        Thread.CurrentThread.CurrentUICulture = culture; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:58:38.173

尝试像这样配置日期选择器

```
$('.has_datepicker').datepicker({

       dateFormat: '@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern.Replace("M", "m").Replace("yy", "y")' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:07:17.927

```
Follow the step:
1\. @Html.TextBox("date", Model.ToString("dd/MM/yyyy"), new { @class = "date" })

2.
/// <reference path="jquery-1.4.4.js" />
/// <reference path="jquery-ui.js" />
$(document).ready(function () {
    $('.date').datepicker({dateFormat: "dd/mm/yy"});
}); 
```

# javascript - 如何从 xml 文件将服务器名称设置为 javascript 中的全局变量？

> ID：12457768
> 
> 赞同：0
> 
> 时间：2012-09-17T10:52:58.600
> 
> 标签：javascript, xml, configuration

我有一个进行一些 Ajax 调用的 Web 应用程序，我想在 XML 配置文件中设置用于 ajax 调用的服务器域名。我看过[这个教程](http://www.w3schools.com/xml/xml_parser.asp)，它展示了如何在 javascript 中解析 xml 文件。但问题是我需要进行 Ajax 调用来解析 xml 文件，为此我需要知道服务器域名（我已经在尝试从 xml 中获取）。

那么如何在 XML 文件中设置服务器名称并用于进行 ajax 调用呢？有没有其他方法可以在 javascript 文件本身之外配置服务器名称？

* * *

编辑：

我可以做这样的事情吗（我根本不需要设置服务器名称，也不需要配置文件）：

```
 function getMetricNotifications()
{    
 var xmlhttp;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.open("GET","/rest/general/notifications/metrics",true);
    xmlhttp.send();
    var response = JSON.parse(xmlhttp.responseText);
    return response;
} 
```

在 URL 的开头 没有提及域名`localhost:8080`（本地）或（在服务器上）`http://mysite.com:8080``xmlhttp.open("GET","/rest/general/notifications/metrics",true);`

我试过了，我得到 :`uncaught syntaxerror unexpected end of input`在最后一行之前。有什么想法吗？

* * *

第二次编辑：

```
function getMetricNotifications(){   
 var xmlhttp;
 var response = '';
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
          {
             response = JSON.parse(xmlhttp.responseText);
             return response;
          }
      };
    xmlhttp.open("GET","/rest/general/notifications/metrics",true);
    xmlhttp.send(); 
} 
```

现在我正在调用此函数并打印结果并打印“未定义”，尽管直接在浏览器中访问其余资源会给出正确的 JSON 响应。为什么它没有得到响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:13:34.600

这取决于您使用哪种后端技术。您需要在服务器端解析 XML 文件并在其输出中插入服务器名称。

在 PHP 中，您可以执行类似的操作

```
<html>
<head><!-- rest of head -->
<script>
<?php $xml = simplexml_load_file('cfg.xml'); ?>
var server_name = <?= json_encode($xml->servername) ?>
</script> 
```

然后你可以使用`server_name`你的 JavaScript 代码。

## 添加编辑：

是的，这是大多数情况下首选的 URL 格式。

您看到的错误可能是由格式错误/不完整的 JSON 输入引起的。

您正在执行的请求是异步的，因此您需要等待数据可用/下载。`xhr.responseText`通话后立即为空`xhr.send()`。等待请求进入就绪状态 4（完成）。

```
// ...
xhr.onreadystatechange = function () {
  if (xhr.readyState === 4) {
    var data = JSON.parse(xhr.responseText);
    // ... do something with data ...
  }
};
xhr.send(null); 
```

## 添加第二个编辑：

我想您以同步方式使用该功能，例如

```
var data = getMetricNotifications(); 
```

如果您异步获取数据，则不能这样做。您需要熟悉回调函数的概念并改为这样做：

```
getMetricNotifications(function (data) {
  // work with the received data
}); 
```

不是返回数据，而是将其传递给回调函数，如下所示：

```
var getMetricNotifications = function (callback) {
  // ... do the call ...
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && ...) {
      var data = JSON.parse(xhr.responseText);
      callback(data);
    }
  };
  // ... 
}; 
```

# ruby - Ruby Rails 1.9.4-perf Zeus 服务器不工作，死机

> ID：12457770
> 
> 赞同：1
> 
> 时间：2012-09-17T10:53:01.933
> 
> 标签：ruby, rbenv, zeus

终端输出：

```
joe@peteimac:~
> zeus start
Starting Zeus server
ready   : boot
died    : boot 
```

：在此之后它并没有退出，它似乎只是挂起......

Zeus 更像是 Spork。它可以让你在后台加载你的应用程序，这样测试之类的东西就可以运行得非常快。[https://github.com/burke/zeus](https://github.com/burke/zeus)

我和我的同事都在努力让它发挥作用。这是您在全新 Mac 上键入的命令列表，以到达我现在所在的位置，但也许我错过了什么？

强大的名单

```
#The github links below contain guides, this assumes they are followed, with the exception that variables go in .zshrc rather than .zshenv
#Install ZSH | https://github.com/robbyrussell/oh-my-zsh | This means I ditch paths into .zshrc rather than .bash_profile etc
#Install RBENV | https://github.com/sstephenson/rbenv | Colleague using RVM is also having problemos
#Install ruby-build | https://github.com/sstephenson/ruby-build | handy for installing ruby versions
#Continue setting up RBENV and install Bundler | https://gist.github.com/1384279 | Bundler manages the gems, no need for rbenv bundler
# Install patched ruby version using Rbenv and ruby-build | https://gist.github.com/1688857 | "rbenv versions" should show something like:
> rbenv versions
  1.9.3-p194
* 1.9.3-p194-perf (set by /Users/joe/.rbenv/version)
# Rehash
rbenv rehash
# Reload .zshrc, as have added parameters to it following the gist guide for installing 194-perf
exec $SHELL
# Zeus expects a few things, rails should install to ~/.rbenv/versions/1.9.3-p194-perf/bin i think
gem install rails
# The init file Zeus.json mentions cucmber and rspec, so they need to be install globally in rbenv rather than just locally bundled in your projects
gem install cucumber
gem install rspec
rbenv rehash
zeus init
zeus start
# Later, when I get zeus to work globally, I will:
##git pull project_stuff to ~/my_project
cd my_project
rbenv local 1.9.3-p194-perf
bundle install
rbenv rehash
zeus init
zeus start 
```

也试过重启

解决方案总结

这个问题是因为我试图在主文件夹而不是 my_project 文件夹中启动 zeus。但是，在那里执行它会产生不同的错误，它会挂起。移至[https://stackoverflow.com/questions/12473539/ruby-rails-1-9-4-zeus-server-hangs-after-zeus-start](https://stackoverflow.com/questions/12473539/ruby-rails-1-9-4-zeus-server-hangs-after-zeus-start)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:38:15.827

`rails server`首先有效吗？

# algorithm - 使用逐渐冒泡的列表项执行加权洗牌的算法

> ID：12457771
> 
> 赞同：0
> 
> 时间：2012-09-17T10:53:02.710
> 
> 标签：algorithm, shuffle, weighted

我想知道是否有人知道一种简单的算法来执行列表的洗牌，该算法允许权重偏差，以便列表中的每个项目同时朝着列表的顶部工作。

我正在一个网站上使用分页目录中的企业列表，并且列表需要公平显示，因此一个企业不能总是高于/低于另一个列表。目录的纯粹洗牌是不够的，因为它的随机性可能会导致任何给定的企业在很长一段时间内随机洗牌到列表中的相似位置，所以我想提供一些权重，以便每个列表被慢慢地推到列表中，以便随着时间的推移，它们有相当平等的机会显示在目录的第一页上。

编辑：

在凯文的感谢下 - 我正在尝试将这些规则正式化：

1）对于 n 个列表，每个列表必须在 n 个“准随机播放”中显示在位置一）

2）（模糊）列表的平均（？）位置应该随着时间的推移而增加，直到它到达位置 1

3) 对于任意两个业务（A 和 B），在 n 次洗牌迭代中，A 不能超过 B 超过 50% 的时间？

我还应该补充一点，我为一家拥有极其复杂和令人费解的“洗牌器”的企业工作，这对于安抚大量付费客户而言是必要的，这些客户坚持在我们目录中的各个业务类别中公平分配。客户的投诉是一个“真正的”问题，因为用户通常从前几个分页页面中选择项目，按字母顺序（默认情况下）对客户进行排序是不公平的，并且鉴于用户从上到下阅读，这不是公平的是，一项业务始终高于另一项业务。

我很想知道是否有人对他们以前可能已经实施过的这个问题有一个整洁的解决方案。

编辑：

我有一个想法，考虑到这些项目存储在数据库中，我可以有一个列，它是每个列表位置随时间推移的总和，当一个项目到达第一个位置时，我可以使用它来排序（降序）然后我可以将列表设置为 0，这意味着列表中的每个项目最终都会排在列表的顶部。问题是，对于大量列表，随着时间的推移，这个数字可能会变得相当大......

编辑：

我不想猛击数据库，我需要在用户浏览时保持一致性，因此我只会每晚（每天一次）执行“伪随机播放”，而不是在目录的每次显示上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:03:19.523

对于有 X 个公司的数据库，创建一个 X x X 网格，并用公司名称填充每个单元格。任何给定的公司名称都应该在每一行和每一列中出现一次。例如，对于一个包含十家公司的数据库，每家公司都有一个字符名称，一个这样的网格将如下所示：

```
ABCDEFGHIJ
BCDEFGHIJA
CDEFGHIJAB
DEFGHIJABC
EFGHIJABCD
FGHIJABCDE
GHIJABCDEF
HIJABCDEFG
IJABCDEFGH
JABCDEFGHI 
```

第 x 行第 y 列的公司将在第 y 天从列表顶部出现 x 个单位。换句话说，每天您都会参考不同的行来对公司名称进行排序。此方案满足您的两个标准：每个元素必须每 X 天至少出现一次 #1 插槽，并且任何特定元素不应长时间停滞在同一位置。但是仍然存在B公司总是出现在A公司下面的问题，所以还需要做一些额外的工作。

随机选择两列并交换它们。重复此过程，直到列充分随机化（有关执行此操作的线性时间方法，请参阅[Fisher-Yates Shuffle ）。](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)一个这样的结果可能如下所示：

```
HIDEJBGCAF
IJEFACHDBG
JAFGBDIECH
ABGHCEJFDI
BCHIDFAGEJ
CDIJEGBHFA
DEJAFHCIGB
EFABGIDJHC
FGBCHJEAID
GHCDIAFBJE 
```

现在，平均而言，A 将有 50% 的时间在 B 前面。实际百分比会有所不同，但会落在以 50% 为中心的钟形曲线上，而且很少会达到非常不均匀的比例。

公司 B 可能会抱怨它总是在公司 A 出现在 #1 之后的第二天出现在 #1 插槽中。如果这是一个问题，那么也对行执行洗牌：

```
GCDHBIFEAJ
HDEICJGFBA
BHICGDAJFE
JFGAEBIHDC
IEFJDAHGCB
AGHBFCJIED
CIJDHEBAGF
EABFJGDCIH
FBCGAHEDJI
DJAEIFCBHG 
```

现在您有一个具有以下属性的排序方案：

优点

*   在一个 X 天的周期中，所有 X 公司都出现在 #1 位置。
*   在 X 天的周期中，没有一家公司会停滞在同一个时段。一旦它占据了槽 K，它将在循环的剩余时间内不会返回到该槽。（在最坏的情况下，它仍然可能在同一区域“徘徊”一段时间，但最终它会在列表中的任何地方出现）
*   没有一家公司出现在另一家公司的时间超过 50%。你拥有的公司越多，它就越接近 50%。
*   哪家公司将出现在排名第一的位置是不可预测的，因此没有人可以根据公司何时受到关注而合理地声称存在偏见。

缺点

*   对于 N 个公司的数据库，生成网格需要 O(N^2) 时间和内存。您只需要每 N 天生成一个，并且可以提前完成，因此您可以将成本摊销到 O(N) 时间。
*   公司不会随着时间的推移而“冒泡”。我认为这个约束与“任何公司都不应该出现在另一个太多”约束相冲突；如果所有公司都以大致相同的速度向上冒泡，那么起步较高的公司通常会高于起步较低的公司。我给出的方法是放弃一个要求以满足另一个互斥要求的结果。
*   对于任何 X 天的时间段，公司有 1/N 的机会连续两天出现在 #1 位置。例如，当 A 公司在周期的最后一天位于 #1 槽时，当您生成新网格时，A 公司在周期的第一天位于 #1 槽时，就会发生这种情况。如果这是不可取的，您可以执行另一次随机播放，直到 A 不在第一个插槽中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:04:12.923

我想到的最简单的答案是使用最近最少使用 (LRU) 方法。

更新首页中显示的每个元素的时间戳，并呈现从“**最近最少使用/显示**”最先到“**最近使用/显示**”最后排序的所有元素。

这应该可以解决问题，并且涉及更新仅显示在首页中的元素的时间戳。

随着新元素的添加，旧元素从列表中删除，这应该保持优雅地循环项目。

您可以通过允许项目在返回到堆的底部之前粘附到首页进行几次迭代来微调这一点。这将取决于数据库中的项目数量、新元素的添加率、旧元素的删除率。

我希望这会有所帮助，劳伦特。

# html - 子导航链接选择标签

> ID：12457776
> 
> 赞同：0
> 
> 时间：2012-09-17T10:53:32.043
> 
> 标签：html

考虑以下菜单

```
 <select>
 <option value="#">Home</option>
 <option value="#">About</option>
 <option value="#">Products and Services</option>
 <option value="#">Markets</option>
 <option value="#">Case Studies</option>
 <option value="#">Markets</option>
 <option value="#">Partners</option>
 <option value="#">Contact Us</option>
 <option value="#">Careers</option>
 <option value="#">News</option> 
```

有没有办法让子菜单脱离某些选项，例如产品和服务的一组选项，即安全、政府、私人？如果这个问题非常荒谬，请原谅，边学习边学习

编辑

使用 optgroup 标签是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:01:31.283

您可以使用`<optgroup>`标签或推出自己的（基于 JavaScript 的）选择框解决方案。

# c# - 重定向到操作 asp.net mvc3

> ID：12457780
> 
> 赞同：0
> 
> 时间：2012-09-17T10:53:38.453
> 
> 标签：c#, asp.net, razor

我有动作（分析器），我想重定向到传递浮点列表参数的其他动作，但列表总是空的：

*   在动作分析器中，我填充了浮点列表（sfr），并将它作为参数传递给动作（_two 或 _three 或.... _others），但列表变为空。

    ```
    // GET: /Historique/
    [HttpGet] 
    public ActionResult Index()
    {
         return View();
    }
    [HttpGet]
    public ActionResult _two(IList<float> sf)
    {
         return View(sf);
    }
    [HttpGet]
    public ActionResult _three(IList<float> sf)
    { 
         return View(sf);
    }
    [HttpGet]
    public ActionResult _four(IList<float> sf)
    {
         return View(sf);
    }
    [HttpGet]
    public ActionResult _five(IList<float> sf)
    {  
         return View(sf);
    }
    [HttpGet]
    public ActionResult _six(IList<float> sf)
    {
         return View(sf);
    }
    [HttpGet]
    public ActionResult _others(IList<float> sf)
    {
         return View(sf);
    }
    [HttpPost]
    public ActionResult Analyser(FormCollection collection)
    {
          IList<float> sfr = new List<float>();
          for (int i = 0; i < Global.seg.Count; i++)
          {
               if (collection.AllKeys.Contains(i.ToString())) {
                   foreach (Point e in Global.seg[i]._pointsListe)
                   {
                        sfr.Add(e._latitude);
                        sfr.Add(e._longitude);
                    }
                }
           }

           if (sfr.Count == 4) return RedirectToAction("_two", new { sf = sfr });
           if (sfr.Count == 6) return RedirectToAction("_two", new { sf = sfr });
           if (sfr.Count == 8) return RedirectToAction("_four", new { sf = sfr });
           if (sfr.Count == 10) return RedirectToAction("_five", new { sf = sfr });
           if (sfr.Count == 12) return RedirectToAction("_six", new { sf = sfr });
           else return RedirectToAction("_others",sfr);
             }
        }
    } 
    ```

那么这是怎么回事，我该如何纠正呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:05:44.307

试试这样：

```
[HttpPost]
public ActionResult Analyser(FormCollection collection)
{
    IList<float> sfr = new List<float>();
    for (int i = 0; i < Global.seg.Count; i++)
    {
        if (collection.AllKeys.Contains(i.ToString())) 
        {
            foreach (Point e in Global.seg[i]._pointsListe)
            {
                sfr.Add(e._latitude);
                sfr.Add(e._longitude);
            }
        }
    }

    var rvd = new RouteValueDictionary();
    for (int i = 0; i < sfr.Count; i++)
    {
        rvd[string.Format("sf[{0}]", i)] = sfr[i];
    }

    if (sfr.Count == 4) return RedirectToAction("_two", rvd);
    if (sfr.Count == 6) return RedirectToAction("_two", rvd);
    if (sfr.Count == 8) return RedirectToAction("_four", rvd);
    if (sfr.Count == 10) return RedirectToAction("_five", rvd);
    if (sfr.Count == 12) return RedirectToAction("_six", rvd);
    else return RedirectToAction("_others", rvd);
} 
```

# java - 如何从谷歌地图Android上的按钮创建运动

> ID：12457783
> 
> 赞同：0
> 
> 时间：2012-09-17T10:53:39.533
> 
> 标签：java, android

需要在地图上制作导航按钮，有人可以告诉如何做这样的事情，没有找到关于这个主题的教程，因此我做juzat无法想象。卡在手机led，现在你需要添加一个按钮，或者向上或向下或向左或向右。有没有人有任何例子？或者至少告诉我什么事件以及如何移动地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:42:25.423

```
btn4.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                if (v == btn4) {
                    GeoPoint p = mapView.getMapCenter();
                    GeoPoint z = new GeoPoint(p.getLatitudeE6(), p.getLongitudeE6() - 1000000);
                    mc.animateTo(z);
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:00:30.610

MapView 活动本身或 MapView 控制器具有移动地图的功能

# android - 将文本字符串从 android 发送到网站上的文本字段？

> ID：12457785
> 
> 赞同：1
> 
> 时间：2012-09-17T10:53:42.447
> 
> 标签：android

我正在尝试将字符串从我的应用程序粘贴到网站。

我的应用程序如下所示。一个`EditText`和一个`Button`。我的按钮打开一个带有打开文本框的网站。

```
<input name="FreeTextBox" type="text" id="FreeTextBox" style="width:64px;"> 
```

如果有帮助，这是网站上文本框的 ID。

我的应用程序的`EditText`id 是 et2，它是`klass`java 中的变量。 `klassen = klass.getText().toString();`然后将`klass`变量制成一个字符串`klassen`

当我点击我的网站时`Button`，我会打开一个网站，然后我希望我的应用程序自动将我在网站上写的内容输入`EditText`到`FreeTextBox`网站上。

请给我建议如何做到这一点。这是我的第一个应用程序，所以我真的可以使用一些帮助。如果可能的话，你能给我一个关于我的变量的工作示例，我真的很讨厌这个。

提前致谢！

# regex - 只替换单数

> ID：12457786
> 
> 赞同：-1
> 
> 时间：2012-09-17T10:53:47.360
> 
> 标签：regex, replace

我正在尝试在许多php文件上进行区分大小写的搜索并用region2替换单词区域，即使是字符串中的单词，例如：123region456。

如果我开始用 region2 替换 region，那么已经存在的词 region 就变成了 region2s

如果我开始用regions2替换regions，然后用region2替换region，那么regions2这个词就变成了region2s2

即使对于字符串中的单词，如何仅匹配单个单词？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:01:10.980

如果你想替换`region`and `regions`，你应该匹配它们：

```
replace /region(s?)/ with "region$12" 
```

如果你想独立匹配它们，你可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)：

```
replace /region(?!s)/ with "region2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:57:10.033

首先，使用单词边界。

在 sed 中，您使用`\<...\>`. IE

```
sed 's/\<region\>/region2/g' 
```

# search - 数据结构排序+搜索有效

> ID：12457788
> 
> 赞同：0
> 
> 时间：2012-09-17T10:54:02.250
> 
> 标签：search, sorting, tree

我需要一个包含 4 个键和其他数据的数据结构；我可以对这些键中的任何一个进行排序。我可以选择什么数据结构？分拣时间应该非常少

想到了一棵树，但只会帮助搜索一个键。...对于其他键，必须在该特定键上重新创建树，然后找到它...任何可以同时处理所有 4 个键的数据结构？ [https://stackoverflow.com/questions/ask](https://stackoverflow.com/questions/ask)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:08:17.647

恐怕没有这样的结构可以保证您对每个值的访问时间相同。

最有效的搜索结构是`trees`. 有很多不同种类的树。最简单的是`binary search tree`. 但是您可能必须遍历此结构中仍然存在的所有键。

这就是为什么我向你推荐这棵树的平衡版本。二叉树是简单的结构。

如果您正在寻找更高级的东西，请查看`B-Tree`. 这种结构被数据库索引使用，被认为非常有效和快速。

# .net - 反应式扩展：使用 Publish 撰写时，SubscribeOn 无效

> ID：12457790
> 
> 赞同：1
> 
> 时间：2012-09-17T10:54:05.497
> 
> 标签：.net, system.reactive

我是响应式扩展的新手。

我有一个基于房间的 MMOFPS 游戏服务器，有很多房间，只有一个监听插座。我创建了一个cold observable，它表示从网络接收到的消息，并希望将其转换为hot 以便在多个房间之间共享，以便每个房间都可以过滤和处理它们的相关消息。我的方法正确吗？

另一个问题是，在将可观察到的冷转换为热后，我意识到 SubscribeOn 失去了效果。例如：

```
var observable = Observable.Return(1).Publish(); 
observable 
    .Where( 
        x => 
            { 
                Console.WriteLine("Filter on {0}", Thread.CurrentThread.ManagedThreadId); 
                return true; 
            }) 
    .SubscribeOn(Scheduler.NewThread) 
    .ObserveOn(Scheduler.NewThread) 
    .Subscribe(x => Console.WriteLine("Received on {0}", Thread.CurrentThread.ManagedThreadId)); 
observable.Connect(); 
Console.WriteLine("End {0}", Thread.CurrentThread.ManagedThreadId); 
Console.ReadLine(); 
```

> 结果：
> 12 收到
> 10 10 过滤 10

没有发布：

> 结果：11 结束 10 筛选 12 接收

但是当我使用 Publish.RefCount 自动连接时，它按预期工作。

我错过了什么吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:40:41.897

应用运算符的顺序很重要。如果你想共享 SubscribeOn 的订阅副作用，那么你必须在 Publish 之前应用它。例如：

```
var observable = Observable
    .Return(1)
    .SubscribeOn(Scheduler.NewThread)
    .Publish(); 
```

欲了解更多信息： [http ://social.msdn.microsoft.com/Forums/pl-PL/rx/thread/29de2890-8303-404d-a6f8-f0fe0f716a86](http://social.msdn.microsoft.com/Forums/pl-PL/rx/thread/29de2890-8303-404d-a6f8-f0fe0f716a86)

# shell - 邮件脚本中使用的 SED 命令出错

> ID：12457792
> 
> 赞同：0
> 
> 时间：2012-09-17T10:54:17.460
> 
> 标签：shell, unix, sed, mailing

我用这个

```
$ rc = system("sed -e 's/Monyear/$Month//g' <
  $Script_Path/Mailcontent.txt.template > $Script_Path/Mailcontent.txt"); 
```

在邮件脚本中

我收到类似的错误

```
sed: -e expression #1, char 19: unknown option to `s' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:59:51.143

你有`/`太多了。做这个：

```
s/Monyear/$Month/g 
```

# c++ - 视差图中的缺失区域

> ID：12457801
> 
> 赞同：0
> 
> 时间：2012-09-17T10:54:52.827
> 
> 标签：c++, opencv, disparity-mapping

我目前正在使用 opencv2.3 和 Pointgrey Bumblebee2 立体摄像机作为输入设备进行立体处理。获取图像是通过*libdc1394*完成的。

我的整流和立体声处理代码如下：

```
void StereoProcessing::calculateDisparityMap(const Mat &left, const Mat &right, Mat &disparity_map)

  Mat map11, map12, map21, map22, left_rectified, right_rectified, disp16;

  // Computes the undistortion and rectification transformation maps
  initUndistortRectifyMap(this->camera_matrix1,
        this->distance_coefficients1,
        this->R1,
        this->P1,
        this->output_image_size,
        CV_16SC2,
        map11,
        map12);
  initUndistortRectifyMap(this->camera_matrix2,
        this->distance_coefficients2,
        this->R2,
        this->P2,
        this->output_image_size,
        CV_16SC2,
        map21,
        map22);

  // creates rectified images
  remap(left, left_rectified, map11, map12, INTER_LINEAR);
  remap(right, right_rectified, map21, map22, INTER_LINEAR);

  // calculates 16-bit disparitymap
  this->stereo_bm(left_temp, right_temp, disp16);

  disp16.convertTo(disparity_map, CV_8U, 255 / (this->stereo_bm.state->numberOfDisparities * 16.0));
} 
```

除了视差图中的黑色左边框外，这工作正常，如下所示：

![左侧有黑色边框的视差图](../Images/caff0bbf5b1eb54af595ad456ed1189f.png)

如您所见，输入图像是这两个未校正的；）： ![未校正的图像](../Images/df0b72eed1b326324df1da180a53cefe.png) ![右未校正图像](../Images/8452cc7fc2c9b8e5c0fe73fb239f581f.png)

所以我现在的问题是：这是正常行为吗？或者你有没有看到我到目前为止所做的任何错误？作为另一个信息，整改工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:09:33.220

缺失区域的宽度等于 stereo_bm 中使用的视差数量。它是正常的副产品`stereo_bm algorithm`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T22:05:41.470

我认为发生这种情况是因为该算法通过将左侧图像中像素周围的块与右侧图像中同一行中的像素周围的块进行匹配来计算视差（假设图像已被校正）。由于存在一个区域，左摄像头和右摄像头的视图之间没有重叠，因此该算法无法找到该区域内像素周围的块的匹配。“缺失”区域的宽度等于参数“视差数”，因为算法在“视差数”尝试后放弃了尝试匹配给定块（与左图像中的像素在同一水平行中）。如果我不够清楚，我很抱歉。如果您想了解有关其工作原理的更多详细信息，请参阅[http://siddhantahuja.wordpress.com/2010/04/11/correlation-based-similarity-measures-summary/](http://siddhantahuja.wordpress.com/2010/04/11/correlation-based-similarity-measures-summary/)。

# vba - 如何更改 Excel 日历控件的语言

> ID：12457807
> 
> 赞同：1
> 
> 时间：2012-09-17T10:55:31.110
> 
> 标签：vba, excel, calendar

使用 MS Excel 2003，我想更改我插入的日历控件的语言。我想用英语而不是西班牙语（我的电脑的本地语言）获取月份和工作日的名称。

我不知道该怎么做。我一直在谷歌搜索，没有成功。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:23:45.810

我不确定，但日历控件的语言可能取决于 dll 的语言版本，或者更有可能取决于系统或用户的默认语言环境。但我也找不到明确的参考。

但是MSDN上至少[有一篇](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760913(v=vs.85).aspx#localization)与Windows UI Month Calendar Control相关的文章支持我的猜测。

# django - 在 django 中赋值之前引用的局部变量“特征”

> ID：12457810
> 
> 赞同：-1
> 
> 时间：2012-09-17T10:55:36.880
> 
> 标签：django

嗨，我有一个简单的视图，我试图将功能传递给 html 页面，但它给了我以下错误：

```
UnboundLocalError at /enquiry/thanks/
local variable 'features' referenced before assignment 
```

而我的看法

```
 def abc(request):

    features = ['1','2','3','4','5','6','7','8','9','0']
        return render_to_response("xyz/thanks.html",
        {
             'test': features,
        }, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:17:05.973

应该：

```
 def abc(request):
    features = ['1','2','3','4','5','6','7','8','9','0']
    return render_to_response("xyz/thanks.html",{
                   'test': features,
           }, context_instance=RequestContext(request)) 
```

# html - type="text/css" 和 type="text/stylesheet" 的区别？

> ID：12457812
> 
> 赞同：14
> 
> 时间：2012-09-17T10:55:40.107
> 
> 标签：html, css, stylesheet

更多的是出于普遍的兴趣，但两者之间有什么区别

```
<link rel="stylesheet" href="/css/test.css" type="text/css"/> 
```

和

```
<link rel="stylesheet" href="/css/test.css" type="text/stylesheet"/> 
```

不同浏览器中的样式似乎存在一些差异，但我无法真正指出任何具体的内容 - 使用其中任何一个之间有什么真正的区别吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-17T11:00:36.937

`text/stylesheet`不是元素**的有效类型**。`link`

你应该使用`text/css`.

您可能会在浏览器中看到差异，因为某些浏览器已经考虑到人们可能会错误地`type="text/stylesheet"`使用`type="text/css"`.

# javascript - 如何使用 Codeigniter、Javascript 和 GET 表单在 URL 中强制使用逗号

> ID：12457814
> 
> 赞同：1
> 
> 时间：2012-09-17T10:55:45.047
> 
> 标签：javascript, codeigniter, url, get

我想要一个使用 Codeigniter 的 URL，如下所示：

```
example?type=1,2,3,4 
```

我可以手动输入它，也可以导航到这样的 URL，系统工作正常。但是，我有一个使用 GET 的表单，我想在其中发布多个类型的值。我正在使用 Javascript 来加入输入。

```
<form action="example" method="GET" id="type-form">
    <select multiple="multiple" name="_type[]" id="type-array-id-1">
        <option value="1">Type 1</option>
        <option value="2">Type 2</option>
        <option value="3">Type 3</option>
        <option value="4">Type 4</option>
        <option value="5">Type 5</option>
    </select>
    <input type="hidden" name="type" id="type-comma-sep"/>
    <input type="submit" value="Get" />
</form>
<script>
    $("#type-form").bind("submit",function(){
        var type_array = $("#type-array-id-1").val().join(",");
        $("#type-array-id-1").val("");
        $("#type-comma-sep").val(type_array);
    });
</script> 
```

我已经使用了其他一些 SO 问题的答案来让我走到这一步，但是当我提交我得到的表格时：

```
example?type=1%2C2%2C3%2C4 
```

我的后端依赖于 URL 中的“，”。那么如何强制逗号进入 URL 呢？

我还尝试了 htaccess 重写（尽管甚至不确定这是正确的）：

```
RewriteCond %{REQUEST_URI} ^([^\%2C]*)\%2C(.*)$
RewriteRule .* %1,%2 [R=301,L] 
```

我尝试使用 encodeURIComponent(type_array) 和 encodeURI(type_array)，但它从来没有产生任何影响。

我在 Codeigniter 中的设置如下：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.,:_\-'; 
```

在 system/libraries/input.php 中

```
if ( ! preg_match('/^[a-z0-9,:_\/-]+$/i', $str)) 
```

所以...

1.  如何在 URL 中强制使用逗号（最好使用 Javascript）？
2.  该解决方案是否可以跨浏览器工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:06:30.470

如果您通过 Javascript 进行重定向，那么应该没问题！

```
$("#type-form").bind("submit",function(){
    var type_array = $("#type-array-id-1").val().join(",");

    window.location = '?type='+type_array;

    return false;
}); 
```

如果您让表单正常提交，它将对所有查询字符串参数进行 URL 编码，转换您的逗号。

如果您只是用逗号明确设置 URL，它应该可以正常工作（或者至少在我上面的测试示例中是这样）！

# xml - 使用 xslt 将 xml 复杂节点元素拆分为多个节点

> ID：12457820
> 
> 赞同：1
> 
> 时间：2012-09-17T10:56:19.427
> 
> 标签：xml, split, xmlnode

有没有办法使用 xslt 将父节点拆分为多个节点？

我想将源 xml 转换为目标。

源代码

```
 <?xml version="1.0" encoding="utf-8"?>
    <rss version="2.0">
        <channel>
            <item>
                <id>Some id</id>
                <node1>
                    <node2 size="10.5" code="abcd"></node2>
                    <node2 size="10" code="cdef"></node2>        
                </node1>
            </item>
        </channel>
    </rss> 
```

目标 xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <rss version="2.0">
        <channel>
            <item>
                <id>Some id_10.5</id>
                <size>10.5</size>
                <code>abcd</code>
            </item>
            <item>
                <id>Some id_10</id>
                <size>10</size>
                <code>cdef</code>
            </item>
        </channel>
    </rss> 
```

如果您注意到目标 xml 中节点 id 的值，它会附加一个下划线和大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:27:40.227

非常直截了当，不清楚为什么你会觉得它很困难。

```
<xsl:template match="node2">
            <item>
                <id><xsl:value-of select="../../id"/>_<xsl:value-of select="@size"/></id>
                <size><xsl:value-of select="@size"/></size>
                <code><xsl:value-of select="@code"/></code>
            </item> 
</xsl:template> 
```

加上其他元素的一些简单的模板规则。

# tridion - 如何在 SDL Tridion 2011 SP1 中扩展“CheckOut”命令？

> ID：12457823
> 
> 赞同：3
> 
> 时间：2012-09-17T10:56:45.557
> 
> 标签：tridion, tridion-2011

我正在尝试扩展 Tridion 的“CheckOut”命令，到目前为止，我正在尝试显示我自己的消息，并希望在我单击功能区工具栏中的“CheckOut”选项时需要放置 OOTB CheckOut 操作。

我已经创建了配置文件和 .js 文件，如下所示，我也在 System.config 中进行了更改并创建了虚拟目录。但是我的 .js 没有被触发，也没有显示我的自定义消息。

**配置文件**

```
<?xml version="1.0"?>
<Configuration xmlns="http://www.sdltridion.com/2009/GUI/Configuration/Merge" xmlns:cfg="http://www.sdltridion.com/2009/GUI/Configuration" xmlns:ext="http://www.sdltridion.com/2009/GUI/extensions" xmlns:cmenu="http://www.sdltridion.com/2009/GUI/extensions/ContextMenu">
<resources cache="true">
    <cfg:filters/>
    <cfg:groups>
        <cfg:group name="CommandsExtensions.Commandset" merger="Tridion.Web.UI.Core.Configuration.Resources.CommandGroupProcessor" merge="always">
            <cfg:fileset>
                <cfg:file type="script">/js/ExtendCheckOut.js</cfg:file>
                <cfg:file type="reference">CommandsExtensions.Interface</cfg:file>
            </cfg:fileset>
            <cfg:dependencies>
                <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
                <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
            </cfg:dependencies>
        </cfg:group>
    </cfg:groups>
</resources>
<definitionfiles/>
<extensions>
    <ext:editorextensions>
        <ext:editorextension target="CME">
            <ext:editurls/>
            <ext:listdefinitions/>
            <ext:taskbars/>
            <ext:commands/>
            <ext:commandextensions>
                <ext:commands>
                    <ext:command name="CheckOut" extendingcommand="ExtendCheckOut" />
                </ext:commands>
                <ext:dependencies>
                    <cfg:dependency>CommandsExtensions.Commandset</cfg:dependency>
                </ext:dependencies>
            </ext:commandextensions>
            <ext:contextmenus/>
            <ext:lists/>
            <ext:tabpages/>
            <ext:toolbars/>
            <ext:ribbontoolbars/>
        </ext:editorextension>
    </ext:editorextensions>
    <ext:dataextenders/>
</extensions>
<commands>
    <cfg:commandset id="CommandsExtensions.Interface">
        <cfg:command name="ExtendCheckOut" implementation="CommandsExtensions.ExtendCheckOut"/>
    </cfg:commandset>
</commands>
<contextmenus/>
<localization/>
<settings>
    <defaultpage>/Views/Default.aspx</defaultpage>
    <navigatorurl>/Views/Default.aspx</navigatorurl>
    <editurls/>
    <listdefinitions/>
    <itemicons/>
    <theme>
        <path>css</path>
    </theme>
    <customconfiguration/>
</settings> 
```

**.js 文件**

```
Type.registerNamespace("Extensions");

Extensions.ExtendCheckOut = function Extensions.ExtendCheckOut() {
   Type.enableInterface(this, "Extensions.ExtendCheckOut");
   this.addInterface("Tridion.Cme.Command", ["ExtendCheckOut"]);
};

Extensions.ExtendCheckOut.prototype.isAvailable = function ExtendCheckOut$isAvailable(selection) {
   return true;
}

Extensions.ExtendCheckOut.prototype.isEnabled = function ExtendCheckOut$isEnabled(selection) {
   return true;
}

Extensions.ExtendCheckOut.prototype._execute = function ExtendCheckOut$_execute(selection) {
   $messages.registerWarning("This is Extended CheckOut");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:53:24.013

这就是我所做的，扩展了保存按钮：

```
<cfg:groups>
  <cfg:group name="ValidateTitleField.CommandSet">
    <cfg:fileset>
      <cfg:file type="script">/Commands/ValidateTitleFieldCommand.js</cfg:file>
      <cfg:file type="reference">ValidateTitleField.Interface</cfg:file>
    </cfg:fileset>
    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
  </cfg:group>
  <cfg:group name="ValidateTitleField.Views.ValidateTitleFieldPopup">
    <cfg:fileset>
      <cfg:file type="script">/Views/ValidateTitleFieldPopup.js</cfg:file>
      <cfg:file type="style">/Views/ValidateTitleFieldPopup.css</cfg:file>
    </cfg:fileset>
    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
  </cfg:group>
</cfg:groups> 
```

[...]

```
 <ext:editorextension target="CME">
    <ext:editurls />
    <ext:listdefinitions />
    <ext:taskbars />
    <ext:commands />
    <ext:commandextensions>
      <ext:commands>
        <ext:command name="Save" extendingcommand="ValidateTitleField"/>
      </ext:commands>
      <ext:dependencies>
        <cfg:dependency>ValidateTitleField.CommandSet</cfg:dependency>
      </ext:dependencies>
    </ext:commandextensions>
    <ext:contextmenus />
    <ext:lists />
    <ext:tabpages />
    <ext:toolbars />
    <ext:ribbontoolbars />
  </ext:editorextension> 
```

[...]

```
<commands>
  <cfg:commandset id="ValidateTitleField.Interface">
    <cfg:command name="ValidateTitleField" implementation="Company.Extensions.ValidateTitleFieldCommand"/>
  </cfg:commandset>
</commands> 
```

然后在我的命令实现（JS）中，我使用以下方法调用“原始”方法：

```
Company.Extensions.ValidateTitleFieldCommand.prototype._isAvailable = function ValidateTitleFieldCommand$_isAvailable(selection) {
    console.debug("Is Available called");
    return $cme.getCommand("Save")._isAvailable(selection);
}; 
```

最后，在 _execute 方法的深处：

```
if (!failed)
    return $cme.getCommand("Save")._execute(selection, pipeline);
else {
    this.loadPopup();
} 
```

希望这可以帮助，

ñ

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:16:15.723

`implementation`您的配置文件指向的不匹配：

```
<commands>
    <cfg:commandset id="CommandsExtensions.Interface">
        <cfg:command name="ExtendCheckOut" 
                     implementation="CommandsExtensions.ExtendCheckOut"/>
    </cfg:commandset>
</commands> 
```

以及实际的 JavaScript 代码：

```
Extensions.ExtendCheckOut = function Extensions.ExtendCheckOut() { 
```

您可能希望将配置文件更改为：

```
 <cfg:command name="ExtendCheckOut" 
                     implementation="Extensions.ExtendCheckOut"/> 
```

# php - 刷新div后不出现ckeditor

> ID：12457825
> 
> 赞同：0
> 
> 时间：2012-09-17T10:56:56.053
> 
> 标签：php, jquery, ckeditor

我正在尝试使用 php 上的 jQuery 适配器将初始值分配给 ckeditor。但是，每当 jquery 刷新包含 ckeditor 的 div 时，ckeditor 就会消失。这就是我定义编辑器的方式：

```
$ckeditor = new CKEditor();
$ckeditor->basePath  = 'ckeditor/' ;
CKFinder::SetupCKEditor( $ckeditor, 'ckfinder/' ) ;
$config['height'] = '300';
$initialValue = $result['field'];
$ckeditor->editor('CKeditor1', $initialValue, $config); 
```

这是jquery部分：

```
function myfunction(id) {
   jQuery('#mydiv').showLoading();
   var variable = "id=" + id;
   $.ajax({
       type: "POST",
       url: "requiredpage.php",
       data: yol,
       error: function () {
           alert('Errorrr!');
       },
       success: function (data) {
           jQuery('#mydiv').hideLoading();
           $('#mydiv').html(data);
       }
   });
} 
```

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:16:36.917

CKeditor 修改了 DIV，jQuery 也这样做了。但是由于 jQuery 对 CKEditor 结构一无所知，它破坏了编辑器的功能。

看看这里：[http ://www.fyneworks.com/jquery/CKEditor/](http://www.fyneworks.com/jquery/CKEditor/)

# linux - 在 vim 编辑器中输入 ^Q

> ID：12457826
> 
> 赞同：0
> 
> 时间：2012-09-17T10:56:57.383
> 
> 标签：linux, vim, ubuntu

我需要用 Ubuntu 替换文本文件中的 ^Q、^S 和 ^U。这些是 ctrl+Q 而不是 carat+Q 。由于 ^Q 是一个控制键命令，我无法输入它并且 carat+Q 不起作用。无论如何要输入 ^Q ^S 和 ^U

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:01:25.350

有一个转义序列。

对于 ^Q，键入 Ctrl+V Ctrl+Q。在某些系统上，您必须为其键入代码，例如：Ctrl+V 017。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:40:44.397

使用 Ctrl-V 的替代方法是使用有向图。有向图是 Unicode 值的两个字符表示，它可以包括控制字符。默认情况下，`^Q`is `D1`、`^S`is`D3`和`^U`is的有向图`NK`。要在插入模式下输入二合字母，请按 Ctrl-K，然后按二合字母，例如输入 use `<Ctrl-K>D1`。

文档说您还可以设置“有向图”选项并通过按第一个字符、退格键、第二个字符来输入有向图。不过，这似乎不适用于所有控制字符。

您可以使用二合字母来输入范围广泛的 Unicode 字符，并且可以重新定义现有字符或定义新字符。键入`:digraph`以获取当前定义的有向图的完整列表并`:h digraphs`查看完整帮助。

# javascript - 这是什么意思：SCRIPT1006：预期的'）'

> ID：12457827
> 
> 赞同：2
> 
> 时间：2012-09-17T10:57:01.987
> 
> 标签：javascript, asp.net-mvc-3

我有一个控制器：

```
 public ActionResult Detail(string title, string directory)
{

  ScormModule module = ZincService.ScormService.GetScormModule(title, directory);

  if (module != null)
  {
      ViewBag.TrainingModuleId = module.ScormModuleId;
      ViewBag.ScormModuleUrl = module.RelativeHtmlPath + '/' + module.EntryPointRef;
      ViewBag.WindowWidth = module.LaunchWidth;
      ViewBag.WindowHeight = module.LaunchHeight;
      ViewBag.title = module.Title;
      return View(module);
  }
  else
    return RedirectToAction("Index", "Scorm", new { area = "Admin" });
} 
```

然后是 Detail.aspx 文件，我在其中调用 javascript 函数：

```
<div class="col3">
    <a id="training-launch-button" href='javascript:OpenScormModuleWindow("<%: ViewBag.ScormModuleUrl %>", <%:  ViewBag.title %>, <%:  ViewBag.WindowWidth %>, <%:  ViewBag.WindowHeight %>);' class="button">Launch</a>
</div> 
```

然后打开ScormModuleWindow：

```
function OpenScormModuleWindow(trainingModuleUrl, title, width, height)
{
   console.log(trainingModuleUrl);
   trainingModuleWindow = window.open(trainingModuleUrl, title, "width=" + width + ", height=" + height);
   trainingModuleWindow.focus();
} 
```

`ViewBag.ScormModuleUrl = "/SCORM/SellingWindows/a001index.html"`

当我点击启动按钮时，我从来没有得到输出，`console.log(trainingModuleUrl);` 我得到了有问题的错误，它指向了我的代码中没有的一些奇怪的行？

```
var _waxArr; var o = document.getElementById('cosymantecbfw');
o.addEventListener('waxSetArr', function(evt) { _waxArr = evt.detail; }); 
function waxGetElement(i) { return _waxArr[i]; } 
```

我搜索了这段代码，但没有找到

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:58:53.717

请注意“co[ **symantec** ]bfw”。

我认为这可以追溯到浏览器中的诺顿插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T11:00:13.153

你的标题有空格吗？

如果是这样，试试这个

```
<div class="col3">
    <a id="training-launch-button" href='javascript:OpenScormModuleWindow("<%:ViewBag.ScormModuleUrl %>", "<%:  ViewBag.title %>", <%:  ViewBag.WindowWidth %>, <%:  ViewBag.WindowHeight %>);' class="button">Launch</a>
</div> 
```

# javascript - typeof window.close 对于 IE 是不同的

> ID：12457836
> 
> 赞同：2
> 
> 时间：2012-09-17T10:57:28.563
> 
> 标签：javascript, internet-explorer

今天我在 IE 和chrome 中输入时看到了奇怪的行为`window.close` ，我认为两者都是函数。`function close() { [native code] }``function () { [native code] }`

但是当我输入`typeof(window.close)`它时，它会`'object'`在 IE8 和`'function'`chrome 中显示。

为什么会有这种不同的行为？我可以使用哪些方法来检查 JavaScript 中变量的类型？是否有其他功能可以显示这种行为？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:58:33.603

[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)寻找你应该拥有的东西（即`"function"`）。

这里是可读性较差但官方的 ECMAScript 参考[。](http://bclary.com/2004/11/07/#a-11.4.3)

IE 8 根本不符合规范。这真的不是唯一的事件。

关于*如何测试变量是否是 IE8 上的函数？*问题，我自己无法测试，但这可能有效：

```
var myvar = window.close;
var isfunc = Object.prototype.toString.call( myvar ) === '[object Function]'; 
```

# wpf - WindowsForms TextBox 方法也粘贴在 WPF TextBox 中？

> ID：12457838
> 
> 赞同：1
> 
> 时间：2012-09-17T10:57:50.730
> 
> 标签：wpf, winforms, text, textbox

在 WindowsForms 我使用这个 samlpe 代码：

```
textBox.Paste("some text"); 
```

WPF中是否有具有相同功能的TextBox方法？或者有一个很好的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:02:32.807

使用[剪贴板](http://msdn.microsoft.com/it-it/library/system.windows.clipboard.aspx)类：

```
textBox1.Text = Clipboard.GetText(); 
```

或使用文本框的[SelectedText](http://msdn.microsoft.com/it-it/library/system.windows.controls.textbox.selectedtext.aspx)属性：

```
textBox1.SelectedText = "some text"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:52:32.250

```
 public static void Paste(this TextBox textbox, string textToInsert)
    {
        int caretIndex = textbox.CaretIndex;
        string textBoxContent;

        if (textbox.SelectedText.Length > 0)
        {
            textBoxContent = textbox.Text.Remove(caretIndex, textbox.SelectedText.Length);
        }
        else
        {
            textBoxContent = textbox.Text;
        }

        textbox.Text = textBoxContent.Insert(caretIndex, textToInsert);
        textbox.CaretIndex = caretIndex + textToInsert.Length;
    } 
```

# java - 将折线图转换为条形图

> ID：12457839
> 
> 赞同：0
> 
> 时间：2012-09-17T10:58:00.807
> 
> 标签：java, jasper-reports, ireport

我使用 ireport 制作了 Jasper 折线图。现在我想将此折线图转换为条形图。保持一切相同（参数、字段和数据）是否有办法甚至可以无缝地将其转换为条形图（只需最少的努力）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:12:16.780

我认为没有办法将一个图表转换为不同类型的图表。至少在 3.5.2 版中没有。右键单击图表，查看是否有“转换为”选项（对于某些控件，您可以这样做）。我猜没有。

如果没有，我会为您当前图表的所有设置截屏。然后创建一个新的条形图并像折线图一样填写设置。

希望这会有所帮助。

# vb.net - Vb.net 将整数 DBNULL 转换为 0 - 错误

> ID：12457840
> 
> 赞同：4
> 
> 时间：2012-09-17T10:58:24.200
> 
> 标签：vb.net, integer, dbnull

我有这个方法：

```
Private Function convertInteger(intInteger As Object) As Integer

    If IsDBNull(intInteger) Then
        convertInteger = 0
    Else
        convertInteger = cInt(intInteger)
    End If

End Function 
```

但它返回此错误：

未为类型“整数”和类型“dbnull”定义运算符“=”

我试图将 DBnull 值转换为 0..

但问题是我试图转换的值并不总是 DBnull .. 那么我应该如何处理呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:01:00.047

尝试这个

```
Private Function convertInteger(intInteger As Object) As Integer

    If intInteger = DBNull.Value Then
        Return 0
    End If

    Return intInteger

End Function 
```

正如 [Tim Schmelter] 所建议的，查看可空类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T10:27:43.683

尝试这个

```
Private Function convertInteger(ByVal intInteger As Object) as Integer
   If IsDBNull(intInteger) Then
       Return 0
   Else
       Return CInt(intInteger)
   End if
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-08T19:44:19.133

```
Private Sub readValue()
    Dim cSql As String
    Dim oCnn as OleDbConnection
    Dim oCmd as OleDbCommand
    Dim oDataReader as OleDbDataReader
    Dim valor as Integer

    oCnn.open()

    cSql = "SELECT FIELD_NAME FROM TABLE"
    oCmd = New OleDbCommand(cSql, oCnn)
    oReader = oCmd.executeReader

    if oReader.HasRows then
       oReader.read()
       valor = IIf(IsDBNull(oDataReader("FIELD_NAME")), 0, oDataReader("FIELD_NAME"))
    End If
End Sub 
```

# android - Android中的自定义图像滚动条

> ID：12457842
> 
> 赞同：1
> 
> 时间：2012-09-17T10:58:30.593
> 
> 标签：android, android-layout, android-ui

我正在开发一个应用程序，其中大部分 UI 都是自定义 GUI。由于我是 Android 新手，我发现自己很难让它们工作。现在我必须开发一个将用作图像滚动器的组件，带有指示器和上一个和下一个按钮来控制它们。我附上了下面的图片。谁能建议我如何处理它。

![在此处输入图像描述](../Images/8070ce32254af1b8f9604408854e539b.png)

我还获得了指向 android 视图页面指示器的链接，但这占据了我的整个屏幕。我如何定制最适合我的要求。

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:38:55.267

使用[分页画廊](https://github.com/sfarooq/PaginatedGallery)对您有帮助..

# c# - 在 C# 中记录登录、注销、系统锁定/解锁事件

> ID：12457852
> 
> 赞同：3
> 
> 时间：2012-09-17T10:59:08.180
> 
> 标签：c#, login, logout

我正在计划开发一个应用程序，它以 Windows（可能是一项服务）启动并静默记录用户的登录、注销和系统锁定/解锁事件。

如果有人可以给我一个提示来记录他们的总空闲时间（用户没有执行系统活动的时间），那就太棒了

我正在寻找一个预先开发的库或可以帮助我顺利完成项目的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T11:15:14.363

试试下面的代码......

```
private enum WTS
{
        CONSOLE_CONNECT = 1,
        CONSOLE_DISCONNECT = 2,
        REMOTE_CONNECT = 3,
        REMOTE_DISCONNECT = 4,
        SESSION_LOGON = 5,
        SESSION_LOGOFF = 6,
        SESSION_LOCK = 7,
        SESSION_UNLOCK = 8,
        SESSION_REMOTE_CONTROL = 9
 }

protected override void WndProc(ref System.Windows.Forms.Message m)
{
    switch (m.Msg) {
        case WM_WTSSESSION_CHANGE:
            switch (m.WParam.ToInt32) {
                case WTS.CONSOLE_CONNECT:
                    //MessageBox.Show("A session was connected to the console session.");

                    break;
                case WTS.CONSOLE_DISCONNECT:
                    //MessageBox.Show("A session was disconnected from the console session.");

                    break;
                case WTS.REMOTE_CONNECT:
                    break;
                //MessageBox.Show("A session was connected to the remote session.");
                case WTS.REMOTE_DISCONNECT:
                    break;
                //MessageBox.Show("A session was disconnected from the remote session.");
                case WTS.SESSION_LOGON:

                    break;
                //MessageBox.Show("A user has logged on to the session.")
                case WTS.SESSION_LOGOFF:
                    //MessageBox.Show("A user has logged off the session.");

                    break;
                case WTS.SESSION_LOCK:
                    //MessageBox.Show("A session has been locked.")

                    break;
                case WTS.SESSION_UNLOCK:
                    //MessageBox.Show("A session has been unlocked.")

                    break;
                case WTS.SESSION_REMOTE_CONTROL:
                    MessageBox.Show("A session has changed its remote controlled status. To determine the status, call GetSystemMetrics and check the SM_REMOTECONTROL metric.");
                    break;
            }

            break;
    }

    base.WndProc(m);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:10:01.210

```
Private Declare Function WTSRegisterSessionNotification Lib "Wtsapi32" (ByVal hWnd As IntPtr, ByVal THISSESS As Integer) As Integer
    Private Declare Function WTSUnRegisterSessionNotification Lib "Wtsapi32" (ByVal hWnd As IntPtr) As Integer

    Private Const NOTIFY_FOR_ALL_SESSIONS As Integer = 1
    Private Const NOTIFY_FOR_THIS_SESSION As Integer = 0
    Private Const WM_WTSSESSION_CHANGE As Integer = &H2B1

    Private Enum WTS
        CONSOLE_CONNECT = 1
        CONSOLE_DISCONNECT = 2
        REMOTE_CONNECT = 3
        REMOTE_DISCONNECT = 4
        SESSION_LOGON = 5
        SESSION_LOGOFF = 6
        SESSION_LOCK = 7
        SESSION_UNLOCK = 8
        SESSION_REMOTE_CONTROL = 9
    End Enum
    Shared FileName As String
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.Hide()
        WTSRegisterSessionNotification(Me.Handle, NOTIFY_FOR_ALL_SESSIONS)
        Timer1.Start()
        Me.Hide()
        FileName = Application.StartupPath + "/Data/TimeSheet_" + DateTime.Today.ToString("dd-MMM-yyyy") + ".txt"
        System.IO.File.Create(FileName)
    End Sub

    Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
        Select Case m.Msg
            Case WM_WTSSESSION_CHANGE
                Select Case m.WParam.ToInt32
                    Case WTS.CONSOLE_CONNECT
                        'MessageBox.Show("A session was connected to the console session.")
                        Timer1.Start()
                        System.IO.File.AppendAllText(FileName, "IN - " + lblTime.Text)
                    Case WTS.CONSOLE_DISCONNECT
                        'MessageBox.Show("A session was disconnected from the console session.")
                        System.IO.File.AppendAllText(FileName, "OUT - " + lblTime.Text + vbCrLf)
                        Timer1.Stop()
                    Case WTS.REMOTE_CONNECT
                        'MessageBox.Show("A session was connected to the remote session.")
                    Case WTS.REMOTE_DISCONNECT
                        'MessageBox.Show("A session was disconnected from the remote session.")
                    Case WTS.SESSION_LOGON
                        Timer1.Start()
                        System.IO.File.AppendAllText(FileName, "IN - " + lblTime.Text)
                        'MessageBox.Show("A user has logged on to the session.")
                    Case WTS.SESSION_LOGOFF
                        'MessageBox.Show("A user has logged off the session.")
                        System.IO.File.AppendAllText(FileName, "OUT - " + lblTime.Text + vbCrLf)
                        Timer1.Stop()
                    Case WTS.SESSION_LOCK
                        'MessageBox.Show("A session has been locked.")
                        System.IO.File.AppendAllText(FileName, "OUT - " + lblTime.Text + vbCrLf)
                        Timer1.Stop()
                    Case WTS.SESSION_UNLOCK
                        'MessageBox.Show("A session has been unlocked.")
                        Timer1.Start()
                        System.IO.File.AppendAllText(FileName, "IN - " + lblTime.Text)
                        If m_clsBalloonEvents Is Nothing Then
                            'allow our ballon class to create the event class for us, hooking into the notify icon that will 
                            'be associated with the balloons...
                            m_clsBalloonEvents = Balloon.HookBalloonEvents(niMain)
                            'add handlers for the events that we are concerned with in this application...
                            AddHandler m_clsBalloonEvents.BallonClicked, AddressOf BalloonClicked
                            AddHandler m_clsBalloonEvents.BallonHidden, AddressOf BalloonHidden
                        End If
                        Balloon.DisplayBalloon(niMain, "Today's Time", lblTime.Text, CType(IIf(False, Balloon.BalloonMessageTypes.Error, Balloon.BalloonMessageTypes.Info), Balloon.BalloonMessageTypes))
                    Case WTS.SESSION_REMOTE_CONTROL
                        MessageBox.Show("A session has changed its remote controlled status. To determine the status, call GetSystemMetrics and check the SM_REMOTECONTROL metric.")
                End Select

        End Select

        MyBase.WndProc(m)
    End Sub 
```

# java - 如何在 Map 中转换键/值

> ID：12457853
> 
> 赞同：3
> 
> 时间：2012-09-17T10:59:10.650
> 
> 标签：java

我有一个 Map，其中键是字符串，值是逗号分隔的值列表。

如何反转键/值对的顺序并分配给新 Map 以便键成为值，值成为键

所以 ：

> ```
> key   value
> key1  value1,value2,value3
> key2  value1,value4,value5        
> key3  value4,value2,value1 
> ```

变成：

> ```
> key       value
> value1    key1,key2,key3
> value2    key1,key3
> value3    key1
> value4    key2,key3
> value5    key2 
> ```

一种可能的解决方案是迭代每个值，然后迭代每个键以搜索相同的对应值。如果找到，则将此新键/值对添加到新 Map。这似乎效率低下？

解决方案（使用接受的答案实施）：

```
import java.util.HashMap;
import java.util.Map;

public class MapTransformer {

    public static void main(String args[]) {

        Map<String, String> m1 = new HashMap<String, String>();

        m1.put("key1", "value1,value2");
        m1.put("key2", "value5");
        m1.put("key3", "value4,value2,value1");

        Map<String, String> inverseMap = new HashMap<String, String>();
        for (Map.Entry<String, String> entry : m1.entrySet()) {
            for (String value : entry.getValue().split(",")) {
                if (inverseMap.containsKey(value))
                    inverseMap.put(value, inverseMap.get(value) + "," + entry.getKey());
                else
                    inverseMap.put(value, entry.getKey());
            }
        }

        for (Map.Entry<String, String> entry : inverseMap.entrySet()) {
            String key = entry.getKey();
            String value = entry.getValue();
            System.out.println(key+" "+value);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:07:11.213

看来您有很多要映射的地图。

这可以表示为

```
Map<K, List<V>> map1 = new LinkedHashMap<K, List<V>>();
Map<V, List<K>> map2 = new LinkedHashMap<V, List<K>>();
for (Map.Entry<K, List<V>> entry : map1.entrySet()) {
    for (V v : entry.getValue()) {
        List<K> list2 = map2.get(v);
        if (list2 == null)
            map2.put(v, list2 = new ArrayList<K>());
        list2.add(entry.getKey());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:11:27.920

```
Map<String,String> initialMap = ...
Map<String,String> inverseMap = new HashMap<String,String>();
for (Map.Entry<String,String> entry: initialMap.entrySet()) {
    for (String v : entry.getValue().split(",")) {
        if (inverseMap.containsKey(v)) 
          inverseMap.put(v,inverseMap.get(v)+","+entry.getKey());
        else
          inverseMap.put(v, entry.getKey());
    }
} 
```

请注意，这不会对逆映射中的字符串进行排序。为此，您然后通过逆映射拆分和重新加入字符串进行第二次迭代。

更好的解决方案是将数据建模为`SortedMap<String,SortedSet<String>>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T11:15:57.727

您可以使用 Google Guava 的[BiMap](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/BiMap.html)：

```
 BiMap<?, ?> bimap = HashBiMap. create();
 BiMap<?, ?> reverse = bimap.inverse(); // Do this only once after the BiMap has been created. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:49:49.870

如果值是列表，这可能会有所帮助：

```
Map<String, List<String>> reverseMap = new HashMap<String, List<String>>();

for(Entry`<String, List<String>>` entry : map.entrySet())
{
    for(String str : entry.getValue())
    {
        if(reverseMap.get(str) != null){
            reverseMap.get(str).add(entry.getKey());            
        } else {
            List<String> list = new ArrayList<String>();
            list.add(entry.getKey());
            reverseMap.put(str, list);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T11:02:05.650

```
Map<Value, Key> reverseMap = new HashMap<Value, Key>();
for (Map.Entry<Key, Value> entry : map) {
    reverseMap.put(entry.getValue(), entry.getKey());
} 
```

假设是每个（键，值）对在原始映射中都是不同的，因此在反转映射的过程中没有覆盖。

# css - 使视口之外的框可见

> ID：12457858
> 
> 赞同：1
> 
> 时间：2012-09-17T10:59:15.677
> 
> 标签：css

![在此处输入图像描述](../Images/e45d9fcd1d53254d781e511176a651d7.png) 此网页中的某些框是隐藏的，它们位于视口之外。我怎样才能“将它们向下推”以使它们完全可见？

谢谢！

# javascript - 变量直接使用时不一样

> ID：12457861
> 
> 赞同：0
> 
> 时间：2012-09-17T10:59:29.147
> 
> 标签：javascript, floating-point

Google Chrome 的 Javascript 引擎对这个原型中的变量值做了一些奇怪的事情。

原型定义为：

```
function matrix4def()
{
 this.m00=0;
 this.m01=0;
 this.m02=0;
 this.m03=0;
 this.m10=0;
 this.m11=0;
 this.m12=0;
 this.m13=0;
 this.m20=0;
 this.m21=0;
 this.m22=0;
 this.m23=0;
 this.m30=0;
 this.m31=0;
 this.m32=0;
 this.m33=0;
};

var value = new matrix4def(); 
```

`console.log(value)`向我们展示：

```
 m00: 1
 m01: 0
 m02: 0
 m03: 0
 m10: 0
 m11: 1
 m12: 0
 m13: 0
 m20: 0
 m21: 0
 m22: 1
 m23: 0
 m30: 0
 m31: 0
 m32: 0
 m33: 1 
```

使用`console.log(value.m00)`时会告诉我们：`-6.123031769111886e-17`. Doing`console.log(value); console.log(value.m00); console.log(value);`的第一次和第二次调用没有区别`console.log(value);`。

做`console.log(typeof(value.m00))`会告诉我们：`number`

我试过做`parseFloat(value.m00)`，但也没有显示 1... 将值存储`value.m00`到临时值也向我展示`-6.123031769111886e-17`了。

有谁知道这里发生了什么？

PS：我无法向您展示整个代码；它是渲染代码的一部分，对这些值有很多作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:11:08.653

这看起来像一个问题`console.log`，它向您显示对象的当前属性值，而不是记录对象时的属性值。您是否有任何代码围绕（之后）更改值的日志记录？

```
console.log(new matrix4def().m00) 
```

*将*记录`0`，而不是非常接近零的负数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:19:33.107

我怀疑您在运行完整脚本时遇到了这个问题（或者至少：在对对象的属性执行一些操作之后）。而且，鉴于您使用的是`parseFloat`，我假设这些值可以是十进制（浮点）值。
如果是这种情况，您应该仔细查看 JS 和浮点数的已知问题：

[要么在这里，要么在](http://www.mredkj.com/javascript/nfbasic2.html)
[这里](http://javascript.about.com/od/hintsandtips/a/Floating-Point-And-Javascript.htm)
[，也可能在这里，](http://ajaxian.com/archives/crock-on-floating-points-in-javascript)
[最后但并非最不重要：这里](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

不要忘记查看最后一页提到的文章

# c# - 异常后继续 SSIS 脚本任务

> ID：12457862
> 
> 赞同：0
> 
> 时间：2012-09-17T10:59:29.547
> 
> 标签：c#, sql-server-2008, ssis

我在我的 SSIS 包中创建了脚本任务。任务包含 FOR 循环，每次迭代都有一些处理。我在循环体周围添加了 try-catch 来手动处理异常。我希望循环在某些迭代发生异常后继续，但是当发生异常时，包失败。我希望它继续进行下一次迭代。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:54:43.467

只要你捕捉到每一个异常，你应该绝对没问题。虽然确保你使用

`Dts.TaskResult = (int)ScriptResults.Success;`

在您的代码末尾。

看看这个作为参考：

```
 public void Main()
    {   
        try
        {
            //Your piece of code that might fail
        }
        catch (Exception e)
        {
             //Handling the exception(s)
        }
        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

# event-handling - cocos2d中如何停止一个模态层下的所有CCTouch？

> ID：12457866
> 
> 赞同：5
> 
> 时间：2012-09-17T10:59:43.960
> 
> 标签：event-handling, cocos2d-iphone, modal-dialog, ccmenuitem

在我的 cocos2d 游戏中，我有一个“设置”按钮，它启动一个模态层，旨在锁定它下面的所有内容。为此，我使用了锁定所有 CCMenuItems 的菜单状态方法和覆盖层的组合；两者都在代码下方。

问题是这两种解决方案似乎都不适用于 CCScrollLayers。当我单击按钮（启动模式）时，CCScrollLayer 仍然可以滚动，这不是我想要的。

我想：

1.  按下按钮禁用所有触摸并禁用所有元素，包括 CCScrollLayers
2.  启动模态（仅允许触摸模态）

我试过了：

1.  使用 Touch 吞下所有触摸`CCTargetedTouchDelegate`

`[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];`

1.  我试过了

`self.isTouchEnabled = NO`在启动模式的层上

1.  我已经尝试调整该`MenuStatus`方法以使其适用于 CCScrollLayers，但它似乎不起作用。

我不确定我做错了什么。我的代码现在如下。

```
// My main layer which launches the Settings Modal Layer

#pragma mark - Lock/Unlock layers

-(void) doSettings
{    
    [self lockLayers];
    SettingsModalLayer *sml = [[[SettingsModalLayer alloc] init] autorelease];
    [sml showSettingsOnLayer:self closeBlock:^{[self unlockLayers];}];
}

-(void) lockLayers
{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
    [self MenuStatus:NO Node:self];   
}

-(void) unlockLayers
{
    [self MenuStatus:YES Node:self];
}

// Disabled/Enable layers
-(void) MenuStatus:(BOOL)_enable Node:(id)_node
{
    for (id result in ((CCNode *)_node).children) {        

        if ([result isKindOfClass:[CCMenu class]]) {
            for (id result1 in ((CCMenu *)result).children) {
                if ([result1 isKindOfClass:[CCMenuItem class]]) {
                    ((CCMenuItem *)result1).isEnabled = _enable;
                }
            } // next
        } 

    } // next

}

-(void) registerWithTouchDispatcher {
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:INT_MIN+1 swallowsTouches:YES];
}

- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Event: %@", event);
    for( UITouch *touch in touches )
    {
        CGPoint location = [touch locationInView: [touch view]];

        location = [[CCDirector sharedDirector] convertToGL: location];        
        CCLayer *gl = (CCLayer *)[self getChildByTag:4];
        [gl setIsTouchEnabled:NO];

    }
}
-(void) ccTouchCancelled:(UITouch *)touch withEvent:(UIEvent *)event
{

}

-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    [self removeFromParentAndCleanup:YES];    
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{

    return YES;
}

// Settings Modal Layer

-(void) showSettingsOnLayer:(CCLayer *)layer closeBlock:(void (^)())noBlock 
{
    CoverLayer *coverLayer = [[CoverLayer alloc] init];
    [layer addChild:coverLayer z:1000];
    [coverLayer runAction:[CCFadeTo actionWithDuration:kAnimationTime opacity:155]]; // smooth fade-in to dim with semi-transparency

... // Other stuff goes here

}

    // CoverLayer
    // This is meant to stop all touches, but it doesn't really work on CCScrollLayer

#define kDialogTag 1234
#import "CoverLayer.h"

// class that implements a black colored layer that will cover the whole screen 
// and eats all touches except within the dialog box child

@implementation CoverLayer
- (id)init {
    self = [super init];
    if (self) {
        [self initWithColor:ccc4(0,0,0,0) 
                      width:[CCDirector sharedDirector].winSize.width 
                     height:[CCDirector sharedDirector].winSize.height];
        self.isTouchEnabled = YES;
    }
    return self;
}

- (void)dealloc {
    [[CCTouchDispatcher sharedDispatcher] removeDelegate:self];
    [super dealloc];
}

- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event 
{
    CGPoint touchLocation = [self convertTouchToNodeSpace: touch];
    CCNode *dialogBox = [self getChildByTag: kDialogTag];

    // eat all touches outside of dialog box
    return !CGRectContainsPoint(dialogBox.boundingBox, touchLocation);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:16:52.197

您只需要了解**优先级**如何与 CCTouchDispatcher 一起工作。具有最小优先级值的层将首先接收触摸事件。现在您只需要相应地调整优先级。

创建一个阻塞层类，并在注册 CCTouchDispatcher 并覆盖 ccTouchBegan 时将其优先级设置为最低，并在其中返回 YES。

如果您查看 CCMenu 类，您会注意到默认优先级是 kCCMenuTouchPriority = -128，这就是菜单项具有更高触摸优先级的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T07:19:52.747

吞下所有触摸事件的层需要以比任何底层控件更高的优先级注册。通常这些是菜单项，默认优先级为 kCCMenuHandlerPriority = -128（首先处理最低值）。

吞咽层然后简单地处理它接收到的任何触摸，什么都不做。

弹出窗口上的任何控件都需要在吞咽层之前进行优先级排序，因此如果您使用菜单，则需要设置新的优先级。然后这些触摸将首先由项目处理（而不是吞咽层）。

显示注册优先级 -1024 的吞咽层、处理（忽略）所有触摸以及添加比吞咽层优先级更高的菜单项的相关函数：

```
// Ensure dialog background, which swallows all touches, is prioritised before normal menus (-128)
// Menus displayed on the dialog, then need to be prioritised before that.
#define kDialogSwallowTouchPriority -1024
#define kDialogMenuPriority -1032

- (void) registerWithTouchDispatcher {
    [[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:self
        priority:kDialogSwallowTouchPriority swallowsTouches:YES];
}

- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    // Swallow all touches
    return YES;
}

...

- (void)addCloseMenu
{
    CCSprite *close = [CCSprite spriteWithSpriteFrameName:@"closebutton.png"];
    CCMenuItem *closeMenuItem = [CCMenuItemSprite itemWithNormalSprite:close  
        selectedSprite:nil target:self selector:@selector(closeTapped:)];
    closeMenuItem.anchorPoint = ccp( 1, 1 );
    closeMenuItem.position = ccp( self.dialog.contentSize.width - 10, 
        self.dialog.contentSize.height - 10 );
    self.closeMenu = [CCMenu menuWithItems:closeMenuItem, nil];
    self.closeMenu.anchorPoint = ccp( 1, 1 );
    self.closeMenu.position = CGPointZero;
    // Set the priority above the swallowing layer
    self.closeMenu.touchPriority = kDialogMenuPriority;
    [self.dialog addChild:self.closeMenu];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T20:16:50.787

穷人的做法：添加一个 ccmenuitemsprite 和 ccmenu，并将 ccsprite 不透明度设置为 0，覆盖您不想点击的任何内容。当我不想弄乱触摸调度程序时，对我有用。

# c# - 通过单击按钮将多个值插入数据库中，使用实体框架选择复选框

> ID：12457869
> 
> 赞同：0
> 
> 时间：2012-09-17T11:00:01.780
> 
> 标签：c#, sql-server-2008

在数据库中，每个 ID 应该有多个项目。

```
protected void Button1_Click(object sender, EventArgs e)
{
  using (CMSEntities cmsmodel = new CMSEntities())
  {
    if (GridView1.Rows.Count > 0)
    {
      foreach (GridViewRow row in GridView1.Rows)
      {
        Order order = new Order();

        TextBox box1 = (TextBox)row.FindControl("itemTextBox");
        TextBox box2 = (TextBox)row.FindControl("priceTextBox");
        TextBox box3 = (TextBox)row.FindControl("txtQuantity");
        CheckBox chkBx = (CheckBox)row.FindControl("ChkAddToOrder");

        if (chkBx.Checked)
        {
          order.items = (box1.Text);
          order.price = Convert.ToInt32(box2.Text);
          order.quantity = Convert.ToInt32(box3.Text);
          order.dateoforder = Convert.ToDateTime(DateTime.Now.ToString());

          var types = (from p in cmsmodel.Items
                       //join w in cmsmodel.Orders on p.items equals order.items
                       where p.items == order.items
                       select p.itemid).FirstOrDefault();
          order.itemid = Convert.ToInt32(types);
          String name = (String)Session["UserDetails"];

          var types2 = (from p in cmsmodel.Logins
                        //join w in cmsmodel.Orders on p.UserName equals name
                        where p.UserName == name
                        select p.ID).FirstOrDefault();

          order.empid = types2;
          //string result="NotFullfill";
          //var type3 = (from p in cmsmodel.Status
          //             where p.result== result
          //             select p.statusid);

          order.statusid = 2;

          int a = Convert.ToInt32(box2.Text);
          int b = Convert.ToInt32(box3.Text);
          int totalprice = a * b;
          order.totalprice = totalprice;

          cmsmodel.Orders.AddObject(order);
          cmsmodel.SaveChanges();       
        }              

        Label1.Text = "inserted sucessfully";
        Label1.Visible = true;
      }
    }
  }
} 
```

但是我每个 ID 只得到一个项目，我应该得到每个 ID 的多个项目。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:28:43.643

```
Please try this ....           
 protected void Button1_Click(object sender, EventArgs e)
            {
              using (CMSEntities cmsmodel = new CMSEntities())
              {
                if (GridView1.Rows.Count > 0)
                {
                  foreach (GridViewRow row in GridView1.Rows)
                  {
                    Order order = new Order();

                    TextBox box1 = (TextBox)row.FindControl("itemTextBox");
                    TextBox box2 = (TextBox)row.FindControl("priceTextBox");
                    TextBox box3 = (TextBox)row.FindControl("txtQuantity");
                    CheckBox chkBx = (CheckBox)row.FindControl("ChkAddToOrder");

                    if (chkBx.Checked)
                    {
                      order.items = (box1.Text);
                      order.price = Convert.ToInt32(box2.Text);
                      order.quantity = Convert.ToInt32(box3.Text);
                      order.dateoforder = Convert.ToDateTime(DateTime.Now.ToString());

                      String name = (String)Session["UserDetails"];

                      var types2 = (from p in cmsmodel.Logins
                                    //join w in cmsmodel.Orders on p.UserName equals name
                                    where p.UserName == name
                                    select p.ID).FirstOrDefault();

                      order.empid = types2;
                      //string result="NotFullfill";
                      //var type3 = (from p in cmsmodel.Status
                      //             where p.result== result
                      //             select p.statusid);

                      order.statusid = 2;

                      int a = Convert.ToInt32(box2.Text);
                      int b = Convert.ToInt32(box3.Text);
                      int totalprice = a * b;
                      order.totalprice = totalprice;
             var types = (from p in cmsmodel.Items
                                   //join w in cmsmodel.Orders on p.items equals order.items
                                   where p.items == order.items
                                   select p.itemid).ToList();
        foreach(var x in types)
        {
         order.itemid = Convert.ToInt32(x);
        cmsmodel.Orders.AddObject(order);
       }
                      cmsmodel.SaveChanges();       
                    }              

                    Label1.Text = "inserted sucessfully";
                    Label1.Visible = true;
                  }
                }
              }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:15:15.403

您正在`Order`为每一行创建一个对象：`Order order = new Order()`在您的循环内。什么类型`order.items`？那不应该是一个集合之类的`List<OrderItem>`东西吗？

# java - 模拟场景中的业务逻辑放在哪里？

> ID：12457870
> 
> 赞同：1
> 
> 时间：2012-09-17T11:00:04.727
> 
> 标签：java, oop

我在模拟设置中有几个操作员。操作员具有位置、目标位置、任务和一些状态信息（例如能量水平）。模拟应执行模拟步骤并设置操作员的目标位置。在每个模拟步骤中，操作员都应该向目标位置移动，更新他的状态信息，并可能改变他的任务。

现在我想知道将这些更新逻辑放在哪里。我应该使用操作操作员状态的服务类还是`makeSimulationStep()`在操作员类中放置方法？一方面，第一种方法在某种程度上是一个贫乏的域模型，但另一方面，第二种方法似乎因为它将模拟相关的任务放在了操作符类中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:54:12.803

这看起来更像是游戏逻辑，但我会使用 Operator 类来提供有关 Operator 进行模拟步骤的信息，并将这些信息组合到 Animation 类中。

像这样的东西：

```
while (inAnimationLoop) {    
    for (Operator operator : operators) {
        operator.updateSimulation();
        operator.drawPosition();
    }
} 
```

# jsp - 如何在 extjs 3 中创建带有文本字段列的编辑器网格面板

> ID：12457875
> 
> 赞同：1
> 
> 时间：2012-09-17T11:00:12.837
> 
> 标签：jsp, extjs

我在该网格面板中使用 extjs 创建了一个编辑器网格面板，默认情况下，列应与文本字段一起加载

```
var Grid= new Ext.grid.EditorGridPanel({
    store:checkpoint,
    renderTo:'testgrid',
    autoHeight:true, 
    border:false,
    clicksToEdit: 1,
    columns: [ {header:'Check Points',
                 menuDisabled: true,
             dataIndex: 'checkpoints',
             valueField:'Id',
             width:300,
            },
             {
                 menuDisabled: true,
                 header:'Report',
                 dataIndex: 'developerreport',
                 renderer:  function (v,p) {
                     p.attr += ' ext:qtip=" click to edit"';
                     return v; 
                   } ,

                 editor:  new Ext.form.ComboBox({

                    hideTrigger: true, 
                    name: 'comment',
                    id:'comment',
                    mode: 'local',
                    store: names,
                    displayField: 'role',
                    triggerAction: 'all',
                    emptyText:'Select Role',
                    allowBlank:     false,
                    editable:       false,
                    forceSelection: true}),},
                   {header:'Comment',
                     menuDisabled: true,
                     dataIndex: 'developercomment',
                     renderer:  function (v,p) {
                        p.attr += ' ext:qtip=" click to add"';
                         return v;
                      } ,

                     editor: new Ext.form.TextField({
                        }),}],
              viewConfig: {
                    deferEmptyText: false,
                    forceFit: true,
                    emptyText: '<p style="font-size: 13px;color:red;">Please fill the above details</p>',
                    },

                }); 
```

我希望评论字段应该加载文本框，有什么办法吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:13:49.183

不可能立即完成`EditorGridPanel`，因为 AFAIK 它当时支持一个编辑器。可能最简单的解决方案是创建将内容呈现为 HTML 的渲染器，`input`然后将事件附加到该输入。您还可以使用`applyTo`config 属性为每个 HTML 输入创建组件。

使用的工作示例：http `applyTo`: [//jsfiddle.net/N2wYX/6/](http://jsfiddle.net/N2wYX/6/)

# sql - 使用 SQL 修复损坏的完整性层次树

> ID：12457877
> 
> 赞同：0
> 
> 时间：2012-09-17T11:00:16.757
> 
> 标签：sql, parent-child, common-table-expression, data-integrity

对于顶级组的 parentid 为 -1 的组，我有一个基本的父子表（parentid int，childid int）。我想确保组织结构中的更改不会破坏链条，如果确实如此，请修复它。这意味着如果存在顶级 parentid 不是 -1 的子父记录，那么我们需要修复它并将其 parentid 更改为 -1。

例如：

插入 tbl_x parentid, childid (-1,1), (-1,2), (2,3), (2,4), (2,5), (6,7), (7,8)

将导致第 1-5 组在顶部都以 -1 结束，但第 7 组需要修复，因为它在顶层以 6 结束 - 因此链接以某种方式断开，需要从 (6, 7) 到 (-1,7) 将第 7 组带到顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:13:49.337

所以你需要为那些`parentid`本身不是`childid`s的s创建一组行吗？

```
INSERT INTO tbl_x (parentid, childid)
SELECT -1, parentid as childid
FROM tbl_x
WHERE parentid NOT IN (SELECT childid FROM tbl_x) 
```

我认为应该这样做。

# knockout.js - KnockoutJS 中的 MVC 4 模型绑定

> ID：12457878
> 
> 赞同：0
> 
> 时间：2012-09-17T11:00:17.737
> 
> 标签：knockout.js

控制器代码：

```
public ActionResult Index()
{
PersonRepository repo = new PersonRepository();
PersonListModel lstPersons = new PersonListModel();
lstPersons.Persons = repo.GetAllPerson();
return View(lstPersons);
} 
```

实际的 Javascript 代码：

```
<script type="text/javascript"> 

var personListData = @Html.Raw(Json.Encode(Model.Persons));

var viewModel = {
personsModel : ko.observableArray(personListData)

}

ko.applyBindings(viewModel)

<script/> 
```

调试时的结果：

```
 var personListData = [
  {"PersonId":324783035204000026,"FirstName":"Gibbbs","BirthDate":"\/Date(1347647400000)\/"},{"PersonId":324126155204000001,"FirstName":"Russel","BirthDate":"\/Date(1347561000000)\/"}]; 
```

*问题 ：

1.  当模型数据被绑定时，它会显示我的人 ID 为：324783035204000026 但是当绑定过程完成时，它会将 PersonId 更改为：324783035204000000 和 324126155204000001 到 324126155204000000

2.  日期数据也没有正确绑定。

那么背后的主要原因是什么？

如果您对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:00:18.737

1.  数字 324783035204000026 太大而无法用 JavaScript 准确表示，因此最后两位数字被丢弃。您可以通过将`PersonId`您的类中的属性`PersonListModel`设置为字符串而不是十进制或当前的任何值来解决此问题。

    如果您无法修改`PersonListModel`该类，无论出于何种原因，您都应该创建一个名为 的新类，该类`PersonListModelClient`具有 JavaScript 代码所需的属性子集，然后将数据从每个类复制`PersonListModel`到 的新实例中`PersonListModelClient`，然后进行编码它们改为 JSON。

2.  这是因为日期在 JSON 中没有标准表示，因此微软发明了一种格式，看起来像`"\/Date(1347647400000)\/"`，其中日期被编码为字符串。您有两种选择：如果您只想向用户显示日期，您可以使用与以前相同的方法，将`BirthDate`属性更改为字符串，并使用该`DateTime.ToString`方法在服务器端进行格式化。或者，您可以[使用这个问题的答案](https://stackoverflow.com/questions/206384/how-to-format-a-json-date/2316066#2316066)，它展示了如何将特殊格式的字符串转换为常规的 JavaScript Date 对象。

# iphone - iPhone下周的最后一个日期

> ID：12457879
> 
> 赞同：0
> 
> 时间：2012-09-17T11:00:26.397
> 
> 标签：iphone, nsdate, nscalendar

我想得到下周的最后一天。这是我使用的代码..

```
NSCalendar *gregorian11 = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];  
NSDateComponents *components1 = [gregorian11 components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today1];
[components1 setDay:([components1 day]-([components1 weekday]-1)+14)];

NSDate *lastdayOfNextWeek = [gregorian11 dateFromComponents:components1];
NSDateFormatter *dateFormat_first = [[NSDateFormatter alloc] init];
[dateFormat_first setDateFormat:@"dd/MM/yyyy :EEEE"];
NSString *dateString_first = [dateFormat_first stringFromDate:beginningOfWeek1];

NSLog(@"last_date: %@", dateString_first); 
```

输出：`last_date: 30/09/2012 :Sunday`

现在，我想知道这是正确的方法还是你们有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:45:35.447

```
Hey Check out this Code.....:)

 //Week End Date

    NSCalendar *gregorianEnd = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    NSDateComponents *componentsEnd = [gregorianEnd components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today];

    int Enddayofweek = [[[NSCalendar currentCalendar] components:NSWeekdayCalendarUnit fromDate:today] weekday];// this will give you current day of week

    [componentsEnd setDay:([componentsEnd day]+(7-Enddayofweek)+1)];// for end day of the week

    NSDate *EndOfWeek = [gregorianEnd dateFromComponents:componentsEnd];
    NSDateFormatter *dateFormat_End = [[NSDateFormatter alloc] init];
    [dateFormat_End setDateFormat:@"yyyy-MM-dd"];
    dateEndPrev = [dateFormat stringFromDate:EndOfWeek];

    weekEndPrev = [[dateFormat_End dateFromString:dateEndPrev] retain];

    //Convert the nsdate to nsstirng for Query

    strWeekEndQuery =[dateFormat stringFromDate:weekEndPrev];
    NSLog(@"%@",strWeekEndQuery); 
```

# linux - 检查 OpenCV 是否使用 TBB 编译

> ID：12457885
> 
> 赞同：13
> 
> 时间：2012-09-17T11:00:43.543
> 
> 标签：linux, opencv, tbb

如何检查安装在我的 Linux 机器上的 OpenCV 库是否针对 TBB 库编译？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T17:45:33.773

**使用ldd**打印 *libopencv_core* 的共享库依赖项：

```
ldd /usr/local/lib/libopencv_core.so 
```

您应该会在列表中看到 TBB。

如果你在 Mac OS X 上，等效的是**otool -L**，在我的系统上它输出：

```
/Users/karlphillip/installers/OpenCV-2.4.2/build/lib/libopencv_core.2.4.dylib (compatibility version 2.4.0, current version 2.4.2)
libtbb.dylib (compatibility version 0.0.0, current version 0.0.0)
/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

所以根据上面的输出，我的 OpenCV 安装是为支持 TBB 而构建的。;D

# php - 如何使用 Xapian 同时按相关性和价值进行排序？在 PHP 中

> ID：12457886
> 
> 赞同：1
> 
> 时间：2012-09-17T11:00:48.007
> 
> 标签：php, indexing, xapian

我在 Xapian 中有一个索引，每个文档都有一个我想在排序时使用的值 (dinstinct)。

问题是当我使用时：

```
$enquire->set_sort_by_value_then_relevance(1); 
```

Xapian 将仅按值排序，或者如果我使用：

```
$enquire->set_sort_by_relevance(); 
```

Xapian 将仅按相关性排序。

我想按 50% 相关性 + 50% 价值排序，混合这种类型的排序，而不是一个接一个。

我可以用 Xapian 做这个吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T16:19:01.287

对于这类问题，您需要做的是使用 PostingSource 来影响提供给 Xapian 排名算法的文档权重。如果您的 PostingSource 使用来自文档值的权重，那么这些将与最终权重和排序中的概率相关性一起考虑。

您应该阅读有关 PostingSources的[介绍](http://xapian.org/docs/postingsource.html)，其中包括一个示例（在 Python 中），该示例非常接近您想要在此处执行的操作。（如果你重写 WeightSource 类以从 get_weight() 返回文档值，并为 get_maxweight() 提供合适的实现，你会得到你想要的。）

我从来没有在 PHP 中这样做过，但据我所知，它应该可以工作——所以如果没有，那将被认为是一个错误，你应该报告它。

# javascript - 将完成的总单词加在一起

> ID：12457887
> 
> 赞同：0
> 
> 时间：2012-09-17T11:00:49.767
> 
> 标签：javascript, jquery

在我的拼写游戏中，有 3-6 个不同大小的单词。一旦在网格中完成了一定数量的单词，网格的其余部分就会消失。我希望它把所有的字长品种加起来，而不是只考虑一个。例如，一旦完成两个单词，我现在就可以淡出。问题是只有当两个、三个字母的单词完整或两个四字母的单词完整等时它才会消失。

```
var completeLetters = $('.wordglow2').length;
var threeLetter = (completeLetters / 3);
var fourLetter = (completeLetters / 4);
var fiveLetter = (completeLetters / 5);
var sixLetter = (completeLetters / 6);

if (threeLetter == 2) {
    $('table').fadeOut(2000);
}
if (fourLetter == 2) {
    $('table').fadeOut(2000);
}
if (fiveLetter == 2) {
    $('table').fadeOut(2000);
}
if (sixLetter== 2) {
    $('table').fadeOut(2000);
} 
```

有没有一种方法可以让变量组合所有单词，然后为此创建一个 if 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:09:32.943

首先 - 我建议你这样做是错误的 - 你是从游戏的 HTML/CSS 表示中确定游戏状态。我建议您创建一个表示游戏状态的对象，然后使用该对象来确定您需要对 HTML/CSS 表示进行的操作。这也将使您在这里尝试做的事情变得更加容易。

例如，您最终可能会说...

```
if (gamestate.wordscomplete == 3) {//fade board//} 
```

...这比浏览 HTML 更令人愉快。但我离题了...

好的，所以当它是正确的时候，这个类`wordglow2`会被添加到一个*字母中。*网格中的每个都`<tr>`可以包含一个单词。所以...

```
function gamestate() {
  var words = []; //new array to store completed word counts
  var wordscompleted = 0; //overall word count
  //create an entry for 3,4,5, and 6 letter words
  for (var wc = 3; wc <=6 ; wc++) {words[wc] = 0;}

  $('table.tablestyle > tr').each( function(i,el) {
    // get the number of complete letters in this row
    var wordlength = $(el).find('.wordglow2').length; 
    if (wordlength >=3 && wordlength <= 6) { 
      // a completed word should not be outside of this range anyway
      words[wordlength]++; //increment the appropriate counter
      wordscompleted++; //increment overall counter
    }
  });
  //return a gamestate object 
  return { wordscompleted : wordscompleted , words : words };
}; 
```

上面的函数将查看游戏表中的每一行并计算`wordglow2`单元格的数量。如果它在 3 和 6 之间，那么总计数器会增加，并且每个字长的计数器也会增加。

它可以如下使用...

```
var gs = gamestate();

gs.wordscompleted //total words completed
gs.words[3]       //total 3-letter words completed
gs.words[4]       //total 4-letter words completed etc etc 
```

**更新**

[http://jsfiddle.net/HZX6k/6/](http://jsfiddle.net/HZX6k/6/)

这个 fiddle 只是使用一个全局对象来跟踪游戏状态，它会随着 3、4、5、6 个字母计数单词中的每一个而增加计数和计数。

# c++ - 将数据从 Delphi DLL 传递到 C++ 应用程序

> ID：12457888
> 
> 赞同：0
> 
> 时间：2012-09-17T11:00:58.787
> 
> 标签：c++, delphi, dll, delphi-2009

我有一个用 Delphi 编写的 DLL，它应该确定一些值，然后将结果传递回称为 DLL 的 C++ 应用程序。

要传递回 C++ 应用程序的数据是一组四个整数值（但将来可能还会有字符串值）。

为此，我需要将这些整数值声明为在调用应用程序和 DLL 之间共享。

在 C++ 应用程序端，我可以这样做（根据[http://msdn.microsoft.com/en-us/library/h90dkhs0%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/h90dkhs0%28v=vs.80%29.aspx)）：

```
#pragma data_seg(".SHARED")

int value1;
int value2;
// ...
int valueN;
#pragma data_seg() 
```

如何在 Delphi 2009 中做同样的事情（声明 value1-N 将存储在共享内存中）？

更新，18.09.2012：我决定使用命名管道来实现注入的 DLL 和外部世界的通信。

但在我可以使用命名管道之前，我需要解决以下问题。

目前，该过程如下所示：

1) DLL 被注入到遗留应用程序中。

2) DLL 从遗留应用程序中提取一些数据。

3) DLL 被卸载。

我需要对其进行修改，使其像这样工作：

1) DLL 被注入到遗留应用程序中。2）DLL启动一个循环，如

```
bool running = true;
while (running)
{
    command = receiveCommandFromInvokingApp();
    if ("GET_COORDINATES".equals(command))
    {
        // Read coordinates of some cell in the grid
        // Then communicate it via some channel to the outside world
    }
    else if ("READ_CELL_VALUE")
    {
        // Read value of some cell in the grid
        // Then communicate it via some channel to the outside world
    }
    else if ("EXIT")
    {
        // Close the communication channel
        // Perform cleanup work
        running = false;
    }

    // Sleep for, say, 500 milliseconds in order to avoid 100 % CPU usage
} 
```

receiveCommandFromInvokingApp 读取从调用应用程序（从命名管道或任何其他合适的通道）发送的下一个命令。

3）当调用应用程序发送EXIT命令时，DLL停止循环。

假设我有以下 DLL 代码：

```
procedure DllMain(reason: integer) ;
begin
  if reason = DLL_PROCESS_DETACH then
    OutputDebugString('DLL PROCESS DETACH')
  else if reason = DLL_THREAD_ATTACH then
    OutputDebugString('DLL THREAD ATTACH')
  else if reason = DLL_THREAD_DETACH then
    OutputDebugString('DLL THREAD DETACH')
  else if reason = DLL_PROCESS_ATTACH then
    OutputDebugString('DLL_PROCESS_ATTACH')
  end;
end; (*DllMain*) 
```

循环应该放在哪里（在哪个分支）？

把它代替是明智的`OutputDebugString('DLL THREAD ATTACH')`吗？

2012 年 9 月 19 日更新：

我的系统设计发生了变化，现在我通过命名管道将数据从 Delphi DLL 发送到 C# 应用程序。

德尔福代码：

打开命名管道：

```
function OpenNamedPipe() : THandle;
var
  hPipe : THandle;
  name : string;
  connectResult : LongBool;
begin
  name := '\\.\pipe\delphi-to-cpp';
  hPipe := CreateNamedPipe(PChar(name),
    PIPE_ACCESS_DUPLEX,
    PIPE_TYPE_MESSAGE or PIPE_READMODE_MESSAGE  or PIPE_NOWAIT,
    PIPE_UNLIMITED_INSTANCES,
    4096 ,
    4096 ,
    4096 ,
    NIL);
  if (hPipe = INVALID_HANDLE_VALUE) then
  begin
    OutputDebugString(PChar('Invalid pipe handle: ' + IntToStr(GetLastError)));
    OutputDebugString(PChar(SysErrorMessage(GetLastError)));
  end;

  OutputDebugString(PChar('OpenNamedPipe, 1'));
  connectResult := ConnectNamedPipe(hPipe, NIL);
  OutputDebugString(PChar('connectResult: ' + BoolToStr(connectResult)));
  OutputDebugString(PChar(SysErrorMessage(GetLastError)));

  OpenNamedPipe := hPipe;
end; 
```

发送消息：

```
procedure SendMessageToNamedPipe(hPipe:THandle; msg:string);
var
  dwWrite : DWORD;
  lpNumberOfBytesWritten : LongBool;
  MsgLength: DWORD;
  MsgW : PWideChar;
begin
  MsgW := PWideChar(msg);
  MsgLength := lstrlenW(MsgW) * SizeOf(WideChar);
  lpNumberOfBytesWritten := WriteFile(hPipe, MsgW, MsgLength, dwWrite, NIL);

  if not lpNumberOfBytesWritten then
  begin
    OutputDebugString(PChar('Sending error: ' + SysErrorMessage(GetLastError)));
  end
  else
  begin
    OutputDebugString(PChar('Message sent, dwWrite: ' + IntToStr(dwWrite)));
  end;
end; 
```

C# 代码，它应该读取 Delphi 应用程序发送的数据：

```
 NamedPipeClientStream pipeClient = new NamedPipeClientStream(".", "delphi-to-cpp",
      PipeDirection.InOut);

  new NamedPipeClientStream(".", "delphi-to-cpp",
      PipeDirection.InOut);

  Debug.WriteLine("Before pipeClient.Connect");

  this.IsRunning = true;

  pipeClient.Connect(5000);
  StreamReader reader = new StreamReader(pipeClient, Encoding.Unicode);

  while (this.IsRunning && pipeClient.IsConnected)
  {
      string message = reader.ReadLine();

      Thread.Sleep(250);
  }
  reader.Close(); 
```

此代码不起作用 -`reader.ReadLine();`不返回任何内容。

如果我尝试将数据按字节读取到`char[]`缓冲区中，则该缓冲区在读取结束时包含垃圾。

请注意，C# 应用程序实际上正在接收 SOMETHING，我只是不知道如何从流中提取文本。

我应该如何修改我的代码（Delphi、C# 或两者），以便 Delphi 应用程序发送的文本正确到达 C# 端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:11:11.010

Delphi 工具链没有内置该功能。

为了在 Delphi 中做类似的事情，您需要使用内存映射文件 API，或其他一些进程间通信 (IPC) 机制，例如管道、套接字、Windows 消息等。

或者，您可以简单地从您的 Delphi DLL 加载 C++ DLL。C++ DLL 可以访问共享数据，并且您的 Delphi DLL 可以调用 C++ DLL 中读取和写入共享数据的函数。但是，共享数据确实非常不适合这项任务。使用IPC更合适。

您在问题中没有说清楚的是，这里有两个过程。因此需要IPC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:14:23.440

在我看来，这个解决方案有很多问题。将全局变量用作返回机制的想法已经是一个非常糟糕的想法 - 如果多个进程正在运行，则不是线程安全/复杂的。还值得注意的是，DLL 的所有实例都将共享这个空间。

我肯定会：

1.  将一个空结构从 C++ 传递到 Delphi 端填充的 delphi（或者你需要使用缓冲区而不仅仅是指针的字符串）或

2.  将指向字段的指针传递给 delphi 进程并允许 DLL 更新这些指针处的值或

3.  将这些结果存储在 DLL 中的全局变量中，并创建单独的 FUNCTION 调用以从 C++ 中检索值。即 int getValueA()

# lotus - Lotus Notes Designer 8.5.3，在代码部分看不到 Web 服务？

> ID：12457890
> 
> 赞同：1
> 
> 时间：2012-09-17T11:01:05.320
> 
> 标签：lotus

我在 Notes 8.5.3 中看不到创建 Web 服务提供者或使用者的选项

我可以进入设计器中的“代码”选项菜单，但没有看到“Web 服务提供商”选项。

有任何想法吗 ？我觉得这很奇怪，我重新安装了，仍然没有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:28:01.240

其他一些观点从大纲中删除了 Web 服务（例如 XPages）。转到“窗口 -> 打开透视图 -> Domino 设计器”。

如果这不能把它带回来，试着做一个重置视角。

# jquery - 从表单中的所有选择元素中获取所有选择的选项元素

> ID：12457891
> 
> 赞同：17
> 
> 时间：2012-09-17T11:01:07.663
> 
> 标签：jquery, select, jquery-selectors

大家好，感谢您花时间回答我的问题。

我有一个带有“skillLevel”类的 6 个选择元素的表单。我需要使用 jQuery 获取（最好在数组中）每个选择元素的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-17T11:05:51.027

您可以使用`map`方法：

```
var arr = $('select.skillLevel').map(function(){
              return this.value
          }).get() 
```

`arr`是一个值数组。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-17T11:07:03.840

```
 var array = [];
    $('.skillLevel  option:selected').each(function() {
        array[ $(this).val()] = $(this).text();
    }); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-17T11:06:10.673

像这样的东西会为你做到这一点。

```
var val = new Array();

$("select.skillLevel").each(function(){
    val.push(this.value);
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T11:09:05.847

用它作为

```
$(".skillLevel option:selected").each(function () {
            alert($(this).text());
}); 
```

看看这个小提琴

[http://jsfiddle.net/zF6HY/1/](http://jsfiddle.net/zF6HY/1/)

礼貌：[JqueryApi](http://api.jquery.com/selected-selector/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T11:11:33.477

希望这个小提琴对您有所帮助： [所有选定的选项](http://jsfiddle.net/ravi441988/AqUN7/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-31T23:44:46.767

你也可以`map`像这样使用带有 ES6 箭头函数的方法。

```
var arr = $('select.skillLevel').get().map(e => e.value) 
```

正如在接受的答案中一样，`arr`是一个值数组。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-17T11:06:58.610

我认为你必须使用`$(".skillLevel")`来选择你想要的值的所有元素，然后遍历它们，并使用`.val()`来提取每个元素的值，并按照你的意愿对待它。

希望这可以帮助！

# asp.net - .net mvc 4.5 - 在运行时向数据模型添加“必需”属性

> ID：12457896
> 
> 赞同：0
> 
> 时间：2012-09-17T11:01:20.797
> 
> 标签：asp.net, validation, model

我有这个数据传输模型：

```
[DataContract]
[Serializable]
class PersonDTO {

    [DataMember(Name="id")]
    public int id { get; set; }

    [DataMember(Name="name")]
    [Required]
    public string name { get; set; }

} 
```

我希望能够将此模型用于创建和更新操作。这里的问题是，当创建一个新的 Person 时，它的 id 还不存在（因此缺少 [Required] 注释）。然而，在更新时，id 已经存在，并且需要是必填字段。

在我的控制器中，我有以下操作：

```
public class PersonController {

    [HttpPut]
    public void UpdatePerson(PersonDTO person) {}

    [HttpPost]
    public void CreatePerson(PersonDTO person) {}

} 
```

有没有办法为这两个操作使用相同的 DTO，但为其中一个操作设置字段“id”，所以 ModelState 失败？我知道我可以通过检查手动完成`person.id == null`，但我正在寻找一个自动解决方案，如果存在的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:16:36.813

我不知道您是否还需要这方面的帮助，但我偶然发现了您的问题，因为我正在寻找类似的答案。我刚刚想出了一个简单的方法来实现你正在寻找的东西。这有点作弊，但它有效。

在页面标记中，只需将“data_val_required”添加到相关字段的样式中，然后添加所需的错误消息。

例如：

```
@Html.PasswordFor(model => model.OldPassword, 
                           new { data_val_required="The Old Password field is required." }) 
```

客户端验证器选择它并在验证摘要中显示适当的消息。

在服务器端，您必须记住在代码中验证您的模型并手动检查字段的内容，因为您不能依赖客户端验证来工作（例如，JavaScript 可能已被禁用。）

我想这样做的原因是在更改密码页面中。我的模型包含三个字段：

1.  旧密码
2.  新密码 [必填]
3.  确认密码 [必填]

仅当用户自己决定更改密码时才需要旧密码。如果我强制用户重置他/她的密码（因为他们丢失了旧密码），则不需要旧密码（因为他们不知道！）

因此，如果用户自愿更改密码，我在客户端有一些代码发出“data_val_required”，如果不是，则删除整个字段。

我在服务器端也有代码来检查这两种情况。

希望这对您有所帮助。

# json - API 响应中是否仍可使用关键字标签？

> ID：12457897
> 
> 赞同：1
> 
> 时间：2012-09-17T11:01:23.653
> 
> 标签：json, youtube-api

对单个视频的数据进行请求，例如：

```
http://gdata.youtube.com/feeds/api/videos/K-YBQ_at_qU?v=2&alt=jsonc 
```

用于生成包含 tags 属性的 JSON 对象。这有改变吗？我目前没有在我要求的任何视频中看到该物业。

我确实尝试在参考页面上搜索变更日志，但没有发现任何东西，并且由于显而易见的原因，“标签”是一个相当常见的词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:08:27.963

除非您在获得授权的情况下使用视频所属的帐户提出请求，否则它们将不再可用。

[这是在http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)上宣布的，并且最近也更新了文档。

# ajax - APPMOBI：Ajax 在模拟器上运行良好，但在设备上不运行？

> ID：12457901
> 
> 赞同：1
> 
> 时间：2012-09-17T11:01:35.020
> 
> 标签：ajax, appmobi

我写了一个这样的函数

```
function send(url, data){

            $.ajax({
                url: url,
                data: data,
                cache: false,
                success: function(msg){
                 alert('success :'+msg);   
                },
                error: function(msg){
                    alert('error: '+msg);
                },
                complete: function(msg){
                    alert('complete: '+msg);
                }

            });

            alert('sending to :'+url +'   using: '+data);
        } 
```

使用模拟器时效果很好，服务器可以读取数据。

但是当我将它上传到云端并应用到 iphone / ipad 上时，服务器无法获取数据。

任何想法都值得赞赏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:23:11.943

这可能是不使用 XHR.js 的问题，或者如果您没有将其正确放置在您的代码库中。

XHR.js 所做的是克服了一些跨域问题，以及其他阻止浏览器-esk 环境与服务器通信的策略。没有更多上下文来了解您如何尝试加载代码，或者您的 URL 是什么，或者目前的其他内容，比如“msg”是什么类型的数据，例如 xml、json、string、html、其他......很难给你一个明确的答案。

就其`$.ajax()`本身而言，目前看起来还不错。

另请注意.. 模拟器非常有用，是的，它模拟了事物在您的设备中的外观和行为的概念.. 但归根结底，它只是一个浏览器。它用完了铬。很多在浏览器中工作的东西在移动设备上的工作方式可能不同，它们可以工作，但有时你需要补偿差异。

# java - Java - 如何在关闭的同一位置显示对话框？

> ID：12457903
> 
> 赞同：2
> 
> 时间：2012-09-17T11:02:01.593
> 
> 标签：java, swing, dialog, escaping, location

我有一个在 Java 中扩展 EscapeDialog 的对话框类。如何在关闭的屏幕上获取位置，并在用户再次打开对话框时显示在同一位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:15:19.137

您可以侦听 windowClosing 事件并将对话框位置保存在某处：内存中、磁盘上、...

```
 frame.addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent e) {
          // save the dialog.getLocation()
        }
    }); 
```

然后，下次打开对话框时，从保存位置读取位置并`dialog.setLocation()`在显示之前调用。

# java - 我可以使用 JDO 流式传输查询结果吗？

> ID：12457906
> 
> 赞同：0
> 
> 时间：2012-09-17T11:02:29.763
> 
> 标签：java, jdo, datanucleus

我想导出数据库中的所有对象（行）。它们不能一次装入内存，所以我想流式传输它们而不是一次全部获取。哪种方法的内存占用少？JDO（Datanucleus 实现）是否支持流式传输？

在另一个项目中，我能够使用 jdbc ResultSet 和 100 的 fetchsize 来做到这一点。但是，如果可能的话，我想使用 JDO 的映射，而不是简单的 JDBC 实现。

编辑：我忘了说：我为 PersistenceManager 使用了强缓存，我可以禁用它吗？无论如何，数据都是只读的，不需要保留它。

编辑：查询代码：

调用Repository Method的服务方法用Springs注解@Transactional(readonly=true)注解，persistenceManagerFactory是Spring代理，try-catch-finally处理省略，已经说过的一级缓存强：

```
public class MyRepository extends AbstractRepository<MyItem> {
    public Collection<MyItem> retrieve(Object value) {
        return query("myfiel==:myvalue",value)
    }
}

public class AbstractRepository<T> {
    private Class<T> type;
    private PersistenceManagerFactory persistenceManagerFactory;

    public Collection<T> query(String query, Object value) {
        return createManager().newQuery(type, query).execute(value);
    }

    public PersistenceManager createManager() {
        return persistenceManagerFactory.getPersistenceManager();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:51:31.953

总结评论：用 JDO 和 1 级缓存无法解决 = 强。我评估为此类查询使用 Spring JdbcTemplate。

# git - 如何防止 Cygwin 上的 git 设置 core.filemode=true

> ID：12457910
> 
> 赞同：13
> 
> 时间：2012-09-17T11:02:49.967
> 
> 标签：git, cygwin

我在我的 Windows PC 上使用来自 Cygwin 安装的 git。尽管 cygwin 支持 NTFS 文件系统上的 Unix 权限位，但像我的 Eclipse 这样的本地 Windows 程序并不知道它们，因此由 Windows 程序创建的所有文件都设置了可执行位 ( `755`)。

我很少需要将具有可执行位设置的文件签入 Git 存储库。因此，我想`core.filemode=false`默认拥有。我在全局配置中设置了这个值，但不幸的是，这通常没有效果：如[文档](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)所述，`git clone`探测文件系统以查看它是否支持权限并`core.filemode`相应地设置*每个存储库*，因此我`core.filemode=true`在每个存储库配置中都有一个配置，覆盖我的所需的默认值。

有没有办法防止自动`git clone`设置`core.filemode`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:08:34.223

您可以设置 Bash，以便每次`cd`检查该目录是否为存储库并正确设置它。在你`~/.bash_profile`添加

```
PROMPT_COMMAND=pc
pc () {
  [ -d .git -a ! -g .git/config ] || return
  git config core.filemode 0
  chmod +s .git/config
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T01:53:49.850

`core.fileMode = true`可以使用[git hook](https://git-scm.com/docs/githooks)自动清除该设置。在这种情况下，我相信一个 post-checkout hook 是最好的选择，它会在任何时候检出分支或克隆 repo 时运行。`post-checkout`使用以下内容创建名为（无文件扩展名）的 bash 脚本：

```
#!/usr/bin/env bash

core_file_mode=$( git config --local core.fileMode )

if [[ "${OSTYPE}" == 'cygwin' && "${core_file_mode}" == 'true' ]]; then
    git config --local --unset core.fileMode
fi 
```

如果您希望将钩子应用于单个 repo，请将脚本放入`$GIT_DIR/hooks`（默认`$GIT_DIR`为`<path-to-your-repo>/.git`）。如果希望钩子适用于所有项目，请将以下条目添加到您的全局 gitconfig 文件中：

```
[core]
    hooksPath = '<path-to-folder-containing-your-hook(s)>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:47:04.883

通常的方法是使用 git 模板目录初始化或克隆你的 repo。

```
 git clone --template=<template directory> 
```

在该目录中，您可以指定一个配置文件，该文件将用作新初始化或克隆的 repo 的*本地*git repo 配置。

[OP oberlies](https://stackoverflow.com/users/1523648/oberlies) 报告[虽然](https://stackoverflow.com/questions/12457910/how-do-i-prevent-git-on-cygwin-to-set-core-filemode-true/12458548#comment19021021_12458548)它不适用于`core.filemode`and `core.ignorecase`, 对于[`git config`手册页](http://git-scm.com/docs/git-config.html)：

> [`git-clone`](http://git-scm.com/docs/git-clone.html)或[`git-init`](http://git-scm.com/docs/git-init.html)将在创建存储库时进行探测并`core.fileMode`在适当的情况下设置为 false。

# string - 将字符串划分为包括空分区的子字符串的算法

> ID：12457913
> 
> 赞同：1
> 
> 时间：2012-09-17T11:03:27.410
> 
> 标签：string, algorithm, partitioning

问题：
设 P 是将字符串 s 划分为相邻且可能为空的子字符串的所有可能方式的集合。我正在寻找一种优雅的算法来解决这个问题。

背景上下文：
给定一个字符串元组 (s, w)，如上所述定义 P(s) 和 P(w)。存在一个特定的分区 R ∈ P(s) 和 T ∈ P(w) 产生最少数量的子串 Levenshtein（插入、删除和替换）编辑。

示例：将
字符串“foo”划分为 5 个子字符串，其中 ε 为空子字符串：

```
[ε, ε, f, o, o]  
[ε, f, ε, o, o]  
[ε, f, o, ε, o]  
[ε, f, o, o, ε]

[f, ε, ε, o, o]  
[f, ε, o, ε, o]  
[f, ε, o, o, ε]

[f, o, ε, ε, o]  
[f, o, ε, o, ε]

[f, o, o, ε, ε] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:28:53.327

一个简单的递归方法怎么样？

```
def part(s, n, pre):
    if s == '':
        return [pre + '.' * n]
    elif n > 0:
        res = []
        if n > len(s):
            res += part(s, n-1, pre + '.')
        if len(s) > 0:
            res += part(s[1:], n-1, pre + s[0])
        return res 
```

结果：

```
>>> print part('foo', 5, '')
['foo..', 'fo.o.', 'fo..o', 'f.oo.', 'f.o.o', 'f..oo', '.foo.', '.fo.o', '.f.oo', '..foo'] 
```

# php - 从函数内部打印二维数组

> ID：12457915
> 
> 赞同：0
> 
> 时间：2012-09-17T11:03:39.470
> 
> 标签：php, arrays, variables, multidimensional-array

我正在尝试从二维数组中创建一个列表，在每行中显示该位置的键和值。这是我制作的代码。

```
$array1=array(...);
$array2=array(...);
(...)
$array25=array(...); //this part works fine so I'm not posting all of it
$bigarray['array1']=$array1;
$bigarray['array2']=$array2;
//and so on. This also works as it should
$matrix=file(mylist.txt); //this file holds all the keys I want to print, with the format key1##key2

function printthelist($array)
{
    global $bigarray,$key1,key2;
    $line=explode("##",$array);
    $key1=$line[0];
    $key2=$line[1];
    echo 'Column:'.$key1.rtrim($key2).$bigarray[$key1][rtrim($key2)].'<br/>';
}

array_walk($matrix,'printthelist'); 
```

两个键都打印正确，但是当我尝试打印数组值时，它们只是不显示。我尝试使用固定值而不是变量作为键，它在函数内部和外部都有效。我一定错过了什么，我只是不知道是什么。

既然你问了，这里是其中一个数组的示例：

```
$ib=array();
$ib[4]='Diagnostics in hospitals';
$ib[5]='False positives';
$ib[6]='Risk Factors';
$ib[7]='Protect yourself from infections'; 
```

这是包含要打印的密钥的文件的内容：

```
other##16
invitro##9
ib##19
invitro##8
other##13
knowmore##14
psico##10
med##23
patients##19
patients##18
other##12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:28:32.803

我会以递归方式执行此操作 - 它适用于二维和二维数组：

```
function printArray($array)
{
    foreach($array as $key => $val)
    {
        if(is_array($val)
        {
            printArray($val);
        }
        else
        {
            // whatever you want really, using your code as example
            $line=explode("##",$array);
            $key1=$line[0];
            $key2=$line[1];
            echo 'Column:'.$key1.rtrim($key2).$bigarray[$key1][$key2].'<br/>';

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:21:23.440

尝试这个：

```
$array1=array(...);
$array2=array(...);
(...)
$array25=array(...); //this part works fine so I'm not posting all of it

global $bigarray;
$bigarray['array1']=$array1;
$bigarray['array2']=$array2;
//and so on. This also works as it should
$matrix=file(mylist.txt); //this file holds all the keys I want to print, with the format key1##key2

function printthelist($value, $key)
{
    global $bigarray;
    list($key1, $key2)=explode("##",$value);
    echo 'Column:'.$key1.rtrim($key2).$bigarray[$key1][$key2].'<br/>';
}

array_walk($matrix,'printthelist'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:16:03.783

我发现了问题。file() 函数从文本文件创建一个数组，将每一行放在所述数组的位置。但是，它不会剥离 EOL 字符。这意味着以这种方式导入的每个值最后都有一个“/n”。在任何函数中使用此数据之前，您需要使用 rtrim() 将其删除。注意：这也意味着 file() 函数总是返回一个字符串数组，即使文件只包含数字。此函数的文档显示，可以通过在文件名后添加一个额外的参数来省略 EOL 字符，但是，它不适用于所有版本的 PHP。

我已经编辑了代码，现在可以正常工作了。

谢谢大家的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:34:55.037

**更新：**

请尝试以下代码：

```
$matrix = file('mylist.txt');

function printthelist($array){
    global $bigarray;

    $line = explode('##', $array);

    $key1 = $line[0];
    $key2 = $line[1];
    echo 'Column: '.$key1.$key2.' : '.$bigarray[$key1][$key2].'<br/>';
}

array_walk($matrix, 'printthelist'); 
```

# treeview - TreeView 在 64 位 win7 上变得无响应，但在 windows XP 上工作

> ID：12457922
> 
> 赞同：0
> 
> 时间：2012-09-17T11:04:19.450
> 
> 标签：treeview, 32bit-64bit, windows-forms-designer

在使用 Visual Studio 2008 (.Net 3.5) 开发的 Windows 窗体应用程序中，对于所有三个 - x64 构建、x86 构建、任何 CPU：随着节点数量的增加（比如 2000+），TreeView 在 64 位 win7 上变得无响应。它停止识别鼠标点击，尽管箭头键可以展开或折叠节点。相同的应用程序（x86 build 和 Any CPU build）在 Win XP (sp3) 上运行良好。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:50:44.257

我不知道你的问题的原因。TreeView 控件本身或其他问题可能存在问题。

但我可以建议一个可能的解决方案。我们必须为我们的几个项目这样做。

既然您知道它在 32 位操作系统上运行良好，只需强制您的 EXE 在 32 位模式下运行（直到您找到解决问题的好方法/替代方法）。为此，您需要使用`CorFlags Conversion Tool`.NET framework 2.0 及更高版本附带的。

构建项目后，从 Visual Studio 命令提示符运行以下命令：

`CorFlags.exe "C:\YourProject\bin\Release\YourExecutable.exe" /32BIT+`
（根据需要替换路径和文件名）。

然后尝试再次运行您的 EXE 并重现问题，看看问题是否消失了。

以下文章可能对您有所帮助：

[http://msdn.microsoft.com/en-us/library/ms241064%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms241064%28v=vs.80%29.aspx)

[http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx)

祝你好运 ：）

# ruby-on-rails - Ruby on Rails：将新数据输入数据库

> ID：12457924
> 
> 赞同：0
> 
> 时间：2012-09-17T11:04:26.320
> 
> 标签：ruby-on-rails, ruby, database

我有一个页面，允许管理员用户通过在表单中​​输入详细信息来注册新用户。

```
<%= stylesheet_link_tag "signup" %>

<%= form_for(@user) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<div class="signup">
  <div class = "field">Username:  
  <%= f.text_field :username, :class => "username"  %></div>

</br>
  <div class = "field">Email:  
  <%= f.email_field :email, :class => "email"  %></div>

</br>
    <div class = "field">First Name:  
  <%= f.text_field :firstname, :class => "firstname"  %></div>

</br>
<div class = "field">Last Name:  
  <%= f.text_field :lastname, :class => "lastname"  %></div>

</br>

<div class="field">
    <%= f.label :admin %><br />
    <%= f.text_field :admin, :class => "admin" %>
  </div>

<div class = "field">
  <div class="actions">
    <%= f.submit "Register New User", :class => "button" %>
  </div>
</div>
</div>
<% end %> 
```

这是来自 admin_controller 的 new 和 create 操作：

```
def create

    @user = User.new(params[:user])
if @user.save

    respond_to do |format|

        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
end
      else
respond_to do |format|
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

def new
    @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end 
```

填写完表格，点击注册新用户，我回到主页，数据没有进入数据库。

编辑：点击注册新用户后的完整日志我可以看到日志中的数据：

```
 Started POST "/users" for 127.0.0.1 at 2012-09-17 12:27:49 +0100
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Bhh2ELWIFW9bENXeQ3Yta+bJqD7Dx8os9zdvnN0m5sM=", "user"=>{"username"=>"test", "email"=>"test@test.com", "firstname"=>"test", "lastname"=>"test", "admin"=>"false"}, "commit"=>"Register New User"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)

Started GET "/" for 127.0.0.1 at 2012-09-17 12:27:49 +0100
Processing by ProjectsController#index as HTML
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Project Load (0.2ms)  SELECT "projects".* FROM "projects" 
  Rendered projects/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.4ms) 
```

我是 Rails 新手，所以在尝试提供帮助时请记住这一点。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:08:28.763

您根本没有将用户保存到数据库中，而是调用了错误的控制器操作。

首先：这在 Rails 中的工作方式是通常`new`动作将表单呈现给用户。一旦提交，`create`动作就会被击中。

然后，`create`您必须创建一个新的用户对象，其中包含用户在表单中输入的属性。这通过`User.new(params[:user])`（`params[:user]`用户在表单中输入的数据在哪里）然后调用`.save`对象以将其保存在数据库中。

理想情况下，`create`操作代码应如下所示：

```
def create
    @user = User.new(params[:user])
    if @user.save

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @user }
      end
    else
      # validation failed
      respond_to do |format|
        format.html { render 'new' } #this will re-display the new form with model errors
        format.json { #give some error in the JSON }
      end
    end
  end 
```

# android - 存储/检索日期时间

> ID：12457926
> 
> 赞同：0
> 
> 时间：2012-09-17T11:04:29.497
> 
> 标签：android, sqlite, datetime, android-listview

我有一个应用程序正在检索从 1970 年开始以毫秒为单位存储为字符串的日期，例如 `1324657734883`.

我有一个`ListView`显示这个日期的。我想在数据库中显示`DateTime`此字段中的 joda。我的视图显示列表视图并通过使用填充它，`startManagingCursor()`所以我认为在填充`milisec`到.`DateTime``listview`

有没有办法解决这个问题，或者我是否必须存储一个 DateTime，如果是这样，我需要声明什么列类型来存储这种类型的数据？

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    nfcscannerapplication = (NfcScannerApplication) getApplication();

    // setup UI
    setContentView(R.layout.viewtransactions);
    setTitle(getCarername() + " has completed " + nfcscannerapplication.loginValidate.getNumberOfTransactions() + " visits today");
    //transactionCount = (TextView)findViewById(R.id.textviewtransactionsfordaycount);
    viewTransactions = (ListView) findViewById(R.id.listviewtransactions);

    //transactionCount.setText("You have completed 6 transactions today");

    // get data
    cursor = nfcscannerapplication.loginValidate.queryAllFromTransactions();
    startManagingCursor(cursor);

    // setup adapter and show the data

    String[] from = { 
            LoginValidate.C_NAME, LoginValidate.C_TAG_SCAN_TIME,
            LoginValidate.C_TAG_SCAN_TIME};
    int[] to = { R.id.rowcarername, R.id.rowsignedinoutstatus, R.id.rowsenttoserverat };

    adapter = new SimpleCursorAdapter(nfcscannerapplication, R.layout.rowdataactual,
            cursor, from, to);
    viewTransactions.setAdapter(adapter);

}

} 
```

.

[update1] 公共类 ViewTransactions 扩展 NfcBaseActivity{

```
private static final String TAG = ViewTransactions.class.getSimpleName();

NfcScannerApplication nfcscannerapplication;
Cursor cursor;
ListView viewTransactions;
SimpleCursorAdapter adapter;
MyAdapter myAdapter;
//TextView transactionCount; //now written to status bar

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    nfcscannerapplication = (NfcScannerApplication) getApplication();

    // setup UI
    setContentView(R.layout.viewtransactions);
    setTitle(getCarername() + " has completed " + nfcscannerapplication.loginValidate.getNumberOfTransactions() + " visits today");
    //transactionCount = (TextView)findViewById(R.id.textviewtransactionsfordaycount);
    viewTransactions = (ListView) findViewById(R.id.listviewtransactions);

    //transactionCount.setText("You have completed 6 transactions today");

    // get data
    cursor = nfcscannerapplication.loginValidate.queryAllFromTransactions();
    startManagingCursor(cursor);

    // setup adapter and show the data

    String[] from = { 
            LoginValidate.C_NAME, LoginValidate.C_TAG_SCAN_TIME,
            LoginValidate.C_TAG_SCAN_TIME};
    int[] to = { R.id.rowcarername, R.id.rowsignedinoutstatus, R.id.rowsenttoserverat };

    myAdapter = new MyAdapter(nfcscannerapplication, R.layout.rowdataactual,
            cursor, from, to);
    viewTransactions.setAdapter(adapter);

}

class MyAdapter extends SimpleCursorAdapter {

    public MyAdapter(Context context, int layout, Cursor c, String[] from,
            int[] to) {
        super(context, layout, c, from, to);
    }

    @Override
    public
    View getView(int position, View convertView, ViewGroup parent) {
        View v = super.getView(position, convertView, parent);
        if(v == null)
            return null;

        Cursor c = (Cursor)getItem(position);
        String val = c.getString(c.getColumnIndex(LoginValidate.C_TAG_SCAN_TIME));
        Date dt = new Date(Long.parseLong(val));
        SimpleDateFormat df = new SimpleDateFormat("dd MMMM yyyy");
        String res = df.format(dt);

        ((TextView)v.findViewById(R.id.rowsignedinoutstatus)).setText(res);
        ((TextView)v.findViewById(R.id.rowsenttoserverat)).setText(res);

        return v;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:27:06.200

创建一个扩展的自定义适配器`SimpleCursorAdapter`：

```
class MyAdapter extends SimpleCursorAdapter {
    @Override
    View getView(int position, View convertView, ViewGroup parent) {
        View v = super.getView();
        if(v == null)
            return null;

        Cursor c = (Cursor)getItem(position);
        String val = c.getString(c.getColumnIndex(LoginValidate.C_TAG_SCAN_TIME));
        Date dt = new Date(Long.parseLong(val));
        SimpleDateFormat df = new SimpleDateFormat("dd MMMM yyyy");
        String res = df.format(val);

        ((TextView)v.findViewById(R.id.rowsignedinoutstatus)).setText(res);
        ((TextView)v.findViewById(R.id.rowsenttoserverat)).setText(res);

        return v;
    }
} 
```

然后用它代替默认的：

```
adapter = new MyAdapter(nfcscannerapplication, R.layout.rowdataactual, cursor, from, to); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:17:08.600

`DateFormat`从[android.Text.DateFormat](http://developer.android.com/reference/android/text/format/DateFormat.html)使用

```
public static CharSequence getTimeStamp(long milliseconds) {
    Date d = new Date(milliseconds);
    return DateFormat.format("EEEE, MMMM dd, yyyy h:mm:ss aa", d);
} 
```

但是你必须使用`ArrayAdapter<String>`你的`ListView`.

`LoaderManager`如果您使用，而不是从 Activity 管理光标，这将很容易。

# c# - 具有组合框绑定的 DataGrid

> ID：12457927
> 
> 赞同：0
> 
> 时间：2012-09-17T11:04:33.820
> 
> 标签：c#, wpf, xaml, data-binding

我有一个在 xml 中绑定到项目源的数据网格。在这个数据网格中，我有一个组合框，它有自己的项目源，它是一个简单的枚举。

我希望能够在 selectedIndex 上更新父对象的项目源，因此在这种情况下是数据网格项目源。

```
<DataGrid Margin="10" ColumnWidth="*" ItemsSource="{Binding Collection}" SelectionUnit="Cell" SelectionMode="Single" AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False>
    <DataGridTemplateColumn Header="TEST">
         <DataGridTemplateColumn.CellTemplate>
             <DataTemplate>
                <ComboBox SelectedIndex="{Binding Type, Mode=TwoWay}" 
                  ItemsSource="{Binding Source={StaticResource enumType}}"/>
             </DataTemplate>
         </DataGridTemplateColumn.CellTemplate>
     </DataGridTemplateColumn>
</DataGrid> 
```

所以我有两个不同的项目源，一个用于组合框，一个用于数据网格，但我希望组合框的选定索引更新属性“类型”，它是数据网格项目源“集合”的一部分。

# php - 有没有更好的方法来删除关联？

> ID：12457928
> 
> 赞同：0
> 
> 时间：2012-09-17T11:04:47.553
> 
> 标签：php, doctrine-orm

我有朋友和类别 - 每个朋友都属于一个类别。以下是它们之间的关系：

在**类别类**中：

```
/**
 * @ORM\OneToMany(targetEntity="Friend", mappedBy="category", cascade={"remove"})
 * @ORM\OrderBy({"name" = "ASC"})
 */
protected $friends; 
```

在**朋友班**：

```
/**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="friends")
 * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
 */
protected $category; 
```

我想要的是删除一个类别，当这种情况发生时，属于这个类别的朋友有一个类别 = null。有没有办法让它更优雅？

如您所见，我试过了`cascade={"remove"}`，它很完美，但它也会删除朋友。有没有更好的解决方案，然后从当前类别中选择所有朋友，将他们的类别字段设置为空，然后删除该类别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:13:53.757

您应该定义`onDelete`in`@JoinColumn`并将其设置为`set null`. [这](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-joincolumn)是有关此的文档。

# ios - ios 可变数组

> ID：12457931
> 
> 赞同：-2
> 
> 时间：2012-09-17T11:04:51.963
> 
> 标签：ios, uitableview

大家好，我是 iOS 新手。我的问题是：

我有一个可变数组和一个表格视图。表视图中的行数的计数是数组的计数。如果我在最后一行输入任何内容，则会创建一个新行。我想要实现的是，如果任何一行留空，则应自动删除该行。提前致谢

```
@interface SubClassCell : UITableViewCell <UITextFieldDelegate>{
    UILabel *lblShowFirst;
    UITextField *txtShow;
    id<SubclassDelegate> delegate;
    NSArray *arrayFirstSection;
    NSArray *arraySecondSection;
    UILabel *lblShowSecond;

}   

@property (nonatomic, retain) UILabel *lblShowFirst;
@property (nonatomic, retain) UILabel *lblShowSecond;
@property (nonatomic, retain) UITextField *txtShow;
@property (nonatomic, assign) id<SubclassDelegate> delegate;
@property (nonatomic, retain) NSArray *arrayFirstSection;
@property (nonatomic, retain) NSArray *arraySecondSection;

-(void) setCellTable:(NSIndexPath *) indexPath;

@end

@protocol SubclassDelegate <NSObject>

-(void)getTxtField:(NSString *)txtValue;
-(void)insertNewRows:(UITextField *)textF;
-(void)removeNewRows:(UITextField *)textF;

@end

subclass.m

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [txtShow resignFirstResponder];
    return YES;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSLog(@"%@",textField.text);
    if([textField.text length] == 1)

        [self.delegate insertNewRows:textField];

    else if ([textField.text length]==2){
        [self.delegate removeNewRows:textField];

    }

        //if([textField.text length]==0){
//          [self.delegate removeNewRows:textField];
//      }

    return YES;
}

Main class.m

-(void)insertNewRows:(UITextField *)textF
{       

    [arrayTagFirst addObject:textF.text];
    [tableNewContactFirst beginUpdates];
    [tableNewContactFirst insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath                                           ndexPathForRow:[arrayTagFirst count]-1 inSection:0]]                                                                 withRowAnimation:UITableViewRowAnimationFade];
     [tableNewContactFirst endUpdates];
    if (textF.editing && textF.text==0) {
        [arrayTagFirst removeLastObject];
        [tableNewContactFirst beginUpdates];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:38:43.710

这就是你如何删除 UITableView 中的行

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YES]; 
```

你还需要从 NSMutableArray 中删除它

```
[yourMutableArray removeObjectAtIndex:indexPath]; 
```

要获取空单元格的 indexPath，您需要添加一些代码以便我弄清楚。似乎您在每个单元格中添加了一个 UITextField，请告诉我相同的信息，以便我可以帮助您。希望能帮助到你。快乐编码:)

# rake - 了解小铲过滤器

> ID：12457932
> 
> 赞同：2
> 
> 时间：2012-09-17T11:04:58.560
> 
> 标签：rake, ember.js, asset-pipeline

Minispade 过滤器将每个文件的代码包装在一个闭包中。现在，对于在文件中定义的应该全局公开的对象，它们不再是全局的，因为它们被包裹在一个闭包中。

那么，我们如何真正需要在我们的主应用程序文件中的单独文件中定义的对象？

这是我的例子。

在我的文件中，test.js

```
var test = { sayHello: function(){alert('hello');} } 
```

在我的主应用程序文件中，我这样做：

```
require('todos/vendor/jquery-1.7.1');
require('todos/vendor/ember-0.9.5');
require('todos/vendor/test');

console.log(jQuery); // this logs the jQuery object
console.log(Ember);  // this logs the Ember object
console.log(test);   // this is undefined 
```

如何访问`test`我的主应用程序 js 文件中的对象？是不是我必须`test`在我的文件中以不同的方式定义我的对象？

**更新：**

我可以通过删除将对象泄漏到全局命名空间，`var`但这是推荐的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:46:23.747

minispade 的全部意义在于将这些“文件”包含在它们自己的闭包中，这样它们就不会泄漏到全局名称空间中。在没有 var 的情况下让`test`这样的泄漏是一个坏主意，您可能正在尝试使用 minispade 来解决错误的问题。

流行的 minispade 模式是定义一个全局可用的变量（在 Ember 术语中，这将是一个 Ember 命名空间或`App`）。然后，您的每个 minispade 闭包都将通过添加模型、视图、控制器等构建到 App 上。例如。

```
App = Ember.Application.create(); 
```

然后在 minispade 中，您将为 vehicle.js 创建一个 minispade 闭包

```
App.Vehicle = Ember.Object.extend(); 
```

我们还将为 car.js 创建一个 minispade 闭包。

```
require('vehicle');

App.Car = App.Vehicle.extend(); 
```

这将确保在我们尝试定义 car 之前加载并执行车辆。

你可能想看看这个：[http](http://ryanto.github.com/#posts/rake-pipeline-assetfile) : //ryanto.github.com/#posts/rake-pipeline-assetfile （这是一项正在进行的工作，但有一节关于使用 minispade 和 rake 管道）。

# ios5 - 在 UIView 上点击手势作为子视图获取错误访问权限

> ID：12457934
> 
> 赞同：0
> 
> 时间：2012-09-17T11:05:06.550
> 
> 标签：ios5, uiviewcontroller, uigesturerecognizer, subview

我有一个来自 UIViewController 的派生类，名为 AdminViewController。

我想为此视图启用 singleTab 识别器。

在 MainViewController 中调用视图：

```
AdminViewController* AdminViewC = [[AdminViewController alloc]init];
[self.view addSubview:AdminViewC.view]; 
```

在 AdminViewController.m

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer{
    if([gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]])
    {
        [gestureRecognizer addTarget:self action:@selector(tappedGestureAction:)];
    }
    return YES;
}

-(void)tappedGestureAction:(UITapGestureRecognizer *)tap{
    UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"View Tapped" message:@"Tapped" delegate:nil cancelButtonTitle:@"Dissmiss" otherButtonTitles:@"Done", nil];
    [av show];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [self.view setFrame:CGRectMake(500, -200, 200, 300)];
    UITapGestureRecognizer *singleFingerTap =
    [[UITapGestureRecognizer alloc] initWithTarget:self.view action:@selector(handleSingleTap:)];
    [self.view addGestureRecognizer:singleFingerTap];
} 
```

如果我在 MainViewController 中触摸视图，我会得到：

*'NSInvalidArgumentException'，原因：'-[UIView handleSingleTap:]：无法识别的选择器发送到实例 0x296d50'*

有人提示吗？问候，菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:13:48.857

您已在 上添加手势`self.view`，但未实现单击选择器：

```
-(void)handleSingleTap:(UITapGestureRecognizer*)tapGesture
{
} 
```

# c# - 如何比较列表 s 并获得排序列表？

> ID：12457935
> 
> 赞同：0
> 
> 时间：2012-09-17T11:05:09.327
> 
> 标签：c#, algorithm

我有自定义类`PeriodBase`，其中包含使用的主要属性：

```
 public class PeriodBase
 {

    TimeSpan? _endTime=null;
    TimeSpan? _beginTime=null;
    PeriodColor _periodColor=PeriodColor.Gray;

    public PeriodColor PeriodColor
    {
        get { return _periodColor; }
        set { _periodColor = value; }
    }

    public TimeSpan? BeginTime
    {
        get { return _beginTime; }
        set { _beginTime = value }
    }

    public TimeSpan? EndTime
    {
        get { return _endTime; }
        set { _endTime = value; }
    }
}

public enum PeriodColor
{

    Green,
    Red,
    Gray
} 
```

我有两个`List<PeriodBase>`：

```
List<PeriodBase> refPeriods;
List<PeriodBase> donePeriods; 
```

我以这种方式表示（例如）：

![它是库存图片](../Images/d12135d0eea9b3a7f0ed1a900f7d24a3.png)

但我想这样表示：

![这就是我要的](../Images/5f5fd25e95b8dc26dba019fb8d680cd6.png)

换句话说，红色部分必须在 ref`List`中，绿色部分在 done`List`中，其他（灰色）部分必须在`Lists`PS 工作图形演示器中。如何制作比较算法？正如您在上面看到的，我有用于检查线条颜色的枚举。我需要重新`Lists`填写排序表格并分开。我知道我的解释很糟糕，因为如果你什么都不懂，请告诉我再解释一次

示例（我只会显示`TimeSpans`）：

```
ref :  10:00-11:00 ; 13:00-18:00
done : 10:05-11:50 ; 14:00-17:50 
```

排序后

```
 ref : 10:00-10:05(red) ; 10:05-11:00(grey) ; 13:00-14:00(red) ; 14:00-17:50(grey) ; 17:50-18:00(red)
done : 10:05-11:00(grey) ; 11:00-11:50(green) ; 14:00-17:50(grey) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:18:23.173

我认为您应该分几步执行此操作：

1.  将您转换为使用 LINQ 之`List<TimeSpan>`类的东西`List<Tuple<TimeSpan, bool>>`
2.  将您的两个列表合并为一个列表
3.  按 BeginTime 对列表进行排序
4.  迭代你的列表
    1.  检查是否有记录开始 >= 你的开始时间和开始 < 你的结束时间：你有一个“冲突”。根据存储在`Tuple<TimeSpan, bool>`where bool is a flag for ref/done中的内容确定颜色
    2.  等等（你只需要弄清楚什么时候需要给东西上色等。基本上是一些条件）
5.  只需在迭代期间将每个 PeriodBase 添加到列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:29:30.313

我认为您的算法应该有几个步骤：

1.  确定每个参考周期的重叠周期列表。
2.  通过以下方式确定每个周期的可用空间列表
    ：确定每个时段 + 重叠时段组合的 0、1 或 2 个空闲时段。
    湾。将所有参考周期的所有空闲周期相交。

它可能看起来像这样：

```
var freePeriodsPerPeriod = 
    from period in refPeriods
    let overlappingPeriods =
        from donePeriod in donePeriods
        let periodsOverlap =
            period.EndTime > donePeriod.StartTime &&
            period.StartTime < donePeriod.EndTime
        where periodsOverlap
        select donePeriod
    select new { period, free = GetFreePeriods(period, overlappingPeriods).ToArray() };

IEnumerable<PeriodBase> GetFreePeriods(PeriodBase period,
    IEnumerable<PeriodBase> overlappingPeriods)
{
    return Intersect(
        from overlappingPeriod in overlappingPeriods
        from freePeriod in GetFreePeriods(period, overlappingPeriod)
        select freePeriod
    );
}

IEnumerable<PeriodBase> GetFreePeriods(PeriodBase period,
    PeriodBase overlappingPeriod)
{
    // return 0, 1, or 2 periods.
    yield return ...
    yield return ...
}

IEnumerable<PeriodBase> Intersect(IEnumerable<PeriodBase> periods)
{
    // TODO
} 
```

# ios5 - 如何在表格视图中选择自定义单元格并推送到“详细视图”？

> ID：12457936
> 
> 赞同：0
> 
> 时间：2012-09-17T11:05:13.523
> 
> 标签：ios5, tableview, cell

在表格视图中填充了一些动态数据的自定义单元格，并且效果很好。问题是，选择一个单元格时，它不再像我开始使用自定义单元格之前那样**进入下一个“详细视图” 。**

我使用 InterfaceBuilder 将 tableview 中的自定义单元格连接到“detailview”。（也尝试删除旧的segue并添加一个新的，但没有区别）。

我是否需要在自定义单元格中创建一个特殊图层以“选择”或类似？和/或我不能使用 InterFacebuidler 连接自定义单元格吗？

任何提示/指针？谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:28:14.253

# css - 在 Windows XP 上的 IE8 中无法获得悬停效果

> ID：12457937
> 
> 赞同：0
> 
> 时间：2012-09-17T11:05:34.107
> 
> 标签：css, windows-xp, hover

我有这样的结构

```
 ul
         li
            div(class cls)
                table
                    tr
                     td
                        div 
                            a 
```

我已经为这样的锚元素应用了css

```
 ul li .cls a:hover
    {
      background: #264A6A;
    } 
```

它适用于所有浏览器，包括 Windows 7 上的 IE8。但在 IE8 上的 Windows XP 上，它确实可以更改悬停时的背景。

这里需要做哪些改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:14:45.393

你为什么不试试`display:block`锚标签，这将是解决方案。希望你能得到你的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:33:40.353

您可以尝试更具体：

```
ul li div.cls table tr td div a:hover
{
  background: #264A6A;
} 
```

# c# - 取消搁置时无法添加新文件

> ID：12457942
> 
> 赞同：0
> 
> 时间：2012-09-17T11:05:54.977
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, version-control

我正在尝试取消搁置 VS2010 中的一些文件。这非常有效，除非我的本地工作区中不存在该文件。当更改为“添加”时，它会失败并显示消息：“路径 xxx/xxxx 有一个不兼容的挂起更改。”。

我的过程是：

从服务器递归获取最新版本（替换所有文件以确保我的工作区中没有待处理的更改）。取消搁置，从我想要的搁置集中选择特定文件。

修改有效，但添加新文件失败，并出现上述错误消息。

有谁知道可能是什么原因造成的？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:25:42.070

你说你做了一个

> 从服务器递归获取最新版本（替换所有文件以确保我的工作区中没有待处理的更改）

但这不会撤消现有的“添加”操作。

我的猜测是，如果您检查您的工作区 Pending Changes 窗口，您实际上会在该位置有一个挂起的添加（即使您不一定在该位置有一个文件）。

# oracle - EF 迁移到 Oracle

> ID：12457943
> 
> 赞同：7
> 
> 时间：2012-09-17T11:06:01.260
> 
> 标签：oracle, entity-framework, migration

是否可以使用免费提供程序（无 Devart）将 EF/NHibernate 实体迁移到 Oracle 数据库？我收到了这条消息：

> 找不到提供程序“Oracle.DataAccess.Client”的 MigrationSqlGenerator。使用目标迁移配置类中的 SetSqlGenerator 方法来注册其他 SQL 生成器。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-12T12:56:31.470

Oracle Developer Tools for Visual Studio 12c 第 3 版包含 Code First 功能。它目前是 beta 2 版本，可[在此处](http://www.oracle.com/technetwork/topics/dotnet/downloads/index-2235287.html)获得，但在大多数情况下似乎运行良好。最终发布时将在此处提供[。](http://www.oracle.com/technetwork/developer-tools/visual-studio/overview/index-097110.html)

# sql - 将多个数据库合并为一个数据库

> ID：12457947
> 
> 赞同：16
> 
> 时间：2012-09-17T11:06:11.793
> 
> 标签：sql, database, sql-server-2008, merge

所有，我必须创建一个具有基本模式的数据库。该数据库将很大（100GB 以上），并将用作数据仓库。现在，这个数据库的创建目前正在通过 C# 代码“一击”执行；从多个不同来源提取数据。由于数据量巨大，这种创建导致了一些问题。已经决定不要一次性创建一个数据库；至

1.  创建几个包含核心数据表的小型数据库。
2.  将较小的数据库合并到一个较大的数据库中。
3.  构建架构/添加相关约束。

我的问题有两个。

**1\. 合并多个数据库（具有相同的模式/表结构）的最佳方法是什么？**

**2\. 有没有更好的方法来创建这个数据仓库（超大数据库）？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T12:51:10.337

对于您的第一个问题：您提到了相同的架构和表结构，在这种情况下，它只是将数据从一个 DB 表（即较小的 DB）移动到另一个（即较大的 DB）。为此必须确保

1）没有重复的数据（至少在PK领域）

2) 将数据从一个数据库移动到另一个数据库以供 sql server 参考

[将数据从一个数据库传输到另一个数据库](https://stackoverflow.com/questions/10028805/transfer-data-from-one-database-to-another-database)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-02T14:37:46.683

SQL-Hub ( [http://sql-hub.com](http://sql-hub.com) ) 将允许您将具有相同架构的多个数据库合并到一个数据库中。有一个免费许可证可让您从 UI 执行此操作，但如果您想安排该过程自动运行，您可能需要支付许可证费用。但是，如果数据量很大，那么您想要实现的目标可能会有点慢 - 不过您可以尝试一下。

[这里](http://sql-hub.com/Page/index.php?Shortname=BACKGROUND)还有一些文章着眼于这类问题的其他一些选项。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-17T13:18:44.190

索拉的回答很好，而且会奏效。这是另一种选择：根本不合并。在您的导入创建的多个基表之上创建一个 union-all 视图。这为您节省了大量的数据移动。这种视图称为[分区视图](http://msdn.microsoft.com/en-us/library/ms190019%28SQL.105%29.aspx)。

# backbone.js - 使用 pushState=true 导航时 Backbone.js 触发路由？

> ID：12457948
> 
> 赞同：1
> 
> 时间：2012-09-17T11:06:16.413
> 
> 标签：backbone.js, pushstate

我正在使用 Backbone 0.92，与 Chrome 相比，我在 FF 中遇到了不同的路由器行为。

在 Firefox 中，导航到此 url 不会触发“defaultRoute”：

```
Backbone.history.start({pushState: true});

myRouter.navigate("?chapter=1")

//Router
routes: {
    '*path':        'defaultRoute',
} 
```

而在 Chrome 中，导航确实会触发整个页面的刷新。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:08:09.453

博士是正确的，改变它来`myRouter.navigate("?chapter=1", {trigger: true});`解决你的问题。

但是，值得注意的是，这实际上是 chrome 问题，而不是 firefox 问题。由于某种原因，Chrome 似乎预加载了路由器 url，这意味着路由器方法在没有你指定你想要它的情况下被执行。

无论哪种方式，添加`{trigger: true}`都是执行导航的预期方式，并将解决您的问题。

# c# - 如何为 linq 查询创建一个类（EF）

> ID：12457950
> 
> 赞同：1
> 
> 时间：2012-09-17T11:06:24.443
> 
> 标签：c#, database, winforms, entity-framework, methods

首先，我很新（菜鸟）。可能我的问题很愚蠢，但我被卡住了。这是情况。

我开始使用 EF 5.0 编写一个 winforms 数据库应用程序。一切都很好，我可以用这样的形式做我想做的事：

```
private void Form1_Load(object sender, EventArgs e)
{        
    using (var ctx = new pehkEntities())
    {
        var result = from k in ctx.Kolons
                     select new
                     {
                         KolonAdı = k.KolonAdi,
                         En = k.En,
                         Boy = k.Boy,
                         Yükseklik = k.Yukseklik,
                         ID = k.KolonID
                     };

        dataGridView1.DataSource = result.ToList();
    }
} 
```

但是我的 form1 代码现在真的很乱，我想通过使用类和方法来清理它。我试图在 program.cs 中创建一个类和一个方法，但我失败了。我应该如何解决它？

```
public class veritabani_islemleri
{
    public ???? kolonlistele()
    {
    using(pehkEntities ctx = new pehkEntities())

        var result =from k in ctx.Kolons
               select new
               {
                   KolonAdı = k.KolonAdi,
                   En = k.En,
                   Boy = k.Boy,
                   Yükseklik = k.Yukseklik,
                   ID = k.KolonID
               };

        return ????
    }
} 
```

我的问题是我无法填写问号。我只是想以我的形式做到这一点。

```
private void Form1_Load(object sender, EventArgs e)
{
   dataGridview.DataSource=myfunction();  
} 
```

或者如果我的方法完全错误，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:18:43.623

为此：您按照以下步骤操作：-

1.  创建 ViewModel 类
2.  并创建表单中需要的属性
3.  然后创建一个静态方法，该方法将属性
4.  然后在您的表单中使用该模型。

例如 ：

```
public class  veritabani_islemleriModel{
 public String KolonAdi { get; set; }
 public String En { get; set; }
 public String Boy { get; set; }
 public String Yükseklik { get; set; }
 public String ID { get; set; }
}

and then 
public class veritabani_islemleri
{
    public List<veritabani_islemleriModel> kolonlistele()
    {
    using(pehkEntities ctx = new pehkEntities())

        var result =from k in ctx.Kolons
               select new veritabani_islemleriModel
               {
                   KolonAdı = k.KolonAdi,
                   En = k.En,
                   Boy = k.Boy,
                   Yükseklik = k.Yukseklik,
                   ID = k.KolonID
               };

        return result.Tolist();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:47:01.880

您当前的 Linq 查询正在返回所谓的“匿名类型”（[请参见此处](http://msdn.microsoft.com/en-us/library/bb397696.aspx)）。在构建时，编译器实际上正在创建一个类来为您保存具有所有正确属性的数据。但是，C# 不能从函数返回匿名类型，这就是为什么你不知道要返回什么类型。

解决这个问题的最好方法是让你自己的真实类来保存数据，这就是 Pushpendra 在他们的回答中所做的：

```
public class veritabani_islemleriModel{
 public String KolonAdi { get; set; }
 public String En { get; set; }
 public String Boy { get; set; }
 public String Yükseklik { get; set; }
 public String ID { get; set; }
} 
```

现在您有了一个`veritabani_islemleriModel`可以在方法签名和返回语句中使用的真实类型，而不是编译器生成的匿名类型。

# java - 单击提交时如何在 Tapestry 5.3.2 中将字符串作为上下文传递

> ID：12457963
> 
> 赞同：2
> 
> 时间：2012-09-17T11:07:21.900
> 
> 标签：java, submit, tapestry

提交表单时，我无法将上下文作为字符串传递给 Tapestry 中的提交事件处理程序。它是怎么做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:41:33.060

The exception you are seeing is saying that you are not allowed to place the `Submit` outside a tapestry `Form`. A good way to deal with context on a form submit is to add the context to the Form and pick it up on the prepare for submit event. Like so:

```
@Component(id = "form", parameters = {"context=myString"})
private Form form

@OnEvent(component="form", value=EventConstants.PREPARE_FOR_SUBMIT)
private void handlePrepare(String contextString) {
  .... do what is needed with the contextString ...
}

@OnEvent(component="form", value=EventConstants.SUCCESS)
private Object handlePrepare() {
  .... handle form succes ...
  return null;
}

public String getMyString() {
  return "Some string"
} 
```

Here you can leave the submit button out of the equation. If you do require the submit button, please provide your java code and *.tml markup in the initial question.

Good luck!

# iphone - 在代码 xcode iOS 目标 c 中禁用 DLogs

> ID：12457964
> 
> 赞同：1
> 
> 时间：2012-09-17T11:07:23.553
> 
> 标签：iphone, objective-c, ios, xcode

**基本上，我的项目中有 DLog 命令，我几乎有数百个。不，我正在构建一个发布版本，我希望编译器忽略我所有的 DLog。我想到的一种方法是转到此 DLog 所在的每一行并仅放置一个 if 条件 DLog

```
 if(Debug) {DLog(.....)} 
```

我想知道是否有一个地方可以让编译器忽略所有这些 DLog 以进行发布？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:11:13.333

在您定义 DLog 的地方添加编译器指令：

```
#ifndef DLog
#   ifdef DEBUG
#       define DLog(...) NSLog(__VA_ARGS__)
#   else
#       define DLog( ...)
#   endif // NDEBUG
#endif // DLog 
```

# jquery - 更好的 CSS 方式来排列 div

> ID：12457967
> 
> 赞同：0
> 
> 时间：2012-09-17T11:07:35.087
> 
> 标签：jquery, html, css

我必须动态地将子 div 元素添加到#mainHolder div。应该只有三个 div 连续。我正在使用[http://jsfiddle.net/Lijo/ZkLg6/20/](http://jsfiddle.net/Lijo/ZkLg6/20/)中所示的“<strong>clear”方法。

有没有更好的 CSS 方法来做到这一点？

参考：

1.  [http://jsfiddle.net/Lijo/bSchQ/9/](http://jsfiddle.net/Lijo/bSchQ/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:12:43.583

你可以添加`clear: left;`到你的`.firstDiv`班级。这样您就不需要使用`clear:both;` [Here](http://jsfiddle.net/ZkLg6/25/) is an updated JSfiddle 添加另一个 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:41:08.967

您应该使用`display: inline-block;`内部 div 使它们连续共存。

这是你的例子，有点重写，这样做：

[http://jsfiddle.net/bSchQ/3/](http://jsfiddle.net/bSchQ/3/)

解释：

*   Javascript - 该部分在功能上几乎与您的相同，但我已将其重写为更通用一些作为练习。我将每一行包装在一个单独的 div 中以划分它们。

*   CSS - 这是重要的部分。假设我以你的例子为例，只删除了`float: left`. 由于`display: inline;`div 仍将呈现在同一行中，但出于同样的原因，它们不能具有尺寸（宽度、高度）。如果您将它们声明为`display: inline-block`，您将获得两全其美。您可以水平放置的内联元素，以及您可以自己标注尺寸的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:13:58.137

希望这有助于将位置设置为绝对位置，并将框的宽度设置为 150，例如 3 * 50 像素。

检查此链接>> [http://jsfiddle.net/ZkLg6/24/](http://jsfiddle.net/ZkLg6/24/)

# linux - 端口状态始终关闭，无法打开 UMAD 端口

> ID：12457968
> 
> 赞同：1
> 
> 时间：2012-09-17T11:07:43.820
> 
> 标签：linux, suse, infiniband

我在以下机器上新安装了 ofed-1.5-3：

SUSE Linux Enterprise Server 11 (x86_64) VERSION = 11 PATCHLEVEL = 1

我们的管理员在机器上安装了 CX354A 卡（MCX354A-FCBT）卡。$ lspci | grep -i mel 04:00.0 网络控制器：Mellanox Technologies Device 1003

（问题1：我不知道lspci的这个输出是否正确，我怀疑是这样，但不知道如何得到正确的输出。）

在我通过 ./mlnxofedinstall 脚本安装 ofed 包后：

ofed_info 的输出 | 头-1：MLNX_OFED_LINUX-1.5.3-3.1.0（OFED-1.5.3-3.1.0）：

安装成功，openibd 确实加载了所有必需的模块/驱动程序。$ 服务 openibd 状态

已加载 HCA 驱动程序

配置的 IPoIB 设备：ib0 ib1

当前活跃的 IPoIB 设备：

加载了以下 OFED 模块：

rdma_ucm ib_srp rdma_cm ib_addr ib_ipoib mlx4_core mlx4_ib mlx4_en ib_mthca ib_uverbs ib_umad ib_ucm ib_sa ib_cm ib_mad ib_core iw_cxgb3 iw_nes

hca_self_test.ofed 的输出

---- 执行适配器设备自检 ---- 检测到的 CA 数量 .................. 1 PCI 设备检查 ...... ...... PASS Kernel Arch ...................... x86_64 主机驱动程序版本...... ................ MLNX_OFED_LINUX-1.5.3-3.1.0 (OFED-1.5.3-3.1.0)：2.6.32.12-0.7-默认主机驱动程序RPM检查.. .................通过 CA #0 VPI 上的固件 .................. v2.10.700 CA #0 上的固件检查(VPI) .......... 不适用 原因：不需要固件版本 主机驱动程序初始化 ...... PASS 活动的 CA 端口数 ...... ...... 0 CA #0 (VPI) 上端口 #1 的端口状态...... DOWN (InfiniBand) CA #0 (VPI) 上端口 #2 的端口状态...... DOWN (InfiniBand ) CA #0 (VPI) 上的错误计数器检查......通过内核系统日志检查 .................... 在 CA #0 (VPI) 上通过节点 GUID ) ...... 00:02:c9:03:00:f9:ed:e0 ------------------ 完成 ----------

问题 2：现在当我尝试 ibstatus 或 ibv_devinfo 时，我看到端口状态为 PORT_DOWN。虽然我在文档中阅读的是它应该处于 INIT 状态。我的问题是如何将其设置为 INIT 状态。$ ibv_devinfo

hca_id: mlx4_0 传输: InfiniBand (0) fw_ver: 2.10.700 node_guid: 0002:c903:00f9:ede0 sys_image_guid: 0002:c903:00f9:ede3 vendor_id: 0x02c9 vendor_part_id: 4099 hw_ver: 0x0 board 2021 端口 MT_1090状态：PORT_DOWN (1) max_mtu: 2048 (4) active_mtu: 2048 (4) sm_lid: 0 port_lid: 0 port_lmc:0x00 链接层：IB

```
 port:   2
                    state:                  PORT_DOWN (1)
                    max_mtu:                2048 (4)
                    active_mtu:             2048 (4)
                    sm_lid:                 0
                    port_lid:               0
                    port_lmc:               0x00
                    link_layer:             IB 
```

当我尝试以下命令时出现错误：

$ ibportstate -G 0x0002c90300f9ede0 1 查询/启用/禁用 ibwarn：[9318] mad_rpc_open_port：无法打开 UMAD 端口（（null）：0） ibportstate：iberror：失败：无法打开“（null）”端口“0”

问题 3：不明白为什么会出现此错误，或者如何摆脱它。任何帮助将不胜感激。

如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:23:00.583

ibv_devinfo 中的端口状态将关闭，直到您使用 infiniband 电缆将此节点连接到另一个节点或 infiniband 交换机。从模块来看，您似乎已经设置了所有必要的东西，只是缺少另一个要与之交谈的节点。将其连接到另一个节点后，您应该能够看到状态更改为 PORT_INIT 并填充链接速度等。

# c# - 从 C# 连接到 SQL Server

> ID：12457969
> 
> 赞同：0
> 
> 时间：2012-09-17T11:07:52.947
> 
> 标签：c#, sql-server, exception-handling

我正在重新发布这个问题，因为这里的很多人建议我重新发布错误消息和 DB_connection 的代码，错误在此代码 conn = DB_conection.GetConnection()` 上的 DB_Access 类中弹出；，我正在研究c sharp 和 ms sql sever 2008 中的简单数据库项目，但在编译程序时出现错误，它在下面弹出此消息

```
System.TypeInitializationException was unhandled

  Message=The type initializer for 'StudentsInformationSystem.DB_conection' threw an exception.
  Source=StudentsInformationSystem
  TypeName=StudentsInformationSystem.DB_conection
  StackTrace:
       at StudentsInformationSystem.DB_conection.GetConnection()
       at StudentsInformationSystem.DB_Access..ctor() in C:\Users\soft\Documents\Visual Studio 2010\Projects\StudentsInformationSystem\StudentsInformationSystem\DB_Access.cs:line 16
       at StudentsInformationSystem.frmNewStudent..ctor() in C:\Users\soft\Documents\Visual Studio 2010\Projects\StudentsInformationSystem\StudentsInformationSystem\frmNewStudent.cs:line 14
       at StudentsInformationSystem.Form1.btnAddNewStudent_Click(Object sender, EventArgs e) in C:\Users\soft\Documents\Visual Studio 2010\Projects\StudentsInformationSystem\StudentsInformationSystem\Form1.cs:line 31
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at StudentsInformationSystem.Program.Main() in C:\Users\soft\Documents\Visual Studio 2010\Projects\StudentsInformationSystem\StudentsInformationSystem\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.NullReferenceException
       Message=Object reference not set to an instance of an object.
       Source=StudentsInformationSystem
       StackTrace:
            at StudentsInformationSystem.DB_conection..cctor() in C:\Users\soft\Documents\Visual Studio 2010\Projects\StudentsInformationSystem\StudentsInformationSystem\DB_conection.cs:line 15
       InnerException: 
```

这是我的 DB_connection 类

```
 class DB_conection
    {
        public static SqlConnection NewCon;
        public static string constr = ConfigurationManager.ConnectionStrings["ConString"].ConnectionString;

        public static SqlConnection GetConnection() {

            NewCon = new SqlConnection(constr);
            return NewCon;

        }

    } 
```

这是我的 DB_Access 代码

```
namespace StudentsInformationSystem
{
    class DB_Access
    {
        SqlConnection conn;
        public DB_Access() {

            conn = DB_conection.GetConnection();

        }
        public void add_student(string regNo,string fname, string lname, string phoneNo){

            if (conn.State == ConnectionState.Closed) {

                conn.Open();
            }
            SqlCommand newCmd = conn.CreateCommand();
            newCmd.Connection = conn;
            newCmd.CommandType = CommandType.Text;
            newCmd.CommandText = "insert into student values('" + regNo + "','" + fname + "','" + lname + "','" + phoneNo + "')";
            newCmd.ExecuteNonQuery();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:17:37.407

您的[sic] 类`NullReferenceException`的静态构造函数中有一个。`DB_conection`我可以发现的唯一可能的地方是在这一行中（为了便于阅读，添加了换行符）：

```
public static string constr = 
    ConfigurationManager.ConnectionStrings["ConString"].ConnectionString; 
```

特别是，看起来`ConnnectionStrings[string]`indexer 属性返回`null`. 通常，当`ConString`无法找到名称（此处）指定的连接字符串时，它会这样做。

确保您的应用程序配置文件（在 Visual Studio 中命名）在元素`app.config`中包含名为“ConString”的连接字符串的定义。`connectionStrings`

例子：

```
<connectionStrings>
  <add name="ConString" connectionString="..."/>
</connectionStrings> 
```

当然，您必须将“...”替换为实际的[连接字符串](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)。

请注意，您的代码中还有一些其他问题，例如即将发生的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)、至少在对象上缺少`Dispose`调用（或块）等。`using``SqlCommand`

# c# - 泛型参数何时不能为空

> ID：12457971
> 
> 赞同：5
> 
> 时间：2012-09-17T11:08:01.327
> 
> 标签：c#, generics, null, resharper, language-specifications

在一个通用`GetHashCode(T foo)`方法中，我检查是否`foo`是`null`. 然而，我偶然发现了一个奇怪的 Resharper 警告。

在下面的代码中，`foo`永远不可能`null`？

```
private class FooComparer<T> : IEqualityComparer<T> where T: Foo
{
    public int GetHashCode(T foo)
    {
        // resharper warning:  "Expression is always false"
        if (Object.ReferenceEquals(null,foo)) return 0; 

        // ... calculate hash
    }
} 
```

但是据我所知，以下内容是完全合法的：

```
Foo foo = null;
var fooComparer = new FooComparer<Foo>();
int hash = fooComparer.GetHashCode(foo); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T14:43:13.047

方法`IEqualityComparer<T>.GetHashCode`具有其参数的合同，因为它具有在作为参数提供`[NotNull]`时引发异常的实现。`null`

如果你想`FooComparer<T>.GetHashCode`直接使用异常安全的 for`null`作为它的参数，你可以注释如下：

```
public int GetHashCode([JetBrains.Annotations.CanBeNull] T foo)
{
    // resharper warning:  "Expression is always false"
    if (Object.ReferenceEquals(null,foo)) return 0; 

    // ... calculate hash
} 
```

尽管如此，`[Not-Null]`必须改进对参数的分析。[http://youtrack.jetbrains.com/issue/RSRP-304111](http://youtrack.jetbrains.com/issue/RSRP-304111)中的类似代码存在此错误

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T11:15:31.353

[MSDN`IEqualityComparer<T>.GetHashCode Method`](http://msdn.microsoft.com/en-us/library/ms132155.aspx) 说：

> **例外：**
> 
> `ArgumentNullException`的类型`obj`是引用类型并且`obj`是`null`。

这似乎意味着`GetHashCode<T>(T obj)`使用`null`参数调用违反了`IEqualityComparer<T>`.

我假设 Resharper 假设调用者遵守该合同，因此永远不会传入`null`.

# tomcat - SSL 错误 113（SSL 版本错误或密码不匹配）

> ID：12457974
> 
> 赞同：4
> 
> 时间：2012-09-17T11:08:09.157
> 
> 标签：tomcat, ssl, keystore

我为 client.cer SSL 证书文件创建了一个密钥库。并将这些配置添加到我的 tomcat server.xml 中。

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS"
               keystoreFile="/home/isuruanu/myclient"
               keystorePass="changeit" /> 
```

现在，当我尝试使用**https:127.0.0.1:8443**访问我的本地 tomcat 时，它给了我一个错误提示 SSL Error 113 (SSL version error or cipher mismatch)

如果我想挖掘并找到解决方案，可能的根本原因是什么。

我已经检查清除浏览器缓存，但没有帮助。

# jquery - 在滑块上添加导航

> ID：12457975
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:08:14.193
> 
> 标签：jquery, css

我得到了这个html代码：

```
<div class="imgContent">
    <div id="galleryImg">
        <img class="img_<?php echo $this->id ?>_1" width="1200" height="450" src="<?php echo $this->baseUrl('f/images/'.$this->image[1]) ?>" />
        <?php if($this->image[4]){ ?>
            <img class="img_<?php echo $this->id ?>_<?php echo $this->image[6] ?>" style="display:none" width="1200" height="450" src="<?php echo $this->baseUrl('f/images/'.$this->image[4]) ?>" />
        <?php } ?>
        <?php if($this->image[5]){ ?>
          <img class="img_<?php echo $this->id ?>_<?php echo $this->image[7] ?>" style="display:none" width="1200" height="450" src="<?php echo $this->baseUrl('f/images/'.$this->image[5]) ?>" />
        <?php } ?>
    </div>  
    <a id="prev" href="javascript:void(0)"></a>
    <a id="next" href="javascript:void(0)"></a>
</div> 
```

我想在图像上悬停时从 png 文件中添加箭头。怎么做（点击时图像正在改变）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:15:28.433

假设您的意思是说当您悬停时您的`a#prev`and`a#next`应该有箭头，`div#galleryImg`不太确定这是否是您想要的，您可以使用类似于以下的纯 css 来做到这一点：

```
a#prev, a#next {
    display: inline-block;
    width: 20px;
    height: 20px;
}
div#galleryImg:hover + a#prev { background-image: url(prev.png); }
div#galleryImg:hover + a#prev + a#next { background-image: url(next.png); } 
```

当然，您应该根据图像的正确尺寸调整宽度和高度，并为图像设置正确的 url。

# ruby-on-rails - 找不到服务器

> ID：12457976
> 
> 赞同：0
> 
> 时间：2012-09-17T11:08:17.123
> 
> 标签：ruby-on-rails

我有三个问题

**1.腻子问题**

我有一个正在运行的 Rails 应用程序，一旦我通过 putty（脚本/服务器）启动应用程序，它就会启动，但是一旦我关闭系统或说 putty，服务器也会停止并且该应用程序对其他人不可用。基本上我是新人到 ruby​​ on rails ，我无法找出如何解决这个问题的解决方案。

**2.速度问题**

当我部署了我的应用程序时，应用程序的渲染时间似乎非常高。等待几秒钟后（通常> 30秒）加载页面。我已经为应用程序安装了 Apache 服务器。可能是 Apache 是瓶颈? 我应该为我的应用程序安装一些其他服务器吗？

**3.同步问题**

我在本地主机上处理我的应用程序。每次我进行更改时，我都必须单独将更改上传到各自的文件夹，这非常忙碌。你们能推荐任何有助于快速同步更改的好的软件甚至方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:22:30.757

1.  Your program is a child process of the ssh session - if you close the session you also close all children. To prevent this, use nohup (google it for tons of examples) or screen or similar programs that allow you to detatch a process from the current session.

2.  If your server isn't extremely slow, apache shouldn't use this much time. Can't say much about it whithout seeing your code and server configuration, but I think this is more likely to be a coding, configuration or maybe database problem than an apache problem. But you could just try it with another webserver and see if it is significantly faster - if yes, your apache configuration is most likely at fault.

3.  **Use a versioning system!** Programs like git (which I would recommend) or svn can automate the synchronization process for you, and are useful for a ton of other stuff too.

# c# - 线阵列的重新初始化不会删除旧线

> ID：12457980
> 
> 赞同：0
> 
> 时间：2012-09-17T11:08:30.453
> 
> 标签：c#, wpf, initialization, line

我有一系列行说：

```
Line[] myLines = new Line[100];
SolidColorBrush myColor = new SolidColorBrush(Color.FromRgb(100,100,100));

for(int i = 0; i < 100; i++)
{
    myLines[i] = new Line() { Stroke = myColor, SnapsToDevicePixels = true };
} 
```

现在我用来根据一些数据点（在本例中为 100）显示图表的那些线。现在在某些时候我需要重用相同的线阵列，即`myLines`，而不是声明一个新的。我试图通过以下方式重新初始化它们：

```
myLines = new Line[200];

for(int i = 0; i < 200; i++)
{
    myLines[i] = new Line() { Stroke = myColor, SnapsToDevicePixels = true };
} 
```

这些线条的使用效果很好，但旧的并没有消失。我想我必须先将旧行设置为“null”：

```
for (i = 0; i < 100; i++)
{
    myLines[i] = null;
} 
```

但这也没有用。有谁知道如何解决这个问题？

# asp.net-mvc - 执行自定义基于角色的授权的 MVC 路由服务

> ID：12457981
> 
> 赞同：0
> 
> 时间：2012-09-17T11:08:32.840
> 
> 标签：asp.net-mvc

我正在开发一个 MVC 4.0 项目。为了基于操作方法的授权来完成角色，我已经实现了自定义授权属性解决方案的解决方案。但是这个解决方案在审查中不被接受，我被告知要创建一个处理授权和路由的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:08:24.367

```
On the gloabl.asas.cs file you can add the below event and then do whatever you want to do

    protected void Application_AuthenticateRequest(Object sender, EventArgs e)
                {
                    if (Features.UserValidationEnabled)
                    {
          if (!safeExtension && Security.CurrentUser.IsInRole("User"))
                            {
                                if (!AccountManager.CheckFlag(Security.CurrentUser, AccountManager.Capabilities.IsValidated))
                                {
                                    if (!HttpContext.Current.Request.AppRelativeCurrentExecutionFilePath.StartsWith("~/Account", StringComparison.OrdinalIgnoreCase))
                                    {
                                        Response.Redirect("~/Account/Validate");
                                    }
                                }
        }
        }} 
```

# jquery - jquery 将鼠标悬停在图像地图 ie7/ie8 上的区域上

> ID：12457982
> 
> 赞同：1
> 
> 时间：2012-09-17T11:08:33.270
> 
> 标签：jquery, hover, area

我有一个图像映射，并且正在使用以下

```
 $('area').hover(function(e) { 
```

问题是 ie7 和 8 没有检测到区域标签的悬停事件。有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:37:33.407

我创建了一个简单的演示，试图重现您的问题，但它似乎正在工作。我用的是IE9，但是通过集成的开发者工具改变浏览器模式来测试IE7和IE8。

**HTML**

```
<img src="http://placekitten.com/g/400/400" width="400" height="400" alt="Kitten" usemap="#areamap" />

<map name="areamap" id="areamap">
  <area shape="rect" coords="100,100,300,300" href="#top" alt="Top" id="area1" />
</map>​ 
```

**Javascript**

```
$('area').hover(
    function(event) { console.log(event.type, this.id); },
    function(event) { console.log(event.type, this.id); }
); 
```

[​ 欢迎您在http://jsfiddle.net/Xcm46/](http://jsfiddle.net/Xcm46/)上亲自试用

# ruby-on-rails-3 - 在 javascript 中调用 rails helper 方法

> ID：12457988
> 
> 赞同：0
> 
> 时间：2012-09-17T11:09:27.660
> 
> 标签：ruby-on-rails-3, jquery

我需要调用 rails helper 方法并将值作为数组获取，以便 javascript 可以处理它。是否可以在 javascript 中调用 rails helper。我正在尝试在我的应用程序中集成 jquerys 自动完成功能。请在下面找到代码。

```
$(document).ready(function () {
   //**Here the rails helper method will get the list of items**    

   function split(val) {
       return val.split(/,\s*/);
   }

   function extractLast(term) {
       return split(term).pop();
   }

   $("#tags")
   // don't navigate away from the field on tab when selecting an item
   .bind("keyup", function (event) {
       if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
           event.preventDefault();
       }
   }).autocomplete({
       minLength: 0,
       source: function (request, response) {
           // delegate back to autocomplete, but extract the last term
           response($.ui.autocomplete.filter(
           availableTags, extractLast(request.term)));
       },
       focus: function () {
           // prevent value inserted on focus
           return false;
       },
       select: function (event, ui) {
           var terms = split(this.value);
           // remove the current input
           terms.pop();
           // add the selected item
           terms.push(ui.item.value);
           // add placeholder to get the comma-and-space at the end
           terms.push("");
           this.value = terms.join(", ");
           return false;
       }
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:42:46.043

我认为没有一种直接的方法可以在 JavaScript 文件中使用 Rails 助手。

但是，您可以通过将这些列表/数组放置在标记中的脚本标记中来使这些列表/数组对您的 JS 可用，或者将它们添加为稍后可由 JavaScript 获取的[数据属性。](http://ejohn.org/blog/html-5-data-attributes/)另一种解决方案是按照评论使用[Gon](http://railscasts.com/episodes/324-passing-data-to-javascript) gem。

# c# - 在 Windowsforms TabControl 中显示/隐藏选项卡

> ID：12457989
> 
> 赞同：0
> 
> 时间：2012-09-17T11:09:30.650
> 
> 标签：c#, winforms

> **可能重复：**
> [如何从 TabControl 中隐藏 TabPage](https://stackoverflow.com/questions/552579/how-to-hide-tabpage-from-tabcontrol)
> [在 tabControl 中隐藏和显示TabPage](https://stackoverflow.com/questions/3365025/hiding-and-showing-tabpages-in-tabcontrol)

我在 Windows 窗体应用程序中有一个 Tabcontrol。它有 5 个选项卡，在表单加载时我只想显示两个选项卡

有没有办法隐藏所有其他选项卡

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:12:44.347

转到：[http ://www.thejoyofcode.com/Show_and_Hide_tab_pages_in_Windows_Forms.aspx](http://www.thejoyofcode.com/Show_and_Hide_tab_pages_in_Windows_Forms.aspx)

或者

你也可以使用`tabPage.Visible`财产

# ruby-on-rails - 如何修复“不兼容的字符编码：UTF-8 和 ASCII-8BIT”？

> ID：12457996
> 
> 赞同：1
> 
> 时间：2012-09-17T11:10:24.363
> 
> 标签：ruby-on-rails, ruby, encoding

> 不兼容的字符编码：UTF-8 和 ASCII-8BIT

如何解决 Rails 3.2.3 和 Ruby 1.9.3 上的这个错误？

我试图将这两行放在 environment.rb 中：

```
Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8 
```

我确信 application.rb 也包含这一行 " `config.encoding = "utf-8"`。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:25:46.747

如果您有数据要存储在硬盘上，您可以尝试`data.force_encoding('UTF-8')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:29:28.887

考虑在带有编码的 .rb 文件的第一行上使用所谓的魔术注释：

```
# encoding: UTF-8

class Xyz
    ...
end 
```

在您放置带有重音符号和其他非 ASCII 字符的文本的文件中，这一点非常重要。它们是您提到的错误的主要原因。

有时，您可能会误输入一个字符，而不是一个字母，而是插入一个隐藏符号。还要检查您的文件中的这些。查看行尾和空格。

# loops - Pascal , 生成一串数字

> ID：12457997
> 
> 赞同：0
> 
> 时间：2012-09-17T11:10:48.857
> 
> 标签：loops, pascal

我在 pascal 中有一个问题：在下一个序列中生成前 n 个数字：1,1,2,2,2,3,3,3,3,4,4,4,4,4,... 我写了一个这些代码，但问题是它不能按我想要的方式工作。

```
var
s,c: string;
n,i,j: integer;
begin
 s:='';
 readln(n);
 begin
  for i := 1 to n do
   begin
    if ( length(s)/2 -1 >= n) then
    begin
     Break;
    end;
    for j := 1 to i + 1 do
    begin
     str(i,c);
     s:= s + c+',';
    end;

 end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:45:19.373

Here's a version that is shorter, and also removes the extra comma at the end: It's a full console program (and adds a prompt for the number of elements):

```
program Project2;

{$APPTYPE CONSOLE}

uses
  SysUtils;

var
  i, j: Integer;
  s: string;
  nItems: Integer;
begin
  s := '';
  Write('Enter # of elements: ');
  ReadLn(nItems);
  for i := 1 to nItems do
    for j := 1 to i + 1 do
    begin
      s := s + IntToStr(i) + ',';
    end;
  System.Delete(s, Length(s), 1); { Remove final comma )
  WriteLn(s);
  ReadLn;
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:30:03.613

我已经解决了我的问题，这是正确的代码，如果你能改进它会很好。

```
var
s,c: string;
n,i,j: integer;
begin
 s:='';
 readln(n);
 begin
  for i := 1 to n do
   begin

    for j := 1 to i + 1 do
    begin
     if ( length(s) > n*2  ) then
    begin
     Break;
    end;
     str(i,c);
     s:= s + c+',';
    end;

   end;
  end;
 Delete(s,length(s)-2,length(s));
 write(s);
 readln;
 end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:25:31.087

你可以改变你的内循环：

```
 for j := 1 to i + 1 do
    begin
     if ( length(s) > n*2  ) then
    begin
     Break;
    end;
     str(i,c);
     s:= s + c+',';
    end; 
```

首先，为了清楚起见，我建议你总是缩进，所以

```
 for j := 1 to i + 1 do
    begin
     if ( length(s) > n*2  ) then
       begin
        Break;
       end;
     str(i,c);
     s:= s + c+',';
    end; 
```

其次，您只需要`begin`and`end`将多个语句转换为单个语句，因此由于您只进入`break`其中，因此它们是多余的-只需直接使用 break ：

```
 for j := 1 to i + 1 do
    begin
     if ( length(s) > n*2  ) then Break;
     str(i,c);
     s:= s + c+',';
    end; 
```

接下来，请注意您正在重新计算`c`很多：

```
 str(i,c);
    suffix = c + ',';
    for j := 1 to i + 1 do
    begin
     if ( length(s) > n*2  ) then Break;
     s:= s + suffix;
    end; 
```

我不是很热衷于使用 break 因为它感觉像是一个 goto，所以也许你可以把它改成一个`repeat ... until`块：

```
 str(i,c);
    suffix = c + ',';
    j := 1;
    repeat 
      s := s + suffix;
      j := j + 1;
    until (j > i+1) or (length (s) > n*2); 
```

（请注意，`repeat`and`until`带有一个隐含的`begin`，`end`因此您不需要键入它们。）
现在您可能会争辩说，我降低了清晰度，因为它不那么明显循环只是增加了`j`. 在这种情况下，无论您喜欢什么，我都不会感到强烈，但是如果您经常使用 break ，请考虑是否`while`对`repeat`您更好。

你的情况`length (s) > n*2`让我感到困惑（没有其他人把它放在你的代码版本中）。您似乎出于某种原因想缩短它。你确定吗？我不是。下面是你得到的无限制输出的表格，然后是输出的前 n*2 项，以及字符串的前 n*2 个字符，所以你可以检查一下。该`break`声明的目的是什么？

```
n:      1
output: 1,1
length: 2
n*2:    2
first n*2 numbers:    1,1
first n*2 characters: 1,

n:      2
output: 1,1,2,2,2
length: 5
n*2:    4
first n*2 numbers:    1,1,2,2
first n*2 characters: 1,1,

n:      3
output: 1,1,2,2,2,3,3,3,3
length: 9
n*2:    6
first n*2 numbers:    1,1,2,2,2,3
first n*2 characters: 1,1,2,

n:      4
output: 1,1,2,2,2,3,3,3,3,4,4,4,4,4
length: 14
n*2:    8
first n*2 numbers:    1,1,2,2,2,3,3,3
first n*2 characters: 1,1,2,2,

n:      5
output: 1,1,2,2,2,3,3,3,3,4,4,4,4,4,5,5,5,5,5,5
length: 20
n*2:    10
first n*2 numbers:    1,1,2,2,2,3,3,3,3,4
first n*2 characters: 1,1,2,2,2,

n:      6
output: 1,1,2,2,2,3,3,3,3,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,6
length: 27
n*2:    12
first n*2 numbers:    1,1,2,2,2,3,3,3,3,4,4,4
first n*2 characters: 1,1,2,2,2,3, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:02:50.210

我会改变你的外循环的工作方式，所以`i`指出你在哪个位置，并引入第二个数字`element`，它代表当前元素。`element`然后每当内部循环运行时递增。

```
s:='';
readln(n);
element:=1;
begin
  for i := 1 to n do
  begin
    for j := 1 to i + 1 do
    begin
     str(element,c);
     s:= s + c+',';
    end;
    element:=element+1;
  end;
end; 
```