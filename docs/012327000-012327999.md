# StackOverflow 问答 12327000-12327999

# java - 在现有分析之前注入声纳分析

> ID：12327000
> 
> 赞同：3
> 
> 时间：2012-09-08T00:28:11.707
> 
> 标签：java, sonarqube

不久前，我设置[Sonar](http://www.sonarsource.org/)来扫描一个开发项目。使用 cronjob 每晚调用扫描。有一次，我遇到了运行 cronjob 的机器的问题，并且错过了一些夜间扫描。我从错过的某一天下载了源代码，并使用 Sonar Runner 完成了新的声纳扫描。正如我所料，Sonar 中的数据显示为最近的扫描，这不是我想要的。我想将该扫描注入特定日期，以便填写未运行扫描的日期。我在 sonar-project.properties 文件中没有看到执行此操作的选项。

有没有一种方法可以运行声纳扫描，但在我选择的日期而不是当前日期输入数据，以便它显示在我的声纳时间线中的适当位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T11:03:22.277

我没有使用过它们，但[Sonar 文档](http://docs.codehaus.org/display/SONAR/Analysis+Parameters)描述了可以进行历史分析的附加属性。具体来说，它是您需要设置的“sonar.projectDate”属性。

您尚未指定您正在使用哪种 Java 构建技术。我在下面包含了一些示例。

最后，您是否考虑过设置 Jenkins 来启动 Sonar，而不是 cron？运行 Jenkins 有很多充分的理由，但是如果您使用 Maven 作为构建工具，[Jenkins Sonar 插件](http://docs.codehaus.org/display/SONAR/Hudson+and+Jenkins+Plugin)使 Sonar 集成变得非常容易。

# Maven 示例

```
mvn clean install -DskipTests=true
mvn -Dsonar.projectDate=2012-09-01 sonar:sonar 
```

# 蚂蚁示例

```
ant -Dsonar.projectDate=2012-09-01 clean sonar 
```

**笔记：**

*   这假设您有一个名为“声纳”的目标来编译、测试和运行声纳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T20:50:11.413

你不能这样做。虽然有文档显示如何设置扫描日期，但这仅适用于回顾性扫描，并且只能按时间顺序进行。您不能将扫描插入比最近的时间点更早的时间点。我认为，您可以删除最近的扫描，直到适合您的追溯日期，但您希望在提交之前对其进行测试。

我的建议是不要担心。无论如何，声纳是一个近似工具，你应该能够处理奇怪的异常。

# java - 如何使用 contextualLaunch 来识别注释

> ID：12327001
> 
> 赞同：1
> 
> 时间：2012-09-08T00:28:10.967
> 
> 标签：java, eclipse, eclipse-plugin

我正在为 Eclipse 创建一个插件，我需要创建一个启动快捷方式，但该快捷方式应该仅在使用我定义的注释（你不会说：p）对类进行注释时才可用。

有人知道如何在 plugin.xml 中识别这个注释吗？我知道我必须使用 contextualLaunch，但这是我的第一个插件，我不知道如何使用它。

谢谢！[]的

# phpunit - CruiseControl / phpUnderControl 工件问题

> ID：12327003
> 
> 赞同：1
> 
> 时间：2012-09-08T00:28:21.177
> 
> 标签：phpunit, cruisecontrol, artifact, phpundercontrol

我已经设置了 Git 和 CruiseControl，并且刚刚完成了 phpUnderControl 的工作（本身就是一场噩梦，因为它缺少包和各种东西）。

所以我有所有的插件，比如 phpunit 和 php-documentor。

当我在我的项目上运行“ant”时，它构建得很好（只是为了检查我的 build.xml 是否良好）

从 PHPUnderControl 运行构建时，它会挂在图形生成上

```
[cc]Sep-08 01:10:22 ecutePublisher- executing command: /root/phpUnderControl/bin/phpuc.php graph logs/BIOSYNERGY artifacts/BIOSYNERGY 
```

它在这里坐了几个小时，在 Cruisecontrol 上处于“发布”状态，但点击说构建完成，如果幸运的话，我可能会看到预期的 9 个图表中的 4 个。

如果我手动运行它，大约需要 2 秒并给我所有 9 个图表（但在我停止巡航控制之前，它仍然停留在“发布”上的建筑物。

此外，Coverage atrifacts 似乎有效，但没有生成 index.html 文件，因此 coverage 选项卡显示错误。

文档有时有效，有时无效，但没有错误。

代码浏览器似乎从不显示任何代码？

Artifacts Publisher 是否缺少某些东西？

```
<artifactspublisher subdirectory="api" dest="artifacts/${project.name}" dir="projects/${project.name}/build/api"/>
          <artifactspublisher subdirectory="coverage" dest="artifacts/${project.name}" dir="projects/${project.name}/build/coverage"/>
          <execute command="phpcb --log projects/${project.name}/build/log --output projects/${project.name}/build/phpcb"/>
          <artifactspublisher dir="projects/${project.name}/build/phpcb" dest="artifacts/${project.name}" subdirectory="php-code-browser"/>
          <execute command="/root/phpUnderControl/bin/phpuc.php graph logs/${project.name} artifacts/${project.name}"/> 
```

谢谢你的帮助！

CC 安装在：[http ://pixelhero.co.uk:8080](http://pixelhero.co.uk:8080)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:49:03.683

如果您不依赖 phpUnderControl，我建议您切换到[Jenkins](http://jenkins-ci.org/)，因为它正在积极开发中，并且有一个由 PHPUnit 的主要作者提供的工作[项目模板。](http://jenkins-php.org/)

# database - HyperLogLog 算法是如何工作的？

> ID：12327004
> 
> 赞同：196
> 
> 时间：2012-09-08T00:28:21.063
> 
> 标签：database, algorithm, math, data-structures, hyperloglog

我最近在业余时间学习了不同的算法，我遇到的一个看起来很有趣的算法叫做 HyperLogLog 算法——它估计一个列表中有多少个独特的项目。

这对我来说特别有趣，因为当我看到“基数”值（直到最近我一直认为它是计算而不是估计的）时，它让我回到了我的 MySQL 时代。

所以我知道如何在*O* ( *n* ) 中编写一个算法来计算数组中有多少唯一项。我用 JavaScript 写了这个：

```
function countUniqueAlgo1(arr) {
    var Table = {};
    var numUnique = 0;
    var numDataPoints = arr.length;
    for (var j = 0; j < numDataPoints; j++) {
        var val = arr[j];
        if (Table[val] != null) {
            continue;
        }
        Table[val] = 1;
        numUnique++;
    }
    return numUnique;
} 
```

但问题是我的算法虽然*O* ( *n* ) 使用了大量内存（将值存储在 中`Table`）。

我一直在阅读[这篇论文](http://algo.inria.fr/flajolet/Publications/FlFuGaMe07.pdf)，了解如何在*O* ( *n* ) 时间内计算列表中的重复项并使用最少的内存。

它解释说，通过散列和计数位或可以在一定概率内（假设列表均匀分布）估计列表中唯一项目的数量。

我已经阅读了论文，但我似乎无法理解它。谁能给一个更外行的解释？我知道哈希是什么，但我不明白它们是如何在这个 HyperLogLog 算法中使用的。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-10-04T19:19:54.930

这个算法背后的主要技巧是，如果你观察一个随机整数流，看到一个二进制表示以某个已知前缀开头的整数，那么流的基数很有可能是 2^(前缀的大小) .

也就是说，在随机整数流中，约 50% 的数字（二进制​​）以“1”开头，25% 以“01”开头，12.5% 以“001”开头。这意味着，如果您观察随机流并看到“001”，则该流的基数为 8 的可能性更高。

（前缀“00..1”没有特殊含义。它的存在只是因为在大多数处理器中很容易找到二进制数中的最高位）

当然，如果你只观察一个整数，这个值错误的可能性就很高。这就是算法将流分成“m”个独立子流并保持每个子流的可见“00...1”前缀的最大长度的原因。然后，通过取每个子流的平均值来估计最终值。

这就是这个算法的主要思想。有一些缺失的细节（例如，对低估计值的修正），但在论文中都写得很好。对不起糟糕的英语。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2016-02-05T08:42:59.317

HyperLogLog 是一种[概率数据结构](https://stackoverflow.com/a/35050835/1090562)。它计算列表中不同元素的数量。但与直接的方式（拥有一个集合并向集合中添加元素）相比，它以一种近似的方式执行此操作。

在查看 HyperLogLog 算法是如何做到这一点之前，必须了解您为什么需要它。直接方式的问题在于它会占用`O(distinct elements)`空间。为什么这里有一个大的 O 符号，而不仅仅是不同的元素？这是因为元素可以有不同的大小。一个元素可以是`1`另一个元素`"is this big string"`。因此，如果您有一个巨大的列表（或大量元素），它将占用大量内存。

* * *

**概率计数**

怎样才能对许多独特的元素进行合理的估计？假设您有一个长度为 的字符串`m`，由`{0, 1}`等概率组成。它以 0、2 个零、k 个零开始的概率是多少？它是`1/2`和。这意味着，如果您遇到一个带有零的字符串，您已经大致浏览了元素。所以这是一个很好的起点。拥有一个均匀分布的元素列表，您可以计算二进制表示中最大零前缀的最大数量，这将为您提供合理的估计。`1/4``1/2^k``k``2^k``0``2^k - 1`

`0`问题是从t中均匀分布数字的假设`2^k-1`太难实现（我们遇到的数据大多不是数字，几乎从不均匀分布，并且可以在任何值之间。但是使用一个[好的散列函数](https://en.wikipedia.org/wiki/Cryptographic_hash_function)你可以假设输出位将是均匀分布的，并且大多数散列函数的输出介于`0`和之间`2^k - 1`（[SHA1](https://en.wikipedia.org/wiki/SHA-1)为您提供介于`0`和之间的值`2^160`）。所以到目前为止，我们已经实现的是，我们可以`k`通过仅存储来估计具有最大位基数的唯一元素的数量一个大小的`log(k)`位数。缺点是我们的估计有很大的差异。我们几乎创造了一个很酷的东西[**1984 年的概率计数**](http://www.cse.unsw.edu.au/~cs9314/07s1/lectures/Lin_CS9314_References/fm85.pdf)论文（估计稍微聪明一点，但我们仍然接近）。

**日志日志**

在进一步进行之前，我们必须了解为什么我们的第一个估计不是那么好。其背后的原因是高频 0 前缀元素的随机出现会破坏一切。改进它的一种方法是使用许多散列函数，为每个散列函数计算最大值，最后将它们平均。这是一个绝妙的想法，可以改进估计，但[**LogLog 论文**](http://www.ic.unicamp.br/~celio/peer2peer/math/bitmap-algorithms/durand03loglog.pdf)使用了一种略有不同的方法（可能是因为散列有点昂贵）。

他们使用一个哈希，但将其分为两部分。一个叫桶（桶的总数是`2^x`），另一个 - 和我们的哈希基本一样。我很难理解发生了什么，所以我举个例子。假设你有两个元素和你的散列函数，它给出值的形式`0`来`2^10`产生 2 个值：`344`和`387`. 你决定有 16 个桶。所以你有了：

```
0101 011000  bucket 5 will store 1
0110 000011  bucket 6 will store 4 
```

通过拥有更多的桶，您可以减少方差（您使用了更多的空间，但它仍然很小）。使用数学技能，他们能够量化误差（即`1.3/sqrt(number of buckets)`）。

**超级日志**

[**HyperLogLog**](http://algo.inria.fr/flajolet/Publications/FlFuGaMe07.pdf)没有引入任何新的想法，但大多使用大量的数学来改进之前的估计。研究人员发现，如果你从桶中删除 30% 的最大数字，你会显着提高估计值。他们还使用了另一种算法来平均数字。这篇论文数学很重。

* * *

我想以最近的一篇论文作为结尾，该论文展示了[hyperLogLog 算法的改进版本](http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/40671.pdf)（直到现在我还没有时间完全理解它，但也许以后我会改进这个答案）。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-09-11T17:45:37.737

直觉是，如果您的输入是一大组随机数（例如散列值），它们应该在一个范围内均匀分布。假设范围最大为 10 位，以表示最大为 1024 的值。然后观察最小值。假设它是 10。那么基数估计约为 100 (10 × 100 ≈ 1024)。

当然，请阅读论文以了解真正的逻辑。

可以在此处找到带有示例代码的另一个很好的解释：
[该死的酷算法：基数估计 - Nick 的博客](http://blog.notdot.net/2012/09/Dam-Cool-Algorithms-Cardinality-Estimation)

# ember.js - 防止视图重新渲染

> ID：12327020
> 
> 赞同：4
> 
> 时间：2012-09-08T00:30:16.653
> 
> 标签：ember.js

有没有办法告诉 Ember 不要重新渲染视图？

一个简单的用例：

我有一个动态填充的客户列表。单击列表中的客户会转到客户详细信息页面。当我单击“返回”时，我希望在客户列表中处于完全相同的位置。

通常，Ember 会重新渲染视图（当我转换到另一个状态时），我之前的位置会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:04:59.087

我讨厌成为坏消息的承担者，但是如果您正在导航到应用程序的不同部分，则无法停止使用 ember 重新渲染。如果它不再可见，则这些项目已从 DOM 中弹出并且不再存在。

我已经在我自己的应用程序中解决了这个问题，方法是使用 jQuery 来获取页面或对象的滚动位置。[jQuery 滚动顶部](http://api.jquery.com/scrollTop/)。我所做的是我在模型上放置了一个存储滚动位置的位置。然后在视图上我有一个类似的东西

```
didInsertElement: function() {

    //Restore previous scroll position
    $('#item').scrollTop( this.get('model.scrollPosition') ); /* or on older ember builds `this.getPath('model.scrollPosition')` */

    //Update the model with new scroll position when user scrolls
    var _self = this;
    $('#item').scroll(function(e){
         _self.get('model').set('scrollPosition', $(this).scrollTop());
    });

} 
```

这里的关键点是视图**必须**重新渲染。没有停止。作为开发人员，您的工作是以可以恢复的方式保存视图所需的任何状态（滚动位置、具有焦点的元素等）。Ember 为您提供了执行此操作的工具。

# java - 我们最近听说的 Java 1.7 漏洞利用会适用于 Android 吗？

> ID：12327023
> 
> 赞同：0
> 
> 时间：2012-09-08T00:30:26.037
> 
> 标签：java, android, security, exploit

[我们最近听说的 Java 1.7 漏洞利用](http://www.oracle.com/technetwork/topics/security/alert-cve-2012-4681-1835715.html)会适用于 Android 吗？我还没有看到任何关于这方面的文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:36:12.520

IMO，它不太可能适用。

据我们所知，当某些（不是全部）浏览器插件执行某些恶意（不受信任）Java 小程序时，就会出现*问题*。没有任何迹象/公告表明 android 的网络浏览器存在此问题。

此外，Android 使用独立编码/实现的 Java 代码库，因此如果问题出在 Oracle Java 安全管理器或 applet 支持代码代码中，则很可能不在相应的 Android 代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:38:17.043

Android 使用自己的[虚拟机](http://en.wikipedia.org/wiki/Apache_Harmony)，因此可能不会受到影响

# php - 正确输入 strtotime 值

> ID：12327028
> 
> 赞同：0
> 
> 时间：2012-09-08T00:31:29.717
> 
> 标签：php, date, format, strtotime

我想通过以下语句转换日期

```
$date=date('d M Y, H:m',strtotime($date)); 
```

`09 Sep 2012, 11:09`当我尝试 $date 的各种值时，它会打印出来：

```
11:00 AM Sunday, 09 Sep 2012
Sunday 09 Sep 2012, 11:00 AM
09 Sep 2012 11:00 AM 
```

`strtotime()`该函数需要什么日期格式？在我看来，其中至少有一个符合“英文文本日期时间描述”条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T01:13:40.287

的有效格式在[此处](http://www.php.net/manual/en/datetime.formats.php)`strtotime`详述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:45:32.413

从这个网站（[http://www.tuxradar.com/practicalphp/4/5/2](http://www.tuxradar.com/practicalphp/4/5/2)）

请注意以下日期：2003 年 8 月 25 日上午 10:26。尽管这看起来格式正确，但 strtotime() 无法处理它，因为它有逗号 - 是的，它们使我们更容易阅读，但 strtotime() 处理它们时会感到困惑。如果你有带逗号的日期，请务必使用 str_replace() 将它们删除。

如何处理 strtotime() -> [http://www.w3schools.com/php/func_date_strtotime.asp](http://www.w3schools.com/php/func_date_strtotime.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T01:26:05.530

看起来唯一的方法是通过正则表达式以正确的顺序对元素进行排序，然后用相应的数字替换月份名称。这样的字符串 strtotime 将管理。注意：我说的是 PHP 5.2x

编辑：我找到了原因，为什么 strtotime “不起作用”是我在日期格式字符串中打错字，应该有 'd MY, H:i'

# c++ - 包括守卫风格，C++

> ID：12327031
> 
> 赞同：1
> 
> 时间：2012-09-08T00:32:14.703
> 
> 标签：c++, coding-style, include-guards

我有一个 .h 文件，其中包含几个类定义。我想在这个文件中使用 C++ 的包含防护；但是，我想知道哪种使用包含防护的方式被认为是正确/正确的？

一个守卫保护一切

```
#ifndef FOO_BAR
#define FOO_BAR

class Foo
{
};

class Bar
{      
};

#endif 
```

或多个单独的警卫。

```
#ifndef FOO
#define FOO

class Foo
{
};

#endif

#ifndef BAR
#define BAR

class Bar
{      
};

#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T00:34:55.953

它们是包含守卫，防止**文件**的双重包含。因此，它们应该为每个文件定义一次，而不是每个类或函数或其他任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T02:10:53.880

您是否考虑过使用#pragma 一次？大多数现代编译器都支持它。

[#pragma once 是安全的包含守卫吗？](https://stackoverflow.com/questions/787533/is-pragma-once-a-safe-include-guard)

# regex - 凯特的前瞻模式

> ID：12327032
> 
> 赞同：1
> 
> 时间：2012-09-08T00:32:18.397
> 
> 标签：regex, greedy, lookahead, non-greedy, kate

我正在为一本法律书籍编制一个案例表。我已将其转换为 HTML，因此我可以使用标签进行搜索和替换操作，我目前在 Kate 工作。正文引用案例名称，案例引用在脚注中，例如

`<i>Smith v Jones</i>127 ......... [other stuff including newline characters].......</br>127 (1937) 173 ER 406;`

我已经能够在 Kate 中进行前瞻性工作，使用：

`<i>.*</i>([0-9]{1,4}) .+<br/>\1 .*<br/>`

...但我遇到了贪婪的问题。

文本很乱，所以我真的需要一步一步地找到匹配项，而不是依赖批处理。

是否有支持前瞻和非贪婪运算符的 Linux（或 Windows）文本编辑器，或者我将不得不尝试 grep 或 sed？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T02:09:55.337

我不熟悉 Kate，但它似乎使用[QRegExp](http://qt-project.org/doc/qt-5.0/QRegExp.html)，它在许多重要方面与其他类似 Perl 的正则表达式风格不兼容。例如，大多数风格允许您通过附加问号（例如`.*`=> `.+?`）使单个量词非贪婪，但在 QRegExp 中，您只能使它们全部贪婪或全部非贪婪。更糟糕的是，看起来凯特甚至不允许你这样做——`Non-Greedy`例如，通过一个复选框。

但无论如何，最好不要一直依赖非贪婪的量词。一方面，正如许多人所说，他们不能保证最短的匹配。你应该养成更具体的习惯，什么应该和不应该匹配，当这不是太难的时候。例如，如果您要匹配的部分不包含除示例字符串中的标签之外的任何标签，您可以这样做：

```
<i>[^<]*</i>(\d+)\b[^<]+<br/>\1\b[^<]*<br/> 
```

使用`[^<]*`instead of的好处`.*`是它永远不会尝试匹配 next 之后的任何内容`<`。 `.*`总是会首先抓取文档的其余部分，只是几乎一直回溯到起点。非贪婪版本 ,`.*?`最初将只匹配下一个`<`，但如果稍后匹配尝试失败，它将继续并消耗`<`和超越，最终消耗整个文档。

如果*可以*有其他标签，则可以使用`[^<]*(<(?!br/>)[^<]*)*`。它将使用任何不是 的字符`<`，或者`<`如果它不是`<br/>`标签的开头。

```
<i>[^<]*</i>(\d+)\b[^<]*(<(?!br/>)[^<]*)*<br/>\1\b[^<]*(<(?!br/>)[^<]*)*<br/> 
```

顺便说一句，您所说的前瞻（我假设您的意思是`\1`）实际上是*反向引用*。我的`(?!br/>)`正则表达式中的 是前瞻的一个例子——在这种情况下是*负*前瞻。Kate/QRegExp 文档声称支持前瞻但非捕获组——例如——不支持`(?:...)`，这就是为什么在最后一个正则表达式中使用所有捕获组的原因。

如果您可以选择切换到其他编辑器，我强烈建议您这样做。我最喜欢的是[EditPad Pro](http://www.editpadpro.com/index.html)；它具有我在编辑器中见过的最好的正则表达式支持。

# python - 我的 If、Else 和 Elif 语句出现“语法错误”（Python）

> ID：12327037
> 
> 赞同：2
> 
> 时间：2012-09-08T00:33:10.433
> 
> 标签：python, syntax, if-statement

这是我的代码：

```
print "Hello, and welcome to the Slightly Interactive Autobiography of Robbie Wood."
print "Lets get started, shall we? What chapter would you like to read first?"
chapter = raw_input("Please type either 'Chapter 1', 'Chapter 2' or 'Chapter 3': ")

if chapter = "Chapter 1":
    print "Chapter 1"
    print chapter_one

else chapter = "Chapter 2":
    print "Chapter 2"
    print chapter_two

elif chapter = "Chapter 3":
    print "Chapter 3"
    print chapter_three

elif:
    chapters = raw_input("Please type either 'Chapter 1', 'Chapter 2', or 'Chapter 3': ")

# Variables - Chapters
chapter_one = "text here..."
chapter_two = "text here..."
chapter_three = "text here..." 
```

这是来自终端的确切错误消息：

```
Last login: Fri Sep  7 17:22:59 on ttys000
Robbies-MacBook-Pro:~ robbiewood$ /var/folders/y6/kx37qgbs34124ztdgb4tphs00000gn/T/Cleanup\ At\ Startup/autobiography-368756862.498.py.command ; exit;
File "/private/var/folders/y6/kx37qgbs34124ztdgb4tphs00000gn/T/Cleanup At Startup/autobiography-368756862.497.py", line 9
    else chapter = "Chapter 2":
               ^
SyntaxError: invalid syntax
logout

[Process completed] 
```

有人可以帮我解决这个问题吗？我是一名初学者 Python 编码器，我正在为一个学校项目编写一个“稍微互动的自传”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T00:35:25.830

第二组应该是一个`elif`，最后一个是你的`else`情况，它们*都*应该`==`用于相等比较，而不是`=`变量赋值：

```
# Define these variables *before* you use them...
# Variables - Chapters
chapter_one = "text here..."
chapter_two = "text here..."
chapter_three = "text here..."

if chapter == "Chapter 1":
    print "Chapter 1"
    print chapter_one

# This one should be an elif
elif chapter == "Chapter 2":
    print "Chapter 2"
    print chapter_two

elif chapter == "Chapter 3":
    print "Chapter 3"
    print chapter_three
# And the last one is an else
else:
    chapters = raw_input("Please type either 'Chapter 1', 'Chapter 2', or 'Chapter 3': ") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:38:12.083

首先，您使用 来检查两件事是否相等`==`，而不仅仅是`=`为分配保留。其次，你应该用 改变你的第二个`else`，用改变你`elif`的最后`elif`一个`else`。此外，您需要在使用`chapter_xxx`变量*之前*定义它们。尝试这个：

```
print "Hello, and welcome to the Slightly Interactive Autobiography of Robbie Wood."
print "Lets get started, shall we? What chapter would you like to read first?"
chapter = raw_input("Please type either 'Chapter 1', 'Chapter 2' or 'Chapter 3': ")

chapter_one = "text here..."
chapter_two = "text here..."
chapter_three = "text here..."

if chapter == "Chapter 1":
    print "Chapter 1"
    print chapter_one

elif chapter == "Chapter 2":
    print "Chapter 2"
    print chapter_two

elif chapter == "Chapter 3":
    print "Chapter 3"
    print chapter_three

else:
    chapters = raw_input("Please type either 'Chapter 1', 'Chapter 2', or 'Chapter 3': ") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:35:19.027

在您的 if/elif 语句中替换`=`为。`==`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T00:35:29.807

有2个问题：

**(1)**您在-statement的表达式中使用了赋值运算符 ( `=`) 而不是布尔比较运算符 ( )。`==``if`

您在`if`-statement 中的表达式必须评估为`True`or `False`，您不能在那里进行分配。

**（2）** *另外*，你不能`elif`在你的 -statement 的末尾有一个`if`，它应该是

```
 if BooleanExpr:
    ...
 elif BooleanExpr:
    ...
 elif BooleanExpr:
    ...
 else:
    ... 
```

即，如果你要使用`elif`它必须`if`在 any 之后和之前`else`。

有关更多信息，请参阅[Python 文档](http://docs.python.org/tutorial/controlflow.html)。

# eclipse - java eclipse中的静态函数可以热插拔吗？

> ID：12327042
> 
> 赞同：2
> 
> 时间：2012-09-08T00:34:15.953
> 
> 标签：eclipse, hotswap

我知道你可以在 Eclipse 中修改一个方法并热交换它。那是使用动态加载类实现的吗？那么类的静态方法呢，如果我在运行时修改它，你可以交换它吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:35:22.257

你应该尝试一下，自己看看。:-) 但根据我的经验，是的，你可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T09:48:42.523

是的，但目前不确定静态类变量。

# sql - PostgreSQL：频率表扩展

> ID：12327046
> 
> 赞同：2
> 
> 时间：2012-09-08T00:34:48.567
> 
> 标签：sql, postgresql, generate-series

有谁知道如何在 PostgreSQL 中扩展频率表？

例如，变换表 x：

```
data   | frequency
-------+-----------
string |         4 
```

进入

```
data   | index 
-------+-------
string |     1
string |     2
string |     3
string |     4 
```

设置代码：

```
CREATE TABLE x (
  data TEXT,
  frequency INTEGER
);
INSERT INTO x VALUES ('string',4); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T01:58:36.817

这非常简单[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SERIES)：

```
SELECT data, generate_series(1, frequency) AS index
FROM   x; 
```

# javascript - 使用 JavaScript 解析分隔文本行

> ID：12327047
> 
> 赞同：1
> 
> 时间：2012-09-08T00:34:52.933
> 
> 标签：javascript, string, text, extract

嗨，我对 javascript 很陌生，我想提取一个文本，但只是其中的一部分。例如，如果它提取此文本：

```
honey_00.jpg :: 1200 x 1703 :: 369.39 KB 
```

我希望它给我`honey_00.jpg`我不想要其他垃圾信息。我只想要文件名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:37:56.840

试试这个：

```
var filename = str.match(/.+\.jpg/); 
```

请注意，这仅在文件名位于字符串开头并且您正在获取 .jpg 文件时才有效。

* * *

要匹配 .jpg、.png 或 .gif 文件，您可以使用以下命令：

```
var filename = str.match(/.+\.(jpg|png|gif)/)[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:45:38.837

您可以使用拆分功能：

```
var str="honey_00.jpg :: 1200 x 1703 :: 369.39 K";
var n=str.split(" :: "); 
```

演示：http: [//jsfiddle.net/g9b3D/1/](http://jsfiddle.net/g9b3D/1/)

使用正则表达式是一种选择，但据我所知，正则表达式较慢。

**编辑：**也许你想看看这个：http: [//jsperf.com/regex-vs-split/2](http://jsperf.com/regex-vs-split/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:40:49.950

我会使用正则表达式。例如...

```
var text = "honey_00.jpg :: 1200 x 1703 :: 369.39 KB";
var pattern = /(.*) :: .* :: .*/;
var fileName = pattern.exec(text)[1]; 
```

# javascript - 递归显示n叉树

> ID：12327055
> 
> 赞同：1
> 
> 时间：2012-09-08T00:35:48.823
> 
> 标签：javascript, tree

我试图在浏览器中显示一个 n 元树结构。

这是从中提取数据结构的示例：

```
var jsonObj = [{
    id: "window1", 
    name: "Corporate",
    children: [
        { id: "window12", name:"IT", children: [
            { id: "window121", name:"Dev", children: [] },
            { id: "window122", name:"Web", children: [] }
        ] }, 
        { id: "window13", name:"HR", children: [] }, 
        { id: "window14", name:"Finance", children: [] }
    ]
}]; 
```

我打算让它（即结构）看起来像这棵树（仅侧面）：

[http://gravite.labri.fr/images/tidyTree.jpg](http://gravite.labri.fr/images/tidyTree.jpg)

目前它看起来很接近[http://imm.io/Dz3V](http://imm.io/Dz3V)，但不完全在那里。

这是我编写的产生该输出的算法：

```
var create_graph_components = function (json, level, offset) {
    for (var i = 0; i < json.children.length; i++) {
        offset += create_graph_components(json.children[i], level + 1, offset);
    }
    if (json.children.length == 0) {
        $('#wrapper').append("<div class=\"component window\" style=\"top:"+offset+"px;left: "+level*150+"px\" id=\""+json.id+"\"><strong>"+json.name+"</strong></div>");
        offset = 50;
    } else {
        $('#wrapper').append("<div class=\"component window\" style=\"top:"+offset/2+"px;left: "+level*150+"px\" id=\""+json.id+"\"><strong>"+json.name+"</strong></div>");
    }
    return offset;
}; 
```

所做的就是将 div 添加到页面的正确位置，这就是我遇到的问题。

有没有人知道我可以如何改进我的算法，以更接近我想要的方式漂亮地打印树 - 我想我已经接近了，但失去了想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:35:20.623

下面怎么样...

```
function create_graph_components(json, level, offsetStart) {

    var offsetEnd = offsetStart;

    for (var i = 0; i < json.children.length; i++) {
        offsetEnd = create_graph_components(json.children[i], level + 1, offsetEnd);
    }

    var offset;            
    if (json.children.length == 0) {
        offset = offsetEnd;            
        // Node is a leaf therefore extend offsetEnd
        offsetEnd += 50;
    } else {
        // Calculates position halfway between child nodes
        offset = offsetStart + (offsetEnd - offsetStart - 50) / 2;
        // Node is a branch therefore we do not extend the offsetEnd
    }

    // Create the element
    var child = $('<div id="' + json.id + '" class="component window">' +
                      '<strong>' + json.name + '</strong>' +
                  '</div>');

    // Position the element
    child.css({
        top: offset + "px",
        left: level * 150 + "px"
    });

    // Add it to the wrapper
    $("#wrapper").append(child);     

    return offsetEnd;

} 
```

我也创建了一个小提琴[http://jsfiddle.net/j7Pms/](http://jsfiddle.net/j7Pms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-13T06:54:31.553

我看到你的问题来自 7 old，但是如果你需要重构你的代码，[这是如何使用 angular recursive template 来做到的](https://stackoverflow.com/questions/59711702/angular-drag-and-drop-not-working-when-dropping-elements-in-n-ary-tree-represent)。如果你觉得它有用，我会留下一个模板片段。

```
<table>
     <ng-template #recursiveList let-tree>
         <div cdkDropList (cdkDropListDropped)="drop($event)">
             <div *ngFor="let node of tree; let i=index " cdkDrag>
                 <tr>
                    <app-default-node [node]="node"></app-default-node>
                    <td *ngIf="node.children!==null && node.children.length > 0" cdkDrag>
                        <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: node.children }"></ng-container>
                    </td>
                 </tr>
             </div>
         </div>
     </ng-template>
</table>
<ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: tree }"></ng-container> 
```

# python - 检索完整号码

> ID：12327057
> 
> 赞同：2
> 
> 时间：2012-09-08T00:35:58.293
> 
> 标签：python, integer

假设我有一个字符串如下：`expression = '123 + 321'`.

我正在逐个字符地遍历字符串，如下所示`for p in expression`：我正在检查是否`p`是使用`p.isdigit()`. 如果`p`是一个数字，我想抓住整个数字（所以抓住`123`and `321`，而不仅仅是`p`最初会是`1`）。

我怎样才能在 Python 中做到这一点？

在 C（来自 C 背景）中，等价于：

```
int x = 0;
sscanf(p, "%d", &x);
// the full number is now in x 
```

**编辑：**

基本上，我接受来自接受正整数、+、-、*、/ 以及括号的用户的数学表达式：'(' 和 ')'。我正在逐个字符地遍历字符串，我需要能够确定该字符是否为数字。使用`isdigit()`，我可以。但是，如果它是一个数字，我需要获取整个数字。怎么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:42:14.047

```
>>> from itertools import groupby
>>> expression = '123 + 321'
>>> expression = ''.join(expression.split()) # strip whitespace
>>> for k, g in groupby(expression, str.isdigit):
        if k: # it's a digit
            print 'digit'
            print list(g)
        else:
            print 'non-digit'
            print list(g)

digit
['1', '2', '3']
non-digit
['+']
digit
['3', '2', '1'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:59:36.767

这是可以从许多不同方向解决的问题之一。这是我认为基于以下的优雅解决方案`itertools.takewhile`：

```
>>> from itertools import chain, takewhile
>>> def get_numbers(s):
...     s = iter(s)
...     for c in s:
...         if c.isdigit():
...             yield ''.join(chain(c, takewhile(str.isdigit, s)))
... 
>>> list(get_numbers('123 + 456'))
['123', '456'] 
```

这甚至适用于列表理解：

```
>>> def get_numbers(s):
...     s = iter(s)
...     return [''.join(chain(c, takewhile(str.isdigit, s)))
...             for c in s if c.isdigit()]
... 
>>> get_numbers('123 + 456')
['123', '456'] 
```

查看其他答案，我发现这与[jamylak](https://stackoverflow.com/a/12327091/577088)的`groupby`解决方案没有什么不同。如果您不想丢弃多余的符号，我建议您这样做。但是，如果您确实想丢弃它们，我认为这会更简单一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T00:44:59.433

虽然我不熟悉`sscanf`，但我不是 C 开发人员，但看起来它使用格式字符串的方式与我使用 python`re`模块的方式没有什么不同。像这样的东西：

```
import re

nums = re.compile('\d+')
found = nums.findall('123 + 321')
# if you know you're only looking for two values.
left, right = found 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T00:54:07.583

Python 文档包含一个关于[simulating`scanf`](http://docs.python.org/library/re.html#simulating-scanf)的部分，它让您了解如何使用正则表达式来模拟`scanf`（或者`sscanf`，在 Python 中都是一样的）的行为。特别`r'\-?\d+'`是对应于整数正则表达式的 Python 字符串。（`r'\d+'`对于一个非负整数。）所以你可以将它嵌入到你的循环中

```
integer = re.compile(r'\-?\d+')
for p in expression:
    if p.isdigit():
        # somehow find the current position in the string
        integer.match(expression, curpos) 
```

但这仍然反映了一种非常类似于 C 的思维方式。在 Python 中，您的迭代器变量`p`实际上只是一个从原始字符串中提取出来并独立存在的单个字符。因此，在循环中，您自然无法访问字符串中的当前位置，并且尝试计算它将不是最优的。

我建议改为使用 Python 内置的正则表达式匹配迭代方法：

```
integer = re.compile(r'\-?\d+') # only do this once in your program

all_the_numbers = integer.findall(expression) 
```

现在`all_the_numbers`是表达式中所有整数的字符串表示形式的列表。如果您想将它们实际转换为整数，那么您可以这样做而不是最后一行：

```
all_the_numbers = [int(s) for s in integer.finditer(expression)] 
```

在这里我使用`finditer`了代替，`findall`因为您不必在再次迭代它们以将它们转换为整数之前制作所有字符串的列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T07:38:28.593

您可以使用`shlex` [http://docs.python.org/library/shlex.html](http://docs.python.org/library/shlex.html)

```
>>> from shlex import shlex
>>> expression = '123 + 321'
>>> for e in shlex(expression):
...     print e
... 
123
+
321

>>> expression = '(92831 * 948) / 32'
>>> for e in shlex(expression):
...     print e
... 
(
92831
*
948
)
/
32 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-08T00:39:16.453

```
e_array = expression.split('+')
i_array = map(int, e_array) 
```

并`i_array`保存表达式中的所有整数。

* * *

更新

如果您已经知道表达式中的所有特殊字符并且想要全部消除它们

```
import re

e_array = re.split('[*/+\-() ]', expression)  # all characters here is mult, div, plus, minus, left- right- parathesis and space
i_array = map(int, filter(lambda x: len(x), e_array)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-08T00:41:25.270

我会在字符串上拆分`' + '`字符串，为您提供它们之外的内容：

```
>>> expression = '123 + 321'
>>> ex = expression.split(' + ')
>>> ex
['123', '321']
>>> int_ex = map(int, ex)
>>> int_ex
[123, 321]
>>> sum(int_ex)
444 
```

这很危险，但您可以使用`eval`：

```
>>> eval('123 + 321')
444 
```

我只是在尝试解析字符串，并对其进行原始计算。

# regex - .htaccess 正则表达式问题

> ID：12327059
> 
> 赞同：0
> 
> 时间：2012-09-08T00:36:18.327
> 
> 标签：regex, .htaccess, rewrite, expression

我仍然没有答案，所以我在这里发布。

我想以`root/language/sub/.../document`.htaccess 文件的形式匹配一个 url，然后将其重写为`root/sub/.../document.php?lang=language`

我接近命中，但似乎我的正则表达式没有“捕捉”输入网址。这里是 ：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond ^[a-z]{2}.*$/%{REQUEST_FILENAME}\.php -f
RewriteRule ^([a-z]{2})/(.*)$ $2.php?lang=$1 
```

有人可以指出我这里有什么问题吗？我不是正则表达式或 apache 重写方面的专家。

特维姆

*** 编辑 ***

`root`代表域即`mydomain.net`

这里有一些例子 ：

`mydomain.net/fr/contact`

应该重写为

`mydomain.net/contact.php?lang=fr`

和

`mydomain.net/en/articles/view`

应该重写

`mydomain.net/articles/view.php?lang=en`

ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:57:50.113

我相信您正在寻找这种配置：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} ^(.*/|)(en|de|fr)/(.*)$ [NC]
RewriteCond %1%3.php -f
RewriteRule ^(.*/|)(en|de|fr)/(.*)$ $1$3.php?lang=$2 [NC,QSA,L] 
```

* * *

***解释：***

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

*检查请求的 url 是否不是目录。如果是，则不处理任何重写。*

```
RewriteCond %{REQUEST_FILENAME} ^(.*/|)(en|de|fr)/(.*)$ [NC] 
```

*检查 url 是否包含内部`/xx/`部分，其中`xx`one`en`或. 标志允许大写和小写字符，因此例如或将被接受。如果 url 中没有这样的“语言”部分，则不会处理重写。`de``fr``[NC]``EN``Fr`*

```
RewriteCond %1%3.php -f 
```

*检查`%1%3.php`文件是否存在，其中`%1`is`(.*/|)`和`%3`is`(.*)`与之前的 RewriteCond 匹配`^(.*/|)(en|de|fr)/(.*)$`。如果这样的 php 文件不存在，则不会进行重写。*

```
RewriteRule ^(.*/|)(en|de|fr)/(.*)$ $1$3.php?lang=$2 [NC,QSA,L] 
```

*RewriteRule中的left条件如果到了这一行就会匹配，因为它已经用RewriteCond检查过了，所以现在它会处理重写到php文件，添加**lang**部分，但是因为还有`[QSA]`flag，它也会保留其他GET参数，因此**lang**将添加到现有参数中。Flag`[L]`说这是最后一个应该应用的重写规则，并且不会再用这个 url 处理重写。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:45:10.393

好吧，我不确定 root 在那里做什么，你试过了吗

```
RewriteRule ^root/([a-z]{2})/(.*)$ root/$2.php?lang=$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:45:28.300

有什么问题是第二个`RewriteCond`。但是你的问题很模糊。如果您的意思是您正在尝试转换

```
root/foo/sub/.../something.php 
```

到

```
root/sub/.../something.php?lang=foo 
```

然后开始坐立不安：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^root/([^/]+)/sub/(.*)/%{REQUEST_FILENAME}$ root/sub/$2/%{REQUEST_FILENAME}?lang=$1 
```

# preg-match - preg_match 分隔符 - 没有匹配

> ID：12327063
> 
> 赞同：0
> 
> 时间：2012-09-08T00:37:07.223
> 
> 标签：preg-match

我需要编写一个 php preg_match 来识别我存储在变量中的一些 html 中的一些标签之间的价格：

`<span class="price-ld">250</span>`

我试着这样写，但它一直给我错误：

`preg_match('/<span class="price-ld">(.*)/i', $candidate[0], $price);`

我对 php 很陌生，所有这些分隔符对我来说都很沉重。我真的很感谢您的专业人士的帮助-对您来说可能很容易！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:45:16.963

首先 - [http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php) - 请阅读它。然后您会看到 /(.*)/i 匹配整个字符串。

请在此处提供您的 html（需要知道价格包装标签）。

# java - 如何放置三个jar文件？

> ID：12327081
> 
> 赞同：-2
> 
> 时间：2012-09-08T00:40:42.037
> 
> 标签：java, jar

我是Java新手，想运行一个Java程序，需要三个jar：swt-3.6M3-win32-win32-x86.jar，DJNativeSwing-SWT.jar，DJNativeSwing.jar。我有它们，但我不知道我应该把它们放在哪里。有人能帮我吗？

以下是进口代码：

```
import chrriis.dj.nativeswing.swtimpl.NativeComponent;
import chrriis.dj.nativeswing.swtimpl.NativeInterface;
import chrriis.dj.nativeswing.swtimpl.components.JWebBrowser;
import chrriis.dj.nativeswing.swtimpl.components.WebBrowserAdapter;
import chrriis.dj.nativeswing.swtimpl.components.WebBrowserEvent; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:53:51.700

将它们添加到您的类路径中。在 Eclipse 中：右键单击项目>属性>Java 构建路径，然后将它们添加为外部 jar。

# wpf - 我可以将数据绑定到父属性是索引的索引属性吗

> ID：12327083
> 
> 赞同：0
> 
> 时间：2012-09-08T00:40:50.103
> 
> 标签：wpf, binding

将 WPF 与 MVVM 一起使用，我的 VM 具有索引属性

```
IObject1 this[string key] 
```

我需要将视图的一个属性绑定到IObject1的一个属性上，我需要的object1的key就是视图中控件的名称。本质上我需要嵌套绑定

```
<TextBlock x:Name="Key1"  Text="{Binding ["Key1"].DisplayText} 
```

但是，名称对于不同的项目非常有用，所以我需要嵌套绑定

```
<TextBlock x:Name="Key1"  Text="{Binding [{Binding Name, RelativeSource={RelativeSource Self}].DisplayText} 
```

我的实际情况比这更复杂，但如果我能做到这一点，我想我可以弄清楚其余的。

我正在使用 Blend，我很想教我的设计师在 Blend 中做这类事情，但如果需要，我很乐意使用代码。

我是否忽略了一些明显的东西？我不知道该怎么做，也没有偶然发现正确的 Google / Stack Overflow 搜索词。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T06:16:41.170

这是一个奇怪的解决方案大声笑，无论如何，您可以使用 MultiBinding 和转换器来解决它。

```
<TextBlock.Text>
<MultiBinding Converter={StaticResource combine}>
<Binding Path=Dictionary />
<Binding Path=Name />
</Multibinding> 
```

# javascript - 使用 CSS、HTML 和 Javascript 在随机图像的页面上调整图像大小

> ID：12327085
> 
> 赞同：2
> 
> 时间：2012-09-08T00:41:10.363
> 
> 标签：javascript, jquery, html, css, image

这是我给你的问题。

我有一个页面，其中使用一些手写的 Javascript 代码放置了随机图像。前提是图像都是不同大小的。

现在我想显示图像，以便它占据大部分屏幕（ style="width: 95%;" ）或者图像不会调整到高于它自己的最大尺寸。所以本质上图像总是完全显示（至少水平）。

我不想做的是硬编码除了图像位置之外的任何东西。所以我想以某种方式动态地获取最大尺寸并强制页面识别它们。

我一直在寻找 Javascript（和建议的 JQuery）函数和 CSS 代码来管理我正在寻找的内容，但无济于事。部分问题可能是我没有找到可靠的可读来源，在学校学到了一些东西，但老实说，我对我正在寻找的东西没有正确的线索。现在我看到我的选择，我觉得我所要求的无法完成。

但是我在这里提出了问题。并粘贴我到目前为止的代码。欢迎任何建议、更改和帮助。我不知道也找不到。

```
<!DOCTYPE html>
<html>
<head>
<title>Welcome</title>
<script type="text/javascript" src="./js/jquery-1.8.1.min.js">
<script type="text/javascript">
var links = ['./img/1-teech.png', './img/2-slingshot.png', './img/3-upright.jpg', './img/4-drawing.png', './img/5-wing.png', './img/6-flying.png', 'img/7-filly.png'];
var credits = ['Pencils', 'Pencils', 'Eljordo', 'Ezynell', 'Laydee Kaze', 'Yu Chie', 'Honey Puff'];
function setRandomImage()
{
setImage(getRandomInt(links.length - 1));
}

function setImage(var i)
{
document.getElementById('tichimage').src = links[i];
document.getElementById('credits').innerHTML = credits[i];
}

function getRandomInt(max)  
{  
  return Math.floor(Math.random() * (max + 1));  
} 
</script>
</head>

<body>
<p align="center"><img src="" alt="Tich" style=" width: 95%;" id="tichimage"/></img>     <br /></p>
<p align="center">By <span id ="credits"></span></p>
<p align="center"><img src="./img/random-button.png" alt="Random Image" onclick="setRandomImage()"/></p>
<script type="text/javascript">
setRandomImage();
</script>
</body>
</html> 
```

我意识到并非我所做的一切都完全 100% 符合 Web 标准，但是 ehhhhh。它被设计为更多的测试页面，让我可以在其中做一些事情，所有以前的事情都是我自己做的。但我现在想要的东西似乎太难了。而且我不知道该去哪里。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:09:29.650

这是一个工作示例，它将捕获图像的`height`and`width`并将其分配给一个变量：http: [//jsfiddle.net/charlescarver/BrwAj/2/](http://jsfiddle.net/charlescarver/BrwAj/2/)

```
var img = new Image();
img.src = $("#tichimage").attr("src");
img.onload = function() {
    var width = this.width;
    var height = this.height;
} 
```

# python - 在 OpenCV 中，cv2.filter2D() 期望什么数据类型？

> ID：12327086
> 
> 赞同：3
> 
> 时间：2012-09-08T00:41:13.787
> 
> 标签：python, opencv, gradient, edge-detection, convolution

我正在自学边缘检测器，我正在尝试使用 OpenCV`filter2D`来实现我自己的梯度计算器，类似于`cv2.Sobel()`. 在 OpenCV 的 Python 接口中，`cv2.filter2D()`允许用户使用自定义过滤器对图像进行卷积。在 OpenCV 命名法中，此过滤器称为“内核”。

使用来自[MIT 行人数据集的图像（](http://cbcl.mit.edu/software-datasets/PedestrianData.html) [per00001.png](http://dl.dropbox.com/u/35993/OpenCV_StackOverflow/per00001.png)），我发现它产生了一个看起来合理的输出。（代码在下面，[输出图像在这里](http://dl.dropbox.com/u/35993/OpenCV_StackOverflow/gradientX.png)。）`cv2.Sobel()`

```
#OpenCV's Sobel code (outputs nice-looking gradient)
import cv2, numpy
img = cv2.imread("./per00001.png")

gradientX = cv2.Sobel(img, -1, 1, 0)

compression_params = [cv2.cv.CV_IMWRITE_PNG_COMPRESSION, 9]
cv2.imwrite("gradientX.png", gradientX, compression_params) 
```

**↑ 好**

* * *

**↓ 坏了**

当我尝试实现自己的`Sobel()`类似代码（如下）时，我得到一个[全黑图像](http://dl.dropbox.com/u/35993/OpenCV_StackOverflow/gradientX_customSobel.png)。我推测问题出在`horizontalSobelMtx`我传入的内核参数 ()的数据类型上`cv2.filter2D()`。但是，我无法找到任何有关`cv2.filter2D()`.

```
#Custom Sobel code (outputs all-black image)
import cv2, numpy
img = cv2.imread("./per00001.png")

horizontalSobelMtx = [[-1,0,1],[-2,0,2],[-1,0,1]]
horizontalSobelMtx = numpy.asanyarray(horizontalSobelMtx) #guessing about appropriate datatype.
gradientX_customSobel = cv2.filter2D(img, -1, horizontalSobelMtx)

compression_params = [cv2.cv.CV_IMWRITE_PNG_COMPRESSION, 9]
cv2.imwrite("gradientX_customSobel.png", gradientX_customSobel, compression_params) 
```

所以，这是我的问题：

`cv2.filter2D(..., kernel, ...)`1) 参数期望什么数据类型`kernel`？

2）如果这里的数据类型`kernel`不是问题，那么是什么导致我的自定义 Sobel 代码输出空白图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-26T23:32:20.393

卷积核的系数应始终为浮点数。这意味着您应该在分配该矩阵时使用 CV_32FC1。在此特定示例中，请尝试：

```
horizontalSobelMtx = [[-1,0,1],[-2,0,2],[-1,0,1]]
horizontalSobelMtx = numpy.asanyarray(horizontalSobelMtx, np.float32) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:25:12.160

我有同样的问题，但我相信我有部分答案。基本上，您需要对内核进行加权。过滤器算法的工作方式是将您的过滤器相乘，然后将所有值相加并将它们用作新值。关键是添加部分。添加 8 个不同的值（一些是负的，一些是正的）通常会产生一个很大的数字，并且显示为黑色（或者在我的情况下，全白）。所以你必须补偿加法。将内核中的所有值除以内核的大小/面积。[请参阅此处](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/filter_2d/filter_2d.html)的示例并注意该行

```
 kernel = Mat::ones( kernel_size, kernel_size, CV_32F )/ (float)(kernel_size*kernel_size); 
```

他们将所有内容除以 kernel_size 的平方。

我自己，我这样做了，它有帮助（显示了一些东西）但是它被淘汰了，所以我通过将它添加到我的代码中找到了我的完美体重：

```
 int d2weight = 1;
 //... start loop, make your Mat kernel
 kernel = kernel / d2weight;  //put right before your filter2d() call
 createTrackbar("kernel", "kernel", &d2weight, 255, NULL); 
```

并在 d2weight = 140 附近摆弄酒吧，我的照片“弹出”到视野中。

# cuda - 按键排序 > 10 个整数序列。有推力

> ID：12327087
> 
> 赞同：0
> 
> 时间：2012-09-08T00:41:16.697
> 
> 标签：cuda, thrust

我想执行一个`sort_by_key`我有一个键序列和多个值序列的地方。

一个通常执行此操作

```
sort_by_key(
             key, 
             key + N, 
             make_zip_iterator(
                                make_tuple(x1 , x2 , ...)
                               )
            ) 
```

但是，我想对每个长度为 N 的 > 10 个序列进行排序。推力不支持大小 >= 10 的元组。那么有没有办法解决这个问题？

当然，可以保留一个单独的`key`向量副本并对 10 个序列的束进行排序。但我想在一个电话中完成所有事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:13:56.263

`thrust::tuple`被硬编码为始终有 10 个元素，因此没有直接的方法可以`zip_iterator`从十多个单独的迭代器中形成 a，因此无法在单个融合操作中按键对 10 多个不同的迭代器进行排序（并且隐含地没有办法也将超过 10 个迭代器传递给用户函子）。

如果你真的想不出一种有用的方法将一些单独的向量组合成一个迭代器（例如形成一个元组值的向量），那么一种替代方法可能是使用置换迭代器。如果您从计数迭代器创建一个数组并对其进行排序，则类似于：

```
device_vector<int> indices(N);
copy(make_counting_iterator(0), make_counting_iterator(N), indices.begin());
sort_by_key(key, key+N, indices); 
```

`indices`现在将有序索引保存到您本来会排序的向量中。然后，您可以创建一个置换迭代器，该迭代器可用于通过您的密钥“收集”输入数据，作为后续算法调用的一部分。您可以根据需要制作任意数量的置换迭代器，它们可以是 zip 迭代器的置换，以便在后续代码中根据需要提供 12 个输入迭代器的不同“视图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T07:34:18.997

实际上，您可以使用简单的“分散”操作。只执行一次“thrust::sort_by_key”操作，然后对每个数据向量应用“thrust::scatter”操作。这些值将分配到相应的位置。

```
thrust::sequence(indices.begin(), indices.end());
thrust::sort_by_key(keyvals.begin(), keyvals.end(), indices.begin());

//now indices keep the locations of the sorted key values
foreach ( ... ) {
    thrust::scatter(data.begin(), data.end(), indices.begin(), sorteddata.begin());
} 
```

聚散操作非常强大，打开了很多机会。

# ruby-on-rails - rails redirect_to 发布

> ID：12327089
> 
> 赞同：4
> 
> 时间：2012-09-08T00:41:34.063
> 
> 标签：ruby-on-rails, redirect

*我在The Rails 3 Way*一书中看到了一个例子，它说

```
redirect_to post 
```

这是否有一些特殊含义`post`，或者如果它只是一个示例的糟糕选择，并且`post`它只是一个域对象并且它正在重定向到该对象的 url。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T03:17:29.353

我需要查看完整的示例以获得完整的答案，但我的猜测是作者只是选择了“发布”作为其中一个模型的名称，并没有意识到这可能会导致读者对 POST 操作感到困惑。

作为 HTTP 协议 ( [http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html) ) 的一部分，您实际上无法重定向到 POST 操作。或者，更明确地说，您使用重定向调用的任何目标都需要使用 GET 方法返回。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:53:54.070

查看[Rails 路由指南](http://guides.rubyonrails.org/routing.html)，然后应该清楚为什么可以。

此外，如果您想查看应用程序运行的路线：

```
cd path/to/your/app
rake routes 
```

这将列出您的应用程序中可用的路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T01:09:31.587

你需要一个 Post 资源和 config/routes.rb 中的相应路由

例如，只需执行“rails g resource post title:string content:text”即可生成一个。“redirect_to post”中的路由是动态处理的。Post“post”的实例作为redirect_to方法的参数传入，导致页面重定向到posts#show操作并传递该Post实例的:id。这是“轨道魔法”

# android - Android Webview 上的 Facebook 登录按钮重定向到空白页面

> ID：12327092
> 
> 赞同：2
> 
> 时间：2012-09-08T00:42:33.140
> 
> 标签：android, facebook, facebook-javascript-sdk, android-webview, facebook-login

我正在尝试使用在 Android Webview 上使用 JS Facebook SDK 的 facebook 登录按钮。当我点击它打开一个新页面并重定向到[https://www.facebook.com/dialog/oauth](https://www.facebook.com/dialog/oauth) ... 这是一个带有 javascript 代码的空白页面。网络视图留在这里。

我在用着：

```
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setAppCacheEnabled(true);
webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:23:59.250

您需要添加逻辑以重定向回您网站的原始网址。

为此，您需要首先创建一个扩展**[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)**类并覆盖**onPageFinished**方法的新 java 类，如下所示：

```
public class CustomWebViewClient extends WebViewClient
{      
        @Override
        public void onPageFinished(WebView view, String url) {

            //https://www.facebook.com/dialog/permissions.request  
            //actually  works for me, but I put the URL you say is coming up    
            //blank in there instead, whatever works for you:
            if(url.startsWith("https://www.facebook.com/dialog/oauth")){
               String redirectUrl = "http://www.mydomain.com/MyApp/";
                view.loadUrl(redirectUrl);
               return;
           }
            super.onPageFinished(view, url);
        }
} 
```

其次，只需将其添加到您的**WebView**：

```
webview.setWebViewClient(new CustomWebViewClient()); 
```

该页面完成加载后，它将重定向回您的原始页面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-17T09:05:14.283

我不知道我当时到底做了什么，但问题已经解决了。我给你代码。尝试找出:)

```
WebView browser,mWebviewPop;
private void open(){
    browser = (WebView)findViewById(R.id.webView1);
    browser.getSettings().setLoadsImagesAutomatically(true);
    browser.getSettings().setJavaScriptEnabled(true);
    browser.getSettings().setAppCacheEnabled(true);
    browser.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    browser.getSettings().setSupportMultipleWindows(true);
    browser.setWebViewClient(new MyBrowser());
    browser.setWebChromeClient(new MyCustomChromeClient());
    mContext=this.getApplicationContext();
    browser.loadUrl(target_url);
    MainActivity.this.progressBar.setProgress(0);
    browser.setDownloadListener(new DownloadListener() {
        public void onDownloadStart(String url, String userAgent,
                                    String contentDisposition, String mimetype,
                                    long contentLength) {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse(url));
            startActivity(intent);
        }
    });
}

private class MyBrowser extends WebViewClient {
    String redirectUrl = "MY URL";

    private void noInternet() {
        WebView webview = (WebView) findViewById(R.id.webView1);
        RelativeLayout tryAgainLayout = (RelativeLayout)findViewById(R.id.tryAgainLayout);
        RelativeLayout progressLayout = (RelativeLayout)findViewById(R.id.progressLayout);
        tryAgainLayout.setVisibility(View.VISIBLE);
        webview.setVisibility(View.GONE);
        webview.destroy();
        progressLayout.setVisibility(View.INVISIBLE);
    }

    public void visible(){
        WebView webview = (WebView) findViewById(R.id.webView1);
        RelativeLayout tryAgainLayout = (RelativeLayout)findViewById(R.id.tryAgainLayout);
        RelativeLayout progressLayout = (RelativeLayout)findViewById(R.id.progressLayout);
        tryAgainLayout.setVisibility(View.INVISIBLE);
        webview.setVisibility(View.INVISIBLE);
        progressLayout.setVisibility(View.VISIBLE);
    }

    public void unvisible(){
        WebView webview = (WebView) findViewById(R.id.webView1);
        RelativeLayout tryAgainLayout = (RelativeLayout)findViewById(R.id.tryAgainLayout);
        RelativeLayout progressLayout = (RelativeLayout)findViewById(R.id.progressLayout);
        tryAgainLayout.setVisibility(View.INVISIBLE);
        webview.setVisibility(View.VISIBLE);
        progressLayout.setVisibility(View.INVISIBLE);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        String host = Uri.parse(url).getHost();
        if (host.equals(target_url_prefix))
        {
            if(mWebviewPop!=null)
            {
                mWebviewPop.setVisibility(View.GONE);
                baseLayout.removeView(mWebviewPop);
                mWebviewPop=null;
            }
            return false;
        }

        if(host.equals("m.facebook.com"))
        {
            return false;
        }
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onReceivedError(WebView view, int errorCode,
                                String description, String failingUrl) {
        noInternet();
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        visible();
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        unvisible();
        System.out.println("\n" +view.getUrl());
        if(url.startsWith("https://m.facebook.com/v2.1/dialog/oauth")){
            if(mWebviewPop!=null)
            {
                mWebviewPop.setVisibility(View.GONE);
                baseLayout.removeView(mWebviewPop);
                mWebviewPop=null;
            }
            view.loadUrl(redirectUrl);
            return;
        }
        super.onPageFinished(view, url);
    }
}

private class MyCustomChromeClient extends WebChromeClient
{

    @Override
    public boolean onCreateWindow(WebView view, boolean isDialog,
                                  boolean isUserGesture, Message resultMsg) {
        mWebviewPop = new WebView(mContext);
        mWebviewPop.setVerticalScrollBarEnabled(false);
        mWebviewPop.setHorizontalScrollBarEnabled(false);
        mWebviewPop.setWebViewClient(new MyBrowser());
        mWebviewPop.getSettings().setJavaScriptEnabled(true);
        mWebviewPop.getSettings().setSavePassword(false);
        mWebviewPop.setLayoutParams(new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT));
        baseLayout.addView(mWebviewPop);
        WebView.WebViewTransport transport = (WebView.WebViewTransport) resultMsg.obj;
        transport.setWebView(mWebviewPop);
        resultMsg.sendToTarget();

        return true;
    }

    @Override
    public void onCloseWindow(WebView window) {
    }

    @Override
    public void onProgressChanged(WebView view, int newProgress) {
        MainActivity.this.setValue(newProgress);
        super.onProgressChanged(view, newProgress);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-11T06:43:05.083

好的，据我所知，这里发生的事情是 oauth 有两种“方式”可以工作，或者它会回调“到父页面”（如弹出的“登录我”消失），或者它可以重定向你到一个登录页面，然后到其他一些 url（非弹出式样式），在成功或失败之后（一种链式转发）。不幸的是，WebView 似乎不太适合“回调父页面”样式，因此您必须做一些恶作剧，例如拥有第二个 WebView（此处为 jincy 的答案，或另见此[）](https://stackoverflow.com/a/19068076/32453)。

# c# - ScrollViewer 中的 ScrollViewer

> ID：12327093
> 
> 赞同：2
> 
> 时间：2012-09-08T00:42:37.447
> 
> 标签：c#, wpf, windows-7, touch

我想在 Windows 7（使用触摸）上创建一种体验，我可以在其中拥有只能垂直滚动的外部`ScrollViewer`（即屏幕大小）。在里面`ScrollViewer`我会有其他几个`ScrollViewer`只能水平滚动的控件，就像一个书架。

我可以做到这一点，但我遇到问题的领域是触摸和事件的焦点。如果我水平平移，我只希望`ScrollViewer`我触摸的水平滚动，如果我垂直平移，我只希望外部`ScrollViewer`滚动。

目前，（没有代码干预）嵌套`ScrollViewer`控件意味着水平（内部）`ScrollViewer`控件获取触摸焦点，而外部垂直`ScrollViewer`似乎永远不会触发滚动事件。

我想我可以使用附加事件或预览事件来捕获触摸动作和触发滚动方法，但我不确定实现这样的事情的最佳方法。

这是我拥有的 XAML 的概述：

```
<ScrollViewer x:Name="OutterScrollViewer" HorizontalScrollBarVisibility="Disabled" PanningMode="VerticalOnly">
    <StackPanel Orientation="Vertical">
            <ScrollViewer x:Name="ScrollViewer1" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                             ...content...
            </ScrollViewer>
            <ScrollViewer x:Name="ScrollViewer2" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled">
            ...content...
            </ScrollViewer>
            <ScrollViewer x:Name="ScrollViewer3" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled" PanningMode="HorizontalOnly">
            ...content...
            </ScrollViewer>
    </StackPanel>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T12:15:00.020

我遇到了同样的问题，我想让外面的那个水平滚动，而在里面我有 3 个我想垂直滚动的滚动查看器。这是一些代码：

```
<ScrollViewer VerticalScrollMode="Disabled" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Visible" HorizontalScrollMode="Enabled">
    <ScrollViewer VerticalScrollMode="Auto" VerticalScrollBarVisibility="Auto">
        Code
    </ScrollViewer>
    ...
</ScrollViewer> 
```

# java - 拆分字符串并将其解析为整数

> ID：12327094
> 
> 赞同：2
> 
> 时间：2012-09-08T00:42:58.577
> 
> 标签：java

由于某种原因，我的这部分代码中有一些逻辑（java.lang.ArrayIndexOutOfBoundsException）错误。我希望用户输入任何内容并将其拆分并解析为整数。如果用户未能这样做，请再次询问他们。如果他们输入“g5 3 76h 23”之类的内容，让程序接受它为 5 3。或者如果我可以让程序拒绝这一点，直到用户只输入 0 到 9 之间的两个数字，用空格隔开，那很好以及。用户还可以选择输入“q”退出。但是，每次我运行它时，似乎没有任何东西被分割成一个新的数组。我得到了错误。

```
/** 
 * Prompts the user for input
 */
public void promptUser() {

// a Scanner object that uses System.in for input.

    Scanner scan = new Scanner(System.in);

// a prompt for the user, asking them for input.

    System.out.print("Pick a coordinate [row col] or press [q] to quit: ");

//         Get input from the user, checking for errors. If the input is
//         correct (e.g., two numbers that in bounds and have not 
//         already been clicked), then call the click method for desired 
//         coordinates. If the user wants to quit the game then make sure 
//         to update the boolean state variable and print out a message.

    String input = scan.next();
    String del = "[\\s,;\\n\\t]+"; // these are my delimiters
    String[] token = input.split(del); // here i will save tokens

    int val0 = 11, val1 = 11;
    boolean tf = true;
    while(tf)
    {
    if(token[0] == "q")
        {
        isRunning = false;
                    System.out.println("Thank you for playing");
        }
    else
        {
        try
            {
            val0 = Integer.parseInt(token[0], 10);
            }
        catch (NumberFormatException nfe)
            {
            // invalid data - set to impossible
            val0 = 11;
            }
        try
            {
            val1 = Integer.parseInt(token[1], 10);
            }
        catch (NumberFormatException nfe)
            {
            // invalid data - set to impossible
            val1 = 11;
            }
        }
    if( !(((val0 >= 0) && (val0 < rows)) && ((val1 >= 0) && (val1 < cols))) )
        {
        System.out.println("Input Invalid, pick a coordinate [row col] or press [q] to quit: ");
        input = scan.next();
        for(int i=0;i<2;i++)
            {
            token = input.split(del);
            }
                }
            else if(false) //atm
                {

                }
            else
        {
                    tf = false;

                }
    click(val0, val1);
    } //while loop
} // promptUser 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:45:45.197

您需要验证返回`token[]`数组的长度，因为可能没有返回“令牌”。IE，你不应该在没有首先确保它们存在的情况下`token[0]`尝试访问。`token[1]`

示例检查：

```
if(token.length > 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T06:40:08.000

从扫描仪文档：

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。

您可以将其更改为：

```
scan.useDelimiter(del); // If you want to split on more than just whitespace
while(scan.hasNext()) {
    String input = scan.next();

    if("q".equals(input)) {
        System.out.println("Thank you for playing");
        return;
    }
    // etc. Put in a list or array for use later.
} 
```

请记住，字符串是对象，因此`==`仅当两个字符串是同一个对象时才返回 true，而不是当它们具有相同的值时。用于`.equals`价值比较。

# php - PHP Table：我正在尝试为我网站中的每个 mysql 表行创建新行

> ID：12327096
> 
> 赞同：4
> 
> 时间：2012-09-08T00:43:33.060
> 
> 标签：php, mysql, html, loops

基本上我已经在 1 行从 mysql 检索数据，并使它看起来像一个带有边框和东西的表，但我希望它对 mysql 表上的每一行重复。这是我到目前为止使用的以下代码：

```
while($info = mysql_fetch_array( $data )) 
 { 
 echo "<table width='1000' cellpadding='10' cellspacing='5' border='1'>"; 

 echo "<tr>

    <td><center><b>".$info['id']."</td></center></b>"."<td><center><b>".$info['username']."</td></center></b>"."<td><center><b>".$info['kills']."</td></center></b>"."<td><center><b>".$info['deaths']."</td></center></b>"."<td><center><b>".$info['ratio']."</td></center></b></tr>"; 

 echo "</table>"; 
 } 
```

更新：

```
 echo "<table width='1000' cellpadding='10' cellspacing='5' border='1'>"; 
 while($info = mysql_fetch_array( $data )) 
 { 
 echo "<tr> 
    <td><center><b>".$info['id']."</td></center></b>"."<td><center><b>".$info['username']."</td></center></b>"."<td><center><b>".$info['kills']."</td></center></b>"."<td><center><b>".$info['deaths']."</td></center></b>"."<td><center><b>".$info['ratio']."</td></center></b></tr>"; 

 } 
 echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T00:45:22.070

您想要获取数据行的循环之外的表标记：

```
echo "<table width='1000' cellpadding='10' cellspacing='5' border='1'>"; 
while($info = mysql_fetch_array( $data )) 
{ 
    echo "<tr>
    <td><center><b>".$info['id']."</td></center></b>"."<td><center><b>".$info['username']."</td></center></b>"."<td><center><b>".$info['kills']."</td></center></b>"."<td><center><b>".$info['deaths']."</td></center></b>"."<td><center><b>".$info['ratio']."</td></center></b></tr>"; 
} 
echo "</table>"; 
```

由于您是 PHP 新手，我可能应该将其扩展一下：

您的代码现在将回显表格开始标记：

```
<table width='1000' cellpadding='10' cellspacing='5' border='1'> 
```

然后进入 while 循环并回显它找到的所有行：

```
<tr><td><center><b>Something1></b></td></tr> // shortened for example.
<tr><td><center><b>Something2></b></td></tr>
<tr><td><center><b>Something3></b></td></tr>
<tr><td><center><b>Something4></b></td></tr> 
```

然后当它存在循环时，它将输出表格的结束标记：

```
</table> 
```

您之前所做的是为每一行数据输出一个表格。为了将来参考，最好查看您的源代码以了解正在发生的事情。

编辑：当我浏览您的代码注释时，我将其格式化以查看发生了什么，您可能希望通过以下格式使您的代码更易于阅读：

```
echo "<table width='1000' cellpadding='10' cellspacing='5' border='1'>"; 
while($info = mysql_fetch_array( $data )) 
{ 
    echo "<tr> 
        <td><center><b>".$info['id']."</b></center></td>
        <td><center><b>".$info['user‌​name']."</b></center></td>
        <td><center><b>".$info['kills']."</b></center></td>
        <td><center><b>".$info['deaths']."</b></center></td>
        <td><center><b>".$info['‌​ratio']."</b></center></td>
        </tr>"; 
} 
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:45:31.603

只需将您的表格标签移出循环即可。

```
echo '<table>';

foreach( $row )
{
  echo '<tr>....</tr>';
}

echo '</table>'; 
```

# wxwidgets - C++ 动态 WX 菜单绑定

> ID：12327098
> 
> 赞同：0
> 
> 时间：2012-09-08T00:43:44.750
> 
> 标签：wxwidgets

我正在使用 wxMenu，并且想要一种处理事件的方法。我真的只需要处理单击菜单项时发生的事件的东西。具体来说，给定一个任意函数指针（形式为 void(*)(void)），我想让它在给定事件发生时调用该函数指针。

菜单不会提前知道，所以我理解的活动表已经出来了。

我找到了 Bind and Connect，但似乎都不起作用（另请参阅[Connect](https://stackoverflow.com/questions/2174584/binding-event-to-wxmenu-instead-of-wxmenuitem)）。

添加代码：

```
class Menu : public wxMenu {
    public:
        void handle_event(wxCommandEvent& event) {
            volatile int i = 6; //to prevent this method being optimized out
            //breakpoint here that never gets hit
            //selecting a callback to call (based on event.GetID()) could go here
        }
};

//Later, in a function (menu is instance of Menu)
menu->Connect(
    wxEVT_COMMAND_MENU_SELECTED,
    (wxObjectEventFunction)(&Menu::handle_event),
    NULL,menu
);
//Also tried:
menu->Bind(wxEVT_COMMAND_MENU_SELECTED,&(Menu::handle_event),menu); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:14:00.070

第一条评论：您的命名约定非常混乱：Menu 是 wxMenu 的子类，并且有一个名为 menu 的实例。如果我必须维护这段代码，我会发疯的。

第二条评论：你究竟想在这里实现什么，而你不能用“正常”的方式做到这一点？

正常的方法是这样的：

向标准 wxMenu 类的实例添加选项

```
myMenu.Append(IDM_Option1,"Option 1");
...
myMenu.Append(IDM_OPtionN,"OPtion N"); 
```

绑定事件

```
 Bind( wxEVT_COMMAND_MENU_SELECTED, &myWindow::OnMenuEvent, this, 
            IDM_Option1, IDM_OptionN ); 
```

处理事件

```
 myWindow::OnMenuEvent( wxCommandEvent& event )
  {
      switch ( event.GetId() ) {
           case IDM_Option1
           ... 
```

这可以处理大多数情况，而不需要您继承 wxMenu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:49:54.707

您不能`void (*)(void)`直接绑定带有签名的函数，因为`Bind()`期望事件处理程序的`void (*)(EventClass&)`位置`EventClass`取决于您绑定到的事件的类型，例如`wxCommandEvent`在您的情况下。

当然，您可以完全自由地使用`boost.bind`, `boost.lambda`, C++11 lambdas，或者只是手动将调用从一个接受事件参数的函数转发到一个不接受它的函数，所以 using`Bind()`对您来说应该工作得很好。

# html - 在 Chrome 和 IE 上的 CSS 错误，在 Firefox 上有效

> ID：12327100
> 
> 赞同：-3
> 
> 时间：2012-09-08T00:44:06.143
> 
> 标签：html, css

请看本页左侧店面图片下的地址： [http ://walkerloden.com/about.html](http://walkerloden.com/about.html)

当我使用 Firefox 时，它在图片的正下方，但当我使用 IE 或 Chrome 时，它​​位于页面中间。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:47:26.487

整体设计相当落后。但是要使用你所拥有的，你可以在该表中添加一个 clear:left ，它就可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:49:58.983

如果您再添加两个来解决您的问题`<br>`，它将对两者都有效。

这不是处理该问题的最佳方法，但它会解决它（最终您需要将文本放置在 div 内的图像下方而不是 use `<br>`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:50:56.430

再加两个`<br>`，然后它工作正常

# timezone - Event_New API 时区 - 支持的时区列表

> ID：12327102
> 
> 赞同：1
> 
> 时间：2012-09-08T00:44:42.863
> 
> 标签：timezone, eventbrite

**支持的时区列表在哪里？**

当我们使用时区“美国/博伊西”调用 Event_New 时，我们会收到一个错误：

```
Invalid time zone.  Please consult our list of supported timezones. 
```

我找到了这个链接：http: [//developer.eventbrite.com/doc/timezones/](http://developer.eventbrite.com/doc/timezones/)。

在它上面，我发现“美国/博伊西”列出（不工作），我们知道“太平洋/檀香山”正在工作，但不在此列表中。**我想知道某处是否有明确的清单？**

## 更多信息

我们从[http://www.geonames.org](http://www.geonames.org)获得了我们的时区列表：(http://download.geonames.org/export/dump/timeZones.txt)

我们可以对我们的转换脚本进行调整以解决异常值，但最好知道什么是可接受的，什么是不可接受的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:16:41.747

任何 Olson 时区标签都应该是 Eventbrite API 上的有效输入。这听起来像一个错误。

我已针对此问题向 Eventbrite 提交了错误报告。解决后我会在这里更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T19:32:38.503

评论 Ryan 的回答（我还不到 50 岁，无法发表评论）。似乎也不支持“美国/蒙克顿”？

请求数据：

```
{ title: 'geofreddy',
  start_date: '2013-08-10 09:00:00',
  end_date: '2013-08-17 17:00:00',
  timezone: 'America/Moncton',
  venue_id: <id of my venue> } 
```

API 响应：

```
{ error_type: 'Timezone error',
  error_message: 'Invalid time zone.  Please consult our list of supported timezones.' } 
```

看到这个问题：

[Event_New API 时区 - 它是否接受 Olson tz 值？](https://stackoverflow.com/questions/12180293/event-new-api-timezone-does-it-accept-olson-tz-values)

我可以通过将时区作为 GMT 偏移量（即 GMT-4）来解决问题。

# java - 简单卡类的空点异常错误

> ID：12327116
> 
> 赞同：3
> 
> 时间：2012-09-08T00:47:06.737
> 
> 标签：java, nullpointerexception

我是 Java 的初学者，我一直在编写测试代码来应用我读到的一些概念。所以，我想创建一个类来描述扑克牌。卡片类包含描述套件和值的字段（所有 4 个套件为 1 - 13）。如您所见，这个类的创建非常简单——

```
public class Card {
    private String suite; 
    private int cardValue;

    Card(String s, int cV){
    this.suite = s;
    this.cardValue = cV;
    }

    public String getSuite(){
    return this.suite;
    }

    public int getCardValue(){
    return this.cardValue;
    }
} 
```

我创建了另一个类来测试这个类，并将 52 张卡片添加到一个数组中（我有另一个类将处理 52 张卡片组，但这在我的问题的上下文中并不重要）。这个名为`CardTest`的类包含 main 方法。我创建了一个 for 循环，将所有内容附加到卡片组数组中，但是当我想要遍历卡片组并打印出卡片值（套件和值）时，我的问题就出现了。我收到 NullPointException 错误。这是 cardTest 类：

```
public class CardTest {
    public static void main(String[] args){
        Card[] temp = new Card[52];
        for (int i = 0; i <12; i++){
            temp[i] = new Card("Spade", i + 1);
            temp[i+13] = new Card("Club", i + 1);
            temp[i+26] = new Card("Diamond", i + 1);
            temp[i +39] = new Card("Heart", i + 1);
        }
        for (int i = 0; i < 52; i++){
            System.out.println(temp[i].getSuite());
        }
    }
} 
```

我试图搜索有关此类错误的问题，但我收集到的唯一一件事是 Card 对象被设置为默认的“null”值存在问题，这会在方法调用中产生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:52:40.860

您用于创建卡片的 for 循环是错误的，您只创建 12*4=48 张卡片，将 temp[12]、temp[25]、temp[38] 和 temp[51] 留空，试试

```
 for (int i = 0; i <13; i++){
        temp[i] = new Card("Spade", i + 1);
        temp[i+13] = new Card("Club", i + 1);
        temp[i+26] = new Card("Diamond", i + 1);
        temp[i +39] = new Card("Heart", i + 1);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T00:52:54.363

显然，您没有向`Card`数组中添加 52 个实例（您为 12 次迭代中的每一次添加 4 个，12 * 4 = 48 ！= 52）。因此，当您遍历整个数组时，某些值将不可避免地是`null`（请记住，对象数组最初仅包含`null`s）。循环直到`i < 13`应该解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T00:52:22.733

问题出在这里：

```
 temp[i+13] = new Card("Club", i + 1); 
```

它永远不会是 12，这就是你得到空指针异常的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T00:52:25.273

问题是您只将`temp`数组填充到索引 50 (11 + 39)，第二个循环尝试访问索引 51。第一个循环的上限应该是 13，而不是 12。

# c# - TreeView SelectedItemChanged 未触发命令

> ID：12327119
> 
> 赞同：2
> 
> 时间：2012-09-08T00:47:27.827
> 
> 标签：c#, wpf, mvvm, prism

尽管搜索了以前提出的相同性质的问题，并找到了很多，但我仍然很难理解为什么这对我不起作用。

我有一个 TreeView -

```
<Window ... xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity">
    <TreeView Name="Folders" ItemsSource="{Binding Directories}">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="SelectedItemChanged">
                <i:InvokeCommandAction Command="{Binding FolderChangedCommand}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </TreeView>
</Window> 
```

我正在尝试将 SelectedItemChanged 事件绑定到我的 ViewModel 中的命令 -

```
using Microsoft.Practices.Prism.Commands;

internal class MainVM : VMBase
{
    private DelegateCommand FolderChangedCommand { get; set; }

    public MainVM()
    {
        FolderChangedCommand = new DelegateCommand(FolderChanged);
    }

    private void FolderChanged()
    {
        // Do Stuff
    }
} 
```

然而我的命令从未被解雇过。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T07:12:22.660

数据绑定引擎需要`public`属性作为[绑定源](http://msdn.microsoft.com/en-us/library/ms743643.aspx#classes)：

> 用作绑定的绑定源属性的属性必须是类的公共属性。无法访问显式定义的接口属性以进行绑定，也不能访问没有基本实现的受保护、私有、内部或虚拟属性

但是您的命令是`private`如此更改为：

```
public DelegateCommand FolderChangedCommand { get; set; } 
```

并确保您`MainVM`正确设置为`DataContext`您的窗口。[您可以在本文](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)中找到有关调试数据绑定的更多信息。

# clojure - 在clojure中找到所有的权力根源

> ID：12327120
> 
> 赞同：1
> 
> 时间：2012-09-08T00:47:33.223
> 
> 标签：clojure

这是[寻找整数幂根](https://stackoverflow.com/questions/8635067/finding-integer-power-roots)但在 clojure 中的重新散列：

我如何找到一个数字的所有整数根？

所以我想要一个功能：

```
(defn roots [ex num] .....) 
```

调用时给出：

```
(roots 4 81) => [3, -3, 3i, -3i] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:12:07.977

我为 Maths 找到的最好的库是 apache commons math library

使用将此添加到您的 project.clj

```
[org.apache.commons/commons-math3 "3.0"] 
```

它内置了一个 nth-root 方法，以下可以是包装器：

```
（导入 org.apache.commons.math3.complex.Complex）

（定义复杂
  ([re] (复数 re 0))
  （[我]
      (Complex/valueOf re im)))

(defn nth-root [#^Complex cm] (seq (.nthRoot cm)))

(defmethod 打印方法
  复杂的
  [这个w]
  (print (format "(%f %fi)" (re this) (im this))))

(nth-root (复数 1 4) 6)
;; => ((1.235513 0.277543i) (0.377397 1.208757i) (-0.858115 0.931214i) (-1.235513 -0.277543i) (-0.377397 -1.208757i) (0.858115 -0.931214i)

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:06:05.070

```
user> (defn nth-root
          [n x]
        (long (Math/pow x (/ 1.0 n))))
#'user/nth-root
user> (nth-root 4 81)
3 
```

老实说，我不知道在 Clojure 中处理复数的标准化方法。您可能必须`Complex`使用`defrecord`.

# ruby-on-rails - 我想在 Ruby 中使用 win32ole 更改 Windows DOC 中的一个单词

> ID：12327121
> 
> 赞同：0
> 
> 时间：2012-09-08T00:47:33.623
> 
> 标签：ruby-on-rails, ruby, rubygems

我是 Ruby 的新手。每天我都在做一些小程序来掌握语言的概念。我正在尝试创建一个接收文件名和字符串的函数，该字符串将替换文件名引用的文档中的特定单词。我收到一条错误消息，提示无法加载 win32ole：

```
`require': no such file to load -- win32ole (LoadError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:39:50.967

`win32ole`只会在 Windows 机器上加载。您不能在 Mac 上使用此库。如果您在 Windows 虚拟机上安装 Ruby 并从那里运行您的程序，它将起作用。

最简单的方法是通过[Windows 的 Ruby 安装程序](http://rubyinstaller.org)。

# java - 尝试使用 Calendar 对象获取特定月份的天数

> ID：12327122
> 
> 赞同：1
> 
> 时间：2012-09-08T00:47:42.470
> 
> 标签：java, calendar

我正在尝试用`Calendar`java编写一个输出`html`带有表格内部的网页`Calendar`，但是在尝试获取特定年份中特定月份的天数时遇到了问题。

这是我正在使用的代码：

```
 //accept input from command prompt in form of MONTH, DAY, YEAR
    String date = args[0];
    SimpleDateFormat df = new SimpleDateFormat("MMMM dd, yyyy");
    Date convertedDate = new Date();
    try
    {
        convertedDate = df.parse(date);
    }
    catch(Exception e)
    {
        System.out.print(e);
    }
    Calendar cal = Calendar.getInstance();
    cal.setTime(convertedDate);
    year = cal.get(Calendar.YEAR);
    month = cal.get(Calendar.MONTH);
    day = cal.get(Calendar.DAY_OF_MONTH);

    //get number of days in month
    int numDays, startMonth;
    numDays = cal.getActualMaximum(DAY_OF_MONTH); 
```

我从最后一行收到错误消息：

`error: cannot find symbol and it points to the DAY_OF_MONTH variable.`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T00:49:39.370

使用[`Calendar.DAY_OF_MONTH`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DAY_OF_MONTH)：

```
numDays = cal.getActualMaximum(Calendar.DAY_OF_MONTH); 
```

它是类上的*静态*字段`Calendar`。

# mysql - 获取相互共享关系的计数

> ID：12327123
> 
> 赞同：1
> 
> 时间：2012-09-08T00:48:10.383
> 
> 标签：mysql, sql

假设我有三个看起来像的表：

```
users:
id

event_registration:
id
user_id
event_id

events:
id 
```

用户注册一个事件，该注册记录在 event_registration 中。

有没有一种方法可以计算给定一组用户在单个 MySQL 语句中相互共享的事件计数？我想出了如何为两个用户执行此操作，但我想对其进行重构以支持 X 个用户（仅包括一个用户）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:50:49.210

尝试

```
select count(event_id) as events
from event_registration
where user_id in (1,2,3)
group by event_id
having count(distinct user_id) = 3 
```

您必须根据您`3`在子句中使用的 s`having`的数量来调整子句中的数字。`user_id``in`

# sql - 用 SQL 编写数学公式？

> ID：12327129
> 
> 赞同：1
> 
> 时间：2012-09-08T00:50:07.250
> 
> 标签：sql

我有这些表：`users`, `comments`, `ratings`, 和`items`

我想知道是否可以编写基本上执行此操作的 SQL 查询：

user_id 在每个表中。我想要一个 SQL 查询来计算每个表中的每次出现（`users`当然除外）。但是，我希望一些桌子比其他桌子承载更多的重量。然后我想计算一个“分数”。

这是一个例子：

user_id 5 出现... 2 次在项目中；5次评论；11倍的收视率。

我想要一个总计如下的公式/积分系统：

项目 2 x 5 = 10；评论 5 x 1 = 5；额定值 11 x .5 = 5.5

总计 21.5

这是我到目前为止所拥有的......

```
SELECT u.users
     COUNT(*) r.user_id
     COUNT(*) c.user_id
     COUNT(*) i.user_id
FROM users as u
JOIN COMMENTS as c
     ON u.user_id = c_user_id
JOIN RATINGS as r
     ON r.user_id = u.user_id
JOIN ITEMS as i
     i.user_id = u.user_id
WHERE
    ????
GROUP BY u.user_id
ORDER by total DESC 
```

我不确定如何做数学公式部分（如果可能的话）。或者如何计算总数。

**基于 John Woo 的答案的最终代码！**

```
$sql = mysql_query("
        SELECT  u.username,
    (a.totalCount * 5) +
    (b.totalCount) +
    (c.totalCount * .2) totalScore
    FROM users u 
    LEFT JOIN
        (
            SELECT user_id, COUNT(user_id) totalCount
            FROM items 
            GROUP BY user_id
        ) a ON a.user_id= u.user_id
    LEFT JOIN
        (
            SELECT user_id, COUNT(user_id) totalCount
            FROM comments
            GROUP BY user_id
        ) b ON b.user_id= u.user_id
    LEFT JOIN
        (
            SELECT user_id, COUNT(user_id) totalCount
            FROM ratings
            GROUP BY user_id
        ) c ON c.user_id = u.user_id
    ORDER BY totalScore DESC LIMIT 10;"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:12:04.207

也许这可以帮助你，

```
SELECT  u.user_ID,
        (a.totalCount * 5) +
        (b.totalCount) +
        (c.totalCount * .2) totalScore
FROM    users u LEFT JOIN
            (
                SELECT user_ID, COUNT(user_ID) totalCount
                FROM items 
                GROUP BY user_ID
            ) a ON a.user_ID = u.user_ID
        LEFT JOIN
            (
                SELECT user_ID, COUNT(user_ID) totalCount
                FROM comments
                GROUP BY user_ID
            ) b ON b.user_ID = u.user_ID
        LEFT JOIN
            (
                SELECT user_ID, COUNT(user_ID) totalCount
                FROM ratings
                GROUP BY user_ID
            ) c ON c.user_ID = u.user_ID
ORDER BY totalScore DESC 
```

但根据您上面的查询，这也可能有效

```
SELECT  u.users
        (COUNT(*) * .5) +
        COUNT(*) +
        (COUNT(*) * 2) totalcore
FROM users as u
        LEFT JOIN COMMENTS as c
            ON u.user_id = c_user_id
        LEFT JOIN RATINGS as r
            ON r.user_id = u.user_id
        LEFT JOIN ITEMS as i
            ON i.user_id = u.user_id
GROUP BY u.user_id
ORDER by totalcore DESC 
```

唯一的区别是使用`LEFT JOIN`. 您不会`INNER JOIN`在这种情况下使用，因为`user_id`不能保证每个表上都存在机会。

希望这是有道理的

![在此处输入图像描述](../Images/d9800727856fae65b8429e9d00ccfd8e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:27:24.823

这是另一种方法：

```
SELECT
  u.user_id,
  SUM(s.weight) AS totalScore
FROM users u
  LEFT JOIN (
    SELECT user_id, 5.0 AS weight
    FROM items
    UNION ALL
    SELECT user_id, 1.0
    FROM comments
    UNION ALL
    SELECT user_id, 0.5
    FROM ratings
  ) s
  ON u.user_id = s.user_id
GROUP BY
  u.user_id 
```

即，对于每个表中每个用户的每次出现，都会产生具有特定权重的行。然后将 UNIONed 权重集连接到`users`表中以进行后续分组和聚合。

# php - 有什么方法可以让 PHP 加载类，指示 .php 文件的完整路径？

> ID：12327130
> 
> 赞同：2
> 
> 时间：2012-09-08T00:50:10.293
> 
> 标签：php, debugging

我想让PHP在加载类时打印出调试信息，包括.php文件的完整路径，标准错误：例如

从 /path/to/my/class/MyClass.php 加载 MyClass

有没有办法在不事先知道源文件在哪里的情况下做到这一点？

[编辑澄清我真的很关心 .php 文件的完整路径，并且我事先不知道源文件在哪里]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:52:46.827

您可以使用[__autoload($class)](http://php.net/manual/en/language.oop5.autoload.php)。

```
<?php
function __autoload($class_name) 
{
    echo "Loading: $class_name";
    include $class_name . '.php';
}

$obj  = new MyClass1();
$obj2 = new MyClass2(); 
?> 
```

为此，您只需跳过显式导入，例如“include x.php”或“require_once x.php”，自动加载器就会为您找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T01:03:46.340

由于 PHP 没有静态构造函数，因此在加载类时无法自动执行某些操作。您最好的选择可能是在类定义之后打印消息（或`__autoload`按照 Josh 的指示使用，但这可能需要您进行一些修改）。

```
class Foo
{
    /* stuff */
}

echo "Class Foo loaded from " . __FILE__ . "\n"; 
```

**编辑**很抱歉，但是 PHP 在加载或首次实例化类时绝对*没有提供任何挂钩*，即使在[其怪异扩展的最肮脏角落也是](http://php.net/manual/en/book.runkit.php)如此。如果不编辑类的源文件（并使用我的解决方案）或将它们组织在传统的层次结构中以将它们放入（并使用 Josh 的解决方案），您将无法逃脱。

有[功能请求 #48546](https://bugs.php.net/bug.php?id=48546)要求提供一种方法来设置何时包含文件的回调，但它不会去任何地方。否则，人们似乎对`__autoload`.

充其量，您可以`get_declared_classes`随时调用并查看已加载的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T00:53:34.130

您可以将消息放入每个类的构造函数中，该函数将输出某种类似这样的调试消息（尽管我将不得不看看是否有可能找到源所在的确切文档并将其添加到 if我找到了）但这应该给你一个想法：

```
<?php

    class something()
    {
        public function __construct()
        {
            echo "New instance of class:something is being made.";
            echo "Class is loaded from ".realpath(__FILE__);
        }
    }

    $var=new something();

?> 
```

输出：

```
New instance of class:something is being made.
Class is loaded from /var/www/someFolder/incs/myclasses.php 
```

编辑：当您创建该类的新对象时，上述更改将回显消息，就像`$var= new something();`它在此之前的任何时候都不会启动一样。

# javascript - 如何从 javascript 获取特定值到 c# 编码？

> ID：12327137
> 
> 赞同：-3
> 
> 时间：2012-09-08T00:51:19.530
> 
> 标签：javascript, html, javascript-events

嘿，大家好，在通过 java 脚本动态创建所有内容后，我想将单个特定值传输到我的 c# 代码中……我不想要所有内容……我已经在代码中写了我想要进入的变量我的 C# 代码。

```
<script>      
    var test="i want this variable into my c#";
    var only for javascript="i don't want this to be travel when i click on submit button";

    var s = document.createElement("input"); //input element, Submit button
    s.setAttribute('type', "submit");
    s.setAttribute('value', "submit");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:36:06.323

要将客户端变量“放入 c#”，您需要将其作为对运行 c# 的服务器的请求的一部分。这可以像将其附加到 URL 一样简单，或者您可以创建一个新字段，或者您可以填充现有字段并发送它。

```
// a variable
var test = "a value to be sent to the server";

// put the value into a hidden field
document.getElementById("hdnValue").value = test;

// submit the form containing the hidden field
document.getElementById("form1").submit(); 
```

由于我们在谈论 c#，我假设服务器是 ASP.Net，无论是 Web 表单还是 MVC。对于 MVC，确保有一个带有相应参数的控制器方法。对于 Web 表单，您可以包括`<input type="hidden" runat="server" clientidmode="static" id="hdnValue" />`. 然后页面将可以在后面的代码中访问该值。

> 我想将一个特定的值带入我的 c# 代码中......我不想要一切

向服务器发送单个值的另一种（可能更优雅）的方法是使用 AJAX 异步 POST 值。我建议使用[jQuery](http://api.jquery.com/jQuery.ajax/)来简化此操作，但也可以使用纯 JavaScript 来完成。

这是一个 AJAX 帖子的 jQuery 示例：

```
$.ajax({
    url: "http://yourserverurl/",
    type: "POST",
    data: { test: "a value to be sent to the server" },
    success: function(data){
        // an optional javascript function to call when the operation completes successfully
    }
}); 
```

# android - setBackgroundResource 抛出空异常的原因可能是什么？

> ID：12327139
> 
> 赞同：0
> 
> 时间：2012-09-08T00:52:21.983
> 
> 标签：android, animation, background, null, drawable

在下面的代码中，我不断收到一个空异常错误，并且已经测试到知道它来自代码行“startup_logo.setBackgroundResource(R.anim.startup)”，更具体地说是“setBackgroundResource”。我不确定为什么会发生这种情况，有人可以帮忙吗？谢谢。

```
 protected static AnimationDrawable temp, startup_move, menu_start, featuredpanel_start, collection_start, recommend_start, top_start, random_start;

    protected static void startup() {

        for (int i = 0; true;) {
            Log.d(i + "", "Content");
            if (i == 0) {
                startup_logo.setBackgroundResource(R.anim.startup);
                temp = (AnimationDrawable) startup_logo.getBackground();

                fadeout.start();
            }
            else if (i == 1) {
                featuredpanel.setBackgroundResource(R.anim.featured_move);
                temp = (AnimationDrawable) featuredpanel.getBackground();

                menu.setAnimation(fadein);
                logo.setAnimation(fadein);

                fadein.start();
            }
            else if (!temp.isRunning()) {
                temp.start();
                i++;
            }
        }
    }
} 
```

另一段代码定义startup_logo如下：

```
startup_logo = (LinearLayout) findViewById (R.anim.startup);

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/startup"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@anim/startup" > 
```

追溯：

```
09-08 01:02:31.239: E/AndroidRuntime(1105): FATAL EXCEPTION: main
09-08 01:02:31.239: E/AndroidRuntime(1105): java.lang.RuntimeException: Unable to start activity ComponentInfo{My.Taste.App/My.Taste.App.MyTasteActivity}: java.lang.NullPointerException
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.os.Looper.loop(Looper.java:137)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at java.lang.reflect.Method.invokeNative(Native Method)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at java.lang.reflect.Method.invoke(Method.java:511)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at dalvik.system.NativeStart.main(Native Method)
09-08 01:02:31.239: E/AndroidRuntime(1105): Caused by: java.lang.NullPointerException
09-08 01:02:31.239: E/AndroidRuntime(1105):     at My.Taste.App.TBGStartAnimations.startup(TBGStartAnimations.java:18)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at My.Taste.App.MyTasteActivity.onCreate(MyTasteActivity.java:68)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.Activity.performCreate(Activity.java:4465)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-08 01:02:31.239: E/AndroidRuntime(1105):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-08 01:02:31.239: E/AndroidRuntime(1105):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:19:27.707

我想到了！

```
startup_logo = (LinearLayout) findViewById (R.anim.startup); 
```

应该由 R.id 而不是 R.anim 搜索

```
startup_logo = (LinearLayout) findViewById (R.id.startup); 
```

# c# - OpenCV FileStorage - 如何在 C# 中与 EmguCV 一起使用？

> ID：12327148
> 
> 赞同：3
> 
> 时间：2012-09-08T00:52:59.487
> 
> 标签：c#, opencv, persistence, emgucv

是否可以将[XML/YAML Persistence 页面](http://opencv.itseez.com/modules/core/doc/xml_yaml_persistence.html)中的示例从[OpenCV](http://opencv.itseez.com/index.html)重写为[EmguCV](http://file.emgu.com/wiki/index.php/Main_Page)？
我的意思是前两个子章节中的代码：*“XML/YAML 文件存储。写入文件存储”*和*“从文件存储读取数据”。*

我最感兴趣的是保存和加载`int`-s 和序列。

我找到[了 EmguCV cvOpenFileStorage](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/4fec74c3-3f3d-4bce-95d9-d049c937ff0c.htm) doc - 大多数参数都是`IntPtr`s 并且我不清楚如何将它用于提到的类型（关于矩阵 - 我找到了工作示例）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T19:01:11.113

Emgu 不完全支持与 FileStorage 操作相关的 OpenCV 功能：您必须使用 Interop (System.Runtime.InteropServices) 包装缺少的方法。在以下链接中，您可以找到代码示例：[http ://www.emgu.com/forum/viewtopic.php?f=7&t=1877](http://www.emgu.com/forum/viewtopic.php?f=7&t=1877)

# iphone - AVAssetWriter 即时更改质量

> ID：12327150
> 
> 赞同：0
> 
> 时间：2012-09-08T00:53:49.157
> 
> 标签：iphone, avassetwriter

嘿，我目前正在使用 AVAssetWriter 和 AVAssetWriterInput。

在我的项目中，我想使用 iPhone 的硬件加速。是否可以使用 AVAssetWriter 创建压缩图像并即时更改质量？这意味着在我初始化 AVAssetWriterInput 实例之后？

# java - 这是 GAE 内存泄漏的证据吗？

> ID：12327158
> 
> 赞同：2
> 
> 时间：2012-09-08T00:55:35.443
> 
> 标签：java, google-app-engine, memory-leaks, jdo, visualvm

根据 autocreateDatastoreTxns 的设置，我得到了内存泄漏，为每个查询（读取）创建了以下每个类的一个实例。即 100 个查询创建以下每个类的 100 个实例（DatastoreServiceConfig 除外，它每个查询获取 2 个实例）。

我在开发环境中使用 Java VisualVM 分析器发现了这一点。我这样做的原因是在生产中，我们的实例堆大小不断增长（通常在 10-2 万个请求后变得太大）最终导致响应缓慢和实例重新启动。我不知道这是否是原因，但这是迄今为止我能够识别的第一个泄漏。

// 泄漏 datanucleus.appengine.autoCreateDatastoreTxns=false

```
org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManager
org.datanucleus.store.appengine.KeyRegistry
org.datanucleus.store.appengine.EmualtedXARResource
org.datanucleus.store.appengine.DatastoreConnectionFactoryImpl$DatastoreManagedConnection 
```

// 泄漏 datanucleus.appengine.autoCreateDatastoreTxns=true

```
com.google.appengine.api.datastore.DatastoreServiceConfig  // 2 instances per query
org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManager
com.google.appengine.api.datastore.AsyncDatastoreServiceImpl
com.google.appengine.api.datastore.DatastoreServiceImpl
org.datanucleus.store.appengine.jdo. DatastoreJDOTransation
com.google.appengine.api.datastore.DatastoreXARResource
com.google.appengine.api.datastore.DatastoreProperty
com.google.appengine.api.datastore.KeyRegistry
com.google.appengine.api.datastore.DatastoreConnectionFactoryImpl$DatastoreManagedConnection
com.google.appengine.api.datastore.TransactionStackImpl$ThreadLocalTransactionStack$StaticMember
com.google.appengine.api.datastore.TransactionStackImpl
org.datanucleus.store.appengine.RuntimeExceptionWrapperingDatastoreService 
```

这是我的代码：

```
PersistenceManager pm = PMF.get().getPersistenceManager();
try {
    account = pm.detachCopy(pm.getObjectById(Account.class, accountKey));
} catch (javax.jdo.JDOObjectNotFoundException ex) {
    account = null;
} finally {
    pm.close();
} 
```

有什么想法/想法吗？这是 Google AppEngine 中真正的内存泄漏，还是开发环境的现实，或者可能是我自己的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:47:03.950

开发应用服务器旨在模拟真实应用服务器的语义，以便您可以合理保真地进行开发。这不包括内存行为，尤其是在数据存储方面。开发服务器倾向于以真正的应用服务器没有的方式将内容保存在内存中。分析开发服务器对于在应用程序端整理泄漏仍然很有用，但不会为您提供有关可能在应用程序服务器端的泄漏的太多指导。不过，我们确实要注意这些。并且堆会随着时间的推移而碎片化。

某些应用程序因其使用性质和数据访问模式而受益于更大的前端实例。这些成本更高，因此您必须测试并权衡收益与增加的成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T13:29:54.407

据我所知，生产 AppEngine 上存在 JDO 内存泄漏。

随着时间的推移，这会导致实例延迟增加。这个问题已经存在了一段时间，官方没有提供明显的解决方案，所以下面是我在生产系统中使用了一年多的 PMF 类的快速解决方案，它解决了延迟增加的问题（内存使用量仍在增长，但没有那么快）。

```
import javax.jdo.JDOHelper;
import javax.jdo.PersistenceManagerFactory;

public final class PMF {

    private static final int RECYCLE_POINT = 5000;
    private static final int BUFFER_ZONE = RECYCLE_POINT / 10;
    private static int pmfcount = 1;
    private static int marker = Integer.MIN_VALUE;
    private static PersistenceManagerFactory pmfInstancePrevious = null;
    private static PersistenceManagerFactory pmfInstance = JDOHelper
            .getPersistenceManagerFactory("transactions-optional");

    private PMF() {
    }

    public static PersistenceManagerFactory get() {
        int icount = pmfcount;
        if (icount % RECYCLE_POINT == 0) {
            synchronized (pmfInstance) {
                pmfInstancePrevious = pmfInstance;
                marker = icount;
                pmfInstance = JDOHelper
                    .getPersistenceManagerFactory("transactions-optional");
            }
        }
        if(marker+BUFFER_ZONE == icount) {
            if (null != pmfInstancePrevious) pmfInstancePrevious.close();
        }
        pmfcount++;
        return pmfInstance;
    }
} 
```

该代码是线程安全的（同步的），可以与多线程实例一起使用，而无需对您的 JDO 代码进行任何其他更改。

您可以根据您对 PMF.get() 的使用情况调整 RECYCLE_POINT，但我发现 5000 次调用是获取新实例的好点。

如果您收到任何 PMF 在使用时关闭的消息，BUFFER_ZONE 也很重要。这意味着您正在处理 PersistenceManagerFactory 或执行非常长的请求。您应该在每次请求开始时使用 PMF.get() （甚至在每个请求中多次）。如果您想将先前的 PMF 实例保留更长时间，但始终是 RECYCLE_POINT 的一小部分，请增加 BUFFER_ZONE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T02:52:35.087

这可能是 GAE 泄漏。它也可能是您的代码中的错误。区分这些情况的唯一方法是追查（可能的）泄漏的实际原因。

我应该补充一点，泄漏可能在您代码的另一部分；例如，如果您在其他地方使用持久性管理器。FWIW，您问题中的代码对我来说看起来不错...

# installation - 在任何计算机中使用 InnoSetup 永久自定义文件夹图标

> ID：12327160
> 
> 赞同：3
> 
> 时间：2012-09-08T00:56:19.967
> 
> 标签：installation, inno-setup

我修改了一些文件夹图标，并将这些文件夹包含在我的 InnoSetup 安装中。问题是，一旦安装了我的程序，我的自定义文件夹图标就消失了，我看到的只是老式的“黄色”Windows 文件夹图标。

**编辑**

答案由用户 TLama 提供。起初它在我的电脑上工作。我在不同的计算机上使用不同的 Windows 版本时遇到了一些问题。在几个计算机系统中成功尝试后，我现在将编写我的工作代码。

使用的图标：

*   ico1.ico
*   ICO2.ico
*   ico3.ico

修改后的文件夹图标：

*   c:\FDR1
*   c:\FDR2\FDR3

**第1步：**

我已经使用软件“文件夹图标更换器”为我想要更改的三个文件夹设置了我的图标。您也可以使用任何其他免费软件。执行后，每个新更改的图标文件夹中都会出现一个desktop.ini。例如，FDR1 具有以下内容：

```
[.Shellclassinfo]
Iconfile=F:\Resource\Icons\Ico1.ico
Iconindex= 0 
```

**第2步：**

然后我删除了上面的路径并将“Ico1.ico”保存到我刚刚修改的目录“c:\FDR1”中：

```
[.Shellclassinfo]
Iconfile=Ico1.ico
Iconindex= 0 
```

我对 Ico2.ico（在 FDR2 内）和 Ico3.ico（在 FDR3 内）做了同样的事情。“Icon1、2 和 3”和“desktop.ini”文件属性都设置为隐藏。但是，重要的是不要将图标属性设置为“只读”。

**第 3 步：**

Inno 内部重复了 TLama 的建议。

```
#define OutputDirectory_1 "c:\FDR1"
#define OutputDirectory_2 "c:\FDR2"
#define OutputDirectory_3 "c:\FDR2\FDR3"

[Dirs]
Name: {#OutputDirectory_1}; Attribs: system
Name: {#OutputDirectory_2}; Attribs: system
Name: {#OutputDirectory_3}; Attribs: system

[Files]
Source: "c:\FDR1\Ico1.ico"; DestDir: {#OutputDirectory_1}; Attribs: hidden system
Source: "c:\FDR2\Ico2.ico"; DestDir: {#OutputDirectory_2}; Attribs: hidden system
Source: "c:\FDR2\FDR3\Ico3.ico"; DestDir: {#OutputDirectory_3}; Attribs: hidden system 
```

**第4步：**

编译！

现在，您的文件夹图标将永久适用于任何计算机和系统！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:58:12.993

您的目标文件夹应配置为只读或系统属性。要创建这样的文件夹，您可以使用，如 Miral 提到的，[`[Dirs]`](http://www.jrsoftware.org/ishelp/index.php?topic=dirssection)部分及其属性。这将有一个好处，即在您运行安装过程后，InnoSetup 会自动通知 Shell 有关更改，因此文件夹图标将更改而无需额外的通知函数调用。

```
; this is a defined preprocessor variable used to simplify the script
; management; this variable contains the path, where the icon will be 
; applied (it's used twice in a script, so it's easier to manage that
; from one place)
#define OutputDirectory "d:\TargetDirectory"

[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[Files]
; here you need to use "hidden" and "system" values in Attribs parameter
; to include into the Desktop.ini file hidden and system file attributes
Source: "Desktop.ini"; DestDir: {#OutputDirectory}; Attribs: hidden system

[Dirs]
; here you need to use either "readonly" or "system" value in Attribs parameter
; to setup to the output directory read only or system file directory attribute
Name: {#OutputDirectory}; Attribs: readonly 
```

***重要的：***

不要忘记`CTRL + F9`，无论何时更改输入`Desktop.ini`文件的内容以及更改预处理器路径变量的值时，都必须在运行之前编译脚本（我已经错过了几次然后想知道安装包内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:52:01.423

为了激活自定义文件夹图标，您必须以编程方式设置包含该文件的文件夹的“只读”属性`desktop.ini`。（您不能从 Explorer 执行此操作，但您可以通过命令行和 Inno 执行此操作。）

```
[Dirs]
Name: {app}; Attribs: readonly 
```

请注意，文件内的路径`desktop.ini`必须在用户的文件系统上有效；您可能希望使用 [Ini] 条目来创建或修改此文件以适应安装路径。

（这实际上并没有使文件夹成为只读文件夹——Windows 对文件夹的处理方式不同，因为只有文件可以有意义地只读。）

# java - 如何格式化内部 Java 名称？

> ID：12327162
> 
> 赞同：3
> 
> 时间：2012-09-08T00:56:41.107
> 
> 标签：java

我正在解析一个返回 Java 方法签名的报告，如下所示：

```
method(Ljava/lang/String;[Ljava/lang/String;ZI)V 
```

将其转换回更易于阅读的内容的最佳方法是什么？例如，上面应该是这样的：

```
void method(String, String, boolean, int) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:56:51.433

以下是执行此操作的几个代码示例：

*   [http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/ba/SignatureConverter.html](http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/ba/SignatureConverter.html)
*   [http://attrib4j.sourceforge.net/apidocs/attrib4j/bcel/DescriptorUtil.html](http://attrib4j.sourceforge.net/apidocs/attrib4j/bcel/DescriptorUtil.html)

如果一切都失败了，您可以从这些地方的一个或其他地方复制代码。

有几点需要注意：

*   您无法为签名恢复有意义的变量名称（显然......）
*   如果方法是通用的，则不会在签名中指明。签名信息用于原始（已擦除）方法类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:15:11.590

如果一个人想要实现他们自己的（就像我将在 Scala 中做的那样，如果只是为了练习一下它的解析功能），来自[http://asm.ow2.org/doc/faq.html#Q7](http://asm.ow2.org/doc/faq.html#Q7)描述了 mangling：

*   原始表示：
    *   'V' - 无效
    *   'Z' - 布尔值
    *   'C' - 字符
    *   'B' - 字节
    *   'S' - 短
    *   '我' - 整数
    *   'F' - 浮动
    *   'J' - 长
    *   'D' - 双倍
*   类表示：
    *   L*类*；
    *   Ljava/io/ObjectOutput；
    *   Ljava/语言/字符串；

它唯一缺少的是似乎以'['（例如[Z）为前缀的数组，可能每个维度一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:00:30.447

在斯卡拉：

```
import scala.util.parsing.combinator.RegexParsers

class JavaSignatureParser extends RegexParsers {
  def signature: Parser[String] = methodName ~ "(" ~ parameters ~ ")" ~ result ^^ {
    case m ~ "(" ~ p ~ ")" ~ r => r + " " + m + "(" + p + ")"
  }
  def methodName: Parser[String] = regularName ~ opt(specialName) ^^ {
    case m ~ None => m
    case c ~ Some(s) => c + s
  }
  def regularName: Parser[String] = """[A-Z0-9a-z_.$]+""".r
  def specialName: Parser[String] = "&lt;" ~> initializer <~ "&gt;" ^^ ("<" + _ + ">")
  def initializer: Parser[String] = "init" | "clinit"
  def result: Parser[String] = void | nonVoid
  def parameters: Parser[String] = rep(nonVoid) ^^ {
    case Nil => ""
    case p => p.reduceLeft(_ + ", " + _)
  }
  def nonVoid: Parser[String] = primitive | reference | array
  def primitive: Parser[String] = boolean | char | byte | short | int | float | long | double
  def void: Parser[String] = "V" ^^ (_ => "void")
  def boolean: Parser[String] = "Z" ^^ (_ => "boolean")
  def char: Parser[String] = "C" ^^ (_ => "char")
  def byte: Parser[String] = "B" ^^ (_ => "byte")
  def short: Parser[String] = "S" ^^ (_ => "short")
  def int: Parser[String] = "I" ^^ (_ => "int")
  def float: Parser[String] = "F" ^^ (_ => "float")
  def long: Parser[String] = "J" ^^ (_ => "long")
  def double: Parser[String] = "D" ^^ (_ => "double")
  def reference: Parser[String] = "L" ~> """[^;]+""".r <~ ";" ^^ { path =>
    val JavaName = """^java\..*\.([^.]+)""".r
    val fqcn = (path.replaceAll("/", "."))

    fqcn match {
      case JavaName(simpleName) => simpleName
      case qualifiedName => qualifiedName
    }
  }
  def array: Parser[String] = "[" ~> nonVoid ^^ (_ + "[]")
} 
```

# c++ - 使用 back_inserter() 或 inserter() 提高 std::copy() 的效率

> ID：12327163
> 
> 赞同：5
> 
> 时间：2012-09-08T00:56:43.067
> 
> 标签：c++, inserter

`back_inserter`并且`insert_iterator`非常方便，但它们也非常低效！

例如，当您附加`char`s 时，每个元素都会产生大量开销`copy`，而在许多情况下，确实不需要。

有没有办法让他们更有效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:56:43.067

是的，您可以定义一个`std::copy`可以劫持可优化调用的新版本。:)

下面是 Visual C++ 和 GCC 的示例（或“hack”，如果您希望看到半空的玻璃）。

在我的个人计算机上（我使用 VC++ 2010），下面的代码使调用**速度提高*****了十倍***！
GCC 的基准测试也在这里，显示 5 倍的差异：[旧版本](http://ideone.com/pNhSw)与[新版本](http://ideone.com/4nqOC)

### 但*在*你使用它之前：

请注意，此代码*假定容器提供了类似`vector`的接口*。

正如目前所写的那样，这仅适用于 C++11，因为它使用`type_traits`标头的元编程功能*仅*优化复制操作将保持异常安全的那些情况。

如果您不需要异常安全性（尽管在实际执行此操作之前您应该三思而后行），或者如果您有另一种检查此类数据类型的方法，那么您可以更改

```
typename enable_if<..., typename insert_iterator<C> >::type 
```

到：

```
insert_iterator<C> 
```

其余代码也适用于 C++03。

```
namespace std
{
    template<class FwdIt, class C>
    back_insert_iterator<C> copy(
        FwdIt begin, FwdIt end, back_insert_iterator<C> it,
        forward_iterator_tag * =
          static_cast<typename iterator_traits<FwdIt>::iterator_category *>(0))
    {
        struct It : public back_insert_iterator<C>
        {
            using back_insert_iterator<C>::container;
            static C &deref(C &c) { return  c; }
            static C &deref(C *c) { return *c; }
        };
        copy(begin, end, inserter(It::deref(static_cast<It &>(it).container),
                      It::deref(static_cast<It &>(it).container).end()));
        return it;
    }

    template<class FwdIt, class C>
    typename enable_if<  // Only do this if it would be exception-safe!
        is_nothrow_copy_constructible<typename C::value_type>::value &&
        is_nothrow_copy_assignable<typename C::value_type>::value,
        insert_iterator<C>
    >::type copy(
        FwdIt const &begin, FwdIt const &end,
        insert_iterator<C> output,
        forward_iterator_tag * =                  // only forward iterators
          static_cast<typename iterator_traits<FwdIt>::iterator_category *>(0))
    {
        struct It : public insert_iterator<C>
        {
            using insert_iterator<C>::container;  // protected -> public
            using insert_iterator<C>::iter;       // protected -> public
            static C &deref(C &c) { return  c; }
            static C &deref(C *c) { return *c; }
        };
        It &it(static_cast<It &>(output));
        typename C::iterator it_iter_end(It::deref(it.container).end());
        {
            // Convert iterators to offsets
            typename C::size_type const iter_end_off =
                std::distance(It::deref(it.container).begin(), it_iter_end);
            typename iterator_traits<typename C::iterator>::difference_type off
                = std::distance(It::deref(it.container).begin(), it.iter);

            // Resize container
            It::deref(it.container).resize(
                It::deref(it.container).size() +
                static_cast<typename C::size_type>(std::distance(begin, end)));

            // Renormalize, in case invalidated
            it.iter = It::deref(it.container).begin();
            std::advance(it.iter, off);
            it_iter_end = It::deref(it.container).begin();
            std::advance(it_iter_end, iter_end_off);
        }
        typename C::iterator result
          = copy_backward(it.iter, it_iter_end, It::deref(it.container).end());
        copy_backward(begin, end, result);
        return inserter(It::deref(it.container), result);
    }
} 
```

# javascript - 使用 connect vhost 为多个 express.js 应用程序提供服务

> ID：12327170
> 
> 赞同：0
> 
> 时间：2012-09-08T00:57:33.493
> 
> 标签：javascript, node.js, express, connect, vhosts

我想使用 connect 的 vhost 功能将几个 express.js 应用程序部署到我的 dev vps。这是我的 server.js 文件，它应该将请求发送到适当的位置：

```
var express = require('express')
var quotes = require('quote-of-the-day/lib/app.js');    
var server = express();  
server.use(express.vhost('inspiringquoteoftheday.com',quotes));    
server.listen(80); 
```

运行 node server.js 会抛出这个错误：

```
Error: Cannot find module 'quote-of-the-day/lib/app.js' 
```

即使我可以直接从 server.js 所在的目录 cd 进入 app.js 。

这是我导出快速应用程序的 lib/app.js 文件（我认为）

```
// Generated by CoffeeScript 1.3.3
(function() {
  var app, express, pub;

  express = require('express');

  module.exports = app = express();

  pub = __dirname + '/public';

  app.use(express["static"](pub));

  app.use(express.errorHandler());

  app.use(app.router);

  app.set('views', __dirname + '/views');

  app.set('view engine', 'jade');

  app.get('/', function(req, res) {
    return res.render('home');
  });

}).call(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:15:54.187

在这里使用 __dirname 全局变量可能会有所帮助。它提供了“当前执行脚本所在目录的名称。” 因此你可以这样做：

`var otherApp = require(__dirname + 'quote-of-the-day/lib/app.js')`

[http://nodejs.org/docs/latest/api/globals.html](http://nodejs.org/docs/latest/api/globals.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:33:52.463

假设一个目录结构看起来像这样：

```
|-. quote-of-the-day
  |-- server.js <-- the file you list in your question
  |-. lib
    |-- app.js 
```

那么你应该要求你的`app.js`with

```
require('./lib/app'); 
```

# c++ - C/C++嵌入python模块PIL，python函数想返回所有像素数据，为什么不能呢？

> ID：12327171
> 
> 赞同：0
> 
> 时间：2012-09-08T00:57:39.627
> 
> 标签：c++, python, c, python-imaging-library, embedding

添加嵌入python的c/c++代码。所有问题都在c代码中，我不知道如何获取像素值。

*蟒蛇代码：*

```
import Image

format = ""
mode = ""
size = ""
data = list()

def getImage(file):
    im = Image.open(file)
    global format
    global mode
    global size
    global data
    format = im.format
    mode = im.mode
    size = im.size

    width, height = im.size

    for x in range(0, height):
        for y in range(0, width):
            data.append(im.getpixel((x,y)))
    return None 
```

在 C/C++ 代码中我得到的数据长度是 0。这两个 for 循环有什么问题吗？

```
void loadImage(char *file) {
    Image* img = NULL;
    Py_Initialize();
    if ( !Py_IsInitialized() ) {
        std::cerr<<"Python initalize failed.\n";
        return NULL;
    }
    PyRun_SimpleString("import sys");
    PyRun_SimpleString("sys.path.append('./')");

    PyObject *pName, *pModule, *pFunc, *pArgs;
    pName = PyString_FromString("loadImage");
    pModule = PyImport_Import(pName);
    Py_DECREF(pName);
    if ( !pModule ) {
        PyErr_Print();
        std::cerr<<"import loadImage module faild, please confirm where the file     'loadImage.py' is.\n";
        return NULL;
    }
    pFunc = PyObject_GetAttrString(pModule, "getImage");
    if ( !pFunc ) {
        PyErr_Print();
        std::cerr<<"Can't find method getImage in loadImage module.\n";
        return NULL;
    }

    pArgs = PyTuple_New(1);
    PyTuple_SetItem(pArgs, 0, Py_BuildValue("s", file));
    PyObject_CallObject(pFunc, pArgs);

    PyObject *pFormat, *pMode, *pSize, *pData, *pSeq, *pPixel;

    pFormat = PyObject_GetAttrString(pModule, "format"); 

    pMode = PyObject_GetAttrString(pModule, "mode");

    pSize = PyObject_GetAttrString(pModule, "size");

    if ( !PyTuple_Check(pSize) ) {
        std::cerr<<"pSize is not tupple object.\n";
        return NULL;
    }

    pData = PyObject_GetAttrString(pModule, "data");
    if ( !pData ) {
        std::cerr<<"pData is null.\n";
        return NULL;
    }
    if ( !PyList_Check(pData) ) {
        std::cerr<<"pData is not list object.\n";
        return NULL;
    }

    int n = PyList_GET_SIZE(pData);
    std::cerr<<n<<"\n";

    Py_DECREF(pData);
    Py_DECREF(pFunc);
    Py_DECREF(pModule);
    Py_DECREF(pArgs);

    std::cerr<<"Py_DECREF over.\n";
} 
```

我得到 pData(is n) 的长度为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:17:35.753

好吧，您的代码实际上可以用一行替换：

```
data = list(Image.open(file).getdata()) 
```

Image 对象的`getdata`方法逐行返回打包到列表中的像素。如果您需要它们以列优先顺序（正如您所做的那样），请先应用`.transpose`适当的参数。结果仍然比遍历所有像素要快得多，也更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T03:23:04.163

您没有检查`PyObject_CallObject`. 它可能已返回`NULL`（Python 异常），因此无法修改`data`列表。

您应该检查您进行的*每个*Python API 调用，因为异常处理对于使解释器正常工作至关重要。

如果你确实得到一个`NULL`，你可以调用`PyErr_Print()`将回溯打印到`stderr`( `cerr`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:40:45.007

您通过调用运行的 Python 代码`PyObject_CallObject`可能会引发异常。

NULL 表示抛出异常。您可以使用各种 python api 函数来获取实际错误：[http](http://docs.python.org/c-api/exceptions.html) ://docs.python.org/c-api/exceptions.html 。这可能是最简单的。

```
if( PyObject_CallObject(pFunc, pArgs ) == NULL )
{
    // Print the exception (a traceback may or may not be available)
    PyErr_Print();

    // Do any cleanup...

    // Always return NULL after a python api function returns NULL.
    return NULL;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:21:52.257

这个问题可能是我电脑中的python 2.7版本引起的。我改用python 3.2，所有代码都能得到理想的回报。

# common-lisp - 减小 Common Lisp 二进制文件的大小

> ID：12327172
> 
> 赞同：2
> 
> 时间：2012-09-08T00:57:55.957
> 
> 标签：common-lisp, sbcl

SBCL 创建的 stumpwm 大于 40 MB，这对于窗口管理器来说太大了。C产生的DWM约为30K。

我们不需要完整的 CL 环境，我怎样才能使 stumpwm 更小？

真挚地 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T12:51:16.643

SBCL 从 1.0.52 开始支持压缩核心映像。有关详细信息，请参阅[http://xach.livejournal.com/295584.html](http://xach.livejournal.com/295584.html)。

# javascript - Javascript：单击单选按钮时显示图像

> ID：12327173
> 
> 赞同：0
> 
> 时间：2012-09-08T00:58:31.900
> 
> 标签：javascript

我目前正在使用单选按钮在javascript的帮助下单击时显示图像。问题是单击单选按钮时没有显示结果。下面的代码显示我正在使用一个函数，然后在单击时触发。代码有什么遗漏吗？或者有更好的方法吗？这是一个[例子](http://webprolearner2346.zxq.net/bike_calculator/)

谢谢

**Javascript**

```
<script>
    function check_value() {
        function check_value(fieldvalue) {
            switch (fieldvalue) {
            case 1:
                document.getElementById("imagedest").innerHTML = "<img src='images/bike1.jpg'>";
                break;
            case 2:
                document.getElementById("imagedest").innerHTML = "<img src='images/bike2.jpg'>";
                break;
            case 3:
                document.getElementById("imagedest").innerHTML = "<img src='images/bike3.jpg'>";
                break;
            }
        }
</script> 
```

**HTML**

```
<form name="builder">
  <input type="radio" name="field" value="one" onclick='check_value(1)'/> KAWASAKI KX 450F<br />
  <input type="radio" name="field" value="two" onclick='check_value(2)'/> 2010 Yamaha Road Star S<br />
  <input type="radio" name="field" value="three" onclick='check_value(3)'/> Aprilia RSV4<br />
</form>

<div id="imagedest"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T01:01:40.777

`function check_value() {`代码前面的额外内容的目的是什么？它的目的似乎是阻止您的代码工作，因此提示您提出这个问题。

删除它，一切都会好起来的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T01:02:39.713

```
function check_value() {
    function check_value(fieldvalue) { 
```

那将是问题所在。取出第一行......你想要的只是

```
function check_value(fieldvalue) { 
```

将来，检查控制台是否有错误，或者将其放入[jsbin.com](http://jsbin.com/itizuw/1/edit)，它可能会为您提供有关该问题的更多信息。对于您的代码，它会准确地告诉您出了什么问题：

> ```
> Line 2: function check_value(fieldvalue) { --- 'check_value' is already defined.
> Line 1: function check_value() { --- Unmatched '{'. 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T01:03:45.930

就个人而言......我会加载图像，然后更改显示设置，但如果你不想这样做..

未经测试，已就地编辑：

```
<script>
    function check_value(val) { // You have to pass a parameter
       var imgs = ['images/bike1.jpg', 'images/bike2.jpg', 'images/bike3.jpg'];
       var img = imgs[val];
       var el = document.getElementById("imgBox");
       if (img) {
         el.src = img;
         el.style.display = "";
       }

     }
</script>

<img id="imgBox" src="#" style="display:none"> 
```

# linux - __connect_no_cancel 块和服务器获取数据乱序

> ID：12327176
> 
> 赞同：1
> 
> 时间：2012-09-08T00:59:20.983
> 
> 标签：linux, sockets, select, connect, listen

我有一个 TCP 服务器`select`用于通过 TCP 套接字从客户端获取数据。服务器消耗数据的速度很慢，而客户端则快得多。我的客户端发送 8 个字节的数据，每次它 - 打开一个新连接 - 写入数据 - 断开连接 因此（服务器套接字必须接受许多连接）我将 backlock 值`listen`增加到 500。

尽管有这个设置，但在某些时候我可以看到 -my client 在一个`pthread`被调用的函数中阻塞，`__connect_nocancel`并且这种情况发生了很多次。- 一段时间后，我的服务器开始接收无序数据。第一个混乱的数据是客户端阻塞的数据（其次是其他数据）。

我认为增加积压可能会解决此问题，但此问题并非如此。

你能帮助我吗？我在 Linux 2.6.32

干杯

AFG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:52:24.063

的 backlog 参数[`listen(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/listen.2.html)通常被限制为 OS 网络堆栈内的某个值。在 Linux 上，默认值为 128。

不过，真正的问题是，正如@EJP 所说，您完全误用了 TCP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:06:00.520

如果排序很重要，您的客户端必须保持打开单个连接并通过该单个连接写入所有内容。对此没有两种方法。TCP 保证流的字节顺序。*没有什么*可以保证不同连接的服务器端处理的顺序。

它的效率也大大提高。目前，您每 8 个字节交换大约 8 个数据包，这意味着最多 160 个字节的开销。

# php - PHP Webserver 与本地运行的 C++ exe 的集成？他们如何互动？

> ID：12327179
> 
> 赞同：2
> 
> 时间：2012-09-08T00:59:29.360
> 
> 标签：php, c++

我不确定它是如何处理的，所以我想问一下。

新一代 MMORPG 游戏正在尝试将其交易站（拍卖）系统连接到网络服务器上，因此玩家即使在手机上也可以轻松使用它。

最后一个例子是激战2。基本上，系统是这样工作的：

```
1\. You login a locally running client.
2\. Open up the auction house in game client. (like HTML frames in this case) 
3\. The auction house connects to a webserver instead of sending packets to actual game server, like auctionhouse.guildwars2.com, which is also accessable via browser.
4\. You want to sell your Sword, if the auction house successfully takes the Sword, it gets deleted from user inventory (client) and server, hence, client somehow gets informed by webserver reply. 
```

所以...我猜...本地运行的客户端（C++ 应用程序）如何知道商品是否已售出或发生故障？网络服务器是否返回 XML/JSON 输出进行验证？

就像，网络服务器返回这个；

```
// XML reply 
<auctionResponse>
   <itemId>184818478A</itemId>
   <success>Successful</success>
   <verifyKey>AG8918ADHWDHA</verifyKey>
</auctionResponse> 
```

和客户检查它;

```
if(auctionHouse.auctionResponse == 'Successful')
{
     if(auctionHouse.auctionResponse == getVerifyKeyFromServer()) //so the server confirms
     {
           DeleteFromInventory(auctionHouse.itemId); //item will be removed from user inventory
     }
} 
```

我已经向 GW2 拍卖行的开发商询问了这个问题，但他告诉我他不能分享这方面的信息。

那么，基本上，它是如何工作的？网络服务器的 JSON/XML 输出还是完全不同的东西来承载数据？

任何帮助，将不胜感激。

附言。它不是 TCP 连接。拍卖行本身在 80 端口上运行，后端使用 PHP 之类的语言进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:26:51.840

虽然我不知道他们具体是如何做的，但我会定期编写类似的应用程序。以下是它的一般工作方式：

PHP 可以使用 proc_open() 来管道到正在执行的进程。这意味着您可以从 PHP 中向另一个应用程序发送命令，并在您的 PHP 脚本中使用结果。这包括用任何东西编写的自定义 exe。

另一种选择是在 localhost 或 PHP 使用 CURL 与该服务器通信的任何其他机器上运行的服务器应用程序。结果可以以 JSON、XML、纯文本等形式发送...

这两个选项都允许 PHP 网络服务器在端口 80 上运行。

编辑：

我怀疑您下载的客户端应用程序正在与服务器通信，可能是与 Web 应用程序共享同一数据库的服务器。因此，当您在客户端购买东西时，他们服务器上的数据库会更新，然后他们的 Web 应用程序就会拥有更新的信息。

# javascript - One of the property is not being observed by Knockout observable

> ID：12327180
> 
> 赞同：0
> 
> 时间：2012-09-08T00:59:30.867
> 
> 标签：javascript, jquery, data-binding, knockout.js

So I do have a knock out template and it looks like following:

```
<tbody data-bind='foreach: PrizeFulfilmentStatuses'>
            <tr >
                <td><input data-bind='value: Description' /></td> 
                <td><input data-bind='value: Order' /></td>
                <td><input type="checkbox" data-bind="checked: Editable"/></td> 
                <td> <div data-bind = "attr:{color:ColorHex },style:{backgroundcolor: ColorHex}, value: ColorHex"  class="colorpickerHolder"  style="height:30px; border: transparent; width: 30px;"></div> </td>
            </tr>
        </tbody> 
```

Now, you can see that a lot of properties in the last TD are being assigned ColorHex. Now, this is result of me trying to figure out something.

Apparantly, all the other observables like Editable and description are two way bindings such that if I change any value on the UI then the observable is also changed and change is reflected back when I POST the data back to the server. ColorHex is not. The value posted to the server is the original value that originally came from the server. No changes are reflected here.

following is the code that changes the properties bound to ColorHex. It is a colorpicker Jquery plugin:

```
self.ApplyColorPicker = function () {
            var $target = $(this);
            $(this).css("background-color", $(this).attr('color'));
            $(this).ColorPicker({
                color: $(this).attr('color'),
                onShow: function (colpkr) {
                    $(colpkr).fadeIn(500);
                    return false;
                },
                onHide: function (colpkr) {
                    $(colpkr).fadeOut(500);
                    return false;
                },
                onChange: function (hsb, hex, rgb) {
                    $target.css('backgroundColor', '#' + hex);
                    $target.attr('value', '#' + hex);
                }
            });
        }; 
```

You can see those two lines:

```
$target.css('backgroundColor', '#' + hex);
                        $target.attr('value', '#' + hex); 
```

when those are executed, I can see in firebug that values are being changed both for "background-color" and value. But when it comes to posting the value or Posts the old value NOT the updated value.

Any suggestions why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:08:44.660

Knockout doesn't know when you edit the value via javascript. You'll have to manually update the KO variable using `ko.dataFor($target[0]).ColorHex('#' + hex)`: [http://jsfiddle.net/UkJ6R/](http://jsfiddle.net/UkJ6R/)

I also fixed your style binding to use `backgroundColor` instead and removed the other two lines in the `onChange` method because KO will update those attributes for you.

# entity-framework - EF Fluent API 映射 0..1 到 0..1 的关系

> ID：12327182
> 
> 赞同：2
> 
> 时间：2012-09-08T00:59:39.173
> 
> 标签：entity-framework, code-first, fluent

大家好，我有一个关于 EF Fluent API 的问题（代码优先：P）。在我的模型中，我有

```
public class TABLE_A
{
   public virtual long Id {get; set;}
   .... 
   public virtual TABLE_B MyTableBRef {get; set;}
}

public class TABLE_B
{
   public virtual long Id {get; set;}
   .... 
   public virtual TABLE_A MyTableARef {get; set;}
} 
```

我应该如何将 0..1 映射到 0..1 关系？

在 TABLE_B 上的数据库中，我有一列 (FK) 引用了 TABLE_A 的 PK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:29:44.713

如果您使用的列不是`TABLE_B`.

```
public class TABLE_A
{
   public virtual long Id {get; set;}
}

public class TABLE_B
{
   public virtual long Id {get; set;}
   .... 
   public virutal TABLE_A MyTableARef {get; set;}
}

public class MyContext : DbContext
{
    public DbSet<TABLE_A> As { get; set; }
    public DbSet<TABLE_B> Bs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<TABLE_B>()
           .HasRequired(b => b.MyTableARef)
           .WithMany()
           .Map(b => b.MapKey("FK_Column_name));
    }
} 
```

如果 PK`TABLE_B`也是一个 FK，`TABLE_A`那么您可以使用共享的 PK 映射和双方的导航属性。

**编辑：**

您可以按如下方式使用共享 PK 映射

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<TABLE_B>()
       .HasRequired(b => b.MyTableARef)
       .WithOptional(a => a.MyTableBRef);
} 
```

`Id`of`TABLE_B`也是 的FK `TABLE_A`。

# php - 密码错误时php重定向

> ID：12327183
> 
> 赞同：0
> 
> 时间：2012-09-08T01:00:42.317
> 
> 标签：php, html, redirect, login

这是正确的，当他们尝试访问它而不进入登录页面时，代码会将人重定向到登录页面

```
<?php

$pass = 'password';

?>
<html>
<head>
<title></title>
</head>
<body>
<?php 

if ( $_POST["pass"] == $pass){
?>

Congrats you have log in!

<?php 

}else{

header("Location: http://signin.com/");
}
?>
</body>
</html> 
```

我最终遇到了“服务器错误网站在检索[http://www.test.com](http://www.test.com)时遇到错误它可能因维护而关闭或配置不正确。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:10:07.280

`header`在你已经输出了一些 HTML 之后就不能再调用了。做你的密码检查和重定向。在 HTML 之上

例如：

```
<?php 
$pass = 'password';
if ( $_POST["pass"] != $pass){
    header("Location: http://signin.com/");
    exit;
}
?>
<html>
<head>
<title></title>
</head>
.... 
```

所以 HTML 只会在它们成功时显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T01:10:31.413

您不能将`header()`任何输出发送给用户：

```
<?php
    $pass = 'password';
    if ( $_POST["pass"] == $pass)
    {
        ?>
        <html>
        <head>
        <title></title>
        </head>
        <body>

        Congrats you have log in!

        </body>
        </html>

        <?php 
    }
    else
    {
        header("Location: http://signin.com/");
    }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T01:05:39.880

把 ob_start(); 在顶部和 o​​b_end_flush(); 这可能会解决它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T01:11:53.753

在使用 进行重定向之前，您无法输出 html `header`。编码之前的所有逻辑：

```
<?php 
$pass = 'password';

if ($_POST["pass"] == $pass)
{
    $message = "Congrats you have log in!";
}
else
{
    header("Location: http://signin.com/");
}
?>  

<html>
<head>
<title></title>
</head>
<body>
    <?php echo $message; ?>
</body> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T01:12:23.910

这样的事情会更好：

```
<?php
$pass = 'password';

if ($_POST["pass"] != $pass){
    header("Location: http://signin.com/");
    exit;
    }
?>

<html>
<head>
<title></title>
</head>
<body>
Congrats you have log in!

</body>
</html> 
```

您需要检查用户是否已登录。如果没有，请重定向并退出。如果是，则显示该消息。

# javascript - JavaScript/jQuery - 在添加和删除类与下一个函数之间添加延迟

> ID：12327186
> 
> 赞同：1
> 
> 时间：2012-09-08T01:00:48.170
> 
> 标签：javascript, jquery, for-loop, delay, settimeout

> **可能重复：**
> [jquery 向 .addClass 添加淡入淡出](https://stackoverflow.com/questions/2719178/jquery-add-a-fade-to-an-addclass)

这是我的 jsFiddle 示例：http: [//jsfiddle.net/sLzGc/](http://jsfiddle.net/sLzGc/)

我正在尝试创建一个看起来选项 1 到 3 正在旋转的效果。每隔 1.2 秒，`green`该类就会从拥有它的选项中删除，并将`green`该类添加到下一个选项中。`i<5`这个想法是，在执行最终函数之前，三个选项的轮换发生了五次（ ） `alert('Finished')`。

我正在尝试使用 setTimeout()，但我愿意使用`.delay()`另一个 jQuery 函数或其他选项。

**这是我的 JavaScript/jQuery：**

```
alert('Start');

sampleFunction();

function sampleFunction() {

for (i=0; i<5; i++) {

  setTimeout(function() {
    $('#option2').addClass('green');
    $('#option1').removeClass('green');
  },1200);

  setTimeout(function() {
    $('#option3').addClass('green');
    $('#option2').removeClass('green');
  },1200);

  setTimeout(function() {
    $('#option1').addClass('green');    
    $('#option2').removeClass('green');
  },1200);

}//end for loop

}

alert('Finished');​ 
```

我的整个例子都在 jsFiddle 上：http: [//jsfiddle.net/sLzGc/](http://jsfiddle.net/sLzGc/)

感谢您提供的任何帮助或见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:28:49.210

这是我解决问题的方法：

```
​(​function() {
    var options = [$("#option1"), $("#option2"), $("#option3")],
        cycles = 5,
        i = 0,
        $last = $(null);

    (function next() { 
        if(i < cycles * options.length) {
            $last.removeClass("green");
            $last = options[i % options.length].addClass("green");
            i++;
            setTimeout(next, 1200);
        } else {
            $last.removeClass("green");
            alert("finished!"); //do any other "we're done" stuff here.
        }
    }());
}());​ 
```

这很简单，很酷的部分是您可以将元素添加到元素列表中以非常容易地循环（只需将它们添加到`options`）。如果需要，您还可以设置周期数。我没有将类或延迟长度设为变量，但如果您想这样做，那将非常简单。

你可以在这里看到一个演示：

[http://jsfiddle.net/D7SR8/](http://jsfiddle.net/D7SR8/)

您也可以考虑在最后设置一个回调函数并将其`alert()`放入其中。那将更可重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:05:40.163

如果您想使用 setTimeouts，那么您的代码可能如下所示：

```
var iteration = 0;
alert('start');
rotateColors();

function rotateColors() {
    setTimeout(function() {
        $('#option2').addClass('green');
        $('#option1').removeClass('green');
            setTimeout(function() {
                $('#option3').addClass('green');
                $('#option2').removeClass('green');
                setTimeout(function() {
                    $('#option1').addClass('green');    
                    $('#option3').removeClass('green');
                    iteration += 1;

                    if(iteration < 5)
                        rotateColors();
                    else
                        alert('finished');
            },1200);
        },1200);
    },1200);   
} 
```

[现场演示](http://jsfiddle.net/sLzGc/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T01:22:18.007

```
alert('Start');
 var varobj=0;
sampleFunction();

function sampleFunction() {
setTimeout(function() {
    $('#option2').addClass('green');
    $('#option1').removeClass('green');

  },1200, setTimeout(function() {
        $('#option3').addClass('green');
        $('#option2').removeClass('green');

      },1200,setTimeout(function() {
            $('#option1').addClass('green');    
            $('#option3').removeClass('green'); if(varobj<5){varobj=varobj+1;sampleFunction();}else{ alert('finished');}
      },1200);););} 
```

这是在 settimeout 中执行其他函数后如何调用函数的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T01:25:02.023

我同时使用`setTimeout()`and`setInterval()`来执行此操作，然后在执行 5 次后清除间隔。如果您希望它们都以某种颜色或任何其他修改结束，请告诉我！我刚刚对其进行了修改以遍历您的询问方式。 [http://jsfiddle.net/sLzGc/9/](http://jsfiddle.net/sLzGc/9/)

```
sampleFunction();

function sampleFunction() {
    alert('Start');
    $('#option1').addClass('disabled');

    var i = 0;
    var shift = function() {
        setTimeout(function() {
            $('#option1').toggleClass('disabled');
            $('#option2').toggleClass('disabled');
        }, 0);
        setTimeout(function() {
            $('#option2').toggleClass('disabled');
            $('#option3').toggleClass('disabled');
        }, 400);
        setTimeout(function() {
            $('#option3').toggleClass('disabled');
            $('#option1').toggleClass('disabled');
        }, 800);
    };
    var interval = setInterval(function() {
        ++i;
        if (i == 5) {
            clearTimeout(interval);
            alert('Finished');
        } else {
            shift();
        }
    }, 1200);

    shift();
}​ 
```

# android - Android Toast 可以在模拟器中运行，但不能在我的设备上运行

> ID：12327192
> 
> 赞同：1
> 
> 时间：2012-09-08T01:02:18.277
> 
> 标签：android

我在我的应用程序的几个地方使用此代码：

```
Toast.makeText(getApplicationContext(), "toast", Toast.LENGTH_SHORT).show(); 
```

在模拟器中运行时，它们几乎总是显示。他们没有显示的唯一时间是我正在调试并且需要很长时间才能逐步完成代码。

当我在我的设备上安装应用程序时，没有一个 Toast 工作。起初我没有注意到，但我意识到我从来没有见过它们在我的设备上弹出。吐司是这样工作的吗？

编辑：我尝试了这两种选择： Toast.makeText(this, "toast", Toast.LENGTH_SHORT).show(); Toast.makeText(ActivityName.this, "toast", Toast.LENGTH_SHORT).show();

这些都不起作用。所有 toast 都可以在模拟器（2.2、2.3、4.1）中使用，但在我的设备（Galaxy Nexus 4.1）上没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T16:15:45.217

我遇到了这个问题，发现我在设备设置中将我的应用程序设置为不显示任何通知。在我允许设备设置下的通知后，一切正常。

希望这将帮助其他一些可怜的灵魂不要花一个下午来寻找答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T07:07:50.103

您为显示 Toast 而写的那行是 100% 正确的，应该会出现 toast。它没有错误。

问题就在你写那些行的地方..!!

* * *

要了解实际问题，您需要检查`debug`整个代码。

但是在猜测可能存在的问题时，

1.  你已经把你`Toast`置于某种`if..else`不真实的状态

2.  `Toast`在*执行控制不去的代码部分*

3.  `String` *附加`Toast`字符串的变量，这些变量*是*`null`*

**   只是为了检查，替换你`Toast`的`Log`，看看会发生什么。*

# symfony - Symfony2 混合不同的环境

> ID：12327194
> 
> 赞同：1
> 
> 时间：2012-09-08T01:03:07.413
> 
> 标签：symfony, nginx

今天我遇到了一个非常奇怪的情况。我将我的应用程序的多个环境用于不同的目的（已知的环境：dev、qa、prod；和 devftp，我用来通过 FTP 保存文件并立即在线检查更改，其他环境具有 SVN 配置）。

问题是由于某种原因环境变得混乱，它以前发生在我身上，但并没有给它太大的重要性（有一次我删除了一个实体列，尽管我在应用程序上绝对没有引用该列，但我'有一个 ReflectionException 错误，我在没有使用它的情况下重新添加了该列，几周后我再次删除它而没有任何问题）。特别是一个错误是，在 devftp 我已经声明了一项服务，而开发人员告诉我“未找到服务”。这是来自 nginx 错误日志：

```
2012/09/07 06:33:16 [error] 3327#0: *9 FastCGI sent in stderr: "PHP message: PHP Fatal error:  Uncaught exception 'Symfony\Component\DependencyInjection\Exception\ServiceNotFoundException' with message 'You have requested a non-existent service "aks.fs".' in XXXX/dev/app/bootstrap.php.cache:202
Stack trace:
#0 XXXX/devftp/src/AKS/XXBundle/AKSXXBundle.php(18): Symfony\Component\DependencyInjection\Container->get('aks.fs')
#1 XXXX/dev/app/bootstrap.php.cache(521): AKS\XXBundle\AKSXXBundle->boot()
#2 XXXX/dev/app/bootstrap.php.cache(548): Symfony\Component\HttpKernel\Kernel->boot()
#3 XXXX/dev/web/app.php(13): Symfony\Component\HttpKernel\Kernel->handle(Object(Symfony\Component\HttpFoundation\Request))
#4 {main}
  thrown in XXXX/dev/app/bootstrap.php.cache on line 202" while reading response header from upstream, client: XXXX, server: dev.XXXX.com, request: "GET / HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "dev.XXXX.com"
"dev.XXXX.com.error.log" 509L, 72936C 
```

您可以看到 dev 文件夹上的 #1 如何调用 devftp 文件夹上的 #0。dev 没有 boot() 方法，devftp 有并且确实调用了 aks.fs。尽管如此，为什么位于 dev 文件夹中的开发环境会从 devftp 文件夹中调用某些东西？

这发生在 qa 和 dev 之间，也发生在 qa 和 devftp 之间。（我已经从 CLI 和删除整个文件夹中多次清理了缓存（dev 和 prod））。重要的是，这只发生在 prod env 上，使用 app_dev.php 效果很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T19:59:23.057

在我看来，您似乎对所有环境都使用了相同的 APC 密钥（您称它们为发行版，但实际上这是环境）。

尝试为您的环境设置不同的 APC 密钥：

```
$loader = new ApcUniversalClassLoader('aks_dev'); 
```

或者

```
$loader = new ApcUniversalClassLoader('aks_test'); 
```

或者

```
$loader = new ApcUniversalClassLoader('aks_qa'); 
```

等等。

# javascript - 在网站上显示 .mov 作为加载屏幕的最佳方式

> ID：12327195
> 
> 赞同：0
> 
> 时间：2012-09-08T01:03:10.337
> 
> 标签：javascript, jquery, html, animation, video

在网站加载后显示动画效果的最佳方式是什么？

它需要在所有主流浏览器和 iOS 设备中像加载屏幕一样播放。

展示这一点的最佳方式是什么？

我尝试了 html5，但自动播放在 iPad 上不起作用。我不想用闪光灯。动画对于 JavaScript 来说太复杂了。是否值得尝试制作高质量的动画 GIF？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T01:10:34.743

好吧，几乎任何加载视频的主要问题都是加载和缓冲时间，尤其是在移动设备上。如果启动画面需要半分钟才能加载，那么体验将非常糟糕，并且几乎没有什么可以真正减少加载时间而使视频质量降低（大型动画 gif 也会有同样的问题）。

如果可能，我的建议是尝试使用纯 HTML5 动画效果对动画进行编码。它们将渲染得更快，仅使用静态图像、javascript 和 CSS，并且将更广泛地与现代桌面和移动浏览器兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:40:34.477

不幸的是，无法在 iOS 设备上自动播放 html5 视频。至少从 iOS 5 开始，Apple 已禁用自动播放和预加载，大概是为了为可能使用有限或昂贵的移动数据计划的用户节省带宽。

除非您愿意跳过视频，否则唯一的解决方法是让访问者点击或触摸页面上的某些内容。Mobile Safari 将允许您使用 Javascript 方法播放视频（与本机播放器控件相反），但第一次调用必须`.play()`来自“单击”或“触摸”事件处理程序。

您可以将此要求限制在 iPad 上，并且仍然允许桌面浏览器自动播放，但似乎没有任何可靠的功能检测方法，因此您必须解析用户代理字符串 ( `navigator.userAgent`)。

关于 Mobile Safari 对视频所做的奇怪、非标准的事情没有太多文档，但这篇文章有一些非常好的、详细的信息和一些代码示例： [http ://blog.millermedeiros.com/html5-video-issues -在 ipad 上以及如何解决它们/](http://blog.millermedeiros.com/html5-video-issues-on-the-ipad-and-how-to-solve-them/)

**编辑**：然后苹果在自己的网站上使用了这种精心设计和荒谬的解决方法。 [https://docs.google.com/document/pub?id=1GWTMLjqQsQS45FWwqNG9ztQTdGF48hQYpjQHR_d1WsI](https://docs.google.com/document/pub?id=1GWTMLjqQsQS45FWwqNG9ztQTdGF48hQYpjQHR_d1WsI)

# shell - Grepping 或 awking LDAP 记录：如何？

> ID：12327196
> 
> 赞同：2
> 
> 时间：2012-09-08T01:03:36.420
> 
> 标签：shell

我不是一个经验丰富的 shell 脚本编写者，所以我希望得到一些专家的帮助！

我们在遍历 UID 的 for 循环中使用以下命令：

```
ldapsearch -x -H ldaps://ldap-purple.example.com -b ou=People,dc=example,dc=com uid=jdoe 
```

此命令产生如下记录：

```
# extended LDIF
#
# LDAPv3
# base <ou=People,dc=example,dc=com> with scope subtree
# filter: uid=jdoe
# requesting: ALL
#

# jdoe, people, example.com
dn: uid=jdoe,ou=people,dc=example,dc=com
cn: John Doe
homeDirectory: /afs/rats.example.com/users/t/jdoe
loginShell: /bin/bash
objectClass: posixAccount
uid: jdoe
uidNumber: 9239
gidNumber: 100002

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1 
```

我想做的是能够 grep 或 awk（或其他）然后在同一行上生成 'cn'、'uid' 和 'uidNumber'，即

```
John Doe, jdoe, 9239 
```

但是，我不确定可以使用什么工具来创建它。

提前感谢您的帮助！

干杯，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:14:11.600

是的，用 awk 很容易。鉴于您说这是在循环中运行，我正在草拟一个带有基本循环的解决方案，它可能与您正在做的事情相匹配，也可能不匹配。希望您会看到如何适应您的确切需求。

```
while read ou dc1 dc2 uid ; do
    dapsearch -x -H ldaps://ldap-purple.example.com -b ou="$ou",dc1="$dc1",dc="$dc2" uid="$uid" \
    | gawk -F":" '
        $1=="cn" { cn = $2; sub(/^  */,"", cn); next}
        $1=="uid" { uid = $2; sub(/^  */,"", uid);next}
        $1=="uidNumber" { uidNumber = $2; sub(/^  */,"", uidNumber );next}

        # ... etc
        END {
           printf("%s,%s,%s\n", cn,uid,uidNumber)
        }           
    '
done < /path/to/ldap_lookup.lst 
```

**输出**

```
John Doe,jdoe,9239 
```

（使用上面的示例记录作为输入）

如果由于某种原因您想要记录中的前导空格，请取出`sub()`cmds。

我没有 ldapsearch 可以测试。如果您收到错误消息，gawk 可以很好地显示问题所在，如果它不是准确识别问题点的位置，那么通常在此之前。将错误消息作为评论发布，我会看看我能做什么。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:29:16.540

感谢您的回答，我会尝试所有的！

在看到您的回复之前，我将以下内容一起废弃，虽然丑陋，但可以解决问题：

```
ldapsearch -x -H ldaps://ldap-purple.example.com -b ou=People,dc=example,dc=com uid=$i | awk -F': ' '/uid:/ {ORS=",";print $2} /uidNumber/ {ORS="\n";print $2} /cn/ {ORS=",";split ($2,fields,"-"); print fields[1]}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T18:03:47.930

```
awk 'BEGIN { RS = "gidNumber: [0-9]+" ; FS = "\n" ; OFS=","}
{ for (i=1;i<=NF;i++) { 
       if ($i ~ "^cn: ") { cn=gensub("^cn: ","","g",$i) }
       if ($i ~ "^uidNumber: ") { uidNum=gensub("^uidNumber: ","","g",$i) }
       if ($i ~ "^uid: ") { uid=gensub("^uid: ","","g",$i) }
      }
  if ( cn > "" && uid > "" && uidNum > "" ) {
       print cn, uid, uidNum
      }
  cn="" ; uid="" ; uidNum=""
}' INPUTFILE 
```

可能对你有用。[在 ideone.com 上查看它的实际效果](http://ideone.com/e4JFx)（我已经添加了一条测试记录）。

# visual-studio-2010 - Visual Studio 2010 - 如何在从项目中删除文件时启用提示以从磁盘中删除文件？

> ID：12327197
> 
> 赞同：1
> 
> 时间：2012-09-08T01:03:37.317
> 
> 标签：visual-studio-2010, visual-c++

在 Visual Studio 2005 中，当您从 C++ 项目中删除文件时（通过在解决方案资源管理器中右键单击并选择“删除”），它会询问您是只想删除引用，还是从磁盘中删除文件本身.

在 Visual Studio 2010 中，此提示似乎消失了（或者我不小心将其关闭了）。这意味着每次我在解决方案资源管理器中删除一个文件时，我都必须立即找到它并使用 Windows 资源管理器将其删除（否则我会忘记并且它会永远存在）。如何找回提示？

我找到了一些文档（[http://msdn.microsoft.com/en-us/library/0ebzhwsk%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/0ebzhwsk%28v=vs.100%29.aspx)）解释了“删除”和“删除”之间的区别，以及“删除” C++ 项目不存在（但没有给出原因）。也许真的只是不可能？如果是这样，那真是令人讨厌的回归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-04T05:59:39.690

仅当所选文件存储在项目文件夹中时，您才会看到删除或删除文件对话框。如果文件存储在项目文件夹之外，则文件引用将在没有对话框的情况下删除。

对于例如 VS2013，此行为仍然相同。我在这里创建了一个用户语音请求来更改此行为。恕我直言，您的文件层次结构不应该有任何区别。

您可以在此处为更改投票：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/9146353-remove-delete-dialog-should-show-up-when-deleting](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/9146353-remove-delete-dialog-should-show-up-when-deleting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T02:38:19.963

假设使用 Sourcegear Vault 作为源代码管理系统，您可以通过转到工具 -> 选项 -> 源代码管理 -> 集成选项 -> 并选中“从源代码管理中删除项目之前显示警告”来启用提示

# php - 具有输入类型的另一个文件-php的php4到php5调用不起作用

> ID：12327198
> 
> 赞同：0
> 
> 时间：2012-09-08T01:03:38.650
> 
> 标签：php, forms, post, hidden, php4

从 PHP4 更改为 PHP5 后出现问题，我无法在迁移常见问题解答中找到它。

```
<form method='post' action='galerie.php'>
<input type='hidden' name='kategorieid' value='$id'>
<input type='hidden' name='echtkategorie' value='$kategorie'>
<input type='hidden' value='' name='geaendert'>
<input name='imageField' type='image' src='../images/bearbeiten.gif' width='39' height='40' border='0' alt='Galerie &quot;$kategorie&quot; bearbeiten'> 
```

我`galerie.php`用一些变量`$id`和调用`$kategorie`，但它们不会出现在`galerie.php`：

```
$_GET['id'] 
```

不会在`galerie.php`我做的工作，`$befehl="SELECT kategorie, id FROM $tabelle WHERE id='$kategorieid'";`但 kategorieid 不在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:06:39.743

您正在使用`method="post"`这意味着您应该使用`$_POST['id']`而不是`$_GET['id']`.

# html - 内容流放置父容器

> ID：12327204
> 
> 赞同：1
> 
> 时间：2012-09-08T01:05:13.053
> 
> 标签：html, css, height

这是问题[http://jpswebsites.com/rebound/recovery/recovery-education/134-2/](http://jpswebsites.com/rebound/recovery/recovery-education/134-2/)

我的网站内容背景区域停止在 1000 像素。min-height 属性设置为 1000px。为什么它不像预期的那样流到它与页脚相遇的底部？

的HTML：

```
<html>
   <body>
      <div id="swoosh">
         <div id="wrapper">
            <div id="container">
               <div id="int-content">
                  <div id="main">
                     CONTENT IS HERE
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html> 
```

CSS

```
body{
background: white url(images/tiny_grid.png)repeat;
font: 13px Muli, Arial, Helvetica, sans-serif;
color: #525153;
min-width: 980px;
}

#swoosh {
background: url(images/swoosh.png);
background-repeat: no-repeat;
}

#container {
margin: 10px 16px 0 16px;
background-image: url(images/container_bg.jpg);
min-height: 1000px;
}

#wrapper {
width: 980px;
margin: 0 auto;
background: url(images/cbg.png) no-repeat 0 0;
padding: 0 14px;
} 

#int-content {
margin: -5px 2px 15px 30px;
}

#main {
float: left;
width: 484px;
padding: 34px 0 0 20px;
} 
```

我尝试按照教程的建议将每个项目的高度设置为 100%。这真的把事情搞砸了。

提前谢谢大家！

# .net - 任务继续（OnlyOnFaulted）仍然得到未观察到的异常

> ID：12327205
> 
> 赞同：6
> 
> 时间：2012-09-08T01:05:23.990
> 
> 标签：.net, task-parallel-library, task, continuations, unobserved-exception

我有一个继续处理错误的任务：

```
var uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();
var loadTask = Task<List<OrderItemViewModel>>.Factory.StartNew(() =>
{
       throw new Exception("derp");
});

var errorContinue = loadTask.ContinueWith(t =>
    {
        MainViewModel.RemoveViewModel(this);
    }, CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, uiScheduler); 
```

继续被击中，但几秒钟后我在应用程序中收到此错误：

> 通过等待任务或访问其异常属性未观察到任务的异常。结果，未观察到的异常被终结器线程重新抛出。

这与 uiScheduler 有关吗？类似问题的解决方案基本上就是我正在做 [的事情 等待任务或访问其异常属性都没有观察到任务的异常。结果，未观察到的异常是](https://stackoverflow.com/questions/7883052/a-tasks-exceptions-were-not-observed-either-by-waiting-on-the-task-or-accessi)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T01:18:24.203

您需要实际处理（或至少观察）异常：

```
var errorContinue = loadTask.ContinueWith(t =>
{
    // Observe/acknowledge the exception.  
    // You can use t.Wait(), which throws, or just grab the exception
    var exception = t.Exception; 
    MainViewModel.RemoveViewModel(this);
}, CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted, uiScheduler); 
```

这是因为[TPL 中有关异常处理的文档](http://msdn.microsoft.com/en-us/library/dd997415.aspx)中的这一行：

> 如果您不等待传播异常的任务或访问其 Exception 属性，则在对任务进行垃圾收集时，将根据 .NET 异常策略升级异常。

在您的情况下，您有一个延续，但您实际上从未“等待异常”或访问它的异常属性。我的答案（在您发布的相关问题中）有效的原因是我实际上是在通过延续传递的任务上*使用Exception 属性。*

# objective-c - 菜单栏应用程序与窗口应用程序？

> ID：12327220
> 
> 赞同：0
> 
> 时间：2012-09-08T01:07:25.253
> 
> 标签：objective-c, macos, cocoa

我有一个具有两种类型界面的应用程序 - 它作为菜单栏应用程序和窗口应用程序存在。但是，它不能同时存在于两种状态中。

如何允许用户单击允许他/她更改状态的按钮？

例如，如果我的应用程序当前是一个窗口，当用户单击按钮时，我希望它变成一个菜单栏应用程序，并且窗口应该消失。但是，如果用户再次单击，所有菜单栏信息都应该消失并且窗口应该重新出现。

该应用程序非常繁重，因此我无法承受菜单栏版本和窗口版本同时工作。

我将如何做到这一点？

我正在开发 OSX Mountain Lion，需要 Objective-C/C 中的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:40:19.993

> 但是，它不能同时存在于两种状态中。

为什么不？我建议考虑[一种不同的方法](https://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14)，将应用程序的功能与呈现给用户的方式分开。这样系统繁重的代码只在控制器中运行一次，窗口和状态栏项都可以可视化操作进度或结果或您想要显示的任何内容。

通常的做法是使用状态栏项目来切换窗口可见性或显示菜单来控制主窗口。但是您可以使用它来显示不同的应用程序状态（通知类型），颜色变化很小（首选黑白）或不同的图像，或者在隐藏主窗口时显示带有简化版本的窗口界面的弹出窗口等.

当用户关闭或显示窗口时，它不必影响主应用程序的操作。它只是隐藏了进度/结果的特定视图。添加特定按钮或菜单项以暂停/停止/开始操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:42:13.770

假设您知道如何在 a 中`NSWindow`分别显示您的 UI `NSStatusItem`，那么您可以通过以下方式从一个 UI“切换”到另一个 UI：

1.  隐藏`NSWindow`并显示`NSStatusItem`; 或者

2.  隐藏`NSStatusItem`并显示`NSWindow`.

您可以`NSWindow`使用隐藏隐藏：[`-(void)orderOut:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/orderOut%3a)，您可以使用恢复其可见性：[`-(void)orderFront:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/orderFront%3a)。

至于您的`NSStatusItem`，您可以在需要时创建（参见：）[`–statusItemWithLength:`](http://developer.apple.com/library/mac/documentation/cocoa/reference/ApplicationKit/Classes/NSStatusBar_Class/Reference/Reference.html#//apple_ref/occ/instm/NSStatusBar/statusItemWithLength%3a)并删除它（参见[`– removeStatusItem:`](http://developer.apple.com/library/mac/documentation/cocoa/reference/ApplicationKit/Classes/NSStatusBar_Class/Reference/Reference.html#//apple_ref/occ/instm/NSStatusBar/removeStatusItem%3a)：）。

编辑：

如果您需要对 内的 UI 元素执行任何`NSWindow`操作，可以通过迭代它们来实现：

```
for(NSView* view in [[window contentView] subviews])
{
   [view ...];
} 
```

如果你的`NSWindow`内容是由 NSControls 组成的，你可以像这样禁用它们：

```
for(NSView* currentView in [[window contentView] subviews]) {

    if( [currentView respondsToSelector:@selector(setEnabled:)] )
    {
        [(NSControl*)currentView setEnabled:NO];
    }
} 
```

如果您有一个复杂的控件层次结构，您可以创建一个方法并递归调用它。

# javascript - 如果我当前正在听一首歌，Last.fm API 会在我要求一个曲目时发送 2 个曲目

> ID：12327222
> 
> 赞同：0
> 
> 时间：2012-09-08T01:07:47.587
> 
> 标签：javascript, jquery, xml, api, last.fm

尽管我设置的限制是 1，但使用 user.getRecentTracks，Last.fm 发送 2 首曲目。由于某个聪明人，如果我当前没有收听曲目，它只会发送一首曲目。

例如：[http ://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=yeppaul&api_key=b25b959554ed76058ac220b7b2e0a026&limit=1](http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=yeppaul&api_key=b25b959554ed76058ac220b7b2e0a026&limit=1)

```
<lfm status="ok">
<recenttracks user="yeppaul" page="1" perPage="1" totalPages="1474" total="1474">
<track nowplaying="true">
<artist>
<name>The Offspring</name>
<mbid>23a03e33-a603-404e-bcbf-2c00159d7067</mbid>
<url>The Offspring</url>
<image size="small">http://userserve-ak.last.fm/serve/34/319822.jpg</image>
<image size="medium">http://userserve-ak.last.fm/serve/64/319822.jpg</image>
<image size="large">http://userserve-ak.last.fm/serve/126/319822.jpg</image>
<image size="extralarge">http://userserve-ak.last.fm/serve/252/319822.jpg</image>
</artist>
<loved>0</loved>
<name>Original Prankster</name>
<streamable>1</streamable>
<mbid>07933833-f6df-45eb-80ab-870e1d19b151</mbid>
<album mbid="05a93768-e317-338a-882e-fbe83790d8cd">Conspiracy of One</album>
<url>
http://www.last.fm/music/The+Offspring/_/Original+Prankster
</url>
<image size="small">http://userserve-ak.last.fm/serve/34s/47828469.png</image>
<image size="medium">http://userserve-ak.last.fm/serve/64s/47828469.png</image>
<image size="large">http://userserve-ak.last.fm/serve/126/47828469.png</image>
<image size="extralarge">
http://userserve-ak.last.fm/serve/300x300/47828469.png
</image>
</track>
<track>
<artist>
<name>The Offspring</name>
<mbid>23a03e33-a603-404e-bcbf-2c00159d7067</mbid>
<url>The Offspring</url>
<image size="small">http://userserve-ak.last.fm/serve/34/319822.jpg</image>
<image size="medium">http://userserve-ak.last.fm/serve/64/319822.jpg</image>
<image size="large">http://userserve-ak.last.fm/serve/126/319822.jpg</image>
<image size="extralarge">http://userserve-ak.last.fm/serve/252/319822.jpg</image>
</artist>
<loved>0</loved>
<name>Smash</name>
<streamable>0</streamable>
<mbid>1c6f6ba6-ea2e-4dcf-bef5-20f29d70611d</mbid>
<album mbid="021b8436-4c5f-3aa0-ac08-3ebf6470ada3">Smash</album>
<url>http://www.last.fm/music/The+Offspring/_/Smash</url>
<image size="small">http://userserve-ak.last.fm/serve/34s/60481175.jpg</image>
<image size="medium">http://userserve-ak.last.fm/serve/64s/60481175.jpg</image>
<image size="large">http://userserve-ak.last.fm/serve/126/60481175.jpg</image>
<image size="extralarge">
http://userserve-ak.last.fm/serve/300x300/60481175.jpg
</image>
<date uts="1347066244">8 Sep 2012, 01:04</date>
</track>
</recenttracks>
</lfm> 
```

这是我的 jQuery：

```
$(document).ready(function(){ 
    $.ajax({
        type: "GET",
        url: "http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=yeppaul&api_key=61d9a12fccfc085e5ddc70beccdbeaae&limit=5",
        dataType: "xml",
        success: showListens
    });
});

function showListens(xml) {
    $(xml).find("track").each(function()
    {
        $(".listen").append("<a href=" + $(this).find("url").text() + ">" + $(this).find("artist").text() + " &mdash; " + $(this).find("name").text() + "</a><br /><br />");    
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:12:17.263

由于`track`正在收听的曲目标有属性`nowplaying="true"`，因此您可以使用以下方法过滤这些曲目`not([nowplaying])`：

```
$(xml).find("track:not([nowplaying])").each(function()... 
```

# generics - 当常规套装类不够用时：一个周末战士的项目

> ID：12327226
> 
> 赞同：2
> 
> 时间：2012-09-08T01:08:30.633
> 
> 标签：generics, collections, set, implementation, wiki

# 重新思考套装

## 介绍

在 C++、C#、Java 和 Python 中，有一些类用于定义对象的无序集合，分别是[set](http://www.cplusplus.com/reference/stl/set/)、[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)、[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)和[set](http://docs.python.org/library/sets.html)。这个想法的问题是这些类对“小”离散集有好处。有时我想要一个展示属性的集合，但是如果我列出该集合的所有可能元素，我将耗尽计算机内存。这方面的一个例子如下：

*   考虑所有双精度浮点数的集合。构建这样一个集合会耗尽大多数计算设备的内存，并且需要大量时间来填充。

还有更多这样的集合示例，其中通常的无序对象集合并不理想或不实用。集合不需要（或要求）大量内存需求，而 C++、C#、Java 和 Python 中的集合类型在我们想要考虑非常大的集合时需要大量内存。与其使用上面那些通常的无序离散集合，为什么不创建一个更通用的类（或某种类型的对象）呢？

如果我描述这个时我的词汇不正确，请原谅我，我不是计算机科学家。我只是一个数学低等的研究生，想模仿数学中如何考虑集合。例如，实数是一​​个集合，其元素数量超过了宇宙中亚原子粒子的数量。此外，不可能像在 C++、C#、Java 和 Python 中的集合构造中那样将实数的每个元素放入一个集合中来构造实数。

## 备选集对象建议

集合对象提议有两部分：对这个集合的定性描述和对集合操作的描述。

### 定性描述

一套作为它的两个部分。一个通用对象类型和一个属性。

1.  通用对象类型：集合的元素必须来自域。在编程中，域通常是某种类型的*对象类型*。我将给出一些在编程中经常发现的*对象类型的例子：*

    *   原始数据类型：int、bool、float、double、char、string 等。
    *   固定数组：具有一定固定大小的数据。这里有些例子
    *   动态数组：向量、列表等。
    *   结构
    *   班级
    *   命名空间
    *   void（我的意思是说我可以用任何类型的对象构造一个任意集合）
    *   返回特定类型对象的函数
    *   具有特定输入质量的函数（例如，任何具有 3 个输入的函数，或具有一个整数输入的函数等）
    *   另一套
    *   等等
2.  集合的属性：该属性确定通用对象类型 (1) 的元素是否是集合的一部分。该属性是一个返回真或假的函数。真意味着它是集合的一部分，如果它不是集合的一部分，则为假。

(2) 的优点是属性函数*可以*包含一组离散的对象，就像我们已经在 C++、C#、Java 和 python 中一样，或者我们**可以**只检查元素是否具有属性（例如对象 X 是浮点数吗？ ）。属性函数可以有任意多个输入来确定元素是否是集合的属性（即返回真/假）。人们还应该考虑到属性函数应该足够灵活，可以将任何对象作为输入来处理。例如，当集合的属性函数检查 Horse 对象是否高于 6 英尺时，可能会尝试测试 Cat 对象是否是集合的元素。在这种情况下，属性函数可能会抛出异常，但属性函数仍应返回 false。

### 设置操作

1.  ***Union***：具有 2 个或更多集合作为输入的函数。输入的属性函数分别为 P1、P2、...、Pn。Union 函数返回一个新集合，其属性函数为 P1 或 P2 或 --- 或 Pn。
2.  ***交集***：具有 2 个或更多集合作为输入的函数。输入的属性函数分别为 P1、P2、...、Pn。Intersection 函数返回一个新集合，其属性函数为 P1 和 P2 以及 --- 和 Pn。
3.  ***赞美***：具有唯一输入的函数是一个集合。设输入集的属性函数为 P1。Compliment 函数返回一个新集合，如果 P1 返回 true，则其属性函数返回 false；如果 P1 为假，则属性函数返回真。也就是说，这个新集合具有NOT P1的属性函数。
4.  ***相对赞美***：一个以 2 个集合作为输入的函数。输入的属性函数分别为 P1、P2。Relative Compliment 函数返回一个新集合，其属性函数为 (P1 and NOT P2)。
5.  ***笛卡尔积***：给定一个或多个集合作为输入。该函数生成集合的第二个副本；复制的集合按照它们对应的原始输入集合的相同顺序放置在列表或数组中。

这个集合实现的缺点是没有确定性的方法来表明*对于任何*两个集合，一个集合是另一个集合的子集，使用通用对象类型和属性。也许可以说是计算机科学（和数学）中最著名的例子是 P=NP。为了使它起作用，我们需要证明对于任何两个集合的任何两个属性函数 P1 和 P2，P1 暗示 P2 或 P2 暗示 P1。这并不总是容易做到的。 *我愿意在我想构建的这个集合对象中牺牲这种能力。*

## 一组要完成的目标

我不够精通开发*定性描述*部分中的集合对象，或任何这些编程语言中的集合选项。我呼吁 StackOverflow 社区帮助我开发：

1.  用各种语言（不仅仅是 C++、C#、Java 和 Python）开发上述集合对象和集合操作。我愿意接受可能无法创建一组特定类型的对象（例如
2.  在此页面和/或 GitHub 上，以各种语言呈现并提供 Set Object 和 Set 操作代码。
3.  在示例中使用集合对象和运算符。
4.  详细说明该集合不能或可以用于通用对象类型的内容。

# 代码

本节有 Set 对象的各种实现。如果您有此处未列出的其他语言的实现，请提交。我（或任何模组）可以将其附加到列表中。

## 爪哇

### 设置对象代码

### 设置操作员代码

### 设置对象和运算符示例

## C＃

### 设置对象代码

### 设置操作员代码

### 设置对象和运算符示例

## Python

### 设置对象代码

### 设置操作员代码

### 设置对象和运算符示例

## C++

### 设置对象代码

### 设置操作员代码

### 设置对象和运算符示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T05:45:19.937

您所描述的内容与[番石榴](http://guava-libraries.googlecode.com) [`Range`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Range.html)和[`DiscreteDomain`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/DiscreteDomain.html)课程非常相似。从`Range`javadoc：

> 范围（或“间隔”）定义了某种类型值的连续跨度周围的*边界；*`Comparable`例如，“从 1 到 100 的整数”。请注意，除非可以为方法提供适当的值，否则无法*迭代*这些包含的值。`DiscreteDomain``asSet`

有关更多详细信息和示例，请参阅他们的[Ranges Explained](http://code.google.com/p/guava-libraries/wiki/RangesExplained)文章。那篇文章的介绍从理论上解释了范围：

> 范围，有时称为区间，是特定域的凸（非正式地，“连续”或“不间断”）部分。形式上，凸性意味着对于任何`a <= b <= c`，都`range.contains(a) && range.contains(c)`意味着`range.contains(b)`。
> 
> 范围可以“扩展到无穷大”——例如，范围“x > 3”包含任意大的值——或者可能受到有限约束，例如“2 <= x < 5”。

# c# - awesomium 中网页的外观

> ID：12327236
> 
> 赞同：2
> 
> 时间：2012-09-08T01:10:45.190
> 
> 标签：c#, wpf, google-chrome, webbrowser-control, awesomium

我创建了一个带有 awesomium 的 wpf 网络浏览器，但网页看起来不像 chrome 和其他网页那样清晰。我使用了 Visual c#。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T19:55:52.827

在 1.6 分支中，为了更好地合成透明背景，我们使用 Skia 进行字体字形渲染。问题在于提示默认为“平滑”，这可能看起来比使用 GDI 呈现的字体“更模糊”。

在 Windows 的 1.7 分支中，我们现在使用 GDI/Cleartype（就像 Chrome 和 IE）进行大多数字体渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T05:46:00.630

你无能为力。我们遇到了确切的问题。awesomium 中的字体比 Chrome 或 IE 中的字体可读性差很多。

底线是，如果您的应用程序要出售内容，请不要使用 AWESOMIUM！

# common-lisp - Common Lisp：如何访问某个多维数组的一行？

> ID：12327237
> 
> 赞同：6
> 
> 时间：2012-09-08T01:10:46.017
> 
> 标签：common-lisp

假设我写了

```
(setf s (make-array (list 9 9) :element-type 'bit)) 
```

所以 s 是一个 9x9 的位矩阵。

我想获得第一行的 s。我怎么得到它？

我本可以做到以下几点：

```
(setf s (make-array 9 
          :element-type 'array 
          :initial-element 
          (make-array 9 :element-type 'bit))) 
```

并通过 (svref s 0) 访问第一行。
但我想知道是否有内置方式。
（并且 2 dim 数组似乎分配了更少的字节）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T02:16:26.043

```
(defun array-slice (arr row)
    (make-array (array-dimension arr 1) 
      :displaced-to arr 
       :displaced-index-offset (* row (array-dimension arr 1)))) 
```

这仅适用于行切片，IIRC 不能复制数组。写入切片将修改原始数组。

# arduino - Arduino Ethernet Shield Client.connect 返回错误代码 -5

> ID：12327238
> 
> 赞同：2
> 
> 时间：2012-09-08T01:10:52.967
> 
> 标签：arduino

我在[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)上有一个全新的以太网[屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)，并且已经完成了许多（非以太网）示例，没有任何问题，直到我尝试使用以太网屏蔽。

使用提供的 EthernetClient 示例，连接失败。返回码是 -5（我只能找到 -4 到 1 的答案）。

```
/*
  Web client

 This sketch connects to a website (http://www.google.com)
 using an Arduino Wiznet Ethernet shield.

 Circuit:
 * Ethernet shield attached to pins 10, 11, 12, 13

 Created 18 Dec 2009
 Modified 9 Apr 2012
 by David A. Mellis

 */

#include <SPI.h>
#include <Ethernet.h>

// Enter a MAC address for your controller below.
// Newer Ethernet shields have a MAC address printed on a sticker on the shield

byte mac[] = {0x90, 0xA2, 0xDA, 0x0D, 0x4E, 0x71 };;
char server[] = "google.com"; // Google

// Initialize the Ethernet client library
// with the IP address and port of the server
// that you want to connect to (port 80 is default for HTTP):
EthernetClient client;

void setup() {
 // Open serial communications and wait for port to open:
  Serial.begin(9600);
   while (!Serial) {
    ; // wait for serial port to connect. Needed for Leonardo only
  }

  // Start the Ethernet connection:
  if (Ethernet.begin(mac) == 0) {
    Serial.println("Failed to configure Ethernet using DHCP");
    // no point in carrying on, so do nothing forevermore:
    for(;;)
      ;
  }
  // Give the Ethernet shield a second to initialize:
  delay(1000);
  Serial.println("connecting...");

    Serial.println("Obtaining local IP address");
    IPAddress myIPAddress = Ethernet.localIP();
    Serial.println(myIPAddress);
  // if you get a connection, report back via serial:
  int ret = client.connect(server, 80);
  if (ret == 1) {
    Serial.println("connected");
    // Make a HTTP request:
    client.println("GET /search?q=arduino HTTP/1.0");
    client.println();
  }
  else {
    // kf you didn't get a connection to the server:
    Serial.println("Connection failed");
    Serial.println(ret);
    Serial.println(client.status());
  }
}

void loop()
{
  // If there are incoming bytes available
  // from the server, read them and print them:
  if (client.available()) {
    char c = client.read();
    Serial.print(c);
  }

  // If the server's disconnected, stop the client:
  if (!client.connected()) {
    Serial.println();
    Serial.println("Disconnecting.");
    client.stop();

    // Do nothing forevermore:
    for(;;)
      ;
  }
} 
```

结果总是：

```
Connecting...
Obtaining local IP address
192.168.0.7
Connection failed
-5
0

disconnecting. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:04:15.213

不知道为什么这会有所帮助，但是在串行初始化之后，在开始以太网之前添加延迟，并且在使用以太网之前增加延迟似乎是有效的。

```
/*
  Web client

 This sketch connects to a website (http://www.google.com)
 using an Arduino Wiznet Ethernet shield. 

 Circuit:
 * Ethernet shield attached to pins 10, 11, 12, 13

 created 18 Dec 2009
 modified 9 Apr 2012
 by David A. Mellis

 */

#include <SPI.h>
#include <Ethernet.h>

// Enter a MAC address for your controller below.
// Newer Ethernet shields have a MAC address printed on a sticker on the shield

byte mac[] = {0x90, 0xA2, 0xDA, 0x0D, 0x4E, 0x71 };;
char server[] = "google.com"; // Google

// Initialize the Ethernet client library
// with the IP address and port of the server 
// that you want to connect to (port 80 is default for HTTP):
EthernetClient client;

void setup() {
 // Open serial communications and wait for port to open:
  Serial.begin(9600);
   while (!Serial) {
    ; // wait for serial port to connect. Needed for Leonardo only
  }
delay(5000);
  // start the Ethernet connection:
  if (Ethernet.begin(mac) == 0) {
    Serial.println("Failed to configure Ethernet using DHCP");
    // no point in carrying on, so do nothing forevermore:
    for(;;)
      ;
  }
  // give the Ethernet shield a second to initialize:
  delay(5000);
  Serial.println("connecting...");

    Serial.println("Obtaining local IP");
    IPAddress myIPAddress = Ethernet.localIP(); 
    Serial.println(myIPAddress);
  // if you get a connection, report back via serial:
  int ret = client.connect(server, 80);
  if (ret == 1) {
    Serial.println("connected");
    // Make a HTTP request:
    client.println("GET /search?q=arduino HTTP/1.0");
    client.println();
  } 
  else {
    // kf you didn't get a connection to the server:
    Serial.println("connection failed");
    Serial.println(ret);
    Serial.println(client.status());
  }
}

void loop()
{
  // if there are incoming bytes available 
  // from the server, read them and print them:
  if (client.available()) {
    char c = client.read();
    Serial.print(c);
  }

  // if the server's disconnected, stop the client:
  if (!client.connected()) {
    Serial.println();
    Serial.println("disconnecting.");
    client.stop();

    // do nothing forevermore:
    for(;;)
      ;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:23:50.070

尝试定义服务器 IP 地址，如[Arduino 参考页](http://arduino.cc/en/Reference/ClientConnect)所示：

```
byte server[] = { 64, 233, 187, 99 }; // Google 
```

尝试几个不同的示例程序。迁移到 IDE 1.0 后进行了一些可能影响兼容性的修订。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T01:25:10.557

该 Google IP 地址 (173.194.33.104) 现在无效。尝试使用 74.125.226.242 代替：

```
IPAddress server(74,125,226,242); // Google 
```

在您在 Arduino 上试用之前，请确保您可以在浏览器中打开此 IP 地址：

```
 http://74.125.226.242 
```

# c++ - ifstream 不使用内存的最佳读取方式

> ID：12327239
> 
> 赞同：2
> 
> 时间：2012-09-08T01:10:56.170
> 
> 标签：c++, file, input, ifstream

我有一个包含作者和作者所写书籍的文本文件。我被分配编写一个程序，用户将提供作者的姓名。并且该程序必须打印该作者所写的任何书籍的名称。

我知道我应该使用 ifstream 来阅读这些信息。但是我怎样才能做到这一点，这样我的程序**就不**会将整个文件读入内存（数组、向量等）来执行任何搜索查询？

解决这个问题的最佳方法是什么？我的程序也应该使用类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T01:21:21.077

我不知道整个答案，甚至不知道语法，但一个好的入门方法是您对输入文本文件的格式了解多少？它是否只是一个两列文件，例如： [作者书] 由通用分隔符分隔？在这种情况下，您可以构建一个遍历整个文件的循环，并且只将条目存储到与搜索字符串匹配的向量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:45:58.137

这在很大程度上取决于您从文件中查找书籍的频率。如果您只想查找一两个，那么最明智的方法可能是扫描文件读取成对的行以找到您想要的行。

大多数其他方法假定您将经常在文件中查找数据，以证明在前面花费一些额外时间来优化以后的查询是合理的。假设这是正确的，一种可能性是通过读取文件、散列每个作者的姓名以及该作者/书籍对的“记录”在文件中的位置来创建索引。

然后，您会将这些散列/文件偏移对存储到单独的文件中。当您想要进行查询时，您会将哈希/文件偏移量读入内存。散列您正在搜索的作者的姓名（使用相同的算法）并查看哪些（如果有）文件偏移量具有相同的散列值。寻找文件中的那些点，并阅读这本书的记录。此时，将文件中的作者姓名与输入的作者姓名重新进行比较，以防发生哈希冲突。显示匹配的记录。

# php - 保护 PHP 电子邮件表单不被注入？

> ID：12327241
> 
> 赞同：1
> 
> 时间：2012-09-08T01:11:08.590
> 
> 标签：php, security, code-injection

我听说过 PHP 表单被滥用来从表单应该发送给的人发送电子邮件。这是一个实际问题吗？如果是，如何解决？是不是类似于防止SQL注入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:50:48.883

您正在谈论[电子邮件注入](http://en.wikipedia.org/wiki/Email_injection)安全漏洞。例如，如果您将自定义标头传递给`mail()`以下代码示例中的函数，那么您很容易受到攻击：

```
<?php
$additional_headers = "Reply-To: {$_GET['user_email']}";
mail($to, $subject, $message, $additional_headers);
?> 
```

考虑到恶意用户不仅传递了他的电子邮件，而且还传递了额外的标头，如下所示：

```
<?php
//$_GET['user_email'] = "me@example.net";// this is what you expect
// this is what you're getting actually
$_GET['user_email'] = "me@example.net\r\nBcc: someone@example.net, ...";
?> 
```

然后，恶意用户会将他所谓的垃圾邮件充斥邮件的副本发送到您名下的服务器上几乎无限的用户列表。通过添加某些其他安全的 MIME 标头，您甚至可以用他自己的方式完全替换您的消息。你只能想象这会导致什么后果！

解决方案很简单：不要信任您从用户那里收到的任何内容，并过滤/验证收到的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:24:13.033

如果输入未正确过滤，任何形式都容易受到攻击。无论是电子邮件表单、注册表单，还是由 PHP 支持都没有关系。

对于电子邮件表单，请考虑 PHP 的[过滤器功能](http://www.php.net/manual/en/filter.examples.sanitization.php)以正确清理电子邮件。

一个好的经验法则是记住 FIFO：过滤输入，转义输出。

超全局变量几乎应该被认为是脏的并且需要过滤（输入）。输出转义取决于上下文：向某人发送电子邮件、插入数据库、以 HTML 呈现——所有这些都需要不同的输出过滤技术。

# javascript - 使用 JavaScript 更改输入按钮的 onClick 参数

> ID：12327242
> 
> 赞同：-1
> 
> 时间：2012-09-08T01:11:28.700
> 
> 标签：javascript, jquery, html, ajax, onclick

我正在制作一个 Android Web 应用程序，并且我正在使用 JQuery Mobile。我的问题是：

`onClick`是否可以使用 Javascript更改事件的参数？我将使用 Ajax 发布请求从数据库中获取我的行的主键属性。并且得到主键后，我想设置输入按钮`onClick`事件的参数。

这是我的程序的结构：

```
<script>
$.ajax({
    type:"POST",
    url:"url.php",
    dataType:"json",
    data:{input:input},
    success: function (result)
    {
        //Set my input button's onclick
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:15:57.807

用这个

```
yourelement.addEventListener('click', yourfunction); 
```

或这个

```
yourelement.addEventListener('click', function() {
   //your code here
}); 
```

或在jQuery中

```
$('yourelement').click(yourfunction) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:17:25.590

```
success: function (result)
{
  $("#" + result).click(function () {
    // do something
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T01:21:31.800

你可以这样做：

```
$('#element').click({id: id}, handleClick); 
```

例如，如果单击处理程序位于范围之外：

```
function clickHandler(ev) {

    var id = ev.data.id;
    // use id

} 
```

# sql - 从删除 sql -Oracle 中捕获文件中列的行

> ID：12327243
> 
> 赞同：0
> 
> 时间：2012-09-08T01:11:38.357
> 
> 标签：sql, oracle

我必须为已删除的列捕获行。我怎样才能做到这一点而不必编写选择查询？

```
delete from myschema.mytable where currentdatetimestamp > columnDate 
```

例如，这应该删除 5 行

我想在受上述文件影响的文件中捕获 columnID 的行（不是表的所有列）应该有

```
1234
1235
1236
1237

```

1238

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:09:58.320

您可以使用[DELETE 语句](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8005.htm)的[RETURNING 子句](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/returninginto_clause.htm)（改编自[Oracle Docs 中的此示例](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/tuning.htm#BABHDFDE)）：

```
DECLARE
   TYPE NumList IS TABLE OF myschema.mytable.columnID%TYPE;
   IDs NumList;
BEGIN
   DELETE FROM myschema.mytable WHERE currentdatetimestamp > columnDate
      RETURNING columnID BULK COLLECT INTO IDs;
   DBMS_OUTPUT.PUT_LINE('Deleted ' || SQL%ROWCOUNT || ' rows:');
   FOR i IN IDs.FIRST .. IDs.LAST
   LOOP
      DBMS_OUTPUT.PUT_LINE('columnID: '||IDs(i));
   END LOOP;
END;
/ 
```

您可以对生成的 ID 集合做任何您喜欢的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:31:51.593

使用 DELETE 触发器可以做你想做的事。下面是一个例子：

```
CREATE OR REPLACE TRIGGER MY_TABLE_DELETE_TRIGGER
  BEFORE DELETE ON MY_TABLE
  FOR EACH ROW
BEGIN
  DBMS_OUTPUT.PUT_LINE('Deleted row with ID=' || :OLD.COLUMN_ID);
END MY_TABLE_DELETE_TRIGGER; 
```

这只是一个例子——你应该修改它来做你需要的任何事情。

分享和享受。

# ios - 模拟器与设备上的“实时字节”不同

> ID：12327249
> 
> 赞同：1
> 
> 时间：2012-09-08T01:12:31.723
> 
> 标签：ios, memory, memory-management, instruments, ram

我有一个程序在分配工具中显示大约。72 MB 的“活动字节”，但是当我在 iPod touch 上运行分析时，它显示为 6 MB。我不明白为什么会有巨大的差异。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T01:42:42.073

请记住，iOS 模拟器是一个*模拟器*，**而不是一个模拟器**。

iOS 模拟器的工作原理是将您的 iOS 应用程序编译为 x86 代码，并将其链接到一组系统框架，这些框架在台式计算机上模拟它们的 iOS 等效项。这些框架必然与你在“真实”iOS 上找到的框架不同——毕竟，它们是为不同的 CPU 架构编译的，并且是“与”桌面硬件“对话”，而不是手持设备。

知道了这一点，应用程序性能的某些方面在模拟器上可能与在真实设备上完全不同是可以理解的。请记住这一点，并尽早并经常在真实硬件上测试您的代码！

# php - WooCommerce：使用价格覆盖将产品添加到购物车？

> ID：12327251
> 
> 赞同：42
> 
> 时间：2012-09-08T01:13:31.907
> 
> 标签：php, wordpress, class, woocommerce

```
$replace_order = new WC_Cart();
$replace_order->empty_cart( true );
$replace_order->add_to_cart( "256", "1"); 
```

上面的代码将产品添加`256`到购物车`1`时间。但我遇到的问题是我希望能够完全覆盖产品价格......据我所知，我唯一能做的就是将优惠券应用于购物车。

有没有办法完全覆盖完全定制的价格？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-08T11:31:23.017

这是在购物车中覆盖产品价格的代码

```
add_action( 'woocommerce_before_calculate_totals', 'add_custom_price' );

function add_custom_price( $cart_object ) {
    $custom_price = 10; // This will be your custome price  
    foreach ( $cart_object->cart_contents as $key => $value ) {
        $value['data']->price = $custom_price;
        // for WooCommerce version 3+ use: 
        // $value['data']->set_price($custom_price);
    }
} 
```

希望它会有用...

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-01-20T06:50:18.880

您需要`if`在上面的代码中引入一条检查产品 id 的语句：

```
add_action( 'woocommerce_before_calculate_totals', 'add_custom_price' );

function add_custom_price( $cart_object ) {
    $custom_price = 10; // This will be your custome price  
    $target_product_id = 598;
    foreach ( $cart_object->cart_contents as $value ) {
        if ( $value['product_id'] == $target_product_id ) {
            $value['data']->price = $custom_price;
        }
        /*
        // If your target product is a variation
        if ( $value['variation_id'] == $target_product_id ) {
            $value['data']->price = $custom_price;
        }
        */
    }
} 
```

在任何地方添加此代码并确保此代码始终可执行。

添加此代码后，当您调用时：

```
global $woocommerce; 
$woocommerce->cart->add_to_cart(598); 
```

只有该产品会以覆盖价格添加，其他添加到购物车的产品将被忽略以覆盖价格。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-04-10T12:06:43.310

我已经尝试了上述所有代码示例，最新的 woocommerce 3.0 不支持上述任何示例。使用下面的代码并为我完美工作。

```
add_action( 'woocommerce_before_calculate_totals', 'add_custom_price' );

function add_custom_price( $cart_object ) {
    $custom_price = 10; // This will be your custom price  
    foreach ( WC()->cart->get_cart() as $cart_item_key => $cart_item ) {
        $cart_item['data']->set_price($custom_price);   
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-05-08T12:04:46.930

woocommerce 3.0.0 版发布后，使用 set_price($price) 函数在添加到购物车时更新产品价格。示例如下：

```
add_action( 'woocommerce_before_calculate_totals', 'mj_custom_price' );

function mj_custom_price( $cart_object ) {
   $woo_ver = WC()->version; 
   $custom_price = 10;
   foreach ( $cart_object->cart_contents as $key => $value )
   {
       if($woo_ver < "3.0.0" && $woo_ver < "2.7.0")
       {
           $value['data']->price = $custom_price;
       }
       else
       {
           $value['data']->set_price($custom_price);
       }
   }            
} 
```

非常感谢

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-11T09:05:00.447

对于 Wordpress 和 Woocommerce 最新版本，请像这样使用

```
add_action( 'woocommerce_before_calculate_totals', 'add_custom_price' );

function add_custom_price( $cart_object ) {
    foreach ( $cart_object->cart_contents as $key => $value ) {
        $custom_price = 5;
        $value['data']->set_price($custom_price); 
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-07T09:24:57.317

对于从 Google 来到这里的每个人。由于我发现更新到 WooCommerce 3.0.1，因此不推荐使用上述内容。

而不是上面你现在需要使用`set_price`而不是`price`

这是一个例子：

```
add_action( 'woocommerce_before_calculate_totals', 'add_custom_price' );
function add_custom_price( $cart_object ) {
    $custom_price = 10; // This will be your custome price  
    foreach ( $cart_object->cart_contents as $key => $value ) {
        $value['data']->set_price = $custom_price;
    }
} 
```

我希望这对未来的人们有所帮助:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-14T19:09:30.830

要使其动态化（分别覆盖购物车中每个项目的价格），您需要使用`woocommerce_add_to_cart`钩子将覆盖产品价格保存在会话中，并将购物车项目键作为会话键。

通过使用这些会话值，您可以计算正确的购物车总数并使更改后的价格也出现在订单项目中

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-25T16:13:46.900

使用 WooCommerce 2.5，我发现这是一个两部分的过程。第一步是在通过 woocommerce_add_cart_item 过滤器添加到购物车时更改定价的运行时显示。第二部分是设置通过 woocommerce_get_cart_item_from_session 过滤器在结帐期间读取的持久会话数据。这似乎比挂钩计算总计过滤器（例如 woocommerce_before_calculate_totals）更快，因为它们在 WooCommerce 中运行得非常频繁。

更多详细信息： [woocommerce 在添加到购物车时更改价格](https://stackoverflow.com/questions/24731118/woocommerce-change-price-while-add-to-cart/35632566#35632566)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-28T14:25:35.263

我就是这样做的，首先我将我的自定义价格添加到 cart_item_data 女巫可以将自定义数据保存到购物车项目，然后我使用 woocommerce_before_calculate_totals，循环购物车并添加之前添加的价格。

```
function add_donation_to_cart() { 

    $cart_item_data = array('price' => $_REQUEST['donate_amount']);
    $woocommerce->cart->add_to_cart( 5395, 1, '', array(), $cart_item_data);
}

add_action( 'woocommerce_before_calculate_totals', 'add_custom_price' );

function add_custom_price( $cart ) {
    foreach ( $cart->cart_contents as $key => $value ) {
        $value['data']->price = $value['price'];
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-10T09:42:12.990

您可以使用以下

```
add_filter( 'woocommerce_cart_item_price', 'kd_custom_price_message' );

function kd_custom_price_message( $price ) {

        $textafter = ' USD'; 
        return $price . $textafter;
} 
```

# java - 带有 ComponentListener 的 JPanel

> ID：12327254
> 
> 赞同：4
> 
> 时间：2012-09-08T01:14:22.863
> 
> 标签：java, swing, events, jpanel, swingworker

我有一个 Main JPanel，它的布局设置为 CardLayout。

主 JPanel 有 4 张卡片：Card1JPanel、Card2JPanel、Card3JPanel、Card4JPanel。

我还有一个名为“MySwingy”的 SwingWorker 类，当它的循环标志设置为 true 时，它​​会永远执行某些操作。

当 Card1JPanel 可见/显示时，我想执行 MySwingy 工作者。

当 Card1JPanel 不可见/隐藏时，我想停止 MySwingy 工作人员；

以下是我目前拥有的代码，我想知道是否有更好/更清洁的方法来解决上述问题。在下面的代码示例中，您将看到我使用 Card1JPanel 的 ComponentListener 来检测它是显示还是隐藏，但是如果我有很多很多卡片，每个卡片都有自己的 ComponentListener 事件，这些事件侦听器会减慢我的应用程序吗？

非常感谢你

```
public class Card1JPanel extends JPanel{

    private MySwingy mySwingy;
    private JTable tableDatabase;

    public Card1JPanel(){
        initComponents();//tableDatabase is drawn here among other things
        this.addComponentListener(new myListener());
    }

    class myListener implements ComponentListener {

        @Override
        public void componentHidden(ComponentEvent e) {
            try{
                mySwingy.stopExecuting();//A flag inside of the worker gets set to false that terminates the while(true) loop.
            }catch(NullPointerException ex){
            }
        }

        @Override
        public void componentMoved(ComponentEvent e) {
        }

        @Override
        public void componentResized(ComponentEvent e) {
        }

        @Override
        public void componentShown(ComponentEvent e) {
            mySwingy = new MySwingy(tableDatabase);
            mySwingy.execute();
        }
    }
} 
```

**编辑：显示 mySwingy 的作用：**

MySwingy 用于解析来自 SQL 数据库的数据，并在数据库中的数据发生更改时更新 tableDatabase。tableDatabase 位于 Card1JPanel 上，并使用 SwingUtilities.InvokeLater 在 MySwingy 的 EDT 上更新。在我的应用程序中，我有许多带有 JTables 和 SwingWorkers 的卡片 (JPanels)，它们在 EDT 上更新他们的 JTables。现在，我确信如果所有这些 JTable 都从他们的 SwingWorkers 在 EDT 上不断更新，那么 GUI 将会冻结。因此，当 JPanel 不可见时，如何阻止 SwingWorker 更新 JTable？那是我的问题。

```
public class MySwingy extends SwingWorker<Void,Void>{

    private JTable tableDatabase;
    private boolean isStopExecuting;
    private boolean isDatabaseDataChanged;

    public MySwingy(JTable tableDatabase){
        this.tableDatabase = tableDatabase
        isStopExecuting = false;
        isDatabaseDataChanged = false;
    }

    public void stopExecuting(){
        isStopExecuting = true;
    }

    @Override
    public Void doInBackground(){

        while(isStopExecuting == false){

            //Here is the code that parses some data from an SQL database and if the data in the SQL database
            //has changed the isDatabaseDataChanged boolean flag is set to true,
            //else isDatabaseDataChanged boolean flag is set to false;

            if(isDatabaseDataChanged == true){

                isDatabaseDataChanged = false;

                SwingUtilities.InvokeLater(new Runnable(){

                    @Override
                    public void run(){

                    //Update tableDatabase rows with new data

                    }
                });
            }
        }

    return null;

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T01:46:07.823

不要切换工人；让它运行。相反，仅当它`isVisible()`直接通过`process()`或间接通过属性更改时才有条件地更新视图。

附录：一些有用的评论值得仔细研究。

*   正如@Andrew 所说，很大程度上取决于工人的任务。可以在后台线程上演化模拟模型，但任何渲染都*必须*在[事件调度线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上进行。

*   我的困惑不亚于@mKorbel；你要求对解决方案进行批判性评估，但没有说明它要解决什么问题。

*   @kleopatra 指出 SwingWorker 被设计为只[执行一次](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#execute%28%29)。任何从另一个线程控制循环的尝试`doInBackground()`都将难以同步。还要检查您的任务的预期延迟，[此处](https://stackoverflow.com/a/12322831/230513)提到。的实例`javax.swing.Timer`，它暴露`start()`和`stop()`方法，可能是一个替代方案。

*   [更新的问题](https://stackoverflow.com/revisions/12327254/3)：如果您的工作人员需要轮询具有可变延迟的数据源，`java.util.Timer`请在后台线程中使用以可持续的速度执行触发器查询。

# .htaccess - htaccess url 破坏结果

> ID：12327256
> 
> 赞同：0
> 
> 时间：2012-09-08T01:14:27.720
> 
> 标签：.htaccess

如果我在 index.php/ 之后添加任何字符，我正在尝试使用我的网址修复一些奇怪或损坏的结果：

```
http://domain/index.php/? 
```

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:07:50.810

此 Web 服务器功能称为**Path Info**。查找 Apaches *AcceptPathInfo*设置。你的问题到底是什么？您想将普通查询字符串与路径信息 URL 一起使用吗？

# java - 使用soapUI但不是独立Java客户端的相互SSL

> ID：12327257
> 
> 赞同：3
> 
> 时间：2012-09-08T01:14:54.470
> 
> 标签：java, ssl, sslhandshakeexception, mutual-authentication

我试图让相互 SSL 从 Java 客户端工作。我的soapUI 配置适用于我在WS-security 配置中指定keystore 和truststore 的地方。

当我对具有以下系统参数的 Java 客户端执行相同操作时

```
System.setProperty("javax.net.ssl.keyStore", "D:\\certs\\client_keystore.jks");
System.setProperty("javax.net.ssl.keyStorePassword", "changeit");
System.setProperty("javax.net.debug", "all");
System.setProperty("javax.net.ssl.trustStore", "D:\\certs\\truststore.jks");
System.setProperty("javax.net.ssl.trustStorePassword", "trustpass"); 
```

我收到这个错误

```
main, received EOFException: error
main, handling exception: javax.net.ssl.SSLHandshakeException: Remote host closed
  connection during handshake
main, SEND TLSv1 ALERT: fatal, description = handshake_failure
Padded plaintext before ENCRYPTION: len = 18 
```

我启用了这个：`System.setProperty("javax.net.debug", "all");`

从调试日志中我看到：

```
*** Certificate chain
*** 
```

我该如何调试这个问题？

# ios - iOS 我在哪里可以找到cordova-1.8.0.js？

> ID：12327262
> 
> 赞同：1
> 
> 时间：2012-09-08T01:16:13.360
> 
> 标签：ios, cordova

我想从 to 更新`cordova-1.7.1.js`，`cordova-1.8.0.js`但我找不到后者

我按照[API Documentation](http://docs.phonegap.com/en/edge/guide_upgrading_ios_index.md.html) on how to upgrade from 1.7.0 projects to 1.8.x 但是当它说

`2 - Copy the www/cordova-1.8.0.js file from the new project into your www folder, and delete your www/cordova-1.7.x.js file`

我在任何地方都找不到`cordova-1.8.0.js`文件夹`www`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:25:56.467

似乎可能的答案在这里： [https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/ZgW8-v9ZITQ](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ZgW8-v9ZITQ)

[建议从 github https://github.com/phonegap/phonegap/tags](https://github.com/phonegap/phonegap/tags)下载你想要的版本 ，然后在 ios 子目录中查找...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:13:10.847

安装 Cordova 后，下面有一个 javascript 文件夹`/Users/xxxx/Documents/CordovaLib`，其中包含 js 文件。

# c# - Windows Phone 7 - OrderedDictionary / 替代品

> ID：12327267
> 
> 赞同：0
> 
> 时间：2012-09-08T01:17:28.973
> 
> 标签：c#, .net, windows-phone-7, collections

我对 C# 完全陌生，所以除非有人可以提出替代方案，否则我将对我自己的 OrderedDictionary 版本进行一次可怕的尝试。

我需要能够通过数组索引访问我的元素，保留它们被添加的顺序，并且我还将经常使用它们的键更新单个元素。

1.  是否有允许在手机上进行此操作的集合？

2.  如果我保留一个列表和字典，它们会指向同一个项目还是我必须做某种指针的事情？：

    ```
    Item i = new Item();
    list.Add(i);
    dict.Add("key", i); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:09:15.340

这是我的实现（来自[开源 OpenNETCF 扩展库](http://oncfext.codeplex.com/)）：

```
public class OrderedDictionary<TKey, TValue> : IEnumerable<KeyValuePair<TKey, TValue>>
{
    private Dictionary<TKey, TValue> m_dictionary;
    private List<TValue> m_list = new List<TValue>();
    private object m_syncRoot = new object();

    public OrderedDictionary()
    {
        m_dictionary = new Dictionary<TKey, TValue>();
    }

    public OrderedDictionary(IEqualityComparer<TKey> comparer)
    {
        m_dictionary = new Dictionary<TKey, TValue>(comparer);
    }

    public void Add(TKey key, TValue value)
    {
        lock (m_syncRoot)
        {
            m_dictionary.Add(key, value);
            m_list.Add(value);
        }
    }

    public TValue this[int index]
    {
        get { return m_list[index]; }
    }

    public TValue this[TKey key]
    {
        get { return m_dictionary[key]; }
    }

    public int Count 
    {
        get { return m_dictionary.Count; } 
    }

    public Dictionary<TKey, TValue>.KeyCollection Keys 
    {
        get { return m_dictionary.Keys; } 
    }

    public Dictionary<TKey, TValue>.ValueCollection Values 
    {
        get { return m_dictionary.Values; } 
    }

    public void Clear()
    {
        lock (m_syncRoot)
        {
            m_dictionary.Clear();
            m_list.Clear();
        }
    }

    public bool ContainsKey(TKey key)
    {
        return m_dictionary.ContainsKey(key);
    }

    public bool ContainsValue(TValue value)
    {
        return m_dictionary.ContainsValue(value);
    }

    public void Insert(int index, TKey key, TValue value)
    {
        lock (m_syncRoot)
        {
            m_list.Insert(index, value);
            m_dictionary.Add(key, value);
        }
    }

    public void Remove(TKey key)
    {
        lock (m_syncRoot)
        {
            if (ContainsKey(key))
            {
                var existing = m_dictionary[key];
                m_list.Remove(existing);
                m_dictionary.Remove(key);
            }
        }
    }

    public IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator()
    {
        return m_dictionary.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:27:46.653

实际上，使用列表和字典可能是一个不错的选择。您正在谈论的“指针事物”默认情况下发生在 .NET 中的对象（任何类和/或结构）中。.NET 中的所有对象都是通过*引用*传递的。

所以，如果你使用：

```
Item i = new Item();
list.Add(i);
dict.Add("key",i);
Console.WriteLine(list.Last() == dict["key"]); 
```

您的输出将是“真实的”。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T10:20:05.650

我不建议使用 OrderedDictionary，因为它是一个非通用容器。

但是，如果您只想像往常一样使用它。您可以移植 Mono 的 OrderedDictionary 版本。

[https://github.com/mono/mono/blob/master/mcs/class/System/System.Collections.Specialized/OrderedDictionary.cs](https://github.com/mono/mono/blob/master/mcs/class/System/System.Collections.Specialized/OrderedDictionary.cs)

如果你想移植这个，这里有一些提示：

1.  删除任何不可用的接口
2.  移除序列化相关代码
3.  将 ArrayList 替换为`List<object>`
4.  将哈希表替换为`Dictionary<object, object>`

# scala - 有没有更惯用的方法来使用 Casbah 检查密码？

> ID：12327269
> 
> 赞同：2
> 
> 时间：2012-09-08T01:17:37.687
> 
> 标签：scala, mongodb, casbah

我有以下代码：

```
def authenticateByUsername（用户名：字符串，密码：字符串）：布尔 = {
    val user = users.findOne(MongoDBObject(USERNAME -> username))
    如果（用户.isDefined）{
        val pw = user.get.getAs(PASSWORD)
        如果（pw.isDefined）
            BCrypt.checkpw(pw.get, 密码)
        否则为假
    }否则为假
}

```

有没有更惯用的方式来做到这一点？这是一个 if-else 的噩梦，这在 Scala 中似乎并不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:33:17.980

您是对的，有更好的方法，并且通常在 an 上使用`get`（或者，程度稍低，`isDefined`）`Option`是一个危险信号。在这种情况下，您可以使用`for`-comprehension：

```
def authenticateByUsername(username: String, password: String): Boolean = {
  val result: Option[Boolean] = for {
    user <- users.findOne(MongoDBObject(USERNAME -> username))
    pass <- user.getAs(PASSWORD)
  } yield BCrypt.checkpw(pass, password)

  result getOrElse false
} 
```

或者，更简洁一点：

```
def authenticateByUsername(username: String, password: String): Boolean =
  users.findOne(MongoDBObject(USERNAME -> username)).flatMap(
    _.getAs(PASSWORD)
  ).map(
    BCrypt.checkpw(_, password)
  ).getOrElse(false) 
```

后者本质上只是 -comprehension 的脱糖版本`for`。

# installation - 带有 InnoSetup 的单选按钮：定义将要安装或不安装的文件

> ID：12327273
> 
> 赞同：4
> 
> 时间：2012-09-08T01:18:20.283
> 
> 标签：installation, inno-setup

使用 InnoSetup 生成的单个可执行文件（带有“IconMain.ico”）和单个卸载（带有不同的图标“IconUninst.ico”），我想在驱动器“C”和“K”中安装一些文件。不允许用户更改驱动器路径/名称，例如：

```
STANDART RADIOBUTTON - 
Full installation. Files that will be installed in drive "C:" AND "K:"

- Game.exe     --> DRIVE C:\games
- Mapping.exe  --> DRIVE C:\Mapping
- Pics.dll     --> DRIVE C:\Pics 
- AAA.dll      --> DRIVE K:\Sounds
- BBB.obj      --> DRIVE K:\Sounds 
```

'

```
ADVANCED RADIONBUTTON -
Partial installation. 
The only files that will be installed. (IF user agrees to continue)

- AAA.dll      --> DRIVE K:\Sounds
- BBB.obj      --> DRIVE K:\Sounds 
```

**我怎样才能做到这一点？** 谢谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T19:37:53.713

要有条件地安装某个文件，您需要使用该[`Check`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptcheck)参数。您需要对表达式或函数返回 True 以安装项目，False 以跳过。您之前作业的示例显示在我在上一句中链接的参考页面中。

因此，要将它与[`custom installation type radio buttons`](https://stackoverflow.com/a/11719594/960757)您提到的结合起来，您只需要创建一个将分配给检查的函数，该函数将根据所选单选按钮返回其结果。

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Files]
; these two items will be installed always
Source: "AAA.dll"; DestDir: "K:\Sounds"
Source: "BBB.obj"; DestDir: "K:\Sounds"
; these three items will be installed only when the IsFullInstallation
; function returns True, what will depend on the selected radio button
Source: "Game.exe"; DestDir: "C:\Games"; Check: IsFullInstallation;
Source: "Mapping.exe"; DestDir: "C:\Mapping"; Check: IsFullInstallation;
Source: "Pics.dll"; DestDir: "C:\Pics"; Check: IsFullInstallation;

[Code]    
const
  FullDescText =
    'Full installation. Files will be installed on drives "C:" and "K:"';
  PartDescText =
    'Partial installation. Files will be installed on drives "C:" and "K:"';

var
  FullRadioButton: TNewRadioButton;
  PartRadioButton: TNewRadioButton;

procedure InitializeWizard;
var
  CustomPage: TWizardPage;
  FullDescLabel: TLabel;
  PartDescLabel: TLabel;
begin
  CustomPage := CreateCustomPage(wpWelcome, 'Installation type', '');
  FullRadioButton := TNewRadioButton.Create(WizardForm);
  FullRadioButton.Parent := CustomPage.Surface;
  FullRadioButton.Checked := True;
  FullRadioButton.Top := 16;
  FullRadioButton.Width := CustomPage.SurfaceWidth;
  FullRadioButton.Font.Style := [fsBold];
  FullRadioButton.Font.Size := 9;
  FullRadioButton.Caption := 'Full Installation'
  FullDescLabel := TLabel.Create(WizardForm);
  FullDescLabel.Parent := CustomPage.Surface;
  FullDescLabel.Left := 8;
  FullDescLabel.Top := FullRadioButton.Top + FullRadioButton.Height + 8;
  FullDescLabel.Width := CustomPage.SurfaceWidth; 
  FullDescLabel.Height := 40;
  FullDescLabel.AutoSize := False;
  FullDescLabel.Wordwrap := True;
  FullDescLabel.Caption := FullDescText;
  PartRadioButton := TNewRadioButton.Create(WizardForm);
  PartRadioButton.Parent := CustomPage.Surface;
  PartRadioButton.Top := FullDescLabel.Top + FullDescLabel.Height + 16;
  PartRadioButton.Width := CustomPage.SurfaceWidth;
  PartRadioButton.Font.Style := [fsBold];
  PartRadioButton.Font.Size := 9;
  PartRadioButton.Caption := 'Partial Installation'
  PartDescLabel := TLabel.Create(WizardForm);
  PartDescLabel.Parent := CustomPage.Surface;
  PartDescLabel.Left := 8;
  PartDescLabel.Top := PartRadioButton.Top + PartRadioButton.Height + 8;
  PartDescLabel.Width := CustomPage.SurfaceWidth;
  PartDescLabel.Height := 40;
  PartDescLabel.AutoSize := False;
  PartDescLabel.Wordwrap := True;
  PartDescLabel.Caption := PartDescText;
end;

function IsFullInstallation: Boolean;
begin
  Result := FullRadioButton.Checked;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T21:47:20.487

进行条件安装的最简单方法是使用`[Types]`和`[Components]`。

```
[Types]
Name: standard; Description: Standard
Name: partial; Description: Partial

[Components]
Name: game; Description: Full game install; Types: standard
Name: sounds; Description: Sound files; Types: standard partial

[Files]
...; Components: game
...; Components: sounds 
```

# iphone - iOS 可以使用 epoll（epoll_wait 等）吗？

> ID：12327275
> 
> 赞同：1
> 
> 时间：2012-09-08T01:18:28.763
> 
> 标签：iphone, objective-c, ios, epoll

我刚刚着手将一些现有的 POSIX 兼容代码移植到 iOS。从我收集到的 pthreads 可用（好），但编译器没有找到 . epoll 是否适用于 iOS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T01:19:57.167

No.`epoll`是特定于 Linux 的系统调用。

达尔文内核上最接近的等价物是`kqueue`，但我强烈怀疑这在 iOS 上被认为是 SPI（因此是禁区）。

# excel - Excel VBA：如何在忽略错误单元格的同时查找范围的最大值/最小值

> ID：12327277
> 
> 赞同：5
> 
> 时间：2012-09-08T01:19:13.187
> 
> 标签：excel, vba, excel-formula

如何在 Excel 中使用 VBA 来确定包含错误单元格（例如`#N/A`空单元格）的范围的最大值/最小值？我知道这是一项相当容易的任务，可以使用 Excel 数组公式来征服，例如
`=MIN(IF(A1:A10="#N/A"))`

但我非常想使用 VBA 来完成此任务。

我正在处理数千行数据，因此首选最快的解决方案。

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T01:55:51.180

您可以使用`Evaluate`或 快捷方式`[]`返回公式的 VBA 等效项

所以 Excel 数组公式
`=MIN(IF(NOT(ISNA(A1:A10)),A1:A10))` 可以在代码中使用，例如

```
Sub Test()
MsgBox [MIN(IF(NOT(ISNA(A1:A10)),A1:A10))]
End Sub 
```

# javascript - 盒子马赛克中的特殊“浮动”

> ID：12327281
> 
> 赞同：0
> 
> 时间：2012-09-08T01:19:55.230
> 
> 标签：javascript, css, css-float

我正在使用简单的 CSS 和 HTML 制作的[马赛克](http://jsfiddle.net/FSHgV/)(jsFiddle)。

马赛克具有相同宽度和高度的行和列。它的每个单元格都应该被整个盒子或其中的一部分填充。换句话说，每个盒子在长度上应该占据一个或多个盒子，在宽度上占据一个或多个盒子。

当所有的盒子只占一排时，一切正常。但是，当我尝试制作一个大于一行的盒子时，它们会`float:left`停止按我想要的方式工作：

[http://img198.imageshack.us/img198/5207/boxshoudgohere.png](http://img198.imageshack.us/img198/5207/boxshoudgohere.png)

[jsFiddle 解决如上所示的问题。](http://jsfiddle.net/XxEWu/)

如上图所示，（在 HTML 中）大框旁边的灰色框跳到下一行；我需要将框移动到红色箭头指向的位置。我的问题是：如何防止灰色框移动？

考虑到我更喜欢干净的解决方案。换句话说，使用绝对或相对定位移动框不是最佳选择，因为框及其宽度/高度是由 JavaScript 生成的（尽管可以随意发布任何答案）。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:25:19.580

你不能使用干净的 CSS 代码来做到这一点。

但是你可以使用 javascript，有一些 jQuery 插件可以做到这一点，你可以尝试[Isotope](http://isotope.metafizzy.co/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T01:27:34.457

[Jquery Masonry](http://masonry.desandro.com/)将为您执行此操作。不幸的是，您无法通过简单的标记和 CSS 实现您所追求的目标。

# ruby-on-rails - 将非 www 重写为 www，除了子域 rails 3 和 rack

> ID：12327284
> 
> 赞同：1
> 
> 时间：2012-09-08T01:21:07.527
> 
> 标签：ruby-on-rails, rack, rack-middleware

我需要能够将非 www 重写为 www 但不是在存在（非 www）子域的情况下。

所以 example.com 到-> www.example.com 但 sub.example.com 仍然是 sub.example.com

我在 rails 3 中，这似乎应该使用 Rack Middleware 来完成，但问题是这是一个多租户应用程序，因此 TLD 可能是任何域。

这是我到目前为止的位置：

```
 Class Www

  def initialize(app)
    @app = app
  end

  def call(env)

    request = Rack::Request.new(env)

    if !request.host.starts_with?("www.")
      [301, {"Location" => request.url.sub("//","//www.")}, self]
    else
      @app.call(env)
    end

  end

  def each(&block)
  end

end 
```

任何指针将不胜感激....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:48:54.993

您现在拥有的代码将重写“sub.example.com”，您的`call`函数可以这样重写：

```
def call(env)
  request = Rack::Request.new(env)

  # Redirect only if the host is a naked TLD
  if request.host =~ /^[^.]+\.[^.]+$/
    [301, {"Location" => request.url.sub("//","//www.")}, self]
  else
    @app.call(env)
  end
end 
```

# python - 如何编写一个程序，询问用户 2 个数字，然后打印这些数字之间的偶数列表？

> ID：12327288
> 
> 赞同：-5
> 
> 时间：2012-09-08T01:21:40.253
> 
> 标签：python

我正在使用 JES。下面的函数将适用于我想要它做的事情，但它不包括 x 和 y 在答案中。例如，如果我输入的第一个数字是 2，第二个数字是 8，它只打印 4 和 6。我希望它打印 2、4、6、8。请帮助！谢谢！

```
def main():
  x=input("Enter the first number:")
  y=input("Enter the second number:")
  i=0
  for i in range (x,y):
    if i%2==0:
      print i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:38:18.137

很简单，问题在于，在 Python（以及，通过扩展，JES）中，`range(x, y)`从`x`到`y-1`，包括在内。这允许它自然地模仿`[]`列表运算符的切片语法，即`[l[a] for a in range(x, y)]`与`l[x:y]`. （至于*为什么*既要切片又`range`要这样做，请参阅[为什么 range(start, end) 不包括 end？](https://stackoverflow.com/questions/4504662/why-does-rangestart-end-not-include-end)）。

所以，如果你想`x`包含`y`，你只需要将最后一个参数提高一个：

```
for i in range(x, y+1): 
```

它应该打印出你想要的数字。

PS`i=0`之前的循环是不必要的。循环将`for`初始化（并在必要时创建）变量`i`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:28:37.267

```
print ",".join([str(i) for i in range(int(raw_input("Enter #1:")),\
                                      int(raw_input("Enter #2:"))+1) if not i%2]) 
```

我想我的那些括号是对的

或者，使用`input`时间较短，但存在巨大的安全漏洞，通常应避免使用

```
print ",".join([str(i) for i in range(input("Enter #1:"),\
                                      input("Enter #2:")+1) if not i%2]) 
```

最短的（感谢 nneonneo）

```
print str([x for x in range(input('1'), input('2')+1) if not x%2])[1:-1] 
```

# c# - 获取父模型 HttpPost 更新的子集合

> ID：12327291
> 
> 赞同：4
> 
> 时间：2012-09-08T01:23:28.367
> 
> 标签：c#, asp.net-mvc, razor

这个问题可能是对上一个问题的重申，如果是，请发布链接。无论哪种方式，我仍然会完成这篇文章。

我有这个模型：

```
public class Employee {
    //omitted for brevity

    public virtual ICollection<ProfessionalExperience> ProfessionalExperiences { get; set; }
    public virtual ICollection<EducationalHistory> EducationalHistories { get; set; }
}

public class ProfessionalExperience {
    // omitted for brevity
}

public class EducationalHistory {
    // omitted for brevity
} 
```

我正在使用此操作在我的视图中显示：

```
[HttpGet]
public ActionResult Edit(int id) {
    using(var context = new EPMSContext()) {
        var employees = context.Employees.Include("ProfessionalExperiences").Include("EducationalHistories");

        var employee = (from item in employees
                        where item.EmployeeId == id && item.IsDeleted == false
                        select item).FirstOrDefault();

        return View(employee);
    }
} 
```

> 这是我的观点：
> 
> ```
> @using(Html.BeginForm()) {
>   <div class="editor-label">First Name:</div>
>   <div class="editor-field">@Html.TextBoxFor(x => x.FirstName)</div>
>   <div class="editor-label">Middle Name:</div>
>   <div class="editor-field">@Html.TextBoxFor(x => x.MiddleName)</div>
> 
>   @foreach(var item in Model.ProfessionalExperiences) {
>       Html.RenderPartial("ProfExpPartial", item);
>   }
> 
>   @foreach(var item in Model.EducationalHistories) {
>       Html.RenderPartial("EducHistPartial", item);
>   }
>   <input type="submit" value="Save" />
> } 
> ```

我使用 a`foreach`并为每个集合使用部分视图在视图上显示子集合。

调用我的 Post Edit Action 时，`employee`模型将子集合设置为 null。

```
[HttpPost]
public ActionResult Edit(Employee employee) {
    using(var context = new EPMSContext()) {

    }

    return View();
} 
```

我缺少什么来正确地获取子集合？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T07:21:58.600

我认为这个问题与 MVC 期望构建集合元素的方式有关（它们在 html 中的名称）。看看这个 SO 答案：[https](https://stackoverflow.com/a/6212877/1373170) ://stackoverflow.com/a/6212877/1373170 ，尤其是 Scott Hanselman[帖子](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)的链接。

您的问题在于，如果您手动迭代并进行单独`RenderPartial()`调用，输入字段将没有索引，并且`DefaultModelBinder`将不知道如何构造您的集合。

我会亲自为您的两种 ViewModel 类型创建[编辑器模板](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)`@Html.EditorFor(model => model.EducationalHistories)`，并使用和`@Html.EditorFor(model => model.ProfessionalExperiences)`.

# mysql - Left Join 表 1 中的一列到表 2 中的两列

> ID：12327305
> 
> 赞同：1
> 
> 时间：2012-09-08T01:25:49.400
> 
> 标签：mysql, sql

我有两张表，一张是“电话号码”表，另一张是“通话”表。呼叫表有两列感兴趣：始发号码列 (c.orig) 和终止号码列 (c.term)。

我正在尝试编写一个 MySQL 查询，它将返回调用表中的所有记录，其中**c.orig**编号或 c.term 编号都不存在于 numbers 表中（numbers 表中的“n.num”列）。

这是我的 SQL 查询：

```
 SELECT
        c.id, c.date, c.orig, c.term, c.duration
    FROM calls as c
    LEFT JOIN numbers as n ON (n.num = c.orig AND n.num = c.term)
    WHERE
        c.period = '2012-08' AND
        n.num IS NULL
    GROUP BY c.call_id
    ORDER BY c.call_id
    LIMIT 0,300 
```

有任何想法吗？

* * *

这里有一些进一步的说明：

```
------------------------------
table: numbers
nid     num
1       111-222-3333
2       222-333-4444
3       333-444-5555
------------------------------

------------------------------
table: calls
id      orig            term
1       333-444-5555    999-999-9999
2       999-999-9999    111-222-3333
3       222-333-4444    999-999-9999
4       888-888-8888    999-999-9999
5       777-777-7777    999-999-9999
------------------------------ 
```

呼叫 ID 1、2 和 3 至少具有可在数字表中找到的两个数字（原始或术语）之一。

呼叫 ID 4 和 5 是两个电话号码都不在号码表中的情况。这些是我试图找到的记录。在号码表中未找到任何电话号码的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:34:01.007

~~你应该为此`Join`表，`twice`~~

 ~~```
SELECT
    c.id, c.date, c.orig, c.term, c.duration
FROM calls as c
        LEFT JOIN numbers as n 
            ON (n.num = c.orig)
        LEFT JOIN numbers m
            ON m.num = c.term
WHERE
    c.period = 'date here' AND
    m.num IS NULL
-- GROUP BY c.call_id
ORDER BY c.call_id
LIMIT 0,300 
```~~ 

~~问题，我删除了您的组子句，因为我没有看到任何聚合函数。你还想做什么？~~

**更新 1**

根据你上面的例子，试试这个编辑过的。

> 呼叫 ID 4 和 5 是**两个电话号码都不在号码表中的**情况。这些是我试图找到的记录。号码中均未找到电话号码的记录

```
SELECT  a.*
FROM    calls a
        LEFT JOIN numbers b
            ON a.orig = b.num
        LEFT JOIN numbers c
            ON a.term = c.num
WHERE   b.num IS NULL AND
        c.num IS NULL 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/0ef3f/4)

Hpe 这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:10:14.027

您应该记住，从逻辑上讲，您的`ON`子句中的条件适用于每一*行*，而不是其中的很多行，因此您不能真正让任何一个`n.num`等于*两者* `c.orig`和`c.term`，当然，除非这两个是相同的数字（在您的特定情况下没有意义）。

所以，你真正需要检查的是是否`n.num`等于*或* 。也就是说，只需替换为即可：`c.orig``c.term``AND``OR`

```
SELECT
    c.id, c.date, c.orig, c.term, c.duration
FROM calls as c
LEFT JOIN numbers as n ON (n.num = c.orig ***OR*** n.num = c.term)
WHERE
    c.period = '2012-08' AND
    n.num IS NULL
GROUP BY c.call_id
ORDER BY c.call_id
LIMIT 0,300 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T15:26:54.963

该问题已经使用了 EXIST 这个词。好吧，这正是 EXISTS 存在的原因：

```
SELECT c.id, c.date, c.orig, c.term, c.duration
FROM calls c
WHERE NOT EXISTS ( SELECT *
   FROM numbers a
   WHERE a.num = c.orig
   )
AND NOT EXISTS ( SELECT *
   FROM numbers b
   WHERE b.num = c.term
   ); 
```

这两个子查询甚至可以合并为一个：

```
SELECT c.id, c.date, c.orig, c.term, c.duration
FROM calls c
WHERE NOT EXISTS ( SELECT *
   FROM numbers ab
   WHERE ab.num = c.orig
   OR ab.num = c.term
   ); 
```

注意：我省略了与实际问题无关的周期条件和限制。

顺便说一句：“日期”是 SQL 中的保留字。最好不要将其用作列名。

# facebook - 从 xfbml 重定向到 gwt 不起作用

> ID：12327308
> 
> 赞同：1
> 
> 时间：2012-09-08T01:26:05.063
> 
> 标签：facebook, google-app-engine, gwt, xfbml

我有一个使用 gwt 并托管在 gae 上的应用程序。有一个使用 xfbml 的表单，并在填写数据并提交表单后具有重定向 url。问题是如果通过 xfbml 表单提交发生这种情况，它会引发异常。如果我直接调用 url 它工作得很好。

xfbml 代码是：

```
<fb:registration redirect-uri="http://www.sakshum.org/FbBloodDonorRegister" fields='[{"name":"name"},{"name":"first_name"},{"name":"last_name"}, {"name":"cellPhone", "description":"Cell Number", "type":"text"}, {"name":"homePhone", "description":"Home Number", "type":"text"}]'  onvalidate="validated" width="530">
</fb:registration> 
```

例外如下

```
javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
javax.servlet.ServletException: Content-Type was 'application/x-www-form-urlencoded'. Expected 'text/x-gwt-rpc'.
    at com.google.gwt.user.server.rpc.RPCServletUtils.checkContentTypeIgnoreCase(RPCServletUtils.java:427)
    at com.google.gwt.user.server.rpc.RPCServletUtils.readContent(RPCServletUtils.java:160)
    at com.google.gwt.user.server.rpc.RPCServletUtils.readContentAsGwtRpc(RPCServletUtils.java:205)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.readContent(AbstractRemoteServiceServlet.java:182)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:239)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:452)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:458)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:698)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:336)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:328)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:456)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:28:37.677

我看到您的错误显示：Content-Type 是 'application/x-www-form-urlencoded'。预期的“文本/x-gwt-rpc”

我会将您的 servlet 中的预期内容类型更改为“text/x-gwt-rpc”。那是你的servlet得到回调吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:23:49.547

查看上面调用的这个文件： [http ://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/server/rpc/ RPCServletUtils.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/server/rpc/RPCServletUtils.java)

您将无法轻松更改预期的内容类型，因为这是在

```
public static String readContentAsGwtRpc(HttpServletRequest request)
  throws IOException, ServletException {
    return readContent(request, GWT_RPC_CONTENT_TYPE, CHARSET_UTF8_NAME);
} 
```

关键似乎是您正在从 Facebook 的 XFBML 调用特定于 RPC 的 servlet。尝试摆弄特定于 RPC 的调用是不值得的，而且您可能无法更改 FB 调用它的方式。最简单的解决方案是添加另一个接受普通 POSTS 和 GETS 的 servlet，然后从 Facebook 调用它。

# javascript - 当悬停在具有相同 ID 的另一个元素上时，jquery 切换另一个 ID 的 css

> ID：12327309
> 
> 赞同：0
> 
> 时间：2012-09-08T01:26:24.360
> 
> 标签：javascript, jquery

当将鼠标悬停在 div 上时，`id="single-main"`我如何获得 ul 中匹配 ID 的文本颜色以及`class="contract-list"`文本以更改颜色？

我似乎有很多悬停和打开的例子。但是没有一个通过ID。

我的 HTML 是：

```
<div id="single-main" class="clearfix">                    
    <a id="postID" href="http:www.xxxxxx.xx/" title=" "><img width="112" height="150"     src="http:www.xxxxxx.xx/X.jpg" class="some class" alt="" title= "" /></a>
    <a id="postID2" href="http:www.xxxxxx.xx/" title=" "><img width="112" height="150" src="http:www.xxxxxx.xx/X.jpg" class="some class" alt="" title= "" /></a>    
</div>

<ul class="contract-list">
    <li>
        <a  id="postID" href="http://www.xxxxxx.xx/" rel="bookmark" title=" "> ADVERTISING</a>
    </li>
    <li>
        <a  id="postID2" href="http://www.xxxxxx.xx/" rel="bookmark" title=" "> ADVERTISING2</a>
    </li>
</ul>​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:45:22.480

尽管我强烈不同意您的编码技术，因为它们违反了 W3C 标准。我将使用你的 HTML 来提供一个工作演示。

[http://jsfiddle.net/c3rfq/4/](http://jsfiddle.net/c3rfq/4/)

我使用 This javascript 查看您定义的每个 div 和 ul 内部。通过这种方式，您可以按照自己的模式添加任意数量的图像和链接，但我强烈建议您使用类而不是 id

```
$('div#single-main a').hover(function(){
    $('ul.contract-list #'+$(this).attr('id')).css('color','red');
},function(){
    $('ul.contract-list #'+$(this).attr('id')).css('color','');
}); 
```

为了获得更好的`standards-based`答案，我会查看其他答案。我只是想用你给我们的东西展示一个“有效”的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:36:13.990

你可以试试这个

**HTML**（通知`id's`替换为`classes`in`ul`的`a`标签）

```
<div id="single-main" class="clearfix">
    <a id="postID" href="http:www.xxxxxx.xx/" title=""><img width="112" height="150" src="http:www.xxxxxx.xx/X.jpg" class="some class" alt="" title= "" /></a>
    <a id="postID2" href="http:www.xxxxxx.xx/" title=""><img width="112" height="150" src="http:www.xxxxxx.xx/X.jpg" class="some class" alt="" title= ""/></a> 
</div>

<ul class="contract-list">
    <li>
        <a  class="postID" href="http://www.xxxxxx.xx/" rel="bookmark" title=" "> ADVERTISING</a>
    </li>
   <li>
       <a  class="postID2" href="http://www.xxxxxx.xx/" rel="bookmark" title=" "> ADVERTISING2</a>
   </li>
</ul> 
```

**JS**

```
$(function(){
    $('#single-main a').on('mouseenter', function(){
        $('.'+$(this).attr('id')).css('color', 'red');
    }).on('mouseleave', function(){
        $('.'+$(this).attr('id')).css('color', 'black');
    });
});​ 
```

[**演示**](http://jsfiddle.net/ppHWZ/5/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T01:44:22.990

使用`data-`属性...

```
<div id="single-main" class="clearfix">                    
    <a data-id="postID" href="http:www.xxxxxx.xx/" title=" "><img width="112" height="150" src="http:www.xxxxxx.xx/X.jpg" class="some class" alt="" title= "" /></a>
    <a data-id="postID2" href="http:www.xxxxxx.xx/" title=" "><img width="112" height="150" src="http:www.xxxxxx.xx/X.jpg" class="some class" alt="" title= "" /></a>    
</div>

<ul class="contract-list">
    <li>
        <a id="postID" href="http://www.xxxxxx.xx/" rel="bookmark" title=" "> ADVERTISING</a>
    </li>
    <li>
        <a id="postID2" href="http://www.xxxxxx.xx/" rel="bookmark" title=" "> ADVERTISING2</a>
    </li>
</ul> 
```

然后您可以使用以下脚本...

```
$(function(){
    $("#single-main").on("mouseenter", "a", function(){
        $("#"+$(this).data("id")).css("color", "red");
    }).on("mouseleave", "a", function(){
        $("#"+$(this).data("id")).css("color", "");
    });
}); 
```

这是一个小提琴[http://jsfiddle.net/ZLEQw/](http://jsfiddle.net/ZLEQw/)

# javascript - jqplot重新绘制不起作用

> ID：12327313
> 
> 赞同：1
> 
> 时间：2012-09-08T01:27:45.307
> 
> 标签：javascript, jquery, jqplot

我正在尝试重新绘制我的 jqplot 图表。

```
$(document).ready(function(){

var dataseries = [[[10,20]]];

 var plot = $.jqplot('placeholder', dataseries ,
        { title:'<%= @question.text%>',
          axes:{
        yaxis:{min:-100, max:100, tickInterval:10, showTicks:true, label:"<%=@question.ylabel1%>"},
        xaxis:{min:-100, max:100, tickInterval:10, showTicks:true, label: "<%=@question.xlabel1%>"},
        y2axis:{min:-100, max:100, tickInterval:10, showTicks:true, label:"<%=@question.ylabel2%>", show:true},
        x2axis:{min:-100, max:100, tickInterval:10, showTicks:true, label:"<%=@question.xlabel2%>", show:true}},

          seriesDefaults:{showLine:false},
          series:<%=itemNames.html_safe%>,
          highlighter:{
        show:true,
        tooltipContentEditor:tooltipContentEditor}

        });
});

function tooltipContentEditor(str, seriesIndex, pointIndex, plot) {
    return plot.series[seriesIndex]["label"];
}

$("#placeholder").bind("jqplotClick", function(ev, gridpos, datapos, neighbor) {

    var x = Math.round(datapos.xaxis);
        var y = Math.round(datapos.yaxis);
      var item = $('li.item_button_selected').attr('id');
      if (item > 0){
        var requestObj = {
          question_id: "<%=@question.id%>",
          user_id: "1",     
        }
        requestObj["item_id"]=item
        requestObj["x"]=x
        requestObj["y"]=y
            plot.series[0].data = [[50,50]];
            plot.replot();

BLAH BLAH BLAH... 
```

<%=itemNames.html_safe%> 通常如下所示：[{label:"Winona Ryder"},{label:"Paris Hilton"},{label:"Margaret Thatcher"},{label:"Snooki"},{标签：“娜塔莉波特曼”}，]

页面加载时图表绘制良好；当我点击图表时，什么也没有发生。我知道点击被捕获；如果我在那里发出警报，我会看到它。帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:22:43.840

我建议您也将事件处理程序放入`$(document).ready()`其中——这是您发布内容的必然结果。

我想回应的主要原因是要注意，既然我们使用的是 jQuery，为什么不将它[更直接](http://www.jqplot.com/deploy/dist/examples/selectorSyntax.html)地“附加”到 jQuery 元素上。为此，您将使用：

```
$('placeholder').jqplot(data, options); 
```

现在情节变成了：

```
$('placeholder').data('jqplot'); 
```

所以你可以重新绘制这个例子：

```
$('placeholder').data('jqplot').series[0].data = [[50,50]];    
$('placeholder').data('jqplot').replot(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:44:13.607

好的，想通了。我需要将“绘图”变量声明为 $(document).ready(function() 之外的全局变量...现在它可以工作了！

# java - 在 Mac 中将播放脚本添加到 PATH

> ID：12327317
> 
> 赞同：1
> 
> 时间：2012-09-08T01:28:22.217
> 
> 标签：java, macos, path, playframework, installation

我不擅长终端，所以我不知道这意味着什么......

您应该将框架安装目录添加到系统 PATH。在 UNIX 系统上，这意味着执行以下操作：

```
export PATH=$PATH:/path/to/play20 
```

在 Windows 上，您需要在全局环境变量中设置它。这意味着更新环境变量中的 PATH 并且不要使用带空格的路径。

如果您在 UNIX 上，请确保播放脚本是可执行的（否则执行 chmod a+x 播放）。

有人可以指导我完成这些步骤。我将 Play 2.0 文件夹放在我的 /Documents 中。

![](../Images/8b0d6b5cd9b440cb52255817b701068b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T09:48:10.830

如果在 Mac 上使用 OS X，我建议安装 Play with [Brew 。](https://brew.sh/)

首先安装 Brew

`ruby <(curl -fsSkL raw.github.com/mxcl/homebrew/go)`

然后安装播放

`brew install play`

打开 .bash_profile

```
vi ~/.bash_profile 
```

通过更新或添加 PATH 行来确保 /usr/local/bin 在您的路径中，如下所示：

```
PATH=/usr/local/bin:$PATH 
```

打开一个新的终端窗口，Play 应该在你的路径上。

您可能还想安装（通过 brew）Scala、SBT 等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-21T23:42:28.443

这就是我所做的：

下载播放框架，将其解压到我的桌面，打开 iterm 并`vi ~/.bash_profile` 添加路径：`export PATH=$PATH:/Users/*your-username*/Desktop/play-2.2.0`保存文件（按 esc 并输入 :wq [保存并退出]）重新加载您的 bash_profile，只需`source ~/.bash_profile`将 cd 输入到您的目录，`type play`然后就完成了。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T01:34:40.200

In `export PATH=$PATH:/path/to/play20`,`/path/to/play20`是您的真实路径的占位符，应该是`/Users/ronyjohn007/Documents/play20`[将文件夹从 Finder 拖到终端窗口中以获取实际名称] - 所以输入：

```
export PATH=$PATH:/Users/ronyjohn007/Documents/play20 
```

这会告诉您的外壳程序在此类文件夹中查找可执行文件。然后：

```
chmod +x /Users/ronyjohn007/Documents/play20/play 
```

这给了`play`文件执行权限。现在关闭并重新打开终端，然后键入`play`回车。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T10:08:21.730

您还可以使用符号链接`/usr/bin`来指向确切的文件，当您在系统上使用多个版本的播放时，这很有用

*顺便说一句（我可以看到您在上一个问题中执行了反向操作:) - 删除了上一个：/usr/bin/play 命令）*

（分别粘贴每一行并确认）：

```
sudo -i
cd /usr/bin
chmod +x /Users/ronyjohn007/Documents/play-2.0.3/play
ln -ls /Users/ronyjohn007/Documents/play-2.0.3/play play
exit 
```

其他样本 -`git master`在这种情况下

```
# this creates new folder in your docs, 
# and clones current master version of Play from GitHub to 
# /Users/ronyjohn007/Documents/play-from-github/Play20 folder

cd ~/Documents
mkdir play-from-github
cd play-from-github/
git clone https://github.com/playframework/Play20.git

# this sets alternative command as in sample 1
sudo -i
cd /usr/bin
chmod +x /Users/ronyjohn007/Documents/play-from-github/Play20/play
ln -ls /Users/ronyjohn007/Documents/play-from-github/Play20/play play-master
exit 
```

最后，现在您可以检查哪个命令指向哪个版本：

```
ls -la /user/bin | grep play 
```

应该给出类似的东西：

```
... play -> /Users/ronyjohn007/Documents/play-2.0.3/play
... play-master -> /Users/ronyjohn007/Documents/play-from-github/Play20/play 
```

终端重新打开后，它们都应该可以作为常用命令使用。

**注意：**当然，您不能将`play`命令用于创建的应用程序，`play-master new ...`反之亦然！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T14:26:55.193

您可以编辑 ~/.profile 文件并添加：

export PLAY_HOME=你的播放目录 export PATH=$PATH:$PLAY_HOME

# r - 重塑数据以与 geeglm() 一起使用

> ID：12327322
> 
> 赞同：3
> 
> 时间：2012-09-08T01:29:12.347
> 
> 标签：r

你能帮我弄清楚为什么我会出错吗？

最初我的数据如下所示：

```
> attributes(compl)$names
 [1] "UserID"         "compl_bin"      "Sex.x"          "PHQ_base"       "PHQ_Surv1"      "PHQ_Surv2"      "PHQ_Surv3"    
 [8] "PHQ_Surv4"      "EFE"            "Neuro"          "Intervention.x" "depr0"          "error1_1.x"     "error1_2.x"   
[15] "error1_3.x"     "error1_4.x"     "stress0"        "stress1"        "stress2"        "stress3"        "stress4"      
[22] "hours1"         "hours2"         "hours3"         "hours4"         "subject" 
```

首先，我重塑我的数据为 geeglm 做准备：

```
compl$subject <- factor(rownames(compl))
nobs <- nrow(compl) 
compl_long <- reshape(compl, idvar = "subject",
                      varying = list(c("PHQ_Surv1", "PHQ_Surv2" ,
                                       "PHQ_Surv3", "PHQ_Surv4"), 
                                     c("error1_1.x", "error1_2.x",
                                       "error1_3.x", "error1_4.x"), 
                                     c("stress1", "stress2", "stress3",
                                       "stress4"), 
                                     c("hours1", "hours2", "hours3",
                                       "hours4")), 
                      v.names = c("PHQ", "error", "stress", "hours"),
                      times = c("1", "2", "3", "4"), direction = "long") 
```

-（编者注：不确定下一个输出来自什么......）

```
 [1] "UserID"         "compl_bin"      "Sex.x"          "PHQ_base"       "EFE"            "Neuro"          "Intervention.x"
 [8] "depr0"          "stress0"        "subject"        "time"           "PHQ"            "error"          "stress"       
[15] "hours" 
```

然后我使用 geeglm 函数：

```
library(geepack)

geeSand=(geeglm(PHQ~as.factor(compl_bin) + Neuro+PHQ_base+as.factor(depr0) +
                    EFE+as.factor(Sex.x) + as.factor(error)+stress+hours,
                    family = poisson, data=compl_long,
                    id=subject, corst="exchangeable")) 
```

我收到一个错误：

```
"Error in geese.fit(xx, yy, id, offset, soffset, w, waves = waves, zsca,  : 
  nrow(zsca) and length(y) not match" 
```

如果我删除变量 as.factor(error) 和 hours，geeglm 不会抱怨，我会得到输出。该函数不适用于错误和小时变量。我检查所有变量的长度，它们是相等的。你能帮我找出问题所在吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T10:14:58.223

在以下位置找到：[https ://stat.ethz.ch/pipermail/r-help/2008-October/178337.html](https://stat.ethz.ch/pipermail/r-help/2008-October/178337.html)

" 我很确定这是 geese() 中的一个错误，应该向
geepack 的维护者报告。问题在于缺失
值的处理。

如果查看 dim(na.omit(dat[,c("id","score","chem","time")]))
得到 44。在 geese.fit() 中 zsca 设置为等于 matrix( 1,N,1) 其中 N 设置为
等于长度（id）。但是 id 的长度为 46，而响应 y 已通过消除 缺少所涉及的
任何变量的任何数据行来修剪到长度 44 。
因此出现了问题。

问题的解决需要
geepack的维护者重写一些代码。”

# sql-server - XNA 4.0 在线服务器

> ID：12327323
> 
> 赞同：0
> 
> 时间：2012-09-08T01:29:18.283
> 
> 标签：sql-server, web-services, xna, xmlhttprequest

如何为我的游戏制作服务器以便下载地图？每张地图都是一个 XML 文档，但我想让服务器在游戏中，而不是在网站上。我确实有一些使用 HTML/PHP 的经验，但很少。不会有多人互动（我已经计划好了），这一切都将是单人游戏。

另一件事是如何附加变量，例如在下载之前可以看到的评论。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:41:41.503

您需要编写自己的 server.exe 并从可访问的机器上运行它。每当有人想要 DL 新地图时，他们将与此 server.exe 交换通信，该 server.exe 将提供您想要显示的评论/下载时间和其他变量。

这是仅限 Windows 吗？如果是这样，您可以使用 Lidgren 网络库 ( [http://code.google.com/p/lidgren-network-gen3/](http://code.google.com/p/lidgren-network-gen3/) )。如果不是你被内部网络库困住了。

您不需要 HTML/PHP，因为您不希望它成为网站。

# php - 编码地狱。mysql、php 和 utf-8

> ID：12327325
> 
> 赞同：0
> 
> 时间：2012-09-08T01:30:56.847
> 
> 标签：php, mysql, encoding, utf-8, character-encoding

执行查询比较短语是一件很痛苦的事情。查看以下配置以了解我的问题。

* * *

**sql.sql**

```
create user "myStore"@"localhost" identified by "1234"; grant all privileges on myStore.* TO "myStore"@"localhost";

create database myStore character set utf8 collate utf8_general_ci;

use myStore;

create table item (
    item_id integer not null,
    name varchar(60) not null,

    primary key (item_id)
);

alter table item engine=innodb default charset=utf8 collate=utf8_bin;

insert into item (item_id, name) values (0, "apple"), (1, "maça"); 
```

**我的.cnf**

```
[mysqld]
collation-server = utf8_unicode_ci
character-set-server = utf8 
```

**mysql> SHOW VARIABLES LIKE 'collat​​ion%';**

```
+----------------------+-----------------+
| Variable_name        | Value           |
+----------------------+-----------------+
| collation_connection | utf8_general_ci |
| collation_database   | utf8_unicode_ci |
| collation_server     | utf8_unicode_ci |
+----------------------+-----------------+ 
```

**mysql> SHOW VARIABLES LIKE 'character_set%';**

```
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+ 
```

**索引.php**

```
<?php
    try {
        header ('Content-Type: text/html; charset=utf-8'); 

        $mysqli = new mysqli ("localhost", "myStore", "1234", "myStore");

        if ($mysqli->connect_error) throw new exception ("Error (" . $mysqli->connect_errno . "). " . $mysqli->connect_error);

        $sql = $mysqli->prepare ("select item_id, name from item where name = '" . utf8_decode ("maça") ."'");

        if (! $sql) throw new exception ($mysqli->error);

        $sql->execute ();

        $sql->bind_result ($item_id, $name); 

        while ($sql->fetch ()) echo $item_id . " - " . utf8_encode ($name);

        $sql->close ();
    }
    catch (exception $e) {
        echo $e;
    }
?> 
```

* * *

### 如您所见，我必须在将字符串发送到 MySQL 之前对其进行解码，然后再次对其进行编码。

我真的不知道出了什么问题，有没有办法避免那些编码和解码功能？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T01:41:01.537

> **mysql> SHOW VARIABLES LIKE 'character_set%';**
> 
> ```
> +--------------------------+----------------------------+
> | Variable_name            | Value                      |
> +--------------------------+----------------------------+
> | character_set_client     | utf8                       |
> | character_set_connection | utf8                       | 
> ```

这些变量是特定于会话的。请确保在会话期间通过在交互式会话期间调用或从 PHP 为您的客户端正确设置它们。`SET NAMES '*charset_name*'`*`mysql`*[`**mysqli::set_charset** ( string *$charset* )`](http://php.net/manual/en/mysqli.set-charset.php)

# c - ld: 找不到 -lplot 的库

> ID：12327329
> 
> 赞同：2
> 
> 时间：2012-09-08T01:32:11.270
> 
> 标签：c, fink

我刚来这地方。我最近使用 fink 在我的 Mac 上安装了 plotutils-dev，但是当我尝试编译一个小程序时，我通过做

```
gcc -g -o atomos.o atomos.c -lplot 
```

它说

```
ld: library not found for -lplot
collect2: ld returned 1 exit status 
```

我在网上搜索了这个问题，但收效甚微。我唯一知道的是，当我输入

```
dpkg -S libplot.dylib 
```

它说

```
plotutils-dev: /sw/lib/libplot.dylib 
```

我相信这意味着我已经在我的 Mac 上安装了 libplot。所以我不知道是什么问题。欢迎任何帮助。我是初学者，所以如果以用户友好的方式提供一些指南会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:12:35.613

链接器找不到 libplot 库。我对 mac 不熟悉，但是使用 gcc，您可以使用 -L 标志告诉它库的路径，例如：

```
gcc -g -o atomos.o atomos.c -lplot -L/sw/lib/ 
```

（我猜是那条路，但如果不正确，您可能会找出通往图书馆的路。）

Also, it's probably a typo in your question, but I changed it to `-lplot` (note extra `-l`). You want the -l to link with the plot library.

# mysql - 将冗余数据存储在 RDBMS 中以简化查询是否合理？

> ID：12327332
> 
> 赞同：2
> 
> 时间：2012-09-08T01:32:59.687
> 
> 标签：mysql, sql, rdbms

例如，如果我在一个表中存储一个冗余列，我可以避免在运行时 SQL 查询中加入 5 个表。在这种情况下，存储冗余数据是否合理？我的理解是它违反了规范化规则，但我不是数据库专家。
感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T01:41:16.987

以我的经验，为了性能而进行非规范化本身并不是一件坏事，但您需要首先检查您是否无法优化针对您最初的 3NF 设计运行的查询，以便为您提供合理的时间安排。

这是一篇不错的文章的[链接](http://www.25hoursaday.com/weblog/CommentView.aspx?guid=cc0e740c-a828-4b9d-b244-4ee96e2fad4b)，该文章表明减少连接数量是非规范化的常见（也是很好的）理由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T01:42:56.837

我只会说我只违反了一次规范化规则（我知道:-|），从那以后我就后悔了。它给了我大约 15% 的速度，但增加了各种额外的维护代码和系统的脆弱性。

我会研究你是否不能通过更好的索引来加速连接，或者让 DBMS 有机会以某种方式预定义查询计划（即 DBMS 中的任何内容）等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T01:40:15.083

是的，它确实违反了规范化规则。

但你是个大男孩。你应该知道规则以及什么时候打破它们是合适的。

五张桌子不是很多。你有什么数据可以告诉你规范化会破坏你的应用程序，而非规范化会修复它？（我猜两者都没有。）

查询速度不仅受 JOIN 的影响：索引、WHERE 子句等。

规范化规则有一定的好处和成本。在你走这条路之前，你应该知道你放弃了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T01:40:50.360

它确实违反了[第三范式](http://en.wikipedia.org/wiki/Third_normal_form)（**3NF**）。但是，有时，它可能是合理的，有利于**性能**。收集数据库的一些使用统计信息，查看该查询是否花费了太长时间，或者它是否被非常频繁地使用，并查看非规范化它是否对您的系统有益。

显然，使用这种非规范化结构，您必须处理其他潜在问题。例如，您需要保持冗余列与存储在其他 5 个表中的列之间的**一致性。**

此外，在插入数据时，您必须将其存储在**两个**不同的位置，即非规范化表以及其他*原始*表中。

# ruby-on-rails - 类别未定义 - rails

> ID：12327336
> 
> 赞同：0
> 
> 时间：2012-09-08T01:34:32.503
> 
> 标签：ruby-on-rails, ruby

所以我有一个项目资源，其中嵌套了类别，整个项目结构设置如下：

```
StartPoint::Application.routes.draw do
  get "log_out" => "sessions#destroy", :as => 'log_out'
  get "log_in"  => "sessions#new", :as => 'log_in'
  get "sign_up" => "users#new", :as => 'sign_up'

  root :to => 'Projects#index'

  resources :users
  resources :sessions
  resources :discussion_comments
  resources :comments

  resources :projects do
    resources :categories
    resources :duscussions
    resources :tasks
  end

end 
```

现在在我的任务索引页面上说我正在尝试呈现类别表单

```
<%= form_for project.categories.build do |f| %>
    <%= f.label :category%>
    <%= f.text_field :category%>
    <%= hidden_text_field :project_id, :value => project.id %>
    <%= f.submit%>
<% end %> 
```

当我渲染这个 - 我将项目对象传递到这个表单中：

```
<%= render 'categories/createcategory', :project => @project%> 
```

这不是在类别索引页面中呈现，而是在任务索引页面中呈现。

因此，有了这种类型的信息（如果您需要更多信息，请告诉我）为什么这些类别显然是未定义的。

**错误**

```
undefined method `categories' for #<Project:0xb687150c>

Extracted source (around line #1):

1: <%= form_for ([project, project.categories.build]) do |f| %>
2:  <%= f.label :category%>
3:  <%= f.text_field :category%>
4:  <%= hidden_text_field :project_id, :value => project.id %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:09:38.520

表格有问题。应该是`form_for [@project, Category.new]`

您必须确保在您的项目控制器中，您已经`@project`初始化。

# javascript - Javascript 未在 IE 中提交表单

> ID：12327337
> 
> 赞同：2
> 
> 时间：2012-09-08T01:34:39.157
> 
> 标签：javascript, internet-explorer

此表单适用于 Chrome、FF、Safari。`POST`通过作品，我的意思是当我点击提交按钮时，我可以看到请求被发送出去。

但是，在 IE 中作为 IE9 的开发人员工具中，我看不到任何`POST`请求。任何想法为什么？

这是一个临时站点的链接以帮助调试： http: [//polar-ravine-7414.herokuapp.com/](http://polar-ravine-7414.herokuapp.com/)

重现错误的步骤：

1.  加载页面
2.  忽略弹窗
3.  点击提交按钮
4.  `POST`我在 Chrome 开发工具和 FF Firebug 中看到了一个请求，但在 IE 开发者工具中没有

*更新*

根据 Eliran 的建议，我已经更新了选择器。但是，我仍然看不到在 IE 开发者工具网络栏中发出的 POST 请求。

*更新2*

我可能应该补充一点，该页面托管在与发布表单的服务器不同的服务器上。现在这可能是由于浏览器阻止了跨浏览器请求吗？

### HTML

```
<form name="newsletter-subscription-en" id="form" action="https://abc.com/e/f2" method="post">

    <input type="hidden" name="elqFormName" value="newsletter-subscription-en">
    <input type="hidden" name="elqSiteID" value="1795">
    <input type="hidden" id="firstNameField" name="C_FirstName" value="">
    <input type="hidden" id="lastNameField" name="C_LastName" value="">

    <div id="step1" class="block">
        <div id="circle_1" class="circle">
            <div id="bullet_1" class="left white is-bold s24"><span class="bullet">1.</span></div>
        </div>
        <div id="bullet_spacer_1" class="left">&nbsp;</div>
        <div class="content">
            <p class="white is-regular s18">This is the email you will be subscribing with, if you'd like to change it, please enter here now.</p>
            <label id="label_email" class="white is-bold s22" for="emailField">YOUR EMAIL: </label>
            <input id="emailField" value="" name="C_EmailAddress" type="text">
        </div>
    </div>

    <div class="clearfix"></div>
    <div id="step2" class="block">
        <div id="circle_2" class="circle">
            <div id="bullet_2" class="left white is-bold s24"><span class="bullet">2.</span></div>
        </div>
        <div id="bullet_spacer_2" class="left">&nbsp;</div>
        <div class="content">
            <p class="white is-regular s18">Choose your newsletter:</p>
            <div id="checkbox_customer" class="left">
                <div class="box">
                    <input id="elqInput31" type="checkbox" name="elqInput31" checked="checked">
                    <label class="white is-bold s20" for="elqInput31">CUSTOMER</label>
                </div>
                <div class="arrow-up"></div>
                <div class="nip_box">
                    <span class="is-bold s12">Customer Newsletter</span>
                    <p class="is-light s115">
                    Monthly collective on latest industry news, technology pieces from experts, product resources, success examples and exclusive customer promotions.
                    </p>
                </div>
            </div>

            <div id="spacer" class="left">&nbsp; </div>
            <div id="checkbox_training" class="left">
                <div class="box">
                    <input id="elqInput32" type="checkbox" name="elqInput32" checked="checked">
                    <label class="white is-bold s20" for="elqInput32">TRAINING</label>
                </div>
                <div class="arrow-up"></div>
                <div class="nip_box">
                    <span class="is-bold s12">Training Newsletter</span>
                    <p class="is-light s115">
                    Exclusive newsletter for current and aspiring IT professionals. Updated with training tips and tricks, industry news, free online training resources and latest information on available certification and training.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
        <div id="step3" class="block">
        <div id="circle_3" class="circle">
            <div id="bullet_3" class="left white is-bold s24"><span class="bullet">3.</span></div>
        </div>
        <div id="bullet_spacer_3" class="left">&nbsp;</div>
        <div class="content">
            <div id="submit" class="box right">
                <span class="right white is-bold s24">SIGN-UP</span>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
</form> 
```

### JavaScript

**根据 Eliran 的回答更新**

```
$(document).ready(function() {

    $('#submit').click(function () {

        //Get the data from all the fields
        var email = $('input[name=C_EmailAddress]');
        var trainingNewsletter = $('input[name=elqInput31]');
        var customerNewsletter = $('input[name=elqInput32]');
        var regExp = /^[^@]+@[^@]+.[a-z]{2,}$/i;
        var validationPass = true;
        var form = $('#redhat_form');

        if (validationPass === true) {
            $.post(form.attr('action'), form.serialize(), function(data) {});
            $('#alert').removeClass('hide');
            $('#alert').removeClass('alert-success');
            $('#alert').removeClass('alert-error');
            $('#alert_text').remove();
            $('#alert').addClass('alert-success');
            $('#alert').append('<p id="alert_text" class="is-regular s16">Thank you for subscribing.</p>');
            $('#emailField').val("");
            //window.location='http://afternoon-leaf-7565.herokuapp.com/thankyou/';
            return false;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:17:18.643

好的，所以您面临的问题是 AJAX 调用在 IE 中没有成功返回，而是抛出错误。首先，您需要正确编码 AJAX 调用。这是 AJAX 调用的更新代码。

```
$.ajax({
    url: form.attr('action'),
    data: form.serialize(),
    success: function(data){
        alert('success');
    },
    error: function(xhr, textStatus, errorThrown){
        alert(errorThrown);
    },
    dataType: 'json'
}); 
```

现在它在 IE 中引发错误的原因是“无传输”。发生这种情况是因为跨域 AJAX 调用。这是 jQuery 的一个已知错误。jQuery 团队“没有计划在核心中支持这一点，并且更适合作为插件。” IE 不使用 XMLHttpRequest，而是使用一个名为 XDomainRequest 的替代对象。

我找到了一个 javascript 代码来处理这个问题。代码在[这里](https://raw.github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest/master/jQuery.XDomainRequest.js)。

您需要将代码复制到文件中并将其用作页面的外部源。或者，您可以直接将其嵌入页面头部。[这里](http://jsfiddle.net/DB9B8/2/)的工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:38:23.757

实际上，它[也不适用于 chrome](http://jsfiddle.net/S7bT3/)。

您的属性选择器会产生错误：

> 未捕获的错误：语法错误，无法识别的表达式：=[name=elqInput31]

修复它，一切都会好起来的。

**[jsFiddle 上的工作演示](http://jsfiddle.net/DB9B8/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T18:44:03.373

1.  您是否在 chrome 开发工具中看到 POST 请求或尝试发送 POST 请求？在我的 chrome 中，我看到了尝试。阅读有关跨域策略的信息。您的表单操作 url 和您的页面位于不同的域中。而且您不能进行跨域 ajax 请求（但有 hack 及其名称 JSONP）。因此，考虑将表单发送到同一域或使用 JSONP，在引擎盖下将发送 GET 请求。
2.  我的建议是改用 $.post 更灵活的 $.ajax 并使用错误回调函数。

    ```
    $.ajax({
            类型：'POST'，
            网址：form.attr('action'),
            数据：form.serialize()，
            成功：函数（p，p1）{
            },
            错误：错误（jqXHR，textStatus，errorThrown）{

               alert("发送请求失败。textStatus=" + textStatus);
            }

    });
    ```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) （页面也包含一些关于跨域请求的信息）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T03:29:46.197

您有两行错误：

```
 var trainingNewsletter = $('input=[name=elqInput31]');
    var customerNewsletter = $('input=[name=elqInput32]'); 
```

实际上应该是：

```
 var trainingNewsletter = $('input[name=elqInput31]');
    var customerNewsletter = $('input[name=elqInput32]'); 
```

我不确定这是否会完全解决问题，但可以肯定的是其中的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T15:22:40.457

您是否有理由使用 div 和 span 而不是 input type="submit" 或 button type="submit？

您是否有理由监听提交按钮的点击而不是监听表单提交？$("#form").on("提交", function () {etc.etc});

# php - $_FILES['file']['tmp_name'] + 从 tmp 图像裁剪

> ID：12327339
> 
> 赞同：1
> 
> 时间：2012-09-08T01:35:08.173
> 
> 标签：php

我目前允许用户上传 img，然后将图像保存为以下内容：

```
 $tmp = imagecreatetruecolor($configWidth, $configHeight);
        imagecopyresampled($tmp, $src, 0,0,0,0,$configWidth,$configHeight,$origWidth,$origHeight);
        imagejpeg($tmp, $_SERVER['DOCUMENT_ROOT'].$folder.$newFileName,90); 
```

然后我将图像显示给用户，以便他们可以裁剪图像。

我想问我是否可以在不保存的情况下显示图像进行裁剪 - 例如：我可以向用户显示图像以从 tmp_name 进行裁剪 - tmp php 图像？

我不确定这是否可行，但它可以避免保存一张图像，然后在裁剪后删除......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:40:06.293

> 我可以向用户显示图像以从 tmp_name 裁剪 - tmp php 图像吗？

不，图像在 webroot 之外，上传脚本完成执行后，图像也将被删除。

使用一些 html5 方法，您可以在页面上显示图像而无需上传。请参阅[https://developer.mozilla.org/en-US/docs/DOM/FileReader#Example](https://developer.mozilla.org/en-US/docs/DOM/FileReader#Example)

# django - 在 base.html (django) 中显示登录用户

> ID：12327340
> 
> 赞同：1
> 
> 时间：2012-09-08T01:35:15.343
> 
> 标签：django, django-templates

有没有办法在 base.html 文件中访问登录用户的名字？

我正在尝试这样做，因为我想在导航栏上显示当前登录的人，但它不会访问用户的信息，也不会正确检查用户是否经过身份验证。

base.html 中的 html

```
 Hi there,

            {% if user.is_authenticated %}

                {{user.first_name}}
            {% else %}
                Stranger
            {% endif %} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T02:24:39.593

`request.user`为您提供当前登录的用户对象。因此您可以完全访问 User 类拥有的所有属性和方法。要得到`first_name`，你就可以做到`{{ request.user.first_name }}`。要获取您使用的全名`{{ request.user.get_full_name }}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T05:50:20.953

如果您使用`[RequestContext][1]`，默认情况下您会`user`在模板中获得实例，以便您可以将其用作其属性 as`{{user.first_name}}`和其他。这`user`将与当前已通过身份验证的用户相同，该用户也可在`request.user`视图中使用。

`RequestContext`默认情况下会添加一些在`TEMPLATE_CONTEXT_PROCESSORS`您的`settings.py`.

在您看来，您可以将其用作

```
#your view code
....
#send response by rendering the template and use Requestcontext while rendering template
return render_to_response('polls/detail.html', {'poll': p},
                           context_instance=RequestContext(request)) 
```

参考 - [Django 教程 04](https://docs.djangoproject.com/en/dev/intro/tutorial04/)

# iphone - 接收 iPhone 用户数据

> ID：12327346
> 
> 赞同：-2
> 
> 时间：2012-09-08T01:36:35.170
> 
> 标签：iphone, objective-c, sql, ios, database

我正在创建一个包含各种测试的应用程序，我需要一种从用户那里接收测试结果的方法。当用户完成测试并能够从我的计算机或其他东西访问结果时，我有没有办法保存测试结果？在此先感谢，约书亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:12:35.043

在我正在制作的应用程序中，我使用 JSON（JavaScript 对象表示法）在我的应用程序和存储信息的 Web 服务器之间进行通信。使用起来相当简单。查看本教程[http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)。这是我使用的，而且我对一般编程还很陌生，我只需要进行一些调整即可使其正常工作。这是相当广泛的，但这应该让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T05:54:53.237

如果你熟悉 sql 命令。为什么不尝试使用 sqlite 创建一个可以存储结果、更新它们、检索它们的数据库。你可以参考这个网站[http://www.techotopia.com/index.php/ iPhone_Database_Implementation_using_SQLite](http://www.techotopia.com/index.php/IPhone_Database_Implementation_using_SQLite) 或这个 [http://www.icodeblog.com/2008/08/19/iphone-programming-tutorial-creating-a-todo-list-using-sqlite-part-1/](http://www.icodeblog.com/2008/08/19/iphone-programming-tutorial-creating-a-todo-list-using-sqlite-part-1/)

# android - onSaveInstanceState() 和 onRestoreInstanceState(Parcelable state) 没有被调用？

> ID：12327348
> 
> 赞同：11
> 
> 时间：2012-09-08T01:37:10.783
> 
> 标签：android, android-view, android-custom-view

我有一个扩展 LinearLayout 的自定义视图。我已经实现了 onSaveInstanceState() 和 onRestoreInstanceState() 来保存当前的视图状态。然而，没有采取任何行动。当我在这两种方法中放置日志时，Log Cat 中也没有出现任何内容。我假设这两种方法甚至都没有被调用。谁能解释问题出在哪里？谢谢。

```
@Override
public Parcelable onSaveInstanceState() {
    Bundle bundle = new Bundle();
    bundle.putParcelable("instanceState", super.onSaveInstanceState());
    bundle.putInt("currentPage", currentPage);
    return bundle;
}

@Override
public void onRestoreInstanceState(Parcelable state) {

    if (state instanceof Bundle) {
      Bundle bundle = (Bundle) state;
      currentPage = bundle.getInt("currentPage");
      Log.d("State", currentPage + "");
      super.onRestoreInstanceState(bundle.getParcelable("instanceState"));
      return;
    }
       super.onRestoreInstanceState(state);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T01:15:58.977

在挖掘了android os之后，我终于弄明白了。正如我所怀疑的：这两种方法没有任何问题。他们只是没有被调用。在 Web 上，您可以读到“重新创建活动时调用 onRestoreInsatnceState”好吧，这是有道理的，但它并不完全正确。是的，onRestoreInstanceState() 在重新创建活动时被调用，但仅当：

**它被操作系统杀死了**。“这种情况发生在：

*   设备的方向发生变化（您的活动被破坏并重新创建）
*   您面前还有另一个活动，并且在某些时候操作系统会终止您的活动以释放内存（例如）。下次您开始活动时，将调用 onRestoreInstanceState()。”

所以如果你在你的活动中并且你**点击了设备上的后退按钮**，你的活动是完成（），下次你启动你的应用程序时它会再次启动（听起来像是重新创建，不是吗？）但是这次**没有保存状态**，因为您在点击后退按钮时故意退出了它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-23T14:49:29.593

正如 Steven Byle 的评论所提到的，一个自定义`View`必须有一个分配给它的 id`onSaveInstanceState`才能被调用。我通过在我的自定义`View`构造函数中设置一个 id 来实现这一点：

```
public class BoxDrawingView extends View {
    private int BOX_DRAWING_ID = 555;
    …

    public BoxDrawingView(Context context, AttributeSet attrs) {
        …
        this.setId(BOX_DRAWING_ID);
    }
    …

} 
```

# c++ - #define 导致“预期的主表达式”错误

> ID：12327358
> 
> 赞同：5
> 
> 时间：2012-09-08T01:39:36.000
> 
> 标签：c++, c-preprocessor

```
#define N 10;

int main()
{
    int x;

    for (int i=0; i<N; i++)
        x = i;

    return 0;
} 
```

在 g++ 中编译的结果：

```
test-define.cpp: In function ‘int main()’:
test-define.cpp:7:22: error: expected primary-expression before ‘;’ token
test-define.cpp:7:22: error: expected ‘)’ before ‘;’ token
test-define.cpp:7:24: error: name lookup of ‘i’ changed for ISO ‘for’ scoping [-fpermissive]
test-define.cpp:7:24: note: (if you use ‘-fpermissive’ G++ will accept your code)
test-define.cpp:7:27: error: expected ‘;’ before ‘)’ token 
```

但是当我将第 7 行更改为`for (int i=0; i<10; i++)`.

为什么会这样，我如何使用该`#define`指令来完成我想要的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-08T01:40:58.750

删除分号 - 你会很好 - 分号包含在替换中

有时让编译器只运行预处理器很有用。使用 gcc/g++ 你可以做类似的事情

```
gcc -E file.c > result.txt 
```

这将向您展示宏如何扩展（提示从文件末尾开始并进行处理）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-08T01:53:43.717

我建议用常量替换宏：

```
const int N = 10; 
```

最好尽可能避免使用宏。宏没有任何作用域。它们是全局文本替换。编译器永远不会看到它们，因此如果您使用调试器，它不会知道它们。我忘记了可能还有其他不使用它们的原因。

# cakephp - CakePHP - 代替占位符的默认标签

> ID：12327359
> 
> 赞同：0
> 
> 时间：2012-09-08T01:39:38.917
> 
> 标签：cakephp, placeholder, labels

因此，在 CakePHP 中，有一种方法可以通过在语句`'label'=>false`中输入“inputDefaults”来默认关闭标签。`Form->create()`

有没有办法，而不是完全删除标签，将标签更改为元素占位符属性？这相当于在向每个元素添加 a`'inputDefaults'=>array('label'=>false)`的同时执行...但是有没有办法做到这一点而不必将它添加到每个元素并让 CakePHP 为你做呢？`Form->create``'placeholder'=>'Placeholder'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T04:32:15.960

您可以运行自己的 FormHelper 副本，其中包含您的修改。您可以从 lib/Cake/View/Helper/FormHelper.php 复制 FormHelper 的版本并将其粘贴到您的应用程序中的 app/View/Helper/FormHelper.php 并对您的副本进行所需的修改。app 文件夹中的副本优先于核心中提供的副本。与往常一样，永远不要**修改**Core 中的文件。

或者，您可以将 FormHelper 扩展为您自己的 Helper 类：

```
class MyFormHelper extends FormHelper {
    ...
} 
```

不要忘记将“MyForm”添加到您的 $helpers 数组中！

无论如何，目前使用 Cake 2.x 无法实现您的要求。没有任何更改，您需要在每个 input() 调用的选项数组中添加一个 'placeholder' => '...'。如果您做出此更改，请考虑将其回馈给 CakePHP 社区，以便其他人可以从您的工作中受益！

# c# - lambda 表达式 foreach 循环

> ID：12327360
> 
> 赞同：1
> 
> 时间：2012-09-08T01:39:45.113
> 
> 标签：c#, .net, lambda

我有以下代码

```
int someCount = 0;

for ( int i =0 ; i < intarr.Length;i++ )
{
   if ( intarr[i] % 2 == 0 )
   { 
       someCount++;
       continue;
   }
   // Some other logic for those not satisfying the condition
} 
```

是否可以使用任何 Array.Where 或 Array.SkiplWhile 来实现相同的效果？

```
foreach(int i in intarr.where(<<condtion>> + increment for failures) )
{
      // Some other logic for those not satisfying the condition    
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T01:43:35.137

使用 LINQ：

```
int someCount = intarr.Count(val => val % 2 == 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T01:45:10.560

对于简短的语句，我绝对更喜欢 @nneonneo 的方式（并且它使用显式 lambda），但是如果您想构建更精细的查询，可以使用[LINQ 查询语法](http://msdn.microsoft.com/en-us/library/bb397947.aspx)：

```
var count = ( from val in intarr 
    where val % 2 == 0 
    select val ).Count(); 
```

显然，当查询可以用单个 lambda 表达式表示时，这可能是一个糟糕的选择，但我发现它在编写更大的查询时很有用。

更多示例：[http ://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T05:28:20.420

没有什么（太多）可以阻止您自己滚动`Where`失败的次数。***“没什么”***，因为 lambdas 和带有`yield return`语句的方法都不允许引用 out/ref 参数，**因此具有以下签名的所需扩展将不起作用**：

```
// dead-end/bad signature, do not attempt
IEnumerable<T> Where(
    this IEnumerable<T> self,
    Func<T,bool> predicate,
    out int failures) 
```

但是，我们可以为失败计数声明一个局部变量并返回一个`Func<int>`可以获取失败计数的变量，并且局部变量完全可以从 lambdas 引用。因此，这是一个可能的（经过测试的）实现：

```
public static class EnumerableExtensions
{
    public static IEnumerable<T> Where<T>(
        this IEnumerable<T> self,
        Func<T,bool> predicate,
        out Func<int> getFailureCount)
    {
        if (self == null) throw new ArgumentNullException("self");
        if (predicate == null) throw new ArgumentNullException("predicate");

        int failures = 0;

        getFailureCount = () => failures;

        return self.Where(i =>
            {
                bool res = predicate(i);
                if (!res)
                {
                    ++failures;
                }
                return res;
            });
    }
} 
```

...这是一些练习它的测试代码：

```
Func<int> getFailureCount;
int[] items = { 0, 1, 2, 3, 4 };
foreach(int i in items.Where(i => i % 2 == 0, out getFailureCount))
{
    Console.WriteLine(i);
}
Console.WriteLine("Failures = " + getFailureCount()); 
```

上述测试，运行时输出：

> 0
> 2
> 4
> 失败 = 2

有几个警告我觉得有义务警告。由于您可以在没有遍历整个 的情况下过早地跳出循环`IEnumerable<>`，因此失败计数只会反映遇到的失败，而不是*@nneonneo 的解决方案（我更喜欢）中的失败总数。*另外，如果 LINQ 的实现`Where`扩展名被更改为每个项目多次调用谓词的方式，那么失败计数将不正确。另一个有趣的地方是，在您的循环体内，您应该能够调用 getFailureCount Func 以获取目前正在运行的失败计数。

我提出这个解决方案是为了表明我们没有被锁定在现有的预打包解决方案中。语言和框架为我们提供了很多机会来扩展它以满足我们的需求。

# php - 如何将动态构造的 ext/mysql 查询转换为 PDO 准备语句？

> ID：12327363
> 
> 赞同：9
> 
> 时间：2012-09-08T01:40:44.327
> 
> 标签：php, mysql, pdo

我正在将一些使用 ext/mysql（`mysql_*()`函数）的代码转换为 PDO 和准备好的语句。以前，当我动态构造查询时，我只是简单地传递我的字符串`mysql_real_escape_string()`并将它们直接放入我的查询中，但现在我发现我需要在执行查询时将值作为数组传递，或者在执行之前绑定变量。

如何转换旧代码以使用新的数据库驱动程序？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T01:40:44.327

将您的查询从 ext/mysql 迁移到 PDO 准备语句需要一种新的方法来处理许多方面。在这里，我将介绍一些经常需要执行的常见任务。这绝不是详尽无遗地匹配所有可能的情况，它只是为了演示在动态生成查询时可以使用的一些技术。

在我们开始之前，有几件事要记住——如果有问题，请在提问之前检查此列表！

*   如果您没有明确禁用模拟准备，**您的查询并不比使用`mysql_real_escape_string()`**. 有关完整说明，[请参阅此内容。](https://stackoverflow.com/a/12202218/889949)
*   不能在单个查询中混合命名占位符和问号占位符。在开始构建查询之前，您必须决定使用其中之一，您不能在中途切换。
*   准备好的语句中的占位符只能用于值，不能用于对象名称。换句话说，您不能使用占位符动态指定数据库、表、列或函数名称，或任何 SQL 关键字。一般来说，如果你发现你需要这样做，你的应用程序的设计是错误的，你需要重新检查它。
*   任何用于指定数据库/表/列标识符的变量都不应直接来自用户输入。换句话说，不要使用、`$_POST`或任何其他来自外部源的数据来指定列名。您应该在使用此数据构建动态查询之前对其进行预处理。`$_GET``$_COOKIE`
*   PDO 命名占位符在查询中指定为`:name`. 传递数据以执行时，相应的数组键可以选择包含前导`:`，但这不是必需的。占位符名称应仅包含字母数字字符。
*   命名占位符不能在查询中多次使用。要多次使用相同的值，您必须使用多个不同的名称。如果您有一个包含许多重复值的查询，请考虑使用问号占位符。
*   使用问号占位符时，传递值的顺序很重要。同样重要的是要注意占位符位置是 1 索引的，而不是 0 索引的。

下面的所有示例代码都假定已经建立了数据库连接，并且相关的 PDO 实例存储在变量中`$db`。

* * *

## 使用关联数组作为列/值列表

最简单的方法是使用命名占位符。

使用 ext/mysql 可以在构造查询时转义值，并将转义值直接放入查询中。在构造 PDO 准备语句时，我们使用数组键来指定占位符名称，因此我们可以将数组直接传递给`PDOStatement::execute()`.

对于此示例，我们有一个包含三个键/值对的数组，其中键表示列名，值表示列的值。我们要选择任何列匹配的所有行（数据具有`OR`关系）。

```
// The array you want to use for your field list
$data = array (
  'field1' => 'value1',
  'field2' => 'value2',
  'field3' => 'value3'
);

// A temporary array to hold the fields in an intermediate state
$whereClause = array();

// Iterate over the data and convert to individual clause elements
foreach ($data as $key => $value) {
    $whereClause[] = "`$key` = :$key";
}

// Construct the query
$query = '
  SELECT *
  FROM `table_name`
  WHERE '.implode(' OR ', $whereClause).'
';

// Prepare the query
$stmt = $db->prepare($query);

// Execute the query
$stmt->execute($data); 
```

* * *

## 使用数组构造`IN (<value list>)`子句的值列表

实现这一点的最简单方法是使用问号占位符。

这里我们有一个包含 5 个字符串的数组，我们想要匹配给定的列名，并返回列值与 5 个数组值中的至少一个匹配的所有行。

```
// The array of values
$data = array (
  'value1',
  'value2',
  'value3',
  'value4',
  'value5'
);

// Construct an array of question marks of equal length to the value array
$placeHolders = array_fill(0, count($data), '?');

// Normalise the array so it is 1-indexed
array_unshift($data, '');
unset($data[0]);

// Construct the query
$query = '
  SELECT *
  FROM `table_name`
  WHERE `field` IN ('.implode(', ', $placeHolders).')
';

// Prepare the query
$stmt = $db->prepare($query);

// Execute the query
$stmt->execute($data); 
```

如果您已经确定要使用带有命名占位符的查询，则该技术会稍微复杂一些，但并不复杂。您只需遍历数组即可将其转换为关联数组并构造命名的占位符。

```
// The array of values
$data = array (
  'value1',
  'value2',
  'value3',
  'value4',
  'value5'
);

// Temporary arrays to hold the data
$placeHolders = $valueList = array();

// Loop the array and construct the named format
for ($i = 0, $count = count($data); $i < $count; $i++) {
  $placeHolders[] = ":list$i";
  $valueList["list$i"] = $data[$i];
}

// Construct the query
$query = '
  SELECT *
  FROM `table_name`
  WHERE `field` IN ('.implode(', ', $placeHolders).')
';

// Prepare the query
$stmt = $db->prepare($query);

// Execute the query
$stmt->execute($valueList); 
```

# android - 来自 spinner.java:828 的 NullpointerException 关闭

> ID：12327369
> 
> 赞同：0
> 
> 时间：2012-09-08T01:41:32.740
> 
> 标签：android, nullpointerexception, spinner

我是 java/android 新手，并试图帮助一个开源项目。我决定我可以从尝试修复错误中学到最多的东西，所以我一直在应用程序上运行 Monkey 以开始使用 bugsense 生成崩溃报告（我无权访问 play.google 崩溃报告）。我一直遇到下面的崩溃，由于它无法确定应用程序在代码中的哪个位置出现问题，我什至不确定到底是什么问题。我不是要求逐行修复（尽管它是开源的），但非常感谢一些有用的提示。

完整的回购：[https](https://github.com/rackspace/android-rackspacecloud) ://github.com/rackspace/android-rackspacecloud Stacktrace + 来源：[http ://pastebin.com/YkX7NvdD](http://pastebin.com/YkX7NvdD)

```
Stacktrace:
// CRASH: com.rackspace.cloud.android (pid 3330)
// Short Msg: java.lang.NullPointerException
// Long Msg: java.lang.NullPointerException
// Build Label: google/takju/maguro:4.1.1/JRO03C/398337:user/release-keys
// Build Changelist: 398337
// Build Time: 1341437384000
// java.lang.NullPointerException
//  at android.widget.Spinner$DialogPopup.dismiss(Spinner.java:828)
//  at android.widget.Spinner$DialogPopup.onClick(Spinner.java:862)
//  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:924)
//  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
//  at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
//  at android.widget.AbsListView.onKeyUp(AbsListView.java:2996)
//  at android.widget.ListView.commonKey(ListView.java:2196)
//  at android.widget.ListView.onKeyUp(ListView.java:2051)
//  at android.view.KeyEvent.dispatch(KeyEvent.java:2633)
//  at android.view.View.dispatchKeyEvent(View.java:7086)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1354)
//  at android.widget.ListView.dispatchKeyEvent(ListView.java:2026)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1358)
//  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1892)
//  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1369)
//  at android.app.Dialog.dispatchKeyEvent(Dialog.java:702)
//  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1819)
//  at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3575)
//  at android.view.ViewRootImpl.deliverKeyEvent(ViewRootImpl.java:3531)
//  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3113)
//  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
//  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
//  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)
//  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
//  at android.os.MessageQueue.nativePollOnce(Native Method)
//  at android.os.MessageQueue.next(MessageQueue.java:125)
//  at android.os.Looper.loop(Looper.java:124)
//  at android.app.ActivityThread.main(ActivityThread.java:4745)
//  at java.lang.reflect.Method.invokeNative(Native Method)
//  at java.lang.reflect.Method.invoke(Method.java:511)
//  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
//  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
//  at dalvik.system.NativeStart.main(Native Method)
// 
** Monkey aborted due to error.
Events injected: 5252
:Sending rotation degree=0, persist=false
:Dropped: keys=0 pointers=23 trackballs=0 flips=0 rotations=0
## Network stats: elapsed time=47382ms (0ms mobile, 47382ms wifi, 0ms not connected)
** System appears to have crashed at event 5252 of 10000 using seed 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:45:51.920

根据[我在 GrepCode 看到的代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/Spinner.java/#828)，我们有这个：

```
 public void dismiss() {
        mPopup.dismiss();
        mPopup = null;
    } 
```

因此，您的 NPE 是由`mPopup`哪个是私有`AlertDialog`的`DialogPopup`（私有类`Spinner`）引起的，可能是单击它时显示微调器选项的对话框。`mPopup`仅设置为与 null at 不同的值`DialogPopup.show()`。该方法在`Spinner.performClick()`，即单击微调器时调用。

但这是奇怪的部分。堆栈跟踪似乎`mPopup`是单击的项目时，因为`DialogPopup`设置为它的`OnClickListener`. 因此，此时 mPopup 不应为空。但是当`DialogPopup.dismiss()`它为空时。

这有什么可以解释的？这是我的假设。好吧，猴子通常很快。比实际用户更快。在 mPopup 被第一个真正解雇之前，它可能能够单击两个项目`DialogPopup.onClick()`。所以我们有两个调用`DialogPopup.dismiss()`，第二个调用 NPE。

所以这是我的结论：

*   因为我们只处理内部类，而你的代码不负责触发崩溃的代码，所以这很可能是一个 Android 平台错误。
*   要解决此问题，您必须能够在 Eclipse 中重现和调试，以便完全了解正在发生的事情。您需要下载 Android 平台代码才能进入微调器代码。或者，您可以登录 Spinner 代码并构建 Jelly Beans 并刷新您的手机（或替换 framework.jar）
*   如果我的假设是正确的，那么使用 ecplise 进行调试将无济于事。您将需要日志来调试问题。但如果我的假设是正确的，那么我们认为我们不应该担心。普通用户几乎无法点击这么快。
*   您可以建议 Android 人员进行 if-null 检查。但只有在你找到真正的根本原因之后。否则，你将掩盖问题

# javascript - 如何安装/使用backbone.js 框架？

> ID：12327370
> 
> 赞同：4
> 
> 时间：2012-09-08T01:41:35.590
> 
> 标签：javascript, html, backbone.js, web

我是 JavaScript 新手，想知道如何安装主干框架，以便可以将它与 javascript 一起使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T10:55:29.270

JOPLOmacedo 的第一条评论包含基本答案，但我会详细说明一下：

[从jQuery](http://jquery.com/)站点下载 jquery.js ，从[Underscore.js](http://documentcloud.github.com/underscore/)站点和 [Backbone.js](http://backbonejs.org/)站点下载underscore.js 。首先使用“开发版本”，因为这可以帮助您进行调试。您可以将文件放在与您自己的测试文件相同的文件夹中，以保持简单。（稍后，您会发现将它们放在单独的文件夹中会更好。`Backbone.js``.js`

`<body>`在您的 HTML 代码中，编写（例如，在所有内容之后，如果您使用一个，则在结束标记之前：

```
<script src="jquery.js"></script>
<script src="underscore.js"></script>
<script src="backbone.js"></script>
<script>
// Your own JavaScript code here
</script> 
```

这应该让你开始。在编写自己的代码之前，您可以使用例如[Hello Backbone.js 教程中相对简单的 Hello world 代码来检查安装是否正常。](http://arturadib.com/hello-backbonejs/)（本教程使用 .js 文件的远程托管版本，这是另一种可能性。）

# html - 在加载时将类添加到 div

> ID：12327372
> 
> 赞同：0
> 
> 时间：2012-09-08T01:42:08.423
> 
> 标签：html, css

> **可能重复：**
> [突出显示当前页面的导航菜单](http://stackoverflow.com/questions/4626431/highlight-the-navigation-menu-for-the-current-page)

我正在处理一个由多个 DIV 组成的菜单，每个 DIV 都有一个唯一的 CSS ID。:hover 选择器已在 CSS 中用于尝试在查看相应页面时为每个 div 赋予不同的样式，但它似乎没有生效。我的 CSS 和 HTML 可以在这个[JSFiddle](http://jsfiddle.net/Koubenec/MEnKR/7/)中看到。基本上，由于这些 div 用于创建菜单，我希望在查看超链接页面时将“活动”类添加到 div（当有人在我的“主页”页面上时，我想要应用于“主页”菜单 div 的活动样式）。

```
#pagebuttonhome {
  width: 130px;
  height: 30px;
  background-color: #ffe0e8;
  position: absolute;
  overflow: hidden;
  left: 30px;
  bottom: 0px;
  font-size: 17px;
  letter-spacing: 2px;
  text-align: center;
  line-height: 30px;
  color: #dc2d18;
}
#pagebuttonhome:hover {
  background-color: #dc2d18;
  color: #ffe0e8;
  height: 40px;
  cursor: pointer;
}
#pagebuttonhome.active {
  background-color: #dc2d18;
  color: #ffe0e8;
  height: 40px;
  cursor: pointer;
}
```

```
<div id="pagebuttonhome">HOME</div>
```

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T01:53:23.297

解决它的一种方法是在每个页面的正文中添加一个唯一的 id。例如，`<body id="homelink">`在主页、`<body id="aboutlink">`关于页面（如果有的话）等。然后，将`#pagebuttonhome.active`选择器替换为

```
#homelink #pagebuttonhome,
#aboutlink #pagebuttonabout 
```

它会选择并突出显示您所在页面的链接，而无需使用 javascript。

[http://jsfiddle.net/MEnKR/11/](http://jsfiddle.net/MEnKR/11/)

# php - document.onkeyup 仅在不输入文本框时

> ID：12327377
> 
> 赞同：0
> 
> 时间：2012-09-08T01:42:43.400
> 
> 标签：php, javascript, html

我正在尝试使用 document.onkeyup 制作导航系统，其中按键盘上的左箭头将用户转发到上一个 ID，并且与右箭头转发到下一个 ID 相同。

我还想使用 R 键将人们带到一个随机 ID，但是还有一个搜索和登录表单，因此当用户在键入时按 R 键时，他们将被转发到另一个页面。

我怎样才能避免这种情况？

这是我的代码

```
$AddToSite_JavaScript = '<script>
document.onkeyup=checkKeycode;
function checkKeycode(e)
{
    var keycode;
    if(window.event) keycode=window.event.keyCode;
    else if(e) keycode=e.which;

    if(keycode=="37") window.location.href=\''. $WebsiteRoot ."/". $PreviousId ."-". $PreviousTitle .'\';
    else if(keycode=="39") window.location.href=\''. $WebsiteRoot ."/". $NextId ."-". $NextTitle .'\';
    else if(keycode=="13" || keycode=="82") window.location.href=\''. $WebsiteRoot ."/random" .'\';
}
</script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:16:00.397

这部分代码：

```
> var keycode;
> if(window.event) keycode=window.event.keyCode;
> else if(e) keycode=e.which; 
```

会更好：

```
var keycode, target;
e = e || window.event;
if (e) {
  keycode = e.keyCode || e.which
  target = e.target || e.srcElement;
} 
```

请注意，这`event.srcElement`是 IE 特定的，符合 W3C 的浏览器支持`event.target`.

现在`target`是其处理程序调用函数的元素，因此稍后您可以执行以下操作：

```
... && target.tagName.toLowerCase() != 'input' ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:06:31.693

如果您只使用文本输入：在之后抛出以下代码`keycode=="82"`就可以了：

`&& e.srcElement.tagName != "INPUT"`

本质上，它只是检查击键是否来自输入框。

如果您不想在输入中按 enter 来触发它：将现有代码放入 () 中，然后添加它。

# sql - 从带有 Where 子句的多值列表中选择

> ID：12327386
> 
> 赞同：2
> 
> 时间：2012-09-08T01:44:46.397
> 
> 标签：sql, ms-access, multivalue

我正在尝试选择所有`Projects`拥有`Employees`who are 的人`AtWork`。

```
Projects:
ProjName    |    EmpOnProj
--------------------------
Alpha       |    1, 2, 3
Beta        |    1, 3

Employees:
EmpID       |   EmpName    |   AtWork
-------------------------------------
1           |   John       |   TRUE
2           |   Mark       |   FALSE
3           |   Mary       |   TRUE 
```

我需要输出当前可以进行的所有项目；即，我需要展示`Beta`，因为在 Beta 上工作的员工正在工作。

目前我不能说“所有员工都必须在工作”，只有以下几点：

```
SELECT ProjName FROM Projects INNER JOIN 
Employees ON EmpOnProj.Value = EmpID
WHERE AtWork = true
GROUP BY ProjName 
```

它返回两者，因为它看到一个正确的员工并显示项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:23:00.007

我想我解决了这个问题。基本上我是说“显示所有项目，除了有人不在工作的项目”

[http://sqlfiddle.com/#!3/36c48/2](http://sqlfiddle.com/#!3/36c48/2)

```
SELECT DISTINCT
  p_global.ProjName 

FROM
  Projects AS p_global

WHERE
  p_global.ProjName NOT IN
    (SELECT DISTINCT
      p1.ProjName

    FROM 
      Projects p1 INNER JOIN Employees AS e ON p1.EmpOnProj = e.EmpID 

    WHERE
      e.AtWork = 0) 
```

可能有一个更简单的解决方案，但这有效（或者看起来像它）:)

编辑：修改为`GROUP BY`按照评论中的建议删除 s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:55:20.880

如果不能真正回答您的问题，但这些东西可以指导您简化并帮助您解决问题。目前您的表格格式不正确。为什么不使用逗号分隔值，而是在行中进行呢？像这样，

```
Projects:
ProjName    |    EmpOnProj
--------------------------
Alpha       |    1
Alpha       |    2
Alpha       |    3
Beta        |    1
Beta        |    3 
```

通过这种方式，您可以轻松地连接两个表。例子

```
SELECT  a.EmpID, a.EmpName, 
        iif (ISNULL(b.EmpOnProj), 'False', 'True') AtWork
FROM    Employees a
        LEFT JOIN Projects b
            ON a.EmpID = b.EmpOnProj
WHERE   b.ProjName = 'Beta' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T02:11:31.937

假设您超出了 EmpOnProj 列，如您的示例中所实现的，该列违反了[第一范式](http://en.wikipedia.org/wiki/First_normal_form)，并将其替换为名为 ProjEmp 的关联实体，其主键为 (ProjName, EmpID)

```
SELECT p.ProjName FROM Projects p
LEFT OUTER JOIN 
(SELECT eop.ProjName FROM ProjEmp eop
    INNER JOIN JOIN Employees e
    ON e.EmpId = eop.EmpId
    AND e.AtWork = FALSE
) AS empNotHere
ON empNotHere.ProjName = p.ProjName
WHERE empNotHere.ProjName IS NULL
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T02:56:09.333

我假设我误解了您的问题，因为您的 SQL 似乎与您提供的架构相矛盾。但是，如果您的表格按照您列出的方式进行格式化，则您必须跳过箍。这是一个涉及制作 UDF 的解决方案，以避免极其复杂的 SQL。

将此添加到模块中：

```
Function WhoIsAtWork() As String
    Dim rs As Recordset
    Set rs = CurrentDb.OpenRecordset("Select * from Employees where AtWork = true Order by EmpID")
    Do While Not rs.EOF
        WhoIsAtWork = WhoIsAtWork & rs!EmpID & ", "
        rs.MoveNext
    Loop
    If Len(WhoIsAtWork) <> 0 Then
        WhoIsAtWork = Left(WhoIsAtWork, Len(WhoIsAtWork) - 2)
    End If
    rs.Close
    Set rs = Nothing
End Function 
```

那么你的 SQL 将是这样的：

```
SELECT ProjName
FROM Projects
WHERE Projects.EmpOnProj=WhoIsAtWork(); 
```

# wpf - WPF 控件位于窗口边框的顶部，我该如何阻止它？

> ID：12327387
> 
> 赞同：2
> 
> 时间：2012-09-08T01:45:03.470
> 
> 标签：wpf, c#-4.0, animation, wpf-controls, window

我在窗口的网格中有一个 WPF 窗口和一个图像。我正在为图像设置动画，使其从视野之外（超出寡妇位置）移动到窗口中。

动画非常流畅，一切正常，但我注意到图像在移动时位于窗口边框的顶部。这个问题末尾的图像是它的样子。

为什么图像会在窗口边框的顶部，我如何让它在边框“下方”？

提前致谢！

![在此处输入图像描述](../Images/d355de65a7ceba2a02c669cd4c6a8ea1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T06:18:59.913

经过大量的试验和错误之后，问题似乎是我在没有定义宽度的网格中移动图像，因此在移动图像时宽度会扩大到边界上，从而扩展了“客户”区域窗口并显示在窗口区域上。

一旦我定义了一个特定的网格宽度，一切正常。

# javascript - 暂停和恢复jquery动画？

> ID：12327390
> 
> 赞同：2
> 
> 时间：2012-09-08T01:45:18.967
> 
> 标签：javascript, jquery, jquery-animate

这是一个小提琴：

[http://jsfiddle.net/vBt5E/](http://jsfiddle.net/vBt5E/)

我想在悬停时暂停和取消暂停无限滚动的 jquery 动画，没有任何奇怪的跳跃。

像这样的html：

```
<div id="vertical-carousel">
    <div class="imagecolumn">
        <a href="#"><img src="http://placekitten.com/200/120" width="200" height="120"></a>
        <a href="#"><img src="http://placekitten.com/200/100" width="200" height="100"></a>
        <a href="#"><img src="http://placekitten.com/200/80" width="200" height="90"></a>
    </div>
</div>
​ 
```

像这样的javascript：

```
var imageColumn = $('.imagecolumn');

origColumnHeight = imageColumn.height();

$(document).ready(function() {

    var columnDupe = imageColumn.contents()
                                .clone()
                                .addClass('dupe')
                                .appendTo(imageColumn);

    function scrollColumn() {
        imageColumn.css({'top': '0'})
                   .animate({top: -origColumnHeight},15000, 'linear', scrollColumn);

    }

    scrollColumn();
}); 
```

我知道以前曾以不同的形式提出过这个问题，但各种答案对我不起作用。我查看了[Tobia Conferto 的“Pause”插件](http://tobia.github.com/Pause/)，但无法让它工作。同上[这个](http://archive.plugins.jquery.com/project/Pause-Resume-animation)，据说它甚至更加错误。

如果可以的话，请发布一个工作小提琴，它真的很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T02:29:24.567

使用“暂停”插件，您可以通过执行以下操作使其工作：

```
$(".imagecolumn").hover(function() {
  $(this).pause();
}, function() {
  $(this).resume();
}); 
```

示例：http: [//jsfiddle.net/charlescarver/vBt5E/1/](http://jsfiddle.net/charlescarver/vBt5E/1/)

确保在页面上包含插件！[https://raw.github.com/tobia/Pause/master/jquery.pause.min.js](https://raw.github.com/tobia/Pause/master/jquery.pause.min.js)

[PS我更喜欢[PlaceDog](http://placedog.com)。]

# algorithm - 如果基数尝试（或者说 HAT 尝试）非常适合存储和管理字符串，为什么它们不能同样用于整数？

> ID：12327394
> 
> 赞同：1
> 
> 时间：2012-09-08T01:46:35.007
> 
> 标签：algorithm, data-structures, hashtable, trie

我假设他们可以，例如，只需将数字处理为 32（或 64）位二进制“字符串”。在这种情况下，当涉及到快速插入/检索时，哈希表（比如缓存意识哈希表）是否仍然是最重要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:06:25.737

在实践中，try 在存储字符串时特别有用，因为我们经常关心字符串的前缀（例如，自动补全），而在前缀搜索方面，try 表现出色。很少关注整数的前缀。

# android - 操作栏删除标题并回收空间

> ID：12327395
> 
> 赞同：4
> 
> 时间：2012-09-08T01:46:42.633
> 
> 标签：android, android-actionbar

我正在尝试从我的操作栏中删除标题并回收它本来会消耗的空间来使用菜单项。

我曾尝试使用自定义主题，但到目前为止没有任何效果。我尝试将文本大小更改为 0sp，将颜色更改为透明，并将可见性设置为消失。

我也试过这个：

```
ActionBar actionbar = getActionBar();
actionbar.setDisplayShowTitleEnabled(false); 
```

我的目标是 sdk 15+ 并使用标准的 Android 操作栏（即不是 Sherlock）。

感谢您的任何建议。

这就是我所说的（我想要返回的红色边框区域）：

![动作栏](../Images/f448a5833fd58faf340f7f49bd904515.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:51:43.733

您是否查看过 ActionBar 文档？有一种方法，[`setDisplayShowTitleEnabled(boolean)`](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowTitleEnabled%28boolean%29)可以满足您的需求。

只需获取对您的引用`ActionBar`，然后使用以下命令调用它`false`：

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayShowTitleEnabled(false); 
```

# symfony1 - 使用 symfony 1.4 自定义路由

> ID：12327397
> 
> 赞同：1
> 
> 时间：2012-09-08T01:47:31.013
> 
> 标签：symfony1, symfony-1.4

我想扩展 symfony 的默认路由器。我在 lib/ 中创建了路由文件夹，并创建了 customRouter.class.php 将其保存在 lib/routing 下。我已将 factory.yml 更改如下：

```
all:
  routing:
    class: customRouter 
```

我的 customRouter.class.php 是：

```
class customRouter extends sfPatternRouting{
} 
```

我只扩展**sfPatternRouting**类。当我运行应用程序时，它给我一个错误，如下所示：

```
Catchable fatal error: Argument 1 passed to sfRouting::__construct() must be an instance of sfEventDispatcher, string given in /opt/task/lib/vendor/symfony/lib/routing/sfRouting.class.php on line 32 
```

我没有意识到这个问题。我只扩展课程。扩展symfony路由器的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:51:58.760

我相信你扩展了错误的类，因此没有继承必要的方法。symfony 1.4 文档建议扩展“sfDoctrineRoute”类以创建自定义路由（由@Kenny 链接）

# templates - 如何在 Antlr 中使用 stringtemplate（重写）

> ID：12327398
> 
> 赞同：1
> 
> 时间：2012-09-08T01:47:48.493
> 
> 标签：templates, rewrite, antlr

我会遇到这个问题：我给出了这个规则

```
 expr: (NUM -> NUM) ( a=NUM -> ^(PLUS   $expr   $a ))* ;

    NUM   : '0'..'9'+;
    WS    :  ( ' ' | '\t' | '\r' | '\n'  ) {$channel=HIDDEN;}; 
```

解析输入“1 2 3 4”如下：

```
(PLUS (PLUS (PLUS  1  2)  3)  4) 
```

我的问题是如何使用“模板”或文件“.stg”来获取输出

```
1+2+3+4 
```

**错误**的字符串模板规则

```
expr  :^(plus  a=multi  b=NUM )    ->template(f1={$a.st},f2={$b.st})"<f1>+<f2>" 
```

谢谢你，巴特基尔斯！！！

# mysql - 如何找出mysql中的默认服务器字符集？

> ID：12327399
> 
> 赞同：8
> 
> 时间：2012-09-08T01:49:18.943
> 
> 标签：mysql, character-encoding, freebsd

在 FreeBSD 8.2 上使用 MySQL。如何找出默认的服务器字符集？是否有一些我可以运行的命令或我可以检查的文件？

**更新**

其实我想知道如何找到**默认**服务器字符集*和*当前**服务器**字符集。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T01:50:55.257

如[服务器字符集和排序规则](http://dev.mysql.com/doc/en/charset-server.html)中所述：

> 最初，服务器字符集和排序规则取决于您在启动时使用的选项[*`mysqld`*](http://dev.mysql.com/doc/en/mysqld.html)。可以[`--character-set-server`](http://dev.mysql.com/doc/en/server-options.html#option_mysqld_character-set-server)用于字符集。连同它，您可以添加[`--collation-server`](http://dev.mysql.com/doc/en/server-options.html#option_mysqld_collation-server)排序规则。如果不指定字符集，则与说[`--character-set-server=latin1`](http://dev.mysql.com/doc/en/server-options.html#option_mysqld_character-set-server).

因此，默认服务器字符集是 Windows-1252，MySQL 调用它`latin1`，除非您的 MySQL 副本已使用其他默认值编译。

手册接着说：

> [**`character_set_server`**](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_character_set_server)当前的服务器字符集和排序规则可以根据[**`collation_server`**](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_collation_server)系统变量的值来确定。这些变量可以在运行时更改。

因此，要发现当前使用的服务器字符集：

```
SHOW VARIABLES LIKE 'character_set_server' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-13T23:08:01.770

根据[文档](http://dev.mysql.com/doc/refman/5.1/en/charset-connection.html)。这就是你需要的：

```
SHOW VARIABLES LIKE 'character_set%';
SHOW VARIABLES LIKE 'collation%'; 
```

甚至更好：

```
SHOW VARIABLES LIKE 'c%'; 
```

# tfs - 在 TFS2012 中再次合并之前是否必须签入？

> ID：12327400
> 
> 赞同：0
> 
> 时间：2012-09-08T01:49:24.413
> 
> 标签：tfs

我正在使用 Team Foundation Server 2012，但我真的不明白刚刚发生了什么。

```
--> DEV -> MAIN 

             |-> REL X

                     |-> FIX 
```

我做了很多更改，并从 FIX 到 REL。在 REL 上签入时，我发现有些地方不对劲，所以我在 FIX 中对其进行了修复并再次合并。然后我想检查 REL，但没有变化。我不得不再次进入文件并更改任意间隔以获取我的挂起签入并再次合并。

# ios - iOS 是否通过 HTTP 代理发送 HTTPS 请求？

> ID：12327401
> 
> 赞同：3
> 
> 时间：2012-09-08T01:49:42.340
> 
> 标签：ios, http, node.js, https, http-proxy

我正在尝试在 node.js 中编写一个 HTTP 代理服务器，并且我已经成功地设法通过它路由不安全的 HTTP 连接。但是，当应用程序（在我的 iOS 设备上）对 API 使用 HTTPS 时，它总是会引发错误，并且尝试的 HTTPS 连接永远不会到达服务器。因此，对于可能发生的事情有一些解释：

*   出于安全原因，iOS 选择不通过代理发送 HTTPS 连接
*   iOS 在不同端口上的服务器上寻找 HTTPS 连接，但找不到

基本上我要问的是：配置 HTTP 代理后，iOS 对 HTTPS 连接做了什么？

请在评论中询问任何细节或进一步的问题。谢谢。

# ssh - 在 Mac Automator 服务中使用 ssh 时遇到问题

> ID：12327402
> 
> 赞同：0
> 
> 时间：2012-09-08T01:49:53.353
> 
> 标签：ssh, applescript, automator

我正在尝试创建一个运行 Applescript 的 Automator 服务，该 Applescript 最终运行一个 bash 脚本以 ssh/scp 到服务器：

--

我有这个applescript，它保存我当前的photoshop文档并调用一个bash脚本来将图像scp到服务器。然后 bash 脚本运行 ssh 以使用图像在所述服务器上执行一些操作。

我有一个 ssh-askpass 文件，它似乎在大多数情况下都能正常工作。我什至尝试重新安装它以确保我没有弄错权限，但它似乎状态良好。

如果我只是通过 Applescript Editor 运行 applescript，它可以正常工作并通过 ssh-askpass。

我想创建一个 Automator 操作（使用“服务”模板）来运行我的 applescript，所以我可以把它变成一个键盘快捷键。

如果我只是在 Automator 中运行脚本，一切正常。不幸的是，当我尝试在 automator 外部使用该服务（即 App Menu > Services）时，似乎我的 Automator 操作根本没有尝试通过 ssh-askpass（我通过临时日志记录验证了这一点） - 一切正常那一点。

我对其进行了更多研究，当我尝试从终端（而不是 Applescript 编辑器）运行 applescript 时，似乎出现了类似的问题

--

我需要做些不同的事情来确保applescript（在Automator中）使用ssh-askpass吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:28:44.633

我发现了这个问题。在我调用的 bash 脚本中，我正在导出 SSH_ASKPASS 路径，但不是显示：

出口显示=“：0”

显然 AppleScript 编辑器（以及 XCode 和 Automator）会为您执行导出操作，这就是它在这些情况下工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:25:54.523

如果您可以控制服务器上的帐户（例如 shell 帐户），我只需生成一个 SSH 密钥对并将其用于身份验证。这样，您就可以真正实现交易自动化，而完全无需处理`ssh-askpass`。

有关制作和部署 SSH 密钥的指南，请参阅[http://paulkeck.com/ssh/](http://paulkeck.com/ssh/)。

# performance - 建立索引后磁盘/数据读取增加

> ID：12327406
> 
> 赞同：0
> 
> 时间：2012-09-08T01:50:53.717
> 
> 标签：performance, oracle, indexing, execution-time

我有一个运行非常快的小查询。不知何故，我认为向未索引的列添加索引会使其更快，但结果并非如此。事实上，它确实增加了我的磁盘读取和执行时间。我想问的是有人可以向我解释有关索引如何工作以及为什么它会降低而不是提高性能的详细信息。

提前致谢！

PS：我的 RDBMS：甲骨文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:58:59.937

完全可以放在一张小桌子上。如果表真的很小，则可以通过一次读取将表完全读入内存，并且可以完全在内存中执行全表扫描。在此处添加索引需要读取至少一个索引页，然后读取数据页，以使 I/O 增加一倍。这是一个不寻常的案例，但并非闻所未闻。

然而，这只是我的猜测。要真正找出正在发生的事情，请在打开索引的情况下获取查询的执行计划，删除索引，然后在没有索引的情况下获取执行计划。比较计划，并决定是否要重新添加索引。

分享和享受。

# assembly - x86指令含义

> ID：12327408
> 
> 赞同：2
> 
> 时间：2012-09-08T01:50:56.310
> 
> 标签：assembly, x86, att, addressing-mode

我现在正在 gdb 上运行一些代码，但我不知道这两条指令实际上是做什么的。如果有人可以帮助我，我将不胜感激。

```
add  -0x2c(%ebp, %ebx, 4), %eax
cmp  %eax, -0x28(%ebp, %ebx, 4) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T02:03:49.317

当您使用 Intel 语法而不是 AT&T 语法编写 x86 程序集时，它通常更容易理解。

在英特尔语法中，它将是：

```
add eax,[ebp+4*ebx-0x2C]
cmp [ebp+4*ebx-0x28],eax 
```

第一条指令 ( `add`) 将存储在内存地址中的 word`[ebp+4*ebx-0x2C]`的值与 的值`eax`相加，并将总和存储在 中`eax`。

第二条指令 ( `cmp`)通过从存储在内存地址 中的字的值中减去 的值来进行比较`eax`，并相应地设置标志 ( , , , , , )，但不会将结果保存在任何地方。与 完全相同，唯一的区别是结果中被保存，而不是。`[ebp+4*ebx-0x28]``eax``[ebp+4*ebx-0x28]``OF``SF``ZF``AF``PF``CF``cmp``sub``sub``cmp`

比较类型通常以条件跳转的形式创建。在 x86 汇编中有很多条件跳转，它们是否分支取决于标志的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:03:29.933

那是 AT&T 汇编语法。这些寻址模式看起来有点奇怪，但在伪代码中，它们的意思是：

```
eax = *(ebp + ebx*4 - 0x2c) 
```

和

```
compare eax to *(ebp + ebx*4 - 0x28) 
```

这是一个[完整解释](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax#Address_operand_syntax)的链接。

# java - 按字典顺序对字符串中的单词进行排序

> ID：12327409
> 
> 赞同：0
> 
> 时间：2012-09-08T01:51:31.083
> 
> 标签：java, string, word

我需要用户输入一个字符串并按字典顺序返回第一个单词。我正在考虑使用字符串比较功能，但我将整行作为单个字符串。例如，我有一个`String`包含`"4 WAIT WHAT IS THIS"`; 输出将是`"IS"`，因为它是字典上最小的单词。如何从字符串中提取一个单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:53:52.220

由于这是家庭作业，我将为您提供一般方法。您需要分析字符串，可能通过将其拆分为单独的单词，并找到每个单词的长度。

当然，您可能可以使用“排序”来执行此操作 - 通过将每个单词及其大小存储为具有自定义比较器的集合的一部分。但是，为了您的分配，最好建议您简单地将其作为循环的一部分运行 - 跟踪最小大小，然后比较每个后续单词并查看是否找到新的最小大小，然后返回发现的最小的。

# objective-c - NSMutableArray 获取 [__NSCFString 计数]：无法识别的选择器发送到实例

> ID：12327411
> 
> 赞同：1
> 
> 时间：2012-09-08T01:51:44.460
> 
> 标签：objective-c, ios, xcode, uitableview, nsmutablearray

我真的需要一些帮助...

当我尝试使用 NSMutableArray 获取部分的单元格数时，我得到 [__NSCFString count]: unrecognized selector sent to instance 0x6d567e0

当我使用“rows = [[searchProfile objectAtIndex:section] count];”时会发生这种情况

这是代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"1");
    // _________ Return the number of sections ________
    int sections =  0;

    if (tableView == self.tableView)
    {
        sections = 2;
    }
    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        sections = [searchedProfile count];
    }
    return sections;
}

/* ------------------------------------------ Set The Number Of Cells for Each Section ------------------------------- */

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"2");

    // _________  Return the number of rows in the section. ________
    int rows = 0;

    if (tableView == self.tableView)
    {
        if (section == 0) {
            rows = userProfile.count;}
        else {
            rows = profiles.count;}
    }

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        rows = [[searchedProfile objectAtIndex:section]count];
    }
    return rows;
} 
```

以及将字符串插入“searchedProfile”数组的方法：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    searchedKeys = [NSMutableArray array];
    searchedProfile = [NSMutableArray array];
    searchedData = [NSMutableDictionary dictionary];

    [searchedProfile removeAllObjects];
    [searchedData removeAllObjects];
    [searchedKeys removeAllObjects];

        NSDictionary *profile;

        for (profile in profiles)
        {
            NSString *birthname;
            NSString *currentname;
            NSString *photopath;
            NSDate *birthdate;

            for (birthname in profile)
            {
                birthname = [profile objectForKey:@"birthname"];
                currentname = [profile objectForKey:@"currentname"];
                photopath = [profile objectForKey:@"profilepic"];
                birthdate = [profile objectForKey:@"birthdate"];
                NSRange nameRange = [birthname rangeOfString:searchString options:NSCaseInsensitiveSearch];

                if (nameRange.location != NSNotFound)
                {
                    [searchedProfile addObject:birthname];
                    [searchedData setObject:birthname forKey:@"birthname"];
                    [searchedData setObject:currentname forKey:@"currentname"];
                    [searchedData setObject:photopath forKey:@"profilepic"];
                    [searchedData setObject:birthdate forKey:@"birthdate"];
                    if ([birthname isEqualToString:[profile objectForKey:@"birthname"]])
                        break;
                }
            }
        }
    NSLog(@"SEARCHED PROFILES: %@", searchedProfile);
    NSLog(@"SEARCHED DATA:%@", searchedData);
    NSLog(@"SEARCHED KEYS:%@", searchedKeys);
    NSLog(@"count test: %d", searchedProfile.count);
    return YES;
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T01:56:42.530

看起来您在`count`NSString 上使用 NSArray 的方法，这是不允许的。您将 NSStrings 存储在数组`searchedProfile`中，看起来您想找出字符串的长度。所以代替这个：

```
 rows = [[searchedProfile objectAtIndex:section] count]; 
```

做这个：

```
 rows = [[searchedProfile objectAtIndex:section] length]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:07:50.143

**[searchedProfile objectAtIndex:section]**将返回字符串，因为 searchedProfile 中的对象是字符串，因为这是您之前添加对象的方式

```
 [searchedProfile addObject:birthname]; 
```

并且**count**不是为 NSString 定义的属性。无论如何，您似乎想返回对象数（即存储在 searchedProfile 数组中的出生姓名数）作为表中的行数，试试这个

```
rows = [searchedProfile count]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T03:58:00.427

通过执行以下操作保留“searchedProfile”数组：searchedProfile = [[NSArray array] retain];

# iphone - css 100% 宽度 iphone

> ID：12327412
> 
> 赞同：0
> 
> 时间：2012-09-08T01:51:57.917
> 
> 标签：iphone, css, responsive-design

我在这个网站上的响应式设计很艰难。不知道发生了什么，结果我的代码变成了废话，这是一个修改后的 zurb 基础网格，但是客户想要左导航。一旦设计由于某种原因下降到 iphone，顶部元素（徽标、菜单）的宽度就会有一些边距、填充或只有大约 80% 的宽度。见[http://eseamedia.com/lm](http://eseamedia.com/lm)

```
@media only screen and (max-width: 767px) { 

.menu {
    background: none;
    padding: 0;
    margin: 0;
    height: auto;
    max-width: 100%;
    min-width: 100%;
    position: relative;
    display: table;
    float: none; }

.menu nav {
    height: auto;
    margin :0 auto 26px auto;
    width: 100% }

.menu ul li a {
    margin: 0 auto;
    width: 100%;
    display: block;
    text-align:center; }

.logo {
    background-position: center center;
    background-color: transparent;
    margin 0;
    height: 104px;
    width: 321px;
    padding: 0 }

.info {
    position:relative }

.headline{
    margin:0;
    position:relative;
    padding:0;}

.context, .wrap {
    margin:0;
    left:0;}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T05:42:14.547

使用元标记

```
<meta name="viewport" content="width=device-width, maximum-scale=1.0" /> 
```

# algorithm - 算法 - 最小化方程

> ID：12327413
> 
> 赞同：0
> 
> 时间：2012-09-08T01:52:05.390
> 
> 标签：algorithm, dynamic, greedy

如果给定一个方程，例如 3x + 2y <= 10，我们希望找到 x 和 y 的值，使得 x + y = 最大值和 10 - 3x - 2y 最小化。如何才能做到这一点？我认为它是一个动态编程问题！但不确定我是否正确。

在上面的 x = 0 和 y = 5 将是答案。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T01:59:20.897

关于这个问题有大量的数学文献。如果方程都是线性的，那么答案，如果有一个唯一的，则必须位于由约束描述的多面体的一个顶点上。查找[线性规划。](http://en.wikipedia.org/wiki/Linear_programming)单纯形算法是沿着多面体边缘搜索以找到满足最小化的顶点的经典方法。

# windows - Windows：在 cmd 中重命名文件

> ID：12327417
> 
> 赞同：0
> 
> 时间：2012-09-08T01:53:00.370
> 
> 标签：windows, image, batch-file, cmd

我正在尝试编写一个脚本来执行以下操作，但我没有 Windows 编码经验。

我正在努力实现以下目标：

我有一个包含多个图像的文件夹，我想用这样的序列重命名它

`2012.000.value`

如果值是我希望它能够在脚本运行之前输入一个值，并且第一个图像将是该数字，然后它将计数重命名具有该值的图像文件夹。

有些图像可能有一个名为的文件名`Original`，我想保留该值，但也将上述序列插入文件名。

图像将是`.jpg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:38:57.100

```
@echo off
setlocal enabledelayedexpansion
set count=0
for /d %%x in (%date:~-4%.000.???) do (
  for /f "tokens=3 delims=." %%y in ("%%x") do (
    set count=%%y
    for %%z in (%%x\*.jpg) do (
      ren %%~dpnxz !count!.jpg
      set /a count=count+1
    )
  )
)
endlocal 
```

上面的代码假定目录格式为`%CurrentYear%.000.???`. 如果您想要多年，您将需要不同的代码。

**编辑：**此代码不会输出`000.jpg`or `001.jpg`，它将输出`0.jpg`or `1.jpg`。底部的代码将处理这个问题。

此外，它将完全删除原始文件名，`###.jpg`并且可以使用任何值。如果您希望像这样保留原始文件名，请将行`#-FileName.jpg`更改`ren`为：

```
 ren %%~dpnxz !count!-%%~nz.jpg 
```

代码不会对文件进行排序，但会按照创建它们的顺序处理它们。如果您希望它们按字母顺序排列，则将该`for %%z in (%%x\*.jpg) do (`行更改为：

```
 for /f "tokens=*" %%z in ('dir /o:n %%x\*.jpg') do ( 
```

* * *

**编辑：**此代码将输出长度一致的数字，受用户输入限制。

要使用此代码，您需要向它传递您希望最大数量为多少个字符。所以...

```
IMG 2 
```

...可以将文件重命名`00.jpg`为`99.jpg`和...

```
IMG 4 
```

...可以将文件从 重命名`0000.jpg`为`9999.jpg`.

`IMG.BAT`

```
@echo off
setlocal enabledelayedexpansion
:: Set how many characters the number can be. IE 00 = 2, 0000 = 4
set places=%1
set count=0
set zeros=
for /l %%x in (1,1,%places%) do set zeros=!zeros!0
for /d %%x in (%date:~-4%.000.???) do (
  for /f "tokens=3 delims=." %%y in ("%%x") do (
    set count=%%y
    for %%z in (%%x\*.jpg) do (
      :: Make give !count! leading 0's if nessicary
      set count=%zeros%!count!
      :: Trim !count! down to a 4 digit number
      set count=!count:~-%places%!
      ren %%~dpnxz !count!.jpg

      :: Trim ALL 0's on the left to avoid calculation problems.
      set /a n=places-1
      for /l %%a in (0,1,!places!) do if "!count:~0,1!"=="0" set count=!count:~1!
      set /a count=count+1
    )
  )
)
endlocal 
```

我更喜欢这种方法，因为 Windows 资源管理器通常按字母顺序对文件进行排序，所以这将是`1.jpg` `2.jpg` `3.jpg` `10.jpg` `20.jpg`

```
1.jpg
10.jpg
2.jpg
20.jpg
3.jpg 
```

但是，如果这些数字固定在 3 个字符宽度并带有前导 0，则它们的字母顺序将是：

```
001.jpg
002.jpg
003.jpg
010.jpg
020.jpg 
```

# php - Imagick 调整大小、居中和稀疏填充问题

> ID：12327423
> 
> 赞同：3
> 
> 时间：2012-09-08T01:53:58.647
> 
> 标签：php, resize, imagemagick, center, imagick

我的最终目标是将输入图像的大小调整为 100 像素宽、125 像素高。一些输入图像是不同的纵横比，所以我希望它们在一个 100x125 的容器中，背景稀疏地从它们的边缘颜色填充。

好的，所以这适用于基本调整大小：

```
$image = new Imagick($imgFile);
$image->resizeImage(100,0, Imagick::FILTER_LANCZOS, 1, false);
$image->writeImage("$Dir/$game.png");
header("Content-type: ".$image->getImageFormat());
echo $image;
$image->clear();
$image->destroy(); 
```

但是，我已经搜索了几个小时，但我找不到 PHP 的 Imagick 库的简单“这就是您在画布中居中图像的方式”位。一切都是为了实际的 ImageMagick 转换应用程序，这并不是我真正想要的。我已经尝试将调整大小的图像合成到具有设置宽度和高度的空 newImage 中，但无论合成类型如何，它似乎都会覆盖尺寸，将重力设置为中心，然后将范围设置为 100x125 没有效果（它总是位于 0,0，并尝试将 y 偏移量设置为 ((125-imageheight)/2) 导致偏移量超过应有的值）

编辑：

```
 $imageOutput = new Imagick();
    $image = new Imagick($imgFile);
    $image->resizeImage(100,0, Imagick::FILTER_LANCZOS, 1, false);
    $imageOutput->newImage(100, 125, new ImagickPixel('black'));
    $imageOutput->compositeImage($image, Imagick::COMPOSITE_ADD, 0, ((125 - $image->getImageHeight()))/2 );
    $imageOutput->setImageFormat('png');
    $imageOutput->writeImage("$Dir/$game.png");
    header("Content-type: ".$imageOutput->getImageFormat());
    echo $imageOutput;
    $image->clear();
    $image->destroy(); 
```

所以我开始了定心工作，重力显然对实际图像没有影响。

我完全不知道我什至会从哪里开始尝试使用库重新创建命令行边缘稀疏填充 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T16:32:53.897

我最终使用了 Imagick 和 shell 调用的组合来转换自身，我最终将重写它以完全使用 shell 调用。我还更改了尺寸，这是代码：

```
 $imageOutput = new Imagick(); // This will hold the resized image
    $image = new Imagick($imgFile); // Open image file
    $image->resizeImage(120,0, Imagick::FILTER_LANCZOS, 1, false); // Resize it width-wise
    $imageOutput->newImage(120, 150, "none"); // Make the container with transparency
    $imageOutput->compositeImage($image, Imagick::COMPOSITE_ADD, 0, ((150 - $image->getImageHeight())/2) ); // Center the resized image inside of the container
    $imageOutput->setImageFormat('png'); // Set the format to maintain transparency
    $imageOutput->writeImage("$Dir/$game.temp.png"); // Write it to disk
    $image->clear(); //cleanup -v
    $image->destroy(); 
    $imageOutput->clear();
    $imageOutput->destroy();
    //Now the real fun
    $edge = shell_exec("convert $Dir/$game.temp.png -channel A -morphology EdgeIn Diamond $Dir/$game.temp.edge.png"); // Get the edges of the box, create an image from just that
    $shepards = shell_exec("convert $Dir/$game.temp.edge.png txt:- | sed '1d; / 0) /d; s/:.* /,/;'"); // get the pixel coordinates
    $final = shell_exec("convert $Dir/$game.temp.edge.png -alpha off -sparse-color shepards '$shepards' png:- | convert png:- $Dir/$game.temp.png -quality 90 -composite $Dir/$game.jpg"); // Sparse fill the entire container using the edge of the other image as shepards , then composite that on top of this new image
    unlink("$Dir/$game.temp.png"); // cleanup temp files
    unlink("$Dir/$game.temp.edge.png");
    set_header_and_serve("$Dir/$game.jpg"); // serve the newly created file 
```

# haskell - Reactive Banana 的 mapAccum 函数是如何工作的？

> ID：12327424
> 
> 赞同：6
> 
> 时间：2012-09-08T01:54:06.573
> 
> 标签：haskell, reactive-banana

我在 Stack Overflow 上查看了许多问题的答案，试图找到解决我在使用 Reactive Banana 库时遇到的问题的方法。所有的答案都使用了一些我不太理解的“mapAccum”*魔法。*查看 API 文档，我发现只有“ `accumE`and的有效组合`accumB`”。这不是很有帮助。

似乎这个函数可以用来比较`Behavior`两个连续事件时 a 的值，这是我想做的。但我不清楚如何使这项工作。

具体是如何`mapAccum`工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T11:25:49.947

该`mapAccum`函数与标准 Data.List 模块中的函数非常相似[`mapAccumL`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Data-List.html#g:7)，因此得名。Hackage 的文档还包括一个[指向`mapAccum`](http://hackage.haskell.org/packages/archive/reactive-banana/0.7.0.1/doc/html/src/Reactive-Banana-Combinators.html#mapAccum). 连同[类型签名](http://hackage.haskell.org/packages/archive/reactive-banana/0.7.0.1/doc/html/Reactive-Banana-Combinators.html#v%3amapAccum)，希望这足以说明这个函数是如何工作的。

再说一次，我可以改进文档。:-) 但是除了粘贴源代码之外，我还不太清楚如何做到这一点。结果的第二部分很容易用以下等式描述

```
snd . mapAccum acc = accumB acc . fmap (. snd) 
```

但是第一部分没有这么好的等式。

我可以用文字来描述：

> 该函数通过应用 type 的第二个参数中包含的函数来`mapAccum`累积 type 的状态。该函数返回一个事件，其发生是值和跟踪累积状态的行为。换句话说，这是一台 Mealy 机器或状态自动机。`acc``Event t (acc -> (x,acc))``x``acc`

但我不确定这些话是否真的有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T17:13:17.723

请注意

```
mapAccum :: acc -> Event t (acc -> (x, acc)) -> (Event t x, Behavior t acc) 
```

所以它需要一个初始值`:: acc`来累积，以及一个事件，它产生一个函数，在产生输出值的同时更新累积值`::x`。（通常你会通过部分应用一些函数来创建这样的事件`<$>`。）结果你会得到一个新的事件，它会在你的`x`值出现时触发你的值，以及一个包含你当前累积值的行为。

如果`mapAccum`您有一个事件并且您想要做出相关的行为和事件，请使用它。

例如，在您[的其他问题](https://stackoverflow.com/questions/12327517/doing-some-basic-calculus-using-reactive-banana)的问题域中，假设您有一个`eTime :: Event t Int`异常触发的事件，并且您想计算`eDeltaTime :: Event t Int`差异和`bTimeAgain :: Behaviour t Int` 当前使用的时间：

```
type Time = Int
type DeltaTime = Time 

getDelta :: Time -> Time -> (DeltaTime,Time)
getDelta new old = (new-old,new) 
```

我本可以这样写`getDelta new = \old -> (new-old,new)`以使下一步更清晰：

```
deltaMaker :: Event t (Time -> (DeltaTime,Time))
deltaMaker = getDelta <$> eTime

(eDeltaT,bTimeAgain) = mapAccum 0 $ deltaMaker 
```

在这种情况下，`bTimeAgain`将是与 中的事件具有相同值的行为`eTime`。发生这种情况是因为我的`getDelta`函数`new`直接通过未更改的 from`eTime`到`acc`值。（如果我`bTimeAgain`自己想要，我会使用`stepper :: a -> Event t a -> Behaviour t a`。）如果我不需要`bTimeAgain`，我可以只写`(eDeltaT,_) = mapAccum 0 $ deltaMaker`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T02:27:26.367

**注意**：我正在使用答案，所以我可以编写格式化代码

这是我记录该功能的尝试：

* * *

```
mapAccum ::                  acc -- Initial Accumulation Value
  ->   Event t (acc -> (x, acc)) -- Event stream that of functions that use the previous
                                 -- accumulation value to:
                                 -- a) produce a new resulting event (x) and,
                                 -- b) updates the accumulated value (acc)
  -> (Event t x, Behavior t acc) -- fst) a stream of events from of a) above
                                 -- snd) a behavior holding the accumulated values b) above 
```

该功能`mapAccumL`与`Data.List`模块中的功能类似。它是 和 的有效`accumE`组合`accumB`。结果`Behavior`对于保存可能需要计算事件流的值 (x) 的先前事件的历史记录非常有用。

**示例**：计算最后 5 个事件的滚动平均值

```
rolingAverage :: forall t. Frameworks t => Event t Double -> Event t Double
rolingAverage inputStream = outputStream
  where
    funct x xs = (sum role / 5, role) where role = (x:init xs)
    functEvent = funct <$> inputStream -- NB: curries the first parameter in funct
    (outputStream,_) = mapAccum [0,0,0,0,0] functEvent 
```

# cloudbees - 无需身份验证即可访问 Cloudbees Jenkins URL

> ID：12327426
> 
> 赞同：1
> 
> 时间：2012-09-08T01:55:41.087
> 
> 标签：cloudbees

我有一个监控 CI 作业的应用程序，并且我已将 jenkins 安装添加到我的帐户中。通常，此应用程序在我工作的公司内部，但我们的 jenkins 服务器无法在 LAN 外部访问。

要查找构建的状态，我使用 python urllib.urlopen

```
http://hostname/job/job_name/lastBuild/api/json 
```

然后解析json结果

尝试连接到[https://webiken.ci.cloudbees.com](https://webiken.ci.cloudbees.com)时，我收到 HTTPError，因为 URL 需要身份验证。无论如何将我的詹金斯配置为公开？

谢谢，

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:26:51.840

您可以使用带有 cloudbees 凭据的 HTTP Basic 身份验证来访问 API：

卷曲[https://webiken.ci.cloudbees.com/job/](https://webiken.ci.cloudbees.com/job/) /api/json --user ndeloof@cloudbees.com:

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T14:20:33.127

另请参阅此[wiki 页面](http://developer.cloudbees.com/bin/view/DEV/AnonymousAccess)，了解如何公开您的 Jenkins 实例。

# wpf - XAML 将属性绑定到 ContentPresenter 中的 UserControl

> ID：12327429
> 
> 赞同：0
> 
> 时间：2012-09-08T01:56:18.473
> 
> 标签：wpf, xaml, user-controls, datatemplate, contentpresenter

我有名为 EditorView 的 UserControl，它根据其内容显示不同的“编辑器”（其他用户控件）。

这是 EditorView 只是为了测试我用 TextBlock 替换 FontEditor 的绑定：

```
<UserControl x:Class="TrikeEditor.UserInterface.EditorView" ...>

    <UserControl.Resources>
        <DataTemplate DataType="{x:Type te_texture:Texture}">
            <teuied:TextureEditor TextureName="{Binding Path=Name}"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type te_font:Font}">
            <!--<teuied:FontEditor/>-->
            <TextBlock Text="{Binding Path=Name}"/>
        </DataTemplate>
    </UserControl.Resources>

    <UserControl.Template>
        <ControlTemplate TargetType="{x:Type UserControl}">
            <ContentPresenter Content="{TemplateBinding Content}" x:Name="EditorPresenter"/>
        </ControlTemplate>
    </UserControl.Template>

</UserControl> 
```

根据 EditorView.Content 选择正确的模板，在 TextBlock 的情况下，绑定按需要工作，但在 TextureEditor 的情况下，TextureName 属性不是。

这是 TextureEditor 的片段：

```
public partial class TextureEditor : UserControl
{
    public static readonly DependencyProperty TextureNameProperty = DependencyProperty.Register("TextureName", typeof(string), typeof(TextureEditor));
    public string TextureName
    {
        get { return (string)GetValue(TextureNameProperty); }
        set { SetValue(TextureNameProperty, value); }
    }

    public TextureEditor()
    {
        InitializeComponent();
    }
} 
```

自从我使用 UserControl 以来，我有什么特别需要做的吗？也许不同的命名空间是问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:07:39.210

用户控件不应该影响它；不同之处在于您正在实现自己的依赖属性（而不是在*TextBlock中使用现有的**Text*）。您必须在 Dependency Property *PropertyChanged处理程序中设置**TextureName*属性的值：

 ***```
public static readonly DependencyProperty TextureNameProperty = 
    DependencyProperty.Register("TextureName", typeof(string), typeof(TextureEditor),

    // on property changed delegate: (DependencyObject, DependencyPropertyChangedEventArgs)
    new PropertyMetadata((obj, args) => {

        // update the target property using the new value
        (obj as TextureEditor).TextureName = args.NewValue as string;
    })
); 
```***

# php - preg_match 来自一些 html 代码

> ID：12327436
> 
> 赞同：3
> 
> 时间：2012-09-08T01:57:50.133
> 
> 标签：php, html, regex, parsing, preg-match

我将如何在 php 中编写一个 php preg_match() 来挑选 250 值。我有一大串 html 代码，我想从中挑选 250 个，但我似乎无法正确获取正则表达式。

这是我要匹配的 html 模式 - 请注意，我要提取 250 所在的整数：

`<span class="price-ld">H$250</span>`

我已经尝试了几个小时来做​​到这一点，但我无法让它工作哈哈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:03:00.843

```
preg_match('/<span class="price-ld">H$(\d+)<\/span>/i', $your_html, $matches);
print "Its ".$matches[1]." USD"; 
```

正则表达式实际上取决于您的代码。你到底在哪里寻找？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:39:10.357

这是您正在寻找的正则表达式：

```
(?<=<span class="price-ld">H\$)\d+(?=</span>) 
```

你可以在**[这里](http://regexr.com?32376)**看到结果。

这是解释：

```
Options: case insensitive; ^ and $ match at line breaks

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=<span class="price-ld">H\$)»
    Match the characters “&lt;span class="price-ld">H” literally «<span class="price-ld">H»
    Match the character “$” literally «\$»
Match a single digit 0..9 «\d+»
    Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=</span>)»
    Match the characters “&lt;/span>” literally «span>» 
```

# adsense - 使用 Google 广告加载页面上的隐藏 div 并在元素悬停时显示带有广告的隐藏 div 是否合法？

> ID：12327437
> 
> 赞同：0
> 
> 时间：2012-09-08T01:57:51.780
> 
> 标签：adsense

我有一个带 hidden 的图库`div`，如果您将鼠标悬停在图库上，描述将在右侧滑出以显示图像/视频描述，底部带有 Google 广告。这就像 Mashable 和 Huff 画廊。我的问题是，这合法吗？我是否违反了 Google Adsense 计划的任何 TOS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:34:20.350

这是合法的，你唯一想做的就是在用户将鼠标悬停在 div 上时显示它。如果你在欺骗用户，或者类似的东西，那将是另一回事。

此外，[这是要参考的 TOS](https://www.google.com/adsense/localized-terms)。

# javascript - 颜色框不透明度属性不起作用

> ID：12327439
> 
> 赞同：0
> 
> 时间：2012-09-08T01:58:28.833
> 
> 标签：javascript, jquery, lightbox, colorbox

我正在我正在处理的网站上测试彩盒（灯箱类型）。除了“不透明度”属性外，一切正常。当颜色框打开时，网站背景没有“不透明度”。默认值应该是“0.9”（值在 0 和 1 之间），但即使我手动将不透明度值调用为 0.9，它也不起作用。我检查了加载到页面的原始 colorbox.js，不透明度设置为 0.9，所以我不知道冲突在哪里。我已经在 Chrome、Safari 和 Firefox 上对其进行了测试，但它们都不起作用（我在 Mac 上，所以我无法在 IE 上测试它；如果它在 IE 上不起作用，我会感到震惊）浏览器）。该网站在这里：

[http://miller-media.com/sites/ncfit/index.html](http://miller-media.com/sites/ncfit/index.html)

如果你点击右上角的横幅，上面写着“我们会付钱给你，让你塑形！” 它将打开颜色框。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:18:50.207

问题是它找不到覆盖的背景图像。`background-image`源指向，`http://miller-media.com/sites/ncfit/css/images/overlay.png`但它不存在。

如果你想完全摆脱背景图像，你总是可以设置 a `background-color`of `#000`to `#cboxOverlay`。

# javascript - 使用 onmouseover 将文本超链接更改为图像超链接？

> ID：12327441
> 
> 赞同：1
> 
> 时间：2012-09-08T01:58:50.830
> 
> 标签：javascript, html

请耐心等待我是学习javascript的新手（自学）！我通常只是通过网页浏览自己找到答案，但到目前为止，我还没有找到任何资源来解释如何完成以下任务：

所以，基本上我想做的就是改变这个（HTML）：

```
<a href="link.html"id="speaker"onmouseover="showImage()"onmouseout="goBack()">SPEAKERS</a> 
```

使用 javascript 到图像。

图像与 html 和 js 保存在同一文件夹中。据我所知，这是使用 javascript：

```
function showImage()
 {   
 picture = new Image(100,100);
picture.src = "icon2.png";
document.getElementById("speakers").innerHTML = picture.src;
  }

function goBack()
 {   
 document.getElementById("speakers").innerHTML="SPEAKERS";
 } 
```

为清楚起见，我想做的就是使用“onmouseover”将文本（“SPEAKERS”）更改为图像，同时在此过程中使用相同的超链接。

这似乎是一个非常简单的问题，但我不知道足以确定我想做的事情是否可能。如果不可能，那没关系，我只想知道任何一种方式；P。提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:04:06.783

尝试这样的事情让你开始（不是一个完整的或经过测试的解决方案）：

```
var showImage = function(){
  var picture = document.createElement("img");
  picture.src = "icon2.png";
  picture.href = "link.html";

  var speakers = document.getElementById("speakers");
  speakers.parentNode.replaceChild(speakers, picture);
} 
```

请参阅[https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference)以获得对一些可用 DOM 属性和方法的良好参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:12:58.967

如果您可以使用 jquery，您可以使用`.html()`and`.hover()`

[http://jsfiddle.net/u8fsU/](http://jsfiddle.net/u8fsU/)

# node.js - 用动态/脚本语言构建松散耦合系统的设计模式

> ID：12327447
> 
> 赞同：2
> 
> 时间：2012-09-08T01:59:40.583
> 
> 标签：node.js, architecture, functional-programming, lua, closures

我在使用 Java/C# 构建企业应用程序方面拥有丰富的经验，并且已经习惯了面向对象、静态类型语言的所有陷阱。具体来说，通过使用行业标准工具，我已经非常擅长处理系统复杂性：

*   接口/抽象类型
*   对象构成
*   依赖倒置

我被要求使用动态的函数式语言 (Lua) 设计一个相当复杂的后端消息处理系统。函数式语言如今风靡一时（NodeJs、JavaScript 等），所以我很高兴借此机会加入上述潮流。

任何人都可以推荐一个示例应用程序或架构，我可以使用它来学习使用诸如一流函数、闭包、currying 来构建一个复杂的、松散耦合的系统吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:41:05.400

我已经对“设计模式”进行了相当多的研究，这些“设计模式”可以应用于具有一流功能支持的动态语言，这是我的发现。

柯里化 == 依赖注入。Currying 允许您获取一个函数并将其重新打包为一个新函数，其中一个或多个参数值已经分配。这与 IoC 容器实例化一个类“引导”非常相似，该类具有所有依赖项并准备好供客户端使用。

第一类函数 == 命令模式。由于第一类函数可以传递类似的值，因此您基本上可以免费获得命令模式，而且没有开销。

**参考：**

[第一类函数 == 命令模式](https://stackoverflow.com/questions/327955/does-functional-programming-replace-gof-design-patterns)

[通过 Currying 进行函数依赖注入](http://mikehadlow.blogspot.com/2010/03/functional-dependency-injection.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T01:21:15.323

I will suggest looking on the libs/frameworks below, they are really well designed, keep in mind that javascript and lua are very similar, just replace objects with tables add coroutines and "nice" syntax and you have Lua.

### Lua

*   [Luvit](https://github.com/luvit/luvit/tree/master/lib/luvit) node.js in Lua.

### node.js

*   [Express](https://github.com/visionmedia/express) micro web framework.
*   [Mocha](https://github.com/visionmedia/mocha) Unit testing framework.

# php - 如何制作将通过电子邮件发送图像（来自用户上传）的提交 php？

> ID：12327448
> 
> 赞同：-1
> 
> 时间：2012-09-08T02:00:25.123
> 
> 标签：php, image, send, mailer

我需要帮助生成电子邮件表格，我会尝试很多，但没有一个匹配我需要。我有一个从 Bell Online Mailer 获得的表格，但是这个脚本不允许发送图像......所以我修改了一些表格代码，现在我已经有了一个上传表格。现在我必须添加什么样的函数或php才能在表单消息中正确显示为图像（未附加）..这是代码

```
 <?php
    /* 
        BELLonline PHP MAILER SCRIPT v1.5
        Copyright 2006 Gavin Bell 
        http://www.bellonline.co.uk 
        gavin@bellonline.co.uk

        Set up an email form on your website within minutes - see readme.txt for installation.
    */

    extract($_POST);

    if (!file_exists("config.php")) 
        {
    $host = $_SERVER[HTTP_HOST ];

$path = pathinfo($_SERVER['PHP_SELF']); $file_path = $path['dirname']; print "<h1>BELLonline PHP mailer script</h1>     <h2>There is a problem with your PHP mailer script installation</h2>    <p>The config.php file seems to be missing!</p>     <p>For this script to work, you need to upload the config.php file that came with the download of the BELLonline <a href=\"http://bellonline.co.uk/downloads/php-mailer-script/\">PHP mailer script</a>.</p>    <p>The file must be in the following directory of your website:</p>     <p>$host<span style=\"font-weight: bold; font-size: 150%;\">$file_path/</span></p>  <p>If you need help installing the script, then feel free to email me at <a href=\"&#x6d;&#x61;&#105;&#108;&#116;&#x6f;&#58;&#x67;&#x61;&#118;&#x69;&#110;&#64;&#98;&#x65;&#x6c;&#x6c;&#x6f;&#110;&#x6c;&#105;&#110;&#101;&#46;&#x63;&#111;&#46;&#x75;&#x6b;\">&#x67;&#x61;&#118;&#x69;&#110;&#64;&#98;&#x65;&#x6c;&#x6c;&#x6f;&#110;&#x6c;&#105;&#110;&#101;&#46;&#x63;&#111;&#46;&#x75;&#x6b;</a></p>"; exit;     } include "config.php";

if ($sendto_email == "changeme@example.com")    { print "<h1>BELLonline PHP mailer script</h1>  <h2>Installation nearly complete!</h2>  <p>Thank you for downloading the <a href=\"http://bellonline.co.uk/downloads/php-mailer-script/\" title=\"free PHP mailer script\">free PHP mailer script</a> from <a href=\"http://www.bellonline.co.uk\">BELLonline web services</a>. </p>    <p>To start using the script, open config.php in a text editor and change the <b>&#36;sendto_email</b> variable to your email address.</p>  <p>If you did not get a config.php file with this script, then go to the <a href=\"http://bellonline.co.uk/downloads/php-mailer-script/\">PHP mailer script page</a> and download the full script.</p>  <p>If you need help installing the script, then feel free to email me at <a href=\"&#x6d;&#x61;&#105;&#108;&#116;&#x6f;&#58;&#x67;&#x61;&#118;&#x69;&#110;&#64;&#98;&#x65;&#x6c;&#x6c;&#x6f;&#110;&#x6c;&#105;&#110;&#101;&#46;&#x63;&#111;&#46;&#x75;&#x6b;\">&#x67;&#x61;&#118;&#x69;&#110;&#64;&#98;&#x65;&#x6c;&#x6c;&#x6f;&#110;&#x6c;&#105;&#110;&#101;&#46;&#x63;&#111;&#46;&#x75;&#x6b;</a></p>"; exit;     }  if (empty ($senders_name))   {   $error = "1";   $info_error .= $lang_noname . "<br>";   } if (empty ($senders_email))   {   $error
= "1";  $info_error .= $lang_noemail . "<br>";      } if (empty ($mail_subject))    {   $error = "1";   $info_error .= $lang_nosubject . "<br>";    } if (empty ($mail_message))    {   $error = "1";   $info_error .= $lang_nomessage . "<br>";    } if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,6}$", $senders_email))  {   $error = "1";   $info_error .= $lang_invalidemail . "<br>";     } if (empty ($security_code))       {   $error = "1";   $info_error .= $lang_nocode . "<br>";       } elseif ($security_code != $randomness)    {   $error = "1";   $info_error .= $lang_wrongcode . "<br>";    } if ($showlink != "no")    {   $link = "<br><span style=\"font-size: 10px;\">Powered by <a href=\"http://bellonline.co.uk/downloads/php-mailer-script/\" title=\"free PHP mailer script\">BELLonline PHP mailer script</a></span>";    } if ($error == "1")    {   $info_notice = "<span style=\"color: " . $error_colour . "; font-weight: bold;\">" . $lang_error . "</span><br>";       if (empty ($submit))        {       $info_error = "";       $info_notice = $lang_notice;        }   

    function Random()       {       $chars = "ABCDEFGHJKLMNPQRSTUVWZYZ23456789";        srand((double)microtime()*1000000);         $i = 0;         $pass = '' ;        while ($i <= 4)             {           $num = rand() % 32;             $tmp = substr($chars, $num, 1);             $pass = $pass . $tmp;           $i++;           }       return $pass;       }   $random_code = Random();    $mail_message = stripslashes($mail_message);

    print "<form name=\"BELLonline_email\" enctype=\"multipart/form-data\" method=\"post\" style=\"margin: 0;\" action=\"\">   <table  border=\"0\" cellspacing=\"2\" cellpadding=\"2\">
    <tr align=\"$title_align\" valign=\"top\">
      <td colspan=\"2\"><span style=\"$title_css\">$lang_title</span></td>
    </tr>
    <tr align=\"left\" valign=\"top\">
      <td colspan=\"2\">$info_notice$info_error</td>
    </tr>
    <tr valign=\"top\">
      <td align=\"right\">$lang_name</td>
      <td align=\"left\"><input name=\"senders_name\" type=\"text\" class=\"mailform_input\" id=\"senders_name\" style=\"width: $input_width;\" value=\"$senders_name\" maxlength=\"32\"></td>
    </tr>
    <tr valign=\"top\">
      <td width=\"100\" align=\"right\">$lang_youremail</td>
      <td align=\"left\"><input name=\"senders_email\" type=\"text\" class=\"mailform_input\" id=\"senders_email\" style=\"width: $input_width;\" value=\"$senders_email\" maxlength=\"64\"></td>
    </tr>
    <tr valign=\"top\">
      <td width=\"100\" align=\"right\">$lang_subject</td>
      <td align=\"left\"><input name=\"mail_subject\" type=\"text\" class=\"mailform_input\" id=\"mail_subject\" style=\"width: $input_width;\" value=\"$mail_subject\" maxlength=\"64\"></td>
    </tr>
    <tr valign=\"top\">
      <td width=\"100\" align=\"right\">$lang_message</td>
      <td align=\"left\"><textarea name=\"mail_message\" cols=\"36\" rows=\"5\" style=\"width: $input_width;\" class=\"mailform_input\">$mail_message</textarea></td>
    </tr>
    <tr valign=\"top\">
      <td width=\"100\" align=\"right\">$lang_image</td>
      <td align=\"left\"><input name=\"mail_image\" size=\"10\" type=\"file\" class=\"mailform_input\" id=\"mail_image\" value=\"$mail_image\" maxlength=\"64\"></td>
    </tr>
    <tr align=\"left\" valign=\"top\">
      <td width=\"100\">$lang_confirmation</td>
      <td><input name=\"security_code\" type=\"text\" id=\"security_code\" size=\"5\"> 
        &nbsp;&nbsp;&nbsp;&nbsp;<b>$random_code</b></td>
    </tr>
    <tr valign=\"top\">
      <td colspan=\"2\" align=\"right\"><input name=\"randomness\" type=\"hidden\" id=\"randomness\" value=\"$random_code\">
      <input name=\"submit\" type=\"submit\" id=\"submit\" value=\"$lang_submit\" class=\"mailform_button\"></td>
    </tr>   </table> </form>";  } else  {

            if ($checkdomain == "yes")          {       $sender_domain = substr($senders_email, (strpos($senders_email, '@')) +1);      $recipient_domain = substr($sendto_email, (strpos($sendto_email, '@')) +1);         if ($sender_domain == $recipient_domain)            {           print "Sorry, you cannot send messages from this domain ($sender_domain)";          exit;           }               }

            $info_notice = $lang_sent;  $mail_message = stripslashes($mail_message);    $mail_image = $_POST['mail_image'];     $content = $mail_image . $mail_message .    '<p> Oleh ' . $senders_name . ', hubungi ' . $senders_email . ' </p>';  $senders_email = preg_replace("/[^a-zA-Z0-9s.@-_]/", "-", $senders_email);  $from = $senders_email;     $senders_name = preg_replace("/[^a-zA-Z0-9s]/", " ", $senders_name);    $headers = "From: $senders_name <$senders_email> \r\n";     $headers .= "X-Mailer: BELLonline.co.uk PHP mailer \r\n";   $result = sendmail($sendto_email, $mail_subject, $content, $from);

    print "  <table  border=\"0\" cellspacing=\"2\" cellpadding=\"2\">
    <tr align=\"$title_align\" valign=\"top\">
      <td colspan=\"2\"><span style=\"$title_css\">$lang_title</span></td>
    </tr>
    <tr align=\"$title_align\" valign=\"top\">
      <td colspan=\"2\">$info_notice</td>
    </tr>
    <tr valign=\"top\">
      <td width=\"100\" align=\"right\">$lang_name</td>
      <td align=\"left\"><b>$senders_name</b></td>
    </tr>
    <tr valign=\"top\">
      <td width=\"100\" align=\"right\">$lang_youremail</td>
      <td align=\"left\"><b>$senders_email</b></td>
    </tr>
    <tr valign=\"top\">
      <td width=\"100\" align=\"right\">$lang_subject</td>
      <td align=\"left\"><b>$mail_subject</b></td>
    </tr>

      <tr valign=\"top\">
          <td width=\"100\" align=\"right\">$lang_message</td>
          <td align=\"left\"><b>$mail_message</b></td>
        </tr>
      </table>";
        }

    //Simple mail function with HTML header
    function sendmail($sendto_email, $mail_subject, $content, $from) {
        $headers = "MIME-Version: 1.0" . "\r\n";
        $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
        $headers .= 'From: ' . $from . "\r\n";

        $result = mail($sendto_email, $mail_subject, $content, $headers);

        if ($result) return 1;
        else return 0;
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:05:58.577

您可以使用 PHP 上传或图像上传器（我目前正在使用[Plupload](http://www.plupload.com)）和[PHP Mailer](http://phpmailer.worxware.com/)发送电子邮件轻松解决它。正如您提到的，不打算将图像作为附件发送，在 PHP Mailer 中，您只需设置一个包含图像的 html 消息。

# c - 指向结构内部数组的指针

> ID：12327450
> 
> 赞同：2
> 
> 时间：2012-09-08T02:00:48.553
> 
> 标签：c, pointers, struct

我正在尝试将一个 int 指针分配给一个 int 数组，它是一个 structre 的成员。该结构是另一个结构的成员，该结构恰好是结构数组。而这个结构数组恰好是另一个结构的成员。最后一个结构恰好是结构数组的一个元素。

```
typedef struct s_ptxRowProperties
{
    int lastPlotValue[134];

} ptxRowProperties;

typedef struct s_ptxRow
{   
    ptxRowProperties PtxRowProperties;

} ptxRow;

typedef struct s_workSpace
{   
    ptxRow PtxRow[100];

} workSpace; 
```

编辑：我像这样分配其中一个庞然大物： WorkSpace[n] = (workSpace *) calloc(1, sizeof(workSpace));

我尝试了以下咒语，但无济于事：

```
int *x= &(WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue)[0];
int *x= (&WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue)[0];
int *x= &(WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties->lastPlotValue)[0];
int *x=   WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue;
int *x= *(WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue);
int *x= (*WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties->lastPlotValue); 
```

我相信假设的 100 年里房间里的百万只猴子会在他们创造出正确的形式之前组成哈姆雷特。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:08:21.027

你可能想要

```
int *x= &(WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue[0]); 
```

这假设`WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue[0]`将引用 int 数组的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:08:15.777

如果`WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue`是您感兴趣的值，则可以`&`用来获取其地址：

```
int *x = &WorkSpace[i]->PtxRow[ptxRowIndex].PtxRowProperties.lastPlotValue; 
```

# database-design - 博客评论的数据库架构

> ID：12327451
> 
> 赞同：3
> 
> 时间：2012-09-08T02:01:05.900
> 
> 标签：database-design, database-schema

我的博客上有一个评论表。

```
comment
- id (PK)
- post_id (FK)
- user_id (FK)
- comment 
```

我应该分成 3 张桌子并这样做吗？

```
comment
- id (PK)
- comment

user_comment
- comment_id (PK, FK)
- user_id (PK, FK)

post_comment
- post_id (PK, FK)
- comment_id (PK, FK) 
```

这会是一个更好的设计吗？欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T02:17:54.017

你的原创设计是完美的；它模拟实际发生的事情。

此外，最好避免架构膨胀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T02:18:16.903

我认为第一个设计要好得多；据我所知，拆分该表不会增加任何价值，只会强制数据库引擎为每个查询使用一两个额外的连接。

如果您担心性能，您可以在*评论*表上创建索引，以便有效地选择每个用户和每个帖子的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T09:17:04.123

```
create table photo_comments(
    commentID int not null AUTO_INCREMENT PRIMARY KEY,
    userID int not null,
    photoId int not null,
    comment_data varchar(200)
 ) 
```

你不能用这个吗？

# php - 在我的场景中使用 substr 或提供更好的功能

> ID：12327453
> 
> 赞同：0
> 
> 时间：2012-09-08T02:01:49.547
> 
> 标签：php, string, substr

在“-”之前我怎样才能得到第一个值

例如：我有一个字符串，

```
$title = "9283-returns-to-normal-in-1989";
or
$title = "83-returns-to-normal-in-1989";
or
$title = "9283231-returns-to-normal-in-1989"; 
```

我只想获取该字符串中的第一个数值，直到“-”。所以，我只能得到`9283`，`83`或者`9283231`不管它有多少值。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:05:10.723

尝试这个：

```
strstr($title, '-', true); 
```

# java - 更改点中的值

> ID：12327459
> 
> 赞同：0
> 
> 时间：2012-09-08T02:03:57.663
> 
> 标签：java, swing, awt, point

```
Point p1 = new Point(100, 100);
Point p2 = new Point(300, 100);
Point p3 = new Point(110, 100);
int x3 = 310;
Point p4 = new Point(100, 100);
static JFrame start = new JFrame("Start");

if(p3.x >= start.getWidth()-90)
{
    p3.x = (int) (p1.getX()+10);
    p3.setLocation(p3.x, p3.y);
    repaint();
}

if(key == KeyEvent.VK_S && !paused)
{
    p1.y++;
    p4.y++;
    p1.setLocation(p1.x, p1.y);
    test1.setBounds(new Rectangle(p1, new Dimension(64, 64)));
    repaint();
    sound.soundPlay(3);
} 
```

在此，点 p3 的 x 值应该与 p1.getX()+10 的值相同。该值更改为 100+10，但我在第二个块中将 100 更改为不同的值。如何更新第一个块中的 p1 以匹配第二个块中的 p1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:44:28.153

我找到了我的问题的答案。这是我的新代码：

```
Point p1 = new Point(100, 100);
Point p2 = new Point(300, 100);
Point p3 = new Point(110, 100);
Point p5 = new Point(310, 100);
Point p4 = new Point(90, 100);
static JFrame start = new JFrame("Start");

if(p3.x >= start.getWidth()-90)
{
    p3.x = start.getWidth()-70;
    p3.x = (int) (p1.getX()+10);
    p3.setLocation(p3.x, p3.y);
}

if(key == KeyEvent.VK_S && !paintingFBR && !paused)
{
    p1.y++;
    p3.y++;
    test1.setLocation(p1);
    test3.setLocation(p3);
} 
```

# php - 使用 PHP 读取谷歌语音短信

> ID：12327464
> 
> 赞同：0
> 
> 时间：2012-09-08T02:05:05.883
> 
> 标签：php, google-voice

无论如何，我是否可以使用 PHP 网络服务器调用以谷歌语音阅读我的 SMS 收件箱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:10:08.273

有几个包装器，

在 java 中：[http](http://code.google.com/p/google-voice-java/) ://code.google.com/p/google-voice-java/ （也移植到 c#：[http](http://code.google.com/p/sharp-voice/) ://code.google.com/p/sharp-voice/ ），在 python 中：[http： //code.google.com/p/pygooglevoice/](http://code.google.com/p/pygooglevoice/)

我想你可以将其中之一移植到 PHP

# java - 硬币翻转程序

> ID：12327467
> 
> 赞同：4
> 
> 时间：2012-09-08T02:06:23.707
> 
> 标签：java, coin-flipping

我尝试制作一个抛硬币的程序（先显示正面图像，然后显示反面图像），但在运行问题时尝试查看硬币图像时遇到了问题；只会显示一个空白屏幕。我不知道这是由于 jpg 图像的不正确保存方法还是代码中的错误。在再次编码显示头部图像而未显示尾部图像的程序之前，我也遇到了一个错误。

CoinTest.java 运行 coin runner，而 Coin.java 是该程序的类。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CoinTest extends JPanel
implements ActionListener
{
  private Coin coin;

  public CoinTest ()
{
Image heads = (new ImageIcon("quarter-coin-head.jpg")).getImage();
Image tails = (new ImageIcon("Indiana-quarter.jpg")).getImage();
coin = new Coin(heads, tails);

Timer clock = new Timer(2000, this);
clock.start();
}

public void paintComponent(Graphics g)
{
super.paintComponent(g);

int x = getWidth() / 2;
int y = getHeight() / 2;
coin.draw(g, x, y);
}

 public void actionPerformed(ActionEvent e)
   {
    coin.flip();
    repaint();
   }

public static void main(String[] args)
{
JFrame w = new JFrame("Flipping coin");
w.setSize(300, 300);
w.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    CoinTest panel = new CoinTest();
    panel.setBackground(Color.WHITE);
    Container c = w.getContentPane();
    c.add(panel);

    w.setVisible(true);
  }
} 
```

现在是实际的 Coin 类。

```
import java.awt.Image;
import java.awt.Graphics;

public class Coin
{
private Image heads;
private Image tails;
private int side = 1;

public Coin(Image h, Image t)
{
    heads = h;
    tails = t;
}

//flips the coin
public void flip()
{
    if (side == 1)
        side = 0;
    else
        side = 1;
}

//draws the appropriate side of the coin - centered  in the JFrame
public void draw(Graphics g, int x, int y)
{
    if (side == 1)
    g.drawImage(heads, heads.getWidth(null)/3, heads.getHeight(null)/3, null);
    else 
    g.drawImage(heads, tails.getWidth(null)/3, tails.getHeight(null)/3, null);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T02:24:14.597

首先，确保两个图像都位于要加载的正确位置。

其次，你这里有一个错字：

```
if (side == 1)
  g.drawImage(heads, heads.getWidth(null)/3, heads.getHeight(null)/3, null);
else 
  g.drawImage(heads, tails.getWidth(null)/3, tails.getHeight(null)/3, null);
              ^^^^ 
```

应该是尾巴...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T08:40:41.040

The width and height of the applet are coded in the tag. The code that draws the applet uses the two methods to get these values at run time. So now, different tags can ask for the same applet to paint different sized rectangles. The source code does not need to be recompiled for different sizes.

# javascript - AJAX 请求在第二次请求时没有得到立即响应

> ID：12327470
> 
> 赞同：0
> 
> 时间：2012-09-08T02:06:31.237
> 
> 标签：javascript, jquery

我在我的 Web 应用程序中发现了一个奇怪的问题。我第一次发出请求，它工作正常，但第二次以后，我将不会收到任何来自 AJAX 的返回数据。但实际上，当我使用 Google Chrome 检查“网络”选项卡中的元素时，它确实返回了数据。

而如果我做第三次请求，就会出现第二次请求返回数据，第三次请求直到第四次请求才会返回任何数据。

这是我的代码...

```
$.ajax({            
            cache: false,
            url: 'the request url',
            type: 'POST',               
            data: {ad_id: $(this).children('a').attr('id')},                
            error: function(){ 
                alert('something wrong?');
            },
            success: function(response){
                $('li#tmpAjaxLoader').fadeOut(function(){
                    console.log( response );
                    if( response.indexOf('inserted') != -1 ){
                        $(this).prev('li').fadeIn(function(){
                            $(this).children('a').children('img').attr('src', '". $this->imagesPath ."/btn-favourited.png');
                            $(this).next('li#tmpAjaxLoader').remove();
                        });
                    } else if( response.indexOf('deleted') != -1 ){
                        $(this).prev('li').fadeIn(function(){
                            $(this).children('a').children('img').attr('src', '". $this->imagesPath ."/btn-favourite.png');
                            $(this).next('li#tmpAjaxLoader').remove();
                        });
                    } else{
                        $(this).prev('li').fadeIn(function(){                                       
                            $(this).next('li#tmpAjaxLoader').remove();
                        });
                    }
                });
            }
        }); 
```

# vba - 选择列中的所有负值

> ID：12327471
> 
> 赞同：-3
> 
> 时间：2012-09-08T02:06:32.280
> 
> 标签：vba

我从这个站点获得了以下代码，它选择了 H 列中包含值“1”的所有单元格，它工作得很好，但我希望你能帮助我选择 H 列中包含负值的所有单元格

```
Sub H()
    Dim TheSheet As Worksheet
    If TypeOf ActiveSheet Is Worksheet Then
        Set TheSheet = ActiveSheet
    Else
        Exit Sub
    End If
    Dim Row As Integer
    Dim CellsToSelect As String
    For Row = 1 To TheSheet.Range("H" & CStr(TheSheet.Rows.Count)).End(xlUp).Row
        If TheSheet.Range("H" & CStr(Row)).Value = 1 Then
            If CellsToSelect <> "" Then CellsToSelect = CellsToSelect & ","
            CellsToSelect = CellsToSelect & "H" & CStr(Row)
        End If
    Next Row
    TheSheet.Range(CellsToSelect).Select
End Sub 
```

感谢如果提前诺埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:09:09.180

更改此行：`If TheSheet.Range("H" & CStr(Row)).Value = 1 Then`

对此：`If TheSheet.Range("H" & CStr(Row)).Value < 0 Then`

为了您的方便，这里是整个子。

```
 Sub H()
    Dim TheSheet As Worksheet
    If TypeOf ActiveSheet Is Worksheet Then
        Set TheSheet = ActiveSheet
    Else
        Exit Sub
    End If
    Dim Row As Integer
    Dim CellsToSelect As String
    For Row = 1 To TheSheet.Range("H" & CStr(TheSheet.Rows.Count)).End(xlUp).Row
        If TheSheet.Range("H" & CStr(Row)).Value < 0 Then
            If CellsToSelect <> "" Then CellsToSelect = CellsToSelect & ","
            CellsToSelect = CellsToSelect & "H" & CStr(Row)
        End If
    Next Row
    If Len(CellsToSelect) <> 0 Then
        TheSheet.Range(CellsToSelect).Select
    End If
End Sub 
```

# python - Python 方法返回。翻译错误？

> ID：12327472
> 
> 赞同：0
> 
> 时间：2012-09-08T02:06:55.890
> 
> 标签：python

我有这样的方法：

```
def _play(self):
    carda = self._carda
    cardb = self._cardb

    if carda.is_trump and cardb.is_trump:
        winner = self._winbyrank() 
        return winner

    if not carda.is_trump and not cardb.is_trump:
        if carda.suite == cardb.suite:
            winner = self._winbyrank()
            return winner
        else:
            winner = self._winbyfirst()
            return winner

    if carda.is_trump and not cardb.is_trump:
        winner = self._winbytrump()
        return winner
    elif not carda.is_trump and cardb.is_trump:
        winner = self._winbytrump()
        return winner 
```

这***偶尔会***（而且对我来说出乎意料地）回归`None`。当我用以下内容替换它时，它解决了问题。

```
def _play(self):
    carda = self._carda
    cardb = self._cardb

    if carda.is_trump and cardb.is_trump:
        winner = self._winbyrank() 

    if not carda.is_trump and not cardb.is_trump:
        if carda.suite == cardb.suite:
            winner = self._winbyrank()
        else:
            winner = self._winbyfirst()

    if carda.is_trump and not cardb.is_trump:
        winner = self._winbytrump()
    elif not carda.is_trump and cardb.is_trump:
        winner = self._winbytrump()

    return winner 
```

这不是 Python 解释器中的错误吗？方法不应该`return`是`winner`值并退出方法而不是仍然移动到最后并返回`None`吗？我正在使用 Python 2.7.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T02:14:12.583

回答“Python 的常用部分是否存在错误，例如从函数返回值？” 几乎肯定会是“不”。

您的第一个函数有一条可以到达终点的路径，如果不满足任何`if`条件，则避免显式`return`s. 发生这种情况时，它`None`默认返回。在第二个版本中，您可以通过以无条件`return`语句结束函数来避免此问题。这是我推荐的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T02:09:39.623

你搞砸了缩进，混合了制表符和空格。用于`python -tt`验证。除非你有理由让多个 if 语句为真，否则始终坚持使用 elif。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T02:12:26.983

除了 Ignacio Vazquez-Abrams 的评论之外，在`if/elif`没有 else 的情况下使用一种块也被认为是不好的做法。

所以如果你有这样的事情：

```
if spam:
    return eggs 
```

确保你还有其他：

```
if spam:
    return eggs
else:
    return no_eggs 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T02:19:41.377

这不是`None`返回问题的答案，但您可以大大简化您的控制流程：

```
if carda.suite == cardb.suite: #if suites are the same, no need to check trumps
    winner = self._winbyrank()
elif carda.is_trump or cardb.is_trump: #different suites so only one can be trump
    winner = self._winbytrump()
else: #since neither of the above triggered, they are different non-trump suites
    winner = self._winbyfirst() 
```

这本身应该处理杂散路径（如果您的缩进很好，我看不到任何路径。）

我更倾向于相信您的一种情况存在错误，而不是 Python 解释器中的错误 - 特别是这样一个灾难性的错误！一般来说，尽量保持控制流尽可能简单和清晰是避免此类问题的最佳方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T02:44:01.323

您争辩说您已经涵盖了两个布尔值的所有四个可能值，因此该函数永远不会到达终点。

确实，如果你写了

```
a = carda.is_trump
b = cardb.is_trump 
```

然后针对`a`and进行测试`b`，这将是正确的。但是，**每次您**通过点符号请求属性时，Python 都会重新查找该属性。不仅如此，查找属性可以返回任意 Python 代码的值（由于属性的存在）。因此，值没有理由通过函数保持不变。

* * *

一个简单的反例：

```
>>> class Card(object):
...     def __init__(self):
...             self.trump = False
...     
...     @property
...     def is_trump(self):
...             self.trump = not self.trump
...             return self.trump
... 
>>> carda = Card()
>>> carda.is_trump
True
>>> carda.is_trump
False 
```

# processing - 处理中的自动重新加载草图

> ID：12327474
> 
> 赞同：1
> 
> 时间：2012-09-08T02:07:28.693
> 
> 标签：processing, processing-ide

我想提高处理编程的效率，有没有办法从命令行运行草图？也许还可以监视文件保存？

此外，是否有一些自动完成处理？默认IDE非常有限..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T02:31:56.133

## Windows 和 Linux

当您想从命令行运行草图时几乎相同。

在您的处理文件夹中应该有一个*processing-java*文件。如果你 cd 到它的文件夹，你可以使用

```
./processing-java --help 
```

它将向您显示运行、编译等所需的参数。

* * *

**如果您赶时间**，可以这样做（将*$parameters*替换为您想要的文件夹或使用您的编辑器将其自动化）：

```
$PROCESSING_DIR/processing-java --sketch=$CURRENT_DOCUMENT_DIR --output=$CURRENT_DOCUMENT_DIR/run --run --force 
```

这是我的 Gedit 脚本：

```
/home/otto/GameDev/processing-2.1/processing-java --sketch=$GEDIT_CURRENT_DOCUMENT_DIR  --output=$GEDIT_CURRENT_DOCUMENT_DIR/run --run --force 
```

* * *

## macOS

没有机会测试它，但它应该不会更难。

* * *

来源：[http ://wiki.processing.org/w/Command_Line](http://wiki.processing.org/w/Command_Line)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:33:05.850

正如@erisoco 所提到的，使用 Eclipse IDE 是您最好的选择（尤其是对于自动完成/等），并且[Proclipsing 插件](http://code.google.com/p/proclipsing/)使得在 Eclipse 中设置处理项目变得非常容易（包括与外部库的集成）

![前夹](../Images/1a98ec86e6555718a850d048a69952ff.png)

如有必要，还有一个关于设置的快速[视频教程。](http://vimeo.com/19076476)

您提到了“注意文件保存” - 这听起来像是“实时编码”。有多种选择。我过去使用的一种方法是通过[FluidForms 库](http://code.google.com/p/fluid-forms-libs/)。该库还包括一些用于 (3D) 设计的便捷功能（如参数更改器、3D 场景的自动轨迹球、STL 导出等）。您可以找到一些关于使用 Fluid Forms 库进行实时编码处理的快速视频教程：

1.  [Fluid-Forms-Libs ~ HelloWorld](http://www.youtube.com/watch?v=n4E0l-skibw&list=UU0a5jTXOlTFd3KuwGiGoVOA&index=8&feature=plcp)
2.  [流体形式库参数更改器](http://www.youtube.com/watch?v=sWqAhca_77E&list=UU0a5jTXOlTFd3KuwGiGoVOA&index=5&feature=plcp)
3.  [FluidFormsLibs-LiveCoding](http://www.youtube.com/watch?v=DzOZSMUwZjU&list=UU0a5jTXOlTFd3KuwGiGoVOA&index=4&feature=plcp)

![流体形式你好世界](../Images/33c5d7832e87a065fab9dff275eae7f9.png) ![流体形式参数转换器](../Images/888637cd7373a916fd3586e3548b8697.png) ![流体形式实时编码](../Images/b97ab97e3295ec9b7be95b9cd83251c7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-20T20:59:16.127

这是我使用的命令：

```
> processing-java --sketch=R:\sketch_folder --force --run 
```

我使用带有处理扩展的Visual Studio Code [https://code.visualstudio.com/进行编码。](https://code.visualstudio.com/)

# math - 如何从向量建立正交基？

> ID：12327479
> 
> 赞同：0
> 
> 时间：2012-09-08T02:07:50.097
> 
> 标签：math, wolfram-mathematica, linear-algebra, orthogonal

有人知道我如何仅使用向量来构建正交基吗？我有一个形式为 v1 = [ab -a -b]' 的向量，其中 'a' 和 'b' 是实数。我确实尝试过以“临时方式”构建，但是什么也没有，我只有两个正交向量：

v1 = [ab -a -b]' v2 = [a -ba -b]'

我需要更多两个向量来完成正交基{v1，v2，v3，v4}。任何人都可以帮助我吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:38:12.677

v3 = [baba]', v4 = [b -a -ba]' 具有令人愉悦的对称性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T02:20:34.357

我不能在 Mathematica 中为你做，但至少在 MATLAB 中，我会这样做......

```
syms a b
null([a b -a -b])
ans =
[ -b/a, 1, b/a]
[    1, 0,   0]
[    0, 1,   0]
[    0, 0,   1] 
```

该数组的列与原始向量正交，并且跨越零空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:25:40.143

您可以使用单位矩阵进行扩充并正交化该组向量，将给定的向量放在前面。这是一个例子。

```
SeedRandom[1111];
{a, b} = RandomInteger[{-10, 10}, 2];
vec = {a, b, -a, -b}
mat = Join[{vec}, IdentityMatrix[Length[vec]]];

(* Out[39]= {-8, 5, 8, -5} *)

orthog = Drop[Orthogonalize[mat], -1]

(* Out[62]= {{-4*Sqrt[2/89], 5/Sqrt[178], 
  4*Sqrt[2/89], -(5/Sqrt[178])}, 
   {Sqrt[57/89], 20/Sqrt[5073], 32/Sqrt[5073], -(20/Sqrt[5073])}, 
   {0, Sqrt[89/114], -20*Sqrt[2/5073], 25/Sqrt[10146]}, 
   {0, 0, 5/Sqrt[89], 8/Sqrt[89]}} *) 
```

# facebook-graph-api - 从页面选项卡向朋友发送应用请求而不弹出..！

> ID：12327492
> 
> 赞同：1
> 
> 时间：2012-09-08T02:09:42.393
> 
> 标签：facebook-graph-api, request, multi-friend-selector

对我来说听起来很棘手..

在弹出窗口中发送应用程序请求是一种常见的场景。

我试图让它成为静态的东西，没有弹出窗口，用户应该像页面上的任何其他媒体一样可见，复选框允许使用发送按钮进行选择。

我的猜测是这样的。

1.  我需要获取朋友列表并用复选框显示它。
2.  用户选择某些特定复选框后，单击发送按钮。

3.  我需要获取朋友列表以生成与这些 id 的对话并发送请求..

但即便如此，就代码而言，我无法实现这一点，我猜会有一些提示。

这是我想要实现的示例.. [https://www.facebook.com/mittromney/app_159952444141722](https://www.facebook.com/mittromney/app_159952444141722)

# windows-8 - 无法在本地计算机上运行 Contoso Javascript

> ID：12327495
> 
> 赞同：0
> 
> 时间：2012-09-08T02:10:40.760
> 
> 标签：windows-8, microsoft-metro

我尝试在适用于 Windows 8 的 Visual Studio Express 2012 RC 上运行 Contoso 项目，它报告此错误。如何解决？

```
Exception was thrown but not handled in user code at line 183, column 5 in Function code

0x80070002 - JavaScript runtime error: The system cannot find the file specified.

If there is a handler for this exception, the program may be safely continued. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:00:08.947

您是指适用于 Windows 8 的 Contoso Cookbook 参考应用程序（可从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=29854)获得）吗？如果是这样，您应该使用[适用于 Windows 8 的 Visual Studio Express 2012](http://aka.ms/JenVS2012)而不是 Visual Studio 2008。您还需要 Windows 8 操作系统来运行它。

# java - 从同一个登录表单登录两种不同类型的最佳方式

> ID：12327502
> 
> 赞同：0
> 
> 时间：2012-09-08T02:12:21.617
> 
> 标签：java, jsp, web-applications, servlets, web

我正在用 Java 编写一个 Web 应用程序，它有两种不同类型的用户 Student 和 Staff。我想为所有用户集中登录，但学生必须查看与教师不同的页面。我目前实现这一点的方式是使用一个登录表单并获取用户名和密码并运行两个查询，一个在学生表上，一个在学生表上职员表。如果我从用户表中获得成功响应，则我将用户登录到学生页面，否则我将查询教师表，如果我得到成功的结果，我将登录到教师页面，否则我会给出用户名和密码无效的错误消息。我想知道的是如何改进这一点，只做一个查询，我不介意编辑数据库来促进这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:16:03.910

也许您可以在表单中添加一个下拉列表，以便他们可以选择是否要以用户或员工身份登录？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:59:31.280

这对于一个明确的答案来说太开放了，但是将[authentication](http://en.wikipedia.org/wiki/Authentication)与[authentication](http://en.wikipedia.org/wiki/Authorization)分开是很常见的。

一种方法是创建一个用户表和一个角色表，其中用户表处理身份验证，角色表控制授权。用户通过连接表与一个角色（甚至可能是多个角色）相关联。

使用这种方法，login 仅针对 user 表进行查询以确定一个人是有效用户，应用程序的其他部分查询与已登录用户关联的一个或多个角色，以确定是否可以访问特定功能允许。

# c - 在 C 中通过引用传递：结果变量如何初始化？

> ID：12327510
> 
> 赞同：5
> 
> 时间：2012-09-08T02:13:43.300
> 
> 标签：c, pass-by-reference

我是C新手，要做一个迷你计算器程序（这是作业，但我不是在寻找答案，只是多了解一点）。基本上，一个函数必须如下所示：

```
int add(double d, double dd, double *result); 
```

如果没有错误，它将返回 0，如果发生错误，则返回 -1（在加法的情况下，不会有很多错误 - 但例如，除以 0 将是错误的）。

用户必须在终端中输入两个数字，然后将这些数字用作 add 方法中的参数值。我不明白的是调用该方法时最初的结果是什么？它只是空吗？为什么我要返回 0 或 -1 而不是结果呢？例如：

```
double result;
returnValue = add(2.0, 5.0, &result); 
```

显然我会得到 7 作为结果，但是我将如何在不返回结果的情况下打印出来呢？returnValue 是 0，所以我知道没有错误，所以现在我需要打印结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T02:16:02.083

C 没有通过引用传递。您可以传入一个指针，这就是您在这里所做的，但 C 仅具有按值传递。

现在到你的实际问题：

> 我不明白的是调用该方法时最初的结果是什么？它只是空吗？

不，在调用函数之前， 的值`result`是未定义的`add`。如果您在分配给它之前尝试使用 的值，您将*无法保证*`result`，无论是通过在声明它的函数中分配给它，还是通过`add`使用类似`*result = d + dd`.

就此而言， double 永远不可能`null`。Null 是一个可能的指针值，而不是一个可能的浮点数。

> 为什么我要返回 0 或 -1 而不是结果呢？

如果要`result`直接返回，则必须有某种可区分的“计算失败”返回值，这有点混乱，让调用者在使用之前检查结果。这种方式迫使调用者`add`注意到有状态码作为返回值，如果调用者想忽略它，那么他们可以（尽管你不应该忽略状态码）。

> 显然我会得到 7 作为结果，但是我将如何在不返回结果的情况下打印出来呢？

Ed Heal 的建议是对的`printf`。不过，如果您使用的是 Linux 或 Mac OS X，我还建议您`man printf`从终端运行 - 这通常比打开 Web 浏览器更方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T02:19:37.713

谢谢你的诚实。令人耳目一新。

该行应为

```
returnValue = add(2.0, 5.0, &result); 
```

并打印出结果查找[printf](http://www.cplusplus.com/reference/clibrary/cstdio/printf/) - 这样就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T11:30:56.340

您编写的代码在声明变量时不会为 result 赋值。因此它包含一些随机数。用这个数字做任何事情显然是不好的，因为它会导致你的程序产生不可预知的结果。这就是所谓的未初始化变量错误。

您的代码在分配之前没有引用变量，所以我并不是说您有错误。我只是在回答结果分配之前包含什么的问题。如果你想让它有一个特定的值，你可以这样声明它：

```
double result = 7; 
```

它总是有一些预定义的值。同样，在您的情况下没有必要这样做，我只是说如果您想要一个始终定义的值，您可以这样做。

# openerp - 如何将结果 fetchall 填充到列中？

> ID：12327514
> 
> 赞同：1
> 
> 时间：2012-09-08T02:14:19.523
> 
> 标签：openerp

我使用了命令 fetchall()

```
cr.execute('select a.name, a.state, a.amount_total, a.date_confirm, b.product_uom_qty from sale_order a, sale_order_line b where a.id = b.order_id')
temp = cr.fetchall() 
```

所以它需要表 SO 中的所有 SO，我想在这里填写所有结果：

```
class sales_items_line(osv.osv_memory):
_name = "sales.items.line"
_description = "Sales Items Line"
_columns = {
    'name': fields.char('Name', size=64),
    'qty': fields.char('Quantity', size=64),
    'date': fields.date('Date', required=True),
    'amount': fields.float('Amount', digits_compute=dp.get_precision('Account')),
    'draft_assigned': fields.boolean('Select'),
    'sale_items_id': fields.many2one('add.sales.items', 'Deposit Items ID'),
} 
```

但如何？请帮帮我...， cr.execute 是不同的类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T04:43:30.517

您必须覆盖 default_get() 方法并填写您的列。
这是代码：

```
def default_get(self, cr, uid, fields, context=None):
    fields = super(sales_items_line, self).default_get(cr, uid, fields, context=context)
    cr.execute('select a.name as "name", a.state as "state", a.amount_total as "total", a.date_confirm as "date", b.product_uom_qty as "qty" from sale_order a, sale_order_line b where a.id = b.order_id')
    data = cr.dictfetchall()
    for rec in data:
        fields['name'] = rec.get('name', '')
        fields['qty'] = rec.get('qty', 0.00)
        fields['amount'] = rec.get('total', 0.00)
    return data 
```

希望这能解决您的问题。
谢谢你。

# haskell - 使用 Reactive Banana 做一些基本的微积分

> ID：12327517
> 
> 赞同：6
> 
> 时间：2012-09-08T02:15:41.360
> 
> 标签：haskell, reactive-banana

**设置**：

我正在使用 Reactive Banana 和 OpenGL，并且我有一个想要旋转的齿轮。我有以下信号：

```
bTime :: Behavior t Int -- the time in ms from start of rendering
bAngularVelosity :: Behavior t Double -- the angular velocity
                                      -- which can be increase or
                                      -- decreased by the user
eDisplay :: Event t ()     -- need to redraw the screen
eKey :: Event t KeyState   -- user input 
```

最终，我需要计算`bAngle`哪个是过去的绘图功能：

```
reactimate $ (draw gears) <$> (bAngle <@ eDisp) 
```

角度很容易计算：`a = ∫v(t) dt`

**问题**：

我*想*我想要做的是将这个积分近似`a = ∑ v Δt`为每个 eDisplay 事件（或者如果需要，更频繁）。这是解决这个问题的正确方法吗？如果是这样，我如何`Δt`得到`bTime`？

**另请参阅**：我怀疑答案使用了该`mapAccum`功能。如果是这样，也请参阅[我的其他问题](https://stackoverflow.com/questions/12327424/how-does-reactive-bananas-mapaccum-function-work)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T15:05:52.423

编辑：回答这个问题，是的，你使用你正在使用的近似值是正确的，它是欧拉求解一阶微分方程的方法，并且对于你的目的来说足够准确，特别是因为用户没有周围的角速度的绝对值来判断你反对。减少你的时间间隔会使它更准确，但这并不重要。

你可以用更少、更大的步骤来做到这一点（见下文），但这种方式对我来说似乎是最清楚的，我希望你也是。

为什么要打扰这个更长的解决方案？即使`eDisplay`以不规则的时间间隔发生，这也有效，因为它计算`eDeltaT`.

让我们给自己一个时间事件：

```
eTime :: Event t Int
eTime = bTime <@ eDisplay 
```

要获得 DeltaT，我们需要跟踪经过的时间间隔：

```
type TimeInterval = (Int,Int) -- (previous time, current time) 
```

所以我们可以将它们转换为增量：

```
delta :: TimeInterval -> Int
delta (t0,t1) = t1 - t0 
```

当我们得到一个新的时间间隔时，我们应该如何更新一个时间间隔`t2`？

```
tick :: Int -> TimeInterval -> TimeInterval
tick t2 (t0,t1) = (t1,t2) 
```

因此，让我们将其部分应用于时间，为我们提供一个间隔更新器：

```
eTicker :: Event t (TimeInterval->TimeInterval)
eTicker = tick <$> eTime 
```

然后我们可以`accumE`在初始时间间隔上累积该函数：

```
eTimeInterval :: Event t TimeInterval
eTimeInterval = accumE (0,0) eTicker 
```

由于 eTime 是从渲染开始开始测量的，因此初始`(0,0)`值是合适的。

最后，我们可以通过在时间间隔上应用 ( `fmap`ping )来获得 DeltaT 事件。`delta`

```
eDeltaT :: Event t Int
eDeltaT = delta <$> eTimeInterval 
```

现在我们需要更新角度，使用类似的想法。

我将制作一个角度更新器，只需将`bAngularVelocity`变成一个乘数：

```
bAngleMultiplier :: Behaviour t (Double->Double)
bAngleMultiplier = (*) <$> bAngularVelocity 
```

然后我们可以用它来制作`eDeltaAngle`：（编辑：更改为`(+)`并转换为`Double`）

```
eDeltaAngle :: Event t (Double -> Double)
eDeltaAngle = (+) <$> (bAngleMultiplier <@> ((fromInteger.toInteger) <$> eDeltaT) 
```

并累积得到角度：

```
eAngle :: Event t Double
eAngle = accumE 0.0 eDeltaAngle 
```

如果你喜欢单行，你可以写

```
eDeltaT = delta <$> (accumE (0,0) $ tick <$> (bTime <@ eDisplay)) where
    delta (t0,t1) = t1 - t0
    tick t2 (t0,t1) = (t1,t2)

eAngle = accumE 0.0 $ (+) <$> ((*) <$> bAngularVelocity <@> eDeltaT) = 
```

但我不认为这是非常有启发性的，老实说，我不确定我的修复是否正确，因为我没有在 ghci 中测试过。

当然，既然我做了`eAngle`而不是`bAngle`，你需要

```
reactimate $ (draw gears) <$> eAngle 
```

而不是你原来的

```
reactimate $ (draw gears) <$> (bAngle <@ eDisp) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T15:43:56.433

一种简单的方法是假设这种`eDisplay`情况以固定的时间间隔发生，并考虑`bAngularVelocity`作为相对而非绝对的衡量标准，这将为您提供下面真正相当简短的解决方案。`eDisplay`[请注意，如果你无法控制，或者它明显不规则地发射，或者有规律地变化，这将是不好的，因为它会导致你的齿轮随着你的`eDisplay`变化间隔以不同的速度旋转。如果是这样的话，你需要我的其他（更长的）方法。]

```
eDeltaAngle :: Event t (Double -> Double)
eDeltaAngle = (+) <$> bAngularVelocity <@ eDisplay 
```

即`bAngularVelocity`变成一个加法器事件，当你触发时`eDisplay`，那么

```
eAngle :: Event t Double
eAngle = accumE 0.0 eDeltaAngle 
```

最后

```
reactimate $ (draw gears) <$> eAngle 
```

是的，将积分近似为总和是合适的，在这里我通过对步宽做出可能稍微不准确的假设来进一步近似，但只要你`eDisplay`或多或少有规律，它就很清楚并且应该是平滑的。

# javascript - javascript从孩子调用父方法

> ID：12327519
> 
> 赞同：0
> 
> 时间：2012-09-08T02:15:56.903
> 
> 标签：javascript, object, scope

我有以下对象：

```
var party =
{
   food:
   {
       serve: function () {
         // I want to call turnOff method from here
       }

       cleanUp: function () {
       }
   }

   music:
   {
       turnOff: function () {
       }
   }
} 
```

所以正如评论所指出的，我想从音乐对象调用 turnOff 方法，我该怎么做？`this`指的是食物对象，但我需要访问音乐对象......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:21:09.440

使用构造函数而不是带有引用父对象的变量的文字

```
var party = new (function()
{
   var self = this;
   this.food =
   {
       serve: function () {
           self.music.turnoff();
       },

       cleanUp: function () {
       }
   }

   this.music = 
   {
       turnOff: function () {
       }
   }
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:24:17.197

```
var party =
{
   food:
   {
       serve: function () {
         party.music.turnOff();
       },
       cleanUp: function () {
       }
   },
   music:
   {
       turnOff: function () {
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T02:19:25.897

称它为`party.music.turnOff`()。

仅供参考，您上面的代码块无效。您缺少一些逗号 - 在大括号`serve`和右`food`大括号之后。

# c# - 如何在更大的字节数组中“找到”切片（字节 []）

> ID：12327527
> 
> 赞同：2
> 
> 时间：2012-09-08T02:17:32.857
> 
> 标签：c#, pattern-matching, bytearray, nearest-neighbor

我的数组是由位图组成的，所以每第 4 个字节是 255。

在这个例子中，我制作了一个字节数组，就像我的位图格式一样。尽我所能，它是一个 64 个元素的数组。

或者在 C# 中我只能说：

```
byte[] MyBitmapToByteArray = new byte[64]; 
```

对于这个问题，我把这个位图图表尽可能地接近真实。

![在此处输入图像描述](../Images/e628c988fe190acb19cf8f71ddb4f634.png)

例如，如果我需要检查较大的一个（64）是否包含较小的字节序列。

所以在第三列和第二行的值将是：

{21、21、21、255}

{31、31、31、255}

{22、22、22、255}

{32、32、32、255}

我可以问的很清楚：

此“屏幕”内此部分/切片的坐标和大小是：实际上，可以在以下位置（在此图上）找到的图像`Point(X=2, Y=1), Size.Width = 2, Size.Height = 2`

如何在整个数组中“搜索”在此点找到的模式？

64 长的大数组看起来像：

*   1, 2, 3, 255, 1, 2, 3, 255, 1, 2, 3, 255, 1, 2, 3, 255,...等'

这部分是

*   21, 21, 21, 255, 31, 31, 31, 255, 22, 22, 22, 255, 32, 32, 32, 255

并且我可能想通过并行调用或并行 Foreach/For 加载相关方法的处理，前提是您认为它可能表现更好。

# r - 数据转换避免 R 中的嵌套循环

> ID：12327535
> 
> 赞同：9
> 
> 时间：2012-09-08T02:19:21.503
> 
> 标签：r, transform, nested-loops

我有一个 6 列 37 行的列联表数据矩阵。我需要应用卡方变换来为我提供行配置文件和列配置文件以进行对应分析。

不幸的是，有人告诉我我需要使用嵌套循环来转换数据并执行 CA（而不是在 R 中使用更明智的方式）。我获得了用于嵌套循环的结构：

```
transformed.data=data0

for (row.index in 1:nrow(data)) {
  for (col.index in 1:ncol(data)) {
    transfomed.data[row.index,col.index]=
       "TRANSFORMATION"[row.index,col.index]
  }
} 
```

根据我对使用嵌套循环的理解，它将首先将我的*“转换”*应用于行，然后应用于列。

我想要对数据进行的转换以获取行配置文件是：

> **(** X( *ij* ) / sum( X( ***i*** ) ) **)** / sqrt( sum( X( ***j*** ) ) )

虽然我想对数据进行转换以获取列配置文件是：

> **(** X( *ij* ) / sum( X( ***j*** ) ) **)** / sqrt( sum( X( ***i*** ) ) )

我将在嵌套循环的最后一行输入什么作为*“转换”*，以使其输出我想要的配置文件转换。否则，如果我在这里错过了理解嵌套循环的意义，请描述它允许我做什么。

这是我的数据子集的代码：

```
matrix(c(15366,2079,411,366,23223,2667,699,819,31632,2724,717,1473,49938,3111,1062,11964)
,nrow=4,ncol=4,byrow=T) 
```

所以单独使用这个子集，我希望第一行的行配置文件是：

```
0.002432689 0.0003291397 6.506803e-05 5.794379e-05 
```

第一列的列配置文件为：

```
0.0009473414, 0.0132572344, 0.0572742202, 0.0132863528 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:20:43.227

您可以在这些类型的计算中使用它，甚至不需要一个循环。重写你的方程，然后你得到：

**Xtrans** [i,j] = **X** [i,j] / **(** sum( **X** [i, ] ) * sqrt( sum( **X** [ ,j] ) ) **)**

要获得表示术语的矩阵 - sum( **X** [i, ] ) * sqrt( sum( **X** [ ,j] ) ) - 您可以使用函数`outer()`或`%o%`像这样：

```
rowSums(X) %o% sqrt(colSums(X)) 
```

或者，对于列转换：

```
sqrt(rowSums(X)) %o% colSums(X) 
```

您唯一需要做的就是将原始矩阵除以这个矩阵，例如用于 col 转换：

```
TEST <- matrix(
               c(15366,2079,411,366,23223,2667,699,819,
                 31632,2724,717,1473,49938,3111,1062,11964),
                 nrow=4,ncol=4,byrow=T)

> TEST / (sqrt(rowSums(TEST)) %o% colSums(TEST))
             [,1]        [,2]        [,3]         [,4]
[1,] 0.0009473414 0.001455559 0.001053892 0.0001854284
[2,] 0.0011674098 0.001522501 0.001461474 0.0003383284
[3,] 0.0013770523 0.001346668 0.001298230 0.0005269580
[4,] 0.0016167998 0.001143812 0.001430074 0.0031831055 
```

您可以以大致相同的方式计算行转换。

进行手动计算，我可以确认我的解决方案是正确的，前提是我正确理解了您的索引符号（意味着 i 代表行，j 代表列）。您期望的数字不是您所说的期望的数字。给你看 ：

```
> ( TEST[1,2] / sum(TEST[,2]) ) / sqrt(sum(TEST[1,]))
[1] 0.001455559 
```

* * *

你说的卡方归一化，其实可以在包的函数`decostand`中找到`vegan`。请注意，默认情况下，该方法通过乘以矩阵总数的平方根进行调整。这在对应分析中是有意义的。

如果您不想使用此更正，那么您也可以获得例如列转换，如下所示：

```
> require(vegan)
> decostand(TEST,method="chi.square",MARGIN=2)/sqrt(sum(TEST))
             [,1]         [,2]        [,3]        [,4]
[1,] 0.0009473414 0.0011674098 0.001377052 0.001616800
[2,] 0.0014555588 0.0015225011 0.001346668 0.001143812
[3,] 0.0010538924 0.0014614736 0.001298230 0.001430074
[4,] 0.0001854284 0.0003383284 0.000526958 0.003183106
attr(,"decostand")
[1] "chi.square" 
```

# wordpress - TimThumb 错误：无法获得写入锁

> ID：12327542
> 
> 赞同：1
> 
> 时间：2012-09-08T02:20:55.057
> 
> 标签：wordpress, nivo-slider, timthumb

我正在为 wordpress 主题使用 nivo 滑块......滑块突然坏了。你可以在这里看到它 www.habitude.ca 当我将 img url 复制到浏览器时，我收到以下错误。

* * *

发生 TimThumb 错误

发生以下错误：无法获得写入锁。

查询字符串：src=http://habitude.ca/wp-content/uploads/2012/07/rock_bottom1.jpg&h=316&w=980

## TimThumb 版本：2.8

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T06:07:16.227

此错误意味着缓存目录存在某种目录权限问题，因此请确保您的 php 脚本可以写入缓存目录。

# django - 获取 NameError 以进行异常处理

> ID：12327544
> 
> 赞同：2
> 
> 时间：2012-09-08T02:21:54.453
> 
> 标签：django, django-models, error-handling

我想通过从 url 中提取其 id 并将其提供给 django models api 在页面上列出一个对象（俱乐部）的详细信息。当该 id 存在于数据库中时，它正在工作。但是，当我尝试在不存在的 url 中提供 id 时，模型 api 会出现此错误：

> > > club = Club.objects.get(id=8) Traceback（最近一次调用最后）：文件“”，第 1 行，在文件“/usr/local/lib/python2.7/dist-packages/django/db/models /manager.py”，第 131 行，在 get return self.get_query_set().get(*args, **kwargs) 文件“/usr/local/lib/python2.7/dist-packages/django/db/models/ query.py"，第 366 行，在 get % self.model._meta.object_name) DoesNotExist：俱乐部匹配查询不存在。

所以我在我的视图中为这个错误添加了一个异常处理程序。这是代码：

```
def club_detail(request, offset):
    try:
        club_id = int(offset)
        club = Club.objects.get(id=club_id)
    except (ValueError, DoesNotExist):
        raise HTTP404()
    return render_to_response('home/club_detail.html', {'club': club }, context_instance = RequestContext(request)) 
```

但它没有捕获 DoesNotExist 错误，而是在浏览器中给出 NameError ：

```
NameError at /club/8/
  global name 'DoesNotExist' is not defined
  Request Method:   GET
  Request URL:  http://127.0.0.1:8000/club/8/
  Django Version:   1.4.1
  Exception Type:   NameError
  Exception Value:  
  global name 'DoesNotExist' is not defined 
```

我怎样才能让它工作？提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T03:42:55.403

`DoesNotExist`被实现为模型本身的属性。将您的行更改为：

```
 except (ValueError, Club.DoesNotExist): 
```

或者，由于所有`DoesNotExist`错误都继承`ObjectDoesNotExist`该类，您可以执行以下操作：

```
from django.core.exceptions import ObjectDoesNotExist

...

    except (ValueError, ObjectDoesNotExist): 
```

[如此处](https://docs.djangoproject.com/en/1.9/ref/models/querysets/#methods-that-do-not-return-querysets)所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:11:49.130

你不能直接使用 DoesNotExist - 它应该是 Club.DoesNotExist 所以你的代码看起来像：

```
def club_detail(request, offset):
    try:
        club_id = int(offset)
        club = Club.objects.get(id=club_id)
    except (ValueError, Club.DoesNotExist):
        raise HTTP404()
    return render_to_response('home/club_detail.html', {'club': club }, context_instance = RequestContext(request)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T02:37:53.937

您需要导入`DoesNotExist`：

```
from django.core.exceptions import DoesNotExist 
```

# python - python：在设置其他类变量之前以编程方式设置类变量？

> ID：12327545
> 
> 赞同：0
> 
> 时间：2012-09-08T02:22:15.150
> 
> 标签：python

我有一个案例，我在外部函数中创建一个类，然后返回该类。该类具有指定的父类。我希望父类上的类方法可以访问该类变量，这些方法在类初始化时调用。总之，我需要能够设置一个类变量（非硬编码），以便在初始化其他硬编码类变量之前它可用。

这里有一些示例代码可以更清楚地说明：

```
class Parent(object):
    class_var = None

    @classmethod
    def get_class_var_times_two(cls):
        return cls.class_var * 2

def outer_function(class_var_value):

    class Child(Parent):
        other_var = Parent.get_class_var_times_two() # <-- at this point, somehow Child's class_var is set to class_var_value 
```

不确定这在python中是否可行。也许 class_var_value 不需要通过外部函数传递。我尝试使用元类并在类属性字典中强制变量通过，但无法弄清楚如何尽早在 Child 上设置 class_var，以便在初始化 other_var 之前设置它。如果这是可能的，那么这一切都会奏效。任何想法表示赞赏！

编辑：还考虑将 other_var 设为惰性属性，但这不是我的用例的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:33:03.737

调用`Parent.get_class_var_times_two()`用 调用函数`cls = Parent`，因此`Parent.class_var`将使用 的值（无论您从哪个上下文调用函数）。

所以，你想做的是调用`Child.get_class_var_times_two()`. 麻烦的是，`Child`直到`class`块完成才被定义。因此，您需要执行以下操作（假设您不使用元类）：

```
def outer_function(class_var_value):
    class Child(Parent):
        class_var = class_var_value
    Child.other_var = Child.get_class_var_times_two() 
```

# c# - c# - 更流畅的绘图笔

> ID：12327546
> 
> 赞同：2
> 
> 时间：2012-09-08T02:22:30.557
> 
> 标签：c#, graphics, drawing, pen

我有一个用 C#/GDI+ 制作的绘图程序，在该程序中，我在面板上绘制具有可互换颜色和笔大小的不同形状。我的形状绘制方法工作正常，但是当涉及到使用免费笔时（就像你在 MS Paint 中那样），我已经制作了一种可以完成这项工作的方法，只是非常难看（参见链接中的图片）。

```
if (crtanje)
            {
                debljina = float.Parse(debljina_box.Text);
                Graphics gr = Graphics.FromImage(bit);
                gr.SmoothingMode = SmoothingMode.HighQuality;
                olovka = new Pen(boja, debljina);
                gr.DrawLine(olovka, new Point(prethodnoX ?? e.X, prethodnoY ?? e.Y), new Point(e.X, e.Y));
                panel1.CreateGraphics().DrawImageUnscaled(bit, new Point(0, 0));
                prethodnoX = e.X;
                prethodnoY = e.Y;
            } 
```

可以修复此代码以使绘图更流畅还是我应该采取其他方法？

[图片](http://i50.tinypic.com/f4pc09.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-15T08:11:37.060

我想你可以遍历一个 for 循环并将它增加一个非常小的量，以便它更频繁地绘制点并使线条更平滑。您可以保存当前点并计算下一个点，然后在它们之间画一条线。这样你才能让它更流畅！

# html - iPhone电子邮件上的字体大小拒绝更改

> ID：12327548
> 
> 赞同：2
> 
> 时间：2012-09-08T02:22:39.467
> 
> 标签：html, css, email, media

我在这个 HTML 电子邮件模板上花了大约 4 个小时，无论我改变什么字体都拒绝在 iphone 上增加。

我已经束手无策了，如果我能在我的头脑爆炸之前得到任何帮助，我将不胜感激。

提前致谢。

代码和屏幕截图包括在下面。

我只是在寻找足够大的字体以使其清晰可见。只希望正文与标题的大小相同，并且标题的大小仍然大致相同。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<style type="text/css">
table, tr, td {font-size:16px; }
table {border-collapse: collapse;}
.content {width: 640px !important;}
td.fw {padding:25px 25px 25px 25px}
td.hw.l {padding:25px 20px 25px 25px}
td.hw.r {padding:25px 25px 25px 20px}
.whitetxt {color:#ffffff;}
.null {padding:0px 0px 0px 0px;}
.blue {color:#0085c1;}
.red {color:#fa696e; }
.twenty {font-size:20px;}
.h1 {font-size:28px; font-weight: bold;}
.h2 {font-size:18px; font-weight: bold;}
.thirteen {font-size:13px;}
.sixteen {font-size:16px;}
.thirty-four {font-size:34px; font-weight:bold;}
.strong {font-weight:bold;}
.middle {vertical-align:middle;}
.bottom-border {border-bottom: 2px solid #f1f1f0}

@media only screen and (max-device-width: 480px) {
[class=content] {width: 320px !important;}
[class=thirteen] {font-size:16px;}
}
</style>
</head>

<body style="margin:0 0 0 0; padding:0 0 0 0; font-family: Arial, Verdana, Sans Serif;color:#3c3c3c; -webkit-text-size-adjust:none;">

<table width="100%" style="font-size: 15px;border-collapse: collapse;">
<tbody>
<tr >
<td width="auto" ></td>
<td width="80%" class="content" style="font-size: 15px;width: 640px;">

<!-- main content table -->
<table class="main-table" style="font-size: 15px;border-collapse: collapse;">

<tr class="fw" >
<td class="fw middle" valign="middle" colspan="2" style="font-size: 15px;vertical-align: middle;padding: 25px 25px 25px 25px;">
<img align="left" class="logo" src="http://meetbryce.com/client-files/mim/logo.png" alt="Make It Mine" border="0"><span class="thirty-four" style="font-size: 34px;font-weight: bold;">thank you for applying!</span><br>
<span class="red sixteen" style="color: #fa696e;font-size: 16px;">your account number is <strong>CFA0027852</strong></span>
</td>
</tr>

<tr class="fw" >
<td class="fw whitetxt" colspan="2" bgcolor="#004d7c" style="font-size: 1px;color: #ffffff;padding: 25px 25px 25px 25px;">
<span class="thirteen" style="font-size: 13px;">We appreciate your order! Please find attached the relevant paperwork for your new computer. It's in PDF format so you'll need a modern browser or Adobe Reader to open it. You will also get the paperwork via post in your letterbox, it will include a prepaid envelope for easy return to us.</span>
</td>
</tr>

<tr class="hw" >
<td class="hw l" width="50%" bgcolor="#ecf4f7" align="right" style="font-size: 15px;padding: 25px 20px 25px 25px;">
Jonathan Swanston <span class="blue" style="color: #0085c1;">is my name</span><br><br>
jswanston@gmail.com <span class="blue" style="color: #0085c1;">is my email</span><br><br>
0425-353-217 <span class="blue" style="color: #0085c1;">is my phone</span>
</td>
<td class="hw r" width="50%" bgcolor="#ecf4f7" style="font-size: 15px;padding: 25px 25px 25px 20px;">
<span class="blue" style="color: #0085c1;">my sex is</span> Male<br><br>
<span class="blue" style="color: #0085c1;">my birthday is</span> 4th November, 1988<br><br>
<span class="blue" style="color: #0085c1;">my benefit is</span> 111-555-666-1
</td>

</tr><tr class="null" style="font-size: 15px;padding: 0px 0px 0px 0px;">
<td class="null" colspan="2" bgcolor="#ecf4f7" align="center" style="font-size: 15px;padding: 0px 0px 0px 0px;">
<img src="http://meetbryce.com/client-files/mim/divider.png" width="100%" alt="&nbsp;" border="0">
</td>
</tr>

<tr >
<td class="hw l" width="50%" bgcolor="#ecf4f7" align="right" style="font-size: 15px;padding: 25px 20px 25px 25px;">
<span class="blue" style="color: #0085c1;">my home address</span><br><br>
Unit 2A<br>
6 Carnarvon Road<br>
Caulfield North<br>
Victoria 3161
</td>
<td class="hw r" width="50%" bgcolor="#ecf4f7" style="font-size: 15px;padding: 25px 25px 25px 20px;">
<span class="blue" style="color: #0085c1;">my delivery address</span><br><br>
Unit 2A<br>
6 Carnarvon Road<br>
Caulfield North<br>
Victoria 3161
</td>
</tr>

<tr class="fw" >
<td class="fw whitetxt" colspan="2" bgcolor="#0085c1" align="center" style="font-size: 15px;color: #ffffff;padding: 25px 25px 25px 25px;">
<span class="h1" style="font-size: 28px;font-weight: bold;">what you've applied for... nice!</span>
</td>
</tr>

<tr class="null" style="font-size: 15px;padding: 0px 0px 0px 0px;">
<td class="null bottom-border" colspan="2" style="font-size: 15px;padding: 0px 0px 0px 0px;border-bottom: 2px solid #f1f1f0;">
<a href="#" target="_blank"><img src="http://meetbryce.com/client-files/mim/ipad.png" width="100%" alt="apple ipad 3 - 3G/WiFi 16gb - $30/week - $120/month - all together $1,560" border="0"></a>
</td>
</tr>

<tr class="fw" >
<td class="fw bottom-border" colspan="2" style="font-size: 15px;border-bottom: 2px solid #f1f1f0;padding: 25px 25px 25px 25px;">
<span class="h2" style="font-size: 18px;font-weight: bold;">Step 1\. Set up your Centrelink deduction by:</span>
<br><br>
<span class="blue" style="color: #0085c1;">Logging into your Centrelink account online at http://www.centrelink.gov.au</span>
<ul>
    <li>Select ‘Deductions’, ‘add new deduction’ then click ‘Start’&lt;/li>
    <li>Enter the service providers CRN “555074568C”&lt;/li>
    <li>    Select service category ‘Food Clothing and Household Items’ and click continue</li>
    <li>Select ‘MAKE IT MINE / COMPUTERS FOR ALL’ and click continue</li>
    <li>Use the purchase details above to complete the deduction amount (fortnightly amount), frequency, start date (ASAP) and target amount.</li>
    <li>Confirm that all details are correct!</li>
</ul>
<span class="blue" style="color: #0085c1;">Or call Centrelink on 13 61 50</span>
<ul>
    <li>Let the Centrelink employee know that you wish to start payments into the "Make It Mine / Computers For All account" account.</li>
    <li>You will need to quote our Centrelink Reference Number: “555074568C”&lt;/li>
    <li>Provide the purchase details above to the Centrelink employee</li>
</ul>
<span class="blue" style="color: #0085c1;">Or visit a Centrelink outlet</span>
</td>
</tr>

<tr class="fw" >
<td class="fw bottom-border" colspan="2" style="font-size: 15px;border-bottom: 2px solid #f1f1f0;padding: 25px 25px 25px 25px;">
<span class="h2" style="font-size: 18px;font-weight: bold;">Fast track your application</span>
<br><br>
You can fast track your application by setting up your Centrelink deductions online and emailing or faxing your signed paperwork to us! 
<br><br>
<span class="blue sixteen" style="color: #0085c1;font-size: 16px;">Fast tracked applications can be approved within days and the package dispatched on approval!</span>
<br><br>
An additional copy of your paperwork will also be sent to your postal address. Once your paperwork is returned, and payments have been confirmed your order will move to the final stages of processing. Most orders ship directly through the manufacturer. Processing takes up to two working days after your account is approved for dispatch. After this point, please allow up to 8-10 working days for your order to be delivered. We will email and SMS you at every stage of the order progression.
</td>
</tr>

<tr class="fw" >
<td class="fw" colspan="2" style="font-size: 15px;padding: 25px 25px 25px 25px;">
<span class="h2" style="font-size: 18px;font-weight: bold;">Download your application receipt</span>
<br><img src="http://meetbryce.com/client-files/mim/pdf.png" alt="&nbsp;" align="left" border="0">
<span class="red strong" style="color: #fa696e;font-weight: bold;">contract-ord587fd27-1695-4a7e-8562-873ce4f087b6.pdf</span><br>
<strong>1206k</strong> <a href="#" target="_blank">View</a> <a href="#" target="_blank">Download</a>
</td>
</tr>

<tr class="hw" >
<td class="fw" bgcolor="#f1f1f0" style="font-size: 15px;padding: 25px 25px 25px 25px;">
<img src="http://meetbryce.com/client-files/mim/footer-logo.png" alt="Make it Mine copyright &copy; 2012 make it mine.&lt;br&gt;all rights reserved" align="left" border="0">
</td>
<td class="fw" bgcolor="#f1f1f0" style="font-size: 15px;padding: 25px 25px 25px 25px;">
<a href="#"><img src="http://meetbryce.com/client-files/mim/footer-facebook.png" alt="We like you… do you like us?" border="0"></a>
</td>
</tr>

</table>
<!-- end main content table -->
</td>
<td width="auto" ></td>
</tr>
</tbody>
</table>

</body>
</html> 
```

![](../Images/b5ad463b901373ce60ffc4bf0cada2ec.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T04:37:30.063

更改字体大小的单位可以解决问题。

我将所有伪标题的单位更改为 >1em 并删除

```
table,tr,td {font-size:14px;} 
```

这会让它假设字体大小为 1em。

然后我添加了@media-query 来调用一行代码，使用以下代码将表中的所有字体大小乘以 1.2：

```
@media only screen and (max-device-width: 480px) {
   table {font-size:1.2em;}
} 
```

现在看起来像这样：

![截屏](../Images/58087815ec03a7280d0664e66406b2de.png)

如果你对完整的代码感兴趣——这里是：

```
<head>
<style type="text/css">
@media only screen and (max-device-width: 480px) {
table {font-size:1.2em;}
[class=small-only] {display:inline;}
}
</style>
</head>

<body style="margin:0 0 0 0; padding:0 0 0 0; font-family: Arial, Verdana, Sans Serif;color:#3c3c3c;">

<table width="100%" style="border-collapse: collapse;">
<tbody>
<tr>
<td width="auto"></td>
<td width="80%" class="content" style="width: 640px;">

<!-- main content table -->
<table class="main-table" style="border-collapse: collapse;">

<tr class="fw">
<td class="fw middle" valign="middle" colspan="2" style="vertical-align: middle;padding: 25px 25px 25px 25px;">
<img align="left" class="logo" src="http://meetbryce.com/client-files/mim/logo.png" alt="Make It Mine" border="0"><span class="thirty-four" style="font-size: 2em;font-weight: bold;">thank you for applying!</span><br>
<span class="red twenty" style="color: #fa696e;font-size: 1.2em;">your account number is <strong>CFA0027852</strong></span>
</td>
</tr>

<tr class="fw">
<td class="fw whitetxt" colspan="2" bgcolor="#004d7c" style="color: #ffffff;padding: 25px 25px 25px 25px;">
<span class="thirteen" style="font-size: .9em;">We appreciate your order! Please find attached the relevant paperwork for your new computer. It's in PDF format so you'll need a modern browser or Adobe Reader to open it. You will also get the paperwork via post in your letterbox, it will include a prepaid envelope for easy return to us.</span>
</td>
</tr>

<tr class="hw">
<td class="hw l" width="50%" bgcolor="#ecf4f7" align="right" style="padding: 25px 20px 25px 25px;">
Jonathan Swanston <span class="small-only" style="display: none;"><br></span><span class="blue" style="color: #0085c1;">is my name</span><br><br>
jswanston@gmail.com <span class="small-only" style="display: none;"><br></span><span class="blue" style="color: #0085c1;">is my email</span><br><br>
0425-353-217 <span class="small-only" style="display: none;"><br></span><span class="blue" style="color: #0085c1;">is my phone</span>
</td>
<td class="hw r" width="50%" bgcolor="#ecf4f7" style="padding: 25px 25px 25px 20px;">
<span class="blue" style="color: #0085c1;">my sex is</span><span class="small-only" style="display: none;"><br></span> Male<br><br>
<span class="blue" style="color: #0085c1;">my birthday is</span> <span class="small-only" style="display: none;"><br></span>4th November, 1988<br><br>
<span class="blue" style="color: #0085c1;">my benefit is</span> <span class="small-only" style="display: none;"><br></span>111-555-666-1
</td>

</tr><tr class="null" style="padding: 0px 0px 0px 0px;">
<td class="null" colspan="2" bgcolor="#ecf4f7" align="center" style="padding: 0px 0px 0px 0px;">
<img src="http://meetbryce.com/client-files/mim/divider.png" width="100%" height="auto" alt="&nbsp;" border="0">
</td>
</tr>

<tr>
<td class="hw l" width="50%" bgcolor="#ecf4f7" align="right" style="padding: 25px 20px 25px 25px;">
<span class="blue" style="color: #0085c1;">my home address</span><br><br>
Unit 2A<br>
6 Carnarvon Road<br>
Caulfield North<br>
Victoria 3161
</td>
<td class="hw r" width="50%" bgcolor="#ecf4f7" style="padding: 25px 25px 25px 20px;">
<span class="blue" style="color: #0085c1;">my delivery address</span><br><br>
Unit 2A<br>
6 Carnarvon Road<br>
Caulfield North<br>
Victoria 3161
</td>
</tr>

<tr class="fw">
<td class="fw whitetxt" colspan="2" bgcolor="#0085c1" align="center" style="color: #ffffff;padding: 25px 25px 25px 25px;">
<span class="h1" style="font-size: 2em;font-weight: bold;">what you've applied for... nice!</span>
</td>
</tr>

<tr class="null" style="padding: 0px 0px 0px 0px;">
<td class="null bottom-border" colspan="2" style="padding: 0px 0px 0px 0px;border-bottom: 2px solid #f1f1f0;">
<a href="#" target="_blank"><img src="http://meetbryce.com/client-files/mim/ipad.png" width="100%" height="auto" alt="apple ipad 3 - 3G/WiFi 16gb - $30/week - $120/month - all together $1,560" border="0"></a>
</td>
</tr>

<tr class="fw">
<td class="fw bottom-border" colspan="2" style="border-bottom: 2px solid #f1f1f0;padding: 25px 25px 25px 25px;">
<span class="h2" style="font-size: 1.4em;font-weight: bold;">Step 1\. Set up your Centrelink deduction by:</span>
<br><br>
<span class="blue" style="color: #0085c1;">Logging into your Centrelink account online at http://www.centrelink.gov.au</span>
<ul>
    <li>Select ‘Deductions’, ‘add new deduction’ then click ‘Start’&lt;/li>
    <li>Enter the service providers CRN “555074568C”&lt;/li>
    <li>    Select service category ‘Food Clothing and Household Items’ and click continue</li>
    <li>Select ‘MAKE IT MINE / COMPUTERS FOR ALL’ and click continue</li>
    <li>Use the purchase details above to complete the deduction amount (fortnightly amount), frequency, start date (ASAP) and target amount.</li>
    <li>Confirm that all details are correct!</li>
</ul>
<span class="blue" style="color: #0085c1;">Or call Centrelink on 13 61 50</span>
<ul>
    <li>Let the Centrelink employee know that you wish to start payments into the "Make It Mine / Computers For All account" account.</li>
    <li>You will need to quote our Centrelink Reference Number: “555074568C”&lt;/li>
    <li>Provide the purchase details above to the Centrelink employee</li>
</ul>
<span class="blue" style="color: #0085c1;">Or visit a Centrelink outlet</span>
</td>
</tr>

<tr class="fw">
<td class="fw bottom-border" colspan="2" style="border-bottom: 2px solid #f1f1f0;padding: 25px 25px 25px 25px;">
<span class="h2" style="font-size: 1.4em;font-weight: bold;">Fast track your application</span>
<br><br>
You can fast track your application by setting up your Centrelink deductions online and emailing or faxing your signed paperwork to us! 
<br><br>
<span class="blue sixteen" style="color: #0085c1;font-size: 1.1em;">Fast tracked applications can be approved within days and the package dispatched on approval!</span>
<br><br>
An additional copy of your paperwork will also be sent to your postal address. Once your paperwork is returned, and payments have been confirmed your order will move to the final stages of processing. Most orders ship directly through the manufacturer. Processing takes up to two working days after your account is approved for dispatch. After this point, please allow up to 8-10 working days for your order to be delivered. We will email and SMS you at every stage of the order progression.
</td>
</tr>

<tr class="fw">
<td class="fw" colspan="2" style="padding: 25px 25px 25px 25px;">
<span class="h2" style="font-size: 1.4em;font-weight: bold;">Download your application receipt</span>
<br><img src="http://meetbryce.com/client-files/mim/pdf.png" alt="&nbsp;" align="left" border="0">
<span class="red strong" style="color: #fa696e;font-weight: bold;">contract-ord587fd27-1695-4a7e-8562-873ce4f087b6.pdf</span><br>
<strong>1206k</strong> <a href="#" target="_blank">View</a> <a href="#" target="_blank">Download</a>
</td>
</tr>

<tr class="hw">
<td class="fw" bgcolor="#f1f1f0" style="padding: 25px 25px 25px 25px;">
<img src="http://meetbryce.com/client-files/mim/footer-logo.png" alt="Make it Mine copyright &copy; 2012 make it mine.&lt;br&gt;all rights reserved" align="left" border="0">
</td>
<td class="fw" bgcolor="#f1f1f0" style="padding: 25px 25px 25px 25px;">
<a href="#"><img src="http://meetbryce.com/client-files/mim/footer-facebook.png" alt="We like you… do you like us?" border="0"></a>
</td>
</tr>

</table>
<!-- end main content table -->
</td>
<td width="auto"></td>
</tr>
</tbody>
</table>

</body> 
```

# java - 我应该扩展 Swing JCheckBox 吗？

> ID：12327551
> 
> 赞同：2
> 
> 时间：2012-09-08T02:23:36.647
> 
> 标签：java, swing, jcheckbox

我有一个带有多个 JCheckBox 的 Swing 应用程序。每个`JCheckBox`对应`Foo` 于我程序中其他地方的另一个类型的对象。对于 type 的每个对象`Foo`，我将提供其中一个 JCheckBox 供用户单击（它告诉 Foo 对象它们是否应该显示在 UI 上）。

我目前正在做的是使用名称属性`JCheckBox`作为对`Foo`对象字符串“名称”的引用。我觉得一个更干净的解决方案是扩展`JCheckBox`以向其添加一个额外的字段，以便`JCheckBox`可以通过简单地存储对它的引用来跟踪它附加到哪个 Foo 对象。想法？人们是否定期扩展 Swing 组件，以便他们可以将控制器/视图中的部件链接回模型？我会遇到一些可怕的陷阱吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T05:27:51.310

如果没有额外的细节，很难了解这个特定示例的全貌。您可以使用操作来完成此任务。有关更多详细信息，请参阅[如何使用操作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)。这是一个例子：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.*;
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;
import java.util.ArrayList;
import java.util.List;

import javax.swing.*;

public class CheckBoxDemo {

    static class Foo {
        private boolean visible;
        private String name;

        public Foo(String name) {
            this.name = name;
        }

        public boolean isVisible() {
            return visible;
        }

        public void setVisible(boolean visible) {
            this.visible = visible;
            System.out.println(getName() + ".setVisible:" + visible);
        }

        public String getName() {
            return name;
        }
    }

    static class FooAction extends AbstractAction {
        private Foo foo;

        public FooAction(Foo foo) {
            super(foo.getName());
            this.foo = foo;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            JCheckBox checkBox = (JCheckBox) e.getSource();
            foo.setVisible(checkBox.isSelected());
        }
    }

    private static void createAndShowGUI() {
        List<Foo> fooList = new ArrayList<Foo>();
        fooList.add(new Foo("Foo1"));
        fooList.add(new Foo("Foo2"));
        fooList.add(new Foo("Foo3"));

        JPanel content = new JPanel(new BorderLayout());

        JPanel fooPanel = new JPanel();
        for (Foo foo : fooList) {
            fooPanel.add(new JCheckBox(new FooAction(foo)));
        }

        content.add(fooPanel, BorderLayout.NORTH);

        final JTextArea textArea = new JTextArea();
        textArea.setEditable(false);
        JScrollPane scrollPane = new JScrollPane(textArea);
        scrollPane.setPreferredSize(new Dimension(200, 200));
        content.add(scrollPane, BorderLayout.CENTER);

        JFrame frame = new JFrame("CheckBoxDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(content);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        // just for brevity of example
        System.setOut(new PrintStream(new OutputStream() {
            @Override
            public void write(int b) throws IOException {
                textArea.append(String.valueOf((char) b));
            }
        }));
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T06:16:46.540

一般规则是*不要*出于应用原因扩展 JSomething：它们被设计为按原样*使用*。

您的上下文听起来像是一个绑定场景。@Max 建议（使用动作作为绑定代理）指出了要遵循的方向，对于更复杂的要求，您可以考虑使用绑定框架（如 JGoodies 或 BetterBeansBinding）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T03:44:22.327

这是一个常见的要求，您可以将`JCheckbox`a 扩展到`JFooCheckBox`其中包含 Foo 对象的某些对象，并且侦听器应负责 Foo 的显示/隐藏。

# api - 在 JDK 之外使用附加 API

> ID：12327552
> 
> 赞同：2
> 
> 时间：2012-09-08T02:24:09.467
> 
> 标签：api, compatibility, java

我有一个小应用程序，它使用 Attach API 在运行时修改一些第三方类。唉，我遇到了一个大问题：Attach API 只随 JDK 一起提供。我可以从 JDK 复制必要的文件并添加到我的项目中，但是负责这个的库（附加。（dll|so））我不能。这是因为我必须从 jar 内的资源中复制 attach.lib，并将其放在 JRE/lib 目录中。

**如果用户不是 Linux 机器上的 root 用户，则该操作将不起作用，因此失去对许多用户的兼容性（因为该应用程序应该在服务器上运行，并且大多数服务器都是 Linux，我不能确定都是root）**

我查看了所有负责附加 API 的类（VirtualMachine、AttachProvider 等），但没有找到加载库的地方。

是否有可能做到这一点？我的意思是，我可以在 JDK 安装之外使用 Attach API 吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:53:27.510

您可以通过修改来做到这一点`java.library.path`：

```
static void addToLibPath(String path) throws NoSuchFieldException,
                                             SecurityException,
                                             IllegalArgumentException,
                                             IllegalAccessException
{
    if (System.getProperty("java.library.path") != null) {
        // If java.library.path is not empty, we will prepend our path
        // Note that path.separator is ; on Windows and : on Unix-like,
        // so we can't hard code it.
        System.setProperty("java.library.path",
                           path + System.getProperty("path.separator")
                           + System.getProperty("java.library.path"));
    } else {
        System.setProperty("java.library.path", path);
    }

    // Important: java.library.path is cached
    // We will be using reflection to clear the cache
    Field fieldSysPath = ClassLoader.class.getDeclaredField("sys_paths");
    fieldSysPath.setAccessible(true);
    fieldSysPath.set(null, null);
} 
```

通话`addToLibPath("path")`将添加`"path"`到`java.library.path`.

请注意，它`java.library.path`是缓存的，需要反射才能清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:28:28.617

据我所知，您需要运行希望从 JDK（而不是 JRE）中执行“附加”的应用程序。通过这样做，您无需担心提供 Attach API 或其依赖项——因为它们都是由 JDK 提供和管理的。也就是说，您不应该对此有任何“root”问题 - 因为您可以以任何用户身份提取和运行/使用 JDK（不必以“root”身份安装/执行）。也就是说，您只需要确保执行附加的程序和所附加的程序以相同的操作系统用户身份运行，以免遇到安全限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T22:56:57.730

我们的经验是，如果没有完整的 JDK，就没有可靠的方法来使用附加 API。这在 Windows 上尤其严重。您可能会让它工作，但您可能想要查看普通的旧 JMX。

# c++ - while循环搞砸了

> ID：12327559
> 
> 赞同：0
> 
> 时间：2012-09-08T02:25:05.277
> 
> 标签：c++, while-loop

当我选择演员或电影标题时，我正在尝试编写一个存在 while 循环的 while 循环。但由于某种原因，它无法正常工作，它告诉我该行有错误`while (selecton)`。有人有想法吗？

```
string selection;

while ( selection )
{
    cin >> selection;

    if ( selection == "actress" )
    {
        cout << "hey" << endl;
        break;
    }
    else if ( selection == "movie title" )
    {
        cout << "bye";
        break;
    }
    else
    {
        cout << "Please choose a selection";
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T02:25:54.133

它应该是`while(cin>>selection)`

但是最好写`while(getline(cin,selection))`，这样你就不会跳过白线。

# ruby-on-rails - Capybara & Rspec：我怎样才能始终测试布局，这样我就不必为它重写代码了？

> ID：12327562
> 
> 赞同：0
> 
> 时间：2012-09-08T02:25:33.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, rspec-rails

我试图在我的测试中坚持 DRY 的做事方式。我有两种布局，`public`根据`application`用户是否登录显示某些链接和 css。我想知道他们是否是一种方式，或者我如何始终测试我的公共或应用程序链接和内容？他们使用我`views/shared`文件夹中的不同视图。

这是我的欢迎页面的测试示例，该页面是公开的：

规范/请求/pages_spec.rb

```
describe 'Pages' do

  describe 'Welcome Page' do

    before { visit root_path }
    response.should render_template("layouts/public")

    it 'should have public footer present' do
      find_link('Home').visible?
      find_link('Login').visible?
      find_link('Help').visible?
    end
  end

end 
```

现在公共页脚是公共布局的一部分，我有更多属于这个布局的代码。我的目标是只写一次并将其放入某个方法中，并将其用于我需要的页面/测试。我该怎么做？我不想写看看是否在每个测试中都使用了适当的布局及其内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:35:36.607

重要的是要记住，RSpec 只是 Ruby，或者更具体地说，它是用 Ruby 编写的用于测试的[DSL 。](http://en.wikipedia.org/wiki/Domain-specific_language)

所以，只需定义一个方法。

```
describe 'Pages' do

  describe 'Welcome Page' do

    before { visit root_path }
    response.should render_template("layouts/public")

    it 'should have public footer present' do
      links_are_visible?.should be true
    end

    # Call this wherever, whenever you need it
    def links_are_visible?
      find_link('Home').visible? && find_link('Login').visible && find_link('Help').visible?
    end
  end

end 
```

您还可以执行本文中概述的共享示例和其他事情：http: [//testdrivenwebsites.com/2011/08/17/different-ways-of-code-reuse-in-rspec/](http://testdrivenwebsites.com/2011/08/17/different-ways-of-code-reuse-in-rspec/)

# objective-c - NSNumber doubleValue 返回 NaN

> ID：12327566
> 
> 赞同：4
> 
> 时间：2012-09-08T02:26:46.667
> 
> 标签：objective-c, nsnumber

如下图所示，`nsdt`的值约为 0.033，但该`doubleValue`方法返回 NaN。为什么不返回 0.033？

```
-(void) updateWithDTNSTime:(NSNumber*) nsdt;
{
    double dt = [nsdt doubleValue];

    if(isnan(dt))
    {
        printf("nan\n");
    }

    [self updateWithDTime:dt];
} 
```

![](../Images/5ecc661ddb0caf94c2a41d575da55d5d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:17:28.440

检查创建 nsdt 变量的代码。它应该是这样的：

```
nsdt - [NSNumber numberWithDouble:0.033]; 
```

如果您的代码如下所示，您将获得 0：

```
int x = 0.033;
NSNumber *test = [NSNumber numberWithDouble:x];
double y = [test doubleValue];
NSLog(@"y= %f", y); 
```

# ruby-on-rails - 活动记录迁移和重构

> ID：12327572
> 
> 赞同：0
> 
> 时间：2012-09-08T02:27:55.130
> 
> 标签：ruby-on-rails, refactoring, rails-migrations

我正在对我当前的项目进行相当陡峭的重构。在到达这个十字路口之前，我有两个模型，我意识到它们实际上是相同的模型，但处于不同的状态，我想以这种方式表示系统。结果，我必须将即将失效的模型的所有对象移到另一个模型中并正确设置新的状态列。这个问题在代码方面很简单，特别是因为模型非常相似。

对我来说，痛点是我必须在双向迁移的某个中间点进行这些更改。从这里到那里的路径将类似于：

```
add_column :model_ones, :status, :string

make_all_model_two_records_into_model_one_records()

drop_table :model_twos 
```

显然，另一个方向也很容易定义

```
create_table :model_twos do |t|
  ...
end

move_model_ones_with_status_x_into_model_twos_table

remove_column :model_ones, :status 
```

这是一件好事，但是当我到达那个神奇的时刻时，我从我的回购中删除了 ModelTwo.rb，那么整个事情就变成了锅。那时，我永远无法在不阅读该源代码的情况下从头开始迁移。我对此的反应是要么直接编写 sql 来来回移动数据，要么将数据转换从迁移中取出。如果我把它拿出来，它到底跑到哪里去了？迁移时如何确保它在正确的时间发生？

假设我克服了问题的那个方面，我现在可以愉快地从零迁移到现在。我永远不能向下迁移，对吗？这是否代表了某个时刻，分阶段迁移的概念对我来说已经死了？

我想我可以回去按摩早期的迁移，以使世界相信 ModelTwo 根本不存在，但是违反现有迁移的神圣性的想法让我的皮肤毛骨悚然。

人们必须在某个地方使用 Rails 进行这种重构。它必须是可行的，对吧？我不知道该怎么做。

提前谢谢，jd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:14:37.130

我会：

1.  创建添加状态列的迁移

2.  运行 rake 任务以移动数据

3.  测试所有正确移动的数据

4.  运行另一个迁移以删除不需要的旧表。

有时您需要更改旧的迁移以确保您可以轻松构建开发环境。我不知道你为什么认为这是一个问题。迁移是为了帮助你，而不是你应该感到有义务遵守的一些魔法规则。

有时，您可能过于拘泥于最佳实践，而忘记了很难有适用于所有情况的“最佳实践规则”。它们可以作为很好的指南，但最终最佳实践是为您的项目做最好的事情。

# java - 在Java中查找字符串中的最小单词

> ID：12327576
> 
> 赞同：1
> 
> 时间：2012-09-08T02:29:03.873
> 
> 标签：java, string

我试图在用户输入的字符串中找到最小的单词。这是我到目前为止所拥有的：

```
import java.util.*;
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    String myText = sc.next();
    String[] myWords = myText.split(" ");
    int shortestLength,shortestLocation;

    shortestLength=(myWords[0]).length();

    shortestLocation=0;

    for (int i=1;i<myWords.length;i++) {
        if ((myWords[i]).length() < shortestLength) {
            shortestLength=(myWords[i]).length();
            shortestLocation=i;
        }
    }
    System.out.println(myWords[shortestLocation]);
} 
```

如果我输入`"SMALLEST WORD SHOULD BE A"`了，输出应该是`A`，但它只是给了我字符串的第一个单词。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T02:32:03.670

您的算法很好，但不要使用[`next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)：

```
String myText = sc.next(); 
```

它只会读取一个标记，即第*一个*单词 use [`nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)，它将读取*整*行：

```
String myText = sc.nextLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T14:38:44.953

要获取完整的字符串，您必须使用该方法

```
sc.nextLine(); 
```

因此它将采用完整的字符串。

# java - 我应该为我的标签主机中的每个标签创建一个新的活动/xml吗？

> ID：12327581
> 
> 赞同：1
> 
> 时间：2012-09-08T02:30:37.420
> 
> 标签：java, android, android-activity, tabs, android-tabhost

我应该为我的标签主机中的每个标签创建一个新的活动/xml吗？这会影响性能并造成延迟，还是会提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T05:45:17.453

您应该在 TabHost 中使用 Fragments 而不是 Activity。TabActivity 本身现在已被弃用。检查 Android 示例项目的使用情况。一个不错的片段教程 - [http://www.vogella.com/articles/Android/article.html#fragments_tutorial](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)

# matlab - 在 MATLAB 中不使用循环或嵌套循环操作创建矩阵

> ID：12327589
> 
> 赞同：2
> 
> 时间：2012-09-08T02:32:26.757
> 
> 标签：matlab, loops, nested

我想在不使用任何循环的情况下创建一个矩阵，就像我在 MATLAB 2011a 中为形成 matrix 制作的以下程序一样`n(x,y)`。

`segment1`并且`segment2`具有相同的维度（您可以采用任意两个矩阵）。

```
segment1 = [1 2 3;4 5 6];
segment2 = [5 2 6;9 1 2];

seg1_max = max(max(segment1));
seg2_max = max(max(segment2));

n = zeros(seg1_max, seg2_max);
i = 1; j = 1;

while i<=size(segment1, 1)        
    while j<=size(segment1, 2)    
        x = segment1(i, j);
        y = segment2(i, j);
        n(x,y) = n(x,y)+1;
        j = j+1;    
    end;
i = i+1; j = 1;
end; 
```

我也使用 for 制作了这个程序`loop`，但我想在不使用循环操作的情况下获取矩阵 n(x,y)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:27:57.407

该功能`accumarray`可用于此目的。给定您的`segment1`and `segment2`，以下计算`m`将与您的 相同`n`：

```
x = segment1(:);
y = segment2(:);
m = accumarray([x y], ones(size(x))); 
```

# c++ - 模板类：访问派生的普通类方法

> ID：12327590
> 
> 赞同：0
> 
> 时间：2012-09-08T02:32:52.257
> 
> 标签：c++, templates, inheritance

我有这样的事情：

```
class Container1 {
  public:
    method1() { ... }
}
class Container2 {
  public:
    method1() { ... }
}

template<class C = Container1>
class X : public C {
  public:
    using C::method1();
    .....
    X(string& str) : C(str) {};
    X& other_method() { method1(); ...; }
} 
```

我的问题是为什么我必须使用“使用 C::method1()”才能访问该方法。我找到的大多数答案都是针对模板类继承模板类的情况。通常他们会提到使用“this->”，但这在这种情况下似乎不起作用。我可以做一些更短的...

另外我怀疑我遇到的另一个错误与同一问题有关：

```
no match call for (X<Container1>) (<std::string&>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:52:13.317

首先，在 ctor 的定义中你不应该使用`<C>`. 这很可能会使编译器感到困惑：

```
template<class C = Container1>
class X : public C 
{
    X(string& str) : C(str) { }
    X& other_method() { method1(); ...; }
} 
```

另一点是编译器可能不确定它应该调用什么：`base_class::method1()`或`template_param::method1()`. 实际上这是同一件事，但编译器可能无法理解这一点。如果不同的编译器在这里表现不同，我不会感到惊讶。

这些是我没有运行测试的 2 美分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:57:16.057

呼叫`this->method1()`可能会失败，因为`Container1::method1`并且`Container2::method1`是私人的。您可以通过以下方式解决此问题：

```
class Container1 {
public:
    void method1() { ... }
}; 
```

然后，回到“为什么我必须使用`using`或`this->`调用模板基类中定义的方法？”，答案是`method1`这里是一个依赖名称，因为它依赖于模板参数`C`。因此你需要告诉编译器“嘿，你看到这个`method1`调用了吗？嗯，那个符号应该在我继承的模板类中定义。”。

由于编译器在您实际实例化类模板之前不知道您要继承什么，因此您必须指出成员函数应该由该模板参数定义。否则，编译器将看到对非限定函数的调用，并将生成错误，因为在 class 中找不到名为“method1”的方法`X`。

[该](https://stackoverflow.com/questions/1527849/how-do-you-understand-dependent-names-in-c)线程包含有关依赖名称的一些信息。

您的代码中的另一个错误是您的构造函数：

```
X<C>(string& str) : ... 
```

该代码格式不正确。类`X`的构造函数构造函数应该这样定义：

```
X(string& str) : .... 
```

# php - SQL 服务器计数和连接

> ID：12327599
> 
> 赞同：0
> 
> 时间：2012-09-08T02:35:41.810
> 
> 标签：php, sql, sql-server-2008, join, pivot

大家好，我在 sql server 中进行查询时遇到问题。

我有 3 个表：testcases、executions 和 execution_bugs：

**测试用例**

```
id | name
-------------
1  | Login
2  | Logout 
```

**处决**

```
id | testcase_id
-----------------
1  | 1
2  | 2
3  | 1 
```

**执行错误**

```
execution_id | bug_id
----------------------
1            | B-1
3            | B-2 
```

而且我需要知道定义了多少测试用例，有多少已经执行，有多少测试用例有错误，有多少没有。

我正在寻找一个可以给我这种结果的查询：

```
testcases_n | executed | with_bugs | without_bugs | bugs_amount
---------------------------------------------------------------
2           | 2        | 1         | 1            | 2 
```

考虑到表结构，这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:47:29.487

你的意思是这样的：

```
declare @testcases as table ( id int, name varchar(16) )
insert into @testcases ( id, name ) values
  ( 1, 'login' ), ( 2, 'Logout' )

declare @executions as table ( id int, testcase_id int )
insert into @executions ( id, testcase_id ) values
  ( 1, 1 ), ( 2, 2 ), ( 3, 1 )

declare @execution_bugs as table ( execution_id int, bug_id varchar(16) )
insert into @execution_bugs ( execution_id, bug_id ) values
  ( 1, 'B-1' ), ( 3, 'B-2' )

select
  ( select count(42) from @testcases ) as testcases_n,
  ( select count(distinct testcase_id) from @executions ) as executed,
  ( select count(distinct e.testcase_id) from @executions as e inner join @execution_bugs as eb on eb.execution_id = e.id ) as with_bugs,
  ( select count(42) from @testcases ) - ( select count(distinct e.testcase_id) from @executions as e inner join @execution_bugs as eb on eb.execution_id = e.id ) as without_bugs,
  ( select count(42) from @execution_bugs ) as bugs_amount 
```

# c# - 为什么 `Texture2D` 不暴露其像素数据？

> ID：12327604
> 
> 赞同：2
> 
> 时间：2012-09-08T02:36:55.337
> 
> 标签：c#, graphics, xna, xna-4.0, texture2d

我可以很容易地想到在很多情况`Texture2D`下`GetData<>(); SetData<>();`更改`RenderTarget2D`.

有什么真正的理由*不*为单个像素公开设置方法吗？如果没有，有没有办法在不使用上述方法的情况下修改单个像素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T04:04:41.910

出于性能原因，纹理数据在初始化纹理时几乎总是由图形驱动程序复制到视频内存 (VRAM)。这使得 GPU 上运行的着色器获取纹理的速度*显着*加快；如果每个纹理缓存未命中都必须通过 PCIe 总线获取丢失的数据，您肯定会不高兴！

但是，正如您所注意到的，这会使 CPU 读取或修改数据变得困难和/或变慢。不仅 PCIe 总线相对较慢，而且 VRAM 通常不能被 CPU 直接寻址；数据通常必须使用特殊的低级 DMA 命令传输。这正是您在使用 XNA 时看到性能下降的原因`GetData<>()`，并且`SetData<>()`：杀死您的不是函数调用开销，而是他们必须在您背后将数据来回复制到 VRAM 的事实。

如果您想修改 VRAM 中的数据，低级渲染 API（例如 OpenGL 或 Direct3D 11）为您提供了三个选项：

1.  在更改之前临时“映射”像素数据（包括将其复制回主内存）并在编辑完成时“取消映射”它（将更改提交回 VRAM）。这可能是`GetData<>()`内部`SetData<>()`正在做的事情。
2.  使用像 OpenGL's 这样的函数`glTexSubImage2D()`，它基本上跳过“映射”步骤并将新的像素数据直接复制回 VRAM，覆盖以前的内容。
3.  通过运行将纹理写入作为渲染目标的着色器，指示 GPU 代表您进行修改。

XNA 建立在 Direct3D 之上，因此它也必须在这些限制范围内工作。所以，没有原始像素数据给你！

（顺便说一句，以上所有内容也适用于 GPU 缓冲区数据。）

# functional-programming - 接受列表列表并返回列表的 SML 方法

> ID：12327605
> 
> 赞同：0
> 
> 时间：2012-09-08T02:37:22.540
> 
> 标签：functional-programming, sml, typing, smlnj

我需要创建一个方法，该方法采用列表列表（如`[ [2,3,] , [4,5] ]`）并返回类似`[2,3,4,5]`. 我可以计算出逻辑，但我不知道如何在 SML 中定义方法。我试过了，但它没有编译

```
 fun appendall(l:list list):list = ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T10:27:35.120

看看 List 库中的 concat 函数。

```
Moscow ML version 2.01 (January 2004)
Enter `quit();' to quit.
- load "List";
> val it = () : unit
- List.concat [[1,2],[3,4],[5,6]];
> val it = [1, 2, 3, 4, 5, 6] : int list
- quit(); 
```

另一种解决方案是使用 List.foldr

```
val concat = List.foldr op@ []; 
```

或者你可以把它写成一个递归函数

```
fun concat2 [] = []
  | concat2 (x::xs) = x @ concat2 xs 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:15:07.953

看起来你只是把你的类型弄错了。列表必须是某物的列表（例如`int list`）。如果内容的类型无关紧要，您可以使用类型变量`'a`而不是具体类型（因此在您的情况下是 an`'a list`和 an `'a list list`）。

但是，您几乎从不需要 ML 中的类型声明。只需编写没有它们的函数，编译器将能够从您对它们执行的操作中推断出变量的类型。

# java - 应用 scale() 时 PShapeSVG contains() 函数不起作用

> ID：12327606
> 
> 赞同：0
> 
> 时间：2012-09-08T02:37:28.580
> 
> 标签：java, processing

正如标题所说，如果我缩放形状，为什么它不起作用`shape.scale(0.5)`？

`shape(0,0,200,200)`即使我的意思是我绘制的形状不是原始尺寸，它也不起作用。这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:21:22.840

这是一个错误，虽然我不确定有多严重。正如您从测试中发现的那样，`contains()`当使用转换（平移/旋转/缩放）时，该方法不起作用。

我有两个有点 hacky 的解决方法：

1.  存储一个单独的顶点数组，手动添加（偏移/平移）和乘法（缩放）位置值，然后测试该[点是否位于多边形内](http://paulbourke.net/geometry/insidepoly/)。
2.  使用转换矩阵，从屏幕（典型处理）坐标转换为转换后的 SVG 坐标是相反的。

第一个解决方案听起来有点工作和毫无意义的数据重复，更不用说在处理旋转时很烦人，而且对于“堆叠”/复杂的转换也容易出错。

第二种解决方法看起来有点笨拙，因为 contains() 应该刚刚工作，但它使用了处理类，所以它还不错。它是这样工作的：

1.  创建一个转换矩阵，将所需的转换应用于形状（例如 translate()、rotate()、scale()）并存储它
2.  将此变换应用于形状
3.  存储此转换矩阵的逆矩阵以将屏幕坐标转换为 svg 坐标（带有转换），这样 contains() 将起作用。

svg 来自**Examples > Basic > Shape > GetChild**。如果要按原样测试代码，可以打开草图文件夹（*Ctrl + K / CMD + K ）以获取“usa-wikipedia.svg”：*

```
import processing.opengl.*;

PShape ohio;
PMatrix2D coordSysSvgInv;//svg coordinate system inversed

void setup() {
  size(1200, 480,OPENGL);//the catch is, even though we use PMatrix2D, PShape's applyMatrix() only seems to work with the P3D or OpenGL renderer
  PShape usa = loadShape("usa-wikipedia.svg");
  ohio = (PShape)usa.getChild("OH");

  PMatrix2D transform = new PMatrix2D();    //apply transforms(position,rotation,scale) to this matrix
  transform.scale(2);                       //be aware that the order of operation matters!
  transform.translate(-800,-300);           //this matrix can be used to convert from screen coordinats to SVG coordinates
  coordSysSvgInv = transform.get(); //clone the svg to screen transformation matrix
  coordSysSvgInv.invert();          //simply invert it to get the screen to svg

  ohio.applyMatrix(transform);              //apply this transformation matrix to the SVG
}

void draw() {
  //update
  PVector mouseInSVG = screenToSVG(mouseX,mouseY);
  boolean isOver = ohio.contains(mouseInSVG.x,mouseInSVG.y);
  //draw
  background(255);
  ohio.disableStyle();
  fill(isOver ? color(0,192,0) : color(255,127,0));
  shape(ohio);
}
PVector screenToSVG(float x,float y){
  PVector result = new PVector();//create a new PVector to store transformed vector
  coordSysSvgInv.mult(new PVector(x,y),result);//transform PVector by multiplying it to the inverse svg coord. sys.
  return result;
} 
```

我注意到[applyMatrix()](http://processing.googlecode.com/svn/trunk/processing/build/javadoc/core/processing/core/PShape.html#applyMatrix%28processing.core.PMatrix2D%29)方法仅适用于`P3D`和`OPENGL`渲染器，即使我正在[传递 PMatrix2D](http://code.google.com/p/processing/source/browse/trunk/processing/core/src/processing/core/PShape.java#1967)实例，否则会出现此警告：

```
applyMatrix() with x, y, and z coordinates can only be used with a renderer that supports 3D, such as P3D or OPENGL. Use a version without a z-coordinate instead. 
```

'cleaner' 选项是修改PShape 类中的[contains()方法，然后重新编译 Processing 的 core.jar 并使用更新后的 jar。](http://code.google.com/p/processing/source/browse/trunk/processing/core/src/processing/core/PShape.java#1701)如果这是一个一次性的小项目，我不知道它是否值得麻烦，从上面获得稍微混乱的代码可能比重新编译/更新 core.jar 更快。

# codeigniter - Codeigniter 逻辑运算符

> ID：12327608
> 
> 赞同：-3
> 
> 时间：2012-09-08T02:38:17.440
> 
> 标签：codeigniter

我在没有得到更多回复之前问了这个问题，如果这有帮助，我决定重新发布它。我希望我通过重新发布没有做错什么？

```
$total_cost_for_A = $this->admin_model->total_cost_for_A($branch, $department, $date);
$total_cost_for_B = $this->admin_model->total_cost_for_B($branch, $department, $date); 
```

变量*$total_cost_for_A 和 $total_cost_for_B* 保存模型中 mysql 求和查询的返回值。如果未找到记录，则查询返回 false。现在，我正在尝试执行此操作。

```
if(($total_cost_for_A === FALSE) && ($total_cost_for_B === FALSE))
{
  $data['no_record'] = 'No Record Found!';
  $this->load->view('admin/bookings', $data);
}
else
{
    $this->load->view('admin/summary', $data);
} 
```

这个测试总是失败并改为执行 else 语句，这不是什么。任何帮助将不胜感激。谢谢

**这里是函数**

```
 function total_cost_for_A($branch, $department, $date)
    {
        if($branch == 'Head Office' && $department == 'Summary')
        {
            $select_amount_paid = 'SELECT SUM(total_amount) total_amount FROM graphics_booking AS bk
            WHERE bk.date = "'.$date.'"';
        }

        $result = $this->db->query($select_amount_paid);

        if($result->num_rows() > 0)
        {
            return $result;
        }
        else
        {
            return FALSE;
        }
    }

    function total_cost_for_B($branch, $department, $date)
    {
        if($branch == 'Head Office' && $department == 'Summary')
        {
            $total_LF_amount = 'SELECT SUM(total_amount) total_amount FROM large_format_print
            WHERE date = "'.$date.'"';
        }

        $result = $this->db->query($total_LF_amount);

        if($result->num_rows() > 0)
        {
            return $result;
        }
        else
        {
            return FALSE;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:11:28.770

尝试像这样改变

```
 $select_amount_paid = 'SELECT SUM(total_amount) total_amount FROM graphics_booking AS bk
        WHERE date = '.$date;//i assume that date is an colum from graphics_booking 
```

你对“bk.date”有误，如果它在你的表中，你可以直接给出 where 条件，并尽量避免模型中的函数和分配的变量的名称相同。尝试更改为不同的。否则你的代码看起来不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:19:52.273

不，当你返回你不能返回整个，你需要返回一行

所以你需要在你的模型中做：

```
 function total_cost_for_A($branch, $department, $date)
    {
        if($branch == 'Head Office' && $department == 'Summary')
        {
            $select_amount_paid = 'SELECT SUM(total_amount) total_amount FROM graphics_booking AS bk
            WHERE bk.date = "'.$date.'"';
        }

        $result = $this->db->query($select_amount_paid);

        if($result->num_rows() > 0)
        {
            return $result->row();     // you missed out here
        }
        else
        {
            return FALSE;
        }
    } 
```

与 total_cost_for_B() 相同

# macos - QPushButton 更改同一布局中其他小部件的边距

> ID：12327609
> 
> 赞同：5
> 
> 时间：2012-09-08T02:38:24.787
> 
> 标签：macos, qt, qt-creator

我有一个大布局，其中包含以下结构的小部件和布局：

```
QVBoxLayout
  QTableView
  QPushButton 
```

我将布局上的边距、填充和间距设置为 0。在 Mac OS X 上呈现的方式是，按钮不会填满其所有空间。相反，它周围有一些填充物。神奇的是，布局似乎知道这一点，并确保表格视图的宽度与按钮的宽度完全相同：

![QPushButton 引起的魔法填充](../Images/fea0e7e7f44c20c8ce9f2f2d30ab3e32.png)

当我删除按钮时，表格视图将返回到其全宽：

![这里没有魔法填充](../Images/e6341df5cca6d169926919cf29c5c6eb.png)

如何更改它以使按钮以及表格视图变得与布局一样宽？

我已经使用了样式表的填充和边距，虽然我可以使用它们来使按钮更宽，但树视图周围的额外填充仍然存在。到目前为止，我唯一的解决方案是将按钮包装在另一个小部件中，然后通过样式表将其边距和填充设置为 0，但随后我失去了圆形外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:26:50.090

您必须将布局边距设置为 0，而不是 QPushButton 的边距。

看一看。这是设计师的外观和感觉：

![在此处输入图像描述](../Images/e8a32a862baf02addac8232b8932bfbe.png)

这是 QWidget 的布局属性：

![在此处输入图像描述](../Images/31fb0109e34ed39a221687604bfe8a42.png)

这是最终的小部件：

![在此处输入图像描述](../Images/c0bf0fd38958f23fd64be2805109f4c4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:33:55.530

唔。有趣的。以下代码用于测试您的问题，但找不到任何问题。它按原样工作。（在 Mac OSX 上使用 Qt 4.8.2）。代码是自包含的。只需将其作为 main.cpp 构建应用程序，然后单击显示和隐藏按钮进行测试。

```
#include <QtGui>

class FramedWidget : public QFrame
{
public:
    FramedWidget(QWidget* inner, QWidget* parent=0)
        : QFrame(parent)
    {
        setFrameStyle(QFrame::Panel | QFrame::Sunken);
        QVBoxLayout* lay = new QVBoxLayout(this);
        lay->setContentsMargins(0,0,0,0);
        lay->setSpacing(0);
        lay->addWidget(inner);
    }
};

class LayoutWidget : public QSplitter
{
public:
    LayoutWidget(QWidget* parent=0)
        : QSplitter(parent)
    {
        QTableWidget* table = new QTableWidget;
        m_button = new QPushButton("Testing...");
        QPushButton* showButton = new QPushButton("Show");
        QPushButton* hideButton = new QPushButton("Hide");
        connect(showButton, SIGNAL(clicked()),
                m_button, SLOT(show()));
        connect(hideButton, SIGNAL(clicked()),
                m_button, SLOT(hide()));

        QWidget* tester = new QWidget;
        QVBoxLayout* testerLay = new QVBoxLayout(tester);
        testerLay->addWidget(table);
        testerLay->addWidget(m_button);

        QWidget* controller = new QWidget;
        QVBoxLayout* controllerLay = new QVBoxLayout(controller);
        controllerLay->addWidget(showButton);
        controllerLay->addWidget(hideButton);
        controllerLay->addWidget(new QTextEdit);

        this->addWidget(new FramedWidget(controller));
        this->addWidget(new FramedWidget(tester));
    }
protected:
    QPushButton* m_button;
};

int main(int argc, char** argv)
{
    QApplication app(argc, argv);
    LayoutWidget* editor = new LayoutWidget;
    editor->show();
    editor->raise();
    return app.exec();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T01:14:56.567

经过更多的实验，我发现使用 QToolButton 而不是 QPushButton 可以按预期工作。这不是解释，而是解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T22:38:09.960

另一个保留按钮外观的解决方法是将布局放在 QFrame 容器小部件中，并在样式表中设置负填充。容器必须是 QFrame 否则填充将不起作用。

# java - 具有 HashMap 支持的 contains() 方法的 Set 的准确性？

> ID：12327611
> 
> 赞同：1
> 
> 时间：2012-09-08T02:38:54.137
> 
> 标签：java, hashmap, set, hashcode, hash-code-uniqueness

嗨，我正在使用由 HashMap 支持的 Set 来跟踪我已经在图中遍历了哪些边。我计划通过添加存储在每个边缘中的数据的哈希码的结果来键入集合。

```
v.getData().hashCode() + wordV.getData().hashCode() 
```

但是，当使用 contains 检查边缘是否在集合中时，这有多可靠？难道我不能假设得到误报吗？有没有办法克服这个？

让我担心的确切说法是：

```
edgeSet.contains(v.getData().hashCode() + wordV.getData().hashCode()) 
```

谢谢！

哦，顺便说一句，我正在使用 Java。

编辑：

我应该在问题中说明这一点。在我的图中，没有边对象，有顶点对象，每个顶点对象都包含更多顶点对象的列表，即边。因此，我想结合您的回答得出的问题是：

我可以使用 Set 来存储对信息的引用而不是对象......吗？即我可以存储为顶点的数据对象添加两个哈希码的结果吗？

编辑2：

我确实在为我的 hashmap 使用 Java 库，我将其声明如下：

```
Set<Integer> edgeSet = Collections.newSetFromMap(new ConcurrentHashMap<Integer, Boolean>()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T02:47:54.053

注意：根据您的问题，我无法判断您使用的是[`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)，还是您自己的家庭滚动实现。请注意，Java只是忽略值`HashSet`的包装器。只需调用内部地图。`HashMap``HashSet.contains``containsKey`

`HashMap.containsKey`使用与 相同的查找`get`。这将计算哈希并使用它来找到正确的存储桶。从那里它会走桶并使用`equals`，直到找到完全匹配。假设元素类型既正确地实现了`hashCode`，则使用因为最终用于确认而`equals`没有机会获得误报。`containsKey``equals`

相关的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java#HashMap.getEntry%28java.lang.Object%29)在 package-private 方法`getEntry`中，它被`containsKey`和使用`get`：

```
final Entry<K,V> getEntry(Object key) {
    int hash = (key == null) ? 0 : hash(key.hashCode());
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash &&
            ((k = e.key) == key || (key != null && key.equals(k))))
            return e;
    }
    return null;
} 
```

**编辑：**

> 我可以使用 Set 来存储对信息的引用而不是对象......吗？即我可以存储为顶点的数据对象添加两个哈希码的结果吗？

不，您需要实现一个表示此信息的新类并将其实例存储在`Set`. 这可能是一个简单的 POJO，每个信息都有一个字段，并且正确地覆盖`hashCode`和覆盖。`equals`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T02:49:26.930

根据定义，哈希码会发生冲突。将它们加在一起没有任何帮助。

你应该让你的图的边缘支持 hashCode 和 equals，然后简单地将边缘放在一个哈希集中。

```
class Edge { ... equals and hashCode ... }

HashSet<Edge> traversed = new HashSet<Edge>();
traversed.add(edge);
...
if(traversed.contains(edge)) ... 
```

如果您要对边进行编号，则 Integer 已经具有良好的哈希码和等于，因此请使用它：

```
HashSet<Integer> traversed = new HashSet<Integer>();
if(traversed.contains(edgeNumber)) ...
traversed.add(3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T02:43:16.547

只要你同时覆盖`hashCode()`and `equals()`，你会没事的。哈希码永远不能保证是唯一的。也就是说，您有点滥用 Set。通过存储具有正确实现的类`hashCode()`和`equals()`方法，例如`contains()`' 将具有完美的准确性。但是，这不是您在这里使用它的方式。听起来您几乎正在构建自己的数据结构/集合，因此您需要考虑以与“哈希”集合相同的方式执行此操作-使用 HashMap 存储哈希的存储桶-哈希值作为键，然后是要比较的值的集合。这将允许您快速查看父映射是否甚至具有您正在寻找的哈希值。如果没有，你就完成了（假）。如果是这样，那么您需要确认其“存储桶”具有您正在寻找的特定值（真）。

# c# - 使用自定义 JavascriptConverter 在 JavascriptSerializer 中编码空数组

> ID：12327613
> 
> 赞同：0
> 
> 时间：2012-09-08T02:39:28.907
> 
> 标签：c#, asp.net

我正在使用自定义转换器来编码对象模型。在客户端，我需要一个空数组，但我不想将此数组包含在服务器上的对象模型中，因为该数组仅在客户端使用。

这就是我所拥有的：

```
public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
{

    MyObjectModel TheObjectModel = obj as ObjectModel;
    Dictionary<string, object> OutputJson = new Dictionary<string, object>();

    OutputJson.Add("MyEmptyArray", new Array()); // not working here 
```

我需要放什么而不是`new Array()`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:55:52.987

使用`ArrayList`而不是`Array`. （另外，我认为您的意思是写“OutputJson”而不是“Output”。）

```
OutputJson.Add("MyEmptyArray", new ArrayList()); 
```

* * *

注意错误信息： `Array`是一个抽象类。

> 无法创建抽象类或接口“System.Array”的实例

# asp.net-mvc-4 - 如何从 FileStreamResult 引发 http 404？

> ID：12327614
> 
> 赞同：5
> 
> 时间：2012-09-08T02:39:37.110
> 
> 标签：asp.net-mvc-4

通常我会`return HttpNotFound()`，但我的方法返回 a`FileStreamResult`并且我得到

> 无法将类型“System.Web.Mvc.HttpNotFoundResult”隐式转换为“System.Web.Mvc.FileStreamResult”

当我尝试构建时。文件结果是否有替代版本？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T01:40:52.740

键入您的操作方法以返回基本*ActionResult*而不是特定的*FileStreamResult*。然后你可以返回任何你想要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T02:42:04.197

你可以抛出一个 HttpException。

```
throw new HttpException(404, "Not found"); 
```

# javascript - 以下 JavaScript 代码与 Facebook 相关

> ID：12327617
> 
> 赞同：0
> 
> 时间：2012-09-08T02:41:09.807
> 
> 标签：javascript

```
<!--Load scripts for Facebook scraper-->
 <div id="fb-root"></div>
<script>
 window.fbAsyncInit = function() {
  FB.init({
  appId  : '154617751273927',
  status : true, // check login status
  cookie : true, // enable cookies to allow the server to access the session
  xfbml  : true  // parse XFBML
});
};

 (function() {
var e = document.createElement('script');
e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
e.async = true;
document.getElementById('fb-root').appendChild(e);
}()); 
```

评论中使用“刮刀”一词是什么意思？这看起来像一个异步函数，它是[http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js)

我不确定这个 al.js 做了什么。附加到 fb-root 元素的结果。

这个异步函数有什么作用，为什么它被称为“scraper”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T03:27:49.930

你在你的问题中问过-

`I am not sure what this al.js does`

实际上`all.js`是`Facebook JavaScript SDK (Software Development Kit)`一个包含所有常用选项的 JavaScript 文件。

`What does this async function do`

该`async`函数加载`SDK/all.js`文件`asynchronously`，这意味着在加载该文件期间它不会停止页面呈现。

SDK 将元素插入到 fb-root 中，这些元素期望相对于 body 或相对于靠近页面顶部的元素定位。

`window.fbAsyncInit`加载 SDK 后立即运行分配给的函数。您希望在 SDK 加载后运行的任何代码都应放置在此函数中并在调用 FB.init 之后。

`Why is it called a scraper`

> 网络抓取与网络索引密切相关，网络索引使用机器人对网络上的信息进行索引，是大多数搜索引擎采用的通用技术。相比之下，网络抓取更侧重于将网络上的非结构化数据（通常是 HTML 格式）转换为可以在中央本地数据库或电子表格中存储和分析的结构化数据。网络抓取也与网络自动化有关，网络自动化使用计算机软件模拟人类浏览。网络抓取的用途包括在线价格比较、天气数据监控、网站变化检测、研究、网络混搭和网络数据集成。[**阅读更多...**](http://en.wikipedia.org/wiki/Web_scraping)

`A little about faceBook __scraper__ from my understanding`

实际上，它可以从网站（从您的网站，因为您使用过 it/all.js）中抓取数据，并将该数据发送到 Facebook **。**基本上，这种**抓取**`Like`的一个常见示例是网页上的 FaceBook按钮。当用户点击 facebook Like 按钮时，**scraper**（在本例中为 all.js）会从该站点**抓取**一些数据并将这些数据发送到 Facebook，FaceBook 会将这些数据发布到用户的个人资料中，但这只是一个示例。FaceBook **scraper**允许用户“与 Facebook 联系”以获得身临其境的定制博客文章或视频体验。用户的 FB 信息，如姓名、年龄、位置、头像、兴趣等，被抓取并编织成品牌故事。

[你可以在这里阅读更多](https://developers.facebook.com/docs/reference/javascript/)。

在网络上，一些网站`__scraper__` 还使用来自优秀网站的仍然数据/内容，并通过更改/修改原始数据发布到其他网站。几天前，我在另一个网站上找到了我的 SO 答案之一，我真的很震惊。我已经在 meta 上报道[过这个](https://meta.stackexchange.com/questions/71820/report-high-google-ranking-se-content-copiers-here/139839#139839)，你可能会觉得很有趣。

# php - php jqgrid Subgrid 2级别未呈现

> ID：12327619
> 
> 赞同：1
> 
> 时间：2012-09-08T02:41:16.927
> 
> 标签：php, jqgrid, subgrid

我在这里搜索，但找不到我的问题的解决方案。

我试图使用示例代码，Simple Subgrid 工作正常。但是，子网格 2 级别不起作用。

**displaygrid.php**包含：

```
$grid->setSubGridGrid("displaysubgrid.php"); 
```

当我尝试在**displaysubgrid.php中包含以下代码时**

```
$grid->querySubGrid(array(&$rowid)); 
```

我得到像

```
 {"rows":[{"stockNumber":"LOT1","stock":"5","expiration":"2013-01-01"}]} 
```

这意味着数据传递是可以的。但是，当我尝试使用以下

```
$subtable = $subtable."_t";
$pager = $subtable."_p";
$grid->renderGrid($subtable,$pager, true, null, array(&$rowid), true,true); 
```

它显示空网格！

# java - java.lang.NoClassDefFoundError: com.example.samplemap.CustomItemizedOverlay

> ID：12327620
> 
> 赞同：0
> 
> 时间：2012-09-08T02:41:17.257
> 
> 标签：java, android, google-maps

我正在我的 Android google-map 项目中使用 mapviewballons，但我似乎遇到了上述问题。

```
09-08 02:15:11.792: E/AndroidRuntime(484): FATAL EXCEPTION: main
09-08 02:15:11.792: E/AndroidRuntime(484): java.lang.NoClassDefFoundError: com.example.samplemap.CustomItemizedOverlay 
```

我已经梳理了代码，但还没有找到这个问题的确切来源。感谢您能负担得起的任何帮助，以帮助我解决此问题。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        final MapController mc = mapView.getController(); 
        mc.setZoom(16);

        List<Overlay> mapOverlays = mapView.getOverlays();
       // Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
        Drawable drawable = getResources().getDrawable(R.drawable.marker);
        CustomItemizedOverlay<CustomOverlayItem> itemizedoverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);

        LocalGeoPoints loc = new LocalGeoPoints();
        for (CustomOverlayItem a : loc.overlayitems) {
            itemizedoverlay.addOverlay(a);
        } 
        mapOverlays.add(itemizedoverlay);

    }

public class CustomItemizedOverlay<Item extends OverlayItem> extends BalloonItemizedOverlay<CustomOverlayItem> {

    private ArrayList<CustomOverlayItem> m_overlays = new ArrayList<CustomOverlayItem>();
    private Context c = null;

    public CustomItemizedOverlay(Drawable defaultMarker, MapView mapView) {

        super(boundCenter(defaultMarker), mapView);
        c = mapView.getContext();
    }

    public void addOverlay(CustomOverlayItem overlay) {
        m_overlays.add(overlay);
        populate();
    }

    @Override
    protected CustomOverlayItem createItem(int i) {
        return m_overlays.get(i);
    }

    @Override
    public int size() {
        return m_overlays.size();
    }

    @Override
    protected boolean onBalloonTap(int index, CustomOverlayItem item) {
        Toast.makeText(c, "onBalloonTap for overlay index " + index,
                Toast.LENGTH_LONG).show();
        return true;
    }

    @Override
    protected BalloonOverlayView<CustomOverlayItem> createBalloonOverlayView() {
        // use our custom balloon view with our custom overlay item type:
        return new CustomBalloonOverlayView<CustomOverlayItem>(getMapView().getContext(), getBalloonBottomOffset());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:44:42.187

请将公共类 CustomItemizedOverlay 设为私有类

# android - 在android中从网络获取HTML时出错

> ID：12327625
> 
> 赞同：0
> 
> 时间：2012-09-08T02:42:12.723
> 
> 标签：android, url, android-emulator, avd, android-version

我有 1 个 EditText 1Button 和 1TextView，当我在 Edittext 中输入 url 并单击按钮时，textView 将显示来自网站的 Html，我在 edittext 中输入了 url。我想通过使用 url 从 web 获取 html。

问题

当我在（AVD Target 2.3.3 版）中使用此代码时。AndroidManifest (minSdkVersion="10" targetSdkVersion="10") 和我也更改了 targetSdkVersion="15") 两者都正常工作。但是当我将其更改为在（AVD 目标版本 4.0.3）中运行时，它不起作用。是吗？这是我的代码

```
 final EditText et = (EditText) findViewById(R.id.editText1);
    final Button b = (Button) findViewById(R.id.button1);
    final TextView tv = (TextView) findViewById(R.id.textView1);

    b.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
        try {
            URL url = null;
            url = new URL(et.getText().toString());
            URLConnection conn = url.openConnection();
            BufferedReader buff = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line ="";
            while((line = buff.readLine())!= null){
                tv.append(line);

            }
        } catch (Exception e) {

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:21:00.543

当您`NetworkOnMainThreadException`使用 Honeycomb 或更高版本时，您将无法在 UI 线程上访问网络。您需要在 AsycnTask 中完成您的工作。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/9442527/networkonmainthreadexception-when-reading-from-web)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:41:40.413

```
 //before OnCreate() method
    URL url = null;
     final TextView tv;
    ////////

     b.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
            try {
                url = new URL(et.getText().toString());

    new YourAsyncTask.execute();
                }
            } catch (Exception e) {

            }

    //after onCreate() method

     class YourAsyncTask extends AsyncTask<Void, Void, Void>
        {

            private ProgressDialog progressDialog;

            @Override
            protected void onPreExecute()
            {
                //show your dialog here
                progressDialog = ProgressDialog.show(YourActivity.this,"Please wait...", "Loading  ...", true);
            }

            @Override
            protected Void doInBackground(Void... params)
            {  

                //make your request here - it will run in a different thread
                try
                {

                URLConnection conn = url.openConnection();
                BufferedReader buff = new BufferedReader(new  InputStreamReader(conn.getInputStream()));
                String line ="";
                while((line = buff.readLine())!= null){
                    tv.append(line);

                }
                catch (Exception e)
                {
                    // TODO: handle exception
                }

                return null;
            }

            @Override
            protected void onPostExecute(Void result)
            {

                try
                {   
                    progressDialog.dismiss();
///Show your Data here

                }
                catch (Exception e)
                {
                    // TODO: handle exception

                }

            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:57:48.233

检查 Menifest 中的 INTERNET PERMISSION。

# android - OnTouch 延迟 (Android)

> ID：12327626
> 
> 赞同：0
> 
> 时间：2012-09-08T02:42:25.990
> 
> 标签：android

我有一个应用程序，每次触摸 ImageButton 后我都需要延迟。

我尝试了 Thread.sleep() 方法，但我不确定这是否是处理它的最佳方法。

大家有什么推荐的？

任何帮助表示赞赏！

还有一件事：我希望触发 onTouch() 事件的内容，然后我想在下一个 onTouch() 事件中延迟“X”秒。这就像防止用户在按钮中单击太多次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T02:51:15.533

由于所有触摸事件都由 UI 线程处理，`Thread.sleep()`因此会阻塞您的 UI 线程，这不是您想要的（我希望）。我认为解决您的问题的最正确方法是`postDelayed(Runnable, long)`在您的处理程序中使用接口，`onClick`这允许您延迟执行：

```
@Override
public void onClick(View v)
{
    postDelayed(new Runnable()
    {

        @Override
        public void run()
        {
            // do your stuff here
        }
    }, 10000); //10sec delay
} 
```

更新：

如果您希望用户防止在您的图像视图上单击过快，我强烈建议您使用`onClick`而不是`onTouch`（除非有严重的原因）

但是，请参阅可能对您有所帮助的代码片段：

```
private boolean blocked = false;
private Handler handler = new Handler();

@Override
public boolean onTouchEvent(MotionEvent event)
{
    if (event.getAction() == MotionEvent.ACTION_DOWN)
    {
        if (!blocked)
        {
            blocked = true;
            handler.postDelayed(new Runnable()
            {
                @Override
                public void run()
                {
                    blocked = false;
                }
            }, 1000);
        } else
        {
            return false;
        }
    }
    return super.onTouchEvent(event);
} 
```

# javascript - 为什么我无法访问 Chrome 内置函数 $？

> ID：12327628
> 
> 赞同：3
> 
> 时间：2012-09-08T02:43:59.797
> 
> 标签：javascript, google-chrome, dom

然后输入`$`Chrome 控制台`return`：

```
$;
function () { [native code] } 
```

并获得一个 DOM 元素：

```
$("container");
<div class=​"container" id=​"container">​…​&lt;/div>​ 
```

但它不能在脚本块中工作：

```
window.onload = function  (argument) {
    var container = $("container");
    Uncaught ReferenceError: $ is not defined
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T02:47:09.637

您收到错误是因为，虽然 Google Chrome 控制台有自己的 $ 快捷方式运算符，但它对原始窗口不可用：

[Chrome 开发者工具：控制台](https://developers.google.com/chrome-developer-tools/docs/console)

如果你想要在你的应用程序中使用类似的功能，你需要包含一些其他库（jQuery 是这里流行的选择，但还有其他的，如 Prototype、MooTools 等），或者你可以简单地从 jQuery 控制台中删除函数如果这就是你所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T02:48:26.193

通过查看`$`Chrome 控制台中该功能的实际内容，可以推断它实际上只不过是 Chrome 开发人员在控制台中内置的“工具箱功能”。由于它位于控制台中，因此您无法从可用的窗口访问它。

说的内容：

```
function $(element) {
  if (arguments.length > 1) {
    for (var i = 0, elements = [], length = arguments.length; i < length; i++)
      elements.push($(arguments[i]));
    return elements;
  }
  if (Object.isString(element))
    element = document.getElementById(element);
  return Element.extend(element);
} 
```

# ios - iOS phonegap-plugin-facebook-connect 与 Facebook iOS 应用程序

> ID：12327631
> 
> 赞同：0
> 
> 时间：2012-09-08T02:44:36.420
> 
> 标签：ios, facebook, cordova, phonegap-plugins

我一直在尝试使[phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect) cordova 插件*简单*的示例工作，我遇到了一个奇怪的问题。

*   首先，我的iPhone 上**有****Facebook iOS 应用程序**：

在基于*简单*示例的测试应用程序中，当我单击登录按钮时，它只是切换到 Facebook iOS 应用程序，然后切换回我的应用程序。

单击“我”按钮给我一个错误`"an active access token must be used to query information about the current user"`，这意味着**登录不成功**

*   然后我从我的 iPhone**中删除**了**Facebook iOS 应用程序：**

有效。它会打开带有 Facebook 授权页面的 Safari，当我单击“确定”时，它会切换回我的应用程序并**成功**触发`auth.login`事件。

 **这是一个已知的问题 ？有没有办法解决它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:27:12.467

我找到了解决方法：

在 Facebook.m

```
- (void)authorize:(NSArray *)permissions {
  self.permissions = permissions;

 [self authorizeWithFBAppAuth: NO safariAuth:YES]; //Use Safari Auth instead of FB App
} 
```

使用此解决方法，无论是否安装，都不会使用 Facebook iOS 授权。

[Github问题#25](https://github.com/davejohnson/phonegap-plugin-facebook-connect/issues/25)**

# java - 特定语言环境的 JFormattedTextField 货币格式

> ID：12327638
> 
> 赞同：2
> 
> 时间：2012-09-08T02:46:44.657
> 
> 标签：java, swing, locale, jformattedtextfield

我已使用以下链接中的信息来显示特定语言环境的货币格式：

[如何在运行时更改 JFormattedTextField 的格式？](https://stackoverflow.com/questions/5204705/how-to-change-the-format-of-a-jformattedtextfield)

但是在更改语言环境时，格式并没有改变。

这是代码。

```
package testapp;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Locale;
import javax.swing.DefaultComboBoxModel;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JComboBox;
import javax.swing.JFormattedTextField;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.SwingConstants;
import javax.swing.WindowConstants;
import javax.swing.text.DefaultFormatterFactory;
import javax.swing.text.NumberFormatter;

/**
 *
 * @author Sanjeev
 */
public class JFormattedTextFieldAndCurrency extends javax.swing.JFrame {

    private class LocaleInfo implements Comparable<LocaleInfo> {

        private Locale locale;

        public Locale getLocale() {
            return locale;
        }

        public void setLocale(Locale locale) {
            this.locale = locale;
        }

        @Override
        public int compareTo(LocaleInfo localeInfo) {
            return this.locale.getDisplayLanguage().compareTo(localeInfo.locale.getDisplayLanguage());
        }

        @Override
        public String toString() {
            return locale.getDisplayLanguage() + " " + locale.getDisplayCountry();
        }
    }

    public JFormattedTextFieldAndCurrency() {
        initComponents();
        loadLocales();
        localeCombo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                updateField();
            }
        });
        this.setLocationRelativeTo(null);
        this.setTitle("JFormatted Text Field & Currency");
        updateField();
    }

    private void loadLocales() {
        DefaultComboBoxModel<LocaleInfo> localeModel = new DefaultComboBoxModel<>();
        localeCombo.setModel(localeModel);
        ArrayList<LocaleInfo> localeInfos = new ArrayList<>();
        for (Locale locale : Locale.getAvailableLocales()) {
            LocaleInfo localeIno = new LocaleInfo();
            localeIno.setLocale(locale);
            localeInfos.add(localeIno);
        }
        Collections.sort(localeInfos);
        for (LocaleInfo localeInfo : localeInfos) {
            localeModel.addElement(localeInfo);
        }
        infoLabel.setText(localeModel.getSize() + " Locales available.");
    }

    private void updateField() {
        LocaleInfo localeInfo = (LocaleInfo) localeCombo.getSelectedItem();
        NumberFormatter currencyFormatter = new NumberFormatter(NumberFormat.getCurrencyInstance(localeInfo.getLocale()));
        DefaultFormatterFactory currencyFormatterFactory = new DefaultFormatterFactory(currencyFormatter, currencyFormatter, currencyFormatter);
        currencyField.setFormatterFactory(currencyFormatterFactory);
        currencyField.setText("1234567.89");
        System.out.println("currency format set to : "+localeInfo.locale.getDisplayCountry());
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        localisationPanel = new JPanel();
        jLabel11 = new JLabel();
        localeCombo = new JComboBox();
        infoLabel = new JLabel();
        currencyField = new JFormattedTextField();
        jLabel1 = new JLabel();

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setResizable(false);

        jLabel11.setText("Select Locale : ");

        jLabel1.setHorizontalAlignment(SwingConstants.TRAILING);
        jLabel1.setText("Currency : ");

        GroupLayout localisationPanelLayout = new GroupLayout(localisationPanel);
        localisationPanel.setLayout(localisationPanelLayout);
        localisationPanelLayout.setHorizontalGroup(
            localisationPanelLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(Alignment.TRAILING, localisationPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(localisationPanelLayout.createParallelGroup(Alignment.TRAILING)
                    .addComponent(infoLabel, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(Alignment.LEADING, localisationPanelLayout.createSequentialGroup()
                        .addGroup(localisationPanelLayout.createParallelGroup(Alignment.LEADING, false)
                            .addComponent(jLabel11, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel1, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addGroup(localisationPanelLayout.createParallelGroup(Alignment.LEADING)
                            .addComponent(currencyField)
                            .addComponent(localeCombo, 0, 256, Short.MAX_VALUE))))
                .addContainerGap())
        );
        localisationPanelLayout.setVerticalGroup(
            localisationPanelLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(localisationPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(localisationPanelLayout.createParallelGroup(Alignment.BASELINE)
                    .addComponent(jLabel11)
                    .addComponent(localeCombo, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(ComponentPlacement.RELATED)
                .addGroup(localisationPanelLayout.createParallelGroup(Alignment.BASELINE)
                    .addComponent(currencyField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1))
                .addPreferredGap(ComponentPlacement.RELATED, 68, Short.MAX_VALUE)
                .addComponent(infoLabel, GroupLayout.PREFERRED_SIZE, 24, GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        getContentPane().add(localisationPanel, BorderLayout.CENTER);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    public static void main(String args[]) {

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JFormattedTextFieldAndCurrency().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private JFormattedTextField currencyField;
    private JLabel infoLabel;
    private JLabel jLabel1;
    private JLabel jLabel11;
    private JComboBox localeCombo;
    private JPanel localisationPanel;
    // End of variables declaration//GEN-END:variables
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T03:18:08.217

如果您确实使用`setText`，则显示会更改，但值不会更新。您应该使用[JFormattedTextField.setValue](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFormattedTextField.html#setValue%28java.lang.Object%29)而不是`setText()`，即：

代替：

```
currencyField.setText("1234567.89"); 
```

和：

```
currencyField.setValue(1234567.89); 
```

这是引用[如何使用格式化文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)：

> 请注意，尽管 JFormattedTextField 类从 JTextField 类继承了 setText 方法，但您通常不会对格式化的文本字段调用 setText 方法。如果这样做，字段的显示会相应更改，但值不会更新（除非字段的格式化程序不断更新它）。

# python - wxPython MacOS X Lion 全屏模式

> ID：12327641
> 
> 赞同：1
> 
> 时间：2012-09-08T02:47:41.720
> 
> 标签：python, macos, wxpython, osx-lion

我正在制作一个需要全屏工作的 wxPython 应用程序。我想使用 OS X Lion 中的新全屏模式。如何让全屏图标出现在右上角？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T05:41:42.437

在[修复错误 #14357](http://trac.wxwidgets.org/ticket/14357)之前，没有*直接*的方法可以仅使用我知道的 wxPython 函数来执行此操作。

但是，您可以绕过 wxWidgets 并直接访问 Cocoa API 来做您需要的事情。请注意，您*必须*使用 wxMac/Cocoa 绑定（wxPython 2.9 或更高版本）。

这是使框架具有全屏功能所必需的代码：

```
# from http://stackoverflow.com/questions/12328143/getting-pyobjc-object-from-integer-id
import ctypes, objc
_objc = ctypes.PyDLL(objc._objc.__file__)

# PyObject *PyObjCObject_New(id objc_object, int flags, int retain)
_objc.PyObjCObject_New.restype = ctypes.py_object
_objc.PyObjCObject_New.argtypes = [ctypes.c_void_p, ctypes.c_int, ctypes.c_int]

def objc_object(id):
    return _objc.PyObjCObject_New(id, 0, 1)

def SetFullScreenCapable(frame):
    frameobj = objc_object(frame.GetHandle())

    NSWindowCollectionBehaviorFullScreenPrimary = 1<<7
    window = frameobj.window()
    newBehavior = window.collectionBehavior() | NSWindowCollectionBehaviorFullScreenPrimary
    window.setCollectionBehavior_(newBehavior) 
```

这是一个演示它的简短测试应用程序：

```
import wxversion
wxversion.select('2-osx_cocoa') # require Cocoa version of wxWidgets
import wx

class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)
        self.Bind(wx.EVT_CLOSE, self.OnClose)
        wx.Button(self, label="Hello!") # test button to demonstrate full-screen resizing
        SetFullScreenCapable(self)

    def OnClose(self, event):
        exit()

app = wx.App()
frame = Frame()
frame.Show()
app.MainLoop() 
```

# oracle - 如何在 ORACLE PL/SQL 创建或替换存储过程中捕获并返回（或打印）异常

> ID：12327643
> 
> 赞同：11
> 
> 时间：2012-09-08T02:48:20.103
> 
> 标签：oracle, stored-procedures, plsql

我有一个 PL/SQL 存储过程，我想在其中运行多个更新，然后捕获任何异常并在 out 参数中返回它们。为了简单起见，在下面的代码块中，我只是将异常代码和错误消息输出到控制台。但是，下面的代码块不起作用（我遇到“找到/期待”语法错误）

```
 CREATE OR REPLACE PROCEDURE DBP.TESTING_SP AS 
    DECLARE
    v_code  NUMBER;
    v_errm  VARCHAR2(64);
    BEGIN
    UPDATE PS_NE_PHONE_TBL SET NE_PHONE_TYPE = 'TEST' WHERE NEMPLID_TBL = 'N14924';

    EXCEPTION
    WHEN OTHERS THEN
    v_code := SQLCODE;
    v_errm := SUBSTR(SQLERRM, 1, 64);
    DBMS_OUTPUT.PUT_LINE (v_code || ' ' || v_errm);
    END TESTING_SP;
    / 
```

我正在尝试做的正确语法是什么？

我在一个论坛上阅读

> “使用 Create 或 Replace 语法时，不能使用 Declare。Declare 仅适用于未命名的匿名块。因此，要么删除第 1 行并创建一个匿名块，要么删除第 2 行并创建一个命名过程。”

但我不确定如何创建一个匿名块或创建一个命名过程来完成我想做的事情（如果那确实是“解决方案”）。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T03:01:39.850

只需删除 DECLARE 语句。

# iphone - 什么决定了 RSA 中加密字符串的长度？

> ID：12327645
> 
> 赞同：4
> 
> 时间：2012-09-08T02:48:28.310
> 
> 标签：iphone, encryption, rsa

我知道一些小的加密字符串的长度为：160、196 ..

什么决定大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:04:21.447

加密的单个“块”的字节大小与密钥大小相同，与模的大小相同。私有指数通常大小相同，但*可能更小*。公共指数的大小可以达到密钥大小，但通常要小得多，以允许更有效的加密或验证。大多数时候它是费马的第四个数，65537。

请注意，这是加密数据的位大小。*必须*填充纯数据。PKCS#1 v1.5 最多使用密钥大小 - 纯文本填充 11 个字节。不过，保持更高的边距当然是明智的，比如最少 19 字节的填充（填充的 16 字节随机而不是 8 字节的随机填充）。

出于这个原因，并且因为执行 RSA 加密/解密的成本很高，RSA 主要与对称原语（如 AES）结合使用——在 AES 的情况下，随机 AES 对称密钥被加密而不是纯文本。然后使用该密钥对纯文本进行加密。

# google-maps - 如何删除 Google 地图自动完成下拉列表中的“Powered by Google”标志？

> ID：12327651
> 
> 赞同：35
> 
> 时间：2012-09-08T02:50:52.613
> 
> 标签：google-maps

文档表明，如果我们将自动完成功能与 Google 地图一起使用，我们可以删除底部的“Powered by Google”徽标。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-08-27T13:34:15.880

**Animesh Nandi**的回答有点老了。实际上，要删除“*由 Google 提供支持*”徽标，我必须使用以下代码：

```
.pac-container:after {
    /* Disclaimer: not needed to show 'powered by Google' if also a Google Map is shown */

    background-image: none !important;
    height: 0px;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-12T10:56:14.470

看一下这个..

它在我的应用程序中工作。

将它放在您的样式表中，然后观看魔术。

`.pac-container:after{ content:none !important; }`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-06T01:52:05.703

> 我们的自动填充服务不需要与地图一起使用，但如果未显示地图，则需要在文本字段下方显示“由 Google 提供支持”徽标。

[http://googlegeodevelopers.blogspot.in/2012/09/google-places-autocomplete-now-includes.html](http://googlegeodevelopers.blogspot.in/2012/09/google-places-autocomplete-now-includes.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-13T00:25:11.447

有时，“由 Google 提供支持”的图片可能会被您放在自动完成列表中的样式所掩盖、冲突或不一致。在这些情况下，最好用样式文本替换图像。

图像本身是在一个`:after`伪元素中定义的。您所要做的就是替换`content`and`font-size`规则。确保您使用的文本归功于 Google，并确保设置字体大小，因为默认情况下它设置为零。

```
.pac-container:after {
  content: "Powered by Google";
  font-size: 10px;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-27T05:21:31.940

由谷歌提供支持的最佳删除方法

```
.pac-container:after{display:none !important;} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-18T19:20:31.007

我找到了两种方法

第一种方式

```
.pac-container:after {
    background-image: none !important;
    height: 0px;
    padding: 0;
    margin: 0;
} 
```

第二种方式

```
.pac-container:after {
  content: none !important;
} 
```

两者都将删除 Google 地图自动完成下拉列表中的“Powered by Google”徽标

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-23T05:09:45.690

如果您使用 pods for iOS Google Autocomplete，您可以在 Pods -> GooglePlaces -> GooglePlaces.bundle -> Resources 中使用移除源标识来移除标识，有一个名为“powered-by-google ..”的标识删除，清理项目，并且重建（我不知道这是否允许）但它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-18T16:28:57.673

尝试这个：

```
.pac-container:after{visibility: hidden!important;position: absolute; top: -9999px; 
left: -9999px;opacity: 0;width: 0; height: 0;} 
```

* * *

**免责声明：**如果还显示 Google 地图，则不需要显示“由 Google 提供支持”——感谢[Kani 的](https://stackoverflow.com/users/1462830/kani)评论

# c - 理解 C 中的 For 循环

> ID：12327652
> 
> 赞同：3
> 
> 时间：2012-09-08T02:51:09.900
> 
> 标签：c, for-loop

在 C 中找出下面一段简单的 for 循环代码时，我几乎没有困难。

```
int j=20;
for(int i=0, j; i<=j ; i++, j--)     
    printf("i = %d and j = %d \n",i,j); 
```

将输出打印为

```
i=0 and j=2
i=1 and j=1 
```

`j=20`为什么它不`j=2`以`j=1`.

但是当我使用这段代码时

```
int j=20;
for(int i=0, j=20; i<=j ; i++, j--)     
    printf("i = %d and j = %d \n",i,j); 
```

它从正确开始

```
i=0 and j=20 upto ... i=9 and j= 11 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T02:54:40.470

你是。在 for 构造中声明 j 会创建一个新的（作用域的）j，它的值与外部不同。如果你没有初始化它，你会得到分配时内存中发生的任何垃圾。

像这样的变量称为“自动”变量，并分配在程序的堆栈上。当你需要一个时，会分配更多的堆栈空间。当它们超出范围时（实际上是函数返回时），它们会通过将它们全部弹出来进行清理。

当需要下一个自动存储位时，会发生同样的事情，然后您将获得堆栈中剩余的任何位模式作为您的新变量值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T03:42:51.337

请注意，在 for 循环的第一部分中您已经完成了`int i = 0, j`。这样做是声明一个名为的变量，该变量`j`具有**for 循环的本地范围**。`j`因此，在 for 循环之前声明和定义的内容与您在 for 循环范围内声明和定义的内容之间没有关系。在循环内部引用将引用`j`最里面的块，因此将`j`初始化为零，您将获得第一个输出。

另请注意，您很幸运， 的值`j`为零。它是一个自动变量，不能保证在定义时为零。

在下一个循环中，您会看到所需的输出，因为如前所述，在 for 循环内部定义的内容被引用，但是由于您已将for 循环的 local`j`值初始化为与外部相同的值（这与for循环内部），因此您会在问题中获得第二个输出。`j``j``j`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:25:14.003

这个问题是关于一行代码的。当你输入`int i=0, j;`一行时，它等于`int i = 0; int j;` 然而，当你输入时`int i=0, j=20;`，它会给你一个错误，除非 j 之前定义过，它不等于 `int i = 0; int j = 20;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T03:02:40.277

基本上这是`for`循环语法中常见的混淆。您的情况是：

```
int i=0, j; //create 2 int variables - i (which is initialized to 0) and uninitialized j 
```

这看起来类似于`for(i,j; i<j; i++, j--)`. 但是，您所做的 - 基本上是创建了额外的未初始化变量`j`。

# rss - 在提要中，可以多个 元素存在于 ?

> ID：12327654
> 
> 赞同：2
> 
> 时间：2012-09-08T02:51:17.240
> 
> 标签：rss, feed, markup, rss2

**准确地说......**一个有效的提要中是否可以存在多个`<content:encoded>`元素？`<item>`

* * *

**全文：**我正在为[Google Currents](https://www.google.com/producer/currents)修改我博客的 RSS 提要的标记，并且为了让应用程序以幻灯片形式在文章中显示图片库，我的提要的标记应如下所示：

```
<rss version="2.0" ... xmlns:media="http://search.yahoo.com/mrss/">
...
<item>
    <title>Item One</title>
    <link>http://example.com/news/item-one</link>
    <description>
        <p>This is an example feed item</p>
    </description>
    ...
    <pubDate>Thu, 04 Aug 2011 19:41:00 GMT</pubDate>
    <guid>http://example.com/news/item-one</guid>
    <media:content height="84" type="image/jpeg" width="140" url="http://static.example.com/photo1.jpg">
        <media:description>Caption for Photo 1</media:description>
    </media:content>
    <media:content height="100" type="image/jpeg" width="200" url="http://static.example.com/photo2.jpg">
        <media:description>Caption for Photo 2</media:description>
    </media:content>
    <content:encoded><![CDATA[
        <p>All the content goes here.</p>
        <p>This is another line.</p>
    ]]></content:encoded>
    ...
</item>
...
</rss> 
```

但是由于我的 WordPress 博客的工作方式，画廊会显示在文章中（这很常见），这意味着 RSS 提要中也会发生同样的情况。但该`<media:content>`元素不能是 的子元素`<content:encoded>`。

所以，我想知道我是否可以这样做并且它仍然是有效的 RSS 提要：

```
<rss version="2.0" ... xmlns:media="http://search.yahoo.com/mrss/">
...
<item>
    <title>Item One</title>
    <link>http://example.com/news/item-one</link>
    <description>
        <p>This is an example feed item</p>
    </description>
    ...
    <pubDate>Thu, 04 Aug 2011 19:41:00 GMT</pubDate>
    <guid>http://example.com/news/item-one</guid>

    <content:encoded><![CDATA[
        <p>All the content goes here.</p>
    ]]></content:encoded>

    <media:content height="84" type="image/jpeg" width="140" url="http://static.example.com/photo1.jpg">
        <media:description>Caption for Photo 1</media:description>
    </media:content>
    <media:content height="100" type="image/jpeg" width="200" url="http://static.example.com/photo2.jpg">
        <media:description>Caption for Photo 2</media:description>
    </media:content>

    <content:encoded><![CDATA[
        <p>This is another line.</p>
    ]]></content:encoded>

    ...
</item>
...
</rss> 
```

如您所见，我基本上会将`<content:encoded>`元素分成两部分，以便为幻灯片标记让路。所以，`<content:encoded>`一个`<item>`. 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:36:09.983

通过[W3C 的提要验证服务](https://validator.w3.org/feed/)运行我的提要后，答案似乎是“是”，提要中`<content:encoded>`可以存在多个元素`<item>`。

# asp.net-mvc-4 - 当我尝试使用字符串时，MVC AttributeRouting 总是给出 404

> ID：12327655
> 
> 赞同：0
> 
> 时间：2012-09-08T02:51:48.037
> 
> 标签：asp.net-mvc-4, attributerouting

我正在使用从 NuGet 安装的[这个包。](https://github.com/mccalltd/AttributeRouting/wiki)

我有一个看起来像这样的方法：

```
[GET("StreamFile/{filename}")]
public FileStreamResult StreamImageByFileName(string filename) 
```

我这样引用：

```
<img src="@Url.Action("StreamImageByFileName", new{filename=item.ThumbFile})" /> 
```

结果是这样的：

```
<img src="/StreamFile/3hg7p1wr_wjtkpn8-g80heh3f.jpg" /> 
```

但它从来没有进入我的方法，并且总是返回 404s。

为什么？它正确地反转了 URL，那么为什么它在向它发出请求时不匹配呢？

# php - 检查用户是否点击了按钮

> ID：12327659
> 
> 赞同：0
> 
> 时间：2012-09-08T02:52:27.433
> 
> 标签：php, mysql, pdo

我想做的基本上是检查用户是否点击了页面上的某个链接。该功能背后的想法是用户可以单击“谢谢！” 在网站上创建的帖子上，但他们只能提交一个“谢谢！” 每个帖子。

我为“谢谢！”创建一个简单的点击计数器没有问题。按钮，并使用 PDO 将计数保存到数据库中，但我不确定如何将点击分配给会话处于活动状态的用户。此外，帖子不断被添加到站点，所以我需要一个系统自动扩展到更多帖子。

任何指导表示赞赏，谢谢！

**注意：我知道我没有放任何示例代码，但我相信这对于优秀的程序员来说足够简单，可以快速掌握。**

编辑 **进一步考虑，IP不能用于区分用户，因为该网站将被同一IP上的许多人使用。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:57:13.123

用户是登录的还是匿名的？如果他们已登录，只需将他们的用户 ID 保存在会话变量中，然后将其与他们的投票一起上传到数据库中的表中。

我使用 Ajax 请求对 .php 页面执行类似操作，该页面插入带有会话用户 ID 和投票的行。

如果他们是匿名的，您可以保存他们的 IP，但这会导致共享相同 IP 地址的用户出现问题。另一个（不好的）选择是使用 cookie，但用户显然可以清除他们的 cookie 并再次投票。

# php - 在PHP中取消设置超过某个元素的所有数组元素

> ID：12327662
> 
> 赞同：0
> 
> 时间：2012-09-08T02:53:02.627
> 
> 标签：php, arrays

```
$example = array('First','Second','Third','Fourth','Fifth',... 
```

下面的代码将取消设置`$example`.

```
unset($example[2]); 
```

我怎样才能将`unset`所有元素都超过第三个元素？

之后我希望`$example`' 的价值是这样的：

```
$example = array('First','Second','Third'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T02:56:13.167

不要使用未设置，使用[array_splice](http://php.net/manual/en/function.array-splice.php)：

```
$example = array('First','Second','Third','Fourth','Fifth');
array_splice($example,3);
//$example = array('First','Second','Third'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:56:22.843

你可以用[`array_splice`](http://php.net/manual/en/function.array-splice.php)这个。

```
$example = array('First','Second','Third','Fourth','Fifth');
array_splice($example, 3);
var_dump($example);

array
  0 => string 'First' (length=5)
  1 => string 'Second' (length=6)
  2 => string 'Third' (length=5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T02:58:27.897

试试这个：

```
for ($i = count($array); $i > 3; $i--)
{
    array_pop($array);
} 
```

# ios - Phonegap中的时间格式

> ID：12327665
> 
> 赞同：1
> 
> 时间：2012-09-08T02:55:17.643
> 
> 标签：ios, cordova

在 phonegap 中，是否可以根据 iOS 中的设备设置以上午/下午或 24 小时格式显示时间？在设备上，我可以在设置中将“24 小时制”设置为打开或关闭。在phonegap app中，我想根据设置来调整时间格式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:02:08.943

我检查了 phoneGap 文档，似乎没有办法知道设备时间格式设置是什么。但这是个好主意，您应该为此功能向 Cordova（又名 Phonegap）团队提交功能请求。

[http://docs.phonegap.com/en/2.0.0/cordova_device_device.md.html#Device](http://docs.phonegap.com/en/2.0.0/cordova_device_device.md.html#Device)

现在这并不是说不存在可以与 PhoneGap 一起工作的第三方库。但是你必须寻找一个可以做到这一点的插件或编写你自己的插件。我对此进行了快速的 Google 搜索，但没有任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T19:55:55.777

您可以只使用cordova 内置的[全球化插件。](https://github.com/apache/cordova-plugin-globalization)例如，如果您运行，

```
navigator.globalization.dateToString(
    new Date(),
    function (date) { alert('date: ' + date.value + '\n'); },
    function () { alert('Error getting dateString\n'); },
    { formatLength: 'short', selector: 'date and time' }
); 
```

`date.value`将保存一个 dateString，它将显示时间格式（只需检查“AM”或“PM”是否在字符串中）。

# php - PHP 修剪，$variable[0] 仍然不显示任何内容

> ID：12327666
> 
> 赞同：1
> 
> 时间：2012-09-08T02:55:20.093
> 
> 标签：php, string, trim

将数据分配给一开始有很多空白的变量，然后我进行修剪以将其删除并希望回显应该是@的第一个字符。但是，回声没有显示任何内容。

```
$data = '        @ JWHS8282';

trim($data);

echo $data[0]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T02:57:00.967

[Trim](http://php.net/manual/en/function.trim.php)不接受引用参数：

```
$data = trim($data); 
```

它被定义为：

```
function trim( $input )
{
   ...
   return ...;
} 
```

不是

```
function trim( &$input )
{
   ...
} 
```

请注意，文档将 trim 的签名标记为返回字符串：

> 字符串修剪（字符串 $str [，字符串 $charlist ]）

# lisp - Lisp 格式化多项式

> ID：12327668
> 
> 赞同：3
> 
> 时间：2012-09-08T02:56:12.940
> 
> 标签：lisp, common-lisp

我将稀疏多项式表示为（系数，对）列表。例如：

```
'((1 2) (3 6) (-20 48)) => x^2 + 3x^6 - 20x^48 
```

我是 Lisp 格式的新手，但遇到了一些非常漂亮的工具，例如`(format nil "~:[+~;-~]" (> 0 coefficient))`将系数的符号作为文本获取（我知道，这可能不是惯用的）。

但是，在格式化单个术语时存在一定的显示问题。例如，以下都应该是正确的：

```
(1 0) => 1x^0 => 1    (reducible)
(1 1) => 1x^1 => x    (reducible)
(1 2) => 1x^2 => x^2  (reducible)
(2 0) => 2x^0 => 2    (reducible)
(2 1) => 2x^1 => 2x   (reducable)
(2 2) => 2x^2 => 2x^2 (this one is okay) 
```

我想知道是否有一种方法可以在没有大量`if`或`cond`宏的情况下做到这一点 - 一种只用一个`format`模式来做到这一点的方法。一切正常，但“美化”条款（最后一行`FormatPolynomialHelper3`应该这样做）。

```
(defun FormatPolynomial (p)
    "Readably formats the polynomial p."
    ; The result of FormatPolynomialHelper1 is a list of the form (sign formatted),
    ; where 'sign' is the sign of the first term and 'formatted' is the rest of the
    ; formatted polynomial. We make this a special case so that we can print a sign
    ; attached to the first term if it is negative, and leave it out otherwise. So,
    ; we format the first term to be either '-7x^20' or '7x^20', rather than having
    ; the minus or plus sign separated by a space.
    (destructuring-bind (sign formatted-poly) (FormatPolynomialHelper1 p)
        (cond
            ((string= formatted-poly "") (format nil "0"))
            (t                           (format nil "~:[~;-~]~a" (string= sign "-") formatted-poly)))))

; Helpers

(defun FormatPolynomialHelper1 (p)
    (reduce #'FormatPolynomialHelper2 (mapcar #'FormatPolynomialHelper3 p) :initial-value '("" "")))

(defun FormatPolynomialHelper2 (t1 t2)
    ; Reduces ((sign-a term-a) (sign-b term-b)) => (sign-b "term-b sign-a term-a"). As
    ; noted, this accumulates the formatted term in the variable t2, beginning with an
    ; initial value of "", and stores the sign of the leading term in the variable t1.
    ; The sign of the leading term is placed directly before the accumulated formatted
    ; term, ensuring that the signs are placed correctly before their coefficient. The
    ; sign of the the leading term of the polynomial (the last term that is processed)
    ; is available to the caller for special-case formatting.
    (list
        (first t2)
        (format nil "~@{~a ~}" (second t2) (first t1) (second t1))))

(defun FormatPolynomialHelper3 (tm)
    ; Properly formats a term in the form "ax^b", excluding parts of the form if they
    ; evaluate to one. For example, 1x^3 => x^3, 2x^1 => 2x, and 3x^0 => 3). The list
    ; is in the form (sign formatted), denoting the sign of the term, and the form of
    ; the term state above (the coefficient have forced absolute value).
    (list
        (format nil "~:[+~;-~]" (> 0 (first tm)))
        (format nil "~a~@[x^~a~]" (abs (first tm)) (second tm)))) 
```

*编辑*：*正确地*指出输出不应包含逻辑。也许我对我的问题提出了一个过于具体的问题。这是正确格式化多项式的逻辑 - 但我正在寻找更清洁、更易读和更 lisp 惯用的东西（这只是我写 lisp 的第三天）。

```
(defun FormatPolynomialHelper3 (tm)
    ; Properly formats a term in the form "ax^b", excluding parts of the form if they
    ; evaluate to one. For example, 1x^3 => x^3, 2x^1 => 2x, and 3x^0 => 3). The list
    ; is in the form (sign formatted), denoting the sign of the term, and the form of
    ; the term state above (the coefficient have forced absolute value).
    (list
        (format nil "~:[+~;-~]"   (> 0 (first tm)))
        (cond
            ((= 0 (second tm))      (format nil "~a" (abs (first tm))))
            ((= 1 (abs (first tm))) (cond
                ((= 1 (second tm))  (format nil "x"))
                (t                  (format nil "x^~a" (second tm)))))
            ((= 1 (second tm))      (format nil "~ax" (abs (first tm))))
            (t                      (format nil "~ax^~a" (abs (first tm)) (second tm)))))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T06:38:00.773

**答案**：

我不会把这个逻辑放到`FORMAT`语句中。仅当您想*加密*代码或为自己创建更多维护工作时。好的 Lisp 代码是自记录的。`FORMAT`陈述永远不会自我记录。

在打印之前，我将首先*简化*多项式。例如删除每个乘以零的术语。

```
((0 10) (1 2)) -> ((1 2)) 
```

然后如果乘数为 1 可以在正常的`COND`or`CASE`语句中进行测试。

还要确保你*永远不要*使用自制的数据`CAR`结构。多项式的组成部分应该主要由隐藏大部分实现细节的自记录函数访问。`CDR``FIRST``SECOND`

我会写它没有`FORMAT`：

**示例代码**：

```
(defun term-m (term)
  (first term))

(defun term-e (term)
  (second term))

(defun simplify-polynomial (p)
  (remove-if #'zerop (sort p #'> :key #'term-e)
             :key #'term-m))

(defun write-term (m e start-p stream)
  ; sign or operator
  (cond ((and (minusp m) start-p)
         (princ "-" stream))
        ((not start-p)
         (princ (if (plusp m) " + " " - ") stream)))
  ; m
  (cond ((not (= (abs m) 1))
         (princ (abs m) stream)))
  (princ "x" stream)
  ; e
  (cond ((not (= 1 e))
         (princ "^" stream)
         (princ e stream))))

(defun write-polynomial (p &optional (stream *standard-output*))
  (loop for (m e) in (simplify-polynomial p)
        for start-p = t then nil
        do (write-term m e start-p stream))) 
```

**示例使用**：

```
CL-USER 14 > (write-polynomial '((1 2) (3 6) (-20 48)))
-20x^48 + 3x^6 + x^2 
```

# c# - C# 控制台程序不会从命令提示符执行

> ID：12327670
> 
> 赞同：-1
> 
> 时间：2012-09-08T02:56:15.507
> 
> 标签：c#, windows, command, execute, prompt

我用 C# 做了一个非常简单的程序。当我双击编译的 exe 时，它​​会执行并工作。当我从命令提示符运行 exe 时，它​​完全没有任何作用。我也尝试从管理员命令提示符处执行它。我在 Windows 7 上。这非常令人沮丧。

程序运行时执行的唯一命令是

```
SendMessageW(Process.GetCurrentProcess().MainWindowHandle, WM_APPCOMMAND, Process.GetCurrentProcess().MainWindowHandle, (IntPtr)APPCOMMAND_VOLUME_MUTE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:34:49.130

不确定您要完成什么，但是这个小程序

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(Process.GetCurrentProcess().MainWindowHandle);
        Console.ReadKey();
    }
} 
```

可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T03:09:57.247

控制台程序可能没有消息循环或主窗口。所以 SendMessageW() 不起作用。

# apache - 通过 Internet 访问 apache HTTP 服务器

> ID：12327673
> 
> 赞同：3
> 
> 时间：2012-09-08T02:56:45.123
> 
> 标签：apache

我在我的计算机中设置了一个 apache HTTP 服务器。我可以通过互联网从任何地方访问它吗？我的服务器没有注册域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:01:14.400

如果您告诉路由器转发您的 HTTP 端口，您就可以访问它。如果您的路由器不知道转发它，您将只能在本地网络上访问它。您确实必须购买一个域，除非您只是访问网络范围的 IP，否则您可以在[whatsmypi](http://www.whatsmyip.org/)上找到它。因此，总而言之，您需要做两件事：（1）告诉您的路由器转发 HTTP 端口，以及（2）通过您的 IP 通过互联网访问它（除非您购买域名）。

**更新**

当然，这是“说起来容易做起来难”和“一个尺寸不适合所有”的事情之一。尝试访问 HTTP 服务器时可能会遇到一系列困难。我建议谷歌搜索一些教程。

# c++ - c ++未定义对`vtable的引用

> ID：12327679
> 
> 赞同：3
> 
> 时间：2012-09-08T02:58:04.230
> 
> 标签：c++, constructor, undefined-reference, vtable

我的问题与我发布的另一个问题不同。我从多个文件开始，并决定现在将它们全部放在一个 main.cpp 文件中，以使其正常工作。

主.cpp：

```
#include <iostream>
using namespace std;

class arrayListType {
    public:
        bool isEmpty() ;
        bool isFull() ;
        int listSize() ;
        int maxListSize() ;
        void print() ;
        bool isItemAtEqual(int location, int item) ;
        virtual void insertAt(int location, int insertItem) = 0;
        virtual void insertEnd(int insertItem) = 0;
        void removeAt(int location);
        void retrieveAt(int location, int& retItem) ;
        virtual void replaceAt(int location, int repItem) = 0;
        void clearList();
        virtual int seqSearch(int searchItem) const  = 0;
        virtual void remove(int removeItem) = 0;
        arrayListType (int size = 100);
        arrayListType ( arrayListType& otherList);
        virtual ~arrayListType();
    protected:
        int *list;
        int length;
        int maxSize;
};

bool arrayListType::isEmpty()  {
    return (length == 0);
}
bool arrayListType::isFull()  {
    return (length == maxSize);
}
int arrayListType::listSize()  {
    return length;
}
int arrayListType::maxListSize()  {
    return maxSize;
}
void arrayListType::print()  {
    for (int i = 0; i < length; i++)
        cout << list[i] << " ";
    cout << endl;
}
bool arrayListType::isItemAtEqual(int location, int item)  {
    if (location < 0 || location >= length) {
        cout << "The location of the item to be compared is out range." << endl;
        return false;
    }
    else
        return(list[location] == item);
}

void arrayListType::removeAt(int location) {
    if (location < 0 || location >= length){
        cout << "The location of the item to be removed is out of range." << endl;
    }
    else {
        for (int i = location; i < length -1; i++)
            list[i] = list[i+1];
        length--;
    }
}
void arrayListType::retrieveAt(int location, int& retItem)  {
    if (location < 0 || location >= length) {
        cout << "The location of the item to be retrieved is out of range." << endl;
    }
    else
        retItem = list[location];
}

void arrayListType::clearList() {
    length = 0;
}

arrayListType::arrayListType (int size) {
    if (size <= 0) {
        cout << "The array size must be positive. Creating an array of the size 100." << endl;
        maxSize = 100;
    }
    else
        maxSize = size;
    length = 0;
    list = new int[maxSize];
}

class orderedArrayListType: public arrayListType {

    public:
        void insertAt(int location, int insertItem);
        void insertEnd(int insertItem);
        void replaceAt(int location, int repItem);
        int seqSearch(int searchItem) const;
        void insert (int insertItem);
        void remove (int removeItem);
        orderedArrayListType (int size = 100);
        ~orderedArrayListType();
    private:
        void quickSort();
};

void orderedArrayListType::quickSort(){
//private function for sorting "list."
//using a "quicksort" method
//addapted from: http://www.algolist.net/Algorithms/Sorting/Quicksort
    if (length == 0) {
        cout << "Cannot sort an ampty list." << endl;
    }
    else {
        int left = 0, right = length;
        int i = left, j = right;
    int tmp;
    int pivot = list[(left + right) / 2];
    /* partition */
    while (i <= j) {
        while (list[i] < pivot)
            i++;
        while (list[j] > pivot)
            j--;
        if (i <= j) {
            tmp = list[i];
            list[i] = list[j];
            list[j] = tmp;
            i++;
            j--;
        }
    };
    /* recursion */
    if (left < j)
        quickSort();
    if (i < right)
        quickSort();
    }
}

void orderedArrayListType::insertAt(int location, int insertItem){

    if (location < 0 || location >= length){
        cout << "The location of the item to be removed "
        << "is out of range." << endl;
    }
    else if(length == maxSize){
        cout << "Cannot insert in a full list." << endl;
    }
    else {
        for (int j = length; j < location; j--){ 
            list[j+1] = list[j]; 
            /* 
            Start at the end of the array and move each item 
            out by one. Coninue until list[j] is at the 
            location, then set the list[location] to the value.
            */  
        }
        list[location] = insertItem;
        length++;
    }
    quickSort();
}

void orderedArrayListType::insertEnd(int insertItem) {

    if (length == maxSize){
        cout << "Cannot insert in a full list." << endl;
    }
    else {
        list[length] = insertItem;
        length++;
    }
    quickSort();
}

void orderedArrayListType::replaceAt(int location, int repItem) {
    if (location < 0 || location >= length){
        cout << "The location of the item to be replaced "
        << "is out of range." << endl;
    }
    else
        list[location] = repItem;
    quickSort();
}

int orderedArrayListType::seqSearch(int searchItem) const {

    int loc;
    bool found = false;
    loc = 0;
    while (loc < length && !found) {
        if (list[loc] == searchItem)
            found = true;
        else
            loc++;
    }
    if (found)
        return loc;
    else
        return -1;
}

void orderedArrayListType::insert (int insertItem){
    if (length == 0){
        list[length++] = insertItem;
    }
    else if (length == maxSize){
        cout << "Cannot insert in a full list." << endl;
    }
    else {
        int loc;
        bool found = false;
        for (loc= 0; loc < length; loc++){
            if (list[loc] >= insertItem){
                found = true;
                break;
            }
        }
        for (int i = length; i > loc; i--) {
            list[i] = list[i-1];
        }
        list[loc] = insertItem;
        length++;
    }
    quickSort();
}
void orderedArrayListType::remove (int removeItem) {

    int loc;

    if (length == 0)
        cout << "Cannot Delete from an ampty list." << endl;
    else {
        loc = seqSearch(removeItem);
        if (loc != -1)
            removeAt(loc);
        else
            cout << "The item to be deleted is not in the list." << endl;
    }
}

orderedArrayListType::orderedArrayListType (int size)
    :arrayListType(size){
}

int main() {

//  orderedArrayList intlist(25);
//  orderedArrayListType intList = new orderedArrayListType(25);
} 
```

确切的错误信息：

> /tmp/ccdTFaE0.o：在函数`arrayListType::arrayListType(int)': main3.cpp:(.text+0x25c): undefined reference to`vtable for arrayListType' /tmp/ccdTFaE0.o:(.rodata._ZTV20orderedArrayListType[vtable for orderedArrayListType]+0
> x38)：未定义引用 orderedArrayListType::~orderedArrayListType()' /tmp/ccdTFaE0 .o:(.rodata._ZTI20orderedArrayListType[typeinfo for orderedArrayListType] +0x10): undefined reference to `typeinfo for arrayListType' collect2: ld 返回 1 exit status`orderedArrayListType::~orderedArrayListType()' /tmp/ccdTFaE0.o:(.rodata._ZTV20orderedArrayListType[vtable for orderedArrayListType]+0
> x40): undefined reference to`

tldr;

```
#include <iostream>
using namespace std;

class arrayListType {
    public:
        bool isEmpty() const;
                ...
                arrayListType (int size = 100);
        arrayListType ( arrayListType& otherList);
        virtual ~arrayListType();
    protected:
        int *list;
        int length;
        int maxSize;
};

//definitions 
bool arrayListType::isEmpty()  {
    return (length == 0);
}

class orderedArrayListType: public arrayListType {

    public:
        void insertAt(int location, int insertItem);
        ...
        orderedArrayListType (int size = 100);
        ~orderedArrayListType();
    private:
        void quickSort();
};

void orderedArrayListType::quickSort(){
 ...
 }

void orderedArrayListType::insertAt(int location, int insertItem){

       ....     

    quickSort();
}

   orderedArrayListType::orderedArrayListType (int size)
    :arrayListType(size){
}

int main() {

    orderedArrayList intlist(25);
//  orderedArrayListType intList = new orderedArrayListType(25);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T03:07:27.340

您缺少析构函数定义：

```
arrayListType::~arrayListType() { }

orderedArrayListType::~orderedArrayListType() { } 
```

链接器错误通常不是很有用。但是，当您声明但不定义您的析构函数时，通常会生成这个确切的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T03:11:31.123

你用的是什么编译器？Visual Studio 2010 提供了更有用的输出：

1>cachesize.obj : 错误 LNK2019: 无法**解析的外部符号“public: virtual __thiscall arrayListType::~arrayListType(void)”** (??1arrayListType@@UAE@XZ) 在函数“public: virtual void * __thiscall arrayListType::`标量删除析构函数'(unsigned int)" (??_GarrayListType@@UAEPAXI@Z)

1>cachesize.obj : 错误 LNK2019: 无法**解析的外部符号“public: virtual __thiscall orderedArrayListType::~orderedArrayListType(void)”** (??1orderedArrayListType@@UAE@XZ) 在函数“public: virtual void * __thiscall orderedArrayListType::`标量删除析构函数'(unsigned int)" (??_GorderedArrayListType@@UAEPAXI@Z) 1>C:\Users\james\Documents\Visual Studio 2010\Projects\cachesize\Debug\cachesize.exe：致命错误 LNK1120：2 未解决外在

您需要将实体添加到`virtual ~arrayListType();`和`~orderedArrayListType();`。
您已声明它们但未定义它们。然后编译！

# javascript - Javascript：图像与单选按钮的值不匹配

> ID：12327683
> 
> 赞同：3
> 
> 时间：2012-09-08T02:59:01.030
> 
> 标签：javascript

我正在使用单选按钮并根据选择的单选按钮显示图像。但不知何故，我收到了图像数组的错误。我只显示了两张图片，并且与正确的值不匹配。是我的数组还是 html 中的错误？[例子](http://webprolearner2346.zxq.net/bike_calculator/)

自行车参考：

*   [自行车1.jpg](http://gear.dirtrider.com/2011-kawasaki-kx-450f.html)
*   [自行车2.jpg](http://www.motorcyclecruiser.com/2010/yamaha/road_star/s/54875/05/)
*   [自行车3.jpg](http://www.motorcyclistonline.com/2010/aprilia/rsv4/r/55445/05/)

**JS**

```
<script>
 function check_value(val) { 
       var imgs = ['images/bike1.jpg', 'images/bike2.jpg', 'images/bike3.jpg'];
       var img = imgs[val];
       var el = document.getElementById("imgBox");
       if (img) {
         el.src = img;
         el.style.display = "";
       }

     }
</script> 
```

**HTML**

```
<form name="builder">
   <input type="radio" name="field" value="1" onclick='check_value(1)'/> KAWASAKI KX 450F<br />
   <input type="radio" name="field" value="2" onclick='check_value(2)'/> 2010 Yamaha Road Star S<br />
   <input type="radio" name="field" value="3" onclick='check_value(3)'/> Aprilia RSV4<br />
</form>

<img id="imgBox" src="#" style="display:none"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T03:02:21.990

数组是零索引的。您应该致电：

```
check_value(0) 
```

获取第一项，第二项获取 1，第三项获取 2。

请注意选择第一个项目如何加载第二个图像，第二个项目如何加载第三个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T03:15:51.667

数组从 index 开始`0`，因此您有以下选择：

*   采用`imgs[val-1]`
*   将您的数组更改为`[null, "img1", "img2 ...]`
*   开始你的图像`img0`

但是，**更好**的方法是：

```
function check_value(val) {
    var el = document.getElementById("imgBox");
    if (val>0 && val<4) { //will trigger when [1,2,3], modify it according to your needs
        el.src = "images/bike" + val + ".jpg";
        el.style.display = "";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T03:02:23.833

Javascript 数组的索引从 0 开始向上。所以

```
<form name="builder">
   <input type="radio" name="field" value="1" onclick='check_value(1)'/> KAWASAKI KX 450F<br />
   <input type="radio" name="field" value="2" onclick='check_value(2)'/> 2010 Yamaha Road Star S<br />
   <input type="radio" name="field" value="3" onclick='check_value(3)'/> Aprilia RSV4<br />
</form> 
```

应该

```
<form name="builder">
   <input type="radio" name="field" value="1" onclick='check_value(0)'/> KAWASAKI KX 450F<br />
   <input type="radio" name="field" value="2" onclick='check_value(1)'/> 2010 Yamaha Road Star S<br />
   <input type="radio" name="field" value="3" onclick='check_value(2)'/> Aprilia RSV4<br />
</form> 
```

# objective-c - iOS 在点击时显示不同的图像

> ID：12327691
> 
> 赞同：0
> 
> 时间：2012-09-08T03:01:27.417
> 
> 标签：objective-c, uibutton, ibaction

使用 XCode，我试图弄清楚当有人单击或按下我的一个按钮之前如何显示不同的图像，然后再被带到第二个屏幕。例如，我的主屏幕上有一个联系人图标。当用户单击该图标时，它应该在点击时变为较暗的版本，然后再转到联系人屏幕。任何帮助表示赞赏。

```
-(IBAction) ButtonPressed :(id)sender
{
UIButton *tempButton = (UIButton *) sender;
int tag = tempButton.tag;
NSString *viewName;
switch (tag) 
{
    case 1:
        [FlurryAnalytics logEvent:@"Contact-Screen"];
        viewName = @"ContactScreen";
        if( self.appDelegate.sound)
            [Click play];
        [self.appDelegate moveToView:viewName];
        break;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T03:15:36.593

很简单，您只需为按钮选择状态设置不同的图像：

```
[myButton setImage:[UIImage imageNamed:@"mySelectedImage"] forState:UIControlStateSelected]; 
```

或在界面生成器中：

![在此处输入图像描述](../Images/80a4eadf94b5f41ac63167d36a097d10.png)

其他`UIControlState's`包括：

```
enum {
   UIControlStateNormal               = 0,
   UIControlStateHighlighted          = 1 << 0,
   UIControlStateDisabled             = 1 << 1,
   UIControlStateSelected             = 1 << 2,
   UIControlStateApplication          = 0x00FF0000,
   UIControlStateReserved             = 0xFF000000
}; 
```

> 控件的状态；一个控件一次可以有多个状态。根据控件的不同，状态的识别方式也不同。例如，可以将 UIButton 实例配置为（使用 setImage:forState: 方法）在其处于正常状态时显示一个图像，而在突出显示时显示另一个图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:40:42.543

据我在 Xcode 中所注意到的，每当您决定实现自定义按钮并且不指定在 UIControlStateSelected 状态下使用的第二张图像时，当用户点击按钮以显示该按钮时，Xcode 会自动为您使按钮变暗事实上，他们被窃听了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T04:26:57.610

0x7f 答案几乎是正确的（正确的状态值是“突出显示”而不是“选定”）。对于 Swift 用户来说，这将是

```
myButton.setBackgroundImage(UIImage(named: "myButtonImagePressed.png"), forState: .Highlighted) 
```

# cocoa - 在创建对象然后将其添加到向量时，我应该 [保留] 和 [释放] 吗？

> ID：12327699
> 
> 赞同：1
> 
> 时间：2012-09-08T03:02:46.993
> 
> 标签：cocoa, memory-management, memory-leaks, objective-c++

我有这样的代码：

```
vector<SoundObject*> sounds ;

- (void) loadSound:(NSString*) name
  {
    SoundObject* so = [[[SoundObject alloc] init] load:name] ;
    if( so )
      sounds.push_back( so ) ;
  } 
```

好的，所以我在这里做了几件事（我可能对此很菜鸟，只关注*内存泄漏*）。

1.  我应该`[so retain]`在推`so`入阵列之前打电话吗？
2.  **有可能`load`失败，如果失败，则返回`nil`。**
    *   如果`load`确实失败了，*我必须`[self release]`在返回之前打电话`load`吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T03:10:03.877

如果您正在编写新代码，您应该只使用自动引用计数 ( [ARC](http://clang.llvm.org/docs/AutomaticReferenceCounting.html) )。

它将减轻您遇到的许多潜在内存问题。

此外，我会坚持使用 Foundation 集合，例如[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)或[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/cl/NSMutableArray)，而不是看起来像 C++ 向量的东西。

```
NSMutableArray *_myMutableArray = [[NSMutableArray alloc] init];

- (void)loadSound:(NSString *)name
{
  SoundObject *so = [[SoundObject alloc] init];

  if( nil != so )
  {
    [so load:name];

    [_myMutableArray addObject:so];
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T08:56:41.307

> 但这个问题的目的是了解 Objective-C 引用计数

如果您使用而不是*使用*. 这是因为遵循 Cocoa 内存管理规则的方法以一种很好的方式协同工作；但是 的 方法不是用retains 和releases 写的，所以不遵循Cocoa 手动引用计数规则。因此，除非您使用 ARC，否则您将不得不自己打破内存管理规则，以便从外部显式地对其进行内存管理。这太可怕了，会教给你错误的想法。`vector``NSArray``vector`

Cocoa 内存管理的伟大之处在于它完全是本地的。你只根据你在函数中做了什么来保留和释放，你*永远*不必担心其他函数做了什么。这就是使静态分析内存管理和实现 ARC 成为可能的原因。

我是什么意思？Cocoa 内存管理的基本规则是保证函数的对象参数在函数被调用时是有效的（即不被释放），并且不保证它在之后的任何时候都有效。就是这样。因此，当您将参数传递给另一个函数时，只要传递它时对象是有效的，这就是您需要担心的全部。您永远不需要“为其他功能保留对象”，因为其他功能无论如何都不能假定该对象在任何时候都是有效的。

这包括将东西添加到`NSArray`：

```
Foo *obj = [[Foo alloc] init];
[myArray addObject:obj];
[obj release]; 
```

由于添加后不再需要`obj`，因此可以自由发布。您无需担心其他任何事情。现在，正如其他人所说，这是有效的，因为数组保留了它的元素。**但你不需要知道这一点。**NSArray 方法遵循与对象的所有其他方法相同的规则。您不需要知道 NSArray 或任何其他类如何正确地进行内存管理。您甚至不需要知道对象是什么类型`myArray`或做什么`addObject:`。该方法会处理它——如果它需要将对象保留更长时间，它必须（作为内存管理规则的一部分）以某种方式保留它；如果它不需要保留它，它不需要做任何事情。关键是，这对你来说无关紧要。

另一个例子：

```
Foo *obj = [[Foo alloc] init];
[someObj performSelector:@selector(something:) withObject:obj afterDelay:5];
[obj release]; 
```

这做了一些异步的事情，那么我们怎样才能释放它呢？使用时不会失效吗？不，这一切都遵循相同的内存管理规则。您无需担心该方法的作用。如果它需要以某种方式保留对象（在这种情况下确实如此），它必须保留它（确实如此）并注意释放它等。

如果您试图将类似`vector`的东西强加到图片中，那么所有这些简单和美丽都会消失。您必须在放入之前保留内容，并在每次删除元素时释放内容。这很糟糕。您*可以*围绕向量编写一个包装类，这样您就可以在该文件中拥有所有糟糕的内存管理逻辑，而其他人可以将其用作普通的 Objective-C 类；但那会很像`NSMutableArray`。

# ruby - 使用#split方法迭代字符串，如何获取元素总数

> ID：12327701
> 
> 赞同：0
> 
> 时间：2012-09-08T03:03:03.337
> 
> 标签：ruby, split, loops

我有以下代码

```
s = 'string1, string2, string3, string4'

s.split(",").each_with_index{ |element, index| puts "line #{index} of #{size_of_array}" } 
```

获取数组大小的最佳方法是什么？是否有一种方法可以在传递给循环的拆分的同一行上调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:25:00.643

我认为您正在寻找水龙头：

```
s.split(',').tap{|a| a.size.times{|i| puts "line #{i} of #{a.size}"}} 
```

但实际上，只是一个；在同一行保留尽可能多的内容：

```
a = s.split(','); a.size.times{|i| puts "line #{i} of #{a.size}"} 
```

注意大小而不是长度，因为它短了 2 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:10:06.233

要获取数组的大小，您只需调用`.length`它即可。现在，我认为您不能在同一行上执行此操作，以下内容是否适合您：？

```
s = 'string1, string2, string3, string4'
split_s = s.split()
split_s.each_with_index{ |element, index| puts "line #{index} of #{split_s.length}"} 
```

如果这是不可接受的，请告诉我，我会看看是否还有其他可以做的事情。

**更新**

如果你想把它全部放在一条线上，就会有很多冗余。例如，您可以这样做：

```
s = 'string1, string2, string3, string4'

s.split(",").each_with_index{ |element, index| puts "line #{index} of #{s.split(',').length}" } 
```

但是你看到冗余了吗？s.split(',') 为每个元素调用。这就是为什么我建议将其存储在与上述不同的行中。

**更新 2**

根据下面的评论，`split_s.length`在调用`each_with_index`循环之前存储也是有效的，因为它也会循环遍历元素。谢谢评论者！我之前假设该`length`属性是在生成时设置的，并在将对象删除和添加到数组时进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T03:29:50.340

这是一种更快的方法：

```
s = 'string1, string2, string3, string4'
(length = s.count(',')) && (length + 1).times{|i| puts "line #{i} of #{length}" } 
```

# php - 你能在 PHP 中嵌套 JavaScript 吗？

> ID：12327703
> 
> 赞同：0
> 
> 时间：2012-09-08T03:03:08.880
> 
> 标签：php, javascript

我找到了这个广告轮播脚本，我想将 JavaScript 嵌套在下面，如下所示。我收到错误，我将如何完成此操作。

```
<?php 
// random number 1 - 100 $result_random = rand(1, 100); 

// if result less than or equal 70, display ad1 (70%) 
if($result_random <= 70){ 
  echo "<script type='text/javascript' src='http://myads.com'></script>"; 
} 
// if result less than or equal 90, display ad2 (20%) 
else if($result_random <= 90){ 
  echo "<script type='text/javascript' src='http://myads.com'></script>";
} 
// if result less than or equal 100, display ad3 (10%)
else { 
 echo "<script type='text/javascript' src='http://myads.com'></script>"; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:28:41.207

**问题/原因：**

因为这条线

```
// random number 1 - 100 $result_random = rand(1, 100); 
```

被注释掉，

这条线

```
if($result_random <= 70){ 
```

这条线

```
else if($result_random <= 90){ 
```

会导致错误`Undefined Variable $result_random in line X`

[你的代码@ Codepad.org/saPRtKPU](http://codepad.org/saPRtKPU)

*（更新：好的，您没有收到任何错误，但由于`$result_random`未定义，因此每次只执行最后一个**（**`else` ads3）案例。任何未定义的变量都包含值[http://codepad.org/vVHMrWkl](http://codepad.org/vVHMrWkl)）**`NULL`***

 ****解决方案：**

更改此行

```
// random number 1 - 100 $result_random = rand(1, 100); 
```

至

```
// random number 1 - 100
$result_random = rand(1, 100); 
```

即在之前插入换行符/回车符（`Enter`在 Windows 中）`$result_random....`

它应该可以解决问题，但如果现在，请发布您收到的确切错误消息。

顺便说一句，您的所有三个脚本 SRC 都是相同的，即`http://myads.com/`. 我想这只是一个例子，但即便如此，在测试时，我们也不知道我们是否得到了真正的随机结果。因此，我已将`ad1`,附加到相应的 URL 中。`ad2``ad3`

**完整代码：**

```
<?php 
// random number 1 - 100
$result_random = rand(1, 100); 

// if result less than or equal 70, display ad1 (70%) 
if($result_random <= 70){ 
  echo "<script type='text/javascript' src='http://myads.com/ad1'></script>"; 
} // if result less than or equal 90, display ad2 (20%) 
    else if($result_random <= 90){ 
      echo "<script type='text/javascript' src='http://myads.com/ad2'></script>";
    }// if result less than or equal 100, display ad3 (10%)
        else { 
             echo "<script type='text/javascript' src='http://myads.com/ad3'></script>"; 
        } 

//Just for testing
echo "\r\nRandom Number is: ".$result_random; 
```

[现场演示@Codepad.org http://codepad.org/oymuBk8w](http://codepad.org/oymuBk8w)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:05:29.087

您可以使用 PHP 将脚本源输出到用户的浏览器，但您不能只在 PHP 应用程序中包含和运行 Javascript。

您的输出：

```
<script type='text/javascript' src='http://myads.com'></script> 
```

是正确的行为。然后客户端会尝试包含该脚本源。

如果您要进行条件包含，您需要在页面的 head 标记之间回显这些内容：

```
<html>
  <head>
    <?php
      // process, echo out a <script />
    ?>
  </head>
  <body>...</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T03:09:42.743

您需要将此代码放在文件的部分中。只有这样它才会起作用

它不会在 PHP 中运行。

仅当您将它们包含在 html 中或使用动态代码（php）n html 时，Js 文件才会起作用**

# android - 使用 asmack android 显示聊天记录历史

> ID：12327706
> 
> 赞同：0
> 
> 时间：2012-09-08T03:04:11.740
> 
> 标签：android, chat, smack, asmack

最近，我尝试用 XMPP 在 android 中构建一个聊天应用程序！我安装了`Ejabberd`，并且有了`connection`，我可以用我的安卓应用程序与另一个用户聊天！但是现在，我在检索聊天记录时遇到了问题！我的意思是我不知道如何使用`Asmack`和获取聊天记录`Ejabberd`。我尝试阅读`smack`文档，但是，我什么也找不到！！那么，有人有什么建议可以获取与 asmack 和 Ejabberd 的聊天记录吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:00:18.957

默认情况下，Ejabberd 不一定会保存聊天历史记录，因为这可能是一项非常昂贵的任务。它也不是内置在服务器的核心部分中。有一些可用的模块，例如可以安装/启用的 mod_archive，可以让您保存一些聊天历史记录，但由于聊天历史记录不是核心 XMPP 规范的一部分，因此没有“标准”方法可以做到这一点，所以它只会连接到您自己的服务器时工作。您可能会考虑做的是自己在本地存档您的聊天记录。您会注意到这是大多数桌面 XMPP 客户端所做的。启用 mod_offline 将允许您接收离线时发送给您的消息。但是没有特殊的方法来检索它们，它们只是在您登录时到达。

# c - 另一个内存泄漏问题（程序终止时内存仍然消失）- SLES 上的 C 程序

> ID：12327707
> 
> 赞同：4
> 
> 时间：2012-09-08T03:04:13.267
> 
> 标签：c, memory-leaks, malloc, suse

我在 Suse Linux Enterprise 上运行我的 C 程序，该程序压缩了数千个大文件（大小在 10MB 到 100MB 之间），并且随着程序运行，程序变得越来越慢（它在 Intel Sandy Bridge 板上以 32 个线程运行多线程）。当程序完成并再次运行时，它仍然很慢。

当我看到程序运行时，我看到程序运行时内存正在耗尽，你会认为这只是一个典型的内存泄漏问题。但是，对于正常的 malloc()/free() 不匹配，我希望在程序终止时所有内存都会返回。但是，当程序完成时，大部分内存都不会被回收。free 或 top 命令显示 Mem: 63996M total, 63724M used, 272M free 当程序减速到停止时，但在终止后，空闲内存只增长到大约 3660M。当程序重新运行时，空闲内存很快就用完了。

上面的程序只显示该程序在运行时最多使用 4% 左右的内存。

我认为这可能是一个内存碎片问题，但是，我构建了一个小型测试程序来模拟程序中的所有内存分配活动（许多随机方面是内置的 - 大小/数量），它总是返回所有内存完成。所以，我不认为是这样。

问题：

1.  是否存在会永久丢失内存的 malloc()/free() 不匹配，即即使在进程完成之后？

2.  C 程序（不是 C++）中的哪些其他内容会导致永久内存丢失，即在程序完成后，甚至终端窗口关闭？只有重新启动才能恢复内存。我读过其他关于文件未关闭导致问题的帖子，但是，我认为我没有这个问题。

3.  查看内存统计信息的顶部和空闲是否有效，即它们是否准确地描述了内存情况？它们似乎确实对应于程序的缓慢性。

4.  如果程序只显示 4% 的内存使用，那么 valgrind 之类的会发现这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T03:29:22.050

**是否存在会永久丢失内存的 malloc()/free() 不匹配，即即使在进程完成之后？**

不，[malloc](/questions/tagged/malloc "显示标记为“malloc”的问题")和`free`，甚至[mmap](/questions/tagged/mmap "显示标记为“mmap”的问题")在这方面是无害的，并且当进程终止操作系统（在这种情况下为 SUSE Linux）时，会收回所有内存（除非它与仍在运行的其他进程共享）。

**C 程序（不是 C++）中的哪些其他内容会导致永久内存丢失，即在程序完成后，甚至终端窗口关闭？只有重新启动才能恢复内存。我读过其他关于文件未关闭导致问题的帖子，但是，我认为我没有这个问题。**

与 malloc/free 和 mmap 一样，进程打开的文件会被操作系统自动关闭。

有一些事情会导致永久性内存泄漏，例如*大页面*，但如果您使用它们，您肯定会知道。除此之外，没有。

* * *

但是，如果您将内存丢失定义为没有立即标记为“**空闲**”的内存，那么可能会发生一些事情。

1.  对磁盘或 mmap 的写入可能会在 RAM 中缓存一段时间。操作系统必须保留这些页面，直到将它们同步回磁盘。
2.  如果操作系统现在没有其他东西可以使用该 RAM，则进程读取的文件可能会保留在内存中 - 合理的假设是它可能很快需要它们并且读取已经在 RAM 中的副本会更快。同样，如果操作系统或其他进程需要一些 RAM，则可以立即将其丢弃。

请注意，作为为我所有的 RAM 付费的人，我宁愿操作系统一直使用它，如果它以最小的方式有帮助的话。空闲 RAM 是浪费的 RAM。

* * *

几乎没有可用 RAM 的主要问题是当它被**过度**使用时，也就是说，现在有更多的进程（和操作系统）要求或使用 RAM，而不是系统上可用的。听起来您在进程中使用了大约 4Gb 的 RAM，这可能是个问题 - （请记住操作系统也需要一个好块。但听起来您有足够的 RAM！尝试运行一半的进程并查看如果它变得更好。

有时**内存泄漏**会导致暂时的过度使用——调查一下是个好主意。尝试随着时间的推移绘制程序的内存使用情况 - 如果它持续上升，那么它很可能是泄漏。

请注意，`fork`一个进程会创建一个副本，该副本共享原始分配的内存 - 直到两者都关闭或其中一个'exec'。但你没有那样做。

**查看内存统计信息的顶部和空闲是否有效，即它们是否准确地描述了内存情况？它们似乎确实对应于程序的缓慢性。**

* * *

是的，`top`并且`ps`是查看内存的完全合理的方法，特别是观察 RES 字段。暂时忽略 VIRT 字段。此外：

要查看整个系统对内存的使用情况，请运行：

```
vmstat 10 
```

在您的程序运行时以及一段时间后。看看`---memory---`列发生了什么。

此外，在您的过程完成后，运行

```
cat /proc/meminfo 
```

并在您的问题中发布结果。

**如果程序只显示 4% 的内存使用，那么 valgrind 之类的会发现这个问题吗？**

可能，但它可能非常慢，在这种情况下这可能是不切实际的。还有许多其他工具可以提供帮助，例如[电子围栏和其他](http://www.linuxjournal.com/article/6556)不会显着降低程序速度的工具。过去我什至推出了自己的产品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T03:40:49.077

malloc()/free() 在堆上工作。当进程终止时，保证会将此内存释放给操作系统。即使在分配过程使用某些共享内存原语（例如 System V IPC）终止后，内存泄漏也是可能的。但是，我认为这些都没有直接关系。

退后一步，这是一个轻负载 Linux 服务器的输出：

```
$ uptime
 03:30:56 up 72 days,  8:42,  2 users,  load average: 0.06, 0.17, 0.27
$ free -m
             total       used       free     shared    buffers     cached
Mem:         24104      23452        652          0      15821        978
-/+ buffers/cache:       6651      17453
Swap:         3811          5       3806 
```

哦不，只有 652 MB 可用！正确的？错误的。

每当 Linux 访问块设备（例如，硬盘驱动器）时，它都会查找任何未使用的内存，并将数据的副本存储在那里。毕竟，为什么不呢？数据已经在 RAM 中，某些程序显然想要该数据，而未使用的 RAM 对任何人都没有任何好处。如果一个程序出现并要求更多内存，缓存的数据将被丢弃以腾出空间——在那之前，还不如挂在它上面。

这个`free`输出的关键不是第一行，而是第二行。是的，正在使用 23.4 GB 的 RAM - 但 17.4 GB 可用于需要它的程序。见[帮助！Linux 吃掉了我的内存！](http://www.linuxatemyram.com/)更多。

我不能说为什么程序变慢了，但是“可用内存”指标稳步下降到零是完全正常的，而不是原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T03:25:22.817

操作系统只释放它绝对需要的内存。如果稍后正常使用内存，则释放内存是浪费精力 - 直接将内存从一种用途转移到另一种用途比释放内存只是为了以后必须使其不自由更有效。

系统唯一需要空闲内存的是需要内存的操作，这些操作不能将已使用的内存从一个目的切换到另一个目的。这是一组非常小的异常操作，例如服务网络中断。

如果您键入此命令`sysctl vm.min_free_kbytes`，系统将告诉您它需要空闲的 KB 数。它可能小于 100MB。因此，拥有超过免费数量的任何金额都很好。

如果您想要更多可用内存，请将其从计算机中删除。否则，操作系统假定使用它的成本为零，因此免费提供零收益。

例如，考虑您写入磁盘的数据。操作系统可以释放保存该数据的内存。但这是双重损失。如果您写入磁盘的数据稍后被读取，它将不得不从磁盘读取它，而不仅仅是从内存中获取它。如果以后需要该内存用于其他目的，它只需要撤消它所经历的所有工作，使其免费。呸。因此，如果系统不是绝对需要空闲内存，它就不会释放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T11:21:51.540

我的猜测是问题不在于您的程序，而在于操作系统。假设您将再次访问它们，操作系统会将最近使用的文件缓存在内存中。它不确定需要哪些文件，因此它最终可能会决定保留错误的文件，而以牺牲您希望保留的文件为代价。

当您进行第二次运行时，它可能会保留第一次运行的输出文件，这会阻止它在第二次运行时有效地使用缓存。您可以通过从第一次运行中删除所有文件（这应该将它们从缓存中释放）并查看这是否会使第二次运行更快来测试这个理论。

如果这不起作用，请尝试删除第一次运行的所有输入文件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-08T03:09:18.260

答案

1.  是的，C 或 C++ 中不需要释放未释放回操作系统的内存
2.  您是否有内存映射文件、已删除文件的打开文件句柄等。Linux 不会删除文件，直到所有引用都被解除分配。此外，Linux 会将文件缓存在内存中，以防需要再次读取 - 文件缓存内存使用可以忽略，因为操作系统会处理它
3.  不
4.  也许 valgrind 会突出显示内存不足的情况

# android - 使用库时的 Eclipse 错误

> ID：12327715
> 
> 赞同：1
> 
> 时间：2012-09-08T03:07:34.417
> 
> 标签：android, eclipse, andengine

嘿伙计们，我在 Eclipse 上引用库时遇到问题。不知道是添加还是引用，但这里也许图片会解释它。

![在此处输入图像描述](../Images/87c80f91f29033281fa9c8b532702fcb.png)

嗯，这是我正在尝试使用的库，它是我从 github 下载的 andengine。但是每次我在我的示例项目中添加一个库时，单击应用然后关闭它。再次打开它以检查它是否已真正应用并绿色检查它。但它表明了这一点。

![在此处输入图像描述](../Images/b1f730c069fc0b72a41485b762475293.png)

这里有什么问题？即使我的项目和库在同一个工作区中，它也会显示 x 标记。请帮忙。有人知道怎么修这个东西吗？谢谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:15:19.437

当您将项目添加到工作区时，请确保选中“复制到工作区”框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T16:21:27.653

您的工作区（与项目）和库必须位于同一分区中。

在你的情况下，我想应该都在 D:\

# html - 有没有人找到更好的方法来跨平台测试 Web 应用程序？

> ID：12327716
> 
> 赞同：3
> 
> 时间：2012-09-08T03:08:51.287
> 
> 标签：html, testing

目前在 CSS3 jquery 世界中跨浏览器测试的最佳推荐资源是什么？我正在采用 html5，并在我最新的 web 项目中采用了部分 css3。我也改用 jquery 来满足我的脚本需求。[我见过](https://stackoverflow.com/questions/2995866/recommended-crossbrowser-testing-solution)的最好的答案是测试这个之前的 html5 和 css3 准备好迎接黄金时段。

我正在 Windows Opera、Safari、2 Firefoxes+firebug、IE+f12 和两个 Android 中进行测试。我在我的 javascript 和浏览器大小调整和其他渲染问题中测试自己的 input=expected 输出。我通过在 Firefox 中渲染它来测试我的 php 生成的代码，然后进行验证。我正在尝试通过让我自己和其他人使用该网站并报告他们对网站的设计、可用性和整体印象的意见来测试用户体验。我在不同尺寸的设备上向他们展示了视图。我什至很幸运有一个色盲的朋友；-} F12 解决方案在 IE 中进行测试时尤其令人不满意，并且 css 渲染占用了我大量的开发时间。

有更好的仿真吗？有没有人找到一种更好（即快速、简单、高效、科学）的跨平台测试方法？我希望像单元测试这样的策略能够出现在在线社区中，这样我们就可以使我们的应用程序更加稳定和健壮，因为它们变得更加强大和有影响力。我似乎无法找到一种方法来驯服这种混乱！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:48:49.800

你用过硒吗？

[http://seleniumhq.org/](http://seleniumhq.org/)

它是一种自动化浏览器测试的工具。谷歌的一些人制作了它并开源了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T06:57:14.043

您可能希望查看[RIATest](http://www.cogitek.com/riatest/features/technologies/htmljavscript.html)以进行 HTML5 应用程序的跨平台跨浏览器测试。

它适用于 Windows 和 Mac，支持的浏览器是 Firefox、IE 和 Chrome。在一个平台/浏览器上编写的自动化测试脚本可以针对所有其他支持的平台/浏览器运行。

（免责声明：我是 RIATest 团队成员）。

# shell - Emacs：有些程序只能在 ansi-term 下工作，有些程序只能在 shell 下工作

> ID：12327719
> 
> 赞同：2
> 
> 时间：2012-09-08T03:09:24.923
> 
> 标签：shell, emacs, terminal, ansi-term

相对的 Emacs 新手，只是想调整我的编程工作流程以适应 emacs。到目前为止，我已经发现了 shell-pop，并且我非常喜欢在需要敲击奇怪命令时弹出的按需终端。

到目前为止，我对 Emacs 的理解是，它`shell`是一个不支持任何 ansi 控制代码的“愚蠢”终端，这使得它与试图在终端仿真器上绘制复杂 UI 的 ncurses 之类的东西不兼容。这就是为什么您不能在 shell 模式下使用`less`or`top`或类似的原因。

但是，我似乎遇到了麻烦`ansi-term`，这并不是它被破解的全部，最终。`less`当然，它运行或`git log`什至都没有问题`nano`，但是当它们在 中运行时，有些东西似乎无法正确显示`ansi-term`，例如`apt-get`和`nosetests`。我不太确定它的名称是什么，但`apt-get`的输出的特点是实时更新最后一行显示的内容，然后在该行上方滚动出不变的文本行。它似乎介于类似`less`和更愚蠢的东西之间，例如`cat`. 不知何故`ansi-term`根本不喜欢这样，而且我得到非常乱码的输出，它似乎只在一行上输出所有内容，或者只是通常丢失它的位置并随机输出所有内容。在 的情况下`nosetests`，它开始正常，但如果任何库吐出任何 STDERR，输出都会以类似的方式进入地狱。

通过一些摆弄似乎可以通过捣碎`C-l`和来解决这个问题`RET`，但它并不总是可靠的。

有人知道这里发生了什么吗？有什么方法可以修复`ansi-term`，以便它可以正确显示所有内容吗？或者是否有其他一些我不知道的更好的模式？理想情况下，我想要像 Gnome 终端一样轻松“正常工作”的东西，它可以运行上述所有程序而不会出现任何问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:55:40.733

我通过注释掉我的整个 .emacs.el 解决了这个问题，然后为文件中的每一行取消注释并重新启动 emacs。我发现仅以下一行是导致该问题的原因：

```
 '(fringe-mode 0 nil (fringe)) 
```

（此行禁用自定义设置变量内部的边缘）。

我猜这是 Emacs 中的一个错误，当任何输出行超过 $COLUMN 列时，禁用边缘会导致 term-mode 严重混淆它的输出。

无论如何，我真的不太喜欢边缘，而且似乎我至少能够禁用左边缘而不会触发这个问题：

```
(set-fringe-mode (cons 0 8)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:32:48.877

也许 apt-get 会根据`$TERM`环境变量做不同的事情。如果你设置会发生什么`TERM=dumb`？如果这能让事情奏效，那么您可以尝试不同的值，直到找到一个支持足够功能但仍然有效的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T16:56:13.457

请注意，git 2.0.1（2014 年 6 月 25 日）现在在显示详细消息时可以更好地检测哑终端。
这*可能*有助于 Emacs 更好地显示从 git 收到的一些消息，但`fringe-mode`上面报告的错误肯定是主要原因。

请参阅[Michael Naumov的](https://github.com/mnaoumov)[提交 38de156](https://github.com/git/git/commit/38de156a05a4421103e93d43b36e9967e63fb707) ( [)](https://github.com/mnaoumov)[`mnaoumov`](https://github.com/mnaoumov)

### `sideband.c`: 不要在非终端上使用 ANSI 控制序列

> 在边带#2 上从服务器端接收到的诊断消息被发送到带有 ANSI 终端控制序列“ `\033[K`”的标准错误，该序列会擦除到附加在每行末尾的行尾。
> 
> 然而，一些程序（例如 Windows 的 GitExtensions）在不理解终端控制序列的情况下读取和解释和/或显示消息，导致它们显示给最终用户。
> 为了帮助这些程序，当标准错误流没有被发送到 tty 时，静噪控制序列。

# ruby-on-rails - 用于灵活点系统的 Rails 模型

> ID：12327726
> 
> 赞同：2
> 
> 时间：2012-09-08T03:10:24.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我正在尝试为游戏应用程序设计积分系统，并且在找出设置模型的最佳方法时遇到了一些问题。基本需求是：

*   每个用户本质上都可以分配一个“PointsCalculator”对象，负责跟踪用户获得的积分

*   每个用户的“PointsCalculator”逻辑可能不同。例如，一个用户每次连续玩一个多小时可能会额外获得 100 分。另一个用户可能会在晚上 8 点到晚上 10 点之间获得双倍积分。

我们正在尝试找出创建模型设置的最佳方法，该设置将允许我们存储可以为每个用户定制的逻辑，但仍然是 DRY 和可测试的。

我不需要任何人为我编写代码 - 我更希望感谢更有经验的开发人员或过去解决过类似问题的任何人的反馈。

**注意：**为了更清楚起见，上面已经过编辑，但如果仍然不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T13:02:16.507

取决于您的复杂程度的难题：

*   如果所有积分计算器都定义明确，您应该使用单表继承 (STI)。最简单的情况。

*   但是，如果需要很大的灵活性，这将变得更加困难，您应该考虑动态地包含方法，例如 DCI。这是最复杂的。请参阅下面的详细信息。

例如：您将计算器行为列表存储在模型中的序列化对象中：

```
behaviors = [ 'behavior1', 'behavior2' ] 
```

每个行为都链接到具有相同名称的类或模块，例如：`Behavior1`和`Behavior2`.

然后，您可以在需要时随时向对象添加行为，例如在`after_initialize`.

```
after_initialize :set_behaviors

def set_behaviors
  behaviors.each do |b|
    self.extend(b.constantize)
  end
end 
```

# javascript - 具有相同大小的图像的 Javascript 图像面板

> ID：12327734
> 
> 赞同：0
> 
> 时间：2012-09-08T03:14:52.733
> 
> 标签：javascript, image

将不同大小的图像面板显示为相同大小的最佳方法是什么。是否有一个简单的 Javascript 框架可以处理调整大小和可能的一些裁剪。

例如，如果您查看 Pinterest，您会发现所有图像都有不同的大小（我们可以使用 jQuery masonry）。但是当您查看此页面时，[http](http://pinterest.com/pin/97249673174024268/) ://pinterest.com/pin/97249673174024268/所有图像的大小都相同。

首先是我的问题是明智的，其次是有一种方法可以使用 Javascript 库来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:10:34.690

[这里的](http://codecanyon.net/item/jquery-tiles-gallery/2281417)这个插件可以处理不同的图像大小并按照你的意愿排列它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:49:11.440

如果您想完全在 JavaScript 中完成此操作，那么您不需要库就足够简单了。如果你有 jQuery，它会更容易。

1.  将图像放在 a`<div>`中，宽度和高度设置为所需大小，“溢出”设置为“隐藏”，“位置”为“绝对”或“相对”。
2.  获取图片大小：

    ```
    var imageWidth = $(image).width(),
        imageHeight = $(image).height(); 
    ```

    （如果它被加载到 JavaScript Image 对象中，您也可以从`image.width`和获取它`image.height`）

3.  做一些数学计算可以缩小或放大多少：

    ```
    var widthScale = divWidth/imageWidth, 
        heightScale = divHeight/imageHeight,
        scale = Math.max(widthScale, heightScale),
        newWidth = Math.round(imageWidth*scale),
        newHeight = Math.round(imageHeight*scale); 
    ```

    本质上，这计算出需要缩放图像以使宽度适合并使高度适合，然后选择两者中较大的一个，以便图像适合一侧并溢出另一侧。

4.  为图像设置样式以适应新大小并将其居中在 div 内：

    ```
    $(image).css({
        width: newWidth+'px', 
        height: newHeight+'px', 
        position: 'absolute',
        left: '50%', 
        top: '50%', 
        margin-left: 0-Math.round(newWidth/2)+'px',
        margin-top:  0-Math.round(newHeight/2)+'px'
    }); 
    ```

应该这样做！

# python - 在 Mac OSx 10.8.1 上的 Python 2.7.2 中导入 MySQLdb 时出错

> ID：12327737
> 
> 赞同：1
> 
> 时间：2012-09-08T03:15:32.030
> 
> 标签：python, osx-mountain-lion

我最近升级到了 OSx Mountain Lion (10.8)，不久之后又升级到了 10.8.1。我试图做一个“导入 MySQLdb”并遇到以下错误：

```
>>> import MySQLdb
/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.8-intel.egg/_mysql.py:3: UserWarning: Module _mysql was already imported from /Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.8-intel.egg/_mysql.pyc, but /Users/jlk/Software_Downloads/MySQL-python/MySQL-python-1.2.3 is being added to sys.path
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "MySQLdb/__init__.py", line 19, in <module>
    import _mysql
  File "build/bdist.macosx-10.8-intel/egg/_mysql.py", line 7, in <module>
  File "build/bdist.macosx-10.8-intel/egg/_mysql.py", line 6, in __bootstrap__
ImportError: dlopen(/Users/jlk/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.8-intel.egg-tmp/_mysql.so, 2): no suitable image found.  Did find:
    /Users/jlk/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.8-intel.egg-tmp/_mysql.so: mach-o, but wrong architecture 
```

不太确定出了什么问题或如何解决。我已经用谷歌搜索了，但无法找到与 osx 10.8.1 相关的任何答案。它最后说它是“错误的架构”，但我知道我安装的是模块的 OSx 版本。我看到的唯一区别是它说它适用于 10.8，但这是该模块的最新版本。

以供参考：

操作系统：OSx Mountain Lion 10.8.1 Pyhon 版本：2.7.2

有任何想法吗？

问候，

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:06:41.280

您正在使用的 python 解释器和 _mysql.so 很可能是为不同的架构集构建的，例如，一个是 i386，另一个是 32/64 位胖。您可以通过运行`file /path/to/your python interpreter`并`file /path/to_mysql.so`比较输出来检查。

你能重建 MySQLdb 并确保 pip / easy_install 使用正确的 python 解释器吗？此外，如果您还没有这样做，请升级您的 Xcode 版本及其命令行工具，以避免通常出现的构建错误。

**编辑：**我可以在 10.7 上用 Apple 的 Python 2.7.1 重现这个。问题实际上是 python 解释器、MySQLdb 和 MySQL 服务器之间的架构不匹配。Python 是 32/64 位胖版本，我安装的 MySQL 版本只有 32 位。MySQLdb在构建时看MySQL的架构，所以我得到了一个32位的_mysql.so。在可能以 64 位模式运行的 python 中导入模块时，会发生错误。

我认为安装和运行 64 位版本的 MySQL 和重建 MySQL-Python 应该可以解决这个问题，或者您可以[强制 Python 在 32 位模式下运行](https://stackoverflow.com/questions/2088569/how-do-i-force-python-to-be-32-bit-on-snow-leopard-and-other-32-bit-64-bit-quest)。

# ruby-on-rails - Rails：使字符串成为 Rails 3 中的主键

> ID：12327739
> 
> 赞同：1
> 
> 时间：2012-09-08T03:15:35.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试将 Sinatra 应用程序（使用书中的食谱）重新创建到 Rails 中。Sinatra 应用程序使用 data_mapper，它允许您使用 :key => true 将字符串设置为主键

```
 include DataMapper::Resource
  property  :identifier,  String, :key => true
  property  :created_at,  DateTime 
```

我不确定如何在 Rails 3 中执行此操作。您能解释一下如何将标识符字符串设置为主键吗？

另一个问题可能是我正在 sqlite3 上进行开发，但最终将使用“pg”托管在 Heroku 上。如果这太复杂了，请假装我只使用 sqlite3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-24T18:31:25.350

在 rails 3.2+ 你还需要通过`id: false`，像这样

```
create_table :products, id: false do |t|
  t.string :identifier, :primary_key => true
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T03:29:05.467

Rails 会在数据库中找到具有主键的列并自动使用它。您只需将其放入迁移中：

```
create_table :products do |t|
  t.string :identifier, :primary_key => true
end 
```

ActiveRecord 将自动指向`id`该列。

更多信息请访问[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)。

# c++ - 在 OpenCV 中使用指针检索深度

> ID：12327746
> 
> 赞同：1
> 
> 时间：2012-09-08T03:18:11.660
> 
> 标签：c++, arrays, opencv, kinect, openni

以下代码在检索第 240 行和第 320 列的深度值时效果很好。

```
 capture.retrieve( rawdepth, CV_CAP_OPENNI_DEPTH_MAP); // Mat rawdepth(Size(640,480), CV_16UC1);
    cout << "rows: " << rawdepth.rows << " cols: " << rawdepth.cols << endl;
    cout << "depth is " << rawdepth.at<unsigned short>(rawdepth.rows/2,rawdepth.cols/2) << endl; 
```

如果我站在 Kinect 前面 1m 处，它的价值约为。900-1100。但是当我添加以下代码时，我站在 kinect 摄像头前，两者都会产生不同的结果。

```
 uint16_t* depthdata = (uint16_t*)rawdepth.data;
        cout << "depthdata is " << depthdata[76800] << endl; 
```

depthdata[76800] 总是产生 0，即使我将 kinect 移动到其他方向。

如果我使用以下代码，并将 Kinect 面对平坦的墙壁，(rawdepth.rows/2,rawdepth.cols/2) 会给出与 depthdata[78600] 相同的结果。

```
 uint16_t* depthdata = (uint16_t*)rawdepth.data;
        cout << "depthdata is " << depthdata[78600] << endl; 
```

我的问题是，如果 76800 处的 depthdata 不等于 (rawdepth.rows/2, rawdepth.cols/2)，我想知道，是什么？我从 240*320 得到了 76800。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:51:14.233

如果矩阵是行对齐的，则访问位置 (x, y) 的元素的方法是使用类似的方法：

```
 matrix[y*elements_per_row + x] 
```

OpenCV 中的矩阵被设计为 32 位对齐，因此每行的末尾通常会有一些填充。CvMat 有一个字段`size_t step`可以告诉你每行的宽度（以字节为单位）。

试试这个，看看它是否给出了你期望的结果：

```
 uint8_t* depthdata = (uint8_t*)rawdepth.data;
    uint16_t middle_element = *(uint16_t *)(depthdata + rawdepth.step*240 + sizeof(uint16_t)*320);
    cout << "depthdata is " << middle_element << endl; 
```

ref: [OpenCV 的 cv::Mat & CvMat 行对齐](https://stackoverflow.com/questions/6002674/opencvs-cvmat-cvmat-row-alignment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T03:51:32.407

从 opencv 参考手册：

在二维数组的情况下，上述公式简化为：

```
addr(Mi,j) = M.data + M.step[0] ∗ i + M.step[1] ∗ j 
```

请注意， M.step[i] >= M.step[i+1] （实际上， M.step[i] >= M.step[i+1]*M.size[i+1] ）。

# eclipse - 在 Jenkins 中运行 p2.process.artifacts

> ID：12327748
> 
> 赞同：0
> 
> 时间：2012-09-08T03:18:38.637
> 
> 标签：eclipse, ant, equinox, eclipse-pde, p2

[*我阅读了在 Eclipse 之外运行 P2 Ant 任务*](https://stackoverflow.com/questions/2327393/running-p2-ant-tasks-outside-eclipse)的 SO 帖子，这是一个很大的帮助。我正在尝试调用 p2.process.artifacts，但是我不确定应该将哪些参数传递给 java 任务调用。应用程序参数的值应该是什么以及如何将 jar 签名 (p2.process.arifacts:sign) 的扩充传递给嵌套在 p2.process.artifacts 元素中的这个调用？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T18:40:10.440

如果您想使用 Java 调用 Eclipse 的 AntRunner 来运行包含该任务的 ant 脚本（例如 build.xml），您可以这样做：

```
 java -cp /path/to/eclipse/plugins/org.eclipse.equinox.launcher_*.jar \
      org.eclipse.equinox.launcher.Main -consoleLog -nosplash -data /tmp \
      -application org.eclipse.ant.core.antRunner -f build.xml 
```

然后 build.xml 会是这样的：

```
<project default="pack">
  <target name="pack">
    <property name="workDir" value="${basedir}/somerepofolder/"/>
    <p2.process.artifacts pack="true" repositoryPath="file:${workDir}" />
  </target>
</project> 
```

# powerbuilder - Powerbuilder 12 经典版 Scc 选项不可用

> ID：12327749
> 
> 赞同：0
> 
> 时间：2012-09-08T03:19:21.973
> 
> 标签：powerbuilder

我无法在 powerbuilder 经典版本 12 中执行任何源代码控制选项。它们只是变灰了。在启动时，我收到标准消息连接到源代码控制已建立。pbl 下的对象显示超出 syc 的迹象。但我不能使用“获取最新版本”选项，因为它是灰色的。我们正在使用 Microsoft Team Foundation Server 进行源控制。操作系统是 Windows 7 32 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T04:37:08.083

验证您是否拥有此注册表项：

HKLM\SOFTWARE\SourceCodeControlProvider\InstalledSCCProviders

我见过一些源代码控制工具要么不使用它，要么删除它，PowerBuilder 在那里寻找 SCC 供应商。如果那里没有，那么 PB 不会将 SCC 选项显示为可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T17:53:06.303

要检查的另一件事 - 确保工作区文件 (*.pbw) 不是只读的。右键单击该文件并确认 *.pbw 文件没有选中只读属性复选框。

# cmd - CMD 击键停止脚本

> ID：12327754
> 
> 赞同：0
> 
> 时间：2012-09-08T03:21:00.197
> 
> 标签：cmd, shutdown, interactive, restart, abort

我需要创建一个批处理脚本，它将运行重新启动命令，但让您可以选择使用“按下任意键”来停止脚本。
最终，我想将它添加到我在凌晨 3:00 设置的计划任务中，并从 30 分钟开始倒计时。我想给它三十分钟，以防用户离开 PC 并且在他们仍在使用它时启动它。

关机 -r -t 1800

按任意键中止（这部分我不知道怎么做）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:40:52.333

放：

```
pause
shutdown -a 
```

如果用户没有（导航到 cmd 窗口和）并按“a 键”，则计时器将结束并开始关机，否则将中止

# python - PyQt4：setVerticalHeaderLabels 到复选框

> ID：12327755
> 
> 赞同：0
> 
> 时间：2012-09-08T03:22:12.720
> 
> 标签：python, checkbox, label, pyqt4, qtreewidget

如果可能的话，你如何使用 python 来选择一个复选框`setVerticalHeaderLabels`？`QTableWidget`

这将是代码的相关部分......

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class MainWindow(QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)

        self.table = QTableWidget()
        self.setCentralWidget(self.table)

        self.updateTable()

    def updateTable(self):
        table_rows = range(0,1)
        table_cols = range(0,1)

        self.table.setRowCount(len(table_rows))
        self.table.setColumnCount(len(table_cols))

        vertical_label = [self.tableCheckbox() for row in table_rows]
        self.table.setVerticalHeaderLabels(vertical_label)

    def tableCheckbox(self):
        chkBoxItem = QTableWidgetItem()
        chkBoxItem.setFlags(Qt.ItemIsUserCheckable | Qt.ItemIsEnabled)
        chkBoxItem.setCheckState(Qt.Unchecked)
        return chkBoxItem

def main():
    app = QApplication(sys.argv)
    form = MainWindow()
    form.show()
    app.exec_()

if __name__ == "__main__":
    main() 
```

此代码将引发`TypeError: QTableWidget.setVerticalHeaderLabels(QStringList): argument 1 has unexpected type 'list'`，因为`QTableWidget.setVerticalHeaderLabels()`需要一个字符串列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:29:03.057

可能您应该使用`setVerticalHeaderItem`并创建`QTableWidgetItem`看起来像复选框的自定义子类。

`QTableWidgetItem`有`checkState`and`setCheckState`方法，所以像你需要的东西应该是可能的。

唉，我从来没有这个需求，所以我不能为你提供更多的见解。

编辑：只是为了澄清：`setVerticalHeaderLabel(s)`对于你想要做的事情是完全错误的。这只是一种`QTableWidgetItem`使用给定文本创建 a 并将其添加为标题的便捷方法。如果您想要自定义，您必须使用`setVerticalHeaderItem`.

# mysql - 如何查询连接表以满足多个条件？

> ID：12327762
> 
> 赞同：11
> 
> 时间：2012-09-08T03:25:27.217
> 
> 标签：mysql, sql, select

我有一个有 2 列的表（见下文）。一个成员可以对一个问题有多个回答：

```
RESPONSES
---------
member_id  INT
response_id  INT 
```

```
SAMPLE DATA
member_id -- response_id
    1     --     3
    1     --     5
    2     --     1
    2     --     5
    2     --     9
    3     --     1
    3     --     5
    3     --     6 
```

我需要做的是在表中查询满足所有响应条件的成员。例如，我需要选择 response_id 为 1 和 5 的所有成员。我正在使用以下查询：

```
SELECT DISTINCT member_id 
FROM responses 
WHERE response_id = 1 AND response_id = 5 
```

我希望能取回 member_id 的 2 和 3。但是我什么也没得到。我使用了 EXPLAIN，它显示我的 where 查询中有错误。我究竟做错了什么？

此外，是否有类似于 IN 的函数，必须满足所有条件才能返回 true？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T03:28:33.657

这应该有效：

```
SELECT member_ID
FROM responses
WHERE response_ID IN (1,5)
GROUP BY member_ID
HAVING COUNT(DISTINCT response_id) = 2 
```

您需要计算返回的记录数，该记录数等于您的`IN`子句中提供的值的数量。

[SQLFiddle 演示](http://sqlfiddle.com/#!2/eae45/11)

# jquery - jquery 使用来自通用处理程序的 JSON 数据自动完成

> ID：12327763
> 
> 赞同：0
> 
> 时间：2012-09-08T03:25:58.257
> 
> 标签：jquery, asp.net, generics, autocomplete, handler

我在一个页面上有三个 asp.net 文本框控件。其中之一需要具有自动完成功能。当用户选择一个项目时，其他两个文本框应填充适当的值。

例如：假设第一个文本框是 City。用户从自动完成列表中选择一个城市，第二个应该自动填充州，第三个应该自动填充国家。

我正在调用一个通用的 asp.net 处理程序。我正在调用数据库并从表的三列中检索数据。我正在使用 JavascriptSerializer 将输出字符串序列化为 JSON。所以（例如）我的 JSON 结果是这样的：

[{“城市”：“多伦多”，“省”：“安大略”，“国家”：“加拿大”}]

我一直无法弄清楚如何解析我得到的 JSON 数据。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:29:03.103

如果您使用 JQuery [getJSON](http://api.jquery.com/jQuery.getJSON/)方法，它应该会自动为您解析。

```
$.getJSON(url, function(json) {
    alert(json[0].City);
}); 
```

> 多伦多

如果您收到正常的文本响应，请使用`JSON.parse`：

```
JSON.parse(data)[0].City 
```

**注意**这假设服务器端是正确的，返回纯文本，内容类型标头 = **application/JSON**。

# windows - Visual Studio RC 总是跳转到调试器

> ID：12327766
> 
> 赞同：1
> 
> 时间：2012-09-08T03:27:10.147
> 
> 标签：windows, microsoft-metro

当我构建我的应用程序时，它总是跳转到 base.js 的这一行而没有任何错误。为什么？怎么修？

```
var terminateAppHandler = function (data) {
    debugger;
    MSApp.terminateApp(data);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T05:11:52.260

看到这个有两个原因：

1.  你有一个以 done 结尾的 Promise 链，它正在遇到错误，但你没有在对 done 的调用中提供错误句柄。它是 done 的第二个参数，调用时它的唯一参数是错误信息。

2.  您的应用程序中有未处理的异常。在vs中的debug/exceptions中打开异常时break，在抛出异常时闯入调试器。

# php - 从 fetch Array 创建无限的 ul li 标签（用于列表）

> ID：12327767
> 
> 赞同：4
> 
> 时间：2012-09-08T03:27:35.940
> 
> 标签：php, html-lists

我将使用我的 PDO 数组结果中的 li 和 ul 标签创建一个无限列表（获取）

**我的数组：**

```
Array ( 
 [0] => Array ( [category_label] => catLevel4 [category_id] => 22 [category_owner] => 21 ) 
 [1] => Array ( [category_label] => catLevel3 [category_id] => 21 [category_owner] => 20 ) 
 [2] => Array ( [category_label] => catLevel2 [category_id] => 23 [category_owner] => 8 ) 
 [3] => Array ( [category_label] => catLevel2 [category_id] => 24 [category_owner] => 8 ) 
 [4] => Array ( [category_label] => catLevel2 [category_id] => 20 [category_owner] => 6 ) 
 [5] => Array ( [category_label] => catLevel1 [category_id] => 6 [category_owner] => 0 ) 
 [6] => Array ( [category_label] => catLevel1 [category_id] => 7 [category_owner] => 0 ) 
 [7] => Array ( [category_label] => catLevel1 [category_id] => 8 [category_owner] => 0 )
 ) 
```

**我想要 ：**

```
catLevel1
 catLevel2
  catLevel3
   catLevel4
catLevel1
catLevel1
 catLevel2
 catLevel2 
```

我为转换做了一个函数：

```
function getCategory($parentCategoryId,$data)
{
    foreach($data as $row){if($row['category_owner']==$parentCategoryId){?>
    <li catId='<?php echo $row['category_id']?>'><a><?php echo $row['category_label'];?></a>
            <ul> 
            <?php getCategory($row['category_id'],$data) ;?>
            </ul>
    </li>
    <?php };}
}

echo getCategory(0,$this->categorysList); 
```

这个功能对我来说非常好用，但是为所有项目**创建 null ！`<ul></ul>`**

感谢您帮助构建标准功能；D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T11:40:21.833

你得到空`<ul>`标签，因为你在没有任何检查的情况下对其进行硬编码，并在每次迭代中输出。尝试这样的事情：

```
<?php

function getCategory($parentCategoryId, $data) {
    foreach ($data as $row) {
        if ($row['category_owner'] == $parentCategoryId) {
            $str .= '
<li catId="' . $row['category_id'] . '"><a>' . $row['category_label'] . '</a>' . "\n";
            $res = getCategory($row['category_id'], $data);
            if ($res) {
                $str .= '
    <ul>' . $res . '</ul>
    ' . "\n";
            }
            $str .= '
</li>' . "\n";
        }
    }
    return $str;
}

$str = getCategory(0, $data);
echo $str;

?> 
```

所以你得到这样的输出：

```
<li catId="6">
    <a> catLevel1</a>
    <ul>
        <li catId="20">
            <a> catLevel2</a>
            <ul>
                <li catId="21">
                    <a> catLevel3</a>
                    <ul>
                        <li catId="22">
                            <a> catLevel4</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</li>
<li catId="7">
    <a> catLevel1</a>
</li>
<li catId="8">
    <a> catLevel1</a>
    <ul>
        <li catId="23">
            <a> catLevel2</a>
        </li>
        <li catId="24">
            <a> catLevel2</a>
        </li>
    </ul>
</li> 
```

# c# - 使用 Twitterizer 创建推文会引发 WebException 401

> ID：12327771
> 
> 赞同：0
> 
> 时间：2012-09-08T03:28:14.117
> 
> 标签：c#, asp.net, twitter, twitterizer

我正在使用 Twitterizer，并试图让我的 ASP.Net 应用程序将报告的交通事件上传到官方 Twitter 帐户。

我在 SO 上查看了类似的问题，并且我尝试了所有建议（指定回调 url，检查粗心的错误并确保应用程序具有读写权限），但我仍然无法解决问题。我在下面有一些设置和代码的屏幕截图。回调 URL 不存在，但被编造。任何帮助将不胜感激。

![在此处输入图像描述](../Images/f07c87f73ea1ac3399d10cfb7d03bb2b.png) ![在此处输入图像描述](../Images/ab32b615e9bf8c10706629651c7ef8de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:14:51.000

另一个要寻找的项目是计算机时间。查看 Twitter 响应中的服务器时间，并将其与您正在使用的计算机进行比较。此外，这是来自 Twitter 网站的故障排除指南：

[https://dev.twitter.com/discussions/204](https://dev.twitter.com/discussions/204)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:33:07.803

我回到了这个问题，这次我尝试重新生成我的 API 密钥，现在它正在工作。也许我以前的钥匙是哑弹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T10:50:12.853

```
 public static void UploadTweet(string token, string tokensecreat, byte[] img, string Title)
        {
            Twitterizer.OAuthTokens tokens = new Twitterizer.OAuthTokens();
            tokens.AccessToken = token;
            tokens.AccessTokenSecret = tokensecreat;
            tokens.ConsumerKey = TWITTER_CONSUMER_KEY;
            tokens.ConsumerSecret = TWITTER_CONSUMER_SECRET;
            byte[] photo = img;

            TwitterResponse<TwitterStatus> response = TwitterStatus.UpdateWithMedia(tokens, Title, photo, new StatusUpdateOptions() { UseSSL = true, APIBaseAddress = "http://api.twitter.com/1.1/" });
            if (response.Result == RequestResult.Success)
            {

            }
            else
            {

            }
        } 
```

# java - 如何通过与 Android 的 HTTP 连接在 Google 上简单登录？

> ID：12327772
> 
> 赞同：0
> 
> 时间：2012-09-08T03:28:24.420
> 
> 标签：java, android, http, login

我看到几个关于如何登录谷歌的问题，但所有的答案都是关于身份验证和谷歌 API 的。我想要一个简单的谷歌登录，只是为了检查用户是否存在（我不打算对用户帐户做任何事情（访问电子邮件等......）。用户在点击时填写电子邮件和密码通过http连接记录的登录按钮完成。问题是，即使我输入了错误的电子邮件或密码，它也会继续记录。我不知道我是否使用错误的谷歌网站登录或什么。

这是函数调用和谷歌登录网站：

```
new LoginIntoGoogle().execute(new String[] {"https://accounts.google.com/ServiceLogin?"}); 
```

这就是代码正在做的事情：

```
private class LoginIntoGoogle extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... url) {
        // Start HTTP connection and send the database to the web server
        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url[0]);

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("Email", ""+userEmail));
            nameValuePairs.add(new BasicNameValuePair("Passwd", ""+passtext.getText().toString().trim()));
            nameValuePairs.add(new BasicNameValuePair("signIn", "Login"));

            // Execute HTTP Post Request
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);

            if (response.getStatusLine().getStatusCode() < 300 && response.getStatusLine().getStatusCode() >= 200) {
               System.out.println(response.getStatusLine().getStatusCode());

               Editor editor = mPrefs.edit();
               editor.putString("login_status", "Logged into your google account");
               editor.commit();

               return "Logged into your google account";
            }
            else {
               Editor editor = mPrefs.edit();
               editor.putString("login_status", "Problem to login into your google account");
               editor.commit();

               return "Problem to login into your google account";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:17:55.817

查看最近发布的 Google Playstore 服务。阅读[文档](https://developers.google.com/android/google-play-services/)。查看[来自 Google IO 的有关 PlayStore 服务的视频](http://www.youtube.com/watch?v=lc_Eme_xpr4)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:10:09.370

您必须使用加密，因为您通过 Internet 传输个人数据。

你应该看看[Oauth](http://oauth.net/)

# php - DB_DEBUG 设置为 FALSE 的数据库连接设置

> ID：12327775
> 
> 赞同：2
> 
> 时间：2012-09-08T03:29:01.603
> 
> 标签：php, database-connection, codeigniter-2

我正在尝试连接到我的数据库，但收到以下消息：

无法使用提供的设置连接到您的数据库服务器。

文件名：core/Loader.php

行号：346

所以看了很多之后，我发现在数据库连接中将 $db['default']['db_debug'] 设置为 FALSE 可以解决它。我这样做了，错误消息消失了；该网站的第一页也加载了，但它没有数据库调用。从那时起，我在数据库调用期间开始出现错误，查询可能没有返回查询对象。

所以我想知道 DB_DEBUG 是否真的解决了问题连接，或者它只是掩盖了 DB 连接错误没有显示的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T13:10:34.637

我建议你在调试模式下设置 $db['default']['db_debug'] = TRUE 。

在 Application > Config > database.php 中设置

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = '<ur username>'; // like 'root'
$db['default']['password'] = ',ur pwd.'; // like ''
$db['default']['database'] = '<db name>'; 
```

在应用程序 > 配置 > autoload.php

像这样加载数据库，

```
$autoload['libraries'] = array('database'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T06:54:20.907

请看这个，我在另一个问题中回答：

我找到了原因。在我的情况下，数据库错误是因为我在 php.ini 中的 mysql 配置不正确。

在 php.ini 中设置 mysql 配置后，CI 运行良好，如下所示：

```
[Mysql]
mysql.default_socket = /tmp/mysql.sock 
```

如果你没有配置php.ini，默认socket是/var/mysql/mysql.sock，请检查一下。

我之前也将 $db['default']['db_debug] 设置为 FALSE，看起来还可以，但不行。它只是隐藏了mysql配置的错误，当我测试从mysql表中读取时，我什么也没有，也不知道为什么什么也没有。于是我调试了一下，发现是因为我的mysql连接没有建立。:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-04T14:46:09.547

在 Application > Config > database.php 中设置

```
db['default'] = array(
                 ..,
                'db_debug' => FALSE,
                 ..) 
```

# android - 以编程方式在 Fragment 中膨胀 XML

> ID：12327778
> 
> 赞同：1
> 
> 时间：2012-09-08T03:29:15.040
> 
> 标签：android, xml, android-layout, android-fragments, layout-inflater

我有`MainActivity.java`我的第一个片段，另一个片段中`Fragment.java`有一个 TabHost。当用户单击 MainActivity 中的按钮时，我想在第二个片段的 Tab1 中填充 XML。

`OnClickListener`中的Button`MainActivity`如下：

```
btOkButton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        LayoutInflater lf = getLayoutInflater();
        Fragment.updateTab1(lf);                
    }               
}); 
```

Fragment`updateTab1(..)`类中的方法是：

```
public static void updateTab1(LayoutInflater lf) {
        lf.inflate(R.layout.xml_to_inflate, (ViewGroup)llTab1, false);
    } 
```

在哪里：

```
llTab1 = (LinearLayout)getActivity().findViewById(R.id.tab1); 
```

* * *

执行此操作时我没有收到任何异常，也没有强制关闭。

在 Debug 中，我可以看到所有这些代码都毫无例外地运行，但没有必要的 XML 被夸大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T08:21:23.607

## 最后对我有用的是：

在处理片段时，我错过了*onCreate()*中的以下行以使*充气*对象工作：

`inflater = getActivity().getLayoutInflater();`

并保持其余代码不变。

# java - 网络服务安全 java

> ID：12327783
> 
> 赞同：0
> 
> 时间：2012-09-08T03:30:31.893
> 
> 标签：java, xml, web-services, jax-ws

我的 Web 服务是使用 IBM JAX-RPC 创建的。作为增强的一部分，我需要为现有服务提供一些安全性。

一种方法是提供一个处理程序，所有请求和响应将仅通过该处理程序。在请求中，我可以为访问它的每个应用程序/用户实现一些身份验证规则。

除此之外，还有哪些可能的方法来保护它？

我听说过一些称为 Web 服务的 wsse 安全性的东西。是否可以为 JAX-RPC 实现它？还是只能为 JAX-WS 实现？需要一些有关 wsse 安全性的有用输入，以便我可以快速学习它。

除了处理程序和 wsse 安全性之外，还有其他可能的方式来确保服务安全吗？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:53:36.573

JAX-RPC 和 Document-Literal 是创建 SOAP Web 服务的两种不同方式。要增加安全性，请查看[OASIS](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=security)。您必须向 SOAP 消息添加策略标记和额外的加密层

# python - 使用 Python 构建树

> ID：12327787
> 
> 赞同：6
> 
> 时间：2012-09-08T03:31:31.900
> 
> 标签：python, algorithm, search-engine, information-retrieval, booleanquery

我正在尝试实现未排序的布尔检索。为此，我需要构建一棵树并执行 DFS 来检索文档。我有叶子节点，但我很难构建树。

例如：查询 = OR ( AND (maria sharapova) 网球)

结果：

```
      或者
     | |
     和网球
     | |
  玛丽亚莎拉波娃

```

我使用 DFS 遍历树并计算某些文档 ID 的布尔等效值，以从语料库中识别所需的文档。有人可以帮助我使用 python 设计这个吗？我现在已经解析了查询并检索了叶节点。

**编辑**：我是新来的，所以对缺乏清晰度表示歉意。我基本上是在尝试构建一个非常幼稚的搜索引擎。因此，用户输入任何布尔查询，例如：OR（AND (maria sharapova) 网球）。我有一个维基百科文档语料库，根据您键入的查询显示给用户。

到目前为止，我已经解析了查询以检索单个运算符（如 OR、AND 等）。并且，个人搜索词（玛丽亚、网球等）。解析代码只是一个函数，它基本上将所有运算符和查询术语按类型分组。即（玛丽亚莎拉波娃），（网球），或，和。我以这种方式解析了这个函数，以便自下而上地创建一个树。现在，对相应的关键字（如网球、玛丽亚、莎拉波娃等）使用倒排列表，我对倒排列表执行布尔运算以获得某个“documentid”。然后将此 documentid 传递给 API，然后该 API 将检索正确的维基百科页面。

只是为了更详细地解释该主题，请参阅此文档以获取有关我手头问题的更多信息： [http ://www.ccs.neu.edu/home/jaa/CSG339.06F/Lectures/boolean.pdf](http://www.ccs.neu.edu/home/jaa/CSG339.06F/Lectures/boolean.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:25:15.033

首先，如果您希望查询语言的精美语法支持许多运算符、范围查询或通配符，您绝对应该参考 Joran 指出的 lex/yacc 解决方案。

其次，从您发布的演讲幻灯片中，我认为您更关心如何实现布尔查询模型，而不是在 python 中构建树。那么你就不需要担心查询本身了。假设查询格式正确，如下所示：

```
"OR ( AND ( maria sharapova ) tennis )" 
```

也就是说，运算符（AND/OR）和关键字/括号之间有空格。然后您只需要两个堆栈（不使用树数据结构上的 DFS）来解析查询并从中获取组合的搜索结果。

第一个堆栈包含运算符 (AND/OR) 和操作数（例如，maria、网球）。您将括号视为打开/关闭条件以处理堆栈顶部的当前操作数。只有在看到右括号时才处理搜索操作`)`。

第二个堆栈保存当前的搜索结果。

让我们使用上面的示例进行逐步演示。您从左到右扫描查询。

第 1 步。您将“OR”运算符推入堆栈。

```
+               +
+               +
+    OR         +
+ + + + + + + + + 
```

第 2 步。您会看到一个左括号`(`，请跳过它。

第 3 步。您将“AND”运算符推入堆栈。现在堆栈如下所示：

```
+               +
+    AND        +
+    OR         +
+ + + + + + + + + 
```

第 4 步。您跳过另一个`(`.

第 5 步。您将“maria”推送到您的堆栈中。

第 6 步。您将“sharapova”推入堆栈。现在堆栈如下所示：

```
+   sharapova   +
+    maria      +
+    AND        +
+    OR         +
+ + + + + + + + + 
```

第 7 步。您会看到一个右括号`)`。现在是时候进行第一次手术了。您弹出堆栈顶部的所有项目，直到看到一个运算符。弹出操作符以获取**当前操作符**。现在您分别处理“sharapova”和“maria”的搜索，并使用运算符“AND”组合搜索结果。假设对于“玛丽亚”，您会得到 3 个文档 ID：`[1, 2, 3]`. 对于“莎拉波娃”，您将获得另外 5 个文档 ID `[2, 3, 8, 9, 10]`：. 将结果与“AND”组合后，您将`[2,3]`在
第二个堆栈中保存当前搜索结果。当前情况如下所示：右侧是结果缓冲区。

```
+               +           +         +
+               +           +         +
+               +           +         +
+    OR         +           +  [2,3]  +
+ + + + + + + + +           + + + + + + 
```

第 8 步。您将网球推入堆栈。

```
+               +           +         +
+               +           +         +
+    tennis     +           +         +
+    OR         +           +  [2,3]  +
+ + + + + + + + +           + + + + + + 
```

第 9 步。您会看到另一个右括号`)`。同样，您弹出堆栈顶部的所有项目，直到您看到“或”。您开始使用“网球”进行搜索，并假设您得到了结果 doc ids: `[3, 5, 7]`。此时，您使用运算符“OR”将此结果与缓冲区中的先前结果组合，以便最终获得 doc ids: `[2,3,5,7]`。

我的示例代码在[这里](https://gist.github.com/3948657)。`len(word)`注意我通过随机采样整数来模拟搜索和返回文档 ID 。

代码的打印输出逐步显示了系统在处理当前查询项（第 1 列）之前的样子、结果缓冲区的状态（第 2 列）、堆栈中的项（第 3 列）和立即搜索结果（第 4 列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T06:32:19.397

列表列表是在 Python 中表示树的一种自然方式（无需创建类）：

```
>>> query = ['OR', ['AND', 'maria', 'sharapova'], 'tennis'] 
```

# c - 如何理解这样的C宏展开

> ID：12327788
> 
> 赞同：1
> 
> 时间：2012-09-08T03:31:55.833
> 
> 标签：c, macros

宏定义：

```
#define HTTP_ERRNO_MAP(XX)                                           \
  /* No error */                                                     \
  XX(OK, "success")                                                  \
                                                                     \
  /* Callback-related errors */                                      \
  XX(CB_message_begin, "the on_message_begin callback failed")       \
  XX(CB_url, "the on_url callback failed")                           \

/* Define HPE_* values for each errno value above */
#define HTTP_ERRNO_GEN(n, s) HPE_##n,
enum http_errno {
  HTTP_ERRNO_MAP(HTTP_ERRNO_GEN)
};
#undef HTTP_ERRNO_GEN 
```

用“gcc -E”展开后，

```
enum http_errno {
  HPE_OK, HPE_CB_message_begin, HPE_CB_url,}; 
```

宏如何扩展为结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:56:25.657

`HTTP_ERRNO_MAP(XX)`将替换`XX`为`HTTP_ERRNO_GEN`并因此调用`HTTP_ERRNO_GEN(n, s)`宏 3 次：

```
HTTP_ERRNO_GEN(OK, "success")
HTTP_ERRNO_GEN(CB_message_begin, "the on_message_begin callback failed")
HTTP_ERRNO_GEN(CB_url, "the on_url callback failed") 
```

`HTTP_ERRNO_GEN(n, s)`只需获取第一个参数的实际文本并将其连接起来 ( `##n`)，`HPE`前面有一个，最后有一个逗号。因此，上面的三个命令将产生以下三个输出：

```
HPE_OK,
HPE_CB_message_begin,
HPE_CB_url, 
```

因此，当被预处理器扩展时，

```
enum http_errno {
  HTTP_ERRNO_MAP(HTTP_ERRNO_GEN)
}; 
```

变为（+- 空格）：

```
enum http_errno {
   HPE_OK,
   HPE_CB_message_begin,
   HPE_CB_url,
}; 
```

# image-processing - 不规则形状的 OpenCV 质心

> ID：12327791
> 
> 赞同：7
> 
> 时间：2012-09-08T03:33:23.983
> 
> 标签：image-processing, opencv, computer-vision, shape, centroid

如何使用 OpenCV 获得不规则形状的质心？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T03:38:15.320

我建议查看[cv::Moments](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html) (C++) 或 cvMoments (C) 函数。

[这个 StackOverflow 线程为与您的问题非常相似的问题提供了一些示例代码。](https://stackoverflow.com/questions/9074202/opencv-2-centroid)

[这篇文章](https://stackoverflow.com/questions/279410/opencv-object-detection-center-point)探讨了一些与寻找对象中心点相关的理论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T07:59:26.083

你说的质心是什么意思？

如果它是质心，您可以计算形状内各点坐标的平均值。但是对于“不规则”（非凸）形状，质心可以在形状之外。

如果您希望形状内的点距离任何轮廓点更远，您可以查看 distTransform 函数。

# javascript - 如何在 Twitter Bootstrap 中组合选项卡和轮播

> ID：12327796
> 
> 赞同：3
> 
> 时间：2012-09-08T03:35:49.690
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试实现 Twitter Bootstrap Carousel 和 Tabs。它们在初始加载时看起来都运行良好，但只要我点击其中一个轮播箭头，内容就会消失（活动类被删除并且显示设置为无）。任何人都可以看到问题可能是什么？[示例页面](http://www.owdtsample.com/)（查看屏幕右下角的新闻框）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:32:19.870

控制链接是指`#news-box`：

```
<!-- Carousel nav -->
<a class="carousel-control left" href="#news-box" data-slide="prev">‹&lt;/a>
<a class="carousel-control pause-play pause" href="#news-box"></a>
<a class="carousel-control right" href="#news-box" data-slide="next">›&lt;/a> 
```

但是您的轮播没有`id`：

```
<div class="carousel slide"> 
```

尝试：

```
<div class="carousel slide" id="news-box"> 
```

# linux - 包含目录的分区上的空闲 inode 数

> ID：12327798
> 
> 赞同：2
> 
> 时间：2012-09-08T03:35:55.850
> 
> 标签：linux, unix, filesystems, diskspace, inode

我有一个在 Linux 下运行的 Python 脚本，它在给定目录中生成大量小文件。但是，许多 Linux 文件系统（如 ext4）在创建时设置了固定数量的 inode，因此我想确保在开始之前可以将这么多文件保存到该目录中。从命令行，您可以使用`df -i /some/directory`.

在 Python 中，如何找到该目录所在的文件系统上的空闲 inode 数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T03:35:55.850

这可以使用`statvfs`系统调用来完成。在 Python（2 和 3）中，可以使用[`os.statvfs`](http://docs.python.org/dev/library/os.html#os.statvfs). 该调用描述了包含路径指定的文件/目录的文件系统。

因此，要获取空闲 inode 的数量，请使用

```
#import os
os.statvfs('/some/directory').f_favail 
```

此外，有可能某些百分比的 inode 是为 root 用户保留的。如果脚本以 root 身份运行并且您希望允许它使用保留的 inode，请使用`f_ffree`而不是`f_favail`.

# mongodb - mongodb - 插入但限制总记录？

> ID：12327801
> 
> 赞同：2
> 
> 时间：2012-09-08T03:36:42.840
> 
> 标签：mongodb

不久前，当我研究 MongoDB 时，我遇到了一篇文章，他们解释了如何能够插入记录但只保留 10 条（例如），所以一旦它达到 10 条记录，它就会删除最旧的记录并插入最新的记录。这一切都是在一个查询中完成的（至少我认为是这样）。

有人可以帮我举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:43:58.793

听起来您想要一个有[上限的集合](http://www.mongodb.org/display/DOCS/Capped+Collections)。

```
db.createCollection("just_ten", {capped:true, max:10}); 
```

# c++ - 如何在类中使用成员函数特化？

> ID：12327804
> 
> 赞同：2
> 
> 时间：2012-09-08T03:37:41.217
> 
> 标签：c++, templates

```
#include <iostream>
#include <string>

using namespace std;

struct Uid {
  typedef int type;  
};

struct Name {
  typedef string type;
};

struct Age {
  typedef int type;
};

template <class T1, class T2, class T3>
class People {
private:
  typename T1::type val1;
  typename T2::type val2;
  typename T3::type val3;
  //add a get function here
  }
};

int main() {
  People<Uid, Name, Age> people;
  people.get<Uid>(); //make this validate
} 
```

这是我的代码，我想在类中添加一个 get 函数以使函数调用 get 在 main validate 中。我尝试在类中添加一个模板获取及其专业化版本，但这是一个无效的方法，编译器说：非命名空间范围“类人”中的显式专业化。有人说这种方法在 vs 中有效，但是它打破了标准。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T04:21:29.443

您需要一个帮助类，您的模板化 get() 成员函数可以使用。助手类可以在命名空间范围内。

```
#include <iostream>
#include <string>

using std::string;
using std::cout;

struct Uid {
  typedef int type;
};

struct Name {
  typedef string type;
};

struct Age {
  typedef int type;
};

// Helper class that can be specialized to get different members of People.
template <class P, class U> struct PeopleGet;

template <class T1, class T2, class T3>
class People {
public:
  People(
    typename T1::type const& val1,
    typename T2::type const& val2,
    typename T3::type const& val3
  )
  : val1(val1),
    val2(val2),
    val3(val3)
  {
  }

  template <class U> typename U::type get()
  {
    return PeopleGet<People<T1,T2,T3>,U>::get(*this);
  }
private:
  typename T1::type val1;
  typename T2::type val2;
  typename T3::type val3;

  template <class P,class U> friend class PeopleGet;
};

template <class T1,class T2,class T3>
struct PeopleGet<People<T1,T2,T3>,T1> {
  static typename T1::type get(const People<T1,T2,T3> &people)  { return people.val1; }
};

template <class T1,class T2,class T3>
struct PeopleGet<People<T1,T2,T3>,T2> {
  static typename T2::type get(const People<T1,T2,T3> &people)  { return people.val2; }
};

template <class T1,class T2,class T3>
struct PeopleGet<People<T1,T2,T3>,T3> {
  static typename T3::type get(const People<T1,T2,T3> &people)  { return people.val3; }
};

int main()
{
  People<Uid, Name, Age> people(5,"name",47);
  cout << people.get<Uid>() << "\n";
  cout << people.get<Name>() << "\n";
  cout << people.get<Age>() << "\n";
  return 0;
} 
```

# vb6 - “编译错误：End Sub，End Function..之后只能出现注释。” Access 2010 VBA

> ID：12327805
> 
> 赞同：1
> 
> 时间：2012-09-08T03:37:57.970
> 
> 标签：vb6, ms-access-2010

我正在创建一个表单，并在 VBA 窗口中创建了我的第一个函数。该函数创建按钮。在“结束功能”之后输入任何内容后，我收到一个错误 - “只有评论出现在..之后”有什么问题？我是否将功能放在错误的区域？

这是我的代码：

```
Option Compare Database 
Option Explicit

Function MainMenuOptions()

Dim frm As String
frm = "Main"

Dim SCFormB As Control
Dim SCSearchB As Control
Dim SCReportB As Control

Set SCFormB = CreateControl(frm, acOptionButton, , , , 0.5, 0.6, 1.5, 0.55)
Set SCSearchB = CreateControl(frm, acOptionButton, , , , 0.5, 1.5, 1.5, 0.55)
Set SCReportB = CreateControl(frm, acOptionButton, , , , 0.5, 2.4, 1.5, 0.55)

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-27T18:54:38.480

我最近遇到了这个问题。我正在创建一个新的 Shares/Derivatives 交易和管理应用程序，并且我在创建表单方面取得了惊人的进展，有一次，我开始为表单上控件的所有 _Click() 处理程序收到此错误. 但是，表单上某个字段的 _Enter() 处理程序并没有发生这种情况。在任何“结束”语句之后都没有多余的文字 - 完全没有！我发现，不知何故，不正确的 LINE ENDINGS 出现在“End”语句的末尾。

修复：转到每个“End”语句的末尾，点击 DELETE 直到下一个 Sub 语句出现在光标处（即，您现在将下一个过程的开始与前一个 proc 的 End 语句在同一行)，然后按 ENTER 将下一个 Sub 语句放回它自己的行。这将确保您在每个事件处理程序的末尾都有正确的 CR/LF（或该编辑器/编译器所需的任何内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T03:59:10.367

显然，您的模块中有额外的代码，位于函数或子程序之外。在 VBA 编辑器中选择调试 -> 编译，它应该突出显示可以删除或修改的违规代码。

仅供参考：[CreateControl](http://msdn.microsoft.com/en-us/library/office/bb237827%28v=office.12%29.aspx)使用缇（一英寸的 1440 分之一）表示左侧、顶部、宽度和高度。您可能希望将正在使用的数字乘以大约 1440。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T03:58:10.037

如果您在 Microsoft Office 开发中心[查看此错误消息](http://msdn.microsoft.com/en-us/library/office/gg251714.aspx)，您会得到以下解释：

> 您将可执行代码放在过程之外。过程之外的任何非声明性行都必须以注释分隔符 (') 开头。声明性语句必须出现在第一个过程声明之前。代码执行时会忽略注释。

这意味着您可以在 Sub 或 Function 之外编写的代码类型是有限的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T22:29:29.577

我遇到了这个错误，解决方案很简单，但是 VBA 的调试器让我暂时忘却了。我在“End Sub”之后有额外的代码需要删除（复制和粘贴错误），但是调试器没有突出显示“End Sub”语句之后的额外代码，而是突出显示了 Sub 过程的开头，这让我认为错误出现在突出显示的子过程的开始语句和它上方的“结束子”之间，而实际上错误是在突出显示的子过程的“结束子”之后，所以我需要在突出显示的文本下方仔细查看。因此，实际上，VBA 强调了一个完全正常的子过程的开始，而不是紧随其后的问题。

就像有人在你的前门外面放了一袋垃圾，所以你一进门就走进垃圾箱，然后指着门说“嗯，我需要移动垃圾”。

# php - 无法获取博客类别以提取样式表样式 - 表达式引擎

> ID：12327806
> 
> 赞同：2
> 
> 时间：2012-09-08T03:38:11.217
> 
> 标签：php, codeigniter, blogs, expressionengine, categories

所以我试图让我的表达式引擎博客上的类别过滤器在点击一个类别时保持在相同的布局中......但是每次我点击一个类别时，它都会让我跳到一个空白的白色页面（所以看起来它由于某种原因没有从任何地方获得任何样式）。这很奇怪，因为我的标题包含在我所有的样式中，等等。

我有我的初始模板组：“PAGE-COMPS”（带两个模板）：

(1) 索引

（2）博客——内容如下

```
{embed="embeds/header-inner" my_body_class="blog" my_page_title="Blog"} 

  <div class="mid-wrapper">

    <div class="row blog">

      <div class="span9">  
    {embed="posts/index"}
      </div>

  <div class="span2">
     {snp_blog_sidebar}
      </div>

    </div><!-- end of row -->

  </div> <!-- end of mid-wrapper -->

{snp_footer} 
```

然后我有了我的第二个模板组：“嵌入”

我有我的头文件：“头文件内部”在代码上方的文件中看到如下：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{site_name} | {embed:my_page_title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

<!-- Le styles -->
<link href="../assets/css/bootstrap.css" rel="stylesheet">
<link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">

<!-- Carousel jscrollpane Styles -->
<link rel="stylesheet" type="text/css" href="../assets/css/jquery.jscrollpane.css" media="all" />

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Load jQuery -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<!-- Load ScrollTo -->
<script type="text/javascript" src="http://flesler-plugins.googlecode.com/files/jquery.scrollTo-1.4.3.1-min.js"></script>
<!-- Load LocalScroll -->
<script type="text/javascript" src="http://flesler-plugins.googlecode.com/files/jquery.localscroll-1.2.7-min.js"></script>

<script type="text/javascript">// <![CDATA[
    // When the document is loaded...
    $(document).ready(function()
    {
        // Scroll the whole document
        $('#section-links').localScroll({
           target:'body'
        });

    });

// ]]>
</script>

</head>

<body class="{embed:my_body_class}">

<header>

</header>

<div class="container">

  <div class="hero-unit">
    <img class="the" src="../assets/img/the.png">
    <p><a class="logo" href="{site_url}">Site Name<span> More Name</span><img class="image" src="{site_url}assets/img/image.png" alt="{site_name}"></a></p>

    <nav id="section-links">
  <a href="{site_url}">Return to the Home Page</a>
    </nav>
  </div>

  <!-- Main hero unit for a primary marketing message or call to action -->
  <div class="hero-unit">

    <div class="slogan">
      <h1>blog name</h1>
      <p>more description...</p>
    </div>

  </div> 
```

然后我有一个博客条目的最后一个模板组：称为“帖子”

帖子有一个模板：

“索引”如下：

```
<!-- posts list -->
            <div id="posts-list" class="cf">  

        <!-- THIS ONLY KICKS IN WHEN CATEGORY IS SELECTED (CATEGORY MODE) -->
        {exp:channel:category_heading}
            <h1>{category_name}</h1>
                {if category_description}
            <p>{category_description}</p>
                {/if}
        {/exp:channel:category_heading}

            {exp:channel:entries channel="blog_audio|blog_video|blog_link|blog_quote|blog_post|blog_image" limit="10"}  

            {!-- Choose appropriate snippet based on source channel --}
                {if channel_short_name == "blog_audio"}
                {snp_blog_audio}
            {/if}

            {if channel_short_name == "blog_video"}
                    {snp_blog_video}
            {/if}

                {if channel_short_name == "blog_link"}
                    {snp_blog_link}
                {/if}

            {if channel_short_name == "blog_quote"}
                {snp_blog_quote}
            {/if}

            {if channel_short_name == "blog_post"}
                {snp_blog_post}             
            {/if}

            {if channel_short_name == "blog_image"}
                {snp_blog_image}
            {/if}

            {!-- Commenting out for now, we'll come back to it 
                <!-- page-navigation -->
                <div class="page-navigation cf">
                    <div class="nav-next"><a href="#">&#8592; Older Entries </a></div>
                    <div class="nav-previous"><a href="#">Newer Entries &#8594;</a></div>
                </div>
                <!--ENDS page-navigation -->
            --}

        {/exp:channel:entries}

    </div>
    <!-- ENDS posts list --> 
```

最后，我的侧边栏有一个片段，其类别如下：

SNP_BLOG_SIDEBAR

```
<!-- sidebar -->
<aside id="sidebar">    
<ul>
    <li class="block">
        <h4>Our Blog</h4>
        Description of our blog goes here
    </li>

    <li class="block">
        <h4>Categories</h4>
        <ul>
            {exp:channel:categories channel="blog_audio|blog_video|blog_link|blog_quote|blog_post|blog_image" style="linear" show_empty="no"}
                <li class="cat-item"><a href="{path='blog/index'}" title="{category_name}">{category_name}</a></li>
            {/exp:channel:categories}
        </ul>
    </li>

    <li class="block">
        <h4>Archives</h4>
        <ul>
            {exp:channel:month_links channel="blog_audio|blog_video|blog_link|blog_quote|blog_post|blog_image" limit="50"}
                <li class="cat-item"><a href="{path='blog/index'}" title="title"> {month}, {year}</a></li>
            {/exp:channel:month_links}
        </ul>
    </li>
</ul>   
</aside>
<!-- ENDS sidebar --> 
```

我非常感谢任何关于可能出现问题的帮助...当我再次单击一个类别时，它会将我带到一个空白白页，其中列出了该类别的博客文章，而不是让我继续关注当前的博客设计...

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:30:11.653

它是`../assets/[...]`您的样式的相对链接`embeds/header-inner`。这可以从`http://localhost/index.php/whatever/you-want/`或 从工作`http://localhost/blog`，但不能从任何看起来像浏览器的更深的文件夹结构（`http://localhost/blog/categories/[something]`）那样不起作用。

如果可以的话，从站点根目录尝试一些东西，比如`<link rel="stylesheet" href="/assets/css/file.css">`.

# erlang - 为什么escript不能运行？

> ID：12327809
> 
> 赞同：5
> 
> 时间：2012-09-08T03:38:52.073
> 
> 标签：erlang, rebar, erlang-escript

rebar 在当前目录中。

```
$ls -l rebar
--rwxr-xr-x  1 ***  wheel  90778  8  6 23:05 rebar*
$./rebar
escript: no such file or directory: './rebar'

$whereis escript
escript: /usr/local/bin/escript 
```

我正在使用 FreeBSD 9.0。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T02:17:33.883

您应该在**钢筋**文件的开头进行更改：

```
#!/usr/bin/env escript 
```

到：

```
#!/usr/local/bin/env escript 
```

要不就：

```
#!/usr/local/bin/escript 
```

# mongodb - 基于 _id 检索顺序文档

> ID：12327831
> 
> 赞同：1
> 
> 时间：2012-09-08T03:44:33.797
> 
> 标签：mongodb, nosql

我有一个文档在弹性搜索中被索引的场景，我需要在 mongo 中检索匹配的文档以及按时间戳排序的前后文档。这个想法是检索文档的上下文以及原始文档。

如果我使用顺序_id，我现在可以成功地做到这一点。例如，使用以下数据：

```
[
    {_id: 1, value: 'Example One' },
    {_id: 2, value: 'Example Two' },
    {_id: 3, value: 'Example Three' },
    {_id: 4, value: 'Example Four' },
    {_id: 5, value: 'Example Five' },
    {_id: 6, value: 'Example Six' },
    ...
] 
```

如果我在 ES 中搜索“四”，我会返回 4 的文档 _id，因为它是连续的，我可以创建一个 mongo 查询来拉取 id - 2 和 id + 2 之间的范围，在本例中为 2 - 6。这行得通好吧，只要我不删除文档。当我删除一个文档时，我将不得不重新索引整个系列以消除差距。我正在寻找一种实现相同结果的方法，但也能够删除文档而无需更新所有文档。

我愿意使用其他技术来实现这一点，我不一定与 mongodb 绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:05:26.177

我可以使用以下内容获得所需的结果：

```
collection.find( {_id: { $gte: matchedId } } ).limit(3);
collection.find( {_id: { $lt: matchedId } } ).sort({$natural: -1}).limit(2); 
```

不如使用显式范围好，但无需在删除文档时重新计算任何内容。

是的，我知道[natural order 的局限性](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)，这对我的特定用例来说不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T06:57:44.743

这个问题与 MongoDB 无关，与在这里使用不同的数据库（例如 RDBMS）没有什么不同。您将不得不循环查找小于/大于当前 ID 的文档 ID，并找到前两个匹配项。是的，这意味着您需要执行多个查询。唯一的其他选择是在 MongoDB 之上实现一个链表，您可以在其中存储指向左右邻居节点的指针。是的，如果发生删除，您需要调整指针（基本数据结构算法......）。缺点是：您将需要多个操作才能执行更改。由于 MongoDB 不是事务，您可能会遇到不一致的上一个/下一个指针……这就是为什么 MongoDB 在这里完全糟糕的原因。

# javascript - javascript发送变量到函数

> ID：12327833
> 
> 赞同：0
> 
> 时间：2012-09-08T03:44:50.783
> 
> 标签：javascript, function, variables

我想 SetTimeout 并将变量名 'MyVAR' 返回给 timer:function('MyVAR') 但我不能这样做。

```
<script type="text/javascript">
  var a = function () {
    function aa(){

    }
    return{
      timer: function (MyVAR) {
        setTimeout("a.timer(MyVAR);", 1000);
      }
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:53:36.463

```
setTimeout(function() {
    a.timer(MyVAR);
}, 1000); 
```

# c# - 如何通过反射获取泛型参数的类型

> ID：12327834
> 
> 赞同：1
> 
> 时间：2012-09-08T03:45:03.010
> 
> 标签：c#, reflection, methodinfo, generic-method

我需要通过反射获取泛型参数的泛型类型。但真正的类型，而不是类型 { Name="T" ; 全名=空}

```
public void Sample<T>(T i, object o)
{
    MethodBase basee = MethodBase.GetCurrentMethod();
    Type[] types = basee.GetGenericArguments();
} 
```

但我不能使用 typeof(T)，因为我正在使用反射

有没有办法（使用反射）来获取泛型参数的类型类型。

```
// in this case i should get (Type) { Name="Int32" ; FullName="System.Int32" }
myClassObj.Sample(10, new object()); 
```

在其他方面，我想知道如何调用 typeof(T) ex 调用的方法：

```
// in Il code I see that the compiler use:
// ldtoken !!T => this should get the RuntimeTypeHandle needed as parameter
// System.Type::GetTypeFromHandle(valuetype System.RuntimeTypeHandle)
Type t = Type.GetTypeFromHandle( ? ? ? ); 
```

我如何从 T 泛型参数中获取 RuntimTypeHandle

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T04:06:16.953

我不知道这一切的意义，但是关于

```
public void Sample<T>(T i, object o)
{
  Type t = typeof(T);
  if (i != null)
  {
    t = i.GetType();
  }

  // Do whatever with t
  Console.WriteLine(t);
} 
```

然后你就有了运行时类型（如果有一个对象），否则你就有了静态类型。

# html - 从网络编辑网站内容。

> ID：12327837
> 
> 赞同：0
> 
> 时间：2012-09-08T03:46:06.133
> 
> 标签：html, drupal, dynamic

我有一个朋友，我正在为其运营一个网站。当他需要修改文本时，他必须通过我，而我很忙，所以他必须等待。他不了解 HTML，但我想对其进行设置，以便他可以转到某个页面，登录并至少编辑页面的文本。我在想也许可以尝试drupal？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:33:18.493

最好的解决方案是 CMS，如 drupal、wordpress 或 joomla。我发现 wordpress 是最容易使用的一种。一旦其设置更改在瞬间完成。

# css - 如何在 Twitterbootstrap 中将下拉菜单居中？

> ID：12327838
> 
> 赞同：1
> 
> 时间：2012-09-08T03:46:13.550
> 
> 标签：css, twitter-bootstrap

我很难将由组中的按钮切换的下拉菜单居中。该组正确居中，但下拉菜单继续在左角。

这是一个[例子](http://jsfiddle.net/QFkbP/2/)。

有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:51:45.400

也许您正在寻找类似的东西：[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/LAUsn/)

```
.centered {
    text-align: center;
}
.centered .dropdown {
    display: inline-block;
    min-width: 500px; /* Needs to be big enough for the menu to be centered in it */
}
.centered .dropdown.open .dropdown-menu {
    left: 0;
    right: 0;
    margin-left: auto;
    margin-right: auto;
    width: 200px;
} 
```

```
<div class="centered">
    <div class="dropdown">
        <a class="dropdown-toggle btn" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="#">
        Dropdown
        <b class="caret"></b>
        </a>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
            <li><a href="#">a</a></li>
            <li><a href="#">b</a></li>
            <li><a href="#">c</a></li>
        </ul>
    </div>
</div> 
```

**编辑**完成CSS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:45:05.493

如果您想将您的`div.dropdown`内部居中另一个`div`这样做：

```
#dropdown1 {
    width: 183px;
    margin: 0 auto;
}​ 
```

它的缺点是您需要知道要居中的元素的确切宽度（这就是我使用 id 作为选择器的原因；当然您需要先设置它）。

看看它在你[更新的 fiddle](http://jsfiddle.net/QFkbP/8/)上是如何工作的。

# html - 按钮对齐问题？

> ID：12327839
> 
> 赞同：1
> 
> 时间：2012-09-08T03:46:23.353
> 
> 标签：html, css, html-table

我正在使用一个表格和一个 div 来创建一个居中的按钮组......但由于某种原因，我的按钮对齐很奇怪？这是问题的一个jsfiddle。[提琴手](http://jsfiddle.net/J7rYF/)

有什么办法可以解决这个问题，我可以添加更多按钮并让它们直截了当？如果需要更多代码，请询问我，我会发布。

这是我的html：

```
 <div align = "center" class="bdy">

        <table class="wrapper">

            <tr>

                <td>

                    <button type="button">Services</button>

                    <br>

                    <button type="button">Live</button>

                </td>

            </tr>

        </table>

    </div>​ 
```

我的 CSS 在小提琴上！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T03:49:48.157

摆脱`<br>`按钮之间为我修复了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T03:49:55.023

我通过删除按钮之间的空格来修复对齐，但这不是正确的方法。

固定版本（仅供参考）：http: [//jsfiddle.net/J7rYF/1/](http://jsfiddle.net/J7rYF/1/)

表格不应该用于布局按钮。`div align=center`已弃用。`<br>`不应该用于这种类型的格式化目的。

如果你想要一个开箱即用的示例/解决方案，[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html#buttons)有一些非常好的示例和模板。

或者，这是一个简单的模板，您可以从它开始将按钮列表居中：http: [//jsfiddle.net/J7rYF/10/](http://jsfiddle.net/J7rYF/10/)

## HTML

```
<div class="button-set">
    <ul>
        <li><button type="button">Services</button></li>
        <li><button type="button">Live</button></li>
    </ul>
</div> 
```

## CSS

```
.button-set {
   width: 300px;
   margin: 0 auto; /* this centers the element */       
}

.button-set UL {
    list-style: none; /* removes bullets */  
}

/* this controls spacing between adjacent buttons */
.button-set LI + LI {   
    margin-top: 4px;
}

/* width: 100% is needed...everything else is optional */
BUTTON {
    width: 100%;
    border: 1px solid #000;
    padding: 4px;
    border-radius: 4px;
    color: #fff;
    background-color: #006DCC;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:09:50.237

你给`margin:0;`按钮 css 和`.button-set ul li{margin:0}`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-08T14:46:30.200

您可以在该 td 和新表中添加另一个表，您可以放置​​这两个按钮

# php - PHP & JQUERY + 如何让 Jquery 知道文件上传何时完成

> ID：12327840
> 
> 赞同：1
> 
> 时间：2012-09-08T03:46:25.217
> 
> 标签：php, jquery

我有一个脚本可以在不使用 jquery.form.js 刷新页面的情况下上传图片

下面是它启动处理文件的 PHP 文件，完成后 PHP 创建一个标签来显示图像。

我现在需要一种方法让 JQUERY 知道 PHP 文件处理已完成。有没有什么好的方法可以连接这两者？

我想我可以在页面上写一些隐藏的东西并让 JQUERY 查找它，但我不确定这是否是 B 级解决方案。

有任何想法吗？如果需要，我可以更好地解释。谢谢

```
<?php

    $type = $_POST['mimetype']; 
  $xhr = $_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest'; 

    foreach($_FILES as $file) { 
            $filename = $file['name']; 
            $filesize = $file['size'];
            $filetmp = $file['tmp_name'];
    } 

    // Script Variables
    $errors=0;
    $notAllowedFileType=0;
    $exceededMaxFileSize=0;
    $maxsize='10485760';                                    // 10MB Maximum Upload
    $folder = 'images/';
    $configWidth = 500;
    $newFileName = 'success_story'.time().'.jpg';

    // Process if No Errors
    if(!$errors) {

        // Variables
        $uploadedFile = $filetmp;
        $filename = basename( $filename);
        $extension = strtolower(getExtension($filename));

        // Convert the Specific Type of File into an Image
        if($extension=='jpg' || $extension=='jpeg' ) {
            $uploadedfile = $fullfilepath;
            $src = imagecreatefromjpeg($uploadedFile);
        }elseif($extension=='png') {
            $uploadedfile = $fullfilepath;
            $src = imagecreatefrompng($uploadedFile);
        }else{
            $uploadedfile = $fullfilepath;
            $src = imagecreatefromgif($uploadedFile);
        }

        // Configure Width & Height
        list($origWidth, $origHeight) = getimagesize($uploadedFile);
        $configHeight = ($origHeight/$origWidth)* $configWidth;

        // Create Empty File
        $tmp = imagecreatetruecolor($configWidth, $configHeight);
        imagecopyresampled($tmp, $src, 0,0,0,0,$configWidth,$configHeight,$origWidth,$origHeight);
        imagejpeg($tmp, $_SERVER['DOCUMENT_ROOT'].$folder.$newFileName,90);

        echo "<img src=".$folder.$newFileName." id=\"cropMeNowImage\">";
    }

    // Get Extension from Uploaded File
    function getExtension($str) {
        $i = strrpos($str,".");
        if (!$i) {return "";}
        $l = strlen($str) - $i;
        $ext = substr($str,$i+1,$l);
        return $ext;
    }
?>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script>
(function() {

    $(document).on('change','img#cropMeNowImage', function() {
        alert('Ready to Crop');
    });

})();       
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:02:03.590

您需要使用回调函数。就像是：

```
$(document).on('change','img#cropMeNowImage', function() {
    $.post(url, {
        vars_to_server : vars
    }, function(process_done){
        if (process_done)
            alert("ready");

    })
}); 
```

php 必须`echo`在 var 中被 jquery 识别`process_done`

反而：

```
echo "<img src=".$folder.$newFileName." id=\"cropMeNowImage\">"; 
```

你可以`echo 1`成功

这就是想法。这是完全可能的。专门用于通过 AJAX 上传文件的常见任务...

* * *

我向您推荐：[5 种使用 jQuery 进行 Ajax 调用的方法](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

看看[http://github.com/valums/file-uploader](http://github.com/valums/file-uploader)我总是用它来上传文件。

# php - 复杂游戏算法的设计模式

> ID：12327841
> 
> 赞同：0
> 
> 时间：2012-09-08T03:47:00.737
> 
> 标签：php, design-patterns, game-engine

[这是对这个问题](https://stackoverflow.com/questions/12029517/correcting-a-large-disadvantage-to-the-decorator-pattern)的跟进。上下文是相同的，因此略读可能会有用。几天来我一直在集思广益，但一无所获，所以我放弃并来到这里。

我想知道在创建像我在那里描述的系统时会发挥什么设计模式。假设我有一个战斗算法，每边可以有任意数量的战斗人员。首先我们找出谁攻击谁，然后执行。

棘手的部分是可以添加很多额外的行为，而且它们可能有些随意。把它们想象成“被动技能”。当你击中目标时，也可能会有一些行为，比如获得统计数据，但仅限于某些类型的战斗。

我之前的问题显示了装饰器是如何失败的。一个答案建议使用策略模式，但我并不急于编写十几种不同类型的策略，然后为每种策略编写几个具体的类。即便如此，如果我需要一种与我已有的完全不同的全新行为，我仍然必须违反开放封闭原则。在某些情况下，我需要一次组合多个策略，这可能会导致修饰策略或复合策略。例如，当您受到伤害时，您可能 1\. 拥有将伤害减半的能力，2\. 装备可以进一步减少伤害的物品，3\. 向攻击者返还一些伤害，以及 4\. 获得一些属性点.

那么一个有经验的建筑师会在这里做什么呢？很多游戏都实现了这些系统，所以我很好奇哪种模式或模式组合在这里运作良好。

*我不想发布一堵巨大的代码墙，所以如果我的系统有任何特定部分，你想看看，请在评论中提问。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:23:24.410

这是一个大问题，需要您了解游戏机制。但我将从这个建议开始。第一步是确保您有一个定义明确且记录在案的操作顺序，然后将其转换为您的战斗决议算法的框架或模板。例如：

> 例如，当您受到伤害时，您可能 1\. 拥有将伤害减半的能力，2\. 装备可以进一步减少伤害的物品，3\. 向攻击者返还一些伤害，以及 4\. 获得一些统计点数.

如果＃3（伤害反射）首先发生，然后是＃4（你获得统计数据，甚至可能防御积分），然后是＃1和＃2。在这种情况下，防守者已经最大化了伤害，并且潜在地最大化了他的防守。

您按特定顺序列出了这些步骤，但**为什么**呢？您必须定义规则，以便知道何时应用每个步骤（攻击和防御）。只有这样，您才能创建一个系统来解决战斗。例如：

1.  从基础伤害开始
2.  应用由攻击触发的攻击者效果
3.  应用攻击触发的防御者效果
4.  应用所有攻击者的增加伤害的先天能力
5.  应用所有攻击者的伤害增加装备能力
6.  应用所有防御者的增加护甲的先天能力
7.  应用所有防御者的护甲增加装备能力
8.  应用防御触发的攻击者效果
9.  应用防御触发的防御者效果
10.  受到伤害
11.  应用由伤害触发的攻击者效果
12.  应用由伤害触发的防御者效果

这是从臀部，我不知道你的规则系统。

一旦你有了这个，考虑为一个战斗建模，包括一个来源、目标、一个（开始的）伤害、一个攻击效果列表和一个防御效果列表。这些效果应该使用 OnAttack()、OnApplyInnate()、OnApplyEquipment()、OnDamaged() 等编码为模板（模板方法模式）。然后您可以在战斗 reolution 的各个阶段迭代效果，让每个人都有机会在适当的时候应用它的效果。

# grails - Springs Groovy/Grails IDE 的代码完成

> ID：12327844
> 
> 赞同：0
> 
> 时间：2012-09-08T03:47:46.543
> 
> 标签：grails

Spring 的 Groovy/Grails Tool Suite 3.0.0 是否支持动态生成方法的代码完成？

# jquery - 用 jquery 修改全局 css 声明

> ID：12327847
> 
> 赞同：0
> 
> 时间：2012-09-08T03:48:40.240
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 创建如下所示的表单元素。通常，“提交”应该放在“控件”容器之外，但对于我的布局，我需要它在里面，如下所示：

```
<div class="control-group">
    <div class="controls">
        <input type="text" name="email" value="" id="email" class="input-large email" placeholder="email" required="">  
        <input type="submit" value="submit" name="submit" id="submit" class="btn btn-success">
    </div>
</div> 
```

当我将“错误”类添加到

```
<div class="control-group error"> 
```

“提交”按钮也得到了我不想要的样式。如果我将引导 CSS 修改为包含 :not([type='submit'])

```
.control-group.error input**:not([type='submit'])**, .control-group.error select, .control-group.error textarea {
border-color: #B94A48;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
} 
```

和

```
.control-group.error .checkbox, .control-group.error .radio, .control-group.error input**:not([type='submit'])**, .control-group.error select, .control-group.error textarea {
color: #B94A48;
} 
```

**但是我想知道如果元素是特定类型，我是否可以以某种方式使用 jquery 找到另一种方法来防止这种样式一直向下渗透......**

否则我正在调查

1.  找到一种方法来指示特定元素忽略特定的 css 类
2.  在我添加错误类并在之后替换它之前，使用元素的所有 css 应用属性创建一个完全相同的副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:24:41.110

我通常所做的是在我的全局样式表中添加一个类来覆盖字段上的错误类。您可以通过向 CSS 添加特异性来做到这一点。似乎是完全跨浏览器合规性的最简单（可能不正确）的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:27:38.177

您可以嵌套一个跨度并相应地设置它的样式。

```
<div class="control-group">
  <div class="controls">
    <span class="error">
      <input type="text" name="email" value="" id="email" class="input-large email" placeholder="email" required="">  
    </span>
    <input type="submit" value="submit" name="submit" id="submit" class="btn btn-success">
</div> 
```

这会将您的错误限制在该范围内。

# python - 棘手的难题，成功了一半！读大写字母

> ID：12327851
> 
> 赞同：-1
> 
> 时间：2012-09-08T03:49:11.317
> 
> 标签：python

首先，这是我的代码：

```
s = raw_input("code: ")
s1 = " ".join(s.split()[::-1])
lists = s1.split()
for i in lists:
    if i.istitle() == True:
        print i 
```

它目前所做的是反转一个字符串，如果它以大写字母开头，则打印一个单词。然而问题是，如果一个词像“大写”，它不会打印出来。

让我展示一些我希望程序如何工作的示例：

1.  以相反的顺序阅读单词
2.  只注意邮件中以大写字母开头的单词

    如果输入：BaSe fOO The AttAcK 那么它应该返回：攻击基地

另一个例子：

```
code: soMe SuPPLies liKE Ice-cREAm aRe iMPORtant oNly tO THeir cReaTORS. tO DestroY thEm iS pOInTLess.
says: destroy their ice-cream supplies 
```

太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T04:04:55.503

你不需要`istitle`

```
if word[0].isupper():
    # do stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:18:43.350

`.istitle()`仅当每个单词的首字母大写时才成立：

```
print 'MArk'.istitle()
print 'Mark'.istitle()  # True
print 'MARK'.istitle()
print 'marK'.istitle()
print 'Spam SPAM'.istitle()
print 'SPam Spam'.istitle()
print 'Spam Spam'.istitle() # True 
```

所以只需测试第一个字母：

```
strings = [
    'BaSe fOO ThE AttAcK',
    'soMe SuPPLies liKE Ice-cREAm aRe iMPORtant oNly tO THeir cReaTORS. tO DestroY thEm iS pOInTLess']
for s in strings:
    print ' '.join(
        i for i in reversed(s.split()) if i[0].isupper()
        ).lower() 
```

输出：

```
attack the base
destroy their ice-cream supplies 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:04:08.220

你可以试试这个

```
s1 = s.split()[::-1]
for word in s1:
    if word[0].istitle() is True:
        out_list.append(word.lower())
print " ".join(out_list) 
```

或更复杂但更短的版本

```
print " ".join(map(str.lower, filter(lambda x:x[0].istitle(), s.split()[::-1]))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T03:53:10.900

```
for i in lists:
    if i[0].isupper() and  i[1].islower():
        print i 
```

# java - 刷新数据时发生异常。这是什么，为什么我会得到这个？

> ID：12327857
> 
> 赞同：3
> 
> 时间：2012-09-08T03:50:10.647
> 
> 标签：java, servlets, illegalstateexception

发生了一些有趣的事情。当我调用一个 url *abc.com*时，一个 servlet 被寻址，但请求通过一个过滤器（到 servlet）。从 servlet 我尝试将请求分派到*jsp*页面。但是当我尝试分派请求时，我得到一个抛出的异常：`java.lang.IllegalStateException: Exception occurred when flushing data`

*过滤代码*

```
public class FirstSiteFilter implements Filter {
private FilterConfig fc;

@Override
public void init(FilterConfig config) throws ServletException {
    this.fc = config;
}

@Override
public void doFilter(ServletRequest request,ServletResponse response,FilterChain chain) 
        throws ServletException,IOException {
    String IP = request.getRemoteAddr();
    request.setAttribute("client IP from the filter", IP);
    chain.doFilter(request, response);
}

@Override
public void destroy() {

}   
} 
```

*Servlet 代码*（请求从过滤器链接到此 Servlet）

```
public class FW_FirstSite extends HttpServlet {

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String IP = (String)request.getAttribute("client IP from the filter");
    request.setAttribute("Client IP", IP);
    // THE FOLLOWING TWO STATEMENTS CAUSE AN EXCEPTION
    // IF I COMMENT THEM OUT NO EXCEPTION IS THROWN BUT AN EXCEPTION IS THROWN IF I LEAVE THEM AS IT IS
    RequestDispatcher rd = request.getRequestDispatcher("index.jsp");
    rd.forward(request,response);
}
} 
```

为什么我会遇到这种类型的异常？相反，如果我将语句放在它起作用的语句`response.sendRedirect("...")`之后。`request.setAttribute("client IP",IP)`

**编辑（web.xml）**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<servlet>
    <servlet-name>guestbook</servlet-name>
    <servlet-class>guestbook.GuestbookServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>emailtest</servlet-name>
    <servlet-class>Servlets.emailtest</servlet-class>
</servlet>
<servlet>
    <servlet-name>ValidateCredentials</servlet-name>
    <servlet-class>Servlets.ValidateCredentials</servlet-class>
</servlet>
<servlet>
    <servlet-name>UploadImagesToAisle</servlet-name>
    <servlet-class>Servlets.UploadImagesToAisle</servlet-class>
</servlet>
<servlet>
    <servlet-name>HandleSongLink</servlet-name>
    <servlet-class>Servlets.HandleSongLink</servlet-class>
</servlet>
<servlet>
    <servlet-name>context</servlet-name>
    <servlet-class>Servlets.context</servlet-class>
</servlet>
<servlet>
    <servlet-name>HandleVideoLink</servlet-name>
    <servlet-class>Servlets.HandleVideoLink</servlet-class>
</servlet>
<servlet>
    <servlet-name>HandlePoetry</servlet-name>
    <servlet-class>Servlets.HandlePoetry</servlet-class>
</servlet>
<servlet>
    <servlet-name>displaykey</servlet-name>
    <servlet-class>Servlets.displaykey</servlet-class>
</servlet>
<servlet>
    <servlet-name>tester_writeXML</servlet-name>
    <servlet-class>Servlets.tester_writeXML</servlet-class>
</servlet>
<servlet>
    <servlet-name>ShowBlob</servlet-name>
    <servlet-class>Servlets.ShowBlob</servlet-class>
</servlet>
<servlet>
    <servlet-name>FW_FirstSite</servlet-name>
    <servlet-class>Servlets.FW_FirstSite</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>guestbook</servlet-name>
    <url-pattern>/guestbook</url-pattern>
</servlet-mapping>
<servlet>
    <servlet-name>sign</servlet-name>
    <servlet-class>guestbook.SignGuestbookServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>sign</servlet-name>
    <url-pattern>/sign</url-pattern>
</servlet-mapping>
<servlet>
    <servlet-name>HandleSubmittedPoem</servlet-name>
    <servlet-class>Servlets.HandleSubmittedPoem</servlet-class>
</servlet>
<servlet>
    <servlet-name>HandleSubmittedMessage</servlet-name>
    <servlet-class>Servlets.HandleSubmittedMessage</servlet-class>
</servlet>
<servlet>
    <servlet-name>HandleSongDedicated</servlet-name>
    <servlet-class>Servlets.HandleSongDedicated</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>HandleSubmittedPoem</servlet-name>
    <url-pattern>/HandleSubmittedPoem</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>HandleSubmittedMessage</servlet-name>
    <url-pattern>/HandleSubmittedMessage</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>HandleSongDedicated</servlet-name>
    <url-pattern>/HandleSongDedicated</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>emailtest</servlet-name>
    <url-pattern>/emailtest</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>ValidateCredentials</servlet-name>
    <url-pattern>/ValidateCredentials</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>UploadImagesToAisle</servlet-name>
    <url-pattern>/UploadImagesToAisle</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>HandleSongLink</servlet-name>
    <url-pattern>/HandleSongLink</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>context</servlet-name>
    <url-pattern>/context</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>HandleVideoLink</servlet-name>
    <url-pattern>/HandleVideoLink</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>HandlePoetry</servlet-name>
    <url-pattern>/HandlePoetry</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>displaykey</servlet-name>
    <url-pattern>/displaykey</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>tester_writeXML</servlet-name>
    <url-pattern>/tester_writeXML</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>ShowBlob</servlet-name>
    <url-pattern>/ShowBlob</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>FW_FirstSite</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>FirstSiteFilter</filter-name>
    <filter-class>Filters.FirstSiteFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>FirstSiteFilter</filter-name>
    <servlet-name>FW_FirstSite</servlet-name>
</filter-mapping>

<!--
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
-->

</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:57:40.833

RequestDispatcher 总是需要一个正斜杠。所以尝试将其更改为以下

```
RequestDispatcher rd = request.getRequestDispatcher("/index.jsp"); 
```

当您使用 RequestDispatcher.forward 调用另一个 servlet 时，它是“命令链”。

当第一次调用 servlet 时，响应对象是全新的：它的头没有设置，它的缓冲区是空的，并且没有数据被写入客户端。

但是，一旦状态代码或任何标头已写入（或可能已写入）到客户端，或者当数据已（或可能已）写入主体流时，您就可以容易受到 IllegalStateException 错误的影响。此异常发出信号的问题是，您正在（或可能正在）写入的新数据与已经设置然后不可挽回地发送（“提交”）到客户端的数据不一致。

此异常的两个常见变体是“java.lang.IllegalStateException：标头已发送”和“java.lang.IllegalStateException：无法转发，因为已获得输出流或写入器”。

“标头已发送”表示一个或多个标头已提交给客户端，因此您无法再次设置该标头。

“Output Stream or Writer has already been getting”表示由于调用 servlet 已经调用了 response.getWriter() 或 response.getOutputStream()，这会污染数据流，因为响应已经（或可能已经）写入已经，使其不适合转发。

# database-design - 大规模系统中的最佳范式是什么？

> ID：12327859
> 
> 赞同：2
> 
> 时间：2012-09-08T03:50:55.023
> 
> 标签：database-design, normalization, database-normalization

如果我有一个大型系统，我应该使用哪种范式：3NF、BCNF、4NF、5NF 或更高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T07:00:10.417

这取决于。

我建议尽可能规范化 - 即：5NF， - 然后在必要时添加非规范化字段以实现性能或报告目的（将非规范化元素添加到现有规范化数据库比规范化已经存在的非规范化结构要容易得多采用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:18:04.703

这取决于。你打算用这些数据做什么？

您的数据库是否旨在支持在线事务处理 (OLTP)？或者它是否旨在支持在线分析处理 (OLAP)、报告、数据集市或数据仓库活动？

在 OLAP 案例中，您可能需要考虑设计星型或雪花模式，而不必担心范式。在 OLTP 情况下，规范化的数据库可能比规范化程度较低的数据库提供更好的结果。

正确的数据有多重要？自相矛盾的数据库可能是一团糟。两个应该相等的输出反而相互矛盾？这怎么可能发生？

好吧，如果数据库在数据库的多个位置存储相同的事实，它可能会设法在不同的位置存储该事实的不同且相互矛盾的版本。数据库如何将一个事实的多个副本存储在多个地方？如果它没有完全标准化。

与每个正常形式相关联的是一个或多个更新异常，这些异常在插入、更新或删除行时可能发生。这些异常被相应的正常形式所消除。您可以通过在更新中仔细编程来避免这个问题，但避免比避免更万无一失。如有必要，请查看正常形式以熟悉异常情况，并确定它们对您的情况有多大的问题。

更新时的性能有多重要？在查询时？

有些人敦促您进行规范化以节省数据库中的空间。磁盘空间很便宜。有些人担心处理时间。这通常是微不足道的。由于额外的磁盘访问导致的延迟很明显，但通常是可以管理的。

然而，在某些地方，未能规范化可能会导致性能灾难。这是与重负载和保守的并发控制相关的瓶颈。大多数 DBMS 服务器采用保守的并发控制策略，以保护数据免受神秘的时间相关错误（如幻像更新）的影响。即使您可以放松并发控制策略，这样做也是有风险的。

规范化不佳的数据库通常具有这些瓶颈或“热点”。当系统处于轻负载状态时，它们不会浮出水面。该系统可能会通过出色的 Beta 测试，只是为了在实际生产中慢下来。备份网站的数据库因存在此缺陷而臭名昭著。规范化可以通过保持更新事务简单来帮助您避免这种情况。

So what should you aim for? When I was building databases, I generally aimed for 3NF or BCNF. 3NF is really easy. You just make sure that non key data depends on the key, the whole key, and nothing but the key (so help me Codd). I generally never had to worry about 4NF or 5NF, but again, it depends on your case.

# html - iframe 源不起作用

> ID：12327864
> 
> 赞同：-4
> 
> 时间：2012-09-08T03:52:11.037
> 
> 标签：html, iframe

为什么这个链接不能成为 iframe 的来源？ [http://exame.abril.com.br/tecnologia/facebook/noticias/facebook-nao-tem-planos-de-voltar-a-china-diz-executivo](http://exame.abril.com.br/tecnologia/facebook/noticias/facebook-nao-tem-planos-de-voltar-a-china-diz-executivo)

我正在使用 jquery $("#frame").attr("src",source);

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T03:55:37.510

运行这个：

```
<html>
    <head></head>
    <body>
        <iframe width="500" height="500" src="http://exame.abril.com.br/tecnologia/facebook/noticias/facebook-nao-tem-planos-de-voltar-a-china-diz-executivo">
        </iframe>
    </body>
</html> 
```

在 Chrome 中产生：

> 拒绝显示文档，因为 X-Frame-Options 禁止显示。

这是解释[here](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T03:54:55.860

它具有[`X-Frame-Options:SAMEORIGIN`](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)http 响应标头，它告诉用户代理仅在其父级具有相同来源的情况下才允许将页面加载到框架中。

# javascript - Javascript：单选按钮并基于 vaule 显示图像

> ID：12327868
> 
> 赞同：4
> 
> 时间：2012-09-08T03:53:18.530
> 
> 标签：javascript

我目前正在根据从单选按钮中选择的值显示图像。但是我目前正在使代码尽可能简短和高效。我有几个类别可供选择，我处理这个问题的方式需要我写几个`check_value#`。有没有办法将这两个功能结合起来？所以将来如果我有 5 或 7 个类别，我将不必为每个类别设置一个功能。[例子](http://webprolearner2346.zxq.net/bike_calculator/)

```
<script>
 function check_value(val) {     
    var el = document.getElementById("imgBox1");
    var img = imgs[val];
    if (val>0 && val<4) { //will trigger when [1,2,3]
        el.src = "images/bike" + val + ".jpg";
        el.style.display = "";
    }    
}

 function check_value1(val) {    
    var el = document.getElementById("imgBox2");
    var img = imgs[val];
    if (val>0 && val<4) { //will trigger when [1,2,3]
        el.src = "images/tire" + val + ".jpg";
        el.style.display = "";
    }    
}
</script> 
```

**HTML**

```
<h2>Choose a bike</h2>
    <form name="builder">
        <input type="radio" name="field" value="1" onclick='check_value(0)'/> KAWASAKI KX 450F<br />
         <input type="radio" name="field" value="2" onclick='check_value(1)'/> 2010 Yamaha Road Star S<br />
         <input type="radio" name="field" value="3" onclick='check_value(2)'/> Aprilia RSV4<br />
    </form>

<img id="imgBox1" src="#" style="display:none"> 

<h2>Choose a tire</h2>  
    <form name="tire">
        <input type="radio" name="field" value="1" onclick='check_value1(0)'/> Michelin Pilot Road 3 Tires<br />
        <input type="radio" name="field" value="2" onclick='check_value1(1)'/> Dunlop Roadsmart Sport-Touring Tires<br />
         <input type="radio" name="field" value="3" onclick='check_value1(2)'/> Pirelli Scorpion Trail Tires<br />
    </form>

<img id="imgBox2" src="#" style="display:none"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:06:42.470

[这](http://jsfiddle.net/EKaYP/)是一个使用自定义 HTML 属性和[jQuery](http://www.jquery.com) Javascript 库的小提琴：

显然，您希望实际设置图像的来源，而不是在段落中显示 url，但您明白了，我敢肯定。

```
// html
<input type="radio" name="tire" img-preview="tire-preview" img-loc="tire/1.jpg" /> First<br>
<input type="radio" name="tire" img-preview="tire-preview" img-loc="tire/2.jpg" /> Second<br>
<p id="tire-preview">
Load: -
</p>
<input type="radio" name="wheel" img-preview="wheel-preview" img-loc="wheel/1.jpg" /> Uno<br>
<input type="radio" name="wheel" img-preview="wheel-preview" img-loc="wheel/2.jpg" /> Dos<br>
<p id="wheel-preview">
Load: -
</p>​

// js
$("input[type=radio]").click(function(){

    var imageUri = "http://site.com/images/" + $(this).attr("img-loc");

    $("#" + $(this).attr("img-preview") ).text("Load: " + imageUri);

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:15:22.857

试试这个，更新了

将图像名称设为bike#.jpg、tire#.jpg bike0.jpg、bike1.jpg、bike2.jpg....

```
function check_value(val, id, type) {     
    var el = document.getElementById("imgBox" + id);
    if (val>0 && val<4) { //will trigger when [1,2,3]
       el.src = "images/"+ type + val + ".jpg";
       el.style.display = "";
  } 
```

}

```
<h2>Choose a bike</h2>
<form name="builder">
    <input type="radio" name="field" value="1" onclick='check_value(0, 1, "bike")'/> KAWASAKI KX 450F<br />
     <input type="radio" name="field" value="2" onclick='check_value(1, 1, "bike")'/> 2010 Yamaha Road Star S<br />
     <input type="radio" name="field" value="3" onclick='check_value(2, 1, "bike")'/> Aprilia RSV4<br />
</form>

<img id="imgBox1" src="#" style="display:none"> 

<h2>Choose a tire</h2>  
<form name="tire">
    <input type="radio" name="field" value="1" onclick='check_value(0, 2, "tire")'/> Michelin Pilot Road 3 Tires<br />
    <input type="radio" name="field" value="2" onclick='check_value(1, 2, "tire")'/> Dunlop Roadsmart Sport-Touring Tires<br />
    <input type="radio" name="field" value="3" onclick='check_value(2, 2, "tire")'/> Pirelli Scorpion Trail Tires<br />
</form>

<img id="imgBox2" src="#" style="display:none"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:45:45.900

你可以用这个

```
<script>
function call(formNo,val)
  {if()//give your checkings here according to what you want
    {}
    alert(formNo+" "+val); //just for example what values you are getting
   }
</script>

<h2>Choose a bike</h2>
<form name="builder" id="1">
    <input type="radio" name="field" value="1" onclick='check_value(1,0)'/> KAWASAKI KX 450F<br />
     <input type="radio" name="field" value="2" onclick='check_value(1,1)'/> 2010 Yamaha Road Star S<br />
     <input type="radio" name="field" value="3" onclick='check_value(1,2)'/> Aprilia RSV4<br />
</form>
<img id="imgBox1" src="#" style="display:none"> 
<h2>Choose a tire</h2>  
<form name="tire" id="2">
    <input type="radio" name="field" value="1" onclick='check_value1(2,0)'/> Michelin Pilot Road 3 Tires<br />
    <input type="radio" name="field" value="2" onclick='check_value1(2,1)'/> Dunlop Roadsmart Sport-Touring Tires<br />
     <input type="radio" name="field" value="3" onclick='check_value1(2,2)'/> Pirelli Scorpion Trail Tires<br />
</form>
<img id="imgBox2" src="#" style="display:none"> 
```

# objective-c - 在 Objective-C 中，覆盖合成设置器的正确方法是什么？

> ID：12327869
> 
> 赞同：3
> 
> 时间：2012-09-08T03:53:30.267
> 
> 标签：objective-c, properties

我原本打算写：

```
-(void) setLeftChild:(NSNode *) leftChildNode {

     _leftChildNode = leftChildNode;
     leftChildNode.parent = self;
     // ...
} 
```

为节点的子节点设置所有合适的值，子节点的父节点应该指向自身，子节点的树对象应该和父节点的树对象（节点所属的树）相同。

但后来我意识到这样做会影响简单的线`node.leftChild = something;` 所以这条线会有“副作用”，否则可能会出乎意料。

此外，如果`setLeftChild`实际使用其他属性的 setter（例如 using `leftChildNode.parent = self`，这是正确的接口），而这些 setter 又使用节点的`leftChild`setter 怎么办——这样会变成无限循环。如果某些特殊情况导致了这个无限循环，那就不是很好了，你总是要担心潜在的无限循环。

另一种方法是永远不要覆盖任何合成的setter，而只需使用名称`addLeftChildNode`而不是`setLeftChildNode`，在里面`addLeftChildNode`，我们可以无忧无虑地自由使用属性setter。但是如果我们真的想“设置”它怎么办——“添加”这个名字可能意味着只有当它为空时才添加它，所以“设置”这个名字更合适。如果我将其称为`addLeftChild`而不是`addLeftChildNode`，那么这两个名称会令人困惑。也许如果使用约定，例如调用它`setAndConfigLeftChildNode`，那么它不会令人困惑并且显然不会覆盖 setter，并且可以成为代码中遵循的约定。（使用`setAndConfig`而不是覆盖设置器）

所以我们有以下问题：

1) 被覆盖的 setter 的意外副作用（在问题的开头）
2) 无限循环
3) 方法的命名，可能会造成混淆

有没有好的通用/最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T04:12:44.537

好问题......它确实归结为偏好，但我想指出您也可以使用以下内容更改 setter 函数的名称：

```
@property (setter=assignLeftChildNode) NSNode *leftChildNode; 
```

所以你在命名约定方面有更多的灵活性......`setLeftChildNode`不必由综合设置器采用。我知道这不是您问题的直接答案，但我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T07:06:46.423

我认为在某些情况下，在自定义设置器中产生一些副作用是可以的。例如，我经常希望一个对象使用 KVO 来监视另一个我需要经常切换的对象的属性。在您的情况下，数据结构的完整性将受到损害，除非这些操作是在设置属性时准确执行的。所以我觉得在你的二传手里做这些是有意义的。我认为这只是常识。每当此属性更改时，真正**必须发生的任何事情都****应该发生在 setter 中，否则您会忘记一些 time**。

无限递归是一个真正的危险，因此绝对应该小心地覆盖 setter。您需要在此处实践一些防御性编码。

避免混淆方法名称至关重要，尤其是在像这样以命名约定为中心的平台中。考虑到这一点是正确的。

总的来说，我认为你在这里是正确的。这是一个很好的例子，说明什么时候在你的 setter 中有副作用，我认为你的命名选择是合适的。出于对无限递归的谨慎考虑，您可能希望在此方法中直接（即`_leftChild`，而不是）使用实例。`self.leftChild`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T09:50:43.917

稍微考虑一下，我认为答案是需要完全从一侧控制这种关系。鉴于`parent`您的子节点的属性可能`weak`是停止保留循环，我们将指定父节点作为关系的所有者。最简单的表达就是设置父类的方法是类私有的（**NB不要调用类`NSNode`，NS前缀是苹果保留的**）。不应该调用它，`setParent`因为我们不想`-setValue:forKey:`使用它或点符号。此方法只是设置父 ivar。与维护引用完整性有关的所有逻辑都应该在`setLeftChild:`（和假定的`setRightChild:`）方法中。您的实现将如下所示：

```
// Assuming you are using ARC
@interface MyNode()

-(void) privateSetParent: (MyNode*) newParent; 

@end

@implementation MyNode
{
    _weak MyNode* _parent;
    MyNode* _leftTree;
    MyNode* _rightTree;
}

-(void) privateSetParent: (MyNode*) newParent
{
    _parent = newParent;
}

-(void) setLeftTree: (MyNode*) newTree
{
    [[newTree parent] remove: newTree];
    [_leftTree privateSetParent: nil];
    _leftTree = newTree;
    [newTree privateSetParent: self];
}

-(void) remove: (MyNode*) subTree
{
    if (_leftTree == subTree)
    {
        _leftTree = nil;
        [subTree privateSetParent: nil];
    }
    if (_rightTree == subTree)
    {
        _rightTree = nil;
        [subTree privateSetParent: nil];
    }   
} 

@end 
```

您仍然可以拥有只读`parent`属性，并且您仍然可以使用[手动更改通知](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW3)进行 KVO 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T06:27:45.437

除了命名约定（已经在您的其他问题中讨论过）之外，我不会覆盖 setter 函数，因为（正如您已经注意到的）副作用不容易监督。我会使用单独的方法，例如`setLeftTree:`.

如果您的节点已经有一个左子节点并且您设置了一个新节点，您还应该考虑将前一个子节点的父节点设置为`nil`：

```
- (void)setLeftTree:(NSNode *)leftChildNode
{
    if (self.leftChild != nil)
        self.leftChild.parent = nil;
    self.leftChild = leftChildNode;
    leftChildNode.parent = self;
} 
```

# css - 如何在ie中启用文本阴影

> ID：12327874
> 
> 赞同：0
> 
> 时间：2012-09-08T03:54:17.167
> 
> 标签：css

如何使用 1 个文件转换 vars (text-shadow:0 0 10px #fff;) 在 ie 中启用文本阴影

因此，无需添加过滤器或编辑所有 css 即可使任何文本阴影工作

因为我有大约 190 行文字阴影混合模糊或不模糊

有人知道该怎么做吗？

我认为有人用 javascript 来启用 text-shadow 元素

谢谢大家帮助我

我测试 filter:shadow(color=#ffffff,direction=80,strength=12) 和其他过滤器，但我想让 css 中的文本阴影在 ie 中像 chrome 和 firefox 和 opera 一样工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:03:51.940

在某种程度上，您可以使用`filter:glow`：

```
filter:glow(color=#ffffff,strength=12) 
```

然而，这仅限于文本周围的阴影，没有偏移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:00:46.883

尝试这个。 [http://asamuzak.jp/html/322](http://asamuzak.jp/html/322)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:01:39.147

对 text-shadow 的支持非常有限，但您可能想尝试[CSS3PIE](http://css3pie.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T17:30:48.803

把它写在你的**css**文件中

```
filter: glow(color=black,strength=1); 
```

更改文本文件的**颜色**和**强度**..

# c - 故意浪费所有的主内存来学习碎片

> ID：12327878
> 
> 赞同：10
> 
> 时间：2012-09-08T03:56:19.370
> 
> 标签：c, memory, heap-fragmentation

在我的课堂上，我们有一项作业，其中一个问题是：

> C 中的内存碎片：设计、实现和运行一个 C 程序，它执行以下操作：它为 3m 数组的序列分配内存，每个数组大小为 500000 个元素；然后它会释放所有偶数数组并分配一个由 m 个数组组成的序列，每个数组大小为 700000 个元素。测量程序分配第一个序列和第二个序列所需的时间量。选择 m 以耗尽程序可用的所有主内存。解释你的时间

我的实现如下：

```
#include <iostream>
#include <time.h>
#include <algorithm>

void main(){
    clock_t begin1, stop1, begin2, stop2;
    double tdif = 0, tdif2 = 0;
    for(int k=0;k<1000;k++){
    double dif, dif2;
    const int m = 50000;
    begin1 = clock();
    printf("Step One\n");
    int *container[3*m];
    for(int i=0;i<(3*m);i++)
    {
        int *tmpAry = (int *)malloc(500000*sizeof(int));
        container[i] = tmpAry;
    }
    stop1 = clock();
    printf("Step Two\n");
    for(int i=0;i<(3*m);i+=2)
    {
    free(container[i]);
    }
    begin2 = clock();
    printf("Step Three\n");
    int *container2[m];
    for(int i=0;i<m;i++)
    {
    int *tmpAry = (int *)malloc(700000*sizeof(int));
    container2[i] = tmpAry;
    }
    stop2 = clock();
    dif = (stop1 - begin1)/1000.00;
    dif2 = (stop2 - begin2)/1000.00;
    tdif+=dif;
    tdif/=2;
    tdif2+=dif2;
    tdif2/=2;
}
printf("To Allocate the first array it took: %.5f\n",tdif);
printf("To Allocate the second array it took: %.5f\n",tdif2);
system("pause");
}; 
```

我已经改变了几种不同的方式，但我看到的一致性是，当我最初为 3*m*500000 元素数组分配内存时，它会用完所有可用的主内存。但是当我告诉它释放它们时，内存不会释放回操作系统，所以当它分配 m*700000 元素数组时，它会在页面文件（交换内存）中执行它，因此它实际上不会显示内存碎片.

上面的代码运行了 1000 次并取平均值，这需要相当长的时间。第一个序列平均耗时 2.06913 秒，第二个序列耗时 0.67594 秒。对我来说，第二个序列应该需要更长的时间来展示碎片是如何工作的，但是由于使用了交换，这不会发生。有没有办法解决这个问题，还是我的假设错了？

我会在星期一向教授询问我有什么，但在此之前，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:33:51.823

许多 libc 实现（我认为包括 glibc）不会在您调用时将内存释放回操作系统`free()`，而是保留它以便您可以在没有系统调用的情况下在下一次分配时使用它。此外，由于现代分页和虚拟内存策略的复杂性，您永远无法确定任何东西在物理内存中的位置，这使得几乎不可能有意地对其进行碎片化（即使它是碎片化的）。您必须记住，所有*虚拟*内存和所有*物理*内存都是不同的野兽。

（以下是为 Linux 编写的，但可能适用于 Windows 和 OSX）

当您的程序进行第一次分配时，假设有足够的物理内存供操作系统挤入所有页面。它们在物理内存中并非彼此相邻——它们分散在任何可能的地方。然后操作系统修改页表以生成一组连续的*虚拟*地址，这些地址引用内存中分散的页面。但事情是这样的——因为你并没有真正使用你分配的第一个内存，它成为一个非常好的换出候选者。因此，当您来进行下一次分配时，内存不足的操作系统可能会换出其中的一些页面以为新页面腾出空间。因此，您实际上是在测量磁盘速度和操作系统分页机制的效率——而不是碎片。

请记住，一组连续的虚拟地址在实践中几乎从不物理上连续（甚至在内存中）。

# javascript - 如何在外部文档中使用 javascript 将 textarea 的内容保存为变量？

> ID：12327883
> 
> 赞同：1
> 
> 时间：2012-09-08T03:57:09.333
> 
> 标签：javascript, html, textarea

正如许多人所建议的那样，我已经尝试将变量保存为 ID 的`.value`或`.innerHTML`，通过使用`document.getElementById`. 这是我所有的 HTML：

```
<html>
<head>
<title>write</title>
<script type="text/javascript" src="g.js"></script>
<link rel="stylesheet" type="text/css" href="g.css" />
</head>

<body>
<div id="box">
    <textarea id="txt" placeholder="placeholder. type here.">text text</textarea>
</div>  
</body> 
</html> 
```

这是我的 javascript，目前用于触发包含文本区域中文本的警报——现在应该是`text text`：

```
function run(){
var txt = document.getElementById('txt');

alert(txt);}

run() 
```

现在，加载页面会触发带有文本的警报，`Null`并且添加`.value`之后`getElementById('txt')`不会导致警报。提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T04:09:58.210

问题是您的 javascript 在构造 DOM 之前正在执行。当您在`<head>`文档中加载 JavaScript 文件时，它会`<textarea>`在创建标记之前立即执行。

尝试将您的脚本块移动到文本区域下方，就在`</body>`标签之前。

这是一个例子：[小提琴](http://jsfiddle.net/bsbcb/)

构建 DOM 后，您可以`getElementById`像 have 一样使用，并且可以通过`value`属性访问 textarea 的内容。所有这些都在上面的小提琴中。

`run()`或者，您可以使用在 DOM 准备就绪时提供事件的库来包装您的方法调用。jQuery 的例子是：

```
$(function () {
  // code you want to execute when the DOM is ready.
  run();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T04:07:33.493

```
function run() {
  var txt =  document.getElementById("txt").value;

  alert(txt);
 }

 $(document).ready(function(){
            run();
 }); 
```

检查这个jsfiddle[链接](http://jsfiddle.net/Xadgw/)

您没有获得 textarea 值，因为您的 javscript 函数在 DOM 中有值之前被执行

或使用 javascript

```
function run(){
var txt =  document.getElementById("txt").value;

alert(txt);
}

window.onload = run(); 
```

更多关于[window.onload](http://www.w3schools.com/jsref/event_onload.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T04:06:17.937

下面的 javascript 在 Firefox 中工作。事实上，如果你点击这个问题的按钮，你可以在这个页面上的[萤火虫](http://getfirebug.com)`answer`中试一试......

```
var textArea = document.getElementById("wmd-input"); // #wmd-input is the text input where your answer goes...
alert( textArea.value ); 
```

当然，请确保先输入一些文本。

当您使用它时，您应该尝试一下 jQuery：

```
alert( $("#wmd-input").val() ); 
```

或者更好的是，

```
console.log($("#wmd-input").val()); 
```

希望有帮助。

# javascript - 计算从一个对象到另一个对象的路径并沿着它移动？

> ID：12327884
> 
> 赞同：3
> 
> 时间：2012-09-08T03:57:16.170
> 
> 标签：javascript, jquery, canvas

假设我有一个这样的对象......

```
var objA = {
    x:0,
    y:0,
    speed:{x:0, y:0},
    angle:0,
    turnSpeed:8
} 
```

...并且我在游戏中的每个“步骤”都想将其移向位于坐标 (10, 10) 的 objB。ObjA 已经在移动，突然需要移动到 objB 的位置。假设 objA 有一个函数`turnTo()`可以根据它的`turnSpeed`. 我可以做类似...

```
objA.speed.x += Math.cos((90 - obj.angle) * Math.PI / 180);
objA.speed.y += -Math.sin((90 - obj.angle) * Math.PI / 180); 
```

...根据角度将 objA 移向 objB，但如果 objA 已经在移动，则不太可能撞到 objB，因为这没有考虑 objA 当前的速度。

如何计算到 objB 的路径，以便 objA 准确命中它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:08:13.300

首先，看一下[我的 Javascript 游戏的坐标 - 基于角度，我什么时候使用 Sin Cos 和 Tan？](https://stackoverflow.com/questions/5027950/coordinates-for-my-javascript-game-based-on-an-angle-when-do-i-use-sin-cos-an)

您知道 objB 的 x 和 y 坐标（我假设它们保持不变），并且您可以使用 JavaScript 获取 objA 的 x 和 y 坐标，因此您可以使用简单的三角函数将问题解决为从 objA 到 objB 的任何点的三角形。

# ruby-on-rails - rails 中没有路线匹配

> ID：12327885
> 
> 赞同：0
> 
> 时间：2012-09-08T03:57:24.140
> 
> 标签：ruby-on-rails, ruby, routes

所以我整晚都在努力解决这个问题......我基本上已经将我的资源设置为：

```
resources :projects do
   resources :categories
end 
```

在我的部分形式中，我有：

```
<%= form_for ([@project, @category]) do |f| %>
<% end %> 
```

它给了我错误：

```
No route matches {:controller=>"categories", :format=>nil, :project_id=>#<Project id: nil, project_title: nil, user_id: nil, created_at: nil, updated_at: nil>}

Try running rake routes for more information on available routes. 
```

我的类别路线如何：

```
 project_categories GET    /projects/:project_id/categories(.:format)           categories#index
                        POST   /projects/:project_id/categories(.:format)           categories#create
   new_project_category GET    /projects/:project_id/categories/new(.:format)       categories#new
  edit_project_category GET    /projects/:project_id/categories/:id/edit(.:format)  categories#edit
       project_category GET    /projects/:project_id/categories/:id(.:format)       categories#show
                        PUT    /projects/:project_id/categories/:id(.:format)       categories#update
                        DELETE /projects/:project_id/categories/:id(.:format)       categories#destroy 
```

发生了什么事，为什么这不起作用。我已经尝试了一切，我尝试将项目变量传递到渲染路径然后执行：（给我一个差异错误，抱怨类别未定义）

```
form_for project.categories.build do |f| 
```

我什至尝试过

```
form_for ([project, project.categories.build]) do |f| 
```

但这给了我与上面相同的错误。

有任何想法吗？我用谷歌搜索过，我读过文章，读过演讲......它**一定**很简单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:07:29.320

看起来你的项目是零。你需要先有一个项目。你的控制器是什么样的？@project 是否已填充？

编辑：澄清一下，您的 Categories > New 方法很可能是控制器中相关的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:07:49.633

尝试从函数中取出空格：`form_for(`...当方法中存在空格并打开括号时，Ruby 通常会失败

# extjs4 - 重命名和插入错误 TreeStore ExtJS 4.1.1

> ID：12327891
> 
> 赞同：0
> 
> 时间：2012-09-08T03:58:51.637
> 
> 标签：extjs4, rename, extjs4.1, treepanel

晚上好，伙计们，

当我更新该方法时，它不会保存所有模型项，如“tipoNo”和“pai”。有人知道我能做什么吗？

**请求有效载荷**

这是请求中发送的信息。

```
{"parentId":1,"nome":"qwfqwfqw"} 
```

**模型：**

我的模型中的字段。

```
fields : [ {
    name : 'id',
    type : 'long'
},{
    name : 'pai',
    type : 'long'
}, {
    name : 'nome',
    type : 'string'
}, {
    name : 'tipoNo',
    type : 'string'
}, {
    name : 'leaf',
    type : 'boolean',
    convert : function(value, record) {
        var no = record.get('tipoNo');
        return (no == "CLIENTE" ? true : false);
    }
} ], 
```

**代理**

代理服务器上的必要信息。

```
proxy : {
    type : 'rest',
    url : Webapp.link('node'),
    reader : {
        type : 'json',
        root : 'nodes',
        idProperty : 'id'
    },
    writer : {
        type : 'json',
        writeAllFields : false
    }
} 
```

**控制器方法**

```
/**
 * Rename
 * 
 * @param {Ext.grid.plugin.CellEditing} editor
 * @param {Object} e                            
 */
updateList : function (editor, e) {
    var node = e.record;
    node.save({
        success: function(list, operation) {
            console.log("updated");
        },
        failure: function(list, operation) {
            var error = operation.getError(),
                msg = Ext.isObject(error) ? error.status + ' ' + error.statusText : error;

            Ext.MessageBox.show({
                title: 'Notificação',
                msg: msg,
                icon: Ext.Msg.ERROR,
                buttons: Ext.Msg.OK
            });
        }
    });
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:19:55.787

看看你的代理配置。您的 JSON 编写器将`writeAllFields`属性设置为 false。来自[Ext.data.writer.Json](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.writer.Json-cfg-writeAllFields)文档：

```
True to write all fields from the record to the server.
If set to false it will only send the fields that were modified. 
```

所以任何没有被触及的字段都不会被发送回服务器。如果您希望将所有属性发送到服务器，请将其设置`writeAllFields`为 true（或将其删除，因为 true 是默认设置）并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:27:10.250

这种情况下的解决方案：

```
/**
 * Executa a edição
 * 
 * @param {Ext.grid.plugin.CellEditing} editor
 * @param {Object} e                            
 */
updateList : function (editor, e) {
    var node = e.record;
    var me = this;
    var nodeTree = me.getNodeTree();

    var method = (node.data.id !== undefined ? 'PUT' : 'POST');
    var post = {
            id: (node.data.id !== undefined ? null : node.data.id),
            nome: node.data.nome,
            pai: (node.data.parentId == -1 ? null : node.data.pai),
            tipoNo: node.data.tipoNo
    };
    Ext.Ajax.request({
        url: Webapp.link("node"),
        headers: { 'Content-Type': 'application/json' }, 
        jsonData: post,
        method: method,
        success: function(response){
            var text = response.responseText;
            console.log(text);
            nodeTree.refreshView();
        }
    });

}, 
```

# c# - 如何使用 C# LinqtoXML 将属性值 XML 转换为列/值

> ID：12327892
> 
> 赞同：0
> 
> 时间：2012-09-08T03:59:00.973
> 
> 标签：c#, linq-to-xml, dynamic-columns

我有一个如下的 XML 文档：

```
<Registrations>
  <RegistrationForm>
    <RegValue Id="Passport" v="13.999.567" />
    <RegValue Id="FavoriteColor" v="Blue" />
    <RegValue Id="Gender" v="Male" />
  </RegistrationForm>
  <RegistrationForm>
    <RegValue Id="Passport" v="12.566.342" />
    <RegValue Id="FavoriteColor" v="Red" />
    <RegValue Id="Gender" v="Female" />
  </RegistrationForm>
</Registrations> 
```

目标是生成具有不同 ID 值作为列的 GridView，并且每一行将包含该 ID 的值：

```
PASSPORT   | FavoriteColor | Gender
13.999.567 | Blue          | Male
12.566.342 | Red           | Female 
```

这里的复杂性在于我们可以拥有更多带有我事先不知道的 ID 的 RegValue 元素。所以列应该是动态生成的。例如，我可以在 XML 中添加一个元素：`<RegValue Id="Pet" v="Dog" />`所以表上应该有一个新的“宠物”列。

我开始使用 C# LINQ to XML，但我只能使用硬编码的列名执行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T05:22:07.420

By using XML to DataTable with LINQ you can display XML in GridView. Hope below example may help you to solve your question.

```
public void ParseXMLToDataTable()
    {
        XElement document = XElement.Parse(
       @"
            <Registrations>
              <RegistrationForm>
                <RegValue Id=""Passport"" v=""13.999.567"" />
                <RegValue Id=""FavoriteColor"" v=""Blue"" />
                <RegValue Id=""Gender"" v=""Male"" />
              </RegistrationForm>
              <RegistrationForm>
                <RegValue Id=""Passport"" v=""12.566.342"" />
                <RegValue Id=""FavoriteColor"" v=""Red"" />
                <RegValue Id=""Gender"" v=""Female"" />
              </RegistrationForm>
            </Registrations>
        ");

        List<XElement> RegistrationForm = document.Elements("RegistrationForm").ToList();

        if (RegistrationForm.Count > 0)
        {
           DataTable oGridViewTable =  XElementToDataTable(RegistrationForm);
        }
    }

public DataTable XElementToDataTable(List<XElement> oRegistrationFormList)
    {
        DataTable dt = new DataTable();

        // Generate DataTable Column
        XElement oFirstElement = oRegistrationFormList.First();

        dt.Columns.AddRange(oFirstElement.Descendants().Select(o =>
           new DataColumn(o.Attribute("Id").Value)).ToArray());

        //Generate DataTable Rows
        foreach (XElement oRegistrationForm in oRegistrationFormList)
        {
            DataRow dr = dt.NewRow();
            foreach (XElement oRegValue in oRegistrationForm.Descendants())
                dr[oRegValue.Attribute("Id").Value] = oRegValue.Attribute("v").Value; 
            dt.Rows.Add(dr);
        }

        return dt;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:25:34.180

在我看来，您应该根据您的问题进行定制。像这样：

```
using System.Data;
using System.Xml.Linq;
using System.Linq;

class Program
{

    public static void Main()
    {
        XDocument document = XDocument.Parse(
            @"
                <Registrations>
                  <RegistrationForm>
                    <RegValue Id=""Passport"" v=""13.999.567"" />
                    <RegValue Id=""FavoriteColor"" v=""Blue"" />
                    <RegValue Id=""Gender"" v=""Male"" />
                  </RegistrationForm>
                  <RegistrationForm>
                    <RegValue Id=""Passport"" v=""12.566.342"" />
                    <RegValue Id=""FavoriteColor"" v=""Red"" />
                    <RegValue Id=""Gender"" v=""Female"" />
                  </RegistrationForm>
                </Registrations>
            "
        );

        DataTable table = new DataTable();

        XElement firstElement = document
                                .Root
                                .Elements(
                                    "Registrations"
                                )
                                .Elements(
                                    "RegistrationForm"
                                )
                                .FirstOrDefault();

        if (firstElement == null)

            return;

        table
        .Columns
        .AddRange(
            firstElement
            .Elements(
                "RegValue"
            )
            .Select(
                e =>
                new DataColumn(e.Attribute("Id").Value)
            )
            .ToArray()
        );

        table
        .Rows
        .Add(
            document
            .Root
            .Elements(
                "Registrations"
            )
            .Elements(
                "RegistrationForm"
            )
            .Select(
                e =>
                e
                .Elements()
                .Select(
                    regValue =>
                    regValue
                    .Attribute("v")
                    .Value
                )
                .ToArray()
            )
        );

        //YOUR TABLE IS READY HERE.
    }
} 
```

# c# - C# 文件名显示有空格问题

> ID：12327894
> 
> 赞同：2
> 
> 时间：2012-09-08T03:59:22.830
> 
> 标签：c#, file, file-io

假设我有一个报告名称：

```
string reportName = "Facebook Network Performance Summary Report (By Region, By Content)"; 
```

我想将该文件名显示为 excel

以下是我导出文件的代码

```
Response.AddHeader("Content-Disposition", "attachment; filename=" reportName + ".xls");
Response.AddHeader("Content-Length", l.ToString());
Response.ContentType = "application/vnd.ms-excel";
Response.BinaryWrite(f); 
```

不幸的是，当阅读我的报告名称的第一个空格时，它只显示 Facebook 而没有其他内容。

是否有任何现有的 ASP.NET API 或其他方法来处理 fileNAme 的空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T04:10:45.510

**尝试用双引号将文件名括起来。**

```
 string filename = reportName + ".xls";
 Response.AddHeader("Content-Disposition", "attachment; filename=\"" + filename + "\""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T04:03:42.530

您需要将文件名用引号引起来：

```
Response.AddHeader("Content-Disposition", "attachment; filename=\"" + reportName + "\".xls"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T04:04:35.543

如何为此使用逐字字符串

```
string  reportName = @"Facebook Network Performance Summary Report (By Region, By Content)"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T04:04:10.247

尝试在双引号之前添加 @ 和/或双双引号以使 c# 读取文字

[文件路径中的空格问题 - C# 中的命令行执行](https://stackoverflow.com/questions/4185633/problem-with-spaces-in-a-filepath-commandline-execution-in-c-sharp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-04T14:30:08.387

试试这个...

var fileName = HttpUtility.UrlEncode(document.FileName, Encoding.UTF8);

# android - 视频游戏编程中使用的概念和术语的参考

> ID：12327895
> 
> 赞同：2
> 
> 时间：2012-09-08T03:59:49.763
> 
> 标签：android, model-view-controller, libgdx

我已经学习教程`libgdx`大约一个星期了，但是我在理解各种概念时遇到了很多麻烦，比如纹理、向量和矩阵。不幸的是，我读过的所有教程都假设你有游戏编程的背景。

我一直在仔细研究文档并努力做出一些贡献，但在这一点上 - 我真的很喜欢一些关于好书或在线参考的建议，这些建议可能有助于澄清一些术语。谷歌只是没有削减它。

有什么帮助吗？

# scala - 如何使用演员解决scala中的方程？

> ID：12327897
> 
> 赞同：2
> 
> 时间：2012-09-08T04:00:21.533
> 
> 标签：scala, actor, message-passing

我想知道演员如何将值返回给发送者以及如何将其存储在变量中。

例如，假设我们必须找到 2 个数字的平方和并打印出来。

即总和 = a ² + b ²

我有2个演员。1 个参与者计算传递给它的任何数字的平方（例如`SquareActor`）。另一个参与者将两个数字 (a , b) 发送给`SquareActor`并计算它们的总和（例如`SumActor`）

```
/** Actor to find the square of a number */

class SquareActor (x: Int) extends Actor
{
  def act()
  {
    react{
        case x : Int => println (x * x)  
        // how to return the value of x*x to "SumActor" ?
    }
  } 
}

/** Actor to find the sum of squares of a and b */

class SumActor (a: Int, b:Int) extends Actor
{
  def act()
  {
    var a2 = 0
    var b2 = 0        

    val squareActor = new SquareActor (a : Int)   
    squareActor.start

    // call squareActor to get a*a 
    squareActor ! a 
// How to get the value returned by SquareActor and store it in the variable 'a2' ?

    // call squareActor to get b*b 
    squareActor ! b
// How to get the value returned by SquareActor and store it in the variable 'b2' ?

    println ("Sum: " + a2+b2)
  } 
} 
```

如果以上不可能，请原谅我；我想我对演员的基本理解本身可能是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T07:55:59.380

### 使用阿卡

请注意，从 Scala 2.10 开始，[Akka](http://doc.akka.io/docs/akka/2.0.1/intro/getting-started-first-scala.html)演员库是标准库的集成部分。它通常被认为优于标准演员库，因此熟悉它会对您有所帮助。

### 使用期货

另请注意，您想要使用[Futures](http://doc.akka.io/docs/akka/2.0.1/scala/futures.html)实现更容易和更好（组合更好） 。A`Future[A]`代表一个可能并发的计算，最终产生一个类型的结果`A`。

```
def asyncSquare(x: Int): Future[Int] = Future(x * x)
val sq1 = asyncSquare(2)
val sq2 = asyncSquare(3)

val asyncSum = 
  for {
    a <- sq1
    b <- sq2
  }
  yield (a + b) 
```

请注意，`asyncSquare`提前查询结果以尽快开始其（独立）计算。将调用放在`for`理解中会序列化它们的执行，而不是使用可能的并发性。

您在推导中使用`Future`-s `for`、`map`、`flatMap`、`zip`，最后，您可以使用（这是一个阻塞操作）或使用注册的回调`sequence`来获取计算值。`Await`

### 与演员一起使用期货

从演员那里可以很方便`ask`，这会导致`Future`：

```
val futureResult: Future[Int] = (someActor ? 5).mapTo[Int] 
```

注意需要使用，`mapTo`因为actors的消息传递接口是没有类型的（但是有[类型的actors](http://doc.akka.io/docs/akka/2.0.1/java/typed-actors.html)）。

### 底线

如果要并行执行无状态计算，请坚持使用 plain `Future`s。如果您需要有状态的本地计算，您仍然可以`Future`自己使用和线程化状态（或者使用 scalaz StateT monad transformer + Future 作为 monad，如果您从事该业务）。如果您需要需要全局状态的计算，则将该状态隔离到一个参与者中，并与该参与者进行交互，可能使用`Future`s.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T04:04:51.757

请记住，演员通过*消息传递*工作。因此，要从`SquareActor`后端获得响应`SumActor`，您需要将其作为消息从 发送`SquareActor`，并将处理程序添加到`SumActor`.

此外，您的`SquareActor`构造函数不需要整数参数。

也就是说，在您的`SquareActor`，而不仅仅是打印`x * x`，将其传递给`SumActor`：

```
class SquareActor extends Actor
{
  def act()
  {
    react{
        case x : Int => sender ! (x * x)  
    }
  } 
} 
```

（`sender`使其将消息发送给发送它正在响应的消息的参与者。）

在您的`SumActor`, 发送`a`和`b`到 后`SquareActor`，处理收到的回复消息：

```
react {
  case a2 : Int => react {
    case b2 : Int => println ("Sum: " + (a2+b2))
  }
} 
```

# php - 防止用户直接访问 CakePHP 中的重定向 URL

> ID：12327898
> 
> 赞同：1
> 
> 时间：2012-09-08T04:00:48.443
> 
> 标签：php, cakephp

有些 URL 仅用于在操作成功后重定向用户。（例如，提交反馈后的“谢谢”页面）。

问题是这些页面可以直接访问。

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T10:32:36.177

```
function thank_you() {
    if($this->referer() != 'some_url') {
        $this->redirect('/');
    }
} 
```

在您不想直接访问的方法中，只需检查推荐人是否有效（即“谢谢”页面的“联系表”。

如果推荐人不是“联系表”，您可以重定向到任何地方。如果匹配，则输出感谢页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:05:57.043

您可以在操作完成后创建并存储一个随机密钥，然后在重定向之前简单地验证该密钥（使用组合或会话、url 或 db，您的选择）是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:33:24.127

看起来 [Controller::flash](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aflash)可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T04:45:26.053

我会在重定向之前在页面上设置一个会话变量。然后在“谢谢”页面上，对变量进行测试并取消设置。如果在进行测试时它不存在，则重定向到显示“无法直接访问此页面”的错误页面。

我从未使用过 Cake，所以这是一个通用的 PHP 答案，而不是特定于 Cake 的答案。

# jquery - JQuery中带有数据参数的ajax DELETE请求

> ID：12327905
> 
> 赞同：4
> 
> 时间：2012-09-08T04:03:15.753
> 
> 标签：jquery

JQuery 1.8 或 1.7.2 是否支持 DELETE ajax 请求中的数据参数，例如

```
$.ajax({
    url: '/config/delete',
    type: 'DELETE',
    data: {id:'blah'}
} 
```

如果没有，解决方法可能是

```
$.ajax({
    url: '/config/delete?id=blah',
    type: 'DELETE'
} 
```

我的问题：

1.  我见过有人说他们明确不想使用第二种方法，但为什么呢？有什么安全原因吗？

2.  如果第一种方法不起作用而第二种方法不好，那么这里有什么替代方法？发送带有方法参数的 POST 请求，例如 data:{... method:'delete'}？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-03T04:48:21.847

[`DELETE`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/DELETE)HTTP 请求方法没有`body`携带一些数据。

因此，无论您使用哪种方法，`id=blah`or`{id:'blah'}`都不会交付。
这不是由于 jQuery 版本，而是由于 HTTP 方法本身的性质。

该`DELETE`方法的用途是删除访问的资源。
该文件`/config/delete`不会被执行，而是从服务器中删除。

另外，这种方法在 HTML 表单中是不允许的……所以我不会通过 Ajax 工作。

# javascript - Twitter 如何在文本框中放置标签？

> ID：12327911
> 
> 赞同：2
> 
> 时间：2012-09-08T04:04:27.667
> 
> 标签：javascript, jquery, html, css

在[twitter](http://twitter.com/)登录页面上，输入字段的标签到达使用 javascript/jquery 的常用技巧的输入字段中。但是，我通过推特来源了解他们是如何做到的。我发现 onChange: 它向父 div 添加了一个类“hasome”，并有一个默认文本作为跨度，它永远不会获得像`display:none;`.

我试图通过他们的 HTML/CSS/JS 但找不到他们的方法。有人可以告诉[推特](http://twitter.com/)是如何做到的吗？

**编辑** 推特代码：

```
<div class="placeholding-input username hasome">
    <input type="text" class="text-input email-input" name="session[username_or_email]" title="Username or email" autocomplete="on" tabindex="1">
    <span class="placeholder">Username or email</span>
</div> 
```

添加了有问题的推特 HTML。当我们添加一些代码时，它只会在父 div 中添加一个类“hasome”。在萤火虫中，我看不到任何分配给“hassome”类的属性。我的问题是，如果由 CSS 实现，那么哪里有执行此操作的代码或 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:10:47.600

即使这不是他们正在做的事情，您也可以通过使用 HTML5 属性[占位符来完成相同的结果](http://www.w3.org/TR/html5/common-input-element-attributes.html#the-placeholder-attribute)

请记住，[大多数主流浏览器都支持](http://caniuse.com/#search=placeholder)这一点，但 IE 除外。因此，如果这不是您关心的问题，您绝对可以使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T04:12:15.440

它只是在该字段上显示一个绝对定位的跨度，然后在输入任何内容后立即隐藏它（并在该字段再次变为空白时重新显示它）。直接隐藏是为什么跨度遮挡字段并不重要。奇怪的是，看起来他们实际上并没有使用标签，尽管我认为没有充分的理由不使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T04:34:54.593

这是CSS。 [http://a0.twimg.com/a/1347042098/t1/css/t1_core_logged_out.bundle.css](http://a0.twimg.com/a/1347042098/t1/css/t1_core_logged_out.bundle.css)有以下规则：

`.hasome .placeholder{font-size:0!important;z-index:-1;-moz-opacity:0;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);}`

请注意，对于 a 中的任何`.placeholder`一个`.hasome`，其`opacity`设置为`0`。因此，它不显示。

不是我会这样做的方式，但至少他们是这样做的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-08T04:37:29.567

当`hasome`该类应用于父 div 时，它用于在*子*跨度上设置 CSS 值的选择器中。因此，在 Firebug（或 Chrome 或 IE 的开发人员工具）中，您需要密切关注子跨度，而不是 div，以了解发生了什么。

您最终应该会看到应用了以下规则，来自 CSS 文件 t1_core_logged_out.bundle.css：

```
.has-content .placeholder, .hasome .placeholder
{
    font-size:0!important;
    z-index:-1;
    -moz-opacity:0;
    opacity:0;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter:alpha(opacity=0);
} 
```

最终生效的规则部分是“.hasome .placeholder”部分：当样式为 .placeholder 的元素有一个类为 .hasome 的祖先时，会使用各种技术来隐藏该子元素。它基本上是在父级上使用一个类来控制子级或后代的样式，这是一种相当常见的 CSS 技术。

# android - 将数据插入 Sqlite 数据库时出现异常

> ID：12327916
> 
> 赞同：1
> 
> 时间：2012-09-08T04:04:42.593
> 
> 标签：android, android-sqlite

我已经编写了将数据插入`SQLite`数据库的代码，当时我`nullpointer`在行返回时遇到异常`db.insert("userdetails", null, initialValues);`

```
public class DBUserAdapter {

            private static final String DATABASE_NAME = "users"; 
            private static final int DATABASE_VERSION = 1; 

            private static final String USERDETAILS=
                    "create table userdetails(usersno integer primary key autoincrement,photo BLOB,date text not null);";

            private Context context = null; 
            private DatabaseHelper DBHelper; 
            private SQLiteDatabase db; 

        //    public DBUserAdapter(Context ctx) {
        //        this.context = ctx; 
        //        DBHelper = new DatabaseHelper(context); 
        //    }

            public DBUserAdapter(SampleViewBase sampleViewBase) {

                 DBHelper = new DatabaseHelper(context);
            }

            private static class DatabaseHelper extends SQLiteOpenHelper 
            { 
                DatabaseHelper(Context context) 
                { 
                    super(context, DATABASE_NAME, null, DATABASE_VERSION); 
                }

                public void onCreate(SQLiteDatabase db) {
                     db.execSQL(USERDETAILS);

                }

                public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                    // TODO Auto-generated method stub
                      db.execSQL("DROP TABLE IF EXISTS users"); 
                        onCreate(db); 
                } 

        }
             public void open() throws SQLException 
                { 
                    db = DBHelper.getWritableDatabase(); 
                } 

                public void close() 
                { 
                    DBHelper.close(); 
                }     

                public long insert(byte[] photo, String date) 
                { 
                     ContentValues initialValues = new ContentValues(); 
                     initialValues.put("photo", photo); 
                     initialValues.put("date", date); 
                    // initialValues.put(KEY_TIME, time); 
                     Log.d("inotvaluessssssssss",initialValues.toString());
                     return db.insert("userdetails", null, initialValues);

                } 
```

我的主要活动

```
public abstract class SampleViewBase extends SurfaceView implements SurfaceHolder.Callback, Runnable {
    private static final String TAG = "Sample-ImageManipulations::SurfaceView";
    DBUserAdapter dbUser= null ;

    private SurfaceHolder       mHolder;
    private VideoCapture        mCamera;
    byte[] photo;
    //  Mat mRgba;
    Mat mRgba = new Mat(); 
    Mat mRgba1= new Mat(); 
    // private FpsMeter            mFps;
    int[] intArray = new int[50];
//  int[] y;
//  int check=0;
    int cod=0;

    public SampleViewBase(Context context) {
        super(context);
        mHolder = getHolder();
        mHolder.addCallback(this);
        // mFps = new FpsMeter();
        Log.i(TAG, "Instantiated new " + this.getClass());
                                          }

    public boolean openCamera() {
        Log.i(TAG, "openCamera");
        synchronized (this) {
            releaseCamera();
            mCamera = new VideoCapture(Highgui.CV_CAP_ANDROID);
            if (!mCamera.isOpened()) {
                mCamera.release();
                mCamera = null;
                Log.e(TAG, "Failed to open native camera");
                return false;
            }
        }
        return true;
    }

    public void releaseCamera() {
        Log.i(TAG, "releaseCamera");
        synchronized (this) {
            if (mCamera != null) {
                mCamera.release();
                mCamera = null;
            }
        }
    }

    public void setupCamera(int width, int height) {
        Log.i(TAG, "setupCamera("+width+", "+height+")");
        synchronized (this) {
            if (mCamera != null && mCamera.isOpened()) {
                List<Size> sizes = mCamera.getSupportedPreviewSizes();
                int mFrameWidth = width;
                int mFrameHeight = height;

                // selecting optimal camera preview size
                {
                    double minDiff = Double.MAX_VALUE;
                    for (Size size : sizes) {
                        if (Math.abs(size.height - height) < minDiff) {
                            mFrameWidth = (int) size.width;
                            mFrameHeight = (int) size.height;
                            minDiff = Math.abs(size.height - height);
                        }
                    }
                }

                mCamera.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, mFrameWidth);
                mCamera.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT, mFrameHeight);
            }
        }

    }

    public void surfaceChanged(SurfaceHolder _holder, int format, int width, int height) {
        Log.i(TAG, "surfaceChanged");
        setupCamera(width, height);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.i(TAG, "surfaceCreated");
        (new Thread(this)).start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.i(TAG, "surfaceDestroyed");
        releaseCamera();
    }

    protected abstract Bitmap processFrame(VideoCapture capture);

    public void run() {
        Log.i(TAG, "Starting processing thread");
        //mFps.init();

        while (true) {
            Bitmap bmp = null;

            synchronized (this) {
                if (mCamera == null) {
                    Log.i(TAG, "mCamera == null");
                    break;
                }

                if (!mCamera.grab()) {
                    Log.e(TAG, "mCamera.grab() failed");
                    break;
                                   }
                 bmp = processFrame(mCamera);
                 String i1=bmp.toString();
                 dbUser = new DBUserAdapter(SampleViewBase.this);
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local time in the system

                //    mRgba= (Mat)processFrame(mCamera);

                ByteArrayOutputStream blob = new ByteArrayOutputStream();
                bmp.compress(CompressFormat.PNG, 100 /*ignored for PNG*/, blob);
                photo = blob.toByteArray();
                dbUser.insert(photo, dateTime);
                Log.d("bitmapdataaaaaaaaaaaaaaaaaaaaaaa",""+photo);
                Bitmap bmp32 = bmp.copy(Bitmap.Config.ARGB_8888, true);

                Utils.bitmapToMat(bmp32,mRgba); 
                Utils.bitmapToMat(bmp32,mRgba1); 
        //      Log.d("lengthhhhhhhhhhhh",""+bitmapdata.length);
                //              for(int k=0;k<bitmapdata.length;k++)
                //              {
                //                  
                //              }
                bmp = processFrame(mCamera);
                int i= bmp.getWidth();
                int j=bmp.getHeight();
                Log.d("Coming outoutttttttttttt ","Coming outputtttttttt");
                intArray=FindFeatures(mRgba1.getNativeObjAddr(),mRgba.getNativeObjAddr());
                Log.d("valueeeeeeeeee",""+intArray[0]);
                Log.d("valueeeeeeeeee",""+intArray[1]);
                Log.d("valueeeeeeeeee",""+intArray[2]);
                Log.d("valueeeeeeeeee",""+intArray[3]);
                Log.d("valueeeeeeeeee",""+intArray[3]);
            //  Log.d("Coming outo-----------------------==========","hjhjhj");
                //    mRgba=(Mat)bitmapdata;
                //  mFps.measure();
            //   Utils.matToBitmap(mRgba, bmp);

            }

            if (bmp != null)
            {
                Canvas canvas = mHolder.lockCanvas();
                if (canvas != null) 
                {
                    //Log.d("Coming outo---454545--------------------==========","hjhjhj");
                    canvas.drawBitmap(bmp, (canvas.getWidth() - bmp.getWidth()) / 2, (canvas.getHeight() - bmp.getHeight()), null);
                    // mFps.draw(canvas, (canvas.getWidth() - bmp.getWidth()) / 2, 0);

                    mHolder.unlockCanvasAndPost(canvas);
                }
                bmp.recycle();
                }

            //FindFeatures(bitmapdata,j,i);
        }

        Log.i(TAG, "Finishing processing thread");
    }
    //   public native void FindFeatures(final byte[] bitmapdata,long m,int height,int width);
    public native int[] FindFeatures(long n,long m);
    static {
    //  Log.d("Coming hereeeeeee","Coming hereeeeeeeeeeeeee");
        System.loadLibrary("mixed_sample");

    }

    public class Demo
    {
        int[] x;
        int[] y;
        int check=0;
        int cod=0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T04:11:49.293

在您的主要活动中，在调用 insert 之前执行 dbUser.open() 并在 insert 完成后执行 dbUser.close() 进行此修改。

这是修改：

```
 dbUser = new DBUserAdapter(SampleViewBase.this);
                dbUser.open(); // <<<<<<<<<<<<<<<<<< look at this modification too
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local time in the system

                //    mRgba= (Mat)processFrame(mCamera);

                ByteArrayOutputStream blob = new ByteArrayOutputStream();
                bmp.compress(CompressFormat.PNG, 100 /*ignored for PNG*/, blob);
                photo = blob.toByteArray();
                dbUser.insert(photo, dateTime);
                dbUser.close(); // <<<<<<<<<<<<<<<<<< look at this modification too
                Log.d("bitmapdataaaaaaaaaaaaaaaaaaaaaaa",""+photo);
                Bitmap bmp32 = bmp.copy(Bitmap.Config.ARGB_8888, true); 
```

这是经过修改的 MainActivity 代码：

```
 public abstract class SampleViewBase extends SurfaceView implements SurfaceHolder.Callback, Runnable {
    private static final String TAG = "Sample-ImageManipulations::SurfaceView";
    DBUserAdapter dbUser= null ;

    private SurfaceHolder       mHolder;
    private VideoCapture        mCamera;
    private Context mContext;
    byte[] photo;
    //  Mat mRgba;
    Mat mRgba = new Mat(); 
    Mat mRgba1= new Mat(); 
    // private FpsMeter            mFps;
    int[] intArray = new int[50];
//  int[] y;
//  int check=0;
    int cod=0;

    public SampleViewBase(Context context) {
        super(context);
        this.mContext = context;
        mHolder = getHolder();
        mHolder.addCallback(this);
        // mFps = new FpsMeter();
        Log.i(TAG, "Instantiated new " + this.getClass());
                                          }

    public boolean openCamera() {
        Log.i(TAG, "openCamera");
        synchronized (this) {
            releaseCamera();
            mCamera = new VideoCapture(Highgui.CV_CAP_ANDROID);
            if (!mCamera.isOpened()) {
                mCamera.release();
                mCamera = null;
                Log.e(TAG, "Failed to open native camera");
                return false;
            }
        }
        return true;
    }

    public void releaseCamera() {
        Log.i(TAG, "releaseCamera");
        synchronized (this) {
            if (mCamera != null) {
                mCamera.release();
                mCamera = null;
            }
        }
    }

    public void setupCamera(int width, int height) {
        Log.i(TAG, "setupCamera("+width+", "+height+")");
        synchronized (this) {
            if (mCamera != null && mCamera.isOpened()) {
                List<Size> sizes = mCamera.getSupportedPreviewSizes();
                int mFrameWidth = width;
                int mFrameHeight = height;

                // selecting optimal camera preview size
                {
                    double minDiff = Double.MAX_VALUE;
                    for (Size size : sizes) {
                        if (Math.abs(size.height - height) < minDiff) {
                            mFrameWidth = (int) size.width;
                            mFrameHeight = (int) size.height;
                            minDiff = Math.abs(size.height - height);
                        }
                    }
                }

                mCamera.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, mFrameWidth);
                mCamera.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT, mFrameHeight);
            }
        }

    }

    public void surfaceChanged(SurfaceHolder _holder, int format, int width, int height) {
        Log.i(TAG, "surfaceChanged");
        setupCamera(width, height);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.i(TAG, "surfaceCreated");
        (new Thread(this)).start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.i(TAG, "surfaceDestroyed");
        releaseCamera();
    }

    protected abstract Bitmap processFrame(VideoCapture capture);

    public void run() {
        Log.i(TAG, "Starting processing thread");
        //mFps.init();

        while (true) {
            Bitmap bmp = null;

            synchronized (this) {
                if (mCamera == null) {
                    Log.i(TAG, "mCamera == null");
                    break;
                }

                if (!mCamera.grab()) {
                    Log.e(TAG, "mCamera.grab() failed");
                    break;
                                   }
                 bmp = processFrame(mCamera);
                 String i1=bmp.toString();
                 dbUser = new DBUserAdapter(mContext);
                 dbUser.open(); // <<<<<<<<<<<<<<<<<< look at this modification too
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local time in the system

                //    mRgba= (Mat)processFrame(mCamera);

                ByteArrayOutputStream blob = new ByteArrayOutputStream();
                bmp.compress(CompressFormat.PNG, 100 /*ignored for PNG*/, blob);
                photo = blob.toByteArray();
                dbUser.insert(photo, dateTime);
                dbUser.close(); // <<<<<<<<<<<<<<<<<< look at this modification too
                Log.d("bitmapdataaaaaaaaaaaaaaaaaaaaaaa",""+photo);
                Bitmap bmp32 = bmp.copy(Bitmap.Config.ARGB_8888, true);

                Utils.bitmapToMat(bmp32,mRgba); 
                Utils.bitmapToMat(bmp32,mRgba1); 
        //      Log.d("lengthhhhhhhhhhhh",""+bitmapdata.length);
                //              for(int k=0;k<bitmapdata.length;k++)
                //              {
                //                  
                //              }
                bmp = processFrame(mCamera);
                int i= bmp.getWidth();
                int j=bmp.getHeight();
                Log.d("Coming outoutttttttttttt ","Coming outputtttttttt");
                intArray=FindFeatures(mRgba1.getNativeObjAddr(),mRgba.getNativeObjAddr());
                Log.d("valueeeeeeeeee",""+intArray[0]);
                Log.d("valueeeeeeeeee",""+intArray[1]);
                Log.d("valueeeeeeeeee",""+intArray[2]);
                Log.d("valueeeeeeeeee",""+intArray[3]);
                Log.d("valueeeeeeeeee",""+intArray[3]);
            //  Log.d("Coming outo-----------------------==========","hjhjhj");
                //    mRgba=(Mat)bitmapdata;
                //  mFps.measure();
            //   Utils.matToBitmap(mRgba, bmp);

            }

            if (bmp != null)
            {
                Canvas canvas = mHolder.lockCanvas();
                if (canvas != null) 
                {
                    //Log.d("Coming outo---454545--------------------==========","hjhjhj");
                    canvas.drawBitmap(bmp, (canvas.getWidth() - bmp.getWidth()) / 2, (canvas.getHeight() - bmp.getHeight()), null);
                    // mFps.draw(canvas, (canvas.getWidth() - bmp.getWidth()) / 2, 0);

                    mHolder.unlockCanvasAndPost(canvas);
                }
                bmp.recycle();
                }

            //FindFeatures(bitmapdata,j,i);
        }

        Log.i(TAG, "Finishing processing thread");
    }
    //   public native void FindFeatures(final byte[] bitmapdata,long m,int height,int width);
    public native int[] FindFeatures(long n,long m);
    static {
    //  Log.d("Coming hereeeeeee","Coming hereeeeeeeeeeeeee");
        System.loadLibrary("mixed_sample");

    }

    public class Demo
    {
        int[] x;
        int[] y;
        int check=0;
        int cod=0;
    }
} 
```

修改 DBUserAdapter 构造函数：

```
 public DBUserAdapter(Context context) {
            this.context = ctx; 
            DBHelper = new DatabaseHelper(context); 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:33:11.097

DBHelper 类用于对数据库执行操作（创建表、插入数据、更新数据、删除数据、读取数据）。

使用以下代码创建 DBHelper 类。

1.使用以下类，如果数据库可用，则必须创建数据库和表，然后不要覆盖数据库，如果数据库可用且表不可用，则在数据库中创建新表。

首先你必须定义......

```
private SQLiteDatabase db;
private final String DB_NAME = "Database_name";
private final int DB_VERSION = 1;
private final String TABLE_NAME = "Table_name";
private final String TABLE_ROW_ID = "id";
private final String TABLE_ROW_ONE = "name";
private final String TABLE_ROW_TWO = "basic_price";
private final String TABLE_ROW_THREE = "tax";
private final String TABLE_ROW_FOUR = "shipping";
private final String TABLE_ROW_FIVE = "price";
private final String TABLE_ROW_SIX = "image"; 
```

定义变量后，您必须在 DBHelper 类中定义以下类。

```
 private class CustomSQLiteOpenHelper extends SQLiteOpenHelper
        {
            public CustomSQLiteOpenHelper(Context context)
            {
                super(context, DB_NAME, null, DB_VERSION);
            }

            @Override
            public void onCreate(SQLiteDatabase db)
            {
                String newTableQueryString = "create table " +
                                            TABLE_NAME +
                                            " (" +
                                            TABLE_ROW_ID + " integer primary key autoincrement not null," +
                                            TABLE_ROW_ONE + " text," +
                                            TABLE_ROW_TWO + " real," +
                                            TABLE_ROW_THREE + " real," +
                                            TABLE_ROW_FOUR + " real," +
                                            TABLE_ROW_FIVE + " real," +
                                            TABLE_ROW_SIX + " blob" +
                                            ");";
                    db.execSQL(newTableQueryString);

            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
            {

            }
        }
    } 
```

2.为 DBHelper 类创建构造函数。

```
public DBHelper(Context context)
{
    this.context = context;
    CustomSQLiteOpenHelper helper = new CustomSQLiteOpenHelper(context);
    this.db = helper.getWritableDatabase();
} 
```

3.创建以下方法将数据插入数据库。

```
public void insert_Row(String name, float basic_price, float tax, float shipping,float price,Bitmap image)
    {
        byte[] data = getBitmapAsByteArray(image);

        ContentValues values = new ContentValues();
        values.put(TABLE_ROW_ONE, name);
        values.put(TABLE_ROW_TWO, basic_price);
        values.put(TABLE_ROW_THREE, tax);
        values.put(TABLE_ROW_FOUR, shipping);
        values.put(TABLE_ROW_FIVE, price);
        values.put(TABLE_ROW_SIX, data);

        try
        {
            db.insert(TABLE_NAME, null, values);
            Log.w("message","Insert successfully");
        }
        catch(Exception e)
        {
            Log.e("DB ERROR", e.toString());
            //e.printStackTrace();
        }
    } 
```

4.创建以下用于将数据更新到数据库的方法。

```
 public void updateRow(long rowID,String name,float basic_price, float tax, float shipping,float price,Bitmap image)
                    {
                        byte[] data = getBitmapAsByteArray(image);

                        ContentValues values = new ContentValues();
                        values.put(TABLE_ROW_ONE, name);
                        values.put(TABLE_ROW_TWO, basic_price);
                        values.put(TABLE_ROW_THREE, tax);
                        values.put(TABLE_ROW_FOUR, shipping);
                        values.put(TABLE_ROW_FIVE, price);
                        values.put(TABLE_ROW_SIX, data);

                        try 
                        {
                            db.update(TABLE_NAME, values, TABLE_ROW_ID + "=" + rowID, null);
                            Log.w("message","Update successfully";
                        }
                        catch (Exception e)
                        {
                            Log.e("DB Error", e.toString());
                            e.printStackTrace();
                        }
                    } 
```

5.创建以下方法将数据删除到数据库中。

```
public void deleteRow(long rowID)
    {
        try 
        {
            db.delete(TABLE_NAME, TABLE_ROW_ID + "=" + rowID, null);
            Log.w("message","delete successfully");
        }
        catch (Exception e)
        {
            Log.e("DB ERROR", e.toString());
            e.printStackTrace();
        }
    } 
```

6.创建以下方法以获取特定行到数据库中。

```
 public void getRow(long rowID)
        {
            Cursor cursor;

            try
            {
                cursor = db.query
                (
                        TABLE_NAME,
                        new String[] { TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO, TABLE_ROW_THREE, TABLE_ROW_FOUR, TABLE_ROW_FIVE, TABLE_ROW_SIX },
                        TABLE_ROW_ID + "=" + rowID,
                        null, null, null, null, null
                );

                cursor.moveToFirst();

                if (!cursor.isAfterLast())
                {
                    do
                    {                   
                        String row_item_id=cursor.getLong(0);
                        String row_item_name=cursor.getString(1);
                        String row_item_basic_price=cursor.getFloat(2);
                        String row_item_tax=cursor.getFloat(3);
                        String row_item_shipping=cursor.getFloat(4);
                        String row_item_price=cursor.getFloat(5);
                        byte[] imgByte = cursor.getBlob(6);
                            Bitmap row_item_bitmap=BitmapFactory.decodeByteArray(imgByte, 0, imgByte.length);

                    }

                    while (cursor.moveToNext());
                }
                cursor.close();
            }
            catch (SQLException e) 
            {
                Log.e("DB ERROR", e.toString());
                e.printStackTrace();
            }
        } 
```

7.创建一个 ArrayList 来保存从数据库中收集的所有数据。

```
ArrayList<ArrayList<Object>> dataArrays = new ArrayList<ArrayList<Object>>(); 
```

这是一个创建“光标”对象的数据库调用。游标对象存储从数据库收集的信息，用于遍历数据。

```
 public ArrayList<ArrayList<Object>> getAllRowsAsArrays()
        {

            ArrayList<ArrayList<Object>> dataArrays = new ArrayList<ArrayList<Object>>();

            Cursor cursor;

            try
            {
                // ask the database object to create the cursor.
                cursor = db.query(
                        TABLE_NAME,
                        new String[]{TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO},
                        null, null, null, null, null
                );

                // move the cursors pointer to position zero.
                cursor.moveToFirst();

                // if there is data after the current cursor position, add it
                // to the ArrayList.
                if (!cursor.isAfterLast())
                {
                    do
                    {
                        ArrayList<Object> dataList = new ArrayList<Object>();

                        dataList.add(cursor.getLong(0));
                        dataList.add(cursor.getString(1));
                        dataList.add(cursor.getString(2));

                        dataArrays.add(dataList);
                    }
                    // move the cursor's pointer up one position.
                    while (cursor.moveToNext());
                }
            }
            catch (SQLException e)
            {
                Log.e("DB Error", e.toString());
                e.printStackTrace();
            }

            // return the ArrayList that holds the data collected from
            // the database.
            return dataArrays;
        } 
```

# css - 边框 CSS 无法正常工作

> ID：12327920
> 
> 赞同：2
> 
> 时间：2012-09-08T04:04:56.643
> 
> 标签：css, border, sizing

我有以下代码： http: [//www.designated.net.au/testbed/test/](http://www.designated.net.au/testbed/test/)

```
 body {
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    background: #000000;
 }

 #page {
    margin:0% 10% 0% 10%;
    width:80%;
    height:1000px;
    border:solid #333333;
    border: 0 10px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: #fff;
 } 
```

据我所知，这应该给我一个 10px 左右的内边框，但是我在整个东西内得到一个大约 2px 的边框。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T04:10:55.893

在 Chrome、Safari、IE 7/8/9 中为我修复：http: [//jsfiddle.net/XsNck/](http://jsfiddle.net/XsNck/)

我相信您的边界声明语法不正确。

**不工作**

```
border:solid #333333;
border: 0 10px; 
```

**在职的**

```
border-style: solid;
border-color: #333;
border-width: 0 10px; 
```

从规范：

> 'border' 属性是一个简写属性，用于为框的所有四个边框设置相同的宽度、颜色和样式。与简写的 'margin' 和 'padding' 属性不同，'border' 属性不能在四个边框上设置不同的值。为此，必须使用一个或多个其他边框属性。

另见：[https ://developer.mozilla.org/en-US/docs/CSS/border-style](https://developer.mozilla.org/en-US/docs/CSS/border-style)

顺便说一句（根据问题标题），这与`box-sizing`财产没有直接关系；`box-sizing`控制如何计算盒子的尺寸（特别是，是否包括填充和边框）。它不会改变边框大小。

# facebook - Facebook 关于在 iFrame 之外运行 Canvas 应用程序的政策？

> ID：12327929
> 
> 赞同：3
> 
> 时间：2012-09-08T04:07:29.703
> 
> 标签：facebook, iframe, facebook-canvas

我目前正在开发 Facebook 应用程序。目前它正在画布 iFrame 中运行。但是，理想情况下，我希望它也可以在 iFrame 之外访问——就像 Branchout 可以在 Facebook 中访问一样，并且在直接加载到他们的网站上时也是独立的。

根据[Facebook 平台政策](https://developers.facebook.com/policy/)：

> Facebook 上的 Canvas 或 Page Tab 应用程序的主要目的不能是简单地将用户从 Facebook 体验重定向到外部网站。

有人知道这方面的任何其他政策吗？

# python - 我应该如何处理我混乱的 Python 环境？

> ID：12327932
> 
> 赞同：0
> 
> 时间：2012-09-08T04:07:44.107
> 
> 标签：python, development-environment, virtualenv, production-environment

我的系统上有很多与python相关的包，它们对应于不同版本的python。

我认为最佳实践不应该保留这么多版本的 python，但我必须这样做，因为对 linux 的依赖有点复杂。

那么在编写python时如何保持干净的开发环境有什么建议吗？

我的系统中与python相关的详细信息如下：

```
python
python            python2.4         python2.6         python_bk_24
python2           python26          python2.6-config

[mirror@home project]$ rpm -qa | grep python
python-sqlite-1.1.7-1.2.1
python-setuptools-0.6c5-2.el5
python-pip-0.8-1.el5
dbus-python-0.70-9.el5_4
python-elementtree-1.2.6-5
python-iniparse-0.2.3-4.el5
rpm-python-4.4.2.3-9.el5
libselinux-python-1.33.4-5.7.el5
python-libs-2.4.3-46.el5_8.2
python-devel-2.4.3-46.el5_8.2
ipython-0.8.4-1.el5
audit-libs-python-1.7.7-6.el5_3.3
python-urlgrabber-3.1.0-5.el5
python26-2.6.8-1.el5
python-2.4.3-46.el5_8.2
python26-distribute-0.6.10-4.el5
python26-virtualenv-1.5.1-3.el5
python26-libs-2.6.8-1.el5
python26-devel-2.6.8-1.el5
python-virtualenv-1.7-1.el5
libxml2-python-2.6.26-2.1.15.el5_8.2

[mirror@home project]$ python -V
Python 2.4.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T04:13:37.730

通过[virtualenv](http://www.virtualenv.org/en/latest/index.html)和[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)包使用虚拟环境。这些使您可以创建独立于各个项目的干净工作区。使用这些工作空间类似于：

```
mkvirtualenv project1
workon project1
# you are now in the virtual environment for project1- Python packages you
# install (such as with pip) will be installed only in this environment
deactivate project1 
```

一个很好的教程在[这里](http://blog.fruiapps.com/2012/06/An-introductory-tutorial-to-python-virtualenv-and-virtualenvwrapper)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T04:20:29.463

如果你想管理多个版本的 Python 和不同的 Pip 包集，我建议使用[PythonBrew](https://github.com/utahta/pythonbrew)。

Github 站点的[README](https://github.com/utahta/pythonbrew/blob/master/README.rst)中提供了详细的使用说明。

它类似于 Ruby 的[RVM](https://rvm.io/)，并带有内置的[virtualenv](http://www.virtualenv.org/en/latest/index.html)支持。

# wifi - 访问 AR2112

> ID：12327934
> 
> 赞同：1
> 
> 时间：2012-09-08T04:07:57.560
> 
> 标签：wifi, radio

这有点不走寻常路。我有一张我在 OpenBSD 下使用的 DLink DWL-G520 卡，它工作正常。我想要做的是能够访问它的无线电部分。为什么？我想在射电望远镜中使用它。这是一个带有外部天线连接器的 2.4 GHz 接收器。我想连接一些同轴电缆、一些放大器和一个旧电视天线，并将天线指向天空。它有一个 RSSI 信号和可变的射频增益（它可以根据我的发现进行调整），所以我需要做的就是在指向天空中的某个点时随时间记录这些信号。我不需要真正控制频率，因为大多数自然事件都是宽带的。

我正在按照嵌套结构浏览 OpenBSD ath 驱动程序，但我不想要任何正常的网络内容，这是驱动程序的大部分工作。dmesg 将其识别为 AR5212，根据 Atheros PDF，它始终与 AR2112 无线电配对。有没有比浏览 PCI 的东西更简单的方法来看看我的选择是什么？我需要关闭发射器，这样它就不会炸我的放大器。从我所见，试图找到低级文档几乎是不可能的。最终，我也希望将这项工作与其他 WiFi 卡一起使用，但我将从这个开始。我也有一个带有外部天线连接器的 Citron。

艾伦，ab1jx

# ios - UITableView 不会调用委托

> ID：12327939
> 
> 赞同：0
> 
> 时间：2012-09-08T04:09:40.973
> 
> 标签：ios, uitableview

我尝试将 UITableView 打包为我自己的。代码是：

```
@interface OPTableView : UIView<UITableViewDelegate,UITableViewDataSource>
{
    NSMutableArray *_dataSource;
    id<OPTableviewDelegate>_delegate;
}
@property(retain,nonatomic)id<OPTableviewDelegate>delegate;
@property(retain,nonatomic)NSMutableArray *dataSource; 
```

米：

```
@implementation OPTableView

@synthesize delegate=_delegate;
@synthesize dataSource=_dataSource;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        tableView=[[UITableView alloc] initWithFrame:frame];
        tableView.delegate=self;
        tableView.dataSource=self;
        _dataSource=[NSMutableArray array];
        [self addSubview:tableView];
        [tableView release];
    }
    return self;
}

#pragma table delegate

- (void)tableView:(UITableView *)tab didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
} 
```

当我创建 OPTableView 时，它可以显示在屏幕上。但问题是当我选择一个表时，它不会调用委托方法：didSelectRowAtIndexPath，但更糟糕的是，它崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T06:27:51.067

什么是 OPTableViewDelegate？您的表的委托类型为 OPTableViewDelegate，而不是 UITableViewDelegate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T05:57:13.683

所有，我犯了一个非常愚蠢的错误。在'initWithFrame'方法中，代码：_dataSource=[NSMutableArray array]; 是绝对错误的。

我删除了这段代码“_dataSource=[NSMutableArray array];”，一切正常。

谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:29:00.330

尝试将单元格的选择样式设置为某个非无值。另请注意，您应该实现表的所有必需的委托消息 - 您这样做了吗？

# sql-server - SSIS 远程连接访问

> ID：12327941
> 
> 赞同：0
> 
> 时间：2012-09-08T04:09:48.973
> 
> 标签：sql-server, sql-server-2008, ssis, sql-server-2008-r2, component-services

我有`Windows server 2008 R2`并且`SQL Server 2008 R2`想要更改`SSIS`. 在 windows xp 中，我可以`ControlPanel\Administrative Tools\Component Service\My Computer\DCOM Config\Microsoft SQL Server Integration Service 11.0(Security Tab)`用于配置远程访问`SSIS`. 但在 windows server 2008 R2 中，我不知道如何进行主动远程访问。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:20:59.667

您可以运行 - 键入 dcomcnfg.exe - 这将启动组件管理器，您可以使用以下步骤：++++

打开控制面板，双击管理工具，然后双击组件服务以启动组件服务 MMC 管理单元。

展开控制台左窗格中的组件服务节点。展开计算机节点，展开我的电脑，然后单击 DCOM 配置节点。

选择 DCOM Config 节点，然后在可以配置的应用程序列表中选择 SQL Server Integration Services 11.0。

右键单击 Microsoft SQL Server Integration Services 11.0 并选择属性。

在 Microsoft SQL Server Integration Services 11.0 属性对话框中，选择安全选项卡。

在启动和激活权限下，选择自定义，然后单击编辑以打开启动权限对话框。

在“启动权限”对话框中，添加或删除用户，并将适当的权限分配给适当的用户和组。可用权限包括本地启动、远程启动、本地激活和远程激活。Launch 权限授予或拒绝启动和停止服务的权限；激活权限授予或拒绝连接到服务的权限。

单击确定关闭对话框。

在访问权限下，重复步骤 7 和 8 以将适当的权限分配给适当的用户和组。

关闭 MMC 管理单元。

重新启动集成服务服务。+++++++++++++++++++++

参考：http: [//msdn.microsoft.com/en-us/library/aa337083.aspx](http://msdn.microsoft.com/en-us/library/aa337083.aspx)

您可以在**dcomcnfg.exe SSIS 2008 R2**上搜索其他匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:12:36.797

干得好：

[如何在 Windows 2008 上配置 DTC（web.archive.org 镜像）](http://web.archive.org/web/20180303061740/http://itknowledgeexchange.techtarget.com/sql-server/how-to-configure-dtc-on-windows-2008/)

# java - Toolkit.getDefaultToolkit().getSystemSelection() 返回 null 时如何更新系统剪贴板。

> ID：12327948
> 
> 赞同：0
> 
> 时间：2012-09-08T04:11:25.680
> 
> 标签：java

以下代码：

```
Toolkit.getDefaultToolkit().getSystemSelection().setContents(
    new StringSelection(a), null); 
```

返回`null`，因为我的计算机不支持它。但是，我想知道如果它不支持我如何设置我的计算机选择。显然必须有另一种方式。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:04:31.643

来自 JavaDocs[`Toolkit.getSystemSelection()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getSystemSelection%28%29)

> 某些平台不支持系统选择`Clipboard`。在这些平台上，此方法将返回`null`. **在这种情况下，应用程序免除了如上所述更新系统选择剪贴板的责任**。

...因此您无需担心`getSystemSelection()`退货情况`null`。

# c++ - 终止 Qt 中的所有子进程

> ID：12327951
> 
> 赞同：1
> 
> 时间：2012-09-08T04:12:07.507
> 
> 标签：c++, linux, qt

我在 Qt 中创建了一个应用程序，在显示输入 root 密码的对话框后，我使用 QProcess 以 root 身份启动进程。新进程以 root 身份运行。如果我使用按钮终止应用程序，则子进程不会终止。当主应用程序终止时，如何确保子进程也终止？

# javascript - 如何使用 jquery 或 javascript 在图像 src 中添加域 url？

> ID：12327955
> 
> 赞同：0
> 
> 时间：2012-09-08T04:12:20.300
> 
> 标签：javascript, jquery, dom

我想在不替换图像名称的情况下将域 url 添加到图像 src：

域名网址：[http ://www.example.com](http://www.example.com)

前：

```
<img src="images/old.gif"> 
```

后：

```
<img src="http://www.example.com/images/old.gif"> 
```

我曾尝试使用 javascript 但没有运气：

```
document.getElementById("footer").getElementsByTagName("img")[0].src = "http://www.example.com"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:15:58.333

```
$("#footer > img").attr("src", "http://site.com/" + $("#footer > img").attr("src") ); 
```

或者，您可以尝试查看[基本](http://www.w3schools.com/tags/tag_base.asp)标签：

```
<head>
    <base href="http://www.w3schools.com/images/" target="_blank" />
</head>

<body>
    <img src="stickman.gif" />
    <a href="http://www.w3schools.com">W3Schools</a>
</body> 
```

# r - 如何替换R中的单列值

> ID：12327957
> 
> 赞同：0
> 
> 时间：2012-09-08T04:12:45.290
> 
> 标签：r, variables

我有一个如下所示的数据集：

```
 A  B  C   D
1\. 5  4  4   4
2\. 5  4  4   4
3\. 5  4  4   4
4\. 5  4  4   4
5\. 5  4  4   4
6\. 5  4  4   4
7\. 5  4  4   4 
```

我想为 C 列中的所有变量添加一个“零”。例如，像这样：

```
 A  B  C   D
1\. 5  4  40  4
2\. 5  4  40  4
3\. 5  4  40  4
4\. 5  4  40  4
5\. 5  4  40  4
6\. 5  4  40  4
7\. 5  4  40  4 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T11:01:45.093

我真的不喜欢不断地引用来`myData$A`引用该`A`列。一个不错的替代表达是使用`within`：

```
myData = within(myData, {
   C = C * 10
   D = D + 4
   E = C + D
 }) 
```

特别是当需要在同一个中完成更多的列操作时，`data.frame`我更喜欢这种语法。甚至更好：

```
myData = transform(myData, C = C * 10, D = D + 4, E = C + D) 
```

或`mutate`从`plyr`包装中使用。与它迭代工作相比，这具有优势`transform`，允许您使用新创建的列：

```
# fails
myData = transform(myData, C = C * 10, new_col = C + 4, even_newer = new * 3) 
#works  
myData = mutate(myData, C = C * 10, new_col = C + 4, even_newer = new * 3) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T04:16:05.440

只需将 C 列乘以 10。假设您`data.frame`的名称为`myData`：

```
myData$C <- myData$C*10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T14:01:19.863

如果您的数据是数字，mrdwab 的建议是最好的：

> 我的数据$C <- 我的数据$C*10

这种风格适用于“data.frame”。因此，如果您将数据保存在矩阵中，您应该使用：

> 我的数据[,3] = 我的数据[,3] * 10

最后，如果您的数据不是数字（字符），您可以执行以下操作：

> myData$C = paste(myData$C, "0", sep="")

# javascript - 为什么这些 Javascript for 循环在 Firefox 上比 Chrome / Safari 慢得多？

> ID：12327958
> 
> 赞同：9
> 
> 时间：2012-09-08T04:12:47.227
> 
> 标签：javascript, performance, benchmarking, v8

我在搞乱基准站点[jfprefs并在](http://jsperf.com/)[http://jsperf.com/prefix-or-postfix-increment/9](http://jsperf.com/prefix-or-postfix-increment/9)创建了我自己的基准。

基准是 Javascript for 循环的变体，使用前缀和后缀增量器以及不使用就地增量器的 Crockford jslint 样式。

```
for (var index = 0, len = data.length; index < len; ++index) {
  data[index] = data[index] * 2;
}

for (var index = 0, len = data.length; index < len; index++) {
  data[index] = data[index] * 2;
}

for (var index = 0, len = data.length; index < len; index += 1) {
  data[index] = data[index] * 2;
} 
```

在从几次基准测试中获得数据后，我注意到 Firefox 平均每秒执行大约 15 次操作，而 Chrome 大约每秒执行 300 次。

![基准测试结果](../Images/5b650e514d2bb0584d39298313798d03.png)

我认为 JaegerMonkey 和 v8 在速度方面相当可比？我的基准测试是否存在某种缺陷，Firefox 是否在这里进行了某种节流，或者 Javascript 解释器的性能之间的差距真的那么大吗？

**更新：**感谢[jfriend00](https://stackoverflow.com/users/816620/jfriend00)，我已经得出结论，性能差异并不完全是由于循环迭代，正如在[这个版本的测试用例](http://jsperf.com/prefix-or-postfix-increment/10)中看到的那样。如您所见，Firefox 速度较慢，但​​没有我们在初始测试用例中看到的差距那么大。

那么为什么是这样的说法，

```
data[index] = data[index] * 2; 
```

Firefox 这么慢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T23:57:39.883

数组在 JavaScript 中很棘手。创建它们的方式，填充它们的方式（以及使用什么值）都会影响它们的性能。

引擎使用两种基本实现。最简单、最明显的一种是连续的内存块（就像一个 C 数组，带有一些元数据，比如长度）。这是最快的方式，理想情况下是您在大多数情况下想要的实现。

问题是，JavaScript 中的数组可以通过分配给任意索引而变得非常大，从而留下“漏洞”。例如，如果您有一个小数组：

```
var array = [1,2,3]; 
```

并为大索引分配一个值：

```
array[1000000] = 4; 
```

你最终会得到一个这样的数组：

```
[1, 2, 3, undefined, undefined, undefined, ..., undefined, 4] 
```

为了节省内存，大多数运行时将转换`array`为“稀疏”数组。基本上，一个哈希表，就像普通的 JS 对象一样。一旦发生这种情况，对索引的读取或写入就会从简单的指针算术变为更复杂的算法，可能使用动态内存分配。

当然，不同的运行时使用不同的启发式方法来决定何时从一种实现转换为另一种实现，因此在某些情况下，针对 Chrome 进行优化可能会损害 Firefox 的性能。

在您的情况下，我最好的猜测是向后填充数组会导致 Firefox 使用稀疏数组，从而使其变慢。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-09-08T06:03:29.960

我不想给你这么简单的答案，但很简单：指令分支：http: [//igoro.com/archive/fast-and-slow-if-statements-branch-prediction-in-modern-processors/](http://igoro.com/archive/fast-and-slow-if-statements-branch-prediction-in-modern-processors/)

从我从基准测试中得到的信息来看，这些引擎的内部有些东西提供了处理器地狱的指令预测功能。

# java - Android html 5 应用程序中的空指针异常

> ID：12327963
> 
> 赞同：0
> 
> 时间：2012-09-08T04:14:39.313
> 
> 标签：java, android, html

我正在尝试创建我的第一个 android+html 5 应用程序。我的活动代码是：

```
import android.os.Bundle;
import android.app.Activity;
import android.webkit.WebView;

public class MainActivity extends Activity {

    WebView webView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        webView = new WebView(this);        
        String summary = "<html><body>HTML 5 Test</body></html>";
        webView = (WebView)findViewById(R.id.webView);
        webView.loadData( summary, "text/html; character=UTF-8", null);        
        setContentView(webView);
    }
} 
```

当我运行上面的代码时，它给出了空指针异常......

```
09-08 09:27:21.393: D/AndroidRuntime(562): Shutting down VM
09-08 09:27:21.393: W/dalvikvm(562): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-08 09:27:21.530: E/AndroidRuntime(562): FATAL EXCEPTION: main
09-08 09:27:21.530: E/AndroidRuntime(562): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rightquery.test/com.rightquery.test.MainActivity}: java.lang.NullPointerException
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.os.Looper.loop(Looper.java:137)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-08 09:27:21.530: E/AndroidRuntime(562):  at java.lang.reflect.Method.invokeNative(Native Method)
09-08 09:27:21.530: E/AndroidRuntime(562):  at java.lang.reflect.Method.invoke(Method.java:511)
09-08 09:27:21.530: E/AndroidRuntime(562):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-08 09:27:21.530: E/AndroidRuntime(562):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-08 09:27:21.530: E/AndroidRuntime(562):  at dalvik.system.NativeStart.main(Native Method)
09-08 09:27:21.530: E/AndroidRuntime(562): Caused by: java.lang.NullPointerException
09-08 09:27:21.530: E/AndroidRuntime(562):  at com.rightquery.test.MainActivity.onCreate(MainActivity.java:19)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.Activity.performCreate(Activity.java:4465)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-08 09:27:21.530: E/AndroidRuntime(562):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-08 09:27:21.530: E/AndroidRuntime(562):  ... 11 more 
```

**编辑：**布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"    
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="2dp"
        android:layout_marginLeft="2dp" />

</RelativeLayout> 
```

怎么了 ？

解决方案：

```
import android.os.Bundle;
import android.app.Activity;
import android.webkit.WebView;

public class MainActivity extends Activity {

    WebView webView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        webView = new WebView(this); 
        setContentView(R.layout.main);
        String summary = "<html><body>HTML 5 Test</body></html>";

        webView = new WebView(this);
        webView.loadData( summary, "text/html; character=UTF-8", null);        
        setContentView(webView);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T04:17:18.173

你需要 `setContentView(R.layout.youView);`在打电话之前做

```
webView = (WebView)findViewById(R.id.webView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:29:03.793

你这样打电话

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.XMLname);
       .....
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T05:10:32.110

在你的 onCreate 做改变

```
setContentView(R.layout.main);
webView = (WebView)findViewById(R.id.webView); 
```

# c - 通过 C 将 4 位整数中的 LSB 更改为 1

> ID：12327964
> 
> 赞同：0
> 
> 时间：2012-09-08T04:15:03.397
> 
> 标签：c, bitwise-operators

我收到一个数字 N，其中 N 是一个 4 位整数，我需要将其 LSB 更改为 1，而无需使用 C 更改数字中的其他 3 位。

基本上，都必须读XXX1。

所以可以说`n = 2`，二进制文件是`0010`. 我会将 LSB 更改为 1 以生成数字`0011`。

我正在努力寻找可以做到这一点的操作组合。我正在与：`!`, `~`, `&`, `|`, `^`, `<<`, `>>`, `+`, `-`, `=`.

这真的让我发疯了，我一直在玩`>>`/`<<`并`~`从`0xF`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:19:17.857

尝试

```
number |= 1; 
```

无论数字是多少，这都应将 LSB 设置为 1。为什么？因为按位 OR ( `|`) 运算符完全符合其名称的含义：它对两个数字的位进行逻辑或运算。因此，如果您有 1010b 和 1b（十进制的 10 和 1），那么运算符会执行以下操作：

```
 1 0 1 0
OR 0 0 0 1
=  1 0 1 1 
```

这正是你想要的。

为了您的信息，

```
number |= 1; 
```

声明等价于

```
number = number | 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:19:25.893

用于`x = x | 0x01;`将 LSB 设置为`1`

可视化

```
 ?  ?  ?  ?  ?  ?  ?  ?
   OR
      0  0  0  0  0  0  0  1
      ----------------------
      ?  ?  ?  ?  ?  ?  ?  1 
```

因此，除了 LSB 设置为 1 外，其他位将保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T04:20:31.250

使用按位或运算符`|`。它逐位查看两个数字，并返回通过对每个位执行 OR 生成的数字。

```
int n = 2;
n = n | 1;
printf("%d\n", n); // prints the number 3 
```

在二进制中，2 = 0010、3 = 0011 和 1 = 0001

```
 0010
OR 0001
-------
   0011 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T04:21:06.010

如果`n`不是`0`

```
n | !!n 
```

作品。

如果`n`是`0`，那么`!n`就是你想要的。

* * *

更新

花哨的一个班轮：P

```
n = n ? n | !!n : !n; 
```

# git - 为什么 Mac OS 的 SourceTree 不能让我以相同的方式分支两次？

> ID：12327973
> 
> 赞同：3
> 
> 时间：2012-09-08T04:16:49.063
> 
> 标签：git, branch

我是 Git 新手，我正在为 Mac OS 使用 SourceTree，并且对分支有疑问。这是一个非常小的项目，这是我第一次使用版本控制。到目前为止，我对它只有一个非常基本的了解。我通过单击“分支”创建的第一个分支从我的第二次提交创建一个分支，并且效果很好。然而，我第二次创建分支是在我的第一次提交之后，SourceTree 不会让我以同样的方式这样做。我不得不使用 Checkout 而不是 Branch，它创建了一个分离的头，然后我不得不命名新的分支。我想知道为什么它不允许我以同样的方式创建我的分支。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T19:40:36.763

如果您的 master 分支有 2 个提交，并且您从第二个提交创建第一个分支，则您的 HEAD 指向与 master 分支相同的提交，并且分支命令将从那里开始。

如果你想以第一次提交为起点创建第二个分支，你别无选择首先通过检查它来移动你的 HEAD （结果是你的 HEAD 将与主分支分离，因为它是指向不同的提交）。当您的 HEAD 指向适当的提交时，您可以继续创建分支，并且这个新分支将从第一个提交开始。

两种情况下创建分支的过程都是一样的，唯一的区别是你第一次的起点是master分支的最后一次commit并且你的HEAD是附加到这个分支上的（也就是说HEAD和master都指向相同的提交）。在第二个过程中，您想从不同的提交开始一个分支，只需将您的 HEAD 移动到另一个提交上，结果由**分离的 HEAD**指示。

希望这能帮助你更好地理解 git 背后的逻辑。

如果您想进一步了解 git，请查看本教程：[学习 git 分支](http://pcottle.github.io/learnGitBranching/)

这个教程真的很棒，将帮助你更好地理解 git 背后最重要的机制。

# java - 使用 docx4j 转换 docx -> pdf 时如何更改字体编码？

> ID：12327977
> 
> 赞同：2
> 
> 时间：2012-09-08T04:17:27.763
> 
> 标签：java, pdf, docx, docx4j, xdocreport

当我将 docx 文档转换为 pdf 时，我的国家字符转换为“#”标记。
有没有办法为pdf文档设置字体编码？

我过去使用过 xdocreport，它可以处理这个问题，但我在图像、页眉和页脚方面遇到了问题。

Docx4j 设法做到这一点，但不是字体。转换后，字体有 ANSI 编码，而我想有 windows-1250。有没有设置这个选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:19:18.783

我的问题是 - 在 linux 服务器上缺少正确的 True Type 字体。代替插入的默认字体（没有我的代码页）。

我通过 ttf-mscorefonts-installer 解决了安装默认 Ms Windows 字体的问题

在 debian 上：

```
apt-get install ttf-mscorefonts-installer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-29T07:30:12.607

我有同样的问题，发现正如你自己提到的，字体问题。系统上的字体需要支持您的编码。

例如：对于使用“Arial”字体的文档，德语变音符号显示为“？”。

我找到了另一种解决方案，以覆盖 PDF 字体编码，如下所示：

```
 //
    // read template
    //
    File docxFile = new File(System.getProperty("user.dir") + "/" + "Test.docx");
    InputStream in = new FileInputStream(docxFile);

    // 
    // prepare document context
    //
    IXDocReport report = XDocReportRegistry.getRegistry().loadReport(in, TemplateEngineKind.Velocity);
    IContext context = report.createContext();
    context.put("name", "Michael Küfner");

    // 
    // generate PDF output
    //
    Options options = Options.getTo(ConverterTypeTo.PDF).via(ConverterTypeVia.XWPF);
    PdfOptions pdfOptions = PdfOptions.create();
    pdfOptions.fontEncoding("iso-8859-15");
    options.subOptions(pdfOptions);     

    OutputStream out = new FileOutputStream(new File(docxFile.getPath() + ".pdf"));
    report.convert(context, options, out); 
```

尝试根据您的需要设置 pdfOptions.fontEndcoding 中的属性（在我的情况下为“iso-8859-15”）。

将此设置为“UTF-8”，这是默认的接缝，导致特殊字符出现同样的问题。

我发现的另一件事：

使用 Word 2007/2010 默认的“Calibri”字体，即使使用 UTF-8 编码也不会出现问题。可能 iText 中用于生成 PDF 的嵌入式 Type-1 Arial 字体不支持 UTF-8 编码。

# macos - 制作向导的最佳方法

> ID：12327978
> 
> 赞同：2
> 
> 时间：2012-09-08T04:18:20.137
> 
> 标签：macos, wizard

我需要制作一个包含多个交互式页面的向导，这些页面从用户那里收集数据。通过制作每个窗口来制作这么多页面是一项艰巨的工作。是否有任何简单的类或命令来管理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:23:26.830

您可以采取几种方法来做到这一点。首先，您可以使用`UINavigationController`允许您在多个视图控制器之间轻松移动的 a。如果您可以使用多个视图控制器，这可能是最好的选择。

要推送到导航堆栈中的下一个控制器，您可以使用：

```
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"someID"];
[self.navigationController pushViewController:controller animated:YES]; 
```

`UIScrollView`也是一种选择，但是当项目在屏幕上和屏幕外移动时需要仔细的手动内存管理，但是这可以在一个类中完成。

```
[arrayOfViews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx,BOOL *stop) {
    UIView *subView = [[UIView alloc] initWithFrame:CGRectMake(320 * idx, 0, 320, 480)];
    float randNum = arc4random() % 255;
    [subView setBackgroundColor:[UIColor colorWithRed:randNum/255.0 green:randNum/255.0 blue:randNum/255.0 alpha:1.0]];
    [myScrollView addSubview:subView];
    [myScrollView setContentSize:CGSizeMake(320 * (idx + 1), 480)];
}]; 
```

然后，您最后也是最灵活的选择是只制作主视图的子视图，您可以为每个项目在屏幕上的移动方式制作自己的自定义动画。

```
[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    [someSubview setTransform:CGAffineTransformConcat(CGAffineTransformMakeScale(0.5, 0.5), CGAffineTransformMakeTranslation(-300, -300))];
}completion:^(BOOL done){
   //some completion items
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:22:34.370

扩展 H2CO3 的评论，您可能希望使用[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)，假设允许用户随意倒退。然后，继续前进，您只需将一个新的 UIViewController 推入堆栈。

或者，您可以查看故事板，它可以让您连续定义整个事物，并使用 IB 进行转换。但是，无论如何，这些最终都会嵌入到 UINavigationController 中。

# json - 编辑 php.ini 以允许某些功能

> ID：12327980
> 
> 赞同：0
> 
> 时间：2012-09-08T04:18:43.093
> 
> 标签：json, php

好的，所以我一直在通过 localhost 在我的计算机上测试和构建网站。在我的电脑上一切正常！然后我想将它上传到我的 Godaddy 托管帐户。然后我得到一个错误。我使用 json_decode 作为我的 php.ini 中每个循环之一的参数。当我通过托管服务提供商运行我的网站时，它告诉我 foreach() 循环中有一个无效参数，例如 43。所以，我知道它与我的 php.ini 文件有关，所以我从我的电脑并将其粘贴到godaddy 上的php.ini 文件中，用于我的网站。然后 foreach() 循环起作用了！但是，随后各种地狱爆发了。会话问题等。所以，我的问题是，我需要添加什么才能使 json_decode 工作？

谢谢

这是我的托管服务提供商的 php.ini 文件：

```
register_globals = off
allow_url_fopen = off

expose_php = Off
max_input_time = 60
variables_order = "EGPCS"
extension_dir = ./
extension=json.so
upload_tmp_dir = /tmp
precision = 12
SMTP = relay-hosting.secureserver.net
url_rewriter.tags = "a=href,area=href,frame=src,input=src,form=,fieldset="

; Only uncomment zend optimizer lines if your application requires Zend Optimizer    
support

;[Zend]
;zend_optimizer.optimization_level=15
;zend_extension_manager.optimizer=/usr/local/Zend/lib/Optimizer-3.3.3
;zend_extension_manager.optimizer_ts=/usr/local/Zend/lib/Optimizer_TS-3.3.3
;zend_extension=/usr/local/Zend/lib/Optimizer-3.3.3/ZendExtensionManager.so
;zend_extension_ts=/usr/local/Zend/lib/Optimizer_TS-3.3.3/ZendExtensionManager_TS.so

; -- Be very careful to not to disable a function which might be needed!
; -- Uncomment the following lines to increase the security of your PHP site.

;disable_functions = "highlight_file,ini_alter,ini_restore,openlog,passthru,
;                 phpinfo, exec, system, dl, fsockopen, set_time_limit,
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T05:10:16.983

您不能只替换 php.ini 文件，因为它具有硬编码的路径。

例如，对于您的会话错误，很可能设置 session.save_path 正在引用一个不存在或权限不正确的目录。

您可以发布第 43 行的代码行吗？我猜你的本地 php.ini 没有显示错误，而 godaddy 配置显示。