# StackOverflow 问答 11943000-11943999

# c - 字符数组到C中的字符串？

> ID：11943003
> 
> 赞同：0
> 
> 时间：2012-08-13T22:03:54.387
> 
> 标签：c, string

我想将一组字符转换为一个字符串。

例子：

`char foo[2] = {'5', '0'};`-->`char* foo = "50";`

在 C 中执行此操作的最佳方法是什么？问题源于一个更大的问题，我试图从命令行输入中提取子字符串。例如，我想把`argv[1][0]`和`argv[1][1]`变成一个字符串，这样如果程序像这样运行......

```
$ ./foo 123456789 
```

我可以将“12”分配给一个`char*`变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:09:05.743

就像是：

```
char* foo_as_str = malloc(3);
memset(foo_as_str, 0, 3);
strncpy(foo_as_str, argv[1], 2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T22:10:16.123

重写您的示例，因为您无法`char[]`使用多个文字字符串初始化 a ：

```
char foo[3] = { '5', '0', '\0' }; // now foo is the string "50"; 
```

请注意，如果要保存字符串，则数组中至少需要*3 个*元素：附加元素用于空终止字符，这在 C 字符串中是必需的。我们上面的等价于：`foo``"50"`

```
char foo[3] = "50"; 
```

但是你不需要这个来提取前两个字符`argv[1]`，你可以使用[`strncpy`](http://en.cppreference.com/w/c/string/byte/strncpy)：

```
char foo[3];
foo[0] = '\0';

if ((argc > 1) && (strlen(argv[1]) >= 2)
{
    // this copies the first 2 chars from argv[1] into foo
    strncpy(foo, argv[1], 2);
    foo[2] = '\0';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T22:08:27.373

查看[strcat](http://pubs.opengroup.org/onlinepubs/007904875/functions/strcat.html)的手册页。注意覆盖常量字符串。

如果您只想将字符放在一起形成一个字符串，也可以这样做：

```
char foo[3];
foo[0] = '1';
foo[1] = '2';
foo[2] = 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T22:08:34.903

要创建一个字符串，您需要在两个字符之后添加一个空终止字节。这意味着它们后面的内存地址需要在您的控制之下，以便您可以写入它而不会弄乱其他任何人。在这种情况下，您需要为字符串分配一些额外的内存：

```
int length = 2; // # characters
char* buffer = malloc(length + 1); // +1 byte for null terminator
memcpy(buffer, foo, length); // copy digits to buffer
buffer[length] = 0; // add null terminating byte

printf("%s", buffer); // see the result 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T22:09:22.150

您可以使用`strcat`，但您必须确保目标缓冲区足够大以容纳结果字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T22:08:45.040

尝试使用`strcat()`.

```
 char *foo[2] = {"5", "0"}; /* not the change from foo[x] to *foo[x] */ 
  size_t size = sizeof(foo) / sizeof(foo[0]);
  char *buf = calloc(sizeof(char), size + 1);
    if(buf) {
      int i;
      for(i = 0; i < size; ++i)
    strcat(buf, foo[i]);
      printf("buf = [%s]\n", buf);
    } else {
      /* NO momeory. handling error. */
    } 
```

输出：

```
buf = [50] 
```

# java - Java 泛型中的错误

> ID：11943004
> 
> 赞同：0
> 
> 时间：2012-08-13T22:03:55.567
> 
> 标签：java, generics

我尝试了下面的行：

```
HashMap <Temp,<? extends Action> > p= new HashMap<Temp,  <? extends Action>>() 
```

Eclispe 给了我一个错误

> 此行有多个标记 - 标记“，”上的语法错误，此标记之后的预期类型 - 标记“，”上的语法错误，此标记之后的预期类型

我收到此错误的任何原因以及如何删除此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T22:06:55.697

拥有这个：

```
HashMap <Temp, ? extends Action > p= new HashMap<Temp,  *>(); 
```

您需要两种类型的地图。键的类型和值的类型。您不能用`<`&包围第二种（值）类型，`>`因为它是不允许的。

我还建议对接口进行编程，注意声明的类型是接口：

```
Map<Temp, ? extends Action > p = new HashMap<Temp, ? extends Action>(); 
```

编辑

正如所指出的，您不能使用通配符泛型类型实例化变量。请将 * 更改为您需要的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:05:25.413

这将编译：

```
Map<Temp, ? extends Action> p = new HashMap<Temp, Action>(); 
```

或者使用 Java 7：

```
Map<Temp, ? extends Action> p = new HashMap<>(); 
```

您在值类型参数中有额外的`<`和`>`，导致语法错误。除此之外，[您不能使用通配符作为类型参数来实例化泛型类型](https://stackoverflow.com/a/9147768/697449)。

您还会注意到我将变量更改为`Map`而不是-[对接口](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)`HashMap`而不是实现进行编程是一种很好的做法，就像[winged 的​​回答](https://stackoverflow.com/a/11943077/697449)提到的那样。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-13T22:11:51.513

程序接口！

```
Map<Temp, ? extends Action> p = new HashMap<Temp, ? extends Action>(); 
```

它的更好的做法。

我注意到这可能没有正确回答。问题在[这里](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)详细解释。对你有用的也许是

```
Map<Temp, ? super Action> p = new HashMap<Temp, Action>(); 
```

希望有帮助。

第三次编辑，我是新来写评论的，所以请注意确定这个过程是什么，这里是一个例子：

```
public void doSomething ()
{
    Map<A, ? super A> p = new HashMap<A, A>();

    A a1 = new A();
    A a2 = new A();

    // AS A CONSUMER
    // Not a problem because at runtime we'll know we can accept A.
    p.put(a1, new B());
    p.put(a2, new C());

    // AS A PRODUCER
    // what do I cast to? No way of knowing if its B or C.
    for (Object a : p.values())
    {
    }

    // Same deal as above is it B or C?
    p.get(a1);
}

class A{}

class B extends A {}

class C extends B {} 
```

# jquery - jquery在放置后取回图像

> ID：11943005
> 
> 赞同：0
> 
> 时间：2012-08-13T22:04:10.467
> 
> 标签：jquery

用户在字段中放置图像 url 后，img 标签的值会发生变化，用户可以将图像拖放到框的#centerhead 部分。现在我遇到的问题是在 img 被删除后它消失了，我想让 img 标签回到它的原始位置，准备好获取另一个图像 url。

```
function addToPart() {
    var URLText = document.getElementById("txtURLText");
    var bpart = document.getElementById("BodySelect");
    if (URLText.value != "") {
        var UT = URLText.value;

        var bpartValue; 
        switch (bpart.value) {
            case "1":
                bpartValue = "#centerhead";
                break;
            case "2":
                bpartValue = "#centerbody";
                break;
            case "3":
                bpartValue = "#RightArm";
                break;
            case "4":
                bpartValue = "#leftArm";
                break;
            case "5":
                bpartValue = "#legs";
                break;
            case "6":
                bpartValue = "#feet";
                break;         
        }
       //the function that appends the values to the table
        addToArea(bpartValue,UT);
    }

};
//this adds the picture to the table when the part had been choosen
function addToArea(bvalue,UT) {
$(bvalue).find('tbody')
.append($('<tr>')
    .append($('<td>')
        .append($('<img>')
            .attr('src', UT)
                .attr('id',UT)

        )
    )
);

};

 //this takes the picture URL and put the pic in the test image
function showPic() {
    var URLText = document.getElementById("txtURLText").value;
     document.getElementById("testImage").src=URLText;
  //this makes test image draggable
     $(function () {
         $("#testImage").draggable();
     });

     //TODO once the image is dropped it simply disapears.  Need to clone it back to it's orignal spot.
     $(function () {
         $("#centerhead").droppable({
             drop: function (event, ui) {
                 $("#centerhead").append(ui.draggable);
                 addToArea("#centerhead", URLText);
                 // $("#testImage").clone().appendTo('#dragging');
                 $("#dragging").append($('<img>')
            .attr('src', '')
                .attr('id', 'testImage')
                )
                 $("#txtURLText").attr('value', ''); 
             }
         });

     });

};

 <div id="test1D">
    <table id="wholeBody">
    <thead></thead>
    <tbody>
    <tr><td></td><td><table id="centerhead"><thead><tr><th>Head</th></tr></thead><tbody></tbody></table></td><td></td></tr>

    <tr><td><table id="RightArm"><thead><tr><th>Right Arm</th></tr></thead><tbody></tbody></table></td><td><table id="centerbody"><thead><tr><th>Body</th></tr></thead><tbody></tbody></table></td><td><table id="leftArm"><thead><tr><th>LeftArm</th></tr></thead><tbody></tbody></table></td></tr>

     <tr><td></td><td><table id="legs"><thead><tr><th>Legs</th></tr></thead><tbody></tbody></table></td><td></td></tr>

     <tr><td></td><td><table id="feet"><thead><tr><th>Feet</th></tr></thead><tbody></tbody></table></td><td></td></tr>

    </tbody>

    </table>
   <div id="dragging">
    <img alt="Place image here" src=""  id="testImage"/>
    </div>
  <input id="txtURLText" type="text" onchange="showPic()" />
   <select id="BodySelect" onchange="addToPart()">
        <option></option>
       <option  value="1">head</option>
            <option value="2">body</option>
            <option value="3">RightArm</option>
            <option value="4">LeftArm</option>
            <option value="5">legs</option>
            <option value="6">feet</option>
        </select>

    <p>
        <input type="submit" value="Create" />
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:45:44.037

好吧，假设您正在使用 jQuery 可拖动和可放置函数。

首先，您需要为图像声明一个持有者（当用户从​​输入框中输入图像 url 时更改的那个）并执行以下操作：

```
 var  $holder_image = $( "div#image_draggable" ),

$holder_image.draggable({
    revert: "invalid",
    helper: "clone",
    cursor: "move"
}); 
```

如您所见，一旦声明了 image_draggable 容器，声明助手**克隆**很重要，这意味着该容器可以多次拖放。

在您必须使用以下内容声明受体（可以丢弃图像的区域）之后：

```
$areas_to_drop = $( ".image_holders" ); // this selector select all possible containers where the image can be dropped
$areas_to_drop.droppable({
        accept: "#image_draggable",
        drop: function( event, ui ) {
           // Here you add the necessary functionality once the image is dropped. It's an event. Not required in case there's nothing to do.
        }
}); 
```

因此，基本上，有了这个，您可以在想要保留原始图像的时间拖放一张图像。

如果用户更改图像 url，来自 #image_draggable 持有者的内容将更改并准备好拖放。

希望这有帮助。

# ios - 如何解决通知和表格视图问题？

> ID：11943007
> 
> 赞同：0
> 
> 时间：2012-08-13T22:04:12.213
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, nsnotificationcenter

我有一个接收通知并填充数组的视图控制器。然后将其显示在表格视图中。问题是 tableview 只显示最后添加的对象。如果我然后推送到新视图并再次返回，整个数组将显示在表中。我认为可能在 viewDidLoad 之后调用了 receiveNotification 方法，这是有道理的。我尝试使用 [myTableView reloadData] 重新加载数据；这没有用。我也试过一个选择器，还有一个有延迟的选择器。
有没有人尝试过并且成功了，如果是这样，你能告诉我怎么做吗？谢谢您阅读此篇。

编辑： - 我知道这段代码充满了垃圾，只是我最近彻底改变了我的应用程序，在整理之前我正在处理最后一点！:)

```
-(void)receiveNotification:(NSNotification *)notification
{

if (!path) {

    path = [[NSBundle mainBundle] pathForResource:@"OverallDictionary" ofType:@"plist"];
    theDictionary = [[NSDictionary alloc] initWithContentsOfFile:path];
}

NSArray *temporaryArray = [theDictionary allKeys];

for (id key in temporaryArray) {
    if ([[notification name] isEqualToString:key]) {
        if (!allCompletedTopics) {
            allCompletedTopics = [[NSMutableArray alloc] init];
        }
        if (![allCompletedTopics containsObject:[[theDictionary valueForKey:key] valueForKey:@"Title"]]) {
            [allCompletedTopics addObject:[[theDictionary valueForKey:key] valueForKey:@"Title"]];
            defaults = [NSUserDefaults standardUserDefaults];
            [defaults setObject:allCompletedTopics forKey:@"hi"];
            theFinalScore++;
            [[NSUserDefaults standardUserDefaults] setInteger:theFinalScore forKey:@"theFinalScore"];
            [self updateTheProgressView];

        }
    }
}
NSLog(@"received %@", allCompletedTopics);
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadTheTable" object:nil];

}

- (void)viewDidLoad
{

[super viewDidLoad];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadTable:) name:@"reloadTheTable" object:nil];

// Do any additional setup after loading the view.
allCompletedTopics = [[[NSUserDefaults standardUserDefaults] objectForKey:@"hi"] mutableCopy];

[defaults setObject:allCompletedTopics forKey:@"theKey"];

if (!path) {
    path = [[NSBundle mainBundle] pathForResource:@"OverallDictionary" ofType:@"plist"];
    theDictionary = [[NSDictionary alloc] initWithContentsOfFile:path];
    //  NSLog(@"Created on view did load");
}

NSString *path1 = [[NSBundle mainBundle] pathForResource:@"Keys" ofType:@"plist"];
NSArray *theKeys = [[NSArray alloc] initWithContentsOfFile:path1];

for (NSString *theString in theKeys) {
    //  NSLog(@"%@", theString);
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveNotification:) name:theString object:nil];

}
theFinalScore = [[NSUserDefaults standardUserDefaults] integerForKey:@"theFinalScore"];

[self updateTheProgressView];
NSLog(@"%@", allCompletedTopics);
//   [myTableView reloadData];

}

- (void)reloadTable:(NSNotification *)notification
{
[myTableView reloadData];
NSLog(@"hi");
} 
```

-（无效）创建数据{

```
if (!levelThree) {
    levelThree = [[NSMutableArray alloc] init];
}

levelThreeFinal = [[NSMutableArray alloc] initWithCapacity:48];

for (NSString *object in allCompletedTopics) {
    if (([object rangeOfString:@"level 3"].location != NSNotFound) && (![levelThree containsObject:object]))
    {
      //  NSLog(@"%@", object);

        [levelThree addObject:object];
        NSString *theTemp = [object substringToIndex:object.length - 8];
        [levelThreeFinal addObject:theTemp];

    }
    levelThreeDict = [NSDictionary dictionaryWithObject:levelThreeFinal forKey:@"Levels"];
        }

allLevels = [[NSMutableArray alloc] initWithObjects:levelThreeDict,
             //levelFourDict,
             //levelFiveDict,
             //levelSixDict,
             nil];

} 
```

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { return [[[allLevels objectAtIndex:section] objectForKey:@"Levels"] count]; //返回2；}

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return allLevels.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    //  cell.textLabel.text = [allCompletedTopics objectAtIndex:indexPath.row];

    NSDictionary *dictionary = [allLevels objectAtIndex:indexPath.section];
    NSArray *array = [dictionary objectForKey:@"Levels"];
    NSString *cellValue = [array objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    NSString *theTitle = [[NSString alloc] init];

    switch (section) {
        case 0:
            theTitle = @"Level 3";
            break;
        case 1:
            theTitle = @"Level 4";
            break;
        case 2:
            theTitle = @"Level 5";
            break;
        case 3:
            theTitle = @"Level 6";
            break;
        default:
            break;
    }
    //return theTitle;

    return @"Your progress so far!";
} 
```

# titanium - 钛传递图像到画布

> ID：11943012
> 
> 赞同：0
> 
> 时间：2012-08-13T22:04:36.183
> 
> 标签：titanium, titanium-mobile

我在磁盘上有一张图片，我想将其加载到 html 画布中。我已经搜索过，但找不到任何关于这样做的信息。可能吗？

# c# - MVP：一个复杂表单（winforms）的多个视图/演示者？

> ID：11943015
> 
> 赞同：2
> 
> 时间：2012-08-13T22:04:56.673
> 
> 标签：c#, winforms, mvp

我在遗留应用程序的复杂表单中添加了一些功能。它已经有一个巨大的表单，其中包含许多控件和选项卡以及 cs 文件背后的巨大代码。我试图避免创建一个巨大的视图/演示者。为表单的每个功能添加视图（和演示者）是一种好习惯吗？有没有更好的解决方案？由于用户的要求，我无法将表格分成多个表格。

表单定义将如下所示，

```
public partial class frmMyForm 
    : IView1, IView2, IView3, IView4, IView5, 
      IView6, IView7, IView8, IView9, IView10
{
    .... 
```

每个`IViewN`都有不同的功能 - 例如，一个用于可视化数据变化比较，一个用于在网格中显示数据，一个用于汇总统计......

* * *

为什么这篇文章被否决了？评论你的理由。如果您不知道 MVP 是什么，请不要对这个问题投反对票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T20:51:33.277

没有什么可以说明表单、视图和演示者之间存在一对一的关系。事实上，将表单的各个部分分解为多个“视图”（我最常在用户控件中看到这一点；但不一定非要如此）并且每个视图都有一个演示者，这是一件非常合理的事情. 最常见的形式是视图；但同样，这不是强制性的。

正如您所说，这意味着要避免使用一些可怕的全看\全做 Presenter，这会导致代码更具凝聚力并减少单元测试的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:29:49.070

如果我理解正确，您正在使用旧版应用程序和现有屏幕。在这里，您需要添加一些新功能。如果是这种情况，那么添加必须已经有可用于此屏幕的模型、演示者和视图。如果是这种情况，您别无选择，只能继续使用相同的架构，即使您的新功能使 View 和 Presenter 变得巨大。

但如果我错了，你自己实现了屏幕，那么你可以用他们自己的模型、演示者和视图来引入用户控件。但是请确保您的用户控件彼此独立，否则在用户控件之间建立桥梁以在它们之间进行通信将再次成为问题和混乱。

但老实说，即使文件很大，我也更愿意为此任务创建一个演示者和视图。通常，用户控件用于创建可在多个地方使用的通用控件。使用您的方法，如果您正在创建的用户控件之间存在大量通信，您可能会折腾。但是，是的，如果用户控件的创建有一个很好的计划，那么这可以得到缓解。但对我来说，最好只有一个演示者和视图，除非它们处于紧密耦合的情况。当你有像 resharper 这样的插件时，大文件不应该成为问题。

# javascript - 复制保护

> ID：11943017
> 
> 赞同：-1
> 
> 时间：2012-08-13T22:05:11.797
> 
> 标签：javascript, jquery, copy-paste

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T22:10:27.677

Render the code to an image and display that.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T22:13:15.583

You could use this CSS to disable selection:

```
pre {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

It's hard to copy what you can't select.

However, as the comments have mentioned, there are ways around...

Here's a [**DEMO**](http://jsfiddle.net/f9Vcr/):

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T22:29:22.863

In combination with other techniques here, you could HTML-encode your content so that "view source" becomes inconvenient to use. For example:

```
​&amp;#x48;&#x65;​​​​​​​​​​​​​​​​​​​​​&amp;#x6c;&#x6c;&#x6f;&#x20;​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&amp;#x57;&#x6f;&#x72;&#x6c;&#x64;​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

renders as

```
Hello World 
```

If your students write a program to decode the hex characters in the HTML-encoded version to plain ASCII, give them extra credit. :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T22:08:04.260

Not possible. You could display it inside a Flash movie, or as pre-rendered images sliced up into multiple smaller sections to prevent OCR, but then obvious workaround is to then take a screen capture and OCR that. In other words, it's easier to defeat any security system you put in place than it is to create the system in the first place

The attacker will ALWAYS have the upper hand, because you're handing them the keys to the vault by simply letting them view the protected content.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T22:23:09.763

Could you insert invisible characters into the HTML code so if one copies it, it would be a pain to remove all those characters that would cause syntax errors but you wouldn't ever notice it unless you copied into a text editor. They would be randomized characters between every actual code character.

Visible code:

```
function foo() 
```

Actual HTML:

```
f!u#n%c^t&i*o(n) (f@o$o%(^)& 
```

Where each of the symbols are invisible unicode characters. I don't know how many of those there are but I tried the [ZERO WIDTH NO-BREAK SPACE](http://www.cs.tut.fi/~jkorpela/chars/spaces.html) and it seemed to work. It would be an inconvenience. That's the best we can do, **inconvenience**, there is no foolproof way to stop somebody from copying the code.

To clarify, to anyone reading the page, they see the first line. To somebody who copied the text into a text editor, they'll either see squares or nothing but the code should not compile.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T22:23:10.587

Another option, similar to images, but would take up a lot less space and bandwidth would be to grab draw the code on a canvas (possibly after getting it via ajax). Requires up-to-date browsers, and more programming, but would create clean text that cannot be easily copied.

# django - 防止用户直接访问 django 中的重定向 URL

> ID：11943020
> 
> 赞同：1
> 
> 时间：2012-08-13T22:05:34.380
> 
> 标签：django

有些 URL 仅用于在操作成功后重定向用户。（例如，提交反馈后的感谢页面）。

问题是这些页面可以直接访问。

有没有办法防止这种情况？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:26:57.217

URL 由视图处理，因此请确保视图仅在它所做的最后一件事是对登录用户的成功操作时才满意。否则引发 Http404。

只需在视图中检查用户的会话变量即可。逻辑类似于：

shop.html：用户点击“post”来购买.html

buy.html 视图向用户收费，在会话中设置“刚买了东西”，重定向到thanks.html

查看Thanks.html 检查“刚刚购买的东西”会话变量，如果设置为404，则将其清除，并在成功时为响应呈现模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:48:16.230

我建议这样做[的消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T23:49:41.983

如果用户不提供特定的 GET 参数，您可以在视图中执行一些非常简单的操作，例如重定向：

```
if not request.GET.get('show', False):
     # do redirection
else:
     # render the page 
```

所以该 URL 只能通过`/my-url/?show=true`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-08T22:41:58.890

```
def get_referer(request):
    referer = request.META.get('HTTP_REFERER')
    if not referer:
        return None
    return referer 
```

然后在任何视图中：

```
def my_view(request):
    if not get_referer(request):
        raise Http404
    return render(request, 'sample.html', {}) 
```

在这里，我们假设如果没有引用者（无），则表示该人在浏览器中输入了 URL。

# asp.net - 使用 HttpClient 进行测试时，Task.Run 永远不会完成

> ID：11943021
> 
> 赞同：7
> 
> 时间：2012-08-13T22:05:35.730
> 
> 标签：asp.net, mongodb, asynchronous, asp.net-web-api, mongodb-.net-driver

今天我在使用异步 ApiControllers 创建 Web API 时遇到了问题。我正在使用 MongoDB，由于 C# 驱动程序不支持异步，我尝试在我的存储库层中实现它。

Building 存储库中生成的方法如下所示：

```
public async Task<IEnumerable<Building>> GetAll()
{
    var tcs = new TaskCompletetionSource<IEnumerable<Building>>();

    await Task.Run(() => {
        var c = this.MongoDbCollection.FindAll();
        tcs.SetResult(c);
    });

    return await tcs.Task;
} 
```

现在，当使用 NUnit 自行测试存储库时，这非常有效。

但是当从控制器（使用 HttpClient）进行测试时，它永远不会在运行后进入“返回”行`tcs.SetResult(c)`。测试一直运行，直到我手动中止它。

当我删除 Task.Run 代码并同步执行所有操作时，一切正常：

```
public async Task<IEnumerable<Building>> GetAll()
{
    var c = this.MongoDbCollection.FindAll();

    return c;
} 
```

有谁知道为什么我在测试**存储库 + 数据库**和测试**控制器 + 存储库 + 数据库**时会遇到不同的行为？

**控制器**方法如下所示：（`buildingRepository`使用 Ninject 在构造函数中注入）

```
public async Task<HttpResponseMessage> Get()
{
    var result = await this.buildingRepository.GetAll();
    return Request.CreateResponse(HttpStatusCode.OK, result);
} 
```

编辑：这里也是测试方法。第一个是不工作的：（`this.client`是一个 HttpClient 对象，其 accept-header 设置为`"application/json"`）

```
[Test]
public void Get_WhenBuildingsExist_ShouldReturnBuilding()
{
    var task = this.client.GetAsync("/api/building/");

    var result = task.Result.Content.ReadAsStringAsync().Result;

    var o = JsonConvert.DeserializeObject<IEnumerable<Building>>(result);

    Assert.That(o.Any());
}

[Test]
public void Get_WhenBuildingsExist_ShouldReturnAtLeastOneBuilding()
{
    var buildings = this.buildingRepository.GetAll().Result;

    Assert.That(buildings.Any());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:08:46.740

我读过一篇文章，解释了为什么`.Results`从异步任务调用是一个坏主意，但我目前没有它可用。基本上，您这样做是在扼杀异步处理。尝试如下更改您的测试：

```
[Test]
public void Get_WhenBuildingsExist_ShouldReturnBuilding()
{
    var task = this.client.GetAsync("/api/building/");

    var resultTask = task.Result.Content.ReadAsStringAsync();
    resultTask.Wait();

    var result = resultTask.Result;
    var o = JsonConvert.DeserializeObject<IEnumerable<Building>>(result);

    Assert.That(o.Any());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T12:23:36.950

最好的选择是升级到支持异步单元测试的 NUnit 版本，并将所有`Result`/`Wait`调用更改为`await`：

```
[Test]
public async Task Get_WhenBuildingsExist_ShouldReturnBuilding()
{
  var content = await this.client.GetAsync("/api/building/");
  var result = await content.ReadAsStringAsync();
  var o = JsonConvert.DeserializeObject<IEnumerable<Building>>(result);

  Assert.That(o.Any());
} 
```

如果这是不可能的（例如，在撰写本文时，Xamarin 仍在运行非常旧版本的 NUnit），那么您可以[`AsyncContext`从我的 AsyncEx 库](http://nitoasyncex.codeplex.com/wikipage?title=AsyncContext)中使用：

```
[Test]
public void Get_WhenBuildingsExist_ShouldReturnBuilding()
{
  var o = AsyncContext.Run(async () =>
  {
    var content = await this.client.GetAsync("/api/building/");
    var result = await content.ReadAsStringAsync();
    return JsonConvert.DeserializeObject<IEnumerable<Building>>(result);
  });

  Assert.That(o.Any());
} 
```

# php - 将/地理编码地址转换为经纬度坐标 - 谷歌地图的蜘蛛侠

> ID：11943022
> 
> 赞同：0
> 
> 时间：2012-08-13T22:05:42.727
> 
> 标签：php, javascript, mysql, google-maps, google-maps-api-3

我正在尝试在我的代码中实现 spiderfier，但我在将字符串地址转换为（lat lon）坐标时遇到了一些困难。

演示：http: [//jawj.github.com/OverlappingMarkerSpiderfier/demo.html](http://jawj.github.com/OverlappingMarkerSpiderfier/demo.html)

文档：[https ://github.com/jawj/OverlappingMarkerSpiderfier](https://github.com/jawj/OverlappingMarkerSpiderfier)

**这就是我从数据库中获取地址的方式，现在我需要将其转换为（Lat，Lon）格式**

```
<?php 
  $locations = new locations;
  $userid = '1';
  $cityArray = $locations->pastLocations($userid);
  $title = $locations->pastTitles($userid);
  $length = count($cityArray);
?>

//now that I have the cityArray acquired from php, I encode them for javascript
<script>
var cityArray= <?php echo json_encode($cityArray); ?>;
var title = <?php echo json_encode($title); ?>; 
```

好的，所以现在我的地址在一个数组中。spiderfier 的示例使用以下方法生成随机位置（足够接近以重叠）

```
var baseJitter = 2.5;
var clusterJitterMax = 0.1;
var rnd = Math.random;
var data = [];
var clusterSizes = [1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2,2, 3, 3, 4, 5, 6, 7, 8, 9, 12, 18, 24];
for (var i = 0; i < clusterSizes.length; i++) {
GClientGeocoder.getLatLng()
var baseLon = -1 - baseJitter / 2 + rnd() * baseJitter;
var baseLat = 52 - baseJitter / 2 + rnd() * baseJitter;
var clusterJitter = clusterJitterMax * rnd();
for (var j = 0; j < clusterSizes[i]; j ++) data.push({
  lon: baseLon - clusterJitter + rnd() * clusterJitter,
  lat: baseLat - clusterJitter + rnd() * clusterJitter,
  h:   new Date(1E12 + rnd() * 1E11).toString(), //this is the title
  d:   Math.round(rnd() * 100) + '% happy'
});
} 
window.mapData = data; 
```

**这是 spiderfier 用来绘制数据数组的代码。这是我在生成它使用的数据数组时遇到问题的部分**

```
var bounds = new gm.LatLngBounds();

  for (var i = 0; i < window.mapData.length; i ++) {
    var datum = window.mapData[i];
    var loc = new gm.LatLng(datum.lat, datum.lon);
    bounds.extend(loc);
    var marker = new gm.Marker({
      position: loc,
      title: datum.h,
      map: map,
      icon: iconWithColor(usualColor),
      shadow: shadow
    });
    marker.desc = datum.d;
    oms.addMarker(marker);
  }
  map.fitBounds(bounds); 
```

假设我有一个可以输入地理编码的数组，我如何将地址（例如德克萨斯州达拉斯）转换为可以与 spiderfier 一起使用的（lat lon）格式？请记住，这个数组中有多个地址，所以我必须循环遍历并将每个地址以某种方式推送到数据数组中。这主要是我感到困惑的地方。

谢谢！

**编辑 - 我试图制作一些循环通过我的 cityArray 并对每个进行地理编码的代码，然后将其插入一个名为 data 的数组中，但不幸的是它没有用**

这是代码。当我使用 document.write(data) 时，什么都没有显示。我也没有收到任何错误，所以我不确定我做错了什么。

```
var data = [];
for (var i = 0; i < cityArray.length; i++) {
    //document.write(cityArray[i]);
    geocoder.geocode( { 'address': cityArray[i] }, function(results, status) { //use latlang to enter city instead of coordinates 
        if (status == google.maps.GeocoderStatus.OK) {
            data.push({
                position:results[0].geometry.location,
                h: 'test',
                d: 'test'
            });
          }
          else {
            alert("Geocode was not successful for the following reason: " + status);
            }   
        });  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:12:37.227

您的问题是如何将地址转换为地理坐标（纬度和经度）以用于谷歌地图。

将地址转换为坐标的过程称为地理编码。

Google Maps API v3 包含一个[客户端地理编码](https://developers.google.com/maps/documentation/javascript/geocoding)器，供用户输入地址时使用。

还有一个[地理编码网络服务](https://developers.google.com/maps/documentation/geocoding/)供服务器使用。

两者都受配额和速率限制。

请参阅[文档中的这篇文章，](https://developers.google.com/maps/articles/geocodestrat)了解它们的使用说明以及何时适用的讨论。

如果您有数据库，最理想的选择是在将地址输入数据库时​​对其进行地理编码，然后使用数据库中的坐标放置标记，而不是“即时”对它们进行地理编码。

# node.js - 如何在 Node.js 中进行不安全的 HTTPS 调用

> ID：11943024
> 
> 赞同：4
> 
> 时间：2012-08-13T22:06:00.700
> 
> 标签：node.js, curl, https, insecure-connection

在 Curl 中，我可以使用 -k 来执行不安全的 SSL 连接和传输。但是，在**node.js**中，我检查了 HTTPS 文档。我找不到任何可以做到的选项。

我需要这个的原因是我需要调用远程服务器。我有证书和密码。它可以连接。但是，由于证书的 url 与主机不同，因此安全检查失败。好吧，由于某些操作原因，证书必须是那样的，我无法更改它。我尝试将 http.options.hostname 与证书中的相同。但是，它也失败了。

那么，我可以使用哪些其他选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T14:03:25.060

尝试`rejectUnauthorized`以下选项`https.request`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-18T15:04:29.333

我无法开始`node-curl`工作，但将`NODE_TLS_REJECT_UNAUTHORIZED`env 变量设置为 0 有帮助。我使用该`request`库发出 HTTPS 请求。

[https://github.com/visionmedia/superagent/issues/205#issuecomment-21669569](https://github.com/visionmedia/superagent/issues/205#issuecomment-21669569)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T19:58:28.937

通过不安全的 SSL 证书解决 https 的最佳方法是使用 node-curl 模块并将**SSL_VERIFYPEER**设置为*false*。

```
var http = require('http');
var curl = require('node-curl');

http.createServer(function(request,response){

    var url = 'https://url';
    url += request.url;

    console.log(url);

    curl(url,
        { 
            SSL_VERIFYPEER : 0
        },
        function(err){
            response.end(this.body);
        })

}).listen(8000); 
```

# java - 带有 MediaTracker、线程和计时器的 Java 动画小程序

> ID：11943032
> 
> 赞同：0
> 
> 时间：2012-08-13T22:06:55.977
> 
> 标签：java, multithreading, animation, timer, applet

我对我的动画项目有 3 个问题。

1.  程序的结构是否正确（见下文）
2.  我的第一张图片（来自数组）表现不正常。有时它会弹出然后消失，然后其余图像正确显示。
3.  如何控制音频剪辑何时开始播放。有时听起来像是一根针穿过唱片……？

关于计划的结构：以下是否按正确的顺序排列：

在初始化：

1.  设置小程序大小。
2.  运行具有睡眠时间的计时器任务
3.  获取声音文件。
4.  从数组中获取图像。
5.  初始化 MediaTracker 对象并告诉它“等待所有”图像。
6.  播放声音文件。

IN START(Graphics g) 1.绘制小程序并加载数组的第一个图像

IN START: 1\. 检查线程是否为空值，如果不是空值，则启动它们

IN RUN: 1\. 使用变量“iPictureNumber”按顺序遍历图像，也使用 repaint 和 Thread.sleep 方法

更新中： 1\. 再次绘制小程序。

* * *

这段代码是我没有使用线程的另一个程序的更新版本，所以我不确定这是否是正确的结构。我的目标是在这种简单的程序中使用最佳实践。如果需要，我可以在 zip 文件中提供图像和声音。请指教，提前谢谢。这是代码：

// 带有图像数组和 1 个声音文件的 Java 动画项目，使用线程

```
 import java.net.*;
 import java.io.*;
 import java.lang.*;
 import java.awt.*;
 import java.awt.event.*;
 import java.awt.Frame;
 import java.awt.Graphics;
 import java.awt.Image;
 import java.awt.MediaTracker;
 import java.applet.Applet;
 import java.applet.AudioClip;
 import java.util.*;

 public class c_TrainAnimation extends Applet implements Runnable 
  {
     Image trainAndBush[];
     int totalImages = 17, 
     currentImage = 0,             // Set current image array subscript to 0
     sleepTime = 900;
     Image imageCurrent;  // Set to the matching image in "trainAndBush" Array
     MediaTracker myImageTracker;
     Timer myTimer; 
     Thread threadTrainAnimation = new Thread(this);
     Thread threadSoundFile = new Thread(this); 
     AudioClip mySound; 

     public void init()
     {
    setSize(400,400);   

        myTimer = new Timer(true);
    myTimer.schedule( new TimerTask() 
          { 

              public void run() 
               { repaint();}

            } // end TimerTask

               ,0,sleepTime);

       mySound = getAudioClip(getDocumentBase(), "onpoint.au");
       trainAndBush = new Image[ totalImages ];

       // Load the array of images into the Applet when it begins executing
        for( int i = 0; i  < trainAndBush.length; i++ )
       {    
             trainAndBush[i] = getImage(getDocumentBase(),
              "Hill" + (i + 1) + ".jpg" );      

        myImageTracker = new MediaTracker( this ); 

        // Give the images an ID number to pass to MediaTracker
        myImageTracker.addImage(trainAndBush[i], i);

        // Tell MediaTracker to wait until all images are loaded
          try
    {
        myImageTracker.waitForAll();
    }
    catch(Exception e) {}

         mySound.play();

         }   // end for loop
     }       // end init

     // check threads for null values and then start threads
     public void start()
      {
     if (threadTrainAnimation != null )
        threadTrainAnimation.start();
     if (threadSoundFile != null )
    threadSoundFile.start();
      }

     // Draw the applet with the first image of the array
     public void start(Graphics g)
      {
     g.drawImage(trainAndBush[0],50,50,300,300, this );
     currentImage = 0;                       
      }

      // Set "imageCurrent"to appropriate "trainAndBush image" in the array and_
         loop through  
     public void run()
       {
     int iPictureNumber[] = {0, 1, 2, 3,4,5,6,7,8,9,10,11,12,13,14,15,16};
       while( true )
    {   
          for( int i = 0; i < iPictureNumber.length; i++ )
           {
         imageCurrent = trainAndBush[iPictureNumber[i]];
         repaint();
       try
        {
         Thread.sleep( sleepTime ); 
        }
        catch( InterruptedException e) {}

         }  // end for loop
       }   // end while statement
     }  // end run 

     public void update(Graphics g)
      {
    g.drawImage( imageCurrent, 50, 50, 300, 300, this );
      }

    } // end of Applet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:58:17.007

我不会使用`Applet`，使用`JApplet`，它会立即解决几十个问题；）

我可能会为 and 使用单独的`Runnables`，但过去我对声音没有太多经验。我看到的问题是你有两个线程同时访问代码部分做同样的事情。这只是把事情弄得一团糟。`threadTrainAnimation``threadSoundFile`

您需要弄清楚如何同步声音和动画。

`java.util.Timer`对于您要达到的目标，使用是不正确的，考虑到您`threadTrainAnimation`正在运行，这也是矫枉过正，因为他们通常在做同样的事情。在这种情况下，我可能会摆脱它。将来，您最好使用它，`javax.swing.Timer`因为它为`Event Dispatching Thread`

我个人不会`init`像您那样以这种方法加载我的资源。这将减慢小程序的加载速度并使用户感到不安。您最好放置一个漂亮的“加载”图像并使用 a`Thread`来执行加载。完成后，使用类似的东西`SwingUtilities.invokeLater`开始动画。

不要重写该`update`方法，而应该重写该`paint`方法。

也有可能图像被更改得更快，然后可以被绘制，您可能也想考虑一下 - 即该方法可能会在调用`run`之前执行多次`paint`

作为一个建议，我会通读

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)
*   [如何制作小程序](http://docs.oracle.com/javase/tutorial/uiswing/components/applet.html)（因为他们在这里讨论动画）

如果你对动画很认真，我也会去看看

*   [时序框架](http://java.net/projects/timingframework)和/或
*   [三叉戟](http://kenai.com/projects/trident/pages/Home)

哪些是 Java 的动画框架

# php - 如何使用 Facebook 登录/注册我的网站

> ID：11943037
> 
> 赞同：1
> 
> 时间：2012-08-13T22:07:32.497
> 
> 标签：php, facebook, facebook-graph-api

我有一个带有标准 PHP 登录系统的网站，没什么特别的，但希望允许人们使用 Facebook 登录和/或注册它，但没有成功。

有很多选择，我不知道该用哪一个。我相当肯定我可以让正确的工作，但我真的不知道从哪里开始。

我已经成功注册了一个应用程序并获得了一个应用程序密钥和密钥。然后我尝试了 facebook 登录按钮，如下所示：[https](https://developers.facebook.com/docs/guides/web/#login) ://developers.facebook.com/docs/guides/web/#login - 但这似乎并不理想，因为我不确定如何存储数据。

然后我检查了 Graph API，我认为这就是我需要的。我的代码能够给我一个 access_token，然后我可以将其存储在 mySQL 数据库中。然后我可以访问[https://graph.facebook.com/me?access_token=HOOP_DE_DOOT_DE_FRUIT](https://graph.facebook.com/me?access_token=HOOP_DE_DOOT_DE_FRUIT)并获得一个很大的 JSON 列表，这显然与我要求的权限有关。

access_token 方法是正确的方法吗？当然，一旦我拥有它，我可以将令牌放入数据库中，将其与电子邮件地址一起存储，然后访问用户的信息，但我不确定这对于登录是否安全，尽管它会加快注册速度因为我可以预先填写所有字段。

假设我可以成功获取它并将其存储在具有相应电子邮件地址的 mySQL 数据库中，我应该如何使用 access_token 实际登录用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:50:52.237

如果您尝试使用您的数据库登录用户，您希望获取他们的用户 ID，您可以使用 PHP 执行此操作，如下所示：

```
require_once(BASE_PATH . "facebook.php");
$facebook = new Facebook( array('appId'=>'appId', 
                        'secret'=>'secret', 
                        'cookie'=>false) );
$fbid = $facebook->getUser(); 
```

或者您可以像这样在前端登录它们：

```
FB.login(function(response){
        //Log them in
            if(response.authResponse){
            //They're now logged in
                var uid = response.authResponse.userID;
            }
} 
```

然后使用 ajax 调用或其他东西将 id 传递回后端。

# apache - EC2 LAMP 上的 ssl 虚拟主机问题

> ID：11943039
> 
> 赞同：0
> 
> 时间：2012-08-13T22:07:45.067
> 
> 标签：apache, ssl, amazon-ec2, virtualhost

我在我的实例`SSL`上遇到问题 我的虚拟主机阻止工作，我没有任何关于原因的线索。我的文件夹里 有一份礼物。 我似乎没有看到任何错误日志里面 也为空`virtual hosts``EC2` `LAMP`
`service httpd start``[FAILED]`
`ssl.conf``conf.d`

`/var/log/httpd`
`ssl_engine.log`

```
<VirtualHost *:443>
        ServerName app.mydomain.com
        DocumentRoot /var/www/app.mydomain.com
        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/certificate.crt
        SSLCertificateKeyFile /etc/ssl/certs/app_mydomain_com.key
        SSLCACertificateFile /etc/ssl/certs/mydomain.ca.crt
        ErrorLog /var/log/ssl_engine.log
</VirtualHost> 
```

我可以执行任何测试以更好地了解错误可能来自哪里？

我发现当我摆脱`ssl.conf`并且任何带有 apache 的虚拟域`<VirtualHost *:443>`都将启动时，否则什么都不会发生，我似乎找不到任何错误日志。

**更新：** 我把它拿出来了`ssl.conf`，apache 现在将启动。
向后工作以查看这是如何产生错误的

```
<VirtualHost _default_:443>
    ErrorLog logs/ssl_error_log
    TransferLog logs/ssl_access_log
    LogLevel warn
    SSLEngine on
    SSLProtocol all -SSLv2
    SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW

    <Files ~ "\.(cgi|shtml|phtml|php3?)$">
            SSLOptions +StdEnvVars
    </Files>
    <Directory "/var/www/cgi-bin">
            SSLOptions +StdEnvVars
    </Directory>
    SetEnvIf User-Agent ".*MSIE.*" \
                     nokeepalive ssl-unclean-shutdown \
                     downgrade-1.0 force-response-1.0

    CustomLog logs/ssl_request_log \
                        "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost> 
```

**终于报错了**
`SSL Library Error: 185073780 error:0B080074:x509 certificate routines:X509_check_private_key:key values mismatch`

# apache-flex - Flex 图表渐变填充不是平滑过渡

> ID：11943041
> 
> 赞同：0
> 
> 时间：2012-08-13T22:07:55.243
> 
> 标签：apache-flex, actionscript

我有一个条形图，我想通过 setStyle 方法对其列应用线性渐变填充。在我用来配置颜色的方法中，以下代码设置了渐变：

```
public function configureColor(series:Series):void {
    var lg:LinearGradient = GradientUtil.getLinearGradient([color1, color2], 0.8, 45);
    series.setStyle("fill", lg);
  ...
} 
```

getLinearGradient 方法：

```
public function getLinearGradient(colors:Array, alpha:Number, angle:Number = 0.0):LinearGradient {
    var lg:LinearGradient = new LinearGradient();
    lg.angle = angle;
    var entries:Array = []
    for each (var color:uint in colors) {
        entries.push(new GradientEntry(color, NaN, alpha));
    }
    lg.entries = entries;
    return lg;
} 
```

出于某种原因，我在列上得到的渐变是“不稳定的”。从一种颜色到另一种颜色的过渡发生在列的非常小的部分，而不是从条形图的顶部到底部的平滑过渡。我怎样才能得到它，使它最终成为一个平稳的过渡？

编辑：我遇到的问题的示例 ![在此处输入图像描述](../Images/32b2c4a652f003491411f9b6de9e527a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:21:11.407

这似乎是`LinearGradient`班级的问题。我最初的假设是它`BoxItemRenderer`在图表中绘制填充。但是看着那里让我看到`begin()`了渲染器用来开始填充的渐变方法。

问题可能是一种特殊情况，当在宽高比很大的矩形上使用非 90 度角时，这一点很明显。您可以使用简单的矩形重新创建此问题：

```
<s:Rect width="200" height="40">
    <s:fill>
        <s:LinearGradient rotation="45">
            <s:GradientEntry color="#ff0000"/>
            <s:GradientEntry color="#0000ff"/>
        </s:LinearGradient>
    </s:fill>
</s:Rect> 
```

我的 hacky 解决方案是扩展`LinearGradient`和覆盖它的`begin()`方法。我复制了原始代码，并注释掉了使其确定错误宽度的几行。我用不同的角度测试了它，它似乎渲染得很好。

诚然，我不明白我注释掉的行的目的，并且可能有一个有效的用例。

```
package
{
    import flash.display.GradientType;
    import flash.display.Graphics;
    import flash.geom.Matrix;
    import flash.geom.Point;
    import flash.geom.Rectangle;

    import mx.core.mx_internal;
    import mx.graphics.LinearGradient;

    use namespace mx_internal;

    public class CustomGradient extends LinearGradient
    {
        private static var commonMatrix:Matrix = new Matrix();

        public function CustomGradient()
        {
            super();
        }

        override public function begin(target:Graphics, targetBounds:Rectangle, targetOrigin:Point):void
        {
            commonMatrix.identity();

            if (!compoundTransform)
            {
                var tx:Number = x;
                var ty:Number = y;
                var length:Number = scaleX;

                if (isNaN(length))
                {
                    // Figure out the two sides
                    if (rotation % 90 != 0)
                    {           
//                      // Normalize angles with absolute value > 360 
//                      var normalizedAngle:Number = rotation % 360;
//                      // Normalize negative angles
//                      if (normalizedAngle < 0)
//                          normalizedAngle += 360;
//                      
//                      // Angles wrap at 180
//                      normalizedAngle %= 180;
//                      
//                      // Angles > 90 get mirrored
//                      if (normalizedAngle > 90)
//                          normalizedAngle = 180 - normalizedAngle;
//                      
//                      var side:Number = targetBounds.width;
//                      // Get the hypotenuse of the largest triangle that can fit in the bounds
//                      var hypotenuse:Number = Math.sqrt(targetBounds.width * targetBounds.width + targetBounds.height * targetBounds.height);
//                      // Get the angle of that largest triangle
//                      var hypotenuseAngle:Number =  Math.acos(targetBounds.width / hypotenuse) * 180 / Math.PI;
//                      
//                      // If the angle is larger than the hypotenuse angle, then use the height 
//                      // as the adjacent side of the triangle
//                      if (normalizedAngle > hypotenuseAngle)
//                      {
//                          normalizedAngle = 90 - normalizedAngle;
//                          side = targetBounds.height;
//                      }
//                      
//                      // Solve for the hypotenuse given an adjacent side and an angle. 
//                      length = side / Math.cos(normalizedAngle / 180 * Math.PI);
                        length=Math.max(targetBounds.width, targetBounds.height);
                    }
                    else 
                    {
                        // Use either width or height based on the rotation
                        length = (rotation % 180) == 0 ? targetBounds.width : targetBounds.height;
                    }
                }

                // If only x or y is defined, force the other to be set to 0
                if (!isNaN(tx) && isNaN(ty))
                    ty = 0;
                else if (isNaN(tx) && !isNaN(ty))
                    tx = 0;

                // If x and y are specified, then move the gradient so that the
                // top left corner is at 0,0
                if (!isNaN(tx) && !isNaN(ty))
                    commonMatrix.translate(GRADIENT_DIMENSION / 2, GRADIENT_DIMENSION / 2); // 1638.4 / 2

                // Force the length to a absolute minimum of 2\. Values of 0, 1, or -1 have undesired behavior   
                if (length >= 0 && length < 2)
                    length = 2;
                else if (length < 0 && length > -2)
                    length = -2;

                // Scale the gradient in the x direction. The natural size is 1638.4px. No need
                // to scale the y direction because it is infinite
                commonMatrix.scale (length / GRADIENT_DIMENSION, 1 / GRADIENT_DIMENSION);

                commonMatrix.rotate (!isNaN(_angle) ? _angle : rotationInRadians);
                if (isNaN(tx))
                    tx = targetBounds.left + targetBounds.width / 2;
                else
                    tx += targetOrigin.x;
                if (isNaN(ty))
                    ty = targetBounds.top + targetBounds.height / 2;
                else
                    ty += targetOrigin.y;
                commonMatrix.translate(tx, ty); 
            }
            else
            {
                commonMatrix.translate(GRADIENT_DIMENSION / 2, GRADIENT_DIMENSION / 2);
                commonMatrix.scale(1 / GRADIENT_DIMENSION, 1 / GRADIENT_DIMENSION);
                commonMatrix.concat(compoundTransform.matrix);
                commonMatrix.translate(targetOrigin.x, targetOrigin.y);
            }            

            target.beginGradientFill(GradientType.LINEAR, colors, alphas, ratios,
                commonMatrix, spreadMethod, interpolationMethod);   
        }
    }
} 
```

**[编辑]**注释掉整个 if 语句并使用最大维度`length`代替。原始黑客仅注释掉了该`if (normalizedAngle > hypotenuseAngle)`条款。可能仍然有问题，但解决了这两个问题。

# ruby - 尝试使用备份 RubyGem 但找不到已安装的 gem

> ID：11943047
> 
> 赞同：3
> 
> 时间：2012-08-13T22:08:29.337
> 
> 标签：ruby, amazon-s3, gem, backup, fog

我正在尝试让备份 RubyGem ( [https://github.com/meskyanichi/backup](https://github.com/meskyanichi/backup) ) 工作。当我尝试触发备份时，我得到：

```
bill:~/Backup$ backup perform --trigger bidkat_backup
[2012/08/13 16:58:37][error] Dependency::LoadError: Dependency missing
[2012/08/13 16:58:37][error]   Dependency required for:
[2012/08/13 16:58:37][error]   Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)
[2012/08/13 16:58:37][error]   To install the gem, issue the following command:
[2012/08/13 16:58:37][error]   > gem install fog -v '~> 1.4.0'
[2012/08/13 16:58:37][error]   Please try again after installing the missing dependency. 
```

但检查依赖我得到这个：

```
bill:~/Backup$ gem query

*** LOCAL GEMS ***

builder (3.0.0)
excon (0.14.3)
fog (1.4.0)
formatador (0.2.3)
mime-types (1.19)
multi_json (1.3.6)
net-scp (1.0.4)
net-ssh (2.5.2)
nokogiri (1.5.5)
ruby-hmac (0.4.0)

bill:~/Backup$ which fog
/usr/local/bin/fog 
```

检查我的红宝石版本给了我：

```
bill:~/Backup$ which ruby
/usr/bin/ruby

bill:~/Backup$ ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux] 
```

查看要备份的源，他们正尝试像这样加载 gem：

```
def self.all
  {
    'fog' => {
      :require => 'fog',
      :version => '~> 1.4.0',
      :for     => 'Amazon S3, Rackspace Cloud Files (S3, CloudFiles Storages)'
    },
  ....
  }

def self.load(name)
  begin
    gem(name, all[name][:version])
    require(all[name][:require])
  rescue LoadError
    Logger.error Errors::Dependency::LoadError.new(<<-EOS)
      Dependency missing
      Dependency required for:
      #{all[name][:for]}
      To install the gem, issue the following command:
      > gem install #{name} -v '#{all[name][:version]}'
      Please try again after installing the missing dependency.
    EOS
    exit 1
  end
end 
```

我不使用红宝石，所以我不知道发生了什么。有人知道问题是什么以及我该如何解决？还是有更好的方法将 mongodb 备份推送到 S3？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:09:49.270

您在该备份目录中有 Gemfile 吗？我知道这在过去给我带来了问题。还可以尝试从备份目录之外运行备份并引用配置文件的位置。似乎有什么东西正在改变你的环境。您使用的是 rvm 还是 rbenv 或类似的东西？但是，你试试运行这个：

```
cd # to get back to user dir
gem install backup
gem install fog -v=1.4.0
backup perform --trigger bidkat_backup --config-file path_to_config/config.rb 
```

# xml - VB中的递归排序XML标签

> ID：11943053
> 
> 赞同：0
> 
> 时间：2012-08-13T22:09:01.250
> 
> 标签：xml, vb.net, sorting, recursion

我对 Visual Basic 和 XML 还有些陌生，所以我不知道我的措辞是否正确。我只触及了 XSLT 的表面，但就我目前所见，我不知道它是否可以做到这一点。

我试图在 Visual Basic 中按其标签的字母顺序对 XML 文件进行递归排序。例如，对于 XML 文档，例如：

> ```
> <catalog>
>   <game>
>       <title>Role-playing EXTREME Adventure</title>
>       <platform>PC</platform>
>       <type>Action/Adventure</type>
>       <price>60.00</price>
>   </game>
>   <cd>
>       <title>Music Notes</title>
>       <artist>Susan Dylan</artist>
>       <genre>Rock</genre>
>       <company>Columbia</company>
>       <year>1995</year>
>       <price>10.95</price>
>   </cd>
>   <book>
>       <title>Pictures of Things</title>
>       <author>Bob Smith</author>
>       <type>paper-back</type>
>       <price>5.99</price>
>   </book>
> </catalog> 
> ```

...变成：

> ```
> <catalog>
>   <book>
>       <author>Bob Smith</author>
>       <price>5.99</price>
>       <title>Pictures of Things</title>
>       <type>paper-back</type>
>   </book>
>   <cd>
>       <artist>Susan Dylan</artist>
>       <company>Columbia</company>
>       <genre>Rock</genre>
>       <price>10.95</price>
>       <title>Music Notes</title>
>       <year>1995</year>
>   </cd>
>   <game>
>       <platform>PC</platform>
>       <price>60.00</price>
>       <title>Role-playing EXTREME Adventure</title>
>       <type>Action/Adventure</type>
>   </game>
> </catalog> 
> ```

这个排序后的版本应该替换 XML 文件的内容并被保存。这将针对多个长 XML 文件完成。我不在我的工作计算机旁，所以我无法访问我一直在摆弄的混乱的 Visual Basic 代码。我开始认为我应该放弃我所做的一切。

如果在某处得到回答，我深表歉意。我花了大部分时间搜索和研究这个。因此，如果已经有答案，我期待获得它的链接。:)

我看到了[这个](https://stackoverflow.com/questions/9161934/sort-xml-tags-into-alphabetical-order)，但它似乎不能满足我的需求。它必须在 Visual Basic 而不是命令行中完成。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:33:32.713

这是一个可用于对 XML 进行排序的程序（您至少需要 .NET 3.0 才能使用 LINQ to XML 和扩展方法，但这也可以通过旧式 XML 解析库和常规方法来完成）：

```
Imports System.Xml.Linq
Imports System.Runtime.CompilerServices

Module Module1

Sub Main()
    Dim xe As XElement = XElement.Load("test.xml")
    Console.WriteLine("----Original XML----")
    Console.WriteLine(xe)
    xe.SortRecursive()
    Console.WriteLine("----Sorted XML----")
    Console.WriteLine(xe)
End Sub

''' <summary>
''' Sorts the subelements of an XML element, and their subelements recursively.
''' </summary>
''' <param name="xe"></param>
''' <remarks></remarks>
<Extension()>
Sub SortRecursive(xe As XElement)
    xe.Sort()
    For Each subelement As XElement In xe.Elements()
        subelement.SortRecursive()
    Next
End Sub

''' <summary>
''' Sorts the subelements of an XML element.
''' </summary>
''' <param name="xe">The element whose subelements are to be sorted.</param>
<Extension()>
Sub Sort(xe As XElement)
    ' Save off the subelements into a list, and remove them from the main element
    Dim subelements As New List(Of XElement)
    For Each subelement As XElement In xe.Elements().ToArray()
        subelement.Remove()
        subelements.Add(subelement)
    Next

    ' Sort the list of subelements
    subelements.Sort(AddressOf CompareElementNames)

    ' Add the elements back and return when done
    For Each subelement As XElement In subelements
        xe.Add(subelement)
    Next
End Sub

''' <summary>
''' Compares two XML elements by their names.
''' </summary>
''' <param name="e1">The first element.</param>
''' <param name="e2">The second element.</param>
''' <returns>positive/negative/zero depending on comparison (same as string comparison)</returns>
Function CompareElementNames(e1 As XElement, e2 As XElement) As Integer
    Return String.Compare(e1.Name.ToString(), e2.Name.ToString())
End Function
End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:10:04.167

这对我来说似乎很好用：

```
Dim recurse As Action(Of XElement) = Nothing
recurse = _
    Sub (x)
        For Each e in x _
                .Elements() _
                .OrderBy(Function (y) y.Name.LocalName) _
                .ToArray()
            recurse(e)
            e.Remove()
            x.Add(e)
        Next
    End Sub 
```

我用这些数据进行了测试：

```
Dim xml = _
    <catalog>
        <game>
            <title>Role-playing EXTREME Adventure</title>
            <platform>PC</platform>
            <type>Action/Adventure</type>
            <price>60.00</price>
        </game>
        <cd>
            <title>Music Notes</title>
            <artist>Susan Dylan</artist>
            <genre>Rock</genre>
            <company>Columbia</company>
            <year>1995</year>
            <price>10.95</price>
        </cd>
        <book>
            <title>Pictures of Things</title>
            <author>Bob Smith</author>
            <type>paper-back</type>
            <price>5.99</price>
        </book>
    </catalog> 
```

通过调用：

```
recurse(xml) 
```

并得到了这个结果：

```
<catalog>
  <book>
    <author>Bob Smith</author>
    <price>5.99</price>
    <title>Pictures of Things</title>
    <type>paper-back</type>
  </book>
  <cd>
    <artist>Susan Dylan</artist>
    <company>Columbia</company>
    <genre>Rock</genre>
    <price>10.95</price>
    <title>Music Notes</title>
    <year>1995</year>
  </cd>
  <game>
    <platform>PC</platform>
    <price>60.00</price>
    <title>Role-playing EXTREME Adventure</title>
    <type>Action/Adventure</type>
  </game>
</catalog> 
```

# javascript - 在 Kendo UI 中单击自定义工具栏时如何调用函数？

> ID：11943056
> 
> 赞同：4
> 
> 时间：2012-08-13T22:09:18.153
> 
> 标签：javascript, kendo-ui

我想创建一个自定义工具栏。这是我的代码：

```
toolbar:[{
    text: "Go to Add User Page",
    className: "k-grid-custom",
    imageClass: "k-add"
}],

function createUser(){
    alert('Hello World');
} 
```

单击此按钮（自定义工具栏）时，我想调用名为 createUser 的函数。如何使它成为可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:50:05.987

您可以向按钮添加一个唯一类，然后使用该类绑定到单击事件。

```
toolbar:[{
    text: "Go to Add User Page",
    className: "myCustomClass",
    imageClass: "k-add"
}],

$(".myCustomClass").click(function() {
    alert("Click!");
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T14:46:26.220

```
function test(e){
      return '<a class="k-button" href="#" id="toolbar-add_user" onclick="test_fn()">Add User</a>';
 };
function test_fn(){
        window.location = "http://www.google.com";
};
 toolbar:[{
        name:'add_user',
        template:'#= test()#'
}], 
```

1.  首先，我必须创建一个能够自定义按钮并添加 onclick 事件的函数。
2.  然后我不得不制作一个新功能来收听该事件。

# xcode - 更改应用文件夹名称

> ID：11943063
> 
> 赞同：-1
> 
> 时间：2012-08-13T22:09:44.750
> 
> 标签：xcode, file-management

我们想更改当前应用程序的文件夹名称。如果我的应用程序名为 abcCalc，我有一个 abcCalc 父文件夹，其中包含 abcCalc.xcodeproj 文件，还有一个包含 .m 文件、.h 文件、图像文件等的 abcCalc 子文件夹。

我想将此 abcCalc 子文件夹（包含代码和支持文件）更改为不同的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:40:29.487

要更改 Xcode 项目中的子文件夹，您只需转到项目的导航器（文件列表）并选择要更改的文件夹（位于 Xcode 项目窗口的左侧）。在项目窗口的右侧，您可以调出“文件检查器”。

屏幕应如下所示：

![单击要更改的文件夹](../Images/c3920d224aa91ecbf50ee021553cef7c.png)

您可以通过调整文件检查器中“组名称”中的字段轻松更改文件夹名称......或者如果您更熟悉 Xcode，请在导航器中双击选定的文件夹名称并在那里进行更改。

# objective-c - Efficiently crop custom UIView to Rectangle and scale to fit screen

> ID：11943065
> 
> 赞同：1
> 
> 时间：2012-08-13T22:09:56.170
> 
> 标签：objective-c, ios, views, translation, scale

**Situation**

I got two views:

*   A superview (which contains:)
*   A subview (which has a customised DrawRect function

Draw function

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 3.0);
CGContextSetFillColorWithColor(context, self.targetColor.CGColor);
CGContextAddRect(context, CGRectStandardize(self.target));
CGContextFillPath(context); 
```

So this DrawRect function just draws a rectangle in the subviews coordinate System at a certain position (Which is likely to be offscreen, when dislayed in the subview)

In my View Controller I've got Outlets to both of them. The View Controller will regulary call a function on an object which contains my data model. This object will return a CGRect, that defines the area i want to display. (In the subviews coordinate system)

**Intended Behavior**

So i don't care how its done, as long as it is efficient enough to be called at 20 Hz. But i want exactly, that only that area is drawn and scaled to fit in the superview. So its translation and scale (Things I'm certainly not an expert in). And this process will be repeated over and over again.

**What I've tried so far**

I managed to get this working with a CGImageRef etc.(So the data model works as intended) but not with a custom view. Changing the superviews bounds will do the translation but I've not managed to get scaling working. I hope there is a way to solve this by changing some Views bounds or frame and define some automatic resize behaviour, but i couldn't manage to find out how. Another thing could be to define a function that builds an CGAffineTransformMatrix which then will be applied to the subview. But as i said this stuff is new to me and figured that it will take someone with experience only a couple of minutes to point me into the right direction.

So a perfect opportunity for you guys to show off some skills ;)

# c# - 在 C# 中使用正则表达式计算重叠匹配

> ID：11943066
> 
> 赞同：9
> 
> 时间：2012-08-13T22:09:59.617
> 
> 标签：c#, regex

以下代码计算 2 而不是 4：

```
Regex.Matches("020202020", "020").Count; 
```

我猜正则表达式从上一场比赛结束开始寻找下一场比赛。有什么办法可以防止这种情况。我有一串'0'和'2'，我试图计算我有多少次连续三个'2'，连续四个'2'等等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T22:24:00.230

这将按`4`您的预期返回：

```
Regex.Matches("020202020", @"0(?=20)").Count; 
```

前瞻*匹配*不*消耗*`20`它，因此下一次匹配尝试从第一个 之后的位置开始。您甚至可以将整个正则表达式作为前瞻：*`0`*

 *```
Regex.Matches("020202020", @"(?=020)").Count; 
```

每次进行零长度匹配时，正则表达式引擎都会自动向前移动一个位置。因此，要查找所有 3`2`或 4`2`的运行，您可以使用：

```
Regex.Matches("22222222", @"(?=222)").Count;  // 6 
```

...和：

```
Regex.Matches("22222222", @"(?=2222)").Count;  // 5 
```

**编辑：**再次查看您的问题，我突然想到您可能正在寻找' `2`s 穿插`0`

```
Regex.Matches("020202020", @"(?=20202)").Count;  // 2 
```

`0`如果你不知道会有多少's，你可以使用这个：

```
Regex.Matches("020202020", @"(?=20*20*2)").Count;  // 2 
```

当然，您可以使用量词来减少正则表达式中的重复：

```
Regex.Matches("020202020", @"(?=2(?:0*2){2})").Count;  // 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T22:15:49.843

事实上，正则表达式将从最后一个结束的地方继续。您可以通过使用前瞻模式来解决它。我不是 .NET 人，但试试这个：`"(?=020)."`翻译：“找到我任何一个字符，这个字符和接下来的两个字符是`020`”。诀窍是匹配只有一个字符宽，而不是三个，所以你会得到字符串中的所有匹配，即使它们重叠。

（你也可以把它写成`"0(?=20)"`，但至少人类不太清楚：p）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:22:34.987

试试这个，使用零宽度正向向后看：

```
Regex.Matches("020202020",@"(?<=020)").Count; 
```

为我工作，产生 4 场比赛。

我最喜欢的正则表达式参考：[正则表达式语言 - 快速参考](http://msdn.microsoft.com/en-us/library/az24scfc.aspx) 也是一种快速尝试正则表达式的方法，我经常将它用于复杂的正则表达式：[免费正则表达式设计器](http://www.radsoftware.com.au/regexdesigner/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T22:21:03.713

假设您确实在寻找连续`2`-s 的序列，还有另一种选择，根本**不使用前瞻**。（这不适用于查找 和 模式的任意序列`0`。`2`）

枚举所有出现的三个或更多 -s 的非重叠序列`2`（如何？），然后推断较短子序列的数量。

例如，如果你找到一个包含六个连续`2`-s 的序列和五个连续`2`-s 之一，那么你知道你必须有 (6-3+1) + (5-3+1) = ? 三个连续`2`-s 的序列（可能重叠），依此类推：

```
0002222220000002222200
   222
    222
     222
      222
               222
                222
                 222 
```

对于大字符串，这应该比使用前瞻要**快一些。**

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-08-13T22:21:48.657

因为源包含您的正则表达式模式匹配的两个“020”模式。尝试将您的来源更改为：

```
Regex.Matches("020202020", "02").Count; 
```

现在它将连续匹配 02，这次你将得到四个。*

# servicestack - 如何在响应过滤器中为某些请求禁用 jsv 格式化程序？

> ID：11943074
> 
> 赞同：1
> 
> 时间：2012-08-13T22:11:24.367
> 
> 标签：servicestack

我有一个 servicestack 服务器，它使用响应过滤器向我们的服务添加数据验证消息。我的 Put/Post 处理程序返回一个 HttpResult 对象，其中 Response 设置为我们的验证对象。然后，响应过滤器将此对象分解为原始 html 字符串，并将 Response 对象设置为该字符串。为了让它工作，我必须在“视图”中创建一个 String.md 文件以及一个空白的 html 模板文件。我现在看到的问题是，当我们的自定义 html 响应包含逗号“”时，jsv fromater 尝试序列化字符串并引发异常：

```
 at System.String.get_Chars(Int32 index)
   at ServiceStack.Text.Jsv.JsvTypeSerializer.EatMapKey(String value, Int32& i)
   at ServiceStack.Text.Common.DeserializeDictionary`1.ParseStringDictionary(String value)
   at ServiceStack.Text.Jsv.JsvReader`1.Parse(String value)
   at ServiceStack.Text.TypeSerializer.DeserializeFromString[T](String value)
   at ServiceStack.Html.ViewDataDictionary.PopulateModelState()
   at ServiceStack.Html.HtmlHelper.Init(IViewEngine viewEngine, ViewDataDictionary viewData)
   at ServiceStack.Html.HtmlHelper.Init(MarkdownPage markdownPage, Dictionary`2 scopeArgs, Boolean renderHtml, ViewDataDictionary viewData)
   at ServiceStack.Markdown.MarkdownViewBase.Init(IAppHost appHost, MarkdownPage markdownPage, Dictionary`2 scopeArgs, Object model, Boolean renderHtml)
   at ServiceStack.WebHost.Endpoints.Support.Markdown.MarkdownPage.Write(TextWriter textWriter, PageContext pageContext)
   at ServiceStack.WebHost.Endpoints.Support.Markdown.TemplateExtensions.RenderToString(MarkdownPage markdownPage, Dictionary`2 scopeArgs, Boolean renderHtml)
   at ServiceStack.WebHost.Endpoints.Formats.MarkdownFormat.RenderDynamicPage(MarkdownPage markdownPage, Dictionary`2 scopeArgs, Boolean renderHtml, Boolean renderTemplate)
   at ServiceStack.WebHost.Endpoints.Formats.MarkdownFormat.RenderDynamicPage(MarkdownPage markdownPage, String pageName, Object model, Boolean renderHtml, Boolean renderTemplate)
   at ServiceStack.WebHost.Endpoints.Formats.MarkdownFormat.ProcessMarkdownPage(IHttpRequest httpReq, MarkdownPage markdownPage, Object dto, IHttpResponse httpRes)
   at ServiceStack.WebHost.Endpoints.Formats.MarkdownFormat.<Register>b__1(IRequestContext requestContext, Object dto, IHttpResponse httpRes)
   at ServiceStack.WebHost.Endpoints.Formats.HtmlFormat.<>c__DisplayClass1.<SerializeToStream>b__0(StreamSerializerResolverDelegate x)
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at ServiceStack.WebHost.Endpoints.Formats.HtmlFormat.SerializeToStream(IRequestContext requestContext, Object dto, IHttpResponse httpRes)
   at ServiceStack.Common.Web.HttpResponseFilter.SerializeToStream(IRequestContext requestContext, Object response, Stream responseStream) in i:\GitHub\ServiceStack\src\ServiceStack.Common\Web\HttpResponseFilter.cs:line 152
   at ServiceStack.Common.Web.HttpResult.WriteTo(Stream responseStream) in i:\GitHub\ServiceStack\src\ServiceStack.Common\Web\HttpResult.cs:line 219
   at ServiceStack.WebHost.Endpoints.Extensions.HttpResponseExtensions.WriteToOutputStream(IHttpResponse response, Object result, Byte[] bodyPrefix, Byte[] bodySuffix)
   at ServiceStack.WebHost.Endpoints.Extensions.HttpResponseExtensions.WriteToResponse(IHttpResponse response, Object result, ResponseSerializerDelegate defaultAction, IRequestContext serializerCtx, Byte[] bodyPrefix, Byte[] bodySuffix) 
```

我的问题是如何为这些响应关闭 jsv？还是有更好的方法来返回原始 html？我不能让我的请求处理程序返回一个字符串，因为我需要控制返回的响应代码和标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:09:10.097

您可以在 HttpResult 中返回 HTML 字符串，例如：

```
return new HttpResult("<html>...</html>", ContentType.Html); 
```

参考 ServiceStack 的 HTML 故事可以在以下位置找到：

[是否可以使用 ServiceStack 提供 HTML 页面？](https://stackoverflow.com/questions/8199493/is-it-possible-to-serve-html-pages-with-servicestack/8200056#8200056)

除了 Markdown，我们还添加了新的 MVC Razor 支持，您可以在以下位置查看示例：

*   [Razor Rockstars - 在独立的 self-host 中嵌入 Razor 视图](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/RazorRockstars/RazorRockstars.Console)
*   [ASP.NET 主机内部](https://github.com/ServiceStack/ServiceStack/tree/master/tests/ServiceStack.RazorHostTests)

# .net - 如何在 Windows 7 的 Windows 资源管理器中以编程方式打开“库”文件夹？

> ID：11943083
> 
> 赞同：1
> 
> 时间：2012-08-13T22:12:22.503
> 
> 标签：.net, windows-7, windows-shell

请注意，用户可能已经重新定义了 Windows 资源管理器的默认窗口，因此仅使用`Process.Start`或打开“”`IShellDispatch.Open`是不可接受的。

我认为这将是微不足道的，但我已经失去了一天试图找到一个例子。请注意，Libraries 文件夹是一个已知文件夹，其文件夹 ID 为`FOLDERID_Libraries`. 使用关联的 GUID 打开`FOLDERID_Libraries`使用

  `Process.Start("explorer.exe", "::{1B3EA5DC-B587-4786-B4EF-BD1DC332AEAE}")`

而是打开“我的文档”。

虽然首选 VB.NET 或 C#，但我可以使用几乎任何语言设计解决方案。

多谢，

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:27:48.983

您是否尝试过简单地使用 Windows-Run 也`shell:Libraries`只是在命令提示符下尝试过。`explorer shell:libraries`打开了我所期望的我不知道的

# asp.net-web-api - webapi mediatypeformatter 文本/html

> ID：11943084
> 
> 赞同：0
> 
> 时间：2012-08-13T22:12:23.733
> 
> 标签：asp.net-web-api

使用 webapi 默认值，我能够发送和接收 JSON 数据。我现在有一个场景，我的 api 控制器无法区分获取操作

*   api/控制器？ponumber=###
*   控制器？id=###（或 api/controller/###）

为了解决这个问题，我使用了 ActionNameAttribute

```
[ActionName("ById")]
public Model Get(PoByIdQuery model)
{
     return repo.Get(model);
}

[ActionName("ByPoNumber")]
public Model Get(PoByNumberQuery model)
{
     return repo.Get(model);
} 
```

这会将网址更改为

*   /controler/byponumber?ponumber=###
*   /controler/byid/###

现在的问题是当我检索它说没有格式化程序可用于类型 text/html 的值时。如何配置 mvc4/webapi 以将 json 格式化程序用于 text/html 请求？或者，我如何更改我的调用请求以请求 json 而不是 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:50:51.440

**解决**

首先我需要添加路由。默认情况下，webapi 会忽略该操作。所以我创建了一个包含动作的路线

```
routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{id}/{action}",
    defaults: new { action = "ById", id = RouteParameter.Optional }); 
```

下一个问题是行动的论点。根据[这篇文章](https://stackoverflow.com/questions/10934077/upgrading-to-mvc4-rc-no-mediatypeformatter-is-available-to-read-an-object-of-ty)。复杂类型取自主体，简单类型取自查询字符串。我可以`[FromUri]`用来覆盖此行为并从查询字符串中提取 po 编号。

有一个副作用，我现在可以处理。我必须为`{id}`. 所以我的网址看起来像这样

*   /api/controller/_/bynumber?ponumber=###

# excel - Excel 条件 SUMPRODUCT

> ID：11943088
> 
> 赞同：2
> 
> 时间：2012-08-13T22:12:52.730
> 
> 标签：excel

考虑以下：

```
 A    B    C
----------------
1   a    c    1
2   b    f    2
3   a    c    3
...
6   a    c    4 
```

此处的目标是使用条件 SUMPRODUCT，以便当第 6 行中的值与各自列中的值匹配时，计算 SUMPRODUCT。这是有趣的事情。

使用时：

```
=SUMPRODUCT((A3:A5=A1),(B3:B5=B1),C3:C5) 
```

输入参数被评估为：

```
=SUMPRODUCT({TRUE, FALSE, TRUE},{TRUE, FALSE, TRUE},{1, 2, 3}) 
```

但结果为 0。

现在，当使用数学运算符“在”评估公式之前将布尔值 TRUE 和 FALSE 转换为对应的 1 和 0 时，将填充正确的结果：

```
=SUMPRODUCT(--(A3:A5=A1),--(B3:B5=B1),C3:C5) 
```

或者

```
=SUMPRODUCT(ABS(A3:A5=A1),ABS(B3:B5=B1),C3:C5) 
```

或者

```
=SUMPRODUCT((A3:A5=A1)^2,(B3:B5=B1)^2,C3:C5) 
```

ETC...，

一旦应用数学运算符，最终评估为 1 和 0，

```
=SUMPRODUCT({1, 0, 1},{1, 0, 1},{1, 2, 3}) 
```

我们得到了正确的值。

我们一直在为 Excel 绞尽脑汁，似乎无法正确评估它自己的输入。我们认为有一行代码缺少将 TRUE 和 FALSE 转换为 1 和 0 的 SUMPRODUCT 编译代码，并且错误捕获仅返回 0。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:14:40.270

我环顾四周，甚至在查尔斯威廉姆斯的网站上也没有找到为什么它会以这种方式工作的答案。我认为这是一种编程选择，在其原始的“本机”（全逗号）形式 Sumproduct 仅对数字进行操作，并将任何非数字单元格视为零。

这样，A1 中引用 B1:C3 的 Sumproduct 公式将 B1 中的 TRUE 与“strimp099”相同 - 视为零。考虑到 Sumproduct 的原始、相当普通的意图，以及考虑到普通用户可能期望的结果，我认为这是有道理的。

![在此处输入图像描述](../Images/b102cad6f9cce3ff7c257271bb0bc3fb.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:18:45.680

大多数函数不会将逻辑值强制转换为数组参数中的数字，恕我直言，最好在一致性方面犯错，而不是为少数函数引入新行为。强制也有相关的性能开销，因此只应在需要时实施。

也就是说，添加了一些额外的函数，如`AVERAGEA`,`VARA`等，它们确实将逻辑值视为数字（并将文本值视为零），所以我猜也可以添加 SUMPRODUCTA 函数，但这也可能会增加混乱和应用程序膨胀。我相信这些的目的是为了与 Lotus 123 兼容。Excel 选项中还有一个*转换公式评估*的设置*| Advanced*，激活后会将 TRUE/FALSE 视为计算中的数字，`SUM`但许多函数似乎并未按预期响应。

# python - Python 中的 Github-Flavored-Markdown

> ID：11943089
> 
> 赞同：20
> 
> 时间：2012-08-13T22:12:54.930
> 
> 标签：python, github, markdown

有谁知道一个有效的 Python GFM 实现？

目前我正在使用[javascript 渲染器](http://www.freedomsponsors.org/core/issue/1/allow-formatting-controls-on-comment-boxes)。它可以工作，但实际的 Python 渲染器将是完成这项工作的正确工具。（FS 是一个 Django 应用程序）

我尝试将[this](http://freewisdom.org/projects/python-markdown/)与[this](http://gregbrown.co.nz/code/githib-flavoured-markdown-python-implementation/)结合起来。但结果并不是那么好。

相关代码--> [https://github.com/freedomsponsors/www.freedomsponsors.org/blob/master/djangoproject/core/models.py](https://github.com/freedomsponsors/www.freedomsponsors.org/blob/master/djangoproject/core/models.py) （见IssueComment.toHTML）

语法高亮是一个优点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T05:24:13.810

GitHub 使用[Redcarpet](https://github.com/vmg/redcarpet)，它实际上是 github 为[Sundown](https://github.com/vmg/sundown)构建的 Ruby 绑定。

在 Python 中有一个名为[Misaka](https://github.com/FSX/misaka)的 Sundown 绑定。如果你想要更接近 github 使用的渲染器，但在 python 中，你可以从那里开始。

对于代码突出显示，您可以将[Pygments 与 Misaka 一​​起](http://misaka.61924.nl/#usage)使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-18T02:08:07.477

[Python-Markdown](http://pythonhosted.org/Markdown/)加上[py-gfm](https://github.com/Zopieux/py-gfm)似乎运行良好。它的好处是在 Python 生态系统中有些标准化 - 有几个 Python-Markdown 扩展可用，然后可以在 Python-Markdown 之上构建其他包，如[django_markdown](https://github.com/klen/django_markdown)并从其扩展中受益。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-27T08:14:25.937

如果对其他人有帮助，我只想要 Github 防护代码语法，例如

```
```python
def hello():
   print('this should be rendered properly')
``` 
```

[Python Markdown](https://pypi.python.org/pypi/Markdown)实际上附带了一个扩展来执行此操作，该扩展已经称为[Fenced Code Blocks](https://pythonhosted.org/Markdown/extensions/fenced_code_blocks.html)，它运行良好。

你只是这样称呼它：

```
page_content = markdown.markdown(source, extensions=[FencedCodeExtension()]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T22:27:36.670

Python 有自己的标记语言，与 Markdown 非常相似：http: [//docutils.sourceforge.net/rst.html](http://docutils.sourceforge.net/rst.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-22T16:19:50.883

[握把](https://github.com/joeyespo/grip)也很酷，可以完成工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T19:55:19.963

[Python 中的 Github 风味 Markdown（要点）](https://gist.github.com/457617)

# css - 如何修复这个浮动？

> ID：11943091
> 
> 赞同：0
> 
> 时间：2012-08-13T22:13:14.310
> 
> 标签：css, css-float

如何解决这个浮动问题？`Hobbies`标签旁边？

![在此处输入图像描述](../Images/8f94ad107156e4a9b989ae5574c0da51.png)

这是我的代码：

```
<!doctype html>
<html>
    <head>
        <title>Enter Your Data</title>
        <link rel="stylesheet" href="style.css"/>
        <script type="text/javascript" src="script.js"></script>
    </head>

    <body>
        <div id="mainContainer">
            <header>
                <h1>Enter your data :</h1>
            </header>

            <form name="contactForm" id="contactForm">
                <div id="textInfo">
                    <ul>    
                        <li>            
                            <label for="firstName">First Name : </label>
                            <input type="text" name="firstName" id="firstName"></input><br>
                        </li>   
                        <li>    
                            <label for="lastName">Last Name : </label>
                            <input type="text" name="lastName" id="lastName"></input><br>
                        </li>   
                        <li>    
                            <label for="email">E-mail : </label>
                            <input type="email" name="email" id="email"></input><br>
                        </li>                           
                    </ul>
                </div>

            <!-- Occupation radio buttons -->
                <div id="occupationInfo">
                    <label>Occupation : </label>
                    <ul>
                        <li>
                            <input type="radio" name="occupation" value="student" id="student">
                                <label for="student">Student</label>
                            </input>
                        </li>   
                        <li>    
                            <input type="radio" name="occupation" value="professor" id="professor">
                                <label for="professor">Professor</label>
                            </input>
                        </li>   
                        <li>    
                            <input type="radio" name="occupation" value="programmer" id="programmer">
                                <label for="programmer">Programmer</label>
                            </input>
                        </li>   
                    </ul>
                </div>
            <!-- End of radio buttons -->

            <!-- Hobbies checkboxes -->
                <div id="hobbyInfo">
                    <label>Hobbies : </label>
                    <ul>
                        <li>
                            <input type="checkbox" name="hobby" value="computer" id="computer">
                                <label for="computer">Computer</label>
                            </input>
                        </li>       
                        <li>    
                            <input type="checkbox" name="hobby" value="biking" id="biking">
                                <label for="biking">Biking</label>
                            </input>
                        </li>       
                        <li>    
                            <input type="checkbox" name="hobby" value="reading" id="reading">
                                <label for="reading">Reading</label>
                            </input>
                        </li>
                    </ul>
                </div>
            <!-- End of hobbies section -->         

            <!-- Birthday section -->
            <div id="birthdayInfo">
                <label>Enter your birhday date : </label>
                    <select name="month">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select name="day">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select name="year">
                        <option value="2002">2002</option>
                        <option value="2003">2003</option>
                        <option value="2004">2004</option>
                        <option value="2005">2005</option>
                    </select>
                </div>
            <!-- End of birthday section -->
                <div id="briefInfo">
                    <label for="brief">A little bit about you : </label>
                    <textarea id="brief"></textarea>
                </div>

                <input type="submit" value="Submit"/>
            </form>
        </div   
    </body>

</html> 
```

样式.css：

```
* {
    padding : 0 ;
    margin : 0;
    font-size : 17px;
}

body {
    width : 100%;
    height : 100%;
    background-color: #005F6B;
}

ul {
        display :inline;
}

li {
    list-style : none;
    height : 30px;
}

#mainContainer {
    width : 800px;
    margin : auto;
    box-shadow : 1px 1px 3px 0 #343838;
    border-radius : 0px 10px;
    background-color : #008C9E; 
}

#mainContainer header {
    color : #343838;    
}

#mainContainer header h1 {
    font-size : 30px;
    padding: 15px;
    text-shadow : 1px 1px #005F6B   ;
}

#contactForm div {
    width : 50%;
    margin : 5px;
    background-color : orange;
}

#textInfo li {
    padding: 3px;
}

#textInfo label {
    float :left;
}

#textInfo input {
    float:right;
    height : 20px;  
    width : 60%;
}

#occupationInfo li {
    float : right;
}

#hobbyInfo li{
    float : right;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:18:38.497

将一个添加`clear:both`到您的 hobbyInfo div。例如： http: [//jsfiddle.net/dLjge/](http://jsfiddle.net/dLjge/)（我通过 div 上的 style="..." 添加它）。

# c# - 如何在模式弹出窗口中显示网页？

> ID：11943093
> 
> 赞同：0
> 
> 时间：2012-08-13T22:13:15.473
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我很不幸地为此找到了一个不错的资源。但我正在做的是使用 ListView 创建票证列表。项目模板中的控件之一是显示工单标题的链接按钮。当用户单击链接按钮时，我想打开一个模式窗口，以可读格式显示票证。为了获得票，我将向该页面传递一个变量，然后它会完成剩下的工作；没什么复杂的。该页面将有 3 个按钮，当您单击其中一个按钮时需要关闭窗口。

现在，我或多或少地弄清楚了如何使用 Ajax 中的 ModalPopupExtender。您在它自己的 div 中创建面板，该面板保持隐藏状态。我创建了一个点击事件，它基本上使用 webclient 从页面下载 html 并将其插入到该 div 的 innerHtml 中。这似乎第一次起作用。但是，一旦您单击不同的链接，该页面就会呕吐并说明它处于非法状态。

我不确定我是否做错了，而且我找不到任何像样的例子来说明如何做到这一点。好吧，有一个，但英语很难理解，而且是用 VB 而不是 C#。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:49:39.183

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
  <form id="form1" runat="server"> 
    <div> 
        <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"> 
        </asp:ToolkitScriptManager> 

        <br /> 

<asp:ModalPopupExtender 
DropShadow="true" 
OkControlID="btnOk" 
CancelControlID="btnClose" 
runat="server" 
PopupControlID="Panel1" 
id="ModalPopupExtender1" 
TargetControlID="Button1" /> 

<asp:Panel ID="Panel1" runat="server" CssClass="modalPopup" style="display:none;"> 
This is basic modal popup. 
<br /><br /> 
<asp:Button ID="btnOk" runat="server" Text="Ok" /> 
<asp:Button ID="btnClose" runat="server" Text="Close Me" /> 
  <iframe src="http://www.google.com"></iframe> 

</asp:Panel> 

<asp:Button ID="Button1" runat="server" Text="First Modal Popup" /> 

    </div> 
    </form>

    Try this it should work. 
```

# php - 用 $userslist 数组替换 $_GET

> ID：11943096
> 
> 赞同：0
> 
> 时间：2012-08-13T22:14:00.750
> 
> 标签：php

我通过 $_GET 使用此脚本将用户名添加到我的数据库旁边到我的 Twitter 列表中脚本功能很好
，例如当我在 url domain.com/add.php?user=username 调用它时添加执行 100% 的功能很好
我的疑问是关于调整代码以通过数组一次添加多个用户或从文件中获取用户列表有任何提示来调整代码或修改它吗？

```
 <?php
session_start();

 require_once('dbconnect.php');
  require_once('twitteroauth/twitteroauth.php');
   require_once('config.php');

   $connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET,TOKEN_KEY, TOKEN_SECRET);

   $user = $_GET['user'];

 if( !isset( $_GET['user'] ) )
die('You must enter a username');

   $info = $connection->get( 'users/show', array("screen_name"=> $user
                                  ));   
$var = $_GET['user'];

 $individual = 1;

 $protected = ($info->protected == "true")?1:0;

$query = sprintf("INSERT INTO tweeps VALUES('%s', '%s', %s, %s, '%s', '%s', '%s', %s ) ",
mysql_real_escape_string($info->screen_name),
mysql_real_escape_string($info->name),
$info->followers_count,
$info->statuses_count,
mysql_real_escape_string($info->location),
$info->created_at,
$info->profile_image_url,
$protected)    ;

  echo $query;      

$result = mysql_query($query); 
if(false) 
 echo "s";

 else {

$list_id = get_latest_list();
$list = "Tweeps-" . $list_id;

    echo "list $list";

mysql_free_result($result);
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, TOKEN_KEY, TOKEN_SECRET);

$result = $connection->post( 'friendships/create/' .  $info->screen_name    );  
//var_dump($result); die();
    $result = $connection->post( 'lists/members/create', array("screen_name"=>   $info->screen_name,
                                   "slug"=> $list,
                                       "owner_screen_name"=>  "Tweeps")  ); 

if( !isset($result->error) ) {

    $userid = $info->id;
    $result = mysql_query("INSERT INTO followed_tweeps(screenname, userid, individual, list_id) VALUES('" . $info->screen_name . "', '" . $userid . "', $individual, $list_id)");       

}

 }
    echo "SUCCESS";

  function get_latest_list() {

$query = "SELECT count(*) cnt, list_id FROM followed_tweeps group by list_id order by  list_id desc";

$result = mysql_query($query);

if(! $result ) {
    die("Error: query is $query error is: " . mysql_error() );
}

$row = mysql_fetch_row($result);

    $cnt = $row[0];
    $free_slots = 500 - $cnt;   
    $list_id = ($freeslots > 0) ? $row[1]++ : $row[1];
    return $list_id;

  }

  ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T22:18:23.990

PHP 支持多个同名查询参数的数组表示法：

```
<input type="text" name="name[]" />
                             ^^--- tells PHP to treat 'name' as an array 
```

然后，您可以将其处理为：

```
if (isset($_GET['name']) && isarray($_GET['name'])) {
   foreach ($_GET['name'] as $name) {
      ...
   }
} 
```

这对 POST 和 GET 都有效 - 您只需`[]`在字段名称中包含 。

# unix - SBT 安装权限被拒绝

> ID：11943097
> 
> 赞同：0
> 
> 时间：2012-08-13T22:14:04.933
> 
> 标签：unix, sbt, chmod

因此，我按照“UNIX”部分下的说明下载[并](https://github.com/harrah/xsbt/wiki/Getting-Started-Setup)`jar`创建脚本来运行它，从而“安装”了 SBT `sbt`- 但是`~/bin/`我没有将其放入，而是将其放入`/usr/local/sbt/`. 我将它添加到我的`PATH`变量中，当我尝试在没有权限的情况下运行它时`sudo`出现 Permission denied 错误（如下）。以下是我`ls -l`在`sbt`目录中输入时看到的内容。

```
$ sbt compile
bash: /usr/local/sbt/sbt: Permission denied

-rwxrwxr--  1 root       wheel      120 Jun 20 09:21 sbt*
-rwxrwxr--@ 1 adelbertc  staff  1096763 Jun 20 09:20 sbt-launch.jar* 
```

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:22:33.757

尝试更改权限以便您可以执行它：

```
sudo chmod o+x /usr/local/sbt/sbt /usr/local/sbt/sbt-launch.jar 
```

否则，您可以将自己添加到`wheel`组中，或更改所有者以拥有它：

```
sudo chown adelbertcs:staff /usr/local/sbt/sbt 
```

（假设您的用户名是`adelbertcs`）。

# c++ - 如何在 Windows XP 上获取已连接显示器的类型？

> ID：11943099
> 
> 赞同：3
> 
> 时间：2012-08-13T22:14:10.227
> 
> 标签：c++, winapi, windows-xp, monitor, lcd

我需要知道计算机从 C++ 程序使用的显示器的类型——即平面屏幕、CRT 等。主要要求是此代码可以在 Windows XP SP3 上运行（因为否则，系统几乎可以在 LCD 屏幕上运行。）

我需要它来实现屏幕调光以节省能源，这仅适用于 CRT，而对平面屏幕有相反的效果。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:42:33.263

您可以使用 Win32 API 中的 GetMonitorInfo 函数获取 Monitor 的大部分信息

```
BOOL GetMonitorInfo(
  __in   HMONITOR hMonitor,
  __out  LPMONITORINFO lpmi
); 
```

这会将输出提供给 MONITORINFO 或 MONITORINFOEX 结构，您可以在其中提取有关当前连接的监视器的信息

# bash - 为什么“超时”不适用于管道？

> ID：11943104
> 
> 赞同：5
> 
> 时间：2012-08-13T22:14:49.583
> 
> 标签：bash, timeout, pipe

以下命令行调用`timeout`（没有任何意义，仅出于测试原因）无法按预期工作。它等待 10 秒，并且在 3 秒后不会停止命令的工作。为什么 ？

```
timeout 3 ls | sleep 10 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T12:06:41.703

您的命令正在执行的操作是将`timeout 3 ls`其输出通过管道传输到`sleep 10`. 因此，该`sleep`命令不受控制，`timeout`并且将始终休眠 10 秒。

像这样的东西会产生预期的效果。

```
timeout 3 bash -c "ls | sleep 10" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T22:20:31.383

'ls' 命令不应该花费 3 秒来运行。我认为正在发生的事情是你说（1） ls 3 秒后超时（这再次没有发生，因为 ls 不应该花费任何接近 3 秒的时间来运行），然后（2）将结果输入到 sleep 10 中不需要比你给它的数字更多的参数。因此 ls 发生，超时无关紧要，并且 bash 休眠 10 秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T22:55:24.147

我知道如何获得您想要的效果的唯一方法是将管道命令放入一个单独的文件中：

```
cat > script
ls | sleep 10
^D

timeout 3 sh script 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-06T19:28:34.493

**在管道的最后一个**命令上设置超时就足够了：

```
# Exits after 3 seconds with code 124
ls | timeout 3 sleep 10

# Exits after 1 second with code 0
ls | timeout 3 sleep 1 
```

# intellij-idea - JRebel 与 IntelliJ 和构建器？

> ID：11943111
> 
> 赞同：0
> 
> 时间：2012-08-13T22:16:14.820
> 
> 标签：intellij-idea, jrebel, buildr

我正在使用 IntelliJ IDEA 处理一个构建器项目，我想让 JRebel 工作。这是一个 Spring MVC 项目。

我配置了我的 rebel.xml，并创建了一个 ant 脚本来重新打包应用程序：

```
buildr package test=no 
```

JRebel 说它重新部署了，但 Spring 似乎在重新部署后没有运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:51:55.183

您可以做的最好的事情是通过将**-Drebel.log=true**添加到 JVM 参数来启用 JRebel 日志记录，并将日志文件发送到支持。

您是否在控制台中看到任何消息表明 JRebel 已实际启动并正在监视目录？也许许可证丢失？

# c# - MSTest 自定义测试通过消息

> ID：11943114
> 
> 赞同：3
> 
> 时间：2012-08-13T22:16:46.127
> 
> 标签：c#, mstest, visual-studio-2012

这是一个不寻常的问题，但我有一个带有 MSTest 的测试用例，它通过反射通过程序集并测试所有匹配某个模式的类型是否都是可序列化的。这一切都很好，给了我很好的结果。然而，在测试通过时看到一条自定义消息告诉我它找到了多少与模式匹配的类型（作为健全性检查）也会很有用。

有谁知道这是否可能，而不必一直到结果页面中的控制台输出？

**编辑**

我正在使用 VS 2012，并且希望自定义消息显示在测试通过的屏幕上，而不必一路输出以查看结果。

![在此处输入图像描述](../Images/1aa3ebcb9e3a7791a33cfbed1f6f731f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T22:23:29.947

Right click the column headers and go "Add/Remove columns..". Select "Output (StdOut)" and then you can do this:

```
Console.WriteLine("This is a message from my test!"); 
```

And it will be displayed like so:

![enter image description here](../Images/bbf15cdfe7847e1d15f0a8b975e32b75.png)

# javascript - HTML Canvas 间隔与 RequestAnimationFrame

> ID：11943120
> 
> 赞同：15
> 
> 时间：2012-08-13T22:17:50.480
> 
> 标签：javascript, canvas, html5-canvas

所以，也许这里完全是脑残。for 的语法`setInterval()`很清楚。每 x 毫秒做一些事情。这如何最好地翻译成使用`requestAnimationFrame()`?

我有大约 300 个对象，每个对象都应该以一定的间隔（每 8、6、2 等秒）执行一个动画序列？我怎样才能最好地使用`requestAnimationFrame()`每秒调用约 60 次的方法来完成此操作？可能有一个简单的答案，我只是，为了我的一生，无法弄清楚。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T02:20:12.437

要强制 requestAnimationFrame 坚持特定的 FPS，您可以同时使用两者！

```
var fps = 15;
function draw() {
    setTimeout(function() {
        requestAnimationFrame(draw);
        // Drawing code goes here
    }, 1000 / fps);
} 
```

有点奇怪，但不是世界上最令人困惑的事情。

您也可以使用 requestAnimationFrame 而不是 FPS，而是使用经过的时间，以便根据自上次调用以来的时间差绘制需要更新的对象：

```
var time;
function draw() {
    requestAnimationFrame(draw);
    var now = new Date().getTime(),
        dt = now - (time || now);

    time = now;

    // Drawing code goes here... for example updating an 'x' position:
    this.x += 10 * dt; // Increase 'x' by 10 units per millisecond
} 
```

这两个片段来自[这篇精美的文章](http://creativejs.com/resources/requestanimationframe/)，其中包含更多详细信息。

顺便问下好问题！我认为我也没有在 SO 上看到这个答案（而且我在这里太多了）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-13T22:25:25.377

`requestAnimationFrame`是相当低的水平，它只是做了你已经说过的：大约以 60fps 的速度被调用（假设浏览器可以跟上那个速度）。因此，通常您需要在此基础上构建一些东西，就像具有游戏循环的游戏引擎一样。

在我的游戏引擎中，我有这个（在此处进行分段/简化）：

```
window.requestAnimationFrame(this._doFrame);

...

_doFrame: function(timestamp) {
     var delta = timestamp - (this._lastTimestamp || timestamp);

     for(var i = 0, len = this.elements.length; i < len; ++i) {
         this.elements[i].update(delta);
     }

     this._lastTimestamp = timestamp;

     // I used underscore.js's 'bindAll' to make _doFrame always
     // get called against my game engine object
     window.requestAnimationFrame(this._doFrame);
 } 
```

然后我的游戏引擎中的每个元素都知道如何更新自己。在您的情况下，应该每 2、6、8 秒更新一次的每个元素都需要跟踪已经过去了多少时间并相应地更新：

```
update: function(delta) {
     this.elapsed += delta;

     // has 8 seconds passed?
     if(this.elapsed >= 8000) {
          this.elapsed -= 8000;  // reset the elapsed counter
          this.doMyUpdate(); // whatever it should be
     }
 } 
```

Canvas API 以及`requestAnimationFrame`相当低级的 API，它们是动画和游戏引擎之类的构建块。如果可能的话，我会尝试使用现有的，比如 cocos2d-js 或者这些天里的其他任何东西。

# javascript - 嵌入式 youtube 播放器的自定义控件未显示在 :hover 在 IE 上

> ID：11943122
> 
> 赞同：0
> 
> 时间：2012-08-13T22:18:21.983
> 
> 标签：javascript, html, css, youtube

我有一个带有一些自定义控件的无铬嵌入式 youtube 播放器。控件与 iframe 一起绝对定位在 div 中，就像这样，并且在用户将鼠标悬停在视频上之前是隐藏的：

```
psuedo-code:
<div id="video">
   <youtube iframe, embedded via JavaScript>
   <div id="controls></div>
</div> 
```

这很好，很漂亮，可以在 Webkit 和 Gecko 下完美运行；将鼠标悬停在视频上算作鼠标悬停在其包含元素上。在 IE 9 中，情况并非如此；控件仅在显式将鼠标悬停在视频 div 而不是 iframe 上时显示。

我能做些什么？CSS 解决方案是最好的，但如果真的有必要，我会使用 Javascript。

# java - Not waiting for a method call to finish before calling another method

> ID：11943129
> 
> 赞同：0
> 
> 时间：2012-08-13T22:18:41.820
> 
> 标签：java, swing, frame

I need a bit of help. I'm just after coming back to programming after being made unemployed.

I'm trying to learn Java and I have run into a difficulty.

The problem is that I want to call a method that should ask the user for an input by pressing a button. This will return the chouce back to the class that called the method.

```
 public class ButtonMain {
        private static CreateButton cButton;

        public static void main(String[] args) {
            cButton = new CreateButton();
            cButton.launchButton();
            switch(cButton.getSelect()) {
                case 'a' : System.out.println("German Car");
                    break;
                case 'b' : System.out.println("Japanese Car");
                    break;
                default : System.out.println("Incorrect Car Selected");               
                    break;
            }
        }
    } 
```

The rest of the code is as follows

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CreateButton implements ActionListener {
    private JFrame mainFrame;
    private JLabel label1;
    private JButton button1;
    private JButton button2;
    private char select = ' ';

    public CreateButton() {
    }

    public void launchButton() {
        createFrame();
        createLabel();
        createButton1();
        createButton2();
    }

    private void createFrame() {
        mainFrame = new JFrame("Cars");
        mainFrame.setSize(200, 200);
        mainFrame.setLocation(300, 300);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.setVisible(true);
        mainFrame.setPreferredSize(null);
        mainFrame.setLayout(new java.awt.GridLayout(3, 1));
    }

    private void createLabel() {
        label1 = new JLabel("Cars", SwingConstants.CENTER);
        label1.setSize(200, 100);
        mainFrame.getContentPane().add(label1, BorderLayout.CENTER);
    }

    public void createButton1() {
        button1 = new JButton("Mercedes");
        button1.setSize(200, 50);
        button1.addActionListener(this);
        mainFrame.getContentPane().add(button1, BorderLayout.CENTER);
    }

    private void createButton2() {
        button2 = new JButton("Lexus");
        button2.setSize(200, 50);
        button2.addActionListener(this);
        mainFrame.getContentPane().add(button2, BorderLayout.CENTER);
    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == button1) {
            select = 'a';
            System.out.println(select);
        }
        else if (e.getSource() == button2) {
            select = 'b';
            System.out.println(select);
        }
    }

    public char getSelect() {
        return select;
    }
} 
```

What is happening is that the output should read a or b and then whether German or Japanese cars was selected but i'm getting the incorrect car selected.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:27:24.970

问题是在调用 main 时您将没有选择信息。最好在 ActionListener 本身中处理这个问题。

*或者*

一旦实现了一个 Swing 组件，所有可能影响或依赖于该组件状态的代码都应该在事件调度线程中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:31:09.087

代码工作正常。它是您的代码正在运行，没有任何东西可以阻止它。`cButton.launchButton()`简单地显示框架和运行后的代码。由于`select`已初始化为空格字符，因此程序启动时会打印“Incorrect Car Selected”。您对按钮的操作正常。您的 switch 语句应该在`actionPerformed`方法中。

```
 public void actionPerformed(ActionEvent e) {
    if (e.getSource() == button1) {
        select = 'a';
        System.out.println(select);
    } else if (e.getSource() == button2) {
        select = 'b';
        System.out.println(select);
    }

    switch (getSelect()) {
    case 'a':
        System.out.println("German Car");
        break;
    case 'b':
        System.out.println("Japanese Car");
        break;
    default:
        System.out.println("Incorrect Car Selected");
    }

} 
```

# underscore.js - AngularJS 限制到最后 2 条记录

> ID：11943130
> 
> 赞同：6
> 
> 时间：2012-08-13T22:18:44.503
> 
> 标签：underscore.js, angularjs

AngularJS [`filter`](https://docs.angularjs.org/api/ng/filter/filter)、[`order`](https://docs.angularjs.org/api/ng/filter/orderBy)、 或[`limitTo`](https://docs.angularjs.org/api/ng/filter/limitTo)for的组合可以[`ng-repeat`](https://docs.angularjs.org/api/ng/directive/ngRepeat)模仿[`_.last`](http://underscorejs.org/#last)UnderscoreJS 中的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T13:23:51.363

Gloopy 的答案是正确的，但只是一个注释......如果你想使用下划线，你可以：

```
myApp.run(function($rootScope) {
  $rootScope._ = _;
});

<div ng-repeat="item in _.last(items)"> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-13T22:39:57.583

如果我正确理解你的问题，我认为[这个小提琴](http://jsfiddle.net/Nu7rZ/)会做到这一点。

对于此数据：

```
$scope.items = [{sort: 1, name: 'First'}, 
                {sort: 2, name: 'Second'}, 
                {sort: 3, name: 'Third'}, 
                {sort: 4, name:'Last'}]; 
```

如果您不想实际对数组进行排序，而只是按原样获取数组的最后两项（如下划线的最后一项），则可以尝试负限制（这将显示第三，最后）：

```
<div ng-repeat="item in items | limitTo:-2"> 
```

另请注意，您可以像此示例一样将过滤器链接在一起，对数据进行反向排序并获取 2 个项目（这将显示 Last、Third）：

```
<div ng-repeat="item in items | orderBy:'sort':true | limitTo:2"> 
```

# android - Android AsyncTask onPreExecute not called indeterminantly

> ID：11943133
> 
> 赞同：2
> 
> 时间：2012-08-13T22:19:13.133
> 
> 标签：android, android-asynctask

I have an AsyncTask that is supposed to show a progress bar while it uploads some stuff via Internet. Sometimes it works like a charm and sometimes it does not show any progress bar. Here is the code:

```
public class Upload extends AsyncTask<Void, Void, Void> {

    private ProgressDialog dialog = new ProgressDialog(Activity.this);

    protected void onPreExecute() {
        dialog = ProgressDialog.show(Activity.this, "wait...", "", true, true);
    }
    @Override
    protected Void doInBackground(Void... params) {
        //upload stuff
        return null;
    }

    protected void onPostExecute(Void result) {

        try {
            if (dialog.isShowing())
                dialog.dismiss();
            dialog = null;
        } catch (Exception e) {
            // nothing
        }
        Intent next = new Intent(getApplicationContext(), SecondActivity.class);
        startActivity(next);
        }
    }
} 
```

The doInBackground and onPostExecute work always, and sometimes altogether it works like a charm. But sometimes, there is no progress bar while it is uploading. Is this a race condition? I do not think so, but I cannot find any explanation.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:25:05.033

您在课堂上创建了两次对象。`ProgressDialog.show`已经返回了一个创建的对象`ProgressDialog`，但是您首先在顶部实例化了它。`ProgressDialog`应该实例化一次，因此请尝试删除顶部的实例化并重试，如下所示：

```
private ProgressDialog dialog;

protected void onPreExecute() {
    dialog = ProgressDialog.show(Activity.this, "wait...", "", true, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T21:01:55.613

也许是因为 void 参数导致了这个问题。只需尝试使用 Integer 作为参数。：

```
public class Upload extends AsyncTask<Integer, Integer, Integer> 
```

# outlook - Outlook out of memory error for user with large PST files with a VSTO addin

> ID：11943135
> 
> 赞同：3
> 
> 时间：2012-08-13T22:19:34.130
> 
> 标签：outlook, add-in

I had a few questions regarding memory in Outlook 2010, Windows 7 64 bit. We have a customer machine, who has Outlook running, with a large number of PST files at about 50 G size. We also have an outlook addin that Outlook loads. We find that on occasion that this addin runs out of memory, doesn’t have any memory to continue with its stuff. Also some of the copy and paste operations in Outlook fail. This problem for the addin doesn’t happen on any of the 100’s of other machines we have the addin running.

Also the number of handles used is over 9,000 (even without any addins), and with addins added it reaches about 11k sometimes. Will this be a problem even in High end Windows 7 64 bit machine?

I have few questions:

Have you guys tested with these large PST files and was everything fine for you?

Is there any way to increase the maximum allocated amount available per addin or for all addins? A registry key perhaps?

Outlook seems to start throwing these errors when it reaches about 300 Meg of memory, even though there is plenty of memory still available. Shouldn’t it grow to 1G if it needs to?

# datagridview - Filling a datagridview column separately from the datasettableadapter

> ID：11943143
> 
> 赞同：0
> 
> 时间：2012-08-13T22:20:26.440
> 
> 标签：datagridview

I have set up a data grid view and linked it to my data and filled it with the adapter and all that is working just fine. What I would like to do is add a column to the beginning of the data grid view and add an image to the first column that has the file name of the current first column of which will wind up as the second column.

I have added the column and set it up for images already and also set a default image if the value is not set. I am having trouble figuring out how to read what is in column2 and then loading the image with the file name (edited a bit to match my naming schemes) into column1\. I cant figure out if I need to do this to the grid view, the datasettableadapter, or some other place. I tried iterating throw the rows to read cell2 then load image for cell1 but I can't set currentrow.

I ended up using CellPainting because CellFormating was giving me some strange output. Below is the code I use. Cells[0] is the cell I would like to put the image in. Cells[1] is the name of the image that I use as file name.

```
 private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
    {
        string monsterName = "";

        try
        {
            if (this.dataGridView1.Columns[e.ColumnIndex].Name == "monsterNameDataGridViewTextBoxColumn")
            {
                if (e.Value != null && e.RowIndex > -1)
                {
                    monsterName = (string)this.dataGridView1.Rows[e.RowIndex].Cells[1].Value;
                    this.dataGridView1.Rows[e.RowIndex].Cells[0].Value = new Bitmap(@"C:\Users\Chad\Pictures\Dark Summoner\C_" + monsterName + @".png");
                }
            }
        }

        catch (ArgumentException)
        {
           toolStripStatusLabel1.Text = monsterName + " image file does not exist.";
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:04:15.327

您可以通过几种方式处理此问题。

1) 处理 datagridview 的 CellFormatting 事件并在其中填充单元格的图像。该事件有一个参数可以访问它试图格式化的当前行/列。因此，您可以从单元格 2 中读取图像文件，并在此基础上设置单元格 1 的图像。

2) 在数据源中预填充图像数据。因此，如果您的数据适配器正在填充数据表，例如，您可以在加载数据表后加载/填充数据表中的图像。

# php - Phing 控制台宽度：覆盖或检索实际宽度值

> ID：11943150
> 
> 赞同：0
> 
> 时间：2012-08-13T22:21:10.697
> 
> 标签：php, phing

我正在开发一个需要了解当前控制台宽度的 cli php 脚本（定期检查 `tput col`、在列中输出数据、换行符等）。

这在直接调用脚本时可以正常工作，但是当从 phing 目标运行脚本时，无论实际控制台宽度如何，无论是更大或更小，宽度值都会返回为“80”。

有没有办法确定“真实”控制台宽度，或者将 phing 的默认值 80 覆盖为更大的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:55:39.897

事实证明，这是由于 tput cols 在标准输出和标准错误被重定向时改变了它的行为。

替代解决方案是改用“stty size”。

# codeigniter - 保持会话活跃

> ID：11943152
> 
> 赞同：1
> 
> 时间：2012-08-13T22:21:34.837
> 
> 标签：codeigniter, session

我正在编写一个公司网站，它有一个用于控制数据的管理页面。当我浏览论坛和用户指南时，我了解到 codeigniter 的会话会停留 5 分钟，并在创建后被销毁。我不希望在管理员操作数据时发生这种情况:(

我是否应该在属于管理页面的控制器中继续写“session_start()”以保持会话新鲜和活跃？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:27:00.330

你为什么不改变你的会话配置？

```
$config['sess_cookie_name']     = 'yoursite';
$config['sess_expiration']      = 7200;   <- make this longer
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;   <- make this longer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:30:55.500

我一直在使用自动加载，但从来不知道它会为我调用 session_start() ：/

# php - 用php验证空字段

> ID：11943156
> 
> 赞同：0
> 
> 时间：2012-08-13T22:22:27.610
> 
> 标签：php, validation

我需要用 php 和 javascript 验证一个空字段，但是这两种方法都失败了。

```
<form method="POST" name="contact_form"
action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
<input type="text" name="pickupaddress"  value="<?
 if($pickupaddress == ''){ 
echo "";} 
else{echo htmlentities($pickupaddress);}?> " id="pickupaddress"/>
<input type ="submit" name="submit" value"Reserve"/> 
</form>

//////// Php validation DOES NOT WORK////////

$pickupaddress ='';
$err ='';

$pickupaddress = $_POST['pickupaddress'];

if($pickupaddress == ''){   //if empty field, I also tried == ""
$err.="Please provide pick up address.";
}

///// Javascript validation does not work.

if(form.pickupaddress ==""){
alert("empty address!");
} 
```

//当我点击提交时没有任何反应。//我认为问题出在

```
htmlentities($pickupaddress); 
```

//谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:30:14.173

在 php 方面，您可以尝试修剪该值，然后在下一行使用 empty()，但这也会使 0、false、null 和其他此类值无效。或者您可以尝试使用 isset。

对于 javascript 方面，您可以尝试此功能：

```
function IsEmpty(aTextField) {
    if ((aTextField.value.length==0) ||
       (aTextField.value==null)) {
        return true;
    }
    else { return false; }
} 
```

在这里找到：http: [//www.codetoad.com/javascript/isempty.asp](http://www.codetoad.com/javascript/isempty.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:59:52.363

希望这是更简单的答案：

```
$pickupaddress = trim($_POST['pickupaddress']); //trims the string
    if (empty($pickupaddress)){   //if empty field
    $err.="Please provide pick up address.";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-04T11:52:11.737

```
$cid = $_POST['category'];

if (!empty($_POST['category']))
{
   echo "<script>alert('empty field');</script>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T22:26:15.080

你在哪里定义`pickupaddress`？是在表格之前还是之后？如果未定义变量，并且根据您的服务器配置，`value`输入字段可能是

```
Notice: undefined variable pickupaddress 
```

从而使价值`!= ''`。

查看您的页面源以确保`value`确实为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T22:35:19.440

你的字符串中有一个 spave ""：`echo htmlentities($pickupaddress);}?> "` 也许这就是原因，因为它不是一个空字符串，而是一个空格？

```
<form method="POST" name="contact_form"
action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">

<input type="text" name="pickupaddress"  value="<?
if($pickupaddress != '') {
    echo htmlentities($pickupaddress);
}?>" id="pickupaddress"/>
<input type ="submit" name="submit" value"Reserve"/> 

</form> 
```

我猜你可能想检查是否设置了帖子值：

```
if(isset($_POST['pickupaddress'])) {
    $pickupaddress = $_POST['pickupaddress'];
} 
```

php方式对我有用；）（如果我不写任何东西，则会显示该消息）

# mysql - 多行查询结果的Mysql触发循环

> ID：11943163
> 
> 赞同：10
> 
> 时间：2012-08-13T22:22:57.347
> 
> 标签：mysql, loops, triggers, multiple-results

嗨，我有一个包含许多表和外键的数据库，像这样

```
CREATE TABLE IF NOT EXISTS `articulos` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(63) NOT NULL,
  `contenido` text NOT NULL,
  `normas_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=138 ;

CREATE TABLE IF NOT EXISTS `aspectosambientales` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(63) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=28 ;

CREATE TABLE IF NOT EXISTS `aspectosambientales_articulos` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `aspectosambientales_id` int(11) NOT NULL,
  `articulos_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_aspaspectosambientales1`      (`aspectosambientales_id`),
  KEY `fk_aspee` (`articulos_id`) 
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 UTO_INCREMENT=225 ;

CREATE TABLE IF NOT EXISTS `empresas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `razonsocial` varchar(127) DEFAULT NULL,
  `nit` varchar(63) DEFAULT NULL,
  `direccion` varchar(127) DEFAULT NULL,
  `telefono` varchar(15) DEFAULT NULL,
  `web` varchar(63) DEFAULT NULL,
  `auth_user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

CREATE TABLE IF NOT EXISTS `articulos_empresas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `empresas_id` int(11) NOT NULL,
  `articulo_id` int(11) NOT NULL,
  `acciones` text,
  `responsable` varchar(255) DEFAULT NULL,
  `plazo` date DEFAULT NULL,
  `cumplido` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_normas_empresas_empresas1` (`empresas_id`),
  KEY `fk_normas_empresas_normas1` (`normas_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

并且我需要创建一个触发器以在插入“empresas”后填充“articulos”中与新“empresas”选择的“aspectosambientals”匹配的所有行的“articulos_empresas”。

我通过这个查询得到了所有的“articulos”

```
SELECT articulos_id FROM aspectosambientales_articulos 
    WHERE  aspectosambientales_id = ID 
        -- ID is the aspectosambientales_id selected when the 'empresas' row is created
        --  maybe something like NEW.aspectosambientales_id 
```

但我不知道如何在触发器中为查询中的每个结果创建一个像“for loop”这样的循环

有些像这样：

```
CREATE TRIGGER 'filltableae' AFTER INSERT ON 'empresas' 
FOR EACH ROW
BEGIN 
DECLARE arrayresult = (SELECT articulos_id FROM aspectosambientales_articulos 
    WHERE  aspectosambientales_id = NEW.aspectosambientales_id)
--- here is when i have to do the loop for all the results
--- for ids in arrayresults
---  insert into articulos_empresas ('',NEW.id, ids, '', '' ,'','')
--- endfor
END 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-14T01:03:36.737

基于@Razvan的回答，我在这里留下了触发器的代码，所以也许可以帮助别人

```
DROP TRIGGER IF EXISTS AEINST;
DELIMITER //
CREATE TRIGGER AEINST AFTER INSERT ON procesos_aspectos
FOR EACH ROW
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE ids INT;
    DECLARE cur CURSOR FOR SELECT articulos_id FROM aspectosambientales_articulos WHERE aspectosambientales_id = NEW.aspectosambientales_id;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    OPEN cur;
        ins_loop: LOOP
            FETCH cur INTO ids;
            IF done THEN
                LEAVE ins_loop;
            END IF;
            INSERT INTO articulos_empresas VALUES (null,ids, NEW.empresas_id,null,null,null,null);
        END LOOP;
    CLOSE cur;
END; //
DELIMITER ; 
```

再次感谢！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-13T22:32:01.987

据我所知，您可以使用游标遍历 SELECT 查询的结果。见这里：[http ://dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

# python - 使用python进行网络数据库？

> ID：11943171
> 
> 赞同：-3
> 
> 时间：2012-08-13T22:23:54.580
> 
> 标签：python

有没有办法在加载 HTML 页面时运行 python 脚本，在页面上放置变量并基于`<input>`s 设置 python 变量？我已经知道python，并且不想为此学习另一种语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T22:25:14.987

为此，您可以使用[Flask](http://flask.pocoo.org/)或[Django等 Web 框架。](https://www.djangoproject.com/)它允许您使用 Python 构建网页。它还允许您使用可以从中检索和存储数据的数据库。

Flask 和 Django 都使用模板引擎，您可以使用它来创建 HTML 模板。您可以将变量传递给这些模板，然后可以将值放置在您想要的位置。

# user-interface - DHTMLX 或 EXTJS4 中的 RTL 语言支持

> ID：11943174
> 
> 赞同：0
> 
> 时间：2012-08-13T22:24:05.427
> 
> 标签：user-interface, extjs, openlayers, dhtmlx

我开发了使用 openlayers 的地图 Web 应用程序。在这个应用程序中，我想使用 DHTMLX 或 Extjs4 作为应用程序前端。我的应用程序语言布局是 RTL。
DHTMLX 或 EXTJS4 中哪一个支持 RTL？
我在一些博客中看到说 DHTMLX RTL 支持仅包含在专业版中，但我想使用 GPL 版本的 DHTMLX。我可以在 GPL 版本的 DHTMLX 中使用 rtl 支持吗？
我在 ExtJs4.1 中看不到对 RTL 的任何支持。它们在 ExtJs4.2 中支持 RTL 我关于 Extjs4.1 的问题是我可以在 ExtJs4.1 的某些小部件中使用 RTL，例如树面板和其他一些小部件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:44:52.163

ExtJS 只需要来自后端的 JSON 数据。因此，如果您的 RTL 可以将 json 发送到 treegrids 或普通网格，您应该可以使用 ExtJS。

# php - 使用带有代码点火器电子邮件类的变量

> ID：11943176
> 
> 赞同：0
> 
> 时间：2012-08-13T22:24:16.737
> 
> 标签：php, codeigniter, sendmail

我正在设置一个系统，当用户创建帐户时，会发送电子邮件，发送带有令牌的链接以验证他们的帐户并将状态从挂起更改为活动。

在创建用户功能中，当检查完所有其他条件后将它们发送到确认页面时 - 我正在我的模型中加载电子邮件验证功能，该功能从数据库中提取某些信息并向他们发送电子邮件。我在发送电子邮件时遇到问题，并且不确定变量是否能够以这种方式传递，尽管我已经回应了它们并且它们是存在的。

这是我的控制器部分：

```
$this->load->model('user_model');
            if($query = $this->user_model->create_member())
            {
                $this->load->model('User_model');
                $this->User_model->varification_email();
                $data['main_content'] = 'account/welcome';
                $this->load->view('includes/templates/main_page_template', $data);

            } 
```

和模型部分：

```
f

unction varification_email()
    {
            $query = $this->db->query('SELECT * FROM users order by id desc LIMIT 1');

            foreach ($query->result() as $user)
            {
                $this->load->library('email');
                $this->email->from('noreply@blah.org', 'noreply');
                $this->email->to($user->email); 
                $this->email->subject('test');
                $this->email->message('test');    
                $this->email->send();

        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:32:58.633

只是为了确定 - 您是否有正确运行和设置的 SMTP 邮件服务器？如果你在本地开发，你仍然需要一个 SMTP 服务器来发送电子邮件。

对于开发，使用[Papercut](http://papercut.codeplex.com/)等工具来测试电子邮件通信。

# opengl - SDL openGL 问题，没有看到 openGL 绘图

> ID：11943177
> 
> 赞同：0
> 
> 时间：2012-08-13T22:24:20.353
> 
> 标签：opengl, sdl

我正在使用最新的 cygwin 使用 cygwin SDL 1.2.15

这是我使用 SDL 和 openGL 的代码

```
#include <SDL/SDL.h>
#include <SDL/SDL_opengl.h>
#include <iostream>

size_t sx=600, sy=600, bpp=32;

void render(void) {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();                                       // set location in front of camera
  //glTranslated(0, 0, -10);

    glBegin(GL_QUADS);                                      // draw a square
       glColor3d(1, 0, 0);
       glVertex3d(-2,  2,  0);
       glVertex3d( 2,  2,  0);
       glVertex3d( 2, -2,  0);
       glVertex3d(-2, -2,  0);
   glEnd();

   glFlush();
   SDL_GL_SwapBuffers();
   GLenum e;
   while ((e =glGetError()) != GL_NO_ERROR)
          std::cout<<"Error "<< e << std::endl;
}

int input(void) {
    SDL_Event event;
    while (SDL_PollEvent(&event))
        if (event.type == SDL_QUIT || (event.type == SDL_KEYUP &&        event.key.keysym.sym     == SDLK_ESCAPE)) return 0;
   return 1; 
} 
```

这是我的主要功能

```
int main(int argc, char *argv[]) {
    SDL_Surface *surf;

    if (SDL_Init(SDL_INIT_EVERYTHING) != 0) return 0;
    if (!(surf = SDL_SetVideoMode(sx, sy, bpp, SDL_OPENGL))) return 0;

    glViewport(0, 0, sx, sy);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0, (float)sx / (float)sy, 1.0, 100.0);
    glMatrixMode(GL_MODELVIEW);

    glClearColor(0, 0, 0, 1);
    glClearDepth(1.0);
    glEnable(GL_DEPTH_TEST);
    GLenum e;
    while ((e =glGetError()) != GL_NO_ERROR)
          std::cout<<"Error "<< e << std::endl;

    for (;;) {
        if (!input()) break;
        render();
        SDL_Delay(10);
    }

    SDL_FreeSurface(surf);
    SDL_Quit();
    return 0;
} 
```

它编译没有错误，但是当我运行它时，只显示窗口，现在是openGL矩形..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:31:59.163

您已经设置了一个近平面：

```
gluPerspective(45.0, (float)sx / (float)sy, 1.0/*near plane*/, 100.0); 
```

靠近相机的所有内容都会被剪裁。

您的四边形位于平面 z = 0 中。尝试将其向后移动一点。

```
glBegin(GL_QUADS);                                      // draw a square
   glColor3d(1, 0, 0);
   glVertex3d(-2,  2,  5);
   glVertex3d( 2,  2,  5);
   glVertex3d( 2, -2,  5);
   glVertex3d(-2, -2,  5);
glEnd(); 
```

我不记得 Z 是否面向相机，因此您可能需要负 Z 值。

您还需要注意面部剔除。最好禁用它以确保 ( `glDisable( GL_CULL_FACE )`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T09:14:38.710

尝试更改 SDL 窗口的黑色。有时它会用黑色渲染绘图……这可能会有所帮助！

# javascript - 谷歌地理编码 API

> ID：11943186
> 
> 赞同：0
> 
> 时间：2012-08-13T22:25:25.753
> 
> 标签：javascript, google-maps

有人可以向我解释以下行为：

```
function getLatLong() 
    {
        var geocoder = new google.maps.Geocoder();
        var result = "";
        geocoder.geocode ( { 'address': "London", 'region': 'uk' }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
            result = results[0].geometry.location;
            alert('Im called second');
            } else {
               alert("Geocode was not successful for the following reason: " + status);
            }
        });

        alert('Im called first');  
        return result;
    } 
```

在第一个警报之前如何调用第二个警报消息？我有一个问题，我试图返回分配的变量“结果”的值，但它仍然作为空字符串返回，即使它确实从结果 [0].geometry.location 分配了一个值。我有一种可怕的感觉，我在这里遗漏了一些非常明显的东西：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:34:17.140

`geocoder.geocode()`是一种异步方法，这意味着它会立即返回而不会阻塞，但仅在地理编码调用（可能是对谷歌的地理编码服务）完成后才运行指定的函数。

发生的情况是`alert('Im called first')`在另一个呼叫完成之前调用了该呼叫，这很可能是因为地理编码呼叫必须通过 Internet。这两个调用的顺序可能会有所不同，这完全取决于地理编码完成所需的时间。

要解决此问题，您不能从此函数返回结果。相反，您需要提供一个在地理编码完成时调用的函数以充当回调，以便您可以使用现在填充的结果。

例如

```
function getLatLong(completeCallback) 
{
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode ( { 'address': "London", 'region': 'uk' }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var result = results[0].geometry.location;
            completeCallback(result);
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:36:56.823

o原因是 geocoder.geocode 调用使用回调来传递结果。对 geocoder.geocode 的调用仅持续足够长的时间以向地理编码器服务发送请求，然后继续执行下一行（非回调），即“我首先调用”警报。回调中的所有代码都“保存以备后用”，并在收到地理编码器响应时调用。

您将不得不相应地编写代码。您必须在回调中获取结果并从那里继续处理，而不是从原始函数调用返回结果。它可以使 javascript 控制流有点难以遵循。

# http - 自动点击 Google+ 分享按钮

> ID：11943189
> 
> 赞同：1
> 
> 时间：2012-08-13T22:26:11.010
> 
> 标签：http, https, google-apps-script

我正在寻找一种方法来自动单击此示例链接中的共享按钮：

`https://plus.google.com/share?url=http://www.youtube.com/watch?v%3DQyVkTxUyFP4&feature=share&source=yt`

有没有办法通过http请求来做到这一点？或者至少是谷歌脚本？

# visual-studio-2010 - Windows 窗体 - 循环依赖？

> ID：11943194
> 
> 赞同：0
> 
> 时间：2012-08-13T22:26:23.070
> 
> 标签：visual-studio-2010, c++-cli

我正在将我的 C# windows 窗体应用程序转换为 C++\CLI windows 窗体应用程序。

我的 C# 版本在表单之间存在循环依赖关系。例如，“主”窗体创建“Form2”并显示它，当 Form2 关闭时，它通过 Main.activeWindow 访问静态主窗体实例重新显示隐藏的“主”窗体（在 C++ 中，这需要循环头文件和类之间的依赖关系）。两种形式之间也有更多的交流 - 即。'Form2' 更改表单'Main' 中的按钮颜色，或更新属性。

如何打破这种依赖关系（我只是不想弄乱前向声明等），但仍然具有相同的功能？

谢谢你的帮助，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:31:57.860

唯一的方法是将类定义拆分为普通的 .h/.cpp 文件。包括 .h 中的声明和 .cpp 中的主体，它们可以在其中看到两个类定义。

# knockout.js - KO：在 VM 阵列中查找 ID 以填充跨度并选择选择选项

> ID：11943199
> 
> 赞同：0
> 
> 时间：2012-08-13T22:27:10.587
> 
> 标签：knockout.js

我很难弄清楚以下 KO 设置有什么问题。 [http://jsfiddle.net/edsinek/m4rUz/](http://jsfiddle.net/edsinek/m4rUz/)

我正在模拟我将从服务器获取的数据（通过硬编码数据结构），因此在整个过程中都使用了 ID。我正在尝试填充跨度的文本，而我得到的是一个 ID，我想用它来在 VM 的数组中查找名称。

选择也是如此 - 我希望根据 ID 预先选择值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:37:30.193

在某些地方，您`()`在访问 observable 时缺少 a ，并且在您的绑定字符串中，您缺少`$root.`函数的前缀。

此外，回调内部的返回值`$.each`仅用于指示 $.each 循环停止（如果您返回 false）。您不能从 $.each 回调内部返回一个值，并期望它从外部函数返回一个值。所以我将您的`materialById`函数更改为注释版本（但添加`()`了 observableArray）。

这是更新的小提琴：http: [//jsfiddle.net/antishok/m4rUz/2/](http://jsfiddle.net/antishok/m4rUz/2/)

# excel - 如何确定工作表单元格在 VBA 中是否可见/显示？

> ID：11943200
> 
> 赞同：10
> 
> 时间：2012-08-13T22:27:17.543
> 
> 标签：excel, vba

我需要查找屏幕上是否可见单元格。

可见，我不是说隐藏。我特别想找出一个单元格当前是否显示在活动工作表中，或者它是否未显示，即：它已从可见活动工作表中滚动出来。

我在网上看了，只能找到以下似乎对我不起作用的代码：

```
Private Sub CommandButton1_Click()
    With Worksheets(1).Cells(10, 10)
        'MsgBox "Value: " & .Value & ", Top: " & .Top & ", Left: " & .Left
        Dim visibleCells As Range
        Set visibleCells = Range("A1").CurrentRegion.SpecialCells(xlCellTypeVisible)
        If Intersect(Worksheets(1).Cells(10, 10), visibleCells) Is Nothing Then
            MsgBox "This cell is not visible."
        End If
    End With
End Sub 
```

在此先感谢您的帮助，

马旺

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-13T22:35:52.033

这是一个可以满足您要求的功能：

```
Function CellIsInVisibleRange(cell As Range)
CellIsInVisibleRange = Not Intersect(ActiveWindow.VisibleRange, cell) Is Nothing
End Function 
```

至少我认为是的。直到现在我才知道 VisibleRange 属性。

像这样称呼它：

```
If CellIsInVisibleRange(ActiveSheet.Range("A35")) Then
    MsgBox "Cell is visible"
Else
    MsgBox "Cell isn't visible"
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-15T01:52:09.370

@DougGlancy 的函数在大多数情况下都可以使用，但如果 R​​ange 的行高或列宽设置为零，它会失败。此函数添加了处理该问题的逻辑以及一些错误处理。

```
Function Range_IsVisibleInWindow(ByVal target As Excel.Range) As Boolean
' Returns TRUE if any cell in TARGET (Range) is visible in the Excel window.
'
'   Visible means (1) not hidden, (2) does not have row height or column width of
'   zero, (3) the view is scrolled so that the Range can be seen by the user at
'   that moment.
'
'   A partially visible cell will also return TRUE.

    If target Is Nothing Then
        ' Parameter is invalid.  Raise error.
        Err.Raise 3672, _
                  "Range_IsVisibleInWindow()", _
                  "Invalid parameter in procedure 'Range_IsVisible'."

    Else
        ' Parameter is valid.  Check if the Range is visible.
        Dim visibleWinLarge As Excel.Range
        Dim visibleWinActual As Excel.Range

        On Error Resume Next
        Set visibleWinLarge = Excel.ActiveWindow.VisibleRange ' active window range -INCLUDING- areas with zero column width/height
        Set visibleWinActual = visibleWinLarge.SpecialCells(xlCellTypeVisible) ' active window range -EXCLUDING- areas with zero column width/height
        Range_IsVisibleInWindow = Not Intersect(target, visibleWinActual) Is Nothing ' returns TRUE if at least one cell in TARGET is currently visible on screen
        On Error GoTo 0

    End If
End Function 
```

# java - 将 flex sdk 从 4.6 更改为 3.5 后出现一般错误 1084

> ID：11943203
> 
> 赞同：0
> 
> 时间：2012-08-13T22:27:39.320
> 
> 标签：java, eclipse, apache-flex, flash-builder

我正在使用带有 sdk 4.6 的 flex builder 4.0。但刚刚发现我获得的项目是建立在 3.5 sdk 上的。所以，我下载了 flex sdk 3.5 并在 flex builder 中添加了库引用。然后在 eclipse *clean & build*之后显示一个通用错误 1084（一千次）。

> 1084：语法错误：在程序结束之前需要右括号。

没有*path*，我不能双击它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:47:14.033

解决了将 swc 的 sdk 3.5 库添加到项目中的问题，在 Flash Builder中使用*Add SWC Folder* on *Flex Build Path 。*此外，将*框架链接*设置为*Merged into code*。现在它与两个 sdk 一起工作就像小菜一碟。

# r - shapefile到R中的神经网络

> ID：11943208
> 
> 赞同：4
> 
> 时间：2012-08-13T22:28:16.580
> 
> 标签：r, networking, nodes, shapefile, edges

我需要`SpatialLinesDataFrame`在 R 的神经网络中转换道路类型的 shapefile (ESRI)。

我不知道如何删除形状的节点或顶点。确定节点之间每条边的长度。使用这些参数，我可以使用数据包（网络）创建网络。

摘要：R 中 igraph 网络的输入 shapefile。

谢谢你来自智利南部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:32:43.947

这里试一试——

```
library(rgdal)
library(igraph)

dsn <- system.file("vectors", package = "rgdal")[1]
sl <- readOGR(dsn=dsn, layer="kiritimati_primary_roads")
lines2xcoord <- function(lns) sapply(lns@Lines, function(l) l@coords[,1])
lines2ycoord <- function(lns) sapply(lns@Lines, function(l) l@coords[,2])

x <- unlist(sapply(sl@lines, lines2xcoord))
y <- unlist(sapply(sl@lines, lines2ycoord))

g <- graph.empty(n=length(x), directed=FALSE)
V(g)$lat <- x
V(g)$lng <- y
e <- c(t(matrix(c(head(V(g),-1),tail(V(g),-1)), ncol=2)))
add.edges(g,e) 
```

现在`g`是带有线条的 igraph。但是，它错误地假定要连接 shapefile 中的线。此外，在此示例中，它不存储纬度/经度，而是投影坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-05T13:50:27.587

shp2graph包可以将对象[转换](https://cran.r-project.org/web/packages/shp2graph/shp2graph.pdf)`SpatialLinesDataFrame`为 igraph 对象。看看`nel2igraph`功能。以下是从帮助文件中获取的示例：

```
data(ORN)
rtNEL<-readshpnw(rn, ELComputed=TRUE)
#Add the edge length as the weight for graph
igr<-nel2igraph(rtNEL[[2]],rtNEL[[3]],weight=rtNEL[[4]])
plot(igr, vertex.label=NA, vertex.size=2,vertex.size2=2)
#plot(rn) 
```

`rn`是`SpatialLinesDataFrame`先转换成list对象，再转换成igraph对象的对象。

# asp.net-mvc - 使用 ViewModel 设计 MVC 存储库

> ID：11943210
> 
> 赞同：7
> 
> 时间：2012-08-13T22:28:37.280
> 
> 标签：asp.net-mvc, model-view-controller, repository, viewmodel

我想创建一个存储库类来将我的数据逻辑与我的控制器分开。我正在使用 ViewModel 来表示一些数据，这些数据将填充来自不同表的数据。

以下是我的一些问题：

1.  对于像这样的方法`GetAll()`，我应该返回`IQueryable<MyViewModel>`or`IQueryable<Entity>`吗？如果我返回视图模型，我该如何处理`GetAll()`拉动数千条记录的问题？
2.  我是否为我的自定义 ViewModel 类创建了一个构造函数，该构造函数将实体作为参数来进行映射？（我仍然不熟悉 automapper，所以只需要从设计的角度了解如何做到这一点）

同样，我主要关心的是一种`GetAll()`可以提取许多记录的方法。如果我做了一个 foreach 循环将每个实体转换为 ViewModel 似乎会产生很多开销。我的想法是在自定义 ViewModel 类中放置一个引用`IQueryable<Entity>`以从集合中访问，并让 ListViewModel 只有索引器或类似引用集合属性的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T05:42:23.350

> 1) 对于像 GetAll() 这样的方法，我是返回 IQueryable 还是 IQueryable？如果我返回视图模型，我该如何处理获取数千条记录的 GetAll()？

`IQueryable<Entity>`. 存储库不处理视图模型。将存储库视为在单独的类库中定义的东西，它不引用您的视图模型所在的 ASP.NET MVC 应用程序。引用此库的是 ASP.NET MVC 应用程序。

> 2) 我是否为我的自定义 ViewModel 类创建了一个构造函数，该构造函数将实体作为参数来进行映射？（我仍然不熟悉 automapper，所以只需要从设计的角度了解如何做到这一点）

不。不要在视图模型中创建构造函数，特别是如果您希望控制器操作将这些视图模型作为操作参数（想想 POST 操作）。原因是默认模型绑定器将不再知道如何实例化您的视图模型，您将不得不编写自定义模型绑定器。

所以AutoMapper还是手动映射。

手动映射示例，您可以从以下内容开始：

```
public ActionResult SomeAction()
{
    IEnumerable<Entity> entities = Repository.GetAll();
    IEnumerable<MyViewModel> model = entities.Select(x => new MyViewModel
    {
        Prop1 = x.Prop1,
        Prop2 = x.Prop2,
        ...
    }); 
    return View(model);
} 
```

一旦你厌倦了编写这段代码，就转移到 AutoMapper：

```
public ActionResult SomeAction()
{
    IEnumerable<Entity> entities = Repository.GetAll();
    IEnumerable<MyViewModel> model = Mapper.Map<IEnumerable<Entity>, IEnumerable<MyViewModel>>(entities); 
    return View(model);
} 
```

或者，如果您编写一个自定义操作过滤器，该过滤器使用 OnActionExecuted 事件来拉取传递给视图的域模型，使用 AutoMapper 将其映射到视图模型并用视图模型替换模型，您可以进一步简化重复代码：

```
[AutoMap(typeof(IEnumerable<Entity>), typeof(IEnumerable<MyViewModel>))]
public ActionResult SomeAction()
{
    IEnumerable<Entity> entities = Repository.GetAll();
    return View(entities);
} 
```

> 同样，我主要关心的是像 GetAll() 这样会提取许多记录的方法。如果我做了一个 foreach 循环将每个实体转换为 ViewModel 似乎会产生很多开销。

不要担心那个。提取记录将比循环和映射到视图模型慢一个数量级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:33:59.463

有许多不同的方法可以做到这一点，但首先，我会`IEnumerable<T>`为您的 GetAll() 方法返回一个。但是，您可能希望以某种方式实现分页。您可能想要设置一个通用存储库，该存储库对大多数情况进行基本数据访问并返回一个 Enumerable。您可以保留一个应该为更复杂的查询保留的方法并返回一个`IQueryable<T>`. 基本的精简实现可能如下所示。

```
public class Repository<T> : IRepository<T> where T : class
{
    internal ObjectContext _objectContext;
    internal ObjectSet<T> _objectSet;

    public Repository(ObjectContext objectContext)
    {
        _objectContext = objectContext;
        _objectSet = objectContext.CreateObjectSet<T>();
    }

    public IQueryable<T> GetQuery()
    {
        return _objectSet;
    }

    public IEnumerable<T> GetAll()
    {
        return GetQuery().ToList();
    } 

    public IEnumerable<T> Find(Func<T, bool> where)
    {
        return _objectSet.Where<T>(where);
    }

    public T Single(Func<T, bool> where)
    {
        return _objectSet.SingleOrDefault<T>(where);
    }

    public List<T> Page<TKey>(Expression<Func<T, bool>> where, int page, int pagesize, Expression<Func<T, TKey>> orderBySelector, bool ascending)
    {
        return ascending
            ? GetQuery().Where(where).OrderBy(orderBySelector).Skip((page - 1) * pagesize).Take(pagesize).ToList()
            : GetQuery().Where(where).OrderByDescending(orderBySelector).Skip((page - 1) * pagesize).Take(pagesize).ToList();
    }

    public void Delete(T entity)
    {
        _objectSet.DeleteObject(entity);
    }

    public void Add(T entity)
    {
        _objectSet.AddObject(entity);
    }

} 
```

界面看起来像

```
public interface IRepository<T> where T : class
{
    IQueryable<T> GetQuery();

    IEnumerable<T> GetAll();

    IEnumerable<T> Find(Func<T, bool> where);     

    T Single(Func<T, bool> where);

    List<T> Page<TKey>(Expression<Func<T, bool>> where, int page, int pagesize, Expression<Func<T, TKey>> orderBySelector, bool ascending);

    void Delete(T entity);

    void Add(T entity);

} 
```

以上可以作为一个简单的通用存储库的开始。一旦你有了你的实体，你就不需要 AutoMapper，它只是让生活更轻松，因为许多 ViewModel 具有与你的实体相同的属性。您可以简单地定义一个新的 ViewModel 或 ViewModel 列表并自行映射属性。

```
List<ViewModel> vm = new List<ViewModel>();

foreach (var e in entities)
{
    ViewModel v = new ViewModel();
    v.something = e.something;
    // perform the rest
    vm.Add(v);
} 
```

*写的有点多，抱歉有错别字:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T00:40:36.917

我认为您可能对视图模型及其目的有误解。您不需要为数据库中的每个实体创建视图模型，这似乎是您想做的；您只需为要渲染的每个视图创建一个视图模型。因此，术语“视图模型”——它以模型的形式组织数据，您的视图可以被强类型化到。

例如，您不会希望为 GetAll() 返回的每个实体创建单独的视图模型。在显示所有记录的网格视图的简单场景中，您可能只需要一个具有一个属性的视图模型：

```
 public class MyViewModel
    {     
       public List<MyRecord> AllRecords {get;set;}
    } 
```

您将在控制器中填充此视图模型

```
public ActionResult SomeAction()
{
   var viewmodel = new MyViewModel{AllRecords = GetAll()};
   return View(viewModel);
} 
```

请查看Rachael Appel 的[这篇博客文章](http://www.rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)，以获得非常简洁的讨论。

# node.js - gruntjs 服务器任务的目的是什么？

> ID：11943212
> 
> 赞同：62
> 
> 时间：2012-08-13T22:28:41.653
> 
> 标签：node.js, gruntjs

我正在学习如何推动使用 gruntjs。我找到了[服务器任务](https://github.com/cowboy/grunt/blob/master/docs/task_server.md)，但我不明白这一点。

我可以使用服务器任务映射连接/缩小文件来测试我的应用程序（使用backbone.js），而无需在Web 服务器根目录中移动或放置源文件吗？例如，没有 apache。

如果不是，服务器任务的假定用途是什么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-13T23:46:58.817

该`server`任务用于启动静态服务器，`base`路径设置为 Web 根目录。

示例：`./web-root`充当`http://localhost:8080/`：

```
grunt.initConfig({
  server: {
    port: 8080,
    base: './web-root'
  }
}); 
```

它的功能类似于 Apache 服务器，根据路径提供静态文件，但使用[http 模块](http://nodejs.org/api/http.html)通过[connect](http://www.senchalabs.org/connect/)进行设置（[源代码](https://github.com/gruntjs/grunt)）。

如果您需要它提供的不仅仅是静态文件，那么您需要考虑[定义一个自定义`server`任务](https://github.com/cowboy/grunt/blob/master/docs/task_server.md#roll-your-own-%E2%9A%91)：

```
grunt.registerTask('server', 'Start a custom web server.', function() {
  grunt.log.writeln('Starting web server on port 1234.');
  require('./server.js').listen(1234);
}); 
```

和自定义服务器实例：

```
// server.js
var http = require('http');
module.exports = http.createServer(function (req, res) {
    // ...
}); 
```

* * *

> 我可以使用服务器任务映射连接/缩小文件来测试我的应用程序 [...]

连接和缩小有它们自己的专用任务 -[`concat`](https://github.com/cowboy/grunt/blob/master/docs/task_concat.md)并且[`min`](https://github.com/cowboy/grunt/blob/master/docs/task_min.md)- 但可以与`server`完成所有 3 个任务的任务一起使用。

* * *

### 编辑

如果你想让它持久化服务器一段时间（以及咕噜声），你可以[将任务定义为异步](https://github.com/cowboy/grunt/blob/master/docs/types_of_tasks.md#custom-tasks-%E2%9A%91)的（使用服务器的[`'close'`事件](http://nodejs.org/api/http.html#http_event_close)）：

```
grunt.registerTask('server', 'Start a custom web server.', function() {
  var done = this.async();
  grunt.log.writeln('Starting web server on port 1234.');
  require('./server.js').listen(1234).on('close', done);
}); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-08-08T07:23:04.560

> 该`server`任务现在是`connect`任务，它包含在[`grunt-contrib-connect`](https://github.com/gruntjs/grunt-contrib-connect)包中。

该`connect`任务启动连接 Web 服务器。

使用以下命令安装此插件：

```
npm install grunt-contrib-connect --save-dev 
```

> 注意：`--save-dev`包含在你的包`devDependencies`，见[https://npmjs.org/doc/install.html](https://npmjs.org/doc/install.html)

安装插件后，可以使用以下 JavaScript 在 Gruntfile 中启用它：

```
grunt.loadNpmTasks('grunt-contrib-connect'); 
```

*使用命令运行此任务`grunt connect`。*

请注意，该服务器仅在 grunt 运行时运行。一旦 grunt 的任务完成，Web 服务器就会停止。可以使用该选项更改此行为[`keepalive`](https://github.com/gruntjs/grunt-contrib-connect#keepalive)，并且可以通过运行类似`grunt connect:targetname:keepalive`. `targetname`等于下面代码示例中的“服务器”。

在这个例子中，`grunt connect`（或更详细地说，`grunt connect:server`）将在 启动一个静态 Web 服务器`http://localhost:9001/`，其基本路径设置为`www-root`相对于 Gruntfile 的目录，之后运行的任何任务都可以访问它。

```
// Project configuration.
grunt.initConfig({
  connect: {
    server: {
      options: {
        port: 9001,
        base: 'www-root'
      }
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-27T02:38:25.517

服务器任务的重点是对静态文件进行快速而肮脏的访问以进行测试。grunt server 不是生产服务器环境。它真的应该只在 grunt 生命周期中用于将静态测试资产引入测试环境。在生产环境中使用可能由 NPM 生命周期脚本控制的成熟服务器。

# regex - 测试 Mongoose 正则表达式中的空字符串

> ID：11943227
> 
> 赞同：1
> 
> 时间：2012-08-13T22:30:38.493
> 
> 标签：regex, mongodb, mongoose

我发现的所有内容都表明空字符串可以通过 /^$/ 在正则表达式中匹配。但是，该表达式在我的 Mongoose Validator for zipcode 中不起作用。

如果两个状态之一为真，我想设置邮政编码——要么是空的，要么是有效的五位数字。

```
ZIP_REGEX: /^$|^[0-9]{5}$/
zip: {
    type: Number,
    validate: [ ZIP_REGEX, 'ValidationError']
}, 
```

每次我尝试存储空字符串时，此验证器都会失败。结果是我可以设置有效的邮政编码，但从不取消设置。Mongoose 是否也在尝试验证空字符串是否为数字？正则表达式错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:13:20.980

对像这样有点不寻常的事情使用自定义验证功能。假设您希望同时支持数字和字符串作为输入：

```
function validator(v) {
    return (!v && v !== 0) || /^[0-9]{5}$/.test(v.toString());
};

zip: {
    type: Number,
    validate: [validator, 'ValidationError']
}, 
```

# jquery - 无法通过 http GETrequest 访问 SQL Server 数据库

> ID：11943231
> 
> 赞同：0
> 
> 时间：2012-08-13T22:31:00.020
> 
> 标签：jquery, asp.net, sql-server, json, webmatrix

我正在尝试从在 Windows Server 2008 r2 上运行的 SQL Server 数据库中以 Json 对象的形式返回一些行，但是我收到 500 Internal Server Error 任何人都可以帮我解决这个问题吗？以下是更多信息。

开发环境：WebMartrix 2

代码：

```
@{
    var result = MyDataBase.GetData();
    Response.ContentType = "application/json";
    Json.Write(result, Response.Output);

} 
```

这是响应错误消息：

> 警告：您已在此页面上多次包含 Google Maps API。这可能会导致意外错误。
> {main,places}.js（第 42 行）
> GET [http://nopowervi.com/Pages/GetReports/](http://nopowervi.com/Pages/GetReports/)
> 500 内部服务器错误
> 577ms
> JQuery-1.7.2.js（第 4 行）
> HeadersResponseHTML

```
<html>
<head>
<title>Login failed for user 'IIS APPPOOL\nopowervi.com'.</title>
<style>
body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;}
p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}
b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}
H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }
H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }
pre {font-family:"Lucida Console";font-size: .9em}
.marker {font-weight: bold; color: black;text-decoration: none;}
.version {color: gray;}
.error {margin-bottom: 10px;}
.expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }
</style>
</head>
<body bgcolor="white">
<span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>
<h2> <i>Login failed for user 'IIS APPPOOL\nopowervi.com'.</i> </h2></span>
<font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">
<b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
<br><br>
<b> Exception Details: </b>System.Data.SqlClient.SqlException: Login failed for user 'IIS APPPOOL\nopowervi.com'.<br><br>
<b>Source Error:</b> <br><br>
<table width=100% bgcolor="#ffffcc">
<tr>
<td>
<code><pre>
Line 1: @{
<font color=red>Line 2: var result = MyDataBase.GetData();
</font>Line 3: Response.ContentType = &quot;application/json&quot;;
Line 4: //Json.Write(result.OrderByDescending(d =&gt; d.Time), Response.Output);</pre></code>
</td>
</tr>
</table>
<br>
<b> Source File: </b> c:\inetpub\nopowervi.com\Pages\GetReports.cshtml<b> &nbsp;&nbsp; Line: </b> 2
<br><br>
<b>Stack Trace:</b> <br><br>
<table width=100% bgcolor="#ffffcc">
<tr>
<td>
<code><pre>
[SqlException (0x80131904): Login failed for user &#39;IIS APPPOOL\nopowervi.com&#39;.]
System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6317296
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412
System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2660
System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +53
System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +6337726
System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6337705
System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +352
System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +831
System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +49
System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6339510
System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +78
System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +2194
System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +89
System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6343022
System.Data.SqlClient.SqlConnection.Open() +300
WebMatrix.Data.Database.EnsureConnectionOpen() +115
WebMatrix.Data.&lt;QueryInternal&gt;d__0.MoveNext() +79
System.Collections.Generic.List'1..ctor(IEnumerable'1 collection) +472
System.Linq.Enumerable.ToList(IEnumerable'1 source) +80
WebMatrix.Data.Database.Query(String commandText, Object[] parameters) +140
ASP._Page_Pages_GetReports_cshtml.Execute() in c:\inetpub\nopowervi.com\Pages\GetReports.cshtml:2
System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +280
System.Web.WebPages.WebPage.ExecutePageHierarchy() +372
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +181
System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContextBase httpContext) +232
</pre></code>
</td>
</tr>
</table>
<br>
<hr width=100% size=1 color=silver>
<b>Version Information:</b>&nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET a
</font>
</body>
</html>
<!--
[SqlException]: Login failed for user &#39;IIS APPPOOL\nopowervi.com&#39;.
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
at System.Data.SqlClient.SqlConnection.Open()
at WebMatrix.Data.Database.EnsureConnectionOpen()
at WebMatrix.Data.Database.<QueryInternal>d__0.MoveNext()
at System.Collections.Generic.List'1..ctor(IEnumerable'1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable'1 source)
at WebMatrix.Data.Database.Query(String commandText, Object[] parameters)
at ASP._Page_Pages_GetReports_cshtml.Execute() in c:\inetpub\nopowervi.com\Pages\GetReports.cshtml:line 2
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
at System.Web.WebPages.WebPage.ExecutePageHierarchy()
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
at System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContextBase httpContext)
[HttpUnhandledException]: Exception of type &#39;System.Web.HttpUnhandledException&#39; was thrown.
at System.Web.WebPages.WebPageHttpHandler.HandleError(Exception e)
at System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContextBase httpContext)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:13:53.017

IIS 使用的用户帐户没有足够的权限来读取/写入数据库。

更改在 IIS 应用程序池设置中使用的用户帐户，或将用户帐户 IIS AppPool/nopowervi.com 配置为具有从数据库读取所需的权限。

此链接可能会有所帮助：[http ://technet.microsoft.com/en-us/library/cc771170(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771170%28v=ws.10%29.aspxhttp://)

# android - ScrollView 内的 ListView

> ID：11943232
> 
> 赞同：2
> 
> 时间：2012-08-13T22:31:02.993
> 
> 标签：android, listview, scrollview, landscape

所以我知道我不能使用`ListView`inside `ScrollView`，因为`ScrollView`在这种情况下获得焦点并且`ListView`变得不可滚动。但是我有一个程序在横向模式下退出屏幕，我需要能够向下滚动以查看程序的其余部分，所以我使用`LinearLayout(vertical)`它`ScrollView`包含大部分程序，并且在它下面`ScrollView`我得到了我的`ListView`. 现在，当我处于横向模式时，我希望能够向下滚动到我的位置`ListView`，但它不会让我这样做，它会阻止我从哪里`ListView`开始。是否有某种解决方案，或者让我的程序保持纵向模式对我来说更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:46:11.077

取消 VerticalLayout 并将其余内容作为 ListView 的页眉和页脚视图插入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:51:01.317

您仍在尝试在横向模式下将 ListView 嵌套在 ScrollView 内...

我建议创建一个包含两列的新**景观**特定布局：*左侧*包含 ScrollView 内的 UI 元素，*右侧*包含 ListView。这样，两个视图仍将支持滚动。

只需将此新布局保存在一个新文件夹`res/layout-land`中，该文件夹的*文件名*与`res/layout`. 当方向改变时，操作系统会自动切换布局。

您可以阅读更多相关信息：[支持不同的屏幕](http://developer.android.com/training/basics/supporting-devices/screens.html)

此最终结果将类似于旧的 Google Market 图像：

![古尔市场格局](../Images/2f519110e34da211ca7e397a07bde5f2.png)

如有必要，左侧的绿色侧可以滚动，右侧的白色侧也将滚动。

# android - 启动应用程序时，如何从 Android 删除 SQLite 数据库中的重新创建表？

> ID：11943233
> 
> 赞同：0
> 
> 时间：2012-08-13T22:31:03.333
> 
> 标签：android, sqlite

我正在构建一个应用程序，该应用程序有一个数据库，其中使用内部创建的两个表`SQLiteOpenHelper`。当应用程序运行时，它会接收一些数据并将其保存到表中。我想要的是在应用程序启动时清除数据表？

我查看了这篇文章[如何在每次启动应用程序时清除 SQLite 数据库？](https://stackoverflow.com/questions/4499420/how-can-i-clear-a-sqlite-database-each-time-i-start-my-app)不清楚如何使用应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:29:09.677

[如果您将构造函数传递给SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29)，则它能够创建*内存*数据库`null` `name`。可能这就是您正在寻找的。

例如：

```
SQLiteOpenHelper sqloh = new SQLiteOpenHelper(context, null, null, 1);
SQLiteDatabase sqldb = sqloh.getWritableDatabase(); 
```

将创建一个内存数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:24:03.803

SqliteDatabase 使用 openOrCreate(...) 方法，如果数据库存在则打开它，并在它不存在时创建并打开它。请参阅基于该[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)的文档，您可以在执行任何数据库调用之前删除创建的数据库文件，以便每次创建一个新文件。

这个 SO 问题给出了文件的[位置：设备上 sqlite 数据库的位置](https://stackoverflow.com/questions/4452538/android-location-of-sqlite-database-on-the-device)

当应用程序通过执行 sqlite 查询启动时，还有其他方法只是删除表中的数据：

```
DELETE FROM your_table 
```

我唯一的想法是，如果您要在每次应用程序启动时删除它，您是否真的需要一个数据库。如果您不更新数据，那么为什么不只是“缓存”一个包含数据的 json 文件。GSON库非常[适合](http://code.google.com/p/google-gson/)使用 json 并将其转换为 java 对象，只需要很少的代码，比使用 sqlite 的代码更少。但该建议来自于对您要完成的工作没有大局观。然后，您只需在应用程序启动时删除 json 文件而不是 db 文件。

# php - 舍入时 PHP 数字格式降为零

> ID：11943235
> 
> 赞同：0
> 
> 时间：2012-08-13T22:31:09.297
> 
> 标签：php, jquery, number-formatting

我正在使用 PHP 的 number_format 将浮点数显示到小数点后 2 位。

当这个数字类似于 1.898 时，它会四舍五入为 1.9。

如何让它显示为 1.90？

更新：

我有一个结束的功能......

```
return number_formant($num, 2); 
```

调用该函数的 php 脚本打印出 Javascript 使用的数字。当我对数字执行 var_dump 时，它会正确打印两位小数。看起来这是失去零的Javascript。

这是导致问题的JS代码...

```
function show_level(level) {
...
if (level > 9999)
    level_label = (level / 1000).toPrecision(3) + 'k';
else if (level > 999)
    level_label = (level / 1000).toPrecision(2) + 'k';
else
    level_label = level; 
```

我改变了最后一行，让它按我想要的方式工作..

```
 level_label = level.toFixed(2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:44:40.503

所以，你的意思是这样的（你有什么）：

```
<?php
echo number_format($x);
?> 
```

这就是你想要的：

```
<?php
echo number_format($x,2);
?> 
```

你可以使用其他长度。试试看！

希望可以帮助你:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:36:32.563

也许不是最好的解决方案，但是：

```
$n = 1.2345;
$n = number_format( round($n, 1), 2);
//echo 1.20
echo $n; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T22:34:41.237

```
echo sprintf('%01.2f', number_format(1.898,2)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T22:36:15.807

你可以做：

```
echo round(1.898,2); 
```

# asp.net-mvc - 我是否需要在专用 IIS 服务器上拥有用户名和密码才能连接到 SQL Server Express？

> ID：11943236
> 
> 赞同：1
> 
> 时间：2012-08-13T22:31:12.300
> 
> 标签：asp.net-mvc, sql-server-express, web-deployment

在我的开发机器上工作时，我使用以下连接字符串：

```
<add name="ApplicationServices" 
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" 
     providerName="System.Data.SqlClient" /> 
```

这每次都有效。

但是，当我部署到作为专用主机的远程 IIS 服务器时（`SQLEXPRESS`应该可以正常工作而无需担心与共享服务器相关的问题），相同的连接字符串会导致无法连接到数据库。

数据库文件存储在`App_Data`开发环境和部署环境的应用程序目录中。我似乎无法连接到部署环境中的数据库（尽管文件就在那里）。

我是否需要让我的主机以某种方式给我一个用户名/密码，以便我可以将其添加到连接字符串中？还是我需要以其他方式更改我的连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:50:01.370

我从来没有使用过 SQLExpress（当然不是生气），但请记住，一旦你在 IIS 上，你就在与调试时不同的帐户下运行。这将是 IIS 应用程序池配置为运行的帐户。因此，当您说要使用集成安全性来访问此数据库时，您需要对其进行配置以识别该特定帐户（例如，无论是哪个帐户`NETWORK_SERVICE`）。

在托管环境中，您最好只使用 SQL 身份验证，尽管这显然不太安全，因为您必须将密码存储在某个地方。而且您仍然必须更改数据库安全设置。

否则，如果您确实知道运行应用程序池的帐户，那么只需将数据库配置为接受来自它的连接即可。

# java - 如何从pojo调用spring mvc

> ID：11943244
> 
> 赞同：0
> 
> 时间：2012-08-13T22:32:41.613
> 
> 标签：java, spring, model-view-controller, pojo

我是春天世界的新手。我正在尝试将新功能添加到现有的基于 Spring MVC 的报告项目中。新功能将使用户能够安排特定报告每隔一段时间运行一次。我看到在当前的设计中，MVC 的模型和控制器部分是紧密耦合的。由于时间限制，我不想将模型和控制器分开，而是想按原样使用现有的基础设施。我的计划是模仿 pojo 中的浏览器请求，并以某种方式调用 spring 的 MVC 来处理我的请求。我是否朝着正确的方向前进，如果是这样，我如何从 POJO 调用 spring MVC，如果不是，那么正确的方法是什么。请帮忙........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:19:32.810

如果我对你的理解正确，基本上你想：

*   创建一个向现有 Spring MVC 控制器发出请求的非 Web 应用程序
*   并且您*必须重用现有的控制器*
*   并且不重用业务模型，因为您没有时间将业务模型与控制器分开

基本上，您正在使用这种方法进行 Web 服务，您可以使用 http 客户端库通过 http 向控制器发出请求。也许，以 json 格式获取响应，稍后您可以将其映射到 java bean，然后从那里继续您的工作。

您可以让控制器以[xml 或 json 等形式返回视图的模型，](http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/)甚至可以[使用 spring 的消息转换器直接以 json 或 xml 形式返回 bean](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)。

如果您已经在使用 Spring 3，则可以使用[RestTemplate](http://blog.springsource.org/2009/03/27/rest-in-spring-3-resttemplate/)来简化此操作。您还可以使用 Apache 的 HttpClient，您可以在此[REST 模板](http://dyutiman.wordpress.com/2011/04/13/rest-template-using-apache-httpclient/)代码中看到其有趣的示例。这个[关于 java http 客户端的相关问答](https://stackoverflow.com/questions/6850344/spring-integration-or-apache-http-client)也可能会有所帮助。

# css - #inner container 填充剩余的浏览器高度

> ID：11943247
> 
> 赞同：0
> 
> 时间：2012-08-13T22:33:15.747
> 
> 标签：css

登台站点供参考：[salto.wpengine.com/menu](http://salto.wpengine.com/menu)

我有一个使用**粘性页脚**的网站（将页脚强制到浏览器窗口的底部）。里面有一个背景图像容器，`#inner`它添加了一个半透明的**白色背景**，我们想`#inner`在更大的显示器上填充剩余的高度（如果有的话）并与粘性页脚相遇，以便该列看起来总是与页脚接触。

我似乎无法通过解决方案来解决问题。有没有人有这样的运气？

# cdi - 注入到 Singleton bean 中的 ApplicationScoped bean 未调用 Postconstruct

> ID：11943258
> 
> 赞同：3
> 
> 时间：2012-08-13T22:35:26.897
> 
> 标签：cdi, jboss-weld, weld

基本上我想用我的计时器检索一些属性，但我一直得到一个空指针，因为属性 bean 似乎从不调用@postconstruct。任何想法为什么？

**DataCaptureTimer.java：**

```
import java.io.File;
import java.io.Serializable;

import javax.annotation.PostConstruct;
import javax.ejb.Schedule;
import javax.ejb.Singleton;
import javax.ejb.Startup;
import javax.enterprise.context.ApplicationScoped;
import javax.inject.Inject;
import org.slf4j.Logger;

@ApplicationScoped
@Startup
public class DataCaptureTimer implements Serializable {

    private static final long serialVersionUID = -1L;

    @Inject
    private DataCaptureBP dataCaptureBP;

    @Inject
    private transient Logger logger;

    @Inject
    private PropertiesBean propertiesBean;

    private File dataAnalyticsDirectory;

    @PostConstruct
    public void setUpDataCaptureTimer(){
    }

    @Schedule(hour = "18", minute = "24")
    public void automaticProcessing() {
        if(logger.isInfoEnabled()) {
            logger.info("Calling DataCapture");
        }

        dataAnalyticsDirectory = new File(propertiesBean.getProperty("gen.data.analytics.directory"));

        }

    }

} 
```

**属性 bean**

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Properties;

import javax.annotation.PostConstruct;
import javax.enterprise.context.ApplicationScoped;
import javax.inject.Named;

@ApplicationScoped
public class PropertiesBean {

    private static final String SYSTEM_PROPERTIES_NAME = "system.properties";

    private Properties props = new Properties();

    public PropertiesBean(){
    }

    /**
     * Loads all the properties from an external props file
     */
    @PostConstruct
    public void initiateProperties(){
        String loc = System.getProperty("jboss.server.config.dir") + "/" + SYSTEM_PROPERTIES_NAME;
        try {
            props.load(new FileInputStream(loc));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * Retrieves different system properties by a given key
     * @param key Key to desired system property
     * @return String the value of the property with a matching key
     */
    public String getProperty(String key){
        return props.getProperty(key);
    }
} 
```

**堆栈跟踪**

```
09:19:34,617 ERROR [org.jboss.as.ejb3] (EJB default - 5) JBAS014122: Error during retrying timeout for timer: [id=fd2f6756-8621-4977-9b65-c4110c79a149 timedObjectId=epcfe-web-0.0.1-SNAPSHOT.epcfe-web-
0.0.1-SNAPSHOT.DataCaptureTimer auto-timer?:true persistent?:true timerService=org.jboss.as.ejb3.timerservice.TimerServiceImpl@70ceb77f initialExpiration=Tue Aug 14 09:19:00 EDT 2012 intervalDuration(
in milli sec)=0 nextExpiration=Wed Aug 15 09:19:00 EDT 2012 timerState=RETRY_TIMEOUT: javax.ejb.EJBException: java.lang.NullPointerException
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:165) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ejb3.tx.TimerCMTTxInterceptor.handleExceptionInOurTx(TimerCMTTxInterceptor.java:53) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:229) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:303) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:189) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Fin
al-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:42) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:43) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.timerservice.TimedObjectInvokerImpl.callTimeout(TimedObjectInvokerImpl.java:102) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ejb3.timerservice.task.CalendarTimerTask.callTimeout(CalendarTimerTask.java:60) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ejb3.timerservice.task.TimerTask.retryTimeout(TimerTask.java:184) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ejb3.timerservice.task.TimerTask.run(TimerTask.java:140) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [rt.jar:1.6.0_30]
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_30]
        at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_30]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_30]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_30]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_30]
        at org.jboss.threads.JBossThread.run(JBossThread.java:122) [jboss-threads-2.0.0.GA-redhat-1.jar:2.0.0.GA-redhat-1]
Caused by: java.lang.NullPointerException
        at java.io.File.<init>(File.java:222) [rt.jar:1.6.0_30]
        at com.advancestores.storechannel.catalog.presentation.timer.DataCaptureTimer.automaticProcessing(DataCaptureTimer.java:62)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_30]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_30]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_30]
        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_30]
        at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.2.F
inal-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:129) [jboss-as-weld-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:139) [jboss-as-weld-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:34) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:34) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.concurrency.ContainerManagedConcurrencyInterceptor.processInvocation(ContainerManagedConcurrencyInterceptor.java:104) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-r
edhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:94) [jboss-as-weld-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.component.singleton.SingletonComponentInstanceAssociationInterceptor.processInvocation(SingletonComponentInstanceAssociationInterceptor.java:53) [jboss-as-ejb3-7.1.2.Final
-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:227) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:07:48.840

关于`PropertiesBean`- 好吧，您永远不会分配您正在阅读的实际属性。但正如`properties`以 初始化的那样`new Properties()`，它永远不应该抛出 NPE。

您可以发布实际的堆栈跟踪吗？

此外，即使这会直接回答您的问题。如果您使用[Seam Solder](http://docs.jboss.org/seam/3/3.1.0.Final/reference/en-US/html/solder-resourceloading.html) ，您将免费获得属性/资源注入。也许值得一瞧...

# javascript - 在其他代码中利用 HTML5 输入验证

> ID：11943261
> 
> 赞同：0
> 
> 时间：2012-08-13T22:35:53.733
> 
> 标签：javascript, forms, html, validation

假设我有一些 Javascript，我需要在其中验证从 API 调用获得的字符串中的电子邮件地址、日期等。

HTML5 为字段内置了此功能`input`，我希望搭载该实现，而不是使用正则表达式或外部库 - 但以最终用户不可见的方式。

我现在的代码模式是：

*   创建具有`input`所需类型的不可见字段元素的表单
*   用字符串填充`input`元素
*   调用`checkValidity()`元素

有更好的解决方案吗？如果不是，上述模式的任何实现都会提供显着的优势吗？

*注意：我没有任何代码可以显示 - 它（目前）是一个假设性问题。*

# jquery - 关闭父 div 添加内容然后用 jquery .after 再次打开 div

> ID：11943262
> 
> 赞同：0
> 
> 时间：2012-08-13T22:36:01.563
> 
> 标签：jquery

我有以下代码

```
<div>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
</div> 
```

用这个 jquery

```
jQuery('p:nth-child(5)').after('</div><div><img src="http://dummyimage.com/100x100/fff/000"></div><div>'); 
```

我希望我的输出是这样的。

```
<div>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    </div><div><img src="http://dummyimage.com/100x100/fff/000"></div><div>
    <p>some text</p>
    <p>some text</p>
</div> 
```

相反，我得到了这个。

```
<div>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p>
    <p>some text</p><div><img src="http://dummyimage.com/100x100/fff/000"></div><div></div>
    <p>some text</p>
    <p>some text</p>
</div> 
```

例如看[这个小提琴](http://jsfiddle.net/aaronk85/2T4AJ/)。

我在哪里错了？或者我应该使用[.after()](http://api.jquery.com/after/)以外的东西来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T22:42:03.137

你不能使用不平衡的 HTML 来改变 DOM 树。jQuery 需要提供平衡的 HTML 块，因为每次像这样传入 HTML 时，它都会创建一个分离的 DOM 树，而不仅仅是将 HTML 片段插入到源代码中。

您需要创建一个新`<div>`的来保存图像，另一个来保存剩余的`<p>`元素，然后使用`.append()`将多余的元素从第一个 div 移动到后者，例如：

```
var $d = $('div');
var $p = $('p:gt(4)');
if ($p.length) {
    $('<div>').insertAfter($d).append($p);
    $('<div><img src="..."></div>').insertAfter($d);
} 
```

见[http://jsfiddle.net/alnitak/Z8LR3/](http://jsfiddle.net/alnitak/Z8LR3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T22:43:45.400

jQuery 的 .after 方法只能接收一个有效的、自包含的 HTML 元素。

来自[jQuery 文档](http://api.jquery.com/after/)：

`content: HTML string, DOM element, or jQuery object to insert after each element in the set of matched elements.`

您应该手动传输所有想要的元素，尝试使用[.nextAll()](http://api.jquery.com/nextAll/)

```
var elements = $('p:nth-child(5)').nextAll('p').detach();
var nextdiv = $("<div></div>).append(elements);
$('.parentDiv').after(nextdiv);
$('.parentDiv').after('<div><img src="http://dummyimage.com/100x100/fff/000"></div>'); 
```

# php - 用 php 加载一个“on-the-fly”类

> ID：11943267
> 
> 赞同：1
> 
> 时间：2012-08-13T22:36:41.327
> 
> 标签：php, oop, class, dynamicobject

我有一个现有的类，我想创建一个系统来为它加载“插件”。这些“插件”被创建为文件，然后包含在主类的文件中。

现在我认为主类需要用他们自己的类来扩展那些小“插件”。问题是我不知道哪些插件会包含不同的用户。所以类的扩展是动态的。

如何在不使用 eval 的情况下即时扩展一个类（我也没有测试过）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:29:24.903

你可以通过使用 PHP 的魔法函数来完成它。假设您有 A 类。您想要一个带有一些额外方法的 A 的“实例”。

```
class A {
    public $publicA;

    public function doA() {
        $this->publicA = "Apple";
    }
}

class B {
    public $publicB;

    public function doB() {
        $this->publicB = "Bingo";
    }

    private $object;

    public function __construct($object) {
        $this->object = $object;
    }

    public function __call($name, $arguments) {
        return call_user_func_array(array($this->object, $name), $arguments);
    }

    public function __get($name) {
        return $this->object->$name;
    }

    public function __set($name, $value) {
        $this->object->$name = $value;
    }
}

$b = new B(new A);

$b->doA();
$b->doB();
echo "$b->publicA, $b->publicB"; 
```

实例 $b 具有 A 和 B 的方法和属性。这种技术可以扩展到从任意数量的类中聚合功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:48:22.637

你在谈论__autoload吗？

```
function __autoload($class) {
    require_once($class.'.php');
}
$object = new Something(); 
```

这将尝试`require_once(Something.php);`

# php - 我是 php 的新手，我想用矩阵类型的数组来解决以下问题

> ID：11943272
> 
> 赞同：1
> 
> 时间：2012-08-13T22:37:48.660
> 
> 标签：php, arrays, matrix

这是csv格式：

```
ServerA,OK,app1
ServerB,OK,app2
ServerC,OK,app3
ServerD,,app4
ServerA,OK,app2
ServerB,,app3
ServerC,OK,app1
ServerD,OK,app2
ServerA,OK,app3
ServerB,OK,app1
ServerC,,app2 
```

我想要显示的是：

```
Server:     App1:     App2:  App3:  App4
ServerA      OK        OK     OK     OK
SERverB      OK        OK     N/A    OK 
```

如果第二个字段为空，则显示 N/A。

这是我尝试过的：

```
$file = "serverdata.txt";
$fp = fopen($file, "r") or die("Can't open file serverdata.txt");

while(!feof($fp)) {
    $data = fgets($fp, 1024);
    $navData = explode(',',$data);

            $host = $navData[0];
            $app = $navData[2];
            $status = $navData[1];
            $myData[$host][$app] = $status;

}

foreach ($myData as $tempHost) {
if (isset($myData[$tempHost]['app1'])) {
          $App1_status =  $mydata[$tempHost]['app1'];
    }
    else {
           $App1_status = "N/A";
    }

.
.
.
.
<same for all other apps status >

print "<TD>$tempHost</TD><TD>$App1_status</TD><TD>$App2_status</TD><TD>$App3_status</TD>  <TD>$App4_status</TD></TR>\n";
}

} 
```

似乎没有得到它的工作，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:09:06.820

您的应用程序中基本上有两个部分。第一部分是读入文件并将数据存储在内存中。你实际上做得很好我主要在我的例子中只使用了不同的变量名，我正在使用它，`SplFileObject`因为它已经为我们解析了逗号分隔的值：

```
$file = new SplFileObject('serverdata.txt');
$file->setFlags(SplFileObject::READ_CSV);
$hosts = array();
$apps = array();
foreach($file as $line) {
    list($host, $status, $app) = $line;
    $apps[$app] = 1;
    $hosts[$host][$app] = $status;
} 
```

每一行都被解析为`$host`,`$status`和`$app`。我像您一样保存主要数据（此处保存到`$hosts`）。我还将应用程序名称保存到另一个名为的数组`$apps`中，以便以后可以基于主机*和*应用程序构建矩阵。我将应用程序名称保存为键，这是一种删除重复项的简单方法，因为在数组中每个键只能存在一次。

第二部分是输出数据。我在这里以纯文本形式进行，如果您需要使用 HTML，它可能更容易：

```
echo "+----------+", str_repeat('------+', count($apps)), "\n";
echo "| Server   |";
foreach($apps as $name => $v) {
    echo " $name |";
}
echo "\n", "+----------+", str_repeat('------+', count($apps)), "\n";

foreach($hosts as $host => $hostApps) {
    printf("| %' -8s |", $host);
    foreach($apps as $name => $v) {
        $value = isset($hostApps[$name]) ? $hostApps[$name] : "N/A";
        printf("  %' -3s |", $value);
    }
    echo "\n", "+----------+", str_repeat('------+', count($apps)), "\n";
} 
```

正如你所看到的，另一个`foreach`里面有一个。一个适用于所有主机，另一个适用于所有应用程序。

然后，这将为您提供的数据创建输出`serverdata.txt`：

```
+----------+------+------+------+------+
| Server   | app1 | app2 | app3 | app4 |
+----------+------+------+------+------+
| ServerA  |  OK  |  OK  |  OK  |  N/A |
+----------+------+------+------+------+
| ServerB  |  OK  |  OK  |      |  N/A |
+----------+------+------+------+------+
| ServerC  |  OK  |      |  OK  |  N/A |
+----------+------+------+------+------+
| ServerD  |  N/A |  OK  |  N/A |      |
+----------+------+------+------+------+ 
```

我希望这个例子是有帮助的。您还可以在输出数据之前执行第三步，以规范化数组，以便每个主机（行）已经拥有所有应用程序的数据。然后做输出就更容易了。但我把它留作练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:06:24.127

```
$filename = 'serverdata.txt';
$data_lines = file($filename);
$server_app_data = array();
$servers = array();
$apps = array();
foreach($data_lines as $line) {
  list($server,$status,$app) = explode(',',$line);
  $server_app_data[$server][$app] = $status;
  if(!in_array($server, $servers)) $servers[] = $server;
  if(!in_array($app, $apps)) $apps[] = $app;
}

$table_content = '<table><thead><tr><th>Server:</th>';
foreach($apps as $app) $table_content .= '<th>'.ucwords(trim($app)).':</th>';
$table_content .= '</tr></thead><tbody>';
foreach($servers as $server) {
  $table_content .= '<tr><th>'.$server.'</th>';
  foreach($apps as $app) {
    $table_content .= '<td>'.($server_app_data[$server][$app]?:'N/A').'</td>';
  }
  $table_content .= '</tr>';
}
$table_content .= '</table>';

echo $table_content; 
```

生成下表：

```
Server:     App1:   App2:   App3:   App4:
ServerA     OK      OK      OK      N/A
ServerB     OK      OK      N/A     N/A
ServerC     OK      N/A     OK      N/A
ServerD     N/A     OK      N/A     N/A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T22:47:11.880

该行将`foreach ($myData as $tempHost)`在`$tempHost`. 你想要的是（然后你可以用`foreach ($myData as $tempHost=>$hostData)`替换所有实例）。`$myData[$tempHost]``$hostData`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T23:07:51.007

```
foreach ($myData as $host=>$apps) {
print "<TD>$host</TD>";
foreach($apps as $status)
    print "<TD>".($status!=""?$status:"N/A")."</TD>";
}
print "\n"; 
```

# android - LocalNotification 插件在 Android 上不起作用

> ID：11943273
> 
> 赞同：2
> 
> 时间：2012-08-13T22:37:53.977
> 
> 标签：android, plugins, cordova, notifications

我正在学习 PhoneGap 并尝试使用[Notification Local Plugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification%22)，但对我不起作用。

我正在尝试构建我的应用程序，但它在 XML AndroidManifest.xml 中返回错误。我遵循了 GitHub 上自述文件中的所有说明。

我正在使用 cordova-2.0.0 和 API10。

有人可以帮助我吗？

注意：我更改了 LocalNotification.java：

```
//alarm = new AlarmHelper(this.ctx);
alarm = new AlarmHelper(ctx.getContext()); 
```

编辑：我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="br.com.xpd.saleiro1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <supports-screens 
        android:largeScreens="true" 
        android:normalScreens="true" 
        android:smallScreens="true" 
        android:resizeable="true" 
        android:anyDensity="true" />

    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" 
            android:configChanges="orientation|keyboardHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="com.phonegap.plugin.localnotification.AlarmReceiver" >
    </receiver>

        <receiver android:name="com.phonegap.plugin.localnotification.AlarmRestoreOnBoot" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

    </application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T23:32:44.447

您是否尝试过使用旧版本？当我尝试使用 1.6.1 版本时，我得到了成功的结果。

# mysql - mysql_insert_id() 返回“0”

> ID：11943276
> 
> 赞同：0
> 
> 时间：2012-08-13T22:38:02.193
> 
> 标签：mysql, insert, auto-increment

我有一个正常运行的查询，它将一行插入到具有自动增加的主键的表中。但是 mysql_insert_id() 总是显示为“0”。

```
$this->event->insertEvent($event);
$lastid = mysql_insert_id(); 
```

我在站点的另一个区域使用了相同的命令，并且运行良好。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:44:29.143

取自 PHP 页面，如果没有修复它，您可能可以做一些事情来排除另一件事：[http ://www.php.net/manual/en/function.mysql-insert-id.php#94511](http://www.php.net/manual/en/function.mysql-insert-id.php#94511)

> 如果 mysql_insert_id() 返回 0 或 null，请检查您是否还包含了链接标识符。它是可选的，但如果您有多个数据库连接，那么这是必要的。
> 
> 例如：mysql_insert_id($conn)

# vb.net - 读取带有错误 HTTP 标头的 SOAP 响应

> ID：11943277
> 
> 赞同：0
> 
> 时间：2012-08-13T22:38:03.187
> 
> 标签：vb.net, wcf, http, soap, wsdl

我正在使用由第 3 方开发的 SOAP 接口，但返回的 HTTP 标头无效，如下所示。

```
HTTP/1.0 200 OK  
Server: SMBDK_1/2.3.0  
Date: Thu, 09 Aug 2012 18:59:14 GMT  
Connection: close  
Content-Length: 670  
Content-Type: text/html; charset=ISO-8859-1  
Content-Type: text/xml  
Expires: Thu, 09 Aug 2012 18:59:14 GMT  
Last-Modified: Thu, 09 Aug 2012 18:59:14 GMT 
```

请注意，有 2 个内容类型标签。我在这个 VB 项目中使用 VS2008。我有此连接的服务参考，可以发送请求并接收响应。我使用 MSDN 示例创建了一个 CustomTextMessageEncoder 来读取`text/html; charset=ISO-8859-1`. 这适用于单变量返回，但数组永远不会正确读取。它们总是空的。我正在使用 Web 调试代理，并且可以看到 SOAP 响应中存在数组信息，但它实际上从未被拉过。我认为这是由于错误的标题（？）。我尝试将消息解码为`text/xml; charset=ISO-8859-1`并得到相同的结果...返回空数组。

有人对如何处理这种情况有任何建议吗？我需要手动反序列化此消息还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:10:47.120

最后，这些错误的标头阻止了 Visual Studio 正确读取数组。
我最终不得不在内存中的 XMl 文档中捕获整个响应，然后打开它并使用 xmlNodeList 手动从数组中读取数据。

# architecture - 审核！如何为多个应用程序实施集中审计服务？

> ID：11943278
> 
> 赞同：0
> 
> 时间：2012-08-13T22:38:33.280
> 
> 标签：architecture, soa, message-queue, nservicebus, auditing

我们有一些在客户端运行的 CRUD Web 应用程序，我们需要实施一个审计系统来跟踪用户在任何这些产品中所做的更改。

前任。：

*   用户 ABC 创建了一个新交易（在交易应用中）
*   用户 DEF 更改了 ID 为 123 的客户端的地址信息（在客户端应用程序中）

我正在考虑一个带有消息队列的基于事件的解决方案，其中我们所有的服务都会在任何用户进行更改时发布一条消息，而审计服务将是所有这些消息的订阅者。

该模型的一些优点：

*   旧服务将有微小的变化（存储库将开始发布消息）
*   所有审计逻辑和数据将集中在一个项目中

你们如何看待这种方法，我应该记住什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:47:44.280

你好，你在 NserviceBus 下标记了这个，所以我将从 NServiceBus 的角度回答。这个想法很好，用 NServiceBus 很容易实现。如果您使用 NServiceBus 应用发布和订阅，您将免费获得审核。只需在配置中指定审计队列即可。

```
<!-- You can control the TimeToBeREceived on messages going to the audit queue  -->
<!-- by using the TimeToBeReceivedOnForwardedMessages setting -->
<UnicastBusConfig ForwardReceivedMessagesTo="AuditQueue@AdminMachine" >
  <MessageEndpointMappings>
    <!-- rest of your configuration here -->
  </MessageEndpointMappings>
</UnicastBusConfig> 
```

# xamarin.ios - 为什么 UILabel 不更新？

> ID：11943283
> 
> 赞同：0
> 
> 时间：2012-08-13T22:39:04.480
> 
> 标签：xamarin.ios, uilabel, updating

我创建了一个视图，显示当前视图上弹出的用户丢失的连接消息。我想根据连接状态的变化定期更新视图。

我可以正确获取视图并更改标签的文本（使用 WriteLines 验证），但实际显示没有任何变化。我什至尝试删除视图并读取它并调用 SetNeedsDisplay，但似乎没有任何帮助。

我有一个名为 OverView 的全局变量：

```
public static UIView OverView; 
```

我创建标签子视图，将其添加到概览中并在当前视图前面弹出概览：

```
 UILabel labelTitle = new UILabel();
            labelTitle.Text = title;

            UIView labelTitleView = (UIView) labelTitle;
            labelTitleView.Tag = 5000;
            OverView.AddSubview(labelTitleView);

            curView.InsertSubviewAbove(OverView, curView);
            curView.BringSubviewToFront(OverView); 
```

然后在稍后的时间，我尝试从另一个函数中像这样修改它：

```
 if ((OverView != null) && (OverView.Subviews != null))
        {
            for (int i = 0; i < OverView.Subviews.Length; i++)
            {
                WriteToConsole("Type: " + OverView.Subviews[i].GetType());

                if (OverView.Subviews[i] is UILabel) 
                {
                    WriteToConsole("Found Label with Tag: " + ((UILabel)(OverView.Subviews[i])).Tag + " Text: " + ((UILabel)(OverView.Subviews[i])).Text);

                    if (((UILabel)(OverView.Subviews[i])).Tag == 5000)
                    {
                        WriteToConsole("Setting subview Title to: " + lostConnectionTitle);

                        lock (overViewLocker)
                        {
                            appReference.InvokeOnMainThread(delegate
                            {
                                UILabel tempLabel = ((UILabel)(OverView.Subviews[i]));
                                tempLabel.Text = lostConnectionTitle;
                                OverView.Subviews[i].RemoveFromSuperview();
                                OverView.AddSubview(tempLabel);
                                OverView.BringSubviewToFront(tempLabel);
                                OverView.SetNeedsLayout();
                                OverView.SetNeedsDisplay();
                                WriteToConsole("SetNeedsDisplay");
                            });
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:30:55.947

您是否尝试过在标签上使用委托方法，并在事件发生时更改它们的值？

例如，如果你的事件是点击一个按钮，你应该有这样的东西：

```
yourLabel.Text = "Init";
buttonExample.TouchUpInside += (sender, e) => {
    yourLabel.Text = "I touched my button";
}; 
```

当您的视图加载时，您会看到“Init”和您的按钮，一旦您单击它，标签文本就会发生变化。

[Xamarin 在这里](http://docs.xamarin.com/ios/advanced_topics/events)有一些关于事件和委托方法的解释。

我希望这有帮助。

# emacs - 如何最快速地编辑增量搜索突出显示的文本？

> ID：11943285
> 
> 赞同：3
> 
> 时间：2012-08-13T22:39:23.730
> 
> 标签：emacs

鉴于这样的文字

> 你好世界

我对“世界”进行增量搜索

> Cs世界

文本被突出显示

> 你好，**世界**

现在我想输入新文本“All”而不是突出显示并得到：

> 大家好

我怎样才能做到这一点？（注意，我不是在寻找“查询替换”或类似的东西）。理想情况下，它必须是这样的：

> Cs World BS 全部

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T23:40:32.893

好吧，您不能使用`backspace`，因为修改查询需要该键。

我的初始化中有这个：

```
(defun le::isearch-kill-result ()
  (interactive)
  (if (use-region-p)
      (call-interactively 'kill-region)
    (kill-region (point) isearch-other-end))
  (isearch-exit))
(define-key isearch-mode-map [(control w)] 'le::isearch-kill-result) 
```

当我搜索时，我的观点从来都不是有用的，所以我不介意覆盖 `C-w`，你可能想选择另一个键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T23:26:35.913

AFAIK，没有正式的方法可以完全按照您的意愿行事。如果根据您的定义不属于亲属，则最接近的方式将是“ `C-s World M-% All`” 。`isearch-query-replace``query-replace`

> `(isearch-query-replace &optional DELIMITED REGEXP-FLAG)`
> 
> `query-replace`从要从最后一个搜索字符串替换的字符串开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:49:36.583

这也困扰着我，所以这就是我最终想出的。

## 快速设置

首先你需要[Isearch+](http://www.emacswiki.org/IsearchPlus "EmacsWiki 上的 isearch+ 页面")。如果您使用 Emacs 24 或更高版本（或者有 ELMA/package.el），您可以使用

```
M-x package-install <RET> isearch+ <RET> 
```

然后将此行添加到您的`.emacs`：

```
(global-set-key (kbd "C-.") 'isearchp-set-region-around-search-target) 
```

然后将光标放在末尾，`C-x C-e`在当前会话中进行此更改。（这使用`C-.`，您可以将其更改为您想要的任何键。）

## 如何使用

```
C-s World C-. C-w All 
```

## 这个怎么运作

它正在选择（在正确的 Emacs 用语中，它设置*活动区域*）突出显示的文本，然后`C-w`正在终止该文本（将其放入终止环）。`World`如果您愿意，现在可以稍后粘贴字符串`C-y`。

## 如果字长

isearch+ 中还有其他一些好东西。例如，如果“World”是一个较长的词，例如“Worcestershire”，而您不想全部输入，您可以试试这个：

```
C-s W C-( C-. C-w All 
```

使用 isearch+，`C-(`会将当前“搜索目标”中的其余单词拉到您的搜索中，因此在这种情况下，它会为您添加`orchestershire`到当前的 i-search 中。

# cakephp - 如何设置 CakePHP 2.x 使其表现得像 RESTful Web 服务（与 JavascriptMVC 一起使用）

> ID：11943294
> 
> 赞同：0
> 
> 时间：2012-08-13T22:40:07.067
> 
> 标签：cakephp, rest, json, javascriptmvc

我正在尝试设置 cakephp 以使用非常好的 javascriptMVC (http://forum.javascriptmvc.com)。JavaScriptMVC 需要以下格式的 JSON 输出：

```
[{
   'id': 1,
   'name' : 'Justin Meyer',
   'birthday': '1982-10-20'
},
{
   'id': 2,
   'name' : 'Brian Moschel',
   'birthday': '1983-11-10'
}] 
```

Cake 会生成一个带有前置类名的更深的嵌套数组。我找到了解决问题的尝试，但它们不适用于 cakephp 2.x。我知道我可以通过 php 简单地生成一个新数组和 json_encode() 它，但最好包含一个像[https://gist.github.com/1874366](https://gist.github.com/1874366)这样的函数和另一个去扁平化它的函数。放置这些功能的最佳位置在哪里？AppController 似乎不起作用。我应该把它放在控制器的 beforeRender () 还是 beforeFilter() 中？或者有人甚至可能知道现有的解决方案/插件吗？在我目前的情况下，这对我来说是最好的，因为我的时间非常紧迫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:43:35.107

好的，我不是 100% 确定我理解你想要做什么，所以这里有一个聪明人的话，以防万一：Cake 和 JMVC 都是全面的 MVC 框架。如果您试图将它们组合为一个单一的有凝聚力的平台来构建您的应用程序，我强烈建议您检查您的方法/平台/等。

另外——我不是 jmvc 方面的专家，所以我只是假装在 jmvc 中处理来自 Cake 的响应是完全不可能的，出于某种奇怪的原因。作为记录，想想 Cake 的反应是这样的：

```
{ "Model" : 
    [{
    'id': 1,
    'name' : 'Justin Meyer',
    'birthday': '1982-10-20'
    },
    {
    'id': 2,
    'name' : 'Brian Moschel',
    'birthday': '1983-11-10'
    }]
 } 
```

至少从 Cake 1.2 开始，Cake 就有全面的 REST 服务支持。您感兴趣的库是[HttpSocket](http://book.cakephp.org/2.0/en/core-utility-libraries/httpsocket.html)。至于 json 编码和服务响应，[请求处理](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html)包括响应各种请求、内容类型、解码和编码 json 等。最后，内置的[Set](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)实用程序几乎肯定会涵盖您需要的任何数组操作在一两行。

您感兴趣的功能非常基本，并没有太大变化。我敢打赌，您已经找到的许多（相当简单的）解决方案可能仍然有效，可能需要稍作调整。

对于几乎任何基本的服务端点，您可能会创建一个控制器（不是 AppController - 这是应用程序范围的，因此您不能直接调用它）方法，考虑到 Cake 将控制器/动作路由到您的 url：

来自不同应用的蛋糕**消费**服务如下所示：

```
http://cakeproject/collect/getInfo

class CollectController extends AppController {

public function getInfo($array = null) {
    App::uses('HttpSocket', 'Network/Http'); 
    $http = new HttpSocket();
    $http->get('http://jmvcproject/controller/action', $array);
    // ...etc. 
} 
```

Cake从同一个控制器/动作向不同的应用程序**提供**服务只是：

```
public function getInfo($array = null) {
    $results = $this->Collect->find('all', $array);
    // ...fetch the results
} 
```

或者您可以只循环该数组`foreach($this->data as $data) { ...`以删除类名。但是，如果您的数据将包括相关模型等，那么 Set 可能是最通用和最灵活的解决方案。

无论如何，HTH

# data-structures - 维护按频率排序的对象类型列表的最佳数据结构

> ID：11943299
> 
> 赞同：3
> 
> 时间：2012-08-13T22:40:28.817
> 
> 标签：data-structures, frequency, sortedlist

所以，我正在浏览一长串不同类型的东西。假设它有不同种类的食物的名称。该列表可能如下所示：

> ```
> 橄榄
> 土豆
> 草莓
> 土豆
> 土豆
> 草莓
> 
> ```

我想存储每种对象类型以及该对象类型出现的次数。此外，我无法提前枚举所有对象类型。我不知道所有的食物会是什么。

我想要这样的输出：

> ```
> 马铃薯 (3)
> 草莓 (2)
> 橄榄 (1)
> 
> ```

基本上，按频率排列的对象类型列表。最好的数据结构是什么？Java 中有没有我可以使用的内置类来防止我不得不重新发明轮子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:45:55.640

您可以使用[`HashMap<K,V>`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html)

```
Map<String,int> map = new HashMap<String,int>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:47:22.150

我会使用类似字典的结构。然后基本上你的算法看起来像这样：

```
-Begin Loop
    If current element not a key in dictionary:
        dictionary(element) -> 0 (Dictionary at key 'element' refers to 0)
    Else:
        dictionary(element)++ (increment dictionary at key) 
```

然后你可以稍后循环遍历这些键并找到它们的频率。

迈克尔·G。

# jquery - 如何设置jQuery移动滑块的宽度

> ID：11943301
> 
> 赞同：1
> 
> 时间：2012-08-13T22:41:17.583
> 
> 标签：jquery, jquery-mobile, slider

```
myScroller.scoller("refresh", {width:5}); would be fantastic 
```

这就是我所拥有的。这工作得很好（有点偏离但搞砸了）。问题是小滑块球认为它具有整个原始宽度，因此它从杆上滑落。

```
$.each($(":jqmData(role=fieldcontain) > div[class~='ui-slider']"), function () {
    var slider = $(this);
    slider.css("width", (slider.width() - 16) + "px !important");
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T23:50:24.120

您可以只选择滑块小部件并设置它们的宽度而无需循环：

```
//set all slider widgets to 250px wide
$('.ui-slider').width(250);

//set all slider widgets to 50% wide
$('.ui-slider').width('50%');

//set all slider widgets to 25px less than their current width
$('.ui-slider').width(function (i, old_width) {
    return old_width - 25;
}); 
```

我会将此代码放在这样的`pageinit`处理程序中：

```
$(document).on('pageinit', '.ui-page', function () {
    $(this).find('.ui-slider').width(250);
}); 
```

# algorithm - 多标准排序/分配到集合

> ID：11943304
> 
> 赞同：1
> 
> 时间：2012-08-13T22:41:38.753
> 
> 标签：algorithm, sorting, distribution

我正在尝试找出一个算法...

输入是一堆具有多个值的对象（例如，每个对象 3 个值，颜色/味道/年龄，尽管可能更多）。

然后，该算法会将对象分配到预定义数量的集合中。每个集合最终应该有几乎相同数量的对象（最好每个集合的对象计数不应该超过 1），并实现每个集合的值分布尽可能公平的目标（例如，尽量接近每组中的红色数量相同，其他颜色相同，以及口味和年龄等）。

值与对象绑定，不能更改。如果您将一个对象从一组移动到另一组，它会带来它的所有值。

我发现了这个相关的问题：[Algorithm for fair distribution of numbers into two sets](https://stackoverflow.com/questions/1507830/algorithm-for-fair-distribution-of-numbers-into-two-sets)

并且建议的“数字分区问题”似乎有助于单值分布，但我正在寻找每个对象具有多个值的信息/算法（如上所述）。

另请注意，这些值不能标准化，即每个对象不能合计为一个值。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:05:22.850

恕我直言，您应该将此视为聚类问题[http://en.wikipedia.org/wiki/Cluster_analysis](http://en.wikipedia.org/wiki/Cluster_analysis)。

# python - 自动执行模块方法前面的代码

> ID：11943307
> 
> 赞同：2
> 
> 时间：2012-08-13T22:41:57.520
> 
> 标签：python, python-requests

我正在使用[requests](http://docs.python-requests.org/en/latest/index.html)模块，但问题更为笼统。

有没有办法在从导入的模块调用方法之前自动执行代码？

这将使我更容易编写代码。目前我担心会影响友好的 Web 服务，所以除非我能找到答案，否则我将不得不实现自己的控件。

* * *

我想通过这样做：

```
import requests as requests2 
```

...然后在代码中的某个位置`requests()`，使用特殊参数或一些神奇的未被发现的语法定义一个函数。在运行自己的代码后，特殊酱料会将方法调用转发给别名为`requests2`.

这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:47:18.900

你有正确的想法。为“请求”做一个代理，做它想做的任何事情，然后将方法调用转发到实际`requests`模块。例如

```
class RequestProxy(object):
    def __init__(self):
        import requests as _requests
        self._requests = _requests

    def __getattribute__(self, attr):
        run_custom_code()
        return getattr(self._requests, attr)

requests = RequestProxy() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T22:50:12.890

您的意思是向另一个模块中的每个函数添加装饰器？你可以用一个类来模拟它：

```
class RequestsProxy(object):
    def __init__(self):
        self.special_sauce_decorator = special_sauce_indeed()
        self._requests = __import__("requests")

    def __getattr__(self, attrname):
        val = getattr(self._requests, attrname) 
        if callable(val):
            return self.special_sauce_decorator(val)
        return val 
```

示例用法：

```
>>> def special_sauce_indeed():
        def decorator(f):
                def wrapped(*args, **kwargs):
                        print 'wrapped'
                        return f(*args, **kwargs)
                return wrapped
        return decorator

>>> class OsProxy(object):
        def __init__(self):
            self.special_sauce_decorator = special_sauce_indeed()
            self._requests = __import__("os")

        def __getattr__(self, attrname):
            val = getattr(self._requests, attrname)
            if callable(val):
                return self.special_sauce_decorator(val)
            return val

>>> os = OsProxy()
>>> os.listdir(".")
wrapped
['DLLs', 'Doc', 'faiojerf.py', 'func_counter_test.py', 'include', 'inet_time.py', 'kcol.py', 'Lib', 'libs', 'LICENSE.txt', 'memoize_test.py', 'minpy.py', 'NEWS.txt', 'numpy-wininst.log', 'paren_test.py', 'PIL-wininst.log', 'psycopg2-wininst.log', 'python.exe', 'pythonw.exe', 'pywin32-wininst.log', 'README.txt', 'Removenumpy.exe', 'RemovePIL.exe', 'Removepsycopg2.exe', 'Removepywin32.exe', 'Removescipy.exe', 'Removesetuptools.exe', 'scipy-wininst.log', 'Scripts', 'setuptools-wininst.log', 'slots.py', 'so1.py', 'staticvar.py', 'summing.py', 'taojiwjiot.,py', 'tcl', 'templol.py', 'test.py', 'thunkify_test.py', 'TicketNumberGenerator.py', 'Tools', 'w9xpopen.exe', 'wordcount.py'] 
```

# c - 分配二维字符数组 malloc 或 calloc

> ID：11943308
> 
> 赞同：0
> 
> 时间：2012-08-13T22:42:00.203
> 
> 标签：c, string, malloc, calloc, dynamic-allocation

我最近决定复习我的 C 知识（我只剩下一点点）。我很快意识到，第一个变得模糊的*技能*是内存管理。该死的。

我决定最好的办法是写一些毫无意义的指针练习。第一个是分配一个由 4 个字符数组组成的数组，每个字符数组的长度都是可变的。

该代码的简化版本：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main()
{
    char **aStr = malloc(4*sizeof(aStr));
    int j = 0;
    int i = 0;
    while(i<sizeof(aStr))
    {
        j = 4 + 2*i;//in my code, length is determined by arguments
        aStr[i] = malloc(j*sizeof(aStr[i]));
        j--;
        strncpy(aStr[i],"RaisinRubarbCarrot"+i,j);
        aStr[i][j] = 0;//just a habbit
        j++;
        printf("ptr@:%p\n\tkey:%d\n\tval:%s\n\tlength:%d (%d)\n\n",*aStr[i],i,aStr[i],j,strlen(aStr[i]));
        i++;
    }
    free(aStr);
    return 0;
} 
```

我觉得这很笨拙，而且违反直觉。今天我想起了我的宿敌：`calloc`. 然后我写了

```
char **aStr = (char **)calloc(4, sizeof(char *)); 
```

并在循环中：

```
aStr[i] = (char *) calloc(j,sizeof(char *)); 
```

我找到了这样写最后一行的代码示例：

```
aStr[i] = (char *) calloc(j,sizeof(char));//without the asterisk 
```

问题1：有什么区别，如果有的话？

问题2：难道没有另一种分配字符串数组的方法吗？我现在看到代码的方式，感觉/看起来我首先将 4 个指针分配给单个 char 指针，然后分配每个指针所需的实际大小。只是感觉不对。

再说一次，我可能对所有这一切都错了，在这种情况下：随意将我的头撞在墙上，并指出我应该阅读一本体面的手册的方向，然后再浪费你所有的时间......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:48:05.780

`char *`并且`char`是两种不同的类型，并且具有不同的数据大小。A`char`总是一个字节，所以`sizeof(char)`总是*1*。另一方面，*指向 char*的指针在 32 位系统上将是 4 个字节。因此，如果您使用`sizeof(char*)`为字符串分配空间，您将分配比您需要的更多的空间。

使用循环分配单个字符串很好。假设你的字符串有一个最大长度，你*可以*只分配一个大块，但这会很笨拙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:52:07.080

1.  您应该使用 sizeof(char) 而不是 sizeof(char*) 因为您正在尝试为字符数组而不是字符指针数组分配内存。所以这是正确的版本：

    ```
    aStr[i] = (char*) calloc(j, sizeof(char)); 
    //first argument number of memory
    //locations to be allocated
    //second argument, size of each location 
    ```

    calloc 与 malloc 的区别/优势在于它还将内存位置初始化为 0。

2.  您首先分配 4 个指向字符的指针的数组。然后，为每个字符串分配内存（之前分配的 4 个指针中的每一个都将指向这些数组之一）

# flash - 有没有办法替换 Web 应用程序加载的某些资源并放置其他任意资源？

> ID：11943310
> 
> 赞同：1
> 
> 时间：2012-08-13T22:42:23.183
> 
> 标签：flash, web-applications, internationalization, web, google-chrome-devtools

我必须做一些逆向工程才能翻译一个 Flash 网络应用程序。

现在，我可以假设所有字符串都在我识别的 JSON URL 中进行了外部化。

所以我想知道是否有办法将这些消耗的 JSON 更改为我定义的一些任意 JSON，并检查上述假设。

我有想法在主机文件的帮助下填充主机。但我可以这样做，因为我只需要更改一些这样的资源：

www.example.com/externalized-strings.json

并且不更改此域下的所有资源。

我正在使用 Windos、Chrome 及其开发工具进行分析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:52:25.150

使用[fiddler](http://www.fiddler2.com/fiddler2/)或其他 Web 调试代理。Fiddler 将允许您创建规则以根据请求的属性更改请求的 URL。

# c# - 如何以编程方式设置动态创建以嵌入 TableLayoutPanel 的控件的 Column 和 Row 属性？

> ID：11943311
> 
> 赞同：4
> 
> 时间：2012-08-13T22:42:43.467
> 
> 标签：c#, winforms, dynamic, tablelayoutpanel

当我在 TableLayoutPanel 上放置一个控件（例如 Label 或 TextBox）时，它具有（当然还有许多其他属性）以下属性：

```
Cell.Column
Cell.Row
Column
Row 
```

...但这些控件通常不具有这些属性（IOW、标签和未放置在 TLP 上的文本框没有它们）。

如何以编程方式将值分配给这些属性（给要嵌入 TLP 的控件）？

这是我现有的标签代码：

```
. . .
lblName = string.Format("label{0}", i);
var lbl = new Label()
{
    Name = lblName,
    Parent = tableLayoutPanelPlatypi,
    Column = ColNum, // Doesn't compile; Column property not recognized
    Row = i - 1,     // Doesn't compile; Row property not recognized
    Dock = DockStyle.Fill,
    Margin = 0,
    TextAlign = ContentAlignment.MiddleCenter,
    Text = GettysburgAddressObfuscation()
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T23:13:25.633

您可以通过 TableLayoutPanel 的控件 Add 方法添加它们：

```
tableLayoutPanelPlatypi.Controls.Add(lbl, ColNum, i - 1); 
```

或者正如您所指出的，每个属性都可以单独设置：

```
tableLayoutPanelPlatypi.SetColumn(lbl, ColNum);
tableLayoutPanelPlatypi.SetRow(lbl, i - 1); 
```

表单的设计器会为您方便地添加这些属性，但是如果您在设计器文件中查看已添加到 TableLayoutPanel 的控件，它会使用上面的格式。

# objective-c - 教程 使用 NSFileManager 存储数据？

> ID：11943314
> 
> 赞同：0
> 
> 时间：2012-08-13T22:43:03.600
> 
> 标签：objective-c, cocoa-touch, caching, nsfilemanager

嗨，我正在寻找一些关于使用 NSFileManager 将数据存储在目录中的教程，例如缓存等，我真的找不到一个很好的例子。关于在哪里可以找到一些建议？谢谢。附言。我知道也有核心数据，但目前我只想为 NSFileManager 找到一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:13:36.023

> 我有一个显示一些照片的应用程序，我想缓存看过的照片，这样我就不必重新下载已经看过的照片

看`NSURLCache`

**课程概述：**

```
NSURLCache implements the caching of responses to URL load
requests by mapping NSURLRequest objects to NSCachedURLResponse
objects. It is a composite of an in-memory and an on-disk cache.

Methods are provided to manipulate the sizes of each of these
caches as well as to control the path on disk to use for persistent
storage of cache data. 
```

# wpf - WPF中的MeasureOverride等方法

> ID：11943316
> 
> 赞同：0
> 
> 时间：2012-08-13T22:43:11.360
> 
> 标签：wpf, xaml

我对 WPF 及其实施方式有疑问，想知道专家是否可以建议我。在 WPF 中，一开始我们会不断遇到我们从未听说过的类（或者说这只是我的情况），并且每个类都有自己的新方法。

今天，我正在使用 Adorner 编写应用程序，现在我知道我必须使用 FrameworkElement 中的 MeasureOverride() ... 是的，我知道 WPF 中的大多数控件都来自 FrameworkElement，但我应该如何知道应该使用哪种方法？

我看到数十个博客抛出方法并指示应该做什么，但是知道应该使用什么以及如何使用的最佳方法是什么？我想我需要知道的是，我应该如何知道特定情况下需要哪种方法。我只是不喜欢模仿这里或那里所做的事情。我希望我在这里想说的很清楚。

我担心事情正在失控并且有太多信息无法赶上。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:52:14.597

我想我需要在这里参考我自己的博客。

[http://csharpramblings.blogspot.ca/2012/05/understanding-wpf-layout-system.html](http://csharpramblings.blogspot.ca/2012/05/understanding-wpf-layout-system.html)

本文是对 WPF 布局系统的简短介绍，以自定义面板控件为例。

# c++ - Xpath如何通过属性c ++ libxml2删除子节点

> ID：11943318
> 
> 赞同：2
> 
> 时间：2012-08-13T22:43:16.600
> 
> 标签：c++, xpath, libxml2

如何删除具有特定属性的孩子？我正在使用 c++/libxml2。到目前为止我的尝试（在示例中我想删除 id="2" 的子节点）：

```
Given XML:
<p>
   <parent> <--- current context
       <child id="1" />
       <child id="2" />
       <child id="3" />
   </parent>
</p>

xmlNodePtr p = (parent node)// Parent node, in my example "current context"
xmlChar* attribute = (xmlChar*)"id";
xmlChar* attribute_value = (xmlChar*)"2";
xmlChar* xml_str;

for(p=p->children; p!=NULL; p=p->next){
  xml_str = xmlGetProp(p, attribute);
  if(xml_str == attribute_value){
     // Remove this node
   }
}
xmlFree(xml_str); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T23:11:26.827

调用`xmlUnlinkNode`以删除节点。`xmlFreeNode`如果需要，请稍后调用以释放它：

```
for (p = p->children; p; ) {
  // Use xmlStrEqual instead of operator== to avoid comparing literal addresses
  if (xmlStrEqual(xml_str, attribute_value)) {
    xmlNodePtr node = p;
    p = p->next;
    xmlUnlinkNode(node);
    xmlFreeNode(node);
  } else {
    p = p->next;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:06:00.337

好久没用这个库了，看看[这个方法](http://pyxmlsec.labs.libre-entreprise.org/docs/html/libxml2.xmlNode-class.html#freeNode)。请注意，根据描述，您需要先致电`xmlUnlinkNode`。

# asp.net-mvc-3 - mvc 不同项目中同名的两个区域

> ID：11943319
> 
> 赞同：0
> 
> 时间：2012-08-13T22:43:36.820
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, controllers, areas

我有一个具有以下结构的项目：

解决方案
- CMS.core
---Areas
------Admin
---------Controllers
- Site.Web
---Areas
------Admin
---------控制器

每次我尝试路由到它下面的控制器时，`site.web/areas/admin/controllers`它似乎只在`cms.core/areas/admin/controllers`.

这有意义吗？如何将 mvc 路由到位于不同项目中的多个同名区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:25:08.160

您需要提供控制器所在的命名空间。例如：

```
routes.MapRoute(
    "SiteWebAdminRoute",
    "site.web/areas/{controller}/{action}/{id}", 
    new { Area = "SiteWeb", controller = "Home", action = "Index", id = UrlParameter.Optional },
    new string[] { "Site.Web.Areas.Admin.Controllers" }); 
```

..或类似的东西。请注意底部的字符串数组。如果您查看 Intellisense，它会显示此字符串数组表示此路由应在其中查找控制器的任何命名空间。你可以对你的其他区域路线做同样的事情。除了你会提供一个不同的命名空间来查看。

# javascript - 在javascript中设置CSS渐变？

> ID：11943322
> 
> 赞同：4
> 
> 时间：2012-08-13T22:43:51.593
> 
> 标签：javascript, jquery, html, css

所以我一直在尝试使用 javascript 设置渐变，使其具有鼠标悬停效果，但我没有运气，无法让它工作，这是我的 javascript。

```
function mouseOVER(x)
{
x.backgroundImage="-webkit-gradient(linear, left bottom, left top, color-stop(0, #F7F7F7), color-stop(1, #FFFFFF));";
}

function mouseOFF(x)
{
x.backgroundImage="-webkit-gradient(linear, left bottom, left top, color-stop(0, #F7F7F7), color-stop(1, #BABABA));";

}​ 
```

我一直在使用 jsFiddle 来测试东西，所以[这](http://jsfiddle.net/Fluffy977/ZauwA/)是我的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:50:44.887

尝试这样的想法，仅使用 CSS

**CSS**

```
#home{
    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #F7F7F7), color-stop(1, #BABABA));
    width:100px;
    height:45px;
    text-align:center;
    border-radius:10px;
    position:relative;
    top:15px;
    left:15px;
}
#home:hover{
    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #F7F7F7), color-stop(1, #FFFFFF));
}
#homenav{
    font-family:Arial, Helvetica, sans-serif;
    text-decoration: none;
    color:#000000;
    position:relative;
    top:12.5px;
} 
```

演示[http://jsfiddle.net/enve/ZauwA/11/](http://jsfiddle.net/enve/ZauwA/11/)

* * *

要在鼠标悬停时更改文本，请使用此代码

**HTML**

```
<nav>
    <div id="home">
    <a href="home.html" id="homenav" onmouseover="changeText()" onmouseout="returnText()">HOME</a>
    </div>
</nav>​

<script>
function changeText()
{
document.getElementById("homenav").innerHTML='Welcome'
}
function returnText()
{
document.getElementById("homenav").innerHTML='Home'
}
</script> 
```

完整演示[http://jsfiddle.net/enve/ZauwA/19/](http://jsfiddle.net/enve/ZauwA/19/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T22:59:39.390

使用 jQuery 可以：

```
$('#block').css({
    background: "-webkit-gradient(linear, left top, left bottom, from(#ccc), to(#000))" 
}); 
```

您还需要为其他非 webkit 浏览器应用样式。

不知道为什么你的小提琴不起作用。控制台告诉我你的功能没有定义。

你为什么要这样做？如果没有必要，我会明确建议上面提到的 CSS 方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T23:39:09.787

No need to use jQuery, vanilla JS is fine. You're simply missing a correct `style` property reference:

```
x.backgroundImage='...'; //no such property
x.style.backgroundImage='...'; //works correctly 
```

[Working sample](http://jsfiddle.net/ovfiddle/fL2Cq/) (requires a webkit browser obviously)

That being said, you should really use pure CSS and rely on `:hover` [dynamic pseudo-class](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes):

```
#home {/*gradient 1*/}
#home:hover {/*gradient 2*/} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T22:48:43.120

你愿意接受纯 CSS 解决方案吗？

如果是这样，请添加：

```
#homenav:hover{
    -webkit-gradient(linear, left bottom, left top, color-stop(0, #F7F7F7), color-stop(1, #FFFFFF));
} 
```

​</p>

# c++ - 尝试，抛出，捕获二维数组不起作用

> ID：11943323
> 
> 赞同：0
> 
> 时间：2012-08-13T22:43:56.407
> 
> 标签：c++, visual-c++

我仍然是二维数组的新手，但我试图让一些异常处理来处理这个问题：

```
const int employee = 3;   // number of employees
const int age = 4;      // number of ages
int employeesAge[employee][age] = { {50 , 0 , 45, 101}, {45, 6 ,7, 8} , {25 , 8,0, 35}}

for(int i =0; i < employeesAge[employee][age]; i++)
   if(employeesAge[employee][age] < 0 || employeesAge[employee][age] > 100)
   {
      try
       {
         throw employeesAge[employee][age];
       }
       catch(int param)
       {
          cout << "employee can't be under 0 age or over 100 to work here" << endl;
       }
    } 
```

现在我什至不确定我所做的是否可能，但这是我得到的错误：

```
uninitialized local variable 'employeesAge' used 
```

如果有人可以提供帮助，将不胜感激。现在我考虑一下，我认为我拥有的 for 语句不是有效或必要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:54:50.240

在该行`for(int i =0; i < employeesAge[employee][age]; i++)`中，您将整数`i`与进行比较`employeesAge[3][4]`，但这些索引超出了范围 - 在这种情况下，最大值是`employeesAge[2][3]`。此外，你的 for 循环对我来说真的没有多大意义——你想要“foreach 员工”吗？我怀疑是这样 - 如果是这样的话，更接近的解决方案是：

```
for(int i = 0; i < employee; i++)
{
    if(employeesAge[i][age] < 0 || employeesAge[i][age] > 100) {
    ...
} 
```

但即使这样也不完全正确，现在`age`索引超出了该数组的范围。我不确定这里的逻辑是什么——为什么一个员工会有多个年龄与他们相关联？正如您的阵列现在一样，看起来您有 3 名员工，每名员工有 4 个年龄。我猜一下，假设您有 3 组员工，每个组有 4 名成员。如果是这样的话，代码：

```
for(int i = 0; i < employee; i++)
{
    for(int j = 0; j < age; j++)
    {
        if(employeesAge[i][j] < 0 || employeesAge[i][j] > 100) {
            throw employeesAge[i][j];
        }
    } 
```

}

...可能更有意义，但我肯定会更改索引/数组名称以更具描述性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:48:30.700

看看你的缩进和大括号（这不是错误，但我想指出它，因为它可能会咬你的屁股并导致你长时间痛苦的调试聚会）：

```
for(int i =0; i < employeesAge[employee][age]; i++)
    if(employeesAge[employee][age] < 0 || employeesAge[employee][age] > 100) {
        try {
            throw employeesAge[employee][age];
        }
        catch(string param) {
            cout << "employee can't be under 0 age or over 100 to work here" << endl;
        }
    } 
```

（`for`循环没有左大括号或右大括号，如果你不小心的话肯定会导致问题）

但更重要的是你循环错了。你有`for(int i =0; i < employeesAge[employee][age]; i++)`，但你从不使用`i`. 这是错误的，因为 1)`employeesAge[employee][age]`超出范围（只有索引`[0][0]`有效`[employee - 1][age - 1]`）；和 2) 因为你从不使用`i`并继续使用`employeesAge[employee][age]`这表明你只是继续检查相同的值。您的编译器可能足够聪明，可以知道这`employeesAge[employee][age]`是超出范围的，并且可能会警告您。

# ruby-on-rails - Ruby：ActiveRecord 关系

> ID：11943330
> 
> 赞同：0
> 
> 时间：2012-08-13T22:44:43.223
> 
> 标签：ruby-on-rails, activerecord, relationship

在我的应用程序中设置我想要的关系时遇到了一些问题。一些帮助和提示将不胜感激！

**我有以下型号：**

*   用户**（id，用户名）**
*   公司**（身份证、姓名）**
*   广告系列**（id、名称、company_id）**
*   关系**（user_id、company_id）**

这种关系应该将用户与许多公司联系起来。公司有_许多活动。

我想连接与特定用户关注的公司相关的所有活动。

用户 >（关系）> 公司 > 活动

我最好不要发布一些代码，因为它只是一团糟，根本没有做我想做的事。

我还真的尝试关注 railstutorial.org，[http:](http://ruby.railstutorial.org/chapters/following-users#top) //ruby.railstutorial.org/chapters/following-users#top并按照我想要的方式更改它，但没有成功。

我需要你的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:48:27.907

应该很简单！这显然是伪代码，但你去：

```
User
    has_many :relationships
    has_many :companies, :through => :relationships
    has_many :campaigns, :through => :companies

Relationship
    belongs_to :user
    belongs_to :company

Company
    has_many :relationships
    has_many :users, :through => :relationships
    has_many :campaigns

Campaign
    belongs_to :company 
```

# seo - 文档的 Schema.org 类型？

> ID：11943331
> 
> 赞同：1
> 
> 时间：2012-08-13T22:45:09.033
> 
> 标签：seo, semantics, schema.org

我有点惊讶文档没有定义类型。我可以在其中放置[**Full Schema.org Hierarchy**](http://schema.org/docs/full.html)中未列出的类型吗？

我可能会使用`Article`，但没有为文档定义类型似乎很疯狂。例如法律文件、合同、协议、工作说明书、保密协议等……也许是`Product`？

这里可能没有正确或错误的答案，只是寻找一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:45:56.853

`CreativeWork`似乎是最接近的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-28T12:12:22.490

与此同时，还有用于电子文件和文档的[DigitalDocument 。](https://schema.org/DigitalDocument)

# oauth - 获取当前登录用户的 UID — Dropbox

> ID：11943332
> 
> 赞同：0
> 
> 时间：2012-08-13T22:45:28.560
> 
> 标签：oauth, dropbox, dropbox-api

是否可以找出当前登录用户的 UID（Dropbox 中的用户 UID），以便我可以使用现有的 access_token 而不是请求新的？

我正在考虑将带有相应 UID 的 access_tokens 存储在数据库中。

如果没有，是否有更好的方法来处理回访用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:40:52.080

我认为你的基本想法倒退了。您需要向您的应用程序识别用户，以便选择要使用的正确 OAuth 令牌。如果没有用户的令牌，您将无法获取用户的 Dropbox UID。如果没有令牌，您将无法识别用户是谁。

# objective-c - 核心数据数据库中的iOS密码哈希数据类型？

> ID：11943336
> 
> 赞同：0
> 
> 时间：2012-08-13T22:46:10.603
> 
> 标签：objective-c, ios, cocoa-touch, core-data, hash

好的，我正在使用*Security.framework*提供的钥匙串 API来存储我的应用程序中用户帐户的密码。不幸的是，当您的应用程序通过 Cydia 分发时，钥匙串 API 无法很好地集成，并且由于登录过程似乎被破坏，它位于*/Applications目录中。*

我决定将用户输入的 pin 加密到 pin 文本字段中，并将 pin 作为哈希存储在 Core Data 数据库中。我知道这不如使用 Keychain API 安全，但我想在今年某个时候完成/发布我的应用程序。所以我将必要的对象添加到必要的类中，以便能够将引脚存储在数据库中。所以我的问题是，为什么我应该使用数据类型将密码哈希存储在核心数据数据库中。我假设*String*将是必要的选择，但只是想与 SO 人群确认。

这是我正在谈论的图片，

![在此处输入图像描述](../Images/1a176084d7ec16a0ca4d10f96fc7b694.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:55:45.857

使用核心数据`NSString`。根据您要使用的哈希方法，它很可能是一个字母数字字符串。

`Binary`将用于图片和类似的东西。

# jquery - 我想用 jQuery 在一个页面上为 5-6 个单独的元素设置动画。我担心旧版浏览器

> ID：11943338
> 
> 赞同：2
> 
> 时间：2012-08-13T22:46:14.750
> 
> 标签：jquery, animation, web

单击特定元素后，我想为 5-6 个单独的图像设置动画以在页面上移动。我想把这个动画保持在 1-2 秒以内。

我担心这将在不太好的计算机上运行多快。

我想代码看起来像这样，每个图像都有一个不同的类：

```
$("#startAnimation").click(function(){
$(".toBeAnimated").animate({ 
    marginLeft: "+=250px",
}, 1000 );
}); 
```

你们有什么建议吗？这会不会太多了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:51:34.733

jQuery 动画的工作方式，动画将始终在您指定的时间内完成。即使在慢速计算机上的非常慢的浏览器中，动画仍然会在所需的时间内完成。

问题是动画的流畅程度与它的跳跃程度。在较慢的浏览器/较慢的计算机中，没有足够的 CPU 来显示大量单独的帧并使动画顺利运行，因此它以更大的步长移动，但它仍然在所需的时间内完成。

所以最坏的情况是，动画在速度较慢的计算机上变得生涩或跳跃。如果您试图避免在动画跳动时显示动画，那么这是一个更大的项目。您必须设计某种运行时测试来测试主机运行动画的能力，如果您发现主机运行速度较慢，则跳过该计算机上的动画。一般的想法是，您运行一些测试动画，这些动画代表您在页面加载时将要执行的操作，并计算您似乎有时间处理的帧数。

经过一些实验，您设置了一些阈值，如果您在测试动画中看到的每秒帧数少于 X 帧，则您设置了一个 cookie，您不应该在这台计算机上使用动画。您可以将 cookie 设置为在几个月后到期，以便在主机功能发生变化时定期重新运行测试。在以后的页面访问中，您首先检查 cookie，如果 cookie 存在，您将使用 cookie 中的测试结果，而不是再次运行测试。

# python - gzip 文件上的 readline 会导致无限循环 [python]

> ID：11943340
> 
> 赞同：1
> 
> 时间：2012-08-13T22:46:33.020
> 
> 标签：python, unicode, gzip

我有一个 gzip 文件，我正在尝试读取文件的行：

```
g = gzip.open(filename)

while True:
    dline = g.readline()

    if not dline:
        print "<<" + dline + ">>"

g.close() 
```

上面的输出是：

```
<<>>
<<>>
<<>>
<<>>
... infinitely 
```

这里有什么问题？PS gzip 是一个 utf-8 文本文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:48:18.220

您没有可能退出循环的条件。尝试：

```
while True:
    dline = g.readline()
    if not dline:
        break
    print "<<" + dline + ">>" 
```

当`readline()`没有更多行要读取时，函数族返回一个空字符串。

# sql - 在sql中填充整数月份？

> ID：11943341
> 
> 赞同：0
> 
> 时间：2012-08-13T22:47:04.830
> 
> 标签：sql

我有列 stsmm ，它是一个月整数。我需要它以MM的形式。

我试过这个：`RIGHT('0' || cast(stsmm as char(2)), 2)`但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:38:17.277

尝试使用这个：

```
select right(cast(100 + yourmonthcolumn as char(3)), 2) 
```

这种方式总是在MM中返回

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T22:58:13.633

需要是`RIGHT('0' || cast(stsmm as varchar(2)), 2)`

# jquery - JqueryUI Draggable 在 IE 中不起作用？

> ID：11943344
> 
> 赞同：1
> 
> 时间：2012-08-13T22:47:17.950
> 
> 标签：jquery, internet-explorer, draggable, jquery-ui-dialog, jquery-ui-draggable

我正在使用 JQueryUI 来帮助处理此页面上的可移动项目：

[http://www.hiredavewaring.com](http://www.hiredavewaring.com)

如果您向下滚动，您会看到 png，您可以抓取并在我的脸上移动以创建 Mr. PotatoHead 类型的效果。

我知道它不是世界上最漂亮的代码，但它在除 Internet Explorer 之外的所有浏览器上都运行良好。

有谁知道帮助这些项目在 IE 中可拖动的修复程序？

这是没有 Google Analytics 或 Meta 的代码：

```
<link rel="stylesheet" type="text/css" href="css/swagger.css" />

<!-- Draggable Pics -->
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css"
    href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
<!-- end Draggable Pics -->

</head>

<body>

<div id="wrapper3">

  <div id="coverleftside1">
        <div id="dave3">
        <img src="images/dave3.png" alt="David Lee Waring, a Graphic and Web Designer in Orlando, FL">
        </div>
  </div>
    <div id="coverrightside1">

    </div>
    <div class="clear">
    </div>
    <div id="sig">
    <img src="images/logo2.png" alt="David Lee Waring, a Graphic and Web Designer in Orlando, FL">
    </div>
    <div id="nav3">
    <ul>
            <li><a href="http://www.hiredavewaring.com/index.html" >Home</a></li>
            <li><a href="http://www.hiredavewaring.com/about.html"  >About</a></li>
            <li><a href="http://www.hiredavewaring.com/design.html" >Portfolio</a></li>
            <li><a href="http://www.hiredavewaring.com/contact.html"  >Contact</a></li>
            <li><a href="http://www.hiredavewaring.com/blog" >Blog</a></li>
      </ul>
    </div>
    <p>Grafiti Time!  Click on an image below and drag it over Dave's face. Send us a screen shot of your favorite combination.</p>
    <a href="http://www.hiredavewaring.com"> Click Here to reset and start over. </a>
<div class="draggable">   
<div class="demo"><img src="images/funnyface/glassesnose.png" alt="Move me over Dave's Face!" ></div>
<div class="demo2"><img src="images/funnyface/beard1.png" alt="Move me over Dave's Face!" ></div>
<div class="demo3"><img src="images/funnyface/beard2.png" alt="Move me over Dave's Face!" ></div>
<div class="demo4"><img src="images/funnyface/beard3.png" alt="Move me over Dave's Face!" ></div>
<div class="demo5"><img src="images/funnyface/must1.png" alt="Move me over Dave's Face!" ></div>
<div class="demo6"><img src="images/funnyface/must2.png" alt="Move me over Dave's Face!" ></div>
<div class="demo7"><img src="images/funnyface/eyesangry.png" alt="Move me over Dave's Face!" ></div>
<div class="demo8"><img src="images/funnyface/eyescross.png" alt="Move me over Dave's Face!" ></div>
<div class="demo9"><img src="images/funnyface/eyesgoogle.png" alt="Move me over Dave's Face!" ></div>
<div class="demo10"><img src="images/funnyface/eyesscared.png" alt="Move me over Dave's Face!" ></div>
</div> 
<SCRIPT>
$(function(){
    $('.demo')
        .draggable();
});
$(function(){
    $('.demo2')
        .draggable();
});
$(function(){
    $('.demo3')
        .draggable();
});
$(function(){
    $('.demo4')
        .draggable();
});
$(function(){
    $('.demo5')
        .draggable();
});
$(function(){
    $('.demo6')
        .draggable();
});
$(function(){
    $('.demo7')
        .draggable();
});
$(function(){
    $('.demo8')
        .draggable();
});
$(function(){
    $('.demo9')
        .draggable();
});
$(function(){
    $('.demo10')
        .draggable();
});
</SCRIPT>
<!-- End Draggable -->

</div>

</body>
</html> 
```

谢谢，戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:43:12.010

首先，我会将您的代码限制为单个`$(function(){});`.

```
$(function(){
    $('.demo').draggable();
    $('.demo2').draggable();
    $('.demo3').draggable();
    $('.demo4').draggable();
    $('.demo5').draggable();
    $('.demo6').draggable();
    $('.demo7').draggable();
    $('.demo8').draggable();
    $('.demo9').draggable();
    $('.demo10').draggable();
}); 
```

更重要的是， `draggable` **需要 jQuery UI 1.8.6**或更高版本才能在 IE9 中工作。还有一个适用于旧版本的[补丁](http://forum.jquery.com/topic/jquery-ui-sortable-and-draggable-do-not-work-in-ie9)，但我真的建议升级。

# c# - Asynchronous vs Synchronous WebRequest，有必要吗？

> ID：11943350
> 
> 赞同：0
> 
> 时间：2012-08-13T22:47:37.557
> 
> 标签：c#, multithreading, asp.net-mvc-3, asynchronous, synchronous

**背景：**

我正在编写一个 RouteHandler 作为我的 MVC3 解决方案的一部分。它的目的是从我的云存储中获取图像和文件，并将它们传送到浏览器，同时屏蔽云存储 url。

因此，“媒体”子域中的所有内容都会被路由到我的 MediaRouteHandler ，在那里我实现了获取图像的逻辑。

我正在努力获得 HttpWebRequest 的异步实现。充其量它的行为不规律。有时正确地降低图像有时不能。

**问题：**

所以，我的问题是。

标准浏览器是同步还是异步加载图像？或者我是否正在尝试做一些浏览器通常不会做的事情（而且只是在浪费我的时间）。

即，如果浏览器获取图像的默认方式是来自同步线程，那么我很高兴这样做。

是这样吗？

谢谢。

**一点测试：**

这是我的同步路由处理程序的结果。您会看到图像请求重叠，并且通过使用提琴手来模拟调制解调器下载速度，我可以看到它们同时以不同的速度下降。

![同步下载速度](../Images/8f3098efc1d10acf2c6bbb0581e9af77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:53:42.067

浏览器异步加载图像，但实际上异步加载的主要原因不是阻塞线程（以及一些并行性）。如果您真的在处理**服务器端**异步请求，请尝试在某个后台线程中将所有调用包装为同步。这样您就不会阻塞主线程并仍然同步加载图像。我不确定这种情况是否会在 ASP.NET MVC 中正常工作。;]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:04:09.197

如果一张一张地请求图像，那么实际上每个都`MediaRouteHandler`在自己的线程中运行。因此，您可以简单地`HttpWebRequest`为每个图像执行同步，因为没有任何内容被阻止（客户端浏览器无论如何都需要完整的图像文件）。

请注意，由于性能优势，异步调用值得考虑。如果图像数据很长 - 您可以开始将数据推送到客户端浏览器，尽管尚未从云存储中下载全部数据。

# jquery - DDSmoothmenu（动态驱动器）在加载页面时显示扩展菜单（丑陋！）

> ID：11943359
> 
> 赞同：0
> 
> 时间：2012-08-13T22:48:30.437
> 
> 标签：jquery, css, navigation

我的网站位于[http://www.idataresearch.net](http://www.idataresearch.net)

我正在为导航菜单使用动态驱动器的 ddmoothmenu 脚本。我真的很喜欢这个脚本，并且很高兴看到以前的开发人员在我们的网站上实现了它。但是，无论出于何种原因，它都会在加载页面所需的瞬间显示完全展开的菜单。

我试过 display: none 在 smoothmenu1 div 和创建这个函数：

```
function showDiv();
  $(#smoothmenu1).show();
} 
```

接着

但这没有用。有人可以看看我的代码，让我知道我缺少什么来解决这个问题......谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:57:37.853

您的代码有错误。

尝试这个

```
function showDiv() {
  $('#smoothmenu1').show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:56:31.943

好吧，我看到了一些错误。假设您没有拼写错误，您的 Javascript 应为：

```
function showDiv() {
  $('#smoothmenu1').show();
} 
```

编辑：我的意思是：你的问题说你的问题与菜单显示一瞬间有关。这被称为无样式内容闪现 (FOUC)。解决此问题的 Javascript 应在文档加载时触发，其内容为：

```
$(document).ready(function() {
  $('#smoothmenu1').show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T09:25:34.670

我找到了另一个解决方案......不像上面建议的那么短，但我认为效果更好，因为菜单不会消失一段时间。在我的情况下，我使用了 css 文件 ddsmoothmenu-v.css，复制并粘贴了整个内容，所以我有两次相同的样式，然后在我的情况下，我用外部 div #lmenu 的 id 替换了一个副本类 .ddsmoothmenu .. . 所以菜单在菜单初始化之前立即被样式化。

# ios - 推送视图控制器的背景颜色

> ID：11943360
> 
> 赞同：0
> 
> 时间：2012-08-13T22:48:32.150
> 
> 标签：ios, pushviewcontroller

我正在使用以下方式推送视图控制器（使用 .xib）：

```
[self.navigationController pushViewController:detailViewController
                                         animated:YES]; 
```

我在界面生成器中将背景颜色设置为黑色，但当应用程序运行时，我仍然看到默认的 iOS 灰色背景。当我查看 .xib 文件时，黑色显示在界面生成器中。

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:24:11.123

我认为您想提供更多信息，例如您的 xib 的外观等。否则很难弄清楚到底出了什么问题。而且我不认为iOS的默认bg颜色是灰色的？

但是你可以设置

```
self.view.backgroundColor = [UIColor blackColor]; 
```

在`viewDidLoad:`你的`detailViewController`我猜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:58:32.433

感谢您的输入！事实证明，一个超类将背景图像设置为默认图像。解决方案原来是：

```
// Remove background image
[[[self.view subviews] objectAtIndex:0] removeFromSuperview];
self.view.backgroundColor = [UIColor blackColor]; 
```

# postgresql - 在 PostgreSQL 查询中正确检索开始和结束时间查询

> ID：11943362
> 
> 赞同：1
> 
> 时间：2012-08-13T22:48:54.540
> 
> 标签：postgresql, common-table-expression

我有一个基于 CTE 的查询，我在其中检索两个给定时间跨度之间的每小时间隔。我的查询工作如下：

获取开始和结束日期时间（比如说 07-13-2011 00:21:09 和 07-31-2011 21:11:21）获取每小时间隔之间的每小时总查询值（这里是从 00 到 21，a总共 21 小时，但这是参数化的，取决于我每天输入的时间）。此查询运行良好，但存在问题。它显示每小时的金额，但对于开始时间，它获取每天 00:00:00 和 00:59:59 之间的所有查询，而不是 00:21:09 - 00:59:59 并且同样适用于结束时间，它获取每天 21:00:00 和 22:00:00 之间的所有查询，而不是 21:00:00 和 21:11:21。- 顺便说一下，其他小时间隔，例如 03:00 - 04:00 等目前正常检索，没有提供分钟和秒，只有 1 小时的固定间隔 - 我该如何解决这个问题？查询如下，谢谢。

```
WITH cal AS (
    SELECT generate_series('2011-02-02 00:00:00'::timestamp , '2012-04-01 05:00:00'::timestamp , '1 hour'::interval) AS stamp
        )
, qqq AS (
        SELECT date_trunc('hour', calltime) AS stamp
        , count(*) AS zcount
        FROM mytable
    WHERE calltime >= '07-13-2011 00:21:09' AND calltime <='07-31-2011 21:11:21' AND date_part('hour', calltime) >= 0 AND date_part('hour', calltime) <= 21
        GROUP BY date_trunc('hour', calltime)
        )
SELECT cal.stamp
        , COALESCE (qqq.zcount, 0) AS zcount
FROM cal
LEFT JOIN qqq ON cal.stamp = qqq.stamp
WHERE cal.stamp >= '07-13-2011 00:00:00' AND cal.stamp<='07-31-2011 21:11:21' AND date_part('hour', cal.stamp) >= 0 AND date_part('hour', cal.stamp) <= 21
ORDER BY stamp ASC; 
```

编辑：

我的问题是，尽管我在第一天的开始时间为 00:21:09，但那天之后的几天计算第一小时间隔的总查询计数作为 00:00:00 之间的总查询计数 - 01:00:00 而不是 00:21:09-01:00:00。（顺便说一下，这应该适用于每天的第一个小时间隔，我可以给开始时间和当天的 04:30:21将从那里开始每小时计算总查询数等-同样适用于结束时间 21:00:00-21:11:21，只有查询结果中的最后一天采用此间隔，其他天采用查询前通过计算 21:00:00-22:00:00 而不是 21:00:00-21:11:21 之间的所有查询来计算 21 和 22 小时之间的时间。

例如，如果在 2011 年 7 月 14 日 00:00:00 和 01:00:00 之间（7 月 13 日之后的第二天，开始日期）有 200 个查询，但在 00:21:09 - 01 之间有 159 个查询： 00:00，我应该得到 159 个查询而不是 200 个。另外，如果在任意一天的 21:00:00-22:00:00 之间有 300 个查询，其中 123 个查询在 21:00:00-21 之间:11:21，我应该得到 123 个查询而不是 300 个。（这适用于每一天，其他小时间隔应该照常计算，例如 01:00-02:00、20:00-21:00 等. 这是参数，每小时间隔和开始结束时间取决于用户输入-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:54:42.787

添加`AND calltime::time >= '00:21:09' AND calltime::time <= '21:11:21'`到`WHERE calltime >= '07-13-2011 00:21:09' AND calltime <='07-31-2011 21:11:21'`块解决了这个问题。

# android - 按 2 个字段对数据库进行排序

> ID：11943364
> 
> 赞同：0
> 
> 时间：2012-08-13T22:49:26.593
> 
> 标签：android, android-sqlite

我需要按项目名称和项目日期查询排序顺序的数据库。

例如，首先我想按字母顺序获取所有项目的名称，这没问题，但是可以有多个具有相同名称的项目，所以我还想按我将它们插入数据库的日期对它们进行排序，就像这样

A 1/1/12、A 1/2/12、A 1/3/12、B 1/1/12、B 1/2/12、B 1/3/12 等......

我怎样才能做到这一点？

我所做的所有排序都是按这样的一个字段进行的

```
CalendarEvents.EVENT_START + " COLLATE LOCALIZED ASC" 
```

这是我要排序的数据库

```
db.execSQL("CREATE TABLE " + EMGNOTE_TABLE + "(" + EMG_ID + " integer primary key autoincrement, " +
                EMG_NOTE_ID + " INTEGER, " + EMG_CDID + " INTEGER, " + EMG_CENTER_POINT + " TEXT, " + EMG_COMPANY_NAME +
                " TEXT, " + EMG_NAME + " TEXT, " + EMG_DESC + " TEXT, " + EMG_START_DATE + " TEXT, " + EMG_TTL + " TEXT, "
                + EMG_CENTER_LAT + " TEXT, " + EMG_CENTER_LON + " TEXT, " + EMG_LOCATION_TYPE + " TEXT, " + EMG_UPDATED + " TEXT, " + EMG_READ + " INTEGER);"); 
```

该字段`EMG_START_DATE`将是我要排序的日期

排序现在看起来像这样

```
CursorLoader(getActivity(),CalendarEvents.EVENTS_URI,
new String[] {CalendarEvents.EVENT_ID,CalendarEvents.EVENT_READ,CalendarEvents.EVENT_SUBJECT,
CalendarEvents.EVENT_COMPANY_NAME,CalendarEvents.EVENT_START}
,null
,null
,CalendarEvents.EVENT_COMPANY_NAME+" COLLATE LOCALIZED ASC, julianday("+CalendarEvents.EVENT_START + ")" + "COLLATE LOCALIZED DESC"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:08:19.787

您还没有显示您的数据库架构，所以我假设您有一个`ITEM_NAME`列和一个以 ISO8601 格式`ITEM_DATE`存储的列。`TEXT`在这种情况下，您必须`orderBy`在查询中简单地使用它：

```
"ITEM_NAME ASC, julianday(ITEM_DATE)" 
```

## 更新

根据架构，它应该是（我猜）：

```
"INCIDENT_STATON_NAME ASC, juliandate(INCIDENT_TOC)" 
```

# android - ListView 不会在 notifyDataSetChanged 上刷新

> ID：11943365
> 
> 赞同：1
> 
> 时间：2012-08-13T22:49:28.273
> 
> 标签：android, listview, adapter

`ListView`调用时似乎`notifyDataSetChanged();`不会刷新，但在其适配器再次设置时会刷新。

在我的活动中`onCreate`，我初始化了我`ListView`和我的适配器。然后我有这个`Hanler`每秒检查一次新值。`listview.setAdapter(arrayAdapter);`工作，但`arrayAdapter.notifyDataSetChanged();`不做任何事情。

这是代码：

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

                     lv = (ListView) findViewById(R.id.listView1);

            arrayAdapter = new ArrayAdapter<Integer>(this,android.R.layout. simple_list_item_1, myIntegers);
            lv.setAdapter(arrayAdapter);
    }

    private Handler handler = new Handler() {

            @Override
            public void handleMessage(Message msg) {
                if (msg.what == DIS){
                    handler.sendEmptyMessageDelayed(DIS, 1000);
                    if(!refresh()){
                        handler.removeMessages(DIS);
                    }
                }
            }
        };

   public boolean refresh(){

        if(ports.isEmpty()){
            return false;
        }else{
            listview.setAdapter(arrayAdapter); //WORKS
    arrayAdapter.notifyDataSetChanged(); // DOESN'T WORK
            return true;
            }
    } 
```

所以我想知道如何使它与 一起工作`notifyDataSetChanged`，因为我读到这是正确的方法，无论如何，即使`setAdapter`确实有效，它也会使我的列表视图在每次刷新时跳到开头。

编辑：

为了澄清事情，我正在为 myIntegers 添加更多值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T23:07:28.043

尝试使用该`adapter.add()`方法添加值。我认为您不能修改用于创建适配器的数组，然后期望它保存一个更新的实例来更新视图。祝你好运！

# wordpress - Wordpress 将 url 从 http:// 更改为 tel：

> ID：11943367
> 
> 赞同：0
> 
> 时间：2012-08-13T22:49:29.863
> 
> 标签：wordpress, http, tel

我整天都被困在这上面！

我在 Wordpress 中使用自定义 wp_nav，我需要将一个自定义菜单项从 href="http://555.555.5555" 更改为 href="tel:555.555.5555"。我已经在菜单项中添加了一个 class="phone" 并且我想使用该类来更改它（因为我无法在 WP 中添加自定义 id）。

我希望它在 onLoad 而不是 onClick 上完成。非常感谢您的帮助。

Wordpress 输出的代码是：

```
<li id="menu-item-654" class="phone menu-item menu-item-type-custom menu-item-object-custom menu-item-654"><a href="http://555.555.5555">Call</a></li> 
```

我需要它使用 Javascript 看起来像这样：

```
<li id="menu-item-654" class="phone menu-item menu-item-type-custom menu-item-object-custom menu-item-654"><a href="tel:555.555.5555">Call</a></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:04:21.537

如果您对一点 jQuery 感到满意，请将其加载到 WordPress 中并将其粘贴到您的标题中，或者创建一个`add_action`for `wp_head`.

```
<script type="text/javascript">
jQuery(document).ready(function(){

  var href_value;

  href_value = jQuery('li.phone a').attr('href');

  href_value = href_value.replace('http://','tel:');

  jQuery('li.phone a').attr('href',href_value);

});
</script> 
```

让我知道这是否对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:00:48.660

使用我的插件 - 它更简单 - 加上将 jQuery 直接放入标题中有点混乱。[http://wordpress.org/extend/plugins/telephone-number-linker/](http://wordpress.org/extend/plugins/telephone-number-linker/)

# c# - mschart 中的前 5 个 (MAX) 值

> ID：11943378
> 
> 赞同：0
> 
> 时间：2012-08-13T22:50:48.797
> 
> 标签：c#, mschart

我用 MSchart 做了一个图表，如何在图表中显示 mi 数据表的前 5 个（MAX）值。

我的图表显示 18 行我只想显示按值排序的 5 行（desc）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:15:07.383

如果您有一个包含“x”和“y”列的 DataTable，并且您想要绘制 y 的 5 个最大值的 x 和 y 值，您可以使用 DataView 对 DataTable 进行排序，然后循环遍历五行并将它们放在图表中：

```
// assuming dt is your DataTable with an "x" and "y" column
var dv = new DataView(dt);
dv.Sort = "y desc";

for (int count = 0; count < 5; count++ )
{
    chart1.Series[0].Points.AddXY(dv[count][0], dv[count][1]);
} 
```

## 编辑

可能有一种更简单的方法可以做到这一点。只需像往常一样添加所有数据，然后使用 DataManipulator：

```
chart1.DataManipulator.FilterTopN(5, "SeriesName"); 
```

直到今天我才使用它，但它似乎完全符合您的要求。

# java - 检查当前日期和时间是否在不包括周末的日期范围内

> ID：11943382
> 
> 赞同：2
> 
> 时间：2012-08-13T22:50:55.083
> 
> 标签：java, datetime, jodatime, intervals, dayofweek

我正在编写一个项目来处理通过门的读卡器。系统必须检查在特定时间刷卡是否有权进入特定门。例如，有些卡在周末或 8-20 点以外的工作时间没有权限。我如何用 Joda-Time 编写这样的程序？

现在我有：

```
//The code below that I have only checks for within a given date and time range.
DateTime start = new DateTime(2012, 1, 1, 0, 0);
DateTime end = new DateTime(2012, 12, 31, 0, 0);
Interval interval = new Interval(start, end);
boolean DateTimeCheck3 = interval.contains(time); // time is predeclared and gets current time from another class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:36:04.383

使用`1 <= time.getDayOfWeek() && time.getDayOfWeek() <= 5`您可以确保星期几在星期一`1`和星期五之间`5`。

# postgresql - 是否有任何简单的工具可以将 CSV 加载到 PostgreSQL 中？

> ID：11943385
> 
> 赞同：0
> 
> 时间：2012-08-13T22:51:06.923
> 
> 标签：postgresql, csv, load

是否有任何简单的工具可以将 CSV 加载到 PostgreSQL 中？我知道有 POSTGIS DBF 加载器工具，但我想知道是否有任何非商业或商业插件可以轻松加载 CSV。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T00:30:20.030

PostgreSQL 内置的[`COPY`command完全符合您的要求。](http://www.postgresql.org/docs/current/static/sql-copy.html)`\copy`当在其变体中使用时它是最有用的`psql`。

检查您的特定 Pg 版本的文档，因为`COPY`选项会有所不同。以后请在发帖时提及您的 Pg 版本。假设您使用的是 9.1，那么`psql`可以从客户端使用：

```
\copy target_table from 'the_file.csv' with (format csv) 
```

可能还有其他选项，如上面链接中所述，具体取决于您的 CSV 方言的详细信息。

请注意，该`\copy`命令*不适*用于 PgAdmin-III 或其他客户端；它特定于`psql`. 常规可以从任何客户端工作，但要求数据库*服务器*的进程`COPY`可以访问该文件，因此不太方便。*`postgres`*

 *如果工作量大或更复杂，您还可以使用[`pg_bulkload`](http://pgbulkload.projects.postgresql.org/)Talend 和 Pentaho 等 ETL 工具。*

# objective-c - 如何将图像从 url 添加到 MKAnnotationView 以进行视网膜显示？

> ID：11943386
> 
> 赞同：3
> 
> 时间：2012-08-13T22:51:06.673
> 
> 标签：objective-c, cocoa-touch, mapkit, mkannotation, mkannotationview

我正在尝试使用来自 url 的图像创建自定义 MKAnnotationView。

发生的情况是，当设备具有视网膜显示时，MKAnnotationView 的图像会变得模糊，因为它的分辨率会加倍。

如果图像来自应用程序，它将加载 @2x 图像（如果存在），但如果您从这样的 url 设置图像，例如：

```
- (MKAnnotationView *) mapView:(MKMapView *) mapView viewForAnnotation:(id ) annotation    
{
MKAnnotationView *customAnnotationView=[[MKAnnotationView alloc]
initWithAnnotation:annotation reuseIdentifier:nil];

NSData * imageData = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString:@"http://www.interaction-design.org/images/icons/play-button-red-300x300.png"]];

UIImage *img = [UIImage imageWithData:imageData];
[customAnnotationView setImage:img ];
return customAnnotationView;
} 
```

您将在视网膜显示器上看到图像非常像素化。

有什么建议该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:37:51.067

要点是这样...

1.  用于`[[UIScreen mainScreen] scale]`向您的服务器询问标准或@2x 图像。
2.  `CGImageRef`从创建一个`NSData`
3.  使用 CGImageRef 并`[[UIScreen mainScreen] scale]`创建一个`UIImage`

执行此操作的代码如下所示：

```
NSString *imagePath = @"http://www.interaction-design.org/images/icons/play-button-red-300x300";
imagePath = [imagePath stringByAppendingString:[[UIScreen mainScreen] scale] > 1 ? @"@2x.png": @".png"];
NSData *imageData = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString:imagePath]];

CGDataProviderRef dataProvider = CGDataProviderCreateWithCFData((__bridge CFDataRef)imageData);
CGImageRef imageRef = CGImageCreateWithPNGDataProvider(dataProvider, NULL, NO, kCGRenderingIntentDefault);
UIImage *image = [UIImage imageWithCGImage:imageRef scale:[[UIScreen mainScreen] scale] orientation:UIImageOrientationUp];

CGDataProviderRelease(dataProvider);
CGImageRelease(imageRef); 
```

请注意，鉴于我的代码的前两行，您需要在服务器上拥有两种图像分辨率。目前图像在视网膜上会显得更小，在非视网膜屏幕上会更大。

# java - 每次应用程序启动时如何清除 webview 的数据？

> ID：11943394
> 
> 赞同：0
> 
> 时间：2012-08-13T22:51:51.183
> 
> 标签：java, android, webview

我有一个应用程序，我在 webview 中加载 url。但是当我退出应用程序然后再次启动应用程序时，它会显示相同的页面。我希望每次应用程序启动时它都应该从主页开始。我该怎么做？这是我的 oncreate 方法：

```
 web = (WebView) findViewById(R.id.webview01);
    progressBar = (ProgressBar) findViewById(R.id.progressBar1);

    web.getSettings().setLoadWithOverviewMode(true);
    web.getSettings().setUseWideViewPort(true);

    web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    web.getSettings().setPluginState(PluginState.ON);
    web.getSettings().setJavaScriptEnabled(true); 
    web.setWebViewClient(new myWebClient()); 
```

这是 mywebclient 类：

```
 public class myWebClient extends WebViewClient {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub

            super.onPageStarted(view, url, favicon);

        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // TODO Auto-generated method stub
             if(url.startsWith("http://www.amazon.com/")) { 

                 Intent i = new Intent(Intent.ACTION_VIEW);
                 i.setData(Uri.parse(url));
                 startActivity(i);
                } 

             else{

        view.loadUrl(url);

             }
            return true;

        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub

            super.onPageFinished(view, url);

            view.setVisibility(View.VISIBLE);
            progressBar.setVisibility(View.GONE);

        }
    } 
```

这里是 onresume()：

```
@Override
    protected void onResume() {

        super.onResume();
        web.setVisibility(View.INVISIBLE);
        web.loadUrl("http://savebigshopper.com/maybelline");

    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:32:09.433

以下代码行位于您的活动中的什么位置？

```
web = (WebView) findViewById(R.id.webview01);

//...

web.loadUrl("http://savebigshopper.com/maybelline"); 
```

我的猜测是`onCreate`方法。如果这是原因，您应该将它们移到`onResume`方法中。

**编辑：**真的再看一遍真正需要移动的唯一代码`onResume`是这一行：

```
web.loadUrl("http://savebigshopper.com/maybelline"); 
```

**编辑2：**

> “一切正常，但是当我再次启动应用程序时，第一次显示上一页，然后显示主页”

这对我来说很有意义，因为它就像一个网络浏览器。您可以隐藏 webview，直到它完成加载。

```
// add this line to your onPageFinished method inside your WebViewClient

view.setVisibility(View.VISIBLE); //Show view when page has loaded.

// inside onResume method

web.setVisibility(View.INVISIBLE); //Hide it first
web.loadUrl("http://savebigshopper.com/maybelline"); 
```

# java - “...”在Java中使用？

> ID：11943410
> 
> 赞同：3
> 
> 时间：2012-08-13T22:53:47.407
> 
> 标签：java, constructor, operators

> **可能重复：**
> [我可以将数组作为参数传递给 Java 中具有可变参数的方法吗？](https://stackoverflow.com/questions/2925153/can-i-pass-an-array-as-arguments-to-a-method-with-variable-arguments-in-java)
> [什么是……在方法签名中](https://stackoverflow.com/questions/8803314/what-is-in-a-method-signature)

我在修改 Minecraft 时第一次看到这个。它有一个指定 (String ... line) 的构造函数，并认为这只是[Mojang](http://www.mojang.com/)创建的一些速记。但现在，我在看过去`ProcessBuider`，又看到[了](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#ProcessBuilder(java.lang.String...))。我想知道这是做什么用的。我最好的猜测是，它允许开发人员根据需要添加任意数量的此类对象。但如果是这样的话，为什么不直接使用数组或列表呢？

所以，真的，我要问两个问题：

1.  什么是“...”运算符，以及
2.  为什么它比使用数组或列表更有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:54:44.917

`...`表示可变参数函数的多参数列表：可以采用可变数量参数的函数。

有关此示例，请查看[`PrintStream.format`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#format%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29). 第一个（必需）参数是 format `String`，其余 0 个或多个参数满足该格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T22:57:29.980

它被称为`varargs`，正如您所说，它用于能够使用任意数量的指定类型的参数调用方法。它是在 Java 5 中引入的。
您可以在[`Java tutorials - Varargs`](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:55:43.137

这相当于一个`String[] line`. 它相当于 Java 中的 C/C++ 中的 varargs 关键字。与 C/C++ 类似，它必须作为最后一个参数出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T22:57:46.670

您已经自己回答了问题 #1。至于为什么它更有用，它只是一种需要更少打字的速记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T23:16:37.863

要回答您的第二个问题，可变参数的一个优点是您可以调用一个采用可变参数参数的函数，而无需传递该参数。相反，如果您的函数接受一个数组，并且您需要在没有任何值的情况下调用它，则调用者需要显式传递 null。

# sql-server-2008 - Dapper.net，指定的演员表无效。不能使用浮点型

> ID：11943411
> 
> 赞同：1
> 
> 时间：2012-08-13T22:53:58.227
> 
> 标签：sql-server-2008, dapper

我有一个表，有一个字段叫“水”，这个字段的数据类型`sql server 2008`是浮点数。

在我的代码中，我也使用`float`.

```
 public float? Water { get; set; } 
```

这是我收到的错误消息。

```
{"Specified cast is not valid."}
{"Error parsing column 2 (Water=15.87 - Double)"} 
```

如果我将类型更改为 double ，一切正常。

```
 public double? Water { get; set; } 
```

我回到数据库，水场的所有值都在 0-100 之间。有几个空值。

请向我解释为什么我必须使用双精度而不是浮点数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:39:11.777

这与`Dapper`. 如果您检查`SqlDbType`转换站点，您会注意到`float`SQL Server 中的 a`double`是`.NET`

[http://msdn.microsoft.com/en-us/library/system.data.sqldbtype.aspx#Mtps_DropDownFilterText](http://msdn.microsoft.com/en-us/library/system.data.sqldbtype.aspx#Mtps_DropDownFilterText)

# coldfusion - 如何使用 Coldfusion fileExist 检查 Amazon S3 上是否存在文件？

> ID：11943412
> 
> 赞同：0
> 
> 时间：2012-08-13T22:54:05.433
> 
> 标签：coldfusion, amazon-s3, amazon, file-exists

我正在运行`Coldfusion8`并将文件上传到 Amazon S3。

显示图像时，我想检查 S3 中是否有图像可用，如果没有则显示后备图像。我的问题是，不知道如何检查现有图像。

如果我列出图像的链接，它是这样的：

```
http://s3.amazonaws.com/bucket/l_138a.jpg?AWSAccessKeyId=_key_&Expires=_exp_&Signature=_signature_ 
```

我正在尝试检查这样的现有文件：

```
<cfif fileExists("http://s3.amazonaws.com/bucket/s_" & items.filename)>
    <cfdump output="e:\website\test\dump.txt" label="catch" var="found!!!">
</cfif> 
```

**问题：**检查图像时
我是否总是必须提供？`accesskey, expires and signature`如果我在浏览器中输入没有凭据的图像路径，则会加载图像，所以我不明白为什么我`fileExist`的不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:10:09.290

如果您设置了站点范围的页面未找到消息，则可以使用 cfhttp。

```
<cfhttp url="http://a.espncdn.com/photo/2012/0813/nfl_u_flynn1x_203.jpg" method="head">
<cfdump var="#cfhttp.filecontent#"> 
```

返回 java.io.ByteArrayOutputStream 的对象

```
<cfhttp url="http://a.espncdn.com/photo/20notanimage3.jpg" method="head">
<cfdump var="#cfhttp.filecontent#"> 
```

返回`<html> <body> <h1>Error Processing Request</h1> </body> </html>`

也可以查看服务器返回的状态码

```
<cfhttp url="http://a.file.exists.gif" method="head">
<cfdump var="#val(cfhttp.statuscode)#"> 
```

200没问题，404没找到，等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T23:15:02.217

我已经很长时间没有使用 Coldfusion，但是我快速查找了一下，fileExists 方法似乎是用于文件系统查找，而不是远程 URL。

还有其他用于请求 URL 的 Coldfusion 方法。我很快发现的一个关于这个主题的论坛讨论在这里：[http ://forums.adobe.com/thread/765614](http://forums.adobe.com/thread/765614)

但是，假设您正在生成供 Web 浏览器使用的 HTML，我建议您在 HTML/CSS/JS 而不是服务器端进行图像检查/回退。您可以使用 CSS 背景图像技巧来做到这一点，或者直接使用 JS 加载和检查图像。我发现处理这个问题的一个问题是here（关于这个东西可能有一堆类似的问题）：[Inputing a default image in case the src attribute of an html <img> is not valid?](https://stackoverflow.com/questions/980855/inputting-a-default-image-in-case-the-src-arribute-of-an-html-img-is-not-valid)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:10:44.310

我已经使用`getObjectInfo`S3.cfc 中的方法来查看对象是否存在：

```
<cffunction name="getObjectInfo" access="public" output="false" returntype="string"
            description="Creates a bucket.">
    <cfargument name="bucketName" type="string" required="yes">
    <cfargument name="filekey" type="string" required="true" hint="" />

    <cfset var data = "">
    <cfset var content = "">
    <cfset var contents = "">
    <cfset var thisContent = "">
    <cfset var allContents = "">
    <cfset var dateTimeString = GetHTTPTimeString(Now())>

    <!--- Create a canonical string to send --->
    <cfset var cs = "HEAD\n\n\n#dateTimeString#\n/#arguments.bucketName#/#Arguments.filekey#">

    <!--- Create a proper signature --->
    <cfset var signature = createSignature(cs)>

    <!--- get the bucket via REST --->
    <cfhttp method="HEAD" url="http://s3.amazonaws.com/#arguments.bucketName#/#Arguments.filekey#">
        <cfhttpparam type="header" name="Date" value="#dateTimeString#">
        <cfhttpparam type="header" name="Authorization" value="AWS #variables.accessKeyId#:#signature#">
    </cfhttp>

    <cfreturn cfhttp.StatusCode />
</cffunction> 
```

如果我得到一个`200`状态，那么我知道该对象存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-30T04:33:13.030

CF9 +

```
<cfscript>
    FileExists('s3://#accessKey#:#secretKey#@[your bucket]/[your file]');
</cfscript> 
```

# php - 从国家气象服务中抓取数据

> ID：11943420
> 
> 赞同：-5
> 
> 时间：2012-08-13T22:54:37.120
> 
> 标签：php

嗨，我想从下面的链接获取最新的天气数据，即第一行数据，我正在尝试抓取数据，但没有成功。任何人都可以帮忙，或者如果你知道任何更好的方法，请指出我的方向，谢谢！

[http://w1.weather.gov/obhistory/KIKV.html](http://w1.weather.gov/obhistory/KIKV.html)

* * *

这就是我所拥有的，

```
$data = file_get_contents('http://w1.weather.gov/obhistory/KIKV.html');

$regex = '/<td>(.+?) </td>/';

preg_match($regex,$data,$match);

var_dump($match);

echo $match[1]; 
```

我在 '/(.+?) /' 这一行得到一个错误，即“未知修饰符't'”？任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:27:07.317

尽管使用正则表达式解析 html 通常是一个非常糟糕的主意，但您收到的错误是由`/`字符引起的。您正在使用该字符作为模式的分隔符，因此您需要对其进行转义或使用其他字符：

```
$regex = '/<td>(.+?) <\/td>/'; 
```

或者

```
$regex = '#<td>(.+?) </td>#'; 
```

# iphone - iPhone SDK：从 Dropbox 下载 sqlite 文件后 TableView 不显示数据

> ID：11943421
> 
> 赞同：0
> 
> 时间：2012-08-13T22:54:37.733
> 
> 标签：iphone, sdk, dropbox

**背景**：我已经创建了一个 iPad 数据库（使用核心数据），现在我正在努力让这个数据库能够上传/下载到 DropBox。我遵循了 DropBox 网站上列出的所有步骤，我可以成功上传到 DropBox 并从 DropBox 下载。

**问题**：从 DropBox（称为“dataBase.sqlite”）下载文件后，我的应用程序不会更新以显示下载文件中的数据。但是，如果我通过双击 HOME 按钮关闭应用程序，然后重新启动应用程序，则所有数据现在都可以正确显示。

我想在下载完成后在我的 iPad 上更新/显示数据，而无需关闭并重新启动应用程序。任何建议将不胜感激。

试过：`[managedObjectContext reset];`

并尝试：

```
managedObjectContext=nil;
managedObjectModel=nil;
persistentStoreCoordinator=nil; 
```

我正在使用以下内容：XCode 4.4.1 Mountain Lion 10.8 DropBox SDK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:47:22.940

最后通过执行以下操作来完成此工作：

1.  从协调器和文件管理器中删除了 persistentStore（在文件下载之前）
2.  下载了新文件
3.  重新创建的 persistentStore
4.  提取结果

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:57:50.243

你可能已经尝试过这个，但是一旦你检测到一个新版本的数据库文件已经被下载，并且在你将它处理成你的核心数据结构之后，你还记得`[tableView reloadData]`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:03:12.227

你的问题让我很困惑。

您似乎是从包括数据绑定在内的 WPF 思维方式进行推理。重置您的数据源（它不是像 nsmanagedobject 这样的核心日期对象），而是在 table.datasource 中设置的对象

您似乎假设该表直接从 managedObjectContext 获取他的数据。要么这是我不知道的 iO 中的一个功能，要么你正在削减一个主要的角落。

您负责实现一个符合 UITableviewDatasource 的对象，该对象知道从哪里获取数据（您的 managedObjectContext 最有可能）并使 UITableView 可以使用它。

从 Dropbox 下载后，您至少需要向您的 UITableview 发送重新加载

```
[table reloadData]; 
```

您很可能还需要让您的数据源对象知道它需要“重新获取”数据。（可选地，这是一个实时连接，每次访问都会更新）。

# c# - XPath：从 C# 中的 XElement 中选择一个子元素

> ID：11943424
> 
> 赞同：0
> 
> 时间：2012-08-13T22:54:50.343
> 
> 标签：c#, linq, xpath

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
    <meta name="Generator"/>
  </head>
  <body>
    <h1>My head 1</h1>
  </body>
</html> 
```

以上是我的 XElement 对象的 .ToString `html`。看起来挺好的。

我正在尝试获取正文的 innerXml，但我的 XPath 返回 null。

```
XElement html = GettheHTMLAsXElementCorrectly()
var whyIsThisNull =  html.XPathSelectElement("/html/body"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:57:51.310

每当使用名称空间（在您的情况下`<html>`）时，您需要在搜索节点时定义名称空间：

**使用 LINQ to XML**
*（我认为更简单、更清洁的解决方案）*

```
// Create a XNamespace instance for the default namespace
XNamespace xhtml = "http://www.w3.org/1999/xhtml";

// Select the node using LINQ to XML
var bodyByLinq = doc.Element(xhtml + "html").Element(xhtml + "body"); 
```

**使用 XPath**

```
// Create a namespace manager
XmlNamespaceManager namespaceManager = new XmlNamespaceManager(new NameTable());

// Define your default namespace including a prefix to be used later in the XPath expression
namespaceManager.AddNamespace("xhtml", "http://www.w3.org/1999/xhtml");

// Select the node using XPath
var bodyByXPath = doc.XPathSelectElement("/xhtml:html/xhtml:body", namespaceManager); 
```

更新：改进了我的答案，因为提供的示例不正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:09:17.400

@zombiehunter 是正确的，所以我给了他信任。

我也尝试过这种方式，我只是告诉 XPath 是忽略名称空间。似乎也有效。

```
var notNullAnyMore =  html.XPathSelectElement("//*[local-name() = 'body']" ); 
```

# multithreading - JSF - CDI 再次实例化会话 bean

> ID：11943427
> 
> 赞同：0
> 
> 时间：2012-08-13T22:55:11.867
> 
> 标签：multithreading, jsf, ejb, cdi

源代码：

```
public class ReportGenerator implements Serializable {

    private static final long serialVersionUID = -3995091296520157208L;
    @Inject
    private ReportCacheSession reportCacheSession;
    @Inject
    private UserSessionBean userSessionBean;
    @Inject
    private Instance<ReportBuilder> reportBuilderInstance;

    public static final int BUILD_ERROR = 0;
    public static final int BUILD_OK = 1;
    public static final int BUILD_NOPAGES = 2;

    private ReportBuilder reportBuilder = null;

    private FileData build(String jasperName, Map<String, Object> params, String extension, boolean guardarCache, boolean inline) {
        FileData fd = null;

        reportBuilder = reportBuilderInstance.get();
        if (reportBuilder != null) {
            reportBuilder.jasperName = jasperName;
            reportBuilder.emailName = SevUtils.getEmailName(userSessionBean.getUserInfo().getEmail());
            reportBuilder.sessionId = JSFUtils.getSessionId();
            reportBuilder.params = params;
            reportBuilder.extension = extension;
            //reportBuilder.config(jasperName, SevUtils.getEmailName(userSessionBean.getUserInfo().getEmail()), JSFUtils.getSessionId(), params, extension);
            reportBuilder.start();

            try {
                reportBuilder.join();
            } catch (InterruptedException ex) {
                Logger.getLogger(ReportGenerator.class.getName()).log(Level.SEVERE, null, ex);
            }

            fd = reportBuilder.getFileData();
        }

        if (fd != null && fd.getState() == BUILD_OK) {
            fd.setInline(inline);

            if (guardarCache) {
                reportCacheSession.addReport(fd);
            }
        }

        return fd;
    }
} 
```

reportBuilder.start(); 是生成报告的新线程，问题是当行 reportCacheSession.addReport(fd); 被称为CDI每次创建一个新实例，但ReportCacheSession是一个会话bean，用javax.inject.Named和javax.enterprise.context.SessionScoped注解。

我不知道为什么会发生这种情况，但我的解决方案是添加一个新行，如下所示：

```
FileData fd = null;
reportCacheSession.toString(); //NEW LINE
reportBuilder = reportBuilderInstance.get(); 
```

reportCacheSession.toString(); 在调用我的线程之前创建 ReportCacheSession 的实例并且一切正常...

新线程对 CDI 有何影响？为什么 CDI 在我之前调用线程时创建了我的会话 bean 的新实例？

**2012 年 8 月 15 日更新：**

好的，我已更改我的代码以使用 EJB 注释 @Asynchronous，在这种情况下，当我生成大型 PDF 报告（XLS 报告工作没有问题）时，文件大小不完整（更少字节）和何时出现问题我尝试打开它，它显示为空白...可能是 JRExporter#exportReport 方法的问题/错误...

**最后更新：**

好的，报告生成是我的错误......问题是**哪种替代方案最好使用 EJB 异步或 JMS？**感谢所有人，每条评论都让我找到了一个好的解决方案......

# c# - 如何创建图像并将其保存以供以后在 XNA 中绘制为纹理？

> ID：11943429
> 
> 赞同：2
> 
> 时间：2012-08-13T22:55:27.787
> 
> 标签：c#, image, xna, geometry

在我的游戏中，我需要绘制一个由正方形组成的圆圈，其大小与游戏图块的大小相同（圆圈由正方形组成）。我可以每帧以锯齿形圆形的形式绘制单色方形纹理，但这会消耗大量资源。我想做的是在内存中的某个地方只绘制一次，然后保存以绘制每一帧。

我可以简单地自己画出圆形并将其用作准备好的纹理，但我的圆形并不总是相同的。它在整个游戏中都有不同的大小（实际上一半的时间不是一个圆圈，但我有说明在哪里绘制的算法），所以它必须以编程方式绘制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:00:44.673

首先，您将圆圈渲染为自定义`RenderTarget2D`. 您可以像这样设置自定义渲染目标：

```
GraphicsDevice.SetRenderTarget(renderTarget); 
```

将您的圆圈渲染到渲染目标后，将其转换为`Texture2D`这样的：

```
texture = (Texture2D)renderTarget; 
```

阅读更多：[http ://www.riemers.net/eng/Tutorials/XNA/Csharp/Series3/Render_to_texture.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series3/Render_to_texture.php)

# database - 当我尝试在 Rails 中定义“Campus”模型并自己设置复数名称时，表格似乎丢失了

> ID：11943432
> 
> 赞同：0
> 
> 时间：2012-08-13T22:55:41.187
> 
> 标签：database, ruby-on-rails-3

我需要一张名为 Campus 的表。但是 Rails 将其解释为复数形式，把一切都搞砸了。所以我做了[一些研究](https://github.com/rails/rails/issues/5198)，他们建议添加这样的变形：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.singular /^(campus)(es)?$/i, '\1'
  inflect.plural   /^(campus)$/i, '\1es'
end 
```

我已经在 initializers/inflection.rb 文件中添加了这个。我创建了一个新的迁移来删除表并再次创建一个名为 Campus 的新迁移，希望能够解决问题，但现在我无法在控制台中获取表 Campus：

```
$ rails console
Loading development environment (Rails 3.0.10)
1.9.2p290 :001 > Campus
 => Campus(Table doesn't exist) 
```

我究竟做错了什么？我该如何解决这个问题？谢谢你的帮助

我的校园模式是：

```
class Campus < ActiveRecord::Base

  validates_presence_of :name
  validates_presence_of :university_id

  has_many :pois, dependent: :destroy
  has_many :events, dependent: :destroy
  has_many :market_items, dependent: :destroy
  has_many :ads_points, dependent: :destroy
  belongs_to :university
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:25:14.097

`inflectors.rb`有一些标准代码，您可以根据自己的情况进行调整：

```
# inflect.plural /^(ox)$/i, '\1en'
# inflect.singular /^(ox)en/i, '\1'
# inflect.irregular 'person', 'people' 
```

所以对你来说应该是：

```
inflect.plural /^(campus)$/i, '\1es'
inflect.singular /^(campus)es/i, '\1' 
```

或者这可能更容易：

```
inflect.irregular 'campus', 'campuses' 
```

有了这些变形器，Rails 将寻找一个名为`campuses`. 由于您的表名是`campus`，因此您必须将以下内容添加到您的`Campus`模型中：

```
set_table_name 'campus' 
```

请务必在更改后重新启动服务器`inflectors.rb`。

# c++ - Qt 小部件项目中的 Ui 命名空间

> ID：11943433
> 
> 赞同：0
> 
> 时间：2012-08-13T22:55:42.670
> 
> 标签：c++, qt, namespaces

我有一个名为“SeasonCreator”的 Qt 小部件项目，我想知道 Qt 小部件项目的结构。

ui_seasoncreator.h 文件是隐藏的，但是当您查看它时，它定义了一个名为“Ui”的命名空间，其中声明了一个 SeasonCreator 类，该类继承自 Ui_SeasonCreator，即 c.

在 seasoncreator.h 文件中，还有一个名为“Ui”的命名空间，还有一个名为“SeasonCreator”的类的声明。当我单击找到它的原始声明时，它会将我带到 ui_seasoncreator.h 文件中的 Ui::SeasonCreator 声明。

**这些命名空间和类的目的是什么？这两个定义有关系吗？**

**这些 Ui::SeasonCreator 声明是否与 seasoncreator.h 中的自定义 SeasonCreator 类有关？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T02:19:14.817

> 这些命名空间和类的目的是什么？

ui_XXX.h 中的代码是您使用设计器创建表单时自动生成的代码。它被放入 Ui 命名空间。

> 这两个定义有关系吗？

我假设您指的是看起来像这样的东西：

```
namespace Ui { class SeasonCreator; } 
```

这是类的前向声明，它是生成代码的一部分，使您的类可以访问自定义表单中的小部件。

> 这些 Ui::SeasonCreator 声明是否与 seasoncreator.h 中的自定义 SeasonCreator 类有关？

它将您的自定义代码与生成的代码链接在一起。您可能应该有一个名为 的自定义类的成员变量`Ui::SeasonCreator *ui`，它是您用来访问生成的 Ui 类的对象。

# javascript - 基于下拉菜单值的 Javascript if 语句

> ID：11943436
> 
> 赞同：1
> 
> 时间：2012-08-13T22:55:57.437
> 
> 标签：javascript, html, forms, drop-down-menu, if-statement

我对js中的if语句有疑问。我做了一个声明，但它似乎不起作用。我想通过单击“按钮 1”来检查这些语句。该脚本是在我计算总数之前检查是否有任何运输费用。有人可以告诉我如何解决我的问题吗？

这是我的脚本：

```
<SCRIPT TYPE="text/javascript">
function berekeningen()
{

if (document.getElementById("DropdownMenu1").value = "Eeklo" && document.getElementById("Order_Subtotal").firstChild.data >= 20)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Adegem" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Kaprijke" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Lembeke" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Oosteeklo" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Sint-Laureins" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Ursel" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Waarschoot" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Zomergem" && document.getElementById("Order_Subtotal").firstChild.data >= 25)
  {
  document.getElementById("Transportation_Cost").value="0.00";
  }
else
  {
  document.getElementById("Transportation_Cost").value="3.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Knesselare")
  {
  document.getElementById("Transportation_Cost").value="5.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Lovendegem")
  {
  document.getElementById("Transportation_Cost").value="5.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Bassevelde")
  {
  document.getElementById("Transportation_Cost").value="5.00";
  }

if  (document.getElementById("DropdownMenu1").value = "Maldegem")
  {
  document.getElementById("Transportation_Cost").value="5.00";
  }
}
</SCRIPT> 
```

编辑：我用变量稍微改变了脚本，但它不起作用

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>

<SCRIPT TYPE="text/javascript">
function berekeningen()
{
   var plaats           = document.getElementById("plaats").value;
   var kosten           = document.getElementById("kosten").value;
   var subtotaal        = document.getElementById("Bestelling_subtotaal").firstChild.data
   var class_1_plaatsen = new Array("Eeklo");
   var class_2_plaatsen = new Array("Adegem", "Kaprijke", "Lembeke", "Oosteeklo",
                                    "Sint-Laureins", "Ursel", "Waarschoot", "Zomergem");
   var class_3_plaatsen = new Array("Knesselare", "Lovendegem", "Bassevelde", "Maldegem");

   if ($.inArray(plaats, class_1_plaatsen) >= 0) {

      // Berekening voor plaatsen in prijscategorie 1 hieronder.

   }
   else if ($.inArray(plaats, class_2_plaatsen) >= 0) {

      // Berekening voor plaatsen in prijscategorie 2 hieronder.

   }
   else {

      // Berekening voor overige plaatsen hieronder.

   }
}
</SCRIPT> 
```

我不想这样做：

> 当 var plaats = class_1_plaatsen 且 subtoal < 15 时，发出警报（我们使用 vanaf 最低 15 欧元）。但如果小计介于 15 和 20 之间，则 kosten = 3。但如果小计 >= 20，则 kosten = 0。
> 
> 当 var plaats = class_2_plaatsen 且 subtoal < 20 时，发出警报（我们使用 vanaf 最低 20 欧元）。但如果小计介于 20 和 25 之间，则 kosten = 3。但如果小计 >= 25，则 kosten = 0。
> 
> 当 var plaats = class_3_plaatsen 且 subtoal < 20 时，发出警报（我们使用 vanaf 最低 20 欧元）。但如果小计 >= 20，则 kosten = 5。

戴斯腾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:00:48.447

您的所有 if 语句不应该有两个 ==

```
if  (document.getElementById("DropdownMenu1").value == "Knesselare") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:01:17.557

通常，您不想在 if 语句中使用单个 = 符号；它评估为一个新的变量赋值。

而不是 = 使用 == 像这样：

```
if (document.getElementById("DropdownMenu1").value == "Eeklo" && document.getElementById("Order_Subtotal").firstChild.data >= 20) 
```

# linux - 管理 Shell 任务

> ID：11943437
> 
> 赞同：1
> 
> 时间：2012-08-13T22:56:06.757
> 
> 标签：linux, shell, task

我正在编写以下 shell 脚本：

```
perf stat taskset -c 0 runspec  & perf stat taskset -c 1 runspec 

perf stat taskset -c 0 runspec  & perf stat taskset -c 1 runspec 
```

如图所示，每一行由提交给两个不同 cpu 的两个任务组成。我想要一种方法来保证第二行“后两个任务”在前两个任务成功完成之前不会开始执行。有办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:23:19.563

您需要`wait`为后台进程的PID。

```
perf stat taskset -c 0 runspec &
pid=$!
perf stat taskset -c 1 runspec 
wait $pid

perf stat taskset -c 0 runspec &
pid=$!
perf stat taskset -c 1 runspec
wait $pid 
```

显然，通过一些额外的重构会更优雅。或许是这样的：

```
parallel () {
    local pid
    # Danger: unquoted interpolation
    $1 &
    pid=$!
    # Danger: unquoted interpolation
    $2
    wait $pid
}

prun () {
    perf stat taskset -c $1 runspec
}

parallel "prun 0" "prun 1"
parallel "prun 0" "prun 1" 
```

请注意，该`parallel`函数插入`$1`且`$2`没有双引号。对于这个玩具演示，这是无害的，但如果您最终需要传入带引号的字符串作为参数，您将需要一个更精细的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:03:54.593

您是否尝试在没有“&”字符的情况下运行它？通常，与号告诉 bash 在后台运行命令并继续执行下一个命令。如果没有与号，任务应该等到完成才能继续进行下一个。

迈克尔·G。

# wcf - Windows Phone 7 和 WCF 视频服务

> ID：11943439
> 
> 赞同：0
> 
> 时间：2012-08-13T22:56:09.003
> 
> 标签：wcf, silverlight, windows-phone-7

我正在尝试实现一项服务，该服务将允许用户从 Windows Phone 7 客户端（类似于 youtube）观看视频并将其上传到 WCF 服务。现在，我有了将视频文件 (.wmv) 发送到客户端的服务的基本实现，该客户端具有 Silverlight 框架的 MediaElement 实现（与同一类的 .NET 实现有一些差异）。现在，每当我尝试在客户端本地播放视频时，都会收到 SecurityException is unhandled 错误。当我尝试将服务调用封装在 try/catch 块中时，应用程序就挂在那里。这是代码：

服务器端：

```
 class TransferService: ITransferService
    {
        public FileStream DownloadFile(string filename)
        {
            //string FilePath = Path.Combine(@"c:\Uploads", filename);

            FileStream result = File.Open(@"C:\Uploads\test.wmv", FileMode.Open, FileAccess.Read, FileShare.Read);
            return result;
        }

        public void UploadFile(FileStream request)
        {
            //Not yet implemented
        }
    } 
```

服务器端（web.config）：

```
 <configuration>

    <system.web>
        <compilation debug="true" targetFramework="4.0" />
        <httpRuntime maxRequestLength="100240" />
    </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttp" allowCookies="true"
                 maxReceivedMessageSize="20000000"
                 maxBufferSize="20000000"
                 maxBufferPoolSize="20000000" transferMode="Buffered">
          <readerQuotas maxDepth="200000000"
                        maxArrayLength="200000000"
                        maxStringContentLength="200000000"
                        maxBytesPerRead="200000000"
                        maxNameTableCharCount="200000000"/>
        </binding>
      </basicHttpBinding>
    </bindings>

    <services>
      <service name="VideoService.TransferService" behaviorConfiguration="VideoServiceTypeBehaviors" >
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
        <endpoint contract="VideoService.ITransferService" binding="basicHttpBinding" address="basic" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/"/>
          </baseAddresses>
        </host>
      </service>
    </services>

        <behaviors>
          <serviceBehaviors>
            <behavior name="VideoServiceTypeBehaviors" >
              <serviceMetadata httpGetEnabled="true" />
            </behavior>
          </serviceBehaviors>
        </behaviors>

  </system.serviceModel>
</configuration> 
```

客户端：

```
 public partial class Page1 : PhoneApplicationPage
        {
            TransferServiceClient sc;
            public Page1()
            {
                InitializeComponent();
                sc = new TransferServiceClient();
                this.Loaded += new RoutedEventHandler(Page_Loaded);
            }
            void Page_Loaded(object sender, RoutedEventArgs e)
            {

                sc.DownloadFileCompleted += new EventHandler<DownloadFileCompletedEventArgs>(sc_DownloadFileCompleted); //I think the problem is here
                sc.DownloadFileAsync("test.wmv");
            }
void sc_DownloadFileCompleted(object sender, DownloadFileCompletedEventArgs e)
        {
            myMediaElement.SetSource(e.Result);
            myMediaElement.Play();
        } 
```

客户端（ServiceReference.clientconfig）：

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ITransferService" closeTimeout="00:02:00"
          openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:02:00"
          maxBufferSize="210005536" maxReceivedMessageSize="210005536"
          textEncoding="utf-8">
          <security mode="None" />
        </binding>
        <binding name="BasicHttpBinding_ITransferService1" maxBufferSize="2147483647"
          maxReceivedMessageSize="2147483647">
          <security mode="None" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:53163/TransferService.svc/basic"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ITransferService1"
        contract="TransferService.ITransferService" name="BasicHttpBinding_ITransferService" />
    </client>
  </system.serviceModel>
</configuration> 
```

任何帮助或见解将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:41:12.350

first i would try to use this code block correctly:

> sc.DownloadFileCompleted += new EventHandler(sc_DownloadFileCompleted); //I think the problem is here sc.DownloadFileAsync("test.wmv"); myMediaElement.Play();

you fire up an asynchronous download-process and you are attaching a "download complete"-callback to it... why do you call "myMediaElement.Play" synchronously AFTER the asynchronous invoke? at this time, the file isn't downloaded yet and maybe the mediaelement fires the exception, because the file is locked (because of the download).

you have to call "myMediaElement" in the "sc_DownloadFileCompleted"-Handler AFTER the asynchronous download process finished....

please check if this was the prob...

# javascript - 导入多个集合（nodejs、mongodb）

> ID：11943440
> 
> 赞同：4
> 
> 时间：2012-08-13T22:56:10.780
> 
> 标签：javascript, node.js, mongodb, express

我是 node.js 和 mongodb 的新手。在我的数据库中，我有几个集合（一个用于用户，一个用于文章，将来还有一个......）。

在我的 server.js 文件中，我希望能够写入这些集合中的每一个。这是我使用的代码，但我无法访问我所有的收藏......你有想法让这成为可能吗？

```
var databaseUrl = "mydb"; // "username:password@example.com/mydb"
var collections = ["users", "article", "reports", "archery"]
var db = require("mongojs").connect(databaseUrl, collections); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:27:28.177

您不必事先知道所有的集合才能使用`mongojs`，您可以动态访问一个集合`db.collection('name_of_collection')`，并像使用现有集合一样使用它。此调用还将缓存它，以便下次您可以说`db.name_of_collection`.

在他们的 git hub 页面上有很多例子： [https ://github.com/gett/mongojs](https://github.com/gett/mongojs)

祝你好运。

# jquery - 如何判断节点是在内存中还是在 dom 中？

> ID：11943441
> 
> 赞同：10
> 
> 时间：2012-08-13T22:56:12.577
> 
> 标签：jquery, dom

在将节点附加到主页的 DOM 之前，我对它们进行了很多工作；我需要根据给定节点是否包含在主文档中来执行一些工作。

我目前的方法是通过以下方式联系父母：

```
if this.el$.closest("body").length > 0 
```

有没有更合适的方法来做到这一点？（最好不需要遍历所有节点的祖先？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T23:31:10.813

您有几个选项以几种不同的速度执行。

```
var $document = $(document);
var $element = $("#jq-footer");
var exists;

// Test if the element is within a body
exists = $element.closest("body").length;

// Test if the document contains an element
// wrong syntax, use below instead --> exists = $.contains($document, $element);
exists = $.contains(document.documentElement, $element[0]);

// Test if the element is within a body
$($element).parents().is("body");

// Manually loop trough the elements
exists = elementExists($element[0]);

// Used for manual loop
function elementExists(element) {
    while (element) {
        if (element == document) {
            return true;
        }
        element = element.parentNode;
    }
    return false;
}​ 
```

见[**性能测试**](http://jsfiddle.net/FranWahl/4vaFw/1/)

对于这个测试，我复制了大量的 html 进行遍历，我将其中一个 jQuery 页面的源代码复制到一个小提琴中，去掉了所有的脚本标签，只留下了 body 和 html 之间的内容。

随意使用文档而不是“正文”，反之亦然或添加更多测试，但它应该给你一个大致的想法。

**编辑**

我更新了性能测试以使用正确的[**包含**](http://api.jquery.com/jQuery.contains/)语法，因为前一个是不正确的，并且即使元素不存在也总是返回 true。如果元素存在，则打击现在返回 true，但如果您指定不存在的选择器，它将返回 false。

```
exists = $.contains(document.documentElement, $element[0]); 
```

我还在问题的评论中添加了**MrOBrian**提到的建议替代方案，它再次比包含的速度略快。

好一个**MrOBrian**。

**编辑**

这是带有所有漂亮图表 的 jsPerf[**性能测试。**](http://jsperf.com/closest-vs-contains)

感谢**Felix Kling**发现问题并帮助我修复 jsPerf 测试。

从评论中添加了更多的测试结果，这个真的很好：
jsPerf性能测试：[**dom-tree-test-exists**](http://jsperf.com/dom-tree-test-exists)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-09-08T12:42:24.717

现代的香草答案是使用[`Node.isConnected`](https://developer.mozilla.org/en-US/docs/Web/API/Node/isConnected)：

```
let test = document.createElement('p');
console.log(test.isConnected); // Returns false
document.body.appendChild(test);
console.log(test.isConnected); // Returns true 
```

（直接取自 MDN 文档的示例）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T23:31:31.997

您可以为元素分配一个 ID，然后搜索它：

```
var id = element.id || generateRandomId(); // some function generating a random string
if(document.getElementById(id) !== null) {
    // element in tree
} 
```

这是一个[**性能比较**](http://jsperf.com/dom-tree-test)，包括 François 的建议，比较了附加和分离元素节点的每种方法。[以下是仅针对现有节点的测试用例](http://jsperf.com/dom-tree-test-exists)，以便更好地了解速度差异。

**测试结果：**

显然，使用 测试分离节点`while`更快，因为它几乎立即终止（在第二次迭代时）。但是如果节点有一个（可能）分离的祖先，那么为节点分配一个 ID 并寻找它似乎是 Chrome 21 中最快的方法。

有趣的是，在 Firefox 14 中，[`Node#contains` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/Node.contains)方法似乎比其他任何方法都快得多。

由于 Firefox 从 ID 查找到原生的速度提升`.contains`似乎高于 Chrome 中的性能损失，因此快速函数可能如下所示：

```
function in_tree(element) {
    if(!element || !element.parentNode) { // fail fast
        return false;
    }
    if(element.contains) {
        return document.body.contains(element);
    }
    var id = element.id || generateRandomId();
    element.id = id;
    return document.getElementById(id) !== null;
} 
```

但最终，浏览器之间总会存在差异，因此您必须做出妥协。

# c - 允许用户搜索已排序名称列表的 C 程序冻结

> ID：11943443
> 
> 赞同：0
> 
> 时间：2012-08-13T22:56:39.493
> 
> 标签：c

我正在尝试编写一个程序，该程序采用名称列表，对这些名称进行排序，并允许用户从该列表中搜索名称。程序可以编译，但是一旦用户输入“y”来搜索名称并输入了他想要搜索的名称，程序就会冻结。

我很感激任何帮助！

```
#include <stdio.h>
#include <stdbool.h>
#include <string.h>

#define NUM_OF_NAMES 8
#define NAME_SIZE 5

void printNames(char names[][NAME_SIZE], int size);
void bubbleSortNames(char names[][NAME_SIZE], int last);
bool binarySearchNames(char list[][NAME_SIZE], int end, char target[], int *location);

int main()
{
    char nameList[NUM_OF_NAMES][NAME_SIZE] = {"Bob", "Sue", "Jake","Rod", "Jon", "Ash", "Deb", "Kay"};
    char searchText[NAME_SIZE];
    char userChoice;
    int searchLocation;

    printf("\n\n\nLIST BEFORE SORTING\n");    
    printNames(nameList, NUM_OF_NAMES);
    bubbleSortNames(nameList, NUM_OF_NAMES);

    printf("\n\n\nLIST AFTER SORTING\n");
    printNames(nameList, NUM_OF_NAMES);

    printf("\n\n\nWould you like to search for a name? (y/n) ");
    scanf(" %s", &userChoice);

    while(userChoice == 'y')
    {
         printf("\n\n\nPlease try to search for a name: ");
         scanf("%s", searchText);

         if(!(binarySearchNames(nameList, NUM_OF_NAMES, searchText, &searchLocation)))
             printf("\n\n\nThe name %s was not found.\n", searchText); 
         else
             printf("\n\n\nThe name %s was found at location %d!", searchText, searchLocation);
    }

    printf("\n\n\nThank you for using this program.\n\n\n");

    return 0;
}

/********************************
Prints the names from the array.
********************************/
void printNames(char names[][NAME_SIZE], int size)
{
    int index;

    for(index = 0; index < size; index++)
        puts(names[index]); 

    return;
}

/*******************************
Sorts the names from the array.
*******************************/
void bubbleSortNames(char names[][NAME_SIZE], int last)
{
    char temp[NAME_SIZE];
    int current;
    int walker;

    for(current = 0; current < last; current++)
    {
        for(walker = last; walker > current; walker--)
        {
            if(strcmp(names[walker], names[walker - 1]) < 0)
            {
                strncpy(temp, names[walker - 1], sizeof(temp) - 1);
                strncpy(names[walker - 1], names[walker], sizeof(names[walker - 1]) -  1);
                strncpy(names[walker], temp, sizeof(names[walker]) - 1);
            }
        }
    }

    return;
}

/*********************************
Searches for names to be printed.
*********************************/
bool binarySearchNames(char list[][NAME_SIZE], int end, char target[], int* location)
{
    int first = 0,
        last,
        mid;

    last = end;   

    while(first <= last);
    {
        mid = (first + last) / 2;

        if(strcmp(target, list[mid]) > 0) 
            first = mid + 1;
        else if(strcmp(target, list[mid]) < 0)
            last = mid - 1;
        else
            first = last +  1;
    }

    *location = mid + 1;

    return (strcmp(target, list[mid]) == 0);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:06:49.630

在函数 binarySearchNames 中：

```
while(first <= last) you put a ; 
```

这会导致无限循环。

遇到此类问题时尝试使用调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:11:21.220

scanf("%s", &userChoice);

您是否尝试过删除 %s 之前的空格并将 %s 替换为 %c？两者都可能导致问题。

# c# - 在 C# 中连接到 Web 服务的问题

> ID：11943445
> 
> 赞同：1
> 
> 时间：2012-08-13T22:56:49.337
> 
> 标签：c#, wcf, web-services, wsdl

我正在使用第三方 wsdl 连接到服务。我已获得安全证书和用户名/密码。

我有：

*   在我的 Windows 7 机器上安装了证书
*   确保它具有正确的权限
*   将 API 的正确位置存储在 web.config 中

代码每次都失败。错误消息会发生变化，但它们包括：

*   身份验证失败，因为远程方已关闭传输流。
*   现有连接被远程主机强行关闭
*   无法创建 SSL/TLS 安全通道

这是我正在执行的代码：

```
ServicePointManager.Expect100Continue = true;
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3 | SecurityProtocolType.Tls;

//Third party client
var client = new ConnectionPortClient();

//Including these two lines or not does not affect the outcome
//client.ClientCredentials.UserName.UserName = "username";
//client.ClientCredentials.UserName.Password = "password";

client.ClientCredentials.ClientCertificate.Certificate = new X509Certificate2(@"C:\..\cert.p12", "password", X509KeyStorageFlags.MachineKeySet);

var results = client.getResults(""); 
```

这是 web.config 的相关部分：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="assessmentBinding" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="Certificate" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://endpoint/" binding="basicHttpBinding"
          bindingConfiguration="assessmentBinding" contract="API.Assessment"
          name="assessmentSOAP" />
    </client>
  </system.serviceModel> 
```

对这里发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:25:21.263

您使用[证书消息凭据类型，但您尝试为](http://msdn.microsoft.com/en-us/library/ms733098.aspx)[用户名消息凭据类型](http://msdn.microsoft.com/en-us/library/ms731058.aspx)设置用户名/密码- 这是错误的。[查看有关使用证书客户端的消息安全](http://msdn.microsoft.com/en-us/library/ms733098.aspx)性的文章

# email - 当窗口显示设置为中时，Outlook 显示更大的文本

> ID：11943448
> 
> 赞同：0
> 
> 时间：2012-08-13T22:57:18.950
> 
> 标签：email, outlook, newsletter

当 Windows 显示（控制面板 > 所有控制面板项目 > 显示）设置为中 - 125%（或更大）时，我遇到了 Outlook 问题

时事通讯中的文字显得更大，并且会产生间距问题。虽然大多数问题都可以解决，但我想知道是否有办法强制 Outlook 尊重 html 电子邮件中定义的像素大小。

这些行中有一个示例代码块

```
 ...
    <td width="460" valign="baseline">
            <p style="font-size:16px;margin-top:0;margin-bottom:0;margin-left:0;margin-right:0;" >Hello </p>
    </td>
    ... 
```

标记内的文本在`<p>`Windows 显示 100% 的机器上是 16 像素，但当 Windows 显示 125% 时更大（有趣的是，浏览器仍然尊重 16 像素并且不会像 Outlook 那样增加字体大小）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:00:11.463

我不认为你对这个问题采取了正确的方法。请以另一种方式看待它。

用户说“我希望我的文字更大”。他们可能会说，因为他们有非常高分辨率的显示或者他们有视觉障碍。如果不是他们的需要，这是他们的偏好，拥有更大的文本。

您是在说“我如何覆盖用户对我的美容方便的偏好？”。

不要那样做。修复您的布局设计，使其更好地适应不同的文本大小。

减少您的图像使用和/或放置您的图像，以便它们可以处理被文本推动的问题。Consdier 使用可缩放单位（如`em`字体大小或百分比字体大小）对有视觉障碍或高分辨率显示器的人更友好。

## 背景：

Windows 像这样缩放字体（和像素）的原因是因为该平台的软件开发人员一直忽略用户在资源管理器和主题中设置的字体大小。应用程序通常会强制使用具有特定像素大小的自己的字体，而不是使用系统字体和大小。

这导致许多应用程序无法用于有视觉障碍的人、媒体 PC 等。

微软希望为用户提供一种方法来覆盖这些行为不端的程序，因此他们为用户提供了一种方法，可以将应用程序提供的像素大小按固定百分比进行缩放。本质上，他们将字体“px”重新定义为可以缩放的抽象单位。

您的 HTML 电子邮件正试图成为那些行为不端的程序之一。

# sql-server - Powershell SQL Server 数据库还原（使用 CDC）

> ID：11943449
> 
> 赞同：1
> 
> 时间：2012-08-13T22:57:25.970
> 
> 标签：sql-server, powershell, database-restore

我正在尝试创建一个 Powershell 脚本来将数据库从我的桌面恢复到我的笔记本电脑。我有一个创建备份文件的脚本，除了我在启用 CDC 的数据库中遇到的一个奇怪错误之外，恢复脚本几乎可以正常工作。我最终得到的是一个离线单用户数据库。我必须将其重新联机并手动将其更改回多用户。这是我的PowerShell代码的相关位...

```
$instance = "(local)"
$server = New-Object Microsoft.SqlServer.Management.Smo.Server $instance

$restore = New-Object Microsoft.SqlServer.Management.Smo.Restore
$restore.Action = "Database"
$restore.Database = $dbname
$restore.NoRecovery = $false
$restore.ReplaceDatabase = $true
$restore.Devices.AddDevice($filename, "File")
$restore.SqlRestore($server) 
```

我收到一条错误消息说...

> *System.Data.SqlClient.SqlException：无法更新指示数据库 xxxxx 未启用更改数据捕获的元数据。执行命令 '[sys].[sp_MScdc_ddl_database triggers 'drop'' 时发生故障。返回的错误为 15517：'无法作为数据库主体执行，因为主体“dbo”不存在，无法模拟此类主体，或者您没有权限'*

再往下一点...

> *数据库已离线。请参阅 SQL Server 联机丛书中的主题 MSSQL_ENG003165。*

再向下 ...

> *正在将数据库“xxxxx”从版本 655 转换为当前版本 661。
> 数据库“xxxxx”正在运行从版本 655 到版本 660
> 的升级步骤。数据库“xxxxx”正在运行从版本 660 到 661 的升级步骤。*

虽然我可以让数据库恢复到可用状态，但理想情况下我希望它完全编写脚本。这样做的想法是，我可以在我的桌面上运行备份脚本，然后在我的笔记本电脑上运行恢复脚本，然后在我的笔记本电脑上恢复数据库，这样当我需要远程工作时，我就有了同一个数据库的工作副本.

如果有人遇到并解决了同样的问题，任何见解都会很棒，甚至更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:06:50.003

当我必须在恢复脚本中设置明确的 CDC 设置时，我做了类似的事情：

```
 $script_lines = $restore.script( $server )
    $script_lines += ', keep_cdc'
    $script = ''
    foreach ($line in $script_lines) {
            $script += $line
    }

    $script
    invoke-sqlcmd -ServerInstance $server.name -Query $script -QueryTimeout 65535 
```

# c# - 如何将我的列表绑定到 WPF 中的组合框

> ID：11943450
> 
> 赞同：0
> 
> 时间：2012-08-13T22:57:27.503
> 
> 标签：c#, wpf, datacontext

我想用 WPF 中的列表填充组合框内容。我可以在winform中正常执行，但wpf看起来有点不同..

我不在 XAML 中创建任何代码。整个控件在运行时动态创建..

所以这是我的代码

cmbKriterKategori 是一个组合框。

```
 cmbKriterKategori.DisplayMemberPath = "Value";
                cmbKriterKategori.SelectedValuePath = "Key";
                cmbKriterKategori.ItemsSource = yHelper.GetCriterList().ToList(); 
```

发生错误

> 在使用 ItemsSource 之前，项目集合必须为空。

我也试过这样

```
 cmbKriterKategori.DisplayMemberPath = "Value";
                cmbKriterKategori.SelectedValuePath = "Key";
                cmbKriterKategori.DataContext = yHelper.GetCriterList().ToList(); 
```

它没有出现任何错误，但组合框没有任何项目..

yHelper.GetCriterList().ToList(); 此函数返回 List> 并且 yHelper.GetCriterList() 返回 Dictionary

我在winform中使用了该代码，它可以工作..

```
 cmbKriterKategori.DisplayMember = "Value";
                cmbKriterKategori.ValueMember ="Key";
                cmbKriterKategori.DataSource = yhelper.GetCriterList().ToList(); 
```

那么，问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:05:07.440

你必须清除你的组合项目，这样`Items collection must be empty before using ItemsSource`就不会抛出异常

```
 cmbKriterKategori.Items.Clear();
        cmbKriterKategori.DisplayMemberPath = "Value";
        cmbKriterKategori.SelectedValuePath = "Key";
        cmbKriterKategori.ItemsSource = yHelper.GetCriterList().ToList(); 
```

# c - 正确使用头文件？

> ID：11943457
> 
> 赞同：0
> 
> 时间：2012-08-13T22:58:04.413
> 
> 标签：c, file, header

最近我一直在使用头文件将我的程序分成单独的文件（C 文件包含函数和声明它们的头文件）。一切正常，但由于某种原因，我需要在每个 C 文件中包含`<stdio.h>`和`<stdlib.h>`...否则我的项目无法编译。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:06:42.113

C 模块需要知道某些东西是如何定义的，或者它可以在哪里找到定义。如果定义在头文件中，那么您应该将它包含在使用它的模块中。这是有关头文件的信息的[链接。](http://gcc.gnu.org/onlinedocs/cpp/Header-Files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:05:19.507

答案将取决于该函数是否可能依赖于其他 .c/.h 文件中的其他声明函数。

例如：

`filea.c`：

```
#include "filea.h";

    methodA()
    {
        methodB();
    } 
```

`fileb.c`：

```
#include <somelibrary.h>
#include "fileb.h"

    methodB();
    {
        somelibrarycode();
    } 
```

`filea.c`除非包含头文件，否则不会编译，`fileb.h`因为它有一些未解析的外部依赖项。

如果这不是您所描述的，那么就会发生其他一些意大利面化，或者您不小心静态类型化了函数，防止它们在`.c`文件之外被看到。

这个问题的一种可能的解决方案是使用一个`shared.h`包含所有其他包含的单一文件，但我个人不建议这样做，因为这只是掩盖了问题，而不是很容易地明确哪些文件依赖于什么并建立明确的依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T13:18:15.027

它们必须以*某种*方式包含在内。

一些项目需要在 .c 文件中包含很长的列表，可能需要强制排序，甚至强制假设没有标题包含任何其他标题。

有些允许假设一些包含一些标题。

有些使用集合标题（包括小标题列表）并用这些替换长列表。

有些更进一步，使用编译器的“强制标头”选项，因此 include 不会出现在任何地方，并声明要隐式假定的内容。它可以在项目或整个代码库级别上进行，也可以组合在一起。它与预编译的头文件配合得很好。

（还有更多的策略，你明白了，都有一些优点和缺点。）

# html - html标签内的xsl

> ID：11943464
> 
> 赞同：0
> 
> 时间：2012-08-13T22:58:37.230
> 
> 标签：html, xslt, tags

我有一个这样的 XML：

```
<dataroot>
<element>
<color>#FF0FFF</color>
</element>
<element>
<color>#FF0000</color>
</element>
</dataroot> 
```

我需要把这个标签放在html上：

```
<xsl:for-each select="dataroot/element">
<tr style="background-color:{.};"> <xsl:value-of select="color" />
</tr>
</xsl:for-each> 
```

但它不起作用。我也尝试将它用作属性，但它不起作用。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:11:29.067

```
<xsl:for-each select="dataroot/element"> 
    <tr style="background-color:{color};"></tr>
</xsl:for-each> 
```

# linux - uuencode 无法正常使用以下命令附加文件

> ID：11943467
> 
> 赞同：0
> 
> 时间：2012-08-13T22:59:10.710
> 
> 标签：linux, bash, shell, unix, sunos

我正在`attach one file`尝试`echo messages`使用`mailx and uuencode`. 我有以下命令，已将它们添加在一起，uuencode 无法正常工作，但我在电子邮件中正确收到了回显消息。

我怎样才能让 uuencode 在这里工作？我想在将 uuencode 与 mailx 结合时，我在这里做错了什么？

```
(uuencode /tmp/chart.html percentage_graph.html) | mailx -s "LIP Data Quality Report for $DATE_YEST_FORMAT1" -r rj@host.com rj@host.com <<EOF
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`

Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`

Error Percentage: $QUERY2
EOF 
```

但是出于测试目的，如果我发出以下命令以查看我是否在附件中获得任何 html 文件，那么我会正确收到一封带有附件的电子邮件。

```
(uuencode /tmp/chart.html percentage_graph.html) | mailx -s "LIP Data Quality Report for $DATE_YEST_FORMAT1" -r rj@host.com rj@host.com 
```

那么当我将它们组合在一起时，我的第一个命令有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:50:58.690

该`mailx`命令可以从管道（uuencode）或heredoc（<< EOF）获取其输入。但不是两者兼而有之。

这可能对您有用：

```
$ mailx -s "LIP Data Quality Report for $DATE_YEST_FORMAT1" -r rj@example.com rj@example.com <<EOF
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`

Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`

Error Percentage: $QUERY2

$(uuencode /tmp/chart.html percentage_graph.html)

EOF 
```

[或者，考虑使用mutt](http://www.mutt.org/)之类的东西，它可以让您将文件与邮件正文分开附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:52:54.790

如果你给它一个输入文件名，uuencode 不会读取标准输入，就像你在这里所做的那样。那是因为它对单个文件进行编码。如果要对两个文件进行编码，则需要先以某种方式将它们组合在一起。`cat`如果可以连接它们，您可以使用：

```
cat /tmp/chart.html - | uuencode percentage_graph.html | mailx .... << EOF
..stuff to append to chart.html
EOF 
```

# heroku - Heroku 没有使用指定的 Ruby 1.9.3

> ID：11943470
> 
> 赞同：2
> 
> 时间：2012-08-13T22:59:24.630
> 
> 标签：heroku, mongoid, ruby-1.9.3, mongoid3

升级到 Mongoid 3 和 Ruby 1.9.3。尝试在 Heroku Cedar Stack 上使用 Ruby 1.9.3。我在 Gemfile 的顶部添加了以下内容：

```
source 'http://rubygems.org'
ruby "1.9.3" 
```

推送到 Heroku，它似乎正在工作

> -----> Heroku 接收推送
> -----> 检测到 Ruby/Rails 应用程序
> -----> 使用 Ruby 版本：ruby-1.9.3
> -----> 使用 Bundler 版本 1.2.0 安装依赖项。 rc.2

但是我的应用程序正在中断，因为它需要 Ruby 1.9.3。错误如下：

> TypeError：无法将数组
> 从 /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:214:in initialize 转换为字符串`getaddrinfo'
> from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:214:in`

[按照这里](https://devcenter.heroku.com/articles/ruby-versions)的建议，我的路径开头有 bin

> PATH => bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin

知道有什么问题吗？

**更新：**

Mongoid.yml

```
development: 
  sessions: 
    default: 
      database: myapp_development
      hosts: 
        - "localhost:27017"
      max_retries_on_connection_failure: 3
production: 
  sessions: 
    default: 
      database: "<%= ENV['MONGOHQ_DATABASE'] %>"
      hosts: 
        - 
          - "<%= ENV['MONGOHQ_URL1'] %>:<%= ENV['MONGOHQ_PORT'] %>"
        - 
          - "<%= ENV['MONGOHQ_URL2'] %>:<%= ENV['MONGOHQ_PORT'] %>"
      max_retries_on_connection_failure: 10
      password: "<%= ENV['MONGOHQ_PASSWORD'] %>"
      read: !ruby/symbol secondary
      username: "<%= ENV['MONGOHQ_USERNAME'] %>" 
```

Heroku 推送输出：

```
-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.2.0.rc.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from http://rubygems.org/......
       Fetching gem metadata from http://rubygems.org/..
       Fetching https://github.com/dementrock/sunspot_mongoid.git
       Using rake (0.9.2.2)
       Using log4r (1.1.10)
       Using XMLCanonicalizer (1.0.1)
       Using multi_json (1.0.4)
       Using activesupport (3.1.3)
       Using builder (3.0.0)
       Using i18n (0.6.0)
       Using activemodel (3.1.3)
       Using erubis (2.7.0)
       Using rack (1.3.5)
       Using rack-cache (1.2)
       Using rack-mount (0.8.3)
       Using rack-test (0.6.1)
       Using hike (1.2.1)
       Using tilt (1.3.3)
       Using sprockets (2.0.4)
       Using actionpack (3.1.3)
       Installing mime-types (1.19)
       Using polyglot (0.3.3)
       Using treetop (1.4.10)
       Using mail (2.3.3)
       Using actionmailer (3.1.3)
       Using arel (2.2.3)
       Using tzinfo (0.3.33)
       Using activerecord (3.1.3)
       Using activeresource (3.1.3)
       Using addressable (2.2.8)
       Installing excon (0.15.5)
       Using formatador (0.2.3)
       Using net-ssh (2.5.2)
       Using net-scp (1.0.4)
       Installing nokogiri (1.5.5) with native extensions
       Using ruby-hmac (0.4.0)
       Installing fog (1.5.0)
       Installing asset_sync (0.4.2)
       Installing bson (1.6.4)
       Installing bson_ext (1.6.4) with native extensions
       Using carmen (0.2.7)
       Using carrierwave (0.5.8)
       Installing moped (1.2.0)
       Installing origin (1.0.6)
       Installing mongoid (3.0.4)
       Installing carrierwave-mongoid (0.1.0)
       Installing clockwork (0.4.1)
       Using coffee-script-source (1.3.3)
       Using execjs (1.4.0)
       Using coffee-script (2.2.0)
       Using rack-ssl (1.3.2)
       Installing json (1.7.4) with native extensions
       Using rdoc (3.12)
       Using thor (0.14.6)
       Using railties (3.1.3)
       Using coffee-rails (3.1.1)
       Installing daemons (1.1.9)
       Using delayed_job (3.0.3)
       Using delayed_job_active_record (0.3.2)
       Using eventmachine (0.12.10)
       Using exceptional (2.0.32)
       Using multipart-post (1.1.5)
       Using faraday (0.7.6)
       Using fastercsv (1.5.5)
       Using haml (3.1.6)
       Using jquery-rails (1.0.19)
       Using kaminari (0.13.0)
       Installing systemu (2.5.2)
       Installing macaddr (1.6.1)
       Using net-http-digest_auth (1.2.1)
       Using net-http-persistent (1.9)
       Using webrobots (0.0.13)
       Using mechanize (2.0.1)
       Installing mongo (1.6.4)
       Using mongoid_spacial (0.2.16)
       Using multi_xml (0.4.4)
       Using mysql2 (0.3.11)
       Using net-ldap (0.2.2)
       Installing newrelic_moped (0.0.3)
       Installing newrelic_rpm (3.4.1)
       Using oa-core (0.3.0)
       Using rest-client (1.6.7)
       Using oa-basic (0.3.0)
       Using pyu-ruby-sasl (0.0.3.3)
       Using rubyntlm (0.1.1)
       Using uuid (2.3.5)
       Using oa-enterprise (0.3.0)
       Using oa-more (0.3.0)
       Using oauth (0.4.6)
       Using oauth2 (0.5.2)
       Using oa-oauth (0.3.0)
       Installing ruby-openid (2.2.0)
       Using rack-openid (1.3.1)
       Using ruby-openid-apps-discovery (1.2.0)
       Using oa-openid (0.3.0)
       Using omniauth (0.3.0)
       Installing pg (0.14.0) with native extensions
       Using pr_geohash (1.0.0)
       Using bundler (1.2.0.rc.2)
       Using rails (3.1.3)
       Using recaptcha (0.3.4)
       Using rmagick (2.13.1)
       Using rpm_contrib (2.1.11)
       Using rsolr (1.0.8)
       Using ruby-prof (0.11.2)
       Installing sass (3.2.0)
       Using sass-rails (3.1.4)
       Using sitemap_generator (2.1.8)
       Installing sunspot (1.3.3)
       Installing sunspot_rails (1.3.3)
       Using sunspot_mongoid (0.4.1) from https://github.com/dementrock/sunspot_mongoid.git (at master)
       Installing thin (1.4.1) with native extensions
       Using typhoeus (0.3.3)
       Using uglifier (1.2.4)
       Using validatable (1.6.7)
       Your bundle is complete! It was installed into ./vendor/bundle
       Post-install message from newrelic_rpm:
       PLEASE NOTE:
       Developer Mode is now a Rack middleware.
       Developer Mode is no longer available in Rails 2.1 and earlier.
       However, starting in version 2.12 you can use Developer Mode in any
       Rack based framework, in addition to Rails.  To install developer mode
       in a non-Rails application, just add NewRelic::Rack::DeveloperMode to
       your middleware stack.
       If you are using JRuby, we recommend using at least version 1.4 or
       later because of issues with the implementation of the timeout library.
       Refer to the README.md file for more information.
       Please see http://github.com/newrelic/rpm/blob/master/CHANGELOG
       for a complete description of the features and enhancements available
       in version 3.4 of the Ruby Agent.

       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Detected manifest.yml, assuming assets were compiled locally
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> clock, web, worker
       Default types for Ruby/Rails -> console, rake
-----> Compiled slug size is 36.3MB
-----> Launching... done, v318
-----> Deploy hooks scheduled, check output in your logs
       http://myapp.herokuapp.com deployed to Heroku 
```

服务器日志：

> /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:214:in `getaddrinfo' /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:214:in` 初始化'/app/vendor/bundle/ruby/1.9.1/gems/moped -1.2.0/lib/moped/cluster.rb:53:in `new' /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/cluster.rb:53:in` 块初始化'/app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/cluster.rb:53 ：在 `map' /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/cluster.rb:53:in` 初始化'/app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/session.rb:183 :在初始化`new' /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/session.rb:183:in` '/app/vendor/bundle/ruby/1.9.1 /gems/mongoid-3.0.4/lib/mongoid/sessions/factory.rb:64:in `new' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/sessions/factory.rb:64:in` create_session' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/sessions /factory.rb:43:in `default' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/sessions.rb:109:in` default' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/sessions.rb:378:in `__session__' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/sessions.rb:213:in` mongo_session' /app/vendor/bundle /ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/sessions.rb： 157：在`collection' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/contextual/mongo.rb:217:in` 初始化'/app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/contextual.rb:47:in `new' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/contextual.rb:47:in` create_context'/app/vendor/bundle/ruby/1.9.1/gems /mongoid-3.0.4/lib/mongoid/contextual.rb:30:in `context' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/contextual.rb:18:in` distinct' /app/app/controllers/my_controller.rb:14:in `index' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/implicit_render.rb:4:in` send_action' /app/vendor/bundle/ruby/1.9.1/gems /actionpack-3.2.3/lib/abstract_controller/base.rb:167:in `process_action' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rendering.rb:10:in` process_action' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:18 :in `block in process_action' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:436:in` *run* _647889395514353966__process_action_ *2178726499830545563* _callbacks' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in` _run_process_action_callbacks' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:17:in`process_action' /app/vendor/bundle/ruby/1.9.1/gems /actionpack-3.2.3/lib/action_controller/metal/rescue.rb:29:in `process_action' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:30:in` block in process_action' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications .rb:123:in `block in instrument' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in` instrument' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:29:in` process_action' /app/vendor/bundle/ruby /1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:205:in `process_action' /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/railties/controller_runtime.rb:18:in` process_action' /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.4.1/lib /new_relic/agent/instrumentation/rails3/action_controller.rb:34:in `block in process_action' /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.4.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:262:in` 块在 perform_action_with_newrelic_trace' /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.4.1/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped' /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.4.1/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:257:in` perform_action_with_newrelic_trace' /app/vendor/bundle/ruby/1.9 .1/gems/newrelic_rpm-3.4.1/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:33:in `process_action' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in` process' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3 /lib/abstract_controller/rendering.rb:45:in `process' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:203:in` dispatch' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:246:in` 块动作'/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in` dispatch'/app/vendor/bundle/ruby/1.9.1 /gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:36:in `call' /app/vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in` 阻止通话' /app/vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each' /app/vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in` call' /app/vendor/bundle/ruby/1.9.1 /gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:600:in `call' /app/vendor/bundle/ruby/1.9.1/gems/omniauth-1.0.3/lib/omniauth/strategy.rb:168:in` call！/app/vendor/bundle/ruby/1.9.1/gems/omniauth-1.0.3/lib/omniauth/strategy.rb:148:in `call' /app/vendor/bundle/ruby/1.9.1/gems/omniauth-1.0.3/lib/omniauth/builder.rb:42:in` call' /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm -3.4.1/lib/new_relic/rack/browser_monitoring.rb:12:in `call' /app/vendor/bundle/ruby/1.9.1/gems/exceptional-2.0.32/lib/exceptional/integration/rack_rails.rb:13:in` call' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/rack/mongoid/middleware/identity_map .rb:33:in `block in call' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/unit_of_work.rb:39:in` unit_of_work' /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/rack/mongoid/middleware/identity_map.rb:33:in `call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/best_standards_support.rb:17:in` call' /app/vendor /bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in` 调用'/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/head.rb:14:in `call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/params_parser.rb:21:in` call'/app/vendor/bundle/ruby/1.9.1 /gems/actionpack-3.2.3/lib/action_dispatch/middleware/flash.rb:242:in `call' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in` context' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session /abstract/id.rb:200:in `call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/cookies.rb:338:in` call' /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/query_cache.rb:64:in `call' /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in` call' /app/vendor /bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in` *run* _2458689492548881573_ *call* _1062142932397414625__callbacks' /app/vendor/bundle/ruby/1.9.1/gems/ activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in` _run_call_callbacks' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:27:in` call' /app/vendor/bundle/ruby/1.9.1/gems /rack-1.4.1/lib/rack/sendfile.rb:102:in `call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/remote_ip.rb:31:in` call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/debug_exceptions.rb :16:in `call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/show_exceptions.rb:56:in` call' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:26:in `call_app' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:16:in` call' /app/vendor/bundle/ruby /1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/request_id.rb:22:in `call' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in` call' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib /rack/runtime.rb:17:in `call' /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/cache/strategy/local_cache.rb:72:in` call' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call' /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/static.rb:62:in` 调用'/app/vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward' /app/vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in` fetch'/app/vendor/bundle/ruby/1.9.1 /gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup' /app/vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in` call！/app/vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:479:in` call' /app/vendor/bundle/ruby/1.9.1/gems /railties-3.2.3/lib/rails/application.rb:220:in `call' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in` method_missing' /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.4.1/lib/new_relic/rack/developer_mode.rb :24:in `call' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in` call' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/log_tailer.rb:14:in `call' /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in` block in pre_process' /app/vendor/bundle /ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch' /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in` pre_process' /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process' /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in` receive_data' /app/vendor/bundle/ruby/1.9.1/gems /eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine' /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in` run' /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63 :in `start' /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in` start' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run' /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:265:in` start' /app/vendor/bundle/ruby/1.9 .1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in` 块在' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/ rails/commands.rb:50:in `tap' /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in` ' 脚本/rails:6:in `require' script/rails:6:in` '

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:52:01.630

尝试将其推送到新的 heroku 应用程序运行：

```
heroku create 
```

然后推。如果您安装了一组非常特定的 gem，则将应用程序从一个 ruby​​ 版本移动到另一个版本时会出现问题。让我知道这是否有效。

# mysql - mysql中有哪些不同类型的关系

> ID：11943471
> 
> 赞同：0
> 
> 时间：2012-08-13T22:59:28.267
> 
> 标签：mysql

好的，我知道一对一 - 一对多 - 多对多。

我的问题是你能有一对一的可选和强制关系吗？你能有一对多可选的和许多关系。

哪里是我了解 mysql 中不同类型关系的最佳资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:00:17.460

我认为在这种情况下，当可选可以为空时，在表上创建连接是更好的做法。连接表将引用下拉选项，另一列将代表客户。而不是存储空值。我认为实际上存储 null 违背了参照完整性。

# php - 在单元测试中模拟正在测试的对象是不是很糟糕？

> ID：11943473
> 
> 赞同：4
> 
> 时间：2012-08-13T22:59:37.113
> 
> 标签：php, unit-testing, phpunit

这是我正在单元测试的课程。目前我正在测试该`doSomething`功能：

```
class FooClass {
  public function doSomething( $user ) {
    $conn = $this->getUniqueConnection( $user->id );
    $conn->doSomethingDestructive();
  }

  private function getUniqueConnection( $id ) {
    return new UniqueConnection( $id );
  }
} 
```

如您所见，该函数根据它接收到的参数的属性获取（我不在此处测试的类）`doSomething`的新实例。`UniqueConnection`问题是该`UniqueConnection:: doSomethingDestructive`方法是我在测试期间无法调用的东西，因为它...具有破坏性。所以我想存根/模拟`UniqueConnection`而不是使用真实的。

我看不到任何方法可以注入我的 mocked `UniqueConnection`。我会`UniqueConnection`为构造函数创建一个参数，`FooClass`但是，正如您所看到的，一个新的参数是基于`doSomething`函数的参数创建的，并且它可能被调用的所有唯一 ID 都是提前不知道的。

我能看到的唯一选择是测试一个模拟`FooClass`而不是`FooClass`它本身。然后我将用`getUniqueConnection`返回模拟/存根的函数替换该函数。测试模拟似乎很糟糕，但我看不出有任何方法可以实现我所追求的目标。 `UniqueConnection`是第三方供应商库，无法修改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T23:47:28.693

你可以创建一个`UniqueConnectionFactory`, 并将它的一个实例传递给 FooClass。然后你有

```
 private function getUniqueConnection( $id ) {
    return $this->uniqueConnectionFactory->create( $id );
  } 
```

一般来说，这是使用工厂的好处之一——您将`new`操作员排除在类之外，这使您可以更轻松地改变正在创建的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:46:36.287

在您可以按照 rambo coder 的建议花时间重构代码以使用工厂之前，您可以使用部分模拟来返回非破坏性的唯一连接。当你发现自己处于这个位置时，通常意味着被测试的班级有不止一项责任。

```
function testSomething() {
    $mockConn = $this->getMock('UniqueConnection');
    $mockConn->expects($this->once())
             ->method('doSomethingDestructive')
             ->will(...);
    $mockFoo = $this->getMock('FooClass', array('getUniqueConnection'));
    $mockFoo->expects($this->once())
            ->method('getUniqueConnection')
            ->will($this->returnValue($mockConn));
    $mockFoo->doSomething();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T08:51:54.167

就像 Rambo Coder 所说的那样，这是在课堂上做太多事情的问题。我不会想创建一个工厂，特别是如果您只创建**一个**特定类的实例。最简单的解决方案是颠倒创建 UniqueConnection 的职责：

```
<?php
class FooClass {
  public function doSomething( UniqueConnection $connection ) {
    $connection->doSomethingDestructive( );
  }
} 
```

在测试时传递一个模拟，`new UniqueConnection( $user->id )`在真实代码中传递一个..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T23:54:45.460

在某些情况下，以支持不同执行模式的方式创建类非常重要。其中一种情况就是您所要求的。

创建您的类以支持各种模式。例如

```
Class Connection {
    private $mode;

    public function setMode($mode) {
         $this -> $mode = $mode;
    }
} 
```

现在，您`doSomethingDestructive`可以按照*执行模式*进行操作。

```
public function doSomethingDestructive() {
    if($this -> mode === "test") { //if we are in a test mode scenario
        //Log something
        // Or just do some logging and give a message
    } else {
        // do what it was suppose to do
    }
} 
```

下次，当您测试该类时，您不必担心破坏性函数会意外破坏。

```
 public function doSomething( $user ) {
    $conn = $this->getUniqueConnection( $user->id );
    $conn -> setMode("test"); //Now we are safe
    $conn->doSomethingDestructive(); //But the Testing is still being Ran
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T00:02:23.317

在这种情况下，您想要的不是模拟对象，而是测试子类。将您`$conn->doSomethingDestructive();`分解为一个方法，然后将其子类`FooClass`化`TestFooClass`并覆盖子类中的新方法。然后，您可以使用子类进行测试，而不会出现不需要的破坏性行为。

例如：

```
class FooClass {
  public function doSomething( $user ) {
    $conn = $this->getUniqueConnection( $user->id );
    $this->connDoSomethingDestructive($conn);
  }

  protected function connDoSomethingDestructive($conn) {
    $conn->doSomethingDestructive();
  }

  private function getUniqueConnection( $id ) {
    return new UniqueConnection( $id );
  }
}

class TestFooClass extends FooClass {
  protected function connDoSomethingDestructive() {

  }

  private function getUniqueConnection( $id ) {
    return new MockUniqueConnection( $id );
  }
} 
```

# javascript - jQuery 事件监听器

> ID：11943478
> 
> 赞同：0
> 
> 时间：2012-08-13T23:00:09.463
> 
> 标签：javascript, jquery, events

有没有办法使用 jQuery 添加事件侦听器，很像 AS 3.0 中可用的事件侦听器？

例如，如果你加载一个图像，（将它的不透明度设置为零，这样它就不会出现在屏幕上）jQuery 是否有类似于 onComplete 事件监听器来监听加载完成的时间？加载成功后，您可以启动另一个函数以将其不透明度再次淡化回 1。

我看过一些已编写的插件，但我想我会问一个问题，看看是否有人在不使用 3rd 方插件的情况下找到了解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:07:44.017

像这样的东西？

```
$(function(){
    $("img").hide().load(function(){
        $(this).fadeIn();   
    });
}); 
```

第一行是简写`$(document).ready(function(){`

然后我们简单地选择所有`img`元素，隐藏它们并为它们添加一个`load`处理程序，使它们淡入。

虽然，如果缓存上述内容可能会很麻烦。下面将解决这个问题。

```
$(function(){
    $("img").hide().each(function(){
        if(!$(this).width()){ // image dimensions are unavailable if it's not loaded
            $(this).load(function(){
                $(this).fadeIn();
            }); 
        }else{ //if the image is loaded already
            $(this).fadeIn();   
        }
    }); 
}); 
```

# php - 从 sql 表创建 HTML 表

> ID：11943479
> 
> 赞同：13
> 
> 时间：2012-08-13T23:00:10.240
> 
> 标签：php, html, sql, html-table

我在 SQL 数据库中有一个表，其中包含以下字段：ID、姓名、电子邮件、大学、语言和经验。我想创建一个从 SQL 中获取数据并输出最后 10 个结果的 html 表？我该怎么做？

如果这是一个非常简单的问题，我很抱歉，我对 PHP 和 SQL 知之甚少。

这是我现在拥有的代码，它只显示名称而不是在表格中：

```
 <html>
    <head>
        <title>Last 5 Results</title>
    </head>
    <body>
        <?php
            $connect = mysql_connect("localhost","root", "root");
            if (!$connect) {
                die(mysql_error());
            }
            mysql_select_db("apploymentdevs");
            $results = mysql_query("SELECT * FROM demo");
            while($row = mysql_fetch_array($results)) {

                echo $row['Name'] . "</br>";

            ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T23:07:28.523

这应该可以帮助您创建表并获得更多关于[php](http://php.net/)和[mysql](http://dev.mysql.com/doc/refman/5.0/es/select.html)的知识。

此外，您应该将连接逻辑和查询移到进程的开头，从而避免在加载页面时出现错误并显示比 mysql_error 更准确的错误。

编辑：如果您的 ids 正在增加，那么您可以添加 ORDER BY 子句，
将：更改`SELECT * FROM demo LIMIT 10` 为：`SELECT * FROM demo LIMIT 10 ORDER BY id`

```
<html>
    <head>
        <title>Last 10 Results</title>
    </head>
    <body>
        <table>
        <thead>
            <tr>
                <td>Id</td>
                <td>Name</td>
            </tr>
        </thead>
        <tbody>
        <?php
            $connect = mysql_connect("localhost","root", "root");
            if (!$connect) {
                die(mysql_error());
            }
            mysql_select_db("apploymentdevs");
            $results = mysql_query("SELECT * FROM demo LIMIT 10");
            while($row = mysql_fetch_array($results)) {
            ?>
                <tr>
                    <td><?php echo $row['Id']?></td>
                    <td><?php echo $row['Name']?></td>
                </tr>

            <?php
            }
            ?>
            </tbody>
            </table>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T23:04:32.770

要求您将数据库中的数据编码为 JSON 的选项：http: [//www.jeasyui.com/documentation/datagrid.php](http://www.jeasyui.com/documentation/datagrid.php)

但这看起来更有希望： http: [//phpgrid.com/](http://phpgrid.com/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-12T15:57:41.950

我非常恼火地一遍又一遍地将相同的代码粘贴在一起以从 SQL 查询构建 HTML 表。

因此，这里我们使用**一个函数，它获取`mysqli`结果并将它们一起粘贴到一个简单的 HTML 表**中，该表具有根据数据库中的列名的列名：

```
function sql_to_html_table($sqlresult, $delim="\n") {
  // starting table
  $htmltable =  "<table>" . $delim ;   
  $counter   = 0 ;
  // putting in lines
  while( $row = $sqlresult->fetch_assoc()  ){
    if ( $counter===0 ) {
      // table header
      $htmltable .=   "<tr>"  . $delim;
      foreach ($row as $key => $value ) {
          $htmltable .=   "<th>" . $key . "</th>"  . $delim ;
      }
      $htmltable .=   "</tr>"  . $delim ; 
      $counter = 22;
    } 
      // table body
      $htmltable .=   "<tr>"  . $delim ;
      foreach ($row as $key => $value ) {
          $htmltable .=   "<td>" . $value . "</td>"  . $delim ;
      }
      $htmltable .=   "</tr>"   . $delim ;
  }
  // closing table
  $htmltable .=   "</table>"   . $delim ; 
  // return
  return( $htmltable ) ; 
} 
```

**示例用法：**

```
$DB = new mysqli("host", "username", "password", "database");
$sqlresult = $DB->query( "SELECT * FROM testtable LIMIT 1 ;" ) ; 

echo sql_to_html_table( $sqlresult, $delim="\n" ) ; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-05T07:53:01.170

`table( $result );`无论您提供给它的 sql 数组的大小如何，调用您的查询结果都会生成一个基于 html 的表。我希望这会有所帮助**:)**

```
<?php

function table( $result ) {
    $result->fetch_array( MYSQLI_ASSOC );
    echo '<table>';
    tableHead( $result );
    tableBody( $result );
    echo '</table>';
}

function tableHead( $result ) {
    echo '<thead>';
    foreach ( $result as $x ) {
    echo '<tr>';
    foreach ( $x as $k => $y ) {
        echo '<th>' . ucfirst( $k ) . '</th>';
    }
    echo '</tr>';
    break;
    }
    echo '</thead>';
}

function tableBody( $result ) {
    echo '<tbody>';
    foreach ( $result as $x ) {
    echo '<tr>';
    foreach ( $x as $y ) {
        echo '<td>' . $y . '</td>';
    }
    echo '</tr>';
    }
    echo '</tbody>';
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T23:18:47.090

您可能对获取感兴趣`mysql_fetch_assoc()`（以便您在关联数组中获取数据：keys=>value）。键中是您的列名；因此，对于每一行，您可以遍历每一列（使用`array_keys()`）并打印其值。

```
$results = mysql_query("SELECT * FROM demo");
while($row = mysql_fetch_assoc($results)) {
    foreach (array_keys($row) as $column) {
        echo $row[$key] . "</br>";
    }
} 
```

（之后，您可以将 array_keys($row) 缓存在一个只设置一次的变量中，因为它的值在您运行结果时不会改变。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-05T19:03:29.663

即使已经有一段时间了，我还是要把我的 2 美分投入：使用函数（甚至更好 - 类）。从 mysql 结果创建表是一项非常常见的任务。

```
<!DOCTYPE html>
<html>
    <head><title>Create Tables from MySQL using functions</title></head>
<body>
<?php
db_connect();
// assuming you have an auto increment id as the first column
$result = mysql_query("SELECT * FROM demo ORDER BY 1 DESC LIMIT 10");
print createTable(array_result($result));
?>
</body>
</html>

<?php 
/**
 * Quick mysql result function
 *
 * @param $result
 * @return array
 */
function array_result($result)
{
    $args = array();
    while ($row = mysql_fetch_assoc($result)) {
        $args[] = $row;
    }
    return $args;
}

/**
 * Connect to db
 * 
 * @param string $db_host
 * @param string $db
 */
function db_connect($db_host = "localhost", $db = "apploymentdevs")
{
    $connect = mysql_connect($db_host,"root", "root");
    if (!$connect) {
        die(mysql_error());
    }
    mysql_select_db($db);
}

/**
 * Create a table from a result set
 *
 * @param array $results
 * @return string
 */
function createTable(array $results = array())
{
    if (empty($results)) {
        return '<table><tr><td>Empty Result Set</td></tr></table>';
    }

    // dynamically create the header information from the keys
    // of the result array from mysql
    $table = '<table>';
    $keys = array_keys(reset($results));
    $table.='<thead><tr>';
    foreach ($keys as $key) {
        $table.='<th>'.$key.'</th>';
    }
    $table.='</tr></thead>';

    // populate the main table body
    $table.='<tbody>';
    foreach ($results as $result) {
        $table.='<tr>';
        foreach ($result as $val) {
            $table.='<td>'.$val.'</td>';
        }
        $table.='</tr>';
    }
    $table.='</tbody></table>';
    return $table;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T23:07:20.003

我希望你知道如何用 HTML 制作表格，`<table>, <tr> and <td>.`

在您的 while 循环中修复一个表并`"SELECT * FROM demo LIMIT 10"`用作 SQL 查询。

# asp.net - 按用户名注销会员用户

> ID：11943481
> 
> 赞同：0
> 
> 时间：2012-08-13T23:00:29.463
> 
> 标签：asp.net

我知道防止多用户登录的机制：[在 asp.net 站点中如何防止同一用户 ID 的多次登录？](https://stackoverflow.com/questions/2599118/in-asp-net-site-how-to-prevent-multiple-logins-of-same-user-id). 我的情况不同。

在我的网站上，一个页面会检查用户是否已登录（默认的 .NET 会员提供程序）。用户通过身份验证后，页面会将他们重定向到第三方服务器上的高级服务。这意味着我不能使用上述机制在每个页面上检查当前会话 ID 与先前存储的会话 ID。

登录时，我需要结束当前用户的所有*先前*会话。我遇到的所有方法（例如 FormsAuthentication.SignOut）仅针对当前用户。是否可以通过会员用户名注销用户，因此没有两个网站访问者使用相同的用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:57:44.163

您可以创建一个跟踪用户当前会话 ID 的表/自定义成员字段/静态字典/等。当用户登录时，将该值设置为当前 ID。然后，在您的`global.asax`句柄中`Application_AuthenticateRequest`检查当前会话是否与您存储的内容匹配。如果没有，请执行注销/重定向。

# ios - 如何制作防崩溃的 iOS 应用程序

> ID：11943485
> 
> 赞同：3
> 
> 时间：2012-08-13T23:00:49.993
> 
> 标签：ios, design-patterns, crash

我现在正在编写 ios 应用程序一段时间。但是我的应用程序仍然经常崩溃，并且需要时间才能使它们非常稳定。我觉得这很烦人。

那么，是否有任何关于防崩溃编程 iOS 应用程序的编程模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T23:31:38.357

*   打开编译器警告。删除所有警告。
*   运行静态分析器。删除所有警告。
*   使用 GuardMalloc 和/或 Scribbling 运行。
*   删除所有泄漏
*   移除所有僵尸
*   编写单元测试
*   编写高级实时错误检测（例如断言）
*   在添加功能之前修复错误。
*   使用源代码控制和持续集成。
*   读。提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:41:43.757

1）使用弧。

ARC 的学习曲线很小，我在 SO 上读到的最大问题是人们实例化对象但忘记将对象分配给强 ivar（或属性），因此对象神秘地消失了。无论如何，好处是如此引人注目，您应该掌握这一点。当您这样做时，您现在必须保留的大部分内存管理内容都会消失。

2）构建干净

构建时永远不应该有警告。如果你有一堆，当一个真正的问题出现时，它就会被你习惯于忽略的垃圾线埋没。专业的程序员构建干净。

3) 使用分析

Xcode/llvm 有一个惊人的分析器 - 使用它 - 它位于 Product 菜单项下。然后清理它给你的每一个警告。

4）使用正确的配置

我总是有一个发布（或分发）配置、一个 ReleaseWithAsserts 和调试。我只在使用 lldb 时使用 Debug，因为代码要大得多，并且它的执行方式与优化的编译方式不同。ReleaseWithAsserts 与 Debug 类似，但去掉了 Debug=1 预处理器标志，并将优化器设置为 -Os（Release 的默认值）。

最后，Release/Distribution 配置在预处理宏中有以下内容：

```
NS_BLOCK_ASSERTIONS=1 NDEBUG 
```

第一个关闭所有“NSAssert()”行，第二个关闭所有“assert()”语句。这样，您的交付代码中就没有断言处于活动状态

5) 使用大量的断言。

Asserts 是程序员可以拥有的最好的朋友之一。我在这里看到了很多问题，如果程序员只使用它们就永远不会写出来。开销在于键入它们，因为（在我的使用中）它们在 Release 配置中被编译掉。

每当你从另一个来源获得一个对象时，断言它的存在（即：

```
MyObject *foo = [self someMethod];
assert(foo); 
```

这很容易输入，但是当一个 nil 对象在数千条指令之后导致问题时，可以节省您数小时的调试时间。您也可以在课堂上断言：

```
MyObject *foo = [self someMethod];
assert([foo isMemberOfClass:[MyObject class]]); 
```

当您从字典中提取对象时，这特别有用。

您可以将断言放在方法的开头，以验证您收到的对象也不是 nil。

您可以断言某个变量具有值：

```
assert(i>1 && i<5); 
```

同样，在除发布/分发配置之外的所有配置中，断言都是“活动的”，但在该配置中它们被编译出来。

NSAssert 类似——但您必须根据参数的数量使用不同的宏。

```
NSAssert(foo, @"Foo was nil");
NSAssert1(foo, @"Foo was nil, and i=%d", i);
... 
```

6）使用选择性日志来确保应该发生的事情是

您可以定义自己的 Log 宏，该宏会为 Release/Distribution 编译出来。将此添加到您的 pch 文件中：

```
#ifndef NDEBUG

#define MYLog NSLog

#else

#define MYLog(format, ...)

#endif 
```

这指出了另一点 - 您可以使用：

```
#ifndef NDEBUG
...
#endif 
```

阻止一些执行更复杂检查的代码 - 它仅对您的开发版本有效，而不是用于发布/分发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:03:49.473

您可能已经这样做了，但这是我所做的：

1.  使用调试器/模拟器转到应用程序中的每个屏幕，然后选择“模拟内存警告”。返回上一个屏幕。这会导致 viewDidLoad 中现有的 UIView 对象和变量分配被重新分配（这可能导致错误的指针引用）。

2.  确保在 dealloc 中使任何正在运行的计时器无效。

3.  如果对象 A 已将自己设为对象 B 的委托，请确保在对象 A 的 dealloc 中清除它。

4.  确保清除 dealloc 中的所有通知观察者。

# java - 请告知序列化 JAXB 列表的最佳模式

> ID：11943487
> 
> 赞同：1
> 
> 时间：2012-08-13T23:01:01.943
> 
> 标签：java, json, spring, jaxb, jaxb2

关于为什么列表类型不序列化的问题有很多，但是我质疑以简单的方式提供列表类型的 bean 的好做法是什么。

到目前为止，我一直在创建内部类来支持包装器，尽管我不喜欢管道，因为我需要为每个 pojo 做它。

客户类可能如下所示：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {

    private int id;
    private String name;

    // field accessors

    @XmlRootElement(name = "customers")
    @XmlAccessorType(XmlAccessType.FIELD)
    public static final class CustomerList {
        private List<Customer> customer;
        public CustomerList() {
            this.customer = new ArrayList<>();
        }
        public DataList(List<Customer> list) {
            this.customer = list;
        }
        // customer accessors.
    }

} 
```

我尝试制作一个通用类，`XmlList<T>`并在返回时创建新实例，但 JAXB 似乎不喜欢这样。

我在 Spring/MVC RESTful 应用程序中使用它，我需要同时支持 JSON 和 XML。我的 JSON 应该表示为一个数组，通过将实现放在 JSON 调用中，然后用 XML 调用包装，这使得该方法可以轻松实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:03:30.000

这是我如何做到这一点的。

```
@XmlRootElement // or @XmlTransient if you want to
public class Plural<S> {

    public static <P extends Plural<S>, S> P newInstance(
            final Class<P> pluralType, final Collection<S> elms) {
        P lt = (P) pluralType.newInstance();
        lt.singulars = new ArrayList<>(elms);
        return lt;
    }

    protected Collection<S> getSingulars() {
        if (singulars == null) {
            singulars = new ArrayList<S>();
        }
        return singulars;
    }

    private Collection<S> singulars;
} 
```

然后，您可以制作任何单数类型的任何所需复数类型。也许你不喜欢你应该为所有单数类型创建所有复数类，但它可能真的很有帮助，尤其是当你想让那些客户端开发人员看起来更漂亮时。

```
@XmlRootElement
public class Customers extends Plural<Customer> {

    @XmlElement(name = "customer")
    public Collection<Customer> getCustomers() {
        return getSingulars();
    }
}

@XmlRootElement
public class Items extends Plural<Item> {

    @XmlElement(name = "item")
    public Collection<Item> getItems() {
        return getSingulars();
    }
}

@XmlRootElement
public class Invoices extends Plural<Invoice> {

    @XmlElement(name = "invoice")
    public Collection<Invoice> getInvoices() {
        return getSingulars();
    }
}

@XmlRootElement
public class BrettRyans extends Plural<BrettRyan> {

    @XmlElement(name = "brettRyan")
    public Collection<BrettRyan> getBrettRyans() {
        return getSingulars();
    }
} 
```

根据布雷特瑞恩的评论更新

这里有功能齐全的源代码。

[您可以在http://code.google.com/p/jinahya/source/browse/trunk/com.googlecode.jinahya/stackoverflow/](http://code.google.com/p/jinahya/source/browse/trunk/com.googlecode.jinahya/stackoverflow/)查看完整的 mavenized 项目

如果您控制使用字段而不是属性，则 JAXB 不需要设置器。

```
@XmlTransient
public class Plural<S> {

    public static <P extends Plural<S>, S> P newInstance(
        final Class<P> pluralType) {
        return newInstance(pluralType, Collections.<S>emptyList());
    }

    public static <P extends Plural<S>, S> P newInstance(
        final Class<P> pluralType, final Collection<? extends S> singulars) {
        try {
            final P plural = pluralType.newInstance();
            plural.getSingulars().addAll(singulars);
            return plural;
        } catch (InstantiationException ie) {
            throw new RuntimeException(ie);
        } catch (IllegalAccessException iae) {
            throw new RuntimeException(iae);
        }
    }

    protected Collection<S> getSingulars() {
        if (singulars == null) {
            singulars = new ArrayList<S>();
        }
        return singulars;
    }

    private Collection<S> singulars;
}

@XmlAccessorType(XmlAccessType.NONE)
public class Item {

    public static Item newInstance(final long id, final String name) {
        final Item instance = new Item();
        instance.id = id;
        instance.name = name;
        return instance;
    }

    @Override
    public String toString() {
        return id + "/" + name;
    }

    @XmlAttribute
    private long id;

    @XmlValue
    private String name;
}

@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement
public class Items extends Plural<Item> {

    @XmlElement(name = "item")
    public Collection<Item> getItems() {
        return getSingulars();
    }
} 
```

测试...

```
public class ItemsTest {

    @Test
    public void testXml() throws JAXBException, IOException {

        final Items marshallable = Plural.newInstance(Items.class);
        for (int i = 0; i < 5; i++) {
            marshallable.getItems().add(Item.newInstance(i, "name" + i));
        }
        for (Item item : marshallable.getItems()) {
            System.out.println("marshallable.item: " + item);
        }

        final JAXBContext context = JAXBContext.newInstance(Items.class);

        final Marshaller marshaller = context.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

        final ByteArrayOutputStream baos = new ByteArrayOutputStream();

        marshaller.marshal(marshallable, baos);
        baos.flush();

        final Unmarshaller unmarshaller = context.createUnmarshaller();
        final Items unmarshalled = (Items) unmarshaller.unmarshal(
            new ByteArrayInputStream(baos.toByteArray()));
        for (Item item : unmarshalled.getItems()) {
            System.out.println("unmarshalled.item: " + item);
        }
    }
} 
```

印刷

```
marshallable.item: 1/name1
marshallable.item: 2/name2
marshallable.item: 3/name3
marshallable.item: 4/name4
unmarshalled.item: 0/name0
unmarshalled.item: 1/name1
unmarshalled.item: 2/name2
unmarshalled.item: 3/name3
unmarshalled.item: 4/name4 
```

根据 Brett Ryan 的第二条评论更新

```
@Test
public void testXsd() throws JAXBException, IOException {

    final JAXBContext context = JAXBContext.newInstance(Items.class);

    context.generateSchema(new SchemaOutputResolver() {
        @Override
        public Result createOutput(final String namespaceUri,
                                   final String suggestedFileName)
            throws IOException {
            return new StreamResult(System.out) {
                @Override
                public String getSystemId() {
                    return "noid";
                }
            };
        }
    });
} 
```

当`Plural`用`@XmlRootElement`.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="items" type="items"/>

  <xs:element name="plural" type="plural"/>

  <xs:complexType name="items">
    <xs:complexContent>
      <xs:extension base="plural">
        <xs:sequence>
          <xs:element name="item" type="item" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="plural">
    <xs:sequence/>
  </xs:complexType>

  <xs:complexType name="item">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="id" type="xs:long" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema> 
```

当`Plural`用`@XmlTransient`.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="items" type="items"/>

  <xs:complexType name="items">
    <xs:sequence>
      <xs:element name="item" type="item" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="item">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="id" type="xs:long" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:23:26.140

供更多读者参考。

我刚刚发现了一篇有趣的博客文章，讨论了 JAX-RS 的自动复数。 [https://blogs.oracle.com/PavelBucek/entry/returning_xml_representation_of_list](https://blogs.oracle.com/PavelBucek/entry/returning_xml_representation_of_list)

我不确定此功能是否特定于实现。

每个人都必须尝试平台服务的内容和方式。

```
@GET
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public List<Item> read() {

    final List<Item> items = ... // is the variable name relevant 

    return items;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T04:03:00.150

这可能是我认为的另一种正确方式。

```
@GET
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public Response readItems() {

    final List<Item> items = ...;

    return Response.ok(new GenericEntity<List<String>>(list) {}).build();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-05T14:13:59.080

很抱歉，我找到了另一种我认为更好的方法。

```
@GET
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public List<Item> readItems() {

    final List<Item> items = itemBean.list(...);

    return items;
} 
```

在这种情况下，任何应用程序服务器都可以以不同的方式生成。

与 GlassFish

```
<items> <!-- smart plural names -->
  <item xmlns="http://www.example.com">
    ...
  </item>
  <item xmlns="http://www.example.com">
    ...
  </item>
<items> 
```

与 JBoss

```
<collection>
  <item xmlns="http://www.example.com">
    ...
  </item>
  <item xmlns="http://www.example.com">
    ...
  </item>
<collection> 
```

对于客户来说，这个问题不是影响。可以像这样使用一般的 XPath 表达式。

```
"//item/name/first" 
```

# mysql - 在 CakePHP 中更新时重置为 MySQL DEFAULT 值

> ID：11943488
> 
> 赞同：1
> 
> 时间：2012-08-13T23:01:07.917
> 
> 标签：mysql, cakephp, default-value, cakephp-2.2

我想知道`DEFAULT`在 CakePHP 中执行更新操作时如何将字段重置为值（在 MySQL 结构中设置的值）。就像`DEFAULT`在 SQL 中使用关键字一样：

```
INSERT INTO items (position) VALUES (DEFAULT); 
```

*编辑：*我**不是在寻找一种在 create 上使用默认值的方法**，而是在寻找一种在已经使用该字段时将其重置为默认值的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:18:10.323

如果要将其默认值保存到 mysql 数据库中，您可以简单地从请求的数组中取消设置表单输入。您可以尝试以下方法来实现相同的目的：

```
$item_details = $this->request->data;
unset($item_details['Item']['position']);
$this->Item->create();
$this->Item->save($item_details); 
```

根据您编辑的问题，如果您想在更新记录期间重置任何字段。你只需要使用[MySql default() 函数](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_default)。

```
$item_details = $this->request->data;
$this->Item->id = $item_details['Item']['id'];
$this->Item->saveField('position', DboSource::expression('DEFAULT(position)')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:59:55.997

要回答我自己的问题，可以这样做：

```
$this->Item->saveField('position', DboSource::expression('DEFAULT(position)')); 
```

或者

```
$data['Item']['position'] = DboSource::expression('DEFAULT(position)');
$this->Item->save($data) 
```

**但是**-*在这里我们将失去时间：*为了**能够使用`DboSource`之前必须有一个数据库查询**！否则 CakePHP 会抛出错误`Class 'DboSource' not found`。

# php - Codeigniter/ PHP MySQL 加入

> ID：11943490
> 
> 赞同：0
> 
> 时间：2012-08-13T23:01:36.097
> 
> 标签：php, mysql, codeigniter, join

我有两张桌子：“比赛”和“参赛作品”。在我的比赛表上，我有一个“已完成”列，告诉我比赛是否已经进行。在我的条目表上，我有一个用户 ID 列和一个比赛 ID 列。我正在尝试创建一个 JOIN，通过检查“条目”表中的所有行，然后检查每个特定行是否在“竞赛”表中完成了相应的竞赛 ID，我可以查看用户是否能够竞争。我的加入不是很强壮，到目前为止我有点迷茫。这是我到目前为止所拥有的，但它不能正常工作：

```
$this->db->select('*');
$this->db->from('entries');
$this->db->join('competitions', 'competitions.id = entries.competition_id');
$this->db->where('entries.user_id', $user_id);
$this->db->where('competitions.complete', '0'); //0 for incomplete, 1 for complete
$query = $this->db->get();
if ($query->num_rows() > 0) {
    return FALSE; //user is currently in an active competition
}else {
    return TRUE; //user is not in an active competition
} 
```

我目前在 Codeigniter 工作，但在常规 PHP 中进行解释也可以。非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:23:54.963

您可以使用左连接或右连接以获得更好的结果...

```
$this->db->join('table2','table1.id = table2.id','LEFT/RIGHT'); 
```

我想你也可以使用内连接，外连接......希望它有用

# django - 在 Nginx 后面通过 HTTPS 访问 Django Admin

> ID：11943491
> 
> 赞同：8
> 
> 时间：2012-08-13T23:01:56.420
> 
> 标签：django, redirect, https, nginx, admin

我让 django 在 nginx 后面的 uwsgi 中运行。当我尝试访问时，`https://site/admin/`我得到了预期的登录屏幕。通过表单登录似乎成功了，但是，我最终回到了登录屏幕。Firebug 显示重定向到普通`http://site/admin/`url，然后由 nginx 重定向到 https url。

帮助！我对如何强制管理应用程序仅使用 https 网址感到困惑。

请注意，这似乎是一个相关的、未回答的问题：[https://example.com/admin 在 Django Nginx 和 gunicorn 中重定向到 https://admin](https://stackoverflow.com/questions/11237023/https-site-com-admin-redirects-to-https-admin-in-django-nginx-and-gunicorn)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T19:56:35.467

将以下内容添加到 nginx.conf 为我解决了这个问题。

```
location / {
    ...
    include                 uwsgi_params;
    uwsgi_param             HTTP_X_FORWARDED_PROTOCOL https;
    uwsgi_param             UWSGI_SCHEME   $scheme;
} 
```

除了将以下内容添加到 settings.py 之外：

```
SESSION_COOKIE_SECURE = True
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTOCOL', 'https')
CSRF_COOKIE_SECURE = True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:39:35.490

以下*应该*是您将所有到管理应用程序的流量重定向到 https 所需的全部内容

```
location /site/admin/ {
  rewrite ^ https://$host/$request_uri permanent;
} 
```

如果这不起作用，您可以发布您的实际 nginx 配置位吗？如果没有您要查看的实际配置，真的无法提出更多建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-17T22:18:22.207

Django 1.8 settings.py 的更新：

```
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SECURE_SSL_REDIRECT = True
SECURE_REDIRECT_EXEMPT = [r'^(?!admin/).*'] 
```

对于您的开发设备，您可能希望`SECURE_SSL_REDIRECT = False`在本地设置中覆盖。

# c++ - 不需要的舍入 C++

> ID：11943494
> 
> 赞同：2
> 
> 时间：2012-08-13T23:02:24.020
> 
> 标签：c++, math, rounding

我有以下等式：

```
//get thermistor resistor value
temp=(THERMISTOR_R0)/((temp2/temp)-1);

//get temperature value in Kelvins and convert to Celsiuis
temp=(THERMISTOR_BETA)/log(temp/(THERMISTOR_R0*exp((-THERMISTOR_BETA)/298)));
temp-=273;

desiredVoltage =((15700-(25*temp))/10); 
```

`THERMISTOR_R0`并且`THERMISTOR _BETA`是恒定的。

`temp`,`temp2`并且`desiredVoltage`是 unsigned int 并且在计算之前定义。

问题是，例如，当项`((temp2/temp)-1)`低于 1 时，它会向下舍入为 0。我想摆脱这种舍入，因为它会给我的计算带来很大的问题。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T23:07:46.900

这不是四舍五入，而是整数除法。如果运算符的两个操作数`/`都是整数类型，则 C++ 的行为是执行整数除法，它只保留结果的整数部分（这在某些算法中经常需要，因为它更快）。

要获得“常规”除法，请确保所涉及的至少一个操作数是浮点类型（`float`或`double`）`long double`；您可以将涉及的变量声明为 FP 类型

```
double temp2, temp; 
```

要么在其中一个操作数前面粘贴一个演员表。

```
temp=(THERMISTOR_R0)/((double(temp2)/temp)-1); 
```

（请注意，如果`temp`仍然是整数类型，您将在此处发生截断）。

最有可能的是，在这里您只想将`temp`and声明`temp2`为`double`（或者`float`如果您在一个非常资源紧张的环境中工作）。

此外，当除以数字文字时，请记住，如果你不写小数点，它将是一个`int`文字，如果你写它，它将是一个`double`. 例如，`298`是一个`int`，`298.`是一个`double`，所以`1/2`是`0`，但是`1/2.`是`0.5`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T23:04:23.753

如果您想要浮点除法行为，请确保使用浮点类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:08:56.650

编译器向下舍入浮点值。

通常，这个问题通过在转换为整数之前的值加上 0.5 来解决。您可能希望显式使用浮点值（或强制转换），然后将 0.5 添加到结果中，然后再强制转换为整数。

# c++ - c ++改变cin也许是skipline？

> ID：11943496
> 
> 赞同：0
> 
> 时间：2012-08-13T23:02:31.973
> 
> 标签：c++, string, cin

我从大学的 C++ 开始（在使用 Modula2 之前）。我对cin有问题。在与用户交互时，我需要识别某些“命令”。，

例如“addClient Rafael”。我按以下方式处理它 cin >> command, strcoll (command, "addClient")，然后，如果 command 等于 addClient，则执行 cin >> command2（所以我读了 Rafael）。并执行适当的程序...

而且，我必须识别删除所有数据库的“deleteAll”，所以我不必读取第二个参数。

当有人输入诸如“skjdsjfnsdj”之类的随机内容时，它应该说“错误命令”，如果命令不等于我的“已知”命令中的任何一个，它都会打印“错误命令”。

问题是，当某些类型“skajskajs jakasjkajs”说“错误的命令。磨损的命令”......它应该只说一次......

所以，“noskip”我的东西没用，也许如果我能打破字符串..，也许是一种更简单的方法，可以帮助任何人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:47:32.920

最灵活、最直观的方法如下：

```
bool done = false;
while( !done ) {
    string commandLine, cmd, value;
    getline( cin, commandLine );

    istringstream ss(commandLine);
    ss >> cmd >> value;

    if( cmd == "deleteAll" ) {
        // BOOM
    }
    else if( cmd == "addClient" ) {
        // Do something with 'value'.  You could wait until here to read it
        // if you want, instead of always attempting to read it.
    }
    else if( cmd == "quit" ) {
        done = true;
    }
    else {
        cout << "Wrong command\n";
    }
} 
```

或编辑以适合您的目的。我使用这种方法来解析简单的键/值对配置文件。工作一种享受，并且几乎不费力地编写代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T23:13:19.503

您可以简单地尝试[istream::getline()](http://www.cplusplus.com/reference/iostream/istream/getline/)代替。

它将防止每个命令的消息多次出现（由*\n*分隔）。

# android - 从 Chrome 文件系统播放视频不适用于 Android

> ID：11943499
> 
> 赞同：6
> 
> 时间：2012-08-13T23:03:16.280
> 
> 标签：android, google-chrome, filesystems, html5-video

我正在尝试创建一个离线视频播放器，该播放器将从我的网站下载视频内容，以便以后通过 HTML5 视频元素离线查看。下面的代码在桌面版 Chrome 中运行良好，但在移动设备上运行不正常（Nexus S 智能手机、Nexus 7 平板电脑、4.1，因为只有运行 chrome，这是文件系统 api 所必需的）。我在桌面和移动设备上使用 chrome 支持的文件系统 API。

我已经确认它正确地将文件存储在移动设备上，并且我可以正确检索文件，但由于某种原因，从本地系统 chrome 检索视频后不想播放视频。无论我是使用 html5 视频元素还是直接导航到文件系统 URL，这都是正确的。当我使用 html5 视频元素时，它返回错误 media_err_not_supported。我已经确认，如果我在我的服务器上直接导航到该设备（无需先使用文件系统 api 存储它），该设备可以播放视频，因此问题不是编解码器或视频格式问题。在这两种情况下，我也都使用了 video/mp4 mime 类型。

同样，这适用于桌面，但不适用于移动设备。有任何想法吗？

这是我们正在使用的代码：

```
<!DOCTYPE html >
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"> </script>
        <script type="text/javascript">
            var _fs;
            var filename = "test3.mp4";
            var diskSpaceRequired = 10 * 1024 * 1024;
            $(document).ready(function () {
                window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
                function onInitFs(fs) {
                    _fs = fs;
                    getVideo(fs);
                }

                if (!!window.requestFileSystem) {

                    window.webkitStorageInfo.requestQuota(
                        window.webkitStorageInfo.PERSISTENT,
                        diskSpaceRequired, // amount of bytes you need
                        function () { },
                        function () {}
                    );
                    window.requestFileSystem(window.PERSISTENT, diskSpaceRequired, onInitFs, function () { alert('error'); });
                } else {
                    alert('not supported');
                }

                $("#play").on('click', playVideo);
                $("#ourVideo").on('error', function(e) { console.log('ERROR!!!', e, arguments);
                  console.log($("#ourVideo")[0].error);
                 });
            });

            function playVideo() {
               _fs.root.getFile(filename, {}, function (fileEntry) {
                    $("#ourVideo").attr('src', fileEntry.toURL());
                    fileEntry.file(function (file) {
                      var reader = new FileReader();
                      reader.onloadend = function (e) {
                        $("#ourVideo").get(0).play();
                      };
                      reader.readAsText(file);
                    }, errorHandler);

                }, errorHandler);
            }

            function getVideo(fs) {
                fs.root.getFile(filename, { create: true }, function (fileEntry) {
                    fileEntry.createWriter(function (fileWriter) {
                        fetchResource(fileWriter);
                    }, errorHandler);

                }, errorHandler);
            }

            function errorHandler(e) {
                console.log('error', e);
            }

            function fetchResource(fileWriter) {
                console.log('fetchresource');
                var xhr = new XMLHttpRequest();
                xhr.responseType = "arraybuffer";
                xhr.open("GET", "http://mydomain.com/trailer.mp4", true);

                xhr.onload = function(e) {
                    if (this.status == 200) {
                        var bb = new WebKitBlobBuilder();
                        bb.append(this.response);

                        var blob = bb.getBlob("video\/mp4");
                        fileWriter.write(blob);
                    } else  {
                      console.log(this.status);
                    }
                };
                xhr.send();
            }            

        </script>
        <title>foo</title>
    </head>
    <body>

        <input type="button" value="Play Video" id="play"/>
            <video id="ourVideo" controls="">
                <source id="vidSource"  type="video/mp4"/>
            </video>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:34:49.550

问题看起来像您的 android chrome 无法正确访问 android 文件系统，为此您可以使用 nanoHttpd 服务器访问设备或 sdcard 中的 android 本地文件。 [对于 NanoHttpd 服务器](http://code.google.com/p/free-android-apps/source/browse/trunk/Local+HTTPD/src/com/hax/NanoHTTPD.java?r=15)，在您的应用程序中使用这一类并将媒体文件位置传递为`http://localhost:8081/sdcard/(your_media_location).mp4`

或从[https://gist.github.com/1893396获取 nanoHttpd](https://gist.github.com/1893396)

我认为访问 sdcard 文件比直接调用它们更准确

* * *

尝试将 html 部分更改为

```
</head>
<body>

    <input type="button" value="Play Video" id="play"/>
        <video id="ourVideo" controls="">                
             <source src="video1.mp4" type= "video/mp4">
             <source src="video1.ogv" type= "video/ogg">
        </video>

</body> 
```

您可以使用 [http://video.online-convert.com/convert-to-ogg](http://video.online-convert.com/convert-to-ogg)将您的 mp4 转换为 ogv ，并将 ogv 文件放在 mp4 中的相同位置

**有关更多信息，请查看这些 [http://www.broken-links.com/2010/07/08/making-html5-video-work-on-android-phones/](http://www.broken-links.com/2010/07/08/making-html5-video-work-on-android-phones/)

[Android 上的 HTML5 <video> 元素无法播放](https://stackoverflow.com/questions/2911379/html5-video-element-on-android-does-not-play)

# mysql - 如何修改 MySQL 中一张表的最小字长？

> ID：11943500
> 
> 赞同：2
> 
> 时间：2012-08-13T23:03:18.920
> 
> 标签：mysql, full-text-search

我知道如何在服务器上修改 MySQL 的[全局配置](http://www.electrictoolbox.com/mysql-full-text-index-word-length/)，以便最小字长可以比默认的 4 短（不幸的是，我们的内容包含一堆需要可搜索的 TLA）。

但是，我想知道是否可以更精细地使用它，并且只修改实际需要它的一个表。

# java - Java Netty 数据中断

> ID：11943502
> 
> 赞同：1
> 
> 时间：2012-08-13T23:03:28.823
> 
> 标签：java, netty

我在我的项目中使用 netty-3.5.3.Final 来传输文件。不幸的是，有时我会得到错误的数据。例如，我正在下载 1 GB 的文件大小。收到文件后包含5个“错误”。所有错误都会影响单个字节。这是一个“合乎逻辑”的变化![在此处输入图像描述](../Images/29cd3a4170ec6c0c33d7ec22e209c69a.png)

```
Ë -> ë  (CB -> EB)  C+2 = E
À -> à  (C0 -> E0)  C+2 = E
Ú -> ú  (DA -> FA)  D+2 = F
œ -> ¼  (9C -> BC)  9+2 = B
 -> $   (04 -> 24)  0+2 = 2
e.t.c.
(Not every Ë becomes ë, only ~1/100000000...000..) 
```

文件获取过程：

```
ChannelBuffer buf = (ChannelBuffer) e.getMessage(); //SimpleChannelHandler.messageReceived(...)..
 ByteBuffer bbuf = buf.toByteBuffer();
RandomAccessFile bos = new RandomAccessFile(...,"rw");
bos.write(bbuf.array(), 0, bbuf.position());
bos.close(); 
```

数据不会有任何变化。为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:17:08.773

我认为您编写的代码是错误的。

你能试试这个：

```
ChannelBuffer buf = ...
OutputStream out = new FileOutputStream(...)
buf.readBytes(out, buf.readableBytes());
out.close(); 
```

# java - BoofCV 或纯 Java 计算机视觉库中 cvMatchTemplate() 的等价性？

> ID：11943507
> 
> 赞同：1
> 
> 时间：2012-08-13T23:04:26.683
> 
> 标签：java, computer-vision, boofcv

我正在寻找解决方案[BoofCV](http://boofcv.org/index.php?title=Main_Page)或任何不需要 OpenCV 对图像进行模板匹配以检测图片中的对象的纯 Java 计算机视觉库。

例如，在更大的图片中查找图像的位置。

我在 上的`cvMatchTemplate()`示例取得了成功`OpenCV`，但有兴趣使用`BoofCV`它来实现相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T21:03:47.560

此功能最近已添加到 BoofCV。请参见下面的示例：

[http://boofcv.org/index.php?title=Example_Template_Matching](http://boofcv.org/index.php?title=Example_Template_Matching)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:05:32.530

BoofCV 中似乎没有实现此功能。

# python - 命令行可移植应用程序

> ID：11943512
> 
> 赞同：0
> 
> 时间：2012-08-13T23:05:05.360
> 
> 标签：python, user-interface, command-line, console

不确定这是否是问这个问题的地方，所以请酌情关闭或移动。

我们将 Python2.7 64 位和一些 Python 库（GDAL、SciPy、Numpy）捆绑到一个应用程序（py2app / pyinstaller）中。我想知道是否可以创建一个可以访问已安装库但不能访问系统库的独立终端。这类似于[FWTools](http://fwtools.maptools.org/)。

目标是允许用户在 GUI 中打开命令提示符，并在虚拟环境中访问应用程序中的所有库。

例如，安装了 GDAL 1.8 的用户可以下载此应用程序，启动一个独立的命令行并从应用程序中使用我们构建的 gdal 1.9.1。

任何参考将不胜感激，因为我们只是在考虑这种方法并且不确定可行性。

我们用python写这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:30:49.167

将控制台/终端嵌入到任何 GUI 框架中都不是一种非常简单的方法。我听说过的最接近的是 PyGTK 的 VteTerminal。您也许可以使用 Python 的 curses 库，但我也找不到任何将其包装在 GUI 中的好方法。

如果你想要的只是一个 Python shell，你可以使用 wxPython 的 PyShell 或 PyCrust 小部件。这些很简单。

# xcode - Instruments dSYM Locations 中不存在应用程序名称

> ID：11943514
> 
> 赞同：2
> 
> 时间：2012-08-13T23:05:09.370
> 
> 标签：xcode, instruments

我正在尝试在仪器中重新符号化我的项目，因为它没有在 TimeProfiler 下显示函数名称。但我无法在 dSYM 位置下找到我的应用程序。

![在此处输入图像描述](../Images/e44fc2134c11ab0d908ee3079ba2dac2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:15:55.583

我不知道为什么，但由于某种原因，xcode 下的分析模式有“发布”配置而不是“调试”！将其改回调试解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:43:01.287

这是 Spotlight 和 Lion 的错误。不幸的是“mdimport”。命令并非在所有情况下都有效（此命令应该告诉在哪里查找 dsym 文件，如果您在 dsym 文件夹中，它必须有效）

所以我最终在仪器中手动定位以下文件：/Users/YOUR_USER_HERE/Library/Developer/Xcode/DerivedData/YOUR_APP_HERE/Build/Products，然后选择适当的文件夹和 DSym 文件。

为了能够选择库文件夹，您需要编写以下命令：chflags nohidden ~/Library/

# ruby-on-rails - 用于 ruby on rails 应用程序的 GUI 工具？

> ID：11943516
> 
> 赞同：2
> 
> 时间：2012-08-13T23:05:27.823
> 
> 标签：ruby-on-rails, user-interface

我正在尝试为 Web 应用程序（Ruby on Rails）设计 UI。我需要一个像 Dreamweaver 这样的 gui 工具，但它是免费的。谁能推荐一个用于 ruby​​ on rails 应用程序的 GUI 拖放工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:15:43.083

你想要的不存在。只需花点时间学习一点 Ruby，然后再学习 Rails。一旦你知道发生了什么，你就不需要 GUI IDE。我是一名前 Flash ActionScript 人，“必须”有一个 GUI IDE 才能做任何事情。现在，它的 Sublime Text 2 和 Git 一路走来。我喜欢它。我什至正在学习一些 Vim。

许多人喜欢带有 GUI 的 IDE 与 TextMate、Sublime Text 等的“空白”页面感觉……那只是因为他们不知道该怎么做。一旦你学习了一些 Ruby，然后 Rails 就可以了。

我说先学一点 Ruby，这样你在看 Rails 代码时就会知道发生了什么。如果您不了解一些 Ruby，您对 Rails 的感觉与使用“非”GUI IDE 的感觉相同，您会感到困惑。Pragmatic Studio 的 Ruby 课程和 Skillshare 的 One Month Rails 是两种很好且经济实惠的入门方式。

1.  学习 Ruby 基础 - [http://pragmaticstudio.com/ruby](http://pragmaticstudio.com/ruby)

2.  学习一些入门 Rails - [http://onemonthrails.com/](http://onemonthrails.com/)

3.  学习中级 Rails - [http://pragmaticstudio.com/rails](http://pragmaticstudio.com/rails)

这些课程的总费用不到 450.00 美元，可以在不到两个月的时间内完成。一旦您参加了这些课程并使用了 Sublime Text、TextMate、Vim 等……您将能够开始使用 Ruby 构建 GUI 和 Web 应用程序，并且可以很好地开始使用其他语言进行编程。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T02:39:21.660

请不要在 GUI 中设计。使用文本编辑器或 IDE，例如 sublimetext 2 或 Ruby Mine。除非你想让那个编辑器注入一堆无用的标记。

# javascript - 使用 Watir Webdriver 在 Firefox 中打开一个新选项卡

> ID：11943517
> 
> 赞同：0
> 
> 时间：2012-08-13T23:05:34.327
> 
> 标签：javascript, ruby, webdriver, watir

我正在尝试使用 Watir Webdriver 在 Firefox 中打开一个新选项卡（javascript 已打开）：

```
require 'rubygems'
require 'watir-webdriver'
browser = Watir::Browser.new :ff, :profile => "default" 
browser.goto "http://google.com"
browser.execute_script("window.open('http://yahoo.com','_newtab')") 
```

我按照此页面上的方法：以[编程方式在选项卡上打开新页面](https://stackoverflow.com/questions/427479/programmatically-open-new-pages-on-tabs) 但它会打开一个新窗口，而不是打开一个新选项卡。我该怎么做才能只打开一个新标签而不是一个新窗口？或者任何其他方法来打开一个新标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:11:07.417

I had the same issue, and I've struggled for a day until I found it's a known Selenium issue: [http://code.google.com/p/selenium/issues/detail?id=3380](http://code.google.com/p/selenium/issues/detail?id=3380)

Apparently, Selenium doesn't support opening links in a new tab, only a new window.

# c++ - 播种随机数生成器 C++

> ID：11943525
> 
> 赞同：7
> 
> 时间：2012-08-13T23:06:36.373
> 
> 标签：c++, random

~~我有两个问题。~~

 ~~1.  还有哪些其他方法可以在不使用 C++ 的情况下播种伪随机数生成器`srand(time(NULL))`？

2.  我问第一个问题的原因。我目前使用时间作为生成器的种子，但生成器返回的数字始终相同。我很确定原因是因为存储时间的变量在某种程度上被截断了。（我有一条警告消息说，“隐式转换失去整数精度：'time_t'（又名'long'）到'unsigned int'）我猜这告诉我，从本质上讲，我的种子直到明年才会改变发生。就我的目的而言，使用时间作为我的种子就可以了，但我不知道如何摆脱这个警告。~~ 

~~我以前从未收到过该错误消息，所以我认为它与我的 Mac 有关。它是 64 位 OS X v10.8。我也在使用 Xcode 编写和编译，但我在其他使用 Xcode 的计算机上没有问题。~~

编辑：在玩弄和研究更多之后，我发现了 64 位 Mac 存在的一个错误。（如果我弄错了，请纠正我。）如果您尝试让您的 mac 选择 1 到 7 之间的随机数`time(NULL)`作为种子，您将始终得到数字 4。总是。我最终`mach_absolute_time()`用来播种我的随机发生器。显然，这消除了我程序的所有可移植性......但我只是一个业余爱好者。

编辑2：源代码：

```
#include <iostream>
#include <time.h>

using namespace std;

int main(int argc, const char * argv[]) {

srand(time(NULL));

cout << rand() % 7 + 1;

return 0;
} 
```

我再次运行此代码进行测试。现在它只返回 3。这一定与我的计算机有关，而不是 C++ 本身。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T23:08:07.047

Tl; 博士但是，很可能，你做错了。你应该只设置一次种子，而你可能有类似的东西：

```
for ( ... )
{
   srand(time(NULL));
   whatever = rand();
} 
```

什么时候应该

```
srand(time(NULL));
for ( ... )
{
   whatever = rand();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T00:18:52.293

1.不是真的。例如，您可以要求用户输入随机种子。或者使用其他一些系统参数，但这不会有什么不同。

2.要消除此警告，您必须进行显式转换。像：

```
unsigned int time_ui = unsigned int( time(NULL) );
srand( time_ui ); 
```

或者

```
unsigned int time_ui = static_cast<unsigned int>( time(NULL) ); 
```

或者

```
unsigned int time_ui = static_cast<unsigned int>( time(NULL)%1000 ); 
```

要检查这是否真的是转换问题，您可以简单地在屏幕上输出您的时间并查看自己

```
std::cout << time(NULL); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-14T00:05:07.703

您应该在程序开始时看到 random 一次：

```
int main()
{
    // When testing you probably want your code to be deterministic
    // Thus don't see random and you will get the same set of results each time
    // This will allow you to use unit tests on code that use rand().
    #if !defined(TESTING)
    srand(time(NULL));  // Never call again
    #endif

    // Your code here.

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-13T20:55:32.243

对于 x86，可以使用直接调用 CPU 时间戳计数器`rdtsc`，而不是库函数 TIME(NULL)。下面 1) 读取时间戳 2) 汇编中的种子 RAND：

```
rdtsc
mov edi, eax
call    srand 
```

对于 C++，以下将使用 g++ 编译器完成工作。

```
asm("rdtsc\n"
    "mov edi, eax\n"
    "call   srand"); 
```

注意：但如果代码在虚拟机中运行，则可能不推荐使用。

# google-fusion-tables - 避免在单元格中截断文本

> ID：11943529
> 
> 赞同：0
> 
> 时间：2012-08-13T23:06:52.520
> 
> 标签：google-fusion-tables

我的融合表包含由于文本大小限制而呈现难以辨认的文本列：

```
Bartonella effector protein (Bep), substrate of Vi… 
```

调整列大小对截断没有影响。有没有办法增加显示文本的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:33:41.970

新外观在行布局中也有 50 个字符的限制，但如果您使用卡片布局，那么您一次可以看到一条记录而不会被截断。

杆

# c# - 如何从 MEF 中的基础结构库中导出类？

> ID：11943542
> 
> 赞同：0
> 
> 时间：2012-08-13T23:08:08.227
> 
> 标签：c#, module, export, prism, mef

我有一个项目，其中包含两个模块，一个基础设施（`Common`库）和`Shell`.

![在此处输入图像描述](../Images/138ea624d4ef4f497f5ae03b833719c2.png)

注意`Common`有一个`FooService`，这个有一个`ExportAttribute`

```
[Export]
public class FooService
{
} 
```

这个应该由`Module1`and使用`Module2`，但是如果我有`ImportAttribute`. 请注意评论。

```
[ModuleExport("Module1.ModuleInit", typeof(Module1.ModuleInit))]
public class ModuleInit : IModule
{
    private readonly IRegionManager _regionManager;
    public IServiceLocator _serviceLocator;

    // [Import(AllowRecomposition=true)]
    public FooService _service;

    [ImportingConstructor]
    public ModuleInit(IRegionManager regionManager, IServiceLocator serviceLocator)
    {
        _regionManager = regionManager;
        _serviceLocator = serviceLocator;
    }

    public void Initialize() { }
} 
```

此代码与`Module2`.

> 初始化模块“Module2.ModuleInit”时发生异常。- 异常消息是：组成保持不变。由于以下错误，更改被拒绝： 合成产生了单个合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1) 找到多个与约束匹配的导出 '((exportDefinition.ContractName == "Common.FooService") AndAlso (exportDefinition.Metadata.ContainsKey("ExportTypeIdentity") AndAlso "Common.FooService".Equals(exportDefinition.Metadata .get_Item("ExportTypeIdentity"))))'。
> 
> 导致：无法在部件 'Module1.ModuleInit' 上设置导入 'Module1.ModuleInit._service (ContractName="Common.FooService")'。元素：Module1.ModuleInit._service (ContractName="Common.FooService") --> Module1.ModuleInit --> AssemblyCatalog (Assembly="Module1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")

为什么我会收到此异常？我只是导出一个对象。我想知道发生了什么以及如何解决它。

请随意下载它，这是一个非常小的项目。 [下载压缩项目](http://sdrv.ms/Nec7BX)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:58:09.940

这应该只是一个评论，但我还没有足够的代表来做这件事。无论如何，在我看来，这像是一个范围界定问题。我相信 MEF v1 应该自动将导出视为单例，但我认为它在 v2 中被颠倒了 - 不确定您使用的是哪个版本。我最近在使用 Microsoft.Composition（用于 MVC 的 MEF）时遇到了一个问题，并通过使用 HTTP 请求级别范围来获取整个请求生命周期的单个实例来解决它。

```
[System.Composition.Export(typeof(ICustomDbContext))]
[System.Composition.Shared(Boundaries.HttpRequest)]
public class CustomDbContext : ICustomDbContext { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:47:42.597

**解决办法：**你把*除了*Shell Project之外的每个项目都翻一遍，看看引用；请执行下列操作：

*   只需删除 unityextension 引用，因为您使用的是 MEF
*   将“通用”引用属性“复制本地”设置为 False
*   将“Microsoft.Practices.Prism”引用属性“复制本地”设置为 False
*   将“Microsoft.Practices.Prism.MefExtensions”引用属性“复制本地”设置为 False
*   将“Microsoft.Practices.Prism.ServiceLocation”引用属性“复制本地”设置为 False
*   将“System.ComponentModel.Composition”引用属性“复制本地”设置为 False

转到 Bootstrapper 类，添加以下内容：

```
protected override void ConfigureAggregateCatalog()
        {
            base.ConfigureAggregateCatalog();

            // Add this assembly to the catalog.
            this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Bootstrapper).Assembly));

            // Add the FooService assembly
            this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(FooService).Assembly));
        } 
```

然后取消注释模块中的 [Import(AllowRecomposition)] 和 FooService。

在运行项目之前，您需要转到 Visual Studio 菜单，选择 Build -> Clean Project。这将删除之前复制本地的所有 dll 文件。

# android - 如何为选定的列表项设置背景样式？

> ID：11943545
> 
> 赞同：1
> 
> 时间：2012-08-13T23:08:41.537
> 
> 标签：android

我在使用自定义适配器和列表项 xml 布局定义 ListView 时遇到问题。问题是我的 ListView 在按下时没有突出显示项目。我正在执行以下操作：

我定义了一个可绘制的选择器 xml 资源文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:drawable="@android:color/holo_orange_light" />
    <item android:state_pressed="false" android:drawable="@android:color/white" />
</selector> 
```

我定义了一个项目布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="@drawable/btn_voice_item" 
     >

    <ImageButton
        android:id="@+id/voiceItemFavorite"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_centerVertical="true"
        android:layout_margin="5dp"
        android:background="@drawable/btn_favorite" />

    <TextView
        android:id="@+id/voiceItemText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_margin="5dp"
        android:layout_toRightOf="@+id/voiceItemFavorite"
        android:background="@drawable/btn_voice_item" />

</RelativeLayout> 
```

最后我在我的自定义数据适配器中编写了代码来膨胀和填充然后查看。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater inflater = context.getLayoutInflater();
        convertView = inflater.inflate(R.layout.voice_item, null);
    }
    VoiceItem i = getItem(position);
    TextView t = (TextView) convertView.findViewById(R.id.voiceItemText);
    t.setText(i.toString());
    ImageButton b = (ImageButton) convertView.findViewById(R.id.voiceItemFavorite);
    b.setTag(i);
    b.setSelected(i.favorite);
    b.setOnClickListener(new FavoriteClick());
    return convertView;
} 
```

一切正常，除非我按下列表中的项目时没有视觉指示。我希望按下项目的背景颜色过渡到我的可绘制选择器定义的样式。

如何在按下时同时拥有自定义视图项目并保留项目的样式突出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:11:36.450

如果`android:background="@drawable/btn_voice_item"`是实心图像，那么它将覆盖`ListView`选择器。`ListView selector`这是关于自定义和项目背景 的非常详细的教程[ListViewTipsandTricks part3](http://android.cyrilmottier.com/?p=454) (Cyril Mottier)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:19:13.813

这是我使用的 xml。请注意，这是渐变。但把它放在你的@android:color/holo_orange_light

```
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient
  android:startColor="#18d7e5"
  android:centerColor="#16cedb"
  android:endColor="#09adb9"
  android:angle="270" />
</shape> 
```

这是我的选择器：

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
 android:state_selected="false"
    android:state_pressed="false"
    android:drawable="@drawable/gradient_bg" />

<item android:state_pressed="true"
    android:drawable="@drawable/gradient_bg_hover" />

<item android:state_selected="true"
 android:state_pressed="false"
    android:drawable="@drawable/gradient_bg_hover" />
 </selector> 
```

这就是我在列表 xml 文件中的内容：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/list_selector"
android:orientation="horizontal"
android:padding="5dip" > 
```

也许您觉得这很有用并且可以解决您的问题

# c++ - 在递归循环中有条件地修改引用的内存

> ID：11943546
> 
> 赞同：0
> 
> 时间：2012-08-13T23:08:44.390
> 
> 标签：c++, visual-studio-2008, recursion, pass-by-reference

我有两个结构和一个函数

```
struct nodeT {
bool last;
string attribute1;
string attribute2;
string attribute3;
vector<charT> leafs;
};

struct charT {
char character;
nodeT *next;
};

void addNode(nodeT *n, string stringy, string &attribute1, string &attribute2, string &attribute3)
{
   if (stringy=="") {
      w->last=true;
      return;
   } else {
      if (n->last==true) {
          attribute1=n->attribute1; //these attribute fields were given values earlier
          attribute2=n->attribute2;
          attribute3=n->attribute3;
      }
      addNode(n, stringy.substr(1), attribute);
   }
} 
```

并被`addNode`称为

```
string test="";
addNode(root, "wordy", test, test, test); 
```

问题是属性引用`string &attribute`没有更改为 5，它继续使用该`""`值进行下一次调用。

我试着让它成为一个指针引用`*attribute->n->attribute` 并绑定一个引用`&attribute = n->attribute` 这些是在黑暗中拍摄的，没有用。

编辑：`addNode`应该用单独的内存引用调用。

```
string test1="";
string test2="";
string test3="";
addNode(root, "wordy", test1, test2, test3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:24:52.033

您是否尝试过`attribute`在构造函数中进行初始化？

```
struct nodeT {
   bool last;
   string attribute;
   vector<charT> leafs;
   nodeT() : attribute("5") {}
 }; 
```

您的代码看起来有点，但并不完全，不像 Java... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:45:14.357

函数声明和函数调用的 args 数量不匹配，并且函数 dosnt 具有变量 arg。它也不应该清除编译障碍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:47:12.440

贡献者的回答帮助我找到了答案，但他们的回答与问题略有不同。

对于设置，函数使用结构`nodeT`，`charT` 并且被调用，等效于

```
 root is defined globally in the class
   string wordy = "hello";
   string test="";
   addNode(root, "wordy", test, test, test); 
```

`addNode`应该使用单独的内存引用来调用。

```
string test1="";
string test2="";
string test3="";
addNode(root, "wordy", test1, test2, test3); 
```

因此，稍后当属性 1、2 和 3 更改为唯一值时，每个属性都有一个对应的唯一内存。

# php - PHPs ZipArchive 删除空目录

> ID：11943553
> 
> 赞同：1
> 
> 时间：2012-08-13T23:09:36.400
> 
> 标签：php, file, zip, ziparchive

# 问题

我正在构建一个在线文件管理器，用于下载整个目录结构，我正在生成所有子目录和文件的 zip 文件（递归），因此我使用`RecursiveDirectoryIterator`. 这一切都很好，但空目录不在生成的 zip 文件中，尽管 dir 处理正确。这是我目前正在使用的：

```
<?php
    $dirlist = new RecursiveDirectoryIterator($path, FilesystemIterator::SKIP_DOTS);
    $filelist = new RecursiveIteratorIterator($dirlist, RecursiveIteratorIterator::SELF_FIRST);
    $zip = new ZipArchive();
    if ($zip->open($tmpName, ZipArchive::CREATE) !== TRUE) {
        die();
    }
    foreach ($filelist as $key=>$value) {
        $result = false;
        if (is_dir($key)) {
            $result = $zip->addEmptyDir($key);
            //this message is correctly generated!
            DeWorx_Logger::debug('added dir '.$key .'('.$this->clearRelativePath($key).')');
        }
        else {
            $result = $zip->addFile($key, $key);
        }
    }
    $zip->close(); 
```

如果我省略了，`FilesystemIterator::SKIP_DOTS`我最终会在所有目录中都有一个`.` **文件。**

# 结论

迭代器工作，`addEmptyDir`调用被正确执行（结果也被检查！），使用各种 zip 工具创建一个 zip 文件，使用空目录作为意图。这是 phps 中的错误`ZipArchive`（[php.net](http://www.php.net/manual/en/class.ziparchive.php) lib 还是我遗漏了什么？我不想最终创建虚拟文件只是为了保持目录结构完整。

# javascript - 在 Node.js 之外使用 require()

> ID：11943554
> 
> 赞同：2
> 
> 时间：2012-08-13T23:09:59.960
> 
> 标签：javascript, node.js, express, angularjs

我正在尝试让 Angular.js 应用程序与 Node.js 一起工作。

目前我在文件中有以下代码`MY-PROJECT/public/js/controllers.js`

```
function LoginController( $scope )
{
  // fetch waiters
  var Waiter = require( '../models/waiter.js' );
}
LoginController.$inject = ['$scope']; 
```

如您所见，我使用 require() 来访问模型文件。但似乎在此文件/文件夹中无法访问 require() 函数。

当我访问该页面时，我在控制台中遇到的错误是：

> ReferenceError：未定义要求

错误的原因肯定是因为我直接在我的 HTML 文件中包含了这个 controllers.js 文件和脚本标签（所以 Node.js 中的 require() 函数不可用）。

现在我的问题是：如何访问`MY-PROJECT/models/waiter.js`controllers.js 文件中的模型文件（例如 from ）？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:16:36.123

[RequireJS](http://requirejs.org/)看起来有你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:22:12.480

我做错了。因为我正在制作一个“*实时应用程序*”（这是正确的名称吗？）并使用**Socket.io**，所以它的工作方式不同。

在客户端控制器中，我向服务器发送一条消息以请求数据。服务器获取数据并将其发送回客户端。

所以在客户端我实际上不需要模型，因为我从服务器获取 JSON 格式的数据。

这就是我解决它的方法，可能对其他人有用：

```
/**
* Login controller
*/
function LoginController( $scope, socket )
{    
    // listen to server when it sends you the cats
    socket.on( 'here-are-all-the-cats', function ( cats )
    {
        $scope.cats = cats;
    });

    // send message to the server, to request the waiters
    socket.emit( 'i-want-all-the-cats' );
}
WaiterController.$inject = [ '$scope', 'socket' ]; 
```

注意：我使用“cats”而不是“waiters”，只是为了让其他人更清楚。

# iphone - 本地通知触发时更改图标徽章编号

> ID：11943555
> 
> 赞同：1
> 
> 时间：2012-08-13T23:10:09.460
> 
> 标签：iphone, ios, uilocalnotification

每次触发本地通知以通知用户他还需要回答一个问题时，我都需要增加图标徽章编号。当用户回答任何已发送通知的问题时，图标徽章编号正在减少 1。我只有一次性通知，没有重复。

由于通知触发时应用程序未运行，因此我不知道当时如何增加图标徽章编号。虽然在用户回答问题时减少数字没有问题 - 因为这是在应用程序内完成的。

有没有可能 - 可能类似于`registerForRemoteNotificationTypes`推送通知？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:18:23.117

该类`UILocalNotification`具有`applicationIconBadgeNumber`type的属性`NSInteger`，您可以在安排本地通知时设置该属性。

# php - PHP表单值提交查询

> ID：11943556
> 
> 赞同：1
> 
> 时间：2012-08-13T23:10:17.060
> 
> 标签：php

我希望这是一件我想念或做得不好的简单事情。

它涉及从表单上的 1 个提交按钮发布两个结果。

无需发送大量代码，关键在于：（这是表格中的一系列提交按钮）

```
<td><input type=\"hidden\" name=\"query\" value=\"$query1\"><input type=\"submit\"       name=\"Submitano\" value='$aa'></td>
<td><input type=\"hidden\" name=\"query\" value=\"$query2\"><input type=\"submit\"  name=\"Submitano\" value='$ab'></td>
<td><input type=\"hidden\" name=\"query\" value=\"$query3\"><input type=\"submit\" name=\"Submitano\" value='$ac'></td> 
```

然后在我使用的另一个结果页面上：

```
$s1=$_POST['Submitano'].$_POST['query']; 
```

问题是当我单击相关的提交按钮时，它会通过选择的正确 POST ['Submitano']（即 $aa 或 $ac），但它总是通过最后一个查询 - $query3 而不是查询附在提交中。（即 $aa 应该通过 $query1，但它通过 $query3）

我怀疑这与我单击提交时有关，它提交的是 ['Submitano'] 而不是 ['query']，所以下一页只是选择最后输入的查询。如果是这样，谁能建议我如何通过 1 次提交发布两位数据（一位隐藏，一位可见）？

希望这是有道理的。

谢谢

保罗

* * *

感谢所有的评论。这就是我想要做的，但也许我应该以完全不同的方式来做？

屏幕 1 – 3 – 用户在每个页面上选择一个传递给屏幕 4 的变量。

屏幕 4 – 上述 3 个变量被读取并输入 25 个预设的 Mysql 查询并运行（即查询 1、查询 2 等），但每个查询的元素略有不同，因此产生 25 个不同的答案。

这 25 个查询的结果存储在 25 个变量 $aa、$ab 等中。

设置了一个表单来显示这 25 个查询的结果，每个答案都显示在一个提交按钮中。（即在我编码'Value=$aa'的地方，用户可以看到该查询的答案，即'73'，然后单击它）。

（用户基本上需要在前3页根据自己的选择看到25个不同的答案，然后再选择自己想了解的答案。）

第 5 页 - 此页面需要知道用户单击了哪个按钮，但更重要的是他们选择了哪个查询，但我的问题是它只提供值，而不是生成该值的前面的查询。

关于以不同的方式命名每一个，我试过了，但问题是如何在第 5 页上找到它。我认为我需要 25 个预设的 $_POST？问题在于它不喜欢其他 24 个未使用的 $_POST。我什至尝试将它们放在 elseif 循环中，但没有任何乐趣。

但是，答案是否存在于这个解决方案中？

另外，有几个人建议使用阵列，但由于我对阵列不太感兴趣，我不确定他们将如何解决问题？

如果数组是答案，那么有关设置的更多信息或更具体地说，我如何在第 5 页上提取正确的信息会很棒吗？

再次感谢。

保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:14:14.773

他们不应该有相同的名字。由于它们的形式相同，因此最后一个值会覆盖其他值。

如果您只有这六个项目，您还可以将它们包装成三种不同的形式以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:57:04.507

您应该以数组的形式命名您的元素：

```
<input type="text" name="query[]" value="whatever" /> 
```

提交按钮的情况与下一页使用相同索引的情况相同。

**编辑：**如果您的要求是从多个屏幕收集数据，我建议您使用`$_SESSION`变量。[http://php.net/manual/en/book.session.php](http://php.net/manual/en/book.session.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:16:35.913

名称应该是唯一的。由于您所有的隐藏输入都被命名为“查询”，因此只有最后一个被提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T23:21:01.900

您的表单项具有相同的名称。这将意味着它们的值有效地“覆盖”彼此。根据浏览器，第一个或最后一个值将被发布到您的页面。

要修复它，您可以：

1）给他们不同的名字。

```
<input type=\"submit\" name=\"Submitano1\" value='$aa'>
<input type=\"submit\" name=\"Submitano2\" value='$aa'>
<input type=\"submit\" name=\"Submitano3\" value='$aa'> 
```

2) 将它们命名为数组。

```
<input type=\"submit\" name=\"Submitano[]\" value='$aa'>
<input type=\"submit\" name=\"Submitano[]\" value='$aa'>
<input type=\"submit\" name=\"Submitano[]\" value='$aa'> 
```

第二个选项将允许您访问 $_POST['Submitano'][0] （以及 1 和 2），这会将所有 Submitano 项目放入一个数组中。如果您使用大量这些物品，则第二种方法会更有帮助。

如果需要，有关您正在做什么的更多信息将有助于提供更具体的建议。

# mysql - Rails：检索 LONGBLOB 对象作为其原始类型

> ID：11943557
> 
> 赞同：0
> 
> 时间：2012-08-13T23:10:29.910
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我将 Feed 类型的对象作为 longblob 存储到我的 mysql 数据库中，并且想知道如何在不属于 String 类型的情况下检索它。

有没有办法在我忽略的 ruby​​/rails 中进行类型转换？

我假设这是发生的事情，因为我得到“未定义的方法`条目'#

一些背景，以防我做了一些愚蠢的事情......

我的迁移：

```
class AddFeedDataToFeeds < ActiveRecord::Migration
  def change
    add_column :feeds, :feed_data, :longblob
  end
end

class FillFeedData < ActiveRecord::Migration
  def up

    Feed.all.each do |f|
      f.update_attribute(:feed_data, Feedzirra::Feed.fetch_and_parse(f.feed_url))
    end

  end 
```

在我的阅读器控制器中：

```
next_feed = Feed.find(session[:unread_random].pop)
    @feed = next_feed 
```

在阅读器中：

```
<% unless @feed.is_a? Fixnum #protect against bad feed URLs: 404, 503 etc...
    @feed.entries.each do |entry| %>
    <div class="entry">
        <h1><%= entry.title %></h1> 
```

等等... 错误出现在最后一个代码段的第二行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:56:28.740

这是解决方案：

我意识到，当 Rails 将 Feedzirra AtomFeedBurner 或 RSSFeedBurner（或 Feedzirra 的任何解析器）存储到 longblob 列时，它会将其存储为文本而不是二进制。

我尝试了几件事，Base64 的 encode64 只接受字符串，所以没有用。

事实证明，您需要使用 Marshal.dump 和 Marshal.load 将对象序列化和反序列化到 blob 字段中/从 blob 字段中取出，以保护原始对象的完整性。

这对我来说现在很好。最终我确信我需要一个更优化的解决方案。

还发现要进行类型转换，您可以使用 .becomes() 但这不是一个好主意。

# ruby - Ruby RSpec 单元测试给出未定义的方法错误

> ID：11943564
> 
> 赞同：0
> 
> 时间：2012-08-13T23:11:41.920
> 
> 标签：ruby, unit-testing, rspec

我使用 RSpec 创建了一个单元测试。

app.rb 有：

```
module AppModule
  class App
    def get_item
      str = self.get_string
      puts "in get_item - #{str}"
    end

    def get_string
      puts "hello, world"
    end
  end
end 
```

app_test.rb 有：

```
require 'test_helper'
require 'env'

describe App do
  before :each do
    @var = App.new
  end

  describe "firsttest" do
    it "should print string" do
      @var.get_item
    end
  end
end 
```

我发现 get_item 被正确调用。但是当它到达 get_string 时，我得到一个错误：

#App:0x2eaqc4600 的未定义方法 get_string

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:32:33.057

看起来像一个命名空间问题。我不了解您的环境，但您确定 @var 是 AppModule::App 的实例而不仅仅是 ::App 吗？

# jquery - 未捕获的错误：语法错误，无法识别的表达式：234

> ID：11943566
> 
> 赞同：1
> 
> 时间：2012-08-13T23:12:02.233
> 
> 标签：jquery

我想运行一个帖子，从服务器返回一些数据。我从 Chrome 控制台报告中收到了该区域。现在，234 是我想要返回的，我假设 ajax_file.php 确实有效，因为它返回了 234，但我收到了错误。我的代码有什么问题？

```
<script type="text/javascript">

$('#button_id').click(function() {
    var search_term = $('#search_term').val();
    $.post('ajax_file.php', {search_term: search_term}, function (data) {
        $(data).appendTo('#div_tag');
    });
});

</script>           

<div id="div_tag"></div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T23:17:10.793

由于您传递`data`给`jQuery`，因此它被解释为**选择器**，并且该值`234`是无效的选择器。

不要将响应传递给`jQuery`，而是反转操作数并使用[`.append` *^([docs])*](http://api.jquery.com/append/)：

```
$('#div_tag').append(data); 
```

* * *

尽管可以[将 HTML 字符串传递给`jQuery`](http://api.jquery.com/jQuery/#jQuery2)，但您的字符串不包含任何 HTML（标签），因此 jQuery 不知道您希望它被这样解释。

# javascript - 如何使 html 选择选项在 Meteor 中工作？

> ID：11943569
> 
> 赞同：3
> 
> 时间：2012-08-13T23:12:12.063
> 
> 标签：javascript, meteor

我无法让 HTML 选择选项按照我认为应该在 Meteor 中工作的方式工作。

下面是一个示例，说明它如何与名为 Country 的集合的按钮一起使用。

模板

```
{{#each get_countries}}
  <button class="btn btnCountryTest">{{iso3}} - {{name}} </button><br />
{{/each}} 
```

客户端事件处理程序

```
'click .btnCountryTest': function(event){
   console.log('clicked .btnCountryTest this._id: ' + this._id);
} 
```

产生正确的输出，例如。

```
clicked .btnCountryTest this._id: 39cd432c-66fa-48de-908b-93a874323e2e 
```

现在，我想要做的是在从 HTML 选择选项下拉列表中选择项目时触发其他页面活动。我知道我可以将 ID 放在选项值中，然后使用 Jquery 等...我认为它可以与 Meteor “一起工作”，但我不知道该怎么做。

这是我正在尝试的，但它不起作用。

模板

```
<select class="input-xlarge country" id="country" name="country">
  {{#each get_countries}}
    <option value="{{iso3}}">{{name}}</option>
  {{/each}}
</select> 
```

处理程序

```
'click #country': function (event) { 
  console.log('Template.users_insert.events click .country this._id: ' + this._id);
 } 
```

哪个生产

```
Template.users_insert.events click .country this._id: undefined 
```

显然不是我所期望的。在我诉诸 Jquery 表单处理之前，有人有什么想法吗？

谢谢斯蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:32:57.107

在 Meteor 中，`each`助手调用`Meteor.ui.listChunk`（请查看 packages/template/deftemplate.js），它将当前变量视为`this`上下文。

换句话说，它是 中的全局上下文`click #country`，并且您只能`this._id`在`each`块下访问，就像在`click #country option`事件中一样。

我认为您可以将数据放在 HTML 数据属性中，并使用 jQuery 访问它。像这样 -

模板

```
<select class="input-xlarge country" id="country" name="country">
  {{#each get_countries}}
    <option value="{{iso3}}" data-id={{_id}}>{{name}}</option>
  {{/each}}
</select> 
```

处理

```
'click #country': function (event) { 
  console.log('Template.users_insert.events click .country this._id: ' + $(event.currentTarget).find(':selected').data("id"));
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-19T00:31:34.637

如果您尝试访问数据上下文，则需要让事件处理程序访问`template`参数，并使用它的`data`对象。那是顶级数据上下文。

```
'click #country': function (event, template) { 
    console.log('Template.users_insert.events click .country _id: ' + template.data._id);
} 
```

应该管用。这是我能找到的最好的文档：http: [//docs.meteor.com/#template_data](http://docs.meteor.com/#template_data)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-13T13:39:52.107

@StevenCannon，我遇到了类似的问题，并在这里找到了解决方案 - [http://www.tutorialspoint.com/meteor/meteor_forms.htm](http://www.tutorialspoint.com/meteor/meteor_forms.htm)。@DenisBrat 是正确的，请侦听更改事件而不是单击事件。

这是为您修改的解决方案：

```
'change select'(event) {
    // Prevent default browser form submit
    event.preventDefault();

    var selectedCountry = event.target.value;

    console.log('Template.users_insert.events change select iso3: ' + selectedCountry);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-10T20:25:39.693

您正在监听选择的“点击”事件。您真的很想订阅“更改”事件。当您单击 html 元素时会发生“单击”。另一方面，从列表中选择一个值后会触发“更改”事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T03:49:40.047

也许你也可以看看'packages/liveui/liveui.js'。有一个`findEventData`函数，它给出回调`this`对象。

# winapi - 如何在特定功能上通过 /EHsc 获得 /EHa 的好处？

> ID：11943570
> 
> 赞同：-1
> 
> 时间：2012-08-13T23:12:25.503
> 
> 标签：winapi, visual-c++, seh, structured-exception

如果我知道`extern "C"`我的程序中的特定函数（例如，`RaiseException`）是引发 SEH 异常的唯一函数，并且我希望它们转换为 C++ 异常，那么我有什么方法可以“选择性地启用”`/EHa`该函数，以便异常被转换为`CStructured_Exception`没有膨胀或减慢程序的其余部分，[通常是由`/EHa`](http://msdn.microsoft.com/en-us/library/1deeycx5.aspx)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:49:52.887

显然没有编译器选项可以做到这一点。也许：

```
void RaiseException() {
   __try {
      // do something that might throw here...
   }

   __except(EXCEPTION_EXECUTE_HANDLER) {   
      throw std::exception("structured exception");
   }
} 
```

# google-apps-script - 如何使用当前日期预填充 createDateBox() 或日期选择器字段？

> ID：11943575
> 
> 赞同：0
> 
> 时间：2012-08-13T23:13:11.447
> 
> 标签：google-apps-script

我在带有日期字段（日期选择器）的 Google 网站页面上创建了一个 Ui。有没有办法用当前日期预先填充它？其次，有没有办法将年份与选择的日期分开？这是我到目前为止的代码：

```
 //Create elements for vPanel_01
    var labelDate = app.createLabel("Date of event:");
    var textBoxDate = app.createDateBox().setName("date").setStyleAttribute("color", "#a7a7a7"); 
```

我想从输入中分离出年份，以便我可以在脚本中进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:59:29.370

> 有没有办法用当前日期预先填充它？

以下代码执行所需。

```
var now = new Date();
var labelDate = app.createLabel("Date of event:");
var textBoxDate = app.createDateBox().setName("date").setStyleAttribute("color", "#a7a7a7").setValue(now); 
```

> 有没有办法将年份与选择的日期分开？

请通过写作说明您期望拥有`isolating the year from the date picked`什么？您需要提取日期的年份吗？如果是，则以下操作。

```
function doGet(e) {
  var app = UiApp.createApplication();
  var now = new Date();
  app.add(app.createLabel('Current Year: ' + now.getFullYear()));
  return app;
} 
```

从日期框中提取年份的代码。

```
function doGet(e) {
  var app = UiApp.createApplication();
  var now = new Date();
  var dateBox = app.createDateBox().setName('datebox').setValue(now);
  var label = app.createLabel(now).setId('label');
  var handler = app.createServerHandler('onBtnClick');
  handler.addCallbackElement(dateBox);
  var btn = app.createButton('Click Me').addClickHandler(handler);
  app.add(dateBox);
  app.add(label);
  app.add(btn);
  return app;
}

function onBtnClick(e) {
  var selectedDate = new Date(e.parameter.datebox);
  var year = selectedDate.getFullYear();
  var app = UiApp.getActiveApplication();
  var label = app.getElementById('label');
  label.setText('Selected Date: ' + selectedDate + ', Year: ' + year);
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:06:11.353

根据您的评论：如果我保留兆字节1024 的示例，您应该向文本框添加一个处理程序（或向验证输入的按钮帽添加一个处理程序），并向该处理程序添加一个 callBackElement，然后在处理程序函数中您可以使用类似这样的内容：

```
var dateObject = new Date(e.parameter.date); // 'date' is the name of the datepicker 
```

当您拥有此日期对象时，您可以从中获取任何您想要的内容，例如：

```
var fullyear = dateObject.getFullYear(); // will return full year in 4 digits 
```

[请参阅有关日期对象的文档](http://www.w3schools.com/jsref/jsref_obj_date.asp)

你也可能对[这个例子](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dE1rMnFLUUE0cmtGSmx2UVZ4djgzS2c)感兴趣。

# r - 程序 R：如何创建循环以根据级别处理部分数据集？

> ID：11943584
> 
> 赞同：0
> 
> 时间：2012-08-13T23:14:42.603
> 
> 标签：r, loops, batch-processing

我有这样列出的数据集：

.

```
data <- structure(list(group = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L), .Label = c("I", "II", "III"), class = "factor"), 
    time = c(1L, 1L, 1L, 2L, 2L, 3L, 1L, 1L, 1L, 2L, 2L, 1L, 
    2L, 2L, 2L), species = structure(c(1L, 2L, 3L, 2L, 4L, 1L, 
    3L, 2L, 1L, 3L, 4L, 1L, 1L, 3L, 4L), .Label = c("a", "b", 
    "c", "d"), class = "factor")), .Names = c("group", "time", 
"species"), class = "data.frame", row.names = c(NA, -15L))
head(data)

##     group time species
## 1     I    1       a
## 2     I    1       b
## 3     I    1       c
## 4     I    2       b
## 5     I    2       d
## 6     I    3       a 
```

我正在为在同一时间块中同时出现的物种创建共现表。此处示例的代码为 I 组中的物种创建了一个共现表：

```
data2=subset(data,data$group=="I")    
X =table(data2$species,data2$time)    
X <- as.matrix(X)    
out <- X %*% t(X)

write.table(out,"coocurrence_groupI.txt",sep="\t") 
```

我的原始数据集实际上有很多组；对每一个进行子集化，然后创建一个 .txt 文件似乎太多余了。我的问题是如何创建一个循环函数，自动为每个组（示例中的 I、II 和 III）创建共现表，然后为每个组编写不同的 .txt 文件？

我在互联网上搜索并没有找到任何接近的东西，除了 sapply （我不完全确定这是正确的操作）。也许我没有找对地方。任何帮助将不胜感激。

克克罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:28:03.220

我偏爱`split` `apply`解决这类问题的方法，尽管正如 mnel 指出的那样，还有其他选择。

我会将您的矩阵事物转换为一个函数，然后按组拆分数据并将该函数应用于每个组，如下所示：

```
#your data renamed dat (data is an R function so avoid using that as a name
dat <- structure(list(group = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L), .Label = c("I", "II", "III"), class = "factor"), 
    time = c(1L, 1L, 1L, 2L, 2L, 3L, 1L, 1L, 1L, 2L, 2L, 1L, 
    2L, 2L, 2L), species = structure(c(1L, 2L, 3L, 2L, 4L, 1L, 
    3L, 2L, 1L, 3L, 4L, 1L, 1L, 3L, 4L), .Label = c("a", "b", 
    "c", "d"), class = "factor")), .Names = c("group", "time", 
"species"), class = "data.frame", row.names = c("1", "2", "3", 
"4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15"
))

#your processing turned into a function
FUN <- function(DATA) {
    X <- table(DATA[, 2],DATA[, 1])    
    X <- as.matrix(X)    
    X %*% t(X)
}

#the split lapply method
X <- split(dat[, 2:3], dat[, 1])    
lapply(X, FUN) 
```

**这产生：**

```
$I

    a b c d
  a 2 1 1 0
  b 1 2 1 1
  c 1 1 1 0
  d 0 1 0 1

$II

    a b c d
  a 1 1 1 0
  b 1 1 1 0
  c 1 1 2 1
  d 0 0 1 1

$III

    a b c d
  a 2 0 1 1
  b 0 0 0 0
  c 1 0 1 1
  d 1 0 1 1 
```

**编辑：**我很抱歉我错过了你想把每一个都写到一个文件中。我这样做了，但您可能想考虑使用上述函数的输出的`save`or函数，而不是编写多个 txt 文件：`saveRDS`

```
v <- split(dat[, 2:3], dat[, 1])    
Output <- lapply(seq_along(v), function(i) {
        X <- table(v[[i]][, 2], v[[i]][, 1])    
        X <- as.matrix(X)    
        z <- X %*% t(X)
        write.table(z, paste0("coocurrence_group", names(v)[i], ".txt"),sep="\t")
        return(z)
    }
)

names(Output) <- names(v)
Output 
```

# android - 通过滚动同步 2 个 ListView

> ID：11943587
> 
> 赞同：5
> 
> 时间：2012-08-13T23:15:08.940
> 
> 标签：android, listview, scroll, android-listview

> **可能重复：**
> [如何](https://stackoverflow.com/questions/11906263/how-to-syncronisize-two-listview-positions)
> [在滚动时同步两个列表视图位置同步 2 个列表视图](https://stackoverflow.com/questions/11909196/sync-2-listviews-while-scrolling)

我有两个`ListViews`。当我滚动任何一个列表时，有什么办法可以`synchronize`定位。`ListViews`我正在实施一个`AbsListView.OnScrollListener`，注册到`ListView`.

当`ListView`滚动时，将触发的`onScroll()`方法，然后我调用. 但它不能正常工作。`OnScrollListener``smoothScrollToPosition()`

有人可以为此提供任何代码示例吗？...我只想滚动一个`ListView`，而另一个`ListView`同步移动。如果您想知道我为什么使用 2`ListView`是因为我正在尝试制作我自己的复合控件，该控件的行为类似于`DataGridView`带有固定列和标题的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:04:47.320

尝试类似的东西

```
if( this.getScrollY() != otherList.getScrollY() )
    otherList.setScrollY( this.getScrollY() ); 
```

在 onScrollListener 的 onScroll 方法中。上面的很粗略。

# sql - 从 SSIS 包中，我应该如何执行作为 varchar(max) 存储在表中的 sql 脚本？

> ID：11943588
> 
> 赞同：2
> 
> 时间：2012-08-13T23:15:17.880
> 
> 标签：sql, ssis

我将大型 ( `varchar(max)`) SQL 脚本存储在表中。我想在 SSIS 包中执行脚本。

查看此站点上的其他帖子很容易`varchar(max)`进入对象变量。但是接下来该怎么办？有没有办法让执行 Sql 任务（变量的 SQLSourceType）指定对象变量而不是字符串变量？

有没有可行的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:36:24.747

以下是我可能会采用的方法：

1.  将数据流任务添加到您的控制流
    *   添加连接到数据库的源 (ADO.NET)
    *   创建一个包级对象变量（用于下一步）
    *   添加将数据填充到上一步中创建的 Object 变量中的 Recordset 目标
2.  回到控制流：
    *   为“当前”查询创建一个包级字符串变量（参见下一步）
    *   添加 For Each ADO.NET 枚举器
        *   将上一个数据流任务连接到 For Each 任务
        *   将 For Each 配置为使用 Object 变量作为源，并将列索引与 SQL 一起存储到 String 变量中
    *   在 For Each 任务中添加一个执行 SQL 任务
        *   将其配置为从变量执行 SQL 命令，并选择包含当前查询的字符串变量

基本上它会从表中收集查询，然后对于每个收集的查询，将其分配给一个变量，然后执行 SQL 命令可以从该变量中提取命令文本。

# ms-access - 基于其他 2 个选项的下拉列表

> ID：11943589
> 
> 赞同：0
> 
> 时间：2012-08-13T23:15:35.367
> 
> 标签：ms-access, drop-down-menu

我正在设置一个表格供学生选择课程选项。

我有我的桌子，tblOptions，

我想使用 3 个字段；块、期间、选项名称。

我的“块”是一个文本，期间和选项名称都是下拉菜单。

有没有办法让我的选项名称下拉列表只返回输入到我的选项表格中的块和期间的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:27:43.007

好吧，让我试一试……您希望“选项名称”下拉框仅返回与表单上的“块”和“期间”相关的结果。如果我假设您的表单 - frmClassOption 具有文本框 txtClassBlock 和下拉菜单drpClassPeriod 和drpClassOptionName。您可以将 drpClassOptionName 的记录集值设置为：

```
=SELECT [Option Name] from [tblOptions] WHERE [Block] = [frmClassOption].[txtClassBlock] AND [Period] = [frmClassOption].[drpClassPeriod] 
```

我的语法可能让我有点笨拙，但它应该是这样的。基本上，您告诉它只为您提供与您的 SELECT 查询匹配的下拉列表选项，该查询将您以前的输入作为条件。

-- 编辑于 2012 年 8 月 13 日 @ 1842 小时 --

既然我知道它是一个连续的表格 - 它引出了一个问题，你能否提供一个更好的细节来说明你是如何设置表格的？这是输入块和期间的父表单的子表单，块和期间是否输入在同一个表单上，这是独立的，还是它们的某种组合？可能有助于缩小您的答案。

# php - 跟踪大型代码库中的内存泄漏

> ID：11943590
> 
> 赞同：1
> 
> 时间：2012-08-13T23:15:40.983
> 
> 标签：php, codeigniter, memory-leaks, xhprof

[对于使用CodeIgniter](http://CodeIgniter.com)构建的应用程序，我有一个相对较大的 PHP 代码库（数千行）。为了能够跟踪性能问题并能够生成统计数据等，开发服务器运行[Xhprof](http://se2.php.net/Xhprof)。如果脚本实际上进入了日志记录部分，这可以正常工作。

但是，我现在遇到了脚本超时的情况。在开发服务器上，**它只是给出超时**（“未找到服务器”）错误，有时甚至会导致 Apache 进程崩溃。不生成 Xhprof 文件，CodeIgniter 日志系统不生成任何内容。错误报告已启用。

在实时环境（好吧，实时服务器的镜像）上，应用程序实际上会生成一个错误：

> 致命错误：第 493 行 /home/www/application/system/database/drivers/mysql/mysql_driver.php 中允许的内存大小为 33554432 字节已用尽（尝试分配 261900 字节）

这一点，以及如何重现错误的线索，让我有点预感从哪里开始寻找解决方案。但这是一项耗时的工作。

**我正在寻找一种能够追踪实际“内存泄漏”发生位置的方法。而不是逐行手动调试。非常感谢任何建议。**

**更新：服务器内存不足不是问题。**在具有更多内存的开发服务器上，也会出现同样的问题。问题是一个无限循环，分配了更多的内存，然后我的服务器可以处理。问题仍然存在：如何快速追踪这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:46:36.540

使用[xdebug](http://xdebug.org/)。与 xhprof 不同，**使用 xdebug 进行分析会在脚本运行时产生输出，**这意味着即使脚本挂起或超时，您也可以剖析到该点生成的跟踪。

另请参阅[使用 xdebug 进行分析以](http://xdebug.org/docs/profiler)开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T23:31:55.447

打算保留统计信息的程序的一个常见问题是保留指向它们所接触的所有内容的指针，这会阻止内存管理回收它们。如果不是这种情况，这可能不是泄漏，它可能只是一个失控的分配。您可能只有少数几个地方可以这样做。一个好的开始是用您自己的函数替换对分配内存块的系统函数的直接调用，然后检测这些函数，寻找意外的大数组分配。

按照现代标准，引用的限制（32mb）并不是很大。除了过程有不合理的下限之外，很可能没有任何问题。

# python - 使用 memcached 根据版本使缓存无效

> ID：11943591
> 
> 赞同：0
> 
> 时间：2012-08-13T23:15:47.693
> 
> 标签：python, django, memcached

使用 Django 和 Memcached，我有一系列我想失效的缓存。我一直将它们全部保存为唯一的版本号，以便使它们无效。但是，按照 Django 站点的指示，我得到一个 ValueError。

我的版本号看起来像：20991791。所以一般来说是整数。

如何使版本 20991791 中的所有 memcache 密钥无效？

仅供参考，设置如下：

```
>>> cache.set('laugh',2,version=3) 
```

通过只知道版本号“3”，我需要删除版本号 3 中的所有键。我以为 incr_version 这样做了，但是当我尝试时，它给出了一个 valueerror。

```
>>> cache.incr_version(3)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/opt/virtual-envs/govini-web/lib/python2.6/site-packages/django/core/cache/backends/base.py", line 214, in incr_version
    raise ValueError("Key '%s' not found" % key)
ValueError: Key '3' not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:44:03.153

There is no good way to do this. There is a one of possible solution in [memcached FAQ](https://stackoverflow.com/questions/1595904/memcache-and-wildcards).

Also you can use cache backend with patterns support, [django-redis](https://github.com/niwibe/django-redis#extra-methods-added-by-django-redis) for example, and delete with pattern `"{KEY_PREFIX}:{VERSION}:*"`

# javascript - jQuery bxSlider 和 jQuery-ui 选项卡

> ID：11943592
> 
> 赞同：0
> 
> 时间：2012-08-13T23:15:54.197
> 
> 标签：javascript, jquery, jquery-ui, jquery-tabs, bxslider

我将 jQuery-ui 用于它的选项卡功能，并且还使用 bxSlider 仅在第一个选项卡中滑动图像/内容。但是，当我单击第二个选项卡时，bxSlider 的“prev”和“next”选项仍在我的容器中。我尝试使用`event.stopPropagation()`,`event.preventDefault()`并`stop()`停止该功能，在意识到这些不起作用后，我尝试创建这样的功能：

```
(function() {
    $('#ab').click(function() {
        $('#showcase').bxSlider({
            controls: false,
        });
    });
}); 
```

其中 '#ab' 是选项卡，#showcase 是图像所在的列表元素。此功能不会完全阻止 bxSlider 处于活动状态，它只会隐藏控件。然而，这也不起作用。

有谁知道如何做到这一点？

这是我的 HTML：

```
<div class="container">
    <div id="tabs">
        <ul>
            <li><a id="sh" href="#showcase">Resumes</a></li>
            <li><a id="ab" href="#about">About</a></li>
        </ul>

        <div id="showcase_container">
            <ul id="showcase">
                <li>
                    <a href="resume-purchase.php"><img src="images/resume-temp1.jpg"></a>
                    <a href="resume-purchase.php"><img src="images/resume-temp2.jpg"></a>
                    <a href="resume-purchase.php"><img src="images/resume-temp3.jpg"></a>
                </li>

                <li>
                    <a href="#"><img src="images/resume-temp1.jpg"></a>
                    <a href="#"><img src="images/resume-temp2.jpg"></a>
                    <a href="#"><img src="images/resume-temp3.jpg"></a>
                </li>
            </ul>

            <div id="about">
                <span class="ab_title">Portfolio</span>
                    <ul id="portfolio_list">
                        <li class="item">
                            <a class="caption" name="resume1" href="#">
                                <img src="images/ty-headshot.jpg">
                                <span>
                                    <big>Portfolio Title</big>
                                    Quick Description of Portfolio Item
                                </span>
                            </a>
                        </li>
                        <li class="item">
                            <a class="caption" name="resume1" href="#">
                                <img src="images/ty-headshot.jpg">
                                <span>
                                    <big>Portfolio Title</big>
                                    Quick Description of Portfolio Item
                                </span>
                            </a>
                        </li>
                        <li class="item">
                            <a class="caption" name="resume1" href="#">
                                <img src="images/ty-headshot.jpg">
                                <span>
                                    <big>Portfolio Title</big>
                                    Quick Description of Portfolio Item
                                </span>
                            </a>
                        </li>
                    </ul>
            </div>

        </div>
    </div>
</div> 
```

这是我的 JavaScript：

```
 //initialize tabs
$(document).ready(function() {
    $('#tabs').tabs();
});

//initialize slider
$(document).ready(function(){
    $('#showcase').bxSlider({
        hideControlOnEnd: true,
        infiniteLoop: false,
    });
}); 
```

任何帮助将不胜感激！如果无法做到这一点，有人可以将我重定向到类似的图像/内容滑块，以便我可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:57:08.887

将用于滑块的 ul 标记包装在另一个 div（称为 ShowcaseTab）或其他任何内容中。然后 bxslider 将包含在该选项卡中，并且箭头应该以正确的方式显示和隐藏。

```
<div id="showcaseTab">
 <ul id="showcase">
            <li>
                <a href="resume-purchase.php"><img src="images/resume-temp1.jpg"></a>
                <a href="resume-purchase.php"><img src="images/resume-temp2.jpg"></a>
                <a href="resume-purchase.php"><img src="images/resume-temp3.jpg"></a>
            </li>

            <li>
                <a href="#"><img src="images/resume-temp1.jpg"></a>
                <a href="#"><img src="images/resume-temp2.jpg"></a>
                <a href="#"><img src="images/resume-temp3.jpg"></a>
            </li>
  </ul>
 </div> 
```

# android - 我如何在 android 模拟器中运行普通的语音识别应用程序？

> ID：11943593
> 
> 赞同：0
> 
> 时间：2012-08-13T23:15:53.617
> 
> 标签：android, android-emulator, speech-recognition

我如何在 android 模拟器中运行普通的语音识别应用程序？这个应用程序只是将语音转换为文本。当我尝试在我的 android 模拟器中运行此应用程序时，它会给出“识别器不存在”错误消息。我阅读了几个博客和论坛，但找不到任何合适的解决方案。这个问题让我很痛苦。我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:52:43.837

您无法在模拟器中录制声音，因为 android 模拟器尚不支持它。此代码只能在手机上使用

# sql-server-2005 - 非封闭式报价

> ID：11943597
> 
> 赞同：0
> 
> 时间：2012-08-13T23:16:15.670
> 
> 标签：sql-server-2005, stored-procedures

我正在尝试从我的复选框列表中提取选定的值，但我一直在 sql 中遇到错误。

错误

```
Msg 105, Level 15, State 1, Line 22
Unclosed quotation mark after the character string ')'.
Msg 102, Level 15, State 1, Line 22
Incorrect syntax near ')'. 
```

SP

```
@DEPTCODE INT,
@COA VARCHAR(50),
@MAP VARCHAR(10)
AS
BEGIN
SET NOCOUNT ON;
DECLARE @SQL VARCHAR(MAX);

BEGIN
SET @SQL = N'SELECT 
              A.GL_EXCEPT_ID AS ''GL ID''
            , A.COA_SYSTEM AS ''Account Type''
            , A.ENTN AS ''Entity''
            , A.MED_CTR AS ''Medical Center''
            , (''['' + A.LOCN + ''] '' + B.LOCN_DESC) AS ''Location Code''
            , (''['' + A.CTRN + ''] '' + C.CTRN_DESC) AS ''Cost Center''
            , (''['' + RTRIM(A.FUND) + ''] '' + A.FUND_DESC) AS ''Fund''
            , A.ROLLUP_TYPE_ID AS ''Rollup ID''
            , A.ROLLUP_TYPE_DESC AS ''Rollup Type''
            , A.MAPPING AS ''Mapping''
FROM V_ROLLUP_GL_DESC_REV1 A
    LEFT JOIN T_ROLLUP_GL_LOCN B
        ON A.LOCN = B.LOCN
            AND A.MED_CTR_ID = B.MED_CTR_ID
            AND A.COA_SYSTEM = B.COA_SYSTEM
    LEFT JOIN T_ROLLUP_GL_CTRN C
        ON A.CTRN = C.CTRN
            AND A.COA_SYSTEM = C.COA_SYSTEM
WHERE (A.DEPT_ID = '+CONVERT(VARCHAR,@DEPTCODE)+')
        AND A.COA_SYSTEM IN ('+@COA+')
        AND A.MAPPING IN ('+@MAP+''')'
PRINT(@SQL)
EXEC(@SQL)
END
END 
```

询问

```
USE [Rollup2]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[USP_GET_GL_BY_DEPT]
    @DEPTCODE = 1000,
    @COA = N'''COA'',''COA_SYSTEM''',
    @MAP = N'''DEFAULT'',''EXCEPTION'''

SELECT  'Return Value' = @return_value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:27:26.777

您的部分问题是：

```
@MAP VARCHAR(10) 
```

但是您传递的值要长得多：

```
@MAP = N'''DEFAULT'',''EXCEPTION''' 
```

将长度增加到：

```
@MAP VARCHAR(50) 
```

第二个问题是这一行，单引号太多：

```
AND A.MAPPING IN ('+@MAP+''')' 
```

将其更改为：

```
AND A.MAPPING IN ('+@MAP+')' 
```

# java - 双色文本

> ID：11943598
> 
> 赞同：2
> 
> 时间：2012-08-13T23:16:29.390
> 
> 标签：java, android

我有包含 textview 的应用程序，我想知道我是否可以用双色显示文本，

通过以下代码可以轻松实现更改文本颜色：

```
android:textColor="#B22222" 
```

但我需要实现的是：

**两种不同颜色的文字**

或者

**在其他颜色内填充颜色的文本**

如下图示例：

![在此处输入图像描述](../Images/ce44afdf5230e10a9f5184c09d446dba.png)

所以我可以将其应用于 textview 内的整个文本或部分文本。

我在网上搜索了任何示例，但我找不到，

任何建议将不胜感激，谢谢

**更新：**

我在文本 XML 中使用了阴影，它给出了我正在寻找的东西的近似形状，但不像以前的图像那样精确的双色，

我的影子代码：

```
 <TextView   
 android:layout_width="wrap_content" 
 android:layout_height="wrap_content" 
 android:text="hi"  
 android:textStyle="bold"  
 android:textSize="150dp"  
 android:typeface="sans"  
 android:textColor="#0000ff"  
 android:shadowColor="#B22222"   
 android:shadowRadius="2.0"  
 android:shadowDy="10.0" 
 android:shadowDx="10.0"         /> 
<TextView    
 android:layout_width="wrap_content" 
 android:layout_height="wrap_content"   
 android:text="hi"     
 android:textStyle="bold"  
 android:textSize="150dp" 
 android:typeface="sans" 
 android:textColor="#0000ff"  
 android:shadowColor="#B22222"  
 android:shadowRadius="25.0"         /> 
```

**输出结果如下图：**

![在此处输入图像描述](../Images/15f262fcee0a406d1758dbfba789b2cb.png)

在第一张图片中获得相同形状的文字的任何想法，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T23:20:54.690

您可能可以使用[shadowColor](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ashadowColor)、[shadowDx](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ashadowDx)、[shadowDy](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ashadowDy)和[shadowRadius](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ashadowRadius)来实现与第一个示例非常相似的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:26:24.680

我可以举一些有用的例子。如果您可以参考此示例来制作您自己的颜色并为您的文本应用阴影。示例是[Text Shadows](http://blog.stylingandroid.com/archives/378#)和[TextView](http://developer.android.com/reference/android/widget/TextView.html)。请参考此链接并制作自己的颜色和阴影。这个答案对你很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:19:44.103

它为我找到了白色和红色两种颜色。

```
TextView textPaint = (TextView) findViewById(R.id.share_button);
        textPaint.getPaint().setShadowLayer(2, 5, 5, Color.RED); 
```

# javascript - 根据 URL 中的哈希移动 HTML

> ID：11943602
> 
> 赞同：1
> 
> 时间：2012-08-13T23:16:40.510
> 
> 标签：javascript, jquery, html

当用户访问页面时我想要做什么，url中的锚点将决定顶部显示的内容。这应该在客户端完成，而不是在服务器端。

例如，假设我有 HTML：

```
<div id='menuitems'>
  <div id='appetizer'>HTML here</div>
  <div id='maincourse'>HTML here</div>
  <div id='dessert'>HTML here</div>
</div> 
```

所以我想要的是当用户访问这个页面时：

`mypage.html#dessert`

而不是通常的锚文本行为，我想使用 jquery 之类的东西将甜点文本移动到顶部。所以用户看到的 HTML 是这样的：

```
<div id='menuitems'>
  <div id='dessert'>HTML here</div>
  <div id='appetizer'>HTML here</div>
  <div id='maincourse'>HTML here</div>
</div> 
```

或者：`mypage.html#maincourse`

```
<div id='menuitems'>
  <div id='maincourse'>HTML here</div>
  <div id='appetizer'>HTML here</div>
  <div id='dessert'>HTML here</div>
</div> 
```

如果没有锚或它无法识别，那么就什么也不做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T23:20:53.147

怎么样

```
$(document).ready(){
    $('#menuitems > ' +location.hash).prependTo('#menuitems');
}); 
```

[http://api.jquery.com/prependTo/](http://api.jquery.com/prependTo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:24:21.247

```
$(function() { 
    $(window.location.hash).prependTo('#menuitems') 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T01:27:08.840

您不想替换所有链接属性。您可以这样做（使用 Jquery）：

```
$('a[href^="#"]').on('click', function(){
    window.location.hash = $(this).attr('href');
    return false;
}); 
```

# java - 无法找出 ArrayIndexOutOfBoundsException: 6 > 1 的含义？排序jtable时

> ID：11943604
> 
> 赞同：2
> 
> 时间：2012-08-13T23:16:43.673
> 
> 标签：java, swing, jtable, tablemodel, tablerowsorter

我无法在我的 jtable 排序机制中找出问题，当我在搜索代码中实现排序时，它会让我的数组索引超出范围，填充表代码在初始阶段工作正常，但在搜索发生后它也卡住了。

我的应用程序有一个文本字段区域，它接受从数据库中搜索的关键字。现在搜索后，它显示在 jtable 上，我想为此提供表排序器。任何帮助表示赞赏。谢谢。我还提供了下面的堆栈跟踪。

//问题代码

```
// for searching data from data base and display it in table
// according to the keyword typed.

private void jTextField1KeyPressed(java.awt.event.KeyEvent evt) {                                       

    System.out.println(evt.getKeyCode());

    if(evt.getKeyCode() == KeyEvent.VK_ENTER){
    jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null}
            },
            new String [] {
                "cust_ID", "Title 2", "Title 3"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
    jTable1.removeColumn(jTable1.getColumnModel().getColumn(0));
    String query = "SELECT emp_id, emp_name, emp_address FROM employee WHERE emp_name LIKE '"+jTextField1.getText()+"%' ";
    ArrayList<String> s = new ArrayList<String>();
    try{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection con = DriverManager.getConnection("jdbc:odbc:EazySource");
    Statement psmt = con.createStatement();
    //smt.setChar(1,"a");
    int rows = jTable1.getRowCount();
    ResultSet result = psmt.executeQuery(query);
    int i = 0;
    DefaultTableModel model = null;
    while(result.next()){

        jTable1.getModel().setValueAt(Integer.toString(result.getInt("emp_id")), i, 0);
        jTable1.setValueAt(result.getString("emp_name"), i, 0);
        jTable1.setValueAt(result.getString("emp_address"), i, 1);

        model = (DefaultTableModel)jTable1.getModel();
        model.insertRow(jTable1.getRowCount(), new Object[]{null, null, null, null, null});
        String s1 = jTable1.getModel().getValueAt(i, 0).toString();
        System.out.println("id: "+s1);
        i++;
    }
    model.removeRow(i);
    TableRowSorter<TableModel> sorter 
                    = new TableRowSorter<TableModel>(jTable1.getModel());
    jTable1.setRowSorter(sorter);
    for(String val:s){
        jTextField1.setText(val);

    }
    con.close();
    }catch(Exception e){
        System.out.println(e);
        e.printStackTrace();

    }
    }
}                                      
//initially populating table when app starts
public void populatetable(){
    jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null}
            },
            new String [] {
                "cust_ID", "Title 2", "Title 3"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
    jTable1.removeColumn(jTable1.getColumnModel().getColumn(0));
    String query = "SELECT emp_id, emp_name, emp_address FROM employee ";
    ArrayList<String> s = new ArrayList<String>();
    try{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection con = DriverManager.getConnection("jdbc:odbc:EazySource");
    Statement psmt = con.createStatement();
    //smt.setChar(1,"a");
    int rows = jTable1.getRowCount();
    ResultSet result = psmt.executeQuery(query);
    int i = 0;
    DefaultTableModel model = null;
    while(result.next()){

        jTable1.getModel().setValueAt(Integer.toString(result.getInt("emp_id")), i, 0);
        jTable1.setValueAt(result.getString("emp_name"), i, 0);
        jTable1.setValueAt(result.getString("emp_address"), i, 1);

        model = (DefaultTableModel)jTable1.getModel();
        model.insertRow(jTable1.getRowCount(), new Object[]{null, null, null, null, null});
        String s1 = jTable1.getModel().getValueAt(i, 0).toString();
        System.out.println("id: "+s1);
        i++;
    }
    model.removeRow(i);
    TableRowSorter<TableModel> sorter 
                    = new TableRowSorter<TableModel>(jTable1.getModel());
    jTable1.setRowSorter(sorter);
    for(String val:s){
        jTextField1.setText(val);

    }
    con.close();
    }catch(Exception e){
        System.out.println(e);
        e.printStackTrace();

    }

} 
```

我的堆栈跟踪，不知道 6>1 在这里意味着什么

```
java.lang.ArrayIndexOutOfBoundsException: 6 > 1
    at java.util.Vector.insertElementAt(Vector.java:594)
    at javax.swing.table.DefaultTableModel.insertRow(DefaultTableModel.java:374)
    at javax.swing.table.DefaultTableModel.insertRow(DefaultTableModel.java:389)
    at javanotepad.NewJFrame.jTextField1KeyPressed(NewJFrame.java:174)
    at javanotepad.NewJFrame.access$000(NewJFrame.java:29)
    at javanotepad.NewJFrame$2.keyPressed(NewJFrame.java:82)
    at java.awt.Component.processKeyEvent(Component.java:6463)
    at javax.swing.JComponent.processKeyEvent(JComponent.java:2829)
    at java.awt.Component.processEvent(Component.java:6282)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1890)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:752)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1017)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:889)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:717)
    at java.awt.Component.dispatchEventImpl(Component.java:4731)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 1 >= 1
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:649)
    at javax.swing.JTable.getValueAt(JTable.java:2720)
    at javax.swing.JTable.prepareRenderer(JTable.java:5718)
    at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
8
8
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 2 >= 1
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:649)
    at javax.swing.JTable.getValueAt(JTable.java:2720)
    at javax.swing.JTable.prepareRenderer(JTable.java:5718)
    at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 2 >= 1
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:649)
    at javax.swing.JTable.getValueAt(JTable.java:2720)
    at javax.swing.JTable.prepareRenderer(JTable.java:5718)
    at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 2 >= 1
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:649)
    at javax.swing.JTable.getValueAt(JTable.java:2720)
    at javax.swing.JTable.prepareRenderer(JTable.java:5718)
    at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 2 >= 1
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:649)
    at javax.swing.JTable.getValueAt(JTable.java:2720)
    at javax.swing.JTable.prepareRenderer(JTable.java:5718)
    at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 4 >= 1
    at java.util.Vector.elementAt(Vector.java:470)
    at javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:649)
    at javax.swing.JTable.getValueAt(JTable.java:2720)
    at javax.swing.JTable.prepareRenderer(JTable.java:5718)
    at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T23:24:50.630

首先，请不要使用`KeyListeners`，如果您想要这种操作，请使用`ActionListener`- 有 100 多个原因，但现在，请相信我们 ;)

在更改模型之前尝试将排序器设置为 null

```
jTable1.setRowSorter(null); 
```

由于多个线程尝试更新模型不同步导致的突变事件，我通常遇到此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:13:09.947

挖一点（当我有时间和一些让我困惑的事情时，一如既往:-)

第一：@MadProgrammer 的答案是正确的——如果客户端代码负责保持排序器和模型本身同步，而不是将该负担委托给表。

承担负担的客户端代码：

```
TableModel model = .. //create some model;
table.setModel(model);
table.setRowSorter(new TableRowSorter(model));
// has to remove the rowSorter _before_ setting a new model
// because the old rowSorter still references the old model
table.setRowSorter(null);
TableModel newModel = ... // create some model ;
table.setModel(newModel);
table.setRowSorter(new TableRowSorter(newModel); 
```

让桌子照顾好：

```
table.setAutoCreateRowSorter();
TableModel model = .. //create some model;
table.setModel(model);
// nothing to fear, simply set the new
TableModel newModel = ... // create some model ;
table.setModel(newModel); 
```

顺便说一句：在 OP 的上下文中，无需重置模型 - 基本相同，只是数据不同。所以

```
// initially setting the model and rowSorter (in populate)
...
// in re-populating, instead of re-creating the same model 
//table.setModel(newModel);
// clear
((DefaultTableModel) table.getModel()).setRowCount(0);
...
// and - while we are at it - cleanup the logic 
while(result.next()) {
    Object[] rowData = {result.getInt("emp_id"), 
        result.getString("emp_name"), result.getString("emp_address")};
    ((DefaultTableModel) jTable1.getModel()).addRow(rowData);
} 
```

# c# - 每个 groupby 列表（或数组）的运行方法

> ID：11943606
> 
> 赞同：0
> 
> 时间：2012-08-13T23:17:19.437
> 
> 标签：c#, linq

我有一个包含特定“政策”图片的文件夹。每个策略可能包含任意数量的图片。该文件夹还可以包含任意数量的策略。

VAH007157100-pic1.jpg
VAH007157100-pic2.jpg
VAH007157100-pic3.jpg

WAZ009999200-pic1.jpg
WAZ009999200-pic2.jpg
WAZ009999200-pic3.jpg
WAZ009999200-pic4.jpg
...

对于每个策略组，我想运行一个方法 (CreateTiffFile())，该方法接受一个数组（该组中的文件）并执行某些操作。

在上面的示例中，该方法将运行两次（因为有 2 个不同的策略）。我也会有 2 个不同的数组。一个数组包含 VAH007157100 图片（在本例中为 3 张），另一个数组 (WAZ009999200) 包含 4 张图片。

我将如何在每个组数组上运行此方法？

如果我不够清楚，请告诉我。请记住，每项政策的政策数量和图片数量各不相同，因此我需要考虑到这一点。

为了获得更好的视野（基于上述数据）：

```
CreateTiffFile(array containing VAH007157100 pics);
CreateTiffFile(array containing WAZ009999200 pics); 
```

...

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:26:18.157

您可以执行以下操作：

```
IEnumerable<string[]> grouped = theFiles.GroupBy(filename => filename.Split('-')[0])).Select(g => g.ToArray());

foreach(var group in grouped)
    CreateTiffFile(group); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:26:35.217

假设您有一个名为的字符串列表（无论是数组还是其他集合）`files`：

```
var groups = files.GroupBy(s => s.Substring(0, s.IndexOf('-')));
foreach (var group in groups)
{
    CreateTiffFile(group.ToArray()); // ToArray() returns a string[] with the file names
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:31:54.510

```
string CalcGroup(string filename) { ... }
string CreateTiffFile(IEnumerable<string> filesInGroup) { ... }
//...
files.GroupBy(CalcGroup).ToList().ForEach(CreateTiffFile); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T23:30:22.617

解决方案接近于此：

```
// get the filenames somehow
string[] filenames = ...;

// split the filenames
char[] breaker = new char[]{ '-' };
var policies_and_numbers = filenames.Select(fname => fname.Split(breaker));
// item is an string[]: [0] is policy, [1] is filename

// group them by the policy
var grouped = policies_and_numbers.GroupBy(thearr => thearr[0]);

// ensure the grouped items are kept as arrays
var almostdone = grouped.Select(group => new KeyValuePair<string, string[]>(group.Key, group.ToArray());
// now, the item is KVP, key is the Policy, and the Value is the array of pics

foreach(var pair in almostdone)
    CreateTiffFile(pair.Key, pair.Value); // first arg = policyname, second = the array of "pic1.jpg", "pic2.jpg"... 
```

编辑：为了清晰起见，代码已经臃肿。您可以像其他海报显示的那样轻松地将其压缩为单行：)

# facebook - facebook api 和 fql qry 发布给我所有的朋友

> ID：11943607
> 
> 赞同：-3
> 
> 时间：2012-08-13T23:17:20.310
> 
> 标签：facebook, api, facebook-fql

我想通过应用程序发布我所有的朋友

当我输入这段代码时，它给我带来了一个错误

解析错误：语法错误，意外的 T_STRING，在第 19 行的 test111.php 中需要 ')'

谁能帮我？谢谢

```
 require "../settings.php";
    require '../src/facebook.php';
    require "../fbaccess.php";
    require "web_config.php";

    //user data from database
    $sql = mysql_query("SELECT user_id,user_access_token,user_access_token_expire FROM data_table");

    while ($data = mysql_fetch_array($sql)){
    $user_id = $data['user_id'];
    $accessToken = $data['user_access_token'];
    $accessTokenExpire = $data['user_access_token_expire'];
                $all_friends = $facebook->api(array('method' => 'fql.query', 'query' => 'SELECT uid FROM user WHERE (uid IN (SELECT uid2 FROM friend WHERE uid1=me()));

    try {
                $publishStream = $facebook->api("/$all_friends/feed", 'post', array(
                    'message' => ".",
                    'link'    => '',
                    'picture' => '',
                    'name'    => 'iOS Apps & Games',
                    'description'=> 'Checkout iOS apps and games from iThinkdiff.net. I found some of them are just awesome!'
                    )
                );
                //as $_GET['publish'] is set so remove it by redirecting user to the base url
            } catch (FacebookApiException $e) {
                error_log($e);
            }
    }
>? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:35:13.430

您需要`)`在开始的行末尾再添加一个`$all_friends=`

这里还有其他几个问题。试试这样的 PHP 语法检查器：[http ://www.piliapp.com/php-syntax-check/](http://www.piliapp.com/php-syntax-check/)

# android - 无法在 phonegap 中运行 hello world prog

> ID：11943610
> 
> 赞同：2
> 
> 时间：2012-08-13T23:18:11.487
> 
> 标签：android, iphone, cordova

我是phonegap的新手。所以我试图在phonegap附带的android模拟器中运行Hello world html文件。但我收到了这个错误

**应用程序错误出现网络错误。（file:///android_asset/www/index.html）**

我通过在 Eclipse 中单击使用浏览器运行来检查 HTML 文件，它运行良好。但是当它作为 Android 应用程序运行时，它会出错。在发布这个问题之前，我用谷歌搜索了解决方案，在那里我知道我们应该启用互联网许可，但它也已经完成，并且 LAN 也被禁用，正如本网站中的一些人所说的那样作为解决方案。而且我也知道它的Android SDK 的问题和每个 phonegap 用户都面临这个问题。这是真的吗？

我非常擅长 HTML、CSS 和 Javascript。所以我选择 phonegap。但现在我很伤心。

最后一个问题。如果我在 Phonegap 中使用 XCode for iPhone 会出现同样的问题吗？

问候德瓦拉茹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:46:06.070

也尝试添加此权限。

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T15:14:01.243

出现此网络错误的原因有多种，但我的猜测是您的 config.xml 正在寻找 index.html 并且您已将 html 页面命名为其他名称。

# css - 当鼠标悬停在 div 上时，如何更改 Html.Action 链接中链接的颜色？

> ID：11943612
> 
> 赞同：0
> 
> 时间：2012-08-13T23:18:44.333
> 
> 标签：css, asp.net-mvc-3, actionlink

我正在使用 MVC3。我有一张桌子和一个 Html.ActionLink 里面。我已经将文本装饰设置为无，但链接仍然是蓝色的。我更改了表格：悬停背景颜色和（文本的）颜色，当我将鼠标放在行上时，不是链接的文本变为白色，但链接仍为蓝色。如果我更改 a:hover，当我将鼠标放在链接上时，链接会变成白色，而不仅仅是在行上。

有没有办法用css做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:24:01.723

使用以下 CSS：

```
#yourTableId:hover a {
    color: #FFF;
} 
```

您也可以`#yourTableId`用 table 和/或`.yourTablesClass`根据 css 的使用位置替换；）

这也适用于子元素，例如：

```
#yourTableId div:hover a

#yourTableId tr:hover a 
```

所以一般来说，我们可以说你可以使用以下内容：

```
#yourTableId *:hover a 
```

其中 * 是标记名、类名或 id（不要忘记类和 id 前缀 -> .classname 和 #idname）

[这是一个jsfiddle示例](http://jsfiddle.net/nXSYX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:46:21.983

通常，当您将鼠标悬停在行上时覆盖所有锚点。

```
#tableid tr:hover a {
    /* Your Styles */
} 
```

但这不适用于所有 IE 浏览器，因此，请使用 JS 捕获事件并将样式应用于其中的锚点。

# iphone - 类之间如何交互

> ID：11943615
> 
> 赞同：0
> 
> 时间：2012-08-13T23:19:08.960
> 
> 标签：iphone, ios

关于如何在此处进行类之间交互的一个非常基本的问题：如何通过单击链接到另一个类（我的绘图类 - 以编程方式定义）？

谢谢！

编辑：我试图实施下面建议的解决方案，但我没有设法触发其他类的操作。我有两个类：主视图控制器和一个带有绘图代码的类。任何建议将不胜感激。谢谢！

```
//MainViewController.m
//This class has a xib and contains the graphic user interface

- (void)ImageHasChanged
{        
//do something on the GUI
}

//DrawView.m
//This class has no associated xib and contains the drawing code

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
 //I want to call ImageHasChanged from MainViewController.m here
 //How can I do this?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:39:08.083

Inter-class functionality is done simply by importing one class into the other, and calling an accessible method/instance variable on the import.

For the button IBAction example in your question:

**ClassA.m (This will be imported via its header):**

```
#import "ClassA.h"
@implementation ClassA

// This is a class-level function (indicated by the '+'). It can't contain
// any instance variables of ClassA though!
+(void)publicDrawingFunction:(NSString *)aVariable { 
    // Your method here...
}

// This is a instance-level function (indicated by the '-'). It can contain
// instance variables of ClassA, but it requires you to create an instance
// of ClassA in ClassB before you can use the function!
-(NSString *)privateDrawingFunction:(NSString *)aVariable {
    // Your method here...
}
@end 
```

**ClassB.m (This is your UI class that will call the other method):**

```
#import "ClassA.h"  // <---- THE IMPORTANT HEADER IMPORT!

@implementation ClassB

// The IBAction for handling a button click
-(IBAction)clickDrawButton:(id)sender {

    // Calling the class method is simple:
    [ClassA publicDrawingFunction:@"string to pass to function"];

    // Calling the instance method requires a class instance to be created first:
    ClassA *instanceOfClassA = [[ClassA alloc]init];
    NSString *result = [instanceOfClassA privateDrawingFunction:@"stringToPassAlong"];

    // If you no longer require the ClassA instance in this scope, release it (if not using ARC)! 
    [instanceOfClassA release];

}
@end 
```

Side note: If you're going to require ClassA a lot in ClassB, consider creating a class-wide instance of it in ClassB to re-use wherever it's required. Just don't forget to release it in dealloc (or maybe set it to `nil` in ARC) when you're finished with it!

Finally, please consider reading through the [Apple Docs on Objective-C classes](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163-CH1-SW2) (and indeed all other sections of the documentation relevant to what you're trying to achieve). It is a bit time-consuming, but very well invested in the long run into building your confidence as an Objective-C programmer!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:21:23.577

//正如你所说，必须首先创建一个 MainViewController 的实例

```
MainViewController *instanceOfMainViewController = [[MainViewController alloc]init];
[instanceOfMainViewController ImageHasChanged]; 
```

//感谢您的帮助安德！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:13:36.923

实际上，您可以使用@protocol(Delegate) 在两个类之间交互消息，这是标准方式或参考此文档 [http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources。 html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)了解更多

# qt - 当应用程序被要求退出时允许用户交互

> ID：11943619
> 
> 赞同：2
> 
> 时间：2012-08-13T23:19:28.980
> 
> 标签：qt, operating-system, signals, gnome, shutdown

我想编写一个 Qt 应用程序，其主要目的是警告用户在关闭计算机之前有一些事情要做。我认为这是可能的，因为许多应用程序在计算机即将关闭时要求用户在退出之前保存。我还希望用户能够中断关闭过程，就像那些应用程序允许用户说“取消”一样。

*有没有办法在 Qt 中做到这一点？*

如果没有，至少在 gnome 会话中如何做到这一点？（支持更多桌面环境会很好，但目前这个应用程序仅供我和我的朋友使用，我们都使用 gnome。）

我阅读了有关信号的信息`QCoreApplication::aboutToQuit()`，但文档说它不允许用户交互。我的应用程序不使用任何小部件（可能只是一个系统托盘图标），因此`QWidget::closeEvent`也没有任何用处。

处理适当的posix信号会有帮助吗？但据我所知，这样的信号处理程序可能只包含琐碎的语句，询问用户是否真正关闭并非易事。

如果有帮助，这里有一些细节： 当用户想要关闭计算机时，我的应用程序将检查存储库（他配置为监视）是否“干净”，即没有什么可以提交。如果有东西要提交，应用程序应该警告用户并让他选择忽略未提交的文件或中止关闭过程（以提交更改）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:33:11.657

您应该实现[会话处理](http://qt-project.org/doc/qt-4.8/session.html)。当操作系统关闭时，`QApplication::commitData()`调用，您可以要求会话管理器允许用户交互：

> 在此功能中，除非您请求经理明确许可，否则无法进行任何用户交互。

这里还有一个关于您的用例的[示例](http://qt-project.org/doc/qt-4.8/qsessionmanager.html#allowsInteraction)。

# batch-file - 批处理：回显到标准输出，无需回车换行

> ID：11943620
> 
> 赞同：3
> 
> 时间：2012-08-13T23:19:45.567
> 
> 标签：batch-file, return, line, feed

我认为这很简单，但显然不是。我见过的所有关于如何做到这一点的例子都是重定向到一个文件。我只需要回显到标准输出。

```
 @echo off
    set test = testText
    set test2 = MoreText
    echo %test%%test2% 
```

然后通过另一个批处理文件读入标准输出，最后它在 CR LF 上阻塞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:49:41.903

[TSCMD015 FAQ](http://www.netikka.net/tsneti/info/tscmd015.htm)中我最喜欢的方法是使用

```
@echo off
set test = testText
set test2 = MoreText
set /p="%test%%test2%"<nul 
```

# php - 用转义的 forien 字符截断字符串

> ID：11943622
> 
> 赞同：0
> 
> 时间：2012-08-13T23:20:42.283
> 
> 标签：php

我有以下功能来截断文本：

```
 /**
     * Removes HTML tags, crops to 255 symbols
     *
     * @param string $unformatted
     */
    public function formatShortDescr($unformatted) {
        if(strlen($unformatted)<1) return;

        $long_text = strip_tags(trim($unformatted));
        $max_length = 255;

        if(strlen($long_text) > $max_length){
            $short_text = (substr($long_text,0,$max_length));
        } else {
            $short_text = $long_text;
        }
        return $short_text;
    } 
```

例如： `<p>Victory har utvecklats f&ouml;r att passa den &auml;gare som beh&ouml;ver en kompakt, ........`转换为：`Victory har utvecklats f&ouml;r att passa den &a`

如何将其设置为从不通过破坏 html 实体中途切断字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:27:15.043

应该很容易首先将实体转换为普通字符，然后使用 mb_strlen （因为 2 字节字符，UTF8）检查长度和 mb_substring 截断然后将实体转换回来......

```
 $long_text = strip_tags(trim($unformatted));
    $long_text = html_entity_decode($long_text);

    $long_text = mb_strlen($long_text) > $max_length ? mb_substr($long_text, 0, $max_length) : $long_text;

    return htmlentities($long_text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:31:18.963

有时合适的另一种方法是在最后一个空格处截断。这取决于您是否想要正好 255 个字符，或者您是否想要可读的东西，但一个有用的副作用是您不必担心 HTML 实体。

例如：

```
$string = "this is the long test string to test with";
$limit = 20;

$result = substr($string, 0, strrpos($string, " ", -$limit)-1);
echo $result; // "this is the long" 
```

# java - 在 textarea 中显示 xml 而不呈现 htmlentities

> ID：11943629
> 
> 赞同：0
> 
> 时间：2012-08-13T23:21:34.710
> 
> 标签：java, jsp, jstl, html-entities

我已经阅读了一段时间，但找不到解决方案。这看起来像我需要的解决方案： [How to stop html textarea from interpreting html entity into their characters](https://stackoverflow.com/questions/3636956/how-to-stop-html-textarea-from-interpreting-html-entities-into-their-characters)

但是当我这样做时，我只是进入了文本区域。是什么赋予了？

这是我第一次尝试使用 jstl。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:23:21.433

使用 jquery 的`text()`方法并将其分配给文本区域。

# java - 无法从空堆栈中弹出操作数

> ID：11943630
> 
> 赞同：0
> 
> 时间：2012-08-13T23:21:49.447
> 
> 标签：java, java-bytecode-asm, bytecode-manipulation

使用 ASM 4。我正在从另一种语言动态生成字节码。它正在生成以下内容，但我不清楚发生了什么。我的猜测是 try/catch 块正在干扰堆栈。前两行正在加载一个 Lambda2，然后它需要在最后成为堆栈中最深的项目，但我不明白是什么让它一路消失。

似乎在指令 13 处堆栈消失了。这就是它进入 try/catch 块的地方。堆栈进入 try/catch 块时是否会被丢弃？如果是这样，那将解释问题。

```
java.lang.RuntimeException: Error at instruction 43: Cannot pop operand off an empty stack. apply()Ljava/lang/Object;
00000 R . .  :  :    L0
00001 R . .  :  :     LINENUMBER 1 L0
00002 R . .  :  :     LDC "foo"
00003 R . .  : R  :     INVOKESTATIC com/stralos/asm/ASMUtil.getUserFunc (Ljava/lang/Object;)Ljava/lang/Object;
00004 R . .  : R  :    L1
00005 R . .  : R  :     LINENUMBER 1 L1
00006 R . .  : R  :     CHECKCAST com/stralos/lang/Lambda2
00007 R . .  : R  :    L2
00008 R . .  : R  :     LINENUMBER 1 L2
00009 R . .  : R  :     LDC 1
00010 R . .  : R J  :     INVOKESTATIC java/lang/Long.valueOf (J)Ljava/lang/Long;
00011 R . .  : R R  :    L3
00012 R . .  : R R  :     LINENUMBER 1 L3
00013 ?        :     LDC 1
00014 ?        :     INVOKESTATIC java/lang/Long.valueOf (J)Ljava/lang/Long;
00015 ?        :    L4
00016 ?        :     LINENUMBER 1 L4
00017 ?        :     ASTORE 1
00018 ?        :    L5
00019 ?        :     GOTO L6
00020 R . .  : R  :    L7
00021 R . .  : R  :     LINENUMBER 1 L7
00022 R . .  : R  :    FRAME SAME1 java/lang/Throwable
00023 R . .  : R  :     ASTORE 2
00024 R . R  :  :    L8
00025 R . R  :  :     LINENUMBER 1 L8
00026 R . R  :  :     NEW shen/lambda/ToRun$1
00027 R . R  : R  :     DUP
00028 R . R  : R R  :    L9
00029 R . R  : R R  :     LINENUMBER 1 L9
00030 R . R  : R R  :     INVOKESPECIAL shen/lambda/ToRun$1.<init> ()V
00031 R . R  : R  :    L10
00032 R . R  : R  :     LINENUMBER 1 L10
00033 R . R  : R  :     CHECKCAST com/stralos/lang/Lambda1
00034 R . R  : R  :     ALOAD 2
00035 R . R  : R R  :     INVOKEVIRTUAL com/stralos/lang/Lambda1.apply (Ljava/lang/Object;)Ljava/lang/Object;
00036 R . R  : R  :     ASTORE 1
00037 R R R  :  :    L6
00038 R R R  :  :     LINENUMBER 1 L6
00039 R R R  :  :    FRAME FULL [shen/eval/ToEvaluate$0 java/lang/Object] [com/stralos/lang/Lambda2 java/lang/Long]
00040 R R R  :  :     ALOAD 1
00041 R R R  : R  :    L11
00042 R R R  : R  :     LINENUMBER 1 L11
00043 R R R  : R  :     INVOKEVIRTUAL com/stralos/lang/Lambda2.apply (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
00044 ?        :     ARETURN
00045 ?        :    L12
     TRYCATCHBLOCK L3 L5 L7 java/lang/Throwable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:21:20.760

是的，进入 catch() 块时堆栈为空。由于 catch 处理程序无法知道异常发生在 try{} 块内的哪条指令，因此堆栈可能处于 try{} 块的任何可能状态。

此外，在进入 catch() 块时，不能假定在 try{} 块中修改的任何局部变量处于任何特定状态，但这在您的情况下不是问题。

因此，在退出 catch 块时，您需要确保堆栈处于与未引发异常时相同的状态。在这种情况下，您需要在代码到达 L6 时使用 Lambda2 对象和 Long 对象填充堆栈。

# mysql - Mysql - 可以按学期使用分组吗？

> ID：11943631
> 
> 赞同：2
> 
> 时间：2012-08-13T23:21:49.077
> 
> 标签：mysql, date, group-by

我需要在查询中按每学期使用一个分组。有谁知道有什么方法可以做到这一点？

如果我使用：

```
 `HAVING Date Between '2012-01 'and '2012-06'` 
```

我相信它会起作用，但不会是查询的正确结果。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T09:39:16.777

你可以用这个——

```
+------+------------+
| id   | date       |
+------+------------+
| 1    | 2012-08-14 |
| 2    | 2012-09-20 |
| 3    | 2012-05-14 |
| 4    | 2012-05-08 |
| 5    | 2012-08-16 |
+------+------------+

INSERT INTO table_name VALUES 
  (1, '2012-08-14'),
  (2, '2012-09-20'),
  (3, '2012-05-14'),
  (4, '2012-05-08'),
  (5, '2012-08-16');

SELECT
  YEAR(date) year,
  IF(MONTH(date) < 7, 1, 2) semester,
  COUNT(*)
FROM
  table_name
GROUP BY
  year, semester;

+------+----------+----------+
| year | semester | COUNT(*) |
+------+----------+----------+
| 2012 |        1 |        2 |
| 2012 |        2 |        3 |
+------+----------+----------+ 
```

使用 HAVING 子句 -

```
SELECT
  YEAR(date) year,
  IF(MONTH(date) < 7, 1, 2) semester,
  COUNT(*)
FROM
  table_name
GROUP BY
  year, semester
HAVING
  semester = 1

+------+----------+----------+
| year | semester | COUNT(*) |
+------+----------+----------+
| 2012 |        1 |        2 |
+------+----------+----------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-02T02:43:01.613

您无法通过以下方式获得任何日期学期：

```
FLOOR( ( MONTH(date)-1) / 6 ) + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:32:57.290

我设法解决了仅获得第一学期或第二学期的问题，如下所示。

只获得第一学期：

```
SELECT
  YEAR(date) year,
  IF(MONTH(date) < 7, 1, 2) semester,
  COUNT(*)
FROM
  table_name
WHERE 
  MONTH(date) NOT IN(7,8,9,10,11,12)    
GROUP BY
  year, semester; 
```

感谢所有帮助。

# java - Hibernate Criteria -- 返回列不同的记录

> ID：11943633
> 
> 赞同：5
> 
> 时间：2012-08-13T23:22:03.317
> 
> 标签：java, hibernate, criteria-api

示例数据库表：

1.  ID = 1，msgFrom = '你好'，foobar = 'meh'
2.  ID = 2，msgFrom = '再见'，foobar = '评论'
3.  ID = 3，msgFrom = '你好'，foobar = '响应'

示例所需的输出（由休眠查询生成）：

1.  ID = 1，msgFrom = '你好'，foobar = 'meh'
2.  ID = 2，msgFrom = '再见'，foobar = '评论'

在上面的示例中，第三条记录将从结果中排除，因为 msgFrom 列是相同的。假设 Java/Hibernate 类称为 Message。我希望将结果作为 Message 对象列表（或无论如何都可以转换为 Message 的对象）返回。如果可能，我想使用 Criteria API。我在 SO 上看到了这个例子，它看起来很相似，但我还不能正确实现它。

```
 select e from Message e 
    where e.msgFrom IN (select distinct m.msgFrom 
                          from Message m
                          WHERE m.msgTo = ? 
                          AND m.msgCheck = 0"); 
```

我这样做的原因是在数据库上过滤不同的记录，所以我对必须过滤应用程序服务器上的任何内容的答案不感兴趣。

编辑：文章基本上显示了我想做的事情。[http://oscarvalles.wordpress.com/2008/01/28/sql-distinct-on-one-column-only/](http://oscarvalles.wordpress.com/2008/01/28/sql-distinct-on-one-column-only/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T18:21:26.743

请试试这个，让我知道

```
DetachedCriteria msgFromCriteria = DetachedCriteria.forClass(Message.class);
ProjectionList properties = Projections.projectionList();
properties.add(Projections.groupProperty("messageFrom"));
properties.add(Projections.min("id"),"id");
msgFromCriteria.setProjection(properties);

Criteria criteria = s.createCriteria(Message.class);
criteria.add(Subqueries.propertiesIn(new String[]{"messageFrom","id"}, 
    msgFromCriteria));
List<Message> list = criteria.list();

for(Message message:list){
    System.out.println(message.getId()
        +"-------"
        +message.getMessageFrom()
        +"-----"
        +message.getFoobar());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:39:47.000

这个查询的困难不在于 Hibernate 本身，而在于一般的关系模型。在示例中，您说您期望第 1 行和第 2 行，但您为什么不同样容易地期望第 2 行和第 3 行呢？是否返回第 1 行或第 3 行将是一个任意决定，因为它们在 msgFrom 字段中具有相同的值。数据库不会做出这样的任意决定。这就是为什么`distinct`必须应用于选择列的整个列表，而不是子集的原因。有一些特定于数据库的方法可以获取第一个匹配的行。例如，看看

[在一列上选择 DISTINCT](https://stackoverflow.com/questions/966176/select-distinct-on-one-column)

有时会有一个日期列，您可以使用它来决定要返回哪些匹配的行，但查询再次变得有些复杂：

[如何在 SQL 中通过另一列选择具有 MAX（列值）、DISTINCT 的行？](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql)

[获取列的最大值所在的行](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column)

如果您不关心任何其他列，则可以使用简单的`distinct`，结合 Hibernate 的构造函数语法（未测试）：

```
select new Message(msgFrom) from (select distinct msgFrom from Message) 
```

但是您必须接受丢弃所有其他列。

最后，我经常最终只是在代码中将其作为后查询过滤器。另一种选择是创建另一个表，例如 CurrentMessage，其中包括 msgFrom 作为键的一部分。需要做更多的工作来保持这个表是最新的（每次向 Message 表添加一行时都需要更新一行），但是查询会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:56:23.893

```
DetachedCriteria msgFromCriteria = DetachedCriteria.forClass(Message.class);
msgFromCriteria.setProjection(Projections.distinct(Projections.property("msgFrom")));
....
Criteria criteria = getSession().createCriteria(Message.class);
criteria.add(Subqueries.propertyIn("msgFrom", msgFromCriteria));
criteria.list(); 
```

# ios - 可以在导航栏中为 UIBarButtonItem 设置背景图像，但不能在底部工具栏中设置

> ID：11943638
> 
> 赞同：1
> 
> 时间：2012-08-13T23:22:35.100
> 
> 标签：ios, uibarbuttonitem, uitoolbar

因此，这在将项目添加到导航栏时有效，但是当我通过界面构建​​器将其添加到底部栏中设置的工具栏时，背景图像不会显示。

```
UIBarButtonItem *resetButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Reset" style:UIBarButtonItemStylePlain target:self action:@selector(resetCriteria:)];
UIImage *img = [UIImage imageNamed:@"someImage.png"];
    img = [img stretchableImageWithLeftCapWidth:5 topCapHeight:20];
    [resetButtonItem setBackgroundImage:img forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

self.toolbarItems   = [NSArray arrayWithObjects: resetButtonItem, nil]; 
```

不仅背景不会出现，其他任何行为都不能正常工作（但在将这些 barbutton 项目添加到导航栏时它们工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:00:46.987

您应该尝试以下方法来做同样的事情。

在 UIBarButtonItem 中设置自定义视图。

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(0, 0, 30, 30);
[btn setImage:[UIImage imageNamed:@"someImage.png"] forState:UIControlStateNormal];
[btn addTarget:self action:@selector(resetCriteria:) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *Item = [[UIBarButtonItem alloc] initWithCustomView:btn];
self.toolbarItems   = [NSArray arrayWithObject:Item];
[Item release]; 
```

我们可以使用 CustomView init 方法在 UIBarButtonItem 中设置任何视图。我们可以设置 ImageView。但 ImageView 不处理 UIControl 事件。

# javascript - 具有热点或图像地图链接功能的 jQuery 平移和缩放或放大脚本？

> ID：11943639
> 
> 赞同：0
> 
> 时间：2012-08-13T23:22:36.177
> 
> 标签：javascript, jquery, image, animation

我为 facebook 创建了一个超级简单的“应用程序”，用户必须从详细的插图中找到一个角色（沃尔多风格）。

我希望人们能够缩放和平移（如谷歌地图），但也能够在找到角色后单击该角色并弹出或重定向到下一页。

有谁知道可以做到这一点的脚本？我找到了一些缩放工具，但您无法单击或创建热点，缩放 + 平移工具也是如此。我发现这个很好：[http ://www.dimin.net/software/panojs/#Demos](http://www.dimin.net/software/panojs/#Demos)

希望有人知道对我有用的东西。

在此先感谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:13:11.933

最终只使用了带有重定向的旧 html 地图。谢谢大家！

# windows - vb.net 应用程序安装程序 (msi) 以管理员身份运行

> ID：11943644
> 
> 赞同：0
> 
> 时间：2012-08-13T23:23:28.993
> 
> 标签：windows, vb.net, installation, windows-installer, uac

vb.net 应用程序 Windows 安装程序 (msi) 是否可以以管理员身份运行？问题是，当我为我的应用程序启动安装程序时，您必须完成加载并单击下一步（如预期的那样），然后等待很长时间，最后您会被要求提供管理员权限以进行安装..

无论如何，在开始时以管理员身份运行安装程序，以便它安装得更快，或者有没有其他方法可以加快安装速度？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:30:37.870

MSI有多大？通常，如果花费大量时间，则表明它很大（数百兆字节）并且 Windows 正在窒息进行所有的安全检查。

否则，它会按设计运行。提升 UI 序列不是最佳实践。可以使用显示为需要管理员的引导程序 EXE 来完成，但很难告诉您如何执行此操作，因为您没有提及您使用什么工具来创作 MSI。

# python - python 在课堂上有太多的自我

> ID：11943652
> 
> 赞同：3
> 
> 时间：2012-08-13T23:24:24.843
> 
> 标签：python, algorithm, find, self

我正在学习 Python OOP 并尝试将 Java 类转换为 Python 类

[有关 Java 代码 google doc链接](https://docs.google.com/open?id=1eqzajOqxWtR7uLZqWI1TMhqK2J6tCR_bJkEobb064WEkIR73REu916gcSlug)，请参阅此 PDF 中的第 15 页

```
class QuickFindUF:
        """docstring for QuickFindUF"""

    def __init__(self, n):
            self.id = []
            for e in range(n):
                    self.id.append(e)

    def connected(self,p,q):
            return self.id[p]==self.id[q]

    def union(self,p,q):
            self.pid = self.id[p]
            self.qid = self.id[q]
            for i in range(len(self.id)):
                    if(self.id[i]==self.pid):
                            self.id[i]=self.qid

quf = QuickFindUF(9)
quf.union(3,4)
print quf.connected(3,4) 
```

这个类有16个`self`关键字。有没有更好的方法来编写这个类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T23:26:12.470

是的，您不想将这些变量分配给`self`，这些是局部变量：

```
def union(self,p,q):
        self.pid = self.id[p]
        self.qid = self.id[q]
        for i in range(len(self.id)):
                if(self.id[i]==self.pid):
                        self.id[i]=self.qid 
```

应该：

```
def union(self,p,q):
    pid = self.id[p]
    qid = self.id[q]
    for i in range(len(self.id)):
        if self.id[i] == pid:
            self.id[i] = qid 
```

您仅`self`在引用实例变量时使用，而不是方法内的任何变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:52:48.517

您可以使用一些快捷方式：

```
class QuickFindUF:
    """docstring for QuickFindUF"""

    def __init__(self, n):
        self.id = range(n)

    def connected(self,p,q):
        _id = self.id
        return _id[p]==_id[q]

    def union(self,p,q):
        _id = self.id
        pid = _id[p]
        qid = _id[q]
        for (k, _i) in enumerate(_id):
           if (_i == pid):
               _id[k]=qid 
```

请注意`__init__`@katrielalex 所指出的 中的简化，以及使用 of`enumerate`而不是循环 on `range(len(self.id))`。

使用快捷方式可能更有效（当您保存对 的调用时`__getattr__`），但不应损害可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-18T09:25:07.910

像这样使用`list(range())`和：`enumerate`

```
class QuickFindUF:

    def __init__(self, n):
        self.id = list(range(n))

    def connected(self, i, j):
        return self.id[i] == self.id[j]

    def union(self, i, j):
        x = self.id[i]
        y = self.id[j]
        for index, elem in enumerate(self.id):
            if elem == x:
                self.id[index] = y 
```

* * *

**但更好的是：**不要忘记 Python 是多范式的。如果方法具有通用方面，则将这些方面外包给纯函数：

```
def map_each_x_to_y(array, x, y):
    for i, elem in enumerate(array):
        if elem == x:
            array[i] = y
    return array

def map_ith_values_to_jth(array, i, j):
    x = array[i]
    y = array[j]
    return map_each_x_to_y(array, x, y) 
```

这种更具声明性的风格可能看起来很冗长，但它使`union`方法意图的期望行为更容易理解：

```
 def union(self, i, j):
        self.id = map_ith_values_to_jth(self.id, i, j) 
```

并使您的代码更可重用于其他事情。

# php - 替代在线支付网关

> ID：11943654
> 
> 赞同：-1
> 
> 时间：2012-08-13T23:24:42.293
> 
> 标签：php, e-commerce, payment-gateway, paypal

我正在开发一个电子商务网站。现在我实现了在线支付的步骤。所以我正在寻找最好的方法来完成这项工作（我已经有 Paypal，但我正在寻找其他选项以方便用户使用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:34:47.807

PayPal 的一种可行替代方案是 Google Checkout。[这里](https://google-developers.appspot.com/checkout/samples/Google_Checkout_Sample_Code_PHP)有一些用于 Google Checkout 的 PHP 示例。

我相信 Google Checkout 确实允许访客购买，因此没有 Google 帐户的任何人都应该可以在不创建帐户的情况下使用信用卡付款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:03:32.110

我会坚持使用 PayPal，我一直在多个电子商务网站上使用它，而且它轻而易举。您可以使用 PayPal Payments Advanced [https://www.paypal.com/webapps/mpp/paypal-payments-advanced](https://www.paypal.com/webapps/mpp/paypal-payments-advanced)

这使它们保持在您的网站上而无需重定向（我相信，但是用户仍然会知道您正在使用贝宝作为处理器，因为它会有品牌......但不确定这一点）。这需要每月 5 美元 + 处理/交易费用

如果您想要一个真正的无缝（没有品牌，您可以使用 API 调用），您可以使用 Paypal Payments Pro，但是这是每月 30 美元

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T23:54:34.587

我在 Plimus 工作，这是一家名为 bluesnap 的公司提供的在线支付服务。您可以查看 BuyNow 页面的示例：[*此处*](https://sandbox.plimus.com/jsp/buynow.jsp?contractId=2129424)。
如您所见，支持的支付方式/货币/语言有很多。

购买页面是完全可定制的。如果你想玩它，你可以在[https://sandbox.plimus.com](https://sandbox.plimus.com)上开设一个供应商帐户并按照“启动指南”进行操作。商业模式很简单：您无需支付注册费或任何其他月费/隐藏费用。您只需支付每笔销售的一定百分比。该百分比根据交易金额设置，在 10%（最低为 0.75 美分）到 4% 之间变化。

如有更多问题，请随时发送电子邮件至：[vendors@plimus.com](http://mailto%3avendors@plimus.com)

# ios - MKPinAnnotationView 一次性加载 didSelectAnnotationView 方法中的所有数据

> ID：11943661
> 
> 赞同：0
> 
> 时间：2012-08-13T23:25:26.373
> 
> 标签：ios, mkmapview, mkannotation

我一直在研究 MKMapView 很长一段时间，试图更熟悉它，但遇到了一个问题。

我的 MapView 填充了两个引脚，当我按下它们时，它们有各自的注释。我还有一个按钮，它将带我到一个带有 UlLabels 的新 UIView，该 UIView 将加载来自数组的数据。

看着我的控制台，我注意到数据正在通过，但我选择了它加载所有这些数据，然后显示最后一个，而不是仅仅针对 pin。

这是我用来为下一个视图加载数据的方法的代码：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{

   MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:addAnnotation     reuseIdentifier:@"currentloc"];
    if(annView.tag = 0) {
            GSStore * theStore = [globalCMS getStoreById:1];
            NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];
            int storeid = theStore.storeid;
            [prefs setInteger:storeid forKey:@"selectedstore"];

            NSLog(@"%@", theStore.name);

            storeName.text = [NSString stringWithFormat:@"%@", theStore.name];
            storeCS.text = [NSString stringWithFormat:@"%@,%@", theStore.city, theStore.state];
            storeHours.text = [NSString stringWithFormat:@"%@", theStore.hours];
            storePhone.text = [NSString stringWithFormat:@"%@", theStore.phone];
            storeAddress.text = [NSString stringWithFormat:@"%@", theStore.address];
            storeCSZ.text = [NSString stringWithFormat:@"%@,%@ %@", theStore.city, theStore.state, theStore.zip];
            storeWebsite.text = [NSString stringWithFormat:@"%@", theStore.website];
            }
    if(annView.tag = 1){
            GSStore * theStore = [globalCMS getStoreById:2];
            NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];
            int storeid = theStore.storeid;
            [prefs setInteger:storeid forKey:@"selectedstore"];

            NSLog(@"%@", theStore.name);

            storeName.text = [NSString stringWithFormat:@"%@", theStore.name];
            storeCS.text = [NSString stringWithFormat:@"%@,%@", theStore.city, theStore.state];
            storeHours.text = [NSString stringWithFormat:@"%@", theStore.hours];
            storePhone.text = [NSString stringWithFormat:@"%@", theStore.phone];
            storeAddress.text = [NSString stringWithFormat:@"%@", theStore.address];
            storeCSZ.text = [NSString stringWithFormat:@"%@,%@ %@", theStore.city, theStore.state, theStore.zip];
            storeWebsite.text = [NSString stringWithFormat:@"%@", theStore.website];  
            }

    if (annView.tag = 2) {
            GSStore * theStore = [globalCMS getStoreById:3];
            NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];
            int storeid = theStore.storeid;
            [prefs setInteger:storeid forKey:@"selectedstore"];

            NSLog(@"%@", theStore.name);

            storeName.text = [NSString stringWithFormat:@"%@", theStore.name];
            storeCS.text = [NSString stringWithFormat:@"%@,%@", theStore.city, theStore.state];
            storeHours.text = [NSString stringWithFormat:@"%@", theStore.hours];
            storePhone.text = [NSString stringWithFormat:@"%@", theStore.phone];
            storeAddress.text = [NSString stringWithFormat:@"%@", theStore.address];
            storeCSZ.text = [NSString stringWithFormat:@"%@,%@ %@", theStore.city, theStore.state, theStore.zip];
            storeWebsite.text = [NSString stringWithFormat:@"%@", theStore.website];  
            }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:43:48.677

只是为了解释为什么您会看到“加载所有数据的方法”：

`if`条件是使用单个等号 ( )而`=`不是双 ( `==`)。
single`=`是一个分配，而 double`==`是用于检查相等性的一个。

由于赋值在所有`if`s 中都成功执行，所以所有 s 内部的代码都会`if`执行。

但是，真正的问题是您正在委托方法中创建注释视图的新实例，`didSelectAnnotationView`这不是您想要的。

您可以使用该方法为您提供的注释视图实例作为参数（即。`view`），而不是创建新实例。

所以理论上你可以看看`view.tag`.

但我强烈建议不要依赖标签，而是将注释所需的所有数据放在注释类本身中。然后，您可以使用此方法访问注释`view.annotation`并将其转换为您的自定义类以访问自定义属性：

```
MyAnnotationClass *myAnn = (MyAnnotationClass *)view.annotation;
NSLog(@"myAnn.someCustomProperty = %@", myAnn.someCustomProperty); 
```

# javascript - 使用 jquery 将行值设为其他文本

> ID：11943664
> 
> 赞同：0
> 
> 时间：2012-08-13T23:26:02.497
> 
> 标签：javascript, jquery, events, html-table, jquery-selectors

我有一个有 2 行的表，第一个有一个数量的输入，下面必须输出相同的值。由于我使用的是 jQuery，这是我的代码：

```
var i, quant;

for (i = 0; i < $(".qnt").length; i++){
    $(".qnt:eq(" + i + ")").keyup(function(){
        quant = $(this).val();  
        console.log($(this));
        console.log(i);
        console.log($(".cst:eq(" + i + ")"));
        $(".cst:eq(" + i + ")").text(quant);
    });
} 
```

行的样本是：

```
<tr>
     <td><input class="qnt"/></td><td class="cst"></td>
</tr> 
```

jsfiddle是：http: [//jsfiddle.net/qrhJ4/](http://jsfiddle.net/qrhJ4/)

问题：为什么 .cst 选择器不起作用，我该如何使它起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:30:27.793

你过于复杂的事情，尝试类似：

```
$('.qnt').keyup(function() {
    $(this).parent().next('.cst').text(this.value);
}); 
```

[http://jsfiddle.net/aasqW/](http://jsfiddle.net/aasqW/)

# java - Android 上的 YoutubeService 错误

> ID：11943665
> 
> 赞同：0
> 
> 时间：2012-08-13T23:26:08.077
> 
> 标签：java, android, api, youtube

无法解决此错误。我在 libs 文件夹中安装了所需的 Lib 文件。

```
private void GetYTData ()
{

    YouTubeService ytservice = new YouTubeService("AppName",Dev_Key);   
} 
```

线

```
YouTubeService ytservice = new YouTubeService("AppName",Dev_Key); 
```

它给了我以下 Log cat 错误

```
threadid=1: thread exiting with uncaught exception (group=0x40a4e1f8)
FATAL EXCEPTION: main
    java.lang.ExceptionInInitializerError
    at com.twistedequations.pixel.enemy.Pixel_Enemy_Videos_Fragments.GetYTData(Pixel_Enemy_Videos_Fragments.java:131)
    at com.twistedequations.pixel.enemy.Pixel_Enemy_Videos_Fragments.access$1(Pixel_Enemy_Videos_Fragments.java:128)
    at com.twistedequations.pixel.enemy.Pixel_Enemy_Videos_Fragments$2.onClick(Pixel_Enemy_Videos_Fragments.java:100)
    at android.view.View.performClick(View.java:3511)
    at android.view.View$PerformClick.run(View.java:14110)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.ExceptionInInitializerError
    at com.google.gdata.client.Service.<clinit>(Service.java:558)
    ... 14 more
     Caused by: java.lang.NoSuchMethodError: com.google.common.collect.ImmutableSet.copyOf
    at com.google.gdata.wireformats.AltFormat$Builder.setAcceptableTypes(AltFormat.java:399)
    at com.google.gdata.wireformats.AltFormat$Builder.setAcceptableXmlTypes(AltFormat.java:387)
    at com.google.gdata.wireformats.AltFormat.<clinit>(AltFormat.java:49)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:30:45.937

```
java.lang.NoSuchMethodError: 
```

您在 lib 文件夹中的 jar 似乎不包含任何方法`copyOf`

如果您的类路径中有旧/新（比您的代码）版本的 jar，则可能会发生这种情况。

我建议检查您用于此服务的 jar 版本。

# iphone - Anyone auto-layout masters able to enlighten me on constraints and rotation?

> ID：11943672
> 
> 赞同：2
> 
> 时间：2012-08-13T23:26:40.800
> 
> 标签：iphone, ios, xcode, autolayout

I'm trying to figure out auto layout constraints with a view in portrait and landscape. In portrait I have a container view (but any view will do) that is 320x200 pixels. When the phone is rotated to landscape, I would like that container view to fill the screen at 480x320.

Right now I'm doing this entirely in IB, and am trying to keep it that way for now. I struggle with the dang blue and purple constraint icons appearing when I try to set the the view to resize as I would like it to.

I've watched the WWDC auto-layout videos and have auto-layout working in other views, but I just can't get this seeming simple change to occur.

Any help would be appreciated. Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T04:56:15.663

In the 2012 WWDC video 228 - Mastering Auto layout, he showed something like this

```
for (UIView *aView in [yourViewController subviews]) {
if ([aView hasAmbiguousLayout]) {
    NSLog(@"View Frame %@", NSStringFromCGRect(aView.frame));
    NSLog(@"%@", [aView class]);
    NSLog(@"%@", [aView constraintsAffectingLayoutForAxis:1]);
    NSLog(@"%@", [aView constraintsAffectingLayoutForAxis:0]);

    [aView exerciseAmbiguityInLayout];
 }
} 
```

Try that and see if you have any ambiguous layout. Of course do this after the rotation and everything is not right.

If that does not produce anything then just use the constraintsAffectingLayoutForAxis method on your specific view and you should see the constraint not allowing it to change.

Most likely there is a constraint with a too high priority that you will need to reduce.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:41:58.487

I had to use inequalities. For example a text area width in portrait needs to be 100, but the landscape width needs to be >100 so it can stretch. Other constrains are in place to pull it to the sides already for me. I also enabled landscape modes. When I rotate now my 4 lines of text reflows to 2 lines very smartly.

# asp.net - 使用花式框和 httphandler 加载图像

> ID：11943673
> 
> 赞同：0
> 
> 时间：2012-08-13T23:26:57.463
> 
> 标签：asp.net, fancybox, httphandler, image-loading

我正在使用 JQuery fancybox 照片。我想使用 HttpHandler 从数据库加载图像但无法获取图像。我的 jquery 代码

```
$(document).ready(function(){
 $('#gallery a').fancybox();
}); 
```

asp.net 代码

```
 <div style="float:left; position:relative; margin:10px;" id="gallery">
  <div>
   <a href="ImageHandlerFullSize.ashx?ImID=<%# Eval("Id")%>" rel="gallery" >
   <asp:Image ID="Image1" runat="server" ImageUrl='<%#"ImageHandler.ashx?ImID="+    Eval("Id") %>'  BorderStyle="Solid" BorderWidth="1px" Width="172px"  Height="172px"/>
    </a>

  </div> 
```

它加载了fancybox，但只显示“ `System.Data[]`”而不是显示消息。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:54:35.370

尝试

```
$(document).ready(function(){
 $('#gallery a').fancybox({
  "type":"image"
 });
}); 
```

检查[http://fancybox.net/faq](http://fancybox.net/faq) No.6 for v1.3.x ...或[http://fancyapps.com/fancybox/#support](http://fancyapps.com/fancybox/#support) No.5 for v2.x

# visual-studio-2010 - rdlc 报告中的查找功能 - Visual Studio 2010

> ID：11943677
> 
> 赞同：4
> 
> 时间：2012-08-13T23:27:27.213
> 
> 标签：visual-studio-2010, reporting-services, rdlc, lookup

我在 vs.net 2010 中创建了一个 rdlc 报告，它需要使用报告服务 2008 R2 中可用的查找功能（我只是假设它在 rdlc 文件中可用。）此本地报告使用自定义业务对象和功能已经可用在 Web 应用程序中，所以我认为它不能转换为服务器报告。员工数据集是员工对象的列表，每个对象都包含财务数据以及办公室和部门属性。该报告按办公室、部门、员工分组，每个员工显示财务详细信息。但是，我需要显示每个办公室的特殊员工，但不包括在所有其他员工的列表中。此信息需要显示在每个办公室的末尾' s 信息，我计划简单地在报告中添加一个新行，并使用员工数据集中的查找功能与包含该特殊员工财务数据的另一个数据集进行对比。此特殊员工与普通员工属于同一类型，因此查找将基于办公室属性。

所以我的问题是，我是否忽略了某些东西，或者查找功能在使用 vs.net 2010 创建的 rdlc 文件中真的不可用？如果它不可用，关于如何实现这种查找功能的任何建议？

谢谢，

埃里克

# php - array_values 递归 php

> ID：11943678
> 
> 赞同：7
> 
> 时间：2012-08-13T23:27:30.877
> 
> 标签：php, arrays, recursion, multidimensional-array

假设我有一个这样的数组：

```
Array
(
    [id] => 45
    [name] => john
    [children] => Array
    (
        [45] => Array
            (
                [id] => 45
                [name] => steph
                [children] => Array
                    (
                        [56] => Array
                            (
                                [id] => 56
                                [name] => maria
                                [children] => Array
                                    (
                                        [60] => Array
                                            (
                                                [id] => 60
                                                [name] => thomas
                                            )

                                        [61] => Array
                                            (
                                                [id] => 61
                                                [name] => michelle
                                            )

                                    )
                            )

                        [57] => Array
                            (
                                [id] => 57
                                [name] => luis
                            )

                     )

            )

    )

) 
```

我想要做的是将带有键的数组的键重置`children`为 0、1、2、3 等，而不是 45、56 或 57。

我试过类似的东西：

```
function array_values_recursive($arr)
{
    foreach ($arr as $key => $value)
    {
        if(is_array($value))
        {
            $arr[$key] = array_values($value);
            $this->array_values_recursive($value);
        }
    }

    return $arr;
} 
```

但这只会重置第一个子数组的键（键为 45 的那个）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-02T11:34:36.033

```
function array_values_recursive($arr)
{
    $arr2=[];
    foreach ($arr as $key => $value)
    {
        if(is_array($value))
        {            
            $arr2[] = array_values_recursive($value);
        }else{
            $arr2[] =  $value;
        }
    }

    return $arr2;
} 
```

这个从数组中实现**array_values_recursive的函数如下：**

```
array(   
   'key1'=> 'value1',   
   'key2'=> array (              
         'key2-1'=>'value-2-1',
         'key2-2'=>'value-2-2'
          )
); 
```

像这样排列：

```
array(
    0 => 'value1',
    1 => array (
           0 =>'value-2-1',
           1 =>'value-2-2'
          )
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T23:35:14.703

您使用递归方法，但您没有在`$this->array_values_recursive($value);`任何地方分配函数调用的返回值。当您`$arr`在循环中修改时，第一级有效。由于上述原因，任何进一步的级别都不再起作用。

如果要保留功能，请按如下方式更改（未经测试）：

```
function array_values_recursive($arr)
{
  foreach ($arr as $key => $value)
  {
    if (is_array($value))
    {
      $arr[$key] = $this->array_values_recursive($value);
    }
  }

  if (isset($arr['children']))
  {
    $arr['children'] = array_values($arr['children']);
  }

  return $arr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:42:03.593

This should do it:

```
function array_values_recursive($arr, $key)
{
    $arr2 = ($key == 'children') ? array_values($arr) : $arr;
    foreach ($arr2 as $key => &$value)
    {
        if(is_array($value))
        {
            $value = array_values_recursive($value, $key);
        }
    }
    return $arr2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-14T06:41:38.037

尝试这个 ，

```
 function updateData($updateAry,$result = array()){
     foreach($updateAry as $key => $values){
      if(is_array($values) && count($values) > 0){
        $result[$key] = $this->_updateData($values,$values);
      }else{
        $result[$key] = 'here you can update values';
      }
     }
     return $result;
   } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-25T20:24:20.700

[你可以在这里](http://php.net/manual/en/function.array-walk-recursive.php)使用 php fnc walk_array_recursive

# ejb - FlushMode 类型 Commit 与 REQUIRES_NEW 事务属性一起使用

> ID：11943680
> 
> 赞同：1
> 
> 时间：2012-08-13T23:27:45.673
> 
> 标签：ejb, cdi, seam3

我正在使用 JBoss 7.1.1 Final、Weld、Hibernate 4、Seam 3 进行开发，但我不明白以下行为。我使用Seam Managed Persistence Context for Entity manager and Persistence Interceptor from Seam 3。我有以下CDI Bean：

```
 @ViewScoped
 @Named
 public class RegistrationController implements Serializable {

    @Inject
    private RegisterService service;

    @Inject
    private EntityManager em;

    public void register() {
          Person p = service.register("username","password");
          Person pp = em.find(Person.class, p.getId()); //returns null
    } 
 } 
```

并遵循 EJB

```
 @Stateless
 @Local(IRegisterService.class)
 public RegisterService implements IRegisterService {

      @Inject
      private EntityManager em;      

      @Override
      @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
      public Person register(String username, String password) {
           return em.merge(new Person(username, password));
      }
 } 
```

因此，由于我使用 Seam Persistence 模块，我假设会发生这种操作流程：

1) 从前端调用registrationController.register()

2) 发起新事务A

3) service.register(...) 被调用

4）事务A被挂起，事务B被创建用于执行service.register（因为它被REQUIRES_NEW注解）

5) 执行 service.register(...) 完成

6) 事务 B 被提交

7) 由于我使用 COMMIT 刷新类型，因此会调用刷新

8) 交易 A 被打开

现在， em.find(Person.class, p.getId()) 正试图找到刚刚坚持的人。由于事务 B 已提交并且实体管理器已刷新，它应该会找到它。但它返回null。如果我手动冲洗，那么它可以工作。

我在哪里犯错？是不是有些误会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:14:49.973

通过查看您的代码，我会说 - 因为`RegistrationController`它是一个普通的托管 bean - 它**不会**启动自己的事务。这基本上意味着您有一个事务 B。

# c# - C# 机会游戏

> ID：11943686
> 
> 赞同：6
> 
> 时间：2012-08-13T23:29:10.620
> 
> 标签：c#, probability

我是 C# 新手。

**我想要做什么**

我正在尝试在这里创建一个机会游戏系统。

基本上是这样的：

**我的问题：**我该怎么做才能完成我想做的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T23:42:41.330

Your example code has a hard bug: you've written `150/208` and `190/209`. This is an integer division, and both result in **zero**. You should have written: `150.0/208` and `190.0/209` to instruct the compiler to divide them as double's not integers.

Edit:
Assuming the system's RNG is flat and that your table is as follows:

```
[item]    [amount]
0        3 000 000
25       1 500 000
50       2 000 000
75       300 000
100      10 000
150      10 000    (no typo)
  sum  = 6820000 
```

Then your randomizer can look like:

```
int randomItemNumber = Random.Next(6820000); // 0..6819999
if(randomItemNumber < 3000000)
    Console.WriteLine("Aah, you've won the Item type #0\n");
else if(randomItemNumber < 3000000+1500000)
    Console.WriteLine("Aah, you've won the Item type #1\n");
else if(randomItemNumber < 3000000+1500000+2000000)
    Console.WriteLine("Aah, you've won the Item type #2\n");
else if(randomItemNumber < 3000000+1500000+2000000+300000)
    Console.WriteLine("Aah, you've won the Item type #3\n");
else if(randomItemNumber < 3000000+1500000+2000000+300000+10000)
    Console.WriteLine("Aah, you've won the Item type #4\n");
else if(randomItemNumber < 3000000+1500000+2000000+300000+10000+10000)
    Console.WriteLine("Aah, you've won the Item type #5\n");
else
    Console.WriteLine("Oops, somehow you won nothing, the code is broken!\n"); 
```

The idea is that you put all the items in a looong line, one after another, but you keep them in their groups. So, at start there's three milion of the first kind, then a milion-and-half of the second type and so on. There are in total 6820000 items in the line. Now you randomly pick a number from 1 to 6820000 (or from 0 to 6819999) and use it as the NUMBER of an element in the LINE.

As the items are present in the line with their correct statistical distribution, then if the randomization 1-6820000 was FLAT, then the resulting 'lottery' will have distribution exactly as you you wanted.

The only trick left to explain, is how to guess what item was picked. This is why we kept the items in groups. The first part of 3000000 items is the first type, so if the number was less than 3000000 then we hit the first type. If more than that, but lower than the next 1500000 (lower than 4500000) then the second type is hit.. and so on.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:57:30.073

正如其他人所说，您的代码有一个整数除法错误。

在任何情况下，您都需要查看：逆变换采样。

基本上，它允许您获取一个统一的随机数（大多数 PRNG 给您的）并将其转换为来自任何分布的随机样本。为此，您需要使用目标分布的 CDF。

参考资料和有用的页面：

*   [“多项分布 - 维基百科，免费的百科全书” [en.wikipedia.org]](http://en.wikipedia.org/wiki/Multinomial_distribution)
*   [“逆变换采样 - 维基百科，免费的百科全书” [en.wikipedia.org]](http://en.wikipedia.org/wiki/Inverse_transform_sampling)
*   [Google 搜索：“从多项式中随机抽取”](http://www.google.ca/#hl=en&sclient=psy-ab&q=randomly+draw+from+a+multinomial&oq=randomly+draw+from+a+multinomial&gs_l=serp.12...0.0.0.28101.0.0.0.0.0.0.0.0..0.0.efrsh..0.0...1.hknnXtIjgtY&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=2a3410d56eca1659&biw=1680&bih=972)

[[引用历史记录](http://bit.ly/NyMMC0)]

编辑：我实际上是指分类分布，而不是多项分布。这两个分布经常混为一谈（尤其是在我的领域），但区别很重要。只有当多项分布参数化为 n = 1（即一次试验）时，这两个分布才等效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:57:30.290

一个除数必须是 double 以防止除零。要计算您需要将它们累积到 100%（或 1）的概率：

```
//     Element     - Probability      - Cumulative Probability
//     Item100     10000 / 6820000       0.001466275659824
//     Item75      300000 / 6820000      0.0439882697947214 + 0.001466275659824
//     Item50      2000000 / 6820000     0.2932551319648094 + 0.0454545454545454
//     Item25      1500000 / 6820000     0.219941348973607  + 0.3387096774193548
const double Item100 = 0.001466275659824;
const double Item75 = 0.0454545454545454;
const double Item50 = 0.3387096774193548;
const double Item25 = 0.5586510263929618;

int getRandomItem(Random rnd)
{
    double value = rnd.NextDouble();
    if (value <= Item100)
    {
        // use one of both possible items (100 or 150)
        int which = rnd.Next(0, 2);
        return which == 0 ? 100 : 150;
    }
    else if (value <= Item75)
        return 75;
    else if (value <= Item50)
        return 50;
    else if (value <= Item25)
        return 25;
    else
        return 0;
} 
```

你将如何使用它：

```
var rnd = new Random();
var items = new List<int>();
for (int i = 0; i < 100; i++)
    items.Add(getRandomItem(rnd));
Console.Write(string.Join(Environment.NewLine, items)); 
```

请注意，我重用了随机实例。如果我在循环中创建它，“随机值将始终相同，因为它将在同一时间播种。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T23:47:11.577

我在我的应用程序中做了类似的事情，并将其转换为下面的问题：在伪代码中：

*   总结所有值（得到总数）
*   获取一个介于 0 和总和之间的随机值
*   遍历所有项目，总结所有值，直到该项目
*   当达到随机数时，该项目是属于该值的项目。

类 Items 如下所示（删除了一些不重要的行并添加了注释 //

```
public class Items : List<Item>
{
    public Items() 
    {
        Add(new Item( 0, 3000000)); 
        Add(new Item(25, 1500000)); 
        Add(new Item(50, 2000000));
        // etc
    }

    /// <summary>
    /// Returns a random item based on value.
    /// </summary>
    /// <returns></returns>
    public Item GetRandomItem()
    {
        var sum = this.Sum(item => item.Value);
        var randomValue = new Random().Next(sum);

        // Iterate through itemsuntil found.
        var found = false;
        var itemIndex = 0;
        var visitedValue = 0;
        while (!found)
        {
            var item = this[itemIndex];
            if ((visitedValue + item.Value ) > randomValue)
            {
                found = true;
            }
            else
            {
                itemIndex++;
                visitedValue += item.value;                
            }
        }

        return this[itemIndex];        
    } 
```

Item 类只不过是 Name 和 Value 的占位符。

它看起来很长，但它有一些好处：

*   当值发生变化时，会自动计算总和。
*   添加项目时，只需更改一行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T00:19:10.250

这样的事情应该做你。也许不是世界上最好的例子，但它应该足够了：

```
class Item
{
    public string Name { get ; private set ; }
    public int    Amount { get ; private set ; }

    public Item( string name , int amount )
    {
        if ( string.IsNullOrWhiteSpace(name) ) throw new ArgumentException("name") ;
        if ( amount < 0 ) throw new ArgumentException("amount") ;

        this.Name = name ;
        this.Amount = amount ;

        return ;
    }
}
static void Main( string[] args )
{
    Random rng   = new Random() ;
    Item[] items = { new Item( "item--0"  , 3000000 ) ,
                     new Item( "item-25"  , 1500000 ) ,
                     new Item( "item-50"  , 2000000 ) ,
                     new Item( "item-75"  ,  300000 ) ,
                     new Item( "item-100" ,   10000 ) ,
                     new Item( "item-150" ,   10000 ) ,
                    } ;
    int    total = items.Sum( x => x.Amount ) ;

    for ( int i = 0 ; i < 100 ; ++i )
    {
        int  r = rng.Next(0, total ) ; // get a random integer x such that 0 <= x < total
        int  n = 0 ;
        Item selected = null ;
        int  lo = 0 ;
        int  hi = 0 ;
        for ( int j = 0 ; j < items.Length ; ++j )
        {
            lo = n ;
            hi = n + items[j].Amount ;
            n  = hi ;

            if ( r < n )
            {
                selected = items[j] ;
                break ;
            }

        }
        Console.WriteLine( "iteration {0}. r is {1} <= {2} < {3}. Selected item is {4}" ,
            i ,
            lo ,
            r ,
            hi ,
            selected.Name
            ) ;

    }

    return;
} 
```

# iphone - 选择注释会导致 MKMapView 缩小

> ID：11943690
> 
> 赞同：1
> 
> 时间：2012-08-13T23:29:33.280
> 
> 标签：iphone, ios, mkmapview, mkannotationview

我试图让一个自定义的 MKAnnotationView (PostFlag) 在选择它时做两件事：1) 展开以显示有关注释的详细信息，以及 2) 在地图中居中。The trouble is that when the annotation is selected, the MKMapView sometimes dramatically zooms out. 这导致我处理重要缩放事件的逻辑运行，它将附近的注释收集到常见的注释视图中，导致注释视图重新加载，这通常用关闭的注释视图替换用户试图查看的注释。

我尝试解决此问题的方法是尝试确保在尝试使注释居中时不会错误地设置区域（例如，跨度会导致缩小）。那里的一切似乎都很好 - 当我设置它时，该区域是正确的。委托方法 mapView:didChangeRegion:animated: 仍然会被调用，尽管区域缩小了。我不确定那里到底发生了什么。

在将区域更改为注释居中之前将 scrollEnabled 和 zoomEnabled 设置为 NO 似乎没有任何效果。

我是否为注释视图的扩展设置动画并不重要 - 缩放仍然会发生。

这听起来很熟悉吗？这是一些代码：

```
- (void) mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    self.selectedFlag = (PostFlag*)view;  //disables scrolling/zooming on the map

    //move region to show expanded flag
    float size = (m_selectedFlag.expandedHeight / 2.0) + 50; //getting a comfortable position in the display
    float dLat = size * mapView.region.span.latitudeDelta / mapView.frame.size.height;  //get span in degrees from degree to pixel ratio

    //build a new coordinate for our center location
    CLLocationCoordinate2D originalCoord = ((PostAnnotation*)m_selectedFlag.annotation).coordinate;
    CLLocationCoordinate2D offsetCoord = CLLocationCoordinate2DMake(originalCoord.latitude + dLat, originalCoord.longitude);

    //adjust the map view to center on that new coordinate
    [m_mapView setRegion: MKCoordinateRegionMake(offsetCoord, m_mapRegionAtTimeOfLastUpdate.span) animated: YES];
}

- (void) setSelectedFlag:(PostFlag *) val
{
    if(m_selectedFlag)
    {
        m_selectedFlag.expanded = NO;
        [m_selectedFlag release];
    }

    if(val)
        m_selectedFlag = [val retain];
    else
        m_selectedFlag = nil;

    if(m_selectedFlag)
    {
        m_selectedFlag.expanded = YES;

        [m_mapView bringSubviewToFront: m_selectedFlag];
        m_mapView.scrollEnabled = NO;
        m_mapView.zoomEnabled = NO;
    }
    else
    {
        m_mapView.scrollEnabled = YES;
        m_mapView.zoomEnabled = YES;
    }
} 
```

当 PostFlag 折叠时，它告诉这个视图控制器和 vc 重新启用地图上的滚动和缩放。因此，为了清楚起见，当注释视图展开时，地图上的缩放和滚动被关闭。

```
- (void) postFlagWasCollapsed: (PostFlag*) flag
{
    [self.expandedFlags removeObject: flag];

    if([self.expandedFlags count] == 0)
    {
        m_mapView.scrollEnabled = YES;
        m_mapView.zoomEnabled = YES;
    }
} 
```

另外，为了澄清起见，我保留了扩展注释视图的数组。由于用户可以点击附近的注释视图并在先前展开的注释视图关闭时将其展开，因此可能会出现两个注释视图同时展开的失误。因此，为了确保在关闭所有注释之前我不会重新打开滚动/缩放，我使用了数组。

```
- (void) postFlagWasExpanded: (PostFlag*) flag
{
    if(!self.expandedFlags)
        self.expandedFlags = [NSMutableArray array];

    if([self.expandedFlags indexOfObject: flag] == NSNotFound)
        [self.expandedFlags addObject: flag];

} 
```

所以这可能比你想要的更多细节。但是，如果有人知道为什么在选择注释视图时地图视图会缩小，请加入。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:06:30.340

I don't think scrollEnabled means what you think it means. It stops the user from scrolling, but it doesn't stop your code from telling the map to scroll. Same goes for zooms.

"If you set the value of this property to NO, you may still change the map location programmatically by changing the value in the region property."

Ref: [http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instp/MKMapView/scrollEnabled](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instp/MKMapView/scrollEnabled)

So forget meddling with scrollEnabled. Look again at your setRegion call. I would think your span is coming out wrong. Log the region and tell us what it sets when it is doing what you want and when it radically zooms out.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:14:37.660

这可能已经解决了，但是如果其他人有同样的问题，只需将**setRegion**替换为**setCenterCoordinate**。

根据苹果文档，setRegion 将对视图中的注释进行假设并相应地更改缩放。setCenterCoordinate 将不进行此类评估，而只是将地图以您指定为地图中心的坐标为中心。

希望这对某人有所帮助，因为它也困扰了我一段时间。

# javascript - 将匿名函数传递给 jquery 选择器 expr[:]

> ID：11943691
> 
> 赞同：0
> 
> 时间：2012-08-13T23:29:42.443
> 
> 标签：javascript, jquery

在 jQuery 中，您可以运行一个选择器，其中每个元素都通过您定义的函数运行，如下所示（完全人为的示例）：

```
jQuery.expr[':'].AllOrNothing= function(a,i,m){
    // a is the thing to match, m[3] is the input
    if(m[3] === "true"){
      return true;
    } else {
      return false;
    }
  }; 
```

然后你可以像这样使用它：

```
$("div:AllOrNothing(" + true + ")"); //returns all divs
$("div:AllOrNothing(" + false + ")"); //returns nothing 
```

是否可以传递匿名函数而不是调用`jQuery.expr[:].Name=`？

**编辑**

我正在设想一些可链接的东西，如下所示：

```
$("div").filterByFunction(function(a,i,m){ ... }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:48:16.243

听起来您只想使用内置`.filter()`方法并向其传递一个自定义函数，该函数检查兄弟元素以确定是返回 true 还是 false，然后隐藏其余元素。

```
$("section").filter(function() {
    // examine child div and return true or false
}).hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:34:40.960

为了完整起见，您可以`filter`通过添加`$.fn`

```
$.fn.customFilter = function(f) {
    var filtered = $();
    this.each(function() {
        if(f.call(this)) {
            filtered = filtered.add(this)
        }
    });
    return filtered;
}

$("div").filterByFunction(function(){ return $(this).text() != "test"; }) 
```

在这种情况下，您不应该这样做。

# delphi - 表格是否已经打开？

> ID：11943695
> 
> 赞同：6
> 
> 时间：2012-08-13T23:29:55.493
> 
> 标签：delphi

我一直在使用以下代码来检查表单是否已经存在：

```
function FormExists(apForm: TObject): boolean;
var i: Word;
begin
  Result := False;
  for i := 0 to Application.ComponentCount-1 do
    if Application.Components[i] = apForm then begin
      Result := True;
      Break;
    end;
end; 
```

几年前我从我参与的一个项目中得到它。这是我的第一个 Delphi 项目之一。

有用。

但是这周我在徘徊，如果有更好，更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T23:33:00.400

您可以使用[Screen.Forms](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TScreen.Forms)代替。它减少了您正在迭代的项目：

```
function FormExists(apForm: TForm): boolean;
var 
  i: Word;
begin
  Result := False;
  for i := 0 to Screen.FormCount - 1 do
    if Screen.Forms[i] = apForm then 
    begin
      Result := True;
      Break;
    end;
end; 
```

但是，值得注意的是，如果您已经拥有它，那么您就`apForm`知道它存在并且无需搜索它。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-08-14T01:40:25.320

我发现最好的方法是询问表单本身是否打开。您可以使用 CLASS 过程/函数来执行此操作。调用表单的类过程/函数是安全的，即使它不存在。

在表单的公共声明中添加一个类函数。

```
 type
    TForm2 = class(TForm)
      ...
    private
      { Private declarations }
      ...
    public
      { Public declarations }
      class function FormExists:  Boolean;
    end;

  class function TForm2.FormExists: Boolean;
  var
     F: TForm2;
     I: Integer;
  begin
     F := nil;
     for i := Screen.FormCount - 1 DownTo 0 do
      if (Screen.Forms[i].Name = 'Form2') then
      begin
         F := Screen.Forms[I] As TForm2;
         break;
      end;
     Result :=  F <> nil;
  end; 
```

因此，从使用子句中有 Form2 的任何单元都可以调用

```
 if Form2.FormExists then
        ... 
```

# ruby-on-rails - 如何在 Rails 中测试从多个 IP 地址登录

> ID：11943696
> 
> 赞同：5
> 
> 时间：2012-08-13T23:29:55.467
> 
> 标签：ruby-on-rails, testing, integration-testing

应客户的要求，每次应用程序检测到来自不同 IP 地址的同一用户的两个活动会话时，我都必须执行发送通知电子邮件。你如何测试这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:41:12.300

创建集成测试 test/integration/multiple_ip_test.rb

```
require 'test_helper'

@@default_ip = "127.0.0.1"

class ActionController::Request
  def remote_ip
    @@default_ip
  end
end

class MultipleIpTest < ActionDispatch::IntegrationTest
  fixtures :all

  test "send email notification if login from different ip address" do
    post_via_redirect login_path,
                      :user => {:username => "john", :password => "test"}
    assert_equal "/users/john", path

    reset!
    @@default_ip = "200.1.1.1"
    post_via_redirect login_path,
                      :user => {:username => "john", :password => "test"}
    assert_equal "/users/john", path
    assert_equal 1, ActionMailer::Base.deliveries.size
  end
end 
```

集成测试看起来很像功能测试，但也有一些区别。您不能使用`@request`更改源 IP 地址。这就是为什么我不得不打开`ActionController::Request`类并重新定义`remote_ip`方法的原因。

因为响应`post_via_redirect`始终是 200，`assert_response :redirect`所以我没有使用 URL 来验证用户是否已成功登录。

调用 to`reset!`是启动新会话所必需的。

有关集成测试的介绍，请查看[Rails Guides](http://guides.rubyonrails.org/testing.html#integration-testing) on testing，不幸的是他们没有提到该`reset!`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:37:04.203

假设您正在使用一些框架进行登录，例如设计，以下命令将获取远程访问您的应用程序的机器的 IP：

```
request.remote_ip 
```

您需要将他们使用的 IP 存储在模型中，然后您应该能够轻松判断他们是否使用不同的 IP 访问。

# excel - 使用带有函数调用的 TCOM/TCL 设置单元格值

> ID：11943698
> 
> 赞同：0
> 
> 时间：2012-08-13T23:30:19.007
> 
> 标签：excel, tcl, tdom

我正在尝试使用函数调用在 TCOM 中分配单元格值。但我看到打印的确切函数名称。

```
set application [::tcom::ref createobject "Excel.Application"]
set workbooks [$application Workbooks]
$application DisplayAlerts False
set workbook [$workbooks Open "\\$filename.csv"]
set worksheets [$workbook Worksheets]
set worksheet [$worksheets Item [expr 1]]
set cells_worksheet1 [$worksheet Cells] 

$cells_worksheet1 Item 27 B $Attribute 
```

我想替换`$cells_worksheet1 Item 27 B $Attribute`到函数返回的`$cells_worksheet1 Item 27 B {[getAttribute]}`地方。知道怎么做吗？`getAttribute``$attribute`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:22:21.190

据我从 Excel API 中可以看出，您从属性中获得了[`Range`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range_members.aspx)回报，并从其成员那里获得了更远的回报。然后，您可以使用属性访问器访问该单个项目的属性。`Cells``Range``Item`

```
# Assuming your largely-perfect code from your question...

set cell [$cells_worksheet1 Item 27 B]
set orientation [$cell Orientation]    ;# Arbitrary example of getting a property
$cell Orientation 42                   ;# Setting the property 
```

您可以从文字以外的来源获取要操作的属性名称：

```
proc getAttribute {} {
    return "Orientation"
}
puts "orientation is [$cell [getAttribute]]" ;# Note, *no* {braces} involved! 
```

不过，这不一定适用于所有属性；问题不在于您不能要求它们，而是有些人希望在您获取它们时传递额外的信息，而另一些人则在获取后需要额外的工作来提取它们，因为它们本身就是复合对象。如果不确切知道您打算用它做什么，就很难给出更好的建议。

* * *

大括号的问题是 Tcl 将它们视为精确的无替换文字。当您声明一个过程时这很好，但当您想要调用该过程并使用结果时就没有那么有用了。

# ios - 为什么 SLC 更新总是 5 分钟？

> ID：11943699
> 
> 赞同：0
> 
> 时间：2012-08-13T23:30:19.587
> 
> 标签：ios, location, ios-simulator, cllocationmanager

在模拟器和设备上，我的 LocationManager 代表在监视 SLC 的同时每 5 分钟就得到一次 didUpdateToLocation:fromLocation:。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:52:07.380

根据[CLLocationManager 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)：

> 对于不需要常规位置事件流的应用程序，请考虑使用 startMonitoringSignificantLocationChanges 方法来开始传递事件。这种方法更适合大多数只需要初始用户位置修复并且仅在用户移动很长距离时才需要更新的应用程序。此界面仅在检测到设备相关蜂窝塔发生变化时才提供新事件，从而降低更新频率并显着降低功耗。

我的猜测是，当您的应用程序在后台运行时，iOS 仅每 5 分钟“唤醒”一次应用程序以检查您是否进行了重大位置更改，以节省电池寿命

[在上一个问题](https://stackoverflow.com/questions/6158304/trigger-significant-location-change-manually)中也可能有一些对您有用的信息。

# java - 尝试使用 PowerMock 模拟静态系统类会给出 VerifyError

> ID：11943703
> 
> 赞同：8
> 
> 时间：2012-08-13T23:30:34.743
> 
> 标签：java, swing, unit-testing, junit, powermock

我正在尝试模拟 JOptionPane 静态方法，并被困在 Java.lang.VerifyError 中。所有版本都是最新的，因为我刚刚下载了 Mockito 的 PowerMock 及其所有依赖项。

我不能使用为上一个问题给出的答案来包装类和子类化包装器——这在我们的应用程序中无处不在。在这一点上，我已经在 PowerMock 上投入了相当多的时间，我不想从 fest 重新开始。

有没有办法解决这个错误？我在说明中尝试了“模拟静态方法”和“模拟系统类”。我不能走得更远，因为我所做的只是@RunWith(PowerMockRunner.class) 和@PrepareForTest(My.class)。

我发现我可以通过对扩展 JPanel 的类的任何引用来减少这个问题。这是创建问题的最低限度的测试（我在 Boffo 和 JPanel 上使用 PrepareForTest 得到了相同的异常）：

```
import javax.swing.JPanel;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
//@PrepareForTest(JPanel.class)
@PrepareForTest(TestCase.Boffo.class)
public class TestCase {

    @SuppressWarnings("serial")
    public static class Boffo extends JPanel {}

    @Test
    public void test() throws Exception {
        new Boffo();
    }
} 
```

这是我尝试运行测试时遇到的异常：

```
java.lang.VerifyError: (class: javax/swing/plaf/metal/MetalLookAndFeel, method: getLayoutStyle signature: ()Ljavax/swing/LayoutStyle;) Wrong return type in function
    at javax.swing.UIManager.setLookAndFeel(Unknown Source)
    at javax.swing.UIManager.initializeDefaultLAF(Unknown Source)
    at javax.swing.UIManager.initialize(Unknown Source)
    at javax.swing.UIManager.maybeInitialize(Unknown Source)
    at javax.swing.UIManager.getUI(Unknown Source)
    at javax.swing.JPanel.updateUI(Unknown Source)
    at javax.swing.JPanel.<init>(Unknown Source)
    at javax.swing.JPanel.<init>(Unknown Source)
    at javax.swing.JPanel.<init>(Unknown Source)
    at com.package.TestCase$Boffo.<init>(TestCase.java:17)
    at com.package.TestCase.test(TestCase.java:21)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:66)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:312)
    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:86)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:94)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:296)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:284)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:209)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:46)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-21T16:13:17.753

Here's a neat workaround/solution that a colleague of mine discovered today: Just add the annotation `@PowerMockIgnore("javax.swing.*")` to the test class and PowerMock will defer the loading of the problematic classes to the system classloader.

edit: Just re-read the question and since you're trying to mock JOptionPane itself I'm not sure this will help, but maybe you can play around with the exclusions pattern.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T08:40:32.037

我实际上不知道它为什么会抛出`VerifyError`，但你可以通过在实例化类之前提前设置一个假的 LookAndFill 来克服它。

```
public static class FakeLookAndFill extends BasicLookAndFeel {
    @Override
    public String getName() {
        return "FakeLookAndFill";
    }

    @Override
    public String getID() {
        return "FakeLookAndFill";
    }

    @Override
    public String getDescription() {
        return "FakeLookAndFill";
    }

    @Override
    public boolean isNativeLookAndFeel() {
        return false;
    }

    @Override
    public boolean isSupportedLookAndFeel() {
        //note it returns true
        return true;
    }
}

@Before
public void setUp() throws Exception {
    UIManager.setLookAndFeel(new FakeLookAndFill());
} 
```

# python - 如何在python中有效地搜索以下json dict并存储到list或另一个dict中？

> ID：11943708
> 
> 赞同：0
> 
> 时间：2012-08-13T23:31:17.073
> 
> 标签：python

假设我有以下 JSON 对象：

```
{
  "type": "Bands",
  "Artists": [{
    "profile": {
      "name":"Marissa"
      "age": "7"
      "hobbies": [{
        "name":"Skiing",
        "experience": "1 year"
      }]
    },
    "popularsong":{
      "name":"Wishing on a Star"
      "year": 2007
    }
  },
{
    "profile": {
      "name":"Kelsey"
      "age": "7"
      "hobbies": [{
        "name":"Piano",
        "experience": "1 year"
      }]
    }
    "popularsong":{
      "name":"The Twinkle"
      "year": 2007
    }
  },...
  ]
} 
```

假设这个 json 被加载到字典`json.loads(json_string)` 中，搜索所有“年龄”为“7”的“艺术家”条目并将它们粘贴到数组或另一个字典中的最有效方法是什么？

请注意，艺术家条目由“个人资料”和“流行歌曲”组成，例如：

{“个人资料”：{“姓名”：“玛丽莎”“年龄”：“7”“爱好”：[{“姓名”：“滑雪”，“经验”：“1年”}，“流行歌曲”：{“名称”：“闪烁”“年份”：2007 }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:44:14.760

`[artist for artist in myJson['Artists'] if artist['profile']['age'] == 7]`如果我在精神上正确地解析了那个 JSON，可能会起作用。

# php - 从 POST 数据解码时出现 json_decode JSON_ERROR_UTF8 错误

> ID：11943712
> 
> 赞同：0
> 
> 时间：2012-08-13T23:31:35.297
> 
> 标签：php

这段代码对我来说很好

```
 $input= '{"remoteRef":"RM4","competitionName":"Calgary 2012 - IVF World Sprint Champs","venue":"Calgary, Canada","startDate":"2012-08-11T00:00.00","finishDate":"2012-08-11T00:00.00","races":[{"remoteRef":"1001-0010303","raceNo":"216","eventName":"Adaptive Mixed - V6 500","roundName":"St. Final","roundNo":1,"roundCount":1,"scheduledStart":"2012-08-13T13:36.00","actualStart":"2012-08-13T14:28.08","isFinal":true,"lanes":[{"laneNo":"1","teamName":"Hawaii # 2","clubName":"Hawai\u0027i","placing":"3","officialTime":"3:00.58","officialTimeMs":86580580},{"laneNo":"2","teamName":"Rio Va´a","clubName":"Brazil","placing":"2","officialTime":"2:46.66","officialTimeMs":86566660},{"laneNo":"3","teamName":"Hawaii # 1","clubName":"Hawai\u0027i","placing":"1","officialTime":"2:46.43","officialTimeMs":86566430}],"raceState":"RESULT"}]}';

 $json = json_decode($input);

 var_dump($json); 
```

但是当我将相同的数据发布到我的网站并使用下面的代码时。我收到一个 json 解码错误 JSON_ERROR_UTF8

```
$input = file_get_contents('php://input');

$json = json_decode($input);

var_dump($json); 
```

任何想法我可能做错了什么来得到 JSON_ERROR_UTF8 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:35:38.727

在发布之前尝试base64编码并在获取后解码..

# java - 在我的服务器端有许多 @Get 的 Restlet

> ID：11943723
> 
> 赞同：0
> 
> 时间：2012-08-13T23:32:49.477
> 
> 标签：java, google-app-engine, restlet, objectify

所以我是restlet的新手。我正在创建一个可以与 GAE 服务器通信的 Android 应用程序（使用 objectify DB）我做了这个非常好的教程来学习： [http ://www.tutos-android.com/webservice-rest-android-appengine-restlet-objectify](http://www.tutos-android.com/webservice-rest-android-appengine-restlet-objectify)

它工作得很好，但做的很少。只有2种方法：

```
public interface UserControllerInterface {
@Put
void create(User user);
@Get
Container getAllUsers();
} 
```

对于我的应用程序，它更复杂，所以我添加了更多方法：

```
public interface UserControllerInterface {
@Put
public void createUser(ObagooUser user);

@Put
public void createMessage(ObagooUser user, String message);

@Put
public void updateMessage(ObagooMessage message);

@Get
public List<ObagooUser> getAllUser();

@Get
public ObagooUser getUserById(String id);

@Get
public List<ObagooMessage> getAllMessage();

@Get
public List<ObagooMessage> getAllMessageFromSender(ObagooUser sender);

@Get
public ObagooMessage getFreeMessage(ObagooUser user);
} 
```

这些方法中的每一个都在服务器端工作（我用 Junit 测试过）。

现在我正在编写 android 部分，但我遇到了问题。当我对 getAllMessage() 进行简单调用时，出现错误：

```
java.lang.IllegalArgumentException: id cannot be zero
at com.google.appengine.api.datastore.KeyFactory.createKey(KeyFactory.java:44)
at     com.googlecode.objectify.ObjectifyFactory.typedKeyToRawKey(ObjectifyFactory.java:269)
at com.googlecode.objectify.impl.ObjectifyImpl.find(ObjectifyImpl.java:159)
at com.googlecode.objectify.impl.ObjectifyImpl.find(ObjectifyImpl.java:183)
at com.obagoo.dao.ObagooUserDAO.getUserById(ObagooUserDAO.java:43)
at com.obagoo.controller.ObagooController.getUserById(ObagooController.java:47) 
```

它采用了错误的方法（getUserById）。

我在我的 getAllMessage 中设置了一个断点，它会进入，但它也会进入其他方法。

如果我多次测试，有时它会调用 createUser 或其他随机方法。

你看到我做错了吗？

添加 getAllMessage 代码：

```
public List<ObagooMessage> getAllMessage() {
    // logger.debug("Getting all Obagoo Messages");

    List<ObagooMessage> msg = new ArrayList<ObagooMessage>();
    Objectify ofy = ObjectifyService.begin();

    Query<ObagooMessage> q = ofy.query(ObagooMessage.class);

    for (ObagooMessage u : q) {
        msg.add(u);
    }

    return msg;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:00:04.793

在我看到的示例中，它总是表明您应该将列表资源的`controller`/`resource`处理与单个项目（基于/的）资源分开。所以你会有类似的东西：`URI``id``name`

```
router.attach("/users", UsersController.class);
router.attach("/users/{id}", UserController.class
router.attach("/messages", MessagesController.class); 
```

注意第一类的复数命名：`UsersController`，第二类的单数命名：`UserController`。第一类将处理没有提供 id 的情况，例如获取所有用户。另外，请注意，当 id 中提供时`URI`，它可以自动映射到类上的 id 字段。所以该`Get`方法在方法调用上没有参数。

至于处理子集，然后是来自特定用户的消息，可以使用查询参数来处理。例如，当通过`URI`with调用时`/messages?sender=id`，`MessagesController.class`将在处理 Get 的方法中使用以下内容：

```
Form queryParams = getRequest().getResourceRef().getQueryAsForm(); 
String id = queryParams.getFirstValue("sender"); 
```

希望有帮助。我不是专家，所以任何人都可以纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:22:38.807

正如错误所说：您正在创建一个 ID 为零的密钥。

我的猜测是您的`ObagoMessage`Id 字段是`long`？你应该成功`Long`。原始`long`Id 值不是自动生成的，而对象类型`Long`是。请参阅[文档](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Create_Your_Entity_Classes)。

# javascript - 如何从闭包中的函数内部访问闭包中的变量？

> ID：11943728
> 
> 赞同：0
> 
> 时间：2012-08-13T23:33:10.373
> 
> 标签：javascript, closures

例如：

```
var closure = (function(){
 var closureVariable = "Localized";

 function ReadLocal(){
  //how can I access closureVariable here?
 }
})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T23:34:54.857

只需使用`closureVariable`.

例如：

```
var closure = (function(){
 var closureVariable = "Localized";

 function ReadLocal(){
  console.log(closureVariable);
 }
})(); 
```

`ReadLocal`是一个内部作用域，局部变量在内部作用域中总是可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:35:02.953

你试过这个吗？

```
var closure = (function(){
 var closureVariable = "Localized";

 function ReadLocal(){
  //how can I access closureVariable here?
   console.log(closureVariable);
 }
})(); 
```

closuserVariable 对 readLocal 来说是全局的，所以你可以访问它。

# perl - 如何从我拥有的以下文本中计算第一个和最后一个 IP 地址

> ID：11943733
> 
> 赞同：0
> 
> 时间：2012-08-13T23:33:43.573
> 
> 标签：perl, lines, counting

我只想从我拥有的以下文本文件中打印第一个和最后一个 IP

```
Traceroute: 10 1291134800 1291134792 1291134792 GoogleDNS 0.media.collegehumor.com 92.123.72.112
traceroute to 92.123.72.112 (92.123.72.112), 30 hops max, 60 byte packets
 1  * * *
 2  134.2.205.30  0.765 ms  1.125 ms  1.428 ms
 3  134.2.250.254  0.612 ms  0.701 ms  0.695 ms
 4  129.143.135.33  0.515 ms  0.516 ms  0.510 ms
 5  129.143.1.149  1.014 ms  1.012 ms  1.010 ms
 6  129.143.1.166  1.036 ms  0.821 ms  0.808 ms
 7  129.143.1.130  274.286 ms  274.265 ms *
 8  80.81.192.28  7.246 ms  6.913 ms  6.896 ms
 9  92.123.72.0  7.319 ms  7.311 ms  7.297 ms
Traceroute: 12 1291134800 1291134792 1291134792 LocalDNS 0.media.collegehumor.com      212.201.100.184
traceroute to 212.201.100.184 (212.201.100.184), 30 hops max, 60 byte packets
1  * * *
2  134.2.205.30  0.774 ms  1.121 ms  1.426 ms
3  134.2.250.254  0.635 ms  0.716 ms  0.709 ms
4  129.143.135.33  0.584 ms  0.583 ms  0.579 ms
5  129.143.1.149  0.951 ms  0.948 ms  0.942 ms
6  188.1.233.229  1.042 ms  0.969 ms  0.962 ms
7  188.1.145.77  4.665 ms  4.804 ms  4.826 ms
8  188.1.146.50  4.815 ms  4.890 ms  4.841 ms
9  188.1.145.73  7.071 ms  7.202 ms  7.241 ms
10  188.1.145.69  9.976 ms  10.001 ms  9.441 ms
11  212.201.100.184  9.289 ms  9.259 ms  9.276 ms 
```

例如，如果我有上面的文件，那么它应该打印第一个和最后一个不匹配的文件。所以从上面我会期待这样的东西：目的地到 92.123.72.112 但到达了 92.123.72.0 对于第二个跟踪路由它不应该打印任何东西，因为目的地 212.201.100.184 实际上到达了 212.201.100.184。到目前为止，我已经编写了以下代码..

```
 #!/usr/bin/perl -w
    use Regexp::Common qw/net/; 
 open my $in, '<', "Sample_01.txt" or die $!;
 open FILE, ">", "filename.txt" or die $!;
 while (my $line = <$in>){

         if($line =~ /^Traceroute: .* (\S+)/) {
               $traceroute = $1;
        print FILE "Destination to |$traceroute|";
        my ($ip) = $line =~ /(?: \d+ \s \s+) ($RE{net}{IPv4}) /msx+;
                if($traceroute eq $ip){

        print FILE "$ip|";
        print FILE "\n";
        }
        }
        else {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:59:40.393

构建一个数组散列，其中散列的键是源ip，数组是每一跳的ip。然后当你完成后，只需将键与哈希中的最后一个值进行比较。

```
#!/usr/bin/perl

use strict;
use warnings;

open my $in, '<', 'Sample_01.txt' or die $!;
open FILE, '>', 'filename.txt' or die $!;

my %ipToRoute;
my $srcIp;
while (my $line = <$in>) {
    next if ($line =~ /^Traceroute/);

    if (my ($ip) = $line =~ m/traceroute to ([^ ]+)/) {
        $srcIp = $ip;
    }
    else {
        $line =~ s/^ +//;
        my $dstIp = (split / +/, $line)[1];
        push @{$ipToRoute{$srcIp}}, $dstIp if $dstIp ne '*';
    }
}

foreach my $srcIp (keys %ipToRoute) {
    my $finalDst = @{$ipToRoute{$srcIp}}[-1];
    if ($srcIp ne $finalDst) {
        print FILE "Destination to $srcIp but reached $finalDst\n";
    }
} 
```

# asp.net-mvc - 使用 HTML.DisplayFor 时，我可以将不同的模型传递给我的网格吗？

> ID：11943736
> 
> 赞同：0
> 
> 时间：2012-08-13T23:34:13.633
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个显示问题网格/表格的应用程序，每个问题都有一个状态下拉列表。大约有 1-200 个问题，每个状态下拉菜单有大约 50 个选项，这些选项对于网格的每一行都是相同的。

我的控制器将以下模型传递给视图：

```
IEnumerable<Question.Grid> 
```

然后在我看来，我有以下代码打印出网格表的详细信息行：

```
<tbody class="grid">
@if (Model != null) {
  foreach (var item in Model) {
    @Html.DisplayFor(model => item, "QuestionDetail")
  }
}
</tbody> 
```

每条网格线都有一个状态下拉列表，我想将下拉列表的数据（每行相同）传递给 QuestionDetail 视图。我发送此附加信息的最佳方式是什么，以便在我看来我可以拥有以下内容：

```
@Html.DropDownList("Question.Status", Status, new { id = "StatusID"}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:15:41.030

首先，不要通过视图模型的 IENumerable。而是定义一个具有 IEnumerable 的属性，如下所示：

```
public class EnumViewModel
{
   public IEnumerable<Question.Grid> Questions { get; set; }
   public int MyAdditionalFieldIWantedToPassAlong { get; set; }
}
public class Question.Grid
{
  public string MyExistingFields { get; set; }
  // as many as you had
  public string MyAdditionalFields { get; set; }
  // as much as you want
} 
```

并让您的视图接收一个模型而不是模型列表作为`@model EnumViewModel`. 此时，如果这些信息属于那里，您必须很容易在 EnumViewModel 中随心所欲地添加任何附加信息。如果它更具体到问题，请将其放在那里并在包含该状态ID 的列表中的每个模型中享受您的项目。

将其视为**一个容器**，用于保存视图所需的数据

1.  显示和
2.  回发给控制器

希望这可以帮助。

# objective-c - 类似“删除事件”动画的效果

> ID：11943738
> 
> 赞同：0
> 
> 时间：2012-08-13T23:34:46.253
> 
> 标签：objective-c, ios, uitableview, animation, uikit

我正在尝试重新创建像“删除事件”按钮动画这样的动画。就像在这张照片上

![在此处输入图像描述](../Images/67c94f2d17173c23e31ded0590796d99.png)

我怎样才能做到这一点？

至少有一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:13:59.013

我想到的最简单的解决方案是将您的自定义按钮放在一个普通的容器视图中（即`UIView`具有透明背景），并根据需要为容器视图的框架设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:10:42.617

您可以将按钮放置在带有 ClipSubviews = YES 的 UIView 中。然后为该容器视图的框架而不是按钮之一设置动画。

# c# - 在独立应用程序中记录到 azure blob 存储

> ID：11943740
> 
> 赞同：0
> 
> 时间：2012-08-13T23:34:53.983
> 
> 标签：c#, logging, azure

我想将 Tracer 输出发送到 Azure blob 存储，但应用程序不可部署到 Azure，它必须作为独立应用程序运行。有没有相对简单的方法来做到这一点？如果您以某种已部署的 Azure 角色运行，我所看到的一切都在谈论登录 Azure。理想情况下，我想要一个 Trace.Listeners.Add 调用和/或 app.config 中的一些东西来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:08:36.287

您当然可以创建一个跟踪侦听器来写入 Windows Azure 存储，并在任何应用程序中使用它，只要它能够访问 Windows Azure 中存储系统的 REST 端点。事实上，史蒂夫·马克思在[他的博客](http://blog.smarx.com/posts/lightweight-tracing-to-windows-azure-tables)上发布了一些可以让你抢先一步的东西。

我建议对于跟踪编写器之类的东西，我建议将消息​​写入表存储（如史蒂夫的帖子）而不是 BLOB 存储，除非您想在本地将大量消息批量发送到应用程序然后写入它们全部作为 BLOB 存储的文件。

# ruby-on-rails - 使用带参数的回调 Rails - Ruby

> ID：11943745
> 
> 赞同：0
> 
> 时间：2012-08-13T23:35:14.047
> 
> 标签：ruby-on-rails, ruby

编辑：

我试图重构这个：

```
self.before_create do |obj|
  obj.position = self.class.count
end 
```

对此：

```
self.before_create :set_position

private

def set_position
  obj.position = self.class.count
end 
```

但是，它的显示错误：

```
 undefined local variable or method `obj' 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:14:10.893

```
class YourClass < AR

  before_create :set_position

  private

  def set_position
    self.position = @@count
  end
end 
```

该`set_position`方法是实例方法，因此`self`被分配给实例。我`count`认为应该是一个类变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:39:48.353

```
class Something < ActiveRecord::Base
  before_create :set_position

  protected
  def set_position
    self.position = self.class.count
  end
end 
```

请注意，如果您使用类变量，如果您的服务器使用多个进程（它们之间不同步），您可能会遇到麻烦`@@count`。`count`来自 db的功能样式查询。

**注意：**很多这种行为（包括正确实现的对列表的原子更改）可以在[acts_as_list](https://github.com/swanandp/acts_as_list) gem 中找到，它曾经是Rails 的一部分。我建议使用它。

# mysql - mysql 选择计数联合

> ID：11943748
> 
> 赞同：3
> 
> 时间：2012-08-13T23:35:47.683
> 
> 标签：mysql, select, count, union

我有这样的事情：

```
(SELECT COUNT(*) AS total FROM `transactions` WHERE 
   `asset`='u_{$user_id}' GROUP BY id)
 UNION DISTINCT 
(SELECT COUNT(*) AS total FROM transactions tr 
   INNER JOIN payments pa ON tr.asset = CONCAT('p_', pa.id) 
   WHERE pa.user_id = '{$user_id}' 
   GROUP BY tr.id) 
```

它给`1`

现在像这样工作：

```
SELECT
 (SELECT COUNT(*) FROM `transactions` 
    WHERE `asset`='u_{$user_id}')
  + 
 (SELECT COUNT(*) FROM transactions tr 
    INNER JOIN payments pa ON tr.asset = CONCAT('p_', pa.id) 
    WHERE pa.user_id = '{$user_id}') 
```

它给`6`

但我需要得到`5`..，播种如何做出正确的查询？

当然，我可以通过 php 做到这一点，但是..如何通过 sql..？

真正的“和”和“或”条件无关紧要，它们可以正常工作，问题在于对 UNION 的查询进行计数。第二个查询正确计数 summ (1+5)，但值与查询相交。第一个给出了第一个子查询的结果。所以，我需要在计数之前获得独特的结果......

在 php 中，它应该是这样的：我通过内部连接与支付获取交易 id 列表，而不是在循环中构造一个长查询，以获得类似`SELECT COUNT(*) FROM transactions WHERE (*what i have now* OR id=$id_1 OR id=$id_2 OR id=$id_3 etc..)`

*UPD：已切割*

***解决！***=)

```
SELECT COUNT(*) FROM(
SELECT tr.* FROM transactions tr 
WHERE tr.asset='u_{$user_id}' OR (tr.liability='g' AND tr.l_info='{$user_name}')
UNION SELECT tr.* FROM transactions tr 
INNER JOIN payments pa ON tr.asset = CONCAT('p_', pa.id) 
WHERE pa.user_id = '{$user_id}' AND pa.status='100') 
AS total 
```

**作为总**重要！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T05:06:16.733

我解决了你的问题，我认为你想从联合子句中获取最大值，我不知道 mySql，所以我已经在 MS-SQL 中解决了你的问题。

逻辑：-我使用了 CTE，然后执行了 UNION 操作，然后我从两者中选择了 MAXIMUM。

```
WITH COUNTT AS (SELECT 1 AS TEST
UNION 
SELECT 5 AS TEST)
SELECT MAX(TEST) FROM COUNTT 
```

而且，代替硬编码的“1”和“5”，您可以使用您的计数查询，我认为这是您正在寻找的。并且，请将其标记为答案。

# mysql - MySQL将表实现到数据库中

> ID：11943749
> 
> 赞同：0
> 
> 时间：2012-08-13T23:35:50.617
> 
> 标签：mysql, sql, database, create-table

我必须实现以下任务： 任务：目前，数据库知道两种类型的消息：

*   用户发布且公开供所有人阅读的消息
*   用户发布的非公开消息。这些消息只能被发帖用户标记为朋友的用户阅读。

在此步骤中，您应该添加第三种类型的消息。这第三种类型的消息应该只能由指定的收件人阅读。这意味着数据库需要提供以下内容：

*   一种区分三种类型消息的方法。这涉及对消息表的更改。
*   一种指定特定消息的收件人是谁的方法。这可能需要一个额外的表。

所有这一切都必须再次以最少的存储量来实现，即，您必须从 MySQL 手册中选择适当的数据类型。您可以假设随着时间的推移添加的消息总数可能达到 1,000,000,000 条。您的工作是为此目的实施必要的更改和附加表以及所需的任何键和外键关系。

这是我的两张表：用户

```
CREATE TABLE IF NOT EXISTS `User` (
`user_id` int(10) unsigned NOT NULL auto_increment,
`given_name` varchar(60) default NULL,
`surname` varchar(60) default NULL,
`address` varchar(255) default NULL,
`city_id` int(10) unsigned NOT NULL,
`date_of_birth` datetime default NULL,
`email` varchar(80) default NULL,
PRIMARY KEY (`user_id`),
KEY `ix_user_surname` (`surname`),
KEY `ix_user_given_name` (`given_name`),
KEY `ix_user_name` (`given_name`,`surname`),
KEY `ix_user_date_of_birth` (`date_of_birth`),
KEY `ix_user_email` (`email`),
KEY `ix_user_city_id` (`city_id`)
) ENGINE=InnoDB 
```

第二张表：留言

```
CREATE TABLE IF NOT EXISTS `Message` (
`message_id` int(10) unsigned NOT NULL auto_increment,
`owner_id` int(10) unsigned default NULL,
`subject` varchar(255) default NULL,
`body` text,
`posted` datetime default NULL,
`is_public` tinyint(4) default '0',
PRIMARY KEY (`message_id`),
KEY `ix_message_owner_id` (`owner_id`)
) ENGINE=InnoDB 
```

我的解决方案：我正在考虑创建一个名为“Message_level”的新表，并有列“message_level_id”（将 1、2、3 称为 1=public、2=private、3=specific）和“message_level”（其中将在级别旁边声明公共，私人和特定）。然后我可以将“Message_level”用作“Message”表的外键，并将“is_public”列替换为“message_level_id”。

我对这个问题的处理方法正确吗？还有另一种方法可以提高效率吗？

我将如何处理指定特定消息的收件人是谁的第二个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:58:45.847

我会这样：

```
User: user_id, given_name, ...

Message: message_id, owner_id (fk User), subject, body, posted, message_type_id (fk Message_type)...

Message_recipients: user_id (fk User), message_id (fk Message)

Message_type: message_type_id, description (1:public, 2:friends, 3:specific_recipients) 
```

# html - Firefox 显示填充的方式与所有其他浏览器不同

> ID：11943752
> 
> 赞同：0
> 
> 时间：2012-08-13T23:36:39.503
> 
> 标签：html, css, firefox, cross-browser

我有一个标签，两边​​都有两个边框，边框必须填充它们所在的工具栏，为了实现这一点，我使用了填充。在 Chrome、IE 等中，顶部和底部填充必须设置为 9px 以填充工具栏，但在 Firefox 中它们必须设置为 4px。

这是一个添加了工具栏模型的[jsfiddle](http://jsfiddle.net/QNHpz/)。

标记非常简单；

```
<a href="Discover">
  <span class="navButton">
    Discover
  </span>
</a> 
```

我从 CSS 中删除了过渡和其他不需要的样式；

```
.navButton {width:50px; border-right-color:#171717; 
            border-right-width:1px; border-right-style:solid;
            position:relative; 
            padding-left:10px; padding-right:10px; 
            padding-top:9px; padding-bottom:9px;
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:39:38.257

我有一个小提琴，现在工作正常。我已将其设置为`display: inline-block`并更改了周围的填充和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:43:35.837

`display:inline-block`在这里会很合适（至少是一个合理的建议，没有看到其余的代码）。您还需要删除宽度声明，因为您的选项卡标题超过 50 像素 - 您现在无法注意到它的原因是因为内联渲染的元素（包括`<span>`使用默认`display`属性）无法应用尺寸。

[在这个小提琴中](http://jsfiddle.net/ovfiddle/UkgwS/2/)工作正常

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T23:47:23.327

Span 默认情况下是一个*内联*元素，并且可能处理与块元素完全不同的填充。尝试设置：

```
.navButton {
    display: block;
} 
```

并检查结果。

通常，您应该包含一个 CSS 重置脚本（Google 为它）。

# xcode - 未知的窗口类 Xcode 4.4

> ID：11943759
> 
> 赞同：0
> 
> 时间：2012-08-13T23:38:28.210
> 
> 标签：xcode, macos

我最近为我的 Mac 应用程序组织了项目文件夹，其中包含 40 多个自定义类。我通过将它们放在文件夹中来组织这些课程。

在让 Xcode 知道新文件的位置后，我运行了我的应用程序。记录了以下...

```
Unknown Window class TSDirectoryWindow in Interface Builder file,
 creating generic Window instead 
```

我进入编译源，删除了每个文件，然后将它们添加回来（认为编译器可能仍在查看旧位置）。没运气。

我是 Mac/Objective-C 开发的半新手，我开始认为组织我的文件是个坏主意。据我所知，这可能是一个很大的禁忌。每个笔尖似乎都有问题，因为我`MainMenu`在主界面时收到相同的消息，

```
Unknown class 'TSAppDelegate', using 'NSObject' instead. Encountered in Interface Builder file at path 
/Users/tsilva/Library/Developer/Xcode/DerivedData/Podsnatcher-dlctvrrkdaksfdbblvopdarwlslr/Build/Products/Debug/Podsnatcher.app/Contents/Resources/en.lproj/MainMenu.nib. 
```

关于如何解决这个问题的任何想法？感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:18:30.350

我将文件添加到“MyAppTests”目标的链接器，而不是应用程序本身。哎呀。

# objective-c - UINavigationController back button press and viewWillDisappear

> ID：11943764
> 
> 赞同：2
> 
> 时间：2012-08-13T23:39:02.600
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller, uinavigationcontroller

I've got a chat app and I simply want to let the connection manager to leave the current chatroom when the back button on my `UINavigationController` is pressed (or the view is left in any other way). `viewWillDisappear:` isn't working for me.

Unlike some others with issues ( [UINavigationController and viewWillDisappear](https://stackoverflow.com/questions/4072192/uinavigationcontroller-and-viewwilldisappear) for instance) I have what should be a totally textbook view setup - one `UINavigationController`, leading into a bunch of subclassed `UIViewControllers` connected by segues. What can I do to detect when I leave the chatroom view controller?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:12:18.937

Xcode 自动完成功能让我受益匪浅！

`- (void)viewWillDisappear:(BOOL)animated`工作正常由于某种原因，Xcode 还建议

`- (void)viewWillDisappear` 哪个不起作用！

与此处相同： [viewDidDisappear 未在 UINavigationController 上被调用](https://stackoverflow.com/questions/4186309/viewdiddisappear-not-getting-called-on-a-uinavigationcontroller?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:55:19.290

你确定它设置好了？我刚刚在 Xcode 中使用 Master-Detail 模板创建了一个新项目，我将它添加到我的详细视图控制器中，当我按下返回按钮时，“gone ...”按预期记录......

```
- (void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];

    NSLog(@"gone...");
} 
```

# mapi - How to programmatically add Public Folders to a new profile

> ID：11943768
> 
> 赞同：0
> 
> 时间：2012-08-13T23:39:35.000
> 
> 标签：mapi

I am modifying a profile for Outlook 2007 and higher. According to this [post](http://blogs.msdn.com/b/stephen_griffin/archive/2007/05/30/outlook-2007-public-folders-mapi-and-you.aspx) by Stephen Griffin, Outlook will do so automatically the first time the profile connects to the Exchange server. I need to do this (add pbExchangeProviderPublicGuid) to a profile that has already been connected in the past. *HrDispatchNotifications* does not work, and neither does opening Outlook because the Exchange server has already been configured.

I assume this process is very similar to adding Additional Mailboxes as shown [here](http://support.microsoft.com/kb/171636). So, how do I achieve what Outlook does the first time?

```
1\. ExchangeManageStore:: GetPublicFolderTable (like MFCMapi::DisplayPublicFolderTable)
2\. GetProps
3\. CreateProvider(what type??) or do I call CreateStoreEntryID? 
```

# python - How to call methods of Model Class in Interactive Console locally?

> ID：11943771
> 
> 赞同：3
> 
> 时间：2012-08-13T23:39:58.327
> 
> 标签：python, google-app-engine, google-cloud-datastore

I have been searching this since yesterday and still nothing. From all that researching this is my understanding so far.

*   You can access your datastore remotely with remote_api_shell.py
*   Make sure your path is set correctly in your Environment variable.

And according to my understanding the remote datastore that they were talking about is the datastore in appspot.com and not the local one. I don't want to deploy my app right now and hence I want to just work locally, for now atleast.

I created a model named Usersdb in my app. As someone coming from PHP, MYSQL background I thought GQL would have console environment for us to test the queries. But after some googling I found out that you can manipulate local datastore from the interactive console that's in

```
http://localhost:8081/_ah/admin/interactive 
```

From the post [Google App Engine GQL query on localhost](https://stackoverflow.com/questions/11460112/google-app-engine-gql-query-on-localhost) I got the idea of performing GqlQuery in the interactive console while in localhost which goes something like this:-

```
from google.appengine.ext import db
q = db.GqlQuery("SELECT * FROM Userdb where username = 'random_user'")
print q.get().username 
```

But what I really wanted to do was perform method calls like get_by_id() and get_by_key_name() and such in my interactive console without having to test on my app. Like:-

```
print Userdb.get_by_id(12) 
```

How can I get those running? Do I have to import my python file to the interactive console? I tried doing that too but it crashed app engine. I'm just starting out on app engine. Forgive me if this is a completely stupid question.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:52:36.670

您应该将您编写的模型类导入交互式控制台的会话中。例如，如果您`model.py`的应用程序中有一个名为的文件，其中包含您的`Userdb`类，您可以在交互式控制台中编写以下内容：

```
import model

print model.Userdb.get_by_id(12) 
```

# javascript - 正则表达式在 JS 中的字符串内的标签中包装 *****（星号）

> ID：11943774
> 
> 赞同：0
> 
> 时间：2012-08-13T23:40:23.390
> 
> 标签：javascript, regex, replace

我有一个字符串`foo ***`；我希望这样`foo <span>***</span>`

但是，数量`*`可以是任意数量，所以我想我需要一个 JS `replace`???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:45:58.990

像这样的东西可以解决问题：

```
"foo ***".replace(/([\*]+)/g,"<span>$1</span>"); 
```

或者，更一般地说，

```
str.replace(/([\*]+)/g,"<span>$1</span>"); 
```

[你可以在这里](http://jsfiddle.net/vZRa2/)看到它的作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:46:10.503

试试这个代码：

```
var str = 'foo ***';
str = str.replace(/(\*+)/g,function(arg){
    return '<span>' + arg + '</span>';
}); 
```

或者还有：

```
var str = 'foo ***';
str = str.replace(/\*+/g,'<span>$1</span>'); 
```

# javascript - select elements that don't contain a specific image with jquery

> ID：11943778
> 
> 赞同：0
> 
> 时间：2012-08-13T23:41:54.717
> 
> 标签：javascript, jquery, css-selectors

Hi I am trying to use jQuery to select all elements which have the class of "icon" which do not contain a particular image (to turn them off for filtering content)

I could do something like the example below, but it would seem like there would be a much cleaner way to select all elements that don't contain that image src to hide them.

Thank you for your feedback!

```
$('.icon').hide();
$('.icon').find('img[src$="'+src+'"]').parent().parent().show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:45:14.090

`$('.icon').find('img[src !="'+src+'"]').hide();`可能工作

# svg - 将 SVG 文件导入 ImageMagick

> ID：11943787
> 
> 赞同：1
> 
> 时间：2012-08-13T23:42:51.613
> 
> 标签：svg, imagemagick, imagemagick-convert

对不起，如果这属于服务器故障

我想知道使用 SVG(xml) 字符串作为`"convert msvg:- jpeg:- 2>&1"`命令的标准输入的正确方法是什么（使用 linux）

目前我只是保存一个临时文件用作输入，但在我的情况下数据来自一个 API，因此将字符串直接提供给命令显然是最有效的。

我感谢大家的帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:59:02.323

这应该有效：

```
convert  -  output.jpg 
```

**例子：**

```
convert  logo:  logo.svg
cat logo.svg | convert  -  logo.jpg 
```

**解释：**

1.  该示例的第一行创建一个 SVN 文件并将其写入磁盘。这只是一个准备停止，以便我们可以运行第二行。

2.  第二行是两个命令的*管道*`cat`：将文件的字节流式传输到*标准输出*（标准输出）。

3.  第一行仅用于为管道中的下一个命令做准备，以便下一个命令可以读入。

4.  下一个命令是`convert`.

5.  该`-`字符是一种告诉`convert`不从磁盘读取其输入数据，而是从*标准输入*（标准输入）读取其输入数据的方法。

6.  所以从它的*标准*`convert`输入读取它的输入数据并将它的 JPEG 输出写入文件。*`logo.jpg`*

**   所以我的第一个命令/行类似于您描述为*'current I'm just Saving a temp file to use as input' 的*步骤。

    *   我的第二个命令行不使用您的 API（我无权访问它，是吗？），但它演示了一种不同的方法来*'feeding a string directly to the command'*。

    *   所以最重要的教训是：无论`convert`通常从文件中读取输入的位置以及在命令行中写入文件名的位置，都可以将文件名替换`-`为告诉`convert`它应该从*stdin*读取。（但是您需要确保在`convert`'s 的标准输入上确实提供了可以消化的东西......）* 

 *抱歉，我无法比这更好地解释...*

# c# - How to add tap event to HubTile

> ID：11943788
> 
> 赞同：1
> 
> 时间：2012-08-13T23:42:53.357
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

I have the following implementation of the HubTile control from the windows phone toolkit, and everything is working correctly except for implementing a tap event from the selected tile. I am unsure of how to link the tap of a specific tile to an event handler in code behind (which should simply navigate to a new page in my project). What I have so far is as follows:

MainPage.xaml

```
<ListBox Grid.Row="0" x:Name="tileList" toolkit:TiltEffect.IsTiltEnabled="True">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <toolkit:HubTile Title="{Binding Title}" Margin="3"
                                         Notification="{Binding Notification}"
                                         DisplayNotification="{Binding DisplayNotification}"
                                         Message="{Binding Message}"
                                         GroupTag="{Binding GroupTag}"
                                         Source="{Binding ImageUri}"
                                         Tap="hubTile_Tap">
                        </toolkit:HubTile>

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

TileItem.cs

```
public class TileItem
{
    public string ImageUri
    {
        get;
        set;
    }

    public string Title
    {
        get;
        set;
    }

    public string Notification
    {
        get;
        set;
    }

    public bool DisplayNotification
    {
        get
        {
            return !string.IsNullOrEmpty(this.Notification);
        }
    }

    public string Message
    {
        get;
        set;
    }

    public string GroupTag
    {
        get;
        set;
    }

    //not sure how to implement this?
    public string Tap
    {
        get;
        set;
    }
} 
```

MainPage.xaml.cs

```
 #region Ctr

    public MainPage()
    {
        InitializeComponent();

        CreateHubTiles();
    }

    #endregion

    private void CreateHubTiles()
    {
        List<TileItem> tileItems = new List<TileItem>() 
        {
            //there will be at least 2 distinct tiles linking to seperate pages
            new TileItem() { ImageUri = "/Images/shareStatusImage.jpg", Title = "status", /*Notification = "last shared link uri",*/ Message = "last shared status message", GroupTag = "TileGroup", Tap = "shareStatus_Tap" },
            new TileItem() { ImageUri = "/Images/shareLinkImage.jpg", Title = "link", /*Notification = "last shared status message",*/ Message = "last shared link uri", GroupTag = "TileGroup", Tap = "shareLink_Tap" }
        };

        this.tileList.ItemsSource = tileItems;
    }

    #region Navigation

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        HubTileService.UnfreezeGroup("TileGroup");
    }

    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);

        HubTileService.FreezeGroup("TileGroup");
    }

    #endregion

    #region Event Handlers

    private void hubTile_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        //vibrate
        if (Settings.EnableVibration.Value)
        {
            VibrateController.Default.Start(TimeSpan.FromMilliseconds(40));
        }

        TileItem tap = sender as TileItem;
        string _tap = tap.Tap.ToString();  //NullReferenceException occurs here

        switch(_tap)
        {
            case "shareStatus_Tap":
                this.NavigationService.Navigate(new Uri("/Views/ShareStatusPage.xaml", UriKind.Relative));
                break;
            case "shareLink_Tap":
                this.NavigationService.Navigate(new Uri("/Views/ShareLinkPage.xaml", UriKind.Relative));
                break;
        }
    }
    #endregion 
```

So I have tried to create a tap property for each tile, and then when a tile is tapped, the event handler decides which tile was the tapped one and navigates to a new page accordingly. For some reason the `Tap` property is null though? The project loads in the emulator but a tile tap does not work, and on my actual device the app doesnt load at all?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:08:29.640

将点击事件处理程序更改为以下以正确实现：

```
private void hubTile_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        //vibrate
        if (Settings.EnableVibration.Value)
        {
            VibrateController.Default.Start(TimeSpan.FromMilliseconds(40));
        }

        //TileItem tap = sender as TileItem;
        HubTile tap = sender as HubTile;
        string _tap = tap.Title.ToString();  //NullReferenceException occurs here

        switch(_tap)
        {
            //case "shareStatus_Tap":
            case "status":
                this.NavigationService.Navigate(new Uri("/Views/ShareStatusPage.xaml", UriKind.Relative));
                break;
            //case "shareLink_Tap":
            case "link":
                this.NavigationService.Navigate(new Uri("/Views/ShareLinkPage.xaml", UriKind.Relative));
                break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:23:29.317

您收到**NullReferenceException**是因为您的**TileItem实例的****Tap**属性可能未设置。相反，您设置的是**HubTile**控件中**Tap**事件的处理程序。

 ******现在，为了获得你想要的行为，我建议如下：

1.  您应该添加*NavigationUri*属性，而不是*TileItem*上的*Tap*属性。
***   *在HubTile的**Tap*事件的事件处理程序中，您可以使用*NavigationUri*直接导航到相应的视图，而不是检查哪个图块被点击**

 ***以下是它的工作原理：

```
public class TileItem
{
    // previous properties (except Tap, as you don't need it)
    ...

    public string NavigationUri {get; set;}
} 
```

对于每个**TileItem**，给它相应的**NavigationUri**：

```
var shareStatusPage= new TileItem 
                     {
                        Title="Share Status",
                        ImageUri="ShareStatus.png", 
                        NavigationUri="/Views/ShareStatusPage.xaml", 
                        //rest of properties
                     };
var shareLinkPage= new TileItem 
                     {
                        Title="Share Link",
                        ImageUri="ShareLink.png", 
                        NavigationUri="/Views/ShareLinkPage.xaml", 
                        //rest of properties
                     }; 
```

简化的**Tap**事件处理程序变为：

```
private void hubTile_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    //vibrate
    if (Settings.EnableVibration.Value)
    {
        VibrateController.Default.Start(TimeSpan.FromMilliseconds(40));
    }

    TileItem item = sender as TileItem;
    this.NavigationService.Navigate(new Uri(item.NavigationUri, UriKind.Relative));
} 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T05:28:44.463

您不需要在 xaml 中绑定 tap 属性，而是创建一个 tap 处理程序并将处理程序的名称提供给 tap 属性。*********

# wcf - Does the svc file for a WCF always need anonymous access?

> ID：11943790
> 
> 赞同：0
> 
> 时间：2012-08-13T23:43:28.770
> 
> 标签：wcf

Is it **necessary to allow anonymous access for a svc file when hosting WCF in IIS** 7.5? If yes, then why is such an access needed?

**LATEST UPDATE** ***I found that svc doesn't need anonymous access.*** I think I was getting an error that seemed to be related to svc but wasn't. I am using the following security for the hosting website in IIS 7.5.

```
<security>
  <authentication>
    <anonymousAuthentication enabled="false" />
    <basicAuthentication enabled="true" /> 
    <windowsAuthentication enabled="true" />
  </authentication>
</security> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:38:53.663

感谢Voltagex，我找到了答案。在我最初的帖子中的**最新更新**下解释了这个答案。但是，我在这里也提到了它。

**我发现 svc 不需要匿名访问。**我想我遇到了一个似乎与 svc 相关但不是的错误。我在 IIS 7.5 中为托管网站使用以下安全性。SVC 访问与您为托管 WCF 的网站指定的安全性密切相关。就我而言，我对托管网站使用了以下安全性，我需要关闭匿名访问并只允许经过身份验证的用户访问托管网站文件资源，如 svc 文件。

```
<security>
 <authentication>
  <anonymousAuthentication enabled="false" />
  <basicAuthentication enabled="true" /> 
  <windowsAuthentication enabled="true" />
 </authentication>
</security> 
```

# google-fusion-tables - google-fusion-table add column to view

> ID：11943791
> 
> 赞同：1
> 
> 时间：2012-08-13T23:43:47.150
> 
> 标签：google-fusion-tables

My situation is this: I have one master fusion table with all data about all clients (with permissions only to me). I created another table that will have limited info (with permission to my team)

I decided I need to collect another piece of information. I CAN add a column to the master table, but I can't find a way to now select the column for the limited views. The only option I can see is delete the very elaborate limited view, and re-do it from the beginning.

There has to be a better way! What am I missing?

Thanks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:56:17.283

我认为目前无法做到这一点，因为在创建视图后无法更改视图的定义。不过，这将是一个不错的功能。您可以[在项目网站上请求它](http://code.google.com/p/fusion-tables/)；）

您现在所能做的就是创建一个新视图。当前观点的“详尽”究竟是什么？“迁移”到新的应该不会太难。

# php - Zend Framework CSS issue

> ID：11943792
> 
> 赞同：0
> 
> 时间：2012-08-13T23:43:53.437
> 
> 标签：php, css, zend-framework

I am new to ZF but have been looking into one specific issue I am having. I am currently trying to append a stylesheet to my site through the layout.phtml file. It works fine when the URL remains at the index action of a controller however if I go to site/controller/method the stylesheet presents incorrectly. I am doing everything right I believe. I have used the following code on my site to append the stylesheet:

```
<?php
        $this->headLink()->appendStylesheet($this->baseUrl('stylesheets/style.css'))
                ->appendStylesheet($this->baseUrl('stylesheets/jplayer.css'))
                ->appendStylesheet($this->baseUrl('stylesheets/contact.css'));
        echo $this->headLink();
        $this->headScript()->appendFile("http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js");
        echo $this->headScript();
        ?> 
```

I have also tried doing this from the controller action minus the echo part which ends up breaking the page all together.

EDIT: I got the css to show up now but the font wont display the correct one. Has anyone experienced this and could this be a part of my css directing to the incorrect path or the font breaking somewhere.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:48:26.457

将样式表文件夹保存在项目的公共目录中

```
 <?php

    $this->headLink()->appendStylesheet('stylesheets/style.css');
    $this->headLink()->appendStylesheet('stylesheets/jplayer.css');
    $this->headLink()->appendStylesheet('stylesheets/contact.css');
    echo $this->headLink();
    $this->headScript()->appendFile("http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js");
    echo $this->headScript();

 ?> 
```

希望它能解决你的问题

# android - Drawable.setState() 如何控制drawable的具体状态？

> ID：11943795
> 
> 赞同：17
> 
> 时间：2012-08-13T23:44:12.360
> 
> 标签：android, android-widget

我有一个像这样的drawable：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true"
      android:state_window_focused="true"
      android:drawable="@drawable/seek_thumb_pressed" />

<item android:state_focused="true"
      android:state_window_focused="true"
      android:drawable="@drawable/seek_thumb_selected" />

<item android:state_selected="true"
      android:state_window_focused="true"
      android:drawable="@drawable/seek_thumb_selected" />

<item android:drawable="@drawable/seek_thumb_normal" /> 
```

在代码中，如何设置 Drawable 的特定状态？我想将其设置为 state_pressed=true 状态。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-13T23:52:10.093

知道了。此处的评论有所帮助：[Android：如何以编程方式更新选择器（StateListDrawable）](https://stackoverflow.com/questions/5092649/android-how-to-update-the-selectorstatelistdrawable-programmatically)

所以`Drawable.setState()`需要一个整数数组。这些整数表示可绘制对象的状态。你可以传递任何你想要的整数。一旦 int 传入匹配状态列表可绘制对象中的“项目”，可绘制对象就会在该状态下绘制。

它在代码中更有意义：

```
int[] state = new int[] {android.R.attr.state_window_focused, android.R.attr.state_focused};
minThumb.setState(state); 
```

请注意，我的状态列表可绘制对象同时具有`state_pressed="true"`和`android:state_window_focused="true"`。所以我必须将这两个 int 值都传递给`setState`. 当我想清除它时，我只是`minThumb.setState(new int[]{});`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-16T13:37:09.810

没有足够的评论点，所以这只是android-developer所说的补充。对于某些状态，例如 state_enabled，没有明显的方法可以设置该状态的相反值（例如，没有 state_disabled）。要指示负面或相反的状态，只需传递该状态的资源的负值。

```
int[] state = new int[] {-android.R.attr.state_enabled}; //Essentially state_disabled 
```

然后像往常一样将该整数数组传递给 setState() 方法。

```
minThumb.setState(state); 
```

# jquery - 更改 Fancybox 2 加载图标和样式

> ID：11943798
> 
> 赞同：1
> 
> 时间：2012-08-13T23:44:26.543
> 
> 标签：jquery, fancybox

我目前在我的应用程序上有一个加载屏幕样式，并希望将其用于 Fancybox 加载屏幕以确保一致性。

以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:50:42.903

简单：尝试将背景设置为 gif：

```
<style type="text/css"> 
#fancybox-content { 
    background: url(images/ajax-loader.gif) 50% 50% no-repeat; 
} 
</style> 
```

另一种方法：您应该只附加到内置元素并稍微修改用户界面：http: [//fancyapps.com/fancybox/#useful](http://fancyapps.com/fancybox/#useful)

# android - Galaxy Nexus 上来自自定义相机的图像模糊不清

> ID：11943800
> 
> 赞同：3
> 
> 时间：2012-08-13T23:44:59.707
> 
> 标签：android, android-camera, galaxy

我在应用程序中有一个自定义相机，在大多数设备上拍摄的图像看起来都不错，但在 Galaxy Nexus 上，情况就不同了。Galaxy nexus 中的图像模糊不清。我在摩托罗拉 Atrix 上也看到了颗粒状线条。但 Droid X、Droid Razr、HTC Evo、HTC 不可思议都显示出不错的成绩。知道为什么会发生吗？这就是我到目前为止所拥有的。PS：我在活动中使用自动对焦。

```
public class CameraPreview extends SurfaceView implements
    SurfaceHolder.Callback {

private SurfaceHolder mHolder;
private Camera mCamera;

public CameraPreview(Context context, Camera camera) {
    super(context);
    mCamera = camera;
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the
    // preview.
    try {
        mCamera.setPreviewDisplay(holder);
        Camera.Parameters parameters = mCamera.getParameters();
        List<String> focusModes = parameters.getSupportedFocusModes();
        if (focusModes.contains(Camera.Parameters.FOCUS_MODE_AUTO)) {
            parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
        }

        parameters.set("orientation", "portrait");

        mCamera.setDisplayOrientation(90);
        mCamera.setParameters(parameters);
        mCamera.startPreview();
    } catch (IOException e) {
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

    if (mHolder.getSurface() == null) {
        // preview surface does not exist
        return;
    }
    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e) {
        // ignore: tried to stop a non-existent preview
    }

    try {
        mCamera.startPreview();

    } catch (Exception e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T05:17:33.957

我解决了这个问题已经有一段时间了。如果我没记错的话，我通过在获取相机实例时添加以下行来解决。

```
Camera.Parameters parameters = camera.getParameters();
List<Camera.Size> sizes = parameters.getSupportedPictureSizes();
int w = 0, h = 0;
for (Size size : sizes) {
   if (size.width > w || size.height > h) {
      w = size.width;
      h = size.height;
   }

 }
 parameters.setPictureSize(w, h); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-12T17:27:47.113

你试过这个吗？

```
if (cameraParameters.getSupportedSceneModes().contains(Camera.Parameters.SCENE_MODE_STEADYPHOTO)) {
   cameraParameters.setSceneMode(Camera.Parameters.SCENE_MODE_STEADYPHOTO);
} 
```

# expressionengine - ExpressionEngine：自定义 URL 的多个渠道问题

> ID：11943801
> 
> 赞同：0
> 
> 时间：2012-08-13T23:45:01.550
> 
> 标签：expressionengine

在此页面上：http: [//build.jhousemedia3.com/pleasanton/shop/district-profile/stoneridge-shopping-center/](http://build.jhousemedia3.com/pleasanton/shop/district-profile/stoneridge-shopping-center/)

URL 的格式如下 http://build.jhousemedia3.com/pleasanton/[channel]/[template]/[query parameter]

我正在使用 URL 的最后一段（segment_4）运行 exp:channel:entries 查询

发生的情况是，当我从这个 URL 运行它时，我无法从除特定购物区频道之外的任何其他频道中提取数据。如果我要将最后一段更改为 /?id=28 （或类似的），我可以从多个通道中提取数据。

有任何想法吗？

基于URL拉取商圈简介的代码：

```
{exp:channel:entries url_title="{segment_4}" limit="1" channel="shopping_districts"}
    <h2 class="upper"><span class="greenlight">{title}</span></h2>
    {if center_website}
        <div class="greyroundbox right"><a href="{center_website}" class="external-link" target='_blank'>Visit the Website</a></div>
    {/if}
    <p>{shopping_center_description}</p>
    <div class="clear"></div>
{/exp:channel:entries} 
```

用于提取任何业务数据的代码

```
{exp:channel:entries channel="businesses"}
    <li class="{switch='first|'}">
        <p>
        <a href="{path='pages/business-profile'}" class="main-title">{business_name}</a>
        <a href="{path='pages/shopping-category'}" class="green-title">{categories_shopping}</a><br />
        {if phone}
            <strong>Phone</strong>: {phone}<br />
        {/if}
        <strong>Address</strong>: {address_1}<br />
        {if address_2}
            {address_2}<br />
        {/if}
        {city}, {state}, {zip}<br />
        {if website}
            <a href="{website}" class="grey"><em>{website}</em></a>
        {/if}
        </p>
    </li>
{/exp:channel:entries} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:16:26.707

也许很明显，但是您是否在另一个循环中添加了 dynamic="no" ？

```
{exp:channel:entries channel="businesses" dynamic="no"} 
```

# c# - 从列表中删除某些内容

> ID：11943808
> 
> 赞同：2
> 
> 时间：2012-08-13T23:46:06.277
> 
> 标签：c#

我正在尝试使用计数器从列表中删除某些内容，但它对我不起作用。

```
 int i =0;
    foreach(Rolls rl in rolls)
    {   
        if(rl.getCourseId == courseId && rl.getStudentId == studentId)
        {
            rolls.RemoveAt(i) ;   
        }
        i++;
    } 
```

谁能明白为什么这可能行不通。它给了我一个运行时异常：

“集合已修改；枚举操作可能无法执行。”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T23:49:38.427

[Jonas 解释了为什么这不起作用](https://stackoverflow.com/a/11943817/65358)，但我想我会提供另一种选择。

您可以使用[`List<T>.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)一次调用删除所有匹配项：

```
rolls.RemoveAll(rl => rl.getCourseId == courseId && rl.getStudentId == studentId); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T23:47:14.777

在 foreach-ing 时不能修改集合。尝试使用常规 for 循环（或 while 循环）：

```
int i = 0;
while(i < myCollection.Count)
{
  if(removeItem)
    myCollection.RemoveAt(i);
  else
    ++i;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T23:47:24.060

您无法在使用 迭代集合时修改集合`foreach`。

尝试像这样使用 for 循环 `for(int i = 0; i < rolls.Length; i++) {`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T00:56:17.000

你应该做一个环回

```
for(int i=rolls.Count-1;i>=0;i--)
    if(rolls[i].getCourseId == courseId && rolls[i].getStudentId == studentId)
        rolls.RemoveAt(i) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T23:49:55.603

集合上的 Foreach 不会那样工作。尝试这个：

```
for (int x = 0; x < rolls.Count; x++)
{
    if(rolls[x].getCourseId == courseId && rolls[x].getStudentId == studentId)
    {
        rolls.RemoveAt(x);
        --x; //since we removed an item, the index needs to be updated accordingly
    }
} 
```

# c# - 我需要在数据库进程发生 10 次后停止它的发生

> ID：11943820
> 
> 赞同：-1
> 
> 时间：2012-08-13T23:47:25.057
> 
> 标签：c#, timer

此方法每 5 秒向 db 添加一些内容。

我想在添加 10 个产品后停止此过程。

我怎样才能停止这个过程？

```
public static  void AddMyProductToDB()
{
    Timer myTimer = new Timer(5000);
    myTimer.Start();
    if (!CountControl())
    {
        myTimer.Stop();
        myTimer.Enabled = false;
        myTimer.Dispose();
    }
    else
    {
        myTimer.Elapsed += new ElapsedEventHandler(MyWork);
        while (true) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:01:23.160

您有无限循环，它将阻止代码第二次执行。

此外，您似乎必须阅读本教程

[http://www.dotnetperls.com/timer](http://www.dotnetperls.com/timer)

或使用此代码段

```
for (int i = 0; i < 5; i++)
{
    MyWork();
    System.Threading.Thread.Sleep(5000);
} 
```

# python - 组合框 wxpython 程序没有时间做出选择

> ID：11943824
> 
> 赞同：0
> 
> 时间：2012-08-13T23:47:54.747
> 
> 标签：python, wxpython

我正在编写一个程序，以便可以通过电子邮件和使用 wxpython 发送短信。使用组合框选择电话号码附加到的运营商。但是，在我有机会选择运营商之前，该计划会继续进行其他所有操作。在我做出选择之前，有没有办法让它停下来？仍在学习如何在此处复制/粘贴，因此请原谅任何缩进错误，这在我的代码中都是正确的。谢谢大家！:)

```
 if password.ShowModal() == wx.ID_OK:
      pwd =password.GetValue()
      phone_number = wx.TextEntryDialog(self,"Phone Number", "Phone Number", "")
      if phone_number.ShowModal() == wx.ID_OK:
        number = phone_number.GetValue()
        self.carrier = wx.ComboBox(self, -1, pos=(10, 50), choices=carriers, style=wx.CB_READONLY)
        self.carrier.Bind(wx.EVT_COMBOBOX, self.onCombo)
        if self.carrier.ShowModal() == wx.EVT_COMBOBOX:
           message = wx.TextEntryDialog(self,"Your Message", "Your Message", "")
           if message.ShowModal() == wx.ID_OK:

              msg = message.GetValue()
              smtpserver = smtplib.SMTP("smtp.gmail.com", 587)
              smtpserver.ehlo()
              smtpserver.starttls()
              smtpserver.ehlo
              smtpserver.login(username, pwd)
              header = 'To:' + email + '\n' + 'From: ' + username + '\n' + 'Subject:testing \n'
              print header
              msg1 = header + msg
              smtpserver.sendmail(username, email, msg1)
              smtpserver.close()

 def onCombo(self, event):

    self.selection = self.carrier.GetValue()
    print self.selection
    print self.number
    self.email = number + selection
    print email
    return self.email 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:59:08.270

马上我可以告诉你那`self.carrier`是类型`wx.ComboBox`并且没有`ShowModal()`方法。如果它这样做了，它就不会返回`wx.EVT_COMBOBOX`。该`ShowModal()`方法返回被单击的按钮的 ID。`wx.EVT_COMBOBOX`是一个事件，而不是一个 ID，因此不会被返回。

只有`wx.Dialog`s 使用`ShowModal()`. 看起来您想要的对话框是一个（您可以[在此处](http://www.blog.pythonlibrary.org/2010/07/10/the-dialogs-of-wxpython-part-2-of-2/)`wx.SingleChoiceDialog`找到教程，但您需要向下滚动大约 7/8。或者只需点击并搜索“singlechoice”）。这将显示一个列表并提示用户进行单个选择。`ctrl+f`

或者，您可以创建自己的自定义对话框（[此处](http://wiki.wxpython.org/AnotherTutorial/#Custom_dialogs)和[此处](http://zetcode.com/wxpython/dialogs/)的教程），在一个方便的对话框中包含您需要的所有信息（而不是三个单独的对话框）。

我写了**草稿**，你可以在下面找到。请记住，我尚未对其进行测试，因此可能会出现错误，但它应该让您了解需要做什么。此外，您可能应该将对象放置在 sizer 中并按照您想要的方式组织布局。

```
class MyTxtMsgDialog (wx.Dialog):
    def __init__(self, parent):
        wx.Dialog.__init__(self, parent=parent, title="My Txt Message Dialog")

        self.number = wx.TextCtrl(self)
        self.carrier = wx.ComboBox(self, -1, pos=(10, 50), choices=carriers, style=wx.CB_READONLY)
        self.message = wx.TextCtrl(self, style=wx.TC_MULTILINE) #means this TextCtrl will be multiple lines, not just one
        self.okButton = wx.Button(self, wx.ID_OK, "OK")
        #Setting the ID to wx.ID_OK is important. Any of the wx.ID_* variables work natively with ShowModal()
        #but if you created your own ID using the wx.NewId() method then you will need to manually call
        #"self.EndModal(<your ID>)" when your button is clicked. 
```

然后，您可以使用以下方法调用它：

```
txtMsgDialog = MyTxtMsgDialog(self)
if txtMsgDialog.ShowModal() == wx.ID_OK: #check to see if OK was pressed
    #save the values
    self.number = txtMsgDialog.number.GetValue()
    self.carrier = txtMsgDialog.carrier.GetGetValue()
    self.message = txtMsgDialog.message.GetValue()

    txtMsgDialog.Destroy() #close the dialog 
```

~~最后一点：正如您在我的示例中看到的那样，`Destroy()`当您完成所有对话框时，最好在所有对话框上调用该方法。这将关闭它们并释放资源。但是要小心，因为在调用此方法后，您尚未保存的任何变量都将消失。~~
我知道您不打电话的原因`Destroy()`是因为您之前提出的问题的答案。这主要是一个风格问题，但我认为其他评论者错了，当你完成对话时，你应该破坏你的对话。它关闭对话框，释放您的资源，这是编写所有教程的方式。

# objective-c - ipad 后缀不适用于图像

> ID：11943825
> 
> 赞同：2
> 
> 时间：2012-08-13T23:48:03.933
> 
> 标签：objective-c, ios, xcode, ipad, ios-simulator

我正在制作一个通用应用程序并尝试为每个设备加载正确分辨率的背景。对于 4 种不同的情况，我有 4 种不同的图像，但 ~ipad 后缀不起作用。我正在使用 iOS 模拟器，这就是发生的事情：

iPhone：加载“bg_one.jpg”

iPhone Retina：加载“bg_one@2x.jpg”

iPad：加载“bg_one.jpg”

iPad Retina：加载“bg_one@2x.jpg”

我有一个“bg_one~ipad.jpg”和一个“bg_one@2x~ipad.jpg”，但它们从未被使用过。有什么问题？

更新：

我仍然想要解决这个问题，但我会分享我在此期间使用的解决方法：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
     bg = [CCSprite spriteWithFile:@"bg_main.jpg"];
else bg = [CCSprite spriteWithFile:@"bg_main~ipad.jpg"]; 
```

# java - 如何制作由文件中的一行分隔的每个字符串的下拉列表

> ID：11943827
> 
> 赞同：0
> 
> 时间：2012-08-13T23:48:15.090
> 
> 标签：java, swing, save, jlist, jtextarea

如何放置一个包含每个字符串列表的下拉列表，当我在该列表中选择一个项目然后按下加载按钮时，它只会显示该字符串上的内容。这是我的代码，我实际上输入了字符串的编号，并使用 while 语句显示字符串的数据。

我如何才能真正放置一个下拉列表，它的内容将是每个字符串上注册的数字。像这样

1 231231

2 123124

3 123124

4 232312

如果我选择 4 并按“加载”，它将显示“232312”，每次我保存数据时，每行都会注册一个唯一编号，就像“4”是唯一编号一样。232312 是它的数据

```
package datasaving;
import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import javax.swing.*;

public class Datasaving {

    /**
     * @param args the command line arguments
     * @throws FileNotFoundException
     * @throws IOException  
     */
    public static void main(String[] args) throws FileNotFoundException, IOException {
        JPanel panel = new JPanel();
        JFrame frame = new JFrame();
        final JTextField input0 = new javax.swing.JTextField(20);
        final JTextField input1 = new javax.swing.JTextField(20);
        final JTextField out = new javax.swing.JTextField(20);
        final JTextField line = new javax.swing.JTextField(20);

        JButton save = new javax.swing.JButton("Save");
        JButton load = new javax.swing.JButton("Load");
        frame.add(panel);
        frame.setSize(240,200);
        panel.add(input0);
        panel.add(input1);
        panel.add(save);
        panel.add(line);
        panel.add(out);
        panel.add(load);

        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.setVisible(true);

        save.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent e) {
                                 File file = new File("data.dat");

                            try {
                                 try (FileWriter writer = new FileWriter(file, true)) {
                                 String data0 = input0.getText();
                                 String data1 = input1.getText();
                                 writer.write(data0+":"+data1+"\n");
                                }

                                System.out.println("Data Saved");
                                } catch (IOException | HeadlessException z) {
                                JOptionPane.showMessageDialog(null, e);
                                }
                                } 
                                });
        load.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent e) {

                                 int lines = Integer.parseInt(line.getText());

                                     try {
                                 FileInputStream fs= new FileInputStream("data.dat");
                                 BufferedReader br = new BufferedReader(new InputStreamReader(fs));
                                 for(int i = 0; i < lines; ++i) {
                                 br.readLine();
                                 }
                                 out.setText(br.readLine());

                                JOptionPane.showMessageDialog(null, "Loaded");
                                } catch (   IOException | HeadlessException es) {
                                JOptionPane.showMessageDialog(null, e);
                                }
                                 }

                                });

    }
} 
```

例如： John blahblahblahblah Keith blahblahblahblah Joe blahblahblahblah Kenneth blahblahblahblah Christian blahblahblahblah 第一个单词“Names”将添加到 JList 或 JComboBox 如何使名称成为 Array。我知道如何使用 .split(); 但我不知道如何在文件的每一行中做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:56:16.093

1) JTextField 不支持多行。请改用[JTextArea](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)。对于文本区域，您可以使用 myTextArea.append() 在阅读时添加行。

2）但实际上，听起来[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)或[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)可能是您真正想要的：

*   [http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

3）你的基本程序看起来不错

'希望有帮助！

# python - Python：如何将构造函数放入 map() 函数中？

> ID：11943831
> 
> 赞同：10
> 
> 时间：2012-08-13T23:48:47.573
> 
> 标签：python, functional-programming

假设我有一个类，其构造函数采用整数。我有一个整数列表。如何使用`map()`创建此类对象的列表，每个对象都使用其各自的整数构造？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-13T23:52:49.937

和其他功能一样吗？

```
>>> class Num(object):
...     def __init__(self, i):
...             self.i = i
... 
>>> print map(Num, range(10))
[<__main__.Num object at 0x100493450>, <__main__.Num object at 0x100493490>, <__main__.Num object at 0x1004934d0>, <__main__.Num object at 0x100493510>, <__main__.Num object at 0x100493550>, <__main__.Num object at 0x100493590>, <__main__.Num object at 0x1004935d0>, <__main__.Num object at 0x100493610>, <__main__.Num object at 0x100493650>, <__main__.Num object at 0x100493690>] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T23:51:35.100

```
map(lambda x: MyClass(..., x,...), list_of_ints) 
```

还可以考虑使用列表推导而不是`map`：

```
[MyClass(..., x, ...) for x in list_of_ints] 
```

以上任何一个都将返回您的类的对象列表，假设`MyClass(..., x,...)`是您的类并且`list_of_ints`是您的整数列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-07T23:29:08.207

签[出 itertools.starmap](http://docs.python.org/2/library/itertools.html#itertools.starmap "itertools.starmap")。

```
In [1]: import itertools
In [2]: class C:
   ...:     def __init__(self, arg1, arg2):
   ...:         pass
   ...:     
In [3]: classes = itertools.starmap(C, [(1,2), (3,4)])
In [4]: print list(classes)
[<__main__.C instance at 0x10e99b7e8>, <__main__.C instance at 0x10e99b830>] 
```

# jquery - 关于 jQuery XMLHttpRequest CORS GET 请求？

> ID：11943832
> 
> 赞同：0
> 
> 时间：2012-08-13T23:48:57.150
> 
> 标签：jquery, ajax, xmlhttprequest, cors, jqxhr

我必须在`Authentication`我的所有 jQuery Ajax 请求中附加一个自定义标头（等等）。

我知道这可以通过以下方式完成：

> **beforeSend(jqXHR, settings) 函数**
> 
> 一个预请求回调函数，可用于在发送之前修改 jqXHR（在 jQuery 1.4.x 中为 XMLHTTPRequest）对象。使用它来设置自定义标题等。jqXHR 和设置映射作为参数传递。

但是，在阅读`XMLHttpRequest`对象[文档](http://api.jquery.com/types/#XMLHttpRequest)（XMLHTTPRequest 对象的超集）时，有一句话让我很害怕：

> 请注意，AJAX 函数仅在请求中实际使用 XHR 对象时返回或传递 XHR 对象。例如，JSONP 请求和跨域 GET 请求使用脚本元素而不是 XHR 对象。

*CORS GET 请求使用脚本而不是 XHR 对象*是什么意思？这是否意味着 GET 请求无法设置自定义标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:57:12.800

应该可以在 GET 请求中发送自定义标头 - JSONP 使用脚本注入（脚本标签动态插入到您的文档中）而不是 XMLHttpRequest

# css - CSS表格宽度无法设置

> ID：11943834
> 
> 赞同：0
> 
> 时间：2012-08-13T23:49:02.720
> 
> 标签：css

2 列，几行。整个桌子的宽度似乎设置得很好。没有机会改变它。我所能做的就是移动行分隔符，以便一列被拉伸而另一列扩展。

这是 CSS 文件。

```
 body {
    font: normal 11px auto "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
    color: #4f6b72;
    background: #E6EAE9;
}

a {
    color: #c75f3e;
}

#mytable {
    width: 450px;
    padding: 0;
    margin: 0;
    height: 39px;
}

caption {
    padding: 0 0 5px 0;
    width: 489px;    
    font: italic 11px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
    text-align: right;
}

th {
    font: bold 11px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
    color: #4f6b72;
    border-right: 1px solid #C1DAD7;
    border-bottom: 1px solid #C1DAD7;
    border-top: 1px solid #C1DAD7;
    letter-spacing: 2px;
    text-transform: uppercase;
    text-align: left;
    padding: 6px 6px 6px 12px;
    background: #CAE8EA url(images/bg_header.jpg)  no-repeat;
}

th.nobg {
    border-top: 0;
    border-left: 0;
    border-right: 1px solid #C1DAD7;
    background: none;
}

td {
    border-right: 1px solid #C1DAD7;
    border-bottom: 1px solid #C1DAD7;
    background: #fff;
    padding: 6px 6px 6px 12px;
    color: #4f6b72;
}

td.alt {
    background: #F5FAFA;
    color: #797268;
}

th.spec {
    border-left: 1px solid #C1DAD7;
    border-top: 0;
    background: #fff url(images/bullet1.gif)  no-repeat;;
    font: bold 10px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
}

th.specalt {
    border-left: 1px solid #C1DAD7;
    border-top: 0;
    background: #f5fafa url(images/bullet2.gif)  no-repeat;;
    font: bold 10px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
    color: #797268;
} 
```

而这张桌子。

```
 <table id="mytable" cellspacing ="0">
    <caption>Table 1: Descriptions </caption>
    <tr>
      <th scope="col" abbr="Configurations" class="nobg" style="width: 47px">Configurations</th>
      <th scope="col" abbr="Dual 1.8GHz">Original Stack</th>
    </tr>
    <tr>
      <th scope="row" class="spec" style="width: 47px">Model</th>
      <td class="style1">3xPa</td>
    </tr>
    <tr>
      <th scope="row" class="specalt" style="width: 47px">Year</th>
      <td class="alt" style="width: 181px">1998/A</td>
    </tr>
    </table> 
```

我不确定是什么阻止我改变整个表格的宽度。我尝试更改 #mytable 中的 width 属性，但它完全没有做任何事情。我正在使用 VS 2010，aspx 网络表单。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:56:08.270

在 chrome 上更改 css 中的表格宽度对我来说很好。

尝试删除标题的宽度，标题上的绝对宽度可能会诱使您认为表格大小没有改变......

```
caption {
    padding: 0 0 5px 0;
    /*width: 489px;  Commented Out */
    font: italic 11px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
    text-align: right;
} 
```

# go - 什么是通道缓冲区大小？

> ID：11943841
> 
> 赞同：96
> 
> 时间：2012-08-13T23:49:48.863
> 
> 标签：go, channel

我正在尝试创建一个异步通道，并且一直在查看[http://golang.org/ref/spec#Making_slices_maps_and_channels](http://golang.org/ref/spec#Making_slices_maps_and_channels)。

```
c := make(chan int, 10)         // channel with a buffer size of 10 
```

缓冲区大小为 10 是什么意思？缓冲区大小具体代表/限制什么？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-08-13T23:52:42.620

缓冲区大小是可以在没有发送阻塞的情况下发送到通道的元素数。默认情况下，通道的缓冲区大小为 0（您可以使用 获得`make(chan int)`）。这意味着每次发送都会阻塞，直到另一个 goroutine 从通道接收。缓冲区大小为 1 的通道可以容纳 1 个元素，直到发送块，所以你会得到

```
c := make(chan int, 1)
c <- 1 // doesn't block
c <- 2 // blocks until another goroutine receives from the channel 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-10-07T14:18:54.600

以下代码说明了无缓冲通道的阻塞：

```
// to see the diff, change 0 to 1
c := make(chan struct{}, 0)
go func() {
    time.Sleep(2 * time.Second)
    <-c
}()
start := time.Now()
c <- struct{}{} // block, if channel size is 0
elapsed := time.Since(start)
fmt.Printf("Elapsed: %v\n", elapsed) 
```

[你可以在这里](https://play.golang.org/p/KHkrkxCVdQ)玩代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-27T04:57:58.233

```
package main

import (
    "fmt"
    "time"
)

func receiver(ch <-chan int) {
    time.Sleep(500 * time.Millisecond)
    msg := <-ch
    fmt.Printf("receive messages  %d from the channel\n", msg)
}

func main() {
    start := time.Now()
    zero_buffer_ch := make(chan int, 0)
    go receiver(zero_buffer_ch)
    zero_buffer_ch <- 444
    elapsed := time.Since(start)    
    fmt.Printf("Elapsed using zero_buffer channel: %v\n", elapsed)

    restart := time.Now()
    non_zero_buffer_ch := make(chan int, 1)
    go receiver(non_zero_buffer_ch)
    non_zero_buffer_ch <- 4444
    reelapsed := time.Since(restart)
    fmt.Printf("Elapsed using non zero_buffer channel: %v\n", reelapsed)
} 
```

结果：

从频道接收消息 444

使用 zero_buffer 通道经过：505.6729ms

使用非 zero_buffer 通道经过：0s

# macos - 在 OS X 上部署独立的 GUI Perl 应用程序

> ID：11943849
> 
> 赞同：3
> 
> 时间：2012-08-13T23:50:51.730
> 
> 标签：macos, perl, user-interface, desktop-application

除了 ActiveState 的 PerlApp 之外，还有哪些工具可以将 Perl GUI 应用程序、库、解释器等捆绑到 OS X 上的独立应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:54:43.377

我过去使用过来自[http://sveinbjorn.org/platypus/](http://sveinbjorn.org/platypus/)的鸭嘴兽，但我不确定它可以让你捆绑什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:47:35.343

我使用[PAR](http://par.perl.org/)捆绑了一个 Perl/Tk 应用程序。

# sql-server - 一个大的偏移量会在 TSQL 中触发数百万次读取吗？

> ID：11943855
> 
> 赞同：1
> 
> 时间：2012-08-13T23:51:39.873
> 
> 标签：sql-server, performance, tsql, profiling

我有一个需要吸收整个 MS SQL 数据库的系统。目前它这样做是这样的：

```
select top 1000 from table where id > 0 order by id; 
```

然后，对于下一个块：

```
select top 1000 from table where id > 1000 order by id; 
```

进而：

```
select top 1000 from table where id > 2000 order by id; 
```

等等。

在 MySQL 中，我了解到做`LIMIT`和`OFFSET`查询[非常慢，因为数据库必须首先对结果进行排序，然后扫描`OFFSET`count](https://stackoverflow.com/a/4502426/64911)。当该计数变大时，随着读取计数猛增，生活开始变得糟糕。

我的问题是：同样的问题是否适用于`TOP`？换句话说，当我在一个有 10,000,000 条记录的数据库上运行这些查询时，我是否可以期待一个非常高的读取计数`id > 9,999,000`？如果是这样，有什么方法可以更好地处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:11:32.187

如果对 ID 进行索引，将会非常快。如果该列没有被索引，那么它会发生全表扫描。

我还建议以下几点：

```
 select * from table where id > 0 and id <= 1000 order by id ; 
```

这样，如果您没有所有记录，您就没有错误（重复）。

# ruby - Capybara/Selenium - http://localhost 上的应用程序的 NS_ERROR_MALFORMED_URI

> ID：11943873
> 
> 赞同：0
> 
> 时间：2012-08-13T23:53:30.497
> 
> 标签：ruby, selenium, capybara

我正在尝试设置 RSpec、Capybara 和 Selenium 来测试在传统 localhost:80 上运行的 PHP 应用程序。每当我运行该套件时，Selenium 都会失败并抱怨 URI 格式错误。

这是我的 spec_helper.rb。

```
require 'bundler/setup'
require 'rspec'
require 'capybara/rspec'

Capybara.server_port = 80
Capybara.app_host = 'http://localhost'
Capybara.run_server = false
Capybara.default_driver = :selenium 
```

这是我唯一的规格：

```
require File.dirname(__FILE__) + '/../spec_helper'

describe "visting the website", :type => :request do

  it "should display an html page" do  
      visit ( '/' )
      page.should have_selector( 'html' )
  end  

end 
```

但它保释了。我错过了什么？

```
Failures:

  1) visting the website should display an html page
     Failure/Error: visit ( '/' )
     Selenium::WebDriver::Error::UnknownError:
       Component returned failure code: 0x804b000a (NS_ERROR_MALFORMED_URI) [nsIIOService.newURI]
     # ./spec/requests/sign_in_spec.rb:6:in `block (2 levels) in <top (required)>' 
```

我的 URI 对我来说看起来并没有格式错误……`visit`如果我传入 'http://localhost' 就可以了，但这并不理想。

这是我的 Gemfile

```
gem 'rspec'
gem 'capybara', :git => 'https://github.com/jnicklas/capybara.git'
gem 'launchy'
gem 'ruby-debug19' 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:36:19.697

@andrykonchin 是对的 - 切换回稳定工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:36:48.680

如果未安装，则需要安装捆绑程序

```
gem install bundler 
```

然后您需要在根目录中创建一个名为 gemfile 的文件（对于我的简单示例，我只使用水豚而不使用 rspec）

```
source "http://rubygems.org"
gem "capybara" , "1.1.3" 
```

创建一个基本的 ruby​​ 文件，如下所示

```
require 'bundler/setup'
require 'capybara/dsl'

Capybara.server_port = 80
Capybara.app_host = 'http://google.com'
Capybara.run_server = false
Capybara.default_driver = :selenium

class Browser
  include Capybara::DSL
end

w = Browser.new

w.visit("/") 
```

使用命令

```
bundle install 
```

现在您将使用 Capybara 的稳定版本

有关捆绑器的更多信息，请查看[http://gembundler.com/](http://gembundler.com/)

# ruby-on-rails - 带常量的haml select_tag

> ID：11943875
> 
> 赞同：1
> 
> 时间：2012-08-13T23:54:00.647
> 
> 标签：ruby-on-rails, ruby, haml, html-select

我是 Ruby 和 Haml 的新手，所以我在这个问题上绕圈子。谷歌搜索并没有给我任何我可以使用的示例代码。

我可以使用`select_tag`并从表中填充列表。但我不知道如何使用简单的静态项目列表。有人可以将其更改为适当的 Haml 吗？注意：源表是“电子邮件”，字段是“状态”。

```
= select_tag(:email, :status, {"canceled", "pending", "success"}) 
```

我正在寻找一个下拉列表，其中只有“已取消、待处理、成功”的项目。

我得到的错误是`odd number list for Hash._hamlout.format_script...`

更新：我发现了一些似乎是我需要的示例代码，它没有给出任何错误，但下拉框是空的：

```
= select_tag(:email, :status,{ "canceled" => "1", "pending" => "2", "success"=>"3"}) 
```

这是它生成的 HTML：

```
<select female="2" male="1" id="email" name="email">status </select > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:10:55.847

您正在使用标签助手而不是面向对象的助手。采用`select`

我还建议使用`options_for_select`. 像这样：

```
= select(:email, :status, options_for_select([["canceled", "1"], ["pending", "2"], ["success", "3"]])) 
```

请参阅： [http ://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select)

[http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:09:52.960

得到它的工作！我需要使用“Select”而不是“Select_tag”。:-)

= select(:email, :status,{ "canceled" => "canceled", "pending" => "pending", "success"=>"success"})

# opencv - 由 opencv 维护的 NDK 的 android.toolchain.cmake 中的错误

> ID：11943876
> 
> 赞同：0
> 
> 时间：2012-08-13T23:54:00.920
> 
> 标签：opencv, android-ndk

我正在使用 android.toolchain.cmake 为项目构建特定的库。我有最新的 NDK 版本 -r8b 和最新的 cmake 版本 -2.8.8。错误（第 611 行）- 列表索引：5 超出范围 (-4,3)。如果我在 android.toolchain.cmake 文件中检查，它位于 toolchaincompilerversion。有输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:02:06.627

目前不支持 Android NDK8b。切换回 NDK8（要获得该版本，只需从下载链接中删除 b）

# c++ - 有什么方法可以将右值/临时对象传递给需要非成本引用的函数？

> ID：11943877
> 
> 赞同：3
> 
> 时间：2012-08-13T23:54:07.323
> 
> 标签：c++, parameters, c++11, rvalue-reference, lvalue

我知道 C++ 只允许右值或临时对象绑定到常量引用。（或[类似的东西](https://stackoverflow.com/questions/8763398/why-is-it-illegal-to-take-the-address-of-an-rvalue-temporary)......）

例如，假设我有功能`doStuff(SomeValue & input)`
并 `SomeValue getNiceValue()`定义：

```
/* These do not work */
app->doStuff(SomeValue("value1"));
app->doStuff(getNiceValue());

/* These all work, but seem awkward enough that they must be wrong. :) */

app->doStuff(*(new SomeValue("value2")));

SomeValue tmp = SomeValue("value3");
app->doStuff(tmp);

SomeValue tmp2 = getNiceValue();
app->doStuff(tmp2); 
```

所以，三个问题：

1.  由于我不能随意更改`doStuff()`or的签名`getNiceValue()`，这是否意味着我必须始终使用某种“名称”（即使是多余的）来传递我想要传递给的任何东西`doStuff`？

2.  假设，如果我可以更改函数签名，这种事情是否有共同的模式？

3.  新的 C++11 标准会改变一切吗？C ++ 11有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T00:06:07.960

在这种情况下，一个明显的问题是为什么您将`doStuff`其参数声明为非常量引用。如果它真的试图修改被引用的对象，那么将函数签名更改为 const 引用不是一种选择（至少不是它本身）。

无论如何，“右值”是生成临时的*表达式*的属性，而不是临时对象本身的属性。临时对象本身很容易成为左值，但您将其视为右值，因为产生它的表达式是右值表达式。

您可以通过在您的类中引入“右值到左值转换器”方法来解决它。比如，例如

```
class SomeValue {
public:
  SomeValue &get_lvalue() { return *this; }
  ...
}; 
```

现在您可以将非常量引用绑定到临时对象

```
app->doStuff(SomeValue("value1").get_lvalue());
app->doStuff(getNiceValue().get_lvalue()); 
```

诚然，它看起来不是很优雅，但它可能被视为一件好事，因为它可以防止你无意中做类似的事情。当然，您有责任记住临时的生命周期会延伸到完整表达式的末尾，并且不会再延长。

或者，一个类可以重载一元运算`&`符（具有自然语义）

```
class SomeValue {
public:
  SomeValue *operator &() { return this; }
  ...
}; 
```

然后可以用于相同的目的

```
app->doStuff(*&SomeValue("value1"));
app->doStuff(*&getNiceValue()); 
```

尽管仅出于此解决方法的目的而覆盖`&`运算符并不是一个好主意。它还将允许创建指向临时对象的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T00:23:57.053

> 1.  由于我不能随意更改`doStuff()`or的签名`getNiceValue()`，这是否意味着我必须始终使用某种“名称”（即使是多余的）来传递我想要传递给的任何东西`doStuff`？

几乎是的。此签名假定您要`input`用作“out”参数。所以作者`doStuff`认为，如果客户端传入一个匿名对象，那是一个逻辑错误，最好在编译时捕获。

> 1.  假设，如果我可以更改函数签名，这种事情是否有共同的模式？

仅在 C++11 中，您可以像这样更改或重载：

```
doStuff(SomeValue&& input); 
```

现在`input`只会绑定到*一个*右值。如果您已重载，则原始重载将获得左值，而新重载将获得右值。

> 1.  新的 C++11 标准会改变一切吗？C ++ 11有更好的方法吗？

是的，请参阅上面的右值引用重载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T02:25:31.893

`std::forward`通常是“转换”价值类别的方式。但是，在作为左值转发时禁止接受右值，原因与对 non- 的引用`const`不会绑定到右值的原因相同。话虽如此，假设您不想超载`doStuff`（否则请参阅 Hinnant 的答案），您可以自己编写一个实用程序：

```
template<typename T>
T& unsafe_lvalue(T&& ref)
{ return ref; } 
```

并像这样使用它：`app->doStuff(unsafe_lvalue(getNiceValue()))`. 无需侵入性修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T00:08:41.847

您必须始终为传递给 doStuff 的值使用名称。造成这种情况的原因在[How come a non-const reference cannot bind to a temporary object中有详细介绍？](https://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object). 简短的总结是，传递引用意味着 doStuff 可以更改它引用的值，并且将引用的值更改为临时值是编译器不应该让你做的事情。

我会避免第一个解决方案，因为它在永远不会释放的堆上分配内存。

解决此问题的常见模式是更改 doStuff 的签名以获取 const 引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T00:01:29.587

不幸的是，我认为答案是你必须有一个命名对象才能传递给`doStuff`. 我不认为有 C++11 功能可以让您在这方面具有灵活性，我也没有听说过针对这种情况的任何设计模式。

如果这是您希望在您的程序中经常遇到的事情，我会编写一个更适合当前应用程序需求的界面。如果它只是一个关闭，我倾向于只创建一个临时对象来存储结果（就像你所做的那样）。

# python - python 正则表达式日期格式，仅在 2012 年查找日期

> ID：11943879
> 
> 赞同：-3
> 
> 时间：2012-08-13T23:54:22.123
> 
> 标签：python, regex, date

> **可能重复：**
> [python 正则表达式，日期格式](https://stackoverflow.com/questions/11076026/python-regex-date-format)

我正在编写一个正则表达式来查找所有日期，例如“6 月 27 日”

同时我只想要 2012 年的“6 月 27 日”，而不是其他任何一年

所以“June 27th, 2007”中的“June 27th”不应该被找到，但正则表达式确实捕捉到了“June 27”

正则表达式编写如下，

```
((?<!\w)(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)[\.]?\s{1,3}?((?<!(\d|:))(1[0-9]|2[0-9]|3[0-1]|0?[1-9])(st|nd|rd|th)?(?!(\d|\s{0,3}am|s\{0,3}pm|:)))(\s{0,2},?\s{0,2}(2012))?(?!(\d|\s{0,4},?\s{0,2}(1\d\d\d|200\d|2010|2011)))) 
```

如果我去掉“27th”中的“th”，则正则表达式有效，即它不会捕获日期字符串。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:26:06.800

假设您的所有日期都在您给定的语法中，一个简单的正则表达式将是：

`/^([^\d\s]+?)\s*(\d+)[stndrh]+,\s*2012$/`

第一个捕获组以语言或缩写形式捕获月份，第二个捕获组保存月份中的日期。

或者，如果您必须匹配长文本中的所有内容，请尝试以下操作：

`/(?:([a-z]{3,9})\s*(\d{1,2})[stndrh]{2},\s*2012)/`

相同的捕获，但正则表达式更具限制性，因此它不会意外匹配不需要的结果。

# objective-c - 如何观察 NSOperationQueue 的“操作”属性？

> ID：11943883
> 
> 赞同：2
> 
> 时间：2012-08-13T23:54:49.950
> 
> 标签：objective-c, ios, key-value-observing, nsoperation, nsoperationqueue

每当从我的 NSOperationQueue 中添加或删除 NSOperation 时，我都希望收到通知。我正在尝试为“操作”属性（当前在队列中的 NSOperations 数组）设置键值观察，但它没有被触发。我的语法有问题吗？

```
@implementation myOperationQueueSubclass

-(id)init
{
    if (self = [super init])
    {
    // Initialization code here
    [self addObserver:self
                forKeyPath:@"operations"
                   options:0
                   context:nil];

    }
    return self;
}

- (void)observeValueForKeyPath:(NSString *)keyPath
                  ofObject:(id)object
                    change:(NSDictionary *)change
                   context:(void *)context {
    NSLog(@"queue changed...");
    if ([keyPath isEqualToString:@"operations"]) {

        if (self.operationCount == 0) {
            // No ops

        } else {
            // Has ops
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:33:32.663

您的语法没有问题，但是您观察的是数组属性，而不是数组本身（无论如何它都不会发出 KVO 通知）。

如果由于某种原因重新分配了它，您会收到通知，但`NSOperationQueue`必须不厌其烦地手动发出通知，或使用[KVC 访问器](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html%23//apple_ref/doc/uid/20002172)，以允许其他人查看何时将对象添加到其`operations`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:33:56.603

我有类似的需求，并[在这个 github 项目中](https://github.com/dhoerl/NSOperation-WebFetches-MadeEasy)创建了一个非常瘦的运营经理 OperationsRunner 。其他对象直接与此类而不是 NSOperationsQueue 交互。它只有少数几种方法——运行一个操作、取消它、询问队列中的操作数等。

我所做的是使用可变集来保存对添加到操作队列中的操作的引用，并在操作完成或取消时将其删除 - 有点像影子容器。

这个类的好处是你可以很容易地将它添加到任何类型的其他类中来管理操作，并快速取消所有挂起的操作。

# android - Android水平进度条不更新视图，虽然进度正在改变

> ID：11943884
> 
> 赞同：0
> 
> 时间：2012-08-13T23:54:55.677
> 
> 标签：android, progress-bar

我正在使用 Android 中的进度条，XML 声明如下：

```
 <ProgressBar
        android:id="@+id/progress"
        style="?android:attr/progressBarStyleHorizontal"
        android:progressDrawable="@color/green" <!-- See below about this line -->
        android:max="10000"
        android:progress="10000"
        android:layout_width="fill_parent"
        android:layout_height="3dp"
        android:layout_alignParentTop="true"/> 
```

因此，进度条在其全部荣耀或其他情况下显示得很好。但我有一个 ASyncTask 会将进度条的进度重置为 0，然后将其加载回最大值。这行不通。相反，进度条只是保持在最大值。我继续记录进度条的进度，当它应该重置为 0 并更新时，根据进度条的 getProgress() 方法，它实际上会变为 0，然后重新构建到 10000。当你真正看手机虽然只是满了。

所以回头看看 XML，你会发现我注意到了 android:progressDrawable 行。这是我更改进度条颜色的地方。如果我删除该行，进度条将按预期运行。但是，当进度条的可绘制对象设置为我想要的颜色时，它只是坐在那里，屏幕上会出现完整的进度。

我之前使用过这个progressDrawable 属性没有任何问题，但在这种情况下，它只是让我很头疼。关于如何解决这个问题的任何经验或想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:20:01.140

问题是`android:progressDrawable`属性。在这种情况下，您应该使用[layer-list drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)。

Horizo​​ntal ProgressBar 使用多达 3 个不同的层 - 背景、进度和secondaryProgress（在您的情况下不需要secondaryProgress）。由于您使用了简单的颜色，我怀疑该颜色用于背景，而其他两种颜色保持未设置且透明。

你所需要的只是一个像这样的drawable：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@android:color/transparent"/>
    <item android:id="@android:id/progress">
        <clip android:drawable="@color/green" />
    </item>

</layer-list> 
```

# jquery - 如何在关闭 Jquery 对话框时运行代码？

> ID：11943887
> 
> 赞同：0
> 
> 时间：2012-08-13T23:55:21.313
> 
> 标签：jquery, jquery-ui, jquery-dialog

我基本上使用 jquery 对话框来执行“您确定要更改模式而不保存更改”对话框，为此我有两个按钮，是和否。是继续并更改形式，而没有将其恢复为正常“因为这是通过更改选择激活的。我想做的是让它在单击 x 以退出对话框时运行无代码，但我似乎无法了解如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:57:47.763

使用关闭事件：http: [//jqueryui.com/demos/dialog/#event-close](http://jqueryui.com/demos/dialog/#event-close)

```
$( ".selector" ).dialog({
   close: function(event, ui) { ... }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:59:09.307

如果您希望对话框在选择否时保持打开状态，请使用[beforeClose](http://jqueryui.com/demos/dialog/#event-beforeClose)事件并返回。`false`

# asp.net-mvc - 基于每个视图 ASP.NET MVC 的代码访问安全性

> ID：11943888
> 
> 赞同：1
> 
> 时间：2012-08-13T23:55:30.070
> 
> 标签：asp.net-mvc, code-access-security

我的 ASP.NET MVC 应用程序包括许多可由最终用户编辑的 View 文件（它们存储在数据库中并通过 VirtualPathProvider 加载）。

我想允许我的用户编辑他们的视图文件，但是我对安全隐患持谨慎态度。

有什么方法可以强制执行某种代码访问安全性，以确保视图中的任何代码都不能执行任何危险的任务（即最小信任，它只能通过传入的存储库对象访问数据库并呈现自己。没有文件系统访问，没有调试它的主机进程等）。

我可以限制视图派生的超类（通过让我的 VirtualPathProvider 提供标头`<%@ Page`指令，而仅从数据库返回渲染函数体），所以我可以通过将属性应用到这个超类来强制 CAS，还是更多参与其中，这不是一件容易的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:14:49.750

MVC 运行在[同构的 AppDomain](http://msdn.microsoft.com/en-us/library/system.appdomain.ishomogenous.aspx)中，这意味着框架中的所有代码都以相同的权限集运行。因此，无法降低给定视图的 CAS 权限。（无论如何，您不会真的想这样做，因为它会阻止 MVC 框架正常工作。）

唯一可行的解​​决方案——尽管不幸的是，这是大量的工作——是定义你自己的视图格式，它根本不能用来做任何危险的事情，然后有一个自定义视图引擎知道如何提供这种类型的视图。这使您能够根据需要定义“危险”，从阻止服务器端代码执行到甚至试图阻止 Javascript 执行（这在其自身的仪式中是一项相当困难的任务）。

# iphone - 在 UIScrollView 中使用带有多个表的 dequeueReusableCellWithIdentifier

> ID：11943890
> 
> 赞同：0
> 
> 时间：2012-08-13T23:55:32.477
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview

我的应用程序的 UI 需要分页的 9 个图像的网格。为此，我在 UIScrollView（带有 UIPageControl）中创建了几个 UITable：

![在此处输入图像描述](../Images/46ce75f9b89264b54e03554e0d1c3581.png)

我的表来自我注册的 xib 文件。每个表格单元格中有 3 个按钮。

![在此处输入图像描述](../Images/9c59e03eb8c123c616e05ecf8a9118d5.png)

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    int numPages = ([self.images count] + 8) / 9;
    NSLog(@"Page count: %i", numPages);
    // Set pages
    self.pageControl.numberOfPages = numPages;
    for (int i = 0; i < numPages; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [UIColor blackColor];
        [self.scrollView addSubview:subview];

        // Let's try and draw a table
        UITableView *table = [[UITableView alloc] initWithFrame:frame style:UITableViewStylePlain];
        table.delegate = self;
        table.dataSource = self;
        table.tag = 100 + i;
        table.separatorColor = [UIColor clearColor];
        [table setBackgroundColor:[UIColor blackColor]];
        [table registerNib:[UINib nibWithNibName:@"Cell" bundle:[NSBundle mainBundle]] forCellReuseIdentifier:@"TestCell"];
        [self.scrollView addSubview:table];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * numPages, self.scrollView.frame.size.height);
} 
```

**我的问题是视图加载缓慢（5+ 秒）**。加载到按钮中的图像是本地的并且不大。

我的 cellForRowAtIndexPath 看起来像这样：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TestCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // What table/page are we looking at?
    // Check the tag
    int page = tableView.tag - 100;
    NSLog(@"We are on page/table: %i", page);

    // Configure the cell
    // Our cells have 3 button images
    // So we'll loop and set each image
    for (int i = 0; i < 3; i++) {
        // From our images array, the item we want
        // Will be the row * 3 + i
        int imageIndex = (page * 9) + (indexPath.row * 3) + i;
        NSLog(@"Image index is: %i", imageIndex);

        // Button tags are 10-12 (or 10 + i)
        UIButton *button = (UIButton *)[cell viewWithTag:(10 + i)];
        [button addTarget:self action:@selector(poseSelected:) forControlEvents:UIControlEventTouchUpInside];

        // We have to make sure we don't go out of the bounds of
        // our images array (might not have /3 exactly)
        if (imageIndex > [self.images count] - 1) {
            // We have an extra button, let's hide it
            button.hidden = YES;
        } else {
            // Get the image and file nameefrom our array
            NSDictionary *imageDict = (NSDictionary *)[self.images objectAtIndex:imageIndex];
            NSString *fileName = [imageDict objectForKey:@"file"];
            // Make the thumb name
            NSString *thumbName = [fileName stringByReplacingOccurrencesOfString:@".jpg"
                                                                      withString:@"-THUMB.jpg"];
            // NSLog(@"Thumb name is: %@", thumbName);
            // Set the button image
            UIImage *btnImage = [UIImage imageNamed:thumbName];
            [button setImage:btnImage forState:UIControlStateNormal];
        }
    }

    return cell;
} 
```

**当我查看日志输出时，所有单元格都立即设置完毕。为什么是这样？**

屏幕外的表格视图不应该被渲染吗？还是我以错误的方式使用 dequeueReusableCellWithIdentifier ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:21:27.360

你是对的，你误解了 cellForRowAtIndexPath 和滚动视图是如何工作的。您的单元格会立即加载，因为您的表格视图都是滚动视图中的子视图。因此，当滚动视图添加到视图层次结构时，作为子视图的表视图将立即加载。cellForRowAtIndexPath 对滚动表格视图时消失的单元格进行回收（按照设计，这是有道理的）。我的建议是使用回收滚动视图，甚至更好的自定义 gridview 实现（似乎是你需要的）。我的库中有一些示例，但可能值得搜索最好的网格视图或图像查看器，而不是满足您的需求。我的图书馆可以在这里找到：

[https://github.com/daltoniam/GPLib-iOS](https://github.com/daltoniam/GPLib-iOS)

你会想看看：

[https://github.com/daltoniam/GPLib-iOS/tree/master/GPLib/Views/ImageViews](https://github.com/daltoniam/GPLib-iOS/tree/master/GPLib/Views/ImageViews)

[https://github.com/daltoniam/GPLib-iOS/tree/master/GPLib/Views/GridView](https://github.com/daltoniam/GPLib-iOS/tree/master/GPLib/Views/GridView)

正如我上面所说，可能值得寻找一个网格视图/图像视图，更多地遵循您的 UI 需要然后我的库提供的内容，但应该是一个很好的起点。任何问题让我知道。

# java - 我可以通过 Document 对象将 PDF 上传到 SugarCRM 吗？

> ID：11943892
> 
> 赞同：3
> 
> 时间：2012-08-13T23:55:37.450
> 
> 标签：java, pdf, encoding, sugarcrm, uploading

我试图弄清楚如何使用 Java 将动态生成的 PDF 文件上传到 SugarCRM。

起初我以为我只需要创建一个`Document`对象并填写一些期望`byte[]`64Bit 编码为`String`. 但是，从我在网上阅读的内容来看，我正在寻找的不是a `Document`，而是`Note`带有附件的a。这似乎是一个糟糕的命名约定。我是否正确假设我需要创建`Notes`？

在这个问题中，我只是要求澄清 a`Document`是什么，以及它是否适合包含 PDF 文档，或者上传 PDF 等文件的唯一方法是否是通过`Note`s 及其附件。

（我会根据这个问题的答案在其他地方问一个后续问题。）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:28:02.253

您应该可以同时使用`Document`和`Note`，但在 SugarCRM 中它们用于两种不同的用途。

*   文档：用于您希望与用户和客户共享的通用文档（例如信函模板、产品简介、条款等）
*   注释：用于与特定帐户、联系人或类似文件相关的文档（或实际文件），最常见的是仅供用户使用（例如商业案例、电子邮件、合同等）

您可以通过 Soap API 将文档和注释上传到 SugarCRM。

*   文件：使用`set_document_revision`
*   注意：先用`set_entry`a `Note`，然后`set_note_attachment`上传和关联文件

*（免责声明：我之前没有使用过sugarCRM中的“上传文档”，但是根据wsdl应该是可以的）*

# sql - Azure SqlExceptions

> ID：11943896
> 
> 赞同：1
> 
> 时间：2012-08-13T23:56:01.140
> 
> 标签：sql, exception, azure, sqlbulkcopy

我有一个程序可以将大约 1gb 的数据上传到 SQL Azure 数据库。我使用 SqlBulkCopy 上传这些数据。我上传了大约 8,000,000 个实体，平均一次上传 32,000 个实体，一次最多大约 1,200,000 个。

我收到很多 SqlExceptions，错误代码为 4815。

起初我认为这可能是因为我一次上传太多并且 Azure 限制了我的连接或使用了 ddos​​ 防御，但我允许我的程序在每个 SqlBulkCopy 中只提交 25,000 个实体，我得到了更多的错误！多很多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:49:33.760

我使用 BCP 将大量数据移动到 SQL Azure 中取得了很好的效果。SQL Azure 迁移向导在后台使用此方法。这篇博文有点过时了，但是在导入大量数据时，这些概念是合理的： [Brute Force Migration of Existing SQL Server Databases to SQL Azure](http://blogs.msdn.com/b/rdoherty/archive/2010/09/07/brute-force-migration-of-existing-sql-server-databases-to-sql-azure.aspx)

问题没有指定数据的来源，所以如果您不从另一个数据库导入，显然这对您不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-20T00:26:30.357

就我而言，当我在其中一个字段中发送的数据大于表定义中的字段大小时，我得到了 4815... 将 13 个字符发送到 VARCHAR(11)。

# c# - 几次后从网站下载一些内容时，我得到了异常 webexception 502 Bad gateway 是什么原因造成的？

> ID：11943898
> 
> 赞同：0
> 
> 时间：2012-08-13T23:56:13.443
> 
> 标签：c#

这是下载代码：

```
private string downloadContent()
        {
            WebRequest request = WebRequest.Create(url);
            request.Method = "GET";
            response = request.GetResponse();
            Stream stream = response.GetResponseStream();
            reader = new StreamReader(stream);
            string content = reader.ReadToEnd();
            return content;
        } 
```

例外是在线：

```
response = request.GetResponse(); 
```

这是例外：

```
system.Net.WebException was unhandled by user code
  Message=The remote server returned an error: (502) Bad Gateway.
  Source=System
  StackTrace:
       at System.Net.HttpWebRequest.GetResponse()
       at ChatrollLogger.Form1.downloadContent() in D:\C-Sharp\ChatrollLogger\ChatrollLogger\ChatrollLogger\Form1.cs:line 228
       at ChatrollLogger.Form1.backgroundWorker1_DoWork(Object sender, DoWorkEventArgs e) in D:\C-Sharp\ChatrollLogger\ChatrollLogger\ChatrollLogger\Form1.cs:line 112
       at System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
       at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument)
  InnerException: 
```

可能是什么问题呢 ？我每 n 秒从网站下载 ocntent。到目前为止，大多数时候都没有问题，我只遇到过一次这个异常。

第 112 行是：

```
string content = downloadContent(); 
```

第 228 行是：

```
response = request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:59:59.290

(502) Bad Gateway 可能意味着远程服务器出现问题（站点关闭、服务器重新启动等）

来自[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

```
10.5.3 502 Bad Gateway

The server, while acting as a gateway or proxy, received an invalid response from the 
upstream server it accessed in attempting to fulfill the request. 
```

# javascript - 如何使用 jquery 显示选定的选项值？

> ID：11943902
> 
> 赞同：0
> 
> 时间：2012-08-13T23:56:24.913
> 
> 标签：javascript, jquery

我能够将数组中的值附加到选择选项。当我这样做时，我无法在选择框中看到文本值（A1）。但是，当我使用警报框时，它会将 A1 显示为所选选项。

我的jQuery代码：

```
var route=['A1','A2','A3','A4','A5','A6','A7',......,'A50']
$.each(route, function(key, value) {
 $('#room').append($('<option>', { value : key }).text(value)); 

if (!$("#room option:selected").length)
$("#room option[value='0']").attr('selected', 'selected'); 
```

这是我的html代码：

```
<div data-role="fieldcontain"> 
<select name="room" id="room">  
</select>          
</div> 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:02:13.270

试试这个

```
var route=['A1','A2','A3','A4','A5','A6','A7','A50'], html;
$.each(route, function(key, value) {
  html += '<option value="'+key+'">'+value+'</option>';
});
$('#room').append(html);

if ($("#room").val() !== '0') {
  $("#room").val(0); // using .val() will select the correct option for you, based on it's value attribute
} ​ 
```

见：http: [//jsfiddle.net/tyPFu/](http://jsfiddle.net/tyPFu/)

# xcode - Xcode 4.3.3 和 LevelHelper 模板

> ID：11943903
> 
> 赞同：0
> 
> 时间：2012-08-13T23:56:28.013
> 
> 标签：xcode, templates, cocos2d-iphone

我下载了[LevelHelper 的 Xcode 4 模板](http://www.levelhelper.org/app/Downloads/Cocos2dBox2dXCode4Template.zip)并将其安装到 /Library/Developer/Xcode/Templates/cocos2d v2.x/ 并尝试通过 Xcode 运行它。当我尝试使用模板创建项目时，[会发生这种情况](http://imgur.com/CLavx)。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:04:01.960

不再需要模板，而且它们实际上从未在哪里

请按照此处的分步指南进行操作

[http://www.levelhelper.org/app/documentation/DocumentationCocos2d/index.htm](http://www.levelhelper.org/app/documentation/DocumentationCocos2d/index.htm)

当 LevelHelper 有专门的支持论坛时，你为什么要在 stackoverflow 上寻求帮助？下次您需要支持时，请使用 levelhelper 论坛或联系表格，否则您可能会发现自己在等待永远不会出现的答案。你很幸运我发现了你的问题

# python - 你如何在 django 中为表单编写保存方法？

> ID：11943912
> 
> 赞同：13
> 
> 时间：2012-08-13T23:57:15.187
> 
> 标签：python, django, django-models, django-forms

我在 Django 中有两个模型：用户（由 Django 预定义）和 UserProfile。两者通过外键连接。我正在创建一个表单，允许客户编辑他们的用户资料。因此，此表格将基于上述两种模型。

如何为这个表单创建一个 save() 方法？完成保存功能的步骤/要求是什么？

这是我目前在 forms.py 中的内容：

```
class UserChangeForm(forms.Form):
    #fields corresponding to User Model
    email = forms.EmailField(required=True)
    first_name = forms.CharField(max_length = 30)
    last_name = forms.CharField(max_length = 30)
    password1 = forms.CharField(max_length=30, widget=forms.PasswordInput)
    password2 = forms.CharField(max_length=30, widget=forms.PasswordInput)

    #fields corresponding to UserProfile Model
    gender = forms.CharField(max_length = 30, widget=forms.Select)
    year = forms.CharField(max_length = 30, widget=forms.Select)
    location = forms.CharField(max_length = 30, widget=forms.Select)

    class Meta:
        fields = ("username", "email", "password1", "password2", "location", "gender", "year", "first_name", "last_name")

    def save(self):
        data = self.cleaned_data
        # What to do next over here? 
```

这是一个好的开始，还是有人建议在我们开始编写 save() 函数之前改变它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T00:51:57.157

这可以帮助你

```
def save(self):
    data = self.cleaned_data
    user = User(email=data['email'], first_name=data['first_name'],
        last_name=data['last_name'], password1=data['password1'],
        password2=data['password2'])
    user.save()
    userProfile = UserProfile(user=user,gender=data['genger'],
        year=data['year'], location=data['location'])
    userProfile.save() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T00:26:27.943

构造函数的[`prefix`](https://docs.djangoproject.com/en/dev/ref/forms/api/#django.forms.Form.prefix)参数（也`ModelForm`通过继承）将允许您将多个表单放在单个`<form>`标记中，并在提交时区分它们。

```
mf1 = ModelForm1(prefix="mf1")
mf2 = ModelForm2(prefix="mf2")
return render_to_response(..., {'modelform1': mf1, 'modelform2': mf2}, ...) 
```

...

```
<form method="post">
{{ modelform1 }}
{{ modelform2 }}
 ...
</form> 
```

# javascript - 如何确定当前打开的漂亮照片灯箱？

> ID：11943913
> 
> 赞同：0
> 
> 时间：2012-08-13T23:57:15.177
> 
> 标签：javascript, lightbox, prettyphoto

在 prettyPhoto changePictureCallback 函数中，我想知道当前打开了哪个灯箱。目前我正在这样做：

```
$("a[rel^='prettyPhoto']").prettyPhoto({
  deeplinking : false,
  counter_separator_label : ' of ',
  gallery_markup : '',
  social_tools : '',
  slideshow : false,
  changepicturecallback: function(){
    //do stuff
    id_to_find = $(".active_lightbox").attr('href');
  },
  opacity : 0.29
}).click(function(){
  $(this).addClass('active_lightbox');
}); 
```

这样，当锚点被点击时，就会将 active_lightbox 放到它上面。但是，这玩得并不好。我最终可以拥有多个 active_lightbox 元素，而且，如果我使用灯箱库中的下一个按钮，它不会将该类放在“active_lightbox”上。
那么，我如何判断当前使用 jquery/js 打开了哪个灯箱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:37:44.477

这里有几个选项，但让我跳出来的一个：

看起来您正在尝试与一些`<a rel="prettyPhoto##">`画廊`##`或照片编号合作？如果是这种情况，我推荐这样的东西：

```
$("a[rel^='prettyPhoto']").each(function(index, elm)
  var $elm = $(elm);
  // an arbitrary ID based on its order in the DOM
  var photo_id = index;
  // returns the ## from rel="prettyPhoto##"
  var gallery_id = $(elm).attr('rel').replace("prettyPhoto", ""); 
  $elm.prettyPhoto({
    ...
    changepicturecallback: function(){
      // do stuff
      // photo_id
      // gallery_id
      // elm and $elm
    },
    ...
  }); 
```

**或者**，您可以添加更多标记，但通过使用`data-`标签更精确。

**资源**

*   [http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto)
*   [http://api.jquery.com/data/](http://api.jquery.com/data/)

# php - PHP：用于调试的函数执行时间

> ID：11943916
> 
> 赞同：3
> 
> 时间：2012-08-13T23:57:35.780
> 
> 标签：php, debugging

> **可能重复：**
> [分析 PHP 脚本的最简单方法](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)

有时我的网站加载缓慢，我想追踪导致它的功能。（或者如果它与我或网络服务器有关）如何获得每个正在运行的函数的执行时间？

喜欢;

```
<?php
function A() { }
function B() { }
function C() { }
A();
B();

Trace();
?> 
```

Trace() 将输出：A 在 0.1 毫秒内运行，B 在 1.1 秒内运行，脚本完成。PHP中有这样的调试功能吗？

附言。我不是在谈论为每个功能应用微时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T00:14:36.610

利用：

*   **[XHProf](https://github.com/facebook/xhprof/)**如果您需要在生产环境中进行分析。它有一个足迹，但它通常是负担得起的。如果脚本意外结束，它不会产生跟踪。

![http://blog.tech4him.com/wp-content/uploads/xhprof1.png](../Images/8b10ecc1ec2d89ea59634eae43cd4ac5.png) ![http://www.wiktik.com/blog/wp-content/uploads/2012/02/xhprof-callgraph_small.png](../Images/f3fec48c3c31def2c58f179e7501243e.png)

*   **[XDebug](http://xdebug.org/)**如果您想在开发和测试环境中进行分析。它通常更可靠，但占用空间明显；例如，与 XHProf 相比，长时间运行的脚本会生成非常大（100 秒 MB）的文件。

![http://blog.haohtml.com/wp-content/uploads/2010/03/win_xdebug_WinCacheGrind_4.jpg](../Images/7523a5786bed4aac54fd6defd1dc680a.png)

不要使用：

*   **[APD](http://pecl.php.net/package/apd)**，因为即使在[这个答案](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)中推荐它，它也非常过时并且看起来不再被开发（根据其 PECL 页面，2004 年的最新版本）

PS：我个人的建议：如果你有时间的话就和他们一起玩，否则就在你的开发环境中设置 xdebug。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:59:29.933

看看[http://xdebug.org/docs/profiler](http://xdebug.org/docs/profiler)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T23:59:46.830

我不会在您的生产站点上执行此操作，但如果您可以在测试设置中复制问题，请使用分析来确定您将所有执行时间花在哪里。您需要安装 XDebug 或同等产品。 [http://xdebug.org/docs/profiler](http://xdebug.org/docs/profiler)

# javascript - Javascript - 删除粘贴上的空格

> ID：11943924
> 
> 赞同：17
> 
> 时间：2012-08-13T23:59:06.487
> 
> 标签：javascript, html, css, space, paste

我有一个最大长度为 10 的输入文本字段。该字段用于澳大利亚电话号码（10 位数字）。电话号码通常分为以下语法

```
12 12345678 
```

如果有人复制上述内容并将其粘贴到我的输入字段中，它显然会留下最后一个数字并保留空间。

有没有办法在粘贴到输入框之前删除任何空格？还是有其他解决方法？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T00:19:52.457

这应该适合你：

**HTML**

```
<input type="text" id="phone" maxlength="10" />​ 
```

**JavaScript**

```
var phone = document.getElementById('phone'),
    cleanPhoneNumber;

cleanPhoneNumber= function(e)
{
 e.preventDefault();
 var pastedText = '';

 if (e.clipboardData && e.clipboardData.getData)
 {// Standards Compliant FIRST!
  pastedText = e.clipboardData.getData('text/plain');
 }
 else if (window.clipboardData && window.clipboardData.getData)
 {// IE
  pastedText = window.clipboardData.getData('Text');
 }

 this.value = pastedText.replace(/\D/g, '');
};

phone.onpaste = cleanPhoneNumber; 
```

小提琴：http: [//jsfiddle.net/y6TYp/6/](http://jsfiddle.net/y6TYp/6/)

**更新**nnnnnn 对澳大利亚电话号码有很好的看法，更新替换正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T00:02:23.753

此功能将帮助您做到这一点：

```
function removeSpaces(string) {
 return string.split(' ').join('');
} 
```

或者，使用 jQuery，您可以使用此处描述的方法： [使用 jquery 复制粘贴时删除文本框中的空格](https://stackoverflow.com/questions/8317549/delete-white-spaces-in-textbox-when-copy-pasted-with-jquery)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T00:36:25.663

接近您描述的任务时，您希望确保您的代码在有或没有 javascript 的不同浏览器中工作，所以我会执行以下操作：

1.  将 maxlength 设置为 11 - maxlength 是一个 HTML 属性，您需要确保无论是否使用 javascript，用户输入的数据都不会丢失。如果用户输入 11 位数字并且没有 javascript - 您将需要捕获数据并从服务器端清理它。好吧，服务器端验证是强制性的。

2.  如果 javascript 在那里，我会使用 jquery 函数来设置 maxlength 并确保删除空格，所以假设你有一个 ID = 'title' 的字段：在文档准备好时，你编写以下代码：

    $('input#title').attr('maxLength','10').keypress(limitMe);

    ```
    function limitMe(e) {
        if (e.keyCode == 32) { return true; }
        return this.value.length < $(this).attr("maxLength");
    } 
    ```

显然，如果您有许多字段，您只需使用相同的类属性装饰所有输入字段，然后将其应用于所有字段，如下所示：

```
$('input.limited').attr('maxLength','10').keypress(limitMe); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-09T16:46:22.303

如果您想替换任何内容，包括字母字符、阿拉伯字符、大写字母和数字，`on paste`您可以使用此功能：

```
cleanPermalink= function(e) {
    e.preventDefault();
    var pastedText = '';
    if (window.clipboardData && window.clipboardData.getData) { // IE
        pastedText = window.clipboardData.getData('Text');
      } else if (e.clipboardData && e.clipboardData.getData) {
        pastedText = e.clipboardData.getData('text/plain');
      }
    // This can replace English, Arabic, and Numbers spaces with (-)
    this.value = pastedText.replace(/[^a-zA-Z؀-ۿ0-9-]+/g,'-');

    // In case you want both Lowercase and Replace spaces use:
    // this.value = pastedText.toLowerCase().replace(/[^a-zA-Z؀-ۿ0-9-]+/g,'-');
};

permalink.onpaste = cleanPermalink; 
```

希望它可以帮助某人。

谢谢

# sql - postgresql 条件仅适用于选择中的一列

> ID：11943926
> 
> 赞同：2
> 
> 时间：2012-08-13T23:59:14.190
> 
> 标签：sql, postgresql-9.1

我有一个查询如下

```
select
    cheque_no,
    sum(credit),
    date
from ac_cash_collection
group by 1,3; 
```

现在我想`sum(credit)`从谁的记录中获取`transaction_type ilike banking`，但这个条件不应该适用于其他列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:07:30.320

在 中使用`case`语句`sum()`，如下所示：

```
select
    cheque_no,
    sum(case when transaction_type like `%banking%` then credit else 0 end),
    date
from ac_cash_collection
group by 1,3 
```

# c# - 导航到父目录

> ID：11943928
> 
> 赞同：1
> 
> 时间：2012-08-13T23:59:27.747
> 
> 标签：c#, ftp

我的应用程序正在登录服务器，基于用户凭据的默认目录将其放在 /dir1/dir2/dir3/。

所以在 dir3 中放置或获取文件没有问题，但是如何将目录更改为 dir2 - 父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:05:27.060

在您的路径中，使用 %2f 代替 ../ 例如代替

```
FtpWebRequest.Create("ftp://myftp.com/../parent") as FtpWebRequest 
```

做这个

```
FtpWebRequest.Create("ftp://myftp.com/%2fparent") as FtpWebRequest 
```

# mysql - 为单个 Rails 应用程序使用两个不同的数据库（MySQL 和 Postgres）

> ID：11943933
> 
> 赞同：1
> 
> 时间：2012-08-13T23:59:49.260
> 
> 标签：mysql, ruby-on-rails, postgresql, activerecord

我有一个使用 MySQL 进行身份验证和存储模型的 rails 应用程序。我目前正在考虑使用 PostgreSQL 进行分析（通过利用其特殊的数据类型，如数组和 KV 对）。我只是想知道在尝试使用 ActiveRecord 保存记录时如何拥有两种类型的数据库（一种用于模型和身份验证，另一种用于分析）。我想将模型保存在 Postgres 和 MySQL 中的其他模型中进行分析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:12:05.217

如果您想将它用于任何事情，我的建议是完全迁移到 PostgresSQL。它会让你的生活变得简单很多。

我相信您最好的答案是在此处停止为您的模型从 ActiveRecord::Base 继承。而是包含 ActiveRecord，并手动调用建立连接。

但是，是的，只是迁移到 PG。会省去很多麻烦。

# python - 嵌套函数的递归调用中的 UnboundLocalError

> ID：11943938
> 
> 赞同：0
> 
> 时间：2012-08-14T00:00:14.503
> 
> 标签：python, recursion, nested-function

我有以下 Python 代码：

```
def find_words(letters):
    results = set()

    def extend_prefix(w, letters):
        if w in WORDS: results.add(w)
        if w not in PREFIXES: return
        for L in letters:
            result = extend_prefix(w + L, letters.replace(L, "", 1))
            results = results | result

    extend_prefix('', letters)
    return results

print find_words("ABCDEFGH") 
```

当我运行它时，我收到以下错误：

```
Traceback (most recent call last):
  File "ExtendPrefix.py", line 44, in <module>
    print find_words("ABCDEFGH")
  File "ExtendPrefix.py", line 41, in find_words
    extend_prefix('', letters)
  File "ExtendPrefix.py", line 38, in extend_prefix
    result = extend_prefix(w + L, letters.replace(L, "", 1))
  File "ExtendPrefix.py", line 38, in extend_prefix
    result = extend_prefix(w + L, letters.replace(L, "", 1))
  File "ExtendPrefix.py", line 35, in extend_prefix
    if w in WORDS: results.add(w)
UnboundLocalError: local variable 'results' referenced before assignment 
```

它显然无法在对extend_prefix 的递归调用中找到结果。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:12:27.410

因为您在嵌套函数内部分配结果，所以 Python 假定您使用的是本地范围的变量并在第 35 行抛出，即使它是更高范围内的有效名称。如果您只是读取变量而不写入它，它通常会在更高的命名空间对象上工作。但是一旦出现赋值运算符，您就会跳转到本地命名空间。

从[Python 范围/命名空间](http://docs.python.org/tutorial/classes.html#python-scopes-and-namespaces)：

> Python 的一个特殊之处是——如果没有全局语句生效——对名称的赋值总是进入最内部的范围。赋值不会复制数据——它们只是将名称绑定到对象。

要解决这个问题，最简单的方法是将要使用的变量传递给函数头：

```
def extend_prefix(w, letters, results):
        if w in WORDS: results.add(w)
        if w not in PREFIXES: return
        for L in letters:
            extend_prefix(w + L, letters.replace(L, "", 1), results) 
```

同样你编写函数的方式，你没有返回一个集合，所以`results = results | result`结果会被炸毁，结果是无类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:44:50.117

或者，如果您对结果使用默认值 None，然后将结果初始化为空集，则不需要嵌套函数。它简化了您的代码并解决了您的问题。见下文...

```
def find_words(letters, pre = '', results = None):
    if results is None: results = set()
    if pre in WORDS: results.add(pre)
    if pre in PREFIXES:
        for L in letters:
            find_words(letters.replace(L, '', 1), pre+L, results)
    return results 
```

很高兴在 StackOverflow 上看到另一个 Udacity 学生！

# javascript - 如何相对于父边框的外边缘定位元素？

> ID：11943939
> 
> 赞同：2
> 
> 时间：2012-08-14T00:00:14.740
> 
> 标签：javascript, jquery, css, css-position

我正在尝试将四个元素放置在父元素的四个角上。父元素有一个大小动态变化的边框。我想定位元素，使它们接触边框的外边缘，并且最好以这样一种方式进行，即当边框改变大小时我不必担心做某事。

使用绝对定位，我可以让它们相对于边界内部定位：http: [//jsfiddle.net/V5jFx/1/](http://jsfiddle.net/V5jFx/1/)

但是，我无法弄清楚相对于外部如何做到这一点。

四个角元素不是必须是父元素的子元素，我愿意使用 javascript，尽管我真的更希望不必检测边框大小的变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T00:08:09.790

[http://jsfiddle.net/wyKG2/1/](http://jsfiddle.net/wyKG2/1/)

创建一个内部边框与边框 div 的外部边框匹配的包装器。现在你可以在宽度方面做任何你想做的事情，这将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T00:04:06.930

您可以使用负值定位到父级之外。

[http://jsfiddle.net/V5jFx/10/](http://jsfiddle.net/V5jFx/10/)

然后，您可以使用 JavaScript 根据宽度进行调整。

如果您可以使用容器，它就在顶部。如果可以，请标记 FrankieTheKneeMan 的正确答案。它更简单，同样有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:04:02.250

[http://jsfiddle.net/V5jFx/2/](http://jsfiddle.net/V5jFx/2/)

您必须使用 javascript 来改变边框宽度，但`top`/`right`值必须是负子宽度 + 边框宽度。

# android - Android SocketServer 崩溃应用

> ID：11943940
> 
> 赞同：1
> 
> 时间：2012-08-14T00:00:20.740
> 
> 标签：android, sockets

我一直在尝试让 SocketServer 在我的手机上工作。我最近升级到 ICS，所以现在我需要在一个单独的线程中做我的网络工作，这是我不习惯的。我已经编写了一些代码，但是一旦我尝试连接到套接字，应用程序就会崩溃。

当切换开关切换时，我启动 serverSocket：

```
final Switch connectionSwitch = (Switch) findViewById(R.id.connectionSwitch);
connectionSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    if(isChecked) {
        new Thread(){
            public void run() {
                try {
                    serverSocket = new ServerSocket(port);
                    socket = serverSocket.accept();
                    outToServer = new DataOutputStream(socket.getOutputStream());
                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                while(connectionSwitch.isChecked()) {

                    myPacket[0] = (byte) 0xAA;
                    myPacket[1] = (byte) 0x01;
                    myPacket[2] = (byte) (fanFrontSpeed/256);
                    myPacket[3] = (byte) (fanFrontSpeed%256);
                    myPacket[4] = (byte) (fanLeftSpeed/256);
                    myPacket[5] = (byte) (fanLeftSpeed%256);
                    myPacket[6] = (byte) (fanRightSpeed/256);
                    myPacket[7] = (byte) (fanRightSpeed%256);

                    try {
                        outToServer.write(myPacket,0,8);
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }

                try {
                    socket.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            }
        }.start();
    }
}
}); 
```

我得到的错误是：

```
FATAL EXCEPTION: Thread-4487
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:56:22.387

调试此类内容的最简单方法是在调试器上逐步进行，并在执行每一行之前检查是否有任何内容为空。

例如可能发生的事情：在服务器初始化期间，发生了一些错误，它被捕获在 UnknownHostException 或 IOException 中，现在您的代码带有一个 outToServer==null 因为它从未初始化，并且当它尝试`outToServer.write(myPacket,0,8);`时您有一个空指针异常.

但这可能是十亿种不同的东西，这只是我能想到的最明显的。

# java - 什么导致“无法访问 jarfile”错误？

> ID：11943948
> 
> 赞同：165
> 
> 时间：2012-08-14T00:01:44.043
> 
> 标签：java, jar, executable-jar

我想在不使用 IDE 的情况下执行我的程序。我创建了一个 jar 文件和一个可执行的 jar 文件。当我双击 exe jar 文件时，什么也没有发生，当我尝试在 cmd 中使用该命令时，它给了我这个：

```
Error: Unable to access jarfile <path> 
```

我使用命令：`java -jar Calculator.jar`

我是如何创建 jar 的：

1.  右键单击项目文件夹（计算器）
2.  选择
3.  单击Java文件夹并选择“可执行Jar文件”，然后选择下一步
4.  启动配置：主 - 计算器
5.  创建导出目的地
6.  点击“完成”并获利！嗯，不是真的。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2014-09-16T10:26:00.693

我在运行 Jar 文件时遇到了这个问题

**`java -jar TestJar`**

代替

**`java -jar TestJar.jar`**

缺少扩展名**.jar**也会导致此问题。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-08-15T04:05:07.207

**固定的**

我只是把它放在一个不同的文件夹中，它工作。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2016-03-15T03:15:08.717

[可能仅限 Windows]

请注意路径中的空格，即使您的 jar 位于当前工作目录中。例如，对我来说这是失败的：

```
java -jar myjar.jar 
```

我可以通过给出 jar 的完整引用路径来解决这个问题：

```
java -jar "%~dp0\myjar.jar" 
```

归功于[这个答案](https://stackoverflow.com/a/17064031/14952%20%22this%20answer)让我走上了正确的道路......

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-08-04T17:18:56.930

我在 Windows 的 CygWin 下遇到了这个问题。我在其他地方读到 Java 不理解 CygWin 路径（`/cygdrive/c/some/dir`而不是`C:\some\dir`） - 所以我使用了相对路径`../../some/dir/sbt-launch.jar`：

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2015-09-06T18:05:01.527

尝试启动 jar 文件时遇到了同样的问题。路径包含一个空格，所以我不得不在周围加上引号。代替：

```
java -jar C:\Path to File\myJar.jar 
```

我不得不写

```
java -jar "C:\Path to File\myJar.jar" 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-10-23T20:26:32.780

刚刚遇到了同样的问题，试图制作一个坏的 USB ......

我尝试在 admin cmd 中运行此命令

```
java -jar c:\fw\ducky\duckencode.jar -I c:\fw\ducky\HelloWorld.txt  -o c:\fw\ducky\inject.bin 
```

但是得到了这个错误：

```
Error: unable to access jarfile c:\fw\ducky\duckencode.jar 
```

**解决方案**

**第一步**

右键单击有问题的 jarfile。单击属性。单击右下角的取消阻止选项卡。该文件被阻止，因为它是下载的，而不是在我的电脑上创建的。

**第二步**

在cmd中，我将目录更改为jar文件所在的位置。

```
cd C:\fw\ducky\ 
```

然后我输入`dir`并看到文件名为`duckencode.jar.jar`

所以在 cmd 我改变了原来的命令来引用文件`.jar.jar`

```
java -jar c:\fw\ducky\duckencode.jar.jar -I c:\fw\ducky\HelloWorld.txt  -o c:\fw\ducky\inject.bin 
```

该命令在没有错误消息的情况下执行，并且我试图创建的 inject.bin 现在位于目录中。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-12-26T06:22:41.163

我有一个类似的问题，我什至尝试使用管理员权限运行我的 CMD，但它并没有解决问题。

基本的事情是确保将cmd 中的目录更改为您的 jar 文件所在的**当前**目录**。**

执行以下步骤：

1.  将 jar 文件复制到桌面。

2.  运行 CMD

3.  键入命令`cd desktop`

4.  然后输入`java -jar filename.jar`

这应该有效。

* * *

**编辑**：从 JDK-11 开始（[JEP 330](https://openjdk.java.net/jeps/330)：启动单文件源代码程序）

从 Java 11 开始，java 命令行工具已经能够直接运行单文件源代码。例如

```
java filename.java 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-10-13T10:24:36.050

如果您使用的是 OSX，下载的文件会带有一个安全标志，以防止未签名的应用程序运行。

要检查这一点，您可以查看文件的扩展属性

```
$ ls -l@
-rw-r--r--@ 1 dave  staff  17663235 13 Oct 11:08 server-0.28.2-java8.jar
com.apple.metadata:kMDItemWhereFroms         619
com.apple.quarantine          68 
```

然后，您可以使用清除属性

```
xattr -c file.jar 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2021-01-27T09:50:31.037

在 macOS 11 Big Sur 上，提供的答案均不适合我。问题原来是程序需要特殊权限才能访问桌面、文档和下载文件夹，而 Java 打破了直接打开文件的异常和权限请求弹出窗口。

修复：

*   将 .jar 移动到不在 Documents、Desktop 或 Downloads 下（也不在其下）的文件夹中。
*   手动授予权限。转到系统偏好设置→安全和隐私→隐私→文件和文件夹→java，然后检查相应的文件夹。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-11-15T18:18:30.497

这对我有用。

```
cd /path/to/the/jar/

java -jar ./Calculator.jar 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-07-15T08:06:37.040

如果您没有正确提供参数列表，也会发生这种情况。这就是我正在做的事情：

```
java -jar test@gmail.com testing_subject file.txt test_send_emails.jar 
```

而不是正确的版本：

```
java -jar test_send_emails.jar test@gmail.com testing_subject file.txt 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-10-08T09:52:17.523

对我来说，如果您在 PATH 中的文件夹名称中使用本机波兰字符，就会发生这种情况。所以也许使用非典型字符是问题的原因。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-02-17T10:44:46.293

当您尝试（运行或创建）/libs 文件夹下的 .jar 文件时，有时会发生这种情况，方法是在 android studio 中右键单击它。您可以选择 android stuio 顶部的下拉菜单并将其更改为**app**。这将起作用

[![在此处输入图像描述](../Images/d927c9262bfe84cb73e623a4e98f39b4.png)](https://i.stack.imgur.com/M3rWV.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-11-18T23:31:55.247

我的特定问题是因为我正在使用涉及符号链接（快捷方式）的目录而引起的。因此，尝试`java -jar ../../myJar.jar`没有奏效，因为我不在我想的地方。

忽略相对文件路径将其修复。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-01-22T06:41:19.130

在我的情况下，建议使用的文件名`jarFile*.jar`在命令行中。文件夹中的文件是`jarFile-1.2.3.jar`. 所以我将文件重命名为`jarFile`. 然后我用`jarFile.jar`代替`jarFile*.jar`然后问题得到解决

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-10-31T08:57:26.700

当文件夹名称中有空格时，它可能发生在 Windows 机器上。解决方案是输入“”之间的路径。例如：

```
java -jar c:\my folder\x.jar    --> 
java -jar "c:\my folder\x.jar" 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-03-14T15:14:35.957

为避免任何权限问题，请尝试以管理员身份运行它。这在 Win10 上对我有用。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-10-23T06:54:13.113

我知道这个线程是几年前的，问题也得到了解决。但我希望这对其他人有所帮助，因为我在尝试安装 Oracle WebLogic 12c 和 Oracle OFR 时遇到了一些类似的问题，其中它的安装程序是`.jar`格式的。对于我的情况，它要么没有将 JDK 目录用引号括起来，要么只是拼写错误。

以管理员身份运行`Command Prompt`并以这种格式执行命令。如果有错别字，请仔细检查句子。

> `"C:\Program Files\Java\jdk1.xxxxx\bin\java" -jar C:\Users\xxx\Downloads\xxx.jar`

如果显示类似`JRE 1.xxx is not a valid JDK Java Home`，请确保`JAVA_HOME`环境变量中的系统变量指向正确的 JDK 目录。建议使用 JDK 1.8 或更高版本（2018）。

这里有一个有用的线程，您可以参考它：[为什么它在安装 weblogic 服务器时显示您的 JDK c:program files\java\jre7 不是有效的 JDK？](https://stackoverflow.com/questions/37001407/why-its-showing-your-jdk-cprogram-files-java-jre7-is-not-a-valid-jdk-while-inst)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-03-30T18:05:20.090

我有一个类似的问题，TextMate 或其他东西用 unicode 双引号替换了双引号。

将我`SELENIUM_SERVER_JAR`的从 unicode 双引号更改为常规双引号，这解决了我的问题。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-06-19T21:39:10.180

这是因为您在错误的路径中查找文件 1\. 查找放置文件的文件夹的路径 2\. 在 cmd 中更改目录 cd 使用正确的路径

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-07-16T13:43:45.263

我使用 NetBeans 并遇到了同样的问题。在我运行构建和清理项目后，我的程序是可执行的。Java 文档说 build/clean 命令基本上是从头开始重建项目并删除任何过去的编译。我希望这有帮助。另外，我会阅读文档。Oracle 有 NetBeans 和 Java 学习路径。很有帮助。祝你好运！

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-09-21T21:52:43.517

也许您指定了错误的 jar 版本。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-01-14T15:04:46.487

我终于将我的 jar 文件粘贴到与我的 JDK 相同的文件夹中，因此我不必包含路径。我还必须以管理员身份打开命令提示符。

1.  右键单击命令提示符和“以管理员身份运行”
2.  导航到保存 jdk 的目录
3.  在命令提示符下键入： `java.exe -jar <jar file name>.jar`

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-01-22T02:18:35.750

将文件保存在您提取它的同一目录中。这对我有用。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-02-09T19:19:14.423

对我来说，这是因为我使用默认的 java 版本（7）而不是用于创建这个 jar 的已编译的 java 版本（8）运行它。

所以我用：

```
%Java8_64%\bin\java -jar myjar.jar 
```

而不是 java 7 版本：

```
java -jar myjar.jar 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-07-31T13:05:49.873

这是权限问题，查看目录是否在您的用户下。这就是为什么在另一个文件夹中工作！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-05-14T20:28:37.773

您是否尝试在管理员权限下运行它？意思是，在“运行方式”中运行命令，然后选择具有正确管理员凭据的管理员

为我工作

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-07-23T08:53:25.673

我正在尝试这个：

赋予文件读、写、执行权限后：

`chmod 777 java-repl.jar`

`alias jr="java -jar $HOME/Dev/java-repl/java-repl.jar"`

无法访问 bla bla ...，但这是在 Mac OS 上

所以我尝试了这个：

`alias jr="cd $HOME/Dev/java-repl/ && java -jar java-repl.jar"`

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-10-13T15:21:49.907

这不起作用“无法访问 jarfile”

```
"C:\Program Files\java\jdk-13+33-jre\bin\javaw.exe" -jar "C:\Program Files\Maxim Integrated Products\1-Wire Drivers x64\ OneWireViewer.jar" 
```

这确实有效

```
"C:\Program Files\java\jdk-13+33-jre\bin\javaw.exe" -jar "C:\Program Files\Maxim Integrated Products\1-Wire Drivers x64\OneWireViewer.jar" 
```

不同之处在于 OneWireViewer.jar 前面的单个空格，尽管它被引号包围，甚至还有其他空格。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-04-21T14:10:23.063

如果您在 WSL 上，并按照指南说，这样说：

```
java -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb 
```

您实际上需要指定完整路径，即使您已在`java.library.path`部分中提供了它。

```
java -Djava.library.path=/mnt/c/dynamodb_local/DynamoDBLocal_lib -jar /mnt/c/dynamodb_local/DynamoDBLocal.jar -sharedDb 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2020-08-03T14:12:17.507

**重命名jar文件并尝试**

解释：是的，我知道还有很多答案我想在这里添加一点我遇到的问题。

我构建了 jar 并将其移到了我部署的服务器中（这是正常过程），这里我移动的文件名已经存在于服务器中，这里的文件显然会覆盖正确。在这种情况下，我遇到了这个问题。也许在覆盖时可能存在许可副本问题。

希望这会对某人有所帮助。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-08-18T16:35:29.943

对我来说，在访问之前放置 jar 的文件夹后问题得到解决，我在 D: 驱动器上发出命令，但是当我导航到放置该 jar 的文件夹时，这个问题得到了解决

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2019-08-03T16:20:37.023

首先我创建了一个变量`%JAVA_HOME% :`

当您下载文件时，请确保检查`UNBLOCK TAB`文件属性，如上面“maartencls”帖子中所示。

```
c:\users\my user\downloads\location of the file\all> java -jar yourfilename.jar 
```

希望这能解决问题:)

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2020-05-26T06:08:31.203

首轮：`java -version`

然后运行：`java -jar Calculator.jar`

这对我有用。

* * *

## 回答 #35

> 赞同：-1
> 
> 时间：2020-09-18T18:25:31.940

您可以指定 java.exe 文件的完整路径，例如："c:\Program Files\Java\jdk-9.0.4\bin\java.exe" -jar path_to_your_jar_file.jar 这对我有帮助。或者检查系统中默认运行的 java.exe 文件（特别是如果您有多个版本的 JDK/JRE）。

* * *

## 回答 #36

> 赞同：-2
> 
> 时间：2017-01-01T05:07:44.793

在我从命令行（在 Windows 中）访问目录的问题中，此错误

> “无法访问……”

因为错误的文件扩展名

> 文件.jar.jar

！, 所以改变它来纠正一个

> 文件.jar

：） 祝你好运

* * *

## 回答 #37

> 赞同：-2
> 
> 时间：2020-11-10T22:34:38.823

**右键单击文件的父文件夹>属性>选中只读**

# asp.net - 一页的 MVC 控制器是否矫枉过正

> ID：11943950
> 
> 赞同：0
> 
> 时间：2012-08-14T00:02:02.053
> 
> 标签：asp.net, html, asp.net-mvc, asp.net-mvc-3

我已将我的 Web 应用程序重构为一页（单页应用程序）。我只是想要一些关于`index.cshtml`使用控制器提供一页是否过大的建议（我没有使用任何无法替代普通 html/js 的剃须刀代码）。我是否应该将其更改为`index.html`页面并正常提供？

我敢肯定这只是一件小事，但想知道这里的最佳做法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:05:00.953

不，这不是矫枉过正。
只需将您的代码分成 3 部分：逻辑、HTTP 处理、视图。
即使所有 3 个部分都在 1 个文件中，它也将是 MVC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T20:49:18.143

当您构建单页作品集时，绝对不需要 MVC 和所有 BS.JS 大文件。只需创建一个新的 HTML 文件。

# objective-c - 使用 sortUsingComparator 对 NSInteger 进行排序

> ID：11943955
> 
> 赞同：6
> 
> 时间：2012-08-14T00:02:36.157
> 
> 标签：objective-c, ios, cocoa-touch, nsinteger

我正在尝试对一个数组进行排序`NSObjects`（一个对象属于一个类）。对象类有几个变量，我想用它们对数组中的对象进行排序，我用来排序的变量是`NSString`or `NSInteger`，我相信我正在排序 `NSString`s 但对于这个问题，我希望得到帮助排序一个`NSInteger`。

这是我用来对对象数组进行排序的方法，它接收一个`NSMutableArray`对象

```
- (NSMutableArray *)startSortingTheArray:(NSMutableArray *)unsortedArray
{
    [unsortedArray sortUsingComparator:^ NSComparisonResult(SearchResultItem *d1, SearchResultItem *d2) {
        NSInteger DoorID1 = d1.doorID;
        NSInteger DoorID2 = d2.doorID;
        NSComparisonResult result = [DoorID1 localizedCompare:DoorID2]; // Not sure how to sort these two integers
        if (result == NSOrderedSame) {
            NSString *handel1 = d1.handel;
            NSString *handel2 = d2.handel;
            result = [handel1 localizedCompare:handel2];
         } 
```

我不知道如何比较 NSInteger，我已经读过我可以从自身中减去每个数字。如果数字为 0，那么它们相等或 +1 / -1 等它们不相等。但不确定这是否是解决这个问题的最佳方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T00:08:29.757

```
[unsortedArray sortUsingComparator:^ NSComparisonResult(SearchResultItem *d1, SearchResultItem *d2) {
    NSInteger doorID1 = d1.doorID;
    NSInteger doorID2 = d2.doorID;
    if (doorID1 < doorID2)
        return NSOrderedAscending;
    if (doorID1 > doorID2)
        return NSOrderedDescending;
    return [d1.handel localizedCompare: d2.handel];
}]; 
```

因为`[aString localizedCompare:anotherString]`将返回 NSOrdered(Ascending|Descending|same)，您可以只返回字符串大小写的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T14:06:26.580

另外的选择：

```
NSComparisionResult res = [@(d1.doorID) compare:@(d2.doorID)];
return res == NSOrderedSame ? [d1.handel localizedCompare: d2.handel] : res; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T00:07:56.727

An`NSInteger`不是对象。它只是一个整数（ an`int`或 a `long`）。因此，您可以准确地比较它们如何比较两个`int`s。

经典的 C 比较函数可以让您做到这一点`x - y`，但这在这里不合适，因为您将返回一个不适合`NSComparisonResult`枚举的整数。因此，您可能应该只做类似的事情

```
if (DoorID1 == DoorID2) {
    // compare secondary attribute
    NSString *handel1 = d1.handel;
    NSString *handel2 = d2.handel;
    return [handel1 localizedCompare:handel2];
}
else if (DoorID1 < DoorID2) return NSOrderedAscending;
else return NSOrderedDescending; 
```

顺便说一句，您的排序标准可以用`NSSortDescriptor`代替表示，这可能更清楚。

```
- (NSMutableArray *)startSortingTheArray:(NSMutableArray *)unsortedArray {
    NSSortDescriptor *primary = [NSSortDescriptor sortDescriptorWithKey:@"doorID" ascending:YES];
    NSSortDescriptor *secondary = [NSSortDescriptor sortDescriptorWithKey:@"handel" ascending:YES selector:@selector(localizedCompare:)];
    [unsortedArray sortUsingDescriptors:@[primary, secondary]];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T00:35:43.317

```
[unsortedArray sortUsingComparator:^ NSComparisonResult(SearchResultItem *d1, SearchResultItem *d2) {
    NSInteger doorID1 = d1.doorID;
    NSInteger doorID2 = d2.doorID;
    if (doorID1 > doorID2)
        return NSOrderedAscending;
    if (doorID1 < doorID2)
        return NSOrderedDescending;
    if (doorID1==doorID2) {
        NSString *s1=d1.someString;
        NSString *s2=d2.someString;
        return [s1 compare:s2];
    }
} 
```

# javascript - 删除 Facebook 应用程序上的请求

> ID：11943956
> 
> 赞同：1
> 
> 时间：2012-08-14T00:02:48.853
> 
> 标签：javascript, facebook, request

我是 Facebook 开发的新手，我对 FB Requests 文档感到困惑，其中声称：

“当用户通过单击接受请求被定向到您的应用程序时，您必须在接受请求后删除该请求。”

坦率地说，我不知道他们在说什么。

我怎样才能找到我未完成的请求？删除它们的最佳方法是什么（我正在使用 Javascript SDK）？不删除请求有什么可怕的后果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:19:52.700

是的，您必须删除请求，并且在您引用的行之后[的文档的下一部分](https://developers.facebook.com/docs/requests/#deleting)解释了如何使用直接 API 调用、javascript SDK 示例和 PHP 示例来执行此操作：

```
You can delete a request via the following methods: 
```

## 删除请求

当用户通过单击接受请求被定向到您的应用程序时，您**必须**在接受请求后将其删除。请求一旦被点击就不会被自动删除，因此**开发者有责任**在它们被接受后清除它们。

您可以通过以下方法删除请求：

### 图形 API

向连接的 发出 HTTP DELETE 请求`request_id`：

```
DELETE https://graph.facebook.com/[<REQUEST_OBJECT_ID>_<USER_ID>]?
      access_token=[USER or APP ACCESS TOKEN] 
```

### JavaScript SDK

```
功能删除请求（requestId）{
  FB.api(requestId, 'delete', function(response) {
    控制台日志（响应）；
  });
}

```

这是一个完整的 PHP 示例，它向您展示了如何连接 request_id 和 user_id 以删除用户的未完成请求。\

//截取大的PHP示例

# javascript - 无法通过 JavaScript 在输入焦点上触发键盘

> ID：11943957
> 
> 赞同：5
> 
> 时间：2012-08-14T00:03:14.550
> 
> 标签：javascript, jquery, iphone, ios, ipad

我正在开发一个包含`form`两个`input`元素的 Web 应用程序。用户要求之一是在第一个字符插入一个字符后，`input`它应该[自动触发下一个元素的焦点并显示键盘](http://jsfiddle.net/dcardoso/E88PW/)。

在谷歌搜索之后，似乎不可能通过 JavaScript 以编程方式触发 iOS 上的键盘。然而原因对我来说不是很清楚，有人说这是一个 UX 功能，但我找不到任何关于它的官方信息。

所以我的问题是，我在哪里可以找到一些**官方规范**来解释不可能的技术原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:04:57.257

官方规格：

[http://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/Introduction/Introduction.html#//apple_ref/doc/uid/TP40002079-SW1](http://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/Introduction/Introduction.html#//apple_ref/doc/uid/TP40002079-SW1)

不幸的是，官方规格不会回答您的问题。

通常，对于 iOS Safari 上的表单，键盘将保持打开状态，直到用户选择关闭它。当您自动聚焦下一个表单输入时，它会关闭键盘吗？

# .htaccess - htaccess 将所有页面重写到另一个域上的同一页面

> ID：11943961
> 
> 赞同：7
> 
> 时间：2012-08-14T00:03:59.473
> 
> 标签：.htaccess, redirect

所以我一直在寻找，但到目前为止找不到我正在寻找的东西。看过这篇文章[如何使用 .htaccess 将所有页面转发到不同域上的相同页面？](https://stackoverflow.com/questions/8168065/how-can-i-forward-all-pages-to-the-same-exact-page-on-a-different-domain-using)但它似乎只重定向我的主页。

目前，我正在使用 WordPress，我需要能够将所有页面转发到新域。例如 domain1.com/about-us 需要去 domain2.com/about-us。但我有大约 50 页需要处理。我想看看是否有 1-5 行代码可用于此工作。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T00:16:34.073

尝试将此（在任何 wordpress 规则之上）放在**domain1.com**的文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} domain1.com [NC]
RewriteRule ^(.*)$ http://domain2.com/$1 [L,R=301] 
```

如果您的 2 个域是一个不同的网络服务器，或者不共享一个公共文档根目录，您可以使用 mod_alias，将其添加到**domain1.com**的文档根目录中的 htaccess 文件中：

```
Redirect 301 / http://domain2.com/ 
```

# php - 在 PHP 中切换开发数据库的最佳方法是什么？

> ID：11943964
> 
> 赞同：0
> 
> 时间：2012-08-14T00:04:09.830
> 
> 标签：php, database

目前，我正在为数据库驱动的网站进行大量更新。

所以在 webroot 中有一个名为 db.php 的文件，它包含在每个页面中。它具有与 SQL 数据库的连接详细信息。这默认为实时数据库。

我们还有一个名为 db.local.php 的文件。现在，如果此文件存在，则其中的连接详细信息将覆盖默认值。因此，此文件不受源代码控制，因为它对于每个设置都是唯一的。

我们通过以下方式检查文件是否存在：

```
if(file_exists(getcwd().'/db.local.php')) {
    require_once('db.local.php'); 
} else {
//default database details
} 
```

问题是我们从多个文件夹中使用这个文件，而不仅仅是 webroot（例如，从 webroot/admin 调用的脚本的 cwd 将是 webroot/admin 而不仅仅是 webroot）。因此，如果从另一个文件夹中的脚本调用 db.php，则当前工作目录将不是 webroot，因此我们不会看到 db.local.php。这很糟糕，因为我们使用了不正确的数据库。

有办法解决这个问题吗？（就像一种检查从中提取的文件目录的方法，而不是检查脚本的执行位置）。或者有没有比已经实施的更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:12:23.103

我这样做：

```
switch (gethostname()) {
  case 'dev-local':
    define('SITE_URL', ....);
    define('TRIM_REQUEST_URI', '');

    require CONFIG . '/VM/database.php';
    break;

    ......
} 
```

每个服务器都有不同的主机名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:23:12.357

如果您从脚本中知道它的相对路径，则可以包含 db.local.php。无论您运行脚本时的当前工作目录如何，这都将起作用。例如，假设你有

```
/foo/bar/www/db.php
/foo/bar/www/db.local.php
/foo/bar/www/index.php

/foo/bar/scripts/cleanup.php 
```

在 cleanup.php 中，您可以像这样检查并包含 db.local.php：

```
$APPROOT = __DIR__ . DIRECTORY_SEPARATOR . '..';
$DBLOCAL = $APPROOT . DIRECTORY_SEPARATOR . 'www' . DIRECTORY_SEPARATOR . 'db.local.php';
if(file_exists($DBLOCAL)) {
  require_once($DBLOCAL);
} 
```

如果您有很多执行此操作的脚本，您可能需要创建一个初始化文件来设置这些变量并将其包含在每个脚本中（使用相同的`__DIR__`方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:08:49.690

`set_include_path`您可以使用该函数指定查找文件的绝对路径 。

[http://php.net/manual/en/function.set-include-path.php](http://php.net/manual/en/function.set-include-path.php)

```
<?php
ini_set('include_path', '/usr/lib/pear');
/*
// On Windows: 
ini_set('include_path', 'c:\sites\config');
*/
?> 
```

**编辑：** 然后您可以使用 `require 'db.php';` 并且 PHP 解析器会知道在您使用 ini_set 命令指定的目录中查找。

您还可以将路径添加到您的`php.ini`文件...

# rdf - Yago中的不同数据集？

> ID：11943965
> 
> 赞同：3
> 
> 时间：2012-08-14T00:04:28.833
> 
> 标签：rdf, sparql, semantic-web, linked-data

我是新来的，如果我不清楚，很抱歉。

我的问题是，为什么[名古屋艺术大学 Yago 浏览器中显示的信息与](https://d5gate.ag5.mpi-sb.mpg.de/webyagospotlx/Browser?entity=Nagoya_University_of_Arts)[此处](http://lod.openlinksw.com/describe/?uri=http://yago-knowledge.org/resource/Nagoya_University_of_Arts)的信息不同，或者在 Yago 端点上进行 SPARQL 查询，例如

```
SELECT * WHERE {
 <http://yago-knowledge.org/resource/Nagoya_University_of_Arts> ?p ?v .
} 
```

?

更准确地说，例如，在 Web 浏览器中，*类型*比其他浏览器中的要多得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T11:38:50.433

根据[YAGO 演示页面](http://www.mpi-inf.mpg.de/departments/databases-and-information-systems/research/yago-naga/yago/demo/)，YAGO 数据有一个 SPARQL 端点 `http://lod2.openlinksw.com/sparql`：

> ### SPARQL 接口
> 
> YAGO的[SPARQL 端点](http://lod2.openlinksw.com/sparql)由 OpenLink 提供。它并不总是有效，但如果有效，请尝试一下。尝试询问，例如 SELECT * WHERE { [http://yago-knowledge.org/resource/Albert_Einstein](http://yago-knowledge.org/resource/Albert_Einstein) ?p ?o}

根据[您的评论](https://stackoverflow.com/questions/11943965/different-datasets-in-yago/24932630#comment15939517_11951733)：

> 令我烦恼的是，我无法进行特定的查询，例如“给我 Yago 的所有大学”，因为该信息仅显示在浏览器中。

我想你会发现这个查询很有用。您可以通过询问作为大学子类的类的实例的所有内容来获取所有大学的列表：

```
select * where { 
  ?university a/rdfs:subClassOf* <http://yago-knowledge.org/resource/wordnet_university_108286569>
}
limit 100 
```

[SPARQL 结果](http://lod2.openlinksw.com/sparql?default-graph-uri=&query=select%20*%20where%20%7B%20%0D%0A%20%20%3Funiversity%20a%2Frdfs%3AsubClassOf*%20%3Chttp%3A%2F%2Fyago-knowledge.org%2Fresource%2Fwordnet_university_108286569%3E%0D%0A%7D%0D%0Alimit%20100&format=text%2Fhtml&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on)

由于并非您问题中的所有链接都有效，因此我不确定您在哪里看到的类型比另一个地方多，但是如果一个演示文稿仅显示数据中断言的直接类型，我不会感到惊讶，而另一个为您提供包含超类的类型。这就是为什么我在上一个查询中使用属性路径表达式来查找不仅声明为大学的所有事物，而且查找声明为大学或大学子类或大学子类的子类的所有事物，等等.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:55:14.173

我不确定您为 YAGO 使用的端点是什么。试试[这里的](http://dbpedia.org/sparql)[DBpedia](http://dbpedia.org/)端点，它至少加载了一些 YAGO。对于这个查询，我得到了几种 YAGO 类型：

```
SELECT * WHERE {
 <http://dbpedia.org/resource/Nagoya_University_of_Arts> ?p ?v .
} 
```

# perl - 测试是否存在哈希键并在 perl 中打印哈希值

> ID：11943973
> 
> 赞同：1
> 
> 时间：2012-08-14T00:05:13.637
> 
> 标签：perl, hash

如果数组中存在键，我想从哈希中打印该键及其值。这是我写的代码。

```
for($i=0;$i<@array.length;$i++)
{
    if (exists $hash{$array[$i]})
    {
        print OUTPUT $array[$i],"\n";
    }
} 
```

从上面的代码中，我可以打印密钥。但我不确定如何打印该键的值。

有人能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T00:25:00.857

`@array.length`在语法上是合法的，但绝对不是你想要的。

`@array`，在标量上下文中，为您提供数组中元素的数量。

该`length`函数不带参数，为您提供`$_`.

`.`运算符执行字符串连接。

所以`@array.length`取 中的元素个数`@array`和 中包含的字符串的长度`$_`，将它们视为字符串，并将它们连接在一起。 `$i < ...`强加了一个数字上下文，所以它很可能被视为一个数字——但肯定不是你想要的。（如果`@array`有 15 个元素并且`$_`恰好是 7 个字符长，则数字应该是`157`，一个无意义的值。）

计算其中元素数量的正确方法`@array`只是`@array`在标量上下文中 - 或者，更明确地说，`scalar @array`.

要回答您的问题，如果`$array[$i]`是*key* ，则对应的*值为*`$hash{$array[$i]}`。

但是 C 风格的`for`循环并不是遍历数组的最简洁方式，尤其是在每次迭代只需要值而不是索引的情况下。

```
foreach my $elem (@array) {
    if (exists $hash{$elem}) {
        print OUTPUT "$elem\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:35:37.860

使用哈希切片的一些替代方法：

```
foreach (@hash{@array}) { print OUTPUT "$_\n" if defined };

print OUTPUT join("\n",grep {defined} @hash{@array}); 
```

（对于那些喜欢打高尔夫球的人）。

# c# - 如何增加 Mono for Android 应用程序的堆大小？

> ID：11943975
> 
> 赞同：0
> 
> 时间：2012-08-14T00:05:17.763
> 
> 标签：c#, xml, garbage-collection, xamarin.android

我有一个适用于 Android 的 Mono 应用程序，当我连续多次使用 XMLDocument 类加载和解析 XML 文档时，我认为该应用程序内存不足。

我看到垃圾收集器报告我只有 7367K 可用内存，这似乎相当低。

如何通过配置或在运行时增加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:54:45.643

恐怕每个应用程序使用的 Android 虚拟机内存非常有限：大多数情况下为 16MB，其他情况下为 24MB。我也遇到了这个限制。首先，您应该检查您的应用程序是否没有内存泄漏。如果这还不够，那么您可能需要考虑强制调用垃圾收集器： http: [//docs.xamarin.com/android/advanced_topics/garbage_collection](http://docs.xamarin.com/android/advanced_topics/garbage_collection)。您还应该记住，调用 GC 会使您的应用程序变慢。

如果有人有更好的选择，我会很高兴知道的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:44:50.357

我发现 XmlDocument 中有一个错误会导致它在某些情况下崩溃（按顺序快速加载大型 XML 文件（~180K））。我将向 Xamarin 报告此问题，看看他们是否可以进一步调查。

在我将代码转换为使用 XmlTextReader 后，内存行为发生了变化。现在系统会动态增加在 GC 周期中报告的堆大小。大小会根据需要上下浮动，不会崩溃。

使用 XmlDocument 代码，它没有增加堆大小，而是崩溃了。

# python - Python如何获取列表中包含字符串的数字总和

> ID：11943980
> 
> 赞同：1
> 
> 时间：2012-08-14T00:06:37.053
> 
> 标签：python, list, dictionary, sum

我有一个字典，

`d = {'a': [4,'Adam', 2], 'b': [3,'John', 4], 'c': [4,'Adam', 3], 'd': [4,'Bill', 3], 'e': [4,'Bob'], 'f': [4, 'Joe'], 'g': [4, 'Bill']}`

有没有什么快速的方法可以得到字典中每个列表中数字的总和？

例如，`a`应该返回`6`，`b`应该返回`7`，等等。

目前，我正在这样做。

```
for i in d:
    l2=[]
    for thing in d[i]:
        if type(thing) == int:
            l2.append(thing)
        print sum(l2) 
```

比每次都必须通过并将数字附加到列表中更快的修复可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T00:14:46.527

这是使用字典理解的一种相当直接的方法：

```
sums = {k: sum(i for i in v if isinstance(i, int)) for k, v in d.items()} 
```

或者在 Python 2.6 及以下版本上：

```
sums = dict((k, sum(i for i in v if isinstance(i, int))) for k, v in d.items()) 
```

例子：

```
>>> {k: sum(i for i in v if isinstance(i, int)) for k, v in d.items()}
{'a': 6, 'c': 7, 'b': 7, 'e': 4, 'd': 7, 'g': 4, 'f': 4} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T08:12:00.520

如果您的字典具有浮点值，那么上面的代码将不起作用，您将得到输出为 0 值。

因此，对于处理整数和浮点数，您可以使用以下代码。

以理解的方式，

```
sums = {k: sum(i for i in v if not isinstance(i, str)) for k, v in d.items()} 
```

或者

您可以使用通用函数来检查给定的输入是否为数字，然后我们可以对这些值求和，

```
d = {'a': [4,'Adam', 2], 'b': [3,'John', 4], 'c': [4,'Adam', 3], 'd': [4,'Bill', 3], 'e': [4,'Bob'], 'f': [4, 'Joe'], 'g': [4, 'Bill']}

def get_num(str):
    """ 
        This function converts the number/number string into a float. Otherwise, returns 0        
     """
    try:
        return float(str)
    except:
        return 0.0

if __name__ == '__main__':
    # example list which contains numbers and strings
    sums = {k:sum(get_num(value) for value in v) for k, v in d.items()}
    print sums
    ## output for the given input dict d
    ## {'a': 6.0, 'c': 7.0, 'b': 7.0, 'e': 4.0, 'd': 7.0, 'g': 4.0, 'f': 4.0} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:30:44.567

如果要输出为列表，请使用列表推导：

```
d = {'a': [4,'Adam', 2], 'b': [3,'John', 4], 'c': [4,'Adam', 3], 'd': [4,'Bill',
3], 'e': [4,'Bob'], 'f': [4, 'Joe'], 'g': [4, 'Bill']}

sums = [sum(i for i in v if isinstance(i, int)) for k, v in d.items()]

[6, 7, 7, 4, 7, 4, 4] 
```

如您所见，这并不完全匹配。在 d 中手动添加项目给出

```
[6, 7, 7, 7, 4, 4, 4] 
```

那么为什么不匹配呢？

**这是因为字典没有排序**

一旦您将 d 创建为字典，它就会重新排列其项目，因此输出这样的列表理解将为您提供正确的总和，但您不知道哪个总和对应于哪个字典项目。

这就是为什么 FJ 的字典理解建议似乎是这里的最佳选择。

除非您发现它可以以某种方式与列表理解一起使用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T00:19:17.557

在这种情况下，由于数字都在列表的第 1 和第 3 位

```
>>> {k: sum(v[::2]) for k,v in d.items()}
{'a': 6, 'c': 7, 'b': 7, 'e': 4, 'd': 7, 'g': 4, 'f': 4} 
```

# ruby - 文件名的批量扫描和重命名

> ID：11943981
> 
> 赞同：0
> 
> 时间：2012-08-14T00:06:41.130
> 
> 标签：ruby, itunes, finder, file-rename

我已经搜索了 StackOverflow 和互联网的其他部分，到目前为止，我没有发现任何可以帮助解决我的问题的东西。

我的问题是，在 iTunes 中，我有大约 220 首歌曲被列为“艺术家名称 - 歌曲名称”（例如“Modest Mouse - Dramamine”），我想知道是否有任何方法可以编写一个 Ruby 脚本将它们更改为在 iTunes 中正确列出，连字符（“Dramamine”）之后的单词成为歌曲标题，连字符之前的单词（“Modest Mouse”）成为艺术家。

另外，如果有任何程序可以实现相同的目标，如果有人可以共享链接，将不胜感激，但是，如果有人可以指出我可以学习如何在 Ruby 中进行大规模扫描和更改文件名的地方，然后放那些歌曲变成iTunes可以读取和显示的歌曲，那也将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:18:08.097

查看[Regex](http://www.ruby-doc.org/core-1.9.3/Regexp.html)和[File](http://www.ruby-doc.org/core-1.9.3/File.html) Ruby 库以及[Dir](http://www.ruby-doc.org/core-1.9.3/Dir.html)。他们为您提供工作所需的工具。

例如，

```
Dir["path/to/your/music/*.m4a"].each do |filename|
  m = File.basename(filename).match(/(.+)-(.+)/)
  artist = m[1].strip # remove leading and trailing blanks
  song = m[2].strip
  new_filename = song + ' - ' + artist
  File.rename(filename, "path/to/your/music/#{new_filename}.m4a"
|end| 
```

还有其他技巧，例如，您可以使用反引号（`，而不是 '）通过将块中的最后一行替换为：

```
`mv #{filename} path/to/your/music/#{new_filename}.m4a` 
```

这将在 Unix shell 中运行 mv 命令。

祝你好运！没有什么比通过反复试验学习更好的了！

# javascript - 在猫鼬中查找自定义条件

> ID：11943982
> 
> 赞同：1
> 
> 时间：2012-08-14T00:06:43.067
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在开发一个 node.js 网络应用程序，我在其中使用 mongoose 和 MongoDB 进行存储。这是一个地理定位应用程序。所以有时我必须找到存储在数据库中的 10 个最近的地方。我有这种方法来计算这个距离：

```
 var haversine = function(p1, p2) {
var R = 6371; // km
var dLat = toRad(p2.lat-p1.lat);
var dLon = toRad(p2.lon-p1.lon);
var lat1 = toRad(p1.lat);
var lat2 = toRad(p2.lat);

var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c;

return d;
 } 
```

其中 p1 和 p2 是点 {lat: Integer, lon: Integer}。

那么，我该怎么做才能找到最近的地方呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:11:50.383

抱歉，如果我不理解这个问题，但是如果您已经在 MongoDB 中存储了纬度和经度，为什么不确保该键上的地理索引并使用 MongoDB 本身来查找最近的点。

假设键上的地理索引`location`由 lat 和 lon 组成，您可以简单地发出类似于以下内容的内容：

```
db.places.find( { location : { $near : [lon,lat] } } ).limit(10) 
```

哪个应该在您的数据库中找到与 lon,lat 定义的位置最近的十个位置。

您可以在地理空间索引[文档](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/)中找到更多信息。

# linux - 运行 shell 脚本时 sh -x 与 bash -x

> ID：11943985
> 
> 赞同：1
> 
> 时间：2012-08-14T00:07:11.167
> 
> 标签：linux, bash, shell, unix, sunos

下面是我用来创建 PIE Graph 的 shell 脚本。

```
#! /bin/bash

TEMP=$(mktemp -t chart.html)
QUERY1=36
QUERY2=64
cat > $TEMP <<EOF
<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Title');
        data.addColumn('number', 'Value');
        data.addRows([
          ['Error Percentage', $QUERY1],
          ['No Error Percentage', $QUERY2]
        ]);

        // Set chart options
        var options = {'title':'Errors',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html>
EOF

# open browser
case $(uname) in
   Darwin)
      open -a /Applications/Google\ Chrome.app $TEMP
      ;;

   Linux|SunOS)
      firefox $TEMP
      ;;
 esac 
```

**问题陈述：-**

我将上面的文件保存为`chart.sh`. 每当我尝试将上述`chart.sh`文件运行为`sh -x chart.sh`

我总是得到错误 -

```
syntax error at line number 3: `TEMP=$' unexpected 
```

但是当我尝试运行上述`sh`文件时 -

```
bash -x chart.sh 
```

那我什么都没有`error`。为什么会这样？我的 shell 脚本有什么问题吗，假设如果我需要像`sh -x chart.sh`往常一样运行它，那么我需要在我的 shell 脚本中进行哪些更改？

我正在跑步`SunOS`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:09:59.987

`sh`并且`bash`可以指向完全不同的可执行文件。`sh`在某些系统上是符号链接这一事实`bash`不应让您假设在任何地方都是如此。如果需要`bash`，请明确使用它。

编辑（mpapis）：另请注意，即使您`bash`通过`sh`它调用也不完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:16:54.337

请参阅此页面：[http](http://docs.oracle.com/cd/E19082-01/819-2252/6n4i8rtus/index.html) ://docs.oracle.com/cd/E19082-01/819-2252/6n4i8rtus/index.html有关如何设置`PATH`变量以调用 POSIX 兼容版本`sh`和其他工具的信息。

# php - 需要防止在 PHP 中重复解析巨大的 CSV 文件

> ID：11943989
> 
> 赞同：1
> 
> 时间：2012-08-14T00:07:56.903
> 
> 标签：php, parsing, csv

我有一个巨大的 CSV 文件，我解析它以将数据存储在 PHP 数组中。对于不同的 PHP 文件，我必须一次又一次地解析它以将其存储在数组中。如何通过将其存储在数组中然后让该数组可用于所有 PHP 文件来防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:19:30.530

`apc_cache()`是你想要的。[http://us.php.net/manual/en/function.apc-fetch.php](http://us.php.net/manual/en/function.apc-fetch.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:13:00.900

您可以将其写入文件。之前使用 serialize() 。然后在每次需要时包含该文件（include_once）：

```
$my_csv_data = serialize($data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:19:21.980

使用以下命令将数组存储在文件中[`serialize`](http://php.net/manual/en/funciton.serialize.php)：

```
file_put_contents('file.txt', serialize($data)); 
```

然后，当您需要再次访问它时，请使用[`unserialize`](http://php.net/manual/en/funciton.unserialize.php)：

```
$data = unserialize(file_get_contents('file.txt')); 
```

# c# - 在没有 COM 的情况下使用 C# 中的 NLREG？

> ID：11943990
> 
> 赞同：0
> 
> 时间：2012-08-14T00:07:59.587
> 
> 标签：c#, .net, statistics

有没有办法在 C# 或任何其他 .NET 语言中利用 NLREG？目前，我们只能找到它作为 COM 对象，当我们更改平台（32 到 64 等）时，这会给我们带来问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:20:06.773

除非您在 NLREG 客户端中确实需要 64 位内存空间，否则只需将客户端项目中的目标平台设置为 x86（而不是 AnyCPU），那么无论是 32 位还是 64 位操作系统，它都将始终有效。

*如果您正在为您的客户端更改目标编译*平台，或者您是否正在尝试在 64 位操作系统上运行，您的问题并不清楚——我假设是后者。

# monogame - MonoGame xna 到 ios 的例子？

> ID：11943994
> 
> 赞同：0
> 
> 时间：2012-08-14T00:08:21.280
> 
> 标签：monogame, walkthrough

我一直在试图弄清楚如何做这个端口，我需要一个演练。一个详细的坚果汤例子会很棒。[编辑] 我应该补充一点，我想移植一个 WP7 游戏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:13:35.430

每个目标平台的处理方式不同

也许一些视频会帮助这一端口到 Android [http://www.youtube.com/watch?v=hF0sm5KGPPM](http://www.youtube.com/watch?v=hF0sm5KGPPM) 这一端口赢得 8 [http://www.youtube.com/watch?v=-ycmeVYm_gI](http://www.youtube.com/watch?v=-ycmeVYm_gI)

它可能有助于安装安装[程序](http://monogame.codeplex.com/downloads/get/391305)，（它安装 VS 和其他 sutff 的模板）