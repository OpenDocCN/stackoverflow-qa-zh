# StackOverflow 问答 10627000-10627999

# autoconf - 从 configure.ac 修改 PATH

> ID：10627003
> 
> 赞同：1
> 
> 时间：2012-05-16T21:31:35.047
> 
> 标签：autoconf

由于我需要通过更改编译器`AC_PROG_CC`并且编译器不在系统中，`PATH`我想`PATH`从内部扩展变量`configure.ac`。可悲的是，我找不到任何选择来做到这一点。或者是否可以直接更改搜索路径`AC_PROG_CC`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:47:32.823

不用担心设置`$PATH`。尝试设置`$CC`：

```
./configure CC=/path/to/cc 
```

要回答书面问题，您可以设置`$PATH`相同的方式：

```
./configure PATH="$PATH:/path/to" 
```

# java - Jersey JAX-RS、Hibernate 和 LazyInitializationException

> ID：10627006
> 
> 赞同：0
> 
> 时间：2012-05-16T21:31:40.143
> 
> 标签：java, hibernate, jax-rs

我正在开发一个 Java EE 6.0 RESTful 应用程序，并且我正在使用 Hibernate。我需要在序列化之前取消代理我的延迟加载对象（实际上是实体的延迟加载实体属性）以避免 LazyInitializationException。通过在序列化实体之前编写一些实用程序，我已经成功地使用 AMF 服务完成了这项工作。

我正在使用 Jersey JAX-RS 实现，我需要对 Jackson 执行此操作。我在 BeanSerializer 中找到了一个地方，我相信可以进行取消代理并且工作正常，但我需要以这种方式更改库类，我不想这样做。

所以这是我更改后的 BeanSerializer.serialize 方法：

```
@Override
public final void serialize(Object bean, JsonGenerator jgen, SerializerProvider provider)
throws IOException, JsonGenerationException
{
  bean =  Util.deproxy(bean); // ***** Deproxy the bean here *****

  jgen.writeStartObject();

  if (_propertyFilterId != null) {
    serializeFieldsFiltered(bean, jgen, provider);
  } else {
    serializeFields(bean, jgen, provider);
  }

  jgen.writeEndObject();
} 
```

**我的问题是如何在不更改库类（BeanSerializer）的情况下做到这一点？**如果有适当的方法，我不喜欢这种黑客行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T16:24:35.860

我特别尝试使用**Collections**来做到这一点。所以我为休眠的**PersistenceBag**添加了新的序列化程序到我的**ObjectMapper**中：

```
simpleModule.addSerializer(PersistentBag.class, new JsonSerializer<PersistentBag>() {
  @Override
  public void serialize(final PersistentBag collection, final JsonGenerator jsonGenerator, final SerializerProvider serializerProvider) throws IOException {
     if(collection.wasInitialized()){
        final Iterator iterator = collection.iterator();
        //this is done to prevent Infinite Recursion, cause if we write PersistenceBag it will be serialized again.         
        jsonGenerator.writeObject(Iterators.toArray(iterator,Object.class));
     }else{
        //this is done to prevent NPE and undefined reference. (collections should be empty, but not null)
        jsonGenerator.writeStartArray();
        jsonGenerator.writeEndArray();
     }
  }
});
objectMapper.registerModule(simpleModule); 
```

这可以防止**LazyInitializationException**。如果集合未初始化，则将其写入空数组，否则仅将其序列化。

（迭代器来自 Google Guava lib）

# powershell - 选择 ping 计算机列表的 Powershell 对话框

> ID：10627014
> 
> 赞同：0
> 
> 时间：2012-05-16T21:32:33.683
> 
> 标签：powershell, ping

我会说一段时间，但我又花了几个月的时间编写脚本，我偶然发现了 technet 上的一个对话框脚本（本周提示），我希望对其进行更改，以便我可以选择计算机列表从框中单击确定，它将 ping 该列表中的计算机。这是代码的副本。

```
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Drawing") 

$objForm = New-Object System.Windows.Forms.Form 
$objForm.Text = "Select List"
$objForm.Size = New-Object System.Drawing.Size(300,200) 
$objForm.StartPosition = "CenterScreen"

$objForm.KeyPreview = $True
$objForm.Add_KeyDown({if ($_.KeyCode -eq "Enter") 
{$x=$objListBox.SelectedItem;$objForm.Close()}})
$objForm.Add_KeyDown({if ($_.KeyCode -eq "Escape") 
{$objForm.Close()}})

$OKButton = New-Object System.Windows.Forms.Button
$OKButton.Location = New-Object System.Drawing.Size(75,120)
$OKButton.Size = New-Object System.Drawing.Size(75,23)
$OKButton.Text = "OK"
$OKButton.Add_Click({$x=$objListBox.SelectedItem;$objForm.Close()})
$objForm.Controls.Add($OKButton)

$CancelButton = New-Object System.Windows.Forms.Button
$CancelButton.Location = New-Object System.Drawing.Size(150,120)
$CancelButton.Size = New-Object System.Drawing.Size(75,23)
$CancelButton.Text = "Cancel"
$CancelButton.Add_Click({$objForm.Close()})
$objForm.Controls.Add($CancelButton)

$objLabel = New-Object System.Windows.Forms.Label
$objLabel.Location = New-Object System.Drawing.Size(10,20) 
$objLabel.Size = New-Object System.Drawing.Size(280,20) 
$objLabel.Text = "Please select a List:"
$objForm.Controls.Add($objLabel) 

$objListBox = New-Object System.Windows.Forms.ListBox 
$objListBox.Location = New-Object System.Drawing.Size(10,40) 
$objListBox.Size = New-Object System.Drawing.Size(260,20) 
$objListBox.Height = 80

[void] $objListBox.Items.Add("AXIS BLY")
[void] $objListBox.Items.Add("AXIS LYN")
[void] $objListBox.Items.Add("GS 5 List")
[void] $objListBox.Items.Add("GS 6 List")
[void] $objListBox.Items.Add("Computer List")

$objForm.Controls.Add($objListBox) 

$objForm.Topmost = $True

$objForm.Add_Shown({$objForm.Activate()})
[void] $objForm.ShowDialog()

$x 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:15:08.427

```
switch($x) {
"AXIS BLY"  {Write-Output "do AXIS BLY List" }
"AXIS LYN"  {Write-Output "do AXIS Lyn List" }
"GS 5 List" {Write-Output "do GS 5 List"     }
"GS 6 List" {Write-Output "do GS 6 List" }
"Computer List" {Write-Output "do Computer List" }

    default { }
} 
```

将 Write-Output "..." 替换为您要处理的命令。

# java - Eclipse 的图形数据映射

> ID：10627023
> 
> 赞同：0
> 
> 时间：2012-05-16T21:33:24.960
> 
> 标签：java, eclipse, datamapper, dozer

我正在寻找可以在 POJO 之间映射的 Java/Eclipse 的开源图形数据映射器。

类似于[Mapforce](http://www.altova.com/mapforce/eclipse-integration.html)，[Mule Studio 的数据映射器](http://www.mulesoft.com/webinars/graphical-data-mapping-mule)组件或 Dozer（但可视化）。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:58:03.407

试试 Oakland Software 的[Oakland Data Transformer](http://oaklandsoftware.com/data-transformer)。它适用于 Camel 或 Mule，并且还有一个直接适用于 Java 的 API。

对 Java 类的支持非常完善。

（免责声明，我经营 Oakland Software）

# php - 为什么 PHP 不像我的 SQL 点符号那样准备语句？

> ID：10627029
> 
> 赞同：0
> 
> 时间：2012-05-16T21:34:05.873
> 
> 标签：php, prepared-statement

所以，起初我加入了很多表，并使用了别名，但我将其简化为以下符号，它给了我这个错误。

> 警告：mysqli_stmt::bind_param()：变量的数量与准备好的语句中的参数数量不匹配

```
$sql = "SELECT table.name FROM `table`";

if (!($stmt = $link->prepare($sql))) {
    echo "Prepare failed: (" . $link->errno . ") " . $link->error;
    die();
}

if (!$stmt->execute()) {
    echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error."<br/>";
    die();
}

if (!$stmt->bind_param("s", $country)) {
    echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
    die();
} 
```

如果我尝试`table.name`用刻度换行，则会收到此错误：

```
Prepare failed: (1054) Unknown column 'venues.name' in 'field list' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:36:38.813

没有参数，但您正在绑定一个。因此“变量的数量与准备好的语句中的参数数量不匹配”

```
table.name 
```

对列名完全有效，但根据实际名称，您可能需要执行以下操作：

```
`table`.`name` 
```

您可能正在寻找的是：

```
$sql = "SELECT `table`.`name` FROM `table` WHERE country = ?"; 
```

请注意，实际上您应该避免使用反引号，因为您应该避免使用实体的保留名称。

# python - Redis 是否有基于 Python 时间的计数器库？

> ID：10627030
> 
> 赞同：1
> 
> 时间：2012-05-16T21:34:09.063
> 
> 标签：python, redis

我希望在 Python 项目中使用 Redis 存储基于时间的计数器。我想存储最近时间段（1、5、15、30、60 分钟或更长时间等）发生的各种事件的累积滚动计数器，以获取潜在的大量数据，而无需求助于基于 SQL 的解决方案。

我找到了一个[基于 Ruby 的库](https://github.com/thheller/timed-counter)，它似乎提供了我想要的东西。但是我正在使用 Python，所以我希望有人知道我们 Pythonistas 的类似解决方案。毕竟，我宁愿不重新发明轮子。我可以将 Ruby 库移植到 Python，或者如果没有任何现有的解决方案，我可以自行开发。

那么，听说过这样的事情吗？

**编辑：** 为什么是 Redis？我正在运行具有多个实例的 WSGI Web 应用程序，因此我需要跨进程边界共享数据。我知道如何使用 SQL 表和查询来做我想做的事，但我试图将最近的事件统计信息保存在（类似的）Redis 中而不是 SQL 中（作为一种优化。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:07:53.430

我还没有看到您提到的 ruby​​ 库提供的确切功能。但是有一些螺母和螺栓可供您使用，用于在 redis 中存储时间序列数据。

查看：

*   [http://lsbardel.github.com/python-stdnet/contrib/redis_timeseries.html](http://lsbardel.github.com/python-stdnet/contrib/redis_timeseries.html)
*   [http://pypi.python.org/pypi/kai​​ros](http://pypi.python.org/pypi/kairos)

如果 redis 是可选的，那么您应该查看可用于处理时间序列数据集的 pytables。

*   [http://pytables.github.com/usersguide/](http://pytables.github.com/usersguide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:10:40.247

更多资源：

*   [redis-timeseries](https://github.com/grinner/redis-timeseries-py) (grinner) 基于 ruby​​ 的 Redis 时间序列库的一个相当新的端口。
*   [使用 NLTK 进行 Python 文本处理：在 Redis 中存储频率分布](http://www.packtpub.com/article/python-text-processing-nltk-storing-frequency-distributions-redis)（[书源代码](https://bitbucket.org/sunqiang/nltkcookbook/src/d00ee3e5c503/3609_Code%28new%29/3609_08/rediscollections.py%20Source%20code%20from%20book)）

# facebook-graph-api - facebook喜欢/评论没有fb按钮

> ID：10627031
> 
> 赞同：0
> 
> 时间：2012-05-16T21:34:10.833
> 
> 标签：facebook-graph-api

我不太喜欢 Facebook API，所以如果有人能告诉我这是否可能，然后就我应该阅读什么内容提供一些指导，那就太好了。

我正在构建 WP 小部件，它有一个复选框选项，用户可以通过喜欢、评论或 fb 允许并具有功能的任何其他方式在他的 fb 墙上分享一些生成的单词。
所以一旦用户点击保存，这个动作应该在后台发生，通过从一些小部件字段中获取输入来构建自定义消息。
这又是可能的，我应该追求什么？？？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:26:11.580

1.  首先你应该创建 FB 应用程序：[https ://developers.facebook.com/docs/appsonfacebook/tutorial/](https://developers.facebook.com/docs/appsonfacebook/tutorial/)

2.  假设您的网页有文本框和一个按钮 - 发布到 Facebook。单击该按钮时，您应该显示 FB 对话框，要求用户授予您的应用程序在用户墙上发布的权限：[https](https://developers.facebook.com/docs/authentication/client-side/) ://developers.facebook.com/docs/authentication/client-side/ 。出于该特定目的，您必须请求[publish_actions](https://developers.facebook.com/docs/publishing/)权限。

3.  用户确认后，您将从该弹出窗口获得**ACCESS TOKEN** - 您可以使用 Graph API 将新消息发布到用户的墙上：[https](https://developers.facebook.com/docs/reference/api/post/) ://developers.facebook.com/docs/reference/api/post/ 。根据您的技术，您可能有 SDK 可供您使用，它对您隐藏了低级别的详细信息 - 但本质上，您只需要发送设置了必填字段的 POST HTTP 请求（有关字段列表，请参见上面的链接）。

# bootloader - arm9 引导加载程序 IAR

> ID：10627041
> 
> 赞同：0
> 
> 时间：2012-05-16T21:35:21.793
> 
> 标签：bootloader, iar, atmel, arm9

我正在寻找 Atmel Arm9 的引导加载程序。

Atmel 有一个“**安全可靠的引导加载程序**”，但它适用于 ARM7，而且已经很老了（不使用最新的 IAR 工具链构建）

我假设这必须在之前完成并且不想重新发明轮子

如果引导加载程序适用于最新的 IAR 嵌入式工作台（版本 6.x），则奖励将是

如果有可用的商业产品 - 那也很好。

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:08:48.917

根据您使用的 Atmel ARM9 部件，它可能已经在 ROM 中有一个引导加载程序，我正在使用 AT91SAM9RL，并且可以通过在通电时将 BMS 引脚连接到 VDDIOP 来访问引导加载程序。然后，嵌入式引导加载程序可以从 SD 卡、NAND、SPI DataFlash 和串行或 USB（使用 SAM-BA）加载应用程序代码。

# linux - 是否可以从 C 程序或 shell 脚本直接将搜索参数发送到搜索引擎？

> ID：10627042
> 
> 赞同：-2
> 
> 时间：2012-05-16T21:35:31.230
> 
> 标签：linux, web

> **可能重复：**
> [以编程方式获取 Google 搜索结果](https://stackoverflow.com/questions/1397313/programatically-get-google-search-results)

是否有任何搜索引擎可以通过编程方式向其发送搜索参数：即从 C 程序或 shell 脚本发送搜索参数，我可以使用`wget`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:26:07.900

这是使用[http://ask.com](http://ask.com)搜索引擎搜索*stackoverflow.com*的 C 语言示例现实生活示例：

```
#include <stdio.h>
#include <curl/curl.h>

int main(void) {
  CURL *curl;
  CURLcode res;

  curl = curl_easy_init();
  if(curl) {
    curl_easy_setopt(
        curl,
        CURLOPT_URL,
        "http://fr.ask.com/web?q=stackoverflow.com&qsrc=0&o=312&l=dir"
    );
    res = curl_easy_perform(curl);
    curl_easy_cleanup(curl);
  }
  return 0;
} 
```

要运行它，您应该这样做：

```
gcc <THE_CHOOSEN_C_SCRIPT_NAME> -lcurl && ./a.out 
```

此外，您可以使用`argv[]`数组来输入搜索词作为脚本的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:47:13.483

大多数主要搜索引擎都提供 API。谷歌“网络搜索 API”。

# fortran - MPI FORTRAN 代码随机失败

> ID：10627045
> 
> 赞同：1
> 
> 时间：2012-05-16T21:35:47.853
> 
> 标签：fortran, mpi

我的主要 FORTRAN MPI 代码达到了所有进程都调用脚本的地步。代码看起来像

```
write(syscommand,'(a131xi3)') './vscript.csh' my_mpi_proc_num
rc=system(syscommand) 
```

现在，这部分代码循环了一百多次，并且脚本在所有进程上运行良好。然后，据我所知，一些进程会随机进入系统，然后会返回错误代码 32512。然后会发生其他一些事情（抱歉，我无法显示更多代码。我的雇主不会太高兴。 )，然后调用 MPI_ABORT 并且所有进程都死掉。有人告诉我，32512 通常是找不到命令时返回的错误代码。这不太可能，因为正如我所指出的那样，在这次崩溃之前已经*找到*了数百次脚本，并且没有任何东西可以移动它。

我似乎找到了一个权宜之计：

```
write(syscommand,'(a131xi3)') './vscript.csh' my_mpi_proc_num
rc=32512
num_attempts=0
do while (num_attempts<100 .and. rc==32512)
  num_attempts=num_attempts+1
  rc=system(syscommand)
enddo 
```

即每个进程将尝试 100 次以通过 32512 的事情。尽管我确信这是可怕的代码，但它确实有效。

那么，有人知道我为什么会收到此错误吗？一个想法：如果两个进程试图同时运行相同的脚本，其中一个会被踢出并被迫返回那个 32512 吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:53:55.987

可能您的编译器将`system`内在函数实现为`system(3)`对系统库提供的 POSIX 函数的调用。

此调用返回一个整数，其组织如下。

```
 bits 0-6 set -- the process was stopped
 bit 7 -- core flag
 bits 8-15 -- exit status of the child process 
```

最后一行是重要的。

返回码 32512 为 0x7F00，即子 shell 的退出状态为 127。在 Bourne shell 和其他 UNIX shell 中，这意味着该命令未从 PATH 中找到并且不是内置 shell 命令（请参阅[此问题](https://stackoverflow.com/q/1763156/1328439)）。它也称为“找不到命令”错误。

如果有任何东西可能与您的 PATH 变量发生冲突，那就是它。您可以尝试`./vscript.csh`用绝对路径替换其中的所有命令吗？

在某些 MPI 实现中，不支持从 MPI 进程生成进程。我们发现某些版本的 OpenMPI 存在问题。如果您调用`fork()`或`system()`从 OpenMPI 程序调用，您将收到警告：

> MPI 进程执行了一个操作，该操作涉及调用“fork()”系统调用以创建子进程。Open MPI 当前在可能导致内存损坏或其他系统错误的条件下运行；您的 MPI 作业可能会挂起、崩溃或产生静默数据损坏。强烈建议不要使用 fork()（或 system() 或其他创建子进程的调用）。
> 
> 如果您*绝对确定*您的应用程序将成功且正确地在对 fork() 的调用中幸存下来，则可以通过将 mpi_warn_on_fork MCA 参数设置为 0 来禁用此警告。

另一方面，最近版本的 OpenMPI FAQ 声称

> 一般来说，如果您的应用程序调用 system() 或 popen()，它可能是安全的。

此限制并非特定于 OpenMPI，它会影响依赖于 OpenFabrics 堆栈的每个实现。

# c# - HTML 表单的内容是否默认加密/数据交换安全？

> ID：10627048
> 
> 赞同：0
> 
> 时间：2012-05-16T21:35:59.050
> 
> 标签：c#, forms, security, unity3d

我目前正在使用 Unity 引擎为手机开发游戏。我们正在使用 Google App Engine Datastore 来保存游戏状态（登录信息、玩家资产等）。[我们通过使用 Unity 的WWWForm 类](http://unity3d.com/support/documentation/ScriptReference/WWWForm.html)将所需信息集成到 HTML 表单中来向数据存储区提供信息。

现在，我只想知道这是否是在移动设备和服务器之间交换敏感游戏数据的安全方式。并尝试查找表单以查看它们是否提供了基本加密，但我真的找不到任何信息。如果数据默认公开，有没有办法通过 Unity 轻松加密/保护它？通过其他方式？我只是不希望恶意用户拦截重要数据或提供自己的指令来破坏游戏状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:47:30.080

不知道默认情况下它是否安全，我认为不是。然而，它很容易使用 TLS/SSL/https 来加密数据。

在您的服务器上启用 SSL，获取或生成证书，然后将表单发布的地址更改为 https 地址。

这可以在数据传输时保护数据。一旦它到达服务器，它就会被解密。

# javascript - jquery fadeIn 改变内容和淡出不透明度？

> ID：10627049
> 
> 赞同：0
> 
> 时间：2012-05-16T21:36:03.387
> 
> 标签：javascript, jquery, opacity, fadein, fadeout

作为 javascript 和 jquery 的新手，这让我陷入了一个循环。

我想要一个流畅的 fadeOut 更改 html fadeIn 函数，但它似乎没有像我预期的那样工作。

我有一个内容的 div 容器，该容器由使用 jquery 的 ajax 请求填充。这工作正常。

我的最终目标是发出 ajax 请求，淡出 div 容器中的当前内容，淡入新内容

目前代码如下

```
$("#middle").fadeOut('slow',function(){
    $("#middle").html(data).fadeIn('slow');
}); 
```

我在不透明度方面尝试过同样的方法并且遇到了同样的问题。似乎不透明度是我想要的方式，因为它只保留了 div 容器的大小。答案必须很简单。

如前所述，我更愿意使用不透明度来实现，但如果可行的话，任何一种方式都可以。我对两者都有同样的问题。

问题似乎是浏览器缓存问题。它不再发生。检查第一个使用不透明度向我展示等效代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:50:57.997

试试这个，它会更流畅一些...

```
$("#middle").fadeOut('slow',function(){
    $("#middle").html(data);
}).fadeIn('slow'); 
```

干杯！

# php - jQuery Ajax：pdf 响应

> ID：10627051
> 
> 赞同：6
> 
> 时间：2012-05-16T21:36:08.393
> 
> 标签：php, jquery, html, ajax, mime-types

我有一个链接，当用户点击它时，他会得到一个 PDF。在 jQuery 中，我创建了一个对服务器的 POST ajax 调用以获取 PDF。响应是 PDF，具有正确的内容标题等，通常会导致浏览器打开 Reader 插件，或允许用户保存 PDF。但就我而言，这是行不通的。有没有办法设置数据内容类型，或将内容类型设置为 PDF？

我的ajax调用：

```
$('#sf_getpdf').click(function() {

 $.ajax({    //create an ajax request to load_page.php

        type: "POST",

        url: "index.php?route=sale/order/superfaktura_getpdf&token=<?php echo $token; ?>",

        data: 'invoice_id=<?php echo $invoice_id; ?>&sf_token=<?php echo $sf_token ?>',  //with the page number as a parameter

        dataType: "text",   //expect html to be returned

        success: function(msg){

            if(parseInt(msg)!=0)    //if no errors

            {

            document.write(msg)
            }

        }

    });

}); 
```

萤火虫，回应： ![萤火虫](../Images/9e8308c07dba32eaf2291d6a65a15fc8.png)

浏览器响应...

![浏览器中的响应](../Images/4c42d09f1417c0510995e96c108afd54.png)

我已经尝试在服务器中设置内容类型，但没有成功：

![服务器中的内容类型](../Images/c03691f76ccb6cfd4f0e1aa7f8ac6b64.png)

编辑：不需要 Ajax 来执行此操作。

```
<a id="adr_stitok" target="_blank" href="index.php?route=sale/order/superfaktura_getpdf&token=<?php echo $token; ?>&invoice_id=<?php echo $invoice_id; ?>&sf_token=<?php echo $sf_token ?>" >Download</a></td> 
```

会做的事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T03:48:21.133

确保您的服务器端返回可下载的内容并提交到文件，例如：

```
 //$.download('path', 'data' [, 'post'])
            $.download = function(url, data, method) {
                //url and data options required
                if(url && data) {
                    var form = $('<form />', { action: url, method: (method || 'get') });
                    $.each(data, function(key, value) {
                        var input = $('<input />', {
                            type: 'hidden',
                            name: key,
                            value: value
                        }).appendTo(form);
                    });
                return form.appendTo('body').submit().remove();
                }
            throw new Error('$.download(url, data) - url or data invalid');
            };

$.download("index.php?route=sale/order/superfaktura_getpdf&token=<?php echo $token; ?>", {}, 'post') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:41:07.523

它不起作用，因为 AJAX 调用不会获取 PDF 并将其加载到浏览器中。这就是为什么它被称为 XMLHttpRequest.. 它只交换文本！

# javascript - javascript日期错误的年份

> ID：10627052
> 
> 赞同：0
> 
> 时间：2012-05-16T21:36:11.437
> 
> 标签：javascript, date

我需要从当前日期减去 365 天。我不确定我的日期出了什么问题，它打印出奇怪的年份“5/17/111”而不是 2011 年 5 月 17 日。有人可以建议我哪里出错了

```
currentTime.setDate(currentTime.getDate() - 365);
        var minDay = currentTime.getDate();
        var minMonth = currentTime.getMonth() + 1;
        var minYear = currentTime.getYear();

    minDate = minMonth + '/' + minDay + '/' + minYear; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T21:38:24.663

您需要使用`getFullYear()`而不是`getYear()`

```
var minYear = currentTime.getFullYear(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:37:29.740

怎么样：

```
var minDay = currentTime.getDate();
var minMonth = currentTime.getMonth() + 1;
var minYear = currentTime.getFullYear() - 1;

minDate = minMonth + '/' + minDay + '/' + minYear; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:38:34.297

你需要使用 getFullYear 而不是 getYear

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T21:44:34.323

[Moment.js](http://momentjs.com)在这种情况下会很有帮助。

```
moment().subtract('days', 365).format('MM/DD/YYYY'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T21:45:38.520

您可以使用 getFullYear() 而不是 getYear()。

您可以在此处阅读 getYear() 描述：http: [//docs.oracle.com/cd/E19957-01/816-6408-10/date.htm#1194138](http://docs.oracle.com/cd/E19957-01/816-6408-10/date.htm#1194138)

# java - 将 python time.time() 转换为 java.nanoTime()

> ID：10627055
> 
> 赞同：5
> 
> 时间：2012-05-16T21:36:28.860
> 
> 标签：java, python, nanotime

java的 System.nanoTime() 似乎给了很长的时间： 1337203874231141000L 而 python time.time() 会给出类似 1337203880.462787 的东西

如何将 time.time() 的值转换为与 System.nanoTime() 匹配的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T21:41:25.633

你不能。

从[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#nanoTime())中：

> 此方法只能用于测量经过的时间，**与系统或挂钟时间的任何其他概念无关**。返回的值表示自某个固定但任意时间以来的纳秒（可能在将来，因此值可能为负数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:39:44.163

将输出除以`System.nanoTime()`10^9。这是因为它以纳秒为单位，而输出`time.time()`以秒为单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:42:27.270

Python[文档](http://docs.python.org/library/time.html)表明时间是基于 Python 的纪元。Java 也是[如此](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Time.html)。问题是python使用float/double来表示时间，而java使用int。

我认为转换为标准格式，然后转换为目标系统会更容易，而不是尝试使用自纪元以来的秒数，就像您尝试做的那样。

# c# - 一些破坏 - WPF + DependancyProperties

> ID：10627058
> 
> 赞同：2
> 
> 时间：2012-05-16T21:36:33.487
> 
> 标签：c#, wpf, xaml

我正在尝试将双手柄滑块修改为通用双模型。

[更新]：XAML 代码：

```
<Slider x:Name="LowerSlider" DataContext="this" Template="{StaticResource simpleSlider}" Margin="10,0,0,0"
            IsEnabled="{Binding Path=IsUpperSliderEnabled}"                  
            Minimum="{Binding Path=Minimum}"
            Maximum="{Binding Path=Maximum}"
            Value="{Binding Path=LowerValue}"                
            SmallChange="{Binding Path=SmallChange}" 
            LargeChange="{Binding Path=LargeChange}" />
    <Slider x:Name="UpperSlider" DataContext="this" Template="{StaticResource simpleSlider}" Margin="10,0,0,0"
            IsEnabled="{Binding Path=IsUpperSliderEnabled}"                  
            Minimum="{Binding Path=Minimum}"
            Maximum="{Binding Path=Maximum}"
            Value="{Binding Path=UpperValue}"                
            SmallChange="{Binding Path=SmallChange}" 
            LargeChange="{Binding Path=LargeChange}" /> 
```

C#代码隐藏：

```
 #region Dependency Property - Minimum
    public Double Minimum
    {
        get { return (Double)GetValue(MinimumProperty); }
        set { SetValue(MinimumProperty, value); }
    }

    public static readonly DependencyProperty MinimumProperty =
        DependencyProperty.Register("Minimum", typeof(Double), typeof(DualHandleSlider), new UIPropertyMetadata(0.0));
    #endregion

    #region Dependency Property - Lower Value
    public Double LowerValue
    {
        get { return (Double)GetValue(LowerValueProperty); }
        set { SetValue(LowerValueProperty, value); }
    }

    public static readonly DependencyProperty LowerValueProperty =
        DependencyProperty.Register("LowerValue", typeof(Double), typeof(DualHandleSlider), new UIPropertyMetadata(0.0));
    #endregion

    #region Dependency Property - Upper Value
    public Double UpperValue
    {
        get { return (Double)GetValue(UpperValueProperty); }
        set { SetValue(UpperValueProperty, value); }
    }

    public static readonly DependencyProperty UpperValueProperty =
        DependencyProperty.Register("UpperValue", typeof(Double), typeof(DualHandleSlider), new UIPropertyMetadata(5.0, new PropertyChangedCallback(OnUpperValueChanged)));

    public static void OnUpperValueChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {

    }
    #endregion

    #region Dependency Property - Maximum
    public Double Maximum
    {
        get { return (Double)GetValue(MaximumProperty); }
        set { SetValue(MaximumProperty, value); }
    }

    public static readonly DependencyProperty MaximumProperty =
        DependencyProperty.Register("Maximum", typeof(Double), typeof(DualHandleSlider), new UIPropertyMetadata(10.0, new PropertyChangedCallback(OnMaximumChanged)));

    public static void OnMaximumChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        DualHandleSlider slider = (DualHandleSlider)d;

        if (slider.IsUpperValueLockedToMax)
        {
            slider.UpperValue = (Double)e.NewValue;
        }
    }

    #endregion

    #region Dependency Property - Small Change
    public double SmallChange
    {
        get { return (double)GetValue(SmallChangeProperty); }
        set { SetValue(SmallChangeProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SmallChange.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SmallChangeProperty =
        DependencyProperty.Register("SmallChange", typeof(double), typeof(DualHandleSlider),
            new UIPropertyMetadata(1.0, new PropertyChangedCallback(OnSmallChangePropertyChanged)));

    protected static void OnSmallChangePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine(e.NewValue);
    }
    #endregion

    #region Dependency Property - Large Change

    public double LargeChange
    {
        get { return (double)GetValue(LargeChangeProperty); }
        set { SetValue(LargeChangeProperty, value); }
    }

    // Using a DependencyProperty as the backing store for LargeChange.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty LargeChangeProperty =
        DependencyProperty.Register("LargeChange", typeof(double), typeof(DualHandleSlider),
                new UIPropertyMetadata(1.0, new PropertyChangedCallback(OnLargeChangePropertyChanged)));

    protected static void OnLargeChangePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine(e.NewValue);
    }
    #endregion 
```

问题是，该控件不会以任何方式对实现控件时设置的属性做出反应。即使以编程方式编辑属性也不起作用？我认为这是一个愚蠢的错误，但我已经为这段代码倾注了一段时间。有任何想法吗？

编辑：仍然没有运气！输出中没有关于绑定错误的内容。

![奇怪的行为！](../Images/716be12610d2531324e8bc1b320ce4fc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:16:16.613

在最新编辑之前，您已接近初始代码。关键是命名您的*用户控件*并绑定到*用户控件*。`DataContext`如果您曾经支持嵌入式`ContentControl`s ，这将允许自然流过。设置`DataContext="this"`从字面上将您的数据上下文设置为*字符串* `"this"`。

而是`x:Name="ThisControl"`在您的`<UserControl...`行中添加类似的内容，然后更新绑定以指向`ElementName=ThisControl`. 确保`Slider.Value`绑定是`Mode=TwoWay`（如果您不指定模式，这是默认设置）：

```
<UserControl x:Class="NameSpace.ThisControl"
             x:Name="ThisControl">
<Grid>
    <Slider x:Name="LowerSlider"
            IsEnabled="{Binding IsUpperSliderEnabled, ElementName=ThisControl}"
            Minimum="{Binding Minimum, ElementName=ThisControl}"
            Maximum="{Binding Maximum, ElementName=ThisControl}"
            Value="{Binding LowerValue, ElementName=ThisControl}"
            SmallChange="{Binding SmallChange, ElementName=ThisControl}"
            LargeChange="{Binding LargeChange, ElementName=ThisControl}" />
    <Slider x:Name="UpperSlider"
            IsEnabled="{Binding IsUpperSliderEnabled, ElementName=ThisControl}"  
            Minimum="{Binding Minimum, ElementName=ThisControl}"
            Maximum="{Binding Maximum, ElementName=ThisControl}"
            Value="{Binding UpperValue, ElementName=ThisControl}"
            SmallChange="{Binding SmallChange, ElementName=ThisControl}" 
            LargeChange="{Binding LargeChange, ElementName=ThisControl}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:39:00.407

您是否将控件 DataContext 属性设置为正确的值？您可以查看输出窗口以查看您可能遇到的绑定错误。

编辑：使用 ElementName=root 您将绑定指向名为 root 的东西。这样做的正常方法（恕我直言）是删除所有绑定的 ElementName 部分并设置 DataContext = this 以便能够绑定到它自己的 DP。

# ios - 检查时间是在两个保存的文本字符串时间之前还是之后

> ID：10627062
> 
> 赞同：3
> 
> 时间：2012-05-16T21:36:58.860
> 
> 标签：ios, xcode, nsdate, nsdateformatter

我有两次存储在 NSDictionary 中。“开始时间”为 22:30，“结束时间”为凌晨 4:00。

我需要弄清楚当前时间是在开始时间之前，在结束时间之前，还是在结束时间之后和下一次开始时间之前。

我确信我让这件事变得比它需要的复杂得多，但在试图掩盖所有可能性时，我完全把自己弄糊涂了。

```
NSDictionary *noaudio = [[NSUserDefaults standardUserDefaults] objectForKey:@"NoSound"];
NSDateFormatter *tformat = [[NSDateFormatter alloc] init];
[tformat setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];  
[tformat setDateFormat:@"HH:mm"];

date1 = [tformat dateFromString:[noaudio objectForKey:@"start"]];
date2 = [tformat dateFromString:[noaudio objectForKey:@"end"]];
date3 = [NSDate date]; 
```

我是否必须同时检查日期 1 和 2 与 3？

感谢您对此提供任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:15:21.030

好吧，只有两次没有日期，您只能找出当前时间是否在开始时间和结束时间之间。这是因为，在上面的示例中（开始时间 22:30 和结束时间 04:00）你会在 13:00 返回什么？今天是**“**结束时间之后”（04:00）**和**“开始时间之前”（22:30）。

话虽如此，这是检查当前时间是否在两个日期中指定的时间之间的一种方法。您可以通过将所有内容保留为 NSDate（使用日历操作）来做到这一点，但这会使事情变得更加复杂，因为您必须使用今天的日期和指定的时间来创建新的 NSDate 对象。这不是太难，但除非您在其他地方使用它们，否则没有理由这样做。

```
// Take a date and return an integer based on the time.
// For instance, if passed a date that contains the time 22:30, return 2230
- (int)timeAsIntegerFromDate:(NSDate *)date {
    NSCalendar *currentCal      = [NSCalendar currentCalendar];
    NSDateComponents *nowComps  = [currentCal components:NSHourCalendarUnit|NSMinuteCalendarUnit fromDate:date];
    return nowComps.hour * 100 + nowComps.minute;
}

// Check to see if the current time is between the two arbitrary times, ignoring the date portion:
- (BOOL)currentTimeIsBetweenTimeFromDate1:(NSDate *)date1 andTimeFromDate2:(NSDate *)date2 {
    int time1     = [self timeAsIntegerFromDate:date1];
    int time2     = [self timeAsIntegerFromDate:date2];
    int nowTime   = [self timeAsIntegerFromDate:[NSDate date]];

    // If the times are the same, we can never be between them
    if (time1 == time2) {
        return NO;
    }

    // Two cases:  
    // 1\.  Time 1 is smaller than time 2 which means that they are both on the same day
    // 2\.  the reverse (time 1 is bigger than time 2) which means that time 2 is after midnight
    if (time1 < time2) { 
        // Case 1
        if (nowTime > time1) {
            if (nowTime < time2) {
                return YES;
            }
        }
        return NO;
    } else { 
        // Case 2
        if (nowTime > time1 || nowTime < time2) {
            return YES;
        }
        return NO;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:43:31.180

为什么不直接将 NSDate 存储在 NSDictionary 中？然后，您可以使用`timeIntervalSinceReferenceDate`or`timeIntervalSince1970`得到一个`NSTimeInterval`（实际上只是一个双精度）并进行简单的比较。

如果您只是有时间，则无法判断它们是否在同一日期，因此我看不到在开始时间在午夜之前并且结束时间在之后的通用解决方案...

无论如何，即使您*不能*只存储 NSDate（是这种情况吗？时间是否来自某些外部来源？），如果您转换为双精度并仅使用 < 和 >，您的生活会简单得多。

# apache - RewriteBase 的值是否可用作变量/引用？

> ID：10627064
> 
> 赞同：4
> 
> 时间：2012-05-16T21:37:07.627
> 
> 标签：apache, .htaccess, environment-variables, mod-rewrite

我正在编写一个 .htaccess 文件，它将检查请求的页面是否存在于缓存中。为了执行检查（并保存输入），我设置了一个带有缓存位置的 ENV 变量：

```
# all this works as I expect #
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /some/path/
RewriteRule ^(.*)$ - [E=rewritebase:/some/path/,E=cache:%{ENV:rewritebase}cache/] 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{ENV:cache}$1\.html -f
RewriteRule ^(.*)$ $1\.html [L]

</IfModule> 
```

如您所见，我还必须将一个 ENV 变量设置为“替代” RewriteBase 值。我宁愿不这样做，因为如果 RewriteBase 改变了，我也必须记住改变 ENV 变量。最终，这可能是其他人使用的 CMS 的一部分，我希望它的配置尽可能简单/直接，出错的机会最少。我希望能够只设置`ENV:cache`变量*而*无需设置`ENV:rewritebase`变量，就像这样（或类似的）：

```
# doesn't work #
RewriteRule ^(.*)$ - [E=cache:%{RewriteBase}cache/] 
```

正如暗示的那样，该`cache/`目录将始终位于 RewriteBase 中指定的目录内。[编辑]
。. . 但是，它*并不*总是存在此 .htaccess 文件的物理路径。
[/编辑]

我也很乐意听到其他建议。谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T18:27:43.547

[为运行 Apache](https://stackoverflow.com/questions/6569080/how-to-define-a-variable-in-apaches-httpd-conf-file)的用户使用环境变量，

```
#.profile of Apache user
rewritebase = "some/path" 
```

然后在 .htaccess 文件中引用它：

```
#.htaccess file
RewriteBase {$rewritebase}    
RewriteRule ^(.*)$ - [E=cache:%{ENV:rewritebase}cache] 
```

伪 ReWriteRule 也可以解决问题：

```
#This will be true for any user agent
RewriteCond  %{HTTP_USER_AGENT}  ^.*

#Replace / with / and set the rewritebase variable to /some/path
RewriteRule  /(\/some\/path)* / [E=rewritebase:$1/some/path]

#Reference the rewritebase variable
RewriteBase {$rewritebase}

#Redefine the rewritebase variable
RewriteRule ^(.*)$ - [E=rewritebase:$1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-13T17:09:10.630

我找到了使用 rewrite base 值的解决方案。这只是一个点。. 这是有效的。如果定义了 rewritebase，它将转发到 rewritebase。如果 rewritebase 没有定义，它会转发到代码的目录。

```
RewriteRule ^index.html(/?)$ ./ [R=301,L] 
```

# ios - iOS - 接受位置服务时调用什么？

> ID：10627065
> 
> 赞同：0
> 
> 时间：2012-05-16T21:37:14.337
> 
> 标签：ios, xcode, cllocationmanager

我一直在浏览[CLLocationManager](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)的文档，没有看到任何地方说明用户接受位置服务时会发生什么。我正在寻找一种类似于用户拒绝使用位置服务`didFailWithError`并被调用时调用的方法。

我已经尝试过诸如断点`didUpdateToLocation`和`didEnterRegion`断点之类的方法，但是当我为位置服务点击“确定”时，什么都没有被调用。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:12:19.320

你要找的是`- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status` 哪个在`CLLocationManagerDelegate`

从那里，您可以通过检查状态是否为`kCLAuthorizationStatusNotDetermined`、`kCLAuthorizationStatusRestricted`、`kCLAuthorizationStatusDenied`或`kCLAuthorizationStatusAuthorized`

但请注意，这种行为在 iOS4 与 iOS5 中会变得有些棘手。我认为在 iOS4 中，即使用户删除了应用程序，这种情况也会持续存在。

# asp.net-mvc-3 - 链接两个实体的表

> ID：10627076
> 
> 赞同：0
> 
> 时间：2012-05-16T21:38:23.040
> 
> 标签：asp.net-mvc-3, entity-framework-4

我有两个实体 - UserObj 和 Producer。

UserObj 存储与用户相关的配置文件数据 Producer 是与 userobj 可以关联的公司。为了将这两者关联起来，我想创建一个实体，让我可以从一个实体访问每个实体的数据。

我正在尝试将两者联系起来——但我不太确定该怎么做，而且我敢打赌这是一件小事。感谢您的任何帮助！

生产者用户

```
 public class ProducerUser
{
    [ForeignKey("UserObj")]
    public Guid UserObjID { get; set; }
    [ForeignKey("Producer")]
    public int ProducerID { get; set; }

    public virtual UserObj UserObj { get; set; }
    public virtual Producer Producer { get; set; }

} 
```

用户对象

```
 public class UserObj : Contact
{

    [Key]
    //public override string Email { get; set; }
    public Guid UserObjID { get; set; }
    [Display(Name = "First Name")]
   // [Required]
    public string FirstName { get; set; }
  //  [Required]
    [Display(Name = "Last Name")]
    public string LastName { get; set; }
    public int UserTypeID { get; set; }

    public virtual UserType UserType { get; set; }

    public static UserObj GetUserObj(string GUID, vfContext db)
    {
        Guid guidUser = new Guid(GUID);
        return db.UserObjs.Find(guidUser);
    }

    public string GetFullName()
    {
        return this.FirstName + " " + this.LastName;
    }

} 
```

制片人

```
 public class Producer : Contact
{
    [Key]
    public int ProducerID { get; set; }
    public string Name { get; set; }
    public string Twitter { get; set; }

    public virtual ICollection<Wine> Wines { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:31:05.390

要建立多对多关系，请在关系的两侧添加 ICollection<>。在你的情况下：

添加到 Producer 类

```
public virtual ICollection<UserObj> UserObjs { get; set; } 
```

向类 UserObj 添加

```
public virtual ICollection<Producer> Producers { get; set; } 
```

之后，您可以删除类 ProducerUser 的声明。EF 将为您生成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:46:46.597

将以下行添加到类 UserObj 和 Producer：

```
public virtual ICollection<ProducerUser> ProducerUsers { get; set; } 
```

# haskell - 使用没有模式匹配的数据类型的值

> ID：10627079
> 
> 赞同：1
> 
> 时间：2012-05-16T21:38:31.980
> 
> 标签：haskell, types, pattern-matching, ghc

在 Haskell（使用 ghc）中有什么方法可以直接使用数据类型的值，而不像在面向对象的编程语言（例如 obj.a 或 obj->a）中那样*使用模式匹配？*

我正在寻找这样的东西：

```
data Obj = Obj {a :: Int, b :: Int}

some :: Obj -> Int
some o = o.a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:46:19.080

您可以获得的最接近的是 Haskell 的记录，如下所示：

```
data Obj = Obj {a :: Int, b :: Int} 
```

这将自动为您提供以下功能：

```
a :: Obj -> Int
b :: Obj -> Int 
```

可以像普通函数一样调用（为清楚起见，键入注释）：

```
(a (o :: Obj)) :: Int 
```

[了解你一个 Haskell](http://learnyouahaskell.com/making-our-own-types-and-typeclasses)有一个很好的章节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:41:38.210

是的，你已经成功了一半。通过使用记录语法，您已经自动创建了函数

```
a (Obj x _) = x
b (Obj _ x) = x 
```

因此，您可以使用 访问该`a`值`a myObject`。

但是，是的，正如您所看到的，它确实归结为模式匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:50:44.587

`RecordWildCards`语言扩展也很有帮助。

```
{-# LANGUAGE RecordWildCards #-}

data Obj = Obj {a :: Int, b :: Int}

some :: Obj -> Int
some Obj{..} = a + b 
```

# .htaccess - 如何使用 .htaccess 在特定文件上重写子域？

> ID：10627081
> 
> 赞同：0
> 
> 时间：2012-05-16T21:38:39.967
> 
> 标签：.htaccess, subdomain

我有一些使用 .htaccess 的经验，并且创建了可以正常工作的简单子域重定向。但是，我现在被困在更复杂的事情上几天了，所以我希望能得到一些帮助！

我也需要重写子域和文件名 - 这就是我的意思：

每当访问 en.example.com/entrar 的页面时，我都需要它将 url 重新写入正确的子域：es.example.com/entrar。（区别在于基于语言的子域）

到目前为止，我已经尝试过这个，但它不起作用：

RewriteCond %{HTTP_HOST} ^en.example.com/entrar [NC]

RewriteRule (.*) [http://es.example.com/entrar](http://es.example.com/entrar) [R=301,L]

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:44:32.333

尝试这个：

```
RewriteCond %{HTTP_HOST} ^en.example.com [NC]
RewriteRule ^entrar(.*) http://es.example.com/entrar$1 [R=301,L] 
```

您尝试的错误是您将整个 URI 与 匹配`HTTP_HOST`，但`HTTP_HOST`仅包含子/域，而不是它之后的部分 - 那是请求 URI。

# django - Django 表单 - 输入字段值未显示在 request.POST 中

> ID：10627082
> 
> 赞同：0
> 
> 时间：2012-05-16T21:38:49.440
> 
> 标签：django, django-forms, django-views

我`approvedamount`在 django 表单中有一个名为“”的字段，该字段正在浏览器中填充，但在 request.POST 值中没有出现。

如果您在 Post 时查看请求变量的 QueryDict，它会显示该值存在 (5000) - 例如：

```
QueryDict: QueryDict: {u'csrfmiddlewaretoken': [u'bec667f48284f2478fa91bd54c2ca706',      u'bec667f48284f2478fa91bd54c2ca706'], u'approve': [u'approved', u'approved'], u'submit_approval_update_15884': [u'Update'], u'declinecode': [u'Please Select', u'Please Select'], u'approvedamount': [u'5000', u'']} 
```

但是，如果您执行 a`request.POST['approvedamount']`或`request.POST.get('approvedamount')`返回 null 字符串

我还在 chrome 调试工具中验证了输入框的值已设置，但由于某种原因，它在回发到 Django 时没有通过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:04:51.107

您的表单似乎有问题，因为许多值在 QueryDict 中设置了两次。`u'approvedamount': [u'5000', u'']`显示您有两个 u'approvedamount 值，第二个为空。默认情况下，QueryDict`get()`为您提供后一个，它是空的。

您可能应该修复您的表单，但如果您想使用第一个提交的值，您可以使用`getlist`：

```
request.POST.getlist('approvedamount')[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T21:39:13.990

如果表单是从模板构建的，那么您`approvedamount`应该包含该`name`属性。它应该是这样的：

*   `<input class="form-field" name="approvedamount">`

# objective-c - 为自定义单元格设置 uitableviewcell 高度

> ID：10627084
> 
> 赞同：1
> 
> 时间：2012-05-16T21:38:54.920
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我希望根据您在 Interface Builder 中设置自定义单元格的值动态设置单元格高度。这没有奏效，所以我继续前进并在 Apples 文档中找到了可用于设置单元格高度的此方法 - **tableView:heightForRowAtIndexPath:**

但是我不确定我是否正确使用它，因为我的 tableviewcells 都没有调整它们的高度，它们都保持相同的标准尺寸。这是我在这里使用的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Set cell height
    [self tableView:tableView heightForRowAtIndexPath:indexPath];

    // Configure the cell using custom cell
    [[NSBundle mainBundle] loadNibNamed:@"CustomcellA" owner:self options:nil];
    cell = customcellA; // customcellA getters and setters are set up in .h

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44;
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:49:16.990

假设第三个单元格是高度的两倍：

```
- (CGFloat)   tableView:(UITableView *)tableView
heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.row == 2)
        return 88;
    return 44;
} 
```

这个方法会被tableView调用。

你不应该这样做：

```
[self tableView:tableView heightForRowAtIndexPath:indexPath]; 
```

如何确保正确单元格的 indexPath 被识别为其他大小取决于您自己。

**一般规则：**
如果你实现了委托协议的方法，你永远不会自己调用它。只有具有符合协议的委托的类的对象才会调用委托方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:46:08.723

heightForRowAtIndexPath 将被自动调用，您需要返回您需要的自定义高度。因此，除了返回 44 之外，您还需要根据您的数据或您的身高所依据的任何内容返回一个动态高度。

# objective-c - NSMutableDictionary 用于在运行时具有用户定义的附加属性数量的对象？

> ID：10627085
> 
> 赞同：0
> 
> 时间：2012-05-16T21:38:57.803
> 
> 标签：objective-c, design-patterns, properties, attributes, nsmutabledictionary

我正在设计一个名为**ContactInfoEntity**的对象，它有一个 NSString 属性*contactInfoEntityType*和一个容器对象*properties*，它根据它的*contactInfoEntityType*存储任意数量的属性。

目标是让用户能够在运行时定义新的**ContactInfoEntityType 。**

现在我在 ContactInfoEntityType 中使用 NSMutableDictionary，它的键：@"typeName" 的值：@"Generic"。

要定义新的 ContactInfoEntityType，我更改键的值：@"typeName" 并添加新键：@"newPropertyName1", @"newPropertyName2",... 以 NSDicts 作为值。嵌套字典的键类似于：@"defaultValue", @"index", @"formatToken", ...

发送时`[ContactInfoEntityFactory contactInfoEntityOfType:emailInfoEntityType];`，工厂获取带有@"emailInfoEntityType" 作为其@"typeName" 键值的NSMutableDictionary，并看到有三个附加的字典条目：@"domain"、@"localPart" 和@"emailNickname"。

然后，它创建一个 ContactInfoEntity，其*contactInfoEntityType*为@"emailInfoEntityType"，并且*属性*容器具有三个具有关联默认值的条目。

现在我的*属性*容器是一个 NSArray 和一个 NSMutableArray。NSArray 保存 newPropertyNames 而 NSMutableArray 保存值 - 两者都在同一个索引处。NSArray 确实复制了实体类型定义中的一些信息，但我觉得它使各个实体中的数据保持有意义，以防定义被清除。

这是解决这个问题的合理方法吗？这是迄今为止我尝试过的最抽象的对象，但我还没有完全理解所有常见的设计模式。

具体来说，是否有比 NSMutableDictionary 用于类型定义和 NSArray/MutableArray 用于*属性*对象更合适的类？

对我提出问题的方式的任何输入也表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:55:23.093

唯一让我觉得可能很烦人的是：

> “现在我的属性容器是一个 NSArray 和一个 NSMutableArray。NSArray 保存 newPropertyNames 而 NSMutableArray 保存值 - 两者都在同一个索引处。”

我长期以来不喜欢将并行数组作为关联数据元素的一种方式。我推荐一个对象数组，每个对象都包含一个名称/值对。它可以防止某些类型的下标错误，并在需要时为特定对的逻辑提供机会。

# jquery - jQuery可拖动 - 获取图像坐标

> ID：10627087
> 
> 赞同：0
> 
> 时间：2012-05-16T21:39:10.030
> 
> 标签：jquery, position, draggable, crop

我有一个包含图像的 div，可以在 div 内拖动该图像以获取图像裁剪的坐标。我能够获得正确的坐标，但是一旦我将图像拖动到某个位置，我就无法重新拖动到另一个位置，如果我不喜欢图像的细节......我哪里出错了......最终位置 x + y 将被保存到隐藏的输入中......这是我的代码：

```
 <!-- Div container 350x350px with border where detail of image can be chosen -->
<div id="draggable">
    <!-- Image (bigger than div draggable) that is draggable in the div -->
<img id="dragimg" src="<?php echo $path_to_image_directory.$filename; ?>" />
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $("#dragimg").draggable({
            stop: function(){
                var finalxPos = $(this).css('left');
                var finalyPos = $(this).css('top');
                //  alert( "Drag stopped!\n\nOffset: (" 
                + finalxPos + ", " + 
                finalyPos + ")\n");
                $('#crop [name="finalX"]').val(finalxPos);
                $('#crop [name="finalY"]').val(finalyPos);
            }
        });
    });
</script> 
```

你能帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:07:50.310

要在他的父母中获得绝对位置是 .position()

```
$('.object').bind('drag',function(){

 var obj = $(this);
 var position = obj.position();
 var leftpos = position.left;
 var toppos = position.top;
 }); 
```

你可以添加一个输入 val 函数，比如

```
<input type="text" name="top" id="topVal"/> 
```

并在绑定函数中

```
$('#topVal').val(toppos); 
```

# php - 在 Joomla 2.5 的两篇文章之间以表单形式传递变量

> ID：10627088
> 
> 赞同：0
> 
> 时间：2012-05-16T21:39:23.623
> 
> 标签：php, forms, joomla, joomla-extensions

我正在开发可以存储值并将它们传递给另一篇显示“结果”的文章的在线表单。我正在使用 Sourcerer 扩展来混合简单的计数 JS 脚本和 php 以将变量传递到文章中。但是，我对 Joomla 知之甚少，也不知道将变量发送到哪里。动作=？？？. 我发现 You Tube 上的教程建议为此目的使用文章别名，但它在 2.5 中不起作用。如果这是解决此问题的错误方法，请指导我。

```
<span id="remain"></span>
<form action="3.php" method="post" id="form1" name="form1">

<input type="radio" name="group2" value="Value1"> Value 1<br/>
<input type="radio" name="group2" value="Value2"> Value 2<br/>
<input type="radio" name="group2" value="Value3" checked> Value 3<br/>
<input type="submit" name="Go" value="submit">
</form>
<script type="text/javascript">
window.onload=counter;
function counter()
{
seconds = 5;
countDown();
}   

function countDown(){
document.getElementById("remain").innerHTML=seconds;
setTimeout("countDown()",1000);
    if(seconds == 0)
        {
            document.form1.submit();
        }else {
        seconds--;      
        }
}

</script> 
```

Youtube 教程链接： [http ://www.youtube.com/watch?v=XgJmUo3BtrQ&feature=related](http://www.youtube.com/watch?v=XgJmUo3BtrQ&feature=related)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:43:10.353

您可以在表单操作中声明类似的内容并获取特定文章的数据 -

> index.php?option=com_content&view=article&id=76 （你想要获取数据的arctice id）

我希望这对您有意义，如果您需要更多说明，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:59:50.920

我强烈建议不要这样做，只是因为它与 Joomla 的工作方式完全相反，所以建议使用像 Chronoforms 或类似的表单扩展，它旨在做你显然想要做的事情。完整列表位于[Joomla Form Extensions](http://extensions.joomla.org/extensions/contacts-and-feedback/forms)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:37:05.457

我还建议以不同的方式执行此操作，但是，如果您继续沿着这条路径前进，您的表单操作应该是一个 URL。如果这是另一篇文章的 URL，Joomla 提供了许多不同的 URL 结构方式。最简单的可能是您使用 Joomla 管理员创建一个“文章”类型的“菜单项”。无论您将此菜单项放在菜单结构中的哪个位置，都将确定其 URL。然后，将该 URL 用于您的表单操作。

但实际上，不要这样做。获取扩展甚至编写自己的扩展，编写 Joomla 组件并不是很困难。

# jquery - Jquery appendTo 在 ie8 兼容性视图上不起作用

> ID：10627089
> 
> 赞同：1
> 
> 时间：2012-05-16T21:39:24.543
> 
> 标签：jquery, append, ie8-compatibility-mode, appendto

我有一个选择，当更改附加一些带有其他元素的 div 时，但在 ie8 兼容性视图中不起作用，没有错误，没有警报，但不知道为什么我得到这个代码但在 ie8 上不起作用，兼容性视图。我能做些什么？？？

```
$('#frmAdd #emp_usa_presupuesto').change(function(){
var selectedVal = $(this).val();
        switch (selectedVal) {
        case '0':
            $('#frmAdd #origenPresupuesto').empty();
            $('#frmAdd #origenCC').empty();
            $('<label>Origen C.C.<span class="small">Origen Centro de Costo?</span></label>').appendTo('#frmAdd #origenCC');
            $('<select id="emp_origen_cc" name="emp_origen_cc"><option value="LOCAL">Local</option><option value="AS400">AS/400</option></select>').appendTo('#frmAdd #origenCC');
            $("#frmAdd #origenPresupuesto").append('<input type="hidden" value="" id="emp_origen_presupuesto" name="emp_origen_presupuesto"/>');
            break;
        case '1':
            $("#frmAdd #origenPresupuesto").empty();
            $("#frmAdd #origenCC").empty();
            $('<label>Origen<span class="small">Origen de Presupuesto?</span></label>').appendTo('#frmAdd #origenPresupuesto');
            $('<select id="emp_origen_presupuesto" name="emp_origen_presupuesto"><option value="LOCAL">Local</option><option value="AS400">AS/400</option></select>').appendTo('#frmAdd #origenPresupuesto');
            break;
        default:
            $("#frmAdd #origenPresupuesto").empty();
            $("#frmAdd #origenCC").empty();
            break;
        }
    }); 
```

# ember.js - ember.js 中的多个动作“on”事件

> ID：10627091
> 
> 赞同：3
> 
> 时间：2012-05-16T21:39:37.493
> 
> 标签：ember.js, handlebars.js

我试图让一个元素能够被两个触摸屏点击，并通过事件`touchStart`和`click`.

如何将这两个事件都连接到一个 Ember 视图？

我努力了：

`{{action "itsClicked" on="click touchMove"}}`

`{{action "itsClicked" on="click, touchMove"}}`

`{{action "itsClicked" on="click"}} {{action "itsClicked" on="touchMove"}}`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:03:41.357

目前不支持此功能。但是有一个未解决的问题，请参阅GitHub 问题跟踪器中的[#569](https://github.com/emberjs/ember.js/issues/569)。您应该添加评论。

来自 GitHub 问题的建议解决方案是使用自定义视图，如下所示：

```
Ember.View.extend({
    click: function(evt) {
        this.fire('itsClicked', evt);
    },
    touchMove: function() {
        this.fire('itsClicked', evt);
    },
    itsClicked: function(e) {
        ...
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T18:48:29.923

不支持多个操作 - 这会强制您通过创建组件（或视图）来分离代码。

但是，您可以通过创建自定义事件轻松解决应用程序的点击/触摸问题：

```
App = Ember.Application.create({
    customEvents: {touchend: "click"}
}); 
```

这意味着您的所有“点击”事件都会在触摸时触发

# crash - iPhone 3G 在 pushViewController 上崩溃

> ID：10627096
> 
> 赞同：1
> 
> 时间：2012-05-16T21:39:51.823
> 
> 标签：crash, pushviewcontroller, iphone-3g

我以通常的方式推动 ViewController：

```
SomeViewController *newViewController = [[SomeViewController alloc] init];
newViewController.username = self.username;
[self.navigationController newViewController animated:YES];
[newViewController release]; 
```

此代码在 iPhone 4/4S 上运行良好。但是当我在 iPhone 3G 上测试它时：当我回到 newViewController 应用程序崩溃时。仅在 iPhone 3G 上。但是如果我评论 [newViewController release]; 线路没有任何问题。

SomeViewController 没有 viewDidUnload 方法，而 dealloc 只包含一些属性的释放和 [super dealloc]；

它可以是什么？

# python - Python - shutil 似乎没有制作文件的真正二进制副本

> ID：10627099
> 
> 赞同：2
> 
> 时间：2012-05-16T21:40:24.573
> 
> 标签：python, copy, shutil

昨天根据海报的出色建议，我开始使用该`shutil.copyfileobj`方法制作文件副本。

我的程序应该制作文件的精确副本，删除最后一个字节并保存新副本。

昨晚我用一些非常小的 ASCII 文本文件对其进行了测试，因此我可以检查它是否也按照我的要求进行了测试，今天早上我在一些实际的“复杂”文件、PDF 和 JPG 上进行了尝试，它看起来像副本功能不是制作真正的副本。我在十六进制编辑器中查看了生成的文件，我可以看到在 ~ 偏移量 0x300 之后发生了一些奇怪的事情 - 要么正在添加数据，要么正在复制数据时正在更改数据。我不知道是哪个。

我的程序迭代地取出一个字节并保存一个新版本，我可以看到新创建的文件与原始文件始终不同，（最后一个字节除外）

```
def doNibbleAndSave(srcfile,fileStripped,strippedExt,newpath):
 counter = '%(interationCounter)03d' % {"interationCounter":interationCounter} #creates the filename counter lable
 destfile = newpath + "\\" + fileStripped + "_" + counter + strippedExt #creates the new filename 
 with open(srcfile, 'r') as fsrc:
  with open(destfile, 'w+') as fdest:
   shutil.copyfileobj(fsrc, fdest)
   fdest.seek(nibbleSize, os.SEEK_END) #sets the number of bytes to be removed
   fdest.truncate()
 srcfile = destfile #makes the iterator pick up the newly 'nibbled' file to work on next
 return (srcfile) 
```

我还可以看到新创建的对象比源文件小得多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T21:51:15.050

正如您已经注意到的，您应该以二进制模式打开文件；`open(srcfile, "rb")`和`open(destfile, "wb+")`。否则，Python 将假定文件是文本文件，并且可能会根据平台进行换行符转换（有关详细信息，请参阅[教程](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)）。

# objective-c - 使用 Erica Sadun 示例的 UIImageView 调整大小和旋转问题 - 预填充位置

> ID：10627100
> 
> 赞同：0
> 
> 时间：2012-05-16T21:40:40.673
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview, cgaffinetransform

我正在使用 Erica Sadun 的示例来调整和旋转 a `UIImageView`：[https ://github.com/erica/iphone-3.0-cookbook-/tree/master/C08-Gestures/14-Resize%20And%20Rotate](https://github.com/erica/iphone-3.0-cookbook-/tree/master/C08-Gestures/14-Resize%20And%20Rotate)

这是一个很好的例子，正是我想要的，但它在一个方面有所不足。我不知道如何预填充的转换属性，`UIImageView`以便我可以保存图像的状态并稍后将其加载回视图，具有相同的位置、比例和旋转。

目前，每次我添加`UIImageView`子类时，它都会从屏幕的左上角开始，但是对于我的生活，我无法弄清楚如何预填充该`transform`属性，所以它不会那样做。

创建图像后，我们执行以下操作：

```
originalSize = self.bounds.size;
originalTransform = CGAffineTransformIdentity;
touchBeginPoints = CFDictionaryCreateMutable(NULL, 0, NULL, NULL);// could this be the issue? 
```

该子类包含大量代码，因此我不确定是否应该将其全部重新发布。

有人以前用过这个，可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:43:55.477

CGAffineTransformIdentity 是一个空白变换，不会做任何事情。

您需要将其转换设置为您创建的转换。

# java - 部署和运行war文件

> ID：10627107
> 
> 赞同：3
> 
> 时间：2012-05-16T21:41:17.727
> 
> 标签：java, tomcat, jaxb, jersey, war

（请参阅下面的代码代码）我能够在 Eclipse 环境中的 Tomcat 上运行它，并且它可以正常工作。我已将以下内容导出到一个战争文件并创建了一个 Manifest.MF：

```
Manifest-Version: 1.0
Main-Class: com.process.Test 
```

当代码在 Eclipse 中运行时，来自服务器端的响应将输出到控制台。

现在终于我的问题（请原谅我的无知，我对此很陌生）：

**在我的 Tomcat 服务器上部署战争后，如何发送 REST 请求或运行战争并显示服务器响应？**

什么相当于实时服务器上的 :http://localhost:8080/rest/xml/list ？

Web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>com.process.Test</display-name>
  <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.process.Test</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

客户端代码：

```
import java.net.URI; 
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.UriBuilder;
import com.sun.jersey.api.client.Client;
//import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;

public class Test 
{       
public static void main(String[] args) {

    //Instead on using Apache Client 
    //used default Jersey client 
    //to send requests          
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);      
    String _package = "api.amebatv.com";
    WebResource service = client.resource(getBaseURI(_package));

    //runRequest(service,"indexpath");
    runRequest(service,"list");
}

/*
 * For testing purposes the base URI is :http://localhost:8080/package name
 * Will change to domain name for production code
 */
private static URI getBaseURI(String _package){
    return UriBuilder.fromUri(
            "http://localhost:8080/api.process.com").build();
}

private static void runRequest(WebResource service,String path){
    String response = service.path("rest/xml/"+path).accept(MediaType.APPLICATION_XML).get(String.class);
    System.out.println("Post Response :"+response);
}

} 
```

服务器端：

```
@Path("/xml")

public class Service {

// List of video objects
private ArrayList<Video> videolist; 
//Parser object, parses xml  into video objects
private Parser parser = new Parser();

/*
 * Constructor
 * Parse XML and create video list on call
 */
public Service(){
    parser.createXML();
    videolist = parser.getList();       
}

/************************************************
 *GET
 * Path: /indexpath
 * list of all only <video> items
 * @return : ArrayList of Video objects
 ***********************************************/
@GET
@Path("/list")
@Produces(MediaType.APPLICATION_XML)
public List<Video> getCustomerInXML() 
{ 
    return videolist;
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T22:00:46.203

Web 应用程序的 URL 取决于许多因素，应用程序服务器、配置文件、web.xml 和应用程序服务器特定配置。

但在*某些*情况下，这是“如果你不知道，首先要尝试”（不是官方的，但“它有效”的经验法则）

```
http://hostnameOrIP:8080/WARFILENAMEWITHOUTEXTENSION 
```

*   **hostnameOrIP**：好吧，只需替换为您的主机名或 IP
*   将**8080**替换为您的应用服务器的默认端口（9001、9090、3000 等...）
*   将**WARFILENAMEWITHOUTEXTENSION**替换为，好吧，再次，只是没有扩展名的战争文件名

如果您没有其他方法可以告诉，这又是一种非官方的、先尝试的方法……

# c# - 将数据加载到动态填充的局部视图中的选择下拉菜单

> ID：10627108
> 
> 赞同：1
> 
> 时间：2012-05-16T21:41:23.650
> 
> 标签：c#, javascript, jquery, ajax, json

我正在使用 Javascript 将部分视图动态加载到 DIV 中：

```
 $.ajax({
        url: '@Url.Action("Details","User")',
        data: { id: userId},
        type: 'post',
        success: function (data) {
        $("#user-details").show().html(data);}) 
```

显示时，我想填充一些下拉菜单供用户进行选择。假设我想填充“UserCategories”列表

因此，在上面的 ajax 调用成功时，我会这样做：

```
 $.getJSON('@Url.Action("GetUserCategories","User")',function(data) {
                $.each(data, function (key, item) {

                    $("#userCategories-list").append(
                        $("<option></option>").text(item.Name).val(item.Id)
                    );
                });
            }); 
```

未填充 UserCategories 列表。

我认为这是因为包含 UserCategories 下拉菜单的 UserDetails 源 html 是动态呈现的并且未显示在页面上？

如何访问和填充通过 ajax 调用显示的“userCategories-list”下拉菜单以及查看页面源/Firebug 时看不到哪个 HTML/控件名称？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:52:55.397

不能肯定地说，但我的猜测是，当你的列表创建函数被调用时，你的局部视图不是浏览器 DOM 的一部分。事实上，我没有看到任何将您的部分加载到浏览器中进行渲染的代码。

您是否尝试过使用 firebug 或[chrome 调试器进行调试](https://developers.google.com/chrome-developer-tools/docs/overview)？您可以在函数中设置断点并查看实际发生的情况。

```
 $.ajax({
        url: '@Url.Action("Details","User")',
        data: { id: userId},
        type: 'post',
        success: function (data) { 
            $("#partialContainer").html(data);
            $.getJSON('@Url.Action("GetUserCategories","User")',function(listData) {
                $.each(listData, function (key, item) {
                    $("#userCategories-list").append(
                        $("<option></option>").text(item.Name).val(item.Id)
                    );
                }); //each
            )); //getJson
        } //success anon function
  }); //$.ajax 
```

# php - 在来回发送数据之间使用 PHP/ASP 页面作为中间人

> ID：10627111
> 
> 赞同：0
> 
> 时间：2012-05-16T21:41:31.360
> 
> 标签：php, asp.net, cross-platform

我希望编写一个系统，该系统可以轻松实现和未来的开发，并且可以在多个平台上运行。网站系统充当中间人。这个想法是，它是一个可以通过简单地发送令牌/查询字符串并接收数据返回的平台，给定适当的身份验证等等。解决这个问题的旧方法是 Java/C++ 套接字编程，因为它可以在许多平台上交叉编译。我想远离编写一个完整的套接字驱动的客户端/服务器系统。

这个想法是您向 PHP 或 ASP 页面传递一些 GET 字符串（或 POST，如果可能的话），它会返回一个 XML 文件，其中包含您所请求的数据。所以例如

```
 myPage.php?_auth=7ddf32e17a6ac5ce04a8ecbf782ca509&_REQUEST=BelgianWaffle 
```

手头的问题是，我不知道这是否可以使用 PHP/ASP.NET 或者如果可以，从哪里开始寻找（用谷歌尝试了一些术语，没有想出任何东西）。

我知道 twitter 和 facebook 有类似的系统，因此远程网站可以远程发布内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:49:33.873

这当然是可能的。实际上，您所描述的基本上是一种 Web 服务。你可以从这里开始：[ASP.NET Web 服务教程](http://progtutorials.tripod.com/WebServices.htm)

视频中的另一个教程：[[How Do I:] Create and Call a Simple Web Service in ASP.Net](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-web-service-in-aspnet)

# xamarin.ios - 将 MonoTouch.Dialog 添加到 MonoTouch 项目（不是 windows）

> ID：10627114
> 
> 赞同：1
> 
> 时间：2012-05-16T21:41:53.607
> 
> 标签：xamarin.ios, monotouch.dialog

今天有了 MonoDevelop 的补丁，我所有的项目都被破坏了，我不得不重建它们。

如何将 MonoTouch.Dialog 添加到项目中？我很确定我会右键单击 References，单击 Edit References，然后单击 Packages 并找到标有 MonoTouch.Dialog 之类的东西，但我再也找不到它了。

它的标签是什么（现在）？还是我必须从 Github 下载 MonoTouch.Dialog？

最后那是个笑话，因为 MonoTouch.Dialog-1.dll 还在 2.1 文件夹中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T22:00:27.317

MonoTouch.Dialog 应该在 Edit References 对话框的 All 选项卡中：

![在此处输入图像描述](../Images/ac8e9ec5e10bc8075885b94aa21c272e.png)

# android - Android WiFi Direct 设备详细信息

> ID：10627115
> 
> 赞同：4
> 
> 时间：2012-05-16T21:42:03.130
> 
> 标签：android, wifi-direct

我想知道如何更改 Android 设备的 WiFi Direct 接口的设备详细信息（例如接口名称）。我正在开发一个应用程序，它使用蓝牙或 WiFi Direct 技术进行无线通信，它只连接到以特定前缀命名的设备，以区分那些运行我的应用程序的设备，以及那些只有接口的设备（我知道这是一个天真的解决方案...... :)）。蓝牙允许通过使用类提供的方法来操作接口的名称`setName(String name)`，`getName()`但`BluetoothAdapter`我相信不存在WiFi Direct的相应方法。如果不可能，我如何区分那些运行我的应用程序的 WiFi Direct 设备，以及那些只打开接口的设备？任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-27T12:18:22.670

Wi-Fi direct Name 为设备名称，您可以通过以下方式更改：

```
public void changeWiFiDirectName(final String newName){
Method m = null;
try {
    m = mManager.getClass().getMethod("setDeviceName", new Class[]{mChannel.getClass(), String.class, WifiP2pManager.ActionListener.class});
} catch (NoSuchMethodException e) {
    e.printStackTrace();
}
try {
    if (m != null) {
        m.invoke(mManager, mChannel,newName, new WifiP2pManager.ActionListener() {

            @Override
            public void onSuccess() {
                Log.d(TAG, "Name changed to "+newName);
            }
            @Override
            public void onFailure(int reason) {
                Log.d(TAG, "The name was not changed");
            }
        });
    }
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (InvocationTargetException e) {
    e.printStackTrace();
} 
```

# c# - String.Format() 的意外行为

> ID：10627118
> 
> 赞同：3
> 
> 时间：2012-05-16T21:42:25.090
> 
> 标签：c#, string

鉴于以下代码，我希望得到一个空结果或异常：

```
String.Format(null, "Hello") 
```

相反，结果是字符串“Hello”。为什么是这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T21:45:51.203

它之所以有效，是因为它选择了这个重载：

```
public static String Format( IFormatProvider provider, String format, params Object[] args) { ... } 
```

提供`null`者是可以的，可变参数没有参数也是可以的，所以它只是打印出字符串。

直觉上，我们可能已经预料到这种重载：

```
public static String Format(String format, Object arg0) { ... } 
```

当然，如果它*确实*选择了那个，我们会得到一个`ArgumentNullException`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T21:51:56.597

它选择重载

```
public static string Format(IFormatProvider provider, string format, params object[] args) 
```

因为您的第二个参数的类型为`string`（不需要转换）。因此，这个重载比带有两个参数的重载更接近（它需要从`string`to转换`object`）：

```
public static string Format(string format, object arg0) 
```

您可以通过调用来查看差异：

```
String.Format(null, 5); 
```

在这种情况下，选择转换为 object 并且您有一个例外（实际上`int`and之间没有隐式转换`string`）。

您可以在 msdn上阅读有关选择[最佳功能成员的更多信息。](http://msdn.microsoft.com/en-us/library/aa691338%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T21:47:32.420

它可能会将请求解释为对 String.Format(IFormatProvider provider, string format, params object[] args) 覆盖的调用，并将 null 作为提供者和参数，但将“Hello”作为格式，从而返回“Hello” .

如果你想要一个空的结果使用`String.Empty`

# jruby - Windows 7 上的 JRuby 错误

> ID：10627120
> 
> 赞同：3
> 
> 时间：2012-05-16T21:42:27.220
> 
> 标签：jruby

我在我的机器（Windows 7）上安装了 JRuby。之后，当我检查 JRuby 的版本以确认 JRuby 是否安装正确时，我收到以下错误消息

> c:\jruby-1.6.7.2\bin>jruby -v
> 
> 找不到由 JAVA_HOME 指定的 Java 安装：C:\Program Files\Java\jdk1.6.0;C:\Program Files\Java\jdk1.5.0_15

为什么我会收到此消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:19:40.113

也许这是由于[http://jira.codehaus.org/browse/JRUBY-6696](http://jira.codehaus.org/browse/JRUBY-6696)（无法使用 64 位 jdk）

# python - 对于 Python 开源跨平台 Postgres 兼容驱动程序，我有哪些选择？

> ID：10627124
> 
> 赞同：0
> 
> 时间：2012-05-16T21:42:38.003
> 
> 标签：python, postgresql

我不是真正的 Python 专家，也不是 Postgres 专家，但这里有：

我需要一个好的 Python 开源 Postgres 驱动程序。它必须能够在 Windows、Mac 和 Linux 之间轻松跨平台工作。最终目标是将其部署到 64 位 CentOS Linux 服务器。

我需要它是开源的，因为我需要稍微修改它以适应我们的类似 Postgres 的数据库。我已经在纯 C 的世界中取得了巨大的成功，我想避免从头开始滚动我自己的驱动程序。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:02:44.580

我用过这些：

*   [pg8000](http://pypi.python.org/pypi/pg8000) - 用纯 python 编写，因此不需要在目标平台上编译。如果便携性是一个问题，那就太好了。

*   [psycopg2](http://pypi.python.org/pypi/psycopg2) - 用 c 编写，因此比 pg8000 快一点，但需要针对目标平台进行编译。

# matlab - 计算目标值 LIBSVM Matlab

> ID：10627125
> 
> 赞同：0
> 
> 时间：2012-05-16T21:42:43.887
> 
> 标签：matlab, libsvm

我在 for 循环中训练一个 SVM，改变了我的实例的特性，我想绘制最终目标值与迭代的关系。我在 Matlab 中使用 LIBSVM，但在返回的模型中没有明确找到最终目标值。如何在每次交互中使用返回的模型计算最终目标值？

可以阅读 svmtrain 打印的脚本，但我想在没有这个技巧的情况下计算这个值。

PD 我有 C++ 的基本知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:28:17.793

我修改了 svm.cpp 和 svm.h 以添加几行代码来返回目标值。

1) 在 svmmodel (svm.h) 和 decision_function (svm.cpp) 结构中添加新字段。

2）将si.obj复制到decision_function的新字段中。

3) 将decision_function 的字段catch 复制到svmmodel 结构的较新字段中（svm.cpp 中的svm_train 函数）。

4) 修改 svm_model_matlab.c 以接纳 svmmodel 结构中的新字段。

*   增加 NUMBER_OF_FIELD 变量并在输出结构中添加一个新字段。
*   根据输出结构中的顺序修改函数model_to_matlab_struct。（很容易复制用于字段 rho 的代码并将 rho 替换为您的变量名称）
*   修改 matrix_matlab_to_model 函数

这真的很容易和直截了当。

我只能通过新文件给我发一封电子邮件，目的是：LIBSVM-ObjModification

# qt - 将文本文件加载到 Qt 中的表格小部件中

> ID：10627127
> 
> 赞同：1
> 
> 时间：2012-05-16T21:42:46.993
> 
> 标签：qt, parsing, user-interface, text, stream

如果我将一个文本文件加载到 QTextStream 中，我将如何用它的数据填充一个 TableWidget？文本文件是制表符分隔的。这是我到目前为止所拥有的：

```
void MainWindow::startParsing()
{
            QStringList stringList;

            int countRows;

             QTextStream in(&textFile);
             QString line;
             if (textFile.open(QIODevice::ReadOnly))
             {
             do
             {
                 line = in.readLine();
                 stringList << line.split("\t", QString::SkipEmptyParts);
             }
             while (!in.atEnd());
             }

             QSet<QString> set = stringList.toSet();
             foreach (const QString &value, set)
                 qDebug() << value;

            countRows = stringList.count();

            //--- define the table's shape ---
            ui->tableWidget_inputPreview->setRowCount(countRows);
            ui->tableWidget_inputPreview->setColumnCount(6);

            //--- create the horizontal (column) headers ---
            QStringList horzHeaders;
            horzHeaders << "HostName" << "Host IP" << "Area" << "Host Interface"
                        << "Router to Ext Network" << "Ext Routes";
            ui->tableWidget_inputPreview->setHorizontalHeaderLabels( horzHeaders );

            //--- create the vertical (row) headers ---
            QStringList vertHeaders;
            ui->tableWidget_inputPreview->setVerticalHeaderLabels( vertHeaders );

            //--- populate the table widget with data from txt file ---

            // TODO: insert data into table
} 
```

这是我正在使用的文本文件的示例：

```
#TEST 1                 
#HostName   HostIP  Area    Host Interface  Router to Ext NW    Number of Ext Routes
test1   9.1.1.1 0.0.0.0         
OMG_LOL_101 128.12.101.2    0.0.0.0         
OMG_LOL_102 128.12.102.9    0.0.0.0 128.112.102.9   128.112.102.10  100
WTF_BBQ_149 128.20.180.2    0.0.0.0                 

#HITL 2                 
#HostName   HostIP  Area    Host Interface  Router to Ext NW    Number of Ext Routes
test2   9.1.1.2 0.0.0.0         
WTF_BBQ_111 128.15.110.2    0.0.0.0         
WTF_BBQ_112 128.15.111.2    0.0.0.0         
WTF_BBQ_113 128.15.112.2    0.0.0.0 128.115.112.9   128.115.112.10  100 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:24:12.417

```
QTextStream in(&file);
QList< QStringList > lists;
QString line;
do {
    line = in.readLine();
    lists << line.split("\t");
} while (!line.isNull())

// Set the table size (assuming the rows are all the same length).
tableWidget.setRowCount( lists.size() );
tableWidget.setColumnCount( lists[0].size() );

for ( int row = 0; row < lists.size(); ++row ) {
    for ( int column = 0; column < lists[row].size(); ++column ) {
        tableWidget.setItem(row, column, new QTableWidgetItem(lists[row][column]));
    }
} 
```

# c# - 移动没有状态栏的窗口窗体，边框样式

> ID：10627128
> 
> 赞同：-1
> 
> 时间：2012-05-16T21:42:48.140
> 
> 标签：c#

我有以下行从我的窗口窗体中删除所有边框。是否可以将表单拖动到屏幕的不同部分。例如，通过添加某种隐藏栏，我可以从中拖动？

这是我用来隐藏边框的代码

```
 this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None; 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:47:41.953

[http://www.codeproject.com/Articles/11114/Move-window-form-without-Titlebar-in-C](http://www.codeproject.com/Articles/11114/Move-window-form-without-Titlebar-in-C)

# php - 重定向到编辑页面以响应编辑

> ID：10627129
> 
> 赞同：0
> 
> 时间：2012-05-16T21:42:48.693
> 
> 标签：php

我正在寻找一个 PHP 脚本，它可以在用户保存编辑后重定向用户查看他自己的页面/记录。例如，客户登录时发现他的记录点击编辑他的记录，一旦他保存他的记录，页面将重定向以查看他的更改。我正在使用 PHPRunner。根据说明，我将在 After Edit Events: Redirect 选项卡中添加一个脚本并添加一个脚本。我遇到的唯一问题是我不知道获取记录密钥所需的脚本。以下是我在上一篇文章中看到的示例。有点不同，它更像是一个按钮。但是基于这个脚本，我想我可以让它工作。任何人都可以帮忙吗？表：团队键：TID

根据我所见，我有一个想法。

```
//**********  Redirect to another page  ************
header("Location: Teams_view.php?editid1=key1=".$keys["TID"]);

exit(); 
```

但这不会将客户端发送到它自己的页面。然后我看到了这个，但它也没有获取记录 id(Key)。

```
header("Location: Teams.php?key1=".$keys["TID"]);

exit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:46:30.090

只要没有发送任何内容（回声等），这将始终有效。

```
$qid = "10627129";
$url = "http://www.stackoverflow.com/questions/$qid";   // Fully-qualified URL

// Uncomment this when debugging.
//echo "About to redirect to: $url";  exit();

header("Location: $url");
exit(); 
```

# mule - 如何在 Mule 中为 SFTP 指定“捆绑”身份文件？

> ID：10627131
> 
> 赞同：3
> 
> 时间：2012-05-16T21:42:52.910
> 
> 标签：mule

我知道我可以使用像这样的绝对系统路径`... identityFile="/path/to/key-file" ...`，但这并不好。我将把 Mule 应用程序部署到具有各种甚至未知路径的不同位置。因此，id 文件需要成为 Mule 应用程序的一部分。

我已经将 id 文件导入到 src/main/app 中，但我不知道如何使用相对路径来引用它。我可以做类似的事情`${MULE_APP_ROOT}/key-file`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:04:14.957

我发现我可以用它`${app.home}`来引用我的项目的根目录。因此，如果密钥文件位于我的应用程序的根目录中，我可以使用：

```
... identityFile="${app.home}/key-file" ... 
```

# javascript - jQuery 未定义，找不到原因

> ID：10627132
> 
> 赞同：0
> 
> 时间：2012-05-16T21:43:01.047
> 
> 标签：javascript, jquery

我的 jQuery 代码不起作用，并且在 Firebug 控制台中显示：“jQuery 未定义”。我检查了 jQuery 正在加载，但我仍然不明白为什么它显示错误。

我的 jQuery 代码如下所示：

```
( function($) {
$(document).ready(function() {
$("form#add #divOptionsBlock .item img").css("visibility","hidden");

$('#divOptionsBlock .txtBoxStyle:first').change(function() {

    var fpath = $("#divOptionsBlock .item img").attr("src") ;

    var finalimage = 'http://shop.daactive.com/thumbnail.asp?file='+fpath+'&maxx=300&maxy=0';

    var fpath2 = $("form#add img#large").attr("src",finalimage);

    var imagepath_ahref="http://shop.daactive.com/"+fpath;
    var fpath3 = $("form#add a#listing_main_image_link").attr("href",imagepath_ahref);

    var fpath4 = $("form#add a#listing_main_image_link .MagicBoxShadow img").attr("src",imagepath_ahref);

    var textvalue = $('#divOptionsBlock .txtBoxStyle:first option:selected').text()
    $("#imagecaptiont").html(textvalue);

});
 });    
 } ) ( jQuery ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:46:00.720

你没有包括 jQuery！将此添加到您的`<head>`或结束之前`<body>`：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:51:28.923

看起来您正在从[http://shop.daactive.com/prototype.js](http://shop.daactive.com/prototype.js)而不是 jQuery 加载prototype.js（v 1.6.0.3）。

要继续使用原型，您需要为原型库而不是 jQuery 重构 javascript：http: [//api.prototypejs.org/](http://api.prototypejs.org/)

如果您也选择包含 jQuery，则需要在“安全”模式下使用 jQuery：http: [//docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

但这意味着要加载 2 个 javascript 库，这可能是一大块要加载的 javascript，同时考虑到页面加载时间。

# java - 在字符串中搜索数据 - Java

> ID：10627133
> 
> 赞同：0
> 
> 时间：2012-05-16T21:43:08.230
> 
> 标签：java, string

我有一个类似的字符串：“name:lala,id:1234,phone:123” 但例如我只想获取 id（数字） - 1234

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:49:03.640

您可以避免使用正则表达式并使用 String#split 方法，如下所示：

```
String str = "name:lala,id:1234,phone:123";
String id = str.split(",")[1].split(":")[1]; // sets "1234" to variable id 
```

或者使用一些带有 String#replaceAll 的正则表达式：

```
String id = str.replaceAll("^.*?,id:(\\d+),.*$", "$1"); // sets "1234" to variable id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:47:53.987

您可以为此使用带有捕获组的正则表达式：

```
Pattern p = Pattern.compile("id:(\\d+)");
Matcher m = p.matcher("name:lala,id:1234,phone:123");
if (m.find()) {
    System.out.println(m.group(1).toString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:56:24.093

比其他解决方案更通用一点：

```
 String foo = "name:lala,id:1234,phone:123";
    // get all all key/value pairs into an array
    String[] array = foo.split(",");
    // check every key/value pair if it starts with "id"
    // this will get the id even if it is at another position in the string "foo"
    for (String i: array) {
        if (i.startsWith("id:")) {
            System.out.println(i.substring(3));
        }
    } 
```

# android - 我怎么知道 EditText 何时失去焦点？

> ID：10627137
> 
> 赞同：176
> 
> 时间：2012-05-16T21:43:26.867
> 
> 标签：android, android-edittext, lostfocus

我需要抓住`EditText`注意力不集中的时候，我搜索了其他问题，但没有找到答案。

我`OnFocusChangeListener`是这样用的

```
OnFocusChangeListener foco = new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        // TODO Auto-generated method stub

    }
}; 
```

但是，它对我不起作用。

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2012-05-16T21:49:18.977

`onFocusChange`hasFocus的实现`setOnFocusChangeListener`并且有一个布尔参数。如果这是错误的，您就失去了对另一个控件的关注。

```
 EditText txtEdit = (EditText) findViewById(R.id.edittxt);

 txtEdit.setOnFocusChangeListener(new OnFocusChangeListener() {          
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus) {
               // code to execute when EditText loses focus
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-15T09:36:38.727

如果您想对该接口进行分解使用，请使用您的实现，例如`Activity`：`OnFocusChangeListener()`

```
public class Shops extends AppCompatActivity implements View.OnFocusChangeListener{ 
```

在你的`OnCreate`你可以添加一个监听器，例如：

```
editTextResearch.setOnFocusChangeListener(this);
editTextMyWords.setOnFocusChangeListener(this);
editTextPhone.setOnFocusChangeListener(this); 
```

然后android studio会提示你从界面添加方法，接受它......它会像：

```
@Override
public void onFocusChange(View v, boolean hasFocus) {
  // todo your code here...
} 
```

因为你有一个分解的代码，你只需要这样做：

```
@Override
public void onFocusChange(View v, boolean hasFocus) {
  if (!hasFocus){
    doSomethingWith(editTextResearch.getText(),
      editTextMyWords.getText(),
      editTextPhone.getText());
  }
} 
```

这应该够了吧！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-05T09:51:55.413

科特林方式

```
editText.setOnFocusChangeListener { _, hasFocus ->
    if (!hasFocus) {  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-30T12:40:10.327

**其工作正常**

```
EditText et_mobile= (EditText) findViewById(R.id.edittxt);

et_mobile.setOnFocusChangeListener(new OnFocusChangeListener() {          
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus) {
            // code to execute when EditText loses focus
            if (et_mobile.getText().toString().trim().length() == 0) {
                CommonMethod.showAlert("Please enter name", FeedbackSubmtActivity.this);
            }
        }
    }
});

public static void showAlert(String message, Activity context) {

    final AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setMessage(message).setCancelable(false)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {

                }
            });
    try {
        builder.show();
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-29T12:46:16.613

**使用 Java 8 lambda 表达式：**

```
editText.setOnFocusChangeListener((v, hasFocus) -> {
    if(!hasFocus) {
        String value = String.valueOf( editText.getText() );
    }        
}); 
```

# android - Android layout_margin 与 RelativeLayout 属性冲突

> ID：10627139
> 
> 赞同：0
> 
> 时间：2012-05-16T21:43:37.817
> 
> 标签：android, android-layout, android-relativelayout

首先，一张图片（来自hierarchyviewer）：

![好按钮和坏按钮](../Images/276bdb8c28f30b3b9e240d0bab83127f.png)

我有两个文本长度不同的按钮，我希望它们的大小相同。在图像中，您可以看到它在顶部工作。但是，我希望我的按钮之间有一些空间，所以对于第三个和第四个按钮，我添加了 layout_margin 属性以给它们一点空间。混乱随之而来。第四个按钮保持相同大小并添加适当的边距。但是第三个按钮似乎没有在右侧添加边距，因此失去了宽度。

我认为正在发生的事情是在对齐之后应用边距，所以......实际上，我无法想出一个完全解释它的过程。

我想要的是：

*   要了解这些东西是如何工作的 - 视图的布局对我来说似乎不直观，我无法想象达到我不会随机更改属性来修复这类事情的地步。是否有一个全面的教程可以解决细节问题？

*   两个等长按钮，在相对布局中具有不同长度的文本，并带有边距。我需要相对布局来安排活动上的所有其他视图。

代码如下。

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    >
    <Button
        android:id="@+id/goodThis"
        android:text="Short text"
        android:background="@drawable/button_red" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/goodThat"
    />
    <Button
        android:id="@+id/goodThat"
        android:text="Longer text"
        android:background="@drawable/button_green" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_alignParentLeft="true"
        android:layout_below="@+id/goodThis"
    />

    <Button
        android:id="@+id/badThis"
        android:text="Short text"
        android:background="@drawable/button_red" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_below="@+id/goodThat"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/badThat"
        android:layout_margin="3dp"
    />
    <Button
        android:id="@+id/badThat"
        android:text="Longer text"
        android:background="@drawable/button_green" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_alignParentLeft="true"
        android:layout_below="@+id/badThis"
        android:layout_margin="3dp"
    />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:03:00.930

为了让我的回答比我上面的评论更多地作为答案，我通过我的 RelativeLayout 经验学到了以下内容：

1) 消除前向 ID 引用。这可能会使弄清楚如何去做变得更加困难，但您可以看到，像这样解析引用将需要在运行时至少两次通过布局规范，并且可能会使事情复杂化。

2）我一般使用特定的margin/padding属性比如layout_marginTop等来获得更好的效果。您对毯子“layout_margin”的使用将第三个和第四个按钮稍微向右偏移，这可能不是您想要的外观。尝试仅使用 marginTop 将按钮隔开。

# java - 将元素添加到数组时，对象数组未初始化新对象

> ID：10627140
> 
> 赞同：0
> 
> 时间：2012-05-16T21:43:41.233
> 
> 标签：java, arrays, object

数组在正确的位置初始化，其他一切看起来都很好。我只是无法弄清楚为什么当我打印完成的数组时它会使所有元素都相同。

当我调试它时，它将新元素存储在数组上的一个新位置，但它不会创建该对象的新实例。

数组初始化：

```
public class CalcFrame implements ActionListener
{
   private static Calculation[] calc_array = new Calculation[10]; 
```

在行动...

```
if(ae.getSource() == calc_answer_position)
{ 
      calc_array[count] = new Calculation();
      calc_array[count].setIntVel(Double.parseDouble(init_vel_tf.getText())); 
      calc_array[count].setIntPos(Double.parseDouble(init_pos_tf.getText()));
      calc_array[count].setAccel(Double.parseDouble(acc_tf.getText()));
      calc_array[count].setTime(Double.parseDouble(time_tf.getText()));

      double ans = getArray(count).calcPosition(getArray(count).getIntVel(),
                   getArray(count).getIntPos(), getArray(count).getAccel(),
                    getArray(count).getTime());
      count++;

      int n = JOptionPane.showOptionDialog(null, "Position x(t) = " + ans,
              "Answer: Calculate Position", JOptionPane.YES_NO_OPTION,
                 JOptionPane.QUESTION_MESSAGE, null, options, options[0]);

      if (n == JOptionPane.YES_OPTION)
      {
          frame.dispose();
      }
          if (n == JOptionPane.NO_OPTION)
      {
          System.exit(0);
      } 
} 
```

计算类....编辑

```
public class Calculation 
{
   //These are the attributes for the Variables object.
   private static double initial_accel = 0.0,
                                 initial_velocity = 0.0,
                                 initial_position = 0.0,
                                 acceleration = 0.0,
                                 velocity = 0.0,
                                 position = 0.0,
                                 time = 0.0,
                                 height = 0.0,
                                 mass = 0.0,
                                 weight = 0.0,
                                 answer = 0.0;

    public Calculation() {}

    public Calculation(double initial_velocity, double initial_position, double acceleration, double time)
    {
        setIntVel(initial_velocity);
        setIntPos(initial_position);
        setAccel(acceleration);
        setTime(time);
    }

    public Calculation(double initial_velocity, double initial_position, double acceleration, double time, double position)
    {
        setIntVel(initial_velocity);
        setIntPos(initial_position);
        setAccel(acceleration);
        setPos(position);
        setTime(0);
    }

    public static double calcPosition(double in_vel, double in_pos, double acc, double time)
    {
       //x(t) = xi + vi(t) + .5(a)t^2

        double answer = .5 * time * time * acc;
        answer = (in_pos + (in_vel * time) + answer);
       return answer;
    }

    public static double calcTime(double in_vel, double in_pos, double acc, double pos)                 
    {
       //t = (-vi + sqrt(vi^2 - 2(a)xi)) / a

        double answer = (in_vel * in_vel) - (2 * acc * (in_pos - pos));
      answer = ((-1 * in_vel) + Math.sqrt(answer)) / (acc);
       return answer;
    }

    //===MUTATORS===//

    public void setIntAccel(double initial_accel) 
    {
       this.initial_accel = initial_accel;
    }

    public void setIntVel(double initial_velocity) 
    {
       this.initial_velocity = initial_velocity;
    }

    public void setIntPos(double initial_position) 
    {
       this.initial_position = initial_position;
    }

    public void setAccel(double acceleration) 
    {
       this.acceleration = acceleration;
    }

    public void setVel(double velocity) 
    {
       this.velocity = velocity;
    }

    public void setPos(double position) 
    {
       this.position = position;
    }

    public void setTime(double time) 
    {
       this.time = time;
    }

    public void setHeight(double height) 
    {
       this.height = height;
    }

    public void setMass(double mass) 
    {
       this.mass = mass;
    }

    public void setWeight(double weight) 
    {
       this.weight = weight;
    }

    public void setAnswer(double answer) 
    {
       this.answer = answer;
    }

    //===ACCESSORS===//

    public double getIntAccel()
    {
       return initial_accel;
    }

    public double getIntVel() 
    {
       return initial_velocity;
    }

    public double getIntPos() 
    {
       return initial_position;
    }

    public double getAccel()
    {
       return acceleration;
    }

    public double getVel()
    {
       return velocity;
    }

    public double getPos()
    {
       return position;
    }

    public double getTime()
    {
       return time;
    }

    public double getHeight()
    {
       return height;
    }

    public double getMass()
    {
       return mass;
    }

    public double getWeight() 
    {
       return weight;
    }

    public double getAnswer() 
    {
       return answer;
    }

    public String toString()
    {

        String result = "Initial Position: " + getIntPos();
        result += "\nAcceleration: " + getAccel();
        result += "\nInitial Velocity: " + getIntVel();
        result += "\nPosition: " + getPos();
        result += "\nTime: " + getTime();
        return result;
    }

} 
```

CalcFrame 类...编辑

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.JFrame;

public class CalcFrame implements ActionListener
{
   private static Calculation[] calc_array = new Calculation[10];  

    private JLabel init_vel_label,
                   init_pos_label,
                        acc_label,
                        time_label,
                        pos_label;

    private JButton calc_answer_time,
                    calc_answer_position;

    private static JFrame frame;

    private JTextField init_vel_tf,
                       init_pos_tf,
                             acc_tf,
                             time_tf,
                             pos_tf;

    private static int count = 0;

   //-----------------------------------------------------------------
   //  Constructor: Sets up the main GUI components.
   //-----------------------------------------------------------------
   public CalcFrame(int operation)
   {
      if(operation == 2)
           CalcTime();
        if(operation == 1)
           CalcPosition();
   }

    public void CalcTime()
   {
      frame = new JFrame ("Quadratic Calculator");
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());

        Toolkit tk = Toolkit.getDefaultToolkit();
       Dimension d = tk.getScreenSize();

        init_vel_label = new JLabel ("Initial Velocity");
        init_pos_label = new JLabel ("Initial Position");
        acc_label = new JLabel ("Acceleration");
        pos_label = new JLabel ("Position at time (t)");

        //textfields
      init_vel_tf = new JTextField (10);
        init_pos_tf = new JTextField (10);
        acc_tf = new JTextField (10);
        pos_tf = new JTextField (10);

        //button
        calc_answer_time = new JButton("Calculate");
      calc_answer_time.addActionListener(this);

      frame.add (init_vel_label);
        frame.add (init_vel_tf);
        frame.add (init_pos_label);
        frame.add (init_pos_tf);
        frame.add (acc_label);
        frame.add (acc_tf);
        frame.add (pos_label);
        frame.add (pos_tf);
        frame.add (calc_answer_time);

        frame.setSize(new Dimension(200, 275));
      frame.pack();
        frame.setResizable(false);
        frame.setLocation((d.width/2)-380, (d.height/2)-200);
      frame.setVisible(true);
      frame.setBackground (new Color(0,0,156));
        frame.getContentPane();
   }

    public void CalcPosition()
   {
      frame = new JFrame ("Quadratic Calculator");
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());

        Toolkit tk = Toolkit.getDefaultToolkit();
       Dimension d = tk.getScreenSize();

        init_vel_label = new JLabel ("Initial Velocity");
        init_pos_label = new JLabel ("Initial Position");
        acc_label = new JLabel ("Acceleration");
        time_label = new JLabel ("Time (or change in time)");

        //textfields
      init_vel_tf = new JTextField (10);
        init_pos_tf = new JTextField (10);
        acc_tf = new JTextField (10);
        time_tf = new JTextField (10);

        //button
        calc_answer_position = new JButton("Calculate");
      calc_answer_position.addActionListener(this);

      frame.add (init_vel_label);
        frame.add (init_vel_tf);
        frame.add (init_pos_label);
        frame.add (init_pos_tf);
        frame.add (acc_label);
        frame.add (acc_tf);
        frame.add (time_label);
        frame.add (time_tf);
        frame.add (calc_answer_position);

        frame.setSize(new Dimension(200, 275));
      frame.pack();
        frame.setResizable(false);
        frame.setLocation((d.width/2)-380, (d.height/2)-200);
      frame.setVisible(true);
      frame.setBackground (new Color(0,0,156));
        frame.getContentPane();
   }

    public static void sort()
    {
         int i = 0;
         int j = 0;
         Calculation k;
         for(i = getSize() - 1; i >= 0; i--)
         {
             for(j = 0; j <= i - 1; j++)
              {
                  if(getArray(j).getIntVel() > getArray(j + 1).getIntVel())
                    {
                        k = getArray(j);
                         setArray(j, getArray(j + 1));
                         setArray(j + 1, k);
                    }
              }
         }
    }

    public static Calculation getArray(int i)
    {
       return calc_array[i];
    }

    public static Calculation[] getEntireArray()
    {
       return calc_array;
    }

    public static void setArray(int i, Calculation c)
    {
       calc_array[i] = c;
    }

    public static int getSize()
    {
       return count;
    }

    public void actionPerformed(ActionEvent ae)
    { 
          Object[] options = {"Main Menu",
                                "Exit"};

      if(ae.getSource() == calc_answer_position)
      { 
         calc_array[count] = new Calculation();
          calc_array[count].setIntVel(Double.parseDouble(init_vel_tf.getText())); 
          calc_array[count].setIntPos(Double.parseDouble(init_pos_tf.getText()));
          calc_array[count].setAccel(Double.parseDouble(acc_tf.getText()));
          calc_array[count].setTime(Double.parseDouble(time_tf.getText()));

          double ans = getArray(count).calcPosition(getArray(count).getIntVel(),
                       getArray(count).getIntPos(), getArray(count).getAccel(),
                        getArray(count).getTime());
          count++;

          int n = JOptionPane.showOptionDialog(null, "Position x(t) = " + ans,
                  "Answer: Calculate Position", JOptionPane.YES_NO_OPTION,
                     JOptionPane.QUESTION_MESSAGE, null, options, options[0]);

                     if (n == JOptionPane.YES_OPTION)
                     {
                         frame.dispose();
                     }
                     if (n == JOptionPane.NO_OPTION)
                     {
                         System.exit(0);
                     }

        }

          if(ae.getSource() == calc_answer_time)
          { 

              calc_array[count] = new Calculation(Double.parseDouble(init_vel_tf.getText()), 
                       Double.parseDouble(init_pos_tf.getText()), Double.parseDouble(acc_tf.getText()),
                          0, Double.parseDouble(pos_tf.getText()));

              double ans = getArray(count).calcTime(getArray(count).getIntVel(), getArray(count).getIntPos(), getArray(count).getAccel(), getArray(count).getPos());
              count++;

              int n = JOptionPane.showOptionDialog(null, "Time t = " + ans, "Answer: Calculate Time", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, options[0]);

                         if (n == JOptionPane.YES_OPTION)
                         {
                             frame.dispose();
                         }
                         if (n == JOptionPane.NO_OPTION)
                         {
                             System.exit(0);
                         }

          }

   }
} 
```

我认为这就是问题所需要的全部内容，如果您需要更多信息，请告诉我，我会待命。

再次感谢你

**更新代码如下....**

唯一的修复是删除 Calculation 类中的静态关键字和更改对数组的调用。

例子：

```
getArray(j).getIntVel() changed to ... calc_array[j].getIntVel() 
```

计算类已更新...

```
public class Calculation 
{
   //These are the attributes for the Variables object.
   private double initial_accel = 0.0,
                                 initial_velocity = 0.0,
                                 initial_position = 0.0,
                                 acceleration = 0.0,
                                 velocity = 0.0,
                                 position = 0.0,
                                 time = 0.0,
                                 height = 0.0,
                                 mass = 0.0,
                                 weight = 0.0,
                                 answer = 0.0;

    public Calculation() {}

    public Calculation(double initial_velocity, double initial_position, double acceleration, double time)
    {
        setIntVel(initial_velocity);
        setIntPos(initial_position);
        setAccel(acceleration);
        setTime(time);
    }

    public Calculation(double initial_velocity, double initial_position, double acceleration, double time, double position)
    {
        setIntVel(initial_velocity);
        setIntPos(initial_position);
        setAccel(acceleration);
        setPos(position);
        setTime(0);
    }

    public double calcPosition(double in_vel, double in_pos, double acc, double time)
    {
       //x(t) = xi + vi(t) + .5(a)t^2

        double answer = .5 * time * time * acc;
        answer = (in_pos + (in_vel * time) + answer);
       return answer;
    }

    public double calcTime(double in_vel, double in_pos, double acc, double pos)                    
    {
       //t = (-vi + sqrt(vi^2 - 2(a)xi)) / a

        double answer = (in_vel * in_vel) - (2 * acc * (in_pos - pos));
      answer = ((-1 * in_vel) + Math.sqrt(answer)) / (acc);
       return answer;
    }

    //===MUTATORS===//

    public void setIntAccel(double initial_accel) 
    {
       this.initial_accel = initial_accel;
    }

    public void setIntVel(double initial_velocity) 
    {
       this.initial_velocity = initial_velocity;
    }

    public void setIntPos(double initial_position) 
    {
       this.initial_position = initial_position;
    }

    public void setAccel(double acceleration) 
    {
       this.acceleration = acceleration;
    }

    public void setVel(double velocity) 
    {
       this.velocity = velocity;
    }

    public void setPos(double position) 
    {
       this.position = position;
    }

    public void setTime(double time) 
    {
       this.time = time;
    }

    public void setHeight(double height) 
    {
       this.height = height;
    }

    public void setMass(double mass) 
    {
       this.mass = mass;
    }

    public void setWeight(double weight) 
    {
       this.weight = weight;
    }

    public void setAnswer(double answer) 
    {
       this.answer = answer;
    }

    //===ACCESSORS===//

    public double getIntAccel()
    {
       return initial_accel;
    }

    public double getIntVel() 
    {
       return initial_velocity;
    }

    public double getIntPos() 
    {
       return initial_position;
    }

    public double getAccel()
    {
       return acceleration;
    }

    public double getVel()
    {
       return velocity;
    }

    public double getPos()
    {
       return position;
    }

    public double getTime()
    {
       return time;
    }

    public double getHeight()
    {
       return height;
    }

    public double getMass()
    {
       return mass;
    }

    public double getWeight() 
    {
       return weight;
    }

    public double getAnswer() 
    {
       return answer;
    }

    public String toString()
    {

        String result = "Initial Position: " + getIntPos();
        result += "\nAcceleration: " + getAccel();
        result += "\nInitial Velocity: " + getIntVel();
        result += "\nPosition: " + getPos();
        result += "\nTime: " + getTime();
        return result;
    }

} 
```

CalcFrame 类已更新...

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.JFrame;

public class CalcFrame implements ActionListener
{
   private static Calculation[] calc_array = new Calculation[10];  

    private JLabel init_vel_label,
                   init_pos_label,
                        acc_label,
                        time_label,
                        pos_label;

    private JButton calc_answer_time,
                    calc_answer_position;

    private static JFrame frame;

    private JTextField init_vel_tf,
                       init_pos_tf,
                             acc_tf,
                             time_tf,
                             pos_tf;

    private static int count = 0;

   //-----------------------------------------------------------------
   //  Constructor: Sets up the main GUI components.
   //-----------------------------------------------------------------
   public CalcFrame(int operation)
   {
      if(operation == 2)
           CalcTime();
        if(operation == 1)
           CalcPosition();
   }

    public void CalcTime()
   {
      frame = new JFrame ("Quadratic Calculator");
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());

        Toolkit tk = Toolkit.getDefaultToolkit();
       Dimension d = tk.getScreenSize();

        init_vel_label = new JLabel ("Initial Velocity");
        init_pos_label = new JLabel ("Initial Position");
        acc_label = new JLabel ("Acceleration");
        pos_label = new JLabel ("Position at time (t)");

        //textfields
      init_vel_tf = new JTextField (10);
        init_pos_tf = new JTextField (10);
        acc_tf = new JTextField (10);
        pos_tf = new JTextField (10);

        //button
        calc_answer_time = new JButton("Calculate");
      calc_answer_time.addActionListener(this);

      frame.add (init_vel_label);
        frame.add (init_vel_tf);
        frame.add (init_pos_label);
        frame.add (init_pos_tf);
        frame.add (acc_label);
        frame.add (acc_tf);
        frame.add (pos_label);
        frame.add (pos_tf);
        frame.add (calc_answer_time);

        frame.setSize(new Dimension(200, 275));
      frame.pack();
        frame.setResizable(false);
        frame.setLocation((d.width/2)-380, (d.height/2)-200);
      frame.setVisible(true);
      frame.setBackground (new Color(0,0,156));
        frame.getContentPane();
   }

    public void CalcPosition()
   {
      frame = new JFrame ("Quadratic Calculator");
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());

        Toolkit tk = Toolkit.getDefaultToolkit();
       Dimension d = tk.getScreenSize();

        init_vel_label = new JLabel ("Initial Velocity");
        init_pos_label = new JLabel ("Initial Position");
        acc_label = new JLabel ("Acceleration");
        time_label = new JLabel ("Time (or change in time)");

        //textfields
      init_vel_tf = new JTextField (10);
        init_pos_tf = new JTextField (10);
        acc_tf = new JTextField (10);
        time_tf = new JTextField (10);

        //button
        calc_answer_position = new JButton("Calculate");
      calc_answer_position.addActionListener(this);

      frame.add (init_vel_label);
        frame.add (init_vel_tf);
        frame.add (init_pos_label);
        frame.add (init_pos_tf);
        frame.add (acc_label);
        frame.add (acc_tf);
        frame.add (time_label);
        frame.add (time_tf);
        frame.add (calc_answer_position);

        frame.setSize(new Dimension(200, 275));
      frame.pack();
        frame.setResizable(false);
        frame.setLocation((d.width/2)-380, (d.height/2)-200);
      frame.setVisible(true);
      frame.setBackground (new Color(0,0,156));
        frame.getContentPane();
   }

    public static void sort()
    {
         int i = 0;
         int j = 0;
         Calculation k;
         for(i = count - 1; i >= 0; i--)
         {
             for(j = 0; j <= i - 1; j++)
              {
                  if(calc_array[j].getIntVel() > calc_array[j+1].getIntVel())
                    {
                        k = calc_array[j];
                         calc_array[j] = calc_array[j+1];
                         calc_array[j + 1] = k;
                    }
              }
         }
    }

    public static Calculation getArray(int i)
    {
       return calc_array[i];
    }

    public Calculation[] getEntireArray()
    {
       return calc_array;
    }

    public void setArray(int i, Calculation c)
    {
       calc_array[i] = c;
    }

    public static int getSize()
    {
       return count;
    }

    public void actionPerformed(ActionEvent ae)
    { 
          Object[] options = {"Main Menu",
                                "Exit"};

      if(ae.getSource() == calc_answer_position)
      { 
         calc_array[count] = new Calculation();
          calc_array[count].setIntVel(Double.parseDouble(init_vel_tf.getText())); 
          calc_array[count].setIntPos(Double.parseDouble(init_pos_tf.getText()));
          calc_array[count].setAccel(Double.parseDouble(acc_tf.getText()));
          calc_array[count].setTime(Double.parseDouble(time_tf.getText()));

          double ans = getArray(count).calcPosition(getArray(count).getIntVel(),
                       getArray(count).getIntPos(), getArray(count).getAccel(),
                        getArray(count).getTime());
          count++;

          int n = JOptionPane.showOptionDialog(null, "Position x(t) = " + ans,
                  "Answer: Calculate Position", JOptionPane.YES_NO_OPTION,
                     JOptionPane.QUESTION_MESSAGE, null, options, options[0]);

                     if (n == JOptionPane.YES_OPTION)
                     {
                         frame.dispose();
                     }
                     if (n == JOptionPane.NO_OPTION)
                     {
                         System.exit(0);
                     }

        }

          if(ae.getSource() == calc_answer_time)
          { 

              calc_array[count] = new Calculation(Double.parseDouble(init_vel_tf.getText()), 
                       Double.parseDouble(init_pos_tf.getText()), Double.parseDouble(acc_tf.getText()),
                          0, Double.parseDouble(pos_tf.getText()));

              double ans = getArray(count).calcTime(getArray(count).getIntVel(), getArray(count).getIntPos(), getArray(count).getAccel(), getArray(count).getPos());
              count++;

              int n = JOptionPane.showOptionDialog(null, "Time t = " + ans, "Answer: Calculate Time", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, options[0]);

                         if (n == JOptionPane.YES_OPTION)
                         {
                             frame.dispose();
                         }
                         if (n == JOptionPane.NO_OPTION)
                         {
                             System.exit(0);
                         }

          }

   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:48:10.803

你能提供计算类吗？这可能是一个静态问题

* * *

编辑：

好的尝试在你的变量声明中删除静态

那里

```
//These are the attributes for the Variables object.
   private **static** double initial_accel = 0.0, 
```

您还必须在这些变量出现的所有方法上删除静态

认为静态变量和/或方法是独立的，它们不依赖于当前实例，这意味着任何静态属性在同一实例的对象之间总是相同的，您甚至可以在没有实例的情况下冷藏到这些属性

```
Person person1 = new Person();
person1.name = "User";
Person person2 = new Person()
person2.name = "Admin"; 
```

如果 name 是静态的，那么 person1.name 将永远是 person2.name，否则他们将有自己的名字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:02:21.793

您是否在代码中的任何位置调用方法 sort()。因为我看到下面的内部排序方法

```
setArray(j, getArray(j + 1));
setArray(j + 1, k); 
```

因为 您正在通过方法`Calculation k;`从数组中分配引用。`getArray(int i)`由于您正在参考参考，因此这里可能会发生一些事情。这只是一个猜测。

# c# - 如何替换一个列表的内容 和别人的？

> ID：10627141
> 
> 赞同：2
> 
> 时间：2012-05-16T21:43:45.230
> 
> 标签：c#, winforms, arraylist, nullable

我使用了两个可为空的 int[]：

```
int?[] OriginalPterodactylVals = new int?[NUMBER_OF_BABES_IN_TOYLAND];
int?[] ChangedPterodactylVals = new int?[NUMBER_OF_BABES_IN_TOYLAND]; 
```

...以及用于同步它们的代码：

```
ChangedPterodactylVals.CopyTo(OriginalPterodactylVals, 0); 
```

...但是现在我已经将 int[]s 更改为 Lists 并且还没有找到或想出如何完成同样的事情。

当一个被“复制并粘贴”到另一个时，它们在列表中将具有相同数量的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:45:38.983

您可以通过从现有列表构建新列表来执行浅拷贝：

```
list2 = new List<int>(list1); 
```

请注意，这会创建一个*新*列表，而不是修改`list2`最初引用的列表（如果有的话）。

这是一种使用[`AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.100%29.aspx)而不是创建新列表来修改现有列表的方法：

```
list2.Clear();
list2.AddRange(list1); 
```

这是另一种使用`for`循环的方法。这要求列表具有相同的长度，但您表示您的问题就是这种情况。

```
for (int i = 0; i < list1.Count; ++i)
{
    list2[i] = list1[i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:46:46.810

你有没有尝试过：

```
OriginalPterodactylVals.Clear();
ChangedPterodactylVals.ForEach(val => { OriginalPterodactylVal.Add(val); }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T21:46:50.133

如果要从现有列表初始化新列表，

```
List<int> a;
List<int> b = new List<int>(a); 
```

这种方法利用了`List<T>`接受一个`IEnumerable<T>`

[http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)

请注意，使用该构造函数，您还可以从数组初始化列表

```
int[] a = new int[42];
List<int> b = new List<int>(a); 
```

# javascript - 删除 PrettyPrint Json

> ID：10627150
> 
> 赞同：0
> 
> 时间：2012-05-16T21:44:28.050
> 
> 标签：javascript, jquery, json, yelp

我的 Javascript 有问题 -

```
 $.ajax({
 'url': message.action,
 'data': parameterMap,
 'cache': true,
 'dataType': 'jsonp',
 'jsonpCallback': 'cb',
 'success': function(data, textStats, XMLHttpRequest) {
   console.log(data);
   var output = prettyPrint(data);
   $("body").append(output);
  }
 }); 
```

这使用漂亮打印输出 JSON。如何输出纯 json（没有漂亮打印）？我试过

```
$("body").append(data) 
```

什么都没有出现。

PS：我使用的是 YELP.com 提供的示例代码。这是整个代码的链接 - [https://github.com/Yelp/yelp-api/blob/master/v2/js/search.html](https://github.com/Yelp/yelp-api/blob/master/v2/js/search.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:58:38.607

对于支持原生 JSON 编码/解码的现代浏览器，您可以使用

```
var output = JSON.stringify(data); 
```

对于不支持它的浏览器，你可以在[http://www.json.org/js.html找到一个实现](http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:07:02.600

由于您的数据是此处的实际对象，因此您是对的，PrettyPrint 不会显示太多。我建议您使用浏览器的`console.log()`命令，或者如果您真的想“打印”它，您可以查看实际的响应文本。[jsBin](http://jsbin.com/adonaf/7/edit#preview)

```
$.ajax({
    'url': 'http://jsbin.com/ojesuv',
    'dataType': 'jsonp',
    'jsonpCallback': 'fake',
    'success': function(data, textStats, XMLHttpRequest) {
        console.log(data);
        $("body").append(XMLHttpRequest.responseText)
    }
}); 
```

# java - 哪种创建线程的方法更好？

> ID：10627154
> 
> 赞同：1
> 
> 时间：2012-05-16T21:44:35.120
> 
> 标签：java

> **可能重复：**
> [Java：“实现可运行”与“扩展线程”](https://stackoverflow.com/questions/541487/java-implements-runnable-vs-extends-thread)

什么时候应该使用：

```
 class MyThread extends Thread {
    public void run() {
        System.out.println("Important job running in MyThread");
    }

    public void run(String s) {
        System.out.println("String in run is " + s);
    }
} 
```

超过：

```
 class MyRunnable implements Runnable {
    public void run() {
        System.out.println("Important job running in MyRunnable");
    }
} 
```

显然我们以不同的方式实例化它们，但是一旦创建它们有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:48:35.800

`Thread`是一个实现`Runnable`接口的类。本质上，这意味着这是允许的：

```
Runnable runnable = new MyThread();
runnable.run(); 
```

通过实现 a `Runnable`，您基本上必须实现`run()`Thread 执行它的方法。

除此之外，我不知道你真正在问什么。

# javascript - 如何在此表单值之前添加或插入？

> ID：10627157
> 
> 赞同：0
> 
> 时间：2012-05-16T21:44:46.523
> 
> 标签：javascript, jquery

所以我有以下内容：

```
<input type="text" class="example" id="number" readonly="readonly" value="blue widget" name="widget"></input> 
```

我想使用 javascript/jquery 使值“大蓝色小部件”

所以我需要在前面添加或插入，或其他东西，但我不知道如何只定位类“示例”的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:46:15.447

使用 JQuery，您可以使用方法更改输入框的值[`val`](http://api.jquery.com/val/)。

您可以使用*类选择器*：

```
$(".example").val("large blue widget"); 
```

或者您可以*按 ID 使用选择器*：

```
$("#number").val("large blue widget"); 
```

要添加文本，您可以使用：

```
$(".example").val(function(index, text) {
    return "large " + text;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:48:12.117

您可以执行以下操作来访问和更新输入字段的值

```
var currentValue = $('.example').val();
$('.example').val("large " + currentValue); 
```

# c++ - 调整大小时表单疯狂闪烁

> ID：10627158
> 
> 赞同：1
> 
> 时间：2012-05-16T21:44:48.280
> 
> 标签：c++, buffer, gdi, flicker

好的，所以对于在我的表单上具有公共控件的主要父母来说，当我调整它的大小时，一切都会不停地闪烁。

休闲控制在我的表格上：

1.  纽扣
2.  静止的
3.  RTF
4.  状态栏
5.  Rebar 带有工具栏和一些 rebands

现在我将 WM_ERASEBKGND 设置为 true，这样它就不会擦除我的表单背景，因为他们说这也会导致闪烁。

我还将我的 windows 类 hbrBackground 设置为 0，与同样为 0 的 windows 类样式相同。

我的父窗体样式为 WS_OVERLAPPEDWINDOW。

此外，当我将 WS_CLIPCHILDREN 添加到我的父表单时，它仍然会闪烁。

现在在我的表格绘画程序下，我添加了这个：

```
case WM_PAINT:
Temp_Rect=SSMAIN_RECT;
// Get DC for window
hdc = BeginPaint(hwnd, &ps);

// Create an off-screen DC for double-buffering

hdcMem = CreateCompatibleDC(hdc);
hbmMem = CreateCompatibleBitmap(hdc, SSMAIN_WIDTH,SSMAIN_HEIGHT);

hOld   = (HBITMAP)SelectObject(hdcMem, hbmMem);

// Draw into hdcMem here

// Transfer the off-screen DC to the screen
Temp_Rect.left=-200;
Temp_Rect.top=-200;
FillRect(hdcMem, &Temp_Rect, (HBRUSH) (COLOR_WINDOW+7));
BitBlt(hdc, 0, 0,  SSMAIN_WIDTH, SSMAIN_HEIGHT, hdcMem, 0, 0, SRCCOPY);

// Free-up the off-screen DC
SelectObject(hdcMem, hOld);
DeleteObject(hbmMem);
DeleteDC    (hdcMem);

EndPaint(hwnd, &ps);
break; 
```

[![闪烁](../Images/2812c998c4283cd6bf03be3d4f2ca189.png)](https://i.stack.imgur.com/ZaLgc.png)
[（来源：[phantomworksstudios.com](http://phantomworksstudios.com/cpp/flickeringpng.png)）]

当我在另一个论坛上询问时，我对此感到非常迷茫，有人提到将我的窗口子类化以进行绘制过程，因为这就是他为他的选项卡控件所做的事情。

这让我更加困惑，因为当我可以在没有它的情况下访问 WM_PAINT 时，为什么我必须对我的论坛进行子类化？

如果我没记错的话，这与在我的 Winproc 下编辑它而不是创建另一个会做同样事情的另一个不是一样吗？

如果您还需要什么，请告诉我。

**补充说明：**

我还更改了某个区域的 bitblt 的大小。

现在事情就是这样，bitblt 闪烁的区域会闪烁，而我的其余窗口则不会，因为当我调整它的大小时，它会留下表单的其他控件的痕迹。

[![闪烁区域](../Images/e527094f23ac6493a27c4910bb8bbe4a.png)](https://i.stack.imgur.com/G8smS.png)
[（来源：[phantomworksstudios.com](http://phantomworksstudios.com/cpp/flickeringarea.png)）]

# c# - System.Data.SqlClient.SqlException 网络相关或特定于实例的错误

> ID：10627159
> 
> 赞同：1
> 
> 时间：2012-05-16T21:45:00.220
> 
> 标签：c#, sql, database

正如标题所示，这是我的堆栈跟踪中的例外。

我正在尝试获取与 Windows 2003 服务器上托管的 SQL Server 2008 R2 数据库的连接。

我的连接字符串是：

```
Data Source=server\\SQLEXPRESS;Initial Catalog=sqlDB;Integrated Security=SSPI 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:48:52.140

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:01:46.093

试试这个，它可以帮助你创建你的数据库

打开命令提示符，然后输入 services.msc 现在将打开服务窗口

并且，打开 SQL Server Browser，启用它并启动它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-05T14:10:40.583

在 SQL Server 对象资源管理器中刷新数据库帮助我解决了这个问题。

# c++ - c++动态数组和输入字符串

> ID：10627162
> 
> 赞同：0
> 
> 时间：2012-05-16T21:45:04.297
> 
> 标签：c++

我是指针的新手，我想知道是否有人可以查看我的代码并告诉我为什么我收到错误“从 Char 到 Char 的无效转换；

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

int main (int argc, char * const argv[]) {
    int stringlenght;
    string  input;

    cout << "Please enter a  string >";
    getline(cin,input);
    cout << "You entered: " << input  << endl << endl;

    stringlenght=input.length();
    cout << stringlenght;

    char *inputArray[stringlenght];
    for (int i=0; i < stringlenght; i ++) {
        inputArray[i]=input[i];
    }

    //system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:49:08.073

这一行在这里：

```
inputArray[i]=input[i]; 
```

由于`inputArray`是一个数组`char*`而不是类型，因此当在赋值运算符的右侧使用时`char`，您不能将指针分配给该类型的方法`char`返回的实际类型右值。指针类型需要分配一个实际的地址值。尝试将其更改为：`operator[]``string`

```
inputArray[i]=&input[i]; 
```

请记住，如果您这样做，对`string`对象的任何操作都可能使这些存储在`inputArray`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:52:08.247

您的示例的问题是您已将 inputArray 声明为指向字符的指针数组，因此 inputArray[i] 将是指向字符的指针。

您要做的是为 inputArray 中第 i:th 位置的指针分配一个字符值。

我认为您想要做的是将 inputArray 声明为：

```
char *inputArray = new char[length];

... your loop ...

delete []inputArray; 
```

而是创建一个指针，并使其指向内存中可以存储字符的连续区域，因此 inputArray[i] 的类型将是 char 而不是 char *。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:52:06.447

您的行 `char *inputArray[stringlenght];` 定义了一个指针数组。您不是只是想定义一个 char 数组，也就是说，`char inputArray[stringlenght];`吗？

在这种情况下，将输入的元素复制到 inputArray 中会起作用，就像将 char 复制到 char 中一样。

# php - PHP 下载文件已损坏

> ID：10627165
> 
> 赞同：0
> 
> 时间：2012-05-16T21:45:25.673
> 
> 标签：php, download

我有一个 php 脚本，它打开一个下载对话框到服务器上的文件。它在大多数情况下都有效，但是如果文件的文件名中有“&”，那么当您尝试在客户端计算机上打开它时，它就会损坏。我尝试了不同的文件类型，xls、xlsx 和 pdf 都已损坏（这就是我尝试过的全部）。有想法该怎么解决这个吗？代码如下。

```
header("Cache-control: private");
header("Content-Type: " . $oFile->getMimeType()); 
header("Content-Length: " . $oFile->getFileSize());
header("Content-Disposition: attachment; filename=" . $fileName);
header("Expires: 0"); 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Pragma: public"); 
```

编辑：当我在文本编辑器（Notepad++ 或 Sublime Text）中打开文件时，文件中没有显示任何内容。

# python - python中的Selenium webdriver：跨测试用例重用相同的Web浏览器

> ID：10627176
> 
> 赞同：4
> 
> 时间：2012-05-16T21:46:01.137
> 
> 标签：python, unit-testing, selenium, webdriver

Python新手在这里。我试图在我的测试用例中重复使用相同的浏览器。但是，我无法弄清楚如何传递全局变量来完成这项工作。

目前，我有一个 main.py，看起来像这样 #!C:/Python27/python.exe

```
import unittest
import unittest, time, re, HTMLTestRunner, cgi
import os, sys, inspect

from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException

global DRIVER
DRIVER  = webdriver.Firefox()

# Make all subfolders available for importing
cmd_folder = os.path.realpath(os.path.abspath(os.path.split(inspect.getfile( inspect.currentframe() ))[0]))
if cmd_folder not in sys.path:
    sys.path.insert(0, cmd_folder)

# Import test cases
from setup.testcaseA import *
from setup.testcaseB import *

# serialize the testcases (grouping testcases)
suite = unittest.TestSuite() # setup new test suite
suite.addTest(unittest.makeSuite(testcaseA))
suite.addTest(unittest.makeSuite(testcaseB))

runner = HTMLTestRunner.HTMLTestRunner()
print "Content-Type: text/html\n" # header is required for displaying the website
runner.run(suite) 
```

我在 setup/ 文件夹中有 testcaseA.py 文件，如下所示：

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re, cgi

class testcaseA(unittest.TestCase):

    def setUp(self):
        #get global driver variable <- DOESNT WORK!
        self.driver = DRIVER            

    def testcaseA(self):
        driver = self.driver
        #Bunch of tests

    def tearDown(self):
        #self.driver.quit() <- Commented out, because I want to continue re-using the browser 
```

testcaseB.py 与 testcaseA.py 基本相同

当我运行 main.py 时，我收到一个错误：ft1.1: Traceback (last recent call last): File "C:\test\setup\testcaseA.py", line 10, in setUp self.driver = DRIVER #get全局驱动程序变量 NameError：未定义全局名称“驱动程序”

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T21:56:14.107

您可以尝试创建另一个模块（我通常使用 pkg.__init__ 来处理此类事情）并在其中放置一个返回 selenium 驱动程序的函数。当然，如果已经存在，则返回缓存的。例如。在 mypkg/__init__.py

```
from selenium import webdriver

DRIVER = None

def getOrCreateWebdriver():
    global DRIVER
    DRIVER = DRIVER or webdriver.Firefox()
    return DRIVER 
```

并从您的测试中调用：

```
import mypkg
...
class testcaseA(unittest.TestCase):

    def setUp(self):
        self.driver = mypkg.getOrCreateWebdriver() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T22:05:52.400

您有一个例外，因为 testcaseA.py 不知道 DRIVER 是什么。你必须以某种方式导入它。您不能直接从 main.py 导入它，因为这会导致循环依赖。最好的解决方案是在单独的模块中创建 DRIVER。

如果您开始使用 Python 进行测试，请查看 nosetests 库。你不会后悔的！

# javascript - 在加载了 jQuery Ajax 的页面中运行 javascript

> ID：10627180
> 
> 赞同：0
> 
> 时间：2012-05-16T21:46:18.080
> 
> 标签：javascript, jquery, ajax

我有一个函数可以将其他页面的一部分加载到我的 div #ajaxloadconent 中，这是函数：

```
$('#ajaxloadcontent').load(url+' #ajaxloadcontent'); 
```

但是，问题是我在使用此功能时无法在加载的页面上运行 javascript。我只是想运行这个：

```
<script type="text/javascript">
document.title = 'PearlSquirrel About';
</script> 
```

当数据通过 .load() 加载时。该脚本包含在我加载的页面上，因此我不想修改我使用的 .load() 函数。如果有人知道如何解决这个问题，那么将不胜感激。如有必要，我还可以提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:49:29.050

尝试使用这个

```
$.ajax({
  url: url,
  dataType: 'html',
  success: function(data) {
    //Do something with the data e.g.
    $(data).find("#ajaxloadedcontent").appendTo("#ajaxloadcontent");
  }
}); 
```

来自[jQuery 文档](http://api.jquery.com/jQuery.ajax/)：

> “html”：以纯文本形式返回 HTML；包含的脚本标签在插入 DOM 时进行评估。

或者，如果您将脚本分离为独立的 js 文件，则可以使用[http://api.jquery.com/jQuery.getScript](http://api.jquery.com/jQuery.getScript)

# objective-c - 这是什么加密方式？

> ID：10627185
> 
> 赞同：0
> 
> 时间：2012-05-16T21:46:33.437
> 
> 标签：objective-c, encryption

我在我的 iOS 应用程序中使用了一个开源加密库，在描述中它声明它是 AES 256 位加密。这是否意味着只有密钥大小是 AES 256 位？

让我感到困惑的是，密钥大小是 256，但算法和块大小是 128。那么库使用的是哪种类型的加密，为什么它们不同？

```
#define FBENCRYPT_ALGORITHM     kCCAlgorithmAES128
#define FBENCRYPT_BLOCK_SIZE    kCCBlockSizeAES128
#define FBENCRYPT_KEY_SIZE      kCCKeySizeAES256 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:49:45.963

这就是 AES 的工作方式——无论密钥大小如何，块大小都是 128。这并不意味着它只使用 128 位的密钥。[维基百科文章](http://en.wikipedia.org/wiki/Aes256)中的完整信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:50:47.337

AES 仅支持 128 位的块大小。不过，它所基于的 Rijndael 确实支持不同的块大小。AES-128、192 和 256 有一些区别（子密钥推导可能特定于密钥大小和轮数不同），但底层算法相同，始终使用 128 位（16 字节）块.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T21:51:11.040

这些常量在[CommonCryptor.h](http://www.opensource.apple.com/source/CommonCrypto/CommonCrypto-36064/CommonCrypto/CommonCryptor.h)中声明，其中包括有用的注释。

AES 是一种分组密码，它使用 128 位块，而与密钥大小无关。因此，`kCCAlgorithmAES128`通常只是 AES 的“速记”。

因此，代码表明它使用的是标准 AES 和 256 位加密密钥。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T21:50:36.593

AES 标准（[FIPS-197](http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf)）（不仅仅是 Rijndael 算法）指出：

> 该标准规定了**Rijndael**算法（[3] 和 [4]），这是一种可以处理 **128 位****数据块**的 对称分组密码， 使用 长度为 **128、192****和**256 **位**的密码**密钥**。Rijndael 旨在处理额外的块大小和密钥长度，但本标准未采用它们。

# ruby - 在 Ruby 中限制 AMQP 消息的速率

> ID：10627190
> 
> 赞同：1
> 
> 时间：2012-05-16T21:46:55.270
> 
> 标签：ruby, amqp

我有一个向 RabbitMQ 集群发送消息的应用程序。如果该集群由于某种原因出现故障，这些事件将使用 Bunny ruby​​ gem 进行缓冲。当该集群启动时，所有缓冲的消息会立即发送，从而导致发布到 RabbitMQ 端的 CPU 负载大幅增加。

是否有一些简单的方法可以限制集群恢复时每秒发送的消息的速率，因此它们仅以每秒 100 条左右的速度发送？

我正在修改的代码是 logstash AMQP 输出插件：

[https://github.com/logstash/logstash/blob/master/lib/logstash/outputs/amqp.rb](https://github.com/logstash/logstash/blob/master/lib/logstash/outputs/amqp.rb)

# asp.net-mvc-3 - 实体框架、代码优先和外键多对多

> ID：10627192
> 
> 赞同：1
> 
> 时间：2012-05-16T21:47:03.593
> 
> 标签：asp.net-mvc-3, entity-framework, foreign-keys, ef-code-first, code-first

我有这个课程：

```
public class User
{
    [Key]
    public Guid UserId { get; set; }
    public string Address { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }
    public string Units { get; set; }
    public int Distance { get; set; }

    public List<Sport> Sports { get; set; }
}

public class Sport
{
    [Key]
    public int SportId { get; set; }        
    public string Name { get; set; }        

    public List<User> Users { get; set; }
} 
```

因此，这些具有多对多外键的类在数据库中生成一个类似这样的表：SportUsers (SportId, UserId)

当用户注册时，从体育列表框中选择他感兴趣的体育。因此，在适当控制器的注册操作中，我这样保存用户：

```
db.Users.Add(user);
db.SaveChanges(); 
```

但是，如何将用户感兴趣的运动列表保存在为外键自动生成的 SportUsers 表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:50:36.090

如果您的 User 有一个 Sports 集合，Entity Framework 将确定这是一个 M*N 关系并自动将关系填充到您的数据库中。

# wpf - 在 WPF 中建立数据绑定

> ID：10627193
> 
> 赞同：0
> 
> 时间：2012-05-16T21:47:06.397
> 
> 标签：wpf, data-binding

我发现**让数据绑定**以 MVVM 样式为我的示例 WPF 应用程序工作具有挑战性。

# 问题：

以下示例中缺少什么？

* * *

# 细节：

## 基本结构：

**型号：（** `Customer`其实无所谓）

**视图模型：** `AllCustomersViewModel`

**看法：** `WizardWindowView`

## 结构要素：

**由 VM 公开：** `AllCustomers`（ObservableCollection 类型）

**显示在视图上：** `ListView`

**想要绑定：** `ListView <-> AllCustomers`

* * *

## WizardWindowView.xaml：

```
<Window 
    ...
    ...
    <Window.Resources>
        <CollectionViewSource x:Key="CustomerGroups" Source="{Binding Path=AllCustomers}"/>
    </Window.Resources>

    <Grid>
            ...
            ...
            <aw:WizardPage Header="Step 1">
                <ListView
                   ItemsSource="{Binding Source={StaticResource CustomerGroups}}"/>
            </aw:WizardPage>
            ...
            ...
    </Grid>
</Window> 
```

* * *

*我已经花了 10 多个小时试图了解数据绑定是如何完成的，并且觉得是时候寻求帮助了！*

* * *

## 编辑

## 型号信息：

**数据：** `customers.xml`

**模型：** `Customer.cs`

**数据访问：** `CustomerRepository.cs`

## 所有客户视图模型：

```
readonly CustomerRepository _customerRepository;
public AllCustomersViewModel(CustomerRepository customerRespository) {...} 
```

* * *

## 编辑 2

调用顺序：

```
App.xaml.cs.OnStartup() {.. new MainWindowViewModel("Data/customers.xml")..};

public MainWindowViewModel(string customerDataFile)
{
    _customerRepository = new CustomerRepository(customerDataFile);
    new AllCustomersViewModel(_customerRepository);
} 
```

* * *

## 编辑 3

## 数据上下文：

在 App.xaml.cs 中：

```
 MainWindow window = new MainWindow();
    string path = "Data/customers.xml";
    var viewModel = new MainWindowViewModel(path);
    window.DataContext = viewModel; 
```

在 MainWindow.xaml.cs（代码隐藏）中：

```
private void ShowWizardWindow(object sender, RoutedEventArgs e)
{
    Views.WizardWindowView wizardWindow = new Views.WizardWindowView();
    wizardWindow.DataContext = this.DataContext;
    wizardWindow.Show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:06:16.293

在视图的代码隐藏中，您需要设置 DataContext = ViewModel public WizardWindowView() { ... DataContext = new MainWindowViewModel(); ... } 或在 OnStartup() { App.MainWindow.DataContext = new MainWindowViewModel(); 设置 Window 的 DataContext 是您缺少的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:23:54.630

经过这里几个人的帮助，我的同事的帮助，最后通过一些阅读，我设法建立了数据绑定！实际上，与我最初希望的相比，这是一个简化的。

抱歉，我的回答可能不是最有条理的，但我相信它会是可以理解的。

* * *

## 完成

显示客户姓名。

## 就是这样

我有一个`WizardWindowView`（类似于 WPF 窗口），我想在其上显示客户的姓名。`WizardPage`是向导中几个窗口中的一个窗口（同样，类似于 WPF 窗口）。我还设置了问题的编辑部分中的数据上下文。

**客户的名字最初来自哪里？**
我有一个数据源，它是一个`xml`文件。我还有一个`AllCustomersViewModel.cs`类，它为 xml 文件中的数据提供抽象。如果您想知道抽象是如何完成的，您可能需要阅读有关 WPF 的内容！抽象是`CustomerViewModel`对象的集合。

**现在，这些`CustomerViewModel`对象是什么？**
如果`AllCustomersViewModel`在原始 xml 文件中`CustomerViewModel`抽象出客户数据的集合，则抽象出集合中的每个客户。

**抽象是什么样的或它的类型是什么？**
`CustomerViewModel`暴露（这是`.net`行话）一个名为`FirstName`type的属性`string`。`AllCustomersViewModel`公开一个名为`AllCustomers`type的属性`ObservableCollection<CustomerViewModel>`。

**现在我有了要显示的数据，我将注意力转移到`View (xaml)`：**
我正在尝试在我的`WizardWindowView`.

由于我必须显示一个列表而不仅仅是列表中的一两个元素，因此我需要一个 xaml 控件来显示一个列表 ( `ListView`)。

**来源应该`ListView`是什么？**

```
<ListView ItemsSource="{Binding Path=AllCustomers}"> 
```

要显示列表中的每个项目，我执行以下操作：

```
 <ListView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=FirstName}"></TextBlock>
                </DataTemplate>
            </ListView.ItemTemplate> 
```

* * *

**概括：**

```
<aw:WizardPage Header="Step 3: Edit/Check Engine (Faulty Customers)">
    <ListView ItemsSource="{Binding Path=AllCustomers}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Path=FirstName}"></TextBlock>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</aw:WizardPage> 
```

# python - Tornado、Nginx、Apache ab - apr_socket_recv：对等方重置连接 (104)

> ID：10627204
> 
> 赞同：6
> 
> 时间：2012-05-16T21:47:46.637
> 
> 标签：python, nginx, amazon-ec2, tornado, load-testing

我在 c1.medium 实例上运行 nginx 和龙卷风。

当我运行 ab 以下是我的输出。Nginx 将无法工作。我试图调整 ninx 的配置文件无济于事。如果我通过 nginx 仅在一个端口上运行，例如 `

```
 http://127.0.0.1:8050/pixel?tt=ff` 
```

然后它很快。看到最底层。这一定是 nginx 的问题，我该如何解决？下面还有 nginx 的 conf 文件。

```
root@ip-10-130-167-230:/etc/service# ab -n 10000 -c 50 http://127.0.0.1/pixel?tt=ff
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/
Benchmarking 127.0.0.1 (be patient)
Completed 1000 requests
Completed 2000 requests
Completed 3000 requests
Completed 4000 requests
Completed 5000 requests
Completed 6000 requests
Completed 7000 requests
Completed 8000 requests
Completed 9000 requests
apr_socket_recv: Connection reset by peer (104)
Total of 9100 requests completed 
```

这应该会冒烟，但它不会。

我设置了以下参数

```
ulimit is at 100000

# General gigabit tuning:
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
net.ipv4.tcp_syncookies = 1
# this gives the kernel more memory for tcp
# which you need with many (100k+) open socket connections
net.ipv4.tcp_mem = 50576   64768   98152
net.core.netdev_max_backlog = 2500 
```

这是我的 nginx 配置文件：

```
user www-data;
worker_processes 1;  # 2*number of cpus
pid /var/run/nginx.pid;
worker_rlimit_nofile 32768;
events {
         worker_connections  30000;
         multi_accept on;
         use epoll;
}

http {
        upstream frontends {
          server 127.0.0.1:8050;
          server 127.0.0.1:8051;
        }
        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        # server_tokens off;
        # server_names_hash_bucket_size 64;
        # server_name_in_redirect off;

        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        # Only retry if there was a communication error, not a timeout
    # on the Tornado server (to avoid propagating "queries of death"
    # to all frontends)
    proxy_next_upstream error;

        server {
        listen   80;
        server_name 127.0.0.1;
                ##For tornado
                location / {
                    proxy_pass_header Server;
                    proxy_set_header Host $http_host;
                    proxy_redirect off;
                    proxy_set_header X-Real-IP $remote_addr;
                    proxy_set_header X-Scheme $scheme;
                    proxy_pass http://frontends;
                } 
```

如果我通过传递 nginx 运行 ab：

```
ab -n 100000 -c 1000 http://127.0.0.1:8050/pixel?tt=ff

root@ip-10-130-167-230:/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbTornadoServer# ab -n 100000 -c 1000 http://127.0.0.1:8050/pixel?tt=ff
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking 127.0.0.1 (be patient)
Completed 10000 requests
Completed 20000 requests
Completed 30000 requests
Completed 40000 requests
Completed 50000 requests
Completed 60000 requests
Completed 70000 requests
Completed 80000 requests
Completed 90000 requests
Completed 100000 requests
Finished 100000 requests

Server Software:        TornadoServer/2.2.1
Server Hostname:        127.0.0.1
Server Port:            8050

Document Path:          /pixel?tt=ff
Document Length:        42 bytes

Concurrency Level:      1000
Time taken for tests:   52.436 seconds
Complete requests:      100000
Failed requests:        0
Write errors:           0
Total transferred:      31200000 bytes
HTML transferred:       4200000 bytes
Requests per second:    1907.08 [#/sec] (mean)
Time per request:       524.363 [ms] (mean)
Time per request:       0.524 [ms] (mean, across all concurrent requests)
Transfer rate:          581.06 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0  411 1821.7      0   21104
Processing:    23   78 121.2     65    5368
Waiting:       22   78 121.2     65    5368
Total:         53  489 1845.0     65   23230

Percentage of the requests served within a certain time (ms)
  50%     65
  66%     69
  75%     78
  80%     86
  90%    137
  95%   3078
  98%   3327
  99%   9094
 100%  23230 (longest request)

2012/05/16 20:48:32 [error] 25111#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET / HTTP/1.1", upstream: "http://127.0.0.1:8051/", host: "127.0.0.1"
2012/05/16 20:48:32 [error] 25111#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET / HTTP/1.1", upstream: "http://127.0.0.1:8050/", host: "127.0.0.1"
2012/05/16 20:53:48 [error] 28905#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET / HTTP/1.1", upstream: "http://127.0.0.1:8051/", host: "127.0.0.1"
2012/05/16 20:53:48 [error] 28905#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET / HTTP/1.1", upstream: "http://127.0.0.1:8050/", host: "127.0.0.1"
2012/05/16 20:55:35 [error] 30180#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET / HTTP/1.1", upstream: "http://127.0.0.1:8051/", host: "127.0.0.1"
2012/05/16 20:55:35 [error] 30180#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET / HTTP/1.1", upstream: "http://127.0.0.1:8050/", host: "127.0.0.1" 
```

在 ab 上使用 -v 10 选项时的输出：

```
GIF89a
LOG: Response code = 200
LOG: header received:
HTTP/1.1 200 OK
Date: Wed, 16 May 2012 21:56:50 GMT
Content-Type: image/gif
Content-Length: 42
Connection: close
Etag: "d5fceb6532643d0d84ffe09c40c481ecdf59e15a"
Server: TornadoServer/2.2.1
Set-Cookie: rtbhui=867bccde-2bc0-4518-b422-8673e07e19f6; Domain=rtb.rtbhui.com; expires=Fri, 16 May 2014 21:56:50 GMT; Path=/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:49:36.547

我在使用 webrick 的 sinatra 应用程序上使用 apache 基准测试时遇到了同样的问题。[我在这里](https://superuser.com/questions/323840/apache-bench-test-erroron-os-x-apr-socket-recv-connection-reset-by-peer-54)找到了答案。

它实际上是您的 Apache 服务器的问题。

该错误已在更高版本的 apache 中删除。尝试[在此处](http://httpd.apache.org/download.cgi#apache24)下载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T08:48:20.390

我遇到了同样的问题，并在日志中查找信息，我得到了以下几行：

```
Oct 15 10:41:30 bal1 kernel: [1031008.706185] nf_conntrack: table full, dropping packet.
Oct 15 10:41:31 bal1 kernel: [1031009.757069] nf_conntrack: table full, dropping packet.
Oct 15 10:41:32 bal1 kernel: [1031009.939489] nf_conntrack: table full, dropping packet.
Oct 15 10:41:32 bal1 kernel: [1031010.255115] nf_conntrack: table full, dropping packet. 
```

在我的特殊情况下，conntrack 模块在 iptables 中使用，因为同一台服务器有防火墙。

一种解决方案是卸载 conntrack 模块，另一种简单的解决方案是在防火墙策略中应用这两行：

```
iptables -t raw -I PREROUTING -p tcp  -j NOTRACK
iptables -t raw -I OUTPUT -p tcp  -j NOTRACK 
```

# c# - ASP.NET 嵌套中继器处理外部中继器中的控件

> ID：10627206
> 
> 赞同：0
> 
> 时间：2012-05-16T21:48:02.633
> 
> 标签：c#, asp.net

我有两个嵌套的中继器，比如说：外部一个用于帖子，内部一个用于评论。外部转发器包含两个 Div：一个用于内部转发器，另一个包含一个文本框和一个用于添加评论的按钮。

问题是：当我单击按钮时，它什么也没做（它必须访问数据库并添加评论），我添加了这个事件，但它根本没有到达它。

```
void btnComment_Command(object sender, CommandEventArgs e)
    {
        for (int i = 1; i <= commentRepeater.Items.Count; i++)
        {
            if (e.CommandName == i.ToString())
            {
                TextBox txtComment = (TextBox)commentRepeater.Items[i].FindControl("txtComment");

            }

        }

    } 
```

请我帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:49:24.960

您需要设置外部中继器的 OnItemCommand 值。

```
<asp:Repeater OnItemCommand="btnComment_Command" .... > 
```

ItemCommand 函数应该是这样的（注意参数不同）：

```
void btnComment_Command(Object Sender, RepeaterCommandEventArgs e) {...} 
```

# google-chrome - @font-face 用于自定义字体，Chrome 中的字体不流畅

> ID：10627209
> 
> 赞同：19
> 
> 时间：2012-05-16T21:48:19.630
> 
> 标签：google-chrome, css, fonts, font-face

我有一个使用 CSS3 的 @font-face 嵌入自定义字体的 Web 应用程序。到目前为止，这在 IE 和 Firefox 中完美运行。

然而，在 Chrome 中，自定义字体显得像素化且不流畅。下面是我在 Firefox & IE（顶部）和 Chrome（底部）中的字体示例的屏幕片段链接： [屏幕截图比较](http://dhines.com/font-issue.jpg "截图")

在这么小的示例屏幕截图中可能很难看出差异，但是当这种情况发生在整个页面上时，它会非常明显。

下面是我如何在样式表中使用 @font-face 的示例：

```
@font-face 
{
    font-family: 'MyFont';
    src: url('../Content/fonts/MyFont.eot?') format('embedded-opentype'),
         url('../Content/fonts/MyFont.ttf') format('truetype');
} 
```

可能值得一提的另一件事是，当我在虚拟机上运行的任何浏览器中打开该站点时，字体都非常不稳定，比 Chrome 示例差得多。当我使用所有运行 Win7 VMWare 桌面的学校计算机时，就会发生这种情况。当我从在朋友的 Mac 上运行的 Windows 7 VM 中提取站点时，也会发生这种情况。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-16T02:25:48.710

这是 Chrome 开发人员正在修复的一个已知问题：

[http://code.google.com/p/chromium/issues/detail?id=137692](http://code.google.com/p/chromium/issues/detail?id=137692)

要解决此问题，请先尝试：

```
html {
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
} 
```

如果这对您不起作用，则此解决方法对我有用（以上未修复 windows Chrome）：

[http://code.google.com/p/chromium/issues/detail?id=137692#c68](http://code.google.com/p/chromium/issues/detail?id=137692#c68)

它似乎重新排列了@font-face CSS 规则以允许 svg 出现“首先”解决了这个问题。

例子：

```
-before--------------

@font-face {
font-family: 'chunk-webfont';
src: url('../../includes/fonts/chunk-webfont.eot');
src: url('../../includes/fonts/chunk-webfont.eot?#iefix') format('eot'),
url('../../includes/fonts/chunk-webfont.woff') format('woff'),
url('../../includes/fonts/chunk-webfont.ttf') format('truetype'),
url('../../includes/fonts/chunk-webfont.svg') format('svg');
font-weight: normal;
font-style: normal;
}

-after--------------

@font-face {
font-family: 'chunk-webfont';
src: url('../../includes/fonts/chunk-webfont.eot');
src: url('../../includes/fonts/chunk-webfont.eot?#iefix') format('eot'),
url('../../includes/fonts/chunk-webfont.svg') format('svg'),
url('../../includes/fonts/chunk-webfont.woff') format('woff'),
url('../../includes/fonts/chunk-webfont.ttf') format('truetype');
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:55:26.463

不幸的是，所有浏览器都以不同的方式呈现字体。一个看起来不错的人可能在另一个人身上有麻烦。为 font-face 找到一个好的字体并不容易......如果你想要像素完美，你将不得不使用图像。

但并非全部丢失，这里有 20 种免费字体（甚至免费用于商业用途！）渲染得非常好（我总是最终检查这个列表）：[http ://speckyboy.com/2010/07/04/25-completely -free-fonts-perfect-for-fontface/](http://speckyboy.com/2010/07/04/25-completely-free-fonts-perfect-for-fontface/)

请记住，您不能托管付费字体，否则您将分发它们，您最终可能会遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:58:01.790

您可能想玩 optimizeLegibility：[http ://aestheticallyloyal.com/public/optimize-legibility/](http://aestheticallyloyal.com/public/optimize-legibility/)

还有-webkit-font-smoothing： http: [//maxvoltar.com/archive/-webkit-font-smoothing](http://maxvoltar.com/archive/-webkit-font-smoothing)

使用 font-squirrel 字体生成器来生成 webfonts 和 css 以加载字体可能也值得： [http](http://www.fontsquirrel.com/fontface/generator) ://www.fontsquirrel.com/fontface/generator （尽管我不确定这是否会解决您的问题或不是）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T21:35:40.240

对我来说，效果最好：

```
@font-face {
    font-family: MyFont;
    src: url("MyFont.ttf") format('truetype');
}

h1 {
    font-family: MyFont;
    -webkit-text-stroke: 0.5pt;
    -webkit-font-smoothing: antialiased;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T08:01:22.893

我建议使用这个：

```
-webkit-text-stroke: 0.3pt;
-webkit-font-smoothing: antialiased; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-27T18:58:14.743

尝试添加**-webkit-transform: translateZ(1px);** 或另一个 3d 变换。

解释：

Chrome 有另一个错误 - 应用 3d 转换时文本模糊，因此添加建议的属性将模糊切碎的文本并部分解决问题。它仍然有点模糊，但在许多情况下，它比切碎更好。

示例 1（问题）：[切碎的文本](http://codepen.io/sol0mka/pen/twJms/)。我在这里添加了旋转以确保文本被切碎。
示例2（已解决）：[半平滑文本](http://codepen.io/sol0mka/pen/ADwhG/)。应用 3d 变换会使文本变得模糊，因此切碎的文本看起来更平滑。

小问题是看起来我们不能在 CSS 中只针对 Windows 版本的 Chrome，所以我们必须使用 javascript 来应用适当的类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-05T16:02:07.103

这个问题将在 Chrome 37 中得到解决。

[http://blog.chromium.org/2014/07/chrome-37-beta-directwrite-on-windows.html](http://blog.chromium.org/2014/07/chrome-37-beta-directwrite-on-windows.html)

# session - 为条件规则、报告等加入 Sitecore Analytics (OMS) 会话和全局会话数据的最佳方式是什么？

> ID：10627210
> 
> 赞同：0
> 
> 时间：2012-05-16T21:48:22.080
> 
> 标签：session, analytics, sitecore, sitecore6, sitecore-dms

我是一名新的 Sitecore Analytics 开发人员（Sitecore 6.3.1），我想知道 Sessions 和 GlobalSessions 在存储配置文件数据方面发生了什么。在阅读分析配置参考后，我看到：

> 分析配置文件不同于安全配置文件和分析标签。分析配置文件适用于单个 Web 客户端中的单个会话，而不是用户或全局会话。

我想根据 Global Session 为用户累积分数，但是查看反射器中的 API，似乎 Session 和 GlobalSession 对象之间没有定义关系......看起来我需要加入 Session 和 GlobalSession 在数据层，在那里获取会话列表，然后构建我自己的渲染条件规则，而不是使用 API 方法或其他任何内置的方法。

我的问题是：

1.  我的理解正确吗？
2.  是否有其他人试图跨会话跟踪用户，使用“标签”以外的任何东西？
3.  Sitecore 不将这些数据汇总到全球会话级别背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:06:46.773

1.  是的，默认情况下，个人资料仅在一次访问中得分
2.  我已经看到了许多在所有会话中使用个性化的网站示例
3.  不知道答案，默认行为仅适用于单个会话。

要针对 6.3 版修改此内容，请查看分析管道中的“Sitecore.Analytics.Pipelines.RenderingConditions.EvaluateProfileKeys”。您将不得不对此类进行自定义实现以累积所有会话的分数。

# python - 提高 odeint 的速度：重力积分

> ID：10627215
> 
> 赞同：2
> 
> 时间：2012-05-16T21:48:41.273
> 
> 标签：python, performance, scipy

这个问题是关于 scipy.integrate 模块中的 odeint 函数。

我根据以下原理模拟相互作用的星系：让两个原子核在开普勒轨道上移动，然后让星系中的每颗恒星都没有质量。

我在 1 个星系的参考系中工作，所以我使用两个经典的牛顿重力 + 1 个离心力。

所有这些都与 odeint（scipy.integrate 模块）集成在一起，效果很好。我对 odeint 整合我的星星的速度有问题：每颗星星需要大约 10-15 秒才能在大约 100 个时间步长（约 10 亿年）中整合，但这相当于整合几个小时总共1000颗星。据我的教授说，他的程序运行大约 5 分钟，做那些星星。我什至不知道如何提高这个速度，因为我无法更改方程式，而 odeint 确实占用了 99% 的运行时间。

长话短说，我怎样才能提高我的 odeint 计算时间？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:50:27.770

`odeint`是一个很好的通用 ode 积分器，但由于某种原因，它可能没有为您的问题使用最佳方法。您可以尝试使用`ode`[1](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.ode.html#scipy.integrate.ode)代替，因为您可以通过更改它使用的积分器来控制它。如果问题不是僵硬的，那么使用龙格-库塔 (4)5 方法（dopri5 using `ode`）通常是合理的，如果问题是僵硬的，那么 BDF 方法通常是一个不错的选择。由于我没有对您描述的问题类型进行建模，因此我不知道您的问题是否僵硬，我建议您先尝试 dopri5，然后再尝试 BDF 方法。

您的代码中也可能存在问题，导致右侧的评估效率不合理，因此您可以尝试在那里做一些工作以加快执行速度。另一个优点`ode`是您可以为它提供一个函数，该函数给出精确的雅可比行列式，这可以大大提高速度，因为不使用近似值。

参考：[Scipy 文档`ode`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.ode.html#scipy.integrate.ode)

# c# - 在不播放的情况下获取视频时长？

> ID：10627217
> 
> 赞同：3
> 
> 时间：2012-05-16T21:48:47.797
> 
> 标签：c#, wpf, video

我正在使用`MediaTimeline`并`MediaClock`控制 WMV 视频播放。

```
Timeline = new MediaTimeline(new Uri(VideoFileName));
Clock = Timeline.CreateClock(true) as MediaClock; 
```

当我查看时`Clock.NaturalDuration`，值设置为`Automatic`并且不包含持续时间`TimeSpan`。

当我分配`Clock`给`MediaElement`并开始播放视频时，我现在可以看到`NaturalDuration.TimeSpan`它存在并且可以。

除了将时钟分配给媒体元素并播放之外，还有其他方法可以获得视频持续时间吗？

即使不使用媒体元素，有没有办法获得持续时间（这将是最好的）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T21:42:10.903

我有类似的需要检查视频长度，所以我读到这个属性在引发 MediaOpened 事件时可用，否则设置为自动 - 阅读这个 [http://msdn.microsoft.com/en-us/library/system .windows.controls.mediaelement.naturalduration(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.naturalduration(v=vs.95).aspx)

```
media.MediaOpened += new System.Windows.RoutedEventHandler(media_MediaOpened);
            media.LoadedBehavior = MediaState.Manual;
            media.UnloadedBehavior = MediaState.Manual;
            media.Play();

void media_MediaOpened( object sender, System.Windows.RoutedEventArgs e )
        {
            progress.Maximum = (int)media.NaturalDuration.TimeSpan.TotalSeconds;
            timer.Start();
            isPlaying = true;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T09:04:56.647

在 Win Rt App 或 Metro C# 中获取视频文件的持续时间

```
string path = ApplicationData.Current.LocalFolder.Path;
StorageFile videoFile = 
        await StorageFile.GetFileFromPathAsync(presentationItem.Slide_path_local);
Windows.Storage.FileProperties.VideoProperties x = 
        await videoFile.Properties.GetVideoPropertiesAsync();
Duration videoDuration = x.Duration; 
```

获取视频文件持续时间的最佳方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T17:47:57.190

检查 HasTimeSpan 属性以确保它存在

```
private void Element_MediaOpened1(object sender, RoutedEventArgs e)
        {
            if (mediaElement_1.NaturalDuration.HasTimeSpan)
                timelineSlider.Maximum = mediaElement_1.NaturalDuration.TimeSpan.TotalSeconds;
        } 
```

# objective-c - 导入语句“预期为“文件名”或 "

> ID：10627219
> 
> 赞同：5
> 
> 时间：2012-05-16T21:48:56.313
> 
> 标签：objective-c, import, compiler-errors

我在将 Appirater 集成到我的应用程序时遇到了一些问题。我已经正确添加了所有必要的文件，并且拥有正确的代码（我认为），但是在尝试将其实现到我的 AppDelegate.m 文件时出现错误。当我这样做时，`#import "Appirater.h"`我收到错误：

> 应为“文件名”或 <文件名>

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T18:00:58.907

# python - KML：从 Python 中的边界坐标计算范围

> ID：10627221
> 
> 赞同：1
> 
> 时间：2012-05-16T21:49:01.800
> 
> 标签：python, range, kml, bounding-box

有了某个多边形的边界框坐标，Python 有没有办法计算 KML 文件中 LookAt 元素的理想范围值？

从边界坐标到范围的公式或一组公式已经非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:17:33.507

编写 kml 文件时，可以跳过 LookAt 元素。当您双击相应的项目时，Google 地球将默认这些值。尝试从 GE 再次保存您的文件，它可能会保存外观的默认值。

如果您想自己设置，range 是到 lat/lon/alt 指定的点的距离。它在[docs](https://developers.google.com/kml/documentation/kmlreference#lookat)中有很好的说明。那里的图解释了它，没有公式。

# linq - 添加链接实体？

> ID：10627223
> 
> 赞同：0
> 
> 时间：2012-05-16T21:49:02.920
> 
> 标签：linq, entity-framework, entity-framework-4.1

我有一个`Apple`实体，其中包含一个递增的身份字段。

```
Owner owner = new Owner();
Apple apple = new Apple();
DbContext.Apple.Add(apple);
Owner.Apple = apple;
DbContext.Owner.Add(owner);
DbContext.SaveChanges(); 
```

上面的代码会在插入数据库时​​正确地将两个实体链接在一起吗？

我猜这与延迟执行有关，但我对这个概念仍然很模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:53:41.487

您可以将 Apple 分配给您的所有者，将所有者插入您的数据库中，然后它们都将被插入（两者之间存在关系）。

所以就像这样：

```
Owner owner = new Owner();
Apple apple = new Apple();
Owner.Apple = apple;
DbContext.Owner.Add(owner);
DbContext.SaveChanges(); 
```

# asp.net-mvc-3 - 如何从助手返回剃刀标记？

> ID：10627229
> 
> 赞同：0
> 
> 时间：2012-05-16T21:49:14.500
> 
> 标签：asp.net-mvc-3, razor, helper, javascript-intellisense

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:51:09.020

您无法渲染在帮助程序中生成的 Razor 标记。razor 引擎首先解析 razor 代码，然后执行帮助程序。Helper 的结果只能用于生成 html 标记。

# python - 什么时候最好在 Python 中使用类？

> ID：10627232
> 
> 赞同：8
> 
> 时间：2012-05-16T21:49:23.207
> 
> 标签：python, oop, class, function

我是 python 和一般编程的新手，所以非常感谢任何关于这一点的澄清。

例如，在以下代码中：

```
 #Using a class
class Monster(object): 
    def __init__(self, level, damage, duration): 
        print self
        self.level = level
        self.damage = damage
        self.duration = duration

    def fight(self):
        print self 
        print "The monster's level is ", self.level
        print "The monster's damage is ", self.damage
        print "The attack duration is ", self.duration

    def sleep(self): 
        print "The monster is tired and decides to rest."

x = Monster(1, 2, 3)
y = Monster(2, 3, 4)
x.fight()
y.fight()
    y.sleep() 

   #just using a function
def fight_func(level, damage, duration):
    print "The monster's level is ", level
    print "The monster's damage is ", damage
    print "The attack duration is ", duration

fight_func(1, 2, 3)
fight_func(5,3,4) 
```

纯函数版本看起来更干净，并给出相同的结果。

您可以在对象上创建和调用多个方法（例如战斗或睡眠）的类的主要价值是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T21:52:52.130

您的示例相当简化。

在一个更完整的示例中，战斗不仅会显示当前状态 - 它还会修改该状态。你的怪物可能会受伤，这会改变它的生命值和士气。这个状态必须存储在某个地方。如果你使用一个类，添加实例变量来存储这个状态是很自然的。

仅使用函数会更难找到存储状态的好地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:55:03.020

你的例子不是特别有趣——它只打印了三个数字。你不需要类，甚至不需要一个函数（真的）来做到这一点。

但是，如果您需要编写一个程序来同时跟踪两个不同的怪物、了解它们的健康状况、区分它们的战斗能力等等，那么您可以看到将每个怪物封装在一个单独的怪物实例中的价值.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T22:37:15.127

我的怪物呢？他可以与另一个怪物战斗！大概你的功能怪物不能这样做;-)

```
class Monster(object): 
    def __init__(self, level, damage, duration): 
        self.level    = level
        self.damage   = damage
        self.duration = duration
    def fight(self, enemy):
        if not isinstance(enemy, Monster) :
            print "The enemy is not a monster, so I can't fight it."
            return None
        else :
            print "Starting fighting"
        print "My monster's level is ", self.level
        print "My monster's damage is ", self.damage
        print "My monster's attack duration is ", self.duration
        print "The enemy's level is ", enemy.level
        print "The enemy's damage is ", enemy.damage
        print "The enemy's attack duration is ", enemy.duration

        result_of_fight = 3.*(self.level    - enemy.level)  + \
                          2.*(self.damage   - enemy.damage) + \
                          1.*(self.duration - enemy.duration)
        if result_of_fight > 0 :
            print "My monster wins the brutal battle"
        elif result_of_fight < 0 :
            print "My monster is defeated by the enemy"
        else :
            print "The two monsters both retreat for a draw"
        return result_of_fight
    def sleep(self, days): 
        print "The monster is tired and decides to rest for %3d days" % days
        self.level    += 3.0 * days
        self.damage   += 2.0 * days
        self.duration += 2.0 * days
x = Monster(1, 2, 3)
y = Monster(2, 3, 4)
x.fight(y)
x.sleep(10) 
```

所以：

```
Starting fighting
My monster's level is  1
My monster's damage is  2
My monster's attack duration is  3
The enemy's level is  2
The enemy's damage is  3
The enemy's attack duration is  4
My monster is defeated by the enemy
The monster is tired and decides to rest for  10 days 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T18:30:00.637

这是一个比您的代码更通用的答案，但是当您需要时，类很有用：

*   **跨特定功能安全地共享状态**。

    类提供封装以避免只需要在几个函数之间共享的变量污染全局命名空间。您不希望有人使用您的代码来覆盖您的所有函数都在使用的变量——您总是希望能够尽可能地控制访问。

    类可以被实例化，并且具有相同变量的多个独立*副本*，这些副本根本不共享，同时只需要很少的代码使用。

    当您需要对函数和变量集合与另一个函数和变量集合之间的交互进行建模时，即当您需要对对象建模*时*，它们是合适的。为没有状态的单个函数定义一个类坦率地说是浪费代码。

*   **提供运算符重载或为某些类型定义特定特征**

    是什么使`int`,`string`和`tuples`hashable （可以用作字典中的键或插入到 a 中`set`），而`list`s 和`dict`s 不是？

    答：这些原始类型的*基类*实现了[魔术方法](http://www.diveintopython3.net/special-method-names.html) `__hash__`，它使 Python 编译器能够在运行时动态计算哈希值。

    是什么允许`+`运算符重载，以便`5 + 2 = 7`为`int`s 而不是`'s' + 'a' = 'sa'`字符串？

    回答：这些类型的*基类*定义了它们自己的`__add__`方法，这使您可以准确地定义如何在类的两个成员之间进行加法。

    所有用户定义的类都可以实现这些方法。它们有很好的用例：更大的数学库——numpy、scipy 和 pandas——通过定义这些神奇的方法来大量使用运算符重载，为您提供有用的对象来处理数据。类是在 Python 中实现这些特征和属性的唯一方法。

不满足上述条件时，类不优于功能。

使用类以合理的方式将有意义的函数和变量*组合在一起*，或者赋予对象特殊的属性。其他任何事情都是多余的。

# java - 是否允许静态类构造函数中的异常以逃避正确的设计模式？

> ID：10627236
> 
> 赞同：2
> 
> 时间：2012-05-16T21:49:42.513
> 
> 标签：java, exception, static-initialization

我发现自己经常在以下两种设计模式之间进行选择：

```
static {
    try {
        foo();
    }
    catch(Exception exc) {
        throw new RuntimeException(exc.getMessage());
    }
} 
```

和

```
TheConstructor() throws SomeException {
    if(alreadyInited) {
        return;
    }
    alreadyInited = true;
    foo();
} 
```

问题是我真的想为每个类初始化一次东西——我认为是静态的——比如设置一个记录器，从文件中加载一些地图等等——如果这个操作失败，我真的希望程序停止. 这两种设计模式看起来都很杂乱（第一个更明显），所以我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:15:27.350

> 是否允许静态类构造函数中的异常以逃避正确的设计模式？

我会说不。

首先，在该上下文中包装已检查的异常意味着如果出现问题，您将获得类初始化失败。

*   传播出类初始化程序的异常不能被直接捕获和处理。

*   类初始化期间未捕获的异常是不可恢复的。即使您可以捕获并处理异常，该类和（我认为）依赖它的所有其他类/它们也将处于无法初始化的状态，因此无法使用。对于（至少）类加载器，甚至可能是整个 JVM，这实际上是“游戏结束”。

更大的图景是，这可能代表了对静力学的不当使用。有更好的方法来处理这个问题；例如

*   使用显式调用（在可以捕获和处理异常的地方）进行初始化，而不是依赖于类初始化。

*   摆脱静态（可能还有包装它的单例类）并使用依赖注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:53:43.970

工厂模式可以在这里为您提供帮助。你仍然可以抛出运行时异常，尽管我会抛出一个名为“CouldNotCreate”的异常以及一些关于出错的很酷的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T22:29:12.223

你的第一个例子对我来说很好。如果您的课程绝对需要做`foo()`才能使用，那么如果它不能做`foo()`，那么它就无法使用。如果它不可用，那么它一定不能使用。从静态初始化程序中抛出异常是确保不使用该类的直接且有效的方法。

不幸的是，Java 不允许从静态初始化程序中抛出已检查的异常。我不明白为什么会这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:09:43.160

您可以像这样使第二个不那么笨拙：

```
static boolean isStaticInit = false;
static void staticInit() throws InitException {
    if (isStaticInit) return;

    // [init loggers, map, etc...throw InitException as appropriate]

    isStaticInit = true;
}

MyClass() throws InitException {
    staticInit();

    // ...
} 
```

请注意，您的第一个和第二个选项之间存在细微差别。在第一个选项中，在`static{}`第一次加载类时调用块，而对于第二个选项，在构造第一个类实例之前不调用 init 代码。如果您有调用的代码，例如，这可能会有所不同`MyClass.myStaticMethod()`。使用选项 1，调用将触发类初始化；使用选项2，它不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T21:55:28.280

在这种情况下，我为“配置”选择了单例模式。

但是构造函数内部的逻辑很奇怪，静态块更干净恕我直言，但我认为不容易测试。当心。

# c++ - Qt 中的事件处理程序

> ID：10627242
> 
> 赞同：2
> 
> 时间：2012-05-16T21:50:03.360
> 
> 标签：c++, qt

我正在尝试在 Qt 中实现鼠标悬停效果，但我不知道如何使用事件处理程序。我用一个按钮创建了一个简单的 Qt 小部件应用程序。我可以像这样将事件处理程序绑定到 MainWindow：

```
MainWindow::enterEvent(QEvent *event)
{
    ui->pushButton_3->setGraphicsEffect(effect);
} 
```

这行得通，graphicsEffect 应用于 pushButton。但我不明白如何将事件处理程序绑定到单个 QObject。据我所知，不可能使用信号，因为它们只支持点击事件而没有鼠标悬停事件。

我对 Qt 很陌生，我找不到任何我能理解的信息。

谁能向我解释如何将事件处理程序绑定到单个 QObject？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T08:39:56.763

我以另一种方式通过使用 QtCreator 中的“提升到...”选项来解决这个问题。还解释了这里：[http ://sector.ynet.sk/qt4-tutorial/customing-widgets.html](http://sector.ynet.sk/qt4-tutorial/customing-widgets.html)

我添加了一个类“MyPushButton”：

我的按钮.h

```
#ifndef MYPUSHBUTTON_H
#define MYPUSHBUTTON_H

#include <QPushButton>
#include <QGraphicsDropShadowEffect>

class MyPushButton : public QPushButton
{
    Q_OBJECT
public:
    MyPushButton(QWidget *parent = 0);

private:
    void enterEvent(QEvent *e);
    void leaveEvent(QEvent *e);

    QGraphicsDropShadowEffect *effect;
};

#endif // MYPUSHBUTTON_H 
```

我的按钮.cpp

```
#include "mypushbutton.h"

MyPushButton::MyPushButton(QWidget *parent)
    :QPushButton(parent)
{
    effect = new QGraphicsDropShadowEffect();
    effect->setBlurRadius(5);
    effect->setEnabled(false);
    this->setGraphicsEffect(effect);
}

void MyPushButton::enterEvent(QEvent *event)
{
    if (this->isEnabled())
        effect->setEnabled(true);
}

void MyPushButton::leaveEvent(QEvent *event)
{
    if (this->isEnabled())
        effect->setEnabled(false);
} 
```

然后我在编辑器中右键单击我的 QPushButton 并选择了“提升为 ...”，并将 MyPushButton 添加为“提升的类名”。

它就像一个魅力，很容易扩展或定制，因为它适用于任何事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:53:26.323

如果您使用的是 QPushButton，这里的描述非常好：

[http://www.developer.nokia.com/Community/Wiki/How_to_use_QPushButton_in_Qt](http://www.developer.nokia.com/Community/Wiki/How_to_use_QPushButton_in_Qt)

对于进入和离开事件，请看这里：[Finding current mouse position in QT](https://stackoverflow.com/questions/4178938/finding-current-mouse-position-in-qt)

例如，如果你做了一些继承自 QGraphicsRectItem 的东西，你可以像这样覆盖鼠标事件：

```
class BTNodeGraphicsItem : public QGraphicsRectItem
{
protected:
    virtual void mousePressEvent(QGraphicsSceneMouseEvent* event);
    // other class stuff
}; 
```

然后

```
void BTNodeGraphicsItem::mousePressEvent(QGraphicsSceneMouseEvent* event)
{
    // do stuff here
} 
```

如果你想让事件更进一步，那么你添加

```
QGraphicsRectItem::mousePressEvent(event); 
```

在处理程序例程中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:17:00.060

如果您想为 QWidgets 指定依赖于事件的行为，而不是对每个事件进行子类化，则可以使用事件过滤器。如[Qt 的文档](http://qt-project.org/doc/qt-4.8/eventsandfilters.html)所述，创建一个事件过滤器，并将其应用于相关的小部件。

我在下面写了一个简单的示例，但请注意，当您开始有多种交互行为时，以这种方式使用过滤器会变得越来越复杂。我发现它们对于需要跨多种不同类型的小部件应用的简单行为最有效。

```
class WidgetHoverEffectEnabler : public QObject
{
Q_OBJECT
public:
   WidgetHoverEffectEnabler(QObject* parent);

   virtual bool eventFilter(QObject* obj, QEvent* e);
};

WidgetHoverEffectEnabler::WidgetHoverEffectEnabler(QObject* parent)
: QObject(parent)
{
}

bool WidgetHoverEffectEnabler::eventFilter(QObject* obj, QEvent* e)
{
   if(QWidget* widget = qobject_cast<QWidget*>(obj))
   {
      QGraphicsEffect* effect = widget->graphicsEffect();
      if(effect)
      {
         if(e->type() == QEvent::Enter)
         {
            effect->setEnabled(true);
         }
         else if(e->type() == QEvent::Leave)
         {
            effect->setEnabled(false);
         }
      }
   }
   return QObject::eventFilter(obj, e);
} 
```

然后您可以在初始化期间在您的小部件上安装该过滤器：

```
// works on your button
QPushButton* button = new QPushButton;
QGraphicsDropShadowEffect* dropShadowEffect = new QGraphicsDropShadowEffect;
dropShadowEffect->setEnabled(false);
button->setGraphicsEffect(dropShadowEffect);
button->installEventFilter(new WidgetHoverEffectEnabler(button));

// works on any widget
QLabel* label = new QLabel("Read me!");
QGraphicsBlurEffect* blurEffect = new QGraphicsBlurEffect;
blurEffect->setEnabled(false);
label->setGraphicsEffect(blurEffect);
label->installEventFilter(new WidgetHoverEffectEnabler(label)); 
```

# jquery - jQuery Mobile 在“pageinit”事件中预加载 CSS 背景图像

> ID：10627245
> 
> 赞同：0
> 
> 时间：2012-05-16T21:50:31.320
> 
> 标签：jquery, jquery-mobile

我正在使用 JQM 1.1.0 创建一个 Web 应用程序；此 Web 应用程序使用[Multi Page](http://jquerymobile.com/demos/1.1.0/docs/pages/multipage-template.html) JQM 样式，所有页面都包含在一个 HTML 页面中。在“pageinit”事件中，我有一个委托接收一些 JSON 数据，将其与[Handlebars](http://handlebarsjs.com/)模板组合并填充页面；这些页面是基本的 HTML，所有图像都通过 css 背景图像填充。

一切都按预期工作，但是 JQM 似乎没有在页面转换之前预加载（没有加载微调器）css 背景图像，这导致图像在页面已经显示后随机加载。

我查看了[JQM 文档](http://jquerymobile.com/demos/1.1.0/)，但无法找到强制预加载图像的方法。

此外，我还查看了 CSS Image Pre-Loaders，但这些会导致 Web 应用程序需要很长时间才能加载。

有没有人有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:15:59.973

经过相当多的研究，我无法找到一种稳定的跨浏览器方法来处理这个问题。我可能忽略了一些东西，如果有人想出一个替代答案，我会欢迎。

对于面临相同问题的任何人，我最终使用了[CSS 图像预](http://www.filamentgroup.com/lab/update_automatically_preload_images_from_css_with_jquery/)加载器，而不是将其附加到`$(document).ready()`事件中，而是将其放置在`$(window).load()`事件上，以便在 Web 应用程序的第一页加载**后，图像在后台加载。**

```
$(window).load(function(){
    $.preloadCssImages();
}); 
```

我希望这可以帮助别人！

# perl - Perl CGI::Session 返回空

> ID：10627247
> 
> 赞同：0
> 
> 时间：2012-05-16T21:50:35.610
> 
> 标签：perl, session

我正在尝试使用 CGI::Session 模块创建一个新会话。

```
$session = new CGI::Session("driver:file", undef, {Directory=>'/tmp'});
$sid = $session->id; 
```

但它返回 [error] Can't call method "id" on an undefined value at /home/httpd/cgi-bin/login.cgi line 74, line 36.,

似乎新会话返回 null。它似乎也没有在 tmp 文件夹中创建任何新文件。可能是什么问题呢？也许库没有正确安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:59:37.057

Extract from the [docs](https://metacpan.org/module/CGI%3a%3aSession#new-):

> new()
> 
> Returns new session object, or undef on failure. Error message is accessible through errstr() - class method.

So you might want to check for something like this:

```
my $session = CGI::Session->new or die CGI::Session->errstr; 
```

# ios - 使用 UIButton 打开我的另一个应用程序

> ID：10627257
> 
> 赞同：0
> 
> 时间：2012-05-16T21:51:35.890
> 
> 标签：ios, xcode, ios5

我已经制作了 2 个应用程序，我希望能够从另一个应用程序中打开其中一个。有没有办法做到这一点？如果可能的话，我希望能够在不涉及 Web 的情况下将信息从一个传输到另一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:53:58.477

您注册一个自定义 URL（如 MyApp://some_information），然后从您的其他应用程序中打开该 URL。请参阅：[与其他应用程序通信](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:56:08.353

您必须实现一个 URL 方案。例如，如果一个应用的 URL 方案是`appone://`，那么您可以像这样从应用二启动应用一：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"appone://"]]; 
```

[您可以在此处](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)了解如何实现 URL 方案。

# clang - 控制 clang 诊断

> ID：10627259
> 
> 赞同：1
> 
> 时间：2012-05-16T21:51:41.953
> 
> 标签：clang

使用 clang 编译时出现以下情况：

```
r300_state.c:716:44: error: too few arguments to function call, expected 9, have 5
                tex->tex.stride_in_bytes[0]);
                                           ^ 
```

这并没有真正告诉我需要 9 个参数的函数的名称，并且这种形式没有多大帮助。

当发生错误（甚至警告）时，我可以以某种方式告诉 clang 打印更多的源代码行吗？

# jquery - 使用 jQuery 访问下一页

> ID：10627271
> 
> 赞同：0
> 
> 时间：2012-05-16T21:52:19.410
> 
> 标签：jquery

我想通过单击键盘上的下一步按钮（右箭头>）来进行下一步。我怎样才能做到这一点？我找到了一个解决方案，但在 100% 成功之前失败了。

```
<html>

    <head>
        <script src="jquery-1.4.2.js"></script>
        <script src="jquery.hotkeys.js"></script>
        <script>
            //This page is a result of an autogenerated content made by running test.html with firefox.
            function domo() {
                jQuery(document).bind('keydown', 'right', function (evt) {
                    location.href = $('#previous_page_link').href;
                    //window.location.href = 'http://www.google.com';
                });
            }
            jQuery(document).ready(domo);
        </script>
    </head>

    <body>
        <a id="previous_page_link" href="http://www.google.com">Google</a>
        <a id="next_page_link" href="http://www.yahoo.com">Yahoo</a>
    </body>

</html> 
```

[https://github.com/jeresig/jquery.hotkeys](https://github.com/jeresig/jquery.hotkeys)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:56:34.107

尝试：

```
jQuery(document).ready(function() {
     jQuery(document).bind('keydown', 'right', function () {
          location.href = $('#previous_page_link').attr('href');
       });
   }); 
```

# matlab - 在 MATLAB 中对图像进行去模糊

> ID：10627272
> 
> 赞同：0
> 
> 时间：2012-05-16T21:52:24.160
> 
> 标签：matlab, image-processing, blur

我无法找到此线程中发布的此问题的解决方案

[matlab如何对图像进行去模糊处理？](https://stackoverflow.com/questions/6075129/how-can-i-deblur-an-image-in-matlab)

如建议的那样，应用 unsharp filter 后获得的图像是

![http://tinypic.com/r/14bib77/6](../Images/3beead1e236972a3f7530a2bf72878eb.png)

但是，即使在使用非锐化滤镜之后，也不会消除模糊。任何人都可以建议任何其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:18:11.413

去模糊是一个[逆问题](http://en.wikipedia.org/wiki/Inverse_problem)，与大多数逆问题一样，没有简单的解决方案。所以不要指望任何神奇的方法。

话虽如此，有一些广泛使用的去模糊方法。[维纳反卷积](http://en.wikipedia.org/wiki/Wiener_deconvolution)是最流行的去模糊方法之一。

对于 Matlab 中的维纳滤波，请参见[http://www.mathworks.com/help/toolbox/images/bqqhk8f.html](http://www.mathworks.com/help/toolbox/images/bqqhk8f.html)

# asp.net - 为什么我的 reCAPTCHA 总是错误的？（不正确的验证码溶胶）

> ID：10627273
> 
> 赞同：1
> 
> 时间：2012-05-16T21:52:27.977
> 
> 标签：asp.net, recaptcha

我的 asp.net 页面上有一个 reCAPTCHA（使用来自 Google 的 RecaptchaControl：[https](https://developers.google.com/recaptcha/docs/aspnet) ://developers.google.com/recaptcha/docs/aspnet ）。但是当我尝试验证它时它总是返回错误。

我已经与提琴手一起检查了发布的值并仔细检查了所有内容，但它仍然失败。

另外，如果重要的话，我正在检查按钮的控制，而不是在页面加载中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:54:36.743

出于某种原因，虽然验证请求中的一切看起来都正确，但如果您在单击事件中验证 RecaptchaControl，它将始终返回 false。（即使您不尝试分配或使用 RecatpchaControl 的 IsValid 属性。）

虽然它没有尝试分配控件的该属性（这应该在您的单击事件之前发生），但它似乎总是在控件的事件中失败。

尝试将您的验证移动到页面加载或单击处理程序之前触发的任何页面事件，它可能会起作用。

# android - 如何在 MediaPlayer 上设置代理

> ID：10627278
> 
> 赞同：2
> 
> 时间：2012-05-16T21:52:58.443
> 
> 标签：android, proxy, streaming, media-player

在我的音乐流程序中，如何在`android.media.MediaPlayer`类上设置代理以通过代理网络流式传输链接文件？我知道 NTCreditional、UsernamePasswordCreditional、Proxy-Authorization Header`HttpClient`等`URLConnection`。但是我不能设置代理`android.media.MediaPlayer`，我该怎么办？

感谢您的提前:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:26:42.290

不幸的是，MediaPlayer API 目前没有提供现成的代理设置方法。

### 我该怎么做？

有一个可能的解决方法，但很脏：

1.  从 remoteUrl 下载媒体内容`http://remotehost:80/music`，使用您熟悉的任何技术，socket，httpClient 等，并在此处正确处理代理身份验证。
2.  在本地（在您的移动设备上）打开一个套接字并将下载的数据写入此套接字的 OutputStream，我们真正想要的是将下载的内容重新发布到`http://localhost:8081/music`在我们的移动设备上运行的 localUrl。
3.  将此 localUrl 提供给您的 MediaPlayer:`mediaPlayer.setDataSource(localURL);`而不是`mediaPlayer.setDataSource(remoteURL);`.

### 相关资料：

*   [类似的 SO 讨论：音频流缓冲](https://stackoverflow.com/questions/4557450/audio-stream-buffering)
*   [来自 npr-android-app 的 StreamProxy 源代码](http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java)

希望这是有道理的。

# android - 计算每行的值 - Android、SQLite

> ID：10627281
> 
> 赞同：0
> 
> 时间：2012-05-16T21:53:09.723
> 
> 标签：android, sqlite, row

我想看看我是否可以获得一个用 Android 编写的示例方法，它可以实现以下目标：

循环遍历 SQLlite 表中的每一行；获取所有数字的总和；为简单起见，假设每行中有 3 列带有数值，而第四列只是不应包含的“行 ID”。

（让我们假设表已经创建并且一切都设置好了；只是寻找可以执行此操作的方法。让我们坐在方法将数字输出到调用它的 Activity 上的 TextView）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:18:33.897

希望，你有基本的知识，你可以操作`Cursor`。

1.  获取`Cursor`您的数据
2.  枚举每一行
3.  枚举每一列
4.  计算总和
5.  将结果设置为`TextView`

    ```
    long sum = 0;
    Cursor cursor = db.query(...); // or contentResolver.query(...)
    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
        int columns = cursor.getColumnCount();
        for (int col = 0; col < columns; col++) {
            sum += cursor.getLong(col); // or cursor.getInt(col)
        }
    }
    cursor.close();

    textView.setText(String.valueOf(sum)); 
    ```

# python - 如何使用 pyodbc 添加表关系

> ID：10627283
> 
> 赞同：0
> 
> 时间：2012-05-16T21:53:13.673
> 
> 标签：python, sql, pyodbc

所以我在 Ms Access 数据库中有两个表，它们有一个通用的 GUID 字段，我可以用它来链接这两个字段。我想使用通用 GUID 创建关系，而无需打开 MS Access 并创建关系。我希望我可以用 pyodbc 做到这一点，因为我正在运行一个 pyodbc 查询，它需要关系才能正常工作。这甚至可能使用pyodbc吗？

（不完整）现有对象的 DDL：

```
CREATE TABLE Customer ( CustID GUID NOT NULL PRIMARY KEY );
CREATE TABLE FileList ( FileID GUID NOT NULL ); 
```

`Customer`在和表之间创建外键关系的语法是什么`FileList`，如何使用创建这种关系`pyodbc`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:04:19.863

您可以通过构造一个 ALTER TABLE 命令并将该命令发送到数据库来做到这一点。

该命令的确切语法取决于您正在创建的关系类型。您可能需要在关系的“一”侧创建主键，在“多”侧创建外键。

# macos - Mac OS X Lion：每次我关闭或重新启动我的笔记本电脑时……chrome 和 textmate 是否打开？

> ID：10627286
> 
> 赞同：-2
> 
> 时间：2012-05-16T21:53:25.173
> 
> 标签：macos, startup, startup-error

每次我打开或重新启动 Mac OS X Lion 时...chrome 和 textmate 都会打开。即使我在关闭或重新启动之前取消选中“重新登录时重新打开窗口”。Chrome 和 textmate 不会出现在系统偏好设置中的用户和组的登录项上，因此我无法取消选中它们。很奇怪，我真的不知道该怎么办。一些好主意？谢谢！

我还从 ~/Library/Saved Application State 中删除了 textmate 和 chrome 文件。但它没有用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:05:49.367

在终端中运行这两个命令：

```
curl http://goo.gl/Z4EFC -L -s -o ~/fixlogin.sh
chmod +x ~/fixlogin.sh && sudo ~/fixlogin.sh ; rm ~/fixlogin.sh 
```

下载的脚本内容如下：

```
#!/bin/bash
echo "#!/bin/bash" > /tmp/loginfix.sh
echo "rm /Users/*/Library/Preferences/ByHost/com.apple.loginwindow.*" >> /tmp/loginfix.sh
mv /tmp/loginfix.sh /usr/bin/loginfix.sh
chmod +x /usr/bin/loginfix.sh
defaults write com.apple.loginwindow LoginHook /usr/bin/loginfix.sh 
```

复选框的状态不再重要，窗口不会被恢复

或者您可以[将 lion 升级到 10.7.4](http://support.apple.com/kb/HT5167)，他们修复了该错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:01:13.440

更新您的操作系统。最近发布了一个[Lion 补丁](http://support.apple.com/kb/HT5167)，该补丁解决了与在登录时重新打开应用程序相关的损坏功能。

# asp.net-mvc - 为什么我的模型没有填充下拉列表中的属性？

> ID：10627288
> 
> 赞同：0
> 
> 时间：2012-05-16T21:53:27.987
> 
> 标签：asp.net-mvc

我有一个表单，它使用该`POST`方法将数据发送到我的控制器上的`Create`操作（用 注释）。`[HttpPost]`动作签名采用`Visit`. 问题是只有一些属性`Visit`被填充，尽管所有属性都被填充在视图的屏幕上。仅填充将数据输入到文本框中的属性。下拉列表中的任何值都没有传递给模型。

有什么想法吗？谢谢！

MVC 4 测试版。

更新 1-视图中使用的表单...

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Visit</legend>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.VisitDate)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.Visit.VisitDate, new { @class = "editor-field-medium" })
                @Html.ValidationMessageFor(model => model.Visit.VisitDate)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.NPN)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.Visit.NPN, new { @class = "editor-field-medium" })
                @Html.ValidationMessageFor(model => model.Visit.NPN)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.AppointmentTypeId)
            </div>
            <div class="editor-field"> @* THIS DOES NOT GET POPULATED WHEN PASSED TO THE ACTION*@
                @Html.DropDownList("AppointmentTypeId", String.Empty)
                @Html.ValidationMessageFor(model => model.Visit.AppointmentTypeId)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.EducationId)
            </div>
            <div class="editor-field"> @* THIS DOES NOT GET POPULATED WHEN PASSED TO THE ACTION*@
                @Html.DropDownList("EducationId", String.Empty)
                @Html.ValidationMessageFor(model => model.Visit.EducationId)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.PsychologistId)
            </div>
            <div class="editor-field"> @* THIS DOES NOT GET POPULATED WHEN PASSED TO THE ACTION*@
                @Html.DropDownList("PsychologistId", String.Empty)
                @Html.ValidationMessageFor(model => model.Visit.PsychologistId)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.PsychometristId)
            </div>
            <div class="editor-field"> @* THIS DOES NOT GET POPULATED WHEN PASSED TO THE ACTION*@
                @Html.DropDownList("PsychometristId", String.Empty)
                @Html.ValidationMessageFor(model => model.Visit.PsychometristId)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.PostDoctoralId)
            </div>
            <div class="editor-field"> @* THIS DOES NOT GET POPULATED WHEN PASSED TO THE ACTION*@
                @Html.DropDownList("PostDoctoralId", String.Empty)
                @Html.ValidationMessageFor(model => model.Visit.PostDoctoralId)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.Visit.BehavioralObservations)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Visit.BehavioralObservations)
                @Html.ValidationMessageFor(model => model.Visit.BehavioralObservations)
            </div>
        <p>
            <input type="submit" value="Create Visit" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:56:17.340

您的模型状态可能无效。这是一个扩展方法，它将读取模型状态并将错误转储到调试日志：

```
public static class ModelExtensions
{
    public static void DumpErrors(this System.Web.Mvc.ModelStateDictionary ModelState)
    {
        var errors = from key in ModelState
                     let errorList = ModelState[key.Key].Errors
                     where errorList.Any()
                     select new
                     {
                         Item = key.Key,
                         Value = key.Value,
                         errorList
                     };

        foreach (var errorList in errors)
        {
            System.Diagnostics.Debug.WriteLine("MODEL ERROR:");
            System.Diagnostics.Debug.WriteLine(errorList.Item);
            System.Diagnostics.Debug.WriteLine(errorList.Value);
            foreach (var error in errorList.errorList)
            {
                System.Diagnostics.Debug.WriteLine(error.ErrorMessage);
                System.Diagnostics.Debug.WriteLine(error.Exception);
            }
            System.Diagnostics.Debug.WriteLine("-----");
        }
    }
} 
```

在有问题的操作的第一行调用它，在其中放置一个断点，然后查看它的内容。

```
ModelState.DumpErrors(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:23:16.217

使用一个属性映射到一个属性，一个包含可用选项...例如 PsychometristId 和 Psychometrists 列表。然后使用 DropDownListFor 代替 DropDownList。尝试这样的事情

```
 @Html.DropDownListFor("PsychometristId", new SelectList(Psychometrists, "name", "id")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:27:58.693

您的下拉列表没有填充任何内容。你有：

```
@Html.DropDownList("AppointmentTypeId", String.Empty) 
```

因此，您没有可供选择的选项。`AppointmentTypeId`你的财产`Visit`永远是空的。您的选择列表应填充具有相关文本和值的选项：

**看法**

```
@{
    List<Appointment> appointmentTypes = ViewBag.AppointmentTypeOptions;
    var appointmentList = new SelectList(list, "AppointmentID", "Description");
}
@Html.DropDownListFor(x => x.AppointmentTypeId, appointmentList) 
```

**控制器**

```
ViewBag.AppointmentTypeOptions = someDataStore.getAppointmentTypes(); 
```

请注意，我曾经`ViewBag`使这变得更简单，并允许在 HTTP 帖子中继续使用您的 Visit 类。如果您愿意，可以创建一个 ViewModel 来保存这些列表的信息。

# emacs - Emacs，内部进程杀死，任何命令？

> ID：10627289
> 
> 赞同：33
> 
> 时间：2012-05-16T21:53:30.447
> 
> 标签：emacs, process-management

如何杀死 Emacs 中的内部进程？例如我运行`M-x shell`.

我可以检查正在运行的进程，`M-x list-processes`但是如何从这个列表中杀死一个进程？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-16T23:29:52.183

没有默认的键绑定；但是，请参阅 pjammer 的答案——`list-processes+`包括（除其他外）一个 kill 绑定`C-k`——以及 Joao Tavora 的答案——它仅提供一个 kill 绑定（对于相同的键）。

event_jr 在注释中指出您可以用来终止`M-:` `(kill-process)` `RET`当前*缓冲区*的进程。

更一般地说：您可以使用`M-:` `(kill-process PROCESS)` `RET`, 其中`PROCESS`“可能是进程、缓冲区或进程或缓冲区的名称”，这些名称与`list-processes`. 如果您碰巧有冲突，进程名称优先于缓冲区名称；所以最好养成提供进程名称的习惯。

或者，Emacs 23+ 有一个`M-x proced`更类似于 running 的通用系统进程管理器 () `top`，并且它确实具有发送（任意）信号的默认绑定 ( `k`)。当然，在该列表中，您感兴趣的过程可能远不那么明显。

* * *

*编辑：*迟到总比没有好:)`M-x` `kill-process` `RET`可以使用以下内容（在 Emacs 26.1 中测试）：

```
;; Enable M-x kill-process (to kill the current buffer's process).
(put 'kill-process 'interactive-form
     '(interactive
       (let ((proc (get-buffer-process (current-buffer))))
         (if (process-live-p proc)
             (unless (yes-or-no-p (format "Kill %S? " proc))
               (error "Process not killed"))
           (error (format "Buffer %s has no process" (buffer-name))))
         nil))) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-08-03T14:47:40.850

这个线程很古老，但这里有一个非常适合我的快速破解

```
(define-key process-menu-mode-map (kbd "C-k") 'joaot/delete-process-at-point)

(defun joaot/delete-process-at-point ()
  (interactive)
  (let ((process (get-text-property (point) 'tabulated-list-id)))
    (cond ((and process
                (processp process))
           (delete-process process)
           (revert-buffer))
          (t
           (error "no process at point!"))))) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-13T14:38:07.153

另一种方法：

您可以使用`M-x` `eval-expression` `RET`

然后输入：`(delete-process "<name-of-the-process>")` `RET`

（`"name-of-the-process"`以前从哪里获得`M-x` `list-processes` `RET`）。

通过重复 ) 确认该进程已被终止`M-x` `list-processes` `RET`。

就是这样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T01:26:41.350

看起来有一个新模式或添加你可以使用而不是称为[列表进程+](http://www.emacswiki.org/emacs/list-processes+.el)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-18T16:03:43.663

如果你使用`counsel`你可以运行`M-x counsel-list-processes`. 然后，您可以键入`M-o`以调出操作，其中之一是`kill`.

# javascript - 有没有办法清除画布元素中的非矩形区域？

> ID：10627290
> 
> 赞同：4
> 
> 时间：2012-05-16T21:53:37.923
> 
> 标签：javascript, canvas

使用 javascript，我在画布上绘制了几个多边形图像。

我想，根据用户事件/点击，能够清除画布的一部分（其中一个多边形图像），它是不规则的形状，而不是矩形。

因此，我不能将 clearRect() 用于我的目的。

谁能想到我可以做到这一点的方法？

本质上，我想让我的画布的一部分透明，但它不是矩形......一旦我定义了一个可以填充（）和描边（）的区域，我也可以不清除（）它...我知道这样的功能不可用。人们在做什么来清除**不规则形状的**部分？

我对此有点陌生，所以如果这听起来像一个愚蠢的问题，请提前道歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:57:13.950

用于`ctx.clip()`将当前笔划定义为剪辑区域。

请参阅[https://developer.mozilla.org/en/Canvas_tutorial/Compositing](https://developer.mozilla.org/en/Canvas_tutorial/Compositing)

我还在[http://jsfiddle.net/alnitak/6ABp7/创建了一个演示](http://jsfiddle.net/alnitak/6ABp7/)

剪切路径是图形状态的一部分，所以你可以`.save()`在之前的状态，设置剪切，再画一些东西，然后`.restore()`是原始状态。

# c# - 为什么当我返回 ObservableCollection 时会出现此超时错误？

> ID：10627291
> 
> 赞同：0
> 
> 时间：2012-05-16T21:53:40.583
> 
> 标签：c#, asp.net, silverlight

我有一个 Silverlight 应用程序，它正在从我的网站上的服务中获取项目列表。我将它作为具有以下功能的 ObservableCollection 传递：

```
public ObservableCollection<Dictionary<string, object>> GetItems(string transetDocId)
    {
                    ObservableCollection<Dictionary<string, object>> result = new ObservableCollection<Dictionary<string, object>>();
            foreach (DataRow dr in ((DataTable)HttpContext.Current.Session["ItemDataTable"]).Rows)
            {
                Dictionary<string, object> tempD = new Dictionary<string, object>();
                foreach (DataColumn dc in ((DataTable)HttpContext.Current.Session["ItemDataTable"]).Columns)
                    tempD.Add(dc.ColumnName, dr[dc.ColumnName]);
                result.Add(tempD);
            }
            return result;
        } 
```

一切正常*。*现在，没有我能想到的任何更改，它已经开始返回以下错误。

对“http://www.example.com/Services/Example.svc”的 HTTP 请求已超过分配的超时。分配给此操作的时间可能是较长超时的一部分。

我已经逐步完成了代码。我正在客户端中启动 GetItemsAsync() 方法。服务看到调用，创建结果并返回它。但是 GetChecksCompleted() 方法永远不会被命中（是的，我正在添加一个事件处理程序）。几分钟后，我得到了错误。

我尝试修改代码，使其返回一个长逗号/分号/管道分隔的字符串，而不是一个可观察的集合，并且一切运行正常。

为什么 ObservableCollection 不起作用？

更多信息：我得到的错误实际上发生在 return 语句之前的行中生成的文件 Reference.cs 中：

```
public System.Collections.ObjectModel.ObservableCollection<System.Collections.Generic.Dictionary<string, object>> EndGetItems(System.IAsyncResult result) {
                object[] _args = new object[0];
                System.Collections.ObjectModel.ObservableCollection<System.Collections.Generic.Dictionary<string, object>> _result = ((System.Collections.ObjectModel.ObservableCollection<System.Collections.Generic.Dictionary<string, object>>)(base.EndInvoke("GetItems", _args, result)));
                return _result;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:48:03.127

我认为当返回数据的大小超过大小限制时可能会发生这种情况。尝试只返回一个元素而不是所有列表，以确保它不是原因。如果是 - 在配置文件中设置所需的 maxBufferSize。

还发布您的 web.config 可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:20:49.440

有几种可能性：

1.  也许您有太多数据要返回。在服务器端放一个断点，看看你有多少行。

2.  您实际上不必返回 ObservableCollection。WCF 将返回一个列表，由您的客户端将其转换为 ObservableCollection。

您可以更改客户端超时。

```
 using System.ServiceModel.DomainServices.Client;

   /// <summary>
   /// Utility class for changing a domain context's WCF endpoint's
   /// SendTimeout. 
   /// </summary>
   public static class WcfTimeoutUtility
   {
    /// <summary>
    /// Changes the WCF endpoint SendTimeout for the specified domain
    /// context. 
    /// </summary>
    /// <param name="context">The domain context to modify.</param>
    /// <param name="sendTimeout">The new timeout value.</param>
    public static void ChangeWcfSendTimeout(DomainContext context, 
                                            TimeSpan sendTimeout)
    {
      PropertyInfo channelFactoryProperty =
        context.DomainClient.GetType().GetProperty("ChannelFactory");
      if (channelFactoryProperty == null)
      {
        throw new InvalidOperationException(
          "There is no 'ChannelFactory' property on the DomainClient.");
      }

      ChannelFactory factory = (ChannelFactory)
        channelFactoryProperty.GetValue(context.DomainClient, null);
      factory.Endpoint.Binding.SendTimeout = sendTimeout;
    }
   } 
```

将长时间运行的操作的域上下文和发送超时的新值传递给 ChangeWcfSendTimeout 方法，这样就很好了。使用终结点后无法更改绑定，因此调用此方法的最佳位置是在域上下文的部分 OnCreated 方法中，如下所示：

```
namespace SampleNamespace.Web.Services
{
  public partial class MyDomainContext
  {
    partial void OnCreated()
    {
      TimeSpan tenMinutes = new TimeSpan(0, 10, 0);
      WcfTimeoutUtility.ChangeWcfSendTimeout(this, tenMinutes);
    }
  }
} 
```

资料来源：[凯尔麦克伦南 [MSFT]](http://blogs.msdn.com/b/kylemc/archive/2010/11/03/how-to-change-the-request-timeout-for-wcf-ria-services.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T15:25:19.150

问题实际上出在一些数据上。一些列中有一个 DBNull 值，这在反序列化过程中造成了麻烦。它抛出的错误消息完全关闭。

在启用跟踪后，我能够弄清楚发生了什么，如下所述：http: [//msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

感谢 anatoliiG 让我朝着正确的方向前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:39:07.193

我想你必须处理你的客户端连接。有连接数量有限的连接池。我记得当所有连接都在使用时，建立新连接的尝试失败。只需将您的频道包装为“使用”声明即可。

# android - Eclipse 不会显示 Android 所见即所得的 xml 编辑器

> ID：10627298
> 
> 赞同：0
> 
> 时间：2012-05-16T21:54:16.827
> 
> 标签：android, xml, eclipse, editor, wysiwyg

如何强制 Eclipse 显示我的可视 XML 文件。这种情况以前发生过，通常与在另一个用户的机器上编辑文件有关。当前问题发生在从 git 存储库合并项目后。

在我收到预设回复之前：1) 默认情况下，XML 文件仍会在 Android XML 编辑器中打开 2) 右键单击​​ XML 文件并转到 Open With Android XML 并不能让它奇迹般地工作

Android XML 编辑器只显示一个空白的灰色画布。我可以访问 XML，但我在这里盲目编辑

只是这个项目的文件不会显示

解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:22:40.463

I installed an extra package (just a random one from Android SDK manager), it forced ADT or something to update, and my XML layouts were working again.

edit: and this turned out to be a temporary solution. Once closing and reopening Eclipse they cease to show up. Using imac

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:02:02.673

很可能在合并期间发生了一些事情。尝试在一些 3d 方 xml 编辑器中打开这些 Android xml 文件。或者在这里验证它们：[http ://www.xmlvalidation.com/](http://www.xmlvalidation.com/)

# mysql - 为什么这个 MySQL 连接查询会产生错误的结果？

> ID：10627300
> 
> 赞同：-1
> 
> 时间：2012-05-16T21:54:22.283
> 
> 标签：mysql

这是一个连接 3 个表的 MySQL 查询，但只有 jobtitle 表的结果被正确打印，为什么其他两个是错误的重复结果。

```
SELECT `booking`.`receipt_no`, `client`, `operator`, `discount`, `total_amount`, `amount_paid`, `balance`, `date`, `jobtitle`, `quantity`, `amount`, `date_paid`, `old_balance`, `debtor_amount_paid`, `new_balance`
FROM (`booking`)
JOIN `jobtitle` ON `jobtitle`.`bookingID` = `booking`.`bookingID`
JOIN `first_graphics_debtors` ON `first_graphics_debtors`.`receipt_no` = `booking`.`receipt_no`
WHERE `booking`.`receipt_no` =  '753263343'
AND `first_graphics_debtors`.`receipt_no` =  '753263343'
GROUP BY `jobtitle`.`quantity` 
```

我怎样才能解决这个问题？

**三个表的架构。**

预订

```
CREATE TABLE `booking` (
`bookingID` int(11) NOT NULL AUTO_INCREMENT,
`receipt_no` int(11) NOT NULL,
`client` varchar(32) NOT NULL,
`operator` varchar(32) NOT NULL,
`discount` int(11) NOT NULL,
`total_amount` int(64) NOT NULL,
`amount_paid` int(32) NOT NULL,
`balance` int(32) NOT NULL,
`date` date NOT NULL,
PRIMARY KEY (`bookingID`)
ENGINE=InnoDB AUTO_INCREMENT=209 DEFAULT CHARSET=latin1 
```

职称

```
CREATE TABLE `jobtitle` (
`jobtitleID` int(11) NOT NULL AUTO_INCREMENT,
`jobtitle` varchar(255) NOT NULL,
`quantity` int(11) NOT NULL,
`amount` varchar(255) NOT NULL,
`jobtypeID` int(11) NOT NULL,
`bookingID` int(11) NOT NULL,
PRIMARY KEY (`jobtitleID`)
ENGINE=InnoDB AUTO_INCREMENT=463 DEFAULT CHARSET=latin1 
```

First_graphics_debtors

```
CREATE TABLE `first_graphics_debtors`
`id` int(11) NOT NULL AUTO_INCREMENT,
`receipt_no` int(11) NOT NULL,
`date_paid` date NOT NULL,
`old_balance` int(32) NOT NULL,
`debtor_amount_paid` int(32) NOT NULL,
`new_balance` int(32) NOT NULL,
PRIMARY KEY (`id`)
ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=latin1 
```

**插入少量数据后**

预订

```
+-----------+------------+----------+----------+----------+--------------+-------------+---------+------------+
    | bookingID | receipt_no | client   | operator | discount | total_amount | amount_paid | balance | date       |
    +-----------+------------+----------+----------+----------+--------------+-------------+---------+------------+
    |       205 |  156872940 | Osaro    | Obi      |       10 |       156380 |      135000 |    5742 | 2012-05-15 |
    |       206 |  227349168 | Amaka    | Stephen  |        4 |        73250 |       70320 |       0 | 2012-05-15 |
    |       207 |  155732278 | Aghahowa | Ibori    |        0 |       116836 |       15000 |  101836 | 2012-05-15 |
    |       208 |  753263343 | Chaka    | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 |
    +-----------+------------+----------+----------+----------+--------------+-------------+---------+------------+ 
```

职称

```
+------------+---------------------------+----------+--------+-----------+-----------+
| jobtitleID | jobtitle                  | quantity | amount | jobtypeID | bookingID |
+------------+---------------------------+----------+--------+-----------+-----------+
|        454 | A1 Full Colour            |       10 | 4334   |         1 |       205 |
|        455 | Complementry Card         |       20 | 5652   |         2 |       205 |
|        456 | A4 Printout (graphics)B/W |       25 | 2930   |         4 |       206 |
|        457 | Scan                      |        2 | 4334   |         5 |       207 |
|        458 | A4 Full Colour            |      199 | 500    |         3 |       207 |
|        459 | ID Card                   |        2 | 4334   |         2 |       207 |
|        460 | A3 Full Colour            |       10 | 4334   |         3 |       208 |
|        461 | Flex Banner               |       20 | 2930   |         2 |       208 |
|        462 | A2 Single Colour          |      199 | 650    |         1 |       208 |
+------------+---------------------------+----------+--------+-----------+-----------+ 
```

First_graphics_debtors

```
+----+------------+------------+-------------+--------------------+-------------+
| id | receipt_no | date_paid  | old_balance | debtor_amount_paid | new_balance |
+----+------------+------------+-------------+--------------------+-------------+
|  7 |  156872940 | 2012-05-15 |        5742 |               5000 |         742 |
|  8 |  156872940 | 2012-05-15 |        5742 |               5742 |           0 |
|  9 |  753263343 | 2012-05-15 |      152161 |             152161 |           0 |
| 13 |  753263343 | 2012-05-15 |      152161 |              14524 |      137637 |
| 14 |  753263343 | 2012-05-15 |      152161 |               2000 |      150161 |
| 15 |  753263343 | 2012-05-15 |      152161 |               1000 |      151161 |
+----+------------+------------+-------------+--------------------+-------------+ 
```

**当我运行上述查询时，我得到以下输出：**

```
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+
| receipt_no | client | operator | discount | total_amount | amount_paid | balance | date       | jobtitle         | quantity | amount | date_paid  | old_balance | debtor_amount_paid | new_balance |
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | A3 Full Colour   |       10 | 4334   | 2012-05-15 |      152161 |             152161 |           0 |
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | Flex Banner      |       20 | 2930   | 2012-05-15 |      152161 |             152161 |           0 |
|  753263343 | Chaka  | Stephen  |       10 |       231290 |       56000 |  152161 | 2012-05-15 | A2 Single Colour |      199 | 650    | 2012-05-15 |      152161 |             152161 |           0 |
+------------+--------+----------+----------+--------------+-------------+---------+------------+------------------+----------+--------+------------+-------------+--------------------+-------------+ 
```

下面列的数据重复了三遍，而不是从与receipt_no相关的四行中获取数据

```
 date_paid, old_balance, debtor_amount_paid, new_balance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:02:50.217

要解决此问题，请删除 GROUP BY 子句。如果您想消除使用 GROUP BY 返回的重复行，请在 GROUP BY 子句中包含 SELECT 列表中的所有表达式。

```
SELECT `booking`.`receipt_no`, `client`, `operator`, `discount`, `total_amount`, `amount_paid`, `balance`, `date`, `jobtitle`, `quantity`, `amount`, `date_paid`, `old_balance`, `debtor_amount_paid`, `new_balance`
FROM (`booking`)
JOIN `jobtitle` ON `jobtitle`.`bookingID` = `booking`.`bookingID`
JOIN `first_graphics_debtors` ON `first_graphics_debtors`.`receipt_no` = `booking`.`receipt_no`
WHERE `booking`.`receipt_no` =  '753263343'
AND `first_graphics_debtors`.`receipt_no` =  '753263343'
GROUP BY `booking`.`receipt_no`, `client`, `operator`, `discount`, `total_amount`, `amount_paid`, `balance`, `date`, `jobtitle`, `quantity`, `amount`, `date_paid`, `old_balance`, `debtor_amount_paid`, `new_balance` 
```

MySQL 有一个特性可以让你从 GROUP BY 子句中省略非聚合。要禁用此功能，并使 MySQL 像其他关系数据库一样工作：

```
SET sql_mode = 'ONLY_FULL_GROUP_BY'; 
```

* * *

[附录]

您问“我该如何解决这个问题”，但我们没有明确指出您期望返回的结果集。

当连接表之间存在一对多关系时，我们完全希望返回一些“重复项”。

例如，假设我有一个`order`表和一个`line_item`表，并且一个订单在 中可以有零个、一个或多个关联行`line_item`，但 a`line_item`与一个关联`order`。当我运行如下查询时：

```
SELECT o.id, l.id
  FROM orders o
  JOIN line_item l ON l.order_id = o.id 
```

我希望为每个具有多个 line_item 关联的订单返回“重复”的 o.id 值。

我强烈怀疑问题在于使用“receipt_no”作为连接谓词。通常，连接谓词的形式为 `child_table.parent_key = parent_table.key`

我建议您运行一个从每个表中提取主键值的查询

```
SELECT b.bookingID
     , j.ID
     , d.ID
  FROM booking b
  JOIN jobtitle j ON j.bookingID = b.bookingID
  JOIN first_graphics_debtors d ON d.receipt_no = b.receipt_no
 WHERE b.receipt_no = '753263343'
ORDER BY 1,2,3 
```

这将告诉你你在哪里得到“重复”。如果没有模式定义和一些示例数据，我只能告诉你这些。

# html - 使用 CSS3 转换 scale() 缩放/缩放 DOM 元素及其占用的空间

> ID：10627306
> 
> 赞同：41
> 
> 时间：2012-05-16T21:54:44.623
> 
> 标签：html, css, scale, css-transforms

在我的页面中间，我有一个 div 元素，其中包含一些内容（其他 div、图像等）。

```
<div>
    before
</div>
<div id="content-to-scale">
    <div>something inside</div>
    <div>another something</div>
</div>
<div>
    after
</div> 
```

我想缩放那个元素（内容到缩放）和它的所有子元素。似乎是 CSS3 转换的缩放操作的工作。但是，问题在于这只是对该元素层次结构的可视化的转换，它不会改变页面上元素的空间量（或位置）。换句话说，将该元素缩放得更大将导致它与“之前”和“之后”文本重叠。

是否有一种简单/可靠的方法不仅可以缩放视觉表示，还可以缩放占用的空间量？

没有 Javascript 的纯 CSS 加分。对于使用其他转换功能（如旋转和倾斜）做**正确事情**的解决方案来说，更重要的是。这不必使用 CSS3 转换，但它确实需要在所有支持 HTML5 的最新浏览器中得到支持。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T06:53:23.780

HTML（感谢 Rory）

```
<!DOCTYPE html>
<html>
<head>
<meta name="description" content="Sandbox for Stack Overflow question http://stackoverflow.com/q/10627306/578288" />
<meta charset=utf-8 />
  <title>Sandbox for SO question about scaling an element both visually and dimensionally</title>
</head>
<body>

  <div id="wrapper">
    <div class="surrounding-content">
      before
    </div>

    <div id="content-to-scale">
      <div>something inside</div>
      <div><img src="http://placekitten.com/g/150/100"></div>
      <div>another something</div>
    </div>

    <div class="surrounding-content">
      after
    </div>
  </div>

</body>
</html> 
```

CSS（仍然从 Rory 的基础开始）

```
body {
  font-size: 13px;
  background-color: #fff;
}
#wrapper {
  width: 50%;
  margin-left: auto;
  margin-right: auto;
  border: 0.07692307692307693em solid #888;
  padding: 1.1538461538461537em;
}
.surrounding-content {
  border: 0.07692307692307693em solid #eee;
}
#content-to-scale {
  border: 0.07692307692307693em solid #bbb;
  width: 10em;
}
#content-to-scale {
  font-size: 1.1em;
}
#content-to-scale img {
  width: auto;
  height: auto;
  min-width: 100%;
  max-width: 100%;
} 
```

说明：

我正在使用字体大小和 em 来“缩放”子元素的尺寸。

Ems 是相对于当前上下文的字体大小的尺寸单位。

因此，如果我说我的字体大小为 13px，边框为 1（所需的边框宽度以像素为单位）除以 13（当前上下文的字体大小也以像素为单位）= 0.07692307692307693em 浏览器应该呈现 1px边界

To emulate a 15px padding I use the same formula, (desired pixels)/(current context's font-size in pixels) = desired ems. 15 / 13 = 1.1538461538461537em

To tame the scaling of the image I use an old favorite of mine: the natural ratio preserving scale, let me explain:

Images have a natural height and width and a ratio between them. Most browser's will preserve this ratio if both width and height are set to auto. You can then control the desired width with min-width and max-width, in this case making it always scale to the full width of the parent element, even when it will scale beyond it's natural width.

(You can also use max-width and max-height 100% to prevent the image from busting out of the borders of the parent element, but never scaling beyond their natural dimensions)

# You can now control the scaling by tweaking the font-size on #content-to-scale. 1.1em roughly equals scale(1.1)

This does have some drawbacks: nested font-sizing in ems are applied recusively. Meaning if you have:

```
<style type="text/css">
    div{
        font-size: 16px;
    }
    span{
        font-size: 0.5em;
    }
</style>
<div>
    <span>
        <span>
            Text
        </span>
    </span>
</div> 
```

You will end up with "Text" rendering at 4px instead of the 8px you might expect.

# php - 在 mysql 更新上更改文件

> ID：10627307
> 
> 赞同：2
> 
> 时间：2012-05-16T21:54:47.620
> 
> 标签：php, mysql

对不起，如果标题听起来有点模糊。

Stackoverflow 在这里发布新手。

我有一个正在构建的地址簿，但遇到了一些问题。

我希望能够更新记录，如果更新表单中没有设置图像，则保留记录中已经记录的图像。如果图像字段已填充，则使用该图像更新记录并将其移动到目标位置。

这是我的 if 语句：

```
if (empty($photo))
{
$photo = $row['photo'];
}
else
{           
$phmsg = "Photo $photo has been deleted and replaced";
unlink("".IMAGES."/$photo");
$afn = date('dmYHis');
$name_of_file = $_FILES['photo']['name'];
$photo=$afn.$name_of_file;
$target = "".FILE_UPLOAD."/"; 
$target = $target . basename($photo);
} 
```

这是我尝试运行上传时遇到的错误：

> 警告：move_uploaded_file() [function.move-uploaded-file]：第 165 行 C:\xampp\htdocs\cab\update.php 中的文件名不能为空
> 
> 警告：move_uploaded_file() [function.move-uploaded-file]: Unable to move 'C:\xampp\tmp\phpB232.tmp' to '' in C:\xampp\htdocs\cab\update.php on line 165
> 
> 文件未上传。请尝试手动上传。

我能看到的唯一其他方法是有一个单独的文件来更新而不是更新图片。

任何帮助都将受到欢迎并非常感谢。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:58:15.603

您正在尝试使用[`move_uploaded_file()`](http://php.net/manual/en/function.move-uploaded-file.php)没有有效文件作为参数。

检查您是否上传了有效文件，然后才执行`move_uploaded_file()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:59:46.507

请尝试此代码

```
if (empty($photo))
{
$photo = $row['photo'];
}
else
{           
$phmsg = "Photo $photo has been deleted and replaced";
unlink("".IMAGES."//$photo");
$afn = date('dmYHis');
$name_of_file = $_FILES['photo']['name'];
$photo=$afn.$name_of_file;
$target = "".FILE_UPLOAD."//"; 
$target = $target . basename($photo);
} 
```

# android - 在Android应用程序上如何只显示网页的一部分

> ID：10627312
> 
> 赞同：0
> 
> 时间：2012-05-16T21:55:14.140
> 
> 标签：android, android-webview

我不知道这是否可能，但是..

我想尝试在我的应用程序上显示此网页的一小部分 [http://magicseaweed.com/Praia-da-Rocha-Surf-Report/127/](http://magicseaweed.com/Praia-da-Rocha-Surf-Report/127/)

即这个

[img1 http://dl.dropbox.com/u/2253656/Screenshot%20at%202012-05-16%2022%3A38%3A07.png](http://dl.dropbox.com/u/2253656/Screenshot%20at%202012-05-16%2022%3A38%3A07.png)

[或来自http://www.infopraias.com/reportpraia.asp?ID=3](http://www.infopraias.com/reportpraia.asp?ID=3)的另一个示例

[img2 http://dl.dropbox.com/u/2253656/teste2.jpg](http://dl.dropbox.com/u/2253656/teste2.jpg)

我需要的是获取一些信息以显示在我的应用程序上，它通常在网页的一部分上，只是一个 .

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:01:48.143

首先，您应该知道安卓市场服务条款禁止未经授权使用网络服务（包括“网页”）。

[现在您知道了，您可以使用jsoup](http://jsoup.org/)抓取网页中的数据。

将 JAR 放入您的项目中，创建一个名为“libs”的文件夹。右键单击它并添加到构建路径。

然后试试这个，他们主页上的例子：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

（注意：不要刮维基百科......他们禁止快速）

您只需要检查要从中获取数据的页面的 DOM 并确定什么是好的选择器。那里是一个 CSS 选择器。另一种方法是使用 xpath：[https ://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/](https://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T22:12:32.213

我同意，不要去不属于你的地方报废。

另一种选择是使用 Javascript 通过 DOM 树从页面中获取数据（[关于此处的教程](http://www.howtocreate.co.uk/tutorials/javascript/dombasics)）。

为此，您需要启用 javascript 并添加 Javascript WebChromeClient：

```
myWebView.getSettings().setJavaScriptEnabled(true);
// register class containing methods to be exposed to JavaScript
myWebView.setWebChromeClient(new MyWebChromeClient());

/**
 * Provides a hook for calling "alert" from javascript. Useful for
 * debugging your javascript.
 */
final class MyWebChromeClient extends WebChromeClient {
    @Override
    public boolean onJsAlert(WebView view, String url, String message, JsResult result)     {
        Log.d("DEBUG", message);
    }
} 
```

然后，您可以通过以下方式提醒您已从页面上删除的值：

```
myWebView.loadUrl("javascript:alert(document.getElementsByClassName('mainbody')[0].getElementsByTagName('b')[1].innerText);"); 
```

# ruby-on-rails - Capistrano 部署 -- Net::SSH::AuthenticationFailed -- AWS EC2

> ID：10627313
> 
> 赞同：14
> 
> 时间：2012-05-16T21:55:19.297
> 
> 标签：ruby-on-rails, amazon-web-services, capistrano

当我尝试运行部署设置时，为什么会出现 authenicationFailed？我使用 ssh 作为我的密码。我需要更改 database.yml 或 deploy.rb 中的任何内容吗？它们在下面列出。

```
$ cap deploy:setup
  * executing `deploy:setup'
  * executing "sudo -p 'sudo password: ' mkdir -p /var/www/apps/sample_app /var/www/apps/sample_app
 /releases /var/www/apps/sample_app/shared /var/www/apps/sample_app/shared/system /var/www     
/apps/sample_app/shared/log /var/www/apps/sample_app/shared/pids"
    servers: ["ec2-20-21-42-51.compute-1.amazonaws.com"]
Password: 
connection failed for: ec2-20-21-42-51.compute-1.amazonaws.com 
(Net::SSH::AuthenticationFailed: ubuntu) 
```

部署.rb

```
# The name of your app
set :application, "sample_app"

# The directory on the EC2 node that will be deployed to
set :deploy_to, "/var/www/apps/#{application}"

set :keep_releases, 3

# deploy with git
set :scm, :git
set :repository,  "git@github.com:username/sample_app.git"
set :git_shallow_clone, 1
set :branch, "master"
set :use_sudo, true

set :user, "ubuntu"
ssh_options[:forward_agent] = true
default_run_options[:pty] = true

# The address of the remote host on EC2 (the Public DNS address)
set :location, "ec2-20-21-42-51.compute-1.amazonaws.com"

# setup some Capistrano roles
role :app, location
role :web, location
role :db,  location, :primary => true

after 'deploy:update_code', 'deploy:symlink_db'

namespace :deploy do

desc "Restart Application"
task :restart, :roles => :app do
run "touch #{deploy_to}/#{shared_dir}/tmp/restart.txt"
end

desc "Symlinks the database.yml"
task :symlink_db, :roles => :app do
run "ln -nfs #{deploy_to}/shared/config/database.yml #{release_path}/config/database.yml"
end

end 
```

数据库.yml

```
development:
  adapter: mysql2
  database: db/development.mysql2
  pool: 5
  timeout: 5000
  database: sample_app
  username: root
  socket: /tmp/mysql.sock

test:
  adapter: mysql2
  database: db/test.mysql2
  pool: 5
  timeout: 5000
  database: sample_app
  username: root
  socket: /tmp/mysql.sock

production:
  adapter: mysql2
  database: db/production.mysql2
  pool: 5
  timeout: 5000
  database: sample_app
  username: ubuntu
  socket: /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T00:05:09.157

**对于 Capistrano v2**

指定 pem 文件的位置

```
ssh_options[:keys] = ["/where/ever/it/is/key.pem"] 
```

**Capistrano v3** ssh_options 略有变化，但基本设置几乎相同。

```
set :ssh_options, {
  keys: %w(/where/ever/it/is/key.pem),
  forward_agent: false,
  user: 'ubuntu'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:09:22.353

你有“sudo”的权利吗？用户“ubuntu”是否在 sudo 组中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:49:15.857

部署到 ec2 实例时，您将没有 ubuntu 用户的 sudo 权限。

改变这个：

`set :use_sudo, true`

对此：

`set :use_sudo, false`

# sql - 如何找出哪些 SQL Server 表链接到 MS Access？

> ID：10627317
> 
> 赞同：8
> 
> 时间：2012-05-16T21:55:43.080
> 
> 标签：sql, sql-server, ms-access, tablename

我继承了一个将表链接到 SQL Server 的 MS Access 前端。MS Access 中的链接表名与 SQL Server 中的表名不匹配。如何找出哪些 SQL Server 表实际链接到 MS Access？另外，如果我不知道链接表连接到什么 SQL Sever，我怎么能找到呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:59:28.263

您可以使用 tabledefs 集合来检查连接属性和源表名称。

```
CurrentDB.TableDefs("dbo_table_name").SourceTableName
CurrentDB.TableDefs("dbo_table_name").Connect 
```

或者

```
Dim tdf As TableDef
Dim db As Database

    Set db = CurrentDb

    For Each tdf In CurrentDb.TableDefs
        If tdf.Connect <> vbNullString Then
           Debug.Print tdf.Name; " -- "; tdf.SourceTableName; " -- "; tdf.Connect
        End If
    Next 
```

# javascript - 为什么@require-ing jQuery 在带有@run-at document-start 的脚本中抛出错误？

> ID：10627321
> 
> 赞同：2
> 
> 时间：2012-05-16T21:56:03.137
> 
> 标签：javascript, jquery, dom, greasemonkey

我在使用`@run-at document-start`指令时遇到问题。我敢肯定这归结为缺乏经验，但对于我的生活，我无法弄清楚这一点。

除了一些其他指令，这是整个脚本。

```
// @require https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js  
// @run-at  document-start 
```

FF中的错误

```
Error: document.documentElement is null  
Source File: file:///C:/Users/---/Test-1/jquery.js  
Line: 4899 
```

我看到并理解了这个问题，我只是不确定要采取什么步骤来让我的脚本尽可能接近文档开始运行，但`@required`脚本仍然可以正常运行。
对我的第一篇文章有​​点紧张......请放轻松:)

火狐 12
Greasemonkey 0.9.20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:27:04.510

是的，这是使用`// @run-at document-start`. `@required`试图操纵 DOM 的脚本可能会抛出错误。（但许多`@required`库都很好，因为它们只是加载稍后由您的代码激活的工具）。

您可以使用 、 和监视 来解决`@resource`此`eval()`问题`readyState`。像这样：

```
// ==UserScript==
// @name        _Using DOM-manipulating libraries with run-at start
// @include     http://YOUR_SERVER/YOUR_PATH/*
// @run-at      document-start
// @resource    jQ_src https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js
// ==/UserScript==

var jQ_src  = GM_getResourceText ("jQ_src");

window.addEventListener ("readystatechange", FireWhenReady, true);

function FireWhenReady () {
    this.fired  = this.fired || false;

    if (    document.readyState != "uninitialized"
        &&  document.readyState != "loading"
        &&  ! this.fired
    ) {
        this.fired = true;
        eval (jQ_src);
        $(document).ready (DoStuff);
    }
}

function DoStuff () {
    //--- Where this next paragraph appears can give you an idea of the delays involved...
    $("body").append ('<p style="background:yellow;">Hello from quick-start jQuery!</p>');
} 
```

* * *

**重要的！**对于像 jQuery 这样的库，使用 没有多大意义`@run-at document-start`，因为 jQuery 无论如何都不会让你做任何事情`$(document).ready()`，这是 Greasemonkey 默认触发的时候。

提前加载 jQuery 对您没有任何好处，因为您**必须**显式使用`$(document).ready()`（或一种[快捷方式](https://stackoverflow.com/a/3907535/331508)）。您可能有其他使用 jQuery 的原因`@run-at document-start`，也许以后还想使用 jQuery。

# c# - UnhandledExceptionEventHandler 未捕获 System.NotImplemented 异常

> ID：10627322
> 
> 赞同：2
> 
> 时间：2012-05-16T21:56:06.777
> 
> 标签：c#, unhandled-exception

我的 c# 程序实现了一个 unhandledExceptionEventHandler。不过，我使用的其中一个库会引发 NotImplemented 异常。无论我想继续还是退出，Windows 都会立即弹出一个对话框。如何捕获此异常（以便我可以在不提示用户的情况下退出？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:41:36.750

如果您正在使用 VS2010，只需转到`Debug`菜单并点击`Exceptions...`. 现在检查`Thrown`. 在调试模式下从 IDE 再次运行您的程序。现在您的程序将在每个异常时停止。当您退出时，您将能够识别正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:26:47.410

包装入口点`try ... catch`比使用处理程序更直接，但无论如何。如果您从 IDE 进行调试，则这些对话框对应于异常处理的*开始*，而`UnhandledExceptionEventHandler`只有在堆栈完全展开后、同一进程结束时以及没有任何内容时才有机会执行留在那个不幸的线程上进行调试。您应该能够在 IDE 中禁用不需要的对话框（例如，[像这样](https://stackoverflow.com/questions/2173997/how-to-disable-exception-assistant-and-unhandled-exception-popup-in-visual-studi)）。

# javascript - 在这种情况下，如何让 jQuery 保留空白？

> ID：10627331
> 
> 赞同：1
> 
> 时间：2012-05-16T21:56:53.507
> 
> 标签：javascript, jquery, html, ajax

我有一个小的 html 选择框，其中的值作为选项

```
<div class="controls"> <select name="multiple" multiple="multiple">
    <option value=4fac22a963838c3d74000000|R A M|1991-10-23>1 </option>
    <option value=4fac22a963838c3d74000000|M S D|1991-10-23>2 </option>
    <option value=4fac22a963838c3d74000000|X Y |1991-10-23>3 </option>
    <option value=4fac22a963838c3d74000000|X|1991-10-23>3 </option>
    ... 
```

我有以下 javascript 代码来使用突出显示的值填充文本区域：

```
function addValues() {
      var fields = $("select").serializeArray();
      $("#results").empty()
      jQuery.each(fields, function(i, field){
           $("#results").append(field.value + " ");
      });
 }

 $("select").change(addValues);
 addValues(); 
```

但是，在上述情况下，它只会导致：

```
 4fac22a963838c3d74000000|R
    4fac22a963838c3d74000000|M
    4fac22a963838c3d74000000|X
    4fac22a963838c3d74000000|X|1991-10-23>3 
```

似乎白色空间正在把它扔掉。除了替换空白之外，是否有任何价值可以保留选择选项值中的空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:11:16.237

你应该使用引号：

```
<option value="4fac22a963838c3d74000000|R A M|1991-10-23">1 </option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:05:38.120

```
 $("#results").append(field.value + "&nbsp;"); 
```

这是你需要的吗？

```
 $.trim(field.value); 
```

如果您的意思相反，可能会很方便

# android - 字符串部分匹配

> ID：10627333
> 
> 赞同：1
> 
> 时间：2012-05-16T21:56:55.980
> 
> 标签：android

我想在java中部分匹配字符串，例如

字符串 s1 = "方法";

String s2 = "这是我正在使用的绝妙方法";

如果 s1 complete 存在于 s2 中，则 s2 返回。任何人都有算法或其他灵活的代码，提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:00:20.103

这应该可以解决问题：

```
if (s2.contains(s1))
    return s2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:42:32.107

您可以使用类的`contains()`方法`String`，请学习以下示例，

```
public class TestClass 
{
    private String getString ( String str1, String str2 ) 
    {
        if ( str2.contains (str1) )
        {
            return str2;
        }
        else
        {
            return "-1";
        }
    }

    public static void main ( String args[] )
    {
        String s1 = "method";
        String s2 = "this is wonderful method i am using";

        TestClass tc = new TestClass();

        System.out.println ( tc.getString(s1, s2) );

    }
}

// Output 
// this is wonderful method i am using 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:00:58.963

它非常简单。

```
if(s2.contains(s1)){
    //do your stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:05:57.683

最简单的方法是使用 String.contains`if( s2.contains(s1) ) return s2;` 或者你可以使用正则表达式来匹配

`if( s2.matches("(?i).*" + s1 + ".*") ) { return s2; }`

虽然可能有点矫枉过正，但很高兴知道一些不同的方法来做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T22:00:43.627

您可以使用 Java.String.indexOf()，如此[处](http://www.javadb.com/check-if-string-contains-another-string)所述。

# javascript - jquery - 使用 .height()

> ID：10627334
> 
> 赞同：0
> 
> 时间：2012-05-16T21:56:59.833
> 
> 标签：javascript, jquery, html, css

我正在使用 jquery .height() 来获取文档高度。

请检查这个 [http://jsfiddle.net/rkumarnirmal/86q37/](http://jsfiddle.net/rkumarnirmal/86q37/)

获取高度后，我将元素放置在该位置。在哪里可以看到文档高度实际上是错误的，因为它超出了该区域。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:58:56.260

`top`相对于#dummy 的顶部。

所以你需要从页面的高度中减去#dummy的高度：

```
$(function(){
    var h = $(document).height() - $("#dummy").height();
    $("#dummy").css("top", h+"px");
})​ 
```

我应该提一下，你可以在纯 CSS 中做到这一点：

[http://jsfiddle.net/86q37/3/](http://jsfiddle.net/86q37/3/)

如果你想支持旧的浏览器，你要么需要查找一些 CSS 技巧来做到这一点，要么只使用 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:01:53.930

一种解决方案是使用 jQuery，并从 body 的高度中减去元素的高度（并且您不必*担心*将高度添加`px`到高度，jQuery 会在内部处理它）：

```
$(function(){
    var h = $(document).height();
    $("#dummy").css("top", h - $('#dummy').height());
})​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/86q37/6/)。

*更简单*的解决方案是简单地使用 CSS：

```
#dummy {
    position: absolute;            
    width: 100px;
    height: 100px;
    bottom: 0; /* aligns the bottom of the element zero pixels from the bottom of the document */
    left: 0; /* aligns the left side of the element zero pixels from the left side of the document */
    background-color: red;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/86q37/7/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T22:00:22.627

`.height`正在返回正确的值。但是您将框的顶部位置设置为文档的高度。请参阅下面的演示以获得更好的理解，

```
$(function(){
    var h = $(document).height();
    $("#dummy").css("top", function () {
        return (h - $(this).height()) +"px"; 
      //This will place the box at top position subtracting 
      //the documentHeight - dummyHeight;
    });
}) 
```

[**演示**](http://jsfiddle.net/skram/86q37/1/)

# php - 如何使用 iframe 在 Facebook 上为其他粉丝页面制作点赞按钮

> ID：10627339
> 
> 赞同：1
> 
> 时间：2012-05-16T21:57:44.310
> 
> 标签：php, html, facebook, button, iframe

我想知道是否有一种方法可以在 Facebook 上的 iframe 选项卡中制作有关其他粉丝页面的类似按钮，因为旧页面似乎不再起作用。如果您添加其他页面（如按钮 Facebook 会自动阻止它）...

例如：

在主页中，我创建了一个 iframe 选项卡，并在其上放置了 4 个不同粉丝页面的 4 个不同的类似按钮。

这还有可能吗？你有代码或其他方法吗？

# c# - 使用 ExecuteNonQuery() 时返回值不正确

> ID：10627343
> 
> 赞同：4
> 
> 时间：2012-05-16T21:58:03.227
> 
> 标签：c#, sql, sql-server

我正在编写一个与 SQL Server 交互的 C# 程序。我愚蠢地将查询字符串硬编码到 C# 程序中，并希望将它们转换为服务器上的存储过程。

出于某种原因，一个特定的 INSERT 语句（工作正常！）不再起作用，我不知道为什么。我什至运行了一个 SQL Profiler Trace，它表明该语句是完美的！也许有人可以告诉我我做错了什么。

存储过程：这个 SP 只需要一堆参数并将它们插入到一个表中。非常简单。

```
ALTER PROCEDURE [dbo].[usp_InsertNewChangeRequest]

@Requester INT,
@ChangeCreationDate DATETIME,
@ChangeName VARCHAR(200),
@ChangeDescription VARCHAR(1000),
@LastModifiedDate DATETIME,
@LastModifiedBy INT,
@AffectedArea INT,
@ImplementationPlan VARCHAR(MAX),
@BackoutPlan VARCHAR(MAX),
@RiskLevel TINYINT,
@ApprovalRequired BIT,
@IsApproved BIT
AS
BEGIN
SET NOCOUNT ON;

INSERT INTO dbo.ChangeRequests(Requester, ChangeCreationDate, ChangeName, ChangeDescription, 
            LastModifiedDate, LastModifiedBy, AffectedArea, ImplementationPlan, BackoutPlan, 
            RiskLevel, ApprovalRequired, IsApproved)
VALUES (@Requester, @ChangeCreationDate, @ChangeName, @ChangeDescription,
            @LastModifiedDate, @LastModifiedBy, @AffectedArea, @ImplementationPlan, @BackoutPlan,
            @RiskLevel, @ApprovalRequired, @IsApproved) 
END 
```

我在 C# 中的代码只是准备 SP 参数然后调用非查询：

```
public int InsertNewChange(int RequesterID, DateTime CreationDate, string ChangeName,
        string ChangeDescription, DateTime LastModifiedDate, 
        int AffectedAreaID, string ImplementationPlan, string BackoutPlan,
        int RiskLevel, int ApprovalRequired, int IsApproved)
    {
        int retval = 0;

        // Create a command whose name is the stored procedure for inserts
        SqlCommand command = new SqlCommand("usp_InsertNewChangeRequest", scConnection);
        command.CommandType = CommandType.StoredProcedure;

        // add the parameters to the stored procedure
        command.Parameters.Add(new SqlParameter("@Requester", RequesterID));
        command.Parameters.Add(new SqlParameter("@ChangeCreationDate", CreationDate));
        command.Parameters.Add(new SqlParameter("@ChangeName", ChangeName));
        command.Parameters.Add(new SqlParameter("@ChangeDescription", ChangeDescription));
        command.Parameters.Add(new SqlParameter("@LastModifiedDate", LastModifiedDate));
        command.Parameters.Add(new SqlParameter("@LastModifiedBy", RequesterID));
        command.Parameters.Add(new SqlParameter("@AffectedArea", AffectedAreaID));
        command.Parameters.Add(new SqlParameter("@ImplementationPlan", ImplementationPlan));
        command.Parameters.Add(new SqlParameter("@BackoutPlan", BackoutPlan));
        command.Parameters.Add(new SqlParameter("@RiskLevel", RiskLevel));
        command.Parameters.Add(new SqlParameter("@ApprovalRequired", ApprovalRequired));
        command.Parameters.Add(new SqlParameter("@IsApproved", IsApproved));

        retval = command.ExecuteNonQuery();
        return retval;
    } 
```

我经常得到一个 -1 返回值，而之前，当我用 C# 完全拼写 SQL 文本时，插入的 1 行我会得到一个 1。

令人生气的是，在进行跟踪时，我在 SQL Profiler 中没有看到任何错误。它显示语句已通过，看起来完全没问题！当我将其剪切并粘贴到 Management Studio 中并自己手动运行时，它工作正常。

```
 exec usp_InsertNewChangeRequest @Requester=4,@ChangeCreationDate='2012-05-16 17:55:45',@ChangeName='test name',@ChangeDescription='test description',@LastModifiedDate='2012-05-16 17:56:01.937',@LastModifiedBy=4,@AffectedArea=2,@ImplementationPlan='test implem',@BackoutPlan='test backout',@RiskLevel=1,@ApprovalRequired=0,@IsApproved=0 
```

有谁知道为什么这会发生在我身上？非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T22:02:32.750

因为你把它关了：

```
SET NOCOUNT ON; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:16:20.827

您是否尝试过使用`@@RowCount;`而不是依赖返回的行数（如果它是`INSERT, UPDATE, or DELETE`.

似乎有很多关于 SP 的建议是使用`@@RowCount`和`SET NOCOUNT ON;`

# search - 在时间复杂度 O(lgm) + O(lgn) 的排序矩阵 (mXn) 中查找某个值

> ID：10627345
> 
> 赞同：3
> 
> 时间：2012-05-16T21:58:12.290
> 
> 标签：search, matrix

矩阵 A 按行和列排序，其中 A[i][j] < A[i][j+1] 和 A[i][j] < A[i+1][j]。附加信息是每行的第一个元素小于前一行的最后一个元素，例如：

```
⎡1  3   5  17⎤
⎢2  4   6  18⎥
⎣7  9  11  20⎦ 
```

而且我对这些附加信息在确定 O(lgn) 复杂性中所起的作用感到困惑。

我可以想出 O(m) + O(n) 如下：

```
int search(int mat[4][4], int n, int x)
{
   int i = 0, j = n-1;  //set indexes for top right element
   while ( i < n && j >= 0 )
   {
       if ( mat[i][j] == x )
       {
          printf("\n Found at %d, %d", i, j);
          return 1;
       }
       if ( mat[i][j] > x )
           j--;
       else //  if mat[i][j] < x
           i++;
       }

       printf("\n Element not found");
       return 0;  // if ( i==n || j== -1 )
  } 
```

但我认为我没有使用过信息：每行的第一个元素小于上一行的最后一个元素

谁能给我一些提示？另外，这不是家庭作业。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:49:17.753

您当前正在做的是详尽的搜索（即检查每个元素一次），因此 O(n*m)。您没有利用矩阵的排序特性。

给定一个排序列表，二分[搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)允许您在 O(lg n) 中进行搜索。基本上，您检查列表的中间元素。如果它大于您的目标，那么您知道您可以忽略列表的后半部分。重复此过程，每次将搜索空间减半，直到找到元素或搜索空间等于 1 项。在 Python 代码中：

```
import math

def binSearch(value, data):
    bottom = 0 #first entry
    top = len(data) -1 #last entry

    while bottom <= top: #if bottom ever becomes greater than top then the object is not in the list
        i = int(bottom + math.floor((top - bottom)/2)) #find the mid-point
        if data[i] == value: #we found it
            return i
        elif data[i] > value:
            top = i - 1 #value must be before i
        else:
            bottom = i + 1 #value must be after i

    return None #not found 
```

现在，想想你可以从矩阵结构中收集到什么信息。您知道`mat`，对于任何 row `i`，按照您的描述排序的给定 anxm 矩阵`mat[i][0]`是该行中最低的项目并且`mat[i][n]`是最高的。类似地，对于任何列 j，`mat[0][j]`是该列的最低值并且`mat[m][j]`是最高值。这意味着如果`mat[i][0] <= value <= mat[i][n]`不为真，则值不能在第 i 行中。同样，如果`mat[0][j] <= value <= mat[m][j]`不为真，则值不能在 j 列中。

因此，明显的改进是，对于可能包含该值的每一行，进行二分搜索。

```
for row in mat:
    if (row[0] <= value) AND (row[len(row) - 1] >= value): #if the value could possibly be in the row
        result = binSearch(value, row)

        if result: #if we found it
            return result 
```

`binSearch()`是 O(lg m)。最坏的情况是`binSearch()`在每一行上执行，因此 O(n * lg m)。

我试图实现一个 O(lg n * lg m) 解决方案，但我无法弄清楚。问题是我只能消除矩阵的左上角和右下角。我无法消除左下角或右上角。

# google-apps-script - 如何在文档服务/文本类中使用方法replaceText（searchPattern，replacement）

> ID：10627356
> 
> 赞同：1
> 
> 时间：2012-05-16T21:59:16.013
> 
> 标签：google-apps-script

我需要替换文本文档中的唯一字符串（实际上有很多字符串，但每个字符串都是唯一的）所以我尝试`doc.editAsText().replaceText(old$,new$);`了但没有运气......这是我使用的代码，它复制了一个模板，其中包含应该循环替换。

```
 var doc = DocumentApp.openById(docId);;
  var lib=["$titre","$nom","$prénom","$rue","$code","$ville","$pays"]
    for(nn=1;nn<=selrange.length;++nn){
      for(ll=0;ll<lib.length;++ll){
        var old$ = (lib[ll]+nn).toString();
        var new$ = selrange[nn-1][ll].toString();
        var test = old$.replace(old$,new$);
Logger.log(new$+" = "+test);// this is indeed the new value
        doc.editAsText().replaceText(old$,new$);
         }
       }
Logger.log(doc.getText())
   } 
```

Logger 显示文档内容不变。我错过了什么？

编辑：有关信息，在 Henrique 的回答之后是工作代码：

```
 for(page=0;page<feuilles;++page){
      var today=Utilities.formatDate(new Date(),FUS1,"dd-MM-yyyy")+"__"+Utilities.formatDate(new Date(),FUS1,"HH:mm")
      var docname="IMPRESSION_page_"+Number(page+1)+"_"+today;
      var docId=DocsList.copy(doctemplate,docname).getId();
      var doc = DocumentApp.openById(docId);;
      var lib=["titre","nom","prénom","rue","code","ville","pays"]
        for(nn=1;nn<=16;++nn){
          for(ll=0;ll<lib.length;++ll){
            var olditem = ("#"+lib[ll]+nn+"#");
            var newitem = selrange[nn-1+page*16][ll];
              if(newitem==""){newitem="   "}
//Logger.log(olditem + "   *"+newitem+"*")
              doc.replaceText(olditem,newitem);
         }
       }
      Utilities.sleep(300); // wait a bit between each doc creation
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T01:09:29.690

问题是`Document.replaceText`即使您将字符串传递给该函数，该函数也会创建一个正则表达式（这实际上是在[文档](https://developers.google.com/apps-script/class_document#replaceText)示例中:)。并且`String.replace`您的测试中的功能不会。这是区别：

```
var doc = DocumentApp.openById(docID);
var old$ = '$sample';
var new$ = '$replaced';
var test = 'foo $sample bar';
Logger.log(test.replace(old$, new$)); //old is treated as literal
Logger.log(test.replace(new RegExp(old$), new$)); //this is what replaceText does
doc.replaceText(old$,new$);
Logger.log(doc.getText()); 
```

而且由于`$`是正则表达式中的特殊字符，因此它会弄乱您的替换。顺便说一句，这意味着文本的结尾，并且尝试匹配结尾之后的任何文本将永远不会起作用，因此基本上您的搜索和替换永远不会执行任何操作。

要解决这个问题，你必须`$`在所有字符串中转义，例如'\$sample'，或者不要使用这个字符作为字段分隔符，这是一个糟糕的选择！使用 # 或任何其他在正则表达式中没有特殊含义的字符。

顺便说一句，即使在你的`old$`和`new$`变量中它看起来也很难看。但这可能只是我:)

# jquery - jQuery Expander 元素数量

> ID：10627358
> 
> 赞同：0
> 
> 时间：2012-05-16T21:59:31.297
> 
> 标签：jquery, expander

我正在将[扩展器](http://plugins.learningjquery.com/expander/index.html#getting-started)用于网络项目

所以我需要计算点击“阅读更多”之前可见的元素，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:06:20.283

如果这些元素有一些类，比如“testClass”，你可以选择它们（$（“.testClass”）），迭代它们（.each 函数）并验证哪个元素是可见的（使用 attr（“style”）或 css （“显示”）函数）并计算它们。您也可以通过这种方式使用“is”函数 is(":visible")。

# emacs - 如果 Emacs 缓冲区被修改，则从 elisp 中查找

> ID：10627359
> 
> 赞同：1
> 
> 时间：2012-05-16T21:59:35.310
> 
> 标签：emacs, elisp, modeline

我正在自定义模式行，如果文件被修改，我想在其上放置一个字符串“未保存”。如何直接从elisp中查出，Emacs中的当前缓冲区是否被修改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T22:08:32.933

发现有一个功能`buffer-modified-p`：

> 功能：buffer-modified -p &可选缓冲区
> 
> 如果缓冲区缓冲区自上次从文件读入或保存后已被修改，则此函数返回 t，否则返回 nil。如果未提供缓冲区，则测试当前缓冲区。

来源：[Emacs Lisp 参考/缓冲区](http://www.zvon.org/other/elisp/Output/SEC401.html#SEC406)

# php - 使用 phpDoc，我没有收到任何错误，但也没有结果

> ID：10627361
> 
> 赞同：0
> 
> 时间：2012-05-16T21:59:45.607
> 
> 标签：php, phpdoc

有几个这样的文件：

```
/**
 * Creates a new user account.
 * Collects posted form variables, escapes them, then passes them on to Storm.
 * @package User
 */

/**
 * Do includes.
 */
include_once('../Utilities.php');
include_once('../stormLibs/user.php'); 
```

...ETC。

然后我从 phpdoc.org 运行 phpDocumentor 2。结果页面没有显示任何错误，但也没有指向任何文件、包或类的链接。

有任何想法吗？

截屏：![http://www.wildsky.com/phpdoc.jpg](../Images/5ee6da0d2d430860c9c3903c2cde4325.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:40:28.790

奇怪的是，您甚至没有将文件本身列为用户包的一部分。我想知道 phpdoc2 的行为是否使得一个文件只加入一个包列表，如果它还包含一些可记录的元素（类、函数、常量）。如果您的文件只是程序代码，那么其中可能没有可记录的元素，因此 phpdoc2 认为它没有任何可记录的内容。

作为一个实验，如果您的文件中确实没有可记录的元素，请尝试添加一个空的类声明，其中包含一个将其放入 User 包中的类级文档块。我很想看看这是否会使类和文件都出现在用户包列表中。

# objective-c - Objective C store method to call

> ID：10627371
> 
> 赞同：0
> 
> 时间：2012-05-16T22:00:49.593
> 
> 标签：objective-c, methods

I will start by apologising if this is a naive, simple or stupid question. I am relatively new to objective C and am trying to learn.

Basically I have a situation in which `methodA`, `methodB` or `methodC` are called. These methods then call `methodX`. Once the end of `methodX` is reached I need it to re-call the method that called it (`methodA`, `methodB` or `methodC`).

I have never come across this issue before and would like help developing a solution. In a more complex situation I may also have the following. `methodA`, `methodB` or `methodC` are called; they call `methodX`. `methodX` goes off and calls a bunch of other methods (that cannot be changed), at some later point `methodY`(in the same class as `methodA`, `methodB`, `methodC` and `methodX`) gets called, this in turn should call the method that started out calling `methodX` (be it `methodA`, `methodB` or `methodC`).

Please can someone point me in the right direction with this problem. If there are any tutorials or basic examples out there that could help I would really appreciate being directed to them. I have tried googling the topic described in my examples however I haven't had much luck since I don't know the technical terms for what I'm trying to achieve.

Thanks in advance.

**NOTE:** In my examples `methodA`, `methodB`, `methodC`, `methodX` and `methodY` are all in the same class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:07:02.770

There are two typical ways of doing this.

One way of doing it is to use a delegate. Define a protocol that has a completion method, declare that an object conforms to that protocol, pass that object through to the method, then, when you need to signal completion, call the completion method on that delegate object.

The other way of doing it is to use blocks. Pass a block through to the method, execute it when you are done.

It's also common to see people pass through targets and selectors, or to use notifications. The first two methods are more suited to this type of situation though.

# javascript - 如何使用 javascript 跟踪符号链接？

> ID：10627378
> 
> 赞同：2
> 
> 时间：2012-05-16T22:01:46.420
> 
> 标签：javascript, d3.js, simplehttpserver

我正在`python -m SimpleHTTPServer 8888`从该目录运行，`my_server`并且我想访问`index.html`包含读取的 javascript 命令`my_file.csv`的文件，但该文件不在`my_server`其子文件夹中或其子文件夹之一。

```
path/to/my_server $ ln -s /some_path/to/my_file.csv symbolic_link_to_my_file.csv
path/to/my_server $ python -m SimpleHTTPServer 8888 
```

如果我在其中创建一个符号链接`my_server`，`my_file.csv`然后像这样访问它：

```
http://localhost:8888/my_server/index.html?file=symbolic_link_to_my_file.csv 
```

有什么办法可以按照这个带有javascript的符号链接`index.html`来阅读`my_file.csv`吗？

```
<script>
    //read URL params
    ...
    d3.csv(file, ...)
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T22:04:08.860

在浏览器中运行的 JavaScript 根本无法访问文件系统（就此而言，浏览器中也没有其他任何东西）。

客户端只能看到 URI。

为 URI 提供适当的资源是 Web 服务器的责任。

您需要编辑/配置 SimpleHTTPServer 以遵循符号链接和/或确保运行服务器的用户有权访问链接另一端的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:08:56.670

阅读有关`d3.csv`命令的文档，您需要向其发送完整的 URL。[https://github.com/mbostock/d3/wiki/CSV](https://github.com/mbostock/d3/wiki/CSV)

`file`命令中的值是什么`d3.csv(file`？如果您要发送“filename.csv”之类的内容，它可能只是将其附加到您当前的 URL 或当前目录。您可能希望向它发送一个完整的 URL，如下所示（开头带有斜杠）： `/folder/myfile.csv`

如果您在浏览器中输入此 URL，它会为您提供 CSV 文件吗？ `http://localhost:8888/my_server/index.html?file=symbolic_link_to_my_file.csv`

如果是这样，那么 的内容`file`可能应该是`/my_server/index.html?file=symbolic_link_to_my_file.csv`.

# php - 从 MYSQL 数据库中提取 URL 时，我的 PHP cURL 函数不起作用

> ID：10627383
> 
> 赞同：3
> 
> 时间：2012-05-16T22:01:59.410
> 
> 标签：php, mysql, curl

我将这个函数用于我的 cURL 查询。

```
function get_source($url){
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:'));
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt ($ch, CURLOPT_HEADER, 0);
$source = curl_exec ($ch);
return $source;
} 
```

该功能完美运行，但是当我尝试在我的 MySQL 数据库中的 URL 上运行它时，它不会工作......

我已经完成了以下测试...我正在尝试获取 YouTube 视频的来源：

测试1：

```
echo get_source("http://www.youtube.com/watch?v=WxfZkMm3wcg");

**Result: Works, returns the source code of the video.** 
```

测试 2：

```
$video="http://www.youtube.com/watch?v=WxfZkMm3wcg";
echo get_source($video);

**Result: Works, returns the source code of the video.** 
```

测试 3：

```
$video_arr=mysql_fetch_array(mysql_query("SELECT video FROM videos WHERE id='$video_id'")); 
$video=$video_arr['video'];
echo get_source($video);

**Result: Does not work. A blank string gets returned and there aren't any cURL errors that I can see...** 
```

测试 4（只是为了显示我的查询有效）

```
$video_arr=mysql_fetch_array(mysql_query("SELECT video FROM videos WHERE id='$video_id'")); 
$video=$video_arr['video'];
var_dump($video);

**Result: string(38) "http://youtube.com/watch?v=WxfZkMm3wcg"** 
```

我不知道该怎么做，甚至不知道出了什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:18:52.887

你为什么要`CURLOPT_FOLLOWLOCATION`设置`false`？youtube 的非 www url 正在尝试重定向到 www，但没有跟随位置，您得到的只是请求重定向的标头。您要么需要手动操作，要么打开`followlocation`。为简单起见，您可能希望使用 fopen 包装器（如果它们可用`file_get_contents($video)`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:18:56.327

尝试设置`CURLOPT_FOLLOWLOCATION`为，`true`以便页面可以在必要时重定向。

# android - SeekBar 偏好变化量

> ID：10627385
> 
> 赞同：2
> 
> 时间：2012-05-16T22:02:18.310
> 
> 标签：android, media-player, volume, seekbar, preference

我有一个 SeekBarPreference，我想用它来处理应用程序的数量。我在 xml 中创建了 SeekBarPreference，但我真的不知道应该在 java 类中编写什么来配置它。

请帮我配置 SeekBarPreference 以控制应用程序的音量。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:41:11.720

```
import android.app.Activity;

import android.content.Context;

import android.media.AudioManager;

import android.os.Bundle;

import android.widget.SeekBar;

import android.widget.SeekBar.OnSeekBarChangeListener;

public class MainActivity extends Activity 
{

    /** Called when the activity is first created. */

    private SeekBar volumeSeekbar = null;
    private AudioManager audioManager = null; 

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        setContentView(R.layout.main);
        initControls();
    }

    private void initControls()
    {
        try
        {
            volumeSeekbar = (SeekBar)findViewById(R.id.seekBar1);
            audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            volumeSeekbar.setMax(audioManager
                    .getStreamMaxVolume(AudioManager.STREAM_MUSIC));
            volumeSeekbar.setProgress(audioManager
                    .getStreamVolume(AudioManager.STREAM_MUSIC));   

            volumeSeekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
            {
                @Override
                public void onStopTrackingTouch(SeekBar arg0) 
                {
                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0) 
                {
                }

                @Override
                public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) 
                {
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
                            progress, 0);
                }
            });
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    } 
```

# git - 区分当前文件版本和前一个远程存储库

> ID：10627389
> 
> 赞同：15
> 
> 时间：2012-05-16T22:02:34.900
> 
> 标签：git, diff

如何区分我的工作文件版本与远程存储库中的某个先前版本？

说，我今天拉，对我的本地副本执行 6 到 8 次提交，然后想查看我的最新工作版本（给定文件的）与远程或任何其他版本的最新版本之间的差异。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T22:06:01.630

如果您正在谈论远程分支，例如`origin/master`，您可以使用`~`and`^`来引用相对于分支的祖先提交，就像您可以使用本地分支一样：

```
# what change was introduced to origin/master in the last 4 commits?
git diff origin/master origin/master~3 
```

如果你想将你当前的工作目录与 5th 最近的提交进行比较`origin/master`，你可以省略第一个参数：

```
git diff origin/master~4 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-17T00:12:56.557

要查看您的“最新工作版本”（我将其作为您的工作副本）之间的差异，请使用：

```
git diff <remote>/<branch> 
```

如果您认为其他人已推送到远程，那么您需要获取更改：

```
git fetch <remote> <branch>
git diff <remote>/<branch> 
```

如果要将差异限制为仅一个文件或目录中的所有文件，请使用：

```
git diff <remote>/<branch> -- /path/to/file
git diff <remote>/<branch> -- /path/to/           #all files in directory 
```

您可以使用`git difftool ...`来启动视觉差异工具（假设您的机器上存在一个）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-28T06:33:27.220

假设`path/to/file.txt`某个文件已提交到远程分支`origin/master`，并且也在我的工作区中，已提交到本地分支`my-branch`。

`path/to/file.txt`我的工作区中提交的远程分支的最新版本和（可能未提交的）版本之间的区别：

```
git diff origin/master:path/to/file.txt path/to/file.txt 
```

`path/to/file.txt`三个提交前提交的远程分支的版本与我的工作区中的（可能未提交的）版本之间的差异：

```
git diff origin/master~3:path/to/file.txt path/to/file.txt 
```

`path/to/file.txt`提交的远程分支的最新版本和提交的最新版本之间的区别`my-branch`：

```
git diff origin/master:path/to/file.txt my-branch:path/to/file.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T11:04:19.393

```
混帐获取；#这会将远程分支提交附加到您的本地树
git diff FETCH_HEAD #diff your working dir version of my_file vs the remote tip

如同
git diff 遥控器/来源/分支

```

但是您必须先执行 git-fetch ，否则您将无法在本地使用远程提交来进行比较

# php - 我应该在什么模型中使用 zend 事务

> ID：10627391
> 
> 赞同：-1
> 
> 时间：2012-05-16T22:02:44.433
> 
> 标签：php, zend-framework

我有 3 个模型（我正在使用 zend 1.11，mysql），分别包含 3 个表“类别”、“产品”和“产品翻译”，其中包含某种语言的产品翻译标签，现在有一对多产品和类别之间的关系（一个产品只能属于一个类别），以及产品和product_translate之间的另一种一对多关系。我需要的是插入一个新类别，然后将这个类别的最后插入 id 分配到产品表中，“product_translate”也是如此，我发现这样做的最好方法是使用事务，但我遇到了麻烦： 1/我应该把这个交易放在哪里一次插入，在哪个模型中？“产品”、“类别”或“产品翻译” ? 2/我如何处理最后插入的 id，因为我将需要多次，尤其是翻译表（因为我要使用最后插入的产品 id 插入至少 2 个新行）。我希望我说清楚了，任何帮助或建议都非常感谢

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:19:32.900

我建议这样

在您的控制器/动作中

```
$category = new Category_model();
$lastinsertid = $category->categoryInsertFunction(); 
```

您可以通过在您想要的模型中调用它来获取最后一个插入 id

```
$this->getDefaultAdapter()->lastInsertId(); 
```

从 categoryInsertFunction 返回这个值

并将最后一个插入 id 用于其他功能。

# mysql - Oracle 的 MySQL 与 MariaDB 与 Drizzle

> ID：10627397
> 
> 赞同：9
> 
> 时间：2012-05-16T22:03:18.200
> 
> 标签：mysql, mariadb, drizzle

我过去使用过 MySQL，但自从甲骨文收购 Sun 之后，我就再也没有接触过它。现在 Oracle 已经开始在 5.x 分支上推出他们自己的 MySQL 更新，我考虑了以下几点：

有 Oracle 分支以及两个流行的分支：Maria 和 Drizzle。我一直试图找到一个客观的比较，说明为什么我会考虑使用两个分支中的一个而不是使用 Oracle 分支。我也一直试图弄清楚每个分支的主要支持者是什么，使它们与 Oracle 分支不同。

这些是我在搜索时想到的一些细节：

*   Drizzle 的网站说他们已经重新组织了代码，使其更加基于插件——这样做有什么好处？

*   Maria 的网站说他们做了一些改进，但我真的不明白他们有什么了不起的地方。

*   MariaDB 是一个替代品——这非常棒，因为我不需要做任何重大的改变。但我试图弄清楚为什么我会把 Maria 放在常规的 MySQL 上。

*   Oracle 的任何更新是否与只使用常用 SQL 函数的普通开发人员相关？由于这是一个关系数据库问题，假设我会使用 JOIN。

我访问过的网站：
Drizzle：[http](http://www.drizzle.org/)
://www.drizzle.org/ MariaDB： http: [//mariadb.org/](http://mariadb.org/)
MySQL 社区版：[http](http://www.mysql.com/products/community/)
://www.mysql.com/products/community/ Oracle 新闻稿MySQL 5.6：[http](http://www.oracle.com/us/corporate/press/1583744)
://www.oracle.com/us/corporate/press/1583744 MySQL 消失了：http: [//zerolinesofcode.wordpress.com/2010/05/06/mysql-is-gone-here-comes- mariadb-and-毛毛雨/](http://zerolinesofcode.wordpress.com/2010/05/06/mysql-is-gone-here-comes-mariadb-and-drizzle/)

如果您要构建一个可能每天为 1,000-10,000 名用户提供服务的 Web 应用程序，其中包含 4-5 个数据表 - 您会为每个数据表考虑哪些因素？

我知道选择数据库有不同的变量；我明白我没有提到硬件；我知道您可能认为 NoSQL 解决方案会更好，我可能会同意您的看法。但是，我很好奇从关系数据库的角度如何处理这个问题。

有没有人尝试过这些？

# mongodb - 为什么我的 MongooseJS ObjectIds 没有通过相等性测试？

> ID：10627401
> 
> 赞同：8
> 
> 时间：2012-05-16T22:03:47.137
> 
> 标签：mongodb, mongoose

假设我保存和检索相同的对象如下

```
var obj1, obj2;

instance.save(function(err, saved) {
    obj1 = saved;
});

Model.find(obj1._id).run(function(err, retrieved) {
    obj2 = retrieved;
}); 
```

当我打印到控制台时，ObjectIds 是相同的。如果我在两个 ObjectId 上调用 toString，它们是相等的。然而做一个直

```
obj1._id == obj2._id 
```

返回假。这里发生了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T00:15:32.097

ObjectId 是对象，因此标准 == 相等测试是比较引用的相等性，而不是包含的 id 值。比较它们的值的正确方法是使用 ObjectId.equals 作为：

```
obj1.equals(obj2) 
```

# iphone - 在 Objective-C 中设置数组的元素

> ID：10627402
> 
> 赞同：0
> 
> 时间：2012-05-16T22:03:52.277
> 
> 标签：iphone, objective-c, ios

我的 Objective-C 相当生锈或根本不存在。我试图弄清楚这段代码是如何做的，以便修改它并遇到一些麻烦。这段代码基本上根据它拥有的数据在 ipad UIView 上的像素位置（沿着 iPad 的宽度，如密度或列图）绘制线条。从数据中，它计算出要分配的值，然后另一种方法提取信息。

在 .h 文件中，声明了这个 ivars

```
ushort *mapBins;
int mapBinSize;
int mapBinMin;
int mapBinMax; 
```

然后在 .m 中（注释掉的代码是我想要做的）

```
mapBins = 1024;
mapBins = malloc(mapBinSize * sizeof(ushort));
memset(mapBins, 0, mapBinSize * sizeof(ushort));

int pixelPos = 0;
// populate bins
for (int l=0; l<[locs count]; l++) // locs is a member variable that has positions to draw where there is valid data, everything else is blank
{
    int sLoc = [[locs objectAtIndex:l] intValue];
    pixelPos = (sLoc - self.startPos) / [self basesPerPixel];
    int index = pixelPos;
    if (index > mapBinMax) {
        continue;
    }
    if (index < 0 )
    {
        continue;
    }
        //        if ([m.type rangeOfString:@"A"].location == NSNotFound) {
//            mapBins[index] = 0;
//        }
//        else {
//            mapBins[index] = 1;
//            NSLog(@"1");
//        }
//        if ([m.type rangeOfString:@"T"].location == NSNotFound) {
//            mapBins[index] = 0;            
//        }
//        else {
//            mapBins[index] = 2;
//            NSLog(@"2");
//        }

    mapBins[index] += 1;
}
return YES;
} 
```

所以用他们的代码，在绘图代码中，它基本上检查

```
 if (mapBins[posX] == 0) {
        [blank setStroke];
    }
 else {
      [YELLOW_COLOR setStroke];
 } 
```

对于每个像素。所以现在我想根据我从数据中获得的信息来改变颜色。就像在注释掉的代码中一样，它显示了我正在尝试做的一部分。

我不明白的是，我将 mapBin[index] 设置为 0 以外的值。我通过控制台上的 NSLog(@"1") 语句看到了这一点。但是，如果我通过执行以下操作在循环结束时记录输出： `NSLog(@"%i", mapBins[posX]);`我得到 0 作为输出。当我尝试绘制它时，我得到一个空白笔画而不是彩色笔画，因为值为 0。

是不是发生了一些我在 C 中不理解的事情？我收集的是他们正在这样做（虽然可能是错误的）：

*   将 mapBinSize 设置为一屏长度或 1024 像素的大小
*   为该数组创建内存？
*   然后根据数据，如果该 bin 有值，则添加一个数字，以便稍后在该区域绘制一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:12:10.370

您注释掉的逻辑将始终导致 0 或 2。无论您从与 @"A" 的比较中设置什么，都将被以下 if/else 无条件地覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:13:34.140

从上下文来看，我猜这是：

```
mapBins = 1024; 
```

...应该是这样的：

```
mapBinSize = 1024; 
```

您发布的代码中也没有提及，`snpMapBins`并且您正在谈论的代码已被注释掉。

看起来您发布的代码并不代表您实际运行的代码。你能发布实际的代码吗？

# box-api - api 2.0 文件上传响应

> ID：10627404
> 
> 赞同：0
> 
> 时间：2012-05-16T22:04:13.643
> 
> 标签：box-api

api 2.0 文档说，在成功上传文件后，将返回一个完整的文件对象，但以下是我在 Postman 和 python3 中上传文件时返回的 json：

```
{
    "total_count":1,
    "entries":[
        {
            "type":"file",
            "id":"2244718677",
            "name":"api.py",
            "shared":"0",
            "parent_folder":
                {
                "id":"0"
                }
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:44:08.223

这是一个错误。返回的对象应该是一个完整的文件对象。我们目前正在努力解决这个问题。解决后，我将在此处更新我的回复。

# java - 如何在 OS X 上全局设置 java 系统属性？

> ID：10627405
> 
> 赞同：11
> 
> 时间：2012-05-16T22:04:17.730
> 
> 标签：java, air, headless

## 短篇故事

我需要一种系统级别的方法来***为所有 java 调用***`java.awt.headless`设置属性。也就是说，使用不是一种选择，因为 java 是从我无法访问的地方调用的（例如，从另一个用 Java/C/等编写的工具中）`true` *`-Djava.awt.headless=true`*

 *## 很长的故事

我正在使用一堆用 Java 编写的工具（特别是 Adob​​e 的 Air ADT），它们依赖于 AWT 类。当我在控制台上运行这些工具时，它们工作正常。但是当我从 SSH 会话运行它们时，它们会以`java.lang.InternalError: Can't connect to window server - not enough permissions`. 谷歌搜索我发现将 java.awt.headless 设置为 true 可以解决问题。它没有，这是因为 ADT 本身会生成***没有*** `-Djava.awt.headless=true`.

是否有任何系统级方法可以确保在调用 Java 时设置此属性？也许一些系统awt属性文件或等效文件？

在最坏的情况下，我可以尝试用`/usr/bin/java`添加此参数的 shell 脚本替换，`"$@"`但我希望避免这种情况。（更新：为了确保我的理论是正确的，尝试了这个 shell script hack，它确实解决了问题。只是希望有一个更干净的解决方案）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T22:40:13.693

使用`_JAVA_OPTIONS`而不是`JAVA_OPTS`. `_JAVA_OPTIONS`运行java时会自动获取。

```
export _JAVA_OPTIONS=-Djava.awt.headless=true
adt ... 
```

我知道这在 OS X 上是正确的。 [这](https://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently)表明这可能也适用于 Windows 和 Linux。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-31T15:10:18.140

看起来对`JAVA_TOOL_OPTIONS`环境变量的支持至少是由 Java 6 添加到 Sun/Oracle JVM 中的。它在[Java 8 文档](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/envvars002.html)中有所描述。我还没有测试过，但它似乎也在[OpenJDK](https://bugs.openjdk.java.net/browse/JDK-4971166)中。这似乎是比这里的其他答案更标准化的解决方案。

我能够解决我遇到的问题：

`JAVA_TOOL_OPTIONS=-Djava.awt.headless=true ant ...`

这成功地将属性传播到`./gradlew`从 Ant 调用的 Gradle 构建脚本 ( )。相比之下`ant -Djava.awt.headless=true ...`，没有将属性传播到子进程。[在 github 上的 Gradle-related gist](https://gist.github.com/artem-zinnatullin/4c250e04636e25797165)中找到了这个解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T16:44:10.160

似乎没有标准的方法可以做到这一点。这是我能想到的最好的：

1.  重命名`/usr/bin/java`为`/usr/bin/java.ori`
2.  使用 755 权限创建以下`/usr/bin/java`替换：

    ```
    #!/bin/bash
    java.ori $JAVAOPT "$@" 
    ```

    然后您可以使用环境变量`JAVAOPT`来设置全局 java 选项。这些也将传播到可能产生的任何 java 子进程：

    ```
    export JAVAOPT=-Djava.awt.headless=true
    adt ... 
    ```*

# inversion-of-control - Unity（而不是温莎城堡）可以做到这一点吗？

> ID：10627406
> 
> 赞同：1
> 
> 时间：2012-05-16T22:04:18.260
> 
> 标签：inversion-of-control, unity-container

这篇[博](http://blingcode.blogspot.com/2010/12/auto-mocking-nsubstitute-with-castle.html)文展示了一种使用 Castle Windsor 和 NSubstitute 实现自动模拟的方法。

我不知道也不使用 Castle Windsor，但我确实使用 Unity 和 NSubstitute。

有没有办法用 Unity 做他展示的事情？

* * *

*以下是帖子的相关内容：*

首先，在 Windsor 中注册一个 ILazyComponentLoader：

```
var c = new WindsorContainer();    
c.Register(Component.For<LazyComponentAutoMocker>()); 
```

那么，LazyComponentAutoMocker 的实现就很简单了：

```
public class LazyComponentAutoMocker : ILazyComponentLoader
{    
  public IRegistration Load(string key, Type service, IDictionary arguments)    
  {    
    return Component.For(service).Instance(Substitute.For(new[] { service }, null));    
  }    
} 
```

你完成了！这是一个简单的单元测试示例，仅使用上面的代码：

```
[Test]
public void IDictionary_Add_Invoked()
{
  var dict = c.Resolve<IDictionary>();
  dict.Add(1, 1);
  dict.Received().Add(1, 1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:23:20.997

使用 Unity，您可以编写一个自定义容器扩展来进行自动模拟。

根据这篇[文章](http://www.agileatwork.com/auto-mocking-unity-container-extension/)，您需要以下内容：

编辑：**我的实现示例中有一个错误：请参阅这个 SO 问题**：[NSubstitute 和 Unity](https://stackoverflow.com/questions/13373302/nsubstitute-and-unity/13373992#13373992)

所以**固定的代码**如下所示：

```
public class AutoMockingContainerExtension : UnityContainerExtension
{
    protected override void Initialize()
    {
        var strategy = new AutoMockingBuilderStrategy(Container);

        Context.Strategies.Add(strategy, UnityBuildStage.PreCreation);
    }

    class AutoMockingBuilderStrategy : BuilderStrategy
    {
        private readonly IUnityContainer container;
        private readonly Dictionary<Type, object> substitutes 
           = new Dictionary<Type, object>();

        public AutoMockingBuilderStrategy(IUnityContainer container)
        {
            this.container = container;
        }

        public override void PreBuildUp(IBuilderContext context)
        {
            var key = context.OriginalBuildKey;

            if (key.Type.IsInterface && !container.IsRegistered(key.Type))
            {
                context.Existing = GetOrCreateSubstitute(key.Type);
                context.BuildComplete = true;
            }
        }

        private object GetOrCreateSubstitute(Type type)
        {
            if (substitutes.ContainsKey(type))
                return substitutes[type];

            var substitute = Substitute.For(new[] {type}, null);

            substitutes.Add(type, substitute);

            return substitute;
        }
    }
} 
```

你可以在创建你的容器时注册它：

```
IUnityContainer container = new UnityContainer();
container.AddExtension(new AutoMockingContainerExtension()); 
```

# .net - Microsoft.NET 和 Oracle 数据访问：从类型 OracleDecimal 到类型 String 的转换无效

> ID：10627415
> 
> 赞同：1
> 
> 时间：2012-05-16T22:05:10.123
> 
> 标签：.net, oracle10g

我有以下 ASP.NET 程序，它调用 Oracle 存储过程：

```
Dim objDBCon As New OracleConnection(strCon)
Try
    objDBCon.Open()
        Dim objDBCmd As New OracleCommand("Person.DeletePerson", objDBCon)
        objDBCmd.CommandType = CommandType.StoredProcedure

        Dim objParam As New OracleParameter
        objParam.ParameterName = "PersonID"
        objParam.OracleDbType = OracleDbType.Varchar2
        objParam.Direction = ParameterDirection.Input
        objParam.Value = PersonID
        objDBCmd.Parameters.Add(objParam)

        objParam = New OracleParameter
        objParam.ParameterName = "nReturn"
        objParam.OracleDbType = OracleDbType.Int64
        objParam.Direction = ParameterDirection.Output
        objDBCmd.Parameters.Add(objParam)

        objDBCmd.CommandTimeout = 30
        objDBCmd.ExecuteNonQuery()
        strResponse = objDBCmd.Parameters("nReturn").Value
Catch ex As Exception

Finally

'Cleanup code here

End Try 
```

该代码在实时环境和我的旧开发 PC 上完美运行。但是，在我的新开发 PC 上，以下行引发异常：strResponse = objDBCmd.Parameters("nReturn").Value。异常是：“从OracleDecimal类型到String类型的转换无效。如果我将strResponse的数据类型更改为'Decimal'，那么异常是：“从OracleDecimal类型到String类型的转换无效”。开发PC已安装以下内容：Windows 7、.NET Framework 3.5、Visual Studio 2008、Oracle.DataAccess 版本 10.2.0.100 和版本 2.112.1.0。我找不到有关此错误的任何信息。这是什么意思？

更新如果是因为我的新开发电脑是 64 位 Windows，我正在徘徊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:21:51.887

而不是设置：

```
objParam.OracleDbType = OracleDbType.Int64 
```

尝试：

```
objParam.DbType = System.Data.DbType.Int64 
```

**此外**，您可能需要更改：

```
strResponse = objDBCmd.Parameters("nReturn").Value 
```

至：

```
strResponse = objDBCmd.Parameters("nReturn").Value.ToString() 
```

或者：

```
strResponse = objDBCmd.Parameters("nReturn").ToString() 
```

# php - nginx 是否支持 memcached php 客户端持久连接？

> ID：10627417
> 
> 赞同：0
> 
> 时间：2012-05-16T22:05:15.657
> 
> 标签：php, nginx, memcached, webserver

我在使用 memcached 时遇到问题，在重负载下，当键实际存在时，查找键将返回 NOT FOUND 错误。通过更改为持久连接在 cli 脚本中进行测试时，我能够解决该问题。在 nginx 下，即使更改为持久连接，旧行为仍然存在。nginx中是否有一些配置可以解决这个问题？

# c# - 两个集合中的任何交集

> ID：10627419
> 
> 赞同：14
> 
> 时间：2012-05-16T22:05:27.503
> 
> 标签：c#, linq, collections

我必须找出两个集合是否有任何交集，我这样做的方式是使用 LINQ 的“Join”来获取两个集合的交集，然后我使用“Any”。但我想知道，还有其他更“优雅”的方式吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T22:06:52.230

[`Enumerable.Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)可能是您正在寻找的。

来自 MSDN：

```
int[] id1 = { 44, 26, 92, 30, 71, 38 };
int[] id2 = { 39, 59, 83, 47, 26, 4, 30 };
IEnumerable<int> both = id1.Intersect(id2);
if(both.Any())... 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T22:07:03.943

```
bool intersects = collection1.Intersect(collection2).Any(); 
```

这假定您的集合成员的相等和哈希码的“适当”实现（例如原语的情况），否则您可以传递自定义`IEqualityComparer`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-16T13:50:05.773

这是我们使用的扩展方法：

```
public static bool IntersectAny<T>(this IEnumerable<T> first, IEnumerable<T> second, IEqualityComparer<T> comparer = null) {
    return first.Intersect(second, comparer).Any();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T00:24:35.000

请查看[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)和更多详细信息，我刚刚发现[http://www.codeproject.com/Articles/383749/How- does-it-work-in-Csharp-Part-3-Csharp-Linq-in-d](http://www.codeproject.com/Articles/383749/How-does-it-work-in-Csharp-Part-3-Csharp-Linq-in-d)会很有帮助。

# regex - 如果没有评论，ctags 匹配

> ID：10627434
> 
> 赞同：2
> 
> 时间：2012-05-16T22:06:33.050
> 
> 标签：regex, vim, ctags, exuberant-ctags

在插件标签栏中，作者建议在文件中添加一些行以`.ctags`生成一些漂亮的乳胶标签。一个例子是

```
--regex-latex=/^\\section[[:space:]]*\*[[:space:]]*\{([^}]+)\}/\. \1/s,section/ 
```

我对此的唯一问题是它会匹配带有注释的行。Latex 中的注释是任何一行都跟在`%`. 所以我尝试将正则表达式修改为：

```
--regex-latex=/^[[:space:]]*[^%]+\\section[[:space:]]*(\[[^]]*\])?[[:space:]]*\{([^}]+)\}/\. \2/s,section/ 
```

我添加的部分`[[:space:]]*[^%]+`只是尝试消除具有一个或多个空格后跟`%`字符的行。但现在的问题是，以开头的行`\section{whatever}`不会生成任何标签。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:32:27.973

我想我想通了，它比我想象的要容易：

```
--regex-latex=/^[[:space:]]*[^%]+\\section[[:space:]]*(\[[^]]*\])?[[:space:]]*\{([^}]+)\}/\. \2/s,section/ 
```

应该只是

```
--regex-latex=/^[[:space:]]*[^%]*\\section[[:space:]]*(\[[^]]*\])?[[:space:]]*\{([^}]+)\}/\. \2/s,section/ 
```

因此`[^%]+`，我将其改为`[^%]*`。我想我不明白为什么，但它似乎工作。

# animation - CSS3 动画会影响页面上所有文本的权重，即使在应用了动画的元素上也是如此。任何的想法？

> ID：10627445
> 
> 赞同：1
> 
> 时间：2012-05-16T22:07:38.977
> 
> 标签：animation, css

我遇到了一个奇怪的显示错误，其中 CSS3 动画会影响页面上所有文本的重量，即使在没有应用动画的元素上也是如此。知道为什么会这样吗？

（您可以参考这个页面：[https](https://gtrot.com/chicago) ://gtrot.com/chicago ）

请注意，将鼠标悬停在蓝色标题中心的徽标上时，徽标会摆动。我通过在悬停时应用 2 个类来做到这一点：“动画”和“摆动”

```
@keyframes wobble {
    0% { transform: translateX(0%); }
    15% { transform: translateX(-5%) rotate(-4deg); }
    30% { transform: translateX(4%) rotate(3deg); }
    45% { transform: translateX(-3%) rotate(-1deg); }
    60% { transform: translateX(1%) rotate(1deg); }
    75% { transform: translateX(-1%) rotate(-1deg); }
    100% { transform: translateX(0%); }
} 
```

和

```
.animated_slow {    
    -webkit-animation-duration: .8s;
    -moz-animation-duration: .8s;
    -ms-animation-duration: .8s;
    -o-animation-duration: .8s;
    animation-duration: .8s;
} 
```

在此先感谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:40:52.940

将此添加到 html 样式中，它应该可以解决您的问题：

```
html {
    -webkit-font-smoothing: antialiased;
} 
```

# javascript - JS一次查找和替换多个单词

> ID：10627450
> 
> 赞同：0
> 
> 时间：2012-05-16T22:07:58.217
> 
> 标签：javascript, replace

我正在修改[这个](http://www.randomsnippets.com/2008/03/07/how-to-find-and-replace-text-dynamically-via-javascript/)查找/替换 JS 以便能够同时替换两个单词。

我的代码有效，除了我使用的最后一个词，如显示[here](http://jsfiddle.net/WLZjV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:25:09.030

调用 string.replace 会返回带有替换文本的新字符串，而不修改原始字符串本身。

所以你的代码：

```
replaced = haystackText.replace(...) 
```

将更新的文本设置为变量“replaced”，但从不更新变量“haystackText”。

此外，由于您这样做：

```
if (haystackText.length == 0) {
      haystackText = document.getElementById("haystack").innerHTML;
 } 
```

它只会在第一次调用该方法时设置 haystackText，而不是第二次。看起来您不需要将 haystackText 保留为全局变量（在方法之外），因此请更改以下内容：

```
 if (haystackText.length == 0) {
      haystackText = document.getElementById("haystack").innerHTML;
 } 
```

对此：

```
var haystackText = document.getElementById("haystack").innerHTML; 
```

会解决你的问题。

# jquery - 如果不使用 $(document).ready，则 url 中的 javascript 代码

> ID：10627451
> 
> 赞同：0
> 
> 时间：2012-05-16T22:08:00.273
> 
> 标签：jquery, asp.net

如果我不将我的 javascript 包装在 $(document).ready 中，则包含 javascript 文件的任何页面都会导致 http 400 响应（错误请求）。由于某种原因，该网址的末尾附加了 javascript 代码......我正在使用 asp.net mvc。有任何想法吗？

这会导致错误：

```
var location = function (vm, data) {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:11:30.963

从 URL 中删除 Javascript——它会引发跨站点脚本。

# javascript - 如何迭代 jQuery 选择器的结果？

> ID：10627454
> 
> 赞同：10
> 
> 时间：2012-05-16T22:08:31.023
> 
> 标签：javascript, jquery

当我尝试将所有`<a>`元素作为对象存储在数组中（使用`$('a')`），然后获取每个元素的位置时，它不起作用。

```
years = $('a');
for(i=0;i< years.length;i++){
   if(years[i].position().top > year.position().top){

   }
   else{

   }
} 
```

控制台说：

> 未捕获的类型错误：对象文件：///Users/.../index.html# 没有方法“位置”

当我使用类名而不是标签名选择的单个元素来执行此操作时，一切正常。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T22:26:01.460

改用这个：

```
$("a").each(function() { 
  var pos = $(this).position();
  if (pos.top > year.position().top) {
     // hurray
  }
}); 
```

还有价值是`year`多少？我更喜欢这样命名 jQuery 对象：`var $year = $("#year");`帮助`$`您记住它是一个 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:11:33.970

您可以执行以下操作：

```
var arr = [], elems = $('a');

for(var i = 0; i < elems.length; i++){
   arr[i] = elems[i];
} 
```

# javascript - Chase.com 登录流程是否使用来自 javascript 的设备唯一标识符？

> ID：10627456
> 
> 赞同：1
> 
> 时间：2012-05-16T22:08:39.860
> 
> 标签：javascript, device, uniqueidentifier

如果该设备是公共设备（之前未标记为用户已知），chas.com 登录流程能够唯一地识别设备并提示您输入识别码（可以通过电子邮件/文本接收）。

我还尝试使用 Chrome 登录公共计算机并将其标记为已知设备。FireFox 的下一次登录绕过了识别码机制。所以，它绝对不是使用cookies。

如果追逐是使用 javascript 来做的（我猜），我想知道是否有人可以阐明可能的实现。

请注意，我以chas.com 为例，对它们的实现细节并不感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:58:22.120

大通的登录流程在 iPad 上是不一样的。由于 iPad 没有闪存并且在我的笔记本电脑上运行了更多测试后，我相信大通网站正在使用浏览器 cookie 和“闪存 cookie”的组合：[http ://en.wikipedia.org/wiki/Local_shared_object](http://en.wikipedia.org/wiki/Local_shared_object)

在我的研究过程中，我还发现像[http://www.bluecava.com/](http://www.bluecava.com/)这样的公司会使用“设备指纹识别”来实现无 cookie 的方法。但是，这似乎是针对定向广告而不是身份验证的解决方案（我可能错了）。

# java - 将静态文本与数据组合到 ListView 中的最佳方法

> ID：10627461
> 
> 赞同：2
> 
> 时间：2012-05-16T22:09:14.017
> 
> 标签：java, android

下午好，

我有一些来自我可以控制的数据源的值。我将这些值填充到 ListView 中。这些值是这样的：

“你有 X 本书逾期”。这是一个愚蠢的例子，但它得到了我想要理解的重点。除了 X 之外的所有内容都是静态的，但是当 ArrayAdapter 填充 ListView 时，唯一显示的是 X。这当然是有道理的。

我可以想到两种方法来解决这个问题。一种是修改我的数据源，以便提供整个消息。在 GUI 方面让生活变得简单，但数据库人员肯定会皱眉头。

另一方面，我可以通过 id 找到 TextView 并连接 EXCEPT ListView 只是底层数据的表示，所以我真的会在从 db 获取数据之后修改数据，然后更新/重绘列表视图？

输入欣然接受。JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:18:38.730

将 Binder 附加到您的列表适配器并修改设置到其中的数据。假设您有一个名为的适配器`myAdapter`：

```
myAdapter.setViewBinder(new MyViewBinder());

public class MyViewBinder implements ViewBinder {
    @Override
    public boolean setViewValue(View view, Object data, String text){
        if(view instanceof TextView){
            ((TextView)view).setText(String.format("You have %s books overdue",text));
        }
    }
} 
```

当您到达`ViewBinder`代码中的 时，程序正在尝试填充您的列表。然后，您将检查视图是否作为实例，如果是，则使用在本例中是数据源位置 X 的元素`TextView`的变量，我们创建一个包含源数据格式的字符串。`text`

如果您为每一行填充了多个视图，则可以使用`view.getId()`

如果没有 ViewBinder，您的数据将映射到适配器上指定的视图，但是使用 ViewBinder，您可以执行各种很酷的操作，例如为行替换背景颜色或根据内容的内容使视图可点击源，可能性是无限的。

# html - 文本溢出的块级等效：省略号

> ID：10627473
> 
> 赞同：1
> 
> 时间：2012-05-16T22:10:09.203
> 
> 标签：html, css

我想提供一些小的信息，如果它们对于放入的容器 div 来说太长，它们就会消失在省略号中。如果用户点击文章的链接，我想提供一个视觉指示，表明有更多的文本。我不想使用椭圆图像，但如果需要，我可以使用 jQuery。如果可能的话，我的偏好是完全在 CSS3 中完成。

我发现 text-overflow:ellipsis 属性/值，结合 overflow:hidden 和 white-space:nowrap 允许单行版本，但是多行呢？与我的情况相比。

这些或其他属性/值对是否允许在严格的 CSS 中完成此操作？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:22:58.583

试试这个*不是我的*[小提琴](http://jsfiddle.net/k5VET/)

 *或者有[dotdotdot插件](http://dotdotdot.frebsite.nl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:23:48.743

给定 HTML 标记如下：

```
<div class="multiline"><!-- long string of text... --></div>

<div class="singleline"><!-- long string of text... --></div>​ 
```

以及以下 CSS：

```
div {
    /* aesthetic stuff, such as width, max-width, border, line-height etc... */
    overflow: hidden; /* required to hide the overflow */
    position: relative;  /* required to position the pseudo-element */
}
div.multiline {
    max-height: 12em; /* defines the 'overflow point' */
}
div.singleline {
    max-height: 1.5em;
}
div::after {
    content: '...';
    position: absolute;
    bottom: 0;
    right: 0;
    width: 2em;
    text-align: center;
    background-color: #fff;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QBjKs/)。

虽然这广泛地实现了您的意图，但在兼容的浏览器中，不幸的是，它确实存在未将生成的“省略号”与可见文本的结尾对齐的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:25:22.637

删除 CSS

```
 white-space:nowrap; 
```

并为您的 div 设置一个高度*

# javascript - 动态生成的 div 没有附加我的事件监听器

> ID：10627474
> 
> 赞同：1
> 
> 时间：2012-05-16T22:10:13.453
> 
> 标签：javascript, jquery

我制作了一个模态插件，但由于某种原因，我生成的其中一个 div 没有获得我附加到它的点击事件侦听器。

`<a class="close" id="js-close-modal"></a>`就是我所指的。我正在使用 jQuery，但这似乎没有帮助。

```
 var $caller = $(this);
        var $modal = $('.modal');

        $caller.on('click', $caller, function(e) {
            e.stopPropagation();

            $('#js-close-modal').on('click', $('#js-close-modal'), function(e) {
                $('.modal_outer').remove();
                $('#modal_page_cover').remove();
            });

            var modal_outer = $('<div />');
            modal_outer.addClass('modal_outer');
            modal_outer.css({
                top: ($(window).scrollTop()) + 'px'
            });

            var $div = $('<div />');

            var modal = $('<div />');
            modal.addClass('modal');

            var modal_inner = $('<div />');
            modal_inner.addClass('modal_inner');

            modal.append(modal_inner);
            modal_outer.append(modal);

            var body = $('body');
            body.append(modal_outer).hide().fadeIn(100);
            modal_inner.text('yo');

            var close = $('<a />');
            close.addClass('close').attr('id', 'js-close-modal');
            close.insertBefore(modal_inner);

            var page_cover = $('<div />');
            page_cover.attr('id', 'modal_page_cover');
            body.prepend(page_cover);

}); 
```

演示：[JSFiddle](http://jsfiddle.net/someprimetime/P5B4q/19/)

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:13:00.030

您正在传递一个 jQuery 对象作为`$.on`方法上的选择器。相反，您应该单独传入一个*选择器*：

```
$("body").on("click", "#js-close-modal", function(){
  /* Do stuff */
}); 
```

你在 上犯了同样的错误`$caller.on()`。您不会绑定`$.on()`到您单击的元素，而是将其绑定到该元素的父元素之一。我已将 even 绑定到`body`元素，但理想情况下，您应该将其绑定到更接近的父级。

进行我上面演示的更改修复了您的关闭按钮：http: [//jsfiddle.net/P5B4q/22/](http://jsfiddle.net/P5B4q/22/)

当然，您是在相同的代码中创建关闭按钮，因此事件委托并不是真正必要的。您可以取消上面的代码，并在创建时修改关闭按钮：

```
var close = $('<a />');
close.addClass('close').attr('id', 'js-close-modal');
close.insertBefore(modal_inner); 
```

将其替换为：

```
$("<a>", { class: "close", id: "js-close-modal" })
  .on("click", function(){ $('#modal_page_cover, #modal_outer').remove() })
  .insertBefore( modal_inner ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:14:51.010

您将 click 事件绑定到`#js-close-modal`它附加到 DOM 之前。也就是说，`$("#js-close-modal")`不是选择任何东西。您需要在添加它*之后*绑定它（即在之后`close.insertBefore`。您也可以在那个时候链接它，顺便说一下您也可以链接其他调用（元素创建`attr`，`insertBefore`...）

在不相关的建议中，您应该尝试将发布的代码数量限制在相关点。巨大的代码墙往往会吓跑人们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T22:15:28.520

绑定时`$('#js-close-modal').size()`返回0。这是因为元素还没有创建。重新安排您的代码，它应该可以工作。[这是更新的小提琴](http://jsfiddle.net/P5B4q/21/)

这是发生了什么变化：

```
(function($) {
    var methods = {
        init: function(options) {
            var settings = $.extend({
                'fade': false
            }, options);

            return this.each(function() {
                var $caller = $(this);
                var $modal = $('.modal');

                $caller.on('click', $caller, function(e) {
                    e.stopPropagation();
                    $('body').on('click', function(e) {
                        e.stopPropagation();
                        var modalCover = $('.modal_outer');
                        if (modalCover.has(e.target).length === 0) {
                            $('.modal_outer').remove();
                            $('#modal_page_cover').remove();

                        }
                    });

                    /*$('#js-close-modal').on('click', $('#js-close-modal'), function(e) {
                            $('.modal_outer').remove();
                            $('#modal_page_cover').remove();
                    });*/ //moved down

                    $('body').keyup(function(e) {
                        e.stopPropagation();
                        if (e.keyCode === 27) {
                            $('.modal_outer').remove();
                            $('#modal_page_cover').remove();
                        }
                    });

                    var modal_outer = $('<div />');
                    modal_outer.addClass('modal_outer');
                    modal_outer.css({
                        top: ($(window).scrollTop()) + 'px'
                    });

                    var $div = $('<div />');

                    var modal = $('<div />');
                    modal.addClass('modal');

                    var modal_inner = $('<div />');
                    modal_inner.addClass('modal_inner');

                    modal.append(modal_inner);
                    modal_outer.append(modal);

                    var body = $('body');
                    body.append(modal_outer).hide().fadeIn(100);
                    modal_inner.text('yo');

                    var close = $('<a />');
                    close.addClass('close').attr('id', 'js-close-modal');
                    close.insertBefore(modal_inner);
                    //moved from above.
                    $('#js-close-modal').on('click', $('#js-close-modal'), function(e) {
                            $('.modal_outer').remove();
                            $('#modal_page_cover').remove();
                    });

                    var page_cover = $('<div />');
                    page_cover.attr('id', 'modal_page_cover');
                    body.prepend(page_cover);
                });

            });

        }
    };

    $.fn.modal = function(method) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            return false;
        }
    };
})(jQuery);

$(window).ready(function() {
    $('.js-modal').modal({
        'fade': false
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:15:34.520

您可以将点击处理程序绑定到新创建的元素，而不是重新查询元素。[http://jsfiddle.net/P5B4q/20/](http://jsfiddle.net/P5B4q/20/)

```
close.on('click', function(e) {
    $('.modal_outer').remove();
    $('#modal_page_cover').remove();
}); 
```

# javascript - jQuery、Masonry、JWPlayer、Infinite-Scroll Append “ ” PHP 包含文件中的标签不起作用

> ID：10627479
> 
> 赞同：0
> 
> 时间：2012-05-16T22:10:26.277
> 
> 标签：javascript, jquery, append, jwplayer

首先，我将简要概述我要完成的工作。

我有一个 PHP 主页面，它从 mySQL 数据库加载图像、文本和视频（使用 JWPlayer 播放），并使用 Masonry 进行布局。我也在使用 Infinite-Scroll，它使用以下代码加载其他内容：

```
$container.masonry( 'appended', $newElems, true ); 
```

附加内容通过名为 loadMore.php 的 PHP 页面加载

```
<nav id="page-nav">
<a href="loadMore.php?n=2"></a>
</nav> 
```

在上面的**lodeMore.php**页面中，我正在从数据库中加载更多的文本、图像和视频。如果从数据库加载的项目是视频，我会尝试使用名为“ **videoPlayer.php** ”的 php 包含文件来显示它。这个 PHP 包含文件的代码如下：

```
<?PHP
echo"<div id='$i'>Loading the video player ...</div>
<script type='text/javascript'>
jwplayer('$i').setup({
    flashplayer: 'player.swf',
    image: '$imagePath',
    skin: 'images/slim.zip',
    width: 250,
    height: 141,
    plugins: {
            gapro: { accountid: 'UA-30548455-1'}
        },
    file: '$videoPath'
});
</script>";
?> 
```

上面的文件适用于初始加载**主页**时显示的视频内容，但是，如果它是通过**append**和**loadMore.php**页面加载的，它不会显示视频播放器的上述 javascript。

我发现您似乎不能使用 append 来附加包含`<script> </script>` 标签的内容，因为`</script>`标签会导致附加停止或关闭。我已经尝试了在这里遇到的各种解决方案，包括关闭脚本标签`<\/script>`，但是，即使这似乎也不起作用。

如果有人可以提供一些见解或一种可能的方式，我可以使用 append 来获取`<script></script>`视频播放器工作的标签，那就太好了！

*   嗨 jwatts，这是我的代码，包括您推荐的代码：

    ```
    $(function(){
    var $container = $('#container');

    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.box',
        columnWidth: 295,
        isAnimated: !Modernizr.csstransitions,
        isFitWidth: true
      });
    });

    $container.infinitescroll({
      navSelector  : '#page-nav',    // selector for the paged navigation 
      nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
      itemSelector : '.box',     // selector for all items you'll retrieve
      loading: {
          finishedMsg: 'No more pages to load.',
          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },
      // trigger Masonry as a callback
      function( newElements ) {

        // hide new items while they are loading
        var $newElems = $( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true );

          alert("test");

          //Find Image and Video Paths from Div tags
          $($newElems).find("div.content-container").each( function() {
            var imgpath = $(this).find("div.content-imgpath").text();
            var vidpath = $(this).find("div.content-vidpath").text();
            var id = $(this).find("div.content-id").attr("id");
            loadPlayer( id, imgPath, vidPath );
            });

          alert("test 2");

          //Hide Paths
          /*
          div.content-imgpath, div.content-vidpath {
            display: none;
            }
        */

        });
      }
    ); 
    ```

    });

在我打电话给 masonry 之后，我添加了你推荐的代码，但它似乎有一些麻烦，因为测试的第一个警报**有效**，但第二个**测试 2**似乎没有工作。我还推荐了隐藏图像和视频路径的代码，因为由于某种原因，它似乎阻止了通过 loadMore.php 加载其他内容。

有什么我错过的想法吗？我还在主页顶部为 JWVideo 播放器添加了**loadPlayer javascript 函数。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:30:27.307

也许在加载 jwplayer 的主页上创建一个函数

```
function loadPlayer(id, imgPath, vidPath) {
  jwplayer(id).setup({
    flashplayer: 'player.swf',
    image: imgPath,
    skin: 'images/slim.zip',
    width: 250,
    height: 141,
    plugins: {
            gapro: { accountid: 'UA-30548455-1'}
        },
    file: vidPath
  });
} 
```

像这样返回 HTML：

```
<div class="content-container">
   <div class="content-imgpath">path name here</div>
   <div class="content-vidpath">vid path here</div>
   <div class="content-id" id='$i'>Loading the video player ...</div>
</div> 
```

确保图像路径和视频路径被隐藏：

```
div.content-imgpath, div.content-vidpath {
   display: none;
} 
```

致电后`masonry`执行以下操作：

```
$($newElems).find("div.content-container").each( function() {
   var imgpath = $(this).find("div.content-imgpath").text();
   var vidpath = $(this).find("div.content-vidpath").text();
   var id = $(this).find("div.content-id").attr("id");
   loadPlayer( id, imgpath, vidpath );
}); 
```

更新：修复了上面的变量名...

# asp.net-mvc - 将输入实体与现有实体匹配？

> ID：10627482
> 
> 赞同：0
> 
> 时间：2012-05-16T22:10:39.433
> 
> 标签：asp.net-mvc, entity-framework-4.1, asp.net-mvc-4

我正在创建一个 WebAPI，前端将在其中发回实体列表。其中一些可能已经存在。

```
 public void AddTags( List<Tag> tags) //input coming from frontend js
    {
        foreach(Tag tag in tags){
          //check if tag exists in db
          //if not, create one

        }
    } 
```

我尝试使用`DbContext.Tags.Contains(tag)`，但不确定如何`tag`与数据库中现有的标签实体链接。

我正在尝试做类似下面的事情：

```
Tag tag = new Tag();
tag.name = "foo";
tag.someProp1= "hello";
tag.someProp2= "world";
tag.someProp3= "123";
//tag.id = unique id is unknown, decided by db
//find an identical entity exists in db, link `tag` to it
//if no such entity exists, add to DbContext.Tags 
```

我正在寻找类似`DbContext.Tags.Match(tag);`Where 给定一个实体，它在 db 中寻找一个相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:19:09.373

这可能对你有用。我假设它`Tag`具有某种类型的唯一标识符（可能是 Id 或 Name 属性）。所以你总是可以做这样的事情：

`DBContext.Tags.Where(t => t.Id == tag.Id);`

这对你有用吗？

**更新**

根据您上面的评论，我不确定您在追求什么。如果您只是“添加”，那么您不需要检查标签是否存在，对吗？

如果您知道要匹配的对象，您可以这样做吗？

`DBContext.Tags.Where(t => t.name == tag.name && t.prop1 == tag.prop1).FirstOrDefault();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:18:45.147

您可以在数据库中查找标记的标识符，然后执行以下操作：

如果实体已经存在：

```
context.Tags.Attach(tag);
entry.State = EntityState.Modified;
context.SaveChanges(); 
```

否则只是：

```
context.Tags.Add(tag);
context.SaveChanges(); 
```

我不确定您是否可以省略第一次检查，但至少这会起作用。

# java - wsimport 从 wsdl 生成空类 (pojos)

> ID：10627484
> 
> 赞同：0
> 
> 时间：2012-05-16T22:10:46.953
> 
> 标签：java, web-services, netbeans, wsimport

环境：NetBeans 7.1.2 glassfish 3.1.2

我编写了一个 Web 服务，其方法返回 pojos。但是，当我在 IDE 中创建 WebService 引用（或使用 wsimport 手动创建）时，为 pojos 生成的类是空的。以下非常简单的 Web 服务演示了该问题。

网络服务类

```
package snhd.dx;

import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService
public class ReturnPojo {

    @WebMethod
    public Pojo getPojo() {
        return new Pojo();
    }
} 
```

它返回的 pojo

```
package snhd.dx;

public class Pojo {

    public final static int iPojo = 1;

    public String getText() {
        return "POJO";
    }    
} 
```

当我创建 Web 服务引用时，生成的类得到以下信息：

```
package snhd.dx;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;

/**
* <p>Java class for pojo complex type.
* 
* <p>The following schema fragment specifies the expected content contained within this class.
* 
* <pre>
* &lt;complexType name="pojo">
*   &lt;complexContent>
*     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
*       &lt;sequence>
*       &lt;/sequence>
*     &lt;/restriction>
*   &lt;/complexContent>
* &lt;/complexType>
* </pre>
* 
* 
*/
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "pojo")
public class Pojo {

} 
```

我需要做什么才能使生成的 Pojo 版本包含正确的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:09:13.457

需要您使用 getter 和 setter 的方法创建一个 POJO，并在主类中使用。我希望能帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:00:45.847

您需要注释您的 POJO 类以指定 iPojo 需要包含在模式中，我认为您还需要创建一个没有参数的构造函数

如果您向我们提供 WSDL 内容，我们也会帮助您

# visual-studio - Visual Studio 中的嵌入式代码开发（尤其是对于带有 C18 的 PIC）

> ID：10627486
> 
> 赞同：5
> 
> 时间：2012-05-16T22:11:10.807
> 
> 标签：visual-studio, ide, embedded, pic, pic18

我正在使用 Visual Studio 编写桌面应用程序，我发现它非常用户友好且易于使用。

如果可能的话，我还想在 Visual Studio 中编写嵌入式代码。例如，是否可以使用 C18 或任何其他类似的基于 C 的语言为 PIC18Fxxx 系列生成 .hex 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T22:27:11.767

我用包括 PIC 在内的嵌入式系统进行了很多开发，并且大多数情况下我使用 Visual Studio，主要是因为我喜欢 VIsual Assist for C 工作。

我所做的是多目标....所以我为 PC 编译代码并使用单元测试工具来测试代码 [http://code.google.com/p/seatest/](http://code.google.com/p/seatest/)

这意味着为所有与 PIC 相关的硬件设置存根

然后，您可以通过“工具”菜单触发构建工具，或者切换到本地 IDE（如 MPLAB）以在设备上进行调试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:22:14.970

不幸的是，Visual Studio 没有对 PIC 的官方支持。而且，我从未听说有人以“非官方”的方式制作了这个。一直有关于这样的功能的谣言和猜测，但从来没有机会实现。所以，答案是“不”，没有办法用标准的 Visual Studio IDE 编译 .hex 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:52:28.760

Visual Studio（特别是 Visual C++）可以用作任何目标的任何代码的代码编辑器，但作为完整的 IDE，它还不够。

MPLAB 能够为项目输出生成文件。然后，您可以通过创建“Makefile 项目”并输入构建命令在 Visual Studio 中使用它。MPLAB 生成的 makefile 与 GNU make 而不是 MS nmake 兼容，您也必须安装它。要充分利用 Visual Studio 的代码导航和智能感知功能，您必须将所有项目标头和源代码添加到您的 Visual Studio 项目中 - 这些不会影响构建，但它们将被解析以进行源代码浏览、自动完成等。您的项目使用的命令行或编译器预定义的宏也应该添加到构建设置中，并且任何编译器的路径和其他库头文件夹也应该添加到项目包含的内容中。

这很好用，允许您编辑和构建您的代码，但可能只值得为大型项目做。编译器输出可能需要一些按摩才能以 VS 理解的格式放置，以便例如单击错误消息将您带到适当的文件/行。我过去曾使用 GNU sed 实用程序来执行此操作。您仍然需要启动 MPLAB 来加载和调试您的代码；如果打开 Visual Studio 将自动获取您在 MPLAB 中所做的任何更改（请记住不要在两个环境中进行未保存的更改！）。

这种方法的问题是无法将 MPLAB 项目与 VS 文件集和设置同步 - 您必须手动执行此操作。

另一个问题是，由于某种原因，MPLAB 生成的 makefile 不包括项目设置中的 post/pre 生成步骤。您可以手动修改 makefile 或创建一个批处理文件来执行 pre/make/post 步骤并在项目中调用它而不是简单的 make。

# python - Python 多线程和 HTTP 请求

> ID：10627490
> 
> 赞同：2
> 
> 时间：2012-05-16T22:11:18.907
> 
> 标签：python, multithreading, http

我正在开发一个 Python 后端 Web 服务器，该服务器从付费的第 3 方 API 获取实时数据。我需要非常快速地查询这个 API（每 10 秒大约 150 个查询）。因此，我创建了一个小的概念证明，它产生 200 个线程并将 url 写入队列。然后线程从队列中读取 url 并发送 HTTP 请求。第 3 方 API 返回一个称为延迟的值，即他们的服务器处理请求所用的时间。这是仅下载所有 url 的 POC 代码（不重复）。

```
_http_pool = urllib3.PoolManager()

def getPooledResponse(url):
    return _http_pool.request("GET", url, timeout=30)

class POC:
    _worker_threads = []
    WORKER_THREAD_COUNT = 200
    q = Queue.Queue()

    @staticmethod
    def worker():
        while True:
            url = POC.q.get()
            t0 = datetime.datetime.now()
            r = getPooledResponse(item)
            print "thread %s took %d seconds to process the url (service delay %d)" % (threading.currentThread().ident, (datetime.datetime.now() - t0).seconds, getDelayFromResponse(r))
            POC.q.task_done()

    @staticmethod
    def run():
          # start the threads if we have less than the desired amount
          if len(POC._worker_threads) < POC.WORKER_THREAD_COUNT:
              for i in range(POC.WORKER_THREAD_COUNT - len(POC._worker_threads)):
                  t = threading.Thread(target=POC.worker)
                  t.daemon = True
                  t.start()
                  POC._worker_threads.append(t)

          # put the urls in the queue
          for url in urls:
              POC.q.put(url)
              # sleep for just a bit so that the requests don't get sent out together (this is a limitation of the API I am using)
              time.sleep(0.3)   
POC.run() 
```

当我运行它时，前几个结果会以合理的延迟返回：

```
thread 140544300453053 took 2 seconds to process the url (service delay 1.782) 
```

但是，大约 10-20 秒后，我得到了这些东西：

```
thread 140548049958656 took 23 seconds to process the url (service delay 1.754) 
```

换句话说，即使服务器返回的延迟很小，我的线程也需要更长的时间才能完成......

如何测试以查看其他 21 秒的运行时间花在了哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:17:49.153

您应该对代码使用[分析器](http://docs.python.org/library/profile.html)。

# c++ - boost::asio::tcp::socket 关闭并取消而不调用处理程序

> ID：10627491
> 
> 赞同：7
> 
> 时间：2012-05-16T22:11:25.610
> 
> 标签：c++, boost, boost-asio

我正在用 boost 的 asio 库编写服务器。服务器使用一组 Connection 对象（围绕 boost::asio::tcp::socket 的包装类）处理许多并发连接。在 Connection 类中，使用 socket.async_read_some(...) 不断地读取套接字，并且每当使用新数据调用读取处理程序时，都会立即再次调用 socket.async_read_some() 以读取更多数据。

现在，服务器可能出于某种原因决定断开客户端，所以很自然的做法是调用 connection.close()，然后调用 socket.close()，这将导致所有挂起的异步操作被取消。这会导致使用 boost::asio::error::operation_aborted 调用读取处理程序（绑定到类 Connection 中的方法）。我的问题是：我不希望这种情况发生。

在 socket.close() 之后，我想销毁套接字和连接，然后从服务器的活动客户端列表中删除它的指针。但是读取处理程序直到 io_service.run() 的下一次迭代才会被调用，这意味着我不能立即销毁套接字或我传递给 socket.async_read_some() 的读取处理程序，直到处理程序被调用错误。所以我必须以某种方式延迟这些对象的销毁；这很烦人。

有没有安全的方法

*   取消挂起的异步操作*而不*调用任何处理程序，因此我可以在 socket.close() 之后立即安全地销毁套接字，或者
*   安全地知道何时不能调用更多的处理程序

还是我以完全错误的方式接近这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:13:50.420

当 async.operation 完成时——无论是成功还是出错——它的完成处理程序都会被调用。这是重要的保证，我认为尝试“破解”这种行为并不是一个好主意。您在用例中遇到的问题通常可以通过使用 shared_ptr (shared_from_this idiom) 来解决：绑定`shared_ptr<Connection>`到处理程序，当您遇到 operation_aborted（或其他错误）时不要发出另一个 async_read，这样当所有处理程序都完成时Connection 对象与它的套接字一起被销毁。

# c# - 在 WPF 中自定义组合框

> ID：10627495
> 
> 赞同：1
> 
> 时间：2012-05-16T22:12:07.250
> 
> 标签：c#, wpf, list, combobox

我有一张狗的名单和一张猫的名单。我想在同一个组合框中显示狗和猫的列表。但是我想区分它们。

例如。在我放置狗列表之前，它应该出现一个，让我们用不同的字体颜色将其称为“不可选择项”，上面写着“DOGS”，然后是狗列表。在狗列表之后，另一个字体颜色不同的“不可选择项目”应该是“CATS”，然后是猫列表。

有谁知道如何做到这一点？我一直在寻找，但找不到可以做到这一点的房产。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:19:09.423

用于`ComboBoxItem`您的“标题”条目。例如：

```
ComboBoxItem CBI = new ComboBoxItem();
CBI.Content = "DOGS";
CBI.IsEnabled = false;
CBI.Background = Brushes.Aqua;
comboBox1.Items.Add(CBI);
//Add dogs here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:55:36.443

我建议创建一个狗和猫都实现的接口。然后绑定到这些对象的集合，并使用 xaml 根据对象的类型更改外观。

```
public enum AnimalType
{
    Dog,
    Cat
}
public interface Animal
{
    AnimalType animal { get; set; }
    string Name { get; set; }
}

public class Cat : Animal
{
    public AnimalType animal { get; set; }
    public string Name { get; set; }

    public Cat()
    {
        animal = AnimalType.Cat;
    }
}

public class Dog : Animal
{
    public AnimalType animal { get; set; }
    public string Name { get; set; }

    public Dog()
    {
        animal = AnimalType.Dog;
    }
}

public class MyViewModel
{
    public List<Animal> MyAnimals { get; set; }

    public MyViewModel()
    {
        MyAnimals = new List<Animal>();

        var a = new Dog();
        var b = new Cat();

        MyAnimals.Add(a);
        MyAnimals.Add(b);
    }
} 
```

然后在您的 XAML 中绑定到列表（或使用可观察的集合进行自动道具更新）

```
<ComboBox ItemsSource="{Binding Path=MyAnimals}" Style="{StaticResource MyCombo}"> 
```

然后创建一种样式以根据您的数据更改外观。

```
<Style TargetType="ComboBox" x:Key="MyCombo">
                <Style.Triggers>
                    <DataTrigger Binding="AnimalType" Value="Dog">
                        <Setter Property = "Foreground" Value="Green"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style> 
```

# php - 调用 PHP Web 服务时来自 iOS 的 $_POST 数据丢失

> ID：10627501
> 
> 赞同：2
> 
> 时间：2012-05-16T22:12:50.510
> 
> 标签：php, objective-c, ios, web-services, post

我只是一个初级 iOS 开发人员，但我是一名全职 PHP 开发人员。我的 iOS 开发人员的应用程序通过 POST 调用我的 Web 服务，但无论出于何种原因，我的 Web 服务都没有正确接收响应。

这是他开发的 Objective-C 代码：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
NSData* requestData = [NSData dataWithBytes:[@"{\"method\":\"referrals\",
\"params\":
[{\"iv\":\"some iv value\",
\"data\":
{\"first_name\":\"pEBquIatFcWCrgEVHFhzhw==\",
\"cellular_ipv4\":\"ypMBZu80ZIeVrTpEH0daTg==\",
\"last_name\":\"353YvmRmSw9sKQ+lBrKKcg==\",
\"email\":\"tTiWcT14kuVVgmKuu7PoIw==\",
\"sent_via\":\"69JPdtxeHCAdG/cECGYg5A==\"}
}],
\"id\":\"1\"}" UTF8String] length:[reqString length]];

[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody: requestData];

if (urlConnection != nil) {
[urlConnection release];
urlConnection = nil;
}

urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
[request release]; 
```

据我们所知，它是通过附加到键“referrals”的 POST 发送数据。但是，当我的 PHP Web 服务检查 $_POST 变量中的 'referrals' 键时，它没有找到它。这是相关的PHP代码：

```
if(array_key_exists('referrals', $_POST))
{
    //some code
}else
{
    //error response
}

// Send JSON response
//header('Content-type: application/json');
echo $message; 
```

iOS 应用程序始终返回错误响应，该响应仅在 $_POST**中不存在 'referrals' 时设置。**我已经使用 CURL 对 PHP Web 服务进行了单元测试，并始终获得成功的结果。

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:19:35.593

你的 PHP 行不应该是这个吗？

```
if(array_key_exists('method', $_POST)) 
```

您应该在服务器端进行调试。例如，您可以将 的内容写入`var_dump($_POST)`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:32:36.027

你在哪个网址上试试这个？如果您在模拟器上运行此操作并且您的 PHP 脚本位于 localhost 上，则如果您尝试访问这样的 url，则可能无法正常工作，`http://localhost/myscript.php`因为如果模拟器是虚拟机，则模拟器可能拥有自己的 localhost

在 Android 模拟器`http://10.0.2.2`中是主机的地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T22:07:01.643

事实证明，PHP 代码不是问题，而是他用来通过 POST 发送请求的方法。我无法从他那里确切地找到具体问题是什么，因为他必须多次重写才能使其正常工作。据我了解，必须调整 Objective-C 发送 POST 数据的方式。

# python - 在tkinter中随着时间的推移标签颜色之间的交叉淡入淡出？

> ID：10627507
> 
> 赞同：0
> 
> 时间：2012-05-16T22:13:41.533
> 
> 标签：python, colors, tkinter

什么是我可以在 Tkinter 中为标签的背景在两种颜色之间实现淡入淡出的方法？*我希望计时器标签的颜色在倒计时时改变。*这些是我目前正在使用的片段（以澄清我在做什么）。

```
…

labelcolor = "#%02x%02x%02x" % (0, 0, 0)

…

def pomodoro(self, remaining = None):
    self.button.configure(state=tk.DISABLED)
    self.labelcolor = "#%02x%02x%02x" % (200, 32, 32)
    self.label.configure(bg = self.labelcolor)
    if remaining is not None:
        self.remaining = remaining

    if self.remaining <= 0:
        self.label.configure(text="Time's up!")
        self.breakcommand
    else:
        self.label.configure(text= time.strftime('%M:%S', time.gmtime(self.remaining))) #Integer to 'Minutes' and 'Seconds'
        self.remaining = self.remaining - 1
        self.after(1000, self.pomodoro)

…

self.label = tk.Label(self, text="Pick One", width=12, font="Helvetica 32", fg = "white", bg = self.labelcolor )

… 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T00:42:20.763

这是我一起编写的一个小代码，用于创建带有渐变的颜色条。我不知道它是否对你有用，但是......它有效......

```
import Tkinter as tk

def cinterp(x1,x2,x,c1,c2):
    """
    interpolate two colors.  c1 and c2 are 3-tuples of rgb values -- 
    e.g. (0,0,255)

    x1,x2 and x are used to determine the interpolation constants.
    """
    s1=float(x-x1)/(x2-x1)
    s2=1.-s1
    return [max(0, min(255, int(s1 * i + s2 * j))) for i, j in zip(c1, c2)]

root=tk.Tk()
cvs=tk.Canvas(root,width=100,height=50)
cvs.grid(row=0,column=0)
width=int(cvs['width']) 
height=int(cvs['height'])
for i in range(width):
   fill=cinterp(0,width,i,(255,0,0),(255,255,255))
   fs="#%02x%02x%02x"%(fill[0],fill[1],fill[2])
   cvs.create_rectangle(i,1,i+1,height,fill=fs,width=0)

root.mainloop() 
```

当然，您可能希望在矩形上保留一个句柄，以便稍后更改颜色，您也可以更有效地执行此操作，但这可能是一个很好的起点。

**编辑**

```
import Tkinter as tk

def cinterp(x1,x2,x,c1,c2):
    s1=float(x-x1)/(x2-x1)
    s2=1.-s1
    return [max(0, min(255, int(s1 * i + s2 * j))) for i, j in zip(c1, c2)]

root=tk.Tk()
cvs=tk.Label(root,text="Hello")
c2=(255,0,0)
c1=(255,255,255)
def updateCVS(dt,timeleft,deltat):
    timeleft=timeleft-dt
    fill=cinterp(0,deltat,deltat-timeleft,c1,c2)
    fs="#%02x%02x%02x"%(fill[0],fill[1],fill[2])
    cvs.configure(bg=fs)
    if(timeleft>0):
        timeleft=timeleft-dt
        cvs.after(int(dt*1000),updateCVS,dt,timeleft,deltat)

cvs.grid(row=0,column=0)
b=tk.Button(root,text="push me",command=lambda : updateCVS(.2,5,5))
b.grid(row=1,column=0)

root.mainloop() 
```

这在课堂上会更干净，但希望你明白这一点。

# facebook - 检测移动 Web 应用程序是否在本机 Facebook 应用程序中

> ID：10627509
> 
> 赞同：2
> 
> 时间：2012-05-16T22:14:05.293
> 
> 标签：facebook, web-applications, mobile, facebook-credits

有没有办法检测我们的移动 Web 应用程序是显示在原生 Facebook iOS 应用程序的 WebView 内，还是独立运行？

据我们了解，我们不允许从其框架内获取 Facebook 积分，但我们*可以*从我们自己的独立 Web 应用程序（或通过 Safari）中接受它们。

但是我们如何检测我们是否可以接受当前状态的信用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:34:02.953

[在这里](https://developers.facebook.com/docs/credits/build/)找到了答案。使用此代码：

```
if (FB.UA.nativeApp()) {
  // Hide your credits stuff
} 
```

# java - 来自 cmdline 的 Junit - java.lang.ClassNotFoundException

> ID：10627510
> 
> 赞同：2
> 
> 时间：2012-05-16T22:14:07.360
> 
> 标签：java, eclipse, bash, junit4, noclassdeffounderror

我有一个从 Eclipse 成功运行的 junit 测试套件。当我尝试运行 jar 时

```
java -jar AppTest.jar 
```

我得到以下信息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/junit/runner/JUnitCore
at appdirect.AppTest.main(AppTest.java:18)
Caused by: java.lang.ClassNotFoundException: org.junit.runner.JUnitCore
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 1 more 
```

我知道 jar 已成功创建，因为我正在创建日志（从 AppTest 以编程方式）并回显 $PATH 打印 junit.jar 所在的目录。

我如何确保当我在 Eclipse 中震动时，我拿起了所有的 junit 罐子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:17:04.620

您需要将 junit jar 添加到*classpath*，而不是系统的路径。

一种方法是将类路径设置为指向 junit.jar 和 AppTest.jar 并调用您的 main.jar。

```
java -cp /path/to/junit.jar:/path/to/AppTest.jar com.example.Main 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:57:00.817

信不信由你，这就像确保我在向导中导出为“可运行 Jar”并使用“提取所需库...”选项一样简单。我一直试图将其作为普通罐子导出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T22:22:35.887

路径可能会打印你的罐子，但类路径中的罐子。还有一个称为环境变量的环境变量`CLASSPATH`，您需要在其中附加您的 junit jar 并尝试运行您的`AppTest.jar`

[如何设置类路径](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/classpath.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T22:35:53.580

在主 Jar 的清单中添加对另一个 Jar 的引用。

# facebook - 为什么我得到一个响应代码：200 当我把所有的 这是我在使用 facebook 调试器时得到的结果：http: 问问题 问问题 2012-05-16T22:14:28.310 3375 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 这是我在使用 facebook 调试器时得到的结果：http: //developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fwww.towertheatermiami.com%2FTeventDetails.aspx%3FSeriesId% 3D8874 响应代码：200 获取的 URL： http ://www.towertheatermiami.com/TeventDetails.aspx?SeriesId=8874 我意识到在推荐或撰写评论时，此页面未正确发布到 Facebook。图片和内容根本没有出现在我的 Facebook 个人资料中。 在 pg_prepare 中使用 LIKE 通配符 我一直在尝试在准备好的语句中使用 LIKE，但是由于使用通配符 % 导致语法错误，php 不会执行该语句。 这是代码 $query = pg_prepare($conn, "MyStatement", 'SELECT "Query" from "MyTable" WHERE "Query" LIKE $1% ORDER BY "MyColumn" DESC;'); $result = pg_execute($conn, "MyStatement", array($my_param)); 问题是 php 在第二行向我显示了一个警告，声称存在语法错误。 facebookmetatag 4 1 回答 1 This answer is useful 1 响应代码 200 表示 Facebook 能够抓取您的页面。 我在您的 URL 中看到的问题是它返回 404 错误并且您重定向到自定义 404。Facebook 正在从您的自定义错误页面中抓取标签。 于 2012-11-11T05:34:45.233 回答 Related 3 go - 如果我有一个定义为字符串常量的类型，为什么我不能将该类型作为实际字符串传递给函数？ 2 android - 在列表视图中显示数据库中的图像 2 sitecore - 添加 Sitecore 占位符时出现“不允许空字符串”错误 1 xml - Flash AS3 从服务器加载 XML（来自 Flash Pro 和 Flash Builder） 1 java - 在 Maven 模块之间共享依赖关系 2 c# - 已经有一个打开的 DataReader 必须先关闭 2 c# - Task.Factory.StartNew，保持相同的线程 1 wpf - 在 WPF 中为自定义控件上的继承属性设置默认值 2 mysql - 从 INFORMATION_SCHEMA.COLUMNS 中选择 MySQL 需要 > 1 分钟 1 jsp - 无法将 jsp 参数值发送到 struts2 中的操作类 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10627511
> 
> 赞同：0
> 
> 时间：
> 
> 标签：facebook, metatag

这是我在使用 facebook 调试器时得到的结果：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fwww.towertheatermiami.com%2FTeventDetails.aspx%3FSeriesId% 3D8874](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.towertheatermiami.com%2FTeventDetails.aspx%3FSeriesId%3D8874)

响应代码：200 获取的 URL： [http ://www.towertheatermiami.com/TeventDetails.aspx?SeriesId=8874](http://www.towertheatermiami.com/TeventDetails.aspx?SeriesId=8874)

我意识到在推荐或撰写评论时，此页面未正确发布到 Facebook。图片和内容根本没有出现在我的 Facebook 个人资料中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:34:45.233

响应代码 200 表示 Facebook 能够抓取您的页面。

我在您的 URL 中看到的问题是它返回 404 错误并且您重定向到自定义 404。Facebook 正在从您的自定义错误页面中抓取标签。

# php - 在 pg_prepare 中使用 LIKE 通配符

> ID：10627514
> 
> 赞同：10
> 
> 时间：2012-05-16T22:14:59.743
> 
> 标签：php, string, postgresql-8.4

我一直在尝试在准备好的语句中使用 LIKE，但是由于使用通配符 % 导致语法错误，php 不会执行该语句。

这是代码

```
$query = pg_prepare($conn, "MyStatement", 
    'SELECT "Query" from "MyTable" 
     WHERE "Query" LIKE $1% 
     ORDER BY "MyColumn" DESC;');

$result = pg_execute($conn, "MyStatement", array($my_param)); 
```

问题是 php 在第二行向我显示了一个警告，声称存在语法错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T00:46:53.797

我在使用 PDO 适配器绑定参数时遇到了同样的问题。解决方案是将“％”与变量一起传递：

```
$query = pg_prepare($conn, "MyStatement", 
'SELECT "Query" from "MyTable" 
 WHERE "Query" LIKE $1 
 ORDER BY "MyColumn" DESC;');

$result = pg_execute($conn, "MyStatement", array($my_param."%")); 
```

如果你需要

```
...LIKE '%param%' ... 
```

那么您的查询将是：

```
$result = pg_execute($conn, "MyStatement", array("%".$my_param."%")); 
```

# c - WAV 文件分析 C (libsndfile, fftw3)

> ID：10627517
> 
> 赞同：10
> 
> 时间：2012-05-16T22:15:21.820
> 
> 标签：c, fft, wav, fftw, libsndfile

我正在尝试开发一个简单的 C 应用程序，它可以在 WAV 文件中的给定时间戳的某个频率范围内给出 0-100 的值。

示例：我的频率范围为 44.1kHz（典型的 MP3 文件），我想将该范围分成 n 个范围（从 0 开始）。然后我需要得到每个范围的幅度，从 0 到 100。

**到目前为止我所管理的：**

使用 libsndfile 我现在能够读取 WAV 文件的数据。

```
infile = sf_open(argv [1], SFM_READ, &sfinfo);

float samples[sfinfo.frames];

sf_read_float(infile, samples, 1); 
```

但是，我对 FFT 的理解相当有限。但我知道为了在我需要的范围内获得振幅是必需的。但是我该如何从这里继续前进？我找到了图书馆 FFTW-3，它似乎适合这个目的。

我在这里找到了一些帮助：[https ://stackoverflow.com/a/4371627/1141483](https://stackoverflow.com/a/4371627/1141483)

并在这里查看了 FFTW 教程：[http ://www.fftw.org/fftw2_doc/fftw_2.html](http://www.fftw.org/fftw2_doc/fftw_2.html)

但由于我不确定 FFTW 的行为，我不知道从这里开始。

还有一个问题，假设您使用 libsndfile：如果您强制读取单通道（使用立体声文件），然后读取样本。那么您实际上只会读取整个文件的一半样本吗？其中一半来自通道 1，还是会自动将其过滤掉？

非常感谢您的帮助。

编辑：我的代码可以在这里看到：

```
double blackman_harris(int n, int N){
double a0, a1, a2, a3, seg1, seg2, seg3, w_n;
a0 = 0.35875;
a1 = 0.48829;
a2 = 0.14128;
a3 = 0.01168;

seg1 = a1 * (double) cos( ((double) 2 * (double) M_PI * (double) n) / ((double) N - (double) 1) );
seg2 = a2 * (double) cos( ((double) 4 * (double) M_PI * (double) n) / ((double) N - (double) 1) );
seg3 = a3 * (double) cos( ((double) 6 * (double) M_PI * (double) n) / ((double) N - (double) 1) );

w_n = a0 - seg1 + seg2 - seg3;
return w_n;
}

int main (int argc, char * argv [])
{   char        *infilename ;
SNDFILE     *infile = NULL ;
FILE        *outfile = NULL ;
SF_INFO     sfinfo ;

infile = sf_open(argv [1], SFM_READ, &sfinfo);

int N = pow(2, 10);

fftw_complex results[N/2 +1];
double samples[N];

sf_read_double(infile, samples, 1);

double normalizer;
int k;
for(k = 0; k < N;k++){
    if(k == 0){

        normalizer = blackman_harris(k, N);

    } else {
        normalizer = blackman_harris(k, N);
    }

}

normalizer = normalizer * (double) N/2;

fftw_plan p = fftw_plan_dft_r2c_1d(N, samples, results, FFTW_ESTIMATE);

fftw_execute(p);

int i;
for(i = 0; i < N/2 +1; i++){
    double value = ((double) sqrtf(creal(results[i])*creal(results[i])+cimag(results[i])*cimag(results[i]))/normalizer);
    printf("%f\n", value);

}

sf_close (infile) ;

return 0 ;
} /* main */ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T22:00:13.847

那么这一切都取决于你所追求的频率范围。FFT 通过采集 2^n 个样本并为您提供 2^(n-1) 个实数和虚数来工作。我不得不承认，我对这些价值观到底代表什么感到很模糊（我有一个朋友承诺会和我一起经历这一切，而不是在他遇到财务问题时我借给他；））围绕一个圆的一个角。实际上，它们为您提供了每个频率区间的正弦和余弦的角度参数的 arccos，可以从中完美地重建原始 2^n 样本。

无论如何，这具有巨大的优势，您可以通过取实部和虚部的欧几里德距离 (sqrtf( (real * real) + (imag * imag) )) 来计算幅度。这为您提供了一个非标准化的距离值。然后可以使用该值来构建每个频带的幅度。

所以让我们订购 10 FFT (2^10)。您输入了 1024 个样本。您对这些样本进行 FFT，然后返回 512 个虚值和实值（这些值的特定顺序取决于您使用的 FFT 算法）。因此，这意味着对于 44.1Khz 音频文件，每个 bin 代表 44100/512 Hz 或每个 bin 约 86Hz。

应该从中脱颖而出的一件事是，如果您使用更多样本（在处理图像等多维信号时来自所谓的时间或空间域），您将获得更好的频率表示（在所谓的频域中）。然而，你为另一个牺牲了一个。这就是事情的发展方式，你将不得不忍受它。

基本上，您需要调整频率箱和时间/空间分辨率以获得所需的数据。

首先是一些命名法。我前面提到的 1024 个时域样本称为你的窗口。通常，在执行此类过程时，您需要将窗口滑动一些量以获得您 FFT 的下一个 1024 个样本。显而易见的做法是抽取样本 0->1023，然后是 1024->2047，依此类推。不幸的是，这并没有给出最好的结果。理想情况下，您希望在一定程度上重叠窗口，以便随着时间的推移获得更平滑的频率变化。最常见的是人们将窗口滑动一半的窗口大小。即你的第一个窗口将是 0->1023 第二个 512->1535 等等。

现在这又带来了另一个问题。虽然此信息提供了完美的逆 FFT 信号重建，但它会给您带来一个问题，即频率在某种程度上泄漏到环绕声箱中。为了解决这个问题，一些数学家（比我聪明得多）提出了[窗口函数](http://en.wikipedia.org/wiki/Window_function)的概念。窗函数在频域中提供了更好的频率隔离，但会导致时域中的信息丢失（即，在使用窗函数 AFAIK 之后，不可能完美地重建信号）。

现在有各种类型的窗口函数，从矩形窗口（实际上对信号没有任何作用）到提供更好频率隔离的各种函数（尽管有些函数也可能会杀死您可能感兴趣的周围频率！！）。唉，没有一种尺寸适合所有人，但我是 blackmann-harris 窗口函数的忠实粉丝（对于频谱图）。我认为它给出了最好看的结果！

然而，正如我之前提到的，FFT 为您提供了一个未归一化的频谱。要归一化频谱（在计算欧几里德距离之后），您需要将所有值除以归一化因子（我[在这里](https://stackoverflow.com/a/8541731/131140)更详细地介绍）。

这种标准化将为您提供一个介于 0 和 1 之间的值。因此，您可以轻松地将该值乘以 100 以获得 0 到 100 的比例。

然而，这还不是结束的地方。您从中获得的频谱相当不令人满意。这是因为您正在使用线性比例查看幅度。不幸的是，人耳使用对数刻度听到。这反而会导致频谱图/频谱的外观出现问题。

为了解决这个问题，您需要将这些 0 到 1 的值（我称之为“x”）转换为分贝刻度。标准转换为[20.0f * log10f( x )](http://en.wikipedia.org/wiki/DBFS)。然后，这将为您提供一个值，其中 1 已转换为 0，0 已转换为 -infinity。您的大小现在处于适当的对数刻度中。然而，它并不总是那么有帮助。

此时您需要查看原始样本位深度。在 16 位采样时，您会得到一个介于 32767 和 -32768 之间的值。这意味着您的[动态范围](http://en.wikipedia.org/wiki/Dynamic_range)是 fabsf( 20.0f * log10f( 1.0f / 65536.0f ) ) 或 ~96.33dB。所以现在我们有了这个值。

取我们从上面的 dB 计算中得到的值。将这个 -96.33 值添加到它。显然，最大幅度 (0) 现在是 96.33。现在按相同的值进行除法运算，您现在的值范围从 -infinity 到 1.0f。将下端钳位到 0，您现在有一个从 0 到 1 的范围，并将其乘以 100，您就有了最终的 0 到 100 范围。

这比我最初的意图更像一个怪物帖子，但应该为您提供如何为输入信号生成良好频谱/频谱图的良好基础。

*和呼吸*

进一步阅读（对于已经找到它的原始海报以外的人）：

[将 FFT 转换为频谱图](https://stackoverflow.com/questions/1679974/converting-an-fft-to-a-spectogram/10643179)

***编辑***：顺便说一句，我发现吻 FFT 更容易使用，我执行前向 fft 的代码如下：

```
CFFT::CFFT( unsigned int fftOrder ) :
    BaseFFT( fftOrder )
{
    mFFTSetupFwd    = kiss_fftr_alloc( 1 << fftOrder, 0, NULL, NULL );
}

bool CFFT::ForwardFFT( std::complex< float >* pOut, const float* pIn, unsigned int num )
{
    kiss_fftr( mFFTSetupFwd, pIn, (kiss_fft_cpx*)pOut );
    return true;
} 
```

# wpf - 阻止 WPF 文本框增长

> ID：10627524
> 
> 赞同：3
> 
> 时间：2012-05-16T22:15:50.260
> 
> 标签：wpf, textbox

我花了两个小时研究如何避免在输入长文本时我的 WPF TextBox 控件增长，但我无法做到这一点，即使我已经阅读了一些关于它的答案，比如这些答案：

[停止-wpf-textbox-from-growth-with-text](https://stackoverflow.com/questions/3720855/stopping-wpf-textbox-from-growing-with-text)

[wpf-allow-textbox-to-be-resized-but-not-to-grow-on-user-input](https://stackoverflow.com/questions/604952/wpf-allow-textbox-to-be-resized-but-not-to-grow-on-user-input)

[wpf-how-to-stop-textbox-from-autosizing](https://stackoverflow.com/questions/4465646/wpf-how-to-stop-textbox-from-autosizing)

我的代码如下：

```
<Grid>
      <TextBox Margin="6,6,8,28" Name="textBox1" AcceptsTab="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Visible" AcceptsReturn="True"/>
      <CheckBox Content="Case sensitive" HorizontalAlignment="Left" Margin="7,0,0,2" Name="checkBox1" Height="16" VerticalAlignment="Bottom" />
</Grid> 
```

我尝试过的一件事是：

```
MaxWidth={Binding ElementName=MyGrid, Path=ActualWidth} 
```

但这对我不起作用。

我还尝试将以下属性添加到网格中：

```
ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
```

或者

```
<Border x:Name="b" Grid.Column="1"/>
<TextBox Width="{Binding ActualWidth, ElementName=b}" ....... /> 
```

但它也没有奏效。

当用户拉伸窗口时，我需要我的控件来增长，而不是在插入长文本时。

对于这个问题，您有不同的答案吗？我可以尝试一下吗？

**更新！**

我注意到一些非常奇怪的事情：如果我手动拉伸窗口，当插入长文本时文本框会停止增长。没关系。但是我需要在每次运行程序时都不必拉伸窗口来实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:28:27.293

移除 TextBox 边框并将其放入 ScrollViewer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:18:57.433

接下来尝试做：

```
<ScrollViewer MaxHeight={Binding ElementName=MyGrid, Path=ActualWidth} BorderThickness="0">                    
      <TextBox Margin="6,6,8,28" Name="textBox1" AcceptsTab="True" TextWrapping="Wrap" AcceptsReturn="True"/>          
</ScrollViewer> 
```

# sql-server-2008 - 从复杂的选择和内部连接语句更新表 - tsql

> ID：10627525
> 
> 赞同：0
> 
> 时间：2012-05-16T22:16:01.227
> 
> 标签：sql-server-2008, tsql

此代码非常适合初始插入到表中。但现在我需要能够进行持续更新以将新行附加到表中......我是否需要为我插入的每个项目做一个 SET。实际上，我已经尝试过这样做，但它仍然会抱怨。

```
CREATE TABLE dbo.Calcs
(
    OutageDate DATE,
    StartTime TIME(7),
    EndTime TIME(7),
    Duration INT
);

INSERT dbo.Calcs SELECT '20101110', '16:00', '17:30', 90;

INSERT dbo.Calcs SELECT '20101111', '13:00', '14:02', 62;
INSERT dbo.Calcs SELECT '20101112', '17:00', '18:00', 60;
INSERT dbo.Calcs SELECT '20101113', '16:05', '16:25', 20;
INSERT dbo.Calcs SELECT '20101114', '16:59', '18:01', 62;
INSERT dbo.Calcs SELECT '20101115', '22:15', '01:30', 165;

CREATE TABLE dbo.TableIWantUpdated
(
    OutageDate DATE,
    StartHour TIME(7),
    StartMinutes TIME(7),
    StartTime TIME(7),
    EndHour int,
    EndMinutes int,
    EndTime TIME(7),
    Duration INT
);

;WITH n(n) AS 
(
  SELECT TOP 24 ROW_NUMBER() OVER (ORDER BY [object_id])
  FROM sys.objects
),
x AS
(
  SELECT 
    o.OutageDate, StartHour = (DATEPART(HOUR, StartTime) + n.n - 1) % 24,
    StartTime, EndTime, Duration,
    rn = ROW_NUMBER() OVER (PARTITION BY o.OutageDate, o.StartTime ORDER BY n.n)
  FROM n INNER JOIN dbo.Calcs AS o
  ON n.n <= CEILING(DATEDIFF(MINUTE, CONVERT(DATETIME, StartTime), 
    DATEADD(DAY, CASE WHEN EndTime < StartTime THEN 1 ELSE 0 END, 
    CONVERT(DATETIME, EndTime)))/60.0)
 ),
 mx AS (SELECT OutageDate, StartTime, minrn = MIN(rn), maxrn = MAX(rn) 
   FROM x GROUP BY OutageDate, StartTime)

 -- I want to use the below inner join from the CTE to update a table now
 UPDATE [dbo].[TableIWantUpdated]
 SELECT 
x.OutageDate, 
    x.StartHour, 
    StartMinutes = CASE 
      WHEN x.rn = mx.minrn THEN DATEPART(MINUTE, x.StartTime) ELSE 0 END,
    EndHour = x.StartHour + 1, 
    EndMinutes = CASE
      WHEN x.rn = mx.maxrn THEN DATEPART(MINUTE, x.EndTime) ELSE 0 END,
    x.StartTime, 
    x.EndTime,
    x.Duration
    --this is where I did the initial insert of data...but now I want it to be able to update
    --INTO [dbo].[TableIWantUpdated] FROM x INNER JOIN mx
 FROM x INNER JOIN mx 
 ON x.OutageDate = mx.OutageDate
 AND x.StartTime = mx.StartTime
 ORDER BY x.OutageDate, x.rn;
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:44:10.777

`INSERT INTO`那么应该工作。我也在删除`ORDER BY`底部的。

```
;WITH n(n) AS 
(
  SELECT TOP 24 ROW_NUMBER() OVER (ORDER BY [object_id])
  FROM sys.objects
),
x AS
(
  SELECT 
    o.OutageDate, StartHour = (DATEPART(HOUR, StartTime) + n.n - 1) % 24,
    StartTime, EndTime, Duration,
    rn = ROW_NUMBER() OVER (PARTITION BY o.OutageDate, o.StartTime ORDER BY n.n)
  FROM n INNER JOIN dbo.Calcs AS o
  ON n.n <= CEILING(DATEDIFF(MINUTE, CONVERT(DATETIME, StartTime), 
    DATEADD(DAY, CASE WHEN EndTime < StartTime THEN 1 ELSE 0 END, 
    CONVERT(DATETIME, EndTime)))/60.0)
 ),
 mx AS (SELECT OutageDate, StartTime, minrn = MIN(rn), maxrn = MAX(rn) 
   FROM x GROUP BY OutageDate, StartTime)

 -- I want to use the below inner join from the CTE to update a table now
 INSERT INTO [dbo].[TableIWantUpdated]
 SELECT 
x.OutageDate, 
    x.StartHour, 
    StartMinutes = CASE 
      WHEN x.rn = mx.minrn THEN DATEPART(MINUTE, x.StartTime) ELSE 0 END,
    EndHour = x.StartHour + 1, 
    EndMinutes = CASE
      WHEN x.rn = mx.maxrn THEN DATEPART(MINUTE, x.EndTime) ELSE 0 END,
    x.StartTime, 
    x.EndTime,
    x.Duration
    --this is where I did the initial insert of data...but now I want it to be able to update
    --INTO [dbo].[TableIWantUpdated] FROM x INNER JOIN mx
 FROM x INNER JOIN mx 
 ON x.OutageDate = mx.OutageDate
 AND x.StartTime = mx.StartTime
 --ORDER BY x.OutageDate, x.rn;
GO 
```

# c# - 在 Silverlight 中将字典集合绑定到 ListBox

> ID：10627529
> 
> 赞同：0
> 
> 时间：2012-05-16T22:16:10.077
> 
> 标签：c#, silverlight

我有一个字典集合，我需要将它绑定到 Silverlight ListBox。我无法使用 Key 值绑定到 ListBox。下面是示例代码..我在后面的代码中得到空记录字典..

```
Dictionary<DayOfWeek, List<Book>> bookItem = new Dictionary<DayOfWeek, List<Book>>();
<ListBox x:Name="ListValues" ItemsSource="{Binding bookItem}">

                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                          <StackPanel Orientation="Horizontal">

                     <TextBlock  Text="{Binding BookName[Tuesday]}"></TextBlock>
                             <TextBlock Text="{Binding BookDesc[Tuesday]}"></TextBlock>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:34:57.630

IDictionary.GetEnumerator 返回`KeyValuePair<TKey, TValue>`. 因此，为了绑定到您的对象，您需要使用 KeyValuePair 上的属性。这是一个如何显示数据的示例。

```
<DataTemplate>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
    </Grid>
    <!-- Display the day of week in the first column -->
    <TextBlock Text="{Binding Current.Key}"/>

    <!-- Display the books in the second column -->
    <GridView Grid.Column="1" ItemsSource="{Binding Current.Value}" />
</DataTemplate> 
```

# python - 多个实例的故障/修复的简单优先级

> ID：10627531
> 
> 赞同：0
> 
> 时间：2012-05-16T22:16:16.197
> 
> 标签：python, simulation, simpy

我一直在尝试 Simpy 手册中的总线故障示例，我真的很难理解为什么当我创建多个总线实例时，最后一个实例似乎在第一次修复后得到“顺序”。我已经修改了手册中的示例代码，略低于 initialize() 语句，以创建两个 Bus 实例（Bus1 和 Bus2）。这是我的代码：

```
from SimPy.Simulation import *

class Bus(Process):

  def operate(self,repairduration,triplength):    # PEM
     tripleft = triplength
        # "tripleft" is the driving time to finish trip
        # if there are no further breakdowns
     while tripleft > 0:
        yield hold,self,tripleft      # try to finish the trip
            # if a breakdown intervenes
        if self.interrupted():
              print self.interruptCause.name, 'at %s' %now()
              tripleft=self.interruptLeft
                # update driving time to finish
                # the trip if no more breakdowns
              self.interruptReset()        # end self-interrupted state
                # update next breakdown time
              reactivate(br,delay=repairduration)
                # impose delay for repairs on self
              yield hold,self,repairduration
              print '%s repaired at %s' %(self.name, now())
        else:   # no breakdowns intervened, so bus finished trip
              break
     print 'Bus has arrived at %s' %now()

class Breakdown(Process):
   def __init__(self,myBus):
       Process.__init__(self,name='Breakdown '+myBus.name)
       self.bus=myBus

   def breakBus(self,interval):      # Process Execution Method
       while True:
          yield hold,self,interval   # driving time between breakdowns
          if self.bus.terminated(): break
            # signal "self.bus" to break itself down
          self.interrupt(self.bus)

initialize()
for i in range(1,5):
  b=Bus('Bus%s' %i)                   # create a Bus object "b" called "Bus"
  activate(b,b.operate(repairduration=20,triplength=1000))
      # create a Breakdown object "br" for bus "b", and
  br=Breakdown(b)
      # activate it with driving time between
      # breakdowns equal to 300
  activate(br,br.breakBus(300))

simulate(until=4000)
print 'SimPy: No more events at time %s' %now() 
```

上面给出了以下输出：

```
Breakdown Bus1 at 300
Breakdown Bus2 at 300
Bus1 repaired at 320
Bus2 repaired at 320
Breakdown Bus1 at 600
Bus1 repaired at 620
Breakdown Bus2 at 620
Bus2 repaired at 640
Breakdown Bus1 at 900
Bus1 repaired at 920
Breakdown Bus2 at 920
Bus2 repaired at 940
Bus has arrived at 1060
Bus has arrived at 1060
SimPy: No more events at time 1240 
```

现在，问题是：在 t=600 点，为什么 1 号巴士在 2 号巴士发生故障之前就修好了？我原以为两辆巴士都会发生故障并以“锁定步骤”进行维修。此外，如果我创建四个总线，前三个失败并在“锁定步骤”中得到修复，如下所示；但是，在第一次维修后，4 号巴士在 20 点前下车。我无法弄清楚为什么会发生这种情况，并且希望任何人都可以提供任何见解。它总是发生在最后一个实例上。

```
Breakdown Bus1 at 300
Breakdown Bus2 at 300
Breakdown Bus3 at 300
Breakdown Bus4 at 300
Bus1 repaired at 320
Bus2 repaired at 320
Bus3 repaired at 320
Bus4 repaired at 320
Breakdown Bus1 at 600
Breakdown Bus2 at 600
Breakdown Bus3 at 600
Bus1 repaired at 620
Bus2 repaired at 620
Bus3 repaired at 620
Breakdown Bus4 at 620
Bus4 repaired at 640
Breakdown Bus1 at 900
Breakdown Bus2 at 900
Breakdown Bus3 at 900
Bus1 repaired at 920
Bus2 repaired at 920
Bus3 repaired at 920
Breakdown Bus4 at 920
Bus4 repaired at 940
Bus has arrived at 1060
Bus has arrived at 1060
Bus has arrived at 1060
Bus has arrived at 1060
SimPy: No more events at time 1240 
```

谢谢，西摩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:38:22.870

这似乎按预期工作。分解过程必须在 Bus 类中初始化和激活。

```
from SimPy.Simulation import *

class Bus(Process):

  def __init__(self,name):
    Process.__init__(self,name)
    self.name = name
    self.br=Breakdown(self)
    activate(self.br,self.br.breakBus(300))

  def operate(self,repairduration,triplength):    # PEM
     tripleft = triplength
     while tripleft > 0:
        yield hold,self,tripleft      # try to finish the trip
        if self.interrupted():
              print self.interruptCause.name, 'at %s' %now()
              tripleft=self.interruptLeft
              self.interruptReset()        # end self-interrupted state
                # update next breakdown time
              reactivate(self.br,delay=repairduration)
              yield hold,self,repairduration
              print '%s repaired at %s' %(self.name, now())
        else:   # no breakdowns intervened, so bus finished trip
              break
     print 'Bus has arrived at %s' %now()

class Breakdown(Process):
   def __init__(self,myBus):
       Process.__init__(self,name='Breakdown '+myBus.name)
       self.bus=myBus

   def breakBus(self,interval):      # Process Execution Method
       while True:
          yield hold,self,interval   # driving time between breakdowns
          if self.bus.terminated(): break
            # signal "self.bus" to break itself down
          self.interrupt(self.bus)

initialize()

for i in range(1,5):
  b=Bus('Bus%s' %i)
  activate(b,b.operate(repairduration=20,triplength=1000))

simulate(until=4000)
print 'SimPy: No more events at time %s' %now() 
```

这会导致四个 Bus 实例同时中断并同时被修复，如以下输出所示：

```
Breakdown Bus1 at 300
Breakdown Bus2 at 300
Breakdown Bus3 at 300
Breakdown Bus4 at 300
Bus1 repaired at 320
Bus2 repaired at 320 
Bus3 repaired at 320
Bus4 repaired at 320
Breakdown Bus1 at 600
Breakdown Bus2 at 600
Breakdown Bus3 at 600
Breakdown Bus4 at 600
Bus1 repaired at 620
Bus2 repaired at 620
Bus3 repaired at 620
Bus4 repaired at 620
Breakdown Bus1 at 900
Breakdown Bus2 at 900
Breakdown Bus3 at 900
Breakdown Bus4 at 900
Bus1 repaired at 920
Bus2 repaired at 920
Bus3 repaired at 920
Bus4 repaired at 920
Bus has arrived at 1060
Bus has arrived at 1060
Bus has arrived at 1060
Bus has arrived at 1060
SimPy: No more events at time 1200 
```

# vba - 基于多种样式搜索/提取文本

> ID：10627535
> 
> 赞同：0
> 
> 时间：2012-05-16T22:16:46.800
> 
> 标签：vba, ms-word

我有一个 Word 文档，其中的文本块标有名为“Princple”和“BusinessRule”的样式。这些文本块分散在整个文档中。我想按照它们出现的顺序查找这些块并将其复制到单独的文档中。我正在使用的代码是：

```
Dim SelStyle As String
'SelStyle = "Principle"
SelStyle = "BusinessRule"

Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = ""
    .Replacement.Text = ""
    .Style = SelStyle
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = True
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute

Selection.Copy
Windows("Document1").Activate
Selection.TypeParagraph
Selection.PasteAndFormat (wdFormatPlainText)
Selection.TypeParagraph
Windows("mainDoc.docx").Activate
Selection.MoveRight Unit:=wdCharacter, Count:=1 
```

如您所见，这是一个手动过程：首先取消注释 Principle，提取所有这些，然后注释 Princple 并取消注释 BusinessRule。不是很好。有什么方法可以搜索 .Style="Principle" 或 .Style="BusinessRule" 以便我按顺序获取它们？（其次，如果您有建议循环浏览整个文档来执行此操作，我将不胜感激。:-)）

谢谢 - 比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:22:47.970

为什么不将值存储在数组中？

```
Sub Sample()
    Dim SelStyle(1) As String

    SelStyle(0) = "Principle"
    SelStyle(1) = "BusinessRule"

    For i = 0 To 1
        Selection.Find.ClearFormatting
        Selection.Find.Replacement.ClearFormatting
        With Selection.Find
            .Text = ""
            .Replacement.Text = ""
            .Style = SelStyle(i)

        '
        '~~> Rest of your code
        '
    Next i
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:38:29.977

fwiw，我改变了我的方法。我没有搜索样式，而是浏览了文档中的每个段落，看看样式是“原理”还是“BusinessRule”。如果为真，那么我复制/粘贴该段落。所以我不仅得到了“或”，而且还得到了它们的顺序。

# python - 对 Django 中的 s3 ajax 上传程序进行故障排除

> ID：10627538
> 
> 赞同：0
> 
> 时间：2012-05-16T22:17:15.690
> 
> 标签：python, ajax, django, amazon-s3, boto

我正在使用：[https](https://github.com/GoodCloud/django-ajax-uploader) ://github.com/GoodCloud/django-ajax-uploader和 AWS 后端（s3 boto）。我的文件上传都是 0 字节，但是它们上传并且正确的文件名显示在正确的存储桶上。关于为什么文件都是 0 字节的任何想法？我正在寻找一些更高层次的考虑。

这是 s3 后端代码： [https ://github.com/GoodCloud/django-ajax-uploader/blob/master/ajaxuploader/backends/s3.py](https://github.com/GoodCloud/django-ajax-uploader/blob/master/ajaxuploader/backends/s3.py)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:28:15.567

我刚遇到这样的事情。尝试调用`seek(0)`文件上的方法以将其当前位置设置回开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:23:58.407

我相信如果你这样写StringIO，它会将文件指针放在最后，没有什么可以上传的。你应该做

```
buffer = StringIO(chunk) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:03:24.677

此 Ajax 上传器的 s3 后端使用 MultiPart 上传。这仅适用于大于 100MB 且每个部分必须为 5MB 或更大的文件。所以，我认为正在发生的事情是它正在启动多部分上传并完成它，但个别部分被拒绝，因为它们太小了。因此，结果是 S3 中的零长度文件。

# javascript - jquery - 变得完美 .height()

> ID：10627541
> 
> 赞同：0
> 
> 时间：2012-05-16T22:17:57.890
> 
> 标签：javascript, jquery, html, css

请看这段代码

[http://jsfiddle.net/rkumarnirmal/VG47Z/3/](http://jsfiddle.net/rkumarnirmal/VG47Z/3/)

那里没有错。所以现在检查这个

[http://jsfiddle.net/rkumarnirmal/4GrsD/6/](http://jsfiddle.net/rkumarnirmal/4GrsD/6/)

您会发现`$(document).height()`第二个 jsfiddle 中的值不同，并且红色框位于该区域之外。为什么会这样？

我想将红色框放在文档区域内的最底部，我不想使用它

```
bottom: 0px; 
```

有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:36:43.950

乍一看，问题似乎是因为您正在混合

```
 .css("height"); 
```

with '计算高度

```
 .height(); 
```

使用 .css("height") 获取文档高度以及设置最终位置。

**更新为评论：**道歉（不那么匆忙）

```
 $("body").css("height"); 
```

**仅当**在 css 中设置或最近的程序设置它时才返回高度值。

**尝试**

```
 $("body").height() 
```

而不是 $(document).height();

文档大于正文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:58:20.110

您的问题：如何使用 .css("height") 获取文档高度？

```
$(document).height(); 
```

如果你有一个有边距的对象，你可以使用

```
$(object).outerHeight(); 
```

这将占据他所有的身高

# security - 保护 KML 文件不被下载或访问

> ID：10627542
> 
> 赞同：8
> 
> 时间：2012-05-16T22:18:06.593
> 
> 标签：security, google-maps, kml, google-earth, data-protection

我正在尝试保护我的 KML 文件不被下载或轻松提取其数据。我想要的只是要在谷歌地图或谷歌地球中查看的文件，但不允许任何人“轻松”下载或提取数据（kml 文件不会公开提供）。我的 kml 文件是深度和独家分析的结果，这是我想对竞争对手隐藏的签名。

还有任何替代方法可以将 kml 转换为无法轻松获取数据的格式。我的 KML 文件具有 3D 多边形。

我理解可以以某种方式下载或提取的所有内容的概念，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T11:48:02.323

我有 4 个答案或 0 个答案，具体取决于您的项目。

1.  使用 Google Maps Api for Business（每年约 10.000 美元），您可以生成一个客户端 ID 并使用它来保护一个 Fusion Table（可以在 Google Drive 中创建），您可以在其中导入您的 KML，然后您可以使用 Google Maps 显示它阿皮。这将是一个完美的解决方案，但如果没有 Google Maps Api for Business，您的 Fusion Table 将不受保护，因此任何人都可以在 Google Drive 中访问它并查看和复制粘贴多边形的 Kml 表示。

2.  使用谷歌地图引擎[(/Lite)](https://mapsengine.google.com/map/)您也可以将 Kml 导入 Google（如果您使用 Lite，则首先需要导入 Google“我的地图”，然后从 Google Maps Engine Lite 中导入“我的地图”）。我不知道非精简版的定价。可以共享 Google Maps Engine 地图，因此它是唯一可见的，在这个唯一可见的版本中，我还没有找到下载或查看我们想要的原始 kml 数据的方法。听起来不错，但在 Maps Engine Lite 中您只能使用 3 个图层，而且我还没有找到一种方法将我的所有多边形（在我的情况下为区域）一次导入一个图层。我只能像看起来那样一点一点地导入它们（设法将总共 353 个点的 10 个多边形导入一层）。每次导入都会产生一层，可以 **编辑**：
    我可以导入所有多边形，一个多边形（由于我的多边形的算法简化）得到了一个交叉点（线交叉），一旦我修复了那个部分，导入就不再抛出任何错误，但我现在看到我只能使用包含图例的 iframe 嵌入该地图，所以这个解决方案对我来说毫无意义。

3.  仅使用可能会请求您的 KML 的 Google 地图服务器白名单将您服务器上的 KML 访问限制为 Google 服务器。问题：在网上找不到这样的清单……必须先以某种方式收集。

4.  还有一些博客条目 [保护 KML 文件免受 Google 地图中的一般公众访问](http://keelypavan.blogspot.com/2011/07/protecting-kml-files-from-general.html) 和[使用密码术保护 KML / KMZ 文件免受未经授权的访问](http://keelypavan.blogspot.com/2011/07/protect-kml-kmz-files-from-unauthorized.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:08:26.717

您的问题是基于称为“通过默默无闻的安全”的计算机安全谬误。谬误是这样的。您说您不想“轻松”下载它。你可以让它变得困难，但只要有可能，一旦有人弄清楚，他们就会编写一个脚本来自动完成它，然后它就“容易”了。你的问题没有答案，因为这是不可能的。您提供的任何内容都是可盗版的，任何数据都是可重构的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T23:57:57.537

为什么不直接保存 kml 文件并将其剪切/粘贴到密码加密的 USB 驱动器上，例如金士顿或 Kanguru 防御者。然后只需从您的 USB 磁盘打开 kml。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-31T21:04:46.480

您可以检查`$_SERVER["HTTP_USER_AGENT"]`变量，如果来自谷歌，然后从 php 生成 kml。

```
$agent = "Kml-Google";
$google = strpos($_SERVER["HTTP_USER_AGENT"], $agent);
($google !== FALSE) or die;
header('Content-Type: application/vnd.google-earth.kml+xml kml');
header('Content-Disposition: attachment; filename="otras.kml"');
?>
<?xml version="1.0" encoding="UTF-8"?>
<kml xml ... 
```

# lua - lua中的多值表

> ID：10627548
> 
> 赞同：2
> 
> 时间：2012-05-16T22:18:37.070
> 
> 标签：lua

我在lua中做一些并行操作。一线程接收，一线程处理，一线程再次发送。为了在线程之间传递数据，我一直在使用表。

可悲的是，现在我需要传递多个变量。如何创建“多值表”（每个键可以有多个值的表）而不会对性能产生太大影响，还有比使用表更有效的方法吗？

到目前为止的简化代码：

```
sendQueue = {}
processQueue = {}

function recieveLoop()
    while true do
        Wait For recieve
        table.insert(processQueue, recievedText)
    end
end

function processLoop(sender, text, raw)
    while true do
        for key,value in pairs(processQueue) do
            processData
            table.insert(recieveQueue, raw)
        end
    end
end 
```

然后对于 receiveLoop 也一样

所有这 3 个函数都是线程化的，并且彼此独立运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T23:18:48.943

表可以包含其他表，因此您可以在每条消息中存储任意数量的变量。

代替：

```
table.insert(queue, datum1) 
```

你可以有：

```
local message = {datum1, datum2}
table.insert(queue, message) 
```

或者简单地说：

```
table.insert(queue, {datum1, datum2}) 
```

包括尽可能多的“部分”到消息中。在接收端，您可以通过索引来参考消息部分：

```
print('foo:', message[1], 'bar:', message[2]) 
```

或者解压元素：

```
local foo, bar = unpack(message) -- this is `table.unpack` in Lua 5.2
print('foo:', foo, 'bar:', bar) 
```

或者您可以在消息中使用命名字段：

```
local message = {
      foo = datam1,
      bar = datum2,
}
table.insert(queue, message) 
```

等等等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:18:58.690

Lua 唯一真正的数据结构类型是 table，所以你真的别无选择，不使用 userdata (C)。但是，表可以是表的键或值。也就是嵌套。这就是您获得多个值的方式。

# c# - 如何在WPF中通过对话框根据选择绑定到集合并显示信息？

> ID：10627554
> 
> 赞同：0
> 
> 时间：2012-05-16T22:19:05.083
> 
> 标签：c#, wpf, data-binding

我对 WPF 相当陌生，我目前正在为工作创建一个桌面应用程序。我一直在对数据绑定进行一些研究，并在 MSDN Library 中看到了这篇 How-to 文章：

[http://msdn.microsoft.com/en-us/library/aa970558.aspx](http://msdn.microsoft.com/en-us/library/aa970558.aspx)

现在我面临的问题是在我的应用程序中实现这个。我想通过将信息显示在对话框而不是集合所在的同一窗口中来修改它。如何在 C#/xaml 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:58:57.773

您必须向项目添加另一个窗口。然后，您需要通过例如单击按钮从主窗口实例化该窗口。然后你必须设置那个新的窗口数据上下文。

请参阅此[链接](http://social.msdn.microsoft.com/Forums/en/wpf/thread/964c77c3-1144-4a36-9658-52885d1d8c9e)，它显示了如何创建另一个窗口并传递数据上下文。希望能帮助到你。

# objective-c - Mac OS X：使用 CGContextRef C 函数绘制到屏幕外的 NSGraphicsContext 无效。为什么？

> ID：10627557
> 
> 赞同：10
> 
> 时间：2012-05-16T22:19:09.293
> 
> 标签：objective-c, macos, cocoa, core-graphics, quartz-2d

Mac OS X 10.7.4

我正在绘制通过创建的屏幕外图形上下文`+[NSGraphicsContext graphicsContextWithBitmapImageRep:]`。

**`NSBezierPath`当我使用class**绘制到这个图形上下文中时，一切都按预期工作。

**`CGContextRef`但是，当我使用C 函数**在此图形上下文中绘图时，我看不到我的绘图结果。没有任何效果。

由于我不会进入的原因，我真的需要使用`CGContextRef`函数（而不是 Cocoa`NSBezierPath`类）进行绘制。

我的代码示例如下所示。我正在尝试画一个简单的“X”。一笔使用`NSBezierPath`，一笔使用`CGContextRef`C 函数。第一个笔画有效，第二个无效。我究竟做错了什么？

```
NSRect imgRect = NSMakeRect(0.0, 0.0, 100.0, 100.0);
NSSize imgSize = imgRect.size;

NSBitmapImageRep *offscreenRep = [[[NSBitmapImageRep alloc]
   initWithBitmapDataPlanes:NULL
   pixelsWide:imgSize.width
   pixelsHigh:imgSize.height
   bitsPerSample:8
   samplesPerPixel:4
   hasAlpha:YES
   isPlanar:NO
   colorSpaceName:NSDeviceRGBColorSpace
   bitmapFormat:NSAlphaFirstBitmapFormat
   bytesPerRow:0
   bitsPerPixel:0] autorelease];

// set offscreen context
NSGraphicsContext *g = [NSGraphicsContext graphicsContextWithBitmapImageRep:offscreenRep];
[NSGraphicsContext setCurrentContext:g];

NSImage *img = [[[NSImage alloc] initWithSize:imgSize] autorelease];

CGContextRef ctx = [g graphicsPort];

// lock and draw
[img lockFocus];

// draw first stroke with Cocoa. this works!
NSPoint p1 = NSMakePoint(NSMaxX(imgRect), NSMinY(imgRect));
NSPoint p2 = NSMakePoint(NSMinX(imgRect), NSMaxY(imgRect));
[NSBezierPath strokeLineFromPoint:p1 toPoint:p2];

// draw second stroke with Core Graphics. This doesn't work!
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx, 0.0, 0.0);
CGContextAddLineToPoint(ctx, imgSize.width, imgSize.height);
CGContextClosePath(ctx);
CGContextStrokePath(ctx);

[img unlockFocus]; 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-16T22:35:04.250

您没有指定如何查看结果。我假设您正在查看`NSImage` `img`而不是`NSBitmapImageRep` `offscreenRep`.

当您调用时`[img lockFocus]`，您正在将 current 更改为`NSGraphicsContext`要绘制的上下文`img`。所以，`NSBezierPath`绘图进入`img`，这就是你所看到的。CG 绘图进入`offscreenRep`你没有看到的地方。

与其将焦点锁定在 NSImage 上并在其中绘制，不如创建一个 NSImage 并将 offscreenRep 添加为其代表之一。

```
NSRect imgRect = NSMakeRect(0.0, 0.0, 100.0, 100.0);
NSSize imgSize = imgRect.size;

NSBitmapImageRep *offscreenRep = [[[NSBitmapImageRep alloc]
   initWithBitmapDataPlanes:NULL
   pixelsWide:imgSize.width
   pixelsHigh:imgSize.height
   bitsPerSample:8
   samplesPerPixel:4
   hasAlpha:YES
   isPlanar:NO
   colorSpaceName:NSDeviceRGBColorSpace
   bitmapFormat:NSAlphaFirstBitmapFormat
   bytesPerRow:0
   bitsPerPixel:0] autorelease];

// set offscreen context
NSGraphicsContext *g = [NSGraphicsContext graphicsContextWithBitmapImageRep:offscreenRep];
[NSGraphicsContext saveGraphicsState];
[NSGraphicsContext setCurrentContext:g];

// draw first stroke with Cocoa
NSPoint p1 = NSMakePoint(NSMaxX(imgRect), NSMinY(imgRect));
NSPoint p2 = NSMakePoint(NSMinX(imgRect), NSMaxY(imgRect));
[NSBezierPath strokeLineFromPoint:p1 toPoint:p2];

// draw second stroke with Core Graphics
CGContextRef ctx = [g graphicsPort];    
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx, 0.0, 0.0);
CGContextAddLineToPoint(ctx, imgSize.width, imgSize.height);
CGContextClosePath(ctx);
CGContextStrokePath(ctx);

// done drawing, so set the current context back to what it was
[NSGraphicsContext restoreGraphicsState];

// create an NSImage and add the rep to it    
NSImage *img = [[[NSImage alloc] initWithSize:imgSize] autorelease];
[img addRepresentation:offscreenRep];

// then go on to save or view the NSImage 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-24T09:36:11.610

我想知道为什么每个人都编写如此复杂的代码来绘制图像。除非您关心图像的精确位图表示（通常您不关心！），否则没有必要创建一个。您可以创建一个空白图像并直接绘制到它。在这种情况下，系统将创建适当的位图表示（或者可能是 PDF 表示或系统认为更适合绘图的任何内容）。

init 方法的文档

```
- (instancetype)initWithSize:(NSSize)aSize 
```

自 MacOS 10.0 以来就存在并且仍然没有被弃用，清楚地说：

> 使用此方法初始化图像对象后，您需要在尝试绘制图像之前提供图像内容。*您可以将焦点锁定在图像上并绘制到图像上，*或者您可以显式添加您创建的图像表示。

所以这就是我编写该代码的方式：

```
NSRect imgRect = NSMakeRect(0.0, 0.0, 100.0, 100.0);
NSImage * image = [[NSImage alloc] initWithSize:imgRect.size];

[image lockFocus];
// draw first stroke with Cocoa
NSPoint p1 = NSMakePoint(NSMaxX(imgRect), NSMinY(imgRect));
NSPoint p2 = NSMakePoint(NSMinX(imgRect), NSMaxY(imgRect));
[NSBezierPath strokeLineFromPoint:p1 toPoint:p2];

// draw second stroke with Core Graphics
CGContextRef ctx = [[NSGraphicsContext currentContext] graphicsPort];
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx, 0.0, 0.0);
CGContextAddLineToPoint(ctx, imgRect.size.width, imgRect.size.height);
CGContextClosePath(ctx);
CGContextStrokePath(ctx);
[image unlockFocus]; 
```

这就是所有人。

`graphicsPort`实际上是`void *`：

```
@property (readonly) void * graphicsPort 
```

并记录为

> 由图形端口表示的低级、特定于平台的图形上下文。

这可能几乎是一切，但最后的说明是

> 在 OS X 中，这是 Core Graphics 上下文，一个`CGContextRef`对象（不透明类型）。

此属性已在 10.10 中弃用，取而代之的是新属性

```
@property (readonly) CGContextRef CGContext 
```

仅在 10.10 及更高版本中可用。如果您必须支持旧系统，仍然可以使用`graphicsPort`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-01-21T08:45:49.683

@Robin Stewart 的解决方案对我来说效果很好。我能够将其压缩为 NSImage 扩展。

```
extension NSImage {
    convenience init(size: CGSize, actions: (CGContext) -> Void) {
        self.init(size: size)
        lockFocusFlipped(false)
        actions(NSGraphicsContext.current!.cgContext)
        unlockFocus()
    }
} 
```

用法：

```
let image = NSImage(size: CGSize(width: 100, height: 100), actions: { ctx in
    // Drawing commands here for example:
    // ctx.setFillColor(.white)
    // ctx.fill(pageRect)
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-04T14:35:44.967

这是绘制相同图像的 3 种方法（Swift 4）。

@Mecki 建议的方法可以生成没有`blurring`伪影（如模糊曲线）的图像。但这可以通过调整`CGContext`设置来解决（不包括在这个例子中）。

```
public struct ImageFactory {

   public static func image(size: CGSize, fillColor: NSColor, rounded: Bool = false) -> NSImage? {
      let rect = CGRect(x: 0, y: 0, width: size.width, height: size.height)
      return drawImage(size: size) { context in
         if rounded {
            let radius = min(size.height, size.width)
            let path = NSBezierPath(roundedRect: rect, xRadius: 0.5 * radius, yRadius: 0.5 * radius).cgPath
            context.addPath(path)
            context.clip()
         }
         context.setFillColor(fillColor.cgColor)
         context.fill(rect)
      }
   }

}

extension ImageFactory {

   private static func drawImage(size: CGSize, drawingCalls: (CGContext) -> Void) -> NSImage? {
      return drawImageInLockedImageContext(size: size, drawingCalls: drawingCalls)
   }

   private static func drawImageInLockedImageContext(size: CGSize, drawingCalls: (CGContext) -> Void) -> NSImage? {
      let image = NSImage(size: size)
      image.lockFocus()
      guard let context = NSGraphicsContext.current else {
         image.unlockFocus()
         return nil
      }
      drawingCalls(context.cgContext)
      image.unlockFocus()
      return image
   }

   // Has scalling or antialiasing issues, like blurred curves.
   private static func drawImageInBitmapImageContext(size: CGSize, drawingCalls: (CGContext) -> Void) -> NSImage? {
      guard let offscreenRep = NSBitmapImageRep(pixelsWide: Int(size.width), pixelsHigh: Int(size.height),
                                                bitsPerSample: 8, samplesPerPixel: 4, hasAlpha: true,
                                                isPlanar: false, colorSpaceName: .deviceRGB) else {
                                                   return nil
      }
      guard let context = NSGraphicsContext(bitmapImageRep: offscreenRep) else {
         return nil
      }
      NSGraphicsContext.saveGraphicsState()
      NSGraphicsContext.current = context
      drawingCalls(context.cgContext)
      NSGraphicsContext.restoreGraphicsState()
      let img = NSImage(size: size)
      img.addRepresentation(offscreenRep)
      return img
   }

   // Has scalling or antialiasing issues, like blurred curves.
   private static func drawImageInCGContext(size: CGSize, drawingCalls: (CGContext) -> Void) -> NSImage? {
      let colorSpace = CGColorSpaceCreateDeviceRGB()
      let bitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.premultipliedLast.rawValue)
      guard let context = CGContext(data: nil, width: Int(size.width), height: Int(size.height), bitsPerComponent: 8,
                                    bytesPerRow: 0, space: colorSpace, bitmapInfo: bitmapInfo.rawValue) else {
         return nil
      }
      drawingCalls(context)
      guard let image = context.makeImage() else {
         return nil
      }
      return NSImage(cgImage: image, size: size)
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-16T00:30:38.543

**Swift 4：**我使用这段代码，它从 UIKit 复制了方便的 API（但在 macOS 上运行）：

```
public class UIGraphicsImageRenderer {
    let size: CGSize

    init(size: CGSize) {
        self.size = size
    }

    func image(actions: (CGContext) -> Void) -> NSImage {
        let image = NSImage(size: size)
        image.lockFocusFlipped(true)
        actions(NSGraphicsContext.current!.cgContext)
        image.unlockFocus()
        return image
    }
} 
```

用法：

```
let renderer = UIGraphicsImageRenderer(size: imageSize)
let image = renderer.image { ctx in
    // Drawing commands here
} 
```

# unit-testing - 什么是 EUnit 测试生成器？

> ID：10627563
> 
> 赞同：0
> 
> 时间：2012-05-16T22:19:29.750
> 
> 标签：unit-testing, erlang, generator, eunit

我已经阅读了有关 EUnit 的[文档](http://erlang.org/doc/apps/eunit/chapter.html)，但我仍然不知道测试生成器的目的是什么。

我也在[这里](https://erlcode.wordpress.com/2010/08/30/erlang-eunit-continuation-2-test-representation/)阅读了一个不错的教程，但仍然没有运气（有点太高级了）。

我有点理解测试生成器函数返回一组测试，然后由 EUnit 执行。（那正确吗？）

不幸的是，我现在唯一有信心的是我可以编写这样的测试：

```
myfun_test() ->
assertEqual(myresult,mymod:myfun()). 
```

问题是：EUnit 中需要什么测试生成器，它们与简单测试对象有什么关系？

PS 我知道在各种自动化工具和概念的帮助下，有一个很棒的单元测试世界（[示例](https://github.com/eproxus/meck/blob/master/test/meck_tests.erl)），但我不知道如何进入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:53:10.163

我想如果你尝试为你的项目写过很多单元测试，你会在实践中发现测试生成器的价值。

如果使用测试生成器，您不需要花费时间来创建许多不同的测试函数名称，并且创建测试生成器的代码比标准函数短。

例如，以下代码来自`gproc`测试生成器的开源项目，它使用测试生成器供您参考，文件可以在`github.`

```
reg_test_() ->
    {setup,
     fun() ->
             application:start(gproc),
         application:start(mnesia)
     end,
     fun(_) ->
             application:stop(gproc),
         application:stop(mnesia)
     end,
     [
      {spawn, ?_test(?debugVal(t_simple_reg()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_simple_counter()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_simple_aggr_counter()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_update_counters()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_simple_prop()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_await()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_await_self()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_await_crash()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_simple_mreg()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_gproc_crash()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_cancel_wait_and_register()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_give_away_to_pid()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_give_away_to_self()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_give_away_badarg()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_give_away_to_unknown()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_give_away_and_back()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_select()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_select_count()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_qlc()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_get_env()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_get_set_env()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_set_env()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_get_env_inherit()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_monitor()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_monitor_give_away()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_subscribe()))}
      , ?_test(t_is_clean())
      , {spawn, ?_test(?debugVal(t_gproc_info()))}
      , ?_test(t_is_clean())
     ]}. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:47:55.557

从您在问题中链接的页面阅读：

> 简单测试函数的一个缺点是您必须为每个测试用例编写一个单独的函数（具有单独的名称）。编写测试的一种更紧凑的方式（并且更灵活，正如我们将看到的）是编写返回测试的函数，而不是测试。
> 
> 名称以 ... *test* () 结尾的函数（注意最后的下划线）被 EUnit 识别为测试生成器函数。测试生成器返回由 EUnit 执行的一组测试的表示。

*考虑对生成器进行分组*测试的可能性。除了拥有更紧凑的代码外，您还可以为测试提供*高级功能*。例如，您的一组测试的*状态*、初始化函数等等。

如果您的应用程序需要的只是一组断言，那么您可能不需要测试集。你甚至可以避免使用整个 EUnit。Erlang 中的模式匹配 (=) 运算符本身就是一个出色的测试运算符。相比：

```
assertEqual(myresult,mymod:myfun()). 
```

和：

```
myresult = mymod:myfun() 
```

# ruby - 从类内部访问外部方法

> ID：10627566
> 
> 赞同：0
> 
> 时间：2012-05-16T22:20:12.700
> 
> 标签：ruby, scope

有没有办法从类内部访问外部方法？例如：

使用 .haml 文件（因此在里面`class Haml::Engine`），有一个`class Tumblr`定义的方法`self.render`。在`Tumblr`类之外，`#haml_concat`功能完美，但返回一个`NameError`inside `Tumblr`。`#haml_concat`中定义`Haml::Helpers`。为什么`#haml_concat`里面不能用`Tumblr`？

 ~~~~```
value = 42

class TestClass
  def test_method
    value
  end
end

TestClass.new.value
# should ideally return 42 
```~~  ~~现在这只是返回`NameError: undefined local variable or method 'value' for #<TestClass:0x00000000e24960>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:28:15.833

如果你没有指定方法的接收者，ruby 在当前对象的类中查找它，直到它的所有祖先。

所以，因为`Haml::Engine`不在`Tumblr`祖先列表中，ruby 找不到这个方法。解决方案是指定显式调用方法的对象。

而且，你真的`Tumblr`在​​haml文件中定义类吗？这看起来是一个非常糟糕的方法。~~~~

# jquery - jQuery 不工作 | WordPress 顶部菜单

> ID：10627567
> 
> 赞同：-4
> 
> 时间：2012-05-16T22:20:13.067
> 
> 标签：jquery, wordpress, drop-down-menu

**编辑：**我通过...加载 jquery 库让它工作 我认为 jQuery 像 JavaScript 一样工作，不需要导入任何东西。很抱歉浪费您的时间提出一个愚蠢的问题。

//

这是使用 jQuery 修复 IE6 中顶部菜单（悬停效果）显示的工作 wordpress 插件。

我想要的是实现主题中的功能，同时消除插件的需要。

如果我把这部分放在我得到的错误

```
<script type="text/javascript">
    jQuery(document).ready( function($) {
     $('#access li').mouseover( function() {
     $(this).find('ul').show();
     });
     $('#access li').mouseleave( function() {
     $(this).find('ul').hide();
     });
     $('#access li ul').mouseleave( function() {
     $(this).hide();
     });
    });
    </script> 
```

在该`<head>`部分中`Uncaught ReferenceError: jQuery is not defined`，我发现最有可能的问题是我的代码是在加载 JS 之前运行的。

我使用了在网上找到的解决方案并将我的代码包装在这个

```
$(document).ready(function () {
  //my code here
}); 
```

并尝试了一下。现在我遇到了两个错误。

```
Uncaught ReferenceError: $ is not defined
Uncaught ReferenceError: jQuery is not defined 
```

查看错误后，它更清楚了，但仍然不确定为什么它不起作用

//

我通过从[http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js)加载 jquery 库让它工作我认为 jQuery 像 JavaScript 一样工作，不需要导入任何东西；D

Wordpress 插件源代码：

```
<?php
/**
 * Plugin Name: Twentyten IE6 Menus
 * Author: Sara Cannon
 * Author URI: http://sara-cannon.com
 * Description: Make the menu drop down in IE6 (if you care about that sort of thing)
 * Version: 1.0
 * License: GPL2
 */
function sara_twentyten_ie6_menus_enqueue() {
 wp_enqueue_script( 'jquery' );
}
add_action( 'after_setup_theme', 'sara_twentyten_ie6_menus_enqueue' );

function sara_twentyten_ie6_menus_script() {
?>
<!--[if lte IE 6]>
<script type="text/javascript">
jQuery(document).ready( function($) {
 $('#access li').mouseover( function() {
 $(this).find('ul').show();
 });
 $('#access li').mouseleave( function() {
 $(this).find('ul').hide();
 });
 $('#access li ul').mouseleave( function() {
 $(this).hide();
 });
});
</script>
<![endif]-->
<?php
}
add_action( 'wp_footer', 'sara_twentyten_ie6_menus_script' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:40:40.513

jQuery 不会在 .ready(function() {}); 上传递任何东西

试试这个：

```
 (function($, window, document, undefined) {
       $(function() {
         $('#access li').mouseover( function() {
         $(this).find('ul').show();
         });
         $('#access li').mouseleave( function() {
         $(this).find('ul').hide();
         });
         $('#access li ul').mouseleave( function() {
         $(this).hide();
         });
       });
    })(jQuery, window, document); 
```

如果您正确导入了 jQuery，则在此块内 jQuery ($) 不应未定义。

# javascript - 如何以 DRY 方式编写 Node.js Web 服务？

> ID：10627570
> 
> 赞同：4
> 
> 时间：2012-05-16T22:20:24.240
> 
> 标签：javascript, node.js, dry

我正在编写一堆 Web 服务，它们都有一些共同的模式。例如，它们都有相同的需求

```
var x = require(...);
var y = require(...); 
```

做类似的认证

```
var auth = express.basicAuth(...);
server.use(auth); 
```

并有类似的错误信息。

```
server.error(function(err, req, res, next){
    ...
}); 
```

是否有某种方法可以将上述内容写在一个共同的地方，以便如果有任何更改，我可以进行一次更改而不是五六次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:00:22.087

绝对地。您可以创建一个模块，该模块将返回一个基本 http 服务器，该服务器实现所有服务通用的设置/方法。从那里您可以只需要该模块，并添加其他服务方法来完成它。

该模块看起来像：

```
var express = require('express');
var app = express.createServer();

//  Configure

//  Common Functionality
app.error(function(err, req, res, next){
    ...
});

exports.app = app; 
```

然后你可以像这样使用这个模块：

```
var service = require('./service-base').app;

service.get('/users', function(req, res) {
    //  get and return users
});

service.listen(1234); 
```

如果您需要从模块中公开其他项目，您可以轻松地做到这一点，以使它们在服务实现文件中也可用。

# javascript - jQuery中下拉搜索框的模糊问题

> ID：10627571
> 
> 赞同：7
> 
> 时间：2012-05-16T22:20:31.810
> 
> 标签：javascript, jquery, html, drop-down-menu, onblur

我已经实现了一个充当过滤器的搜索框。当用户在搜索区域中单击时，会显示一个下拉框，其中显示所有可能的选项。在搜索框中键入会过滤结果。在框外单击会隐藏结果。

它使用以下 HTML/CSS heiarchy

```
<div class="search">
    <input type="text" name="search" value="search" placeholder="search"/>
    <div class="results">
        <div class="result">
            Result 1
        </div>
        <div class="result">
            Result 2
        </div>
        ...
    </div>
</div>
```

我使用 jQuery 显示/隐藏焦点/模糊事件的下拉菜单

```
var searchBar = {
    init : function(){
        $('input[name=search]').focus(searchBar.openSearch);
        $('input[name=search]').blur(searchBar.closeSearch);
        $('div.result').each(function(e){
            $(this).click(draftboardDynamic.selectResult);
        }); 
    },
    openSearch : function(e){
        $('div.results').show();
    },
    closeSearch : function(e){
        $('div.results').hide();
    },
    selectResult : function(e){
        console.log($(this));
    },
}
$(document).ready(searchBar.init);
```

这工作得很好，我可以毫无问题地打开、关闭和搜索（为清楚起见删除了 JS）。我唯一遇到的问题是选择结果。blur 事件似乎在 result.click 事件之前触发，并且永远不会调用处理程序。我可以通过删除模糊绑定来纠正这个问题，但是，当输入失去焦点时，我不知道如何关闭我的下拉框。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:30:39.550

这是一个艰难的事件，因为`.blur`事件总是会在`.click`. 有两种可能的解决方案，但都不是特别理想的：

1.  `.blur`将鼠标悬停在 上时取消绑定事件`div.result`。在鼠标移出时重新绑定它。
2.  不要使用 执行此操作，而是`.blur`将单击事件绑定到文档并检查目标是否不是搜索组件之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-06T17:21:47.783

使用“mousedown”事件而不是“click”：

```
$(".container")
  .on("blur focus", "input", function({type}) {
    $(this).next().toggle(type === "focusin");
  })
  .on("mousedown", "ul", function({target: {innerText}}) {
    $(this).prev().val(innerText);
  }); 
```

```
$(".container")
  .on("blur focus", "input", function({type}) {
    $(this).next().toggle(type === "focusin");
  })
  .on("mousedown", "ul", function({target: {innerText}}) {
    $(this).prev().val(innerText);
  });
```

```
.container {
  position: relative;
  display: inline-block;
}

input, ul {
  border: solid 1px black;
}

ul {
  list-style: none;
  position: absolute;
  left: 0;
  right: 0;
  z-index: -1;
  margin: -1px 0 0;
  padding: 0;
}

label, li {
  cursor: pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<label for="_input"><b>Select value:</b></label>

<div class="container">
  <input id="_input">
  <ul style="display:none">
    <li>1</li>
    <li>2</li>
    <li>3</li>
  </ul>
</div>

<a href="#_input">Picked a wrong value?</a>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T03:23:41.517

在鼠标悬停/鼠标移出时绑定和取消绑定模糊事件。对于那些感兴趣的人，我创建了一个小提琴来证明这一点：[https ://jsfiddle.net/AdamKMorris/uoqvfy2L/](https://jsfiddle.net/AdamKMorris/uoqvfy2L/)

我的示例使用基本 jquery 和 .bind/.unbind 来切换搜索框：

```
$("#searchButton").click(function()
{
    $("#searchBar").slideToggle();
    $("#searchText").focus();
}).mouseover(function()                 
{
    $("#searchText").unbind('blur');
}).mouseout(function()
{
    $("#searchText").bind('blur', function()
    {
        $("#searchBar").slideToggle("fast");
    });
}); 
```

# xslt - XSLt 空白命名空间

> ID：10627572
> 
> 赞同：2
> 
> 时间：2012-05-16T22:20:39.217
> 
> 标签：xslt

我有 xml 我想按原样复制（检查 xmlns="" 和标签。我想按原样创建。

总计算是小心的。只有这个问题。它是有效的。仍然客户希望预期的格式是这样的。非常感谢任何帮助。三项任务

1）我需要添加命名空间员工 xmnls="1.2" xmlns:xsi="3" xsi:schemalocation="4"> 2）在输出 xml 中生成这样的标签不是 3）需要避免 xmlns=""

任何提前帮助非常感谢 rameshkumar singh

**输入.xml**

```
 <Employees>
            <employee>
             <dept>1</dept>
              <sec></sec>
            </employee>
            <employee>
               <dept>2</dept>
              <sec></sec>
            </employee>
    </Employees>

Expected.XML

         <Employees xmnls="1.2" xmlns:xsi="3" xsi:schemalocation="4">
            <totalemp>2</totalemp>
           <employee>
              <dept>1</dept>
              <sec></sec>
            <employee>
              <employee>
                   <dept>2</dept>
                    <sec></sec>
                 <employee>
              </Employees>

actual.XML
               <Employees>
                    <totalemp>2</totalemp>
                        <employee xmlns="">
                        <dept>1</dept>
                          <sec/>
                        </employee>
                         <employee>
                           <dept>2</dept>
                              <sec/>
                           <employee>
                 </Employees> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:36:46.337

这是你如何做到的：

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xsi="3">

  <xsl:output indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*" priority="2">
        <xsl:element name="{local-name()}" namespace="1.2">
            <xsl:if test="self::Employees">
                <xsl:attribute name="xsi:schemalocation">4</xsl:attribute>          
            </xsl:if>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

您将身份转换作为默认值应用，然后为元素覆盖它，为它们提供新的**命名空间**以及`Employees`节点的特殊属性。我选择添加一个`if`语句，但您也可以将该逻辑移动到另一个匹配的模板中`Employees`。我只是不想把整个`xsl:element`事情重复两次。真的是品味问题。

当我将此转换应用于您的输入文档时，我最终得到：

```
<Employees xmlns="1.2" xmlns:xsi="3" xsi:schemalocation="4">
    <employee>
        <dept>1</dept>
        <sec/>
    </employee>
    <employee>
        <dept>2</dept>
        <sec/>
    </employee>
</Employees> 
```

您`xmlns=""`的结果中可能有 ，因为您没有重新创建该新命名空间中的所有元素。此外，为了能够添加`xsi:schemalocation`属性，您需要`xsi`在转换文档上声明命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:42:33.920

**这个简短而简单的转换（具有最少数量的模板并且不使用任何显式 XSLT 条件指令，没有`xsl:attribute`或`priority`属性）：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xsi="3" xsi:schemalocation="4">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()[not(self::*)]|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*">
  <xsl:element name="{name()}" namespace="1.2">
   <xsl:copy-of select=
   "document('')/*[not(current()/../..)]
                        /@xsi:schemalocation"/>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Employees>
    <employee>
        <dept>1</dept>
        <sec></sec>
    </employee>
    <employee>
        <dept>2</dept>
        <sec></sec>
    </employee>
</Employees> 
```

**产生想要的正确结果：**

```
<Employees xmlns="1.2" xmlns:xsi="3" xsi:schemalocation="4">
   <employee>
      <dept>1</dept>
      <sec/>
   </employee>
   <employee>
      <dept>2</dept>
      <sec/>
   </employee>
</Employees> 
```

# php - 计算机未保存会话

> ID：10627575
> 
> 赞同：0
> 
> 时间：2012-05-16T22:21:00.733
> 
> 标签：php, codeigniter, session, user-data

计算机上的会话未跨页面保存。它在我的电脑上，但不在另一台电脑上。计算机已启用 cookie。有什么可能导致计算机不保存会话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:51:04.047

```
if (!$this->session->userdata('admin_logged_in') {
      redirect('/auth/');
 } 
```

此代码缺少 a `)`，这意味着它不会在 PHP 中解析。您是否从代码中复制并粘贴？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:22:26.197

确保他启用了 cookie。

这解释了为什么需要为会话启用 cookie 才能工作：

> 客户端通常将令牌存储和发送为 HTTP cookie {...} 使用会话令牌的原因是客户端只需处理标识符 - 所有会话数据都存储在服务器上

[http://en.wikipedia.org/wiki/Session_(computer_science)#HTTP_session_token](http://en.wikipedia.org/wiki/Session_(computer_science)#HTTP_session_token)

# jquery-mobile - knockoutjs jquery mobile 复选框列表问题：无法检查

> ID：10627577
> 
> 赞同：0
> 
> 时间：2012-05-16T22:21:26.130
> 
> 标签：jquery-mobile, knockout.js

使用 knockoutjs 和 jquery mobile，我需要从数组中创建一个复选框列表。似乎复选框列表已呈现，但它没有响应点击。[http://jsfiddle.net/9zx7F/](http://jsfiddle.net/9zx7F/)

我使用了一个带有控制组数据角色的字段集标签来构建列表。我也用 listview 尝试了 ul，同样的问题。

编辑：更多细节 - 我发现它似乎与 ko.applyBindings 发生的时间有关。我创建了一个在我的本地主机上运行相同代码的页面，没关系。然后在 ko.applyBindings 周围添加了一个计时器，问题又发生了。[http://jsfiddle.net/gonglei/9zx7F/12/](http://jsfiddle.net/gonglei/9zx7F/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:36:24.560

我用两个步骤解决了这个问题；

1）从输入中解开标签并将它们与'for'属性挂钩

```
 <input type="checkbox" data-role="checkbox" data-bind="uniqueName: true, uniqueID: true, value: ID />
    <label data-bind="uniqueIDFor: true" >Click me</label>

    ko.bindingHandlers.uniqueIDFor = {
        init: function (element) {
            element.setAttribute("for", "ko_unique_" + ko.bindingHandlers.uniqueName.currentIndex);
        }
    };
    ko.bindingHandlers.uniqueID = {
        init: function (element) {
            element.setAttribute("id", "ko_unique_" + ko.bindingHandlers.uniqueName.currentIndex);
        }
    }; 
```

2）告诉jqm更新新内容

```
 $('input:checkbox').trigger('create'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:29:28.980

@tredder 的解决方案有效！`attr`这是使用data-bind 属性绑定标签的小提琴的一个分支，对我来说看起来更干净：http: [//jsfiddle.net/aib42/AnKR6/](http://jsfiddle.net/aib42/AnKR6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:59:06.887

我会为此更改模型：

```
<!-- ko foreach: listItems-->
    <input type="checkbox" name="itemsList" value="name" />
    <span data-bind="text: name"></span>
<!-- /ko --> 
```

要考虑的主要事情是输入控件中的“值”属性以正确的方式呈现。

问候。

# wcf - 用于自托管 WCF 的 ASPNetCacheProfile？

> ID：10627578
> 
> 赞同：1
> 
> 时间：2012-05-16T22:21:35.940
> 
> 标签：wcf, caching, rest

我认为答案是“否”，但是否可以使用 ASPNetCacheProfile 或其他同样容易的方法在自托管的 WCF 4.0 REST 服务中缓存某些响应模式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:49:52.773

当我偶然发现这个问题时，我正在回答 WCF 的其他一些帖子，我认为这就是您正在寻找的内容[http://blogs.msdn.com/b/endpoint/archive/2010/01/28/integrating-asp-net- output-caching-with-wcf-webhttp-services.aspx](http://blogs.msdn.com/b/endpoint/archive/2010/01/28/integrating-asp-net-output-caching-with-wcf-webhttp-services.aspx)答案是肯定的，您可以使用 ASPNetCacheProfile 缓存 WCF Rest Service 的响应

# ruby - 是否可以在 ruby 的传递块中引用传递给方法的参数？

> ID：10627581
> 
> 赞同：6
> 
> 时间：2012-05-16T22:21:41.230
> 
> 标签：ruby, block

我希望我不会在这里重复任何人，但我一直在搜索谷歌和这里并没有想出任何东西。这个问题实际上更像是“性感化”我的代码的问题。

我特别想做的是：

```
Dir.new('some_directory').each do |file|
  # is there a way to refer to the string 'some_directory' via a method or variable?
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T22:24:57.953

不是一般的；调用块的参数完全取决于方法本身，当调用时（调用你的块），字符串被传递给`each`的事实早已被遗忘，即它们是完全不同的东西。`'some_directory'``Dir.new`

不过，您可以执行以下操作：

```
Dir.new(my_dir = 'some_directory').each do |file|
    puts "#{my_dir} contains #{file}"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:24:17.440

它不起作用的原因是它`new`是`each`两种不同的方法，因此它们无法访问彼此的参数。要“性感”您的代码，您可以考虑创建一个新方法来包含两个方法调用并将重复的参数传递给它：

```
def do_something(dir)
  Dir.new(dir).each do |file|
    # use dir in some way
  end
end 
```

创建一个新方法的开销如此之低的事实意味着为这么小的代码块创建一个方法是完全合理的——这也是使 Ruby 成为一种令人愉快的语言的众多原因之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:24:50.123

只需将其分解为变量即可。Ruby 块是闭包，因此它们可以访问 -

```
dir = 'some_directory'
Dir.new(dir).each do |file|
  # use dir here as expected.
end 
```

# php - PHP获取正确的IP

> ID：10627582
> 
> 赞同：2
> 
> 时间：2012-05-16T22:21:44.800
> 
> 标签：php, apache

我的服务器在代理后面，我正在尝试获取我在 PHP 中使用的用户的 IP

```
$IP = $_SERVER['HTTP_X_FORWARDED_FOR']; 
```

我最近看到的一些用户 Ip 的问题就像下面的示例 Ip 一样。

```
173.0.0.000, 190.000.00.01
173.0.0.000, 190.000.00.02
173.0.0.000, 190.000.00.03
173.0.0.000, 190.000.00.04
173.0.0.000, 190.000.00.05 
```

我将如何获得正确的 IP，如下所示。它不会发生在所有 Ip 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:27:49.480

格式为`X-Forwarded-For`：*client1、proxy1、proxy2*。因此，您将要获取列表中的第一个地址：

```
$IP = current(explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']));

echo $IP; // 173.0.0.000 
```

无论有多个地址还是只有一个，这都会获取第一个 IP 地址。

# statistics - 为给定数据绘制箱线图的算法

> ID：10627584
> 
> 赞同：1
> 
> 时间：2012-05-16T22:21:56.237
> 
> 标签：statistics, drawing, plot, boxplot

我已经对一组真实值进行了排序，例如`X`，从某个未知分布中抽取。我想为这些数据绘制一个箱线图。

在最简单的情况下，我需要知道五个值：`min`、`Q1`、`median`、`Q3`和`max`。

微不足道，`min = X[0]`,`max = X[length(X)-1]`和可能`median = X[ceil(length(X)/2)]`。但我想知道如何确定下四分位数`Q1`和`Q3`.

`X = [1,2,4]`当我使用 MATLAB绘图时，我得到以下结果：

![在此处输入图像描述](../Images/a3d811de02f994b2a178b9812fce7c0a.png)

在我看来，如何获得值`Q1 = 1.25`和似乎有一些魔法`Q3 = 3.5`，但我不知道魔法是什么。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:39:46.063

中位数将数据分成两半。上半年的中位数=Q1，下半年的中位数=Q3。

更多信息：[http ://www.purplemath.com/modules/boxwhisk.htm](http://www.purplemath.com/modules/boxwhisk.htm)

* * *

注意 MatLab 箱线图：Q1 和 Q3 可能在 MatLab 中以不同的方式计算，我会尝试使用更多的测试数据。用我的方法，Q1 应该是 1，Q3 应该是 4。

* * *

编辑：

MatLab 所做的可能计算是前半部分的中位数和第一个数字之间的差异，并取其四分之一。将其添加到第一个数字以获得 Q1。这同样（大致）适用于第三季度：取中位数和最高数之间的差，然后从最高数中减去四分之一。那是Q3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:54:25.983

如果您转到箱形图的原始定义（查找 John Tukey），则使用中点作为中点（即数据集中 1、2、4 中的 2）。端点是最小值和最大值。

盒子的顶部和底部不完全由四分位数定义，而是称为“铰链”。铰链是数据上半部分和下半部分的中位数。如果有奇数个观测值，则使用整个集合的中值来确定两个铰链。下铰链是 (1,2) 或 1.5 的中位数。顶部铰链是 (2,4) 或 3 的中位数。

实际上，箱线图的四分位数有几十种定义（维基百科：“在选择四分位数值方面没有普遍的共识”）。如果你想合理化 MatLab 的箱线图，你必须检查它的文档。否则，您可以用谷歌搜索您的大脑以尝试找到与结果匹配的方法。

Minitab 为数据集中的铰链提供 1 和 4。Excel 的 PERCENTILE 函数给出 1.5 和 3，至少在这种情况下偶然匹配 Tukey 的算法。

# wpf - ScrollViewer 实际高度返回不正确的值？

> ID：10627586
> 
> 赞同：0
> 
> 时间：2012-05-16T22:22:01.543
> 
> 标签：wpf, xaml, drawing, scrollview

无论我做什么，我都无法将线条延伸到滚动视图的底部:(

![在此处输入图像描述](../Images/36066ee795828b10b5229c27e0875059.png)

```
<Grid>
    <DockPanel
        HorizontalAlignment="Stretch"
        Name="dock"
        VerticalAlignment="Stretch"
        LastChildFill="True"
        Focusable="True">
        <Menu
            Name="menuBar"
            HorizontalContentAlignment="Stretch"
            BorderThickness="0,0,0,1"
            BorderBrush="Silver"
            VerticalAlignment="Top"
            DockPanel.Dock="Top">
            <MenuItem
                Header="File" />
            <MenuItem
                Header="Options">
                <MenuItem
                    Header="Personal Info" />
            </MenuItem>
            <MenuItem
                Header="View" />
            <MenuItem
                Header="About" />
        </Menu>
        <TextBox
            Name="txtInput"
            DockPanel.Dock="Bottom"
            Height="23"
            SpellCheck.IsEnabled="True"
            VerticalAlignment="Bottom"
            BorderThickness="1,2,1,1"
            KeyDown="txtInput_KeyDown"
            TabIndex="1" />
        <ListBox
            Name="lstUsers"
            ItemsSource="{Binding}"
            DockPanel.Dock="Right"
            Width="160"
            BorderThickness="2,0,0,0"
            BorderBrush="LightGray" />
        <ScrollViewer
            Name="lstMessagesScroll"
            VerticalScrollBarVisibility="Auto">
            <ItemsControl
                Name="lstMessages"
                ItemsSource="{Binding}"
                VerticalAlignment="Bottom" />
        </ScrollViewer>
    </DockPanel>
    <Line
        StrokeThickness="0.5"
        X1="116"
        X2="116"
        Y1="23"
        Stroke="Gainsboro"
        Y2="{Binding ElementName=lstMessagesScroll, Path=ActualHeight}" />
</Grid> 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:20:10.903

它工作正常 - 只是您没有将菜单纳入帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:17:34.747

在玩弄您的 XAML 时，我发现如果您将 Height 绑定到同一元素并将 Y1 设置为 0，它将按照我相信您所期望的方式运行。

```
<Line
    StrokeThickness="0.5" 
    X1="116" 
    X2="116" 
    Y1="0"
    Stroke="Gainsboro"     
    Y2="{Binding ElementName=lstMessagesScroll, Path=ActualHeight }"
    Height="{Binding ElementName=lstMessagesScroll, Path=ActualHeight }" /> 
```

![](../Images/d29385e83f6e812de2b99ac3848b0dc2.png)

# bash - 创建 2 个变量并将它们与 if 进行比较

> ID：10627589
> 
> 赞同：1
> 
> 时间：2012-05-16T22:22:23.777
> 
> 标签：bash

我一直在网上寻找，但没有一个“解决方案”奏效。我用命令的结果创建了 2 个变量，然后我尝试将它们与*if*进行比较，但它不起作用:(

```
#!/bin/bash

pre_result=`digest -a md5 -v $1`
md5=${pre_result:(-33)}

pre_result2=`digest -a md5 -v /respaldo/directorio`
md52=${pre_result2:(-33)}

if $md5 != $md52
then
    fecha=`date`
    `mkdir /respaldo/"$fecha"`
    `cp $1  /respaldo/"$fecha"/`
else
     echo ':('
fi 
```

非常感谢您的关注，对糟糕的英语感到抱歉；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:25:35.297

条件表达式需要在 bash 中的括号内。

所以你的 if 语句应该是：

```
if [[ $md5 != $md52 ]]
then
# do stuff
fi 
```

[这个链接](http://www.thegeekstuff.com/2010/06/bash-conditional-expression/)有更多关于 bash 条件表达式的细节。

# xml - 将元素限制为 URL

> ID：10627592
> 
> 赞同：1
> 
> 时间：2012-05-16T22:22:35.450
> 
> 标签：xml, xsd, atom-feed

我有这个现有的 XSD，它试图将一个值限制为一个 URL，但它不起作用。id 为空白，文档仍然有效。当我输入任何文本时，它也会验证。

```
<xsd:schema xmlns:atom="http://www.w3.org/2005/Atom" xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.w3.org/2005/Atom" elementFormDefault="qualified" attributeFormDefault="unqualified">
...

<xsd:complexType name="feedType">
<xsd:choice minOccurs="3" maxOccurs="unbounded">
    <xsd:element name="id" type="atom:idType" minOccurs="1" maxOccurs="1"/>
...

<xsd:complexType name="idType">
    <xsd:annotation>
        <xsd:documentation>
            The Atom id construct is defined in section 4.2.6 of the format spec.
        </xsd:documentation>
    </xsd:annotation>
    <xsd:simpleContent>
        <xsd:extension base="xsd:anyURI">
            <xsd:attributeGroup ref="atom:commonAttributes"/>
        </xsd:extension>
    </xsd:simpleContent>
</xsd:complexType> 
```

…………

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.w3.org/2005/Atom ../XMLschemas/atom/2005/v/0.2/atom.xsd">
    <id>https://mydomain.com</id> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:47:40.180

`anyURI`还允许相对 URI，并且 afaik 空字符串是有效的相对 URI。您可以添加一个`pattern`方面来要求“：//”以更接近您想要的内容。

正如[规范](http://www.w3.org/TR/xmlschema-2/#anyURI)所说，

> ...在实践中，[anyURI] 定义仅对最低限度符合要求的处理器施加了非常适度的义务。

# jquery - Rails 3 将 CKEditor 与现有的回形针模型一起使用

> ID：10627594
> 
> 赞同：0
> 
> 时间：2012-05-16T22:22:38.560
> 
> 标签：jquery, ruby-on-rails, paperclip, ckeditor, wysiwyg

我在 Rails 3 中有一个 Web 应用程序，它已经有一个多态回形针模型。我已经附加了几个模型。

我很快意识到我需要一个好的所见即所得的文本区域编辑器，我用回形针安装了 ckeditor gem，但它为 ckeditor::pictures 和资产生成了自己的模型。

有没有办法覆盖 gem 在 ckeditor 中寻找的模型，以便我可以将现有的多态回形针模型与 ckeditor 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:46:17.153

我发现您不能告诉 gem ckeditor 使用您现有的回形针模型，您必须使用它生成的回形针模型或不使用编辑器。然后，您将不得不通过分叉并进行编辑来使用您当前和现有的回形针模型来对抗宝石。

如果您已经通过回形针或carrierwave 拥有现有的附件模型，我个人建议不要使用ckeditor gem。只需从他们的网站获取[ckeditor](http://www.ckeditor.com/) javascript 文件并以这种方式实现编辑器。

您可以通过下载 javascript 文件来执行此操作，将它们放在您的 assets/javascript 目录中。然后将它们包含在您的 application.js 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T18:41:47.667

我知道这个问题有点老了，但现在有一种方法可以设置模型。您可以使用其中的设置来设置`config/initializers/ckeditor.rb`模型`config.picture_model`。`config.attachment_file_model`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:21:50.293

使用 gem 本身提供的这个生成器：

```
rails generate ckeditor:install --orm=active_record --backend=paperclip 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-14T18:39:23.323

如果您将图片模型和附件文件模型更改为从基本模型继承：

```
class Ckeditor::Picture < Asset

end 
```

并在您的基类中包含 Ckeditor：

```
class Asset < ApplicationRecord
  include Ckeditor::Orm::ActiveRecord::AssetBase
  include Ckeditor::Backend::Paperclip

  belongs_to :attachable, :polymorphic => true

  has_attached_file :data,
    storage: :s3,
    s3_region: S3_CONFIG["region"],
    path: "assets/:attachment/:id/:style.:extension",
    :styles => lambda { |a| a.instance.styles },
    s3_credentials: {
         access_key_id: S3_CONFIG["access_key_id"] ,
         secret_access_key: S3_CONFIG["secret_access_key"]
       },
    s3_protocol: 'http',
    bucket: S3_CONFIG["bucket"]
end 
```

并在初始化程序（ckeditor.rb）中更改表名：

```
module Ckeditor
  module Orm
    module ActiveRecord
      module AssetBase
        def self.included(base)
          base.send(:include, Base::AssetBase::InstanceMethods)
          base.send(:extend, ClassMethods)
        end
        module ClassMethods
          def self.extended(base)
            base.class_eval do
              self.table_name = 'assets'
            end
          end
        end
      end
    end
  end
end 
```

它似乎工作。

# configuration - Nginx 代理或重写取决于用户代理

> ID：10627596
> 
> 赞同：15
> 
> 时间：2012-05-16T22:22:54.880
> 
> 标签：configuration, nginx, user-agent

我是 nginx 的新手，来自 apache，我基本上想做以下事情：

基于用户代理： iPhone：重定向到 iphone.mydomain.com

android：重定向到 android.mydomain.com

facebook：反向代理到 otherdomain.com

所有其他：重定向到...

并尝试了以下方式：

```
location /tvoice {
   if ($http_user_agent ~ iPhone ) {
    rewrite     ^(.*)   https://m.domain1.com$1 permanent;
   }
   ...
   if ($http_user_agent ~ facebookexternalhit) {
    proxy_pass         http://mydomain.com/api;
   }

   rewrite     /tvoice/(.*)   http://mydomain.com/#!tvoice/$1 permanent;
} 
```

但是现在启动nginx时出现错误：

```
nginx: [emerg] "proxy_pass" cannot have URI part in location given by regular expression, or inside named location, or inside "if" statement, or inside "limit_except" 
```

而且我不知道该怎么做或问题出在哪里。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T11:31:40.823

proxy_pass 目标的“/api”部分是错误消息所指的 URI 部分。由于 ifs 是伪位置，并且带有 uri 部分的 proxy_pass 将匹配的位置替换为给定的 uri，因此在 if 中是不允许的。如果你只是反转 if 的逻辑，你可以让它工作：

```
location /tvoice {
  if ($http_user_agent ~ iPhone ) {
    # return 301 is preferable to a rewrite when you're not actually rewriting anything
    return 301 https://m.domain1.com$request_uri;

    # if you're on an older version of nginx that doesn't support the above syntax,
    # this rewrite is preferred over your original one:
    # rewrite ^ https://m.domain.com$request_uri? permanent;
  }

  ...

  if ($http_user_agent !~ facebookexternalhit) {
    rewrite ^/tvoice/(.*) http://mydomain.com/#!tvoice/$1 permanent;
  }

  proxy_pass         http://mydomain.com/api;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-16T09:59:32.297

这不是最好的方法，因为[如果是魔鬼](https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/)

以下是正确的做法。

在`http{}`创建一个`map`：

```
map $http_user_agent $proxied_server {
    # anything not matching goes here 
    default default_domain;

    # case sensitive matching
    ~ (UserAgent) another_domain;

    # case INsensitive matching
    ~* (useragent) third_domain;

    # multiple user agents
    ~* (user|agent|here) forth_domain;
} 
```

然后，在你的`server{}`街区：

```
proxy_pass http://$proxied_server 
```

# php - codeigniter 表单回调值

> ID：10627601
> 
> 赞同：2
> 
> 时间：2012-05-16T22:23:09.000
> 
> 标签：php, codeigniter, callback, validation

我使用自定义验证回调使用 codeigniter 执行一些表单验证。

```
$this->form_validation->set_rules('testPost', 'test', 'callback_myTest'); 
```

如果返回值为 TRUE 或 FALSE，回调在模型中运行并按预期工作。但是文档还说您可以返回您选择的字符串。

例如，如果我有一个经过验证的日期，但是在同一个函数中，日期的格式发生了变化，我将如何在我的控制器中返回并检索这个新的格式化值？

感谢您阅读并感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:59:30.677

我不完全确定我得到了你的要求，但这是一个尝试。

您可以在构造函数中定义一个用作回调的函数，并在该函数中使用您的模型。像这样的东西：

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Controllername extends CI_Controller {

   private $processedValue;

   public function index()
   {
        $this->form_validation->set_rules('testpost','test','callback');

        if ($this->form_validation->run()) {
         //validation successful
         echo $this->processedValue; //outputs the value returned by the model
        } else {
         //validation failed
        }
   }

   private function callback($input)
   {
        $this->load->model('yourmodel');
        $return = $this->yourmodel->doStuff($input);

        //now you have the user's input in $input
        // and the returned value in $return

        //do some checks and return true/false

        $this->processedValue = $return;
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T11:40:32.623

```
public function myTest($data){ // as the callback made by "callback_myTest"
     // Do your stuff here
    if(condition failed)
    {
        $this->form_validation->set_message('myTest', "Your string message");
        return false;
    } 
    else 
    {
       return true;
    }
} 
```

请试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T00:52:26.387

Tank_Auth 在控制器中执行此操作的方式是这样的

```
$this->form_validation->set_rules('login', 'Login', 'trim|required|xss_clean');

if ($this->form_validation->run()) {        
// validation ok

$this->form_validation->set_value('login')

} 
```

使用 form_validation 的 set_value 方法没有记录，但我相信这是他们在修剪和清理登录后获取处理值的方式。

我真的不喜欢必须设置一个新变量来直接从自定义验证函数存储这个值的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:49:14.483

我查看了 codeigniter 的 Form_validation 文件中的函数 _execute。它将 var $_field_data 设置为回调获取的结果（如果结果不是布尔值）。还有另一个函数“set_value”。将它与作为字段名称的参数一起使用，例如 set_value('testPost') 并查看是否可以获得结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T12:25:29.723

编辑：对不起，误解了这个问题。也许使用自定义回调。或使用 php $_POST 集合（跳过 codeigniter）...抱歉尚未测试，但我希望有人可以以此为基础...

例如：

```
function _is_startdate_first($str)
{
           $str= do something to $str;

            or 

            $_POST['myinput'} = do something to $str;

    } 
```

=================

这就是我重命名自定义回调的方式：

```
$this->form_validation->set_message('_is_startdate_first', 'The start date must be first'); 
```

......

另外，这里是回调函数：

```
function _is_startdate_first($str)
{
    $startdate = new DateTime($this->input->post('startdate'), new DateTimeZone($this->tank_auth->timezone()));
    $enddate = new DateTime($this->input->post('enddate'), new DateTimeZone($this->tank_auth->timezone()));

    if ($startdate>$enddate) {
        return false;
        } else {
        return true;
        }
} 
```

# ios - 滚动到底部时，iOS 无法看到最后几行自定义表格单元格。

> ID：10627606
> 
> 赞同：5
> 
> 时间：2012-05-16T22:23:40.583
> 
> 标签：ios, uitableview, uiscrollview, custom-controls

目前我有一个 UITableview，我有足够的数据不能完全显示在屏幕上，所以用户必须滚动表格视图。

我看到的问题是，当我一直滚动到底部时，表格视图中显示的最后一个元素并不是真正的最后一个元素，但是，如果我进行触摸拖动，并尝试将其向下拖动，我可以看到最后一个元素，但是如果我松开手指，滚动弹回显示在底部的元素，但不是最后一个元素

如何确保 tableview 滚动大小与容器的高度相同？

我确实覆盖了这两种方法：

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
 - (NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section 
```

我会做：

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

真的很高，但是，当向下滚动到底部时，它不是最后一个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:44:01.300

尝试降低表格视图框架的高度。这应该够了吧。

作为初学者，尝试将其减少一半，然后如果一切正常，请尝试计算必要的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:38:05.897

检查您的表格视图的框架。如果您在顶部有一个导航栏，您的表格视图可能会被向下推以适应它，并且您的框架太高了。尝试降低表格视图的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T10:18:01.277

如果你有这个。删除这个。

```
 self.edgesForExtendedLayout = .None 
```

# android - 初始化相机选项以及对话框中的画廊

> ID：10627607
> 
> 赞同：0
> 
> 时间：2012-05-16T22:23:47.010
> 
> 标签：android, android-intent, camera, dialog

我正在使用意图来初始化以下操作 ![在此处输入图像描述](../Images/5fd434d70860f95ad2ef46f07d017164.png)

现在除了这个画廊选项我还想要相机选项，我尝试了以下代码但没有用

```
Intent cameraIntent = new Intent();
            cameraIntent.setType(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
             cameraIntent.setType("image/*");
             cameraIntent.setAction(Intent.ACTION_GET_CONTENT);
             //startActivityForResult(Intent.createChooser(intent, "Select Picture"),0);

        startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
```

它显示图库选项但不显示相机..帮我解决这个问题....

**编辑：**

```
 public boolean onCreateOptionsMenu(Menu menu) {
            // TODO Auto-generated method stub
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.menu, menu);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            // TODO Auto-generated method stub
            switch (item.getItemId()) {
            case R.id.cameraa:
                // Toast.makeText(this, "Save Project!", Toast.LENGTH_LONG).show();
                Intent intents = new Intent("android.media.action.IMAGE_CAPTURE");
                File photo = new File(Environment.getExternalStorageDirectory(),
                        "Pic.jpg");
                intents.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
                startActivityForResult(intents, 1);

                break;

            case R.id.gallery:
                // Toast.makeText(this, "Take Snapshot!", Toast.LENGTH_LONG).show();
                // ////This is gallery intent
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent, "Select Picture"), 0);
                break;
            }
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:38:45.790

嘿，这段代码可能对你有帮助，

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        intent.putExtra(MediaStore.EXTRA_OUTPUT, tempUri);

        startActivityForResult(intent, 0); 
```

# perl - 检查页面是否包含特定单词

> ID：10627609
> 
> 赞同：0
> 
> 时间：2012-05-16T22:23:50.467
> 
> 标签：perl, find, word, scrape

如何检查页面是否包含特定单词。示例：如果页面包含单词“candybar”，我想返回 true 或 false。请注意，“糖果条”有时可能在标签（糖果条）之间，有时则不在。我该如何做到这一点？

这是我“抓取”该网站的代码（只是现在不知道如何检查该网站）：

```
#!/usr/bin/perl -w

use utf8;

use RPC::XML;
use RPC::XML::Client;
use Data::Dumper;
use Encode;
use Time::HiRes qw(usleep);

print "Content-type:text/html\n\n";

use LWP::Simple; 

$pageURL = "http://example.com"; 

$simplePage=get($pageURL);

if ($simplePage =~ m/candybar/) {   
 print "its there!";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:16:58.167

我建议您使用某种解析器，如果您正在寻找 HTML 中的单词或任何其他以已知方式 [例如 XML] 标记的内容。我使用 HTML::Tokeparser，但 CPAN 上有很多解析模块。

如果您使用此解析器，我已将解析器返回的解释保留为注释。这是从我用来机器翻译网页文本的实时程序中提取的，所以我取出了一些点点滴滴。

上面关于查看LWP退货状态和内容的评论也很明智，如果网站离线，你需要知道这一点。

打开(我的 $fh, "<:utf8", $file ) || die "无法打开 $file : $!";

```
my $p = HTML::TokeParser->new($fh) || die "Can't open: $!";

$p->empty_element_tags(1);    # configure its behaviour
# put output into here and it's cumulated
while ( my $token = $p->get_token ) {
    #["S",  $tag, $attr, $attrseq, $text]
    #["E",  $tag, $text]
    #["T",  $text, $is_data]
    #["C",  $text]
    #["D",  $text]
    #["PI", $token0, $text
    my ($type,$string) = get_output($token) ;             
    # ["T",  $text, $is_data] : rule for text
    if ( $type eq 'T' && $string =~ /^candybar/ ) {

    } 
```

# android - 带有 UI Android 的 setRetainInstance 片段

> ID：10627610
> 
> 赞同：7
> 
> 时间：2012-05-16T22:23:58.170
> 
> 标签：android, android-asynctask, android-fragments

`Fragment`好的，我用一些 UI（几个文本框和东西）创建了一个，我使用了一个，`setRetainInstance`因为我运行一个`AsyncTask`来查询服务器（*请求只能发送一次*），我需要`AsyncTask`. 所以我的问题是：用 UI 保留整个片段是错误的吗？我看到了几个例子，人们使用额外的`Fragment`来使用`setRetainInstance`但是..不使用额外的有什么问题吗？如果使用有问题，那是`setRetainInstance`为什么？在文档中找不到与此相关的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T11:28:46.020

即使你使用`setRetainInstance(true)`，当你旋转时，你的 Fragment 仍然会重新创建它的视图（你会接到调用`onDestroyView`then `onCreateView`）。只要您不保留对过去视图的引用`onDestroyView`，就不会出现旧 Activity 的任何泄漏。最好的方法是将 中的引用显式地设为空`onDestroyView`，但您的代码`onCreateView`通常会覆盖这些引用。

网上有很多例子（包括一些官方的），人们使用单独的片段（没有视图）来保留数据。假设我上面说的是正确的，那么这是不必要的（为了防止泄漏）。在许多情况下，如果您使用一个单独的片段，该片段的职责只是处理数据而不担心 UI，那么您最终可能会得到更清晰的代码/架构。

[您可以使用 Eclipse MAT](http://android-developers.blogspot.jp/2011/03/memory-analysis-for-android.html)检查旋转后是否泄漏 Activity 上下文。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T17:30:06.447

如果您锁定了方向，那么您应该没问题。否则，如果您保留与特定活动实例关联的小部件，最终可能会导致内存泄漏。

# ios - iOS 应用程序在网络可用时立即将数据上传到服务器

> ID：10627612
> 
> 赞同：0
> 
> 时间：2012-05-16T22:24:12.373
> 
> 标签：ios, background, reachability

我有一个跟踪野生动物的应用程序，用户根据他们的观察输入数据（例如，用户输入他们看到 3 只驼鹿）。然后将数据上传到服务器。不过因为这个app会用在经常没有网络的地方，所以想在没有网络的情况下保存数据，等有网络的时候再上传数据

我知道可达性，但看起来我只能检查当时互联网连接是否可用，而不是在后台检查互联网连接

所以总结一下：

1.  如果用户提交数据时有互联网连接，那很好。
2.  如果没有互联网连接，当用户提交数据时，**我想保存这些数据。一旦有互联网连接，我希望上传数据，而不需要用户再次打开应用程序**。我不能依赖用户再次打开应用程序导致数据被提交，因为他们可能只会在手机信号塔范围之外使用这个应用程序，并且可能永远不会在有网络连接的位置运行应用程序，因此它必须自动为他们提交这些数据。

环顾四周，我找不到答案，所以我开始怀疑……这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:33:48.480

不，Apple 不允许应用程序为此目的无限期地在后台运行，并且它们不允许远程触发应用程序或任何类似性质的东西。充其量您可以让您的应用程序在后台运行以获取有关主要位置更改的通知，但是您必须将其作为适当的功能而不是破解来绕过此限制，否则您的应用程序将无法获得批准苹果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:34:21.737

我知道可以在后台使用网络，但只能在用户关闭应用程序后的有限时间内使用。您可以创建一个计时器来检查网络连接（使用可达性或通过 ping Google），并将计时器设置为在应用程序关闭后每分钟触发一次。这不是一个非常有效的解决方案，但它可能会起作用。不过，您应该查看应用程序关闭后可以保持连接多长时间，我认为是 5-10 分钟。

# ios - 无信息的崩溃报告

> ID：10627616
> 
> 赞同：1
> 
> 时间：2012-05-16T22:24:37.580
> 
> 标签：ios, crash, crash-reports, symbolicatecrash

我们的一个应用程序一直在报告非常无信息的崩溃（使用 PLCrashReporter），它总是在线程 0 上崩溃，并且只将堆栈底部的 main.m 列为我们代码中的违规行。

在大多数情况下，`[ASIHTTPRequest runRequests]`也列出了一个线程（在本例中为线程 5）。我很难确定要采取什么措施来解决此问题。有没有人可以提供任何方向？同样有趣的是，这个应用程序会生成许多不同的崩溃组（类似的崩溃），而我们的其他应用程序的崩溃比率非常一致：崩溃组，这个应用程序就像每个崩溃组 2-3 次崩溃，其中通常有很多组每个崩溃组的崩溃次数超过 20-100 次，只有几组。

另一件事，我一辈子都无法获得 Xcode/symbolicatecrash 来表示系统框架行。我认为至少将这些线条符号化可以帮助我指明方向，但现在我不知所措。

有什么建议么？

```
Incident Identifier: [TODO]
CrashReporter Key:   [TODO]
Process:         MyApp [4815]
Path:            /var/mobile/Applications/6497DD3A-79B5-4E6B-87C9-65D77BD45E6B/MyApp.app/MyApp
Identifier:      com.company.myapp
Version:         1.7.6
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-05-16 18:44:57 +0000
OS Version:      iPhone OS 5.1.1
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xd0000008
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x3665ff78 0x3665c000 + 16248
1   Foundation                          0x345dc4ff 0x3454d000 + 587007
2   CoreFoundation                      0x33d30547 0x33cab000 + 546119
3   CoreFoundation                      0x33cbc097 0x33cab000 + 69783
4   Foundation                          0x345503eb 0x3454d000 + 13291
5   Foundation                          0x34551c1b 0x3454d000 + 19483
6   UIKit                               0x368d80ed 0x36723000 + 1790189
7   UIKit                               0x368d81e7 0x36723000 + 1790439
8   libdispatch.dylib                   0x325912e1 0x3258c000 + 21217
9   libdispatch.dylib                   0x3258eb81 0x3258c000 + 11137
10  libdispatch.dylib                   0x3258eec1 0x3258c000 + 11969
11  CoreFoundation                      0x33d372ad 0x33cab000 + 574125
12  CoreFoundation                      0x33cba4a5 0x33cab000 + 62629
13  CoreFoundation                      0x33cba36d 0x33cab000 + 62317
14  GraphicsServices                    0x37c9c439 0x37c98000 + 17465
15  UIKit                               0x36754cd5 0x36723000 + 203989
16  MyApp                              0x00002077 main (main.m:14)

Thread 1:
0   libsystem_kernel.dylib              0x307353a8 0x30734000 + 5032
1   libdispatch.dylib                   0x3258fc29 0x3258c000 + 15401

Thread 2:
0   WebCore                             0x30dea7f0 0x30c7f000 + 1488880
1   JavaScriptCore                      0x365cef91 0x36536000 + 626577
2   JavaScriptCore                      0x365cef19 0x36536000 + 626457
3   JavaScriptCore                      0x365ca12f 0x36536000 + 606511
4   JavaScriptCore                      0x365ca0f1 0x36536000 + 606449
5   JavaScriptCore                      0x3661eedb 0x36536000 + 954075
6   WebCore                             0x3100f99b 0x30c7f000 + 3738011
7   WebKit                              0x34d18c45 0x34c9c000 + 511045
8   WebCore                             0x30cd50b5 0x30c7f000 + 352437
9   CoreFoundation                      0x33d38ad3 0x33cab000 + 580307
10  CoreFoundation                      0x33d3829f 0x33cab000 + 578207
11  CoreFoundation                      0x33d37045 0x33cab000 + 573509
12  CoreFoundation                      0x33cba4a5 0x33cab000 + 62629
13  CoreFoundation                      0x33cba36d 0x33cab000 + 62317
14  WebCore                             0x30d28ca3 0x30c7f000 + 695459
15  libsystem_c.dylib                   0x3536b735 0x3535d000 + 59189

Thread 3:
0   libsystem_kernel.dylib              0x30735004 0x30734000 + 4100
1   CoreFoundation                      0x33d383f3 0x33cab000 + 578547
2   CoreFoundation                      0x33d3712b 0x33cab000 + 573739
3   CoreFoundation                      0x33cba4a5 0x33cab000 + 62629
4   CoreFoundation                      0x33cba36d 0x33cab000 + 62317
5   Foundation                          0x3455dbb9 0x3454d000 + 68537
6   Foundation                          0x3455da81 0x3454d000 + 68225
7   Foundation                          0x345f1591 0x3454d000 + 673169
8   libsystem_c.dylib                   0x3536b735 0x3535d000 + 59189

Thread 4:
0   libsystem_kernel.dylib              0x30745570 0x30734000 + 71024
1   libsystem_c.dylib                   0x3536b735 0x3535d000 + 59189

Thread 5:
0   libsystem_kernel.dylib              0x30735004 0x30734000 + 4100
1   CoreFoundation                      0x33d383f3 0x33cab000 + 578547
2   CoreFoundation                      0x33d3712b 0x33cab000 + 573739
3   CoreFoundation                      0x33cba4a5 0x33cab000 + 62629
4   CoreFoundation                      0x33d3744b 0x33cab000 + 574539
5   MyApp                              0x0003bf7b +[ASIHTTPRequest runRequests] (ASIHTTPRequest.m:4779)
6   Foundation                          0x3455da81 0x3454d000 + 68225
7   Foundation                          0x345f1591 0x3454d000 + 673169
8   libsystem_c.dylib                   0x3536b735 0x3535d000 + 59189

Thread 6:
0   libsystem_kernel.dylib              0x30735004 0x30734000 + 4100
1   CoreFoundation                      0x33d383f3 0x33cab000 + 578547
2   CoreFoundation                      0x33d3712b 0x33cab000 + 573739
3   CoreFoundation                      0x33cba4a5 0x33cab000 + 62629
4   CoreFoundation                      0x33cba36d 0x33cab000 + 62317
5   WebCore                             0x30d520d9 0x30c7f000 + 864473
6   libsystem_c.dylib                   0x3536b735 0x3535d000 + 59189

Thread 7:
0   libsystem_kernel.dylib              0x30745068 0x30734000 + 69736
1   libsystem_c.dylib                   0x3536b7c9 0x3535d000 + 59337
2   JavaScriptCore                      0x365fb915 0x36536000 + 809237
3   WebCore                             0x30e89be3 0x30c7f000 + 2141155
4   WebCore                             0x30e89b99 0x30c7f000 + 2141081
5   libsystem_c.dylib                   0x3536b735 0x3535d000 + 59189

Thread 8:
0   libsystem_kernel.dylib              0x30745cd4 0x30734000 + 72916

Thread 9:
0   libsystem_kernel.dylib              0x30745cd4 0x30734000 + 72916

Thread 10:
0   ???                                 0x00000000 0x0 + 0

Thread 0 crashed with ARM (Native) Thread State:
    r0: 0x0eecd480     r1:  0x36b1e9fb     r2:  0x00000000     r3:  0x00000000 
    r4: 0xd0000000     r5:  0x00000000     r6:  0x00000000     r7:  0x2fe94e0c 
    r8: 0x00000000     r9:  0x0dac7a7e    r10:  0x000f4454    r11:  0x00001a60 
   r12: 0x3f587048     sp:  0x2fe94df4     lr:  0x000f9c15     pc:  0x3665ff78 
  cpsr: 0x200f0030 
Binary Images:
0x97000 - 0x19d000  MyApp armv7  /var/mobile/Applications/6497DD3A-79B5-4E6B-87C9-65D77BD45E6B/MyApp.app/MyApp
0x3341e000 - 0x3346d000  CoreLocation armv7 <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x373ba000 - 0x3743e000  MapKit armv7  /System/Library/Frameworks/MapKit.framework/MapKit
0x33dc9000 - 0x33fae000  AudioToolbox armv7  /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x33119000 - 0x3320b000  QuartzCore armv7 <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3754a000 - 0x375f8000  libxml2.2.dylib armv7 <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x30bd0000 - 0x30bdd000  libz.1.dylib armv7 <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x34db3000 - 0x34df8000  MobileCoreServices armv7 <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x304fe000 - 0x30534000  SystemConfiguration armv7 <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x376e2000 - 0x377ba000  CFNetwork armv7 <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x343e4000 - 0x3441c000  Security armv7  /System/Library/Frameworks/Security.framework/Security
0x36723000 - 0x36bc6000  UIKit armv7  /System/Library/Frameworks/UIKit.framework/UIKit
0x3454d000 - 0x346cc000  Foundation armv7  /System/Library/Frameworks/Foundation.framework/Foundation
0x336ca000 - 0x33810000  CoreGraphics armv7 <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x35105000 - 0x352ac000  CoreData armv7  /System/Library/Frameworks/CoreData.framework/CoreData
0x34726000 - 0x34746000  libSystem.B.dylib armv7 <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x33cab000 - 0x33dc3000  CoreFoundation armv7 <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3665c000 - 0x36723000  libobjc.A.dylib armv7 <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x30ab2000 - 0x30ac2000  SpringBoardServices armv7  /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x326c8000 - 0x326cb000  MobileInstallation armv7 <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x36196000 - 0x361a0000  libMobileGestalt.dylib armv7 <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x34d6d000 - 0x34db3000  GeoServices armv7  /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x338a3000 - 0x338e0000  AppSupport armv7 <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x37c98000 - 0x37ca3000  GraphicsServices armv7  /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3499f000 - 0x349de000  IOKit armv7  /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x3188f000 - 0x318d9000  AddressBook armv7  /System/Library/Frameworks/AddressBook.framework/AddressBook
0x34169000 - 0x341e9000  libsqlite3.dylib armv7  /usr/lib/libsqlite3.dylib
0x35cb5000 - 0x35cc0000  libbz2.1.0.dylib armv7 <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x341e9000 - 0x341ed000  CoreTime armv7  /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x33851000 - 0x338a3000  libstdc++.6.dylib armv7  /usr/lib/libstdc++.6.dylib
0x3015c000 - 0x302a6000  libicucore.A.dylib armv7  /usr/lib/libicucore.A.dylib
0x34e12000 - 0x34e13000  libgcc_s.1.dylib armv7  /usr/lib/libgcc_s.1.dylib
0x34a7c000 - 0x34a84000  libc++abi.dylib armv7  /usr/lib/libc++abi.dylib
0x3434d000 - 0x34352000  libcache.dylib armv7  /usr/lib/system/libcache.dylib
0x30bf0000 - 0x30c34000  libcommonCrypto.dylib armv7 <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x364ab000 - 0x364af000  libcompiler_rt.dylib armv7  /usr/lib/system/libcompiler_rt.dylib
0x3384b000 - 0x33851000  libcopyfile.dylib armv7 <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x3258c000 - 0x325a3000  libdispatch.dylib armv7 <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x36d46000 - 0x36d48000  libdnsinfo.dylib armv7 <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x356bd000 - 0x356bf000  libdyld.dylib armv7 <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x348a6000 - 0x348a7000  libkeymgr.dylib armv7  /usr/lib/system/libkeymgr.dylib
0x30837000 - 0x3083e000  liblaunch.dylib armv7  /usr/lib/system/liblaunch.dylib
0x32142000 - 0x32146000  libmacho.dylib armv7  /usr/lib/system/libmacho.dylib
0x36bc6000 - 0x36bcd000  libnotify.dylib armv7 <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x31d23000 - 0x31d25000  libremovefile.dylib armv7 <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x361f9000 - 0x361fb000  libsystem_blocks.dylib armv7 <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x3535d000 - 0x353ea000  libsystem_c.dylib armv7  /usr/lib/system/libsystem_c.dylib
0x30afe000 - 0x30b04000  libsystem_dnssd.dylib armv7 <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x31cda000 - 0x31cf8000  libsystem_info.dylib armv7 <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x30734000 - 0x3074b000  libsystem_kernel.dylib armv7 <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x327a8000 - 0x327ac000  libsystem_network.dylib armv7 <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x30732000 - 0x30734000  libsystem_sandbox.dylib armv7 <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x3441c000 - 0x3441d000  libunwind.dylib armv7  /usr/lib/system/libunwind.dylib
0x30ac2000 - 0x30ad4000  libxpc.dylib armv7  /usr/lib/system/libxpc.dylib
0x352d8000 - 0x352df000  MobileIcons armv7  /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x354b6000 - 0x354c3000  libCRFSuite.dylib armv7  /usr/lib/libCRFSuite.dylib
0x36225000 - 0x36226000  liblangid.dylib armv7 <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x34f65000 - 0x34f75000  GenerationalStorage armv7  /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x34a84000 - 0x34c42000  ImageIO armv7 <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x3499a000 - 0x3499f000  IOSurface armv7 <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35c54000 - 0x35ca1000  CoreTelephony armv7  /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x31cd3000 - 0x31cda000  liblockdown.dylib armv7 <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x361a0000 - 0x361f9000  CoreAudio armv7  /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x35ca5000 - 0x35cb3000  libbsm.0.dylib armv7 <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x36e47000 - 0x36e48000  Accelerate armv7 <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x36173000 - 0x3617a000  MobileKeyBag armv7  /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x348a7000 - 0x34980000  vImage armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x375f9000 - 0x375fa000  vecLib armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x33390000 - 0x333db000  libvDSP.dylib armv7 <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x31e80000 - 0x32142000  libLAPACK.dylib armv7 <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x32fd8000 - 0x33083000  libBLAS.dylib armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x352ac000 - 0x352b7000  libvMisc.dylib armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x36d4e000 - 0x36d72000  Bom armv7  /System/Library/PrivateFrameworks/Bom.framework/Bom
0x32583000 - 0x3258c000  ProtocolBuffer armv7 <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x3338b000 - 0x33390000  AggregateDictionary armv7 <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x3256f000 - 0x32581000  DataAccessExpress armv7  /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x30bcc000 - 0x30bd0000  NetworkStatistics armv7 <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x32f8a000 - 0x32f96000  AccountSettings armv7 <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x30c34000 - 0x30c7f000  ManagedConfiguration armv7  /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x340a1000 - 0x340b8000  libmis.dylib armv7 <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x346d7000 - 0x346ec000  PersistentConnection armv7 <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x35cb3000 - 0x35cb5000  DataMigration armv7  /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x32533000 - 0x3253c000  MobileWiFi armv7  /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x31d25000 - 0x31d29000  CaptiveNetwork armv7  /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x37c81000 - 0x37c98000  EAP8021X armv7 <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x35f43000 - 0x35fea000  AddressBookUI armv7  /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x35fea000 - 0x36041000  GMM armv7 <6b2f7e1aa6be3d69b4c4cf54ed960602> /System/Library/PrivateFrameworks/GMM.framework/GMM
0x36041000 - 0x36046000  FTClientServices armv7 <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x3075f000 - 0x30764000  libAccessibility.dylib armv7 <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x36536000 - 0x3665c000  JavaScriptCore armv7 <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x36ee2000 - 0x36f40000  StoreServices armv7 <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x324cf000 - 0x32533000  IMCore armv7 <046b6b615a743057b59d4aaba8a91d61> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x34c54000 - 0x34c59000  Marco armv7 <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x36131000 - 0x3616f000  FTServices armv7 <3f23418319a03a589dd5cac7df20e238> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x36cbb000 - 0x36cf8000  IMFoundation armv7 <253125b9103c3d13b66923ac6893c25b> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x36226000 - 0x36253000  libtidy.A.dylib armv7 <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x3609c000 - 0x3610d000  CoreImage armv7 <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x350b1000 - 0x350c8000  DictionaryServices armv7 <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x37165000 - 0x371b7000  CoreText armv7 <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x34c9c000 - 0x34d6d000  WebKit armv7 <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x30c7f000 - 0x3143f000  WebCore armv7 <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x36f4c000 - 0x36fc6000  ProofReader armv7 <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x34f2f000 - 0x34f54000  PrintKit armv7 <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x314a0000 - 0x314c6000  OpenCL armv7  /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x3042d000 - 0x3043d000  OpenGLES armv7  /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x30569000 - 0x305a2000  VideoToolbox armv7 <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x327ee000 - 0x32d33000  FaceCoreLight armv7  /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x34352000 - 0x3435f000  CoreVideo armv7 <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x33846000 - 0x3384b000  libGFXShared.dylib armv7 <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x30bb7000 - 0x30bba000  libCoreVMClient.dylib armv7  /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x373b5000 - 0x373ba000  IOMobileFramebuffer armv7 <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x372bd000 - 0x372fe000  libGLImage.dylib armv7 <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x36195000 - 0x36196000  libCVMSPluginSupport.dylib armv7  /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x318f1000 - 0x318f3000  CoreSurface armv7 <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x37274000 - 0x372bd000  CoreMedia armv7  /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x314c6000 - 0x314ce000  AssetsLibraryServices armv7 <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x31919000 - 0x3193a000  libxslt.1.dylib armv7 <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x37008000 - 0x37052000  libc++.1.dylib armv7 <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x31d90000 - 0x31e7f000  libiconv.2.dylib armv7 <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x32ed0000 - 0x32ee6000  libresolv.9.dylib armv7 <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x34506000 - 0x34542000  libCGFreetype.A.dylib armv7 <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x300ff000 - 0x30119000  libRIP.A.dylib armv7 <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x34a17000 - 0x34a32000  CoreServicesInternal armv7  /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal
0x37052000 - 0x37132000  RawCamera armv7 <293f818ba6533dceae8b900b6ed3c887> /System/Library/CoreServices/RawCamera.bundle/RawCamera
0x3215f000 - 0x324cf000  TextInput armv7 <8d7f24642c7634cc8e3a6e65f1dcd98e> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x341ed000 - 0x3434d000  libmecabra.dylib armv7 <06a0a1ee488030169bdfab11fc8d2c5c> /usr/lib/libmecabra.dylib
0x37b76000 - 0x37c3d000  GLEngine armv7 <6617f2b4ee283469a5595129889ff049> /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x35de8000 - 0x35eb8000  libGLProgrammability.dylib armv7 <49607ffe4ee9389494285a213e392924> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x3743e000 - 0x37545000  IMGSGX543GLDriver armv7 <7454a840600038949d67edad05097242> /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
0x31d04000 - 0x31d0a000  libGPUSupportMercury.dylib armv7 <3c1cc3175c403ace8fcbd3826bd43807> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x309fc000 - 0x309ff000  libCoreFSCache.dylib armv7 <808518e0fbf539af8489f028ca5198c7> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x34a54000 - 0x34a67000  DataDetectorsUI armv7 <50ea319aaeb7307e92719980dd4b2953> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI
0x327da000 - 0x327ee000  DataDetectorsCore armv7 <3f4596cbe1b13fdcb427d87de21df3f6> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x364b8000 - 0x364f8000  QuickLook armv7 <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x3148a000 - 0x3148e000  libgermantok.dylib armv7 <94278987ba623a35ae545db5636b4370> /usr/lib/libgermantok.dylib
0x3262b000 - 0x3263f000  AssistantServices armv7 <4a0843742f363a8885b8db13b44ae256> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x37135000 - 0x3714c000  VoiceServices armv7  /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x32ee6000 - 0x32f40000  IMAVCore armv7  /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore
0x31d1d000 - 0x31d23000  CrashReporterSupport armv7  /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x5231000 - 0x5242000  Riven armv7 <46e4d9c7b88d3afca369efb40e3ff4d5> /System/Library/TextInput/Riven.bundle/Riven 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:10:11.023

关于未符号化的系统符号：这些符号可能无法通过 Spotlight 在您的系统上使用。您是否将设备升级到 5.1.1 并且 Xcode 是否提取了符号？检查`~/Library/Developer/Xcode/iOS DeviceSupport`。它应该包含一个名为`5.1.1 (9B206)`.

我确实在我们的（HockeyApp - 我是开发人员之一）符号服务器上运行了您的报告的符号化，并得到了以下输出。这是因为崩溃报告不知何故缺少这些系统库的 UUID。您使用的是哪个版本的 PLCrashReporter？您可能想查看[QuincyKit](http://github.com/therealkerni/quincykit)，它包含比其项目网站上的更新版本的 PLCrashReporter。希望这个对你有帮助。

**编辑**：使用我们数据库中另一个崩溃的 UUID 更新了崩溃报告，并再次符号化了报告。所以看起来问题与在您的应用程序收到内存警告时已释放的对象上注册的通知有关。您可以尝试使用 iOS 模拟器进行模拟，甚至添加代码以在使用模拟器测试您的应用程序时自动检查此类错误，请参阅此答案：[https ://stackoverflow.com/a/9311289/474794](https://stackoverflow.com/a/9311289/474794)

```
Incident Identifier: [TODO]
CrashReporter Key:   [TODO]
Process:         MyApp [4815]
Path:            /var/mobile/Applications/6497DD3A-79B5-4E6B-87C9-65D77BD45E6B/MyApp.app/MyApp
Identifier:      com.company.myapp
Version:         1.7.6
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-05-16 18:44:57 +0000
OS Version:      iPhone OS 5.1.1
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xd0000008
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x361dbf78 objc_msgSend + 16
1   Foundation                          0x34ea14ff __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 19
2   CoreFoundation                      0x34d86547 ___CFXNotificationPost_block_invoke_0 + 71
3   CoreFoundation                      0x34d12097 _CFXNotificationPost + 1407
4   Foundation                          0x34e153eb -[NSNotificationCenter postNotificationName:object:userInfo:] + 67
5   Foundation                          0x34e16c1b -[NSNotificationCenter postNotificationName:object:] + 31
6   UIKit                               0x32f790ed -[UIApplication _performMemoryWarning] + 81
7   UIKit                               0x32f791e7 -[UIApplication _receivedMemoryNotification] + 175
8   libdispatch.dylib                   0x30de42e1 _dispatch_source_invoke + 517
9   libdispatch.dylib                   0x30de1b81 _dispatch_queue_invoke$VARIANT$mp + 53
10  libdispatch.dylib                   0x30de1ec1 _dispatch_main_queue_callback_4CF$VARIANT$mp + 157
11  CoreFoundation                      0x34d8d2ad __CFRunLoopRun + 1269
12  CoreFoundation                      0x34d104a5 CFRunLoopRunSpecific + 301
13  CoreFoundation                      0x34d1036d CFRunLoopRunInMode + 105
14  GraphicsServices                    0x36f85439 GSEventRunModal + 137
15  UIKit                               0x32df5cd5 UIApplicationMain + 1081
16  MyApp                              0x00002077 main (main.m:14)

Thread 1:
0   libsystem_kernel.dylib              0x35c393a8 kevent + 24
1   libdispatch.dylib                   0x30de2c29 _dispatch_mgr_wakeup + 1

Thread 2:
0   WebCore                             0x312aa7f0 WebCore::StringSourceProvider::~StringSourceProvider() + 0
1   JavaScriptCore                      0x33a6cf91 JSC::MarkedBlock::sweep() + 101
2   JavaScriptCore                      0x33a6cf19 JSC::MarkedSpace::sweep() + 41
3   JavaScriptCore                      0x33a6812f JSC::Heap::reset(JSC::Heap::SweepToggle) + 55
4   JavaScriptCore                      0x33a680f1 JSC::Heap::collectAllGarbage() + 17
5   JavaScriptCore                      0x33abcedb JSC::JSGlobalData::releaseExecutableMemory() + 395
6   WebCore                             0x314cf99b WebCore::GCController::releaseExecutableMemory() + 35
7   WebKit                              0x350e8c45 +[WebView(WebPrivate) _handleMemoryWarning] + 189
8   WebCore                             0x311950b5 HandleRunSource + 365
9   CoreFoundation                      0x34d8ead3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
10  CoreFoundation                      0x34d8e29f __CFRunLoopDoSources0 + 215
11  CoreFoundation                      0x34d8d045 __CFRunLoopRun + 653
12  CoreFoundation                      0x34d104a5 CFRunLoopRunSpecific + 301
13  CoreFoundation                      0x34d1036d CFRunLoopRunInMode + 105
14  WebCore                             0x311e8ca3 RunWebThread(void*) + 403
15  libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 3:
0   libsystem_kernel.dylib              0x35c39004 mach_msg_trap + 20
1   CoreFoundation                      0x34d8e3f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x34d8d12b __CFRunLoopRun + 883
3   CoreFoundation                      0x34d104a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x34d1036d CFRunLoopRunInMode + 105
5   Foundation                          0x34e22bb9 +[NSURLConnection(Loader) _resourceLoadLoop:] + 309
6   Foundation                          0x34e22a81 -[NSThread main] + 73
7   Foundation                          0x34eb6591 __NSThread__main__ + 1049
8   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 4:
0   libsystem_kernel.dylib              0x35c49570 __select + 20
1   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 5:
0   libsystem_kernel.dylib              0x35c39004 mach_msg_trap + 20
1   CoreFoundation                      0x34d8e3f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x34d8d12b __CFRunLoopRun + 883
3   CoreFoundation                      0x34d104a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x34d8d44b CFRunLoopRun + 99
5   MyApp                              0x0003bf7b +[ASIHTTPRequest runRequests] (ASIHTTPRequest.m:4779)
6   Foundation                          0x34e22a81 -[NSThread main] + 73
7   Foundation                          0x34eb6591 __NSThread__main__ + 1049
8   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 6:
0   libsystem_kernel.dylib              0x35c39004 mach_msg_trap + 20
1   CoreFoundation                      0x34d8e3f3 __CFRunLoopServiceMachPort + 127
2   CoreFoundation                      0x34d8d12b __CFRunLoopRun + 883
3   CoreFoundation                      0x34d104a5 CFRunLoopRunSpecific + 301
4   CoreFoundation                      0x34d1036d CFRunLoopRunInMode + 105
5   WebCore                             0x312120d9 WebCore::runLoaderThread(void*) + 129
6   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 7:
0   libsystem_kernel.dylib              0x35c49068 __psynch_cvwait + 24
1   libsystem_c.dylib                   0x327567c9 pthread_cond_wait + 41
2   JavaScriptCore                      0x33a99915 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 61
3   WebCore                             0x31349be3 WTF::PassOwnPtr<WebCore::LocalStorageTask> WTF::MessageQueue<WebCore::LocalStorageTask>::waitForMessageFilteredWithTimeout<bool ()(WebCore::LocalStorageTask*)>(WTF::MessageQueueWaitResult&, bool (&)(WebCore::LocalStorageTask*), double) + 59
4   WebCore                             0x31349b99 WebCore::LocalStorageThread::threadEntryPointCallback(void*) + 113
5   libsystem_c.dylib                   0x32756735 _pthread_start + 321

Thread 8:
0   libsystem_kernel.dylib              0x35c49cd4 __workq_kernreturn + 8

Thread 9:
0   libsystem_kernel.dylib              0x35c49cd4 __workq_kernreturn + 8

Thread 10:
0   ???                                 0x00000000 0x0 + 0

Thread 0 crashed with ARM (Native) Thread State:
    r0: 0x0eecd480     r1:  0x36b1e9fb     r2:  0x00000000     r3:  0x00000000 
    r4: 0xd0000000     r5:  0x00000000     r6:  0x00000000     r7:  0x2fe94e0c 
    r8: 0x00000000     r9:  0x0dac7a7e    r10:  0x000f4454    r11:  0x00001a60 
   r12: 0x3f587048     sp:  0x2fe94df4     lr:  0x000f9c15     pc:  0x3665ff78 
  cpsr: 0x200f0030 
Binary Images:
0x97000 - 0x19d000  MyApp armv7  /var/mobile/Applications/6497DD3A-79B5-4E6B-87C9-65D77BD45E6B/MyApp.app/MyApp
0x3341e000 - 0x3346d000  CoreLocation armv7 <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x373ba000 - 0x3743e000  MapKit armv7  /System/Library/Frameworks/MapKit.framework/MapKit
0x33dc9000 - 0x33fae000  AudioToolbox armv7  /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x33119000 - 0x3320b000  QuartzCore armv7 <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3754a000 - 0x375f8000  libxml2.2.dylib armv7 <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x30bd0000 - 0x30bdd000  libz.1.dylib armv7 <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x34db3000 - 0x34df8000  MobileCoreServices armv7 <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x304fe000 - 0x30534000  SystemConfiguration armv7 <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x376e2000 - 0x377ba000  CFNetwork armv7 <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x343e4000 - 0x3441c000  Security armv7  /System/Library/Frameworks/Security.framework/Security
0x36723000 - 0x36bc6000  UIKit armv7 <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x3454d000 - 0x346cc000  Foundation armv7 <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x336ca000 - 0x33810000  CoreGraphics armv7 <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x35105000 - 0x352ac000  CoreData armv7  /System/Library/Frameworks/CoreData.framework/CoreData
0x34726000 - 0x34746000  libSystem.B.dylib armv7 <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x33cab000 - 0x33dc3000  CoreFoundation armv7 <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3665c000 - 0x36723000  libobjc.A.dylib armv7 <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x30ab2000 - 0x30ac2000  SpringBoardServices armv7  /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x326c8000 - 0x326cb000  MobileInstallation armv7 <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x36196000 - 0x361a0000  libMobileGestalt.dylib armv7 <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x34d6d000 - 0x34db3000  GeoServices armv7  /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x338a3000 - 0x338e0000  AppSupport armv7 <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x37c98000 - 0x37ca3000  GraphicsServices armv7 <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3499f000 - 0x349de000  IOKit armv7  /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x3188f000 - 0x318d9000  AddressBook armv7  /System/Library/Frameworks/AddressBook.framework/AddressBook
0x34169000 - 0x341e9000  libsqlite3.dylib armv7  /usr/lib/libsqlite3.dylib
0x35cb5000 - 0x35cc0000  libbz2.1.0.dylib armv7 <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x341e9000 - 0x341ed000  CoreTime armv7  /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x33851000 - 0x338a3000  libstdc++.6.dylib armv7  /usr/lib/libstdc++.6.dylib
0x3015c000 - 0x302a6000  libicucore.A.dylib armv7  /usr/lib/libicucore.A.dylib
0x34e12000 - 0x34e13000  libgcc_s.1.dylib armv7  /usr/lib/libgcc_s.1.dylib
0x34a7c000 - 0x34a84000  libc++abi.dylib armv7  /usr/lib/libc++abi.dylib
0x3434d000 - 0x34352000  libcache.dylib armv7  /usr/lib/system/libcache.dylib
0x30bf0000 - 0x30c34000  libcommonCrypto.dylib armv7 <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x364ab000 - 0x364af000  libcompiler_rt.dylib armv7  /usr/lib/system/libcompiler_rt.dylib
0x3384b000 - 0x33851000  libcopyfile.dylib armv7 <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x3258c000 - 0x325a3000  libdispatch.dylib armv7 <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x36d46000 - 0x36d48000  libdnsinfo.dylib armv7 <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x356bd000 - 0x356bf000  libdyld.dylib armv7 <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x348a6000 - 0x348a7000  libkeymgr.dylib armv7  /usr/lib/system/libkeymgr.dylib
0x30837000 - 0x3083e000  liblaunch.dylib armv7  /usr/lib/system/liblaunch.dylib
0x32142000 - 0x32146000  libmacho.dylib armv7  /usr/lib/system/libmacho.dylib
0x36bc6000 - 0x36bcd000  libnotify.dylib armv7 <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x31d23000 - 0x31d25000  libremovefile.dylib armv7 <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x361f9000 - 0x361fb000  libsystem_blocks.dylib armv7 <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x3535d000 - 0x353ea000  libsystem_c.dylib armv7 <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x30afe000 - 0x30b04000  libsystem_dnssd.dylib armv7 <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x31cda000 - 0x31cf8000  libsystem_info.dylib armv7 <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x30734000 - 0x3074b000  libsystem_kernel.dylib armv7 <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x327a8000 - 0x327ac000  libsystem_network.dylib armv7 <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x30732000 - 0x30734000  libsystem_sandbox.dylib armv7 <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x3441c000 - 0x3441d000  libunwind.dylib armv7  /usr/lib/system/libunwind.dylib
0x30ac2000 - 0x30ad4000  libxpc.dylib armv7  /usr/lib/system/libxpc.dylib
0x352d8000 - 0x352df000  MobileIcons armv7  /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x354b6000 - 0x354c3000  libCRFSuite.dylib armv7  /usr/lib/libCRFSuite.dylib
0x36225000 - 0x36226000  liblangid.dylib armv7 <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x34f65000 - 0x34f75000  GenerationalStorage armv7  /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x34a84000 - 0x34c42000  ImageIO armv7 <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x3499a000 - 0x3499f000  IOSurface armv7 <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35c54000 - 0x35ca1000  CoreTelephony armv7  /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x31cd3000 - 0x31cda000  liblockdown.dylib armv7 <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x361a0000 - 0x361f9000  CoreAudio armv7  /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x35ca5000 - 0x35cb3000  libbsm.0.dylib armv7 <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x36e47000 - 0x36e48000  Accelerate armv7 <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x36173000 - 0x3617a000  MobileKeyBag armv7  /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x348a7000 - 0x34980000  vImage armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x375f9000 - 0x375fa000  vecLib armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x33390000 - 0x333db000  libvDSP.dylib armv7 <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x31e80000 - 0x32142000  libLAPACK.dylib armv7 <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x32fd8000 - 0x33083000  libBLAS.dylib armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x352ac000 - 0x352b7000  libvMisc.dylib armv7  /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x36d4e000 - 0x36d72000  Bom armv7  /System/Library/PrivateFrameworks/Bom.framework/Bom
0x32583000 - 0x3258c000  ProtocolBuffer armv7 <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x3338b000 - 0x33390000  AggregateDictionary armv7 <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x3256f000 - 0x32581000  DataAccessExpress armv7  /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x30bcc000 - 0x30bd0000  NetworkStatistics armv7 <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x32f8a000 - 0x32f96000  AccountSettings armv7 <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x30c34000 - 0x30c7f000  ManagedConfiguration armv7  /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x340a1000 - 0x340b8000  libmis.dylib armv7 <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x346d7000 - 0x346ec000  PersistentConnection armv7 <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x35cb3000 - 0x35cb5000  DataMigration armv7  /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x32533000 - 0x3253c000  MobileWiFi armv7  /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x31d25000 - 0x31d29000  CaptiveNetwork armv7  /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x37c81000 - 0x37c98000  EAP8021X armv7 <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x35f43000 - 0x35fea000  AddressBookUI armv7  /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x35fea000 - 0x36041000  GMM armv7 <6b2f7e1aa6be3d69b4c4cf54ed960602> /System/Library/PrivateFrameworks/GMM.framework/GMM
0x36041000 - 0x36046000  FTClientServices armv7 <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x3075f000 - 0x30764000  libAccessibility.dylib armv7 <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x36536000 - 0x3665c000  JavaScriptCore armv7 <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x36ee2000 - 0x36f40000  StoreServices armv7 <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x324cf000 - 0x32533000  IMCore armv7 <046b6b615a743057b59d4aaba8a91d61> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x34c54000 - 0x34c59000  Marco armv7 <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x36131000 - 0x3616f000  FTServices armv7 <3f23418319a03a589dd5cac7df20e238> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x36cbb000 - 0x36cf8000  IMFoundation armv7 <253125b9103c3d13b66923ac6893c25b> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x36226000 - 0x36253000  libtidy.A.dylib armv7 <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x3609c000 - 0x3610d000  CoreImage armv7 <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x350b1000 - 0x350c8000  DictionaryServices armv7 <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x37165000 - 0x371b7000  CoreText armv7 <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x34c9c000 - 0x34d6d000  WebKit armv7 <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x30c7f000 - 0x3143f000  WebCore armv7 <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x36f4c000 - 0x36fc6000  ProofReader armv7 <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x34f2f000 - 0x34f54000  PrintKit armv7 <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x314a0000 - 0x314c6000  OpenCL armv7  /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x3042d000 - 0x3043d000  OpenGLES armv7  /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x30569000 - 0x305a2000  VideoToolbox armv7 <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x327ee000 - 0x32d33000  FaceCoreLight armv7  /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x34352000 - 0x3435f000  CoreVideo armv7 <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x33846000 - 0x3384b000  libGFXShared.dylib armv7 <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x30bb7000 - 0x30bba000  libCoreVMClient.dylib armv7  /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x373b5000 - 0x373ba000  IOMobileFramebuffer armv7 <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x372bd000 - 0x372fe000  libGLImage.dylib armv7 <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x36195000 - 0x36196000  libCVMSPluginSupport.dylib armv7  /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x318f1000 - 0x318f3000  CoreSurface armv7 <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x37274000 - 0x372bd000  CoreMedia armv7  /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x314c6000 - 0x314ce000  AssetsLibraryServices armv7 <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x31919000 - 0x3193a000  libxslt.1.dylib armv7 <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x37008000 - 0x37052000  libc++.1.dylib armv7 <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x31d90000 - 0x31e7f000  libiconv.2.dylib armv7 <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x32ed0000 - 0x32ee6000  libresolv.9.dylib armv7 <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x34506000 - 0x34542000  libCGFreetype.A.dylib armv7 <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x300ff000 - 0x30119000  libRIP.A.dylib armv7 <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x34a17000 - 0x34a32000  CoreServicesInternal armv7  /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal
0x37052000 - 0x37132000  RawCamera armv7 <293f818ba6533dceae8b900b6ed3c887> /System/Library/CoreServices/RawCamera.bundle/RawCamera
0x3215f000 - 0x324cf000  TextInput armv7 <8d7f24642c7634cc8e3a6e65f1dcd98e> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x341ed000 - 0x3434d000  libmecabra.dylib armv7 <06a0a1ee488030169bdfab11fc8d2c5c> /usr/lib/libmecabra.dylib
0x37b76000 - 0x37c3d000  GLEngine armv7 <6617f2b4ee283469a5595129889ff049> /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x35de8000 - 0x35eb8000  libGLProgrammability.dylib armv7 <49607ffe4ee9389494285a213e392924> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x3743e000 - 0x37545000  IMGSGX543GLDriver armv7 <7454a840600038949d67edad05097242> /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
0x31d04000 - 0x31d0a000  libGPUSupportMercury.dylib armv7 <3c1cc3175c403ace8fcbd3826bd43807> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x309fc000 - 0x309ff000  libCoreFSCache.dylib armv7 <808518e0fbf539af8489f028ca5198c7> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x34a54000 - 0x34a67000  DataDetectorsUI armv7 <50ea319aaeb7307e92719980dd4b2953> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI
0x327da000 - 0x327ee000  DataDetectorsCore armv7 <3f4596cbe1b13fdcb427d87de21df3f6> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x364b8000 - 0x364f8000  QuickLook armv7 <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x3148a000 - 0x3148e000  libgermantok.dylib armv7 <94278987ba623a35ae545db5636b4370> /usr/lib/libgermantok.dylib
0x3262b000 - 0x3263f000  AssistantServices armv7 <4a0843742f363a8885b8db13b44ae256> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x37135000 - 0x3714c000  VoiceServices armv7  /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x32ee6000 - 0x32f40000  IMAVCore armv7  /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore
0x31d1d000 - 0x31d23000  CrashReporterSupport armv7  /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x5231000 - 0x5242000  Riven armv7 <46e4d9c7b88d3afca369efb40e3ff4d5> /System/Library/TextInput/Riven.bundle/Riven 
```

# ruby-on-rails - 嵌套 Rails 引擎

> ID：10627617
> 
> 赞同：6
> 
> 时间：2012-05-16T22:24:42.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

是否可以在其他 Rails 引擎中嵌入（嵌套）Rails 引擎？

我正在开发一个 Rails 3.1 应用程序，我想将它分成几个不同的部分，并将每个部分变成一个 Rails 引擎。但是，我也希望能够将整个应用程序变成一个 Rails 引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:51:27.150

可能，但并不容易。
[http://confreaks.com/videos/863-railsconf2012-railes-engines-patterns](http://confreaks.com/videos/863-railsconf2012-railes-engines-patterns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T22:15:14.187

想想您从嵌套引擎中获得了什么好处。嵌套意味着耦合，如果你想提高可维护性和可测试性，你应该减少这种耦合。我认为理想的引擎应该能够轻松独立运行 - 这就是您在目录中`dummy`创建应用程序的原因。`test`当然，您可以在主应用程序中保持嵌套或保留常见的东西，但您会发现随着代码库的增长，使用紧密耦合的依赖项来维护测试变得更加困难。

作为一种解决方案，我会尝试组合。将引擎目录彼此相邻但使用嵌套模块：

```
engines/foo_project - namespaced FooProject::*
engines/foo_project_user - namespaced FooProjectUser::* or FooProject::User::* 
```

如果有什么`FooProject::User`需要，`FooProject`那么理想情况下它应该被提取到另一个引擎中，比如`FooProject::Layout`. 在另一个方向，主应用程序应该将`User`内容连接到`FooProject`. 在主应用程序级别添加集成测试，你就会得到 ordnung。

# c# - C# Json 不支持 Restsharp 解析名称

> ID：10627618
> 
> 赞同：1
> 
> 时间：2012-05-16T22:24:44.257
> 
> 标签：c#, json, restsharp, json.net

嗨，我正在制作一个以 json 格式返回内容的 web api 客户端。我正在使用使用 newtonsoft.json 反序列化 json 对象的 Restsharp。

问题是服务器返回一个对象，该对象具有以**#Text**作为名称的属性。有没有办法让restsharp解析这个？

这是一个示例：

```
image: [
{
 #text: http://userserve-ak.last.fm/serve/34s/55125087.png
 size: small
}] 
```

所有其他属性都被正确解析，唯一的问题是这个，属性是字符串类型，所以在这里没有问题。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:31:45.543

JSON 无效；您需要在#text 键周围加上引号（因此将其设为“#text”）以及两个值（即“http://...png”和“small”）。

# javascript - 内容脚本：未捕获的类型错误：无法读取未定义的属性“onRequest”

> ID：10627623
> 
> 赞同：1
> 
> 时间：2012-05-16T22:25:12.417
> 
> 标签：javascript, google-chrome-extension

我一直在搜索 SO 并阅读谷歌文档，但我似乎找不到解决方案。

我的 Chrome 扩展程序正在注入内容脚本，我想设置一个`onRequest.listener`以便将请求发送到内容脚本。这是[*我*](https://stackoverflow.com/questions/2612098/about-sending-messages-among-bg-html-popup-html-and-contentscript-js)以前为`onRequest.listener`. 问题是由于某种未知原因，我不断收到此错误。

错误信息：

`Uncaught TypeError: Cannot ready property 'onRequest' of undefined`

`contentscript.js line 1;`

这是相关的代码...

**清单.json**

```
{
  "name": "Injector Extension",
  "version": "1.0",
  "manifest_version": 1,
  "icons": { "128": "icon.png" },
  "browser_action": {
    "default_icon": "icon.png",
    "default_title": "Injector Extension",
    "default_popup": "popup.html"
  },
  "options_page": "options.html",
  "background": {
    "page": "background.html"
  },
  "permissions": [
    "tabs", 
    "http://*/*",
    "https://*/*",
    "unlimitedStorage"],
  "content_scripts": [{
        "matches": [" (injector specific url) "],
        "js": ["contentscript.js"]
  }],
  "web_accessible_resources": ["js/script.js"] 
} 
```

**内容脚本**

```
 chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
  if (request.method == "fromPopup") {

    // Send JSON data back to Popup.
    sendResponse({data: "from Content Script to Popup"});

  } else {
     sendResponse({}); // snub them.
  }
}); 
```

**弹出窗口**

```
chrome.tabs.getSelected(null, function(tab) {
   chrome.tabs.sendRequest(tab.id, {method: "fromPopup", tabid: tab.id}, function(response) {
      console.log(response.data);
   });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T22:55:36.160

`chrome.extension.onRequest.addListener`仅在扩展上下文中有效。它不会在内容脚本中运行。

`chrome.extension.sendRequest`在内容脚本上下文中工作

相应地更新并将工作。

编辑：举例简单的消息传递：

**扩展脚本：**

```
chrome.extension.onRequest.addListener(function(r,s,sr){ 
     if(r==='HELLO') return sr.call(this,'BACK AT YOU');
}); 
```

**内容脚本：**

```
chrome.extension.sendRequest('HELLO', function(data){ alert(data); });
// will alert "BACK AT YOU" 
```

# formatting - 为什么 Fortran 输出有前导空格？

> ID：10627626
> 
> 赞同：7
> 
> 时间：2012-05-16T22:25:43.973
> 
> 标签：formatting, fortran, whitespace

我处理了来自 Fortran 程序的大量输出，这些程序的输出通常看起来有一个前导空格，即字符列 1 是空白的。考虑一个简短的程序`leading.f`：

```
 program leading
      print *, "<-- What's that space for?"
      end program leading 
```

有输出

```
 <-- What's that space for? 
```

（是的，开头有一个空格字符）。我的问题包含在程序中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T22:32:26.323

回到恐龙时代，当 FORTRAN 输出通常进入绿色条形打印机时，第一个打印列中的某些字符通常被解释为控制代码（换行、换页等）。许多程序员学会了将输出的第 1 列显式地清空，除非有某种特殊效果——而且旧习惯很难改掉！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-01T10:06:29.660

正如在此处和其他地方的另一个答案中所指出的那样，Fortran 输出具有*运输控制*的概念。对于使用回车控制的打印机，第一个字符是空格是开始新行所必需的。

Fortran[本身在 Fortran 2003 中删除](https://stackoverflow.com/q/3296237/3157076)了回车控制概念，但为了完整起见，我们可以看到 Fortran 仍然要求列表导向的输出（在大多数情况下）具有此（默认）前导空白（Fortran 2018，13.10.4 p.13）：

> 除了在定义的输出过程中通过显式格式化或通过连续的分隔字符序列创建的新记录外，每个输出记录都以空白字符开头。

名单格式也有类似的说法。

您可以通过避免使用列表导向输出来避免出现此前导空白：

```
print '(A)', '<-- No space here'
end 
```

请注意，这不是`print`这里，而是列表导向的输出，这是罪魁祸首。我们看到类似的`write`：

```
write (*,*) '<-- Space from the list-directed output'
end 
```

最后，如果我们使用*内部文件*，我们仍然会得到一个带有列表导向输出的前导空白：

```
character(len=20) :: internal
write (internal, *) '<-- Leading blank here'
end 
```

（如果我们用列表导向的输出输出这个内部文件，我们会看到*两个*前导空白。）

# salesforce - 当没有可用的刷新令牌时，如何刷新或撤销 OAuth2.0 访问/刷新令牌？

> ID：10627628
> 
> 赞同：3
> 
> 时间：2012-05-16T22:25:56.847
> 
> 标签：salesforce, oauth-2.0

我在我的沙盒环境中工作，试图找出 Chatter API 调用 - 我在测试期间保存了我的刷新令牌，但后来​​它丢失了。

现在，当我尝试访问 API 时，我收到以下错误：

`"expired access/refresh token"`

我现在如何解决这个问题？我没有刷新令牌，因此我无法请求刷新我的令牌，并且我不确定如何通过 UI 过期/删除/撤销它，以便我可以继续我的测试。

我的 cUrl 调用如下：

```
curl
    --form client_id=3MVG92.u...2KycWe
    --form client_secret=668...930
    --form grant_type=password
    --form username=mike....com
    --form password=*#()@*#$@
    --proxy 127.0.0.1:3128 --insecure
  https://test.salesforce.com/services/oauth2/token 
```

我尝试过的事情：

*   重置我的密码
*   删除远程访问并使用新的 client_id / secret 创建一个新的
*   重置我的安全令牌

有谁知道如何通过 Salesforce 中的 API 或 UI 使令牌过期或获取新的刷新令牌？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T22:36:00.020

要从 UI 撤消访问权限，请单击 Salesforce 右上角菜单中的以下内容： 您的姓名 | 设置 | 我的个人信息 | 个人信息并单击拒绝

更多信息： [https ://na12.salesforce.com/help/doc/en/remoteaccess_about.htm](https://na12.salesforce.com/help/doc/en/remoteaccess_about.htm)

你用的是什么范围？如果您指定范围（如“api”），则需要通过在范围中指定“刷新令牌”（空格分隔）来显式请求刷新令牌。有关范围的更多信息： [https ://na12.salesforce.com/help/doc/en/remoteaccess_oauth_scopes.htm](https://na12.salesforce.com/help/doc/en/remoteaccess_oauth_scopes.htm)

[与 Google 不同](http://googlecode.blogspot.com/2011/10/upcoming-changes-to-oauth-20-endpoint.html)，Salesforce 将多次提供刷新令牌，无论用户是否刚刚批准了应用程序。

我一直在使用[Google 的 OAuth playground](https://code.google.com/oauthplayground)来解决这个问题。您可以单击右上角的齿轮并指定 Salesforce 服务的值。授权端点：[https](https://login.salesforce.com/services/oauth2/authorize) ://login.salesforce.com/services/oauth2/authorize 令牌端点：[https](https://login.salesforce.com/services/oauth2/token) ://login.salesforce.com/services/oauth2/token 客户 ID/秘密：来自 Salesforce 的“消费者”密钥/秘密信息在远程访问配置中

您需要在应用配置中使用“https://code.google.com/oauthplayground/”作为回调 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T18:55:47.563

这可以在您的帐户中完成：

`My Settings | Select Personal | Advanced User Details | OAuth Connected Apps`

[可以在此处找到 salesforce 的确切步骤](https://help.salesforce.com/apex/HTViewHelpDoc?id=remoteaccess_request_manage.htm)

# javascript - knockout.js - 对象数据存储最佳实践

> ID：10627633
> 
> 赞同：2
> 
> 时间：2012-05-16T22:26:24.273
> 
> 标签：javascript, data-binding, knockout.js, field

我正在使用淘汰赛 js 从异步服务加载作业列表。每个作业都有很长的字段列表，我想知道将数据存储为原始 json 是否被认为是不好的做法？

```
function Job(data) {
    var self = this;
    this.data = data; // is this bad practice?

    this.companyName = data.CompanyName; // should I instead list out all the fields?
    this.jobTitle = data.JobTitle;
    // .. 50 more fields
}

function JobsViewModel() {
    function getJobs() {
        $.getJSON(myUrl, { myParams }, function(data) {
            var mappedJobs = $.map(JSON.parse(data.value), function(item) { return new Job(item) });
            self.jobs(mappedJobs);                        
        });
    }

    // initial data load
    getJobs();
}

... // then in my data-bindings
<label data-binding="text: data.CompanyName"></label>
  versus
<label data-binding="text: companyName"></label> 
```

后者更干净，更清晰，但由于我有很多领域，我想得到一些意见。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:11:04.673

您应该查看淘汰赛映射插件。它将根据您的数据生成属性，因此您不必手写所有属性。

[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

当模型中的属性发生更改时，您使用的当前方法不会更新标签，因为您的属性不可观察。使用映射插件也可以解决这个问题。

# c# - 按月将一个列表拆分为多个 - C#、Linq

> ID：10627635
> 
> 赞同：3
> 
> 时间：2012-05-16T22:26:31.400
> 
> 标签：c#, linq, list, median

我有以下 Linq 查询：

```
List<MonthlySales> monthlySales = (from sale in Sales
                     group sale by new { sale.DateSold.Month, sale.Product.Shop } into ds
                     select new MonthlyTitleSales
                     {
                         Shop = ds.Select(it => it.Product.Shop).FirstOrDefault(),
                         Month = ds.Select(it => it.DateSold.Month).FirstOrDefault(),
                         Year = ds.Select(it => it.DateSold.Year).FirstOrDefault(),
                         USDNumberItemsSold = ds.Where(it => it.USDCut.HasValue).Where(it => it.USDCut != 0).Count(),
                         GBPNumberItemsSold = ds.Where(it => it.GBPCut.HasValue).Where(it => it.GBPCut != 0).Count(),
                         EURNumberItemsSold = ds.Where(it => it.EURCut.HasValue).Where(it => it.EURCut != 0).Count(),
                         USDRevenueTotal = PerformCurrencyConversion(ds.Sum(it => it.USDCut.HasValue ? it.USDCut.Value : 0), 0M, 0M, Currency, endDate),
                         GBPRevenueTotal = PerformCurrencyConversion(0M, ds.Sum(it => it.GBPCut.HasValue ? it.GBPCut.Value : 0), 0M, Currency, endDate),
                         EURRevenueTotal = PerformCurrencyConversion(0M, 0M, ds.Sum(it => it.EURCut.HasValue ? it.EURCut.Value : 0), Currency, endDate),
                     }).OrderBy(it => it.DateSold.Month).ToList(); 
```

此查询为我提供了一个列表，其中每个列表项中包含以下元素：Shop、Month、Year、Revenue Made

我最终需要做的是计算所有商店每个月的收入中位数，因此我需要以允许我这样做的方式准备好数据。

我认为一种方法可能是按月将此列表分成小列表，但我怀疑这是最有效的解决方案。

有人对此有任何想法吗？

面向需要查看的任何人的每月销售课程：

```
public class MonthlySales
    {
        public int Month { get; set; }
        public int Year { get; set; }

        public Shop Shop { get; set; }

        public int USDNumberItemsSold { get; set; }
        public int GBPNumberItemsSold { get; set; }
        public int EURNumberItemsSold { get; set; }
        public int TotalNumberItemsSold { get { return USDNumberItemsSold + GBPNumberItemsSold + EURNumberItemsSold; } }

        public decimal USDRevenueTotal { get; set; }
        public decimal GBPRevenueTotal { get; set; }
        public decimal EURRevenueTotal { get; set; }
        public decimal OverallEarnings { get { return USDRevenueTotal + GBPRevenueTotal + EURRevenueTotal; } }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T22:36:21.193

您可以使用`GroupBy`按月将列表分组。例如，以下将按月（实际上是月+年）分组，然后将每个月的所有值写入控制台：

```
var grouped = monthlySales.GroupBy(ms => string.Format("{0}-{1}", ms.Month, ms.Year));

foreach(var group in grouped)
{
     Console.WriteLine("Values in month-year of {0}:", group.Key);
     foreach(var ms in group)
         Console.WriteLine("   {0}", ms.USDRevenueTotal);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:35:00.300

GroupBy 非常适合这个问题。还要考虑 ToLookup（您可以使用相同的代码，只需将 GroupBy 更改为 ToLookup）。

差异：

*   GroupBy 是懒惰的。
*   ToLookup 是急切的。

* * *

*   GroupBy，由于其懒惰的性质，依赖于源源不断地产生结果。如果源发生更改，则 GroupBy 结果将包含更改 - 它已连接。
*   ToLookup，由于其急切的性质，不关心源是否更改或消失 - 它已断开连接。

* * *

*   GroupBy 返回一个`IEnumerable<IGrouping<TKey, TValue>>`，它只适用于循环。
*   ToLookup 返回一个`ILookup<TKey, TValue>`，它与 a 类似`Dictionary<TKey, List<TValue>>`，因为它支持按键查找，此外也是一个`IEnumerable<IGrouping<TKey, TValue>>`。

* * *

另外 - 考虑替代字符串作为键。这是一个用作键的匿名类：

```
var grouped = monthlySales.GroupBy(ms => new {ms.Month, ms.Year}); 
```

# c# - 将表达式转换为数据类型 nvarchar 的算术溢出错误

> ID：10627636
> 
> 赞同：0
> 
> 时间：2012-05-16T22:26:34.443
> 
> 标签：c#, asp.net, .net, sql, sql-server-express

我正在创建一个帮助台系统，但似乎遇到了一个小问题，当用户单击一个按钮以“预注册”帮助台票号时，我的脚本将触发到 SQL Express 服务器，创建一个新行 -> 获取行 ID -> 使用行 ID 创建最终票证参考（以 RAD000001 的格式，例如第 1 行）这个过程似乎对我很好，直到我到达第 9 号......当用户点击“创建新票证”按钮（生成票号 10）我收到以下错误：

```
Arithmetic overflow error converting expression to data type nvarchar. 
```

它创建行，但似乎在更新时失败（创建行，返回 ID，然后从 ID 创建 ref）

我的 SQL 表如下所示：

```
CREATE TABLE [dbo].[tickets](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [ticket_ref] [varchar](15) NULL,
    [details_id] [int] NULL,
    [state] [int] NULL,
    [create_date_Time] [datetime] NOT NULL,
    [details_subject] [varchar](255) NULL,
    [details_main_body] [text] NULL
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

这是后面的c#代码：

```
private string Reform_TicketId(string original_ticket_id)
{
    switch (original_ticket_id.Length)
    {
        case 1:
            return "RAD00000" + original_ticket_id.ToString();
        case 2:
            return "RAD0000" + original_ticket_id.ToString();
        case 3:
            return "RAD000" + original_ticket_id.ToString();
        case 4:
            return "RAD00" + original_ticket_id.ToString();
        case 5:
            return "RAD0" + original_ticket_id.ToString();
        case 6:
            return "RAD" + original_ticket_id.ToString();
        default:
            return "ERROR!";
    }
}

protected void DsCreateTicketEntry_Inserted(object sender, SqlDataSourceStatusEventArgs e)
{
    string original_id = e.Command.Parameters["@ticket_id"].Value.ToString();
    string reformed_id = Reform_TicketId(original_id.ToString()).ToString();

    if (original_id != "0")
    {
        //It has returned a value that is a DB ID field and seems correct! lets proceed!
        DsCreateTicketEntry.UpdateParameters["ticket_db_id"].DefaultValue = original_id;
        //DsCreateTicketEntry.UpdateParameters["new_ticket_id"].DefaultValue = reformed_id;
        DsCreateTicketEntry.UpdateParameters["new_ticket_id"].DefaultValue = "RAD000002";
        DsCreateTicketEntry.Update();
        LblTicketOutput.Text = reformed_id;
    }
    else
    {
        //@TODO: Write to the label stating we had problems generating a Ticket ID!
    }
}

protected void btnCreateTicket_Click(object sender, EventArgs e)
{
    DsCreateTicketEntry.Insert();
    btnCreateTicket.Enabled = false;
} 
```

在我的 SQLDataSource 中使用以下查询：

```
InsertCommand="INSERT INTO tickets(state, create_date_Time) VALUES (1,GETDATE()) SET @ticket_id=SCOPE_IDENTITY();"    
UpdateCommand="UPDATE tickets SET ticket_ref = @new_ticket_id WHERE (id = @ticket_db_id)" 
```

希望有人能够阐明我哪里出错了！？我整天都在看这段代码，它稍微超出了我的学习范围......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:05:17.943

您需要将 @ticket_id 定义为输出参数，并且您可能需要在 SET 语句之前使用分号。

采用：

```
String.Format("RAD{0:d6}", ticket_Id) 
```

格式化您的票号。请注意，在我的示例中，ticket_id 是一个整数。

作为一般建议，我通常会避免使用 SQLDataSource 和该设计模式。现在有更好、更优雅的数据访问解决方案。看看[实体框架](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)。EF 将让您快速启动并运行，您的代码中不会嵌入任何 SQL 语句。您可以从您的 DB 生成实体类，甚至使用 Code First 方法从您的类生成您的 DB 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:07:56.440

不能完全解决您的问题，但如果您可以将表格重新定义为：

```
...

    Id int identity not null,
    Ticket_ref as 'RAD'+replicate('0', 5-len(cast(Id as varchar)))+Cast(Id as Varchar) persisted,
... 
```

你会在不必要的代码上写很多行......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:06:37.713

在 Saille 的回答之后，我查看了我的代码并注意到我声明 @ticket_id 的地方是这样声明的：

```
<asp:Parameter DefaultValue="0" Direction="Output" Name="ticket_id" /> 
```

在声明“DbType = Int32”之后：

```
<asp:Parameter DefaultValue="0" Direction="Output" DbType=Int32 Name="ticket_id" /> 
```

一切似乎都正常工作，问题没有解决！

虽然我不是 100% 确定这为什么会导致问题，但有没有人能够向我解释这一点，让我（以及希望其他人）理解为什么这样做......

PS。我正在使用这个项目来学习一般的 C#/ASP.net（会话等）一旦完成，1.5 版将使用更好的数据库层（如实体）构建......我仍然有点 n00b ！

感谢所有的帮助家伙！

汤姆。

# maven - Maven Mirror - 如果镜像主机不可用，如何绕过？

> ID：10627637
> 
> 赞同：5
> 
> 时间：2012-05-16T22:26:34.600
> 
> 标签：maven, vpn

我有一个 Maven 镜像存储库（Archiva），例如

```
<settings>
   <mirrors>     
        <mirror>
        <id>archiva</id>
        <mirrorOf>*</mirrorOf>
        <url>http://myMirrorHost:8080/archiva/repository/internal</url>     
    </mirror>
       </mirrors>
       ... 
```

然而，这是在 VPN 后面，有时我宁愿不使用它/无法连接到 VPM

问题是在 VPN 之外构建时，出现此错误

> myMirrorHost：未知主机 myMirrorHost -> [帮助 1]

当我希望它超时/如果找不到则不使用镜像

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T09:04:25.247

我有类似的情况，我将镜像设置更改为镜像中心，而不是 *：

```
<mirrors>     
 <mirror>
  <id>archiva</id>
  <mirrorOf>central</mirrorOf>
  <url>http://myMirrorHost:8080/archiva/repository/internal</url>     
 </mirror>
</mirrors> 
```

然后在配置文件中，我定义了另一个存储库，例如 ibiblio：

```
<profile>
  <id>myprofile</id>

 <activation>
  <activeByDefault>true</activeByDefault>
 </activation>

  <repositories>
    <repository>
      <id>ibiblio.org</id>
       <name>ibiblio Mirror of http://repo1.maven.org/maven2/</name>
       <url>http://mirrors.ibiblio.org/pub/mirrors/maven2</url> 
    </repository>
  </repositories>  
</profile> 
```

现在，当在镜像中找不到某些东西，或者镜像主机无法访问时，maven 会尝试另一个存储库（它是中央的镜像）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T22:39:16.897

尝试在未连接到 VPN 时以离线模式运行构建

```
mvn -o clean package 
```

另一种选择是在连接到不同网络时使用第二个 Maven 设置文件：

```
mvn -s $HOME/.m2/settings-alternative.xml clean package 
```

在这种情况下，我还建议指定一个替代的本地存储库位置（在设置文件中），以避免构建混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T18:58:58.143

我一直使用与[Mark 的分析器](https://stackoverflow.com/a/10627757/140037)类似的方法，我编写了一个脚本来处理复制不同的配置或删除那里的配置。

基本用法是首先编写一个配置文件，`~/.m2/settings.<config>.xml`其中`<config>`是配置的名称，然后通过调用来设置配置`setmvn [config]`，不指定将删除就地配置。这将符号链接到配置文件，因此如果您的工具修改当前配置，它将修改当前到位的配置文件。

```
#!/bin/bash

[ "$#" -lt 2 ] || {
    echo "Usage: $(basename $0) [profile-name]" >&2
    exit 1
}

if [ -z "$1" ] ; then
    if [ -f ~/.m2/settings.xml ] ; then
        echo "Configuration removed."
        rm -f ~/.m2/settings.xml
    else
        echo "Configuration not in place, nothing to do." >&2
    fi
else
    if [ -f ~/.m2/"settings.$1.xml" ] ; then
        [ -f ~/.m2/settings.xml ] && rm -f ~/.m2/settings.xml
        ln -s ~/.m2/"settings.$1.xml" ~/.m2/settings.xml
        echo "Configuration set to $1."
    else
        echo "Configuration not found: $1" >&2
        exit 2
    fi
fi 
```

# .net - 在导入/导出时具有降价功能的 GUI 控制

> ID：10627643
> 
> 赞同：3
> 
> 时间：2012-05-16T22:26:53.300
> 
> 标签：.net, python, controls, markdown, richtext

我不确定这是否是要问的正确 Stack Exchange 页面（也许程序员也适合，尽管他们反对软件技术问题）。

但是，对于应该充当内部知识数据库客户端的程序，我正在研究来自不同框架的富文本控件/小部件。此富文本控件应显示 HTML 的子集。仅支持 h1-h6、b、i、img（是否嵌入）、列表和简单表格。文本作为降价代码保存在数据模型中。

现在我需要一个控件来显示这个带有在线编辑的标记（就像文本处理器一样），并且可以再次将内容保存为降价。客户端可以用 Python（使用 PyQt 或 wxPython）或使用 WinForms 的 C# 编写。我已经在这些框架中测试了富文本控件，但它们并不适合。WinForms 的 RichEditBox 输出奇怪的 RTF，其他的则输出一些可怕的 HTML 格式。现在我想扩展现有控件，使其在每一秒内将内容保存为降价。

对于上述目标平台，是否有任何好的开源控件/小部件可以作为一个良好的开端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:49:29.693

看看[Pandoc](http://johnmacfarlane.net/pandoc/)，它*与*reStructuredText、Markdown、HTML 和 LaTeX（以及其他格式）相互转换。这里有一个在线编辑器演示了 Pandoc 的[使用](http://johnmacfarlane.net/pandoc/try)。该网页的来源似乎很简单，所以也许您可以尝试编写类似的代码。然而，Pandoc 是用 Haskell 编写的。Python 等效[项 Docutils](http://docutils.sourceforge.net/)只能从 reStructuredText（不是 Markdown）转换为 HTML 和其他格式，反之则不行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:39:00.907

您的要求似乎有点像一个边缘案例，因为降价是专门为人类轻松编写而设计的，用于处理成其他格式。你反其道而行之，还是...

我不知道保存到 Markdown 的任何 WYSIWYG 控件，所以你可能不得不自己动手。您可以做的是将现有控件子类化并实现获取控件内容并生成 Markdown 的持久性机制。这会很棘手，因为大多数富文本或 HTML 编辑器将支持比 Markdown 更多的功能。您应该能够实现控件的输入功能，以将它们限制为 Markdown 中支持的子集。可能有一些 Python 项目有助于解析。[Pyth](http://pypi.python.org/pypi/pyth/)看起来很小，但可能很有用。

有很多 Markdown to Format X 转换器，但我知道的唯一工具是 PHP 中 的 ( [Markdownify )。](http://milianw.de/projects/markdownify/)

# html - 用于打开文件、获取 URL 并进行 HTML 清理的 Perl 脚本

> ID：10627644
> 
> 赞同：-1
> 
> 时间：2012-05-16T22:27:03.177
> 
> 标签：html, perl

我是 Perl 新手，通常是编程新手。我在这里面临一些真正的问题。我需要一个可以打开文本文件、读取一系列 URL、获取页面内容、进行 HTML 清理以及将内容保存到另一个文件的 Perl 脚本。

非常感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:30:36.957

请参阅以下现实生活示例，一种简单的方法是：

要读取的文件：

```
$ cat /tmp/list.txt
http://stackoverflow.com/questions/10627644/perl-script-to-open-file-get-url-and-make-html-cleaning
http://google.com 
```

Perl 代码，我使用基本的 LWP::UserAgent “浏览器”

```
#!/usr/bin/env perl

use strict;
use warnings;

require LWP::UserAgent;

open FH, "<", "/tmp/list.txt";

my $ua = LWP::UserAgent->new;

$ua->timeout(10);

foreach my $line (<FH>) {
    my $response = $ua->get($line);

    if ($response->is_success) {
        # you need another file handle here to write to a new file
        print $response->decoded_content;
    }
    else {
        die $response->status_line;
    }
}

close FH; 
```

这是一个很好的基础，你还有更多的工作来完成你的所有需求： - 使用另一个文件句柄来编写一个新文件 - 清理 HTML

**编辑**：真的不知道“清理”怎么样：你想将页面转储为没有任何 HTML 的文本吗？如果是，请考虑：

```
#!/usr/bin/env perl

use strict;
use warnings;

while (<>) {
    `links -dump "$_" > "$1" `if m!https?://([^/]+)!;
} 
```

然后，在你的 shell 中，你可以这样调用脚本：

```
$ perl script.pl < /path/to/URLs.list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:23:30.203

会这样

*   用于`open`打开文本文件
*   用于`while (<$fh>) { ... }`从中读取
*   `chomp`每行删除换行符
*   使用[`LWP`](https://metacpan.org/module/LWP)模块读取每个 URL
*   进行 HTML 清洗
*   使用`open`和`print`写入文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:50:58.240

这是一个如何完成的示例，包括 html 清理和文件保存

```
#!/usr/bin/perl
use LWP::Simple;
use HTML::Clean;
open FILE, "</path/to/file/urls.txt" or die $!;
while(<FILE>){
    chomp $_;$url=$_;
    my $content=get($url);

    my $h = new HTML::Clean(\$content);
    $h->compat();
    $h->strip();
    my $data = $h->data();

    $url=~s/(http:\/\/)(.+\..+)(\/*)/$2/g;

    open NF, ">>/path/to/file/$url.html";
    binmode(NF, ":utf8");
    print NF $$data;
    close NF;
}
close FILE; 
```

这会将“http://url.com/something”保存为“url.com.html”

# scala - 如何将此代码更改为scala中的函数式编程？

> ID：10627645
> 
> 赞同：1
> 
> 时间：2012-05-16T22:27:03.437
> 
> 标签：scala, functional-programming

我是函数式编程的新手，并且正在阅读这本书。它基本上说，如果您的代码包含“var”，则意味着您仍在以命令式的方式进行操作。我不确定如何将我的代码更改为功能性方式。请建议。

所以基本上这段代码的作用是处理文本一些文本并使用正则表达式从“taggedText”中提取特定文本并将其添加到列表中并将列表转换为 json。

```
 val text = params("text")
    val pattern = """(\w+)/ORGANIZATION""".r

    var list = List[String]()
    val taggedText = processText(text)
    pattern.findAllIn(taggedText).matchData foreach {
      m => list ::= m.group(1)
    }

    pretty(render(list)) // render to json 

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T22:34:42.407

尝试将中间部分替换为

```
val list = pattern.findAllIn(taggedText).matchData.map(m => m.group(1)).toList 
```

你可以随心所欲`m => m.group(1)`地写`_.group(1)`。

# svg - 沿 svg 路径以特定百分比放置对象？

> ID：10627647
> 
> 赞同：0
> 
> 时间：2012-05-16T22:27:17.433
> 
> 标签：svg, batik

目前我正在使用该`<animateMotion>`元素非常快速地将对象（由路径定义）设置为正确的结束位置。这在 Chrome 中显示正常，我没有努力让它与 Batik 一起使用。

但我很好奇：没有动画有没有更好的方法来做到这一点？只是沿着 a 的长度绘制它（比如 80%）`<path>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:24:45.407

如果您正在创建静态 svg 图像，那么您应该提前知道放置对象的确切位置。例如，您可以使用[`transform`](http://www.w3.org/TR/SVG11/coords.html#TransformAttribute)属性将对象放置在您想要的位置。

如果您在事先不知道要放置对象的位置的情况下这样做，那么您可以使用 javascript，[getPointAtLength](http://www.w3.org/TR/SVG11/paths.html#__svg__SVGPathElement__getPointAtLength)方法将为您在给定长度偏移处的路径上提供一个点。[您可以通过调用getTotalLength](http://www.w3.org/TR/SVG11/paths.html#__svg__SVGPathElement__getTotalLength)来查询计算的路径总长度。

# php - 谷歌地图 Ajax 新标记

> ID：10627648
> 
> 赞同：0
> 
> 时间：2012-05-16T22:27:21.490
> 
> 标签：php, javascript, jquery, ajax, google-maps

我有一个谷歌 api3 地图。在空闲时，我计算地图可见区域的半径，执行 ajax 请求并从 xml 文档中检索可见区域中的所有标记。

然后我解析 xml，清除当前地图标记并用新标记替换它们。

这有效，有两个警告。1) 重新加载时所有标记都会闪烁。和 2) 这会导致我下载并重新加载标记，即使用户没有将地图移动到足够远以使它们离开屏幕。换句话说，我正在重新加载屏幕上已经存在的标记。

仅在地图的可见区域中拉出标记并且尚未出现在屏幕上的最佳方法是什么？

我要去表演，因为我有大量的标记。

测试网址：[http](http://whosopennow.com/maintenance/test.php#) ://whosopennow.com/maintenance/test.php# （泛到华盛顿特区）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:42:08.207

假设地图边界不包括国际日期变更线或地图换行（您可能必须将最小缩放设置为 4 左右），我将使用以下步骤`map.getBounds()`（未测试）：

1.  始终存储现有的可见边界。我会打电话`lastViewable`的。
2.  当检测到可见边界已更改时，执行 Ajax 调用。
3.  对于 XML 中的每个标记，如果它在 outside `lastViewable`，则将其添加到屏幕上。这些是新的标记。
4.  现在，假设地图被拖动了。现在需要移除可视区域之外的标记。
5.  设置`lastViewable`为当前边界
6.  删除这些`lastViewable`界限之外的所有标记。

# c# - 如何替换文件中的2个双引号

> ID：10627650
> 
> 赞同：1
> 
> 时间：2012-05-16T22:27:44.063
> 
> 标签：c#

我有 2 个双引号需要用一个双引号替换。

我正在使用这种方法：

```
private static void ReplaceTextInFile(string originalFile, string outputFile, string searchTerm, string replaceTerm)
{
    string tempLineValue;
    using (FileStream inputStream = File.OpenRead(originalFile))
    {
        using (StreamReader inputReader = new StreamReader(inputStream))
        {
            using (StreamWriter outputWriter = File.AppendText(outputFile))
            {
                while (null != (tempLineValue = inputReader.ReadLine()))
                {
                    outputWriter.WriteLine(tempLineValue.Replace(searchTerm, replaceTerm));
                }
            }
        }
    }
} 
```

并这样称呼它

```
ReplaceTextInFile(file, file + "new", (char)34 + (char)34, (char)34); 
```

我得到的错误是

```
Error   4   Argument '3': cannot convert from 'int' to 'string' 

and  Error  5   Argument '4': cannot convert from 'char' to 'string' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:29:59.043

`(char)34+(char)34`是一个`int`，值为 68。
该函数需要一个字符串。

我会通过`"\"\""`
*（用反斜杠转义每个双引号）*

```
ReplaceTextInFile(file, file + "new", "\"\"", "\""); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T22:30:21.223

我会用`ReplaceTextInFile(file, file + "new", "\"\"", "\"");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T22:30:20.387

您使用`Int32`( `char + char`== `int`) 和 a调用此方法`Char`，而不是两个`string`值。为什么不直接使用？：

```
ReplaceTextInFile(file, file + "new", "\"\"", "\""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T22:29:52.853

该函数需要四个`string`s。您传递两个`string`s，然后传递一个`int`，然后传递一个`char`。

添加两个`char`s 导致`int`. 你不能连接字符，因为 a`char`代表一个*单独*的字符是没有意义的，所以结果是`int`.

`char`最后一个是直接投射到`string`预期的位置，这似乎很明显。

# filter - 带有 docIds 的 Lucene 过滤器

> ID：10627655
> 
> 赞同：0
> 
> 时间：2012-05-16T22:28:06.120
> 
> 标签：filter, lucene

我正在尝试执行以下操作：我想通过分别查询每个字段然后将前 k 个匹配项添加到该集合来创建一组候选人。完成之后，我需要在这个候选集上运行另一个查询。我现在实现它的方式是使用 QueryWrapperFilter 和 BooleanQuery 匹配每个候选文档的唯一 id 字段。但是，这意味着我必须先为每个候选文档调用 IndexSearcher.doc().get("docId")，然后才能将其添加到我的 BooleanQuery，这是主要的瓶颈。我只通过 MapFieldSelector("docId) 加载 docId 字段。

我想创建自己的过滤器类，但我不能直接使用内部 Lucene 文档 ID，因为它们是按段指定的。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:21:30.800

而不是读取存储的 docId，索引字段（它可能已经是）并使用[FieldCache](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/FieldCache.html)更快地检索 docId。然后，不要在 BooleanQuery 中使用 docId，而是尝试使用[TermsFilter](http://lucene.apache.org/core/3_6_0/api/contrib-queries/org/apache/lucene/search/TermsFilter.html)或[FieldCacheTermsFilter](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/FieldCacheTermsFilter.html)。后面的文档描述了性能权衡。

# java - 让java启动更快

> ID：10627657
> 
> 赞同：2
> 
> 时间：2012-05-16T22:28:09.763
> 
> 标签：java

有什么方法可以让 Java 的启动时间合理（不明显），从而使其适合编写命令行脚本（不是长期存在的应用程序）？

* * *

要演示该问题，请在我的 Macbook Pro 上使用 Java 和 JavaScript（使用 node.js 运行）编写一个简单的 Hello World 程序：

```
$ time java T
Hello world!

real    0m0.352s
user    0m0.301s
sys 0m0.053s

$ time node T.js
Hello world!

real    0m0.098s
user    0m0.079s
sys 0m0.013s 
```

Java 版本有明显的滞后，而 Node.js 则不然。这使得命令行工具看起来没有响应。（与上面的简单不同，如果它们依赖于多个类，则尤其如此`T.java`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:31:09.730

不太可能，您可以尝试的唯一方法是 JVM 的不同实现，但这可能不会改变。大多数 Java 应用程序（相对）寿命较长，并且可能是交互式的，这意味着 JVM 启动时间会在正常使用的噪音中丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:51:55.930

正如其他人所说，简单的答案只是“不是真的”。您可能会做出微小的性能改进，但您永远无法摆脱虚拟机需要一段时间才能启动和运行的事实。

确保您没有为此类应用程序选择服务器 VM - 这是真正会增加启动时间的一件事。

唯一真正的方法是将 Java 编译为本机代码，您*可以*使用 GCJ 来完成 - 因此，如果您必须用 Java 编写这些应用程序并且必须更快地拥有它们，那么这可能是一条向下看的路线。请记住，虽然它不是最新的，并且它的维护在很大程度上似乎也正在消亡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T19:53:56.130

还没有尝试过，但可能值得一看 nailgun。它将在同一个 JVM 中运行您的 Java 程序，因此在“热身”之后应该非常快。“hello world”示例从 0.132s 到 0.004s

[http://www.martiansoftware.com/nailgun/background.html](http://www.martiansoftware.com/nailgun/background.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T22:37:02.390

但是，您实际上是否尝试过对反复调用的 Java 命令行应用程序进行计时？我希望在文件系统缓存中的库类第一次化身之后，启动时间会有所缓解。

也就是说，是的，Java 平台并不是最简单的平台之一，而且无论如何您都不会与小型本机可执行文件竞争。

编辑：正如您所说，上述时间是针对“热身”呼叫的，那么可能的解决方法可能是：

*   用 Java 编写命令的 gubbins
*   编写一个简单的本地持续运行“服务器”，接收命令并将它们传递给相关的 Java 例程
*   编写一个简单的本机命令行包装器（或将其编写成可以快速启动的东西），其唯一存在的理由是将命令传递到 Java 服务器并输出结果。

这不是很好，但它可以让您在 Java 中编写例程的 gubbins（我认为这基本上是您想要的），同时仍然保持命令行调用模型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-01T10:38:48.527

您可以通过类数据共享获得小幅加速[https://rmannibucau.metawerx.net/post/java-class-data-sharing-docker-startup](https://rmannibucau.metawerx.net/post/java-class-data-sharing-docker-startup)

使用 GraalVM native-image 对静态二进制文件进行提前编译应该会带来更大的加速，尽管使用起来仍然很棘手。许多库尚未兼容。

# asp.net - 是否有一个好的 ASP.NET 包来实现 StackExchange 风格的身份验证和配置文件

> ID：10627665
> 
> 赞同：2
> 
> 时间：2012-05-16T22:28:55.433
> 
> 标签：asp.net, oauth-2.0, openid, dotnetopenauth

我熟悉 ASP.NET Membership、Profile、forms auth 等，以及 OpenId/OAuth。但是，我还没有找到一个很好的资源来整合一个真正智能的、现代的、支持 OpenId 的登录和配置文件系统，类似于 StackExchange 所做的。是否有添加类似 StackExchange 的身份验证和配置文件的包或模板？理想情况下，我正在寻找具有以下功能：

*   NuGet 安装到现有 MVC 项目或 MVC 的入门模板
*   允许使用 OpenId、FaceBook、Twitter 或具有干净 UI 的站点内进行身份验证
*   允许将 FaceBook 和 Twitter OAuth 与可能使用也可能不使用 OpenId 的现有帐户相关联。
*   允许合并和修改多种身份验证方法，类似于 StackOverlow 使用多种方法登录时所做的方式。

DotNetOpenAuth 很接近，但仍然依赖开发人员来处理更复杂的合并登录和将 OAuth 令牌与用户关联的情况。现在似乎会有一个很好的基础模板或包，可以相当快地为您提供完整的现代身份验证故事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:32:08.180

也许[StackId](http://code.google.com/p/stackid/source/checkout)可能有用。它由 StackExchange 团队构建在 DotNetOpenAuth 之上。[您可以在StackExcnage 开源项目列表中](https://blog.stackoverflow.com/2012/02/stack-exchange-open-source-projects/)找到它的描述。但它没有 Nuget 包。

# c# - 替换文件中一行的第一个和最后一个字符的最佳方法

> ID：10627666
> 
> 赞同：0
> 
> 时间：2012-05-16T22:29:00.303
> 
> 标签：c#

我有一个看起来像这样的文件：

```
"sdfkhsdf,sdfgsg,sdfsdf,sdsdf"
"sdfsdf,"43534",sdfsdf,24234,sfddsf"
"efsdf,234234,sdfsdf,234234,sadfsdf" 
```

我需要删除文件中每一行的第一个和最后一个字符（我需要删除第一个双引号和最后一个双引号）。请注意，数据中可能包含引号，但绝对不需要第一个和最后一个引号。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T22:34:04.343

如果您没有以下行，请使用[string.Trim ：](http://msdn.microsoft.com/en-us/library/d4tt83f9)`""sdfsdf", 43534,sdfsdf,24234,"sfddsf""`

```
line.Trim('"'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T22:32:48.087

如果它真的只是第一个和最后一个字符，我会做类似的事情：

```
 using (var text = System.IO.File.ReadAllLines(filename))
    {
        using (var outfile = System.IO.File.CreateText(newfilename))
        {
            foreach (var line in text)
            {
                if (line.Length > 2)
                    outfile.WriteLine(line.Substring(1, line.Length - 2));
                else
                    outfile.WriteLine(line);
            }
            outfile.Flush();
        }
    } 
```

是的，在这种情况下 Trim(...) 更好。

# java - JSF 2/Facelets：如何有效地使用 facelets 来统一编辑子类类型的实例

> ID：10627668
> 
> 赞同：0
> 
> 时间：2012-05-16T22:29:18.183
> 
> 标签：java, jsf-2, facelets

假设为了讨论，我有以下经典层次结构：

```
abstract class Vehicle {
  private int cost; 
  // imagine the usual getters and setters here
}

class Car extends Vehicle {
  private String make, model, year; 
  // getters and setters
}

class Plane extends Vehicle {
  private int yearIntroduced;
  // getter and setter
} 
```

现在假设在我的支持 bean 中有一个 Vehicle 实例列表`bb.vehicles`。如何支持统一编辑？我不知道如何避免这种代码：

```
<ui:repeat value="#{bb.vehicles}" var="vehicle">
  <!-- this is where the trouble begins -->
  <app:editCar      car="#{vehicle}"  rendered="#{test vehicle to see if it is a car}"/>
  <app:editPlane  plane="#{vehicle}"  rendered="#{test vehicle to see if it is a plane}"/>
</ui:repeat> 
```

这似乎是对正确 OO 设计的侮辱，这似乎表明车辆本身应该以某种方式参与正确视图的选择，而不是视图检查它并自行决定。我在我的代码中的很多地方都看到了这种模式，其中我有一个半异构集合或一个对象上的一个属性，该对象必须是一个类或其子类之一的实例，我需要一个特殊的编辑器来公开什么使子类不同。好像有异味，想问问有没有更好的办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:43:03.693

通常，您的支持 bean 中可能应该有一些东西来包装车辆，并提供一个 xhtml 文件以包含以编辑该特定车辆类型（或者如果您愿意，也可以使用约定）。这样，您的 jsf 文件中就没有任何特定内容。只需使用 ui:include 并调用车辆支持 bean 上的属性。

# c# - 使用 FileSystem.DeleteDirectory 将多个目录发送到回收站

> ID：10627670
> 
> 赞同：1
> 
> 时间：2012-05-16T22:29:25.143
> 
> 标签：c#, file-io

制作一个具有大量功能的文件浏览器，回来微调我的一些方法来找到它：

```
foreach (ListViewItem item in listView1.SelectedItems)
{
    FileSystem.DeleteDirectory(item.SubItems[3].Text,  
        UIOption.AllDialogs,
        RecycleOption.SendToRecycleBin,
        UICancelOption.ThrowException);
} 
```

这非常适合将单个目录或文件发送到回收站，但它会提示每个选定的项目。不适合删除一堆文件和文件夹。

有什么方法可以在没有过多提示的情况下实现这一目标？还是我必须深入研究 SHFILEOPSTRUCT？

感谢您的帮助，到目前为止，我 90% 的问题已经在这里得到解答，这是有史以来最好的网站。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:32:37.873

如果您不想要提示，可以使用[Directory.Delete](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx)代替`FileSystem`方法。这将删除目录、文件和子目录（前提是您指定要这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:13:13.443

这似乎是做你需要的唯一方法
将文件和目录移动**到回收站而不提示**

```
using System.Runtime.InteropServices;

class Win32ApiUtils
{
    // Don't declare a value for the Pack size. If you omit it, the correct value is used when  
    // marshaling and a single SHFILEOPSTRUCT can be used for both 32-bit and 64-bit operation.
    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public struct SHFILEOPSTRUCT
    {
        public IntPtr hwnd;
        [MarshalAs(UnmanagedType.U4)]
        public int wFunc;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pFrom;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pTo;            
        public ushort fFlags;
        [MarshalAs(UnmanagedType.Bool)]
        public bool fAnyOperationsAborted;
        public IntPtr hNameMappings;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string lpszProgressTitle;
   }

   [DllImport("shell32.dll", CharSet = CharSet.Auto)]
   static extern int SHFileOperation(ref SHFILEOPSTRUCT FileOp);
   const int FO_DELETE = 3;
   const int FOF_ALLOWUNDO = 0x40;
   const int FOF_NOCONFIRMATION = 0x10; //Don't prompt the user.; 

   public static int DeleteFilesToRecycleBin(string filename)
   {
        SHFILEOPSTRUCT shf = new SHFILEOPSTRUCT();
        shf.wFunc = FO_DELETE;
        shf.fFlags = FOF_ALLOWUNDO | FOF_NOCONFIRMATION;
        shf.pFrom = filename + "\0";  // <--- this "\0" is critical !!!!!
        int result = SHFileOperation(ref shf);
        // Any value different from zero is an error to lookup 
        return result;

   } 
```

}

```
 foreach (ListViewItem item in listView1.SelectedItems)
   {
        int result = Win32ApiUtils.DeleteFilesToRecycleBin(item.SubItems[3].Text);
        if(result != 0) ...... // ??? throw ??? message to user and contine ???
   } 
```

**-- 警告 --** 此代码需要测试。我在[PInvoke 站点](http://www.pinvoke.net/default.aspx/Structures/SHFILEOPSTRUCT.html)上找到了 SHFILEOPSTRUCT 的布局，并且在该链接上，有一些关于所用字符串声明的注释。

出色地。在我的 Win7 64 位上进行了测试，需要删除一个目录。奇迹般有效....

# php - Ajax post vars 在 PHP 脚本中看不到

> ID：10627672
> 
> 赞同：1
> 
> 时间：2012-05-16T22:29:36.070
> 
> 标签：php, ajax, post

我正在尝试启动对 php 脚本的 ajax post 调用，它将更新我数据库中的一些值。

我遇到的问题是，在我的 php 脚本中没有看到 POST 值，或者至少我没有响应。

这是我的javascript：

```
<script type="text/javascript">
$("btnOpsb" ).onclick = pinOpsb;
function pinOpsb(){
var params = "wxdata = test";
var ajaxRequest;
try{ajaxRequest = new XMLHttpRequest();} catch (e){try{ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");} catch (e) {try{ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");} catch (e){alert("Error: Browser/Settings conflict");return false;}}}
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            alert(ajaxRequest.responseText);
        }
    }
    ajaxRequest.open("POST","wx2strip.php",true);
    ajaxRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    ajaxRequest.send("fname=Henry&lname=Ford");
}
</script> 
```

在我的 wx2strip.php 中，如果 $_POST 中有任何内容，我尝试回显某些内容，但即使我只是在脚本顶部回显某些内容并退出，我创建的警报中仍然没有响应。

我尝试使用 get，但确实得到了回复。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:45:15.790

添加这两行以设置正确的标题：

```
ajaxRequest.setRequestHeader("Content-length", "fname=Henry&lname=Ford".length);
ajaxRequest.setRequestHeader("Connection", "close"); 
```

POST 需要内容长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:06:24.587

我怀疑[Aerik](https://stackoverflow.com/a/10628221/259014)对您遇到问题的原因的回答是正确的。

也就是说，由于您已经在 javascript 中使用了 jQuery，我相信如果您考虑使用[jQuery 的`$.post()`](http://api.jquery.com/jQuery.post/). 它会为你处理所有这些类型的并发症，所以如果有任何其他类似的小问题，你不会遇到问题。

# mysql - 从不同的安装访问 mysql 数据库

> ID：10627674
> 
> 赞同：0
> 
> 时间：2012-05-16T22:29:47.267
> 
> 标签：mysql, ubuntu, mysqldump

我有一个运行 mysql 的旧 Ubuntu 服务器安装的硬盘驱动器，该驱动器有坏扇区并且无法再访问。幸运的是，我能够在这个驱动器死之前创建它的快照，现在我可以将它作为第二个硬盘驱动器安装在我的新 Ubuntu 安装中，它仍然包含所有文件、二进制文件和所有内容。

所以这是我的问题，我真的需要从那个快照中转储那个 mysql 数据库。是否有可能以某种方式登录到快照的驱动器 mysql 并转储它？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:43:57.350

看起来这篇文章可能是你的答案：

[http://www.techrepublic.com/article/backing-up-and-restoreing-mysql-databases/5259660](http://www.techrepublic.com/article/backing-up-and-restoring-mysql-databases/5259660)

> 查找并复制 mysql 的 data/ 目录的内容。

快速浏览一下我的 Ubuntu 服务器，虽然我无法立即找到 data/ 目录，但我的所有数据库和数据文件都在 /var/lib/mysql 中，所以也要检查那里。

在终端中以 root / admin 用户身份运行以下命令将为您提供开始查找的位置列表

```
find / -name "mysql" 
```

# php - 如何将 /1.php 更改为 index.php?id=1

> ID：10627676
> 
> 赞同：1
> 
> 时间：2012-05-16T22:29:55.723
> 
> 标签：php

```
if (file_exists($filename)) {
echo "<a class='next' href='$filename'><img  src='images/next.png'</a>";
} 
else {
echo "<img src='images/next-dis.png'/>";
} 
```

* * *

好吧，我正在尝试这样做，我将拥有大量页面，例如 1.php 2.php 3.php .... 但我希望它们看起来像这样“index.php?id=1”而不是 /1.php , /2.php 并希望阻止尝试直接访问（例如）2.php 的用户.. 任何人都可以帮忙吗？.. 有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:37:09.643

`.htaccess`Apache文件中的以下重写规则应该可以解决问题。

```
RewriteEngine On
RewriteRule (\d+)\.php /index.php?id=$1 
```

这基本上匹配格式中的任何 URL，`[0-9]+.php`并将其重定向到`/index.php?id=###`### 匹配 ###.php 的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:36:42.903

搜索 .htaccess 重写规则。您将找到类似场景的示例。[请参阅 - http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)中的实用解决方案部分

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T22:32:57.810

在你的 index.php 里面你可以这样做

```
include($_GET["id"]".php"); 
```

这将加载任何 id 是 get var，但是任何人都可以更改此变量并访问他们在此处输入的任何内容。

# asp.net - 从中继器导出到 excel

> ID：10627687
> 
> 赞同：0
> 
> 时间：2012-05-16T22:31:22.163
> 
> 标签：asp.net, repeater

我已经能够填充中继器，但我遇到的唯一问题是将其导出到 Excel 工作表。excel 文件中没有显示数据。我在想的是，当我单击导出按钮时，由于一些回发，中继器上的数据被删除或其他原因。这是代码：

```
 Response.Clear();
        Response.Buffer = true;

        Response.AddHeader("content-disposition",
         "attachment;filename=GridViewExport.xls");
        Response.Charset = "";
        Response.ContentType = "application/vnd.ms-excel";
        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        Table tb = new Table();
        TableRow tr1 = new TableRow();
        TableCell cell1 = new TableCell();
        cell1.Controls.Add(Repeater1);
        tr1.Cells.Add(cell1);
        tb.Rows.Add(tr1);
        tb.RenderControl(hw);

        //style to format numbers to string
        string style = @"<style> .textmode { mso-number-format:\@; } </style>";
        Response.Write(style);
        Response.Output.Write(sw.ToString());
        Response.Flush();
        Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:33:08.960

对于以 Excel 格式导出数据，我建议使用[EPPlus](http://epplus.codeplex.com/)库而不是编写字符串。

> EPPlus 是一个 .net 库，它使用 Open Office Xml 格式 (xlsx) 读取和写入 Excel 2007/2010 文件。 
> 
> EPPlus 支持：单元格范围、单元格样式（边框、颜色、填充、字体、数字、对齐方式）、图表、图片、形状、注释、表格、保护、加密、数据透视表、数据验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:32:06.847

我认为“Repeater1”和“tb”表必须附加到 Page（Page.Controls.Add(tb)）。尝试：

*   将控件渲染到字符串 var render=RenderControlToString(tb);
*   然后清除响应 Response.Clear();
*   然后写入渲染字符串 Response.Write(rendered);

    ```
    public static string RenderControlToString(Control c)
    {
        StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        HtmlTextWriter htmlWriter = new HtmlTextWriter(sw);
        c.RenderControl(htmlWriter);
        sw.Close();
        htmlWriter.Close();
        return sb.ToString();

    } 
    ```

# php - 在“IPTC”图像中写入一组值

> ID：10627688
> 
> 赞同：0
> 
> 时间：2012-05-16T22:31:34.753
> 
> 标签：php, jpeg, exif, iptc

我正在做一个类来处理“IPTC”图像，并且需要将一些值写入数组，如下例所示；

```
[2#020] => Array //SUPPLEMENTAL_CATEGORY
    (
        [0] => SPORT
        [1] => REAL MADRID
    )

[2#025] => Array //KEYWORDS
    (
        [0] => value 1
        [1] => value 2
        [2] => value 3
    ) 
```

希望的实现示例；

```
$iptc = new Iptc('some_image.jpg');
$iptc->set('KEYWORDS', array(
    'value 1',
    'value 2',
    'value 3'
)); 
```

谁能帮我这个？

注意：我正在使用“iptcembed”在图像中写入元标记。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:56:49.960

我什至设法解决了这个问题，我将在这里分享我是如何做到的；

```
$val = array('keyword1', 'keyword2', 'keyword3');
$rec  = 2;
$tag = 025;

if (is_array($val)) {
    $source = '';
    foreach($val as $item) {
        $len = strlen($item);
        $source .= chr(0x1c).chr($rec).chr($tag);
        $source .= chr($len >> 8).
                   chr($len & 0xff).
                   $item;
    }
    return $source;
} 
```

结果

```
Array
(
    [0] => keyword1
    [1] => keyword2
    [2] => keyword3
) 
```

拥抱！

# matlab - 如何创建任意大小列表的列表

> ID：10627694
> 
> 赞同：0
> 
> 时间：2012-05-16T22:32:26.767
> 
> 标签：matlab

我正在尝试创建一个包含 3 个列表的容器，其中每个列表都是任意大小的列表的任意大小的列表。这是我将要做什么的思路（在 Matlab 中不是很有经验，所以可能有一种更优雅的方式来做这件事）

```
my_data = [[] [] []];

for m = 1 : M
   list1 = [];
   list2 = [];
   list3 = [];

   for n = 1 : N
      if something holds
         list1 = [list1 ftn(n)];
         list2 = [list2 ftn2(n)];
         list3 = [list3 ftn3(n)];
      end
   end

   if something else holds
      my_data(1) = [my_data(1) list1];
      my_data(2) = [my_data(2) list2];
      my_data(3) = [my_data(3) list3];
   end
end 
```

虽然这段代码实际上并没有运行......我如何在 Matlab 中做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:35:18.847

这就是[元胞数组](http://www.mathworks.com/help/techdoc/matlab_prog/br04bw6-117.html)的用途。Matlab 不允许你做非矩形规则数组（正如你所发现的），但单元格数组允许你做一般对象的数组，包括标准数组。

```
my_data = {{} {} {}};

for m = 1 : M
    list1 = [];
    list2 = [];
    list3 = [];
    for n = 1 : N
        if something
            list1 = [list1 something];
            list2 = [list2 something];
            list3 = [list3 something];
         end
    end

    if something
        my_data{1}{end+1} = list1;
        my_data{2}{end+1} = list2;
        my_data{3}{end+1} = list3;
    end
end 
```

# android - 用户主页的 ADT 插件问题

> ID：10627698
> 
> 赞同：2
> 
> 时间：2012-05-16T22:32:37.680
> 
> 标签：android, eclipse, adt

模拟器启动时出现错误。我知道 ADT 插件和用户主页存在一个已知问题，但我认为我的问题有点不同。

当我尝试启动模拟器时，出现此错误：

```
PANIC: Could not open AVD config file: C:\Users\AdriÃ¡n\.android\avd\sda.avd/config.ini 
```

如您所见，用户名从 Adrián（在 ADT 中配置）更改为 Adrián，系统无法识别。我试图设置 ANDROID_SDK_HOME 和 user.home 变量，但它不起作用。

我想问题是我的用户名中的口音。有任何想法吗？问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T11:09:13.200

好吧，我找到了解决方法：

问题是，如果您的用户名包含拉丁文、西里尔文或其他非英文字符，它将失败。

我解决它的步骤是：

1.  将目录“[emulator_name].avd”复制到路径中不包含特殊符号的某个位置（我将文件放在“D:\Emulators[emulator_name].avd 中）。
2.  在您的第一个目录中打开文件 [emulator_name].ini（在我的情况下为 C:\Users\AdriÃ¡n.android\avd）
3.  将“path=C:\Users\Adrián.android\avd[emulator_name].avd”更改为“path=D:\Emulators[emulator_name].avd”
4.  保存、关闭并重新启动您的模拟器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T15:32:31.290

正如 Nucklear 所说，问题在于字符编码：我的解决方案：

使用文本编辑器（例如 PSPad）打开模拟器 ini 文件，并将默认 UTF-8 编码更改为您所在国家/地区的默认代码，其中包含非英文字母（在我的情况下为 ISO-8859-2）。也许在更改之后，您需要重写导致问题的那些字符。

ini 文件位于 ...Users\UserName.android\avd 目录中，其名称类似于您之前使用 AVD 管理器创建的模拟器。

（对不起，我的英语不好。）

# mongodb - 两个数据中心，连接中断，都继续写入，连接返回，同步？

> ID：10627702
> 
> 赞同：4
> 
> 时间：2012-05-16T22:33:05.783
> 
> 标签：mongodb, database-replication, sharding, database

我们有两个数据中心，并且正在从两个数据中心向 Mongo 写入数据。集合是分片的，我们在数据中心 A 中有一个分片的主分片，而数据中心 B 中的另一个分片的主分片。有时，**数据中心之间的连接会失败。**

**我们希望能够继续在 BOTH DATACENTERS 中写作**。我们正在编写的数据不会冲突——它们都只是添加文档，或者更新不会在两个地方更新的文档。

然后，当连接恢复时（有时是几秒钟，甚至几分钟），我们希望数据库能够很好地应对这种情况并自动更新所有数据。

有人可以建议这是否可能吗？当您将副本集划分为两个独立的数据库时，文档中并没有太多说明会发生什么，然后让两者都成为主数据库，直到您重新连接它们。怎么了？我该如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:26:31.417

我不明白为什么这不会像您已经设置的方式那样工作，假设您的辅助服务器与您的主服务器位于同一个数据中心。

换句话说，如果分片 A 的主节点和辅助节点位于数据中心 A 中，而分片 B 的主节点和次节点位于数据中心 B 中，那么您已经在两个数据中心中写入。

如果您现在失去两个数据中心之间的连接，那么来自数据中心 A 的客户端将无法读取或写入分片 B，数据中心 B 中的客户端将无法写入分片 A，但两个数据中心客户端将继续写入与它们位于同一数据中心的分片。

所以，这很简单——将大部分副本集保持在同一个数据中心，只要该数据中心启动，您就会继续写入该分片。

我有一种感觉，尽管您希望来自断开连接的数据中心的客户会以某种神奇的方式将他们对另一个数据中心的分片的写入存储在某个地方——这不可能发生——他们看不到另一个数据中心。因此，当连接恢复时，数据库无需处理任何事情（除了在断开连接阶段有一堆写入失败的事实）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:46:21.223

不可能“划分副本集”以在同一集中拥有两个主节点。

所以你有两个副本集，它们使用 mongos 作为路由器在一个键上分片。一种解决方案是，如果分片键的第一部分设置为以“A”或“B”开头，这意味着如果新记录以 A 开头，它将被路由到第一个集合，如果是 B，它被路由到第二个集合放。这是您可以控制 mongos 尝试将数据放置在何处的唯一方法。

只要您的新条目没有与损坏的副本集匹配的分片键，mongos 和不同副本集之间的连接问题就无关紧要。

例如，您可以让数据中心 A 中写入数据的 mongo 客户端始终使用 A 启动分片键。这意味着如果数据中心 B 关闭，则仅创建带有 A 的记录。

只要两个分片都启动，两个中心上的客户端就可以访问来自两个分片的读取。

Mongos 应该在每个客户端附近运行，因此您将在两个位置都有这些，每个位置都可以访问分片配置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:14:44.357

除非看到至少一半的节点，否则副本集节点不能成为主节点。这意味着如果没有指向主要所在数据中心的链接，则无法写入该分片。

我可以看到如何为此实施本土解决方案。但这需要一些努力。

您可能还想查看 CouchDB。它也是无模式和基于 JSON 的，它可以很好地处理你的情况（它基本上是为这样的情况而构建的）。

# jquery - d3.json、d3.xhr 和跨域问题

> ID：10627703
> 
> 赞同：11
> 
> 时间：2012-05-16T22:33:07.160
> 
> 标签：jquery, json, mime-types, d3.js, cors

我今天做了几个与我们可以使用 d3 加载 json 文件的方式有关的测试，因为我对这个问题很感兴趣：[d3.json works but $.getJson failed](https://stackoverflow.com/questions/10622414/d3-json-works-but-getjson-fails)。然而，我做的一些测试有点棘手。

```
d3.xhr("http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=select+*+where+%7B%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2FRoger_Federer%3E+%3Fp+%3Fo+filter%28lang%28%3Fo%29+%3D+%27en%27%29%7D%0D%0A&debug=on&timeout=&format=application%2Fsparql-results%2Bjson&save=display&fname=", function(data)
console.log("success1"); 
alert(data);
});

d3.json("http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=select+*+where+%7B%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2FRoger_Federer%3E+%3Fp+%3Fo+filter%28lang%28%3Fo%29+%3D+%27en%27%29%7D%0D%0A&debug=on&timeout=&format=application%2Fsparql-results%2Bjson&save=display&fname=", function(data){              console.log("success2");
alert(data);
});

d3.xhr("http://api.worldbank.org/countries/BRA/indicators/BX.KLT.DINV.CD.WD?per_page=10&date=2007:2012&format=json", function(data){
console.log("success3");
alert(data);
})

d3.json("http://api.worldbank.org/countries/BRA/indicators/BX.KLT.DINV.CD.WD?per_page=10&date=2007:2012&format=json", function(data){
console.log("success4");
alert(data);
}) 
```

我知道问题可能与至少 2 个原因有关：MIME 类型和 CORS，但我无法理解其他几件事：

1.  如果始终执行回调（有时甚至很难使用 OK 200，这也可能是从 jQuery 的 .ajax() 和 .getJSON() 方法看到的错误）为什么我只能在一种情况下看到数据（第一种情况） - 其余的情况总是错误？

2.  d3.xhr 方法支持哪些 MIME 类型？

3.  如果 d3.json 只是 d3.xhr 的一个很好的包装器，为什么示例 1 有效而示例 2 无效......？我想澄清一下。我主要将 d3 与来自我的服务器的文件一起使用，但在某些情况下，我还必须使用一些外部数据，而且使用 D3 也能很好地做到这一点，而不仅仅是使用 jQuery。

我认为应该有一个列表，其中包含这些方法接受的所有 MIME 类型。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T22:30:42.587

第一个请求成功而第二个请求失败的原因与 dbpedia.org 服务器的配置有关。该`d3.json()`函数做了两件事：

1.  它将`Accept`标头设置为 mimetype`application/json`

2.  它使用解析响应`JSON.parse()`

数字 1 是问题 - dbpedia.org 服务器正在返回对标头的`406 (Unacceptable)`响应`Accept: application/json`。我不确定为什么这是真的，但是鉴于您发送的 URL 参数，它看起来像服务器期望的`application/sparql-results+json`那样 - 实际上，指定这个 mime 类型`d3.xhr()`成功，而使用`application/json`失败。

使用世界银行数据，请求失败，因为服务器未[启用 CORS](http://enable-cors.org/)。在不启用 CORS 的情况下调用远程 API 的唯一浏览器内方法是使用 JSONP（假设 API 支持它）。碰巧， data.worldbank.com[确实支持 JSONP](http://data.worldbank.org/node/11)，但 D3 不支持 - 您需要自己处理它或使用像 jQuery 这样的第三方库来发出请求。

一般来说，D3 并没有像 jQuery 和其他库那样优先考虑真正强大的 AJAX 支持，因为这不是它的重点——所以如果你想加载各种各样的外部资源，你可能应该使用 3rd-party 库对经过仔细调整的 AJAX 调用有更多支持。根据您要加载的内容，另一种选择是在您自己的服务器上设置一个代理，该代理可以调用​​远程 API，然后通过本地 HTTP 调用将数据返回给您的可视化 - 在这种情况下，所有 D3 的加载器都应该工作正常。

# c - 以非 root 用户身份调用外部 shell 脚本失败

> ID：10627708
> 
> 赞同：2
> 
> 时间：2012-05-16T22:33:56.290
> 
> 标签：c, linux, shell, permissions

我希望 A 用户作为 B 用户做一些工作。如果 B 是 root 就可以，但非 root 用户失败。以下是基本代码：

根.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
    setuid( 0 );
    system( "/tmp/script_of_root.sh" );

    return 0;
} 
```

script_of_root.sh：

```
#!/bin/sh
echo $RANDOM >> /tmp/file_of_root 
```

**播放**：

```
$ cd /tmp
$ cc root.c -o root
$ su -
# chown root.root /tmp/root
# chmod 4755 /tmp/root
# exit
$ ./root 
```

执行“./root”后，文件“/tmp/file_of_root”将被更新。但是，如果我将相同的东西应用于非 root 用户，它就不起作用。代码：

foob​​ar.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
    setuid( 1001 );    // uid of user "foobar"
    system( "/tmp/script_of_foobar.sh" );

    return 0;
} 
```

script_of_foobar.sh：

```
#!/bin/sh
echo $RANDOM >> /tmp/file_of_foobar 
```

**播放**：

```
$ cd /tmp
$ cc foobar.c -o foobar
$ su -
# chown foobar.users /tmp/foobar
# chmod 4755 /tmp/foobar
# exit
$ ./foobar 
```

如果我以其他普通用户（而不是“foobar”本身）的身份运行“./foobar”，这将是错误的：

```
/tmp/script_of_foobar.sh: line 2: file_of_foobar: Permission denied 
```

我完全糊涂了。为什么第二种情况不起作用？

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:09:46.417

foob​​ar.c 中的 setuid 调用只有在您是 root 或您的有效 UID 为 1001 时才会成功。

所以。如果您不是 root，setuid(1001) 将失败，并且您将没有必要的权限来覆盖“foobar”拥有的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:14:30.050

从输出看来，您的非 root 用户能够执行 script_of_foobar.sh，但无法写入 /tmp/file_of_foobar。/tmp 上的权限是否可能关闭？我相信它应该设置为1777。

# google-app-engine - Struts2 访问静态方法 (GAE/J)

> ID：10627710
> 
> 赞同：1
> 
> 时间：2012-05-16T22:34:03.763
> 
> 标签：google-app-engine, struts2

我已经在 struts.xml 中设置了

```
<constant name="struts.ognl.allowStaticMethodAccess" value="true"/> 
```

在我的 jsp 中，我尝试将 GAE 密钥转换为字符串

```
<s:iterator var="itr" value="list" status="stat">
    <s:property value="@com.google.appengine.api.datastore.KeyFactory@keyToString(key)"/>
</s:iterator> 
```

迭代器和关键工作。但是当尝试将键转换为字符串时，它不会显示任何内容。我必须在我的jsp中导入一些东西吗？我是否正确访问该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:05:40.493

在您的 bean 中创建一个新的 getKeyStr()：

```
public String getKeyStr() {
    return KeyFactory.keyToString(key);
} 
```

并在您的 jsp 中访问它：

```
 <s:select key="userConfig.categories"
                            list="categories" 
                            listValue="getText(name)"
                            listKey="%{keyStr}" 
                            value="%{config.categories.{keyStr}}"
                            name="config.categories.key"
                            multiple="true"
                            size="%{categories.size()}"
                            required="true"
                            /> 
```

# java - Spring JMS - 定时器上的排水主题

> ID：10627712
> 
> 赞同：2
> 
> 时间：2012-05-16T22:34:07.393
> 
> 标签：java, spring, jms, activemq

我对 Spring JMS 还很陌生，我在 Spring 站点和其他地方找到了很多文档和示例，但我的用例似乎没有在任何地方描述，或者至少以我能理解的方式描述。我希望你能提供帮助。

我想创建一个主题的发布者和该主题的几个持久订阅者。我现在正在处理第一个订阅者，它打算每小时运行一次（在计时器上）并耗尽消息的主题并一次处理它们（即发送一封总结所有消息的电子邮件）。

我不知道如何在 Spring 中配置此设置，尽管我觉得这应该很容易。建议将非常有帮助。

我的计划是让计时器调用“processBatch”方法，该方法将在循环中调用receiveAndConvert()，直到超时，建立它的消息列表。

但是，这似乎不起作用，因为消费者并没有真正订阅该主题。当然不是在它运行之前，也可能不是之后。

如何使用 Spring 和/或直接 ActiveMQ 进行配置？

我不确定我在哪里结束了我的 XML 是否是本次讨论的有用起点，但我会提供它以防万一：

```
<beans>
    <!-- some unrelated beans -->

    <!-- my Active MQ connection factory -->
    <bean id="mqConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory" destroy-method="stop">
        <property name="connectionFactory">
            <bean class="org.apache.activemq.ActiveMQConnectionFactory">
                <property name="brokerURL" value="vm://broker"/>
            </bean>
        </property>
    </bean>

    <!-- my topic -->
    <amq:topic id="completionsTopic" physicalName="completions.topic"/>

    <!-- my subscriber -->
    <bean id="emailer" class="com.j128.Emailer">
        <property name="jmsTemplate">
            <bean class="org.springframework.jms.core.JmsTemplate">
                <property name="connectionFactory" ref="mqConnectionFactory"/>
                <property name="defaultDestination" ref="completionsTopic"/>
                <property name="receiveTimeout" value="2000"/>
            </bean>
        </property>
    </bean>

    <!-- my scheduler and periodic call to the topic drainer -->
    <task:scheduler id="taskScheduler" pool-size="10"/>
    <task:scheduled-tasks>
        <!-- send emails hourly -->
        <task:scheduled ref="emailer" method="processBatch" cron="0 * * * *"/>
    </task:scheduled-tasks>

</beans> 
```

但我确定我从根本上采取了错误的策略，并且有一种简单的方法来配置它。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T19:40:14.387

查看[how-does-a-queue-compare-to-a-topic](http://activemq.apache.org/how-does-a-queue-compare-to-a-topic.html)：“只有在代理收到消息时具有活动订阅的订阅者才能获得消息的副本。”

对于一个持久主题[how-do-durable-queues-and-topics-work](http://activemq.apache.org/how-do-durable-queues-and-topics-work.html)：“持久主题是不同的，因为它们必须在逻辑上为每个持久消费者保留每个合适消息的实例 - 因为每个持久消费者都有自己的副本讯息”

因此，对于非持久主题，您的计划将不起作用，因为每小时作业不会收到任何消息，因为在发布消息时它没有运行。如果您设置了一个持久主题，那么它可能会起作用，但这取决于当您说您的订阅者将“耗尽消息主题”时您期望发生的事情。它所能做的就是读取自上次运行以来发布给它的消息，它不会影响发送给其他订阅者的消息。

有关持久订阅者的讨论（我没有在 ActiveMQ 上使用它们），请参阅[此](https://stackoverflow.com/questions/11319830/how-to-create-preconfigure-durable-subscribers-in-activemq-xml-so-that-these-s)

# mpi - 带有 SysV 共享内存的异步 MPI

> ID：10627715
> 
> 赞同：5
> 
> 时间：2012-05-16T22:34:28.350
> 
> 标签：mpi, shared-memory, fortran90

我们有一个大型的 Fortran/MPI 代码库，它利用节点上的 system-V 共享内存段。我们在具有 32 个处理器的胖节点上运行，但只有 2 或 4 个 NIC，每个 CPU 的内存相对较少；所以我们的想法是我们建立一个共享内存段，每个 CPU 在其上执行其计算（在其 SMP 数组的块中）。然后 MPI 用于处理节点间通信，但仅在 SMP 组中的主节点上。该过程是双缓冲的，对我们来说效果很好。

当我们决定切换到异步通信以隐藏一些延迟时，问题就出现了。由于节点上只有几个 CPU 通过 MPI 进行通信，但所有 CPU 都看到接收到的数组（通过共享内存），所以 CPU 不知道通信 CPU 何时完成，除非我们制定某种屏障，并且那为什么要异步通信呢？

理想的假设解决方案是将请求标签放在 SMP 段中，并在需要知道的 CPU 上运行 mpi_request_get_status。当然，请求标签只注册在通信CPU上，所以不起作用！另一个建议的可能性是在通信线程上分支一个线程并使用它在循环中运行 mpi_request_get_status，在共享内存段中使用标志参数，以便所有其他图像都可以看到。不幸的是，这也不是一个选择，因为我们被限制不使用线程库。

我们提出的唯一可行的选择似乎可行，但感觉就像一个肮脏的黑客。我们在接收缓冲区的上限地址中放置了一个不可能的值，这样一旦 mpi_irecv 完成，该值就会改变，因此每个 CPU 都知道何时可以安全地使用缓冲区。那样可以么？似乎只有在 MPI 实现可以保证连续传输数据的情况下，它才能可靠地工作。这听起来几乎令人信服，因为我们已经用 Fortran 编写了这个东西，所以我们的数组是连续的；我想访问也将是。

有什么想法吗？

谢谢，乔利

这是我正在做的那种事情的伪代码模板。家里没有代码作为参考，所以我希望我没有忘记任何重要的东西，但我会确保当我回到办公室时......

```
pseudo(array_arg1(:,:), array_arg2(:,:)...)

  integer,      parameter : num_buffers=2
  Complex64bit, smp       : buffer(:,:,num_buffers)
  integer                 : prev_node, next_node
  integer                 : send_tag(num_buffers), recv_tag(num_buffers)
  integer                 : current, next
  integer                 : num_nodes

  boolean                 : do_comms
  boolean,      smp       : safe(num_buffers)
  boolean,      smp       : calc_complete(num_cores_on_node,num_buffers)

  allocate_arrays(...)

  work_out_neighbours(prev_node,next_node)

  am_i_a_slave(do_comms)

  setup_ipc(buffer,...)

  setup_ipc(safe,...)

  setup_ipc(calc_complete,...)

  current = 1
  next = mod(current,num_buffers)+1

  safe=true

  calc_complete=false

  work_out_num_nodes_in_ring(num_nodes)

  do i=1,num_nodes

    if(do_comms)
      check_all_tags_and_set_safe_flags(send_tag, recv_tag, safe) # just in case anything else has finished.
      check_tags_and_wait_if_need_be(current, send_tag, recv_tag)
      safe(current)=true
    else
      wait_until_true(safe(current))
    end if

    calc_complete(my_rank,current)=false
    calc_complete(my_rank,current)=calculate_stuff(array_arg1,array_arg2..., buffer(current), bounds_on_process)
    if(not calc_complete(my_rank,current)) error("fail!")

    if(do_comms)
      check_all_tags_and_set_safe(send_tag, recv_tag, safe)

      check_tags_and_wait_if_need_be(next, send_tag, recv_tag)
      recv(prev_node, buffer(next), recv_tag(next))
      safe(next)=false

      wait_until_true(all(calc_complete(:,current)))
      check_tags_and_wait_if_need_be(current, send_tag, recv_tag)
      send(next_node, buffer(current), send_tag(current))
      safe(current)=false
    end if

    work_out_new_bounds()

    current=next
    next=mod(next,num_buffers)+1

  end do
end pseudo 
```

因此，理想情况下，我希望在通信进程的另一个线程中的循环中运行“check_all_tags_and_set_safe_flags”，或者更好：取消“安全标志”并使发送/接收的句柄在从站上可用，然后我可以在计算从站之前运行：“check_tags_and_wait_if_need_be(current, send_tag, recv_tag)”(mpi_wait)，而不是“wait_until_true(safe(current))”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:27:48.523

*“......除非我们制定某种障碍，否则为什么要进行异步通信？”*

这句话有点乱。异步通信的目的是重叠通信和计算；希望您可以在通信进行时完成一些真正的工作。但这意味着您现在有两个任务发生，最终*必须*同步，因此**必须有**一些东西在第一个通信阶段结束时阻止任务，然后再进入第二个计算阶段（或其他）。

在这种情况下如何做才能很好地实现事物的问题（看起来你现在所拥有的东西有效，但你正确地担心结果的脆弱性）取决于你如何进行实现。你使用线程这个词，但是（a）你使用的是 sysv 共享内存段，如果你有线程，你就不需要这样做，并且（b）你被限制不使用线程库，所以大概你实际上意味着你在 MPI_Init() 或其他东西之后 fork()ing 进程？

我同意 Hristo 的观点，您最好的选择几乎肯定是使用 OpenMP 进行节点上的计算分布，并且可能会大大简化您的代码。了解更多关于不使用线程库的约束会有所帮助。

除了 MPI 之外，另一种仍然可以避免您必须“滚动自己的”基于进程的通信层的方法是让节点上的*所有*进程都是 MPI 进程，但创建一些通信器 - 一个来做全局通信，每个节点一个“本地”通信器。每个节点只有几个进程会成为实际进行节点外通信的通信器的一部分，而其他进程则在共享内存段上工作。然后，您可以使用基于 MPI 的同步方法（等待或屏障）进行节点同步。即将推出的 MPI3 实际上将明确支持以这种方式使用本地共享内存段。

最后，如果您绝对有约束力并决心通过本质上是您自己的仅限本地节点的 IPC 实现来继续做事——因为您已经在使用 SysV 共享内存段，那么您不妨使用[SysV 信号量](http://www.cs.cf.ac.uk/Dave/C/node27.html)来做同步。当数据准备好进行计算时，您已经在使用自己的（有些微妙的）类似信号量的机制来“标记”；在这里，您可以使用更健壮的、已编写的信号量来让非 MPI 进程知道数据何时准备好进行计算（以及让 MPI 进程知道其他进程何时完成计算的类似机制）。

# android - 异常 NullPointerException

> ID：10627722
> 
> 赞同：0
> 
> 时间：2012-05-16T22:35:13.737
> 
> 标签：android, nullpointerexception

我的 Android 应用程序上有一个非常奇怪的 NullPointerException。这是导致问题的一段代码：

```
private void setPreferences() {

        SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        ReceptionBuffer = new byte[64];     // Buffer de recepcion general de 64 bytes

        // Protocolo para cada canal (I2C, UART, SPI)
        byte[] temp = new byte[4];
        // Canal para el clock de cada canal (en caso de usar protocolos con clock como I2C,SPI)
        byte[] temp2 = new byte[4];

        for(int n=0; n < 4; ++n){
            temp[n] = Byte.decode(getPrefs.getString("protocol" + n, "0"));
            temp2[n] = Byte.decode(getPrefs.getString("channel" + n + "SCL", "0"));
        }
        for(int n=0; n < 4; ++n){
            if(DEBUG) Log.i(TAG, "LogicAnalizerView -> setPreferences() - n: " + n);
            switch(temp[n]){
            case 0:
                channelProperties[n].setProtocol(Protocol.I2C);
                break;
            case 1:
                channelProperties[n].setProtocol(Protocol.UART);
                break;
            }
            channelProperties[n].setClockSource(temp2[n]);
        }

    } 
```

它是 LogCat：

```
05-16 22:28:11.019: I/(965): LogicAnalizerView -> setPreferences() - n: 0
05-16 22:28:11.049: D/AndroidRuntime(965): Shutting down VM
05-16 22:28:11.049: W/dalvikvm(965): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-16 22:28:11.099: I/dalvikvm(965): threadid=3: reacting to signal 3
05-16 22:28:11.332: I/dalvikvm(965): Wrote stack traces to '/data/anr/traces.txt'
05-16 22:28:11.429: E/AndroidRuntime(965): FATAL EXCEPTION: main
05-16 22:28:11.429: E/AndroidRuntime(965): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.multiwork.andres/com.multiwork.andres.LogicAnalizerView}: java.lang.NullPointerException
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.os.Looper.loop(Looper.java:137)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-16 22:28:11.429: E/AndroidRuntime(965):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 22:28:11.429: E/AndroidRuntime(965):  at java.lang.reflect.Method.invoke(Method.java:511)
05-16 22:28:11.429: E/AndroidRuntime(965):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-16 22:28:11.429: E/AndroidRuntime(965):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-16 22:28:11.429: E/AndroidRuntime(965):  at dalvik.system.NativeStart.main(Native Method)
05-16 22:28:11.429: E/AndroidRuntime(965): Caused by: java.lang.NullPointerException
05-16 22:28:11.429: E/AndroidRuntime(965):  at com.multiwork.andres.LogicAnalizerView.setPreferences(LogicAnalizerView.java:361)
05-16 22:28:11.429: E/AndroidRuntime(965):  at com.multiwork.andres.LogicAnalizerView.onCreate(LogicAnalizerView.java:93)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.Activity.performCreate(Activity.java:4465)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-16 22:28:11.429: E/AndroidRuntime(965):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-16 22:28:11.429: E/AndroidRuntime(965):  ... 11 more
05-16 22:28:11.709: I/dalvikvm(965): threadid=3: reacting to signal 3
05-16 22:28:11.931: I/dalvikvm(965): Wrote stack traces to '/data/anr/traces.txt'
05-16 22:28:12.389: I/dalvikvm(965): threadid=3: reacting to signal 3
05-16 22:28:12.459: I/dalvikvm(965): Wrote stack traces to '/data/anr/traces.txt'
05-16 22:28:13.039: I/dalvikvm(965): threadid=3: reacting to signal 3
05-16 22:28:13.230: I/dalvikvm(965): Wrote stack traces to '/data/anr/traces.txt'
05-16 22:28:17.912: I/Process(965): Sending signal. PID: 965 SIG: 9 
```

根据 LogCat 的问题在于 channelProperties[n].setProtocol(Protocol.I2C); 行。setPreferences() 是从 onCreate() 方法调用的，在此之前我有一个全局变量：

```
private static LogicChannelProperties[] channelProperties = new LogicChannelProperties[4]; 
```

很奇怪，因为我已经分配了空间。为什么我得到这个？这是我的课：

```
import com.multiwork.andres.LogicData.Protocol;

public class LogicChannelProperties {

    private Protocol mProtocol;
    private int clockSource;

    /**
     * Setea el protocolo a usar (ej: Protocol.I2C/SPI...)
     * @author Andres Torti
     * @param type es el protocolo a usar (ej: Protocol.I2C/SPI...)
     */
    public void setProtocol (Protocol type){
        mProtocol = type;
    }

    /**
     * Obtiene el protocolo
     * @author Andres Torti
     * @return variable tipo Protocol (ej: Protocol.I2C/SPI...)
     */
    public Protocol getProtocol (){
        return mProtocol;
    }

    /**
     * Setea el canal que actua como fuente de clock
     * @author Andres Torti
     * @param sourceChannel es el numero del canal >0
     */
    public void setClockSource (int sourceChannel){
        clockSource = sourceChannel;
    }

    /**
     * Obtiene el canal que actua como fuente de clock
     * @author Andres Torti
     * @return int, numero del canal
     */
    public int getClockSource (){
        return clockSource;
    }

} 
```

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:43:47.033

该异常只是意味着它无法启动 Activity，因为它在创建期间抛出了异常。实际问题是`NullPointerException`发生在第 361 行的`LogicAnalizerView.java`.

我猜这`channelProperties[]`是未正确初始化的数组，因为看起来您正在创建数组但没有用任何东西填充它。

所以你需要像`channelProperties[0] = new ChannelProperties();`//etc 之类的东西。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:53:32.960

您的行“static LogicChannelProperties[] channelProperties = new LogicChannelProperties[4]”分配了一个由 4 个对象组成的数组，但它本身并不创建对象。请注意，该语句中没有构造函数调用——只是一个数组分配。

您必须遍历数组以创建单个对象实例，例如，

```
channelProperties[0] = new LogicChannelProperties(); 
```

# javascript - 视图未渲染，区域与布局

> ID：10627724
> 
> 赞同：0
> 
> 时间：2012-05-16T22:35:17.847
> 
> 标签：javascript, backbone.js, coffeescript, marionette

即使在阅读了 wiki 和关于何时使用布局与区域等的示例之后，我仍然有点困惑，但我的问题是我无法在页面上显示任何内容 - 根本没有任何渲染。html应该真的只有菜单和内容，内容可以根据Views改变。（我以同样的方式制作菜单，所以我也可以交换它）。

我有一个 html 文件：

```
<!-- DefaultLayout -->
<script type="text/template" id="template-default">
   <div id="region-navbar">
     region-navbar
   </div>
   <div id="region-content">
      region-content
   </div>
</script>

<!-- NavBar -->
<script type="text/template" id="template-navbar">
   <div id="navbar">
      my freakin navbar
   </div>
</script>

<!-- ViewOne -->
<script type="text/template" id="template-view1">
   <div id="view1">
      my freakin view
   </div>
</script>

<!-- RegionContainer -->
<div id="default-layout-container">
</div> 
```

对于这个例子，我已经将 js 压缩成一个文件，**app.coffee**：

```
window.App = { }

# Region
class RegionContainer extends Backbone.Marionette.Region
  el: '#default-layout-container'   
  # Called on the region when the view has been rendered
  onShow: (view) ->
    console.log 'onShow RegionContainer'

App.RegionContainer = RegionContainer

# Layout
class DefaultLayout extends Backbone.Marionette.Layout
  template: '#template-default'  
  regions:
    navbarRegion: '#region-navbar'
    contentRegion: '#region-content'

App.DefaultLayout = DefaultLayout

# NavBar (View)
class NavBar extends Backbone.View
  el: '#template-navbar'    
  initialize: () ->
    console.log 'init App.NavBar'

App.NavBar = NavBar

# A View
class ViewOne extends Backbone.View
  el: '#template-view1'  
  initialize: () ->
    console.log 'init App.ViewOne'

App.ViewOne = ViewOne

# App
$ ->

  # Create application, allow for global access
  MyApp = new Backbone.Marionette.Application()
  App.MyApp = MyApp

  # On application init...
  MyApp.addInitializer (data) ->
    console.log 'init App.MyApp'

  # RegionContainer
  regionContainer = new App.RegionContainer

  # Layout (holds Views)
  defaultLayout = new App.DefaultLayout
  regionContainer.show defaultLayout

  # Views
  navBarView = new App.NavBar
  navBarView.render()

  viewOne = new App.ViewOne
  viewOne.render()

  defaultLayout.navbarRegion.show navBarView
  defaultLayout.contentRegion.show viewOne

  data = 
    that: 'this'

  MyApp.start data 
```

console.log 显示：

```
onShow RegionContainer app.js:19
init App.NavBar app.js:44
init App.ViewOne 
init App.MyApp 
```

我已经阅读了文档/示例一百万次，但是所有这些东西的学习曲线都很复杂。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:58:21.190

你混淆了一些事情，但你几乎在那里

*   `ViewOne`并且`NavBar`不应该延长`Backbone.View`但是`Backbone.Marionette.ItemView`

*   您不应该在属性中定义模板，而`ViewOne`应顾名思义，在属性中定义模板。`NavBar``el``template`

# wpf - UI 线程与 BackGroundWorker 线程

> ID：10627726
> 
> 赞同：1
> 
> 时间：2012-05-16T22:35:19.587
> 
> 标签：wpf, backgroundworker, dispatcher

我正在阅读一本 WPF 书，我看到了这段代码：

```
 private void bgw1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        int percenti;
        percenti = e.ProgressPercentage;
        progressBar1.Value = percenti;
    } 
```

问题很简单。如果

ProgressBar 属于 UI 线程，BackGroundWorker 与后台线程一起工作

为什么没有错误（例如：调用线程无法访问此对象，因为不同的线程拥有它。）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:40:39.457

> 为什么没有错误（例如：调用线程无法访问此对象，因为不同的线程拥有它。）？

这是使用`BackgroundWorker`. BackgroundWorker 组件自动将进度和完成调用编组回启动作业的同步上下文（线程）。

在这种情况下，这意味着`ProgressChanged`（和完成事件）的事件处理程序发生在 WPF UI 线程上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:37:33.073

为`BackgroundWorker`您处理线程上下文切换。该事件`BackgroundWorker.ProgressChanged`将在 UI-Thread 上引发，因此您的回调`bgw1_ProgressChanged`将在 UI-Thread 的上下文中调用。

这是`BackgroundWorker`存在的主要目的：与 UI 一起使异步工作变得简单直接。

`BackgroundWorker`自 .NET 1.0 以来就存在。现在我们生活在 2012 年，我们拥有[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类和[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，并且很快将 c#`async`关键字作为所有异步的通用手段，这使得这种`BackgroundWorker`类型过时或至少是老派。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-02T02:36:39.853

这是因为您无法更改后台工作人员的 Do_work 方法。progress_changed 事件不断更新另一个线程中发生的事情。

通过此链接清除您的概念--> [ [https://www.codeproject.com/Articles/99143/BackgroundWorker-Class-Sample-for-Beginners][1]](https://www.codeproject.com/Articles/99143/BackgroundWorker-Class-Sample-for-Beginners][1])

# jquery - 通过 Colorbox 回调传递变量

> ID：10627732
> 
> 赞同：0
> 
> 时间：2012-05-16T22:36:07.530
> 
> 标签：jquery, colorbox

我有一系列在地图上按顺序触发的工具提示。当用户单击地图区域时，会弹出一个颜色框，其中包含有关该位置的信息。

我想获取打开颜色框时处于活动状态的工具提示的 div ID 并将其存储为变量。然后关闭时，我想使用该变量重新激活工具提示。我似乎无法找到将变量从一个调用传回下一个调用的方法。这是我的代码：

```
$(".city").colorbox({
    inline:true, 
    width:"390px", 
    opacity: .2,

    onOpen: function(){var selected = $('.qtip').attr('id');},
    onClosed: function(){$(selected).qtip();}
    }); 
```

这甚至可能吗？我尝试只使用 alert(selected) 并且它似乎没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:35:46.763

恕我直言，您应该避免使用变量作为通信机制。一个更好的模式是发布/订阅，其中在颜色框弹出“内”发生的事件中发布一个由具有自己的范围和内部的函数使用的事件。JS/JQuery 项目有很多 pub/subs。一个简单的例子是 Ben Alman 的 Tiny Pub/Sub。 [https://gist.github.com/661855](https://gist.github.com/661855 "得到它")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:43:43.960

**假设**打开`click`颜色框是在具有 qTip 插件的同一元素上完成的，并且元素类是`.city`：

**查询**

```
$(".city").bind("click", function() {

  // store the jQuery object of the clicked element
  var $obj = $(this);

  // hide the tooltip
  $obj.qtip("hide");

  // call the colorbox
  $obj.colorbox({
    inline   : true, 
    width    : "390px", 
    opacity  : .2,
    onClosed : function(){
      // call the tooltip
      $obj.qtip("show");
    }
  });

}); 
```

沿着这条线的东西应该可以解决你的问题。

# solaris - solaris 11 中的 ./config 错误

> ID：10627734
> 
> 赞同：2
> 
> 时间：2012-05-16T22:36:23.950
> 
> 标签：solaris, bind, configure

好的，我正在尝试在 solaris 11 上安装 BIND。

使用 wget 下载 tar 文件后，我将其提取出来。

之后，当我输入命令时：

```
./configure 
```

我面临以下错误

```
checking <<some stuff>>
..
..
..
checking <<some stuff>>
checking whether we are cross compiling... configure: error: in '/home/user/user/downloads/bind9.8.2
configure: error: cannot run C compiled programs.
If you meant to cross compile, use '--host'. 
```

所以我在我的选项中使用了--host，但我无法让它工作，例如，我输入了以下命令：

```
 ./configure --host=ulinux-uclibc 
```

我收到一条错误消息

```
 checking host system type... Invalid configuration 'ulinux-uclibc': machine 'ulinux' not recognized 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T12:10:19.227

为什么不直接从您配置的 Solaris 发布者安装绑定包？

```
# pkg install network/dns/bind service/network/dns/bind 
```

应该能得到你所需要的。`pkg.oracle.com/solaris/release`如果您使用发布者，那将为您提供 ISC Bind v9.6.3 。

# linux - 检查 Linux 内核模块是否正在运行

> ID：10627738
> 
> 赞同：3
> 
> 时间：2012-05-16T22:36:46.243
> 
> 标签：linux, kernel, kernel-module

我编写了一个内核模块，它在 /proc/ 中创建一个条目并执行一些其他任务。我想修改现有的内核模块以检查我的模块是否正在运行并根据它执行一些语句（或者在它没有运行的情况下执行其他语句）

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:43:11.437

`kernel/module.c`提供一个可能会满足您需要的功能；您首先需要锁定`module_mutex`，然后`find_module()`使用您的模块名称调用。结果将是一个指向`struct module`描述命名模块的指针——或者`NULL`如果模块没有加载：

```
/* Search for module by name: must hold module_mutex. */
struct module *find_module(const char *name)
{
        struct module *mod;

        list_for_each_entry(mod, &modules, list) {
                if (strcmp(mod->name, name) == 0) 
                        return mod;
        }
        return NULL;
}
EXPORT_SYMBOL_GPL(find_module); 
```

# php - 在 PHP 中读取 .txt 文件

> ID：10627742
> 
> 赞同：-3
> 
> 时间：2012-05-16T22:37:04.287
> 
> 标签：php

我有一个 txt 文件设置如下：

我目前使用 file() 从中读取栅栏
canter1 边缘 ，我想做的是使用数据（例如 canter1）输出存储在数组中的预定义 div
。

所以我得到了 $data 中的 canter1 并想要输出

```
echo $div[$data]; 
```

虽然我知道它们存在，但我得到一个未定义的索引错误，因为我可以去

```
echo $div['fence']; 
```

一切都很好。它唯一没有给我错误的是文本文件中的最后一行。在这个例子中，'edger' 是有效的。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:01:06.503

而不是仅仅使用`file()`use `file($file, FILE_IGNORE_NEW_LINES)`。

# nservicebus - NServiceBus：需要用代码为我的网关配置通道

> ID：10627745
> 
> 赞同：1
> 
> 时间：2012-05-16T22:37:17.563
> 
> 标签：nservicebus

我正在构建 NServiceBus 网关处理程序，我需要避免配置文件，以便在 c# 类中定义所有配置。因此，我必须将以下部分转换为 c# 代码

```
<GatewayConfig>
    <Channels>
       <Channel Address="http://localhost:25899/SiteB/" ChannelType="Http" Default="true"/>
    </Channels>
 </GatewayConfig> 
```

我在 NServiceBus.Config 命名空间中找到了 GatewayConfig、ChannelCollection 和 ChannelConfig，但我无法将它们链接在一起，因为 GatewayConfig 指的是 ChannelCollection，但 ChannelCollection 与 ChannelConfig 无关。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T22:06:55.823

只需创建一个实现 GatewayConfig 的 IProvideConfiguration 的类。这为您提供了一种提供自己的配置的方法。查看 pubsub 示例以获取有关如何执行此操作的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:43:55.793

好吧，当我安装 Reflector 并研究实现时，我已经找到了方法。有一个 ChannelCollection.CreateNewElement() 方法返回 System.Configuration.ConfigurationElement。NServiceBus 覆盖了在其中实例化 ChannelConfig 的方法，所以我所要做的就是将 ConfigurationElement 类型转换为 ChannelConfig 类型，这与直观界面相去甚远。看起来这个 NServiceBus.Config.ChannelCollection 是一项未完成的工作，因为如果您查看其他集合，如 NServiceBus.Config.MessageEndpointMappingCollection，您会发现所有必要的类型安全方法来处理其子元素 NServiceBus.Config.MessageEndpointMapping，所以我认为 NServiceBus 团队只是懒得为 ChannelCollection 做同样的事情。

更新：由于 CreateNewElement() 方法受到保护，我必须实现我自己的从 ChannelCollection 继承的类，以使添加新 ChannelConfig 元素的方法公开可用

# java - “编程接口”的最佳实践是否适用于局部变量？

> ID：10627750
> 
> 赞同：8
> 
> 时间：2012-05-16T22:37:52.653
> 
> 标签：java, generics, collections, interface

有人告诉我，对局部变量的接口进行编程是无用的，不应该这样做，因为它只会损害性能并且没有任何好处。

```
public void foo() {
    ArrayList<Integer> numbers = new ArrayList<Integer>();
    // do list-y stuff with numbers
} 
```

代替

```
public void foo() {
    List<Integer> numbers = new ArrayList<Integer>();
    // do list-y stuff with numbers
} 
```

我觉得性能影响可以忽略不计，但不可否认，使用 ArrayList 的 List 语义并没有什么好处。是否有充分的理由采取一种方式或另一种方式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T22:41:17.093

以这个类为例：

```
public class Tmp {
    public static void main(String[] args) {
        ArrayList<Integer> numbers = new ArrayList<Integer>();
        numbers.add(1);
    }
} 
```

它编译成这样：

```
Compiled from "Tmp.java"
public class Tmp extends java.lang.Object{
public Tmp();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   new #2; //class java/util/ArrayList
   3:   dup
   4:   invokespecial   #3; //Method java/util/ArrayList."<init>":()V
   7:   astore_1
   8:   aload_1
   9:   iconst_1
   10:  invokestatic    #4; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   13:  invokevirtual   #5; //Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
   16:  pop
   17:  return

} 
```

虽然这门课：

```
public class Tmp {
    public static void main(String[] args) {
        List<Integer> numbers = new ArrayList<Integer>();
        numbers.add(1);
    }
} 
```

编译成这样：

```
Compiled from "Tmp.java"
public class Tmp extends java.lang.Object{
public Tmp();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   new #2; //class java/util/ArrayList
   3:   dup
   4:   invokespecial   #3; //Method java/util/ArrayList."<init>":()V
   7:   astore_1
   8:   aload_1
   9:   iconst_1
   10:  invokestatic    #4; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   13:  invokeinterface #5,  2; //InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
   18:  pop
   19:  return

} 
```

您会看到唯一的区别是第一个（使用 an `ArrayList`）调用`invokevirtual`和另一个（使用`List`uses）`invokeinterface`。 `invokeinterface`实际上比头发慢`invokevirtual`（根据[这个家伙](http://bobah.net/d4d/source-code/misc/invokevirtual-vs-invokeinterface-performance-benchmark)的说法约为 38% ）。这[显然是](https://stackoverflow.com/a/1505476/836738)由于 JVM 在搜索具体类的虚拟方法表而不是接口的方法表时可以进行的优化。所以你说的其实是真的。接口调用*比*具体类调用慢。

但是，您必须考虑我们正在谈论的速度。对于 100,000,000 次调用，实际差异为 0.03 秒。因此，您必须进行*大量*调用才能真正显着降低速度。

~~另一方面，正如@ChinBoon 指出的那样，对接口进行编码使使用您的代码的人变得更加容易，特别是如果您的代码返回某种 sort `List`。因此，在*绝大多数*情况下，编码的便利性*远远*超过了相对的性能开销。~~

* * *

^(在阅读@MattQuigley 的评论并考虑开车回家后添加)

这一切意味着这不是你应该过分担心的事情。任何性能增益或损失都可能*非常*小。

请记住，将接口用于返回类型和方法参数是一个非常好的主意。这使您和任何使用您的代码的人都可以使用`List`最适合他们需要的任何实现。我的示例还表明，如果您碰巧使用了一个在`List`99% 的情况下返回的方法，那么您*最好*将其强制转换为具体的类来提高性能。施放所需的时间可能会超过性能上的收益。

话虽如此，这个例子还表明，对于*局部*变量，使用具体类而不是接口确实更好。如果您使用的唯一方法是方法 on `List`，那么您可以切换出没有副作用的实现类。另外，如果需要，您将可以访问特定于实现的方法。此外，还有轻微的性能提升。

***tl;博士***

始终使用接口作为方法的返回类型和参数。对局部变量使用具体类是个好主意。如果您使用的唯一方法是在接口上，它会带来较小的性能提升，并且切换实现不会产生任何成本。最后，你不应该太担心它。（除了返回类型和参数。这很重要。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T22:40:08.490

> *“编程接口”的最佳实践是否适用于局部变量？*

尽管此类变量的范围小于成员变量的范围，但针对成员变量进行接口编码[的大部分](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface) [好处](https://stackoverflow.com/questions/4456424/what-do-programmers-mean-when-they-say-code-against-an-interface-not-an-objec)也适用于局部变量。

除非您*需要*ArrayList 特定的方法，否则请使用 List。

> *我觉得性能影响可以忽略不计，但不可否认，使用 ArrayList 的 List 语义并没有什么好处*

~~我从未听说过调用接口方法会比调用类类型上的方法慢。~~

使用`ArrayList`而不是`List`作为静态类型对我来说听起来像是过早的优化。像往常一样，在您将程序作为一个整体进行概要分析之前，优先考虑可读性和可维护性而不是优化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-16T23:44:58.893

**TLDR：**接口/抽象类上的方法调用*速度*较慢，并且在稍后的时间点更改局部变量的实现几乎没有障碍，这使得大多数参数成为有争议的问题。

这里有很多答案是盲目的说将局部变量声明为接口而不理解为什么。首先，方法调用**速度**较慢 - 大约 3 倍，正如我在测试中所记得的那样。第一个代码块中的`add`方法是第二个代码块的 3 倍。您可以通过一个简单的测试自己测试这个，该测试测量 for 循环中经过的时间。

```
List<Integer> numbers = new ArrayList<Integer>();
numbers.add(1); // slower

ArrayList<Integer> numbers = new ArrayList<Integer>();
numbers.add(1); // faster 
```

其次，问题是关于局部变量，而不是一般的接口的面向对象设计原则。公共类方法将返回接口或抽象类 (List) 而不是实现 (ArrayList) 有很好的 OO 原因。您可以在其他地方阅读有关此类原因的信息，但这个问题与此**无关**- 它与局部变量有关。99.999% 的情况下，您永远不会将该局部变量的实现从 a 更改`ArrayList`为 a `Vector`。但是，在您实际执行的 0.001% 次中，这样做没有任何障碍 - 您只需将单词*Vector*复制并粘贴到单词*ArrayList*上，就完成了。每个人似乎都认为这样的改变很难。它不是。

第三， a`LinkedList`与a 不同`ArrayList`。您选择其中一个是有原因的（访问/追加/插入/删除所需的时间）。将其声明为 an`ArrayList`是一种肯定，让您知道此局部变量用于快速随机访问。它是过早优化的论点是愚蠢的 - 一旦实例化，它就会以一种或另一种方式进行优化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T22:41:03.123

使用最抽象的类型，让您完成工作。如果你只需要`List`，那么使用它。如果您需要将类型限制为更具体的类型，请改用它。例如，在某些情况下，使用`List`会过于具体，而使用`Collection`会是首选。再举一个例子，在某些情况下，有人可能需要 a`ConcurrentMap`而不是常规。`Map`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T02:39:15.007

这是一个建议：将 List 声明为 final，但带有接口。

```
final List<Integer> numbers = new ArrayList<Integer>(); 
```

如果我不得不猜测（而且我不是 java 编译器本身的专家），但是将变量设为 final，编译器应该能够删除 invokeinterface 以支持 invokevirtual，因为它知道类型不会声明变量后更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T22:43:00.323

特别是如果该方法返回列表，如果有一天您不得不将实现更改为链表，那么对接口进行编码会有所帮助。这是一个好处，您不需要更改方法来返回链表或数组列表。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-16T22:49:49.913

是的@Matthew，使用的最佳实践要好得多

```
List<Integer> numbers = new ArrayList<Integer> 
```

因为您可以使用 ArrayList 类和 List 类的方法。我希望能帮助你。

# c++ - 在 Qt 标签中显示 IplImage

> ID：10627754
> 
> 赞同：0
> 
> 时间：2012-05-16T22:38:15.410
> 
> 标签：c++, linux, opencv, qt4

我遇到了一个在 Qt 中从 IplImage 转换为 QImages 的例程，我尝试了它并且它运行良好，之后我尝试使用 Iplframes 在标签中显示视频，它也有效，但现在我试图显示来自我的网络摄像头和我遇到了某种麻烦，因为它不显示任何内容，Opencv 2.3，Ubuntu Linux C++

```
CvCapture* capture = cvCreateFileCapture( argv[1] );
//CvCapture* capture = cvCaptureFromCAM( 0 );
while(1) { 

    frame = cvQueryFrame( capture );
    cvWaitKey(33);
    if( !frame ) break;        
    cvCvtColor(frame,frame,CV_BGR2RGB); 
    myImage = QImage((unsigned char *)frame->imageDataOrigin,frame->width,frame->height,QImage::Format_RGB888);
    myLabel.setPixmap(QPixmap::fromImage(myImage));
    myLabel.show();
    //sleep(1);
    Sleeper::msleep(33);
} 
```

我有 2 个选项，capturefromcam 或 capturefromavi，它从 avi 视频转换并完美显示转换后的帧，但是当我为我的网络摄像头捕获的帧尝试相同的事情时，它不显示任何内容，我也没有收到任何错误或类似的东西， 任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:52:29.763

从它的外观来看，`cvCaptureFromCAM()`未能在 index 找到设备`0`。但是您不知道这一点，因为您没有进行防御性编码：当它无法访问设备时`cvCaptureFromCAM()`返回：`NULL`

```
CvCapture* capture = cvCaptureFromCAM( 0 );
if (!capture)
{
    // print error
    // quit application
} 
```

尝试传递`CV_CAP_ANY`或尝试其他索引：1、2、3，如果它们都不起作用，我建议您检查[兼容性列表](http://opencv.willowgarage.com/wiki/Welcome/OS)并验证您的相机是否受 OpenCV 支持。

应同样注意`cvQueryFrame()`：

```
frame = cvQueryFrame( capture );
if (!frame)
{
    // print error
    // quit application
} 
```

# android - 标签的Android onclicklistener

> ID：10627755
> 
> 赞同：4
> 
> 时间：2012-05-16T22:38:26.573
> 
> 标签：android, tabs, onclicklistener

我现在尝试解决这个问题的时间比我承认的要长。我正在寻找为我的标签设置一个`onClicklistener`，因此即使用户在该标签上并且他们单击它，标签也会重新加载。有人可以指出我的错误，下面是我使用的代码，由堆栈溢出的示例组成，所以到目前为止谢谢！我正在使用将`getTabHost().setCurrentTab(3)`其设置为仅在选项卡 3 上运行，但我将如何获取它以便它调用用户单击的特定选项卡？

我一直以此作为参考：[选项卡上的 OnClickListener 不起作用](https://stackoverflow.com/questions/1062476/onclicklistener-on-tabs-not-working)

```
public class DamTabs extends TabActivity implements OnClickListener{
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost(); // The activity TabHost

    Intent intent = new Intent(this, Featured.class);
    tabHost.addTab(tabHost.newTabSpec("Tab 1")
            .setIndicator("Featured", res.getDrawable(R.drawable.ic_tab_main))
            .setContent(intent));

    Intent intent2 = new Intent(this, Deals.class);
    tabHost.addTab(tabHost.newTabSpec("Tab 2")
            .setIndicator("Deals", res.getDrawable(R.drawable.ic_tab_setup))
            .setContent(intent2));

    Intent intent3 = new Intent(this, Events.class);
    tabHost.addTab(tabHost.newTabSpec("Tab 3")
            .setIndicator("Events", res.getDrawable(R.drawable.ic_tab_setup))
            .setContent(intent3));

    getTabWidget().getChildAt(3).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (getTabHost().getCurrentTabTag().equals(sort)) {
                getTabHost().setCurrentTab(3);
            }
        }
    });

} //End of onCreate 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T23:41:57.733

如果我理解你的问题，我认为你应该使用`setOnTabChangedListener()`方法。像这样的东西：

```
mTabHost.setOnTabChangedListener(new OnTabChangeListener() {

        public void onTabChanged(String tabId) {
            Log.d(debugTag, "onTabChanged: tab number=" + mTabHost.getCurrentTab());

            switch (mTabHost.getCurrentTab()) {
            case 0:
                //do what you want when tab 0 is selected
                break;
            case 1:
                //do what you want when tab 1 is selected
                break;
            case 2:
                //do what you want when tab 2 is selected
                break;

            default:

                break;
            }
        }
    }); 
```

并删除`implements OnClickListener`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:51:27.880

```
getTabWidget().getChildAt(3).setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (getTabHost().getCurrentTabTag().equals(sort)) {
            Events.reloadMe()
        }
    }
}); 
```

我会在要重新加载的 Activity 中创建一个静态方法并像这样调用它。我认为这是解决它的最简单方法。您将需要 Activity 中的一些私有静态变量来使用它。并确保这些私有静态对象不为空。

# ruby - 如何允许包含字母、数字、句点、连字符和下划线的字符串？

> ID：10627756
> 
> 赞同：4
> 
> 时间：2012-05-16T22:39:11.990
> 
> 标签：ruby, regex

我正在尝试制作一个正则表达式，它允许使用大小写字母 + 数字创建字符串 - **a-zA-z0-9**以及字符：`.-_`

我如何制作这样的正则表达式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T22:49:09.530

以下正则表达式应该是您正在寻找的（下面的解释）：

```
\A[-\w.]*\z 
```

以下字符类应仅匹配您要允许的字符：

```
[-a-zA-z0-9_.] 
```

您可以将其缩短为以下内容，因为`\w`等效于`[a-zA-z0-9_]`：

```
[-\w.] 
```

请注意，要`-`在您的字符类中包含文字，它必须是第一个字符，否则它将被解释为一个范围（例如`[a-d]`等同于`[abcd]`）。另一种选择是用反斜杠转义它。

通常`.`表示除换行符以外的任何字符，您需要对其进行转义以匹配文字句点，但这在字符类中不是必需的。

`\A`和是字符串开头和结尾的`\z`锚点，否则您将匹配包含任何允许字符的字符串，而不是**仅**包含允许字符的字符串。

`*`表示零个或多个字符，如果您希望它需要一个或多个字符，请将其更改为`*`a `+`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T22:43:18.577

`/\A[\w\-\.]+\z/`

*   `\w`表示字母数字（不区分大小写）和“_”
*   `\-`表示破折号
*   `\.`指时期
*   `\A`表示开始（甚至比 更“强” `^`）
*   `\z`意味着结束（甚至比“更强” `$`）

例如：

```
>> 'a-zA-z0-9._' =~ /\A[\w\-\.]+\z/
=> 0 # this means a match 
```

**更新感谢**phrogz**[的](https://stackoverflow.com/users/405017/phrogz)改进**

# continuous-integration - 在 Jenkins 中从主作业设置下游作业的构建数量

> ID：10627760
> 
> 赞同：3
> 
> 时间：2012-05-16T22:39:39.140
> 
> 标签：continuous-integration, jenkins

我有 2 个 Jenkins 奴隶和 1 个主人（3 台机器）。例如从站 1 和从站 2。我有两个工作，并使用标签将工作绑定到奴隶。例如 Job1 绑定到 Slave1，Job2 绑定到 Slave2。两者都是自由风格的工作。我创建了一个只调用 Job1 和 Job2 的自由样式作业，因此它们同时在从属服务器上运行。我希望这两个作业始终使用相同的内部版本号构建或从上游作业继承内部版本号。有没有办法可以将内部版本号从主要作业发送到两个下游作业？我想防止 Job1 和 Job2 的内部版本号不同步，如果一个单独运行会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T22:54:22.090

[Jenkins Java API](http://javadoc.jenkins-ci.org/)中有一个方法：[Job::updateNextBuildNumber(int)](http://javadoc.jenkins-ci.org/hudson/model/Job.html#updateNextBuildNumber%28int%29)。因此您可以尝试以下操作：从系统 Groovy 脚本（可以通过[Groovy Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)运行）找到子作业对象，通过上述方法在它们上设置内部版本号；然后触发它们。

但是，您仍然可能会遇到问题。例如，如果手动触发其中一项作业，您可能无法在其上设置数字（必须增加内部版本号）。

# jquery - jQuery 更改 iFrame 的 SRC 和 ID

> ID：10627767
> 
> 赞同：0
> 
> 时间：2012-05-16T22:40:22.417
> 
> 标签：jquery, iframe, src

在我的博客上，我使用了一个脚本，将匿名消息显示为其正常用户名而不是匿名用户名。该脚本在我可以制作的页面上运行良好，但在我的主机默认生成的页面上（例如 /ask，包含我无法编辑的消息框），我无法编辑询问框的代码，因此它行不通。如果有人可以提供一个 jQuery 代码

1.  将 ID 为 #askbox 的 iFrame SRC 从“http://www.tumblr.com/ask_form/jamescharless.com”更改为“http://jamescharless.com/askbox”
2.  从 iFrame 中删除 ID，因此它根本没有 id

如果有人可以帮助我，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:43:55.090

这应该改变你的 IFrame src

```
$("#askbox").attr("src", "http://jamescharless.com/askbox"); 
```

你可以试试：

```
$("#askbox").removeAttr("id"); 
```

将两者结合起来：

```
$("#askbox").attr("src", "http://jamescharless.com/askbox").removeAttr("id"); 
```

正在尝试解决您的脚本问题...

在调试器中打开页面，您可以运行：

```
document.getElementById('wrapper'); 
```

但不是

```
document.getElementById('ask_form') - it throws an error 
```

**B计划**

注入一个新的 IFrame 怎么样？

```
$('#ask_form').parent().html('<iframe width="100%" height="149" 
    src="http://jamescharless.com/askbox" frameBorder="0" 
    scrolling="no" style="overflow: hidden; background-color: transparent;">
    </iframe>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:45:07.210

```
 $(document).ready(function(){
       $('#askbox').attr("src", "http://jamescharless.com/askbox");
       $('#askbox').removeAttr("id");
   }); 
```

# dynamic-programming - 使表达式的值最小化的括号

> ID：10627772
> 
> 赞同：3
> 
> 时间：2012-05-16T22:41:22.200
> 
> 标签：dynamic-programming

我需要找到一个括号，`E= c1 O1 c2 O2 .... On-1` `cn`其中`c(i)`是整数，`O(i)`可能是`+`or `*`，通过括号最小化可获得的值。

我知道这可能是一个非常基本的问题，但我刚刚开始学习动态编程。

我的主要问题是如何区分`O(i)`是`+`还是`*`（或者这没用？）

# workflow - sitecore 工作流权限

> ID：10627780
> 
> 赞同：5
> 
> 时间：2012-05-16T22:42:55.803
> 
> 标签：workflow, sitecore, sitecore6, sitecore-workflow

在 Sitecore 工作流程和安全参考数据表上，我看到了这些：

> **工作流状态删除**控制安全帐户（用户或角色）是否可以删除当前与特定工作流状态关联的项目
> 
> **工作流状态写入**控制安全帐户是否可以更新当前与特定工作流状态关联的项目
> 
> **工作流命令执行**控制帐户是否能够查看工作流命令

所以，我在安全编辑器上，为我的创建者和发布者角色添加权限，所以对我来说添加删除和写入权限到各个工作流状态真的很有意义，但我没有看到命令的执行列。我应该如何为角色设置这些权限？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T05:57:17.817

下图应该可以回答您的问题：

![在此处输入图像描述](../Images/827f496ef75220317a2e80d08ab31513.png)

# javascript - 隐藏的“选择”元素上的工具提示不起作用

> ID：10627782
> 
> 赞同：0
> 
> 时间：2012-05-16T22:43:08.690
> 
> 标签：javascript, jquery, jquery-ui, combobox, tooltip

我使用来自 jquery UI 的组合框开发网站，一切正常。但是当我尝试在“选择”元素上应用工具提示时，工具提示不起作用。

html:

```
<select id="combobox_courses" title="tooltip test text" style="display: none;"> 
```

所有问题都是cs jquery组合框覆盖“隐藏”上的“选择”css样式显示并用smth这样改变它： `<span class="ui-combobox"> <input class="ui-state-default ui-autocomplete-input ....`

我尝试使用很多工具提示插件，但没有人能解决这个问题。通常所有的工具提示插件都有如下语法：

```
$("selector").anytooltip({settings}); 
```

使用像 .ui-combobox 这样的类选择器也不起作用。

任何想法如何解决这个问题？抱歉，我是 Jquery 的初学者，可能问题很简单，谢谢您的帮助...

**解决了！**

所以如果有人有这个问题 - js：

> $(文档).ready(函数(){
> 
> ```
> $('#wrapper').tipsy({ trigger: 'manual', gravity: 'n'});
> 
> $( "#combobox" ).combobox();
> $("#wrapper input").bind("click", function() {
>       $("#wrapper").tipsy('show');
> }).bind("focusout",function(){
>       $("#wrapper").tipsy('hide');
> }); }); 
> ```

其中#wrapper 是原始组合框选择元素的包装器：

```
<div class="ui-widget">
    <div id="wrapper" title="test wrapper">
    <label>Your preferred programming language: </label>
    <select id="combobox">
        <option value="">Select one...</option>
    </select>
</div></div> 
```

if $("#wrapper input").bind(...); 仅添加 span - $("#wrapper span input").bind(...); 不起作用

*Tipsy*是 jquery 的免费工具提示插件

*非常感谢@tpaksu 的帮助！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:53:17.620

```
<select id="combobox_courses" title="tooltip test text" style="display: block;"> 
```

或尝试获得一个跨度并包装您的选择并获得他的工具提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:21:53.230

您可以添加一些带有标题的包装器元素并将 附加`ui-combobox`到此包装器。

```
$('element').combobox({
  appendTo: 'elementWithTitle'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:32:01.693

你可以用另一个容器包装这个元素并将工具提示设置为该元素，如下所示：

```
<div id="combo_container">
    <select id="combobox_courses" title="tooltip test text" style="display: none;">
</div> 
```

然后，您可以为该容器元素定义工具提示：

```
$("#combo_container").anytootip({options}); 
```

# ios - 在 IOS 中，abort() 是响应不可恢复错误的推荐方法吗？

> ID：10627786
> 
> 赞同：3
> 
> 时间：2012-05-16T22:43:24.447
> 
> 标签：ios, error-handling, abort

> **可能重复：**
> [在 iphone 应用程序中调用 exit(0)](https://stackoverflow.com/questions/8491466/call-exit0-in-iphone-app)

假设我在 iPhone 应用程序中遇到严重错误——无法实例化所需的核心数据堆栈或类似的东西。我的理解是，Apple 建议简单地中止，而不是尝试向用户显示他们将无能为力的错误。

1.  这个对吗？
2.  abort() 是推荐的中止方法，还是 Cocoa 有更好的方法？

Apple iOS HIG 表示，“如果警报......通知用户他们无能为力的错误或问题，通常是不必要的。”

# zend-framework - Zend 框架自定义 URL

> ID：10627787
> 
> 赞同：1
> 
> 时间：2012-05-16T22:43:29.633
> 
> 标签：zend-framework, url-rewriting, routing

我用 Zend 做了一个项目，我是新手。这是我的想法：

[http://mydomain.com/username](http://mydomain.com/username)

将显示与以下内容相同的内容：--> [http://mydomain.com/profile/index/u/username](http://mydomain.com/profile/index/u/username)

和[http://mydomain.com/username/gallery](http://mydomain.com/username/gallery)

将显示与以下内容相同的内容：--> [http://mydomain.com/profile/gallery/u/username](http://mydomain.com/profile/gallery/u/username)

（配置文件控制器）

Zend 可以做这样的事情吗？

请帮忙。非常感谢。

现在，我在他们的网站上学习 Zend 1.1.1 作为首要下载，但我看到 Zend 2.x 是 Beta。我还应该学习 Zend 1.x 吗？或者等待 Zend 2.x 出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:44:24.230

为此使用 .htaccess 重写。

或添加另一个执行相同控制器操作的路由：

```
$router->addRoute(
    'profile_2',
    new Zend_Controller_Router_Route(':username', array(
        'controller' => 'profile',
        'action' => 'showUser'
    ))
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:35:39.420

你可以使用这条神奇的路线；）

```
$router = Zend_Front_Controller::getInstance()->getRouter();    
$router->addRoute(
    'user',
     new Zend_Controller_Router_Route(':u/:action', array(
        'controller' => 'profile',
        'action' => 'index',
        'u' => null
    ))
); 
```

# css - 垂直堆叠，中间部分尽可能高

> ID：10627799
> 
> 赞同：0
> 
> 时间：2012-05-16T22:44:24.753
> 
> 标签：css, jquery-plugins

好的，所以我有一个非常简单的堆栈：

```
---------
|   A   |
---------
|   B   |
---------
|   C   |
--------- 
```

两者都有已知和固定的高度`A`。`C`然而窗口高度（移动视口）是未知的。我正在努力变得`B`尽可能高。我要使用`overflow-y: auto`，所以溢出不是问题。实际问题是将其扩展为未知（但可计算）的值。

我已经通过计算解决了这个问题`$(window).height() - ($(A).height + $(C).height())`，但必须有更好的方法（或 jQuery 插件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:47:06.673

确保容器具有非`static`定位，然后`B` `position: absolute;`分别将 和 设置为 A`top`和`bottom`C 的高度。

例如，如果`A`是 20 像素高和`C`40 像素，您的 CSS`B`将如下所示：

```
#b {
    bottom: 40px; /* Height of C */
    left: 0;
    position: absolute;
    right: 0;
    top: 20px; /* Height of A */
} 
```

# asp.net - 如何在 formview 或其他 ASP 控件上进行 htmldecode？

> ID：10627801
> 
> 赞同：1
> 
> 时间：2012-05-16T22:44:31.937
> 
> 标签：asp.net, tinymce, formview, html-encode

我有一个带有一个带有 TinyMCE 的 asp 文本框的表单。这很好地编码了用户的标记，但是当我在表单上单击更新时，FormView 控件需要在检索该记录时进行*解码。*

我不知道如何将 Server.HtmlDecode 插入到进程中。提示和参考将是最受欢迎的。

# google-chrome - Chrome 19 无法识别字体粗细：较轻

> ID：10627810
> 
> 赞同：4
> 
> 时间：2012-05-16T22:46:34.007
> 
> 标签：google-chrome, css, font-face

我刚刚启动了一个我正在进行的项目以进行一些修改，并注意到`font-weight: lighter`正在通过该声明提供服务`@font-face`并且它不再在该站点上工作（参见图片 - 顶部 chrome，底部 ff）。自昨晚以来，我的系统（Windows）没有任何变化，今天 bar 升级到 Chrome 19.0.1084.46，我认为这是问题所在，但我想知道是否有其他人注意到这一点，或者是否有修复？

![Chrome vs FF 字体粗细：更轻](../Images/8b99aabb55fa28753012416191f32896.png)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:26:44.890

尝试使用数字而不是相对术语`lighter`。

例如：`font-weight:100`将是最轻的。

这里有一篇关于相对和绝对字体权重的方便文章： [http ://webdesign.about.com/od/fonts/qt/aa031807.htm](http://webdesign.about.com/od/fonts/qt/aa031807.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:29:34.010

如果您正在使用具有多种样式的字体字体（您[应该](http://www.alistapart.com/articles/say-no-to-faux-bold/)这样做），请确保每个变体都专门与字体粗细相关联，这样每个变体都有自己的显式文件。否则，它有点取决于浏览器来弥补它想要做的事情。我发现从 font-squirrel 自动生成的代码不会这样做（尽管他们可能已经更新了他们正在打包的内容）

请注意以下代码中每个文件如何明确设置字体粗细和字体样式。这就没有猜测的余地了。

```
@font-face {
    font-family: 'CaviarDreams';
    src: url('fonts/CaviarDreamsItalic-webfont.eot');
    src: url('fonts/CaviarDreamsItalic-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/CaviarDreamsItalic-webfont.woff') format('woff'),
         url('fonts/CaviarDreamsItalic-webfont.ttf') format('truetype'),
         url('fonts/CaviarDreamsItalic-webfont.svg#CaviarDreamsItalic') format('svg');
    font-weight: normal;
    font-style: italic;

}

@font-face {
    font-family: 'CaviarDreams';
    src: url('fonts/CaviarDreams_BoldItalic-webfont.eot');
    src: url('fonts/CaviarDreams_BoldItalic-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/CaviarDreams_BoldItalic-webfont.woff') format('woff'),
         url('fonts/CaviarDreams_BoldItalic-webfont.ttf') format('truetype'),
         url('fonts/CaviarDreams_BoldItalic-webfont.svg#CaviarDreamsBoldItalic') format('svg');
    font-weight: bold;
    font-style: italic;

}

@font-face {
    font-family: 'CaviarDreams';
    src: url('fonts/CaviarDreams-webfont.eot');
    src: url('fonts/CaviarDreams-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/CaviarDreams-webfont.woff') format('woff'),
         url('fonts/CaviarDreams-webfont.ttf') format('truetype'),
         url('fonts/CaviarDreams-webfont.svg#CaviarDreamsRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'CaviarDreams';
    src: url('fonts/CaviarDreams_Bold-webfont.eot');
    src: url('fonts/CaviarDreams_Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/CaviarDreams_Bold-webfont.woff') format('woff'),
         url('fonts/CaviarDreams_Bold-webfont.ttf') format('truetype'),
         url('fonts/CaviarDreams_Bold-webfont.svg#CaviarDreamsBold') format('svg');
    font-weight: bold;
    font-style: normal;

} 
```

# ios - 如何在AFJSONRequestOperation的回调中从NSHTTPURLResponse中获取响应数据？

> ID：10627815
> 
> 赞同：28
> 
> 时间：2012-05-16T22:46:56.627
> 
> 标签：ios, afnetworking, afjsonrequestoperation, nshttpurlresponse

我有一种情况，我需要从仅包含 NSHTTPURLResponse 的回调块中访问 AFJSONRequestOperation 的原始响应数据。我能够从 NSHTTPURLResponse 中获取 statusCode，但看不到任何获取原始数据的方法。有没有人知道从该操作的失败回调块中访问它的好方法？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-22T03:49:26.870

`NSHTTPURLResponse`只包含 HTTP 头信息；没有身体数据。所以不，这是不可能的。如果您对此代码有任何控制权，请让块或方法传递操作本身并获取`responseData`或`responseJSON`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-28T05:11:29.333

在回调中，您可以使用或从对象`responseJSON`中获取主体。`DataResponse<Any>``response.result.value``String(data:response.data!, encoding: .utf8)`

你不能从 中得到它`response.response`，它是一个`NSHTTPURLResponse`对象。这只有标题信息。

```
Alamofire.request(URL(string: "https://foo.com")!).validate(statusCode: 200..<300).responseJSON() { response in
    let body = response.result.value
} 
```

如果 http 响应未验证上述内容将不起作用。但这确实：

```
Alamofire.request(URL(string: "https://foo.com")!).validate(statusCode: 200..<300).responseJSON() { response in
    let body = String(data:response.data!, encoding: .utf8)
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-05-09T11:11:45.947

老问题，但无论如何......

您不需要获取操作对象，您可以轻松地执行以下操作：

```
NSData * data = [NSJSONSerialization dataWithJSONObject:JSON options:0 error:nil]]; 
```

使用回调接收的 JSON id。

# android - Android LinearLayouts相互冲突

> ID：10627816
> 
> 赞同：0
> 
> 时间：2012-05-16T22:46:59.680
> 
> 标签：android, android-layout

我有两个 LinearLayout

一个包含一个带有 patch9 图像作为语音气泡的 EditText，另一个包含 TextView 和 ImageView

当我尝试输入 EditText 时开始向右侧扩展，然后开始减小第二个 LinearLayout 的宽度（压碎图像）

XML 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
android:gravity="center"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="left"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/summaryMessage"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/greeting_bubble_white"
            android:gravity="center" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="right"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/summaryImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/picture_frame" />

        <TextView
            android:id="@+id/summaryText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:paddingLeft="10dp" />
    </LinearLayout>
</LinearLayout>

</LinearLayout> 
```

看起来像这样

![在此处输入图像描述](../Images/4c97b44498bdad339a8d1ff154176621.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:57:36.720

它的扩展，因为你已经指定`layout_width`你的`LinearLayout`应该是“ `wrap_content`”，你应该用 dps 指定一个固定的维度，这样它就不会扩展。替代使用`weight`标签

试试这个修改：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
android:gravity="center"
android:orientation="vertical" >
<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:orientation="horizontal"
android:layout_weight="0.7">

     <EditText
        android:id="@+id/summaryMessage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/greeting_bubble_white"
        android:gravity="center" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.3"
    android:gravity="right"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/summaryImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/picture_frame" />

    <TextView
        android:id="@+id/summaryText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingLeft="10dp" />
</LinearLayout> 
```

但是我会建议您更多地使用这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/white"
android:gravity="center"
android:orientation="horizontal" >

         <EditText
            android:id="@+id/summaryMessage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="0.7"
            android:background="@drawable/greeting_bubble_white"
            android:gravity="center" />

        <TextView
            android:id="@+id/summaryText"
            android:layout_weight="0.3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:paddingLeft="10dp" />
</LinearLayout> 
```

并且您在 summaryText 上使用复合可绘制对象，这是一个可以帮助您的链接：[Using Compund Drawables](https://stackoverflow.com/questions/8318765/how-do-i-use-a-compound-drawable-instead-of-a-linearlayout-that-contains-an-imag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:57:05.743

使用相对布局，布局编辑器实际上非常好，所以用它来定位你的视图

# ios - RestKit 派生数据问题

> ID：10627817
> 
> 赞同：4
> 
> 时间：2012-05-16T22:46:59.827
> 
> 标签：ios

我正在尝试使用 Restkit。我已按照此处的安装说明进行操作：[https ://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

我正在运行 Xcode 4.3.2。当我尝试运行 RKCatalog 项目时，出现错误：clang: error: no such file or directory: '/Users/sparky/Library/Developer/Xcode/DerivedData/RKCatalog-fdohdnazcupmydfaxxedezitkbpl/Build/Products/Debug-iphonesimulator/休息套件/休息套件'

我不是 Xcode 专家。我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T19:23:44.463

如果您`Restkit.framework`在“构建阶段”（目标 > 构建阶段 > 将二进制文件与库链接）中添加了库，**则必须将其删除**。我从 GitHub 上`Restkit.framework`关于 Mac OSX 和`libRestKit.a`iOS 的讨论中了解到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T02:11:53.793

我的项目也有类似的问题。对我有用的是删除 DerivedData 文件夹中对我的项目的所有引用。所以，在你的情况下：

```
rm -rf /Users/sparky/Library/Developer/Xcode/DerivedData/RKCatalog-* 
```

在此之后，尝试重新启动 XCode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T21:24:47.723

您可以使用键盘快捷键轻松清除 Xcode 的派生数据文件夹：

`⌘</kbd> + `option` + `shift` + `k``

# objective-c - prepareForSegue：发件人：popViewControllerAnimated 的替代品：

> ID：10627819
> 
> 赞同：1
> 
> 时间：2012-05-16T22:47:10.493
> 
> 标签：objective-c, ios, tableview, segue, popviewcontroller

我试图在将顶部 viewController 从堆栈中弹出的同时“做一些事情”。从堆栈中弹出一个 viewController 似乎不被认为是一个 segue，所以我不能使用 prepareForSegue: sender: 是否有替代方法可以满足我的需要？或者我可以采取不同的方法吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:09:16.437

当您对顶部 ViewController 说“pop”时，我假设您正在使用导航控制器。如果是这种情况，您可以在

```
- (void)viewWillAppear:(BOOL)animated 
```

方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T19:09:46.427

寻找能够满足您需求的“展开的转场”。

# matlab - 将 Matlab 中的值增加到第二个值（1：n 逻辑）

> ID：10627820
> 
> 赞同：3
> 
> 时间：2012-05-16T22:47:22.777
> 
> 标签：matlab, matrix, increment

我在 Matlab 中有一个 2 年的列，如下所示：

```
 % Col2 Is always greater than Col1
mat  = [2009 2012 ;
        2012 2012 ;
        2012 2013 ; 
```

我需要为第 1 行执行 2009:2012，为第 2 行执行 2012:2012，依此类推......这并不容易，因为每对的大小 1:N 都在不断变化。

```
FinalAns = [    2009
                2010
                2011
                2012           % -- 
                2012           % -- 
                2012
                2013      ] ;  % -- 
```

我不能使用“for”循环，因为数据量非常大，而且我没有成功使用`accumarray`它。将高度赞赏矢量化解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:03:27.623

这可以满足您的需要：

```
n = size(mat, 1);
c = arrayfun(@(x) {mat(x, 1):mat(x, 2)}, 1:n);
FinalAns = [c{:}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T23:11:25.003

您可以轻松地使用 arrayfun 生成单元矩阵，如下所示：

```
>> Cells = arrayfun(@(a, b) {a:b}, Col1, Col2);
>> Cells{1}

ans =

        2009        2010        2011        2012

>> Cells{2}

ans =

        2012

>> Cells{3}

ans =

        2012        2013 
```

您可能会发现单元矩阵比您最初要求的形式更方便，但如果不是，这里是如何转换它：

```
>> horzcat(Cells{:})

ans =

        2009        2010        2011        2012        2012        2012        2013 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T23:06:22.690

这将起作用：

```
Col1 = [ 2009  ; 2012 ; 2012 ] ;
Col2 = [ 2012  ; 2012 ; 2013 ] ;

finalAnswer = zeros(sum(Col2 - Col1) + length(Col1),1);

curr=0;
for iter = 1:length(Col1)
    finalAnswer((curr+1):(curr + Col2(iter)-Col1(iter)+1)) = Col1(iter):Col2(iter);
    curr = curr + Col2(iter)-Col1(iter)+1;
end 
```

仍然有 for 循环，但是通过`finalAnswer`如上所述的预分配，您应该从矢量化解决方案中获得您期望的大部分收益。

# php - 在表单中使用选择下拉菜单

> ID：10627823
> 
> 赞同：0
> 
> 时间：2012-05-16T22:47:53.013
> 
> 标签：php, html

我正在尝试使用 HTML 选择下拉菜单来帮助对我网站上的搜索结果进行排序，但遇到了一些麻烦。在下面的代码中，我专门选择了 Option1，当我在提交表单后尝试回显结果时，它总是回显'FAIL'。我想知道是否有人可以帮助我理解我做错了什么以及在提交表单后从用户选择的选项中检索数据的正确方法是什么？

```
<?php 

echo '<form method="post" action="search.php">
    <select>
         <option name="one">Option1 </option>
             <option name="two">Option2</option>
        </select>
        <input type="text" name="searchword" />
        <input type="submit" value="Search"  />
</form>';

if(isset($_POST['one'])){
     echo 'Option1 is set';
}else{
     echo 'FAIL';
}

?> 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:49:55.313

这是因为名称属性与`select`标签一起使用。

```
<select name="dropdown">
    <option>Option 1</option>
    <option>Option 1</option>
</select>

if(isset($_POST['dropdown'])) {
    echo $_POST['dropdown']; //echoes 'Option 1'
} 
```

如果你愿意，你可以`value`给元素添加一个属性`option`，但你不是必须的。

如果你这样做

```
<option value="foobar">Option1</option> 
```

表格将张贴`foobar`而不是`Option1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:50:07.957

```
<?php 

echo '<form method="post" action="search.php">
    <select name="my_option">
         <option value="one">Option1 </option>
             <option value="two">Option2</option>
        </select>
        <input type="text" name="searchword" />
        <input type="submit" value="Search"  />
</form>';

echo "My option value is : " .  $_POST['my_option'];

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:49:46.600

您需要命名您的选择标签并访问它。

`<select name="options"></select>`

`echo $_POST['options'];`会给你你选择的选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:49:50.760

而不是 name="one" 一个选项需要一个

```
value="myvalue" 
```

你的选择标签需要一个

```
name="nameofthisthinghere" 
```

# search-engine - 影响子页面或子域在 Google 中的第一个位置

> ID：10627825
> 
> 赞同：0
> 
> 时间：2012-05-16T22:48:13.477
> 
> 标签：search-engine

我们在 ourproduct.com 上有一个产品网站（我们称之为“ourproduct”）。我们还有一个 en.ourproduct.com 网站的英文版（基本版是斯洛文尼亚语）。

当您在 Google 上搜索我们的产品时，英文子域是第一个结果，但我们希望没有子域的那个是第一个，因为它是主要的。两个站点上的内容是相同的，只是翻译不同，因此关键字 ourproduct 在两个站点上的代表相同。第二个问题是第二个结果是针对 ourproduct.com/gallery，但我希望我们的主页在那里。

有没有办法可以影响或“解决”这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:06:03.037

Google.com 和您本地 Google (google.si(?)) 的结果是否相同？google.com 将优先考虑英文内容。

要回答您的问题，有几种方法可以影响这一点。为您的网站设置网站管理员工具（我认为您需要分别添加每个子域）。在那里，您将能够为每个子域设置目标国家。

至于/gallery vs你的index page，你可以提交一个sitemap并将index url的相对重要性设置为高于gallery的相对重要性。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=183668&topic=8476&ctx=topic](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=183668&topic=8476&ctx=topic)

# selenium - Selenium Grid 2 - 将节点作为 Windows 服务启动

> ID：10627826
> 
> 赞同：4
> 
> 时间：2012-05-16T22:48:21.263
> 
> 标签：selenium, webdriver

我正在尝试使用网格 2 在远程 m/c 上运行测试。所以我有一个集线器在我的计算机上运行，​​一个节点在远程 m/c 上运行，我可以毫无问题地运行我的测试。但是，为了使体验更加流畅，我想将集线器和节点作为 Windows 服务运行。这样我就可以在代码中管理集线器和节点。因此，我使用 srvany 将 Hub 作为服务安装在服务器上，并将 Node 作为服务安装在远程 m/c 上，如下所示

C:\Program Files\Resource Kit\Instsrv.exe RunHub C:\Program Files\Resource Kit\Srvany.exe

C:\Program Files\Resource Kit\Instsrv.exe RunNode C:\Program Files\Resource Kit\Srvany.exe（其中 RunHub 和 RunNode 是批处理文件）

我还在注册表中进行了必要的更改。

我面临的问题是，当我在远程 m/c 中将节点作为 Windows 服务运行时，它没有将自己正确注册到集线器。当我查看网格概述（[http://localhost:4444/grid/console](http://localhost:4444/grid/console)）时，我看不到那里的节点。但是，如果我手动运行相同的 bat 文件而不是作为服务运行，则一切正常。有人可以让我知道我做错了什么吗？或者解决此问题的最佳方法是什么？

谢谢，

* * *

好的，我自己想通了。在 bat 文件中存在对不同目录中的文件的引用。将该文件作为服务运行时无法访问。我将文件移动到正确的目录，现在我可以运行节点服务

# java - java swing中运行的脚本需要等待线程完成

> ID：10627837
> 
> 赞同：0
> 
> 时间：2012-05-16T22:49:51.200
> 
> 标签：java, multithreading, swing

我有一个使用 javax.script 运行脚本的 java swing 应用程序。脚本访问 swing 小部件并模拟用户操作，例如`JButton.doClick()`. 一些小部件操作会导致一个或多个`Threads (SwingWorker)`启动，我需要脚本等到所有操作`Threads`都完成。但是脚本在事件调度线程中运行，所以如果我这样做，例如，a`CountDownLatch`里面 `await()`有 a `FutureTask`，然后`submit()`and `get()`，`get()`将停止 EDT，并且 GUI 挂起。如果不停止 EDT，就无法让脚本等待。这个问题的任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T01:21:36.387

在我最近的一个项目中，我遇到了类似的问题。我解决它的方法是让 EDT 创建（并运行）一个新`anonymous SwingWorker`的，然后调用（并等待）我的线程：

```
public void methodCalledByEDT() {
    new SwingWorker<Void, Void>() {
        public Void doInBackground() {
            // Execute threads and wait for them here
            // using the method you described above
            return Void;
        }

        public Void done() {
            // Code to execute when threads have finished goes here
            return Void;
        }
    }.execute()
} 
```

这确保了 EDT 可以自由地继续其业务——匿名 SwingWorker 被阻塞等待线程完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:15:34.343

`java.lang.ThreadGroup`使用 a作为 ThreadGroup 参数构造您的线程。然后，您可以使用`ThreadGroup#activeCount()`来估计该组中有多少线程处于活动状态。要等待线程全部完成，您可以使用 while 循环，等待组的活动线程计数为 0，此时您执行代码。

# google-apps-script - GUI 未将值传递给电子表格

> ID：10627839
> 
> 赞同：0
> 
> 时间：2012-05-16T22:50:04.423
> 
> 标签：google-apps-script

我创建了一个`MyGui`带有流面板 ( `mainPanel`)、文本框 ( `textValue`) 和按钮 ( ) 的 GUI ( `getETA`)。全部在站点脚本中。

这个想法是在文本框中输入一个值，单击按钮，然后将该值放置在电子表格的单元格 A1 中。

GUI 中没有配置处理程序，我已将脚本复制粘贴到新站点，但没有成功。

我遇到的问题是我在电子表格单元格中得到的只是“未定义”。此外，如果我对函数运行调试，`clickGetETA`我会收到以下错误消息：“无法从未定义中读取属性“参数””

我是新手，但我最好的猜测是 GUI 的细节没有传递给`clickGetETA`函数。我已经搜索了我能找到的，但我似乎找不到解决方案......

如果有人能告诉我哪里出错了，我会很感激他的帮助。

```
function doGet() {
    var app= UiApp.createApplication();
    app.add(app.loadComponent("MyGui"));
    var clickHandler = app.createServerHandler('clickGetETA');
    clickHandler.addCallbackElement(app.getElementById('mainPanel'));
    app.getElementById('getETA').addClickHandler(clickHandler);
    return app;
}

function clickGetETA(e) {
    var sheet = SpreadsheetApp.openById('abcdefghjklmnopqrstuvwxyz');
    var ss = sheet.getActiveSheet();
    var target = ss.setActiveCell("A1");
    target.setValue(e.parameter.textValue);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:46:31.533

改变：

```
var ss = sheet.getActiveSheet();
var target = ss.setActiveCell("A1"); 
```

到 ：

```
var ss = sheet.getSheetByName("SheetName");
var target = ss.getRange("A1"); 
```

这种事情的好例子在这里： [https ://developers.google.com/apps-script/guide_user_interfaces](https://developers.google.com/apps-script/guide_user_interfaces)

它应该作为服务运行。即你使用get 函数。

注意：调试时不存在“e”参数。调试有点受限。ActiveSheet 和 ActiveCell 旨在从电子表格而非服务中使用。服务创建网页而不是弹出框。

涡流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:45:07.190

中使用的回调元素`addCallbackElement`可能是单个小部件或 GUI 的面板。传递面板时，面板层次结构中的所有小部件都将包含在参数中。您确定您的文本框在您要添加的面板内吗？

`name`此外，可以使用小部件（您必须在 GUI 构建器上设置）在处理程序函数中访问小部件的值。`name`请注意和 之间的区别，当您对多个小部件使用相同的处理程序时，您使用`id`该 id 来获取小部件`getElementById`并确定`source`事件的小部件。以及`name`用于访问该值。你确定你把你的文本框命名为`textValue`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:33:39.413

为我解决的问题是进入 UI 编辑器并确保我为表单字段分配了一个 ID**和一个 name**。我错过了这个名字，所以我的 e.parameter.fieldName 是未定义的。

# spring - 使用 Spring-JMS DefaultMessageListenerContainer cacheLevelName CACHE_NONE 连接失败

> ID：10627841
> 
> 赞同：0
> 
> 时间：2012-05-16T22:50:14.783
> 
> 标签：spring, jms, spring-jms

我将 Spring-JMS DefaultMessageListenerContainer 实现更改为使用 CACHE_NONE 的 cacheLevelName 并遇到以下异常。[此处](https://stackoverflow.com/questions/10419389/spring-jms-session-issue-when-using-open-mq/10523893#comment13640043_10523893)概述了这些更改。我正在使用 glassfish v 2.1、Open MQ 4.4 和 Spring 3.*。关于我可能出错的地方有什么想法吗？

**网络应用日志：**

[#|2012-05-16T21:18:12.620+0000|SEVERE|sun-appserver9.1|javax.resourceadapter.mqjmsra.outbound.connection|_ThreadID=284;_ThreadName=updateJmsContainer-90;_RequestID=3aa71c9e-3ac0-4142 -b914-ffbdc6e6bb37;|MQJMSRA_MC4001：构造函数：Aborting：JMSException on createConnection=[C4000]：数据包确认失败。用户=管理员，经纪人=本地主机：45088（55601）|#]

2012-05-16 21:18:17,636 [updateJmsContainer-90] 警告 org.springframework.jms.listener.DefaultMessageListenerContainer - 目标“TestQ”的 JMS 消息侦听器调用程序设置失败 - 试图恢复。原因：MQRA:CFA:allocation failure:createConnection:Error in allocating an connection。原因：MQJMSRA_MC4001：constructor:Aborting:JMSException on createConnection=[C4000]：数据包确认失败。用户=管理员，经纪人=本地主机：45088（55601）

**经纪人日志文件：**

```
[16/May/2012:21:10:14 UTC] [B1039]: Broker "appbroker@host:45028" ready.
[16/May/2012:21:10:41 UTC] [B1065]: Accepting: guest@206.220.220.111:56811->jms:55601\. Count: service=1 broker=1
[16/May/2012:21:10:48 UTC] [B1065]: Accepting: guest@206.220.220.111:25432->jms:55601\. Count: service=2 broker=2
[16/May/2012:21:10:55 UTC] [B1065]: Accepting: guest@206.220.220.111:25478->jms:55601\. Count: service=3 broker=3
[16/May/2012:21:11:56 UTC] [B1065]: Accepting: guest@206.220.220.73:44040->jms:55601\. Count: service=4 broker=4
[16/May/2012:21:11:56 UTC] [B1065]: Accepting: guest@206.220.219.227:33237->jms:55601\. Count: service=5 broker=5
...
...
[16/May/2012:21:17:50 UTC] [B1065]: Accepting: admin@127.0.0.1:46564->jms:55601\. Count: service=500 broker=500

[16/May/2012:21:17:50 UTC] WARNING [B3004]: **No threads are available to process a new connection on service jms. 1000 threads out of a maximum of 1000 threads are already in use by other connections.** A minimum of 2 threads must be available to process the connection. Please either limit the # of connections or increase the imq.<service>.max_threads property. Closing the new connection.
[16/May/2012:21:18:01 UTC] [B1066]:   Closing: ???@127.0.0.1:0->jms:0 because "[B3004]: No threads are available to process a new connection on service jms. 1000 threads out of a maximum of 1000 threads are already in use by other connections. A minimum of 2 threads must be available to process the connection. Please either limit the # of connections or increase the imq.<service>.max_threads property. Closing the new connection. ". Count: service=0 broker=500
[16/May/2012:21:18:01 UTC] WARNING Problem detected while attempting to send notification mq.connection.close from MBean Service Monitor
[16/May/2012:21:18:01 UTC] WARNING Cannot determine service name from connection ID: 7881641671884329217 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:03:58.327

此 C4000 错误是网络通用异常处理程序。这可能是缓存级别更改的结果。应用程序可能会打开太多与服务器的连接，具体取决于您的池设置，并且服务器可能缺乏管理它们的资源 - 最好的猜测可能是内存。

请检查您的 OpenMQ 服务器日志文件和内存使用情况。

消费者和 MQ 服务器之间是否有任何网络配置（防火墙、QoS 路由器...）可以控制连接建立？快速打开许多连接可能被视为 SYN 泛洪，这是一种常见的 DoS 攻击。

# xml - XML 架构不起作用

> ID：10627843
> 
> 赞同：0
> 
> 时间：2012-05-16T22:50:43.840
> 
> 标签：xml, xsd

我想将 XML 模式与 XML 文件链接起来。我遵循了这个例子：[XSD How To](http://www.w3schools.com/schema/schema_howto.asp)。

`note.xml`看起来像：

```
<?xml version="1.0"?>

<note
xmlns="http://www.w3schools.com"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.w3schools.com note.xsd">
  <to>Tove</to>
  <from>Jani</from>
  <heading>Reminder</heading>
  <body>Don't forget me this weekend!</body>
</note> 
```

`note.xsd`看起来像：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.w3schools.com"
xmlns="http://www.w3schools.com"
elementFormDefault="qualified">

<xs:element name="note">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="to" type="xs:string"/>
      <xs:element name="from" type="xs:string"/>
      <xs:element name="heading" type="xs:string"/>
      <xs:element name="body" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>

</xs:schema> 
```

但是当我打开它时`note.xml`，它在我的浏览器中看起来就像一个普通的 XML，并带有描述：`This XML file does not appear to have any style information associated with it. The document tree is shown below.`
这些文件都在同一个目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:14:35.680

您是否将附加 XML 模式与附加 XSLT 转换混淆了？因为您的浏览器告诉您缺少样式表，而不是缺少模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:21:13.607

XSD(schema) 仅用于任何 xml 的验证目的......而 XSLT 用于为 XML 提供样式目的 -wch 在您的 xml 中根本不存在，所以当您在浏览器中时，您怎么能期望任何样式运行这个 XML 文件...！！！

# java - java中的g_ascii_strcasecmp等价物

> ID：10627847
> 
> 赞同：2
> 
> 时间：2012-05-16T22:51:06.587
> 
> 标签：java, c++, c, glib

[我有一个使用g_ascii_strcasecmp](http://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-ascii-strcasecmp)函数排序的单词列表。我需要在 java 中处理这个列表。java中等价的排序函数是什么？为了实现二进制搜索，我需要一个正确的比较函数。到目前为止，我有下面的功能，但它并不总是产生正确的结果。

```
public int compareStrings(String str) {
    Collator collator = Collator.getInstance();//TODO: implement locale?
    return collator.compare(this.wordString, str);
} 
```

更新。列表示例：“T, t, T'ai Chi Chu'uan, t'other, T-, T-bone, T-bone steak, T-junction, tabasco, Tabassaran, tabby”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:32:31.847

我决定分享我想出的方法：

```
 /**
     * Compares two strings, ignoring the case of ASCII characters. It treats
     * non-ASCII characters taking in account case differences. This is an 
     * attempt to mimic glib's string utility function 
     * <a href="http://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-ascii-strcasecmp">g_ascii_strcasecmp ()</a>.
     *
     * This is a slightly modified version of java.lang.String.CASE_INSENSITIVE_ORDER.compare(String s1, String s2) method.
     * 
     * @param str1  string to compare with str2
     * @param str2  string to compare with str1
     * @return      0 if the strings match, a negative value if str1 < str2, or a positive value if str1 > str2
     */
    private static int compareToIgnoreCaseASCIIOnly(String str1, String str2) {
        int n1 = str1.length();
        int n2 = str2.length();
        int min = Math.min(n1, n2);
        for (int i = 0; i < min; i++) {
            char c1 = str1.charAt(i);
            char c2 = str2.charAt(i);
            if (c1 != c2) {
                if ((int) c1 > 127 || (int) c2 > 127) { //if non-ASCII char
                    return c1 - c2;
                } else {
                    c1 = Character.toUpperCase(c1);
                    c2 = Character.toUpperCase(c2);
                    if(c1 != c2) {
                        c1 = Character.toLowerCase(c1);
                        c2 = Character.toLowerCase(c2);
                        if(c1 != c2) {
                            return c1 - c2;
                        }
                    }
                }
            }
        }
        return n1 - n2;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:41:21.043

在阅读了它的 Javadoc 之后，我不会使用`Collator`，因为您无法控制字符串的比较方式。您可以选择语言环境，但该语言环境如何告诉`Collator`如何比较字符串是您无法控制的。

如果您**知道**字符串中的字符都是 ASCII 字符，那么我将使用该`String.compareTo()`方法，该方法根据 unicode 字符值按字典顺​​序排序。如果字符串中的所有字符都是 ASCII 字符，则它们的 unicode 字符值将是它们的 ASCII 值，因此按其 unicode 值按字典顺​​序排序将与按其 ASCII 值按字典顺​​序排序相同，这似乎是什么`g_ascii_stcasecmp`。如果您需要不区分大小写，您可以使用`String.compareToIgnoreCase()`.

* * *

正如我在评论中指出的那样，我认为您需要编写自己的比较函数。您需要遍历字符串中的字符，跳过不在 ASCII 范围内的字符。所以像这样的东西，这是一个简单而愚蠢的实现，需要加强以涵盖我想象的极端情况`g_ascii_strcasecmp`：

```
public int compareStrings(String str) {
    List<Character> myAsciiChars = onlyAsciiChars(this.wordString);
    List<Character> theirAsciiChars = onlyAsciiChars(str);

    if (myAsciiChars.size() > theirAsciiChars.size()) {
        return 1;
    }
    else if (myAsciiChars.size() < theirAsciiChars.size()) {
        return -1;
    }

    for (int i=0; i < myAsciiChars.size(); i++) {
        if (myAsciiChars.get(i) > theirAsciiChars.get(i)) {
            return 1;
        }
        else if (myAsciiChars.get(i) < theirAsciiChars.get(i)) {
            return -1;
        }
    }

    return 0;
}

private final static char MAX_ASCII_VALUE = 127; // (Or 255 if using extended ASCII)

private List<Character> onlyAsciiChars(String s) {
    List<Character> asciiChars = new ArrayList<>();
    for (char c : s.toCharArray()) {
        if (c <= MAX_ASCII_VALUE) {
            asciiChars.add(c);
        }
    }
    return asciiChars;
} 
```

# javascript - 使用“如果”重定向

> ID：10627848
> 
> 赞同：0
> 
> 时间：2012-05-16T22:51:16.327
> 
> 标签：javascript, forms, function, redirect, if-statement

我正在尝试使用表单创建一个页面，答案取决于要重定向的页面。如果我使用警报，表单和 javascript 可以 100% 正确工作。我试图用 window.location 命令和其他想法替换警报，但没有任何反应。有人可以解释如何做到这一点，更重要的是你的建议有效吗？

这工作正常：

```
<script type = "text/javascript">
<!--
function checkAnswers()
{
    var myQuiz = document.getElementById( "myQuiz" );
    if ( myQuiz.elements[ 1 ] .checked)
       alert( "Correct");
    else
       alert( "Failed" );
};
</script> 
```

这不起作用！：

```
<script type = "text/javascript">
<!--
function checkAnswers()
{
    var myQuiz = document.getElementById( "myQuiz" );
    if ( myQuiz.elements[ 1 ] .checked)
        window.location = "www.bing.com";
    else
        window.location = "www.google.com";
};
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:57:56.783

你没有说发生了什么，但你可能会收到 404 错误，对吧？

如果您的 URL 不以 开头`http://`，它们将被认为是相对的，并且浏览器会尝试将您带到一个不存在的页面。用这个：

```
function checkAnswers()
{
    var myQuiz = document.getElementById( "myQuiz" );
    if ( myQuiz.elements[ 1 ] .checked)
        window.location = "http://www.bing.com";
    else
        window.location = "http://www.google.com";
}; 
```

# intellij-idea - IntelliJ 中的代码覆盖率窗口在哪里？

> ID：10627851
> 
> 赞同：7
> 
> 时间：2012-05-16T22:51:47.550
> 
> 标签：intellij-idea

我在哪里可以找到IntelliJ IDEA Ultimate 11.02 中的[覆盖工具窗口？](http://www.jetbrains.com/idea/webhelp/coverage-tool-window.html)在教程中，他们说它在 View | 工具窗口 | 覆盖范围。但在我的想法中它不是，见图：

![缺少覆盖窗口](../Images/8e1937143de99043b284ddf493acd407.png)

我启用了覆盖插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T23:12:01.983

您需要单击工具栏中的**Run with Coverage**按钮，测试完成后，将出现**Coverage**面板，显示运行结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T08:07:49.653

运行——>编辑配置——>选择代码覆盖率（然后你可以选择IDEA/EMMA/JaCoCo

# css - 解决“传奇”冲突 IE 9

> ID：10627854
> 
> 赞同：0
> 
> 时间：2012-05-16T22:52:08.980
> 
> 标签：css, internet-explorer, cross-browser

以下 CSS 适用于 Firefox、Chrome 和 Safari。但由于某种原因 IE 9 它没有显示`legend`. 其他 CSS 在 IE 9 中正确显示。我已经尝试过，但找不到答案。`legend`它应该显示带有白色文本和黑色边框的橙色标题。

网站地址： [http ://www.mconchicago.com](http://www.mconchicago.com)

**CSS：**

```
legend{
    color: #fff;
    background: #ffa20c;
    border: 1px solid #781351;
    width: 49.2em;
    padding: 2px 6px
} 
```

当我通过尝试学习时，我的样式表是一团糟。我认为它可能在某个地方存在冲突。

完整的样式表可以在[这里](http://mconchicago.com/main.css%20here)查看：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T23:08:33.943

您的问题不仅在橙色标题上，您的文档标记上有**61 个错误和 15 个警告。**

请参阅[此链接](http://validator.w3.org/check?uri=http://www.mconchicago.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)以确切了解错误是什么，它们位于何处以及如何解决它们！

* * *

**此外，您应该阅读一些关于 HTML 的内容：**

[Google 从头开始​​的 HTML、CSS 和 Javascript](http://code.google.com/edu/submissions/html-css-javascript/)

[Opera Web 标准课程](http://dev.opera.com/articles/view/1-introduction-to-the-web-standards-cur/#toc)

[站点点](http://reference.sitepoint.com/)

[MDN（Mozilla 的开发者网络）](https://developer.mozilla.org/en-US/docs)

[W3.org HTML 元素参考](http://www.w3.org/html/wiki/Elements)

**资料来源：** [http](http://w3fools.com/) ://w3fools.com/ （感谢[Spudley](https://stackoverflow.com/users/352765/spudley)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:12:56.120

我会冒险猜测它不起作用，因为您试图将标题放在图例元素中。图例仅适用于表单，但这是页面/部分标题而不是表单图例。

将 <legend> 替换为 <h1> 并相应地更新您的 CSS。

您还应该习惯于编写有效的 HTML，因为无效代码也可能导致浏览器之间的不一致，因为它们试图以自己的方式理解您的代码。使用 W3C 验证器并解决错误

[http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fwww.mconchicago.com%2F](http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fwww.mconchicago.com%2F)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T20:02:24.777

在这一系列事件发生后的某个时间，整个站点重新启动。我已经存档了旧文件。如果您想查看此建议的结果，至少暂时可以查看[http://www.mconchicago.com/MCON/](http://www.mconchicago.com/MCON/)

# html - 带表格的水平堆栈

> ID：10627855
> 
> 赞同：0
> 
> 时间：2012-05-16T22:52:10.020
> 
> 标签：html, css, forms

我正在寻找一个包含两个元素的全角表单：

```
___________________________________
|     Text-Input     |   Button   |
‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ 
```

尽管窗口（移动视口）的大小未知，但按钮应该具有固定宽度。输入大小应尽可能宽...困难的是输入元素很难驯服...

到目前为止，我在围绕输入和浮动[http://dabblet.com/gist/2714788](http://dabblet.com/gist/2714788)的包装器方面取得了一些进展（尽管我不得不将按钮放在 html 中的输入之前）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:17:15.483

```
<form>
<input placeholder="This is not easy...">
<button>Submit</button>    
</form> 
```

尝试将此代码用于表单并将此样式用于输入

```
input { width:80%; float:left; } 
```

这是按钮

```
button { width:19%; float:left; } 
```

使用此代码并将工作。

# java - Spring 3.0 无法加载属性

> ID：10627856
> 
> 赞同：2
> 
> 时间：2012-05-16T22:52:10.403
> 
> 标签：java, spring, apache, jakarta-ee, netbeans

我在部署 Web 应用程序时收到以下错误/异常：

> org.springframework.beans.factory.BeanInitializationException：无法加载属性；嵌套异常是 java.io.FileNotFoundException：无法打开 ServletContext 资源 [/WEB-INF/WebAppProps]

**下面是我在applicationContext.xml**中使用的上下文标记来指向**WebAppsProps.properties**文件

```
 <bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
    p:location="classpath:/WEB-INF/WebAppProps.properties" /> 
```

**我也用过：**

```
 <bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
    p:location="/WEB-INF/WebAppProps.properties" /> 
```

该文件实际上在文件系统中，下面是我的项目结构的快照：

![在此处输入图像描述](../Images/8a205a9bcc95c13260487a2519ad9ede.png)

我也尝试过，将“WebAppProps.properties”放在类路径上并使用这两种变体

**变化1：**

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"> 
        <property name="location"> 
            <value>classpath:WebAppProps.properties</value> 
        </property> 
    </bean> 
```

**变体2：**

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"> 
        <property name="location"> 
            <value>WebAppProps.properties</value> 
        </property> 
    </bean> 
```

请看下面： ![在此处输入图像描述](../Images/8c6a1a3c5340f8f019cbbd1697d6953b.png)

但是我仍然遇到相同的错误/异常。

请指教

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-27T11:16:09.460

我遇到了同样的问题，

**修复：** **解决** 你的bean如下：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location">
    <value>/WEB-INF/database.properties</value>
  </property>
</bean> 
```

在它下面创建文件夹属性`WEB-INF`看起来像`WEB-INF/properties/database.properties`

因为类`PropertyPlaceholderConfigurer`默认搜索属性文件夹首先在下面，`/WEB-INF/`所以它将您的文件名连接为路径

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:38:17.700

我认为你应该改变你的代码并像这样放置属性：

```
 <bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="/WEB-INF/jdbc.properties" />
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-20T01:41:35.997

Spring 4 这就是我配置属性文件的方式

```
@Configuration
@PropertySources({
        @PropertySource("classpath:application.properties"),
        @PropertySource(value = "${application.properties}", ignoreResourceNotFound = false)
})
public class WebServiceConfig {
---
} 
```

在 setenv.sh 中启动我的 tomcat 时，我将路径定义为

```
-Dapplication.properties=file:location-of-file/application.properties" 
```

通知文件：此处为前缀。这很重要。

现在您可以将文件拖放到文件系统上的任何位置并更改路径，而无需更改代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:56:38.640

```
<bean 
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">

    <property name="location">
        <value>WebAppProps.properties</value>
    </property>
</bean> 
```

只需将文件放在目录根`classes`目录的类路径中即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T16:44:19.763

你有两个选择：

如果您不需要获取 bean，而只需要获取属性：

```
<context:property-placeholder location="/WEB-INF/WebAppProps.properties" file-encoding="UTF-8"/> 
```

或者如果您需要 bean（如果您需要读取许多道具，您可能想注入您的属性 bean...）

```
<bean id="configProperty" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="locations">
        <list>
               <value>/WEB-INF/config.properties</value>
               <value>/WEB-INF/setup.properties</value>
           </list>
    </property>
    <property name="ignoreResourceNotFound" value="true"/>
</bean> 
```

# jquery - 委托`.on`比绑定`.on`更快？

> ID：10627858
> 
> 赞同：1
> 
> 时间：2012-05-16T22:52:41.937
> 
> 标签：jquery

看看这个测试：

[http://jsperf.com/delegate-on-vs-bind-5](http://jsperf.com/delegate-on-vs-bind-5)

我所做的是将孩子委托给给定的父母，并将另一个事件直接委托给孩子。测试（至少在 Chrome 中）似乎表明委托方法*比*直接绑定方法快得多。这确实违背了我所读到的关于 jQuery 的所有内容以及我认为它的意图。我的测试是错误的还是我们真的应该使用委托方法？请注意，父母与孩子的祖先甚至不是*那么*接近。

这个小提琴也证实了事件是用这个 DOM 和 JS 适当地触发的：

[http://jsfiddle.net/WtnRF/](http://jsfiddle.net/WtnRF/)

想法？

编辑：为了澄清，我的具体问题是为什么在这个测试中，**委托**方法（传统上应该更慢）比**绑定**方法（应该更快）快得多？

*   我只是写了一个糟糕的测试吗？
*   jsperf 基准测试搞砸了吗？
*   我们真的应该一直使用**委托**方法，因为它优越吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:10:07.590

我敢肯定，真正的答案会随之而来，但你问的是想法。

我的想法是，对于现代系统，几乎不可能始终如一地预测给定结构将如何影响性能。

你会得到这个的解释，想了一会儿，摆弄它你会相信它（或者它可能会被发现是一个测量错误），但从长远来看它不会给你任何关于如何更好地编码的真正见解。此外，在不同的浏览器/平台/版本/星期几上，它的工作方式也会不同。

问题是，如果有一个他们希望你经常使用的构造（因为这是人们通常编码的方式），他们会首先对其进行优化，并且它可能会执行得更快。这样做的结果是，在代码下面的级别上进行的性能改进通常会比手动优化的代码改进您编写良好的代码。

这意味着您永远不应该为性能而编码，为清晰和干燥而编码。如果您这样做并且遇到了一些客户或经理认为它太慢的障碍（获取性能要求！），那么当然可以考虑在每个平台上使用前后测量重新编码。进行比较并确保“优化”解决方案实际上值得缺乏清晰度并且实际上满足要求。记录您在代码中这样做的原因，这样其他人就不会出现并在以后修复看起来像您蹩脚的编码风格。

# windows - scons - 只重新编译应用程序的特定部分？

> ID：10627862
> 
> 赞同：0
> 
> 时间：2012-05-16T22:52:49.733
> 
> 标签：windows, dll, scons

这是我第一次使用`scons`和编译。

[这个应用程序](https://github.com/appcelerator/titanium_desktop)有一个问题[，这个人在这里解决了这个](https://github.com/freewizard/titanium_desktop/commit/d96d8754060686a95533a845f10f01cdb8fc81c6)问题。现在我想手动应用该修复，但只重新编译该特定代码。所以：

1.  按照[说明](http://developer.appcelerator.com/doc/desktop/building)在本地下载所有内容。
2.  相应地修改了3个文件
3.  试图重新编译：

    ```
    cd titanium_desktop/modules/ti.Network
    scons 

    scons: *** No SConstruct file found.
    File "C:\Python25\Scripts\..\Lib\site-packages\scons-1.2.0\
    SCons\Script\Main.py", line 826, in _main 
    ```

我做错了什么，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:11:43.863

SConstruct 文件是主要的 SCons 构建脚本。没有它，SCons 不知道该怎么做。

我从您的命令中看到您正在尝试构建具有 SConscript 文件但没有 SConstruct 文件的子目录。在这种情况下，您需要告诉 SCons SConstruct 文件在哪里。最常见的方法如下：

```
# scons -u 
```

这告诉 SCons 向上遍历目录层次结构，直到找到 SConstruct 文件。

[您可以在此处](http://www.scons.org/doc/production/HTML/scons-man.html)找到更多 SCons 命令行选项。

# wpf - 如何检查 DataContext 是否存在于可视树的上方？

> ID：10627868
> 
> 赞同：2
> 
> 时间：2012-05-16T22:53:52.993
> 
> 标签：wpf, datacontext

我有一个用户控件（UC），有时在窗口中，有时在选项卡中，有时在子窗口中。当它在窗口中时，我将视图模型传递给窗口。在 UC 中，我想检查一个 datacontext 是否已经存在于 UC 的祖先中（不是特别是窗口，因为它不知道它是否在窗口或选项卡内），以便我可以实例化一个视图模型是不是。我该如何检查这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:58:33.803

如果为视觉祖先设置了 DataContext，则 UC 会继承它，因此您只需检查 UC 的 DataContext 是否为 null。

# fortran - f2py 和 WRITE 语句

> ID：10627869
> 
> 赞同：2
> 
> 时间：2012-05-16T22:54:16.367
> 
> 标签：fortran, f2py

我试过寻找这个答案，因为它看起来不太复杂，但我没有成功。我正在尝试使用一些旧的 FORTRAN 代码并将其带入 Python，以便我可以使用它。在此过程中，我遇到了一些文件 I/O 问题，我试图了解 f2py 如何处理这些问题。我正在使用 gfortran 开发 Ubuntu 11.10。例如，我试图使用以下子例程：

```
C     FILE INOUT.F

      SUBROUTINE INOUT
     i     (NAME, STUFF)

Cf2py Intent(in,out) NAME, STUFF

      CHARACTER*6 NAME, STUFF

      OPEN(unit=1,file=NAME)
      WRITE(1,100) STUFF
 100  FORMAT(A8) 

      RETURN
      END 
```

然后我使用 gfortran 和 f2py 进行编译：

```
f2py -c -m inout inout.f 
```

它创建了 inout.so 共享库。然后在 Python 中，我尝试了一个简单的测试：

```
python
>>> import inout
>>> inout.inout('test','hello')
('test', 'hello ') 
```

然后退出 Python 并打开新创建的“测试”文件，它是空的。我可以打印到屏幕没问题，但打印到文件似乎不起作用。任何指导将不胜感激。f2py 文档没有提到 WRITE 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:25:12.020

你可以[在这里](http://osdir.com/ml/python.scientific.user/2003-10/msg00034.html)看到，

> Python I/O 不会从 Fortran 捕获 I/O。

# synchronization - 同步框架 - 无法更新或删除主键表。只插入工作

> ID：10627870
> 
> 赞同：0
> 
> 时间：2012-05-16T22:54:18.873
> 
> 标签：synchronization, sync, microsoft-sync-framework

我正在尝试同步以下两个表。

在目标数据库中，ParentTable 无法更新或删除；但是，ChildTable 可以正确同步。

我错过了什么吗？预先感谢！

![在此处输入图像描述](../Images/a3527fb669cf05438e064bb3bd85c6f5.png)

```
DbSyncScopeDescription scopeDesc = new DbSyncScopeDescription("Name");

scopeDesc.Tables.Add(SqlSyncDescriptionBuilder.GetDescriptionForTable("ParentTable", sqlSourceConn));
scopeDesc.Tables.Add(SqlSyncDescriptionBuilder.GetDescriptionForTable("ChildTable", sqlSourceConn));

var sqlSourceProv = new SqlSyncScopeProvisioning(sqlSourceConn, scopeDesc);
sqlSourceProv.CommandTimeout = 3600;
if (!sqlSourceProv.ScopeExists("Name"))
   sqlSourceProv.Apply();

var sqlDestinationProv = new SqlSyncScopeProvisioning(sqlDestinationConn, scopeDesc);
sqlDestinationProv.CommandTimeout = 3600;
if (!sqlDestinationProv.ScopeExists("Name"))
   sqlDestinationProv.Apply();

var destinationProvider = new SqlSyncProvider("Name", sqlDestinationConn);

var sourceProvider = new SqlSyncProvider("Name", sqlSourceConn);

destinationProvider.MemoryDataCacheSize = MemorySize;
sourceProvider.MemoryDataCacheSize = MemorySize;

destinationProvider.ApplicationTransactionSize = BatchSize;

SyncOrchestrator orch = new SyncOrchestrator();
orch.RemoteProvider = destinationProvider;
orch.LocalProvider = sourceProvider;
orch.Direction = SyncDirectionOrder.Upload;

SyncOperationStatistics stats = orch.Synchronize(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:55:46.010

如果您有 FK 关系，则它必须在冲突期间引发错误（无法删除带有孩子的父母）...您可以通过订阅 ApplyChangeFailedEvent 来验证这一点。您可以设置冲突解决来解决问题。

# java - HTTPS 上 WCF 的 Java 客户端

> ID：10627872
> 
> 赞同：0
> 
> 时间：2012-05-16T22:54:31.870
> 
> 标签：java, wcf, iis, https, certificate

我不知道如何进行下一个场景。

我有一个 WCF 服务启动并运行，安全性如下：

```
<binding name="SSLBinding">
   <security mode="Transport">
     <transport clientCredentialType="None"/>
     <!--<message clientCredentialType="UserName"/>-->
   </security>
 </binding> 
```

我能够在 IIS 5.0 中制作一个虚拟证书，因此这个 WCF 可以在 HTTPS 上公开。

最后使用 .Net 客户端，我可以与服务进行通信，如下所示：

```
private void randomMethod
    {
        //This is necesary, cause the certificate isn´t valid
        ServicePointManager.ServerCertificateValidationCallback =
        new RemoteCertificateValidationCallback(IgnoreCertificateErrorHandler);            

            RefHTTPS.GestionesServiceClient service = new RefHTTPS.GestionesServiceClient();                

            richTextBox1.Text = service.version();                            
    }

    public static bool IgnoreCertificateErrorHandler(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        return true;
    } 
```

ISSUE：当我尝试在 Java 客户端上执行此操作时，出现异常。

有人已经能够做这样的事情，我需要一些指导。

我在网上阅读了很多帖子，但没有什么对我有用。

* * *

编辑（从 OP 的其他内容合并，作为问题发布并标记）：

这是完整的配置（它有一个配置标签，但没有显示）：

```
<?xml version="1.0"?>
<system.web>
    <compilation debug="true">          
    </compilation>              
</system.web>  

<system.serviceModel>
    <bindings> 
```

```
 <binding name="SSLBinding">
   <security mode="Transport">
     <transport clientCredentialType="None"/>
   </security>
 </binding> 
```

```
</bindings>
<serviceHostingEnvironment>
  <baseAddressPrefixFilters>
    <add prefix="https://x.x.x.x"/>
  </baseAddressPrefixFilters>
</serviceHostingEnvironment>

<services>
   <service behaviorConfiguration="WSGestiones.GestionesServiceBehavior" name="WSGestiones.GestionesService">
      <endpoint address="https://x.x.x.x/GestionesWS/GestionesService.svc"
         binding="basicHttpBinding" bindingConfiguration="SSLBinding" contract="WSGestiones.IGestionesService">            
        <identity>
          <dns value="localhost" />              
         </identity>
      </endpoint>
      <endpoint address="https://x.x.x.x/GestionesWS/GestionesService.svc/mex"
         binding="mexHttpsBinding" contract="IMetadataExchange">
         <identity>
            <dns value="IPADDRESS" />
         </identity>
      </endpoint>
   </service>      
</services>    

<behaviors>
  <serviceBehaviors>
    <behavior name="WSGestiones.GestionesServiceBehavior">
      <serviceMetadata httpsGetEnabled="true" httpsGetUrl="https://x.x.x.x/GestionesWS/GestionesService.svc" />
      <serviceDebug includeExceptionDetailInFaults="true" />          
    </behavior>        

   </serviceBehaviors>
</behaviors> 
```

我能够将证书添加到我的 PC 的受信任列表中，我还添加到了 JDK 或 Java 中的任何位置。

我的一些错误是：

```
Exception in thread "main" javax.xml.ws.WebServiceException: Cannot find 'https://x.x.x.x/GestionesWS/GestionesService.svc?wsdl' wsdl. Place the resource correctly in the classpath.

HTTP transport error: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target

Exception in thread "main" com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative names present

Exception in thread "main" com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl)

Exception in thread "main" com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.io.IOException: HTTPS hostname wrong:  should be <x.x.x.x>

Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: An error occurred when verifying security for the message.

Exception in thread "main" com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 401: Access Denied 
```

每次我遇到错误，在线搜索并“修复”时，都会出现一个新错误……在我“修复”的第 5 天，我说“这是一个无限循环”。

所以....而不是试图修复错误，我正在考虑“修复逻辑”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:56:19.040

我还尝试通过 Netbeans 连接到具有服务端点的自签名证书的服务器。当我试图创建一个新的连接对象时，我遇到了这个运行时异常：

```
javax.xml.ws.WebServiceException: java.io.IOException: HTTPS hostname wrong: should be <hostname as in the certificate> 
```

我终于在[Metro 的文档](http://metro.java.net/guide/ch12.html#ahicx)中找到了有关此异常的部分。不幸的是，他们提供的代码看起来只是一个临时解决方案，但至少看起来你可以解决这个问题。

我通过创建一个静态方法来修改他们提供的代码，该方法在我的主要方法顶部调用，我总是“验证”我为我的服务连接到的站点：

```
private static void overrideDefaultHostnameVerifier() {
    //WORKAROUND. TO BE REMOVED.
    javax.net.ssl.HttpsURLConnection.setDefaultHostnameVerifier(
            new javax.net.ssl.HostnameVerifier() {
                @Override
                public boolean verify(String hostname, javax.net.ssl.SSLSession sslSession) {
                    return true;
                }
            });
} 
```

这个问题的真正解决方案似乎是在托管服务端点的服务器上获得一个真正颁发的证书。

# ruby-on-rails - Mongoid 嵌入式键

> ID：10627876
> 
> 赞同：0
> 
> 时间：2012-05-16T22:55:31.633
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有一个`Tag`模型：

```
class Tag
  include Mongoid::Document

  embedded_in :taggable, :polymorphic => true

  key :title
  field :title, :type => String
end 
```

在此模型之前`embedded_in`，`key :title`强制 id 基于标题。由于某种原因，现在它被嵌入了，id 又回到了`4fb42e1f5d9a1e68f100000d`. 任何想法如何让密钥基于标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:33:32.153

我可以用你指定的键获得指定的 id，确切地说。也许您对未共享的封装模型有问题？以下适用于 Ruby 1.9.3、Rails 3.2.3、Mongoid 2.4.9。

```
class Item
  include Mongoid::Document

  embeds_many :tags, as: :taggable

  key :name
  field :name, :type => String
end 
```

测试/单元/tag_test.rb

```
require 'test_helper'

class TagTest < ActiveSupport::TestCase
  def setup
    Item.delete_all
    #Tag.delete_all
  end

  test "key title" do
    item = Item.create(name: 'book')
    assert_equal(1, Item.count)
    assert_equal('book', Item.where(name: 'book').first[:_id])
    tag = Tag.new(title: 'scifi')
    item.tags << tag
    assert_equal('scifi', Item.where(name: 'book').first.tags.first[:_id])
    puts Item.all.to_a.first.to_json
  end
end 
```

测试输出

```
Run options: --name=test_key_title

# Running tests:

{"_id":"book","name":"book","tags":[{"_id":"scifi","title":"scifi"}]}
.

Finished tests in 0.010775s, 92.8074 tests/s, 278.4223 assertions/s.

1 tests, 3 assertions, 0 failures, 0 errors, 0 skips 
```

# django - 在 django 模板 dictsort 中打破关系

> ID：10627884
> 
> 赞同：1
> 
> 时间：2012-05-16T22:57:00.387
> 
> 标签：django, django-templates

我有这样的模型：

```
class Subject(models.Model):
   sid = models.CharField(max_length=5)

class TimePoint(models.Model):
   tpid = models.CharField(max_length=3)
   subject = models.ForeignKey(Subject) 
```

我正在使用默认`ListView`值`queryset=TimePoint.objects.all()`。在我的模板中，我使用`{% for tp in timepoint_list|dictsort:"subject.sid" %}`. 引用同一主题的多个时间点的顺序`dictsort`出乎意料。

如何为引用同一主题的时间点实施“决胜局”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:29:32.213

首先尝试按 tpid 排序：

```
{% for tp in timepoint_list|dictsort:"tpid"|dictsort:"subject.sid" %} 
```

# c# - 比试错法更有效地优化多个变量的算法

> ID：10627886
> 
> 赞同：6
> 
> 时间：2012-05-16T22:57:09.530
> 
> 标签：c#, algorithm, optimization, multivariate-testing

谷歌在这方面的结果似乎需要比我熟悉的更高级的数学（而且我可能不比五年级学生聪明，但我不打算找出答案）。

我正在寻找一种解决多元优化问题的通用方法，最好是在 c# 中，而不必深入研究矩阵和特征向量以及正态分布。

假设我有数字变量***x**、**y**、**z***和***w****，*以及*f*这样的函数`w = f(x, y, z)`。我想最大化*w*，并且...

*   *`f`*未知
*   和/或之间的相互依赖关系*`x`（`y`**`z`*如果有的话）是未知的
*   在某些情况下，我只有事后数据集
*   在其他情况下，我可以根据需要*`x`改变`y`*和重新*`z`*采样*`w`*
*   在先验情况下，理想算法在 、 和 的试验排列最少的情况下最大化*，**`w`*并*`x`在`y`*每轮*`z`*采样后为每个排列选择下一个值

我对自变量有粗略的最小和最大界限。我当然不想对置换空间进行不必要的采样。我希望*该*算法至少具有检测最明显的相互依赖关系的粗略能力，例如，当*`x`*>时收益递减，或者当、和 和超过某个上限时的*`2y`*实际恶化等。*`w`**`x`**`y`**`z`*

我看过的大多数数学库都假设我知道如何在 Boigenfoodle Continuum 上执行量子 nergenflip 投影，而我只是不在那里。非数学家编码员如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:08:39.907

如果您不想陷入局部最小值，可以尝试模拟退火。

基本上，从一些 x,y,z 开始。从零均值分布（正态分布或高斯分布）随机生成 dx、dy 和 dz。如果 w(x+dx,y+dy,z+dz) > w(x,y,z) 则选择此新解决方案。否则选择它的概率 w(x+dx,y+dy,z+dz)/w(x,y,z)。

**Python代码**

```
def simAnneal( w, seed_x, numSteps=100000, sigma=0.01 ):
    optimal_x = [i for i in seed_x]
    optimal_w = w(optimal_x)

    cur_w = w(seed_x)

    for i in range(numSteps):
        new_x = [i+random.gauss(0, sigma) for i in seed_x]
        new_w = w(new_x)

        if (new_w > cur_w) or (random.random() > new_w / cur_w) :
            cur_x = new_x
            cur_w = new_w
            if cur_w > optimal_w:
                optimal_w = cur_w
                optimal_x = cur_x
    return optimal_x 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T23:07:16.470

如果您可以采样 f，则可以进行一些爬山。从任意位置 (x,y,z) 开始。在 (x,y,z) 和 (x+delta,y,z) 处采样 f。如果后者更好，请移到那里。如果没有，请尝试一些较小的增量。还可以尝试负增量，以及其他两个坐标上的增量。当没有增量让您增加 f 时，您已达到最大值。

请注意，这只会给您一个局部最大值，不一定是全局最大值。如果您的增量太小，它在数值上也非常不稳定。

如果您对 f 有所了解，例如它是 x,y,z 中的低次多项式，您可以做得更好。然后您可以对系数进行最小二乘拟合，然后通过将导数设置为零来最大化多项式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T05:10:15.533

看起来您可以从[http://www.dotnumerics.com/NumericalLibraries/Optimization/Default.aspx](http://www.dotnumerics.com/NumericalLibraries/Optimization/Default.aspx)获得 C# 的 Nelder-Mead Simplex 优化算法的实现。使用这种方法，您所要做的就是给它一些可以评估要在任意点优化的功能的东西。它不像需要导数的方法那样有效，实际上它在数学上甚至不如 Torczon Simplex 变体 - 但人们确实使用它，而且我找不到 C# 的免费 Torczon Simplex 实现。

# mysql - 创建通知数据库表的最佳实践

> ID：10627887
> 
> 赞同：5
> 
> 时间：2012-05-16T22:57:16.347
> 
> 标签：mysql, sql, ruby-on-rails, database, foreign-keys

我不知道如何最好地做到这一点，并希望社区能够对此有所了解（也许你有经验，或者有解决这个问题的创新方法！）。

我有一个应用程序，其中有用户、事件和组。我正在尝试制作一个通知表，该表将为用户存储他们被邀请参加活动、群组或与朋友联系的通知。不，我不是在建立 Facebook 哈哈。

通知应包含类似以下内容的消息：“您已被邀请加入 Syracuse Runners Club”，然后单击它以跳转到 Runners Club 组对象。

所以，到目前为止，我最好的猜测是有一个结构如下的表：

**通知**

```
id | status (unread/read) | message | reference_object_id | 
```

– 参考 object_id 指向外来对象的 id。但是，问题是我不知道外部 object_id 属于哪个表。

我的最终目标是以 JSON 形式提供，这样我就可以拥有以下内容：

```
{ 
  message:"You're invited blah blah", 
  status:"unread", 
  reference_object: {
    id:1,
    name:"Runners Club"
  }
} 
```

我正在使用 MySQL 和 Ruby on Rails。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:03:13.097

如果您使用 MySQL 添加另一列来指定外部对象表。

`id | status (unread/read) | message | reference_object_id | reference_object_table`

现在您可以在任何表中引用另一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:04:13.423

您可以为可以收到通知的每种类型的事物设置一列。或者您可以存储引用对象的“类型”

# c++ - 可以提升::any_cast (any&) 加速？

> ID：10627889
> 
> 赞同：2
> 
> 时间：2012-05-16T22:57:46.377
> 
> 标签：c++, performance, boost, typeid, boost-any

它看起来像调用`boost::any_cast<T>(any&)`一些昂贵的类型检查来确保强制转换是有效的。具体来说，它调用执行以下测试以确保强制转换是合法的：

std::strcmp(操作数->type().name(), typeid(ValueType).name()) == 0

如果强制转换是合法的，那么代码会执行一个 static_cast。

这对于调试模式似乎很有用，但对于生产代码来说却相当慢。有没有办法跳过strcmp？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:00:38.497

`boost::any`包括一组未记录的`ValueType * unsafe_any_cast(any * operand)`函数，它们可以为操作数执行您想要的`any*`操作。

您可以获取引用的地址来获得所需的内容，或者由于 Boost 是开源的，您可以修补一组这些函数模板来获取`any&`操作数。

然后只需制作一个在调试版本中使用安全版本和在发布版本中使用不安全版本的包装器。但是，我至少要进一步添加 - 调试包装器应该捕获为无效转换引发的异常并调用调试器或使程序崩溃，以便在调试模式下运行时不会以某种方式处理这些无效转换隐藏发布版本将具有未定义行为的事实。

另请记住，Boost 保留删除不安全版本的权利：

```
// Note: The "unsafe" versions of any_cast are not part of the
// public interface and may be removed at any time. 
```

因此，如果您决定使用这些功能（或打补丁`any.hpp`来扩展它们），您将承担一定程度的维护义务，这取决于您的代码可能交付给谁，这可能是可接受的，也可能是不可接受的。

# javascript - 如何使用 SimpleHTTPServer 强制列出目录？

> ID：10627898
> 
> 赞同：-1
> 
> 时间：2012-05-16T22:58:54.257
> 
> 标签：javascript, python

我`index.html`在运行 SimpleHTTPServer 的文件夹上有一个，但根据 URL GET 参数的值，我想显示一个目录列表。那可能吗？我试图使用 ajax 查询根目录，但它`index.html`默认返回。

我想一种可能的选择是重命名`index.html`为类似的名称`main.html`，并且永远不要使用 index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:25:21.440

您可以覆盖 do_GET() 并捕获您感兴趣的路径和参数，然后从那里做正确的事情。

# android - 如何将子项添加到自定义列表视图？

> ID：10627902
> 
> 赞同：0
> 
> 时间：2012-05-16T22:59:13.943
> 
> 标签：android, listview

我正在使用这样的自定义列表视图。如何将子项（收件箱）添加到列表项（来自）？

```
 for (int k = 0; k < fromb.length; ++k) {
        if(k==0)
        {
             frin = fromb[k]+"\n"+inboxb[k];
        }
        else
        {
              frin = frin + "##"+fromb[k]+"\n"+inboxb[k];
        }

    }

    frin1=frin.split("##");
    lView.setAdapter(new ArrayAdapter<String>(this,R.layout.single_choice, frin1));
    //lView.setAdapter(new ArrayAdapter<String>(this,R.layout.single_choice, inboxb));
    lView.setTextFilterEnabled(true);
    lView.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                 String s1=(String) ((TextView) view).getText();

                 for (int i=0;i<frin1.length;i++)
                 {
                     //Log.i("TextOnly2",bookmarkurlsb[i]);
                     if(frin1[i]==s1)
                     {  
                         String fromf=fromb[i];
                         String inboxf=inboxb[i];
                         Intent intent = new Intent(Inbox.this,Details.class);
                         intent.putExtra("from", fromf);
                         intent.putExtra("inbox", inboxf);
                         startActivity(intent);
                     }
                     else
                     {

                     }
                 }

                }
            }); 
```

布局：R.layout.single_choice

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/TextView15"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:textSize="17sp"
   android:gravity="center_vertical"
   android:paddingLeft="6dip"
   android:paddingTop="15dp"
   android:paddingBottom="15dp" 
   android:background="#444444"
   android:textColor="@color/list_color"
   android:minHeight="?android:attr/listPreferredItemHeight" 
```

/>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:28:27.413

您需要有一个 baseAdapter 对象，它将为您生成视图。

看看这个[链接](http://www.mkyong.com/android/android-listview-example/)。

您的问题最重要的部分是 baseAdapter 类下的 getView 函数。

# c - 如何将表示数字的 char 字符转换为 int 中的相同数字？

> ID：10627905
> 
> 赞同：1
> 
> 时间：2012-05-16T23:00:16.033
> 
> 标签：c

我想弄清楚如何转换一个字符数，比如说

```
char num = "1"; 
```

与整数相同的数字，所以

```
char num = "1"; would be converted to int numc = "1"; 
```

我能想到的唯一方法是手动执行一堆 if 语句，这似乎有点过分，所以我只是想知道是否有人知道更简单的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T23:02:10.670

在 C 中，字符实际上只是表示其字符值的数字，因此：

```
char ch = '1';
int num = ch - '0';

printf("ch=%c num=%d\n", ch, num); 
```

这利用了这样一个事实，即在所有常见的字符集中，字符值都是按顺序分配的`'0'`。`'9'`

还要注意，`char`值用*单*引号括起来，而多字符串用*双*引号括起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:02:19.710

解决您的问题的一个快速方法是从您的数字值中减去“0”，如下所示：

```
char num = '2';

int i = num - '0'; 
```

# performance - 在Unix中拆分文件

> ID：10627908
> 
> 赞同：3
> 
> 时间：2012-05-16T23:01:06.050
> 
> 标签：performance, unix, split, bigdata

只是想知道除了unix“split”之外，是否有更快的方法将文件拆分为N个块。

基本上我有大文件，我想将它们分成更小的块并并行操作每个块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:13:32.707

我假设您使用`split -b`的 CPU 效率将比按行拆分更高，但仍会读取整个输入文件并将其写入每个文件。如果这部分执行的串行性质`split`是您的瓶颈，您可以使用`dd`并行提取文件的块。每个并行进程都需要一个不同的`dd`命令。这是一个示例命令行（假设`the_input_file`是一个从中间提取一点的大文件）：

```
dd skip=400 count=1 if=the_input_file bs=512 of=_output 
```

要完成这项工作，您需要选择适当的`count`and值`bs`（上面的值非常小）。每个工作人员还需要选择不同的值，`skip`以便块不会重叠。但这是有效的；使用查找操作`dd`实现。`skip`

当然，这仍然不如以一种可以直接读取输入文件的指定块，与其他类似的消费者进程并行的方式实现数据消费者进程的效率。但我想如果你能做到这一点，你就不会问这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:05:36.313

鉴于这是一个操作系统实用程序，我倾向于认为它已针对最佳性能进行了优化。

您可以查看[此问题](https://stackoverflow.com/questions/10571376/how-can-i-split-large-files/10571386#10571386)（或执行`man -k split`or `man split`）来查找您可以使用的相关命令，而不是`split`.

如果您正在考虑用 C 语言实现自己的解决方案，那么我建议您针对自己的特定系统/环境和一些示例数据运行一些基准测试，并确定要使用的工具。

*注意*：如果您不打算经常这样做，那么考虑这么多可能不值得您花时间，只需继续使用一个工具来完成您需要它做的事情（在这种情况下`split`）

# python-3.x - 创建一个弹出菜单来调用自定义导出器（Blender 2.6 API）？

> ID：10627910
> 
> 赞同：3
> 
> 时间：2012-05-16T23:01:08.273
> 
> 标签：python-3.x, blender-2.61

我正在尝试使用 Blender 2.63 中的 python 脚本创建一个更友好的菜单来使用我创建的文件格式导出模型。

一直在检查 Blender 的 API 文档，还有模板示例，但还没有弄清楚如何实际调用我创建的导出器，它工作正常。

让我再描述一下这个问题；要导出，我必须转到文件->导出->选择所需格式->命名->按导出按钮。我想通过一个菜单来自动化这个过程（就像模板中提供的那个，ui_menu）；只需加载/运行脚本并选择导出，其余的应由脚本自己处理。假设混合文件是 MyCoolModel.blend，它将假定导出的文件将放置在同一位置，名称为 MyCoolMode，并附加正确的扩展名。

通过具有自定义菜单，该菜单位于一个文件中。不知道如何调用提供描述参数的导出器的过程，甚至不知道这是否可能。

另一方面，将导出器的代码移动到另一个模块（自定义菜单）可能更容易，添加一个按钮并调用一个执行所描述内容的函数，如果有人已经对此进行了编码，我只是为了获得反馈，然后重新- 使用导出模块。

最后，我想保留原始导出模块，以防艺术家需要更改导出过程的默认名称，或者只是因为他想手动进行......拥有两个版本，试图重新如果可能的话，使用 Export 将是最好的，真的没有重复代码;)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:04:49.560

我想做类似的事情，我发现它们唯一足够接近的是以下[Scripts/Cookbook/Interface:popup](http://wiki.blender.org/index.php/Dev:2.5/Py/Scripts/Cookbook/Code_snippets/Interface#A_popup_dialog)。当然，离导出菜单还很远，但希望它可以扩展更多。

# desire2learn - 使用 API 使课程在 D2L 中处于非活动状态

> ID：10627916
> 
> 赞同：1
> 
> 时间：2012-05-16T23:02:00.387
> 
> 标签：desire2learn

是否有可用于 D2L 的 REST Api 可用于使课程处于非活动状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:53:10.943

如果是现有课程，您可以使用 PUT 方法[更新当前课程](http://docs.valence.desire2learn.com/res/course.html#put--d2l-api-lp-%28D2LVERSION-version%29-courses-%28D2LID-orgUnitId%29)设置并将 IsActive 设置为 false。

```
PUT /d2l/api/lp/(D2LVERSION: version)/courses/(D2LID: orgUnitId) 
```

它需要以下 JSON 对象：

```
{
    "Name": "<string>",
    "Code": "<string>",
    "StartDate": "<string:UTCDateTime>|null",
    "EndDate": "<string:UTCDateTime>|null",
    "IsActive": "<boolean>"
} 
```

您可能希望首先检索课程提供信息，然后修改 IsActive 标志并发回完整的对象数据。

```
GET /d2l/api/lp/(D2LVERSION: version)/courses/(D2LID: orgUnitId) 
```

# regex - Perl 正则表达式替换仅更改每行的第一个字母

> ID：10627918
> 
> 赞同：0
> 
> 时间：2012-05-16T23:02:08.237
> 
> 标签：regex, perl, notepad++

我在做最简单的 Perl REGEX 时遇到了麻烦。它在 Notepad++ 中正常工作，但在 Perl 中不能正常工作。

```
open FILE, "Something.txt";
while (<FILE>) {
   s/./f/;
    print;
} 
```

然而，输出仅将每行的第一个字母更改为 F。当这个正则表达式明确表示将每个字符更改为 F！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T23:06:31.417

我有一段时间没有使用 perl，但是尝试一下`s/./f/g`（根据 Quentin 在评论中的说法，g 使它成为全局，而不是在第一场比赛后停止（谢谢））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:06:32.227

您需要添加`g`修饰符以使其全局化，否则它将在第一次匹配后停止。

```
s/./f/g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T23:08:20.897

请参阅以下示例代码：

文件：

```
$ cat /tmp/test
aaaa
bbbb
cccc 
```

Perl 代码（我使用`perlconsole`）

```
Perl> open FH, "<", "/tmp/test"
1

Perl> while (<FH>) { s/./f/g; print; }
ffff
ffff
ffff

Perl> close FH
1

Perl> 
```

替换中的**g修饰符表示所有出现，请参阅**[http://perldoc.perl.org/perlre.html#Modifiers](http://perldoc.perl.org/perlre.html#Modifiers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T23:07:05.223

您需要将其标记为全局更改：

```
open FILE, "Something.txt";
while (<FILE>) {
   s/./f/g;
    print;
}
CLOSE (FILE); 
```

# cakephp-2.1 - cakephp211 日期插入

> ID：10627920
> 
> 赞同：0
> 
> 时间：2012-05-16T23:02:16.747
> 
> 标签：cakephp-2.1

这是我的变量：

```
 <?php 
     //...
     $creat='2000-03-15'  ,from an input field.
     ?> 
```

这是我的插入代码：

```
 <?php 
     //...
       $this->Comment->updateAll(         
              array('Comment.c' => $creat ),
              array('Comment.id' => '3'  ));
     ?> 
```

当我想将它保存在具有日期字段类型而不是“2000-03-15”的表中时，我有“0000-00-00”？
为什么？
感谢您的评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:55:24.177

updateAll 函数不会转义您的输入。它也不会将您的数据用引号括起来。

在您的示例中，要正确转义您的 $creat 变量，我建议使用以下代码：

```
<?php
App::uses('Sanitize', 'Utility');
$Comment->updateAll(array(
    'Comment.c' => "'" . Sanitize::escape($creat) . "'"
), array(
    'Comment.id' => 3
)); 
```

我们用引号包裹日期，并通过 Sanitize::escape 传递它，以确保我们保护自己免受 SQL 注入。

# sql - WebSql 关于从 SUM 和 GROUP BY 获取结果的问题

> ID：10627922
> 
> 赞同：0
> 
> 时间：2012-05-16T23:02:22.227
> 
> 标签：sql, methods, web, group-by, sum

我正在开发一个基于互联网的软件来管理高尔夫联赛，并且想知道如何获得特定的结果。发布的代码已损坏。

我想发生的事情：

分数按团队编号保存到表格中 分数按团队编号相加 创建 HTML 元素，显示团队编号和总分

这是我所拥有的：

```
function CalculateScoresPage(){
    var db=openDatabase('RecordOfScores','1.0','Record of net scores', 2 * 1024 * 1024);

    db.transaction(function(tx) {

        tx.executeSql('SELECT SUM(points) FROM LeaguesMadeEasyTeams GROUP BY teamNumber', [], function(tx, results) {
            var len = results.rows.length;
            var i;
            console.log(results);
            for(i = 0; i < len; i++) {
                $("#teams").append("<div class=\"teamEntry\">Team: "
                                   + results + " " + results.rows.item(i).points 
                                   + "</div>");
                console.log(results);
            };
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T22:32:53.627

您只是错过了列的别名。你应该试试这个：

```
function CalculateScoresPage(){
var db=openDatabase('RecordOfScores','1.0','Record of net scores', 2 * 1024 * 1024);

db.transaction(function(tx) {

    tx.executeSql('SELECT SUM(points) as points FROM LeaguesMadeEasyTeams GROUP BY teamNumber', [], function(tx, results) {
        var len = results.rows.length;
        var i;
        console.log(results);
        for(i = 0; i < len; i++) {
            $("#teams").append("<div class=\"teamEntry\">Team: "
                               + results + " " + results.rows.item(i).points 
                               + "</div>");
            console.log(results);
        };
    });
}); 
```

}

# android - Android意图需要很长时间才能收到

> ID：10627923
> 
> 赞同：0
> 
> 时间：2012-05-16T23:02:27.077
> 
> 标签：android, android-intent, appwidgetprovider

在我的应用程序中，我正在发送更新 appWidget 的意图。问题是，从 logcat 我可以看到意图平均需要十秒钟才能被接收。

```
 05-16 18:12:54.070: DEBUG/PHCA_Variable(7580): Broadcast sent  
 05-16 18:12:54.080: INFO/ActivityManager(274): Starting: Intent { flg=0x10000000 cmp=com.skipmorrow.phca/.WidgetDialogResponseActivity (has extras) } from pid 7580    
 05-16 18:12:54.100: WARN/ActivityManager(274): Trying to launch com.skipmorrow.phca/.WidgetDialogResponseActivity  
 05-16 18:12:54.170: DEBUG/InputTransport(274): Input channel constructed: name='40832a98 com.skipmorrow.phca/com.skipmorrow.phca.WidgetDialogResponseActivity (server)', ashmemFd=299, receivePipeFd=311, sendPipeFd=310   
 05-16 18:12:54.170: DEBUG/InputTransport(274): Input channel constructed: name='40832a98 com.skipmorrow.phca/com.skipmorrow.phca.WidgetDialogResponseActivity (client)', ashmemFd=304, receivePipeFd=309, sendPipeFd=313   
 05-16 18:12:54.170: DEBUG/InputTransport(274): Input channel destroyed: name='40832a98 com.skipmorrow.phca/com.skipmorrow.phca.WidgetDialogResponseActivity (client)', ashmemFd=304, receivePipeFd=309, sendPipeFd=313 
 05-16 18:12:54.180: DEBUG/InputTransport(7580): Input channel constructed: name='40832a98 com.skipmorrow.phca/com.skipmorrow.phca.WidgetDialogResponseActivity (client)', ashmemFd=66, receivePipeFd=67, sendPipeFd=68 
 05-16 18:12:54.460: INFO/ActivityManager(274): Displayed com.skipmorrow.phca/.WidgetDialogResponseActivity: +362ms 
 05-16 18:12:56.140: INFO/InputDispatcher(274): Delivering key to current input target: action: 0, channel '40832a98 com.skipmorrow.phca/com.skipmorrow.phca.WidgetDialogResponseActivity (server)' 
 05-16 18:12:56.260: INFO/InputDispatcher(274): Delivering key to current input target: action: 1, channel '40832a98 com.skipmorrow.phca/com.skipmorrow.phca.WidgetDialogResponseActivity (server)' 
 05-16 18:12:56.390: DEBUG/InputTransport(7580): Input channel destroyed: name='40832a98 com.skipmorrow.phca/com.skipmorrow.phca.WidgetDialogResponseActivity (client)', ashmemFd=66, receivePipeFd=67, sendPipeFd=68   
 05-16 18:13:03.350: DEBUG/PHCA_PhcaAppWidgetProvider(7580): onReceive(); action = android.appwidget.action.APPWIDGET_UPDATE 
```

我看到的唯一看起来有点可疑的是活动正在开始的警告。为什么会有这样的警告？除此之外，一切似乎都很好。

发送意图的代码没什么特别的：

```
 Log.d(MY_DEBUG_TAG, "UpdateAppWidgets()");
    Intent i = new Intent();
    i.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
    ComponentName phcaWidget = new ComponentName(ctx, PhcaAppWidgetProvider.class);
    i.putExtra("appWidgetIds", AppWidgetManager.getInstance(ctx).getAppWidgetIds(phcaWidget));

    ctx.sendBroadcast(i);
    Log.d(MY_DEBUG_TAG, "Broadcast sent"); 
```

appWidgetProvider 中的 onReceive 也没什么特别的。Log 语句是第一个命令。

什么可能导致接收意图需要超过 10 秒的时间？

跳过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:23:25.157

如果您要向其发送意图的 Activity 尚不存在，则必须启动它。10 秒对于启动应用程序来说似乎很长，但并不疯狂。

在调试模式下，我的应用程序运行速度慢了 5 倍或更慢。如果您处于调试模式，则如果不处于调试模式，它可能会运行得更快。通常，对于连接到运行 eclipse IDE 的 PC 的设备，您可以在不处于调试模式时看到 logcat 消息。如果你能让它工作，你应该尝试以这种方式运行，看看它是否更快。还可以尝试在手机完全从 Eclipse 中拔出的情况下运行，很难判断它是否更快，但它可能会更快。

# java - 如何“取消排序”一个 JTable？

> ID：10627927
> 
> 赞同：4
> 
> 时间：2012-05-16T23:03:00.873
> 
> 标签：java, swing, sorting, jtable

我为 a 创建了`TableRowSorter`一个`JTable`，并且能够正确地对表格进行排序。但是有没有办法让表格在我排序之前恢复到原来的状态？我尝试单击表格标题，但似乎它仅按升序或降序对表格进行排序，并且不会将表格返回到排序之前的原始状态。是否可以*取消对表格进行排序*并将其恢复到原始状态？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T23:18:02.297

空`sortKeys`列表表示视图应该是未排序的。尝试以下操作以恢复原始行顺序：

```
table.getRowSorter().setSortKeys(null); 
```

[在RowSorter](http://docs.oracle.com/javase/6/docs/api/javax/swing/RowSorter.html#setSortKeys%28java.util.List%29)规范中阅读更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T23:10:54.903

*唯一*的方法是在触发“unsort”事件时保持原始状态并恢复它。

因此，您需要在列表或数组中维护可以恢复的原始行顺序。您还可以保留对原始`DefaultTableModel`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T21:08:21.907

table.setRowSorter(new TableRowSorter<>(table.getModel()));

如果没有清空排序键，这应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-05T14:02:48.357

我遇到了同样的问题，在排序并更改为空表后，**getColumClass从我的模型中抛出了****NullPointer**异常。我通过在清空我的桌子并再次启用分拣机之前禁用自动分拣机来解决这个问题。

 **```
this.mainTable.setAutoCreateRowSorter(false);
this.tableModel.removeAllElements();
this.mainTable.setAutoCreateRowSorter(true);
this.mainTable.repaint();
this.mainScrollPane.doLayout(); 
```**

# c# - 哈希密码算法问题

> ID：10627928
> 
> 赞同：0
> 
> 时间：2012-05-16T23:03:12.247
> 
> 标签：c#, mysql, hash

我是 C# wpf 编程的新手，但我正在尝试连接到 MySQL 数据库并散列我的密码。不幸的是，在我实现算法时，我在这段代码中遇到了错误：

```
byte[] plainTextWithSaltBytes = new byte[plainTextBytes.Length + saltBytes.Length];
salt.CopyTo(plainTextWithSaltBytes, 0);
plainText.CopyTo(plainTextWithSaltBytes, salt.Length); 
```

错误是：

```
Error: no overload for method 'Copy To' takes 2 arguments Exceptions: System.ArgumentNullException System.ArgumentOutOfRangeException
enter code here 
```

您是否知道导致此错误的原因以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:06:01.447

您需要复制`plainTextBytes`，而不是`plainText`：

```
 byte[] plainTextWithSaltBytes = new byte[plainTextBytes.Length + saltBytes.Length];
   salt.CopyTo(plainTextWithSaltBytes, 0);
   plainTextBytes.CopyTo(plainTextWithSaltBytes, salt.Length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T01:20:25.717

如果你需要做简单的哈希，这段代码可能会加密你的密码：

```
String GetEncryptedPassword (String prmUser, String prmPassword)
{
    // Concatenating the password and user name.
    String encryptedPassword = prmUserName + prmPassword;

    // Converting into the stream of bytes.
    Byte[] passInBytes = Encoding.UTF8.GetBytes(encryptedPassword);

    // Encrypting using SHA1 encryption algorithm.
    passInBytes = SHA1.Create().ComputeHash(passInBytes);

    // Formatting every byte into %03d to make a fixed length 60 string.
    return passInBytes.Aggregate(String.Empty, (pass, iter) => pass += String.Format("{0:000}", iter));
} 
```

这段代码会给你一个很好的 60 个字符的加密散列。但请记住，您无法从哈希中重新生成原始用户名和密码，因为这是一种单向算法。`System.Security.Cryptography`您可以使用的加密算法很少。

# java - 在每个线程之间分配数字范围

> ID：10627934
> 
> 赞同：3
> 
> 时间：2012-05-16T23:04:13.290
> 
> 标签：java, multithreading

配置文件

```
ThreadSize = 10
StartRange = 1
EndRange = 1000 
```

我在上面有一个配置文件，其中我有我想要使用的线程数，并且客户端实例能够使用从 1 到 1000 的 ID 范围，并假设客户端线程设置为 10，因此每个线程的 ID 范围为 100 （基本上通过将结束范围除以线程大小）它可以在不踩其他线程的情况下使用。所以我想要的是每个线程应该使用该范围内的 100 个 id 而不会踩到其他线程 - 例如

```
Thread1 will use 1 to 100 (id's)
// generate a random number between 1 to 100 and keep on printing values until it has generated all the random values between 1 to 100
Thread2 will use 101 to 200 (id's)
// generate a random number between 101 to 200 and keep on printing values until it has generated all the random values between 101 to 200
Thread3 will use 201 to 300 (id's)
// generate a random number between 201 to 300 and keep on printing values until it has generated all the random values between 201 to 300

-----
----
Thread10 will use 901 to 1000
// generate a random number between 901 to 1000 and keep on printing values until it has generated all the random values between 901 to 1000 
```

我知道如何编写多线程程序，但不知道应该如何划分各个线程之间的范围。

```
public static void main(String[] args) {

    for (int i = 1; i <= threadSize; i++) {
        new Thread(new ThreadTask(i)).start();
    }
}

class ThreadTask implements Runnable {
    private int id;

    public ThreadTask(int id) {
    this.id = id;
    }

    public synchronized void run() {

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T23:06:49.353

每个线程都有`N = (EndRange - StartRange + 1) / ThreadSize`数字。

线程号`i`获取 range `(StartRange + i*N) - (StartRange + i*N + N - 1)`。

在你的例子`N = (1000 - 1 + 1) / 10 = 100`中。

线程`i = 0`将获得范围`(1 + 0*100) - (1 + 0*100 + 100 - 1)`=`1 - 100`

线程`i = 1`将获得范围`(1 + 1*100) - (1 + 1*100 + 100 - 1)`=`101 - 200`

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-25T18:35:09.157

```
public class MyThread extends Thread {
    public static final int TOTAL_THREADS = 10;
    public static final int START_RANGE = 1;
    public static final int END_RANGE = 1000;
    public static final int N = (END_RANGE - START_RANGE + 1) / TOTAL_THREADS;
    int threadNo;
    static volatile int counter = 1;
    public final static Object obj = new Object();

    public MyThread(int threadNo) {
        this.threadNo = threadNo;
    }

    @Override
    public void run() {
        synchronized (obj) {
            while (counter <= 1000) {
                if (counter >= (START_RANGE + threadNo * N) && counter <= (START_RANGE + threadNo * N + N - 1)) {
                    System.out.println((this.threadNo + 1) + " prints " + counter++);
                    obj.notifyAll();
                } else {
                    try {
                        obj.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }
    }

    public static void main(String args[]) {
        for (int i = 0; i < TOTAL_THREADS; i++) {
            System.out.println("Call thread : " + (i + 1));
            MyThread th = new MyThread(i);
            th.start();
        }
    }
} 
```

# excel - 创建将excel行从单个工作表转换为新工作表的宏

> ID：10627939
> 
> 赞同：1
> 
> 时间：2012-05-16T23:05:12.477
> 
> 标签：excel, excel-2007, vba

我需要创建将 excel 行从单个工作表转换为新工作表的宏。

我有 3 行标题，后跟大量数据行。

我想将此表“部门”上的每一行放入自己的新表中（标题行除外）。在创建的每张新工作表上，我希望重复前 3 行（标题）并复制格式（如果可能），然后是“部门”工作表中的单个相应行。我还希望将新工作表命名为在 A 列中输入的值（即下例中的吸顶灯或壁灯）。

我没有宏观经验，所以我无法从以前的答案中获取代码并尝试将其应用于我的事业。谢谢您的帮助！

```
 A           B           C          D 
```

1.  部门模板//促销//快速链接//主横幅

2.  在哪里找到 // 内容槽 // 类别 // 属性

3.  空白 // 内容资产 // html // 主图

4.  吸顶灯 // 值 // 值 // 值

5.  壁灯 // 值 // 值 // 值

6.  落地灯 // 值 // 值 // 值

转换为同一工作簿中在 3 个标题行之后有一行的新工作表：

新表名为：天花板灯

```
 A           B           C          D 
```

1.  部门模板//促销//快速链接//主横幅

2.  在哪里找到 // 内容槽 // 类别 // 属性

3.  空白 // 内容资产 // html // 主图

4.  吸顶灯 // 值 // 值 // 值

新表名为：壁灯

```
 A           B           C          D 
```

1.  部门模板//促销//快速链接//主横幅

2.  在哪里找到 // 内容槽 // 类别 // 属性

3.  空白 // 内容资产 // html // 主图

4.  壁灯 // 值 // 值 // 值

这是我到目前为止的代码......

```
Sub Addsheets()
Dim cell As Range
Dim b As String
Dim e As String
Dim s As Integer
Sheets("Dept").Select
a = "a4"
e = Range(a).End(xlDown).Address 'get's address of the last used cell
 'loops through cells,creating new sheets and renaming them based on the cell value
For Each cell In Range(a, e)
    s = Sheets.Count
    Sheets.Add After:=Sheets(s)
    Sheets(s + 1).Name = cell.Value
Next cell

Application.CutCopyMode = True

Dim Counter As Long, i As Long

Counter = Sheets.Count
For i = 1 To Counter
    Sheets("Dept").Cells(1, 3).EntireRow.Copy
    Sheets(i).Cells(1, 3).PasteSpecial

Next i

Application.CutCopyMode = False
End Sub 
```

我可以根据代码顶部的 A 列中的单元格来创建和命名新工作表，但是当我尝试添加代码以将前三行（标题行）复制到这些新创建的工作表中的每一个时，我获取错误 9 下标超出范围：Sheets(i).Cells(1, 3).PasteSpecial。

不知道如何解决？另外，有没有办法保留标题格式（列宽）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:50:41.253

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()

    Dim ws As Worksheet, tmpSht As Worksheet
    Dim LastRow As Long, i As Long, j As Long

    '~~> Change Sheet1 to the sheet which has all the data
    Set ws = Sheets("Sheet1")

    With ws
        LastRow = .Range("A" & .Rows.Count).End(xlUp).Row

        If LastRow < 4 Then Exit Sub

        For i = 4 To LastRow
            If DoesSheetExist(.Range("A" & i).Value) Then
                Set tmpSht = Sheets(.Range("A" & i).Value)
            Else
                Sheets.Add After:=Sheets(Sheets.Count)
                Set tmpSht = ActiveSheet
                tmpSht.Name = .Range("A" & i).Value
            End If

            .Rows("1:3").Copy tmpSht.Rows(1)

            For j = 1 To 4
                tmpSht.Columns(j).ColumnWidth = .Columns(j).ColumnWidth
            Next j

            .Rows(i).Copy tmpSht.Rows(4)
        Next
    End With
End Sub

Function DoesSheetExist(Sht As String) As Boolean
    Dim ws As Worksheet

    On Error Resume Next
    Set ws = Sheets(ws)
    On Error GoTo 0

    If Not ws Is Nothing Then DoesSheetExist = True
End Function 
```

# java - 完成抓取资源后，JAXB 客户端未断开连接

> ID：10627942
> 
> 赞同：0
> 
> 时间：2012-05-16T23:05:45.287
> 
> 标签：java, rest, jaxb, client, jersey

我正在使用 Jersey 来简单地连接和获取 Web 资源，但完成后，客户端不会“断开连接”而只是挂起。

```
public String getResource() {
  Client client = Client.create(config);
  WebResource resource = client.resource(someURI);
  return resource.path("path").path("to").path("resource").accept(....).get(String.class);
} 
```

如果我从 main 调用此方法，它确实会返回正确的资源，但程序随后不会退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:21:58.003

如果您现在有待处理的回复并想释放您的资源，您应该使用`client.destroy()`.

# python - Django：manage.py ImportError，因为环境变量未定义

> ID：10627943
> 
> 赞同：1
> 
> 时间：2012-05-16T23:05:49.697
> 
> 标签：python, django

我刚刚使用 Mercurial 将一个 Django 项目克隆到我已经设置 Python 2.7 的 Windows 机器上。当我尝试运行`manage.py`（使用或不使用命令）时，出现以下错误：

```
Traceback (most recent call last):
  File "C:\Users\jes.000\Documents\project\manage.py", line 30, in <module>
    import django.core.servers.basehttp
  File "C:\Python27\lib\site-packages\django\core\servers\basehttp.py", line 26, in <module>
    from django.views import static
  File "C:\Python27\lib\site-packages\django\views\static.py", line 95, in <module>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "C:\Python27\lib\site-packages\django\utils\translation\__init__.py", line 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "C:\Python27\lib\site-packages\django\utils\translation\__init__.py", line 48, in __getattr__

    if settings.USE_I18N:
  File "C:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
    self._setup()
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." %ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

我知道 manage.py 应该设置该环境变量。我也明白我可能会收到此错误，因为该项目不在 python 路径中......但手动添加它似乎没有必要。manage.py 不应该也解决这个问题吗？

编辑：我刚刚测试过，发现它在 Linux 下做同样的事情。

编辑：这是一个有用的发现：*如果我通过 PIP 安装 Django，我只会收到此错误，如果我*在 Ubuntu 上安装 python-django 包，它工作正常。因此，debian 软件包正在做一些 PIP 没有做的事情。也许debian包设置了一些环境变量？我需要弄清楚这一点，因为我正在尝试在 Windows 上进行开发。

编辑：我想我找到了问题，但不是解决方案。在 Ubuntu 机器上工作，当我通过 PIP ( `pip install django`) 安装 Django 时，这个项目无法解决我给出的错误。如果我创建一个新项目 ( `django-admin startproject testproject`) 并尝试它可以工作，它包含`manage.py`在创建的文件夹中，另一个文件夹包含其他所有内容。像这样：

```
+-testproject
  +-manage.py
  +-testproject
    +-__init__.py
    +-etc. 
```

`apt-get install python-django`当我`django-admin startproject testproject`安装Debian 软件包（

```
+-testproject
  +-manage.py
  +-__init__.py
  +-etc. 
```

注意区别：PIP Django 包似乎将 manage.py 放在作为应用程序的 python 模块之外，而 Debian 包将 manage.py 放在模块中。我认为这是由于两个包属于不同版本的 Django，在它们之间改变了结构，因为这两个包以不同的方式执行此操作没有任何意义。

所以我的问题是我正在尝试开发的项目最初是使用 Debian 打包的版本生成的，而在我的 Windows 机器上，我正在尝试使用来自 pip 的 Django 版本。

问题是我不确定如何解决这个问题。天真地将 manage.py 向上移动一个目录，使其位于项目文件夹之上是行不通的，因为这个“debian-package 版本”manage.py 试图只是`import settings`，如果它与 settings.py 不在同一个文件夹中，则会失败。但是在 Django 的其他地方，似乎期望项目本身位于 //settings.py （如果使用 django-admin 的 pip 版本就是这种情况）而不是 /settings.py （就像如果使用 debian-package 版本的情况下）。

如果我查找它，Ubuntu 存储库中的版本是 1.3.1，而 PyPI 中的版本是 1.4。查看 1.4 的发行说明，嘿：

> 更新的默认项目布局和 manage.py 消除了先前版本的“魔力”。对于那些不喜欢新布局的人，您可以改用自定义项目和应用程序模板！

但是......不应该用 1.3 布局生成的项目仍然在 1.4 下工作......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:32:17.887

我不确定这是否在更新版本的 django 中发生了变化，但默认设置`manage.py`只是尝试导入`settings.py`文件并启动管理器。默认情况下，您应该将项目放在您的 PYTHONPATH 中，或者将 settings.py 放入您的 DJANGO_SETTINGS_MODULE 变量中。

您可以`manage.py`使用以下代码段将其修改为更智能：

**管理.py**

```
#!/usr/bin/env python
from django.core.management import execute_manager

...

import settings

import os
project = os.path.basename(os.path.dirname(__file__))
os.environ['DJANGO_SETTINGS_MODULE'] = '%s.settings' % project

if __name__ == "__main__":
    execute_manager(settings) 
```

现在您可以从任何位置运行 manage.py，因为它始终会明确设置 settings.py 文件的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T09:16:33.527

您可以将以下代码添加到文件**manage.py**中，如下所示：

```
from django.conf import settings  
settings.configure() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:10:49.030

这确实是由于 1.3 和 1.4 之间的默认布局不同。通常 Django 1.3 项目将在 1.4 下运行，所以这里发生了一些我不太明白的事情。我已经确定问题与平台无关。

我无法弄清楚确切的问题，但我确实找到了解决办法。那是：

1.  在 Django 1.4 下创建一个新项目并挖掘它的 manage.py 文件。更改项目名称后，此文件将用作 manage.py。我将其命名为“manage14.py”，以便将原始的 manage.py 留给使用 Django 1.3 的同事。
2.  将项目所在目录之上的目录添加到全局 PYTHONPATH。这不是一个理想的解决方案，但它允许未经修改的 Django 1.4 manage.py 加载项目，而无需将项目转换为 Django 1.4 的组织。

一旦实用，我计划将项目转换为 Django 1.4 格式，因为无论如何它似乎更好，特别是从避免此类问题的角度来看。不幸的是，我必须等到 Ubuntu 存储库获得 1.4，这样我的同事才能使用 PyPI 在 Windows 上使用相同的版本。

# mysql - MySQL 集群传播

> ID：10627947
> 
> 赞同：3
> 
> 时间：2012-05-16T23:06:04.437
> 
> 标签：mysql, cluster-computing

我按照指南在 Ubuntu 上创建了一个 MySQL 集群：http: [//bieg.wordpress.com/2008/08/03/mysql-clustering-ubuntu/](http://bieg.wordpress.com/2008/08/03/mysql-clustering-ubuntu/)

我正确初始化节点（具有 MGM 和 NDB 的节点，以及其他 NDB 节点）`ndb_mgm> show;`返回：

```
Connected to Management Server at: 10.168.222.24:1186
Cluster Configuration
---------------------
[ndbd(NDB)] 2 node(s)
id=2    @10.168.222.24  (mysql-5.1.51 ndb-7.1.9, Nodegroup: 0)
id=3    @10.160.91.224  (mysql-5.1.51 ndb-7.1.9, Nodegroup: 0, Master)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @10.168.222.24  (mysql-5.1.51 ndb-7.1.9)

[mysqld(API)]   1 node(s)
id=4    @10.168.222.24  (mysql-5.1.51 ndb-7.1.9) 
```

但是，当我去测试集群时，我在两个节点上都创建了一个数据库，但是我在一个节点中创建的表不会传播到另一个节点，内容也不会传播。

可能是什么问题呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:48:23.567

默认情况下，在 MySQL 5.1 中，表是使用 MyISAM 存储引擎创建的（在 MySQL 5.5 中默认更改为 InnoDB）。使用 ndb/cluster 以外的任何存储创建的任何表对于单个 MySQL 服务器都是本地的。

要将数据存储在数据节点中并因此通过集群中的所有 MySQL 服务器可见，您需要指定将 NDB 用作存储引擎。例如，在创建表时...

CREATE TABLE simples (id INT NOT NULL PRIMARY KEY) ENGINE=ndb;

或迁移现有表...

ALTER TABLE 简化 ENGINE=ndb;

在您的情况下，ndb_mgm 的输出显示您只有一个 MySQL 服务器，您应该编辑 config.ini 文件以定义更多 [mysqld] 插槽，然后启动其他 mysqld 进程。

为什么你认为数据只存储在一个数据节点中？如果您使用 engine=ndb 创建它，那么我很确定它在两者中都有。

请注意，您关注的博客文章确实已过时（例如，您不能使用通过“apt-get install mysql-server”获得的 MySQL 服务器，而应该使用集群中包含的那个来自[https://www.mysql.com/downloads/cluster/的包](https://www.mysql.com/downloads/cluster/)

下载并使用 MySQL Cluster 7.2 而不是 7.1。

可以在[http://www.clusterdb.com/mysql-cluster/deploying-mysql-cluster-over-multiple-hosts/中找到更多最新的指令集](http://www.clusterdb.com/mysql-cluster/deploying-mysql-cluster-over-multiple-hosts/)

# c# - 使用更改的元素保存回 XML 文件

> ID：10627959
> 
> 赞同：2
> 
> 时间：2012-05-16T23:07:49.557
> 
> 标签：c#, linq

我的 XML 为：

```
<CONFIGURATION NAME="HDD"> 
<DECLARATION NAME="1ST_HDD_SATA">   
 <INSTANCE>     
  <PROPERTY  NAME="ControllerPosition" CHECKPOSITION="true">
   <INDEX>
    <VALUE>0</VALUE>
    <VALUE STEP="1">Std.flg</VALUE>
    <VALUE STEP="2">Sas.flg</VALUE>
    <VALUE STEP="-1">eS.flg</VALUE>`
  <CONFIGURATION NAME="HDD"> 
  <DECLARATION NAME="1ST_HDD_SATA">   
   <INSTANCE>     
   <PROPERTY NAME="ControllerPosition"  CHECKPOSITION="true">      
  <INDEX>         
  <VALUE>0</VALUE>         
  <VALUE STEP="1">Std_Ctrl.flg</VALUE> 
  <VALUE STEP="2">Sas_Card.flg</VALUE>        
  <VALUE STEP="-1">eSAS1.flg</VALUE>
  </INDEX>
  <INDEX>
  <VALUE>0</VALUE>
  </INDEX>
  </PROPERTY>   
 </INSTANCE> 
</DECLARATION> 
</CONFIGURATION> 
```

使用 LINQ 获取值并在文本框中显示所有元素，仅显示 VALUE 元素。

```
var hdd= from n1 in x.Elements("DECLARATION") where 1.Attribute("NAME").Value.Trim() == "1ST_HDD_SATA_Position" select n1.Elements("INSTANCE").Elements("PROPERTY").Elements("INDEX").Elements("VALUE"); 
```

然后更新了文本框以包含 VALUE 元素的新值。例如，假设我将其更新为某个字符串。

```
 foreach (IEnumerable<XElement> elList in hdd)
  foreach (XElement el in elList)
  {

    el.ReplaceNodes("string");
    el.Save(m);
  } 
```

这不是假设用更新保存我的 xml 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:48:21.117

您的代码存在许多问题，首先是您发布了无效的 XML。假设您的 XML 是这样的：

```
<CONFIGURATION NAME="HDD">
  <DECLARATION NAME="1ST_HDD_SATA">
    <INSTANCE>
      <PROPERTY  NAME="ControllerPosition" CHECKPOSITION="true">
        <INDEX>
          <VALUE>0</VALUE>
          <VALUE STEP="1">Std.flg</VALUE>
          <VALUE STEP="2">Sas.flg</VALUE>
          <VALUE STEP="-1">eS.flg</VALUE>
        </INDEX>
      </PROPERTY>
    </INSTANCE>
  </DECLARATION>
</CONFIGURATION> 
```

然后下面的代码工作：

```
var doc = XDocument.Load("Configuration.xml");

var hdd = from n1 in doc.Elements("CONFIGURATION").Elements("DECLARATION")
          let nameAttribute = n1.Attribute("NAME")
          where nameAttribute != null && nameAttribute.Value.Trim() == "1ST_HDD_SATA"
          select n1.Elements("INSTANCE")
                   .Elements("PROPERTY")
                   .Elements("INDEX")
                   .Elements("VALUE");
foreach (var elList in hdd)
    foreach (var el in elList)
    {
        el.ReplaceNodes("string");
    }

doc.Save("Configuration.xml"); 
```

# android - Android 备份/恢复数据分区

> ID：10627961
> 
> 赞同：2
> 
> 时间：2012-05-16T23:07:55.847
> 
> 标签：android

我正在尝试为 android 设备备份和恢复整个数据分区。该设备没有恢复应用程序（例如 cwm），并且需要通过单击我编写的应用程序进行恢复。过去，我通过与 CWM 通信来进行数据分区恢复来实现此功能，但我现在没有此选项。

当然寻找建议，但也有以下想法：

```
dd if=/dev/mtd/mtd5 of=/sdcard/data.img bs=4096 
```

然后恢复

```
dd if=/sdcard/data.img of=/dev/mtd/mtd5 bs=4096 
```

无论是这个还是通过使用 cat xxx >> yyy

但是，我不确定如果我在系统运行时尝试写入数据分区会发生什么。我在想我会写它然后重新启动..希望最好？

谢谢！

编辑：怎么样：

```
cat /dev/mtd/mtd5 >> /sdcard/data.img
flash_image userdata /sdcard/data.img 
```

# ios - Xcode：可以在设计师的控件上附加用户定义的属性吗？

> ID：10627963
> 
> 赞同：2
> 
> 时间：2012-05-16T23:08:14.290
> 
> 标签：ios, xcode

我想将任意属性附加到在编辑器中创建的 UIKit 控件。这可能吗？当我尝试时，我得到了臭名昭著的错误：

```
NSUnknownKeyException: [<UISwitch 0x9d79140> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key hello. 
```

这让我说不，但如果可能的话，它真的会清理一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:42:58.627

我会尝试以下方法之一：

*   子类化 UIKit 类，覆盖`setValue:forUndefinedKey:`或`setValue:forKey:`
*   在 UIControl 上创建一个类别以重新实现`setValue:forUndefinedKey:`

# c - 使用 strcpy 更新结构中的 char[] 字段。C中的指针问题

> ID：10627968
> 
> 赞同：0
> 
> 时间：2012-05-16T23:09:19.963
> 
> 标签：c

我想知道如何使用文件中的标记化行设置结构的字符串值。基本上我正在读一行`"Person 100 100"`（由 分隔`\t`），我需要用返回的内容设置结构的字符串值。

错误信息：

```
||In function 'main':|
|32|warning: passing argument 1 of 'strcpy' from incompatible pointer type|
c:\program files (x86)\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\..\..\..\..\include\string.h|45|note: expected 'char *' but argument is of type 'char **'|
||=== Build finished: 0 errors, 1 warnings ===| 
```

代码片段：

```
char buffer[20];
fgets(buffer, 20, file);

while (*buffer != EOF)
{
    struct student temp;
    char *result = NULL;
    //set name
    strcpy(temp.name,strtok(buffer,"\t"));
    //set midterm
    result = strtok(NULL, "\t");
    temp.midterm = atoi(result);
    //set final
    result = strtok(NULL, "\t");
    temp.final = atoi(result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:24:21.270

strcpy 函数定义如下：

```
char *strcpy(char *restrict s1, const char *restrict s2); 
```

不知道student结构，所以可能第一个参数传参错误。下面的代码是可以的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct student
{
    char name[128];
    int midterm;
    int final;
};

char buffer[] = {"Person    100 100"};
//fgets(buffer, 20, file);

int main()
{
    //while (*buffer != EOF)
    {
        struct student temp;
        char *result = NULL;
        //set name
        strcpy(temp.name,strtok(buffer,"\t"));
        //set midterm
        result = strtok(NULL, "\t");
        temp.midterm = atoi(result);
        //set final
        result = strtok(NULL, "\t");
        temp.final = atoi(result);
        printf("name = %s, midterm = %d, final = %d\n", temp.name, temp.midterm, temp.final);
    }

    return 0;
} 
```

# c# - 带有参数数组的通用 C# 方法重载解析

> ID：10627971
> 
> 赞同：1
> 
> 时间：2012-05-16T23:09:40.220
> 
> 标签：c#, generics, overloading

在下面的代码中，我定义了两个名为`Bar`. 在`Foo()`中，我对 进行了三次调用`Bar`，并在第三次调用时出错。

前两个解决了预期的重载。然而，第三个产生了以下错误：

`The type 'string' cannot be used as type parameter 'T' in the generic type or method 'Bar<T>(T, string, params object[])'. There is no implicit reference conversion from 'string' to 'System.Exception'.`

显然，第三个调用绑定到“Bar()”，但未能将第一个参数转换为异常。同样清楚的是，第二个参数是一个字符串，它正在抛出编译器。当它不是字符串时（案例 2），分辨率很好。但是（对我来说）失败的行应该绑定到“Bar（）”似乎很明显（因为第一个参数明确地是一个字符串）。

谁能解释为什么编译器使用这个绑定？我会考虑创造性的解决方法，但我真正想要的是解释为什么会发生这种情况。我花了一些时间研究 C# 语言规范，但未能找到（即放弃）明确的答案。显然，我可以重命名其中一种`Bar`方法，或提供命名参数，或标记其中一个参数`ref`……但这些都不适合我的特定场景。

并不是说它是相关的，但我已经编写了完全执行此操作的 Java 代码，并且编译器没有问题。

编码：

```
public void Bar(string s, params object[] ps) { } // Call this "Bar()"
public void Bar<E>(E e, string s, params object[] ps) where E : Exception { } // Call this "Bar<T>()"

public void Foo()
{
    Exception e;
    Object o1, o2;

    Bar(e, "fmt {0}", o); // Resolves fine, as expected
    Bar("fmt {0} {2}", o1, o2); // Also resolves as expected
    Bar("fmt {0} {2}", "bar", o1); // Error!
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T23:19:20.390

答案是重载匹配不考虑约束。至于这在 C# 规范中，我不完全确定。匹配总是使用最具体的选项和字符串，因为泛型`T`总是比字符串更具体`Object`（因为它匹配实际类型而不是子类型）。请参阅Eric Lippert 博客上[的约束不是签名的一部分。](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)

为了使这项工作，如果需要异常约束，`void Bar(Exception E, ...)`请尽可能使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T23:16:09.303

`Bar("fmt {0} {2}", "bar", o1);`// 错误！通过特异性优先级，它查找第二个参数是字符串（字符串比对象更具体）的方法签名，然后尝试解析类型参数，但它不能。为了说明这一点，尝试将第三个调用替换为：

```
Bar("fmt {0} {2}", (object)"bar", o1); // Now it is fine for compiler! 
```

# android - 获取Android中覆盖标记对应的纬度/经度

> ID：10627976
> 
> 赞同：0
> 
> 时间：2012-05-16T23:10:17.067
> 
> 标签：android, google-maps

我在 Android 上使用 Google 地图，并且在我的 MapView 中有一个标记作为叠加层。我的问题是，如何获得与我的标记在地图上的位置相对应的纬度/经度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:22:04.650

我刚刚添加了一个类级变量，并使用它来跟踪标记位置的变化，并在我想要该值时查询它。如果有人有更好的答案，请发布；否则我假设这是最好的方法。

# javascript - 如何在一个 Javascript 对象中存储多个数据表？

> ID：10627979
> 
> 赞同：0
> 
> 时间：2012-05-16T23:11:04.737
> 
> 标签：javascript, jquery, html, arrays

我正在使用 jQuery，但我不确定仅使用 Javascript 是否更容易。变量将相当大，充满数据（几兆字节）。

这将是：

```
table one -> {item one, item 2, item 3, item 4},
table two -> {item one, item 2, item 3, item 4},
table three -> {item one, item 2, item 3, item 4},
etc 
```

不过，我不确定需要什么代码才能将其转换为这种格式。

我基本上是从许多 html 表中读取的，这些表在每个表中都有数据行和列，并且我想将所有内容组合成一个变量，以便在完成后在屏幕的末尾打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:23:01.527

使用 JSON 你应该有这样的东西：

```
data = { 
    table1:{
        row1: { data1: value, data2: value, ..., dataN: value },
        row2: { data1: value, data2: value, ..., dataN: value },
        ...
        rowN: { data1: value, data2: value, ..., dataN: value }
    },
    table2:{
        row1: { data1: value, data2: value, ..., dataN: value },
        row2: { data1: value, data2: value, ..., dataN: value },
        ...
        rowN: { data1: value, data2: value, ..., dataN: value }
    },
    ...
    tableN:{
        row1: { data1: value, data2: value, ..., dataN: value },
        row2: { data1: value, data2: value, ..., dataN: value },
        ...
        rowN: { data1: value, data2: value, ..., dataN: value }
    }
} 
```

而且，要访问第 N 个表的第一行的第二列，您将拥有：

```
var value = data.tableN.row1.data2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:52:04.383

您绝对必须将所有数据存储在一个变量中吗？如果没有，您可以使用以下内容直接从您的表格中打印：

```
$('table').each(function() {
    $(this).each(function() {
        $(this).each(function() {
          console.log($(this).text());           
        });
    });
}); 
```

# haskell - 通过并发提高模拟性能

> ID：10627980
> 
> 赞同：4
> 
> 时间：2012-05-16T23:11:11.827
> 
> 标签：haskell, random, concurrency, simulation

考虑在一个包含`Doubles`. 只要我愿意，请执行以下操作：

1.  从结构中随机选择两个不同的列表
2.  根据这些列表计算统计数据
3.  根据该统计数据掷硬币
4.  可能根据抛硬币的结果修改其中一个列表

目标是最终实现收敛，因此“解决方案”在迭代次数上是线性的。可以在[此处](https://stackoverflow.com/questions/10593435/controlling-memory-allocation-gc-in-a-simulation)的 SO 问题中看到此过程的实现，这是一个直观的可视化：

![顺序可见](../Images/6fe94f52690de159d24694bc950c553a.png)

似乎可以更好地执行此过程 - 也就是说，可以更快地实现收敛 - 通过使用多个在单独的 OS 线程上同时执行的工作人员，例如：

![并发可见](../Images/3b357e14bb9ad8adbfe5fa21f52ab43b.png)

我想一个完美实现的实现应该能够在*O(n/P)*时间内实现解决方案，因为*P*是可用计算资源的数量。

阅读 Haskell 并发让我头晕目眩，诸如、、、、等等之类的术语。`MVar`似乎很清楚的是，这个过程的并发实现看起来与[我上面链接的](http://hpaste.org/68532)完全不同。但是，该过程本身似乎本质上是一个相当驯服的算法，它本质上是一个内存数据库，我敢肯定有人以前遇到过这个问题。`TVar``TChan``acid-state`

我猜我将不得不使用某种支持体面随机访问（即*随机*空闲元素）和修改的可变并发数据结构。当我尝试将这可能需要的所有东西拼凑起来以提高性能时，我有点迷失了（例如，STM 似乎很可疑）。

如果目标是提高顺序实现的性能，哪些数据结构、并发概念等适合此类任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T23:16:07.447

把事情简单化：

*   [forkIO](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent.html#v%3aforkIO)用于轻量级、超便宜的线程。
*   [MVar](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent-MVar.html)，用于快速、线程安全的共享内存。
*   和适当的序列类型（可能是[vector](http://hackage.haskell.org/package/vector)，如果你只在前面添加，可能是列表）
*   一个好的[统计](http://hackage.haskell.org/package/statistics)包
*   和一个快速的随机数源（例如[mersenne](http://hackage.haskell.org/package/mersenne-random-pure64) -random-pure64）

你可以稍后尝试更高级的东西。对于原始性能，首先要保持简单：保持锁定的数量（例如，每个缓冲区一个）；确保编译您的代码并使用线程运行时 ( `ghc -O2`)，您应该有一个良好的开端。

RWH 有一章介绍并发 Haskell[的基础知识。](http://book.realworldhaskell.org/read/concurrent-and-multicore-programming.html)

# java - 如何在不同的字符串之间共享子字符串？

> ID：10627981
> 
> 赞同：1
> 
> 时间：2012-05-16T23:11:23.457
> 
> 标签：java, string

我需要读取一个字符串数组，其中每个字符串由两个子字符串组成：这些子字符串中的第一个对于数组的所有字符串都是相同的。读取这个数组的方法提供了一个`ArrayList<CharSequence>`参数，所以我需要一个 CharSequence，您可以在其中设置对公共子字符串的引用，当然还有变量子序列，方式如下：

```
public class MyCharSequence implements CharSequence {

    public MyCharSequence(CharSequence common, CharSequence append) {
        // ...
    }

    // other CharSequence method
    // ...
} 
```

实现非常简单，但我想知道是否已经有一个类允许做这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T21:11:41.023

这是一种称为*绳索*的通用数据结构的特殊情况，它在链表或树中排列数组的段（字符或其他）。目标通常是加速数组/字符串中间的插入或删除，或者以最少的复制支持无损操作，但您可以通过共享包含您感兴趣的共享子字符串的列表/树元素来使用它来节省内存。 [本文](http://www.ibm.com/developerworks/library/j-ropes/index.html)首先简要概述了绳索，尽管它更关注高效的更新操作而不是子字符串共享。

Java 标准库不包含绳索实现，但很容易编写自己的库或尝试使用本文中描述的现有库。图书馆推荐在 Stack Overflow 上是题外话，所以我不能提供更多的指导。

# php - SimpleXML：用于多级 XML 文件的 XML 到 CSV

> ID：10627984
> 
> 赞同：2
> 
> 时间：2012-05-16T23:11:38.223
> 
> 标签：php, xml, xml-parsing, simplexml

我有一个多级 XML 文件，我正在尝试使用 SimpleXML 将其转换为 CSV。该文件看起来像这样：

```
 <Products>
        <Product>
            <StyleCode>Product Number 1</StyleCode>
            <Name>Name of Product 1</Name>
            <Description>Product 1 Is Great</Description>
            <Categories>
                <Category>SS-TEES</Category>
            </Categories>
            <Items>
                <Item>
                    <Code>1111122223333444</Code>
                    <Barcode>1111122223333444</Barcode>
                    <Size>2XL</Size>
                    <ShortColour>BLK</ShortColour>
                    <Colour>BLACK</Colour>
                    <Price>39.95</Price>
                    <StockOnHand>6</StockOnHand>
                </Item>
                <Item>
                    <Code>0000001427002001</Code>
                    <Barcode>0000001427002001</Barcode>
                    <Size>M</Size>
                    <ShortColour>BLK</ShortColour>
                    <Colour>BLACK</Colour>
                    <Price>39.95</Price>
                    <PriceSpecial>0</PriceSpecial>
                    <StockOnHand>2</StockOnHand>
                </Item>
            </Items>
       </Product>
       <Product>
        .......
       </Product>
</Products> 
```

我无法将其转换为 CSV。我在简单的 1 级 XML 文件上取得了成功，但这证明有些麻烦。

每个项目都应该在 CSV 中有自己的行，其中包含来自其父产品的信息。

所以 CSV 的第一行是

```
Product Number 1, Name of Product 1, Product 1 Is Great, SS-TEES, 111222333, 111222333, 2XL, BLK, Black, 39.95, 6 
```

第 2 行将是

```
Product Number 1, Name of Product 1, Product 1 Is Great, SS-TEES, 00000142, 00001427, M, Blk, Black, 39.95, 2 
```

等等。

我在想我需要将产品的第一个孩子存储在一个变量（样式代码、名称、描述等）中，然后在有一个项目时，打印第一个孩子变量，然后是项目，但我不太确定如何去做吧。

整个文档的结构是一致的，但是有空白字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:33:59.970

试试这个：

```
<pre><?php
$sx = simplexml_load_file("test.xml");
$new_items = array();
foreach($sx->Product as $product){  
    foreach($product->Items->Item as $item){
        array_push($new_items,array(
            "stylecode" => (string)$product->StyleCode,
            "name" => (string)$product->Name,           
            "description" => (string)$product->Description,
            "categories" => (string)(is_array($product->Categories))?implode("|",$product->Categories):(string)$product->Categories->Category,
            "code" => (string)$item->Code,          
            "barcode" => (string)$item->Barcode,            
            "size" => (string)$item->Size,          
            "shortcolor" => (string)$item->ShortColour,         
            "color" => (string)$item->Colour,           
            "price" => (string)$item->Price,            
            "stockonhand" => (string)$item->StockOnHand         
        ));     
    }
}

array_walk($new_items,function($element,$key)use(&$new_items){
    $new_items[$key]="`".implode("`,`",$element);
});

print_r($new_items); 
```

# ios - 显示证书详细信息？

> ID：10627987
> 
> 赞同：7
> 
> 时间：2012-05-16T23:12:04.773
> 
> 标签：ios, nsurlconnection, ssl-certificate

当 Safari 看到不正确的证书时，它会为用户提供取消、接受或显示证书详细信息的机会。我想在我的 iOS 应用中复制这种行为。

说真的，我对**服务器**端不感兴趣，只是在**客户**端处理证书细节。

![证书即时](../Images/2dab22fce6f0093a5574ade3db70356b.png)

我可以得到这样的提示。我已经编写了代码来处理 Safari 中的“**取消**”和“**继续**”按钮，但我不知道如何调用“**详细信息**”屏幕。仅编写我自己的类似屏幕似乎太复杂了。

![证书详情](../Images/e773d3e749fec10acee5fd5788d458f2.png)

这个屏幕在 Apple 的某个框架中是否可用，还是我会被困在从头开始实现它？

# c# - 由于 System.Web.Mvc 不包含 html 命名空间，MVC 应用程序崩溃

> ID：10627988
> 
> 赞同：7
> 
> 时间：2012-05-16T23:12:16.713
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T09:21:20.013

您还需要将**DLL**引用设置为本地复制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T06:59:19.613

尝试将 System.Web.Mvc 命名空间添加到编译部分的程序集列表中

```
<compilation debug="true">
    <assemblies>
       <add assembly="System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </assemblies>
</compilation> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T01:56:47.833

不知道为什么会这样，但是您可以尝试将对此 dll **System.Web.Mvc.dll**的引用明确添加到您的项目中。System.Web.Mvc.Html 仅驻留在此程序集中。

# linux - 如何在 Iterm 中插入制表符？

> ID：10627989
> 
> 赞同：17
> 
> 时间：2012-05-16T23:12:31.427
> 
> 标签：linux, bash, terminal, iterm

简单地说，我知道你可以做`ctrl`++在`v`bash`tab`语句中插入一个物理上真实的制表符。但是我如何为 iTerm 做同样的事情呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-18T17:50:03.017

答案是按 control+v，然后按 tab，而不是一起！希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:25:55.630

影响插入选项卡方式的不是 iTerm，而是您的 shell。

首先，确保您在 BASH shell 中：键入以下命令：

```
$ echo $RANDOM $BASH_VERSINFO
23714 3 
```

第一个是随机数，第二个应该是 BASH 版本号。如果您得到一个空行或只是一个随机数，那么您不在 BASH shell 中，这可能是您的问题之一。

另一件事是执行此命令：

```
$ set -o
allexport       off
braceexpand     on
emacs           on
errexit         off
errtrace        off
[...]
privileged      off
verbose         off
vi              off
trace           off 
```

感兴趣的两行是*emacs*和*vi*行。其中之一应该*打开*。如果它们都关闭，则无法使用*Ctrl-V-Tab*插入制表符。

当`vi`模式打开时，它应该是*Ctrl-V-Tab*就像你说的那样。开启`emacs`模式后，它可以是*Ctrl-V-tab*，也可能是*Ctrl-Q-tab*。

然而，这不是一`iTerm`件事，这是你的外壳在做这件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:23:18.970

如果“物理上真正的制表符”是指将制表符[十六进制代码](http://www.pcguide.com/res/tablesASCII-c.html)(0x09) 发送到外壳，那么您可以在 iTerm 中通过按 Ctrl + Tab (⌃ ⇥) 来执行此操作。

这是默认设置，尽管您可以在 iTerm > Preferences > Profiles > Keys 中更改它（以及添加其他要发送的十六进制代码值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T02:06:35.323

我不确定您为什么将“bash 语句”与 iTerm 进行比较。您在 iTerm 中编写 bash 脚本。这意味着，假设您在 iTerm 中编写脚本，那么您已经在做您想做的事了。

我假设您的意思是在 vi 与命令行中编写脚本。我在命令行上获取文字字符的方法是使用[vi 编辑模式](http://www.catonmat.net/blog/bash-vi-editing-mode-cheat-sheet/)。做`set -o vi`。然后您可以按照您习惯的方式使用`ctrl`+`v`后跟。`tab`

IMO，使用 vi 编辑模式还具有许多其他优点，例如搜索历史记录、更快的导航等。因此，您可以根据`.bashrc`需要将其添加到您的文件中并一直使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-15T07:47:56.290

还应该尝试 Ctl + V Ctl + I。它在 Ctl+V+Tab 不起作用的 konsole 中工作。

# mysql - 使用 sudo mysql -u=root 创建数据库

> ID：10627992
> 
> 赞同：3
> 
> 时间：2012-05-16T23:12:49.663
> 
> 标签：mysql, database, linux, shell, ubuntu

我现在遇到问题，因为当我使用命令行登录 mysql 时，`mysql -u=root`它会给我一个像这样的错误`ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)`

但是当我尝试使用时，我设法`sudo mysql -u=root`转到 mysql 提示`mysql>`问题是当我尝试使用命令创建数据库时`create database dbname`出现错误提示`ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'dbname'`

附加信息：

`mysql> select user();`

```
+--------------------+
| user()             |
+--------------------+
| =root@localhost    |
+--------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T23:18:16.743

创建数据库 以 root 身份登录 MySQL，如下所示：

```
sudo mysql -h localhost -u root -p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:15:52.407

尝试连接

`sudo mysql -u root`

# php - 使用 PHP FAST CGI 解析 ASPX 页面无法启动会话

> ID：10627996
> 
> 赞同：1
> 
> 时间：2012-05-16T23:13:32.920
> 
> 标签：php, iis-7.5

在这里把我的头靠在墙上。

我正在将在 IIS 7.5（Windows Web 服务器版）上运行的 C#.NET 站点从 C#.NET 转换为 PHP 5.3.10。一切都已完成，但客户用于其 google Adwords 帐户的页面需要保持不变。您不能重定向谷歌登陆页面。为了解决这个问题，我删除了所有 aspx 扩展处理程序，并在所有 *.aspx 扩展上用 PHP FastCGI 替换。我还将应用程序放置在它自己的应用程序池中，以经典模式等运行。

页面加载时会引发无法启动会话警告。PHP 本身工作正常，但页面似乎已将某些内容传递给浏览器，不允许 php 启动会话、设置 cookie 或执行标头重定向。

无论如何，这不是我第一次这样做，所以它应该可以工作。这也不是空格问题。我知道如何启动会话等。 IIS 在解析这些文件时正在做一些事情，我还不够熟悉，不知道去哪里找。

提前为您提供帮助。

在我的智慧结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:33:05.423

`.aspx`使用 URL 重写模块将所有对页面的请求重写为 不是更容易`.php`吗？像这样：

```
<rule name="Rewrite ASPX to PHP" enabled="true" stopProcessing="true">
    <match url="(.*)\.aspx$" />
    <action type="Rewrite" url="/{R:1}.php" appendQueryString="true" />
</rule> 
```

# xcode4 - xib 文件保存不会保留在 Xcode 中

> ID：10627997
> 
> 赞同：0
> 
> 时间：2012-05-16T23:13:34.347
> 
> 标签：xcode4, xib

我在 Xcode 中对 MainWindow.xib 进行了一些更改，每次我点击保存时，它似乎都表明成功，在导航器中从暗淡变为正常。几秒钟后，它又变暗，好像它已被修改并需要再次保存。有人见过这个吗？我该怎么做才能让它保持保存状态。我尝试删除派生数据并重新打开项目。更改似乎仍然保持编辑状态，项目编译并且似乎工作正常。问题的唯一迹象是无论我做什么，文件看起来都需要保存。

经过进一步分析，我发现无论我是否进行更改，它似乎都会在我选择它时更改为修改状态。我不能说这是否是正常行为，但它似乎不会给我的项目带来任何问题。如果我在导航窗格中选择不同的文件，则在构建之前，xib 文件将被保存并保持保存状态。如果我在构建后再次选择 xib，它会立即恢复为已修改。我的项目中的任何其他 xib 文件都不会发生这种情况。在此之前我从未注意到这种行为，当然自从我改变这个特定的 xib 以来已经很久了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:40:05.787

我将得出结论，这是以前 XCode 构建中的错误。从最新的，现在的 4.4 开始，我根本没有看到这种行为。