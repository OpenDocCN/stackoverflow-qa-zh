# StackOverflow 问答 11656000-11656999

# backbone.js - 如何使用 Meteor 创建动态 URL？

> ID：11656001
> 
> 赞同：5
> 
> 时间：2012-07-25T18:12:58.670
> 
> 标签：backbone.js, routing, meteor, backbone-routing

我是 web 开发的新手，被 Meteor 网站上的演示所震撼，并想使用它。到目前为止，我只使用过 Google App Engine，并且要在主类中处理动态 URL，我会编写如下内容：

```
app = webapp2.WSGIApplication([('/[0-9]', HandlePost)], debug=True) 
```

这会将末尾带有数字 0 到 9 的任何 URL 映射到处理程序类，该处理程序类将使用模板引擎（如把手）加载 HTML 页面以及页面的适当数据。

我如何在 Meteor 中做类似的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T14:15:50.043

使用骨干网的路由器，请参阅： [http](http://backbonejs.org/#Router-routes)
://backbonejs.org/#Router-routes 对于像您的示例这样的 正则表达式，请参阅：http: [//blog.rjzaworski.com/2011/12/regex-routing-with-backbone-js/](http://blog.rjzaworski.com/2011/12/regex-routing-with-backbone-js/)
尝试出流星上的待办事项示例，请参阅`client/todo.js`文件：

```
////////// Tracking selected list in URL //////////

var TodosRouter = Backbone.Router.extend({
  routes: {
    "todo_list/:list_id": "main"
  },
  main: function (list_id) {
    Session.set("list_id", list_id);
    Session.set("tag_filter", null);
  },
  setList: function (list_id) {
    this.navigate("todo_list/"+list_id, true);
  }
});

Router = new TodosRouter;

Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T08:38:16.760

使用 Backbone 路由器的替代方法是[Meteor Router](https://github.com/tmeasday/meteor-router)。我不能保证它，只是我自己才发现它，但它看起来功能相当齐全。

# c# - 如何找出 SpecificVersion 参考属性的值？

> ID：11656002
> 
> 赞同：3
> 
> 时间：2012-07-25T18:13:04.873
> 
> 标签：c#, reflection, .net-4.0, reference

我有一个引用另一个 DLL (DllChild) 的二进制文件（我们称之为 DllParent）。添加引用时，我们可以选择将`SpecificVersion`属性设置为 true 或 false。

![在此处输入图像描述](../Images/e71540e46e444c849f387a195ac6c518.png)

在 Reflector（或类似工具）中查看 DllParent 时，有没有办法找出开发人员是否将 DllChild 的 SpecificVersion 属性设置为 true 或 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:09:54.797

答案是不。

当您向项目添加对强命名程序集的引用时，Visual Studio 会将包含版本的完整强名称存储在您的 .csproj 文件中。

然后在每次构建期间，当 MSBuild 代码尝试解析程序集引用时，即找到它可以在构建期间使用的实际程序集文件，如果`SpecificVersion`设置为，`true`则 .dll 中的版本必须与项目中指定的版本匹配文件。

这可能会带来一个问题，如果您想升级到新版本的程序集，您需要更改所有使用该程序集的项目中的引用，否则构建会失败，因此为了简化您的生活，您可以设置`SpecificVersion`到`false`.

在这种情况下，如果某些方法签名已更改，您的构建仍可能在升级后失败。如果您在编译项目时遇到错误，这会很糟糕但可以修复，但如果在运行时允许发生同样的事情，对于最终用户来说，这将是一个严重的问题。

因此，.Net 不允许通过强制严格匹配构建期间使用的确切版本来发生这种情况，而不管`SpecificVersion`项目文件中的值如何。

MSBuild 只是将带有程序集引用的版本存储在二进制 .dll 文件中，然后使用 Reflector 检查它只会显示 MSBuild 实际使用的引用程序集的版本，而不是它如何解析项目的引用。

引用程序集的开发人员仍然可以指定可以安全地使用新版本而不是旧版本，但这是通过不同的机制完成的：

1.  如果公共接口已更改但与旧版本兼容（例如添加方法兼容但删除或更改参数不兼容），则可以将策略文件与新版本一起部署以告诉 .Net 系统这是一个安全的替代品。(http://msdn.microsoft.com/en-us/library/dz32563a.aspx)

2.  如果公共接口完全一样，只是方法的内部实现发生了变化，那么被引用程序集的开发人员可以保持相同的`AssemlyVersion`值但改变`AssemblyFileVersion`。在这种情况下，您可以在 Windows 资源管理器中看到的文件版本将被更新，但强名称将保持不变。这就是微软在更新 System.dll 时所做的事情

在这两种情况下，引用程序集（您的问题中的 DllParent）仍将包含原始版本号。

# clojure - 在 Clojure 中使用管道/流

> ID：11656006
> 
> 赞同：5
> 
> 时间：2012-07-25T18:13:11.563
> 
> 标签：clojure, pipe

除了[Conduit](http://www.intensivesystems.net/tutorials/stream_proc.html)之外，还有其他处理流/管道的 Clojure 模块，如果有，它们是什么？

基本上，我正在研究蒸汽，因为我希望 Python 和 Clojure 程序以非常轻量级的方式进行通信，就像 Clojure 程序运行并成功，并且可能正在返回一些数据。所以我不需要重型的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T00:11:51.437

[Lamina](https://github.com/ztellman/lamina)拥有您想要的一切

# c# - 如何从 EnumerableRowCollection 类型的空集合中获取列数

> ID：11656012
> 
> 赞同：1
> 
> 时间：2012-07-25T18:13:35.870
> 
> 标签：c#

我有一个类型的对象，`System.Data.EnumerableRowCollection<System.Data.DataRow>`其中没有任何项目。如何获取其中的列数？

我可以使用 IDE 挖掘属性以获取计数，但我不知道如何通过代码获取。在图像中，您可以看到源表有 2 列。

![在此处输入图像描述](../Images/d94eb8ddc1429196fda0c33e7988379b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:18:39.963

据我所知，你不能。

`EnumerableRowCollection`an由 a 支持的事实`DataTable`是一个实现细节。它在*逻辑上*只是一个`DataRow`s 序列，而一个空序列在逻辑上没有多少列。

如果您需要此信息，听起来您应该自己保留对源的引用`DataTable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:21:26.177

如果您确实需要，您可以使用私有反射获取信息。可能最好保留对原始数据表的引用。

# arrays - Bash：无法在管道右侧构建数组

> ID：11656013
> 
> 赞同：5
> 
> 时间：2012-07-25T18:13:41.057
> 
> 标签：arrays, bash, shell

任何人都知道为什么这段代码没有按预期工作？

```
$> svnTags=()
$> svn ls http://plugins.svn.wordpress.org/duplicate-post/tags/ | while read line; do slashless=$(sed 's#/$##g' <<< $line); echo "slashless - $slashless"; svnTags+=($slashless); done
slashless - 1.0
slashless - 1.1
slashless - 1.1.1
slashless - 1.1.2
slashless - 2.0
slashless - 2.0.1
slashless - 2.0.2
slashless - 2.1
slashless - 2.1.1
slashless - 2.2
slashless - 2.3
$> echo "$svnTags[@]" 
```

没有给出任何输出，我希望它输出 svn 标签的内置数组。

第二个命令爆发：

```
svn ls http://plugins.svn.wordpress.org/duplicate-post/tags/ | while read line; do
    slashless=$(sed 's#/$##g' <<< $line)
    echo "slashless - $slashless"
    svnTags+=($slashless)
done 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T18:15:41.973

因为之后发生`|`的是一个子shell。在子 shell 中更改的变量不会传播回父 shell。

常见的解决方法：

```
while read line ; do
    ...
done < <(svn ls http://...) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-25T18:26:29.940

就个人而言，我宁愿尽可能避免`while read`。我会这样做：

```
url=http://plugins.svn.wordpress.org/duplicate-post/tags/
IFS=$'\n' svnTags=($(svn ls "$url" | sed 's/^/slashless - /; s#/$##g')) 
```

然后的结果`declare -p svnTags`是：

```
declare -a svnTags='([0]="slashless - 0.3" [1]="slashless - 0.4" [2]="slashless - 0.5" [3]="slashless - 0.6" [4]="slashless - 0.6.1" [5]="slashless - 1.0" [6]="slashless - 1.1" [7]="slashless - 1.1.1" [8]="slashless - 1.1.2" [9]="slashless - 2.0" [10]="slashless - 2.0.1" [11]="slashless - 2.0.2" [12]="slashless - 2.1" [13]="slashless - 2.1.1" [14]="slashless - 2.2" [15]="slashless - 2.3" [16]="slashless - 2.4" [17]="slashless - 2.4.1")' 
```

# c# - 使用 AutoMapper 将通用枚举映射到小写字符串

> ID：11656017
> 
> 赞同：6
> 
> 时间：2012-07-25T18:13:56.810
> 
> 标签：c#, automapper

我目前将所有不同的枚举值类型映射到一个小写的字符串值。我有多个地图，其中包含重复的逻辑。是否可以采用以下 AutoMapper 代码并告诉它始终将枚举转换为小写字符串值？

```
Mapper.CreateMap<Class1, OutClass1>()
   .ForMember(dest => dest.Enum1String, opt => opt.MapFrom(src => src.Enum1.ToString().ToLower()))
   .ForMember(dest => dest.Enum2String, opt => opt.MapFrom(src => src.Enum2.ToString().ToLower()));

Mapper.CreateMap<Class2, OutClass2>()
   .ForMember(dest => dest.Enum2String, opt => opt.MapFrom(src => src.Enum2.ToString().ToLower())); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:44:57.050

使用自定义类型转换器，告诉 Automapper 如何将枚举转换为字符串：

```
Mapper.CreateMap<Enum, String>().ConvertUsing(e => e.ToString().ToLower()); 
```

# sql - 在 Oracle 中通过脚本更快地插入？

> ID：11656026
> 
> 赞同：4
> 
> 时间：2012-07-25T18:14:34.980
> 
> 标签：sql, oracle, plsql

我正在使用 C# .NET 4.0 应用程序，它使用 ODP.NET 11.2.0.2.0 和 Oracle 11g 数据库。该应用程序预加载了一些带有数据的查找表，并且由于大多数的记录少于 20 条，因此脚本运行得非常快。但是，其中一个脚本有 802 条记录，并且需要 248.671 秒来插入记录，对于这样的少量数据以及宣传大量数据的快速操作的数据库来说，这似乎是多余的。

所以我想知道，有没有比当前编写脚本的方式更快的方式通过脚本插入数据？

插入的表定义如下：

```
CREATE TABLE FileIds
(
     Id                 NUMERIC(38)                         NOT NULL
    ,Name               NVARCHAR2(50)   DEFAULT 'Unknown'   NOT NULL 
    ,FileTypeGroupId    NUMERIC(38)                         NOT NULL
    ,CONSTRAINT FK_FileIds_FileTypeGroups FOREIGN KEY ( FileTypeGroupId ) REFERENCES FileTypeGroups ( Id )
) 
```

要插入的脚本如下所示：

```
BEGIN
    INSERT ALL
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1152,5)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1197,10)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1200,6)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1143,3)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1189,9)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1109,7)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1166,4)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (0,8)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1149,2)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1400,1)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1330,11)
        INTO FileIds ( Id, FileTypeGroupId ) VALUES (1000,0)
        -- 790 Records removed for example purposes.
        SELECT * FROM DUAL;
    COMMIT;
END; 
```

外键中引用的 FileTypeGroups 表是在加载 FileIds 表之前预加载的。没有与 FileIds 表关联的序列或触发器，并且到目前为止还没有为该表创建索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T05:42:07.313

**问题**

解析时间可能会随着某些类型的语句呈指数增长，尤其是`INSERT ALL`. 例如：

```
--Clear any cached statements, so we can consistently reproduce the problem.
alter system flush shared_pool;
alter session set sql_trace = true;

--100 rows
INSERT ALL
    INTO FileIds(Id,FileTypeGroupId) VALUES(1, 1)
    ...
    repeat 100 times
    ...
select * from dual;

--500 rows
INSERT ALL
    INTO FileIds(Id,FileTypeGroupId) VALUES(1, 1)
    ...
    repeat 500 times
    ...
select * from dual;

alter session set sql_trace = false; 
```

通过 tkprof 运行跟踪文件，您可以看到大量行的 Parse 时间急剧增加。例如：

*100 行：*

```
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.06       0.05          0          1          0           0
Execute      1      0.00       0.00          0        100        303         100
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        2      0.06       0.05          0        101        303         100 
```

*500 行：*

```
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1     14.72      14.55          0          0          0           0
Execute      1      0.01       0.02          0        502       1518         500
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        2     14.74      14.58          0        502       1518         500 
```

**解决方案**

1.  把你的大陈述分成几个小陈述。很难找到最佳尺寸。在某些版本的 Oracle 中，会导致问题的行数非常多。我通常会选择大约 100 行 - 足以获得分组语句的大部分好处，但又足够低以避免解析错误。或者...
2.  试试这个`insert into ... select ... from dual union all ...`方法。它通常运行得更快，尽管它的解析性能也可能随着大小而显着下降。
3.  升级甲骨文。解析性能在较新版本中有所提高。我无法再在 12.2 版中重现此问题。

**警告**

不要从中吸取错误的教训。如果您担心 SQL 性能，那么在 99% 的情况下，您最好将相似的事物组合在一起，而不是将它们分开。你以正确的方式做事，你只是遇到了一个奇怪的错误。（我搜索了 My Oracle Support，但找不到官方的错误。）

# arrays - gdb：打印二维 fortran 数组

> ID：11656030
> 
> 赞同：2
> 
> 时间：2012-07-25T18:15:02.757
> 
> 标签：arrays, gdb, fortran

使用 GDB 在 fortran 代码中打印二维数组的值时遇到问题。

```
(gdb) print var(1,2)
no such vector element 
```

经过广泛的搜索，我发现了许多关于这个问题的帖子，日期为 2007 年至 2010 年。大多数以有人建议补丁结束。当前版本（我使用的是 7.4-2012.04）中是否解决了此问题？目前没有关于该主题的帖子，是否已修复或有合适的解决方法？

一个建议是切换到 c

```
(gdb) set language c
(gdb) print neighbours
$47 = 0xbfaeae44
(gdb) print *neighbours
$48 = 0xbfaeae44
(gdb) print 0xbfaeae44
$49 = 3215896132 
```

如何打印指向的值并使用它进行指针运算？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:35:05.093

一种可能的解决方案是使用从 Archer (git) [http://sourceware.org/gdb/wiki/ArcherBranchManagement](http://sourceware.org/gdb/wiki/ArcherBranchManagement)分支 archer-jankratochvil-vla 获得的 gdb。我已经用 EGit(Eclipse) 下载了，我已经编译它并在 Mandriva 2010/2011 和 Ubuntu Precise Pengolin 中安装了 ( `./configure`, `make`, )。`sudo make install`为此，您必须安装一些软件包，这取决于您的发行版。如果出现错误，您会收到一些消息，以帮助您找到丢失的包。在 Ubuntu 中，默认情况下会在命令行上启动新的 gdb。我在 Eclipse (Photran) 和 NetBeans 中使用了获得的 gdb，它在 GUI 环境中工作得很好，几乎就像 Windows 中的商业 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:32:28.853

是的，过去曾有过这方面的问题。不确定这在最新的 gdb 中是否属实。

或者，您可以使用免费提供且具有更好 GUI 的dbx（来自[Solaris Studio ）。](http://www.oracle.com/technetwork/server-storage/solarisstudio/overview/index.html)顺便说一句，Solaris Studio 包括一个调试器、分析器、C/C++/Fortran 编译器、Sunperf 库，整个安装不到一个演出。

我总是使用 GNU 编译器，但 Solaris Studio 在使用 Fortran 程序时非常方便，特别是在调试/跟踪错误/警告、符合标准等时。无论如何，通常最好使用多个编译器检查您的代码。Analyzer 在使用 OpenMP（用于检测比赛）时特别有用。

# xpath - XPath 检索其父元素的第 n 个子元素的属性

> ID：11656031
> 
> 赞同：0
> 
> 时间：2012-07-25T18:15:02.847
> 
> 标签：xpath

我有以下 XML：

```
<ModuleInfo xsi:type="NMEAGPSInfo" name="NMEAGPS" id="f77f721c-8287-4609-80d4-4458011219ff">
    . . .
    <Satellites Number="3" Quality="2">
        <Satellite IsInUse="true">
            <Code>28</Code>
            <SignalToNoiseRatio>22</SignalToNoiseRatio>
            <Elevation>18</Elevation>
            <Azimuth>285</Azimuth>
        </Satellite>
        <Satellite IsInUse="true">
            <Code>08</Code>
            <SignalToNoiseRatio>20</SignalToNoiseRatio>
            <Elevation>46</Elevation>
            <Azimuth>312</Azimuth>
        </Satellite>
        . . .
    </Satellites>
    . . .
</ModuleInfo> 
```

我需要一个 XPath 来检索第 n 个 Satellite 标记的 IsInUse 属性的值。

我一直在使用这个 XPath：a:Satellites/a:Satellite[1]@IsInUse

但它不起作用。

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:21:44.480

XPath 中缺少斜杠：

```
a:Satellites/a:Satellite[1]/@IsInUse 
```

# ios - IOS - 如果用户点击随机元素而不是背景，如何隐藏键盘？

> ID：11656035
> 
> 赞同：2
> 
> 时间：2012-07-25T18:15:08.240
> 
> 标签：ios, ios5

在我的应用程序中，我有这样的东西：

```
- (IBAction)backgroundTouch:(id)sender 
{
    [businessDescription resignFirstResponder];
    [self.view endEditing:YES]; 
} 
```

我不确定我使用的两行中哪一个更好，所以我同时使用:) 它在突出显示文本区域并且用户按下背景时起作用。

但用户并不总是按背景，有时会按其他页面元素，例如他们试图填写的下一个元素。

在我的屏幕截图中，我在文本区域下方有下一个元素，当我点击那里时，键盘不会被隐藏。当用户单击各种页面元素以及文本区域碰巧没有突出显示时，谁能帮我隐藏键盘？

![在此处输入图像描述](../Images/23378412c2dc4ef5b0abacfc4f53dde0.png)

这是我的 .h 文件：

```
@interface PlanBusinessController : UIViewController

@property (weak, nonatomic) IBOutlet UITextView *businessDescription;

- (IBAction)submitBusiness:(id)sender;
@property (weak, nonatomic) IBOutlet UIButton *buttonProperty;

@property (weak, nonatomic) IBOutlet UITextField *personName;

@property (weak, nonatomic) IBOutlet UITextField *personEmail;

@property (weak, nonatomic) 
    IBOutlet UISwitch *privacy;

@property (weak, nonatomic) IBOutlet UISwitch *wantHelp;

- (IBAction)helpToggle:(id)sender;

@property (weak, nonatomic) IBOutlet UILabel *nameLabel;
@property (weak, nonatomic) IBOutlet UILabel *emailLabel;

@property (weak, nonatomic) IBOutlet 
UIButton *test; 
```

@结尾

这是我的 .m 声明：

```
#import "PlanBusinessController.h"

@interface PlanBusinessController ()

@end

@implementation PlanBusinessController
@synthesize nameLabel;
@synthesize emailLabel;
@synthesize businessDescription;
@synthesize buttonProperty;
@synthesize personName;
@synthesize personEmail;
@synthesize privacy;
@synthesize wantHelp;
@synthesize test;

-(void)touchesBegan:(NSSet*)touches
{
    UITouch *touch=[touches anyObject];
    UIView *view=touch.view;
    if (![view isEqual:businessDescription])
    {
        //[businessDescription resignFirstReponder];
    }
}

- (IBAction)backgroundTouch:(id)sender 
{
    [businessDescription resignFirstResponder];
    [self.view endEditing:YES]; 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:23:39.837

我在我的程序 ViewController 中使用了这个方法，它工作正常。我会试一试。

```
//Used with the text fields to dismiss keyboard
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [textField resignFirstResponder];
} 
```

如果你有其他元素，那么在这些元素的方法中也添加`[textField resignFirstResponder]`.

例如，如果他们可以单击一个按钮，请编写如下内容：

```
-(IBAction)button1:(id)sender
{   
    [textField resignFirstResponder];

     //Do stuff
} 
```

注意：每个要关闭的文本字段都需要一个。例如：

```
-(IBAction)button1:(id)sender
{   
    [textField resignFirstResponder];
    [textField2 resignFirstResponder];
    []... etc

     //Do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:59:56.757

请检查以下代码：

```
-(void)touchesBegan:(NSSet*)touches
 {
    UITouch *touch = [touches anyObject];
    UIView *textView=touch.view;
    if (![textView isKindOfClass:[UITextView class]])
    {
        [businessDescription resignFirstResponder];
    }
 } 
```

当你触摸一个对象时，它会检查，被触摸的对象是不是类型`UITextView`，如果不是，它将结束编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:26:39.497

一种简单的方法是捕捉发生触摸的视图。并将其与文本区域进行比较。如果视图或（其他类似按钮的东西）与文本区域不同，那么您可以隐藏键盘。这是伪代码：

```
 -(void)touchesBegan:(NSSet*)touches
 {
    UITouch *touch=[touches anyObject];
    UIView *view=touch.view;
       if (![view isEqual:textArea])
        [textarea resignFirstReponder];
 } 
```

# python - 使用python向docx文件添加标题

> ID：11656036
> 
> 赞同：3
> 
> 时间：2012-07-25T18:15:10.597
> 
> 标签：python, ms-word, docx, doc

我有数百个 word 文档，我需要为其添加特定的页眉（如典型的 MS Word 页眉/页脚）。不是需要修改标题，这些文档只是不包含一个。有没有办法用 Python-docx 模块做到这一点？我最近发现了它，它看起来很有希望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:09:05.063

如果用户没有 docx 包，也可以通过 win32 完成，使用这个。

..//

```
import win32com.client

if win32com.client.gencache.is_readonly == True:
    win32com.client.gencache.is_readonly = False
    win32com.client.gencache.Rebuild()

from win32com.client.gencache import EnsureDispatch
from win32com.client import constants

word = win32com.client.gencache.EnsureDispatch("Word.Application")
word.Visible = False

    #tell word to open the document
    word.Documents.Open (IP_Directory_Dest + "\\" + name)

    #open it internally
    doc = word.Documents(1)

    # for changing the header information of the Document
    word.Visible = True
    word.ActiveDocument.Sections(1).Headers(win32com.client.constants.wdHeaderFooterPrimary).Range.Text='STUFF U WANT AS UR DOCUMENT HEADER'
    word.ActiveDocument.Save() 
```

...///

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:29:14.457

很简单。

```
from docx import *
document = yourdocument.docx
docbody = document.xpath('/w:document/w:body',namespaces=wordnamespaces)[0]
docbody.append(heading('Your header text',1)  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T18:30:10.637

保持正确的词标题格式。

1.  创建带有页眉/页脚的模板 docx 文件
2.  通过Word将占位符（即#headerText）插入到docx中（对文本进行分组）
3.  展开模板的xml树
4.  用您想要的文本替换占位符
5.  输出新的word文档

这不是编辑 docx 的理想解决方案，但它主要解决了我的 python docx 文本插入需求。

最终，python docx 可能会添加更多功能来帮助编辑页眉/页脚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-26T19:36:18.070

好吧，如果我理解的话，您需要在许多 docx 文件中创建一个标题部分。就我而言，人们正在研究 python-docx 来实现这一点。虽然此新功能不可用，但您可以直接将其添加到您的 docx 文件中。

如果您还不知道，可以解压缩 docx 文件。在它的结构里面有一些 header.xml 文件。

一个建议是，创建一个带有标题的 docx 文件，然后，使用 lxml 和 zipfile 模块，您可以简单地更新所有 docx 文件中的 header.xml 文件。

如果您认为这可以帮助您解决问题，请告诉我，我可能会指导您完成。

问候

# java - 在 JSP 文件中正确使用函数

> ID：11656043
> 
> 赞同：2
> 
> 时间：2012-07-25T18:15:35.980
> 
> 标签：java, javascript, html, jsp

我想使用 jsp 文件中的函数打印出 3 个按钮。这样做的正确方法是什么，因为我的方法似乎是错误的。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Test Page</title>

        <%!
        int j = 3;
        %>

        <%!
        public void manyButtons() {
            for (int i = 0; i < j; i++) {
                %>
                <input type="button" value="button<%=i%>"/>
                <%!                
            }
        }

        %>        
    </head
    >
    <body>

        <% manyButtons(); %>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:45:03.197

正如评论所说，您要避免为此使用Java。值得庆幸的是，您可以使用 JSTL 轻松做到这一点。像这样使用 forEach 循环：

```
 <c:forEach var="i" begin="1" end="3" step="1" varStatus="status">
   <input type="button" value="button${i}"/>
 </c:forEach> 
```

这应该复制您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:48:48.410

我不是 Java EE 开发人员，但据我所知，您的 JSP 将被翻译成包含您正在创建的方法的 servlet。您必须知道，`request`对象`response`被传递给`service()`方法，因此您的方法默认情况下无法访问响应对象，因此它无法将输出数据从响应中发送给编写器。

如果您真的必须使用方法（我可能会使用`<c:for ...>`来自 JSTL 的[Raskolnikov 为他显示](https://stackoverflow.com/a/11656491/1393766)+1），您可以将方法中生成的数据作为字符串返回并在`<%= manyLabels() %>`. 我的意思是

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Test Page</title>

        <%!
        public String manyLabels(int j) {
            StringBuilder sb=new StringBuilder();
            for (int i = 0; i < j; i++) {
                sb.append("<input type=\"button\" value=\"button"+i+"\"/>");
            }
            return sb.toString();
        }
        %>        
    </head
    >
    <body>

        <%= manyLabels(3) %>

    </body>
</html> 
```

# ruby - 模板方法的 Thor 源路径

> ID：11656044
> 
> 赞同：2
> 
> 时间：2012-07-25T18:15:36.980
> 
> 标签：ruby, thor

我正在尝试使用 Thor 模板方法。但是当我为我的案例编写规范时，结果发现脚本没有看到模板目录

### 目录结构

```
/crx
  /lib
    /templates
      manifest
    command.rb 
```

### command.rb 中的 Thor 任务实现

```
module Crx
  class Command < Thor
    include Thor::Actions

    def self.source_root
      File.dirname(__FILE__)
    end

    desc "add", "add extension files like manifest, content_script"
    def add(name)
      template 'templates/manifest'
    end

  end
end 
```

### 失败的规范

```
Crx::Command should create manifest
  Thor::Error:
    Could not find "templates/manifest" in any of your source paths. Your current source paths are: 
    /home/lewy/Programowanie/ruby/crx/lib/crx 
```

# python - Pycrypto：递增 CTR 模式

> ID：11656045
> 
> 赞同：4
> 
> 时间：2012-07-25T18:15:38.010
> 
> 标签：python, aes, encryption, pycrypto

仍然不能完全让它发挥作用。我的问题是关于如何使解密线工作。这是我写的：

```
class IVCounter(object):
    @staticmethod
    def incrIV(self):
        temp = hex(int(self, 16)+1)[2:34]
        return array.array('B', temp.decode("hex")).tostring()

def decryptCTR(key, ciphertext):

    iv = ciphertext[:32] #extracts the first 32 characters of the ciphertext

    #convert the key into a 16 byte string
    key = array.array('B', key.decode("hex")).tostring()

    print AES.new(key, AES.MODE_CTR, counter=IVCounter.incrIV(iv)).decrypt(ciphertext)
    return 
```

我的错误信息是：

> ValueError：“计数器”参数必须是可调用对象

我只是不知道 pycrypto 如何让我将第三个参数组织为 new。

任何人都可以帮忙吗？谢谢！

**实施以下建议后***编辑新代码。***还是卡住了！**

 **```
class IVCounter(object):
    def __init__(self, start=1L):
        print start #outputs the number 1 (not my IV as hoped)
        self.value = long(start)

   def __call__(self):
        print self.value  #outputs 1 - need this to be my iv in long int form
        print self.value + 1L  #outputs 2
        self.value += 1L
        return somehow_convert_this_to_a_bitstring(self.value) #to be written

def decryptCTR(key, ciphertext):

    iv = ciphertext[:32] #extracts the first 32 characters of the ciphertext
    iv = int(iv, 16)

    #convert the key into a 16 byte string
    key = array.array('B', key.decode("hex")).tostring()

    ctr = IVCounter()
    Crypto.Util.Counter.new(128, initial_value = iv)

    print AES.new(key, AES.MODE_CTR, counter=ctr).decrypt(ciphertext)
    return 
```

**编辑**仍然无法让它工作。非常沮丧，完全没有想法。这是最新的代码：（请注意，我的输入字符串是 32 位十六进制字符串，必须以两位数对解释才能转换为长整数。）

```
class IVCounter(object):
    def __init__(self, start=1L):
        self.value = long(start)

    def __call__(self):
        self.value += 1L
        return hex(self.value)[2:34]

def decryptCTR(key, ciphertext):
    iv = ciphertext[:32] #extracts the first 32 characters of the ciphertext
    iv = array.array('B', iv.decode("hex")).tostring()

    ciphertext = ciphertext[32:]

    #convert the key into a 16 byte string
    key = array.array('B', key.decode("hex")).tostring()

    #ctr = IVCounter(long(iv))
    ctr = Crypto.Util.Counter.new(16, iv)

    print AES.new(key, AES.MODE_CTR, counter=ctr).decrypt(ciphertext)
    return 
```

> TypeError：CTR 计数器函数返回的字符串长度不是 16

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T22:04:03.490

在 Python 中，将函数视为对象是完全有效的。`__call__(self, ...)`将任何定义为函数的对象处理也是完全有效的。

所以你想要的可能是这样的：

```
class IVCounter(object):
    def __init__(self, start=1L):
        self.value = long(start)
    def __call__(self):
        self.value += 1L
        return somehow_convert_this_to_a_bitstring(self.value)

ctr = IVCounter()
... make some keys and ciphertext ...
print AES.new(key, AES.MODE_CTR, counter=ctr).decrypt(ciphertext) 
```

但是，PyCrypto 为您提供了一个计数器方法，它应该比纯 Python 快得多：

```
import Crypto.Util.Counter
ctr = Crypto.Util.Counter.new(NUM_COUNTER_BITS) 
```

`ctr`现在是一个有状态函数（同时也是一个可调用对象），每次调用它时都会递增并返回其内部状态。然后你可以做

```
print AES.new(key, AES.MODE_CTR, counter=ctr).decrypt(ciphertext) 
```

和以前一样。

这是一个在 CTR 模式下使用 Crypto.Cipher.AES 的工作示例，带有用户指定的初始化向量：

```
import Crypto.Cipher.AES
import Crypto.Util.Counter

key = "0123456789ABCDEF" # replace this with a sensible value, preferably the output of a hash
iv = "0000000000009001" # replace this with a RANDOMLY GENERATED VALUE, and send this with the ciphertext!

plaintext = "Attack at dawn" # replace with your actual plaintext

ctr = Crypto.Util.Counter.new(128, initial_value=long(iv.encode("hex"), 16))

cipher = Crypto.Cipher.AES.new(key, Crypto.Cipher.AES.MODE_CTR, counter=ctr)
print cipher.encrypt(plaintext) 
```**

# java - c++ iostreams 不能通过 JNI 工作

> ID：11656048
> 
> 赞同：1
> 
> 时间：2012-07-25T18:15:42.967
> 
> 标签：java, java-native-interface, g++, cygwin

我正在使用 Cygwin g++ 编译器创建一个共享库 Client.dll 并通过 JAVA 程序调用。

如果我从 Client.c 程序中删除 'cout <<' 命令，一切正常。该方法返回值。但是当我添加 cout 命令时，JVM 会冻结。

Client.c 有：

```
JNIEXPORT jint JNICALL Java_nativeCode_Client_getDummyData(JNIEnv * env, jobject obj, jint pmuId)
{
    jint myint = 11;
    pmuId = pmuId + pmuId;
    cout <<"here";
    return myint;
} 
```

我正在创建 .dll 作为，

```
$ g++ -I"C:\Program Files (x86)\Java\jdk1.6.0_33\include" -I"C:\Program Files    
    (x86)\Java\jdk1.6.0_33\include\win32" -Wl,--add-stdcall-alias -shared -o Client.dll Client.c 
```

我究竟做错了什么？

提前致谢。

# android - Android 应用程序未从 sharedpreferences 活动中提取信息。使用默认值

> ID：11656049
> 
> 赞同：0
> 
> 时间：2012-07-25T18:15:43.703
> 
> 标签：android

我已经完成了一个应用程序。但是我在 sharedpreferences 活动中有一些文本，当应用程序启动时，它应该从那里拉出来并将其插入到编辑文本中，但是如果应用程序完全关闭，或者手机重新启动，它就不起作用并且默认值为改为使用。

谁能告诉我这是为什么？以及您需要什么数据。

下面是主要活动。

```
package com.liamwli.smsbusy;

import android.app.Activity;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.Toast;
import android.widget.ToggleButton;
import android.content.IntentFilter;
import android.content.SharedPreferences;

public class Sms_busyActivity extends Activity {
    IntentFilter intentFilter;
    ToggleButton endis;
    EditText message;
    Button smessage;
    SharedPreferences getPrefs;
    SharedPreferences.Editor editor;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Intent i = new Intent("com.liamwli.smsbusy.PREFS");
        // startActivity(i);
        setContentView(R.layout.main);

        endis = (ToggleButton) findViewById(R.id.enableddis);

        smessage = (Button) findViewById(R.id.savemess);

        message = (EditText) findViewById(R.id.message);

        getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

        editor = getPrefs.edit();

        // ---intent to filter for SMS messages received---
        intentFilter = new IntentFilter();
        intentFilter.addAction("SMS_RECEIVED_ACTION");

        Boolean state = getPrefs.getBoolean("enabled", false);

        String stext = getPrefs.getString("text", "");

        message.setText(stext);

        if (message.getText().toString().contentEquals("")){
            Toast.makeText(this, "Unable to get saved message. Please resave.", Toast.LENGTH_LONG).show();
        }

        endis.setChecked(state);

        endis.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub

                Log.d("SMS Busy App", "onCheckedChanged Called");

                //Toast.makeText(Sms_busyActivity.this, "App state changed",
                        //Toast.LENGTH_LONG).show();
                if (endis.isChecked()){
                    editor.putBoolean("enabled", true);
                    editor.commit();
                }else {
                    editor.putBoolean("enabled", false);
                    editor.commit();
                }

                editor.putString("message", message.getText().toString());
                editor.commit();

            }
        });

        smessage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                editor.putString("message", message.getText().toString());
                editor.commit();
                Toast.makeText(Sms_busyActivity.this, "Message Saved", Toast.LENGTH_SHORT).show();
                Log.d("smessage", "Message saved & commited");

            }
        });

    }

    @SuppressWarnings("deprecation")
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (Integer.parseInt(android.os.Build.VERSION.SDK) < 5
                && keyCode == KeyEvent.KEYCODE_BACK
                && event.getRepeatCount() == 0) {
            Log.d("SMS Busy App", "onKeyDown Called");
            onBackPressed();
        }

        return super.onKeyDown(keyCode, event);
    }

    public void onBackPressed() {
        Log.d("SMS Busy App", "onBackPressed Called");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        return super.onCreateOptionsMenu(menu);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:22:31.613

问题是您`Editor`每次通话都使用相同的，并且`commit`不止一次。这只会保存整个应用程序中的最新更改。

试试这个：

```
 editor = getPrefs.edit();
            if (endis.isChecked()){
                editor.putBoolean("enabled", true);
            }else {
                editor.putBoolean("enabled", false);
            }
            editor.putString("message", message.getText().toString());
            editor.commit(); 
```

并以相同的方式调整您的其他`commit`代码。

# bash - 使用 awk、sed 或 grep 获取文本文件的子部分

> ID：11656053
> 
> 赞同：1
> 
> 时间：2012-07-25T18:16:18.070
> 
> 标签：bash, sed, awk, grep

恐怕我不是列出的三个工具中的任何一个的专家，所以我问你们所有人。

我有一个大文本文件，可以分成多个部分，每个部分都有页眉`ABC`和页脚`&&`。典型的文件如下所示：

```
ABC

...

<ID>
123

...

&&

ABC

...

<ID>
124

...

&& 
```

我需要根据给定的 检索一个部分`ID`，例如，如果`ID=123`，我希望输出为：

```
ABC

<ID>
123

&& 
```

`ABC` `<ID>`在和 之间`123`和之间有随机数据的地方`&&`。实际的`ID`, `123`, 是可变的。

我相信`awk '/ABC/,/\&\&/'`在找到每个小节时做的工作，但我不知道如何获得与正确 ID 对应的小节。提前感谢您的帮助。

**编辑：**澄清了问题和示例输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:46:57.213

此解决方案假定您的输入文件仅由`ABC ... <ID> ... &&`部分组成，可能由空行分隔。

**用法：** `awk -f foo.awk ID=123 input_file`

**foo.awk：**

```
#!/usr/bin/awk -f
BEGIN {
    RS = "\n&&\n";
    ORS = RS;
}

match($0, "<ID>\n" ID "\n") {
    sub(/^\n/,"",$0);
    print $0;
} 
```

如果`/usr/bin/awk`匹配您的 awk 并且您使 foo.awk 可执行，您可以直接调用它：`./foo.awk ID=123 input_file`

此代码将您的输入拆分`&&`为单行上的每个记录。
然后它搜索记录

```
<ID>
your_id 
```

如果找到匹配项，则打印它。

`sub(/^\n/,"",$0);`只是消除了部分之间的空白行。

您也可以将其放在一行中：

```
 awk 'BEGIN{ID=124;RS="\n&&\n";ORS=RS};match($0, "<ID>\n" ID "\n") {sub(/^\n/,"",$0);print $0;}' input_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:31:53.487

在 sed 中，您可以这样做：

```
sed -i ' /ABC/,/&&/ !{d} ' FILE 
```

这将保留 ABC 和 && 之间的所有上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:45:48.643

用法：`awk -v id=123 -f foo.awk foo.txt`

**foo.awk**

```
$0=="ABC",$0=="&&"{
    # store everything in data
    # ternary operation to avoid leading "\n"
    data=data?(data "\n" $0):$0
}

id_flag {
    # this is a string after "<ID>"
    if (id==$1) { 
       print_flag = 1
    }
    id_flag = 0
}

$0=="<ID>"{
    # prepare to read id
    id_flag = 1
}

$0=="&&"{
    if (print_flag) {
      print data
      print_flag = 0
    }
    data = ""
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:10:44.527

这可能对您有用（GNU sed）：

```
id=123
sed '/^ABC/,/^&&/{/^ABC/{h;d};H;/^&&/!d;g;/<ID>\n'"$id"'/p};d' file 
```

另一种方法：

```
sed ':a;$bb;N;/^ABC/!D;/&&$/!ba;:b;/^ABC.*<ID>\n'"$id"'.*&&$/p;d' file 
```

# iphone - scrollViewDidScroll 委托正在自动调用

> ID：11656055
> 
> 赞同：9
> 
> 时间：2012-07-25T18:16:29.987
> 
> 标签：iphone, ios, xcode, uiscrollview, uiscrollviewdelegate

我在我的应用程序中使用 scrollViewDidScroll 委托。

但是，很多时候，即使我开始滚动，这个委托也会被调用，这会产生很多问题。我听说即使设置了特定滚动视图的 contentSize ，那时`scrollViewDidScroll`也会调用这个委托。

调用此委托的不同场景是什么。有哪些步骤可以控制这种情况？

我可以设置任何参数来处理这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-05T16:55:12.443

为了防止`scrollDidScroll:`在加载和调整视图时自动触发，我等到`UIScrollView` `delegate`所有视图加载后才使用`viewDidLayoutSubviews`. 它对我来说效果很好。

```
- (void)viewDidLayoutSubviews {
    // add table view delegate after the views have been laid out to prevent scrollViewDidScroll
    // from firing automaticly when the view is adjusted on load, which makes the tab bar disappear 
    self.tableView.delegate = self;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T18:22:25.493

[相关的](https://stackoverflow.com/questions/3854739/my-app-calls-scrollviewdidscroll-19-times)

> scrollViewDidScroll：每次滚动边界更改时都会调用。这意味着它在滚动期间以及开始时被调用。您可能想尝试使用 scrollViewWillBeginDragging: 代替。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T19:04:07.293

当方向改变时，scrollViewDidScroll 也会被调用。这是我从[这里](https://stackoverflow.com/a/8141423/1410561)知道的。这是我面临的问题。现在我的问题通过[这篇](https://stackoverflow.com/questions/4123991/uiscrollview-disable-scrolling-while-rotating-iphone-ipad)文章解决了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-06T17:57:22.913

嗨，伙计们，这是一个非常古老的问题，但是，如果您想知道`scrollDidScroll`是手动触发（通过手指）还是由于其他事件（如`didSelect`or ）触发`setContentOffset`，请使用该`UIScrollView.isTracking`属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-06T10:34:23.003

在此方法中设置 UICollectionView、UITableView 委托这里

```
override func viewDidLayoutSubviews() {
     super.viewDidLayoutSubviews()
     // This method is called only after all subviews are laid
} 
```

# c# - 线程池上的方法如何排队

> ID：11656056
> 
> 赞同：1
> 
> 时间：2012-07-25T18:16:31.947
> 
> 标签：c#, multithreading, threadpool

我试图了解 ThreadPool.QueueWorkItem 方法的工作原理。但无法理解它是如何工作的。

我创建了一个简单的示例来测试 ThreadPool，当我运行此代码时，它会快速循环并停在 Thread.Sleep() 行。那么 ThreadPool 在这里做了什么。它是否将 10000 个方法存储在内部集合中，然后异步执行它们。（根据内部的一些计算，线程数可以是任何东西=>这就是我所知道的）

1.  如果有一个队列（应该是），我可以获得队列中等待的项目（方法）的计数吗？

2.在示例中，WriteLine 方法很简单，但在我的实际应用中，我正在循环超过 50000 个项目并为数组中的每个项目调用 Web 服务方法、数据库选择/插入/更新 vb..。有可能做这样的事情吗？

```
class Program
{
    static void Main(string[] args)
    {
        new Program().Looper();
    }

    public void Looper()
    {
        for (int i = 0; i < 10000; i++)
        {
            ThreadPool.QueueUserWorkItem(WriteLine, i);
        }

        Thread.Sleep(10000);
    }

    public void WriteLine(object str)
    {
        Debug.WriteLine((int)str);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:20:41.263

> 1）如果有一个队列（应该是），我可以获得队列中等待的项目（方法）的计数吗？

是的，有一个队列，不，你看不到它。它是 ThreadPool 的一个实现细节，无论如何你真的无法用它做任何事情。

> 2.在示例中，WriteLine 方法很简单，但在我的实际应用中，我正在循环超过 50000 个项目并为数组中的每个项目调用 Web 服务方法、数据库选择/插入/更新 vb..。有可能做这样的事情吗？

是的，听起来它可能是池执行的一个很好的候选，因为它需要大量等待外部资源。也就是说，如果您使用的是 .NET 4.0 或更高版本，您可能希望查看[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)而不是自己访问线程池。TPL 为您提供了诸如任务嵌套和延续之类的功能，这些功能是线程池所没有的。它还与 Async 模式原生集成，为您提供改进的异步 I/O 并行性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:20:25.787

当你排队一个项目时，增加一个 int 计数器，然后当进程完成执行时（我相信你可以有一个函数 - 当异步进程完成时委托执行），然后减少该 int 计数器，这应该给你等待的线程数执行。Thread.Sleep 不存储任何内容，它只是阻止任何进一步的进程进入该异步进程。

# asp.net - MVC3 ASP.NET 验证嵌套在局部视图中的表单时，我可以重新加载我的视图吗？

> ID：11656060
> 
> 赞同：0
> 
> 时间：2012-07-25T18:16:55.403
> 
> 标签：asp.net, asp.net-mvc-3, partial-views

我有一个部分视图，我在索引页上使用它来显示表单。当从索引页面上的下拉菜单中选择一个项目时，部分视图将加载相应的表单数据。我需要在提交时验证表单，但我不确定从我的控制器返回什么会在显示错误时正确加载页面。我的提交按钮目前在我的部分视图中。（我尝试将提交移动到索引页面，但它没有从表单返回任何内容。）如果存在验证错误，则部分视图会加载，但索引视图的下拉菜单不会。我已经看到了一些解决这个问题的方法，但没有一个在这种情况下有效，可能是由于下拉菜单。任何帮助是极大的赞赏。请让我知道 HTML 是否有帮助，我在为这篇文章格式化它时遇到问题。

控制器：

```
public class PrinterSettingsController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Areas = db.Areas.ToList();
        PopulateDocumentTypeViewBag();
        return View();
    }

    public ActionResult AreaDocumentSettingsList(int areaId = 0)
    {
        PopulateDocumentTypeViewBag();

        //get area, contains list of document settings
        }

        return PartialView("_AreaDocumentSettingsList", selectedArea);
    }

    [HttpPost]
    public ActionResult AreaDocumentSettingsList(Area selectedArea)
    {

        if (IsPrinterValid(selectedArea.PrinterName) == false)
        {
            ModelState.AddModelError(string.Empty, "Incorrect printer path entered.");
        }

        if (ModelState.IsValid)
        {

            //do some stuff, save the new records to the database

            db.Entry(originalAreaRecord).CurrentValues.SetValues(selectedArea);
            db.SaveChanges();

            //if everything saves fine, go to a different page
        return RedirectToAction("Index", "Workorder");

        }
        //if there are errors -- this part needs to be changed -- show errors in partial view, but also display view it's nested inside of

        return View("_AreaDocumentSettingsList", selectedArea);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:39:10.357

@cshemby 的链接很有帮助：[Updating Partial Views with Unobtrusive AJAX in MVC 3](http://geekswithblogs.net/blachniet/archive/2011/08/03/walkthrough-updating-partial-views-with-unobtrusive-ajax-in-mvc-3.aspx)

但我的问题最终是我将部分视图加载到`<div>`带有 javascript .changed 事件的标签中。为了解决这个问题，我`@Html.RenderPartial`在局部视图的索引页面中添加了一个，并将下拉列表的值传递回我的控制器。这样我就可以重新加载整个页面，包括验证。

# javascript - 为什么 event.clientX 在 firefox 中为 dragend 事件错误地显示为 0？

> ID：11656061
> 
> 赞同：30
> 
> 时间：2012-07-25T18:16:59.973
> 
> 标签：javascript, drag-and-drop, mouse-position

无论当前在哪里，警报`dragend`都显示为零。`mouseX`这在 Chrome 中运行良好，所以不确定我做错了什么。

```
function move(e,obj,but){
    if(typeof(obj) === 'string'){
        obj = document.getElementById(obj) ;
    }

    if(typeof(but) === 'string'){
        but = document.getElementById(but) ;
    }

    //elementCoord(but) ;//get the current coords of the button &
    elementCoord(obj) ;//the container

    e = e || window.event ;
    var mouseX = e.clientX ;
    var mouseY = e.clientY ;

    //alert('mouseX='+mouseX+', but.XCoord '+but.XCoord) ;
    var diffX = Math.abs(obj.XCoord - mouseX) ;
    var diffY = Math.abs(obj.YCoord - mouseY) ;

    but.addEventListener("dragend",function(evt){
        evt = evt || window.event ;
        mouseX = evt.clientX ;
        mouseY = evt.clientY ;
        obj.style.left = mouseX - diffX + 'px';
        obj.style.top = mouseY - diffY + 'px';
        alert('mouseX='+mouseX+' diffX='+diffX) ;
        }
    ,false) ;

} 
```

忘了提，`elementCoord`只是获取对象的偏移量，将其添加为属性。它在所有浏览器中都能正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-08-11T20:22:42.767

这是 Firefox 的正式问题 - [Bugzilla：错误 #505521，在 HTML5 拖动事件期间设置屏幕坐标](https://bugzilla.mozilla.org/show_bug.cgi?id=505521#c80)。我会引用 jbmj 来总结一下，我会加粗他们引用的原始开发人员......

> 我不敢相信这条评论
> “**请注意，虽然它没有指定属性应该设置什么，只是应该设置它们并且我们目前将它们设置为 0。** ”
> 从 11 年前开始仍然是最先进的。

我受到 Jay 的评论的启发，使用了“drop”事件。但这只是一个评论，所以让我把它打造成一个答案。

我们的问题：`dragend`事件已设置为 0。`e.clientY``e.clientX`

我们将如何解决它：`document`的`drop`事件*也*与我们正在拖动的元素的事件同时触发`dragend`。And:将具有***和***`drop` ***的正确值。`e.clientY``e.clientX`***

***两个工作演示，100% JavaScript-Only 解决方案***：SO 代码片段和[JSBin](https://jsbin.com/hiyabib/edit?html,css,js,console,output)。SO Code Snippet 控制台有时会吞噬控制台中拖动的元素，而 JSBin 给了我更一致的结果。

```
var startx = 0;
var starty = 0;
dragStartHandler = function(e) {
  startx = e.clientX;
  starty = e.clientY;
}

dragOverHandler = function(e) {
  e.preventDefault();
  return false;
}

dragEndHandler = function(e) {
  if(!startx || !starty) {
    return false;
  }

  var diffx = e.clientX - startx;
  var diffy = e.clientY - starty;

  var rect = e.target.getBoundingClientRect();

var offset = { 
                top: rect.top + window.scrollY, 
                left: rect.left + window.scrollX, 
            };

  var newleft = offset.left + diffx;
  var newtop = offset.top + diffy;

  e.target.style.position = 'absolute';
  e.target.style.left = newleft + 'px';
  e.target.style.top = newtop + 'px';

  startx = 0;
  starty = 0;
}

document.getElementsByClassName("draggable")[0].addEventListener('dragstart', dragStartHandler);

document.addEventListener('dragover', dragOverHandler);
document.addEventListener('drop', dragEndHandler);
```

```
.draggable {
  border: 1px solid black;
  cursor: move;
  width:250px;
};
```

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>

  <BR><BR><BR>

  <div id="draggable1" class="draggable" draggable="true">
    Hey, try to drag this element!
  </div>

</body>
</html>
```

**解释：**

*   `dragStartHandler()`：这绑定到可拖动元素。在这里，我们所做的只是在开始时记录当前的 x/y 坐标。
*   `dragOverHandler()`：这是绑定到文档的，这样我们就可以覆盖默认的拖动行为。这是执行任何类型的拖放操作所必需的。
*   `dragEndHandler()`: 这个是绑定`document`的`drop`。通常，我们希望 this 绑定到`element`'s `dragend`，但是由于`clientY`和`clientX`缺失，我们将它绑定到文档。这正是您在调用 dragend 时想要发生的事情，除非您有 x/y 坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-14T13:19:07.007

```
document.addEventListener("dragover", function( event ) {
      event.preventDefault();
      console.log(event.pageX)
  }, false); 
```

添加监听 `console.log (event.pageX)`器[http://jsfiddle.net/zfnj5rv4/](http://jsfiddle.net/zfnj5rv4/)`dragover`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T15:06:57.120

前几天我在 Firefox 上遇到了同样的问题。

我设法找到了一种解决方法，尽管它依赖于使用全局变量来存储鼠标前后位置。

似乎使事情正常进行的一点是从 ondrop 事件而不是 ondragend 事件中获取 pageX 和 pageY 值。

唯一的问题是 ondrop 不存储拖动的元素或原始鼠标位置（因此需要全局变量）。

```
var dragDetails = {
   target: null,
   orgMouseX: 0,
   orgMouseY: 0,
   desMouseX: 0,
   desMouseY: 0
}

$("targetElement").on("dragstart", function(event) {
   dragDetails.target = this;
   dragDetails.orgMouseX = event.originalEvent.pageX;
   dragDetails.orgMouseY = event.originalEvent.pageY;
});

$("html").on("drop", function(event) {
   dragDetails.desMouseX = event.originalEvent.pageX;
   dragDetails.desMouseY = event.originalEvent.pageY;
   handleDrag();
}); 
```

这是小提琴中的一个示例：[https ://jsfiddle.net/L1b6uz2d/2/](https://jsfiddle.net/L1b6uz2d/2/)

它似乎可以在最新版本的 Chrome、Firefox、Edge 和 Internet Explorer 上运行（虽然在 Internet Explorer 上的准确度没有那么好），它也可以在 Android Chrome 上运行。还没有测试任何其他人，我相信代码可以改进。

我确实设法让它在不需要全局变量的情况下工作，但我必须使用 ondrop 然后将目标、pageX 和 pageY 作为参数传递给 ondragend 事件（我没有包含小提琴，因为代码非常难看)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-17T20:20:05.520

看起来这个错误可能会在一段时间内仍然是 Firefox 的核心，这里有一个 99% 的补丁：

```
if(/Firefox\/\d+[\d\.]*/.test(navigator.userAgent)
        && typeof window.DragEvent === 'function'
        && typeof window.addEventListener === 'function') (function(){
    // patch for Firefox bug https://bugzilla.mozilla.org/show_bug.cgi?id=505521
    var cx, cy, px, py, ox, oy, sx, sy, lx, ly;
    function update(e) {
        cx = e.clientX; cy = e.clientY;
        px = e.pageX;   py = e.pageY;
        ox = e.offsetX; oy = e.offsetY;
        sx = e.screenX; sy = e.screenY;
        lx = e.layerX;  ly = e.layerY;
    }
    function assign(e) {
        e._ffix_cx = cx; e._ffix_cy = cy;
        e._ffix_px = px; e._ffix_py = py;
        e._ffix_ox = ox; e._ffix_oy = oy;
        e._ffix_sx = sx; e._ffix_sy = sy;
        e._ffix_lx = lx; e._ffix_ly = ly;
    }
    window.addEventListener('mousemove', update, true);
    window.addEventListener('dragover', update, true);
    // bug #505521 identifies these three listeners as problematic:
    // (although tests show 'dragstart' seems to work now, keep to be compatible)
    window.addEventListener('dragstart', assign, true);
    window.addEventListener('drag', assign, true);
    window.addEventListener('dragend', assign, true);

    var me = Object.getOwnPropertyDescriptors(window.MouseEvent.prototype),
        ue = Object.getOwnPropertyDescriptors(window.UIEvent.prototype);
    function getter(prop,repl) {
        return function() {return me[prop] && me[prop].get.call(this) || Number(this[repl]) || 0};
    }
    function layerGetter(prop,repl) {
        return function() {return this.type === 'dragover' && ue[prop] ? ue[prop].get.call(this) : (Number(this[repl]) || 0)};
    }
    Object.defineProperties(window.DragEvent.prototype,{
        clientX: {get: getter('clientX', '_ffix_cx')},
        clientY: {get: getter('clientY', '_ffix_cy')},
        pageX:   {get: getter('pageX', '_ffix_px')},
        pageY:   {get: getter('pageY', '_ffix_py')},
        offsetX: {get: getter('offsetX', '_ffix_ox')},
        offsetY: {get: getter('offsetY', '_ffix_oy')},
        screenX: {get: getter('screenX', '_ffix_sx')},
        screenY: {get: getter('screenY', '_ffix_sy')},
        x:       {get: getter('x', '_ffix_cx')},
        y:       {get: getter('y', '_ffix_cy')},
        layerX:  {get: layerGetter('layerX', '_ffix_lx')},
        layerY:  {get: layerGetter('layerY', '_ffix_ly')}
    });
})(); 
```

请注意，尽管 OP 的问题仅针对“dragend”，但这是对所有受影响事件的修复。

它从“mousemove”和“dragover”事件中获取鼠标的最后一个准确坐标，并将它们植入到受影响的“dragstart”、“drag”和“dragend”事件中。

请注意，这不是一个*精确的*修复。x / y 坐标可能略有偏差。由于 'drag' 事件发生在 'dragover' 之前，它使用前一个事件框架的坐标执行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-10-31T11:47:41.643

不要使用 e.clientX 或 e.clientY

请改用 e.pageX 和 e.pageY 或 e.targetTouches[0].pageX e.targetTouches[0].pageY（用于触摸屏）。

pageX 指的是文档，clientX 指的是视口。也可以看看：

[https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/pageX](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/pageX) [https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientX](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientX)

# java - 静态/类变量的值是如何传递的？

> ID：11656062
> 
> 赞同：3
> 
> 时间：2012-07-25T18:17:01.850
> 
> 标签：java, static-members, class-variables

静态/类变量在类型/类中定义，据说与定义它的类型/类相关联，并且独立于类型/类的实例。类型/类中只有一个静态/类变量，最适合用于类似常量的属性，其值在类的任何实例中都是通用的。静态/类变量的状态始终存在于类中，因此类中的任何时刻都只有一个变量，关键字 static 用于定义变量的这种性质。最佳实践中的静态/类变量将被初始化一次，并使用关键字 final 确保这一点。最终的静态变量将使用不可变集合初始化，如在 new String() 或 new Integer() 中；

现在我的问题是如何使用静态变量的值？而这个变量的用途是什么？例如，它是从包含它的类中复制它的值，还是对类中变量的显式引用？

例如

```
class GenericType {
    private final static String commonValue = new String("foobar");
} 
class AnotherGenericType {
    public static void main(String[] args) {
        System.out.println(GenericType.commonValue); //Displays foobar in the console.

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:21:51.007

有专门为存储`static`变量分配的空间。这在[JLS, 8.3.1.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.1)中指定，其中指出

> 如果一个字段被声明为静态的，那么无论最终创建多少个类的实例（可能为零），都只存在该字段的一个化身。静态字段，有时称为类变量，在类初始化时体现。

值得注意的是，这些变量在类被卸载之前不会被垃圾收集打开（这通常不会经常发生），这可能会导致意外的内存引用被持有。

访问静态成员可能被称为“静态访问”（我以前听说过它），但通常它没有自己的术语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:21:19.160

静态变量与类本身相关联，而不是与类的实例相关联。`static`当类在运行时加载时，任何用关键字标记的东西都会被初始化。这就是为什么你可以用类名来调用它们，以及为什么你可以在不创建对象的情况下使用它们。

JLS 指定使用静态变量被称为：`using a static variable`. 只是在开玩笑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:24:30.850

它只是一个参考。

在这种情况下，as`commonValue`定义为`final`并且`String`是不可变的，您看不到它。但假设以下代码：

```
public class GenericType {
    public static Collection myCollection = new ArrayList();
}

public class Test {

    public static void main(String[] args) {
        // you are accessing the public static field
        GenericType.myCollection.add("first item");
        System.out.println(GenericType.myCollection);

        // now c holds a reference for the collection that is referred by myCollection field
        Collection c = GenericType.myCollection;
        GenericType.myCollection.add("second item");
        GenericType.myCollection = new ArrayList();

        // printing the object referred by c (the old reference hold by myCollection field)
        System.out.println(c);

        // and here the current reference of myCollection field
        System.out.println(GenericType.myCollection);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:23:43.397

正如@Francisco Spaeth 所指出的，JLS 很明确：实例之间只有一个静态值共享。
但是一个类可以用不同的类加载器加载到同一个程序中，这意味着每个类加载器可能有不同的静态值。举个例子：

```
package classloaders;

import java.lang.reflect.Field;
import java.net.URL;
import java.net.URLClassLoader;

class SampleClass{
    static public final long loadTime = System.nanoTime();
}

public class Main {

    public static void main(String[] args) throws Exception {

        URL url = new URL("file:///C:/workspaces/personal/JavaTest/bin/");
        ClassLoader cl1 = new URLClassLoader(new URL[]{url}, null);
        ClassLoader cl2 = new URLClassLoader(new URL[]{url}, null);

        Class<SampleClass> sampleClass = (Class<SampleClass>) cl1.loadClass("classloaders.SampleClass");
        Field field1 = sampleClass.getField("loadTime");
        field1.setAccessible(true);
        System.out.println(field1.get(null));

        Class<SampleClass> sampleClass2 = (Class<SampleClass>) cl2.loadClass("classloaders.SampleClass");
        Field field2 = sampleClass2.getField("loadTime");
        field2.setAccessible(true);
        System.out.println(field2.get(null));

    }

} 
```

如果您运行此代码，您将类似于

```
193798032450350
193798062432257 
```

所以你可以通过使用不同的类加载器在同一个类的同一个静态字段中看到两个不同的值。

但这是一个非常奇怪的案例......

# jsoup - 如何在java中使用Regex获取页面元（标题，描述，图像），如facebook附加url

> ID：11656064
> 
> 赞同：14
> 
> 时间：2012-07-25T18:17:12.173
> 
> 标签：jsoup

如何使用 .java 中的正则表达式获取页面元（标题、描述、图像），如 facebook 附加 url

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-18T19:17:47.537

这是一个读取网页并构建一小块 HTML 的片段，它将显示 Open Graph 图像，右侧的标题环绕图像。如果缺少 OG 标签，它会退回到仅使用 html 标题，因此它可以代表所有网页。

```
public static String parsePageHeaderInfo(String urlStr) throws Exception {

    StringBuilder sb = new StringBuilder();
    Connection con = Jsoup.connect(urlStr);

    /* this browseragant thing is important to trick servers into sending us the LARGEST versions of the images */
    con.userAgent(Constants.BROWSER_USER_AGENT);
    Document doc = con.get();

    String text = null;
    Elements metaOgTitle = doc.select("meta[property=og:title]");
    if (metaOgTitle!=null) {
        text = metaOgTitle.attr("content");
    }
    else {
        text = doc.title();
    }

    String imageUrl = null;
    Elements metaOgImage = doc.select("meta[property=og:image]");
    if (metaOgImage!=null) {
        imageUrl = metaOgImage.attr("content");
    }

    if (imageUrl!=null) {
        sb.append("<img src='");
        sb.append(imageUrl);
        sb.append("' align='left' hspace='12' vspace='12' width='150px'>");
    }

    if (text!=null) {
        sb.append(text);
    }

    return sb.toString();       
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T07:23:02.290

正如 Ishikawa Yoshi 提到的，使用[JSoup](http://jsoup.org)

例子：

```
Document doc = Jsoup.connect("http://example.com/").get()
for(Element meta : doc.select("meta")) {
    System.out.println("Name: " + meta.attr("name") + " - Content: " + meta.attr("content"));
} 
```

此代码未经测试，希望对您有所帮助。

使用 RegEx 抓取文档是个坏主意，请[在 Coding Horror 上阅读](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-21T06:09:37.697

这个怎么样？下面的语句解析所有以“og：”开头的标签。这很有用。

> doc.select("元[属性^=og:]")

```
void parseOGTag(String response) {
    // Parse og tags
    Document doc = Jsoup.parse(response);
    Elements ogTags = doc.select("meta[property^=og:]");
    if (ogTags.size() <= 0) {
        return;
    }

    // Set OGTags you want
    String title;
    String desc;
    String image;
    for (int i = 0; i < ogTags.size(); i++) {
        Element tag = ogTags.get(i);

        String text = tag.attr("property");
        if ("og:image".equals(text)) {
            image = tag.attr("content");
        } else if ("og:description".equals(text)) {
            desc = tag.attr("content");
        } else if ("og:title".equals(text)) {
            title = tag.attr("content");
        }
    }                    
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-16T13:41:49.793

我使用[JSOUP](https://jsoup.org/)来获取一个`Document`对象，然后使用类似下面的方法来获取我正在寻找的每个属性的标签。

```
String findTag(Document document, String property) {
    String tag = null;
    String cssQuery = "meta[property='og:" + property + "']";
    Elements elements = document.select(cssQuery);

    if (elements != null && elements.size() >= 1) {
        tag = elements.first().attr("content");
    }
    return tag;
} 
```

我经常使用它来决定将获取（使用 JSOUP）和解析组合到一个名为[ogmapper](https://github.com/iumehara/ogmapper)的库中。

# cakephp-2.0 - 带有 url 前缀故障的 CakePHP 登录重定向

> ID：11656069
> 
> 赞同：0
> 
> 时间：2012-07-25T18:17:39.060
> 
> 标签：cakephp-2.0

我正在使用 Cakephp 2.0，我遇到了一些关于未经授权的用户被重定向的小故障。
我的 CakePHP 网站在这个 url 上有登录表单。

```
localhost/users/login 
```

因此，如果我尝试访问 localhost/users/dashboard，它会重定向到正确的登录表单。
但是，如果我尝试访问具有前缀的 url，例如 localhost/api/users/getInfo，它会重定向到 localhost/api/users/login（请注意登录表单 url 的额外前缀）

如何确保无论我是否使用前缀，未经授权的用户总是会被重定向到正确的登录表单？

这是我现在添加组件的方式。

```
public $components      = array('Auth' => array(
                                                    'loginRedirect' => array('controller'=>'users', 'action'=>'dashboard'),
                                                    'logoutRedirect' => '/',
                                                    'authError' => "You can't access that page",
                                                    'authorize' => array('Controller')
                                                    )); 
```

谢谢，
三通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:46:44.707

想通了。

我需要添加这个

```
'loginAction' => array('api' => false, 'controller'=>'users', 'action'=>'login') 
```

没有“前缀”=> false，这有点奇怪，但我必须指定所有前缀。

# mysql - 检查主键 SQL 是否不存在行

> ID：11656071
> 
> 赞同：0
> 
> 时间：2012-07-25T18:17:39.647
> 
> 标签：mysql, sql, select

我有四个（相关）表

```
CAKETABLE
CAKE      ICING

RESERVEDSPRINKLES
CAKE      SPRINKLE

SPRINKLETABLE
SPRINKLE  CONSUMED

ICINGTABLE
ICING     CONSUMED 
```

每个蛋糕正好有 3 次洒水和 1 次糖霜。

我想查询数据库并获取所有具有 1 个糖衣和 3 个糖衣的蛋糕，其中糖衣和任何糖衣都没有 CONSUMED = '1'。

所以让我们假装插入数据： INSERT INTO ICINGTABLE (vanilla, 0), (chocolate, 0);

```
INSERT INTO SPRINKLETABLE (red, 0), (blue, 0), (green, 0), (orange, 0), (purple, 0),(pink, 0);

INSERT INTO CAKETABLE (cake1, vanilla), (cake2, chocolate);

INSERT INTO RESERVEDSPRINKLES (cake1, red), (cake1, blue), (cake1, green), (cake2, orange), (cake2, purple), (cake2, pink); 
```

所以现在我有一个带有香草糖衣和红色、蓝色、绿色糖衣的蛋糕 1 和带有巧克力糖衣和橙色、紫色和粉红色糖衣的蛋糕 2。

当我运行查询时，我希望它返回

```
CAKES
cake1
cake2 
```

仅当蛋糕中没有消耗的部分时，所以即使一个洒被标记为消耗，我想从查询中省略整个蛋糕。以下查询正是为结冰做的。

```
SELECT CAKE
FROM CAKETABLE as c
INNER JOIN (SELECT * FROM ICINGTABLE WHERE CONSUMED = '0') as i
ON c.ICING = i.ICING; 
```

但是对于洒水器，我遇到了麻烦。如果我使用与上述相同的技术，我的查询将返回：

```
CAKE
cake1
cake1
cake1
cake2
cake2
cake2 
```

我可以用 DISTINCT 消除它，但它仍然不正确，因为如果任何洒水已经消耗 = '0' 它会在我想要相反的功能时显示列表中的蛋糕（蛋糕仅在所有洒水都消耗 ='0' 时显示)

如果有人对此有更好的标题名称，将不胜感激。我想不出任何描述性和简短的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:21:38.647

您可以使用`not exists`来要求不消耗糖霜或洒水：

```
select  cake
from    caketable c
where   not exists
        (
        select  *
        from    icingtable i
        where   i.cake = c.cake
                and i.consumed = '1'
        )
        and not exists
        (
        select  *
        from    sprinkletable s
        where   s.cake = c.cake
                and s.consumed = '1'
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:23:15.460

假设一个蛋糕总是恰好有 3 次洒水，您可以`GROUP BY`蛋糕并使用它`HAVING`来过滤任何没有 3 次未食用洒水的蛋糕：

```
SELECT CAKE
FROM CAKETABLE as C
INNER JOIN (
    SELECT * FROM ICINGTABLE WHERE CONSUMED = '0'
) as I ON C.CAKE = I.CAKE
INNER JOIN (
    SELECT CAKE FROM SPRINKLETABLE 
    WHERE CONSUMED = '0'
    GROUP BY CAKE
    HAVING COUNT(*) = 3
) as S ON C.CAKE = S.CAKE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:41:34.480

我认为以下内容可以满足您的要求：

```
select ct.cake
from caketable ct join
     reservedsprinkle rs
     on ct.cake = rs.cake join
     sprinkletable st
     on rs.sprinkle = st.sprinkle join
     icingtable it
     on ct.cake = it.cake
where it.consumed = 0
group by ct.cake
having count(distinct rs.sprinkle) = 3 and
       sum(case when st.consumed = 1 then 1 else 0 end) = 0 
```

这是按蛋糕分组，然后将大部分条件放在 HAVING 子句中。通过数据库设计，看起来蛋糕只能有一个糖衣。我假设 CAKE 在 CAKE 表中是唯一的。

# java - 未使用 Ant 编译的 Android 注释

> ID：11656076
> 
> 赞同：2
> 
> 时间：2012-07-25T18:18:14.587
> 
> 标签：java, android, ant, android-annotations

[遵循此处](https://github.com/excilys/androidannotations/wiki/Building-Project-Ant)列出的所有步骤后，我发现我的 (Class)_ 仍未生成。

自定义规则：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules">
<target name="-compile" depends="-build-setup, -pre-build, -code-gen, -pre-compile">
<do-only-if-manifest-hasCode elseText="hasCode = false. Skipping...">
    <!-- merge the project's own classpath and the tested project's classpath -->
    <path id="project.javac.classpath">
        <path refid="project.all.jars.path" />
        <path refid="tested.project.classpath" />
    </path>
    <javac encoding="${java.encoding}"
           source="${java.source}" target="${java.target}"
           debug="true" extdirs="" includeantruntime="false"
           destdir="${out.classes.absolute.dir}"
           bootclasspathref="project.target.class.path"
           verbose="${verbose}"
           classpathref="project.javac.classpath"
           fork="${need.javac.fork}">
        <classpath>
            <fileset dir="compile-libs" includes="*.jar"/>
        </classpath>
        <src path="${source.absolute.dir}" />
        <src path="${gen.absolute.dir}" />
        <compilerarg line="${java.compilerargs}" />
    </javac>
<!-- bunch of if conditions here -->
</target>
</project> 
```

日志：

> C:{path}{Class}.java (8:34) 找不到符号类 Activity_
> 
> 注意：启动AndroidAnnotations注解处理
> 
> ：“[dummy1343240015623]”类型的未关闭文件；这些类型不会进行注释处理

似乎在找不到 Activity_*之后开始处理。*错误还是按预期？

所有文件都在正确的位置（在 \libs 中的 api.jar，在 \compile-libs 中的 .jar），并且无法为我的生活找出任何东西。

**编辑：**四处逛逛。在 AndroidAnnotations 生成的源文件夹中添加了一个新`property`文件夹，将其添加到`javac` `src`路径中`-compile`，但仍然没有运气。我第一次运行 ant 脚本时，它告诉我它找不到任何生成的类，第二次，它告诉我它们都有重复（仍然给我`unclsed files for types...`错误消息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:35:46.320

所以，这里可能的解决方案。我需要为 javac 编译本身添加一些编辑，以及上面的 delete 和 mkdir，以便它会不断地重新生成它需要的所有文件，而不是由于覆盖权限而对自身产生错误。

```
<target name="-compile"
        depends="-build-setup, -pre-build, -code-gen, -pre-compile">
    <do-only-if-manifest-hasCode elseText="hasCode = false. Skipping...">
        <!-- merge the project's own classpath and the tested project's classpath -->
        <path id="project.javac.classpath">
            <path refid="project.all.jars.path"/>
            <path refid="tested.project.classpath"/>
        </path>

        <delete dir="${out.aagen}"/>

        <mkdir dir="${out.aagen}"/>
        <javac encoding="${java.encoding}"
               source="${java.source}"
               target="${java.target}"
               debug="true"
               extdirs=""
               includeantruntime="false"
               destdir="${out.classes.absolute.dir}"
               bootclasspathref="project.target.class.path"
               verbose="${verbose}"
               classpathref="project.javac.classpath"
               fork="${need.javac.fork}">
            <src path="${source.absolute.dir}"/>
            <src path="${gen.absolute.dir}"/>
            <src path="${out.aagen}"/>
            <compilerarg line="${java.compilerargs}"/>
            <compilerarg line="-processorpath ${processorpath}"/>
            <compilerarg line="-processor ${processor}"/>
            <compilerarg line="-s ${out.aagen}"/>
        </javac>
    <!-- a bunch of other crap that is unimportant -->
</target> 
```

# php - 从一个字符串 PHP 中提取 2 个数字

> ID：11656078
> 
> 赞同：-4
> 
> 时间：2012-07-25T18:18:27.150
> 
> 标签：php, regex

我有像下面这样的字符串变量，它有两个数字的字符串

```
EUR 66,00 + EUR 3,90 Versandkosten 
```

我需要将两个数字 ex - 66,00 和 3,98 分别提取到两个变量中。谁能告诉我该怎么做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:07:46.980

> 我需要将两个数字 ex - 66,00 和 3,98 分别提取到两个变量中。谁能告诉我该怎么做

在 PHP 中有很多很多（和很多）方法可以做到这一点。这里有一对。

```
1\. sscanf($subject, 'EUR %[0-9,] + EUR %[0-9,]', $one, $two);

2\. preg_match_all('/[\d,]+/', $subject, $matches); list($one, $two) = $matches[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:20:01.860

如果字符串总是看起来像这样，那么这样的正则表达式应该可以工作：

```
$string = "EUR 66,00 + EUR 3,90 Versandkosten";
preg_match("/([0-9,]+).+([0-9,]+)/", $string, $matches);
var_dump($matches[1], $matches[2]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T20:02:20.147

考虑到这个字符串

```
$string = 'EUR 66,00 + EUR 3,90 Versandkosten';
$ar=explode($string,' ');
$a=$ar[1];
$b=$ar[4]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T18:20:31.730

```
preg_match('#([0-9,]+).*?([0-9,]+)#', $String, $Matches); 
```

您的号码将在`$Matches[1]`和`$Matches[2]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T18:44:56.877

这是正确的：

```
<pre>
<?php
// 1The given string
$string = 'EUR 66,00 + EUR 3,90 Versandkosten';
// 2Match with any lowercase letters
$pattern[0] = '/[a-z]/';
// 3Match with any uppercase letters
$pattern[1] = '/[A-Z]/';
// 4Match with any commas
$pattern[2] = '/(,)/';
// 5Match with any spaces
$pattern[3] = '/( )/';
// 6 Remove the matched strings
$stripped = preg_replace($pattern,'',$string);
// Split into array from the matched non digit character + in this case.
$array = preg_split('/[\D]/',$stripped);
print_r($array);
?>
</pre> 
```

# c# - 如何从另一个表单启用一个表单

> ID：11656079
> 
> 赞同：1
> 
> 时间：2012-07-25T18:18:28.040
> 
> 标签：c#

我创建了两个表单：一个登录表单，以及一个在我开始调试时显示的主表单。加载主表单时，登录表单也已加载。现在我的问题是，我想在加载登录表单时禁用主表单。如果连接成功，则必须启用主窗体，否则应禁用。

我试过这段代码：

**MainFrm .cs ：**

```
private void Form1_Load(object sender, EventArgs e)
{
foreach (Control c in this.Controls)
c.Enabled = false;
Connectez ConnectezFrm = new Connectez { TopMost = true, Owner = this };
ConnectezFrm.Show();
} 
```

**Connectez.cs：**

```
private MainFrm objMainfrm { get; set; }
public Connectez(MainFrm objfrm)
{
objMainfrm = objfrm;
InitializeComponent();
}
....
....
private void simpleButton1_Click(object sender, EventArgs e)
{
foreach (Control c in objMainfrm.Controls)
c.Enabled = true;
this.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:21:00.297

使用`ShowDialog(this)`而不是`Show()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:22:25.650

您无需禁用表单上的单个控件即可禁用该表单。你可以使用

```
objMainForm.Enabled = false; 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled)

但是，您真正想做的只是显示一个模态对话框。采用

```
ConnectezFrm.ShowDialog(); 
```

模态对话框在它们处于活动状态时会阻止与它们的父级交互。

此外，您似乎试图通过将对您的主表单的引用传递给子表单来实现这一点：

```
public Connectez(MainFrm objfrm) 
```

这不是获得模态对话框效果所必需的。

如果您需要在连接失败时采取一些措施，您可以从 Connectez返回一个[DialogResult 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult.aspx)像这样检查 DialogResult：

```
DialogResult dr = ConnectezFrm.ShowDialog();
if (dr != DialogResult.OK) {
    // Do something e.g. disable certain parts of the form
    // Be sure to leave a button or something enabled to load ConnectezFrm again :-)
} 
```

# ruby-on-rails - 用于备份和恢复数据库的 Rake 任务

> ID：11656080
> 
> 赞同：8
> 
> 时间：2012-07-25T18:18:32.690
> 
> 标签：ruby-on-rails, database

我正在做一个 Rails 项目，有时我在家里编程，有时在工作中。在我的开发过程中，我向数据库中添加数据，我确实需要一种方法来同步家庭和工作中的数据库。

我正在考虑在 Rails 应用程序中备份/恢复整个数据库的 Rake 任务。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T18:36:46.980

写一个 rake 任务：

```
namespace :db do
  task :backup do
    system "mysqldump --opt --user=root --password rose userdetails> xyz.sql"
  end

  task :restore do
    system "mysqldump --user=root --password  < xyz.sql"
  end
end 
```

通过`rake db:backup`您将获得可以提交到 git/svn 的 sql，并且一旦您在家工作以恢复拉取并运行`rake db:restore`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T18:31:16.670

我使用一个脚本将数据库转储到特定位置，第二个脚本获取转储并使用它来恢复指定的数据库。我使用 When gem 来安排每日备份（通过调用第一个脚本），方法是将其放入 schedule.rb 文件中：

```
 every :day, :at => "05:00" do
    command "/var/www/current/script/db_backup.sh -n #{@db_name}"
  end 
```

脚本的确切内容取决于您使用的数据库。当我使用 postgreSQL 时，备份脚本在确定转储的正确位置后，运行 pg_dump：

```
pg_dump -F t -U username -f file_location<timestamp>.dat database_name 
```

我用来将生产备份复制到本地数据库进行测试的“恢复”脚本使用 pg_restore：

```
pg_restore -U username -O -x -d database_name_new path/to/file 
```

如果您使用的是其他数据库，这些工具显然会有所不同，但大多数数据库都支持某种形式的备份和恢复。

# html - HTML + CSS - 将图像发送到后面

> ID：11656091
> 
> 赞同：0
> 
> 时间：2012-07-25T18:19:30.177
> 
> 标签：html, css, image

我最近遇到了关于我的背景和文本的问题 - 当显示背景时，然后在其下方显示文本。我尝试过使用多个教程，但似乎都没有奏效。

帮助将不胜感激！

代码在这里： http: [//pastie.org/4331611](http://pastie.org/4331611)

当前的问题在这里清楚地显示：http: [//i.imgur.com/0vBzJ.png](http://i.imgur.com/0vBzJ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:30:52.130

下面的代码应该做到这一点：

```
<body>
   <div style="margin: 0px auto; width: 1000px; text-align: center;">
       <div style="background-image: url('http://files.enjin.com/71917/images/Status/BG.png');">Test Data</div> 
```

但是这段代码存在各种各样的问题。你不应该使用中心标签（我已经在第一个 DIV 中演示了你应该做什么）。还将字体详细信息也移动到样式属性中，并且您应该将样式从样式属性中拉出，并将它们放在 HEAD 中的样式标记或外部样式表中。

```
<head>
    <style type="text/css">
        /*styles go here*/
    </style>
</head> 
```

添加：

图片帮助我更好地理解你想要完成的事情。我认为您真正想要做的是稍微更改 DIV 的嵌套。尝试类似：

```
<div id="container" style="margin: 0px auto; width: 350px; text-align: center; background-image: url('http://...image.png');">
   <div id="theContentDivs">LOSTCRAFT SMP</div>
   <div id="theContentDivs">LOSTCRAFT PVP</div>
</div> 
```

# java - 在 Eclipse 上运行时，我可以看到paintComponent 的结果，但在 HTML 上看不到

> ID：11656094
> 
> 赞同：-2
> 
> 时间：2012-07-25T18:19:44.400
> 
> 标签：java, html, japplet

```
public class Test extends JApplet {
    public void init () {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createGUI();
            }
        });
    }

    public void createGUI() {
        getContentPane().add(new GUIThing());
    }
}

public class GUIThing extends JPanel {
    BufferedImage image;
    public GUIThing() {
    try {
        image=ImageIO.read(new File("gladiator.gif"));
    } catch (IOException e) {
        e.printStackTrace();
    }
    }
    public void paintComponent(Graphics g) {
        g.drawString("WTF", 20, 20);
        g.drawImage(image,100,100,100, 100, null);
    }
}

<applet code="test.Test"
        archive="test.jar"
        width = 1000,
        height = 1000 > 
```

gladiator.gif 与 HTML 文件放在同一目录中，但它不会被绘制。

我试过不包括gladiator.gif，而不是写字符串Coulnt!!! 它显示一个空白的白页...

如果有人想试一试，这就是角斗士： ![如果有人想试一试，这就是角斗士](../Images/665cef85d73282e09eec1a980af51cda.png)

当我删除与 drawImage 相关的行时，它确实显示了 WT 字符串，所以我猜这只是图像绘制的奇怪之处，它可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:59:11.863

`File`正如您的 Java 控制台所报告的那样，典型的（不受信任的）小程序无法创建对象。形成`URL`图像，并改用它。

# java - Java 运行 JarInputStream

> ID：11656095
> 
> 赞同：1
> 
> 时间：2012-07-25T18:19:51.113
> 
> 标签：java, jar, encryption

我已经搜索了几个小时，但没有找到任何关于此的内容。

我有一个 jarinputstream，他读取一个加密的 jar 并解密它

```
JarInputStream jin = new JarInputStream(new CipherInputStream(in, dcipher)); 
```

我得到了确认的工作，因为当我这样做时它会打印出类名

```
while ((je = jin.getNextJarEntry()) != null) {
      jename = je.getName(); 
```

如果我打印出 jename，它将打印出类名和路径，因此我知道它可以很好地解密。

但是现在，当我想运行 Main.class 时，我不知道该怎么做。我不想将文件保存到磁盘，只需将其保存在内存中即可。

关于如何从该 jarinputstream 在内存中创建和运行 jar 的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:12:39.123

您需要子类化`ClassLoader`并实现`findClass()`以获取给定类的解密数据并将其发送到`super.defineClass()`.

请参阅[ClassLoader](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)文档，或者您可以从[JarClassLoader 教程](http://docs.oracle.com/javase/tutorial/deployment/jar/jarclassloader.html)中获得一些灵感，或者可能是[http://www.javaworld.com/javaworld/javaqa/2003-05/01-qa-0509-jcrypt.html?page=2](http://www.javaworld.com/javaworld/javaqa/2003-05/01-qa-0509-jcrypt.html?page=2)或[通过 URLCassloader 加载加密的 JarFile](https://stackoverflow.com/questions/13965095/loading-encrypted-jarfile-via-urlcassloader)

# android - 如何在 Android 中设置微调器值运行时

> ID：11656098
> 
> 赞同：8
> 
> 时间：2012-07-25T18:20:03.920
> 
> 标签：android, android-spinner

我想在运行时设置 android spinner item 值。

这是我到目前为止所拥有的：

```
final ArrayAdapter<String> calsListAdapter = new ArrayAdapter<String>( this,
                android.R.layout.simple_list_item_1, calendarNames);
eventCalendarList.setAdapter(calsListAdapter);
eventCalendarList.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        calendarChoosen = availableCals.get(arg2);
    }
    public void onNothingSelected(AdapterView<?> arg0) {
        Logger.d("Cal Choosen", "fffffffffffffff");
    }
});

private List<AvailableCalendar> availableCals = new ArrayList<AvailableCalendar>();
private AvailableCalendar calendarChoosen; 
```

但是没有设置值。怎么做到呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T19:39:07.023

我将在这里假设您基于 a`List<CharSequence>`或类似的东西创建 Spinner 的适配器。您可以使用它来查找选择，例如：

```
String name = model.getName();
int index = list.indexOf(name);
if (index != -1) spinner.setSelection(index); 
```

显然，如果您的模型不包含任何“名称”数据，则在 Spinner 中没有任何选择，因此您可能需要添加一些逻辑来处理它。如果模型确实有一个“名称”，则在用作适配器数据源的原始列表中找到它的索引。仅当找到一个事件时，将微调器的选择设置为相同的索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T23:44:24.567

我以编程方式设置微调器值，如下所示：

```
public class MainActivity extends Activity {
    private SharedPreferences prefs;
    private String prefName = "spinner_value";
    int id=0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final List<String> list=new ArrayList<String>();
        list.add("Item 1");
        list.add("Item 2");
        list.add("Item 3");

        final Spinner sp=(Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> adp= new ArrayAdapter<String>(this,
                                    android.R.layout.simple_list_item_1,list);
        adp.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        sp.setAdapter(adp);

        prefs = getSharedPreferences(prefName, MODE_PRIVATE);
        id=prefs.getInt("last_val",0);
        sp.setSelection(id);

        sp.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, 
                View arg1,int pos, long arg3) {

            prefs = getSharedPreferences(prefName, MODE_PRIVATE);
            SharedPreferences.Editor editor = prefs.edit();
            //---save the values in the EditText view to preferences---
            editor.putInt("last_val", pos);

            editor.commit();

            Toast.makeText(getBaseContext(), 
                sp.getSelectedItem().toString(), Toast.LENGTH_SHORT).show();
        }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub                   
        }
    });               
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-08T12:43:56.487

在 kotlin 中会是这样的：

```
spinner.adapter = ArrayAdapter(
            context,
            android.R.layout.simple_list_item_1,
            stringList
) 
```

# php - 缓存先前对 JSON 的搜索，每小时更新一次

> ID：11656108
> 
> 赞同：0
> 
> 时间：2012-07-25T18:20:32.987
> 
> 标签：php, caching

我有一项从天气 API 中提取的服务，它只允许我每天调用它 500 次，因为我找不到任何具有每小时数据的免费天气 API。该服务调用 api，该 api 每次用户点击页面时都会返回一个 JSON 数组。

由于我是目前唯一使用该服务的人，这不是问题，但对于未来，我希望缓存搜索结果并在一两个小时后让它们过期，因为数据变化相当频繁。

因此，如果用户输入他们的 zip，则结果将被缓存 2 小时。如果他们按下刷新，它将从缓存中提取保存的数据，或者如果另一个用户进入并键入相同的 zip，它将从缓存中提取。

减少 API 请求总数的最佳方法是什么？我考虑过使用 SQL，但它似乎不太合适，因为数据有些动态，并且超过 50,000 多个拉链有许多不同的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:32:38.480

首先，我会准备一个包含以下字段的表格：`request_sig`, `response_data`, `timestamp`。

这是我要遵循的“算法”：

1.  用户请求天气信息。
2.  获取 API 调用参数“giveMeWeather.com `/zip/10001`”并对它们进行哈希处理。
3.  检查数据库中的哈希值（`sig`），如果我找到匹配项 => 则返回`response_data`.
4.  如果我没有找到匹配项，请调用您的 API 并将响应存储在数据库中，然后将响应提供给客户端。
5.  清理`cronjob`表并删除旧条目（检查`timestamp`旧条目）。

这不会解决 500 次调用的限制，但它是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:53:39.690

为什么不使用 SQL 数据库？

这似乎相当简单。要记住的一件事是在每个 API 调用中捕获尽可能多的信息。如果 API 允许您一次获取不止一条信息，请尽可能多地获取，这样您就不必返回 API。

**注意：**此解决方案无法解决您只能访问 API 500 次的事实。它只是为您提供了一种方法，您不必在每个邮政编码中多次返回 API。

1.  输入邮政编码
2.  检查您的数据库以查看您是否已经存储了该 zip（如果有，请检查时间戳以查看是否要转到 API 以获取更新的信息）
3.  如果它不在您的数据库中，请放置您的 API 调用并将返回的信息存储在数据库中，使用 Zip 作为识别数据

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-25T18:58:48.630

有很多可用的缓存系统。您可以指定希望数据缓存多长时间，并且可以为保存的数据的每个部分提供自己的密钥。有些是 memcached、APC 和 XCache。我不确定他们是使用数据库、文件还是缓存什么。

# html - div的动态大小

> ID：11656112
> 
> 赞同：0
> 
> 时间：2012-07-25T18:21:08.557
> 
> 标签：html, css

我有一个只有最小高度的 div。但是，当 div 中的内容（还有几个带有文本和图像的 div）开始在高度上扩展时，div 不会相应地扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:25:34.933

将 div 放入`height:auto`样式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:28:04.020

尝试将 CSS 属性添加`overflow: auto;`到包含`div`.

一些浏览器会自动调整 div 的大小以随其中的内容缩放。许多人没有。将溢出属性设置为自动要求 div 展开以包含任何溢出其原始边界的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:43:43.413

Ben L 回答 + 如果您在该容器中有一些浮动元素，请将

```
<div style="clear: both;"></div> 
```

在最后一个浮动元素之后。另外，你没有告诉我们你有一些立场：绝对元素吗？如果有，请将 position:relative 放在容器上。

# swing - 如何在没有用户鼠标选择行的情况下选择程序中表中的所有行？

> ID：11656114
> 
> 赞同：0
> 
> 时间：2012-07-25T18:21:11.080
> 
> 标签：swing

我正在使用 JTable。假设我有一个包含以下信息的表 -

```
 col1     col2    col3    col4
row1    ---      value1   ---    ---
row2    ---      value2   ---    ---
row3    ---      value3   ---    ---
row4    ---      value3   ---    ---
row5    ---      value1   ---    ---
row6    ---      value1   ---    ---
row7    ---      value2   ---    ---
row8    ---      value1   ---    --- 
```

我需要将 col2 值为“value1”的行复制到另一个表中。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:36:31.350

我假设你的意思是在你的程序中。

```
int rowCount = table.getRowCount();
int columnCount = table.getColumnCount();
int row = 0; 

for (int i = 0; i < rowCount; i++) {
    String value = table.getValueAt(i, 2);
    if (value.equals("value2") {
        for (int j = 0; j < columnCount; j++) {
            value = table.getValueAt(i, j);
            newTable.setValueAt(value, row, j): 
        }
        row++;
    }
} 
```

# python - 解码python base64字符串

> ID：11656115
> 
> 赞同：10
> 
> 时间：2012-07-25T18:21:16.633
> 
> 标签：python, base64, decode

我已经提取了图像的前色、纹理和边缘图值的 base64 字符串，我有一个具有以下结构的列表：

```
forecolor=AgCEAg4DUQQCBQQGARMBFQE1AmUB
edge=AfCAFg5iIATCPwTAEIiBFggBDw
forecolor=AgAsAQ0CJAMcDRgOGg8DHQYeBzYBPQ4-DU0ETgNtBm4CfQI 
```

我正在尝试解码这些值，但我收到了不正确的填充错误，这是确切的错误：

```
Traceback (most recent call last):
  File "ImageVectorData.py", line 44, in <module>
    print "Decoded String: " + decoded.decode('base64', 'strict')
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/base64_codec.py", line 42, in base64_decode
    output = base64.decodestring(input)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/base64.py", line 321, in decodestring
    return binascii.a2b_base64(s)
binascii.Error: Incorrect padding 
```

这是我的代码：

```
for item in value:
    print "String before Split: " + item
    if item.split("=")[0] == "forecolor":
        decoded = (item.split("=")[1])
        print "String to be decoded: " + decoded
        print "Decoded String: " + decoded.decode('base64', 'strict') 
```

当第一个前色 base64 字符串被解码时，我还看到了一个有趣的输出：这是输出：

```
String before Split: forecolor=AgCEAg4DUQQCBQQGARMBFQE1AmUB
String to be decoded: AgCEAg4DUQQCBQQGARMBFQE1AmUB
Decoded String: ?Q5e 
```

我不确定我在这里做错了什么。我查看了以下 python 文档并尝试了，但这也不起作用： [http ://docs.python.org/library/base64.html](http://docs.python.org/library/base64.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T19:46:42.463

您正在尝试解码没有填充的 Base64 字符串。尽管许多 Base64 风格没有填充，但 Python 需要填充以进行标准 base64 解码。这个 StackOverflow 问题有更深入的解释：[Python: Ignore 'Incorrect padding' error when base64 decoder](https://stackoverflow.com/questions/2941995/python-ignore-incorrect-padding-error-when-base64-decoding)

对于您的代码，我将进行类似于以下的修改：

```
for item in value:
    print "String before Split: " + item
    if item.split("=")[0] == "forecolor":
        decoded = (item.split("=")[1])
        print "String to be decoded: " + decoded
        # Add Padding if needed
        decoded += "===" # Add extra padding if needed
        print "Decoded String: " + decoded.decode('base64', 'strict') 
```

根据您的评论，您似乎还需要将 base64 解码返回的字节数组转换为整数列表。我假设整数是小端短整数。

```
import struct
x = "AgAsAQ0CJAMcDRgOGg8DHQYeBzYBPQ4-DU0ETgNtBm4CfQI"
x += "==="
y = x.decode('base64', 'strict')
intList = [struct.unpack('<h', y[i] + y[i+1]) for i in xrange(0, len(y), 2)]
print intList 
```

结果是：

```
[(2,), (300,), (525,), (804,), (3356,), (3608,), (3866,), (7427,), (7686,), (13831,), (15617,), (782,), (16723,), (-32749,), (16859,), (-32613,), (16543,)] 
```

# python - 想使用 PubNub 向用户的网络浏览器发送实时更新

> ID：11656117
> 
> 赞同：4
> 
> 时间：2012-07-25T18:21:19.533
> 
> 标签：python, django, heroku, real-time-updates, pubnub

正在研究使用 PubNub 向用户的网络浏览器发送实时更新。

我查看了他们的网站和资料。看起来他们有几个不同的选择。

我们想用它来向用户正在查看的网页发送实时更新。这些信息很简单，例如“您刚刚收到一条消息”。我们不是在尝试实现聊天程序或类似的东西。

PubNub 是一个很好的解决方案吗？如果是这样，应该使用哪个版本的服务？

我们在 Heroku 服务器上运行 Django。

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T04:57:34.687

# PubNub Facebook 通知

这是一个类似于 Facebook 的 Window Box 的示例，它通过 PubNub 向您的用户发送自定义消息。您可以在他们的手机或浏览器上向您的用户发送更新。这将向您的用户显示通知；任何通知你。

使用 PubNub 允许在您的应用程序中使用通过 WebSockets、BOSH、Comet 和其他机制的数据推送，使您能够随时 通过**MASS BROADCAST**或 **INDIVIDUAL** **NOTIFICATIONS**直接向您的用户发送数据。

 ****## 从这里开始：现场演示

> **立即尝试：http:** [//pubnub-demo.s3.amazonaws.com/facebook-notification/index.html](http://pubnub-demo.s3.amazonaws.com/facebook-notification/index.html)
> 
> **下载源代码：** [https ://github.com/pubnub/javascript/tree/master/examples/facebook-notification](https://github.com/pubnub/javascript/tree/master/examples/facebook-notification)

从这里开始以便轻松复制/粘贴代码。这很容易上手，我们建议您在开始之前从上面的示例链接开始。

### 设置您的页面

首先包括**FBootstrap**资源，以提供通知窗口的外观。将这些样式添加到您的 HTML 文件中。

```
<link href=bootstrap.css rel=stylesheet>
<style type=text/css> body { padding-top: 60px; } </style> 
```

### 数据连接代码

接下来，您需要设置 PubNub 数据连接，然后添加规则，以便在收到数据后如何处理数据。

```
 <script src="https://pubnub.s3.amazonaws.com/pubnub-3.1.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-modal/2.2.6/js/bootstrap-modal.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>(function(){

    // PubNub (For Data Push to User)
    var pubnub = PUBNUB.init({
        subscribe_key : 'demo',
        ssl           : false
    });

    // Setup New Data Push Connectoin via PubNub
    pubnub.subscribe({
        restore  : true,
        channel  : 'example-user-id-1234',
        callback : show_notification
    });

    // Setup Alert Window
    $('#new-alert').modal({ keyboard : true });

    // Show the Notification Window
    function show_notification(message) {
        $('#new-alert').modal('show');
    }

    // Simulate Notification
    $('#simulate-notification').bind( 'mousedown', function() {
        pubnub.publish({
            channel : 'example-user-id-1234',
            message : 'alert'
        });
        return false;
    } );

    })();</script> 
```

### Python 推送示例

接下来，您需要将此`python`代码添加到您的**Django**或任何其他框架中。您可以将其添加到`message post`应用程序的代码中。这将向您的用户发布通知。此特定示例将导致通知出现在 Facebook 通知页面内。

```
pip install pubnub 
```

### Python 源代码

```
## PubNub Setup
import pubnub from Pubnub
pubnub = Pubnub( 'demo', 'demo', None, False )

## Push Notice to 'example-user-id-1234'
info = pubnub.publish({
    'channel' : 'example-user-id-1234',
    'message' : { 'your-data' : 'any-data-here' }
})
print(info) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T22:19:22.930

对于一些不太通用的东西，使用由 Django 提供的 API 触发的信号和非常强大的通道安全性，请查看[https://github.com/sivang/django-pubnub](https://github.com/sivang/django-pubnub)（直接来自烤箱；））。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:55:29.810

我用 pubnub 和 socket.io 做这种事情......客户端很容易管理，这要归功于多路复用。我的代码如下所示：

```
var pubnub_setup = {
    channel       : 'xxx',
    publish_key   : 'xxx',
    subscribe_key : 'xxx'
};

var price_update = io.connect( 'http://pubsub.pubnub.com/price_update', pubnub_setup );
var table_update = io.connect( 'http://pubsub.pubnub.com/table_update', pubnub_setup );    

price_update.on( 'connect', function() {
          // do stuff here
} );
table_update.on( 'connect', function() {
          // do stuff here
} );
table_update.on( 'message', function(message) {
          // do stuff here
} ); 
```

PN 与 socket.io [https://github.com/pubnub/pubnub-api/tree/master/socket.io](https://github.com/pubnub/pubnub-api/tree/master/socket.io)

与 socket.io 多路复用[http://vimeo.com/34496366](http://vimeo.com/34496366)****

# iphone - 检测 iOS 5 上的铃声（静音按钮）位置？

> ID：11656119
> 
> 赞同：2
> 
> 时间：2012-07-25T18:21:25.277
> 
> 标签：iphone, ios, ipad, ios5, audio

我想检测静音按钮的位置（打开或关闭音量的按钮）。我正在制作一个在后台播放声音的应用程序，但我想检测铃声是否被激活，所以我不会播放声音。毕竟，如果用户关闭手机音量，他不希望我的应用播放响亮的声音。

顺便说一句，我需要知道所有 iOS 设备的按钮位置，而不仅仅是 iPhone。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:23:35.563

我建议您查看[RDBMuteSwitch](https://github.com/Rich2k/RBDMuteSwitch)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:41:19.750

请看一下这个[答案](https://stackoverflow.com/a/8158159/1218712)。

如果您正在为越狱设备制作应用程序，您可能需要查看[UIHardware](http://iphonedevwiki.net/index.php/UIHardware)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T21:40:52.490

如果您只想通过静音开关使您的声音静音，请使用或[配置您的音频会话以使用静音开关](http://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html#//apple_ref/doc/uid/TP40007875-CH4-SW1)。`AVAudioSessionCategoryAmbient``AVAudioSessionCategorySoloAmbient`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T20:49:34.273

我知道这是一篇旧帖子，但最近我在 github [https://github.com/Rich2k/RBDMuteSwitch](https://github.com/Rich2k/RBDMuteSwitch)中找到了一个很好的代码，并且效果很好。

这适用于 ipad 7.1（至少）。

更新： RDBMuteSwitch 自 8.2 和 Xcode 6.2 起不起作用，我开始使用[SoundSwitch](http://sharkfood.com/content/Developers/content/Sound%20Switch/)并在 7.1 或更高版本上正常工作（我还不能用旧设备测试）

这是我找到的[答案。](https://stackoverflow.com/questions/20992452/detect-silent-mode-in-ios-7)

# php - 从字符串中删除 lex 标记块

> ID：11656126
> 
> 赞同：0
> 
> 时间：2012-07-25T18:21:42.143
> 
> 标签：php, parsing, callback, tags, pyrocms-lex

您好，我有这个 lex 解析器模板，其中包含一个我想要删除的回调标记，因为我得到了一个无限循环。

我尝试使用 php `preg_replace`，但随后出现白屏。我要删除的标签是这种格式：

```
{{ search:query term="value" .. more attributes .. }}

  // any content between these tags needs to be removed as well, including new lines

{{ /search:query }} 
```

这是我在 preg_replace 的尝试：

```
$text = preg_replace('@\{\{\ssearch:(.*?)\}\}(.*?)\{\{\s/search:(.*?)\s\}\}@is','',$text); 
```

但它不起作用。任何建议为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:41:55.837

```
$text = preg_replace('\{\{\s+search:query(\s+\S+=".*")+\s*\}\}.*\{\{\s*/search:query\s*\}\}Uims', '', $text); 
```

处理缺失和多个空格、一`attr="value"`对或多对、多行并且是非贪婪的。

# php - 500 内部服务器错误...特定于浏览器？

> ID：11656130
> 
> 赞同：2
> 
> 时间：2012-07-25T18:22:07.813
> 
> 标签：php, apache

据我了解，响应代码 500 表示服务器遇到错误，可能是配置错误或超时。

在我目前的项目中，我收到了很多间歇性的 500 次响应（大约每 100 个页面加载中就有一个）。但仅限于 Internet Explorer。

什么可能导致这种情况？该错误显然是完全随机的。我们可以从日志中得到的最好的结果是：

> [2012 年 7 月 24 日星期二 18:57:09] [错误] [客户端 66.83.159.2] (null) 的处理程序返回了无效的结果代码 70007

我正在使用 Apache2.2 和 PHP5.4.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:28:02.313

通常，服务器端发生了崩溃，在这种情况下是 PHP，因此您可能需要放入异常块并记录通常会发生的情况。

用户应该会看到一些有用的消息，例如*错误，请重试*，但最终这应该可以帮助您缩小问题范围。

现在，如果这是一个 REST 服务，您可能希望返回 500 错误，但如果只是返回用户可以看到的内容，那么您应该使其更加用户友好。

如果您可以以某种方式复制它，则使用 Fiddler2 ( [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/) ) 来获取浏览器和服务器之间的所有来回通信，并查看 IE 是否发送与其他不同的东西浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-23T11:07:09.320

我知道这是一个旧线程，但也许它可以帮助那些（像我一样）在谷歌上找到这个作为第一个结果之一的人：如果您在一个浏览器中而不是在另一个浏览器中收到 500 错误，它实际上可能不是服务器错误，但 cookie 出现故障。

我在尝试使用 Firefox 登录时遇到了 500 的问题，但在 chrome 中测试时它完美无缺。在 ff 中清除此页面的 cookie 后，它也在那里再次工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:26:57.273

500 错误不一定是特定于浏览器的，但这可能是由从客户端传递到您的服务器的数据引起的。

除了 Apache 错误日志之外，还应该有一个 php 错误日志。检查该日志或更改您的设置（在有问题的页面上）以显示错误，直到找到您要查找的内容。

```
ini_set('error_reporting', E_ALL);
ini_set('display_errors', true); 
```

[http://www.php.net/manual/en/errorfunc.configuration.php](http://www.php.net/manual/en/errorfunc.configuration.php)

# python - 消息未发送到所有连接 Python

> ID：11656132
> 
> 赞同：0
> 
> 时间：2012-07-25T18:22:20.663
> 
> 标签：python, multithreading, sockets

我正在尝试编写一个允许多个连接的程序，并且服务器操作员可以向所有连接的客户端发送消息。我已经解决了使用简单线程允许多个连接的问题，现在我的问题是消息不会一次发送给所有连接的客户端，我必须多次发送消息才能将其发送给任何客户端。

```
def send(add, conn, port, s):
    while True:       
        message = raw_input("Message: ")
        add.send(message)

def server(port):
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind(('', port))
    s.listen(10))
    print "Waiting for connections..."
    while True:        
        a,b = s.accept()
        print b, "connected"
        connections.append(b)
        thread = threading.Thread(target=send, args=(a, b, port, s))
        thread.start()
        threads.append(thread) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:31:15.937

这就是 TCP 的工作原理。没有广播设施。如果您需要向多个连接的客户端发送相同的消息，则必须为每个套接字执行此操作。

# github - Github 部署密钥：如何为一台机器授权多个存储库？

> ID：11656134
> 
> 赞同：43
> 
> 时间：2012-07-25T18:22:23.107
> 
> 标签：github, ssh-keys

我有一个主机，叫它`rob`。我使用 ssh-keygen on`rob`获取了一个公钥，我在为存储库添加新的部署密钥屏幕中将其提供给了 github `cheech`。现在我也想部署`chong`。`rob`但是，如果我转到 github 上为存储库添加新的部署密钥屏幕，并粘贴我在其`chong`上生成的公钥。我想，如果密钥正在使用中，我可以克隆，但表示权限被拒绝。`rob``key already in use``chong``rob`

很明显，这比我想象的要复杂，它涉及拥有多个键或其他东西。我应该怎么做才能`chong`克隆`rob`？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-03T09:04:46.137

一旦一个密钥作为部署密钥附加到一个存储库，它就不能在另一个存储库上使用。如果您在设置部署密钥时遇到此错误，那么您需要修改您的远程并设置您的 `~/.ssh/config`文件以使用**不存在的**github.com 主机名，ssh 将能够使用该主机名来选择正确的 ssh为您的存储库部署密钥。

```
# first we remove the origin
$ git remote -v
origin  git@github.com:username/foo.git (fetch)
origin  git@github.com:username/foo.git (push)
$ git remote rm origin

# here we add a new origin using a host nickname called
# foo.github.com that we will reference with a Host stanza in our
# ~/.ssh/config to specify which key to use with which fake hostname.
$ git remote add origin git@fake-hostname-foo.github.com:username/foo.git
$ git remote -v
origin  git@fake-hostname-foo.github.com:username/foo.git (fetch)
origin  git@fake-hostname-foo.github.com:username/foo.git (push) 
```

为您的存储库生成部署密钥并将其命名为合理的名称，例如：

```
$ ssh-keygen -t rsa -f ~/.ssh/id_rsa-foo -C https://github.com/username/foo
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/username/.ssh/id_rsa-foo.
Your public key has been saved in /home/username/.ssh/id_rsa-foo.pub.
The key fingerprint is:
c0:ff:ee:34:24:11:5e:6d:7c:4c:b1:a0:de:ad:be:ef https://github.com/username/foo
The key's randomart image is:
+--[ RSA 2048]----+
|  E   o..o.oo.   |
| M o o o .+CoW   |
|  + o = o. ..    |
| .   . +         |
|        S        |
|       o .       |
|        +        |
|       . o       |
|        ..o.     |
+-----------------+ 
```

[添加部署密钥](https://help.github.com/articles/managing-deploy-keys)后，您 需要将以下节添加到`~/.ssh/config`文件中：

```
Host fake-hostname-foo.github.com
    Hostname github.com
    IdentityFile ~/.ssh/id_rsa-foo 
```

现在您可以使用以下方法对其进行测试：

```
$ ssh -T git@fake-hostname-foo.github.com
Hi username! You've successfully authenticated, but GitHub
does not provide shell access. 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-15T05:59:04.520

我发现的最简单的解决方案在[此处](http://www.snipe.net/2013/04/multiple-github-deploy-keys-single-server/)概述。

1）输入这个命令（你会为你需要的许多键执行此操作）：

> ssh-keygen -t rsa -C "your_email@example.com"

2) 当提示以下语句时，输入一个唯一的名称（即 foo1_rsa）。该文件将在您的当前目录中创建，如果您想要整洁，您可能需要将其移动到 .ssh：

> 输入保存密钥的文件（/Users/you/.ssh/id_rsa）：[按回车键]

3) 更新您的 SSH 配置文件：

> vi ~/.ssh/config

这可能是空的：

```
Host cheech github.com
Hostname github.com
IdentityFile ~/.ssh/foo1_rsa

Host chong github.com
Hostname github.com
IdentityFile ~/.ssh/foo2_rsa 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T21:44:42.023

github 的部署密钥是唯一的……您必须为其他存储库生成一个新密钥。再次运行 ssh-keygen

请参阅 github 文档：[https ://help.github.com/articles/managing-deploy-keys](https://help.github.com/articles/managing-deploy-keys)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T18:59:42.027

如果您愿意授予`rob`对 GitHub 帐户中所有私有存储库的访问权限，则可以将密钥作为部署密钥从其中删除`cheech`，然后将其作为 SSH 密钥添加到整个 GitHub 帐户中。这将`rob`允许同时访问`cheech`和`chong`。

如果您的帐户中有您不想`rob`访问的其他存储库，这将不起作用。

如果您需要更细粒度的控制，您将需要生成额外的密钥`rob`并将它们作为部署密钥分配给特定的存储库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-11T18:39:28.907

*我知道这已经有 5 年以上的历史了，但是对于这个流行的问题没有公认的答案，所以这是我认为考虑到清洁度和未来可读性的最佳方法：*

* * *

**将部署用户添加到您的团队**

**第 1 步：**在您组织的域中为新的*部署*用户创建一个新的电子邮件地址。类似*deploy@organisation.example.com*。

**第 2 步：**使用该邮箱创建一个新的 GitHub 帐户（[GitHub 将这些称为“机器用户”](https://developer.github.com/v3/guides/managing-deploy-keys/#machine-users)）给它一个像*deploy-ExampleOrganisation*这样的用户名，这样它的角色就很清楚了。

**第 3 步**：使用如下命令在您的服务器上创建一个名为*“deploy”*的用户：

```
useradd -d /home/deploy -m deploy 
```

*为deploy@servername*生成 SSH 密钥，不指定密码和*/home/deploy/.ssh/id_rsa*作为文件位置：

```
ssh-keygen -t rsa -b 4096 -C "deploy@servername" 
```

*在新的 deploy-ExampleOrganisation* GitHub 帐户上添加*/home/deploy/.ssh/id_rsa.pub*的内容作为 SSH 密钥：转到*Settings > SSH and GPG keys > New SSH Key*。

 ****第 4 步：**在您的组织中创建一个名为*“只读部署用户”*之类的团队，将您的新用户添加到团队并授予团队对将部署的任何存储库的读取权限。*（如果您没有组织帐户，您仍然可以授予该用户访问多个私有存储库的权限）*

**步骤 5：**添加您自己的个人机器的 SSH 密钥以部署用户的授权密钥文件*（/home/deploy/.ssh/authorized_keys）*，以便您（或您的部署脚本）在部署代码时可以作为*部署登录。*

**繁荣！就是这样......**您现在拥有一个干净且自我记录的流程。

* * *

*PS 我尝试了 aculich 的高度评价的答案，但用假主机名弄乱了感觉很脏，我想，如果我在几年后回到这个问题，我会很容易弄清楚我做了什么来创建所有密钥并理解那个 SSH 配置文件如何使那些有趣的不存在的远程地址工作？可能不是！*

*部署用户相对于假主机名方法的优势：*

*   没有黑客！它是具有明确名称的标准用户帐户，通过真实主机名访问存储库。
*   更少的键浮动。
*   如果/当您确实移动到其他服务器时，很容易为您的 Deploy 用户在所有这些服务器上提供一个帐户，只需向她的 GitHub 帐户添加 1 个新密钥，她在新服务器上的帐户就可以部署代码了。
*   部署用户只有低权限只读访问团队中列出的存储库，并且您的个人 SSH 密钥远离服务器，因此如果某些讨厌的人确实获得了对您服务器的访问权限，他们无法对您的所有存储库造成严重破坏也是。
*   部署工具配置文件*（例如 Capistrano）*不会弄脏包含那些令人困惑的假主机名。*（当他们开始在服务器之外传播时，我真的对这种方法感到不舒服。）*
*   如果你忘记了你在几年内是如何做到这一点的，文件所有权将引导你到部署用户`ls -la`，SSH 密钥将引导你到 GitHub 帐户名`ssh -T git@github.com`，希望你能再次完全跟上速度。
*   最后……这是GitHub推荐的方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-07T07:20:43.607

Managing multiple GitHub deploy keys may be made easy with my tiny `npm` module [github-add-key](https://www.npmjs.com/package/github-add-key). It uses the approach described in [this](https://stackoverflow.com/a/12705155/7065203) great answer, and all you'll need is

> $ github-add-key rob/chong

in your locally cloned `rob/chong` and follow the simple automated process.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-08T11:41:53.223

正如其他人指出的那样，部署密钥是独一无二的。到目前为止最好的方法是 ssh .config 别名，但我找到了一种更简洁的方法：

这可以通过自定义 GIT_SSH_COMMAND 来完成。由于 ssh .config 仅获取主机，因此您必须创建别名来处理不同的路径。或者，当 git CLI[将 repo 的路径发送](https://github.com/git/git/blob/e870325/connect.c#L1268)到 GIT_SSH_COMMAND 时，您可以在自定义脚本中拦截请求，添加在 git 和 ssh 之间。

您可以创建一个解决方案，在其中提取路径并添加相关的身份文件（如果服务器上可用）。

可以在[此处](https://gist.github.com/vhermecz/4e2ae9468f2ff7532bf3f8155ac95c74)找到执行此操作的一种方法。

用法：

```
cp deploy_key_file ~/.ssh/git-keys/github-practice
GIT_SSH_COMMAND=custom_keys_git_ssh git clone git@github.com:github/practice.git 
```

您可以`GIT_SSH_COMMAND=custom_keys_git_ssh`全局定义，只需将密钥文件添加到`~/.ssh/git-keys/`文件夹。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-26T08:39:29.660

虽然 Pimkin 的想法很棒，但我不想为此安装`node`，所以我在以下位置创建了类似的东西`bash`：

[https://gist.github.com/blvz/8eeebacae11011c25fc79eff12f49ae9](https://gist.github.com/blvz/8eeebacae11011c25fc79eff12f49ae9)

安装和使用：

```
curl https://gist.githubusercontent.com/blvz/8eeebacae11011c25fc79eff12f49ae9/raw/6f2f7f3709a0fe852d8a3a5bb125325e3ffbc7d8/gh-deploy-clone.sh > /usr/local/bin/gh-deploy-clone
chmod +x /usr/local/bin/gh-deploy-clone

gh-deploy-clone user/repo

# You can also give it a name, in case
# you have multiple deploy targets:

gh-deploy-clone user/repo staging 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-26T00:08:00.920

我在这里没有看到任何好的或简单的答案，所以我想我会提出我的解决方案。我不喜欢需要更改域名、使用包装脚本、搞乱密钥环或弄乱 .ssh 配置文件的答案。SSH 只是 git 的传输方式，所以我不想用黑客和设置填充我的重要 ssh 文件夹和配置，以使用多个部署密钥，一旦设置我不关心并且每个仓库只有一个。这应该是一个 git config - 它是。

此外，为什么不将凭据保留在 repo 的 .git 文件夹中，这样如果删除 repos 文件夹，就会删除部署密钥？

假设 /tmp/deploy_key 是您的私有部署密钥的初始（临时）位置。

```
# Initial clone of repo    
GIT_SSH_COMMAND="ssh -i /tmp/deploy_key" git clone git@github.com:folder/reponame.git

# cd to the folder to assure we only change config for the repo instead of user/global.
cd reponame
# Could probably just mv instead of cp/chmod/rm the key but lets be precise
cp /tmp/deploy_key ./.git/deploy_key
chmod 600 ./.git/deploy_key
rm /tmp/deploy_key

# This is the magic - note the backslash escaping the $ as PWD is always the repo's
# folder when pulling or pushing etc... and at git (run) command time $PWD is the
# repo's root folder.
git config core.sshCommand "ssh -i \$PWD/.git/deploy_key" 
```

您当然也可以将密钥存储在其他地方，并使用没有 $PWD 的绝对路径作为部署密钥：-

```
# Initial clone of repo    
GIT_SSH_COMMAND="ssh -i /path/to/a/deploy_key" git clone git@github.com:folder/reponame.git
# cd to repo to configure only for this repo
cd reponame
git config core.sshCommand "ssh -i /path/to/a/deploy_key" 
```

但我更喜欢将它保存在 repo 的内部 .git 文件夹中，所以如果我删除 repo 的文件夹，我知道周围没有凭据，毕竟每个部署密钥只能有一个 repo。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-03T20:55:06.413

您还可以创建一个 ssh 包装器并将其作为`GIT_SSH`. 此选项的优点是您不必更改 git 远程。[https://stackoverflow.com/a/14221028/3461](https://stackoverflow.com/a/14221028/3461)**

# c++ - 如何解析html并抓取信息

> ID：11656135
> 
> 赞同：-1
> 
> 时间：2012-07-25T18:22:23.643
> 
> 标签：c++, html, html-parsing

考虑以下 HTML 文档的摘录：

```
<select id="convert-to" name="currency-2">
  <option  value='EUR'>Euro (EUR)</option>
  <option  value='GBP'>British Pound (GBP)</option>
  <option selected='selected' value='USD'>United States Dollar (USD)</option>
  <option  value='AUD'>Australian Dollar (AUD)</option>
  <option  value='CAD'>Canadian Dollar (CAD)</option>
  <option  value='CHF'>Swiss Franc (CHF)</option>
  <option  value='CNY'>Chinese Yuan (CNY)</option>
</select> 
```

我如何抓取内容

*   欧元 (EUR)
*   英镑 (GBP)
*   美元 (USD)
*   澳元 (AUD)

在上面的 html 代码块中，不使用任何 html 解析器或附加组件，只是普通的 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:28:11.043

简单的方法：

1.  搜索下一个`"<option"`子字符串
2.  跳到下一个`">"`
3.  阅读所有内容直到下一个`"<"`并将其存储在某个地方
4.  重复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:34:18.140

> 只是简单的 C++ 循环

不可能的。HTML 不是正则的，因此不可能使用正则表达式来匹配它。

# android - 为什么 normal-mdpi 设备从 drawable-normal-hdpi 而不是默认的 drawable 中选择？

> ID：11656141
> 
> 赞同：1
> 
> 时间：2012-07-25T18:22:37.703
> 
> 标签：android, android-resources, android-screen-support, android-resolution

我很抱歉提出这个问题的奇怪方式。

所以基本上问题是我有3个可绘制资源的目录

*   可绘制的
*   可绘制的正常 hdpi
*   可绘制的-xlarge

打算像这样分开它

![我想这样分开](../Images/e2d0ed01b6a69290e0593b7ab58600a8.png)

但它不起作用。

因为具有*正常屏幕*和*mdpi*的设备仍然从*normal-hdpi 中*选择，我不想要这个。

我可以将*drawable*重命名为*drawable-normal-mdpi*，它可以工作，但是一个非常小的设备会抱怨找不到资源。

这让我不得不选择将文件夹内容从*drawable*复制到*drawable-normal-mdpi*，这听起来是错误的。

使用 alias-xml 的选项并没有真正的帮助，因为据我所知，我需要为每一个可绘制的对象提供 2 个 xml，对我来说，这比为最低分辨率创建一个重复的文件夹更糟糕。

如图所示，我可以做些什么来实现我的目标？谢谢你的时间。

编辑：minSdkVersion="8" targetSdkVersion="15"

**解决了：**

通过使用目录，我能够像在图像中一样将其分开

*   可绘制的 mdpi
*   可绘制的 hdpi
*   可绘制的-xlarge

# session - IIS 队列已满且 Azure 速度较慢时无法恢复

> ID：11656145
> 
> 赞同：1
> 
> 时间：2012-07-25T18:22:47.357
> 
> 标签：session, iis, iis-7, azure, azure-web-roles

我们遇到了 IIS 和 Azure 的一个非常严重的问题。不确定这是在 IIS 方面还是我们的自定义代码方面。

我参与了两个在 Azure 中运行的网站（站点 A 和站点 B）。（标准 WebRoles，ASP.NET MVC3）。这两个站点的架构完全不同，彼此没有任何关系，但在相似的情况下都表现出相似的行为。

站点 A 在启用会话状态的情况下运行。会话存储在 SQL Azure 数据库中。大多数对站点 A 的调用都通过指向 SQL Azure 数据库的 ASP.NET SQL 成员资格提供程序进行保护

站点 B 也在启用会话状态的情况下运行。会话存储在 Azure AppFabric 缓存中。站点 B 还具有与 AppFabric 缓存和 Azure 表存储通信的 http 处理程序。

当关键 Azure 资源（如 SQL Azure 或缓存）变得非常慢时，问题开始但不会恢复。当这些资源变得非常缓慢并且每个请求的处理时间超过一分钟时，Azure 的负载均衡器会终止这些连接，但 Web 角色上的 IIS 不会从其活动队列中清除/删除这些请求。

因此，问题不在于当 SQL Azure 或 AppFabric 缓存非常慢时站点没有响应。最大的问题是当 SQL Azure 或 AppFabric Cache 恢复并开始正常工作时，站点**无法恢复。**请求位于活动请求列表中，并且不会消失很长时间（几个小时？）。坦率地说，我不知道他们在那里坐了多久，因为我们尽快重启了这些服务器。由于 Azure 资源偶尔会出现间歇性问题，并且由于两个站点的流量都非常高，因此两个站点很快就会在非清算请求的重压下陷入困境。IIS 队列已满，在有人进入并重新启动应用程序池之前，站点不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:39:35.790

IIS 保持请求“活动”的事实非常奇怪。您是否尝试将请求超时配置为小于 60 秒？这样做将使 IIS 控制终止请求，而不是让负载平衡器关闭连接：

```
<httpRuntime executionTimeout="50" /> 
```

注意：这仅在 Debug = false 时有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:45:24.200

我有一个类似的问题，IIS 请求会持续很长时间。我花了很长时间试图弄清楚为什么 IIS 没有杀死它们。我尝试了 Sandrino Di Mattia 的解决方案和其他解决方案，但没有一个对我有用。

事实证明，IIS 并没有终止请求，因为它们仍然处于活动状态。在某些情况下，客户端浏览器会打开一个连接并永远保持它。我会查看浏览器的网络调试器（Firebug、Webkit 检查器等），然后看到请求就在那里旋转。据我所知，他们正在响应 keepalive，因此 IIS 和负载平衡器将保持连接和请求处于活动状态。最终的解决方案是让浏览器不这样做。

它可能与您的问题无关，但在我的特定情况下，问题是`<video>`标签。当给定一个`<video>`指向一个大文件的标签时，他们会立即打开一个连接并保持它直到播放视频，这可能永远不会（我们关闭了自动播放）。`<video>`解决方案是在我们准备好播放视频之前不创建标签。

另外，有没有办法知道 Azure 负载均衡器已经终止了请求？我知道看到活动的唯一方法是请求是通过 IIS 管理控制台。

# c# - Telerik Grid for ASP.NET MVC 中的 Ajax 删除操作期间出错

> ID：11656148
> 
> 赞同：0
> 
> 时间：2012-07-25T18:22:59.690
> 
> 标签：c#, asp.net, asp.net-mvc, telerik, telerik-mvc

我有一个用于 ASP.NET MVC 的简单 Telerik Grid，带有 Ajax 删除命令。删除工作，但是，页面显示错误，并且不更新。

我还想在 AJAX 调用返回时调用自定义 JavaScript，但不知道将代码放在哪里。

这是视图：

```
Html.Telerik()
    .Grid<ScenarioVm>(Model)
    .Name("scenarioGrid")
    .DataBinding(dataBinding => dataBinding
        .Ajax()
        .Delete("Delete", "Scenario")
        .Select("Index", "Scenario"))
    .DataKeys(keys => keys.Add(c => c.Id))
    .Columns(columns =>
    {
        columns.Template(o => o.Name)
            .Title("Scenario")
            .FooterTemplate(@<text>Total @Model.Count()</text>);
        columns.Bound(o => o.IsLocked);
        columns.Bound(o => o.ContractMonth);
        columns.Bound(o => o.CreateDate);
        columns.Command(commands => commands
                .Delete()
                .ButtonType(GridButtonType.Image))
            .Title("Delete");
    })
    .Sortable()
    .Scrollable(scroll => scroll.Height(200))
    .ClientEvents(events => events.OnDelete("onDelete"))) 
```

在 AJAX 调用之前调用的 Javascript：

```
function onDelete(e) {
    var scenario = e.dataItem;
    if (scenario.CanDelete == false) {
        alert("Can not delete " +
            e.dataItem.Name +
            ": there exists a solution!");
        return false;
    } else {
        $.blockUI({
            css: {
                border: 'none',
                padding: '15px',
                backgroundColor: '#000',
                '-webkit-border-radius': '10px',
                '-moz-border-radius': '10px',
                opacity: .5,
                color: '#fff'
            }
        });
        return true;
    }
} 
```

控制器方法：

```
[HttpPost]
[GridAction]
public ActionResult Delete(Scenario scenario)
{
    Logger.Info("Delete scenario " + scenario);
    if (scenario == null)
    {
        return new EmptyResult();
    }

    try
    {
        _scenarioRepository.Delete(scenario);
        Logger.Info("Successfully deleted " + scenario);
    }
    catch(Exception e)
    {
        Logger.Error(scenario + e.Message, e);
        var result = new JsonResult
        {
            JsonRequestBehavior = JsonRequestBehavior.DenyGet,
            Data = new {
                ErrorCode = 1,
                ErrorMessage = e.GetType() + ": " + e.Message
            }
        };

        return result;
    }

    return new EmptyResult();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:47:48.727

我发现上面的代码有几处错误。首先，客户端事件将在请求发送到服务器*之前*[`OnDelete`](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnDelete)在客户端上触发。如果您希望将 Ajax 调用的结果发送到服务器，您需要处理该事件。此事件*在*对服务器的 Ajax 调用完成并将结果返回给客户端后触发。*[`OnComplete`](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnComplete)*

 **[`IGridAction`](http://www.telerik.com/help/aspnet-mvc/t_telerik_web_mvc_igridmodel.html)其次，GridAction 操作过滤器希望您向视图返回一个类型的值。由于您没有返回预期值，因此会在客户端出现错误。以下是您的 Controller 方法的示例：

```
[HttpPost]
[GridAction]
public ActionResult Delete(Scenario scenario)
{
    // Delete item and perform other operations as required
    var data = ... // Get an updated data set, with the deleted item removed
    var model = new GridModel<ScenarioVm>(data);
    return View(model);
} 
```

这是Telerik 网站上详细讨论 Ajax 绑定的[文章。](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-data-binding-ajax-binding.html)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:08:31.497

如果我正确理解了这个问题，您希望在操作完成时执行 javascript 函数。示例源代码中的最后一行是为 OnComplete 事件定义回调。

```
.ClientEvents(events => events
            .OnLoad("onLoad")
            .OnEdit("onEdit")
            .OnDetailViewCollapse("onDetailViewCollapse")
            .OnDetailViewExpand("onDetailViewExpand")
            .OnDelete("onDelete")
            .OnSave("onSave")
            .OnDataBinding("onDataBinding")
            .OnRowDataBound("onRowDataBound")
            .OnRowSelect("onRowSelect")
            .OnDataBound("onDataBound")
            .OnColumnResize("onColumnResize")
            .OnColumnReorder("onColumnReorder")
            .OnComplete("onComplete")) 
```

[Telerik 文档](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnComplete)还有一个如何定义 OnComplete 事件的示例。**

# entity-framework - ER 图 - 项目、任务和员工

> ID：11656150
> 
> 赞同：0
> 
> 时间：2012-07-25T18:23:06.920
> 
> 标签：entity-framework, database-design

**更新：公司可以有多个项目，公司也有员工。一个员工只能拥有一个公司，一个项目也只能拥有一个公司。** 一个项目有几个任务。在这些任务中，员工只会被分配到一些任务。

员工只能被分配到他/她被分配到的项目的任务。

请查看以下内容并帮助我 **根据两条评论创建数据库设计和最终实体模型更新图：** 如果此 ER 图看起来不错，您能否提供有关如何创建 EF 4.1 实体类的指导，特别是对于 EmployeeProjectTasks 表。 **我是 EF 4.1 Code First 的新手，想了解创建这些类的方向**

如果此 ER 图看起来不正确，请建议修改。

![在此处输入图像描述](../Images/7364abe822e1b2d472d1574bff0a1d07.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:32:54.907

*   目前你没有哪个员工被分配到哪个项目的信息
*   关系看起来像员工/任务是一种 m:n 关系，我认为你不是故意这样做的
*   employeetasks 是从 task 继承还是关系实体？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:45:38.373

> 员工只能被分配到他/她被分配到的项目的任务。

您的 ER 模型不强制执行此操作。

那是因为 和 之间的非识别关系`Project`，所以在菱形依赖的那个分支中`Task`的传播被截断，并且只有引用（但不是）。`ProjectID``EmployeeProjectTask.ProjectID``EmployeeProject``Task`

* * *

确保`EmployeeProjectTask`连接`EmployeeProject`和`Task`来自**相同** `Project`的模型如下所示：

![在此处输入图像描述](../Images/4bafdc4de78b5c05196d6c9145dd221c.png)

请注意`Task`复合 PK 是如何产生的`{ProjectID, TaskNo}`，以及如何`Project.ProjectID`沿两个“分支”传播，并在“菱形”底部**合并**`EmployeeProjectTask.ProjectID`（导致, 与 FK 到`EmployeeProject`和`Task`）。

# entity-framework - Entity Framework 4.3 Code First 的回调？

> ID：11656153
> 
> 赞同：0
> 
> 时间：2012-07-25T18:23:15.057
> 
> 标签：entity-framework, callback, ef-code-first, entity-framework-4.3

采用 Code First 方法时，实体框架中是否提供回调的概念？

我正在寻找一种在创建、更新或删除实例时更新模型属性的方法。例子：

1.  对于 Order 对象（顺便说一句，它表示一个简单的 POCO 类），取决于我想在创建和更新时将 Status 属性设置为“READY”或“TO_REVIEW”的总量。

2.  任何具有 CreatedAt 属性的模型......我希望在自动创建时设置 = DateTime.Now。

3.  任何具有 UpdatedAt 属性的模型......我希望设置 = DateTime.Now 自动更新。

来自 Rails 开发，您可以在模型对象生命周期的不同阶段使用许多钩子。我希望在使用 EF 和 Code-First 时，.NET 世界中也有类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:32:29.603

您想要在创建时做的所有事情都可以在类构造函数中轻松完成。如果您想对保存到数据库的任何实体（我发现它有些无法追踪，因此无法读取）执行此操作，您可以使用`ObjectContext.SavingChanges`允许您操作正在保存的对象的事件。

但我仍然建议在模型类中执行任何此类逻辑，因为这很明显。

# c - 为什么这个语句会出错？

> ID：11656154
> 
> 赞同：0
> 
> 时间：2012-07-25T18:23:21.223
> 
> 标签：c

编译器对此语句给出错误。 `i>=3?b=10:b=5;`

```
error: lvalue required as left operand of assignment 
```

无法弄清楚为什么。正在使用的编译器是 GCC。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T18:25:55.177

该问题由运算符优先级解释。按照你的C语法

```
 i >= 3 ? b = 10 : b = 5; 
```

被 C 编译器解释为

```
 (i >= 3 ? b = 10 : b) = 5; 
```

首先，这可能不是您想要的。其次，在 C 语言中，`?:`运算符的结果不是左值。你不能给它分配任何东西。因此出现错误消息。

为了纠正问题（假设我正确理解您的意图），您要么必须使用大括号

```
 i >= 3 ? (b = 10) : (b = 5); 
```

或者简单地以更传统的方式重写它

```
 b = i >= 3 ? 10 : 5; 
```

* * *

作为旁注，这恰好是 C 和 C++ 语法之间的差异之一。`i >= 3 ? (b = 10) : (b = 5)`在 C++ 中，即使没有显式大括号，您的原始语句也会被解释为。最重要的是，在 C++ 中，结果`?:`可以是左值。

换句话说，在 C++ 中，您的原始语句将“按预期”编译和工作，但在 C 中不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:26:50.453

尝试更多类似的东西：

```
b = (i >= 3) ? 10 : 5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:25:34.280

您应该在`?:`运算符的两个执行路径中有表达式，而不是语句。

# objective-c - Cocoa-Touch 字符串拆分

> ID：11656155
> 
> 赞同：-1
> 
> 时间：2012-07-25T18:23:23.060
> 
> 标签：objective-c, ios, cocoa-touch

在 Cocoa-Touch 中，如何将一个字符串拆分为多个字符串，每个字符串只有一个字符？例如：我有一个四个字母的输入字符串，我需要在不同的标签中打印每个字母。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:28:45.830

在 Xcode 中，这是不可能的——Xcode 是一种 IDE，而不是一种编程语言。

但是，在 Objective-C 中，您可以访问 NSString 实例的字符或 1 个字符的子字符串并显示它们（您没有说明它是 OS X 还是 iOS；我假设 iOS，因为我更熟悉它）：

```
NSString *s = @"abcd";
for (int i = 0; i < s.length; i++)
{
    UILabel *l = [[UILabel alloc] initWithFrame:aSuitableCGRect];
    l.text = [s substringWithRange:NSMakeRange(i, 1)];
    [aSuperview addSubview:l];
    [l release];
} 
```

# c - FFTW3 的重用计划

> ID：11656156
> 
> 赞同：3
> 
> 时间：2012-07-25T18:23:25.553
> 
> 标签：c, fftw

如何在 FFTW 3 中重用具有不同输入/输出数据的计划？

我正在转换大量的小数组，大部分大小相同，而计划创建目前是瓶颈。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T20:22:01.817

有两个选项 - 使用“临时”输入/输出数组集创建原始计划，将每个连续数据集复制到其中并从中复制每个结果，或者使用“guru”界面执行计划（通常包含为其创建的数组的地址）与一组不同的数组。fftw 手册中有一个部分准确描述了这种情况，以及必须遵循的对齐、大小等附加限制才能使其正常工作。作为另一种可能性，如果所有小数组都是矩阵/图像的行或类似的东西，它们会被可预测的步幅分开，您可以使用“高级”界面一次执行它们。

# c# - 包含实体框架的通用 Find()

> ID：11656157
> 
> 赞同：4
> 
> 时间：2012-07-25T18:23:28.813
> 
> 标签：c#, entity-framework, generics

我目前有一个完整的通用存储库，但我缺少一个功能，那就是使用 **Include()**和`Find()`一起。

所以现在我有：

```
public E FindById<E>(int id) where E : class
{
    return DataContext.Set<E>().Find(id);
} 
```

调用使用

```
var person = PersonRepo.FindById<Person>(personId); 
```

我想要类似的东西：

```
var person = PersonRepo.FindByIdWithIncludes<Person>(personId,new[]{"State.Address"}); 
```

所以，沿着这条线的东西（这只是一个测试）：

```
public E FindByIdWithIncludes<E>(int id, string[] includes) where E : class
{
    var entitySet = DataContext.Set<E>();
    DbQuery<E> entityQuery;

    foreach (var include in includes)
    {
        entityQuery = entitySet.Include(include);
    }

    return entityQuery.Find(id); //this is were it breaks
} 
```

可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T08:22:53.080

您不能`Find`直接使用 -`Find`不适用于包含。您必须使用`SingleOrDefault`.

首先，您需要为实体定义接口以公开其密钥。

```
public interface IEntityWithId 
{
    public int Id { get; set; }
} 
```

接下来，您可以编写带有约束的简单方法来访问密钥：

```
public E FindByIdWithIncludes<E>(int id, string[] includes) 
    where E : class, IEntityWithId
{          

    IQueryable<E> entityQuery = DataContext.Set<E>();

    foreach (var include in includes)
    {
            entityQuery = entityQuery.Include(include);
    }

    return entityQuery.SingleOrDefault(e => e.Id == id); 
} 
```

顺便提一句。您可以使用强类型包含 -[这是一个示例](https://stackoverflow.com/questions/5376421/ef-including-other-entities-generic-repository-pattern/5376637#5376637)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T13:40:45.797

您也可以反过来使用`Find`，但与 . 结合使用`Load`。在某些情况下可能比 性能更好`Include-SingleOrDefault`，但这确实取决于场景。

非通用示例：

```
 private User GetByUID(int uID, bool includeDetails = false, bool includeAddresses = false)
 {
    var result = context.Users.Find(uID);
    if (includeDetails)
    {
       // load user-details (1:1 relation)
       context.Entry(result)
              .Reference<UserDetails>(us => us.UserDetails)
              .Load();
    }
    if (includeAddresses) 
    {
       // load user-addresses (1:m relation)
       context.Entry(result)
              .Collection(us => us.Addresses)
              .Load();    
    }
    return result;
 } 
```

使其符合您的需求应该不难。

# php - 将配置（文本文件）转换为多维数组

> ID：11656159
> 
> 赞同：2
> 
> 时间：2012-07-25T18:23:40.640
> 
> 标签：php, arrays, multidimensional-array

我已经尝试了很多次将此配置文件转换为多维数组，这意味着我必须读取 config.txt 文件，然后我必须转换为多维数组。我需要帮助或一些建议。

配置文件：

```
id=www
session.timeout=120

session.server.0.host=127.0.0.1

session.server.0.port=1111

session.server.0.id=session1

session.server.1.host=127.0.0.1

session.server.1.port=1111

session.server.1.id=session2

image.width=640 

image.height=480 

image.watermark.small=wsmall.png 

image.watermark.normal=wnormal.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:38:11.907

```
function load_config_file($filename)
{
    $config = array();

    foreach(file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES) as $line)
    {
        if(!preg_match('/^(.+?)=(.*)$/', $line, $matches))
        {
            continue;
        }
        $indices = explode('.', $matches[1]);
        $current = &$config;
        foreach($indices as $index)
        {
            $current = &$current[$index];
        }
        $current = $matches[2];
    }

    return $config;
} 
```

结果`load_config_file('config.txt')`：

```
大批
(
    [id] => www
    [会话] => 数组
        (
            [超时] => 120
            [服务器] => 数组
                (
                    [0] => 数组
                        (
                            [主机] => 127.0.0.1
                            [端口] => 1111
                            [id] => session1
                        )

                    [1] => 数组
                        (
                            [主机] => 127.0.0.1
                            [端口] => 1111
                            [id] => session2
                        )

                )

        )

    [图像] => 数组
        (
            [宽度] => 640
            [身高] => 480
            [水印] => 数组
                (
                    [小] => wsmall.png
                    [正常] => wnormal.png
                )

        )

)

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:31:41.663

像这样的东西应该工作：

```
$config = array();
foreach( file( 'config.txt') as $line) {
    list( $keys, $value) = explode( '=', $line);

    $temp =& $config;
    foreach( explode( '.', $keys) as $key)
    {           
        $temp =& $temp[$key];
    }
    $temp = trim( $value);
} 
```

在一次读完每一行之后，你可以通过-ing on将所有的键`$keys`和值放入。然后，作为指向数组的“指针”，我循环遍历所有由-ing on单独提取的，以形成多维数组。一旦所有的键都用完，我将值分配给该条目，然后移至下一行。`$value``explode()``=``$temp``$config``$keys``explode()``.`

[您可以在演示](http://viper-7.com/mg63Zq)中看到它运行良好。对于您的输入，这将产生一个像这样的数组：

```
array(3) {
  ["id"]=>
  string(3) "www"
  ["session"]=>
  array(2) {
    ["timeout"]=>
    string(3) "120"
    ["server"]=>
    array(2) {
      [0]=>
      array(3) {
        ["host"]=>
        string(9) "127.0.0.1"
        ["port"]=>
        string(4) "1111"
        ["id"]=>
        string(8) "session1"
      }
      [1]=>
      array(3) {
        ["host"]=>
        string(9) "127.0.0.1"
        ["port"]=>
        string(4) "1111"
        ["id"]=>
        string(8) "session2"
      }
    }
  }
  ["image"]=>
  array(3) {
    ["width"]=>
    string(3) "640"
    ["height"]=>
    string(3) "480"
    ["watermark"]=>
    array(2) {
      ["small"]=>
      string(10) "wsmall.png"
      ["normal"]=>
      &string(11) "wnormal.png"
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:39:37.583

[Zend Framework](http://framework.zend.com)有一个名为[Zend_Config_Ini](http://framework.zend.com/manual/en/zend.config.adapters.ini.html)的类，它将将此结构的文件解析为对象或数组。

为了使用它，您需要从 Zend Framework 库中获取 3 个文件：

*   Zend/Config.php
*   Zend/Config/Ini.php
*   Zend/Config/Exception.php

拥有这 3 个文件后，下面的代码演示了如何解析和访问该文件中的值：

```
require_once 'Zend/Config/Ini.php';

$ini = new Zend_Config_Ini('settings.ini');
$ini = $ini->toArray();

echo $ini['session']['server'][0]['host']; // 127.0.0.1
echo $ini['session']['server'][1]['id'];   // session2
echo $ini['image']['width'];               // 640 
```

要让 Zend Framework 中的 3 个文件正常工作，请将它们`Zend`放在 PHP 文件所在的某个文件夹中，并将该目录添加`Zend`到您的[include_path](http://php.net/set_include_path)中。

# c# - C# 控制台冲突

> ID：11656162
> 
> 赞同：0
> 
> 时间：2012-07-25T18:24:07.017
> 
> 标签：c#, console-application, collision-detection

目前我正在制作一个控制台游戏（rougelike），我需要一些关于碰撞事件的建议。我需要判断玩家 (@) 旁边是否有墙 (▒)，如果有，则不允许玩家朝那个方向移动。有没有人对我如何使用 C# 中的控制台执行此操作有任何想法？

如果需要，我可以提供一些我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:27:14.843

两种方式：

*   将所有墙壁的位置保持在 HashSet 或类似中。
*   检查玩家想要去的方向，然后检查是否有墙。

我不明白为什么这么难，也许你可以解释一下；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:28:32.287

首先 - 我对控制台游戏的经验为零，但在我看来，您应该有一个包含用户所在“地图”的数据模型，并在更新 UI（控制台）之前在数据模型中检查它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:29:27.023

有多种方法可以处理这个问题。我希望你有一个代表游戏地图的二维数组。一种简单的方法是添加一个`CheckMove`验证尝试移动的方法。如果无效，则不执行移动。这是一种伪代码示例。

```
public bool CheckMove(int newY, int newX) {
    if (grid[newY][newX] == WALL)
        return false;
    if (newY < 0 || newY > Y_MAX || newX < 0 || newX > X_MAX)
        return false;
    return true;
}

public void Move(int dir) {
    // calc new x & y

    if (!CheckMove(newY, newX)) return;

    // else do the move
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:30:25.200

我认为您是否编写控制台应用程序并不重要。因为 View 的目的不是检测碰撞。这是您的游戏模型的目的。模型刚刚显示在视图上。内壁结构甚至可以描述为二维阵列。当前玩家坐标也存储在模型中。因此检测移动某些地方的可能性可能如下所示：

```
public void IsPossibleMoveTo(int x, int y)
{
    return mazeArray[x, y] == null;
} 
```

# bash - 如何设置别名、函数或变量作为“2>&1 | tee build.log”的快捷方式？

> ID：11656163
> 
> 赞同：1
> 
> 时间：2012-07-25T18:24:12.697
> 
> 标签：bash, shell

正如主题行所说，我想要一种更快的方式来输入“2>&1 | tee build.log”

或者更好的是，我想要一个扩展为 2>&1 | 的快捷方式 tee $1.$2.log" 其中 $1 和 $2 取自当前行。

我尝试了一些不同的东西，这是我发现的问题

1.  别名似乎仅适用于第一个单词（或另一个别名之后的第一个单词）。所以我很确定他们帮不上忙。
2.  一个函数可以工作 - 例如“log ant compile”，但它具有破坏选项卡扩展的不良副作用，因为它将第一个 arg 移动到第二个等。
3.  变量可以起作用，例如 LOG='2>&1 | tee build.log'，除非它必须使用 esc-ctrl-E 手动扩展，否则 2>&1 作为参数传递。

有人知道更好的方法吗？

谢谢-卡特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:02:35.647

我可以建议第四个选项，一个 readline 宏吗？

将以下内容添加到您的`~/.inputrc`文件中（如有必要，请创建它）：

```
"\C-x\C-l": " 2>&1 | tee build.log" 
```

新的 shell 会自动处理这个文件；您可以尝试通过按 Control-x Control-r 重新读取当前 shell 中的文件（我忘记了是否默认配置）。

现在，只要您按下 Control-x Control-l，文本“2>&1 | tee build.log”就会插入到光标处。

更新：

```
"\C-x\C-l": "\eb\eb2>&1 | tee \ef\C-d.\ef" 
```

将允许您输入

```
build log 
```

后跟 Control-x Control-l 将其转换为

```
2>&1 | tee build.log 
```

# html - 为什么stackoverflow，G+使用表格，而据说表格会阻止内容被查看，直到它下载所有元素？

> ID：11656164
> 
> 赞同：0
> 
> 时间：2012-07-25T18:24:15.797
> 
> 标签：html, templates

如果表格如此邪恶，为什么 Stackoverflow、G+ 和其他人使用表格作为模板？我听说桌子很邪恶，不是吗？他们会阻止要在站点中查看的内容，直到完成其结构，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:28:13.223

至少在堆栈溢出方面，它不使用表格进行布局。

*当表格为整个站点*提供布局而不是其中的选定部分时，它们作为布局是邪恶的。

例如，Stack Overflow 仅将表格用于帖子（问题和答案）布局，作为*页面*布局（使用`div`s）的一部分。

# php - PHP函数将数据返回到数组

> ID：11656175
> 
> 赞同：0
> 
> 时间：2012-07-25T18:24:55.483
> 
> 标签：php, arrays, function, post, multidimensional-array

我有几个 php 函数通过同一个变量返回各种数据，并且该变量应该分配给一个数组。现在我想通过检查`$_POST`并将 $data 分配给`$response`多维数组来执行功能......有什么办法吗？

```
$functionname = $_POST['functionname'];

function testOne(){
$data = array('test'=>'value1');
return $data;
}

function testTwo(){
$data = array('test'=>'value2');
return $data;
}

//Here I need to execte each functions and return $data

$response = array('result' => array('response'=>'success'),'clients' => $data);

print_r($response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:29:08.577

您可以直接调用数组内部的函数。

```
$response = array('result' => array('response'=>'success'),'clients' => testTwo()); 
```

现在`$response['clients']`的值将包含`array('test'=>'value2');`

或者，例如，如果您想通过用户输入调用函数。如果

```
if $_POST['funtionname'] = 'testOne'; then execute testOne();
if $_POST['funtionname'] = 'testTwo'; then execute testTwo(); 
```

那么你可以在`call_user_func()`这里使用。像这样。

```
$_POST['funtionname'] = 'testOne';
call_user_func($_POST['functionname']);
//this will execute testOne(); and depending upon the value it consist, it will execute the corresponding function. 
```

如果这就是你的意思。如果我理解错误，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:30:35.417

函数仅在调用时运行。你还没有调用你的任何一个函数。

从您的代码的外观来看，我假设`$functionname`它将采用`testOne`or的值`testTwo`，然后告诉代码要运行什么函数。然后，您想要做的是使用变量函数名称调用函数并将返回的值捕获到变量中：

```
$functionname = $_POST['functionname'];
//function definitions
$response = array('result' => array('response'=>'success'), 'clients' => $functionname()); 
```

请参阅[文档](http://php.net/manual/en/functions.variable-functions.php)以获取...文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:30:26.657

我认为您想从`$functionname`变量中调用该函数..如果是这样，您就是这样做的：

```
$data = call_user_func($functionname);
$response = array('result' => array('response'=>'success'),'clients' => $data); 
```

在这种情况下，值`$functionname`应该是`testOne`或`testTwo`

[`call_user_func`这里的文档](http://php.net/manual/en/function.call-user-func.php)

# php - 如何删除多余的 javascript

> ID：11656178
> 
> 赞同：-4
> 
> 时间：2012-07-25T18:25:05.070
> 
> 标签：php, javascript, opencart

任何人都可以知道我如何从我的网站 truebatteries.com 中删除额外的 javascript 代码

那么，从 SEO 的角度来看，我如何从网站中删除 javascript 代码，这对我们来说太糟糕了..

例子

请看看我们是否可以通过 HTTP 请求将此内部 JAVASCRIPT 代码变为外部文件或将其完全删除

```
Here is the INTERNAL JAVASCRIPT for CURRENCY CONVERTER that can be found on the site.

<scripttype="text/javascript">

  function get_url_var(url_var) {

    varurlHalves = String(document.location).toLowerCase().split('?');
    varurlVarValue = '';

    if (urlHalves[1]) {
           varurlVars = urlHalves[1].split('&');

           for (var i = 0; i <= (urlVars.length); i++) {
                   if (urlVars[i]) {
                           varurlVarPair = urlVars[i].split('=');

                           if (urlVarPair[0] &&urlVarPair[0] == url_var.toLowerCase()) {
                                  urlVarValue = urlVarPair[1];
                           }
                   }
           }
    }

    return urlVarValue;
    } 

$(document).ready(function () {

    $('#bussoc-paypal-express').live('click', function() {
           $.ajax({
                   url: 'https://www.genuinebatteries.com/payment/bussoc_paypal_express/init',
                   type: 'get',
                   dataType: 'json',
                   success: function(json) {
                           $('.success, .warning, .attention, information, .error').remove();

                           if (json['error']) {

                                  if (json['error']) {
                                          $('#notification').html('<div class="warning" style="display: none;">' + json['error'] + '<imgsrc="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                                          $('.warning').fadeIn('slow');
                                  }
                           }       

if (json['redirect']) {
                                  location = json['redirect'];
                           }       
                   }
           });            
    });     

    if (get_url_var('route') == 'checkout/cart') {
           varobj = $('#content h1');
        if (obj != undefined ) {
           $(obj).append('<div style="float:right; margin-top:6px;"><a id="bussoc-paypal-express" ><imgsrc="catalog/view/theme/default/image/btn_xpressCheckout.gif" alt="Paypal Express" /></a></div>');
        }
    }
           }); 
```

感谢您的回复，我按照您的指示做了，但它不起作用，以下是我需要从货币转换器模块的内部文件移入外部文件的代码，请参阅 tpl 文件的代码

javascript代码在最后，然后我将它移动到另一个文件并像这样引用它，请参阅....

```
<div class="box"> 
```

```
<div class="box-currency">

    <div class="c-amount">

        <?php echo $text_amount; ?>

        <input style="text-align:right" type="text" size="10" value="<?php echo $currency_value; ?>" name="currency_value"/>

    </div>

    <div class="c-from">

        <?php echo $text_from; ?><br />

        <select  style="max-width:160px" name="currency_from">

                    <?php foreach($currencies as $currency){ ?>

                        <option <?php echo ($currency['currency_code'] == $currency_from) ? 'selected="selected"' : ''; ?> value="<?php echo $currency['currency_code']; ?>"><?php echo $currency['currency_name'].'('.$currency['country_code'].')';?></option>

                    <?php } ?>

                </select>

    </div>

    <div class="c-to">

        <?php echo $text_to;?><br />

        <select style="max-width:160px" name="currency_to">

                    <?php foreach($currencies as $currency){ ?>

                        <option <?php echo ($currency['currency_code'] == $currency_to) ? 'selected="selected"' : ''; ?> value="<?php echo $currency['currency_code']; ?>"><?php echo $currency['currency_name'].'('.$currency['country_code'].')';?></option>

                    <?php } ?>

                </select>

    </div><br />

    <div style="text-align:center" class="converter">

    <div id="c-loadding"></div>

    <a class="button" id="goconverter" ><span><?php echo $text_converter;?></span></a>

    </div><br />

    <div class="c-results">

     <p class="prices"> <?php echo $currency_value.$currency_from.' = '.$currencyconverter['amount'].$currency_to; ?></p>

     <p style="font-size:10px"><?php echo $text_rate.$currencyconverter['date'].' '.$currencyconverter['time']; ?></p>

    </div>

</div> 
```

Javascript代码如下，我从底部的上方文件中获取

```
<script type="text/javascript"><!-- 
```

$('a#goconverter').bind('click',function(){

```
$.ajax({

    type: 'POST',

    url: 'index.php?route=module/currencyconverter',

    data: 'currency_value=' + encodeURIComponent($('input[name=\'currency_value\']').val()) + '&currency_from=' + encodeURIComponent($('select[name=\'currency_from\']').val()) + '&currency_to=' + encodeURIComponent($('select[name=\'currency_to\']').val()),

    dataType: 'json',

    beforeSend: function() {

    $('#c-loadding').html('<img src="catalog/view/theme/default/image/loading.gif" id="loading" style="padding-left: 5px;" />');

},

    success:function(json){

        if(json.error)

        {

            $('.c-results').html('<p style="color:red">'+json.error+'</p>');

            $('#c-loadding').html('');

        }

        if(json.currencyconverter)

        {

            var html = '';

            html += '<p class="prices">';

            html += json.currency_value + json.currency_from;

            html += ' = '+ json.currencyconverter['amount'] +'';

            html += json.currency_to;

            html += '</p>';

            html += '<p style="font-size:10px">';

            html += '<?php echo $text_rate; ?>';

            html += json.currencyconverter['date']+json.currencyconverter['time'];

            html += '</p>';

            $('.c-results').html(html);

            $('#c-loadding').html('');

        }

    }

}) 
```

});

//-->

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:28:42.850

将 JavaScript 放在网络服务器上的单独文件中，然后将其包含在脚本标记中，例如：

```
<script type="text/javascript" src="path/to/script.js"></script> 
```

虽然我非常怀疑这会对 SEO 产生任何影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:30:08.630

不确定你的问题是什么，但我认为：

1.  将所有脚本（不是 html 标记）放入另一个扩展名为 .js 的文件中。

2.  将这样的链接放入您的页面：

> `<script type="text/javascript" src="MyNewFile.js"></script>`

这应该允许您的页面以相同的方式工作，并允许您的用户在提供页面时可能缓存此文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:31:12.007

如果您只是不希望它与您的 html 内联，请创建一个新文件，`currencyConverter.js`将所有内容放在此文件中，并在您的 html 中添加对它的引用，例如：

```
<script type="text/javascript" src="/js/currencyConverter.js"></script> 
```

将所有 javascript 放在一个公共位置是个好主意，即`js`web 根目录下的目录

# ruby-on-rails - SimpleDb 作为 Rails 的数据库教程

> ID：11656181
> 
> 赞同：0
> 
> 时间：2012-07-25T18:25:33.430
> 
> 标签：ruby-on-rails, ruby, amazon, amazon-simpledb, railstutorial.org

我正在关注精彩的 Michael Hartl 的教程，可以在这里找到：

[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

我正在尝试将我的数据库后端从 PostgreSQL 修改为 Amazon SimpleDB。任何关于如何在不破坏我现有应用程序的情况下实现这一点的想法都会非常有帮助！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:27:43.413

由于教程涵盖了许多您可能无法在 AWS 上使用的 ActiveRecord 规范，我不明白您为什么要将教程应用程序移植到 AWS。下面是关于使用 Simple DB 创建 Rails 应用程序的介绍：

[http://aws.amazon.com/articles/8621639827664165](http://aws.amazon.com/articles/8621639827664165)

# css - divs下的CSS div

> ID：11656185
> 
> 赞同：2
> 
> 时间：2012-07-25T18:25:36.460
> 
> 标签：css, html, css-float, z-index

我不熟悉 CSS，这是我的第一个项目之一。我试图为我拥有的滑块制作 CSS 样式，我想要这样的东西：

![图像滑块](../Images/9a3668da567a43f90d82b01e77ad7a9a.png)

我已经成功地制作了内部 div 和按钮 div，但让我烦恼的是滑块上下一个/上一个按钮的索引顺序。这是HTML：

```
<div class="slider">
<div><a href="#" id="rhandle">&gt;</a></div>
<div><a href="#" id="lhandle">&lt;</a></div>
<div id="loadingBar"></div>
<div class="slide">
    <div id="leftSlide">
        <h1>WhiteFox Template</h1>
        <p>Buy this theme today with all features, All fonts included in this theme are for personal use only. <br />Detailed documentation included.</p>
        <a href="#" class="button">Read More</a>
    </div>
    <div id="rightSlide">
        <img src="images/slides/slide-1.gif" width="259" height="184" alt="slide-1 Image" />
    </div>
    <div style="height:0;line-height:0;display:block;clear:both;"></div>
</div> 
```

这是滑块的 CSS：

```
.slider {
height: 329px;
width: 794px;
background: #313131;
margin: 50px auto 80px;
color: #FFF;
}

.slider a#lhandle {
    font-size: 24px;
    color: #FFF;
    background: #4bacfd;
    width: 50px;
    float: left;
    height: 23px;
    padding-top: 150px;
    padding-bottom: 150px;
    margin-top: 6px;
}

.slider a#rhandle {
    font-size: 24px;
    color: #FFF;
    background: #4bacfd;
    width: 50px;
    float: right;
    height: 23px;
    padding-top: 150px;
    padding-bottom: 150px;
    margin-top: 6px;
}

.slider a#lhandle:hover,
.slider a#rhandle:hover {
    color: #4bacfd;
    background: #FFF;
    border: 1px solid #4bacfd;
    width: 48px;
    height: 21px;
}

.slider #loadingBar {
    background: #a0a0a0;
    height: 6px;
}

.slider .slide {
    height: 328px;
    width: 793px;
    position: relative;
}

.slider .slide h1 {
    text-transform: uppercase;
    font-size: 24px;
    font-weight: bold;
    margin-top: 50px;
    margin-bottom: 25px;
}

.slider .slide div#leftSlide {
    float: left;
    width: 400px;
    height: 328px;
}

.slider .slide div#rightSlide {
    float: right;
    height: 328px;
    width: 280px;
}

.slider .slide img {
    border: 1px solid #FFF;
    margin-top: 25%;
    margin-bottom: 25%;
}

.slider .slide p {
    display: block;
    text-align: justify;
    margin-bottom: 30px;
    margin-right: 30px;
    margin-left: 30px;
    font-size: 18px;
    line-height: 28px;
} 
```

这样，下一个/上一个按钮位于实际内容下方，当您将鼠标悬停在它们上方时，它们不会变为“：悬停”样式。我已经尝试添加一个“z-index：5”属性，但这不起作用，我该如何实现（如果有更简单的方法，请告诉我）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:45:38.763

`z-index`将工作，你只需要设置一个`position`以外`static`（这是默认值）。

将此添加到两侧的手柄：

```
z-index:10;
position:relative; 
```

演示：http: [//jsfiddle.net/QYnVc/](http://jsfiddle.net/QYnVc/)

旁注：您可以通过对相似元素使用通用类名或对一组 CSS 属性使用多个选择器来减少大量多余的 CSS。例如：

```
#rhandle,
#lhandle {
    font-size: 24px;
    color: #FFF;
    background: #4bacfd;
    width: 50px;
    float: left;
    height: 23px;
    padding-top: 150px;
    padding-bottom: 150px;
    margin-top: 6px;
    z-index:10;
    position:relative;
}

#rhandle {
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:46:46.207

根据[W3schools](http://www.w3schools.com/cssref/pr_pos_z-index.asp)的说法，*z-index*属性仅在受影响项目的*位置*属性设置为*absolute*、*relative*或*fixed*时才有效。

使用这些属性，您可能必须使用*left* /*right* 和*top* /*bottom* 属性重新定位项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:46:15.523

它可以正常工作，`z-index`但是 z-index 仅对定位元素有效，因此您还需要`position:relative`在句柄中添加类似的东西。

**[jsFiddle 示例](http://jsfiddle.net/j08691/HbWc3/)**

CSS：

```
.slider a#lhandle {
    font-size: 24px;
    color: #FFF;
    background: #4bacfd;
    width: 50px;
    float: left;
    height: 23px;
    padding-top: 150px;
    padding-bottom: 150px;
    margin-top: 6px;
    position:relative;
    z-index:10;
}

.slider a#rhandle {
    font-size: 24px;
    color: #FFF;
    background: #4bacfd;
    width: 50px;
    float: right;
    height: 23px;
    padding-top: 150px;
    padding-bottom: 150px;
    margin-top: 6px;
    position:relative;
    z-index:10;
} 
```

在旁注中，您可能需要重新考虑您是如何放置幻灯片的，因为似乎有过多的元素和 CSS。

# css - WP 电子商务插件 - 商店页面一夜之间发生了变化，不确定是什么原因造成的

> ID：11656186
> 
> 赞同：0
> 
> 时间：2012-07-25T18:25:37.057
> 
> 标签：css

我刚刚为客户发布了一个网站 pacayamountaincoffee.com。今早醒来发现现在单品区很高大上。见这里： http: [//pacayamountaincoffee.com/store](http://pacayamountaincoffee.com/store)

自从发布网站以来，我没有编辑过 CSS，而这只是在一夜之间发生的。是插件的错误还是我没有注意到的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:31:14.830

在您的 CSS 中，您有：

```
.default_product_display .imagecol {
text-align: right;
display: table-cell;
vertical-align: middle;
min-height: 50px;
height: 100%;
overflow: hidden;
border: transparent;
} 
```

删除`height: 100%`，你应该很好去

# c# - 在 C# 中读取 csv 文件

> ID：11656188
> 
> 赞同：1
> 
> 时间：2012-07-25T18:25:44.937
> 
> 标签：c#, csv, datatable

我正在使用 Microsoft.Jet.OleDb.4.0 来读取 csv 文件。我比较里面的信息，如果它符合某些标准，就把它添加到下拉列表中。我的问题是 Microsoft.Jet.OleDb.4.0 仅与 x86 兼容。但是，我还有其他需要以 x64 方式运行的功能。是否有更新或替代方法来执行此操作？

下面是我的代码。如果我在 x86 中，目前可以使用。

```
DataTable dataTable = new DataTable("table1");
using (OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + Directory.GetCurrentDirectory() + "; Extended Properties = \"Text;HDR=YES;FMT=Delimited\""))
{
    conn.Open();
    string strQuery = "SELECT * FROM [" + "report.csv" + "]";
    OleDbDataAdapter adapter = new System.Data.OleDb.OleDbDataAdapter(strQuery, conn);
    adapter.Fill(dataTable);
    foreach (DataRow rows in dataTable.Rows) {
        if (rows[1].ToString() == "False")
        {
            unlicensed.Items.Add(rows[0].ToString());
        }
        if (rows[2].ToString() == "False")
        {
            litigation.Items.Add(rows[0].ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:39:34.653

我在另一个问题中有一些代码可以帮助你：

> [在 C# 中读取 CSV 文件](https://stackoverflow.com/questions/1544721/reading-csv-files-in-c-sharp/1544743#1544743)

使用我的答案中的类，您的新代码看起来非常接近：

```
unlicensed.DataSource = CSV.FromFile("report.csv")
                     .Where(r => r[1] != "False").Select(r => r[0]);
litigation.DataSource = CSV.FromFile("report.csv")
                     .Where(r => r[2] != "False").Select(r => r[0]); 
```

听起来您的“错误”标准可能有点不同，但这将非常接近结果。您可能还想在列表中使用 Append 方法。并避免另一个问题：是的，这将读取文件两次。如果这*真的*成为性能问题，您可以编写代码使其只读取一次，但它看起来更像您上面的内容。奇怪的是，较短代码的维护好处超过了这里的性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T04:10:33.727

是的，有另一种方法，而不是使用 Microsoft.Jet.OleDb.4.0 您可以使用以下方法..

```
static void Main()
        {
            string csv_file_path=@"C:\Users\Administrator\Desktop\test.csv";

            DataTable csvData = GetDataTabletFromCSVFile(csv_file_path);

            Console.WriteLine("Rows count:" + csvData.Rows.Count);

            Console.ReadLine();
        }

private static DataTable GetDataTabletFromCSVFile(string csv_file_path)
        {
            DataTable csvData = new DataTable();

            try
            {

            using(TextFieldParser csvReader = new TextFieldParser(csv_file_path))
                {
                    csvReader.SetDelimiters(new string[] { "," });
                    csvReader.HasFieldsEnclosedInQuotes = true;
                    string[] colFields = csvReader.ReadFields();
                    foreach (string column in colFields)
                    {
                        DataColumn datecolumn = new DataColumn(column);
                        datecolumn.AllowDBNull = true;
                        csvData.Columns.Add(datecolumn);
                    }

                    while (!csvReader.EndOfData)
                    {
                        string[] fieldData = csvReader.ReadFields();
                        //Making empty value as null
                        for (int i = 0; i < fieldData.Length; i++)
                        {
                            if (fieldData[i] == "")
                            {
                                fieldData[i] = null;
                            }
                        }
                        csvData.Rows.Add(fieldData);
                    }
                }
            }
            catch (Exception ex)
            {
            }
            return csvData;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T21:14:19.633

我最近有这个问题。不是 Microsoft.Jet.OleDb.4.0，而是需要 x86 的依赖项，但我的应用程序的许多部分需要在 x64 中运行。我通过做两件事来解决它：

1.  将 x86 依赖项分离到它自己的项目中。我将该项目的目标更改为 x86（并将所有其他项目目标保留为 AnyCPU - 我的应用程序被部署到 64 位服务器）

2.  我在 GAC 中重新注册了 x86 依赖项。仍然不确定为什么这会产生很大的不同，但是这样做之后，它就起作用了。

我的猜测是这个问题需要类似的方法。此链接对我帮助很大：[https ://lostechies.com/gabrielschenker/2009/10/21/force-net-application-to-run-in-32bit-process-on-64bit-os/](https://lostechies.com/gabrielschenker/2009/10/21/force-net-application-to-run-in-32bit-process-on-64bit-os/)

* * *

我探索、工作但最终没有采用的一种激进方法是将 x86 代码包装在它自己的可执行文件中，该可执行文件将输出写入控制台并使用`Process.Start()`，`ProcessStartInfo.RedirectStandardOutput`尽管我不建议这样做。虽然是一个有趣的实验。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T18:34:51.300

尝试编译为 32 位应用程序（平台目标：构建选项中的 x86）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T18:31:42.017

如果你不想被强类型化，你可以依赖 List

```
 public List<List<string>> ReadCsvTable(string path) {
            List<List<string>> table = new List<List<string>>();
            string[] lines = System.IO.File.ReadAllLines(path);
            foreach (string line in lines) {
                table.Add(new List<string>(line.Split(',')));
            }
            return table;
        } 
```

如果您想特别注意下面用户突出显示的问题，则应该处理我希望的引用字段：

```
 public List<List<string>> ReadCsvTable(string path) {
            List<List<string>> table = new List<List<string>>();
            string[] lines = System.IO.File.ReadAllLines(path);
            foreach (string line in lines) {
                List<string> rawFields = new List<string>(line.Split(','));                
                List<string> processedFields = new List<string>();
                foreach(string field in rawFields){
                    Match m = Regex.Match("^\"?(^<value>.*)\"?$", line);
                    processedFields.Add(m.Groups["value"].Value);
                }                
                table.Add(processedFields);
            }
            return table;
        } 
```

# java - 如何处理 java.util.concurrent.ExecutionException 异常？

> ID：11656192
> 
> 赞同：7
> 
> 时间：2012-07-25T18:25:57.740
> 
> 标签：java, error-handling, executionexception

我的部分代码抛出 java.util.concurrent.ExecutionException 异常。我该如何处理？我可以使用 throws 子句吗？我对java有点陌生。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T18:31:00.673

这取决于您`Future`对如何处理它的关键任务。事实是你不应该得到一个。如果在您的代码中执行的`Future`未处理的代码抛出了某些东西，您只会收到此异常。

当你`catch(ExecutionException e)`应该能够使用`e.getCause()`来确定你的`Future`.

理想情况下，您的异常不会像这样浮出水面，而是直接在您的`Future`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T18:28:11.703

您应该调查并处理您的 ExecutionException 的原因。

在“Java Concurrency in Action”一书中描述的一种可能性是创建`launderThrowable`负责展开泛型的方法`ExecutionExceptions`

```
void launderThrowable ( final Throwable ex )
{
    if ( ex instanceof ExecutionException )
    {
        Throwable cause = ex.getCause( );

        if ( cause instanceof RuntimeException )
        {
            // Do not handle RuntimeExceptions
            throw cause;
        }

        if ( cause instanceof MyException )
        {
            // Intelligent handling of MyException
        }

        ...
    }

    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T18:30:25.813

如果你想处理异常，事情就很简单了。

```
 public void exceptionFix1() {
       try {
           //code that throws the exception
       } catch (ExecutionException e) {
           //what to do when it throws the exception
       }
   }

   public void exceptionFix2() throws ExecutionException {
       //code that throws the exception
   } 
```

请记住，第二个示例必须包含在`try-catch`执行层次结构上方的某个块中。

如果您正在寻找修复异常，我们将不得不查看更多您的代码。

# android - 为Android中每个应用程序的每个活动提供一个ID

> ID：11656194
> 
> 赞同：0
> 
> 时间：2012-07-25T18:26:03.580
> 
> 标签：android, android-activity

我的问题是：我会为 android 手机上每个现有（只有一个活跃的）应用程序的每个活动提供一个唯一的 ID。你知道怎么做吗？（对不起，我的英语是法语……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:36:28.497

正如 Dheeraj 所说：“您可能指的是 ComponentName”。组件名称是：

> 可用的特定应用程序组件（Activity、Service、BroadcastReceiver 或 ContentProvider）的标识符。此处封装的两条信息用于标识组件：它所在的包（字符串）和该包中的类（字符串）名称。

现在，您可以创建一个包含包名称（应用程序唯一）+ 类名（活动唯一）的对象。所以功劳归于 Dheeraj。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:47:17.473

如果您的目标是启动 Activity，那么您可以这样做：

```
Intent i = new Intent(context, MyActivity.class);
startActivity(i); 
```

# jquery - 模态窗口中的 Flexslider

> ID：11656196
> 
> 赞同：0
> 
> 时间：2012-07-25T18:26:19.460
> 
> 标签：jquery, modal-dialog, flexslider

我在模态窗口中使用 flexslider。当我打开模态窗口时，会出现 flexslider 以及下一个/上一个导航。但是，导航起初不起作用。如果我等待几分钟并返回页面，导航将正常工作。

我检查了萤火虫，我没有看到任何会阻碍脚本的东西。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:36:51.860

我在这里找到了答案[https://github.com/woothemes/FlexSlider/issues/182](https://github.com/woothemes/FlexSlider/issues/182)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T08:43:19.733

为了更加混凝土。

您应该`$(window).trigger('resize');`在模态的打开事件上执行。

# android - 如何删除带有操作栏、视图页面和多个片段的选项卡？

> ID：11656197
> 
> 赞同：5
> 
> 时间：2012-07-25T18:26:24.863
> 
> 标签：android, android-fragments, android-viewpager, actionbarsherlock

我正在使用我在[这里](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments)找到的代码。

```
public class ActionBarTabs extends SherlockFragmentActivity {
CustomViewPager mViewPager;
TabsAdapter mTabsAdapter;
TextView tabCenter;
TextView tabText;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    mViewPager = new CustomViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(bar.newTab().setText("Home"),
            ToolKitFragment.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("FujiSan"),
            FujiFragment.class, null);
}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
}
} 
```

我正在尝试对其进行修改，以便可以动态删除选项卡。我尝试通过简单地创建这个函数：

```
 public void removeTab(ActionBar.Tab tab) {
        mTabs.remove(tab);
        mActionBar.removeTab(tab);
        notifyDataSetChanged();
    } 
```

但我总是得到一个 indexoutofbounds 异常。有谁知道这样做的好方法？

**编辑**

通过将我的方法更改为：

```
 public void removeTab(ActionBar.Tab tab) {
        mTabs.remove(tab.getTag());
        mActionBar.removeTab(tab);
        notifyDataSetChanged();
    } 
```

我能够成功删除标签。但是，当我删除一个不是最右边的选项卡时，与该选项卡关联的视图（或片段？）不会消失。相反，它似乎与下一个最高选项卡相关联。例如，如果我删除选项卡 0，选项卡 0 的视图只会移动到选项卡 1。如果我删除 ID 最高的选项卡，则选项卡和视图会正确消失，但当我添加新选项卡时会返回。

就好像某处有一个片段列表与选项卡相关联，删除选项卡并不会删除片段。有谁知道是什么原因造成的？

**编辑2**

我尝试使用以下方法删除片段：

```
 Fragment fragmentToRemove = getItem(tab.getPosition());
            destroyItem(mViewPager, tab.getPosition(), fragmentToRemove); 
```

并且

```
 Fragment fragmentToRemove = getItem(tab.getPosition());
        FragmentTransaction fragmentTransaction = mActivity
                .getSupportFragmentManager().beginTransaction();
        fragmentTransaction.remove(fragmentToRemove);
        fragmentTransaction.commit(); 
```

但到目前为止，两者都没有奏效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T21:04:17.877

知道了！

```
public void removeTab(ActionBar.Tab tab) {
    mTabs.remove(tab.getTag());
    mActionBar.removeTab(tab);
    notifyDataSetChanged();
} 
```

并覆盖destroyItem

```
 @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        // TODO Auto-generated method stub
        super.destroyItem(container, position, object);
        FragmentManager manager = ((Fragment) object).getFragmentManager();
        FragmentTransaction trans = manager.beginTransaction();
        trans.remove((Fragment) object);
        trans.commit();
    } 
```

完美运行！！！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T21:58:38.323

我今天刚刚发现，支持插入或删除标签的真正技巧是覆盖`FragmentPagerAdapter.getItemPosition()`：

```
@Override
public int getItemPosition(Object object) {
    Fragment fragment = (Fragment) object;
    for (int i = 0; i < tabInfos.size(); i++) {
        if (tabInfos.get(i).clss == fragment.getClass()) {
            return i;
        }
    }
    // The tab must have been removed
    return POSITION_NONE;
} 
```

`getItemPosition()`将`ViewPager`在您调用`notifyDataSetChanged()`后（添加/删除选项卡后）调用。`ViewPager`正在尝试将其缓存与此适配器重新同步。它调用`getItemPosition()`它持有的每个“对象”（片段），我们告诉它片段来自哪个位置。如果没有匹配，那是因为我们删除了那个选项卡，所以 return `POSITION_NONE`。

我还发现，`FragmentPagerAdapter.getItemId()`如果您插入或删除选项卡，则覆盖很重要，因为片段将左右移动位置。此方法由项目调用`FragmentPagerAdapter.instantiateItem()`并附加到项目的名称（字符串）。它使用此名称来查找具有匹配名称（如果有）的预先存在的片段，否则实例化一个新片段。这是一些代码：

```
@Override
public long getItemId(int position) {
    TabInfo info = tabInfos.get(position);
    // The default hashCode() implementation is based on memory address, which will be unique
    int hash = info.clss.hashCode();
    return hash;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-18T20:26:52.210

好的 - 这个人吃了我 2 周的午餐。我没有发现上面的内容完全如图所示对我有用。我正在使用 Android Studio 3.5.1 以防万一。

下面是我的 FragmentPagerAdapter 代码的全部内容。它包含您应该需要的大部分内容。无论您的每个片段包含什么，片段代码都相当简单。但是，如果您需要更多或有任何问题，请告诉我。

另外，如果您有任何意见或发现任何错误，请发表评论。我希望这对其他人有帮助。

```
import android.content.Context;
import android.view.ViewGroup;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentPagerAdapter;
import androidx.fragment.app.FragmentTransaction;
import androidx.viewpager.widget.ViewPager;

import com.google.android.material.tabs.TabLayout;

import java.util.ArrayList;

public class ChecklistPagerAdapter extends FragmentPagerAdapter {

    private final Context mContext;
    private int currentTabPosition = -1;
    ArrayList<String> tabNames = new ArrayList<>();
    ArrayList<Fragment> fragments = new ArrayList<>();

    public ChecklistPagerAdapter(Context context, FragmentManager fm) {
        super(fm);
        mContext = context;
    }

    public void add(Fragment fragment, String title) {
        tabNames.add(title);
        fragments.add(fragment);
    }

    public int getCurrentTabPosition() {
        return currentTabPosition;
    }

    @Override
    public Fragment getItem(int position) {
        return fragments.get(position);
    }

    @Override
    public int getItemPosition(@NonNull Object object) {
        ChecklistFragment fragment = (ChecklistFragment) object;
        for (int i = 0; i < fragments.size(); i++) {
            if (fragments.get(i).equals(fragment)) {
                return i;
            }
        }
        return POSITION_NONE;
    }

    @Override
    public long getItemId(int position) {
        return fragments.get(position).hashCode();
    }

    @Override
    public void setPrimaryItem(@NonNull ViewGroup container, int position, @NonNull Object object) {
        super.setPrimaryItem(container, position, object);
        currentTabPosition = position;
    }

    @Nullable
    @Override
    public CharSequence getPageTitle(int position) {
        return tabNames.get(position);
    }

    @Override
    public int getCount() {
        return fragments.size();
    }

    public void removeTab(TabLayout tabLayout, ViewPager viewPager, DBHelper dbHelper) {
        // Get current tab position as it changes below
        int position = currentTabPosition;

        // Get current fragment representing curTab
        ChecklistFragment fragment = (ChecklistFragment) fragments.get(position);

        // Remove Tab
        tabLayout.removeTabAt(position);

        // Remove from ArrayLists
        fragments.remove(position);
        tabNames.remove(position);

        // Remove fragment
        FragmentManager fragmentManager = fragment.getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.remove(fragment);
        fragmentTransaction.commit();

        // Refresh
        tabLayout.invalidate();
        notifyDataSetChanged();

        // Remove all records from ChecklistTab table
        dbHelper.clearChecklistTab(fragment.getOutingId(), fragment.getChecklistId());
    }
} 
```

# python - 拆分字符串中的字符时如何删除单引号，该字符串在python中表示为元组

> ID：11656202
> 
> 赞同：0
> 
> 时间：2012-07-25T18:26:33.337
> 
> 标签：python

字符串表示如下：

```
str = '1,1' 
```

将其更改为元组，如下所示：

```
p = ('1,1',) 
```

我需要类似下面给出的表示：

```
(1,1) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T18:28:02.243

你的意思是这样的吗？

```
s = '1,1'
p = tuple( int(x) for x in s.split(',') ) 
```

这会导致元组元素成为整数，这就是您想要的。

如果你希望元组元素是字符串，这样的事情应该可以工作：

```
p = tuple( s.split(',') ) 
```

如果您的字符串实际上包含引号字符，则可以删除它们`s=s.replace("'")`...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T18:29:06.360

你也可以这样做：

```
import ast
s = '1,1'
p = ast.literal_eval(s) 
```

编辑：根据 mgilson 的见解确保安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T05:48:22.850

我们可以使用正则表达式：

```
import re
s = '1,1'
int_tuple = tuple(int(s) for s in re.findall('\\d+', s))
Output: (1, 1) 
```

# javascript - 通过拖放在运行时启用/禁用可排序的 jQuery UI（jsFiddle 示例）

> ID：11656208
> 
> 赞同：1
> 
> 时间：2012-07-25T18:26:56.793
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-sortable

我有一个问题要问你们当中的 jQuery 大师。

**设想**

我正在构建一个网络应用程序，它（除其他外）允许用户在大桌子内对卡片进行排序。该表的一个特点是一个固定在表顶部的 bin，但同时“固定”到行上。它允许用户将卡片放置在与列关联但不与行关联的箱中。

这是一个[精简的 jsFiddle 示例](http://jsfiddle.net/aHKU5/263/)（制作起来很痛苦），向您展示我的意思。

**问题**

问题是，如果您在表格中**向下滚动一条路径**，然后尝试将一张卡片从表格拖到垃圾箱中，它通常不起作用。取而代之的是，卡片被放置在用户看不到的垃圾箱“后面”的表格单元格中。希望这是有道理的。

**问题和攻击计划**

我认为解决此问题的最佳方法是在用户将鼠标悬停在 bin 上时以某种方式禁用除 bin 之外的所有表中的单元格。这样卡片就一定会落在垃圾箱中，而不是在垃圾箱后面的表格单元格中。

你同意？有没有更好的方法来解决这个问题？

**笔记**

您可能会看到我的实现，并想知道为什么我要按照我的方式实现。（例如为什么我在 bin、顶行和左列中使用表格单元而不是 div。）不幸的是，我无法完全解释为什么我选择了我所做的实现，但我意识到我是在一个此示例未显示的约束数量。所以......我愿意接受有关如何改进布局的建议，但请不要用“好吧，你为什么不设置这个*'这个'*方式而不是这样你就不会有处理这个问题，因为你建议的设置很可能由于某种原因对我不起作用。

如果我需要澄清任何事情，请告诉我。非常感谢任何回答的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:41:36.623

这会做（[小提琴](http://jsfiddle.net/aHKU5/299/embedded/result/)）：

```
$('#binRow').mouseenter(function() {
    $('tr:not("#binRow") td.card-holder')
        .removeClass('card-holder')
        .addClass('disabled-card-holder');
}).mouseleave(function() {
    $('.disabled-card-holder')
        .removeClass('disabled-card-holder')
        .addClass('card-holder');
});​ 
```

# php - 我如何缓慢启动 nginx 和/或 Apache？

> ID：11656211
> 
> 赞同：0
> 
> 时间：2012-07-25T18:27:10.650
> 
> 标签：php, apache, caching, nginx, iptables

我有一台服务器，其中 nginx 用作前端负载均衡器，Apache 与 mod_php 作为后端的应用程序服务器。

在高峰时段，如果我在重新启动后立即重新启动 apache，它将在当前负载下死亡，因为还没有缓存。

我在想可能有一种方法可以以某种方式缓慢启动？即根据服务正常运行时间或其他东西限制连接数，例如“允许不超过 1 秒前的 10 个连接”或类似的东西。

使用 iptables 的更多低级方法也适用于我，只是不知道在哪里寻找它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:33:55.773

就我个人而言，我不会依赖用户加热缓存，我更愿意：

1/ 将 Nginx 置于“维护模式”并使其临时代理到 HTML 文件（快速）

2/ 在 8080（或其他）端口上使用 wget 自己预热缓存（或者如果可能的话最好使用 cli PHP 脚本，但并非总是如此）

3/ 一旦加热退出维护模式。

Ps 当我提到维护模式时，我不知道 nginx 必须启用此开关，但您可以使用 bash 脚本来更改配置以打开/关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:34:06.953

重新加载，但请不要重新启动 Apache。你很幸运，你有 nginx 来平滑峰值，和/或在 Apache 关闭时返回错误页面，但它不允许你以你喜欢的方式使用 HTTP 服务。在环境生产中，至少在我的工作中，这会让我被解雇。

我相信 nginx 必须有一个配置或一种方法来实现一个脚本，以等待 60 秒，因为在将其视为（可用）之前在线检测到节点（活动）。

# c# - 仅允许在 TextBoxes 中使用整数

> ID：11656217
> 
> 赞同：2
> 
> 时间：2012-07-25T18:27:48.917
> 
> 标签：c#, winforms, textbox

我在检查文本框并确保其中只有整数时遇到问题。

到目前为止，我能够确认文本框中有文本，但检查它们是否是整数不起作用。这是我到目前为止有效的代码。

```
if (textBox1.Text.Length == 0)
{
    errorProvider1.SetError(textBox1, "need Cost of Disks");
    return;
}
if (textBox2.Text.Length == 0)
{
    errorProvider2.SetError(textBox2, "need Total disks in package");
    return;
}
if (textBox3.Text.Length == 0)
{
    errorProvider3.SetError(textBox3, "need the Gigabyte per disk");
    return;
}
try
{
    Double[] myValues = new Double[3];
    myValues[0] = Double.Parse(textBox1.Text);
    myValues[1] = Double.Parse(textBox2.Text);
    myValues[2] = Double.Parse(textBox3.Text);

    Double ppd = myValues[0] / myValues[1] / myValues[2];

    ppd = Math.Round(ppd, 3, MidpointRounding.AwayFromZero);

    label4.Text = ppd.ToString();
}
catch (FormatException)
{
    //errorProvider1.SetError(label4, "testing1");

    //errorProvider2.SetError(label4, "testing2");

    //errorProvider3.SetError(label4, "testing3");
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:32:34.433

使用您当前的模式，如下所示：

```
int tester;
if (!Int32.TryParse(textBox1.Text, out tester))
{
    errorProvider1.SetError(textBox1, "must be integer");
    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:32:00.180

你为什么不使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/kkx4h3az.aspx)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:29:03.957

覆盖[`Validating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)表单文本框中的事件，然后您可以[`TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)对内容执行操作。

```
public void textBox1_Validating(...)
{
  // TryParse
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:30:29.057

您可以使用 int.TryParse 方法检查字符串是否为整数：

```
int n = 0;
bool isNumber = int.TryParse(textBox1.Text, out n);

if (!isNumber)
   return; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T18:48:47.830

如果您不想允许除数字之外的任何内容进入编辑框，请连接到键盘事件，检查不是数字的字符并将其取消。

当您在一个文本框上整理出需要哪些事件时，只需在其他文本框上重复使用相同的事件，因为您不必复制事件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-25T20:19:40.263

如果您曾经开始使用 ajax 工具包，请将此作为您的记录

```
<ajaxToolkit:FilteredTextBoxExtender ID="FilteredTextBoxExtender1" TargetControlID="FUND_CD" FilterType="Custom" ValidChars="1234567890" runat="server">
                        </ajaxToolkit:FilteredTextBoxExtender> 
```

# jsf - 提交时的 JSF 表单

> ID：11656218
> 
> 赞同：0
> 
> 时间：2012-07-25T18:27:53.367
> 
> 标签：jsf, jsf-2, primefaces, ajax4jsf

如果我们有几个像下面这样的表单，当我最终按下提交按钮时，它应该将所有值从“froms1 到 forms3”发送到服务器。有可能吗？我正在使用素面。

```
<h:form id="forms1">
 <inputText .........
 </h:form>
......
<h:form id="forms2">
 ......
</h:form>
.......
<h:form id="forms3">
.....
</h:form>

<p:commandButton value="submit" action="#{bean.action}" onSubmit="this.forms1,this.forms2,this.forms3" partialSubmit="true" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:42:36.040

您可以将一些 hacky 解决方案放在一起，用一个按钮提交 3 个表单，但最好只在表单内使用 1 个表单和 1 个提交按钮。

如果您使用多个表单来区分事物的外观，请尝试使用字段集。Primefaces 甚至还有一个 fieldset 组件`<p:fieldset></p:fieldset>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T05:44:38.387

提交多个表单不是一个好主意，但您可以通过以下代码提交..

```
<p:commandButton title="Submit" value="Submit" action="#{bean.action}" process="form1,form2,form3"> 
```

这可能有用 4 你...

# jquery-mobile - 将垂直滚动添加到内容部分 JQM

> ID：11656219
> 
> 赞同：0
> 
> 时间：2012-07-25T18:27:58.850
> 
> 标签：jquery-mobile

如何将垂直滚动添加到 jquery 移动网站的内容部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:52:48.233

你的意思是[页眉和页脚固定](http://jquerymobile.com/demos/1.1.1/docs/toolbars/bars-fixed.html)？或者像[iscroll 之](https://github.com/cubiq/iscroll)类的东西，如果那样的话，那么该插件有一个用于 JQM 的[插件包装器](https://github.com/watusi/jquery-mobile-iscrollview)。如果它不是固定的页眉和页脚，那么你应该能够只粘贴一个指定高度的 div 并将其设置为有滚动条。

# javascript - 如何在 Javascript 的 for 循环中使用变量？

> ID：11656231
> 
> 赞同：0
> 
> 时间：2012-07-25T18:28:19.527
> 
> 标签：javascript, for-loop

我有一个需要迭代的数据表。所以我有这个代码：

```
var tableSize = $('#j_idt11\\:dataTable tbody tr').length;
for(i = 0;i< tableSize;i++){
    var test1 = document.getElementById("j_idt11:dataTable:0:updFoodType").textContent;
    if(test1 == "food")
        alert("hey");
} 
```

但我真的想在 for 循环中使用 i 。我想是这样的：

```
var tableSize = $('#j_idt11\\:dataTable tbody tr').length;
for(i = 0;i< tableSize;i++){
    var test1 = document.getElementById("j_idt11:dataTable:[i]:updFoodType").textContent;
     if(test1 == "food")
         alert("hey");
} 
```

但这不起作用。我必须如何使用语法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:30:50.440

for循环与它无关，您需要将字符串连接起来，

```
for(var i = 0;i< tableSize;i++){
  var test1 = document.getElementById("j_idt11:dataTable:" + i + ":updFoodType").textContent;
  if(test1 == "food")
     alert("hey");
} 
```

还要小心全局变量，您也应该`i`在本地范围内声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:31:07.607

您只需要将 i 的值与您的字符串连接起来：

```
var tableSize = $('#j_idt11\\:dataTable tbody tr').length;
for(i = 0;i< tableSize;i++)
{
   var test1 = document.getElementById("j_idt11:dataTable:" + i + ":updFoodType").textContent;
   if(test1 == "food")
      alert("hey");
} 
```

# c# - 如何在服务器上打开本地 htm 文件

> ID：11656237
> 
> 赞同：0
> 
> 时间：2012-07-25T18:28:39.863
> 
> 标签：c#, asp.net, iis-7, webserver, file-permissions

我们的应用程序将合同文件保存到 C:\Contracts。合同在 aspx 网页上填写，并在提交时将合同作为 .htm 文件保存到该目录，合同的文件路径存储在 OnlineCustomerDocuments 对象中，然后将其发送到数据库。稍后，我们希望能够通过网络应用在网络浏览器中打开这些合约。客户显示在网格视图中，每一行都有合同链接。

这是我现在打开合同的代码：

```
 protected void grdWebs_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        int intId = 0;
        Web objWeb = new Web();
        try
        {
            string strContractFilePath;
            GridViewRow row1;
            List<OnlineCustomerDocuments> lstOnlineCustomerDocuments;
            OnlineCustomerDocuments contract;
            string strContractpath;
            switch (e.CommandName)
            {
                case "View_Details":
                //GridViewRow row = (GridViewRow) (((Button)e.CommandSource).NamingContainer);
                  GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
                intId = Convert.ToInt32(grdWebs.DataKeys[row.RowIndex].Value.ToString());
                Response.Redirect("DetailsForm.aspx?Id=" + intId.ToString(), false);
                break;
            case "Print_Contract":                    
                strContractFilePath = ConfigurationManager.AppSettings["CustomerContractsDirectory"].ToString();
                row1 = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
                intId = Convert.ToInt32(grdWebs.DataKeys[row1.RowIndex].Value.ToString());
                objWeb = QDServiceHelper._QDClient.GetDetails(intId);
                lstOnlineCustomerDocuments = QDServiceHelper._QDClient.GetOnlineCustomerDocumentsByID(intId);
                contract = lstOnlineCustomerDocuments.ElementAt(0);
                strContractpath = contract.DocumentFileName;                    
                System.Diagnostics.Process.Start(strContractpath);                    
                break;                
            default:
                break;            
            }
        }
        catch (Exception ex)
        {
            log.Error(ex.ToString());
        }           
    } 
```

启动合约的按钮：

```
 <asp:LinkButton ID="btnPrintContract" runat="server"  CommandName="Print_Contract" Text="View Signed Contract" width="100px" CssClass ="GeneralHyperlink"></asp:LinkButton> 
```

基本上，选定的行被抓取，并且该客户 ID 的合同被抓取。在我的本地机器上测试应用程序时，创建了合约，正确更新了数据库，并且能够打开合约。但是，当我将应用程序发布到 Web 服务器时，我无法打开合同。代码执行到 Process.start()，但没有任何反应。我检查了文件路径，并且链接按钮的 __doPostBack 是正确的。我唯一能想到的是存在一些权限问题。如果是这种情况，最好尝试弄清楚如何使用 asp.net 模拟等授予这些权限，还是有更好的方法？

***更新****

 **因此，我尝试阅读 html 文档，并像 nathan 建议的那样使用响应写入，但我确实需要在新窗口中打开合同，并且尝试了几种不同的 window.open 方法，但我无法让它工作。我最终按照建议设置了一个虚拟目录，现在一切正常。更新了下面的代码。感谢所有帮助内森。

```
string strContractFilePath;
            GridViewRow row1;
            List<OnlineCustomerDocuments> lstOnlineCustomerDocuments;
            OnlineCustomerDocuments contract;
            string strfileName;
            string file;
            string pathlead;
            string vDir = "/Webfiles/";

            switch (e.CommandName)
            {
                case "View_Details":
                    //GridViewRow row = (GridViewRow) (((Button)e.CommandSource).NamingContainer);
                    GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
                    intId = Convert.ToInt32(grdWebs.DataKeys[row.RowIndex].Value.ToString());
                    Response.Redirect("DetailsForm.aspx?Id=" + intId.ToString(), false);
                    break;
                case "Print_Contract":
                    strContractFilePath = ConfigurationManager.AppSettings["CustomerContractsDirectory"].ToString();
                    row1 = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
                    intId = Convert.ToInt32(grdWebs.DataKeys[row1.RowIndex].Value.ToString());
                    lstOnlineCustomerDocuments = QDServiceHelper._QDClient.GetOnlineCustomerDocumentsByID(intId);
                    contract = lstOnlineCustomerDocuments.ElementAt(0);
                    strfileName = contract.DocumentFileName;

                    //path to the virtual directory on server                       
                    pathlead = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority);
                    if (HttpContext.Current.Request.Url.AbsoluteUri.Contains("CA"))
                    {
                        vDir = "/CA/WebFiles/CA1003/Contracts/";
                        file = pathlead + vDir + strfileName;
                        //Response.Redirect("~/WebFiles/contract.htm");

                        Response.Write("<script>");
                        Response.Write("window.open('" + file + "','_blank')");
                        Response.Write("</script>");
                    }
                    //For testing on local machines
                    else
                    {
                        System.Diagnostics.Process.Start(strContractFilePath + strfileName);
                    }

                    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:33:46.717

```
System.Diagnostics.Process.Start(strContractpath); 
```

这将在服务器上而不是在客户端上打开文档。由于您是在本地进行测试，因此它可以工作，因为您是*服务器*和*客户端*。

换句话说，这行代码只是在服务器上启动一个进程（在这种情况下是一个 Web 浏览器，因为这是`.htm`默认与文件关联的）。当您在本地进行测试时，您看到页面打开了，因为您的计算机充当了`server`，但这实际上并没有将页面提供给客户端，它只是打开了一个程序。当您将其发布到服务器时，您无法看到进程正在启动，因为它发生在服务器上，明白了吗？

您真正想要做的是通过网络服务器将文件内容提供给客户端。

我正在想办法让你做到这一点。

* * *

您可以在 IIS 中创建一个虚拟目录并将其指向包含文件的目录，然后在您的响应中执行`Response.Redirect(<URL to file>);`

或者您可以获取文件的内容并将其填充到响应中。我从来没有亲自这样做过，但是这篇[SO](https://stackoverflow.com/questions/4509417/asp-net-write-out-contents-of-html-file)帖子可能会为您指明正确的方向。在我看来，这可能是您的最佳选择，因为您不必更改任何服务器设置。

**编辑：**

*这*是一个如何完成此操作的示例。请注意，这是未经测试的，因为我在没有网络环境的情况下工作。

```
...
case "Print_Contract":
     strContractFilePath = ConfigurationManager.AppSettings["CustomerContractsDirectory"].ToString();
     row1 = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
     intId = Convert.ToInt32(grdWebs.DataKeys[row1.RowIndex].Value.ToString());
     objWeb = QDServiceHelper._QDClient.GetDetails(intId);
     lstOnlineCustomerDocuments = QDServiceHelper._QDClient.GetOnlineCustomerDocumentsByID(intId);
     contract = lstOnlineCustomerDocuments.ElementAt(0);
     strContractpath = contract.DocumentFileName;                    

     //System.Diagnostics.Process.Start(strContractpath);

     StreamReader sr = new StreamReader(strContractpath);
     while(sr.Peek() >= 0)
     {
          line=sr.ReadLine();
          Response.Write(line);
     }

     break;               
... 
```**

# c - 如何使用 gcc 打印 __uint128_t 数字？

> ID：11656241
> 
> 赞同：64
> 
> 时间：2012-07-25T18:28:49.557
> 
> 标签：c, gcc

是否有`PRIu128`类似于`PRIu64`from的行为`<inttypes.h>`：

```
printf("%" PRIu64 "\n", some_uint64_value); 
```

或手动逐位转换：

```
int print_uint128(uint128_t n) {
  if (n == 0)  return printf("0\n");

  char str[40] = {0}; // log10(1 << 128) + '\0'
  char *s = str + sizeof(str) - 1; // start at the end
  while (n != 0) {
    if (s == str) return -1; // never happens

    *--s = "0123456789"[n % 10]; // save last digit
    n /= 10;                     // drop it
  }
  return printf("%s\n", s);
} 
```

是唯一的选择吗？

请注意，这`uint128_t`是我自己的 typedef `__uint128_t`。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-26T00:23:22.687

[GCC 4.7.1 手册](http://gcc.gnu.org/onlinedocs/)说：

> ## 6.8 128 位整数
> 
> 作为扩展，整数标量类型`__int128`支持具有足够宽以容纳 128 位的整数模式的目标。只需写`__int128`一个有符号的 128 位整数，或 `unsigned __int128`一个无符号的 128 位整数。GCC 不支持为具有小于 [ *sic* ] 128 位宽度的整数`__int128`的目标表示类型的整数常量。`long long`

 *有趣的是，尽管没有提及`__uint128_t`，但即使设置了严格的警告，也可以接受该类型：

```
#include <stdio.h>

int main(void)
{
    __uint128_t u128 = 12345678900987654321;
    printf("%llx\n", (unsigned long long)(u128 & 0xFFFFFFFFFFFFFFFF));
    return(0);
} 
```

汇编：

```
$ gcc -O3 -g -std=c99 -Wall -Wextra -pedantic xxx.c -o xxx  
xxx.c: In function ‘main’:
xxx.c:6:24: warning: integer constant is so large that it is unsigned [enabled by default]
$ 
```

（这是在 Mac OS X 10.7.4 上使用家庭编译的 GCC 4.7.1。）

将常量更改为`0x12345678900987654321`，编译器会说：

```
xxx.c: In function ‘main’:
xxx.c:6:24: warning: integer constant is too large for its type [enabled by default] 
```

所以，操纵这些生物并不容易。十进制常量和十六进制常量的输出是：

```
ab54a98cdc6770b1
5678900987654321 
```

对于十进制打印，最好的办法是查看该值是否大于 UINT64_MAX；如果是，则除以小于 UINT64_MAX 的 10 的最大幂，打印该数字（并且您可能需要第二次重复该过程），然后以小于 10 的最大幂为模打印残差UINT64_MAX，记得用前导零填充。

这导致类似：

```
#include <stdio.h>
#include <inttypes.h>

/*
** Using documented GCC type unsigned __int128 instead of undocumented
** obsolescent typedef name __uint128_t.  Works with GCC 4.7.1 but not
** GCC 4.1.2 (but __uint128_t works with GCC 4.1.2) on Mac OS X 10.7.4.
*/
typedef unsigned __int128 uint128_t;

/*      UINT64_MAX 18446744073709551615ULL */
#define P10_UINT64 10000000000000000000ULL   /* 19 zeroes */
#define E10_UINT64 19

#define STRINGIZER(x)   # x
#define TO_STRING(x)    STRINGIZER(x)

static int print_u128_u(uint128_t u128)
{
    int rc;
    if (u128 > UINT64_MAX)
    {
        uint128_t leading  = u128 / P10_UINT64;
        uint64_t  trailing = u128 % P10_UINT64;
        rc = print_u128_u(leading);
        rc += printf("%." TO_STRING(E10_UINT64) PRIu64, trailing);
    }
    else
    {
        uint64_t u64 = u128;
        rc = printf("%" PRIu64, u64);
    }
    return rc;
}

int main(void)
{
    uint128_t u128a = ((uint128_t)UINT64_MAX + 1) * 0x1234567890ABCDEFULL +
                      0xFEDCBA9876543210ULL;
    uint128_t u128b = ((uint128_t)UINT64_MAX + 1) * 0xF234567890ABCDEFULL +
                      0x1EDCBA987654320FULL;
    int ndigits = print_u128_u(u128a);
    printf("\n%d digits\n", ndigits);
    ndigits = print_u128_u(u128b);
    printf("\n%d digits\n", ndigits);
    return(0);
} 
```

输出是：

```
24197857200151252746022455506638221840
38 digits
321944928255972408260334335944939549199
39 digits 
```

我们可以使用以下方法进行验证`bc`：

```
$ bc
bc 1.06
Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'. 
ibase = 16
1234567890ABCDEFFEDCBA9876543210
24197857200151252746022455506638221840
F234567890ABCDEF1EDCBA987654320F
321944928255972408260334335944939549199
quit
$ 
```

显然，对于十六进制，过程更简单；您只需两个操作即可移动、遮罩和打印。对于八进制，由于 64 不是 3 的倍数，因此您必须通过类似的步骤进行十进制运算。

`print_u128_u()`界面并不理想，但它至少会返回打印的字符数，就像现在一样`printf()`。调整代码以将结果格式化为字符串缓冲区在编程中并非完全是微不足道的练习，但也不是非常困难。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-25T21:21:22.327

不，库中不支持打印这些类型。它们甚至不是 C 标准意义上的扩展整数类型。

您从背面开始打印的想法很好，但您可以使用更大的块。在 P99 的一些测试中，我有这样一个函数，它使用

```
uint64_t const d19 = UINT64_C(10000000000000000000); 
```

作为适合 的 10 的最大幂`uint64_t`。

作为十进制，这些大数字很快就会变得不可读，因此另一个更简单的选择是以十六进制打印它们。然后你可以做类似的事情

```
 uint64_t low = (uint64_t)x;
  // This is UINT64_MAX, the largest number in 64 bit
  // so the longest string that the lower half can occupy
  char buf[] = { "18446744073709551615" };
  sprintf(buf, "%" PRIX64, low); 
```

得到下半部分，然后基本相同

```
 uint64_t high = (x >> 64); 
```

为上半部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-25T22:18:19.797

我没有内置解决方案，但除法/模数很昂贵。您只需移位即可将二进制转换为十进制。

```
static char *qtoa(uint128_t n) {
    static char buf[40];
    unsigned int i, j, m = 39;
    memset(buf, 0, 40);
    for (i = 128; i-- > 0;) {
        int carry = !!(n & ((uint128_t)1 << i));
        for (j = 39; j-- > m + 1 || carry;) {
            int d = 2 * buf[j] + carry;
            carry = d > 9;
            buf[j] = carry ? d - 10 : d;
        }
        m = j;
    }
    for (i = 0; i < 38; i++) {
        if (buf[i]) {
            break;
        }
    }
    for (j = i; j < 39; j++) {
        buf[j] += '0';
    }
    return buf + i;
} 
```

（但显然 128 位除法/模数并不像我想象的那么昂贵。在带有 GCC 4.7 和 Clang 3.1 的 Phenom 9600 上`-O2`，这似乎比 OP 的方法慢 2x-3x。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-21T13:49:53.373

您可以使用这个简单的宏：

```
typedef __int128_t int128 ;
typedef __uint128_t uint128 ;

uint128  x = (uint128) 123;

printf("__int128 max  %016"PRIx64"%016"PRIx64"\n",(uint64)(x>>64),(uint64)x); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-04T15:46:40.207

根据塞巴斯蒂安的回答，这是用于 g++ 中的已签名 int128，而不是线程安全的。

```
// g++ -Wall fact128.c && a.exe
// 35! overflows 128bits

#include <stdio.h>

char * sprintf_int128( __int128_t n ) {
    static char str[41] = { 0 };        // sign + log10(2**128) + '\0'
    char *s = str + sizeof( str ) - 1;  // start at the end
    bool neg = n < 0;
    if( neg )
        n = -n;
    do {
        *--s = "0123456789"[n % 10];    // save last digit
        n /= 10;                // drop it
    } while ( n );
    if( neg )
        *--s = '-';
    return s;
}

__int128_t factorial( __int128_t i ) {
    return i < 2 ? i : i * factorial( i - 1 );
}

int main(  ) {
    for( int i = 0; i < 35; i++ )
        printf( "fact(%d)=%s\n", i, sprintf_int128( factorial( i ) ) );
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-15T04:18:47.693

根据上面abelenky的回答，我想出了这个。

```
void uint128_to_str_iter(uint128_t n, char *out,int firstiter){
    static int offset=0;
    if (firstiter){
        offset=0;
    }
    if (n == 0) {
      return;
    }
    uint128_to_str_iter(n/10,out,0);
    out[offset++]=n%10+0x30;
}

char* uint128_to_str(uint128_t n){
    char *out=calloc(sizeof(char),40);
    uint128_to_str_iter(n, out, 1);
    return out;
} 
```

这似乎按预期工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-25T05:44:26.263

> 如何使用 gcc 打印 __uint128_t 数字？
> 是否存在与 PRIu64 类似的 PRIu128：

不，而是以*十进制*打印，打印到字符串。

所需的字符串缓冲区的大小刚好足以完成每个`x`.

```
typedef signed __int128 int128_t;
typedef unsigned __int128 uint128_t;

// Return pointer to the end
static char *uint128toa_helper(char *dest, uint128_t x) {
  if (x >= 10) {
    dest = uint128toa_helper(dest, x / 10);
  }
  *dest = (char) (x % 10 + '0');
  return ++dest;
}

char *int128toa(char *dest, int128_t x) {
  if (x < 0) {
    *dest = '-';
    *uint128toa_helper(dest + 1, (uint128_t) (-1 - x) + 1) = '\0';
  } else {
    *uint128toa_helper(dest, (uint128_t) x) = '\0';
  }
  return dest;
}

char *uint128toa(char *dest, uint128_t x) {
  *uint128toa_helper(dest, x) = '\0';
  return dest;
} 
```

测试。最坏情况缓冲区大小：41。

```
int main(void) {
  char buf[41];
  puts("1234567890123456789012345678901234567890");
  puts(uint128toa(buf, 0));
  puts(uint128toa(buf, 1));
  puts(uint128toa(buf, (uint128_t) -1));
  int128_t mx = ((uint128_t) -1) / 2;
  puts(int128toa(buf, -mx - 1));
  puts(int128toa(buf, -mx));
  puts(int128toa(buf, -1));
  puts(int128toa(buf, 0));
  puts(int128toa(buf, 1));
  puts(int128toa(buf, mx));
  return 0;
} 
```

输出

```
1234567890123456789012345678901234567890
0
1
340282366920938463463374607431768211455
-170141183460469231731687303715884105728
-170141183460469231731687303715884105727
-1
0
1
170141183460469231731687303715884105727 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-05T00:54:27.187

我想以十进制打印无符号的 64/128 位数字，并且不想重新发明轮子。所以“pu128()”有3种情况：<10^19，<10^38，否则。也许不是最快的，但应该是便携的。定义 UINT128_MAX 以及 UINT128_C 宏。

```
$ gcc -Wall -Wextra -pedantic lu.c
$ ./a.out 
0
10000000000000000000
18446744073709551615
0
10000000000000000000
18446744073709551615
100000000000000000000000000000000000000
340282366920938463463374607431768211455
$ 
$ cat lu.c 
#include <stdio.h>
#include <inttypes.h>

#define UINT128_C(u)     ((__uint128_t)u)

void pu64(__uint64_t u)   { printf("%" PRIu64, u); }
void pu640(__uint64_t u)  { printf("%019" PRIu64, u); }

#define D19_ UINT64_C(10000000000000000000)
const __uint128_t d19_ = D19_;
const __uint128_t d38_ = UINT128_C(D19_)*D19_;

const __uint128_t UINT128_MAX = UINT128_C(UINT64_MAX)<<64 | UINT64_MAX;

void pu128(__uint128_t u)
{
       if (u < d19_) pu64(u);
  else if (u < d38_) { pu64(u/d19_); pu640(u%d19_); }
  else               { pu64(u/d38_); u%=d38_; pu640(u/d19_); pu640(u%d19_); }
}

int main()
{
  pu64(0); puts("");
  pu64(d19_); puts("");
  pu64(UINT64_MAX); puts("");

  pu128(0); puts("");
  pu128(d19_); puts("");
  pu128(UINT64_MAX); puts("");
  pu128(d38_); puts("");
  pu128(UINT128_MAX); puts("");
}
$ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-16T06:05:35.727

这是 Leffler 答案的修改版本，支持从 0 到 UINT128_MAX

```
/*      UINT64_MAX 18446744073709551615ULL */
#define P10_UINT64 10000000000000000000ULL /* 19 zeroes */
#define E10_UINT64 19

#define STRINGIZER(x) # x
#define TO_STRING(x) STRINGIZER(x)

int print_uint128_decimal(__uint128_t big) {
  size_t rc = 0;
  size_t i = 0;
  if (big >> 64) {
    char buf[40];
    while (big / P10_UINT64) {
      rc += sprintf(buf + E10_UINT64 * i, "%." TO_STRING(E10_UINT64) PRIu64, (uint64_t)(big % P10_UINT64));
      ++i;
      big /= P10_UINT64;
    }
    rc += printf("%" PRIu64, (uint64_t)big);
    while (i--) {
      fwrite(buf + E10_UINT64 * i, sizeof(char), E10_UINT64, stdout);
    }
  } else {
    rc += printf("%" PRIu64, (uint64_t)big);
  }
  return rc;
} 
```

试试这个：

```
print_uint128_decimal(-1); // Assuming -1's complement being 0xFFFFF... 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-01T10:16:50.783

C++ 变体。您可以将其用作模板来派生该函数的专用 C 版本：

```
template< typename I >
void print_uint(I value)
{
    static_assert(std::is_unsigned< I >::value, "!");
    if (value == 0) {
        putchar_unlocked('0');
        return;
    }
    I rev = value;
    I count = 0;
    while ((rev % 10) == 0) {
        ++count;
        rev /= 10;
    }
    rev = 0;
    while (value != 0) {
        rev = (rev * 10) + (value % 10);
        value /= 10;
    }
    while (rev != 0) {
        putchar_unlocked('0' + (rev % 10));
        rev /= 10;
    }
    while (0 != count) {
        --count;
        putchar_unlocked('0');
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-07T02:21:11.143

在我之前的回答中，我展示了如何基于“printf()”打印 128 位数字。

我已经实现了一个 256 位无符号整数类型 uint256_t 为：

```
typedef __uint128_t uint256_t[2]; 
```

我已经实现了所需的操作，比如“sqr()”，以 __uint128_t 作为参数并计算 uint256_t 作为结果。

我有 uint256_t 的十六进制打印，现在想要十进制打印。但目前我的 uint256_t 只有“mod_256()”，但没有“div()”，所以在许多答案中看到的“n/=10”是没有选择的。我找到了一个可行的（慢）解决方案，并且由于我仅在定时部分之外使用打印，因此这是可以接受的。代码可以在这个要点中找到（包括编译命令细节）：
[https ://gist.github.com/Hermann-SW/83c8ab9e10a0bb64d770af543ed08445](https://gist.github.com/Hermann-SW/83c8ab9e10a0bb64d770af543ed08445)

如果您使用 arg 运行 sqr.cpp，它只会输出 UINT256_MAX 并退出：

```
if (argc>1)  { pu256(UINT256_MAX); puts(""); return 0; }

$ ./sqr 1
115792089237316195423570985008687907853269984665640564039457584007913129639935
$ 
```

棘手的部分是递归调用以达到最大使用数字，然后减去第一个数字并输出。递归完成其余的工作。函数“pu256()”使用快速乘以 10“mul10()”：

```
...
void mul10(uint256_t d, uint256_t x)
{
  uint256_t t = { x[0], x[1] };
  shl_256(t, 2);
  add_256(d, x, t);
  shl_256(d, 1);
}

const uint256_t UINT256_MAX_10th = UINT256( UINT128(0x1999999999999999, 0x9999999999999999), UINT128(0x9999999999999999, 0x999999999999999A) );

void pu256_(uint256_t v, uint256_t t, const uint256_t o)
{
  if (!lt_256(v, t) && le_256(o, UINT256_MAX_10th))
  {
    uint256_t nt, no = { t[0], t[1] };
    mul10(nt, t);
    pu256_(v, nt, no);
  }
  char d = '0';
  while (le_256(o, v))
  {
    sub_256(v, v, o);
    ++d;
  }
  putchar(d);
}

void pu256(const uint256_t u)
{
  if ((u[1]==0) && (u[0]==0))  putchar('0');
  else
  {
    uint256_t v = { u[0], u[1] }, t = UINT256( 0, 10 ), o = UINT256( 0, 1 );
    pu256_(v, t, o);
  }
}
... 
```

如前所述，这种方法仅对整数类型缺失除法运算有意义。

 `* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-08T07:07:51.753

您可以重新定义运算符 cin 和 cout 以使用 __int128_t。您应该只将 __int128_t 转换为字符串和 cin/cout 字符串

```
typedef __int128_t lint;

istream& operator >> (istream &in, lint &x) {
    string s;
    in >> s;
    for (lint i = s.size() - 1, p = 1; i >= 0; i--, p *= 10) x += p * (s[i] - '0');
    return in;
}

ostream& operator << (ostream &out, lint x) {
    string s;
    while (x > 0) {
        s.push_back(x % 10 + '0');
        x /= 10;
    }
    reverse(s.begin(), s.end());
    out << s;
    return out;
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-05-03T13:34:50.483

这是针对 C++ 的，但我将把它留在这里，因为我还没有为**无符号**128 位整数找到这个问题的 C++ 版本。

这是将 uint128 转换为 base-10 字符串的简单易读的方法（然后您可以打印或做任何您想做的事情）：

```
std::string toString(__uint128_t num) {
    std::string str;
    do {
        int digit = num % 10;
        str = std::to_string(digit) + str;
        num = (num - digit) / 10;
    } while (num != 0);
    return str;
} 
```

如果需要，我们可以通过将数字分成更大的块而不是一次一个来使其速度提高几倍。但它要求我们检查每个块是否有任何丢失的前导零并将它们重新添加：

```
std::string toString(__uint128_t num) {
    auto tenPow19 = 10000000000000000000;
    std::string str;
    do {
        uint64_t digits = num % tenPow19;
        auto digitsStr = std::to_string(digits);
        auto leading0s = (digits != num) ? std::string(19 - digitsStr.length(), '0') : "";
        str = leading0s + digitsStr + str;
        num = (num - digits) / tenPow19;
    } while (num != 0);
    return str;
} 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-12-13T15:35:43.863

很像#3

```
unsigned __int128 g = ...........;

printf ("g = 0x%lx%lx\r\n", (uint64_t) (g >> 64), (uint64_t) g); 
````*

# android - Android-NDK 的 GGC/C++ 对于 std::string::find/std::getline(...) 似乎不稳定

> ID：11656245
> 
> 赞同：1
> 
> 时间：2012-07-25T18:29:05.707
> 
> 标签：android, c++, android-ndk

出现这种情况`std::string::find(char ch)`并且`std::getline(stream, str, delim)`对于否定字符来说是不稳定的；在 Android NDK R6B 上。基本上`std::string::find returns` `std::string::npos`，说当字符是`0xEB`。有没有人发现他们有任何问题？它们似乎适用于 MSVC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:46:16.803

字符在 MSVC 中默认是有符号的，在 NDK 上的 GCC 中默认是无符号的。要更改它，将以下行添加到 Android.mk：

```
LOCAL_CPPFLAGS := $(LOCAL_CPPFLAGS) -fsigned-char 
```

这可能会 C 中断接受字符参数的库函数，例如`strchr`. 问题是他们将该字符视为`int`，如果 char 为负数/超过 0x7F，则将 char 扩展为 int 的规则随编译器设置而异。使用有符号字符设置，负字符值用 1 位扩展为负整数，使用无符号字符，它们用 0 位扩展为 256 以下的正整数。库需要后者。

我最终`strchr`像这样在我的项目中重新定义：

```
// In the common header
extern char *strchr_sb(const char *s, int c);
#define strchr strchr_sb

// Elsewhere
#undef strchr
char *strchr_sb(const char *s, int c)
{
    return strchr(s, c & 0xff);
} 
```

# jquery - 无法滚动到网页中 div 的底部

> ID：11656251
> 
> 赞同：1
> 
> 时间：2012-07-25T18:29:32.680
> 
> 标签：jquery, html, css

我有一个包含一堆 div 的 html 页面。我称它为左 div，我用 jstree 节点填充这个 div。我在 css 中设置了这个 div 的样式：

```
#left {
                padding:0 0 0 0;
                border: 0 0 0 0;
                height: 1000px;
                width: 350px;
                overflow: scroll;
                float: left;
                margin-top:80px;
                position: fixed;

                   } 
```

但是，当我将 jstree 节点加载到其中时，当我向下滚动时，我看不到某些节点所在的 div 底部。jquery 或 css 中是否有方法确保向下滚动时可以看到 div 中的所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:35:03.907

如果所有其他 div 都在您的 div 中，并且 id 还剩下，那么您可以提供`overflow:hidden;`属性并删除 height 属性。如果内部 div 具有有效内容，它将显示左侧 div 内的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:44:03.367

尝试改变

```
 height: 1000px; 
```

至

```
 min-height: 1000px; 
```

如果内容超过 1000px，这将扩大高度

# scheme - Scheme，调用栈有什么区别

> ID：11656252
> 
> 赞同：1
> 
> 时间：2012-07-25T18:29:33.663
> 
> 标签：scheme, callstack

```
(define d
  (append '(a) (call/cc
          (lambda (k) (k (append '(b) '(c)))))))

(define e
  (append '(a) (append '(b) '(c)))) 
```

d和e的调用栈有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:11:01.713

你忘了一个：

```
(define d
  (append '(a) (call/cc
          (lambda (k) (append '(b) '(c)))))) 
```

您的示例和上面的示例显示了相同代码的变体。编译器会将这些简化为完全相同的表达式。

与 eval 一样，如果可以避免，则不应使用 call/cc。想象一下，您将这些列表之一作为用户的输入：

想象一下这个例子：

```
(define d
    (call/cc
         (lambda (abort) 
              (append    '(a) 
                         '(b) 
                         (let ((c (read))) 
                            (if (list? c) 
                                       c 
                                       (abort #f))))))) 
```

在这里，如果您输入一个列表 d 将变为 '(ab ...)，但如果您不向它提供列表（例如，您写 5），它将使用延续（中止）返回 #f 而不是让追加做它的事情。这个例子可以在没有 call/cc 的情况下编写（通过先执行 read 和 if 部分，但在某些情况下，延续的替代方法是完成一个你半路知道将被淘汰的计算。

call/cc 就像其他语言中的 goto 一样，可用于生成异常、协作多任务、迭代、++。通过示例查看[Matt Might 的续集](http://matt.might.net/articles/programming-with-continuations--exceptions-backtracking-search-threads-generators-coroutines/)

# c++ - Qt 布局增加了不必要的空间

> ID：11656253
> 
> 赞同：1
> 
> 时间：2012-07-25T18:29:34.923
> 
> 标签：c++, qt, layout, qt4

我正在创建一个日历应用程序，并完成了约会的视图小部件，它基本上是`QLabels`.

![](../Images/844a47b0e4431ffeb1904a59a79dfe3e.png)

它就像一个魅力，但我对最后 3 行的布局有疑问。每行都是 a`QHBoxLayout`并且它们被分组在 a 中`QVBoxLayout`。

我希望每个小部件都`QHBoxLayout`向左对齐（它们是标准的），但是这样会浪费空间。有没有办法将 QHBoxLayout 的空间缩小到小部件的大小？即使窗口伸展也保持那个大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:55:51.993

设置布局[对齐方式：](http://doc-snapshot.qt-project.org/4.8/qlayout.html#setAlignment-2)

```
hboxLayout->setAlignment(Qt::AlignLeft); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:23:14.357

```
QHBoxLayout* pLayout = new QHBoxLayout();<br />
//add your labels<br />
pLayout ->addItem(new QSpacerItem(40, 20, QSizePolicy::Expanding, QSizePolicy::Minimum)); 
```

# javascript - 画布中的鼠标偏移 [fabric.js]

> ID：11656272
> 
> 赞同：8
> 
> 时间：2012-07-25T18:30:38.617
> 
> 标签：javascript, html, fabricjs

我已经阅读了 3-5 个关于鼠标偏移的主题，但我仍然不知道哪里出了问题。

就我而言，60% 的情况下一切正常。在其他 40% 鼠标被偏移。[演示在这里](http://ptk.workshop200.com/index.php?route=product/product&path=59&product_id=58)。

有时对象位置与鼠标行为无关。（IE & Chrome 最乱）

我试图编辑样式表和父 div 但没有。最糟糕的是：我看不到任何规律性。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-26T03:23:58.797

你可以这样做：

```
canvas.on("after:render", function(){ canvas.calcOffset() }); 
```

我只在创建画布后才这样做。这是没有调整大小事件时的临时调用。这就是bug出现的时候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T02:14:34.567

由于页面上其他元素的位置，画布偏移值可能会发生变化。

您只需要**`canvas.calcOffset()`**在画布中添加导致问题的元素后或在`canvas.renderAll()`代码中调用方法后调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-26T20:49:46.137

每当在 HTML 文档中移动画布时，就会出现此偏移问题。例如，如果您在画布上方添加一个高度为 10px 的元素，则在首次渲染画布后，您的对象将偏移 10px。每当在 HTML 文档中重新定位画布时添加此代码，它应该重新计算鼠标交互性：

```
canvas.on("after:render", function(){
    canvas.calcOffset();
}); 
```

每当调整窗口大小时，Fabric.js 都会自动调用此方法，这就是您在该事件中看不到问题的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T01:45:14.867

难以置信！我已经修复了这个错误。你永远不会相信我...

在页面顶部，代码如下：

```
<div class="logo">
<a href="/"><img src="logo.png" alt="" /></a>
</div> 
```

此代码与画布没有合理的关系。这个类有简单的css：`{float: left; margin: 10px 0 0 0;}`

但由于某种原因，此代码强制鼠标在画布中偏移。我重新制作了这段代码，如：

```
<div class="logo">
<a href="/" class="logoHref"></a><!--- image is in css bg --->
</div> 
```

...现在一切都认为工作正常。

我看不出这些事件之间有任何关联，但事实就是事实。那一天对我来说真是太难了……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-02T21:56:24.133

对象在画布中的偏移位置很可能是由 DOM 操作更改了画布和子对象的原始坐标引起的。

我找到的一个简单解决方案是确保在添加后立即设置添加到画布的任何对象的坐标。例如，如果您假设对象是图像，您将执行以下操作：

```
var canvas = new fabric.Canvas(); 
var image = new Image();

canvas.add( image );
image.center() // Optional if you wish the object centered on canvas
image.setCoords(); 
```

希望这可以帮助。祝你好运！

# c# - X.509 证书中不存在私钥

> ID：11656275
> 
> 赞同：1
> 
> 时间：2012-07-25T18:30:52.250
> 
> 标签：c#, soap, public-key-encryption

我是一个soap新手，我被分配了一个任务来创建一个带有消息加密和密码认证的soap客户端，以与用java编写的服务交互。
问题是加密是一种方式（客户端到服务器）。响应未加密，基本上是通过/失败。证书将没有私钥。

在下面列出的代码中，如果我包含定义，则会出现错误“X.509 证书中不存在私钥”。

如果我删除它，我会收到失败“未为目标“http://localhost:65182/services/ConnectTest”提供服务证书。在 ClientCredentials 中指定服务证书。

它如何告诉它我将没有服务凭据并且它不需要解密响应？

```
 private void SendEncrypted_Click(object sender, EventArgs e)
    {
        try
        {
            ConnectTest.ConnectWebServiceClient client = new ConnectTest.ConnectWebServiceClient();

            PasswordDigestBehavior behavior = new PasswordDigestBehavior("joe", "password");
            client.Endpoint.Behaviors.Add(behavior);

            XmlDocument data = GetXmlData();
            XmlNode payload = data.SelectSingleNode("xml");
            string result;

            result = client.postTransactionXML(payload.InnerXml);
            textBox1.Text = result;
        }
        catch (Exception ex)
        {
            textBox1.Text = ex.Message;
            if (ex.InnerException != null)
                textBox1.Text += "\n" + ex.InnerException;
        }
    }

    <configuration>
    <system.serviceModel>
    <client>
      <endpoint address="http://localhost:65182/services/ConnectTest"
          behaviorConfiguration="ClientCertificateBehavior" binding="basicHttpBinding"
          bindingConfiguration="SOAPServiceSoapBinding" contract="ConnectTest.ConnectWebService"
          name="ConnectWebPort">
        <identity>
          <dns value="Unknown" />
        </identity>
      </endpoint>
    </client>
    <bindings>
        <basicHttpBinding>
            <binding name="SOAPServiceSoapBinding" closeTimeout="00:00:10"
                openTimeout="00:00:20" receiveTimeout="00:00:30" sendTimeout="00:00:40"
                bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxReceivedMessageSize="1000" messageEncoding="Text" textEncoding="utf-8"
                useDefaultWebProxy="false">
                <security mode="Message">
                    <transport clientCredentialType="Digest" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Certificate" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <behaviors>
    <endpointBehaviors>
      <behavior name="ClientCertificateBehavior">
        <clientCredentials>
          <clientCertificate findValue="foo.com" storeLocation="CurrentUser" storeName="My" x509FindType="FindBySubjectName" />
          <serviceCertificate>
            <defaultCertificate findValue="foo.com" storeLocation="CurrentUser" storeName="My" x509FindType="FindBySubjectName"/>
            <authentication certificateValidationMode="None" />
          </serviceCertificate>
        </clientCredentials>
      </behavior>
    </endpointBehaviors>
    </behaviors>

    </system.serviceModel>
    </configuration> 
```

# google-app-engine - 谷歌应用引擎和谷歌大查询

> ID：11656280
> 
> 赞同：1
> 
> 时间：2012-07-25T18:31:05.640
> 
> 标签：google-app-engine, google-bigquery

我正在考虑为我的一个项目使用 Google Infrastructure 和 Google App Engine。我希望的一件事是我可以使用 Google App Engine Datastore 作为 Big Query 的数据源，但显然情况并非如此。有这样做的秘诀吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:49:33.613

Google Big Query 目前仅支持 csv 导入。请参阅[https://developers.google.com/bigquery/docs/developers_guide#tables](https://developers.google.com/bigquery/docs/developers_guide#tables)。您可以直接上传文件，也可以从 Google Cloud Storage 导入文件。

您可以做的是首先将数据存储实体转换为 CSV 文件，然后将其导入数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:46:37.880

Google Big Query 有自己的数据存储库，您需要将数据保存（附加）到它上面。
AppEngine 数据存储区只能在 AppEngine 应用程序内部使用。

# php - 将多个变量传递给 PHP

> ID：11656286
> 
> 赞同：0
> 
> 时间：2012-07-25T18:31:24.207
> 
> 标签：php, var

我有一个接受两个变量的 PHP 页面

```
<?php 
    $formurl = "listen.html" ;
    $playerurl = "player.php" ;

    $mymp3 =  $_POST["mp3name"]; 
    $mytitl = $_POST["titlname"]; 

    /* echo "MP3 Name: ".$mymp3."<br>" ;
    echo "Chapter Name: ".$mytitl;  */
    header( "Location: $playerurl?mp3name=$mymp3& ?titlname=$mytitl");
    exit ;
?> 
```

但是当我打开 player.php 时，

```
<table width="519" border="0" align="center">
    <tr>
        <?php
            $mymp3=$ _GET[ "mp3name"];
            $mytitl=$ _GET[ "titlname"];
        ?>
        <td width="513" height="63" class="TopNav" align="center">You are listening to
            <?php echo $mytitl; ?>
        </td>
    </tr>
    <tr>
        <td align="center">
            <audio autoplay controls preload="auto">
                <source src="/MP3s/<?php echo $mymp3; ?>.ogg" type="audio/ogg" />
                <source src="/MP3s/<?php echo $mymp3; ?>.mp3" />Your browser does not support the audio tag.</audio>
        </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr> 
```

仅显示一个变量 ( `mp3name`)。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:34:08.637

```
header("Location: $playerurl?mp3name=$mymp3& ?titlname=$mytitl"); 
```

应该

```
header("Location: " . $playerurl . "?mp3name=" . $mymp3 . "&titlname=" . $mytitl); 
```

第一个查询字符串键开始`?`，其余的以`&`.

我添加了空格和`.`（contenation）以使其更易于阅读（不是必需的）

[维基百科链接到有关查询字符串的信息](http://en.wikipedia.org/wiki/Query_string)

**更新**

正如@ernie 在评论中指出的那样......[`http_build_query`](http://php.net/manual/en/function.http-build-query.php)为你做这个......并对参数进行编码......你像这样使用它：

```
$params = http_build_query(array('mp3name' => $mymp3, 'titlname' => $mytitl), '', '&');
header( "Location: " . $playerurl . "?" . $params); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T18:37:15.603

您的 GET 字符串需要更正，即：

```
header( "Location: $playerurl?mp3name=$mymp3&titlname=$mytitl"); 
```

如果您使用[http_build_query](http://php.net/manual/en/function.http-build-query.php)来避免此类错误，可能会更好。http_build_query 将处理参数的所有格式（即名称、键值生成和分隔符），因此只要您有一个有效的数组，您就会得到一个有效的查询字符串，例如：

```
$getString = http_build_query(array ( 'mp3name'=>$mymp3, 
                                      'titlname'=>$mytitl));
header( "Location: $playerurl?$getString); 
```

您还可以使用 FireBug 中的控制台视图（或 Chrome 和 IE 中的类似工具）来帮助您自行调试，因为它们可以让您查看正在发送/接收的实际数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:34:06.820

```
header( "Location: $playerurl?mp3name=$mymp3& ?titlname=$mytitl"); 
```

应该：

```
header( "Location: $playerurl?mp3name=$mymp3&titlname=$mytitl"); 
```

变量未`titlname`正确传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:34:17.787

你有错误的标题。用 ? 取出空间？它应该是

```
header( "Location: $playerurl?mp3name=$mymp3&titlname=$mytitl"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T19:04:17.690

尝试以下方法：

```
urlencode("$playerurl?mp3name=$mymp3&titlname=$mytitl") 
```

# .net - 使用 Excel 交互分发 .NET 应用程序

> ID：11656287
> 
> 赞同：0
> 
> 时间：2012-07-25T18:31:28.417
> 
> 标签：.net, vb.net, excel, deployment, office-interop

我一直在用 VB2005 进行编码，并且在转换为 VB2010 的过程中。当时我只是无法转换这个项目，所以我被困在 VB2005 上。该项目与 Excel 2010 交互。在我的机器和我小组中的机器上，它运行良好。现在我已将它安装在不同组的机器上，但出现错误

*   *System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Office.Interop.Excel，版本=14.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c”或其依赖项之一。该系统找不到指定的文件。文件名：'Microsoft.Office.Interop.Excel，版本=14.0.0.0，文化=中性，PublicKeyToken=71e9bce111e9429c*

目标机器安装了 .NET2 和 office 2010。我还安装了 Office2010PIA。我重新启动，但我仍然收到此错误。我不确定我是否了解目标机器上需要什么才能使其正常工作。是不是在我的项目参考中，Excel 14.0 和 Office 14.0 库设置为 CopyLocal=False？我一直认为，如果 PIA 安装到目标机器上，那么我就不需要本地副本。有什么建议么？部署此类项目的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:47:36.223

CopyLocal 可能是问题所在，尝试将库设置为复制到输出目录。

# classpath - 引起：java.lang.ClassNotFoundException：类路径

> ID：11656289
> 
> 赞同：0
> 
> 时间：2012-07-25T18:31:35.610
> 
> 标签：classpath, classnotfoundexception, mahout

我正在尝试从[https://cwiki.apache.org/confluence/display/MAHOUT/Wikipedia+Bayes+Example运行 Wikipedia Bayes Example](https://cwiki.apache.org/confluence/display/MAHOUT/Wikipedia+Bayes+Example)

当我运行以下命令时： $MAHOUT_HOME/bin/mahout wikipediaXMLSplitter -d $MAHOUT_HOME/examples/temp/enwiki-latest-pages-articles10.xml -o wikipedia/chunks -c 64

我收到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: classpath
Caused by: java.lang.ClassNotFoundException: classpath
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:323)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:268)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:336)
Running on hadoop, using /x/.../bin/hadoop and HADOOP_CONF_DIR=
MAHOUT-JOB: /x/.../mahout-distribution-0.7/mahout-examples-0.7-job.jar
12/07/25 11:22:06 WARN driver.MahoutDriver: Unable to add class: wikipediaXMLSplitter
12/07/25 11:22:06 WARN driver.MahoutDriver: No wikipediaXMLSplitter.props found on classpath, will use command-line arguments only
Unknown program 'wikipediaXMLSplitter' chosen. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:15:48.337

我遇到了同样的问题，它是由 bin/mahout 中的代码引起的（仅在 0.7 版本中）：

```
if [ -x "$HADOOP_BINARY" ] ; then
  HADOOP_BINARY_CLASSPATH=$("$HADOOP_BINARY" classpath)
fi 
```

它将执行`hadoop classpath`并导致错误。也许 hadoop 的版本对于 mahout 0.7 来说太旧了。无论如何，我评论了这三行并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T17:55:18.690

也许你应该使用：

```
mahout -core ... ... 
```

这应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T04:20:08.187

我遇到了同样的问题。通过指定 org.apache.mahout.text.wikipedia.WikipediaXmlSplitter [还要注意不同的大小写] 来解决它

$MAHOUT_HOME/bin/mahout org.apache.mahout.text.wikipedia.WikipediaXmlSplitter -d $MAHOUT_HOME/examples/tmp/enwiki-latest-pages-articles.xml -o wikipedia/chunks

# asp.net - 由 global.asax 重写的 URL 和 Asp.net 中的错误 404

> ID：11656290
> 
> 赞同：3
> 
> 时间：2012-07-25T18:31:37.553
> 
> 标签：asp.net, iis-7, url-rewriting

我正在开发一个具有以下属性的项目：

```
Asp.net
C# 
.Net Framework 4
IIS 7 
```

在其中，我使用`Application_BeginRequest`来手动重写，如下所示：

```
void Application_BeginRequest(object sendet, EventArgs e)
    {

        bool IsUploading = System.Configuration.ConfigurationManager.AppSettings["IsUloading"] == "1";

        if (Request.Headers["X-Requested-With"] == "XMLHttpRequest")
        {
            return;
        }

        string Path = Request.RawUrl;
        string QueryString = "";

        if (Request.QueryString.Count != 0)
        {
            string[] u = Path.Split(new char[] { '?' });
            Path = u[0];
            QueryString = u[1];
        }

        string url = "";

        if (Path.EndsWith(".css") || Path.EndsWith(".js") || Path.EndsWith(".png") || Path.EndsWith(".jpg") || Path.EndsWith(".jpeg") || Path.EndsWith(".bmp") || Path.EndsWith(".htm") || Path.EndsWith(".png") || Path.EndsWith(".gif") || Path.EndsWith(".fla") || Path.EndsWith(".swf") || Path.EndsWith(".axd") || Path.EndsWith(".xml") || Path.EndsWith(".ashx"))
            return;

        if (!Path.EndsWith("/"))
            Path += "/";

        IEnumerator<string> Part = Path.Split(new char[] { '/' }).AsEnumerable<string>().GetEnumerator();

        if (Part.MoveNext() && Part.MoveNext())
        {

            if (Part.Current == "")
                url = "Default.aspx";

            else if (Part.Current.ToLower() == "public")
            {

                if (Part.MoveNext() && Part.Current.ToLower() == "install")
                    url = "Public/Install.aspx";
                else
                    url = "Public/PageNotFound.aspx";

            }

            else
                url = "Public/PageNotFound.aspx";

        }
        else
            url = "Public/PageNotFound.aspx";

        if (url.Contains("?"))
            Context.RewritePath("~/" + url + "&" + QueryString);
        else
            Context.RewritePath("~/" + url + "?" + QueryString);

    } 
```

现在当尝试浏览页面时`localhost:97`，浏览器开始打开 ​​Default.aspx 但是如果我尝试打开`localhost:97/Public/Install`浏览器给我这个错误：

```
HTTP Error 404.0 - Not Found
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable. 
```

哪里出错了？！！！

**UPDATE1**：当我尝试浏览时`localhost:97/Public/Install`，VS 不会在我在此事件中放置的断点处停止。我认为我的请求在 IIS 中被拒绝。

**UPDATE2**：我知道我的代码是 100% 正确的，因为我们正在使用 TFS 服务器，而另一台计算机对此没有任何问题，只是我的计算机遇到了这个问题。

对不起我的英语不好。我是新的。更详细的评论我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T09:52:48.277

我认为使用 aspnet 路由来实现您的目标可能会很棒。

您可以创建自己的路径，例如“public/install”，这是一条路线。

如果它匹配 aspnet move 那里也可以使用捕获所有路由，用于显示 404 403 500 等等。更简单并显着减少代码。

这是vbnet中的一个简单示例：

```
 Sub RegisterRoutes(ByVal routes As RouteCollection)
    routes.EnableFriendlyUrls()
    'blocca il trattamento dei vari snippet
    routes.Add(New Route("{resource}.axd/{*pathInfo}", New StopRoutingHandler()))
    routes.Add(New Route("route", New StopRoutingHandler()))
    routes.Add(New Route("bundles/css", New StopRoutingHandler()))
    'routes.Add(New Route("script/zx", New StopRoutingHandler()))
    'routes.Add(New Route("script/av", New StopRoutingHandler()))
    'routes.Add(New Route("script/pf", New StopRoutingHandler()))
    'routes.Add(New Route("script/bv", New StopRoutingHandler()))
    'sezione errori
    routes.MapPageRoute("404", "NotFound", "~/error/404.aspx", False)
    routes.MapPageRoute("500", "ServerError", "~/error/500.aspx", False)
    routes.MapPageRoute("503", "ServerUnavailable", "~/error/503.aspx", False)
    'fonti base
    routes.MapPageRoute("Home", "", "~/Default.aspx", False)
    routes.MapPageRoute("DefaultVasVoip", "vas-e-voip", "~/route/vas-voip/DefaultVasVoip.aspx", False, New RouteValueDictionary(New With {.name = "default"}))
    routes.MapPageRoute("VasVoipRoute", "vas-e-voip/{service}/{id}", "~/route/vas-voip/DefaultVasVoip.aspx", False, New RouteValueDictionary(New With {.name = "VasVoipRoute"}))
    routes.MapPageRoute("MarketingRoute", "marketing/{service}/{id}", "~/route/marketing/DefaultMarketing.aspx", False, New RouteValueDictionary(New With {.name = "MarketingRoute"}))
    routes.MapPageRoute("DefaultMarketing", "marketing", "~/route/marketing/DefaultMarketing.aspx", False, New RouteValueDictionary(New With {.name = "default"}))
    routes.MapPageRoute("HostingRoute", "hosting/{service}/{id}", "~/route/hosting/DefaultHosting.aspx", False, New RouteValueDictionary(New With {.name = "HostingRoute"}))
    routes.MapPageRoute("Optimization", "seo/{service}/{id}", "~/route/seo/DefaultSeo.aspx", False, New RouteValueDictionary(New With {.name = "Optimization"}))
    routes.MapPageRoute("DefaultSeoHosting", "hosting-e-seo", "~/route/hosting/DefaultHosting.aspx", False, New RouteValueDictionary(New With {.name = "default"}))
    routes.MapPageRoute("Contact", "contatti", "~/route/Contact.aspx", False)
    routes.MapPageRoute("Login", "login", "~/route/ssl/login.aspx", False, New RouteValueDictionary(New With {.name = "login", .ssl = True}))
    routes.MapPageRoute("LoginRedirect", "login/redirect", "~/route/ssl/login.aspx", False, New RouteValueDictionary(New With {.name = "redirect"}))
    routes.MapPageRoute("Admin", "ssl/admin/", "~/route/ssl/private/admin/Default.aspx")
    routes.MapPageRoute("Customer", "ssl/customer/", "~/route/ssl/private/customer/Default.aspx")
    routes.MapPageRoute("About", "chi-siamo", "~/route/About.aspx", False)
    routes.MapPageRoute("articles", "articles", "~/route/article/Default.aspx", False)
    routes.MapPageRoute("article", "article/{gg}/{mm}/{yyyy}/{id}/{title}", "~/route/article/Default.aspx", False)
    routes.MapPageRoute("termini", "termini-e-condizioni", "~/route/Termini.aspx", False)
    routes.MapPageRoute("privacy", "privacy", "~/route/Privacy.aspx", False)
    routes.MapPageRoute("portfolio", "portfolio", "~/route/portfolio.aspx", False)
    routes.MapPageRoute("faq", "faq", "~/route/faq.aspx", False)
    'Catch All per ogni richiesta errata 
    routes.MapPageRoute("CatchAllErrors", "{*url}", "~/InvalidRequest.aspx", False)
End Sub 
```

我希望它可以帮助你。

# struts2 - struts2 将字符串格式化为不带逗号的数字并修剪尾随零

> ID：11656291
> 
> 赞同：1
> 
> 时间：2012-07-25T18:31:39.050
> 
> 标签：struts2

我正在使用 Struts2 将字符串格式化为带有修剪尾随零的数字。

消息属性：

```
format.number={0,number,#} 
```

jsp代码：

```
<s:text name="format.number">
    <s:param name="value" value="%{key.policyNumber}" />
</s:text> 
```

key.policyNumber 是一个字符串，我收到错误为“**错误 500：java.lang.IllegalArgumentException：无法将给定对象格式化为数字**”

**更新：**我尝试了相同的代码给一个整数然后它工作。像

```
<s:text name="format.number">
    <s:param name="value" value="%{key.orderNum}" />
</s:text> 
```

动作类

```
Map<PolicyObj, CustInfo> mapObj = getDBPolicyDetails(); 
```

在数据库类

```
PolicyObj.setPolicyNumber("0000111111"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:31:15.770

JSP 代码的小改动。我通过将字符串转换为数字来欺骗。

这是代码。

```
<s:text name="format.number">
    <s:param name="value" value="key.policyNumber * 1" />
</s:text> 
```

**乘以 1**是我所做的一项改变，它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:38:19.523

Struts2 使用[`MessageFormat`](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html)API 进行格式化，如果您查看[`java.text.NumberFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)该类，则没有`format`将 String 作为参数的方法。

我认为您不能以这种方式使用格式。您必须先转换字符串，然后才能使用 Struts2 以这种方式对其进行格式化。

# powershell - 以正确、多操作系统友好的方式引用 System.Management.Automation.dll

> ID：11656296
> 
> 赞同：3
> 
> 时间：2012-07-25T18:31:47.693
> 
> 标签：powershell, powershell-2.0

我正在编写一段将调用 PS 脚本的 C#。作为其中的一部分，我引用了 System.Management.Automation.dll，PS 家伙公开的库让我的生活更轻松。我认为这是使用正确的库（互联网搜索似乎可以确认，但如果我错了，请告诉我）。该库作为 PS 安装/Windows SDK 的一部分安装。

我发现这个库有两个奇怪的地方：

*   我总是必须用完整路径引用它（即使它在 GAC 中？）
*   不同操作系统的路径不同

我在以下路径中找到了它（忽略了我认为我不应该使用的 GAC 路径）：

*   win2k8 r2: C:\Program Files\Reference Assemblies\Microsoft\WindowsPowerShell\v1.0
*   Win7 x64: C:\Program Files (x86)\Reference Assemblies\Microsoft\WindowsPowerShell\v1.0\

以多操作系统版本友好的方式引用此程序集的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:00:23.627

SMA 程序集是体系结构中立的 (MSIL)，因此将一个复制到您的解决方案目录（或者可能是源结构中的 Imports 目录）并通过该位置的路径引用程序集。这就是我们在[PowerShell 社区扩展](http://pscx.codeplex.com)项目中所做的。

# go - 您使用 Go 的 Web 服务使用什么 Web 服务器？

> ID：11656297
> 
> 赞同：7
> 
> 时间：2012-07-25T18:31:49.060
> 
> 标签：go

如果我想使用 Go 创建一个 Web 服务，我会使用什么 Web 服务器？

我的 Web 服务需要与 Mysql、redis 和 memcached 交互。每个都有稳定的库吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T18:40:42.730

标准库中的[net/http](http://golang.org/pkg/net/http/)包是稳定且并发的（每个客户端的 goroutine）。

```
http.Handle("/foo", fooHandler)

http.HandleFunc("/bar", func(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Hello, %q", html.EscapeString(r.URL.Path))
})

log.Fatal(http.ListenAndServe(":8080", nil)) 
```

阅读[编写 Web 应用程序](http://golang.org/doc/articles/wiki/)后，您将具备使用 Go 编写惯用 Web 应用程序的必要技能。

# api - Azure/Bing 图像搜索 API：如何添加多个图像过滤器？

> ID：11656299
> 
> 赞同：2
> 
> 时间：2012-07-25T18:31:50.850
> 
> 标签：api, azure, bing

我试图只返回 Style:Photo**和**Aspect:Tall 的图像。

我似乎只能搜索一个 ImageFilters 参数，如下所示：

```
https://api.datamarket.azure.com/Bing/Search/Image?Query='Houses'&$format=JSON&ImageFilters='Style:Photo'&Market='en-us' 
```

重要的部分：

```
&ImageFilters='Style:Photo' 
```

如果我尝试添加另一个，像这样：

```
ImageFilters='Style:Photo'+'Aspect:Tall' 
```

我收到此错误：

```
Parameter: ImageFilters has an invalid pattern of characters 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:10:08.010

我刚刚在必应搜索 API 数据集上直接使用多个图像过滤器尝试了以下查询，该查询与我的订阅正常工作：

[https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query=%27justin%20biber%27&ImageFilters=%27Style%3aPhoto%2bSize%3aSmall%2bAspect%3aTall%27&](https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query=%27justin%20biber%27&ImageFilters=%27Style%3aPhoto%2bSize%3aSmall%2bAspect%3aTall%27&) $top= 50&$格式=原子

相当于如下：

[https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query='justin](https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query=) biber'&ImageFilters='Style:Photo+Size:Small+Aspect:Tall'&$top=50& $格式=原子

因此，如果您尝试将整个 ImageFilter作为**ImageFilters='Style:Photo+Size:Small+Aspect:Tall'放在****一个单引号**中，它应该可以工作。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T17:31:29.583

如果**ImageFilters='Style:Photo+Size:Small+Aspect:Tall'**不起作用然后尝试将**+**符号更改为**%2B**

```
ImageFilters='Style:Photo%2BSize:Small%2BAspect:Tall' 
```

它对我有用。

如果你使用**BingSearchContainer.cs**还有另一个问题你不能使用 + 符号或 %2B 解决方案是替换

```
query = query.AddQueryOption("ImageFilters", string.Concat("\'", 
System.Uri.EscapeDataString(ImageFilters), 
"\'")); 
```

和

```
query = query.AddQueryOption("ImageFilters", string.Concat("\'", 
ImageFilters, 
"\'")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T14:59:54.443

这是旧的，但我有一个类似的问题，我解决了。一个问题是

```
ImageFilters='Style:Photo'+'Aspect:Tall' 
```

应该是`ImageFilters='Style:Photo+Aspect:Tall'`，所以引用整个值，而不是单个参数。这里另一个不明显的事情是替换。[这已在https://github.com/xthepoet/pyBingSearchAPI](https://github.com/xthepoet/pyBingSearchAPI)的 python 存储库中成功实现。部分代码：

```
request = string.replace(request, "'", '%27')
request = string.replace(request, '"', '%27')
request = string.replace(request, '+', '%2b')
request = string.replace(request, ' ', '%20')
request = string.replace(request, ':', '%3a') 
```

这应该给出想法！**

# java - Android ListView OnScrollListener 清除旧数据

> ID：11656302
> 
> 赞同：2
> 
> 时间：2012-07-25T18:31:56.607
> 
> 标签：java, android, listview

我使用 LazyAdapter 创建了一个列表视图。

当我滚动到列表底部时，会显示新数据，但会清除所有旧数据。

我如何将新数据附加到旧数据下方？

这是我的主要活动代码

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.sax.Element;
import android.view.View;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.TextView;

public class AndroidJSONParsingActivity extends Activity {

    // url to make request

    // JSON Node names
    static final String TAG_CONTACTS = "comics";
    static final String TAG_ID = "id";
    static final String TAG_NAME = "title";
    static final String TAG_EMAIL = "id";
    static final String TAG_PHONE_MOBILE = "image";

    // contacts JSONArray
    JSONArray contacts = null;
    ListView list;
    LazyAdapter adapter;
    static int counter = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                        // call the function
                LoadData();

    }

    public void LoadData(){
        String url = "http://myurl.com/?start=" + counter;
        // Hashmap for ListView
                ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

                // Creating JSON Parser instance
                JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(url);

                try {
                    // Getting Array of Contacts
                    contacts = json.getJSONArray(TAG_CONTACTS);

                    // looping through All Contacts
                    for(int i = 0; i < contacts.length(); i++){
                        JSONObject c = contacts.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_ID);
                        String name = c.getString(TAG_NAME);
                        String email = c.getString(TAG_EMAIL);
                        String mobile = c.getString(TAG_PHONE_MOBILE);
                        // Phone number is agin JSON Object

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_ID, id);
                        map.put(TAG_NAME, name);
                        map.put(TAG_EMAIL, email);
                        map.put(TAG_PHONE_MOBILE, mobile);

                        // adding HashList to ArrayList
                        contactList.add(map);
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                /**
                 * Updating parsed JSON data into ListView
                 * */
        list=(ListView)findViewById(R.id.list);

                // Getting adapter by passing xml data ArrayList
                adapter=new LazyAdapter(this, contactList);        
                list.setAdapter(adapter);

                // Launching new screen on Selecting Single ListItem
                list.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        // getting values from selected ListItem
                        String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                        String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                        String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                        // Starting new intent
                        Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                        in.putExtra(TAG_NAME, name);
                        in.putExtra(TAG_EMAIL, cost);
                        in.putExtra(TAG_PHONE_MOBILE, description);
                        startActivity(in);

                    }
                });

                list.setOnScrollListener(new OnScrollListener() {

                    @Override
                    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                        if (view.getAdapter() != null && ((firstVisibleItem + visibleItemCount) >= totalItemCount)) {
                            //Log.v(TAG, "onListEnd, extending list");
                            //mPrevTotalItemCount = totalItemCount;
                            counter = totalItemCount;

                            LoadData();
                            adapter.notifyDataSetChanged();}
                    }

                    @Override
                    public void onScrollStateChanged(AbsListView view, int scrollState) {
                    }

                });

    }
} 
```

这是我的 LazyAdapter.java 文件

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;

    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
        TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get(AndroidJSONParsingActivity.TAG_NAME));
        artist.setText(song.get(AndroidJSONParsingActivity.TAG_ID));
        duration.setText(song.get(AndroidJSONParsingActivity.TAG_EMAIL));
        imageLoader.DisplayImage(song.get(AndroidJSONParsingActivity.TAG_PHONE_MOBILE), thumb_image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:40:05.957

我认为问题在于您的问题在于 loadData() 方法。每次重新创建联系人列表时..

`ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();`

然后你打电话...

```
adapter=new LazyAdapter(this, contactList);        
list.setAdapter(adapter); 
```

这会在您每次加载数据时创建一个新适配器，而不是将数据附加到当前适配器。您已经将适配器作为实例变量，因此您不需要每次都对其进行初始化。您应该在 onCreate() 方法中初始化您的列表视图和适配器，然后您就不必再这样做了。然后，只需将新的联系人列表添加到现有的适配器中，然后拨打电话`notifyDataSetChanged();`就可以了。

# c# - C#中的蛮力摇卡方法

> ID：11656305
> 
> 赞同：5
> 
> 时间：2012-07-25T18:32:10.643
> 
> 标签：c#, windows, bots

我正在制作一个可以在游戏中测试一些纸牌战术的机器人，该机器人可以工作，但我有一个问题。我的抽卡方法不是很好。我这样摇牌：

```
 public void ShuffelDeck()
        {
            for (int i = 0; i < 5; i++)
                Cards = ShuffelCards(Cards);
        }

        private ArrayList ShuffelCards(ArrayList Cards)
        {
            ArrayList ShuffedCards = new ArrayList();

            Random SeedCreator = new Random();
            Random RandomNumberCreator = new Random(SeedCreator.Next());

            while (Cards.Count != 0)
            {
                int RandomNumber = RandomNumberCreator.Next(0, Cards.Count);
                ShuffedCards.Insert(ShuffedCards.Count, Cards[RandomNumber]);
                Cards.RemoveAt(RandomNumber);
            }

            return ShuffedCards; 
        } 
```

问题是当我计算在摇牌过程之间没有停顿时，少数玩家会赢得很多游戏。例如

```
Player 1: 8 games
Player 2: 2 games
Player 3: 0 games
Player 4: 0 games 
```

但是当我在摇牌过程之前添加一个对话框时，胜利将分散在玩家身上：

```
Player 1: 3 games
Player 2: 2 games
Player 3: 1 game
Player 4: 4 games 
```

我猜 Random 类对于这样的蛮力来说还不够好。我怎样才能洗牌没有这样的问题？

更新：我已经尝试过使用 1 个随机类，并且我也尝试过只摇一次牌。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T18:45:47.973

当您创建`Random`类的新实例时，它会使用当前时间播种，但当前播种时间的精度仅为 16 毫秒，这意味着如果您`Random`在相同的 16 毫秒间隔内创建新类（这是很*长*的时间对于计算机）作为另一个实例，您将获得相同的随机数序列。

一个好的解决方案是确保您不会创建这么多新的`Randoms`. 创建一个，一次，并将其传递给 shuffle cards 方法，或者创建一个在很多地方都可以访问的静态随机数（请记住它不是线程安全的）。

附带说明一下，对于您的实际洗牌算法来说，它非常好。不过，您可以进行一项改进。无需将所选元素添加到末尾并从中间删除，您只需将末尾的元素与中间的元素交换即可。这更有效，因为从 List 中间删除不是一个有效的操作。此外，不要在 0 和大小之间选择一个随机数，而是选择一个介于 0 和（大小减去当前迭代次数）之间的数字。有关该算法的更多详细信息，请参阅[有关该主题的维基百科文章。](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T18:46:08.533

拥有 2 个随机类并为其中一个生成种子并不能提高随机性。

然后，不要在 ShuffelCards 中创建 Random 类。在 ShuffelDeck 中创建它并将其传递给 ShuffelCards，或使其成为该类的成员。这应该会有所帮助。

# python - 为什么向上和向下箭头命令在 Python 命令行解释器中不起作用？

> ID：11656306
> 
> 赞同：10
> 
> 时间：2012-07-25T18:32:12.397
> 
> 标签：python, linux, cpython

我在 Linux 上使用 VT100 终端仿真器。在 bash 中，向上和向下箭头滚动浏览最后执行的命令；他们按预期工作。

上一个（向上箭头）和下一个（向下箭头）命令不会在 Python 命令行解释器中解释。我需要什么样的键映射才能完成这项工作？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T18:40:58.567

默认情况下，键映射为：

*   老：`alt-p`
*   更近：`alt-n`

您可以分别更改`Options -> Configure IDLE -> Keys -> "history-previous"`它`"history-next"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T19:22:32.573

假设您拥有 GNU Readline 库，我想我已经找到了答案。（这确实意味着我对使用 Unix 样式接口的基本实现有部分错误，因为它仅在 GNU Readline [或端口，我猜]不可用时才会这样做。）

[http://docs.python.org/tutorial/interactive.html#history-substitution](http://docs.python.org/tutorial/interactive.html#history-substitution)

> 历史替换工作如下。所有发出的非空输入行都保存在历史缓冲区中，当给出新提示时，您将位于此缓冲区底部的新行上。`C-P`在历史缓冲区中向上（向后）`C-N`移动一行，向下移动一行。历史缓冲区中的任何行都可以编辑；提示前面会出现一个星号，以将行标记为已修改。按下 Return 键将当前行传递给解释器。`C-R`开始增量反向搜索；`C-S`开始向前搜索。

# c# - C# Com Interop：设置一行的背景颜色

> ID：11656307
> 
> 赞同：2
> 
> 时间：2012-07-25T18:32:24.417
> 
> 标签：c#, excel, com, interop

我有一个使用此代码创建的 Excel 工作表：

```
Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
Workbook wb = xlApp.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
Worksheet ws = (Worksheet)wb.Worksheets[1]; 
```

我想遍历行，对于第二列中具有特定值的每一行，我想将此行的背景颜色更改为红色。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:38:09.443

您想要做的是使用互操作的条件格式。微软在这里有一个简单的例子。

[http://msdn.microsoft.com/en-us/library/bb404903.aspx](http://msdn.microsoft.com/en-us/library/bb404903.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:00:29.200

下面的代码创建一个 Excel 文件，用随机值填充它，如果 A 列中的值大于 5，则将背景颜色转换为绿色。

```
 Random rnd = new Random();

        Excel.Application xlApp = new Excel.Application();
        Excel.Workbook wb = xlApp.Workbooks.Add(Excel.XlWBATemplate.xlWBATWorksheet);
        Excel.Worksheet ws = (Excel.Worksheet)wb.Worksheets[1];

        // Set random data in A column
        for (int i = 1; i < 10; i++)
        {
            ws.Range["A" + i, Type.Missing].Value = rnd.Next(10);
            ws.Range["B" + i, Type.Missing].Value = rnd.Next(10);
        }

        // Set background if value in cell A more than 5
        int rowNum = 0;
        foreach (Excel.Range range in ws.Range["A1", "A10"])
        {
            rowNum++;

            if (range.Value > 5)
            {
                foreach (Excel.Range rowRange in ws.Range["A" + rowNum, "B" + rowNum])
                {
                    var colorScale = (Excel.ColorScale)rowRange.FormatConditions.AddColorScale(2);
                    colorScale.ColorScaleCriteria[2].FormatColor.Color = 0x0000FF00;
                }
            }
        }

        // Save and close file
        wb.SaveAs("C:\\1234567890.xlsx");
        wb.Close(false, Type.Missing, Type.Missing);
        xlApp.Quit(); 
```

# attributes - 使用 GhostDoc 为属性上的属性生成注释

> ID：11656308
> 
> 赞同：1
> 
> 时间：2012-07-25T18:32:27.950
> 
> 标签：attributes, comments, ghostdoc

如何配置 GhostDoc 来为属性的属性生成注释，例如：

```
[Required(ErrorMessage = "Name is Required.")]
[StringLength(50, ErrorMessage = "Name must be less than 50 characters.")]
public string Name { get; set; } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T12:15:43.983

简单的

移动到工具--> GHostDoc--> 选项--> 规则--> 属性--> 双击您需要的类型并设置评论生成规则。

# c++ - 使用 Doxygen + Graphviz 可视化一个巨大的 C++ 项目

> ID：11656311
> 
> 赞同：11
> 
> 时间：2012-07-25T18:32:30.867
> 
> 标签：c++, doxygen, graphviz, dot

我继承了一个需要移植到 Linux 的大型 C++ 项目。该项目中有超过 200,000 行源代码，分布在 300 多个文件中。有一个可视的依赖/包含树来引用这个项目会非常有帮助，这样我就可以大致了解应用程序的内部结构。这也将帮助我找到核心模块和 Windows 头文件之间的“故障线”，以便我以后可以将它们存根。

Visual Studio 中的类查看器根本没有削减它。我四处阅读，了解到 Doxygen 是列出依赖项的常用工具。我更像是一个视觉化的人，发现这并没有太大帮助。幸运的是，我了解了 Graphviz 插件，它使用了一种叫做“Dot”的东西，它使我能够为部件生成依赖关系树。不幸的是，为特定文件生成了数百个较小的依赖关系树，而不是像我希望的那样拥有一个大的依赖关系树。这里有几个例子：

![DoxygenDDLCommInfC](../Images/53290d6a4b1eb0a177ad5d0b69f3e9a3.png) ![DoxygenDDBItemBase](../Images/6ed1798b19d0ea21dfbad55ce86cbd88.png)

如您所见（我希望），当图形变得太大并且子节点变灰时，Doxygen/GraphViz 似乎放弃了。然后，如果我想查看树下方的内容，我必须查看该特定节点的图表。这不仅限制了图形的视觉帮助，而且如果子节点依赖于原始图形中的任何节点，这些节点将再次显示。这会导致大量重复连接，这使得从概念上将图形与任何给定文件隔离开来非常困难。结果，我感觉自己被“放大”了，仍然看不到全貌。

我尝试在 Doxygen 的专家视图中使用 DOT_GRAPH_MAX_NODES 设置，但这似乎不会影响正在生成的图形的范围。从任何给定运行生成的输出来看，似乎 Doxygen 本身正在生成数百个图形文件，而 Graphviz 只是忠实地为每个文件生成图形。 **是否有任何已知的方法可以让 Doxygen 生成一个大图形文件而不是数百个较小的图形文件？**

或者，是否有任何免费的可视化图形解决方案知道如何使用嵌套的预处理器指令、MIDL 接口和手动定义的包含路径来处理复杂的 C++ 项目文件，就像 Doxygen 那样？

我的搜索是查找通用图形实用程序（或有关它们的问题），但没有特定于*大型*C++ 项目的内容。当然，多年来完成的所有编码都必须有人拥有这样的工具！

谢谢，-亚历克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T18:37:28.180

您可以使用 doxygen 生成的 XML 文件，并将它们合并为一个巨大的点格式图形文件（使用 xml 样式表或类似文件），然后在其上运行 graphviz。

当图形数量很多时，Doxygen 自动调用 graphviz 最有用。对于单个图，自动创建内容很重要，但自动调用`dot`，没那么重要。

# swt - Eclipse RCP Workbench Coolbar 中的单行菜单操作

> ID：11656315
> 
> 赞同：0
> 
> 时间：2012-07-25T18:32:40.540
> 
> 标签：swt, eclipse-rcp, jface

我使用 ActionBarAdvisor 的子类向 RCP 应用程序的工作台酷栏添加了一个 JFace 操作。由于某种原因，相应的菜单是用我猜想是额外的一行绘制的。它导致包括开放视角列表在内的整个酷栏太高：

![在此处输入图像描述](../Images/57b84c69edec42ca7129fe3b45f5afb8.png)

有谁知道怎么做单线？我尝试将 SWT.SINGLE 样式添加到 Action 构造函数中，但这并没有帮助。任何帮助，将不胜感激。谢谢。

ActionBarAdvisor.fillCoolBar() 实现：

```
protected void fillCoolBar(final ICoolBarManager coolBar) {

    final IToolBarManager toolbar = new ToolBarManager(coolBar.getStyle());
    coolBar.add(new ToolBarContributionItem(toolbar, "main"));

    toolbar.add(new Pulldown());
} 
```

动作实施：

```
public class Pulldown extends Action {

    public Pulldown() {
        super("Saved Layouts");
        setMenuCreator(menuCreator);
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:21:00.367

这不是您问题的直接答案，但我会将按钮声明为具有下拉/收音机样式的菜单扩展。因此，您不必更改酷栏的代码。[这](http://wiki.eclipse.org/Menu_Contributions/Dropdown_Command)是关于工具栏菜单贡献的教程。

```
<extension
          point="org.eclipse.ui.menus">
       <menuContribution
             allPopups="false"
             locationURI="toolbar:de.example.com">
          <command
                commandId="de.abas.erp.wb.base.marker.commands.PullDownCommand"
                icon="icons/16x16/layouts.png"
                label="Saved Layouts"
                style="pulldown">
          </command>
       </menuContribution>
    </extension> 
```

# c# - 如何在asp.net（C＃）中的多个页面中调用函数？

> ID：11656316
> 
> 赞同：0
> 
> 时间：2012-07-25T18:32:42.910
> 
> 标签：c#, asp.net

我有三个不同的 .aspx 页面（abc1.aspx、abc2.aspx、abc3.aspx）。现在我想在其中`func()`三个中调用一个函数。我只想定义一个函数的定义 1 次并在 3 个不同的页面上调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:36:46.507

创建继承自`System.Web.UI.Page`. 在那里定义你的功能。`System.Web.UI.Page`然后从这个基本页面而不是在那些 aspx 页面中继承。在此之后，您可以从这些页面中的任何一个调用该函数，如下所示：`base.MyFunct()`

**BasePage.cs**

```
public abstract class BasePage : System.Web.UI.Page
{
    protected void MyFunct()
    {
    }
 } 
```

**Page1.aspx.cs、Page2.aspx.cs、Page3.aspx.cs**

```
public partial class Page1 : BasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        base.MyFunct();
    }
}

public partial class Page2 : BasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        base.MyFunct();
    }
}

public partial class Page3 : BasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        base.MyFunct();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:37:18.990

将 .cs 或 .vb 类文件添加到您的网站 appCode 文件夹。在该代码文件中定义您的函数示例：

```
Class myFunctions
{
      public static int Sum(int a,int b)
      {
           return a+b;
      }
} 
```

现在在你的 aspx 代码后面创建一个此类的对象并使用该函数

```
int result = myFunctions.Sum(5,6); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:39:53.313

创建一个公共类（可选静态）并将您的方法作为公共静态方法添加到该类：

```
public class Utilities
{
  public static string DoStuff()
  {
    return "hello world";
  }
} 
```

# c# - 如何从代码生成 CREATE TABLE 脚本？

> ID：11656324
> 
> 赞同：11
> 
> 时间：2012-07-25T18:33:35.407
> 
> 标签：c#, sql, sql-server-2008

在 SQL Server Management Studio 中，我可以`CREATE TABLE`通过右键单击表并选择`Script Table As`.

如何在 C# 中获得相同的结果？我可以使用 SMO 或其他方法吗？

[为避免问题被关闭，请发布工作代码示例，而不是单行代码或指向高级文档的链接。]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T19:46:38.307

以下代码将通过指定服务器“XXX”、表“ZZZ”和模式“PPP”在“QQQ”位置创建一个脚本。有一些示例脚本漂浮在那里，可以复制整个数据库，这仅适用于表。这就是我一直试图弄清楚的，我终于用下面的代码让它工作了。这是一个简单的示例，例如，生成的脚本不会创建表的索引，而只是创建其最基本的结构。要指定脚本的创建方式，请将 ScriptingOptions 的实例传递到对 table.Script() 的调用中。

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Smo.SqlEnum;
using System.Configuration;
using System.Collections.Specialized;

namespace SmoTest {
    class Program {
        static void Main(string[] args) {

            Server server = new Server("XXX");
            Database database = new Database();
            database = server.Databases["YYY"];
            Table table = database.Tables["ZZZ", @"PPP"];

            StringCollection result = table.Script();

            var script = "";
            foreach (var line in result) {
                script += line;
            }

            System.IO.StreamWriter fs = System.IO.File.CreateText(@"QQQ");
            fs.Write(script);
            fs.Close();

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T20:27:05.223

这是一个稍微完整的例子（[从我的朋友 Ben Miller 那里偷来的](http://sqlblog.com/blogs/ben_miller/archive/2007/10/03/table-scripting-with-smo-part-1.aspx)）：

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Smo.SqlEnum;
using Microsoft.SqlServer.Management.Smo.CoreEnum;
using System.Configuration;
using System.Collections.Specialized;

namespace SmoTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Server srv = new Server();

            // really you would get these from config or elsewhere:
            srv.ConnectionContext.Login = "foo";
            srv.ConnectionContext.Password = "bar";
            srv.ConnectionContext.ServerInstance = "ServerName";
            string dbName = "DatabaseName";

            Database db = new Database();
            db = srv.Databases[dbName];

            StringBuilder sb = new StringBuilder();

            foreach(Table tbl in db.Tables)
            {
                ScriptingOptions options = new ScriptingOptions();
                options.ClusteredIndexes = true;
                options.Default = true;
                options.DriAll = true;
                options.Indexes = true;
                options.IncludeHeaders = true;

                StringCollection coll = tbl.Script(options);
                foreach (string str in coll)
                {
                    sb.Append(str);
                    sb.Append(Environment.NewLine);
                }
            }
            System.IO.StreamWriter fs = System.IO.File.CreateText("c:\\temp\\output.txt");
            fs.Write(sb.ToString());
            fs.Close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-03T12:58:18.520

## 表脚本

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Text; 
using System.Threading.Tasks; 
using Microsoft.SqlServer.Management.Smo; 
using Microsoft.SqlServer.Management.Sdk.Sfc; 
using Microsoft.SqlServer.Management.Common; 
using System.Collections.Specialized; 
using System.IO; 
using System.Data; 
using Microsoft.SqlServer.Management; 
using System.Data.SqlClient;

namespace GenrateScriptsForDatabase
{
    class Program
    {
        static void Main(string[] args)
        {

            var server = new Server(new ServerConnection { ConnectionString = new SqlConnectionStringBuilder { DataSource = @"Your Server Name", UserID="Your User Id",Password="Your Password" }.ToString() });
            server.ConnectionContext.Connect();
            var database = server.Databases["Your Database Name"];

            using (FileStream fs = new FileStream(@"H:\database_scripts\Gaurav.sql", FileMode.Append, FileAccess.Write))
            using (StreamWriter sw = new StreamWriter(fs))
            {
                for each (Table table in database.Tables)
                {
                    if (table.Name == "Your Table Name")
                    {
                        var scripter = new Scripter(server) { Options = { ScriptData = true } };
                        var script = scripter.EnumScript(new SqlSmoObject[] { table });
                        for each (string line in script)
                        {

                                sw.WriteLine(line);
                                Console.WriteLine(line);
                            }
                        }
                    }
                }
            }
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T13:15:45.547

您可以尝试以下函数以使用 C# 从 SQL Server 数据库获取表脚本。完整文章：[在两个 SQL Server 数据库之间传输数据或脚本](https://www.codeproject.com/Articles/490448/Transfer-data-or-script-between-two-SQL-Server-dat)

C#代码：

```
公共字符串GetTableScript（字符串表名，字符串连接字符串）
{
    字符串脚本 = "";

    字符串 Sql = "声明@table varchar(100)" + Environment.NewLine +
    "set @table = '" + TableName + "'" + Environment.NewLine +
        //"-- 在这里设置表名" +
    “声明@sql 表（s varchar（1000），id int 身份）”+ Environment.NewLine +
    " " + Environment.NewLine +
        //"-- 创建语句" +
    “插入@sql(s) 值 ('create table [' + @table + '] (')” + Environment.NewLine +
    " " + Environment.NewLine +
        //"-- 列列表" +
    “插入@sql(s)”+ Environment.NewLine +
    “选择” + Environment.NewLine +
    " ' ['+column_name+'] ' + " + Environment.NewLine +
    " data_type + coalesce('('+cast(character_maximum_length as varchar)+')','') +
    ' ' +" + Environment.NewLine +
    " 存在时的情况 (" + Environment.NewLine +
    " 从 syscolumns 中选择 id" + Environment.NewLine +
    " 其中 object_name(id)=@table" + Environment.NewLine +
    " and name=column_name" + Environment.NewLine +
    " and columnproperty(id,name,'IsIdentity') = 1 " + Environment.NewLine +
    ") 然后" + Environment.NewLine +
    " 'IDENTITY(' + " + Environment.NewLine +
    " cast(ident_seed(@table) as varchar) + ',' + " + Environment.NewLine +
    " cast(ident_incr(@table) as varchar) + ')'" + Environment.NewLine +
    " else ''" + Environment.NewLine +
    " end + ' ' +" + Environment.NewLine +
    " (当 IS_NULLABLE = 'No' then 'NOT' else '' end ) + 'NULL ' + " + Environment.NewLine +
    " 合并('DEFAULT '+COLUMN_DEFAULT,'') + ','" + Environment.NewLine +
    " " + Environment.NewLine +
    "来自 information_schema.columns where table_name = @table" + Environment.NewLine +
    " order by ordinal_position" + Environment.NewLine +
    " " + Environment.NewLine +
        //"-- 主键" +
    “声明@pkname varchar(100)”+ Environment.NewLine +
    “从 information_schema.table_constraints 中选择 @pkname = constraint_name”+ Environment.NewLine +
    “其中 table_name = @table 和 constraint_type='PRIMARY KEY'”+ Environment.NewLine +
    " " + Environment.NewLine +
    “如果（@pkname 不为空）开始”+ Environment.NewLine +
    " 插入@sql(s) 值(' PRIMARY KEY (')" + Environment.NewLine +
    "插入@sql(s)" + Environment.NewLine +
    " select '['+COLUMN_NAME+'],' from information_schema.key_column_usage" + Environment.NewLine +
    " 其中约束名称 = @pkname" + Environment.NewLine +
    " order by ordinal_position" + Environment.NewLine +
        //" -- 删除尾随逗号" +
    " 更新 @sql 集 s=left(s,len(s)-1) where id=@@identity" + Environment.NewLine +
    "插入@sql(s) 值 (')')" + Environment.NewLine +
    “结束” + Environment.NewLine +
    “其他开始” + Environment.NewLine +
        //" -- 删除尾随逗号" +
    " 更新 @sql 集 s=left(s,len(s)-1) where id=@@identity" + Environment.NewLine +
    “结束” + Environment.NewLine +
    " " + Environment.NewLine +
    "-- 右括号" + Environment.NewLine +
    “插入@sql(s) 值(')')”+ Environment.NewLine +
    " " + Environment.NewLine +
        //“ -  结果！” +
    "select s from @sql order by id";

    DataTable dt = GetTableData(Sql, ConnectionString);
    foreach（dt.Rows 中的 DataRow 行）
    {
        脚本 += 行[0].ToString() + Environment.NewLine;
    }

    返回脚本；
}

public DataTable GetTableData(string Sql, string ConnectionString)
{
    SqlConnection con = new SqlConnection(ConnectionString);
    尝试
    {
        con.Open();
        SqlCommand selectCommand = new SqlCommand(Sql, con);
        数据集数据集 = 新数据集（）；
        新的 SqlDataAdapter(selectCommand).Fill(dataSet);
        数据表表 = dataSet.Tables[0];
        返回表；
    }
    捕捉（例外）
    {
        返回新数据表（）；
    }
    最后
    {
        con.Close();
    }
}

```

# wpf - XAML 网格，智能地使用行/列

> ID：11656329
> 
> 赞同：1
> 
> 时间：2012-07-25T18:33:45.150
> 
> 标签：wpf, xaml

我觉得我缺少一些关于网格的东西，但我无法通过谷歌搜索找到它。

例如，我希望能够声明十行十列，用数据填充它们，然后意识到我不需要第 3 行，并且能够快速重新格式化它。我不是说做这个程序化，而是在重新设计项目时。理论上可以处理的一种方法是 HTML 删除一组`<tr></tr>`s 的方式。显然，这将仅限于行。另一种方法可能是给每列一个名称，例如“CityColumn”、“StateColumn”（或根据网格的使用命名任何其他名称），然后简单地删除列的定义和声明存在于柱子。

照原样，如果您删除任何给定的行或列，则必须转到后面的行或列中出现的每个元素并更改行或列的编号。似乎应该有一种更好的方法来使用我没有使用的 XAML 网格。

虽然我缺乏一个可以定义的明确问题，但可以说**我正在寻找最佳实践和/或任何提示和技巧，以使 Grid 易于修改它及其内容，并且通常提供维护。**

欢迎提供有关 XAML 网格的解释或学习资源的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:14:53.960

我会推荐[Jeff Mercado 所说](https://stackoverflow.com/questions/11656329/xaml-grid-using-row-columns-intelligently/11660580#comment15446077_11656329)的：[`ListView`](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview.aspx)with [`GridView`](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridview.aspx)as its [`View`](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview.view.aspx). 该视图的列可以有标题，如果您删除一个项目，相应的行就会消失。

`Grid`如果您打算坚持使用[命名引用](https://stackoverflow.com/a/6448077/546730)而不是索引，您还可以优化可维护性，因此如果您删除一行会变得容易得多。

# c# - 在 asp:Button 中触发 AutoPostBack 之前设置会话变量

> ID：11656345
> 
> 赞同：0
> 
> 时间：2012-07-25T18:34:56.780
> 
> 标签：c#, asp.net, session, session-variables, aspbutton

在 AutoPostBack 事件触发之前，我将如何通过单击 ASP:Button 来设置会话变量。

这是我现在所拥有的，但我不确定我做对了：

```
 <asp:Button ID="CommitBTN" runat="server" PostBackUrl="~/MMR_Home.aspx" 
 onclick="CommitBTN_Click" UseSubmitBehavior="true" 
 OnClientClick='<% string temp1 = "true"; Session["ClickedFlag"] = temp1; %>' Text="Commit Changes to Database" /> 
```

这是执行此操作的正确方法还是我完全错了？

编辑：

将我的按钮标签更改为：

```
 <asp:Button ID="CommitBTN" runat="server" PostBackUrl="~/MMR_Home.aspx" 
 onclick="CommitBTN_Click" OnClientClick="document.getElementById('<%= Hidden.ClientID
  %>').value='1'" UseSubmitBehavior="true" Text="Commit Changes to Database" /> 
```

我收到这是我的错误：

Microsoft JScript 运行时错误：无法设置属性“值”的值：对象为空或未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:53:58.977

1.  使用`Hidden Field`控件。

2.  `Hidden Field`将按钮`Client`单击更新 为 1。

3.  更新隐藏字段会话变量`Session Value`中的更新。`Page Load' event. The Value will be 1 then update the Session variable and set the``value to 0 underneath the`

4.  使用`Page Load`事件的原因是点击页面事件，`Button`如`page life cycle`PreInit、Init、InitComplete、PreLoad、Load 在 Control 之前`execution`执行`Button`。

`Page events`执行如下所示..

> 1.  预初始化
> 2.  在里面
> 3.  初始化完成
> 4.  预加载
> 5.  加载
> 6.  控制事件
> 7.  加载完成
> 8.  预渲染

希望对你有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:02:06.350

用这个：

**在 aspx 文件中：**

```
<form runat="server">
    <asp:Button ID="CommitBTN" runat="server" Text="Button" onclick="CommitBTN_Click" OnClientClick="document.getElementById('HiddenField').value='Ram'"/>
    <asp:HiddenField ID="HiddenField" runat="server" />
</form> 
```

**或者**

```
<script type="text/javascript">
    function setMyHiddenField(myValue) {
        document.getElementById('HiddenField').value = myValue;
}
</script>

<form runat="server">
<asp:Button ID="CommitBTN" runat="server" Text="Button" onclick="CommitBTN_Click" OnClientClick="setMyHiddenField('Ram')"/>
<asp:HiddenField ID="HiddenField" runat="server" /> 
```

==================================================== =================

**在 aspx.cs 文件中**

```
protected void CommitBTN_Click(object sender, EventArgs e)
    {
        Session["ClickedFlag"] = HiddenField.Value;
        Response.Write(Session["ClickedFlag"]);
    } 
```

用您的值替换“Ram”很容易。;)

您可以轻松地将 Ram 更改为 temp1：

**setMyHiddenField('temp1')**

或者您可以在按下 CommitBTN 之前在您的另一个控制事件上调用此函数

# java - BroadcastReceiever 没有被调用

> ID：11656348
> 
> 赞同：1
> 
> 时间：2012-07-25T18:35:02.243
> 
> 标签：java, android, http

我一直在尝试让我的类`BatteryPost`在我的 onCreate 方法中被警报管理器调用：

BatteryPost.java：

```
public class BatteryPost extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    HttpClient httpclient = new DefaultHttpClient();
    final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
    String batteryText = prefs.getString("battery", null);
    String id = prefs.getString("id", null);
    String URL = "http://mysite.com/checkin/index.php?device_uid="+id+"&bat="+batteryText; 
    {
    try{
    String uri = URL.replace(" ", "%20"); //replace spaces with %20
    Log.d("Checkin", uri);
    HttpPost httppost = new HttpPost(uri); //post object
    @SuppressWarnings("unused")
    HttpResponse response = httpclient.execute(httppost); //execution
    } catch (ClientProtocolException e) {
        Log.d("Checkin", "ClientProtocolException");
    } catch (IOException i) {
        Log.d("Checkin", "IOException");
    }
   }

 }
} 
```

在我的 onCreate() 中应该被 AlarmManager 击中：

```
public void onCreate(Bundle savedInstanceState) {
        /*
         * Our onCreate block...
         */
        super.onCreate(savedInstanceState); 
        Context context = getApplicationContext();  
        setContentView(R.layout.activity_main);
        Button submit = (Button)findViewById(R.id.submitButton);
        submit.setOnClickListener(submitListener); //Initialization of the view and objects
        this.registerReceiver(this.mBatInfoReceiver, 
        new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.MINUTE, 1);
        Intent intent = new Intent(context, BatteryPost.class);
        PendingIntent sender = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
        am.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 600000, sender);

} 
```

当我点击按钮时，我注册手动将电池电量更新到它工作的服务器，因此这些值被正确存储，但 AlarmManager 无法每分钟调用 BatteryPost（只是每分钟进行测试，之后会更长）。

我一直在查看 SO 上的其他帖子以尝试找到类似的代码，但实现这一点变得很棘手。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:38:09.397

我注意到的第一件事是你让它检查每`600000`毫秒。这不是 60 秒，而是 600 秒，也就是 10 分钟。这可能是问题吗？

# c++ - 无法将参数 1 从 'char' 转换为 'const std::basic_string<_Elem,_Traits,_Ax> &'

> ID：11656350
> 
> 赞同：0
> 
> 时间：2012-07-25T18:35:14.743
> 
> 标签：c++, string, visual-studio-2008

我`str.append(ch);`在下面的代码行收到 abpve 错误。

`char`我基本上想在每个“ch”后面加上str 。

如果有人知道这个问题，请纠正我的错误。

```
int extract(unsigned char data, char i); // Signature of extract function

void decoded(istream& input,ostream& output)
    {   
        int cnt;
        int x;

        input.read((char*)&x,sizeof(x));

        cout<<x;
        cnt=x;
        string str;
        char ch;
        for ( ; ; ) 
        {
            char c;

            input.read((char*)&c,sizeof(char));

            if ( input )
            {
                //read_bit(c,output);
                for (int i=7; i>=0; i--)
                {     
                    if(cnt)
                        {
                        cnt--;
                        ch=(char)(((int)'0')+extract(c, i));

                        str.append(ch);// I am getting error at this line.

                        if(huffmanFindTable[str])
                        {
                            output.write((char*)&(huffmanFindTable[str]),sizeof(char));
                            str.clear();
                        }
                        else
                        {
                        }

                    }
                }
            }
            else
            break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:38:38.660

[string::append](http://en.cppreference.com/w/cpp/string/basic_string/append)没有以 a`char`作为参数的成员函数。您可以附加以 null 结尾的`char`数组或其他`stringS`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:42:41.577

您只能将字符的“序列”附加到字符串。“追加”是对两个（序列）向量（更一般意义上的词向量）类似对象的操作。

您可以执行以下操作：

1.  str.append(1, ch);
2.  str+=ch;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:44:32.137

就像编译器说的那样，没有带有签名的成员函数

```
str.append(ch); 
```

你可以使用

```
str.append(1, ch); 
```

或更简单的

```
str.push_back(ch); 
```

# binary - DCPU-16 位移位

> ID：11656352
> 
> 赞同：1
> 
> 时间：2012-07-25T18:35:19.023
> 
> 标签：binary, bit-manipulation, bit-shift, dcpu-16

我正在尝试学习 DCPU。

```
;Set b to 1
SET B,1 ;00001 (1)
SHL B,1 ;00010 (2)
SHL B,1 ;00100 (4)
SHL B,1 ;01000 (8)
SHL B,1 ;10000 (16) 
```

我所做的只是向左移动，所以它不应该只是在每次移动时自动翻倍。在我的代码中，您可以看到我有最后一个班次将注册表 B 变为 16，但是当运行 B 时最终变为 10，为什么会这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T20:16:25.877

> 注册窗口显示 0x0010 ...

你得到了正确的答案，你只是在[hexadecimal](http://en.wikipedia.org/wiki/Hexadecimal)中查看它。

以数字开头的数字`0x`是表示十六进制数字的标准方式；所以这个数字`0x0010`实际上是数字 10 [16] *（“以十六为底的一个零”）*，在十进制中，它是数字十六。

# java - Java - 我有一个抽象基类，我想从子类中设置一些基类的属性

> ID：11656353
> 
> 赞同：0
> 
> 时间：2012-07-25T18:35:21.670
> 
> 标签：java, oop

Java - 我有一个抽象基类，我想从子类中设置一些基类的属性。最好的方法是什么？使财产受到保护？在基类中创建设置器？

```
public abstract class A {
protected String tag;
protected String apiUrl;
    // Setter
    public void setApiUri(String url) {
        this.apiUrl = url;
    }
}

public class B extends A {
    tag = "Class B";
    apiUrl = "Class B Prefs";
}

public class C extends A {
    tag = "Class C";
    apiUrl = "Class C Prefs";
} 
```

请让我知道什么是最好的方法/更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:38:21.733

如果您想要最大程度的封装，请将基类字段设为私有并提供受保护的访问器。这通常是最佳做法。

如果您对最大封装不太在意，则可以使字段受到保护，但是它将类耦合在一起甚至比继承本身（呃）更紧密地结合在一起。

一般来说，您最好的选择是上面的第一个选项。JVM 的 JIT 可以优化调用，并有助于保持类*松散耦合*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:44:26.580

这取决于具体情况，但通常您希望从派生中保留基类的状态，并完全控制它如何实例化自己的成员。实现这一点的最佳方法是为基类指定一个构造函数，该构造函数输入并初始化其成员，并从具体类中调用它。这是一个例子：

```
abstract class Base{
    String s;
    int i;

    public Base(String s, int i){
        this.s = s; // Only base knows best how the initialization should be done
        this.i = i;
    }
}

class Concrete extends Base{

    // the role of the inheritor is to pass on the building blocks of its Base to Bases
    //constructor
    public Concrete(String s, int i) {
        super(s, i);
    }

} 
```

# jquery - Jquery 错误：Microsoft JScript 运行时错误：无法获取属性“html”的值：对象为空或未定义

> ID：11656360
> 
> 赞同：0
> 
> 时间：2012-07-25T18:36:05.263
> 
> 标签：jquery, razor

在我的 MVC3 剃须刀页面上，我正在尝试通过单击按钮动态添加文本框

下面粘贴的是我的 Jquery。但是当我单击 addButton 时，我收到上述错误消息。

要解决此错误，我尝试添加 `<script type="text/javascript" src="jquery-1.3.2.min.js"></script>` ，但仍然收到相同的错误。感谢您解决此错误的建议。

```
<script type="text/javascript">

    $(document).ready(function(){

        var counter = 2;

        $("#addButton").click(function () {

            if(counter>10){

                alert("Only 10 textboxes allow");

                return false;

            }   

            var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + counter);

                newTextBoxDiv.after().html('<label>Textbox #'+ counter + ' : </label>' +

                '<input type="text" name="textbox' + counter + 

                '" id="textbox' + counter + '" value="" >');

            newTextBoxDiv.appendTo("#TextBoxesGroup");

            counter++;

        });

        $("#removeButton").click(function () {

            if(counter==1){

                alert("No more textbox to remove");

                return false;

            }   

            counter--;

            $("#TextBoxDiv" + counter).remove();

        });

        $("#getButtonValue").click(function () {

            var msg = '';

            for(i=1; i<counter; i++){

                msg += "\n Textbox #" + i + " : " + $('#textbox' + i).val();

            }

            alert(msg);

        });

  });

</script> 
```

![在此处输入图像描述](../Images/287dce434e40cccf454bea7f2c101f49.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:40:05.587

这似乎很明显。如果您在`after()`没有任何内容的情况下调用，则您什么也没有创建。如果你试图得到`html()`什么……你什么都得不到。

您可能想查看`after()` [文档](http://api.jquery.com/after/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:50:03.917

您可能想一直使用 jquery 而不是混合原生 DOM 和 jquery。这个实际上会起作用：

```
var newTextBoxDiv = $('<div id="TextBoxDiv' + counter + '"><label>Textbox #'+ counter + ' : </label><input type="text" name="textbox' + counter + '" id="textbox' + counter + '" value="" ></div>'); 
```

# java - 程序可以在我的电脑上运行，但不能在服务器上运行

> ID：11656363
> 
> 赞同：3
> 
> 时间：2012-07-25T18:36:15.653
> 
> 标签：java, database, jar, version, main

我有一个程序我已经编写并变成了一个 jar 文件。jar 文件在我的计算机上运行良好。当我尝试在将要运行的服务器上运行程序时，jar 文件不起作用。我得到这个错误。

```
 Exception in thread "main" java.lang.NoClassDefFoundError: Publish
Caused by: java.lang.ClassNotFoundException: Publish
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: Publish. Program will exit. 
```

我认为这个问题是由不同版本的java或不同的环境引起的。我认为库不是这里的问题，而是运行该程序的环境。jar 文件在我自己的计算机上完美运行。

我的 java 版本 java 版本 "1.6.0_22" Java(TM) SE Runtime Environment (build 1.6.0_22-b04) Java HotSpot(TM) Client VM (build 17.1-b03, 混合模式, 共享)

服务器 java 版本 java 版本 "1.6.0_24" Java(TM) SE Runtime Environment (build 1.6.0_24-b07) Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02, 混合模式)

我也收到此错误，这表明我可能有一个 32 位 java 而服务器有一个 64 位，这可能会导致问题。

VM 初始化期间发生错误无法为对象堆保留足够的空间

我只需分配一些内存来运行此进程即可轻松解决此错误。

有谁知道如何解决这个问题？

注意：我还查看了清单文件，看起来不错

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:38:46.813

您正在使用`Publish`没有包。这意味着 java 期望这个类在默认包中。

您需要使用完全限定名称，例如：`foo.bar.Publish`

从[文档](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)：

> 默认情况下，第一个非选项参数是要调用的类的名称。应使用完全限定的类名。如果指定了 -jar 选项，则第一个非选项参数是包含应用程序的类和资源文件的 JAR 归档的名称，启动类由 Main-Class 清单头指示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:40:01.697

您需要包含完整的包名称。此错误不是 32/64 位操作系统的错误，也不是 Java 环境中的错误。

# css - 媒体查询中的字符更少

> ID：11656366
> 
> 赞同：0
> 
> 时间：2012-07-25T18:36:44.607
> 
> 标签：css

做

```
media="(device-width: 320px) and (-webkit-device-pixel-ratio: 2)" 
```

具有相同的行为

```
media="(device-width:320px)and(-webkit-device-pixel-ratio:2)" 
```

在所有情况下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:38:18.790

是的。CSS 的空格非常松散。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:38:25.430

是的，在这种情况下，空格无关紧要。您可以使用任何一种可用的 CSS 压缩器清楚地看到这一点。

# ruby-on-rails - 为同一个控制器处理不同的路由（具有不同的参数）

> ID：11656370
> 
> 赞同：0
> 
> 时间：2012-07-25T18:37:10.227
> 
> 标签：ruby-on-rails, model-view-controller, controller, routes

**问题描述：**

我有一个中间表 X 将表 A 中的元素映射到表 B 中的元素。

该表 X 还包含许多关于此映射属性的列。表 X 中记录的唯一性不仅是 id od A 和 id od B，而且是表示映射的唯一标识符。

在尝试更新表 X 的属性时，我添加到路由：

```
map.A :only=>[:none] do |a|
    a.resources B :controller=>X :only[:update]
end

map.resources x :only=>[:update] 
```

所以这基本上给了我可能的 url 来访问我的 X 控制器的更新方法。

**问题：**

我的问题是：如何通过传递 A 和 B 或仅传递 X 标识符来判断何时访问控制器？我知道查看参数我可以检查 A 是否存在，如果不存在，那么它必须是 X，但这不是很实用/安全。如果它变得更复杂，我将需要多个 if 来检测确切的情况。

更糟糕的是，想象一下由于某种原因我有另一条路线，例如：

```
map.resources Y :controller=>X :only[:update] 
```

然后在我的参数哈希中，我将只有 :id 所以，如果条件甚至不起作用......

**注释：**

我希望有一个`:key`路由选项，这样您就可以重命名参数哈希中的键，但是从我在 Rails 2 中读到的内容来看，没有这样的事情，如果可能的话，我想避免使用插件。没有比 if 案例或解析 url 来告诉传递哪些参数以便我可以查找我的数据库更好的方法吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:05:48.617

这*似乎*是一种情况，您实际上希望有两个不同的操作来处理这些情况，如果这是一个非常令人担忧的问题，但是您*可以*通过使用默认哈希来解决这个问题——http: [//guides.rubyonrails.org/ routing.html#defining-defaults](http://guides.rubyonrails.org/routing.html#defining-defaults) -- 指定一个参数，告诉您要遵循哪个参数来处理相同的情况。

我所说的两种不同操作的意思是`:action => update_from_a`除了普通`:update`方法之外，还有一个在路由中和一个适当的方法在控制器中。其中一些建议可能是特定于 rails 3 的。

# vba - 为什么这个应该对每一列求和的程序只在一列之后停止？

> ID：11656373
> 
> 赞同：2
> 
> 时间：2012-07-25T18:37:19.190
> 
> 标签：vba, excel, excel-2010

该程序创建一个数字表，然后尝试逐行汇总。我`IsBlank()`用来测试最上面的单元格是否为空白。如果它是空白的，它应该结束循环，但如果不是，循环应该继续。但是，它在第​​一次通过循环后一直结束。这是为什么？

我有一种感觉，这真的很明显。

编辑：我应该注意到整个“计数器”的东西都在那里，因为如果这有效，我将开始玩弄它。它没有用，所以我在这里！

```
Option Explicit
Dim Counter As Long
Dim i As Long
Dim col As Long
Dim row As Long

Sub SumRange()
    For col = 1 To 8
        For row = 1 To 6
            Cells(row, col) = Rnd
        Next row
    Next col
    Counter = 6
    For i = 1 To 9
        If IsEmpty(Cells(1, i)) = False Then
            Cells(Counter + 1, i) = Application.WorksheetFunction.Sum(Range(Cells(1, i), Cells(Counter, i)))
        Else
            End If
        End
    Next
    MsgBox Cells(4, 5)
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:51:43.517

有两个问题：

1.  该`End`说法不正确。如果我没记错的话，`End`意思是结束*程序*。您必须明确说明要结束的内容（`End If`, `End With`, ...）。在这种情况下，您的意思是`End If`.

2.  你需要使用`Exit For`来跳出for循环。我认为您的意思是您当前的`End If`声明所在的位置。

我不确定您要做什么，但您也可以考虑使用带有条件的 while 循环，`While Not IsEmpty(Cells(1, i))`然后`i`从循环内递增计数器。对我来说，这比带有跳转的 for 循环要好一些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T18:57:39.013

从您的代码（仅包含这些语句的行）中删除`Else`和`End`您的循环执行九次。

该`End`语句指示 VBA ...结束您的代码。所以它只是退出。

我强烈建议重构你的代码，它可以变得更有效率：

```
Sub SumRange()

  Dim values(1 To 6, 1 To 8) As Double
  Dim i As Long, j As Long

  ' populate array
  For i = LBound(values) To UBound(values)
    For j = LBound(values, 2) To UBound(values, 2)
      values(i, j) = Rnd
    Next j
  Next i

  ' blast array onto worksheet in one go
  Range("A1").Resize(UBound(values), UBound(values, 2)).value = values

  ' add sum formulas in one go
  Range("A1").Resize(, UBound(values, 2)).Offset(UBound(values)).FormulaR1C1 = _
  "=SUM(R[-" & UBound(values) & "]C[0]:R[-1]C[0])"

  MsgBox Cells(4, 5)
End Sub 
```

# django - 通过直接在数据库中写入，向 Django 添加新用户

> ID：11656381
> 
> 赞同：1
> 
> 时间：2012-07-25T18:37:46.120
> 
> 标签：django, django-models, user-management

我需要从 3rd 方平台 (PHP) 以编程方式将新用户添加到 Django 设置中，看来我只需要在`auth_user`表中编写一个条目即可实现此目的。

我对么？我还需要做其他事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:49:03.527

从技术上讲是的，但可能还有其他要求，例如创建`UserProfile`由业务逻辑而非数据库管理的。也许您应该考虑在单独的表/数据库中创建用户并编写自定义身份验证后端，从该共享位置导入用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:10:10.600

假设您不介意重新实现 Django 为您做的事情，这将起作用；特别是散列密码，但也可能`UserProfile`像 Ignacio 建议的那样创建一个对象。您还需要为项目中依赖`post_save`或`pre_save`信号的代码（如果有的话）制定另一种解决方案。

您还没有解释*为什么*要以这种方式做事：除了对 SQL 数据库的共享访问之外，您不能进行任何进程间通信的原因是什么？

如果您可以做不同的事情，那么设置一个仅限本地主机的 API 端点来创建用户可能更有意义，无论是使用[include](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.models.UserManager.create_user)[方法`UserCreationForm`](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.forms.UserCreationForm)还是[helper 方法](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.models.UserManager.create_user)。[`create_user()`](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.models.UserManager.create_user)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T22:09:22.770

如果可能的话，我会重新考虑你的方法。在我看来，您会冒着数据完整性问题的风险，并且通过弄乱 django 的表同时绕过其经过验证的业务逻辑来很难找到错误。我会通过在 django 中编写一个简单的 API 来解决这个问题，您可以向您公开 php 脚本，该脚本将允许 django 代表 php 添加用户。就编码时间和复杂性而言，这实际上可能是一种更简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-15T09:16:44.927

它在 PHP 中为我工作。

```
/*
 *
 * DJANGO AUTH
 * https://docs.djangoproject.com/fr/2.2/topics/auth/passwords/
 * <algorithm>$<iterations>$<salt>$<hash>
 * 
*/

function genRandomString($length = 32) {
    $retval = "";
    for ($i=0; $i < $length; $i++) { 
        $retval .= chr(rand(97,122));
    }
    return $retval;
}

$algo = 'sha256';
$password = 'your_password_here';
$salt = genRandomString(12);
$iteration = 180000;

$hash_password = base64_encode(hash_pbkdf2($algo, $password, $salt, $iteration, 32, true));
$link_for_db = 'pbkdf2_' . $algo . '$' . $iteration . '$' . $salt . '$' . $hash_password;
var_dump($link_for_db); //pbkdf2_sha256$180000$u02p8yhQmV3d$AOX+AZQmxe9gwlJaQn1P0f6rrOht7o9cVCY0nG5xa3g= 
```

# xslt - 键的使用：合并多个 有干预 元素

> ID：11656386
> 
> 赞同：2
> 
> 时间：2012-07-25T18:38:09.423
> 
> 标签：xslt, xpath

我有多个 xml 实例，类似于以下内容：

```
<refbody>
<ul>
    <li><uicontrol>FOO</uicontrol>BAR</li>
</ul>
<p>Values: 000 - 999</p>
<ul>
    <li><uicontrol>FOO</uicontrol>BAR</li>
    <li><uicontrol>FOO</uicontrol>BAR</li>
    <li><uicontrol>FOO</uicontrol>BAR</li>
    <li><uicontrol>FOO</uicontrol>BAR</li>
</ul>
<p>Values:</p>
<p>lorem ipsum</p>
<p>lorem ipsum</p>
<p>lorem ipsum</p>
</refbody> 
```

我希望发生的事情是将所有`<ul>`元素合并到一个`<dl>`.

每个都`<li>`应该创建一个 child `<dlentry>`。

每个都`<uicontrol>`应该成为`<dt>`它的一个孩子`<dlentry>`。

中的剩余文本`<li>`应该放在一个`<dd>`元素中，该元素也是`<dlentry>`.

我的样式表（在下面提供）已经完成了很多。我遇到麻烦的地方是最后一个要求：

任何`<p>`需要放在`<dlentry>`与其关联的内部`preceding-sibling::li[1]`。

所以想要的结果是这样的：

```
<refbody>
<dl>
    <dlentry>
        <dt>FOO</dt>
        <dd>BAR
            <p>Values: 000 - 999</p>
        </dd>
    </dlentry>
    <dlentry>
        <dt>FOO</dt>
        <dd>BAR</dd>
    </dlentry>
    <dlentry>
        <dt>FOO</dt>
        <dd>BAR</dd>
    </dlentry>
    <dlentry>
        <dt>FOO</dt>
        <dd>BAR</dd>
    </dlentry>
    <dlentry>
        <dt>FOO</dt>
        <dd>BAR
            <p>Values:</p>
            <p>lorem ipsum</p>
            <p>lorem ipsum</p>
            <p>lorem ipsum</p>
        </dd>
    </dlentry>
</dl>
</refbody> 
```

我想我需要使用密钥来执行此操作，但我无法让它正常工作。如果有人能告诉我我做错了什么，我将不胜感激。

这是我的样式表：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:key name="kValues" match="p" 
    use="generate-id[preceding::li[1]]"/>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="ul[ancestor::refbody][1]">
    <dl>
        <xsl:for-each select="child::li|following::li">
            <xsl:variable name="vValues">
                <xsl:value-of select="key('kValues',generate-id())"/>
            </xsl:variable>
            <dlentry>
                <dt>
                    <xsl:value-of select="child::uicontrol"/>
                </dt>
                <dd>
                     <xsl:value-of select="text()"/>
                    <xsl:if test="$vValues">
                        <xsl:copy-of select="$vValues" />
                    </xsl:if>
                </dd>
            </dlentry>
        </xsl:for-each>
    </dl>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:39:03.293

以下样式表在不使用键的情况下生成所需的输出。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="refbody">
        <xsl:copy>
            <dl>
                <xsl:apply-templates select="ul" />
            </dl>
        </xsl:copy>        
    </xsl:template>

    <xsl:template match="ul">
        <xsl:apply-templates select="*"/>
    </xsl:template>

    <xsl:template match="li">
        <dlentry><xsl:apply-templates select="@*|node()"/></dlentry>
    </xsl:template>

    <xsl:template match="uicontrol">
        <dt><xsl:apply-templates select="@*|node()"/></dt>
    </xsl:template>

    <xsl:template match="li/text()">
        <dd>
            <xsl:copy/>
            <xsl:apply-templates 
                 select="parent::li
                                 [not(following-sibling::li)]
                                 /parent::ul
                                 /following-sibling::p
                                 [
                                  count(preceding-sibling::ul) 
                                  = count(current()/../../preceding-sibling::ul)
                                    +1
                                 ]"/>
        </dd>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:40:08.240

**I. 这种转换**（我使用密钥的解决方案）：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:key name="kFollowing"
      match="node()[self::p or self::text() and preceding-sibling::ul]"
      use="generate-id(preceding::li[1])"/>

     <xsl:template match="/*[ul]">
         <refbody>
             <dl>
               <xsl:apply-templates/>
             </dl>
         </refbody>
     </xsl:template>

     <xsl:template match="li">
         <dlentry>
           <xsl:apply-templates/>
         </dlentry>
     </xsl:template>

     <xsl:template match="li/text()">
         <dd>
           <xsl:value-of select="normalize-space()"/>
         </dd>
     </xsl:template>

     <xsl:template match="li[last()]/text()">
         <dd>
           <xsl:value-of select="."/>
           <xsl:copy-of select="key('kFollowing', generate-id(..))"/>
         </dd>
     </xsl:template>

     <xsl:template match="uicontrol">
         <dt>
           <xsl:apply-templates/>
         </dt>
     </xsl:template>
     <xsl:template match="p/text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<refbody>
    <ul>
        <li>
            <uicontrol>FOO</uicontrol>BAR
        </li>
    </ul>
    <p>Values: 000 - 999</p>
    <ul>
        <li>
            <uicontrol>FOO</uicontrol>BAR
        </li>
        <li>
            <uicontrol>FOO</uicontrol>BAR
        </li>
        <li>
            <uicontrol>FOO</uicontrol>BAR
        </li>
        <li>
            <uicontrol>FOO</uicontrol>BAR
        </li>
    </ul>
    <p>Values:</p>
    <p>lorem ipsum</p>
    <p>lorem ipsum</p>
    <p>lorem ipsum</p>
</refbody> 
```

**产生想要的正确结果**：

```
<refbody>
   <dl>
      <dlentry>
         <dt>FOO</dt>
         <dd>BAR
        <p>Values: 000 - 999</p>
         </dd>
      </dlentry>
      <dlentry>
         <dt>FOO</dt>
         <dd>BAR</dd>
      </dlentry>
      <dlentry>
         <dt>FOO</dt>
         <dd>BAR</dd>
      </dlentry>
      <dlentry>
         <dt>FOO</dt>
         <dd>BAR</dd>
      </dlentry>
      <dlentry>
         <dt>FOO</dt>
         <dd>BAR
        <p>Values:</p>
            <p>lorem ipsum</p>
            <p>lorem ipsum</p>
            <p>lorem ipsum</p>
         </dd>
      </dlentry>
   </dl>
</refbody> 
```

* * *

**二、纠正所有发现的错误后的解决方案：**

```
<xsl:stylesheet
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:key name="kValues" match="p"
        use="generate-id(preceding::li[1])"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="ul[ancestor::refbody][1]">
        <dl>
            <xsl:for-each select="child::li|following::li">
                <xsl:variable name="vValues" select="key('kValues',generate-id())"/>
                <dlentry>
                    <dt>
                        <xsl:value-of select="child::uicontrol"/>
                    </dt>
                    <dd>
                         <xsl:value-of select="text()[normalize-space()]"/>
                         <xsl:copy-of select="$vValues" />
                    </dd>
                </dlentry>
            </xsl:for-each>
        </dl>
    </xsl:template>

    <xsl:template match="p|ul|text()"/>
</xsl:stylesheet> 
```

**当这个更正的转换应用于同一个 XML 文档（上图）时，它会产生完全想要的正确结果**。

* * *

**三、分析我发现的错误**：

1.  这是一个需要用眼睛看的错误：

...

```
<xsl:key name="kValues" match="p"             
         use="generate-id[preceding::li[1]]"/> 
```

...

这里任何元素都由其具有前面`p`的子元素的字符串值索引。`generate-id``li`

`generate-id`但是， XML 文档中没有命名元素。

**真正的意图是使用该`generate-id()`功能**。函数调用由函数名组成，后跟一系列实际参数值，用常规的圆括号`(`和. 括起来`)`。用方括号替换圆括号从根本上改变了表达式的语义，将函数调用变成了（相对）定位步骤。

.2\. **这**：

```
 <xsl:variable name="vValues">                               
          <xsl:value-of select="key('kValues',generate-id())"/>                           
        </xsl:variable> 
```

**不仅是一种（非常）不好的做法，而且经常是错误的原因**，就像在当前情况下一样。您正在创建树（文档节点），而不是元素的节点集。树总是至少有一个节点（文档节点）和它的布尔值，因此总是正确的。

永远不要使用上述语法。

**正确的变量声明是**：

```
 <xsl:variable name="vValues" select="key('kValues',generate-id())"/> 
```

.3\. 没有模板规则可以防止身份模板复制任何不需要的`ul`、`p`和`text()`节点，并且这些出现在原始转换的结果中。

# javascript - 如何从父窗口添加弹出窗口的某些属性？

> ID：11656388
> 
> 赞同：2
> 
> 时间：2012-07-25T18:38:12.990
> 
> 标签：javascript, jquery

所以我从父页面打开了一个弹出窗口：

```
popitup("foobar.html");

function popitup(url) {
    newwindow=window.open(url,'name','height=700,width=1000');
    if (window.focus) {newwindow.focus()}
    return false;
} 
```

页面弹出后，我想在弹出的**body标签中添加如下**

```
<body onunload="window.opener.parent.location.reload();"> 
```

我怎样才能从父窗口伸出援手并进行此类修改？我是否必须在加载弹出窗口后运行的函数中包含此类代码？

谢谢！

PS所有页面都在同一个域中。我想在加载弹出窗口后进行修改。

我知道加载 iframe 后可以运行一些函数，这样的函数是否也可以以某种差异方式应用于弹出窗口？

```
jQuery("#ifrm").load( function(){}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:02:31.150

不用 jQuery 你也可以做到，

```
function popitup(url) {
    newwindow=window.open(url,'name','height=700,width=1000');
    if (window.focus) {newwindow.focus()}
    newwindow.onload = function(){
        newwindow.document.body.onunload = function(){
            window.opener.parent.location.reload();
        }
    }
    return false;
}
popitup("/"); 
```

# php - 正则表达式，两个字符串之间多次出现的任意字符串

> ID：11656389
> 
> 赞同：3
> 
> 时间：2012-07-25T18:38:16.757
> 
> 标签：php, regex, templates

我在 PHP 中使用简单的正则表达式来解析自定义模板

```
$row = preg_replace_callback(
    '/\^([^\^]+)\^/', create_function ('$m', 'global $fields_ar; return $fields_ar{$m[1]};'),
    $template
    ); 
```

基本上，两个 ^ 之间的所有内容都替换为相应的变量名称值，例如，如果 $template 是：

```
 <td>^title_source^ by ^author_source^<br/> 
```

和

```
$fields_ar['title_source'] == 'my title' and  $fields_ar['author_source'] == 'my author' 
```

$row 变为：

```
<td>my title by my author<br/> 
```

一切正常，但我想更改分隔符；而不是 ^，它有可能包含在其他两个 ^ 之间，我想使用一个字符串，例如“sel3ction”，但是：

```
$row = preg_replace_callback(
    '/sel3ction([^sel3ction]+)sel3ction/', create_function ('$m', 'global $fields_ar; return $fields_ar{$m[1]};'),
    $template
    ); 
```

不工作；我很确定问题出在消极方面。

有什么建议么？

我知道这不是一种“干净”的方法，因为即使是最奇怪的字符串也可能很棘手，但目前我想尝试使用这种方法。如果您有更标准的解决方案，当然欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:49:00.337

`.`使用惰性量词 ( )匹配时，您可以告诉表达式不要贪婪`?`：

```
/sel3ction(.+?)sel3ction/ 
```

这告诉正则表达式引擎不要将`.`（在本例中为“sel3ction”）之后的内容与其他可能匹配的内容匹配。

# prolog - Prolog 中的聊天机器人

> ID：11656390
> 
> 赞同：3
> 
> 时间：2012-07-25T18:38:18.597
> 
> 标签：prolog, chatbot

我一直在尝试在 prolog 中创建一个聊天机器人（作为一项任务），到目前为止，我已经在 .pl 文件中创建了一个数据库，并且列出了很多可能的对话。我知道序言是这样工作的，例如，如果我们有

```
Chatbot(good) 
```

我们输入

```
?-Chatbot(good). 
```

它会回应

```
yes or ture. 
```

现在我不知道如何使用我的数据库，以便程序可以完全像聊天机器人一样工作，例如，无需编写适当的语法：

```
Hello (typed by the user)

Hi there, (typed by the program automatically) 
```

我的数据库是这样的：

```
answer( question, [
[Yes, I am here]]).

question ([are you there?]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:28:37.467

我知道的原型[聊天机器人是 Weizenbaum 1966 年的](http://en.wikipedia.org/wiki/Chatterbot)[ELIZA](http://en.wikipedia.org/wiki/ELIZA)。

在 Prolog 中实现它相当容易，如Sterling & Shapiro*的 The Art of Prolog所示。*

谷歌搜索“ELIZA Prolog”，第一个链接为您提供了一个相当复杂的[实现](http://cs.nyu.edu/courses/fall11/CSCI-GA.2110-003/documents/eliza.pl)，您可以使用您的数据库调整/重用引擎。但是这样你就会失去所有的乐趣。我建议你阅读这本书并花时间实现你自己的。

*编辑*

万一您还没有看到它，SWISH在[其示例中提供](https://swish.swi-prolog.org/example/examples.swinb)[了一个干净、准系统的 ELIZA](https://swish.swi-prolog.org/example/eliza.pl)实现。

# asp.net - 如何使用 ASP.NET CLR 语言 VB 或 C# 创建带有图例的字段集？

> ID：11656394
> 
> 赞同：0
> 
> 时间：2012-07-25T18:38:28.223
> 
> 标签：asp.net, clr, fieldset

如何使用 C# 或 VB.NET 以编程方式创建带有图例和一些内容的字段集，以便生成的标记看起来像这样？

```
 <fieldset><legend>foo</legend>res ipsa loquitur</fieldset> 
```

不寻找`<fieldset>`此处建议的替代方案：

[如何在 asp.net 代码后面创建 HTML 字段集和图例？](https://stackoverflow.com/questions/3655571/how-to-create-html-fieldset-and-legend-in-asp-net-code-behind)

这可以用 ASP.NET *HtmlGenericControl*来完成吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:47:27.327

```
Literal l = new Literal();
l.Mode = LiteralMode.PassThrough;
l.Text = "<fieldset><legend>foo</legend>res ipsa loquitur</fieldset>";
this.Controls.Add(l); 
```

# jquery - 使用引导程序和 jquery 更改弹出窗口的标题

> ID：11656395
> 
> 赞同：6
> 
> 时间：2012-07-25T18:38:32.450
> 
> 标签：jquery, twitter-bootstrap, popover

这是链接的html，即：

```
 <a href="javascript:void(0);" style="font-size: 3em; color: #222" class="popover-test" id="directNavPrev" data-title="Previous Result Row" data-content="Previous Result Row">
&laquo;</a> 
```

是的，我正在调用 .popover() 进行初始化，并且弹出框工作得很好。我可以毫无问题地更新内容。只是不是标题。我尝试过“prev.data('title','new title')”，甚至尝试重新初始化“prev.popover({title:'new title'});” 没有骰子...谢谢。

```
 function SetDirectNavigationPlaceholder() {
    //debugger;
    var item = $("#movementType :selected").val();
    var direct = $('#directNavigation');
    var prev = $('#directNavPrev');
    var next = $('#directNavNext');
    switch (item) {
        case "result":
            $('#bookTypeSection').addClass('hide');
            direct.val('Result Row from 1 - 150');
            prev.attr('data-title', "Previous Result Row");
            next.attr('data-title', "Next Result Row");
            prev.attr('data-content', "Check it! this will contain the information for the previous result<table><tr><td>blah</td><td>blah</td></tr><tr><td>blah</td><td>blah</td></tr><tr><td>blah</td><td>blah</td></tr><tr><td>blah</td><td>blah</td></tr></table>");
            next.attr('data-content', "Check it! this will contain the information for the next result<table><tr><td>blah</td><td>blah</td></tr></table>");
            break;
        case "instrument":
            $('#bookTypeSection').addClass('hide');
            direct.val('Instrument #');
            prev.attr('data-title', "Previous Instrument #");
            next.attr('data-title', "Next Instrument #");
            prev.attr('data-content', "Check it! this will contain the information for the previous <b>instrument</b><table><tr><td>blah</td><td>blah</td></tr></table>");
            next.attr('data-content', "Check it! this will contain the information for the next <b>instrument</b><table><tr><td>blah</td><td>blah</td></tr></table>");
            break;
        case "bookpage":
            $('#bookTypeSection').removeClass('hide');
            direct.val('Book/Page');
            prev.attr('data-title', "Previous Book/Page");
            next.attr('data-title', "Next Book/Page");
            prev.attr('data-content', "Check it! this will contain the information for the previous <b>book/page</b><table><tr><td>blah</td><td>blah</td></tr></table>");
            next.attr('data-content', "Check it! this will contain the information for the next <b>book/page</b><table><tr><td>blah</td><td>blah</td></tr></table>");
            break;
    }
    direct.css('color', '#aaa').not('#directNavigationHeader');
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-25T17:30:28.500

最简单的方法是这个：

```
 var newTitle = "Here's my new title";
     $('#MyExample').attr('data-original-title', newTitle); 
```

希望它有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:42:32.277

看起来 Twitter-bootstrap 并没有`div`为定位弹出窗口保留一个周围，所以通过更改标题来更改标题是不可能的。但是，[这篇文章](https://stackoverflow.com/questions/7664051/when-using-twitters-bootstrap-how-can-i-change-a-popovers-content)可能会有所帮助。

[这是一个jsfiddle](http://jsfiddle.net/jackpines/rBWcQ/35/)，你可以，呃，摆弄。

以及那些不能摆弄它的人的代码。:-)

HTML：

```
<div style="padding-top: 45px;">
    <a data-content="Original Content for Popover" data-original-title="Popover Title" data-placement="right" href="#" class="btn danger" id="popover-link" rel="popover">Rollover</a>
</div>​ 
```

JavaScript：

```
$('#popover-link').popover({title: function() {return 'new title';}});
$('#popover-link').attr("data-content", "New Content for Popover");
$('#popover-link').setTitle('new title');​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T12:34:20.803

考虑一下那只猫皮！

这是交易。似乎在 bootstrap.js 文件中没有 getTitle() 的方法，即使它正在调用。所以我添加了它。享受。

```
/* NOTE: POPOVER EXTENDS BOOTSTRAP-TOOLTIP.js
 ========================================== */

Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype, {
  constructor: Popover, setContent: function () {
  //debugger;

  var $tip = this.tip()
    , title = this.getTitle() // didn't exist
    , content = this.getContent()

  $tip.find('.popover-title')[this.isHTML(title) ? 'html' : 'text'](title)
  $tip.find('.popover-content > *')[this.isHTML(content) ? 'html' : 'text'](content)

  $tip.removeClass('fade top bottom left right in')
}

, hasContent: function () {
  return this.getTitle() || this.getContent()
}

 , getContent: function () {
  var content
    , $e = this.$element
    , o = this.options

  content = $e.attr('data-content')
    || (typeof o.content == 'function' ? o.content.call($e[0]) : o.content)

  return content
}

 , getTitle: function () { // does now
  var title
    , $t = this.$element
    , n = this.options

  title = $t.attr('data-title')
    || (typeof n.title == 'function' ? n.title.call($t[0]) : n.title)

  return title
}

, tip: function () {
  if (!this.$tip) {
      this.$tip = $(this.options.template)
  }
  return this.$tip
}

}) 
```

由于某种原因，我无法获取实际的“标题”属性，因此如果要更改它，则必须使用“数据标题”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-24T21:00:55.510

这对我有用

```
$("#mylink").data()["bs.popover"].config.title = "New Ttile";
$("#mylink").data()["bs.popover"].config.content = "<p>New Content</p>"; 
```

或者

```
$("#mylink").data("bs.popover").config.title = "New Ttile";
$("#mylink").data("bs.popover").config.content = "<p>New Content</p>"; 
```

# javascript - 在fancybox之前显示一个确认框

> ID：11656396
> 
> 赞同：0
> 
> 时间：2012-07-25T18:38:37.007
> 
> 标签：javascript, jquery, fancybox, coffeescript, confirm

我有一个有任务的客户的应用程序。要为客户创建新任务，您可以单击添加图标，该图标会打开一个显示新任务表单的精美框。这有以下咖啡脚本：

```
jQuery ->
  $("a.fancyForm").fancybox
  scrolling: "no"
  titleShow: false 
```

但是，客户也必须有一个努力的目标，否则这些任务都是徒劳的。所以这种关系实际上是客户有很多目标，有很多任务。如果客户已经有了一些目标，那么表格只会询问您它朝着哪个目标努力。如果客户没有目标，那么我想弹出一个确认框，询问用户是否想现在制定目标。这是我目前拥有的咖啡脚本：

```
$("a.noGoals").click (e) ->
  e.preventDefault()
  confirm_create_goal = confirm("There is currently no Goal for this customer. Would you like to create one?")
  if confirm_create_goal
    $("a.noGoals").fancybox()
  else
    alert "You won't be able to create tasks until a goal is created!" 
```

这通过单击确定弹出确认框似乎什么都不做。如果您再次尝试，它会显示确认框，如果您单击确定或取消，它会显示带有我的新目标表单的正确幻想框。我如何让这个第一次工作？似乎第一次单击确定它只设置了 confirm_create_goal ，然后只在第二次尝试时打开了幻想框。

如果我在第一次尝试时单击“取消”，它会正确显示警报。第二次尝试我点击“ok”没有fancybox。第三次尝试点击“ok”得到fancybox，但如果我点击“cancel”我得到警报然后fancybox oO

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:50:38.043

fancybox() 应该在页面加载时调用，而不是响应点击事件。调用 fancybox() 只是创建了 fancybox 并附加了监听器等。它只是配置它。它没有显示出来。

这是我没有使用 fancybox 的原因之一，因为它的 API 很弱。没有手动显示它的方法。除非您使用的是 fancybox 2。这是一个如何工作的示例：

[http://jsfiddle.net/9wAdV/1/](http://jsfiddle.net/9wAdV/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:48:37.327

所以事实证明，像上面那样调用fancybox只是将它附加到点击事件上，而不是调用它。因此，当您再次单击时，无论您的确认框响应如何，它都会显示现在附加到单击事件的幻想框。

我的解决方案，虽然不确定它是否是最好的，但使用 .on() 和 .off() 绑定和取消绑定确认框，然后我可以在 $("a.noGoals").fancybox() 之后触发fancybox称呼：

```
confirm_create_goal = (e) ->
  e.preventDefault()
  confirm_create = confirm("There is currently no Goal for " + $(this).data("customer") + "'s company, " + $(this).data("company") + ". Would you like to create one?")
  if confirm_create
    $("body").off "click", "a.noGoals", confirm_create_goal
    $("a.noGoals").fancybox(onClosed: ->
      $("body").on "click", "a.noGoals", ->
        alert "Create a Goal!"
    ).trigger "click"
  else
    alert "You won't be able to create tasks until a goal is created!"

$("body").on "click", "a.noGoals", confirm_create_goal 
```

所以函数confirm_create_goal会弹出一个确认框，如果你点击取消，它会发出警报，如果你点击ok，它会从链接中解除绑定，添加fancybox并触发链接上的点击事件。这将打开花式框，一切都正确显示。最后，我添加了一个绑定到链接的警报（以防用户关闭框并尝试执行任务），提醒他们创建目标。

# objective-c - 最佳数据存储内存使用？

> ID：11656398
> 
> 赞同：0
> 
> 时间：2012-07-25T18:38:45.367
> 
> 标签：objective-c, ios, cocoa-touch, ios5

我正在构建一个数据存储，以跟踪存储在我的应用程序中的所有远程图像。我决定使用一个单例来跟踪所有被引用的图像。

我记得，iOS 会根据最近的使用情况自动开始从内存中清除对象，无论它是否被当前视图控制器引用等等。但是，如果我将这些图像存储在数据存储中，这些对象总是被引用商店本身。我的内存管理解决方案是跟踪上次调用图像的时间，并对存储在数据存储中的图像的数量和大小保持某种形式的限制，并根据年龄清除最旧的图像。

**这个解决方案是一个好的解决方案吗？为什么或者为什么不？我应该依赖苹果的自动内存管理，还是让我自己的经理好吗？**

*进一步说明：*

以下是从我的一个视图控制器请求图像最终将如何使用我的解决方案：

```
[[HollerImages store]getImageWithUrl:@"https://www.google.com/logos/classicplus.png" 
                     completionBlock:^(BOOL succeeded, UIImage *image){
                        if( succeeded ){
                            //Update the UIImageView with the returned image
                        }
                     }]; 
```

然后，商店将管理应用程序中当前引用的图像数量，并在我们达到某个预定义的限制时自动取消引用旧图像。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:07:41.623

Renaud Boisjoly (@rboisjoly) 刚刚向我发送了一个指向该库的链接，该链接似乎提供了我所描述的解决方案：[https ://github.com/rs/SDWebImage/](https://github.com/rs/SDWebImage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:09:23.923

处理内存问题的最简单方法是只实现该`-(void)didReceiveMemoryWarning`函数并清除那里的所有缓存数据。

您正在谈论的是实现过​​期缓存。您可以在每次插入时计算数据结构中的元素，并在达到限制时从头部删除元素（前提是它是有序的数据结构）。前一种解决方案更容易，并且在大多数情况下都有效。

# magento - 标题徽标图像显示在主页上，但不显示在其他页面上

> ID：11656400
> 
> 赞同：0
> 
> 时间：2012-07-25T18:38:46.470
> 
> 标签：magento

我正在使用带有 hellowired 模板的 Mgto 1702。我有各种遵循子文件夹方法的商店（www.domaian.com/store）。标题图像徽标和 Alt 文本文件位于其文件夹中。当您访问 www.domain.com/store1 或 /store2 等时，主站点标题上会出现正确的徽标。当我单击任何链接以更改页面（例如，产品页面）时，标题正确显示，但图像不正确。

header.phtml 文件包含一个 If 询问它是否是主页 (getIsHomePage()):?> 但这并不重要。我将代码放在 If 子句之外，问题仍然存在。我添加了一个“技巧” echo 子句来遵循所有情况下的行为。出现文本但不显示 JPG。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:13:04.860

```
<?php // if ($this->getIsHomePage()):?>
<h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
<?php /*else:?>
<a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
<?php endif */?> 
```

please remove the condition as shown above in the header.phtml page to get the same header in all the pages.

# php - htaccess 指向错误

> ID：11656402
> 
> 赞同：-1
> 
> 时间：2012-07-25T18:38:53.917
> 
> 标签：php, .htaccess

我有以下代码，

**details.php**工作正常。但是当我访问**gotolink.php**时，它再次在**details.php**页面中引导我，这给了我 404 错误，因为它的意外 url..

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9-/]+)$ uk/details.php?pid=$1
RewriteRule ^([a-zA-Z0-9-/]+)/$ uk/details.php?pid=$1

RewriteRule ^([a-zA-Z0-9-/]+)$ gotolink/gotolink.php?id=$1
RewriteRule ^([a-zA-Z0-9-/]+)/$ gotolink/gotolink.php?id=$1 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:08:50.270

重写条件是相同的，所以第一个将捕获所有请求，它永远不会到达 gotolink.php

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:09:02.370

`details.php`和的正则表达式`gotolink.php`是相同的，apache 无法判断是否`http://domain.com/abc123`应该重写`/uk/details.php?pid=abc123`或`/gotolink/gotolink.php?id=abc123`因为 URI`/abc123`匹配这两个：

```
RewriteRule ^([a-zA-Z0-9-/]+)$ uk/details.php?pid=$1

RewriteRule ^([a-zA-Z0-9-/]+)$ gotolink/gotolink.php?id=$1 
```

details.php 是第一位的，这就是为什么**所有内容都**被重写为 details.php 的原因。如果你交换它们，一切都会被重写为 gotolink.php。您必须使这些正则表达式匹配不同。例子：

```
RewriteRule ^d/([a-zA-Z0-9-/]+)$ uk/details.php?pid=$1

RewriteRule ^g/([a-zA-Z0-9-/]+)$ gotolink/gotolink.php?id=$1 
```

所以现在`/d/abc123`去去去。`/uk/details.php?pid=abc123`_ 或者，如果详细信息 pid 始终是字母并且 gotolink id 始终是数字或其他内容，您可以将它们分开：`/g/abc123``/gotolink/gotolink.php?id=abc123`

```
RewriteRule ^([a-zA-Z-/]+)$ uk/details.php?pid=$1

RewriteRule ^([0-9-/]+)$ gotolink/gotolink.php?id=$1 
```

# iis-7.5 - 使用 IIS 7.5 使用 Web 应用程序创建符号链接

> ID：11656404
> 
> 赞同：0
> 
> 时间：2012-07-25T18:39:07.917
> 
> 标签：iis-7.5, symlink

我想使用在 IIS 7.5 中运行的 Web 应用程序创建符号链接。但是在创建过程中会出现以下错误消息：

```
A required privilege is not held by the client. (Exception from HRESULT: 0x80070522)
System.Runtime.InteropServices.COMException (0x80070522): A required privilege is not held by the client. (Exception from HRESULT: 0x80070522) at 
System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtrerrorInfo) at Uploader.SaveToDisk() 
```

我已使用 secpol.msc 将“本地策略/用户权限分配/创建符号链接”修改为所有人，但此修改并未解决问题。

有没有人遇到过同样的问题或者有什么建议去哪里寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:05:32.767

我通过将 IIS 用于匿名身份验证的用户从 IUSR 更改为管理员组中的用户解决了这个问题。

要更改此设置，请转到 IIS / 身份验证 / 匿名身份验证 / 编辑

我在我的开发机器上做了这个。这可能不是在生产服务器上执行此操作的方法。

# postgresql - postgresql 安装失败

> ID：11656410
> 
> 赞同：20
> 
> 时间：2012-07-25T18:39:30.747
> 
> 标签：postgresql

我试图在我的 Windows 7（64 位）中安装 postgresql 8.4。但它失败并在日志中显示以下消息

```
正在初始化数据库集群（这可能需要几分钟）...
执行 cscript //NoLogo "C:\PostgreSQL\8.4/installer/server/initcluster.vbs" "postgres" "postgres" "****" "C:\PostgreSQL\8.4" "C:\PostgreSQL\data" 5432 “默认”
脚本退出代码：1

脚本输出：
 CScript 错误：找不到脚本“C:\PostgreSQL\8.4\installer\server\initcluster.vbs”的脚本引擎“VBScript”。

脚本标准错误：
 程序以错误退出代码结束

运行 cscript 时出错 //NoLogo "C:\PostgreSQL\8.4/installer/server/initcluster.vbs" "postgres" "postgres" "****" "C:\PostgreSQL\8.4" "C:\PostgreSQL\data" 5432“DEFAULT”：程序以错误退出代码结束
运行安装后步骤时出现问题。安装可能无法正确完成
 数据库集群初始化失败。
创建卸载程序
创建卸载程序 25%
创建卸载程序 50%
创建卸载程序 75%

```

我对此进行了谷歌搜索并运行命令“regsvr32 vbscript.dll”，它显示消息“vbscript.dll 中的 DllRegisterServer 成功”，但它并没有解决我的问题。

此外，我将注册表中 {B54F3741-5B07-11cf-A4B0-00AA004A55E8} 的默认值设置为 vbscript.dll 的文件路径，但它也没有解决我的问题。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T17:18:00.647

以下链接解决了我的问题

[http://www.geekscribes.net/blog/2009/04/22/postgresql-database-cluster-initialisation-failed-solution/](http://www.geekscribes.net/blog/2009/04/22/postgresql-database-cluster-initialisation-failed-solution/)

文章正文：

> 我会保持这个简短而甜蜜。对于那些尝试在 Windows Vista 上安装 PostgreSQL（我的是 8.3.7-1）并在安装结束时收到错误 Database Cluster Initialisation Failed 错误的人，请阅读此内容。
> 
> 问题是 Vista 有一些与设置 Program Files 文件夹权限相关的安全功能。基本上，即使您是管理员，也无法更改某些文件夹（如 Program Files 和 Windows 文件夹本身）的权限。这会导致 initdb 无法创建某些文件夹和数据库集群。这对您来说意味着您需要将 PostgreSQL 安装在 Program Files 之外的另一个文件夹中。
> 
> 顺便说一句，如果您在第一次安装时忘记了 Postgres 帐户密码，只需在 Vista 中打开命令提示符（如果您不知道如何操作，请谷歌）。然后输入命令“net user”。您将在您的计算机上看到一个用户列表。找到 Postgre 的帐户。它通常是“postgres”。然后，您需要通过键入“net user postgres new_password”来更改其密码，其中 new_password 是……嗯，该帐户的新密码。在安装过程中您将需要该 postgres 帐户。但是，您需要管理员权限才能进行此更改。
> 
> 首先，卸载所有失败的安装。使用控制面板或安装文件夹中的 PostgreSQL 安装程序。
> 
> 在安装过程中，系统会提示您选择要安装程序的位置。只需在另一个地方选择一个位置。像“C:\PostgreSQL”或类似的东西。它甚至可能在您的桌面上。但不在程序文件中。不在 Windows 文件夹内。然而，这并不容易。忍受我。
> 
> 安装后，您仍然会看到该死的错误消息（或发生非致命错误）。不要绝望！（对于 Windows 高级用户，我们只是在新的 PostgreSQL 安装文件夹上为 Postgres 帐户分配完全控制权限）。对于其他用户，如果您不知道如何操作，请继续阅读。
> 
> 转到刚刚安装 PostgreSQL 的位置。在这种情况下，C: 驱动器。在那里，右键单击文件夹（通常称为 PostgreSQL），然后转到属性 - 安全选项卡。单击编辑按钮。您现在将看到一些用户名和其他内容。单击添加按钮。在“输入要选择的对象名称”框中，输入“postgres”并按检查。Postgres 的用户帐户应该出现在那里。单击确定。
> 
> 现在从“组或用户名”框中，选择 Postgres 帐户。在下面的窗口中，有很多复选框，在允许列中为其分配“完全控制”权限。请注意，如果您不想允许完全控制，只需给它读/写。但我只是继续前进并完全控制它。（我又累又恼。“世界最先进的开源数据库”安装失败！）。单击确定并稍等片刻以应用权限。
> 
> 然后，只需重新安装即可。不要卸载任何东西。只需再次运行设置。它会说 PostgreSQL 安装文件夹已经存在和其他东西。只需单击下一步，直到安装完成。如果您看到“文件无法复制”错误，请在需要时单击“忽略”按钮。
> 
> 而已。PostgreSQL 现在应该在 Vista 上启动并运行。希望它对您也有用，就像对我一样，并且我的指南对任何人都有帮助。如果它有效，或者如果您有其他解决方案，请告诉我们。谢谢阅读！:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-20T09:14:56.200

我`postgresql-9.2.3-1-windows-x64.exe`在 Windows 7 Enterprise 上安装“”得到了相同的结果，当我更改安装路径时问题得到解决。

尝试安装到“ `c:\postgresql`”而不是“ `c:\program files\Postgresql`”

祝你好运

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-26T13:09:01.080

对我来说，问题是该`PATH`变量没有`C:\Windows\system32`，因此它没有找到`ICACLS`更改文件夹权限的命令。所以解决方案是添加`C:\Windows\system32`到系统`PATH`变量（如果它不包含它）：

1.  控制面板 -> 系统 -> 高级系统设置 -> 高级 -> 环境变量
2.  在“系统变量”下找到并选择“路径”
3.  点击“编辑...”
4.  现在，如果值不包含 system32 附加字符串的路径`;C:\Windows\system32`（或您的 Windows 路径所在的任何位置）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-16T15:29:41.987

Solution:

• Uninstall PostgreSQL

• Run command: net user postgres /delete

• Click: Control Panel -> User Accounts -> Configure advanced user profile properties -> delete all “Unknown User” instances that seem to be left from PostgreSQL installation.

• Run: compmgmt.msc -> Click Local Users and Groups -> Users -> New User… -> User name: postgres, Password: postgrespass -> Create

• Run: compmgmt.msc -> Click Local Users and Groups -> Users -> postgres ->Member of -> Add… -> Administrators -> OK

• copy the PostgreSQL installer postgresql-8.4.9-1-windows.exe to C:\

• Run: runas /user:postgres cmd.exe -> cd \ -> postgresql-8.4.9-1-windows.exe -> installed successfully without errors. Checked data folder and confirmed files created successfully.

• Run: compmgmt.msc -> Local Users and Groups -> Users -> postgres -> Member of -> Administrators -> Remove

• Run: compmgmt.msc -> Local Users and Groups -> Users -> postgres -> Member of -> Add… -> Power Users -> OK

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-22T09:06:58.247

我从谷歌缓存中提取了 shin 的链接：

原文链接： [http ://www.geekscribes.net/blog/2009/04/22/postgresql-database-cluster-initialisation-failed-solution/](http://www.geekscribes.net/blog/2009/04/22/postgresql-database-cluster-initialisation-failed-solution/)

缓存链接： [http ://webcache.googleusercontent.com/search?q=cache:RXu-5-ZzfcgJ:www.geekscribes.net/blog/2009/04/22/postgresql-database-cluster-initialisation-failed-solution /+&cd=3&hl=ro&ct=clnk](http://webcache.googleusercontent.com/search?q=cache:RXu-5-ZzfcgJ:www.geekscribes.net/blog/2009/04/22/postgresql-database-cluster-initialisation-failed-solution/+&cd=3&hl=ro&ct=clnk)

* * *

PostgreSQL 数据库集群初始化失败的解决方法

我会保持这个简短而甜蜜。对于那些尝试在 Windows Vista 上安装 PostgreSQL（我的是 8.3.7-1）并在安装结束时收到错误 Database Cluster Initialisation Failed 错误的人，请阅读此内容。

问题是 Vista 有一些与设置 Program Files 文件夹权限相关的安全功能。基本上，即使您是管理员，也无法更改某些文件夹（如 Program Files 和 Windows 文件夹本身）的权限。这会导致 initdb 无法创建某些文件夹和数据库集群。这对您来说意味着您需要将 PostgreSQL 安装在 Program Files 之外的另一个文件夹中。

顺便说一句，如果您在第一次安装时忘记了 Postgres 帐户密码，只需在 Vista 中打开命令提示符（如果您不知道如何操作，请谷歌）。然后输入命令“net user”。您将在您的计算机上看到一个用户列表。找到 Postgre 的帐户。它通常是“postgres”。然后，您需要通过键入“net user postgres new_password”来更改其密码，其中 new_password 是……嗯，该帐户的新密码。在安装过程中您将需要该 postgres 帐户。但是，您需要管理员权限才能进行此更改。

首先，卸载所有失败的安装。使用控制面板或安装文件夹中的 PostgreSQL 安装程序。

在安装过程中，系统会提示您选择要安装程序的位置。只需在另一个地方选择一个位置。像“C:\PostgreSQL”或类似的东西。它甚至可能在您的桌面上。但不在程序文件中。不在 Windows 文件夹内。然而，这并不容易。忍受我。

安装后，您仍然会看到该死的错误消息（或发生非致命错误）。不要绝望！（对于 Windows 高级用户，我们只是在新的 PostgreSQL 安装文件夹上为 Postgres 帐户分配完全控制权限）。对于其他用户，如果您不知道如何操作，请继续阅读。

转到刚刚安装 PostgreSQL 的位置。在这种情况下，C: 驱动器。在那里，右键单击文件夹（通常称为 PostgreSQL），然后转到属性 - 安全选项卡。单击编辑按钮。您现在将看到一些用户名和其他内容。单击添加按钮。在“输入要选择的对象名称”框中，输入“postgres”并按检查。Postgres 的用户帐户应该出现在那里。单击确定。

现在从“组或用户名”框中，选择 Postgres 帐户。在下面的窗口中，有很多复选框，在允许列中为其分配“完全控制”权限。请注意，如果您不想允许完全控制，只需给它读/写。但我只是继续前进并完全控制它。（我又累又恼。“世界最先进的开源数据库”安装失败！）。单击确定并稍等片刻以应用权限。

然后，只需重新安装即可。不要卸载任何东西。只需再次运行设置。它会说 PostgreSQL 安装文件夹已经存在和其他东西。只需单击下一步，直到安装完成。如果您看到“文件无法复制”错误，请在需要时单击“忽略”按钮。

而已。PostgreSQL 现在应该在 Vista 上启动并运行。希望它对您也有用，就像对我一样，并且我的指南对任何人都有帮助。如果它有效，或者如果您有其他解决方案，请告诉我们。谢谢阅读！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-26T00:32:33.987

您的 Windows 安装有点麻烦，您需要重新注册 VBScript 引擎才能运行安装程序。

**编辑**：我是盲人，帖子作者已经尝试过了。

看：

[http://wiki.postgresql.org/wiki/Running_%26_Installing_PostgreSQL_On_Native_Windows#The_installer_exits_with_a_runtime_installation_error.3F](http://wiki.postgresql.org/wiki/Running_%26_Installing_PostgreSQL_On_Native_Windows#The_installer_exits_with_a_runtime_installation_error.3F)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-30T21:52:16.697

我在尝试在 Windows 7 x64 机器（未加入域）上安装 PostgreSQL 9.3.5-3 时遇到了同样的问题，该文件夹是在根目录上创建的，对所有人具有完全访问权限。问题是通过不在我的密码中使用 ä 解决的，因此请避免在密码中使用非英文字符。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-26T00:22:35.643

此消息仍然出现在 Postgres v9.3.1.1 中。

对我来说，问题是在*“*管理员”帐户下运行安装程序。这行不通。*在管理员*帐户下运行它，避免使用内置的“管理员”帐户。

我真的不知道它通常叫什么，但它是全新安装中已经存在的那个；无法更改为标准用户的用户；其配置文件存储在`C:\Users\Administrator`. 事实证明，使用这个帐户是个坏主意；艰难地学会了它。

（Windows Server 2008 R2 64 位）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-11T06:35:27.877

嘿伙计们，答案很简单，只需将 postgresql 安装在程序文件之外的另一个文件夹中即可。它提示一个非致命错误并继续安装...

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-03T09:23:57.023

我已经在 Windows Server 2003 和 postgres 9.2.9-3 上解决了同样的问题，方法是预先创建安装目录，并授予“用户”组对其的完全访问权限。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-27T20:25:33.633

为这个问题苦苦挣扎了好几天。终于得到EDB团队的帮助我的问题通过以下步骤得到解决：

1）打开命令提示符并转到以下目录：

`cd "C:\Program Files\PostgreSQL\10\bin"`

2）一旦进入此`"C:\Program Files\PostgreSQL\10\bin"`目录，请执行以下命令：

`.\initdb.exe -D "C:\Program Files\PostgreSQL\10\data"`

3) 在此命令结束时，您将被提升为执行 pg_ctl 命令以启动 Postgres 集群。请执行命令，一旦你在服务器启动时收到一条消息，你就可以使用 Postgres 数据库了。

注意：您安装的任何版本都不是 10 个用户。如果`pg_ctl`第三步的命令在目录中运行后出现错误`\bin`，则尝试在`\data`目录中运行。完成上述过程后重新运行安装程序。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-05-06T03:09:49.177

答案很简单，将下载的 .exe 文件移动到其他文件夹。例如：c:\postgres 并尝试安装它。

您的问题是由于一些管理员权限问题

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-07-05T06:31:45.117

导致安装失败的原因似乎有很多。

就我而言，我使用的是 Windows 10 家庭版，它没有高级用户组控制，所以上面的很多解决方案都不适合我。我想这就是安装失败的原因。

我所做的只是使用 BigSQL 的安装程序而不是 EnterpriceDB 的安装程序，

[在posgresql下载中心](https://www.postgresql.org/download/windows/)选择第二个安装程序

或者直接访问[BigSQL](https://www.openscg.com/bigsql/postgresql/installers.jsp/)。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-14T09:54:10.053

经过一番挣扎，我遇到了这个帖子。我又挣扎了一段时间，我想我终于在这篇文章中我的前辈的所有宝贵意见的帮助下弄明白了。

**我的情况**

*   现在是 2018 年 11 月。
*   根据 postgresql.org 的建议，来自 EnterpriseDB 的 PostgreSQL 11.1 Winodws-x64
*   尝试在 Windows 10（家庭版和专业版）上安装

我尝试了几个星座并将过程归结为：

**预安装**

*   卸载任何失败的安装。
*   将本地用户“postgres”（小写为我工作）添加到您的计算机，分配一个简单的密码和管理权限。不惜一切代价避免使用特殊字符，只使用英文字母（大写和小写）和数字。
*   在计算机上的“C:\Program Files”或 Windows 文件夹之外添加一个文件***夹***。我选择了 C:\PostgreSQL
*   将上述文件夹的完全控制权分配给 postgres 帐户。

**安装**

*   运行安装程序（在我的例子中是 postgresql-11.1-1-windows-x64.exe）
*   提示时使用上述密码和文件夹（不是默认文件夹）

**安装后**

*   出于安全原因，您现在应该为 windows 用户“postgres”分配一个正确的密码，并从该帐户中删除管理权限。
*   通过运行 pgAdmin 并连接到您的服务器来测试您的安装。但是，您需要连接到服务器的 postgres 用户的密码仍然是您之前使用的简单密码。您可以在 pgAdmin 中更改它，方法是选择左侧的 postgres 数据库，选择 Tools -> Query Tool 并键入`ALTER USER postgres WITH PASSWORD '4wligzo748o$%&';`或其他内容。使用闪烁符号或 F5 执行。

但也许这完全是错误的，您应该使用 postgreSQL 服务器运行 linux vm。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-05-16T20:07:09.820

尝试在我的公司计算机（运行 Windows 7 的 PC）上安装时遇到了同样的问题。如果您不是计算机的管理员，则需要将其安装在您的个人“用户”文件夹中（而不是根目录下的“程序文件”文件夹中）。

**如果您仍然无法访问 Postgres**：

在“用户”文件夹下安装它后，使用“运行”程序并输入“services.msc”并按 Enter。在弹出的窗口中，转到您的 postgres 安装，右键单击并转到“属性”。在“登录”选项卡中，选择“本地系统帐户”，然后返回“常规”选项卡并单击“开始”。它应该在那之后启动。

在此之后，我能够运行“pgAdmin”并访问数据库（在输入我在安装过程中使用的密码后）。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-06T08:52:51.157

我知道这不是解决方案，而是安装 32 位 Postgres，对我有用

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-09-14T04:16:44.150

我解决这个问题的最简单方法是：

1.- 如果您已经安装，请卸载

2.-删除所有安装失败的文件

3.- 以安全模式启动 Windows

4.- 在安全模式下运行安装程序（它会弹出警告但忽略）并重新启动

就是这样，重新启动时服务运行正常，一切正常

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-08-20T16:09:03.097

我今天在windows 10上安装postgres 9.6.19时也遇到了同样的问题。解决方法：安装路径和windows路径变量都不能包含空白！在安装程序日志文件的末尾附近（在 wondows %temp% 目录中找到，名称类似于 bitrock_installer_16156.log）我发现：

> 脚本标准错误："\UnxUtils\usr\local\wbin\";"C:\Program" kann syntaktisch an dieser Stelle nicht verarbeitet werden。

我设置的安装目录以及我的 Windows %PATH% 变量包含在哪里

```
C:\Program Files\ 
```

**解决方法：** 以管理员身份打开命令提示符并键入：

```
set path=C:\WINDOWS\system32
PostgreSQL-9.6.10-1-win64-bigsql.exe 
```

然后当然选择不包含空白的路径。那是为我做的。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-09-05T23:29:56.173

1.  检查服务：如果有任何与 postgres 相关的文件夹，请停止它，并更改为禁用模式。
2.  检查 regedit: HKEY_LOCAL_MACHINE, HKEY_CURRENT_USER -> 软件 -> 删除 postgres 文件夹（如果存在）。
3.  在系统环境变量：TEMP 路径位置中，删除用户和系统的 TEMP 文件夹。并将 TEMP 重命名为 TEMP1 或其他东西..
4.  在系统环境变量中：删除 postgres 的路径（如果存在）。
5.  现在将 postgres.exe 文件的位置更改为另一个驱动器。
6.  重启系统
7.  然后运行 ​​postgres.exe
8.  为 postgres 创建一个新的安装目录并将 /data 放在外面。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-03-08T18:09:30.893

我在尝试在 Windows 7 32 位机器上安装 PostgreSQL 9.6.2 时遇到了同样的问题，但我得到了解决方案，首先卸载已安装的 postgres，然后从“c”驱动器中删除 postgres 文件夹，从临时文件中删除条目它位于“C:\Users\AppData\Local\Temp”中。然后再次安装成功安装的 postgres 9.6.2。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-05-05T21:46:13.017

我遇到了一个问题，即 Windows 上带有空格的用户名无法安装 postgres。

去测试：

*   重新安装 Windows 10 家庭版（已恢复）
*   创建一个没有空格的用户帐户
*   Postgres 安装成功

非常令人沮丧...

# javascript - 砖石图像奇怪地出现。

> ID：11656413
> 
> 赞同：0
> 
> 时间：2012-07-25T18:39:35.617
> 
> 标签：javascript, jquery, html, web, jquery-masonry

这不是关于图像重叠的问题，而是出现乱序的问题。

我有一个应用程序，当您搜索给定游戏时，它会返回类似游戏的列表。问题是，当你搜索一个没有被查过的游戏时，它会以奇怪的顺序吐出它们，如果你立即再次进行搜索，它会以正确的顺序吐出它们。

我有这段代码（应该是相关的）：

```
$container.imagesLoaded( function(){
        $container.animate({ opacity:1});
        $container.masonry({
            itemSelector: '.box',
            columnWidth: 1,
            isAnimated: !Modernizr.csstransitions
        });
    });

for ( var i=0; i < len; i++ ) {
                    item = balls();
                    items.push( item ); 
                }
                var $items = $( items.join('') );
                //Load up the initial boxes. 
                $items.imagesLoaded(function(){
                  $container
                    .append( $items ).masonry( 'appended', $items, true );
                });

function balls(){
    $iterator -= 1;
    if($iterator < 0){
        var $boxes = $( '<div class="box">No more games!</div>' );
        $container.append( $boxes ).masonry( 'appended', $boxes, false );   
        return; 
    }
    return (
        '<div class="box" style="width:18%">'
        +'<p>'+$test[$iterator][1][2]['name']+'</p>'
        +'<img src="scripts/php/timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300"/>' //Replace this with the one below when timthumb is whitelisted
        +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
        +'</div>'
    );
} 
```

如果您在 上执行 console.log() `items`，那么您会看到它们是按顺序排列的，但是它们再次出现错误。

网址在这里： http: [//newgameplus.nikuai.net/](http://newgameplus.nikuai.net/)

你可以看到它在做什么。抱歉，我没有制作 jsfiddle，它是从数据库中提取游戏。

如果有什么不清楚的地方，我会尽力做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:53:59.313

我建议在 jquery append 函数中添加一个 masonry("reload") 函数。我认为它没有伤害，但我想知道为什么你的 columnWidth 是 1？如果我记得它应该是周围容器的倍数而不是 1？

# jsf - 从服务器事件更新 ui 组件

> ID：11656415
> 
> 赞同：0
> 
> 时间：2012-07-25T18:39:43.387
> 
> 标签：jsf, primefaces, jsf-2

当服务器进程完成或其他任何时候，我将如何更新 UI 组件？

可以\我应该

*   扩展 UI 组件并在其上注册某种 EventListener？
*   将 UI 组件绑定到支持 bean 中？
*   使用一些新的 PrimePush 功能？
*   别的东西？

如果有人能引导我朝着正确的方向前进，我将不胜感激。

**示例案例一**

> 服务器进程结束并更新数据库。
> 我想根据新信息使用新行自动更新 DataTable。
> 我不想轮询新数据。

**编辑**

我想从 EJB 无状态 Bean 更新 UI 组件（primefaces 数据表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:28:07.890

您没有提及您使用的是哪个版本的 primefaces，但您可以使用**[addpartialupdatetarget](http://www.primefaces.org/docs/api/3.2/)**从支持的 bean 更新组件。

```
RequestContext context = RequestContext.getCurrentInstance();
context.addPartialUpdateTarget("myForm:myComponent"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:45:10.437

您可以只使用 commandButton 的更新属性或您正在使用的任何其他属性。

像这样的东西应该工作

```
<p:dataTable value="#{backer.bean}" id="table">
  // columns with data
</p:dataTable>

<p:commandButton actionListener="#{backer.updateDB}" update="table" /> 
```

# applescript - Applescript获取不带扩展名的文件名

> ID：11656416
> 
> 赞同：4
> 
> 时间：2012-07-25T18:39:48.817
> 
> 标签：applescript

我有一个applescript，用户将在其中选择一个文件，我需要获取该文件的名称减去扩展名。

我在另一个网站上发现了一个帖子说这会起作用：

```
tell application "Finder"
    set short_name to name of selected_file
end tell 
```

但它也会返回扩展名。我怎样才能得到文件的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T00:25:44.647

您可以向**Finder**或**系统事件**询问*名称扩展名*并从全名中删除该部分。这也将避免名称中带有句点或扩展名可能不是*您*认为的那样的问题。

```
set someItem to (choose file)

tell application "System Events" to tell disk item (someItem as text) to set {theName, theExtension} to {name, name extension}
if theExtension is not "" then set theName to text 1 thru -((count theExtension) + 2) of theName -- the name part

log theName & tab & theExtension 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:07:45.497

这应该适用于包含句点和没有扩展名的文件名（但不能同时包含两者）。它返回具有多个扩展名的文件的最后一个扩展名。

```
tell application "Finder"
    set n to name of file "test.txt" of desktop
    set AppleScript's text item delimiters to "."
    if number of text items of n > 1 then
        set n to text items 1 thru -2 of n as text
    end if
    n
end tell 
```

`name extension`还返回具有多个扩展名的文件的最后一个扩展名：

```
tell application "Finder"
    name extension of file "archive.tar.gz" of desktop -- gz
end tell 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:45:02.063

这是获取文件名的脚本。

```
set filesFound to {}
set filesFound2 to {}
set nextItem to 1

tell application "Finder"
  set myFiles to name of every file of (path to desktop) --change path to whatever path you want   
end tell

--loop used for populating list filesFound with all filenames found (name + extension)
repeat with i in myFiles
  set end of filesFound to (item nextItem of myFiles)
  set nextItem to (nextItem + 1)
end repeat

set nextItem to 1 --reset counter to 1

--loop used for pulling each filename from list filesFound and then strip the extension   
--from filename and populate a new list called filesFound2
repeat with i in filesFound
  set myFile2 to item nextItem of filesFound
  set myFile3 to text 1 thru ((offset of "." in myFile2) - 1) of myFile2
  set end of filesFound2 to myFile3
  set nextItem to (nextItem + 1)
end repeat

return filesFound2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T21:14:24.627

该脚本使用 ASObjC Runner 来解析文件路径。在此处下载 [ASObjC Runner。](http://www.macosxautomation.com/applescript/apps/runner_vanilla.html)

```
set aFile to choose file
tell application "ASObjC Runner" to set nameS to name stub of (parsed path of (aFile as text)) 
```

# jquery - 当我将鼠标悬停在我的 div 上时，我不希望它影响具有同一类的所有 div？

> ID：11656425
> 
> 赞同：2
> 
> 时间：2012-07-25T18:40:23.040
> 
> 标签：jquery

当我将鼠标悬停在我的 div 上时，弹出窗口会像它应该那样淡入，但它也会影响具有相同类的所有其他 div。我只是想让它影响悬停在上面的 div。任何帮助，将不胜感激。谢谢！

```
$(document).ready(function() {
    $(".project").hover(function() {
        $('.caption').fadeToggle(1000);              
    });     
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:43:21.403

只需提供一个上下文：

```
$(".project").hover(function() {
    $(this).find('.caption').fadeToggle(1000);              
}); 
```

使用这种方法，jQuery 将查看当前`.project`元素并在该元素中查找类为`caption`;的后代元素。而不是查看整个文档。

# c++ - 不是全局命名空间的成员？

> ID：11656427
> 
> 赞同：1
> 
> 时间：2012-07-25T18:40:28.673
> 
> 标签：c++, windows, file-io

我有错误：

> 错误 C2039: 'read' : is not a member of '`global namespace'' and error C2661: 'Calc::SymString::read' : 没有重载函数从该行接受 3 个参数： if (::read(fd_sock, &size, 4) != 4)

这个错误和类似的错误在我的代码中出现了很多。有谁知道是什么问题？我正在使用 Windows Visual Studio 2010，并且正在从 Unix 迁移代码。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:06:51.600

read() 是 unistd.h 中定义的 UNIX 函数（在 LINUX 中）——我读过的所有文档都表明它不是标准的 C 函数。这可能是它在 UNIX 中编译但在 Windows 中不编译的原因。

在 UNIX`read()`中采用文件描述符，但在 Windows 中等效的构造是“句柄”。

您的程序中真的需要低级文件描述符 I/O 吗？您可以使用`fread`标准 C 函数吗？

[这篇 Microsoft 支持文章](http://support.microsoft.com/kb/99173)介绍了 Windows 中可用的文件句柄类型：

```
There are multiple types of file handles that can be opened using 
the Win32 API and the C Run-time:

   Returned Type  File Creation API      API Set
   ---------------------------------------------
   HANDLE         CreateFile()           Win32
   HFILE          OpenFile()/_lcreat()   Win32
   int            _creat()/_open()       C Run-time
   FILE *         fopen()                C Run-time 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T22:08:18.530

Microsoft 在`io.h`.

尝试包含该标题 - 您可能会收到一堆关于使用已弃用名称的警告（MS 更希望您使用该名称`_read()`）。如果是这样，您可能想要定义`_POSIX_`应该消除这些警告的宏。

# javascript - Facebook Javascript API 发送两个请求

> ID：11656429
> 
> 赞同：2
> 
> 时间：2012-07-25T18:40:33.590
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

在我的应用程序中，我有一个这样的功能：

```
getProfile = function() {
  FB.api('/me', function(response) {
    console.log(response);
  });
  return false;
}; 
```

它通过 JavaScript 从 Facebook Graph API 请求“我”对象，当我将它附加到常规链接的 onClick 事件或直接从控制台调用它时，它按预期工作，但是当我尝试从 Facebook 调用它时登录按钮：

```
 <fb:login-button onlogin="getProfile()">
    Get Profile
  </fb:login-button> 
```

只有当我退出 Facebook 并随后通过对话框登录时，我才会得到预期的响应；如果我在已经登录时单击按钮，我会得到：

![两个相同的请求](../Images/e986f52971cd564b722763838341f47e.png)

如果我将响应推送到浏览器：

```
getProfile = function() {
  FB.api('/me', function(response) {
    console.log(response);
    var
      profile = document.getElementById('profile'),
      p = document.createElement('p');
    p.innerHTML = response.first_name;
    profile.appendChild(p);
  });
  return false;
}; 
```

当然，我得到两个段落，其中有我的名字。

谁能发现我做错了什么？到目前为止，我的谷歌搜索让我确信这与 SDK 处理登录事件的方式（在每次页面加载时触发）有关，但我无法弄清楚我应该如何在应用程序代码中解释这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:57:04.610

我相信当您加载页面时会触发 onlogin 事件，因为您已登录 Facebook。然后，当您的用户单击按钮时，它也会触发事件。如果您一开始没有登录，则 onlogin 事件不会在加载时触发。

更新：为了避免这种情况，除非在基于 FB.getLoginStatus 方法的 if 语句中，否则不要将 getProfile 挂钩到 onlogin事件[http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)放，如果您已登录，请不要附加 onlogin 事件，否则在 onlogin上执行 FB.Event.subscribe [http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)事件和方法将在用户通过 XFBML 生成的登录按钮登录时运行。

```
FB.getLoginStatus(function(response) {
if (response.status === 'connected') {
  //print the response data into the paragraph here
} else if (response.status === 'not_authorized') {
  // the user is logged in to Facebook, 
  // but has not authenticated your app
  FB.event.subscribe( 'auth.login', function(){
    getProfile();
  });
} else {
  // the user isn't logged in to Facebook.
}
}); 
```

# javascript - onclick 分配与初始化分配差异

> ID：11656430
> 
> 赞同：0
> 
> 时间：2012-07-25T18:40:37.600
> 
> 标签：javascript, jscolor

**更新：**缩小范围，进一步消除了 aspx JavaScript 参考。所以归根结底......如果我取消注释 init 中的 1 行并删除它的行为符合预期的点击事件。但是，如果我将赋值语句放在我的按钮单击事件中，我会得到不正确的行为，如下所示。

```
<script type="text/javascript">
    var pageDefault = {
        btn1: document.getElementById('Button1'),
        tdtarget: document.getElementById('targetTD'),
        bg: document.getElementById('txtBGColor'), //jscolor textbox
        init: function() {
            //pageDefault.bg.value = pageDefault.tdtarget.getAttribute('bgcolor'); 
            this.btn1.onclick = function() {
                pageDefault.bg.value =
                    pageDefault.tdtarget.getAttribute('bgcolor');
            }
        }
    }
    pageDefault.init(); 
```

我正在使用 jscolor。我经历了两种不同的行为，其中一种我不明白。

我要做的就是从 a 的`<TD>`元素中获取背景颜色，`<Table>`并在 jscolor 文本框中显示颜色值。

![在此处输入图像描述](../Images/07921b5d4dfc5476ff5a8372fbb487b1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:20:07.430

```
pageDefault.bg.value = pageDefault.tdtarget.getAttribute('bgcolor').replace(/#/, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:36:37.843

在他们的网站上找到它。我之前确实看过它，但只是不得不把它缩小到这么远。感谢您的反馈和时间（视图）。

```
pageDefault.bg.color.fromString('ffcc99'); 
```

# php - 跨多个页面存储选择/下拉值

> ID：11656431
> 
> 赞同：0
> 
> 时间：2012-07-25T18:40:39.657
> 
> 标签：php, javascript

我正在制作一个新网站来学习编码，并正在为搜索应用程序制作每页的结果。所以基本上，我有一个看起来像这样的选择/下拉列表：

```
 <form name='form1' method='post'>
       <font style="font-size:12px;">Results per Page:</font>
       <select name='select' onChange='document.form1.submit()'>
              <option value='10'<?php if($pagesnum == 10) {echo "selected='selected'";} ?>>10</option>
              <option value='15'<?php if($pagesnum == 15) {echo "selected='selected'";} ?>>15</option>
          <option value='20'<?php if($pagesnum == 20) {echo "selected='selected'";} ?>>20</option>
          <option value='25'<?php if($pagesnum == 25) {echo "selected='selected'";} ?>>25</option>
      </select>
</form> 
```

这只是在每页获取用户所需的结果数量，一旦他们更改选择/下拉菜单，页面就会刷新。然后我将每页数据的用户结果存储到一个名为 $pagesnum 的变量中，或者如果未设置每页结果，只需将 $pagesnum 设置为 10，如下所示（它位于页面的最顶部：

```
if ($_REQUEST['select'] != null){ $pagesnum = $_REQUEST['select'];}else{$pagesnum = 10;} 
```

然后我，在我的分页中，（如果你需要，我可以在这里发布）使每页的总结果或 $totalpages 等于 $pagesnum ，如下所示：

```
$total_pages = $pagesnum; 
```

我的问题是我有一个细化搜索，它建议链接到诸如 search.php?q=A+Link+That+is+a+different+page 之类的页面的相关搜索词，并且 $pagesnum 的值丢失了。如何获取用户设置为 $pagesnum 的内容并将其设置为多个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:46:12.140

请看一下[PHP Sessions](http://php.net/manual/en/features.sessions.php)，这里有一个例子说明你如何在你的情况下应用它。

```
session_start();
if(!empty($_REQUEST['select'])){
  $pagesnum = $_REQUEST['select'];
  $_SESSION['pagesnum'] = $pagesnum;
}else{
  $pagesnum = $_SESSION['pagesnum'];
} 
```

你可以使用上面的代码而不是这个

```
if ($_REQUEST['select'] != null){ $pagesnum = $_REQUEST['select'];}else{$pagesnum = 10;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:57:28.977

如果您有多选下拉菜单，您可以考虑在会话中存储数组

否则只有一个会话变量就足够了

[http://www.phpriot.com/articles/intro-php-sessions/7](http://www.phpriot.com/articles/intro-php-sessions/7)

# java - 在 Java/Groovy 中读取多部分/混合响应

> ID：11656436
> 
> 赞同：3
> 
> 时间：2012-07-25T18:40:56.487
> 
> 标签：java, groovy, httpresponse, apache-commons-httpclient

我收到了`"multipart/mixed"`对需要解析的 http 请求的响应。响应的一部分是我需要保存到磁盘的 pdf 文件。有没有图书馆可以为我做这件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:45:21.783

这是我在 groovy 中所做的。需要的java邮件库：

```
//... get reader from response, can use response.success callback in http.request
ByteArrayDataSource ds = new ByteArrayDataSource(new ReaderInputStream(reader), "multipart/mixed");
MimeMultipart multipart = new MimeMultipart(ds);
BodyPart part = multipart.getBodyPart(1);
file = new File('/../../path/filename.pdf')
file << part.content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:06:47.257

您是否尝试过从请求中检索它？

```
 CommonsMultipartFile file = request.getFile('myFile') //File
 def offerId = params.offerId //Standard Param
 def index = params.idx //Standard Param 
```

这对应于如下表单输入：

```
<input class="invDocUpload" id="invFileUpload" type="file" name="myFile" size="40"/> 
```

# c# - List 的协议缓冲区序列化

> ID：11656439
> 
> 赞同：3
> 
> 时间：2012-07-25T18:41:08.440
> 
> 标签：c#, .net, protobuf-net

以下代码有什么问题？

```
MyList l = Serializer.DeepClone(new MyList { "abc" });
Console.WriteLine(l.Count == 1); 
```

在哪里：

```
[ProtoContract]
public class MyList : List<String>
{
} 
```

预期：真，实际：假。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:18:35.380

如果您想立即修复，只需删除`[ProtoContract]`; 列表具有内置行为，不需要标记为合同。

*在这种情况下，合同定义似乎*优先于它是一个列表这一事实；我需要仔细查看更改此设置是否会导致任何不需要的副作用。

工作示例：

```
public class MyList : List<string>{}

[Test]        
public void ListSubclassShouldRoundTrip()
{
    var list = new MyList { "abc" };
    var clone = Serializer.DeepClone(list);
    Assert.AreEqual(1, clone.Count);
    Assert.AreEqual("abc", clone[0]);
} 
```

当前损坏的示例：

```
[ProtoContract]
public class MyContractList : List<string> { }

[Test]
public void ContractListSubclassShouldRoundTrip()
{
    var list = new MyContractList { "abc" };
    var clone = Serializer.DeepClone(list);
    Assert.AreEqual(1, clone.Count);
    Assert.AreEqual("abc", clone[0]);
} 
```

* * *

更新; 但是，看起来这*应该可以*工作，因为当列表是某个类型的**成员**时它可以正常工作；仅当列表是图中**最外层**的类型时才会出现问题。示例（所有测试通过）：

```
[ProtoContract]
public class ListWrapper
{
    [ProtoMember(1)]
    public List<string> BasicList { get; set; }
    [ProtoMember(2)]
    public MyList MyList { get; set; }
    [ProtoMember(3)]
    public MyContractList MyContractList { get; set; }
}

[Test]
public void TestBasicListAsMember()
{
    var obj = new ListWrapper { BasicList = new List<string> { "abc" } };
    var clone = Serializer.DeepClone(obj);
    Assert.IsNull(clone.MyList);
    Assert.IsNull(clone.MyContractList);
    Assert.AreEqual(1, clone.BasicList.Count);
    Assert.AreEqual("abc", clone.BasicList[0]);
}

[Test]
public void TestMyListAsMember()
{
    var obj = new ListWrapper { MyList = new MyList { "abc" } };
    var clone = Serializer.DeepClone(obj);
    Assert.IsNull(clone.BasicList);
    Assert.IsNull(clone.MyContractList);
    Assert.AreEqual(1, clone.MyList.Count);
    Assert.AreEqual("abc", clone.MyList[0]);
}

[Test]
public void TestMyContractListAsMember()
{
    var obj = new ListWrapper { MyContractList = new MyContractList { "abc" } };
    var clone = Serializer.DeepClone(obj);
    Assert.IsNull(clone.BasicList);
    Assert.IsNull(clone.MyList);
    Assert.AreEqual(1, clone.MyContractList.Count);
    Assert.AreEqual("abc", clone.MyContractList[0]);
} 
```

* * *

更新更新：这是一个微妙的错误，由列表的许多不同行为方式引起；在列表作为具有 getter 和 setter 的成员的情况下，它有一些逻辑说“如果我们得到列表，并且它不是 null，不要调用 setter - 只需添加”。但是，处理列表类型的代码意外地启用了该模式。所以发生的事情是：它会反序列化数据，然后宣布“你可以丢弃这个值”——它尽职尽责地做到了。然后“从不返回 null”代码只会创建一个新列表，然后返回*它*。烦人的是，只有一条线来修复，而且没有副作用；固定在 r555 中。

每当有人卡住时，我都会[添加一个集成测试；所以这不应该再次发生](http://code.google.com/p/protobuf-net/source/browse/trunk/Examples/Issues/SO11656439.cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:21:41.863

我自己刚刚完成了一个项目，当时我正在使用 Protobut 并在项目中使用了大约 30 个不同的 Protocontracts 并刚刚审查了这个，因为我认为我做过类似的事情，但事实上我从未直接做过这个特殊案例。

所以我只是把它作为一个测试，但你也许可以将它用于你的目的。（是的，它是 VB，但我目前在 VB 与 C# 的对比中更快 [但我快到了]）

结果不是我所期望的，所以我在这里发布了我的测试。也许您可以实现带有内部列表的类（暂时让您通过）。

> Mylist ProtoBuf 错误
> 
> Mylist BinaryFormatter True
> 
> Mylist2 ProtoBuf 真
> 
> MyListI ProtoBuf 错误
> 
> MyListThing ProtoBuf 错误

```
Imports System.IO

Imports ProtoBuf

Public Class Entry
    Shared Sub Main()
        Dim l As New MyList
        l.Add("abc")
        Dim newList As MyList

        Using ms As New MemoryStream
            Serializer.Serialize(Of MyList)(ms, l)
            ms.Seek(0, SeekOrigin.Begin)
            newList = Serializer.Deserialize(Of MyList)(ms)
        End Using
        Console.WriteLine("Mylist ProtoBuf {0}", newList.Count = 1)

        Dim f As New System.Runtime.Serialization.Formatters.Binary.BinaryFormatter
        Using ms As New MemoryStream
            f.Serialize(ms, l)
            ms.Seek(0, SeekOrigin.Begin)
            newList = CType(f.Deserialize(ms), MyList)
        End Using

        Console.WriteLine("Mylist BinaryFormatter {0}", newList.Count = 1)

        Dim l2 As New MyList2
        l2.Items.Add("abc")
        Dim newList2 As MyList2

        Using ms As New MemoryStream
            Serializer.Serialize(Of MyList2)(ms, l2)
            ms.Seek(0, SeekOrigin.Begin)
            newList2 = Serializer.Deserialize(Of MyList2)(ms)
        End Using
        Console.WriteLine("Mylist2 ProtoBuf {0}", newList2.Items.Count = 1)

        Dim li As New MyListI
        li.Add(5)
        Dim newListi As MyListI

        Using ms As New MemoryStream
            Serializer.Serialize(Of MyListI)(ms, li)
            ms.Seek(0, SeekOrigin.Begin)
            newListi = Serializer.Deserialize(Of MyListI)(ms)
        End Using
        Console.WriteLine("MyListI ProtoBuf {0}", newListi.Count = 1)

        Dim lh As New MyListThing
        lh.Add(New Thing() With {.Message = "abc"})
        Dim newListh As MyListThing

        Using ms As New MemoryStream
            Serializer.Serialize(Of MyListThing)(ms, lh)
            ms.Seek(0, SeekOrigin.Begin)
            newListh = Serializer.Deserialize(Of MyListThing)(ms)
        End Using
        Console.WriteLine("MyListThing ProtoBuf {0}", newListh.Count = 1)
    End Sub
End Class

<ProtoContract(), Serializable()>
Public Class MyList
    Inherits List(Of String)
End Class

<ProtoContract()>
Public Class MyList2
    Public Sub New()
        Items = New List(Of String)
    End Sub
    <ProtoMember(1)>
    Public Property Items As List(Of String)
End Class

<ProtoContract()>
Public Class MyListI
    Inherits List(Of Integer)
End Class

<ProtoContract()>
Public Class MyListThing
    Inherits List(Of Thing)
End Class

<ProtoContract()>
Public Class Thing
    <ProtoMember(1)>
    Public Property Message As String
End Class 
```

# python - 为什么这是一个字符串而不是整数？两行代码看起来相似但行为不同

> ID：11656444
> 
> 赞同：-4
> 
> 时间：2012-07-25T18:41:28.780
> 
> 标签：python, json

我正在从 wunderground API 和一行中提取此代码的数据：

```
sunsethour = parsed_json ['moon_phase']['sunset']['hour']
sunsetminute = parsed_json ['moon_phase']['sunset']['minute']
print "\nSunset is at: %s:%s" % (sunsethour, sunsetminute)
hightide = parsed_json ['tide']['tideSummary']['date']
print (hightide)
f.close() 
```

虽然日落时间打印得很好，但高潮时间会产生错误“列表索引必须是整数，而不是 str”

对python非常陌生，只是想找到我的方式。请对我放轻松，这里的一些对话似乎很吓人。

**编辑**这里是json：[http ://api.wunderground.com/api/a66b1087ab1e51a5/geolookup/conditions/astronomy/tide/q/MA/Boston.json](http://api.wunderground.com/api/a66b1087ab1e51a5/geolookup/conditions/astronomy/tide/q/MA/Boston.json)

截断示例：

```
{
  "tide": {
    "tideInfo": [
      {
        "tideSite": "Chelsea St. Bridge, Chelsea River, ...", 
        "lon": "-71.0233", 
        "units": "feet", 
        "tzname": "America/New_York", 
        "lat": "42.3867", 
        "type": "tide"
      }
    ], 
    "tideSummaryStats": [
      {
        "minheight": 99.0, 
        "maxheight": -99.0
      }
    ], 
    "tideSummary": []
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:48:46.110

在没有看到源 JSON 的情况下，这是迄今为止我能给出的最好的：

```
hightide = parsed_json ['tide']['tideSummary']['date'] 
```

这假设根元素和两个子元素都是字典，可以通过字符串键访问。显然，这些数据元素之一是列表而不是字典：

```
parsed_json['tide']  # could be a list of tides?
parsed_json['tide']['tideSummary'] # could be a list of tide summaries?
parsed_json['tide']['tideSummary']['date'] # could be a list of dates? 
```

所有这些都必须产生字典。查看这些值，看看它们中的任何一个是否实际上是列表：

```
aList = ['1','2','3']
aDict = {'1':1, '2':2, '3':3}

>>> aList['1']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: list indices must be integers, not str

>>> aDict['1']
1 
```

**更新**

从您对 json 结构的更新来看，这`parsed_json ['tide']['tideSummary']`就是导致您出现问题的原因。的值`tideSummary`是一个列表，尽管您的数据是空的，所以我不确定里面是什么。

如果它是具有日期值的摘要字典列表，那么您可以这样做：

```
# assume:  parsed_json['tide']['tideSummary'] = [{"date":"value"}]

for summary in parsed_json['tide']['tideSummary']:
    print summary['date'] 
```

...再次，这假设它们是一个列表`{"date":"value"}`

# iphone - ios5中的谷歌方向api请求无效

> ID：11656445
> 
> 赞同：2
> 
> 时间：2012-07-25T18:41:29.610
> 
> 标签：iphone, ios, google-api, mapkit, google-directions-api

这是我的请求： [https](https://maps.googleapis.com/maps/api/directions/json?origin=49.276951,-123.128559&destination=49.277874,-122.912404&mode=transit&sensor=false) ://maps.googleapis.com/maps/api/directions/json?origin=49.276951,-123.128559&destination=49.277874,-122.912404&mode=transit&sensor=false 结果是：{ "routes" : [ ]，“状态”：“INVALID_REQUEST”}

以前可以用，今天用的时候就不行了。这是为什么？注意：当我将其更改为 mode=walking 时它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:12:41.787

[https://maps.googleapis.com/maps/api/directions/json?origin=49.276951,-123.128559&destination=49.261566,-123.138399&mode=transit&sensor=false&departure_time=1346197500](https://maps.googleapis.com/maps/api/directions/json?origin=49.276951,-123.128559&destination=49.261566,-123.138399&mode=transit&sensor=false&departure_time=1346197500)

上述请求有效。我们可以通过添加离开时间参数来解决这个问题，因为谷歌可能会更新方向api并将出发时间设置为强制参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:19:38.053

这里的问题可能是没有公共交通可以将您从您的出发地带到您的目的地，因此请求无效..

# ruby - 在排序之前和之后索引具有重复元素的数组

> ID：11656449
> 
> 赞同：1
> 
> 时间：2012-07-25T18:41:37.477
> 
> 标签：ruby, algorithm

这是基本问题：我有一个可能包含重复元素的整数数组。我需要知道每个元素的索引，但是当我对数组进行排序时，每当我从新数组中选择一个元素时，我都希望能够从原始数组中引用相同的元素。

我正在寻找问题的解决方案，或者可能是我正在采取的方法的解决方案。

这是一个数组

```
a = [1, 2, 3, 4, 3, 5, 2] 
```

有两个 2 和两个 3，但如果我使用第一个`2`（从左起），我想使用索引 1，如果我使用第二个`2`，我想使用索引 6。所以我使用一个辅助数组来允许我这样做：

```
helper = [0, 1, 2, 3, 4, 5, 6] 
```

我将对其进行迭代并使用它来访问`a`.
我可以用 来完成这个`each_with_index`，但是当我对数组进行排序时问题就开始了。

现在我有一个排序顺序

```
sort_order = [2, 4, 1, 5, 3] 
```

我用sort_order`sort_by`来排序`a`，产生

```
sorted_a = [2, 2, 4, 1, 5, 3, 3] 
```

您可以假设输入中的所有元素都存在`sort_order`以避免`sort_by`异常。

现在的问题是我的`helper`数组应该更新以匹配新位置。每个元素的排序方式应与排序方式相同`a`，因为不清楚新数组中的前 2 是在索引 1 处还是在原始数组的索引 6 处。

所以我的新辅助数组可能看起来像

```
new_helper = [1, 6, 3, 0, 5, 2, 4] 
```

`new_helper`因此，如果我采用这种方法，在给定原始数组和排序顺序的情况下，我将如何生成数组？

也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:16:04.200

我建议先用辅助数组压缩原始数组，根据来自原始数组的组件对压缩数组进行排序，然后解压缩它们（不幸的是，这种方法不存在，但你可以转置）。或者您可以实现自己的排序逻辑，如 Hunter 所指出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:18:10.990

当您在主数组中交换时，您需要交换辅助数组中的值。

```
loop do
   swapped = false
   0.upto(list.size-2) do |i|
      if list[i] > list[i+1]
         list[i], list[i+1] = list[i+1], list[i] # swap values
         helper[i], helper[i+1] = helper[i+1], helper[i]; #swap helper values
         swapped = true
      end
   end
   break unless swapped
end 
```

**例子**

```
irb(main):001:0> def parallel_sort(list, helper)
irb(main):002:1> loop do
irb(main):003:2*    swapped = false
irb(main):004:2>    0.upto(list.size-2) do |i|
irb(main):005:3*       if list[i] > list[i+1]
irb(main):006:4>          list[i], list[i+1] = list[i+1], list[i] # swap values
irb(main):007:4>          helper[i], helper[i+1] = helper[i+1], helper[i]; #swap helper values
irb(main):008:4*          swapped = true
irb(main):009:4>       end
irb(main):010:3>    end
irb(main):011:2>    break unless swapped
irb(main):012:2> end
irb(main):013:1> return [list, helper]
irb(main):014:1> end
=> nil
irb(main):015:0> a = [3,2,1]
=> [3, 2, 1]
irb(main):016:0> b = ["three","two","one"]
=> ["three", "two", "one"]
irb(main):017:0> parallel_sort(a,b)
=> [[1, 2, 3], ["one", "two", "three"]]
irb(main):018:0> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:53:08.553

在循环内排序很少是一个好主意......如果你这样做，你可能会更好地使用treap（平均速度快，但很少有操作需要一段时间）或红黑树（相对较慢，但给出了相当一致的操作时间）。这些很像哈希表，除了它们没有那么快，并且它们使用树来保持元素按顺序存储。

无论哪种方式，为什么不使用一个既保存排序依据的值又保存辅助值的类呢？然后它们总是在一起，您不需要自定义排序算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T03:15:55.600

制作成对的原始数据和该数据的索引的列表。像这样：

```
a = [(1, 0), (2, 1), (3, 2), (4, 3), (3, 4), (5, 5), (2,6)] 
```

对该列表进行排序（按字典顺序，或者只是忽略该对的第二部分，除非随身携带）。每对中的第二项告诉您元素在原始数组中的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T04:02:48.383

既然你有`sort_order`，你的数组已经排序了，所以我们应该利用这个事实作为一个优势。我想出了这个简单的解决方案：

```
a = [1, 2, 3, 4, 3, 5, 2]
sort_order = [2, 4, 1, 5, 3]

# Save indices
indices = Hash.new { |hash, key| hash[key] = [] }
a.each_with_index { |elem, index| indices[elem] << index }

# Sort the array by placing elements into "right" positions
sorted = []
helper = []
sort_order.each do |elem|
  indices[elem].each do |index|
    sorted << elem
    helper << index
  end
end

p sorted
p helper 
```

该算法基于[计数排序](http://en.wikipedia.org/wiki/Counting_sort)的思想，我稍微修改它以保存索引。

# wcf - 谷歌浏览器连接到互联网

> ID：11656450
> 
> 赞同：0
> 
> 时间：2012-07-25T18:41:48.160
> 
> 标签：wcf, service

我在 .NET 中有一个 rest wcf web 服务。该服务在 localhost 上运行，但在 iis 服务器上不起作用。它显示：

```
Oops! Google Chrome could not connect to Ip address of my machine 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:16:17.137

最好的猜测是您有防火墙问题。并且您的防火墙阻止 chrome 连接到您的 IIS。

# ruby-on-rails - Ajax 更新 Rails 中的分页

> ID：11656451
> 
> 赞同：1
> 
> 时间：2012-07-25T18:41:49.630
> 
> 标签：ruby-on-rails, ajax, pagination, kaminari

我有一个页面，用户可以在其中输入消息，随后该消息将出现在页面下方。这些消息旨在进行分页。我正在尝试使用 Ajax 来做到这一点。目前我的 .js.erb 文件告诉页面以这种方式重新渲染部分：

`var submitted_message = $('<%= j(render 'shared/message_listing')%>'); $('#accordion').html(submitted_message);`

message_listing 部分包含一个分页语句，如下所示：

`<%paginate @messages, :params => { :anchor => "questions" })%>`

但是，当这行代码呈现时，会生成分页按钮，但与链接关联的 url 不正确。他们应该看起来像

`test.com/client/messages?page=3&pr_rep_id=1047460791&project_id=864121040#questions

在正常页面加载时，分页链接看起来像这样。除了 ajax 请求生成的分页 url 看起来像这样：

client/messages?authenticity_token=ro3YVz%2BnPR4JRC3GL7IVHRYA%2FcEYUjDVp27tDYukm7M%3D&message%5Bpr_rep_id%5D=1047460791&message%5Bproject_id%5D=864121040&message%5Btext%5D=a&page=2&utf8=#✓questions&page=2&utf8=

此链接以某种方式将我重定向到索引页面。有谁知道为什么 ajax 请求生成的分页看起来与应有的不同？所有的分页链接都是一样的，看起来他们没有任何页面参数。我该怎么做才能使这些链接正确？有没有办法破解我正在使用的 Kaminari 宝石？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:48:50.517

问题是我正在使用 POST 请求，其中 kaminari gem 正在传递诸如真实性密钥之类的参数。这类似于这个问题：

[将不需要的表单参数附加到分页链接](https://stackoverflow.com/questions/6327917/unwanted-form-parameters-being-appended-to-pagination-links)

# opengl-es - 如何在不受 glColor 影响的情况下渲染纹理？

> ID：11656452
> 
> 赞同：2
> 
> 时间：2012-07-25T18:41:58.847
> 
> 标签：opengl-es, opengl-es-1.1

我的纹理本身有一个透明的背景，我想按原样渲染它。

```
glEnable(GL_TEXTURE_2D);
glEnable(GL_BLEND);
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glPushMatrix();

glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

glTranslatef(x, y, 0.0f);
glColor4f(1.0f, 1.0f, 1.0f, 1.0f);
glVertexPointer(2, GL_FLOAT, 0, undoVertCoord);
glTexCoordPointer(2, GL_FLOAT, 0, undoTexCoord);
glBindTexture(GL_TEXTURE_2D, texUndo);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

问题出在`glColor4f`. 该功能似乎覆盖了纹理的透明度，使应该透明的部分变得不透明。但是如果我输入 alpha 值为 0 的 glColor4f，整个纹理就会变得透明。

那么，您可以渲染忽略glColor4f的纹理，按原样渲染纹理吗？或者以不影响阿尔法值的方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T19:12:30.147

你的`GL_TEXTURE_ENV_MODE`设置是什么？尝试将其设置为`GL_REPLACE`.

```
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE); 
```

# sql - 带有 COUNT() 的 SQL 嵌套选择语句

> ID：11656454
> 
> 赞同：3
> 
> 时间：2012-07-25T18:42:23.853
> 
> 标签：sql, oracle, count

我会尽我所能描述，但我很难全神贯注地解决这个问题，更不用说描述它了....

我试图在一个查询中选择多个结果以显示数据库的当前状态。我将第一列作为一种记录类型，将第二列作为第一列的子类别。然后，子类别链接到其下方的更多记录，按状态区分，形成更多列。我需要显示每个主类别/子类别组合，然后在后续列中显示该子类别下方的每个子状态的数量。我已经得到了它，以便我可以显示唯一的组合，但我不确定如何嵌套 select 语句，以便我可以从主查询中选择一个完全不同的表的计数。我的问题在于显示主类别和子类别，我可以从一个表中拉取，但我需要从不同的表中计数。

这就是我所拥有的。计数语句将替换为每个状态的计数：

```
 SELECT wave_num "WAVE NUMBER",
     int_tasktype "INT / TaskType",
     COUNT (1) total,
     COUNT (1) "LOCKED/DISABLED",
     COUNT (1) released,
     COUNT (1) "PARTIALLY ASSEMBLED",
     COUNT (1) assembled
FROM (SELECT DISTINCT
             (t.invn_need_type || ' / ' || s.code_desc) int_tasktype,
             t.task_genrtn_ref_nbr wave_num
        FROM sys_code s, task_hdr t
       WHERE     t.task_genrtn_ref_nbr IN
                    (SELECT ship_wave_nbr
                       FROM ship_wave_parm
                      WHERE TRUNC (create_date_time) LIKE SYSDATE - 7)
             AND s.code_type = '590'
             AND s.rec_type = 'S'
             AND s.code_id = t.task_type),
     ship_wave_parm swp
GROUP BY wave_num, int_tasktype
ORDER BY wave_num 
```

图片在这里：http: [//i.imgur.com/JX334.png](http://i.imgur.com/JX334.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:13:02.007

猜测一下，关于你的问题和甲骨文（我 - 不幸的是 - 从未使用过），希望它会给你一些想法。很抱歉完全搞乱了你编写 SQL 的方式，SELECT ... FROM (SELECT ... WHERE ... IN (SELECT ...)) 让我很困惑，所以我必须重组：

```
with tmp(int_tasktype, wave_num) as
(select distinct (t.invn_need_type || ' / ' || s.code_desc), t.task_genrtn_ref_nbr  
 from sys_code s 
 join task_hdr t 
   on s.code_id = t.task_type
 where s.code_type = '590' 
   and s.rec_type = 'S'  
   and exists(select 1 from ship_wave_parm p
              where t.task_genrtn_ref_nbr = p.ship_wave_nbr
                and trunc(p.create_date_time) = sysdate - 7))

select t.wave_num "WAVE NUMBER", t.int_tasktype "INT / TaskType",
       count(*) TOTAL,
       sum(case when sst.sub_status = 'LOCKED'    then 1 end) "LOCKED/DISABLED",
       sum(case when sst.sub_status = 'RELEASED'  then 1 end) RELEASED, 
       sum(case when sst.sub_status = 'PARTIAL'   then 1 end) "PARTIALLY ASSEMBLED",
       sum(case when sst.sub_status = 'ASSEMBLED' then 1 end) ASSEMBLED
from tmp t
join sub_status_table sst
  on t.wave_num = sst.wave_num
group by t.wave_num, t.int_tasktype
order by t.wave_num 
```

如您所见，我对带有子状态的表一无所知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:57:41.717

您可以使用内连接、分组和计数来获得结果：假设表如下：cat (1)--->(n) subcat (1)----->(n) subcat_detail。所以查询将是：

```
select cat.title cat_title ,subcat.title subcat_title ,count(*) as cnt from
cat  inner join sub_cat  on cat.id=subcat.cat_id
inner join subcat_detail  on subcat.ID=am.subcat_detail_id
group by cat.title,subcat.title 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:57:02.013

一般当你需要不同的计数时，你需要使用 CASE 语句。

```
select count(*) as total
   , case when field1 = "test' then 1 else 0 end as testcount
   , case when field2 = 'yes' then 1 else 0 endas field2count
FROM table1 
```

# php - 如何在 SQL 中编辑大量记录和图片

> ID：11656462
> 
> 赞同：-1
> 
> 时间：2012-07-25T18:42:42.713
> 
> 标签：php, sql

我有一张旧桌子，上面有数千个帖子。每个帖子都有 0-4 个图片链接，关于一个产品。现在我必须使用旧表中的数据来创建一个新表，并将图片移动到不同的文件夹中。我还必须为每张图片创建缩略图。

这项任务对我来说是一项艰巨的工作，运行时间很长。我应该只在一个 .php 文件中为此编写代码，而不是让服务器运行它，还是有一种特殊的技术。总而言之，您如何通过 php 处理巨大的表格和大量图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:46:46.693

PHP 可以在需要时动态创建它（即，当用户尝试访问旧表上的帖子时，PHP 会检测到它并自动将其处理到新位置），这样你只做你需要的，你只需要每次都做一次。您还可以将工作划分为更长的时间，这将为您节省一些服务器负载。

如果您有大量用户和/或高流量，则不建议使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:20:57.833

最后我发现了如何解决它，所以我分享了我使用的技术。

我用 PHP 编写了一个代码来操作数据库、移动图片并为每个帖子（表格中的行）创建缩略图。由于帖子数量众多，我无法正确运行它，因为它`max_execution_time`被设置为`30`，当然运行时间要大得多，所以我将任务分成 30 秒的部分。我在表中添加了一个新列（如果一行已处理，则存储在该列），并且始终只选择之前未处理的行。毕竟，我创建了一个每分钟运行这个 PHP 文件的 cron 作业。

我也可以使用命令行，因为没有时间限制，但我没有 SSH 访问权限。

# c - x86 转换为小写程序集

> ID：11656464
> 
> 赞同：-1
> 
> 时间：2012-07-25T18:43:11.137
> 
> 标签：c, x86, inline-assembly

该程序是将`char`指针转换为小写。我正在使用 Visual Studio 2010。

这是另一个问题，但阅读起来更简单，也更直接。

```
int b_search (char* token)
{
__asm
{
mov eax, 0          ; zero out the result
mov edi, [token]      ; move the token to search for into EDI 
MOV ecx, 0

LOWERCASE_TOKEN:            ;lowercase the token
OR [edi], 20h
INC ecx
CMP [edi+ecx],0
JNZ LOWERCASE_TOKEN
MOV ecx, 0 
```

在我的 OR 指令中，我试图将包含要标记的地址的寄存器更改为全部小写，我不断收到未处理的异常...访问冲突，并且没有括号，我没有收到错误但什么也没有小写。有什么建议吗？这是另一个问题的一些更大代码的一部分，但我把它分解了，因为我只需要这个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T14:38:50.683

问题是，像许多其他运算符一样，OR 运算符不允许两个内存或常量参数。这意味着： OR 运算符只能具有以下参数：

```
OR register, memory
OR register, register
OR register, constant 
```

第二个问题是，OR 必须将结果存储到寄存器，而不是内存。这就是为什么在设置括号时会出现访问冲突的原因。如果去掉括号，参数就ok了，但是你不把你的小写字母写到内存中，你打算做什么。所以使用另一个寄存器，将字母复制到，然后使用 OR。例如：

```
mov eax, 0          ; zero out the result
mov edi, [token]      ; move the token to search for into EDI 
MOV ecx, 0
LOWERCASE_TOKEN:            ;lowercase the token
MOV ebx, [edi]        ;## Copy the value to another register ##
OR ebx, 20h         ;## and compare now the register and the memory ##    
MOV [edi], ebx      ;##Save back the result ##    
INC ecx    
CMP [edi+ecx],0    
JNZ LOWERCASE_TOKEN    
MOV ecx, 0 
```

那应该工作^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:15:31.443

您的代码只能更改第一个字符（或 [edi], 20h） - EDI 不会增加。

编辑：找到[这个线程](http://forums.codeguru.com/archive/index.php/t-365958.html)的解决方法。尝试使用“dl”而不是 al。

```
; move the token address to search for into EDI
; (not the *token, as would be with mov edi, [token])

mov edi, token      

LOWERCASE_TOKEN:            ;lowercase the token
  mov al, [edi]
  ; check for null-terminator here !
  cmp al, 0
  je GET_OUT
  or al, 20h
  mov dl, al
  mov [edi], dl
  inc edi
jmp LOWERCASE_TOKEN
GET_OUT: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:53:06.773

我会将数据加载到寄存器中，在那里对其进行操作，然后将结果存储回内存。

```
int make_lower(char* token) {
    __asm {
        mov edi, token
        jmp short start_loop
    top_loop:   
        or al, 20h
        mov [edi], al
        inc edi
    start_loop:
        mov al, [edi]
        test al, al
        jnz top_loop
    }       
} 
```

但是请注意，您转换为大写字母时存在一些缺陷。例如，如果输入包含任何控制字符，它会将它们更改为其他字符——但它们不是大写的，并且将它们转换为的字符也不会是小写。

# android - 在android中处理onTouch事件

> ID：11656470
> 
> 赞同：0
> 
> 时间：2012-07-25T18:43:40.967
> 
> 标签：android, custom-controls, touch, scrollview

因此，我的班级中有一个 autoScrolling scrollView，我想拦截用户 onTouch 事件，以便在他们单击 scrollView 时停止滚动。我将如何实现这个功能？我知道它与覆盖 onTouchEvent 函数有关，但是当我覆盖它时它不起作用。

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_POINTER_1_DOWN:
            stopAutoScrolling();
        case MotionEvent.ACTION_POINTER_1_UP:
            startAutoScrolling();
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:53:17.443

我相信当您返回 true 时，您是在说您已经处理了 onTouchEvent。如果您希望发生正常的触摸行为，请执行以下操作：

返回 super.onTouchEvent(ev);

这样，您就可以调用本机代码，在您的情况下，本机代码将正常执行滚动。

# c# - 更新文本时组合框的验证事件

> ID：11656472
> 
> 赞同：0
> 
> 时间：2012-07-25T18:43:49.407
> 
> 标签：c#, winforms

我有一个组合框（好吧，实际上有一个 ToolStripComboBox），我想要一个在某些条件下触发的可取消事件：

*   失去焦点
*   获得焦点
*   从框中选择的项目
*   按 Enter

所以一个“正常”的验证事件，但是当我执行以下操作时

```
this.speedSelector.Validating 
+= new System.ComponentModel.CancelEventHandler(this.speedSelector_Validating); 
```

此事件仅在我尝试通过 [X] 关闭应用程序时触发。此外，当存在无效文本时，我无法离开应用程序，这可行，但如何在上述条件下触发该事件？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:06:52.477

您可能需要将初始值存储在某处（例如可能在控件的通用标签字段中）。

您可以验证任何事件的控件：SelectedIndexChanged、SelectionChanged、TextUpdate 等。

当控件获得或失去焦点时，控件中存储的值不应更改。

```
public Form1() {
  InitializeComponent();
  speedSelector.Tag = speedSelector.Text;
  speedSelector.SelectedIndexChanged += new System.EventHandler(this.speedSelector_Changed);
  speedSelector.SelectionChangeCommitted += new System.EventHandler(this.speedSelector_Changed);    
  speedSelector.TextUpdate += new System.EventHandler(this.speedSelector_Changed);
}

private void speedSelector_Changed(object sender, EventArgs e) {
  if (validData(speedSelector.Text)) {
    speedSelector.Tag = speedSelector.Text;
  } else {
    speedSelector.Text = speedSelector.Tag.ToString();
  }
}

private static bool validData(string value) {
  bool result = false;
    // do your test here
  return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:06:38.727

当将焦点从对话框上的 CausesValidation 属性设置为 true 的控件移动到另一个 CausesValidation 属性设置为 true 的控件时，将调用验证，例如从 TextBox 控件到 OK 按钮。也许您的验证发生在您关闭窗口时，因为您在窗口上设置了 CausesValidation，而不是在适当的控件上？

您也可以将所有验证移到控件的 OnBlur 事件中，然后这样做。

# android - Android - FileInputStream 错误/播放本地视频

> ID：11656475
> 
> 赞同：0
> 
> 时间：2012-07-25T18:44:03.197
> 
> 标签：android, video, android-videoview, fileinputstream

在线托管视频是不可能的，使用 SD 卡也不是解决我的问题的现实解决方案......由于几个因素，例如 SD 卡可能会消失的引擎盖。

所以我发现了这个，这说明它是可能的：[https ://stackoverflow.com/a/5475436/584994](https://stackoverflow.com/a/5475436/584994)

但我似乎无法让 FileInputStream 正确...在包资源管理器下，我的文件位于 AppName->res->drawable->overview_animatic.mp4 下

并且我传递给 FileInputStream 的字符串是“/res/drawable/overview_animatic.mp4”我这样做不正确吗？

上面链接中的解决方案不再有效吗？

有没有更好的方法来播放内部视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:32:34.917

请参阅如何从资产文件夹或原始文件夹在 android 中播放视频的最佳答案[？](https://stackoverflow.com/questions/3028717/how-to-play-videos-in-android-from-assets-folder-or-raw-folder)有关如何从应用程序资源播放视频的说明。

# mysql - MySQL，ORDER BY 插入顺序，无排序列

> ID：11656476
> 
> 赞同：13
> 
> 时间：2012-07-25T18:44:04.710
> 
> 标签：mysql

如何从表中排序值，从插入的时间开始升序。对于这个问题没有特殊的列，比如时间戳或自动增量。

我知道不建议这样做......我仍然想知道如何做到这一点。

正如我从答案中了解到的那样，如果在插入值之前没有添加排序列，例如：时间戳或自动增量，则无法通过插入对它们进行排序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T18:56:27.587

`ORDER BY`如果查询中没有子句，则无法保证行将以任何特定顺序返回。

考虑一个返回表中所有行的所有列的简单查询。例如：

```
SELECT * FROM mytable ; 
```

对于该查询，MySQL 很可能会从表的开头执行全表扫描。因此，这些行很可能会按照它们在物理存储中的顺序返回。

这可能大致对应于插入行的顺序，如果没有删除、没有更新和没有重组，则插入行的空间后来被回收，并重新用于存储新插入的行。

但不能保证这种行为。

要按照插入的顺序返回行，查询必须通过包含一个`ORDER BY`子句来指定要返回的行的顺序。

对于以“插入顺序”返回的行，这意味着查询需要能够获得该信息，或者能够派生该信息。对于针对单个表的简单查询，这意味着信息需要存储在行中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:46:20.767

你可以`ORDER BY`从你的桌子上得到一些东西。如果你没有任何东西可以用来找出你需要的订单，你不能通过它来订购。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:49:37.687

根据表中的数据，您可以按数据的 id 排序 - 如果数据具有单个增量整数以确保 PK 唯一性。除非数据被捕获并记录在表中，否则没有其他方法可以按插入顺序排序。

我不知道 MySQL 中有什么东西会保留您未在表级别指定的记录的额外（元）信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:45:41.197

需要有一列来对您的查询进行排序。通常这将是一个插入时间戳，或递增 id/递增键。否则无法保证订单，因为没有记录。

[MySQL论坛的相关主题](http://forums.mysql.com/read.php?10,224469)

# jsf-2 - h:selectOneMenu 与布尔项不适用于空值

> ID：11656486
> 
> 赞同：10
> 
> 时间：2012-07-25T18:44:41.307
> 
> 标签：jsf-2, boolean, el, selectonemenu

我正在使用 JSF 2.0、JBoss 7.1.1 Final 和 selectOneMenu 有以下问题。我希望能够将托管 bean 中的字段设置为 true/false/null。因此，我创建了以下 selectOneMenu：

```
<h:selectOneMenu value="#{personList.criteria.registrationComplete}" >
    <f:selectItem itemValue="#{null}" itemLabel="Any.." />
    <f:selectItem itemValue="true" itemLabel="Yes"/>
    <f:selectItem itemValue="false" itemLabel="No"/>
</h:selectOneMenu> 
```

现在，如果我选择“Any..”，它会将“false”分配给registrationComplete 字段（这是布尔值）。所以**null 被解释为 false**。我还尝试在 selectItem(s) 中使用布尔值，即：

```
 <h:selectOneMenu value="#{personList.criteria.registrationComplete}" >
    <f:selectItem itemValue="#{null}" itemLabel="Any.." />
    <f:selectItem itemValue="#{true}" itemLabel="Yes"/>
    <f:selectItem itemValue="#{false}" itemLabel="No"/>
</h:selectOneMenu> 
```

我还在 faces-config 中注册了转换器，如下所示：

```
<converter>  
    <converter-id>booleanConverter</converter-id>  
    <converter-class>javax.faces.convert.BooleanConverter</converter-class>  
</converter> 
```

并尝试使用它：

```
<h:selectOneMenu value="#{personList.criteria.registrationComplete}" >
    <f:selectItem itemValue="#{null}" itemLabel="Any.." />
    <f:selectItem itemValue="true" itemLabel="Yes"/>
    <f:selectItem itemValue="false" itemLabel="No"/>
        <f:converter converterId="booleanConverter"/>
</h:selectOneMenu> 
```

But all these attempts resulted in the same behavior -- **when the null value was selected, it was interpreted as false.**

我对其进行了调试，并在堆栈跟踪中找到了它发生的位置。在`AstValue.setValue(EvaluationContext, Object) line: 204`

它调用

```
ELSupport.coerceToType(value, targetClass) 
```

value 参数为 null，targetClass 为布尔值。然后这个 coerceToType 方法返回 false。

任何想法如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T16:21:17.873

这是 Tomcat 和 JBoss 使用的 Apache EL 解析器的典型特征。`null`众所周知，在 EL 中强制值时不区分基元及其包装对象表示。包装器类型始终被视为原语。例如，它在 Glassfish 中运行良好。

您可以通过将以下 VM 参数添加到服务器启动脚本来关闭此 Apache EL 解析器行为：

```
-Dorg.apache.el.parser.COERCE_TO_ZERO=false 
```

# html - 有没有类似于 HTML5 的“Go get Flash”链接的东西？

> ID：11656487
> 
> 赞同：3
> 
> 时间：2012-07-25T18:44:44.697
> 
> 标签：html

我正在构建一个需要 HTML5 功能才能运行的网站。如果浏览器中不存在这些功能，我们会向用户显示一条消息，告知他们需要升级浏览器才能完整查看内容。

我想做的是提供一个网站链接，其中包含一些关于什么是 HTML5 以及哪些浏览器支持它等信息。

我们宁愿不必构建我们的 HTML5 信息页面，而只需链接到“官方”的东西。类似于“Go get Flash”链接（[指向 http://get.adobe.com/flashplayer/](http://get.adobe.com/flashplayer/)），如果 Flash 不存在，通常用于将用户引导至 Adob​​e。

这样的网站存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:54:26.660

尝试来自[html5please.com](http://html5please.com)的 API 。如果您的网站所需的 HTML5 功能在用户的浏览器上不可用，它将显示一条消息，并为他们提供可以下载支持这些功能的浏览器的链接。

该消息是可配置的，但可能如下所示： ![在此处输入图像描述](../Images/811b1c8ce152f848e89cfb21377937f8.png)

**[http://api.html5please.com/](http://api.html5please.com/)**

这些网站可能有助于解释升级浏览器的必要性：

*   [http://browsehappy.com/](http://browsehappy.com/)
*   [http://www.updatebrowser.net/](http://www.updatebrowser.net/)
*   [http://www.whatbrowser.org/en/](http://www.whatbrowser.org/en/)
*   [http://upgradeyourbrowser.net/](http://upgradeyourbrowser.net/)

# java - Salesforce：我如何让流程意识到它需要从我的 apex 调度程序中引用的帐户中提取信息？

> ID：11656492
> 
> 赞同：0
> 
> 时间：2012-07-25T18:45:03.447
> 
> 标签：java, salesforce, apex-code, flow, unhandled-exception

我是 apex 的新手，并且已经建立了一个每天运行的 apex 计划课程。如果帐户的佣金帐户审核日期是两周（14 天）后，调度程序将向我们的销售部门发送电子邮件。该电子邮件包含指向流的链接。流程开始计算新佣金的过程。为此，流程需要了解从触发发送电子邮件的帐户中提取信息，该帐户的帐户审核日期为 2 周。

目前，电子邮件可以正常发送，并带有指向流程的链接。到流程的链接有效，但是一旦您进入流程，流程就不知道/理解它应该从哪个帐户提取信息。我不确定是否需要更改调度程序中的代码和/或流程中的代码。

以下是流程访问信息的方式：

在第一个屏幕之前，会发生流中的记录查找。它从帐户 ID 和变量 vaAccountID 中提取信息。我认为变量 {!vaAccountID} 填充了与佣金相关联的 AccountID。

当我运行我的调度程序时，我让它根据帐户 ID 确定是否有一个帐户具有帐户审核日期。它将带有流链接的电子邮件模板发送到销售部门。

调度程序发送电子邮件并且“高兴”。执行该方法所需的标准是完整的（有一个帐户的帐户审核日期为 14 天后，它会发送电子邮件）。

```
global class AccountReviewSchedulerEmailAcc implements Schedulable { 

    global void execute (SchedulableContext ctx) 
    { 
        sendEmail(); 
    }

    public void sendEmail()
    {

        for(Account acc : [SELECT Id FROM Account WHERE Next_Account_Review_Date__c = : system.Today().addDays(14)])
        {
            Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage(); 
            mail.setTemplateId('00XF0000000LfE0'); 
            mail.setTargetObjectId('005J0000000JWYx'); 
            mail.setSaveAsActivity(false);
            Messaging.sendEmail(new Messaging.SingleEmailMessage[] {mail }); 
        }
    }

} 
```

然而，流程并不“快乐”。它不知道从哪个帐户中提取信息。

在流程的第一个屏幕中，它应该显示经常性收入并链接到帐户页面。经常性收入字段为空白。帐户页面的链接不起作用。

如果我尝试通过流程的第一个屏幕，我会收到来自 Salesforce 的一般错误屏幕和来自 Salesforce 的详细错误消息。它说：

```
Encountered unhandled fault when running process Organic_Commission_Determination_Flow/301J000000001Tx exception by user/organization: 00DJ00000000YTl/{4} Source organization: 00DA0000000KZI8 (null)
interaction.dal.exception.DALExecutionFault: ; nested exception is: 
    common.exception.ApiQueryException: 
Account.Annual_RR__c FROM Account WHERE (Account.Id = '{!Commission__c.AccountId__c}')
                                         ^ ERROR at Row:1:Column:89 invalid ID field: {!Commission__c.AccountId__c} (There was a problem executing your command.) > RETRIEVE

caused by element : Data lookup.Lookup_Account

caused by: interaction.dal.exception.DALExecutionFault: ; nested exception is: 
    common.exception.ApiQueryException: 
Account.Annual_RR__c FROM Account WHERE (Account.Id = '{!Commission__c.AccountId__c}')
                                         ^ ERROR at Row:1:Column:89 invalid ID field: {!Commission__c.AccountId__c} (There was a problem executing your command.) > RETRIEVE

Salesforce Error ID: 580775287-15539 (1733087783) 
```

这个错误信息是什么意思？如何获取有关 Salesforce 错误的更多信息以及如何解决此问题？我知道这个过程非常复杂，但它与一个基本问题有关：我如何让流程意识到它需要从我的 apex 调度程序中具有 14 天审查日期的帐户中提取信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:02:42.363

查看错误消息中正在执行的 SOQL 语句：

```
Account.Annual_RR__c FROM Account WHERE (Account.Id = '{!Commission__c.AccountId__c}') 
```

这告诉我，您的电子邮件模板中的链接将文字值“{!Commission__c.AccountId__c}”传递到您的 SOQL，而不是在发送电子邮件时绑定该字段的值。因此，不是将帐户 ID 传递到 URL 中，而是传递这个字符串，这肯定不是流程所期望的。

如果在电子邮件模板中错误地输入了字段的 API 名称，或者绑定到模板的记录不是`Commission__c`您所期望的类型，则可能会发生这种情况。因此，这可能是以下两种情况之一：您发送的记录不是电子邮件模板的正确对象类型`00XF0000000LfE0`，或者对象上没有`AccountId__c`字段`Commission__c`。

# apache - 从 Apache httpd 443 到 JBoss 8443 的端口转发

> ID：11656493
> 
> 赞同：3
> 
> 时间：2012-07-25T18:45:05.317
> 
> 标签：apache, ssl, jboss, port, forward

我需要在我的 JBoss 前面运行 Apache httpd，这样我就可以保留 JBoss 端口（8080/8443），但将 Apache/80 转发到 Jboss/8080，将 Apache/443 转发到 Jboss/8443。我有 HTTP 转发工作，但我无法让 HTTPS 转发工作。为了让 HTTP 转发工作，我只是加载了正确的代理模块：

```
LoadModule proxy_module modules/mod_proxy.so

LoadModule proxy_ajp_module modules/mod_proxy_ajp.so 
```

然后添加了这些新指令：

```
ProxyPass / ajp://localhost:8009/

ProxyPassReverse / ajp://localhost:8009/ 
```

*如果我只想将端口 443 转发到 8443，我必须启用 SSL？我不需要 Apache 来加载和处理证书。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:54:58.440

你混淆了两件事。

如果你想将端口从 443*端口转发*到 8443，不要通过 Apache Httpd，只转发端口（例如 via `iptables`）。在这种情况下，您的 JBoss 容器必须配置为处理 SSL/TLS 连接（所有证书设置）。

如果你想要一个从 Apache Httpd（监听端口 443）到你的 JBoss 容器的*反向代理*，你不需要在你的 JBoss 容器上启用 SSL/TLS（尤其是在本地主机上），只需将请求代理到 Apache Httpd 中的纯 HTTP （或通过 AJP）。为此，您需要配置 Apache Httpd 来处理 SSL/TLS 连接。

# java - 将属性文件放在 Eclipse 项目中的位置

> ID：11656497
> 
> 赞同：1
> 
> 时间：2012-07-25T18:45:10.483
> 
> 标签：java, eclipse, properties-file

请告诉我我的 .properties 文件到底放在我的 Eclipse 项目中的哪个位置。我要为它创建一个单独的文件夹吗？我想把它放在这样一种方式，我将能够轻松地以 JAR 形式分发我的项目。

谢谢。

编辑：

我想以这样一种方式放置属性文件，以便以后在任何操作系统上都可以轻松地对其进行编辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T18:51:16.897

我使用的方法是为了能够**轻松更改配置而无需重新部署**。

项目根目录中的一个版本的属性文件（具有默认值），我总是将它放在应用程序包（foo.bar.myapp）中。`getResourceAsStream("/foo/bar/myapp/config.properties")`我在相对于类包的示例中加载默认值或类似值。

另外我准备了一个系统属性：

```
String configFileLocation = System.getProperty("config"); 
```

并且只需使用从作为属性传递的配置文件中读取的属性覆盖默认值。

例如：

```
Properties props = new Properties();
props.load(Main.class.getResourceAsStream("mydefault.properties"));

System.out.println("default loaded: " + props);

String configFile = System.getProperty("config");
if (configFile != null) {
    props.load(new FileInputStream(configFile));
    System.out.println("custom config loaded from " + configFile);
}

System.out.println("custom override: " + props); 
```

这将首先加载存储在您的项目下`foo.bar`名为包的资源`mydefault.properties`，然后如果`config`配置了系统属性，它将加载使用引用路径覆盖加载的属性。

可以使用`-D`参数设置系统属性，在这种情况下，类似于：`java -Dconfig=/home/user/custom.properties foo.bar.Main`. 或者，如果您在 Web 应用程序（例如 Tomcat）中，您可以使用`CATALINA_OPTS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:41:36.120

`src/main/resource`将是一个理想的选择。

# c - 从 VBA 代码调用 OCaml 或 C 的可执行文件

> ID：11656501
> 
> 赞同：1
> 
> 时间：2012-07-25T18:45:33.010
> 
> 标签：c, vba, excel, ocaml, executable

`Ubuntu`我在 OCaml 中编写了一个非常简单的`ml.ml`代码：

```
let () = print_string "hello world, in OCaml\n" 
```

还有一个简单`c.c`的 C 语言：

```
#include <stdio.h>
main() {
  printf("hello world, in C\n");
  return 0; } 
```

然后我用`ocamlc -o mlexe.exe ml.ml`and编译它`gcc -o cexe.exe c.c`。启动`mlexe.exe`或`cexe.exe`在终端下`Ubuntu`会返回字符串。

现在我想从 VBA 代码中调用它。我启动 Windows，打开 Microsoft Excel 文件和 VBA 编辑器，然后输入：

```
Sub run()
    Dim ProcID As Integer
    ProcID = Shell("C:\Windows\system32\calc.exe", 1)

    Dim Result As Variant
    Result = Shell("C:\test\cexe.exe",1)
    'Result = Shell("C:\test\mlexe.exe",1)
    'Result = Shell("C:\test\cexe.exe")
    'Result = Shell("C:\test\mlexe.exe")
End Sub 
```

我希望`Result`得到字符串`hello world...`（或在不太好的情况下的退出代码），运行宏确实会启动计算器，但会给我一个错误`Run-time error '5': Invalid procedure call or argument`，对于其他 4 个`Shell`我自己的可执行文件。

目的只是从 VBA 代码中调用我自己用另一种语言编译的可执行文件。

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:22:18.790

感谢您在评论中的回答。所以问题似乎是你有一个在 Ubuntu 下编译的可执行文件，它在 Windows 下被调用。Windows 可执行文件和 Linux 可执行文件是不同的，不能相互替代。

解决问题的最简单方法是在 Windows 下安装编译器，用它编译代码，从而获得 Windows 二进制文件。对于 OCaml，请参见例如[http://protz.github.com/ocaml-installer/](http://protz.github.com/ocaml-installer/)。

另一种方法是*交叉编译*，即在 Linux 下编译，但明确要求编译器生成 Windows 可执行文件。这更难。

# python - 如何仅附加列表中的唯一项目？

> ID：11656502
> 
> 赞同：0
> 
> 时间：2012-07-25T18:45:32.900
> 
> 标签：python, append, unique

我希望找到仅附加唯一项目 numlookup 和 Wholetoken 的方法。有没有好的方法来做到这一点？

```
numlookup = defaultdict(list) 
wholetoken = defaultdict(list)

#mydata is file containing mutation description
mydata = open('/mutation_summary.txt')
for line in csv.reader(mydata, delimiter='\t'):
    code = re.match('[a-z](\d+)[a-z]', line[-1], re.I)
    if code: 
        numlookup[line[-2]].append(code.group(1))
        wholetoken[line[-2]].append(code.group(0)) 
```

当我尝试使用 set 时，当我调用 lookup(id) 和 Wholelookup(id) 时出现错误：TypeError: 'set' object is not callable

```
lookup =set()
wholelookup =set()

with open('mutation_summary.txt') as mydata:
    for line in csv.reader(mydata, delimiter='\t'):
        code = re.match('[a-z](\d+)[a-z]', line[-1], re.I)
        if code: 
            lookup.add(code.group(1))
            wholelookup.add(code.group(0)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:48:28.733

为什么不把它变成a `defaultdict`of `set`s？它只保留唯一性。

如果这不是一个选项，那么您可以尝试：

```
if code:
    if code.group(1) not in numlookup[line[-2]]:
        numlookup[line[-2]].append(code.group(1))
    if code.group(0) not in wholetoken[line[-2]]:
        wholetoken[line[-2]].append(code.group(0)) 
```

# wpf - 在 WPF 列表框数据模板内绑定渐变的背景颜色

> ID：11656503
> 
> 赞同：0
> 
> 时间：2012-07-25T18:45:33.803
> 
> 标签：wpf, binding

所以我有一个数据模板，里面有板子，这就是我想做的。

```
<Border Grid.Column="0" Grid.Row="4" Grid.ColumnSpan="5">
 <Border.Background>
  <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
    <GradientStop Color="Transparent"/>
    <GradientStop 
     Color="{Binding Condition, Converter={StaticResourc ConditionTypeToColorConveter}}"    Offset="0.541"/>
  </LinearGradientBrush>
 </Border.Background>
</Border> 
```

我可以看到转换器被调用没问题。但不显示它返回的颜色。现在如果我这样做

```
<Border Grid.Column="0" 
 Grid.Row="4" Grid.ColumnSpan="5"
 Background="{Binding Condition, Converter={StaticResourc ConditionTypeToColorConveter}}"> 
```

它工作得很好——当然——我不希望它是一种颜色，我需要它是一个渐变。

有人知道这有什么问题吗？这让我很生气...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:52:51.567

这是行不通的，因为在第一个示例中，您将 a 绑定`Color`到第二个 a 中`Brush`。您的转换器返回什么类型？您将其命名为“ToColor”，但它作为`Brush`for工作`Background`。

# android - 如何在以前的构建上构建 NDK 库

> ID：11656506
> 
> 赞同：0
> 
> 时间：2012-07-25T18:45:44.520
> 
> 标签：android, android-ndk

我正在使用 Android NDK 来构建一个库。我一切正常，但后来我需要更改库中引用的包名称。进行更改后，我尝试通过在其文件夹中调用 ndk-build 再次构建库，但这是我得到的唯一输出，它似乎没有完全构建：

```
C:\my-app\jni>ndk-build
Install        : libfilters.so => libs/armeabi/libfilters.so 
```

当我尝试运行应用程序时，这会导致不满意的链接错误。我将发布我的 .mk 文件，但我认为这并不重要，因为我以前的库正在使用这个 .mk 文件。我的猜测是，我试图在之前的构建中构建这个存在​​问题。有什么建议么？这是我的 .mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := filters
LOCAL_SRC_FILES := filters.cpp
LOCAL_LDLIBS    := -lm -llog -ljnigraphics

include $(BUILD_SHARED_LIBRARY) 
```

谢谢您的帮助。

编辑：一旦我按照指示进行重建，就会出现以下错误：

```
"Compile++ thumb : filters <= filters.cpp
C:/a-fa-outsidelands//jni/filters.cpp:4:28: fatal error: android/bitmap.h: No such file     or directory
compilation terminated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:48:32.467

```
ndk-build -B 
```

强制全面重建。

# haskell - Haskell：改进我的尾递归斐波那契实现

> ID：11656507
> 
> 赞同：3
> 
> 时间：2012-07-25T18:45:47.203
> 
> 标签：haskell, fibonacci, tail-recursion

我想出了以下有效的尾递归斐波那契生成器：

```
let {
  fibo :: Integral x => [x]->x->x->x->[x]
  fibo l x y 0 = l
  fibo l x y n = fibo (l ++ [y+x] ++ [y+x+y]) (x+y) (y+x+y) (n-1)
} 
```

请原谅我将整个实现放在一行中，因为我正在使用 GHCi 并且还没有完全学会如何将它放在一个文件中并运行（我还没有到达那里）。我想知道的是如何调用：

```
fibo [0, 1] 0 1 5 
```

可以改进。我不想用 0 和 1 传递初始列表，然后再用限制传递 0 和 1。我相信实施是可以改变的。可以做哪些改变？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:28:36.173

您的算法是尾递归的，但它看起来还有其他缺点，即 1）您正在通过附加到结果列表的末尾来构建结果列表，以及 2）它并不懒惰。

对于 1)，请注意，当您附加两个列表时`a ++ b`，您基本上必须重新分配`a`。在您的情况下`a`，斐波那契数列不断增长，`b`是接下来的两个术语。因此，每次迭代都会重新分配已经计算的斐波那契数，并添加另外两个元素，这将导致二次运行时间。`b`放在前面会更有效率`a`。您将反向生成斐波那契数，但运行时间将是线性的。`reverse`如果您希望序列按升序排列，则可以在最后列出列表。

请注意，使用 Code-Guru 的模式匹配思想，以相反的顺序构建列表可以让您轻松获得序列的最后两项。

对于 2)，请注意，在整个计算完成之前，您无法获取列表的第一个元素。与以下序列的惰性生成进行比较：

```
fibs = 0 : (go 0 1)
  where go a b = b : go b (a+b) 
```

即使看起来递归永远不会停止，`fibs`也只会根据需要进行评估。例如，`fibs !! 3`只调用`go`几次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T19:37:40.233

我不打算讨论算法本身，但这里有一些关于如何构造递归函数的建议。

首先，这是在单独的文件中格式化代码的方法

```
fibo :: Integral x => [x]->x->x->x->[x]
fibo l x y 0 = l
fibo l x y n = fibo (l ++ [y+x] ++ [y+x+y]) (x+y) (y+x+y) (n-1) 
```

如果您将其保存为 fibo.hs，那么您可以使用以下命令启动 GHCi

```
ghci fibo.hs 
```

在开始时加载文件。也可以在启动 GHCi 后使用命令加载文件

```
:l fibo.hs 
```

（假设您在保存 fibo.hs 的同一目录中启动 GHCi）

另一个不错的功能是，现在当您编辑文件时，您只需输入即可重新加载所有更改

```
:r 
```

在 GHCi 提示符中。

现在，为了摆脱额外的参数，Haskell 中的常用模式是将递归部分重构为它自己的辅助函数，并将 main 函数作为只接受必要参数的入口点。例如，

```
fibo :: Integral x => x -> [x]
fibo n = fiboHelper [0,1] 0 1 n

fiboHelper :: Integral x => [x]->x->x->x->[x]
fiboHelper l x y 0 = l
fiboHelper l x y n = fiboHelper (l ++ [y+x] ++ [y+x+y]) (x+y) (y+x+y) (n-1) 
```

现在您可以`fibo`简单地调用

```
> fibo 3
[0,1,1,2,3,5,8,13] 
```

此外，像这样本身无用的辅助函数通常作为内部函数隐藏在主函数中，使用`let`or `where`。

```
fibo :: Integral x => x -> [x]
fibo n = fiboHelper [0,1] 0 1 n where
    fiboHelper l x y 0 = l
    fiboHelper l x y n = fiboHelper (l ++ [y+x] ++ [y+x+y]) (x+y) (y+x+y) (n-1) 
```

像这样的内部函数通常被赋予一个较短的名称，因为上下文清楚地说明了它的用途，所以我们可以将名称更改为 eg `fibo'`。

`go`是递归辅助函数的另一个常用名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T13:01:30.167

仅作记录：斐波那契数列的“通常”定义是：

```
fibo = 0 : scanl (+) 1 fibo 
```

# perl - Perl 程序员可以使用哪些 emacs 工具？如何安装它们？

> ID：11656510
> 
> 赞同：7
> 
> 时间：2012-07-25T18:45:51.353
> 
> 标签：perl, emacs, elisp

我从 emacswiki.org 找到了许多对 emacs 中的 perl 编程有用的 .el 文件。帮我设置一下。我发现在我的 ubuntu 12.04 上安装所有 elisp 文件很麻烦。

1.  Perl 补全
2.  Perl-pod-gt
3.  现在 Perl
4.  C Perl 模式
5.  Perl 引用

[emacswiki.org/emacs/PerlLanguage#Perl](http://emacswiki.org/emacs/PerlLanguage#Perl)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:49:25.180

那里有很多，但我主要只是使用 CPerl 模式。

它相当基本，但对我很有帮助。

Mx cperl 模式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T03:10:52.863

[棕褐色](http://p3rl.org/Sepia)可能是最雄心勃勃的。我没有广泛使用它，但我可以说它的目标是成为 Perl 编程的[SLIME](http://common-lisp.net/project/slime/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T10:34:55.277

PDE，你可以从cpan得到，模块名是Emacs::PDE

# .net - 签署开源项目的二进制文件

> ID：11656520
> 
> 赞同：15
> 
> 时间：2012-07-25T18:46:26.313
> 
> 标签：.net, open-source, code-signing, assembly-signing, code-signing-certificate

我尝试在我当前的项目中使用[ServiceStack](http://www.servicestack.net/)，但发现发布的二进制文件名称不强，所以我不能开箱即用。在 GitHub 上询问“为什么”时，我得到了以下答案：

> [它具有病毒毒性，会阻碍绑定、升级、开发、部署等。](https://github.com/ServiceStack/ServiceStack/issues/195)

神话非常简洁，所以我不想再打扰他并在这里问。我使用了很多开源 .NET 项目，如 AutoMapper、NUnit、Moq、log4net、Ninject 等，它们的版本都是强命名的。在 SO 上找到了[类似的问题](https://stackoverflow.com/questions/396143/net-opensource-projects-and-strong-named-assemblies)，但这对我没有帮助。在 OSS 中是正常做法吗？为什么不同时发布已签名和未签名的二进制文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T01:39:10.777

以下是关于为什么强命名对开源项目来说不是一个坏主意的原因的现有讨论：

[https://groups.google.com/forum/?fromgroups#!topic/getglimpse-dev/pXXazMOOdjE](https://groups.google.com/forum/?fromgroups#!topic/getglimpse-dev/pXXazMOOdjE)

这是使用它的噩梦故事：

[http://haacked.com/archive/2012/02/16/chang-a-strong-name-is-a-major-break-change.aspx](http://haacked.com/archive/2012/02/16/changing-a-strong-name-is-a-major-breaking-change.aspx)

我个人曾在 2 个团队中经历过 2 代 Log4Net，他们试图在同一个项目中使用引用 2 个不同的 Log4Net 强名称版本的程序集 - 浪费大量时间和精力来尝试完成这项工作并不有趣，也不是我们计划让自己服从或要求所有用户的事情。

想要强名称版本的用户可以自由地签署他们自己的[公共 ServiceStack 存储库](https://github.com/ServiceStack/)的克隆/分叉。

如果有需求，我们将考虑维护我们自己的“官方签名”商业版本的库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T22:52:52.547

我认为这取决于开发人员。优点很清楚 - 任何人都可以使用强名称进行组装并在任何环境中使用它。在那种特殊情况下，我的意思是来自已签名或未签名的程序集。缺点 - ？

我认为**签署二进制文件应该是一种绅士规则**。

Jon Skeet 回答了类似的[问题](https://stackoverflow.com/questions/396143/net-opensource-projects-and-strong-named-assemblies)，他的意见是非常难以理解的。

# javascript - 用户控件 (.ascx) 和 java 脚本函数

> ID：11656528
> 
> 赞同：0
> 
> 时间：2012-07-25T18:46:53.417
> 
> 标签：javascript, asp.net

在default.aspx 页面中，有一个用户控件side_menu.ascx。这是 side_menu.ascx 中代码的一部分

```
<script src="../library/scripts/side_menu.js" type="text/javascript"></script>
<script src="../library/scripts/side_menu_items.js" type="text/jscript"></script>
<script src="../library/scripts/side_menu_tpl.js" type="text/jscript"></script>

<script language="JavaScript" type="text/javascript">
 <!--
 new menu(SIDE_MENU_ITEMS, SIDE_MENU_POS, SIDE_MENU_STYLES);
 // -->
</script> 
```

功能**菜单**在 side_menu.js 中定义。SIDE_MENU_ITEMS 是一个包含所有菜单项和路径的数组。

```
 var SIDE_MENU_ITEMS =[
["Administration", null,
    ["Report a Bug", "administration/bugs/report_bug.aspx"], // /TOrders/
    ["Bug Tracker", "administration/bugs/bug_tracker.aspx?fmtid=bugs"], // /TOrders/
    ["Feature Request", "administration/features/request_feature.aspx"], // /TOrders/
    ["Feature Tracker", "administration/features/feature_tracker.aspx"] // /TOrders/
] 
```

单击菜单项时，它会加载页面**/localhost/administration/bugs/whateverpage.aspx。**这工作正常。但是，当第二次单击菜单项时，路径变为**/localhost/administration/bugs/administration/bugs/whateverpage.aspx**。路径正在附加。我只是不知道去哪里清除阵列。当我单击菜单项时，将调用 menu_onnclick() 并且 this.item[id] 已经填充了错误的路径。不知道在哪里清除它。

这是side_menu.js中的一些功能

```
 function menu (item_struct, pos, styles) {
    this.item_struct = item_struct;
this.pos = pos;
this.styles = styles;
this.id = menus.length;
this.items = [];
this.children = [];

this.add_item = menu_add_item;
this.hide = menu_hide;

this.onclick = menu_onclick;
this.onmouseout = menu_onmouseout;
this.onmouseover = menu_onmouseover;
this.onmousedown = menu_onmousedown;

var i;
for (i = 0; i < this.item_struct.length; i++)
    new menu_item(i, this, this);
for (i = 0; i < this.children.length; i++)
    this.children[i].visibility(true);
menus[this.id] = this;
}

  function menu_add_item (item) {
var id = this.items.length;
this.items[id] = item;
return (id);
}  

function menu_onclick (id) {
var item = this.items[id];
return (item.fields[1] ? true : false);
}

    function menu_item (path, parent, container) {
this.path = new String (path);
this.parent = parent;
this.container = container;
this.arrpath = this.path.split('_');
this.depth = this.arrpath.length - 1;
// get pointer to item's data in the structure
var struct_path = '', i;
for (i = 0; i <= this.depth; i++)
    struct_path += '[' + (Number(this.arrpath[i]) + (i ? 2 : 0)) + ']';
eval('this.fields = this.container.item_struct' + struct_path);
if (!this.fields) return;

// assign methods   
this.get_x = mitem_get_x;
this.get_y = mitem_get_y;
// these methods may be different for different browsers (i.e. non DOM compatible)
this.init = mitem_init;
this.visibility = mitem_visibility;
this.switch_style = mitem_switch_style;

// register in the collections
this.id = this.container.add_item(this);
parent.children[parent.children.length] = this;

// init recursively
this.init();
this.children = [];
var child_count = this.fields.length - 2;
for (i = 0; i < child_count; i++)
    new menu_item (this.path + '_' + i, this, this.container);
this.switch_style('onmouseout');
}

function mitem_init() {
document.write (
    '<a id="mi_' + this.container.id + '_'
        + this.id +'" class="m' + this.container.id + 'l' + this.depth 
        +'o" href="' + this.fields[1] + '" style="position: absolute; top: '
        + this.get_y() + 'px; left: '   + this.get_x() + 'px; width: '
        + this.container.pos['width'][this.depth] + 'px; height: '
        + this.container.pos['height'][this.depth] + 'px; visibility: hidden;'
        +' background: black; color: white; z-index: ' + (this.depth + 10000) + ';" ' // changed this.depth to (this.depth + 10000)
        + 'onclick="return menus[' + this.container.id + '].onclick('
        + this.id + ');" onmouseout="menus[' + this.container.id + '].onmouseout('
        + this.id + ');window.status=\'\';return true;" onmouseover="menus['
        + this.container.id + '].onmouseover(' + this.id + ');window.status=\''
        + this.fields[0] + '\';return true;"onmousedown="menus[' + this.container.id
        + '].onmousedown(' + this.id + ');"><div class="m'  + this.container.id + 'l'
        + this.depth + 'i">' + this.fields[0] + "</div></a>\n"
    );
    this.element = document.getElementById('mi_' + this.container.id + '_' + this.id);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:24:33.257

**将您的数组更改为：**

```
var url="http://"+window.location.hostname;
var SIDE_MENU_ITEMS =[
    ["Administration", null,
        ["Report a Bug", url+"/administration/bugs/report_bug.aspx"], // /TOrders/
        ["Bug Tracker", url+"/administration/bugs/bug_tracker.aspx?fmtid=bugs"], // /TOrders/
        ["Feature Request", url+"/administration/features/request_feature.aspx"], // /TOrders/
        ["Feature Tracker", url+"/administration/features/feature_tracker.aspx"] // /TOrders/
    ]
]; 
```

**或者*（支持带有端口号的 url 的更一般的方法，例如`http://localhost:51143/`）*：**

```
function getUrl(){
    url = window.location.href.split('/');
    return url[0]+'//'+url[2];
}
var SIDE_MENU_ITEMS =[
    ["Administration", null,
        ["Report a Bug", getUrl()+"/administration/bugs/report_bug.aspx"], // /TOrders/
        ["Bug Tracker", getUrl()+"/administration/bugs/bug_tracker.aspx?fmtid=bugs"], // /TOrders/
        ["Feature Request", getUrl()+"/administration/features/request_feature.aspx"], // /TOrders/
        ["Feature Tracker", getUrl()+"/administration/features/feature_tracker.aspx"] // /TOrders/
    ]
]; 
```

# php - 如何使用 PDO 查询将 BETWEEN 与 TIMESTAMPDIFF 结合起来？

> ID：11656531
> 
> 赞同：0
> 
> 时间：2012-07-25T18:47:00.483
> 
> 标签：php, sql, pdo

我正在尝试修改从数据库返回特定日期和时间之间的行的现有代码。它做得对，但我想添加如下所述的功能。

这是我的数据库的一个例子

```
 start                  end
1st row    2012-07-24 18:00:00    2012-07-28 17:00:00
2nd row    2012-07-25 19:00:00    2012-07-30 19:00:00
3rd row    2012-07-25 22:00:00    2012-07-28 13:00:00
4th row    2012-07-25 23:40:00    2012-07-27 18:00:00
...
...
... 
```

当我的输入是**2012-07-25 23:00:00** `BETWEEN start AND end ORDER by start DESC`

所以结果是，

```
3rd row
2nd row
1st row 
```

直到这里一切都很好。但是，我想在列表顶部列出将在接下来的 2 小时内 **开始的所有行。***这是第 4 行。*

我试着用

```
 ABS(TIMESTAMPDIFF( HOUR , `start`, :time )) < 2 
```

不幸的是，我找不到解决方案。

从现在开始，以下是我的代码，不胜感激。（我使用 3 个变量`selected`，`city`和`type`）

```
// Store where clauses and values in arrays
$values = $where = array();

if (!empty($selected)) { // 
    $where[] = ':selected BETWEEN `start` AND `end`';
    $values[':selected'] = $selected;
}

if (!empty($city)) { // 
    $where[] = '`city` = :city';
    $values[':city'] = $city;
}

if (!empty($type)) { // 
$where[] = '`type` = :type';
$values[':type'] = $type;
}

// Build query
$question = 'SELECT * FROM `events`';
if (!empty($where)) {
    $question .= ' WHERE '.implode(' AND ', $where);
    $question .= ' ORDER BY `start` DESC';
}

$query = $db->prepare($question);

$query->execute($values); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:00:37.393

您需要 OR 才能在接下来的两个小时内开始活动。
例如

```
where type = :type and city = :city and
((:selected BETWEEN `start` AND `end`) or 
 (`start` between :selected and adddate(:selected, interval 2 hours))
)
order by `start` desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:10:37.997

我没有检查你的论点的顺序，所以我把条件倒过来了。但是，我最初的声明仍然有效。基本上，最简单的答案是调整开始时间，如下所示：

```
SELECT * 
FROM TMP
WHERE startedAt < DATE_ADD(TIMESTAMP('2012-07-25 23:00:00'), INTERVAL 2 HOUR)
AND endedBy >= TIMESTAMP('2012-07-25 23:00:00')
ORDER BY startedAt DESC 
```

并有一个工作[示例](http://www.sqlfiddle.com/#!2/17ba6/28)。

# c - 使用 C 返回一个数组

> ID：11656532
> 
> 赞同：188
> 
> 时间：2012-07-25T18:47:05.940
> 
> 标签：c, arrays, pointers, char

我对 C 比较陌生，我需要一些处理数组的方法的帮助。来自Java编程，我习惯于能够说`int [] method()`以返回一个数组。但是，我发现使用 C 语言时，您必须在返回数组时使用指针。作为一个新程序员，我真的完全不明白这一点，即使我浏览过很多论坛。

基本上，我正在尝试编写一个在 C 中返回 char 数组的方法。我将为该方法（我们称之为 returnArray）提供一个数组。它将从前一个数组创建一个新数组并返回一个指向它的指针。我只需要一些关于如何开始以及如何在指针被发送出数组后读取指针的帮助。任何解释这一点的帮助表示赞赏。

**数组返回函数的建议代码格式**

```
char *returnArray(char array []){
 char returned [10];
 //methods to pull values from array, interpret them, and then create new array
 return &(returned[0]); //is this correct?
} 
```

**函数调用者**

```
int main(){
 int i=0;
 char array []={1,0,0,0,0,1,1};
 char arrayCount=0;
 char* returnedArray = returnArray(&arrayCount); ///is this correct?
 for (i=0; i<10;i++)
  printf(%d, ",", returnedArray[i]);  //is this correctly formatted?
} 
```

*我尚未对此进行测试，因为我的 C 编译器目前无法正常工作，但我想弄清楚这一点*

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-07-25T18:51:01.920

您不能从 C 中的函数返回数组。您也不能（不应该）这样做：

```
char *returnArray(char array []){
 char returned [10];
 //methods to pull values from array, interpret them, and then create new array
 return &(returned[0]); //is this correct?
} 
```

`returned`是使用自动存储持续时间创建的，一旦离开其声明范围，即函数返回时，对它的引用将变得无效。

您将需要在函数内部动态分配内存或填充调用者提供的预分配缓冲区。

**选项1：**

动态分配函数内部的内存（调用者负责释放`ret`）

```
char *foo(int count) {
    char *ret = malloc(count);
    if(!ret)
        return NULL;

    for(int i = 0; i < count; ++i) 
        ret[i] = i;

    return ret;
} 
```

像这样称呼它：

```
int main() {
    char *p = foo(10);
    if(p) {
        // do stuff with p
        free(p);
    }

    return 0;
} 
```

**选项 2：**

填充调用者提供的预分配缓冲区（调用者分配`buf`并传递给函数）

```
void foo(char *buf, int count) {
    for(int i = 0; i < count; ++i)
        buf[i] = i;
} 
```

并这样称呼它：

```
int main() {
    char arr[10] = {0};
    foo(arr, 10);
    // No need to deallocate because we allocated 
    // arr with automatic storage duration.
    // If we had dynamically allocated it
    // (i.e. malloc or some variant) then we 
    // would need to call free(arr)
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-25T19:59:13.897

C 对数组的处理与 Java*非常*不同，您必须相应地调整您的想法。C 中的数组不是一等对象（也就是说，在大多数情况下，数组表达式不保留它的“数组特性”）。在 C 中，“N-element array of `T`” 类型的表达式将被隐式转换（“decay”）为“pointer to `T`” 类型的表达式，除非数组表达式是一个`sizeof`或一元运算符的操作数`&`，或者如果数组表达式是一个字符串文字，用于在声明中初始化另一个数组。

除此之外，这意味着您不能将数组表达式传递给函数并将其*作为数组类型*接收；该函数实际上接收一个指针类型：

```
void foo(char *a, size_t asize)
{
  // do something with a
}

int bar(void)
{
  char str[6] = "Hello";
  foo(str, sizeof str);
} 
```

在对 的调用中`foo`，表达式`str`从类型转换`char [6]`为`char *`，这就是为什么`foo`声明的第一个参数`char *a`而不是`char a[6]`。在`sizeof str`中，由于数组表达式是运算符的操作数`sizeof`，因此它不会转换为指针类型，因此您会得到数组中的字节数（6）。

如果您*真的*感兴趣，可以阅读 Dennis Ritchie 的[The Development of the C Language](http://cm.bell-labs.com/who/dmr/chist.html)以了解这种处理方式的来源。

结果是函数不能返回数组类型，这很好，因为数组表达式也不能成为赋值的目标。

最安全的方法是让调用者定义数组，并将其地址和大小传递给应该写入它的函数：

```
void returnArray(const char *srcArray, size_t srcSize, char *dstArray, char dstSize)
{
  ...
  dstArray[i] = some_value_derived_from(srcArray[i]);
  ...
}

int main(void)
{
  char src[] = "This is a test";
  char dst[sizeof src];
  ...
  returnArray(src, sizeof src, dst, sizeof dst);
  ...
} 
```

另一种方法是让函数动态分配数组并返回指针和大小：

```
char *returnArray(const char *srcArray, size_t srcSize, size_t *dstSize)
{
  char *dstArray = malloc(srcSize);
  if (dstArray)
  {
    *dstSize = srcSize;
    ...
  }
  return dstArray;
}

int main(void)
{
  char src[] = "This is a test";
  char *dst;
  size_t dstSize;

  dst = returnArray(src, sizeof src, &dstSize);
  ...
  free(dst);
  ...
} 
```

在这种情况下，调用者负责使用`free`库函数释放数组。

请注意，`dst`在上面的代码中是一个简单的指针`char`，而不是一个指向数组的指针`char`。C 的指针和数组语义使得您可以将下标运算符`[]`应用于数组类型*或*指针类型的表达式；两者都`src[i]`将`dst[i]`访问`i`数组的第 ' 个元素（即使只有`src`数组类型）。

您*可以*声明一个指向 N 元素数组的指针`T`并执行类似的操作：

```
char (*returnArray(const char *srcArr, size_t srcSize))[SOME_SIZE]
{
  char (*dstArr)[SOME_SIZE] = malloc(sizeof *dstArr);
  if (dstArr)
  {
    ...
    (*dstArr)[i] = ...;
    ...
  }
  return dstArr;
}

int main(void)
{
  char src[] = "This is a test";
  char (*dst)[SOME_SIZE];
  ...
  dst = returnArray(src, sizeof src);
  ...
  printf("%c", (*dst)[j]);
  ...
} 
```

上述的几个缺点。首先，旧版本的 C 期望`SOME_SIZE`是一个编译时常量，这意味着该函数只能使用一个数组大小。其次，您必须在应用下标之前取消引用指针，这会使代码混乱。在处理多维数组时，指向数组的指针效果更好。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-03-10T17:57:27.567

我并不是说这是给定问题的最佳解决方案或首选解决方案。但是，记住函数可以返回结构可能很有用。虽然函数不能返回数组，但数组可以包装在结构中，函数可以返回结构，从而携带数组。这适用于固定长度的数组。

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    typedef
    struct 
    {
        char v[10];
    } CHAR_ARRAY;

    CHAR_ARRAY returnArray(CHAR_ARRAY array_in, int size)
    {
        CHAR_ARRAY returned;

        /*
        . . . methods to pull values from array, interpret them, and then create new array
        */

        for (int i = 0;  i < size; i++ )
            returned.v[i] = array_in.v[i] + 1;

        return returned; // Works!
    } 

    int main(int argc, char * argv[])
    {
        CHAR_ARRAY array = {1,0,0,0,0,1,1};

        char arrayCount = 7;

        CHAR_ARRAY returnedArray = returnArray(array, arrayCount); 

        for (int i = 0; i < arrayCount; i++)
            printf("%d, ", returnedArray.v[i]);  //is this correctly formatted?

        getchar();
        return 0;
    } 
```

我邀请大家对这项技术的优缺点发表评论。我没有费心这样做。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-26T02:34:41.770

这个美味的邪恶实现怎么样？

**数组.h**

```
#define IMPORT_ARRAY(TYPE)    \
    \
struct TYPE##Array {    \
    TYPE* contents;    \
    size_t size;    \
};    \
    \
struct TYPE##Array new_##TYPE##Array() {    \
    struct TYPE##Array a;    \
    a.contents = NULL;    \
    a.size = 0;    \
    return a;    \
}    \
    \
void array_add(struct TYPE##Array* o, TYPE value) {    \
    TYPE* a = malloc((o->size + 1) * sizeof(TYPE));    \
    TYPE i;    \
    for(i = 0; i < o->size; ++i) {    \
        a[i] = o->contents[i];    \
    }    \
    ++(o->size);    \
    a[o->size - 1] = value;    \
    free(o->contents);    \
    o->contents = a;    \
}    \
void array_destroy(struct TYPE##Array* o) {    \
    free(o->contents);    \
}    \
TYPE* array_begin(struct TYPE##Array* o) {    \
    return o->contents;    \
}    \
TYPE* array_end(struct TYPE##Array* o) {    \
    return o->contents + o->size;    \
} 
```

**主程序**

```
#include <stdlib.h>
#include "array.h"

IMPORT_ARRAY(int);

struct intArray return_an_array() {
    struct intArray a;
    a = new_intArray();
    array_add(&a, 1);
    array_add(&a, 2);
    array_add(&a, 3);
    return a;
}

int main() {
    struct intArray a;
    int* it;
    int* begin;
    int* end;
    a = return_an_array();
    begin = array_begin(&a);
    end = array_end(&a);
    for(it = begin; it != end; ++it) {
        printf("%d ", *it);
    }
    array_destroy(&a);
    getchar();
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-12-01T21:40:15.353

您可以像此处报告的其他答案一样使用堆内存（通过*malloc()*调用）来执行此操作，但您必须始终管理内存（每次调用函数时都使用*free()*函数）。您也可以使用静态数组来执行此操作：

```
char* returnArrayPointer() 
{
static char array[SIZE];

// do something in your array here

return array; 
} 
```

您可以使用它而不用担心内存管理。

```
int main() 
{
char* myArray = returnArrayPointer();
/* use your array here */
/* don't worry to free memory here */
} 
```

在本例中，您必须在数组定义中使用 static 关键字将数组生命周期设置为 application-long，这样它就不会在 return 语句后被破坏。当然，通过这种方式，您在整个应用程序生命周期中都会占用内存中的 SIZE 个字节，因此请适当调整大小！

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-07-25T18:49:38.860

在您的情况下，您正在堆栈上创建一个数组，一旦您离开函数范围，该数组将被释放。相反，创建一个动态分配的数组并返回一个指向它的指针。

```
char * returnArray(char *arr, int size) {
    char *new_arr = malloc(sizeof(char) * size);
    for(int i = 0; i < size; ++i) {
        new_arr[i] = arr[i];
    }
    return new_arr;
}

int main() {

    char arr[7]= {1,0,0,0,0,1,1};
    char *new_arr = returnArray(arr, 7);

    // don't forget to free the memory after you're done with the array
    free(new_arr);

} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-25T18:50:56.450

您的方法将返回一个将严重失败的本地堆栈变量。要返回一个数组，请在函数外部创建一个数组，通过地址将其传递给函数，然后对其进行修改，或者在堆上创建一个数组并返回该变量。两者都可以工作，但第一个不需要任何动态内存分配即可使其正常工作。

```
void returnArray(int size, char *retArray)
{
  // work directly with retArray or memcpy into it from elsewhere like
  // memcpy(retArray, localArray, size); 
}

#define ARRAY_SIZE 20

int main(void)
{
  char foo[ARRAY_SIZE];
  returnArray(ARRAY_SIZE, foo);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-25T18:54:20.000

你可以使用这样的代码：

```
char *MyFunction(some arguments...)
{
    char *pointer = malloc(size for the new array);
    if (!pointer)
        An error occurred, abort or do something about the error.
    return pointer; // Return address of memory to the caller.
} 
```

执行此操作时，稍后应通过将地址传递给 free 来释放内存。

还有其他选择。例程可能会返回指向某个现有结构的一部分的数组（或数组的一部分）的指针。调用者可能会传递一个数组，而例程只是写入数组，而不是为新数组分配空间。

# android - Nexus 7 平板电脑上的填充问题

> ID：11656534
> 
> 赞同：7
> 
> 时间：2012-07-25T18:47:10.730
> 
> 标签：android

我注意到运行 Android 4.1 的 Nexus 7 平板电脑上的一些填充问题。具体来说，我有一个带有填充的背景可绘制，它创建了一个外部笔划：

```
 <?xml version="1.0" encoding="utf-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >

  <stroke
    android:width="1dp"
    android:color="#59000000" />

  <padding
    android:bottom="1dp"
    android:left="1dp"
    android:right="1dp"
    android:top="1dp" />

  </shape> 
```

这辅以 1dp 白色内笔画。所以它应该是整个图像周围的方形 2 dp 边框：

我已经在实际的 nexus 设备和其他几个设备以及 7 英寸果冻豆模拟器上对其进行了测试：

首先，这是 4.1 7 英寸模拟器的工作版本： ![这是 4.1 的 7 英寸平板电脑模拟器](../Images/de3325d61407f4bbed411f0e524190dd.png)

外部的边界是均匀的，并且围绕整个图像。这也是它在我拥有的所有其他设备上的工作方式。

联结 7：

![填充混乱的图像](../Images/0687238479912e445ef82c9ab3f66d4a.png)

灰色是背景颜色，但您可以看到右侧和底部的填充没有得到尊重。边框现在被图像遮住了。

如果重要的话，这些是 GridView 的子级。想知道是否有人看到这些问题或对如何解决这些问题有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:19:46.157

`stroke`在 XML 可绘制对象中生成时，这似乎是一个错误。经过多次尝试，我将范围缩小到了这一点；即使以像素为单位，它似乎也使形状的下侧和右侧的笔触大小不正确。如果我只是将笔画宽度更改为`2dip`而不是`1dip`（所有其他事物保持原样），结果如下：

![在此处输入图像描述](../Images/aea0b9b13724ddf23d0cac37d064b7a2.png)

这是`border.xml` 我用于后图像背景的：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">

    <stroke
            android:width="2dp"
            android:color="#59000000"/>

    <padding
            android:bottom="1dp"
            android:left="1dp"
            android:right="1dp"
            android:top="1dp"/>

</shape> 
```

同样，这只是您的笔画宽度扩大了。好消息是，**这根本不会改变预期结果，**因为填充保持不变。事实上，您可以将`stroke`标签更改为`solid`并且仍然具有相同的结果（但是，如果您的图像包含透明度，您会在透明区域看到纯色背景）。

试试这个；让我知道它是如何为你工作的！

# c++ - 代码可以运行但在 Eclipse 中不显示结果。？

> ID：11656535
> 
> 赞同：-1
> 
> 时间：2012-07-25T18:47:11.327
> 
> 标签：c++

为什么下面的示例代码可以在 Visual Studio 上正常运行。在 Eclipse、NetBean 或 CodeBlock 中代码可以运行但不能显示结果？谢谢大家。例如：输入一个字符串。a/ 大写首字母。b/ 删除字符串中的空格。

```
#include "iostream"
    #include "string.h"
    using namespace std;

    #define MAX 255

    //uppercase first letter
    char* Upper(char* input)
    {
        char* output = new char[MAX];

        bool isSpace = false;
        for (int i = 0; i < strlen(input); i++)
        {
            output[i] = input[i];
            if (isSpace)
            {
                output[i] = toupper(output[i]);
                isSpace = false;
            }
            if (output[i] == ' ') isSpace = true;
        }
        output[strlen(input)] = '\0'; // end of the string
        output[0] = toupper(output[0]); // first character to upper

        return output;
    }
    //remove space inside the string
    char* RemoveSpaceInside(char* input)
    {
        char* output = new char[MAX];
        strcpy(output, input);

        int countWhiteSpace = 0;
        for (int i = 0; i < strlen(output); i++)
        {
            if (output[i] == ' ')
            {
                for (int j = i; j < strlen(output) - 1; j++) // move before
                {
                    output[j] = output[j + 1];
                }
                countWhiteSpace++;
            }
        }
        output[strlen(output) - countWhiteSpace] = '\0'; // end of the string

        return output;
    }

    int main()
    {
        char* name = new char[MAX];
        cout << "Enter name: "; cin.getline(name, strlen(name)); 
        cout << "Your name: " << name << endl;

        cout << "\n******* Q.A *******\n";
        char* qa  = Format2VN(name);
        cout <<  qa << endl;

        cout << "\n******* Q.B *******\n";
        char* qb = RemoveSpaceInside(name);
        cout << qb << endl;
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:49:49.050

```
char* name = new char[MAX];
cout << "Enter name: ";
cin.getline(name, strlen(name)); 
```

调用`strlen(name)`将调用未定义的行为，因为您尚未初始化数组。Poor`strlen`将尝试在未初始化的字节混乱中找到 NUL 字符。绝对不是一个好主意。

你可能想要的是：

```
cin.getline(name, MAX);   // not sure if MAX or MAX-1 or whatever 
```

一般来说，帮自己一个忙，`char*`用`std::string`. 另外，[获得一本好的 C++ 书籍](https://stackoverflow.com/questions/388242/)。

以下是您的示例在实际 C++ 中的样子：

```
#include <algorithm>
#include <cctype>
#include <iostream>
#include <string>

std::string upper_first_letter(std::string s)
{
    if (!s.empty()) s[0] = toupper(s[0]);
    return s;
}

std::string remove_spaces(std::string s)
{
    s.erase(std::remove_if(s.begin(), s.end(), isspace), s.end());
    return s;
}

int main()
{
    std::string name;
    std::cout << "Enter name: ";
    std::getline(std::cin, name);

    std::cout << name << '\n';
    std::cout << upper_first_letter(name) << '\n';
    std::cout << remove_spaces(name) << '\n';
} 
```

# sql - Unicode 数据丢失 - 由于排序规则更改？

> ID：11656537
> 
> 赞同：1
> 
> 时间：2012-07-25T18:47:17.710
> 
> 标签：sql, sql-server, collate

我有一张表，其排序规则`Thai_CI_AS`没有`à`正确存储特殊字符。存储`à`时，它会呈现为问号：`?`

我已经通过将该表的排序规则更改为默认的 latin* 来解决这个问题。

现在可以正确存储新数据（特殊字符）。

但旧数据仍然显示`???`。

如何刷新或调用任何方法以使旧数据正确显示？

- - - 编辑 - - - -

是否有一个允许将所有内容更改`?`为其他内容的 sql 查询`à`？

例子

```
 ?sometext?
 ??sometext??
 ?????
 sometext?? 
```

并将所有转向

```
 àsometextà
 àsometextà
 ààààà
 sometextàà 
```

谢谢，以下列是包含这些数据的列，

```
 id_name1, id_name2, id_name3. 
```

请帮忙。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:58:11.670

很抱歉，您的旧数据已经消失了。我不认为这是因为整理；这可能是因为您这样做了：

```
INSERT dbo.table(column) SELECT 'à'; 
```

而不是使用 N 字符正确地为 Unicode 数据添加前缀：

```
INSERT dbo.table(column) SELECT N'à';
---- this is important ---------^ 
```

但是再一次，没有找回旧数据......您甚至自己说，当您在泰语排序规则下存储数据时，它显示`?`- 这意味着数据一开始就没有正确存储（很可能是因为丢失了`N`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:12:40.483

如果这个问题与您[之前的问题有关](https://stackoverflow.com/questions/11619569/)，那么答案是肯定的。

VARCHAR 列仅包含单字节字符。在您的情况下，您应该将 VARCHAR 列更改为 NVARCHAR，然后更改列的排序规则。

# hadoop - 如何在 Hadoop mapReduce 中获取 Kerberos 而不是委托令牌？

> ID：11656543
> 
> 赞同：3
> 
> 时间：2012-07-25T18:47:45.930
> 
> 标签：hadoop, kerberos

我是 Java 用户，在向 Hadoop mapReduce 提交作业时，它使用 Kerberos 对 Hadoop 进行身份验证，成功后会创建委托令牌并将其与作业提交一起传递给 Hadoop，而不是 kerberos 票证（出于安全原因，如上所述由 Hadoop）。现在作业以我的身份运行，但作业本身需要使用 Kerberos 向 Hadoop 之外的其他服务发送请求。现在我在 Hadoop 上没有 kerberos TGT，我无法获得服务票证。

无论如何我可以通过工作通过 Kerberos 票吗？（我知道这可能很危险，因为我们不想传递秘密），JobConf 可以将字符串到字符串对传递给 Hadoop，但是我必须将 TGT 转换为 json 字符串并在作业运行期间将其还原？

或者是否可以使用委托代币改革TGT？

我试着用谷歌搜索，但没有太多信息，有人可以帮忙吗？谢谢你。

******编辑：*** *****

 **如果不将 TGT 传递给 Hadoop，似乎没有简单的方法可以做到这一点，所以我将尝试以下方法，通过作业配置映射将 TGT 作为字符串传递给 Hadoop（仅限字符串），并将字符串转换回 TGT 对象当作业在 Hadoop 中运行时。担心的是我将通过网络传递凭据，这不是最佳实践，也是 Hadoop 没有传递 Kerberos 以确保安全的原因之一。如果我可以重新使用经过改造的 TGT 传递给 Hadoop 来获取服务票证，我将尝试尽可能加密 TGT 字符串以避免安全问题。

所以在本地机器上开始工作之前，代码如下：

```
import sun.security.krb5.Credentials;  

Credentials tgt = Credentials.acquireTGTFromCache(null, null); // Make sure kinit is done before this

String tgtStr = tgt.convertToJsonString(); //Need to implement this

Job job = new Job("Test");
JobConf jobConf = job.getJobConf();
jobConf.set("tgtStr", tgtStr);
job.addTask(Test.class, "run", null);
job.submit();
job.waitForCompletion(true); 
```

然后 Hadoop 运行的作业中的函数将如下所示：

```
Configuration conf = TaskContext.get().getConfiguration();
String tgtStr = conf.get("tgtStr");
Credentials tgt = reformTGTFromString(tgtStr);//Need to implement this
Credentials serviceTicket = Credentials.acquireServiceCreds(servicePrincipal, tgt); //This is to get any service ticket 
```

所以我需要实现两个函数来将 TGT 对象（Credentials.class）流式传输到字符串，然后将其重新转换回对象。

有人知道对此有更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:39:34.500

如果您还没有这样做，请参阅[http://carfield.com.hk:8080/document/distributed/hadoop-security-design.pdf上的设计。](http://carfield.com.hk:8080/document/distributed/hadoop-security-design.pdf)

> 或者是否可以使用委托代币改革TGT？不，委托令牌由 Hadoop 名称节点颁发，虽然它基于 Kerberos 身份验证，但它是独立的，您不能从中派生 Kerberos TGT。

在最初的设计中，我们考虑单独使用 Kerberos（没有任何额外的令牌），这会使您的计划变得容易，但出于以下原因决定反对：

表现：

*   数以千计的 M/R 任务可能需要同时获取 Kerberos 票证
*   Kerberos 凭据需要在到期前更新 对于计划的作业，这将是一个问题
*   委托令牌不依赖于 Kerberos，并且可以与边缘使用的非 Kerberos 身份验证机制（例如 SSL）结合使用。

在您的情况下，您可以使用私有分布式缓存并发送可转发的 TGT。我认为这没问题，但需要再考虑一下。显然，您需要确保您的实施是安全的，您的票证具有最低限度的必要生命周期，如果可能的话使用 IP 通道绑定，并将票证的使用仅限于授权流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:16:00.367

通过分解 Credentials 字段并使用 Base64 编码器将它们转换为字符串，形成 JSON 字符串并使用 RVM 建议的配置映射或分布式缓存将其传递给 Hadoop，然后在 Hadoop 上运行的作业中重构 Credentials 对象，我可以回来Kerberos TGT 并使用它成功获取任何服务票证。所以这种方法是有效的，这里唯一需要非常小心的是对通过网络传递的密钥进行加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:31:02.353

首先，您的帐户必须启用委派。服务票证必须请求可转发票证。如果这一切都是真的，Hadoop 必须从 中检索委托凭证`GSSContext`并代表您构建一个新凭证。有了这个新的 TGT，它将能够执行进一步的步骤。使用 Wireshark 检查 hadoop 的票证。**

# c# - 通用点位

> ID：11656545
> 
> 赞同：0
> 
> 时间：2012-07-25T18:48:03.740
> 
> 标签：c#, winforms

有没有办法知道点的通用坐标？

我的意思是：
我们有一个按钮，当应用程序最大化时，可以通过单击 (500;500) 来按下该按钮；当应用程序窗口为600x600时，是否可以知道点击哪个点来按下按钮；

等等。有什么函数可以计算这样一个点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:44:29.570

我认为没有通用功能，因为任何开发人员都可以根据屏幕尺寸更改外观。

但是，不同的方法可能会起作用：

1.  以某种方式获取感兴趣的按钮/元素的句柄，然后调用其单击命令，或使用该句柄获取屏幕上的坐标位置。

    *   例如，对于网页，您可以通过名称（或 id）获取特定的 HTMLElement，然后从那里向后工作。

    *   如果它是一个 Windows 窗体应用程序，您实际上可以获得该应用程序窗口的句柄，然后通过遍历它们来获取所需的元素/组件。

2.  创建不同最大化/恢复/移动下的按钮位置列表，并从中计算函数。（也许制作一个计算机程序来帮助解决这个问题）。

3.  作为最后的手段，例如对于随机移动按钮以混淆机器人的应用程序（我想不出任何现实生活中的例子），您可能需要对屏幕截图进行图像分析。

Visual Studio 中的 spy++ 工具有一个查找工具，可以帮助获取 Windows 应用程序的窗口/元素名称。

# swing - 如何在程序中选择表中的一组特定行，而用户无需使用鼠标选择它们？

> ID：11656546
> 
> 赞同：0
> 
> 时间：2012-07-25T18:48:08.123
> 
> 标签：swing

我正在使用 JTable。假设我有一个包含以下信息的表 -

```
 **col1     col2    col3    col4** 
```

**row1** --- value1 --- --- **row2** --- value2 --- --- **row3** --- value3 --- --- **row4** --- value3 --- --- **row5** --- value1 - -- --- **第 6 行** --- 值 1 --- --- **第 7 行** --- 值 2 --- --- **第 8 行** --- 值 1 --- ---

我需要将 col2 值为“value1”的行复制到另一个表中。

为了手动选择行（鼠标单击），有一个名为 getSelectedRows() 的函数，工作将在几秒钟内完成，即

int [] 行 = inputTable.getSelectedRows(); // "rows" 获取表中行的索引数组

但现在我需要在没有鼠标选择的情况下做同样的事情。即 int [] rows 应该在不使用上述方法的情况下获取行索引，但我可以使用任何其他方法而无需鼠标选择...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:55:33.967

```
List<String> searchedRows = new ArrayList<String>(); 
for (int rowIndex=0; rowIndex < rowCount; rowIndex++) {
  String value = (String)table.getValueAt(rowIndex,varColNumber); 
  if ("value1".equals(value)) {
    searchedRows.add(rowIndex);
  } 
 } 
 // here in the List searchedRows you have the rows numbers where the column is equals to the string "value1". 
```

希望能帮助到你..

# php - 使用 phpPGAdmin 将文本文件导入 postgreSQL 的文件大小限制

> ID：11656547
> 
> 赞同：2
> 
> 时间：2012-07-25T18:48:14.427
> 
> 标签：php, phppgadmin

我仍在尝试将大型文本文件导入 phpPgAdmin 并且没有成功。我更改了 php.ini 文件中的以下字段，但没有帮助。

我将以下字段更改为：

```
upload_max_filesize = 3G
post_max_size = 4G
memory_limit = 5G 
```

我相信超时默认值为 30 秒（我没有更改），但我立即收到错误消息说“没有提供服务器！” 或“导入错误：文件无法上传到服务器”。

与我尝试导入的 2GB 文本文件相比，这些文件非常小。我能够导入的最大文件是 1.6 MB。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:31:33.677

这个错误发生在我身上，解决方案非常简单（很容易被忽略）。这是一篇较旧的帖子，但由于它首先出现在谷歌搜索中，我希望我可以节省一些时间。重新启动 apache，更改应该会生效。干杯!

# javascript - 判断视频是否被点击

> ID：11656549
> 
> 赞同：0
> 
> 时间：2012-07-25T18:48:18.487
> 
> 标签：javascript, html, ads

我正在尝试在我的网站上注册/记录广告点击。我运行视频广告，想知道是否可以通过某种方式注册广告点击。

我正在考虑的一个想法是在视频上放置一个 div，然后 onclick 执行一些功能 foo。

你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:38:13.107

如果您使用 Google Anlytics，您可以将其添加到您要跟踪的每个 div。在 GA 中，它将按用户点击的页面和点击的视频来组织点击。

```
onclick="_gaq.push(['_trackEvent', 'Video', window.location.pathname , href]);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:22:02.587

我不确定这是否正是您要寻找的。我建议将 div 包裹在您要计算的任何内容上。

```
var clicks = 0;
$('#someDiv').click(function(){
    clicks++;
}); 
```

这将计算用户点击该 div 的次数。或者，如果您只想查看用户是否点击了 div：

```
$('#someDiv').click(function(){
    alert('you clicked on a div');
}); 
```

# android - 我可以让两个不同的源将数据传递给数组适配器吗？

> ID：11656551
> 
> 赞同：0
> 
> 时间：2012-07-25T18:48:20.963
> 
> 标签：android, arrays, input, adapter

我正在尝试将来自两个不同来源的数据添加到数组适配器。一个来源来自包含硬编码字符串的微调器，另一个来源是允许用户创建自己的字符串以传递给数组（通过适配器）。下面是我的代码。在我看来，数组适配器根据可以传递给它的参数只能排除一个数据源......即

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource
(this, R.array.alarmList, android.R.layout.simple_spinner_item ); 
```

在这里我只能猜测实际的字符串输入是从............ android.R.layout.simple_spinner_item 我需要使用另一个数组适配器还是有办法将我的字符串变量添加到adaoter以及用户从微调器中选择的项目？我在这里做了一些研究，但画了一个空白！非常感谢。这是我的代码，它尝试将字符串输入到适配器............

```
public class NewAlarm extends Activity {

Spinner alarms;
//private Button b =  (Button) findViewById(R.id.btnAddCustom);
final EditText et =  (EditText) findViewById(R.id.edittext);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newalarm);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.alarmList, android.R.layout.simple_spinner_item );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    //et.setText("name");
    alarms = (Spinner) findViewById(R.id.cmbAlarms);
    alarms.setAdapter(adapter);
}

public void addAlarm(View view) {
    MainMenu.alarmList.add(new Alarm(alarms.getSelectedItem().toString()));
    Toast.makeText(getApplicationContext(), "Added " +      alarms.getSelectedItem().toString() + " alarm.", Toast.LENGTH_SHORT).show();
    NewAlarm.this.finish();
}

public void addCustomAlarm (View view){

    MainMenu.alarmList.add(new Alarm(et.getText().toString())); 
}

} 
```

这是我的阵列适配器代码............

```
 public View getView(final int position, View convertView, ViewGroup viewGroup) {
      if (convertView == null) {
          LayoutInflater inflater = (LayoutInflater)     context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          convertView = inflater.inflate(R.layout.alarm_item, null);
      } 
```

多谢你们！！

```
 // Get a handle on the UI controls
      TextView name = (TextView) convertView.findViewById(R.id.txtAlarmName);
      final TextView timeStamp = (TextView) convertView.findViewById(R.id.txtTimeStamp);
      // if the value of the timestamp from the alarm at the position selected is not a null value then set the text label to the alarm timestamp value
      if (MainMenu.alarmList.get(position).getTimeStamp() != null)
          {
            timeStamp.setText(MainMenu.alarmList.get(position).getTimeStamp().toString());
          }
      // Set the alarm name 
      name.setText(listItems.get(position).getName());
      // Get a handle on the button
      Button btnCheckNow = (Button) convertView.findViewById(R.id.btnCheckNow);

      btnCheckNow.setOnClickListener(new OnClickListener() {
          public void onClick(View view) {
              // Set the timestamp of the alarm object at the selected position
              MainMenu.alarmList.get(position).setTimeStamp();
              // Set the timestamp label 
              timeStamp.setText(MainMenu.alarmList.get(position).getTimeStamp().toString());
             }
      });
      return convertView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:07:58.307

在创建适配器之前，不要调用`ArrayAdapter.createFromResource()`，而是导入数组并添加字符串：

```
CharSequence[] array = Arrays.asList(
        getResources().getTextArray(R.array.alarmList));
List<CharSequence> list = new ArrayList<CharSequence>(array);

list.add("custom string");

ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(this, 
        android.R.layout.simple_spinner_item, list); 
```

# ms-access - 如何从前端访问数据库后端执行 VB 代码？

> ID：11656552
> 
> 赞同：3
> 
> 时间：2012-07-25T18:48:24.493
> 
> 标签：ms-access, vba, backend, frontend

我将我的数据库拆分为一个包含数据表的后端和一个包含表单、查询、报告和模块的前端，并链接表。其中一张表从 Excel 表中获取数据；通常我会使用链接表，但如果打开任何查询，则无法打开 excel 表，因此我使用保存的导入将所有数据从 excel 表中提取到表中。

现在，我想在我的前端菜单上添加一个按钮，`DoCmd.RunSavedImportExport "savedimportnamehere"`除了保存的导入在后端之外运行，所以我必须将该命令发送到后端......我不太确定如何要做到这一点。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:52:13.120

您可以针对 MS Access 实例运行命令，因此：

```
Dim apAccess As New Access.Application
apAccess.OpenCurrentDatabase ("c:\docs\backend.mdb")
apAccess.DoCmd.RunSavedImportExport "savedimportnamehere" 
```

您还可以针对 db 或连接的实例运行查询：

```
sSQL="INSERT INTO Table1 ( ADate ) " _
& "SELECT SomeDate " _
& "FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xls].[Sheet1$a1:a4]" 
```

# iphone - 如何将 json 对象作为参数传递给 Web 服务？

> ID：11656554
> 
> 赞同：0
> 
> 时间：2012-07-25T18:48:30.360
> 
> 标签：iphone, objective-c, json, nsmutableurlrequest

我正在使用一个以 json 对象作为参数的 web 服务。这是我的代码：

```
 -(void)createHttpHeaderRequest {

        NSString *x = @"{\"GetVehicleInventory\": {\"ApplicationArea\": {\"Sender\": {\"ComponentID\":}}}" (something like that)

        NSString *sample = [NSString stringWithFormat:@"https://trialservice.checkitout?XML_INPUT=%@",x];
 NSString * final = (NSString *) CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)sampleReq, NULL, CFSTR(":/?#[]@!$&'()*+,;=\""), kCFStringEncodingUTF8);
 NSMutableRequest *request = [NSMutableREquest requestWithURL:[NSURL URLWithString:final]];
    NSURLConnection * theConnection = [[NSURLConnection alloc]initWithRequest:theRequest delegate:self];
        if (theConnection) {
            NSLog(@"Service hit");
        }
    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        NSError * error;
        NSDictionary * dict = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error];
        NSArray * categories = [dict objectForKey:@"category"];
        [self.delegate giveControlBackToController:categories];

    } 
```

当我尝试 NSLog 示例时，它会为我提供完整的 URL，粘贴到浏览器中会返回结果，但是当我在请求上调用 NSLog 时，它显示为 null，此后什么也没有发生。控件永远不会转到其 NSURLConnection 委托方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:54:29.163

诀窍是大多数浏览器会自动转义 URL，而 NSURL 不会。您需要手动完成；看看[CFURLCreateStringByAddingPercentEscapes](http://www.google.hu/url?sa=t&rct=j&q=cfurlcreatestringbyaddingpercentescapes&source=web&cd=2&ved=0CF0QFjAB&url=http://www.bagonca.com/blog/2009/04/08/iphone-tip-1-url-encoding-in-objective-c/&ei=qUAQULfPKsz1sgaA0YHoCA&usg=AFQjCNH7KgY378BfxzANF1AXlZn7Tkn6uA)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:13:07.990

这可能应该是评论而不是答案，但不幸的是，您无法在评论中格式化代码。将以下方法添加到您的委托，并查看它是否被调用。如果是这样，请告诉我们响应是什么。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
    NSLog(@"Connection response code: %d", httpResponse.statusCode);
} 
```

# facebook - 使用 facebook 批处理 api 将同一张照片发布到多个 facebook 页面

> ID：11656556
> 
> 赞同：1
> 
> 时间：2012-07-25T18:48:37.303
> 
> 标签：facebook, photo, facebook-batch-request

所以这就是我想要做的。我正在尝试使用 facebook 批处理 api 同时将单张照片发布到多个 facebook 页面。我首先将所有内容放入一个数组（fb_batch）中，然后使用 JSON 对其进行编码。此方法适用于发布消息和链接。在下面的示例中，@pages 数组是一个 facebook 页面数组，其中包含 facebook 页面信息，包括有效的访问令牌。我知道访问令牌是有效的，因为在程序的其他地方我可以使用相同的访问令牌发布单张照片。

```
fb_batch = []
top_access_token = nil
@pages.each do |page|
  top_access_token = page.access_token if top_access_token.nil?
  if image.nil?
    fb_batch << {method: 'POST', relative_url: 'me/feed?access_token=' + page.access_token, body: body}
  else
    fb_batch << {method: 'POST', relative_url: 'me/photos?access_token=' + page.access_token, body: body, attached_files: 'file1'}
  end
end

c = Curl::Easy.new('https://graph.facebook.com')
c.multipart_form_post = true
c.verbose = true
post_data = [Curl::PostField.content('access_token', top_access_token), Curl::PostField.content('batch', fb_batch.to_json)]
post_data << Curl::PostField.file('file1', image.image.current_path) if !image.nil?
c.http_post(post_data) 
```

请注意，如果有图像，我只添加文件。因此，当我发布消息或链接到多个帐户时，相同的代码也适用。

当我将图像发布到多个帐户时出现错误。它将图像应用到 f​​b_batch 数组中的第一个帐户，但所有其他帐户都有错误。我是否必须为每个帐户单独附加图像我希望将照片发布到具有不同附加文件名的每个图像？对我来说，这意味着请求将是巨大的，因为如果我要发布到 50 个帐户，我可能必须附加相同的图像 50 次。

这是我从 facebook 得到的回复：

Access-Control-Allow-Origin","value":"*"},{"name":"Cache-Control","value":"no-store"},{"name":"Connection"," value":"close"},{"name":"Content-Type","value":"text/javascript; charset=UTF-8"},{"name":"Expires","value":"2000 年 1 月 1 日星期六 00:00:00 GMT"},{"name":"Pragma","value":" no-cache"},{"name":"WWW-Authenticate","value":"OAuth \"Facebook Platform\" \"invalid_request\" \"(#1) 发生未知错误\""}], "body":"{\"error\":{\"message\":\"(#1) 发生未知错误\",\"type\":\"

对不起，它很乱。您可以看到第一个代码是 200，它成功发布了图像并返回了图像 ID。第二个代码是 400 表示发生未知错误。我认为这意味着它找不到图像或类似的东西。如果我在数组中切换两个帐户，那么它将成功发布到另一个帐户，并且将在刚刚成功的帐户上失败。

感谢您一直阅读到最后！这是你的金罐...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:31:01.167

我的回答有点绕着调试你的问题，并提供了一个可能的替代方案。早在去年，Facebook就[推出了](https://developers.facebook.com/blog/post/526/)通过提供源 URL 而不必提供多部分数据来上传照片的功能。因此，我推荐以下解决方法：

1.  将您要使用的图像上传到 Facebook CDN 之外的某个位置（使用 CDN 媒体上传到 Facebook 可能会出现问题）
2.  获取所述图像的 URL
3.  不要拨打您当前的电话，而是将其简化为 PAGEID/photos?access_token=PAGETOKEN&url=URLOFPHOTO

这会将照片直接发布到主页的时间轴。批处理该调用不应该有任何区别。希望这可以帮助！

# python - 如何逐步使用 python 调试器在每个函数调用时中断？

> ID：11656560
> 
> 赞同：5
> 
> 时间：2012-07-25T18:48:59.293
> 
> 标签：python, debugging, pdb

我想密切监视从某个函数调用的函数调用链。

```
import pdb; pdb.set_trace()
res = api.InsertVideoEntry(video_entry, video) 
```

我正在寻找一种方法来轻松查看`api.insertVideoEntry(video_entry, video)`调用`foo()`哪个调用`bar()`哪个调用`baz()`，

这是一个非常粗略的图表来说明我的意思。我不需要这种形式的信息，但这是我正在寻找的那种信息。

```
api.insertVideoEntry()
    foo()
        bar()
            baz()
            baz2()
        log()
    finish() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:50:33.840

这是一次有趣的学习经历。也许您可以使用此处显示的代码？[该演示](http://ideone.com/W3scL)应该让您了解使用`trace`.

```
# Functions to trace
# ==================

def baz():
    pass

def baz2():
    pass

def bar():
    baz()
    baz2()

def log():
    pass

def foo():
    bar()
    log()

def finish():
    pass

def insertVideoEntry():
    foo()
    finish()

# Names to trace
# ==============

names = list(locals())

# Machinery for tracing
# =====================

import os
import sys

def trace(start, *names):
    def tracefunc(frame, event, arg):
        if event == 'call':
            code = frame.f_code
            name = code.co_name
            if name in names:
                level = -start
                while frame:
                    frame = frame.f_back
                    level += 1
                print('{}{}.{}()'.format(
                    '    ' * level,
                    os.path.splitext(os.path.basename(code.co_filename))[0],
                    name))
                return tracefunc
    sys.settrace(tracefunc)

# Demonstration of tracing
# ========================

trace(2, *names)

insertVideoEntry() 
```

如果您对递归演示感兴趣，您可能会喜欢[这种](http://ideone.com/ltcnQ8)带有调用参数读数的变体：

```
import os
import sys

def main(discs):
    a, b, c = list(range(discs, 0, -1)), [], []
    line = '-' * len(repr(a))
    print(a, b, c, sep='\n')
    for source, destination in towers_of_hanoi(discs, a, b, c):
        destination.append(source.pop())
        print(line, a, b, c, sep='\n')

def towers_of_hanoi(count, source, via, destination):
    if count > 0:
        count -= 1
        yield from towers_of_hanoi(count, source, destination, via)
        yield source, destination
        yield from towers_of_hanoi(count, via, source, destination)

def trace(start, *names):
    def tracefunc(frame, event, arg):
        if event == 'call':
            code = frame.f_code
            name = code.co_name
            if name in names:
                level = -start
                args = ', '.join(repr(frame.f_locals[name]) for name in
                                 code.co_varnames[:code.co_argcount])
                while frame:
                    frame = frame.f_back
                    level += 1
                print('{}{}.{}({})'.format(
                    ' ' * (level * 4),
                    os.path.splitext(os.path.basename(code.co_filename))[0],
                    name, args))
                return tracefunc
    sys.settrace(tracefunc)

if __name__ == '__main__':
    trace(3, 'main', 'towers_of_hanoi')
    main(3) 
```

# c++ - Win32自定义资源能有多大？

> ID：11656564
> 
> 赞同：9
> 
> 时间：2012-07-25T18:49:08.190
> 
> 标签：c++, visual-studio-2010, winapi

尝试创建类似于 SFX（自解压安装程序）的东西，我使用 Visual c++ 中的自定义资源将设置文件包含在一个 exe 中。当安装文件的大小超过 ~900 MB 时，链接器无法生成嵌入资源的 exe。奇怪的是，链接器确实生成了一个没有任何警告的 exe。生成的 exe 是一个静态链接的 MFC App（可执行文件的主应用程序）。但是，不包括任何资源。我在从控制台链接期间观察了 exe 大小。它之前显示 900 MB，最后下降到 2MB exe。如果我删除了一些文件（比如总大小为 500MB），则生成的 exe 一切正常，并且嵌入了所有资源。自定义资源是否有实际大小限制？请注意，可执行文件的最终大小约为 1GB，这比 2GB win32 应用程序可以解决的要小得多。所以我想知道这是 vc++ 2010 的错误还是功能？顺便说一句，我还使用了 /expectedoutputsize 技巧。但这无济于事，除非链接速度更快，预期输出大小更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T04:00:18.290

迟来的答案。可能对其他人有帮助。可能不是您问题的答案，但这可能是您问题的解决方案。检查“Bitrock 安装程序”。这也提供了自解压安装程序。我在我的许多部署项目中都成功地使用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:47:31.443

根据[PECOFF 规范](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)，资源数据条目的大小为 4 个字节（IMAGE_RESOURCE_DATA_ENTRY.Size - 参见 winnt.h）

> Data RVA 字段指向的资源数据的大小（以字节为单位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T12:31:19.233

我在[这里](https://stackoverflow.com/questions/20260356/how-to-add-and-use-zip-or-pak-files-to-c-project/20261296#20261296)回答了类似的答案。

基本上将二进制+幻数（唯一分隔符）附加到可执行文件的末尾。在运行时打开可执行文件进行读取，通过幻数或其他方法找到偏移量，文件的其余部分就是您的大数据。

# google-maps - 工作谷歌地图 v3 现在显示空白画布

> ID：11656565
> 
> 赞同：0
> 
> 时间：2012-07-25T18:49:15.220
> 
> 标签：google-maps, google-maps-api-3, google-api

所以这些谷歌地图工作正常，然后突然就不行了。我所做的唯一更改是为标记上传新图像。经过检查，我可以看到新标记正在正确加载，并且控制台没有产生错误（Chrome 和 FF）。我试过在真假之间翻转传感器，也没有运气。当我删除传感器属性时，它会退回需要它的标准警报错误。

我错过了一些简单的东西吗？

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=MYAPIKEY&sensor=false">
</script>

<script type="text/javascript">
  var wildbasin = new google.maps.LatLng(30.310716, -97.824238);
  var seucampus =  new google.maps.LatLng(30.229723, -97.755275);
  var austin =  new google.maps.LatLng(30.275079, -97.792053);
  var basinm = 'http://www.test.stedwards.edu/sites/default/files/wildbasinmarker_1.png';
  var campusm = 'http://www.test.stedwards.edu/sites/default/files/maincampusmarker_0.png';
  var map;
  function initialize() {
    var myOptions = {
      zoom: 12,
      center: austin,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

  var  campus = new google.maps.Marker({
    position: seucampus, 
    map: map,
    title:"St.Edward's University",
    icon: campusm

});   

  var  thebasin = new google.maps.Marker({
    position: wildbasin, 
    map: map,
    title:"Wild Basin",
    icon:basinm

});   

}
     google.maps.event.addDomListener(window, 'load', initialize);
</script>

<div id="map_canvas"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:34:16.763

虽然地图默认为 100% 宽度，但您需要为包含的 div 设置高度。例如，这将解决您的问题：

```
<div id="map_canvas" style="height:400px;"></div> 
```

# php - 不能在 mysql_query() 中使用变量？

> ID：11656568
> 
> 赞同：0
> 
> 时间：2012-07-25T18:49:35.890
> 
> 标签：php, mysql

这与男孩和女孩一样基本。

我有一个非常简单的脚本，它不起作用。我调用数据库并测试它的连接，我进行查询，存储结果并打印结果。

问题是我似乎无法在我的 SQL 语句中使用任何变量。

这是代码：

```
<?php

    $rest_name = $_GET['rest_name']; // outputs 'Starbucks'

    $test = mysql_query("SELECT code_id FROM table_code WHERE restaurant = '$rest_name'");

    /* I've also tried these as well
    $test = mysql_query("SELECT code_id FROM table_code WHERE restaurant = '".$rest_name."'");
    */

    $mark = mysql_result($test,0);

    echo $_GET['rest_name'].$mark; 
?> 
```

我回应了查询，它看起来很好并且在数据库中运行良好。$rest_name 变量的回声很好。$_GET['rest_name'] 回声很好。我对此感到迷茫和困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:51:01.920

1 - 你可以从这个开始。

```
$test = mysql_query("S....") or die(mysql_error()); 
```

这样你就会看到你得到了什么错误。

2 - 您可能希望避免在查询中使用用户提供的变量

```
$rest_name = mysql_real_escape_string($_GET['rest_name']); 
```

否则用户可以插入自己的 sql 命令；

3 - mysql_xxx 函数已被弃用，您可能想研究 pdo 或 mysqli 以了解新方法的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:06:14.893

验证您是否具有由 msyql_query 返回的有效结果集

```
$test = mysql_query("SELECT ... ");
if (!$test) {
    die(mysql_error());
} 
```

（可能您没有连接到 MySQL 实例，您在错误的数据库中，您连接的用户没有权限等）

在使用之前检查结果集。

* * *

**注意：**不要使用 mysql_ 函数，而是使用 mysqli 或 PDO。

# java - 使用文本输入在/和之间搜索访问日期列

> ID：11656570
> 
> 赞同：0
> 
> 时间：2012-07-25T18:49:37.270
> 
> 标签：java, sql, ms-access

我有一个需要 2 个日期的表格。

```
<form name="dateInput" action="dateResult.jsp" method="get">
<input type="text" name="startDate" />
<input type="text" name="endDate" />
<input type="submit" value="Submit" />
</form> 
```

我希望它能够过滤并向我显示在结果页面上的两个输入之间有日期的所有记录。

将文本解析为日期：

```
<%
  DateFormat formatter;
  formatter = new SimpleDateFormat("MM/dd/yyyy"); 

  String startDay; 
  startDay = request.getParameter("startDate");

  java.util.Date startingDay = formatter.parse(startDay);

  String endDay;
  endDay = request.getParameter("endDate");

  java.util.Date endingDay = formatter.parse(endDay);
%> 
```

SQL查询：

```
rs = stmt.executeQuery( "SELECT * FROM [Inventory Tracking] WHERE [Inventory Tracking].[Purchase_Date] => "+ startingDay +" AND < "+endingDay); 
```

我已经搞砸了几个小时，每次更改都会返回空白结果页面或错误页面。我究竟做错了什么？

我应该将 java.util.Date 转换为 java.sql.Date 吗？

我应该使用 BETWEEN/AND 代替 < 和 > 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:09:34.430

您的查询肯定不会起作用，因为您最终会执行如下所示的查询：

```
SELECT * FROM [Inventory Tracking] WHERE [Inventory Tracking].[Purchase_Date] => Jul 25 15:00:40 EDT 2012 AND < Jul 25 15:00:40 EDT 2012. 
```

当然取决于你的日期。如果你只是使用 java.sql 包，你实际上可以使用 PreparedStatement。

```
PreparedStatement ps = conn.prepareStatement("SELECT * FROM [Inventory Tracking] WHERE [Inventory Tracking].[Purchase_Date] => ? AND [Inventory Tracking].[Purchase_Date] < ?");
            try {
                ps.setDate(1, endDate);
                ps.setDate(2, start);
                ResultSet rs = ps.executeQuery();
                try {
                    while (rs.next()) {
                        // for each row logic
                    }
                } finally {
                    rs.close()
                }
            } finally {
                ps.close();
            } 
```

您的 endDate 和 startDate 应该是 java.sql.Date 的实例。

# subset - 使用 IDL 和 ENVI 在批处理模式下对图像进行空间子集化

> ID：11656573
> 
> 赞同：0
> 
> 时间：2012-07-25T18:49:39.157
> 
> 标签：subset, spatial, idl, idl-programming-language, envi

我想使用 IDL 程序对 ENVI 中的 LANDSAT 照片进行空间子集化。我有超过 150 张图像要进行子集化，所以我想以批处理模式运行程序（没有交互）。我知道如何手动操作，但是我会使用什么命令通过 IDL 代码中的纬度/经度坐标对图像进行空间子集化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:21:00.600

这是一个文件的一些灵感。您可以通过构建文件名列表并循环遍历它来对大量文件执行相同的操作。

```
; define the image to be opened (could be in a loop), I believe it can also be a tif, img...
img_file='path/to/image.hdr'
envi_open_file,img_file,r_fid=fid
if (fid eq -1) then begin
    print, 'Error when opening file ',img_file
    return
  endif

; let's define some coordinates
XMap=[-70.0580916, -70.5006694]
YMap=[-32.6030694, -32.9797194]
; now convert coordinates into pixel position:
; the transformation function uses the image geographic information:
ENVI_CONVERT_FILE_COORDINATES, FID, XF, YF, XMap, YMap
; we must consider integer. Think twice here, maybe you need to floor() or ceil()
XF=ROUND(XF)
YF=ROUND(YF)

; read the image
envi_file_query, fid, DIMS=DIMS, NB=NB, NL=NL, NS=NS
pos  = lindgen(nb)
; and store it in an array
image=fltarr(NS, NL, NB)
; read each band sequentially
FOR i=0, NB-1 DO BEGIN
   image[*,*,i]= envi_get_data(fid=fid, dims=dims, pos=pos[i])
endfor

; simply crop the data with array-indexing function
imagen= image[XF[0]:XF[1],YF[0]:YF[1]]

nl2=YF[1]-YF[0]
ns2=XF[1]-XF[0]

; read mapinfo to save it in the final file
map_info=envi_get_map_info(fid=fid)

envi_write_envi_file, imagen, data_type=4, $
  descrip = 'cropped', $
  map_info = map_info, $
  nl=nl2, ns=ns2, nb=nb, r_fid=r_fid, $
  OUT_NAME = 'path/to/cropped.hdr' 
```

# ios - 从应用程序内部进行 ios 设置捆绑操作

> ID：11656575
> 
> 赞同：0
> 
> 时间：2012-07-25T18:49:59.683
> 
> 标签：ios, settings.bundle

如果用户在我的应用程序的设置中（来自我的 settings.bundle）将设置切换为“ON”，我可以让应用程序在下次将应用程序置于前台/启动时将其切换回“OFF”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:30:51.223

绝对地。只需使用

```
[[NSUserDefaults standardUserDefaults] setBool: NO forKey:<your-key>] 
```

你可以走了。

# r - 从R中的类引用列表中获取类引用字段的最小值

> ID：11656577
> 
> 赞同：0
> 
> 时间：2012-07-25T18:50:17.357
> 
> 标签：r, for-loop

R 初学者在这里。

我有一个类引用列表。每个类都有一个字段“x”。我想找到列表中“x”最低的类引用。

在python中我会这样做：

```
return min(item.x for item in myList) 
```

我不确定上面的陈述类型是否有特定的术语（如果有人知道我想知道），但是有没有办法在 R 中做类似的事情？

如果不是，那么在 R 中实现这一目标的最佳方法是什么？

** 编辑重新。贾斯汀评论

这是列表的创建方式..

```
mylist <- list()
for (i in 1:10){
    mylist <- c(mylist, MyClass$new())
} 
```

在哪里：

```
MyClass <- setRefClass("MyClass",
                        fields = list(x = "numeric"),
                        methods = list(
                           initialize = function(){
                               x <<- sample(0:100, 1)
                           }
                        )
) 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:54:44.700

如果您想获得具有最小值 x 的 MyClass 的整个实例，而不仅仅是 x 的最小值（您似乎正在寻找前者），请考虑使用`which.min`类似以下内容：

```
mylist[[which.min(lapply(mylist, function(myClass) myClass$x))]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:21:55.363

您的列表只是一个可以使用其命名组件访问的列表：

```
> mylist[[1]]$x
[1] 66
> 
```

所以我评论中的答案将起作用：

```
> min(unlist(lapply(mylist, function(y) y$x)))
[1] 20 
```

我会把细节留给比我更了解 R 的 OO 的人......

# javascript - 如何在浏览器不冻结的情况下执行繁重的 javascript 代码？

> ID：11656578
> 
> 赞同：2
> 
> 时间：2012-07-25T18:50:17.920
> 
> 标签：javascript, html, scheduling, freeze

我有一个页面在加载后执行繁重的 javascript 代码。为了防止页面在加载时冻结，我将执行分成批次，中间有一些“不执行”时间（使用超时），并且事情运行良好。

最近，我不得不添加额外的重型 javascript 代码，这些代码可以在客户端操作时执行，但这些操作甚至可以在原始重型脚本执行完成之前发生。这一次，间隔操作将无济于事，因为在一个脚本的“停机时间”，另一个可以运行，反之亦然，这将导致浏览器冻结。

问题实际上更复杂，因为有多个此类操作，每个操作执行不同的繁重脚本，并且与其他脚本相比，每个脚本类型对于我希望它完成的速度有不同的“优先级”。

我的问题是，在这种情况下的常见做法是什么？我试着想办法解决它，但我能想到的只是一个相当复杂的解决方案，它几乎就像用 javascript 编写操作系统一样——即编写一个每 X 次执行的“管理器”代码（使用“中断”），并选择哪个“要切换到的上下文”（=现在应该运行哪个作业）等等......

然而，这对我来说听起来很复杂，我希望那里可能有其他解决方案。我的问题听起来像是我认为很多人以前偶然发现的问题，所以即使唯一的解决方案是我建议的，我也会假设有人已经写了它，或者有一些库支持。

任何帮助将不胜感激。谢谢你。

**== 编辑 ==**
通过“繁重的代码”，我的意思是例如对大量元素的 DOM 操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:56:29.890

您需要考虑将您的 UI/问题域定义为一组异步任务。在我为您制定更好的答案之前，这里有一些更深入的见解[http://alexmaccaw.com/posts/async_ui 。](http://alexmaccaw.com/posts/async_ui)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:08:27.993

如果您不想阻止您的脚本，您可以使用[web workers](http://en.wikipedia.org/wiki/Web_worker)。请参阅[MDN：使用 web worker](https://developer.mozilla.org/en/Using_web_workers)以获得很好的介绍。请注意，网络工作者仍然相对较新，大多数浏览器都不支持。

但是，如果您想支持所有浏览器*并*为您的“繁重脚本”添加某种优先级，您应该自己定义一些东西，例如：

```
function WorkerQueue(this_argument){
    this.queue = [];
    this.this_argument = this_argument;
    this.priority = 1;
}

WorkerQueue.prototype.enqueue = function(callback){
    this.queue.push(callback);
}

WorkerQueue.prototype.dequeue = function(){
    return this.queue.splice(0,1)[0];   
}

function WorkerPool(){
    this.pool = [];
    this.status = "running";
    this.timeout = null;
}

WorkerPool.prototype.addWorker = function(this_argument){
    this.pool.push(new WorkerQueue(this_argument));
    return this.pool[this.pool.length - 1];
}

WorkerPool.prototype.nextTask = function(){
    var max_priority = 0;
    var max_priority_task = this.pool.length;
    for(var i = 0; i < this.pool.length; ++i){
        if(this.pool[i].priority > max_priority && this.pool[i].queue.length !== 0){
            max_priority = this.pool[i].priority;
            max_priority_task = i;
        }
    }
     // pool is empty or all tasks have an invalid priority  
    if(max_priority_task === this.pool.length)
        return;

    if(this.pool[max_priority_task].this_argument)
        this.pool[max_priority_task].dequeue().apply(this.pool[max_priority_task].this_argument);
    else
        this.pool[max_priority_task].dequeue().apply();

    if(this.status !== "running")
        return;
    this.timeout = setTimeout(function(t){return function(){t.nextTask();};}(this),1000);
}

var Workers = new WorkerPool();
var worker1 = Workers.addWorker();
worker1.enqueue(function(){
    console.log("Hello");
});
worker1.enqueue(function(){
    console.log("World");
});

var worker2 = Workers.addWorker();
worker2.priority = 2;
worker2.this_argument = worker2;
worker2.enqueue(function(){
    console.log("Worker 2 - changing priority");
    this.priority = .2;
});
worker2.enqueue(function(){
    console.log("Worker 2 - after change"); 
});

Workers.nextTask(); 
```

[**演示**](http://jsfiddle.net/N9Ny7/)

在这种情况下，每个“繁重的脚本”都是一个工作者，它基本上是一个任务队列。您可以使用在池中创建一个新工作人员，并使用`addWorker`将任务添加到特定工作人员队列中`worker.enqueue(callback)`。

# oracle-apex - APEX 3.2：将数据从 .CSV 导出到 Oracle DB

> ID：11656588
> 
> 赞同：0
> 
> 时间：2012-07-25T18:51:11.403
> 
> 标签：oracle-apex

顶点 3.2 甲骨文 11

我的要求是创建一个允许用户加载 .CSV 文件的 GUI 进程，该文件只有 4 列并且可能有多行。然后用 .CVS 文件中的相应数据更新数据库中的数据表。

```
CSV file:
ID Number:  Field Name:  Channel:   Analyst:
123456      Title         Retail    John Smith
123456      City          Retail    John Smith

Current DB:
ID Number:  Field Name:  Channel:   Analyst:
123456      Title         Retail    (null)
123456      City          (null)    (null)

After Update DB
ID Number:  Field Name:  Channel:   Analyst:
123456      Title         Retail    John Smith
123456      City          Retail    John Smith 
```

任何想法或链接表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:10:37.873

提供文件浏览项，将文件上传到 wwv_flow_files。

然后解析BLOB内容，看这个链接：

[http://christopherbeck.wordpress.com/2012/04/03/parsing-a-csv-file-in-plsql/](http://christopherbeck.wordpress.com/2012/04/03/parsing-a-csv-file-in-plsql/)

评论也值得一读。例如，提到了 Alexendria PLSQL 实用程序库。这个库包含很多很多基于 plsql 的工具，值得一看！

[http://code.google.com/p/plsql-utils/](http://code.google.com/p/plsql-utils/)

> （引自 Morten 在博客中的评论）
> 
> 克里斯，
> 
> 正如我所指出的，最新版本的 csv_util_pkg 包可以在 Alexandria 库中找到，这确实支持可选的封闭值。
> 
> 我刚刚用您的示例数据对其进行了测试：
> 
> ```
>  select * from table(csv_util_pkg.clob_to_csv(‘normal,”commas,,,in the
>  field”,”"”enclosed”"”,”random “” double “” quotes”,”commas,,, “” and
>  double “”"” quotes”‘)) 
> ```
> 
> 这会将数据分成 5 列：
> 
> ```
>  c001 = normal c002 = commas,,,in the field c003 = “enclosed” c004 =
>  random ” double ” quotes c005 = commas,,, ” and double “” quotes 
> ```
> 
> （我想我应该从博客文章中删除旧代码，并指导人们下载最新的库代码。）
> 
> *   莫腾

此外，在评论中进一步展示了如何从 blob 转到 clob（因此可以使用张贴的方法。感谢 Christopher Beck）：

```
 function blob_to_clob( p_lob in blob ) return clob is
     l_clob_result   clob := 'X';
     l_dest_offsset integer := 1;
     l_src_offsset  integer := 1;
     l_lang_context integer := dbms_lob.default_lang_ctx;
     l_warning      integer;
  begin
     if p_lob is not null and length(p_lob) > 0 then
        dbms_lob.converttoclob(dest_lob     => l_clob_Result,
                               src_blob     => p_lob,
                               amount       => dbms_lob.lobmaxsize,
                               dest_offset  => l_dest_offsset,
                               src_offset   => l_src_offsset,
                               blob_csid    => dbms_lob.default_csid,
                               lang_context => l_lang_context,
                               warning      => l_warning);
        if l_warning != 0 then
           dbms_output.put_line('Function blob_to_clob warning:' || l_warning);
           return null;
        end if;
        return l_clob_result;
     else
        return null;
     end if;
  exception
     when others then
        dbms_output.put_line('Function blob_to_clob error:' || SQLCODE);
        return null;
  end blob_to_clob; 
```

您可以将列输出到全局临时表或集合，然后对此执行更新逻辑。（不过要小心 GTT 和 apex。只要您在同一个会话中就没有问题，但是如果您例如将此作为第二个进程，则不能保证会使用同一个会话！）

# java - 如何禁用 Tomcat JARScanner

> ID：11656596
> 
> 赞同：7
> 
> 时间：2012-07-25T18:51:52.520
> 
> 标签：java, tomcat, tomcat7, tomcat8

**如何：**禁用 Tomcat JARScanner？
**原因：**停止 Tomcat 扫描我的 LIB 文件夹中的每个 .jar。

根据[文档](http://tomcat.apache.org/tomcat-7.0-doc/config/jar-scanner.html)，它说可以在 context.xml 中禁用它。但它似乎不起作用。（可能是我遗漏了一些东西）我在论坛中进行了详尽的搜索，但找不到解决方案。

这是在 context.xml 中（还没有工作）：

```
<JarScanner scanClassPath="false" scanAllFiles="false" scanAllDirectories="false"></JarScanner> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-15T22:24:51.630

您应该将 JarScanner 元素添加为 context.xml 文件中根 Context 元素的子元素。

我在 war 文件中有这种 META-INF/context.xml 文件，用于禁用 JarScanner：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
    <JarScanner scanClassPath="false" scanAllFiles="false" scanAllDirectories="false"/>
</Context> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-30T11:54:14.407

您可以通过在以下位置打开文件来全局禁用 JarScanner 以获取用户定义的模式

```
%TOMCAT_HOME%/conf/catalina.properties 
```

并将文件名模式添加到`tomcat.util.scan.StandardJarScanFilter.jarsToSkip`列表中。例如，如果您想完全禁用 jar 扫描，您可以添加：

```
tomcat.util.scan.StandardJarScanFilter.jarsToSkip=\
*.jar,\ 
```

注意：如果您使用 JSTL，这当然可能会导致问题，因为扫描仪不会找到模板

# .net - 如何将 XML 加载到 IE 中

> ID：11656600
> 
> 赞同：0
> 
> 时间：2012-07-25T18:52:19.293
> 
> 标签：.net, xml

目前在 Visual Studio 中，我能够生成 XML，但我想在 IE 中打开结果。

标有箭头的代码行是我生成 XML 文件的地方，我在 XML 可视化器中右击可以看到它。我想在 IE 中打开 XML，以便我可以折叠和展开节点以方便使用。谁能告诉我如何在 IE 中查看 XML？

```
 public bool GenerateNETSXML(AccountPRC acct, User currentUser)
        {
            bool success = true;
            int nextTransactionSequence = 0;
            NetsXMLGen xmlGen = new NetsXMLGen();
       ---> string xml = xmlGen.GenerateNetsXml(acct, ref nextTransactionSequence); 
            System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
            byte[] xmlBytes = encoding.GetBytes(xml);
            RiskXML riskxml = new RiskXML(true);
            riskxml.GeneratedDate = DateTime.Now;
            riskxml.TransactionSequence = nextTransactionSequence;
            riskxml.NetsXML = xmlBytes;
            acct.CurrentRisk.LoadRiskXMLs(false);
            acct.CurrentRisk.RiskXMLs.Add(riskxml);
            return success;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:59:47.433

将其写入文件，如下所示：

```
string s = "<xml><foo></foo></xml>";
XmlDocument xdoc = new XmlDocument();
xdoc.LoadXml(s);
xdoc.Save("myfilename.xml"); 
```

然后像任何其他一样在 IE 中打开文件。

# javascript - 如何将 unix 时间戳转换为 JavaScript 日期对象（考虑时区）

> ID：11656601
> 
> 赞同：13
> 
> 时间：2012-07-25T18:52:37.673
> 
> 标签：javascript, date

```
var date = new Date(1257397200000​);
document.write(date);
​ 
```

运行上面我得到的代码`Wed Nov 04 2009 23:00:00 GMT-0600 (Central Standard Time)`

我正在寻找一种基于不同时区创建日期对象的方法，比如对于那个时间戳，我想获得像`Thursday, November 5th 2009, 00:00:00 (GMT -5)`.

请注意，根据上述两个时区，日期是不同的，**尽管它们代表相同的时间点**。我在 CST，这就是为什么创建的对象是使用 CST 生成的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T18:58:28.067

不，这些日期没有不同，因为它们不代表不同的时间点。两者都代表`Thu, 05 Nov 2009 05:00:00 GMT`。

`Date`JavaScript 中的对象与时区无关，它只表示时间点。包含时区的事实`Date.toString()`非常具有误导性， .**中没有时区信息`Date`**。自纪元以来，它只是毫秒左右的包装器。

您看到的时区基于操作系统/浏览器区域设置。**您不能`Date`在不同的时区创建对象**。考虑使用`getUTC*()`一系列方法来获取与浏览器时区无关的值。

顺便说一句，您的示例代码打印：

```
Thu Nov 05 2009 06:00:00 GMT+0100 (CET) 
```

在我的电脑上 - 这仍然是同一个时间点。

# 也可以看看

*   [烦人的javascript时区调整问题](https://stackoverflow.com/questions/7629286)

# sql - Delphi 2010 和 Unidac 的可视化 SQL 查询生成器

> ID：11656604
> 
> 赞同：3
> 
> 时间：2012-07-25T18:52:52.980
> 
> 标签：sql, delphi, delphi-2010, unidac

我们正在寻找适用于 Delphi 2010 和 Unidac 的免费软件或开源 Visual SQL Builder

我们目前允许我们的客户使用标准的备忘录字段和执行按钮对我们应用程序的数据库执行 SQL。我们希望增强此功能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:53:10.970

[OpenQueryBuilder](https://github.com/FastReports/OpenQueryBuilder)是我所知道的唯一一个。这并不是最好的架构，而且许可证有点不清楚。最初的开发者是 Borland 的一名员工，我不记得名字了，但是当我几年前试图追查他以澄清许可证时，他似乎在时间和空间上丢失了。

# asp.net-mvc-3 - MVC3 jquery ajax参数数据在控制器处为空

> ID：11656605
> 
> 赞同：2
> 
> 时间：2012-07-25T18:52:54.850
> 
> 标签：asp.net-mvc-3, jquery, kendo-ui

我有一个想要通过 jquery 调用更新的控制器操作。动作运行，但参数中没有数据。

我在要运行一些服务器代码的列中使用带有自定义命令的 kedoui 网格。

```
kendoui grid in view
...
columns.Command(command =>
{
    command.Custom("ToggleRole").Click("toggleRole");
});
... 
```

该模型的类型为 List<_AdministrationUsers>。

```
public class _AdministrationUsers
{
    [Key]
    [ScaffoldColumn(false)]
    public Guid UserID { get; set; }

    public string UserName { get; set; }

    public string Role { get; set; }
} 
```

这是我的 toggleRole 脚本：

```
<script type="text/javascript">
     function toggleRole(e) {
         e.preventDefault();
         var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
         alert(JSON.stringify(dataItem));

         $.ajax({
             type: "POST",
             url: '@Url.Action("ToggleRole", "Administration")',
             data: JSON.stringify(dataItem),
             success: function () {
                 RefreshGrid();
             },
             error: function () {
                 RefreshGrid()
             }
         });
     }
</script> 
```

这是我的控制器操作：

```
[HttpPost]
public ActionResult ToggleRole(string UserID, string UserName, string Role)
{
    ...
} 
```

**控制器动作触发，但任何参数中都没有数据。**

我将警报放在 javascript 中以验证“dataItem”变量中确实存在数据。警报文本如下所示：

```
{"UserID":"f9f1d175...(etc.)","UserName":"User1","Role","Admin"} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T19:02:11.650

您是否尝试在 ajax 帖子中指定 dataType 和 contentType ？

```
$.ajax({
             type: "POST",
             url: '@Url.Action("ToggleRole", "Administration")',
             data: JSON.stringify(dataItem),
             dataType: "json",
             contentType: "application/json; charset=utf-8",
             success: function () {
                 RefreshGrid();
             },
             error: function () {
                 RefreshGrid()
             }
         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:00:55.127

看起来您将整个对象作为一个 Json 字符串发布，而控制器需要三个字符串。如果您使用的是 MVC3，则参数名称还必须与控制器签名匹配。尝试解析您的数据对象，使其与控制器预期的输入相匹配。像这样的东西：

```
$.ajax({
             type: "POST",
             url: '@Url.Action("ToggleRole", "Administration")',
             data: { UserID: dataItem.UserID, UserName: dataItem.UserID, Role: dataItem.Role },
             dataType: "json",
             contentType: "application/json; charset=utf-8",
             success: function () {
                 RefreshGrid();
             },
             error: function () {
                 RefreshGrid()
             }
         }); 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:11:04.383

```
{"UserID":"f9f1d175...(etc.)","UserName":"User1","Role","Admin"} 
```

对我来说似乎不正确。你不想要这个吗？

```
{"UserID":"f9f1d175...(etc.)","UserName":"User1","Role" : "Admin"} 
```

注意“角色”：“管理员”

# c# - 确定泛型类型是否具有标准构造函数

> ID：11656608
> 
> 赞同：0
> 
> 时间：2012-07-25T18:53:11.967
> 
> 标签：c#, generics, reflection, constructor

让我们`T`成为一个泛型类型。我想做这样的事情：

```
T x = default(T);
if (T has standard constructor)
  x = new T(); 
```

当然，可以限制`T`为具有这种构造函数的类型，但我不想排除值类型。

你怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:59:45.090

你必须使用反射：

```
ConstructorInfo ci = typeof(T).GetConstructor(Type.EmptyTypes);
if (ci != null)
    x = (T)ci.Invoke(null); 
```

您也可以使用`Activator.CreateInstance<T>()`，但如果构造函数不存在，则会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:56:47.033

*编辑：*

该问题指出

> 当然，可以将 T 限制为具有这种构造函数的类型，但我不想排除值类型。

使用下面显示的约束不限`T`于引用类型。*如果您出于其他原因*需要支持其他构造函数，请更新您的问题。

* * *

*（预编辑：毕竟可能不适用于问题）*

您正在寻找一个[*`new`约束*](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)（也称为无*参数构造函数约束）*：

```
class YourClass<T> where T : new()
{
    public T doSomething()
    {
        return new T();
    }
} 
```

`T`绝对允许作为值类型，例如：

```
YourClass<char> c = new YourClass<char>();
char result = c.doSomething(); 
```

# javascript - 在更新选择器中使用 $in 时插入多个文档

> ID：11656612
> 
> 赞同：4
> 
> 时间：2012-07-25T18:53:25.367
> 
> 标签：javascript, node.js, mongodb, mongodb-query

我正在编写一个程序，它将采用一个字符串数组，例如

```
var mywords = ["cat", "dog", "fish"] 
```

并将它们插入到 MongoDb 集合（称为“单词”集合）中。我想记录每个单词被插入集合的次数。有可能有些词已经在集合中，而有些则没有。

这有效：

```
var my_func = function(mywords) {
    //Get connection to db...

    mywords.forEach(function(word) {
        collection.update({name: word}, {$inc: {count: 1}}, {upsert: true});
    });
} 
```

惊人的。所以现在如果 {name: dog, count: 3} 是集合中唯一的文档并且我运行 my_func(["cat", "dog", "fish"])，那么集合现在将包含：

```
{name: dog, count: 4, _id: blah}
{name: cat, count: 1, _id: blah}
{name: fish, count: 1, _id: blah} 
```

这正是我想要的，除了我想在一次更新中完成这一切，即。不在 forEach 内。我试过这个：

```
var broken_func = function(mywords) {
    //Get connection to db...

    collection.update({name: {$in : {mywords}}, {$inc: {count: 1}}, {upsert: true, multi:true});
} 
```

但是，如果我从只包含 {name: dog, count: 3} 的同一个集合开始并运行 my_func(["cat", "dog", "fish"])，我的集合看起来像这样：

```
{name: dog, count: 3}
{count: 1} 
```

我希望 MongoDb 将文档的名称字段与 mywords 数组中的任何字符串匹配，并增加该文档的计数字段。如果 mywords 中没有与某个字符串相等的文档名称字段，则创建一个文档 {name: "stringFrom_mywords", count:1}。

我想做的事是否可行，如何实现我想要的行为？我觉得使用 forEach 并进行单独更新是低效的。如果您发现该信息有用，我碰巧正在使用 node.js MongoDb 驱动程序。我知道我的问题类似于这个红宝石问题[Upsert Multiple Records with MongoDb](https://stackoverflow.com/questions/5143756/upsert-multiple-records-with-mongodb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:41:03.403

虽然您可以使用 upsert 和 multi 标志运行更新，但它不会产生您想要的效果。您将需要运行三个单独的 upsert 命令，就像您对 forEach 示例所做的那样。

如果您希望将此功能添加到 MongoDB 的未来版本中，请随时在 SERVER 项目中打开 Jira 票证。

# c# - 复选框上的数据绑定

> ID：11656613
> 
> 赞同：2
> 
> 时间：2012-07-25T18:53:29.097
> 
> 标签：c#, sql, data-binding, checkbox

我目前正在将数据从我的一个 SQL 数据库中提取到我的应用程序中。我可以让它适用于我的文本框和其他项目，但是，我似乎无法让它适用于复选框。这是我正在使用的代码：

```
DataTable dt = new DataTable("dt");
using (SqlConnection sqlConn = new SqlConnection(@"Connection Stuff;"))
{
    using (SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Box WHERE id = " + txtID.Text, sqlConn))
    {
        da.Fill(dt);
    }
}
Title.DataBindings.Add("text", dt, "title");
Picture.DataBindings.Add("text", dt, "image");
Side.DataBindings.Add("text", dt, "side");
Content.DataBindings.Add("text", dt, "content");
Check.DataBindings.Add(I dont know what to do here); 
```

当复选框被选中和未选中时存储在数据库中的数据`0`分别是`1`。如果数据库中的值是，我如何将它设置为在应用程序加载时检查，`1`而当它是时未检查`0`？

我尝试了以下方法：

将`0`or存储`1`在文本框中并使用以下 if 语句：

```
Check.DataBindings.Add("text", dt, "check");
if (txtCheckValue.Text == 1)
{
    Check.Checked = true;
} 
```

这种方式有效，但我想知道是否有更有效的方法来做到这一点。希望遵循相同的`Thing.DataBindings.Add()`格式，原因是我不希望我的应用程序有很多隐藏的文本框。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:04:52.053

尝试

```
Check.DataBindings.Add("Checked", dt, "check"); 
```

第一个参数是控件的属性，所以不是“Text”，而是“Checked”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-09T13:46:07.860

> 尝试
> 
> ```
> Check.DataBindings.Add("Checked", dt, "check"); 
> ```
> 
> 第一个参数是控件的属性，所以不是“Text”，而是“Checked”。

这是对的。但是您需要知道的一件事（刚才花了我半个小时），复选框需要验证（使用默认设置）。例如，它需要失去焦点。

所以我发现更好的解决方案是：

```
Check.DataBindings.Add("Checked", dt, "check", false, DataSourceUpdateMode.OnPropertyChanged); 
```

# android - 什么时候应该调用finish()？

> ID：11656617
> 
> 赞同：0
> 
> 时间：2012-07-25T18:53:45.107
> 
> 标签：android, android-activity

我有一个通过意图调用第二个活动的活动。调用第二个活动后，我想完成第一个活动。因此，我在方法中有以下代码`onStop()`：

```
@Override
public void onStop() {
    super.onStop();
    if (shouldBeClosed) {
        finish();
    }
} 
```

问题是我的第一个活动没有关闭。我不明白为什么？
也许我应该把这段代码放进去`onPause()`？
但正如我在这种情况下所理解的那样，当活动失去焦点时（比如在调用对话框之后），我的活动可以关闭。
那么为什么会发生这种情况以及我如何纠正这种行为的问题呢？

PS 变量`shouldBeClosed`为真。这不是重点。

**编辑**

这是第二个活动的调用：

```
Intent intent = new Intent(this, AcSpContextAssign.class);
Bundle extras = new Bundle();
extras.putInt(Constants.KEY_FROM_ACTIVITY, Constants.FROM_AcSpNameCreate);
extras.putLong(Constants.KEY_SPID, spId);
intent.putExtras(extras);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:00:52.820

通常，您应该在发送意图后立即为您的第一个活动调用 finish()。就像是：

```
...
startActivity(secondActivityIntent);
finish(); 
```

这将为您的第一个活动触发 onPause()->onStop()->onDestroy() 链，因此您可以在那里执行正常清理

# string - SVG - 调整 tspan 的大小以填充所有可用空间

> ID：11656618
> 
> 赞同：1
> 
> 时间：2012-07-25T18:53:49.890
> 
> 标签：string, svg

我有`tspan`元素，里面有一些文字。我也`font-size`为它指定了一些。另外我有父母的盒子尺寸，即宽度和高度。所以现在我希望我的文本适合具有指定宽度和高度的框。

我拥有的选项之一是手动计算字符串`width`和`height`（但在不同字体和浏览器的情况下变得更加复杂）。

那么SVG中有没有其他方法可以调整`tspan`到必要的大小？请注意，我希望正确更改文本字体大小，即文本将以**最大**字体大小显示，并且其中的任何单个字符都将可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:41:00.497

好吧，我想出了以下解决方案 - 将`div`元素绝对定位在可见区域之外。将所有字体和其他相关样式（字体大小除外）应用`tspan`到该`div`，将文本放入`div`. 接下来尝试不同的大小（您可以使用二进制搜索以获得更好的性能）并测量`div`大小。一旦找到最大字体大小 - 将其与文本一起应用到`tspan`.

# asp.net - 缺少 Web API 控制器类模板 VS 2010

> ID：11656621
> 
> 赞同：3
> 
> 时间：2012-07-25T18:54:01.393
> 
> 标签：asp.net, webforms, asp.net-web-api

在 VS 2010 **WEB FORMS**项目中，我使用了 nuget "install-package Microsoft.aspnet.webapi"。

PM> install-package Microsoft.aspnet.webapi 正在尝试解决依赖项“Microsoft.AspNet.WebApi.WebHost (≥ 4.0.20505.0)”。正在尝试解决依赖项“Microsoft.Web.Infrastructure (≥ 1.0.0.0)”。正在尝试解决依赖项“Microsoft.AspNet.WebApi.Core (≥ 4.0.20505.0)”。正在尝试解决依赖项“Microsoft.AspNet.WebApi.Client (≥ 4.0.20505.0)”。正在尝试解决依赖项“Microsoft.Net.Http (≥ 2.0.20505.0)”。正在尝试解决依赖项“Newtonsoft.Json (≥ 4.5.1)”。已安装“Microsoft.AspNet.WebApi 4.0.20505.0”。

但是，当我转到“添加新项目...”时，在已安装的模板下，“Web API 控制器类”不可用。我还需要安装什么才能使模板显示出来。我没有安装 MVC4，在模板出现之前我还需要它吗？

![在此处输入图像描述](../Images/c8d44b8a9e4264081f2d86c8875ece6d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:37:48.203

Nuget 只为您提供运行 Web API 所需的程序集。

要使用 MVC4 Web Api Visual Studio 模板，您必须从此处安装 MVC4 包 - [http://www.asp.net/web-api](http://www.asp.net/web-api)。安装后，在“创建新项目”向导中，您必须选择 MVC4 模板，然后在下一个窗口中您可以选择 Web API 项目。

请注意，如果您不明确需要 MVC4 应用程序，则这不是必需的。您可以将 Web API 与几乎任何东西一起使用 - MVC3、Web 窗体、控制台应用程序、WPF 应用程序..它不依赖于 MVC4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T19:03:22.667

将目标框架更改为 4.0 为我解决了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:56:15.353

我认为您需要安装 ASP.NET MVC4 才能使模板出现在列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:22:57.060

我今天遇到了同样的问题。即使我安装了所有的 dll。然后我只是创建了一个新的“网站”而不是“Web 应用程序”，并且 webapi 控制器类模板出现在模板列表中。

奇怪但对我有用。你也可以试试。

另一方面，您可以从 NuGet 安装 System.Web.Http dll。然后你可以从 ApiCONtroller 类继承你的 CustomController 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-09T16:04:34.200

不要忘记您需要将目标框架设置为 .NET 4.x 才能看到 ASP.NET MVC 4 模板。

# javascript - 在 div 中使用 zoom:150% 淡入淡出并显示 none..在 IE9 中不起作用

> ID：11656622
> 
> 赞同：0
> 
> 时间：2012-07-25T18:54:04.750
> 
> 标签：javascript, jquery, css

我制作了淡入和淡出一个包含放大图像的 div，这在 Chrome、FF、Safari 中效果很好。但是在IE9下不行，Fade in and Fade out功能很好但是没有使用img zoomed，是使用img not zoomed。

```
the stylesheet:

#facearea
{
    zoom:150%;
    position:absolute;
    z-index :1;
       border: 0px black solid;

}

#facearea1
{

z-index: 2;
zoom:150%;
position:absolute;

}  

javascript/text
unction Mode_3_1() 
{ 

document.getElementById('facearea1').style.visibility = 'visible'; 
document.getElementById('facearea').style.visibility = 'visible'; 

document.getElementById('facearea').style.display = 'block'; 
document.getElementById('facearea1').style.display = 'none';
$('#facearea1').fadeIn( 1000 );
} 
```

我猜的问题是当我设置 display='none' 时，就像我设置 display='non' 之后当前 div 的所有“属性”都被忽略（例如缩放：150% 或不透明度）

我试图不使用 display:none 但 .hide() 或者只是更改 img 的不透明度但仍然无法正常工作

请问谁能给我一些关于这个incevenient的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:13:09.067

您可以尝试使用`zoom:1.5;`istead `zoom:150%;`。我希望这会奏效，因为我没有 IE9 来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:44:07.923

我通过将`!important`属性放在之后解决了这个问题`zoom:150%`

```
#facearea1,
#facearea
{
    zoom:150%!important;
    position:absolute;
    z-index:1;
    border: 0px black solid;
    top:190;
    left:80;
} 
```

# asp.net-mvc - 如何从我的 MVC3 应用程序导航到 Web 窗体 ASPX 页面？

> ID：11656623
> 
> 赞同：2
> 
> 时间：2012-07-25T18:54:05.270
> 
> 标签：asp.net-mvc, asp.net-mvc-3, reportviewer

我发现自己必须在我的 MVC3 应用程序中创建一个 Web 表单页面来托管 ReportView 控件，以便为我的用户显示 rdlc 报告。我看到很多关于如何去做这一切的建议，而且看起来很简单。

我想知道的是如何从基于 Razor 的视图到此报表查看器页面？我是否只是将内容网址“硬编码”到页面，还是有一些更礼貌的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:03:13.803

您可以通过在 global.asax 文件中添加路由来做到这一点。

```
 routes.MapRoute(
         "ReportRoute",                         // Route name
         "Reports/{reportname}",                // URL
         "~/Reports/{reportname}.aspx"   // File
      ); 
```

查看[带有源代码的 LeftyX 解决方案](https://stackoverflow.com/questions/5296485/bind-report-to-reportviewer-in-web-mvc2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:45:50.260

您可以使用`Url.Content`助手：

```
<a href="@Url.Content("~/report.aspx")">Show me the report</a> 
```

# vb.net - 将日期 dd/mm/yyyy 转换为 mm/dd/yyyy vb.net

> ID：11656632
> 
> 赞同：0
> 
> 时间：2012-07-25T18:54:46.153
> 
> 标签：vb.net

我有这个代码

```
 Dim conex As SqlConnection = New SqlConnection(conxst)
    Dim caixa As Integer = ComboBox1.SelectedItem
    Dim verdat As Date = DateTimePicker1.Text
    Dim verdat1 As Date = "05/07/2012"
    conex.Open()
    Dim ds As New DataSet
    Dim dt As New DataTable
    ds.Tables.Add(dt)
    Dim da As New SqlDataAdapter("select codigo,data,horario from alteraca where data = '" & verdat1 & "' ", conex)
    da.Fill(dt) 
```

当 verdat1 的格式为“mm/dd/yyyy”时，此代码有效，我如何将日期从我的 datetimepicker (dd/mm/yyyy) 转换为格式“mm/dd/yyyy”以放置在语句中？？？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:07:42.463

当您已经有二进制表示时，您不应该使用值的字符串表示。

```
Dim dt As New DataTable
Using conex As New SqlConnection(conxst)
    conex.Open()

    Using cmd As New SqlCommand("select codigo, data, horario from alteraca where data = @data", conex)
        cmd.Parameters.AddWithValue("@data", DateTimePicker1.Value)

        Using da As New SqlDataAdapter(cmd)
            da.Fill(dt)
        End Using
    End Using

End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:00:18.767

在 sql 查询中 - 使用 to_date 将字符串转换为日期 - 并转换为 char 进行反向

在你的情况下 `select codigo,data,horario from alteraca where data = to_date('" & verdat1 & "','dd/mm/yyyy') ", conex`

这`'dd/mm/yyyy'`是您的变量的格式...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:00:41.457

和

```
verdat1.ToString("MM/dd/yyyy") 
```

您可以选择如何将日期转换为字符串。

此外，您可以根据需要设置`dateTimePicker`自定义格式：

```
dateTimePicker1.Format = DateTimePickerFormat.Custom
dateTimePicker1.CustomFormat = "MM/dd/yyyy" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T19:07:54.610

实际上，进行查询的更好（和更安全）方法是使用参数和`Using`语句。该`Using`语句自动关闭连接、命令和适配器。

```
Dim caixa As Integer = ComboBox1.SelectedItem
Dim verdat As Date = DateTimePicker1.Text
Dim verdat1 As Date = "05/07/2012"
Dim ds As New DataSet
Dim dt As New DataTable

Using conex as New SQLConnection(conxst)
  conex.Open()
  Using cmdex as New SQLCommand("select codigo,data,horario from alteraca where data = @DATE " , conxst)
   cmdex.Parameters.AddWithValue("@DATE",verdat1)
   Using da As New SqlDataAdapter(cmdex)
     da.Fill(dt)
   End Using
  End Using
End Using 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T19:01:22.007

您可以像这样转换日期：

```
verdat1.ToString("MM/dd/yyyy") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-09T11:51:36.013

您可以使用 DateTimePicker1.value。很容易解决

# asp.net - UserControl 没有名为 ContentTemplate 的公共属性

> ID：11656637
> 
> 赞同：10
> 
> 时间：2012-07-25T18:55:14.433
> 
> 标签：asp.net, visual-studio-2010, visual-studio

这个问题之前已经被问过几十次了；但一直没有解决。

我有一个**`UpdatePanel`**

```
<asp:UpdatePanel ID="UpdatePanelSetupToolbar" runat="server">
   <ContentTemplate>
      ...           
   </ContentTemplate>
</asp:UpdatePanel> 
```

但是Visual Studio (2010 (Professional (Windows (7 (Professional (64-bit))))) 中的*可视化页面设计器给出了错误：*

> **创建控件时出错**- UpdatePanelSetupToolbar
> 
> 类型“System.Web.UI.UserControl”没有名为“ContentTemplate”的公共属性。

![在此处输入图像描述](../Images/4f66679406192258ccbc27decd1cbacb.png)
^(^(*编辑：在漂亮的屏幕截图中添加漂亮的颜色以获得漂亮的效果*))

现在，严格来说，这是真的**：**[`UserControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.usercontrol_properties)没有名为.**`ContentTemplate`**

 **幸运的是 my`UpdatePanel`是一个**`UpdatePanel`**，并且它**确实**有一个名为 的公共属性[`'ContentTemplate'`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.contenttemplate.aspx)。

那么我如何让 Visual Studio 相信 my`UpdatePanel`是一个`UpdatePanel`?

## 重要的附加说明

上面的代码实际上并没有按原样失败：

```
<asp:UpdatePanel ID="UpdatePanelSetupToolbar" runat="server">
   <ContentTemplate>
      ...           
   </ContentTemplate>
</asp:UpdatePanel> 
```

`...`只有当我在ContentTemplate中有内容时它才会失败：

```
 <asp:UpdatePanel ID="UpdatePanelSetupToolbar" runat="server">
        <ContentTemplate>
            <Vista:Toolbar ID="ToolbarSetup" runat="server">
                <ContentTemplate>
                    <asp:LinkButton ID="bbSetupDays" ToolTip="Specify how many allocations will be available on these selected days"
                    OnClick="bbSetupDays_Click"                                        
                    runat="server">Setup Selected Days</asp:LinkButton>         
                </ContentTemplate>
            </Vista:Toolbar>        
        </ContentTemplate>
    </asp:UpdatePanel> 
```

*   但 Visual Studio 并没有抱怨内部`ToolbarSetup`
*   它在抱怨外部`UpdatePanelSetupToolbar`控制

那么有什么关系

> 类型“%s”没有名为“%s”的公共属性。

?

## 不重要的附加说明

ASP.net 网站编译、构建和运行*良好*。抱怨的只是 Visual Studio (2010) 设计师。

那么有什么关系`Type '%s' does not have a public property named '%s'.`呢？

## 系列

这个问题是正在进行的 Stackoverflow 系列**“模板化用户控件”**中的一个：

*   [如何将模板添加到用户控件？](https://stackoverflow.com/questions/11658053/how-to-add-a-templating-to-a-usercontrol/11700540)
*   [如何从 Control 继承，而不是 UserControl？](https://stackoverflow.com/questions/12323303/how-to-inherit-from-control-rather-than-usercontrol)
*   [UserControl 有 IsPostBack，但 Control 没有](https://stackoverflow.com/questions/12321621/usercontrol-has-ispostback-but-control-does-not/12321692)
*   [UserControl 没有名为 ContentTemplate 的公共属性](https://stackoverflow.com/questions/11656637/usercontrol-does-not-have-public-property-named-contenttemplate)
*   [如何从 web.config 指定 CodeFileBaseClass？](https://stackoverflow.com/questions/12325192/how-do-i-specify-codefilebaseclass-from-web-config)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T15:27:21.377

更新面板真的很酷，但你真的不能用它来控制用户。好消息是您可以按照用于为 ajaxcontroltoolkit 制作更新面板的相同设计模式制作具有 javascript 有效负载的 asp.net 用户控件。

我在 2009 年 3 月构建了这个，因为我需要一个不会阻止用户界面的消息框。我使用 ajaxcontroltoolkit 遵循了用户控件的设计模式。它具有完整的源代码，并且 VS intelisense 可以在 javascript 上运行。这是一个用户控件，您只需放在页面上，它带有自己的 javascript 有效负载，您可以将其 ajaxify 到您心中的内容。它甚至可以在没有修改的数据中继器中工作。它实际上在 asp.net 网站上被接受为 ajaxcontroltoolkit 用户控件。

它是免费的，如果需要，您可以将其放在 github 或其他存储库中。

[http://gosylvester.com/downloads/messagebox.aspx](http://gosylvester.com/downloads/messagebox.aspx)

[http://gosylvester.com/blog.aspx?id=55](http://gosylvester.com/blog.aspx?id=55)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T12:24:53.030

您应该根据设计解决此问题。

将您的更新面板放在一个页面上，让用户在没有更新面板的情况下进行控制。

原因：更新面板旨在为异步回发自动生成客户端脚本，您肯定知道。用户控件是一个构建块，具有封装复杂性的自包含功能，它应该可以放置在任何地方，而不需要上下文，在这种情况下，至少您需要在页面上实例化控件的脚本管理器。**

# jquery-ui - Backbone View 中的 jQuery UI 添加元素，但不响应事件

> ID：11656638
> 
> 赞同：0
> 
> 时间：2012-07-25T18:55:20.733
> 
> 标签：jquery-ui, jquery, backbone.js

我正在构建一个应用程序，其中我在后端使用 Django，并在前端使用 jQuery UI/Backbone。我正在将 Django 生成的表单拉入带有 jQ​​uery.get() 的主干视图内的页面中。这部分工作正常，但现在我想在表单中添加一些 jQuery UI 内容（例如日期选择器、一些打开对话框的按钮等）。所以，这里是相关的代码：

```
var InstructionForm = Backbone.View.extend({
  render: function() {
    var that = this;
    $.get(
      '/tlstats/instruction/new/',
      function(data) {
        var elements = $(data);
        $('#id_date', elements).datepicker();
        that.$el.html(elements.html());
      }
    };
    return this;
  }
}); 
```

路径 /tlstats/instruction/new/ 返回一个带有 Django 生成的表单的 HTML 片段。发生的事情是 input#id_date 正在添加 hasDatePicker 类，并且 datepicker div 被附加到我的 <body> 元素（两者都符合预期），但是当我单击 input#id_date 时，什么也没有发生。没有出现日期选择器小部件，控制台中也没有错误。为什么会发生这种情况？

此外，有点离题，但在试图自己解决这个问题时，我遇到了几个代码示例，其中人们正在执行以下操作：

```
$(function() {
  $('#dialog').dialog(...);
  ...
}); 
```

然后后来：

```
var MyView = Backbone.View.extend({
  initialize(): function() {
    this.el = $('#dialog');
  }
}); 
```

这不是违背了 Backbone 的目的，让所有 jQuery UI 代码完全在任何 Backbone 结构之外吗？还是我误解了Backbone的作用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:27:27.637

我认为你的问题就在这里：

```
$('#id_date', elements).datepicker();
that.$el.html(elements.html()); 
```

首先将 datepicker 绑定，然后通过将其转换为 HTML 字符串`.datepicker()`将其全部丢弃：`elements`

```
that.$el.html(elements.html()); 
```

然后你把那个字符串放入`$el`. 当您说 时`e.html()`，您将一个带有事件绑定和其他所有内容的包装 DOM 对象转换为字符串中的一段简单的 HTML，该过程会丢弃不是简单 HTML 的所有内容（例如事件绑定）。

要么给`.html()`jQuery 对象本身：

```
$('#id_date', elements).datepicker();
that.$el.html(elements); 
```

或在添加 HTML 后绑定日期选择器：

```
that.$el.html(elements);
that.$('#id_date').datepicker(); 
```

# c# - 防止用户在 ListView 中调整列宽？

> ID：11656640
> 
> 赞同：8
> 
> 时间：2012-07-25T18:55:30.613
> 
> 标签：c#, winforms, listview

我的 Winform 中有一个 ListView，它有 4 列、名称、金钱、ID 和级别。

问题是当我运行我的应用程序时，我仍然能够弄乱列宽并更改它们。

我搜索并发现我应该这样做：

```
private void listView1_ColumnWidthChanging(object sender, ColumnWidthChangingEventArgs e)
{
  e.Cancel = true;
  e.NewWidth = listView1.Columns[e.ColumnIndex].Width;
} 
```

但问题是，当我调试和 Ccanged 列宽时，这个事件甚至没有触发！

为什么没有火？

以及如何使列宽固定？

我制作了一个新的 winform 应用程序，以防万一我的旧应用程序有问题，它会触发，但只是第一次运行该应用程序.. 这是代码：

```
namespace CsharpWinformTestingStuff
{
  public partial class Form1 : Form
  {
    public Form1()
    {
      InitializeComponent();
      listView1.ColumnWidthChanging += new ColumnWidthChangingEventHandler(listView1_ColumnWidthChanging);
    }

    void listView1_ColumnWidthChanging(object sender, ColumnWidthChangingEventArgs e)
    {

      e.Cancel = true;
      e.NewWidth = listView1.Columns[e.ColumnIndex].Width;
    }
  }
} 
```

这是初始化组件，以防万一您可能想知道：

```
private void InitializeComponent()
{
  this.listView1 = new System.Windows.Forms.ListView();
  this.columnHeader1 = ((System.Windows.Forms.ColumnHeader)(new System.Windows.Forms.ColumnHeader()));
  this.columnHeader2 = ((System.Windows.Forms.ColumnHeader)(new System.Windows.Forms.ColumnHeader()));
  this.columnHeader3 = ((System.Windows.Forms.ColumnHeader)(new System.Windows.Forms.ColumnHeader()));
  this.SuspendLayout();
  // 
  // listView1
  // 
  this.listView1.Columns.AddRange(new System.Windows.Forms.ColumnHeader[] {
        this.columnHeader1,
        this.columnHeader2,
        this.columnHeader3});
  this.listView1.GridLines = true;
  this.listView1.Location = new System.Drawing.Point(12, 12);
  this.listView1.Name = "listView1";
  this.listView1.Size = new System.Drawing.Size(284, 275);
  this.listView1.TabIndex = 0;
  this.listView1.UseCompatibleStateImageBehavior = false;
  this.listView1.View = System.Windows.Forms.View.Details;
  // 
  // columnHeader1
  // 
  this.columnHeader1.Text = "Name";
  this.columnHeader1.Width = 97;
  // 
  // columnHeader2
  // 
  this.columnHeader2.Text = "Age";
  this.columnHeader2.Width = 52;
  // 
  // columnHeader3
  // 
  this.columnHeader3.Text = "Email";
  this.columnHeader3.Width = 157;
  // 
  // Form1
  // 
  this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
  this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
  this.ClientSize = new System.Drawing.Size(308, 299);
  this.Controls.Add(this.listView1);
  this.Name = "Form1";
  this.Text = "Form1";
  this.ResumeLayout(false);

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T19:21:05.993

您需要在表单中注册 ColumnWidthChanging 事件：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        // This line registers the event, soc that the form can "hear" it and call the indicated handling code:
        this.listView1.ColumnWidthChanging += new ColumnWidthChangingEventHandler(listView1_ColumnWidthChanging);
    }

    void listView1_ColumnWidthChanging(object sender, ColumnWidthChangingEventArgs e)
    {
        Console.Write("Column Resizing");
        e.NewWidth = this.listView1.Columns[e.ColumnIndex].Width;
        e.Cancel = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-07T09:56:43.983

只需单击**属性**>>**事件**>> **ColumnWidthChanging**。

[![在此处输入图像描述](../Images/0ac12865ca6060c8dd69199a2bf0ea6d.png)](https://i.stack.imgur.com/YJN9A.png)

然后添加此代码：

```
private void lstItems_ColumnWidthChanging(object sender, ColumnWidthChangingEventArgs e)
    {
        e.Cancel = true;
        e.NewWidth = lstItems.Columns[e.ColumnIndex].Width;
    } 
```

快乐编码！^_^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T00:34:31.013

您可以查看[Better ListView Express](http://www.componentowl.com/better-listview-express)。我们已经在列上实现了**AllowResize**属性，这正是您所需要的。

# ruby - 一种以宽容的方式在 Ruby 中标准化 URI/URL 的方法

> ID：11656643
> 
> 赞同：4
> 
> 时间：2012-07-25T18:55:43.950
> 
> 标签：ruby, http, url, uri

我正在尝试找到一种方法来从用户那里获取 URI/URL 字符串并确定有效的规范形式（或者如果资源无效则失败）。同时，它还应该验证 URL 是否存在。因此，我们正在检查有效的“语法”以及是否存在。

例如，字符串 like`google.com`应该变成`http://www.google.com`，字符串 like`google.com/insights`应该变成`http://www.google.com/insights`。像这样的字符串`http://thiswebsitedoesntexistatall.com`应该返回某种错误或异常。

我相信解决方案的一部分可能会调用 HTTP`get_response()`方法并遵循重定向，直到我获得`200 OK`状态。

似乎该`URI.parse()`方法不能原谅放弃`http`. 我意识到我可以写一个简单的东西来尝试`http`在前面添加等等，但我希望有一些现有的 gem 或鲜为人知的库函数可以真正原谅 URL 并为我规范化它们。

对于我正在寻找的东西，内置`net/http`和似乎都太严格了。`HTTParty`有没有很好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:49:12.843

您要求的内容存在一些问题：

*   [当 FTP 和许多其他协议](http://en.wikipedia.org/wiki/URI_scheme#Official_IANA-registered_schemes)同样有效时，URL 解析器不应假定传入的值是 HTTP 。如果您知道协议很可能是 HTTP，那么您需要添加协议。
*   如果您尝试连接到某个站点并遵循重定向直到收到 200 响应，那么您只是证明了该 URL 解析为某种有效的页面。那 200 可能是返回的错误页面，因为您想要的页面是死链接或无效，或者该站点暂时关闭。要证明不是这样，意味着您必须对要查找的页面有一些深入的预先了解，例如要搜索的特定内容。
*   在您遵循重定向后假设 URL 是好的，这不是很安全。许多网站都在 URL 中添加了各种会话数据，因此最初的简单而干净的 URL 可以解析为冗长而复杂的 URL。

我建议您查看[Addressable::URI](http://addressable.rubyforge.org/) gem。它比 Ruby 的 URI 功能更全面。它不会为你做决定，但至少它会给你一个更完整的 API 并且可以重写/规范化 URL。清理它们和/或确定它们是否良好仍然留给您作为练习。

# mysql - node.js 和 mysql - 需要来自 select 的数据才能更新

> ID：11656644
> 
> 赞同：1
> 
> 时间：2012-07-25T18:55:44.273
> 
> 标签：mysql, node.js, callback, undefined

我的问题是我尝试在 node.js 中为不同的 mysql 选择和更新编写回调方法。更新命令必须等待来自选择的数据才能使用它。但有时他们不能，因为变量是“未定义的”。也许我需要一个回调函数来完成这项工作。在以下示例中，在回调开始之前要等待一个 jQuery 动画。但是我怎样才能用 mysql 命令解决这个问题：

```
function mySandwich(param1, param2, callback) {  
        alert('Started eating my sandwich.\n\nIt has: ' + param1 + ', ' + param2);  

        $('#sandwich').animate({  
            opacity: 0  
        }, 5000, function() {  
            // Animation complete. 
            if (callback && typeof(callback) === "function") {  
            callback();  
        }   
        });  

    }  

    mySandwich('ham', 'cheese', function() {   
        alert('Finished eating my sandwich.');  
    }); 
```

我希望有人能给我解释一下。最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:18:44.627

我建议查看[async.js](https://github.com/caolan/async/)，它允许串联或并行运行，并将信息传递给最终回调函数或下一个函数。

# c - C从动态数组中删除元素

> ID：11656648
> 
> 赞同：2
> 
> 时间：2012-07-25T18:56:01.887
> 
> 标签：c, memory-management, malloc

我正在尝试用 C 编写相当于`remove`for Java 的`ArrayList`东西。

这是我的代码。它假定 index 是列表中的有效索引。

```
void arrayListRemove(ArrayList* list, int index){
  int i;
  if (arrayListSize(list)==1){
    list->size = 0;
    free(list->data);
    list->data = NULL;
  } else {
    for(i=index;i<arrayListSize(list)-1;i++){
      list->data[i] = list->data[i+1];
    }
    list->data = realloc(list->data, (arrayListSize(list) - 1) * sizeof(void*));
    if (list->data != NULL){
      --list->size;
    } else {
      exit(1);
    }
  }
} 
```

这个对吗？

`arrayListSize(list) == 1`如果没有检查，代码会工作吗？即`realloc(list->data, 0)`释放arrayList？我在网上看到了关于该怎么`realloc(ptr, 0)`做的相互矛盾的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:59:47.800

我会离开这个`arrayListSize(list) == 1`案子。`realloc(ptr, 0)`不依赖`free`.

还有一些注意事项：

*   使用时`realloc`，请务必在`tmp`变量中捕获返回值。如果`realloc`失败，则它可以返回`NULL`并保持原始指针不变。通过这样做`ptr = realloc(ptr);`，您可能会在失败时导致内存泄漏`realloc`，因为您现在已经丢失了原始指针。而是使用这个成语：

    ```
    tmp = realloc(ptr, newSize);
    if (tmp != NULL)
        ptr = tmp;
    else handleError(); 
    ```

*   `free`从列表中删除列表中的元素时是否有必要？您的`data`数组由指针组成，您是否通过不调用`free`已删除的元素来泄漏内存？当然，这在 java 实现中不是必需的。如果您的列表包含对所包含对象的唯一引用，那么您需要`free`在删除时对它们进行引用，*或者*在函数中返回指针并将其留给调用者来处理内存。

*   通常不需要`realloc`用于缩小列表，除非您在一个**真正**内存受限的平台上，即使那样，也可能没有必要为*每个*已删除的列表元素缩小分配的块。更喜欢将分配的块扩大/缩小一个以上的元素。

*   这确实是一个 nit，但由于这是一个 API 方法，并且您正在使用`size`数据结构的成员来跟踪列表长度，因此您最好`size`始终使用它，而不是依赖另一个 API 方法`arrayListSize`。

# wpf - 如何为使用 DataTemplateSelector 选择的 DataTemplate 中的项目设置样式

> ID：11656649
> 
> 赞同：1
> 
> 时间：2012-07-25T18:56:02.357
> 
> 标签：wpf, stylesheet, datatemplate, datatemplateselector

我创建了一个 Listview，它使用两个不同的数据模板来显示列表中的不同项目，一个是标签和一个按钮，另一个只是一个标签。使用 DataTemplateSelector 选择模板。我的问题是如何将样式应用于两个数据模板，例如在悬停时突出显示而不重复 xaml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:55:03.463

可能有助于查看此示例：

[http://msdn.microsoft.com/en-us/library/ms742521.aspx](http://msdn.microsoft.com/en-us/library/ms742521.aspx)

参考示例代码（也在上面文章的底部）：

[http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=wpfsamples&DownloadId=7791](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=wpfsamples&DownloadId=7791)

# visual-studio-2010 - Visual Studio：使用代码配置文件进行调试（？）

> ID：11656653
> 
> 赞同：0
> 
> 时间：2012-07-25T18:56:22.393
> 
> 标签：visual-studio-2010, debugging

我正在寻找一种在 Visual Studio 中进行调试而没有断点并进入代码的方法。Visual Studio 2010 中是否有框架或工具或选项允许您跟踪代码运行的每一步，而无需设置断点和单步执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:59:36.460

IntelliTrace 可能是一个选项：

[http://msdn.microsoft.com/en-us/library/dd264915.aspx](http://msdn.microsoft.com/en-us/library/dd264915.aspx)

# asp.net - IIS 是否会受益于多核 CPU 来处理并发请求（cpu 密集型）？

> ID：11656657
> 
> 赞同：2
> 
> 时间：2012-07-25T18:56:29.810
> 
> 标签：asp.net, iis, installation, cpu, webrequest

好的，我不知道我的问题是否正确，但我目前面临以下问题：

我们的 Asp.Net 站点上的一些请求相当长（即：60 秒）和 CPU 密集型（文件导入/验证），并且我们的 IIS 托管在分配了单个内核的虚拟机中。

目前，当此类请求发生时，所有其他并发请求似乎都会排队，直到先前的“长时间和 cpu 密集型”请求完成。

IIS 会从另一个内核中受益吗？这是否有助于响应更多并发请求？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:59:10.137

假设：

1.  每个请求都是它自己的 HTTP 请求
2.  您的操作不会相互阻塞（有意或无意）
3.  您的操作不受其他东西（内存、网络、磁盘等）的约束

那么是的，绝对的。IIS 是高度并行的（通过多线程和异步 I/O）。

# python - 我需要帮助网络抓取

> ID：11656659
> 
> 赞同：2
> 
> 时间：2012-07-25T18:56:32.297
> 
> 标签：python, python-2.7, web-scraping

所以我想从visual.ly中抓取可视化，但是现在我不明白“显示更多”按钮是如何工作的。截至目前，我的代码将获取图片链接、图片旁边的文本以及页面的链接。我想知道“显示更多”按钮是如何工作的，因为我将尝试使用页数进行循环。到目前为止，我不知道如何单独循环遍历每个。关于我如何循环并继续获得比最初显示给您的更多图像的任何想法？？？？

```
from BeautifulSoup import BeautifulSoup
import urllib2  
import HTMLParser
import urllib, re

counter = 1
columnno = 1
parser = HTMLParser.HTMLParser()

soup = BeautifulSoup(urllib2.urlopen('http://visual.ly/?view=explore&   type=static#v2_filter').read())

image = soup.findAll("div", attrs = {'class': 'view-mode-wrapper'})

if columnno < 4:
    column = image[0].findAll("div", attrs = {'class': 'v2_grid_column'})
    columnno += 1
else:
    column = image[0].findAll("div", attrs = {'class': 'v2_grid_column last'})

visualizations = column[0].findAll("div", attrs = {'class': '0 v2_grid_item viewmode-item'})

getImage = visualizations[0].find("a")

print counter

print getImage['href']

soup1 = BeautifulSoup(urllib2.urlopen(getImage['href']).read())

theImage = soup1.findAll("div", attrs = {'class': 'ig-graphic-wrapper'})

text = soup1.findAll("div", attrs = {'class': 'ig-content-right'})

getText = text[0].findAll("div", attrs = {'class': 'ig-description right-section first'})

imageLink = theImage[0].find("a")

print imageLink['href']

print getText

for row in image:
    theImage = image[0].find("a")

    actually_download = False
    if actually_download:
        filename = link.split('/')[-1]
        urllib.urlretrieve(link, filename)

counter += 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:32:53.730

您不能在此处使用 urllib-parser 组合，因为它使用 javascript 加载更多内容。为此，您需要一个完整的浏览器模拟器（支持 javascript）。我以前从未使用过[Selenium](http://seleniumhq.org/)，但我听说它可以做到这一点，并且有一个[python 绑定](http://pypi.python.org/pypi/selenium/)

但是，我发现它使用了一种非常可预测的形式

```
http://visual.ly/?page=<page_number> 
```

对于它的 GET 请求。也许更简单的方法是

```
<div class="view-mode-wrapper">...</div> 
```

解析数据（使用上述 url 格式）。毕竟，ajax 请求必须去一个位置。

然后你可以做

```
for i in xrange(<whatever>):
    url = r'http://visual.ly/?page={pagenum}'.format(pagenum=i)
    #do whatever you want from here 
```

# powershell - 将参数传递给 Import-Csv 时，Powershell 抛出错误

> ID：11656669
> 
> 赞同：1
> 
> 时间：2012-07-25T18:57:16.917
> 
> 标签：powershell, powershell-2.0, importerror

我正在尝试读取 CSV 文件以提取放置在网络上的字段。我收到以下错误

```
Import-Csv : A parameter cannot be found that matches parameter name 'Header'.
At D:\Apps\AP\Ex_Accounts\Account_Extract.ps1:1 char:29 
```

当我在 PS 脚本中执行以下操作时

```
$source="\\fmkir41m\folder\Data1\citi.txt"
$destimation="\\fmkir41m\folder\Data1\accounts.txt"
Import-CSV "$source" -Header (1..25) | Select-Object '4' | Out-File $destination 
```

我是否为网络上的文件正确传递了参数？因为如果我在我的电脑上给出相同文件的路径，它就可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:27:26.353

您确定您使用的是 PowerShell 2.0 吗？

# canvas - 什么是 highstock.js-modules-canvas-tools？

> ID：11656670
> 
> 赞同：1
> 
> 时间：2012-07-25T18:57:19.523
> 
> 标签：canvas, highstock

刚刚下载了 highstock 1.1.6。js 目录包含一个 modules 文件夹，其中有一个名为`canvas-tools.js`. 我浏览了[highstocks.com](http://www.highcharts.com/products/highstock)和[highslide.com](http://www.highslide.com/)并搜索了他们的论坛，但是对于我的一生，我找不到任何关于该模块是什么或如何将其与 highstock.js 一起使用的文档

这里的任何人都可以对这个最神秘的 javascript 库有所了解吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:51:21.940

[CanVG.js](http://code.google.com/p/canvg/)可以将 SVG 元素渲染到画布元素上。Highstocks/Highcharts 需要它用于所有实现画布但不支持 SVG 渲染的旧（非 IE）浏览器（即 Android <=2.3）。

正如蒂埃里所说的那样，该文件包括

> canvg 渲染器 + rgbcolor.js + canvg.js（连接到一个文件）

**现在这对您很重要，以防您开发可能离线运行**的跨设备 Highstocks/Highcharts 应用程序：
1\. 确保`canvas-tools.js`模块目录中包含在您的项目中
2\. 添加`global: { canvasToolsURL: '{local_path_to}/canvas-tools.js' }`到您的 highcharts 选项（默认指向code.highcharts.com)
3\. 如果您的项目使用 HTML5 清单，请确保在那里也引用了它。

希望这可以避免我经历的调试混乱并完全澄清您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:05:14.303

似乎是为了在 Android 上兼容 SVG。请参阅[http://www.highcharts.com/documentation/compatibility](http://www.highcharts.com/documentation/compatibility)

# entity-framework-4.1 - 从 linq 获取错误消息到实体查询。

> ID：11656671
> 
> 赞同：0
> 
> 时间：2012-07-25T18:57:24.547
> 
> 标签：entity-framework-4.1

我不断收到错误“LINQ to Entities 无法识别方法 'System.String get_Item(Int32)' 方法，并且此方法无法转换为存储表达式”在我的代码的以下行

var Reviewer = repository.reviewers.FirstOrDefault(t => t.ReviewerName == formCollection[3]);

formCollection[3] 是从我包含在表单中的下拉列表中返回的字符串。查询似乎可以正常工作，直到它从数据库返回值。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:20:16.940

好的，我试图一次做太多事情，当我终于想到它并将 formCollection[3] 放入字符串变量中，然后在 linq 查询中使用字符串变量时，一切正常。

# c# - 我有一个受保护的类，我想成为公共类中的一个属性，但同一程序集中的派生类可以访问

> ID：11656683
> 
> 赞同：1
> 
> 时间：2012-07-25T18:58:44.527
> 
> 标签：c#, visibility, internal, protected

我正在使用 C# 4。

注释解释了类的目的以及为什么它们的结构是这样的。

```
/// <summary>
/// I want this internal just to reduce the number of publicly
/// accessible classes in this assembly.  I don't want people to
/// come after me to even spend time reading about this class,
/// since it won't help them unless they're modifying, and not
/// using this assembly.
/// </summary>
internal class MyInternalClass
{
}

/// <summary>
/// This class is an initialization class for tests.  This is the
/// base class for other initialization classes so that I can have 
/// a tree-like structure of method calls.  This needs to be
/// public because it is the base class of a derived class that needs
/// to be public.
/// </summary>
public class MyPublicClass
{
    protected internal MyInternalClass MyInternalProperty;
}

/// <summary>
/// This class is a test class that tests a particular initialization
/// class.  This class needst to be public, else the Unit Testing 
/// framework will not execute its methods.
/// </summary>
public class MyInheritedPublicClass : MyPublicClass
{
} 
```

**谁能告诉我为什么上面的代码会出现不一致的可见性错误？**

据我了解，这里是 C# 中可见性修饰符的含义：

`public`：每个人，任何地方都可以看到和访问它，而无需任何形式的反射黑客。

`private`：这只能在它声明的类的范围内访问。派生类和同一命名空间和程序集中的其他类看不到这一点。

`protected`：这只能在它声明的类和任何派生类的范围内访问，无论程序集或命名空间如何，只要该类是公共的。如果类是内部的，那当然会进一步限制可以看到这个属性的类。

`internal`：这只能由同一程序集中的实体访问。

我认为`protected internal`修饰符的作用类似于维恩图中的交集`protected`——`internal`它只能被同一程序集中的实体访问，并且是属性/方法/构造函数/字段/存在的所述类的子类. 鉴于我的信念，我认为前面的代码应该可以编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:01:42.063

`protected internal`不是 and 的交集**，**它是**union**，这意味着该属性将对类的所有后代可见，而不管他们在哪个程序集中。`protected``internal`**`protected internal`**

 **参考：http: [//msdn.microsoft.com/en-us/library/ms173121.aspx](http://msdn.microsoft.com/en-us/library/ms173121.aspx)**

# iphone - 来自 IB 的 UITableViewCell 将值显示为 NULL

> ID：11656692
> 
> 赞同：0
> 
> 时间：2012-07-25T18:59:28.847
> 
> 标签：iphone, ios, ios5, uitableview

以下被用作将表格视图单元从 nib 文件放入表格视图的代码。我将 tableviewcell 放在与 tableview 相同的笔尖中。我也尝试过在 viewdidload 中初始化单元格，但没有成功。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"identifier";
    NSLog(@"the cellidentifier is %@", CellIdentifier);
    bookmarksTableViewCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    NSLog(@"the cell is %@", bookmarksTableViewCell);
    return bookmarksTableViewCell;
} 
```

我得到的错误是

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:' 
```

我检查了 IB 中的连接并重新接线，但结果相同。当我尝试 NSLog'ing 单元格时，它为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:06:47.767

你需要这样做

```
static NSString *CellIdenetifier = @"Cell";

BookMarksTableViewCell *cell = (BookMarksTableViewCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(cell == nil){
   cell = [[BookMarksTableViewCell alloc] initWithStyle:UITableViewCellStyleSubTitle reuseIdentifer:CellIdentifier]; 
} 
```

我不确定你是否需要它，但我想我包括它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:06:54.140

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"identifier";
    NSLog(@"the cellidentifier is %@", CellIdentifier);

    bookmarksTableViewCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (bookmarksTableViewCell == nil){
            //allocate your cell here
    }

    return bookmarksTableViewCell; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:07:07.607

当然它是空的。

如果一个表格视图需要显示的单元格比其队列中可用的单元格多，它会从

```
dequeueReusableCellWithIdentifier: 
```

要求数据源创建一个新单元，直到分配足够数量的单元。检查 NULL：

```
bookmarksTableViewCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (bookmarksTableViewCell == NULL)
    bookmarksTableViewCell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStylePlain reuseIdentifier:cellIdentifier] autorelease];

return cell; 
```

啊，ps：忘记Interface Builder。

# c++ - 必须在类成员函数返回类型中提供更具体的类型，而不是参数类型？

> ID：11656695
> 
> 赞同：0
> 
> 时间：2012-07-25T18:59:40.080
> 
> 标签：c++

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

最近一段代码让我很困惑：

```
class A {
 public:
  typedef int SomeType;

  void func(SomeType i);
  SomeType func2();
};

void A::func(SomeType i) {
  cout << "in A, value: " << i << endl;
}
SomeType A::func2() {
  return 123;
}

int main() {
  A a;
} 
```

G++ 4.4 给出了一个编译错误，它在编译 A::func2 时不知道 SomeType：

```
error: 'SomeType' does not name a type 
```

但是相同的 SomeType 在**A::func(SomeType i)**中编译得很好：

```
class A {
 public:
  typedef int SomeType;

  void func(SomeType i);
};

void A::func(SomeType i) {
  cout << "in A, value: " << i << endl;
} 
```

任何人都可以帮助我理解这一点吗？似乎 C++ 对参数类型和返回类型不公平？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:08:19.663

gcc 是对的-

```
/* can't use unqualified name */  A:: /* can use unqualified name */  () {
} 
```

在 之前`A::`，您需要使用 来限定嵌套类型`A::`。所以你需要：

```
A::SomeType A::func2() {  
   //whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:06:53.383

你需要改变

```
SomeType A::func2() { 
```

到

```
A::SomeType A::func2() { 
```

这与 func1() 不同的原因是它`SomeType`在参数列表中使用，以便编译器知道它可以查找`class A`类型。但是， with`func2()`是`SomeType`返回类型，编译器还不知道要查看`class A`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:06:54.290

只需将 func2 的定义更改为：

```
A::SomeType A::func2() {
    return 123;
} 
```

您需要告诉编译器您要使用在类 A 中定义的 SomeType 类型名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:15:57.053

相反，将此 Qualify SomeType 与类名一起使用，如

```
 A::SomeType A::func2() {
      (...)
  } 
```

SomeType 不能在 A 类之外使用，而 func2 在 A 类之外可见 此 URL - 在 C++ 规范中声明以下内容

[http://balbir.blogspot.com/2005/06/scope-of-typedefs-in-class-in-c.html](http://balbir.blogspot.com/2005/06/scope-of-typedefs-in-class-in-c.html)

特别是，在类定义中定义的类型名称不能在没有限定的情况下在其类之外使用。

# web-applications - 仅在 webapps 中缓存必要的图像

> ID：11656700
> 
> 赞同：1
> 
> 时间：2012-07-25T18:59:54.760
> 
> 标签：web-applications, cache-manifest, memory-optimization

我在头部有这个`index.php`：

```
<link rel="apple-touch-startup-image" href="images/screenLD.png" media="(device-width:320px)" /><!--iPod/iPhone Portrait LD 320x460-->
<link rel="apple-touch-startup-image" href="images/screenHD.png" media="(device-width:320px)and(-webkit-device-pixel-ratio:2)" /><!--iPod/iPhone Portrait HD 640x920-->
<link rel="apple-touch-startup-image" href="images/screenPortraitLD.png" media="(device-width:768px)and(orientation:portrait)" /><!--iPad Portrait LD 768x1004-->
<link rel="apple-touch-startup-image" href="images/screenLandscapeLD.png" media="(device-width:768px)and(orientation:landscape)" /><!--iPad Landscape LD 748x1024-->
<link rel="apple-touch-startup-image" href="images/screenPortraitHD.png" media="(device-width:1536px)and(orientation:portrait)and(-webkit-device-pixel-ratio:2)" /><!--iPad Portrait HD 1536x2008-->
<link rel="apple-touch-startup-image" href="images/screenLandscapeHD.png" media="(device-width:1536px)and(orientation:landscape)and(-webkit-device-pixel-ratio:2)" /><!--iPad Landscape HD 1496x2048--> 
```

这在`cache.manifest`：

```
CACHE MANIFEST

index.php

images/screenLD.png
images/screenHD.png
images/screenPortraitLD.png
images/screenLandscapeLD.png
images/screenPortraitHD.png
images/screenLandscapeHD.png 
```

但是我们很容易理解，一个 iPhone 用户需要缓存另外 5 张无用的大图。

我怎样才能让他只缓存他需要的图像？

* * *

^(顺便说一句，对于那些想要在每个苹果设备上运行的闪屏代码的人来说，我的是完美的。)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:10:49.967

使用 python/php 脚本，检查设备的 User-Agent 字符串。`cache.manifest`然后为特定设备提供不同版本的缓存列表。如果 User-Agent 字符串格式错误或未知，则提供上面包含所有内容的字符串。

例子：

1.  创建一个脚本，例如：`cache_manifest.php`
2.  清理 $_SERVER['HTTP_USER_AGENT']
3.  从用户代理字符串中查找设备名称。
4.  输出（通过“ `echo`”）给定设备的 LD/HD 文件。用户代理字符串不允许您准确确定设备是否具有视网膜显示器。
5.  `RewriteRule`通过from重定向流量`/cache.manifest`到`cache_manifest.php`

`Htaccess`文件看起来像：

```
RewriteEngine On
RewriteRule ^cache\.manifest$ /cache_manifest.php [L] 
```

iPhone 用户代理字符串如下所示：

```
Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5 
```

iPad 用户代理字符串如下所示：

```
Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:48:00.100

您实际上不需要缓存 apple-touch-startup-image 标签中使用的图像。设备将在第一次运行时下载所需的图像（在缓存任何内容之前）。当它们被缓存时，它们就不再需要了。

# c# - 循环导入文件时违反了 EF 代码优先多重性约束

> ID：11656703
> 
> 赞同：2
> 
> 时间：2012-07-25T19:00:01.260
> 
> 标签：c#, entity-framework, code-first, multiplicity

**编辑**更好地隔离错误；见下文。

我在 C# Code-First EF 模型中有一个`ParentObject`和类：`ChildObject`

```
public class ParentObject{
    [Key]
    public int Key{get; set;}
    [Required]
    public string Name {get; set;} //unique identifier
    public HashSet<ChildObject> TheChildren {get; set;}
}

public class ChildObject{
    [Key]
    public int Key {get; set;}
    public int ParentKey {get; set;}
    public string Name {get; set;}
    [NotMapped]
    string ParentName {get; set;}
}

 public class FamilyDB : DbContext{
    public DbSet<ParentObject> Parents { get; set; } 
    public DbSet<ChildObject> Children { get; set; }

    public FamilyDB(): base(){
        this.Parents.Load(); this.Children.Load();
    }
} 
```

我想`FamilyDB`从一组 CSV 文件中填充一个数据库。`Parents`已经存在的；我只需要覆盖和分配`TheChildren`每个`ParentObject`.

但我总是以错误告终：

```
public static void ImportChildFile(FamilyDB connxn, string csvPath){
    List<ChildObject> records = GetChildrenFromCsvFile(csvPath);
    var groupedRecords = records.GroupBy(x => x.ParentName);

    foreach (var recordSet in groupedRecords){
        parentName = recordSet.Key;
        ParentObject matchingParent = connxn.Parents.
            Where(x => x.Name = parentName).FirstOrDefault();

        if (matchingParent == null)
            throw new ArgumentException("No prnt named " + parentName);

        //Want to overwrite, not add - must remove all current children
        while (matchingParent.Children.Count > 0)
            connxn.TheChildren.Remove(matchingParent.Children.Last());

        matchingParent.TheChildren.UnionWith(recordSet);
        //connxn.SaveChanges(); //this would work if it was here
    }
    connxn.SaveChanges();

    /*Multiplicity constraint violated. 
    The role 'ParentObject_Children_Source' of 
    the relationship 'MyNamespace.ParentObject_Children' 
    has multiplicity 1 or 0..1.*/
} 
```

该错误消息似乎指责我`ParentObject`两次分配给相同的，但我没有做这样的事情，因为每个`recordSet`对应于不同的`ParentName`（因此是父母）。那么发生了什么？

# swing - ActionListener (Java) 的问题

> ID：11656709
> 
> 赞同：0
> 
> 时间：2012-07-25T19:00:38.270
> 
> 标签：swing

我正在尝试在 JFrame 中的两个按钮上实现动作侦听器，但问题是两个按钮之一正在执行这两个功能；但我还没有配置它这样做。请找到示例代码：-

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class MyChangingCirlce implements ActionListener{
JButton colorButton, labelButton;
JLabel myLabel;
MyDrawPanel mdp;
JFrame frame;
   public static void main(String [] args)
   {
    MyChangingCirlce mcc = new MyChangingCirlce();
    mcc.createFrame();
   } 

  public void createFrame()
  {
frame = new JFrame();
colorButton = new JButton("Changing Colors");
labelButton = new JButton("Change Label");
myLabel = new JLabel("BA");
mdp = new MyDrawPanel();

frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

frame.getContentPane().add(BorderLayout.CENTER, mdp);   
frame.getContentPane().add(BorderLayout.SOUTH,colorButton); 
frame.getContentPane().add(BorderLayout.EAST,labelButton);  
frame.getContentPane().add(BorderLayout.WEST,myLabel);
colorButton.addActionListener(this);
labelButton.addActionListener(this);    
frame.setSize(300,300);
frame.setVisible(true);

  } // end of createFrame Method

public void actionPerformed(ActionEvent e)
{
if(e.getSource()== colorButton)
{
frame.repaint();        
}
else
{
myLabel.setText("AB");
}

}   //end of interface method... 
```

}

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MyDrawPanel extends JPanel{

public void paintComponent(Graphics g)
{
    int red = (int) (Math.random() * 255);
    int green = (int) (Math.random() * 255);
    int blue= (int) (Math.random() * 255);
    Color randomColor = new Color(red,green,blue);
    g.setColor(randomColor);
    g.fillOval(20,70,100,100);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:12:25.573

You think the button triggers both the `if` and `else` statement but that is not the case. If you would adjust your code in the following way:

*   add a `setColor`, `changeColor` or something similar to your `MyDrawPanel` class
*   adjust the `MyDrawPanel#paintComponent` method to use a fixed color instead of a random color, and only adjust the color through the method created in the first step
*   your color change button should use the method created in the first step to adjust the color of the `MyDrawPanel`

The thing is that `paintComponent` can be called by Swing itself. It is not only called when you call `repaint` (which is a good thing, or all code you write for Swing components would be filled with `repaint` calls).

Side note: when overriding the `paintComponent` method I would recommended to call `super.paintComponent` as well

# database - 为 Play 2.0/anorm 在 application.conf 中加密 db 密码

> ID：11656712
> 
> 赞同：2
> 
> 时间：2012-07-25T19:00:51.670
> 
> 标签：database, scala, encryption, playframework, playframework-2.0

我不想将未加密的密码放在应用程序配置文件中。

这个问题：[Encrypting db password in application.conf](https://stackoverflow.com/questions/9200404/encrypting-db-password-in-application-conf)对这个问题有很好的解决方案，但它仅适用于 Play 1。

有人知道适用于 Play 2.0 的解决方案吗？我在 Play 2.0.2 的 Scala 版本中使用 anorm。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:35:47.327

所有的努力都是徒劳的。当我们将哈希密码放入数据库时​​，是因为人类可以将密码保留在他们的大脑中，而**他们的大脑是不可读的**。它被称为*非对称*加密。

您正在谈论的事情只能通过*对称*加密实现：程序在运行时拥有密钥，并使用此密钥解密数据库密码。但是，存储使用密钥加密的数据库密码并仍然让该密钥公开可用有什么意义呢？（对于 java 源代码和编译的类都是如此）。链条的强度取决于其最薄弱的环节。

当一台机器必须连接到一个数据库时，它需要一个密码：我们以纯文本形式存储这个密码，因为程序必须按原样使用它，并且**不需要人工输入**。为了加强安全，我们所能做的就是限制对这个纯文本文件的访问，最终用一个只存储在管理员脑海中的密码来保护它（顺便说一句，管理员更有可能将其所有密码保存在数据库中，也许使用主密码）。请注意，如果您使用提到的 Play 插件，情况不会改变。

我想到的唯一另一件事是一个 Play 应用程序，它仅在管理员输入数据库密码时才连接到数据库（但实际上这只是一个思考练习）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-21T17:00:08.167

我知道这有点晚了，但没有关于这个问题的新讨论。我想分享实际的解决方案（Play v.2.5.X），正如[文档](https://www.playframework.com/documentation/2.5.x/ScalaDependencyInjection#Advanced:-Extending-the-GuiceApplicationLoader)中所建议的那样，现在可以覆盖`GuiceApplicationLoader`以配置`GuiceApplicationBuilder`以某种方式处理初始配置。

在新课程中`modules/ApplicationLoaderConfig.scala`：

```
import javax.crypto.Cipher
import javax.crypto.spec.SecretKeySpec
import javax.xml.bind.DatatypeConverter

import play.api.inject.guice._
import play.api.{ApplicationLoader, Configuration}

class ApplicationLoaderConfig extends GuiceApplicationLoader() {

  override def builder(context: ApplicationLoader.Context): GuiceApplicationBuilder = {

    // Decrypt secrets
    val decryptedConfig = context.initialConfiguration ++
      Configuration("config.to.descrypt.1" -> decryptDES(context.initialConfiguration.getString("config.to.descrypt.1").get)) ++
      Configuration("config.to.descrypt.2" -> decryptDES(context.initialConfiguration.getString("config.to.descrypt.2").get))

    initialBuilder
      .in(context.environment)
      .loadConfig(decryptedConfig)
      .overrides(overrides(context): _*)
  }

  private def decryptDES(secret: String): String = {
    val key = "12345678"
    val skeySpec = new SecretKeySpec(key.getBytes("UTF-8"), "DES")

    val cipher = Cipher.getInstance("DES/ECB/PKCS5Padding")
    cipher.init(Cipher.DECRYPT_MODE, skeySpec)

    new String(cipher.doFinal(DatatypeConverter.parseBase64Binary(secret)))
  }
} 
```

还添加到`application.config`：

```
play.application.loader = "modules.ApplicationLoaderConfig" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T18:00:31.240

感谢与 Raffaele 的讨论以及我自己对代码的调查，Play 2.0 似乎不允许您加密数据库密码。

如果我错过了什么，请告诉我。

**编辑**：可以通过以下方式使用自定义数据库驱动程序来解决该问题：

```
// Just redirect everything to the delegate
class DelegatingDriver(delegate: Driver) extends Driver
{
  def connect(url: String, info: Properties) = delegate.connect(url, info)
  def acceptsURL(url: String) = delegate.acceptsURL(url)
  def getPropertyInfo(url: String, info: Properties) = delegate.getPropertyInfo(url, info)
  def getMajorVersion = delegate.getMajorVersion
  def getMinorVersion = delegate.getMinorVersion
  def jdbcCompliant() = delegate.jdbcCompliant()
}

// Replace password in properties with the decrypted one
class MyDecryptingDriver extends DelegatingDriver(Class.forName("<my.original.Driver>").newInstance().asInstanceOf[Driver])
{
  override def connect(url: String, info: Properties)= {
    // copy Properties
    val overriddenProperties= clone(info)   
    // override password property with the decrypted value
    Option(info.getProperty("password")).foreach(value => overriddenProperties.setProperty("password", decryptPassword(value)))
    super.connect(url, overriddenProperties)
  }

  def clone(orig: Properties)= {
    val result= new Properties()
    orig.propertyNames().map(_.asInstanceOf[String]).foreach(pName => result.setProperty(pName, orig.getProperty(pName)))
    result
  }

  def decryptPassword(encrypted: String)= ...
} 
```

然后您将 application.conf/db..driver 替换为 my.com.MyDecrypting 驱动程序。不完美，但对我有用......

# gcc - LLVM 相当于 gcc 的 __BIGGEST_ALIGNMENT__？

> ID：11656714
> 
> 赞同：2
> 
> 时间：2012-07-25T19:00:55.953
> 
> 标签：gcc, cross-platform, llvm, memory-alignment

GCC 提供了一个`__BIGGEST_ALIGNMENT__`预定义的宏，它是您正在编译的目标机器上的任何数据类型所使用的最大对齐方式。我似乎找不到 LLVM 的等价物。有没有？如果不是，最好的解决方法是什么（最好使用预处理器）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-09T22:26:26.003

这不能从预处理器访问，但`__attribute__((aligned))`or `__attribute__((__aligned__))`（省略对齐值）将给出您想要的对齐方式。这应该是所有内置类型中最大的对齐方式，在 x86 和 ARM 上是 16。

例如：

```
$ cat align.c
struct foo {
  char c;
} __attribute__((aligned)) var;
$ clang align.c -S -o - -emit-llvm
...
@var = global %struct.foo zeroinitializer, align 16 
```

这由 unwind.h 用于 _Unwind_Exception：

```
struct _Unwind_Exception
{
  _Unwind_Exception_Class exception_class;
  _Unwind_Exception_Cleanup_Fn exception_cleanup;
  _Unwind_Word private_1;
  _Unwind_Word private_2;

  /* @@@ The IA-64 ABI says that this structure must be double-word aligned.
     Taking that literally does not make much sense generically.  Instead we
     provide the maximum alignment required by any type for the machine.  */
} __attribute__((__aligned__)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:19:26.743

这在 llvm 内部是 TargetData::PointerABIAlign，但它似乎没有暴露给代码。我只是硬编码为 16 个字节，因为我们似乎需要一段时间才能看到更多对齐的类型或指令集。

# php - PHP 和 MongoDB：使用多个 '$or'

> ID：11656717
> 
> 赞同：2
> 
> 时间：2012-07-25T19:01:12.247
> 
> 标签：php, mongodb

我正在尝试将此查询转换为数组，以便我可以在 PHP 中使用，但我遇到了“索引”问题...如您所见，我需要多个“$ or”，因为每个“$ or' 验证一组字段，我不能将它们全部加入同一个 '$or'。

这是查询对象：

```
{
'$and' : [
      { '$or' : [
          {'author' : { '$exists' : false } }
        , {'author' : { '$in' : [ 'john' , false ] } }
    ] }
    , {'$or' : [
          { '$and' : [ { 'type' : 'post' } , { 'user_id' : 123456 } ] }
        , { 'type' : 'comment' }
    ] }
    , { '$or' : [
          { 'tags.name' : { '$in' : [ 'tag1' , 'tag2' ] } }
        , { 'tags' : false }
        , { 'tags' : { '$exists' : false } }
    ] }
]
} 
```

第一组 '$or' 验证了 'author' 字段，因此我正在搜索该字段中带有 'john' 或 false 的任何文档，并且我想要没有 'author' 字段的文档。第二组验证“类型”字段，我需要将“评论”作为值或“帖子”且“用户 ID”为 123456 的文档。第三组验证“标签”字段，我需要一些“标签” '$in' 或 'tags' = false 或 'tags' 中的 .name' 不存在...

这 3 组必须是真的，这就是为什么它们都在 '$and' 运算符中...我知道 '$and' 仅在 2.0+ 中有效，但我使用的是 2.1（聚合框架测试.. . 它只是摇滚！XD）

我想就是这样......如果有另一种编写查询的方式，我真的很想看到......谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T20:56:56.790

这是您在 PHP 中的查询

```
$conn = new Mongo("localhost:$port");
$db = $conn->test;
$collection = $db->tb;

$or1 = 
    array( '$or' => array(
            array( 'author' => array( '$exists' => false ) ) ,
            array( 'author' => array( '$in' => array('john', false) ) ) 
          ));

$or2 = 
    array( '$or' => array(
        array( '$and' => 
                array( 
                    array( 'type' => 'post') ,
                    array( 'userid' => 123456 )
                    )
            ),
            array( 'type' => 'comment') 
        ));

$or3 = 
    array( '$or' => array(
            array( 'tags.name' => array( '$in' => array('tag1', 'tag2') ) ) ,
            array( 'tags' => false ), 
            array( 'tags' => array( '$exists' => false ) ) 
        ));

$query = array( '$and' => array( $or1, $or2, $or3 ) );

$cursor = $collection->find($query);
foreach( $cursor as $doc ) {
    // do something
} 
```

# android - 创建标签栏后开始活动

> ID：11656718
> 
> 赞同：0
> 
> 时间：2012-07-25T19:01:12.667
> 
> 标签：android, android-tabhost

我在每个活动的底部创建了一个标签栏，现在我将它作为我的根活动。我希望它每次都先运行主屏幕，并且在所有其他活动上仍然有我的标签栏。**主屏幕不在我的标签栏中**

这里的代码转到帮助而不是 HomeScreen：

```
import android.app.TabActivity;  
import android.content.Intent;  
import android.os.Bundle;  
import android.view.View;
import android.widget.TabHost;  

public class TabController extends TabActivity {  
/** Called when the activity is first created. */  
@Override  
  public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    TabHost tabHost = getTabHost();  
    TabHost.TabSpec spec;  
    Intent intent;  

    intent = new Intent().setClass(this, Help.class);  
    spec = tabHost.newTabSpec("Help").setIndicator("Help")  
                  .setContent(intent);  
    tabHost.addTab(spec);  

    intent = new Intent().setClass(this, Service.class);  
    spec = tabHost.newTabSpec("Service").setIndicator("Service")  
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Inbox.class);  
    spec = tabHost.newTabSpec("Inbox").setIndicator("Inbox")  
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, About.class);  
    spec = tabHost.newTabSpec("About").setIndicator("About")  
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, More.class);  
    spec = tabHost.newTabSpec("More").setIndicator("More")  
                  .setContent(intent);
    tabHost.addTab(spec);

        //  Start home screen
  }
} 
```

我试图做一个简单的意图，但没有显示我的标签栏。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:19:45.577

我刚刚将 HomeScreen 作为我的第一个屏幕并在`Help.class`

```
startActivity(new Intent(presentActivity.this, NextActivity.class)); 
```

# c# - 客户端应用程序进程中的 WkHtmlToXSharp MultiplexingConverter 保持活动状态

> ID：11656720
> 
> 赞同：2
> 
> 时间：2012-07-25T19:01:25.060
> 
> 标签：c#, wkhtmltopdf

当我在常规 WinForms 应用程序中使用 MultiplexingConverter 时，一切正常，除了当我离开程序时，进程保持活动状态。所有调用都是从同一个线程进行的，使用以下代码。

```
using (var pdfConverter = new MultiplexingConverter())
{
    pdfConverter.ObjectSettings.Web.EnablePlugins = false;
    pdfConverter.ObjectSettings.Web.EnableJavascript = false;
    string html = Path.GetFullPath(_arquivo);
    Uri htmlUri = new Uri(html);
    pdfConverter.ObjectSettings.Page = htmlUri.AbsoluteUri;
    pdfConverter.ObjectSettings.Load.Proxy = "none";

    var tmp = pdfConverter.Convert();

    var number = 0;
    lock (this) number = count++;
    File.WriteAllBytes(@"tmp" + (number) + ".pdf", tmp);
} 
```

有没有人见过这种行为？我知道多路复用器有一个工作线程，可以同步来自各个线程的调用，并且想知道是否有办法发出信号让它停止。

# .net - EF 4.3 中不同表中单个属性的关联

> ID：11656724
> 
> 赞同：1
> 
> 时间：2012-07-25T19:01:35.493
> 
> 标签：.net, entity-framework, associations, edmx

我有两个具有以下定义的表：

```
 CREATE TABLE [dbo].[Shows] (
    [Id]              UNIQUEIDENTIFIER NOT NULL,
    [Name]            NVARCHAR (1024)  NOT NULL,
    [Image]           NVARCHAR (1024)  NULL,
    [Description]     NTEXT            NULL,
    [Seasons]         INT              NOT NULL,
    [FacebookId]      BIGINT           NULL,
    [BackgroundImage] NVARCHAR (200)   NULL,
    [TheTvDbId]       BIGINT           NULL,
    [NetworkId]       UNIQUEIDENTIFIER NOT NULL,
    CONSTRAINT [PK_Shows] PRIMARY KEY CLUSTERED ([Id] ASC),
    CONSTRAINT [FK_Shows_ToNetworks] FOREIGN KEY ([NetworkId]) REFERENCES [dbo].[Networks] ([Id])
);

        CREATE TABLE [dbo].[TheTvDb]
    (
        [Id] UNIQUEIDENTIFIER ROWGUIDCOL NOT NULL, 
        [EntityId] UNIQUEIDENTIFIER NOT NULL, 
        [TheTvDbId] BIGINT NOT NULL,
        [LastUpdated] BIGINT NOT NULL DEFAULT 0, 
        CONSTRAINT [AK_TheTvDb_EntityId] UNIQUE ([EntityId]),
        CONSTRAINT [AK_TheTvDb_TheTvDbId] UNIQUE ([TheTvDbId])
    ) 
```

我想要做的是`TheTvDbLastUpdated`在`Shows`table 上创建一个指向 table`LastUpdated`属性的关联属性`TheTvDb`。`TheTvDb`记录与记录的关键链接`Shows`是`EntityId`。关系是一对一的。我知道如何创建将链接到整体的关联，`TheTvDbTable`但我不知道如何仅链接到这一个属性，这样可以更方便地从生成的实体类访问它。谢谢。

我使用数据库优先的方法，所以我正在从 .edmx 文件的设计者那里寻找一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:02:06.363

那是不可能的。“指向”某物的属性是引用/导航属性。您不能将标量/值类型设为导航属性。

一个方便的助手可能是一个只读的助手属性（在部分类文件中实现，而不是 EDMX）：

```
public partial class Show
{
    public long TheTvDbLastUpdated { get { return this.TheTvDb.LastUpdated; } }
} 
```

从to`TheTvDb`的一对一导航属性在哪里。如果您使用延迟加载访问此属性，如果实体尚未加载，则首先从数据库加载实体。如果不使用延迟加载可以，并且访问该属性会导致异常。您可能会遇到这种情况：`Show``TheTvDb``TheTvDb``TheTvDb``null`

```
public long TheTvDbLastUpdated
{
    get
    {
        if (this.TheTvDb == null)
            throw new InvalidOperationException(
                "TheTvDbLastUpdated cannot be accessed before TheTvDb is loaded.");
        return this.TheTvDb.LastUpdated;
    }
} 
```

`show.TheTvDbLastUpdated`无论如何，你需要导航属性，如果你写而不是它看起来并不像一个大胜利`show.TheTvDb.LastUpdated`（实际上胜利只是节省一个点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:59:26.737

有一个替代解决方案 - 您首先使用数据库，因此您可以简单地创建一个视图，该视图将提供您的投影并映射视图而不是表格。新实体将是只读的，因为 EF 不知道如何更新隐藏在视图后面的原始表 - 这个限制可以通过将存储过程映射到插入、更新和删除功能来解决。

View 还可以解决 EF 与您的数据库有关的其他问题

*   看起来您`TheTvDb`没有主键 - 没有主键的表在 EF 中是只读的
*   `Shows.Id`您正在尝试在和之间建立一对一的关系`TheTvDb.EntityId`。在您的数据库中，关系是一对一的，因为您有唯一约束，`EntityId`但在 EF 中，这种关系将是一对多的，因为 EF 还不支持唯一约束

# c# - 在 dll 中拥有用户控制权并使用它

> ID：11656725
> 
> 赞同：3
> 
> 时间：2012-07-25T19:01:38.657
> 
> 标签：c#, asp.net, user-controls

是否可以在类 libaray(dll) 中有一个 usercontrol(.ascx) 并通过引用 dll 在其他项目中使用该控件。如果它不可能或不可取，我应该如何编写我的控件以使外部项目可以重用它。任何建议都会非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:05:26.773

只要确保属性和功能是公开的。然后从您的项目中引用 dll 并使用控件，就像它驻留在同一个项目中一样。如果这是一个您要从多个项目中使用的控件，我会说是的，创建一个 dll 并引用它是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:08:51.910

是的，您可以通过使用 .ascx 的 asp_net 编译器选项来做到这一点

请参阅msdn上的这篇文章，为您提供详细的操作步骤

[http://msdn.microsoft.com/en-us/library/aa479318.aspx](http://msdn.microsoft.com/en-us/library/aa479318.aspx)

# java - 在java中处理httppost之后的响应

> ID：11656726
> 
> 赞同：1
> 
> 时间：2012-07-25T19:01:41.010
> 
> 标签：java, httpclient

我正在使用httpclient在java中发布一个xml。我也期待一个xml作为回应。如何将响应解析为 xml？

这是我到目前为止所拥有的

```
HttpClient cliet = HttpClientFactory.getClient("mhurl.com");
...
PostMethod post;
post.setRquestEntity(new StringRequestEntity(myxml_in_string,"xml",...);
...
int result = client.executeMethod(post);
InputStream in = post.getRespoinseBodyAsStream();
?? //Not sure how to handle the response from here 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:05:28.973

# 标准 Java DOM API：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(in); 
```

最后一行很关键。

# SAX API

```
SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser saxParser = factory.newSAXParser();
saxParser.parse(in, yourCustomCallback); 
```

# JAXB

假设您有合适的模型：

```
JAXBContext context = JAXBContext.newInstance(Response.class);
Response response = (Response)context.createUnmarshaller().unmarshal(in); 
```

# javascript - 使用 jQuery 的同步 Ajax 请求在 Adob e Air 上不起作用

> ID：11656728
> 
> 赞同：0
> 
> 时间：2012-07-25T19:01:42.230
> 
> 标签：javascript, jquery, ajax, air

令人难以置信的同步请求有时在某些情况下不起作用。有没有人经历过这个并有解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:04:59.253

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

asyncBoolean 默认值：true 默认情况下，所有请求都是异步发送的（即默认设置为 true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐使用 async: false 。

# python - Python minidom 解析器：忽略具有相同属性值的标记

> ID：11656730
> 
> 赞同：1
> 
> 时间：2012-07-25T19:01:53.667
> 
> 标签：python, list, attributes, minidom

试图将 xml 解析为文本我得到了这样的东西，

输入文件

```
<Item id="1"></Item>
<Item id="2"></Item>
<Item id="1"></Item>
<Item id="2"></Item> 
```

电流输出

```
 Item ->1
 Item ->2
 Item ->2
 Item ->1 
```

我想要的输出是，

```
Item ->1
Item ->2 
```

（忽略重复的 id 值）

我用来获取当前输出的当前代码是，

```
list = node.getElementsByTagName('Item')
for item in list:
  output_id = item.getAttribute('id')
  print "Item ->", output_id 
```

我已经尝试了数千种列表删除方法，但它们都输出了双 ID。帮助将不胜感激。Tks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:12:48.913

起初，每个 DOM 解析器都会返回双倍的 id，因为它们是不同的元素。为避免，请遍历 dom 树并将结果存储在`dict`对象中。这只会让你得到最后的项目。

**升级版：**

```
list = node.getElementsByTagName('Item')
items = {}
for item in list:
  output_id = item.getAttribute('id')
  items[output_id] = item # Put items into dict to use them later.
for id in items:
  print "Item[%d] -> %s" % (id, items[id]) # Only single item per id left. 
```

还有更多“pythonic”的方式：

```
list = node.getElementsByTagName('Item')
items = dict((item.getAttribute('id'), item) for item in list)
for id in items:
  print "Item[%d] -> %s" % (id, items[id]) # Only single item per id left. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:03:02.623

请改用字典。output_id 作为键。

如果您只想拥有每个 id 的最后一个元素：

```
list = node.getElementsByTagName('Item')
item_dict = {}
for item in list:
  output_id = item.getAttribute('id')
  item_dict [output_id] = item 
```

# factory-bot - 将 polymorphic_path 与 FactoryGirl 构建对象一起使用的问题

> ID：11656731
> 
> 赞同：0
> 
> 时间：2012-07-25T19:02:01.220
> 
> 标签：factory-bot, rspec-rails

我正在使用 factory_girl 和 rspec2 进行测试。我对以下代码有疑问：

```
let(:book) { build(:book, id: 1) }
book_path(book) 
```

book_path 语句正在生成**/books** url 而不是**/books/1**。我可以使用创建，但是关于如何使用构建策略解决此问题的任何建议？

我在用

```
rspec-rails (2.11.0)
factory_girl (3.5.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:19:53.160

尝试`book.to_param`（这实际上`book_path(book)`是在幕后所做的），看看它会返回什么。默认情况下`to_param`返回`id`，但你的书还没有保存，所以它可以返回 nil。

# php - preg_match 只给出一个匹配

> ID：11656732
> 
> 赞同：2
> 
> 时间：2012-07-25T19:02:03.937
> 
> 标签：php, regex, preg-match

我正在尝试创建一个 url 处理程序，并尝试使用 preg_match 来查找变量。所以这是我在替换url格式的变量后得到的preg_match（例如：post/%id%/%title%）-

```
preg_match("/post\/[0-9]+\/[a-z-א-ת-]+/i","post/5/lol",$match); 
```

我的问题是 $match 只返回这个内部数组 -

> “发布/5/大声笑”

而不是这样的数组 -

```
Array ( 
        [0] => "post/5/lol",
        [1] => "5",
        [2] => "lol"
      ) 
```

有人可以帮我找出为什么它只返回一场比赛吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:04:51.883

用括号包裹您希望捕获的每个段，创建子表达式：

```
preg_match("/post\/([0-9]+)\/([a-z-א-ת-]+)/i", "post/5/lol", $match); 
```

# .net - 访问嵌套类中的共享父字段/属性

> ID：11656743
> 
> 赞同：0
> 
> 时间：2012-07-25T19:02:44.293
> 
> 标签：.net, vb.net, properties, reference, nested-class

假设我们有：

```
Class Outer
   Public Shared Index As Integer
   Class Inner
      Private Index As Integer
      Public Shared Sub Test()
         ' how do I refer to the parent's Index?
      End Sub
   End Class
End Class 
```

然后我不能使用`MyBase`，因为它不是派生的，并且我不能将父级的实例传递给 Inner 的构造函数，因为 Test 是共享的......我也不能引用它，`Outer.Index`因为 Outer 在 Inner 时还不存在被编译，当然，在一个简单的引用中，引用的字段将是在 Inner 中定义的......那我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:12:02.970

After re-reading your question, I have removed my previous answer.

I just tested the following class in VS2010:

```
Class Outer
    Public Shared Index As Integer
    Class Inner
        Private Index As Integer
        Public Shared Sub Test()
            Debug.WriteLine(Outer.Index)
        End Sub
    End Class
End Class 
```

I then added the following code to test:

```
 Outer.Index = 1
    Outer.Inner.Test() 
```

When I execute this code, "1" is printed in the Immediate window.

# ruby-on-rails - 尝试在 Rails 上创建观察者时出现“load_missing_constant”

> ID：11656747
> 
> 赞同：0
> 
> 时间：2012-07-25T19:03:04.403
> 
> 标签：ruby-on-rails, observers

我正在尝试为我的`Offer`模型创建一个观察者，但我不断收到此错误：

```
/Users/codus/.rvm/gems/ruby-1.9.3-p194@gyp/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:503:in `load_missing_constant': Expected /Users/codus/Projetos/gyp-revolution/app/models/offer.rb to define Offer (LoadError) 
```

我的模型没有什么特别之处，我确信它是在正确的位置声明的（应用程序在没有观察者的情况下工作正常）。

我已经用 Rails 脚本生成了我的观察者

```
rails g observer offer 
```

我在我的`config/application.rb`文件中添加了这个

```
config.active_record.observers = :offer_observer 
```

最奇怪的部分是它适用于我所有其他模型。

我正在使用带有 Ruby 1.9.3p194 的 Rails 3.2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:49:55.790

问题是我使用的是 FactoryGirl，在我的`Offer`工厂中，我调用了模型中定义的常量。工厂是在模型之前加载的，所以发生了这个错误。

观察者改变了这一点很奇怪，没有它它也能正常工作。现在我只使用工厂中的值，而不是常量。

# facebook - 在页面选项卡中获取当前用户 ID

> ID：11656748
> 
> 赞同：0
> 
> 时间：2012-07-25T19:03:06.010
> 
> 标签：facebook, facebook-php-sdk

我正在尝试查找访问我的页面选项卡的用户的 ID（无需让他在使用页面之前进行身份验证）

我尝试了几种方法：

```
$requete_fb = $facebook->api('/me');

$me = $facebook->api('me', array('fields' => 'username'));

$request = $facebook->getSignedRequest();

$uid = $facebook->getUser(); 
```

但所有这些都不起作用（getUser 返回我 0，其他 PhP 错误。）

那么我该怎么做呢？我不是要破坏 TOS，而是要获取基本信息（语言环境）。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:30:15.503

未经用户许可，无法获取 user_id：

> user_id 和 oauth_token 只有在用户授权您的应用时才会被传递。

但是，`locale`在用户对象中可用。有关更多信息，请参阅[签名请求](https://developers.facebook.com/docs/authentication/signed_request/)。

# java - 锁定的tomcat线程

> ID：11656749
> 
> 赞同：1
> 
> 时间：2012-07-25T19:03:06.480
> 
> 标签：java, tomcat

我的 tomcat 服务器经常响应缓慢，一段时间后就死机了。这种情况每周经常发生一次。我进行了线程转储，它显示大约 50% 的线程处于锁定状态。锁定线程的类是 `org.apache.tomcat.util.net.AprEndpoint` 我认为随着时间的推移，线程锁定的数量正在上升，最终占用所有处于锁定状态的线程。这是线程转储中显示锁定状态的一条语句

```
"http-8080-4" daemon prio=6 tid=0x000000006acca800 nid=0x9d8 in Object.wait() [0x000000007083f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x0000000028ead838> (a org.apache.tomcat.util.net.AprEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.await(AprEndpoint.java:1511)
    - locked <0x0000000028ead838> (a org.apache.tomcat.util.net.AprEndpoint$Worker)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1536)
    at java.lang.Thread.run(Thread.java:619)
   Locked ownable synchronizers:
    - None 
```

# ruby-on-rails - 如何使用特定子域使特定页面 SSL 保护

> ID：11656751
> 
> 赞同：0
> 
> 时间：2012-07-25T19:03:11.307
> 
> 标签：ruby-on-rails, ssl

我有我的网站和我接受信用卡的页面，我想拥有 SSL。我为子域设置了 SSL：secure.website.com

那么，如何确保我接受信用卡的页面始终是 https 并且具有secure.website.com 的子域。

地址是：[http ://www.website.com/subscriptions/new](http://www.website.com/subscriptions/new)

这需要

[https://secure.website.com/subscriptions/new](https://secure.website.com/subscriptions/new)

如何让它始终呈现该 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:02:05.370

将协议和子域参数添加到 url_for。您需要包含此处所述的 url_for 修改：[http ://railscasts.com/episodes/221-subdomains-in-rails-3](http://railscasts.com/episodes/221-subdomains-in-rails-3)

最终结果将是：

```
<%= url_for(:action => 'new', :controller => 'subscriptions', :only_path => false, :protocol => 'https', :subdomain => 'secure') %> 
```

# matlab - 使用两个正交规则在matlab中嵌套求积

> ID：11656753
> 
> 赞同：0
> 
> 时间：2012-07-25T19:03:19.583
> 
> 标签：matlab, math, integral

坚持对这个积分进行数值评估，并且只有做简单正交方案的经验，所以如果这看起来很业余，请多多包涵。下面的嵌套积分使用 Gauss-Hermite(-inf,+inf) 和 Gauss Laguerre 方案的变体 (0,+inf) - 在高斯和 gamma(v/2,2) 密度上。我到了几乎完成积分的地步，中间步骤看起来不错，但我坚持如何组合权重来评估整体积分。对于修改代码/其他想法以编写更好的正交方案来解决问题的建议，我将非常感激。\begin{方程} \int^{\infty} *{-\infty}\int^{\infty}* {0} \prod_{i=1}^n\Phi \left(\frac{\sqrt{w/v }\,C{i}-a{i}Z}{\sqrt{1a {i^2}}\right)f{z}(Z)f{w}(W)dwdz \end{方程}

% 脚本定义节点、权重、参数然后调用一个主函数和一个子函数

ρ=0.3；nfirms=10；h=repmat(0.1,[1,nfirms]); T=1；R=0.4；v=8；阿尔法=v/2；高斯点=15；

```
% Quadrature nodes - gaussian and gamma(v/2) from Miranda and Fackler CompEcon
    % toolbox
[x_norm,w_norm] = qnwnorm(GaussPts,0,1);
[x_gamma,w_gamma] = qnwgamma(GaussPts,alpha);
L_mat=zeros(nfirms+1,GaussPts);

for i=1:1:GaussPts;
     L_mat(:,i) = TC_gamma(x_norm(i,:),x_gamma(i,:),h,rho,T,v,nfirms);
end; 

w_norm_mat= repmat(w_norm',nfirms+1,1);
w_gamma_mat = repmat(w_gamma',nfirms+1,1);
% need to weight L_mat by the gaussian and chi-sq i.e, (gamma v/2,2)?
ucl = L_mat.*w_norm;%?? HERE
ucl2 = sum(ucl.*w_gamma2,2);% ?? HERE

function [out] = TC_gamma(x_norm,x_gamma,h,rho,T,v,nfirms)
% calls subfunction feeds into recursion

qki= Vec_CondPTC_gamma(x_norm,x_gamma,h,rho,T,v)' ;

fpdf=zeros(nfirms+1,nfirms+1);
% start at the first point on the tree
 fpdf(1,1)=1; 
    for i=2:nfirms+1 ;
     fpdf(1,i)=fpdf(1,i-1)*(1-qki(:,i-1));
       for j=2:nfirms+1;
       fpdf(j,i)=fpdf(j,i-1)*(1-qki(:,i-1))+fpdf(j-1,i-1)*qki(:,i-1);
     end
   fpdf(i,i)=fpdf(i-1,i-1)*qki(:,i-1);
  end
out=fpdf(:,end);
end% of function TC_gamma

function qki= Vec_CondPTC_gamma(x_norm,x_gamma,h,rho,T,v) 
PD = (1-exp(-kron(h,T)));DB = tinv(PD,v);

a=rho.^0.5; sqrt1_a2 = sqrt(1-sum(a.*a,2));

aM = gtimes(a, x_norm'); Sqrt_W=gamcdf(x_gamma,v/2,2).^0.5;

DB_times_W= gtimes(DB,Sqrt_W); DB_minus_aM = gminus(DB_times_W',aM);

qki=normcdf(grdivide(DB_minus_aM,sqrt1_a2));
end% of function Vec_CondPTC 
```

# asp.net - 在 aspx 页面中更改 flash 文件的宽度和高度

> ID：11656755
> 
> 赞同：0
> 
> 时间：2012-07-25T19:03:34.910
> 
> 标签：asp.net, flash

我有一个 flash 文件，我需要在 aspx 文件中显示它。fla 文件的宽度和高度分别为 500 和 600px 。但我需要以 300 和 300 像素显示它。我在 aspx 文件中设置宽度和高度。但闪存文件不正确。fla 文件的某些部分被隐藏了。我需要完全显示 Flash 文件，但尺寸很小。

```
 <div style="Height:300px; width:300px">
       <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"                  

      codebase="http://fpdownload.macromedia.com/pub/
       shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="100%" height="105%">
       <param name="movie" value="events.swf" />
      <param name="quality" value="high" />
       <param name="allowScriptAccess" value="always" />
      <param name="wmode" value="transparent"/>
 <embed src="events.swf"
  quality="high"
  type="application/x-shockwave-flash"
  wmode="transparent"
  width="100%"  
  height="105%"
  top="100px"   
  pluginspage="http://www.macromedia.com/go/getflashplayer"
  allowScriptAccess="always" />
 </object></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:52:43.413

您描述的问题与 FLA 的构建和嵌入方式有关，与 ASP.NET 几乎没有关系，因为它是一种服务器端技术。为此，需要将 Flash 的“比例”设置为`showAll`，您可以通过添加标签和标签`scale="showAll"`来实现。`EMBED``<param name="scale" value="showAll" />``OBJECT`

但是，您的 Flash 影片可能会将值比例值覆盖为“noScale”。这是通过将`scaleMode`of设置`Stage`为`noScale`或其他不需要的值来完成的。您需要检查 Flash 电影的来源才能删除该覆盖。如果影片的来源是 Flex 应用程序，则默认情况下 Flex 应用程序`scaleMode`是`noScale`

# django - 手动将记录添加到 django_session 表

> ID：11656757
> 
> 赞同：0
> 
> 时间：2012-07-25T19:03:44.240
> 
> 标签：django, django-models

我需要手动将记录添加到`django_session`表中。用我自己的 SQL。

我可以将`session_data`列留空吗？它的用途是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:13:30.547

`session_data`包含会话的实际数据。对于 Django 会话，跟踪会话的 cookie 实际上只包含一个 ID，它指向数据库中包含实际会话数据的记录。`session_data`不应为空；您可以存储一个空白字符串，但它应该以与 Django 数据库后端相同的方式进行序列化。不幸的是，这涉及腌制数据（使用 Python 的`pickle`模块），然后将其转换为 base-64 表示，因此在Python*之外执行此操作可能并非易事。*

为什么必须使用自己的 SQL？为什么不编写一个脚本（最好是[管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)）来利用 Django 的会话框架来创建您的对象？

# git - Git：“请告诉我你是谁”错误

> ID：11656761
> 
> 赞同：281
> 
> 时间：2012-07-25T19:04:05.440
> 
> 标签：git

我有使用 Chef + 一些临时 bash 脚本一起引导的应用程序服务器。问题是，当我想在这些应用服务器之一上运行更新时，我得到：

```
19:00:28: *** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name" 
```

`git pull origin master`每次更新应用服务器时，我真的需要设置这个来做一个简单的事情吗？无论如何要覆盖此行为，以便在未设置名称和电子邮件时不会出错？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2013-09-24T03:06:38.650

当我调用 PHP 脚本`init`和`commit`git 时，我花了很多时间在上面。我发现工作流程应该是：

1.  `git init`
2.  `git config user.name "someone"`
3.  `git config user.email "someone@someplace.com"`
4.  `git add *`
5.  `git commit -m "some init msg"`

如果你交换 [23] 和 1，配置将根本不起作用。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-07-18T02:40:56.330

而不是做 a `git pull`，你可以这样做：

```
git fetch
git reset --hard origin/master 
```

这些都不需要您配置您的 git 用户名/电子邮件。

这将破坏任何未提交的本地更改/提交，并使您的 HEAD 指向提交（而不是分支）。但是对于应用服务器来说，这些都不应该是问题，因为您不应该进行本地更改或提交到该存储库。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-05-01T11:13:00.950

它对我有用，试试这个..你需要为你的终端配置远程访问。

```
 git config --global user.name "abc"
     git config --global user.email "abc@example.com" 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-08-13T06:56:14.983

如果您使用的是 sourcetree：存储库 -> 存储库设置 -> 高级 -> 取消选中“使用全局用户设置”框

对我来说很好。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-07-25T20:06:47.867

更新您的引导过程以创建`${HOME}/.gitconfig`具有正确内容的文件，或从某处复制现有文件。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-06-20T23:08:51.877

```
git config user.email "insert github email here"
git config user.name "insert github real name here" 
```

这对我很有用。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-06-23T20:43:53.387

就我而言，正如乍得上述所说，我在“电子邮件”一词上缺少“e”，但我认为你的情况并非如此。请点击以下命令以查看是否一切都按预期进行。

```
git config -l 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-01-05T09:32:25.837

它无法自动检测电子邮件地址。

默认情况下，它需要您的系统用户名，例如`abc@xyz.none`.

所以你需要像下面这样设置你的电子邮件：

```
git config user.email "someone@gmail.com" 
```

设置电子邮件后，您可以运行 git 命令并提交您的更改。

1.  混帐初始化
2.  混帐添加 *
3.  git commit -m "一些初始化信息"

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-03-28T18:29:41.003

我也遇到了同样的问题，并通过添加默认名称和电子邮件存储库设置来解决它。

正如多伦建议的那样——

如果您使用的是 sourcetree：存储库 -> 存储库设置 -> 高级 -> 取消选中“使用全局用户设置”框。

添加默认名称和电子邮件地址。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-03-04T15:54:13.490

你必须这样写你的电子邮件

```
 git config --global user.email "you@example.com" 
```

然后：写用户名

```
 git config --global user.name "Your Name" 
```

之后弹出窗口将出现

**为您想要贡献的帐户**写**USERNAME 和 EMAIL**

 *** * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-12-08T21:38:07.027

对我来说，问题是网络连接，一旦我重新连接到我的 wifi，它就可以获取详细信息并毫无问题地提交。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-09-10T20:21:52.307

我将此视为错误的错误消息：在 Perl CGI 进程（从 gi​​thub 自动部署的 webhook）中，
`git pull`cmd 行工作正常失败，并出现上述错误。
`git pull`

做一个`git status`确定的冲突文件。排序解决了这个问题。

当我更改一些配置设置时，问题再次出现。

这一次，设置 $HOME 和 $USER 环境变量修复了它（在 CGI 进程中默认未设置）

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-01-23T10:44:52.497

> > 每次我更新应用服务器时，我真的需要设置这个来做一个简单的 git pull origin master 吗？无论如何要覆盖此行为，以便在未设置名称和电子邮件时不会出错？

它只会询问一次，并确保将这台机器的 rsa 公钥添加到您尝试提交或传递拉取请求的 github 帐户中。

可以找到更多信息：[这里](http://www.gettechgo.com/migrating-git-repository/)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-04-01T16:19:50.053

我使用 Jenkins 并在尝试执行发布（需要 git 提交）时遇到了这个问题。为了解决这些问题，我需要添加一个自定义用户名/电子邮件地址（见图）[![自定义用户名/电子邮件地址](../Images/d75b220e0dac5bb4e3d1e2a8ab1b1f52.png)](https://i.stack.imgur.com/FrEcR.png)，这确保了在签出代码时，它在执行发布时使用了我的构建用户的名称/电子邮件地址。请注意，此配置可从 Jenkins Multibranch Pipeline 项目配置中获得。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-01-08T08:08:30.207

看一下配置文件。

存储库 > 存储库设置 > 编辑配置文件。

检查该`[user]`部分是否存在。如果缺少用户部分，请添加它。

**例子：**

```
[user]
name = "your name"
email = "your email" 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-08-27T23:04:30.227

我使用 heroku cli 1\. 必须使用所有用户名和用户电子邮件

$git config --global user.email .login 电子邮件。

$git config --global user.name .heroku 名称。

2.  git pull [git 网址]
3.  混帐初始化
4.  混帐添加 *

    5 git commit -m "在配置用户名后，用户邮箱"

5.  git push heroku 大师

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-05-09T12:26:42.610

`git pull`不应该要求这个。但是，如果拉取导致合并冲突，那么它似乎是必要的。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-06-11T07:11:12.293

我在尝试提交一些文件时遇到了这个错误消息。

简单地运行`git fetch`然后再次尝试我的提交对我有用。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-08-03T18:45:09.140

要为此/当前 repo 设置配置，只需删除 --global 并设置名称/电子邮件，如下所示：

```
$ git config user.name "John Doe" 
$ git config user.email "JohnDoe@gmail.com" 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-09-10T17:00:12.863

恕我直言，解决此错误的正确方法是配置您的全局 git 配置文件。

为此，请运行以下命令：`git config --global -e`

将出现一个编辑器，您可以在其中插入默认的 git 配置。

这里有一些：

```
[user]
    name = your_username
    email = your_username@users.noreply.github.com 
[alias]
    # BASIC
    st = status
    ci = commit
    br = branch
    co = checkout
    df = diff 
```

有关更多详细信息，请参阅[自定义 Git - Git 配置](https://git-scm.com/book/zh-tw/v2/Customizing-Git-Git-Configuration)

当您看到类似的命令时，`git config`...

```
$ git config --global core.whitespace \
    trailing-space,space-before-tab,indent-with-non-tab 
```

...您可以将其放入您的全局 git 配置文件中：

```
[core]
   whitespace = space-before-tab,-indent-with-non-tab,trailing-space 
```

对于一次性配置，您可以使用类似`git config --global user.name 'your_username'`

如果您没有全局设置 git 配置，则需要为您在本地使用的每个 git 存储库都这样做。

user.name 和 user.email 设置告诉 git 你是谁，所以后续`git commit`命令不会抱怨，`*** Please tell me who you are.`

很多时候，git 建议你运行的命令并不是你应该运行的。这一次，建议的命令还不错：

```
$ git commit -m 'first commit'

*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name" 
```

提示：在我非常熟悉 git 之前，备份我的项目文件——在运行建议的 git 命令和探索我认为可行的东西之前——多次保存了我的培根。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-08-18T08:21:19.373

如果您发现旧的默认行为有用（即使用本地用户名和主机名作为作者身份进行提交，而不是识别您的人），您可以运行：

```
git config --global user.name "$USER" && git config --global user.email "$USER@$HOSTNAME" 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2018-05-12T17:50:28.323

要修复我使用： git config --global user.email "you@example.com" 并且有效。

user.mail 不行，可能需要输入 E. Typo 吗？

* * *

## 回答 #23

> 赞同：-5
> 
> 时间：2015-09-04T06:09:30.903

那是一个错字。您不小心设置了“user.mail”而没有“ **e** ”。通过在全局配置中设置“user.email”来修复**它**

git config --global user.email "you@example.com"

在这里找到解决方案

[https://stackoverflow.com/a/14662703](https://stackoverflow.com/a/14662703)**

# facebook - FB Graphi API 能否看到与我的粉丝页面内容的交互

> ID：11656762
> 
> 赞同：0
> 
> 时间：2012-07-25T19:04:05.770
> 
> 标签：facebook, facebook-graph-api

我有一个网站，以及该网站的 Facebook 粉丝页面。我的网站正在使用 Facebook 连接，我想知道是否可以查询来自登录用户的粉丝页面内容的喜欢、分享和评论的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:44:52.733

这可以通过通过[图形 api](http://developers.facebook.com/docs/reference/api/)抓取页面的提要并在您自己的数据库中收集[帖子](http://developers.facebook.com/docs/reference/api/post/)的评论和喜欢来完成（请参阅连接部分）。然而，这是一项艰巨的任务，您将不得不处理内容同步（在 Facebook 上删除帖子时从您身边删除帖子）、访问令牌过期、Facebook 偶尔中断等等。

如果您只是想在您的页面上向他们可能喜欢的用户显示内容，facebook 为您提供了一个名为[Recommendations](http://developers.facebook.com/docs/reference/plugins/recommendations/)的社交插件。

# android - 从另一个线程调用 sendBroadcast() 可以吗？

> ID：11656763
> 
> 赞同：19
> 
> 时间：2012-07-25T19:04:09.490
> 
> 标签：android

我有一个创建线程的服务。这个线程做了一些工作，然后调用`sendBroadcast()`. `Service`这意味着`sendBroadcast()`从工作线程调用，而不是从运行服务的线程调用。

这可以吗，还是我应该确保从与(通过使用and )`sendBroadcast()`相同的线程调用？`Service``Handler``Runnable`

我在 stackoverflow 和[Dianne Hackborns 的帖子上找到](https://groups.google.com/d/msg/android-developers/fK48x0Neuvo/CveT3lKboDgJ)[了这个](https://stackoverflow.com/q/5024465/79455)。

根据帖子应该没问题。我问的原因是因为这个帖子已经有 2 年了，也许有些东西已经改变了。我在 Android 文档中也找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T19:10:00.797

That is fine. The Broadcast is handed to the Android OS and it is actually sent using OS threads so your thread that sends it does not matter.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-08T07:54:51.547

你已经得到了答案，但也许我可以再补充一些。

从多个线程调用它似乎很好。无论您`sendBroadcast(...)`从哪个线程调用，它都会处理它的 onReceive 方法（您可能知道）。默认情况下，它在您的应用程序的主/UI 线程上工作。您可以通过以下方式更改此行为`registerReceiver(...)`

这就像使用 Messenger 建立客户端-服务器连接。记住所有消息，无论它们是从哪个线程发送的，都在单个消息队列中处理，该消息队列在单个线程上消耗/循环。

# c++ - 定义 const scope_refptr() 有意义吗？

> ID：11656764
> 
> 赞同：0
> 
> 时间：2012-07-25T19:04:10.040
> 
> 标签：c++, chromium

```
scoped_refptr<any_class> a_scoped_refptr;
const scoped_refptr<any_class> something = a_scoped_refptr; // Compile error. 
```

如果是const比我们不能修改ref_counter，但是我想暗示指针指向的内容不应该改变，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:02:26.420

两件事情：

首先，您没有提到编译器错误，但我猜这是一个简单的语法错误，因为您没有为`scoped_refptr`.

其次，如果您想要一个指向 const 对象的指针，请将其指定为指针类型。所以试试：

```
scoped_refptr<any_class const> myPointer = a_scoped_refptr; 
```

# jquery - 根据页面 ID 切换属性值

> ID：11656765
> 
> 赞同：0
> 
> 时间：2012-07-25T19:04:16.463
> 
> 标签：jquery, asp.net-mvc

如果我有标记

```
 <div data-role="page"  @(Page.Id == null ? string.Empty : "id=" + Page.Id) data-fullscreen="false"> 
```

在我的 _Layout 页面中，当有人转到我的 Browse.cshtml 视图时，我想更改 data-fullscreen="true" 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:07:23.630

```
$("#div").attr("data-fullscreen", "true"); 
```

# python - 如何获取列表中所有元素的日志

> ID：11656767
> 
> 赞同：26
> 
> 时间：2012-07-25T19:04:27.267
> 
> 标签：python, arrays

我有一个数组

```
x = [1500, 1049.8, 34, 351, etc] 
```

如何获取整个数组的 log_10()？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-25T19:06:32.723

[numpy](http://docs.scipy.org/doc/numpy/reference/generated/numpy.log10.html)会为你做的。

```
import numpy
numpy.log10(mat) 
```

**笔记**

`mat`不必是一个 numpy 数组才能工作，并且`numpy`应该比其他答案所建议的使用列表理解更快。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-25T19:06:11.337

```
from math import log
[log(y,10) for y in x] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-25T19:07:19.043

最简单的方法是使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

* * *

**例子：**

```
>>> x = [1500, 1049.8, 34, 351]
>>> import math
>>> [math.log10(i) for i in x]
[3.1760912590556813, 3.021106568432122, 1.5314789170422551, 2.545307116465824]
>>> 
```

另一种方法是使用[地图](http://docs.python.org/library/functions.html#map)功能

* * *

**例子：**

```
>>> map(math.log10, x)
[3.1760912590556813, 3.021106568432122, 1.5314789170422551, 2.545307116465824]
>>> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-25T19:09:42.440

您还可以使用`map`内置函数：

```
import math
new_list = map(math.log10, old_list) 
```

这可能比列表理解快得多。我在这里添加它主要是为了显示两者之间的相似性。

**编辑**（回应@HankGay 的评论）

为了证明在这种情况下 map 稍微快一点，我写了一个小基准：

```
import timeit

for i in range(10):
    t=timeit.timeit("map(math.log10,a)",setup="import math; a=range(1,100)")
    print "map",t
    t=timeit.timeit("[math.log10(x) for x in a]",setup="import math; a=range(1,100)")
    print "list-comp",t 
```

这是我笔记本电脑上的结果（OS-X 10.5.8，CPython 2.6）：

```
map 24.5870189667
list-comp 32.556563139
map 23.2616219521
list-comp 32.0040669441
map 23.9995992184
list-comp 33.2653431892
map 24.1171340942
list-comp 33.0399811268
map 24.3114480972
list-comp 33.5015368462
map 24.296754837
list-comp 33.5107491016
map 24.0294749737
list-comp 33.5332789421
map 23.7013399601
list-comp 33.1543111801
map 24.41685009
list-comp 32.9259850979
map 24.1111209393
list-comp 32.9298729897 
```

重要的是要意识到速度并不是一切。“可读性很重要”。如果`map`创建了更难阅读的内容，请务必进行列表理解。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-25T19:07:13.433

```
import math
x = [1500, 1049.8, 34, 351]
y = [math.log10(num) for num in x] 
```

这称为[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。它正在做的是创建一个新列表，其元素是应用于[`math.log10`](http://docs.python.org/library/math.html#math.log10)原始中相应元素的结果`list`，这不是一个[`array`](http://docs.python.org/library/array.html#array.array)，顺便说一句。

# c# - 复制 ASP.Net TableRow

> ID：11656768
> 
> 赞同：0
> 
> 时间：2012-07-25T19:04:29.317
> 
> 标签：c#, asp.net, copy, tablerow

我认为这个问题与引用类型有关，而我对这些缺乏了解......

所以我动态创建了 ASP.Net 表（如在 Web.UI.WebControls.Table 中，而不是数据库种类）这些可以有任何东西，从一行带有一个带有文本的单元格，到一系列嵌套表和控件，具体取决于客户。

我需要遍历每个 TableRow，如果满足某个条件，那么我将该行复制到第二个 Table 对象。这是代码的简化位。

```
 Table xTblComplete = (passed in as parameter) // original & complete table
        Table xTblTemp = new Table();  // gets built dynamically with specific rows

        foreach (TableRow xThisRow in xTblComplete.Rows)
        { 
            if (xThisRow.Cells.Count > 0)
            {
                if (certain condition met)
                {
                    xTblTemp.Rows.Add(xThisRow);
                }
            }
        } 
```

我遇到困难的地方是，当我尝试将 TableRow 添加到 Table2 时，foreach（table.rows 中的行）会引发错误。我收到错误“集合已修改；枚举操作可能无法执行。”这是有道理的，因为我应该复制该表行以添加。

谁能建议这是如何完成的？我已经扫描了 MSDN 和论坛中的一般引用类型复制，但它们似乎都指向使用 ICloneable ，我相信我无法这样做，因为这不是我的课程。

我希望这是我错过的一些小而基本的东西，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:12:41.783

您正在使用`for loop`. 这样做时您无法修改集合，这就是您收到错误消息的原因。该行附加到该表。时期。

如果您需要该行的副本，请逐个单元格获取您要查找的值。这是一个例子：

```
TableRow  tempRow= new TableRow();
Table  xTblTemp= new Table();
for (int i = 0; i < xTblComplete.Rows[0].Cells.Count - 1; i++)
{
  TableCell cell = xTblComplete.Rows[0].Cells[i];
  tempRow.Cells[i].Text = cell.Text;      
}
xTblTemp.Rows.Add(tempRow); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:13:42.943

感谢 Ulises，您的回答很有帮助，不幸的是，这些表格的复杂性导致了一个简单的循环和复制内容。我的意思是有些单元格可能有 5 层嵌套表，每个表中包含任意数量的 Web 控件。是的，一个 CSS 完美主义者会对这么多嵌套表的想法感到厌烦，但这是必须要做的！

最后，我使用了一个 while(bln) 循环，每次都检查 xTblComplete.Rows[0]。

如果它满足条件，我会将它复制到 xTmpTable，它也将它从 xTblComplete 中删除。

如果它不符合条件，我会自己删除它（ xTblComplete.Rows.Remove(xTblComplete.Rows[0]);

这样，Rows[0] 将始终是下一个要处理的。在每个循环之后，我检查了 bln 是否有更多要处理的行，如果没有，则循环将退出。

# numpy - matplotlib hist 中 bin 的解释

> ID：11656774
> 
> 赞同：0
> 
> 时间：2012-07-25T19:04:58.850
> 
> 标签：numpy, matplotlib, scipy

如果它是一个序列，`bins`参数的解释是什么？`matplotlib.hist`和numpy的`bins`论点一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:18:41.323

是的，它是一样的。它定义了数据的间隔数。给出一个序列可以让你在 numpy 和 matplotlib 中拥有不相等的大箱子。您可以在[numpy](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html)和[matplotlib 的](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.hist)命令文档中找到关于此的详细帮助`hist`。

# c# - 格式化 XML 以便于阅读

> ID：11656777
> 
> 赞同：1
> 
> 时间：2012-07-25T19:05:02.957
> 
> 标签：c#, xml, .net-2.0

我有一个文件名列表，每个文件都有一个校验和。在 xml 文件中组织这些数据的最佳方式是什么？到目前为止，我有：

```
<tables>
    <table name="test1.txt">"KMDalk4lsmxf#lsfjs_akmf3"</table>
    <table name="test2.txt">"asd6o9iASla0gbd#0saaj234"</table>
    <table name="test3.txt">"S9rk2jalkjf93klsa+jmskl2"</table>
    <table name="test4.txt">"aj54oislkaoi309aSWpoa2JD"</table>
</tables> 
```

现在，使用 XMLReader 我希望能够仅按名称查找表，然后返回校验和。我该怎么做？文件名最好使用属性或元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:10:46.200

将校验和存储在属性中，如下所示：

```
<tables>
    <table name="test1.txt" checksum="KMDalk4lsmxf#lsfjs_akmf3"/>
    <table name="test2.txt" checksum="asd6o9iASla0gbd#0saaj234"/>
    <table name="test3.txt" checksum="S9rk2jalkjf93klsa+jmskl2"/>
    <table name="test4.txt" checksum="aj54oislkaoi309aSWpoa2JD"/>
</tables> 
```

会更加一致。

但实际上并没有太大的区别，`name`无论如何，大多数性能都将用于找到匹配的节点。

# sql - 如果没有找到结果，则 sql 跳过插入语句

> ID：11656778
> 
> 赞同：0
> 
> 时间：2012-07-25T19:05:06.330
> 
> 标签：sql, oracle

我有许多插入语句，如下所示，我试图在一个大块中运行。无论如何，我是否可以告诉查询跳过该特定插入语句并继续向下选择语句之一返回 null 的列表？

```
 insert into V1144engine.T_edges(edge_id, version, node1_id, node2_id, edge_type_id, created_at, weight,deleted_at) VALUES(V1144ENGINE.S_PK_EDGES.NEXTVAL,0,(Select node_id from V1144engine.T_nodes where node_name = 'Writing an Equation of a Perpendicular Line' and rownum=1),(select node_id from V1144engine.T_nodes where node_name = 'slope'and node_type_id =11),5,SYSDATE,5.318,null);

    insert into V1144engine.T_edges(edge_id, version, node1_id, node2_id, edge_type_id, created_at, weight,deleted_at) VALUES(V1144ENGINE.S_PK_EDGES.NEXTVAL,0,(Select node_id from V1144engine.T_nodes where node_name = 'Writing an Equation of a Perpendicular Line' and rownum=1),(select node_id from V1144engine.T_nodes where node_name = 'vertic'and node_type_id =11),5,SYSDATE,5,null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:35:02.787

我将它包装成一个`select ... from dual`并限制`node1|2_id IS NOT NULL`：

```
INSERT INTO v1144engine.t_edges (edge_id
                                ,version
                                ,node1_id
                                ,node2_id
                                ,edge_type_id
                                ,created_at
                                ,weight
                                ,deleted_at
                                )
 SELECT *
       FROM (
             SELECT 
                    v1144engine.s_pk_edges.NEXTVAL edge_id
                   ,0                              version
                   , (SELECT node1_id
                        FROM v1144engine.t_nodes
                       WHERE node_name = 'Writing an Equation of a Perpendicular Line'
                         AND ROWNUM = 1)           node1_id
                   , (SELECT node_id
                        FROM v1144engine.t_nodes
                       WHERE node_name = 'slope'
                         AND node_type_id = 11)    node2_id
                   ,5       edge_type_id
                   ,SYSDATE                        created_at
                   ,5.318                          weight
                   ,NULL                           deleted_at
               FROM dual
            )
      WHERE node1_id IS NOT NULL
        AND node2_id IS NOT NULL
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:51:16.220

您可以复制嵌套`SELECT`s in`EXISTS`子句的谓词：

```
INSERT INTO v1144engine.t_edges (
    edge_id
,   version
,   node1_id
,   node2_id
,   edge_type_id
,   created_at
,   weight
,   deleted_at
)
SELECT v1144engine.s_pk_edges.NEXTVAL
,      0
,     (SELECT node_id 
       FROM   v1144engine.t_nodes 
       WHERE  node_name = 'Writing an Equation of a Perpendicular Line'
       AND    ROWNUM = 1)
,     (SELECT node_id
       FROM   v1144engine.t_nodes
       WHERE  node_name = 'slope'
       AND    node_type_id = 11)
,      5
,      SYSDATE
,      5.318
,      TO_DATE(NULL)
FROM   DUAL
WHERE  EXISTS (SELECT NULL
               FROM   v1144engine.t_nodes 
               WHERE  node_name = 'Writing an Equation of a Perpendicular Line')
AND    EXISTS (SELECT NULL
               FROM   v1144engine.t_nodes
               WHERE  node_name    = 'slope' 
               AND    node_type_id = 11); 
```

我不知道你有多少这样的，但是，作为一种替代方案，也许像下面这样的旋转会起作用，因为它更像是一种基于集合的方法？

```
INSERT INTO v1144engine.t_edges (
    edge_id
,   version
,   node1_id
,   node2_id
,   edge_type_id
,   created_at
,   weight
,   deleted_at
)
SELECT v1144engine.s_pk_edges.NEXTVAL
,      0
,      MAX(CASE
           WHEN node_name = 'Writing an Equation of a Perpendicular Line'
           THEN node_id
           END)
,      MAX(CASE
           WHEN node_name = 'slope'
           AND  node_type_id = 11
           THEN node_id
           END)
,      5
,      SYSDATE
,      5.318
,      TO_DATE(NULL)
FROM   v1144engine.t_nodes
WHERE  node_name IN ('Writing an Equation of a Perpendicular Line','slope')
HAVING MAX(CASE
           WHEN node_name = 'Writing an Equation of a Perpendicular Line'
           THEN node_id
           END) IS NOT NULL
AND    MAX(CASE
           WHEN node_name = 'slope'
           AND  node_type_id = 11
           THEN node_id
           END) IS NOT NULL
; 
```

（警告：未经测试的代码。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:09:00.733

为什么不把选择放到一个临时表中，然后从中生成动态 SQL 呢？

# php - 发生错误时确定“违规”文件和行号

> ID：11656781
> 
> 赞同：0
> 
> 时间：2012-07-25T19:05:25.507
> 
> 标签：php

这有点难以解释，但代码可能更清晰：

```
// class.php
class Foo
{
    public function bar ()
    {

    }
}

// test.php
$foo = new Foo;
$foo->bar(); // e.g., for some reason this returns an error hence error handler will be triggered 
```

这是一个简化的示例，但 test.php 的嵌套可能更深。我的自定义错误处理程序如何告诉我错误发生在 test.php 第 2 行？

我目前正在使用，但 test.php 的数组索引会根据对象的`debug_backtrace()`深度或数量而有所不同`require()`

不管函数调用的嵌套有多深，有没有办法查明这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:06:53.720

您可以打印一个`debug_backtrace()`将生成所有调用者的完整数组，包括文件和行号。

### 例子

```
<?php

    class Test {

        public function debug() {
            print_r(debug_backtrace());
        }
    }

    function print_debug() {
        $test = new Test();
        $test->debug();
    }

    header("Content-type: text/plain");
    print_debug(); 
```

### 结果

```
Array
(
    [0] => Array
        (
            [file] => D:\Websites\htdocs\tests\index.php
            [line] => 11
            [function] => debug
            [class] => Test
            [object] => Test Object
                (
                )

            [type] => ->
            [args] => Array
                (
                )

        )

    [1] => Array
        (
            [file] => D:\Websites\htdocs\tests\index.php
            [line] => 14
            [function] => print_debug
            [args] => Array
                (
                )

        )

) 
```

* * *

你也可以尝试抛出一个异常，让它冒泡，它会杀死你的脚本，显示一个完整的回溯。看看这是否适合你。

# graph - 基于节点和边权重的图划分

> ID：11656784
> 
> 赞同：0
> 
> 时间：2012-07-25T19:05:31.463
> 
> 标签：graph, partitioning, np-complete, approximation, bin-packing

我有一个图 G=(V,E) 边和节点都有权重。我想对该图进行分区以创建大小相等的分区。分区大小的定义是 sum(vi)-sum(ej)，其中 vi 是该分区内的一个节点，ej 是该分区内两个节点之间的一条边。在我的问题中，图表非常密集（几乎完整）。是否有任何近似算法？

这在某种程度上类似于 bin 包装中的问题，其中 bin 具有相同大小的[重叠对象。](https://stackoverflow.com/questions/11649024/bin-packing-with-overlapping-objects)节点的权重是它们的大小，边的权重显示两个对象可以重叠多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-05T12:01:25.397

我想如果你使用 METIS 程序解决了问题。你可以下载这个链接的程序 [http://glaros.dtc.umn.edu/gkhome/views/metis](http://glaros.dtc.umn.edu/gkhome/views/metis) 它有一个很好的文档和非常快速的程序。

# d3.js - d3.js & nvd3.js 轴和标签精度格式

> ID：11656788
> 
> 赞同：18
> 
> 时间：2012-07-25T19:05:44.367
> 
> 标签：d3.js, nvd3.js

使用本示例中所示的堆积面积图 [http://nvd3.com/ghpages/stackedArea.html](http://nvd3.com/ghpages/stackedArea.html)

尝试将 y 轴刻度标签和工具提示标签格式化为整数而不是浮点数。尝试更改以下代码

```
chart.yAxis
        .axisLabel('Users')
        .tickFormat(d3.format(',.2f')); 
```

到

```
chart.yAxis
        .axisLabel('Users')
        .tickFormat(d3.format(',.0d')); 
```

精度保持不变（仍然显示百分之一的值）。我关注 Github Wiki 无济于事[https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format](https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format)

任何建议或提示将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T23:44:03.870

看起来[目前 nvd3 不支持此功能](https://github.com/novus/nvd3/issues/97)。请参阅违规[行](https://github.com/novus/nvd3/blob/master/src/models/stackedAreaChart.js#L133)。

此外，您的格式规范不太正确。如文档中所述，`"d"`忽略非整数值。所以你可能想要`",.0f"`，这意味着：

*   `,`: 用逗号分隔千位。
*   `.0`:*精度*为零（其确切含义取决于所使用的*类型*）。
*   `f`：*类型*；在这种情况下，[Number.toFixed](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)。这意味着小数点后出现固定位数（*精度），如有必要，该数字会四舍五入。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-13T06:52:40.667

这可以将标签文本从浮点数格式化为整数。

对于饼图：

`chart.pie.valueFormat(d3.format(',.0d'));`

对于折线图：

```
chart.yAxisTickFormat(d3.format(',.0d')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-11T09:29:08.687

`.tickFormat`方法上的方法`.yAxis`没有正确更新它。这是我使用的解决方法：

```
 chart.yAxisTickFormat(d3.format(',.0d')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-17T20:09:53.167

我试过这样

```
.axisLabel('%').tickFormat(function(d) { return parseFloat(d).toFixed(1) + "%"; }); 
```

它对我有用。我得到小数点和百分比的结果。

# c# - 使用 dapper 通过 MySql 附加参数

> ID：11656790
> 
> 赞同：5
> 
> 时间：2012-07-25T19:05:58.043
> 
> 标签：c#, mysql, dapper

我在使用 dapper 将参数附加到 MySql 查询时遇到了问题。现在这可能是一个小问题，但我已经在这个问题上打了两个小时的大部分时间，但它仍然无法正常工作。

我的问题在于中间的 SelectWithParametersTest() 函数。这是我所拥有的...

编辑：好的更多细节。实际的 Mysql 服务器会说：“ERROR [07001] [MySQL][ODBC 3.51 Driver][mysqld-5.1.61-0ubuntu0.11.10.1-log]SQLBindParameter not used for all parameters”。

`<T`实际的异常在执行阅读器的行上的QueryInternal >(...) 处被捕获。(使用(var reader = cmd.ExecuteReader())

当我检查命令时，它没有附加任何参数，但是 param 对象（传递给函数）中有我的 anon 对象。

```
using System;
using System.Data;
using System.Collections.Generic;
using Dapper;

class Program
{
    static void Main(string[] args)
    {
        using (var dapperExample = new DapperExample())
        {
            //dapperExample.SelectTest();
            dapperExample.SelectWithParametersTest();
        }
    }
}

class DapperExample : IDisposable
{
    #region Fields
    IDbConnection _databaseConnection;
    #endregion

    #region Constructor / Destructor
    public DapperExample()
    {
        _databaseConnection = new System.Data.Odbc.OdbcConnection("DSN=MySqlServer;");
        _databaseConnection.Open();
    }

    public void Dispose()
    {
        if (_databaseConnection != null)
            _databaseConnection.Dispose();
    }
    #endregion

    #region Public Methods (Tests)
    public void SelectTest()
    {
        // This function correctly grabs and prints data.
        string normalSQL = @"SELECT County as CountyNo, CompanyName, Address1, Address2
                             FROM testdb.business
                             WHERE CountyNo = 50 LIMIT 3";

        var result = _databaseConnection.Query<ModelCitizen>(normalSQL);
        this.PrintCitizens(result);
    }

    public void SelectWithParametersTest()
    {
        // This function throws OdbcException: "ERROR [07001] [MySQL][ODBC 3.51 Driver][mysqld-5.1.61-0ubuntu0.11.10.1-log]SQLBindParameter not used for all parameters"
        string parameterizedSQL = @"SELECT County as CountyNo, CompanyName, Address1, Address2
                                    FROM testdb.business
                                    WHERE CountyNo = ?B";
        var result = _databaseConnection.Query<ModelCitizen>(parameterizedSQL, new { B = 50 });
        this.PrintCitizens(result);
    }
    #endregion

    #region Private Methods
    private void PrintCitizens(IEnumerable<ModelCitizen> citizenCollection)
    {
        foreach (var mc in citizenCollection)
        {
            Console.WriteLine("--------");
            Console.WriteLine(mc.BankNo.ToString() + " - " + mc.CompNo.ToString());
            Console.WriteLine(mc.CompanyName);
            Console.WriteLine(mc.Address1);
            Console.WriteLine(mc.Address2);
        }
        Console.ReadKey();
    }
    #endregion
}

public class ModelCitizen
{
    public long CountyNo { get; set; }
    public string CompanyName { get; set; }
    public string Address1 { get; set; }
    public string Address2 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:55:46.677

Yokin，您是否尝试在 C# 代码中使用 UInt32 而不是 long？

# cuda - 在不同的内核调用之间将数据传输到 gpu

> ID：11656791
> 
> 赞同：2
> 
> 时间：2012-07-25T19:05:58.823
> 
> 标签：cuda

我有一个数据需要被多个内核访问，即如下：

```
//send array for results to GPU
//send data to be accessed by all kernels to GPU
call kernel1<<...>>
call kernel2<<...>>
...
call kernelN<<...>>
//retrieve array of results from GPU 
```

有没有可能做或不做？即让我的数据和结果数组留在 GPU 的全局内存中，直到我完成所有内核。还是我必须始终在每次内核调用之前和之后发送数据并检索结果？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:25:59.183

全局内存具有应用程序的生命周期，因此您不必在每次内核调用之前和之后发送数据和检索结果。它将在整个应用程序期间停留在那里，而不仅仅是在内核调用期间。

# javascript - KnockoutJS：基于数组启用按钮的长度

> ID：11656792
> 
> 赞同：4
> 
> 时间：2012-07-25T19:05:59.357
> 
> 标签：javascript, arrays, button, knockout.js, enable-if

在我们正在做的一个项目中，我们创建了一个收件箱，用户（除其他外）可以在其中选择项目。如果用户选择了一个项目，则应启用该按钮——如果未选择任何项目，则应禁用该按钮。

很简单，但对于我的生活，我无法让它工作:-(

你可以在这里找到一个小提琴：http: [//jsfiddle.net/rzrfp/](http://jsfiddle.net/rzrfp/)

我想我错过了一些非常、非常、非常简单和愚蠢的东西，但我已经尝试了几乎所有的东西，但无法让它工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:14:24.277

使用`ko.computed`而不是`ko.computable`.
甚至更好：`data-bind="enable: selectedItems().length > 0"`在您的按钮元素中使用。所以你可以省略计算的`showButton`.

编辑：要使用正确的上下文，请使用`var modelImpl = new myModel("myParam");`. 否则`this`模型内部指的是`window`对象。

# php - 无法在 javascript 中访问 PHP 数组，初始化为数组的 javascript 对象最终在 chrome 开发人员工具中为空

> ID：11656793
> 
> 赞同：1
> 
> 时间：2012-07-25T19:05:59.573
> 
> 标签：php, javascript, html, json

我正在尝试从 PHP 数组中获取 JSON，以便可以将 JSON 覆盖到谷歌图表 geochart 上。所以我试图通过在 test.php 文件中使用这个简单的代码来完成这个工作

```
<?php 
  include("conn.php");
?>

<!DOCTYPE html>
<html>
<head>
  <title>test</title>
</head>
<body>

<script type="text/javascript">
  document.onload = function (){
    var jsonObj = <?php echo json_encode($rowarr, JSON_FORCE_OBJECT); ?>;
    var jsonString = JSON.stringify(jsonObj, null, '\n');
    console.log(jsonString);
  };

</script>
</body>
</html> 
```

conn.php 文件返回一个像这样的数组

```
{"Auckland":37616,"Wellington":35357,"Christchurch":29818} 
```

但在 chrome 开发人员工具中，我看到此代码显示为

```
document.onload = function (){
var jsonObj = ;
    // Chrome error here -> Uncaught SyntaxError: Unexpected token ;
var jsonString = JSON.stringify(jsonObj, null, '\n'); 
```

jsonObj 变量是空的，当它应该有东西的时候。

在 CDT 控制台上我得到

> Uncaught SyntaxError: Unexpected token ;

在这个 test.php 文件的第 11 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:16:03.180

Chrome 有时只是无法正确显示可处理的数组和 XML，但它们确实存在。我的建议：在其他浏览器上获得实际结果之前，不要在 chrome 上测试你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:13:10.707

I have encountered this kind of scenario yesterday.

```
<script type="text/javascript">
  document.onload = function (){
    var jsonObj = <?php echo json_encode($rowarr); ?>;
    var jsonString = JSON.parse(jsonObj);
    console.log(jsonString);
  };

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:17:05.593

在我看来， $rowarr 不包含您认为它包含的内容。也许先尝试记录它....

```
console.log("$rowarr"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T19:22:53.207

你是正确的。

首先，您可以摆脱封闭的 document.onload ，因为它毫无意义。

其次，这是修改后的代码：

```
var jsonStringified = <?php echo json_encode($rowarr); ?>,
    jsonObject = JSON.parse(jsonStringified);

console.log(jsonObject); 
```

# c++ - 位移位 - 移动一个移位的值

> ID：11656794
> 
> 赞同：3
> 
> 时间：2012-07-25T19:06:00.253
> 
> 标签：c++, arduino, bit-manipulation, bit-shift, shift

我试图做一个更长的功能，但它的行为很奇怪。我曾试图找出问题所在，但我已经能够找到错误的部分。

该程序是为 Arduino 制作的，但这种现象可能出现在其他环境中。我试图进行大量搜索，但找不到解决方案。

## 所以，我的错误部分：

**为什么这两个代码不给出相同的结果？
如何构造一个没有额外变量
但与“代码 1”相同的操作的单行函数？**

结果：

*   代码1：0b00101100
*   代码2：0b01101100

源代码：

* * *

代码1：（正确操作但不是一行）

```
#include <binary.h>

const byte value=B00110110;
byte buffer,result;

void setup(){
  Serial.begin(115200);

  buffer = (value << 3);
  result = (buffer >> 2);

  Serial.println(result,BIN);
}

void loop(){
} 
```

它给出：**0b00101100**

* * *

代码2：（操作不正确但一行）

```
#include <binary.h>

const byte value=B00110110;
byte result;

void setup(){
  Serial.begin(115200);

  result = ((value << 3) >> 2);

  Serial.println(result,BIN);
}

void loop(){
} 
```

它给出：**0b01101100**

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:13:46.430

通过使用以下掩码删除额外的位`0xFF`：

```
result = (((value << 3) & 0xFF) >> 2); 
```

您还可以在移位序列之后修剪高三位：

```
result = 0x1F & ((value << 3) >> 2); 
```

根据语言规范，在移位之前对移位操作数应用默认整数提升，并且操作的结果是第一个操作数的提升类型。

> 5.8.1 操作数应为整型或枚举型，并进行整型提升。结果的类型是提升的左操作数的类型。

如果整数类型可以放入 中`int`，`int`则为提升的结果。当您向左移动时，最高有效位“溢出”到`int`. `byte`您的第一个片段通过分配回;来切断它们。您可以通过使用 屏蔽结果来获得相同的结果`0xFF`。

[链接到 ideone](http://ideone.com/5GCSs)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T19:11:59.920

If `byte` is a `uint8_t` (thanks Mr. Fernandes!), the result of `(value << 3)` is wider than a `byte`. More precisely, `value` is promoted to a wider type before the shift occurs, and the result is that wider type. To get the behavior of Code 1, you can change Code 2 to do this:

```
result = (static_cast<byte>(value << 3) >> 2); 
```

This mimics the intermediate assignment to `buffer` in Code 1 with a cast.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T19:15:44.323

我假设你`byte`是一些小于的无符号整数类型`int`。

C++ 中的大多数算术运算都是在`int`type 域中执行的，毕竟“较小的”操作数被隐式转换（*提升*）为 type `int`。

因此，您的第一组班次相当于

```
buffer = (byte) ((int) value << 3);
result = (byte) ((int) buffer >> 2); 
```

而你的第二组 if shifts 相当于

```
result = (byte) (((int) value << 3) >> 2); 
```

`byte`在第一个变体中，任何因移位而超出类型范围的位`<< 3`在中间转换和分配给`buffer`. 在第二个变体中，所有计算都在 的范围内执行`int`，因此不会丢失任何内容。

如果您希望第二个变体产生与第一个变体相同的结果，则需要显式“截断”中间移位结果

```
result = ((byte) (value << 3) >> 2); 
```

# installation - 如何在 NSIS 中访问 InstallDirRegKey

> ID：11656796
> 
> 赞同：1
> 
> 时间：2012-07-25T19:06:01.493
> 
> 标签：installation, nsis

我可以像这样在 NSIS 中指定安装目录和注册表值：

```
InstallDir "$PROGRAMFILES\CTVI"
InstallDirRegKey HKLM "Software\CTVI" "Install_Dir" 
```

现在我可以通过在整个脚本中`InstallDir`使用符号来访问。**我如何类似地访问****？**是否有类似的符号存在？我试过了，但事实并非如此。现在我所做的是每次需要时都输入。但这不是那么干燥:)`$INSTDIR`**`InstallDirRegKey`**`InstallDir``$INSTDIRREGKEY``HKLM "Software\CTVI" "Install_Dir"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:27:45.733

当使用该`InstallDirRegKey`属性时，NSIS 将在启动时查找指定的注册表项，如果它在那里找到一个路径，它将在`$Instdir`您的任何代码运行之前将该值放入...

# javascript - 读取 URL 参数时代码未获得预期值

> ID：11656798
> 
> 赞同：1
> 
> 时间：2012-07-25T19:06:08.747
> 
> 标签：javascript, url, parameters

我一直在为此绞尽脑汁，但我不知道为什么这不起作用。

我有一个看起来像这样的链接：

```
http://exampledomain.com/page.html?var1=42&var2=hello 
```

并且 page.html 正在调用一个 javascript 页面，上面写着：

```
alert(var1);
alert(var2); 
```

但是当我测试页面时，我得到的只是`function Number() { [native code] }`

有人知道我可能会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:15:36.463

使用这个功能：

```
var GET = function(query){
    var varsArray = [],
    url = window.location.search.match(/[^\?\&]+/g),
    vars = [];
    for(var i=0;i<url.length;i++)
        if(/\=/.test(url[i]))
            vars.push(url[i]);
    for(var i=0;i<url.length;i++){
        var This = url[i].split('=');
        varsArray[This[0]] = This[1];
    }
    return query ? varsArray[query] : (varsArray || '');
} 
```

# android - XML 中的布局问题

> ID：11656804
> 
> 赞同：0
> 
> 时间：2012-07-25T19:06:39.947
> 
> 标签：android, xml, layout

我试图按照教程 om 如何在 android 中创建 Viewflipper。一切似乎都有效，唯一的就是我想要不同的布局。目前它包含 3 个按钮和一个 webview，3 个按钮位于顶部，webview 位于下方。我希望按钮位于底部，webview 位于上方。请帮助有需要的初学者！

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<HorizontalScrollView
 android:id="@+id/main_horizontal_container"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content" >

<RelativeLayout
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" >

        <Button
            android:id="@+id/main_access_profile"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Profile"
            android:textSize="25dp" />

        <TextView
            android:id="@+id/main_blank_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/main_access_profile"
            android:text=""
            android:textSize="25dp" />

        <Button
            android:id="@+id/main_access_portfolio"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/main_blank_1"
            android:text="Portfolio"
            android:textSize="25dp" />

        <TextView
            android:id="@+id/main_blank_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/main_access_portfolio"
            android:text=""
            android:textSize="25dp" />

        <Button
            android:id="@+id/main_access_history"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/main_blank_2"
            android:text="History"
            android:textSize="25dp" />
    </RelativeLayout>
</HorizontalScrollView>

<ViewFlipper
    android:id="@+id/main_flipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/main_horizontal_container" >

    <include
        android:id="@+id/main_test1"
        layout="@layout/test1" />

    <include
        android:id="@+id/main_test2"
        layout="@layout/test2" />

    <include
        android:id="@+id/main_test3"
        layout="@layout/test3" />
</ViewFlipper>

</RelativeLayout> 
```

这是包含 WebView 的 test1.xml 文件！

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/test1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="421dp" />

</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:18:44.830

由于示例使用的是 RelativeLayout，因此您必须更改定义定位的属性。在您的文件中，它将是该行

```
android:layout_below="@id/main_horizontal_container" 
```

在 ViewFlipper 中。

改变

```
android:layout_below 
```

至

```
android:layout_above 
```

# java - 如何在绝对布局中调整 SWT 控件的大小

> ID：11656809
> 
> 赞同：1
> 
> 时间：2012-07-25T19:06:50.677
> 
> 标签：java, swt, css-position

我在绝对布局中使用 SWT 组件，如下所示：

```
Label l = new Label(shell, SWT.NONE);
l.setText("my lable");
l.setLocation(30, 30);
l.setSize(200, 30);  // doesn't work 
```

如图所示，使用绝对布局时，我无法调整 SWT 组件的大小！

# grails - 在 Groovy 中使用闭包指定默认参数值

> ID：11656815
> 
> 赞同：2
> 
> 时间：2012-07-25T19:07:06.020
> 
> 标签：grails, groovy, parameters, closures

让我们考虑下一个函数：

```
def generateUniqueIdent(String text, uniqueSuffix = {uid -> String.valueOf(uid)}) {
   doSomething(text) + uniqueSuffix()
} 
```

现在，当我尝试下一个修改时：

```
def generateUniqueIdent(String text, uniqueSuffix = { hash(text) }) {
   doSomething(text) + uniqueSuffix()
} 
```

..我得到了下一个错误：

> | Error 编译 org.apache.tools.ant.BuildException 期间出现致命错误：BUG！源单元“此处的某些路径”中的“类生成”阶段中的异常尝试获取名称为**text**作为堆栈变量的变量，但未创建具有此名称的变量（使用 --stacktrace 查看完整跟踪）

同时，如果我尝试使用名称`text`作为闭包的参数：

```
def generateUniqueIdent(String text, uniqueSuffix = {text -> hash(text) }) {
   doSomething(text) + uniqueSuffix(text)
} 
```

..然后我得到另一个错误：

> 当前作用域已经包含一个名称为**text的变量**

问题是：我能否以某种方式从闭包中访问其他参数，该闭包作为默认值分配给函数参数之一？

如果不是，那么，为什么我不能在所描述的闭包中使用与函数参数之一相同的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:39:16.753

您可以使用默认`it`参数：

```
def generateUniqueIdent(String text, uniqueSuffix = { hash(it) }) {
   doSomething(text) + uniqueSuffix(text)
} 
```

（[工作示例](http://ideone.com/cuNTC)）

或者为闭包参数使用不同的名称，而不是`text`：

```
def generateUniqueIdent(String text, uniqueSuffix = { x -> hash(x) }) {
   doSomething(text) + uniqueSuffix(text)
} 
```

（[示例](http://ideone.com/8SVxZ)）

不幸的是，在这种情况下，从闭包[中](http://ideone.com/0fn17)访问前一个参数对我有用，所以我不知道最初的问题是什么：S

# c# - 如何将字节数组转换为字符串数组？

> ID：11656822
> 
> 赞同：3
> 
> 时间：2012-07-25T19:07:25.783
> 
> 标签：c#, clipboard

只是为了先澄清一些事情。我**不想**将字节数组转换为单个字符串。我正在尝试将字节数组转换为字符串数组。

我正在使用`GetClipboardData`API 从剪贴板中获取一些数据，然后将内存中的数据作为字节数组复制。当您复制多个文件（因此是`CF_HDROP`剪贴板格式）时，我想将此字节数组转换为所复制文件的字符串数组。

到目前为止，这是我的代码。

```
//Get pointer to clipboard data in the selected format
var clipboardDataPointer = GetClipboardData(format);

//Do a bunch of crap necessary to copy the data from the memory
//the above pointer points at to a place we can access it.
var length = GlobalSize(clipboardDataPointer);
var @lock = GlobalLock(clipboardDataPointer);

//Init a buffer which will contain the clipboard data
var buffer = new byte[(int)length];

//Copy clipboard data to buffer
Marshal.Copy(@lock, buffer, 0, (int)length);

GlobalUnlock(clipboardDataPointer);

snapshot.InsertData(format, buffer); 
```

现在，这是我之后读取缓冲区数据的代码。

```
var formatter = new BinaryFormatter();
using (var serializedData = new MemoryStream(buffer))
{
    paths = (string[]) formatter.Deserialize(serializedData);
} 
```

这不起作用，它会崩溃，并出现异常，指出流不包含二进制标头。我想这是因为它不知道要反序列化为哪种类型。

我已经尝试过查看`Marshal`课程。似乎没有任何相关性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:33:54.093

如果数据来自 Win32 API，那么字符串数组将只是一个以空字符结尾的字符串序列，最后带有一个双空字符终止符。（请注意，字符串将是 UTF-16，因此每个字符*两个*字节）。您基本上需要一次将一个字符串拉出到一个数组中。

您在这里寻找的方法是[`Marshal.PtrToStringUni`](http://msdn.microsoft.com/en-us/library/dyf0tzy4.aspx)，您应该使用它而不是`Marshal.Copy`因为它适用于`IntPtr`. 它将从您的字符串中提取一个字符串，直到第一个空字符，`IntPtr`并将其复制到一个字符串中。

这个想法是不断提取单个字符串，然后将`IntPtr`过去的空字节推进到下一个字符串的开头，直到缓冲区用完。我没有*对此*进行测试，它可能会得到改进（特别是我认为有一种更智能的方法来检测缓冲区的结尾），但基本思想是：

```
var myptr = GetClipboardData(format);
var length = GlobalSize(myptr);

var result = new List<string>();

var pos = 0;
while ( pos < length )
{
    var str = Marshal.PtrToStringUni(myptr);
    var count = Encoding.Unicode.GetByteCount(str);

    myptr = IntPtr.Add(myptr, count + 1);
    pos += count + 1;

    result.Add(str);
}

return result.ToArray(); 
```

（顺便说一句：您的反序列化不起作用的原因是因为序列化 a`string[]`不只是将字符写为字节；它写出*字符串数组的结构*，包括 .NET 使用的其他内部位，如长度，和带有类型信息的二进制标头。您从剪贴板返回的内容不存在，因此无法反序列化。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:55:52.100

这个怎么样：

```
var strings = Encoding.Unicode
    .GetString(buffer)
    .Split(new[] { '\0' }, StringSplitOptions.RemoveEmptyEntries); 
```

# flash - Flex：在高级数据网格中扩展一级

> ID：11656828
> 
> 赞同：0
> 
> 时间：2012-07-25T19:07:51.897
> 
> 标签：flash, apache-flex, actionscript, flex4

我在 flex 中使用 AdvancedDataGrid，结构如下：

```
 - A
  - AA
     - AAA
     - AAB
  - AB
     - ABA
     - ABB
 - B
  - BA
     - BAA
     - BAB
  - BB
     - BBA
     - BBB 
```

我想在 actionscript 中实现一个函数，它只扩展树的一层。

例如：当我在以下状态调用函数时，

```
 + A
 + B 
```

我会得到这个：

```
 - A
  + AA
  + AB
 - B
  + BA
  + BB 
```

当我再次调用它时，我会看到整棵树。

我尝试使用 AdvancedDatagrid 的 expandItem() 方法，但我不知道如何列出节点。有人可以给我写一个示例代码吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:29:26.953

假设您的数据已经是分层的，您可以简单地通过 dataProvider 进行迭代并在每个上调用 expandItem。

```
private function onClick(event:MouseEvent):void
{
    for each(var o:Object in grid.dataProvider)
    {
        grid.expandItem(o);
    }
} 
```

# php - 使用 jquery 向自己发布数据

> ID：11656831
> 
> 赞同：10
> 
> 时间：2012-07-25T19:08:01.223
> 
> 标签：php

我正在尝试向自己发布一些表单数据但没有成功。我的代码如下

```
<html>
    <title>Post to self</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">

    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.x-button').live("click", function () {
                $.ajax({
                    type: "POST",
                    url: "self.php",
                    data: $(".aj").serialize(),
                    success: function (data) {
                        alert("Data Loaded:");
                    }
                });
            });
        });
    </script>
    </head>

    <body>

               <?php
              if(isset($_POST['submit']))
              {
             echo $_POST['firstname'];
              }
              ?>
            <form name="input" action="" class="aj" method="post">
                <article>
                    <label>Firstname</label>
                    <input type="text" name="firstname" value="Ed" class="x-input"
                    />
                </article>
                <article>
                    <label>Lastname</label>
                    <input type="text" name="lastname" value="Doe" class="x-input"
                    />
                </article>
                <article>
                    <label>City</label>
                    <input type="text" name="city" value="London" class="x-input"
                    />
                </article>
                <input type="submit" value="Update Options" class="x-button" />
            </form>
    </body>

</html> 
```

在纯 php 和 html 中使用`<form name="test" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">`时，它可以工作，但我无法让它与 jquery 一起使用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T19:16:27.023

你完全混合了两种方法。

```
<form id="myform" action="" >
  .....
</form> 
```

要将 ajax 请求发送到同一页面，您可以将 url 参数保留为空/删除

尝试

```
 <script type="text/javascript">
    $(document).ready(function () {
       $('.x-button').live("click", function () {
           $.post({
                  data: $('form#myform').serialize(),
                  success: function (data) {
                     alert("Data Loaded:");
                  }
              });
          });
        });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T19:23:29.030

当然，您不想将整个页面包含到响应文本中，因此如果请求 ajax，则需要声明

```
 <?php
/* AJAX check  */
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {

  if(isset($_POST))
  {
        print_r($_POST);
  }

}else{
?>   
<html>
    <title>Post to self</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">

    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.x-button').live("click", function () {
                $.ajax({
                    type: "POST",
                    url: "self.php",
                    data: $(".aj").serialize(),
                    success: function (data) {
                        alert("Data Loaded:");
                    }
                });
            });
        });
    </script>
    </head>

    <body>
       <form name="input" action="" class="aj" method="post">
                <article>
                    <label>Firstname</label>
                    <input type="text" name="firstname" value="Ed" class="x-input"
                    />
                </article>
                <article>
                    <label>Lastname</label>
                    <input type="text" name="lastname" value="Doe" class="x-input"
                    />
                </article>
                <article>
                    <label>City</label>
                    <input type="text" name="city" value="London" class="x-input"
                    />
                </article>
                <input type="submit" value="Update Options" class="x-button" />
            </form>
    </body>

</html>
<?php }?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T19:12:13.297

在 inline javascript 函数的末尾添加`return false;`以避免表单以“正常”方式提交

# android - 由于缺少 Bitmap.h，Android NDK 不会构建库？

> ID：11656833
> 
> 赞同：1
> 
> 时间：2012-07-25T19:08:15.593
> 
> 标签：android, android-ndk

我正在使用 Android NDK 来构建一个库。我一切正常，但后来我需要更改库中引用的包名称。进行更改后，我尝试通过在其文件夹中调用 ndk-build 再次构建库，但这是我得到的唯一输出，它似乎没有完全构建：

```
C:\my-app\jni>ndk-build -B
"Compile++ thumb : filters <= filters.cpp
C:/a-fa-outsidelands//jni/filters.cpp:4:28: fatal error: android/bitmap.h: No such file     or directory
compilation terminated. 
```

当我尝试运行应用程序时，这会导致不满意的链接错误。我将发布我的 .mk 文件，但我认为这并不重要，因为我以前的库正在使用这个 .mk 文件。我正在进行重建（-B 参数），因为它是在以前的构建之上。有什么建议么？这是我的 .mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := filters
LOCAL_SRC_FILES := filters.cpp
LOCAL_LDLIBS    := -lm -llog -ljnigraphics

include $(BUILD_SHARED_LIBRARY) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:13:34.403

`android:targetSdkVersion`应用程序清单中的内容是什么？IIRC，`bitmap.h`直到 SDK v8 才引入。

编辑：最后一次成功构建是在同一台机器上，使用相同的 NDK 版本吗？#include 行是否使用`<android/bitmap.h>`而不是`"android/bitmap.h"`?

EDIT2： targetSdkVersion 自上次构建以来是否发生了变化？我发现了一件有趣的事情：没有`android-10`under `android-ndk-xx\platforms`。尝试在下面创建一个空白`android-10`文件夹`android-ndk-xx\platforms`并复制其中的内容`android-9`。老实说，我不确定还要检查什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T02:33:20.547

我遇到了同样的问题。然后我找到了这个答案。 [未找到用于本机代码编译的 Android bitmap.h](https://stackoverflow.com/questions/11661708/android-bitmap-h-is-not-found-for-native-code-compile)

刚跑：

```
ndk-build APP_PLATFORM=android-8 
```

# java - 扩展抽象构造函数？

> ID：11656836
> 
> 赞同：2
> 
> 时间：2012-07-25T19:08:29.907
> 
> 标签：java, constructor, abstract

所以我在一些我正在使用的代码中遇到了一些障碍。基本上我有以下三个代码花絮：

抽象类：

```
public abstract class TestParent {
    int size;

    public TestParent(int i){
        size = i;
    }

} 
```

儿童班：

```
 public class TestChild extends TestParent{
     public void mult(){
         System.out.println(this.size * 5);
     }

 } 
```

执行：

```
public class TestTest {

   public static void main(String args[]) {
       TestChild Test = new TestChild(2);
       Test.mult();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:18:12.207

考虑以下抽象类和扩展实现的情况。 [https://stackoverflow.com/a/260755/1071979](https://stackoverflow.com/a/260755/1071979)

```
abstract class Product { 
    int multiplyBy;
    public Product( int multiplyBy ) {
        this.multiplyBy = multiplyBy;
    }

    public int mutiply(int val) {
       return muliplyBy * val;
    }
}

class TimesTwo extends Product {
    public TimesTwo() {
        super(2);
    }
}

class TimesWhat extends Product {
    public TimesWhat(int what) {
        super(what);
    }
} 
```

超类 Product 是抽象的并且有一个构造函数。具体类 TimesTwo 有一个默认构造函数，它只是硬编码值 2。具体类 TimesWhat 有一个允许调用者指定值的构造函数。

注意：由于父抽象类中没有默认（或无参数）构造函数，因此必须指定子类中使用的构造函数。

抽象构造函数将经常用于强制类约束或不变量，例如设置类所需的最小字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:11:04.327

When you have explicit constructor defined in super class and no constructor without arguments defined, your child class should explicitly call the super class constructor.

```
public class TestChild extends TestParent{
        TestChild ()
        {
            super(5);
        }
    } 
```

or, if you don't want call super class constructor with parameters, you need to add constructor with no arguments in super class.

```
public abstract class TestParent {
    int size;
    public TestParent(){

    }
    public TestParent(int i){
        size = i;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:11:23.783

```
public class TestChild extends TestParent{
     public TestChild(int i){
         super(i); // Call to the parent's constructor.
     }
     public void mult(){
         System.out.println(super.size * 5);
     }

 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T19:11:51.473

Use `super` to call parent (`TestParent.TestParent(int)`) constructor:

```
public class TestChild extends TestParent{

    public TestChild(int i) {
        super(i);
    }

    //...

} 
```

or if you want to use some constant:

```
 public TestChild() {
        super(42);
    } 
```

Note that there is no such thing as abstract constructor in Java. Essentially there is only one constructor in `TestParent` which must be called before calling `TestChild` constructor.

Also note that `super()` must always be the first statement.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T19:13:04.343

You code wont compile because your base class does not have a default constructor. Either you need to provide it in base class or you need to provide parameterized constructor in derived class and invoke super.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T19:13:14.577

```
 public class TestChild extends TestParent{
             public TestChild (int i)
             {
               super(i * 2);
             }

} 
```

此代码将使用 i 的双倍。这是一个压倒一切的，虽然我不确定你想问什么。

其他解决方案：

```
 public class TestChild extends TestParent{
             public TestChild (int i)
             {
               super(i);
               this.size = 105;
             }

} 
```

对于此解决方案，大小必须受保护或公开。

# java - 黑莓网络统计

> ID：11656839
> 
> 赞同：0
> 
> 时间：2012-07-25T19:08:50.380
> 
> 标签：java, blackberry

如何获取网络统计信息，例如发送的流量、接收的流量。从我收集到的处理网络的类可以用来确定当前的连接类型并创建一个连接，但没有任何东西可以监控互联网流量。在此先感谢并原谅我的语法，英语不是我的第一语言。

PS 我正在使用带有 Blackberry SDK v5.0.0 的 Eclipse。

# eclipse - 持久性单元定义冲突

> ID：11656848
> 
> 赞同：2
> 
> 时间：2012-07-25T19:09:28.713
> 
> 标签：eclipse, jpa

Spring 3.1.1 Maven 3.0.4 JPA Eclipse wtp indigo

您好，我在服务器启动时收到以下异常。我的项目中只有一个 persistence.xml。有任何想法吗？谢谢埃里克

> 引起：java.lang.IllegalStateException：名称“cassandra_pu”的持久性单元定义冲突：文件：/C:/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/cassandra/WEB -INF/classes/，文件：/C:/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/cassandra/WEB-INF/classes/ at org.springframework.orm.jpa .persistenceunit.DefaultPersistenceUnitManager.preparePersistenceUnitInfos(DefaultPersistenceUnitManager.java:362) at org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager.afterPropertiesSet(DefaultPersistenceUnitManager.java:326) at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java :235) 在 org.springframework.orm.jpa.AbstractEntityManagerFactoryBean。afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452) ... 62 更多

我的上下文文件：

```
<?xml version="1.0" encoding="UTF-8"?>  
<beans xmlns="http://www.springframework.org/schema/beans"  
        xmlns:mvc="http://www.springframework.org/schema/mvc"  
        xmlns:context="http://www.springframework.org/schema/context"  
        xmlns:tx="http://www.springframework.org/schema/tx"  
        xmlns:p="http://www.springframework.org/schema/p"  
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
        xsi:schemaLocation="http://www.springframework.org/schema/beans  
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  
        http://www.springframework.org/schema/context  
        http://www.springframework.org/schema/context/spring-context-3.0.xsd  
        http://www.springframework.org/schema/mvc  
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd  
        http://www.springframework.org/schema/tx   
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">  

    <context:component-scan base-package="hamacher.cassandra.controller" />  
    <context:component-scan base-package="hamacher.cassandra.dao" />  
    <context:component-scan base-package="hamacher.cassandra.service" />  
    <context:annotation-config />  

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">  
        <property name="prefix" value="/WEB-INF/jsp/"/>  
        <property name="suffix" value=".jsp"/>  
    </bean>  

  <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">    
    <property name="packagesToScan" value="hamacher.cassandra.entity"/>   
      <property name="persistenceUnitName" value="cassandra_pu"/>  
  </bean>    

    <tx:annotation-driven />  
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">  
        <property name="entityManagerFactory" ref="entityManagerFactory" />  
</bean>  

</beans> 
```

我的 persistence.xml 文件位于 META-INF 中它应该在的位置：

```
 <persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence  
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"  
        version="2.0">  
        <persistence-unit name="cassandra_pu">  
            <provider>com.impetus.kundera.KunderaPersistence</provider>       
            <properties>            
                <property name="kundera.nodes" value="localhost"/>  
                <property name="kundera.port" value="9160"/>  
                <property name="kundera.keyspace" value="KunderaExamples"/>  
                <property name="kundera.dialect" value="cassandra"/>  
                <property name="kundera.client.lookup.class" value="com.impetus.client.cassandra.pelops.PelopsClientFactory" />  
                <property name="kundera.cache.provider.class" value="com.impetus.kundera.cache.ehcache.EhCacheProvider"/>  
                <property name="kundera.cache.config.resource" value="/ehcache-test.xml"/>                  
            </properties>       
        </persistence-unit>  
    </persistence> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:49:52.047

尝试添加，

```
<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="emf-p"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <!-- <property name="persistenceXmlLocation" value="/WEB-INF/classes/META-INF/persistence.xml" /> -->
            <property name="persistenceUnitManager" ref="pum"/>
        <property name="persistenceUnitName" value="personnel_cass_pu" />
    <property name="loadTimeWeaver">
        <bean
            class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>
</bean> 
```

使用 Spring bean 定义您的 persistence.xml 位置。

也可以参考： [https ://github.com/xamry/twitampl/blob/master/src/main/resources/appContext.xml](https://github.com/xamry/twitample/blob/master/src/main/resources/appContext.xml)

具体`persistence.xml`配置。

# java - Android scrollview scrolls more than needed

> ID：11656852
> 
> 赞同：0
> 
> 时间：2012-07-25T19:09:58.817
> 
> 标签：java, android, view, scrollview

I added scrollview to a relative layout, but it scrolls more than I needed. If I remove the scrollview, it will not show the last two buttonImages. So I added srollview.

![enter image description here](../Images/28961868d23c3276cc226359f6b5cd67.png)

![enter image description here](../Images/489907901ecdcd260c8d2057ec7c650b.png)

Here is the code.

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true" >  

<RelativeLayout
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background_image"
android:orientation="vertical">

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="58dp"
    android:src="@drawable/logo" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/imageView1"
    android:layout_marginTop="92dp"
    android:background="@drawable/button_layout"
    android:gravity="left|center_vertical"
    android:paddingLeft="25dp"
    android:text="Team Bio"
    android:textColor="#F8F8FF"
    android:textSize="30dp" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button1"
    android:layout_marginTop="15dp"
    android:background="@drawable/button_layout"
    android:gravity="left|center_vertical"
    android:paddingLeft="25dp"
    android:text="Contact Us"
    android:textColor="#F8F8FF"
    android:textSize="30dp" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button2"
    android:layout_marginTop="14dp"
    android:background="@drawable/button_layout"
    android:gravity="left|center_vertical"
    android:paddingLeft="25dp"
    android:text="Facebook"
    android:textColor="#F8F8FF"
    android:textSize="30dp" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button3"
    android:layout_marginTop="14dp"
    android:background="@drawable/button_layout"
    android:gravity="left|center_vertical"
    android:paddingLeft="25dp"
    android:text="Twitter"
    android:textColor="#F8F8FF"
    android:textSize="30dp" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button4"
    android:layout_marginTop="14dp"
    android:background="@drawable/button_layout"
    android:gravity="left|center_vertical"
    android:paddingLeft="25dp"
    android:text="Youtube"
    android:textColor="#F8F8FF"
    android:textSize="30dp" />
</RelativeLayout>
</ScrollView> 
```

I tried changing lots of things, but I can't make it work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:24:29.373

会使用`LinearLayout`帮助吗？我不确定你需要一个`RelativeLayout`里面`ScrollView`只有那些按钮。

像这样的东西（额外的属性，ID等需要添加）......

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:background="@drawable/background_image"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <!-- Add buttons here... -->   

    </LinearLayout>
</ScrollView> 
```

如果需要，它将滚动，否则不会滚动。

# c# - 从两个相关模型类获取数据的问题

> ID：11656855
> 
> 赞同：1
> 
> 时间：2012-07-25T19:10:10.720
> 
> 标签：c#, entity-framework, entity-framework-4.1

我有桌子：

```
Items{ItemId, Title, CreatedBy, CreatedOnDate}
Likes{ItemId, UserId, CreatedOnDate} 
```

在 ef 我有这两个模型：

```
[Table("Likes")]
    public class Like
    {
        [Key, Column(Order = 1)]
        public int ItemId { get; set; }
        [Key, Column(Order = 2)]
        public Guid UserId{ get; set; }
        public DateTime CreatedOnDate { get; set; }

        public virtual Item Item { get; set; }
        public virtual User User { get; set; }
    }
[Table("Items")]
public class Item
    {
        [Key]
        public int ItemId { get; set; }
        public virtual ICollection<Like> Likes { get; set; }
    } 
```

现在我有一个问题来获取用户喜欢的**项目列表。**我尝试了以下方法：

```
model = (from l in con.Likes
                       select new Item
                                  {
                                      UserId = l.Item.UserId,
                                      Title = l.Item.Title,                                      
                                      Likes = l.Item.Likes,
                                      User = l.Items.User,                                      
                                      CreatedOnDate = l.Ticket.CreatedOnDate,
                                      ItemId = l.Ticket.ItemId
                                  }).ToList(); 
```

我试过有和没有`ToList()`. 我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:15:28.327

> ...获取用户喜欢的项目列表...

读到这里，我建议：

```
var query = from l in con.Likes
            where l.User.UserId == givenUserId
            select l.Item;
var result = query.ToList(); 
```

但这与您自己的查询相去甚远，以至于我感觉您想要别的东西。

# facebook-graph-api - Publishing Actions: link back to website from user wall

> ID：11656856
> 
> 赞同：0
> 
> 时间：2012-07-25T19:10:23.767
> 
> 标签：facebook-graph-api, post, publish

I am building a website that will require the user to provide permission for us to post a story back to the users wall when the user takes an action on my website. I would like the story to include a link back to my website so that friends can see the actions taken.

I am not sure of the correct permissions because I cannot get a link back to my website from the story post. I saw publish_stream, but that appears to be old now. Any pointers to FB policy and documentation would be appreciated. I

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:58:29.133

您应该使用 Open Graph 操作，而不是发布流式帖子，这将为您提供更好的结果，并减少用户对“垃圾邮件”的感觉。我无法发布可以为您执行此操作的代码，因为它需要适合您现有的设置，但这是一个相对简单的过程，有据可查（https://developers.facebook.com/docs/opengraph/行动/）：

1.  通过提示用户授予`publish_actions`权限以及您的应用可能需要的任何其他权限来对用户进行身份验证。
2.  将用户访问令牌存储在您的数据库中（如果您使用的是客户端 Javascript SDK，则不需要，但您可能仍想这样做）
3.  [在Developer Dashboard](https://developers.facebook.com/apps)中设置您的 Open Graph 操作和对象。
4.  当用户在您的应用中执行相关操作时，对以下端点进行简单的 Graph API 调用： `https://graph.facebook.com/me/YOUR_APP_NAMESPACE:YOUR_ACTION? YOUR_OBJECT_TYPE=YOUR_OBJECT_URL&access_token=YOUR_ACCESS_TOKEN`
5.  完毕。

您可以向操作添加额外的元素，例如[操作链接](https://developers.facebook.com/docs/opengraph/actionlinks/)，但是上面概述了基础知识。执行完这些步骤后，用户将在他们的时间轴上看到如下内容：

![https://developers.facebook.com/attachment/action_links_example_friendreact.png/](../Images/20c9a48c071811d1b47b3b049cdea1a8.png)

“on NYCCookbook”部分是可定制的，点击这个故事的大部分部分将使 Facebook 用户回到您的网站。[如果您正确实施这一切，](https://developers.facebook.com/docs/bestpractices/grow-app-open-graph/)您可以获得许多好处。

# javascript - 在我的页面上包含 jquery 库有什么缺点吗？

> ID：11656857
> 
> 赞同：5
> 
> 时间：2012-07-25T19:10:25.480
> 
> 标签：javascript, jquery

我已经使用 javascript 一段时间了，最​​近开始使用 jquery，我承认我很喜欢。 `<script type='text/javascript' src='../locationOfJquery/jquery.js'></script>` 允许在该页面上的脚本标签中使用库。我想知道的是，即使页面上没有 jquery 代码，仅包含脚本标签是否会减慢页面加载时间，以及使用 jquery 是否还有其他主要缺点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:13:35.840

*   将脚本标签放在页面底部。这不会在 onload 事件触发之前减慢 DOM 的处理速度。
*   使用缩小版的 jQuery，它与小图像/图标一样小。
*   如果访问者访问您网站中的多个页面，通常也会在他们第一次访问后被缓存。如果您使用内容交付网络（例如 Google 的），它也可能已经被预缓存（或从更本地的服务器提供）。良好的第一印象至关重要。

要进一步回答您的小问题：

*   如果页面上没有 jQuery 代码，仍然必须解析 jQuery。您可以使用 Chrome 之类的分析工具查看计算机解析 jQuery 需要多长时间。
*   有一些框架可以在每页的基础上优化你的 javascript，但这些框架必须权衡缓存脚本的能力与更快解析的收益。你几乎肯定不应该担心它们。与其他框架相比，jQuery 非常轻量级。

* * *

**数字：**

例如在 Chrome 上加载 Stackoverflow 网站时，从 Google CDN 请求 jQuery 库，结果是：

*   0.027ms 下载 jQuery 的总时间（可能是缓存的）
*   评估 jQuery 和执行任何默认 DOM/CSS 操作所花费的总时间为 35.992 毫秒

这当然都是相对的。我敢打赌，当您加载此页面时，您不会注意到任何延迟，因为整个页面加载大约需要 630 毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:21:37.707

客户端必须下载 jQuery 脚本（非常小）。要进一步优化，您可以只使用来自[Google](https://developers.google.com/speed/libraries/devguide?hl=pt-BR#jquery)或[Microsoft的托管“](http://www.asp.net/ajaxlibrary/cdn.ashx)[内容交付网络](http://en.wikipedia.org/wiki/Content_delivery_network)”版本。还记得使用下载速度更快的缩小版。

[这篇文章](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)说明了原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:16:18.663

如果您不使用它，则不应包含它。

32k 是一个很小的代价，但最好没有请求和 0k 额外下载。

此外，更重要的是，如果您使用任何框架，您可能会遇到与其他框架的冲突。

# c# - C# 中的 ASP.NET 会话

> ID：11656860
> 
> 赞同：0
> 
> 时间：2012-07-25T19:10:42.433
> 
> 标签：c#, asp.net, session, syntax

我的目标是正确分配会话并检索存储在该会话中的值。

当用户来到我的第一个页面，一个 Default.aspx 页面时，我在后面的代码中设置了会话。

HttpContext.Current.Session["permissions"] = "Super";

但是，我无法在另一个文件的数据访问类中访问此部分。我做错了什么，或者有人知道从 C# 类访问已设置会话的正确方法吗？

我尝试使用相同的语法访问会话： String permission = HttpContext.Current.Session["permissions"].ToString();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:17:39.983

我很确定，你总是可以覆盖这种情况。您正在尝试做的事情不被认为是一个好的设计主体。

您可以做的是通过在该类上填充自定义属性将 CurrentUser 和/或他/她的角色传递给数据类。在该类中，您可以使用此属性的值来处理用户的角色。

让我知道，如果这对你有帮助。

对于代码示例，您可以随时查看这个 SO question

[如何从 ASP.NET 中的任何类访问会话变量？](https://stackoverflow.com/questions/621549/how-to-access-session-variables-from-any-class-in-asp-net)

# java - ActionListener(Java) 的问题

> ID：11656864
> 
> 赞同：0
> 
> 时间：2012-07-25T18:33:11.470
> 
> 标签：java, swing

> **可能重复：**
> [ActionListener (Java) 的问题](https://stackoverflow.com/questions/11656709/issues-with-actionlistener-java)

我正在尝试在 JFrame 中的两个按钮上实现动作侦听器，但问题是两个按钮之一正在执行这两个功能；但我还没有配置它这样做。

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class MyChangingCirlce implements ActionListener {
    JButton colorButton, labelButton;
    JLabel myLabel;
    MyDrawPanel mdp;
    JFrame frame;

    public static void main(String[] args) {
        MyChangingCirlce mcc = new MyChangingCirlce();
        mcc.createFrame();
    } // end of main

    public void createFrame() {
        frame = new JFrame();
         colorButton = new JButton("Changing Colors");
         labelButton = new JButton("Change Label");
        myLabel = new JLabel("I'm a label");
        mdp = new MyDrawPanel();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.getContentPane().add(BorderLayout.CENTER, mdp);
        frame.getContentPane().add(BorderLayout.SOUTH, colorButton);
        frame.getContentPane().add(BorderLayout.EAST, labelButton);
        frame.getContentPane().add(BorderLayout.WEST, myLabel);
        colorButton.addActionListener(this);
        labelButton.addActionListener(this);
        frame.setSize(300, 300);
        frame.setVisible(true);

    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == colorButton) {
            frame.repaint();
        } else {
            myLabel.setText("That's it");
        }

    }

} 
```

我的 labelButton 只执行了 1 次操作；即它会随着标签文本改变圆圈的颜色。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MyDrawPanel extends JPanel{

    public void paintComponent(Graphics g)
    {
        int red = (int) (Math.random() * 255);
        int green = (int) (Math.random() * 255);
        int blue= (int) (Math.random() * 255);
        Color randomColor = new Color(red,green,blue);
        g.setColor(randomColor);
        g.fillOval(20,70,100,100);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:20:34.087

您覆盖 colorButton 和 labelButton。所以'else'总是在起作用。更改标签将导致重绘。

改变

```
 JButton colorButton = new JButton("Changing Colors");
    JButton labelButton = new JButton("Change Label"); 
```

到

```
 colorButton = new JButton("Changing Colors");
    labelButton = new JButton("Change Label"); 
```

在给自己写了一个类来测试它之后，我想到了这个：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.util.Date;

public class Foo implements ActionListener {

    JButton colorButton, labelButton;
    JLabel myLabel;
    JFrame frame;
    MyDrawPanel mdp;

    public static void main(String[] args) {
        Foo mcc = new Foo();
        mcc.createFrame();
    } //end of main

    public void createFrame() {
        frame = new JFrame();
        colorButton = new JButton("Changing Colors");
        labelButton = new JButton("Change Label");
        myLabel = new JLabel("I'm a label");
        mdp = new MyDrawPanel();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JSplitPane jsp = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
        mdp.setPreferredSize(new Dimension(150, 150));
        jsp.setLeftComponent(mdp);
        frame.setBounds(10, 10, 600, 600);
        JPanel right = new JPanel();
        right.add(BorderLayout.SOUTH, colorButton);
        right.add(BorderLayout.EAST, labelButton);
        right.add(BorderLayout.WEST, myLabel);
        jsp.setRightComponent(right);
        frame.getContentPane().add(jsp);
        colorButton.addActionListener(this);
        labelButton.addActionListener(this);
        frame.setVisible(true);

    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == colorButton) {
            myLabel.setText("Color button's it");
            frame.repaint();
        } else {
            myLabel.setText("That's it" + new Date().toString());
        }

    }

    public class MyDrawPanel extends JPanel {

        @Override
        public void paintComponent(Graphics g) {
            int red = (int) (Math.random() * 255);
            int green = (int) (Math.random() * 255);
            int blue = (int) (Math.random() * 255);
            Color randomColor = new Color(red, green, blue);
            g.setColor(randomColor);
            g.fillOval(20, 70, 100, 100);
        }
    }
} 
```

# ssis - 使用 SSIS 包创建 NService 总线票证

> ID：11656865
> 
> 赞同：1
> 
> 时间：2012-07-25T19:10:57.213
> 
> 标签：ssis, nservicebus

有没有办法在 SSIS 包中创建 NService Bus 票证。

我是使用 SSIS 包（MSSQL 2012）的新手，并且正在考虑使用 SCRIPT TASK 序列化 NServiceBus 票证，并使用消息传递任务将其发送到 MSMQ 队列。

我在思考正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:46:50.710

我们已经在内部完成了这项工作，您只需要确保您获得正确的序列化。您还必须了解消息标签中发送的内容。以下是 v2.5 的工作内容，可能需要针对 3.x 进行修改：

```
 String label = String.Format("<CorrId></CorrId><WinIdName>{0}\\Administrator</WinIdName>", Environment.MachineName);

        Message message = new Message();

        XmlSerializer serializer = new XmlSerializer(typeof(IMyMessage));

        serializer.Serialize(message.BodyStream, command);

        message.Label = label;

        MessageQueue q = new MessageQueue(queueName);

        if (q != null )
        {
            q.Send(message, MessageQueueTransactionType.Single);
        } 
```

# jquery - Issues in parsing JSON file

> ID：11656868
> 
> 赞同：0
> 
> 时间：2012-07-25T19:11:07.197
> 
> 标签：jquery, json

There was an example of reading jsonp request in jquery given in stackoverflow. This below code works fine.

```
$(document).ready(function() {
   var url =  "http://api.twitter.com/1/statuses/user_timeline/codinghorror.json";
   $.getJSON(url + "?callback=?", null, function(tweets) {
    for(i in tweets) {
        tweet = tweets[i];
        $("#tweet-list").append(tweet.text + "<hr />");
    }
   });
}); 
```

I uploaded the json file into a temp webserver with url being [http://cruzer.net76.net/twitter.json](http://cruzer.net76.net/twitter.json)

But my json doesn't seemed to get parsed and the browser shows no errors/warnings.

Any help..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:13:53.750

您的代码按原样工作：http: [//jsfiddle.net/vWRAw/](http://jsfiddle.net/vWRAw/)

但是，从您的 temp-webserver 返回的 json 是 JSON 而不是 JSONP。如果您想以 JSON 格式请求它，请删除`?callback=?`这意味着您的临时网络服务器需要与发出请求的页面位于同一域中。

# jquery - 如何在 jquery 插件中使用方法？

> ID：11656873
> 
> 赞同：0
> 
> 时间：2012-07-25T19:11:29.033
> 
> 标签：jquery

我找到[了这个插件](https://github.com/can3p/iviewer/wiki/Docs-for-0.6)，它有几个方法：`containerToImage`和`imageToContainer`。我该如何利用这些？我试图弄清楚这些实际上做了什么，但我什至不知道如何在页面中调用它们。我在[这里有一个工作小提琴](http://jsfiddle.net/thindery/SsN42/)。

谁能告诉我如何使用这些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:15:35.117

看起来这些方法包含在该插件的 jQueryUI 小部件工厂实例中。您可以通过使用小部件对象的 .data() 将名称作为参数调用来调用方法。查看此页面以获取更多信息：[http](http://www.gmarwaha.com/blog/2011/09/30/jquery-ui-calling-widget-methods-directly/) ://www.gmarwaha.com/blog/2011/09/30/jquery-ui-calling-widget-methods-directly/ 或参考此 StackOverflow 问题：[JQuery - Widget Public Methods](https://stackoverflow.com/questions/2775365/jquery-widget-public-methods)

# button - how can i draw a shape with a button using kineticjs?

> ID：11656874
> 
> 赞同：0
> 
> 时间：2012-07-25T19:11:33.313
> 
> 标签：button, draw, kineticjs

I'm beginning to use canvas and kineticjs. I tried to draw a rect when clicking the button "add text", in the function I declare a `var Text`, add the `var Text` in the layer and then add the layer to the stage, can anybody help me?

```
window.onload = function() {
    var stage = new Kinetic.Stage({
      container: "container",
      width: 578,
      height: 200
    });
    var shapesLayer = new Kinetic.Layer();

document.getElementById("Draw_text").addEventListener("click", function () {
    var Text = new Kinetic.Text({
        x: 100,
        y: 100,
        text: "hi",
        draggable: "true"
    });

    shapesLayer.add(Text);
    stage.add(shapesLayer);
}, false);

<body onmousedown="return false;">
<div id="container"></div>
  <div id="buttons">
      <button id="Draw_text">
      add text
  </button>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T16:53:32.800

你必须改变你的策略。为了做到这一点，您可以使用一个非常简单的技巧。首先绘制您需要的任何形状，然后使用 hide() 和 show() 函数。通过使用这种方法，你可以得到你正在寻找的东西。* 不要在 onclick 函数中声明你的文本。

```
window.onload = function() {
    var stage = new Kinetic.Stage({
      container: "container",
      width: 578,
      height: 200
    });

    var shapesLayer = new Kinetic.Layer();
    var Text = new Kinetic.Text({
        x: 100,
        y: 100,
        text: "hi",
        draggable: "true"
    });

   document.getElementById("Draw_text").addEventListener("click", function () {
   Text.show();
   shapesLayer.draw();
   }, false);

   document.getElementById("Delete_text").addEventListener("click", function () {
   Text.hide();
   shapesLayer.draw();
   }, false);

   shapesLayer.add(Text);
   stage.add(shapesLayer);
   }; 
```

# java - How to use setters and getters to pass data between classes in android

> ID：11656879
> 
> 赞同：0
> 
> 时间：2012-07-25T19:11:39.927
> 
> 标签：java, android, android-activity, surfaceview

I'm writing a program that has two classes, one that extends Activity and another that extends SurfaceView. The activity has an object of the SurfaceView class. I am trying to use setters and getters to send data between these two classes, but every time I try, eclipse says that the methods for setting and getting need to be static. I can't do this because I don't want them to be static.

The Activity class contains the following methods:

```
public float getxTouch(){
return xTouch;
}
public float getyTouch(){
return yTouch;
} 
```

The SufaceView class contains the following code:

```
xpos = ActivityClass.getxTouch();
ypos = ActivityClass.getyTouch(); 
```

How might I fix this without making the methods static?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:59:40.640

您可以使用 Intent 在 Activity 和您的类之间传输变量的引用。

首先，让我们创建一个包含变量的可序列化类：

```
class XYTouch implements Serializable{
  public static final String EXTRA = "com.your.package.XYTOUCH_EXTRA";

  private float xTouch;

  public void setX(String x) {
      this.xTouch = x;
  }

  public String getX() {
      return xTouch;
  }

// do the same for yTouch    
} 
```

然后，在您的活动中`onCreate`，创建一个新的 XYTouch 对象并使用 set 和 get 方法设置其 xTouch 和 yTouch 属性。然后写

```
Intent intent = new Intent(this, OtherClass.class);
intent.putExtra(XYTouch.EXTRA, xytouchobject);
startActivity(intent); 
```

在您想要访问这些变量的其他类 (OtherClass) 中：

```
public void onCreate(Bundle savedInstance){
   // ....
   XYTouch xytouch = (XYTouch) getIntent().getSerializableExtra(XYTouch.EXTRA);
   // ....
} 
```

然后，您可以在类中的任何位置使用 XYTouch 的 get 和 set 方法来引用 xTouch 和 yTouch。

另一种方法是从您自己的扩展 Application 并保留对这些变量的引用的类中检索它。然后，您将使用 Activity 上下文来读取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:19:44.407

将活动类的引用传递给您的表面类。做这样的事情，所以你不必使方法静态。

在您的 SurfaceView 类中：

```
Activity foo;

//some method to set foo:

public void setFoo(Activity foo) {
this.foo = foo;
}

// Then you can simple call your getX() and getY() methods like this:

foo.getX(); and foo.getY(); 
```

从您的活动课程中：

```
yourSurfaceViewInstance.setFoo(this); 
```

# c# - 是否可以从该站点获取流状态？

> ID：11656886
> 
> 赞同：-2
> 
> 时间：2012-07-25T19:12:18.507
> 
> 标签：c#, .net, html-agility-pack

我发现像“在线”这样的唯一部分是在一些javascript代码中，我不知道如何访问它..

这是有问题的[网站](http://cs.twitch.tv/absolutelegends)。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:32:03.833

尝试使用 TwitchTV/JustinTV 的 API，有关它的信息可以在下面的 url 中找到。

[http://apiwiki.justin.tv/mediawiki/index.php/Stream/list](http://apiwiki.justin.tv/mediawiki/index.php/Stream/list)

这是您链接的频道的示例 JSON 结果。

[http://api.justin.tv/api/stream/list.json?channel=absolutelegends](http://api.justin.tv/api/stream/list.json?channel=absolutelegends)

# javascript - 禁用浏览器快捷键

> ID：11656887
> 
> 赞同：4
> 
> 时间：2012-07-25T19:12:21.783
> 
> 标签：javascript, google-chrome, browser, keyboard-shortcuts

从本质上讲，我正在尝试创建一个“信息亭”

我有一个 Web 应用程序，我想成为屏幕上唯一可以访问的东西。我知道 chrome 有一个“kiosk”模式（快捷方式：chrome.exe --kiosk www.url.com）。这负责自动全屏，但禁用很少的快捷方式（可能只有 f11）。

在互联网的帮助下，我写了一些 javascript 来完成*大部分*工作。代码如下：

```
window.onload = function() {
    window.document.body.onkeydown = function() {
        if (event.ctrlKey) {
            event.stopPropagation();
            event.preventDefault();
            try {
                event.keyCode = 0; // this is a hack to capture ctrl+f ctrl+p etc
            }
            catch (event) {

            }
            return false;
        }
        return true; // for keys that weren't shortcuts (e.g. no ctrl) then the event is bubbled
    }
} 
```

这会处理 ctrl+f、ctrl+p 等问题。不幸的是，它不会*禁用*ctrl+t、ctrl+n、f5 等快捷键。

甚至可以禁用这些，还是我在这里追逐彩虹？我不在乎它是否是 javascript、设置等，但我真的很想在*没有*插件的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:15:54.687

您可以通过 javascript 禁用您想要的任何键。你只需要知道他们的关键代码。

# jquery - jQuery动画到具有不同宽度的元素的中心

> ID：11656894
> 
> 赞同：1
> 
> 时间：2012-07-25T19:12:36.007
> 
> 标签：jquery, width, jquery-animate, response, center

我整个早上都在搞这个，我对 jQuery 知之甚少……抱歉。

我有四个菜单项（即图像）将包含在响应式网格中。单击时，我想让一个箭头（在本例中是一个框）移动到单击的列表项图像的中心。

现在，这个 javascript 只是向右移动（我之前有另一个版本向左/向右移动，这就是我想要这个做的）。此外，在这种情况下，该框应始终与单击的圆圈居中对齐……尽管屏幕宽度很大。那是个大问题……我不能使用像素或任何确切的宽度。

在这里查看：http: [//jsfiddle.net/RevConcept/An4TF/1/](http://jsfiddle.net/RevConcept/An4TF/1/)

HTML：

```
<div id="menu-wrap">
    <ul>
        <li>
            <img id="discover" src="http://nillabean.com/images/circle-225.png" />
        </li>
        <li>
            <img id="design" src="http://nillabean.com/images/circle-225.png" />
        </li>
        <li>
            <img id="develop" src="http://nillabean.com/images/circle-225.png" />
        </li>
        <li>
            <img id="deploy" src="http://nillabean.com/images/circle-225.png" />
        </li>
    </ul>
</div>
  <div id="wrap">
    <div class="block"></div>
</div> 
```

CSS：

```
div.block {
    position:absolute;
    background-color:#abc;
    width:90px;
    height:90px;
    margin:5px;
}

#wrap, #menu-wrap {
    width:100%;
    height:100px;
    position:relative;
    border:1px #000 solid;
}

#menu-wrap {
    text-align:center;
    height:235px;
}

ul {
    margin:0px;
    padding:0px;
}

li {
    list-style:none;
    float:left;
    width:25%;
}​ 
```

查询：

```
$("#discover").click(function() {
    $(".block").animate({
        "left": "+=0%"
    }, "slow");
});

$("#design").click(function() {
    $(".block").animate({
        "left": "+=50%"
    }, "slow");
});

$("#develop").click(function() {
    $(".block").animate({
        "left": "+=75%"
    }, "slow");
});

$("#deploy").click(function() {
    $(".block").animate({
        "left": "+=100%"
    }, "slow");
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:30:10.613

您与最初的实现非常接近。我稍微简化了逻辑，为每个导航项添加了一个类。主要思想是您可以使用像素，您只需要它们与您的图像相关。在这里，我正在获取图像位置（以您希望的任何方式指定），并据此计算箭头的位置。然后稍微居中，我们可以找到每张图像的确切中间。

小提琴：http: [//jsfiddle.net/An4TF/10/](http://jsfiddle.net/An4TF/10/)

jQuery：

```
 $(".nav-image").click(function(event){
    var x = $(this).offset().left;

    var img_width = $(this).width();
    var arrow_width = $(".block").width();

    var arrow_x = x + img_width/2 - arrow_width/2;

    $(".block").animate({
        "left": arrow_x
    }, "slow");
  }); 
```

摆弄起始位置：http: [//jsfiddle.net/An4TF/14/](http://jsfiddle.net/An4TF/14/)

您可以更改选择器以确定您希望箭头最初指向的女巫图像。

# c# - 在 C# 中检查集合内的类型

> ID：11656895
> 
> 赞同：2
> 
> 时间：2012-07-25T19:12:38.290
> 
> 标签：c#, .net

我是 C# 的新手，不确定以下内容：我有一个参数定义如下：

```
public Collection<object> InputObject
        {
            get { return inputObject; }
            set { inputObject= value; }
        }
        private Collection<object> inputObject; 
```

如您所见，该对象是对象的集合，因为我期待不同的类型。

稍后我想检查类型时，正确的方法是什么？我试过这个：

```
if (inputObject is Collection<MyDefinedObject>)
{

} 
```

但我得到一个带下划线的警告，即给定的表达式永远不是预期的类型。检查集合中的类型的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:16:26.273

**你有一个对象的集合**

当你写

```
Collection<object> 
```

这意味着您正在定义一个可以包含*任何*对象的集合。

当你这样做时，你可以做类似的事情

```
inputObject.Add(new MyDefinedObject());
inputObject.Add(new StringBuilder())); 
```

你最终会在你的收藏中得到不同的类型。

**检查收藏的特定元素**

如果您想测试该集合中*特定*对象的类型，您可以这样做

```
Type t = inputObject[0].GetType(); 
```

或者

```
if (inputObject[0] is MyDefinedObject) 
```

编码

```
if (inputObject is Collection<MyDefinedObject>) 
```

永远不会是真的，因为你已经定义了

```
private Collection<object> inputObject; 
```

这意味着您将*集合*inputObject 的类型定义为`Collection<object>`

**如果我希望集合中的所有内容都是 MyDefinedObject 怎么办？**

*根据您在问题下方的评论，这就是您真正想要的...*

```
private Collection<MyDefinedObject> inputObject; 
```

**您收到的错误消息**

> 但我收到一个带下划线的警告，指出给定的表达式永远不是预期的类型

那是因为 inputObject 是 type `Collection<object>`，而*绝不是**Collection*类型。这就像说苹果永远不是香蕉一样。

**更好的方法**

如果您正在使用泛型并接收泛型集合，为什么不创建一个泛型函数来处理该集合呢？

```
private void ProcessCollection<T>(Collection<T> inputObject)
{
}

// Somewhere else in your code...

Collection<MyDefinedObject> inputObject = // Initialize this however you do now
ProcessCollection<MyDefinedObject>(inputObject); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:15:28.787

由于您的`Collection<>`contains `object`，该集合（本质上）没有类型。你要么给集合一个实际的类型，要么检查集合中的项目的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:17:12.197

所有对象都继承基类对象，然后您可以使用：

```
if(InputObject[0].GetType()==typeof(string)){
//string is an example and 0 can be replaced with a index
} 
```

知道每个对象是哪种类型

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T19:20:05.307

您将需要检查所有内容。集合被定义为对象

```
foreach (object obj in InputObject)
{
    obj.gettype();     
    if (obj is DocFieldEnumHierTwoSpeedLoader) x= 5;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T19:44:24.857

也许这就是你想要的：

```
 var defined = InputObject.OfType<MyDefinedObject>();
        var other = InputObject.OfType<MyOtherDefinedObject>();

        bool hasDefined = defined.Any();
        bool hasOther = other.Any(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T19:45:22.990

你说 inputObject 属性可以包含集合类型可以不时变化的集合。有两种解决方案：

1) 如果集合元素的类型对于定义属性的类型的给定实例始终相同，则将该类型设为泛型：

```
public class MyClass<T>
{
    public Collection<T> InputObject 
    { 
        get { return inputObject; } 
        set { inputObject= value; } 
    } 
    private Collection<T> inputObject; 
} 
```

如果该属性的*同一实例*可以包含具有不同元素类型的集合，则将该字段声明为`object`，或者更好地声明为非泛型接口类型：

```
public class MyClass
{
    public ICollection InputObject
    {
        get { return inputObject; } 
        set { inputObject= value; }  // you should add some type checking here 
                                     //to make sure an invalid collection type isn't passed in
    }
    private ICollection inputObject;
    public Collection<T> GetTypedCollection<T>()
    {
        return (Collection<T>)inputObject; 
    }
} 
```

GetTypedCollection 方法要求您在编译时知道集合的类型是什么；如果这不可能，您需要发布更多示例代码，以便我们提出解决方案。

# ms-access - 两个查询的一个组合框 Access

> ID：11656900
> 
> 赞同：1
> 
> 时间：2012-07-25T19:12:51.893
> 
> 标签：ms-access, combobox

我有一个需要使用两个组合框的表单，但是第二个组合中的值应该来自基于第一个组合选择的两个不同的表。如果我在 combo_1 中选择选项 A，我想在 combo_2 中列出来自 tblRefAgency 的所有机构名称。如果我在 combo_1 中选择选项 B，我想在 combo_2 中列出来自 tblrefCarrier 的所有运营商。我可以添加 VB 代码来隐藏/显示两个不同的组合框，然后将它们重叠，但我觉得我应该能够在查询中做到这一点。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:13:50.560

只要处理的是单个表单，就可以在第一个combo 的After Update 事件中轻松设置第二个combo 的行源。

```
If Me.Combo1=1 Then
    Me.combo2.RowSource = "SELECT ID, Description FROM tblRefAgency 
End If 
```

如果第二个组合绑定到一个字段，您还必须在当前事件中设置组合以确保正确显示数据。

# python - 简单的 Python 正则表达式匹配

> ID：11656901
> 
> 赞同：1
> 
> 时间：2012-07-25T19:12:54.430
> 
> 标签：python, regex

我正在尝试将字符串与正则表达式匹配，而这两种情况中只有一种有效

**细绳**

```
ABCD 123 - Abcdef 0000
ABCD 123/DEFG123 - Abcdef 0000 
```

**正则表达式**

```
[A-Z]+ [A-Z0-9]{2,20} - [A-Z][a-z]+ [0-9]{4} 
```

这与第一个匹配，我试图将它与两者匹配，这是我尝试的新表达式

```
[A-Z]+ [A-Z0-9\\/]{2,20} - [A-Z][a-z]+ [0-9]{4} 
```

这完全匹配`DEFG123 - Abcdef 0000`，`ABCD 123/DEFG123 - Abcdef 0000`但我试图从中取出整个字符串。这是我正在使用的代码

```
regex = re.compile(expression)
r = regex.search(string) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:23:28.090

我很确定你不需要逃避你的正斜杠。删除双`\`，你应该设置。使用 regexpal.com 来测试这种东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:23:28.777

删除多余的反斜杠：

```
[A-Z]+ [A-Z0-9\/]{2,20} - [A-Z][a-z]+ [0-9]{4} 
```

或者你可以使用分组：

```
([A-Z]+ [A-Z0-9]{2,20} - [A-Z][a-z]+ [0-9]{4})|([A-Z]+ [A-Z0-9\\/]{2,20} - [A-Z][a-z]+ [0-9]{4}) 
```

这结合了上面的两个 RegEx 并匹配两行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:25:18.060

我试过这段代码：

```
import re
def foo(s):
    r = re.compile('[A-Z]+ [A-Z0-9\\/]{2,20} - [A-Z][a-z]+ [0-9]{4}')
    m = r.search(s)
    return s[m.start():m.end()]
print foo('ABCD 123 - Abcdef 0000')
print foo('ABCD 123/DEFG123 - Abcdef 0000') 
```

并得到以下结果：

```
ABCD 123 - Abcdef 0000
ABCD 123/DEFG123 - Abcdef 0000 
```

尝试使用`^`（行首）和`$`（行尾）字符：

```
r = re.compile('^[A-Z]+ [A-Z0-9\\/]{2,20} - [A-Z][a-z]+ [0-9]{4}$') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:25:41.507

逃跑是错的。带走：

```
string_one = 'ABCD 123 - Abcdef 0000'
string_two = 'ABCD 123/DEFG123 - Abcdef 0000'
pattern = r'[A-Z]+ [A-Z0-9/]{2,20} - [A-Z][a-z]+ [0-9]{4}'
regex = re.compile(pattern)
if regex.search(string_one):
    print "string one matches!"
if regex.search(string_two):
    print "string two matches!"

# output:
string one matches!
string two matches! 
```

请注意，我`r'this is a raw string'`没有必要使用原始字符串 ( )，但我痴迷于将原始字符串用于模式，因为它们可以防止大多数反斜杠插值。

# ios - 使用 Storyboard 比动画 UIView 更好？

> ID：11656906
> 
> 赞同：0
> 
> 时间：2012-07-25T19:13:09.127
> 
> 标签：ios, uiview, storyboard, animated

我正在开发一个包含少量 UIView 的应用程序/游戏：

*   用户/通行证表格
*   标题菜单
*   配置菜单
*   1 MapView 将成为主视图
*   我将使用“animateWithDuration”函数动态显示 4 个 UIViews 和动画
*   2 个警报 UIViews

我从未使用过 Storyboard，所以我想知道什么是最好的解决方案：

*   使用 Storyboards 来控制导航流程（在这种情况下可以使用 animateWithDuration 吗？）
*   像我到目前为止所做的那样以编程方式显示/隐藏 UIView
*   结合使用两者（如果可能的话）
*   其他

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:44:27.743

Storyboard 提供了一种方便的方式来组织和呈现 UIView 之间的导航结构。在 UIView 转换之间传递状态的 Segue 机制还鼓励更好的组织和更可维护的代码。IMO，几乎没有理由*不在*现代（例如针对 iOS 5 或更高版本）iOS 应用程序中使用 Storyboard。

您描述的所有场景在使用 Storyboard 时都可以直接实现。您绝不会“锁定”在所有视图之间使用 segues。您可以根据您的应用程序进行混合和匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:51:25.750

对于 iOS 5，我同意 Kaelin 的回答：在一个地方更好地组织，并且我的项目中有些项目不适合情节提要，这些项目仍然可以通过稍后加载 .xib 文件以编程方式添加。

但是，对于您需要做的任何 iOS 4.x 或更早版本的支持，storyboard 对您没有帮助。iOS 4.x 或更早版本不支持它。

# jquery - jQuery中的Javascript布尔真/假速记

> ID：11656909
> 
> 赞同：0
> 
> 时间：2012-07-25T19:13:13.267
> 
> 标签：jquery

查看 jQuery 的[deferred.js](https://github.com/lydonchandra/jquery/blob/master/src/deferred.js#L109)源代码，

```
} else if ( !( --remaining ) ) {
    deferred.resolveWith( contexts, values );
} 
```

！（--remaining）比较有什么作用？

从[https://stackoverflow.com/a/4943788/115988](https://stackoverflow.com/a/4943788/115988)，它看起来像是一个“令人困惑”的速记布尔检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:15:14.870

它正在检查值`remaining`是否不等于`0`（同时也减少值）。

本质上它是这样做的：

```
...
else if ( remaining -= 1 && !( remaining ) ) { 
    deferred.resolveWith( contexts, values );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:19:06.133

`!(--remaining)`：

> ！非真测试
> 
> -- 减量

--> 减少剩余然后测试它是否== 0。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T19:33:01.807

更容易阅读的版本！（--remaining），需要分析性能。

```
 } else if( remaining > 0 ) {
                    --remaining;

                    // if --remaining === 0, then resolve Deferred
                    if( remaining === 0 ) {
                        deferred.resolveWith( contexts, values );
                    }
                } 
```

# c# - 使用 Debug.Writeline 与 RichTextBox.AppendText 获得不同的结果

> ID：11656911
> 
> 赞同：0
> 
> 时间：2012-07-25T19:13:14.320
> 
> 标签：c#, vb.net, logging, console, richtextbox

我想知道是否有人可以解释为什么当我使用以下代码时会得到不同的结果。为了进一步解释，我使用的是在 C# 中创建的 dll，它是一个 rcon 框架。Richtextbox 显示 3 行，然后将不再显示，而我的调试控制台继续从我的 rcon 连接获取数据。

我正在使用：

```
Private Shared Sub HandleMessage(args As BattlEyeMessageEventArgs)
    Debug.WriteLine(args.Message)
    Form1.RichTextBox3.AppendText(args.Message & vbNewLine)
    Form1.RichTextBox3.SelectionStart = Form1.RichTextBox3.TextLength
    If args.Message = "Connected!" Then
        Form1.Button3.Enabled = True
    End If
End Sub 
```

如果有帮助，这里是 EventHandler 的 C# 代码：

```
using System;

namespace BattleNET
{
    public delegate void BattlEyeMessageEventHandler(BattlEyeMessageEventArgs args);

    public class BattlEyeMessageEventArgs : EventArgs
{
    public BattlEyeMessageEventArgs(string message)
    {
        Message = message;
    }

    public string Message { get; private set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:04:39.933

```
private delegate void UpdateRichTextBox3Delegate(RichTextBox3 textBox, string text);
private void UpdateRichTextBox3(RichTextBox3 textBox, string text){
    if(textBox.InvokeRequired){
        textBox.Invoke(new UpdateRichTextBox3Delegate(UpdateRichTextBox3),new object[]{textBox, text});
        return;
    }
    textBox.AppendText(String.format("{0}{1}", text,Environment.NewLine));
} 
```

检查 RichTextBox3 是否不需要在更新之前先被调用。

称呼`UpdateRichTextBox3(Form1.RichTextBox3, "some text to append");`

# php - foreach 和参考

> ID：11656915
> 
> 赞同：0
> 
> 时间：2012-07-25T19:13:42.000
> 
> 标签：php, reference, foreach

> **可能重复：**
> [foreach 的](https://stackoverflow.com/questions/4969243/strange-behavior-of-foreach)
> [奇怪行为 循环引用后的奇怪行为 - 这是 PHP 错误吗？](https://stackoverflow.com/questions/8220399/strange-behaviour-after-loop-by-reference-is-this-a-php-bug)

我确实对 Foreach 有问题，我无法理解第二个 foreach。

为什么 $foo 数组的第三部分的值是 'two'！

据我们所知，如果我们删除 '&'（在第一个 foreach 中），问题就会解决，但为什么呢？

```
<?php

$foo = array('one', 'two', 'three');

foreach ($foo as &$bar)
{
// no-op
}

var_dump($foo);

foreach ($foo as $bar)
{
 // no-op
}

var_dump($foo);
?>
############################################### 
```

产生：

```
 array(3) {
   [0]=>string(3) "one"
   [1]=>string(3) "two"
   [2]=>&string(5) "three"
  }
   array(3) {
  [0]=>string(3) "one"
  [1]=>string(3) "two"
  [2]=>&string(3) "two"
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:17:14.027

从[文档](http://php.net/manual/en/control-structures.foreach.php)：

> 即使在 foreach 循环之后，对 $value 和最后一个数组元素的引用仍然存在。建议通过 unset() 将其销毁。

所以在你的情况下：

```
<?php

$foo = array('one', 'two', 'three');

foreach ($foo as &$bar)
{
    // no-op
}

var_dump($foo);

unset($bar);

foreach ($foo as $bar)
{
 // no-op
}

var_dump($foo);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:16:04.793

在第一个 foreach 中，您使用带有 '&' 符号的引用，因此实际上修改了值。我不知道第一个 foreach 里面是什么，但你正在覆盖旧值，这就是为什么你的第二个 foreach 值与开始时不同的原因。

**编辑这篇**[文章](https://stackoverflow.com/questions/8220399/strange-behaviour-after-loop-by-reference-is-this-a-php-bug)中有一个简洁的答案，或者只是按照建议使用 unset

# selenium - 运行 Selenium 测试时，覆盖窗口显示在屏幕外

> ID：11656919
> 
> 赞同：2
> 
> 时间：2012-07-25T19:13:53.860
> 
> 标签：selenium, jenkins, overlay

在运行覆盖窗口的一组特定 Selenium 测试时，我遇到了问题。问题是覆盖窗口在显示时不包含在 Firefox 浏览器窗口中（覆盖的左侧被切断）。

奇怪的是，当测试在 Visual Studio 2010 中通过 ReSharper 使用 MbUnit 在本地运行时，它们通过就好了，并且覆盖层永远不会在浏览器窗口中显示截断（在测试运行期间浏览器窗口没有最大化）。但是，当通过 Jenkins 作业使用 MbUnit 运行测试时，覆盖的左侧被 Firefox 浏览器窗口的左侧截断（我尝试附上屏幕截图，但由于我是这里的新用户，我被阻止这样做）。

这是一个问题的原因是因为有一个需要点击的上传按钮，现在由于它不在屏幕上而无法访问。这是测试失败时的错误：

```
System.InvalidOperationException: Element cannot be scrolled into view:[object HTMLDivElement]
Command duration or timeout: 56 milliseconds
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 17:28:14'
System info: os.name: 'Windows Server 2008 R2', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_33'
Driver info: driver.version: RemoteWebDriver 
```

两个问题： 1) 有谁知道为什么通过 Jenkins 运行测试会导致覆盖显示在屏幕外？2) 有谁知道我如何在测试运行时强制覆盖显示在浏览器窗口中？

非常感谢你， 。亚当 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T18:10:20.230

我面临着完全相同的问题。解决方案：在 Jenkins 中设置固定浏览器窗口大小以解决此问题。

如果你用 driver.manage().window().maximize() 初始化浏览器窗口大小，一些 Jenkins 服务器的最大浏览器窗口大小可能比你本地计算机上的小很多。在这种情况下，本地计算机浏览器中显示的某些元素（例如按钮）无法在 Jenkins 服务器的浏览器中显示。它会使本地传递的脚本在 Jenkins 中失败。初始化适当的窗口大小以进行测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T11:27:58.013

我在 Jenkins 上遇到了同样的问题。我观察到命令***browser.driver.manage.window.maximize***仅根据可用的屏幕尺寸最大化窗口。我相信 Jenkins 默认的屏幕尺寸非常小。所以为了解决这个问题，我们必须手动指定屏幕尺寸。您可以通过在代码中添加以下内容来解决此问题

```
browser.driver.manage.window.resize_to(1920, 1080)
    maximizeDim = browser.driver.manage.window.size
    puts "screenHeight after maximizing: #{+maximizeDim.height}"
    puts "screenWidth after maximizing: #{+maximizeDim.width}" 
```

# jquery - jQuery获取屏幕高度更改表到高度

> ID：11656920
> 
> 赞同：0
> 
> 时间：2012-07-25T19:14:10.207
> 
> 标签：jquery, html, html-table

我希望我的表格或 div 覆盖 100% 的用户屏幕，但 height"100%" 不起作用。我正在尝试使用 jQuery 来获取屏幕尺寸，我可以这样做，但是如何将它放在表格高度代码中？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>For The Holy Church</title>
<style type="text/css">
body {
    background-image: url(images/BG.jpg);
    background-repeat: repeat;
    background-color: #181818;
    margin: 0px;
    height: 100%;
}
#Main {
    background-image: url(images/HolyBG.jpg);
    background-repeat: repeat-y;
    background-position: center top;
    height: 100%;
}
</style>
</head>

<body>
<table width="100%" height="100%"  border="3" cellpadding="0" cellspacing="0" id="Main">
  <tr>
    <td valign="top"><table width="100%" height="100px" border="0" cellpadding="0" cellspacing="0" background="images/TopBG.jpg">
      <tr>
        <td>&nbsp;</td>
      </tr>
    </table>
      <table width="100%" height="350px" border="0" cellpadding="0" cellspacing="0" background="images/VaticanBG.jpg">
        <tr>
          <td><table width="100" border="0" align="center" cellpadding="0" cellspacing="0">
            <tr>
              <td><img src="images/banner/01.jpg" alt="" width="933" height="350" /></td>
            </tr>
          </table></td>
        </tr>
    </table>
      <pre><script>$(document).ready(function() {
  $("p").text(screen.height);

});
</script>
<br />
      </pre>
      <p>&nbsp;</p>
      <p>&nbsp;</p></td>
  </tr>
</table>
</body>
</html> 
```

**我的问题是表格只到内容而不是屏幕高度。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:17:18.393

您应该发布一些代码，但您可能还需要确保`html`并且您的 div 也在其中。`body``height:100%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:19:32.757

```
body: {height:100%;width:100%;}

div: {height:100%;width:100%;}

table: {height:100%;width:100%;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:19:49.417

表格的每个父元素都应将其高度设置为 100%。

百分比高度将元素的高度设置为*其父*元素的 100% 。它不会比这更大。

例如：

```
<html>
  <body>
    <div>
      <table>
      </table>
    </div>
  </body>
</html> 
```

为了让上面的表格填满屏幕，它的每个父标签：div、body 和 html 标签都必须将其高度设置为 100%。

# java - 使 JLabel html 内容从右到左

> ID：11656922
> 
> 赞同：3
> 
> 时间：2012-07-25T19:14:18.563
> 
> 标签：java, swing, alignment, jlabel, right-to-left

我想将 JLabel 的内容方向更改为从右到左。
Jlabel 内容是 HTML，我测试了所有这些（并且没有一个有效！）：

```
 lbl.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
    lbl.setHorizontalTextPosition(JLabel.RIGHT);
    lbl.setHorizontalAlignment(JLabel.RIGHT); 
```

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T20:35:24.843

使用`div`元素设置文本的对齐方式和宽度：

```
<html><div align=right width=100px>text</div></html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T21:02:39.137

你的意思是标签吗`dir="rtl"`

![在此处输入图像描述](../Images/dc8a0b10db9145c13c8b1b74687c3b40.png)

不能直接使用`JLabel`or `JTextArea`，基于[BugParade 代码](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4866977)

```
import java.awt.ComponentOrientation;
import java.awt.GridLayout;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextPane;
import javax.swing.UIManager;

public class RightToLeft {

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception e) {
                    e.printStackTrace();
                }
                String str =("<html > <head>  <title>Test</title> <style> </style> </head> <body> <div align=right>"
                        + " <p><b><font face=Arial color=#5078A8><span lang=he>Hebrew Test</span></font></b></p> "
                        + "<p><span lang=he><font face=Arial size=2> HTML Table</font></span></p> <table dir =rtl "
                        + "border=1 cellpadding=10 width=62% id=AutoNumber1 bordercolorlight=#FFFFFF bordercolordark=#FFFFFF> "
                        + "<tr> <td width=28% valign=top bgcolor=#D0E4F8 class=cellclass><font face=Arial size=2 "
                        + "color=#687C98><b>1 2 3</b></font></td><td width=72% valign=top bgcolor=#D0E4F8 dir=rtl> "
                        + "<font face=Arial size=2><span lang=he>2</span></font></td> </tr> <tr> "
                        + "<td width=28% valign=top bgcolor=#F8F8FF style=color #687C98><b> <font face=Arial size=2>"
                        + "<span lang=he>3</span></font></b></td> <td width=72% align=right valign=top bgcolor=#F8F8FF> "
                        + "<font face=Arial size=2><span lang=he>4</span></font></td> </tr> <tr> "
                        + "<td width=28% valign=top bgcolor=#D0E4F8> <font face=Arial size=2 color=#687C98><b>5</b>"
                        + "</font></td> <td width=72% align=right valign=top bgcolor=#D0E4F8> <font face=Arial size=2>"
                        + "<span lang=he>6 </span></font></td> </tr> <tr> <td width=28%>LEFT&nbsp</td> "
                        + "<td width=72%>RIGHT&nbsp</td> </tr> </table> </div> </body> </html> ");
                JTextPane text = new JTextPane();
                text.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
                text.setContentType("text/html");
                text.setText(str);
                JScrollPane pane = new JScrollPane(text);
                JEditorPane text1 = new JEditorPane();
                text1.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
                text1.setContentType("text/html");
                text1.setText(str);
                JScrollPane pane1 = new JScrollPane(text1);
                JLabel text2 = new JLabel();
                text2.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
                //text2.setContentType("text/html"); // not implemented
                text2.setText(str);
                JScrollPane pane2 = new JScrollPane(text2);
                JTextArea text3 = new JTextArea();
                text3.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
                //text3.setContentType("text/html"); // not implemented
                text3.setText(str);
                JScrollPane pane3 = new JScrollPane(text3);
                JFrame.setDefaultLookAndFeelDecorated(true);
                JFrame frame = new JFrame("العنوان بالعربي");
                frame.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
                frame.setLayout(new GridLayout(2,2,5,5));
                frame.add(pane);
                frame.add(pane1);
                frame.add(pane2);
                frame.add(pane3);
                //frame.pack();
                frame.setSize(400,600);
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }
} 
```

# c# - C# 从另一个程序中捕获突出显示的文本

> ID：11656923
> 
> 赞同：1
> 
> 时间：2012-07-25T19:14:20.317
> 
> 标签：c#, visual-studio-2012

在带有 VS 2012 的 C# 中，是否可以“读取”用户在另一个程序中突出显示的内容？

例如，如果用户正在运行 Firefox，并使用鼠标选择（或突出显示）一段文本，那么用 C# 构建的程序能否“感知”这个选定的文本？

我四处寻找，但我空无一物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:32:42.257

我认为最简单的方法是将文本复制到剪贴板。例如，以编程方式调用 CTRL+C。它几乎适用于所有程序。如果您需要某个程序，您可以使用 UI 自动化来完成。

# java - 通过单击摇摆中的按钮多次更改标签文本不起作用

> ID：11656927
> 
> 赞同：0
> 
> 时间：2012-07-25T19:14:30.700
> 
> 标签：java, swing, jbutton, jlabel

我需要在摇摆中通过单击按钮多次更改 jlabel.text。在这段代码中，我需要将标签文本设置为在 dowork() 函数之前开始，并在中间设置为进行中，并将其设置为在 dowork() 之后结束（jlabel 中的状态类型和 dowork 执行时间很长）：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) { 
        status.setText("start");
        try {
            Thread.sleep(10000);
        } catch (InterruptedException ex) {
            Logger.getLogger(PelakInRFID.class.getName()).log(Level.SEVERE, null, ex);
        }
        status.setText("in progress");
        dowork();
       try {
            Thread.sleep(10000);
        } catch (InterruptedException ex) {
            Logger.getLogger(PelakInRFID.class.getName()).log(Level.SEVERE, null, ex);
        }
        status.setText("end");

 } 
```

在此代码状态仅设置为结束和开始不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:04:27.933

永远，永远不要使用`Thread.sleep`,`Thead.yield`在`ETD`

从不，永远不要在 中执行任何阻塞操作`ETD`，例如扩展 IO 或数据处理

标签没有改变的原因是因为你正在拖延/阻止`ETD`，阻止它处理任何重绘请求。

查看[Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)和[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:05:19.327

我会尝试使用一个`SwingWorker`实例（特别是它的`doInBackground`方法）来执行您当前在`doWork`与主 UI 线程不同的线程上执行的操作。它的编写方式，您的侦听器方法必然会在执行期间冻结用户界面，正如您所说，这可能会很长时间，从而导致糟糕的用户体验。

对文本的更改`JLabel`可能发生在三个不同的地方：首先，就在调用`execute`（即开始）之前`SwingWorker`；第二，使用`publish`/`process`机制`SwingWorker`使得可以在用户界面上发布中间结果；第三，在`done`方法中，一旦`SwingWorker`完成其方法的执行，就会在 UI 线程上再次调用该`doInBackground`方法。

参考资料：Oracle 的[工作线程教程和`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)[类](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)的JavaDoc API[文档`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。

# excel - Microsoft.ACE.OLEDB.12.0 当前记录集不支持尝试更新访问时收到的更新错误

> ID：11656929
> 
> 赞同：2
> 
> 时间：2012-07-25T19:14:31.980
> 
> 标签：excel, ms-access, vbscript, ms-access-2007, adodb

我有一个 ASP 页面，用户将在其中上传一个 excel 文件。文件成功上传后，我想获取 REGION 选项卡中的行并将它们插入到 MS Access 2007 表中。下面是我使用的代码，我收到了这个错误。我可以将记录集更新与 Microsoft.ACE.OLEB.12.0 提供程序一起使用吗？有一个更好的方法吗？ADODB.Recordset 错误“800a0cb3”

当前记录集不支持更新。这可能是提供者或所选锁类型的限制。

```
Set cnnExcel = Server.CreateObject("ADODB.Connection")
cnnExcel.Open "Provider=Microsoft.ACE.OLEDB.12.0;" & _
                "Data Source=" & strExcelFile & ";" & _
                    "Extended Properties=" &  Chr(34) & "Excel 12.0 Xml;HDR=Yes;IMEX=1" & Chr(34) & ";" 
Response.Write "Excel connection opened<BR>"

' Load ADO Recordset with Excel Data
Set rstExcel = Server.CreateObject("ADODB.Recordset")
rstExcel.Open "Select * from [REGION$]", cnnExcel, adOpenStatic 
Response.Write "Excel Recordset loaded<BR>"

' Open Access Connection
Set cnnAccess = Server.CreateObject("ADODB.Connection")
cnnAccess.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strAccessFile & ";Persist Security Info=False;" 
Response.Write "Access connection opened<BR>"
Const adOpenStatic = 1
Const adLockOptimistic = 3
Const adCmdText = &H0001
' Load ADO Recordset with Access Data
Set rstAccess = Server.CreateObject("ADODB.Recordset")
rstAccess.Open "REGION", cnnAccess, adOpenStatic, adLockOptimistic, adCmdTable
Response.Write "Access Recordset loaded<BR>"

' Synchronize Recordsets and Batch Update
Do Until rstExcel.EOF

        ' .AddNew
        For each field in rstExcel.Fields
            If field.Name = "% Over/Under" Then
                rstAccess.AddNew field.Name,0
            Else
                rstAccess.AddNew field.Name,field.Value
            End If
        Next

    rstExcel.MoveNext
Loop
rstAccess.UpdateBatch 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:12:49.070

谢谢汉斯、蒂姆和雷穆。我按照这个例子[使用 INSERT INTO 将数据写入访问数据库](https://stackoverflow.com/questions/9103867/using-insert-into-to-write-data-into-access-database)

```
 ' Open Access Connection
Set cnnAccess = Server.CreateObject("ADODB.Connection")
cnnAccess.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strAccessFilePath & ";Persist Security Info=False;"   
cnnAccess.Execute "DELETE * FROM REGION"
'Open Excel Connection
Set cnnExcel = Server.CreateObject("ADODB.Connection")
cnnExcel.Open "Provider=Microsoft.ACE.OLEDB.12.0;" & _
                "Data Source=" & strExcelFilePath & ";" & _
                    "Extended Properties=" &  Chr(34) & "Excel 12.0 Xml;HDR=Yes;IMEX=1" & Chr(34) & ";" 
Response.Write "Excel connection opened<BR>"
cnnExcel.Execute "INSERT INTO REGION IN 'C:\inetpub\wwwroot\FolderName\App_Data\AccessFileName.accdb' " & _
                "Select col1,col2,col3,col4" & _
               "from [REGION$]"

' Clean up    
cnnExcel.Close
Set cnnExcel = Nothing
cnnAccess.Close
Set cnnAccess = Nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:06:04.037

您需要不同的游标类型 - adOpenStatic 不支持更新。

[http://www.w3schools.com/ado/prop_rs_cursortype.asp](http://www.w3schools.com/ado/prop_rs_cursortype.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:19:01.093

你说“ *......我想把 REGION 选项卡中的行插入到 MS Access 2007 表中*”。

尽管我不完全理解您的示例代码，但您似乎正在为 Access 表打开一个记录集，为 Excel 工作表打开另一个记录集，然后在 Excel 记录集中移动并将每一行插入（*用于*）每一行到 Access 记录集中。

如果 Access 记录集是可编辑的（即不是只读的），您可以插入*一些*. 然而，即使你让它工作了，你仍然会使用 RBAR（Row By Agonizing Row）方法。最好使用基于集合的方法，以便将所有工作表行作为单个操作导入。

这是一个 Access 查询，它模仿了我认为您正在尝试做的事情。我的`Region`工作表有 4 列数据`% Over/Under`：`fld2`; `fld3`; 和`fld4`。Access`REGION`表具有相同的 4 列，并设置了兼容的数据类型。

```
INSERT INTO REGION ( [% Over/Under], fld2, fld3, fld4 )
SELECT 0 AS [% Over/Under], fld2, fld3, fld4
FROM [Excel 12.0 Xml;HDR=Yes;IMEX=1;DATABASE=C:\share\Access\regions.xlsx].[Region$]; 
```

如果您可以在您的 Access 数据库中获得类似的查询，请更改您的 ASP 以打开与您的 Access 数据库的 ADO 连接，然后使用与`Execute`您的`INSERT`语句的连接。您的 ASP 代码将比您现在拥有的代码简单得多，并且运行速度应该快得多。

# java - Java 和数据库显着缓慢

> ID：11656930
> 
> 赞同：0
> 
> 时间：2012-07-25T19:14:36.993
> 
> 标签：java, mysql, multithreading

我有一个 java 程序，它为从数据库中读取的每个字段创建线程。我有很多领域（+10,000）。我遇到了严重缓慢的问题。除此之外，程序最后进入一个无限循环。即，有一个或多个线程永远不会结束，这使得循环无限。我试图减少程序从 Java 代码中读取的字段数量，方法是指定要读取的项目的编号 (PK)，如下面的语句所示：

```
"select hName from schema.table where 
ID between 1 AND 200"; 
```

此更改后程序运行良好。我需要知道我应该怎么做才能解决这样的问题。包含诸如 (where) 之类的条件的语句会影响 java 程序的性能吗？如果我没有指定订单或条件，但我的表中有主键，那么在没有任何条件的情况下创建语句是更好的选择吗？

其他类中还有一些其他的插入语句。我确实在那里同步语句以避免两个线程具有相同的记录号。

```
synchronized (this) {
            Query = " insert into schema.table values (default,?,?,?)";
            Stmt = DBConnection.con.Statement(Query);
        } 
```

主要功能中的相关代码是：

```
try {
    ExecutorService threadExecutor = Executors.newFixedThreadPool(10);

    while (resultSet.next()) {
        name = resultSet.getString("hName");
        MyRunnable worker = new Myrunnable(name);
        threadExecutor.execute(worker);
        Counter++;
    }

    //This never appears
    System.out.println("End while with counter" + Counter);

    threadExecutor.shutdown();
    System.out.println("thread shutdown"); //this never appears

    // Wait until all threads are finish
    while (!threadExecutor.isTerminated()) {
        threadExecutor.awaitTermination(1, TimeUnit.SECONDS);
        System.out.println("inside the thread termination loop."); //I have infinite loop

    }

    System.out.println("Finished all threads"); //never appears

} catch (Exception e) {
    e.printStackTrace();
}

System.out.println("END MAIN");

DBConnection.con.close(); 
```

实现runnable的类在这里：

```
//The constructor
String threadName=null;
MyRunnable (String name)  {
    threadName=name;
}

public void run() {
    myclass Obj=new myclass();
    try {
        Obj.myFunction(name);
    } catch (Exception e) {
        System.out.println("Got an Exception: "+e.getMessage());
    }
    System.out.println(" thread exiting" + threadName);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:23:27.857

> 问：我有一个 java 程序，它为从数据库中读取的每个字段创建线程。我有很多领域（+10,000）

危险，威尔罗宾逊！

有没有人在设计阶段提出建议……这太疯狂了？不要那样做:)

> 问：包含条件的语句是否会影响 java 程序的性能？

答：您是在问“带有“where”子句的 SQL 查询通常比整个表的幼稚转储执行得更好吗？”

如果是这样：是的，已经知道“where”子句可以提高查询性能:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:22:36.810

不受其他事实的束缚，我无法想象您为什么会出于任何原因创建 10,000 个线程。即使在具有数十个内核的服务器上，上下文切换也会杀死您。你的代码是如何执行的？在 PC 上运行的简单 java 程序中？在服务器上？如果它在服务器上运行，您应该考虑使用应用程序服务器。然后您可以利用以下几点：首先，您可以摆脱所有线程的使用并依赖应用程序服务器将请求扩展到逻辑组件（可能使用 EJB3 组件——我建议您看看） . 其次，您可以利用连接池。创建与数据库的连接是一项昂贵的提议。如果您在池中使用连接，应用程序服务器将处理管理所有连接，

最后，确保您的表上有适当的索引。例如，我假设 ID 已被索引。是这样吗？运行解释计划，并查看正在扫描表的多少行来回答查询（有关如何使用解释计划功能的说明，请参阅 MySQL 文档）。

# php - 具有社交登录唯一性的电子邮件地址

> ID：11656932
> 
> 赞同：0
> 
> 时间：2012-07-25T19:14:40.567
> 
> 标签：php, google-api, facebook-php-sdk

所以在过去的几天里，我一直在为我的网站实施 Facebook 和 Google OAuth 2 社交登录。

一切都很好，基本上：

*   当用户登录他们的电子邮件地址时，将与数据库上已有的内容进行比较
*   如果电子邮件存在，则社交登录将附加到该现有电子邮件，并且用户登录到他们现有的帐户
*   否则创建一个新帐户。（就像我注意到它在这里工作一样）

但棘手的部分来了。谷歌可以有两个域的电子邮件：

*   gmail.com
*   googlemail.com

如果 Facebook 帐户是在`googlemail.com`Google 帐户中创建的（使用`gmail`）将不会链接。现在我已经通过检查两者的数据库解决了谷歌与 Facebook 的关系，`gmail.com`但是`googlemail.com`如果它被反转并且 Facebook 是找不到地址的人，问题就来了。

我以为我可以将`gmail.com`and `googlemail.com`check 添加到 facebook 登录功能以检查 unqiue 电子邮件地址，但我想知道这是否会导致我无法预见的问题。

我的一些想法是：

*   未来与其他 API 的兼容性等
*   复杂
*   安全？（我通过使用 `verified`Facebook API 中的标志来解决这个问题）
*   其他电子邮件提供商可能在指向同一帐户的双电子邮件域方面存在相同问题（也许我必须编写一个庞大的无法维护的列表？）。

所以问题是：添加一个 DB 子句来查找我`gmail.com`的`googlemail.com`Facebook 登录功能是一个坏主意吗？

我应该假设`gmail.com`并且`googlemail.com`是两个独立的帐户吗？

谢谢你的想法，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:23:49.170

您可以尝试将所有“googlemail.com”字符串转换为“gmail.com”。这个概念是如果系统找到 googlemail，将其转换为 gmail。

示例：用户输入 test@googlemail.com

算法将是：

```
email = "test@googlemail.com"
replace("@googlemail.com","@gmail.com",email )
authenticate(email); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:38:04.890

我决定通过搜索两者来实际解决这个问题`googlemail.com``gmail.com`当用户使用 Facebook 或 Google 登录时，与电子邮件地址相关的域和域来实际解决这个问题。

这似乎工作得很好，比规范化和潜在地改变用户信息来解决这个问题要好。

# php - 使用 Zend_OAuth_Consumer 通过 Flickr API 进行授权

> ID：11656936
> 
> 赞同：8
> 
> 时间：2012-07-25T19:15:16.613
> 
> 标签：php, api, zend-framework, oauth, flickr

对于那些愿意使用我强烈推荐的 Zend_OAuth_Consumer 解决方案的人，因为它处理了处理 OAuth 请求所需的所有琐碎步骤，以及响应响应后的所有困难过程，这是我的工作代码：

## 1）建立消费者实例：

```
$consumer = new Zend_Oauth_Consumer(array(
    'callbackUrl' => FLICKR_REDIRECT_URL /* from my app settings */,
    'siteUrl' => 'http://www.flickr.com/services/oauth',
    'consumerKey' => FLICKR_API_KEY,
    'consumerSecret' => FLICKR_API_SECRET,
    'requestTokenUrl' => FLICKR_REQUEST_TOKEN_URL /* www.flickr.com/services/oauth/request_token */,
    'accessTokenUrl' => FLICKR_ACCESS_TOKEN_URL /* www.flickr.com/services/oauth/access_token */,
    'authorizeUrl' => FLICKR_AUTHORIZE_URL /* www.flickr.com/services/oauth/authorize */
)); 
```

2）获取请求令牌并将其存储在 $_SESSION 变量中（或使用您想要的任何其他存储机制）。确保将返回对象序列化为会话变量的字符串：

```
$token = $consumer->getRequestToken();

$_SESSION['FLICKR_REQUEST_TOKEN'] = serialize($token); 
```

3）如果我在设置权限时遇到问题，请使用消费者实例的方法进行重定向，并在此时设置您的权限（即“读取”、“写入”、“删除”等）：

```
$consumer->redirect(array("perms" => FLICKR_API_PERMS /* 'read', 'write', 'delete', etc... */)); 
```

4) 在您重定向到的页面（即 FLICKR_REDIRECT_URL）上，创建一个新的消费者实例，现在获取一个访问令牌，将其存储在 $_SESSION 中，然后取消设置会话请求令牌变量：

```
$consumer = new Zend_Oauth_Consumer(array(
    'callbackUrl' => FLICKR_REDIRECT_URL /* from my app settings */,
    'siteUrl' => 'http://www.flickr.com/services/oauth',
    'consumerKey' => FLICKR_API_KEY,
    'consumerSecret' => FLICKR_API_SECRET,
    'requestTokenUrl' => FLICKR_REQUEST_TOKEN_URL /* www.flickr.com/services/oauth/request_token */,
    'accessTokenUrl' => FLICKR_ACCESS_TOKEN_URL /* www.flickr.com/services/oauth/access_token */,
    'authorizeUrl' => FLICKR_AUTHORIZE_URL /* www.flickr.com/services/oauth/authorize */
));

$token = $consumer->getAccessToken($_GET, unserialize($_SESSION['FLICKR_REQUEST_TOKEN']));

$_SESSION['FLICKR_ACCESS_TOKEN'] = serialize($token);

$_SESSION['FLICKR_REQUEST_TOKEN'] = null; 
```

5）此时您应该能够向 Flickr 发出授权请求：

```
$token = unserialize($_SESSION['FLICKR_ACCESS_TOKEN']);
$client = $token->getHttpClient(array(
    'callbackUrl' => FLICKR_REDIRECT_URL /* from my app settings */,
    'siteUrl' => 'http://www.flickr.com/services/oauth',
    'consumerKey' => FLICKR_API_KEY,
    'consumerSecret' => FLICKR_API_SECRET,
    'requestTokenUrl' => FLICKR_REQUEST_TOKEN_URL /* www.flickr.com/services/oauth/request_token */,
    'accessTokenUrl' => FLICKR_ACCESS_TOKEN_URL /* www.flickr.com/services/oauth/access_token */,
    'authorizeUrl' => FLICKR_AUTHORIZE_URL /* www.flickr.com/services/oauth/authorize */
));
$client->setUri("http://api.flickr.com/services/rest/");
$client->setMethod(Zend_Http_Client::GET);
$client->setParameterGet("method", "flickr.contacts.getList");
$client->setParameterGet("api_key", FLICKR_API_KEY);
$response = $client->request();

header('Content-Type: text/xml');
echo $response->getBody(); 
```

我希望这对某人有很大帮助。代码业力 =)

# image-processing - 计算机视觉/图像处理框架

> ID：11656945
> 
> 赞同：-1
> 
> 时间：2012-07-25T19:15:54.147
> 
> 标签：image-processing, computer-vision, augmented-reality, robotics

我很想知道是否有任何图像处理/计算机视觉框架允许您通过动态创建过滤器/过滤器块链来创建过滤器管道（类似于 MATLAB 中的 simulink 块）。

这个想法主要受到[RoboRealm](http://www.roborealm.com/)的启发，但我想主要在 C/C++ 中实现它，并能够以图形方式构建图像处理管道。我熟悉这样一个框架[Camunits](https://code.google.com/p/camunits/)，我将使用它作为构建这个图形过滤器框架的基础，但是如果您知道任何内容，请告诉我。CamUnits 与 LCM（轻量级通信和编组）很好地集成在一起，它可以处理我现在想避免的大部分编组和网络需求。此外，CamUnits 还与 LCM 中的日志框架很好地集成，并具有一系列用于图像采集的工具（火线相机、自动增益/曝光校正、快速去拜耳等）。

简而言之，我希望能够构建一个图形界面，让您动态创建图像处理管道（如果需要，线程化），这反过来又有助于图像处理/计算机视觉算法的快速原型设计。我也很想知道是否会对这种类型的框架（模块化，快速/高度可重构）感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:16:02.933

这（几乎）是图像处理应用程序中最古老的想法：“厨房水槽”GUI 应用程序，其中过滤器是框，图像输入到左侧，数据流过框，图像从右侧出来。

我记得最早使用的第一手资料是[Khoros](http://www.agocg.ac.uk/reports/visual/vissyst/dogbo_45.htm)（这可能告诉你我多大了），但几乎可以肯定的是，施乐的人在此之前也有类似的方法。最近，许多图像合成应用程序都使用了类似的 UI 方法，最著名的是[Shake](http://en.wikipedia.org/wiki/Apple_Shake)。

根据我的经验，它们对于算法探索非常有用，但我从未见过当问题开始变得复杂时，GUI 不会妨碍完成任务的情况。“视觉计算”对于获得解决方案的粗略轮廓很有吸引力，但有一个原因可以最好地使用方程式来推理和交流更难的问题 - 它是一种更简洁的符号，无需在屏幕上绘制数百个无用的气泡和线条.

在生产实践中，这些应用程序的实用性最终取决于它们的输出脚本功能：当您确实找到了问题的解决方案并且想要将其应用于一大堆图像时，鼠标拖动会很快变得令人厌烦。然后，该应用程序最好有一种方法来输出实现图像转换的代码，这种方式很容易与您的代码库的其余部分交互。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-05T09:02:33.717

[Cassandra](http://www.cassandra-vision.com/)是一种可视化编程环境，用于对算法进行建模，让您可以简单地开发用于图像处理和信号处理的算法。OpenCV 和 IPP 函数等库的广泛集成使 Cassandra 成为一个高效的开发平台，让您能够比使用传统编程语言更快地获得解决方案。

您可以将 Cassandra 用于一系列应用，包括信号处理和图像和视频处理，例如基于摄像头的驾驶辅助系统等。许多科研机构都使用 Cassandra，这是一种使用 C++ 进行图像处理的可视化编程环境。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-27T20:04:14.237

我们有一款几乎可以发布的产品（www.CoreOptical.com 上的“PrecisionImage.NET”）符合这些要求。它不是 C++，也没有用于将过滤器链拖放到位的图形 UI，但它灵活、强大且易于使用。它是一个“纯 .NET”程序集，并与 WPF 中的 WIC 成像子系统接口。目前，它普遍采用线程化，可以自动利用主机中的所有 CPU 能力，在接下来的一两个月内，我们将为支持 CUDA 的设备添加一个 GPU 处理子系统。这仍然是一个“纯 .NET”解决方案，即使使用 GPU 也没有非托管组件（GPU 代码被 JIT 编入与 GPU 驱动程序直接交互的 PTX 代码），因此您可以使用任何 CLS 的 .NET 语言- 兼容包括 C#/VB/F#。然而，目前我们只有 C# 中的示例。本质上，它是一个类库，允许组装处理链而不会产生离散化错误。我们有几个在线示例展示了这是如何完成的。

# asp.net-mvc-3 - 如何在调用构造函数之前将表单值分配给模型

> ID：11656951
> 
> 赞同：0
> 
> 时间：2012-07-25T19:16:05.467
> 
> 标签：asp.net-mvc-3

我一直在努力解决这个烦人的问题。我有一个模型、编辑器和控制器：

```
public class TeamDetails{
   public int SeasonId{get;set;}

   public TeamDetails()
   {
      //need SeasonId to be populated already from form here, but it won't yet.
   }

   public TeamDetails(int seasonId)
        : this()
    {
      //load dropdownlist using seasonId from repository
    }
}

//Controller

//get method gets seasonId from querystring.
 public ViewResult Create(int seasonId)
 {
    // calls the parameterized constructor for TeamDetails
    // which uses seasonId to populate a dropdownlist from db repo.
     var teamDetails = new TeamDetails(seasonId);
 }

[HttpPost]
public PartialViewResult Create(TeamDetails model)
{
   // no such luxury here to call the parameterized 
   // Constructor for model. additional logic.
}

//editor

@using (Ajax.BeginForm("Create", "Team", options))
{
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.SeasonId)
    //additional fields
} 
```

我需要在 TeamDetails 构造函数被击中时已经填充了隐藏字段中的 SeasonId，因为我在构造函数中需要它。但是，这显然不会发生，因为在 MVC 有机会将 SeasonId 分配给对象之前调用了构造函数。有什么办法可以解决这个问题吗？

谢谢

里兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:34:06.080

不，构造函数总是首先被调用。这不是 mvc 相关的功能，这是 .net 功能 - 如果不调用它的构造函数，就无法创建类的实例。

我建议考虑一下，模型内部不应该有逻辑，它们只是保存数据的类。对于操作（包括填充模型），应该使用一个动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:30:22.443

我建议不要在您的视图模型中嵌入这样的逻辑（例如从 SeasonId 确定团队数据）。将您的 ViewModel 视为仅具有属性的普通平面对象。在视图模型上应用您想要的任何输入验证属性，然后在处理回发的操作中检查您的模型状态是否存在验证问题。业务规则验证可能是您无法在控制器中执行的操作，因为您可能需要来自其他来源（如数据库等）的信息。这些应该在您的业务层中，我将这些问题作为 DomainException 提出，然后在我的控制器在 try catch 中捕获它们并将任何 DomainExceptions 作为 ModelError 添加到 ModelState。如果 ModelState.IsValid 进行正常测试。一旦您的模型有效，您可以创建 TeamDetails 类的内部实例（如果必须）并在您完全控制下处理它的内部工作。虽然我建议将您对视图数据所做的实际业务逻辑保留在业务层而不是控制器中。将控制器视为将信息从视图模型传递到业务/服务层的一种方式，仅此而已。

这是一些伪代码来说明我的意思，我没有检查这在语法上是否正确，但你明白了。

```
public class TeamsCreateFormModel
{
    public int TeamId { get; set; }
    [Required]
    public int SeasonId { get; set; }
    [Required]
    public string Name { get; set; }
    public int Color { get; set; }
} 
```

.

```
[HttpPost, ValidateAntiForgeryToken]
public ActionResult Create(TeamsCreateFormModel model)
{
    if (!ModelState.IsValid)
        return RedirectToAction("Create");
    try
    {
        Team team = new Team() {Name = model.Name, 
                                Color = model.Color, 
                                SeasonId = model.SeasonId}

        var teamService = new TeamService(); //DAL encapsulated in this class
        team = teamService.Create(team);
    }
    catch (DomainException ex)
    {
        ModelState.AddModelError(string.Empty, ex.Message);
        return RedirectToAction("Create");
    }
    return RedirectToAction("Details", new { id = team.TeamId});
} 
```

**编辑：** 为了处理下拉列表和您需要预先填充的其他内容，我建议您也使用视图模型。最简单的方法是从您的模型中继承预期的回发，并在视图中添加您需要但不希望在提交时回发到服务器的任何属性。

```
public class TeamsCreateViewModel : TeamsCreateFormModel
{
    public IEnumerable<SelectListItem> Seasons
} 
```

为简单起见，我使用 Linq 从集合中获取 SelectListItem 的集合`GetSeasons()`很可能返回。还有其他需要考虑的因素，例如让第一个项目类似于“---请选择一个---”等

```
public ActionResult Create()
{
    var teamService = new TeamService(); //DAL encapsulated in this class
    var model = new TeamsCreateViewModel();
    model.Seasons = teamService.GetSeasons().Select(x => new SelectListItem() 
                                   {Text = "TextHere", Value = "ValueHere"});
    return View("Create");
} 
```

视图会有这样的东西......

```
@model TeamsCreateViewModel
...
@Html.DropDownListFor(x => x.SeasonId, Model.Seasons) 
```

# java - Eclipse > New File - 选项：链接到文件系统中的文件

> ID：11656957
> 
> 赞同：0
> 
> 时间：2012-07-25T19:16:31.740
> 
> 标签：java, eclipse, file

我在eclipse中为我的项目创建了一个属性文件。当我创建文件时，我看到一个窗口，其中包含两个字段“输入或选择父文件夹”和“文件名”和“高级”按钮。单击该按钮，您会看到“链接到文件系统中的文件”选项。这是什么意思，它有什么作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:24:15.017

这将创建文件系统中文件的引用作为项目中的文件。

但是当您打包它（例如 JAR 或 WAR）进行分发时，引用的文件将被复制并打包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:40:07.527

就像在eclipse中打开那个文件一样。

# .net - 参数化数据库查询问题

> ID：11656959
> 
> 赞同：1
> 
> 时间：2012-07-25T19:16:44.237
> 
> 标签：.net, tsql, c#-4.0

我创建了下面列出的查询。当我运行它时它工作。

```
string sortDir = (this.GridSortDirection == SortDirection.Descending ? " DESC" : " ASC");
int startIndex = 1;
int endIndex = this.gvData.PageSize;

SELECT RowNum, [ID], [Name], [Description], [DisplayIndex], [Status] 
FROM
(
    SELECT  [ID], [Name], [Description], [DisplayIndex], CASE WHEN Status = 1 THEN 'Active' ELSE 'Disabled' END AS [Status] ,
    ROW_NUMBER() OVER(ORDER BY [" + this.GridSortExpression + "]" + " " + sortDir + @")as 'RowNum'
    FROM  [MyDatabase].[dbo].[t_MyTable] s

) as Info
WHERE RowNum BETWEEN " + startIndex.ToString() + " AND " + endIndex.ToString() 
```

我尝试将其重组为参数化查询格式，如下所示，但运行时出现错误。该错误表明 sortDir 附近存在语法错误。

```
string sql = @"SELECT RowNum, [ID], [Name], [Description], [DisplayIndex], [Status] 
FROM
(
    SELECT  [ID], [Name], [Description], [DisplayIndex], CASE WHEN Status = 1 THEN 'Active' ELSE 'Disabled' END AS [Status] ,
    ROW_NUMBER() OVER(ORDER BY @SortExpression @SortDir)as 'RowNum'
    FROM  [MyDatabase].[dbo].[t_MyTable] s

) as Info
WHERE RowNum BETWEEN @startIndex AND @endIndex";

cmd = new SqlCommand(sql, conn);
cmd.Parameters.AddWithValue("@SortExpression", this.GridSortExpression);   
cmd.Parameters.AddWithValue("@SortDir", sortDir);                 
cmd.Parameters.AddWithValue("@startIndex", startIndex);
cmd.Parameters.AddWithValue("@endIndex", endIndex);
da = new SqlDataAdapter(cmd);
da.Fill(dt); 
```

我也尝试了以下无济于事...相同的错误消息

```
cmd = new SqlCommand(sql, conn);
cmd.Parameters.AddWithValue("@SortExpression", this.GridSortExpression + " " + sortDir);                    
cmd.Parameters.AddWithValue("@startIndex", startIndex);
cmd.Parameters.AddWithValue("@endIndex", endIndex);
da = new SqlDataAdapter(cmd);
da.Fill(dt); 
```

任何人都可以参考我的错误吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:20:34.600

`@SortExpression`并且`@SortDir`不能参数化。它们是 T-SQL 语法的一部分，而不是值。您必须将它们留在命令文本字符串中。相比之下`@startIndex`，and`@endIndex`是值，因此可以作为参数正常工作。

如果您担心 SQL 注入，那么恐怕您将不得不编写自己的代码来验证`this.GridSortExpression`and的内容`sortDir`。例如：

*   您可以检查是否`sortDir`等于`"asc"`或`"desc"`拒绝其他任何内容。
*   您可以从 中解析出列名列表`this.GridSortExpression`，然后将每个列放在方括号中，然后再将列表重新组合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:31:34.470

可以使用 CASE 语句进行条件排序。

例如：

```
ORDER BY
     CASE
         WHEN @SortCol = 'a' THEN colA
         WHEN @SortCol = 'b' THEN colB
     END DESC 
```

您可以进一步扩展它以按方向排序。

```
ORDER BY
    CASE WHEN @SortCol = 'a' AND @SortDir = 'ASC' THEN ColA END ASC
    ,CASE WHEN @SortCol = 'a' AND @SortDir = 'DESC' THEN ColA END DESC
    ,CASE WHEN @SortCol = 'b' AND @SortDir = 'ASC' THEN ColB END ASC
    ,CASE WHEN @SortCol = 'b' AND @SortDir = 'DESC' THEN ColB END DESC 
```

上次我使用它时，我有一个@KeyDataColumn，我想对其进行排序、分组并在结果集中返回。与其将这个逻辑重复 3 次，我发现将逻辑封装在子查询中更方便、可读和可扩展。

```
SELECT
    keyData.KeyDataColumn
    ,COUNT(base.*) AS KeyDataCount
FROM baseTable base
    CROSS APPLY (
        SELECT
            CASE
                WHEN @KeyDataColumn = 'NextEvolution' THEN base.NextEvolution
                WHEN @KeyDataColumn = 'TimesCaptured' THEN base.TimesCaptured
                WHEN @KeyDataColumn = 'BattlesWon' THEN base.BattlesWon
            END AS KeyDataColumn
    ) keyData
GROUP BY keyData.KeyDataColumn
ORDER BY
    CASE WHEN @SortDir = 'ASC' THEN keyData.KeyDataColumn END ASC
    ,CASE WHEN @SortDir = 'DESC' THEN keyData.KeyDataColumn END DESC 
```

# netbeans-7 - 如何将资源编辑器项目导入 netbeans 7.2 并作为 jar/jad 文件执行？

> ID：11656962
> 
> 赞同：0
> 
> 时间：2012-07-25T19:17:05.150
> 
> 标签：netbeans-7, lwuit-resource-editor

如何将资源编辑器项目导入 netbeans 7 并作为 jar/jad 文件执行？我正在尝试导入和执行，但我只能打开状态机文件和二进制文件，而不是实际的程序文件。为什么会这样？

# c# - 使用带有文本装饰的asp C#问题：无；

> ID：11656967
> 
> 赞同：0
> 
> 时间：2012-07-25T19:17:39.950
> 
> 标签：c#, asp.net, html, visual-studio-2010

我有这个问题，我的导航链接在悬停时有下划线。我试图放置文本装饰：无。我查看了整个 CSS，但找不到下划线的原因。

所以我使用了萤火虫并检查了它给我下划线的特定位置的css。我得到了这个不是我自己的css。

```
@font-face {
    font-family: "EB Garamond";
    font-style: normal;
    font-weight: 400;
    src: local("EB Garamond"), local("EBGaramond"), url("http://themes.googleusercontent.com/static/fonts/ebgaramond/v4/kYZt1bJ8UsGAPRGnkXPeFYbN6UDyHWBl620a-IRfuBk.woff") format("woff");
} 
```

我的问题是如何改变这种风格？这是什么风格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:39:48.190

The fastest way to solve the problem is to use `text-decoration:none !important;` in a css selector, preferably a rather specific one.

That css is specifying a custom font to use, specifying where to log it from (http://themes.googleusercontent.com/) and what the default settings, such as font weight, should be when it used. Then any time the font-face is set to `EB Garamond` it will load those defaults. As that class is listed here it is not responsible for the underlining.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:20:58.297

它可能是覆盖样式的其他任何地方。覆盖它：

```
a:hover{
    text-decoration:none !important;
} 
```

重要的是告诉浏览器覆盖其他样式表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:23:23.177

如果您不希望链接上有下划线，您还必须将 CSS 更改为 text-decoration:none 锚标记（或其类或 id）本身以及悬停、活动和访问的伪类。像这样：

```
a, a:visited, a:hover, a:active {
    text-decoration: none;
} 
```

Where you could use the selector like this for a class (where the class is applied to the a tag)

```
.class, .class:visited, .class:hover, .class:active 
```

or like this for an id (where the a tag has this id)

```
#id, #id:visited, #id:hover, #id:active 
```

# c++ - strptime 作为未解析的参考

> ID：11656969
> 
> 赞同：1
> 
> 时间：2012-07-25T19:17:43.963
> 
> 标签：c++

我的 C++ 程序有一个烦人的问题。我有两个程序（一个主程序和一个用于测试的小助手程序），我最近从一个系统转移到另一个系统。在新系统上，我开始在主程序中得到一个未解决的 strptime 方法的引用错误。恼人的是，辅助程序也有相同的 strptime 方法，并且能够毫无困难地调用它。strptime 在旧系统上工作，两个系统都运行相同版本的 centos。

我已经尝试了一些显而易见的事情来确定为什么我的参考没有得到解决。我尝试将我的帮助程序必须的每个标题复制到我的主程序中，但仍然没有解决。我检查了 eclipse 编译器/链接器设置，虽然主程序做了更多的事情（添加了一些符号，包括一些额外的文件夹，以及指向 libld 的链接），但似乎没有任何更改可以解释为什么一个程序可以识别 strptime。我试图创建一个仅使用 strptime 的演示程序，并且它被识别出来了。我现在对为什么会收到错误感到迷茫。谁能建议我可以检查未解决参考的潜在原因的其他内容？

我已经验证了我正在链接的 time.h 包含 strptime 方法，但它是在外部定义的。time.h 文件是否应该包含另一个 .h 来提供该方法的内联定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:21:21.547

我以前没见过这个，但这可能会有所帮助：

从 linux 手册页...

[http://linux.die.net/man/3/strptime](http://linux.die.net/man/3/strptime)

```
#define _XOPEN_SOURCE /* See feature_test_macros(7) */
#include <time.h> 
```

* * *

_XOPEN_SOURCE - 功能测试宏

定义此宏会导致头文件公开如下定义： • 使用任何值定义会公开符合 POSIX.1、POSIX.2 和 XPG4 的定义。• 500 或更大的值另外公开了SUSv2 (UNIX 98) 的定义。

• （自glibc 2.2 起）600 或更大的值额外公开了SUSv3（UNIX 03；即POSIX.1-2001 基本规范加上XSI 扩展）和C99 定义的定义。

• （自glibc 2.10 起）700 或更大的值额外公开了SUSv4 的定义（即POSIX.1-2008 基本规范加上XSI 扩展）。

# php - 如何通过json检索表单帖子

> ID：11656978
> 
> 赞同：0
> 
> 时间：2012-07-25T19:18:22.697
> 
> 标签：php, jquery, ajax, json

嘿，我想弄清楚如何在 php 脚本中获取通过 ajax json 发送的表单值。

```
$.ajax
({
    type: "POST",
    url: "http://www.xxx.com/cart/gateway",
    dataType: 'json',
    async: false,
    contentType: "json",
    data: JSON.stringify({ "unique_id": $("#order_unique_id").val(), "name_on_card" : $("#name_on_card").val(), "card_number" : $("#card_number").val(), "expiry_date" : $("#expiry_date").val(), "cvv_code" : $("#cvv_code").val() }),
    success: function (data) {
        if (data && data != null && data["success"] != null && data["orderid"]) {
                processSuccess(data["orderid"]);
            } else if (data && data != null && data["error"] != null) {
                processError(data["error"]);
            } else {
                processError('unknown');
            }
            processing = false; 
    }
}) 
```

目前它有一个错误，但这只是因为它从表单中寻找一个 POST 值。这是该代码：

```
 public function __construct(&$page, $params) {
    $page->cart = new theCart();
    $page->cart->set_form();

    switch($action){
        case 'gateway':
            $this->checkoutCart($page);
            break;

 ...}

 function set_form()
{
$this->setFormValue('b_email');
$this->setFormValue('b_first_name');
$this->setFormValue('b_last_name');
.....etc etc
//ADDED 7/25/2012
$this->setFormValue('name_on_card'); 
$this->setFormValue('card_number'); 
$this->setFormValue('expiry_date'); 
$this->setFormValue('cvv_code'); 
$this->setFormValue('order_unique_id'); 

$this->verified = false;
 }

 function setFormValue($name){
   if(isset($_POST[$name])){
     $this->$name = trim($_POST[$name]);
   }
 }

 private function checkoutCart(&$page){
    $page->part->body->content_html = $this->pPay($page, $this->getPay());
}

 private function getPay(){
    //echo 'getP== ' . json_decode( $_POST[ 'unique_id' ], true );
    echo 'getP== ' . $_POST['unique_id'];

    return array(
        'unique_id' => $_POST['unique_id'],
        'name_on_card' => $_POST['name_on_card'],
        'card_number' => $_POST['card_number'],
        'expiration_date' => $_POST['expiry_date'],
        'cvv_code' => $_POST['cvv_code']
    );
} 
```

我没有为上面的**$_POST['unique_id']**获得任何价值。

原来的邮政编码是这样的：

```
$.post("http://www.xxx.com/cart/gateway",
        {
            unique_id:$("#order_unique_id").val(),
            name_on_card:$("#name_on_card").val(),
            card_number:$("#card_number").val(),
            expiry_date:$("#expiry_date").val(),
            cvv_code:$("#cvv_code").val()   
        },
        function(data) {
            if (data && data != null && data["success"] != null && data["orderid"]) {
                processSuccess(data["orderid"]);
            } else if (data && data != null && data["error"] != null) {
                processError(data["error"]);
            } else {
                processError('unknown');
            }
            processing = false;
        },
        "json"
); 
```

但这不起作用，因为它无法正确格式化（它正在寻找一个 json 响应..这似乎把它放在 ?blah=blah&blah=blah.... **但是确实产生了它正在寻找的值代码的 $.POST 部分..但如果错误不是想要的格式（json），它就毫无价值。

我怎样才能纠正这种情况的发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:54:21.093

如果`data`是一个字符串，它应该是一个查询字符串。`JSON.stringify`将其转换为 JSON。您可以只传递`data`一个对象，然后将为您处理到查询字符串的转换。

编辑：换句话说，改变：

```
data: JSON.stringify({ "unique_id": $("#order_unique_id").val(), "name_on_card" : $("#name_on_card").val(), "card_number" : $("#card_number").val(), "expiry_date" : $("#expiry_date").val(), "cvv_code" : $("#cvv_code").val() }), 
```

至

```
data: { "unique_id": $("#order_unique_id").val(), "name_on_card" : $("#name_on_card").val(), "card_number" : $("#card_number").val(), "expiry_date" : $("#expiry_date").val(), "cvv_code" : $("#cvv_code").val() }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:57:36.483

PHP 需要表单编码数据（application/x-www-form-urlencoded）。

不要将 JSON 作为数据类型传递：

```
$.post("http://www.xxx.com/cart/gateway",
        {
            unique_id:$("#order_unique_id").val(),
            name_on_card:$("#name_on_card").val(),
            card_number:$("#card_number").val(),
            expiry_date:$("#expiry_date").val(),
            cvv_code:$("#cvv_code").val()   
        },
        function(data) {
            if (data && data != null && data["success"] != null && data["orderid"]) {
                processSuccess(data["orderid"]);
            } else if (data && data != null && data["error"] != null) {
                processError(data["error"]);
            } else {
                processError('unknown');
            }
            processing = false;
        }
        // don't do this
        // ,"json"
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:03:18.420

由于您在请求正文中传递 JSON 而不是发送 post var，因此您需要从请求正文中获取 json，对其进行解析，然后从中提取值。

```
$request_body = file_get_contents('php://input');

$json = json_decode($request_body);

// use $json.unique_id 
```

参考：[如何检索请求有效负载](https://stackoverflow.com/questions/9597052/how-to-retrieve-request-payload)

# javascript - 在javascript中模拟滚动文本

> ID：11656980
> 
> 赞同：0
> 
> 时间：2012-07-25T19:18:23.430
> 
> 标签：javascript, jquery

我正在尝试想出一些东西来模拟老式的调制解调器连接。以可变速度绘制自身而不是立即渲染的 IE 文本。

这是我想出的可行的方法：

[http://jsfiddle.net/vUPK2/](http://jsfiddle.net/vUPK2/)

我的问题是我不能让它更快。我已将 setInterval 设置为 1ms，这似乎是我能得到的最快速度。

有谁知道如何重新考虑这个以消除我遇到的速度上限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:37:33.540

这似乎有点快，至少在 FireFox 中是这样。尽管完全重写，唯一真正的区别是没有使用 jQuery 或“循环”内的字符串长度属性。我还增加了一次做多个角色的能力。5-10 个字符似乎是一个不错的范围。

```
function TextTyper(targetElement, charsAtATime, textToType) {
    var i,
        l = textToType.length,
        timeout,
        el = $(targetElement)[0],
        textNode = el.childNodes[0];
    if (!textNode) {
        textNode = document.createTextNode('');
        el.appendChild(textNode);
    }
    this.begin = function() {
        i = 0;
        if (timeout) { clearTimeout(timeout); }
        textNode.nodeValue = '';
        typeChar();
    };
    console.log(textNode);
    function typeChar() {
        if (i < l) {
            textNode.nodeValue += textToType.substr(i, charsAtATime);
            i += charsAtATime;
            timeout = setTimeout(typeChar, 1);
        } else {
            timeout = 0;
        }
    }
}

(new TextTyper('#test', 8, 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam rhoncus urna vitae mi aliquet suscipit. Nullam vulputate ultrices tortor vel luctus. Duis sodales lacinia consequat. Vestibulum vehicula, ligula sit amet tincidunt scelerisque, orci arcu malesuada odio, eu ornare ipsum risus at metus. Nullam porttitor condimentum nunc, nec euismod massa consectetur id. Mauris ut nisl nulla, et tristique sem. In non ante vel libero lacinia vehicula in quis urna. Suspendisse urna erat, ornare sit amet rhoncus eget, bibendum at ipsum.'))
   .begin(); 
```

我在这里观察了一些关于闭包和范围的最佳实践。但是你应该在页面卸载时摆脱你的 TextTyper 对象，并且应该正确地处理它们而不在紧密循环中创建新对象（或者你可以使用 targetElement 上的闭包泄漏内存）。

[在 jsfiddle 看到这个](http://jsfiddle.net/eDGmj/4/)。

注意：我选择`setTimeout`而不是`setInterval`因为我不希望同一个脚本的多次调用相互踩踏。鉴于代码运行的速度，我怀疑它是否*可以*，但这是一种很好的设计实践。如果这是一个 Ajax 调用，您不希望在第一个请求的应答到来之前使服务器充满请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:20:58.533

您可以尝试一次附加多个字符。尝试附加 2 或 3 个字符，或更多。

动画速度取决于帧速率和帧之间的变化量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:21:10.717

是的，只需在 displayText 函数中添加两个字母（或更多）。在 for 循环中执行此操作，您可以轻松调整变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T20:08:24.717

在毫秒级速度方面不要使用 jQuery，至少要缓存引用。为了使动画比[最小超时时间](https://stackoverflow.com/q/9647215/1048572)更快，您一次只能附加多个字符。特别是如果你想要一个类似的跨设备速度，你应该使用更长的超时时间，因为[最小值可以变化](https://stackoverflow.com/a/10740558/1048572)- 标准动画速度是每秒 60 帧。

```
function displayText(id, text) {
    var node = document.createTextNode(""),
        i = 0,
        chars = 5;
    document.getElementById(id).appendChild(node);

    (function add(){
        node.data += text.substr(i, chars);
        i += chars;
        if (i < text.length)
            setTimeout(add, 1000/60);
    })();
} 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/LTEtz/1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T19:48:19.723

替代方式

```
var txt="Lorem ipsum dolor sit amet";
index=0;
function displayText(text) {
    $('#test').append(text[index]); index ++;
    $('#test').append(text[index]); index ++;
    if (index  < text.length) {
        setTimeout(function(){ displayText(txt) }, 1);
    }
}

displayText(txt); 
```

[**演示。**](http://jsfiddle.net/heera/qjJmf/5/)

**或者使用更近的**

```
function txt_show(text)
{
    var index=0;
    var txt=text;
    displayText();
    function displayText() {
        $('#test').append(txt[index]); index ++;
        $('#test').append(txt[index]); index ++;
        if (index  < txt.length) setTimeout(displayText, 1);
    }
}
var txt="Lorem ipsum dolor sit amet";
txt_show(txt); 
```

[**演示。**](http://jsfiddle.net/heera/qjJmf/6/)

但`IE`它会更慢（仅在 IE8、FF 和 Chrome 中测试）。

# javascript - 在控制台中打印 JavaScript 变量的值

> ID：11656983
> 
> 赞同：8
> 
> 时间：2012-07-25T19:18:37.860
> 
> 标签：javascript

我有一个存储一些值的 JavaScript 变量。

我可以在 Firebug 或其他地方回显它以查看正在存储的值吗？

```
var p = user.permissions; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T20:51:35.990

没关系。我不得不添加这一行

```
var p = user.permissions; 
```

前：

```
console.log(p); 
```

我只是在输入 console.log(p);

# amazon-ec2 - Amazon EC2 和托管网站之间的区别

> ID：11656984
> 
> 赞同：5
> 
> 时间：2012-07-25T19:18:40.137
> 
> 标签：amazon-ec2, webserver

不确定这是否是这个问题的相关论坛，所以如果不是，请告诉我，我会移动这个。

有人可以讨论一下 Amazon EC2 之间的区别吗？据我所知，它是一种产品，可以让您访问 Amazon 物理托管位置的计算机，然后允许您添加任何类型的软件（如 MySQL、PHPMyAdmin、主机网站等...），而托管站点（例如 goDaddy、BlueHost）基本上做同样的事情，除了这些托管站点不允许您安装任何您想要的软件。这是真的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:44:01.363

另一件事是了解 Amazon EC2 的更大目标——扩展。AWS 可以在流量增加时轻松扩展新实例，然后在流量减少时缩减。

但是对于您最初的问题，是的，您对 EC2 机器具有 root 访问权限。您可以以任何您想要的方式对其进行配置，但您也对维护它负全部责任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:30:21.823

你在正确的轨道上。使用 Amazon [EC2](http://aws.amazon.com/ec2/)，您可以完全控制服务器（AMI - Amazon 系统映像）。这意味着您必须安装任何软件包并将其部署到该服务器。使用网络主机，您可以通过单击通常使用 cPanel 的网络按钮来安装 MySQL、PHP 等软件包。

不同之处在于，如果您使用 EC2，您就可以控制。通过更改数据库、服务器设置、内存缓存、HTTP 加速器等变量，您可以提高网站的性能。有了虚拟主机，您就任由他们摆布，但您也要为支持付费。如果您在 EC2 上运行服务器，则安全性取决于您。

如果您知道如何使用 Linux 终端，我将从 EC2 上的一个微型实例开始并使用它（它是免费的！）。您可以使用[PuTTy](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)通过 SSH 访问它。

# facebook-graph-api - 带有客户端 access_token 的 FQL？

> ID：11656986
> 
> 赞同：0
> 
> 时间：2012-07-25T19:18:43.757
> 
> 标签：facebook-graph-api, facebook-fql, oauth-2.0

您可以使用客户端 access_token 运行 FQL 吗？我想做类似的事情：

`SELECT user_online_presence FROM user WHERE uid IN ([UID1],[UID2],[UID3],...)`

我对每个用户都有 user_online_presence 权限。

这在任何地方都有记录吗？我只在实时更新文档中发现了客户端令牌，但是这个线程显示了我完全不同的实现： [Facebook 实时用户更新](http://facebook.stackoverflow.com/questions/4062246/facebook-real-time-user-updates)

客户端 access_token 是否消除了扩展我的 user_access 令牌的需要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:10:56.967

没有记录的事实应该警告您它的行为可能随时改变，所以请不要依赖它。但是，当前，当用户已授予相同的应用程序访问数据的权限并假设用户访问令牌尚未过期时，应用程序访问令牌*可*用于检索用户的大部分字段和连接。

因此，例如，向`user_location`用户请求许可并获得许可将允许应用访问令牌访问`current_location`该特定用户的字段。

正如我所说，如果没有记录，请不要依赖它 - 而是继续在相关的地方使用用户访问令牌。

此外，对上述 FQL 查询的一项更正 - 该字段是`online_presence`（而访问该字段的权限是`user_online_presence`）。

# java - 将浮点数组保存到 sdcard (java)

> ID：11656987
> 
> 赞同：0
> 
> 时间：2012-07-25T19:18:52.300
> 
> 标签：java, android, sd-card

我想将一组浮点数（可以说大约有 5000 个浮点数）存储到我的 sdcard 中。稍后我想将我的浮点文件放在我的资源应用程序上，以便新应用程序可以使用这些浮点数进行以后的处理。我可以这样做吗？？有什么我可以用来这样做的例子吗？最好使用哪个文件扩展名？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:39:24.043

我对 Android 不是很熟悉，但是从 Java 的角度来看，你使用序列化和 ObjectOuputStream / ObjectInputStream 有意义吗？听起来这完全符合您的要求。一些相关的讨论可以在这里找到：

[如何在java中序列化列表？](https://stackoverflow.com/questions/1387954/how-to-serialize-a-list-in-java)

[http://www.jguru.com/faq/view.jsp?EID=34789](http://www.jguru.com/faq/view.jsp?EID=34789)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:15:23.570

首先，您需要向您的 AndroidManifest.xml 文件添加适当的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

您还需要检查（在运行时）运行您的应用程序的设备是否有可用的外部存储：

```
String state = Environment.getExternalStorageState();
if(Environment.MEDIA_MOUNTED.equals(state))
{

  // Read / Write Access
  externalStorageAvailable = true;
  externalStorageWriteable = true;

}
else if(Environment.MEDIA_MOUNTED_READ_ONLY.equals(state))
{

  // Read Access
  externalStorageAvailable = true;
  externalStorageWriteable = false;

}
else
{

  // We cannot read / write
  externalStorageAvailable = false;
  externalStorageWriteable = false;

} 
```

最后，您可以通过执行以下操作来编写文件...

```
FileOutputStream fileStream = null;
PrintStream printStream = null;
File file = new File(FILE_NAME);

try
{

  fileStream = new FileOutputStream(file);
  printStream = new PrintStream(fileStream);

  for (int i = 0; i < FLOAT_ARRAY_SIZE; i++)
  {

    printStream.print(FLOAT_DATA[i]);
    printStream.println();

  }

}
catch(Exception e)
{

  e.printStackTrace();

}
finally
{

  if(printStream != null)
  {

    printStream.close();

  }

} 
```

如前所述，“.bin”或“.dat”扩展名是可以的。

# c++ - 在下面的示例中，是否有更简单的方法来访问成员函数 GetJ()？

> ID：11656996
> 
> 赞同：0
> 
> 时间：2012-07-25T19:19:34.910
> 
> 标签：c++, c++11, derived-class, unique-ptr

除了下面第二个中选择的方法之外，还有一种更简单的方法可以访问类`GetJ()`中的成员函数吗？`Derived``std::cout`

```
#include <iostream>
#include <memory>

class Base
{
    int i;

    public:

    Base(int k) : i(k) {}
    int GetI() { return i; }
};

class Derived : public Base
{
    int j;

    public:
    Derived(int u) : Base(10) { j = u; }
    int GetJ() { return j; }    
};

int main()
{
    std::unique_ptr<Base> uptr(new Derived(5));
    std::cout << uptr->GetI() << std::endl;
    std::cout << static_cast<Derived*>(uptr.get())->GetJ() << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:20:43.243

我相信 GetI 和 GetJ 属于两个不同的类，尽管它们`Derived`是从`Base`. 现在的问题取决于如何访问它。

```
Derived* p = new Derived(5));
std::cout << p->GetI() << std::endl;
std::cout << p->GetJ() << std::endl; 
```

上面的代码应该可以正常工作，因为您是从这些地方派生的。

但如果你真的想合作

```
Derived* p = new Derived(5));
Base* pBase  = p;
std::cout << pBase->GetI() << std::endl;
std::cout << p->GetJ() << std::endl; 
```

上述方法只是因为功能不是`virtual`。但是，如果您将函数声明为虚拟函数，则您真的不必为向上转换和向下转换而烦恼。基指针本身足以为您工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:38:52.833

# 对于以前版本的问题：

首先，这样做*绝对*`reinterpret_cast`是错误的方法。试试这个：

 *```
struct A
{
    char x[10]; 
    A():x{9}{}

};

class Derived : public A, public Base
{
// your code here   
}; 
```

而不是你的`Derived`定义。

`static_cast`在这里工作正常。

# 到现在的状态：

但是*通常*当您要通过指向类`Derived`的指针来使用功能时`Base`，您需要虚函数：

```
class Base
{
    //....
    virtual int GetJ() const = 0;
    // or virtual int GetJ() const { return -1;} if Base should be created itself.

    virtual ~Base(){} //oh, and don't forget virtual destructor!
};

class Derived: public Base
{
    //...
    virtual int GetJ() const { return j; }
} 
```*

# etl - 如何使用 Talend 发送动态 URL 链接

> ID：11656998
> 
> 赞同：0
> 
> 时间：2012-07-25T19:19:42.920
> 
> 标签：etl, talend

我正在尝试使用 Talend 按纬度和经度获取天气数据。我正在检索所有适用的纬度和经度值，然后我需要遍历这些值并创建包含纬度和经度的 URL。我试图使用 tFileFetch 来检索响应，但我看不到任何方法来传递纬度和经度的变量。有谁知道我应该使用其他组件吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T04:43:09.290

我不确定我是否理解您的问题，但我会尝试。

在 tFileFetch 组件的 URI 字段中，您可以将前一个组件的输出添加为 lat long，例如：

"http://www.weather.com/weather/right-now?lat=" + lat + "&long=" + long

如果我完全不在，请提供有关您要查找的内容的更多详细信息。

您还可以使用 tRest 组件来检索响应。