# StackOverflow 问答 12305000-12305999

# forms - 未设置 POST 数据？Codeigniter 解决方案

> ID：12305000
> 
> 赞同：0
> 
> 时间：2012-09-06T17:04:51.927
> 
> 标签：forms, codeigniter, post

我想我在某个地方有一个简单的错误，但我看不到它！在我看来，我有以下 javascript 来创建表单：

```
 $.ajax({
    url:"<?php echo site_url('mycontroller/methodX/'.$ip.'/'.$hardwaremodel);?>",
    type:'POST',
    dataType:'json',
    success: function(returnDataFromController) {
    var htmlstring;
    var submitFormHTML;
    htmlstring = "<br><br><B>To reassign the port to a new vlan, click on a VlanId below and then click on the OK button</B><br><table class='table table-bordered table-striped'>";
    htmlstring = htmlstring + "<th>VlanId</th><th>Name</th>";
    for(i = 0; i < returnDataFromController.length; i++) {

    }
    submitFormHTML = "<form method='post' accept-charset='utf-8' action='/myapp/index.php/controllerABC/methodABC/"+ $('#ip').val() +"/" + $('#hardwaremodel').val() +"/" + $('#port').val() + "'><input type='text' id='newVlanID' style='width:5em;height:1.5em'/>&nbsp;&nbsp;<button type='submit' class='btn' id='saveVlan' style='width:10em;height:2em'>Reassign Vlan</button></form>";
    //alert(submitFormHTML);
    $('#clientajaxcontainer').html(htmlstring);
    $('#newvlanform').html(submitFormHTML); 
```

它是构建表单的“submitFormHTML”字符串。

在我的控制器中，我有以下逻辑来检查输入： public function methodABC() {

```
 if($_POST){
         echo 'I am here';
         $form = $this->input->post();
         var_dump($form);
         exit();
     }
     else {
         echo "false";
     } 
```

它总是打印“假”。我也尝试过使用：

```
print_r($this->input->post()); 
```

和

```
 echo $this->input->post('newID'); 
```

但我似乎无法将数据从我的视图中获取到控制器中。你能看出我哪里错了吗？谢谢您的帮助。

**编辑：**

呈现页面时，会为表单创建以下 HTML：

```
<form method="post" action="/myapp/index.php/switches/changeportvlan/11.11.11.11 /">
<input type='text' id='newVlanID' style='width:5em;height:1.5em'/>&nbsp;&nbsp;
<button type="submit" class='btn' id='saveVlan' style='width:10em;height:2em'>Reassign Vlan</button>
</form>" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T20:18:38.077

问题是文本框缺少“名称”属性。“身份证”还不够！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:08:08.087

你需要

```
if ($this->input->post(Null, False)) {
   echo "I am here";
   $form = $this->input->post(Null, True); ## True for XSS-cleaning, which you probably want.
   exit();
}
else {
   echo "False";
} 
```

你必须给出`$this->input->post()`论据。此外，永远不要`$_POST`在 CodeIgniter 中使用。

祝你好运

# c++ - 通过模板化引用传递 C++11 lambda

> ID：12305003
> 
> 赞同：4
> 
> 时间：2012-09-06T17:05:07.263
> 
> 标签：c++, lambda, c++11

在 gcc 4.5 中，以下代码编译并按预期工作`-std=c++0x`，

```
#include <stdio.h>

template<typename H>
void caller(H h)
{
    h();
}

int main()
{
    auto c = [](){ printf("A\n"); };
    caller(c);
    caller([](){ printf("B\n"); });
    return 0;
} 
```

印刷，

```
A
B 
```

但是，如果`caller`定义为引用，

```
template<typename H>
void caller(H &h)
{
    h();
} 
```

编译器抱怨，

```
test.cpp: In function ‘int main()’:
test.cpp:61:34: error: no matching function for call to ‘caller(main()::<lambda()>)’
test.cpp:52:6: note: candidate is: void caller(H&) [with H = main()::<lambda()>] 
```

为什么？

这似乎打破了 lambda 为函数提供值语义的想法，但此外这意味着我不能内联编写某些小函数，这有点烦人。

（这在较新版本的 gcc 中是否已修复？我还没有机会测试。）

编辑：我刚刚发现以下实际上有效：

```
template<typename H>
void caller(H *h)
{
    (*h)();
}

int main()
{
    auto c = [](){ printf("A\n"); };
    caller(&c);
    caller(&([](){ printf("B\n"); }));
} 
```

我没想到我能拿这样一个临时的地址。也许这样可以解决问题，尽管要求函数的用户传入闭包的地址而不是方便的引用很烦人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T17:08:37.517

您正在尝试通过非常量引用传递一个临时值。这对任何类型都不起作用。

改为通过 const 引用传递 lambda。

# jquery - 一个表单的 jQuery 按键事件，它是一个 ajax 调用的结果

> ID：12305004
> 
> 赞同：0
> 
> 时间：2012-09-06T17:05:08.883
> 
> 标签：jquery, events, keypress

单击我页面中的链接会提交 ajax 请求并在模式对话框窗口中加载响应。该响应包含一个 ID 为“ModalForm”的表单。我想要实现的是阻止此特定表单的“Enter”键的默认表单行为，并将其替换为执行我编写的 JS 函数。不幸的是，我无法让它工作，也无法收到警报消息。这是我的代码：

```
jQuery(function (){
    jQuery('#ModalForm').keypress(function(e){
        alert(e.keyCode);
        if (e.keyCode == 13) {
            modalWindowSubmit();
        }
    });

    jQuery('#ModalForm').on('keypress', (function() {
        alert('hi');
    });

}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:07:31.130

您必须在 ajax 调用的“成功”中绑定表单上的事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:19:01.420

您必须使用 KeyUp - 按键时不知道键码

```
 jQuery(function (){
   jQuery('#ModalForm').keyup(function(e){
    alert(e.keyCode);
    if (e.keyCode == 13) {
        modalWindowSubmit();
    }
}); 
```

或者

```
 jQuery(document).on('keyup', '#ModalForm', (function(e) {
    alert(e.KeyCode);
  }); 
```

.on 通常用于在动态创建元素时将元素绑定到事件，如果不是这种情况，第一个选项将正常工作

# windows-8 - how to get nearest positions

> ID：12305013
> 
> 赞同：0
> 
> 时间：2012-09-06T17:05:38.713
> 
> 标签：windows-8, windows-runtime, bing-maps

I'm developing app with geolocalization. I want to display on my map (for example) stores that are nearest of my current position. I have lati and longitude saved for each store in my db and I have current position of user. Now I want to get from db nearest positions from me in arial of my zoom.

I don't want to pick them all cause if I'll have 10000 positions adding them to db (like also getting them from db) will be long and cpu consuming. Thats why I want to pick only those that can be displayed on map.

Map is centered on my current position. How to get them ? How to count this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:31:42.450

[您可以使用Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)计算任意两点经纬度之间的距离。您可以构建一个存储过程（甚至是[CLR 存储过程](http://msdn.microsoft.com/en-us/library/ms131094.aspx)），它获取当前位置和距离并计算该区域内的所有点。

# ruby - Is there something wrong with this date comparison logic in ruby?

> ID：12305016
> 
> 赞同：1
> 
> 时间：2012-09-06T17:05:46.950
> 
> 标签：ruby, ruby-on-rails-3

I have a policy class and in that class I have 2 methods which determin whether or not a customer can renew their policy.

They look like this: (in the policy.rb model)

```
 def is_renewable?
    if has_not_been_renewed?
       self.ends_on >= Date.today && self.ends_on <= Date.today + 60.days
    end
  end

  def has_not_been_renewed?
    been_renewed = self.renewed_policy.nil? || !self.renewed_policy.active? || !self.active?
  end 
```

So for some reason this is working on my local machine but not in our staging enviroment. (I know right, the bane of every programmer "But it works on my machine!").

The logic seems simple: first check to make sure it hasn't been renewed already or that they have a different active policy. Then check to make sure it hasn't already expired and that it will expire sometime in the next 60 days.

This is called from this line in the view:

```
<%= link_to('Renew', {:action => 'renew', :id => policy.id}, {:class => 'btn btn-success'}) if policy.is_renewable? %> 
```

I am really failing to see why this wouldn't work anywhere. I wouldn't ask but I have been looking at this stupid problem all day and need a new set of eyes to look it over. Thanks

Incase this helps, the format for both database's (local and staging) is in the form: `yyyy-mm-dd` so today's date would be `2012-09-06`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:13:21.323

假设您在暂存数据库中没有数据完整性问题（例如未设置ends_on，您认为没有设置时应该更新策略），您可能需要检查系统时钟并确保它是既准确又使用您期望的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:11:20.490

数据库的策略（并且数据库在您的登台和开发环境中有所不同）？在某些情况下，您应该以更易于数据库理解的格式格式化日期，例如 Time.now.to_s(:db)

# c++ - Efficient representation of edges in a C++ graph structure

> ID：12305018
> 
> 赞同：5
> 
> 时间：2012-09-06T17:05:55.887
> 
> 标签：c++, data-structures, graph

I am planning on representing a fairly large, sparse, undirected graph structure in C++. This will be of the order of 10,000+ vertices, with each vertex having a degree of around 10.

I have read some [background](http://www.algolist.net/Data_structures/Graph/Internal_representation) on representing graphs as adjaciency matrices or lists, but neighther of them seem suitable for what I want to do. In my scenario:

*   Each edge in the graph will have some properties (numeric values) attached
*   After the initial graph creation, edges can be deleted, but never created
*   Vertices will never be created or deleted
*   The main query operation on the graph will be a lookup, for an edge E, as to which other edges are connected to it. This is equivalent to finding the edges connected to the vertices at each end of E.

It is this final point which makes the adjacency matrix seem unsuitable. As far as I can see, each query would require 2*N operations, where N is the number of nodes in the graph.

I believe that the adjacency list would reduce the required operations, but seems unsuitable because of the parameters I am including with each edge - i.e. because the adjacency list stores each

Is there a better way to store my data such that these query operations will be quicker, and I can store each edge with its parameters? I don't want to start implementing something which isn't the right way to do it.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T17:34:30.457

在这里，我认为通常的面向对象方法没有问题。让您的`Edge<V,E>`和`Vertex<V,E>`类型`V`顶点存储的内容在哪里`E`，边存储的内容在哪里。每条边都有两个对其各自顶点的引用和两个索引，它们表示在各自顶点的哪个槽中查找该边：

```
template <typename V, typename E>
class Edge {
  struct Incidence {
    size_t index;
    Vertex<V,E>& v;
  };
  std::array<Incidence,2> vertices;
  E content;
};

template <typename V, typename E>
class Vertex {
  std::vector<Edge<V,E>*> edges;
}; 
```

如果删除一条边`e`，`Vertex<V,E>::edges`则将 的位置移动`back`到 的上一个位置`e`。恒定时间去除。将所有相邻边枚举到特定边的线性时间（在操作结果的大小中）。听起来不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:23:02.077

这样的事情看起来可信吗？这存储边缘邻接：

```
#include <vector>
#include <map>

typedef int vertex;

struct edge
{
    vertex a,b;
    // other data
};

bool operator< (const edge &a, const edge &b)
{
    unsigned long long ahash = a.a;
    ahash << 32;
    ahash |= a.b;
    unsigned long long bhash = b.a;
    bhash << 32;
    bhash |= b.b;
    return ahash < bhash;
}

// support for your query operation
typedef std::map<edge, std::vector<edge &> > edge_adjacency; 
```

看起来你有点想将边缘映射到顶点，然后使用一些非常标准的东西。

# objective-c - 为什么在使用 Storyboard 时我的实例变量为零？

> ID：12305019
> 
> 赞同：0
> 
> 时间：2012-09-06T17:05:59.067
> 
> 标签：objective-c, xcode, storyboard

我正在尝试让 LazyTableImages 与 Storyboards 和 ARC 一起使用。我的项目编译并显示“正在加载...”和 Placeholder.png 图像。我的日志显示解析器正在检索大部分数据（艺术家、应用程序名称），但缩略图图像有问题（错误 URL）。最大的问题似乎在这里（nodeCount 的 NSLog 始终为零）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSLog(@"RootViewController - tableView cellForRowAtIndexPath");

    // customize the appearance of table view cells
    static NSString *CellIdentifier = @"Cell";
    static NSString *PlaceholderCellIdentifier = @"PlaceholderCell";

    // add a placeholder cell while waiting on table data
    int nodeCount = [self.entries count];

    NSLog(@"RootViewController - nodeCount is %d",nodeCount);

    if (nodeCount == 0 && indexPath.row == 0)
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:PlaceholderCellIdentifier];
        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle                             
                                          reuseIdentifier:PlaceholderCellIdentifier];   
            cell.detailTextLabel.textAlignment = UITextAlignmentCenter;
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }

        cell.detailTextLabel.text = @"Loading…";
        return cell;
    }

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle                                    
                                      reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    NSLog(@"RootViewController - nodeCount2 is %d",nodeCount);

    // Leave cells empty if there's no data yet
    if (nodeCount > 0)
    {
        NSLog(@"RootViewController - nodeCount3 is %d",nodeCount); //this one never gets displayed

        // Set up the cell...
        AppRecord *appRecord = [self.entries objectAtIndex:indexPath.row];

        cell.textLabel.text = appRecord.appName;
        cell.detailTextLabel.text = appRecord.artist;

        // Only load cached images; defer new downloads until scrolling ends
        if (!appRecord.appIcon)
        {
            if (self.tableView.dragging == NO && self.tableView.decelerating == NO)
            {
                [self startIconDownload:appRecord forIndexPath:indexPath];
            }
            // if a download is deferred or in progress, return a placeholder image
            cell.imageView.image = [UIImage imageNamed:@"Placeholder.png"];                
        }
        else
        {
            cell.imageView.image = appRecord.appIcon;
        }

        NSLog(@"RootViewController - nodeCount4 is %d",nodeCount);
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:44:08.623

问题是因为用于设置 RootViewController 的 AppDelegate 方法在使用 NIB 和 Storyboard 之间是不同的......因此它没有得到分配。将以下内容添加到 applicationDidLaunch 解决了它：

```
rootViewController = [[RootViewController alloc] init]; 
self.window.rootViewController = self.rootViewController; 
[window addSubview:rootViewController.view]; 
[window makeKeyAndVisible]; 
```

在这些条目被分配给 RootViewController 之后，如下所示：

```
self.appRecords = [NSMutableArray array]; 
rootViewController.entries = self.appRecords; 
```

...所以如果 rootViewController 不存在，条目就不能存在...

# python - Efficient way to normalize a Scipy Sparse Matrix

> ID：12305021
> 
> 赞同：30
> 
> 时间：2012-09-06T17:06:03.517
> 
> 标签：python, numpy, scipy, sparse-matrix

I'd like to write a function that normalizes the rows of a large sparse matrix (such that they sum to one).

```
from pylab import *
import scipy.sparse as sp

def normalize(W):
    z = W.sum(0)
    z[z < 1e-6] = 1e-6
    return W / z[None,:]

w = (rand(10,10)<0.1)*rand(10,10)
w = sp.csr_matrix(w)
w = normalize(w) 
```

However this gives the following exception:

```
File "/usr/lib/python2.6/dist-packages/scipy/sparse/base.py", line 325, in __div__
     return self.__truediv__(other)
File "/usr/lib/python2.6/dist-packages/scipy/sparse/compressed.py", line 230, in  __truediv__
   raise NotImplementedError 
```

Are there any reasonably simple solutions? I have looked at [this](https://stackoverflow.com/questions/10475457/iterating-over-scipy-sparse-matrix-by-column), but am still unclear on how to actually do the division.

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-12T22:20:02.580

这已在[scikit-learn sklearn.preprocessing.normalize](http://scikit-learn.org/dev/modules/generated/sklearn.preprocessing.normalize.html#sklearn.preprocessing.normalize)中实现。

```
from sklearn.preprocessing import normalize
w_normalized = normalize(w, norm='l1', axis=1) 
```

`axis=1`应该按行`axis=0`归一化，按列归一化。使用可选参数`copy=False`来修改矩阵。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-22T10:45:30.930

虽然 Aarons 的回答是正确的，但当我想对*绝对值*的最大值进行归一化时，我实现了一个解决方案，而 sklearn 没有提供。我的方法使用非零条目并在 csr_matrix.data 数组中找到它们以快速替换那里的值。

```
def normalize_sparse(csr_matrix):
    nonzero_rows = csr_matrix.nonzero()[0]
    for idx in np.unique(nonzero_rows):
        data_idx = np.where(nonzero_rows==idx)[0]
        abs_max = np.max(np.abs(csr_matrix.data[data_idx]))
        if abs_max != 0:
            csr_matrix.data[data_idx] = 1./abs_max * csr_matrix.data[data_idx] 
```

与 sunan 的解决方案相比，这种方法不需要将矩阵转换为密集格式（这可能会引发内存问题），也不需要矩阵乘法。我在一个稀疏的形状矩阵 (35'000, 486'000) 上测试了该方法，大约需要 18 秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T11:07:04.223

这是我的解决方案。

*   转置A
*   计算每列的总和
*   用总和的倒数格式化对角矩阵 B
*   A*B 等于归一化
*   转置 C

    ```
    import scipy.sparse as sp
    import numpy as np
    import math

    minf = 0.0001

    A = sp.lil_matrix((5,5))
    b = np.arange(0,5)
    A.setdiag(b[:-1], k=1)
    A.setdiag(b)
    print A.todense()
    A = A.T
    print A.todense()

    sum_of_col = A.sum(0).tolist()
    print sum_of_col
    c = []
    for i in sum_of_col:
        for j in i:
            if math.fabs(j)<minf:
                c.append(0)
            else:
                c.append(1/j)

    print c

    B = sp.lil_matrix((5,5))
    B.setdiag(c)
    print B.todense()

    C = A*B
    print C.todense()
    C = C.T
    print C.todense() 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-16T23:04:06.137

我发现这是一种不使用内置函数的优雅方式。

```
import scipy.sparse as sp

def normalize(W):
    #Find the row scalars as a Matrix_(n,1)
    rowSumW = sp.csr_matrix(W.sum(axis=1))
    rowSumW.data = 1/rowSumW.data

    #Find the diagonal matrix to scale the rows
    rowSumW = rowSumW.transpose()
    scaling_matrix = sp.diags(rowSumW.toarray()[0])

    return scaling_matrix.dot(W) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-02T13:15:51.370

在不导入 sklearn 的情况下，转换为密集或乘法矩阵并利用 csr 矩阵的数据表示：

```
from scipy.sparse import isspmatrix_csr

def normalize(W):
    """ row normalize scipy sparse csr matrices inplace.
    """
    if not isspmatrix_csr(W):
        raise ValueError('W must be in CSR format.')
    else:
        for i in range(W.shape[0]):
            row_sum = W.data[W.indptr[i]:W.indptr[i+1]].sum()
            if row_sum != 0:
                W.data[W.indptr[i]:W.indptr[i+1]] /= row_sum 
```

[请记住](https://scipy-lectures.org/advanced/scipy_sparse/csr_matrix.html)，这`W.indices`是列索引 `W.data`的数组，是对应的非零值的数组，并且`W.indptr`指向索引和数据中开始的行。

`numpy.abs()`如果您需要 L1 范数或用于`numpy.max()`按每行的最大值进行归一化，您可以在求和时添加 a 。

# django - 摆脱 Django 视图中的全局变量？

> ID：12305023
> 
> 赞同：2
> 
> 时间：2012-09-06T17:06:11.357
> 
> 标签：django, django-views

我创建了一个依赖于全局变量的 Django 应用程序。它实际上是一种存储库对象，应该对我的 view.py 中的所有函数都可用。

正如将在代码中看到的，每个视图函数都会修改 rp 全局变量。

视图.py

```
def index(request):
    global rp
    rp = repo.Repo()
    ...
    rp.function1()
    rp.function2()
    rp.attribute1 = value

    return render_to_response('result_pick.html',{'result_list': rp.parsed_output_data, 'input_file_name': rp.input_file_name }, context_instance = RequestContext(request))

def result(request):
    global rp
    rp.function3()
    local_atribute = rp.attribute1
    ....
    return render_to_response('result_show.html' ,{'rp':rp}, context_instance = RequestContext(request)) 
```

浏览了一下后，我的印象是，当多个用户访问该网页时，这将失败，因为他们将共享全局 rp，这会导致问题。

摆脱全局变量但仍然能够在两个函数中访问 rp 的首选解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:09:18.237

使用[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)框架；它在请求之间（因此，在您的视图方法之间）保留对象。

设置好后，它很简单：

```
def a_method(request):
   shared_obj = request.session.get('myobj',{}) # set dict as default
   shared_obj['key'] = 'val'
   request.session['myobj'] = shared_obj
   # your normal code
   return render(request,'sometemplate.html') # no need to pass 'shared_obj'

def b_method(request):
    shared_obj = request.session.get('myobj',{})
    if not shared_obj:
       # session was terminated, so initialize this object
       shared_obj['key'] = 'value'
     else:
       the_value = shared_obj['key']
       # or, use the below to set a default value for 'key' if it doesn't exist
       the_value = shared_obj.get('key','default')
     # etc. 
```

# php - jquery load function ignoring dynamic changes

> ID：12305024
> 
> 赞同：0
> 
> 时间：2012-09-06T17:06:17.107
> 
> 标签：php, jquery

I am using jQuery's `load` function on a page to get the contents of a webpage and then print it. Here is my code:

```
$('#container').load('<?php print $_GET['load']; ?>', function(data) {

    window.print();
}); 
```

where the variable 'load' is the url.

The problem is that the page being loaded has a javascript designed filter attached it, meaning, on that page the user can click buttons to remove or display certain information e.g. `{ display: none }`.

However the items which are hidden by the user DO show up in this new page. I understand why this is so, the JavaScript isn't changing the base HTML of the page and it's still there, but I would like to find a way around this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:29:07.210

因此，当 #container 用新内容刷新时，所有旧的 DOM 元素（HTML 的内部版本）都会被销毁并替换 - 因此它会丢失 display: none 属性。

解决此问题的一种方法是执行以下操作：

```
<div id='container'>
  <div class="a">Stuff 1</div>
  <div class="b">Stuff 2</div>
  <div class="c">Stuff 3</div>
</div>

<input type="button" class="hide_something" data-hide-class="a" value="Hide A">
<input type="button" class="hide_something" data-hide-class="b" value="Hide B">
<input type="button" class="hide_something" data-hide-class="c" value="Hide C">

$('.hide_something').on("click", function() { 
  $('#container').addClass('hide_' + $(this).data("hide-class")); 
}​);

.hide_a .a,
.hide_b .b,
.hide_c .c { display: none; } 
```

这是一个小提琴：http: [//jsfiddle.net/2Qkjn/](http://jsfiddle.net/2Qkjn/)

所以基本上，当用户点击一个按钮时，它会向外部容器添加一个类，CSS 会导致隐藏内部内容。替换内部内容不会改变 CSS 规则。

另一种方法是将状态存储在 JS 中，然后在 DOM 重新加载时刷新它们。

# java - Java - What is the best way to find first duplicate character in a string

> ID：12305028
> 
> 赞同：6
> 
> 时间：2012-09-06T17:06:21.170
> 
> 标签：java, algorithm

I have written below code for detecting first duplicate character in a string.

```
public static int detectDuplicate(String source) {
    boolean found = false;
    int index = -1;
    final long start = System.currentTimeMillis();
    final int length = source.length();
    for(int outerIndex = 0; outerIndex < length && !found; outerIndex++) {
        boolean shiftPointer = false;
        for(int innerIndex = outerIndex + 1; innerIndex < length && !shiftPointer; innerIndex++ ) {
            if ( source.charAt(outerIndex) == source.charAt(innerIndex)) {
                found = true;
                index = outerIndex;
            } else {
                shiftPointer = true;
            }
        }
    }
    System.out.println("Time taken --> " + (System.currentTimeMillis() - start) + " ms. for string of length --> " + source.length());
    return index;
} 
```

I need help on two things:

*   What is the worst case complexity of this algorithm? - my understanding is O(n).
*   Is it the best way to do this? Can somebody provide a better solution (if any)?

Thanks, NN

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T17:14:54.383

正如其他人所提到的，您的算法是 O(n^2)。这是一个 O(N) 算法，因为 HashSet#add 在恒定时间内运行（散列函数将元素正确地分散在桶中） - 请注意，我最初将散列集大小设置为最大大小以避免调整大小/重新散列：

```
public static int findDuplicate(String s) {
    char[] chars = s.toCharArray();
    Set<Character> uniqueChars = new HashSet<Character> (chars.length, 1);
    for (int i = 0; i < chars.length; i++) {
        if (!uniqueChars.add(chars[i])) return i;
    }
    return -1;
} 
```

注意：这将返回第一个重复的索引（即，与前一个字符重复的第一个字符的索引）。要返回该字符第一次出现的索引，您需要将索引存储在 a `Map<Character, Integer>`（`Map#put`在这种情况下也是 O(1)）：

```
public static int findDuplicate(String s) {
    char[] chars = s.toCharArray();
    Map<Character, Integer> uniqueChars = new HashMap<Character, Integer> (chars.length, 1);
    for (int i = 0; i < chars.length; i++) {
        Integer previousIndex = uniqueChars.put(chars[i], i);
        if (previousIndex != null) {
            return previousIndex;
        }
    }
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:11:42.220

这是 O(n**2)，而不是 O(n)。考虑案例`abcdefghijklmnopqrstuvwxyzz`。`outerIndex`程序终止前的范围为 0 到 25，每次递增时，`innerIndex`范围为`outerIndex`到 26。

要达到 O(n)，您需要对列表进行一次遍历，并在每个位置进行 O(1) 工作。由于在每个位置要做的工作是检查角色之前是否见过（如果是，在哪里），这意味着你需要一个 O(1) 的地图实现。哈希表为您提供；由字符代码索引的数组也是如此。

assylias[展示了如何使用 hashing 来做到这一点](https://stackoverflow.com/a/12305150/116639)，所以这里是如何使用数组来做到这一点（只是为了笑，真的）：

```
public static int detectDuplicate(String source) {
    int[] firstOccurrence = new int[1 << Character.SIZE];
    Arrays.fill(firstOccurrence, -1);
    for (int i = 0; i < source.length(); i++) {
        char ch = source.charAt(i);
        if (firstOccurrence[ch] != -1) return firstOccurrence[ch];
        else firstOccurrence[ch] = i;
    }
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:12:12.140

复杂度大致为`O(M^2)`，其中`M`是字符串长度和可能字符集大小之间的最小值`K`。

你可以通过简单`O(M)`地`O(K)`记住你第一次遇到每个独特角色的位置来记住它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:33:55.877

我可以大大改进你的算法。应该这样做：

```
StringBuffer source ...
char charLast = source.charAt( source.len()-1 );
int xLastChar = source.len()-1;
source.setCharAt( xLastChar, source.charAt( xLastChar - 1 ) );
int i = 1;
while( true ){
    if( source.charAt(i) == source.charAt(i-1) ) break;
    i += 1;
}
source.setCharAt( xLastChar, charLast );
if( i == xLastChar && source.charAt( xLastChar-1 ) != charLast ) return -1;
return i; 
```

对于大字符串，此算法的速度可能是您的两倍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T04:01:29.990

好的，我发现下面的逻辑可以减少`O(N^2)`到`O(N)`.

```
public static int detectDuplicate(String source) {
    int index = -1;
    boolean found = false;
    final long start = System.currentTimeMillis();

    for(int i = 1; i <= source.length() && !found; i++) {
        if(source.charAt(i) == source.charAt(i-1)) {
            index = (i - 1);
            found = true;
        }
    }

    System.out.println("Time taken --> " + (System.currentTimeMillis() - start) + " ms. for string of length --> " + source.length());
    return index;
} 
```

这也显示了与我以前的算法相比的性能改进，该算法具有 2 个嵌套循环。这需要从末尾存在重复`130ms.`字符的字符中检测第一个重复字符。`63million`

我不确定这是否是最好的解决方案。如果有人找到更好的，请分享。

谢谢，

神经网络

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-23T20:25:49.020

您可以尝试：

```
 public static char firstRecurringChar(String s)
    {
    char x=' ';
    System.out.println("STRING : "+s);
    for(int i =0;i<s.length();i++)
    {
        System.out.println("CHAR AT "+i+" = " +s.charAt(i));
        System.out.println("Last index of CHAR AT "+i+" = " +s.lastIndexOf(s.charAt(i)));
        if(s.lastIndexOf(s.charAt(i)) >i){
            x=s.charAt(i);
            break;
        }
    }
    return x;
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-06T17:11:09.567

**`O(1)`算法**

由于两个嵌套循环，您的解决方案是 O(n^2)。

最快的算法是`O(1)`（恒定时间）：

```
public static int detectDuplicate(String source) {
    boolean[] foundChars = new boolean[Character.MAX_VALUE+1];
    for(int i = 0; i < source.length(); i++) {
        if(i >= Character.MAX_VALUE) return Character.MAX_VALUE;
        char currentChar = source.charAt(i);
        if(foundChars[currentChar]) return i;
        foundChars[currentChar] = true;
    }
    return -1;
} 
```

不过，这只是对大快而言哦。

# android - 服务内存使用取决于什么？

> ID：12305031
> 
> 赞同：0
> 
> 时间：2012-09-06T17:06:35.227
> 
> 标签：android

我创建了一个服务，查看正在运行的服务，我发现它需要 15MB 内存！作为一个整体简单的服务，它对我来说似乎真的很奇怪，所以我想知道在哪里看，以便发现为什么要占用这么多内存（请注意，我只是在谈论服务，我确保关闭活动）

服务的任务是定期下载 rss 提要并在出现新文章时更新 sqllite 数据库。由于需要互联网连接，因此服务也使用了网络侦听器。这些是属性：

```
private Timer timer;
private MyDbHelper db;
private NetworkChangesReceiver networkListener; //a broadcast receiver for network state
private NotificationManager notifyManager;
private final NewsServiceB binder = new NewsServiceB();
private SharedPreferences prefs; 
```

这是活页夹类（在主要活动中，我有一个“立即检查”按钮，所以我需要一个可绑定的服务）：

```
class NewsServiceB extends Binder{
public void downloadRss() throws IOException{
   ... 
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:39:54.620

您需要的是一个内存分析工具，它可以向您展示什么占用了内存。看看这篇来自 Google 的关于[Android 内存分析的](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)文章。特别要仔细查看关于[MAT](http://www.eclipse.org/mat/)的部分。

# java - SVN 错误：org.tigris.subversion.javahl.ClientException：所有目标都是同一个工作副本的一部分吗？

> ID：12305033
> 
> 赞同：0
> 
> 时间：2012-09-06T17:06:42.660
> 
> 标签：java, svn, netbeans, netbeans-7

尝试使用 Netbeans 7.1.2 提交（Subversion 插件版本：1.19.5.42.1）我收到此错误：

org.tigris.subversion.javahl.ClientException：所有目标都是同一个工作副本的一部分吗？无法锁定“我的 Java 包之一的路径”。

任何想法如何解决它？

# jquery - 调用jquery函数onclick事件

> ID：12305035
> 
> 赞同：2
> 
> 时间：2012-09-06T17:06:54.717
> 
> 标签：jquery

可能是初学者 jquery 问题......这是我的问题：

我已经动态创建了 div 元素列表。每个都有其特定的内容、ID 和角落中的切换图标。当我按下切换图标时，它会导致以下内容：展开/隐藏 div 的内容并更改图标。

我最初的想法是调用 2 个类似这样的自定义 jquery 函数（数字由 PHP 动态插入）：

```
<div id="div152" >
  <div id="content152">some content</div>
  <a id="toggle-icon152" href="javascript:void(0);" onclick="togglemydiv(content152); changeicon(icon152)">
    <div id="icon152">someicon</div>
  </a>
</div> 
```

现在这在某些浏览器中有效，但显然它不应该这样做，因为它在 Windows 或小提琴中的 FF 中不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:15:52.587

我建议你不要将你的 id 硬编码到 js 中。

这是一个如何更简单的建议：

html:

```
<div id="div152" >
  <div id="content152">some content</div>
  <a id="toggle-icon152" data-bind-action="toggle-content" href="#">
    <div id="icon152">someicon</div>
  </a>
</div>​ 
```

js：

```
$("a[data-bind-action='toggle-content']").click(toggleContent);

function toggleContent(){
    var a = $(this);
    var div = a.prev();
    div.toggle();
    e.preventDefault();
    return false;
} 
```

看看它在[jsfiddle](http://jsfiddle.net/PrmX5/3/)上是如何工作的。

这是不假定您的内容是 a 的 prev 元素的版本，但是您向链接添加属性，以便它知道要切换的内容：http: [//jsfiddle.net/PrmX5/4/](http://jsfiddle.net/PrmX5/4/)

我添加了 html5 数据属性来识别需要从 js 附加切换功能的锚点，当然，您可以使用类或其他（更快？）jQuery 选择器来执行此操作。

正如@coosal 在其回答中所说，如果 div 是动态生成的（ajax 或在客户端上），您需要使用`live`而不是绑定 document.ready，所以这里是使用 live 的版本：http: [//jsfiddle.net/PrmX5/ 5/](http://jsfiddle.net/PrmX5/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T17:12:37.823

我建议使用外部脚本而不是内联 JS

```
$('#toggle-icon152').on('click', function(e){ 
   $('#content152').toggle();  // or do something else
   e.preventDefault();
} 
```

参考[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:17:12.567

由于`divs`是动态生成的，我们需要 live() 函数来触发任何事件。. 检查jquery 的[live()函数](http://api.jquery.com/live/)

```
jQuery("#toggle-icon152").live("click",function(){
togglemydiv("content152");
changeicon("icon152");
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T17:18:57.733

假设您已经在某处编写了 togglemydiv 并且它需要一个 id 作为其参数，您需要将 'content152' 放在引号中 - 否则它会尝试将一个不存在的对象传递到您的函数中（它可能正在通过作为类型未定义）

正如上面的 alex 建议的那样，您应该将您的 javascript 与您的 HTML 标记分开——这是最佳实践。

# javascript - .Net webApi ISO 日期时间和 IE8

> ID：12305039
> 
> 赞同：6
> 
> 时间：2012-09-06T17:07:02.580
> 
> 标签：javascript, .net, datetime, browser, asp.net-web-api

.Net WebAPI 在序列化 DateTime 时默认使用 ISO DateTime 格式。当 IE8 尝试在 new Date() 构造函数中使用此 ISO DateTime 格式时，它会中断返回 NaN。  

```
var d = new Date('2012-09-06T15:28:56.215Z');
alert(d); 
```

Firefox 处理得很好。没试过Chrome。IE8 中断，返回 NaN。  

我假设 ISO 日期是在我的 WebAPI 中使用的好格式。我还希望我的 Javascript 客户端能够处理转换为本地时间并重新格式化 DateTime 以便它易于阅读——这就是我使用 Date 类型而不只是将 ISO 日期保留为字符串的原因。  

鉴于这一切，对我来说处理 ISO DateTime 格式以使 IE8 不会阻塞的最佳方法是什么？    

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T05:38:14.203

我认为 Date() 构造函数对于字符串作为输入来说太不可靠了。

@Garrett 在这里描述了这个问题——

> 设置 Date 的一种可靠方法是构造一个并使用 setFullYear 和 setTime 方法。

他在这里给出了一个链接、一个函数和更多细节：[https ://stackoverflow.com/a/2182529/644492](https://stackoverflow.com/a/2182529/644492)

我修改了函数以获取完整的 ISO DateTime UTC 字符串输入并返回一个 UTC Date 对象，以后我可以使用 Date getter 来操作该对象。

我删除了毫秒，因为 IE8 Date 构造函数没有添加毫秒。

我的修改可能并不完美——正则表达式最后有点松散，并且可能需要为我的新输入格式更改格式检查块......

```
/**Parses string formatted as YYYY-MM-DDThh:mm:ss.sZ 
 * or YYYY-MM-DDThh:mm:ssZ (for IE8), to a Date object.
 * If the supplied string does not match the format, an 
 * invalid Date (value NaN) is returned.
 * @param {string} dateStringInRange format YYYY-MM-DDThh:mm:ss.sZ, 
 * or YYYY-MM-DDThh:mm:ssZ - Zulu (UTC) Time Only,
 * with year in range of 0000-9999, inclusive. 
 * @return {Date} Date object representing the string.
 */

function parseISO8601(dateStringInRange) {
    var isoExp = /^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/,
        date = new Date(NaN), month,
        parts = isoExp.exec(dateStringInRange);
    if (parts) {
        month = +parts[2];
        date.setUTCFullYear(parts[1], month - 1, parts[3]);
        date.setUTCHours(parts[4]);
        date.setUTCMinutes(parts[5]);
        date.setUTCSeconds(parts[6]);
        if(month != date.getUTCMonth() + 1) {
            date.setTime(NaN);
        }
    }
    return date;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:47:54.357

这不是一个完美的解决方案，但如果删除了尾随的“Z” ，[这个 Javascript 日期库能够解析该日期。](http://sandbox.kendsnyder.com/date/)扩展其中一种内置模式来处理时区方面并不难。

# iphone - 计算沿 y 轴的方向变化率（角度测量）？

> ID：12305041
> 
> 赞同：3
> 
> 时间：2012-09-06T17:07:13.063
> 
> 标签：iphone, xcode, core-motion, rotational-matrices, cmmotionmanager

我想计算 iPhone 沿 y 轴方向的变化率。1.最初我需要将参考定义为y轴，2.然后测量定义参考的方向变化率（角度测量）。

CMAttitude 是否提供可靠的角度测量来实现这一点？或者我可以使用旋转矩阵或集成陀螺仪数据（我实现了这个方法，但由于陀螺仪的漂移它不起作用）。所以请建议我一个可靠的方法来完成这个工作？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:13:10.803

首先，澄清一下：旋转速率不是“从”任何轴测量的，而是“围绕”一个轴测量的。您不需要提供初始参考框架，因为您只是担心随着时间的推移而*发生变化。*

无论如何，你会得到最好的是[CMDeviceMotion](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html)的`rotationRate`属性，文档说：

> CMRotationRate 结构包含指定设备围绕三个轴的旋转速率的数据。此属性的值包含陀螺仪数据的测量值，其偏差已被核心运动算法消除。

据说它整合了来自多个来源（加速度计）的传感器数据，试图从读数中消除陀螺仪漂移，而不是[CMGyroData](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreMotion/Reference/CMGyroData_Class/Reference/Reference.html#//apple_ref/occ/cl/CMGyroData)类，文档说：

> 此属性产生设备围绕三个轴的旋转速率的测量值。虽然此属性提供来自陀螺仪的原始数据，但 CMDeviceMotion 的同名属性提供了一个 CMRotationRate 结构测量陀螺仪数据，其偏差已被 Core Motion 算法消除。

从这些参考资料中得出的结论是，如果您想要最准确的旋转速率数据，您应该使用以下内容：

```
CMMotionManager* manager = [[CMMotionManager alloc] init];
[manager startDeviceMotionUpdates];

// Later, in some other scope...
double rotationAroundY = [[manager deviceMotion] rotationRate].y; 
```

# python - 有没有办法在不等待进程退出的情况下使用 python 子进程模块的 Popen.communicate() ？

> ID：12305045
> 
> 赞同：0
> 
> 时间：2012-09-06T17:07:41.520
> 
> 标签：python, io, subprocess

我使用 Windows XP 和 Python 2.5。我正在尝试为我的 python 程序秘密地相互通信提供一种方式，我认为**STARTUPOPTIONS**类可以隐藏窗口，但我不知道如何与它们通信。在我的 python 子进程上，我尝试使用**raw_input**，在父进程上，我尝试写入**Popen.stdin**并刷新它，但它没有接缝工作。我会使用**Popen.communicate**，但这会等待进程退出。有没有办法做到这一点？谢谢！

**编辑**：

我将只让我的程序可供 Windows 用户使用，所以如果有一个仅适用于 Windows 的模块，我不会介意它不能在其他操作系统上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:55:03.610

看看这个：`http://pypi.python.org/pypi/async_subprocess/0.2.1` “提供 Popen.communicate 的异步版本”

# javascript - 未捕获的 ReferenceError：未定义对接

> ID：12305046
> 
> 赞同：0
> 
> 时间：2012-09-06T17:07:50.833
> 
> 标签：javascript, jquery, html

我知道网站上已经有很多这样的东西了，但似乎没有什么是我的问题的罪魁祸首。我正在尝试在我的项目中实现一个 django 模块，但是当提供的 JS 不起作用时，我遇到了障碍。假设可能有什么东西坏了，我试着修改它来工作；当那失败时，我去了我能做的最简单的功能，但仍然没有运气。

我继续从 jqchat.js 中删除所有内容，并用下面的简单函数替换它。我还尝试从 $(document).ready() 内部和外部调用 Butt()，但都没有成功。另外，我知道 jqchat 正在被导入，因为没有 404（如果我将其更改为 jqchattttt.js，我会收到错误消息）。

有任何想法吗？jquery 工作并且引导函数工作，但 jqchat.js 没有任何工作。

base.html 的摘录

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="{% static 'js/bootstrap.js' %}"></script>
<script src="{% static 'jqchat/jqchat.js' %}"></script>
<script type="text/javascript">
    $(document).ready(function(){
        Butt();
        //InitChatWindow("{% url jqchat_ajax 1 %}", null);
    });
</script> 
```

jqchat/jqchat.js

```
function Butt() {
    console.log('butts');
} 
```

# ruby-on-rails - 模块命名错误？

> ID：12305048
> 
> 赞同：1
> 
> 时间：2012-09-06T17:08:03.953
> 
> 标签：ruby-on-rails, ruby, module

所以我在rails中写了一个模块：

```
module SpecUtil

  def login
    visit tasks_path
    click_link "Sign in"
    current_path == log_in_path
    fill_in "email", :with => @user.email
    fill_in "password", :with => @user.password
    click_button "Save changes"
    current_path == tasks_path
    page.should have_content "You have logged in!"  
  end

  def create_comment
     visit tasks_path
     click_link @task.name
     current_path == task_path(@task)
     fill_in 'comment_comment', :with => 'I am a comment'
     click_button 'Create Comment'
  end

end 
```

当我将 SpecUtil 包含到我的 rails 测试文件中时：

```
include SpecUtil 
```

我得到错误

```
/home/adam/Documents/Aptana Studio 3 Workspace/StartPoint/spec/requests/categories_spec.rb:2:in `<top (required)>': uninitialized constant SpecUtil (NameError) 
```

当我跑卫时会发生这种情况。文件 spec_util.rb 与测试存在于同一文件夹中......

为什么这会引起轰动？- 我在堆栈上读到，我包含模块的方式是正确的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:34:53.427

通常像这样的实用程序模块被放入`spec/support`目录中。确保您`spec/spec_helper.rb`有加载支持文件的代码：

```
# Requires supporting files with custom matchers and macros, etc,
# in ./support/ and its subdirectories.
Dir["#{File.dirname(__FILE__)}/support/**/*.rb"].each {|f| require f} 
```

并将您的模块移动到`spec/support/spec_util.rb`

# jenkins - Jenkins 参数化构建上传位置

> ID：12305049
> 
> 赞同：2
> 
> 时间：2012-09-06T17:08:05.630
> 
> 标签：jenkins, hudson

我已经为一些特定的基于项目的自动化编写了一些 bash 脚本。我正在使用参数化构建过程来上传文件，如此[SO 链接](https://stackoverflow.com/questions/4970574/create-a-hudson-jenkins-job-with-a-web-form-upload)中所述。问题是我需要从脚本访问上传的文件，但我不知道上传后放置的位置。

Jenkins 暗示该位置将与工作空间相关。就詹金斯而言，我不确定工作空间是什么意思。我尝试了几个选项.. 主干位置 /users/$USER/workspace/、/users/$USER/workspace/[project_name]/

任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:44:26.963

工作区通常位于“jenkins”文件夹下，由作业名称分隔。

*   要*查找*作业工作区的确切位置，
    只需在作业中回显该参数的值：（

    `echo $WORKSPACE`适用于 Unix/Linux/Mac）

    `echo %WORKSPACE%`（适用于 Windows）

*   要在脚本中*使用*此位置，只需将其添加到文件路径：

    `ls -l $WORKSPACE/myFile.txt`
    或
    `dir %WORKSPACE%\myFile.txt`

请注意，如果您尝试从**Job_BB访问****Job_AA**的结果，会有点棘手， 因为每个都位于不同的工作区中。 （您可以访问其他作业的工作区，但现在**Job_BB**依赖于**Job_AA**的**名称**， 这很糟糕。）

 ******为此，我建议在 Jenkins 之外为所有构建结果使用*共享位置。*

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:15:06.693

Jenkins 假设上传文件的路径将由构建工作区的路径添加。您可以将文件位置指定为`$WORKSPACE/path/to/file`（Jenkins 使用每个构建的适当路径填充 $WORKSPACE）或只是`path/to/file`******

# recursion - 递归和迭代有什么区别？

> ID：12305050
> 
> 赞同：2
> 
> 时间：2012-09-06T17:08:05.730
> 
> 标签：recursion, iteration

我正在寻找java中递归和迭代之间的区别。请包括两者的 Java 代码示例。

2.如果我在android中收到消息，我怎样才能打开我打开的应用程序？

1.  如何关闭设备中运行的第三方服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:21:25.937

当方法或函数在其原始参数的子集上调用自身时，就会发生递归。例如，MergeSort - 它将数组分成两半并在这两半上调用自身。

递归看起来像这样，但它是一个非常人为的示例，与下面的迭代示例类似：

```
public void doSomething(int i) {
    // code
    if (i == 10) {
        return;
    } else {
        doSomething(i + 1);
    }
} 
```

迭代是循环或循环的一次通过。例如，此循环中的代码：

```
for(int i = 0; i < 10; i++){
    //code
} 
```

将执行 10 次，即有 10 次迭代。

# css - 确保 Netbeans 中 CSS 中每个冒号后正好有一个空格

> ID：12305056
> 
> 赞同：2
> 
> 时间：2012-09-06T17:08:26.857
> 
> 标签：css, regex, netbeans, sass

我正在 Netbeans 中编辑旧的 SCSS，并希望将其格式化为更漂亮。

我想对所有后面没有空格的冒号进行正则表达式“查找和替换”。我想确保每个冒号后面都有一个空格。

这是一些示例 SCSS：

```
display: block;
width:800px;
height:20px;
text-align:center; 
```

正则表达式将忽略第一行，然后在接下来的 3 行中将在每个冒号后添加一个空格。

我知道有特殊的极端情况，例如`input.focus::-webkit-input-placeholder`. 我可以逐个进行查找和替换，而不是“全部替换”。然后我可以跳过角落案例。

如果有一种非正则表达式的方法可以做到这一点，那也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:33:49.927

试试这个搜索

```
([a-zA-Z0-9]:)([a-zA-Z0-9#]) 
```

并将其替换为

```
$1 $2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-15T16:54:19.233

@Ian G 的答案更接近一些，但仍然不完整。以下规则不会被它捕获：

```
background:url("img/test.jpg");
font-size:.8em;
height:auto !important;
line-height:1.2em;
width:calc(100% - 5px); 
```

我对其进行了进一步修改以捕捉这些规则：

```
([\t\s,;\{])([a-zA-Z\-]+):([\'a-zA-Z\d,\-\:\+\/%#\!\.\"\(\)]+((\s*,\s*|\s+)[\'a-zA-Z\d,\-%#\!\.\"\(\)]+)*([\r\n][\t\s]*)*[;|\}]) 
```

我能想到的唯一仍然无法使用的场景是内联数据 URI：

```
background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlOGU4ZTgiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+); 
```

`;`MIME 类型中的 将其排除在外。但是，修改将捕获稍微错误的 CSS 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-09T00:34:23.643

我最近使用的一个正则表达式搜索有效：

`([\t\s,;\{])([a-zA-Z\-]+):([\'a-zA-Z\d,\-%#]+((\s*,\s*|\s+)[\'a-zA-Z\d,\-%#]+)*([\r\n][\t\s]*)*[;|\}])`

替代品

`$1$2: $3`

我在 notepad++ (v6.7.5) 和 sublime (build 3083) 中对其进行了测试。此正则表达式涵盖多种场景，例如：

```
.some-class {
    font-family:'Arial Regular', 'Arial', sans-serif;
    width:25%;
    height:10px;
    color:#fff;
    border:1px solid #d7d7d7
} 
```

它也会忽略伪选择器。

# android - 将 Android 键盘键翻译成多种语言

> ID：12305057
> 
> 赞同：1
> 
> 时间：2012-09-06T17:08:27.743
> 
> 标签：android, android-softkeyboard

我的想法是为 Android 制作一个软件键盘，其中包含一些我还没有看到的新功能。但是，为了覆盖最多的用户，我必须提供对多种语言的支持。

我正在查看软件键盘的 Google SDK 示例，特别是名为“ `querty.xml`”的文件。我需要该文件，具有多种语言字符（多个 XML 文件）及其典型分布。

问题是，我不知道从哪里获得这些“字符”及其分布。是否有任何资源（例如 Android SO 资源）来获取这些资源？

请注意，我不需要字典，因为我不会提供文本预测。我只需要字符包和分发；键盘布局将是完美的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T08:45:52.333

最后我设法解码了其他一些键盘 APK，令人惊讶的是它们看起来都很相似，所以可能这就是人们所做的。

# cassandra - 使用 FIRST N 在 CQL(1.1) 中指定列范围

> ID：12305063
> 
> 赞同：2
> 
> 时间：2012-09-06T17:08:45.663
> 
> 标签：cassandra, cql

在[CQL 文档 1.0](http://www.datastax.com/docs/1.0/references/cql/SELECT#examples)中，您可以使用带有 SELECT 语句的“FIRST N”属性指定列范围

在[CQL 文档 1.1](http://www.datastax.com/docs/1.1/references/cql/SELECT#examples)中，它似乎被省略了，这个特性是从 CQL 中删除的，还是仍然支持......也许以不同的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T00:10:11.253

因此，没有任何误解，该`WRITETIME`属性不是 的替代品`FIRST`，甚至接近于相同的东西。不同之处在于，在 CQL 3 中，宽 cassandra 行现在被建模为具有多组件主键的窄 CQL 行。

有关建模更改的更多信息和介绍（这确实会让您的生活更轻松），请参阅[http://www.datastax.com/dev/blog/schema-in-cassandra-1-1](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)。

也就是说，您仍然可以随心所欲地使用 CQL 2 及其`FIRST`子句和`..`范围运算符等。它只是被弃用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:41:30.633

我认为它已被删除。这是官方的[CQL3 文档](http://cassandra.apache.org/doc/cql3/CQL.html#selectStmt)：

> `<select-clause>`确定需要在结果集中查询和返回哪些列。它由逗号分隔的要查询的列名列表或通配符 (*) 组成，以选择为表定义的所有列。

# .net - 将引用合并到输出 .dll C#

> ID：12305064
> 
> 赞同：0
> 
> 时间：2012-09-06T17:08:47.800
> 
> 标签：.net, merge, ilmerge

我最近试图这样做但没有成功，我希望有新的反馈来帮助我澄清事情。

我的项目具有以下结构。

参考：

*   DocX.dll
*   PDFClown.dll
*   PdfSharp-WPF.dll
*   PdfSharp.Charting-WPF.dll

课程：

*   文档
*   Pdf : 文档
*   Pdf解析器
*   文本：IDocument
*   词：IDocument

输出：

*   文本阅读器.dll

我尝试使用以下方法合并：

> ILMerge：重复类型“Project.IDocument”
> 
> ILMerge 与 /internalize 标志：重复类型“Project.IDocument”
> 
> 带有 /allowDup 标志的 ILMerge：向空间名称添加一个随机数（例如 Project79859.Pdf），外部项目引用表示即使更改它也找不到空间名称。
> 
> Jeffrey Richter Method (http://bit.ly/bDPbh3)：似乎只适用于可执行输出。

欢迎任何想法或建议。提前致谢。

PS。目标项目像现在一样工作，未嵌入 5 个 dll，但规范只需要存在 1 个 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:21:30.373

将程序集嵌入到资源中，并在需要时使用反射从内存中加载它们。

# oracle - 如何组合混合数据类型？带有 Varchar2 的 Varray 是正确的选择吗？

> ID：12305065
> 
> 赞同：1
> 
> 时间：2012-09-06T17:08:49.953
> 
> 标签：oracle, plsql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:30:13.743

您的问题是游标循环中的变量始终`tabletype`基于游标定义。您需要指定要添加到数组中的表中的哪个字段：

```
v_owner_internal_id(MyRowPositionInVarray) := d_owner_internal_id.d_owner_internal_id; 
```

同样，您的其他作业也需要更改：

```
v_internal_id(MyRowPositionInVarray) := d_owner_internal_id.d_internal_id; 
```

显然，将游标循环使用的变量更改为不那么容易混淆的变量是个好主意。

* * *

您还可以通过使用光标定义一个数组来稍微简化一下：

```
TYPE t_rst1 IS VARRAY(500) OF cur_rst1%rowtype;
v_rst1 t_rst1 := t_rst1();
...
for r_rst1 in cur_rst1 loop
...
v_rst1(MyRowPositionInVarray) := r_rst1;
...
dbms_output.put_line(v_rst1(i).d_owner_internal_id || ',  ' ||  
                     v_rst1(i).d_internal_id || ',  ' ||  
                     v_rst1(i).d_tid || ',  ' ||  
                     v_rst1(i).d_entity_name || ',  ' ||  
                     v_rst1(i).d_form_seq); 
```

* * *

最后，您可以使用以下方法大大简化此操作`bulk collect`：

```
DECLARE
  MyTID varchar2(10); 
CURSOR Cursor_rst1 IS
       SELECT d_owner_internal_id,
              d_internal_id,
              d_tid,
              d_entity_name,
              d_form_seq
         FROM rtns.itas_rtn_ct_1120_cor tblRecords
        WHERE d_form_seq = '2710' --Tax Year =2003
          AND D_TID = MyTID;  
  TYPE t_rst1 IS table OF Cursor_rst1%rowtype; 
  r_rst1 t_rst1;

  BEGIN  
  MyTID := '0000083';  

  open Cursor_rst1;
  fetch Cursor_rst1 bulk collect into r_rst1;
  close Cursor_rst1;

  FOR i IN r_rst1.first .. r_rst1.last LOOP
       dbms_output.put_line(r_rst1(i).d_owner_internal_id || ',  ' ||  
                            r_rst1(i).d_internal_id || ',  ' ||  
                            r_rst1(i).d_tid || ',  ' ||  
                            r_rst1(i).d_entity_name || ',  ' ||  
                            r_rst1(i).d_form_seq);  
  END LOOP;  
END; 
```

# mysql - Performace Lag in Mysql query

> ID：12305066
> 
> 赞同：0
> 
> 时间：2012-09-06T17:08:53.717
> 
> 标签：mysql, performance, explain

This mysql query takes 5 minutes 20 seconds to execute

```
SELECT PROVIDER, COUNT(DISTINCT(NAME)) FROM   Test  WHERE NAME NOT IN (SELECT NAME 
FROM Test   WHERE OPERATION = 'SIGN_IN' and Test.CREATED_TIME BETWEEN UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 1 DAY) *    1000  AND UNIX_TIMESTAMP(CURRENT_DATE()) * 1000) 
AND Test.CREATED_TIME BETWEEN UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 1 DAY) * 1000  AND UNIX_TIMESTAMP(CURRENT_DATE()) * 1000 AND OPERATION='VALIDATE'  GROUP BY PROVIDER; 
```

The explain give the following result

```
explain SELECT  PROVIDER, COUNT(DISTINCT(NAME)) FROM   Test  WHERE NAME NOT IN  
(SELECT NAME  FROM Test   WHERE OPERATION = 'SIGN_IN' and Test.CREATED_TIME BETWEEN 
UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 1 DAY) * 1000  AND UNIX_TIMESTAMP(CURRENT_DATE()) * 1000) AND         Test.CREATED_TIME    BETWEEN UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 1 DAY) * 1000  AND UNIX_TIMESTAMP(CURRENT_DATE()) * 1000 AND OPERATION='VALIDATE'  GROUP BY PROVIDER;
+----+--------------------+-----------------+----------------+----------------------------------------------------------------------+-------------------------+---------+------+--------+------------------------------------+
| id | select_type        | table           | type           | possible_keys                                                        | key                     | key_len | ref  | rows   | Extra                              |
+----+--------------------+-----------------+----------------+----------------------------------------------------------------------+-------------------------+---------+------+--------+------------------------------------+
|  1 | PRIMARY            | Test | ALL            | Test_CTndx,Test_CORndx                         | NULL                    | NULL    | NULL | 137523 | Using where; Using filesort        |
|  2 | DEPENDENT SUBQUERY | Test | index_subquery | Test_NAMEndx,Test_CTndx,Test_CORndx | Test_NAMEndx | 303     | func |    148 | Using where; Full scan on NULL key |
+----+--------------------+-----------------+----------------+----------------------------------------------------------------------+-------------------------+---------+------+--------+------------------------------------+ 
```

Number of rows in a table is 50,000\.

How can I optimize this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:16:35.843

重写查询以用`NOT IN`等效`NOT EXISTS`语句替换 应该更快。

例如，尝试这样的事情：

```
SELECT t1.PROVIDER, COUNT(DISTINCT(t1.NAME)) 
FROM   Test t1 
WHERE t1.CREATED_TIME BETWEEN UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 1 DAY) * 1000  AND UNIX_TIMESTAMP(CURRENT_DATE()) * 1000 
AND t1.OPERATION='VALIDATE'  
and NOT EXISTS (
  select null
  from test t2
  where t2.OPERATION = 'SIGN_IN' 
  and t2.CREATED_TIME BETWEEN UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 1 DAY) *    1000  AND UNIX_TIMESTAMP(CURRENT_DATE()) * 1000
  and t2.name = t1.name
)
GROUP BY t1.PROVIDER; 
```

# web-applications - Push Notification Pros & Cons

> ID：12305069
> 
> 赞同：1
> 
> 时间：2012-09-06T17:09:04.397
> 
> 标签：web-applications, push-notification

Please help me if anybody can. I am writing a technical document on Push Notifications in Native apps and Web Apps. I want to write pros and cons of push notification in android/iphone and that of web apps also. I have searched various documents on the web but I am not getting many pros and cons. Till now I have written - It is cheaper to send a push notification than a SMS or MMS.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:13:28.497

看

[iphone上的推送与拉取通知](https://stackoverflow.com/questions/3585336/push-vs-pull-notification-on-iphone)

补充思想：

“在这两个事件中，Forstall 都表示，就接收通知而言，推送通知是比后台进程（用于拉取技术）更好的维持电池寿命的方法”

[http://en.wikipedia.org/wiki/Apple_Push_Notification_Service](http://en.wikipedia.org/wiki/Apple_Push_Notification_Service)

# java - Using Apache POI with RegEx to extract Uppercase Words

> ID：12305071
> 
> 赞同：0
> 
> 时间：2012-09-06T17:09:08.073
> 
> 标签：java, regex

So I am working on a Project to extract Uppercase words out of a .doc file in Java. I am using regex, but the regex below was used by someonelse in a old .vba script. I need to find All Uppercase Words that are surrounded by Parenthesis. For Example (WORD). I know the regex below will give me a dangling meta character error so what would the regex be for this.

```
private static final String REGEX = "(*[A-Z]*[A-Z]*)";
private void parseWordText(File file) throws IOException { 
    FileInputStream fs = new FileInputStream(file); 
    HWPFDocument doc = new HWPFDocument(fs); 
    WordExtractor we = new WordExtractor(doc); 
    if (we.getParagraphText() != null) { 
        String[] dataArray = we.getParagraphText(); 
        for (int i = 0; i < dataArray.length; i++) { 
            String data = dataArray[i].toString(); 
            Pattern p = Pattern.compile(REGEX); 
            Matcher m = p.matcher(data); 
            List<String> sequences = new Vector<String>(); 
            while (m.find()) { 
                sequences.add(data.substring(m.start(), m.end())); 
                System.out.println(data.substring(m.start(), m.end())); 
            } 
        } 
    } 
} 
```

With the code above and the regex I am getting two upper case letters, not just the all upper case words with the parens.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:48:48.250

括号是正则表达式中的保留字符，所以你的第一个`*`不是修改任何东西。至少，您需要逃避它们：

```
\(*[A-Z]*[A-Z]*\) 
```

但是，不要停止阅读！需要注意的是，上面的正则表达式等同于：

```
\(*[A-Z]*\) 
```

但最重要的是，我认为这不是您想要的正则表达式。我认为您正在尝试捕获用括号括起来的非零连续大写字母，或者：

```
\([A-Z]+\) 
```

'+' 是一个或多个匹配项，您会注意到我已经停止重复左括号。对于加分，您可能希望在括号的开头或结尾处处理空格：

```
\(\s*[A-A]+\s*\) 
```

但请注意，这将匹配新行。希望这可以帮助！

# php - 表单提交，下载响应为 XLSX，并通知

> ID：12305075
> 
> 赞同：2
> 
> 时间：2012-09-06T17:09:18.630
> 
> 标签：php, jquery, forms, submit

我有以下表格：

```
<form id='report-inputs' method='post' action='generate.php'>
<!-- inputs -->
</form> 
```

结果`generate.php`是生成的 Excel 文档 (.xlsx)：

```
ob_end_clean();
header('Content-type: application/vnd.ms-excel');
header('Content-Disposition: attachment; filename="'.$_DATA['title'].'.xlsx"');
$objWriter->save('php://output'); 
```

**这里要知道的最重要的事情是，它可以按原样完美运行。**现在我很清楚我不能对`$.post`这个表单使用 jQuery 并下载结果。这让我想到了我的实际问题：

我将如何最好地实现某种“等待”对话框？该表单大约需要 30 秒才能完成并获取您的文件，而普通的浏览器微调器并不是很有用。我当然知道如何让 GIF 动画或显示“正在工作”的对话框出现，但我如何告诉浏览器将其关闭？

谢谢。

# spring-mvc - 在 STS 中测试新的 Spring MVC 项目 - 默认根上下文？

> ID：12305077
> 
> 赞同：4
> 
> 时间：2012-09-06T17:09:38.333
> 
> 标签：spring-mvc, sts-springsourcetoolsuite

我正在尝试进入 Spring MVC 世界，并从使用 SpringSource Tool Suite 开始。我创建了一个新的 Spring MVC 项目并且我了解了基础知识。我的快速问题是 - 更改 STS 附带的默认 vFabric 服务器的根上下文的最佳方法是什么？

默认情况下，它将我的项目映射到 /projectname - 但是当我最终部署这个项目时，我希望它位于根上下文 /. 有没有办法在 STS/vFabric 中更改它，所以当我“在服务器上运行”并启动 Tomcat 实例时，当前项目将位于根上下文中，而不是默认的“VMware vFabric tc 服务器”页面？这只会使测试站点变得困难，因为我将链接到 HTML 中的“/mylink”（例如），但是在 STS 中运行时它将是 /projectname/mylink

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T16:17:24.987

*   在“Servers”-View中，右键单击vFabric服务器
*   选择“打开”
*   在打开的编辑器中，单击“模块”（在编辑器窗口的底部）
*   您将看到已部署的应用程序，单击应部署到 ROOT 的应用程序
*   点击“编辑”
*   将路径更改为“/”，保持文档库不变
*   保存并完成

# javascript - prototype.js 和 Microsoft JScript 运行时错误：“样式”为空或不是对象

> ID：12305083
> 
> 赞同：0
> 
> 时间：2012-09-06T17:09:59.317
> 
> 标签：javascript, prototypejs

我有以下 javascript 错误 - Microsoft JScript 运行时错误：'style' 为 null 或不是对象。我正在使用prototype-1.6.1.js 库。错误在 prototpye 库代码中：

```
Element.Methods.getStyle = function(element, style) {
element = $(element);
style = (style == 'float' || style == 'cssFloat') ? 'styleFloat' : style.camelize();
var value = element.style[style]; 
```

这个错误只发生在开发机器上，在调试时在 Internet Explorer 上。我在生产中没有这个错误。在调用堆栈中，我看到第一个函数是“函数绑定（上下文）”，它是原型的函数。我没有在我的代码中的任何地方使用它...

# reporting-services - SSRS - 如何在组可见性切换单元格中为加号和减号图标蒙皮

> ID：12305086
> 
> 赞同：2
> 
> 时间：2012-09-06T17:10:24.870
> 
> 标签：reporting-services, ssrs-2008, ssrs-2012

我正在使用 SSRS 2012 创建一个报告，其中我有可以根据另一个文本框的值打开或关闭的组。

呈现报告时，SSRS 在该文本框旁边显示一个加号或减号图标，让用户切换可见性，但这些图标非常基本。我一直在寻找一段时间，似乎无法找到剥皮的方法，所以我开始怀疑：这有可能吗？如果没有，您能想到任何解决方法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:50:33.610

万一这可以帮助其他人，我终于找到了使用旧 jQuery 的解决方法：

```
$(function() {
    $('img[alt="+"]').attr('src', 'customPlusImage.png');
    $('img[alt="-"]').attr('src', 'customMinusImage.png');
}); 
```

让我知道你是否有更好的方法！

# git - 将更改存储到特定文件

> ID：12305093
> 
> 赞同：71
> 
> 时间：2012-09-06T17:10:53.977
> 
> 标签：git, git-stash

我有一个大型 git 项目，我愚蠢地导入了 eclipse 并在其上运行了自动格式化。现在，项目中的每个文件都显示为已修改。与其提交我的格式化文件，我宁愿还原所有我只被格式化并且没有其他更改的文件。例如：

```
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)

#     modified: dir/file1.cpp
#     modified: dir/file1.h
#     modified: dir/file2.cpp
#     modified: dir/file2.h
#     modified: dir/file3.cpp
#     modified: dir/file3.h
#     modified: dir/file4.cpp
#     modified: dir/file4.h 
```

我知道`file2.cpp`, `file2.h`, 并且`file3.cpp`已经修改了内容（即，不仅仅是格式化）。我想存储对这三个文件的更改，然后签出旧版本，以便之后我可以重新应用对这些文件的更改。我宁愿避免这样的事情：

```
$ cp file2.cpp ~/tmp
$ git checkout blahblahblah
$ cp ~/tmp/file2.cpp . 
```

如果有一种明显的方法可以做到这一点而不涉及隐藏，请告诉我。什么都能完成工作。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-06T17:21:44.420

您可以`add`保留要保留更改的文件，然后`stash`是其余文件并清除存储：

```
git add file2.cpp file2.h file3.cpp
git stash --keep-index 
```

此时，您已经隐藏了不需要的更改。如果您想永久摆脱它们，请运行：

```
git stash drop 
```

现在你有`file2.cpp`, `file2.h`, 和`file3.cpp`staged 提交。如果您想存储这些文件（而不是提交它们）：

```
git reset
git stash 
```

现在您将处于您之前的提交中，只隐藏了这三个文件。

**更新：**

[正如 VonC 在他的回答中解释的那样](https://stackoverflow.com/a/42963606/506338)`git stash push`，Git 2.13 及更高版本包括一种更直接的方式来存储特定文件。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2017-03-22T22:10:39.470

> 我知道`file2.cpp`, `file2.h`, 并且`file3.cpp`已经修改了内容（即，不仅仅是格式化）。
> 我想存储对这三个文件的更改，然后签出旧版本，以便之后我可以重新应用对这些文件的更改。

使用 Git 2.13（2017 年第二季度）， git stash 将正式提供一种方法来存储特定文件的更改

```
git stash push [--] [<pathspec>...] 
```

请参阅[Thomas Gummerer ( ) 的提交](https://github.com/tgummerer)[9e14090](https://github.com/git/git/commit/9e140909f611fff720efc914b7186b8e4ab722cd)、提交[1ada502](https://github.com/git/git/commit/1ada5020b38c520f665259f6d9b3955672b92761)、提交[df6bba0](https://github.com/git/git/commit/df6bba0937209d679a06addd26975593fef744f2)（2017 年 2 月 28 日）和[提交 9ca6326](https://github.com/git/git/commit/9ca6326dff29b97cfb126e6460105920c492fa15)、[提交 6f5ccd4](https://github.com/git/git/commit/6f5ccd4df56da70434cd807a458a4de015098971)、[提交 f5727e2](https://github.com/git/git/commit/f5727e26e44dbbf564034d3993d4d2f65dacd6fb)（2017 年 2 月 19 日[）](https://github.com/tgummerer)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 44c3f09](https://github.com/git/git/commit/44c3f09fa501ccd83e3362080a99ad4b46cda127))^(中，2017 年 3 月 10 日）)[`tgummerer`](https://github.com/tgummerer)
^([`gitster`](https://github.com/gitster))

正如[现在记录的](https://github.com/git/git/blob/44c3f09fa501ccd83e3362080a99ad4b46cda127/Documentation/git-stash.txt#L52-L69)：

> 为了快速制作快照，您可以省略“推送”。
> 在这种模式下，不允许使用非选项参数来防止拼写错误的子命令进行不需要的存储。
> 两个例外是`stash -p`充当别名`stash push -p`和路径规范，允许在双连字符后`--`消除歧义。
> 
> **当 pathspec 被赋予 ' `git stash push`' 时，新的 stash 仅记录与 pathspec 匹配的文件的修改状态**。
> 然后索引条目和工作树文件也将回滚到 `HEAD`仅针对这些文件的状态，从而使与路径规范不匹配的文件保持不变。

[请注意，正如medmunds](https://stackoverflow.com/users/647002/medmunds)在[评论](https://stackoverflow.com/questions/12305093/stash-changes-to-specific-files/42963606?noredirect=1#comment75001880_42963606)中指出的那样，这将使用[相对于 git repo 的根文件夹的](https://git-scm.com/docs/git-status#_output)`git stash`路径。

* * *

在[Git 2.26（2020 年第二季度）中，“ `git rm`”和“ `git stash`”学习了新的“ `--pathspec-from-file`”选项](https://stackoverflow.com/a/60622528/6309)。

如果您有要存储的文件列表`filesToStash.txt`，那么这就足够了：

```
git stash --pathspec-from-file=filesToStash.txt` is enough. 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-04-14T08:27:49.743

一个不错的选择是使用交互式存储模式。

```
git stash --patch 
```

它的工作方式主要类似于交互式添加模式：您将看到一系列差异，显示您在工作树中所做的更改，您必须选择要存储的文件（或文件的某些部分！） ，其余的将保持不变。

来自`man git-stash`：

> 使用 --patch，您可以交互地从 HEAD 和要隐藏的工作树之间的差异中选择块。存储条目的构造使其索引状态与存储库的索引状态相同，并且其工作树仅包含您以交互方式选择的更改。然后从您的工作树中回滚选定的更改。请参阅[git-add(1) 的“交互模式”部分](https://www.kernel.org/pub/software/scm/git/docs/git-add.html#_interactive_mode)了解如何操作 --patch 模式。

在您的情况下，您将能够看到仅格式化的大块并单独存储它们，而不会丢失有意义的更改。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-05-11T15:07:54.683

你也可以使用 git stash -p。通过这种方式，您可以选择应将哪些块添加到存储中，也可以选择整个文件。

系统会提示您针对每个大块执行一些操作：

```
y - stash this hunk
n - do not stash this hunk
q - quit; do not stash this hunk or any of the remaining ones
a - stash this hunk and all later hunks in the file
d - do not stash this hunk or any of the later hunks in the file
g - select a hunk to go to
/ - search for a hunk matching the given regex
j - leave this hunk undecided, see next undecided hunk
J - leave this hunk undecided, see next hunk
k - leave this hunk undecided, see previous undecided hunk
K - leave this hunk undecided, see previous hunk
s - split the current hunk into smaller hunks
e - manually edit the current hunk
? - print help 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-06T17:30:22.093

这对IMO很有`git diff`用：`git apply`

```
git diff file2.cpp file2.h file3.cpp > ../my-changes.patch
git checkout ...
git apply ../my-changes.patch 
```

之后`diff`，您可以检查补丁文件以确保您的所有更改都在那里。

请注意，您可能需要使用`--reject`应用选项，以防补丁无法完全应用。另请参阅[apply 的手册页](http://git-scm.com/docs/git-apply)。

# cocos2d-iphone - Kobold2d 动画问题

> ID：12305100
> 
> 赞同：0
> 
> 时间：2012-09-06T17:11:15.287
> 
> 标签：cocos2d-iphone, kobold2d

我正在尝试使用我使用纹理打包器 (footballAnim-hd.pvr.ccz) 和 (footballAnim.pv-hd.plist) 创建的这些文件播放动画，但我遇到了一个问题。这是我的代码：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"footballAnim.pv.plist"];

    CCSprite *football = [CCSprite spriteWithSpriteFrameName:@"Football59-hd.png"];
    football.position = ccp(100, 100);

    CCSprite *football2 = [CCSprite spriteWithSpriteFrameName:@"Football59-hd.png"];
    football2.position = ccp(120, 100);

    //This is the animation
    id anim = [CCAnimate actionWithSpriteSequence:@"Football%d-hd.png"
                                                  numFrames:59
                                                      delay:0.01
                                       restoreOriginalFrame:NO];
    //This is the animation
    id anim2 = [CCAnimate actionWithSpriteSequence:@"Football%d-hd.png"
                                        numFrames:59
                                            delay:0.01
                             restoreOriginalFrame:NO];

    //This is the action
    id repeat = [CCRepeatForever actionWithAction:anim];

    //This is the action
    id repeat2 = [CCRepeatForever actionWithAction:anim2];

     CCSpriteBatchNode *batchNode=[CCSpriteBatchNode batchNodeWithFile:@"footballAnim.pvr.ccz"];
    [self addChild:batchNode];
    [batchNode addChild:football];
    [batchNode addChild:football2];

    [football runAction:repeat];
    [football2 runAction:repeat2]; 
```

所以我的问题是我使用的是 kobold2d，它正在使用（cocos2d v1.1.0-beta2b），当我尝试播放这个动画时，它只播放了一半的帧，但是我在另一个 cocos2d 项目中尝试了这个（EXACT）代码正在使用（cocos2d v1.0.0-rc），它就像一个魅力。这是 cocos2d 中的错误还是我做的不对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:46:32.227

确实 cocos2d 1.1 改变了动画延迟的工作方式，这是一个有意或由错误引起的重大变化（我真的说不出来）。这个变化太奇怪了，在研究了几分钟后，我放弃了，把我自己的项目恢复到 1.0.1。这个动画问题也是我保留 Kobold2D v1.0.5 下载链接的原因。

也许这个动画更改有一些用处，我阅读了论坛帖子，但即使它应该如何工作对我来说也没有真正意义。或者它确实有，只是解释得不好，或者实现只是有一个或两个错误。我在 cocos2d 2.0 中没有这些动画问题。也许它在那里被修复了，或者这个变化从未应用于 cocos2d 2.0。

*FWIW*， cocos2d-iphone v1.x 似乎不再更新。v1.x master 分支的最后一次正式提交是 6 个月前，v1.x 开发分支的最后一次提交是 4 个月前。是时候跳船了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:00:15.823

我想出了如何解决我的问题。cocos2d论坛上有人建议更改CCActionInterval.m中的更新方法（来自this）

```
-(void) update: (ccTime) t
{
    NSArray *frames = [animation_ frames];
    NSUInteger numberOfFrames = [frames count];
    CCSpriteFrame *frameToDisplay = nil;

    for( NSUInteger i=nextFrame_; i < numberOfFrames; i++ ) {
        NSNumber *splitTime = [splitTimes_ objectAtIndex:i];

        if( [splitTime floatValue] <= t ) {
            CCAnimationFrame *frame = [frames objectAtIndex:i];
            frameToDisplay = [frame spriteFrame];
            [(CCSprite*)target_ setDisplayFrame: frameToDisplay];

            NSDictionary *dict = [frame userInfo];
            if( dict )
                [[NSNotificationCenter defaultCenter] postNotificationName:CCAnimationFrameDisplayedNotification object:target_ userInfo:dict];

            nextFrame_ = i+1;

            break;
        }
    }
} 
```

对此

```
-(void) update: (ccTime) t
{
    NSArray *frames = [animation_ frames];
    NSUInteger numberOfFrames = [frames count];

    NSUInteger idx = t * numberOfFrames;

    if( idx >= numberOfFrames )
        idx = numberOfFrames -1;

    CCAnimationFrame *frame = [frames objectAtIndex:idx];
    CCSpriteFrame *frameToDisplay = [frame spriteFrame];
    [(CCSprite*)target_ setDisplayFrame: frameToDisplay];

    NSDictionary *dict = [frame userInfo];
    if( dict )
        [[NSNotificationCenter defaultCenter] postNotificationName:CCAnimationFrameDisplayedNotification object:target_ userInfo:dict];
} 
```

这对我有用，但我不知道这是否是理想的解决方案。

# nutch - nutch-site.xml 文件的 plugin-includes 标头下“parse-(type1|type2)”的含义

> ID：12305101
> 
> 赞同：1
> 
> 时间：2012-09-06T17:11:16.053
> 
> 标签：nutch

在`nutch-site.xml`，在`plugin-includes`标题下，当我写时`parse-(type1|type2)`，它是什么意思？

这是否意味着对于 nutch 获取的每个 url，nutch 先使用`type`1 个解析器解析内容，然后依次调用`type2`解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:53:55.367

你的假设是正确的。这就是它的工作原理。但请记住，可以为每个插件分配某种内容类型或一组内容类型。例如 parse-pdf 插件不会解析 msword 文档。

# php - PHP 半随机字符串生成器

> ID：12305105
> 
> 赞同：1
> 
> 时间：2012-09-06T17:11:42.153
> 
> 标签：php

如何使我的 id 生成器代码*优雅*：当用户注册时，他们会得到一个 id.. 生成的 id 不会是唯一的机会是什么？另外 - 我怎样才能让我的代码优雅？谢谢！

```
#hash = random url generated from 128 chars

$cac = substr($hash, 64,-60);

$words = array('GET', 'COOL', 'WOW', 'YES', 'NICE', 'BUCK', 'LUCK', 'FUN', 'CASH', 'TIP', 'PEEK', 'TAG'); 
$rword = rand(0,11);

$syms = array('-', '#', '$', '@');
$rsym = rand(0,3); 

$nums = rand(0,9);

$aff_id_temp = $words[$rword] . $syms[$rsym] . $cac . $nums;
$final_id = strtoupper($aff_id_temp); 
```

---更新---代码有效。只需在用户注册时为其生成一个简单的会员 ID。优雅我的意思是——也许我破解最终产品代码的方式更简单，或者以不同的方式（可能在循环中）基本上我想学习不同的方式来实现相同的结果。我想要其他编码观点。

输出类似于：TIP#6C1D2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:20:21.977

由于散列，几乎为零。也就是说，它完全取决于哈希函数。

排除散列，任何给定 id 与另一个给定 id 冲突的机会`1/(12*4*10) = 1/480`约为 0.2%。但是，新 id 不与任何其他 id 冲突的机会是，您已经拥有的 id 数量`1-(1-1/480)^c`在哪里。`c`只有 50 个 id，您已经有 10% 的碰撞机会。

[`uniqid`](http://php.net/uniqid)您可以使用该函数获得唯一的哈希。

# php - php正则表达式和替换

> ID：12305106
> 
> 赞同：-1
> 
> 时间：2012-09-06T17:11:44.693
> 
> 标签：php, regex

可以使用 php 和一个正则表达式来执行以下操作。如果超链接的顶级域与数组中的给定 tld 名称匹配，则获取内容内的所有超链接并重写它们。

现在有一个正则表达式，它重写给定内容中的所有超链接

```
preg_replace('/<a(.*)href="([^"]*)"(.*)>/','<a$1href="goto.php?url=$2"$3>', $content); 
```

例子

```
$tld = array("http://www.example.com","http://www.test.com");

if <a href="www.example.com">example</a> than <a href="/goto.php?url= www.example.com"</a>; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:35:06.357

你可能想巩固你的正则表达式......

```
$pattern = <<<EOL
/<a([^>]+)href\s*=\s*(['" ]?)([^"'> ]*)(['" ]?)([^>]*)>/si
EOL;

$replacement = "<a$1href='goto.php?url=$3'$5>";

preg_replace($pattern, $replacement, $content); 
```

现在无法测试这个，所以可能有一个错字......

# coldfusion - IsImageFile 不能像在 cf8 上那样在 cf9 上工作

> ID：12305108
> 
> 赞同：1
> 
> 时间：2012-09-06T17:11:57.640
> 
> 标签：coldfusion, coldfusion-9, coldfusion-8, url-encoding

我公司数据库中的许多图像都有非常规名称，例如“st. john's.jpg”。在 cf8 中，我在 IsImageFile 中使用 URLEncodedFormat(myimage) 来检查此类图像（请参阅下面的代码）。在我搬到 cf9 之前，它工作得很好。似乎 cf9 无法识别 IsImageFile 中的 URLEncodedFormat 文件。请告知我如何使用常规和非常规名称制作 cf9 检查图像。

```
<cfif IsImageFile("http://www.mywebsite.com/images/#URLEncodedFormat(myimage)#")>
  <cfset imageURL = "/images/#URLEncodedFormat(myimage)#">
<cfelse> 
  <cfset imageURL = "/images/noimage.jpg">
</cfif> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:35:07.620

您编写 if 语句的方式使我相信您将文件扩展名包含在“myimage”变量中。如果是这种情况，那么它将是“。” （句点）转换为“%2E”。

如果这是正确的，我会建议以下解决方案：

```
<cfscript>
  basePath  = "http://www.mywebsite.com";
  image     = "freds's image.jpg";
  name      = URLEncodedFormat(listFirst(image, "."));
  extension = listLast(image, ".");
  imageUrl  = "/images/#name#.#extension#";

  if (! isImageFile(basePath & imageUrl)) {
    imageUrl = "/images/noimage.jpg";
  }

</cfscript> 
```

# iphone - 为什么包含图像的锚点标签在 Iphone 的邮件应用程序中不起作用？

> ID：12305113
> 
> 赞同：1
> 
> 时间：2012-09-06T17:12:19.700
> 
> 标签：iphone, html, ios, anchor, mfmailcomposeviewcontroller

我正在为客户端做 HTML 时事通讯，使用 Thunderbird 发送它，并且在所有浏览器和邮件客户端中一切正常，但是包含图像的锚标记在 Iphone 的邮件应用程序中不起作用。每次我点击图像，应用程序询问我是否要下载图像，它不需要“href”。

有人能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T12:49:13.237

刚刚遇到同样的问题 - iPhone/iPad Apple 邮件应用程序将链接的图像视为照片，而不是按预期在 Safari 中打开。其他移动设备运行良好，台式机测试也一样。

修复：在移动设备上测试之前将有问题的图像上传到您的服务器。

将图像上传到我们的服务器后，这些图像随后被 iPhone 和 iPad 上的 iMail 应用程序识别为链接。

# c++ - 从 C++ 中的方法访问指向对象的私有指针数组

> ID：12305114
> 
> 赞同：0
> 
> 时间：2012-09-06T17:12:22.277
> 
> 标签：c++, arrays, object, pointers, new-operator

我不确定要搜索什么来尝试找到我的答案，所以请将我重定向到任何相关文章，我提前道歉。

我真的是 C++ 新手，正在尝试制作一个 3x3 CLI Tile 游戏。我可以将 Tile 对象分配给 TileGame 构造函数中的私有指针数组，并查看它们具有有效的内存地址（或者我认为是这样）。我的问题是当我运行一个方法来尝试访问该数据时。看起来数组中的第一个元素有一个值，但其他元素看起来很奇怪。我敢肯定这是一件小事，但我不知道自己做错了什么。我也尝试过创建一个访问器方法，但这似乎只会使事情复杂化。

```
#include <iostream>
using namespace std;

class Tile
{
    private:
        int position;
        int tileID;
    public:
        Tile(int, int);
};

// tile constructor
Tile::Tile(int p, int id) : position(p), tileID(id) {}

class TileGame
{
    private:
        const int MAX_TILES;
        Tile* tiles[];
    public:
        TileGame();
        void shuffle();
};

// game constructor
TileGame::TileGame() : MAX_TILES(8)
{
    Tile* tiles[MAX_TILES];
    for (int i = 0; i < MAX_TILES; i++)
    {
        tiles[i] = new tile(i, i);
    }

    // spit out the addresses for each
    cout << endl << "From TileGame(): " << endl;
    for (int i = 0; i < MAX_TILES; i++)
    {
        cout << tiles[i] << endl;
    }
}

void TileGame::shuffle()
{
    // spit out the addresses for each
    cout << endl << "From TileGame(): " << endl;
    for (int i = 0; i < MAX_TILES; i++)
    {
        cout << tiles[i] << endl; // <-- This seems to be the problem
    }
}

int main()
{
    TileGame* game = new TileGame();
    game->shuffle();
} 
```

这应该编译（我不得不重新输入它，所以我希望我没有犯错。）我得到的输出是这样的：

```
From TileGame():
0x7f9349c03aa0
0x7f9349c03ab0
0x7f9349c03ac0
0x7f9349c03ad0
0x7f9349c03ae0
0x7f9349c03af0
0x7f9349c03b00
0x7f9349c03b10

From shuffle():
0x7fff9502752c
0x100
0
0
0
0
0
0 
```

当我通过尝试访问`tiles[]`值不断遇到段错误时，我到达了这一点。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:23:57.133

您的构造函数没有做任何事情来初始化名为`tiles`;的成员。相反，它填充了一个同名的本地数组。当构造函数退出时，这将被丢弃，泄漏分配的内存。然后，当您尝试使用未初始化的成员时，您会得到未定义的行为（在您的情况下是分段错误）。

如果您在编译时不知道大小，则该成员应该是指针，而不是数组：

```
Tile ** tiles; 
```

分配如下：

```
tiles = new Tile* [MAX_TILES]; 
```

记得在析构函数中删除每个 tile ( `delete tiles[i]`) 和数组本身 ( `delete [] tiles`)；与往常一样，在自己管理资源时，请记住[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

更好的是，使用`std::vector`这样您就不必自己管理内存。一般来说，在不需要的时候应该避免动态分配；例如，`TileGame`您在其中创建的`main`可能是一个自动变量 ( `TileGame game;`)，以修复您那里的内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:23:46.710

`tiles`在构造函数中创建的数组`TileGame`不是对象`tiles`中的数组`Game`。摆脱构造函数中的那个。

此外，也可以指针。`tiles`数组可以容纳`Tile`对象；不需要间接和`new`s。同样，没有必要`game`成为一个指针。只需将其创建为`TileGame`对象即可。

# jquery - ajax POST 跨域，.NET 预览功能

> ID：12305115
> 
> 赞同：0
> 
> 时间：2012-09-06T17:12:23.377
> 
> 标签：jquery, .net, ajax, asp.net-mvc-3, cross-domain

寻找有关正确方法的建议和/或对我当前错误的帮助。

我正在构建两个独立的 MVC3 应用程序：数据驱动站点的管理员和前端。管理员最终将居住在前端的子域中。

作为我的要求之一，我必须在管理员中构建预览功能。用户编辑配置文件或其他内容，并希望在不实际保存的情况下查看他们的更改。

因此，首先，任何人都有建议的方法来显示来自前端的页面以及来自后端的数据？

其次，我的方法和我得到的错误：

首先，当用户在管理应用程序中单击预览时，序列化表单并将其发布到前端的控制器操作：

```
<script>
$("#previewPost").click(function () {
     $.ajax({
           async: false,
            type: 'POST',
            url: 'http://localhost:51569/Home/PreviewIndex',
            data: $("form").serialize(),
            dataType: 'html',
            crossDomain: true,
            success: function (data) {
                var popup = window.open();
                //popup.document.write(data);
            }
            ,
            error: function (data) {
                console.log(data);
                alert('error: ' + data);
            }
        });

}); 
```

在控制器中，我采用传递的模型，调整它以匹配前端的期望，然后返回它。

```
 [HttpPost]
    public ActionResult PreviewHome(CurationAdminHomeEditModel postedModel)
    {
         ...some stuff populating the model...
        return View("PreviewHome", retModel);
    } 
```

最终目标是获取该响应并将其写入新窗口。

但它并没有那么远。我的初始 POST 工作正常，我进入控制器操作并发送响应。我可以逐步浏览返回视图并看到它被填充。但是，一旦该响应被反馈到我的 jquery 结果中，它就会作为错误出现，并带有以下详细信息：

```
[Exception... "Failure"  nsresult: "0x80004005 (NS_ERROR_FAILURE)"  location: "JS 
frame :: http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js :: 
<TOP_LEVEL> :: line 4"  data: no] 
```

那么，有什么想法吗？

**编辑** 根据下面与 Kevin 的讨论，我还将其添加到每个应用程序的 web.config 中：

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol> 
```

我在 Firefox 中仍然得到相同的响应，在 Chrome 中运行给我这个错误：

> XMLHttpRequest 无法加载 localhost:51569/Home/PreviewIndex?。来源 localhost:51566 > 不被 Access-Control-Allow-Origin 所允许。

**编辑 2 - 伪解决方案**

仍然不清楚是什么原因造成的，但我可以通过实际发回表单（没有 ajax）来使其工作。所以我现在就这样做（尽管这意味着不弹出一个新窗口）。如果有人有一些才华可以补充，我会很高兴听到它。

# iphone - TestFlight 音频流不起作用

> ID：12305119
> 
> 赞同：3
> 
> 时间：2012-09-06T17:12:41.893
> 
> 标签：iphone, objective-c, ios, audio-streaming, testflight

我构建了一个应用程序，可以将音乐库中的歌曲从一个 iOS 设备流式传输到另一个设备。当我通过 Xcode 运行该应用程序时，它可以在任何设备上运行。但是，当我通过 TestFlight 运行应用程序时，播放不到一秒钟的音频，然后它就静音了。我想知道是什么导致了这个问题。

我在相同的设备上测试了未更改的代码。它通过 Xcode 工作，而不是通过 TestFlight。

有关我的代码如何工作的更多详细信息：

我使用 AVAssetExportSession 将歌曲导出到本地 URL，我用它来初始化 NSData 对象。我使用 GameKit 框架通过蓝牙以数据包的形式发送数据对象。

我再次使用 GameKit 接收数据，并使用音频流服务对其进行解析。然后我使用音频队列服务缓冲并播放它。这些都在 Audio Toolbox 框架下。

任何帮助将不胜感激！

编辑：

所以我尝试了在 iTunes 中打开 IPA 文件并将其同步到设备的“老式方式”。这工作正常。因此，通过 iTunes 同步进行分发是可行的，而通过 TestFlight 进行分发则不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:21:08.473

尝试执行以下步骤：

1.  设置 -> Safari -> 删除 cookie 和数据

2.  设置 -> 常规 -> 配置文件 -> 全部删除

3.  删除旧应用

4.  在试飞中创建新版本

5.  从 testflight 安装

6.  运行应用程序，看看会发生什么，并查看设备控制台和日志

7.  如果这无济于事，请尝试不同的流 URL，看看它是否也发生在那里

ps 我在 testflight 中遇到了一些问题，其中旧的 NSUserDefaults 数据被重新下载到设备上。奇怪但发生了。

# javascript - 在函数内声明的“var”的范围是什么？

> ID：12305120
> 
> 赞同：0
> 
> 时间：2012-09-06T17:12:43.217
> 
> 标签：javascript, jquery

有人可以为我澄清一下...我已经读过使用保留字'var'创建变量会使该变量公开，但如果变量是在函数内部创建的，那怎么可能：

```
$('#timeIn').timepicker({ 'scrollDefaultNow': true });
    $('#timeIn').on('change', function() {
        var numIn = $('#timeIn').timepicker(('getSecondsFromMidnight'));
        var inHours = {
            hours: (numIn/86400)*24,
            getter: function() {return this.hours;}
        };
        timeIn = $('#timeIn').val();
        inArray.push(timeIn);
        events.push(timeIn);
}); 
```

在此示例中，变量 numIn 和 inHours 仅在该 onChange 方法中已知，对吗？如果是这种情况，全局声明会是什么样子？'timeIn' 是全局范围的，但没有操作我只能得到一个字符串表示。我有什么选择可以将可计算的时间作为回报。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T17:14:10.350

在函数中使用单词`var`会将其绑定到该函数的范围。

不使用这个词`var`使其在所有功能和所有范围内都公开

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T17:16:44.900

JavaScript 使用函数作用域——每个变量只能在同一个函数内或比它更高的作用域内看到。

隐式全局变量是在您使用变量而不首先声明它时发生的情况。在编译语言中，这会导致编译错误，但 javascript 会默默地将变量声明为全局对象的属性（在浏览器中，这就是`window`对象）

```
$('#timeIn').on('change', function() {
    var numIn; // only available from inside this anonymous handler function
    ... snip ...
    timeIn = $('#timeIn').val(); // this is an implicit global since it has not been declared anywhere
    // an explicit global, for example's sake
    window.someVar = 'foo';
}); 
```

使用 javascript v1.7，您还可以通过[let](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)关键字建立块范围：

```
let(a = 5, b = 1) {
    // a and b are scoped to this block
    console.log(a+b); // 6
}
console.log(a+b); // error 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:15:52.527

JavaScript 中只有 3 个作用域。

`x = 1;`<-`x`在全局范围内

var，当在函数之外使用时，也会创建一个全局变量：

`<script type="text/javascript">var x = 1;</script>`<-`x`在全局范围内

`function () { var x = 1; }`<-`x`在函数范围内

`for (let i = 0; i < 5; i += 1) {}`<-`x`在块范围内

# javascript - 使用带有 HTML 按钮的 Knockout

> ID：12305127
> 
> 赞同：0
> 
> 时间：2012-09-06T17:13:05.773
> 
> 标签：javascript, jquery, html, knockout.js

我以以下方式成功使用淘汰赛：

```
<div id="Options" data-bind="foreach: Options">

        <button type="button" data-bind="css: { selected: IsSelected }, enable: $parent.allow, click: $parent.select"><img src="/path/to/img.png"/></button>

    </div> 
```

现在，我正在尝试将按钮更改为具有以下内容的图像：

```
<div id="Options" data-bind="foreach: Options">

        <input type="image" data-bind="css: { selected: IsSelected }, attr:{src:/path/to/img.png}, enable: $parent.allow, click: $parent.select" />

    </div> 
```

我的目标是使用淘汰赛将每个选项与自己的图像配对。

按钮未使用第二个选项加载，因此我认为语法已关闭。知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:21:27.337

您设置图像源的方式是错误的。您正在尝试将其设置为字符串的值，但您需要将其写入为字符串文字（即，带引号）。您能够在其他绑定中设置绑定而不使用它们的原因是因为它们是您的视图模型的属性。

这些中的任何一个都应该起作用：

```
<input type="image" data-bind="css: { selected: IsSelected }, attr:{src:'/path/to/img.png'}, enable: $parent.allow, click: $parent.select" />

<input type="image" src="/path/to/img.png" data-bind="css: { selected: IsSelected }, enable: $parent.allow, click: $parent.select" /> 
```

# azure - MS Live ID 身份验证后如何重定向

> ID：12305128
> 
> 赞同：0
> 
> 时间：2012-09-06T17:13:07.983
> 
> 标签：azure, wif, acs, windows-live-id, ws-federation

我正在开发一个托管在 Azure 上并使用 Windows Identity Framework 进行身份验证的 ASP.NET Web 应用程序。

问题是：如何处理来自身份提供者（MS Live ID）的响应？

我发现配置元素 wsFederation 包含此目标的回复属性，但在将其设置为回复 =“http://localhost:64911/Pages/HandleUserLogin.aspx”后它没有任何效果。

在 AudienceUris 部分添加了“http://localhost:64911/”的记录。

任何关于如何在用户登录后处理响应的想法都将不胜感激。

# git - git-svn 克隆失败，perl.exe 断言失败

> ID：12305131
> 
> 赞同：4
> 
> 时间：2012-09-06T17:13:17.863
> 
> 标签：git, svn, git-svn

我的工作有一个绝对庞大而古老的代码库，很快就无法将多个项目合并在一起。我试图将存储库 - 连同它的整个历史 - 拉入 git 以解决其中一些问题。

但是，在尝试指定命令以确保提取整个历史记录时， git svn 会导致许多问题。

svn 存储库和执行拉取操作的客户端机器都是基于 Windows 7 的（svn 存储库位于 Server 2008 机器上，但实际上是相同的核心）。

这些是我到目前为止尝试过的命令：

```
git svn clone "https://path/to/svn/" "local/repository/" 
```

问题：这检索了一个功能存储库，但仅提取了与存储库相关的大约 1/4 的历史记录，这是由于大约一年前的一些重大升级，没有人可以给我太多详细信息。我不知道为什么会发生这种中断。令人困惑的是，作为存储库一部分的一些分支与主干线没有共同的提交。这非常严重地损害了 git 带来的合并好处。

```
git svn clone -T "https://path/to/svn/trunk/" "https://path/to/svn/" "local/repository" 
```

问题：没有分支参数，没有正确检索分支。

```
git svn clone --b="https://path/to/svn/branches" -T "https://path/to/svn/trunk/" "https://path/to/svn/" "local/repository" 
```

问题：以下错误：

```
 subversion/libsvn_subr/path.c:115: failed assertion `is_canonical(component, clen)`.
 0 [sig] perl.exe" 4432 open_stackdumpfile: Dumping stack trace to perl.exe.stackdump 
```

堆栈跟踪是指针位置的难以理解的集合，不提供任何有用信息。一个例子：

```
Frame       Function      Args
028F668     74F21194      (000000EC, 0000EA60, 00000000, 0028F6BC) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T11:20:00.643

我认为这与[git svn dcommit 由于断言错误“svn_fspath__is_canonical(child_fspath)”(cygwin)而失败的问题相同](https://stackoverflow.com/questions/17693255/git-svn-dcommit-fails-because-of-assertion-error-svn-fspath-is-canonicalchild)

不过，建议的解决方案可能并不那么令人满意（降级……）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T14:14:39.523

您是否检查过内存是否不足？原始克隆确实是 RAM 密集型的。如果您是，您可以在另一台机器上进行克隆，然后将其转移到开发机器上使用。

# android - 唯一联系人 ID

> ID：12305140
> 
> 赞同：11
> 
> 时间：2012-09-06T17:13:44.473
> 
> 标签：android, android-contacts

android是否为每个联系人分配唯一的常量ID？
如果没有，有没有办法将这些信息分配给他们？我可以将此 ID 同步到 Google 联系人吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:47:40.767

您只能为已同步的 Google 联系人检索唯一 ID。在其他情况下，您可能会得到不同的 id，如 Android 中每个联系人的 raw_id 都会在用户重置或重新导入联系人到电话簿时更改。

如果您希望联系人 ID 保持一致，而与设备、平台无关，那么要么仅使用同步的 Google 联系人，要么编写自己的代码来生成唯一 ID，例如获取联系人号码、姓名等很少更改的哈希

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T17:27:32.633

android 联系人中有两种类型的联系人 ID。

一个是**CONTACT_ID**，另一个是**RAW_CONTACT_ID**

参考本教程。 [安卓联系人](http://android-contact-id-vs-raw-contact-id.blogspot.in/)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-08T14:35:19.100

```
ContactsContract.RawContacts    SOURCE_ID 
```

> 一个字符串值，用于将该原始联系人唯一标识到创建它的帐户中
> 
> 当同步适配器创建新的原始联系人时，此列应设置为原始联系人的服务器唯一 ID。当 Android 应用程序创建新的原始联系人时，应用程序应将此列留空。这向同步适配器发出信号，它应该在服务器上创建一个新的原始联系人，并获取 SOURCE_ID 的值。特别是，每个帐户类型的源 ID 必须是唯一的，并且应该在同步之间保持稳定：
> 
> 唯一：帐户的每个原始联系人都必须有自己的源 ID。如果您不强制执行此操作，则会导致联系人应用程序出现问题。请注意，同一帐户类型的两个原始联系人可能具有相同的源 ID。例如，帐户 emily.dickinson@gmail.com 的原始联系人“Thomas Higginson”可以与帐户 emilyd@gmail.com 的原始联系人“Thomas Higginson”具有相同的源 ID。稳定：源 ID 是原始联系人在线服务数据的永久部分。例如，如果用户从应用程序设置中清除联系人存储并重新同步，则恢复的原始联系人应具有与以前相同的源 ID。如果您不强制执行此操作，快捷方式将停止工作。

这是官方文档：[Contacts Provider](http://developer.android.com/guide/topics/providers/contacts-provider.html)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-09-22T17:41:01.260

正是为此目的而存在 LOOKUP_KEY 列。

虽然文档很少，但它似乎在新安装和不同手机之间持续存在。

文档：[LOOKUP_KEY](https://developer.android.com/reference/android/provider/ContactsContract.ContactsColumns#LOOKUP_KEY)

# python - 单例python调用两次__init__的问题

> ID：12305142
> 
> 赞同：8
> 
> 时间：2012-09-06T17:13:59.683
> 
> 标签：python, singleton, init

我有一个像这样的单身人士

```
class Singleton:

    class __impl:
        def __init__(self):
            print "INIT"

    __instance = None

    def __init__(self):
        # Check whether we already have an instance
        if Singleton.__instance is None:
            Singleton.__instance = Singleton.__impl()

        # Store instance reference as the only member in the handle
        self.__dict__['_Singleton__instance'] = Singleton.__instance

    def __getattr__(self, attr):
        """ Delegate access to implementation """
        return getattr(self.__instance, attr)

    def __setattr__(self, attr, value):
        """ Delegate access to implementation """
        return setattr(self.__instance, attr, value) 
```

当我做了几个 Singleton 实例时，我收到了两次对**init**的调用，我的意思是“INIT”被打印了两次，我认为它不应该发生

有人知道这有什么问题或有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T17:32:06.323

这是编写 Singleton 的一种稍微简单的方法：

```
class Singleton(object):
    __instance = None
    def __new__(cls):
        if cls.__instance is None:
            cls.__instance = super(Singleton,cls).__new__(cls)
            cls.__instance.__initialized = False
        return cls.__instance

    def __init__(self):      
        if(self.__initialized): return
        self.__initialized = True
        print ("INIT")

a = Singleton()
b = Singleton()
print (a is b) 
```

虽然可能有更好的方法。我不得不承认我从来都不喜欢单身。我更喜欢工厂类型的方法：

```
class Foo(object):
    pass

def foo_singleton_factory(_singlton = Foo()):
    return _singleton

a = foo_singleton_factory()
b = foo_singleton_factory()
print (a is b) 
```

这样做的好处是，如果需要，您可以继续获得相同的 Foo 实例，但如果您决定在 10 年后不再需要真正的单身人士，那么您不仅限于单个实例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T17:32:45.120

[PEP 318](http://www.python.org/dev/peps/pep-0318/)有一个类的单例装饰器示例：

```
def singleton(cls):
    instances = {}
    def getinstance():
        if cls not in instances:
            instances[cls] = cls()
        return instances[cls]
    return getinstance

@singleton
class MyClass:
    ... 
```

（虽然我自己没用过。）

顺便说一句，关于...

> 我做了一个这样的单身人士

此外，您应该提到您[直接从 ActiveState 复制它](http://code.activestate.com/recipes/52558-the-singleton-pattern-implemented-with-python/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T17:46:59.177

由于我们都忽略了您的问题，而是提出了替代的单例实现，所以我会提出我最喜欢的。它利用了一个python模块只加载一次的事实，无论你导入多少次。

它也基于蟒蛇的座右铭“*我们在这里都是成年人*”，因为如果你真的想要，你*可以*多次实例化它......但是你真的必须付出额外的努力才能做错。

所以在`mysingleton.py`：

```
class SingletonClass(object):
    def __init__(self):
        # There's absolutely nothing special about this class
        # Nothing to see here, move along
        pass

# Defying PEP8 by capitalizing name
# This is to point out that this instance is a Singleton
Singleton = SingletonClass()

# Make it a little bit harder to use this module the wrong way
del SingletonClass 
```

然后像这样使用它：

```
from mysingleton import Singleton

# Use it! 
```

我说你必须付出额外的努力才能做错事。以下是如何创建单例类的两个实例，使其不再是单例：

```
another_instance = Singleton.__class__() 
```

那么如何避免这个问题呢？我会引用医生的话：*那就不要那样做！*

* * *

**注意：这是在做出以下评论后添加的**

当我在这里时，这里有另一个单例变体，它可以最大限度地减少复杂代码的数量。它使用元类：

```
class SingletonMeta(type):
    # All singleton methods go in the metaclass
    def a_method(cls):
        return cls.attribute

    # Special methods work too!
    def __contains__(cls, item):
        return item in cls.a_list

class Singleton(object):
    __metaclass__ = SingletonMeta
    attribute = "All attributes are class attributes"

    # Just put initialization code directly into the class
    a_list = []
    for i in range(0, 100, 3):
        a_list.append(i)

print Singleton.a_method()
print 3 in Singleton 
```

在 python 3 中，您将创建这样的单例实例：

```
class Singleton(metaclass=SingletonMeta):
    attribute = "One... two... five!" 
```

Now this one is a little more iffy, since the singleton is a *class*, and you can make *instances* of the *singleton*. In theory this is OK, since the singleton will still be a singleton even if it has instances, but you need to remember that `Singleton()` is not the singleton -- `Singleton` is! It might even suit your needs to have the singleton attributes readily available to its instances as class attributes.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T17:38:41.170

其他方式：

```
>>> class Singleton(object):
...     def __new__(cls, *args, **kwargs):
...             try:
...                     return cls._instance
...             except AttributeError:
...                     val = cls._instance = object.__new__(cls, *args, **kwargs)
...                     return val
... 
>>> class A(Singleton): pass
... 
>>> a = A()
>>> a2 = A()
>>> a2 is a
True
>>> class B(Singleton): pass
... 
>>> b = B()
>>> b2 = B()
>>> b2 is b
True
>>> b is a
False
>>> class D(Singleton):
...     def __init__(self, v): self.v = v
... 
>>> d = D(1)
>>> d.v
1 
```

如果您担心多次调用，`__init__`那么您可以选择使用装饰器或元类。

重写该`__new__`方法允许多次`__init__`调用，因为如果返回的值是该类的实例， python 总是调用`__init__`返回的对象的方法。`__new__`

无论如何，我认为使用装饰器是最好的，因为它可能是更简单的解决方案。

如果您想了解更多在 python 中创建单例的方法，请阅读[此](https://stackoverflow.com/questions/6760685/creating-a-singleton-in-python)问题。

顺便说一句，如果您想让所有实例具有相同的状态（而不是身份），那么您可能会对[Borg](http://code.activestate.com/recipes/66531-singleton-we-dont-need-no-stinkin-singleton-the-bo/)模式感兴趣。如果您不确定选择哪一个，请参阅[此](https://stackoverflow.com/a/1318444/510937)答案。

# xslt - XSLT 中的昨天日期

> ID：12305143
> 
> 赞同：1
> 
> 时间：2012-09-06T17:14:06.647
> 
> 标签：xslt, date, xslt-1.0

如何在 xslt 中找到昨天的日期？我正在考虑获取今天的日期，然后减去一天，但我不知道如何在不破坏日历的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:21:28.257

`XSLT 2.0`您可以使用`current-dateTime()`方法获取当前日期。但是如果您使用`XSLT 1.0`，则需要使用扩展函数，因为 XSLT 1.0 没有提供任何标准来获取当前日期/时间。您可以使用以下脚本`XSLT 1.0`

```
<ms:script language="javascript" implements-prefix="user">
    function datediff(date1, date2)
    {
        return Math.round(((new Date(date2)) - (new Date(date1))/1000/60);
    }
</ms:script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:01:01.367

另一种选择是使用[EXSLT](http://exslt.org/date/index.html)的日期函数扩展：

```
date:add(date:date(), '-P1D') 
```

`date:date()`检索当前日期，并`date:add()`为其添加持续时间。“-P1D”表示-1天的持续时间。

请注意，这些扩展函数不在 XSLT 标准中，但可以找到实现，具体取决于您使用的 XSLT 处理器。EXSLT 函数应该比特定于处理器的函数（如`<ms:*>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:22:36.793

可能你最好的选择是用你的母语编程语言编写一个扩展，并使用你的母语的 datemath 库。[您可以在http://www.ibm.com/developerworks/library/x-callbk/index.html](http://www.ibm.com/developerworks/library/x-callbk/index.html)阅读更多关于它的基础知识

此示例使用 Java，但我在 .NET 中使用过很多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-31T07:05:45.943

我必须在只有 XSLT 1.0 可供我使用的情况下获得以前的工作日期。结果，我想出了一个转换，可以做到这一点。你可以在 Github 上查看：[https ://github.com/Simbiat/xslt1_previous_day](https://github.com/Simbiat/xslt1_previous_day)

其背后的逻辑将日期拆分为 3 个组件并分别操作它们，同时保持依赖关系并处理零。所以，我首先从天中减去 1，然后，如果我得到 0 - 从月份中减去它，同时将天恢复为最大值（31）。分别对月份和年份执行相同的操作。对于日期，还有取决于月份（以及二月份的年份）的附加逻辑，因为月份的最后一天可以是 28、29、30 或 31。

# floating-point - 浮点舍入、位串和二进制精度

> ID：12305145
> 
> 赞同：1
> 
> 时间：2012-09-06T17:14:13.423
> 
> 标签：floating-point, bitstring

假设我使用 32 位浮点数来存储位串（不要问）。进一步假设我想将此浮点数序列化为一个文件（作为浮点数），并在序列化之前对浮点数的十进制表示采用银行家的四舍五入。当我将浮点数读回到程序中时，系统会（自然地）将它存储在一个 32 位浮点数中，该浮点数尽可能接近序列号。

在银行家四舍五入之后，就数字而言，我的序列化浮点数必须有多精确才能确保序列化的浮点数在二进制中与读回的浮点数相等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:22:30.377

如果您的问题是您需要多少个十进制数字才能确保转换为十进制并返回到 IEEE 754 单精度产生原始值，那么[这个答案](https://stackoverflow.com/a/10896466/298225)将得到回答。这假设进行格式化和解释的软件是好的（语言标准可能不需要它）。

特别是，IEEE 754-2008 标准第 32 页注释 1 中的第五项支持该答案，单数为 9，双数为 17：

> 从支持的二进制格式 bf 到外部字符序列的转换并再次返回会导致原始数字的副本，只要至少指定了 Pmin (bf) 有效数字，并且在两次转换期间有效的舍入方向属性是舍入到最接近的舍入方向属性。

# python - 带有 Webpy 的 Python 2.7——flup 还是 modwsgi？

> ID：12305146
> 
> 赞同：1
> 
> 时间：2012-09-06T17:14:16.490
> 
> 标签：python, python-2.7, mod-wsgi, web.py, flup

我不确定我应该选择哪两个。Flup 或 modwsgi。

Flup 的文档似乎很少，添加代码的人也更少。另一方面，modwsgi 似乎得到了广泛的支持。

我只想开始运行我的 webpy 环境，以便我可以在线使用 Python 脚本。但这件事阻止了我前进。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:08:15.837

我使用 nginx 和 uwsgi 来部署我自己的 web.py 应用程序，看起来比 apache+mod_wsgi 更快并且消耗更少的内存，但设置并不容易。我必须运行 supervisord 以确保所有 uwsgi 进程都打开。

不要使用flup，我认为它被认为是部署python web 应用程序的有点过时的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:51:27.360

我的理解是，`flup`作者已经停止了开发，但这充其量只是一个谣言（请有人纠正我！）。我`flup`在几个 Django 站点上使用 FastCGI 模式，因为它预先与 Django 集成，所以它是一个简单的选择。除了命令行选项的格式有些奇怪之外，我从来没有遇到过问题。

我对 mod_wsgi 了解不多，因为我们前段时间从 Apache 切换到 Nginx。

Flup/FastCGI 的一个缺点是您要管理自己的服务器进程，而使用 mod_wsgi，Apache 会为您管理进程。

web.py 似乎有[一个很好的食谱部分](http://webpy.org/cookbook/)，其中包含两种解决方案的食谱。mod_wsgi 对我来说似乎是最简单的解决方案。

如果您不介意管理您的流程（我不介意），我知道 Gunicorn 和 uWSGI 周围有一些令人[兴奋](http://gunicorn.org/)和[动力](http://projects.unbit.it/uwsgi/)。这些可能值得一试。我已经将 Gunicorn 与 Django 和 Tornado Web 服务器一起使用，并且对此没有任何抱怨。

# sql - groovy SQL rows() 方法

> ID：12305154
> 
> 赞同：0
> 
> 时间：2012-09-06T17:15:16.707
> 
> 标签：sql, grails, groovy

在我的 grails 应用程序中有下一个查询：

```
def query = """select
                       u.id, u.birth_date, u.gender, uht.data
                    from
                       user_hra_test as uht
                       left join user as u on u.id = uht.user_id
                       left join client as c on c.id = u.client_id
                    where
                       c.id in (${clients*.id.join(',')}) and
                       uht.`date` between "${start.format("yyyy-MM-dd")}" and "${end.format("yyyy-MM-dd")}"
""" 
```

当我在我的数据库中手动执行它时，我得到 3 行。但是当我这样做时：

```
def queryResult = db.rows(query) 
```

queryResult 的大小为 1。问题出在哪里？

更新。我从数据库中手动删除了找到的行，现在方法什么也不返回，但是在 phpmyadmin 中执行 sql 返回 2 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:06:30.293

这很可能与`Sql`/`GString`交互有关。如果您在调用之前执行`def query = '''...'''.toString()`或`def query = '''...''' as String`调用`db.rows(query)`它很可能会解决您的问题。有关详细信息，请参阅[此](http://programmingitch.blogspot.ca/2010/10/be-careful-using-gstrings-for-sql.html)链接，有关类似问题，请参阅[此链接。](https://stackoverflow.com/questions/1621242/groovy-gstring-issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:24:41.050

你可以试试这个：

```
 def dataSource

   def nameMethod() {

       def sql = Sql.newInstance(dataSource)

       def query = def query = """select
                   u.id, u.birth_date, u.gender, uht.data
                from
                   user_hra_test as uht
                   left join user as u on u.id = uht.user_id
                   left join client as c on c.id = u.client_id
                where
                   c.id in (${clients*.id.join(',')}) and
                   uht.`date` between "${start.format("yyyy-MM-dd")}" and   "${end.format("yyyy-MM-dd")}"
               """

       sql.eachRow( query ) { 
           println it //Do whatever you need with each row
       }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:05:26.133

好的，我不知道为什么，但是当查询如下所示时它可以工作：

```
select
                       u.id, u.birth_date, u.gender, uht.data
                    from
                       user_hra_test as uht
                       left join user as u on u.id = uht.user_id
                       left join client as c on c.id = u.client_id
                    where
                       c.id in ("""+clients*.id.join(',')+""") and
                       uht.`date` between "${start.format("yyyy-MM-dd")}" and "${end.format("yyyy-MM-dd")}" 
```

# php - 将 CURLOPT_CAINFO 与更新的 CA 捆绑包一起使用会导致证书验证失败

> ID：12305157
> 
> 赞同：13
> 
> 时间：2012-09-06T17:15:41.227
> 
> 标签：php, curl

我使用 cURL 在 WordPress 插件中验证 PayPal 交易。最近我开始收到关于用户无法完成购买过程的错误报告，因为无法验证交易。我将错误追踪到：

```
SSL certificate problem, verify that the CA cert is OK. Details: 
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

`CURLOPT_CAINFO`我在 StackOverflow 中发现了很多与同一问题相关的问题，其中大多数人说解决方案是使用cURL 的选项提供一束 CA。[我下载了http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)的最新版本（于 2012 年 6 月 28 日转换）插件，目前随该插件一起发布。这解决了我收到的大部分问题。

现在的问题是，我刚刚收到另一份付款失败的报告，而且错误是一样的：`SSL certificate problem, verify that the CA cert is OK.`。有趣的是，现在的解决方案是**删除**该`CURLOPT_CAINFO`选项。我想知道这是否有解释。我认为使用更新的 CA 包（例如我下载的包）是一种通用解决方案，但似乎并非如此。

这种问题的一般解决方案是什么？什么可以解释使用更新的 CA 包导致 SSL 证书问题，而不是修复它们？

这是 cURL 配置：

```
<?php
    $ch = curl_init("https://www.paypal.com/cgi-bin/webscr");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_CAINFO, '/path/to/cacert.pem');
    curl_setopt($ch, CURLOPT_POSTFIELDS, $content);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $response = curl_exec($ch);
?> 
```

**更新**：www.paypal.com 的证书由 VeriSign 签名。证书层次结构（如 Firefox 中所示）是：

*   VeriSign 3 类公共主要证书颁发机构 - G5
*   VeriSign Class 3 扩展验证 SSL CA
*   www.paypal.com

我可以确认*VeriSign 3 类公共主要证书颁发机构的证书 - G5*包含在我正在使用的[http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)版本中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-21T03:44:48.100

如果您遇到此问题，请不要**像**有人建议的那样禁用对等和主机验证。

这将使您的通信容易受到潜在的中间人攻击，从而破坏了使用 SSL 的初衷。

这个问题的一个可能的解释是设置你的`CURLOPT_CAINFO`（特别是不正确的证书路径 - 我会仔细检查这个）覆盖你服务器上的默认路径。

删除设置后，它会恢复为默认值（可以在 PHP 中设置）。

要记住的另一件事是，这`CURLOPT_CAINFO`是一条绝对路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T17:18:47.420

看到这个网址

[http://davidwalsh.name/php-ssl-curl-error](http://davidwalsh.name/php-ssl-curl-error)

**或尝试一下**

```
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,'https://thirdparty.com/token.php'); //not the actual site
curl_setopt($ch,CURLOPT_TIMEOUT,60);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_POST,1);
curl_setopt($ch,CURLOPT_POSTFIELDS,'customer_id='.$cid.'&password='.$pass);
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,true); 
curl_setopt($ch,CURLOPT_CAINFO,'mozilla.pem'); /* fixed! */
$result = curl_exec($ch);
if(empty($result)) { /* error: nothing returned */ } else { /* success! */ }
curl_close($ch); 
```

# sed - 如果模式后没有空格，则 Sed 替换

> ID：12305158
> 
> 赞同：2
> 
> 时间：2012-09-06T17:15:41.840
> 
> 标签：sed, awk

我需要将 SED替换为`.`标签`.*space*`内*...* `.`1600 个文件。

例子：

`sed -i -e "/<b>/ {s/\./\. /}" file.txt`将使 sed 替换`.`为`.*space*` ：

`<div class="pontos"><b>TERMINAL V.OFICINAS</b></div>`

对此

`<div class="pontos"><b>TERMINAL V. OFICINAS</b></div>`

但是如果在一个文件中，我已经有了

如果点后没有空格，我需要让 sed 替换。

如果可能，请解释表达式中的“如果”是什么。谢谢你。

PS：awk也可以用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:18:56.670

```
 sed 's/\.\([^ ]\)/. \1/g' input

 \.\([^ ]\): match a dot followed by a non-space character,
             also remember the non-space character

 . \1      : replace the match with a dot, space, and the
             non-space character 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:10:59.823

即使在行尾也可以使用

```
sed 's/\. \{0,1\}/\. /g' input 
```

# linux - 内核黑客方法 - 如何找出在哪里破解 linux 内核

> ID：12305162
> 
> 赞同：-3
> 
> 时间：2012-09-06T17:15:53.167
> 
> 标签：linux, linux-kernel, hardware, driver

我有一台可扔掉的廉价笔记本电脑，我想四处转转，​​Thinkpad SL 500。

困扰我的是两个 LED，一个用于无线连接，一个用于休眠，它们根本不亮，虽然它们是功能性的，但我已经在 windows 上尝试过。

所以我想为他们写一个内核驱动程序，没什么大不了的，只是看起来玩内核是个好主意。

我的问题是*我应该系统地遵循什么方法来找出哪些设备负责这些 LED*（通常，不一定特定于我的硬件），以及哪些驱动程序负责其他两个工作的 LED，蓝牙和电池指示灯？

当我说方法论时，我的意思是一步一步的方法论，每一步都有原因，就像我在这里给其他人的答案一样：[What does && mean in void *p = &&abc;](https://stackoverflow.com/questions/6106493/what-does-mean-in-void-p-abc/6106586#6106586)

我精通通过大型代码存储库进行 fgrepping，使用静态代码分析器 & co，但我认为我缺乏硬件知识阻碍了我解决这个问题。

PS：我用的是ArchLinux，所以几乎是最新的内核版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:58:38.257

[此页面](http://www.thinkwiki.org/wiki/Thinkpad-acpi)可能是一个不错的起点。我相信 ACPI 驱动程序通常负责笔记本电脑中的休眠 LED 之类的事情。从那里去哪里，我留给读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T22:52:23.213

您是否已经尝试过[lenovo-sl-laptop 驱动程序](https://github.com/tadzik/lenovo-sl-laptop)？`/sys/class/leds/lensl::lenovocare/`据我所知，它支持 LED，并允许您通过文件至少控制 lenovocare led 。有关详细信息，请参阅[README](https://github.com/tadzik/lenovo-sl-laptop/blob/master/README)文件。

请注意，驱动程序可能已经在 Arch 存储库中可用，您不一定需要自己重新编译驱动程序。抱歉没有更清楚，但我自己既没有 SL500 也没有 Arch，所以我无法验证细节。如果您对使用脚本来摆弄 LED 的各种方式感兴趣，我可能会提供帮助。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:26:12.983

我不确定您的问题是否适合 SO。

但是，我首先会尝试猜测您拥有哪些硬件。`hwinfo`, `lspci`,之类的命令`lsusb`应该会有所帮助。

然后您可以在网上搜索可能相关的输出。

你应该知道你的 wifi 是否在 Linux 上运行，如果是，使用哪些驱动程序。如果它是*ndiswrapper*你可能不走运。

实际上，您应该尽可能准确地了解您的硬件。

我会就内核或驱动程序相关列表提出更精确的问题。

# mysql - 将数据库导出到不同的架构

> ID：12305164
> 
> 赞同：2
> 
> 时间：2012-09-06T17:16:06.913
> 
> 标签：mysql, export

我正在创建一个 Web 应用程序来替换我目前使用的过时的应用程序。该数据库也已过时且结构糟糕。出于测试目的，我想导出旧数据库并将其加载到新数据库中，以便为新的 Web 应用程序提供测试数据。但是，由于数据库的架构更改，我需要手动更改：

*   表名
*   列名

例子：

旧数据库表：部分

```
id | date | user 
```

新数据库表：apx_parts

```
id | date_created | user_id 
```

是否有 MySQL 工具或其他工具可以自动执行此操作？它必须用脚本语言自己编写吗？

**编辑**

澄清一下，我希望它自动化的原因是因为我想使用旧应用程序正在收集的最新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:25:02.500

您可能正在考虑使用 mysqldump 来复制模式和数据。相反，请考虑自行导出数据。

像往常一样创建新的数据库和表。

[使用SELECT...INTO](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)从旧数据库中导出数据。列名在这里无关紧要。如果新数据库中有新列，您可以在此 SELECT 中计算它们的值或忽略它们。

[使用LOAD DATA](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)将数据导入新数据库

祝你好运。

# ajax - response.stream 和 web2py_component：无法将文件作为附件流式传输

> ID：12305170
> 
> 赞同：0
> 
> 时间：2012-09-06T17:16:39.153
> 
> 标签：ajax, stream, components, response, web2py

我想在响应中将文件作为附件流式传输。我有这个功能：

```
def form_query():
    response.flash = str(request.args(0))
    response.generic_patterns = ['load']
    response.headers['Content-Type'] = gluon.contenttype.contenttype('.txt')
    response.headers['Content-Disposition'] = 'attachment; filename=somefile.txt'
    #more code goes in here to process request.args here. 
    #Ultimately, the controller is expected to return a dict containing a table and the file to be streamed as an attachment. For now just trying to get the file streamed.
    return response.stream(open('somefile.txt'),chunk_size=1024) 
```

当我正常调用此控制器时（如果我将流代码放入 index() 并转到 index.html 例如）它会通过打开下载弹出窗口将文件保存到磁盘来响应。但是，当我将它作为 index.html 中 web2py_component 的目标函数调用时（用响应填充 div），如下所示：

```
web2py_component("{{=URL('reports', 'form_query.load')}}" + "/" + jQuery(this).val(), target='div_form_query'); 
```

它在 DIV 'div_form_query' 中呈现文件，而不是弹出下载窗口。

任何想法如何在使用 web2py_component 时将文件呈现为附件。我正在使用 web2py_component，因为我想根据一个以表为选项的选择列表有条件地将输入表单加载到该 div 目标 (div_form_query) 中。index.html 看起来像：

```
{{extend 'layout.html'}}

{{=SELECT('Select a report', 
*[OPTION(repts[i].descr, _value=str(repts[i].report)) for i in range(len(repts))], _id="rep_type")}}

<div id="div_form_query"></div>

<script>
    jQuery(document).ready(function(){
    jQuery('#rep_type').change(function(){
     web2py_component("{{=URL('reports', 'form_query.load')}}" + "/" + jQuery(this).val(), target='div_form_query');
    });

    });
</script>
{{end}} 
```

谢谢，马夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:58:30.633

也许这会做你想要的：

```
jQuery('#rep_type').change(function(){
  var choice = jQuery(this).val();
  web2py_component('{{=URL('reports', 'create_table')}}' + '/' + choice,
    target='div_form_query');
  window.open('{{=URL('reports', 'form_query')}}' + '/' + choice);
}); 
```

另一种选择是只调用`web2py_component()`上面，然后在组件 HTML 中包含一个执行以下操作的脚本：

```
window.open('{{=URL('reports', 'form_query')}}' + '/' + choice); 
```

# excel - 对象需要错误 Excel VBA

> ID：12305171
> 
> 赞同：5
> 
> 时间：2012-09-06T17:16:42.417
> 
> 标签：excel, vba

我正在创建一个 VBA 应用程序，并且我有以下代码：

* * *

```
Dim previousCell As range

Private Sub Worksheet_SelectionChange(ByVal target As range)

Application.EnableEvents = False
On Error GoTo ws_exit:

Set previousCell = target
getEffort (previousCell) '**Here i get object required** 

ws_exit:
    Application.EnableEvents = True
    MsgBox Err.Description

End Sub

Private Function getEffort(ByVal cell As range)

' do soemthing

End Sub 
```

我不确定为什么会收到错误消息： `Object required error at getEffort(previousCell)`. 如果我通过`Target`，它的工作原理。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T19:51:59.927

正如其他人所建议的那样，问题在于括号。没有人充分解释的是为什么它是括号。

当你这样说时：

```
getEffort previousCell 
```

然后将`previousCell` **Range 对象**传递给 getEffort 过程。这是程序所期望的，所以它很高兴。

当你这样说时：

```
getEffort (previousCell) 
```

周围的括号`previousCell`导致 VBA*评估*`previousCell`对象。当 VBA*评估*一个对象时，它返回该对象的默认属性。Range 对象的默认属性是`.Value`，它是一个字符串。

因此，previousCell 被评估并且一个**字符串**被传递给 getEffort。当然 getEffort 需要一个 Range 对象，因此您会收到错误消息。

`Target`您分配的事实`previousCell`是一个红鲱鱼。当您切换到 . 时，您可能引入了括号`previousCell`。如果你不相信我，试试这个：

```
getEffort (Target) 
```

您将收到相同的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:29:40.450

看起来目标未设置为给您错误的对象的实例。当您传入目标时，函数 function(argument) 的参数设置为对象的实例。当你设置 previouscell = target target 实际上需要是什么东西，否则你会得到 exec 错误。

尝试设置 previouscell = ActiveCell

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:55:17.313

两件事：首先，在将 getEffort 作为函数调用时，您不需要使用`()`或包含某种返回值。您还需要确定是否希望它成为子/功能，现在您正在使用两者。大概你把它变成一个潜艇？

```
Dim previousCell As range

Private Sub Worksheet_SelectionChange(ByVal target As range)

Application.EnableEvents = False
On Error GoTo ws_exit:

Set previousCell = target
getEffort previousCell '**Here i get object required** 
'or...
call getEffort(previousCell)

'add this too..
'exit sub
ws_exit:
    Application.EnableEvents = True
    MsgBox Err.Description

End Sub

Private sub getEffort(ByVal cell As range)

' do soemthing

End sub 
```

* * *

此外，您的主程序永远不会在您的错误语句之前退出，因此它会始终弹出该消息框。尝试`Exit Sub`在错误标签之前添加以避免始终出现空白消息框。

# java - Java，多线程，ExecutorService

> ID：12305173
> 
> 赞同：4
> 
> 时间：2012-09-06T17:16:52.443
> 
> 标签：java, multithreading, executorservice

以下是我的代码的某些部分，它使用了线程。目的是从数据库中检索所有记录（大约 5,00,000 条）并向它们发送警报电子邮件消息。我面临的问题是变量 emailRecords 变得非常繁重，并且花费了太多时间来发送电子邮件。如何通过使用多线程来快速处理，以便并行处理 5,00,000 条记录？我尝试使用 ExecutorService 但在实现时感到困惑。我在方法 checkName()、getRecords() 和 sendAlert() 中搞混了。所有这三种方法都被相关地使用。那么，在哪里使用 executorService ？

请向我提供如何处理以下代码以及需要编辑哪个部分的建议？提前致谢！！

```
public class sampledaemon implements Runnable {

    private static List<String[]> emailRecords = new ArrayList<String[]>();

    public static void main(String[] args) {
        if (args.length != 1) {
            return;
        }

        countryName = args[0];

        try {
            Thread t = null;
            sampledaemon daemon = new sampledaemon();
            t = new Thread(daemon);
            t.start();
        } catch (Exception e) {
            e.printStackTrace()
        }

    }

    public void run() {
        Thread thisThread = Thread.currentThread();
        try {
            while (true) {
                checkName(countryName);
                Thread.sleep(TimeUnit.SECONDS.toMillis(10));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void checkName(String countryName) throws Exception {
        Country country = CountryPojo.getDetails(countryName)

        if (country != null) {
            getRecords(countryconnection);
        }
    }

    private void getRecords(Country country, Connection con) {
        String users[] = null;
        while (rs.next()) {
            users = new String[2];
            users[0] = rs.getString("userid");
            users[1] = rs.getString("emailAddress");
            emailRecords.add(props);

            if (emailRecords.size() > 0) {
                sendAlert(date, con);
            }
        }
    }

    void sendAlert(String date, Connection con) {
        for (int k = 0; k < emailRecords.size(); k++) {
            //check the emailRecords and send email 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:28:42.297

使用的优点`FixedThreadPool`是您**不必一次又一次地进行昂贵的创建线程的过程**，它**在一开始就完成了**......见下文..

```
ExecutorService executor = Executors.newFixedThreadPool(100);

ArrayList<String> arList =  Here your Email addresses from DB will go in ;

for(String s : arList){

     executor.execute(new EmailAlert(s));

 }

public class EmailAlert implements Runnable{

  String addr;

   public EmailAlert(String eAddr){

         this.addr = eAddr;

       }

  public void run(){

     // Do the process of sending the email here..

  }

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:51:06.257

据我所知，您很可能是单线程数据检索，而多线程的电子邮件发送。粗略地说，您将循环浏览您的结果集并建立一个记录列表。当该列表达到一定大小时，您制作一个副本并将该副本发送到线程中进行处理，并清除原始列表。在结果集的末尾，检查列表中是否有未处理的记录，并将其发送到池中。

最后，等待线程池处理完所有记录。

这些方面的东西：

```
protected void processRecords(String countryName) {
  ThreadPoolExecutor executor = new ThreadPoolExecutor(10, 10, 10, TimeUnit.SECONDS, 
        new ArrayBlockingQueue<Runnable>(5), new ThreadPoolExecutor.CallerRunsPolicy());

   List<String[]> emaillist = new ArrayList<String>(1000);

   ResultSet rs = ....

   try {
     while (rs.next()) {
        String user[] = new String[2];
        users[0] = rs.getString("userid");
        users[1] = rs.getString("emailAddress");

        emaillist.add(user);
        if (emaillist.size() == 1000) {
            final List<String[]> elist = new ArrayList<String[]>(emaillist);
            executor.execute(new Runnable() {
                public void run() {
                    sendMail(elist);
                }
            }
            emaillist.clear();
        }
     }
   }
   finally {
     DbUtils.close(rs);
   }

   if (! emaillist.isEmpty()) {
            final List<String[]> elist = emaillist;
            executor.execute(new Runnable() {
                public void run() {
                    sendMail(elist);
                }
            }
            emaillist.clear();
   }

   // wait for all the e-mails to finish.
   while (! executor.isTerminated()) {
       executor.shutdown();
       executor.awaitTermination(10, TimeUnit.DAYS);
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:28:13.670

创建第二个线程来完成所有工作而不是在主线程中执行相同的工作不会帮助您避免`emailRecords`在处理任何记录之前用 500 万条记录填充列表的问题。

听起来您的目标是能够从数据库中读取数据并并行发送电子邮件。与其担心代码，不如先为您想要完成的工作考虑一个算法。像这样的东西：

1.  在一个线程中，从数据库中查询记录，并*为每个*结果添加一个作业到 ExecutorService
2.  该工作向一个人/地址/记录发送电子邮件。

或者

1.  分批从数据库中读取记录（50、100、1000 等）
2.  将每个批次提交给 executorService

# php - 使用 PHP 获取单个数据库行

> ID：12305177
> 
> 赞同：-3
> 
> 时间：2012-09-06T17:17:11.110
> 
> 标签：php, mysql, row, opencart

这听起来既愚蠢又容易，但我在这里不是 100% 确定的。

我有这个代码：

```
$query = $this->db->query("MY QUERY"); 
```

查询将产生一行，我基本上想从该行中获取名为“id”的列，以便我可以回显类似 $query->db->row->id..

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:19:40.630

没有任何细节，这是一个疯狂的猜测

```
$query = $this->db->query('SELECT id FROM table LIMIT 1,1')
$results = $query->rows();
//if rows() returns an object
$id = $results->email_id;

//if that rows() functions returns ( [row] => Array ( [email_id] => 1467)) 
$id = $results['row']['email_id']; 
```

# algorithm - 生成唯一 ID 的类/对象

> ID：12305180
> 
> 赞同：1
> 
> 时间：2012-09-06T17:17:15.657
> 
> 标签：algorithm, data-structures, random

我正在使用 C#，但即使您不知道，也应该很容易理解这个问题。

这是我的问题：我想将一些对象保存在类似哈希集的数据结构中，以便可以根据`int`ID 查找它们。这些对象具有可变属性，因此对它们进行散列不是一种选择（我需要一些关于它们的常量来散列，是吗？）。

我所做的是开发以下接口：

```
public interface IUniqueIDCollection
{
    // Can return any int that hasn't been requested yet.
    public int RequestUniqueID();

    // Undos the requesting of an int
    public int ReleaseUniqueID(int uniqueID);
} 
```

我最初的想法是在请求 ID 时将内部计数器存储在`IUniqueIDCollection`增量中。但是，一旦 ID 被释放，我将不得不跟踪已删除的范围或单个 ID。我认为后者会更好。但是，如果我使用计数器（或任何循环函数）来生成 ID，我将遇到一个问题，即必须检查已连续请求的 ID 序列，一旦计数器回绕，则未释放。

启发式是这样的：假设一次最多请求 5,000 个 ID。但是，ID 通常会请求然后发布。释放往往会在范围内发生——即可能会一次请求全部 100 个，然后在很短的时间间隔内释放所有 100 个。

我知道我可以使用 GUID 或其他东西而不是 int，但我想节省 ID 的空间/带宽/处理时间。

所以我的问题是：就伪代码而言，给定启发式方法，我上面给出的接口中的请求和释放方法应该是什么样子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:36:57.057

如果您确定已发布的 ID 可以安全地立即重复使用（即，如果新对象分配了最近发布的 ID，则不会有对旧 ID 的陈旧引用会混淆），您可以使用首次发布ID。所以当一个 ID 被释放时，你把它放在队列的末尾。当请求新 ID 时，您使用队列中的第一个 ID。如果队列为空，则增加内部计数器并给出新数字。

这种实现的优点：

*   所有操作都是 O(1)。您永远不会迭代集合或范围。您只能在队列的末尾插入、从队列的前面删除或增加您的计数器。
*   内存占用应该相当低，因为您正在尝试尽快用完队列。
*   实施很简单。

缺点：

*   您将快速重用 ID，因此您不会使用整个索引范围来防止新对象使用与最近发布的对象相同的 ID。
*   您甚至无法通过查看对象的 ID 来猜测对象的年龄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:40:48.257

[在几乎所有情况下，这可能比上面的Tom Panning](https://stackoverflow.com/a/12305475/337475)更糟糕，但您可以使用 BitArray 来跟踪正在使用的 ID。内存使用量与您拥有实时 ID 的总位数一样多；最坏的情况是 512MB 用于映射所有 32 位整数。释放很容易：只需将相应的位设置为 0。获取（或请求）ID 需要搜索 0 位，如果找不到，则扩展 BitArray。

如果您仍然可以选择扩展您的 BitArray（即您还没有达到 512MB），您可能不想在决定扩展之前搜索所有 BitArray - 一直这样做会很慢。您当然不会总是希望从同一个索引开始：跟踪您找到的最后一个 0 并从那里开始搜索可能是个好主意。

我可以看到的一个优点是一旦所有或几乎所有对象被释放，内存使用情况。那么 Tom Panning 的解决方案需要的内存至少是这个的 32 倍。但是，我希望在典型用法中该解决方案使用较少。

# .net - 解析逗号不被括号包围

> ID：12305182
> 
> 赞同：1
> 
> 时间：2012-09-06T17:17:24.440
> 
> 标签：.net, regex, regex-lookarounds

输入是以逗号分隔的字段列表。

这是一个例子。

```
tna,performance,ma[performance,3],price 
```

问题是某些“字段”在方括号中指定了参数，并且这些参数也有逗号。

我可以用什么正则表达式来打破像逗号这样的字符串，只有当它们在括号之外时。我希望最终结果是

```
tna
performance
ma[performance,3]
price 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:05:57.677

这就是你需要的

```
(?<!\[[\w,]*?), 
```

如果括号嵌套在括号内，请使用它，因为在那种情况下上面会失败..

```
(?<!\[[\w,]*?),(?![\w,]*?\]) 
```

在[这里工作](http://regexhero.net/tester/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:37:47.323

尝试这个 ：

```
"[a-z0-9]*(\\[[a-z0-9\\[\\],]+\\])*" 
```

# eclipse - 如何在我的 Eclipse 类路径中找到并消除不需要的条目？

> ID：12305183
> 
> 赞同：1
> 
> 时间：2012-09-06T17:17:31.197
> 
> 标签：eclipse, classpath

我们的源代码存储库在 .settings/Program.launch 中有一个 Eclipse 运行配置，在 .classpath 中有一个类路径配置，以及一组用户库，几个月前我们都被曾经在我们办公室的 Eclipse 专家指导导入。用户库集包括一个已定义的名为 JBoss6.0.0.Final 的用户库，它指向 JBoss 内部的所有或大部分 jar，并且 Program.launch 运行配置包括此 JBoss6.0.0.Final 用户库。

我现在从 slf4j 得到一个冲突，告诉我我需要删除我的类路径中的一个 slf4j 绑定 jar：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/C:/workspace/project/core/lib/slf4j-log4j12-1.6.6.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/C:/jboss-6.0.0.Final/client/slf4j-jboss-logging.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory] 
```

我理解为什么会收到此警告，并且我想通过将 slf4j-jboss-logging.jar 从 Program.launch 的类路径中删除来解决这种情况。我去了 Window -> Preferences -> Java -> Build Path -> User Libraries，我打开了 JBoss6.0.0.Final 用户库，并删除了 slf4j-jboss-logging.jar 。但是当我跑步时，我仍然得到同样的警告。

我的类路径中包含这个 jar 是什么？我想删除它。

我将我的用户库导出到一个 XML 文件并对其进行搜索，但 slf4j-jboss-logging.jar 根本不在其中。我阅读了 Project.launch 文件，它没有引用这个 jar。.classpath 文件没有引用这个 jar，但它确实包含以下行，我认为它引入了 JBoss6.0.0.Final 用户库：

```
<classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/JBoss6.0.0.Final"/> 
```

我查看了 Project.launch 的运行配置下的类路径选项卡，它似乎显示了 .classpath 文件定义的所有内容。

我的类路径中这个有问题的 jar 是从哪里来的？

我正在运行 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:25:44.183

尝试使用`jboss-classloading.xml`，这应该允许您将您的 jar 与 jboss 中包含的 jar 隔离开来。看看这个[链接](http://phytodata.wordpress.com/2010/10/21/demystifying-the-jboss5-jboss-classloading-xml-file/)是否有帮助。

# android-layout - 使用 ActionBarSherlock 时在某个活动中突出显示操作栏中的项目

> ID：12305185
> 
> 赞同：0
> 
> 时间：2012-09-06T17:17:55.630
> 
> 标签：android-layout, android-actionbar, actionbarsherlock

我正在对我已经工作了很长一段时间的应用程序进行最后的润色，虽然我了解如何使用继承来重新设置现有组件的样式，但我在搜索如何完成这最后一件事时遇到了空白。

我想在代表我当前活动的文本或图标后面应用自定义颜色/图像。这类似于选项卡在被选中时在其下方突出显示的方式。我已经在使用这些选项卡，并且已经弄清楚如何更改作为选项卡栏中小下划线的图像资源。现在我只需要为操作项完成相同的外观。

在过去的一天半里，我忽略了 actionbarsherlock 库，但我没有看到任何地方可以做我想做的事情。我不得不想象这样的事情是可以做到的，但就像我之前说的那样，到目前为止我还不够。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:24:33.973

我想出了一个简单的方法来做我之前问的事情。我刚刚在 xml 中创建了一个正方形，在其上放置文本，为其分配我想要的渐变和颜色，并将其分配给我想要在我所在的活动中突出显示的操作项。

# php - 性能与模块化：将 JS 集成到 PHP 中或分离 custom.js

> ID：12305187
> 
> 赞同：1
> 
> 时间：2012-09-06T17:18:04.487
> 
> 标签：php, javascript, performance

我是 Javascript 和一般开发的新手，并且有一个绝对初学者的问题：我想更多地了解以下两个星座的优缺点，特别是关于执行速度和服务器负载/请求。

1.  将所有自定义 JS 代码放入 PHP 代码中并从那里调用它

2.  将所有自定义 JS 代码放在 custom.js 中，然后在 PHP 中调用 JS 函数

一方面，我更喜欢将我的所有 JS 代码分开，以使事情整洁干净，但另一方面，我想由于额外的服务器请求，加载页面需要更长的时间。当我将所有代码放在自定义 JS 文件中时，会不会有明显的速度差异？是否有任何特定场景建议将 JS 放在 PHP 中或将其分开？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:43:49.273

Http 请求是并行运行的，因此加载 js 文件可能根本不会引起注意，假设您还必须等待图像和其他资源加载。好处大于潜在的缺点。

作为额外的奖励，js 文件通常会被缓存，而 html 会在每次请求页面时重新加载。

*注意：*如果您有大量脚本，您将遇到加载速度问题，因为浏览器对可以并行发出的请求数量有限制。在这种情况下，您应该考虑缩小和组合它们。尝试使用 php 自动缩小 code.google.com/p/minify。

最后：在 php 中有 js 代码对于可维护性来说是很糟糕的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:27:56.853

JS 在单独的文件中 - 附加请求。但我不会说这是一个问题，因为它会被浏览器缓存。如果您有很多 js 文件 - 将它们收集到一个文件中以避免多个请求（有特殊工具可以将单独的 JS 文件编译为一个文件并最小化其大小）。

把它放到 PHP 代码中是很糟糕的。它应该在单独的文件中。

> 一方面，我更喜欢将我的所有 JS 代码分开以使事情整洁干净，但另一方面，我认为解析整个代码需要更长的时间。

为什么？JS 在客户端执行。不在服务器端。PHP 不会解析 JS 文件。同时 - 如果您将 JS 代码放在 PHP 文件中 - PHP 需要将其回显到浏览器，这是 PHP 引擎的额外工作。另外，在 PHP 代码中，它会在 PHP 执行的任何时候发送到浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:20:43.957

总是在干净可读的代码方面犯错，以免陷入[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)陷阱。

您始终可以重构性能不佳的代码以使其更快，从低级优化转移到更抽象的设计比反过来（抽象到低级）要困难得多

# maven - 如何为maven父项目生成jar

> ID：12305190
> 
> 赞同：19
> 
> 时间：2012-09-06T17:18:31.643
> 
> 标签：maven, parent, pom.xml

Maven 需要一个父项目

`<packaging>pom</packaging>`

父 pom.xml 中的子句。安装这样的项目时，只有一个 pom-file 生成到 maven 存储库中。无论父项目是否有 Java 代码，都不会生成 jar 文件。这迫使我有额外的空父项目，这是矫枉过正。从逻辑上讲，我的一些图书馆可能同时是父母。

有没有办法为父项目生成 pom 和 jar 文件，而无需`packaging`在安装之间删除/添加子句？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T17:32:24.433

使用 Maven Jar Plugin 和 Maven Build Helper。示例 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>test</groupId>
  <artifactId>test</artifactId>
  <version>1.0</version>

  <packaging>pom</packaging>

  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>attach-artifacts</id>
            <phase>package</phase>
            <goals>
              <goal>attach-artifact</goal>
            </goals>
            <configuration>
              <artifacts>
                <artifact>
                  <file>test-${project.version}</file>
                  <type>jar</type>
                </artifact>
              </artifacts>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.4</version>
        <executions>
          <execution>
            <id>default</id>
            <goals>
              <goal>jar</goal>
            </goals>
            <phase>package</phase>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

Maven 构建结果：

```
mvn install
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building test 1.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- build-helper-maven-plugin:1.7:attach-artifact (attach-artifacts) @ test ---
[INFO] 
[INFO] --- maven-jar-plugin:2.4:jar (default) @ test ---
[WARNING] JAR will be empty - no content was marked for inclusion!
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ test ---
[INFO] Installing /home/username/projects/test/pom.xml to /home/username/.m2/repository/test/test/1.0/test-1.0.pom
[INFO] Installing /home/username/projects/test/test-1.0 to /home/username/.m2/repository/test/test/1.0/test-1.0.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.805s
[INFO] Finished at: Thu Sep 06 13:33:20 EDT 2012
[INFO] Final Memory: 4M/119M
[INFO] ------------------------------------------------------------------------ 
```

关于 Maven 实践的说明：

Parent modules are typically where you define the dependencies and plugins used in common by all your child modules. It rarely has output of its own. You probably want to have a "distribution" sub-module that aggregates all your other module artifacts, rather than attempting to do it in the parent module.

# java - 不使用gradle的java插件编译java项目？

> ID：12305191
> 
> 赞同：2
> 
> 时间：2012-09-06T17:18:35.923
> 
> 标签：java, gradle

所以，我`build.gradle`看起来像这样，

```
task compile(type: Compile){
    dependsOn 'clean', 'init'

    classpath = files('bin', 
                    'lib\\foo-agent-dist-2.0.0-SNAPSHOT.jar',
                    'lib\\foo-common-2.0.0-SNAPSHOT.jar',
                    'lib\\foo-communication-api-2.0.0-SNAPSHOT.jar',
                    'lib\\spring-beans-3.1.2.RELEASE.jar',
                    'lib\\spring-context-3.1.2.RELEASE.jar',
                    'lib\\spring-web-3.1.2.RELEASE.jar',
                    'lib\\sqljdbc4-3.0.jar')
    destinationDir = file('bin')
    source = fileTree('src')
    sourceCompatibility = '1.7'
    targetCompatibility = '1.7'
}

task clean(type: Delete){
    delete 'bin'
}

task init(type: Copy){
    //TODO: Create "bin" directory if it doesn't exist
    from 'src'
    into 'bin'
    exclude '**/*.java', '**/*.bak'
    includeEmptyDirs = false
} 
```

当我执行`compile`任务时，我得到以下异常

```
[sts] -----------------------------------------------------
[sts] Starting Gradle build for the following tasks: 
[sts]      :compile
[sts] -----------------------------------------------------
:clean
:init
:compile

FAILURE: Build failed with an exception.

* What went wrong:
A problem was found with the configuration of task ':compile'.
> No value has been specified for property 'dependencyCacheDir'.

* Try:
Run with --info or --debug option to get more log output.

* Exception is:
org.gradle.api.tasks.TaskValidationException: A problem was found with the configuration of task ':compile'.
    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:54)
    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:41)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:247)
    at org.gradle.execution.DefaultTaskGraphExecuter.executeTask(DefaultTaskGraphExecuter.java:192)
    at org.gradle.execution.DefaultTaskGraphExecuter.doExecute(DefaultTaskGraphExecuter.java:177)
    at org.gradle.execution.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:83)
    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:36)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
    at org.gradle.cache.internal.DefaultCacheAccess$1.create(DefaultCacheAccess.java:111)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:126)
    at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:109)
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:103)
    at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
    at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)
    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:110)
    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:78)
    at org.gradle.tooling.internal.provider.ExecuteBuildAction.run(ExecuteBuildAction.java:31)
    at org.gradle.tooling.internal.provider.ConfiguringBuildAction.run(ConfiguringBuildAction.java:94)
    at org.gradle.launcher.daemon.protocol.Build.run(Build.java:68)
    at org.gradle.launcher.daemon.protocol.Build.run(Build.java:64)
    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:45)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:45)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:24)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.StartStopIfBuildAndStop.execute(StartStopIfBuildAndStop.java:28)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.ReturnResult.execute(ReturnResult.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$4.call(ForwardClientInput.java:116)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$4.call(ForwardClientInput.java:114)
    at org.gradle.util.Swapper.swap(Swapper.java:38)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:114)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:61)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy.doBuild(StartBuildOrRespondWithBusy.java:49)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.HandleStop.execute(HandleStop.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.CatchAndForwardDaemonFailure.execute(CatchAndForwardDaemonFailure.java:32)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.HandleClientDisconnectBeforeSendingCommand.execute(HandleClientDisconnectBeforeSendingCommand.java:21)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.StopConnectionAfterExecution.execute(StopConnectionAfterExecution.java:27)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)
    at org.gradle.launcher.daemon.server.exec.DefaultDaemonCommandExecuter.executeCommand(DefaultDaemonCommandExecuter.java:55)
    at org.gradle.launcher.daemon.server.Daemon$1$1.run(Daemon.java:123)
    at org.gradle.messaging.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66)
Caused by: org.gradle.api.InvalidUserDataException: No value has been specified for property 'dependencyCacheDir'.
    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:46)
    ... 68 more

BUILD FAILED 
```

为什么编译java项目需要`dependencyCacheDir`定义？当我定义依赖缓存目录时，它抱怨它找不到系统 Java 编译器。

什么？为什么！？什么给了，gradle？这整个经历非常令人沮丧和不必要的复杂......即将完全放弃它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T11:38:09.313

如果您决定使用 Java 插件：

```
apply plugin : 'java'

sourceCompatibility = '1.7'
targetCompatibility = '1.7'

sourceSets {
   main {
      java {
         srcDirs = ['src']
      }
   }
}

buildDir = 'bin'

repositories {
    flatDir dirs: 'lib'
}

dependencies {
    compile ':foo-agent-dist:2.0.0-SNAPSHOT',
            ':foo-common:2.0.0-SNAPSHOT',
            ':foo-communication-api:2.0.0-SNAPSHOT',
            ':spring-beans:3.1.2.RELEASE',
            ':spring-context:3.1.2.RELEASE',
            ':spring-web:3.1.2.RELEASE',
            ':sqljdbc4:3.0'
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T23:53:55.170

[使用JavaCompile](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.compile.JavaCompile.html)任务类型可能会更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:31:22.413

你为什么不使用Java插件？手动配置所有内容将需要更多努力。

如果您需要有关“系统 java 编译器”错误的帮助，请发布错误消息和堆栈跟踪。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-29T18:52:28.047

这对我有用，只需对您的代码进行必要的更改，以此为例

```
apply plugin: 'java'

configurations {
     querydslapt
}

sourceSets {
     target
}

sourceSets.target.java.srcDirs = ['src/main/target']

dependencies {
    compile ...libraries....

        querydslapt 'com.mysema.querydsl:querydsl-apt:2.7.1'

    testCompile project(':fastappoint-test')
}

task generateQueryDSL(type: Compile, group: 'build', description: 'Generates the QueryDSL query types') {
         source = sourceSets.main.java
         classpath = configurations.compile + configurations.querydslapt
         options.compilerArgs = [
                "-proc:only",
                "-processor", "com.mysema.query.apt.jpa.JPAAnnotationProcessor"
         ]
         destinationDir = sourceSets.target.java.srcDirs.iterator().next()
         dependencyCacheDir = new File(destinationDir, "dependencyCacheDir")
}
compileJava.dependsOn generateQueryDSL 
```

# asp.net-mvc - MVC3 记录请求的最佳方式

> ID：12305195
> 
> 赞同：4
> 
> 时间：2012-09-06T17:18:46.907
> 
> 标签：asp.net-mvc, asp.net-mvc-3, logging, request

我想记录对我的 MVC 3 应用程序的所有请求，包括请求的 URL、用户的 IP 地址、用户代理等。最好的地方是哪里，

1）使用基本控制器？

2）使用动作过滤器？

3) 其他人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T17:21:28.570

我在我的 BaseController 中执行此操作。像这样的东西：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    // If in Debug mode...
    if (filterContext.HttpContext.IsDebuggingEnabled)
    {
        var message = string.Format(CultureInfo.InvariantCulture,
                                    "Leaving {0}.{1} => {2}",
                                    filterContext.Controller.GetType().Name,
                                    filterContext.ActionDescriptor.ActionName.Trim(),
                                    filterContext.Result);
        Logger.Debug(message);
    }

    // Logs error no matter what
    if (filterContext.Exception != null)
    {
        var message = string.Format(CultureInfo.InvariantCulture,
                                    "Exception occured {0}.{1} => {2}",
                                    filterContext.Controller.GetType().Name,
                                    filterContext.ActionDescriptor.ActionName.Trim(),
                                    filterContext.Exception.Message);
         Logger.Error(message);
     }

     base.OnActionExecuted(filterContext);
} 
```

希望你能明白。

您还可以使用以下命令在执行操作之前记录：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T17:22:17.060

[如果你问我，一个`HttpModule`](http://www.codeproject.com/Articles/95165/Building-a-Simple-Logging-HTTP-Module-with-Logging)似乎是最合适的。

在调用任何特定控制器之前，您正在谈论的所有日志记录数据都是可用的。因此，如果您在控制器外部进行日志记录，那么您甚至可以捕获那些不是有效控制器操作的请求。并且没有必要用一些真正的横切关注点来弄乱你的控制器代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-24T08:47:49.393

您可以在呈现单个请求时触发多个操作方法。考虑在布局页面上使用[RenderAction](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.childactionextensions.renderaction%28v=vs.98%29.aspx)，如下所示：

```
Html.RenderAction("Navigation", "Menu") 
```

值得注意的是，如果您选择使用操作过滤器进行日志记录，那么您将拥有两个具有相同信息的日志条目。

# php - PHP将Excel导出到特定路径？

> ID：12305204
> 
> 赞同：1
> 
> 时间：2012-09-06T17:19:17.763
> 
> 标签：php, mysql, csv, usb, export

是否可以将 PHP MySQL Excel 工作表导出到指定路径，例如 USB 闪存驱动器。这是因为我使用 php 作为销售点，而我现在想要的只是单击一个按钮-它将从 MySQL 数据库中收集记录并将其作为 excel 或 csv 文件导出到 USB 闪存驱动器。

我试图用谷歌搜索它，但我似乎找不到任何东西。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:25:59.087

您需要编写文件。要写入 USB 驱动器，您只需指定正确的文件路径。如果您在 *nix 上，它就像`/media/USB/`在 linux 或`/Volumes/USB/`Mac 上一样。对于 Windows，它就像`F:/`.

如此粗略的例子就像

```
$a = array('1','2','3'); //This is imaginable row from MySQL
$f = fopen('F:/mycsv.csv', 'w');
fputcsv($f, $a);
fclose($f); 
```

手册`fputcsv`在[这里](http://php.net/manual/en/function.fputcsv.php)。

如果需要，您可以通过应用程序支持的任何方式向用户询问文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:31:44.667

将其另存为excel不是一个简单的过程，但编写一个csv相对简单。

```
$temp = tempnam(sys_get_temp_dir(),'tmp');
$handle = fopen($temp,'w');
$query = $pdo->prepare("select * from table");
$query->execute();
$row=$statement->fetch();
$keys=array_keys($row);
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=export_'.date('dmY').'.csv');
fputcsv($handle,$keys);
while($row){
fputcsv($handle,$row);
$row=$statement->fetch();}
echo file_get_contents($temp);
fclose($handle); 
```

这会在您的临时文件夹中创建一个临时文件，您将 csv 写入该文件，然后将其提供 csv 标题并将其回显，从而为用户提供一个保存文件框。我在循环之前调用 $row 一次以获取带有 array_keys 的表列并首先输出这些列，然后在循环结束时调用 $row=$statement->fetch() 进行循环。

# http - 尝试调用 Web 服务时出现 CriticalIOException

> ID：12305205
> 
> 赞同：1
> 
> 时间：2012-09-06T17:19:20.353
> 
> 标签：http, blackberry

我在尝试在 Blackberry Torch 9800 上建立 HTTP 连接时遇到了一点麻烦。这是出现问题的行：

```
HttpConnection connection = (HttpConnection)Connector.open(URL); 
```

我的手机没有数据计划，我试图通过 wifi 做到这一点。几个月来我一直以这种方式做得很好。但突然它给了我一个`CriticalIOException`.

这是我的连接字符串：

```
http://mysite.mycompany.com/mws/MyWebService/MyWebService.asmx;interface=wifi 
```

我不知道为什么会这样，也不知道该怎么办。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:18:56.503

请不要继续使用这种传统`Connector.open()`方法。这就是在 JavaME 中打开连接的方式，并且由于 RIM 在它们之上构建了它的库，他们想出了一个基于后缀的 hack 来选择传输类型。这导致脏代码容易被破坏，并给新开发人员（以及高级开发人员）带来了极大的痛苦。

在 OS 5.0 中引入的 RIM`ConnectionFactory`专门解决了这类问题。这是在 2008 年，伙计们，我们在 2012 年！

[看看吧](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/io/transport/ConnectionFactory.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T03:19:35.307

通常在使用 wifi appender 时，也会使用 deviceside appender。不过，我不确定这是否与您的问题有关。

```
 ;deviceside=true;interface=wifi 
```

# javascript - Zeroclipboard 复制文本后切换页面

> ID：12305211
> 
> 赞同：0
> 
> 时间：2012-09-06T17:19:53.800
> 
> 标签：javascript, zeroclipboard

我看过很多关于 zeroclipboard 的帖子，但不幸的是，这些回复对像我这样的脚本新手没有帮助（可以理解）。我有一个页面，上面有一堆优惠券。当有人点击优惠券时，我想复制优惠券的代码，然后将其带到优惠券的链接。我可以将代码复制到警报中，但我不知道如何将它们带到我在每个优惠券的链接中指定的网址。有人可以告诉我一种方法吗？这是我的代码...

```
<section style="position:relative">
<div id="sliders" style="margin:0 auto; width: auto; height:auto;">
    <div class="scrollable" id="scrollable">
        <div id="slider1" class="items">

            <div onclick="window.open('http://url-one.com','_blank');"> <!--THERE ARE SEVERAL OF THESE-->
                html...
                <div id="clip_container1">
                    <p id="coupon1" link="url-one.com" onMouseOver="move_swf(this)">copytext1</p>
                </div>
            </div>

        </div>
    </div>
</div>
</section>

<script>
ZeroClipboard.setMoviePath( '<?= base_url("resource/js/ZeroClipboard.swf");?>' );
var clip = null;
//  function $(id) { return document.getElementById(id); } //not needed?
function init() 
{
    clip = new ZeroClipboard.Client();
    clip.setHandCursor( true );
    clip.addEventListener('complete', function(client, text) {
        alert("Copied Coupon Code to your clipboard:\n" + text);
//          now open "link" in a new window...;   
    });
   }

function move_swf(ee)
{ 
   copything = document.getElementById(ee.id+"").innerHTML;
   clip.setText(copything.substring(23));
      if (clip.div)
     {    
         clip.receiveEvent('mouseout', null);
         clip.reposition(ee.id);
      }
      else{ clip.glue(ee.id);   
      }
      clip.receiveEvent('mouseover', null);
 }    
window.onload = init;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:33:51.470

通过包含的优惠券代码获取所需的 DOM 元素（假设优惠券代码是唯一的）

在警报代码下方添加如下内容：

（假设 jquery 在我添加的代码行中）：

```
clip.addEventListener('complete', function(client, text) {
    alert("Copied Coupon Code to your clipboard:\n" + text);

    //Add the two lines below

    var mylink = jQuery( "p:contains(" + text + ")" ).attr('link'); 
    myWhateverOpenSesameFunctionToOpenMyLink(mylink);
}); 
```

# html - 如何在 CSS 中垂直偏移项目符号或内容？

> ID：12305216
> 
> 赞同：6
> 
> 时间：2012-09-06T17:20:18.467
> 
> 标签：html, css

看这张图片：
![子弹](../Images/7d7be9be89a26cb20a8a728100aa42a5.png)

这有点不合时宜，我想将内容向上移动，或者将项目符号本身向下移动。我试过填充、边距和定位无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:25:20.797

您可以尝试设置`line-height`等于图像的高度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:26:39.640

尝试`vertical-align`在列表项上设置属性。可能的值为：

```
baseline | sub | super | text-top | text-bottom | middle | top | bottom | <percentage> | <length> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/xFJvT/)**

**HTML**

```
<ul>
    <li>a</li>
    <li>b</li>
    <li>c</li>
</ul> 
```

​<strong>CSS

```
ul {
    list-style-image: url(http://cdn1.iconfinder.com/data/icons/c9d/check.png);
}
li {
    vertical-align:top;   
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:29:02.190

使用垂直对齐 css 属性来定位图像或行中的文本。

例如：

```
IMG { vertical-align:middle} 
```

[http://www.w3.org/wiki/CSS/Properties/vertical-align](http://www.w3.org/wiki/CSS/Properties/vertical-align)

# ios - 可以在 MKMapKit 上绘制自定义路线吗？(iOS)

> ID：12305217
> 
> 赞同：0
> 
> 时间：2012-09-06T17:20:20.507
> 
> 标签：ios, mkmapview, mapkit

我知道可以向 iOS 地图添加注释。

是否可以在我的 MKMapView 上绘制自定义路径（例如穿过公园的路径），然后使用该自定义路径在 MKMapView 上创建路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:39:09.250

1.  添加 MKCircle 叠加层
2.  在 viewForOverlay 中：创建一个 bezierPath（CG 或 UI）并将其添加到标准 MKOverlayPathView 实例的路径属性中

通过this详细了解

[http://spitzkoff.com/craig/?p=65](http://spitzkoff.com/craig/?p=65)

希望能帮助到你。快乐编码:)

# sql - Oracle sql - 将值分配给空值或如果不为空值则保留值

> ID：12305222
> 
> 赞同：1
> 
> 时间：2012-09-06T17:20:35.290
> 
> 标签：sql, oracle11g, isnull, notnull

我有这个任务，如果值为空，我需要分配一个值。

如果它不为空，那么我想保留已经存在的值..（这让我很困惑）我知道它必须很容易..

谢谢，艾尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:23:17.167

```
UPDATE myTable
  SET myCol = myDefaultValue
  WHERE myCol IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:27:24.100

[Coalesce()](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions023.htm)是您应该使用的，它也是 ansi-99 标准的一部分。

```
Update [Table] Set
   Col1 = coalesce(Col1, @Col1Val)
  ,Col2 = coalesce(Col2, @Col2Val)
Where ... 
```

# hibernate - 检索数据库查询返回的数据 Java EE, hibernate

> ID：12305227
> 
> 赞同：0
> 
> 时间：2012-09-06T17:20:51.083
> 
> 标签：hibernate, list, jakarta-ee, methods, return-value

我有这个返回列表的方法：

```
public List getPourcentageDivision() {
    List cs = null;
    try {                       

        org.hibernate.Transaction tx = session.beginTransaction();

        Query q = session.createSQLQuery("SELECT u.division,COUNT(c.id) AS nb_commandes FROM utilisateur u LEFT OUTER JOIN commande c ON c.utilisateur_id = u.id GROUP BY u.division");
        if(q.list().size() > 0)
        cs = q.list();            

        session.clear();
        session.flush();
    } catch (Exception e) {

        e.printStackTrace();

    }
    return cs;
} 
```

如您所见，每一行都返回两个属性，就像在此查询中一样：

```
SELECT u.division,COUNT(c.id) 
```

你能记得我如何从这个列表中访问这些数据吗，因为我养成了一个习惯，如果有的话，`List<MyClass>`很容易检索数据，但这次我面对一个复杂的查询来绘制图表

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:14:54.743

结果列表中的元素是长度为 2 的对象数组（选择语句中的项目数）。数组的第一个元素是表示的值`u.division`，第二个匹配到`COUNT(c.id)`

```
for (Object[] row: (List<Object[]>) result ) {
    Object division = row[0];
    Object count = row[1];
} 
```

根据提供的信息，无法分辨`division`. 可以通过添加以下内容来观察返回值的类型（当然仅适用于非空值）：

```
System.out.println(division.getClass()); //u.division
System.out.println(count.getClass()); //COUNT(c.id) 
```

# apache - Apache .htaccess 将所有 url 重写为 https 主页，但重写为 https 当前页面的例外情况除外

> ID：12305228
> 
> 赞同：1
> 
> 时间：2012-09-06T17:20:54.283
> 
> 标签：apache, .htaccess

我正在尝试将所有[http://www.example.com/](http://www.example.com/) * url 重写为[https://www.example.com/](https://www.example.com/)除了某些页面。我可以让全部重写工作没有问题：

```
RewriteCond %{SERVER_PORT} 80
RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L] 
```

但是，如果我尝试在向前捕获所有主页之前添加异常，它们将不起作用。另外，如果我只是尝试自己添加它们（注释掉前面的规则），它们就不起作用。

```
RewriteCond %{SERVER_PORT} 80
RewriteRule ^/?products/(.*) https://%{SERVER_NAME}/products/$1 [R,L] 
```

所以，网站上有几个页面我想要简单的 http-> https 重写。例如，如果有人去，`http://.../products`他们应该被转发到`https://.../products`。

另外，我想确保我拥有的任何规则都适用于`www.example.com/products`and `example.com/products`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:28:33.817

用。。。来代替

```
RewriteCond %{SERVER_PORT} 80
RewriteRule ^products/(.*)$ https://%{SERVER_NAME}/products/$1 [R,L] 
```

# asp.net-mvc - 网址重写器弄乱了我的表单帖子

> ID：12305229
> 
> 赞同：0
> 
> 时间：2012-09-06T17:21:07.680
> 
> 标签：asp.net-mvc, url-rewriting

我需要一些想法，我将 url 重写器用于 seo 目的。也许我不应该这样做我不确定你是否对此有任何意见让我知道

我确保所有请求都针对 www.mydomian.com/home 和 www.mydomain.com/home/index 定向到 www.mydomai.com，因为所有页面都相同，但是使用 mvc 显然您可以通过所有人访问它们这些网址中的.. 我认为这可能会导致 seo 出现重复的内容问题，所以我写了一些规则这对任何对这些 url 重定向到 www.mydomin.com 的请求都有效

我遇到的问题是我有一个更新到家庭控制器的部分表单帖子它不会像在网络面板中那样发回它说 url permenatly move 我猜这与我的 url 重写有关。有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:54:11.523

如果其他人有这个问题，我已经解决了......我正在使用 url 编写器使 url 友好，即将它们全部小写以避免重复，并去掉尾部斜杠以确保我没有稍微不同的链接去同一个地方.. 如果您在名称中使用大写字母来称呼表格，则表格不喜欢这样.. 它通过 ajax 启动表格，但是当您进行更新时，它说在 updatepost 的网络选项卡中删除了 301。您需要确保使用小写控制器和操作来调用它们。

# twitter-bootstrap - Bootstrap 多个缩略图轮播显示宽度重叠

> ID：12305230
> 
> 赞同：1
> 
> 时间：2012-09-06T17:21:08.723
> 
> 标签：twitter-bootstrap, carousel

谁能指出我如何摆脱 twitter 多个缩略图右侧的（看起来像 1px）重叠 Twitter Bootstrap 轮播在这里> [http://sxeo.co.uk/sxeo-services-seo-experts .htm](http://sxeo.co.uk/sxeo-services-seo-experts.htm)以最好的方式？

我还把“旧”和“新”元素放在页面的底部，因为我没有手机，只能在我的侄女苹果手机上快速浏览一下，当她早些时候出现时任何人请告诉我移动设备的最佳做法请记住，旧页面或新页面可能是当前页面上的任何页面（如果有意义的话）。

有人可以帮忙吗？

# c# - Resharper 重新设计了一个 for 循环。这个 LINQ 语句在一行中做的太多了吗？

> ID：12305232
> 
> 赞同：3
> 
> 时间：2012-09-06T17:21:14.347
> 
> 标签：c#, .net, linq, refactoring, resharper

```
[WebMethod(Description = "Return all activities by Task.")]
public IList<ActivityDto> GetActivitiesByTaskID(int taskID)
{
    IList<Activity> activities = ActivityDao.GetByTaskID(taskID);
    IList<ActivityDto> activityDtos = new List<ActivityDto>(activities.Count);

    foreach(Activity activity in activities)
        activityDtos.Add(ActivityDto.Create(activity));

    return activityDtos;
} 
```

缩短为：

```
[WebMethod(Description = "Return all activities by Task.")]
public IList<ActivityDto> GetActivitiesByTaskID(int taskID)
{
    return ActivityDao.GetByTaskID(taskID).Select(ActivityDto.Create).ToList();
} 
```

我觉得因为我不得不问 - 它可能做得有点太多了。不过，唯一让我担心的部分是将函数传递给 Select 语句。不过，我认为我只是没有足够地使用这种语法，而且它实际上是一种非常简洁的表达方式。

我想知道其他程序员看到这种方法的缩短版本是否会感到不安。

编辑：另外，对效率比较的评论将不胜感激。我知道 LINQ 因在大型数据集上运行速度较慢而臭名昭著。我想说在某些情况下可以枚举 10,000-20,000 条记录。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T17:28:32.157

**不，它是富有表现力和简洁的。**

第一个版本是关于*如何*迭代列表和转换元素。

第二个版本是关于结果应该是*什么。*

创建 LINQ 的目的是为我们提供强大的、可读的工具来处理和转换集合。这正是您在第二个示例中使用它的目的。

对于不熟悉*方法组语法*的人，另一种选择可能是使用查询表达式：

```
var result = from task in ActivityDao.GetByTaskID(taskID)
             select ActivityDto.Create(task);
return result.ToList(); // if you really need it as a list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:36:30.757

对于它的价值，该行相当于：

```
var activity =  ActivityDao.GetByTaskID(taskID);
var q = activity.Select(ActivityDto.Create);
return q.ToList(); 
```

如果您认为 R# 将其改写为更具可读性，您*可以执行上述操作。*如果您担心的是违反[得墨忒耳法则，](http://en.wikipedia.org/wiki/Law_of_Demeter)那么上述内容不会有太大帮助——您必须重新设计和更多/不同地分离关注点。

# node.js - 在向客户端返回响应后完成回调的节点/快递中的潜在陷阱？

> ID：12305233
> 
> 赞同：1
> 
> 时间：2012-09-06T17:21:21.907
> 
> 标签：node.js

我想编写一个需要一些时间来完成外部 IO 操作的回调，但我不希望它在将数据发送回客户端时受到干扰。我不关心等待回调完成以回复客户端，但如果回调导致错误，我想记录它。大约 80% 的执行将导致此回调在响应发送回客户端并关闭连接后执行。

我的方法效果很好，我没有发现任何问题，但我想知道这种方法是否存在我可能不知道的陷阱。我认为节点的事件 IO 可以毫无问题地处理这个问题，但我想确保在我将这个架构投入生产之前。有什么问题应该让我重新考虑这种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:41:37.037

只要您在发送响应后不尝试引用该响应对象，这不会导致任何问题。请求处理程序并没有什么特别之处，它关心在生成响应后调用其代码中的回调。

# mysql - 如何从远程主机对 mysqldump 进行速率限制？

> ID：12305234
> 
> 赞同：0
> 
> 时间：2012-09-06T17:21:24.300
> 
> 标签：mysql, mysqldump, rate-limiting

我正在从远程机器上运行 mysqldump 来定期备份我们的数据库，并希望确保它不会耗尽所有可用带宽。

我正在运行的命令是：

```
mysqldump --compress --opt --add-drop-database --skip-lock-tables --single\
-transaction -u$USER -p$PASSWD -h $HOST $DB > $SCRIPT_DIR/$DB.$HOST_NAME\
.sql 
```

如果可能的话，我宁愿不必依赖在本地运行备份并使用 SCP/SFTP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:11:33.470

[涓涓细流](http://monkey.org/~marius/pages/?page=trickle)看起来会奏效。

这样做的好处是它不需要根凭据即可工作。

# php - php中的内存泄漏与递归

> ID：12305239
> 
> 赞同：0
> 
> 时间：2012-09-06T17:21:28.723
> 
> 标签：php, memory, recursion, memory-leaks

```
function createUniqueName($name, $i = 0)
{
    $names = array('backup');

    if($i != 0) {
        $newname = $name.'-'.$i;
    } else {
        $newname = $name;
    }

    if(in_array($newname, $names)) {
        $newname = createUniqueName($name, $i++);
    }

    return $newname;
}

echo createUniqueName('backup', 0); 
```

不幸的是，这会导致内存泄漏，我不知道为什么。它是一个正常的递归。有任何想法吗？

收到的错误是：

```
Fatal error: Allowed memory size of 33554432 bytes exhausted (tried to allocate 130968 bytes) in /Users/Tim/Sites/tests/uniquename.php on line 16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:26:23.873

这段代码会导致函数无限期地运行，它也不会像你想象的那样做，因为 $names 是一个局部变量，所以在这个范围内它总是包含一个备份实例。当您执行 $i++ 后增量时，您应该执行 ++$i 以便值在进入函数调用之前实际更改。否则您总是将 0 传递给函数。

```
createUniqueName($name, $i++); 
```

意思是“在我运行 createUniqueName($name, $i) 后增加 $i。”

如果您将其更改为

```
 createUniqueName($name, ++$i); 
```

您将更接近预期的行为（递归不会是无限的）。

我将把变量范围的问题留给你，作为一个练习来弄清楚它的去向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:29:07.180

```
$newname = createUniqueName($name, $i++); 
```

`$i++`是后增量，即在进行递归调用后它会增加变量。

因此递归是无限的，因为它总是用相同的参数调用函数。

# c++ - C 和 C++ 中反斜杠后的空白字符

> ID：12305240
> 
> 赞同：4
> 
> 时间：2012-09-06T17:21:34.463
> 
> 标签：c++, c

C 和 C++ 标准对反斜杠后的空白字符（或多个字符）有何规定？它是否保证无论如何都加入行？

```
int main()
{
    // Comment \ 
    int foo;
} 
```

在这种情况下，MSVC 和 gcc 的工作方式不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T17:31:39.070

作为参考，标准报价是（§2.2/1，删节，强调我的）：

> ## 翻译阶段
> 
> [...]
> 2.**后跟换行符****的反斜杠字符 ( ) 的每个实例都`\`**被删除，将物理源代码行拼接成逻辑源代码行。只有任何物理源行上的最后一个反斜杠才有资格成为此类接头的一部分。结果，如果生成了与通用字符名称的语法匹配的字符序列，则行为未定义。如果源文件不为空且不以换行符结尾，或者在任何此类拼接发生之前以换行符结尾且紧接在反斜杠字符之前，则应将其视为附加的 new-行字符被附加到文件中。
> [...]

其他答案提到的实现定义部分在“新行”的定义中。

（请注意，注释直到第 3 阶段才被替换，因此在此代码中：

```
int main()
{
    int x = 0;

    // assuming the definition of new-line is as expected, this function
    // will return 0, not 5 (no whitespace after this backslash: ) \
    x = 5;

    return x;
} 
```

`x = 5;`将被附加到评论的末尾，然后最终被删除。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T17:28:15.163

C 标准让它实现定义文本文件如何分成几行（作为翻译阶段 1 的一部分，如果有记忆的话）。出于`\`-newline 的目的，GCC 将行结尾定义为零个或多个 ASCII 水平空白字符（SPC、TAB、VT 或 FF），后跟三个常见的 ASCII 行终止序列之一：CR、LF 或 CR LF。

我不知道 MSVC 做了什么，但如果它有所不同，我一点也不感到惊讶。

# c# - Expression blend 4 桌面应用程序无法识别

> ID：12305242
> 
> 赞同：0
> 
> 时间：2012-09-06T17:21:40.473
> 
> 标签：c#, wpf, expression-blend

我为我的朋友做了一个应用程序，应用程序没有存储或任何东西。只是一个具有一些动画和声音的演示应用程序。
问题是我朋友的笔记本电脑无法识别我的应用程序，即使该笔记本电脑安装了新的.net 版本并安装了新的silverlight。该应用程序在我的笔记本电脑中就像一个魅力。
表达式混合 4 是否需要额外的框架或其他东西？

**注意**：
在该应用程序的配置中，部署需要 .net framework 4.0 客户端，所以给了我朋友那个设置*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:40:44.440

您是使用 Visual Studio 还是 Expression Blend 构建它？

Expression Blend 构建通常仅用于测试。它使用调试配置构建，该配置仅设计用于在您的开发机器上运行。

当您想要分发您的应用程序时，您应该使用 Visual Studio 并选择发布配置而不是调试。

Visual Studio 将自动将大多数引用的程序集放在 bin/Release 输出文件夹中。这些是不属于 .NET 框架的程序集，例如 Expression Blend 中使用的一些程序集。当您将其部署到另一台计算机时，您需要确保它们与应用程序 EXE 位于同一文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:47:09.500

如果您使用过 Expression Blend 提供的某些功能，那么您的项目（您在 Expression Blend 中创建的项目可能会引用 Expression Blend 特定的 DLL），例如：

```
Microsoft.Expression.Effects.dll
Microsoft.Expression.Interactions.dll 
```

ETC

例如，使用特殊效果“BloomEffect”会导致您的项目引用上述 2 个 DLL。

使用某些其他资产也会添加对 Expression Blend DLL 的引用。

在 Expression Blend 中检查您的项目的引用，以查看是否有任何 Expression Blend 特定的 DLL。

如果是这种情况，那么您不能只从 Expression Blend 生成的“bin/Debug”或“bin/Release”目录中获取输出......您必须将 Expression Blend 特定的 DLL 安装到/运送也到那台机器。

是时候使用 Visual Studio 来管理项目的正确部署了。

在那里打开解决方案（.sln）......并为您的项目添加一个新的安装项目。

下面是 Expression Blend 可以提供的不同额外 DLL 的视图：

![在此处输入图像描述](../Images/1bb35d9accd241f04db51dc497a8222c.png)

# jenkins - 使用 Groovy for Jenkins 取消排队的构建并中止正在执行的构建

> ID：12305244
> 
> 赞同：58
> 
> 时间：2012-09-06T17:21:51.740
> 
> 标签：jenkins

对于使用 Groovy 系统脚本的 Jenkins，有没有一种方法可以轻松地搜索构建队列和执行构建列表的某些条件（特别是匹配某些条件的参数），然后杀死/取消它们？

我似乎找不到任何方法来做到这一点，但它似乎应该是可能的。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-11T05:41:58.397

我自己没有测试过，但是看看[API](http://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html)应该可以通过以下方式：

```
import hudson.model.*
import jenkins.model.Jenkins

def q = Jenkins.instance.queue

q.items.findAll { it.task.name.startsWith('my') }.each { q.cancel(it.task) } 
```

相关API链接：

*   [http://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html](http://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html)
*   [http://javadoc.jenkins-ci.org/hudson/model/Queue.html](http://javadoc.jenkins-ci.org/hudson/model/Queue.html)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2017-12-04T10:58:34.070

我知道这是一个老问题，但谷歌给我指出了这个问题。此处显示的脚本仅从队列中删除作业，并且不会停止运行构建。以下脚本只是从队列中删除所有内容并终止所有正在运行的构建：

```
 import java.util.ArrayList
  import hudson.model.*;
  import jenkins.model.Jenkins

  // Remove everything which is currently queued
  def q = Jenkins.instance.queue
  for (queued in Jenkins.instance.queue.items) {
    q.cancel(queued.task)
  }

  // stop all the currently running jobs
  for (job in Jenkins.instance.items) {
    stopJobs(job)
  }

  def stopJobs(job) {
    if (job in com.cloudbees.hudson.plugins.folder.Folder) {
      for (child in job.items) {
        stopJobs(child)
      }    
    } else if (job in org.jenkinsci.plugins.workflow.multibranch.WorkflowMultiBranchProject) {
      for (child in job.items) {
        stopJobs(child)
      }
    } else if (job in org.jenkinsci.plugins.workflow.job.WorkflowJob) {

      if (job.isBuilding()) {
        for (build in job.builds) {
        build.doKill()
        }
      }
    }
  } 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2019-08-08T09:47:52.223

参考：[https ://xanderx.com/post/cancel-all-queued-jenkins-jobs/](https://xanderx.com/post/cancel-all-queued-jenkins-jobs/)

在 Manage Jenkins > Script Console 中运行它：

```
Jenkins.instance.queue.clear() 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-09T08:08:29.327

无法添加为评论，但截至今天最新的詹金斯，安德烈的脚本（很好）需要另一个导入才能工作。作为系统 Groovy 脚本执行。

詹金斯错误并提到了缺失的课程。我包括了提到这个问题的网址：

```
//import hudson.model.*
// per http://stackoverflow.com/questions/17429050/running-groovy-command-from-jenkins-using-groovy-script-plugin
// requires this now
import jenkins.model.Jenkins 

def q = Jenkins.instance.queue

q.items.findAll { it.task.name.startsWith('my') }.each { q.cancel(it.task) } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-09-25T09:03:53.303

经过一番调查，我想出了这段代码，它对我来说绝对没问题。它清除队列并中止当前正在执行的所有作业。

先决条件：

1.  “全部”视图包含所有作业
2.  使用系统常规

```
import jenkins.model.Jenkins
import hudson.*
import hudson.model.*
import jenkins.*

// Remove everything which is currently queued

Jenkins.instance.queue.clear()
def buildingJobs = Jenkins.instance.getAllItems(Job.class).findAll {
    it.isBuilding()
}

buildingJobs.each {
    def jobName = it.toString()
    def val = jobName.split("\\[|\\]")

    // 'Abort jobs' is the name of the job I have created, and I do not want it to abort itself.

    if((val[1].trim())!='Abort jobs') {
        def job = Jenkins.instance.getItemByFullName(val[1].trim())
        for (build in job.builds) {
            if (build.isBuilding()) {
                println(build)
                build.doStop();
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-22T09:51:52.187

这是我的解决方案，如果您只想从构建队列中运行同一项目的最新作业并取消其他作业：

```
def q = Jenkins.instance.queue
//Find items in queue that match <project name>
def queue = q.items.findAll { it.task.name.startsWith('sample_project') }
//get all jobs id to list
def queue_list = []
queue.each { queue_list.add(it.getId()) }
//sort id's, remove last one - in order to keep the newest job, cancel the rest
queue_list.sort().take(queue_list.size() - 1).each { q.doCancelItem(it) } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-05T15:21:53.433

使用 jenkins groovy postbuild 插件：
我认为这将是 groovy 脚本：

```
import hudson.model.*  
def q = jenkins.model.Jenkins.getInstance().getQueue()   
def items = q.getItems()  
for (i=0;i<items.length;i++){  
  if(items[i].task.getName() == "job_name"){  
  items[i].doCancelQueue()  
}   
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-07T17:21:07.350

我已经扩展了[Igor Zilberman](https://stackoverflow.com/a/39635794/202504)的代码片段，这样当队列中有相同原因的作业时，它也会中止正在运行的作业（当您将鼠标悬停在构建队列中的作业上时，您会看到，只查看第一行）。我将其作为构建步骤“执行系统 ​​Groovy 脚本”的作业运行。

```
 import hudson.model.Result
import jenkins.model.CauseOfInterruption
import jenkins.model.*;

[ // setup job names here
'my-jobname-here'   
].each {jobName ->  
  def queue = Jenkins.instance.queue  
  def q = queue.items.findAll { it.task.name.equals(jobName) }  
  def r = [:]  
  def projs = jenkins.model.Jenkins.instance.items.findAll { it.name.equals(jobName) }  

  projs.each{p ->  
    x = p._getRuns()  
    x.each{id, y ->  
      r.put(id, y)  
    }  
  }  

  TreeMap queuedMap = [:]  
  TreeMap executingMap = [:]  

  q.each{i->  
    queuedMap.put(i.getId(), i.getCauses()[0].getShortDescription()) //first line  
  }  
  r.each{id, run->  
    def exec = run.getExecutor()  
    if(exec != null){  
      executingMap.put(id, run.getCauses()[0].getShortDescription()) //first line  
    }  
  }  

  println("Queued:")  
  queuedMap.each{ k, v -> println "${k}:${v}" }  
  println("Executing:")  
  executingMap.each{ k, v -> println "${k}:${v}" }  

  // First, if there is more than one queued entry, cancel all but the highest one.  
  // Afterwards, if there is a queued entry, cancel the running ones  

  def queuedNames = queuedMap.values();  
  queuedNames.each{n ->  
    def idsForName = []  
    queuedMap.each{ id, name ->  
      if(name.equals(n)){  
        idsForName.add(id)  
      }  
    }  
    if (idsForName.size() > 1){  
      println("Cancelling queued job: "+n)  
    }  
    // remove all but the latest from queue  
    idsForName.sort().take(idsForName.size() - 1).each { queue.doCancelItem(it) }  
  }  
  executingMap.each{ id, name ->  
    if(queuedMap.values().contains(name)){  
      r.each{rid, run->  
        if (id == rid){  
          def exec = run.getExecutor()  
          if(exec != null){  
            println("Aborting running job: "+id+": "+name)  
            exec.interrupt(Result.ABORTED)  
          }  
        }  
      }  
    }  
  }  
}  
return "Done" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-12T09:40:12.167

导入 hudson.model.*

def queue = Hudson.instance.queue

println "队列包含 ${queue.items.length} 个项目"

queue.clear()

println "队列已清空"

* * *

将此粘贴到“脚本控制台”中 - jenkins > Manage Jenkins > Script Console 并点击运行。这有助于清除队列并显示已清除的号码。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-06-14T08:18:21.907

要控制作业构建队列，您也可以使用此插件： [https ://wiki.jenkins-ci.org/display/JENKINS/Block+queued+job+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Block+queued+job+plugin)

*   当定义的目标项目的最后一次构建处于构建状态时阻止作业
*   当定义的目标项目的最后一次构建产生结果时阻止作业

# android - Android 状态栏通知 - 有什么方法可以在状态栏上制作通知小狗（吐司）？

> ID：12305245
> 
> 赞同：3
> 
> 时间：2012-09-06T17:21:54.497
> 
> 标签：android, android-notifications

我想知道是否有办法在第一次收到通知时让状态栏上方弹出通知，就像传统的吐司消息一样。默认情况下，当收到通知时，通知代码会显示在状态栏中，并暂时隐藏其他通知图标（如果存在），直到通知代码完成显示。然后，通知图标被正常添加到等待用户交互的图标的水平列表中。我希望初始接收代码刚好上升到状态栏上方，然后将图标与其余部分一起添加。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:28:05.650

使用该系统是不可能的`Notification`，除非通过您修改为具有此功能的自定义 Android 版本。

话虽如此，欢迎您在显示 a`Toast`的基础上或代替显示 a 来显示 a `Notification`。

# apache - 在apache服务器中配置不同资源的主域和子域

> ID：12305246
> 
> 赞同：1
> 
> 时间：2012-09-06T17:21:55.933
> 
> 标签：apache, subdomain

我在 apache 服务器中创建子域时遇到问题。通常我们可以通过以下方式做到这一点。

```
<VirtualHost *:80>
  ServerName www.maindomain.com
  ServerAlias *.maindomain.com
  DocumentRoot "/home/abc/xyz"
  <Directory "/home/abc/xyz">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost> 
```

在上面的示例中，主域和子域共享同一个目录。

但我的要求是主域有自己的资源，其余子域有其他资源。

我想做这样的事情。

```
<VirtualHost *:80>
    ServerName www.maindomain.com
    DocumentRoot "/home/abc/xyz"
    <Directory "/home/abc/xyz">
        AllowOverride All
        Allow from All
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName xyz.maindomain.com
    ServerAlias *.maindomain.com
    DocumentRoot "/home/ghi/pqr"
    <Directory "/home/ghi/pqr">
        AllowOverride All
        Allow from All
    </Directory>
</VirtualHost> 
```

上面的东西对我不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:35:29.597

`NameVirtualHost`指令（例如， ）是否`NameVirtualHost *:80`出现在您的 Apache 配置文件中，在虚拟主机之前？如果没有，它需要在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:15:14.287

我认为您可以使用 apache VirtualDocumentRoot。

# c# - 如何在 C# 中使用 XML 序列化包含元素（不是根）的属性

> ID：12305247
> 
> 赞同：4
> 
> 时间：2012-09-06T17:22:01.133
> 
> 标签：c#, attributes, xml-serialization

我需要生成一个如下所示的 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<inboundMessage xmlns="http://www.myurl.net">
  <header>
    <password>mypwd</password>
    <subscriberId>myuser</subscriberId>
  </header>
  <message xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="myType">
    <eventDate>2012-09-05T12:13:45.561-05:00</eventDate>
    <externalEventId />
    <externalId>SomeIdC</externalId>
  </message>
</inboundMessage> 
```

问题是我不知道如何在我的标签中包含 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="myType" 。我需要序列化的课程是这样的：

```
[XmlType("inboundMessage")]
[XmlRoot(Namespace = "http://www.myurl.net")]
public class InboundMessage
{
    [XmlElement(ElementName = "header")]
    public Header _header;
    [XmlElement(ElementName = "message")]
    public List<MyType> _messages;
} 
```

我需要将哪些 XmlAttributes 添加到我的“_messages”成员中以使其按我想要的方式序列化？

TIA，埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:46:40.440

像这样使用`XmlAttribute`：

```
public class MyType
{
    [XmlAttribute("type", Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
    public string Type { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:10:53.070

我的一位同事提出了一个类似的解决方案，但更完整。MyType 添加了两个属性：

```
 [XmlNamespaceDeclarations]
    public XmlSerializerNamespaces Namespaces { get; set; }

    [XmlAttribute("type", Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
    public string Type
    {
        get { return _type; }
        set { _type = value; }
    } 
```

_type 定义如下：

```
 private string _type = "myType"; 
```

然后序列化以不同的方式完成：

```
 // declare an XmlAttributes object, indicating that the namespaces declaration should be kept
        var atts = new XmlAttributes { Xmlns = true };

        // declare an XmlAttributesOverrides object and ...
        var xover = new XmlAttributeOverrides();
        // ... add the XmlAttributes object with regard to the "Namespaces" property member of the "Message" type
        xover.Add(typeof(MyType), "Namespaces", atts);

        // set the Namespaces property for each message in the payload body
        var messageNamespaces = new XmlSerializerNamespaces();
        messageNamespaces.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
        foreach (var message in myInboundMessage._messages)
        {
            message.Namespaces = messageNamespaces;
        }

        // create a serializer
        var serializer = new XmlSerializer(object2Serialize.GetType(), xover);

        // add the namespaces for the root element
        var rootNamespaces = new XmlSerializerNamespaces();
        rootNamespaces.Add("", "http://www.myurl.net");

        // serialize and extract the XML as text
        string objectAsXmlText;
        using (var stream = new MemoryStream())
        using (var xmlTextWriter = new XmlTextWriter(stream, null))
        {
            serializer.Serialize(xmlTextWriter, object2Serialize, rootNamespaces);
            stream.Seek(0, SeekOrigin.Begin);
            var buffer = new byte[stream.Length];
            stream.Read(buffer, 0, (int)stream.Length);
            objectAsXmlText = Encoding.UTF8.GetString(buffer);
        } 
```

最后，InboundMessage 被装饰成这样：

```
[XmlRoot("inboundMessage", Namespace = "http://www.myurl.net")] 
```

通过这种方法，我得到了我所需要的。

# jquery - 模态 iframe img jQuery

> ID：12305257
> 
> 赞同：1
> 
> 时间：2012-09-06T17:22:50.660
> 
> 标签：jquery, html, iframe, modal-dialog, image

我有一个名称列表，单击它会打开一个花式框模式并显示一个以 HTML 文件作为 src 的 iframe。HTML 文件包含此人的图像和简短的个人简介。

我希望图像向右浮动并填充 10 像素。问题是，我无法使用 css 或 jQuery 访问它，因为花式框的工作方式或 HTML 文件的导出方式（它们是由其他人使用 inDesign 创建的，所以有所有这些奇怪的东西——

```
    !--[如果 gte mso 10]>

     /* 样式定义 */
     表.MsoNormalTable
        {mso-style-name:"Table Normal";
        mso-tstyle-rowband 大小：0；
    ……

```

... 等等

我已经手动进入并更改了图像的大部分文件样式-

```
img {浮动：对；填充：对；}
```

这适用于大多数文件，但即使我进入 img 标签并设置它的样式，也有一些（特别是一些名叫 Don Horton 的人）没有任何事情发生——

```
`img src="/Horton_Don.html" style="float:right; padding:10px;"`
```

不工作。

我还尝试了几个 jQuery 函数，这是一个示例：

```
 $(document).ready(function()
        $('img').css("float", "right").css("padding", "10px");
    }); 
```

但我觉得这不起作用，因为fancybox，或者它可能是iframe。

所以我的问题是：

A) 有没有一种简单的方法可以通过 jQuery 更改每个 HTML 文件中的所有图像（因为这样可以节省我很多时间，而不是手动进入每个文件）

B）是否与 inDesign 废话有关，这使我无法更改 img 内容，如果有的话，有人可以告诉我要查找的内容/解释 inDesign 如何导出 html 的链接。

我想在这里明确一点，如果令人困惑，我可以上传一些更大的代码段以清楚起见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:43:57.030

这是一半的猜测和一半的破解，但是对于 A，您可以在页面上使用 $.get() 并将其分配给变量。然后，您可以将该变量用作任何编辑的上下文。

```
var page = $.get('page.html');
$('img', page).css('float', 'right').css('padding', '10px'); 
```

所有 jQuery 选择都带有一个可选的“context”参数，该参数指定选择器应该作用于什么 HTML。您的 iframe 当然必须指向 page 变量才能使更改可见。

这是在黑暗中拍摄的，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:34:07.887

只需在您的服务器上创建一个包含对这些样式的引用的 CSS 文件。

**CSS 文件**

*出于本示例的目的，我们将此文件称为 myStyles.css*。

```
img{
    float:right;
    padding:10px;
} 
```

看起来fancybox 有一个onComplete api 回调函数。

```
$('ele').fancybox({
    'onComplete' : function(){

        var cssItem = document.createElement("link") 
        cssLink.href = "myStyles.css"; 
        cssLink .rel = "stylesheet"; 
        cssLink .type = "text/css"; 
        frames['myIframe'].document.body.appendChild(cssLink);
    }
}); 
```

其中 myIframe 是 iFrame 的名称。

# ios - 从 UIButton 编辑 UItextview

> ID：12305258
> 
> 赞同：0
> 
> 时间：2012-09-06T17:22:52.483
> 
> 标签：ios, uibutton, uitextview

我有一个 UIbutton，当我按下它以使用键盘编辑 UITextView 的内容时，我想。我在互联网上找了很多东西，最后没有找到关于以编程方式编辑 UITextView 的文档。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:31:33.483

`UITextView`原生支持编辑。试试这个：

```
- (IBAction)clicked:(id)sender {
    textView.editable = YES;
    [textView becomeFirstResponder];
} 
```

最佳情况下，您可以使 textView 始终可编辑，或者在按下另一个按钮后关闭编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:33:39.080

尝试使用 [textView becomeFirstResponder];

# android - 如何调整缩放控件以显示所有点？

> ID：12305264
> 
> 赞同：1
> 
> 时间：2012-09-06T17:23:02.927
> 
> 标签：android, overlay, zooming, android-mapview

抱歉，如果这里已经问过这个问题，但我没有发现任何类似的问题。我的问题很简短，但也很棘手：在 Android 的 Google MapView 中，如何调整缩放控件以在地图视图中显示一组叠加点？用技术术语来说，我想编写以下算法：

 **```
List<GeoPoint> L = getPoints()
mapZoomLevel = 1
while (not(all points in L are visible in map)) {
    mapZoomLevel++
} 
```*  *提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:28:36.713

如果您使用的是`ItemizedOverlay`，您可以这样做：

```
public void zoomOverlays() {
    mMapView.getController().zoomToSpan(itemizedOverlay.getLatSpanE6(), itemizedOverlay.getLonSpanE6());
} 
```

换句话说，`ItemizedOverlay`如果你不是，你应该真的使用。**

# facebook - Facebook API 可以用来创建带有摘要的链接帖子吗？

> ID：12305265
> 
> 赞同：0
> 
> 时间：2012-09-06T17:23:03.923
> 
> 标签：facebook, api, facebook-graph-api

在 Facebook 中添加链接帖子时，漂亮的描述（包含来自链接页面的文本片段）和缩略图会自动添加到帖子中。

有没有办法使用 Facebook API 自动执行此操作？我倾向于认为没有，因为使用 Facebook API 的流行网络应用程序[IFTTT添加的帖子](https://ifttt.com/)[不包含描述](https://webapps.stackexchange.com/q/25049/24105)。我不清楚这是否是 Facebook API 的限制，以及是否有任何解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:29:34.613

是的，这是可能的。您可以使用 Graph Api 方法`/profile_id/feed`。该方法接收参数消息、图片、链接、名称、标题、描述、来源、地点和标签。facebook 将参数组织在“漂亮的摘要和缩略图”中。

您可以在链接[http://developers.facebook.com/docs/reference/api/的发布部分获取更多信息](http://developers.facebook.com/docs/reference/api/)

在 C# 中：

```
 public static bool Share(string oauth_token, string message, string name, string link, string picture)
        {
            try
            {
                string url =
                    "https://graph.facebook.com/me/feed" +
                    "?access_token=" + oauth_token;

                StringBuilder post = new StringBuilder();
                post.AppendFormat("message={0}", HttpUtility.UrlEncode(message));
                post.AppendFormat("&name={0}", HttpUtility.UrlEncode(name));
                post.AppendFormat("&link={0}", HttpUtility.UrlEncode(link));
                post.AppendFormat("&picture={0}", HttpUtility.UrlEncode(picture));

                string result = Post(url, post.ToString());
            }
            catch (Exception)
            {
                return false;
            }

            return true;
        }

        private static string Post(string url, string post)
        {
            WebRequest webRequest = WebRequest.Create(url);
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.Method = "POST";

            byte[] bytes = Encoding.ASCII.GetBytes(post);

            webRequest.ContentLength = bytes.Length;

            Stream stream = webRequest.GetRequestStream();
            stream.Write(bytes, 0, bytes.Length);
            stream.Close();

            WebResponse webResponse = webRequest.GetResponse();

            StreamReader streamReader = new StreamReader(webResponse.GetResponseStream());

            return streamReader.ReadToEnd();
        } 
```

**更新：**

开放图协议元标记：http: [//developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)

# javascript - 在 ContentEditable 的 focus() 之后移动插入符号位置

> ID：12305269
> 
> 赞同：3
> 
> 时间：2012-09-06T17:23:12.263
> 
> 标签：javascript, contenteditable, rich-text-editor

我正在尝试在 JavaScript 中创建一个非常基本的富文本编辑器，但我遇到了选择问题。所以基本上，因为它是一个 contentEditable <div>，任何时候用户从网页粘贴预先格式化的文本，格式都不会被剥离。

一个容易破解的技巧是在按下 Ctrl + V 时将焦点放在 <textarea> 上，因此文本会粘贴在那里，然后 onkeyup，将焦点返回到 <div>，复制内容并删除进入的任何内容到 <textarea>。

所以这很容易，但是当我将焦点放回 contentEditable &;t;div> 时，插入符号的位置在开头，而不是在粘贴之后。我对选择的了解不够多，无法弄清楚，所以我很感激一些帮助。这是我的代码：

```
// Helpers to keep track of the length of the thing we paste, the cursor position
// and a temporary random number so we can mark the position.
editor_stuff = 
{
    cursor_position: 0,
    paste_length: 0,
    temp_rand: 0,
}

// On key up (for the textarea).
document.getElementById("backup_editor").onkeyup = function() 
{ 
    var main_editor     =  document.getElementById("question_editor");
    var backup_editor   =  document.getElementById("backup_editor");
    var marker_position = main_editor.innerHTML.search(editor_stuff.temp_rand);

    // Replace the "marker" with the .value of the <textarea>
    main_editor.innerHTML = main_editor.innerHTML.replace(editor_stuff.temp_rand, backup_editor.value);

    backup_editor.value = "";

    main_editor.focus();
}

// On key down (for the contentEditable DIV).
document.getElementById("question_editor").onkeydown = function(event)
{
    key = event;

    // Grab control + V end handle paste so "plain text" is pasted and
    // not formatted text. This is easy to break with Edit -> Paste or
    // Right click -> Paste.

    if
    (
        (key.keyCode == 86 || key.charCode == 86) &&                   // "V".
        (key.keyCode == 17 || key.charCode == 17 || key.ctrlKey)       // "Ctrl"
    )
    {
        // Create a random number marker at the place where we paste.
        editor_stuff.temp_rand = Math.floor((Math.random() * 99999999));

        document.getElementById("question_editor").textContent +=  editor_stuff.temp_rand;
        document.getElementById("backup_editor").focus();
    }
} 
```

所以我的想法是将光标位置（整数）存储在我的辅助数组（`editor_stuff.cursor_position`）中。

注意，我整天都在查看其他答案，但无法让其中任何一个为我工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T17:45:53.683

这是一个在插入符号位置插入文本的函数：

演示：http: [//jsfiddle.net/timdown/Yuft3/2/](http://jsfiddle.net/timdown/Yuft3/2/)

代码：

```
function pasteTextAtCaret(text) {
    var sel, range;
    if (window.getSelection) {
        // IE9 and non-IE
        sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            range = sel.getRangeAt(0);
            range.deleteContents();

            var textNode = document.createTextNode(text);
            range.insertNode(textNode);

            // Preserve the selection
            range = range.cloneRange();
            range.setStartAfter(textNode);
            range.collapse(true);
            sel.removeAllRanges();
            sel.addRange(range);
        }
    } else if (document.selection && document.selection.type != "Control") {
        // IE < 9
        document.selection.createRange().text = text;
    }
} 
```

# c++ - Visual Studio 2010 默认属性表似乎在调试和发布配置下都链接了，这是怎么回事？

> ID：12305279
> 
> 赞同：2
> 
> 时间：2012-09-06T17:24:04.760
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++

我正在尝试更改新安装的 Visual Studio 2010 for C++ 项目的默认属性表。只是尝试为发布版本添加一些目录（用于 Boost 等）和优化设置，诸如此类的基本内容。显然，对于不同的配置，我希望有些设置有所不同。问题是，无论我从项目的属性管理器窗口尝试什么，我所做的一切似乎都会影响这两种配置。

我最初尝试多选两者->右键单击->属性，以设置通用设置，这与在调试或发布下选择 Microsoft.Cpp.Win32.User 完全相同。所以一切都会影响两个配置。

现在，据我了解，Microsoft.Cpp.Win32... 是一个文件（至少，x86 配置的单个文件，x64 的单个文件等）所以事实上我无法单独更改配置有一定的意义。但是，如果我不能那样做，我该怎么做呢？

感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:12:43.423

简短的回答：你不能。请参阅有问题的评论讨论。

# view - 是否可以使用相同的实例地址以编程方式加载与情节提要相同的视图控制器？

> ID：12305281
> 
> 赞同：0
> 
> 时间：2012-09-06T17:24:33.513
> 
> 标签：view, controller, storyboard, instance

我有以下问题：是否可以要求 StoryBoard 加载 viewController 而不显示它？

我的问题如下：我有两个viewController“Diaporamas”和“Settings”。“Diaporamas”需要从viewController“Settings”中知道一个“With Frame:”开关的状态，但是“Settings”没有加载，因为客户暂时没有选择它们！

我的测试：我尝试了这几个电话：

```
 hc_Settings_Class = [self.storyboard instantiateViewControllerWithIdentifier:@"SettingsViewController"];
//  these line to force storyboard to load all controls in the "Settings" viewcontroller.
    hc_Parameters_Class.view.hidden = NO;
    [hc_AppDelegate_iPad loadPreferences]; 
```

故事板加载正确的视图控制器“设置”，但当然实例地址与用户使用用户界面选择它们时加载的一个实例不同。当然，“Diaporamas”视图控制器不知道“设置”视图控制器中所有控件的真实状态！

希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:07:29.430

我从另一个论坛得到了答案，实际上，我将使用“NSUserDefaults”并使用它的功能来充当“单例”！我正在使用一种实现全局变量的重型机制......为什么它可以变得更简单时让它变得复杂！我将清理我的代码并更好地使用 NSUserDefaults！

感谢所有花时间阅读我的问题的人。;-)

# javascript - 对象/数组和循环的原型

> ID：12305282
> 
> 赞同：0
> 
> 时间：2012-09-06T17:24:33.877
> 
> 标签：javascript, prototype

今天出现了一个奇怪的bug。在我们的应用程序中，在一个文件中，所有对象都附加了一个函数，就好像它们是原型一样。我们没有对我们的数组进行原型设计，但我已经处理了数组和对象具有原型的其他东西，当您执行 for(this in that) 循环时，原型将作为项目包含在内，我们必须过滤它们。所以，两部分问题：

1.  如果您对数组进行原型制作，索引会增加 + # 个原型吗？所以如果 array(a,b,c) 有 array.prototype.function()，它的索引计数是 3 还是 4？

2.  这应该发生吗？

我们认为我们拥有的其中一个 jquery 插件是邪恶的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:47:59.287

通过“索引计数”，我假设您的意思是`length`财产。在这种情况下，您的第一个问题的答案是“否”。该`length`属性与数组的最高数字索引相关联。因此，例如，如果您有以下代码，`arr.length`则将是`4`：

```
var arr = [];
arr[3] = true;
arr.length; //is 4 
```

但是，您提到了 for-in 循环，它在这种情况下具有奇怪的行为。如果我们（从上面）执行 for-in `arr`，我们会得到以下结果：

```
var output = "";
for (i in arr) { //Don't do this!
    output += i;
} 
output; //is "3" (not "0123" as you might expect) 
```

正如我所提到的，原型属性对长度没有影响：

```
Array.prototype.foo = true;
var arr = [];
arr[3] = true;
arr.length; //is 4 
```

但是，它们确实会影响 for-in 循环（在正常情况下）：

```
var output = "";
for (i in arr) { //arr from the previous code block.
    output += i;
} 
output; //is "3foo" (or maybe "foo3", there's no guarantee form the spec either way) 
```

有几种方法可以解决这个问题。首先，由于这种胡说八道，你真的不应该在数组对象上使用 for-in。但是，如果出于某种原因必须这样做，则应始终使用`hasOwnProperty()`过滤器保护 for-in 循环，如下所示：

```
var output = "";
for (i in arr) { //arr from the previous code block
    if (arr.hasOwnProperty(i)) {
        output += i;
    }
} 
output; //is "3" 
```

同样，*不能保证在 for-in 上订购。*因此，如果`arr`是`[1,1,1]`，您可能会得到`output`as `"201"`（尽管不太可能）。

另一种选择是尝试通过使用 ES5 的功能（如果存在）来保护自己免受其他人的错误编码，通过将它们设置为不可枚举来保护对象级别的原型属性。你会这样做：

```
var foo = (function() { /* do something */ });
if(typeof Object.defineProperty === "function") { //If ES5
    Object.defineProperty(Array.prototype, "foo", {
        value: foo,
        enumerable: false //make it not enumerable
    });
} else { //For older browsers
    Array.prototype.foo = foo;
}

var arr = [], output = "";
arr[3] = true;

for(i in arr) { //Seriously, don't do this.
    output += i;
}
output; //is "3" 
```

我不能过分强调对数组进行 for-in 是一个**坏主意**。事实上，在几乎所有情况下，我都倾向于避免使用 for-in，因为你永远不知道外面是否有人想成为一个混蛋，并将其扔到他们的代码中间：

```
Object.prototype.ponies = "Ponies!"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:28:08.570

尽管数组是对象，因此可以具有许多属性，但只有整数属性才算入`array`自身。

```
var a = [];
alert(a.length); // 0
a.foo = "Ha";
alert(a.length); // 0
a[1] = 10;
alert(a.length); // 1

Array.prototype.shuffle = function() { ... }
alert(a.length); // 1 
```

尽管不建议使用它`for ... in`来处理数组，但有些人仍然这样做。 `for ... in`会发现`foo`和`shuffle`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:32:34.283

如果您避免使用`for (var i in array)`来迭代您的数组并仅通过从 0 到 的数字索引对其进行迭代`array.length - 1`，那么如果有人向数组原型添加某些内容，您将不会遇到问题。这正是您应该避免使用`for/in`迭代数组的技术的原因。

无论向数组或数组原型中添加了多少属性或方法，都有一些迭代数组的安全方法：

```
for (var i = 0, len = array.length; i < len; i++) {
    // access array[i] here
}

var i = 0, len = array.length;
while (i < len) {
    // access array[i] here
    i++;
} 
```

# vb.net - VB：NET“对象引用未设置为对象的实例。” 在 Net.WebResponse 变量中

> ID：12305286
> 
> 赞同：0
> 
> 时间：2012-09-06T17:24:49.593
> 
> 标签：vb.net

在下面的代码中，我试图处理不同的服务器响应：此函数用于从网页读取 xml 或 html 源代码，在注释行中，我得到“对象引用未设置为对象的实例”。我想知道为什么。

```
Public Function GetPageHTML(ByVal URL As String, _
  Optional ByVal TimeoutSeconds As Integer = 10) _
  As String
    ' Retrieves the HTML from the specified URL,
    ' using a default timeout of 10 seconds
    Dim objRequest As Net.WebRequest
    Dim objResponse As Net.WebResponse
    Dim objStreamReceive As System.IO.Stream
    Dim objEncoding As System.Text.Encoding
    Dim objStreamRead As System.IO.StreamReader

    Try
        ' Setup our Web request
        objRequest = Net.WebRequest.Create(URL)
        objRequest.Timeout = TimeoutSeconds * 1000
        ' Retrieve data from request

        Select Case CType(objResponse, Net.HttpWebResponse).StatusCode 'Here is where i get the error Object reference not set to an instance of an object.

    Case Net.HttpStatusCode.InternalServerError
        'This is sloppy, but a quick example for one of your sub-questions.
        System.Threading.Thread.Sleep(10000)
        'Try again.
        objResponse = objRequest.GetResponse
    Case Net.HttpStatusCode.BadRequest
        'Error Handling
    Case Net.HttpStatusCode.OK
        'Proceed as normal.
    Case Else
        'Error Handling

End Select

        objStreamReceive = objResponse.GetResponseStream
        objEncoding = System.Text.Encoding.GetEncoding( _
            "utf-8")

        objStreamRead = New System.IO.StreamReader( _
            objStreamReceive, objEncoding)
        ' Set function return value

        GetPageHTML = objStreamRead.ReadToEnd()
        ' Check if available, then close response
        If Not objResponse Is Nothing Then
            objResponse.Close()
        End If
    Catch
        ' Error occured grabbing data, simply return nothing
        Return ""
    End Try
End Function 
```

现在当我删除 switch 语句并只写`objResponse`as

```
objResponse = objRequest.GetResponse 
```

除了我得到错误 403 或 503 的异常，我不知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:34:55.140

您的错误行：

`Select Case CType(objResponse, Net.HttpWebResponse).StatusCode`

被调用而没有分配任何东西给`objResponse`.

您需要将其更改为：

```
objResponse = objRequest.GetResponse

Select Case CType(objResponse, Net.HttpWebResponse).StatusCode` 
```

关于获取您尝试访问的页面的 HTTP 错误代码，以下是它们的含义及其原因：

[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:07:21.560

首先， tcarvin 是正确的，您的问题代码缺少这一行：

```
objResponse = objRequest.GetResponse 
```

其次，您可以这样做来解决您的其他问题：

```
 If Not objResponse Is Nothing Then

        'Select Case Code

    Else

        'Handle failure.

    End If 
```

# jquery - jQuery 悬停/活动标签按钮

> ID：12305288
> 
> 赞同：0
> 
> 时间：2012-09-06T17:25:02.393
> 
> 标签：jquery, jquery-ui

首先，这是我正在开发的网站：http: [//daysofthedead.net/los_angeles/index6.php](http://daysofthedead.net/los_angeles/index6.php)

我想做的是使屏幕底部的 3 个按钮像屏幕顶部的 3 个按钮一样工作。

当您将鼠标悬停在图像“4 月 5 日星期五阵容”、“4 月 6 日星期六阵容”或“4 月 7 日星期日阵容”上时，图像会发生变化，而当它位于该选项卡（活动）上时，图像会保留在该备用图像上。

我只是想不出办法让它工作。

任何帮助，将不胜感激。谢谢你。

**编辑：感谢 Explosion Pills，我使用以下代码让它工作。**

```
 $('.panelbuttons .day-1-link').addClass('selected');

    $('.day-1-link').on('click', function () {
         $('[class^=day-]').removeClass('selected');
         $('.panelbuttons .day-1-link').addClass('selected');
    });
    $('.day-2-link').on('click', function () {
         $('[class^=day-]').removeClass('selected');
         $('.panelbuttons .day-2-link').addClass('selected');
    });
    $('.day-3-link').on('click', function () {
       $('[class^=day-]').removeClass('selected');
       $('.panelbuttons .day-3-link').addClass('selected');
    });​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:28:56.390

一个非常简单的方法是：

```
$('[class^=day-]').on('click', function () {
   $('[class^=day-]').removeClass('selected');
   $(this).addClass('selected');
}); 
```

然后更新您的 css，以便“选定”使用不同的图像。

# android - 在 ACTION_MOVE MotionEvents 中，是否保证指针从低 id 到高 id 被索引？

> ID：12305292
> 
> 赞同：1
> 
> 时间：2012-09-06T17:25:25.187
> 
> 标签：android, motionevent

我正在将基于触摸的交互记录到数据库中，并且无法记录所有指针。因此，当我处理 MotionEvent 中包含的指针（和历史指针）时，我只是忽略了某个索引之后的指针。但是，具有最低 id 的指针对我来说是最相关的。假设指针按指针 ​​id 的顺序排序（索引）是否安全，即使这些 id 不能保证从零开始？

测试表明这个假设是正确的，但我在文档中找不到任何验证。有人能对此有所了解吗？

从[Android MotionEvent 文档](http://developer.android.com/reference/android/view/MotionEvent.html)中，如何处理所有指针：

```
void printSamples(MotionEvent ev) {
    final int historySize = ev.getHistorySize();
    final int pointerCount = ev.getPointerCount();
    for (int h = 0; h < historySize; h++) {
        System.out.printf("At time %d:", ev.getHistoricalEventTime(h));
        for (int p = 0; p < pointerCount; p++) {
            System.out.printf("  pointer %d: (%f,%f)",
                ev.getPointerId(p), ev.getHistoricalX(p, h), ev.getHistoricalY(p, h));
        }
    }
    System.out.printf("At time %d:", ev.getEventTime());
    for (int p = 0; p < pointerCount; p++) {
        System.out.printf("  pointer %d: (%f,%f)",
            ev.getPointerId(p), ev.getX(p), ev.getY(p));
    }
 } 
```

我的代码更改了行

```
final int pointerCount = ev.getPointerCount(); 
```

至

```
final int pointerCount = Math.min(ev.getPointerCount(), MAX_POINTER_COUNT); 
```

它实际上只获得每个指针循环中的前 MAX_POINTER_COUNT 个指针。我可以依赖那些指针 ID 最低的指针吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:33:59.910

根据我的经验，指针的顺序是屏幕上的触摸顺序，所以第一个指针是第一次触摸，就像第三个手指同时触摸一样是指针 3。

因此，如果您只想限制 2 或 3 个手指手势，您可以将 Max 指针设置为 2 或 3。

# php - 使用 PHP 使用 REST API 删除 http 方法

> ID：12305302
> 
> 赞同：2
> 
> 时间：2012-09-06T17:26:30.440
> 
> 标签：php, api, rest, http, http-delete

我正在制作一个小型应用程序，只是为了掌握 REST 的窍门，但我在使用 DELETE 方法时遇到了一些问题。我以前从未使用过它，所以我不确定它的行为如何。

无论如何，我按照[本教程](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/)掌握了基础知识。我对其进行了修改，因此用户可以提交数据并从 MySQL 数据库中查看它，而不是使用预制数组。

我有 3 个文件：

*   server.php - 确定使用的方法并采取相应措施的“API”

*   input.php - 显示一个表单供用户输入数据

*   viewinput.php - 显示已输入的输入。

我现在正试图在 viewinput.php 上放置一个“删除”按钮，以便可以删除一个条目。这是我的代码，显示输入的信息。

```
while ($result = mysql_fetch_array($sql)){
        ?>
        <tr><td><? echo $result['id']." "; ?></td><td><? echo $result['text']; ?></td>
        <form method = "delete" >
            <td><input type="submit" name="delete" value="delete"></input></td></tr>
            <input type="hidden" name = "hidden_delete" value="<? echo $result['id']; ?>"></input>
        </form>
        <?
    } 
```

现在，在我的 server.php 文件（API）中，这是第一个被调用的函数，它确定方法并将 URL 分解为组件以供进一步处理。

```
public function serve() {
    $uri = $_SERVER['REQUEST_URI'];
    echo $method = $_SERVER['REQUEST_METHOD'];   //GET and POST are displayed, DELETE isn't
    $paths = explode('/', $this->paths($uri));
    array_shift($paths); // 
    $resource = array_shift($paths); 
```

当我按下删除按钮时，URL 来自

```
/rest/viewinput 
```

至

```
/rest/viewinput?delete=delete&hiddendelete=3 //assuming I deleted the 3rd entry 
```

据我了解，提交 DELETE 方法时，URL 应该是 /rest/viewinput/3

在我的 server.php 文件中，当我回显该方法时，不会像 POST 和 GET 方法那样显示“DELETE”。

我发现[了这个](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)关于 DELETE 的资源，据我所知，标识符将通过 URL 传递，但应该有一些接收到的方法，就像 GET 和 POST 一样（这意味着当我回显该方法时，我的代码应该显示 DELETE）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:16:58.963

这是当前关于`PUT`和的内幕`DELETE`。

如果您是“普通浏览”，大多数浏览器实际上并没有使用这些动词中的任何一个。然而，它们确实支持 XML Http 请求（即 AJAX）。因此，从客户端，您不能真正使用`PUT`或`DELETE`直接在 HTML 表单元素上使其工作。您需要使用 Complex857 建议的解决方法，即在请求中包含意图。

如果您正在使用后台 AJAX 调用，或者实际上如果您不使用浏览器发出请求，则可以使用全套 HTTP 动词，包括`PUT`和`DELETE`。对此的一个警告是，在 IIS 上，您可能需要更改设置以允许这些动词，因为您可以设置服务器接受的特定动词。

# mysql - 计算数据库中单词出现次数的最佳解决方案

> ID：12305303
> 
> 赞同：0
> 
> 时间：2012-09-06T17:26:35.247
> 
> 标签：mysql, database, database-design

我将为线程标题中出现的每个单词刮取一个论坛新线程页面，以形成一种流行趋势（如谷歌趋势）。我找到了一种抓取它的方法，但我不知道应该如何将它存储在数据库中以获得最佳性能。我想到了两种不同的方法。

1.  将每个新单词存储在一行中，如果该单词不是新单词，则在“出现次数”字段中添加一个计数。

2.  无论如何，将每个单词存储在自己的行中。

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:36:57.790

想法 #1 是最紧凑的，通常应该是最快的。查看 INSERT/ON DUPLICATE KEY，在单词和日期上使用唯一键。

如果您存储的数据不仅仅是单词，例如论坛线程的 id 等，那么想法 #2 就变得很重要。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:51:18.063

如果您遇到了抓取的麻烦，您应该保留多个级别的信息。

首先，跟踪您遇到的每个论坛标题，以及发布日期（以及您找到它的日期）以及其他信息。您可以在论坛标题上放置全文索引，这将为您提供查找相同单词（“database”和“databases”）的相似版本的强大功能。

其次，将每个单词以及发布（或您找到它的）的日期和时间以及返回发布表的链接单独存储在一个表中。谷歌趋势的价值不在于它一直保持总字数。这是你可以随着时间的推移分解它。

然后，在查询中进行聚合。如果遇到性能问题，可以按日期对数据进行分区，因此大多数查询只会读取数据的子集。如果摘要被高度使用，那么您可以考虑批量进行摘要，例如每晚一次。

最后，您将如何处理随着时间的推移出现的不同版本的单词？有拼写错误？同一个词在一个标题中有哪些多次出现？

# php - 以指数方式延迟对php中同一文件的重复请求

> ID：12305309
> 
> 赞同：1
> 
> 时间：2012-09-06T17:26:46.653
> 
> 标签：php, security, download, robot, copy-protection

我希望防止机器人爬取我们的网站并下载那里托管的数千张图片。

我最近在[https://github.com/remy/password-policy](https://github.com/remy/password-policy)阅读了有关密码策略最佳实践的内容。其中一个想法是通过不限制人类而是惩罚机器人来以**指数方式延迟重复请求。**

这在php中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:35:29.180

最简单的方法是将相关 URL 重写为实现下载的 PHP 脚本。这个会

*   保留源地址列表（例如在 memcached 中）及其最后时间戳和惩罚时间
*   根据时间戳将惩罚时间加倍或为零，
*   写回记录
*   最后睡觉并下载。

# java - Android：如何将 HTML Table 解析为 ListView？

> ID：12305310
> 
> 赞同：1
> 
> 时间：2012-09-06T17:26:47.710
> 
> 标签：java, android, html, android-listview, html-table

您好，我想将 HTML 表解析为 Android ListView，但我不知道从哪里开始。该表有很多信息。有人可以帮我从这个开始吗？

提前致谢！

HTML 表： http: [//intranet.staring.nl/toepassingen/rooster/lochem/2W2/2012090320120909/2W01533.htm](http://intranet.staring.nl/toepassingen/rooster/lochem/2W2/2012090320120909/2W01533.htm)（只需单击查看源代码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:29:01.687

您首先需要将 HTML 表解析为数据结构，然后使用 ListView 显示该信息。尝试使用 JSoup 库进行 HTML 解析：http: [//jsoup.org/cookbook/introduction/parsing-a-document](http://jsoup.org/cookbook/introduction/parsing-a-document)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:34:17.713

到目前为止，我认为 JSoup 是提取或操作 HTML 的最佳方法之一......

**请参阅此链接：**

[http://jsoup.org/](http://jsoup.org/)

但不知何故......这在我的情况下不起作用，所以我将整个 HTML 代码转换为字符串，然后解析它......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T20:53:09.400

我不知道你是否已经在这里得到了答案，但我对你建议的链接做了同样的事情，我会在这里发布我的代码，但它仍然很乱，不要申请最新的时间表（第 9 小时）

我使用 HTML Cleaner 库来解析 html：

```
try {   
        HtmlCleaner hc = new HtmlCleaner();
        CleanerProperties cp = hc.getProperties();
        cp.setAllowHtmlInsideAttributes(true);
        cp.setAllowMultiWordAttributes(true);
        cp.setRecognizeUnicodeChars(true);
        cp.setOmitComments(true);

        String loc = sp.getString( Constants.pref_locatie      , "" );
        String per = sp.getString( Constants.pref_persoon      , "" );
        String oob = sp.getString( Constants.pref_onderofboven , "" );

        int counteruurmax;
        int[] pauze;
        if (oob.contains("onder")){
            pauze = Constants.pauzeo;
        } else if (oob.contains("boven")) {
            pauze = Constants.pauzeb;
        } else {
            return false;
        }

        String url = "";
        if (loc.contains("lochem")) {
            url += Constants.RoosterLochem;
            url += t.getDatum();
            url += "/";
            url += per;
            counteruurmax = 11;
        } else if (loc.contains("herenlaan")) {
            url += Constants.RoosterHerenlaan;
            url += per;
            counteruurmax = 13;
        } else if (loc.contains("beukenlaan")) {
            url += Constants.RoosterBeukenlaan;
            url += per;
            counteruurmax = 11;
        } else {
            return false;
        }

        String htmlcode = t.getHtml(url);
        TagNode html = hc.clean(htmlcode);
        Document doc = new DomSerializer(cp, true).createDOM(html);
        XPath xp = XPathFactory.newInstance().newXPath();
        NodeList nl = (NodeList) xp.evaluate(Constants.XPathRooster, doc, XPathConstants.NODESET);

        int counteruur = 1;
        int counterdag = 1;
        int decreaser  = 0;
        Boolean isPauze = false;
        RoosterItems RItems = new RoosterItems();
        RoosterItem  RItem  = null;
        for (int i = 0; i < nl.getLength(); i++){

            if ((counteruur == pauze[0]) || (counteruur == pauze[1]) || (counteruur == pauze[2])) {
                isPauze = true;
                decreaser++;
            }

            if (!isPauze) {
                RItem = new RoosterItem();
                switch (counterdag){
                case 1:
                    RItem.setDag("ma");
                    break;
                case 2:
                    RItem.setDag("di");
                    break;
                case 3:
                    RItem.setDag("wo");
                    break;
                case 4:
                    RItem.setDag("do");
                    break;
                case 5:
                    RItem.setDag("vr");
                    break;
                }

                Node n = nl.item(i);
                String content = n.getTextContent();
                if (content.length() > 1) {
                    RItem.setUur(""+(counteruur-decreaser));
                    NodeList t1 = n.getChildNodes();
                    NodeList t2 = t1.item(0).getChildNodes();
                    NodeList t3 = t2.item(0).getChildNodes();
                    for (int j = 0; j < t3.getLength(); j++) {
                        Node temp = t3.item(j);
                        if (t3.getLength() == 3) {
                            switch (j) {
                            case 0:
                                RItem.setLes(""+temp.getTextContent());
                                break;
                            case 1:
                                RItem.setLokaal(""+temp.getTextContent());
                                break;
                            case 2:
                                RItem.setDocent(""+temp.getTextContent());
                                break;
                            default:
                                return false;
                            }
                        } else if (t3.getLength() == 4) {
                            switch (j) {
                            case 0:
                                break;
                            case 1:
                                RItem.setLes("tts. " + temp.getTextContent());
                                break;
                            case 2:
                                RItem.setLokaal(""+temp.getTextContent());
                                break;
                            case 3:
                                RItem.setDocent(""+temp.getTextContent());
                                break;
                            default:
                                return false;
                            }
                        } else if (t3.getLength() == 1) {
                            RItem.setLes(""+temp.getTextContent());
                        } else {
                            return false;
                        }
                    }
                } else {
                    RItem.setUur("" + (counteruur-decreaser));
                    RItem.setLokaal("Vrij");
                }
                RItems.add(RItem);
            }
            if (counteruur == counteruurmax) { counteruur = 0; counterdag++; decreaser = 0;}
            counteruur++;
            isPauze = false;
        }

        if (RItems.size() > 0) {
            mSQL = new RoosterSQLAdapter(mContext);
            mSQL.openToWrite();
            mSQL.deleteAll();
            for (int j = 0; j < RItems.size(); j++) {
                RoosterItem insert = RItems.get(j);
                mSQL.insert(insert.getDag(), insert.getUur(), insert.getLes(), insert.getLokaal(), insert.getDocent());
            }
            if (mSQL != null) mSQL.close();
        }
        return true;
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
        return false;
    } catch (XPathExpressionException e) {
        e.printStackTrace();
        return false;
    } 
```

有一些常量，但我认为您可以自己猜到它们；）否则您知道如何向我询问它们：）

RoosterItem 类将保存一小时的所有变量，而 RoosterItems 将保存多个 RoosterItem

祝你好运！

# python - Django 表单、jquery 和 Balanced Payments API 如何交互以创建买家账户？

> ID：12305313
> 
> 赞同：5
> 
> 时间：2012-09-06T17:26:52.713
> 
> 标签：python, django, balanced-payments

我是 Balanced Payments 和 jquery 的新手，并且是 Django 的新手。无论如何，我正在尝试了解如何使用 Django 表单以及 Balanced Payments 提供的 balance.js 和示例/文档来设置买家和商家的平衡支付账户。但是，我不太明白什么在验证什么。我认为表单使用 jquery 与 Balanced Payments 交互以在允许提交表单之前验证数据，但现在我意识到表单以某种方式提交给 Balanced Payments，然后调用 javascript 回调函数，然后需要根据 Balanced Payments 的结果处理提交操作。

无论如何，有人已经这样做了吗？一个工作示例将非常有用——比尝试将各种文档中的内容拼凑起来更有帮助。

用于设置 Balanced Payments 买家帐户的 Python 文档位于： [https ://www.balancedpayments.com/docs/python/buyer](https://www.balancedpayments.com/docs/python/buyer)

有人在这里发布了示例 HTML 和 javascript： [https ://gist.github.com/2662770](https://gist.github.com/2662770)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:06:00.173

在我们等待 Murph 提供一个工作示例的同时，我将为您概述该过程。

[超级编辑]

[Balanced](https://www.balancedpayments.com)现在为 Django 提供了一个快速演示站点。访问 Github 上的[django-balanced](https://github.com/balanced/django-balanced)，了解如何集成 Balanced 和 Django。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:42:15.000

我正在做这件事。现在，表单通过 JQuery 提交给平衡，并返回一个回调，来自回调的 uri 与 JQuery 一起发布到 Django 视图（没有模板）。该视图将 uri 保存到与事务/用户相关的数据库中，执行一些测试费用，然后将用户发送到带有模板等的视图。

一旦我的工作完全正常，我将发布一些示例代码！

# java - Mac OS X 10.6 Update 10 的 Java 源代码在哪里？

> ID：12305316
> 
> 赞同：3
> 
> 时间：2012-09-06T17:27:01.547
> 
> 标签：java, macos

两天前，Apple 推出了对其 Mac OS X Java 的更新。过去，我可以访问[http://connect.apple.com](http://connect.apple.com)并下载相应的 Developer Package，以便我的 IDE 可以再次将新版本的 Java 与其源代码相关联。（非常感谢[这个 StackOverflow 问题](https://stackoverflow.com/questions/4120107/source-code-for-mac-os-x-java-version-1-6-0-22)。）

但这次我空了。没有列出“Java for Mac OS X 10.6 Update 10 Developer Package”，Google 也没有针对`"1.6.0_35-b10-428.jdk"`. 是否有一个新的地方可以找到源代码，或者这个新版本的 Java 源代码是否与 Update 9 相同，或者我只是运气不好，直到 Apple 开始发布新的开发人员包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:09:29.800

看起来苹果花了几天的时间来发布开发者包。它现在位于[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T21:52:37.397

Java JDK Installer 下载站点： [http ://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html)

Java JRE 安装程序下载站点： [http ://www.oracle.com/technetwork/java/javase/downloads/jre7u7-downloads-1836441.html](http://www.oracle.com/technetwork/java/javase/downloads/jre7u7-downloads-1836441.html)

Mac OS X 的最新 Java 应该是您正在寻找的。

# object - 如何在 .proto 文件中处理带有协议缓冲区的泛型对象？

> ID：12305318
> 
> 赞同：15
> 
> 时间：2012-09-06T17:27:03.513
> 
> 标签：object, protocol-buffers, generic-list

我花了一些时间寻找一些替代方法来处理通用对象，我看到了与我类似的问题，但没有我想的那么具体？协议缓冲区有多种我可以使用的标量类型，但它们大多是原始的。我希望我的消息灵活，并且能够具有某种列表的字段。

假设我的 .proto 文件如下所示：

```
 message SomeMessage
   {
      string datetime = 1;
      message inputData // This would be a list
      {
         repeated Object object = 1;
      }
      message Object 
      {
          ? // this need to be of a generic type - This is my question
          // My work around - Using extentions with some Object
          //List all primitive scalar types as optional and create an extension 100 to    max;
      }
      message someObject //some random entity - for example, employee/company etc.
      {  
          optional string name = 1; optional int32 id = 2;
      }
      extend Object 
      {
          optional someObject obj = 101;
      }
  } 
```

这很好，可以工作，而且我有一个列表，其中对象可以是任何原始类型，也可以是 List < someObject >。但是-这里的问题是，每当我需要处理一种新型对象时，我都需要编辑我的 .proto 文件，为 C# 和 java 重新编译（我需要它的语言）...

如果协议缓冲区无法处理通用对象类型，是否还有其他替代方案可以？非常感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T00:18:06.253

正如 Marc Gravell 上面所说的 - 协议缓冲区不处理泛型或继承。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-22T07:42:20.557

虽然我迟到了，只是为了新观众，您可以使用字节代替对象，并且可以是您可以序列化/反序列化的任何对象。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-15T14:20:13.350

可以实现通用消息功能，但仍然添加新类型将需要重建原型类。

你使用包装类

```
message Wrapper {
    extensions 1000 to max;
    required uint32 type = 1;
} 
```

然后添加一些类型

```
message Foo {
    extend Wrapper {
        optional Foo item = 1000;
    }

    optional int attr1_of_foo = 1;
    optional int attr2_of_foo = 2;
    optional int attr3_of_foo = 3;
}

message Bar {
    extend Wrapper {
        optional Bar item = 1001;
    }

    optional int attr1_of_bar = 1;
    optional int attr2_of_bar = 2;
    optional int attr3_of_bar = 3;
} 
```

看看我们如何在我们希望由 Wrapper 类使用扩展存储的类中扩展 Wrapper 类。

现在，创建 Foo 包装对象的示例。我正在使用 Python，因为它是最简洁的形式。其他语言也可以这样做。

```
wrapper = Wrapper()
wrapper.type = Foo.ITEM_FIELD_NUMBER
foo = wrapper.Extensions[Foo.item]
foo.attr1_of_foo = 1
foo.attr2_of_foo = 2
foo.attr3_of_foo = 3
data = wrapper.SerializeToString() 
```

以及反序列化的例子

```
wrapper = Wrapper()
wrapper.ParseFromString(data)
if wrapper.type == Foo.ITEM_FIELD_NUMBER:
    foo = wrapper.Extensions[Foo.item]
elif wrapper.type == Bar.ITEM_FIELD_NUMBER:
    bar = wrapper.Extensions[Bar.item]
else:
    raise Exception('Unrecognized wrapped type: %s' % wrapper.type) 
```

现在，因为你想要通用集合，所以让 Wrapper 成为其他消息的重复字段，瞧。

当然这不是一个完整的解决方案，这个架构需要更多的封装以使其易于使用。有关 Protobuf 扩展的更多信息，尤其是嵌套扩展 ( [https://developers.google.com/protocol-buffers/docs/proto#nested](https://developers.google.com/protocol-buffers/docs/proto#nested) ) 或关于项目编组的 google。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-08T11:10:12.613

这是[Struct 的 protobuf 3 定义，](https://github.com/protocolbuffers/protobuf/blob/master/src/google/protobuf/struct.proto)它基本上用于`oneof`定义这种“通用”消息类型。

# php - 如何在 Ubuntu 12.04 LTS 上安装 libapache2-modxslt

> ID：12305320
> 
> 赞同：2
> 
> 时间：2012-09-06T17:27:14.083
> 
> 标签：php, ubuntu, symfony1

我正在尝试在 ubuntu 12.04 LTS 上部署交响乐应用程序，但在安装 libapache2-modxslt 时遇到问题。这是 check_configuration.php 的输出，您可以看到未安装 XSL 模块。

```
********************************
*                              *
*  symfony requirements check  *
*                              *
********************************    
php.ini used by PHP: /etc/php5/apache2/php.ini    

** Mandatory requirements **    
  OK        PHP version is at least 5.2.4 (5.3.10-1ubuntu3.2)

** Optional checks **    
  OK        PDO is installed
  OK        PDO has some drivers installed: mysql
  OK        PHP-XML module is installed
[[WARNING]] XSL module is installed: FAILED
            *** Install and enable the XSL module (recommended for Propel) ***
  OK        The token_get_all() function is available
  OK        The mb_strlen() function is available
  OK        The iconv() function is available
  OK        The utf8_decode() is available
  OK        The posix_isatty() is available
[[WARNING]] A PHP accelerator is installed: FAILED
            *** Install a PHP accelerator like APC (highly recommended) ***
[[WARNING]] php.ini has short_open_tag set to off: FAILED
            *** Set it to off in php.ini ***
  OK        php.ini has magic_quotes_gpc set to off
  OK        php.ini has register_globals set to off
  OK        php.ini has session.auto_start set to off
  OK        PHP version is not 5.2.9 
```

我输入了以下命令来尝试安装 libapache2-modxslt，这就是输出。

```
mark@ubuntu:/$ sudo apt-get install libapache2-modxslt php5-xsl
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package libapache2-modxslt 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:37:14.433

Debian/Ubuntu 软件包的名称略有不同。它应该`libapache2-mod-xslt`不是`libapache2-modxslt`（注意“mod”和模块名称之间的破折号）。所以试试

```
sudo apt-get install libapache2-mod-xslt php5-xsl 
```

**但是**，由于您只需要 PHP 的 XLS 包，那么只需让包管理器自己找到正确的依赖项（包管理在 Debian 和 Ubuntu 等衍生产品上做得很好并且功能强大）。所以只需这样做：

```
sudo apt-get install php5-xsl 
```

让事情发展。如果你很好奇，你总是可以使用 ie 列出包依赖项，`apt-cache`如下所示：

```
sudo apt-cache depends php5-xsl 
```

但如果不是，您要安装的软件包将需要额外的东西，`apt`会让您知道并要求确认安装额外的必需软件包。

# python - Python：用索引替换字符串

> ID：12305324
> 
> 赞同：1
> 
> 时间：2012-09-06T17:27:30.143
> 
> 标签：python, replace, indexing

我在表中有一个字段，其中包含以下格式的度分秒字符串值：

> 179-53-32

我想替换所有破折号并将其格式化为以下正确格式：

> 179° 53' 32"

基本上用正确的字符（度，分，秒）替换破折号并在其中有空格。我正在考虑按索引进行替换，但我认为它不起作用：

```
s.replace('-', '° ')[0]
s.replace('-', '\' ')[1] 
```

有没有办法完成我想做的事情？也许先枚举字符串然后替换？

谢谢，迈克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:30:21.320

这可能会这样做：

```
"%s° %s' %s\"" % s.split('-') 
```

您可能需要将调用包装`s.split`在一个元组调用中。否则我得到一个错误。所以它变成了这样：

```
"%s° %s' %s\"" % tuple(s.split('-')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:30:14.740

```
'179-53-32'.replace('-', '°', 1).replace('-', "'", 1)+ '"' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T20:00:16.003

您可以在正则表达式中使用组。它们非常有用。

```
m = re.match(r"(?P<first>\d+)-(?P<sec>\d+)-(?P<third>\d+)", "179-53-32")  
"%s° %s' %s\"" % (m.group('first'), m.group('sec'), m.group('third')) 
```

# bash - 如何一起使用 unix grep 和输出？

> ID：12305328
> 
> 赞同：0
> 
> 时间：2012-09-06T17:27:57.320
> 
> 标签：bash, unix, sed, grep, cut

我是 unix 命令的新手。我有一个名为 server.txt 的文件，它有 100 个字段，文件的第一行是标题。

我只想看看 99 和 100 的字段。

字段 99 只是一些数字，字段 100 是一个字符串。

每个字段的分隔符是一个空格。

我的目标是通过 grep 和正则表达式提取字符串（field100）中的每个标记，然后使用从字符串中提取的每个标记使用 field99 输出，并跳过我记录的前 1000 行

```
----server.txt--
... ...   ,field99,field100
... ...    5,"hi are"
... ...    3,"how is"

-----output.txt
header1,header2
5,hi
5,are
3,how
3,is 
```

所以我只是有一些想法，但我不知道如何组合所有脚本

以下是我的一些想法：

```
sed 1000d server.txt cut -f99,100  -d' ' >output.txt
grep | /[A-Za-z]+/| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:31:49.987

听起来更像是一份工作`awk`。

```
awk -F, 'NR <= 1000 { next; }
  { gsub(/^\"|\"$/, "", $100); split($100, a, / /);
    for (v=1; v<=length(a); ++v) print $99, a[v]; }' server.txt >output.txt 
```

程序的一般形式`awk`是一系列`condition { action }`表达式。第一行的条件`NR <= 1000`是`NR`当前行号。如果条件为真，则`next`操作跳到下一个输入行。否则，我们将进入下一个没有条件的表达式；因此，对于到达此处的所有输入行，它都是无条件的。它首先清除第 100 个字段值周围的双引号，然后将其按空格拆分为数组`a`。然后`for`循环遍历这个数组，打印第 99 个字段值和数组的`v`第 th 个元素，从数组`v=1`末尾开始一直向上。

输入文件格式有点麻烦。可以通过稍微更理智的输入格式来避免and`gsub`东西。`split`如果您是新手`awk`，您可能应该去寻找教程。

如果您只想学习一种脚本语言，我建议您使用 Perl 或 Python `awk`，但这取决于您的计划和方向。

# java - 如何在使用 SourceProvider 的情况下启用和禁用菜单项（eclipse rcp Indigo 3.7）

> ID：12305335
> 
> 赞同：4
> 
> 时间：2012-09-06T17:28:11.377
> 
> 标签：java, eclipse-rcp

我有一个 eclipse rcp（Indigo 3.7 版）应用程序（eclipse 插件项目）。我阅读了 Lars Vogel 的教程“Eclipse Commands Advanced”（修订版 0.2-2.1，11.04.2009-24.09.2011）。

首先，我使用带有菜单和一些命令的 menuContribution 创建了菜单扩展。

其次，我使用一些命令创建了命令扩展。

第三，我定义了处理程序扩展（带有 enabledWhen 表达式的处理程序）。

第四，我用一个变量编写了服务扩展。

我的 plugin.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
    <extension id="application" point="org.eclipse.core.runtime.applications">
        ...
    </extension>
    <extension point="org.eclipse.ui.perspectives">
        ...
    </extension>
    <extension id="product" point="org.eclipse.core.runtime.products">
        ...
    </extension>
    <extension point="org.eclipse.ui.views">
        ...
    </extension>
    <extension point="org.eclipse.ui.menus">
        <menuContribution allPopups="false" locationURI="menu:org.eclipse.ui.main.menu">
            <menu id="fileMenuItem" label="File" mnemonic="F">
                <command commandId="de.falk.rcp37.drawfigures.commands.new" id="newFileMenuItem" label="New" mnemonic="N" style="push">
                </command>
                <command commandId="de.falk.rcp37.drawfigures.commands.open" id="openFileMenuItem" label="Open..." mnemonic="O" style="push">
                </command>
                <separator name="de.falk.rcp37.drawfigures.menu.file.separator1" visible="true">
                </separator>
                <command commandId="de.falk.rcp37.drawfigures.commands.close" id="closeFileMenuItem" label="Close" mnemonic="C" style="push">
                </command>
                <separator name="de.falk.rcp37.drawfigures.menu.file.separator2" visible="true">
                </separator>
                <command commandId="de.falk.rcp37.drawfigures.commands.save" id="saveFileMenuItem" label="Save" mnemonic="S" style="push">
                </command>
                <command commandId="de.falk.rcp37.drawfigures.commands.saveas" id="saveAsFileMenuItem" label="Save as..." mnemonic="a" style="push">
                </command>
                <separator name="de.falk.rcp37.drawfigures.menu.file.separator3" visible="true">
                </separator>
                <command commandId="de.falk.rcp37.drawfigures.commands.exit" id="exitFileMenuItem" label="Exit" mnemonic="x" style="push">
                </command>
                <command commandId="de.falk.rcp37.drawfigures.commands.change" id="changeFileMenuItem" label="Change" mnemonic="h" style="push">
                </command>
            </menu>
        </menuContribution>
    </extension>
    <extension point="org.eclipse.ui.commands">
        <command id="de.falk.rcp37.drawfigures.commands.new" name="newFileCommand"></command>
        <command id="de.falk.rcp37.drawfigures.commands.open" name="openFileCommand"></command>
        <command id="de.falk.rcp37.drawfigures.commands.close" name="closeFileCommand"></command>
        <command id="de.falk.rcp37.drawfigures.commands.save" name="saveFileCommand"></command>
        <command id="de.falk.rcp37.drawfigures.commands.saveas" name="saveAsFileCommand"></command>
        <command id="de.falk.rcp37.drawfigures.commands.exit" name="exitFileCommand"></command>
        <command id="de.falk.rcp37.drawfigures.commands.change" name="changeFileCommand"></command>
    </extension>
    <extension point="org.eclipse.ui.handlers">
        <handler class="de.falk.rcp37.drawfigures.handler.NewHandler" commandId="de.falk.rcp37.drawfigures.commands.new"></handler>
        <handler class="de.falk.rcp37.drawfigures.handler.OpenHandler" commandId="de.falk.rcp37.drawfigures.commands.open"></handler>
        <handler class="de.falk.rcp37.drawfigures.handler.CloseHandler" commandId="de.falk.rcp37.drawfigures.commands.close">
            <enabledWhen>
                <with variable="de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.closestate">
                    <equals value="true"></equals>
                </with>
            </enabledWhen>
        </handler>
        <handler class="de.falk.rcp37.drawfigures.handler.SaveHandler" commandId="de.falk.rcp37.drawfigures.commands.save">
            <enabledWhen>
                <with variable="de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.savestate">
                    <equals value="true"></equals>
                </with>
            </enabledWhen>
        </handler>
        <handler class="de.falk.rcp37.drawfigures.handler.SaveAsHandler" commandId="de.falk.rcp37.drawfigures.commands.saveas">
            <enabledWhen>
                <with variable="de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.saveasstate">
                    <equals value="true"></equals>
                </with>
            </enabledWhen>
        </handler>
        <handler class="de.falk.rcp37.drawfigures.handler.ExitHandler" commandId="de.falk.rcp37.drawfigures.commands.exit"></handler>
        <handler class="de.falk.rcp37.drawfigures.handler.ChangeHandler" commandId="de.falk.rcp37.drawfigures.commands.change"></handler>
    </extension>
    <extension point="org.eclipse.ui.services">
        <sourceProvider provider="de.falk.rcp37.drawfigures.miscellaneous.MenuItemsStateSourceProvider">
            <variable name="de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.closestate" priorityLevel="workbench"></variable>
            <variable name="de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.savestate" priorityLevel="workbench"></variable>
            <variable name="de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.saveasstate" priorityLevel="workbench"></variable>
        </sourceProvider>
    </extension>
</plugin> 
```

此外，我实现了 MenuItemsStateSourceProvider：

```
package de.falk.rcp37.drawfigures.miscellaneous;
import java.util.HashMap;
import java.util.Map;

import org.eclipse.ui.AbstractSourceProvider;

public class MenuItemsStateSourceProvider extends AbstractSourceProvider {
    public static final String ID = "de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider";
    public static final String DRAWING_CLOSE_STATE = "de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.closestate";
    public static final String DRAWING_SAVE_STATE = "de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.savestate";
    public static final String DRAWING_SAVEAS_STATE = "de.falk.rcp37.drawfigures.miscellaneous.menuitemsstatesourceprovider.saveasstate";

    @Override
    public void dispose() {

    }

    @SuppressWarnings("rawtypes")
    @Override
    public Map getCurrentState() {
        HashMap<String, String> hashMap = new HashMap<String, String>();
        hashMap.put(ID, ID);
        hashMap.put(DRAWING_CLOSE_STATE, "false");
        hashMap.put(DRAWING_SAVE_STATE, "false");
        hashMap.put(DRAWING_SAVEAS_STATE, "false");
        return hashMap;
}

    @Override
    public String[] getProvidedSourceNames() {
        return new String[] { ID, DRAWING_CLOSE_STATE, DRAWING_SAVE_STATE, DRAWING_SAVEAS_STATE };
    }

public void setDrawingNewed(boolean drawingNewed) {
    if (ModelDefinitions.currentDrawing.getNewed() != drawingNewed) {
            ModelDefinitions.currentDrawing.setNewed(drawingNewed);
            fireSourceChanged(ISources.WORKBENCH, DRAWING_SAVEAS_STATE, ModelDefinitions.currentDrawing.getSaveAsStateString());
    }
}
public void setDrawingOpend(boolean drawingOpend) {
        if (ModelDefinitions.currentDrawing.getOpend() != drawingOpend) {
            ModelDefinitions.currentDrawing.setOpend(drawingOpend);
    fireSourceChanged(ISources.WORKBENCH, DRAWING_CLOSE_STATE, ModelDefinitions.currentDrawing.getCloseStateString());
            fireSourceChanged(ISources.WORKBENCH, DRAWING_SAVE_STATE, ModelDefinitions.currentDrawing.getSaveStateString());
            fireSourceChanged(ISources.WORKBENCH, DRAWING_SAVEAS_STATE, ModelDefinitions.currentDrawing.getSaveAsStateString());
        }
}
public void setDrawingChanged(boolean drawingChanged) {
        if (ModelDefinitions.currentDrawing.getChanged() != drawingChanged) {
            ModelDefinitions.currentDrawing.setChanged(drawingChanged);
            fireSourceChanged(ISources.WORKBENCH, DRAWING_SAVE_STATE, ModelDefinitions.currentDrawing.getSaveStateString());
        }
}
} 
```

和不同的处理程序：

```
public class ChangeHandler extends AbstractHandler {
@Override
public Object execute(ExecutionEvent event) throws ExecutionException {

        // doing some CHANGE operations...

    // Get the source provider service
    ISourceProviderService sourceProviderService = (ISourceProviderService) HandlerUtil.getActiveWorkbenchWindow(event).getService(ISourceProviderService.class);
    // Now get my service
    MenuItemsStateSourceProvider menuItemsStateSourceProvider = (MenuItemsStateSourceProvider)sourceProviderService.getSourceProvider(MenuItemsStateSourceProvider.ID);
    menuItemsStateSourceProvider.setDrawingChanged(true);

    return null;
    }
} 
```

或者：

```
public class NewHandler extends AbstractHandler {
@Override
public Object execute(ExecutionEvent event) throws ExecutionException {

        // doing some NEW operations...

    // Get the source provider service
    ISourceProviderService sourceProviderService = (ISourceProviderService) HandlerUtil.getActiveWorkbenchWindow(event).getService(ISourceProviderService.class);
    // Now get my service
    MenuItemsStateSourceProvider menuItemsStateSourceProvider = (MenuItemsStateSourceProvider)sourceProviderService.getSourceProvider(MenuItemsStateSourceProvider.ID);
    menuItemsStateSourceProvider.setDrawingNewed(true);
    menuItemsStateSourceProvider.setDrawingOpend(false);
    menuItemsStateSourceProvider.setDrawingChanged(false);

    return null;
}
} 
```

等等（对于所有处理程序）...

最后在绘图类中：

```
public String getCloseStateString() {
    return (opend) ? "true" : "false";
}
public String getSaveStateString() {
    return (opend && changed) ? "true" : "false";
}
public String getSaveAsStateString() {
    return (opend || newed) ? "true" : "false";
}

public void setNewed(boolean newed) {
    this.newed = newed;
}
public void setOpend(boolean opend) {
    this.opend = opend;
}
public void setChanged(boolean changed) {
    this.changed = changed;
} 
```

但没有任何效果！有人可以帮忙吗？？

谢谢鲁莫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T20:51:51.780

`ISourceProvider.getCurrentState`期望 a`Map<String, Object>`作为返回值（参见 Javadoc）。检查启用的处理程序使用一个`Boolean`值，而不是一个`String`.

如果您将`getCurrentState`方法更改`MenuItemsStateSourceProvider`为

```
@SuppressWarnings("rawtypes")
@Override
public Map getCurrentState() {
  HashMap<String, Object> hashMap = new HashMap<String, Object>();
  hashMap.put(ID, ID);
  hashMap.put(DRAWING_CLOSE_STATE, Boolean.TRUE);
  hashMap.put(DRAWING_SAVE_STATE, Boolean.FALSE);
  hashMap.put(DRAWING_SAVEAS_STATE, Boolean.FALSE);
  return hashMap;
} 
```

菜单条目将`Close`被启用，而其他条目将被禁用。所有状态值都必须是`Boolean`。

# java - Hibernate 插入错误：必须在调用 save() 之前手动分配此类的 id：

> ID：12305343
> 
> 赞同：1
> 
> 时间：2012-09-06T17:28:28.477
> 
> 标签：java, hibernate

我有这个我无法解决的问题，这是我的实体类：

/** * @hibernate.class * table="users.network_topic" * @hibernate.cache usage="read-write" */ 公共类 NetworkTopic 实现 Serializable, Idable{

```
/** identifier field */
private Long id;

/** persistent field */
private Long networkId;

/** persistent field */
private Long topicId;

private UserTopic topic;
private Network network;

/** 
 *            @hibernate.id
 *             generator-class="assigned"
 *             type="java.lang.Long"
 *             column="id"
 */
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

/** 
 *            @hibernate.property
 *             type="java.lang.Long"
 *             column="network_id"
 *             not-null="true"
 */
public Long getNetworkId() {
    return networkId;
}

public void setNetworkId(Long networkId) {
    this.networkId = networkId;
}

/** 
 *            @hibernate.property
 *             type="java.lang.Long"
 *             column="user_topic_id"
 *             not-null="true"
 */
public Long getTopicId() {
    return topicId;
}

public void setTopicId(Long topicId) {
    this.topicId = topicId;
}   

/** 
 *            @hibernate.set
 *             lazy="true"
 *             inverse="true"
 *             cascade="none"
 *            @hibernate.key
 *             column="user_topic_id"
 *            @hibernate.one-to-many
 *             class="com.netblue.matchpoint.domain.UserTopic"
 *         
 */
public UserTopic getTopic() {
    return topic;
}

public void setTopic(UserTopic topic) {
    this.topic = topic;
}   

/** 
 *            @hibernate.set
 *             lazy="true"
 *             inverse="true"
 *             cascade="none"
 *            @hibernate.key
 *             column="network_id"
 *            @hibernate.one-to-many
 *             class="com.netblue.matchpoint.domain.Network"
 *         
 */    
public Network getNetwork() {
    return network;
}

public void setNetwork(Network network) {
    this.network = network;
}   

@Override
public String toString() {
    return "Network[id=" + id + "]";
} 
```

}

然后我尝试用这个代码保存一个新的寄存器：

```
 UserTopic topic = new UserTopic();
        topic.setId(topicId);
        topic.setName(ParseUtil.getString(map.get(MPConstants.TOPIC_NAME_PARAM)));
        topic.setCreatedBy(ParseUtil.getInt(map.get(MPConstants.USER_ID)));
        Date now = new Date();
        topic.setCreatedDt(now);
        topic.setLastUpdatedDt(now);
        topic.setStatusId(Status.ACTIVE);
        topic.setActivityCnt(0);
        userTopicDao.saveOrUpdate(topic);

        UserTopicMap utm = new UserTopicMap();
        utm.setId(topicId);
        utm.setMtid(topicId);
        utm.setOtid(topicId);
        utm.setIsDeleted(false);
        utm.setLastUpdatedDt(now);
        userTopicMapDao.saveOrUpdate(utm);

        Network network = MpAuctionUtil.getNetworkById(networkId);
        NetworkTopic networkTopic = new NetworkTopic();
        networkTopic.setNetworkId(networkId);
        networkTopic.setTopicId(topicId);
        networkTopic.setNetwork(network);
        networkTopic.setTopic(topic);
        LOG.debug("userTopicService addObjSubscriber x networkId="+networkId+", topicId="+topicId);
        networkTopicDao.saveOrUpdate(networkTopic); 
```

最后几行是失败的，如果我删除它们它可以工作，我的意思是它可以保存主题，但是当我尝试这样做时它失败了，我不知道我是否做错了什么，请帮助我！ ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:49:43.073

NetworkTopic 类尚未分配 id。您必须使用 setId 方法或考虑考虑其他 id 策略之一

[2.2.3.1。生成标识符属性](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:08:19.467

```
NetworkTopic networkTopic = new NetworkTopic();
    networkTopic.setNetworkId(networkId);
    networkTopic.setTopicId(topicId);
    networkTopic.setNetwork(network);
    networkTopic.setTopic(topic);
    LOG.debug("userTopicService addObjSubscriber x networkId="+networkId+", topicId="+topicId);
    networkTopicDao.saveOrUpdate(networkTopic); 
```

在这里，您必须调用该方法`setId`，并手动设置值，因为您的 id 生成器是“分配的”，这意味着您必须在每次插入或更新数据之前手动分配！

# android - Android 运行在什么 JAVA SDK 版本上

> ID：12305344
> 
> 赞同：7
> 
> 时间：2012-09-06T17:28:29.943
> 
> 标签：android

我总是对此感到困惑，Android 运行在什么 SDK 版本的 Java 上？例如 Android 2.3 和 Android 4.0。他们运行什么 JAVA SDK（1.4,1.5..etc？请让我知道，除非我完全错过了这个概念

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T17:42:41.660

> 我总是对此感到困惑，Android 运行在什么 SDK 版本的 Java 上？

从技术上讲，它在没有“Java SDK 版本”的情况下运行。Android 设备具有用于执行 Dalvik 字节码的 Dalvik VM，而不是用于执行 Java 字节码的 Java VM。

当您构建 Android 应用程序时，Android 开发工具会将 Java 字节码交叉编译为 Dalvik 字节码。这些工具支持 Java 1.5 或 1.6 的 Java 字节码。它绝对不支持早于 1.5 的版本，如果您尝试 Java 7，我不确定会发生什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T17:41:59.333

目前，java 1.6 是用于所有 Android 版本的版本。请记住，有些东西不存在，并且添加了一些额外的东西，所以实际上，它更像是它自己的分支。

# yii - Yii Cbreadcrumbs - 如何自定义 Cbreadcrumbs 路由？

> ID：12305350
> 
> 赞同：0
> 
> 时间：2012-09-06T17:28:46.557
> 
> 标签：yii

这是我在**布局**页面上的内容：

```
<?php
 $this->widget('zii.widgets.CBreadcrumbs', array(
   'links'=>$this->breadcrumbs,
   'separator'=>' > ',
   'homeLink' => CHtml::link('Initial Page', Yii::app()->homeUrl)
));
?> 
```

这是我的**观点**：

```
$this->breadcrumbs=array(Yii::t('srr', 'Routes')); 
```

这是文件夹和文件结构：

```
views/activity/index
views/activity/route 
```

当用户在索引上时，他/她会看到如下所示的面包屑：

```
 Initial Page > Activity 
```

当用户在路线上时，他/她会看到如下所示的面包屑：

```
 Initial Page > Route 
```

**我希望，当用户在路由页面上时，有一个像这样的面包屑：**

```
Initial Page > Activity > Route 
```

Route 是一个静态页面，但在活动控制器上有它自己的操作（以防万一）。

**我们怎样才能完成这样的事情？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:45:04.280

面包屑[`links`](http://www.yiiframework.com/doc/api/1.1/CBreadcrumbs#links-detail "http://www.yiiframework.com/doc/api/1.1/CBreadcrumbs#links-detail")就像这样：

```
'Label'=>'url' 
```

因此，您可以在视图中执行此操作：

```
$this->breadcrumbs=array(
    'Activity'=>array('index'),
    Yii::t('srr', 'Routes')
); 
```

# python - 将 Python 列表（JSON 或其他）插入 MySQL 数据库

> ID：12305356
> 
> 赞同：4
> 
> 时间：2012-09-06T17:28:56.377
> 
> 标签：python, mysql, json, list, insert

所以我在Python中有一堆数组数据。好吧，我有一个列表列表。我正在尝试将此数组存储到 MySQL 数据库中的单个单元格中。我尝试使用 JSON 来序列化我的数据，但也许我不明白 JSON 是如何工作的。

所以在连接到我的数据库后：（我已经尝试了上游和下游的 LONGTEXT 和 LONGBLOB 数据类型

```
cur = con.cursor()
cur.execute("CREATE TABLE IF NOT EXISTS 963168MBV17A(Id INT AUTO_INCREMENT PRIMARY KEY, Rev INT, Part VARCHAR(15), SN INT(7), Date DATE, Time TIME, Iterations INT(3), Upstream LONGBLOB, Downstream LONGBLOB, ResultList LONGTEXT, Result CHAR(1), Report LONGBLOB)") 
```

我将我的列表列表称为 upstream_data 和downstream_data 并执行以下操作：

```
export_upstream = json.dumps(upstream_data)
export_downstream = json.dumps(downstream_data) 
```

然后我执行 SQL 命令：

```
cur = con.cursor()    
sql_input = "INSERT INTO 963168MBV17A(Rev, Part, SN, Iterations, Date, Time, Upstream, Downstream, ResultList, Result, Report) VALUES('503', '100-120970-0031', '1594539', '%s', '%s', '%s', '%s', '%s', 0, P, 0" %(export_date, export_time, export_numtests, export_upstream, export_downstream)
cur.execute(sql_input) 
```

参考 Mordi 的答案（http://stackoverflow.com/questions/4251124/inserting-json-into-mysql-using-python），我什至尝试过：

```
export_upstream = json.dumps(json.dumps(upstream_data))
export_downstream = json.dumps(json.dumps(downstream_data)) 
```

但无论如何我最终都会遇到错误：

```
Traceback (most recent call last):
  File "P:\Projects\testing database\scrap\test.py", line 83, in <module>
    cur.execute(sql_input)
  File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1") 
```

此外，当我做一个

```
print "about to execute(%s)" % sql_input 
```

我看到 JSON 对象显示为一个长字符串，到处都是单引号（用于列表，在外部表示字符串）。当我执行 json.dumps(json.dumps(upstream_data)) 时，内部引号变为双引号 "" 并以 \ 字符开头。尽管如此，我还是遇到了同样的错误。

有任何想法吗？如果没有，有没有更好的方法将 Python 数组/列表数据存储到单个 MySQL 单元中？

[在这里](http://dl.dropbox.com/u/2319996/error.txt)输出

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T17:36:57.527

你需要让 MySQL 库为你做参数处理；这有一个额外的好处是让 MySQL 准备你的语句，使重复插入也更快：

```
cur = con.cursor()    
sql_input = "INSERT INTO 963168MBV17A(Rev, Part, SN, Iterations, Date, Time, Upstream, Downstream, ResultList, Result, Report) VALUES('503', '100-120970-0031', '1594539', ?, ?, ?, ?, ?, 0, P, 0"
cur.execute(sql_input, (export_date, export_time, export_numtests, export_upstream, export_downstream)) 
```

有关参数化 SQL 的（一些）更多详细信息，请参阅[Python DB API 2.0 规范](http://www.python.org/dev/peps/pep-0249/)。每个数据库适配器都记录了确切支持的参数格式，因此也要检查一下。例如，MySQLdb 模块模仿 python 字符串格式化语法，并`%s`用作占位符：

```
sql_input = "INSERT INTO 963168MBV17A(Rev, Part, SN, Iterations, Date, Time, Upstream, Downstream, ResultList, Result, Report) VALUES('503', '100-120970-0031', '1594539', %s, %s, %s, %s, %s, 0, P, 0" 
```

其他可能的参数选项是数字（`:1, :2`等）、名称（`:foo, :bar`）或其他形式的 Python 字符串格式，命名格式说明符：（`%(foo)s, %(bar)s`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:38:10.857

您只是以错误的形式调用 DB API，如果您像这样替换您的参数，您将负责自己转义数据中的引号和双引号。

这不仅会给你带来你遇到的错误（而且你很幸运），因为这也允许 SQL 注入的危险攻击。

Python 的数据库 API 是从头开始设计的，以避免发生此类攻击的可能性，它通过让调用`cursor.execute`为您执行字符串替换来简单地做到这一点。然后它将向您的字符串添加必要的转义。所以，而不是这样做：

```
sql_input = "INSERT INTO 963168MBV17A(Rev, Part, SN, Iterations, Date, Time, Upstream, Downstream, ResultList, Result, Report) VALUES('503', '100-120970-0031', '1594539', '%s', '%s', '%s', '%s', '%s', 0, P, 0" %(export_date, export_time, export_numtests, export_upstream, export_downstream)
cur.execute(sql_input) 
```

做

```
sql_input = "INSERT INTO 963168MBV17A(Rev, Part, SN, Iterations, Date, Time, Upstream, Downstream, ResultList, Result, Report) VALUES(%s, %s,%s, %s, %s, %s, %s, %s, %s, %s, %s" 
cur.execute(sql_input, [503, '100-120970-0031', '1594539', export_date, export_time, export_numtests, export_upstream, export_downstream, 0, "P", 0] ) 
```

——不过，如果你在你的 SOURCE 文件中需要所有那些疯狂的硬编码数字，而不是在自动生成的文件中，我敢说你的项目无论如何都注定要失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:39:21.507

我在您的代码中看到的第一个问题是：

```
sql_input = "INSERT INTO table (column) VALUES('%s');" % ( data ) 
```

你永远不应该这样做——你正在使用字符串插值，它不能保护你免受 SQLinjection 或格式错误的 sql 的影响。

大多数 python db apis 使用类似于以下的占位符语法：

```
sql = "INSERT INTO table (column) VALUES( %s );"
values = (data,)
cur.execute(sql,values) 
```

请注意，您分别传入语句和值。API 处理转义和格式化。

有些也允许使用dicts：

```
sql = "INSERT INTO table (column) VALUES( %(id)s );"
values = { 'id': 1 )
cur.execute(sql,values) 
```

阅读如何正确使用您的数据库 api - 这是您最大的问题，并且可能会导致您的所有其他问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T17:47:37.517

您可能会尝试的一件事是使用 SQLAlchemy 的[SQL 表达式生成](http://docs.sqlalchemy.org/en/latest/core/tutorial.html)，它将为您处理所有转义等，另外还可以让您避免处理许多安全漏洞（至少在插入 SQL 数据库等方面）。它参数化查询，而不是像您尝试做的那样进行内联字符串插值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:36:22.920

我预计问题是由于转义 SQL 命令，或者更确切地说是缺少相同的。

永远，永远，永远这样做；

```
cursor.execute("INSERT INTO whatever VALUES (%s)" % "foo") 
```

除了您看到的问题之外，如果您在那里传递用户输入是不安全的（如果您不知道原因，请查找“Little Johnny Tables”）。

相反，请执行以下操作：

```
cursor.execute("INSERT INTO whatever VALUES (%s)", ["foo"]) 
```

并让MySql接口整理转义。

# iphone - 滑动 UIWebView 以前进到下一篇博客文章

> ID：12305359
> 
> 赞同：0
> 
> 时间：2012-09-06T17:29:02.297
> 
> 标签：iphone, uitableview, nsmutablearray, uigesturerecognizer

我有几个博客应用程序可以解析 RSS，并在 TableView 中显示文章标题和日期。我有一个从 Ray Wenderlich 的教程中使用的 RSSEntry 类。它解析所有不同的元素，然后我创建了一个包含 HTML 代码的新字符串，并插入到文章标题中，并将内容插入到这个新的 HTML 字符串中。我在 TableView 中 selectedAtRowIndex 的当前代码是：

```
RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

         _webViewControllerplay.entry = entry; 
```

其中 _allEntries 是 NSMutableArray，_webViewControllerplay 是带有 webview 的视图控制器。

我想做的是在 webview 的视图控制器中添加一个手势识别器，这样当我向左或向右滑动时，它会转到上一篇文章或下一篇文章，而不必回到表格视图。我可以采取哪些方法来实现这一目标？我知道我认为我需要传递整个数组，然后告诉它它当前在哪一行，并在使用手势识别器时简单地添加或减去它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:02:42.683

我不太确定我是否理解你的意思。我最初的理解类似于@sergio - 如何实现手势识别器。但似乎您正在寻找“如何设计”您的 MVC（基于您对@sergio 的评论：“ *......我的问题实际上是让数组和所有内容都通过......* ”。

如果是这样，这里有一个可能有用的建议：

如果你重构你的模型，所有条目，到它自己的类（子类`NSObject`）并声明一些方便的属性，这样当，比如说，`EntriesViewController`推`WebViewController`入导航堆栈时，而不是传递条目本身，你可以传递一个指向模型。`WebViewController`可以自己查询模型。

像这样的图表：

![在此处输入图像描述](../Images/b2a224bc702318eff444aafca823a935.png)

希望这可以帮助！

* * *

编辑：

这是您的模型界面

```
#import <Foundation/Foundation.h>

@interface SARSSEntryModel : NSObject

@property (nonatomic, strong) NSMutableArray *allEntries;
@property (nonatomic)         NSUInteger      currentEntryIndex;

@end 
```

这是模型实现

```
#import "SARSSEntryModel.h"

@implementation SARSSEntryModel
@synthesize allEntries   = _allEntries;
@synthesize currentEntryIndex = _currentEntryIndex;

// instantiate on-demand
- (NSMutableArray *)allEntries {
    if (!_allEntries) {
        _allEntries = [[NSMutableArray alloc] initWithObjects:@"http://www.google.com", @"http://www.yahoo.com", @"http://www.bing.com", nil];
    }
    return _allEntries;
} 
```

这是EntriesViewController接口

```
#import <UIKit/UIKit.h>
#import "SARSSEntryModel.h"
#import "SAWebViewController.h"

@interface SAEntriesViewController : UITableViewController
@property (nonatomic, strong) SARSSEntryModel *model; // this is your model
@end 
```

这是 EntriesViewController 实现

```
#import "SAEntriesViewController.h"

@implementation SAEntriesViewController
@synthesize model = _model;

- (void)viewDidLoad {
    self.model = [[SARSSEntryModel alloc] init];
    [super viewDidLoad];
}

- (void)viewDidUnload {
    [self setModel:nil];
    [super viewDidUnload];
}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.model.allEntries.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"cell identifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    cell.textLabel.text = [self.model.allEntries objectAtIndex:indexPath.row];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    self.model.currentEntryIndex = indexPath.row;

    SAWebViewController *wvc = [self.storyboard instantiateViewControllerWithIdentifier:@"WebViewControllerIdentifier"];
    wvc.model = self.model;
    [self.navigationController pushViewController:wvc animated:YES];
} 
```

这是WebViewController接口

```
#import <UIKit/UIKit.h>
#import "SARSSEntryModel.h"

@interface SAWebViewController : UIViewController
@property (nonatomic, strong) SARSSEntryModel *model;
@property (weak, nonatomic) IBOutlet UIWebView *webView;
@end 
```

这是 WebViewController 的实现

```
#import "SAWebViewController.h"

@implementation SAWebViewController
@synthesize webView = _webView;
@synthesize model = _model;

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    // for testing. to prevent conflict with one touch swipe
    UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(navigate:)];
    [self.webView addGestureRecognizer:swipe];
    swipe = nil;
}

- (void)viewDidUnload {
    [self setWebView:nil];
    [self setModel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (void)viewDidAppear:(BOOL)animated {

    [self loadURL];
    [super viewDidAppear:animated];
}

- (void)loadURL {
    NSString *urlString = [self.model.allEntries objectAtIndex:self.model.currentEntryIndex];
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    [self.webView loadRequest:request];
}

- (void)navigate:(id)sender {

    UISwipeGestureRecognizer *swipe = (UISwipeGestureRecognizer *)sender;
    if (swipe.direction == UISwipeGestureRecognizerDirectionLeft) {

        if (self.model.currentEntryIndex < self.model.allEntries.count) {
            self.model.currentEntryIndex++;
        }
        else {
            self.model.currentEntryIndex = 0;
        }
    }
    else if (swipe.direction == UISwipeGestureRecognizerDirectionRight) {

        if (self.model.currentEntryIndex > 0) {
            self.model.currentEntryIndex--;
        }
        else {
            self.model.currentEntryIndex = self.model.allEntries.count - 1;
        }
    }

    [self loadURL];
}
@end 
```

# markdown - Markdown 为连续列表插入段落

> ID：12305362
> 
> 赞同：0
> 
> 时间：2012-09-06T17:29:07.587
> 
> 标签：markdown

这个来源

```
 1\.  Lorem ipsum dolor voluptate amet id minim eiusmod. 
    1\.  Lorem ipsum do occaecat anim do tempor ad. 

  1\.  Lorem ipsum Ut sed anim voluptate id aliquip. Lorem ipsum esse ut voluptate non Ut ullamco sunt laborum occaecat non et consequat est ut qui esse. 
  2\.  Lorem ipsum aliquip amet consectetur in pariatur labore exercitation proident veniam nisi qui veniam. 
  3\.  Lorem ipsum cupidatat ad dolor id veniam in mollit nisi deserunt. 
```

输出...

```
<ol>
<li><p>Lorem ipsum dolor voluptate amet id minim eiusmod. </p>

<ol><li>Lorem ipsum do occaecat anim do tempor ad. </li></ol></li>
<li><p>Lorem ipsum Ut sed anim voluptate id aliquip. Lorem ipsum esse ut voluptate non Ut ullamco sunt laborum occaecat non et consequat est ut qui esse. </p></li>
<li>Lorem ipsum aliquip amet consectetur in pariatur labore exercitation proident veniam nisi qui veniam. </li>
<li>Lorem ipsum cupidatat ad dolor id veniam in mollit nisi deserunt. </li>
</ol> 
```

这是一个简化。我其实想要更多这样的东西......

```
1\.  Lorem ipsum dolor voluptate amet id minim eiusmod.

  Lorem ipsum officia ea ex Excepteur minim sint id occaecat Duis voluptate Duis. Lorem ipsum do dolor Ut est qui aliquip quis in amet. 

  1\.  Lorem ipsum do occaecat anim do tempor ad. 

2\.  Lorem ipsum magna mollit labore aliqua fugiat dolore fugiat esse et culpa cupidatat magna ut labore. 

  Lorem ipsum irure incididunt elit officia magna nulla. 

  1\.  Lorem ipsum Ut sed anim voluptate id aliquip. Lorem ipsum esse ut voluptate non Ut ullamco sunt laborum occaecat non et consequat est ut qui esse. 
  2\.  Lorem ipsum aliquip amet consectetur in pariatur labore exercitation proident veniam nisi qui veniam. 
  3\.  Lorem ipsum cupidatat ad dolor id veniam in mollit nisi deserunt. 
```

它是如何决定是否放置一个段落的？我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:12:11.767

有一个提示：在连续列表之间使用 HTML 注释：

```
* element 1
* element 2
* element 3

<!-- -->

* element 1
* element 2 
```

请参阅[http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html](http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html)（结束列表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:47:53.133

尝试[pandoc](http://johnmacfarlane.net/pandoc)。它不会放入`<p>`标签供您输入。这是对[pandoc 使用的规则](http://johnmacfarlane.net/pandoc/README.html#compact-and-loose-lists)的解释，以及在您给出的那种情况下对 Markdown.pl 输出的讨论。

# java - throws 关键字不能与线程的 run 方法一起使用

> ID：12305363
> 
> 赞同：2
> 
> 时间：2012-09-06T17:29:11.803
> 
> 标签：java

我读到 throws 关键字不能与线程的 run 方法一起使用。我想知道它是设计错误还是有不允许这样做的真正原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:36:22.770

主要原因是没有人可以捕获异常，除了您可能在您的`Thread`或包含的`ThreadGroup`.

请注意，您仍然可以抛出一个`RuntimeException`，它最终会出现在上述处理程序中。

`run()`（顺便说一下， s 的返回值也可以使用同样的推理`void`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:42:23.967

`Thread.run()`被声明为不抛出已检查异常，原因与`static main(String args)`Java 控制台应用程序中的 （这两种方法通常由 Java 运行时环境调用，而不是由您的代码调用。）请注意，这两种方法仍然可以引发*未经检查*的异常（`RuntimeException`、`Error`及其子类）。Java 运行时环境将处理这些（通常以一种不太优雅的方式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:32:32.097

好吧，`Runnable's` `run()`方法**不能返回，也不能抛出任何已检查的异常**......很可能Java的设计者认为它不值得在一个单独的线程上抛出异常，这主要是一个单独的进程......

但后来从**Java 1.5** `Callable<T>`接口开始带有**可以返回并抛出检查异常的**`call()`方法......

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T17:38:46.073

问题是调用上下文无法获取返回值或异常，因为它现在在新上下文中运行（这就是新线程的全部含义）。但是你可以使用 Thread.setDefaultUncaughtExceptionHandler ()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:40:16.937

运行本身不会抛出异常。当你调用 .start() （调用 run() 函数）时，你所做的只是告诉程序继续沿着新线程的路径前进。run() 函数中的函数调用和所有内容都可能引发异常。run() 本身没有可能的运行时错误。如果出现运行时错误，那是因为您的进程资源管理器、处理程序或某些操作系统级别的问题发生了，那么您的程序无法处理任何事情。**

# ruby-on-rails - Rails：日期验证或无/空白

> ID：12305365
> 
> 赞同：0
> 
> 时间：2012-09-06T17:29:22.470
> 
> 标签：ruby-on-rails, ruby, validation, date

在我的事件模型中，我（曾经有）这些行用于验证：

```
validates_date_of :begins_at
validates_date_of :deadline
validates :deadline, :date => {:before_or_equal_to => :begins_at} 
```

现在我想拥有两个字段选项，以满足“未确定”事件。但是，如果我有

```
validates_date_of :begins_at, :allow_nil => true
validates_date_of :deadline, :allow_nil => true
validates :deadline, :date => {:before_or_equal_to => :begins_at }, :allow_nil => true 
```

这些测试失败（感谢**leemachin**的建议，我重构了）

```
it "should accept nil as begining_date"  do
@event.begins_at=nil;
@event.should be_valid
end

it "should have valid deadline"  do
@event.deadline="Not a date";
@event.should_not be_valid
end 
```

而这些通过

```
it "should accept both dates as nil"  do
@event.begins_at=nil;
@event.deadline=nil;
@event.should be_valid
end

it "should accept nil as deadline"  do
@event.deadline=nil;
@event.should be_valid
end 
```

我在程序逻辑中有一个解决方法，只要开始日期为零，就将截止日期设置为零，但测试仍然失败。有任何想法吗？

谢谢

**PS: 使用 gem "date_validator", "~> 0.6.3"***

# javascript - 使用 Google Maps API 驾驶时间多边形

> ID：12305366
> 
> 赞同：5
> 
> 时间：2012-09-06T17:29:30.347
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在寻找一个**纯（或尽可能纯）的 Google Maps JavaScript API V3 解决方案**，以向我的 Google Maps 应用程序添加行驶时间多边形功能。

基本上，工作流程是用户单击地图上的标记或点，然后在标记/点周围生成一个多边形，指示您可以在 5 分钟内向任何方向行驶的区域。

我不确定是否甚至可以将其作为纯 Google Maps API 解决方案来执行，因为它需要使用随机路线对方向服务进行*太多*调用，然后任何不在时间阈值内的调用都会被丢弃. 不确定这是否可行，或者设计它的最佳方法是什么。为此可能需要使用一些**后端处理**，但我想首先排除所有其他选项，但欢迎提供任何后端解决方案示例。

非常感谢任何帮助、建议或示例。以下是我遇到的一些**示例，但它们不是纯 Google Maps API 解决方案和/或不使用行驶时间：**

1.  [Google Maps Utility Library 示例](http://google-maps-utility-library-v3.googlecode.com/svn-history/r172/trunk/arcgislink/examples/coverarea.html)- 在您单击的点周围绘制 1、2 和 3 分钟行驶时间的多边形，但它使用 Esri 的示例地理处理服务来运行计算并生成多边形几何，因此这不适用于我的要求。

2.  [30 英里方向](http://maps.forum.nu/gm_driving_radius.html)- 这是一个使用 Directions API 的纯 Google Maps API 解决方案，并绘制了一个漂亮的多边形，**但**它不需要计算行驶时间，只是从点到 30 英里外的距离*。*

3.  [Mapnificent](http://www.mapnificent.net/bayarea) - 似乎是一个纯粹的谷歌地图 API 解决方案，他们有一个 API，但他们处理的是从公共交通数据中提取的公共交通时间，*而不是驾驶时间*。因此，随着时间增加而“开放”的区域表示您可以在指定时间内乘坐公共交通工具的地点。我想要这个，**但需要开车时间**而不是运输时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:46:47.350

你所说的“ [**30 英里方向**](http://maps.forum.nu/gm_driving_radius.html)”是我的混搭，虽然它很旧并且是用 V2 API 编写的。您可以使用与 mashup 相同的原理，即围绕起点计算一个圆圈并将其点作为目的地，然后对于每条路线在到达所需的行驶时间时将其切断。

**原始链接已失效**（下面的代码片段）

*   [链接到 Live Copy（仍然是 v2）](http://geocodezip.com/v2_marcelo_driveTimePolygon.html)
*   [链接到 v3 端口](http://geocodezip.com/v3_marcelo_driveTimePolygon.html)

在该示例中，函数 shortAndShow() 会截断超过 30 英里的路线部分。由于 30 英里的目标圆具有直线半径，因此不太可能到达，因为道路有曲线，因此您在到达蓝色圆的边缘之前到达了 30 英里。您也可以这样做，但要根据行驶时间而不是距离来切断路线。

性能将取决于您设置可能目标点的圆周间隔（以度为单位）。每 1 度的尝试将比每 10 度的尝试多 10 倍的请求（默认为 30 度）。

**代码片段：**

```
var map;
var container;
var zoom = 9;
var centerPoint = new google.maps.LatLng(35.149534, -90.04898);
var dirService = new google.maps.DirectionsService();
var centerMarker;
var circleMarkers = Array();
var circlePoints = Array();
var drivePolyPoints = Array();
var searchPolygon, drivePolygon;
var distToDrive = 30; // miles
var pointInterval = 30;
var searchPoints = [];
var polyline;
var polylines = [];
var redIcon8 = "https://maps.gstatic.com/intl/en_us/mapfiles/markers2/measle.png";

function initialize() {
  map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: centerPoint,
      zoom: 9,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  google.maps.event.addListener(map, "click", mapClick);
}
google.maps.event.addDomListener(window, "load", initialize);

function mapClick(evt) {
  // map.clearOverlays();
  circleMarkers = Array();
  if (!centerMarker) {
    centerMarker = new google.maps.Marker({
      position: evt.latLng,
      map: map
    });
  } else {
    centerMarker.setMap(null);
    centerMarker.setPosition(evt.latLng);
  }
  centerMarker.setMap(map);
  searchPoints = getCirclePoints(evt.latLng, distToDrive);
  drivePolyPoints = Array();
  getDirections();
}

function getCirclePoints(center, radius) {
  var bounds = new google.maps.LatLngBounds();
  var circlePoints = Array();
  var searchPoints = Array();
  with(Math) {
    var rLat = (radius / 3963.189) * (180 / PI); // miles
    var rLng = rLat / cos(center.lat() * (PI / 180));
    for (var a = 0; a < 361; a++) {
      var aRad = a * (PI / 180);
      var x = center.lng() + (rLng * cos(aRad));
      var y = center.lat() + (rLat * sin(aRad));
      var point = new google.maps.LatLng(parseFloat(y), parseFloat(x), true);
      bounds.extend(point);
      circlePoints.push(point);
      if (a % pointInterval == 0) {
        searchPoints.push(point);
      }
    }
  }
  searchPolygon = new google.maps.Polygon({
    paths: circlePoints,
    strokeColor: '#0000ff',
    strokeWeight: 1,
    strokeOpacity: 1,
    fillColor: '#0000ff',
    fillOpacity: 0.2
  });
  searchPolygon.setMap(map);
  map.fitBounds(bounds);
  return searchPoints;
}

function getDirections() {
  if (!searchPoints.length) {
    return;
  }
  var to = searchPoints.shift();
  var request = {
    origin: centerMarker.getPosition(),
    destination: to,
    travelMode: google.maps.TravelMode.DRIVING
  };
  dirService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      var distance = parseInt(result.routes[0].legs[0].distance.value / 1609);
      var duration = parseFloat(result.routes[0].legs[0].duration.value / 3600).toFixed(2);
      var path = result.routes[0].overview_path;
      var legs = result.routes[0].legs;
      if (polyline && polyline.setPath) {
        polyline.setPath([]);
      } else {
        polyline = new google.maps.Polyline({
          path: [],
          // map: map,
          strokeColor: "#FF0000",
          strokeOpacity: 1
        });
      }
      for (i = 0; i < legs.length; i++) {
        var steps = legs[i].steps;
        for (j = 0; j < steps.length; j++) {
          var nextSegment = steps[j].path;
          for (k = 0; k < nextSegment.length; k++) {
            polyline.getPath().push(nextSegment[k]);
            // bounds.extend(nextSegment[k]);
          }
        }
      }
      // polyline.setMap(map);
      shortenAndShow(polyline);
      getDirections();
    } else {
      console.log("Directions request failed, status=" + status + " [from:" + request.origin + " to:" + request.destination + "]");
      getDirections();
    }
  });
}

function shortenAndShow(polyline) {
  var distToDriveM = distToDrive * 1609;
  var dist = 0;
  var cutoffIndex = 0;
  var copyPoints = Array();
  for (var n = 0; n < polyline.getPath().getLength() - 1; n++) {
    dist += google.maps.geometry.spherical.computeDistanceBetween(polyline.getPath().getAt(n), polyline.getPath().getAt(n + 1));
    //GLog.write(dist + ' - ' + distToDriveM);
    if (dist < distToDriveM) {
      copyPoints.push(polyline.getPath().getAt(n));
    } else {
      break;
    }
  }
  var lastPoint = copyPoints[copyPoints.length - 1];
  var newLine = new google.maps.Polyline({
    path: copyPoints,
    strokeColor: '#ff0000',
    strokeWeight: 2,
    strokeOpacity: 1
  });
  newLine.setMap(map);
  polylines.push(newLine);
  drivePolyPoints.push(lastPoint);
  addBorderMarker(lastPoint, dist)
  if (drivePolyPoints.length > 3) {
    if (drivePolygon) {
      drivePolygon.setMap(null);
    }
    drivePolygon = new google.maps.Polygon({
      paths: drivePolyPoints,
      strokeColor: '#00ff00',
      strokeWeight: 1,
      strokeOpacity: 1,
      fillColor: '#00ff00',
      fillOpacity: 0.4
    });
    drivePolygon.setMap(map);
  }
}

function addBorderMarker(pt, d) {
  var str = pt.lat().toFixed(6) + ',' + pt.lng().toFixed(6) + ' - Driving Distance: ' + (d / 1609).toFixed(2) + ' miles';
  var marker = new google.maps.Marker({
    position: pt,
    icon: redIcon8,
    title: str
  });
  circleMarkers.push(marker);
  marker.setMap(map);
}

function clearOverlays() {
  for (var i = 0; i < circleMarkers.length; i++) {
    circleMarkers[i].setMap(null);
  }
  circleMarkers = [];
  for (var i = 0; i < circlePoints.length; i++) {
    circlePoints[i].setMap(null);
  }
  circlePoints = [];
  for (var i = 0; i < polylines.length; i++) {
    polylines[i].setMap(null);
  }
  polylines = [];
  if (searchPolygon && searchPolygon.setMap) searchPolygon.setMap(null);
  if (drivePolygon && drivePolygon.setMap) drivePolygon.setMap(null);
  if (centerMarker && centerMarker.setMap) centerMarker.setMap(null);
}
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<a href="#" onclick="clearOverlays();">Clear</a>&nbsp;|&nbsp;
<a href="#" onclick="pointInterval=30;clearOverlays();">interval 30 (default)</a>&nbsp;|&nbsp;
<a href="#" onclick="pointInterval=20;clearOverlays();">interval 20</a>&nbsp;|&nbsp;

<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry"></script>
<div id="map_canvas"></div>
```

# commonjs - CommonJS模块如何创建getter

> ID：12305368
> 
> 赞同：0
> 
> 时间：2012-09-06T17:29:30.770
> 
> 标签：commonjs, titanium-modules

我正在使用 Titanium，但这个问题与 CommonJS 有关，我正在尝试创建一个模块，但我还需要一个变量的 getter。

我承认我的想法还不是很清楚，这是我第一次使用钛和 commonjs，也许你也可以给我一些阅读。

这是我的代码：

选择器.js

```
var cat;
function Picker(){
  this.cat = 0;
}

Picker.prototype.getCat = function() {
  return this.cat;
};

module.exports = Picker; 
```

List.js

```
var Picker = require('myPath/Picker');
var picker = new Picker();

var cat = picker.getCat(); 
```

但是，如果我打印 cat 的值，它是未定义的，而不是 0 ...我错在哪里？

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:51:26.437

你试过不使用原型吗？

```
function Picker(){
  this.cat = 0;
  this.getCat = function() {
      return this.cat;
  }
} 
```

# ios - 我可以在 FBFriendPickerViewController 中过滤用户列表吗？

> ID：12305369
> 
> 赞同：0
> 
> 时间：2012-09-06T17:29:32.280
> 
> 标签：ios, facebook-ios-sdk

FBFriendPickerViewController 允许用户选择他们的 Facebook 朋友的一个子集。我想过滤或操作该列表。例如，如果我能以某种方式突出显示哪些朋友已经安装了我的应用程序，那将会很有用。

任何人都有这样做的代码片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:04:50.003

从[这里](https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBFriendPickerViewController/)的文档中，它指出“代理也可用于过滤要在选择器中显示的朋友。”。所以我会假设在你的代表中你做这样的事情：

```
- (BOOL)friendPickerViewController:(FBFriendPickerViewController *)friendPicker shouldIncludeUser:(id<FBGraphUser>)user
{ 
    if ([myArrayOfValidUsers containsObject:user])
        return YES;

    return NO;
} 
```

# c - 错误 - 为 Blackberry OS 10 交叉编译 Mono

> ID：12305372
> 
> 赞同：1
> 
> 时间：2012-09-06T17:29:38.373
> 
> 标签：c, mono, cross-compiling, blackberry-playbook

我正在尝试为 BB OS 10 的模拟器编译此版本的 Mono (https://github.com/robllack/mono/tree/qnx-2-10-9)

但我有下一个错误：

libmonosgen_2_0_la-mini.lo libmonosgen_2_0_la-method-to-ir.lo libmonosgen_2_0_la-decompose.lo libmonosgen_2_0_la-jit-icalls.lo libmonosgen_2_0_la-trace.lo libmonosgen_2_0_la-dominators.lo libmonosgen_2_0_la-cfold.lo libmonosgen_2_0_la-regalloc-help.lo lo libmonosgen_2_0_la-liveness.lo libmonosgen_2_0_la-ssa.lo libmonosgen_2_0_la-abcremoval.lo libmonosgen_2_0_la-ssapre.lo libmonosgen_2_0_la-local-propagation.lo libmonosgen_2_0_la-driver.lo libmonosgen_2_0_la-debug-mini.lo libmonosgen_2_0_la-ssapre.lo libmonosgen_2_0_la-local-propagation。 -compiler.lo libmonosgen_2_0_la-aot-runtime.lo libmonosgen_2_0_la-graph.lo libmonosgen_2_0_la-mini-codegen.lo libmonosgen_2_0_la-mini-exceptions.lo libmonosgen_2_0_la-mini-trampolines.lo libmonosgen_2_0_la-declsec.lo libmonosgen_2_0_la-wapihandles.lo libmonosgen_20_la -选择。lo libmonosgen_2_0_la-mini-generic-sharing.lo libmonosgen_2_0_la-regalloc2.lo libmonosgen_2_0_la-tasklets.lo libmonosgen_2_0_la-simd-intrinsics.lo libmonosgen_2_0_la-unwind.lo libmonosgen_2_0_la-image-writer.lo libmonosgen_2_0_la-dwarfwriter.lo libmonosgen_2 lo libmonosgen_2_0_la-debugger-agent.lo libmonosgen_2_0_la-debug-debugger.lo libmonosgen_2_0_la-xdebug.lo libmonosgen_2_0_la-mini-x86.lo libmonosgen_2_0_la-exceptions-x86.lo libmonosgen_2_0_la-tramp-x86.lo libmonosgen_2_0_la-mini-posix.. /../mono/metadata/libmonoruntimesgen.la ../../mono/io-layer/libwapi.la ../../mono/utils/libmonoutils.la -L../../eglib/src -leglib -lm -lsocket /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lscreen /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lpng14 /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lbps /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lEGL /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lGLESv2 /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-liconv /Applications/bbndk /host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lstdc++ collect2：ld返回1退出状态make [4]：** [libmonosgen-2.0.la]错误1 make [4]：离开目录` /Users/developer/Desktop/Monoberry/monosrc/mono/mini' make[3]: ** [all] 错误 2找不到-lEGL /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lGLESv2 /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-liconv /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld: 找不到 -lstdc++ collect2: ld 返回 1 退出状态 make[4]: ** [libmonosgen-2.0.la] 错误 1 ​​make[4] : 离开目录`/Users/developer/Desktop/Monoberry/monosrc/mono/mini' make[3]: ** [all] Error 2找不到-lEGL /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-lGLESv2 /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld：找不到-liconv /Applications/bbndk/host_10_0_6_1/darwin/x86/usr/bin/ntox86-ld: 找不到 -lstdc++ collect2: ld 返回 1 退出状态 make[4]: ** [libmonosgen-2.0.la] 错误 1 ​​make[4] : 离开目录`/Users/developer/Desktop/Monoberry/monosrc/mono/mini' make[3]: ** [all] Error 2离开目录`/Users/developer/Desktop/Monoberry/monosrc/mono/mini' make[3]: ** [all] Error 2离开目录`/Users/developer/Desktop/Monoberry/monosrc/mono/mini' make[3]: ** [all] Error 2

我的构建配置是下一个：

```
./autogen.sh --prefix=/Users/developer/Desktop/Monoberry/monobuild --with-moonlight=no --with-mcs-docs=no --build=i386-apple-darwin10.7.0 --host=i486-pc-nto-qnx8.0.0 --with-sgen=no --disable-boehm --target=i486-pc-nto-qnx8.0.0 
```

我的环境变量是（bbndk-env.sh）：

```
# This script sets environment variables required for this version of NDK
# from the command line. To use the script, you have to "source" it into your shell,
# source bbndk-env.sh
# if source command is not available use "." (dot) command instead
#
#Some influential environment variables in mono are:
#  CC          C compiler command  -->Done
#  CFLAGS      C compiler flags --> Done
#  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
#              nonstandard directory <lib dir> -->Done
#  LIBS        libraries to pass to the linker, e.g. -l<library> --> Not set
#  CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if -->Done
#              you have headers in a nonstandard directory <include dir>
#  CXX         C++ compiler command --> Done
#  CXXFLAGS    C++ compiler flags -->Done
#  CCAS        assembler compiler command (defaults to CC) -->Done
#  CCASFLAGS   assembler compiler flags (defaults to CFLAGS) -->Done
#  CPP         C preprocessor -->Done
#  CXXCPP      C++ preprocessor -->Done
#  XMKMF       Path to xmkmf, Makefile generator for X Window System -->Not set

QNX_TARGET="/Applications/bbndk/target_10_0_6_384/qnx6"
QNX_HOST="/Applications/bbndk/host_10_0_6_1/darwin/x86"
QNX_CONFIGURATION="/Users/developer/Library/Research In Motion/BlackBerry Native SDK"
MAKEFLAGS="-I$QNX_TARGET/usr/include"
DYLD_LIBRARY_PATH="$QNX_HOST/usr/lib/:$QNX_TARGET/../darwin/x86/usr/lib/qt4/lib:$DYLD_LIBRARY_PATH"
PATH="$QNX_HOST/usr/bin:$PATH"

#armv7
#RANLIB="${QNX_HOST}/usr/bin/ntoarmv7-ranlib "
#x86 emulator
RANLIB="${QNX_HOST}/usr/bin/ntox86-ranlib "

#armv7
#CPP="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntoarmv7le_cpp -E "
#x86
CPP="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntox86_cpp -E "

#armv7
#CXXCPP="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntoarmv7le_cpp -E "
#x86
CXXCPP="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntox86_cpp -E "

#armv7
#CC="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntoarmv7le_cpp "
#x86
CC="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntox86_cpp "

#armv7
#CXX="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntoarmv7le_cpp "
#x86
CXX="${QNX_HOST}/usr/bin/qcc -V4.6.3,gcc_ntox86_cpp "

#armv7
#LD="${QNX_HOST}/usr/bin/ntoarmv7-ld "
#x86
LD="${QNX_HOST}/usr/bin/ntox86-ld "

CPPFLAGS="-D__PLAYBOOK__ -D__QNXNTO__ "
CFLAGS=" -g "
CXXFLAGS=" -g "
CCAS=$CC
CCASFLAGS=$CFLAGS

#armv7
#LDFLAGS="-L${QNX_TARGET}/armle-v7/lib -L${PREFIX}/lib -lscreen -lasound -lpps -lm -lpng14 -lbps -lEGL -lGLESv2"
#x86
LDFLAGS="-L${QNX_TARGET}/x86/lib -L${PREFIX}/lib -lscreen -lasound -lpps -lm -lpng14 -lbps -lEGL -lGLESv2"

export QNX_TARGET QNX_HOST QNX_CONFIGURATION MAKEFLAGS DYLD_LIBRARY_PATH PATH RANLIB CPP CC LD CPP CPPFLAGS CFLAGS LDFLAGS 
```

有谁知道我做错了什么？？拜托，我被这个问题困扰了很长时间！

PSMy 操作系统为：Mac OS X 10.6.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:08:13.240

解决方案非常简单，我设置了错误的环境变量 LDFLAGS。变量的正确值是：

```
LDFLAGS="-L${QNX_TARGET}/x86/lib -L${QNX_TARGET}/x86/usr/lib -L${QNX_TARGET}/x86/lib/gcc/4.6.3 -liconv -lstdc++" 
```

库 iconv 位于 {QNX_TARGET}/x86/usr/lib 和 stdc++ 在 {QNX_TARGET}/x86/lib/gcc/4.6.3

# php - 带有 php 的 zip 文件 - 排除文件夹

> ID：12305374
> 
> 赞同：2
> 
> 时间：2012-09-06T17:29:47.867
> 
> 标签：php

我有一个 zip 功能，我希望 FOLDER 中的每个文件都可以压缩

所以，路径是：

public_html/form/FOLDER/file_to_zip.xml

正如您在下面的代码中看到的那样，$files_to_zip 数组具有“FOLDER/file_to_zip.xml”路径，每当它压缩时，也会压缩文件夹，我只想压缩文件。

我可以在这里做什么？

```
function create_zip($files = array(),$destination = '',$overwrite = true) {

    $valid_files = array();
    if(is_array($files)) {
        foreach($files as $file) {
            if(file_exists($file)) {
                $valid_files[] = $file;
            }
        }
    }
    if(count($valid_files)) {
        $zip = new ZipArchive();
        if($zip->open($destination,$overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
            return false;
        }
        foreach($valid_files as $file) {
            $zip->addFile($file,$file);
        }

        $zip->close();

        return file_exists($destination);
    }
    else
    {
        return false;
    }
}

$loja=$_GET['loja'];

$connect = new MySQL('localhost','iloja_phc','sexparade');
$connect->Database('iloja_phc');
$posts = $connect->Fetch('ipad');

if ($posts && mysql_num_rows($posts) > 0) {
     echo "Nome  -  ID  -  Email:<BR>";
     while ($record = mysql_fetch_array($posts)) {
    $files_to_zip = array($loja.'/CL'.$record['rand'].'.xml');
    $result = create_zip($files_to_zip,'CL'.$record['rand'].'.zip');
         echo "<a href='/formulario/CL".$record['rand'].".zip'>".$record['nome']."</a> - ".$record['id']." - EMAIL: ".$record['email']."</br>";
     }
} else {
     echo "Erro! Algo correu mal...";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:54:11.397

当你打电话时

```
$zip->addFile($file,$file); 
```

第一个参数是文件的路径，第二个是“localname”。如果您从第二个参数中删除该文件夹，您将获得所需的内容。

例子：

```
$zip->addFile("foo/bar.txt","bar.txt); 
```

对于您的特定情况，我认为这应该有效：

```
$zip->addFile($file, basename($file)); 
```

来源：PHP 手册注释[http://php.net/manual/en/ziparchive.addfile.php](http://php.net/manual/en/ziparchive.addfile.php)

# sql-server - Delphi XE 3 LiveBindings AutoInc SQL Server

> ID：12305384
> 
> 赞同：0
> 
> 时间：2012-09-06T17:30:23.960
> 
> 标签：sql-server, delphi, firemonkey, livebindings, delphi-xe3

我有一个带有 LiveBindings 到 SQL Server 的 Delphi XE3 Firemonkey 应用程序。我可以连接并查看网格上的所有数据。我有一个字段（“id”），它是 SQL（通常称为 AutoInc）上的“身份字段”。

当我尝试添加记录时，我得到“字段 'id' 必须有一个值。”

过去，解决此问题的方法是关闭必填字段布尔值。（例如，使用 DBISAM，您可以使数据库本身中的字段不是必需的，并且数据库引擎会在它到达那里时将其填充，但您不能在 MSSQL 中创建不需要的标识字段。）

我已经关闭了对 TField 本身的要求，但这没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:32:04.923

我的申请也有同样的问题。解决方案有点棘手。首先，您必须将 IDENTITY_INSERT 设置为 ON。

```
procedure TdmUnit1.Identity(Table: string; OnOff: boolean);
var s: string;
begin
  if OnOff = true then
    s := 'ON'
  else
    s := 'OFF';
  s := 'SET IDENTITY_INSERT ' + '[dbo].[' + Table + '] ' + s;
  SQLQuery1.SQL.Clear;
  SQLQuery1.SQL.Add(s);
  SQLQuery1.ExecSQL;
end; 
```

然后你必须在你的表中寻找最高的索引。您可以通过 OnNewRecord-Event 实现：

```
procedure TdmUnit1.ClientDataSet1NewRecord(DataSet: TDataSet);
var
  s: string;
  i: integer;
begin
  s := 'SELECT IDENT_CURRENT(''AnyTable'')';
  SQLQuery1.SQL.Clear;
  SQLQuery1.SQL.Add(s);
  SQLQuery1.ExecSQL;
  SQLQuery1.Active := true;
  i := SQLQuery1.Fields[0].AsInteger;
  ClientDataSet1.FieldByName('DB_IDX').AsInteger := i+1;
  SQLQuery1.Active := false;
end; 
```

在 ApplyUpdates(0) 之后，您必须关闭 IDENTITY_INSERT。

# ms-access - 如何在子表单打开时冻结父表单

> ID：12305387
> 
> 赞同：2
> 
> 时间：2012-09-06T17:30:52.983
> 
> 标签：ms-access, ms-access-2010

我有一种情况，在某些情况下，我需要打开另一个表单并保持该表单的焦点（模态 = true），当它们不关闭并且关闭时，父表单上的控件会使用可能已更改的数据进行刷新.

最初我有一种方法可以`DoEvents`在子表单打开时使用，但它会导致一些子表单无法使用（它们在表单级别没有数据绑定）用于数据输入/编辑。

## ShowForm 方法 - 最初

```
Public Sub ShowForm(par As Form, nm As String, _
                    Optional whr As String = "", _
                    Optional args As String = "", _
                    Optional mode As AcFormOpenDataMode = acFormPropertySettings)
    DoCmd.OpenForm nm, acNormal, , whr, mode, , args

    While IsOpen(nm)
        DoEvents
    Wend
End Sub 
```

为了让子表单始终可用，我不得不注释掉`While...Wend`循环。

我是否可以在此方法或调用控件的 OnClick 中使用另一种逻辑模式，这样当他们关闭子窗体时，我可以在子窗体关闭后执行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:57:41.227

最简单的方法是简单地以对话模式打开表单。例如，

```
DoCmd.OpenForm nm, acNormal, , whr, mode, acDialog, args 
```

这将暂停调用模块中代码的执行，直到表单关闭。它还将阻止用户与任何其他表单交互，直到“对话框”表单关闭。

* * *

我发现在对话框模式下打开绑定表单，更新数据，关闭表单，然后刷新调用表单上的对象（例如，组合框的行源）并不总是可靠的。

下面是我编写的一个通用函数，用于“暂停”调用代码，而无需在对话框模式下打开表单，也不会显着影响用户界面的性能。它适用于表单和报告。请注意，睡眠 API 声明必须位于代码模块的顶部（在模块声明部分）。

```
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

'-------------------------------------------------------------------------------
' Procedure : WaitTilObjClosed
' Author    : Mike
' Date      : 1/7/2009
' Purpose   : Halts program execution until user closes object.  User is 
'               generally unaffected by the loop.
' Requires  : Sleep API sub
' Notes - while Sleeping other programs can use processor but access cannot;
'       - during DoEvents, other parts of Access can use processor;
'       - without the Sleep call, processor usage stays at 100% for MSACCESS.EXE
'       - with a long Sleep call, Access becomes noticeably sluggish
'-------------------------------------------------------------------------------
'
Sub WaitTilObjClosed(ObjType As AcObjectType, ObjName As String)
    Do
        DoEvents
        Sleep 1
        If (SysCmd(acSysCmdGetObjectState, ObjType, ObjName) = 0) Then Exit Do
    Loop
End Sub 
```

您可以按如下方式使用它：

```
DoCmd.OpenForm "MyForm"
WaitTilObjClosed acForm, "MyForm"
MsgBox "MyForm is now closed"

DoCmd.OpenReport "MyReport", acViewPreview
WaitTilObjClosed acReport, "MyReport"
MsgBox "MyReport is now closed" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:53:23.270

我想我现在明白你的问题了。不幸的是，没有简单的方法可以做你想做的事。我建议使用以下算法：

```
'Grandparent/parent form module
Dim ChildForm As String

Private Sub ShowFormBtn_Click()
    DoCmd.OpenForm "MyForm"
    ChildForm = "MyForm"
End Sub    

Private Sub ShowOtherFormBtn_Click()
    DoCmd.OpenForm "OtherForm"
    ChildForm = "OtherForm"
End Sub

Private Sub Form_Activate()
    On Error Resume Next
    Forms(ChildForm).SetFocus
End Sub

Private Sub Form_Unload(Cancel As Integer)
    On Error Resume Next
    Forms(ChildForm).SetFocus
    If Err.Number = 0 Then Cancel = True
End Sub 
```

基本上，每次您尝试切换到父表单时，它都会尝试将用户发送到其子表单（如果存在）。如果它没有子节点，则会生成一个被静默忽略的错误。如果孩子确实存在，它会将其切换到该表单。

这也支持多个级别。因此，假设您有一个祖父表单，该表单生成一个父表单，该父表单生成一个子表单。这三种形式都是开放的。您单击将焦点发送到父窗体的祖父窗体，父窗体将焦点发送到子窗体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:11:09.323

您不想锁定`FORM`本身，您想锁定属于`FORM`. 下面解释了我进行控制锁定的首选方法。目标是使每个用户可编辑的控件都是只读的

在您父级的 VBA 代码中`FORM`创建此子：

```
public sub LockControls_[Enter Form Name Here]()

  ME.txt1.Locked = True
  ME.txt2.Locked = True
  ME.txt3.Locked = True
...

end sub 
```

您可以锁定文本框、组合框、按钮等...

如果您的控件遵循我上面概述的命名结构，您实际上可以通过执行以下操作来循环它：

```
public sub LockControls_[Enter Form Name Here]()

  Dim s_ctrl As String
  Dim s_obj As String
  Dim i as Int

  i = 0
  s_ctrl = "txt"
  s_obj = s_ctrl & i

  do while me(s_obj).Name <> ""

      Me(s_obj).Locked = True
      i = i+1
      s_obj = s_ctrl & i

  loop
end sub 
```

从启动子表单的操作中调用此方法。它将锁定（只读）表单上的所有控件，同时让用户可以访问表单。

`FORM`当从子窗体上的关闭事件调用时，可以使用相同的方法来解锁您的父级。请务必不要使用`Me(s_obj).Locked = False`. 相反，使用以下语法完全限定您的表单：

```
public sub UnLockControls_[Enter Parent Form Name Here]()

  Dim s_ctrl As String
  Dim s_obj As String
  Dim i as Int

  i = 0
  s_ctrl = "txt"
  s_obj = s_ctrl & i

  do while me(s_obj).Name <> ""

      FORMS![form_name](s_obj).Locked = False
      i = i+1
      s_obj = s_ctrl & i

  loop
end sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:28:10.387

这是我最初的问题中该方法的最终形式：按我的意愿工作（现在；）），感谢@Remou 和@mwolfe02。

## 最终形式 - 当然是临时的

```
'@frm - String value, Name of the form to Open
Public Sub OpenForm(frm As String, _
                    Optional vw As AcFormView = acNormal, _
                    Optional whr As String = "", _
                    Optional mode As AcFormOpenDataMode = acFormPropertySettings, _
                    Optional args As String = "")
    If FormExists(frm) Then
        DoCmd.OpenForm frm, vw, , whr, mode, acDialog, args
    Else
        RaiseError "Form ( " & frm & " ) does not exist!" & vbCrLf & vbCrLf & _
                    "Alert your IT Support for further assistance."
    End If
End Sub 
```

# html - 使用单个普通列表自动创建列

> ID：12305389
> 
> 赞同：5
> 
> 时间：2012-09-06T17:30:56.300
> 
> 标签：html, css, dynamic, html-lists, css-multicolumn-layout

我正在尝试编写灵活的代码，其中我有一个简单的代码，`<ul>`它会自动为每 5 个元素创建另一列。我找到了一个实现这一点的[教程](http://csswizardry.com/2010/02/mutiple-column-lists-using-one-ul/)，但将项目按水平顺序放置，而我需要垂直顺序。我看过其他一些教程，它们输出垂直顺序，但也附加了`class="first"`和`class="second"`，`li`这不是我想要的。我希望使用我现有的 HTML 代码。

我想要的是：

```
-01     -06     -11   
-02     -07     -12
-03     -08     -13
-04     -09     -14
-05     -10     -15 
```

是）我有的：

```
-01     -02     -03   
-04     -05     -06
-07     -08     -09
-10     -11     -12
-13     -14     -15 
```

CSS：

```
ul {
    width:760px;
    margin-bottom:20px;
    overflow:hidden;
}

li {   
    float:left;
    display:inline;
}

.double li  { width:50.0%; } /* 2 col */
.triple li  { width:33.3%; } /* 3 col */
.quad li    { width:25.0%; } /* 4 col */
.six li     { width:16.6%; } /* 6 col */ 
```

HTML：

```
<ul class="triple">
  <li>01</li>
  <li>02</li>
  <li>03</li>
  <li>04</li>
  <li>05</li>
  <li>06</li>
  <li>07</li>
  <li>08</li>
  <li>09</li>
  <li>10</li>
  <li>11</li>
  <li>12</li>
  <li>13</li>
  <li>14</li>
  <li>15</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:52:11.433

您可以使用此[代码](http://trentwalton.com/2010/07/19/css3-multi-column-layout-column-count/)：

```
ul
{
    -webkit-column-count: 4; -webkit-column-gap:20px;
    -moz-column-count:4; -moz-column-gap:20px;
    -o-column-count:4; -o-column-gap:20px;
    column-count:4; column-gap:20px;
} 
```

但不幸的是，我不确定它是否适用于所有浏览器。你应该试验一下。

这是使用它的 jsFiddle：http: [//jsfiddle.net/leniel/nRL4R/](http://jsfiddle.net/leniel/nRL4R/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:03:45.743

[http://codepen.io/anon/pen/iDzmq](http://codepen.io/anon/pen/iDzmq)

这是我知道这样做的唯一方法。只是在您用于呈现列表的代码中，将其设置为每 5 li 添加一个 ul.sub

任何问题？

# jquery - jQuery.post 和 joomla 传递上传字段

> ID：12305391
> 
> 赞同：0
> 
> 时间：2012-09-06T17:31:04.483
> 
> 标签：jquery, ajax, joomla

我目前正在为`joomla`前端开发一个组件，我需要你上传照片......上传的php代码已经准备好......问题是我想上传命名徽标的图片`onchange`，`file field`但它说没有这样的条目（javascript没有传递字段值或其他东西） `Notice: Undefined index: logo in /var/www/furnish/components/com_furnishing/controller.php on line 21`

我的 JavaScript 代码是

```
jQuery(function(){
        console.info("ok"); 

        jQuery('input[name="logo"]').change(function(){
            var val=jQuery(this).val();
            var filename = jQuery('input[name="logo"]').val();
            //var forma = $(this);
            //
        //  jQuery('input[name="task"]').val('register.upload');
            console.log(filename);
             $(this).ajaxSubmit({
                type: "POST",
                url: "index.php?option=com_furnishing&task=upload",
                enctype: 'multipart/form-data',
                data:  jQuery('form[name="Form"]'),
                success: function (dati) {
                    alert("Data Uploaded: "+dati);
                }
            });/*
        jQuery('input[name="task"]').val('register.upload');
            jQuery.post('index.php?option=com_furnishing&task=upload',$("form[name='Form']"),function(data){
                if (data)
                {
                    jQuery('input[name="logo"]').val(data);
                }
                else
                {
                    jQuery('input[name="logo"]').val('');
                }
                alert(data);
                console.info(data);
            });
            jQuery('input[name="task"]').val('register.regme');*/
        console.info("ok");

        });
    });` 
```

的部分`commented out`有同样的问题。所以问题是如何让它工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:32:52.587

很长一段时间后，我设法弄清楚了这一点。正如其中一个论坛所说，没有办法发布文件字段，我设法创建了一个`jQuery`检查文件大小、类型的检查......因为我需要检查文件类型和大小，这是最快速和最简单的方法来做到这一点。

# android - 根据设备性能调整应用功能

> ID：12305394
> 
> 赞同：0
> 
> 时间：2012-09-06T17:31:30.493
> 
> 标签：android, performance

我正在开发一个对 CPU 要求很高的应用程序，它只能在高端设备中完美运行。我想支持各种限制同时功能数量的 Android 设备。该应用程序不做太多的图形，所有的 CPU 处理都是使用 NDK 完成的。

基本上，我有一组 15 个并行进程（声音和图像），它们在高端设备中运行流畅。在低端，我发现 5 个进程工作得相当不错，尽管应用程序没有完成功能。

每个进程都运行和处理大量顺序数据的算法，因此在完成所有集合之前它不会完成。

您有什么建议可以根据设备限制功能吗？

# javascript - FadeIn 脚本不工作？

> ID：12305400
> 
> 赞同：1
> 
> 时间：2012-09-06T17:31:45.940
> 
> 标签：javascript, jquery

我有以下脚本：

```
var $j = jQuery.noConflict();
$j(window).load(function () {
    $j('#loading').fadeOut('fast', function () { //Step 1
        $j("#sp-container").fadeIn("fast", function () { //Step 2
            $j("#content-wrap").delay(9000).fadeIn("slow"); //Step 3
        });
    });
}); 
```

该脚本在第 3 步之前工作正常。第 3 步也不会像预期的那样淡入 div。为什么这个脚本不起作用，我该如何解决？

我的例外是：

第 1 步：页面加载内容然后触发脚本

第 2 步：我有一个运行大约 9 秒的启动画面。

第 3 步：动画 content-wrap div 淡入后。

***HTML：***

```
<div id="loading"> 
  <!-- CONTENT --> 
</div>

<div id="sp-container">
  <!-- CONTENT --> 
</div>

<div id="content-wrap">
  <!-- CONTENT --> 
</div> 
```

注意：在我添加启动动画之前，我的 JS 看起来像这样，没有问题：

```
 var $j = jQuery.noConflict();
$j(window).load(function() {
  $j('#loading').fadeOut('slow', function() {
          $j("#content-wrap").fadeIn("slow");    
      });
    }); 
```

[这是相关页面的链接。](http://www.ubhape2.com/testing/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:08:55.803

[演示页面](http://www.ubhape2.com/testing/)和您的 OP 包含不同的代码。

[您的演示页面](http://www.ubhape2.com/testing/)上的 JavaScript正在寻找，`#sp-container`但您的容器正在使用`class`，而不是`id`. 应该是`.sp-container`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:54:30.470

尝试使用`setTimeout()`而不是延迟，并将最后 9000 毫秒的延迟动画包装在其中。

[jsFiddle 演示](http://jsfiddle.net/9mfTW/1/)

```
$('#loading').fadeOut('fast', function () { //Step 1
    $("#sp-container").fadeIn("fast", function () { //Step 2            
        setTimeout(function () { $("#content-wrap").fadeIn("slow"); }, 9000); //Step 3
    });
});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T17:33:18.210

实际上[加载事件](http://api.jquery.com/load-event/)文档说这有效，哈哈，学习经验:)

我认为您将[`ready()`](http://api.jquery.com/ready/)功能与[`load()`](http://api.jquery.com/load/)功能混淆了。

转变：

```
$j(window).load(function() { 
```

至

```
$j(document).ready(function() { 
```

# php - 将一维数组修改为具有新值的二维数组

> ID：12305403
> 
> 赞同：1
> 
> 时间：2012-09-06T17:31:56.070
> 
> 标签：php

我有以下数组：

```
$list = array('item1','item2','item3','item4','item5','item6'); 
```

我需要把这个数组分解成1个数组内的更小的数组，用于一个程序。每个小数组需要在索引 0 处有 '999999'，然后是数组中的下 2 项`$list`，然后是数组中相同的 2 项`$list`，但`.pdf`最后是创建文件名。所以最终的结果是这样的：

```
$newList = array( array(999999, "item1" , "item2", "item1.pdf", "item2.pdf"),
               array(999999, "item3" , "item4", "item3.pdf", "item4.pdf"),
               array(999999, "item5" , "item6", "item5.pdf", "item6.pdf")
             ); 
```

原始列表数组有时可能包含多达 100 个值。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:37:48.913

您可以使用`array_splice`在每次迭代中删除 2 个元素并构建结果数组。像这样的东西：

```
$list = array('item1','item2','item3','item4','item5','item6');

$result = array();
while (!empty($list)) {
    $array = array_splice($list, 0, 2);

    if (count($array) == 2) {
        $result[] = array(999999, $array[0], $array[1], $array[0] . ".pdf", $array[1] . ".pdf");
    } else {
        $result[] = array(999999, $array[0], '', $array[0] . ".pdf", '');
    }
}

var_dump($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:36:00.953

作为一个开始，看看[`array_chunk()`](http://php.net/manual/en/function.array-chunk.php)。

您可以使用一些自定义代码将静态元素 ( `999999`, ) 添加到结果中。`*.pdf`但在这一点上，像**Mathieu Imbert**提供的解决方案是一个更好的选择。

**注意：** PHP 有一百多个[数组函数](http://www.php.net/manual/en/ref.array.php)。学习这些将使您成为[更好的 PHP 开发人员](http://jason.pureconcepts.net/2012/08/better-php-developer/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:45:03.967

您还可以使用`each`正常的 while 循环：

```
// solution without an array_* function                                                                    
$newList = array();                                                         
while((list(,$a) = each($list)) && (list(,$b) = each($list))) {             
    $newList[] = array(999999, $a, $b, "$a.pdf", "$b.pdf");                 
}                                                                           

print_r($newList); 
```

或者根本没有循环（需要 PHP >= 5.3）：

```
$newList = array_map(function($e) {                                         
    return array(999999, $e[0], $e[1], "{$e[0]}.pdf", "{$e[1]}.pdf");       
}, array_chunk($list, 2));                                                  

print_r($newList); 
```

# java - MongoDB/Java：DBObjects 中的类型安全

> ID：12305408
> 
> 赞同：5
> 
> 时间：2012-09-06T17:32:18.153
> 
> 标签：java, mongodb, types, deserialization

我在存储任意大数字的 MongoDB 文档中有一个字段。当我将它作为 DBObject（MongoDB 的 Java 驱动程序）检索时，有时会遇到 ClassCastException：

```
DBObject obj = collection.findOne();
long val = (Long)(o.get("numericVal")); 
```

如果存储的值`numericVal`是 1234567890，则转换为 Long 成功。如果是 12345，则 DBObject.get() 返回一个 Double，并且转换失败。

反序列化 MongoDB DBObjects 时如何确保类型安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:45:30.943

我认为您可以通过使用类型安全的 getLong(String key) 而不是强制转换 (Long) 来避免 ClassCastException，并希望自动装箱能做正确的事情来让您减少“l”长。

[http://api.mongodb.org/java/2.8.0/org/bson/BasicBSONObject.html#getLong(java.lang.String](http://api.mongodb.org/java/2.8.0/org/bson/BasicBSONObject.html#getLong(java.lang.String) )

```
DBObject obj = collection.findOne();
long val = o.getLong("numericVal"); 
```

我也对 12345 成为 Double 持怀疑态度。这里还有其他事情发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-18T10:52:05.373

一般来说，我注意到使用 shell（或有时使用其他语言）将数值作为双精度插入

例如：

```
db.dummycollection.update({"mykey" : 100}, { $set : { "millisecage" : 30000000 }}) 
```

插入一个双精度值 (30000000.0) 但

```
db.dummycollection.update({"mykey" : 100}, { $set : { "millisecage" : NumberLong(30000000) }}) 
```

在集合中插入正确的值

因此，如果您有疑问，请避免这种类型的转换，或者您可以执行以下操作：

```
Long myValue = ((Number) obj.get("yourkey")).longValue(); 
```

# jquery - 如何使用 jQuery Cycle 插件正确排列动画/过渡

> ID：12305410
> 
> 赞同：0
> 
> 时间：2012-09-06T17:32:25.830
> 
> 标签：jquery, html

我正在做这个[项目](http://parker.astonishlive.com/)

我想在推子/滑块中排队我的动画。

```
<script>
$(function() {
  // Hover Switch
   function fnFadeHover(){$('#feature_fadeSlideshow').cycle($('#feature_fadeBtns li').index($(this).parent()));}
   function fnFadeOut(){}
   $('#feature_fadeSlideshow').cycle({
     //fx:'fade',
     timeout:9000,
     delay:5000,
     pause:true,
     after:onAfter,
     before: function(currSlideElement, nextSlideElement, options, afterCallBack, forwardFlag){
       console.log('before');
       var slide_index = $('#feature_fadeSlideshow .panel').index(nextSlideElement);
       $('#feature_fadeBtns li').removeClass('activePager').eq(slide_index).addClass('activePager');    

        $('#auto-automobile').animate({"top": "75px","left": "-2000px"}, "slow",  function(){
           $('#auto-sun').animate({"top": "-300px"}, "slow", function(){
             $('#auto-cloud').animate({"top": "20px", "right":"300px"}, "slow", function(){
               $('#auto-smallCloud').animate({"top": "10px"}, "slow")})

         $('#home-house').animate({"top": "-300px", "left": "310px"}, "slow", function(){
           $('#home-tree').animate({"bottom":"-400px"}, "slow", function(){
             $('#home-smallCloud').animate({"top": "20px"}, "slow")})
           }); 

          $('#business-highway').animate({"top": "-200px"}, "slow", function(){
           $('#business-buildings').animate({"bottom": "-400px"}, "slow", function(){
             $('#business-cloud').animate({"top": "20px"}, "slow")})
           });       

          $('#life-object').animate({"top": "150px"}, "slow", function(){
           $('#life-flowers').animate({"top": "131px"}, "slow", function(){
             $('#life-scope').animate({"top": "284px"}, "slow")})
           });

          });
         });       
     }});
   $('#feature_fadeBtns li a').hoverIntent(fnFadeHover,300,fnFadeOut);
});  
      function onAfter() { 
           $('#auto-automobile').animate({"top": "75px","left": "260px"}, "slow", function(){
               $('#auto-sun').animate({"top": "0px", "right":"400px"}, "slow", function(){
                 $('#auto-cloud').animate({"top": "20px"}, "slow", function(){
                   $('#auto-smallCloud').animate({"top": "20px", "left": "415px"}, "slow")})

         $('#home-house').animate({"top": "105px", "left": "310px"}, "slow", function(){
           $('#home-tree').animate({"top": "90px"}, "slow", function(){
             $('#home-smallCloud').animate({"top": "25px", "right":"5px"}, "slow")})
           }); 

          $('#business-highway').animate({"top": "200px"}, "slow", function(){
           $('#business-buildings').animate({"bottom": "60px"}, "slow", function(){
             $('#business-cloud').animate({"top": "30px"}, "slow")})
           });   

          $('#life-object').animate({"top": "150px"}, "slow", function(){
           $('#life-flowers').animate({"top": "131px"}, "slow", function(){
             $('#life-scope').animate({"top": "284px"}, "slow")})
           });
        });
      }); 
}
</script>
[[Content]] 
```

​</p>

**目标** 如果您将鼠标悬停在推子/滑块下方的导航上，您将看到我的动画无法正常工作。他们跳来跳去。当我将鼠标悬停在汽车/家庭/企业或生活上或它们过渡时，我希望动画能够制作动画。

截至目前，它无法正常工作。**有什么建议么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:01:07.223

我认为你正在尝试做这样的事情：

[**jsFiddle 演示**](http://jsfiddle.net/6dUft/4/)

我试图在评论中传达的是你希望你的位置*开始*是隐藏的（无论需要多少顶部/底部 px 来做到这一点）。然后，您将动画设置到正确的位置。

超级基本的例子，但你在这里明白了。它们最初是从视图中隐藏起来的，然后它们都一次出现一个。

```
#one { position:absolute; top:-500px; }
#two { position:absolute; bottom:-500px; }​

$('#one').animate({ left: '50px', top: '0px' }, 'slow', function () {
    $('#two').animate({ left: '200px', bottom: '200px' }, 'slow');
});​ 
```

# jquery - 下拉菜单有时在 Internet Explorer 中不显示（）-ing

> ID：12305411
> 
> 赞同：0
> 
> 时间：2012-09-06T17:32:31.283
> 
> 标签：jquery, css, drop-down-menu

我在[http://www.idataresearch.com](http://www.idataresearch.com)上有一个下拉菜单，它会在文档加载完成时显示，以避免在加载页面时出现没有 css/js 问题的内容。这似乎在除 Internet Explorer 之外的所有浏览器中都运行良好。很多时候菜单根本不显示，我必须刷新页面才能让它工作。任何帮助将不胜感激。

编辑：

这是不工作的文档就绪功能（我已经把它改回原来的样子，因为它实际上让事情变得更糟，因为有时菜单会卡在打开状态）：

```
jQuery(document).ready(function() {

ddsmoothmenu.init({
    mainmenuid: "smoothmenu1", //menu DIV id
    orientation: 'h', //Horizontal or vertical menu: Set to "h" or "v"
    classname: 'ddsmoothmenu', //class added to menu's outer DIV
    //customtheme: ["#1c5a80", "#18374a"],
    contentsource: "markup" //"markup" or ["container_id", "path_to_menu_file"]
})

  jQuery('#smoothmenu1').show();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:37:06.727

我假设这是您正在谈论的代码

```
<script type="text/javascript">
    ddsmoothmenu.init({
        mainmenuid: "smoothmenu1", //menu DIV id
        orientation: 'h', //Horizontal or vertical menu: Set to "h" or "v"
        classname: 'ddsmoothmenu', //class added to menu's outer DIV
        //customtheme: ["#1c5a80", "#18374a"],
        contentsource: "markup" //"markup" or ["container_id", "path_to_menu_file"]
    })
</script> 
```

在页面完成加载之前，没有什么可以阻止此代码运行。我建议您将此代码（以及许多其他脚本）放入一个`$(document).ready()`函数中。

我相信这是在文字新闻中，这不是我的专业领域，但我认为这应该有助于解决问题。

# java - 是否可以将参数列表传递给方法而不事先声明它们？

> ID：12305416
> 
> 赞同：1
> 
> 时间：2012-09-06T17:33:05.760
> 
> 标签：java

给定一个方法，例如：

```
public void blit(int[] pos) {
   do stuff..
} 
```

有没有办法在不首先声明它们的情况下传递参数列表？

例如，在 Python 中，我可以执行以下操作：

```
def blit(pos):
   stuf...

blit([20,50]) 
```

我可以简单地传入一个在参数列表中专门创建的列表。要在 Java 中做同样的事情，似乎我必须先声明数组，然后才能将它传递给方法。

```
int[] coordinates = {20,50};
blit(coordinates); 
```

这不是什么大不了的事，但如果我能做类似的事情会很方便，

```
blit({20,50}); 
```

但这当然行不通。我也尝试过在调用中创建数组，例如，

```
blit(new int[] = {20,40}); 
```

但同样，没有运气。所以，也许是一个可怕的问题，但是有没有办法将参数列表传递给一个部分模仿 Python 行为的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T17:35:48.027

你可以通过两种方式做到这一点：

```
blit(new int[] {20,40}); 
```

或者用可变参数声明你的方法：

```
public void blit(int... pos) {} 
```

并这样称呼它：

```
blit(20, 40); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:34:44.933

你很接近：

```
blit(new int[] {20,40}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:34:49.927

我认为您的意思是匿名数组创建：

```
blit(new int[] {20, 40}); 
```

我对么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T17:34:57.837

是的，使用可变数量的参数语法：

```
public void blit(Object ... args)
{
}

blit(10, 20, 30); 
```

如果你想传递同质参数，那么 a`List<type>`应该是首选。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:34:58.323

使用此语法：

```
blit(new int[]{20, 40}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T17:35:01.390

你可以做类似的事情

```
 blit(new int[]{5,10}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T17:37:19.010

你为什么不使用`List`.......

`blit(new List<Integer>());`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T17:37:43.187

您可以将 a**`java.util.Map<String,Object>`**作为方法的唯一参数。（使用键=参数名称）

```
java.util.Map<String,Object> arguments=new HashMap<String,Object>();
List<Integer> positions=new ArrayList<Integer>();
positions.add(1);
positions.add(2);
arguments.put("pos",positions);

myfunction_call(arguments); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-06T17:42:54.060

称它为`blit(new int[]{20,40});`

对于引用类型，您可以声明方法 whis varargs：

```
 public void blit(Integer... pos) {
    //do stuff..
 }
 // and the array creation code will be inserted by the compiler:
 blit(20,40); 
```

# zend-framework - 如何在操作中检索 $_POST 变量

> ID：12305420
> 
> 赞同：0
> 
> 时间：2012-09-06T17:33:17.903
> 
> 标签：zend-framework, post, zend-http-client

我是zend框架的新手，我通过这种方式使用post方法将一些数据发送到一个动作：

```
$config = array(
    'adapter'   => 'Zend_Http_Client_Adapter_Curl',
);

$client = new Zend_Http_Client('http://example.com/api/last-news', $config);
$client->setParameterPost('name' ,'value');
$dataresult = $client->request('POST')->getBody(); 
```

当我使用它时`lastNewsAction()`，它传递给我空数组，但是当我将这些数据发送到框架外的一个简单文件（类似于[http://example.com/test.php](http://example.com/test.php)）时，它具有正确的值。那么如何在操作中检索变量？`ApiController.php``var_dump($_POST)``$_POST``$_POST`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:39:36.217

或者，如果您想要所有这些...

```
if ($this->getRequest()->isPost()) {        
    $postData = $this->getRequest()->getPost();
    ... 
```

# outlook-2010 - 将 Sql 字符串结果粘贴到 Outlook 中只能以未格式化的形式使用

> ID：12305426
> 
> 赞同：1
> 
> 时间：2012-09-06T17:33:52.193
> 
> 标签：outlook-2010

我管理一个定期发送电子邮件通知的网络应用程序。有时一个人会因为一封糟糕的电子邮件而被退回。我创建了一个小型 Sql 脚本，用于查找用户信息及其管理员联系信息。有了这些信息，我创建了一个连接字符串，其中包含我可以剪切并粘贴到 Outlook 中的电子邮件所需的所有信息……这是我编写的脚本生成的 Sql 结果的一部分。我的问题/问题是当我尝试将其粘贴到 Outlook 中时，它只允许未格式化的文本。如果我将它发布到文本文档中并且在网络浏览器格式中很少有它。如果我从浏览器复制，它将粘贴格式。如何粘贴带有格式的 Sql 文本结果？我尝试使用 html 标签、转义字符 \n 和 \r 但它只允许我插入未格式化的文本，呈现上述代码。将其设置为 html 电子邮件，甚至尝试 rtf 均无济于事。

我不想通过 Sql 发送电子邮件，所以这不是我可以使用的选项。只需要一种将 Sql 文本粘贴为格式化文本的方法。

为 Sql 2005 使用 Office 2010 和 Sql Server Management Studio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:54:19.623

好吧回答我自己的问题...

我创建了一个带有指向 SQL 数据库的链接表的 Access 数据库。然后，我创建了一个表单，使用有问题的电子邮件来创建我需要的文本。只需确保将结果将要发送到的文本框设置为富文本文本框。

现在我需要做的就是复制并粘贴到新的电子邮件中，然后将其发送到表单给我的电子邮件中。耶我:-)

# android - 调用 RECORD_SOUND_ACTION 时如何指定输出文件的文件夹？

> ID：12305427
> 
> 赞同：1
> 
> 时间：2012-09-06T17:33:58.583
> 
> 标签：android, audio, uri, audio-recording, mediastore

`MediaStore`当我调用内置录音机应用程序时，我想指定一个目标文件夹，例如 sdcard 文件夹。根据[Android 文档](http://developer.android.com/reference/android/provider/MediaStore.Audio.Media.html#RECORD_SOUND_ACTION)，不支持[`EXTRA_OUTPUT`](http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_OUTPUT)调用`RECORD_SOUND_ACTION`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:33:58.583

您必须允许使用使用的任何默认文件名和位置记录文件，然后移动文件。移动文件绝非易事。这是一个完整的例子。

```
import java.io.File;
import java.io.IOException;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Environment;
import android.provider.MediaStore;

import com.google.common.io.Files;

public class SoundRecorder extends Activity {
   private static final int RECORD_QUESTION_SOUND_REQUEST_CODE = 1;

   @Override protected void onResume() {
      super.onResume();
      Intent recordIntent = new Intent(
            MediaStore.Audio.Media.RECORD_SOUND_ACTION);
      // NOTE: Sound recorder does not support EXTRA_OUTPUT
      startActivityForResult(recordIntent, RECORD_QUESTION_SOUND_REQUEST_CODE);
   }

   @Override protected void onActivityResult(
         int requestCode, int resultCode, Intent data) {
      switch (requestCode) {
      case RECORD_QUESTION_SOUND_REQUEST_CODE:
         if (resultCode == Activity.RESULT_OK) {
            // Sound recorder does not support EXTRA_OUTPUT
            Uri uri = data.getData();
            try {
               String filePath = getAudioFilePathFromUri(uri);
               copyFile(filePath);
               getContentResolver().delete(uri, null, null);  
               (new File(filePath)).delete();
            } catch (IOException e) {
               throw new RuntimeException(e);
            }
         }
      }
   }

   private String getAudioFilePathFromUri(Uri uri) {
      Cursor cursor = getContentResolver()
            .query(uri, null, null, null, null);
      cursor.moveToFirst();
      int index = cursor.getColumnIndex(MediaStore.Audio.AudioColumns.DATA);
      return cursor.getString(index);
   }

   private void copyFile(String fileName) throws IOException {
      Files.copy(new File(fileName), 
         new File(Environment.getExternalStorageDirectory(), fileName));
   }
} 
```

注意：`com.google.common.io.Files.copy()`来自 Guava 的文件副本；随意使用替代实现或编写自己的 Java 文件复制器。

# javascript - jQuery 模态对话框不适用于回发

> ID：12305433
> 
> 赞同：3
> 
> 时间：2012-09-06T17:34:20.173
> 
> 标签：javascript, jquery, asp.net, .net, postback

我在使用 jQuery 模式对话框时遇到问题。在下面的代码中，我打开一个对话框，然后使用按钮将值返回到父窗口中表单 (id="form1") 中的字段。然后单击 ASP 按钮，最后关闭对话框。结果是用户可以选择优惠券代码并通过在父窗口上提交应用优惠券代码的表单来自动应用它。

我无法通过提交功能提交表单，我需要单击按钮才能完成这项工作。

该代码在非模态对话框中运行良好。我假设添加 modal 属性会取消对话框与表单的链接，所以我搜索了这个站点并添加了一行以将对话框附加到表单 - 这没有任何效果。希望得到一些帮助！

完全披露，我不是 ASP 人 - ASP 由我们的供应商控制。我只能访问这个网站的前端。

```
<script>
    $(document).ready(function() {
        $("#couponDialog" ).dialog({
            autoOpen: false,
            modal: true,
            width: 600,
            height: 400,
            show: 'drop',
            hide: 'drop'
        });

        $("#couponDialog").parent().appendTo($("form#form1"))

        // Open the dialog on click
        $('#lnk_needCoupon').click(function() {
            $('#couponDialog').dialog('open');
        });

        // Apply coupon code to form field(s), submit form, close dialog
        $('#apply_1').click(function() {
            $('#mainSiteContent_MainContent_basketForm_discount_code').val("code1234");
            $('#mainSiteContent_MainContent_basketForm_ApplyDiscountButton').click();
            $('#couponDialog').dialog('close');
        });

        $('#apply_2').click(function() {
            $('#mainSiteContent_MainContent_basketForm_discount_code').val("code5678");
            $('#mainSiteContent_MainContent_basketForm_ApplyDiscountButton').click();
            $('#couponDialog').dialog('close');
        });
    });
</script>

<p><a href="#" id="lnk_needCoupon"><i>Need a coupon?</i></a></p>

<div id="couponDialog" title="Need a Coupon?">
    <h3 style="margin: 8px">Please choose from one of the coupon codes below:</h3>

    <div style="background-color:#e9e9e9; margin: 10px; padding: 5px;"><b>Take 10% off of your entire order of $50 or more!</b> <a href="#" id="apply_1"><em class="btn"><em><i>Apply This Coupon</i><span class="btn-shop">&nbsp;</span></em></em></a></div>

    <div style="background-color:#e9e9e9; margin: 10px; padding: 5px;"><b>Save 10% off all apparel!</b> <a href="#" id="apply_2"><em class="btn"><em><i>Apply This Coupon</i><span class="btn-shop">&nbsp;</span></em></em></a></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:43:18.413

jQuery modals 是通过克隆 DOM 元素并将它们放置在 body 标记处来创建的。这会创建有效的 DOM 元素，并且在客户端可以正常工作。

然而，asp.net 控件要发送事件，它们必须在表单标签内（asp.net 只创建一个表单标签）。

解决方案是创建对话框，然后将元素放回表单标签中。

改变你的

```
$("#couponDialog").parent().appendTo($("form#form1")) 
```

至

```
$('#couponDialog').parent().appendTo(jQuery("form:first")); 
```

之后，您的服务器事件现在应该会完美触发。

# javascript - 如何将值传递给 wicket 中的 javascript 函数

> ID：12305434
> 
> 赞同：0
> 
> 时间：2012-09-06T17:34:24.850
> 
> 标签：javascript, wicket

我有一个要求，即需要捕获每个事件，例如页面加载和 uiclick。基本上我必须在用户看不到的页面本身的 img 标签中显示信息。所以对于页面加载，我已经完成了 img 标签和从 wicket 获取的 src。但在 uiclick 事件中，我必须进行异步调用。

我试过这样

```
<input type="button" onclick="makeRequest(wicket:id="clickImage",'GET', null, null,'CLICKSTREAM')" name="add"  value="SIGN IN"> 
```

但我遇到了例外

, index = 39, current = [Raw markup]] at org.apache.wicket.markup.AbstractMarkupParser.parseMarkup(AbstractMarkupParser.java:299) at org.apache.wicket.markup.AbstractMarkupParser.parse(AbstractMarkupParser.java:181)在 org.apache.wicket.markup.loader.SimpleMarkupLoader.loadMarkup(SimpleMarkupLoader.java:50) 在 org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.loadMarkup(InheritedMarkupMarkupLoader.java:55) 在 org.apache.wicket.markup .loader.DefaultMarkupLoader.loadMarkup(DefaultMarkupLoader.java:51) at org.apache.wicket.markup.MarkupFactory.loadMarkup(MarkupFactory.java:430) at org.apache.wicket.markup.MarkupCache.loadMarkup(MarkupCache.java:442 )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:20:35.120

**我不确定您要实现什么**，但似乎`<input type="button">`使用 Wicket对其进行建模`Button`并将其附加`SimpleAttributeModifier`甚至 Ajax 行为可能更适合您，特别是如果您发出的异步请求是针对您自己的应用程序的.

在 JS 函数中使用`wicket:id`参数是没有意义的。您`wicket:id`在 HTML 中使用*将*Wicket 组件附加到标签。如果`clickImage`只是一个普通的 HTML`id`属性，只需将其键入为字符串。

例如：

```
<input type="text" id="someId"> <!-- Notice this is not a Wicket component -->
<input type="button" wicket:id="buttonComponent" onclick="makeRequest('someId','GET', null, null,'CLICKSTREAM'"> 
```

如果您事先不知道，`id`因为它可能是动态生成的，`setOutputMarkupId(true)`请在组件中使用，并`onclick`使用 SimpleAttributeModifier 对该事件处理程序进行建模。您可以使用`getMarkupId()`.

例如：

HTML：

```
<input type="text" wicket:id="textComponent">
<input type="button" wicket:id="buttonComponent"> 
```

爪哇

```
TextField txt = new TextField("textComponent");
txt.setOutputMarkupId(true);
txt.setMarkupId("someId"); // Make sure it is unique in the page
Button b = new Button("buttonComponent");
b.add(new SimpleAttributeModifier("onclick", "makeRequest('" + txt.getMarkupId() + "','GET', null, null,'CLICKSTREAM'"));
add(txt);
add(b); 
```

呈现的 HTML：

```
<input type="text" id="someId">
<input type="button" onclick="makeRequest('someId','GET', null, null,'CLICKSTREAM'"> 
```

第二种方法更强大，例如，您可以添加`AttributeModifiers`到中继器内的元素，以便您可以将仅在运行时已知的、生成`id`的 s 传递给 javascript 函数。

# java - Jackson 在反序列化期间动态过滤属性

> ID：12305438
> 
> 赞同：9
> 
> 时间：2012-09-06T17:34:45.840
> 
> 标签：java, json, filtering, jackson, deserialization

我有一个 REST WS 来更新一个接收 JSON 字符串作为输入的 bean 对象。

```
ABean entity = svc.findEntity(...);
objectMapper.readerForUpdating(entity).readValue(json);
[...]
svc.save(entity); 
```

**ABean 是一种复杂类型，还包含其他对象，**例如：

```
class ABean {
    public BBean b;
    public CBean c;

    public String d;
} 
```

svc.save(...)**将保存 bean 和嵌入的对象**。

出于安全原因，我想过滤掉一些可以由 JSON 字符串更新的属性，但我想动态地执行此操作，以便对于每个 WS（或用户角色），我可以决定阻止更新哪些属性（所以我不能简单地使用杰克逊观点）

总而言之，有什么方法可以在 JSON 反序列化期间动态过滤掉属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-27T18:47:59.737

另一种方法是使用 BeanDeserializerModifier：

```
private static class BeanDeserializerModifierForIgnorables extends BeanDeserializerModifier {

        private java.lang.Class<?> type;
        private List<String> ignorables;

        public BeanDeserializerModifierForIgnorables(java.lang.Class clazz, String... properties) {
            ignorables = new ArrayList<>();
            for(String property : properties) {
                ignorables.add(property);
            }
            this.type = clazz;
        }

        @Override
        public BeanDeserializerBuilder updateBuilder(
                DeserializationConfig config, BeanDescription beanDesc,
                BeanDeserializerBuilder builder) {
            if(!type.equals(beanDesc.getBeanClass())) {
                return builder;
            }

            for(String ignorable : ignorables) {
                builder.addIgnorable(ignorable);                
            }

            return builder;
        }

        @Override
        public List<BeanPropertyDefinition> updateProperties(
                DeserializationConfig config, BeanDescription beanDesc,
                List<BeanPropertyDefinition> propDefs) {
            if(!type.equals(beanDesc.getBeanClass())) {
                return propDefs;
            }

            List<BeanPropertyDefinition> newPropDefs = new ArrayList<>();
            for(BeanPropertyDefinition propDef : propDefs) {
                if(!ignorables.contains(propDef.getName())) {
                    newPropDefs.add(propDef);
                }
            }
            return newPropDefs;
        }
    } 
```

您可以使用以下方法将修改器注册到 ObjectMapper：

```
BeanDeserializerModifier modifier = new BeanDeserializerModifierForIgnorables(YourType.class, "name");
DeserializerFactory dFactory = BeanDeserializerFactory.instance.withDeserializerModifier(modifier);
ObjectMapper mapper = new ObjectMapper(null, null, new DefaultDeserializationContext.Impl(dFactory)); 
```

然后忽略定义的属性。如果您使用 @JsonAnySetter 注解，则可以忽略 updateBuilder 方法。

问候，马丁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:03:46.007

我从您的描述中假设您不能简单地使用`@JsonIgnore`注释来防止为每个特定类序列化字段。

看看使用[Jakson mix-ins](http://wiki.fasterxml.com/JacksonMixInAnnotations)：mix-ins 允许您用必要的注释替换类定义来进行数据绑定。在序列化期间，您可以选择一个特定的混合类定义来*代替*被序列化的实际类。定义一组 mix-ins 来处理每种情况，然后在序列化特定 bean 时选择合适的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:38:56.280

您可以使用 @JsonIgnoreType 从序列化中忽略 java 类/接口/枚举。此外，您可以使用 @JsonIgnoreProperties 来忽略属性列表，使用 @JsonIgnore 来忽略特定属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:49:33.217

我想出的最强大、最快速、最简单的解决方案就是对反序列化得到的 JsonNode 树进行过滤，然后将过滤后的结果传递给 readerForUpdating。像这样的东西：

```
public class JacksonHelper {
    public JsonNode filterBeanTree(JsonNode o, List<String> includedProperties,
            List<String> excludedProperties, int maxDepth) {
        JsonNode tree = o.deepCopy();
        this.filterBeanTreeRecursive(tree, includedProperties, excludedProperties, maxDepth, null);
        return tree;
    }

    private void filterBeanTreeRecursive(JsonNode tree, List<String> includedProperties,
            List<String> excludedProperties, int maxDepth, String key) {
        Iterator<Entry<String, JsonNode>> fieldsIter = tree.fields();
        while (fieldsIter.hasNext()) {
            Entry<String, JsonNode> field = fieldsIter.next();
            String fullName = key == null ? field.getKey() : key + "." + field.getKey();

            boolean depthOk = field.getValue().isContainerNode() && maxDepth >= 0;
            boolean isIncluded = includedProperties != null
                    && !includedProperties.contains(fullName);
            boolean isExcluded = excludedProperties != null
                    && excludedProperties.contains(fullName);
            if ((!depthOk && !isIncluded) || isExcluded) {
                fieldsIter.remove();
                continue;
            }

            this.filterBeanTreeRecursive(field.getValue(), includedProperties, excludedProperties,
                    maxDepth - 1, fullName);
        }
    }
} 
```

# php - 使用javascript访问php变量

> ID：12305441
> 
> 赞同：0
> 
> 时间：2012-09-06T17:34:52.817
> 
> 标签：php, javascript

在[http://nwgerh.site88.net/default.php](http://nwgerh.site88.net/default.php)，代码是：

```
<html>
<body>
<?php

$url = "http://www.google.com";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($ch);
curl_close($ch);
echo json_encode($data);
?>
</body>
</html> 
```

我正在尝试使用 Javascript 从 PHP 访问 JSON。请参阅我的[JSFiddle](http://jsfiddle.net/XUTbs/)（基于[本教程](http://www.darian-brown.com/pass-a-php-array-to-javascript-as-json-using-ajax-and-json_encode/)），但有错误。

怎么了？是否存在跨域问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:37:29.877

请发布您遇到的错误..

但是你的小提琴无论如何都有一个错误：

```
$.getJSON('http://nwgerh.site88.net/default.php', function(data) {
    document.write(data);
}​);​ 
```

它缺少尾随`)`

如果它在同一个域上，它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:38:47.083

尝试将 ?callback={} 添加到 URL。这将在 jQuery 中强制执行 JSONP AJAX 请求——这将消除您的跨域问题。

# c# - 并行广度优先搜索

> ID：12305444
> 
> 赞同：1
> 
> 时间：2012-09-06T17:34:57.540
> 
> 标签：c#, parallel-processing, breadth-first-search, parallel.foreach

我正在比较两种广度优先搜索算法的时间执行差异。平行和非平行。但是对于我制作的每张图，非并行版本比并行版本快 10 倍。

这是并行广度优先搜索。我不知道问题出在哪里，但我想在这个方法的某个地方：

```
public static int PBFS(Node start, Node end)
{
    var queue = new ConcurrentQueue<Node>();
    queue.Enqueue(start);

    while (queue.Count != 0)
    {
        bool isFinished = false;
        if (isFinished) break;

        Parallel.ForEach<Node>(queue, CurrentNode =>
        {
            if (queue.TryDequeue(out CurrentNode))
            {
                foreach (Node Child in CurrentNode.Children.Keys)
                {
                    if (Child.IsVisited == false)
                    {
                        Child.IsVisited = true; 
                        if (Child == end) { isFinished = true; return; }
                    }
                    queue.Enqueue(Child);
                }
            }  
            return;
        });
    } return 1;
} 
```

这是非并行 BFS：

```
public static int BFS(Node start, Node end)
{
    Queue<Node> queue = new Queue<Node>();
    queue.Enqueue(start);

    while (queue.Count != 0)
    {
        Node CurrentNode = queue.Dequeue();
        CurrentNode.IsVisited = true;

        foreach (Node Child in CurrentNode.Children.Keys)
        {
            if (Child.IsVisited == false)
            {
                Child.IsVisited = true;
                //Console.Write(Child.Name+" ");
                if (Child == end) return 1;
            }
            queue.Enqueue(Child);
        }
        // Console.WriteLine();
    }

    // Console.WriteLine();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:41:11.173

共享数据的并行化和并发需要同步。同步是昂贵的——正如你所看到的那样。 `ConcurrentQueue`有它自己的同步，这可能不适合您的情况。

超出 CPU 数量的并行化（这可能不会在此处发生，但它是相关的）会导致大量上下文切换——这很昂贵并且会降低并行运行的代码的生产力。即在一个问题上投入更多线程的前提往往会产生相反的效果。

如果性能是一个问题，我认为您可能希望查看不同的设计，可能[是基于 Actor 的](http://en.wikipedia.org/wiki/Actor_model)、[消息传递](http://en.wikipedia.org/wiki/Message_passing)的或[生产者/消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)的，以避免共享数据并避免共享数据的同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:34:02.343

我建议您首先编写一个并行双向 BFS：您创建两个搜索线程，一个从“箭头”的起始节点开始，另一个从目标节点开始反向，并在搜索时终止两个线程边界“相遇”。例如，在 Java 中看起来像[[this]](http://mureakuha.com/koodikirjasto/1248)。

# java - Jmock - 如何模拟静态方法

> ID：12305454
> 
> 赞同：4
> 
> 时间：2012-09-06T17:35:44.593
> 
> 标签：java, testing, junit, jmock

> **可能重复：**
> [jmock 模拟静态方法](https://stackoverflow.com/questions/218813/jmock-mocking-a-static-method)

我正在研究使用 XX 类的静态方法的遗留单元测试。我现在更改了类以从 Spring 应用程序上下文中获取字段值。单元测试现在失败，因为无法初始化类 XX。

我不能用 dummysupport 类包装 XX 类，因为要测试的逻辑很复杂，而且对 XX 类的调用嵌套在对其他遗留类的多层调用中。所以我试图找到一种方法来模拟类 XX 中的静态方法。有没有办法做到这一点？我正在使用 Jmock 库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:48:25.800

似乎没有办法在 JMock 中模拟静态方法。请参阅[此相关线程](https://stackoverflow.com/questions/218813/jmock-mocking-a-static-method)。JMock 的创建者似乎采取精英主义观点，即如果您的代码中有静态方法，则您的代码不值得使用 JMock 进行测试。

我建议使用像[JMockit](http://code.google.com/p/jmockit/)这样的工具，它提供了一个更全功能的模拟工具集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:05:11.153

我相信 [powermock](http://code.google.com/p/powermock/)可以让你模拟静态，详细的[here](http://code.google.com/p/powermock/wiki/MockStatic)

我过去也遇到过这个问题，并设法围绕它编写代码，因此我可以通过使方法为非静态但对类具有静态引用来使用 JMock。

例如

```
public ClassToMock {
    public static final ClassToMock INSTANCE = new ClassToMock();

    private ClasstToMock() {};

    public void newNonStaticMethod1(){}
} 
```

代替

```
public ClassToMock {

    public ClasstToMock() {};

    public void static origStaticMethod1(){}
} 
```

现在您的方法调用将是

```
ClassToMock.INSTANCE.newNonStaticMethod1(); 
```

由于 newNonStaticMethod1() 不是静态的，您现在可以模拟它。

As the CalssToMock ctor is private it can only be accessed through the static instance.

# php - 如何在表单邮件中使用 php 更改国家/地区的时间

> ID：12305456
> 
> 赞同：0
> 
> 时间：2012-09-06T17:35:47.470
> 
> 标签：php, forms, email, country

我用这个代码来显示时间

```
$in_Body .= 'Time: ' .  gmdate('F j, Y, h:i:s A') . "\n\n"; 
```

但我想按国家/地区显示时间，例如埃及

完整代码

```
<?php
$webmaster_mail = 'sales@elfnoon.com';
$redirect_page = 'elfnoon.com/';
$message_subject = 'رسالة من زائر لموقعك';
$in_Body ='';
foreach($_POST as $in_k=>$in_v) {
  $in_Body .="$in_k = $in_v\n\n";
}
$in_Body .= 'IP: ' . $_SERVER['REMOTE_ADDR'] . "\n\n";
$in_Body .= 'Browser: ' . $_SERVER['HTTP_USER_AGENT'] . "\n\n";
$in_Body .= 'Time: ' .  gmdate('F j, Y, h:i:s A') . "\n\n";
mail(trim($webmaster_mail), "$message_subject ", "$in_Body","From: " . trim($webmaster_mail));
header("Location: $redirect_page");
?> 
```

任何想法？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:42:25.853

如果您想使用埃及时间，请查看[**date_default_timezone_set**](http://php.net/manual/en/function.date-default-timezone-set.php)和[支持的时区列表](http://www.php.net/manual/en/timezones.php)。

*gmdate*返回基于 GMT 时区的时间。埃及是UTC + 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:43:56.817

在您的代码中设置时区：-

```
 ini_set('date.timezon','Europe/Brussels'); 
```

或者试试这个

```
<?php

ini_set('date.timezon','Europe/Brussels');
$webmaster_mail = 'sales@elfnoon.com';
$redirect_page = 'elfnoon.com/';
$message_subject = '????? ?? ???? ??????';
$in_Body ='';
foreach($_POST as $in_k=>$in_v) {
  $in_Body .="$in_k = $in_v\n\n";
}
$in_Body .= 'IP: ' . $_SERVER['REMOTE_ADDR'] . "\n\n";
$in_Body .= 'Browser: ' . $_SERVER['HTTP_USER_AGENT'] . "\n\n";
$in_Body .= 'Time: ' .  gmdate('F j, Y, h:i:s A') . "\n\n";
mail(trim($webmaster_mail), "$message_subject ", "$in_Body","From: " . trim($webmaster_mail));
header("Location: $redirect_page");
?> 
```

# php - 如何根据文件名有条件地添加 div？

> ID：12305458
> 
> 赞同：2
> 
> 时间：2012-09-06T17:35:57.667
> 
> 标签：php, whmcs

我已将此代码放入**header.tpl**但 div 出现在所有页面上

```
{if cart.php}
<div> This is Cart.PHP </div>
{/if} 
```

我希望这个 div 只出现在**cart.php**页面的标题中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:30:08.040

```
{if __FILE__ eq "cart.php"}
    do your thing
{/if} 
```

正如@JaredFarrish 所说，您的比较将始终返回 true ，因为您询问的是文件名（在本例中为*cart.php*是否为*true*），而不是您认为的当前文件名。

但是，这可能不适用于包含（如您的情况），您可能希望使用以下内容：

```
{if $smarty.server.PHP_SELF eq "/cart.php"}
    do your thing
{/if} 
```

**请注意**，如果您的文件位于子目录中，则需要将其与完整路径进行比较或从字符串中提取文件名，因为`$smarty.server.PHP_SELF`也返回路径。

为此，您可以`basename`直接对变量使用函数，这样做`basename($smarty.server.PHP_SELF) eq "cart.php"`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:28:22.520

使用服务器变量 PHP_SELF（将“/cart.php”更改为从站点根目录到购物车文件所在位置的确切路径。

```
if ($_SERVER['PHP_SELF'] == "/cart.php") {
    echo "<div>This is cart.php</div>";
} 
```

# css - 多类选择器不起作用

> ID：12305468
> 
> 赞同：3
> 
> 时间：2012-09-06T17:36:27.527
> 
> 标签：css, html, css-selectors, background-image

我已经上下搜索试图找到解决这个问题的方法，但到目前为止没有任何效果。我有一个带有类的部分元素，它在网站的主页上重复。唯一的区别是背景图像的变化。我无法显示背景图像。经过一番修改后，我似乎根本无法识别我的选择器。

这是一个例子：

主页上框的 HTML

```
<section class="maincontent"></section> 
```

投资组合页面上框的 HTML

```
<section class="maincontent port"></section> 
```

CSS

```
.maincontent {
width: 860px;
height: 540px;
margin: 50px;
padding: 0;
background-color: #000;
-moz-box-shadow: 7px 7px 7px rgba(0,0,0,0.6);
-webkit-box-shadow: 7px 7px 7px rgba(0,0,0,0.6);
box-shadow: 7px 7px 7px rgba(0,0,0,0.6);
}
.maincontent.port {
background: url(../images/portduck.jpg) no-repeat top;
} 
```

我尝试使用#port 的ID 而不是多个类，尝试在.maincontent 和.port 之间放置一个空格，尝试更改类的顺序，但没有任何解决方法。我还尝试尝试覆盖框的宽度和高度，但没有发生任何事情，这让我认为问题出在我的选择器上，或者与框阴影有关。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:42:55.990

1- 确保图像路径正确（将鼠标悬停在开发者工具等中的 URL 上，或检查网络面板）。

2-尝试将 display: 块添加到该类的 CSS 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:46:49.007

如果你给一个“.maincontent .port”的选择器（注意之间的空格），那么为了匹配这个，你必须有一个带有“maincontent”类的标签，并且嵌套在里面你必须有一个带有“类”的标签端口”，例如

```
<div class="maincontent">
  <p class="port">
  ... whatever ...
  </p>
</div> 
```

如果您想要一个标签来获取两个类的属性，请使这些类不相关，然后给两个类名以空格分隔。

```
CSS:
.maincontent {... whatever ...}
.port {... whatever ...}

HTML:
<div class="maincontent port"> 
```

我不确定当您同时提供背景颜色和背景图像时会发生什么。如果它们发生冲突，一个简单的方法是将背景颜色分解为另一个类，然后调用适当的组合。另一种选择是将“！important”添加到背景图像中。这告诉系统给予它更高的优先级。此外，一般规则是较长的说明符链优先于较短的链，因此“.maincontent .port”应该胜过“.maincontent”中的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:02:11.047

您的 css for`.maincontent.port`覆盖背景颜色，并将其设置为默认值（透明）。如果你想从你那里继承黑色背景颜色，`.maincontent`你需要这样做：

```
.maincontent.port {
    background-image: url(../images/portduck.jpg)
    background-repeat: no-repeat;
} 
```

# scala - 如何手动应用进化并在播放框架 2 上标记为已解决

> ID：12305469
> 
> 赞同：6
> 
> 时间：2012-09-06T17:36:29.410
> 
> 标签：scala, playframework-2.0, playframework-evolutions

是否有可能在 playframework 2 中应用标记进化？

场景：我不得不更改已经应用的进化文件，因为它与 H2 不兼容，导致在测试期间无法应用剩余的进化。所以，我修好了。现在应用程序想要重新应用修改后的演变。我只想“标记已解决”而不应用（并避免删除重新创建表。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T17:52:27.863

在本地应用进化，转储整个表`play_evolutions`并恢复到生产数据库。请参阅@biesior 的评论以了解为什么我们需要所有字段。

# .net - 正则表达式匹配模式 A 而不是模式 B

> ID：12305471
> 
> 赞同：-2
> 
> 时间：2012-09-06T17:36:38.693
> 
> 标签：.net, regex, redirect

背景：

我有一个使用正则表达式的 URL 重定向系统。

URL 格式为：http: [//www.company.com/](http://www.company.com/) {任意数量的父页面}/parentX/{任意页面}.aspx

需要重定向到： http: [//www.company.com/parentY/parentX/](http://www.company.com/parentY/parentX/) {页面}.aspx

换句话说，所有具有直接父 X 和任意数量的祖父页面的页面现在都位于 parentY/parentX 下。

我可以轻松地编写一个正则表达式来匹配一个 URL 到[http://www.company.com/](http://www.company.com/) {任意数量的父页面}/parentX/{任意页面}.aspx。但是，这也将匹配我重定向到的页面（导致重定向循环）。所以，我的表达式需要不匹配模式[http://www.company.com/parentY/parentX/](http://www.company.com/parentY/parentX/) {the page}.aspx

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:20:05.877

```
#http://www.thecompany.com/(?!parentY).*/parentX/[^/].aspx# 
```

我正在使用否定的前瞻断言。 `(?!...)`是一个零宽度断言，可确保内部的正则表达式在此起始位置不匹配。不知道你用哪种语言写作，我不确定你是否可以做到这一点，或者它是否可以变得更好（例如，怎么样 `http://www.thecompany.com/parentY/parentZ/parentX`？） - 但这应该适用于你在这里给出的情况。

# android - 不断更新变量

> ID：12305479
> 
> 赞同：0
> 
> 时间：2012-09-06T17:37:15.383
> 
> 标签：android, delay

我正在编写一个程序，它将通过 USB 不断接收数据。我希望能够获取此值并将其显示在每季度更新一次的 TextView 中。我已经尝试过 postDelayed 处理程序，但是只有在我的变量停止更改后，该值才会更新。（我一直在用一个递增的 for 循环和输出循环的值来测试这个）我也尝试过`Thread.sleep(250)`在我的循环内部使用，但这也不起作用。所以基本上我想知道如何每季度更新一次 TextView 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:43:53.663

您需要设置某种定期计时器（有几个可用），每 250 毫秒触发一次。由于此计时器将（可能）在与您的主 UI 线程不同的线程中运行，并且由于仅允许 UI 线程修改您的 TextView，因此您的计时器回调将`runOnUiThread(runnable);`在触发时调用。您的可运行文件将更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:23:42.087

您应该有从 USB 接收数据的方法。将用于更新您的代码放入`TextView`此方法中。

例如：

```
public void getDataFromUsb(String data){ // or whatever it is you are getting from USB

yourTextView.setText(data);

} 
```

`TextView`每次您从 USB 获取数据时，此代码都会刷新您的新值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:53:07.687

```
Handler mUpdater = new Handler();
Runnable mUpdateView = new Runnable() {
@Override
public void run() {
   tv.setText(newText);
   tv.invalidate();
   mUpdater.postDelayed(this, updateIntervalInMilliSeconds);
 }
} 
```

这将使用更新时的任何内容自动更新 TextView `newText`。它将更新每个`updateIntervalInMilliSeconds`. 只需调用`mUpdateView.run()`即可开始。确保以 结束它`onPause()`以`mUpdater.removeCallbacksAndMessages(null)`停止更新。

您还可以通过设置在运行中检查的布尔值来停止它。您也可以通过调用延迟启动它`mUpdater.postDelayed(mUpdateView, updateInMilliseconds);`。

无论哪种方式，`postDelayed`都是一次性执行，您必须不断调用它才能自动更新。

# python - 尽可能快地找到最多 10^12 的数字的总除数？

> ID：12305484
> 
> 赞同：4
> 
> 时间：2012-09-06T17:37:24.890
> 
> 标签：python, algorithm

我需要计算数字 N 的除数总数（而不关心除数的值是什么），并在所有此类数字 N 的 40-80 次操作内进行计算。我该怎么做？这不是一个家庭作业问题。我尝试了[Pollard 的 Rho](http://en.wikipedia.org/wiki/Pollard%27s_rho_algorithm)算法，但结果对我的目的来说太慢了。这是我在python中的代码。如果可能的话，我怎样才能提高它的性能？

```
def is_prime(n):    
    if n < 2:
        return False
    ps = [2,3,5,7,11,13,17,19,23,29,31,37,41,
         43,47,53,59,61,67,71,73,79,83,89,97]
    def is_spsp(n, a):
        d, s = n-1, 0
        while d%2 == 0:
            d /= 2; s += 1
        t = pow(int(a),int(d),int(n))
        if t == 1:
            return True
        while s > 0:
            if t == n-1:
                return True
            t = (t*t) % n
            s -= 1
        return False
    if n in ps: return True
    for p in ps:
        if not is_spsp(n,p):
            return False
    return True

def gcd(a,b):
        while b: a, b = b, a%b
        return abs(a)

def rho_factors(n, limit=100):
    def gcd(a,b):
        while b: a, b = b, a%b
        return abs(a)
    def rho_factor(n, c, limit):
        f = lambda x:    (x*x+c) % n
        t, h, d = 2, 2, 1
        while d == 1:
            if limit == 0:
                raise OverflowError('limit exceeded')
            t = f(t); h = f(f(h)); d = gcd(t-h, n)
        if d == n:
            return rho_factor(n, c+1, limit)
        if is_prime(d):
            return d
        return rho_factor(d, c+1, limit)
    if -1 <= n <= 1: return [n]
    if n < -1: return [-1] + rho_factors(-n, limit)
    fs = []
    while n % 2 == 0:
        n = n // 2; fs = fs + [2]
    if n == 1: return fs
    while not is_prime(n):
        f = rho_factor(n, 1, limit)
        n = int(n / f)
        fs = fs + [f]
    return sorted(fs + [n])

def divs(n):
    if(n==1):
        return 1
    ndiv=1
    f=rho_factors(n)
    l=len(f)
    #print(f)
    c=1
    for x in range(1,l):
        #print(f[x])
        if(f[x]==f[x-1]):
            c=c+1
        else:
            ndiv=ndiv*(c+1)
            c=1
       # print ("C",c,"ndiv",ndiv)
    ndiv=ndiv*(c+1)
    return ndiv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:28:03.130

首先，你的意思是找到除数的总数，分解中的素数，还是不同的素数除数？例如，12 = 2 * 2 * 3 有 6 个除数 (1,2,3,4,6,12)，分解中的 3 个素数 (2,2,3)，以及 2 个不同的素数除数 (2,3) . 您想要 6、3 还是 2 作为结果？我将假设您在剩下的时间里想要其中的第二个，但如果您对其他一个感兴趣，我认为不会有任何实质性的变化......

其次，你将不得不充分考虑你的数字。没有已知的捷径可以在不找到因子本身的情况下找到素因子的数量。（值得注意的例外是，您可以快速测试因子数是 ==1 还是 >=2。）

10^12 没那么大。您只需要测试除数到该数字的平方根，最多为 10^6。假设在 2GHz 的现代 CPU 上除法需要 20 个周期，测试一百万个除数只需 10 毫秒。

```
#include <stdio.h>
#include <stdlib.h>
int main(int argc, char *argv[]) {
  long long n = atoll(argv[1]);
  for (int i = 2; i < 1000000; i++) {
    while (n % i == 0) { printf("%d\n", i); n /= i; }
  }
  if (n > 1) printf("%lld\n", n);
} 
```

在我的机器上需要 23 毫秒。想知道那另外的 13 毫秒去哪儿了？

Python 大约慢了 10 倍，因为这段代码在我的机器上仍然只需要 0.23 秒：

```
import sys
n = int(sys.argv[1])
for i in xrange(2, 1000000):
  while n%i==0: print i; n/=i
if n>1: print n 
```

你想要多快？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:11:16.420

我记得以前在 SPOJ 上解决过这个问题，但我不记得我使用的确切方法（如果您提供问题 ID，那就太好了）。您是否尝试过这里的*幼稚*方法？它的复杂度为`O(sqrt n)`，大约`O(10 ^ 6)`在最坏的情况下。模运算符可能有点慢，但值得一试。以下是在 C++ 中完成时的外观：

```
int cntdiv = 0;
for(int i = 2; i * i <= x; i ++) {
    if(x % i == 0) {
        cntdiv += 1 + (i * i != x);
    }
}
//cntdiv is now your count 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T20:07:28.713

我记得有一个基于数字和其他特征的数字总和的解决方案
例如，3411可以被9整除，因为3 + 4 + 1 + 1 = 9，数字总和可以被9整除，而不是一个数字也能被 9 整除。与其他数规则类似。

# java - 将输出数组存储在不同的数组中并对数组值进行排序

> ID：12305486
> 
> 赞同：-1
> 
> 时间：2012-09-06T17:37:25.740
> 
> 标签：java, arrays, arraylist

我想知道如何将输出存储在数组中，然后对其值进行排序。

```
public static void main(String[] args) {

    int i;
    float[] npoints = new float[10];
    float[] points = new float[10];
    points[0]=(float) 0.3;
    points[1]=(float) 0.2;
    points[2]=(float) 0.4;
    points[3]=(float) 0.5;
    points[4]=(float) 0.6;
    points[5]=(float) 0.0123;

    for(i=0;i<6;i++)
    {
        if(points[i]!=0.0)
        {
            npoints[i]=points[i];
            System.out.println(i+":"+points[i]);
        }

    }
    System.out.println(npoints[i]);
} 
```

}

输出：

0:0.3
1:0.2
2:0.4
3:0.5
4:0.6
5:0.0123
0.0
构建成功（总时间：0 秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:40:30.180

使用[`Arrays#sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28float%5B%5D%29)：

```
Arrays.sort(points); 
```

请注意，此方法对数组*进行就地*排序，这意味着它将修改您作为参数传递的数组。

如果要复制数组，可以使用`Arrays#copyOf`，然后对副本进行排序：

```
float[] points = new float[10];
points[0]=(float) 0.3;
points[1]=(float) 0.2;
points[2]=(float) 0.4;
points[3]=(float) 0.5;
points[4]=(float) 0.6;
points[5]=(float) 0.0123;

float[] npoints = Arrays.copyOf(points, points.length);
Arrays.sort(npoints);
System.out.println(Arrays.toString(npoints));
// [0.0, 0.0, 0.0, 0.0, 0.0123, 0.2, 0.3, 0.4, 0.5, 0.6] 
```

**[演示](http://ideone.com/hpsXM)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:40:49.367

```
ArrayList<Float> arr = new ArrayList<Float>();

for(i=0;i<6;i++)
   {
       if(points[i]!=0.0)
       {
           npoints[i]=points[i];
           System.out.println(i+":"+points[i]);

           arr.add(npoints[i]);
       }

    } 
```

现在使用`java.util.Comparator`或`java.lang.Comparable`接口对**它们进行排序**......或者如果你想坚持使用数组......然后做`Arrays.sort()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:44:03.237

采用`Arrays.sort(array); or Collections.sort(list);`

甚至您也可以`Comparator<? super T>`为自定义订购元素传递自定义。

# android - SimpleCursor 适配器不显示我的行

> ID：12305488
> 
> 赞同：1
> 
> 时间：2012-09-06T17:37:33.150
> 
> 标签：android, listview, row, simplecursoradapter

我的应用程序没有显示我的数据库中的数据。我无法弄清楚为什么这不起作用，因为我相信我的所有设置都已正确完成。谁能帮我弄清楚为什么我的数据没有显示？

这是我的列表视图代码：

```
 package com.work.plan;

 // multiple imports .... not included for length purpose

 public class WorkoutList extends Activity {

//====================================================================
//  Member variables

private Button addNewWorkout;
private WorkoutDbAdapter mDbHelper;
public static final int CREATE_WORKOUT = 1;
public static final int SET_WORKOUT = 2;
private String dateCreated = null;
private Calendar now = null; 
private SimpleDateFormat format = null;
private ListView myWorkoutList;

Intent prevIntent ;
String woName,userName;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.workout_list);

    addNewWorkout = (Button) findViewById(R.id.btnNewWorkout);
    prevIntent = getIntent();
    userName = prevIntent.getStringExtra("userName");

    // do the work for getting the current time and formatting it
    now = Calendar.getInstance();
    format = new SimpleDateFormat("EEE MMM dd hh:mm aaa");
    dateCreated = format.format(now.getTime());

     mDbHelper = new WorkoutDbAdapter(this);
     mDbHelper.open();

     myWorkoutList = (ListView)findViewById(R.id.workoutList);
     registerForContextMenu(myWorkoutList);

     myWorkoutList.setDivider(getResources().getDrawable(R.color.mainDivider));
     myWorkoutList.setDividerHeight(1);
     myWorkoutList.setOnItemClickListener(WorkoutListener);

     addNewWorkout.setOnClickListener(NewWorkout);

    fillData();
}

OnClickListener NewWorkout = new OnClickListener(){
     // ......... click listener code for my add button
     // ......... creates a new workout

};
//===============================================================================
//
@Override
public void onPause(){
    super.onPause();

}
//===============================================================================
//
@Override
public void onResume(){
    super.onResume();
    mDbHelper.open();
}

@Override
public void onDestroy(){
    super.onDestroy();
    mDbHelper.close();
}

//================================================================================
//
// Fill the data for UI rebuilds
private void fillData(){

    Log.d("User_NAME",""+ userName);

    Cursor workoutCursor = mDbHelper.fetchAllWorkouts();
    startManagingCursor(workoutCursor);

    String [] from = new String [] { WorkoutDbAdapter.KEY_WORKOUT_NAME,
                                    WorkoutDbAdapter.KEY_WORKOUT_CREATED_DATE ,WorkoutDbAdapter.KEY_WORKOUT_TYPE};

    int [] to = new int [] {R.id.dateCreatedLabel, R.id.nameLabel, R.id.typeLabel};

    SimpleCursorAdapter workouts = new SimpleCursorAdapter(this, R.layout.workout_row, workoutCursor, from, to);

    myWorkoutList.setAdapter(workouts);

}

@Override
public void onCreateContextMenu(ContextMenu menu , View v, ContextMenuInfo menuInfo){
    //........ stuff for my menu
}

@Override
public boolean onContextItemSelected(MenuItem item){
    //.......... code for my menu, handles menu clicks
    return super.onContextItemSelected(item);

}

//================================================================================

OnItemClickListener WorkoutListener = new OnItemClickListener(){

    public void onItemClick(AdapterView<?> arg0, View view, int position,
            final long id) {
        AlertDialog.Builder dialog = new AlertDialog.Builder(WorkoutList.this)
        .setIcon(R.drawable.edit)
        .setTitle("Update Selected Workout")
        .setMessage("Would you like to update the current Workout? Click continue to proceed.")
        .setPositiveButton("Continue", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
                final Intent i = new Intent(getBaseContext(), ExerciseList.class);
                i.putExtra(WorkoutDbAdapter.KEY_ROW_ID, id);
                i.putExtra("workoutName", woName);
                startActivityForResult(i, SET_WORKOUT);

            }
        })
        .setNegativeButton("Back", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();

            }
        });
        dialog.show();

    }

};
} 
```

然后我有一个数据库适配器，可以在 SQLite 中创建表“锻炼”。

这是 WorkoutDbAdapter 代码：

```
public class WorkoutDbAdapter {
//=========================================================================
    // Member Variables

     public static final String DATABASE_TABLE = "workouts";            
     public static final String KEY_ROW_ID = "_id";                 
     public static final String KEY_WORKOUT_EMAIL = "email";
     public static final String KEY_WORKOUT_NAME = "workout_name";              
     public static final String KEY_WORKOUT_CREATED_DATE = "created_date";
     public static final String KEY_WORKOUT_TYPE = "type";

     // string query that creates the table in the database
     static final String CREATE_TABLE_WORKOUTS  = ("CREATE TABLE " + DATABASE_TABLE + "("+ KEY_ROW_ID + " INTEGER PRIMARY KEY AUTOINCREMENT,"
                                                                   + KEY_WORKOUT_EMAIL + " TEXT NOT NULL,"
                                                                   + KEY_WORKOUT_NAME + " TEXT NOT NULL,"
                                                                   + KEY_WORKOUT_CREATED_DATE + " TEXT NOT NULL,"
                                                                   + KEY_WORKOUT_TYPE + " TEXT NOT NULL);");

     private final Context m_ClassContext;                          // reference to the current class
     private DatabaseHelper mDbHelper;                              // reference the database helper class
     private SQLiteDatabase mDb;                                    // reference to the SQLiteDatabase class

     // class constructor
     public WorkoutDbAdapter(Context ctx){
         this.m_ClassContext = ctx;
     }

     // open the database with a reference to this class
     public WorkoutDbAdapter open() throws SQLException{
         this.mDbHelper = new DatabaseHelper(m_ClassContext);
         this.mDb = mDbHelper.getWritableDatabase();
         return this;
     }

     // create a work out
     public long createWorkout(String email, String workoutName, String workoutDate, String workoutType){
         ContentValues values = new ContentValues();
         values.put(KEY_WORKOUT_EMAIL, email);
         values.put(KEY_WORKOUT_NAME, workoutName);
         values.put(KEY_WORKOUT_CREATED_DATE, workoutDate);
         values.put(KEY_WORKOUT_TYPE, workoutType);
         long insertValue = this.mDb.insert(DATABASE_TABLE, null, values);
         return insertValue;

     }

     // delete a Work out
     public boolean deleteWorkout(long rowId){
         return this.mDb.delete(DATABASE_TABLE, KEY_ROW_ID + "=" +rowId,null) > 0;
     }

//**My error was here**
     // fetch allWorkouts for this user
     public Cursor fetchAllWorkouts(String email){
         return this.mDb.query(DATABASE_TABLE, new String[]{KEY_ROW_ID,
KEY_WORKOUT_EMAIL, KEY_WORKOUT_NAME, KEY_WORKOUT_CREATED_DATE, KEY_WORKOUT_TYPE},
KEY_WORKOUT_EMAIL+ "='" +email+"'",null,null,null,null); // i removed a null and it works
     }

     // fetch a work out
     public Cursor fetchWorkout(long rowId) throws SQLException{
         Cursor mCursor = mDb.query(true, DATABASE_TABLE,new String[]{KEY_ROW_ID,
                    KEY_WORKOUT_EMAIL,KEY_WORKOUT_NAME,KEY_WORKOUT_CREATED_DATE, KEY_WORKOUT_TYPE}, KEY_ROW_ID + "="+rowId, null,null,null,null,null);
         if(mCursor != null){
             mCursor.moveToFirst();
         }
         return mCursor;
     }

     public boolean updateWorkout(long rowId, String email, String workoutName, String createdDate, String workoutType){
         ContentValues values = new ContentValues();
         values.put(KEY_WORKOUT_EMAIL, email);
         values.put(KEY_WORKOUT_NAME, workoutName);
         values.put(KEY_WORKOUT_CREATED_DATE, createdDate);
         values.put(KEY_WORKOUT_TYPE, workoutType);

         return this.mDb.update(DATABASE_TABLE, values, KEY_ROW_ID +"="+rowId, null)> 0;
     }

     // close the database
     public void close(){
         if(mDbHelper != null){
             mDbHelper.close();
             mDb.close();
         }

     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:13:58.623

您的数据库代码可能遇到问题，并且游标大小为 0。观察 logcat 以查找失败的 sql 查询并调试游标的大小。

# powershell - PowerShell：Write-Progress 不适用于 RoboCopy，解决方法？

> ID：12305493
> 
> 赞同：0
> 
> 时间：2012-09-06T17:37:49.080
> 
> 标签：powershell, progress-bar, robocopy

我已成功合并`Write-Progress`到我的脚本中。当我的脚本到达使用的任何部分`RoboCopy`时`Write-Progress`消失并在`RoboCopy`完成时重新出现：

```
Write-Progress -Id 1 -Activity $arg2 -PercentComplete $i -Status $arg1
RoboCopy C:\source C:\destination /MIR 
```

我曾考虑过使用`Start-Process`跑步`Write-Progress`，但收效甚微。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:50:43.330

我能够回答我自己的问题。这是使用的解决方案`Start-Job`：

```
Write-Progress -Id 1 -Activity $arg2 -PercentComplete $i -Status $arg1
Start-Job { RoboCopy C:\source C:\destination /MIR LOG+:C:\log.txt } > $null
cat C:\log.txt 
```

所以让我解释一下。`Start-Job`创建一个后台作业并将其自己的输出重定向到位桶。由于这是一项后台作业，我会立即返回以运行更多内容，例如 cat 会溢出 RoboCopy 日志文件的所有内容。最后，它可以正常工作。耶！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:20:43.883

我怀疑 Robocopy 会接管控制台显示缓冲区来显示进度。尝试使用 robocopy 选项`/NP /NJH /NJS`。您可能还需要添加`/NS /NC /NFL /NDL`.

# asp.net - ASP.NET 隐藏更新进度控件

> ID：12305494
> 
> 赞同：0
> 
> 时间：2012-09-06T17:37:58.580
> 
> 标签：asp.net, ajax, updatepanel, hide, updateprogress

我正在使用 ajax 的 UpdateProgress 控件作为用户控件。它显示在项目中的所有更新面板中。有时我想为特定的更新面板隐藏这个 updateProgress。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:40:17.447

为 UpdateProgress 栏设置 AssociatedUpdatePanelID ="UP1"。这将确保显示与其关联的 ID 的进度条。

这将确保它会在 UP1 更新时显示出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:41:38.420

您可以尝试使用此代码

```
YourPanelContainer.Style.Add("display", "none"); //Add your control to panel or div 
```

对于这个样本

```
<asp:Panel ID="YourPanelContainer" runat="server" Height="50px" Width="125px">

<asp:UpdateProgress ID="UpdateProgress1" runat="server" >

<ProgressTemplate> 
```

# php - 在 AJAX 网站上加载 FancyBox 图像库

> ID：12305496
> 
> 赞同：0
> 
> 时间：2012-09-06T17:38:03.963
> 
> 标签：php, ajax, dynamic, fancybox

我创建了一个使用 AJAX 动态加载内容的网站，但是这在尝试加载 FancyBox 图像库时引起了问题。

如果您访问：[http](http://darynjohnson.com/Medical%20Futures/gallery.php) ://darynjohnson.com/Medical%20Futures/gallery.php - 画廊加载正常，如您所料。

但是，如果您先转到另一个页面，然后再返回画廊，它就不起作用了。 [http://darynjohnson.com/Medical%20Futures/about.php#gallery.php](http://darynjohnson.com/Medical%20Futures/about.php#gallery.php)

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:55:27.730

我认为问题来自`gallery.php`：

```
$(document).ready(function() {
    $(".fancybox").fancybox();
}); 
```

这会在文档加载时触发，一旦从 about.php（或任何其他页面）加载页面，您可以尝试手动调用该函数。或者也许将其替换为：

```
$(function() {
    $(".fancybox").fancybox();
}); 
```

编辑：你可以做类似的事情`dynamicpage.js`：

之后`$pageWrap.animate({ ... });`，添加`$(".fancybox").fancybox();`。这将确保链接已准备好在单击时打开图库。可以使用更好的方法来调用为每个页面定义的函数，或者添加一个条件来检查`if (newHash == 'gallery.php')`，例如。我希望我现在更清楚了。

# hadoop - 如何在 Log4J 中启用调试级别日志记录（在 Hadoop 中）

> ID：12305501
> 
> 赞同：3
> 
> 时间：2012-09-06T17:38:43.027
> 
> 标签：hadoop, log4j

我在 Hadoop 中看到了很多带有以下检查的代码：

if (LOG.isDebugEnabled()) { ...

我猜这与log4j有关？如何在 Hadoop 中启用调试级别日志记录？

我在 Hadoop 的 conf 目录中看到了一个 log4j 属性文件，我看到了一些类似这样的行：

# 自定义日志级别

hadoop.metrics.log.level=信息

#log4j.logger.org.apache.hadoop.mapred.JobTracker=调试#log4j.logger.org.apache.hadoop.mapred.TaskTracker=调试#log4j.logger.org.apache.hadoop.fs.FSNamesystem=调试

那么我猜这是取消注释某些条目的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-09T03:11:27.393

放

```
HADOOP_ROOT_LOGGER=DEBUG,console 
```

在 hadoop-env.sh

参考：[https ://stackoverflow.com/a/11550030/2163429](https://stackoverflow.com/a/11550030/2163429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-20T18:58:23.427

在带有 Hadoop 3.3.1 的 Windows 10 中，我们可以通过附加 hadoop-env.cmd 来启用它

设置 HADOOP_ROOT_LOGGER=DEBUG,控制台

# java - 使用 html 配置 Java 对象

> ID：12305509
> 
> 赞同：-1
> 
> 时间：2012-09-06T17:39:15.323
> 
> 标签：java, html

我有一个代表我的配置的 java 对象（pojo）。
我正在使用 jaxb 从 xml 文件中读取它们并编写它们。

我想允许我的 Web 应用程序的用户编辑这些配置对象。

有没有办法做到这一点？
我的意思是从对象创建html，在允许修改的同时将它们显示给用户并将其传递回服务器？
是否有一个框架可以生成用于编辑的 html 表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:46:47.530

我个人使用的是Play！类似的东西的框架。我们有一组 POJO，可以在 Web 应用程序表单中创建/编辑，然后通过 JPA 存储在我们的数据库中。然后我们查询数据库并将对象编组为 XML 用于其他目的。

由于您将其标记为 Java，因此值得注意的是，这可以在 Scala 或 Java 中作为 Play！框架支持两者，尽管 Scala 中提供了 HTML 帮助程序，但您可能仍然值得一看。

[http://www.playframework.org/documentation/2.0.3/Home](http://www.playframework.org/documentation/2.0.3/Home)

# c - 简单的文件复制，不同文件类型的不同行为

> ID：12305512
> 
> 赞同：0
> 
> 时间：2012-09-06T17:39:33.743
> 
> 标签：c, pdf, jpeg

我正在尝试 C 中的一些文件操作技术，因此我编写了一个简单的程序，它将文件作为输入并将其复制到一个空文件中。我在“二进制”和“读取”模式下使用 fopen() 打开要读取的文件，使用 fgetc() 逐个读取所有字节，并将它们写入我想要写入的文件中，该文件在“写入”和“读取”模式下打开二进制”模式。当复制操作完成（EOF）时，我对两个文件都调用了 fclose() 并终止了程序。

这就是问题所在：对于文本文件，一切都很好，但是当我尝试以不同格式复制文件时，例如 pdf 或 jpeg，我会遇到分段错误。由于代码真的很短很简单，我怀疑这个问题是由于我对用 C 读写这些文件格式缺乏了解造成的，而不是代码中的错误。

欢迎任何建议和想法，如果您怀疑我可能对代码做错了什么，我也可以发布它。

编辑：好的，所以我可能搞砸了代码，这里是：

```
#include <stdio.h>
#include <stdlib.h>

#define MAXCHAR 10000000

int main( int argc, char** argv)
{
    if( argc != 3)
    {
        printf( "usage: fileexer1 <read_pathname> <write_pathname>");
        exit( 1);
    }

    FILE* file_read;
    FILE* file_write;

    int nextChar;
    char readBuffer[MAXCHAR];
    int valid = 0;

    // These hold the path addresses to the files to be read and written
    char* read_file_path = argv[1];
    char* write_file_path = argv[2];

    // The file to be read is opened in 'read' and 'binary' modes
    file_read = fopen( read_file_path, "rb");
    if( !file_read)
    {
        perror( "File cannot be opened for reading");
        exit( 1);
    }

    // The file to be written into is opened in 'write' and 'binary' modes
    file_write = fopen( write_file_path, "wb");
    if( !file_write)
    {
        perror( "File cannot be opened for writing");
        exit( 1);
    }

    nextChar = fgetc( file_read);
    while( nextChar != EOF)
    {
        readBuffer[valid] = (char) nextChar;
        valid++;
        nextChar = fgetc( file_read);
    }

    int i;
    for( i = 0; i < valid; i++)
    {
        fputc( readBuffer[i], file_write);
    }

    fclose( file_read);
    fclose( file_write);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:11:11.710

我敢打赌，您的代码有问题，因为编写任何二进制类型文件都没有什么花哨的。二进制就是二进制。这是一些将名为 1.jpg 的图像复制到 2.jpg 的代码。

```
int main (){
    FILE *readf, *writef;
    unsigned char *buffer;
    unsigned long len;
    int i=0;

    //Open file
    readf = fopen("1.jpg", "rb");
    writef = fopen("2.jpg","wb");

    //you should check if readf & writef were opened successfully here...

    //Get file length
    fseek(readf, 0, SEEK_END);
    len=ftell(readf);
    fseek(readf, 0, SEEK_SET);

    //Allocate memory
    buffer=(char *)malloc(len);

    //check that buffer got memory allocated here... 

    fread(buffer,fileLen,sizeof(unsigned char),readf);
    fwrite(buffer,fileLen,sizeof(unsigned char),writef);

    //cleanup
    fclose(readf);
    fclose(writef);
    free(buffer);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:31:03.913

无论如何，如果您要逐个字符地读取和写入，那么分配一个巨大的缓冲区来保存数据就没有什么意义了。忽略错误检查：

```
int main(int argc, char **argv) { 

   FILE *infile = fopen(argv[1], "rb");
   FILE *outfile = fopen(argv[2], "wb");

   int ch;

   while (EOF != (ch = getc(infile)))
      putc(ch, outfile);

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:31:06.770

如果您要一次读取一个字符，则不需要将 1000 万个字符保存在堆栈上的缓冲区中。而且您的代码不会优雅地处理大于 1000 万字节的文件。

只需`fputc(nextChar)`在调用前的输入循环中使用`fgetc()`，并消除`readBuffer`变量和输出循环。如果需要，您仍然可以计算有效字符，但没有必要。

```
#include <stdio.h>
#include <stdlib.h>

int main( int argc, char** argv)
{
    if( argc != 3)
    {
        printf( "usage: fileexer1 <read_pathname> <write_pathname>");
        exit( 1);
    }

    FILE* file_read;
    FILE* file_write;

    int nextChar;

    // These hold the path addresses to the files to be read and written
    char* read_file_path = argv[1];
    char* write_file_path = argv[2];

    // The file to be read is opened in 'read' and 'binary' modes
    file_read = fopen( read_file_path, "rb");
    if( !file_read)
    {
        perror( "File cannot be opened for reading");
        exit( 1);
    }

    // The file to be written into is opened in 'write' and 'binary' modes
    file_write = fopen( write_file_path, "wb");
    if( !file_write)
    {
        perror( "File cannot be opened for writing");
        exit( 1);
    }

    while ((nextChar = fgetc(file_read)) != EOF)
        fputc(nextChar, file_write);

    fclose( file_read);
    fclose( file_write);

   return 0;
} 
```

请注意，某些系统存在 10 MiB 堆栈的问题。如果您想提高效率，请考虑使用 64 KiB 缓冲区，然后使用`fread()`and`fwrite()`来读取和写入数据块。

```
#include <stdio.h>
#include <stdlib.h>

int main( int argc, char** argv)
{
    if( argc != 3)
    {
        printf( "usage: fileexer1 <read_pathname> <write_pathname>");
        exit( 1);
    }

    FILE *file_read;
    FILE *file_write;
    char buffer[64*1024];
    size_t nbytes;

    // The file to be read is opened in 'read' and 'binary' modes
    file_read = fopen(argv[1], "rb");
    if (!file_read)
    {
        perror("File cannot be opened for reading");
        exit(1);
    }

    // The file to be written into is opened in 'write' and 'binary' modes
    file_write = fopen(argv[2], "wb");
    if (!file_write)
    {
        perror("File cannot be opened for writing");
        exit(1);
    }

    while ((nbytes = fread(buffer, sizeof(buffer), sizeof(char), file_read)) != EOF)
    {
        if (fwrite(buffer, nbytes, sizeof(char), file_write) != nbytes)
        {
            perror("Failed to write to file");
            exit(1);
        }
    }

    fclose(file_read);
    fclose(file_write);

   return 0;
} 
```

使用`perror()`会限制您的消息的有用性；最好使用`fprintf(stderr, ...)`，但我没有为你解决这个问题。

# mongodb - 如何获得仅包含 { name, stateStr, optimeDate } 的 rs.status() 投影

> ID：12305517
> 
> 赞同：1
> 
> 时间：2012-09-06T17:39:55.503
> 
> 标签：mongodb

我想减少 rs.status() 方法的输出，所以我只看到每个成员的 name、stateStr 和 optimeDate。有没有办法做到这一点？rs.status() 只是由某处的某个集合支持，它是什么以及如何直接查询它。实际上我想要的就像...

```
PRIMARY> rs.status().pretty( {members.name: 1, members.stateStr: 1, members.optimeDate: 1 } );
{
    "name" : "mongo1.rek.tc",
    "stateStr" : "PRIMARY",
    "optimeDate" : ISODate("2012-09-06T17:28:19Z")
},
{
    "name" : "mongo2.rek.tc",
    "stateStr" : "SECONDARY",
    "optimeDate" : ISODate("2012-09-06T17:28:14Z")
},
{
    "name" : "mongo3.rek.tc",
    "stateStr" : "SECONDARY",
    "optimeDate" : ISODate("2012-09-06T17:28:15Z")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:36:39.503

您似乎不能对 $cmd 命名空间使用投影。我尝试了助手的翻译查询，即：

```
 db.$cmd.findOne( { replSetGetStatus : 1 }) 
```

它仍然不允许我预测结果。即使这是可能的，返回数组的多个子元素（成员是一个数组）的投影也不能很好地工作，所以即使投影有效，你也会遇到问题。

您可以使用一些简单的 javascript 来做到这一点。以下内容有效，但如果对您有用，您可能需要添加更多格式和字段名称：

```
rs.status().members.forEach( 
    function(z){ 
            printjson(z.name);
            printjson(z.stateStr);
            printjson(z.optimeDate); 
    } 
   ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-07T18:48:20.660

从命令行：

```
mongo --eval "rs.status()" | grep "name\|stateStr\|optimeDate" 
```

# hadoop - 这是使用 HBase REST API 来解析来自其 URL 的响应的正确方法吗？

> ID：12305534
> 
> 赞同：0
> 
> 时间：2012-09-06T17:40:59.033
> 
> 标签：hadoop

我没有找到任何 HBase REST 客户端的示例来放置 GET POST 请求。因此，我正在做的不是这个，而是我只是将 HBase REST URL 放入我的 java 代码中，然后使用 SAX 解析器解析响应。这是正确的方法吗（因为我没有使用 GET 请求..我没有找到在 Hbase REST 客户端上使用 GET 帖子的示例）谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:29:10.443

有很多使用 REST API 的例子，最简单的是通过“curl”：

```
$ curl http://localhost:8080/version 
```

您可以在此处找到相关文档：[http](http://wiki.apache.org/hadoop/Hbase/Stargate) ://wiki.apache.org/hadoop/Hbase/Stargate 。响应可以以纯文本、xml、json 或 protobuf 的形式使用。

[Ruby 拥有像HBase Stargate](https://github.com/greglu/hbase-stargate)和[HBase Ruby](https://github.com/sishen/hbase-ruby)这样的gem来提供原生支持。您如何尝试使用 REST 服务？通过Java？

# android - if [ $(getprop | grep '[net.tcp.buffersize.default]: [4096,87380,110208,4096,16384,110208]') ]

> ID：12305537
> 
> 赞同：-1
> 
> 时间：2012-09-06T17:41:18.113
> 
> 标签：android, bash, grep

这条线有什么问题？

```
if [ $(getprop | grep '[net.tcp.buffersize.default]:[4096,87380,110208,4096,16384,110208]') ] 
```

如果 grep 在 getprop 输出中找到“net.tcp.buffersize ...”，它应该返回一个真值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:55:33.660

的参数`grep`是一个[正则表达式](http://www.gnu.org/software/grep/manual/grep.html#Regular-Expressions)。字符`[`,`]`和`.`具有特殊含义，因此不会按字面解释该参数。要查找文字字符串，请将`-F`选项传递给`grep`. 要查找与该字符串完全相同的行，请通过`-F -x`.

你测试结果的`grep`方式没有任何意义。`$(…)`获取输出（即匹配的行）并将它们拆分为单词（因为 周围没有双引号`$(…)`）。然后这些词（这将是`getprop`输出的一部分）被解析为`[`内置的条件。要测试某些输入是否包含与 的匹配项`grep`，请测试命令的返回状态`grep`，并传递`-q`选项以抑制输出。

```
if getprop | grep -q -F -x '[net.tcp.buffersize.default]:[4096,87380,110208,4096,16384,110208]'; then … 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:57:37.650

我可以看到两个问题：

1.  在`grep`命令中，需要对左方括号进行转义
2.  在这种情况下，if 语句不需要方括号

因此，您的声明应为：

```
if getprop | grep '\[net.tcp.buffersize.default]:\[4096,87380,110208,4096,16384,110208]' 
```

### 更新

您还需要转义点：

```
if getprop | grep '\[net\.tcp\.buffersize\.default]:\[4096,87380,110208,4096,16384,110208]' 
```

或者，正如 Gilles 指出的那样，您应该使用 -F 来搜索文字字符串，而不是使用正则表达式。

# vb.net - 编译错误-vb.net 不是成员错误

> ID：12305538
> 
> 赞同：0
> 
> 时间：2012-09-06T17:41:19.657
> 
> 标签：vb.net, compiler-errors

我正在尝试在网页后面编写一些代码以在单击按钮时发送电子邮件。

我有一个文本框

```
<asp:TextBox ID="txtSecEmail" runat="server" Width="189px" 
ontextchanged="txtSecEmail_TextChanged"></asp:TextBox> 
```

之后我还有一个按钮

```
<asp:Button ID="btnUploadFiles" runat="server" Text="Upload Files"      
    Command="Command"
 CommandArgument="CommandArgument"
 runat="server" onclick="btnUploadFiles_Click"  /> 
```

当我尝试加载页面时出现此错误

编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：BC30456：“txtSecEmail_TextChanged”不是“ASP.datauploaddatafiles_aspx”的成员。

```
Source Error:

Line 94:             <td>
Line 95:                 &nbsp;&nbsp; EMAIL ADDRESS:
Line 96:                 <asp:TextBox ID="txtSecEmail" runat="server" Width="189px" 
Line 97:                     ontextchanged="txtSecEmail_TextChanged"></asp:TextBox>
Line 98:             </td> 
```

源文件：Y:\Prog\NET\web\ClientCenterNew\datauploaddatafiles.aspx 行：96

我不明白它怎么不是会员？为什么这么说？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:49:41.013

它正在代码隐藏 (datauploaddatafiles.aspx.vb) 中寻找 txtSecEmail_TextChanged 方法。将该子例程放在文件后面的代码中并重建。

例子：

```
Protected Sub txtSecEmail_TextChanged(ByVal sender As Object, _
        ByVal e As System.EventArgs) Handles txtSecEmail.TextChanged
   'Some Code
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T18:15:58.870

确保您没有两个网页无意中使用了相同的类名，如果您在未更改类名的情况下复制了一个页面，则可能会发生这种情况。在这种情况下，Visual Studio 可能会在您不知情的情况下将您的代码置于 Partial Class 后面。

# javascript - Javascript更改span元素的值

> ID：12305539
> 
> 赞同：0
> 
> 时间：2012-09-06T17:41:20.253
> 
> 标签：javascript

我试图更改具有特定 ID 的跨度的值。显然，我错过了一些东西。这是代码

Javascript：

```
<script type="text/javascript">
function deis(deistir)
{

                 document.getElementById(deistir).innerHTML=2;

}

</script> 
```

HTML：

```
<div class="arrow-up"  onClick="deis(<?php echo "cevap_".$id;?>)">
  </div>

    <span style="font-size:30px; color:#333;" id = "<?php echo "cevap_".$id;?>">

  &nbsp;&nbsp;1

 </span> 
```

您可能想知道为什么我使用 php 作为 id。这是因为 html 段在 while 循环中，所以 $id 不断变化。为什么不变成2？当有点击事件时，我想将 span 的值从 1 更改为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:42:26.747

当您需要字符串文字时，您正在传递一个（未定义的）变量。

```
deis(<?php echo "cevap_".$id;?>)"
//   ^  needs quotation marks ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:53:35.260

好的，我做到了：）

我改变了这个：

```
<div class="arrow-up"  onClick="deis(<?php echo "cevap_".$id;?>)"> 
```

到那个

```
<div class="arrow-up"  onClick="deis('<?php echo "cevap_".$id;?>')"> 
```

# android - 模板应用程序无法在 Intellij Idea 中编译

> ID：12305540
> 
> 赞同：1
> 
> 时间：2012-09-06T17:41:29.040
> 
> 标签：android, intellij-idea, aapt

我想使用 Intellij Idea 而不是 Eclipse，但我什至无法构建 Hello World 应用程序。

当我尝试构建这样的项目错误时：

> [Hello World] /home/martin/workspace/Hello World/res/layout/main.xml:2：错误：在包'android'中找不到属性'orientation'的资源标识符

我用谷歌搜索了错误消息，我找到[了这个](https://stackoverflow.com/questions/5683488/aapt-tool-chokes-on-a-brand-new-android-project)，但我仍然一无所知。我想我只需要在 IDE 中编辑一个命令，但我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:12:37.907

您需要将 android 依赖项添加到您的模块中。它应该看起来像这样。

![在此处输入图像描述](../Images/75d35084e702626f08dd7e953d869995.png)

![在此处输入图像描述](../Images/d9bfec74927a45a92c82bb91d5e739ec.png)

# javascript - javascript日期比较

> ID：12305547
> 
> 赞同：0
> 
> 时间：2012-09-06T17:41:58.757
> 
> 标签：javascript, date, comparison

我正在使用javascript Date，我开始发疯了:)

我想要两个只比较两个日期的年、月、日。日期是（从萤火虫堆栈跟踪中检索）：

```
[Date {Thu Feb 11 2010 12:00:00 GMT+0000 (GMT Standard Time)}]

[Date {Sun Jul 11 2010 00:00:00 GMT+0100 (GMT Daylight Time)}] 
```

在这一点上，我正在尝试像这样比较两个日期：

```
if (datepickerBegin == null || datepickerBegin.length == 0 || datepickerBegin != date) {
    //Do stuff
} 
```

这段代码显然不起作用，这是比较这两个字符串的简单方法吗？

我正在尝试将此 var 转换为 Date 并连接到另一个 var `getMonth()+getYear()+getDay()`... 但我相信有一种最简单的方法。

顺便说一句，为什么下面一行给出`NaN`

```
new Date(datepickerBegin).getMonth() 
```

但以下行有效吗？

```
new Date(Date.parse(datepickerBegin.toString())).getMonth() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:57:17.640

使用 解析日期后`Date.parse(...);`，您可以使用 Date 构造函数来创建日期类型，如下所示。这个过程的一个例子已经被抽象成下面的函数：

```
function parseDateAsDatePart(dateString) {
    var parsedDate = new Date(Date.parse(dateString));
    return new Date(parsedDate.getYear(), parsedDate.getMonth(), parsedDate.getDate());
} 
```

将两个字符串都更改为 Date 对象后，您可以如上所示比较它们。

**注意：**正如上面提到的Linus，`Date.parse(...)`返回的是一个整数，而不是一个日期对象，所以需要将它包裹在Date构造函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:00:08.423

`.getTime()`尝试使用该方法将日期转换为时间。如果日期相等，则它们将具有从 getTime 返回的相同值。这假定您只对日期使用字符串值（即“9/6/12”）。如果您的日期将有与之关联的时间戳，那么您需要使用该`setHours()`函数将所有时间参考设置为 0 ( `d.setHours(0,0,0,0);`)。

**链接：**

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours)

**例子：**

```
if(datePickerBegin.getTime() === datePickerEnd.getTime())
{
  //...do something.
} 
```

**注意：**如果您最终选择了这`.getMonth()`条路线，请注意该函数将月份返回为从零开始的数字，因此将返回的值加 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:02:15.647

您可以尝试使用 getMonth、GetDays ......

[http://www.comptechdoc.org/independent/web/cgi/javamanual/javadate.html](http://www.comptechdoc.org/independent/web/cgi/javamanual/javadate.html)

# google-app-engine - 解压并读取 Google App Engine (Java) 上的每个文件

> ID：12305550
> 
> 赞同：1
> 
> 时间：2012-09-06T17:42:03.743
> 
> 标签：google-app-engine, servlets, google-cloud-datastore, multifile-uploader, zipinputstream

我正在尝试创建一个 servlet，它能够解压缩包含 3 个 csv 文件的文件夹，然后打印出每个 csv 文件的数据。

我一直在尝试使用 ZipInputStream，但它没有为我提供读取/打印每个 csv 内容的能力。

当我在 GAE 上构建这个网络应用程序时，我无法使用 FileOutputStream。

有没有办法使用 ZipInputStream 解压缩和读取单个 csv 而无需在 GAE 上创建 csv？

公共类 AdminBootStrap 扩展 HttpServlet {

```
public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    resp.setContentType("text/plain");

    PrintWriter out = resp.getWriter();

     try {
          ServletFileUpload upload = new ServletFileUpload();
          resp.setContentType("text/plain");

          FileItemIterator iterator = upload.getItemIterator(req);
          while (iterator.hasNext()) {
            FileItemStream item = iterator.next();
            InputStream in = item.openStream();

            if (item.isFormField()) {
              out.println("Got a form field: " + item.getFieldName());
            } else {
              out.println("Got an uploaded file: " + item.getFieldName() +
                          ", name = " + item.getName());

            ZipInputStream zis = new ZipInputStream(new BufferedInputStream(in));

            ZipEntry entry;

            // Read each entry from the ZipInputStream until no
            // more entry found indicated by a null return value
            // of the getNextEntry() method.
            //
            while ((entry = zis.getNextEntry()) != null) {

                out.println("Unzipping: " + entry.getName());
                //until this point, i'm only available to print each csv name.
                //What I want to do is to print out the data inside each csv file.

            }

            }
          }
        } catch (Exception ex) {
         ex.printStackTrace();
            // throw new ServletException(ex);
        }
      } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:47:20.903

`ZipInputStream`是一个`InputStream`，所以你可以正常读取它：

```
while ((entry = zis.getNextEntry()) {

    byte[] buf = new byte[1024];
    int len;
    while ((len = zis.read(buf)) > 0) {
        // here do something with data in buf
    } 
```

# qt - 在 Qtcreator 中使用 Rodrigues 函数时出现 OpenCV 错误

> ID：12305552
> 
> 赞同：3
> 
> 时间：2012-09-06T17:42:07.227
> 
> 标签：qt, opencv, rotation, qt-creator, runtime-error

在使用 OpenCV 中的函数 cv::Rodrigues 时，我在 QtCreator 中遇到了问题。使用rodrigues将旋转矩阵转换为旋转向量时，我总是遇到运行时错误。从 rot 向量到 rot 矩阵时我没有这样的问题，但反之亦然。这是使用此功能的简单代码。值得一提的是，它可以在 Visual Studio 中运行。

```
 cv::Mat R(3,3,CV_32F);

        R.at<float>(0,0)=0;
        R.at<float>(0,1)=0;
        R.at<float>(0,2)=1;
        R.at<float>(1,0)=0;
        R.at<float>(1,1)=1;
        R.at<float>(1,2)=0;
        R.at<float>(2,0)=-1;
        R.at<float>(2,1)=0;
        R.at<float>(2,2)=0;

        cv::Mat rvec_result;
        cv::Rodrigues(R,rvec_result); 
```

R 是一个 3x3 矩阵，表示绕 Y 轴旋转 90 度。当我在调试模式下跟踪它时，我在调用rodrigues() 时得到分段错误(SIGSEGV)。

我使用的是 OpenCV 2.4.1，我的系统是 64 位的。谁能帮我解决这个问题？

提前致谢。

# c# - 使用 c# 以编程方式创建和填充 VistaDB 数据库

> ID：12305554
> 
> 赞同：1
> 
> 时间：2012-09-06T17:42:16.107
> 
> 标签：c#, data-migration, database-migration, vistadb, database-create

是否可以使用 C#以**编程**方式创建 VistaDB 数据库。我的要求是我有一个包含数千行的 SQL Server 数据库，并且我想以**编程**方式创建相同的模式并将数百行导出到像 VistaDB 这样的嵌入式数据库并发送到客户端。我知道我可以使用 VistaDB 数据迁移向导，但我需要使用 C# 以编程方式进行（因为它将由客户端执行数据导出操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:13:48.650

绝对地！数据迁移向导和 DataBuilder 所做的一切最终都表示为对 VistaDB 引擎的公共 API 的调用。有两种方法可以完成任务——SQL 脚本（就像你在 SQL Server 中使用的那样）和 VistaDB 专有的 DDA API。当前版本的 VistaDB 在 SQL Server 的语法和它接受的模式操作语法之间存在许多差异（这是我们将在 VistaDB 5 中弥补的差距），但您几乎可以做任何您想做的事情。

您可能会发现使用 DDA API 是最简单的，因为它更面向 API，更少面向脚本。这是开始阅读文档的好地方： [VistaDB DDA Assembly Help](http://www.gibraltarsoftware.com/Support/VistaDB/Documentation/WebFrame.html#VistaDB.5.NET40~VistaDB.DDA_namespace.html)

# php - 在 Windows 上发出 PHP cURL 请求会从代理产生“400 Bad Request”

> ID：12305558
> 
> 赞同：2
> 
> 时间：2012-09-06T17:42:33.200
> 
> 标签：php, windows, http, curl, proxy

大家早

基本上，由于涉及代理服务器的问题，我无法从我的 Windows 7 开发 PC 向内部和外部服务器发出成功的 cURL 请求。我在 Apache 2.4 上通过 PHP 5.3.6 运行 cURL 7.21.2。

这是一个失败的最基本请求：

```
<?php

$curl = curl_init('http://www.google.com');

$log_file = fopen(sys_get_temp_dir() . 'curl.log', 'w');

curl_setopt_array($curl, array(
    CURLOPT_RETURNTRANSFER => TRUE,
    CURLOPT_VERBOSE => TRUE,
    CURLOPT_HEADER => TRUE,
    CURLOPT_STDERR => $log_file,
));

$response = curl_exec($curl);

@fclose($log_file);

print "<pre>{$response}"; 
```

收到以下（完整）响应。

```
HTTP/1.1 400 Bad Request
Date: Thu, 06 Sep 2012 17:12:58 GMT
Content-Length: 171
Content-Type: text/html
Server: IronPort httpd/1.1

Error response

Error code 400.

Message: Bad Request.

Reason: None. 
```

cURL 生成的日志文件包含以下内容。

```
* About to connect() to proxy usushproxy01.unistudios.com port 7070 (#0)
*   Trying 216.178.96.20... * connected
* Connected to usushproxy01.unistudios.com (216.178.96.20) port 7070 (#0)
> GET http://www.google.com HTTP/1.1
Host: www.google.com
Accept: */*
Proxy-Connection: Keep-Alive

< HTTP/1.1 400 Bad Request
< Date: Thu, 06 Sep 2012 17:12:58 GMT
< Content-Length: 171
< Content-Type: text/html
< Server: IronPort httpd/1.1
< 
* Connection #0 to host usushproxy01.unistudios.com left intact 
```

如下所示，明确说明代理和用户凭据没有区别：响应始终相同。

```
<?php

$curl = curl_init('http://www.google.com');

$log_file = fopen(sys_get_temp_dir() . 'curl.log', 'w');

curl_setopt_array($curl, array(
    CURLOPT_RETURNTRANSFER => TRUE,
    CURLOPT_VERBOSE => TRUE,
    CURLOPT_HEADER => TRUE,
    CURLOPT_STDERR => $log_file,
    CURLOPT_PROXY => 'http://usushproxy01.unistudios.com:7070',
    CURLOPT_PROXYUSERPWD => '<username>:<password>',
));

$response = curl_exec($curl);

@fclose($log_file);

print "<pre>{$response}"; 
```

我很惊讶在请求行中看到一个绝对 URL（'GET ...'），但我认为在处理代理服务器时这很好 - 根据 HTTP 规范。

我已经尝试了各种选项组合 - 包括发送用户代理、关注这个和那个等等 - 已经通过 Stack Overflow 问题和其他网站，但所有请求都以相同的响应结束。

如果我在命令行上运行脚本也会出现同样的问题，所以它不可能是 Apache 问题，对吧？

如果我使用 cURL 从同一网络上的*Linux*机器发出请求，我不会遇到问题。

让我困惑的是“错误请求”的事情：我的请求到底有什么问题？你知道我为什么会遇到这个问题吗？一个Windows的东西？我正在使用的 PHP/cURL 版本中的错误？

*非常*感激地收到任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:21:34.327

您可能正在查看 cURL（Windows 和 Linux 之间的不同版本）和 IronPort 版本之间的问题。在 IronPort 文档中：

> **修复：Web Proxy 使用 Proxy-Connection 标头而不是 Connection 标头，导致某些用户代理出现问题**
> 
> 以前，Web 代理在与具有显式转发请求的用户代理通信时使用 Proxy-Connection 标头而不是 Connection 标头。因此，某些用户代理（例如 Real Player）无法按预期工作。这不再发生。现在，除了 Proxy-Connection 标头之外，Web 代理还使用 Connection 标头回复客户端。[缺陷编号：46515]

尝试删除`Proxy-Connection`（或添加`Connection`）标题，看看这是否解决了问题。

此外，您可能希望比较 Windows 和 Linux 主机之间的 cURL 日志。

# java - RestFB 只返回当前用户墙条目

> ID：12305559
> 
> 赞同：1
> 
> 时间：2012-09-06T17:42:33.913
> 
> 标签：java, facebook-graph-api, feed, restfb

我正在使用 RestFB 获取用户的墙提要并遇到一个问题，即仅返回当前用户的帖子。这是一个错误还是我做错了什么？完全相同的查询在 Facebook API Explorer 中有效，所以我不太确定出了什么问题。

```
Connection<Post> rPosts = fbClient.fetchConnection("me/feed", Post.class); 
```

我已尝试使用 1.6.09 和 1.6.10 版本，结果相同。

谢谢，杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:32:46.847

正如上面提到的 Igy，这与权限问题有关。在 Facebook Explorer 中，所有基本权限都已设置，但在我的应用程序中，它缺少对朋友的权限。我认为它不是必需的，因为它是用户墙，但我想不是。

# .net - system.web 中的自定义配置部分

> ID：12305560
> 
> 赞同：1
> 
> 时间：2012-09-06T17:42:40.940
> 
> 标签：.net

如何将自定义配置部分添加到现有`<system.web>`部分下的 .NET web.config 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:47:43.293

尝试使用此代码

```
<configSections>
    <section name="" type="System.Configuration.DictionarySectionHandler, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <sectionGroup name="system.web">
      <section name="test" type="DataSetSectionHandler,SectionHandlers" />
    </sectionGroup>
  </configSections>

<system.web>
    <compilation debug="true"/>
    <authentication mode="Windows" />

    <test  attribute="..."  />
  </system.web> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T17:50:56.127

你不能在里面添加自定义配置部分`<system.web>`。您可以将自定义配置部分放在`<configuration>`. 检查这个[如何](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)。

# android - 将按钮添加到 PreferenceFragment

> ID：12305563
> 
> 赞同：11
> 
> 时间：2012-09-06T17:42:45.223
> 
> 标签：android, android-fragments, preferences

我想在我的首选项屏幕底部添加几个按钮，用于设置默认值和恢复默认值。[这个](https://stackoverflow.com/questions/2697233/how-to-add-a-button-to-preferencescreen)答案不包括如何使用 PreferenceFragment 做到这一点。完成此操作的推荐方法是什么。

加载首选项片段的活动：

```
public class SettingsActivity extends Activity {

    @Override
    public void onCreate( Bundle savedInstanceState) {

        super.onCreate( savedInstanceState);

        // load up the preferences fragment
        getFragmentManager().beginTransaction().replace( android.R.id.content, new PrefsSettingsFragment()).commit();
    }
} 
```

PreferenceFragment 实现：

```
public class PrefsSettingsFragment extends PreferenceFragment {

    @Override
    public void onCreate( Bundle savedInstanceState) {

        super.onCreate( savedInstanceState);  

        addPreferencesFromResource( R.xml.preferences);             
    }       
} 
```

首选项.xml：

```
<?xml version="1.0"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <EditTextPreference android:key="edit_text_preference_server_address" android:title="@string/preference_server_address"/>
    <SwitchPreference android:key="switch_preference_bat" android:title="@string/preference_bat"/>
    <SwitchPreference android:key="switch_preference_comm" android:title="@string/preference_comm"/>
    <SwitchPreference android:key="switch_preference_dev_mode" android:title="@string/preference_dev_mode" android:defaultValue="true"/>

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T16:02:15.767

我遇到了同样的问题，我找到了解决这个问题的方法。

重写 PreferenceFragment 中的 onCreateView 方法，使用给定的 LayoutInfalter by 参数创建自己的 View，并返回这个 View。

这是我的代码。我希望这会有所帮助

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        View v = inflater.inflate(R.layout.set_alarm, null);

        Button save = (Button)v.findViewById(R.id.save);
        Button revert = (Button)v.findViewById(R.id.revert);
        Button delete = (Button)v.findViewById(R.id.delete);

        save.setOnClickListener(this);
        revert.setOnClickListener(this);
        delete.setOnClickListener(this);

        if(mId == -1){
            delete.setEnabled(false);
        }

        return v;
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-15T11:47:38.587

我稍微修改了上一篇文章，以便按钮将附加在视图的底部。

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        LinearLayout v = (LinearLayout) super.onCreateView(inflater, container, savedInstanceState);

        Button btn = new Button(getActivity().getApplicationContext());
        btn.setText("Button on Bottom");

        v.addView(btn);
        btn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
            }
        });

        return v;
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-27T11:32:23.173

只需为包含 ID @android:id/list 的列表视图的设置活动创建自己的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <FrameLayout
        android:id="@+id/fragment"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="0dp">
        <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>
    </FrameLayout>

    <Button
        android:id="@+id/button"
        android:text="Save"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

然后在活动类中设置内容视图，然后添加偏好片段

```
public class SettingsActivity extends Activity {

    @Override
    public void onCreate( Bundle savedInstanceState) {    
        super.onCreate( savedInstanceState);
        setContentView(R.layout.settings_activity)

        // load up the preferences fragment
        getFragmentManager().beginTransaction().replace( android.R.id.content, new PrefsSettingsFragment()).commit();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T18:58:43.627

你可以试试这个

```
@Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            LinearLayout v = (LinearLayout) super.onCreateView(inflater, container, savedInstanceState);

            Button SendLogbtn = new Button(getActivity().getApplicationContext());
            SendLogbtn.setText("send log file");

            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT);

            params.setMargins(100, 0, 0, 500);
            SendLogbtn.setLayoutParams(params);

            v.addView(SendLogbtn);

            SendLogbtn.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {

                    // do your code 

                }
            });

            return v;
        } 
```

# iphone - 什么是 iOS 6 用户代理字符串？

> ID：12305566
> 
> 赞同：52
> 
> 时间：2012-09-06T17:42:54.233
> 
> 标签：iphone, ios, ipad, user-agent, ios6

什么是***iOS 6.0***用户代理字符串？

* * *

以前的用户代理字符串：

*   [**iOS 5.1** - 什么是 iOS 5.1 用户代理字符串？](https://stackoverflow.com/q/10152433/836407)
*   [**iOS 5.0** - 什么是 iOS 5.0 用户代理字符串？](https://stackoverflow.com/q/7825873/836407)
*   [**iOS 4.0** - 什么是 iPhone 4 用户代理？](https://stackoverflow.com/q/3105555/836407)

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-06T17:43:12.800

苹果手机：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25 
```

平板电脑：

```
Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25 
```

* * *

有关 iOS 用户代理的完整列表和更多详细信息，请查看以下 2 个资源：
[Safari 用户代理字符串 (http://useragentstring.com/pages/Safari/)](http://useragentstring.com/pages/Safari/)
[iOS 用户代理字符串的完整列表 (http://enterpriseios .com/wiki/UserAgent）](http://enterpriseios.com/wiki/UserAgent)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-29T18:33:52.873

多一点：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_3 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10B329 Safari/8536.25

Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_4 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10B350 Safari/8536.25 
```

# php - PHP mysqli 表格中的数据，带有删除按钮到 jQuery modal 确认，然后 $.post 到 PHP 以执行 mysqli 删除和刷新父页面

> ID：12305568
> 
> 赞同：1
> 
> 时间：2012-09-06T17:42:59.050
> 
> 标签：php, modal-dialog, jquery-ui-dialog, dynamic-data, page-refresh

这是我要完成的工作流程。

在我的 Users.html 页面加载时，我执行 php 代码以从 mysql 数据库中获取数据，然后使用 php 创建一个动态表以循环并为每行创建表行和数据元素。

每行都有一个删除按钮；按下删除按钮后，我打开一个 jQuery UI 模态对话框，其中传入并显示在对话框中的用户数据。

如果用户点击确认删除用户，我使用 $.post 打开一个 php 页面并传递 php 页面的数据以执行用户删除。

成功选择（或错误）后，我使用标题“users.html?error=x”，其中 x 是错误号，因此用户返回到他们开始的原始 users.html 页面。

问题是 users.html 页面永远不会被刷新（并且页面在整个 modal-php 重定向过程中实际上从未改变。

我使用 (#divIDx).remove() 删除表中的条目，但由于它是动态表，当用户更改表上的页面或选择或选择允许每页更多或更少的条目时，用户即使它们已从数据库中删除，也会返回。由于用户点击确认删除按钮，我尝试调用 document.location.reload()，但我的安全人员听到了该调用并终止了当前会话。

因此，要将其分解为 HTML 锚点，请单击 -> jquery 对话框 -> 删除用户 php -> 回到相同的 users.html 但 users.html 从不刷新。

这是执行数据库查询的 users.html

```
<?php
    require_once( '_/connections/login.php' );

    $stmt = $mysqli_login->stmt_init();
    //$businessid =  $mysqli_login->real_escape_string($orgid);
    $stmt = $mysqli_login->prepare("SELECT firstname, lastname, role, email, id, organizationid FROM login where organizationid = " . $mysqli_login->real_escape_string($orgid) );
    //$stmt = $mysqli_login->prepare("SELECT firstname, lastname, role, email, id, organizationid FROM login where organizationid = ?");
    if(!isset($stmt)){}else{
        ///////////////////////////////////////////////////////////
        //TODO: find out why bind_params is not working here
        ///////////////////////////////////////////////////////////
        //$stmt->bind_params('s', $businessid);
        $stmt->execute(); // Execute the prepared query.
        $stmt->store_result();
    $stmt->bind_result($Ufirstname, $Ulastname, $Urole, $Uemail, $Uid, $Uorgid);
    }
?> 
```

然后我使用这段代码创建我的表

```
<?php if(!$stmt){echo $users_found = 0;} else {$users_found = $stmt->num_rows;}?>

        <div class="widget">
            <div class="whead">
                <h6>Registered Dashboard Users: 
                    <?php echo $users_found; ?>&nbsp;&nbsp;
                    <?php if(isset($_GET['del_error'])){
                        switch($_GET['del_error']) {
                        case '0':
                            echo "User Deleted";
                            break;
                        case '1':
                            echo "Error deleting user";
                            break;
                        case '2':
                            echo "Error deleting user";
                            break;
                        case '3':
                            echo "Error deleting user";
                            break;
                        default:

                            break;
                        }
                    }?>
                </h6>
                <div class="clear"></div>
            </div>
            <div id="dyn" class="hiddenpars">
                <a class="tOptions" title="Options"><img src="images/icons/options" alt="" /></a>
                <table cellpadding="0" cellspacing="0" border="0" class="dTable" id="dynamic">
                    <thead>
                        <tr>
                        <th>First Name<span class="sorting" style="display: block;"></span></th>
                        <th>Last Name</th>
                        <th>Role</th>
                        <th>Email</th>
                        <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php while ($stmt->fetch()) { ?>
                        <tr id="div<?php printf ("%s", $Uid); ?>">
                            <td><?php printf ("%s", $Ufirstname); ?></td>
                            <td><?php printf ("%s", $Ulastname);  ?></td>
                            <td><?php printf ("%s", $Urole);      ?></td>
                            <td><?php printf ("%s", $Uemail);     ?></td>
                            <td class="tableActs">
                                <a class="usereditbutton tablectrl_small bDefault tipS" title="Edit"
                                user-dlg-divid="div<?php printf ("%s", $Uid); ?>"
                                user-dlg-fname="<?php printf ("%s", $Ufirstname); ?>" 
                                user-dlg-lname="<?php printf ("%s", $Ulastname); ?>"
                                user-dlg-role="<?php printf ("%s", $Urole); ?>"
                                user-dlg-email="<?php printf ("%s", $Uemail); ?>"
                                user-dlg-id="<?php printf ("%s", $Uid); ?>" 
                                user-dlg-orgid="<?php printf ("%s", $Uorgid); ?>"
                                ><span class="iconb" data-icon="&#xe1db;"></span></a>
                                <a class="userdeletebutton tablectrl_small bDefault tipS" title="Remove" 
                                user-dlg-divid="div<?php printf ("%s", $Uid); ?>"
                                user-dlg-fname="<?php printf ("%s", $Ufirstname); ?>" 
                                user-dlg-lname="<?php printf ("%s", $Ulastname); ?>"
                                user-dlg-role="<?php printf ("%s", $Urole); ?>"
                                user-dlg-email="<?php printf ("%s", $Uemail); ?>"
                                user-dlg-id="<?php printf ("%s", $Uid); ?>" 
                                user-dlg-orgid="<?php printf ("%s", $Uorgid); ?>"
                                ><span class="iconb" data-icon="&#xe136;"></span></a>
                            </td>
                        </tr>
                        <?php } $stmt->close(); ?>
                    </tbody>
                </table> 
                </div>
            </div>
        </div> 
```

表单 div 很简单，因为我从另一个 HTML 页面动态注入 HTML

```
<div id="dialog_edituser" title="Edit User Form">
    <a id="dialog_edituser_content"></a>
</div> 
```

对话框的 javscript 代码获取必要参数的值，将它们存储在一些全局变量中，然后在打开时，HTML 的内容被注入到适当的 div 中，服务器已经使用一些填充了所需的动态数据回显 $_POST['...'] 命令

```
//==================================//
//===== Remove User Dialog Box =====//
//==================================//
var dialog_deluser_divid = ''; //tr to delete from table
var dialog_deluser_fname = ''; //first name
var dialog_deluser_lname = ''; //last name
var dialog_deluser_email = ''; //email
var dialog_deluser_role = ''; //role
var dialog_deluser_id = ''; //id
var dialog_deluser_orgid = ''; //business id
$('#dialog_deluser').dialog({
    autoOpen: false, 
    width: 400,
    modal: true,
    buttons: {
            "Submit": function() {
                //remove the data from the table
                $('#'+dialog_deluser_divid).remove();
                //remove the user from the database
                $.post("_/processUserRemove.php", { 
                    'fname': dialog_deluser_fname, 
                    'lname': dialog_deluser_lname,
                    'email': dialog_deluser_email,
                    'role': dialog_deluser_role,
                    'id': dialog_deluser_id,
                    'orgid': dialog_deluser_orgid
                });
                //close the dialog box
                $( this ).dialog( "close" );
            },
            "Cancel": function() {
                $( this ).dialog( "close" );
            }
    },
    //load the dialog box with the contents of an HTML file replacing the ID in a <div id=
    open: function(event, ui) {
           $('#dialog_deluser_content').load('_/processUserRemoveDialog.html', 
           {'divid':dialog_deluser_divid,
            'fname':dialog_deluser_fname, 
            'lname':dialog_deluser_lname,
            'email':dialog_deluser_email,
            'role':dialog_deluser_role,
            'id':dialog_deluser_id,
            'orgid':dialog_deluser_orgid},
            function() {
           });
   }

});

$('.userdeletebutton').click(function (e) {
    e.preventDefault();
    dialog_deluser_divid = $(this).attr("user-dlg-divid");//id of tr to delete
    dialog_deluser_fname = $(this).attr("user-dlg-fname");//set first name
    dialog_deluser_lname = $(this).attr("user-dlg-lname");//set last name
    dialog_deluser_email = $(this).attr("user-dlg-email");//set email
    dialog_deluser_role = $(this).attr("user-dlg-role");//set role
    dialog_deluser_id = $(this).attr("user-dlg-id");//set id
    dialog_deluser_orgid = $(this).attr("user-dlg-orgid");//set organization id;
    $('#dialog_deluser').dialog('open');
});
//===== End Remove User Dialog Box =====// 
```

一旦用户点击提交按钮，值就会发布到 processUserRemove.php 并且 processUserRemove.php 将执行 header('Location: ../users.html?del_error=x'); 其中“x”是相应的错误号。

这是 processUserRemove.php 代码

```
<?php
require_once( './connections/login.php' );
require_once( 'login_functions.php' );
sec_session_start(); // Our custom secure way of starting a php session. 

if(isset($_POST['fname'], $_POST['lname'], $_POST['email'], $_POST['role'], $_POST['id'],             $_POST['orgid'])) {
//////////////////////////////////////////////////////////////////////
//TODO: get the associated business ID from the current user
//////////////////////////////////////////////////////////////////////
$RUfirstname = $_POST['fname'];
$RUlastname = $_POST['lname'];
$RUemail = $_POST['email'];
$RUrole = $_POST['role'];
$RUid = $_POST['id'];
$RUorgid = $_POST['orgid'];
$RU_currentuser_orgid = $_SESSION['organizationid'];
$del_stmt = $mysqli_login->init();
if ($RU_currentuser_orgid == $RUorgid) {
    if ($del_stmt = $mysqli_login->prepare("DELETE FROM login WHERE firstname = ? and lastname = ? and email = ? and role = ? and organizationid = ? and id = ?")) {    
       $del_stmt->bind_param('ssssss', $RUfirstname, $RUlastname, $RUemail, $RUrole, $RUorgid, $RUid); 
       // Execute the prepared query.
       $del_stmt->execute();
       header('Location: ../index.html'); 
    } else {
        // Registration Failed
        header('Location: ../users.html?del_error=1');
    }
} else {
  //  orgainization id's don't match
  header("Location: ../users.html?del_error=2_firstname=" . $RUfirstname . "_lastname=" . $RUlastname  . 
        "_email=" . $RUemail . "_role=" . $RUrole . "_organizationid=" . $RUorgid . "_id=" . $RUid . "_cuid=" . $RU_currentuser_orgid); 
}
} else { 
// The correct POST variables were not sent to this page.
header('Location: ../users.html?del_error=3'); 
}
?> 
```

但是在button -> modal -> php -> users.html的整个过程中，users.html页面从不刷新。删除表格条目是可行的，但是当用户与表格交互时，删除的数据又回来了，并且 document.location.reload(true) 将我从系统中注销？！？

对不起所有的代码，但我想非常清楚我是如何遗漏了什么，或者我做了多么复杂的操作，这应该是一个简单的操作。

非常感谢任何帮助，谢谢。

# search - 如何在 Erlang 的大列表中找到“最近”的值

> ID：12305569
> 
> 赞同：1
> 
> 时间：2012-09-06T17:43:01.367
> 
> 标签：search, erlang, binary-search

假设我有大量整数（比如 50,000,000 个）。

我想编写一个函数，它返回集合中不超过作为参数传递给函数的值的最大整数。例如，如果值是：

```
 Values = [ 10, 20, 30, 40, 50, 60] 
```

然后`find(Values, 25)`应该返回 20。

该函数将在一秒钟内被调用多次，并且集合很大。假设蛮力搜索的性能太慢，什么是有效的方法呢？整数很少会改变，因此它们可以存储在可以提供最快访问的数据结构中。

我看过 gb_trees 但我认为您无法获得“插入点”然后获得上一个条目。

我意识到我可以通过构建自己的树结构或二进制切分排序数组来从头开始做到这一点，但是有一些我忽略的内置方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T23:23:46.463

要在大型未排序列表中找到最接近的值，我建议您使用**分而治**之策略 - 并**并行处理列表的不同部分**。但是列表的足够**小部分可能会被顺序处理**。

这是给你的代码：

```
-module( finder ).
-export( [ nearest/2 ] ).

-define( THRESHOLD, 1000 ).

%%
%% sequential finding of nearest value
%%
%% if nearest value doesn't exists - return null
%%
nearest( Val, List ) when length(List) =< ?THRESHOLD ->
        lists:foldl(
                fun
                ( X, null ) when X < Val ->
                        X;
                ( _X, null ) ->
                        null;
                ( X, Nearest ) when X < Val, X > Nearest ->
                        X;
                ( _X, Nearest ) ->
                        Nearest
                end,
                null,
                List );
%%
%% split large lists and process each part in parallel
%%
nearest( Val, List ) ->
        { Left, Right } = lists:split( length(List) div 2, List ),
        Ref1 = spawn_nearest( Val, Left ),
        Ref2 = spawn_nearest( Val, Right ),
        Nearest1 = receive_nearest( Ref1 ),
        Nearest2 = receive_nearest( Ref2 ),
        %%
        %% compare nearest values from each part
        %%
        case { Nearest1, Nearest2 } of
                { null, null } ->
                        null;
                { null, Nearest2 } ->
                        Nearest2;
                { Nearest1, null } ->
                        Nearest1;
                { Nearest1, Nearest2 } when Nearest2 > Nearest1 ->
                        Nearest2;
                { Nearest1, Nearest2 } when Nearest2 =< Nearest1 ->
                        Nearest1
        end.

spawn_nearest( Val, List ) ->
        Ref = make_ref(),
        SelfPid = self(),
        spawn(
                fun() ->
                        SelfPid ! { Ref, nearest( Val, List ) }
                end ),
        Ref.

receive_nearest( Ref ) ->
        receive
                { Ref, Nearest } -> Nearest
        end. 
```

![在此处输入图像描述](../Images/5f9885c94af2d70b1964eebc49d39035.png)

在 shell 中测试：

```
1> c(finder).
{ok,finder}
2> 
2> List = [ random:uniform(1000) || _X <- lists:seq(1,100000) ].
[444,724,946,502,312,598,916,667,478,597,143,210,698,160,
 559,215,458,422,6,563,476,401,310,59,579,990,331,184,203|...]
3> 
3> finder:nearest( 500, List ).
499
4>
4> finder:nearest( -100, lists:seq(1,100000) ).
null
5> 
5> finder:nearest( 40000, lists:seq(1,100000) ).
39999
6> 
6> finder:nearest( 4000000, lists:seq(1,100000) ).
100000 
```

**性能：（**单节点）

```
7> 
7> timer:tc( finder, nearest, [ 40000, lists:seq(1,10000) ] ). 
{3434,10000}
8> 
8> timer:tc( finder, nearest, [ 40000, lists:seq(1,100000) ] ).
{21736,39999}
9>
9> timer:tc( finder, nearest, [ 40000, lists:seq(1,1000000) ] ).
{314399,39999} 
```

与普通迭代相比：

```
1> 
1> timer:tc( lists, foldl, [ fun(_X, Acc) -> Acc end, null, lists:seq(1,10000) ] ).
{14994,null}
2> 
2> timer:tc( lists, foldl, [ fun(_X, Acc) -> Acc end, null, lists:seq(1,100000) ] ).
{141951,null}
3>
3> timer:tc( lists, foldl, [ fun(_X, Acc) -> Acc end, null, lists:seq(1,1000000) ] ).
{1374426,null} 
```

所以，你可能会看到，在具有**1000000 个**元素的列表上，**函数**`finder:nearest`比使用.**`lists:foldl`**

 **`THRESHOLD`您可能会在您的情况下找到最佳值。

**如果在不同节点上生成进程，您也可以提高性能。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T08:36:14.947

这是另一个使用 ets 的代码示例。我相信会在大约恒定的时间内进行查找：

```
1> ets:new(tab,[named_table, ordered_set, public]).
2> lists:foreach(fun(N) -> ets:insert(tab,{N,[]}) end, lists:seq(1,50000000)).
3> timer:tc(fun() -> ets:prev(tab, 500000) end).
{21,499999}
4> timer:tc(fun() -> ets:prev(tab, 41230000) end).
{26,41229999} 
```

周围的代码当然会比这多一点，但它相当整洁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T21:37:50.350

因此，如果输入未排序，您可以通过执行以下操作获得线性版本：

```
closest(Target, [Hd | Tl ]) ->
        closest(Target, Tl, Hd).

closest(_Target, [], Best) -> Best;
closest(Target, [ Target | _ ], _) -> Target;
closest(Target, [ N | Rest ], Best) ->
    CurEps = erlang:abs(Target - Best),
    NewEps = erlang:abs(Target -  N),
    if NewEps < CurEps ->
            closest(Target, Rest, N);
       true ->
            closest(Target, Rest, Best)
    end. 
```

如果对输入进行排序，您应该能够做得更好。

我在这里发明了自己的“最接近”指标，因为我允许最接近的值高于目标值——如果你愿意，你可以将其更改为“最接近但不大于”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T22:32:59.827

在我看来，如果你有大量不经常变化的数据，你应该考虑组织它。我写了一个基于有序列表的简单的，包括插入和删除功能。它为插入和搜索提供了良好的结果。

```
-module(finder).

-export([test/1,find/2,insert/2,remove/2,new/0]).

-compile(export_all).

new() -> [].

insert(V,L) -> 
    {R,P} = locate(V,L,undefined,-1),
    insert(V,R,P,L).

find(V,L) -> 
    locate(V,L,undefined,-1).

remove(V,L) ->  
    {R,P} = locate(V,L,undefined,-1),
    remove(V,R,P,L).

test(Max) -> 
    {A,B,C} = erlang:now(),
    random:seed(A,B,C),
    L = lists:seq(0,100*Max,100),
    S = random:uniform(100000000),
    I = random:uniform(100000000),
    io:format("start insert at ~p~n",[erlang:now()]),
    L1 = insert(I,L),
    io:format("start find at ~p~n",[erlang:now()]),
    R = find(S,L1),
    io:format("end at ~p~n result is ~p~n",[erlang:now(),R]).

remove(_,_,-1,L) -> L;
remove(V,V,P,L) ->
    {L1,[V|L2]} = lists:split(P,L),
    L1 ++ L2;
remove(_,_,_,L) ->L.

insert(V,V,_,L) -> L;
insert(V,_,-1,L) -> [V|L];
insert(V,_,P,L) ->
    {L1,L2} = lists:split(P+1,L),
    L1 ++ [V] ++ L2.

locate(_,[],R,P) -> {R,P};
locate (V,L,R,P) -> 
    %% io:format("locate, value = ~p, liste = ~p, current result = ~p, current pos = ~p~n",[V,L,R,P]),
    {L1,[M|L2]} = lists:split(Le1 = (length(L) div 2), L),
    locate(V,R,P,Le1+1,L1,M,L2).

locate(V,_,P,Le,_,V,_) -> {V,P+Le};
locate(V,_,P,Le,_,M,L2) when V > M -> locate(V,L2,M,P+Le);
locate(V,R,P,_,L1,_,_) -> locate(V,L1,R,P). 
```

给出以下结果

> (exec@WXFRB1824L)6> finder:test(10000000)。
> 
> 从 {1347,28177,618000} 开始插入
> 
> 从 {1347,28178,322000} 开始查找
> 
> 结束于 {1347,28178,728000}
> 
> 结果是 {72983500,729836}

在 10 000 000 个元素的列表中插入一个新值需要 704 毫秒，在同一个列表中找到最接近的值需要 406 毫秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T04:45:42.917

我试图获得关于我上面提出的算法性能的更准确信息，阅读了 Stemm 非常有趣的解决方案，我决定使用 tc:timer/3 函数。大骗局:o)。在我的笔记本电脑上，我的时间准确性非常差。所以我决定留下我的 corei5（2 核 * 2 线程）+ 2Gb DDR3 + windows XP 32bit 来使用我的家用电脑：Phantom（6 核）+ 8Gb + Linux 64bit。

现在 tc:timer 按预期工作，我能够操作 100 000 000 个整数的列表。我能够看到我在每一步调用 length 函数都浪费了很多时间，所以我稍微重构了代码以避免它：

```
-module(finder).

-export([test/2,find/2,insert/2,remove/2,new/0]).

%% interface

new() -> {0,[]}.

insert(V,{S,L}) -> 
    {R,P} = locate(V,L,S,undefined,-1),
    insert(V,R,P,L,S).

find(V,{S,L}) -> 
    locate(V,L,S,undefined,-1).

remove(V,{S,L}) ->  
    {R,P} = locate(V,L,S,undefined,-1),
    remove(V,R,P,L,S).

remove(_,_,-1,L,S) -> {S,L};
remove(V,V,P,L,S) ->
    {L1,[V|L2]} = lists:split(P,L),
    {S-1,L1 ++ L2};
remove(_,_,_,L,S) ->{S,L}.

%% local

insert(V,V,_,L,S) -> {S,L};
insert(V,_,-1,L,S) -> {S+1,[V|L]};
insert(V,_,P,L,S) ->
    {L1,L2} = lists:split(P+1,L),
    {S+1,L1 ++ [V] ++ L2}.

locate(_,[],_,R,P) -> {R,P};
locate (V,L,S,R,P) -> 
    S1 = S div 2,
    S2 = S - S1 -1,
    {L1,[M|L2]} = lists:split(S1, L),
    locate(V,R,P,S1+1,L1,S1,M,L2,S2).

locate(V,_,P,Le,_,_,V,_,_) -> {V,P+Le};
locate(V,_,P,Le,_,_,M,L2,S2) when V > M -> locate(V,L2,S2,M,P+Le);
locate(V,R,P,_,L1,S1,_,_,_) -> locate(V,L1,S1,R,P).

%% test

test(Max,Iter) -> 
    {A,B,C} = erlang:now(),
    random:seed(A,B,C),
    L = {Max+1,lists:seq(0,100*Max,100)},
    Ins = test_insert(L,Iter,[]),
    io:format("insert:~n~s~n",[stat(Ins,Iter)]),
    Fin = test_find(L,Iter,[]),
    io:format("find:~n ~s~n",[stat(Fin,Iter)]).

test_insert(_L,0,Res) -> Res;
test_insert(L,I,Res) ->
    V = random:uniform(1000000000),
    {T,_} = timer:tc(finder,insert,[V,L]),
    test_insert(L,I-1,[T|Res]).

test_find(_L,0,Res) -> Res;
test_find(L,I,Res) ->
    V = random:uniform(1000000000),
    {T,_} = timer:tc(finder,find,[V,L]),
    test_find(L,I-1,[T|Res]).

stat(L,N) ->
    Aver = lists:sum(L)/N,
    {Min,Max,Var} = lists:foldl(fun (X,{Mi,Ma,Va}) -> {min(X,Mi),max(X,Ma),Va+(X-Aver)*(X-Aver)} end, {999999999999999999999999999,0,0}, L),
    Sig = math:sqrt(Var/N),
    io_lib:format("   average: ~p,~n   minimum: ~p,~n   maximum: ~p,~n   sigma   : ~p.~n",[Aver,Min,Max,Sig]). 
```

以下是一些结果。

> 1> 查找器：测试（1000,10）。插入：
> 
> 平均：266.7，
> 
> 最低：216，
> 
> 最大：324，
> 
> 西格玛：36.98121144581393。
> 
> 寻找：
> 
> ```
> average: 136.1, 
> ```
> 
> 最低：105，
> 
> 最大：162，
> 
> 西格玛：15.378231367748375。
> 
> 行
> 
> 2> 查找器：测试（100000,10）。
> 
> 插入：
> 
> 平均：10096.5，
> 
> 最低：9541，
> 
> 最大值：12222，
> 
> 西格玛：762.5642595873478。
> 
> 寻找：
> 
> ```
> average: 5077.4, 
> ```
> 
> 最低：4666，
> 
> 最大值：6937，
> 
> 西格玛：627.126494417195。
> 
> 行
> 
> 3> 查找器：测试（1000000,10）。
> 
> 插入：
> 
> 平均：109871.1，
> 
> 最低：94747，
> 
> 最大值：139916，
> 
> 西格玛：13852.211285206417。
> 
> 发现：平均：40428.0，
> 
> 最低：31297，
> 
> 最大值：56965，
> 
> 西格玛：7797.425562325042。
> 
> 行
> 
> 4> 查找器：测试（100000000,10）。
> 
> 插入：
> 
> 平均：8067547.8，
> 
> 最低：6265625，
> 
> 最大值：16590349，
> 
> 西格玛：3199868.809140206。
> 
> 寻找：
> 
> ```
> average: 8484876.4, 
> ```
> 
> 最低：5158504，
> 
> 最大值：15950944，
> 
> 西格玛：4044848.707872872。
> 
> 行

在 100 000 000 列表上，它很慢，并且多进程解决方案无法帮助解决这种二分法算法......这是该解决方案的一个弱点，但如果您有多个进程并行请求找到最接近的值，它无论如何都可以使用多核。

帕斯卡。**

# html - 显示帮助文件的推荐方式是什么？

> ID：12305575
> 
> 赞同：4
> 
> 时间：2012-09-06T17:43:30.083
> 
> 标签：html, .net, chm, helpfile

当我启动程序的帮助时，我似乎不再知道会发生什么。当必须决定如何为我的应用程序创建帮助文件时，这让一切变得更加混乱。

例如，它可能会打开我的 Web 浏览器以访问 html 文件的本地实例。它可能指向一个网络托管的帮助网站。它可以加载 Windows 帮助和支持中心。它可能会加载一个 chm 文件。它可以加载带有菜单等的自定义帮助表单。

实施帮助的“正确”方式是什么？

我喜欢 chm 文件的想法，但它让我很难在不更新应用程序的情况下向用户推送任何更新。对于基于本地 html 的帮助文件也可以这样说。

我也喜欢创建一个网络托管帮助文件的想法，因为我可以根据需要使用新信息对其进行更新，但这对于没有有效 Internet 连接的用户意味着什么？例如（在我的情况下，我的软件将同样用于没有互联网连接的车载笔记本电脑和有互联网连接的台式电脑）

我很想知道创建帮助文件时通常会做什么，以及使用哪些创作工具（如果有的话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:50:46.757

我用于移动应用程序的一个解决方案是拥有一个本地 html 帮助文件，应用程序在 Web 视图中呈现帮助内容。然后，我们有一个后台机制来检查服务以获取帮助更新，并酌情下载更新的 HTML 和其他静态内容。这样，您始终拥有一个不需要连接的本地 HTML 文件，并且可以快速呈现（因为查看时无需下载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:16:17.227

最巧妙的方法是提供一个 Compiled HTML (CHM) 帮助文件。

有许多免费和付费的应用程序可以帮助创建文档。您可以尝试[Rahman CHM Maker](http://www.softpedia.com/get/Office-tools/Other-Office-Tools/Rahman-CHM-Maker.shtml)或[KEL CHM Creator](http://dumah7.wordpress.com/2009/02/17/kel-chm-creator-v-1-3-3-0/)。

# android - ActionBarSherlock - 不确定的进度

> ID：12305578
> 
> 赞同：1
> 
> 时间：2012-09-06T17:43:41.987
> 
> 标签：android, android-actionbar

很明显，要显示/隐藏不确定的进度，您必须使用此方法：

```
itemMenu.setActionView(...); 
```

所以：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_refresh:
            item.setActionView(R.layout.indeterminate_progress_action);
            runAsyncTask();
    ...
    }
} 
```

我不清楚的是：如何将动作视图设置回 null。我不想保留对 MenuItem 的引用，我认为这是不正确的，因为我不想假设有关 OptionsMenu 生命周期的任何事情。

我应该如何在 onPostExecute 上将操作视图设置为空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:59:42.250

我这样做：

```
refresh = false; // the future state of your indeterminate progress
invalidateOptionsMenu(); // trigger the recreation of the menu and call onCreateOptionsMenu(Menu) 
```

然后在您的 onCreateOptionsMenu(Menu) 方法中：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    super.onCreateOptionsMenu(menu, inflater);

    MenuItem refreshItem = menu.add(Menu.NONE, R.id.action_bar_refresh, 1, "Refresh");
    refreshItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    if(refresh)
        refreshItem.setActionView(R.layout.indeterminate_progress_action);
    else
        refreshItem.setIcon(R.drawable.ic_menu_refresh);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:15:17.310

怎么样[`invalidateOptionsMenu()`](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)？那么，您`onCreateOptionsMenu()`可能总是将其设置为`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:16:07.727

我相信你可以调用`setActionView(null)`那个 MenuItem

然后刷新 ActionBar`invalidateOptionsMenu()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T09:16:29.553

如果您不想这样做，则无需操作特定的菜单项。

I use a different approach that leverages off the system's indeterminate progress bar functionality (as ported to ActionBarSherlock). I explain it here to offer more options to future readers to use whichever way works best for them.

* * *

My base fragment has a method I call to turn my loading UI on & off. Here is a trimmed down version:

```
private void setLoading(final boolean isLoading)
{
    final SherlockFragmentActivity sherlockActivity = getSherlockActivity();
    sherlockActivity.runOnUiThread(new Runnable()
    {
        public void run()
        {
            // show loading progress bar
            sherlockActivity
                .setSupportProgressBarIndeterminateVisibility(isLoading);

            // hide the rest of the menu
            setMenuVisibility(!isLoading);
        }
    });
} 
```

* * *

For this to work, your activity must be configured to use the correct style - call this from your `SherlockFragmentActivity.onCreate()` method:

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS); 
```

* * *

The final trick is that on pre-HoneyComb devices, this causes the progress bar to show immediately by default (instead of being hidden by default from HC & above).

*   you must set it to be invisible
*   you must also create a Sherlock Action Bar instance before this code will work

The `onCreate()` thus becomes:

```
protected void onCreate(Bundle arg0)
{
    super.onCreate(arg0);

    // allow window to show progress spinner in the action bar
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    getSupportActionBar();
    setSupportProgressBarIndeterminateVisibility(false); 
} 
```

* * *

For more details on this you can check my answer to

*   [Intermediate Progress doesn't work with ActionBarSherlock running on Gingerbread (here).](https://stackoverflow.com/a/13247023/383414)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-01T22:53:19.473

If you don't want to keep a reference to the menu item, then you can simply keep a reference to the Menu object instead. A reference to the Menu is guaranteed to remain valid until the next time `onCreateOptionsMenu()` is called as mentioned in the docs ([http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu(android.view.Menu)](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29)).

Then call:

```
MenuItem menuItem = mMenu.findItem(R.id.favourite_payment);
menuItem.setActionView(null); 
```

Or alternatively if using AppCompat:

```
MenuItem menuItem = mMenu.findItem(R.id.favourite_payment);
MenuItemCompat.setActionView(menuItem, null); 
```

There is no need to call `invalidateOptionsMenu()`.

# c - C中的浮点值混淆

> ID：12305588
> 
> 赞同：3
> 
> 时间：2012-09-06T17:44:13.393
> 
> 标签：c, floating-point, floating-point-conversion

我的代码是

```
void main()
{
    float a = 0.7;
    if (a < 0.7)
        printf("c");
    else
        printf("c++");
} 
```

它打印出来`C`，这很好，`a`被视为双常量值，它的值将`0.699999`小于`0.7`.

现在，如果我将值更改为`0.1,0.2,0.3`until `0.9`in`a`和 at`if condition`然后它会打印`C++`，除此之外`0.7 and 0.9`意味着两者相等或 a 更大。

为什么这个概念不考虑所有价值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T17:47:02.920

你在说什么“概念”？

您提到的数字都不能以二进制浮点格式精确表示（无论精度如何）。您提到的所有数字最终在点之后都有*无限*数量的二进制数字。

由于既没有`float`也`double`没有无限的精度，在`float`和格式中，实现*将近似地*`double`表示这些值，最有可能通过最接近的可表示二进制浮点值。对于和 ，这些近似值会有所不同。并且近似值最终可能会大于或小于近似值。因此，您观察到的结果。*`float``double``float``double`*

 *例如在我的实现中， 的值`0.7`表示为

```
+6.9999998807907104e-0001 - float
+6.9999999999999995e-0001 - double 
```

同时 的值`0.1`表示为

```
+1.0000000149011611e-0001 - float
+1.0000000000000000e-0001 - double 
```

As you can see, `double` representation is greater than `float` representation in the first example, while in the second example it is the other way around. (The above are decimal notations, which are rounded by themselves, but they do have enough precision to illustrate the effect well enough.)*

# php - 把我的头绕在我认为是一个复杂的 MySQL 查询上

> ID：12305589
> 
> 赞同：1
> 
> 时间：2012-09-06T17:44:20.107
> 
> 标签：php, mysql

我有一个名为的表`categories`和一个名为 的表`business_categories_coupling`。在类别中，您有通常的`id`, `name`, `parent`。在耦合表中，您有`business_id`和`category_id`。每个企业可以有多个类别，所以我将它们存储在该表中。它看起来像这样：

```
business_id    category_id
73             80
73             81
73             90
74             4
74             10 
```

现在，我的查询只是选择所有类别，在每个循环中执行一次 foreach 和一次 db 查询，以查找该类别中有多少企业。显然不是正确的方法。

有没有办法做一个基本上选择所有类别的 SQL 查询，获取它在耦合表中出现的次数，并为每个类别添加一个计数？

```
SELECT
    C.*
FROM
    CATEGORIES AS C
LEFT JOIN
    BUSINESS_CATEGORIES_COUPLING AS B
ON
    C.id = B.category_id; 
```

有点像那样，但在某个地方有一个计数。我尝试了各种设置，但没有像我想要的那样工作。有什么建议么？

**编辑 1**

@phani-rahul 提供的解决方案，但我添加了 WHERE 子句：

```
SELECT cat.id AS id, cat.name AS name, cat.slug AS slug, COUNT(cat.id) AS business_count
FROM categories AS cat
LEFT JOIN business_categories_coupling AS coupling ON cat.id=coupling.category_id
WHERE coupling.category_id IS NOT NULL
GROUP BY cat.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:50:27.263

就在这里。您可以使用`Group by`子句：

```
select a.id as category, count(a.id) as count_of_category
from categories a
left join business_categories_coupling b on a.id=b.category_id
group by a.id 
```

你的结果会是这样的：

```
category   count_of_category
80          2
81          5
90          1
.           .
.           .
.           . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:47:01.773

您还需要按 C 表的字段进行 GROUP。

```
SELECT C.id, C.field1, C.field2, COUNT(*)
    FROM CATEGORIES AS C
    LEFT JOIN BUSINESS_CATEGORIES_COUPLING AS B
ON (C.id = B.category_id)
GROUP BY C.id, C.field1, ... 
```

（在 MySQL 中，您可以`GROUP BY`单值 C.id；在其他 SQL 方言中，您可以通过“C.*”分组来表达“按 C 表的行分组”的概念；在其他一些中，您需要指定所有非聚合查询的列，在这种情况下，您从 C 中选择的所有列，一一对应）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:47:23.200

您正在寻找的是一个 GROUP BY 子句。

```
SELECT
   C.*, count(C.id)
FROM
   CATEGORIES AS C
LEFT JOIN
   BUSINESS_CATEGORIES_COUPLING AS B
ON
    C.id = B.category_id
 GROUP BY B.category_id; 
```

# c# - 需要帮助才能使单元测试正常工作

> ID：12305591
> 
> 赞同：0
> 
> 时间：2012-09-06T17:44:20.757
> 
> 标签：c#, xml, web-services, web, xml-serialization

我有一个魔鬼的时间让这个工作......

下面是我们的 Web 服务使用的复杂类型的示例。传递的其他重载/参数是原语、日期时间等。我有一些单元测试方法，它们对我在签入新代码时运行的对象进行一对一的比较，并且那些通过就好了。我现在需要做的是实现（可能是一个类？）捕获传递的 XML 的东西是响应，因此我可以将它与请求中发送的内容进行比较。此外，我需要建立更改我传递的数据的能力（以测试负面案例/不良数据），而我完全不知道这样做。任何和所有帮助将不胜感激，我很乐意应要求提供更多代码。

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Name="CrossReferenceCredentials", Namespace="http://www.pse.com/Namespaces/PSE.PSECom.InterfaceWebServices.Customer")]
[System.SerializableAttribute()]
public partial class CrossReferenceCredentials : object, System.Runtime.Serialization.IExtensibleDataObject, System.ComponentModel.INotifyPropertyChanged {

    [System.NonSerializedAttribute()]
    private System.Runtime.Serialization.ExtensionDataObject extensionDataField;

    private string CustomerTokenField;

    private string SecurityIdField;

    private string UserNameField;

    [global::System.ComponentModel.BrowsableAttribute(false)]
    public System.Runtime.Serialization.ExtensionDataObject ExtensionData {
        get {
            return this.extensionDataField;
        }
        set {
            this.extensionDataField = value;
        }
    }

    [System.Runtime.Serialization.DataMemberAttribute(IsRequired=true)]
    public string CustomerToken {
        get {
            return this.CustomerTokenField;
        }
        set {
            if ((object.ReferenceEquals(this.CustomerTokenField, value) != true)) {
                this.CustomerTokenField = value;
                this.RaisePropertyChanged("CustomerToken");
            }
        }
    }

    [System.Runtime.Serialization.DataMemberAttribute(IsRequired=true)]
    public string SecurityId {
        get {
            return this.SecurityIdField;
        }
        set {
            if ((object.ReferenceEquals(this.SecurityIdField, value) != true)) {
                this.SecurityIdField = value;
                this.RaisePropertyChanged("SecurityId");
            }
        }
    }

    [System.Runtime.Serialization.DataMemberAttribute(IsRequired=true)]
    public string UserName {
        get {
            return this.UserNameField;
        }
        set {
            if ((object.ReferenceEquals(this.UserNameField, value) != true)) {
                this.UserNameField = value;
                this.RaisePropertyChanged("UserName");
            }
        }
    }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName) {
        System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
        if ((propertyChanged != null)) {
            propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T17:41:41.810

我能够回答我自己的问题，实际上最终走的是一条完全不同的路线。我们购买了完整版的 SoapUI，并用它来进行大部分功能和单元测试。

# css - 当 * 定义为边框时添加表格边框：0

> ID：12305592
> 
> 赞同：1
> 
> 时间：2012-09-06T17:44:21.650
> 
> 标签：css

当我已经在 css 中有规则时，向 html 表格添加边框的最佳方法是什么

```
*{border:0;} 
```

如果我添加 style="border:1px;" 进入表格然后我只得到一个围绕整个表格而不是每个单元格的边框，这是我使用时应该拥有的：

```
<table border="1" cellspacing="0" cellpadding="0"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:47:25.893

```
table
{
border-collapse:collapse;
}
table, td, th
{
border:1px solid black;
} 
```

[**例子**](http://jsfiddle.net/zKCHB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:51:48.450

您不应使用该 HTML，因为它无效。使用以下 CSS：

```
table {
border: 1px;
border-collapse: collapse;
}

table td, table th {
border: 1px;
padding: 0px;
} 
```

`border-collapse`on`collapse`使单元格的边界单一。这相当于 HTML 单元格间距。确保在`table`和`td`上设置边框`th`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:49:44.073

您还需要在单元格上设置边框。也许你应该为这个表设置一个 CSS 类。

```
table.bordered
{
border-collapse:collapse;
}
table.bordered > td
{
border: 1px solid black;
} 
```

然后你会使用`<table class="bordered">`

编辑：其他答案假设您希望所有表都这样做。我认为没有理由得出这个结论。

# chef-infra - 更改厨师食谱/食谱以使用不同的操作系统

> ID：12305598
> 
> 赞同：1
> 
> 时间：2012-09-06T17:45:09.903
> 
> 标签：chef-infra, vagrant, chef-recipe

我对 Vagrant 和 Chef 很陌生，想使用 Scienfitic Linux 设置一个 VM。我发现的大多数食谱（即 Nodejs 或 Mongodb）都受 Ubuntu 支持，但不支持 SL。有没有一种直接的方法可以让这些已经存在的食谱与 SL 而不仅仅是 Ubuntu 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:10:12.003

第一步是检查说明书底部的“metadata.rb”文件。您很可能会看到类似于以下内容的行（此片段来自我的[twitter](http://bit.ly/cheftwit)食谱）：

```
%w{ centos redhat fedora ubuntu debian arch windows }.each do |os|
  supports os
end 
```

简而言之，您希望看到列出的操作系统（取决于 ohai 的名称）。我的猜测是 SL 会显示为“arch”。只需将您想要尝试的说明书应用到您的节点并查看日志以查找故障。您当然需要进行一些小的修改；但是，它们很可能仅限于目录结构或二进制名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:51:32.990

[这里的](http://wiki.opscode.com/display/chef/Fast+Start+Guide)官方厨师页面说：

Chef 在许多流行的 Unix 和 Linux 平台以及 Max OSX 和 Windows 上运行。这些安装说明适用于以下任何操作系统：Ubuntu、Debian、Red Hat Enterprise Linux、Fedora、CentOS、Oracle、Scientific Linux 和 OS X。

并且：

为了尽可能快地做到这一点，我们做了一些假设。如果您的系统不满足这些假设，您将需要使用适用于您正在安装的 Chef 的“风格”的安装说明。

而且

[这里的](https://github.com/edelight/chef-mongodb)MongoDB 厨师食谱说：

平台：

该说明书旨在独立于平台，但最好在 debian 挤压系统上进行测试。

10gen_repo 配方将包管理器配置为在 Debian、Ubuntu、Redhat、CentOS、Fedora 和 Amazon linux 发行版上使用 10gen 的官方包存储库。

所以基本上，它也应该在 SL 上工作，恕我直言，稍作调整。我不太了解 SL，但您是否面临任何错误/问题？如果您可以发布您尝试过的内容以及有效/无效的内容，我们可以更好地解决！

# visual-c++ - 为什么这些论点无效？

> ID：12305603
> 
> 赞同：0
> 
> 时间：2012-09-06T17:45:29.277
> 
> 标签：visual-c++, mfc

```
//Block.h
#pragma once
class Block
{
 public:
    CRect pos;
    int num;

 public:
    Block(void);
   ~Block(void);
}; 
```

* * *

```
 //view class
  public:
  Block currentState[5];       // stores the current state of the blocks 
```

* * *

```
 void CpuzzleView::OnDraw(CDC* pDC)
{

 CpuzzleDoc* pDoc = GetDocument();
 ASSERT_VALID(pDoc);
 if (!pDoc)
    return;

//draw the 4 blocks and put text into them
for(int i=0;i<4;i++)
{
    pDC->Rectangle(currentState[i].pos);
            // i'm getting an error for this line:
    pDC->TextOut(currentState[i].pos.CenterPoint(), currentState[i].num);    
}

    pDC->TextOut(currentState[i].pos.CenterPoint(), currentState[i].num); 
```

该错误表明没有重载函数 CDC::TextOutW() 的实例与参数 list 匹配。但该函数的原型是：

```
 CDC::TextOutW(int x, int y, const CString &str ) 
```

我所做的只是我直接给出了 CenterPoint() 返回的点对象，而不是 2 点……它不应该工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:54:16.223

那是因为您没有正确提供参数列表。请仔细阅读编译器错误信息，它通常有助于解决问题。

```
TextOut(currentState[i].pos.CenterPoint(), currentState[i].num); 
```

在此调用中，您传递了`CPoint`object 和`int`. 这是不正确的，您需要传递`int`,`int`和`CString`（或`const char*`和`int`长度）。

要解决此问题，您应执行以下操作：

```
CString strState;
strState.Format("%d", currentState[i].num); // Or use atoi()/wtoi() functions
TextOut(currentState[i].pos.CenterPoint().x, currentState[i].pos.CenterPoint().x, strState); 
```

# google-app-engine - 谷歌应用引擎的 app.yaml url 配置

> ID：12305608
> 
> 赞同：1
> 
> 时间：2012-09-06T17:45:49.893
> 
> 标签：google-app-engine

我对 GAE 比较陌生，并且在理解 URL 映射时遇到了一些困难。

我有一组静态数据（HTML 模板、登录表单、js 等）和一个动态部分。

我当前的 app.yaml 如下：

```
handlers:
- url: /.*
  static_dir: /static
- url: /service/.*
  script: _go_app
  login: required 
```

这里的想法是`http://myapp/service/foo`路由到应用程序，并且其他任何东西都`http://myapp/foo.html`应该服务`/static/foo.html`。但是，我在静态请求中收到 404 错误。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:59:16.227

根据[文件](https://developers.google.com/appengine/docs/python/config/appconfig#Static_Directory_Handlers)，

> url：URL 前缀。此值使用正则表达式语法（因此必须对正则表达式特殊字符进行转义），但不应包含分组。以该前缀开头的所有 URL 都由该处理程序处理，使用前缀之后的 URL 部分作为文件路径的一部分。

在您的情况下，由于您指定`url: /.*`，前缀将为`foo.html`，并且要获取的文件将具有空文件名。

此外，处理程序是从上到下评估的，因此您需要更改顺序。

```
handlers:
- url: /service/.*
  script: _go_app
  login: required
- url: /
  static_dir: static 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:52:47.810

顺序很重要，因此您的 /service/ 处理程序可能永远不会被调用，除非您将其移动到静态处理程序之上。此外，404 是由静态声明中的不正确语法引起的。将您的处理程序更改为：

```
handlers:
- url: /service/.*
  script: _go_app
  login: required
- url: /
  static_dir: static 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T17:47:42.993

static_dir 指令按与给定正则表达式匹配的前缀后的名称提供文件。如果 RE 以 结尾`.*`，则整个 URL 将被视为前缀，因此不会有任何剩余可用作文件路径。

试试`url: /`吧。

此外，处理程序按顺序匹配。

正则表达式`/.*`匹配您可以接收请求的所有 URL，因此它之后的任何内容都不会匹配。放在最后。

# android - 如何在不按保存按钮的情况下在 Android 手机上拍摄和保存照片？

> ID：12305609
> 
> 赞同：0
> 
> 时间：2012-09-06T17:45:49.897
> 
> 标签：android, android-camera

我正在为视障人士开发一个android应用程序，如果我可以在拍照后不按保存按钮自动拍照并保存照片，对他们来说将非常方便。我正在寻找来自 android 开发者网站的 API，但我没有找到任何对我有帮助的 API。任何人对如何实现这一目标有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:50:53.947

您需要使用相机对象实现自己的相机活动，并在每次拍摄后处理图像的存储。

默认的相机意图选项非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:08:03.557

您可以添加步骤以将图像保存在`PictureCallBack.onPictureTaken`您自己的相机活动中。

这是一个例子：

```
 @Override
    public void onPictureTaken(byte[] imageData, Camera camera) {
        //Use imageData[] and save wherever you want
        File imagefile = new File(filepath); // set a file path
        FileOutputStream fos = new FileOutputStream(imagefile);
        try {
          fos.write(imageData);
          fos.flush();
        } catch(Exception e) {
           //Something wrong happened
        } finally {
            fos.close();
        }
    } 
```

请记住添加您`AndroidManifest`的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# c++ - 新返回 null；调用对象获得新成员...优化错误？

> ID：12305614
> 
> 赞同：-1
> 
> 时间：2012-09-06T17:46:10.907
> 
> 标签：c++, debugging, visual-c++, compiler-optimization, release-mode

我希望这里有人能理解我认为可能是 MSVC 2010 的错误。

我有这个代码（作为一个更大的项目的一部分）：

```
namespace MyNamespace{

class Foo{
   //snip
   QPointer<MyNamespace::Baz> :: x;
};

class Baz{
   //snip
};

//snip
Foo::Bar(){
   x = new MyNamespace::Baz();
   ThisFunctionWillSegfaultIfXIsNull(x);
   //snip
} 
```

同样，请记住，这是一个更大的项目的一部分，涉及 cmake、qt 和一大堆其他令人兴奋的东西。

我一直在用调试器跟踪这个。当我在调试模式下编译这个项目时，一切都按预期进行。但是，当我将其编译为发布项目时，x 获得的值为 0x0000000000000000。

此外，当在 MSVS 调试器中跟踪它时（仍处于发布模式），会发生一些有趣的事情：

1.  实际上调用了 Baz 的构造函数，并且“this”在 Baz 的构造函数中具有有效的内存位置。

2.  从构造函数返回后（返回`Foo::Bar()`），this（可能是“Foo”）的值现在与 Baz 的构造函数（可能是“Baz”）中的“this”值相同。

3.  Foo 的所有数据似乎都没有丢失，尽管它只是明显地更改了内存地址。

4.  “这个”（作为 Foo）以某种方式神奇地增长了一个 MyNamespace::Baz 类型的新数据成员，其中包含在构造函数期间分配的所有正确数据。

因此，显然编译器优化正在使一些极其神秘的事情发生。同样，这似乎只发生在发布模式下，这让我认为 A) 优化器正在发挥作用，B) 让我很难获得有关实际情况的更多信息。

有没有人见过这个？这里发生了什么？我怎样才能让我的下一个函数停止段错误，因为 X 为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:50:50.187

问题出在其他地方。除了调试器在你身上耍花招（因为它经常在发布模式下发生），**`new`永远不会返回`NULL`**. 如果分配失败，它会抛出一个异常，但它永远不会返回`NULL`。

您可以使用一些调试语句进行检查：

```
if (x)
   std::cout << "x is not NULL"; 
```

# haskell - 如何让我的字符串重复 x 次？

> ID：12305615
> 
> 赞同：2
> 
> 时间：2012-09-06T17:46:22.860
> 
> 标签：haskell

我完全是 Haskell 的菜鸟，我根本无法让我的代码正常工作，而且我不知道如何修复它！我需要帮助 :) 如果有人知道我需要在哪里寻找以解决我的问题，我会非常感谢想法并朝着正确的方向轻推。

我正在尝试创建一种 C# string.Format 类型，它会重复直到列表完成。该列表由用户输入创建，然后我只想重复一个字符串，直到列表完成。

```
 test :: Integer -> String
    let list_n [0..k]
    test k = putStrLn (r * r) | r <- list_n   --My idea here is that i am forcing 
    --the entire list onto r and making it repeated as long as there is more in the
    --list, But im not even sure that is possible :( 
```

有人对如何做到这一点有更好的想法吗？我想要一行而不是一行的所有结果，因此我试图创建迭代，但在 HaskeLL 中，说起来容易做起来难：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:00:40.683

这里有两个建议；一个尝试匹配您发布的代码，另一个尝试匹配您发布的英语。这似乎主要是关于语法的问题，所以我不确定除了“阅读教程”之外还有很多有意义的解释。

```
-- match the code
test :: Int -> String
test k = concat [show (r * r) | r <- [0..k]]

-- match the English
test :: Int -> String -> String
test k s = concat [s | r <- [0..k]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T21:27:07.137

这是更接近命令式风格的东西：

```
import Control.Monad (forM_)

test :: Int -> IO ()
test n = forM_ [0..n] (\i -> putStrLn $ show $ i*i) 
```

这大致翻译为：“对于 [0..n] 中的每个 i，做 ...”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T15:34:01.013

也许您的意思是打印给定的字符串`n`时间，并且您似乎想用每个字符串开始一个换行符，并且您似乎想使用列表理解，这将是

```
test :: Integer -> String -> IO ()
test n xs = sequence_ [putStrLn xs| i<- [1..n]] 
```

但你会扔掉`i`你计算的整数。你最好这样做

```
test n xs = replicateM_ n (putStrLn xs) 
```

这使

```
Main> test 3 "Hello"
Hello
Hello
Hello 
```

也许您打算将数字本身显示为字符串，这将是

```
test n = sequence_ [putStrLn (show i)| i<- [1..n]] 
```

但同样，这样做会更好

```
test n = mapM_ putStrLn (map show [1..n]) 
```

这两个给

```
Main> test 3
1
2
3 
```

但主要是，您需要做的是首先遵循一个好的介绍性文本。我会推荐[Learn You a Haskell for Great Good](http://learnyouahaskell.com/)。

如果您编辑问题以使其更清楚您想要什么，这将有很大帮助。你想要什么输出？

# eclipse - 在 Eclipse 中共享常春藤缓存但单独的分辨率缓存

> ID：12305618
> 
> 赞同：4
> 
> 时间：2012-09-06T17:46:46.167
> 
> 标签：eclipse, ivy, ivyde

在我们的环境中，我们最终会得到多个工作区（runk 加上多个分支）。

我们希望分离我们的分辨率缓存，但共享实际的缓存。

到目前为止，这很容易，但它需要为本地解析缓存名称手动编码标识符（例如，在 ivysettings.local.xml 中），显然这是次优的，并且必须为每个分支手动设置（或工作区，如果我们每个分支有多个工作区）。

我们想做的是使用工作区名称（好像 Eclipse 提供了一个`${workspace_name}`变量），但事实并非如此。我在可用变量列表中没有找到类似的东西，并且在调试器中运行 ivy 时，我们看不到任何保存工作区名称的东西。

我已经查看了这两个问题，但似乎都没有解决这个问题：

[管理冲突的 ivy 存储库（在 Eclipse 中）](https://stackoverflow.com/questions/2460301/managing-conflicting-ivy-repositories-in-eclipse)

[如何覆盖常春藤缓存的位置？](https://stackoverflow.com/questions/1293113/how-to-override-the-location-of-ivys-cache/1293157#1293157)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:51:00.640

结果比我们想象的要容易，但我认为这可能对其他人有所帮助。我们没有通过名称告诉 ivy 解析缓存名称是什么，而是使用相对路径。这来自我们的 ivysettings.local.xml（包含在每个工作区的项目中）显示了我的意思：

结合这个：

```
<property name="ivy.local.resolution.cache" 
    value="${ivy.settings.dir}/../../.ivy/resolution-cache"/> 
```

有了这个：

```
<caches default="local-cache" 
        defaultCacheDir="${ivy.local.cache}" 
        resolutionCacheDir="${ivy.local.resolution.cache}">
    <cache name="local-cache"/>
</caches> 
```

让我们大部分时间到达那里：我们有一个共享的本地缓存和每个工作空间分辨率的缓存。

但这给我们留下了另一个挑战：我们仍然想设置正则`changingPattern`表达式。为此，能够从 eclipse 中获取工作区名称将非常有帮助。

建议将不胜感激。

# cocoa-touch - 我可以将 iOS .strings 文件用于本地化以外的任何内容吗？

> ID：12305622
> 
> 赞同：0
> 
> 时间：2012-09-06T17:46:49.793
> 
> 标签：cocoa-touch, localization

我想将我在应用程序中使用的所有图像放入同一个文件中，并通过密钥访问它们。

是否可以为此使用 .strings 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:05:33.070

**是的**，你可以！我用它来列出我的应用程序中使用的网站 URL。如果网站 URL 发生变化，这使得在应用程序中进行更改变得非常容易。这样做没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:51:59.843

假设您的意思是要放置图像**名称**，是的，这是可能的。

在您的代码中，只需使用类似`[UIImage imageNamed:NSLocalizedString(key, @"")];`

`key`指向图像名称的键在哪里。然后在 .strings 文件中，根据区域设置指向正确的图像文件。

# php - Magento 使用 2nd DB for Media - SQLSTATE [42S02]：未找到基表或视图

> ID：12305623
> 
> 赞同：1
> 
> 时间：2012-09-06T17:46:50.657
> 
> 标签：php, mysql, magento

跨 AWS 上的 7 个服务器的 Magento 4 HTTPD 1 Memcached 1 Main DB 1 Media DB

上传图像工作，在管理员中加载缩略图，然后在保存时导致错误：SQLSTATE[42S02]: Base table or view not found: 1146 Table 'magento.core_file_storage' doesn't exist

我知道桌子在那里。我能看到它。core_file_storage ~471,510 InnoDB utf8_general_ci 2.1 GiB

有任何想法吗？有什么想法可以反弹吗？

- -编辑

SQL错误不再出现，保存成功但图片为空。

---使用 local.xml 调用第二个数据库：

```
 <media_storage>
        <connection>
            <host><![CDATA[127.0.0.1]]></host>
            <username><![CDATA[root]]></username>
            <password><![CDATA[password]]></password>
            <dbname><![CDATA[magento]]></dbname>
            <initStatements><![CDATA[SET NAMES utf8]]></initStatements>
            <model><![CDATA[mysql4]]></model>
            <type><![CDATA[pdo_mysql]]></type>
            <pdoType><![CDATA[]]></pdoType>
            <active>1</active>
        </connection>
    </media_storage> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T23:02:25.403

我遇到了同样的问题，并且（以一种或另一种方式）在主数据库（以及我的媒体数据库）中创建了表。这掩盖了真正的问题（为什么 Magento 在错误的数据库中寻找这些表），但一切似乎都在工作。直到 ...

如果您尝试一次上传多个图像，则只有第一个图像被正确存储。如果您尝试对不同的产品使用相同的文件名，这些也将不起作用。最终，我决定进行一些调试，我发现文件从表中重新加载并调用 setData($row) 以在当前实例上填充它。当它执行此操作时，Magento 会清除连接名称（也存储在数据数组中），在您的情况下，以前称为“media_storage”。

当它试图保存这个模型时它失败了，因为它现在使用了错误的连接并且那些表不存在。如果您已经完成了解决方法并且它们确实存在，那么该功能显然不存在并且您会丢失缩略图。如果您检查您的媒体数据库，您将看到每个文件的行，但只有第一个文件已重命名为“tmp”。

我的解决方案（目前）是将以下方法添加到 Mage/Core/Model/File/Storage/Database/Abstract.php。这确保在 setData 之后它将重置连接名称（如果已填充）。我只是简单地测试了这个，但到目前为止它似乎已经成功了，我遇到的两个问题都已经解决了。

```
/**
 * Ensure that the connection name is retained if the set data is setting the entire row.
 */
public function setData($key, $value=null)
{
    $connectionName = $this->getConnectionName();
    parent::setData($key, $value);
    $this->setConnectionName($connectionName);
    return $this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:18:20.480

如果您将使用文件系统存储，**请确保您的 /media 目录设置为 777 并运行`chmod -R o+w media`**. 如果错误仍然存​​在，解决问题的最干净的方法如下：

1.  转到系统>配置>高级>系统并将“媒体存储配置”切换到“数据库”。单击同步。等待同步过程完成或超时（可能取决于您的设置）。表“core_directory_storage”已创建并填满。单击 SAVE CONFIG（不确定此步骤是否必要，但无论如何都要执行）。
2.  如果同步过程超时，您可能会在 Magento Admin 中看到有关重大错误的通知“同步媒体存储时发生错误。”。没关系，因为在下一步中，我们将恢复到基于文件的媒体存储。
3.  在第 1 步中调整的相同设置中，切换回“文件系统”并再次单击“同步”。单击 SAVE CONFIG（不确定此步骤是否必要，但无论如何都要执行）。
4.  现在转到您的数据库管理器（例如 PHPMyAdmin）并使用 DELETE FROM 删除最近创建的表中的所有行`core_directory_storage`。

您的*表格丢失*错误现在消失了。

# encoding - 在 jboss-web.xml 中设置字符编码

> ID：12305630
> 
> 赞同：2
> 
> 时间：2012-09-06T17:47:15.743
> 
> 标签：encoding, jboss, character

是否可以像这样通过 jboss-web.xml cfg 文件为 JBoss AS 5.1 设置字符编码？

```
 <sun-web-app>
    locale-charset-info default-locale="">
    <locale-charset-map locale="" charset=""/>
    <parameter-encoding default-charset="UTF-8"/>
    </locale-charset-info>
    </sun-web-app> 
```

谢谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T18:34:00.327

我明白了，您的配置示例适用于 GlassFish。

如果您仍在使用 JBoss AS 5.1，请更改：

```
<jboss_install>/server/(default)/deploy/jboss-web.deployer/server.xml 
```

设置连接器 URIEncoding：

```
<Connector port="8080" URIEncoding="UTF-8" /> 
```

如果您完全使用更高版本的 JBoss AS 或不同的应用程序服务器，请[在此处查看我的完整答案](https://stackoverflow.com/a/27990314/1594449)。

# objective-c - 如何在 AppDelegate 中执行 Segue？

> ID：12305636
> 
> 赞同：11
> 
> 时间：2012-09-06T17:47:32.560
> 
> 标签：objective-c, ios, storyboard, dropbox, segue

我正在尝试使用 Storyboard 在 IOS 5.1 上完成应用程序。基本上我正在做一个保管箱应用程序。因为我使用的是 Dropbox SDK，所以到 Dropbox 的链接是在 AppDelegate.m 中处理的。用户可以选择从会话中取消链接并在不同的视图控制器中再次链接。因此，每次用户链接和未链接的应用程序都必须将视图从 Appdelegate 切换到未连接到 rootviewcontroller 的视图控制器

在原始 Dropbox 的示例中，Dropbox 处理转换，如下面的代码

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {
            [navigationController pushViewController:rootViewController.photoViewController animated:YES];
        }
        return YES;
    }

    return NO;
} 
```

但是我正在使用带有导航控制器的 Storyboard，并且以下任何方法都不起作用我将方法放在注释中。

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {

            NSLog(@"App linked successfully!");
            // At this point you can start making API calls

            /*UIViewController *viewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:NULL] instantiateViewControllerWithIdentifier:@"MeetingViewController"];
            [self.navigationController pushViewController:viewController animated:YES]; */

           //[self performSegueWithIdentifier:@"xxxx" sender:self];

           /* LoginDropboxViewController *loginController=[[LoginDropboxViewController alloc] initWithNibName:@"LoginDropbox" bundle:nil];
            [navigationController pushViewController:loginController animated:YES]; */

        }
        return YES;
    }
    // Add whatever other url handling code your app requires here
    return NO;
} 
```

这是应用程序的故事板 ![在此处输入图像描述](../Images/bfe1079c62162dd59b9613fac9fbdd29.png)

那么如何在 AppDelegate.h 中切换视图？

注意：如果我添加一个 segue 并将 segue 命名为 goToMeeting [self performSegueWithIdentifier:@"goToMeeting" sender:self];

我得到的错误是：`No Visible @interface for 'AppDelegate' declares the selector performSegueWithIdentifier:sender`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T20:13:56.517

如果您考虑手动推送视图而不是 segueperform 以下代码很可能会为您工作

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {

            NSLog(@"App linked successfully!");
            // At this point you can start making API calls

            //push view manually 
            UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
            LoginDropboxViewController *ivc = [storyboard instantiateViewControllerWithIdentifier:@"LoginDropbox"];
            [(UINavigationController*)self.window.rootViewController pushViewController:ivc animated:NO];

    }
        return YES;
    }
    // Add whatever other url handling code your app requires here
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-01T22:46:36.033

你可以这样做：

```
UINavigationController *navigationController = (UINavigationController*) self.window.rootViewController;

[[[navigationController viewControllers] objectAtIndex:0] performSegueWithIdentifier:@"goToMeeting" sender:self]; 
```

这仅在 viewControllers 数组中的索引与您的视图控制器之一匹配并且当然存在时才有效。在这种情况下是第一个（在数组和情节提要中）。

segue（“goToMeeting”）不得附加到操作上。执行此操作的方法是通过控制从情节提要场景底部的文件所有者图标拖动到目标场景。将出现一个弹出窗口，要求在“Manual Segue”中选择一个选项；选择“推送”作为类型。点击小方块并确保您在属性检查器中。给它一个标识符，您将使用它在代码中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-06T07:31:29.550

在我的情况下，我需要使用 segue 从 appdelegate 转到仪表板屏幕，目标 c 中的代码如下。

```
if([rememberMe isEqualToString:@"YES"]){
        //Goto Dashboard
        self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
        SWRevealViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"revealVc"];
        self.window.rootViewController = vc;
        [self.window.rootViewController performSegueWithIdentifier:@"sw_front" sender:self];
        [self.window makeKeyAndVisible];
    }else{
        //Goto login
        self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
        LoginViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
        self.window.rootViewController = vc;
        [self.window makeKeyAndVisible];
    } 
```

写在你的里面`didFinishLaunchingWithOptions`

希望它对某人有所帮助。

# c# - WCF 服务引用调用返回“远程服务器返回错误：NotFound。”

> ID：12305639
> 
> 赞同：0
> 
> 时间：2012-09-06T17:47:40.563
> 
> 标签：c#, wcf, silverlight, web-services

我正在把头发拉到这个上面。

我有一个用于在 Web 服务器上调用的 WCF 接口。所有其他功能都工作正常，但我添加的新功能导致“远程服务器返回错误：NotFound”。在 End 函数的 Reference.cs 自动生成的文件中。

我知道服务器已找到，我的调试器在服务端中断，它显然被调用并返回正确的类型。

还有什么可能导致这种误导性错误？

```
[ServiceContract]
public interface IDatabaseQueries
{
...
    [OperationContract(AsyncPattern = true)]
    IAsyncResult BeginGetItemFromId(int itemID, AsyncCallback callback, Object state);

    RmaItem EndGetItemFromId(IAsyncResult result);
...
}

[DataContract]
[KnownType(typeof(ItemType))]
[KnownType(typeof(Location))]
[KnownType(typeof(DateTime))]
public class RmaItem
{
...
}

[SilverlightFaultBehavior]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[KnownType(typeof(RmaItem))]
[KnownType(typeof(RmaReport))]
public class DatabaseService : IDatabaseQueries
{
...
public IAsyncResult BeginGetItemFromId(int itemID, AsyncCallback callback, Object state)
{
    return new DatabaseResponse(itemID);
}

public RmaItem EndGetItemFromId(IAsyncResult result)
{
    return GetRmaItemById((int)(result as DatabaseResponse).GetData);
}
...
} 
```

在“Reference.cs”中崩溃：

```
public RMA.DatabaseServiceReference.RmaItem EndGetItemFromId(System.IAsyncResult result) {
                object[] _args = new object[0];
                RMA.DatabaseServiceReference.RmaItem _result = ((RMA.DatabaseServiceReference.RmaItem)(base.EndInvoke("GetItemFromId", _args, result)));
                return _result; 
```

编辑：

当我说所有其他功能时，我的意思是附加功能是相同的 IDatabaseQueries 接口。

编辑 2::

原来问题是使用枚举作为字段（ItemType）。如上所示，我将 ItemType 作为已知类型。我在该类型上是否缺少特殊条件？这里是减速。

```
[DataContract]
public enum ItemType
{
    LOCATION, PART, ASSEMBLY
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:01:33.843

Silverlight 无法理解所有错误。问题不在于服务器返回“未找到”，而是 silverlight 试图查找 wcf 返回的错误但找不到它。

您可以按照这样的方法[来](http://www.benday.com/2010/08/16/how-to-permanently-banish-silverlights-not-found-error-for-wcf-service-calls/)查找更多信息或使用像[Fiddler](http://fiddler2.com/fiddler2/)这样的数据包嗅探器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:08:31.233

解决。

我缺少 EnumMember 与 ItemType 枚举中的每个值。

```
 [DataContract]
    public enum ItemType
    {
        [EnumMember]
        LOCATION,
        [EnumMember]
        PART,
        [EnumMember]
        ASSEMBLY
    } 
```

感谢您的回复麦卡登

# c - 当我们 malloc() 时，我们真的必须 free() 吗？那么它与自动变量有什么不同呢？

> ID：12305642
> 
> 赞同：2
> 
> 时间：2012-09-06T17:47:45.883
> 
> 标签：c, memory-management, malloc, free, automatic-storage

操作系统只会恢复它（在程序退出后）对吗？那么除了好的编程风格还有什么用呢？还是我有什么误解？它与“自动”分配有何不同，因为两者都可以在运行时更改，并且都在程序执行后结束？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-06T17:54:38.810

当您的应用程序处理大量数据时，您必须释放以节省堆空间。如果你不这样做，可能会发生一些不好的事情：

*   操作系统将停止为您分配内存（崩溃）
*   操作系统将开始将您的数据交换到磁盘（抖动）
*   其他应用程序将有更少的空间来放置他们的数据

操作系统收集应用程序退出时分配的所有空间这一事实并不意味着您应该依靠它来编写可靠的应用程序。这就像试图依靠编译器来优化糟糕的编程一样。内存管理对于良好的性能、可扩展性和可靠性至关重要。

正如其他人所提到的，`malloc`在堆中分配空间，而在堆栈上创建自动变量。两者都有用途，但它们确实非常不同。堆空间必须由操作系统分配和管理，并且可以动态存储不同大小的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:56:03.783

在 C/C++ 中，“自动”变量在堆栈上分配。它们在函数的出口处被销毁。这将自动发生。你不需要为此写任何东西。

堆分配（调用的结果`malloc`）要么显式释放（调用），要么`free`在进程结束时被清理。

如果您正在编写可能会使用一次或两次的小程序，那么可以不释放您的堆分配。这不好，但可以接受。

如果您正在编写中型或大型项目或计划将您的代码包含到其他项目中，那么您绝对应该释放每个堆分配。不这样做会造成巨大的麻烦。堆内存不是无穷无尽的。程序可能会使用它。即使您将分配少量内存，这仍然会对操作系统造成不必要的压力，导致交换等。

底线：**释放分配不仅仅是一种风格或一个好习惯**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:56:52.627

这是一种很好的编程风格，而且不止于此。在非平凡的程序中不进行适当的内存管理最终会影响程序的可用性。当然，操作系统可以在程序终止后回收您分配/使用的任何资源，但这并不能减轻程序执行*期间的负担或潜在问题。*

考虑一下你用来发布这个问题的网络浏览器：如果浏览器是用需要内存管理的语言编写的，而代码没有正确执行，你认为它会在你注意到之前多久它正在吃掉你所有的记忆？您认为浏览器可以使用多久？现在考虑一下用户经常让浏览器长时间打开：如果没有适当的内存管理，它们会在*几次*页面加载后变得无法使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T17:59:38.807

如果你在不使用 free() 的情况下调用一个宏一千次，那么编译器或安全的说法系统会给你分配一千个不同的地址，但是如果你在每个 malloc 之后使用 free()，那么每次只会给你一个内存地址。因此，内存泄漏、总线错误、内存超出范围和崩溃的机会将是最小的。使用 free() 是安全的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T18:25:12.563

一旦您退出定义它的范围，自动变量就会被销毁（并且它的内存是可重用的）。对于大多数比程序退出早得多的变量。

如果你`malloc`不这样做`free`，那么在程序退出之前内存不能重用。即便如此，在某些操作系统非常少的系统上也不会。

所以是的，自动变量和泄漏的内存分配之间有很大的区别。调用一个泄漏分配足够多次的函数，您将耗尽内存。调用带有自动变量的函数任意多次，内存是可重复使用的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T17:54:21.417

如果您的程序没有立即退出并且您没有释放内存，那么您最终会浪费它。要么您最终会耗尽内存，要么您将开始交换到磁盘（这很慢，而且也不是无限的）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-06T17:55:31.333

自动变量在堆栈上，它的大小应该在编译时知道。如果你需要存储你不知道的大小的数据，例如，维护一个二叉树，用户可以在其中添加和删除对象。除此之外，堆栈大小可能会受到限制（取决于您的目标），例如，linux 内核堆栈通常为 4k-8k。您还会破坏指令缓存，这会影响性能，

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T17:54:22.023

是的，您绝对必须在 malloc() 之后使用 free() （以及完成后关闭文件和其他资源）。虽然操作系统确实会在执行后恢复它，但长时间运行的进程会以这种方式泄漏内存。如果您的程序与运行单个方法的 main 方法一样简单，那么它可能不是什么大问题，尽管非常草率。您应该养成在 C 中正确管理内存的习惯，因为有一天您可能想编写一个运行时间超过一秒钟的重要程序，如果您不提前学习如何操作，您将有一个处理内存泄漏的巨大头痛。

# c++ - 仅标头库中的静态数据

> ID：12305646
> 
> 赞同：14
> 
> 时间：2012-09-06T17:47:59.200
> 
> 标签：c++, static, libraries, header-only

我正在开发一个仅包含头文件的库。到目前为止，它只包含类，这很好。但是，我已经到了需要在库中拥有一些库范围内可访问的不变数据（即，不是类实例数据）来实现某些功能的地步。您显然不能只将全局数据放在头文件中，否则作为头文件的每个编译单元都`#include`将具有符号定义，并且您将在链接时遇到多个定义错误。

我似乎找到了一种解决方法，它可以让我在类中拥有静态数据，而无需通过将数据作为`static`函数中的变量并返回指向该数据的指针来将编译单元添加到库中：

```
class StaticData {
public:
    void doSomething() { /* this uses getData */ }
    void doSomethingElse() { /* this does too */ }

private:
    static int* getData() {
        static int array[] { 1, 2, 3, 4 };

        return array;
    }
}; 
```

这似乎工作正常，但我必须承认我不知道函数`static`数据`inline`在头文件中的函数中会发生什么。我想知道这个“hack”是否有任何意想不到的影响，例如`#include`这个头文件的每个编译单元都有自己的`array`. 编译器决定如何以及在哪里放置它？

另外应该注意的是，我没有使用它来实现单例反模式或任何东西。我只是用它来存储多个函数需要使用的数据（这就是为什么它不能`static`只存在于使用它的函数中，但即使它存在，也会提示同样的问题）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T17:54:05.190

没关系。`array`只要函数具有外部链接，就可以保证只有一个副本，这就是这样做的。C++ 标准说：

> 7.1.2/4 外部内联函数中的静态局部变量始终引用同一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T15:22:47.803

另一种方法...

```
template<typename> class ArrayData {
    friend class ClassWithArray;
    static int array[4];
};

class ClassWithArray :
    ArrayData<ClassWithArray>
{
public:
    void doSomething() { 
        /* this uses getData */ 
        array[0] = 1;
        array[1] = 2;
        array[2] = 3;
        array[3] = 4;
    }
    void doSomethingElse() { 
        /* this does too */ 
        array[0] = 4;
        array[1] = 3;
        array[2] = 2;
        array[3] = 1;
    }
};

int ArrayData<ClassWithArray>::array[4] = { 1, 2, 3, 4 }; 
```

通用实现

```
template<typename T> class ArrayDataT 
{
    friend T;
    static int array[4];
};

template<typename T>
int ArrayDataT<T>::array[4] = { 1, 2, 3 ,4 };

class DerivedFromArrayDataT :
    ArrayDataT<DerivedFromArrayDataT>
{

}; 
```

# c# - 如何调试“'我的班级'的类型初始化程序引发异常”

> ID：12305648
> 
> 赞同：8
> 
> 时间：2012-09-06T17:48:05.440
> 
> 标签：c#, asp.net, exception, exception-handling

我遇到了异常：`The type initializer for 'my class' threw an exception.`在我的浏览器中运行我的 Web 应用程序后。由于这似乎是从视图 (.aspx) 生成的错误消息，因此我无法查看堆栈跟踪或任何日志以了解此错误的来源。

我已经在网上阅读了一些内容，调试的一种解决方案是抛出一个`TypeInitializationException`然后查看内部异常以找出问题所在。当我不知道在哪里用 try/catch 包围代码时，我该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T17:54:55.673

这可能是由错误的静态构造函数或静态属性/字段的错误内联初始化引起的。例如：

```
class A
{
    static A()
    {
        //buggy code here
    }
    static SomeField f = new ThisClassThrowsWhenConstructed(); // <-- or here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-26T03:52:09.300

最后我发现这个问题的原因是我的项目的 AppConfig 设置。是的，我有两个 C# 项目，**Project1**和**Project2**。

**Project1**包含静态类**MyDetails**

```
public static MyDetails
{
  public static int _LogLevel = Int32.Parse(ConfigurationManager.AppSettings["LogLevel"])

  public static GetData()
   {
     ----code----
     ----code----
   }
} 
```

我在 Project1 中有以下 appConfig 设置

```
<appSettings>
    <add key="LogLevel" value="5"/>
</appSettings> 
```

正在从**Project2**调用函数**MyDetails.GetData()**，这是我现在正在调试的项目。由于**Project2** 是目标项目，因此**ConfigurationManager.AppSettings["LogLevel"]**行将尝试从**Project2**读取设置 LogLevel 。但**LogLevel**设置仅在**Project1**中可用。所以，我们需要在**Project2**中添加 appsettings 。

 ********在Project2**的 appConfig 中添加以下 appsettings 后，引发异常的类型初始化程序已解决，

```
<appSettings>
    <add key="LogLevel" value="5"/>
</appSettings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:50:14.723

当“我的班级”的静态构造函数崩溃时，将引发此异常。请把你的断点放在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T17:50:23.993

当您的类的静态构造函数出现错误时，有些东西不会抛出该错误，而是`CLR`会抛出`TypeInitializationException`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-02T16:49:08.267

提示：如果您在同一个类中有多个静态构造函数出错，请在第一个静态构造函数或所有静态构造函数上放置断点。

静态构造函数的不同寻常之处在于，当构造过程中出现问题时，它不会在构造发生的地方出错。稍后，在调用/使用静态构造的对象时，它会出错。

例如，在我的例子中：我有 3 个静态构造函数：A、B、C。程序错误输出并在访问 C 的值时暂停。我在 C 的静态构造函数上放了断点，断点没有被命中。怎么了？

结果 B 的静态构造函数不好，因此 C 的静态构造不会发生。这是令人困惑的，因为人们会认为一旦 B 的构造失败，错误就应该弹出。******

# iphone - iPhone - 某些设备上的核心数据崩溃

> ID：12305654
> 
> 赞同：0
> 
> 时间：2012-09-06T17:48:59.253
> 
> 标签：iphone, core-data

我有一个 iPhone 应用程序，它在某些设备上运行良好，并在构建persistentStoreCoordinator 时导致其他时候崩溃，下面的代码导致应用程序崩溃

```
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]]; 
```

**注意：前一行代码会导致应用程序在某些情况下崩溃，而不是在所有设备上。**

managedObjectModel 实现如下：

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"iSpot" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];    
    return __managedObjectModel;
} 
```

# backbone.js - Knockback js 与 ServiceStack 等 RESTful Web 服务一起工作的最简单示例？

> ID：12305655
> 
> 赞同：7
> 
> 时间：2012-09-06T17:49:04.357
> 
> 标签：backbone.js, knockout.js, servicestack, knockback.js

我正在寻找一个非常简单的示例，该示例显示将 Knockback 代码连接到通过 RESTful 服务连接的主干模型。我正在使用 ServiceStack|c# 后端。下面的所有链接都太复杂了，并且通过 url 使用 localStore 而不是 RESTful 服务。我也更喜欢在 Javascript 而不是 CoffeeScript 中查看示例。

我的示例 url 类似于**localhost/entities**，点击它会导致 RESTful web 服务返回所有实体。使用**localhost/entity/1**访问它会返回 ID 为 1 的实体。

_http://kmalakoff.github.com/knockback/index.html

_https://github.com/kmalakoff/knockback-reference-app/

_https://github.com/addyosmani/todomvc

以下是第一个链接上的击退教程的示例：

```
Models, Collection, ViewModel, and Bindings:
// Generated by CoffeeScript 1.3.3
var model, view_model;

model = new Backbone.Model({
  first_name: "Planet",
  last_name: "Earth"
});

view_model = kb.viewModel(model);

view_model.full_name = ko.computed((function() {
  return "" + (this.first_name()) + " " + (this.last_name());
}), view_model);

ko.applyBindings(view_model, $('#kb_view_model_computed')[0]); 
```

但是没有提到如何将主干模型连接到 RESTful Web 服务。

有一些如何通过 Backbone 执行此操作的示例，但我不确定使用 Knockback 时情况会如何变化。

找到了以下链接，但没有帮助：

_http://stackoverflow.com/questions/7992431/using-knockoutjs-backbone-together

_http://stackoverflow.com/questions/9704220/is-knockback-js-production-ready

_http://stackoverflow.com/questions/10434203/defining-models-on-server-side-when-using-mvvm-with-knockout-js

提前感谢您提供的任何帮助。顺便说一句，您不希望得到下划线的超链接... ;)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T20:09:15.907

[在伟大的Knockback](http://kmalakoff.github.com/knockback/)项目的 Kevin Malakoff 的大力帮助和支持下，我能够得到一个小例子！我使用[ServiceStack Backbone Todos](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/Backbone.Todos/Global.asax.cs)项目作为起点。

**c# 文件：** *Global.asax.cs*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.SessionState;

using ServiceStack.Redis;
using ServiceStack.ServiceInterface;
using ServiceStack.WebHost.Endpoints;

namespace MyApp
{
    public class Person
    {
        public int Id { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

    public class PersonService : RestServiceBase<Person>
    {
        public static Person kevin = new Person { Id = 1, FirstName = "Kevin", LastName = "Malakoff" };
        public static Person scott = new Person { Id = 2, FirstName = "Scott", LastName = "Idler" };
        public static List<Person> people = new List<Person> { kevin, scott };

        public override object OnGet(Person person)
        {
            if (person.Id != default(int))
                return people[person.Id-1];
            return people;
        }

        public override object OnPost(Person person)
        {
            return base.OnPost(person);
        }

        public override object OnPut(Person person)
        {
            return OnPost(person);
        }

        public override object OnDelete(Person person)
        {
            return base.OnDelete(person);
        }
    }

    public class AppHost : AppHostBase
    {
        public AppHost() : base("MyApp", typeof(PersonService).Assembly) { }

        public override void Configure(Funq.Container container)
        {
            ServiceStack.Text.JsConfig.EmitCamelCaseNames = true;
            Routes
              .Add<Person>("/persons")
              .Add<Person>("/persons/{Id}");
        }
    }

    public class WebApiApplication : System.Web.HttpApplication
    {
        protected void Application_Start(object sender, EventArgs e)
        {
            new AppHost().Init();
        }
    }
} 
```

**html 文件：** *default.html*

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>MyApp2</title>
    <script>window.JSON || document.write('<script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js">\x3C/script>')</script>
    <script src="Scripts/jquery-1.8.0.js" type="text/javascript" ></script>
    <script src="Scripts/knockback-full-stack-0.16.1.js" type="text/javascript" ></script>
    <script src="myapp.js" type="text/javascript" ></script>
  </head>
<body>
    <div id="myapp">
        <div class="title">
            <h1>MyApp</h1>
        </div>
        <div class="content">
            <div id='kb_observable'>
                <p>First name: <input class='text' data-bind="value: firstName" /></p>
                <p>Last name: <input class='input-small pull-right' data-bind="value: lastName" /></p>
                <p>Hello, <span data-bind="text: fullName"></span>!</p>
            </div>
            <div id="kb_collection_observable">
                <div data-bind="if: persons">
                    <span>Has Persons</span>
                </div>
                <div data-bind="foreach: persons">
                    <p>First name: <input class='text' data-bind="value: firstName" /></p>
                    <p>Last name: <input class='input-small pull-right' data-bind="value: lastName" /></p>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

**javascript 文件：** *myapp.js*

> $（函数（）{
> 
> ```
> //model
> var PersonModel = Backbone.Model.extend({ urlRoot: '/MyApp/persons' });
> var model = new PersonModel({ id: 1 });
> model.fetch();
> 
> //viewmodel
> var PersonViewModel = function (person) {
> 
>     this.firstName = kb.observable(person, 'firstName');
>     this.lastName = kb.observable(person, 'lastName');
>     this.fullName = ko.computed((function () {
>         return "" + (this.firstName()) + " " + (this.lastName());
>     }), this);
> };
> var personViewModel = new PersonViewModel(model);
> 
> //binding
> ko.applyBindings(personViewModel, $('#kb_observable')[0]);
> 
> //model
> var PersonsModel = Backbone.Collection.extend({ model: PersonModel, url: '/MyApp/persons' });
> var personsModel = new PersonsModel();
> personsModel.fetch();
> 
> //viewmodel
> var PersonsViewModel = function (persons) {
>     this.persons = kb.collectionObservable(persons)
> };
> var personsViewModel = new PersonsViewModel(personsModel);
> 
> //binding
> ko.applyBindings(personsViewModel, $('#kb_collection_observable')[0]); }); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:49:34.437

我整理了一个非常简单的例子。它假设您已经知道如何使用主干和淘汰赛，所以这只是一个快速示例，说明如何将它们一起使用

[http://coder2.blogspot.com/2013/02/backbonejs-and-knockoutjs.html](http://coder2.blogspot.com/2013/02/backbonejs-and-knockoutjs.html)

# sql - 查询sql返回自定义值

> ID：12305657
> 
> 赞同：0
> 
> 时间：2012-09-06T17:49:35.347
> 
> 标签：sql

我有一个包含 3 列的表（包含仅假定从 0 到 10 的值的整数值）。我想用一个查询提取一个有 1 列的表。此列必须采用基于以下逻辑的值：

1.  如果这三列之一的值为 0 ----> 查询生成的表的列的值也必须为 0。

2.  如果最后三列都没有值为 0 ----> 列的值必须假定值为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:52:59.683

您正在寻找`CASE`构造或`IF`功能：

```
SELECT CASE WHEN (t.field1 = 0 OR t.field2 = 0 OR t.field3 = 0) THEN 0
       ELSE 1 END AS value
FROM t; 
```

在这种特定情况下，您还可以使用任何成员为零将使乘积为零的事实：

```
SELECT CASE WHEN (t.field1*t.field2*t.field3 = 0) THEN 0 ELSE 1 END AS value
FROM t; 
```

或者

```
SELECT IF((t.field1*t.field2*t.field3)=0, 0, 1) AS value FROM t; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:52:29.933

这是一个简单的案例陈述。假设没有 NULL 值，试试这个：

```
select (case when col1 = 0 or col2 = 0 or col3 = 0 then 0 else 1 end) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:54:38.827

试试这个

```
SELECT  
    CASE
    WHEN column1 = 0 THEN 0
    WHEN column2 = 0 THEN 0
    WHEN column3 = 0 THEN 0
    ELSE 1
    END
FROM urtable 
```

# php - 使用 php cURL 发送图像

> ID：12305662
> 
> 赞同：5
> 
> 时间：2012-09-06T17:49:47.320
> 
> 标签：php, curl

您好我需要使用 PHP cURL 发送图像，尝试这样做：

```
$this->ch = curl_init();
curl_setopt($this->ch, CURLOPT_URL, $URL);
$postValues = array(
            'utf8' => $utf8,
            'authenticity_token' => $auth_token,
            'media_object[title]' => 'something',
            'media_object[source]' => '',
            'media_object[object_type]' => 0,
            'media_object[image]'=>'@/home/me/images/something.jpg',
            'captcha' => $captcha,
        );

$n = 0;
        $postStr = '';
        foreach ($postValues as $name => $value) {
            if ($n == 0)
                $postStr .= $name . '=' . $value;
            else
                $postStr .= '&' . $name . '=' . $value;
            $n++;
        }
        curl_setopt($this->ch, CURLOPT_URL, $url);
        curl_setopt($this->ch, CURLOPT_POSTFIELDS, $postStr);
        curl_setopt($this->ch, CURLOPT_POST,1);
curl_setopt($this->ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1");
        curl_setopt($this->ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($this->ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($this->ch, CURLOPT_COOKIEFILE, TMP.'cookies.txt');
        curl_setopt($this->ch, CURLOPT_COOKIEJAR, TMP.'cookies.txt');
curl_exec($this->ch); 
```

但它不起作用。当然，我尝试使用此代码进行普通的 POST 请求，它工作正常，只是当我尝试发布图像时它不起作用。

我已经通过 LIVE HTTP HEADERS 捕获了标头，它看起来像这样： Theese 是我使用带有插件的 mozilla 捕获的正确标头，因此 cURL 应该做同样的事情：

```
Content-Type: multipart/form-data; boundary=---------------------------41184676334
Content-Length: 218115
-----------------------------41184676334
Content-Disposition: form-data; name="utf8"

â
-----------------------------41184676334
Content-Disposition: form-data; name="authenticity_token"

0Je50mUpOMdghYgHPH5Xjd8UnbuvzzQLyyACfvGmVgY=
-----------------------------41184676334
Content-Disposition: form-data; name="media_object[title]"

Something
-----------------------------41184676334
Content-Disposition: form-data; name="media_object[source]"

-----------------------------41184676334
Content-Disposition: form-data; name="media_object[object_type]"

0
-----------------------------41184676334
Content-Disposition: form-data; name="media_object[image]"; filename="something.jpg"
Content-Type: image/jpeg

ÿØÿà 
```

有什么问题吗？我试图发送图像的网页返回消息“文件名不能为空！” 还尝试在 '@/home/me/images/something.jpg' 之后添加 ;filename="something.jpg" 和 ;type="image/jpeg"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T00:57:59.413

几周前我有类似的问题，尝试更改文件的位置或权限。要找出 curl 发送的标头，请尝试以下操作：

```
curl_setopt(CURLINFO_HEADER_OUT, true); 
```

请求后检索有关标头的信息：

```
curl_getinfo($this->ch, CURLINFO_HEADER_OUT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:30:42.327

通过删除这部分解决了我的问题：

```
$n = 0;
        $postStr = '';
        foreach ($postValues as $name => $value) {
            if ($n == 0)
                $postStr .= $name . '=' . $value;
            else
                $postStr .= '&' . $name . '=' . $value;
            $n++;
        } 
```

并改变了这个：`curl_setopt($this->ch, CURLOPT_POSTFIELDS, $postStr);`变成`curl_setopt($this->ch, CURLOPT_POSTFIELDS, $postValues);`

Postfields 需要是一个数组才能获取“Content-Type: multipart/form-data”。

# google-app-engine - AppEngine 搜索 - 数字运算符不起作用？

> ID：12305663
> 
> 赞同：0
> 
> 时间：2012-09-06T17:49:51.243
> 
> 标签：google-app-engine, search

我正在尝试在应用引擎上使用搜索服务...当我尝试使用数字运算符时遇到了问题。我收到一个 InvalidRequest 错误。

起初我认为这是我的查询的其他内容，但是当我使用文档中的示例时，我得到了相同的结果。

例如，这有效：

作者：“罗斯琼斯”长度 = 15

但是这个例子，直接从文档复制，抛出一个 InvalidRequest 错误：

作者：《玫瑰琼斯》长度 > 15

据我所知，= 以外的任何运算符都不起作用。

任何人都可以帮忙吗？:)

编辑 - 每个请求的代码：

```
INDEX_NAME = 'sample'

query_string = 'author:"Rose Jones" length > 15'

logging.info('final query string: '+query_string)

try:
    results = search.Index(name=INDEX_NAME).search(query_string)
except search.Error:
    logging.exception('Search failed')
    self.errorManager.add('search6') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:45:13.183

好的，我想我找到了问题所在。这听起来有点傻（我！），但这里是：

使用 = 以外的运算符似乎要求该字段已经存在于您的架构/索引中的某个位置。

因此，如果您说长度 > 15，则需要有一个具有“长度”作为属性的文档，否则它将失败。

虽然 length = 15 不会做出同样的抱怨，只会返回零结果。

我基本上是在构建一个查询构造函数并针对搜索抛出查询以检查我的语法......我认为存在语法问题，因为一种类型的查询被接受而另一种不被接受，但似乎比较不同无论如何，平等目前需要在索引中匹配数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T17:56:36.933

查看有关Java[过滤器的文档](https://developers.google.com/appengine/docs/java/datastore/jdo/queries)

```
Query q = pm.newQuery(Person.class);
q.setFilter("height < 72"); 
```

[或这里](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_filter)的 Python

```
q.filter('height >', 42).filter('city =', 'Seattle')
q.filter('user =', users.get_current_user()) 
```

# asp.net-mvc - 图像处理程序不适用于 ASP.NET MVC 中的空参数

> ID：12305664
> 
> 赞同：0
> 
> 时间：2012-09-06T17:49:51.430
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, handler

我尝试使用默认参数、正则表达式，但对 URL“/Assets/Images/”没有任何作用。我一直收到 404 错误，说找不到。它仅适用于“/Assets/Images/0”。

```
 routes.Add(
           "Images",
           new Route(
               "Assets/Images/{*Id}",
                   new ImageRouteHandler(new ImageHandler())
               )
           ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:55:06.210

您需要向 AssetsController 添加一个名为 Images 的操作

```
public class AssetsController : Controller
{
   public ActionResult Images()
   {
      return View();
   }
   [HttpGet]
   public ActionResult Images(int id)
   {
      return View();
   }
} 
```

# java - 反转字符串的简单方法

> ID：12305666
> 
> 赞同：15
> 
> 时间：2012-09-06T17:49:55.050
> 
> 标签：java, string

不经过 char 序列有没有办法`String`在 Java中反转

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T17:51:21.867

试试这个，

```
String s = "responses";
StringBuilder builder = new StringBuilder(s);
System.out.println(builder.reverse()); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-06T17:50:52.397

您可以使用以下[`StringBuilder#reverse()`方法](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#reverse%28%29)：

```
String reverse = new StringBuilder(originalString).reverse().toString(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-06T17:50:52.100

用途`StringBuilder's`或`StringBuffer's`方法...`reverse()`

```
 public class StringReverse
{
  public static void main(String[] args)
  {
  String string=args[0];
  String reverse = new StringBuffer(string).reverse().toString();
  System.out.println("\nString before reverse: "+string);
  System.out.println("String after reverse: "+reverse);
  } 
} 
```

`StringBuffer`是**线程安全**的，而`StringBuilder`不是**线程安全**的......`StringBuilder` **是从 Java 1.5 引入的**，为了更快地完成那些不需要担心并发的操作......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T17:53:37.183

尝试 reverse() 方法：

```
StringBuilder stringName = new StringBuilder();
String reverse = stringName.reverse().toString(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-07T03:43:32.910

您可以使用 StringBuilder..

```
String word = "Hello World!";
StringBuilder sb = new StringBuilder(word);

System.out.print(sb.reverse()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-21T08:17:53.943

如果我们必须这样做：

> 不经过 char 序列

一种简单的迭代方法是：

```
public String reverse(String post) {                
    String backward = "";
    for(int i = post.length() - 1; i >= 0; i--) {
        backward += post.substring(i, i + 1);
    }        
    return backward;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-06T18:06:37.280

您可以使用字符串缓冲区来反转字符串。

```
public String reverse(String s) {
    return new StringBuffer(s).reverse().toString();
} 
```

一种更有趣的方法是递归。

```
public String reverse(String s) {
    if (s.length() <= 1) { 
        return s;
    }
    return reverse(s.substring(1, s.length())) + s.charAt(0);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-08-25T03:45:04.650

这是一种使用递归的方法 -

```
public static String reverse(String s1){
        int l = s1.length();
        if (l>1)
                return(s1.substring(l-1) + reverse(s1.substring(0,l-1)));
        else
                return(s1.substring(0));
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-06-27T18:36:51.603

使用最少的 API 支持。一个简单的算法。

```
static String reverse(String str) {
    char[] buffer = str.toCharArray();
    for (int i = 0; i < buffer.length/2; ++i){
        char c = buffer[i];
        buffer[i] = buffer[buffer.length-1-i];
        buffer[buffer.length-1-i] = c;
    }
    return new String(buffer);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-26T16:56:13.843

在这里，我有一个相同的示例，使用 substring 方法和 o(n) 而不使用 string 中的任何网络。我知道使用子字符串将保存完整的字符串内存。

```
for(int i = 0; i < s.length(); i++)    {
    s = s.substring(1, s.length() - i) + s.charAt(0) + s.substring(s.length() - i);
    System.out.println(s);
} 
```

这可能会帮助你！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-10-28T03:26:10.760

```
public class RevString {
  public static void main(String[] args) {
    String s="jagan";
    String rev="";
    for (int i=s.length()-1;i>=0;i--) {
      rev=rev+s.charAt(i);
    }
     System.out.println("Reverse String is: "+rev);
  }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-31T16:25:42.090

**我还没有看到任何简单的方法。** **这是合适的方法：**

* * *

使用循环：

* * *

```
 String d = "abcdefghij";
    char b[] = new char[d.length()];// new array;
    int j=0; // for the array indexing
    for(int i=d.length()-1;i>=0;i--){
        b[j] = d.charAt(i); // input the last value of d in first of b i.e. b[0] = d[n-1]
        j++;
    }
    System.out.println("The reverse string is: "+String.valueOf(b)); 
```

* * *

**输出是** `The reverse string is: jihgfedcba`

* * *

简单的逻辑是：

`array[i] = array[n-i];` 其中 i 是迭代，n 是数组的总长度

# java - 如何在 Callable 中完成异常处理

> ID：12305667
> 
> 赞同：17
> 
> 时间：2012-09-06T17:50:01.077
> 
> 标签：java, multithreading

我知道可调用的调用可以将异常抛出给调用它的父方法，而可运行的情况并非如此。

我想知道如何，因为它是一个线程方法，并且是线程堆栈的最底层方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T18:10:05.757

的重点[`Callable`](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)是将异常抛出到调用线程，例如，当您获得 a 的结果时`Future`，您将`callable`.

```
public class CallableClass implements Callable<String> {
...
}

ExecutorService executor = new ScheduledThreadPoolExecutor(5);
Future<Integer> future = executor.submit(callable);

try {
    System.out.println(future.get());
} catch (Exception e) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T18:13:06.980

`Callable.call()` **不能**是最底部的堆栈帧。它总是由另一个方法调用，然后将捕获异常。`Callable`通常应该用于异步计算值，然后通过`Future`对象获取它们。当您尝试获取' 值时，该操作*可能会*引发稍后重新引发的异常。`Future`

`Runnable`只是应该运行一个不返回任何内容的操作。所有异常处理都应该在内部完成，`Runnable`因为不清楚`Runnable.run()`应该如何处理抛出的任何异常。（来自 a 的异常`Callable`通常会返回给调用者`Future`）

# git - 如何删除推送到远程存储库的提交？

> ID：12305668
> 
> 赞同：10
> 
> 时间：2012-09-06T17:50:07.600
> 
> 标签：git

当地分支机构：-

> '特征/100'

和远程分支： -

> '掌握'
> 
> '版本 2'

不小心，

1.  我已将我的功能分支“feature/100”合并到主分支
2.  还将其推送到远程存储库。

但在真正的“ **feature/100** ”中应该已经合并到远程分支“ **Version2** ”中

**我如何修复它（部分）**：-

我已将功能分支“ **feature/100** ”合并到远程分支“ **Version2** ”并将其推送到服务器。

```
git checkout Version2
git merge --squash feature/100
git add .
git commit -m 'New message' 
```

但是我想删除我合并的最后一个推送并提交到主分支。如何？

**旁注**我只是一个在这个项目上工作的人。所以即使推送的提交被删除，它也不会伤害其他任何人

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T18:03:01.670

您可以：

**还原您的更改**

`git revert HEAD`

这将创建一个新的提交，恢复您刚刚推送到 master 的更改。这是最安全的选择，因为其他人可能已经取消了您提出的更改。

**更改您的提交历史并强制推送更改**

您可以删除刚刚推送的提交：

`git reset --hard HEAD~1`

`git push origin master --force`

除非您绝对确定没有人从 master 中删除您的更改，否则您不想这样做。

有关详细信息，请参阅[从 Git 中的分支删除提交](https://stackoverflow.com/questions/1338728/how-to-delete-a-git-commit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:59:11.250

您可以还原 master 上的合并提交。当您以后真的想合并分支时，您必须先还原还原。有关详细说明，请参见此处：

[http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt](http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:55:26.607

可能为时已晚，但是如果您想`master`通过一次提交来回退推送的分支（？），请发出以下命令：

```
git push origin +master^:master 
```

`+`强制推送，`master^`描述前一个最后一个提交。`:master`推送到远程主分支。

# c# - 可以将元素与 simpleType 限制相关联的 xsd.exe 代码生成器替代方案

> ID：12305673
> 
> 赞同：0
> 
> 时间：2012-09-06T17:50:34.923
> 
> 标签：c#, .net, xml, xsd

我有一个结合了以下限制和元素的 XSD 架构

```
<?xml version="1.0" encoding="UTF-8"?>
...
<xsd:simpleType name="dollar11neg">
  <xsd:restriction base="xsd:string">
    <xsd:pattern value="-?\d?\d?\d?\d?\d?\d?\d?\d\.\d\d"/>
  </xsd:restriction>
</xsd:simpleType>

<xsd:element name="Price" type="dollar11neg"/>

<xsd:element name="Item">
  <xsd:complexType>
    <xsd:sequence>
       <xsd:element ref="Price" minOccurs="0"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element>
... 
```

XSD.exe 不会生成限制。我想知道是否有人知道可以生成包含限制的类的工具。

这样做的目的是，在序列化期间或之前，如果字段的值格式不正确（缺少小数位），我可以实现逻辑来查看值所需的格式，并根据模式限制进行更正.

而且我不想手动查看整个 xsd 模式来找出每个字段的模式并硬编码模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:55:43.863

试试**XMLSPY**工具。

[此处](http://www.altova.com/download/xmlspy/xml_editor_enterprise.html)提供 30 天免费试用。

# asp.net-mvc-3 - 实体框架缓存？

> ID：12305680
> 
> 赞同：1
> 
> 时间：2012-09-06T17:50:51.023
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework, unity-container

我有一个使用 Entity Framework 4.1 的项目。该模型是根据 SQL Server 2008 R2 机器上的数据库建模的。

我有一个包含 3 个 nvarchar 列、2 个位列和 1 个日期时间列的表。

该应用程序正在使用存储库模式和依赖注入。DI 容器中的所有项目都设置为 Transient，但设置为 Hierarchical 的上下文除外。

现在，当我对实体框架中的模型运行 lambda 查询时，它会按预期提取我的数据。例如：

```
 var someData = _dataRepository.Get(data => data.Name == name && data.IsEnabled); 
```

基本上，存储库的 Get 方法是 .Where(filter) linq 表达式的包装器。

*所以问题是这样的：*

当我将数据库（通过 SMS 或在使用 .SaveChanges 的代码中）更新到数据库中的位列或日期时间列并重新查询数据时，返回的查询数据将返回预期的内容。但是，每当我在其中一个 nvarchar 列上更新 (SMS/.SaveChanges) 并重新查询时，它都会返回 nvarchar 用于从先前查询中包含的“旧”数据——而不是更新的数据。

实体框架是否有一些导致这种情况发生的继承缓存？

# android - 无法弄清楚这个空点异常错误

> ID：12305683
> 
> 赞同：0
> 
> 时间：2012-09-06T17:50:53.147
> 
> 标签：android

在应用程序中制作硬币翻转选项。这是杀死我的部分：

```
public ImageView tails;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    .....

} 
```

在菜单中是问题发生的地方：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

case R.id.coin_flip:

                final Context cointext = this;
                final Dialog flip = new Dialog(cointext);
                flip.setContentView(R.layout.coin);

                flip.setTitle("Coin Flip");
                flip.setCancelable(true);

                n = 99;
                n = (generator.nextInt(n)) + 1;
                tails.findViewById(R.id.tails).setVisibility(1);

                if (n % 2 == 0) {
                    tails.findViewById(R.id.tails).setVisibility(0);
                }else {
                    tails.findViewById(R.id.tails).setVisibility(1);
                }

                Button flipBtn = (Button)findViewById(R.id.flipBtn);
                flipBtn.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        if (n % 2 == 0) {
                            tails.findViewById(R.id.tails).setVisibility(0);
                        }else {
                            tails.findViewById(R.id.tails).setVisibility(1);
                        }
                    }
                });

                flip.show();
}
} 
```

我不断收到 NullPointerException ：

```
tails.findViewById(R.id.tails).setVisibility(1); 
```

任何想法如何解决这一问题？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:55:11.277

Tails 没有被初始化。

你应该说

```
tails = (ImageView)findViewById(R.id.tails);
tails.setVisibility(View.VISIBLE); 
```

# css - Twitter 引导程序 - Glyphicons

> ID：12305688
> 
> 赞同：2
> 
> 时间：2012-09-06T17:51:06.407
> 
> 标签：css, twitter-bootstrap

我正在使用亚马逊 s3。

我的字形图标不显示。

我在脑海中添加了以下内容

```
<style>
[class^="icon-"],
[class*=" icon-"] {
  display: inline-block;
  width: 14px;
  height: 14px;
  margin-top: 1px;
  *margin-right: .3em;
  line-height: 14px;
  vertical-align: text-top;
  background-image: url("https://s3.amazonaws.com/BUCKET/img/glyphicons-halflings.png");
  background-position: 14px 14px;
  background-repeat: no-repeat;
}

</style> 
```

我以为它会覆盖旧路径，但我仍然看不到字形。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T07:26:41.163

每个精灵都有一个`background-position`它所在的位置，并且您正在使用该样式覆盖它们。由于您只想更改精灵的来源，请使用：

```
[class^="icon-"],
[class*=" icon-"] {
    background-image: url("https://s3.amazonaws.com/BUCKET/img/glyphicons-halflings.png");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T06:29:09.057

我有同样的问题 - 并将其范围缩小到`.css`使用生产 CDN 而不是 TEST。

在 heroku 上，我已经准备`RAILS_ENV`好`RACK_ENV`进行测试，但它仍然使用生产 CDN 编译 CSS。

其他资产显示正确的 CDN，由于以下原因，似乎使用了 Prod CDN：

```
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png'); 
```

# couchdb - 经过身份验证的用户的 Couchdb-lucene 和临时查询

> ID：12305692
> 
> 赞同：1
> 
> 时间：2012-09-06T17:51:20.900
> 
> 标签：couchdb, couchdb-lucene

我正在使用 CouchDB 存储来自各种来源的数据，并使用 couchdb-lucene 来允许临时查询。这对我很重要，因为我在提要中显示数据并且我希望此提要可过滤。CL 似乎非常适合。

但是，我还想为提要应用程序引入权限 - 用户应该只有在他/她有权查看提要项目时才能看到它。

现在，我希望能够**运行临时查询，并且只返回当前经过身份验证的用户有权读取的提要项目**。

我能想到的唯一解决方案（到目前为止）是在每个提要项目中添加一个“权限”字段，我在其中存储其他用户的所有权限（显然跳过了根本没有权限的用户）

```
permissions: [{user_id: '123', read: true, write: true}, ...] 
```

然后在 CL 中索引这个数组。

虽然这可能会奏效，但我觉得被迫将权限元数据嵌套在提要项目中有点糟糕......它甚至可能比将其分开更好的解决方案，但我只是不喜欢我似乎不喜欢在这里有一个选择。

唯一的其他解决方案（嗯，除了转储 CouchDB 之外）是运行临时查询而不关心权限，然后在选择所有“我的项目”的服务器上运行第二个查询并进行设置交集。但是这些集合可能很大（如果我将它分块，它可能需要很多 DB 请求 => 慢）。

我的解决方案很好还是有更好的解决方案？还是 CouchDB 不适合此类查询？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T05:41:15.653

将权限数据保留在文档本身上，您走在正确的道路上。这将是您稍后构建视图的最简单方法，这将使您能够检查用户权限。所以不要担心，让它朝那个方向流动。当您使用 SQL 和 RDBMS 时，对嵌套数据的感觉很糟糕可能来自以前的时代，您希望在其中规范化每个表的地狱。这一次完全不同:)

顺便说一句，在 CouchDB 中执行“JOINS”的唯一可能性是使用[Linked Documents](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Linked_documents)。如果您有兴趣，可以尝试一下。但是，它不允许您在创建视图时查看链接文档的内部。

# internet-explorer - Crystal Report ASP.NET 查看器和 IE 10

> ID：12305698
> 
> 赞同：0
> 
> 时间：2012-09-06T17:51:56.953
> 
> 标签：internet-explorer, crystal-reports, internet-explorer-10

在 IE 10.0 的 ASP.NET Crystal Report 查看器中查看 Crystal Reports 似乎存在问题。我在开发者工具中切换 IE 10 以在 IE 9 模式下运行，然后我可以看到报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T09:03:46.787

我不小心遇到了一个奇怪的修复：在表单加载事件上输出一个字符串（除了空格）随后允许查看器在 IE10 中正确呈现

```
 Dim vBrowser As System.Web.HttpBrowserCapabilities = Request.Browser
 If vBrowser.Type = "IE10" And vBrowser.MajorVersion > 9 Then
     Response.Write(".")
 End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:25:41.773

显然，SAP 还没有开始在 IE 10 / Windows 8 上工作。 [http://scn.sap.com/thread/3233406](http://scn.sap.com/thread/3233406)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T16:03:42.453

我正在使用经典 asp 下的 CR XI ActiveX 查看器控件。我发现我的报告在 IE 10 下是空白的。使用兼容模式可以让报告正常工作。问题是 IE 10 显然对 dom 事件的“假定”子名称更加挑剔，例如我和可能许多其他人使用`window_onload`的页面中的事件。`SmartViewerActiveX.asp`在 SAP 的原始文件中，子文件写为`Window_Onload`. （注意大写）有两种方法可以解决这个问题：将此文本添加`onload="Window_Onload;"`到正文中，或者简单地删除原始子名称中的大写字母。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T21:14:40.773

只需添加此样式表即可神奇地修复：

```
.hideableFrame {
        display:none;
} 
```

快乐编码:)

# java - 解决错误：日志已与具有多个实例的 atomikos 一起使用

> ID：12305700
> 
> 赞同：7
> 
> 时间：2012-09-06T17:52:00.253
> 
> 标签：java, atomikos

我只在带有 atomikos 的实时服务器上遇到问题，在我的本地服务器上它运行良好。

我在服务器上遇到的问题是

init() 中的错误：日志已在使用中？

完整的异常堆栈跟踪

```
java.lang.RuntimeException: Log already in use?
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.createDefault(UserTransactionServiceImp.java:205)
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTransactionServiceImp.java:265)
    at com.atomikos.icatch.config.UserTransactionServiceImp.init(UserTransactionServiceImp.java:405)
    at com.atomikos.icatch.jta.UserTransactionImp.checkSetup(UserTransactionImp.java:100)
    at com.atomikos.icatch.jta.UserTransactionImp.begin(UserTransactionImp.java:115)
    at com.vs.framework.service.BlfServiceAtomIkosBean.executeService(BlfServiceAtomIkosBean.java:32)
    at com.dbhl.app.presentation.action.CreateUnitTypeAction.execute(CreateUnitTypeAction.java:128)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)
com.atomikos.icatch.SysException: Error in init(): Log already in use?
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTransactionServiceImp.java:333)
    at com.atomikos.icatch.config.UserTransactionServiceImp.init(UserTransactionServiceImp.java:405)
    at com.atomikos.icatch.jta.UserTransactionImp.checkSetup(UserTransactionImp.java:100)
    at com.atomikos.icatch.jta.UserTransactionImp.begin(UserTransactionImp.java:115)
    at com.vs.framework.service.BlfServiceAtomIkosBean.executeService(BlfServiceAtomIkosBean.java:32)
    at com.dbhl.app.presentation.action.CreateUnitTypeAction.execute(CreateUnitTypeAction.java:128)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.RuntimeException: Log already in use?
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.createDefault(UserTransactionServiceImp.java:205)
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTransactionServiceImp.java:265)
    ... 31 more
Nested exception is: 
java.lang.RuntimeException: Log already in use?
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.createDefault(UserTransactionServiceImp.java:205)
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTransactionServiceImp.java:265)
    at com.atomikos.icatch.config.UserTransactionServiceImp.init(UserTransactionServiceImp.java:405)
    at com.atomikos.icatch.jta.UserTransactionImp.checkSetup(UserTransactionImp.java:100)
    at com.atomikos.icatch.jta.UserTransactionImp.begin(UserTransactionImp.java:115)
    at com.vs.framework.service.BlfServiceAtomIkosBean.executeService(BlfServiceAtomIkosBean.java:32)
    at com.dbhl.app.presentation.action.CreateUnitTypeAction.execute(CreateUnitTypeAction.java:128)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)
ERROR: the specified log seems to be in use already. Make sure that no other instance is running, or kill any pending process if needed.
java.lang.RuntimeException: Log already in use?
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.createDefault(UserTransactionServiceImp.java:205)
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTransactionServiceImp.java:265)
    at com.atomikos.icatch.config.UserTransactionServiceImp.init(UserTransactionServiceImp.java:405)
    at com.atomikos.icatch.jta.UserTransactionImp.checkSetup(UserTransactionImp.java:100)
    at com.atomikos.icatch.jta.UserTransactionImp.rollback(UserTransactionImp.java:140)
    at com.vs.framework.service.BlfServiceAtomIkosBean.executeService(BlfServiceAtomIkosBean.java:80)
    at com.dbhl.app.presentation.action.CreateUnitTypeAction.execute(CreateUnitTypeAction.java:128)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)
com.atomikos.icatch.SysException: Error in init(): Log already in use?
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTransactionServiceImp.java:333)
    at com.atomikos.icatch.config.UserTransactionServiceImp.init(UserTransactionServiceImp.java:405)
    at com.atomikos.icatch.jta.UserTransactionImp.checkSetup(UserTransactionImp.java:100)
    at com.atomikos.icatch.jta.UserTransactionImp.rollback(UserTransactionImp.java:140)
    at com.vs.framework.service.BlfServiceAtomIkosBean.executeService(BlfServiceAtomIkosBean.java:80)
    at com.dbhl.app.presentation.action.CreateUnitTypeAction.execute(CreateUnitTypeAction.java:128)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.RuntimeException: Log already in use?
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.createDefault(UserTransactionServiceImp.java:205)
    at com.atomikos.icatch.standalone.UserTransactionServiceImp.init(UserTransactionServiceImp.java:265)
    ... 31 more
Nested exception is: 
```

[当我从这里](https://wso2.org/jira/browse/CARBON-10378)搜索通用解决方案时

```
Are these instances running in a single machine? .. like, are those running in an app server, where it is pointed to a single CARBON_HOME? .. if so, the "transaction.properties" file have to be removed from /repository/lib and should be put into each WARs classpath location. And each "transaction.properties" file has to be edited to change the log file location. This error comes when more that one instance is trying to access the same transaction log file of Atomikos, or there's also a chance that the earlier JVM shutdown was not done properly and the lock file wasn't released. In that case, you simply have to remove the log file at /repository/data/tmlog.lck file and restart the server. 
```

我遵循这个建议。从 tomcat/common/lib 中删除属性文件到我的战争类路径。相应地更改了上述目录。我还检查了 tmlog 文件，但它在服务器上不存在。

但没有任何效果。仍然发生错误。

[如果你在这里](http://www.atomikos.com/Documentation/KnownProblems#Log_Already_In_Use)看到 atomikos 页面

```
The lock file in question is created to protect the transaction logs against accidental duplicate startups. Otherwise, the logs could get corrupted when two instances of the same transaction manager are recovering on the same data. Normally, it suffices to follow the hints and then delete the lock file manually if needed. 
```

它只是说明遵循提示，**但提示在哪里？**

请帮我重新解决它。

atomikos 是开源的，

我检查了源代码，发现以下行抛出异常

```
if ( enableRecovery ) {
             //ISSUE 10077: don't complain about lock file if no logging
            try {
                lockfilestream_ = new FileOutputStream ( lockfile_ );
                lock_ = lockfilestream_.getChannel().tryLock();
                lockfile_.deleteOnExit();
            } catch ( OverlappingFileLockException failedToGetLock ) {
                //happens on windows
                lock_ = null;
            } catch ( IOException failedToGetLock ) {
                //happens on windows
                lock_ = null;
            }
            if ( lock_ == null ) {
                 System.err.println ( "ERROR: the specified log seems to be "
                        + "in use already. Make sure that no other instance is "
                        + "running, or kill any pending process if needed." );
                throw new RuntimeException ( "Log already in use?" );
            }
        } 
```

**我已经在 jta.properties com.atomikos.icatch.enable_logging=false 中将调试设置为 false 并重新启动我的服务器，但仍然是同样的错误。**

## Guy Padron 回答后更新

> @Guy 请原谅，感谢您的回答。我知道​​您是 AtomIkos 的所有者，我经常收到您的邮件。问题在于，对于您的免费开源版本，您在代码中硬编码了默认属性，因此，如果任何用户联系从属性文件中设置它，它不会被覆盖。在我的情况下是什么问题，日志文件是由 atomikos 通过其默认属性在当前目录中创建的，因此在本地环境中没有问题，但是每当它上传到共享主机时，创建的是服务器 bin 文件夹内的文件或目录不允许，因此出现上述错误，所以我调试代码，根据我的需要修改它并在 2012 年 8 月成功。

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-12T14:32:42.907

当您部署了多个项目（使用 Atomikos）时，由于同时写入 atomikos 的日志文件（*错误消息：'Log already in use'*）而出现此问题。

要解决此问题*，您必须自定义日志文件名*，*在 atomikos 配置中**设置属性* **'com.atomikos.icatch.log_base_name'** ，示例如下：

 *```
<bean id="atomikosUserTransactionService" class="com.atomikos.icatch.config.UserTransactionServiceImp"
      init-method="init" destroy-method="shutdownForce">
    <constructor-arg>
        <props>
            <prop key="com.atomikos.icatch.service">com.atomikos.icatch.standalone.UserTransactionServiceFactory</prop>
            <prop key="com.atomikos.icatch.log_base_name">your_project_name_log</prop>
            <prop key="com.atomikos.icatch.output_dir">../standalone/log/</prop>
            <prop key="com.atomikos.icatch.log_base_dir">../standalone/log/</prop>
        </props>
    </constructor-arg>
</bean> 
```

PS：请注意，我已经更改了属性“ **com.atomikos.icatch.output_dir** ”和“ **com.atomikos.icatch.log_base_dir** ”，只是为了让事情井井有条，在 JBoss 日志文件的同一目录中创建 atomikos 的日志文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T13:47:51.763

必须删除一个锁定文件才能再次启动您的容器。它的名字是 tmlog.lck。在 Apache 7 中，它位于 APACHE_HOME/bin/

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T12:01:51.000

在我们的案例中，原因完全不同：

我们将我们的 tomcat8 实例配置为包含所有需要的 Atomikos .jar。这主要如下所述： [Atomikos Tomcat 7 Configuration](https://www.atomikos.com/Documentation/Tomcat7Integration35)

在我们的 Spring 应用程序配置中，我们需要定义 J2eeTransactionManager（由于[这里](https://blog.codecentric.de/2012/03/integration-eines-transaktionsmanagers-in-tomcat-zur-nutzung-in-spring-und-openjpa/)已经描述了“事务暂停不可用”问题）：

```
@Bean
public TransactionManager atomikosTransactionManager() {
    return new J2eeTransactionManager();
}

@Bean
public PlatformTransactionManager txManager() throws Throwable {
    JtaTransactionManager jtaTransactionManager = new JtaTransactionManager();
    jtaTransactionManager.setAllowCustomIsolationLevels(true);
    jtaTransactionManager.setTransactionManager(atomikosTransactionManager());
    UserTransaction ut = userTransaction();
    jtaTransactionManager.setUserTransaction(ut);
    return  jtaTransactionManager;
} 
```

因此，您需要在应用程序中引用 pom.xml，但此引用必须具有“提供”范围：

```
 <dependency>
        <groupId>com.atomikos</groupId>
        <artifactId>transactions-jta</artifactId>
        <version>3.9.3</version>
        <scope>provided</scope>
    </dependency> 
```

在我们的例子中，我们省略了范围，因此 tomcat 和我们的应用程序创建了它自己的事务管理器实例，这导致了“日志已在使用”错误消息。

所以删除 .lock 文件在这里也有帮助。删除锁文件后，应用程序特定的事务管理器可以获得锁并且运行良好；但是在tomcat重新启动后，您会再次收到相同的错误消息。

由于我在其他地方找不到这个原因，也许这对其他人有帮助......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-19T08:57:34.853

这是一个权限问题。我在我的`jta.properties`.（确认目录存在）中添加了这两行。

```
com.atomikos.icatch.output_dir = /data/logs/XXX/
com.atomikos.icatch.log_base_dir = /data/logs/XXX/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T20:38:04.663

您确定在您的生产服务器上没有运行任何其他可以锁定 atomikos 事务日志的 JVM 吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-23T17:52:08.247

可能有点晚了，但如果您有多个使用相同日志的事务管理器实例 (JVM)，通常会发生这种情况。尽量不要那样做:-)

高温高压

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-30T18:15:32.340

我也遇到了同样的错误，但情况不同。Atomikos 创建了一个不同的 java 进程，在我的情况下，java 进程在 unix 框中无限循环运行，尽管我停止了 tomcat 容器。

所以我发现使用以下命令的java进程。

```
ps -ef | grep java | grep -v grep 
```

并使用此命令杀死

```
kill -9 pid 
```

再次启动tomcat，它工作正常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-08T09:57:07.333

```
<bean id="atomikosUserTransactionService" class="com.atomikos.icatch.config.UserTransactionServiceImp"
  init-method="init" destroy-method="shutdownForce">
<constructor-arg>
    <props>
        <prop key="com.atomikos.icatch.service">com.atomikos.icatch.standalone.UserTransactionServiceFactory</prop>
        <prop key="com.atomikos.icatch.log_base_name">your_project_name_log</prop>
        <prop key="com.atomikos.icatch.output_dir">../standalone/log/</prop>
        <prop key="com.atomikos.icatch.log_base_dir">../standalone/log/</prop>
    </props>
</constructor-arg> 
```

这对我有用，但我不明白 your_project_name_log 在此代码中的作用。*

# java - 调试 JNLP 应用程序

> ID：12305706
> 
> 赞同：2
> 
> 时间：2012-09-06T17:52:19.167
> 
> 标签：java, debugging, jnlp, java-web-start

我想调试一个 JNLP 应用程序。我正在使用以下启动它。

**javaws -verbose -J-Xdebug -J-Xnoagent -J-Xrunjdwp:transport=dt_socket,server=n,suspend=y,address=8989 myjnlp.jnlp**

我认为由于[此处](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/troubleshooting.03.06.html)描述的“双重启动” ，启动了一个新的 VM，它没有采用我的调试参数。

我能够连接到第一个虚拟机（因为它处于suspend = y），但在几秒钟内应用程序结束，并且启动了一个新的java实例并且它不在调试中。这就是我在控制台中看到的（个人信息用...删除）

*无法从缓存启动。将尝试在线模式。【部分需要的资源没有缓存】 创建临时目录：C:\DOCUME~1...\LOCALS~1\Temp\FrontendApplication-8.2.1.0-... 创建安装目录：C:\DOCUME~1。 ..\LOCALS~1\Temp\FrontendApplication-8.2.1.0-...\install localVersion: 20120409141901452 appVersion: 20120409141901452 新版本可用: false 正在下载档案... pluginDir 是 C:\DOCUME~1...\LOCALS~ 1\Temp\FrontendApplication-8.2.1.0-...\install\plugins 框架：C:\DOCUME~1...\LOCALS~1\Temp\FrontendApplication-8.2.1.0-...\install\plugins\org .eclipse.osgi_3.6.2.R36x_v20110210.jar 调用启动器...*

# javascript - javascript动画文本框条目

> ID：12305709
> 
> 赞同：1
> 
> 时间：2012-09-06T17:52:30.970
> 
> 标签：javascript, jquery-animate, tag-cloud

我需要实现以下内容，我有一个输入框和一个提交按钮以及输入框下方的方形 div/canvas 元素。用户输入一个单词并单击提交按钮，需要发生以下情况

1.  输入的文本必须在随机位置移动（动画）到画布/div

2.  文本不应与任何其他文本重叠。

在 Javascript 中实现这一点的最佳方法是什么？. 是否有任何示例或库可以使其易于实现？我可以使用任何标签云库来做到这一点吗？

任何指针表示赞赏。谢谢。

# java - RSA 加密 Java、密钥交换

> ID：12305711
> 
> 赞同：0
> 
> 时间：2012-09-06T17:52:42.137
> 
> 标签：java, cryptography, rsa

尝试使用 RSA 算法加密文本消息。要加密消息，需要来自客户端的密钥。密钥是如何交换的。我研究了一些密钥交换算法，但找不到任何示例代码。

可以有人指导教程，关于如何在互联网上交换密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:03:36.177

您可以将此示例[程序](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/index.jsp?topic=/com.ibm.java.security.component.doc/security-component/JceDocs/api_sampleprograms.html)用于密钥交换算法。它是两方之间的 Diffie-Hellman 密钥交换。试着理解这里的算法是[什么](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:07:11.030

分发密钥的主要方法是通过例如 PGP，它使用来自其他受信任方的签名来授予对密钥的信任。X509 证书，例如在浏览器中使用的证书，使用证书链，其中来自更高权限的证书被明确信任。这些信任证书的方法称为 PKI，即公钥基础设施。

如果您没有建立信任，您可以通过邮件互相发送证书或公钥，然后计算证书上的“指纹”。然后使用带外程序（电话、信封等）验证指纹。或者只是在检查彼此的凭据后见面并交换 USB 拇指驱动器。

# sql - SQL 错误 (1054) 未知列

> ID：12305713
> 
> 赞同：0
> 
> 时间：2012-09-06T17:52:47.327
> 
> 标签：sql

我在这里有这个长的 sql 查询..

```
SELECT c.clientid, c.clientname, c.billingdate, 
case when (select ifnull(sum(total), 0) from invoice i
where i.client = c.clientid and i.isdeleted = 0) - (select ifnull(sum(p.amount), 0) from payment p inner join invoice i on p.invoice = i.invoiceid
where i.client = c.clientid and i.isdeleted = 0) < 0 and i.date < '2012-01-01' then (select ii.total from invoice ii where ii.client = c.clientid order by ii.invoiceid desc limit 1)  else (select ifnull(sum(total), 0) from invoice i
where i.client = c.clientid and i.isdeleted = 0) - (select ifnull(sum(p.amount), 0) from payment p inner join invoice i on p.invoice = i.invoiceid
where i.client = c.clientid and i.isdeleted = 0) end as remaining,
case c.isactive+0
        when '1' then 'Stop'
        else 'Start' 
        end as Active
FROM client c 
ORDER BY clientname 
```

我收到此查询的错误，其中一行`i.date < '2012-01-01'`说这`i.date`是字段列表中的未知列...我该如何解决这个问题？

谢谢，J

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:58:07.933

您`alias i`在子查询中使用了此处定义的范围外

```
(select ifnull(sum(total), 0) from invoice i
where i.client = c.clientid and i.isdeleted = 0) 
```

与`()`

你应该改变包括这个：

```
and i.date < '2012-01-01' 
```

在两个选择中

```
SELECT c.clientid, c.clientname, c.billingdate, 
case when (select ifnull(sum(total), 0) from invoice i
where i.client = c.clientid and i.isdeleted = 0 and i.date < '2012-01-01' ) - (select ifnull(sum(p.amount), 0) from payment p inner join invoice i on p.invoice = i.invoiceid
where i.client = c.clientid and i.isdeleted = 0 and i.date < '2012-01-01' ) < 0 then (select ii.total from invoice ii where ii.client = c.clientid order by ii.invoiceid desc limit 1)  else (select ifnull(sum(total), 0) from invoice i
where i.client = c.clientid and i.isdeleted = 0) - (select ifnull(sum(p.amount), 0) from payment p inner join invoice i on p.invoice = i.invoiceid
where i.client = c.clientid and i.isdeleted = 0) end as remaining,
case c.isactive+0
        when '1' then 'Stop'
        else 'Start' 
        end as Active
FROM client c 
ORDER BY clientname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:01:20.957

你是 i.date 在子查询之外。就在这儿

```
SELECT c.clientid, c.clientname, c.billingdate, 
CASE WHEN 
    (select ifnull(sum(total), 0) from invoice i where i.client = c.clientid and i.isdeleted = 0)
    - 
    (select ifnull(sum(p.amount), 0) from payment p inner join invoice i on p.invoice = i.invoiceid where i.client = c.clientid and i.isdeleted = 0)
    < 0 
    and i.date < '2012-01-01'  -- THIS IS NOT PART OF THE SUBQUERY
THEN 
    (select ii.total from invoice ii where ii.client = c.clientid order by ii.invoiceid desc limit 1)  
ELSE 
    (select ifnull(sum(total), 0) from invoice i where i.client = c.clientid and i.isdeleted = 0) - (select ifnull(sum(p.amount), 0) from payment p inner join invoice i on p.invoice = i.invoiceid where i.client = c.clientid and i.isdeleted = 0) 
END as remaining,
case c.isactive+0
        when '1' then 'Stop'
        else 'Start' 
        end as Active
FROM client c 
ORDER BY clientname 
```

# asp.net-mvc-3 - “内核”在命名空间“Sitecore”中不存在

> ID：12305717
> 
> 赞同：4
> 
> 时间：2012-09-06T17:53:02.837
> 
> 标签：asp.net-mvc-3, namespaces, kernel, sitecore

遇到一个奇怪的 Sitecore 错误。使用 MVC 在 Sitecore 6.6 中将布局应用于几个不同的内容项，我收到此错误：

```
c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\95ad0ba4\20f230f7\App_Web__sitecorelayout.cshtml.5d96958d.682ppzj_.0.cs(24): error CS0234: The type or namespace name 'Kernel' does not exist in the namespace 'Sitecore' (are you missing an assembly reference?)

System.Web.HttpCompileException (0x80004005): c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\95ad0ba4\20f230f7\App_Web__sitecorelayout.cshtml.5d96958d.682ppzj_.0.cs(24): error CS0234: The type or namespace name 'Kernel' does not exist in the namespace 'Sitecore' (are you missing an assembly reference?)
at System.Web.Compilation.AssemblyBuilder.Compile()
at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromSpecificName(ControllerContext controllerContext, String name, String cacheKey, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.FindPartialView(ControllerContext controllerContext, String partialViewName, Boolean useCache)
at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
at System.Web.Mvc.HtmlHelper.FindPartialView(ViewContext viewContext, String partialViewName, ViewEngineCollection viewEngineCollection)
at System.Web.Mvc.HtmlHelper.RenderPartialInternal(String partialViewName, ViewDataDictionary viewData, Object model, TextWriter writer, ViewEngineCollection viewEngineCollection)
at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)
at Sitecore.Mvc.Presentation.ViewRenderer.Render(TextWriter writer)
at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Render(Renderer renderer, TextWriter writer, RenderRenderingArgs args)
at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Process(RenderRenderingArgs args)
at (Object , Object[] )
at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)
at Sitecore.Mvc.Pipelines.PipelineService.RunPipeline[TArgs](String pipelineName, TArgs args)
at Sitecore.Mvc.Presentation.RenderingView.Render(ViewContext viewContext, TextWriter writer)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.b__19()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

IIS 内的构建和应用程序池设置为 4 框架。我不知所措。这种情况发生在同一场景中的任何人身上吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T14:55:19.090

该问题是由于在 Views 目录中 web.config 文件的命名空间部分中添加了 Sitecore.Kernel 命名空间。删除它解决了问题。

与 Sitecore 支持部门合作解决了该问题。半小时前才想通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-04T21:56:59.187

我的问题是目标框架。当我遇到这个问题时，我正在使用 .NET 4.5。我升级到 .NET 4.6，问题就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:03:02.413

由于它是动态编译的，也许您可​​以将 sitecore dll 复制到临时 ASP.NET 文件夹中，因为显然它是在您编译而不运行时发生的，因此在 bin 中没有问题？不过只是猜测。

如果这不起作用，也许检查版本或尝试删除临时 ASP.NET 文件夹中的所有内容并重试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T02:25:30.483

我遇到过同样的问题。右键单击 References 文件夹 -> 添加引用 -> 浏览 -> 从 bin 文件夹（在您的项目中）中选择 Sitecore.Kernel -> 再次构建解决方案。

# twitter-bootstrap - Bootstrap 响应式水平布局

> ID：12305719
> 
> 赞同：0
> 
> 时间：2012-09-06T17:53:09.717
> 
> 标签：twitter-bootstrap, responsive-design

我有一个 Bootstrap 布局，但我需要它来响应并且不知道如何水平地做到这一点。 ![这是一张图片](../Images/cf0a051b22624e8be3b05b834974b432.png)

如何使用标准的 Bootstrap 布局制作该布局，同时让它具有响应性？我目前在一个流体行中有“标签”，在另一个流体行中有输入，但是当它“缩小”时，标签不再适合输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:45:49.223

您是否考虑过通过制作一个包含五个 .span 的单个 .row-fluid 以及每个跨度内另外两个 .row-fluid 来进行嵌套？这样只有一个顶级行，标签/字段应该保持在一起。

[http://jsfiddle.net/hmartiro/D2RLR/1726/](http://jsfiddle.net/hmartiro/D2RLR/1726/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:38:25.710

你必须把它分成两行，让带有标签的左行类似于

跨度2，跨度2，跨度2，跨度4，跨度2

然后第二行将以相同的方式包含输入类型

跨度2，跨度2，跨度2，跨度4，跨度2

我知道它看起来很奇怪，但它会响应。您必须坚持标签将始终保留为标题并且无法插入其各自的输入类型的想法。但这就是您切换到响应式布局时的付出和收获。

# wpf - 确定是否通过双击启动了 WPF 应用程序

> ID：12305731
> 
> 赞同：0
> 
> 时间：2012-09-06T17:54:24.750
> 
> 标签：wpf

我的目标是让 WPF 应用程序在控制台模式和 GUI 模式下运行。一切正常，直到我意识到从命令行它不会返回到提示符并且退出代码也没有正确设置。类似于这篇文章的东西：

[wpf控制台应用程序未返回提示](https://stackoverflow.com/questions/7336224/wpf-console-application-not-returning-to-prompt)

所以，我经历了一个解决方法。我将项目输出类型设置为控制台，一切正常，期待双击启动 WPF 应用程序时，它同时显示 GUI 和控制台窗口，这是一种令人讨厌的体验。

因此，我打算隐藏该控制台窗口，但仅当通过双击启动 WPF 应用程序时才隐藏它。有没有办法确定 WPF 应用程序是否是通过双击启动的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:21:12.100

您可以在桌面上创建应用程序的快捷方式，将启动参数添加到 *.lnk 文件中的启动路径。启动应用程序后，您可以检查此参数。

# excel - 使用后期绑定订阅事件

> ID：12305736
> 
> 赞同：5
> 
> 时间：2012-09-06T17:54:42.373
> 
> 标签：excel, vba, outlook

我可以在 myOlApp 使用早期绑定的“类模块”中使用以下内容订阅 Outlook 事件。

```
'**Class Module - clsOutlookHandler **
Public WithEvents myOlApp As Outlook.Application

Private Sub Class_Initialize()
    On Error Resume Next
    Set myOlApp = GetObject(, "Outlook.Application")
    If Err.Number = 429 Then
        Set myOlApp = CreateObject("Outlook.Application")
        Err.Clear
    End If
    On Error GoTo 0
End Sub 
```

为此，我需要确保检查 Microsoft Outlook XX.X 对象库的引用。

是否可以使用后期绑定订阅 Outlook（或任何应用程序）事件？

我知道以下行不通。VBA中有解决方法吗？

```
Public WithEvents myOlApp As Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T02:03:08.550

如果您包含对特定版本的 Microsoft Outlook（或与此相关的任何其他软件）的引用，并且最终用户拥有该软件的更高版本，则该引用仍然有效，前提是该软件的供应商已设置up 版本继承正确，并且没有进行重大更改。

但是，如果最终用户拥有该软件的早期版本（例如 Outlook），则该引用将不起作用，因此您需要设置对您打算支持的该软件的最早版本的引用。

这样，您可以完全避免后期绑定，并且仍然允许引用软件的多个版本。

您只需要注意不要将对所引用软件的旧版本的引用更新为较新版本，否则您可能会破坏使用旧版本软件的用户的工作簿。

# c# - Rx IObservable - 返回第一个 IObservable 流以获取值

> ID：12305742
> 
> 赞同：0
> 
> 时间：2012-09-06T17:54:55.610
> 
> 标签：c#, .net, system.reactive

我正在创建两个（或更多）`IObservable<T>`相同 T 的 s。它们是从中生成的`Task<IEnumerable<T>>`，其中一个可以比其他更快地返回。我只关心`IObservable`返回第一个值的那个——这是我从那时起使用的那个。

我记得参加了在剑桥举行的 Jon Skeet 演讲，他以一种非常简洁的方式使用 TPL 做到了这一点，但我不记得是如何做到的！理想情况下，我会得到这样的方法：

```
IObservable<T> PickFastestObservable<T>(IEnumerable<IObservable<T>> slowObservables); 
```

但如果我必须直接在任务上做，我可能会解决一些问题。

我正在努力让自己获得一些我有信心的东西。

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:57:26.043

我想你想要[Observable.Amb](http://msdn.microsoft.com/en-us/library/hh229115%28v=vs.103%29.aspx)例如

```
IObservable<T> fastest = slowObservables.Amb(); 
```

# xcode - 在 Xcode 4.4 中打开缺少 @synthesize 警告

> ID：12305748
> 
> 赞同：8
> 
> 时间：2012-09-06T17:55:13.913
> 
> 标签：xcode, xcode4.4

我想找回关于缺少 @synthesize 命令的 Xcode 4.3 警告。我有一个尚未升级到 Xcode 4.4 的 CI 环境，并且在我的 Xcode 4.4 中没有警告，我发现自己一直忘记这样做，然后在我的 Xcode 4.3 CI 环境的内置 IPA 获得后不得不返回并更正它测试。

请告诉我有一种方法可以重新打开它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T18:13:37.563

隐式合成属性有一个编译器警告：`-Wobjc-missing-property-synthesis`. 如果你打开它，它会给你警告没有匹配`@synthesize`或`@dynamic`指令的声明属性。我觉得这非常有用。

Xcode 构建设置的名称是，`CLANG_WARN_OBJC_MISSING_PROPERTY_SYNTHESIS`或者，在构建设置用户界面中，**“隐式综合属性”**。

# android - 在android中如何在gridview中引入网格线

> ID：12305755
> 
> 赞同：3
> 
> 时间：2012-09-06T17:55:34.657
> 
> 标签：android, gridview, gridlines

在搜索了很多之后，我能够找到我的问题的解决方案，在 Android 中如何

我可以让网格线在我的网格视图中可见吗......因为它看起来很简单，但我仍然无法解决

该问题确实提出了一些有用的建议，以使网格线或边框在

网格视图.....

[GridView 上的网格线](https://stackoverflow.com/questions/6010311/grid-lines-on-a-gridview)

遵循为这个问题建议的答案，但不知道如何创建 gridview 的子类并覆盖其方法，,..?? 提出解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:09:47.987

如果您需要更简单的解决方案，您可以在为每个网格项目绘制的自定义视图中添加要绘制的边框。

示例代码：

```
public class ExampleAdapter extends BaseAdapter {
    private Activity activity;
    private LayoutInflater inflater;
    public ExampleAdapter(Activity activity)
    {
        this.activity = activity;
        this.inflater = activity.getLayoutInflater();
    }

    @Override
    public View getView(int pos, View convertView, ViewgGroup parent) {
        ViewHolder holder = null;
        if(converView == null) {
            convertView = inflater.inflate(R.layout.view_example);      
            holder = new ViewHolder();
            //Set holder ids here
            holder.title = convertView.findViewById(R.id.title)
        }
        //Populate your holder here with data here.
        holder.title.setText("My Awesome Title!");
        convertView.setTag(holder);
        return convertView;
    } 
}

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="@dimen/grid_item_width"
    android:layout_height="@dimen/grid_item_height"
    android:background="@color/grid_border"
    android:padding="1dip" >
    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@android:color/white" >
        <TextView android:id="@+id/title" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content">
    </FrameLayout>
</FrameLayout> 
```

# javascript - 如何在javascript中使用某些日历范围值填充下拉列表框

> ID：12305760
> 
> 赞同：-2
> 
> 时间：2012-09-06T17:56:22.887
> 
> 标签：javascript, datepicker

我有 3 个下拉列表框，`year`、`month`和`day`。

我需要填充从当前日期开始的最后 1095 天的值。目前，我通过在带有日历系统表的 SQL 中运行查询来做到这一点。有没有办法直接在javascript中做到这一点？

我使用 SQL 的原因是从今天开始的 1095 天内我无法关联 3 个下拉框。例如，假设今天是 2009 年 9 月 6 日。如果我为 选择 2009 `year`，那么`month`下拉列表应该从 9 月开始，`day`下拉列表应该从 6 开始。

我需要用户能够灵活地选择过去 1095 天中的任何日期。所以首先用户选择 2009 .only 然后应该填充月份下拉框。它应该只有从 9 月到 12 月的月份。然后选择月份为9 月只有 1 到 30 应该填充在天下拉框中。我目前正在通过使用 sql 中的系统日期表来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:42:10.527

代码有点困难，但恕我直言，以下效果很好。做了两个类似的函数，第一个调用onload初始化所有三个选择框，第二个在onchange事件发生时调用：

```
function init_dates() {

    var now = new Date();
    var newest = [];
    newest[0] = now.getFullYear();
    newest[1] = now.getMonth() + 1;
    newest[2] = now.getDate();

    var old = new Date(now.getTime() - 1095 * 86400 * 1000);
    var oldest = [];
    oldest[0] = old.getFullYear();
    oldest[1] = old.getMonth() + 1;
    oldest[2] = old.getDate();

    // YEARS
    var opt;
    var i = oldest[0];
    var year = document.getElementById('year');
    while (i <= newest[0]) {
        opt = document.createElement('option');
        opt.value = i;
        opt.innerHTML = i;
        if (i == newest[0]) {
            opt.selected = 'selected';
        }
        year.appendChild(opt);
        i++;
    }

    // MONTHS
    var minmonth = (year.value == oldest[0]) ? oldest[1] : 1;
    var maxmonth = (year.value == newest[0]) ? newest[1] : 12;
    var month = document.getElementById('month');
    while (minmonth <= maxmonth) {
        opt = document.createElement('option');
        opt.value = minmonth;
        opt.innerHTML = minmonth;
        month.appendChild(opt);
        minmonth++;
    }

    // DAYS
    var minday = (year.value == oldest[0] && month.value == oldest[1]) ? oldest[2] : 1;
    var maxday = (year.value == newest[0] && month.value == newest[1]) ? newest[2] : 33;
    if (maxday == 33) {
        // find correct maxday
        maxday = 27;
        var d = new Date(year.value, month.value - 1, maxday, 0, 0, 0, 0);
        while (d.getDate() > 1) {
            maxday++;
            d = new Date(year.value, month.value - 1, maxday, 0, 0, 0, 0);
        }
        maxday--;
    }
    var day = document.getElementById('day');
    while (minday <= maxday) {
        opt = document.createElement('option');
        opt.value = minday;
        opt.innerHTML = minday;
        day.appendChild(opt);
        minday++;
    }
}

function update_dates() {
    var now = new Date();
    var newest = [];
    newest[0] = now.getFullYear();
    newest[1] = now.getMonth() + 1;
    newest[2] = now.getDate();

    var old = new Date(now.getTime() - 1095 * 86400 * 1000);
    var oldest = [];
    oldest[0] = old.getFullYear();
    oldest[1] = old.getMonth() + 1;
    oldest[2] = old.getDate();

    //selected date in selectboxes
    var year = document.getElementById('year');
    var month = document.getElementById('month');
    var day = document.getElementById('day');
    var sel = new Date(year.value, month.value-1, day.value, 0,0,0,0);
    var selected = [];
    selected[0] = sel.getFullYear();
    selected[1] = sel.getMonth() + 1;
    selected[2] = sel.getDate();
    year.innerHTML = month.innerHTML = day.innerHTML = ''; //clear old list

    // YEARS
    var opt;
    var i = oldest[0];
    while (i <= newest[0]) {
        opt = document.createElement('option');
        opt.value = i;
        opt.innerHTML = i;
        if (i == selected[0]) {
            opt.selected = 'selected';
        }
        year.appendChild(opt);
        i++;
    }

    // MONTHS
    var minmonth = (year.value == oldest[0]) ? oldest[1] : 1;
    var maxmonth = (year.value == newest[0]) ? newest[1] : 12;
    while (minmonth <= maxmonth) {
        opt = document.createElement('option');
        opt.value = minmonth;
        opt.innerHTML = minmonth;
        if (minmonth== selected[1]) {
            opt.selected = 'selected';
        }
        month.appendChild(opt);
        minmonth++;
    }

    // DAYS
    var minday = (year.value == oldest[0] && month.value == oldest[1]) ? oldest[2] : 1;
    var maxday = (year.value == newest[0] && month.value == newest[1]) ? newest[2] : 33;
    if (maxday == 33) {
        // find correct maxday
        maxday = 27;
        var d = new Date(year.value, month.value - 1, maxday, 0, 0, 0, 0);
        while (d.getDate() > 1) {
            maxday++;
            d = new Date(year.value, month.value - 1, maxday, 0, 0, 0, 0);
        }
        maxday--;
    }
    while (minday <= maxday) {
        opt = document.createElement('option');
        opt.value = minday;
        opt.innerHTML = minday;
        day.appendChild(opt);
        if (minday == selected[2]) {
            opt.selected = 'selected';
        }
        minday++;
    }
} 
```

[http://jsfiddle.net/gCDXs/1/](http://jsfiddle.net/gCDXs/1/)

# delphi - SQL查询没有在delphi中完成

> ID：12305761
> 
> 赞同：1
> 
> 时间：2012-09-06T17:56:26.127
> 
> 标签：delphi, sql-server-2005, delphi-2010

我将 SQL Server 2005 与 Delphi 2010 一起使用

`ventas`我有一张`id_venta`(PK)= id_sale, `total`(of the sale), (more values), `estado`=state(active/inactive) 和`cumulative`.

该表记录了一个商店的所有商品的销售额，我需要逐行记录总和的累计。如果一天中有多个班次，我使用 state 字段来指定班次中的销售额。我使用这个查询：

```
Declare @id integer; 
set @id=(Select min(id_venta) from ventas where estado='activo');

while(select @id)<=(Select max(id_venta) from ventas) 
  begin 
    update ventas set acumulado=(select sum(total) from ventas 
    where id_venta<=@id and estado='activo') where id_venta=@id
    select @id=@id+1 
  end 
```

当我在 SQL 上运行它时，这个查询完全符合我的要求，但是当我在 delphi 上执行它时，它只给了我大约 151 行 431 的累积，没有完成。

这是我的德尔福代码：

```
conect.Q_equivalencias.Active:=false;
conect.Q_equivalencias.SQL.Clear;
conect.Q_equivalencias.SQL.Add('Declare @id integer; set @id=(Select min(id_venta) from ventas where estado='+char(39)+'activo'+char(39)+' );');
conect.Q_equivalencias.SQL.Add('while(select @id)<=(Select max(id_venta) from ventas) begin');
conect.Q_equivalencias.SQL.Add('update ventas set acumulado=(select sum(total) from ventas  ');
conect.Q_equivalencias.SQL.Add('where id_venta<=@id and estado='+char(39)+'activo'+char(39)+') where id_venta=@id');
conect.Q_equivalencias.SQL.Add('select @id=@id+1 end');
conect.Q_equivalencias.ExecSQL; 
```

我该怎么做才能完成我在 Delphi 中的查询？

编辑：

刚刚发生了奇怪的事情，我尝试了`conect.Q_equivalencias.Open;`insted of `conect.Q_equivalencias.ExecSQL;`，当然它抛出了我，`error creating cursor handler` 但它完成了查询，所有行都更新了，这是为什么呢？

尝试了很多东西，似乎我在 delphi 上的查询只更新了 152 行......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:54:44.870

也许`SET NOCOUNT ON;`在查询开头添加 a 可能会解决问题。

也就是说，我会使用单个`UPDATE`语句（或者甚至更好的一个`VIEW`或计算列）而不是这样一个奇怪的查询。我不确定查询是否真的做了你真正想要做的事情，但下面的单个语句应该做同样的事情：

```
UPDATE ventas
    SET acumulado=(
        SELECT SUM(v.total)
        FROM ventas v
        WHERE v.id_venta<=ventas.id_venta AND estado='activo'
    ) WHERE id_venta>=(
        SELECT MIN(id_venta)
        FROM ventas
        WHERE estado='activo'
    ); 
```

# ruby-on-rails - Rails When Gem 如何在 Controller.rb 文件中运行特定方法

> ID：12305767
> 
> 赞同：3
> 
> 时间：2012-09-06T17:56:51.007
> 
> 标签：ruby-on-rails, ruby, cron, whenever

我希望每分钟在我的 controller.rb 文件中运行一个特定的方法。我正在考虑使用when gem for rails，但我对如何做到这一点有点困惑。

目前在 schedule.rb 我有：

```
every 1.minutes do 
runner "Server.update_all_servers"
end 
```

我不确定 runner 命令到底是做什么的。有人能解释一下这个命令到底是做什么的吗？据我了解，它调用了 Model.ModelMethod，但我需要在 application_controller.rb 中调用一个名为 update_all_servers() 的方法。是否有可能做到这一点？还是我必须将 application_controller.rb 中的任何内容移动到模型文件（例如位于 /models/server.rb 中的那个）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:17:22.540

您可以在以下位置创建一个`Server`类`/lib`：

```
class ServerUpdater
    attr_accessor :servers

    def initialize(servers = nil)
        @servers = servers || Server.all
    end

    def update_all
        servers.find_each { |server| server.update_info }
    end
end 
```

然后你可以调用`ServerUpdater.new(@servers).update_all`你的控制器。

在你的 cron 工作中，你会打电话给`ServerUpdater.new(Server.all).update_all`

而且您需要`update_info`在模型中包含一个包含逻辑的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:48:57.350

我有同样的问题，我直接解决了，不需要在 lib 中添加任何东西，所以我想分享：

在您想要调用控制器操作的情况下，您所做的就是在模型方法中包含所有逻辑，无论如何这是最佳实践。然后跑步者可以简单地调用模型方法：

```
every 1.minutes do 
  runner "Server.update_all_servers"
end 
```

Server.update_all_servers 必须是 Server 模型中的方法，而不是控制器操作。

# wordpress - wordpress the_content 在循环外解析

> ID：12305778
> 
> 赞同：7
> 
> 时间：2012-09-06T17:57:40.993
> 
> 标签：wordpress, parsing, function

`the_content()`函数以这样的方式解析来自数据库的文本，例如段落将`<p>`在它们周围获得标签。但是，当您在循环之外检索内容时，您不能使用`the_content()`. 我目前正在使用`$db_object->post_content`. 但是，这样做，文本不会像 with 那样被解析`the_content()`，所以通过添加`<p>`. 只是给出纯文本。

PHP中是否有一个函数，或者是否有人知道一个等效的函数，它以相同的方式解析文本`the_content()`并在文本周围输出正确的标签。

提前谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T18:10:00.373

是的。采用

```
$content = $db_object->post_content;
$content = apply_filters( 'the_content', $content ); 
```

# backbone.js - 骨干木偶模块

> ID：12305779
> 
> 赞同：0
> 
> 时间：2012-09-06T17:57:43.823
> 
> 标签：backbone.js, marionette

我有以下包含的代码（代码是从 CoffeeScript 生成的）：

```
console.log('test1');

application.module('core', function(module, application, Backbone, Marionette, $, _) {
  console.log('test2');
  return module.TodoItem = (function(_super) {

    __extends(TodoItem, _super);

    function TodoItem() {
      return TodoItem.__super__.constructor.apply(this, arguments);
    }

    return TodoItem;

  })(Backbone.Model);
}); 
```

查看[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.module.md](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.module.md)在我看来，这段代码应该可以工作，但是似乎核心模块的功能永远不会得到执行（test1 打印到控制台，但 test2 没有）。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T00:37:51.437

模块的定义函数在模块启动之前不会被执行。这可以通过调用`application.start()`并让应用程序启动所有模块，或者通过调用`application.module('core').start()`直接启动模块来实现。

另外两个注意事项：

1.  没有必要`return module.TodoItem`......你可以分配`module.TodoItem = ...`，它将在`application.core`命名空间上可用。

2.  看起来您的 TodoItem 只是从 Backbone.Model 扩展而来。这样做会更骨干惯用`module.TodoItem = Backbone.Model.extend({...})`。

我猜这个 JavaScript 的结构，以及我刚刚指出的两个项目，你正在使用 CoffeeScript 来生成这个？如果是这样，请忽略这两项，因为您将无法更改它们。

# jquery - 为什么 FancyBox 窗口大小不调整？

> ID：12305781
> 
> 赞同：1
> 
> 时间：2012-09-06T17:57:48.807
> 
> 标签：jquery, fancybox-2

我在此页面上使用 FancyBox 2：[http](http://encoreazalea.com/ee/botanical-gardens) ://encoreazalea.com/ee/botanical-gardens在弹出窗口中显示 Google 地图。

窗口很好，但所有地图都有滚动条。我已尝试调整显示窗口的大小，但它似乎无法正确响应我发送的说明。

这是HTML：

```
<h3 class="state">Washington D.C.</h3>

<div class="gardens">

<p class="garden">US National Arboretum<br />
<a href="http://www.usna.usda.gov/">Website</a> | <a class="map" href="#directions5148">Directions</a></p>
</div>

<div class="gardens">
<div id="directions5148" style="display:none">
<iframe width="600" height="440" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?ie=UTF8&amp;q=US+National+Arboretum&amp;fb=1&amp;gl=us&amp;hq=US+National+Arboretum&amp;hnear=US+National+Arboretum&amp;cid=0,0,12451978746893569755&amp;t=h&amp;ll=38.912424,-76.96852&amp;spn=0.008014,0.013733&amp;z=16&amp;iwloc=A&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/maps?ie=UTF8&amp;q=US+National+Arboretum&amp;fb=1&amp;gl=us&amp;hq=US+National+Arboretum&amp;hnear=US+National+Arboretum&amp;cid=0,0,12451978746893569755&amp;t=h&amp;ll=38.912424,-76.96852&amp;spn=0.008014,0.013733&amp;z=16&amp;iwloc=A&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small>

</div>

</p>
</div> 
```

这是jQuery：

```
<script type="text/javascript">
    $(".map").fancybox({
            wrapCSS    : 'fancybox-custom',
            width : 700,
            height : 600,
            closeClick : true,
            helpers : {
                title : {
                    type : 'inside'
                },
                overlay : {
                    css : {
                        'background-color' : '#eee'
                    }
                }
            }
        });
</script> 
```

无论我在窗口中设置什么宽度和高度，总是以相同的大小显示，并且地图周围有滚动条。

我的目标是摆脱滚动条。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:58:19.823

您可能还需要设置选项`autoSize : false`AND `fitToView : false`AND`scrolling: "no"`以获得所需的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:11:54.950

我会尝试直接向 div 添加维度：

```
<div id="directions5148" class="map_window" style="display:none"> 
```

CSS：

```
.map_window{
   width: 700px;
   height: 600px;
   overflow: hidden;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T11:38:49.397

这很愚蠢，但 fancybox 没有正确响应，因为我没有包括这个：

```
$(document).ready(function() {... 
```

在我添加后，其余代码变得更具响应性。

# asp.net-mvc-4 - 必需属性的 DataAnnotation

> ID：12305784
> 
> 赞同：34
> 
> 时间：2012-09-06T17:58:22.050
> 
> 标签：asp.net-mvc-4, asp.net-web-api, data-annotations

首先它可以工作，但今天它失败了！

这就是我定义日期属性的方式：

```
[Display(Name = "Date")]
[Required(ErrorMessage = "Date of Submission is required.")]        
[DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
[DataType(DataType.Date)]
public DateTime TripDate { get; set; } 
```

它过去一直在工作。但是今天，当我调用相同的 ApiController 操作时：

```
[HttpPost]
public HttpResponseMessage SaveNewReport(TripLeaderReportInputModel model) 
```

萤火虫报告：

```
ExceptionMessage:

"Property 'TripDate' on type 'Whitewater.ViewModels.Report.TripLeaderReportInputModel' 
is invalid. Value-typed properties marked as [Required] must also be marked with
[DataMember(IsRequired=true)] to be recognized as required. Consider attributing the 
declaring type with [DataContract] and the property with [DataMember(IsRequired=true)]."

ExceptionType

"System.InvalidOperationException" 
```

发生了什么？那些不是`[DataContract]`为了`WCF`？我正在使用`REST WebAPI`in `MVC4`！

任何人都可以帮忙吗？请？

- -更新 - -

我发现了一些类似的链接。

[MvC 4.0 RTM 打破了我们，我们不知道如何修复它 RSS](http://forums.asp.net/t/1834524.aspx/2/10?Re%20MvC%204%200%20RTM%20broke%20us%20and%20we%20don%20t%20know%20how%20to%20fix%20it)

---再次更新---

这是 HTTP 响应标头：

```
Cache-Control   no-cache
Connection  Close
Content-Length  1846
Content-Type    application/json; charset=utf-8
Date            Thu, 06 Sep 2012 17:48:15 GMT
Expires         -1
Pragma          no-cache
Server          ASP.NET Development Server/10.0.0.0
X-AspNet-Version    4.0.30319 
```

请求标头：

```
Accept          */*
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Cache-Control   no-cache
Connection          keep-alive
Content-Length  380
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie          .ASPXAUTH=1FF35BD017B199BE629A2408B2A3DFCD4625F9E75D0C58BBD0D128D18FFDB8DA3CDCB484C80176A74C79BB001A20201C6FB9B566FEE09B1CF1D8EA128A67FCA6ABCE53BB7D80B634A407F9CE2BE436BDE3DCDC2C3E33AAA2B4670A0F04DAD13A57A7ABF600FA80C417B67C53BE3F4D0EACE5EB125BD832037E392D4ED4242CF6
DNT                 1
Host            localhost:39019
Pragma          no-cache
Referer         http://localhost:39019/Report/TripLeader
User-Agent          Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0
X-Requested-With    XMLHttpRequest 
```

- - 更新 - -

我找到了一个临时解决方案。请参阅下面的答案。如果有人理解它为什么起作用或有更好的解决方案，请发布您的答案。谢谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-06T18:45:51.153

好的。虽然我还没有完全理解这件事。找到了解决方法。

在`Global.asax`：

```
GlobalConfiguration.Configuration.Services.RemoveAll(
    typeof(System.Web.Http.Validation.ModelValidatorProvider),
    v => v is InvalidModelValidatorProvider); 
```

我在 aspnetwebstack 的问题跟踪器中找到了它。这是该页面的链接：

[将 [DataMember(IsRequired=true)] 应用于具有值类型的所需属性的过于激进的验证](http://aspnetwebstack.codeplex.com/workitem/270)

如果有人可以告诉我们为什么会这样，请发表您的见解作为答案。谢谢你。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-20T18:03:25.217

我添加了一个`ModelValidationFilterAttribute`并使其工作：

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (!actionContext.ModelState.IsValid)
        {
            // Return the validation errors in the response body.
            var errors = new Dictionary<string, IEnumerable<string>>();
            //string key;
            foreach (KeyValuePair<string, ModelState> keyValue in actionContext.ModelState)
            {
                //key = keyValue.Key.Substring(keyValue.Key.IndexOf('.') + 1);
                errors[keyValue.Key] = keyValue.Value.Errors.Select(e => e.ErrorMessage);
            }
            //var errors = actionContext.ModelState
            //    .Where(e => e.Value.Errors.Count > 0)
            //    .Select(e => new Error
            //    {
            //        Name = e.Key,
            //        Message = e.Value.Errors.First().ErrorMessage
            //    }).ToArray();

            actionContext.Response =
                actionContext.Request.CreateResponse(HttpStatusCode.BadRequest, errors);
        }
    }
} 
```

您可以`[ModelValidation]`在操作上添加过滤器。或将其添加到`Global.asax.cs`：

```
GlobalConfiguration.Configuration.Services.RemoveAll(
typeof(System.Web.Http.Validation.ModelValidatorProvider),
v => v is InvalidModelValidatorProvider); 
```

就这样，我继续使用原来的数据标注。

[参考](http://aspnetwebstack.codeplex.com/workitem/270)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-06T18:05:34.370

**2013 年 5 月 24日**更新：**`InvalidModelValidatorProvider`导致此错误消息的原因*已从*ASP.NET 技术堆栈中删除。这个验证器被证明会引起比它想要解决的更多的混乱。有关详细信息，请参阅以下链接：[http ://aspnetwebstack.codeplex.com/workitem/270](http://aspnetwebstack.codeplex.com/workitem/270)**

 **当你用`[DataContract]`属性装饰你的类时，你需要显式地装饰你想用`[DataMember]`属性序列化的成员。

问题是`DataContractSerializer`不支持该`[Required]`属性。对于引用类型，我们能够在反序列化后检查该值是否不为空。但是对于值类型，我们无法强制执行without的`[Required]`语义。`DataContractSerializer``[DataMember(IsRequired=true)]`

因此，如果未发送，您最终可能会标记`DateTime`为`[Required]`并期望模型验证错误`DateTime`，但您只会得到一个`DateTime.MinValue`值而没有验证错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:03:30.827

如果您尝试将操作的输出作为 XML 返回，那么您将需要使用 DataContracts，因为默认序列化程序需要它们。我猜您之前一直请求将您的操作输出为 Json，Json 序列化程序不需要数据协定。您可以发布您的请求的小提琴吗？**

# spring - 引用没有 id 的 bean

> ID：12305786
> 
> 赞同：3
> 
> 时间：2012-09-06T17:58:40.813
> 
> 标签：spring, el, spring-el, activiti

我正在尝试在 Activiti 中使用 Spring 表达式语言引用 JPA 存储库。但是，由于 Spring 使用 来创建存储库 bean `<jpa:repositories/>`，因此它们没有关联的 id。有没有办法使用 SpEL 来引用某种类型的 bean 而不是通过 id？我尝试使用我认为会为 生成的名称（locationRepository）`LocationRepository`，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:52:03.673

我假设`LocationRepository`是一个接口，并且正在为您生成支持实现。当 Spring 创建一个 bean 并且没有显式指定 id 时，它通常使用实现类的类名来确定 bean id。因此，在这种情况下，您`LocationRepository`的 id 可能是生成的类的名称。

但是由于我们不知道它是什么，我们可以创建一个 Spring `FactoryBean`，它只是`LocationRepository`通过自动装配从应用程序上下文中获取并以新名称将其放回应用程序上下文中。

```
public class LocationRepositoryFactoryBean extends AbstractFactoryBean<LocationRepository> {
    @Autowired
    private LocationRepository bean;

    public Class<?> getObjectType() { return LocationRepository.class; }
    public Object createInstance() throws Exception { return bean; }
} 
```

在您的应用上下文 xml 中：

```
<bean name="locationRepository" class="your.package.LocationRepositoryFactoryBean"/> 
```

然后，您应该能够`LocationRepository`使用 bean id locationRepository 引用您的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:16:45.940

不确定如何在 SPEL 中执行此操作，但您可以使用[`@Qualifier`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/Qualifier.html)来决定应该注入哪个 bean。

如果您愿意，您可以创建自己的自定义 @Qualifier 注释并基于它访问 bean。
像

```
@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
@Qualifier  // Just add @Qualifier and you are done
public @interface MyRepository{

} 
```

现在`@MyRepository`在存储库 bean 和其他要注入它的地方使用注释。

```
@Repository   
@MyRepository  
class JPARepository implements AbstractRepository    
{
  //....
} 
```

注入它

```
@Service 
class fooService   
{
    @Autowire 
    @MyRepositiry
    AbstractRepository repository;

} 
```

# magento - 在 catalog.xml 中为类别视图设置“列表/网格”默认视图模式

> ID：12305787
> 
> 赞同：5
> 
> 时间：2012-09-06T17:58:49.530
> 
> 标签：magento

我正在尝试以列表或网格模式默认显示我的类别视图显示产品。

```
<reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    <!-- The following code shows how to set your own pager increments -->
                    <!--
                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>9</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                    -->
                </block>
                <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference> 
```

这是我在里面`<catalog_category_layered>`和里面的代码`<catalog_category_default>`。知道有人怎么做吗？我在谷歌上搜索了很多时间并没有找到解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-12T07:43:30.007

您可以使用以下 xml 在布局 XML 或管理员中的“自定义布局更新”部分中执行此操作：

```
<reference name="product_list_toolbar">
    <action method="setData"><key>_current_grid_mode</key><value>list</value></action>
</reference> 
```

请确保，工具栏块名称是在产品列表块中设置的，如下所示：

```
<action method="setToolbarBlockName"><name>product_list_toolbar</name></action> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T18:33:09.977

您可以从后端设置网格或列表

> 系统->配置->目录->前端->列表模式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-25T07:43:31.870

如果您选择使用@rengaw83 描述的方法，您将无法再在该类别中的模式之间切换。例如，如果您单击“网格”，模式将不会更改为网格模式。

为了能够切换模式并通过自定义布局在类别中设置默认视图模式，您需要覆盖核心 Toolbar 块，并向其中添加以下方法：

```
/**
 * Sets the current View modes (grid, list, etc.)
 *
 * @param array $modes
 */
public function setCurrentModes($modes)
{
    $this->_availableMode = $modes;
    $modes = array_keys($this->_availableMode);
    $defaultMode = current($modes);
    $mode = $this->getRequest()->getParam($this->getModeVarName());
    if ($mode) {
        if ($mode == $defaultMode) {
            Mage::getSingleton('catalog/session')->unsDisplayMode();
        }
    } else {
        $mode = Mage::getSingleton('catalog/session')->getDisplayMode();
    }

    if (!$mode || !isset($this->_availableMode[$mode])) {
        $mode = $defaultMode;
    }
    $this->setData('_current_grid_mode', $mode);
} 
```

然后您将能够在自定义布局选项卡中设置模式，如下所示：

```
<reference name="product_list_toolbar">
    <action method="setCurrentModes">
        <modes>
            <list>List</list>
            <grid>Grid</grid>
        </modes>
    </action>
</reference> 
```

对于默认列表模式，或

```
<reference name="product_list_toolbar">
    <action method="setCurrentModes">
        <modes>
            <grid>Grid</grid>
            <list>List</list>
        </modes>
    </action>
</reference> 
```

默认网格模式。或者你甚至可以只通过一种模式来设置只有网格或列表模式可用。

# java - 忘记 Java HTML 框架的名称

> ID：12305788
> 
> 赞同：1
> 
> 时间：2012-09-06T17:59:04.137
> 
> 标签：java, frameworks, html-generation

听起来可能很愚蠢，但我正在使用一个包含 3 个类的小框架来生成 html：

*   `Tag extends LinkedList`
*   `Attribute`
*   `Attributes extends LinkedList<Attribute>`

（我有源代码）

然而，过度的谷歌搜索（也有源代码）并没有太大帮助，只是给了我一个（合适的）文件的链接`people.cs.uct.ac.za/~bfry/.../Tag.java`，但手动检查它的主页并没有帮助......

有人知道这个框架吗，我想在教程中参考一下...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:51:47.720

在我在评论中链接的第一个来源中，如果您将目录转到`/html/`，它同时具有[自述文件](https://bitbucket.org/javydreamercsw/jwrestling/src/1c44c7c8d156/jWrestlingLibs/html/README)和[许可证](https://bitbucket.org/javydreamercsw/jwrestling/src/1c44c7c8d156/jWrestlingLibs/html/COPYING)文件。自述文件引用了一个名为**`Java HTML Generator`**from的项目`http://artho.com/webtools/java-html-gen/`，该项目似乎是一个断开的链接。

但是，您可以在 Internet 存档中查看它*过去*的样子：http://web.archive.org/web/20100216045834/http: [//artho.com/webtools/java/index.shtml](http://web.archive.org/web/20100216045834/http://artho.com/webtools/java/index.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:08:31.040

是这个吗？

OUnit - [http://code.google.com/p/ounit/source/browse/ounit-htmlgen/src/main/java/com/googlecode/ounit/html/Tag.java?spec=svn598edaa4f8fbec9b15c0df5fbfaa0ee43b732b60&name=598edaa4f8&r=598edaa4f8fbec9b15c0df5fbfaa0ee](http://code.google.com/p/ounit/source/browse/ounit-htmlgen/src/main/java/com/googlecode/ounit/html/Tag.java?spec=svn598edaa4f8fbec9b15c0df5fbfaa0ee43b732b60&name=598edaa4f8&r=598edaa4f8fbec9b15c0df5fbfaa0ee43b732b60)

# ember.js - 如何使用 jasmine-node 设置带有茉莉花的 window.Handlebars

> ID：12305789
> 
> 赞同：3
> 
> 时间：2012-09-06T17:59:03.883
> 
> 标签：ember.js, jasmine, handlebars.js, jasmine-node

我正在尝试使用 ember.js 运行我通常的 jasmine-node 测试，因为 ember 需要加载把手，所以我也包含了该库。

然而由于某种原因，当 ember 遇到此代码时

window.Handlebars

我不确定。

这是我在茉莉花测试中加载 jquery/handlebars/ember 的方式

```
var jsdom = require("jsdom");
window = jsdom.jsdom("<html></html");
global.window = window;

require("path/to/jquery");
require("path/to/handlebars-1.0.0.beta.6");
require("path/to/ember-1.0.pre");

describe("test demo", function() {
  it("should not blow up when running this", function() {
    expect(2).toBe(2);
  });
}); 
```

我可以轻松地将它破解到 handlebars.js 文件的底部，但我想了解还有什么可以做的，以避免直接修改这个库进行测试。

```
window.Handlebars = Handlebars; 
```

（在我将 ember 加载到帮助程序中之前，紧随其后）

```
global.Handlebars = window.Handlebars; 
```

** 更新 **

我对 ember-data.js 也有同样的问题

似乎设置 window.Foo 是不够的 - 相反我实际上需要设置 global.Foo （关于解决这个问题的任何想法？）

```
(function() {
window.DS = Ember.Namespace.create({
  CURRENT_API_REVISION: 4
});
})();
global.DS = window.DS; //I had to add this to make DS available 
```

# html - 为什么 div#foo hr:first-child 不起作用

> ID：12305792
> 
> 赞同：7
> 
> 时间：2012-09-06T17:59:13.937
> 
> 标签：html, css, css-selectors

我觉得这应该可行，如果您可以说 #foo p:first-child 为什么 #foo hr:first-child 不起作用。如果有人能解释这一点，我将不胜感激。

我在这里设置了一个 JSFiddle 演示 - [http://jsfiddle.net/mGu7x/6/](http://jsfiddle.net/mGu7x/6/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T18:01:04.350

所有`<hr>`元素都不是其父元素的第一个子元素。

请参阅[此更新的演示](http://jsfiddle.net/mGu7x/7/)，它使边框更加明显并将 hr 移到顶部。

您可能想查看[`:first-of-type`](http://www.w3.org/TR/css3-selectors/#first-of-type-pseudo)CSS 3 中的哪些新功能以及您正在寻找的功能。（我可以使用[表明它](http://caniuse.com/#search=first-of-type)在非当前 IE 之外有广泛的支持）。

查看[使用的演示`:first-of-type`](http://jsfiddle.net/mGu7x/8/)（我只在 Chrome 中测试过）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:03:45.663

因为`#main`'s`first-child`是一个`p`，而不是一个`hr`。

您可以使用[nth-child](http://www.w3schools.com/cssref/sel_nth-child.asp)：

```
#main hr:nth-child(2) {
    border-bottom: 3px solid green;
} 
```

# ruby - Ruby嵌套哈希值_at不工作

> ID：12305796
> 
> 赞同：0
> 
> 时间：2012-09-06T17:59:29.207
> 
> 标签：ruby, hash

我在 Ruby 中使用嵌套哈希，但该`values_at`方法没有返回任何数据，我无法找出原因。

```
j =  {"grandpa" => { "dad" => {"child 1" => {}, "child 2" => {} }, "uncle" => {"child 3" => {}, "child 4" => {} } } }
puts j.values_at("dad") 
```

它不打印任何东西。我相信`"child1"`并且`"child2"`应该打印出来，因为它们都是`"dad"`.

如果我参加竞选`values_at`，`"grandpa"`我会收到以下正确回复：

```
{"dad" => {"child 1" => {}, "child2" => {}}, "uncle" => {"child 3" => {}, "child 4" => {}}} 
```

我对格式缺少什么？还是我只是不理解嵌套哈希？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:10:37.623

根据[Hash#values_at 文档](http://apidock.com/ruby/v1_9_3_125/Hash/values_at)

> 返回一个包含与给定键关联的值的数组

该方法不知道如何处理嵌套哈希。您需要向下导航到要搜索的哈希级别。例如：

`j["grandpa"].values_at("dad")`

# php - 如果在 JS 结果中遇到某些关键字，需要隐藏转换为 JS 的 RSS 提要

> ID：12305798
> 
> 赞同：-1
> 
> 时间：2012-09-06T17:59:34.697
> 
> 标签：php, javascript, filter, rss, hide

我对 PhP 和 JS 很陌生。我有一个网站可以同时跟踪多个 RSS 提要。我使用第三方网站完成了这项工作，这些网站让我可以将 RSS 转换为具有 CSS 样式的 javascript 函数。

我注意到有时 RSS 提要会出于某种原因在主机端脱机，但我希望能够使用 PhP 或其他方法来识别 JS 结果中的某些关键字，而根本不显示该提要。我的页面中还没有 PhP，只有 HTML、CSS 和 Javascript。下面是我正在使用的 JS 提要之一。

`src="http://feed2js.org//feed2js.php? src=http%3A%2F%2Fajaxplorer.info%2Ffeed&chan=title&num=10&date=y&utf=y" charset="UTF-8" type="text/javascript"></script>`

`<noscript><a href="http://feed2js.org//feed2js.php?src=http%3A%2F%2Fajaxplorer.info%2Ffeed&chan=title&num=10&date=y&utf=y&html=y">View RSS feed</a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:43:55.923

如果您使用的是 JQuery，则可以使用以下代码：

```
<!doctype html>
<html>
<head>
    <title>Property Agents</title>

</head>
<body>
    <!-- including JQuery from google CDN -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

    <div class="content">
        <div class="rss">
            <!-- here is your script, which will paste here news-->
            <script src="http://feed2js.org//feed2js.php?src=http%3A%2F%2Fajaxplorer.info%2Ffeed&chan=title&num=10&date=y&utf=y&html=y"></script>
        </div>
    </div>

    <script>
        $(document).ready(function(){
            var text,pos;
            $('.rss-item').each(function(){
                // getting html of each element
                text = $(this).html();
                // search text in item
                pos  = text.indexOf('AjaXplorer 4.2');
                // found? then hide it
                if (pos != -1)  $(this).hide();
            });
        });
    </script>
</body>
</html> 
```

此代码查找所有带有“AjaXplorer 4.2”文本的新闻并将其隐藏。
完整的工作示例（只是为了确保它正在工作）你可以在
[http://pastehtml.com/view/car52rb92.html看到](http://pastehtml.com/view/car52rb92.html)

**声明者**：
这不是一个好的解决方案。更好地使用 PHP 生成页面并在服务器端过滤这些新闻。这很容易，伙计。可能是 10-20 行代码。
php-solution 的想法很简单：
1\. 从 url 获取数据`file_get_contents`
2\. 然后通过行并找到你需要的内容（使用 SimpleXML 更好地解析）
3\. 用一行代码在 HTML 页面中输出修改后的数据，例如`<?php echo %text ?>`

# html - 在网页上显示视频

> ID：12305799
> 
> 赞同：0
> 
> 时间：2012-09-06T17:59:36.457
> 
> 标签：html, asp.net-webpages, webmatrix-2

我在一个网站上工作，我想在主页上显示视频。虽然我已经使用嵌入标签和 .swf 格式实现了这一点。

但问题是一旦加载页面，视频就会开始。我希望视频显示播放、暂停和全屏功能。我无法显示任何其他格式的视频控件（使用谷歌浏览器）。谁能指导我，我已经浏览了许多为此提供代码的网站，但没有实现上述功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:03:17.457

试试[http://flowplayer.org/](http://flowplayer.org/)

这是一个很酷的 Flash 播放器插件，具有您想要的所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:38:39.047

在 Html-5 中，我们有一个视频标签。[有关更多详细信息，请参见此处](http://w3schools.com/html5/tag_video.asp)

但并非所有浏览器都支持全屏模式视图选项。原因在这篇文章中有解释。[有没有办法让 HTML5 视频全屏？](https://stackoverflow.com/questions/1055214/is-there-a-way-to-make-html5-video-fullscreen)

# php - parse_str 随机向键添加分号

> ID：12305802
> 
> 赞同：4
> 
> 时间：2012-09-06T17:59:44.357
> 
> 标签：php, jquery, codeigniter, query-string

我将查询字符串作为查询字符串的一部分传递给 PHP 脚本。

有点像这样：

```
$.post('/url', {
    id: postID
    filters: $('#form').serialize()
}); 
```

然后在我的 PHP 中，我`parse_str`用来阅读`filters`：

```
<?php
$postID = $this->input->post('id');
parse_str($this->input->post('filters'), $filters); 
```

问题在于`parse_str`将`;`s 随机添加到键中。我得到这样的结果：

```
array(4) {
  ["users"]=>
  string(0) ""
  ["companies;"]=>
  string(0) ""
  ["pref;_123"]=>
  string(0) ""
  ["products;"]=>
  array(2) {
    [0]=>
    string(4) "1234"
    [1]=>
    string(4) "5678"
  }
} 
```

为什么要添加服务器`;`？我在另一台服务器上尝试过，但没有发生这种情况。通过 CLI 进行测试时也不会发生这种情况。

**编辑**：似乎这不是`parse_str`错，而是某种 XSS 过滤器。 `$this->input->post('filters')`（甚至`$_POST['filters']`！）包含`;`字符。我检查了，jQuery 没有添加它们。

**编辑**：我设法通过这样做“解决”这个问题：

```
$filters = array_combine(array_map(function($x){
    return str_replace(';', '', $x);
}, array_keys($filters)), array_values($filters)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:11:11.270

这是由`global_xss_filtering`Codeigniter 中的配置变量引起的。将其设置为 false 以禁用此行为。

另请参阅：
[xss_clean 将分号添加到任何带有 &](http://codeigniter.com/forums/viewthread/84137/)
[CodeIgniter 添加分号的内容](https://stackoverflow.com/questions/1707913/codeigniter-adding-semicolons)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:15:13.930

我会先做一个 $filters 的 var_dump 看看有什么进来。

[parse_str](http://php.net/manual/en/function.parse-str.php)将解析您发送的字符串，如下所示：

```
$string = "user=&companies=StackOverflow";
parse_str($string, $filters);
echo $filters['user']; // empty string
echo $filters['companies']; // StackOverflow 
```

我最好的猜测是，从[iQuery 的序列化](http://api.jquery.com/serialize/)（包括数据）发送的内容可能没有正确序列化/转义，因此 parse_str 可以轻松地将字符串拆分为 & 作为每个参数的键/值的分隔符。

阅读手册你肯定在那里做正确的事情，但可能有一些东西潜伏在你的数据中，导致 parse_str 关闭。我还会在 jQuery 发布的字符串中查找非法字符。

# javascript - 在javascript中，我可以为json值创建一个引用（如C中的指针）

> ID：12305803
> 
> 赞同：0
> 
> 时间：2012-09-06T17:59:45.220
> 
> 标签：javascript, reference

例如：我有

```
var layout = {
    "cursor":{"left": 0, "top":0}
} 
```

我想做类似的事情

```
var curX = layout.cursor.left; 
```

当使用别名curX并更改curX的值时，光标中留下的值也会改变？

或者更进一步，

有对光标的引用，比如

```
nodes = [
    {name: 1, children: referenceTo2}
    {name: 2, children:　null}
] 
```

在这种情况下，当我们改变 node[1] 时，node[0] 的 children 中的值也会改变。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:19:01.717

如果`children`是一个对象（例如你的`cursor`），它是通过引用保存的，所以你可以像这样引用它：

```
var cursor = { left:0, top:0 };

var nodes = [
    { name: 1, children: cursor },
    { name: 2, children: cursor }
];

nodes[0].children.left = 10;
nodes[1].children.left; //is 10 
```

但是如果 children 是一个字符串，那么这是一个原始的并且你有点不走运。你可以对 setter 和 ES5 做一些花哨的事情，但这对于你想要做的事情来说可能有点过头了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:03:54.757

不，您不能创建对值的引用。JavaScript 对象是引用类型，因此您可以引用`layout.cursor`，但不能引用`layout.cursor.left`.

# java - 如何捕获静态初始化程序块中引发的异常

> ID：12305809
> 
> 赞同：2
> 
> 时间：2012-09-06T18:00:05.650
> 
> 标签：java, exception, static, initialization, classloader

我写了以下代码：

```
 static {
        /* Attempts to load JDBC driver */
        try {
            Class.forName("com.mysql.jdbc.Driver");
        } catch (ClassNotFoundException e) {
            throw new DBConfigurationException("JDBC Driver not found.", e);
        }
        /* Attempts to load configuration */
        conf = loadConfiguration(); //this may throw some subclasses of RuntimeException
    } 
```

因为我希望 JDBC 驱动程序和配置只加载一次。

我想在启动时做这样的事情（我会尽可能简化）：

```
public static void main(String[] args) {
    try {
        // load the class that contains the code above
    } catch (DBConfigurationException e) {
        // display proper error message using JOptionPane, then quit
    } catch (MissingConfigurationException e) {
        // display proper error message using JOptionPane
        // show a JDialog and allow user to input and store a configuration
    } catch (InvalidConfigurationException e) {
        // display proper error message using JOptionPane
        // show a JDialog and allow user to input and store a configuration
    }

    /* if everything it's ok */
    // do some other checks in order to decide which JFrame display first.
} 
```

现在，问题是如果发生异常，JVM 将抛出广告`ExceptionInInitializerError`并且不会构造对象。可能我仍然理解出了什么问题，抓住`ExceptionInInitializerError`（即使这对我来说听起来不对）并检查它的原因（我仍然没有尝试这样做，但我认为这是可能的）。

我需要那个对象，因为如果异常是可恢复的（例如 MissingConfigurationException），程序将不会退出并且需要那个对象。

我应该避免使用静态初始化程序吗？我可以做类似的事情：

```
private static final Configuration conf = null;

Constructor() {
    if (conf == null) {
        /* Attempts to load JDBC driver */
        try {
            Class.forName("com.mysql.jdbc.Driver");
        } catch (ClassNotFoundException e) {
            throw new DBConfigurationException("JDBC Driver not found.", e);
        }
        /* Attempts to load configuration */
        conf = loadConfiguration();
    }
} 
```

但即使这对我来说听起来也不正确：异常可能*仅在第一次尝试使用时*抛出（我知道这将在启动时进行，因为我必须进行检查），**即**加载类时。所以理论上第一种方法会更正确。:\

我应该怎么办？哪种方式更正确？

问题是具有静态初始化程序的类既*需要*驱动程序又需要配置，因此在它们都可用之前*不应该使用它。*:\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:04:36.103

你为什么不在你的`main()`方法中检查这些条件，或者方法调用的东西`main()`？应用程序的入口点只能输入一次。一个简单的方法比静态初始化器和类加载器技巧要好得多。

```
public static void main(String[] args) {
    if (!requirementsMet()) {
         System.exit(1);
    }
    //proceed with app...
}

private static boolean requirementsMet() {
     // check if DB driver can be loaded, and other non-recoverable errors
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:24:43.827

您可以使用单例类。例如

```
DBConfigProvider {
    private Configuration conf = null
    private DBConfigProvider() {
      /* Attempts to load JDBC driver */
      try {
          Class.forName("com.mysql.jdbc.Driver");
      } catch (ClassNotFoundException e) {
          throw new DBConfigurationException("JDBC Driver not found.", e);
      }
      /* Attempts to load configuration */
      conf = loadConfiguration(); //this may throw some subclasses of RuntimeException
    }

    private static DBConfigProvider instance = null;

    public static Configuration getConf() {
         if (instance == null) {
             instance = new DBConfigurationProvider();
         }

         return instance.conf;
    }
} 
```

# javascript - 字符串中的破折号

> ID：12305811
> 
> 赞同：0
> 
> 时间：2012-09-06T18:00:20.500
> 
> 标签：javascript

我需要您的帮助来修改以下功能。目前，该函数检查字符串中是否存在重复名称。如果找到重复项，它会自动添加 -number 即。123456-2。但是，如果我的字符串已经有一个数字和一个破折号，它只会增加最后一个不应该发生的数字。IE。123456-2012 到 123456-2013，其中字符串应为：123456-2012-2。关于如何纠正它的任何想法？

```
function test() {

var filename = "123456-2012"

var x = confirm('Duplicate record found!\n\n \''+filename+'\' \n\n rename and add record to the databse as:\n\n \''+new_name(filename)+'\'')

    if (x == true) {

    alert("adding...")
    filename = new_name(filename)
    alert(filename) 
    }

    else { return }

}  

var exists = 0 
function file_exists(name) {
   exists = 1 - exists  
   return exists 
} 

function new_name(suggested) { 

   if (!file_exists(suggested)) { return suggested } 

   var have_index = suggested.match(/^(.+)\-(\d+)$/) 
   var unused_index 
   if (have_index && have_index[2]) { 
      base = have_index[1] 
      unused_index = ++have_index[2] 
   } else { 
      base = suggested 
      unused_index = 2 
   } 

   while (file_exists(base  + "-" + unused_index)) { unused_index++ } 

   return base  + "-" + unused_index

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:20:19.487

在 new_name 函数中进行以下更改

请注意，我已经添加`!have_index[2]`了 if 条件。

```
if (have_index && !have_index[2]) { 
      base = have_index[1] 
      unused_index = ++have_index[2] 
   } else { 
      base = suggested 
      unused_index = 2 
   } 
```

# java - 二维随机游走，Java

> ID：12305813
> 
> 赞同：0
> 
> 时间：2012-09-06T18:00:24.777
> 
> 标签：java, random-walk

我正在编写一个采用命令行参数的二维随机游走。它应该估计随机游走器到达以起点为中心的 2N×2N 正方形的边界需要多长时间。

到目前为止我得到的是：

```
public class RandomWalk 
{
    public static void main(String[] args) 
    {
        int N = Integer.parseInt(args[0]);
        int reps = Integer.parseInt(args[1]);
        int x = 0;       
        int y = 0;       
        double r;
        int steps = 0;

        while (x*x + y*y <= N*N) {
            steps++;
            r = Math.random();

            if      (r <= 0.25) x++;
            else if (r <= 0.50) x--;
            else if (r <= 0.75) y++;
            else if (r <= 1.00) y--;
        }

        System.out.println(steps);
   }

} 
```

只是想检查一下你们是否认为我做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:14:57.427

只有当随机游走达到阈值时，您的程序才会终止。不是区域的边界。

```
while (x*x + y*y <= N*N) { 
```

一个例子：N = 100, x = 90, y = 90 ==> 90*90 + 90*90 = 16 200 > 10 000。

将其切换为：

```
while (x > -N && x < N && y > -N && y < N) { 
```

这会更好。而且您的`reps`变量是较新使用的。甚至一次都没有，除了设置它的价值。那应该是什么目的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:29:37.910

您的边界条件`x*x + y*y <= N*N`描述的是圆形，而不是正方形。此外，短语“命中”意味着条件不包括边界 ( `<`)。

你要`Math.abs(x) < N && Math.abs(y) < N`

# git - 我可以让 git bisect 显示缩短的提交 SHA 吗？

> ID：12305815
> 
> 赞同：1
> 
> 时间：2012-09-06T18:00:29.393
> 
> 标签：git, git-bisect

每次二等分后，运行会`git bisect`生成如下输出：

```
Bisecting: 22 revisions left to test after this (roughly 5 steps)
[123fedacc728b985d4f8d010e2a69dcbdcbf3e8e] use binascii module for hex/binary conversions 
```

我可以让它使用部分提交名称前缀，类似于 中使用的那些前缀`git log --abbrev-commit`吗？像这样的东西：

```
Bisecting: 22 revisions left to test after this (roughly 5 steps)
[123feda] use binascii module for hex/binary conversions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:06:20.573

不。为完整哈希和终止符分配内存的[源。](https://github.com/git/git/blob/master/bisect.c#L905)`git bisect`但是，修补标志可能很容易。如果你认为它是 git 的一个有价值的补充，你可以尝试将它发送到 git 列表。

# for-loop - 如何在 For /L 循环输入列表中使用变量（批处理文件编程）

> ID：12305816
> 
> 赞同：1
> 
> 时间：2012-09-06T18:00:29.147
> 
> 标签：for-loop, batch-file

我想在 for loop IN 列表中放置一个变量值。myvariable 是从用户输入中获得的。

例子：

```
for /L %%G IN (1 1 %myvariable%) DO command 
```

如果我使用这种语法，则永远不会执行循环。是否可以在运行时将 IN 列表分配给 for 循环？

请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:03:05.910

你的想法是对的，但你的语法是错误的。它应该是：

```
for /l %%G in (1, 1, %myvariable%) do command 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:30:26.823

Mark 发现 IN 和 ( 之间缺少空格，但无法判断这是您的实际代码还是创建问题时的拼写错误。

另一种可能性是您的变量是在稍后扩展值的同一代码中设置的。以下代码将失败：

```
(
  set /p "myvariable=Enter a value: "
  echo myvariable=%myvariable%
) 
```

上述失败的原因是在解析语句时发生了%扩展，括号内的整个块被视为单个语句。因此它扩展为执行 SET /P 之前存在的值。

如果你想要运行时存在的值，那么你需要使用延迟扩展

```
setlocal enableDelayedExpansion
(
  set /p "myvariable=Enter a value: "
  echo myvariable=!myvariable!
) 
```

这种类型的问题经常发生在 IF 和 FOR 命令中。我无法判断这是否是您的问题，因为您没有提供足够的上下文。

# facebook - 外部链接的 Facebook 评论审核视图

> ID：12305819
> 
> 赞同：0
> 
> 时间：2012-09-06T18:00:41.177
> 
> 标签：facebook, facebook-opengraph, facebook-comments

我正在 Facebook 上开发一个应用程序。我将评论部分添加到每个视频页面和 data-href = "http://www.mysite.com/myvideourl"。当我这样做时，评论会显示，但版主视图不会显示。但是，如果我设置 data-href = "http://apps.facebook.com/myapp" 版主视图就会出现。我在页面中添加了以下内容

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/" xml:lang="en" lang="en" dir="ltr">
<meta property="fb:admins" content="63987xxxx"/>
<meta property="fb:app_id" content="1773276957xxxxx"/> 
```

任何想法/帮助将不胜感激。谢谢！

# installshield - Installshield在卸载过程中无法停止和删除windows服务

> ID：12305820
> 
> 赞同：1
> 
> 时间：2012-09-06T18:00:52.530
> 
> 标签：installshield

我有一个安装 2 个 Windows 服务的 msi 项目。我有`Uninstall Stop = Yes`and `Uninstall Delete = Yes`，但是当我卸载应用程序时，服务不会停止或删除。这曾一度奏效，但最近开始失败。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-12T11:06:50.363

你需要设置`Wait Type = Wait For event to complete`.

另外，请在卸载服务操作之前杀死或终止 EXE 的依赖应用程序。

# sql - SELECT 中的 MSSQL cast( [varcharColumn] to int) 在 WHERE 子句过滤掉错误值之前执行

> ID：12305823
> 
> 赞同：6
> 
> 时间：2012-09-06T18:01:13.500
> 
> 标签：sql, sql-server, sql-server-2008

# 假设以下模式和查询：

### 请看一下在我们期望为整数的 varchar 列中具有值的明显设计问题。

```
create table dbo.Parent (
    Id bigint NOT NULL,
    TypeId int NOT NULL
)

create table dbo.Child (
    Id bigint NOT NULL,
    ParentId bigint NOT NULL,
    TypeId int NOT NULL,
    varcharColumn varchar(300) NULL
)

select cast(c.varcharColumn as int)
from dbo.Parent p (nolock)
    inner join dbo.Child c (nolock)
        on p.Id = c.ParentId
            and c.TypeId = 2
where p.TypeId = 13 
```

# 休息：

由于无法转换为 int 的值，我们得到了强制转换中断。在这种情况下：“123-1”。奇怪的是，被转换的值被从最终结果集中过滤掉了。

## 例如，这将返回零个结果

```
select c.varcharColumn
from dbo.Parent p (nolock)
    inner join dbo.Child c (nolock)
        on p.Id = c.ParentId
            and c.TypeId = 2
where p.TypeId = 13
    and c.varcharColumn = '123-1' 
```

查询计划最终会查看 Child 表并在 where 子句之前实际应用 cast 函数。

我们能够通过在子表上创建一个新索引来解决这个问题（它正在执行 PK*扫描*）

```
create index [NCIDX_dbo_Child__TypeId] on dbo.Child (
    TypeId
)
include (
    ParentId,
    varcharColumn
) 
```

它现在首先过滤父表的 where 子句。

有没有办法在没有额外索引的情况下解决这个问题？同样，请不要提出任何与修复我们的架构相关的建议。在这种情况下，这绝对是正确的解决方法。

我最感兴趣的是了解为什么它在过滤结果集之前应用了演员表。

谢谢

# 编辑 - 答案：

非常感谢 Aaron 和 Gordon。如果我得到超过 15 个代表点，我会回来并回复您的两个回复。

我们最终需要 Gordon 的答案，因为我们想在视图中使用此查询。办公室里的一些人对使用 case 语句持谨慎态度，因为他们更喜欢有更多的控制权来确保我们首先有一个较小的结果集（Aaron 的回答），但这一切都归结为查看查询计划并检查您的阅读计数。

再次感谢所有回复！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T18:09:28.627

您无法轻松控制 SQL Server 处理查询的方式。您可以通过深入研究执行计划来找出一些原因，但在我认为的这种特定情况下，理解这是您遇到的最少问题。也许你可以对加入提示做一些事情，但这对我来说很棘手，并且行为仍然不能保证（特别是当你移动到新版本等时）。您可以尝试的两种解决方法是：

```
;WITH c AS 
(
  SELECT varcharColumn, ParentID, TypeId
   FROM dbo.Child AS c
   WHERE c.TypeId = 2
   AND ISNUMERIC(varcharColumn) = 1 --*
)
SELECT CONVERT(INT, c.varcharColumn)
FROM dbo.Parent AS p
INNER JOIN c
ON c.ParentId = p.Id
WHERE p.TypeId = 13; 
```

但我听说过这样的情况，即使将其分离到 CTE 中也可能导致导致转换首先发生的糟糕计划。因此，您可能需要进一步分解它：

```
SELECT varcharColumn, ParentID, TypeId
INTO #c
   FROM dbo.Child AS c
   WHERE c.TypeId = 2
   AND ISNUMERIC(varcharColumn) = 1; --*

SELECT CONVERT(INT, c.varcharColumn)
  FROM dbo.Parent AS p
  INNER JOIN #c AS c
  ON c.ParentId = p.Id
  WHERE p.TypeId = 13; 
```

[（我也在这个答案](https://stackoverflow.com/a/21316088/61305)中谈到了`CASE`表达解决方案。）

如果您使用的是 SQL Server 2012，则可以简单地执行此操作 - 现在，是否在过滤器之前尝试转换并不重要，并且您不必依赖不稳定的`ISNUMERIC()`功能。*

```
SELECT TRY_CONVERT(INT, c.varcharColumn)
  FROM dbo.Parent AS p
  INNER JOIN dbo.Child AS c
  ON c.ParentId = p.Id
  WHERE c.TypeId = 2
  AND p.TypeId = 13; 
```

`*`请注意，IsNumeric 并不完美。几年前我写了[这篇文章来帮助解决这个问题。](http://web.archive.org/web/20090328213409/http://classicasp.aspfaq.com/general/what-is-wrong-with-isnumeric.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T18:18:49.277

首先，这不是一个“明显的设计问题”。SQL 是输出的描述性语言，而不是指定如何进行处理的过程语言。一般来说，不能保证处理的顺序，这是一个优势。我可能会说存在设计问题，但它与 SQL 语句中异常的一般处理有关。

*根据 SQL Server 文档 (http://msdn.microsoft.com/en-us/library/ms181765.aspx)，对于标量表达式*的 CASE 语句，您可以依赖评估顺序。因此，以下应该有效：

```
select (case when isnumeric(c.varcharColumn) = 1 then cast(c.varcharColumn as int) end) 
```

或者，为了更接近“int”表达式：

```
select (case when isnumeric(c.varcharColumn) = 1 and c.varcharColumn not like '%.%' and c.varcharColumn not like '%e%'
             then cast(c.varcharColumn as int)
        end) 
```

至少您的代码正在执行显式 CAST。当强制转换是隐式的（并且有数百列）时，这种情况会更加糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-17T06:58:24.627

**根据我的技术观点**

```
 create table dbo.Parent (
    Id bigint NOT NULL,
    TypeId int NOT NULL
)
    create table dbo.Child (
        Id bigint NOT NULL,
        ParentId bigint NOT NULL,
        TypeId int NOT NULL,
        varcharColumn varchar(300) NULL
    )

    select cast(c.varcharColumn as int)
    from dbo.Parent p (nolock)
        inner join dbo.Child c (nolock)
            on p.Id = c.ParentId
                and c.TypeId = 2
    where p.TypeId = 13 
```

在选择时，您正在进行内部联接，这会导致查找表并过滤掉数据现在据我所知，SQL Server 正在应用**“所谓的优化”**并随之进行强制转换操作。显然它是在过滤之前应用这种转换导致转换问题。

另一个问题，它的好奇心把我带到这里，

```
SELECT    MAX( Cast(dealer_number AS INT) + 1)
                    FROM   dealer_number dn
                    INNER JOIN dealer d
                    ON dn.dealer_seq = d.dealer_seq 
                    INNER JOIN dealer_type(nolock) dt
                    ON dt.dealer_number_seq = dn.dealer_number_seq
                    INNER JOIN program_dealer_type(nolock) pdt
                     ON pdt.program_dealer_type_seq = dt.program_dealer_type_seq
                    WHERE 
                    Isnumeric(dealer_number) = 1 AND
                    pdt.dealer_type = 'Dealer'
                    AND d.program_seq = 57 
```

有以下问题

varchar 值“10054239051”的转换溢出了一个 int 列。

我添加了**Isnumeric**以 100% 证明我没有得到任何字母数字。

但是由于 Isnumeric 在表查找性能时会导致相应的错误

现在只需删除**Isnumeric**就可以了

```
SELECT    MAX( Cast(dealer_number AS INT) + 1)
                    FROM   dealer_number dn
                    INNER JOIN dealer d
                    ON dn.dealer_seq = d.dealer_seq 
                    INNER JOIN dealer_type(nolock) dt
                    ON dt.dealer_number_seq = dn.dealer_number_seq
                    INNER JOIN program_dealer_type(nolock) pdt
                    ON pdt.program_dealer_type_seq = dt.program_dealer_type_seq
                    WHERE 
                    pdt.dealer_type = 'Dealer'
                    AND d.program_seq = 57 
```

现在我刚刚删除了那个预处理过滤器，它只是解决了问题，但是为了 100% 证明我没有得到任何字母数字我必须在选择中实现案例

```
SELECT    MAX(case WHEN 
                    ISNUMERIC(DEALER_NUMBER )=1 
                        THEN  Cast(dealer_number AS INT) 
                        ELSE 0 END 
                    + 1) 
                    FROM   dealer_number dn
                    INNER JOIN dealer d
                    ON dn.dealer_seq = d.dealer_seq 
                    INNER JOIN dealer_type(nolock) dt
                    ON dt.dealer_number_seq = dn.dealer_number_seq
                    INNER JOIN program_dealer_type(nolock) pdt
                    ON pdt.program_dealer_type_seq = dt.program_dealer_type_seq
                    WHERE 
                    pdt.dealer_type = 'Dealer'
                    AND d.program_seq = 57 
```

以上将解决这两个问题。任何人都对此表示欢迎。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-06T18:12:53.683

您可以将过滤器移动到子查询中，这将首先过滤掉坏值，然后强制转换所有内容。这没有回答为什么，但它确实以我认为最简单的方式为您提供了您想要的东西。

```
select cast(varcharColumn as int)
FROM(
select c.varcharColumn

from dbo.Parent p (nolock)
    inner join dbo.Child c (nolock)
        on p.Id = c.ParentId
            and c.TypeId = 2
where p.TypeId = 13
) table1 
```

# json - 在 twitter API 返回的日期上下文中，+0000 是什么意思？

> ID：12305826
> 
> 赞同：15
> 
> 时间：2012-09-06T18:01:30.443
> 
> 标签：json, date, twitter, iso

这：

```
"Tue Jan 12 21:33:28 +0000 2010" 
```

是从 Twitter 的 API 返回的。其余的都很明显，但是 +0000 指的是什么？它是某种类型的时区表示吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-06T18:02:46.503

这确实表示时区。它是与 UTC 时间的偏移量。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-06T18:03:52.313

`+0000`是`HHMM`与 UTC/GMT 的偏移量，在这种情况下，您返回的时间正是 UTC。

请注意，这并不完全映射到“地理”时区，因为夏令时可能会改变偏移量。例如，瑞典在冬天是 +0100，在夏天是 +0200。

# sql-server - SQL Server - 如何通过值的最新更改对系列中的行进行分组？

> ID：12305829
> 
> 赞同：0
> 
> 时间：2012-09-06T18:01:34.833
> 
> 标签：sql-server

我有一个记录会话和事件的数据库。事件表包括时间戳和用户名。一个用户可能是匿名的，或者在任何给定的会话期间登录了许多不同的用户。

我正在尝试根据事件时间戳和用户名更改时创建登录会话标识符。我可以根据时间戳对事件进行排序，并且可以看到用户名何时更改，但我无法弄清楚如何将每个事件行与其各自的“登录会话”相关联，该“登录会话”标识用户名更改时的最新事件。

我创建了这个示例来模拟我需要做的事情。`a.ord`是连续序列中的一个序数，`a.val`是一个值。`b.pval`是系列中的前一个值。

```
with a as (
    select 1 AS ord, 'abc' as val union
    select 2, 'xyz' union
    select 3, 'abc' union
    select 4, 'abc' union
    select 5, 'xyz' union
    select 6, 'xyz' union
            select 7, 'xyz'
),
b as (
    select
        a1.ord as ord,
        a1.val as val,
        a2.val as pval
    from a a1
    left join a a2 on a1.ord - 1 = a2.ord 
    where a1.val != isnull(a2.val, '')
)
select
    *
from b 
```

上述代码返回值发生变化的行，包括值从null变为“abc”时的第一行。这是返回的内容：

```
ORD VAL PVAL
1   abc NULL
2   xyz abc
3   abc xyz
5   xyz abc 
```

我需要以某种方式返回`a left join b`，以便它返回以下内容，其中“ORD”是 a.ord，“VAL”是 a.val，“CHG”是 b.ord。

```
ORD VAL CHG
1   abc 1
2   xyz 2
3   abc 3
4   abc 3
5   xyz 5
6   xyz 5
7   xyz 5 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:04:52.353

使用 Itzik Ben-Gan 对岛屿和间隙的解决方案（由 Mikael Eriksson[通过回答这个 SO question](https://stackoverflow.com/a/11842652/1231866)向我提出）变得非常简单。从包含与两个序列相同的数字的列`grouped`中检索所有记录。这个数字的组合是独一无二的。在主查询中，选择按这两个值分组的 min(ord)。`a``grp``val`

[这是带有示例的 Sql Fiddle](http://sqlfiddle.com/#!3/d41d8/4251)。

```
; with a as (
    select 1 AS ord, 'abc' as val union all
    select 2, 'xyz' union all
    select 3, 'abc' union all
    select 4, 'abc' union all
    select 5, 'xyz' union all
    select 6, 'xyz' union all
    select 7, 'xyz'
),
grouped as (
    select *,
           row_number() over (order by ord)
         - row_number() over (order by val, ord) grp
      from a
)
select ord, 
       val, 
       min(ord) over(partition by grp, val) chg
  from grouped
 order by ord 
```

[和一些阅读材料](http://www.manning.com/nielsen/SampleChapter5.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:26:42.173

我在尝试为这个问题写一个可读的标题时发现了这一点。

答案如下：

```
with a as (
    select 1 AS ord, 'abc' as val union
    select 2, 'xyz' union
    select 3, 'abc' union
    select 4, 'abc' union
    select 5, 'xyz' union
    select 6, 'xyz' union
    select 7, 'xyz'
),
b as (
    select
        a1.ord ord,
        a1.val val,
        a2.val sval
    from a a1
    left join a a2 on a1.ord - 1 = a2.ord 
    where a1.val != isnull(a2.val, '')
)
select
    *
from a
outer apply (
    select
        MAX(ord) as chg
    from b
    where a.val = b.val
    and a.ord >= b.ord
) x 
```

# excel-2007 - 使用 SUMIF() 和 SUMPRODUCT() 时的不同结果

> ID：12305832
> 
> 赞同：1
> 
> 时间：2012-09-06T18:01:52.560
> 
> 标签：excel-2007, excel-formula

这确实困扰了我们很长一段时间，即使我们已经找到了如何获得正确的结果，但我们真的很想知道为什么在使用相同的条件时`SUMIF`会产生不正确的结果而`SUMPRODUCT`产生准确的结果。

这是两个公式：

```
=SUMPRODUCT((Calcul!$J$2:$J$15000=Sommaire!J2)*(Calcul!$K$2:$K$15000))
=SUMIF(Calcul!$J$2:$J$15000,Sommaire!J2, Calcul!$K$2:$K$15000) 
```

如您所见：完全相同的范围，完全相同的比较，完全相同的总和范围。

关于数据的更多信息：在两张表（“Sommaire”和“Calcul”）中，单元格包含的数据类似于仅包含数字但被视为文本的序列号。该数字由 A、B、C、D、E 和 I 列中的连接数据组成，因此公式为：

```
=IFERROR(A2&B2&C2&D2&E2&I2, "ERREUR") 
```

以两种不同的方式使用过滤器（直接过滤密钥或“序列号”，第二种直接过滤密钥的每个组件）我们得到完全相同的数据集，当手动计算时，它给我们的值与`SUMPRODUCT`回来。

有任何想法吗 ？我们实在想不出返回结果不同的任何理由。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:40:19.780

我们终于找到了解决方案。似乎出于某种原因`SUMIF`，无论如何都会强制将数字字符串视为数字。由于我们的密钥相当大，它达到某种整数容量并溢出并非不可能。如果我们只是在它前面附加一个字母，我们会得到与使用`SUMPRODUCT`.

溢出的键示例：

```
01003046014910111616
01000145950198116308 
```

而这些键，具有完全相同的公式（只是在前面附加了一个 C），返回预期的结果：

```
C01003046014910111616
C01000145950198116308 
```

# java - 在 netbeans 运行时创建组件

> ID：12305835
> 
> 赞同：2
> 
> 时间：2012-09-06T18:02:06.803
> 
> 标签：java, swing, netbeans, jpanel, jbutton

这一切都是在我使用可视化构建器进行设计的时候。我想在运行时添加一些组件。我在设计时添加了一个 jpanel。我想在 jpanel 上运行时添加一个按钮。这是生成的和我添加的代码。运行时该按钮不可见。

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
 */
package main;

import javax.swing.JButton;

 /**
  *
 * @author FirmView
 */
public class NewJFrame extends javax.swing.JFrame {

/**
 * Creates new form NewJFrame
 */
public NewJFrame() {
    initComponents();
}

private void addGUIComponents(){
    JButton b = new JButton("Click Me");
    jPanel1.add(b);
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 341, Short.MAX_VALUE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 83, Short.MAX_VALUE)
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(26, 26, 26)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(33, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(41, 41, 41)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(176, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            NewJFrame f = new NewJFrame();
            f.addGUIComponents();
            f.show();
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JPanel jPanel1;
// End of variables declaration 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:37:35.667

当您使用这样的组件时，您必须在`revalidate()`之后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:06:25.740

问题是您正在创建**一个 JPanel 对象**，`initComponent()`然后**将按钮添加到另一个 JPanel 对象**`addGUIComponents()`

最好让**JPanel 类**成为一个`Singleton`......所以你得到**相同的 JPanel 对象。**

# html - HTML 渲染的 MVC3 TextArea 问题

> ID：12305838
> 
> 赞同：2
> 
> 时间：2012-09-06T18:02:10.420
> 
> 标签：html, asp.net-mvc-3, render, encode

我有一个 C# MVC3 .Net Web 应用程序。我有几个 TextArea 控件。它们包含从我们的数据库填充的 HTML 字符串。一些 TextArea 控件是 CkEditor，它们工作正常。他们有一个名为“htmlEncodeOutput”的属性。这避免了 ASP.NET 安全问题。当我导航到一个新页面时，标准的 TextAreas 令人讨厌。我相信这是由于嵌入的 HTML。我可以设置 TextAreas 的属性来对嵌入的 HTML 进行编码吗？

这是抛出的错误：

```
A potentially dangerous Request.Form value was detected from the client (item.SowDescription="...; it sodas<br />
<strong><em>..."). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:05:26.343

我想到了。在文本区域中，我使用 HttpUtility.HtmlDecode 来呈现正在呈现的属性。下面的例子：

```
<textarea rows="3" cols="33" class="readonly"
            readonly="readonly" 
            id = "@Id">
    @HttpUtility.HtmlDecode(item.Description)
</textarea> 
```

# shell - 将记录计数写入 unix shell 脚本中的变量

> ID：12305842
> 
> 赞同：0
> 
> 时间：2012-09-06T18:02:21.997
> 
> 标签：shell, unix

我是 Shell 脚本要求的新手，需要从 flat(.txt) 文件中获取行数并分配给 int 变量。

尝试这个但不工作

```
FNAME="pn_data_"$month$day$year".txt"
   declare -i recordcount=0
      for f in $FNAME
     do
       recordcount+=`wc $f |'{print $1}'`
     done 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:09:56.490

诀窍`wc`是，如果您在其命令行上提供文件名，它会在输出中打印它。为避免这种情况，请为其提供标准输入。符号的 RHS`|`很奇怪——也许你错过了`awk`动作？但这太过分了：您可以简单地写：

```
declare -i recordcount

recordcount=$(wc -l < $FNAME) 
```

（而且我通常不会打扰这`declare`条线。）

请注意，我假设您只有一个文件并且需要来自一个文件的记录数。如果您需要处理多个文件并获得总计数，那么您要么需要在 shell 中分别处理每个文件并对 from 的值进行算术运算`wc`，要么运行`wc`所有文件并让它打印出总行数最后（可以使用后处理`sed`或`awk`仅从输出的最后一行获取数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:09:25.357

```
FNAME="pn_data_"$month$day$year".txt"
for f in $FNAME
do
  recordcount=$(expr $recordcount + $(wc -l < $f))
done 
```

# pug - 写清单的捷径

> ID：12305844
> 
> 赞同：2
> 
> 时间：2012-09-06T18:02:41.593
> 
> 标签：pug

有没有办法放弃对翡翠清单的需求`ol`-`ul`我想写......

```
ol first item
li second item
li third item 
```

否则似乎缩进太多

目前，我想我可以制作一个过滤器，用它包裹每一行`<li>|</li>`并调用过滤器`:ol`，这样我就可以做......

```
:ol
  first line
  second line 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:29:06.330

在行首的两点要非常小心，Jade 会将其解释为另一种语言（Stylus、markdown ... 等）。列出案例的正确方式并不那么重要。

```
ul
  li frist item
  li second item
ol
  li frist item number
  li second item number 
```

这将翻译成html所以

```
<ul>
   <li>frist item</li>
   <li>second item</li>
</ul>
<ol>
   <li>frist item number</li>
   <li>second item number</li>
</ol> 
```

真正最重要的是要生成的表格或者 html

# asp.net - 从 Cassini 切换到 IIS Express 8 时出现难以理解的错误

> ID：12305847
> 
> 赞同：3
> 
> 时间：2012-09-06T18:02:48.907
> 
> 标签：asp.net, iis-express

几个月来，我一直在 MVC3 中开发一个 Web 项目。我一直在使用 Visual Studio 的内置 Web 服务器 (Cassini) 进行开发，但发现我需要使用 IIS Express 来支持 HTTPS。

安装 IIS Express 8 后，我在 VS 中右键单击项目并选择“使用 IIS Express...”，并允许它为 IIS 创建站点。现在，当我尝试测试我的网站时，出现以下错误：

```
Specified argument was out of the range of valid values.
Parameter name: site

Stack Trace:
[ArgumentOutOfRangeException: Specified argument was out of the range of valid values.
Parameter name: site]
   System.Web.HttpRuntime.HostingInit(HostingEnvironmentFlags hostingFlags, PolicyLevel policyLevel, Exception appDomainCreationException) +298

[HttpException (0x80004005): Specified argument was out of the range of valid values.
Parameter name: site]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9850940
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

堆栈跟踪不引用我的任何代码，并且我的代码不包含任何名为`site`. 我有一个`Site`在几个地方命名的属性，但没有`site`.

此外，该异常甚至不会触发调试器。该错误没有在 VS 中中断执行，而是在浏览器中显示为标准的黄色 ASP.NET 错误页面（尽管我认为这可能是使用 IIS 而不是 Cassini 时的预期行为）。

我还没有在我的项目中使用任何 HTTPS 代码，无论我是否在项目属性中启用了 HTTPS，都会发生错误。我还应该提到我们的生产服务器运行 IIS 7 正确，我从来没有遇到过这个问题。

那么，知道出了什么问题吗？我可以提供源代码，但目前我什至不知道错误的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:30:44.053

我有同样的问题。

原来iis 8不适用于windows 7。所以我不得不使用以下方法启用iis 7：

*   单击开始，然后单击控制面板。
*   在控制面板中，单击程序，然后单击打开或关闭 Windows 功能。
*   在 Windows 功能对话框中，单击 Internet 信息服务，然后单击确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:12:53.467

我在一台新笔记本电脑（Windows 8）上遇到了类似的问题。拉出我的 GitRepo，尝试在 IIS Express 中运行我的（工作应用程序）并得到同样的错误。

原来我没有在 Windows 功能中安装“Internet Information Services Hostable Web Core”或“Internet Information Services”。我不确定您是否需要用于 IIS Express 的 IIS，因为添加它并不能解决问题，但是一旦我安装了 IIS Hostable Web Core，一切都很好。

我只能假设（很可能从名称中）Hostable Web Core 是一个先决条件。对于 IIS Express。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:01:05.957

我不知道问题出在哪里，但是在我安装了完整的 IIS 版本（不是 express）并在启动时禁用服务之后，我必须工作。

# graph - 将图书馆书籍分配给成员以满足最大成员的算法

> ID：12305848
> 
> 赞同：0
> 
> 时间：2012-09-06T18:02:49.877
> 
> 标签：graph, matching, bipartite, max-flow

我在课堂测试中遇到了一个问题。在图书馆里，每个成员要四本书，而每本书只有两个成员要。此信息以二分图 G = ( X + Y , E ) 的形式给出

X：所有成员的集合 Y：所有书籍的集合 Edge E = 边的集合 (x,y)，其中 x 是为书籍 y 请求的成员。我们必须找到图书馆员最多可以给每个成员两本书的方式，以使最多的成员满意。

我提出了两种方法：

1.  引入两个新顶点 s(source) 和 t(destination)。将边从 s 引入 X 中容量为 2 的所有成员。所有边 E 的容量为 1，新边 Y 到 t 的容量为 1。现在应用 Max flow 算法找到最大匹配。最大匹配是所需的解决方案。
2.  另一种方法是通过引入相同的边来遵循与上述相同的算法，但每条边的容量为1。现在找到最大匹配。此匹配将为最多成员提供一本书。删除匹配的书籍并再次应用上述算法。再次删除匹配的书籍和拥有两本书的成员，并再次应用算法，直到 X 和 Y 之间没有边缘。获得的解决方案是所需的解决方案。

虽然我得到了上面的算法，但我不确定哪个是正确的，或者没有一个是正确的。如果还有其他算法，请在此处提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:57:32.727

第一个似乎是正确的。对于第二个，您无法保证您的第一轮作业不会阻止您达到最佳状态。

# objective-c - 在变量（ __fetchedResultsController ）之前使用两个下划线？

> ID：12305855
> 
> 赞同：1
> 
> 时间：2012-09-06T18:03:27.493
> 
> 标签：objective-c, ios, core-data

> **可能重复：**
> [Cocoa 中的双下划线是什么](https://stackoverflow.com/questions/566594/what-is-this-double-underscore-in-cocoa)

我见过各种使用两个下划线而不是一个下划线的 Core Data 代码示例。我知道 iVars 和使用 _variableName 的优势......但是使用两个而不是一个是否有特殊的原因/优势？比如 __fetchedResultsController = ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:07:05.517

没有真正的理由使用双下划线。

我会说我不是它们的粉丝，因为 Objective-C 中的某些东西使用它们，例如：

`__block`或者`__unsafe_unretained`

当我看到 时`__`，我倾向于首先将其视为 Apple 定义的装饰器。如果有的话，它会增加额外的思考，而单个下划线被普遍理解为一个类的 iVar。

我建议只使用`_`.

从[接受的答案到](https://stackoverflow.com/a/566715/420001)“可可中的双下划线是什么？”：

> C 编译器（以及扩展的 Objective-C）保留以两个下划线和一个大写字母开头的名称供编译器供应商使用，为它们提供一个保留的命名空间，用于用于实现标准库的全局变量和函数，或引入新的非-标准关键字，如`__block`.

[ANSI C 标准的总结](http://www.ericgiguere.com/articles/ansi-c-summary.html)说：

> 以下划线开头的外部标识符保留给库使用。

# c++ - 在对象数组的每个索引上调用不同的构造函数

> ID：12305863
> 
> 赞同：1
> 
> 时间：2012-09-06T18:03:50.873
> 
> 标签：c++, arrays, oop, object, constructor

我正在处理一个处理具有多个类的库部分的数据的项目。这里一个类感兴趣的接口就是这个。

```
class Author
{
  private:
    //data members
  public:
    Author (string _name) ;
    Author (string _name, int _books) ;
} ; 
```

数据至少有作者的名字，没有。书可能会出现。我自然不能在这里有默认构造函数。但是如果像这样创建一个静态数组。

```
Author auth_arr[100] ; 
```

由于缺少默认构造函数，编译器给了我错误。但这种说法也是无效的。

```
Author auth_arr[100] ("Jacob") ; 
```

有什么方法可以让我创建这个数组并调用我选择的构造函数，而不是创建另一个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:04:53.337

您可以在非常有限的范围内做到这一点。诀窍是在用逗号分隔的花括号内显式调用这些构造函数，并以这种方式实例化静态数组。

```
Author auth_arr [3] = {Author(“Kevin”, 7) ,Author(“Martha”) ,Author(“Shuan”, 15) } ; 
```

但这种方法简直就是一场噩梦。您可以对大小为 5 或 10 的数组执行此操作，但不能针对大小为 50 或更多的数组执行此操作。所以更好的选择是创建另一个方法并调用它并将细节作为参数传递。请记住，这仅适用于您所要求的静态数组。对于比静态更频繁使用的动态数组，即使这种方法也不适用。

C++ 不允许您使用另一种方法来调用您选择的构造函数。因此，应在类中定义默认构造函数以在实例化时调用。然后，可以随后使用数据调用适当的方法。

另一个更好的方法是使用 std :: vector。您可以在此处的另一个类似问题中找到它的详细信息。 [C ++中的构造函数和对象数组](https://stackoverflow.com/questions/8312054/constructors-and-array-of-object-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T19:04:31.407

你真的确定默认的 c-tor 在这里没有意义吗？

我会建议这个解决方案：

```
class Author
{
  private:
    //data members
  public:
    static string default_name;
    Author (string _name = default_name);
    Author (string _name, int _books);
} ; 
string Autor::default_name = "NOBODY"; 
```

如果你真的坚持要100个Jacobs，那么就这样去做吧：

```
Author::default_name = "Jacob";
Author auth_arr[100]; 
Author::default_name = "NONE"; 
```

[更新1]

但是，这仅适用于本地数组。通过一个小技巧，您可以将它用于静态/全局数组。我不打算介绍它-因为还有另一种解决方案可以在没有默认构造函数的情况下制作静态类数组，我从您的评论中了解到这是您的目标；）几乎没有宏的帮助，您甚至可以生成数千个对象：

```
#define MAKE_10(X) X,X,X,X,X,X,X,X,X,X

Author auth_arr[101] = {
   MAKE_10(MAKE_10(Author("Jacob", 0))),
   Author("Jacob", 0)
}; 
```

# eclipse - Eclipse 在现有的 tomcat 安装上运行 Web 应用程序

> ID：12305866
> 
> 赞同：0
> 
> 时间：2012-09-06T18:04:02.213
> 
> 标签：eclipse, tomcat, web-applications

我有一个现有的 tomcat 服务器在我的本地机器上运行，它是从 eclipse 之外启动的。有没有办法将我的 web 应用程序从 eclipse 部署到该 tomcat 实例，而无需 eclipse 尝试启动该 tomcat 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:14:13.513

可以在 Eclipse 中使用 ANT 脚本，它将战争文件部署到 tomcat 目录中，而 tomcat 将负责其余的事情。

对于那些 ant 脚本，您可以在下面的链接中看到

[Apache Ant 如何将 .war 文件部署到 Tomcat](https://stackoverflow.com/questions/6131462/how-apache-ant-deploys-war-file-to-tomcat)

[http://www.coderanch.com/t/423905/tools/automate-deployment-war-Tomcat-through](http://www.coderanch.com/t/423905/tools/automate-deployment-war-Tomcat-through)

# asp.net - 使用 ASP.NET 处理 xhr

> ID：12305867
> 
> 赞同：0
> 
> 时间：2012-09-06T18:04:03.587
> 
> 标签：asp.net, ajax, post, xmlhttprequest

我想使用 2 个参数从客户端（JavaScript）异步发送 POST 到服务器端（ASP.Net）：数字和长格式字符串。

我知道长格式的字符串在传递之前必须有 encodeURIComponent() 。

我的麻烦是我想在正文请求中嵌入长编码字符串，然后在服务器端从 C# 打开它。

拜托，你能帮帮我吗？我对 ajax、xhr、Request.QueryString[]、Request.Form[]、...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:20:52.387

首先，创建一个 HTTPHandler：

```
using System.Web;
public class HelloWorldHandler : IHttpHandler
{
    public HelloWorldHandler()
    {
    }
    public void ProcessRequest(HttpContext context)
    {
        HttpRequest Request = context.Request;
        HttpResponse Response = context.Response;
        //access the post params here as so:
        string id= Request.Params["ID"];
        string longString = Request.Params["LongString"];
    }
    public bool IsReusable
    {
        // To enable pooling, return true here.
        // This keeps the handler in memory.
        get { return false; }
    }
} 
```

然后注册它：

```
<configuration>
    <system.web>
        <httpHandlers>
            <add verb="*" path="*.ashx" 
                  type="HelloWorldHandler"/>
        </httpHandlers>
    </system.web>
</configuration> 
```

现在调用它 - 使用 jQuery Ajax：

```
$.ajax({
      type : "POST",
      url : "HelloWorldHandler.ashx",
      data : {id: "1" , LongString: "Say Hello"},
      success : function(data){
             //handle success
      }
 }); 
```

# 笔记

~~完全未经测试的代码，但它应该非常接近您的需要。~~

我刚刚测试过，它开箱即用。我是这样称呼它的：

```
<script language="javascript" type="text/javascript">
    function ajax() {
        $.ajax({
            type: "POST",
            url: "HelloWorldHandler.ashx",
            data: { id: "1", LongString: "Say Hello" },
            success: function (data) {
                //handle success
            }
        });
    }
</script>
<input type="button" id="da" onclick="ajax();" value="Click" /> 
```

# c++ - wchar 以单个或两个空字节结尾？

> ID：12305868
> 
> 赞同：11
> 
> 时间：2012-09-06T18:04:10.500
> 
> 标签：c++, string, null, byte, wchar

我只是不明白，也找不到太多关于 wchar end 的信息。

如果它以单个空字节结尾，它怎么知道它不是字符串结尾呢，如果像“009A”这样的东西代表一个unicode符号？

如果它以两个空字节结尾？好吧，我不确定，需要确认。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T18:13:16.977

由于宽字符串是宽字符数组，因此它甚至不能以单字节 NUL 结尾。它是一个两字节的 NUL。（C/C++ 中的数组只能保存相同类型的成员，因此大小相同）。

此外，对于 ASCII 标准字符，总是有一个或三个单字节 0，因为只有扩展字符以非零第一个字节开头（取决于`wchar_t`是 16 位还是 32 位宽 - 为简单起见，我假设 16 位和小端）：

```
HELLO is 72 00 69 00 76 00 76 00 79 00 00 00 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T18:12:02.563

在这里您可以阅读更多宽字符：[http ://en.wikipedia.org/wiki/Wide_character#Size_of_a_wide_character](http://en.wikipedia.org/wiki/Wide_character#Size_of_a_wide_character)

终止符是 L'\0'，表示 16 位空字符，因此它就像两个 8 位空字符。

请记住，“009A”只有 1 个 wchar，所以不是空 wchar。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T19:36:03.340

在 C 中（引用[N1570 草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，第 7.1.1 节）：

> *宽字符串*是一个连续的宽字符序列，以第一个空宽字符终止并包括在内。

其中“宽字符”是 type 的值，`wchar_t`定义`<stddef.h>`为整数类型。

[我在 C++ 标准的 N3337 草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)中找不到“宽字符串”的定义，但应该是类似的。一个小的区别是`wchar_t`C 中的 typedef 和 C++ 中的内置类型（其名称是关键字）。但由于 C++ 共享大部分 C 库，包括作用于宽字符串的函数，因此可以安全地假设 C 和 C++ 定义是兼容的。（如果有人可以在 C++ 标准中找到更具体的内容，请评论或编辑本段。）

在 C 和 C++ 中，a 的大小`wchar_t`是实现定义的。它通常是 2 或 4 字节（16 或 32 位，除非您在一个字节大于 8 位的非常奇特的系统上）。宽字符串是`wchar_t`由空宽字符终止的宽字符（值）序列。终止宽字符将与任何其他宽字符具有相同的大小，通常为 2 或 4 个字节。

特别是，如果`wchar_t`大于`char`，*单个*空字节不会终止宽字符串。

还值得注意的是字节顺序是实现定义的。值为 的宽字符`0x1234`，当被视为 8 位字节序列时，可能显示为以下任何一种：

*   `0x12`,`0x34`
*   `0x34`,`0x12`
*   `0x00`, `0x00`, `0x12`,`0x34`
*   `0x34`, `0x12`, `0x00`,`0x00`

这些并不是唯一的可能性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-02T19:43:00.030

如果你声明

```
WCHAR tempWchar[BUFFER_SIZE]; 
```

你让它为空

```
for (int i = 0; i < BUFFER_SIZE; i++)
            tempWchar[i] = NULL; 
```

# java - Android：Bitmap_NJI - 创建 SkBitmap 失败

> ID：12305870
> 
> 赞同：1
> 
> 时间：2012-09-06T18:04:34.077
> 
> 标签：java, android

所以我有一个使用 decodeFile 加载图像的函数 - 然后我正在调整照片的大小并将其绘制到画布中。这在我的 Moto Droid 2.2.3 和我的 Nexus 4.1.1 上非常有效 - 但在我的 HTC 4.0.3 上，每次 createScaledBitmap 触发时它都会崩溃并抛出错误“无法创建 SkBitmap”...

这是代码示例...

```
// create image bitmap
            BitmapFactory.Options bmOptions = new BitmapFactory.Options();
            bmOptions.inPurgeable = true;
            bmOptions.inSampleSize = 2;
            Bitmap rawImage = BitmapFactory.decodeFile(imageURL,bmOptions);
            Bitmap bmp = Bitmap.createBitmap(rawImage);

            float ratio = 0;
            int maxHeight = 900;
            int maxWidth = 900;
            float height = bmp.getHeight();
            float width = bmp.getWidth();

            Log.d("HEIGHT",""+height);
            Log.d("WIDTH",""+width);
            int nh = 0;
            int nw = 0;
            // check if current width is larger
            if(width > maxWidth){
                ratio = maxWidth / width;
                float newWidth = maxWidth;
                float newHeight = height*ratio;

                nw = Math.round(newWidth);
                nh = Math.round(newHeight);

                Log.d("NEW RATIO",""+ratio);
                Log.d("NEW HEIGHT",""+newHeight);

                // RESET HEIGHT AND WIDTH
                height = height * ratio;
                width = width * ratio;
            }
            if(height > maxHeight){
                ratio = maxHeight / height;

                float newWidth = width*ratio;
                float newHeight = maxHeight;

                nw = Math.round(newWidth);
                nh = Math.round(newHeight);

                Log.d("NEW RATIO",""+ratio);
                Log.d("NEW HEIGHT",""+newHeight);
                height = height * ratio;
                width = width * ratio;
            }
            bmp = Bitmap.createScaledBitmap(bmp,nw,nh,false);
            Bitmap img = Bitmap.createBitmap(bmp,0,0,655,655); 
```

就像我说的那样，这在我的其他设备和 Android 版本上运行良好......我尝试搜索，但似乎找不到任何真正解决这个问题的东西......

我知道它是 createScaledBitmap，因为如果我评论那条线一切正常 - 但我的位图无法缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:18:51.983

回答这个问题——

真正的问题是，在该特定设备上，调整大小比例太大，而不是适合定义的 655 区域，图像略微太小 - 这导致调整大小错误，但在运行 4.0.3 的 HTC 设备上却抛出“创建 SkBitmap 失败”错误。

解决方案是调整调整后图像的尺寸。

# php - Magento SQL 查询 - 按类别过滤产品

> ID：12305873
> 
> 赞同：1
> 
> 时间：2012-09-06T18:04:52.577
> 
> 标签：php, mysql, sql, magento, magento-1.6

我有以下 SQL 查询来检索产品：

```
$query = "SELECT *,m.m_name,m.m_website FROM belvg_countdown c 
INNER JOIN catalog_product_entity e ON e.entity_id=c.entity_id
LEFT JOIN manufacturers_products mp ON c.entity_id=mp.product_id
LEFT JOIN manufacturers m ON mp.manufacturers_id=m.manufacturers_id
WHERE DATE_FORMAT(expire_datetime_off , '%Y-%m-%d') > DATE_FORMAT(NOW() , '%Y-%m-%d')
AND DATE_FORMAT(expire_datetime_on , '%Y-%m-%d')!=DATE_FORMAT(NOW() , '%Y-%m-%d')
AND entity_type='product'"; 
```

现在，我还要添加一条语句，以仅加载名为“精选”类别的产品。你能帮我理解我应该比较/查询什么才能只获得“特色”产品吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:12:48.423

请参阅下面的 URL，它对您很有帮助

[Magento ->addCategoryFilter - 按根类别过滤产品集合](https://stackoverflow.com/questions/5078752/magento-addcategoryfilter-filtering-product-collection-by-root-category)

**或尝试一下**

好的，我认为这行得通，没有进行太多测试，但似乎已经成功了。您需要首先获取您的商店根类别 ID，然后加入一些字段，以便您可以访问产品“category_id”，然后使用它进行过滤：

```
$_rootcatID = Mage::app()->getStore()->getRootCategoryId();

$_testproductCollection = Mage::getResourceModel('catalog/product_collection')
->joinField('category_id','catalog/category_product','category_id','product_id=entity_id',null,'left')
->addAttributeToFilter('category_id', array('in' => $_rootcatID))
->addAttributeToSelect('*');
$_testproductCollection->load();

foreach($_testproductCollection as $_testproduct){ 
    echo $this->htmlEscape($_testproduct->getName())."<br/>"; 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:15:40.610

您不需要所有这些查询来从特定类别中获取有效产品。使用收藏。

```
$producs = Mage::getModel('catalog/category')->load(#categoryid or $_category->getId())
            ->getProductCollection()
            ->addAttributeToSelect('*')
            ->addAttributeToFilter('is_saleable', 1)
            ->joinField('is_in_stock', 'cataloginventory/stock_item', 'is_in_stock', 'product_id=entity_id', '{{table}}.stock_id=1', 'left'); 
```

# java - 如何将谷歌地图合并到 java gui 中？

> ID：12305875
> 
> 赞同：-2
> 
> 时间：2012-09-06T18:04:58.547
> 
> 标签：java, google-maps, user-interface, jtextfield

我的想法是将谷歌地图放在我的 java gui 中。我想要一个 jtextfield 来写我想去的地方，然后在 gui 中出现一个带有所需位置的图像。我不知道该怎么做。我什至不知道这是否可能。它不必是谷歌地图，而是其他一些做同样事情的地图软件。我做了一些研究，但我没有找到可以理解的东西。你有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:32:12.850

据我所知，你不能在你的 java GUI 中使用谷歌地图。谷歌地图有 javascript API。你可以做一些事情。如果你不打算使用，谷歌地图的所有功能（缩放等，..）我建议你使用**谷歌静态地图**。它的作用是，您发送一个 URL 请求，该请求会返回您的图片。

或者，您可以将 Web 浏览器控件嵌入到您的 GUI 中，显示使用 javascript API for Google Maps 的页面。

我知道这可能不是您想要的，但我认为仍然值得一试。

[谷歌静态地图链接](https://developers.google.com/maps/documentation/staticmaps/?hl=sl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:47:49.607

一个可能的解决方案可能是 GWT Google Maps 和 JavaFX webbrowser 控件。这样你就可以在 Eclipse 中完成所有的 Java 开发。

[http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)

[http://code.google.com/p/gwt-google-maps-v3/](http://code.google.com/p/gwt-google-maps-v3/)

# php - PHP批量重命名，具有不止一种重命名功能

> ID：12305880
> 
> 赞同：3
> 
> 时间：2012-09-06T18:05:35.493
> 
> 标签：php

我是 PHP 新手，我正在尝试做一些类似于 user580950 在[Bulk Rename Files in a Folder - PHP 中](https://stackoverflow.com/questions/4993590/bulk-rename-files-in-a-folder-php)询问的事情。

我想编写一个脚本，它将遍历给定目录中所有文件和目录的名称并做两件事：用破折号替换空格并将所有大写字母转换为小写字母。

根据上述问题的答案以及所需功能的 PHP 手册条目，我想出了以下代码：

```
if ($handle = opendir('/Users/username/Documents/School')) {

    while (false !== ($file_name = readdir($handle))) { 
        $to_lower = strtolower($file_name);
        $add_dashes = str_replace(" ", "-", $to_lower);
        rename($file_name , $add_dashes);
    }

    closedir($handle);
} 
```

此代码为目标目录中的每个文件/目录返回以下错误：

> 警告：重命名（THE 273，the-273）：第 8 行的 /Users/username/Sites/PHP/rename_files_in_directory.php 中没有这样的文件或目录

我尝试过以各种方式重新安排事情，但我完全不知道问题出在哪里。我在 Mac OSX.6.8 上运行 PHP 5.3.8 。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:31:11.790

您需要转义空格。尝试直接使用重命名：

```
<?php

if ($handle = opendir('/Users/username/Documents/School')) {

    while (false !== ($file_name = readdir($handle))) { 
        $to_lower = strtolower($file_name);
        $add_dashes = str_replace(" ", "-", $to_lower);
        exec("mv ".escapeshellarg($file_name). " ". $to_lower);
        }

    closedir($handle);
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:11:32.727

```
$path = '/Users/username/Documents/School';
[...]
rename("$path/$file_name", "$path/$add_dashes");
[...] 
```

或者

```
chdir ('/Users/username/Documents/School'); 
```

在你的代码之前。

# javascript - Cufon 不能在 SSL 上工作？

> ID：12305884
> 
> 赞同：0
> 
> 时间：2012-09-06T18:06:02.447
> 
> 标签：javascript, ssl, canvas, cufon

我为我的服务器购买了 SSL 并安装了它。但是在我安装之后，我发现 cufon 不再工作了。我检查了一些问题，并用谷歌搜索，但没有一个解决方案有效。

将页脚中的代码添加到页眉exc。，尝试了一切但没有奏效，感谢您的回复。

标题：

```
<script src="http://cufon.shoqolate.com/js/cufon-yui.js" type="text/javascript"> </script>
<script src="https://mywebsite.com/js/myriad-pro.cufonfonts.js" type="text/javascript"></script> 
```

页脚：

```
<script type="text/javascript">
Cufon.now(); 
Cufon.replace('.myriad_pro_semibold', { fontFamily: 'Myriad Pro Semibold', hover: true }); 
Cufon.replace('.myriad_pro_bold', { fontFamily: 'Myriad Pro Bold', hover: true }); 
Cufon.replace(
    'h1, h2, h3, h4, h5, h6, .menu-title',
    { fontFamily: 'Myriad Pro Bold' }
);
Cufon.replace('.nav a, .nav2', { fontFamily: 'Myriad Pro Semibold', hover: true }); </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:17:45.753

您是否尝试过将其下载`cufon-yui.js`到您自己的服务器并从那里提供服务？您当前正在从中获取它，`http`这`https`两者都破坏了使用的整个目的，`https`因为该连接不安全，并且可能是导致脚本甚至无法加载的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:26:31.703

来自谷歌服务器的一些脚本（如 jquery）可以作为协议不可知论者提供（这意味着如果父页面使用 https，它们将使用 https）

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

但是，cufon 的服务器上似乎没有 https。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T14:03:26.583

您可以使用以下链接代替 cufon.shoqolate.com。 `//cdnjs.cloudflare.com/ajax/libs/cufon/1.09i/cufon-yui.js`

事实上，cufon url 会自动重定向到这个 asd

# django - 我不能在支持 python 的网络主机上安装 Django 吗？

> ID：12305887
> 
> 赞同：0
> 
> 时间：2012-09-06T18:06:16.847
> 
> 标签：django

标题说明了一切。有网络主机说他们支持 python，但对 Django 保持沉默。如果我在他们的服务器上手动安装 Django，他们会支持 Django。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T18:18:13.830

在确定共享主机是否是运行 Django 的可行选项时，需要考虑一些事项。

1.  外壳访问 (ssh)
2.  Python 支持 (2.6+)
3.  允许长时间运行的进程
4.  最好支持 WSGI 应用程序或支持 fastcgi

一些共享主机不允许您运行任何长时间运行的进程，这意味着您只能通过 CGI 运行 django，而且质量确实很差。

仅 Python 支持可能并不总是足够的。它们可能只让您能够运行脚本，但不一定是守护进程或继续运行的应用程序。

作为参考示例，您可以查看 dreamhost 文档如何支持运行 Django：[http](http://wiki.dreamhost.com/Django)
: //wiki.dreamhost.com/Django 他们实际上支持 WSGI 或 FCGI。其他主机可能只给你一个 FCGI 选项。

这是另一个来自 hostgator 的示例，他们解释了如何通过 fastcgi 设置 django：http: [//support.hostgator.com/articles/django-with-fastcgi](http://support.hostgator.com/articles/django-with-fastcgi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:13:13.953

您需要命令行访问权限才能使用 Django 执行任何实际操作，这几乎意味着 SSH 访问权限，*大多数*共享托管服务提供商不会为您提供。对 Python 的支持可能仅是对部署他们已批准的预配置应用程序的支持。如果您可以获得 SSH 访问权限，那么您会没事的。否则，继续寻找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T18:12:24.180

Django 1.3 支持 python >= 2.4

Django 1.4 支持 python >= 2.5

如果您的托管服务提供商支持您应该能够安装 Django 的那些，您可能需要跳过一些步骤才能安装 Django 和您安装的其他相关 Python 库，并将它们放在您的 sys.path 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T18:47:37.090

如果你想使用共享主机 - 两种选择： 1\. 他们支持 Django 一键安装，那么安装它没有问题。只需单击几下，您就可以更改/添加/删除 django 文件... 2\. 他们有 Python（大多数主机都有），确保 Python 的版本不大于 2.7 如果您想使用 VPS 或专用主机。我认为安装 Django 和任何 Python 版本不会有任何问题。希望这可以帮助...

# java - 如何获得休眠的内部属性？

> ID：12305888
> 
> 赞同：2
> 
> 时间：2012-09-06T18:06:19.140
> 
> 标签：java, hibernate, generator, sequence

我想使用休眠的 TableGenerator 来生成自定义密钥

```
final SessionImpl session = ((SessionImpl) EntityManagerUtils
            .getEntityManager("CORE").getDelegate());

TableGenerator generator = new TableGenerator();

    Properties params = new Properties(??????????);
    // params.put("identifier_normalizer", ?);

    params.put("table_name", "eflow.docs_number_generators");
    params.put("value_column_name", "tbl.GENERATOR_VALUE");
    params.put("segment_column_name", "tbl.GENERATOR_KEY");
    params.put("increment_size", "25");
    params.put("segment_value", "2011");
    generator.configure(IntegerType.INSTANCE, params, session
            .getSessionFactory().getDialect());

    Serializable id = generator.generate(session, new Object());
    System.out.println(id); 
```

但是缺少键“identifier_normalizer”的对象，并且此代码段引发空指针异常。该对象属于`ObjectNameNormalizer`标准化数据库对象名称的类型，并存储在休眠本地映射中。

如何访问hibernate的内部映射和这个`ObjectNameNormalizer`对象？

实际上，我似乎需要休眠映射对象，但我不知道如何获得它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:25:32.187

解决方案来了：

```
 private String generateKey() {
    final SessionImpl session = ((SessionImpl) em.getDelegate());

    if (generator == null) {
        synchronized (TableGenerator.class) {
            if (generator == null) {
                generator = new TableGenerator();

                ObjectNameNormalizer normalizer = new ObjectNameNormalizer() {

                    @Override
                    protected boolean isUseQuotedIdentifiersGlobally() {
                        return false;
                    }

                    @Override
                    protected NamingStrategy getNamingStrategy() {
                        return new Configuration().getNamingStrategy();
                    }
                };
                Properties params = new Properties();
                params.put("identifier_normalizer", normalizer);
                params.put("table_name", "eflow.docs_num_generators");
                params.put("value_column_name", "GENERATOR_VALUE");
                params.put("segment_column_name", "GENERATOR_KEY");
                params.put("increment_size", "25");
                params.put("segment_value", "2011");
                generator.configure(IntegerType.INSTANCE, params, session
                        .getSessionFactory().getDialect());
            }
        }
    }

    Serializable id = generator.generate(session, new Object());
    return id.toString();
} 
```

# python - Google App Engine：随机错误“ImportError：无法导入名称节点”

> ID：12305890
> 
> 赞同：4
> 
> 时间：2012-09-06T18:06:30.143
> 
> 标签：python, google-app-engine, jinja2

我最近访问了我的 App Engine 站点，该站点运行良好，没有错误，并得到了一个丑陋的错误页面。在管理工具 App Engine 中记录了此错误：

```
2012-09-06 10:53:43.938
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 189, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 227, in _LoadHandler
    handler = __import__(path[0])
  File "/base/data/home/apps/s~myapp/1.361555922666090832/main.py", line 3, in <module>
    from controllers.routes import api_routes, web_routes, admin_routes
  File "/base/data/home/apps/s~myapp/1.361555922666090832/controllers/routes/api_routes.py", line 3, in <module>
    from ..api import api_obj_controller, api_app_controller, api_path_controller, api_user_controller
  File "/base/data/home/apps/s~myapp/1.361555922666090832/controllers/api/api_obj_controller.py", line 2, in <module>
    from ..handlers.api_handler import ApiRequestHandler
  File "/base/data/home/apps/s~myapp/1.361555922666090832/controllers/handlers/api_handler.py", line 2, in <module>
    from ..handlers.content_handler import BaseRequestHandler
  File "/base/data/home/apps/s~myapp/1.361555922666090832/controllers/handlers/content_handler.py", line 3, in <module>
    from webapp2_extras import jinja2
  File "/base/data/home/apps/s~myapp/1.361555922666090832/webapp2_extras/jinja2.py", line 15, in <module>
    import jinja2
  File "/base/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/__init__.py", line 33, in <module>
    from jinja2.environment import Environment, Template
  File "/base/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/environment.py", line 13, in <module>
    from jinja2 import nodes
ImportError: cannot import name nodes
W 2012-09-06 10:53:43.967
After handling this request, the process that handled this request was found to have handled too many sequential errors, and was terminated. This is likely to cause a new process to be used for the next request to your application. If you see this message frequently, you are likely returning errors continously from your application. 
```

因此它继续出现许多错误，但随后又开始工作而没有发布任何新代码。我的担忧显然是将来如何防止这种情况发生？为什么会这样？如果我不部署任何代码修复程序，它怎么可能自我纠正？这个错误让我担心它会随机发生在我的客户身上。

**编辑：**

此外，我收到的第一个错误是 DeadlineExceededError 错误，其中包括消息“此请求导致为您的应用程序启动一个新进程，因此导致您的应用程序代码首次加载。因此，此请求可能需要比应用程序的典型请求更长且使用更多 CPU。”

因此，从这条消息和蒂姆评论的内容来看，这是完全有道理的，但是我该如何解决它以使其不再发生？我该怎么做才能使 DeadlineExceededError 在启动新实例之前基本上不会出错整个站点？（也就是说，如果我理解正确的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:23:01.997

如果我理解正确，您会在某些加载请求中看到 DeadlineExceededErrors，但处理该请求的实例并未被终止。

这可能是因为您有一些裸露的除外块，例如：

```
try:
    do something
except:
    do other things 
```

我认为，您的实例发生的事情是其中一个异常子句捕获了 DeadlineExceededErrors，并且代码继续运行而不是抛出 DeadlineExceededError。如果在导入 jinja2 的过程中抛出了 DeadlineExceededError，则 jinja2 模块可以保持半加载状态。因此，该实例一直生活在腐败状态中。

如果正确抛出了 DeadlineExceededError，则应该杀死该实例，这样就不会像您一样出现损坏的实例。

这只是我的假设，让我知道是否可能是这种情况。

# python - 设置 pyqt qtablewidget 水平标题标签可编辑

> ID：12305894
> 
> 赞同：4
> 
> 时间：2012-09-06T18:06:43.913
> 
> 标签：python, pyqt

如何通过双击在 qtablewidget 中编辑水平标题的标签？到目前为止我有什么但不起作用。因此，当有人双击顶部标题时，会弹出一个 linedit 允许输入文本，然后重置标签。

```
import sys
from PyQt4 import QtGui,QtCore
import generate_file

class WebGetMain(QtGui.QMainWindow,generate_file):
    def __init__(self,parent=None):
        super(WebGetMain,self).__init__(parent)
        self.setupUi(self)
        #set these values customizable before user populates the table
        self.row_count = 20
        self.col_count = 20
        #setup actual cols,rows
        self.web_get_table.setRowCount(self.row_count)
        self.web_get_table.setColumnCount(self.col_count)
        #allow horizontal header to be altered
        #create and initialize linedit
        self.linedit = QtGui.QLineEdit(parent=self.web_get_table.viewport())
        self.linedit.setAlignment(QtCore.Qt.AlignTop)
        self.linedit.setHidden(True)
        self.linedit.editingFinished.connect(self.doneEditing)
        #connect double click action on header
        self.web_get_table.connect(self.web_get_table.horizontalHeader(),QtCore.SIGNAL('sectionDoubleClicked(int)'),self.on_header_doubleClicked)
        #setup vertical scrollbars for adding rows
        self.vBar = self.web_get_table.verticalScrollBar()
        self._vBar_lastVal = self.vBar.value()

        #initialize cols,rows
        for column in range(0, 2):
            for row in range(0, 3):
                print row, column
                item = QtGui.QTableWidgetItem()
                self.web_get_table.setItem(row, column, item)
        #scrollbar value signal to detect for scrolling
        self.vBar.valueChanged.connect(self.scrollbarChanged)

    def scrollbarChanged(self, val):
        #initialize scrollbar
        bar = self.vBar
        minVal, maxVal = bar.minimum(), bar.maximum()
        avg = (minVal+maxVal)/2
        rowCount = self.web_get_table.rowCount()

        # scrolling down
        if val > self._vBar_lastVal and val >= avg:
            self.web_get_table.insertRow(rowCount)

        # scrolling up
        elif val < self._vBar_lastVal:
            lastRow = rowCount-20
            empty = True
            for col in xrange(self.web_get_table.columnCount()):
                item = self.web_get_table.item(lastRow, col)
                if item and item.text():
                    empty=False
                    break
            if empty:
                #remove rows when scrolling up
                self.web_get_table.removeRow(lastRow)
        self._vBar_lastVal = val

    def doneEditing(self):
        self.linedit.blockSignals(True)
        self.linedit.setHidden(True)
        oldname = self.web_get_table.model().dataset.field(self.sectionedit)
        newname = str(self.linedit.text())
        self.web_get_table.model().dataset.changeFieldName(oldname,newname)
        self.linedit.setText('')
        self.web_get_table.setCurrentIndex(QtCore.QModelIndex())        

    def on_header_doubleClicked(self,item):
        self.linedit.setText(self.web_get_table.model().field(item).name)
        self.linedit.setHidden(False)
        self.linedit.blockSignals(False)
        self.linedit.setFocus()
        self.linedit.selectAll()
        self.sectionedit = item

def main():
    app = QtGui.QApplication(sys.argv)
    app.setStyle(QtGui.QStyleFactory.create("Plastique"))
    main_window = WebGetMain()
    main_window.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T04:12:40.203

老实说，我无法弄清楚你想用它做什么`QLineEdit`。但据我所知，你已经成功了一半。使用`sectionDoubleClicked`信号`horizontalHeader()`是一个好的开始。但剩下的对我来说是一个很大的问号。

您需要做的就是：获取标题项`horizontalHeaderItem(index)`并使用`text`来获取值或`setText`设置新值。

您可能会考虑[`QInputDialog.getText`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qinputdialog.html#getText)从用户那里获取新值。

这是一个显示这一点的最小示例：

```
import sys
from PyQt4 import QtGui

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.table = QtGui.QTableWidget(5,5)
        self.table.setHorizontalHeaderLabels(['1', '2', '3', '4', '5'])
        self.table.setVerticalHeaderLabels(['1', '2', '3', '4', '5'])
        self.table.horizontalHeader().sectionDoubleClicked.connect(self.changeHorizontalHeader)

        layout = QtGui.QHBoxLayout()
        layout.addWidget(self.table)
        self.setLayout(layout)

    def changeHorizontalHeader(self, index):
        oldHeader = self.table.horizontalHeaderItem(index).text()
        newHeader, ok = QtGui.QInputDialog.getText(self,
                                                      'Change header label for column %d' % index,
                                                      'Header:',
                                                       QtGui.QLineEdit.Normal,
                                                       oldHeader)
        if ok:
            self.table.horizontalHeaderItem(index).setText(newHeader)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:44:11.707

我从 QtCentre 上的 mechsin 找到了这个答案，它对我有用：

[http://www.qtcentre.org/threads/12835-How-to-edit-Horizo​​ntal-Header-Item-in-QTableWidget](http://www.qtcentre.org/threads/12835-How-to-edit-Horizontal-Header-Item-in-QTableWidget)

请参阅线程中的最后一条评论。总之，它在表头的视口中创建了一个 QLineEdit。用于双击标题的插槽会在适当的位置和宽度显示行编辑以覆盖标题部分。用于完成行编辑的槽隐藏行编辑并为标题项捕获其文本值。

# javascript - 为什么我的下拉菜单不能在我的引导导航中工作？

> ID：12305895
> 
> 赞同：0
> 
> 时间：2012-09-06T18:06:58.723
> 
> 标签：javascript, html, drop-down-menu, navigation, twitter-bootstrap

我正在使用最新版本的引导程序在[http://defend-foreclosure.com网站上工作。](http://defend-foreclosure.com)出于某种原因，我在导航栏中的“法律”下拉菜单不起作用。我已经包含了所有 JS 文件，但由于某种原因，无论我做什么，它都无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:10:13.073

您的网站缺少 bootstrap.min.js 只需将 bootstrap.min.js 复制到您网站上的 js 目录，然后将其添加到所有 html 页面中。

```
<script src="js/jquery.js"></script> 
```

我测试过，它有效！

# java - XA 数据源的性能开销 - 最佳实践

> ID：12305900
> 
> 赞同：4
> 
> 时间：2012-09-06T18:07:08.500
> 
> 标签：java, performance, jakarta-ee, distributed-transactions, xa

我试图了解 XA 数据源对性能的影响。

在许多应用程序中，并非所有事务都需要参与分布式事务（意味着只有少数事务需要分布式/参与其他资源）。

性能的权衡是否足以配置两个数据源（XA 和非 XA 各一个）？同样，答案是，这取决于场景，但我正在寻找“最佳实践”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T02:54:55.187

仅在需要时才值得使用 XA 事务。XA 提交代码路径的成本是非 XA 情况的 3-4 倍。大部分成本是由额外的通信引起的。交易时间越短，成本越高。

有一些 XA 特性试图降低成本：比如 1-Phase 提交优化和只读优化。如果底层数据库和驱动程序支持它，可升级 XA 也可以提供帮助。

# php - 在哪里为类定义异常

> ID：12305904
> 
> 赞同：1
> 
> 时间：2012-09-06T18:07:22.713
> 
> 标签：php, class, exception-handling

我只是第一次在我的代码中实现异常。

对于在类函数中使用的异常，哪里最好定义异常？

这是一个类和一些函数，它们代表我编写的一段代码：

```
//
// Do I define my exception here?
//
class CreateQuizException extends Exception {}

class Quiz()
{

    // Define the items in my quiz object
    $quiz_id = null;
    $quiz_name = null;

    // Function to create a quiz record in the database
    function CreateQuizInDatabase()
    {
        //
        // OR DO I DEFINE IT WITHIN THE FUNCTION??
        //
        class CreateQuizException extends Exception {}

        try
        {

            // Insert the record in to the database
            $create_quiz = mysql_query("INSERT INTO quizzes (quiz_name) VALUES ("' . $this->quiz_name . '")");

            if (!$create_quiz)
            {
                // There was an error creating record in the database
                throw new CreateQuizException("Failed inserting record");
            }
            else
            {
                // Return true, the quiz was created successfully
                return true;
            }

        }
        catch (CreateQuizException $create_quiz_exception)
        {
            // There was an error creating the quiz in the database
            return false;
        }
        catch (Exception $other_exception)
        {
            // There was another error
        }
    }

} 
```

是吗：

*   **在**将使用异常的类定义之前
*   仅**在**将要使用的函数内
*   还是我没有想到的其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:14:51.363

通常，出于两个不同的原因，我已经看到并使用了两个放置异常的地方：

1.  **在类定义之外**，因为有可能将异常抛出给调用者，我想明确指出这个异常在公共命名空间中。值得注意的是，我确实只看到异常放置在定义它们的类文件的末尾，但这是首选项，没有功能意义。

    ```
    class Foo {
    }

    class FooException extends Exception {} 
    ```

2.  **在**类定义内部，但在方法定义**之外**，如果 Exception 是此类本地的，则与类外部无关，并且不会由调用者处理。通常，`private`引入访问修饰符来强制执行此操作。

    ```
    class Foo {
        public function bar() {
        }
        private class FooException extends Exception {}
    } 
    ```

    但是，我不相信 PHP 支持嵌套类，因为我无法获得一个嵌套类示例来解析。我更多地从 Java 而非 PHP 中绘制我的示例。

将异常定义放在方法中似乎过于细化，您最终会用异常污染代码并最终得到：

```
class MyFunctionReturnedABadValueAndNowImSad extends Exception {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:26:21.207

使用[自动加载器函数](http://www.php.net/manual/en/function.autoload.php)或库。我一直在使用这个：

[http://static.invenzzia.org/docs/opl/3_0/book/en/autoloader.html](http://static.invenzzia.org/docs/opl/3_0/book/en/autoloader.html)

结果非常好。请注意，对于第二个选项，您必须使用命名空间或下划线命名约定：

```
class <vendor>_<package>_<namespace>_<class_name> {} 
```

并将类文件保存在正确的目录中。

然后在命名空间内的单个文件上定义异常。由于异常是类，因此将在需要时自动加载。

现在可能看起来有点矫枉过正，但从长远来看会更好。

# c# - 比较不同编码的字符串

> ID：12305908
> 
> 赞同：1
> 
> 时间：2012-09-06T18:07:47.300
> 
> 标签：c#, string, character-encoding, string-comparison

我有一些代码可以发出请求并与预期值进行比较。但是我在将网站上的字符串与代码中的字符串进行比较时遇到问题。我的单元测试代码说：

```
Assert.AreEqual failed.
Expected: <DEVOLUÇÃO DE VALORES>.
Actual:   <DEVOLUÇÃO DE VALORES>. 
```

我可以做些什么来比较字符编码的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T20:22:06.550

我只需要使用`Normalize`方法：

```
Assert.AreEqual(expected.Normalize(), actual.Normalize()); 
```

注意 taht`Normalize`允许您提供规范化表格。如果这样做，则必须在两个字符串中使用相同的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T07:24:02.077

忽略文化信息并进行比较。对字符串使用 String.ToUpperInvariant() 并进行比较。

# java - 检查到 ServerSocket 的传入连接

> ID：12305909
> 
> 赞同：1
> 
> 时间：2012-09-06T18:07:57.497
> 
> 标签：java, tcp

有没有办法检查到 ServerSocket 的传入连接，所以我的服务器在等待某人连接时不会停止。

我需要类似的东西

```
try {
if (server.thereisarequest()) {
Socket socket = server.accept();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:27:30.107

你确定要这个吗？呈现代码后，只有一个线程在等待。运行另一个处理接受的连接的线程，这样您的服务器就不会停止。您也可以使用 java 非阻塞异步 I/O（nio 和 nio2），但无论如何在后台都有一个线程在值班。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:19:42.547

保持简单...使用**无限** `while` **循环使服务器查找传入请求**...大多数服务器的工作方式..

```
while (true) {

incoming = s.accept();  // incoming is of type Socket.                              

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:29:03.207

您可以创建一个新线程来接受连接。

那么你有2个选择：

*   在新线程中处理套接字
*   将套接字放入队列 ( `ConcurrentLinkedQueue`) 并从主线程检查它的队列。

# jquery - 在 IE7/8 中，jQuery 告诉我 cellpadding=0 单元格的填充为 1px

> ID：12305910
> 
> 赞同：2
> 
> 时间：2012-09-06T18:08:00.593
> 
> 标签：jquery, internet-explorer, cellpadding

这是一个奇怪的问题 - 在下面的 jsFiddle 中，当使用 IE7 或 IE8 时，jQuery 为单元格的填充返回**0px**，这是正确的：

[http://jsfiddle.net/ZmfHE/](http://jsfiddle.net/ZmfHE/)

但是，当我在 IE7 或 IE8（下面的代码）的简单 HTML 页面中进行本地测试时，jQuery 告诉我填充是**1px**。谁能明白为什么会这样？代码与 jsFiddle 中的代码相同，除非我遗漏了什么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <script src="jquery-1.8.1.min.js" type="text/javascript"></script>
    <script>

      $(document).ready(function() {
        alert($("td").css("padding-left"));
      });

    </script>
  </head>
  <body>

    <table cellspacing="0" cellpadding="0" border="0" width="400">
      <tr><td>some text</td></tr>
    </table>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:28:12.067

小提琴正在将 normalize.css 应用于页面，这就是它返回 0 的原因。如果使用 IE 开发工具栏在小提琴上禁用规范化样式，它也会返回 1px。查看 IE 8 开发人员栏，您可以看到它认为在小提琴中取消规范化或在本地运行它时它应该有 1px 填充：

![填充图像](../Images/e1825cce3da0adb04839efcb53b38d86.png)

因此，您的环境中的解决方案是使用规范化 CSS 来应用您想要的格式。

# actionscript-3 - filterFunction 是永久的吗？

> ID：12305911
> 
> 赞同：0
> 
> 时间：2012-09-06T18:08:02.867
> 
> 标签：actionscript-3, apache-flex

一旦将 filterFunction 应用于 ArrayCollection，它就是永久的，不是吗？

例如，我将 filterFunction 应用于集合并进行远程调用以通过 addItem() 重新填充 ArrayCollection。

假设添加了 20 个项目。

如果我随后追踪集合长度，它显示为 0。那是因为过滤器已到位，而我刚刚添加的所有数据都不符合条件。

那正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:12:08.693

> 一旦将 filterFunction 应用于 ArrayCollection，它就是永久的，不是吗？

是的，直到你改变它。一旦您将其更改为其他内容并调用`collection.refresh()`.

# asp.net-mvc - asp mvc重定向不影响url

> ID：12305913
> 
> 赞同：0
> 
> 时间：2012-09-06T18:08:07.940
> 
> 标签：asp.net-mvc, url, action, query-string, url-redirection

我有一个相当古老的登录系统，这是登录操作的一部分：

```
// login action
return RedirectToAction("Action", new {
  id = aVal,
  name = aName,
  // other params
}); 
```

它将用户重定向到`Action`操作，我注意到`name`其他参数最终成为最终 url 方案的一部分。我需要将所有这些值传递给`Action`.

```
[HttpGet]
public ActionResult Action(int id, string name, ...) { 
```

1.  是否可以将它们传递给`Action`并具有这样的 url: `/Controller/Action/123`。
2.  我需要将该`Action`方法限制为仅通过登录操作的人，长 url + 查询字符串使其几乎不可能通过，但是还有另一种更专业的方法来做到这一点。

感谢和问候 SO 和 SE 社区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:33:50.027

为了获得 Restful 风格的 url，您需要设置适当的路由。

所以在你的情况下

routes.MapRoute("MyRoute", "MyController/MyAction/{id}/{name}", new { controller = "MyController", action = "MyAction" });

[你可以在这里](https://stackoverflow.com/questions/6541954/mvc3-routes-setup-as-id-id2-id3)看到一些其他的例子

您问题的第二部分更加模糊 - 您可能希望使用 [Authorize] 属性标记您的类，然后覆盖 OnAuthorization ，您可以在其中进行任何检查。不确定这是否是您正在寻找的。

[这里](https://stackoverflow.com/questions/11223545/overriding-onauthorization-in-asp-net-mvc-in-base-controller)有一个例子

# java - 执行一个线程队列

> ID：12305915
> 
> 赞同：3
> 
> 时间：2012-09-06T18:08:12.480
> 
> 标签：java, multithreading, runnable

我需要执行一个线程队列。我需要只有一个线程正在执行，然后将其他线程放入队列中，当当前线程完成时，我需要传递给队列中的第一个线程。

我需要它来在我的 JTable 上实现实时搜索。该表包含 50.000 行，因此如果没有这种方法，性能真的很差。我不知道如何实现它。任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T18:22:50.127

使用单线程[`Executor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html)from [`Executors.newSingleThreadExecutor()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)。您可以将您的工作作为`Runnable`对象传递给 the`Executor`并让它为您完成工作。

```
private final Executor executor = Executors.newSingleThreadExecutor();

public void doSomethingWith(final Object obj) {
    executor.execute(new Runnable() {

        public void run() {
            // Do something with obj
        }
    });
} 
```

将要一次运行一次的代码放入`run`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:23:33.750

`SingleThreadExecutor`from`java.util.concurrency`是您问题的答案...

**-**它的螺纹尺寸为 1....

**-**先完成**第一个任务，然后再进行第二个任务，**

**-**它维护**自己的隐藏队列**以跟踪剩余的任务......

# javascript - 如何将自由文本元素从数组附加到 DOM

> ID：12305918
> 
> 赞同：0
> 
> 时间：2012-09-06T18:08:28.827
> 
> 标签：javascript, jquery, html, append

我正在尝试从两个不同的 JavaScript 数组将信息附加到我的页面。它看起来像这样。

```
var i = 0;
var videoArr=["big long array"];
var descriptArr=["big long array"];

function appendVideo(i) {
    var url = "http://i.ytimg.com/vi/" + videoArr[i] + "/mqdefault.jpg";
    $("#history").append("<img src=\"" + url + "\" width=\"120\" height=\"68\" />**NEED TO PRINT descriptArr[i] HERE**<br />");
}

function loadHistory() {
    while (i < '.$length.') {
        appendVideo(i);
        i = i + 1;
    }
} 
```

所以上面的代码附加了 videoArr 中的所有元素没问题。问题是 descriptArr 充满了我需要在每个 videoArr 元素旁边打印的自由文本描述。他最好的方法是什么？我认为这不是 document.write(descriptArr[i])...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:14:49.770

不是最好的方法，但只是尝试这样的事情

```
$("#history").append("<img src=\"" + url + "\" width=\"120\" height=\"68\" />" + descriptArr[i] + "<br />"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:14:54.887

试试这个，只要你确定 descriptArr 不包含任何 HTML 文字。

```
$("#history").append("<img src=\"" + url + "\" width=\"120\" height=\"68\" />" + descriptArr[i] + "<br />"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:13:15.940

我用它来实现同样的事情：

```
aDate = (document.getElementById("datepicker").value);
$('.daysContain').find('div').eq(dateArray.length-1).prepend(aDate + '<br>'); 
```

# rdf - 用于从 8 个本体文件（.ttl 文件）中检索数据并以 json 格式显示输出的独立应用程序

> ID：12305927
> 
> 赞同：0
> 
> 时间：2012-09-06T18:09:16.960
> 
> 标签：rdf, semantic-web, ontology

我是语义网的新手。我花了很多时间来理解语义网的概念，即 RDF、本体、本体映射等。现在我的任务是从 8 个本体文件中检索数据并以 json 格式显示输出。我会详细解释这个问题。

我得到了 8 个本体文件（.ttl 文件），它们代表组织中人员的信息。现在输出必须包括公司中所有人员的信息以及他们的个人信息，如名字、姓氏、国家、年龄等。应用程序必须是独立应用程序。

为此，我认为我们需要组合所有本体文件并使用一些 API，但我不确定。请帮我。

拉克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:09:54.097

是的，最简单的方法是使用 RDF 工具包/框架。有大量不同的 RDF 工具包和 API 可用（例如 Java 中的 Jena 或 Sesame，.Net 中的 dotNetRdf，C 中的 Redland 等）。你选择哪一个取决于你最熟悉的编程环境。所以：选择一个，阅读它的文档/教程，然后尝试让一个简单的应用程序运行起来。如果您遇到困难，请提出一个新问题，但请具体说明：展示您尝试过的内容。

# android - Android在RelativeLayout中动态设置元素

> ID：12305929
> 
> 赞同：1
> 
> 时间：2012-09-06T18:09:26.740
> 
> 标签：android, android-relativelayout

嗨，我遇到了 RelativeLayout 的问题。这个想法是在屏幕顶部的 XML 代码中定义一个标题栏，然后在左侧的这个栏下方添加一个 textview 元素，但是当我在 java 代码中添加这个 TextView 时，它总是显示在左上角显示（意味着它设置在标题栏上）。有人知道我在做什么错吗？

```
 <ScrollView 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="fill_parent">

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/main">

    <Button 
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
     </RelativeLayout>
</ScrollView>

         RelativeLayout rl = (RelativeLayout) this.findViewById(R.id.main);

        for (int i=0; i<=5; i++) {

        TextView tv = new TextView(this);

        tv.setId(i);

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT );

        if (i == 0)
            params.addRule(RelativeLayout.BELOW, R.id.title);
        else 
            params.addRule(RelativeLayout.BELOW, i-1);

        rl.addView(tv, params);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:04:24.303

我认为您还必须向 textview 添加一个 ID，即使您不必引用它。您还可以一次调用 addView 和设置参数：

```
tv.setId(123);
params.addRule(RelativeLayout.BELOW, R.id.title);
rl.addView(tv, params); 
```

# php - MYSQL使用LIKE搜索具有不同列的多个表

> ID：12305931
> 
> 赞同：1
> 
> 时间：2012-09-06T18:09:30.180
> 
> 标签：php, mysql, search, multiple-tables, sql-like

我需要能够对多个表进行搜索并返回与搜索词相似的所有部分。我的问题是这些表有不同数量的列。不过，它们确实有具有相似名称的列。首先，PHP 检查“productnumber”表以查找具有相似部件号的所有部件。然后它搜索每个表以找到匹配的数字。

现在，如果在“组件”表中找到类似的部件，它将不会显示从适配器或连接器中找到的任何部件。而不是选择所有列并忽略搜索所有表，我想搜索在所有三个表中找到的这三个列并返回在所有表中找到的结果：

零件编号

图片

页

```
if(isset($_GET['num'])) {
$num = $_GET['num'];
$numresult = mysql_query("SELECT * FROM productnumber WHERE part_num LIKE '%$num%'");

  if ($numresult) {

    while ($row = mysql_fetch_array($numresult)) {

        if ($row["title"] == "connectors") {
            $numtitle = "connectors";
            $result = mysql_query("SELECT * FROM connectors WHERE part_num LIKE '%$num%'");
        }

        if ($row["title"] == "adapters") {
            $numtitle = "adapters";
            $result = mysql_query("SELECT * FROM adapters WHERE part_num LIKE '%$num%'");
        }

        if ($row["title"] == "components") {
            $numtitle = "components";
            $result = mysql_query("SELECT * FROM components WHERE part_num LIKE '%$num%'");
        }

    }

  }

} 
```

任何有关我的问题的帮助将不胜感激：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:17:51.027

```
 while ($row = mysql_fetch_array($numresult)) {

        if ($row["title"] == "connectors") {
            $numtitle = "connectors";
            $result[] = mysql_query("SELECT * FROM connectors WHERE part_num LIKE '%$num%'");
        }

        if ($row["title"] == "adapters") {
            $numtitle = "adapters";
            $result[] = mysql_query("SELECT * FROM adapters WHERE part_num LIKE '%$num%'");
        }

        if ($row["title"] == "components") {
            $numtitle = "components";
            $result[] = mysql_query("SELECT * FROM components WHERE part_num LIKE '%$num%'");
        }

    } 
```

您必须进行另一个循环以从**结果**数组中检索数据

# jquery - jQuery：ESC 队列

> ID：12305932
> 
> 赞同：3
> 
> 时间：2012-09-06T18:09:31.740
> 
> 标签：jquery, click, keyup

我正在开发一个巨大的应用程序，它使用一些子菜单、模式窗口、提示等。

现在，我想知道`Esc`在这样的应用程序中处理和单击外部事件的正确方法。

```
$(document).keyup(function(e) {
    if (e.keyCode == 27) { ... } 
}); 
```

我用它来处理`Esc`按键...如果只有一个事件要触发，这将很简单...

但请考虑一下： 1\. 单击打开模式窗口 2\. 在模式窗口内单击打开下拉菜单 3\. 将鼠标悬停在菜单项上打开工具提示

现在，当按下时`Esc`，首先工具提示应该关闭，再次按下菜单应该关闭，最后，模式窗口关闭

处理这个问题的正确方法是什么？

类似的点击外部...

如果您在模态窗口外单击，则整个模态窗口应关闭（包括菜单和工具提示）单击模态窗口但在菜单外，应关闭菜单和工具提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:16:57.377

对于每个打开的窗口、对话框等，它都被添加到页面级（全局）堆栈中。

document.keyup 事件，当收到 ESC 按下时，将最后一个项目从堆栈中弹出，并关闭它。

理想情况下，这可以改进为反转控制，因此 document.keyup 只是将事件传递给堆栈上的最后一项，然后它处理关闭自身并将自身从堆栈中移除。

您还必须跟踪并从堆栈中删除以另一种方式关闭的项目，这是反转控制的好处。

# android - 如何停止onScrollListener激活的Runnable线程？-Android

> ID：12305938
> 
> 赞同：1
> 
> 时间：2012-09-06T18:09:51.137
> 
> 标签：android, for-loop, android-listview, runnable, arrays

我已经编辑了我的问题。我编辑我的问题的原因是，无论我做什么线程都是从数据库中获取所有项目。检索几行数据不会有问题，但如果我的数据集比它可能会强制如果应用程序需要很长时间来检索所有数据并显示它，请关闭我的应用程序。

现在，当我的活动开始时，我只检索 5 个项目并将其显示在列表视图上。我通过使用“loadMoreItems1”线程来完成此操作。当用户向下滚动时，它会从数据库中检索 5 个以上的项目并将其添加到列表视图中。我通过线程“loadMoreItems”完成此任务

通过这样做，我消除了应用程序强制关闭的可能性。但是我遇到了另一个问题，并且当我向下滚动时最初在列表中添加 5 个项目（使用 listMoreItems1 线程）后，没有任何反应，接下来的 5 个项目没有被添加。此外，当我向下滚动后向上滚动时，我会收到“inder out of bound”错误/警告。

谁能建议我如何解决这个问题？

我已经在下面发布了针对这个问题的更新的相关代码：

下面是我的 Runnables 的代码，它负责从 JSONArray 获取数据并在活动开始时更新列表视图：

```
// Runnable to load the items
private Runnable loadMoreListItems1 = new Runnable() {
    public void run() {
        // Set flag so we cant load new items 2 at the same time
        loadingMore = true;
        // Reset the array that holds the new items
        int lastItemDisplayedIndex = myquestionsResults.size();
        HashMap<String, String> hm = new HashMap<String, String>();
        db = new DatabaseHandler(getApplicationContext());
        db.getReadableDatabase();
        hm = db.getUserDetails();
        db.close();
        String un = hm.get("username");
        uf = new UserFunctions();
        JSONArray json = uf.getAllQuestions(un);
        for (int i = lastItemDisplayedIndex; i < lastItemDisplayedIndex + 5; i++) {
            try {
                ja = json.getJSONArray(i);
                id = ja.getString(0);
                userName = ja.getString(1);
                question = ja.getString(2);
                tag1 = ja.getString(3);
                tag2 = ja.getString(4);
                tag3 = ja.getString(5);
                posted_on = ja.getString(6);
                DataHolder qih = new DataHolder();
                qih.setId(id);
                qih.setUserName(userName);
                qih.setQuestion(question);
                qih.setTag1(tag1);
                qih.setTag2(tag2);
                qih.setTag3(tag3);
                qih.setQuestionPostedOn(posted_on);
                myquestionsResults.add(qih);

            } catch (Exception e) {
                e.printStackTrace();

            }
        }
        // Done! now continue on the UI thread
        runOnUiThread(returnRes);
    }
}; 
```

下面是我的 Runnables 的代码，它负责从 JSONArray 获取数据并在用户向下滚动时更新列表视图：

```
// Runnable to load the items
private Runnable loadMoreListItems = new Runnable() {
    public void run() {
        // Set flag so we cant load new items 2 at the same time
        loadingMore = true;
        // Reset the array that holds the new items
        int lastItemDisplayedIndex = myquestionsResults.size();
        System.out.println("bhalubhai");
        System.out.println(lastItemDisplayedIndex);
        qid = myquestionsResults.get(lastItemDisplayedIndex-1).getId();
        System.out.println(myquestionsResults.get(lastItemDisplayedIndex-1).getId());
        HashMap<String, String> hm = new HashMap<String, String>();
        db = new DatabaseHandler(getApplicationContext());
        db.getReadableDatabase();
        hm = db.getUserDetails();
        db.close();
        String un = hm.get("username");
        uf = new UserFunctions();
        JSONArray json = uf.getAllQuestions2(un, qid);
        //int k = json.length();
        for (int i = lastItemDisplayedIndex; i < lastItemDisplayedIndex+5; i++) {
            try {
                ja = json.getJSONArray(i);
                id = ja.getString(0);
                userName = ja.getString(1);
                question = ja.getString(2);
                tag1 = ja.getString(3);
                tag2 = ja.getString(4);
                tag3 = ja.getString(5);
                posted_on = ja.getString(6);
                DataHolder qih = new DataHolder();
                qih.setId(id);
                qih.setUserName(userName);
                qih.setQuestion(question);
                qih.setTag1(tag1);
                qih.setTag2(tag2);
                qih.setTag3(tag3);
                qih.setQuestionPostedOn(posted_on);
                myquestionsResults.add(qih);

            } catch (Exception e) {
                e.printStackTrace();

            }
        }
        // Done! now continue on the UI thread
        runOnUiThread(returnRes);
    }
}; 
```

下面是 Runnable "returnRes" 的代码，loadMoreItems 和 loadMoreItems1 都使用它来更新 ListView：

```
private Runnable returnRes = new Runnable() {
    public void run() {
        // Tell to the adapter that changes have been made, this will cause
        // the list to refresh
            adapter.notifyDataSetChanged();
            // Done loading more.
            loadingMore = false;
    }
}; 
```

以下是我在向下滚动后向上滚动时收到的 LogCat 消息：

```
09-09 02:22:38.348: W/System.err(276): org.json.JSONException: Index 5 out of range [0..5)
09-09 02:22:38.368: W/System.err(276):  at org.json.JSONArray.get(JSONArray.java:263)
09-09 02:22:38.368: W/System.err(276):  at org.json.JSONArray.getJSONArray(JSONArray.java:455)
09-09 02:22:38.368: W/System.err(276):  at com.dimecore.qq.Questions$1.run(Questions.java:190)
09-09 02:22:38.368: W/System.err(276):  at java.lang.Thread.run(Thread.java:1096)
09-09 02:22:38.368: W/System.err(276): org.json.JSONException: Index 6 out of range [0..5)
09-09 02:22:38.368: W/System.err(276):  at org.json.JSONArray.get(JSONArray.java:263)
09-09 02:22:38.368: W/System.err(276):  at org.json.JSONArray.getJSONArray(JSONArray.java:455)
09-09 02:22:38.368: W/System.err(276):  at com.dimecore.qq.Questions$1.run(Questions.java:190)
09-09 02:22:38.368: W/System.err(276):  at java.lang.Thread.run(Thread.java:1096)
09-09 02:22:38.368: W/System.err(276): org.json.JSONException: Index 7 out of range [0..5)
09-09 02:22:38.368: W/System.err(276):  at org.json.JSONArray.get(JSONArray.java:263)
09-09 02:22:38.378: W/System.err(276):  at org.json.JSONArray.getJSONArray(JSONArray.java:455)
09-09 02:22:38.378: W/System.err(276):  at com.dimecore.qq.Questions$1.run(Questions.java:190)
09-09 02:22:38.378: W/System.err(276):  at java.lang.Thread.run(Thread.java:1096)
09-09 02:22:38.378: W/System.err(276): org.json.JSONException: Index 8 out of range [0..5)
09-09 02:22:38.378: W/System.err(276):  at org.json.JSONArray.get(JSONArray.java:263)
09-09 02:22:38.378: W/System.err(276):  at org.json.JSONArray.getJSONArray(JSONArray.java:455)
09-09 02:22:38.378: W/System.err(276):  at com.dimecore.qq.Questions$1.run(Questions.java:190)
09-09 02:22:38.378: W/System.err(276):  at java.lang.Thread.run(Thread.java:1096)
09-09 02:22:38.378: W/System.err(276): org.json.JSONException: Index 9 out of range [0..5)
09-09 02:22:38.378: W/System.err(276):  at org.json.JSONArray.get(JSONArray.java:263)
09-09 02:22:38.378: W/System.err(276):  at org.json.JSONArray.getJSONArray(JSONArray.java:455)
09-09 02:22:38.388: W/System.err(276):  at com.dimecore.qq.Questions$1.run(Questions.java:190)
09-09 02:22:38.388: W/System.err(276):  at java.lang.Thread.run(Thread.java:1096) 
```

实例化可运行的代码：

```
 lv.setOnScrollListener(new OnScrollListener() {

        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if (scrollState == SCROLL_STATE_IDLE) {
                loadingMore = false;
        }else{
                loadingMore = true;
            }
        }

        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {

            // what is the bottom item that is visible
            int lastInScreen = firstVisibleItem + visibleItemCount;

            // is the bottom item visible & not loading more already ? Load
            // more !
            if ((lastInScreen == totalItemCount) && !(loadingMore)) {
                Thread thread = new Thread(null, loadMoreListItems);
                thread.start();
            }
        }
    });

    // Load the first 5 items
    Thread thread = new Thread(null, loadMoreListItems1);
    thread.start() 
```

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:47:12.273

您需要进行测试以`for`在`i > k`.

# c# - 当用户为空时自动填充视图

> ID：12305943
> 
> 赞同：0
> 
> 时间：2012-09-06T18:10:04.510
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我愿意做以下事情（C# MVC 3.0）： - 当用户按下按钮时更新视图。- 这样的按钮有一个认证表格。- 如果用户和他在表单中输入的密码正常，他所在的页面会动态更新（这样用户留下的印象是页面不在同一页面中）。

它是这样的：

[使用 jQuery 自动刷新 div - setTimeout 还是其他方法？](https://stackoverflow.com/questions/220767/auto-refreshing-div-with-jquery)

据说这应该有帮助，但它没有

[https://stackoverflow.com/questions/10820075/dynamically-creating-a-custom-user-control-then-rendering-it-in-a-mvc-razor-view](https://stackoverflow.com/questions/10820075/dynamically-creating-a-custom-user-control-then-rendering-it-in-a-mvc-razor-view)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:16:35.647

你指的是这个吗？

```
@If Request.IsAuthenticated Then

    @<text>Welcome <strong>@User.Identity.Name</strong>!
    [ @Html.ActionLink("Log Off", "LogOff", "Account") ]</text>

Else

    @:[ @Html.ActionLink("Log On", "LogOn", "Account") ]

End If 
```

注意：这是 VB.NET。

# c# - 如何通过反射检查属性是否是虚拟的？

> ID：12305945
> 
> 赞同：25
> 
> 时间：2012-09-06T18:10:09.697
> 
> 标签：c#, reflection, virtual

给定一个对象，我如何判断该对象是否具有虚拟属性？

```
var entity = repository.GetByID(entityId); 
```

我试着看：

```
PropertyInfo[] properties = entity.GetType().GetProperties(); 
```

但无法辨别是否有任何属性表示虚拟。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-06T18:17:21.657

```
PropertyInfo[] properties = entity.GetType().GetProperties()
    .Where(p => p.GetMethod.IsVirtual).ToArray(); 
```

或者，对于 .NET 4 及以下版本：

```
PropertyInfo[] properties = entity.GetType().GetProperties()
    .Where(p => p.GetGetMethod().IsVirtual).ToArray(); 
```

这将获得一个公共虚拟属性列表。

它不适用于只写属性。如果需要，您可以手动检查`CanRead`并`CanWrite`阅读相应的方法。

例如：

```
PropertyInfo[] properties = entity.GetType().GetProperties()
    .Where(p => (p.CanRead ? p.GetMethod : p.SetMethod).IsVirtual).ToArray(); 
```

您也可以只获取第一个访问器：

```
PropertyInfo[] properties = entity.GetType().GetProperties()
    .Where(p => p.GetAccessors()[0].IsVirtual).ToArray(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-25T13:06:35.080

仅检查`IsVirtual`属性的访问器还将为您提供未`virtual`在类中声明的接口属性。如果“虚拟属性”是指可以在派生类中覆盖的属性，则还应该检查`IsFinal`（密封）：

```
var accessor = typeof(MyType).GetProperty("MyProp").GetAccessors()[0];
var isVirtual = accessor.IsVirtual && ! accessor.IsFinal; 
```

检查此示例应用程序：

```
using System;

namespace VirtualPropertyReflection
{
    interface I
    {
        int P1 { get; set; }
        int P2 { get; set; }
    }

    class A : I
    {
        public int P1 { get; set; }
        public virtual int P2 { get; set; }

        static void Main()
        {
            var p1accessor = typeof(A).GetProperty("P1").GetAccessors()[0];
            Console.WriteLine(p1accessor.IsVirtual); // True
            Console.WriteLine(p1accessor.IsFinal); // True

            var p2accessor = typeof(A).GetProperty("P2").GetAccessors()[0];
            Console.WriteLine(p2accessor.IsVirtual); // True
            Console.WriteLine(p2accessor.IsFinal); // False
        }
    }
} 
```

看到[这个答案](https://stackoverflow.com/a/4793253/633721)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-06T18:11:37.010

尝试

```
typeof(YourClass).GetProperty("YouProperty").GetGetMethod().IsVirtual; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T18:18:05.557

使用 GetAccessors 方法，例如第一个属性：

获取访问器：

```
properties[0].GetAccessors()[0].IsVirtual 
```

设置访问器：

```
properties[0].GetAccessors()[1].IsVirtual 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-06T18:12:41.723

这有点棘手，因为属性可以是只读的、只写的或读/写的。因此，您需要检查两个底层方法是否是虚拟的，如下所示：

```
PropertyInfo pi = ...
var isVirtual = (pi.CanRead && pi.GetMethod.IsVirtual)
             || (pi.CanWrite && pi.SetMethod.IsVirtual); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-31T11:12:02.403

IsVirtual 单独对我不起作用。它告诉我，我所有的非虚拟、不可为空的属性都是虚拟的。我不得不使用 IsFinal 和 IsVirtual 的组合

这就是我最终得到的结果：

```
PropertyInfo[] nonVirtualProperties = myType.GetProperties().Where(x => x.GetAccessors()[0].IsFinal || !x.GetAccessors()[0].IsVirtual).ToArray();

PropertyInfo[] virtualProperties = myType.GetProperties().Where(x => !x.GetAccessors()[0].IsFinal && x.GetAccessors()[0].IsVirtual).ToArray(); 
```

# ios - SecItemCopyMatching 返回的 SecIdentityRef 项目多于使用 SecItemAdd 添加的项目

> ID：12305947
> 
> 赞同：2
> 
> 时间：2012-09-06T18:10:20.820
> 
> 标签：ios, security, ssl, keychain

我正在为我们的 iPhone 应用程序实施 SSL 客户端身份验证，并使用应用程序钥匙串来存储客户端身份（证书 + 私钥）。将项目添加到钥匙串后，我在使用 SecItemCopyMatching 时得到了一些意想不到的结果。快速总结：我将一个 SecIdentityRef 添加到钥匙串中，但 SecItemCopyMatching 之后找到了两个。让我从事实开始。

我在装有 iOS 4.3.5 的 iPod 上运行我的应用程序。

我有一个空的应用程序钥匙串开始。

我的证书都是使用 openssl 创建的，并通过 PKCS#12 文件作为电子邮件附件部署到 iPod。PKCS#12 文件包含：

*   客户证书
*   客户端 CA 证书（客户端证书的颁发者）
*   根 CA 证书（客户端 CA 证书的颁发者）
*   客户端证书的 RSA 私钥

SecPKCS12Import 成功导入文件，生成的字典有以下内容：

*   一个“身份”
*   一份“信任”
*   一个“链”（CFArray 持有上述三个证书）

使用 SecItemAdd，我成功地将“身份”添加到钥匙串中。

接下来，我从字典中检索“链”数组并尝试添加证书。这样做时，第一个失败并出现错误 errSecDuplicateItem。我认为这是因为第一个证书是客户端证书，并且在我添加身份时它已经添加到钥匙串中。其他两个证书添加没有错误。

现在，如果我返回并使用 SecItemCopyMatching 与这些键/值对......

```
 keys   = {kSecClass, kSecReturnRef, kSecMatchLimit}
 values = {kSecClassIdentity, kCFBooleanTrue, kSecMatchLimitAll} 
```

...返回两个身份！此外，如果我检索每个 (SecIdentityCopyCertificate) 的证书，然后检索摘要 (SecCertificateCopySubjectSummary)，我看到两个身份都具有相同的证书！

最后，当我尝试从钥匙串 (SecItemDelete) 中清除身份时，第一次尝试成功，但第二次尝试失败并显示 errSecItemNotFound。

从我一直在做的所有谷歌搜索中可以清楚地看出，iOS 钥匙串存在“问题”。但是，我还没有看到这个报道；我也没有看到任何相关的东西。

所以，我的问题：

*   我是否正确使用了 SecItemCopyMatching？
*   在使用 SecItemCopyMatching 查找钥匙串中的身份时，它如何确定存在的身份？这是动态的，还是严格基于添加了多少 SecIdentityRef 项目？
*   这个问题可能与证书本身有关吗？请注意，尽管存在此问题，我仍然能够检索第一个身份和证书以响应 didReceiveAuthenticationChallenge。

如果需要，我可以发布代码和/或证书转储。

提前致谢，

Ken Cross 西门子企业网络。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:34:38.757

据我所知，您使用`SecItemCopyMatching`正确。

`SecIdentityRef` items are not actually stored on the keychain; they are generated dynamically for certificates that have an associated private key available. Duplicate identities are indeed strange, and probably indicate a framework issue -- perhaps the framework gets confused by the duplicate in the second set of certificates? (Please do file a bug at bugreport.apple.com!) Does the duplicate identity go away when you restart the app?

On the other hand, duplicate identities won't necessarily lead to any actual problem. If you are worried that you might be using the wrong identity, simply ask `SecItemAdd` to provide a persistent reference to the one it "creates" and use that to retrieve the `SecIdentityRef` when needed.

# c# - 将文本框中的 xml 写入现有 xml 文件而不替换旧文本，只需添加新文本

> ID：12305952
> 
> 赞同：0
> 
> 时间：2012-09-06T18:11:01.310
> 
> 标签：c#, xml, textbox

所以...我有 2 个文本框和 1 个按钮。当我向这些文本框输入数据并单击按钮时，我希望它输入 xml 文件并向其添加具有属性的新元素，而无需替换它。经过大量浏览后，我设法做了一些事情来替换我的 xml 文件中的所有文本，或者我得到了一个错误，所以我决定在这里发布一个问题。

这就是我的 xml 文件的外观：

```
<library>
<book name="Her way" price="20"></book>
<book name="His way" price="20"></book>
</library> 
```

我想要做的是插入：

```
<book name="Their way" price="22"></book> 
```

波纹管最后一个所以它看起来像：

```
<library>
<book name="Her way" price="20"></book>
<book name="His way" price="20"></book>
<book name="Their way" price="22"></book>
</library> 
```

每次我再次单击按钮时，它都会以相同的方式添加它，我会在文本框中更改名称和价格。

我想出了这段代码，但我对 xml 相当陌生，所以我不知道如何修改它或使它工作。

```
XDocument doc = XDocument.Load("booklibrary.xml");
            doc.Add(new XElement("book",
            new XAttribute("name", textBox1.Text),
            new XAttribute("price", textBox3.Text)));
            doc.Save("booklibrary.xml"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:33:03.330

`XDocument`如果您不使用命名空间，请不要使用。只需使用 an `XElement`，您的代码就可以工作：

```
var library = XElement.Load("booklibrary.xml");
library.Add(new XElement("book",
new XAttribute("name", textBox1.Text),
new XAttribute("price", textBox3.Text)));
library.Save("booklibrary.xml"); 
```

因为您使用`XDocument`,`Add`试图在根元素*旁边*`<library>`而不是在其内部添加新元素，导致异常，因为只能有一个根元素。[在 MSDN 上可以找到](http://msdn.microsoft.com/en-us/library/bb675196.aspx)几个说明性示例。

通过使用`XElement`如上所示，这个问题是固定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:18:44.827

我会改用 LINQ to XML，它非常易于使用且功能丰富！：

```
XElement ele = XElement.Load("booklibrary.xml");
            ele.Element("library").Add(
                new XElement("book",
                             new XAttribute("name", textBox1.Text),
                             new XAttribute("price", textBox3.Text)));
ele.Save(); 
```

这更干净，而且它使用了新的 .NET 东西。

# jquery - 通过滚动触发“查看更多”按钮

> ID：12305954
> 
> 赞同：0
> 
> 时间：2012-09-06T18:11:08.127
> 
> 标签：jquery, ajax, infinite-scroll

我想在我的图片库中实现无限缩放。

默认情况下，我的图片库会显示前 25 张图片。我有一个“查看更多”按钮，可以进行 ajax 调用，并在前 25 个图像下方的下一个 25 个图像中加载，以此类推，每次单击查看更多按钮。

我想要做的是通过向下滚动页面来触发这个查看更多按钮。从按钮滚动 100 像素会触发 ajax 加载事件并加载接下来的 25 个图像。继续向下将触发下一个 25 等等..

我是否需要一个无限加载脚本，例如 jquery.infiniteload.js 还是足以编写一个在向其滚动 100px 时触发点击动作的脚本..

我应该如何编写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:28:54.070

好的。我已经尝试过这种方式......并且它有效。

**HTML**

```
<div id="content">
  <img src="images/1.gif" height="48" width="48" />
  <img src="images/2.gif" height="48" width="48" />
  <img src="images/3.gif" height="48" width="48" />
  <img src="images/4.gif" height="48" width="48" />
  ...
</div> 
```

**JS**

```
$(window).scroll(function() {
if($(window).scrollTop() )
  if (($(window).scrollTop() + 100)  >=  $(document).height() - $(window).height()){
     $.ajax({
        url: 'images.txt',
        success: function(data) {
          $("#content").append('<img src="images/' + data + '" height="48" width="48" />');
        }
    });
  }
}); 
```

It loads the pictures 100px before the bottom of the page. Also populates the data from ajax call. The call is from text file but this is irrelevant.

# mysql - 使用mysql查询将日期从'yyyy-dd-mm'转换为'yyyy-mm-dd'

> ID：12305959
> 
> 赞同：1
> 
> 时间：2012-09-06T18:11:23.103
> 
> 标签：mysql, database

我正在研究一个具有“yyyy-dd-mm hh:mm”格式的日期字段的数据库，我使用 STR_TO_DATE 将该字段更改为“yyyy-mm-dd hh:mm”，但它返回了一个错误。

询问：

```
UPDATE transaction 
SET time_creation = STR_TO_DATE(time_creation, '%Y-%m-%d %H:%i'); 
```

错误：

> 日期时间值不正确：函数 str_to_date 的“2005-08-06 15:57:00”

我也对以下查询进行了检查：

```
SELECT 
   time_creation, 
   STR_TO_DATE(time_creation,'%Y-%m-%d %H:%i') AS DATE_FORMATTED 
FROM transaction; 
```

并在 DATE_FORMATTED 列中为日期值获取 NULL，例如 `'2007-22-11 15:32'`但对`'2007-09-11 13:12'`. 我不明白到底发生了什么。任何帮助表示赞赏.. 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:19:39.000

你有

```
STR_TO_DATE(time_creation,'%Y-%m-%d %H:%i') 
```

你给'2007-22-11 15:32'，这意味着'yyyy- **dd** -* *mm* * hh:mm'。

Sql 正在尝试解析包含数字 22 作为月份的日期...

阿比韦

```
SELECT STR_TO_DATE('2005-08-06 15:57:00', '%Y-%m-%d %H:%i'); 
```

在我的 mysql 服务器上工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:18:24.873

首先，您需要与我们共享表定义。听起来 time_creation 字段的列类型是 VARCHAR 而不是 DATETIME。所以你真的不应该尝试将结果存储回同一个字段。您希望将其保存到有效的 DATETIME 字段中，以便内在列类型正确。

其次，听起来您的某些值存储为 YYYY-DD-MM，而另一些则存储为 YYYY-MM-DD。是这样吗？如果是，您将需要更多逻辑来区分已经正确的值和不正确的值。但是，如果它们是混合的，那么您会有点麻烦，因为您怎么知道解释 2012-01-03 的正确方法？

编辑：

创建一个新的 DATETIME 字段（例如，我只使用 new_time_creation）并像这样更新：

```
UPDATE transaction SET new_time_creation = STR_TO_DATE(time_creation, '%Y-%d-%m %H:%i'); 
```

# ruby-on-rails - Rails：将文本添加到路由的 URL

> ID：12305960
> 
> 赞同：1
> 
> 时间：2012-09-06T18:11:23.820
> 
> 标签：ruby-on-rails, url, routes

是否可以将文本附加到路由的 URL，而不是说，

```
http://site/page/2 
```

它出来了

```
http://site/page/2-cool-stuff-here 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:21:40.670

这应该可以帮助您：[http ://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:31:52.363

由于您似乎可以将对象保留`id`在 url 中，因此您可以`to_param`像这样覆盖：

```
class Article < ActiveRecord::Base
  def to_param
    "#{id} #{name}".parameterize
  end
end 
```

它将返回（正如@Benjamin Tan 提到的[FriendlyId RailsCast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)`.../articles/1-[article name]`所指出的那样）。

如果您想要更多的功能，您应该查看 FriendlyId gem（请参阅上面的 RailsCast 链接）。

# haskell - 如何使用仍然使用 runhaskell/ghci 运行的库+可执行文件制作 Haskell cabal 项目？

> ID：12305970
> 
> 赞同：56
> 
> 时间：2012-09-06T18:12:13.650
> 
> 标签：haskell, cabal, ghci, runhaskell

如果您[在 cabal 文件中声明一个库 + 可执行部分，同时](https://stackoverflow.com/questions/6711151/how-to-avoid-recompiling-in-this-cabal-file/6711739)通过将库放入一个`hs-source-dirs`目录来避免库的双重编译，您通常不能再使用`ghci`and运行您的项目`runhaskell`，特别是如果可执行文件本身具有帮助模块。

什么是推荐的项目布局

*   只构建一次需要的东西
*   允许使用`runhaskell`
*   有没有黑客的干净结构？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-06T18:12:13.650

假设您有一个`mylib`库`mylib-commandline`和`mylib-server`可执行文件。

您使用`hs-source-dirs`库和每个可执行文件，以便每个都有自己的项目根目录，避免双重编译：

```
mylib/                      # Project root
  mylib.cabal
  src/                      # Root for the library
  tests/
  mylib-commandline/        # Root for the command line utility + helper modules
  mylib-server/             # Root for the web service + helper modules 
```

完整目录布局：

```
mylib/                      # Project root
  mylib.cabal
  src/                      # Root for the library
    Web/
      Mylib.hs              # Main library module
      Mylib/
        ModuleA             # Mylib.ModuleA
        ModuleB             # Mylib.ModuleB
  tests/
    ...
  mylib-commandline/        # Root for the command line utility
    Main.hs                 # "module Main where" stub with "main = Web.Mylib.Commandline.Main.main"
    Web/
      Mylib/
        Commandline/
          Main.hs           # CLI entry point
          Arguments.hs      # Programm command line arguments parser
  mylib-server/             # Root for the web service
    Server.hs               # "module Main where" stub with "main = Web.Mylib.Server.Main.main"
    Web/
      Mylib/
        Server/
          Main.hs           # Server entry point
          Arguments.hs      # Server command line arguments parser 
```

类似*存根的*入口点文件`mylib-commandline/Main.hs`如下所示：

```
module Main where

import qualified Web.Mylib.Server.Main as MylibServer

main :: IO ()
main = MylibServer.main 
```

您需要它们，因为`executable`必须从一个简单称为`Main`.

你`mylib.cabal`看起来像这样：

```
library
  hs-source-dirs:   src
  exposed-modules:
    Web.Mylib
    Web.Mylib.ModuleA
    Web.Mylib.ModuleB
  build-depends:
      base >= 4 && <= 5
    , [other dependencies of the library]

executable mylib-commandline
  hs-source-dirs:   mylib-commandline
  main-is:          Main.hs
  other-modules:
    Web.Mylib.Commandline.Main
    Web.Mylib.Commandline.Arguments
  build-depends:
      base >= 4 && <= 5
    , mylib
    , [other depencencies for the CLI]

executable mylib-server
  hs-source-dirs:   mylib-server
  main-is:          Server.hs
  other-modules:
    Web.Mylib.Server.Main
  build-depends:
      base >= 4 && <= 5
    , mylib
    , warp >= X.X
    , [other dependencies for the server] 
```

`cabal build`将构建库和两个可执行文件，而不需要对库进行双重编译，因为每个文件都在它们自己`hs-source-dirs`的文件中，并且可执行文件依赖于库。

您仍然可以`runghc`从项目根目录运行可执行文件，使用`-i`开关来告诉它应该在哪里寻找模块（`:`用作分隔符）：

```
runhaskell -isrc:mylib-commandline mylib-commandline/Main.hs

runhaskell -isrc:mylib-server mylib-server/Server.hs 
```

这样，您可以拥有一个干净的布局、带有辅助模块的可执行文件，并且一切仍然可以使用`runhaskell`/`runghc`和`ghci`. 为避免重复输入此标志，您可以添加类似于

```
:set -isrc:mylib-commandline:mylib-server 
```

到你的`.ghci`文件。

* * *

请注意，有时应该将您的代码拆分为单独的包，`mylib`例如`mylib-commandline`和`mylib-server`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-19T08:10:53.803

您可以使用`cabal repl`cabal 文件中的配置启动 ghci，并`cabal run`编译和运行可执行文件。与`runhaskell`and不同`ghci`，使用`cabal repl`and`cabal run`还可以正确地从 cabal 沙箱中获取依赖项。

# java - Struts2 拦截器在会话超时之前跟踪最后一页

> ID：12305971
> 
> 赞同：0
> 
> 时间：2012-09-06T18:12:15.957
> 
> 标签：java, jakarta-ee, struts2

我有一个 Web 应用程序，如果用户会话超时并且他们尝试再次登录，我需要将它们重定向到上次访问的页面。仅用于会话超时，如果用户注销我不想要此映射。

我知道可以使用拦截器和应用程序范围映射来完成。但是你能给我一个更新当前用户 url 的拦截器的代码示例吗？还有我的应用程序范围对象..在说 5 小时没有重新登录后我怎么说删除对该用户最后一页的引用？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:11:57.880

注册一个怎么样`HttpSessionListener`（看看这个[答案](https://stackoverflow.com/a/3064384/617996)）。这样，您将在会话被销毁时收到通知，因此这是您可以将有关上次访问页面的信息保存到数据库的最佳时机。

您的会话侦听器应如下所示：

```
package com.rr87;

import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class YourSessionListener implements HttpSessionListener {
  @Override
  public void sessionDestroyed(HttpSessionEvent event) {
    // Implement logic to save last visited page to database...
  } 
  .
  .
  .
} 
```

要注册您的会话侦听器，请将以下代码添加到您的**Web.xml**：

```
<web-app ...>
    <listener>
          <listener-class>com.rr87.YourSessionListener</listener-class>
    </listener>
</web-app> 
```

答案的最后一部分..您可以在成功注销时删除数据库中上次访问的页面引用。

**[编辑]**

从官方文档中，关于会话对象可访问的槽`HttpSessionEvent`：

> 容器创建一个 javax.servlet.http.HttpSessionEvent 对象，作为调用 HttpSessionListener 方法的输入。HttpSessionEvent 类包括以下方法，您的侦听器可以调用该方法：
> 
> HttpSession getSession()
> 
> 使用此方法检索已创建或已销毁的会话对象，您可以从中获取所需的信息。有关 javax.servlet.http.HttpSession 接口的信息，请参阅“Servlet 会话简介”。

基于此，我认为您仍然可以从“销毁”会话中获取数据。

# expression-blend - 从 Expression Blend 4 中的解决方案中删除项目？

> ID：12305978
> 
> 赞同：0
> 
> 时间：2012-09-06T18:12:32.107
> 
> 标签：expression-blend, expression-blend-4

晚上好，我的 Expression Blend 4 有问题。我想从我的解决方案中删除一个项目，但我不知道该怎么做。我决定简单地删除项目的目录，但现在我的解决方案中有一个不受支持的项目，并且 Blend 没有为我提供任何类型的删除按钮/链接。有什么方法可以在不创建新解决方案的情况下从 Expression Blend 4 中的解决方案中删除项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:04:13.450

不知道您是否修复了它，但我所做的是我在 Visual Studio 中对其进行了外部编辑，我已安装它 - 有一个用于在混合中进行外部编辑的链接，然后简单地使用删除按钮将其删除

# ruby - 如何启动 10 个实例并一次标记它们

> ID：12305979
> 
> 赞同：-1
> 
> 时间：2012-09-06T18:12:33.637
> 
> 标签：ruby, amazon-ec2, amazon-web-services

我想要一个可以启动的脚本，并标记我的实例，然后我可以使用 chef 相应地配置它们。

假设我的服务需要 10 个实例，我希望能够运行 10 个实例，然后根据它们的角色（web、db、应用服务器）标记它们。

然后，一旦我这样做了，我就可以使用 chef 连接到每一个并按照我想要的方式配置它们。

**但我很困惑，我知道我可以启动实例，但你如何等待它们上线？您是否必须在某种计时器中不断循环？** 这似乎是一种非常hacky的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:26:47.567

如果你要从外部做所有事情，你只需要轮询等待实例准备好（这并不一定意味着它可以使用 - 实际启动稍后完成）

您还可以在启动实例时传递用户数据。大多数 amis 支持云初始化，如果格式正确，会将传递的数据解释为 shell 脚本。该 shell 脚本可以运行 chef 或执行其他配置任务。

# c++ - 应用程序连接到数据库

> ID：12305980
> 
> 赞同：1
> 
> 时间：2012-09-06T18:12:35.740
> 
> 标签：c++, sqlite, visual-c++, ms-access, mfc

我有一个应用程序使用 DAO 类与 Access 数据库交互，最近我将数据库转换为 sqlite 数据库。

我不知道哪种连接方法更适合以下设计：

1.  打开应用程序时只使用公共变量创建一个数据库连接，任何查询在运行时使用唯一的连接对象进行交互，然后关闭应用程序时关闭连接

2.  每次运行查询之前创建数据库连接，然后在将结果集加载到内存后立即关闭数据库连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:31:19.977

我建议您封装您的数据库访问，以便以后可以更改是否保持持久连接或不打开的决定。

由于您使用的是 SqlLite，我假设它是一个单用户数据库，因此并发、连接争用、锁定等不太可能成为问题。

通常，重用短运行连接的主要原因通常是在多用户 Web 或面向服务的系统上，其中可扩展性和许可考虑很重要。这似乎不适用于您的情况。. 简而言之，根据上述假设，似乎没有任何理由不在您的应用程序/用户登录会话的整个期间保持连接打开。

但是，如果您使用事务，我建议您在每次成功的原子活动后提交这些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:19:08.920

您知道您的两个选项有 + 和 -。对于您的特殊情况，我认为每次都创建数据库连接并不是一个坏主意，因为创建与 sqlite 的连接非常快且不耗时。同样通过这种方式，您可以一次创建/关闭多个连接，这是一个很好的好处，也许您现在不这样做，但将来也许您将不得不这样做。

# html - Kineticjs Html5不能在同一阶段的其他不同层中影响图像对象？

> ID：12305996
> 
> 赞同：-1
> 
> 时间：2012-09-06T18:13:23.247
> 
> 标签：html, canvas, layer, kineticjs

我无法在同一阶段调整或旋转不同图层的大小或旋转，它会改变大小或旋转但不会立即生效，

如果您想查看使用此链接： [http ://clients.rafineri.net/test/canvas/canvasTest.php](http://clients.rafineri.net/test/canvas/canvasTest.php)

**页面源中的脚本**

只需使用滑块，然后单击图像即可查看问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:21:07.423

在两个函数（**updateResize()**和**updateRotate()**）的末尾插入该行

```
image.getLayer().draw(); /*redraws layer*/ 
```

要在页面加载时绘制图像，请在 InitStage() 中调用 layer.draw **()**

```
layer.draw(); /*add this line in initStage()*/
stage.draw(); 
```