# StackOverflow 问答 11291000-11291999

# hive - Hive 如何实现 count(distinct ...)？

> ID：11291003
> 
> 赞同：2
> 
> 时间：2012-07-02T09:27:43.263
> 
> 标签：hive

在 GenericUDAFCount.java 中：

```
@Description(name = "count",
value = "_FUNC_(*) - Returns the total number of retrieved rows, including "
      +        "rows containing NULL values.\n"

      + "_FUNC_(expr) - Returns the number of rows for which the supplied "
      +        "expression is non-NULL.\n"

      + "_FUNC_(DISTINCT expr[, expr...]) - Returns the number of rows for "
      +        "which the supplied expression(s) are unique and non-NULL.") 
```

但我没有看到任何处理“不同”表达式的代码。

```
public static class GenericUDAFCountEvaluator extends GenericUDAFEvaluator {
private boolean countAllColumns = false;
private LongObjectInspector partialCountAggOI;
private LongWritable result;

@Override
public ObjectInspector init(Mode m, ObjectInspector[] parameters)
throws HiveException {
  super.init(m, parameters);
  partialCountAggOI =
    PrimitiveObjectInspectorFactory.writableLongObjectInspector;
  result = new LongWritable(0);
  return PrimitiveObjectInspectorFactory.writableLongObjectInspector;
}

private GenericUDAFCountEvaluator setCountAllColumns(boolean countAllCols) {
  countAllColumns = countAllCols;
  return this;
}

/** class for storing count value. */
static class CountAgg implements AggregationBuffer {
  long value;
}

@Override
public AggregationBuffer getNewAggregationBuffer() throws HiveException {
  CountAgg buffer = new CountAgg();
  reset(buffer);
  return buffer;
}

@Override
public void reset(AggregationBuffer agg) throws HiveException {
  ((CountAgg) agg).value = 0;
}

@Override
public void iterate(AggregationBuffer agg, Object[] parameters)
  throws HiveException {
  // parameters == null means the input table/split is empty
  if (parameters == null) {
    return;
  }
  if (countAllColumns) {
    assert parameters.length == 0;
    ((CountAgg) agg).value++;
  } else {
    assert parameters.length > 0;
    boolean countThisRow = true;
    for (Object nextParam : parameters) {
      if (nextParam == null) {
        countThisRow = false;
        break;
      }
    }
    if (countThisRow) {
      ((CountAgg) agg).value++;
    }
  }
}

@Override
public void merge(AggregationBuffer agg, Object partial)
  throws HiveException {
  if (partial != null) {
    long p = partialCountAggOI.get(partial);
    ((CountAgg) agg).value += p;
  }
}

@Override
public Object terminate(AggregationBuffer agg) throws HiveException {
  result.set(((CountAgg) agg).value);
  return result;
}

@Override
public Object terminatePartial(AggregationBuffer agg) throws HiveException {
  return terminate(agg);
} 
```

}

Hive是如何实现的`count(distinct ...)`？当任务运行时，它确实花费了很多时间。它在源代码中的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:26:23.293

因为您可以只运行 SELECT DISTINCT column1 FROM table1，DISTINCT 表达式不是标志或选项，它是独立评估的

[这个页面](http://javasourcecode.org/html/open-source/hive/hive-0.7.1/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFParameterInfo.html)说：

> 对于 DISTINCT 实现，绑定到参数类型的数据的实际过滤由框架而不是 COUNT UDAF 实现处理。

如果您想深入了解源详细信息，请查看[hive git 存储库](https://github.com/apache/hive/)

# ios - 为什么尝试在此处显示 MFMailComposeViewController 会锁定屏幕？

> ID：11291008
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:28:15.720
> 
> 标签：ios, ipad, mfmailcomposeviewcontroller

我有一个 iPad 应用程序，它由一个加载第二个视图控制器的根视图控制器组成。在第二个视图控制器中，我有一个按钮应该显示一个`MFMailComposeViewController`.

我的问题是：
**在模拟器上，这很好用**。但是，**在实际设备上**，*按下此按钮会锁定屏幕，并且似乎会禁用所有用户与界面的交互*。

我的代码是：

```
//************** Send Email using Default IM ************************
-(void) showEmailModalView
{
    NSLog(@"Start method <ExportStatisticsController> : <showEmailModalView>  --");

    //    emailTextField.text = [emailTextField.text stringByReplacingOccurrencesOfString:@"(null)" withString:@""];
    //    subjectTextField.text = [subjectTextField.text stringByReplacingOccurrencesOfString:@"(null)" withString:@""];
    //    messageBodyTextView.text = [messageBodyTextView.text stringByReplacingOccurrencesOfString:@"(null)" withString:@""];

    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self; // &lt;- very important step if you want feedbacks on what the 
    //user did with your email sheet

    [picker setSubject:@""];

    NSArray *torec=[[NSArray alloc] initWithObjects:@"xyz@company.com", nil];
    [picker setToRecipients:torec];
    [torec release];

//------ message body ---

    NSString *body =@"";

    [picker setMessageBody:body isHTML:NO]; // depends. Mostly YES, unless you want to send it as plain text (boring)

    picker.navigationBar.barStyle = UIBarStyleBlack; // choose your style, unfortunately, Translucent colors behave quirky.
//    picker.ModalTransitionStyle = UIModalTransitionStyleCrossDissolve;

    [self presentModalViewController:picker animated:YES];
    [picker release];
    NSLog(@"End method <ExportStatisticsController> : <showEmailModalView>  --");

} 
```

**我做错了**什么导致这样的屏幕冻结？****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:57:38.040

该设备可能未设置为发送邮件。

在使用之前，`MFMailComposeViewController`您应该致电`[MFMailComposeViewController canSendMail]`以确保设备已配置为发送邮件。

在尝试将其呈现为模态视图控制器之前检查您的`picker`变量是否为非零也是一个好主意。**

# c# - 如何首先使用 EF 代码重置数据库迁移？

> ID：11291010
> 
> 赞同：9
> 
> 时间：2012-07-02T09:28:22.420
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-migrations

我有一个类库项目，我的 DbContext 和迁移启用了以下配置文件：

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <connectionStrings>
    <add name="DataContext" connectionString="Data Source=Data.sdf" providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="System.Data.SqlServerCe.4.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

在我为这个项目进行迁移之前的一段时间，Get-Migrations 命令总是向我返回以下内容：

```
PM> Get-Migrations -StartupProjectName "Data"
Retrieving migrations that have been applied to the target database.
201207012104355_Initial
201207012031234_Initial
201207012024250_Initial 
```

问题是即使我删除 Data.sdf 或删除所有项目并创建新项目，命令也总是返回这些项目。例如，我可以创建新数据库的唯一方法是将连接字符串中的数据库文件名从 Data.sdf 更改为 Data1.sdf。那么如何在不更改数据库名称的情况下重置迁移历史记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T20:42:23.497

不知道这是不是官方的方法。但我是这样做的。

1.  已删除的迁移文件
2.  从 __MigrationHistory 中删除了匹配行

    从 __MigrationHistory 中删除 MigrationId='201210271944168_AddLogTable'

# python - 使用 PyScripter 导入 matplotlib

> ID：11291016
> 
> 赞同：0
> 
> 时间：2012-07-02T09:28:41.813
> 
> 标签：python, matplotlib, import

我使用 PyScripter 作为 Python 编码的 IDE。我在windows中安装了matplotlib。现在我编写了一个导入matplotlib但PyScripter不导入这个lib的程序。我如何使用PyScripter进行matplotlib。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:54:11.703

这可能很晚了 :-) 但对于那些浏览的人来说——Pyscripter 可以连接到内部捆绑的 python 安装和你的全局安装（作为远程引擎）。导入到全局的包将在内部引擎中不可用。只需连接到远程，你应该很好。

# java - 如何在 java 中获取或拆分 QueryString() 参数

> ID：11291022
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:29:22.097
> 
> 标签：java

如何拆分和打印 QueryString() 中的所有参数并传递给枚举。

示例：`www.xyz.com/page1/a=1&b=2&c=3&d=4`。

查询字符串在这里：`a=1&b=2&c=3&d=4merat`

我想要这样`a=1, b=2, c=3`。我们也可以使用`req.getParameters`。但问题是 QueryString 参数是编码的。所以我只需要拆分这些参数。

如果你知道请告诉我。提前致谢。

什里坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:36:02.433

您可以使用来自[HTTPClient的](http://hc.apache.org/)[URLEncodedUtils.parse(String, Charset)](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html)

> 返回使用给定字符编码从给定字符串解析的 NameValuePairs 列表。

# ios - Mac和iOS应用程序之间的通用iCloud容器？

> ID：11291023
> 
> 赞同：3
> 
> 时间：2012-07-02T09:29:22.780
> 
> 标签：ios, cocoa-touch, cocoa, icloud, uidocument

我想构建一个基于 iCloud 的应用程序，它可以在 Apple 平台、iOS 和 Mac 上运行。该应用程序将使用 iOS 上的 UIDocument 和 Mac 上的 NSDocument 来建立基于文档的同步模型 - 在 iOS 上创建的文档将在 Mac 上可用，反之亦然。

我面临的特殊问题是我想要两个应用程序上的相同 iCloud 容器。XCode 根据 App ID 为应用程序创建一个默认容器，这在两个应用程序上必须不同，因为这似乎是 Apple 的要求 - 即使它们位于不同的平台上，也没有两个应用程序可以具有相同的应用程序 ID。

所以我单独留下了默认创建的容器，并在 Mac 应用程序和 iOS 应用程序上添加了另一个容器。该应用程序*似乎*运行良好，我可以在两个应用程序中的正确位置创建一个新文件包，但我遇到了 2 个问题：

1.  容器未正确显示在 iCloud 设置管理屏幕中。在 XCode 的权利部分，我将容器命名为`com.mycompany.myapp.mycontainer`两个应用程序中的名称。在 iOS 的设置屏幕（设置 -> 常规 -> 使用 -> 管理存储 -> 显示全部）中，我的应用程序被列为“mycontainer”，而不是我预期的应用程序的实际名称。是否可以在应用程序的 Info.plist 中提供名称和图标以使其正确列出？

2.  我的 NSMetadataQuery 无法正常工作。我使用 Empty Application 模板制作了 iOS 应用程序，因此 Info.plist 没有使用 CFBundleDocumentTypes 键正确设置，但我发现并修复了它。为了在 iOS 应用程序中触发我的 NSMetadataQuery，我正在使用：

    `[self.queryCloud setPredicate:[NSPredicate predicateWithFormat:@"%K like '*.myextension*'",NSMetadataItemFSNameKey]];`

    搜索范围设置如下：

    `[self.queryCloud setSearchScopes:[NSArray arrayWithObjects:NSMetadataQueryUbiquitousDocumentsScope, NSMetadataQueryUbiquitousDataScope, nil]];`

我在建立容器的 URL 后运行查询，我得到了开始和完成收集通知，但*从来没有*来自`NSMetadataQuery`. 除非我继续*创建*一个新文档。如果我创建文档，那么我会收到更新通知，但仅在该会话中。下次我启动应用程序时，相同的设置不会给我任何更新通知`NSMetadataQuery`。

我究竟做错了什么？任何关于创建面向 Mac 和 iOS 的 iCloud 文档应用程序的文章的指针将不胜感激！建议，想法是最受欢迎的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-05T14:52:12.467

我不知道你的 NSMetadataQuery 问题，但添加一个共享的 iCloud 容器很容易，只要你明白了：

1.  选择一个应用 ID 作为您的共享云容器。无论是 iOS 还是 Mac OS X，您都**需要发布此应用程序，并且必须先获得 Apple 审核团队* 的批准，然后您的 iCloud 容器才可**用于任何其他应用程序。例如

    ```
     com.company.myawesomeapp 
    ```

2.  请注意，**您不能在您的应用 ID** ( *com.company.myawesomeapp ~~.cloudcontainer~~* ) 之后使用容器名称，只需使用您的 appID！

3.  选择第二个应用 ID（并不重要），然后创建您的第二个应用。打开 Xcode 并在 Capabilites Pane 中启用 iCloud。然后在“iCloud Container Identifiers”下，添加您的第一个（***已发布并批准！***）应用程序的标识符

    ```
     com.company.myawesomeapp 
    ```

而已！只有这一点，这就是底线：

*为了使用容器，应用程序必须可用并获得批准。在批准之前，没有其他应用程序可以访问您的容器，因为从技术上讲，它仅在您的应用程序获得批准后才存在。*实际上，它不必在 AppStore 中可用，只需要获得批准（可以在开发者持有的版本上）。

**如果您的应用已发布并获得批准，您只能使用（共享）iCloud 容器。**

# c# - 信号量实现：Monitor vs. Sleeping Barber，巨大的性能差异

> ID：11291026
> 
> 赞同：0
> 
> 时间：2012-07-02T09:29:35.120
> 
> 标签：c#, performance, locking, semaphore, monitor

在我的计算机科学课上，我们有几种不同的信号量实现。其中两个是通过使用普通的 Monitor 实现完成的，一个是使用 Sleeping Barber 实现的：

监控实施：

```
class Semaphore {
int s; object mutex = new object();
public Semaphore(int n) { s = n; }

public void P() 
{
        lock (mutex) 
        {
          while (s == 0) Monitor.Wait(mutex); 
          s--; 
        }
}
public void V() 
{
        lock (mutex) 
        {
          s++; Monitor.Pulse(mutex); 
        }
}

} 
```

睡觉理发师实施：

```
class Semaphore {
int s; object mutex = new object();
public Semaphore (int n) { s = n; }

public void P () 
{
        lock(mutex) 
        {
            s--; 
            if (s < 0) Monitor.Wait(mutex);
        }
}
public void V () 
{
        lock(mutex) 
        { 
            s++;
            if (s <= 0) Monitor.Pulse(mutex);
        }
}

} 
```

这两种实现似乎与我非常相似。我看到的唯一区别是 s 在 sleep barber 实现中变为负数，而在 Monitor 实现中它保持在 s=0 直到 V() 被执行。

但测量结果存在巨大差异（来自演示幻灯片的数据）：

```
Semaphore Type     Time (ms)
Monitor                 7549
Monitor (Barber)      109598 
```

对这些巨大不同的绩效结果有什么可能的解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T03:06:53.560

我很确定这是由于`while`第一个解决方案中的原因，而第二个解决方案仅使用`if`. 会`while`反复检查条件，导致等待，直到一个时间片出现。

# java - 关于spring容器急切的单例设计模式

> ID：11291029
> 
> 赞同：2
> 
> 时间：2012-07-02T09:29:48.987
> 
> 标签：java, spring, design-patterns

我为 spring 开发了一个实用程序类，它是一个单例，它将为整个应用程序提供容器的参考，下面是我的类..

```
public class SpringUtility 
{
    private static BeanFactory factory ;
    static
    {try
        {BeanFactory factory = new XmlBeanFactory(new FileSystemResource("Spring.xml"));
        }   catch(Exception e) 
        {
            e.printStackTrace();
        }
    }

    private SpringUtility() 
    {}

    public static BeanFactory getBeanFactory()
    {       return factory;
    }} 
```

现在请告知我想将其转换为渴望单例的样式，请告知如何实现。请告知如何将同一类转换为渴望单例设计模式，例如正常的渴望设计模式是..

```
public class SingletonEager {

    private final static SingletonEager INSTANCE = new SingletonEager();

    private SingletonEager() {
    }

    public static SingletonEager getInstance() {
        return SingletonEager.INSTANCE;
    }

    protected Object clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException();
    }
} 
```

类似的方式我也想要春天一个请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:33:36.967

如果您想`BeanFactory`从 Spring 上下文中获取 bean，那么我建议您实现[`BeanFactoryAware`](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-aware-beanfactoryaware)，它将保持单例并热切加载

```
public class BeanManager implements BeanFactoryAware {

  private BeanFactory beanFactory;

  public Person getPerson(){ beanFactory.getBean(Person.class) ;}   

} 
```

并将这个类标记`BeanManager`为spring bean

# facebook - 脸书评论不起作用

> ID：11291030
> 
> 赞同：0
> 
> 时间：2012-07-02T09:29:49.817
> 
> 标签：facebook, plugins, comments, social

我想将我的网站与 Facebook 集成。我在 facebook 上创建了一个应用程序来获取 appid。但是我有一个问题，因为尽管在我的网站上添加了 HTML5 代码，但它们是不可见的。让我补充一点，我正在使用 facebook 登录，它工作正常。以下是我的页面代码： [链接到 pastebin](http://pastebin.com/mRNzE07Y)

但是当我使用空的 html5 模板时一切正常： [空的 html5+fb 评论](http://pastebin.com/4Uq2nckX)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:11:53.827

您的代码看起来不正确：

```
line 56:  js.src = "//connect.facebook.net/pl_PL/all.js#xfbml=1&appId=494206230595560";
line 61:  FB.init({appId: '378257452228548', status: true, cookie: true,
line 100: script src="http://connect.facebook.net/pl_PL/all.js#appId=494206230595560&amp;xfbml=1"> 
```

您正在多次加载 JS SDK 并指定不同的应用程序 ID。我的建议是从一个空的 html 文档开始，然后只添加一个 JS SDK 代码（由文档[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)提供）。那可行。

干杯。

# maven - JBoss/CXF Restful Web 服务给出错误“MalformedURLException：无协议：/”

> ID：11291035
> 
> 赞同：0
> 
> 时间：2012-07-02T09:30:28.567
> 
> 标签：maven, cxf, jboss6.x, cxfrs

我正在使用 Spring 编写一个用于依赖注入的 CXF/Maven Web 服务。以下是我的网络服务代码：-

```
@Path("/myws")
public interface IMyWebService {    
    @POST
    @Path("/someAction")    
    @Consumes("application/json")
    @Produces("application/json")
    MyResponse requestSomeAction(MyRequest requestObj);
}

@Service("myWebService")
public class MyWebService implements IMyWebService {    
    @Autowired
    private IMyCoreService myCoreService;

    public MyResponse requestSomeAction(MyRequest requestObj) {
        // do some work
        return myResponse;
    }
} 
```

在我的 applicationContext.xml ....

```
<context:component-scan base-package="com.company.project" />
<bean id="myCore" class="com.company.project.module.MyCoreService" />

<jaxrs:server id="restContainer" address="/">
    <jaxrs:serviceBeans>
        <bean class="com.company.project.module.MyWebService" />
    </jaxrs:serviceBeans>
    <jaxrs:features>
        <cxf:logging />
    </jaxrs:features>
    <jaxrs:providers>
        <bean class="org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider" />
    </jaxrs:providers>
</jaxrs:server> 
```

我已将所有 CXF 依赖项标记为提供的范围，以便使用 JBoss 文件夹中的 CXF 库。我必须将以下 jar 复制到 JBoss 的 default\lib 文件夹以满足所需的依赖关系。

```
cxf-rt-frontend-jaxrs.jar
aopalliance.jar
spring core jars
org.springframework.orm-3.0.0.RELEASE.jar
org.springframework.jdbc-3.0.0.RELEASE.jar
org.springframework.beans-3.0.0.RELEASE.jar
org.springframework.context-3.0.0.RELEASE.jar
com.springsource.org.hibernate.ejb-3.4.0.jar 
```

我的应用服务器是 JBoss。当我部署战争并启动服务器时，我收到以下错误：-

```
Caused by: java.net.MalformedURLException: no protocol: /
        at java.net.URL.<init>(URL.java:567) [:1.6.0_33]
        at java.net.URL.<init>(URL.java:464) [:1.6.0_33]
        at java.net.URL.<init>(URL.java:413) [:1.6.0_33]
        at org.jboss.wsf.stack.cxf.addons.transports.httpserver.HttpServerDestination.<init>(HttpServerDestination.java:67) [:3.4.1.GA]
        at org.jboss.wsf.stack.cxf.addons.transports.httpserver.HttpServerTransportFactory.createDestination(HttpServerTransportFactory.java:102) [:3.4.1.GA]
        at org.jboss.wsf.stack.cxf.addons.transports.httpserver.HttpServerTransportFactory.getDestination(HttpServerTransportFactory.java:91) [:3.4.1.GA]
        at org.apache.cxf.endpoint.ServerImpl.initDestination(ServerImpl.java:92) [:2.3.1]
        at org.apache.cxf.endpoint.ServerImpl.<init>(ServerImpl.java:71) [:2.3.1]
        at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:95) [:2.3.1] 
```

我认为“/”是applicationContext.xml中给出的服务定义中给出的地址。为什么我收到上述错误，我该如何解决？非常感谢您的帮助。

# iphone - 如何动态生成ColorfulButtons？

> ID：11291037
> 
> 赞同：0
> 
> 时间：2012-07-02T09:30:52.607
> 
> 标签：iphone, objective-c, xcode4.2

我使用以下链接将颜色应用于按钮：

[http://www.cimgf.com/2010/01/28/fun-with-uibuttons-and-core-animation-layers/](http://www.cimgf.com/2010/01/28/fun-with-uibuttons-and-core-animation-layers/)

我应该如何将上述内容用于动态按钮？我的代码是：

```
int y=297;
for (int i=0; i < [phonesArray count]; i++) {
    NSLog(@"%d phone number is :%@",i,[phonesArray objectAtIndex:i]);

    UIButton *phoneButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [phoneButton setTitle:[phonesArray objectAtIndex:i] forState:UIControlStateNormal];
    [phoneButton addTarget:self action:@selector(dailPhoneNo:)  forControlEvents:UIControlEventTouchUpInside];
    phoneButton.frame = CGRectMake( 11, y, 278, 42);
    [scrollView addSubview:phoneButton];

    y=y+60;
} 
```

我也试过这个：

```
ColorfulButton *phoneButton = [[ColorfulButton alloc] init]; 
[phoneButton setTitle:[phonesArray objectAtIndex:i] forState:UIControlStateNormal];
[phoneButton addTarget:self action:@selector(dailPhoneNo:) forControlEvents:UIControlEventTouchUpInside];
phoneButton.frame = CGRectMake( 11, y, 278, 42);
[phoneButton setHighColor:[UIColor redColor]];
[phoneButton setLowColor:[UIColor orangeColor]]; 
[scrollView addSubview:phoneButton]; 
```

但是按钮没有出现在视图上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:37:28.567

```
 [phoneButton setTitleColor:(UIColor *) forState:(UIControlState)];   
  [phoneButton setBackgroundColor:(UIColor *)];   
  [phoneButton setBackgroundImage:(UIImage *) forState:(UIControlState)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:32:19.260

这也让我困惑了很长时间，但只是想通了，所以我想我会发布我的解决方案。CIMGF 的 ColorfulButton 类非常酷，但是以编程方式创建一个并不容易。

我在 ColorfulButton 类中添加了一个额外的方法来简化整个过程。

在彩色按钮.h

```
- (ColorfulButton *)initWithFrame:(CGRect)frame title:(NSString *)title tag:(NSInteger)tag; 
```

在彩色按钮.m

```
- (void)configureColors
{
    [self setHighColor:[UIColor whiteColor]];
    [self setLowColor:[UIColor grayColor]];
}

- (ColorfulButton *)initWithFrame:(CGRect)frame title:(NSString *)title tag:(NSInteger)tag
{
    self = [super init];
    self.frame = frame;
    [self setTitleColor:[UIColor colorWithRed:.196 green:0.3098 blue:0.52 alpha:1.0]    forState:UIControlStateNormal];
    [self setTitleColor:[UIColor whiteColor] forState:UIControlStateHighlighted];
    [self.titleLabel setFont:[UIFont boldSystemFontOfSize:15.0f]];
    [self configureColors];
    [self awakeFromNib];    
    [self setTitle:title forState:UIControlStateNormal];
    self.tag = tag;

    return self;
} 
```

在我调用的 .m 程序中

```
ColorfulButton *button = [[ColorfulButton alloc] initWithFrame:CGRectMake(70.0, 50.0, 100.0, 37.0) title:@"Category" tag:888];
[button addTarget:self
           action:@selector(setCategoriesPressed:)
    forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button]; 
```

# objective-c - 找不到类方法

> ID：11291039
> 
> 赞同：1
> 
> 时间：2012-07-02T09:31:03.847
> 
> 标签：objective-c, ios, uiview, parameters, selector

我的程序不断崩溃：

```
-(void) moveImage:(UIImageView *)image duration:(NSTimeInterval)duration curve:(int)curve    x:(CGFloat)x y:(CGFloat)y key:(NSString *)key
{
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:duration];
[UIView setAnimationCurve:curve];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:)];

CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
image.transform = transform;
[UIView commitAnimations];
} 
```

这被调用，完成后我希望它调用下面的方法：

```
-(void)animationDidStop:(NSString *)key
{
if (key == @"burn") {
    //The burn card has been moved and stopped. Ready for the next.
    [self annPlayerRight];
}

} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:34:30.327

嗯，是的，因为`setAnimationDidStopSelector:withObject:`方法不存在...... UIView 的实际方法是： `+ (void)setAnimationDidStopSelector:(SEL)selector`

（注意`withObject:`部分丢失）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T09:45:28.020

检查[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)的`setAnimationDidStopSelector`方法。

> 动画结束后发送给动画代理的消息。默认值为 NULL。选择器应采用以下形式：

```
- (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context. 
```

因此，当您调用时，可以在方法中访问`beginAnimations`参数。`context``animationDIdStop`

希望这可以帮助。

# javascript - 从计算机检测用户空闲

> ID：11291040
> 
> 赞同：3
> 
> 时间：2012-07-02T09:31:04.827
> 
> 标签：javascript, flash, air, web

感谢@Trinh Hoang Nhu，找到了解决方案：

归功于@stacker（[Java 键盘/鼠标活动（甚至在我的应用程序之外）](https://stackoverflow.com/questions/3490469/java-keyboard-mouse-activity-even-outside-of-my-app)）[http://ksquared.de/blog/2011/07/java-global-system-hook/](http://ksquared.de/blog/2011/07/java-global-system-hook/)

即使页面不活动，是否有任何方法可以从 javascript 中检测击键和/或鼠标活动？我只想检测用户是否空闲。我确定这在纯 javascript 中是不可能的，baut mybe 一些 Flash 应用程序可以做到这一点并使用 javascript 进行迭代？

浏览器插件也是一种选择。浏览器（firefox）插件​​可以在不活动时监控键盘和鼠标吗？

我也没有使用 adobe air 的经验，也许这也是一种选择？

**笔记！我想检测所有活动，如果我的页面在后台。例如：如果用户在记事本中写它（不在我的页面中），我想仍然知道该用户处于活动状态..**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:55:31.283

来自评论：当然，java 小程序可以与 JS 交互。Java 小程序比 Flash 更强大，它可以处理你的请求 – Trinh Hoang Nhu

最终发现了这个：ksquared.de/blog/2011/07/java-global-system-hook

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:52:30.790

是的，您可以通过 JavaScript 检测击键和/或鼠标活动尝试查看这篇文章可能会对您有所帮助

[如果用户当前在页面上处于活动状态，如何使用 JavaScript/jQuery 检测？](https://stackoverflow.com/questions/1009260/how-can-i-detect-with-javascript-jquery-if-the-user-is-currently-active-on-the-p)

# actionscript-3 - 向精灵添加文本会导致缩放和可见性问题

> ID：11291042
> 
> 赞同：0
> 
> 时间：2012-07-02T09:31:07.520
> 
> 标签：actionscript-3, sprite, textfield

我将在底部添加代码的简化版本。

我有一个精灵，它可见且快乐。我有一个文本字段，这是可见且快乐的。如果我出于动画目的将文本字段打印到精灵，那么一切都会变得松散。

精灵有一个阴影，输出会抛出一个警告摆动，如果我是文本字段的父级，精灵的宽度为 8900+ 像素，高度为 7000 像素。我知道我可以在动画期间使用 hack 将文本字段和精灵保持在一起，但我宁愿不这样做。代码：

```
private var headerField:TextField = new TextField();  //text field for the header text
private var contentBox:Sprite;  //box surrounding text elements

headerFormat.font = boldFont.fontName;
            headerFormat.align = TextFormatAlign.LEFT;
            headerFormat.color = (0xDDDDDD);
            headerFormat.size = headerSize;
            headerFormat.leading = 2;

contentBox = new Sprite();
            contentBox.graphics.beginFill(uint(pageColour));
            contentBox.graphics.drawRect(0, 0, 100, 100);
            contentBox.graphics.endFill();

contentBox.filters = [new DropShadowFilter(4, 90, 0, 0.75, 4, 4, 0.75, 3, false, false, false)];

contentBox.x = 25;
                contentBox.y = 150;
                contentBox.width = 1140;
                contentBox.height = 555;

headerField.x = 50;
                headerField.y = 180;
                headerField.width = 610;

addChild(contentBox);
addChild(headerField); 
```

工作正常，改变：

```
addChild(headerField); 
```

到：

```
contentBox.addChild(headerField); 
```

并且文本字段不会显示，输出显示无法渲染阴影，并且一切运行速度都很慢。

我尝试在更改宽度等之前将项目添加到舞台，没有区别。有任何想法吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:11:07.490

我在使用 TweenMax 及其 MotionBlur 插件时解决了这个问题。你也用吗？

或者尝试使用一个 EmbeddedFont 看看是否可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:11:14.077

请记住，当基于父对象确定 DisplayObject 的 X 和 Y 属性时。因此更改文本的父级意味着它可能不会以您认为的位置结束（例如，它的 X 位置将不再距舞台左侧 50px，而是距 contentHeader 50px，而 contentHeader 本身距舞台左侧 25px阶段）。尝试注释掉阴影线（因为这似乎是导致错误的原因），然后查看文本字段实际最终位置的位置并进行调整。我不确定为什么这会导致错误。

或者，尝试注释掉设置标题 X、Y 和宽度的行，看看是否有任何改变。也许这将帮助您缩小错误范围。

# c# - 防止基于 Windows 的应用程序窃取其他应用程序的焦点

> ID：11291046
> 
> 赞同：0
> 
> 时间：2012-07-02T09:31:21.943
> 
> 标签：c#, winforms

我被一个偷窃焦点问题困住了。我的问题是每当我运行基于 Windows 的应用程序时，都会加载一个启动表单，它拥有窗口屏幕的整体控制/焦点。在加载过程中，如果我试图打开任何其他应用程序，如 Word、记事本、Outlook、浏览器等，那么我之前运行的应用程序会抢占新打开的应用程序（如 Word、记事本等）的焦点。我已经尝试了很多事情，并且在网上搜索了一个解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T09:42:40.560

在启动画面中添加：

```
this.TopMost = false. 
```

这是我从你的问题中理解的。

# c# - 删除实时服务器上的图像的正确方法

> ID：11291050
> 
> 赞同：0
> 
> 时间：2012-07-02T09:31:44.653
> 
> 标签：c#, asp.net, iis

我创建了一个从服务器中删除图像的简单方法。

```
 public static void deleteImage(string deletePath)
    {
        if (!File.Exists(deletePath))
        {
            FileNotFoundException ex = new FileNotFoundException();
            throw ex;
        }

        try
        {
            File.Delete(deletePath);
        }
        catch (IOException ex)
        {
            throw ex;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

该方法在 Visual Studio 开发服务器上运行良好，但是当我在使用 IIS 的实时服务器上尝试它时，我不断收到错误消息，指出资源正在使用中。它最终在大约 10 次尝试后起作用，但我负担不起。

也许我需要“锁定”文件才能在 IIS 上工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:55:31.003

It looks like the file on the IIS is used by some other process in most cases. The simplest solution is to try to remove the file in a loop waiting for the other process to release the lock. Still, you should consider to set the maximum number of tries and to wait for couple of miliseconds between each try:

```
 public static void DeleteImage(string filePath, int maxTries = 0) // if maxTries is 0 we will try until success
    {
        if (File.Exists(filePath))
        {
            int tryNumber = 0;

            while (tryNumber++ < maxTries || maxTries == 0)
            {
                try
                {
                    File.Delete(filePath);
                    break;
                }
                catch (IOException)
                {
                    // file locked - we must try again

                    // you may want to sleep here for a while
                    // Thread.Sleep(10);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:37:21.500

尝试这个

```
FileInfo myfileinf = new FileInfo(deletePath);
myfileinf.Delete(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:06:41.740

```
String filePath = string.Empty;
string filename = System.IO.Path.GetFileName(FileUpload1.FileName);    
filePath = Server.MapPath("../Images/gallery/") + filename;
System.IO.File.Delete(filePath); 
```

# arrays - 珀尔。比较具有重复值的数组

> ID：11291051
> 
> 赞同：2
> 
> 时间：2012-07-02T09:31:50.583
> 
> 标签：arrays, perl, compare

我有两个具有重复值的字符串数组，我想比较它们并获取 add/del/upd(=same) 元素的数量：

```
my @array1 = ("aaa", "bbb", "ccc", "eee", "eee");
my @array2 = ("aaa", "aaa", "bbb", "ccc", "ccc", "ddd", "fff"); 
```

我需要类似的东西：

```
add: 4
del: 2
upd: 3 
```

我试过[List::Compare](https://metacpan.org/module/List%3a%3aCompare)：

```
my @array1 = ("aaa", "bbb", "ccc", "eee", "eee");
my @array2 = ("aaa", "aaa", "bbb", "ccc", "ccc", "ddd", "fff");

my $lc = List::Compare->new(\@array1, \@array2);        
print Dumper "intersection (upd): ".scalar($lc->get_intersection);
print Dumper "only first   (del): ".scalar($lc->get_unique);
print Dumper "only second  (add): ".scalar($lc->get_complement); 
```

但它不适用于重复值：

```
$VAR1 = 'intersection (upd): 3';
$VAR1 = 'only first   (del): 1';
$VAR1 = 'only second  (add): 2'; 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:23:52.643

这将满足您的需求。

我相信机制是明确的。如果您需要进一步的解释，请再次询问。

```
use strict;
use warnings;

my @array1 = qw( aaa bbb ccc eee eee );
my @array2 = qw( aaa aaa bbb ccc ccc ddd fff );

my %data;

$data{$_}[0]++ for @array1;
$data{$_}[1]++ for @array2;

my ($add, $del, $upd) = (0, 0, 0);

for (values %data) {
  my ($a1, $a2) = map $_ // 0, @$_[0,1];
  if ($a1 < $a2) {
    $upd += $a1;
    $add += $a2 - $a1;
  }
  else {
    $upd += $a2;
    $del += $a1 - $a2;
  }
}

printf "add/del/upd = %d/%d/%d\n", $add, $del, $upd; 
```

**输出**

```
add/del/upd = 4/2/3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:50:57.707

您正在使用[多重集](http://enwp.org/Multiset)（又名包）（元素可以多次出现），而不是集（元素是唯一的）。使用[Set::Bag](http://p3rl.org/Set%3a%3aBag)。

# google-docs - 如何以编程方式获取谷歌文档演示文稿的查看网址？

> ID：11291053
> 
> 赞同：3
> 
> 时间：2012-07-02T09:31:51.537
> 
> 标签：google-docs, google-docs-api, google-drive-api

最近 google docs 演示文稿的 url 发生了变化：

例如来自 URL : `https://docs.google.com/present/edit?id=[docId]`,

到 `https://docs.google.com/presentation/d/[docId]/edit`.

由于这个问题，我在我的应用程序中遇到了一个问题，因为我正在修改编辑 URL 以通过替换“编辑”来查看演示文稿以查看模式，因此 url 变为： `https://docs.google.com/present/view?id=[docId]`，

但现在要在查看模式下查看演示文稿，我需要将 'edit' 替换为 'preview'，以便 url 为`https://docs.google.com/presentation/d/[docId]/preview`.

但是在我的应用程序中，我也有旧的演示文稿和新的演示文稿，我需要确定如果这是一个较旧的演示文稿，而不是替换为“视图”，否则为“预览”（我可以通过检查 url 是否是新的或旧式一）。但我的问题是这种方式是否正确，或者在 Java API 中是否有任何方式可以直接获取演示文稿的查看/预览模式 URL。我尝试过使用`getDocumentLink().getHref()`方法和`getHtmlLink().getHref()` 方法，但两者都给了我编辑模式 URL。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:23:31.860

我认为这是目前唯一的方法，因为没有 API 功能可以始终为您提供演示/查看 URL。

但是，您可以使用的最接近的东西是`embedLink`

例如，在 Google Drive v2 API 中，您会发现：

对于较新的演示文稿：

```
"alternateLink": "https://docs.google.com/presentation/d/1aJMN10R9JSWtSVBxhrW1J6v1mc3iEt91WQtyesge0N8/edit",
"embedLink": "https://docs.google.com/presentation/d/1aJMN10R9JSWtSVBxhrW1J6v1mc3iEt91WQtyesge0N8/preview", 
```

对于较旧的演示文稿：

```
"alternateLink": "https://docs.google.com/present/edit?id=0Ad-4449Da_xrZGZtbjNuenBfMTE0ZzhudzVkaGY",
"embedLink": "https://docs.google.com/present/embed?id=0Ad-4449Da_xrZGZtbjNuenBfMTE0ZzhudzVkaGY&size=m", 
```

尽管对于较旧的演示文稿，您将获得嵌入小部件 URL，而不是不太好的 IMO 演示文稿 URL。

这在理论上应该会自行解决，因为我们希望可能在今年的某个时候将所有使用旧系统的演示文稿转换为新系统（但没有承诺，因为这个转换过程非常棘手）。

# ant - 访问从 ant 脚本设置的 ivy 中的属性值

> ID：11291056
> 
> 赞同：1
> 
> 时间：2012-07-02T09:31:53.343
> 
> 标签：ant, ivy

我有一个带有 ant 脚本的 build.xml 文件在 build.xml 中，我为属性 env.REVISION 设置了一个值，在目标内部设置给它的值在它之外是不可访问的。例如，在下面的代码中，${env.REVISION} 设置为 1.0.1.0，但目标“Get_Revision”内的回显给出了正确的值，但目标“运行”内的回显不能替代版本号。echo 语句将输出作为 ${env.REVISION}

```
<project name="module_name" default="run" xmlns:ivy="antlib:org.apache.ivy.ant">
  ...
  <target name="run" description="Run" depends="Get_Revision">
    <antcall target="Get_Revision" />
    <echo>${env.REVISION}</echo>
    <ivy:retrieve/>
  </target>
  <target name="Get_Revision" description ="Gets the revision number">
    ...
    <property name="env.REVISION" value="1.0.1.0" />
    <echo>${env.REVISION}</echo>
    ...
  </target>
  ...
</project> 
```

另外，我也想在 ivy.xml 文件中使用这个属性 ${env.REVISION} 。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:05:45.683

当你使用[antcall](http://ant.apache.org/manual/Tasks/antcall.html)任务时，你会创建一个新的上下文：

> 被调用的目标在一个新项目中运行；请注意，这意味着被调用目标设置的属性、引用等将不会持续回调用项目。

在如图所示的示例中，您在目标上使用`depends`声明`run`，以及`antcall`对`Get_Revision`目标使用 .

由于`antcall`上面给出的原因，不会给出你想要的结果。

但是，`depends`确实给出了您想要的结果。你确定你的测试场景（第二个回声）在`depends`包含时会失败吗？

顺便说一句，`env.`前缀通常用于从环境变量加载的属性，如下所示：

```
<property environment="env"/>
<echo>${env.SOME_VAR_NAME}</echo> 
```

# installshield - InstallShield 版本 10 中的远程安装支持

> ID：11291062
> 
> 赞同：0
> 
> 时间：2012-07-02T09:32:20.630
> 
> 标签：installshield

我有`InstallShiled`版本 10，我正在使用它来创建`msi`（Microsoft 安装程序）。

1）我想创建一个可以支持远程安装的安装程序。
2）我做了一些谷歌搜索，但无法找到有关该问题的任何线索。

`Installshield`是否可以在版本 10中创建远程安装程序功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:46:34.060

InstallShield 10 doesn't exist. There was an 'X' (Roman Numberal Ten) and a '2010' version. Both supported Basic MSI projects which if done properly can be installed remotely.

Otherwise it's not clear what you are trying to do.

# asp.net - 从父页面访问用户控件中的 SQLDatasource。

> ID：11291066
> 
> 赞同：0
> 
> 时间：2012-07-02T09:32:48.417
> 
> 标签：asp.net, vb.net, user-controls

好的，所以我已经坐在这个问题上一段时间了。搜索答案无济于事，也就是说我是否使用了正确的关键字:(

**设想**

一个人需要一个可以在一个网站的多个不同页面上使用的搜索控件。因此，构建了一个用户控件。

**用户控制设置。（孩子）**

它有几个列表框、文本框、一个按钮和 SQLDatasource。用户在相关字段中选择或输入值并单击按钮，按钮 Click 事件触发并从 DB 获取数据并将其存储到 SQLDatasource 中。这一切都很好，花花公子。

**父页面设置。**

这包含一个 Gridview，它必须显示包含在 Child 中的 SQLDatasource 中包含的数据。

**问题。**

我不知道如何访问要分配给 Gridview 的 SQLDatasource。

**问题。**

1.  如何访问 SQLDatasource ？
2.  Gridview 可以分页吗？
3.  如果 2 是“否”，那么另一种选择是什么？
4.  将 SQLDatasource 分配给 Gridview 的最佳事件是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:24:17.420

看起来您将一直拥有相同的连接字符串，如果是这种情况，只需转到用户控件 (.ascx.cs) 后面的代码并尝试以下操作，将 SqlDataSource 绑定到 asp gridview

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
            LoadData();
    }
    private void LoadData()
    {
        //ConnectionStringSettingsCollection ConnctionStringCollection = ConfigurationManager.ConnectionStrings;
        string ConnectionString = <your connection string>;
        string SelectQuery = string.Empty;
        //if (!HasStoredProcedure)
        //    SelectQuery = QueryOrStoredProcedure;

            DashGridDataSource.ConnectionString = ConnectionString;
            DashGridDataSource.SelectCommandType = SqlDataSourceCommandType.Text;
            DashGridDataSource.SelectCommand = SelectQuery;
            DashGridDataSource.EnableCaching = true;
            DashGrid.DataSourceID = DashGridDataSource.ID;
        }
    } 
```

我的 .ascx 文件如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="DashGridWidget.ascx.cs" Inherits="*****.Widgets.DashGridDefault" %>
<asp:SqlDataSource ID="DashGridDataSource" runat="server" EnableCaching="true" CacheDuration="300"></asp:SqlDataSource>
<asp:GridView ID="DashGrid" runat="server"
AllowPaging="True" AllowSorting="True" onsorting="DashGrid_Sorting"> 
```

您还可以在 .ascx.cs 的开头向您的自定义控件添加自定义属性：

```
public partial class DashGridDefault : System.Web.UI.UserControl
{
    public string QueryOrStoredProcedure { get; set; }
    public bool HasStoredProcedure { get; set; }
    public int DatabaseEnum { get; set; } 
```

这就是我使用控件的方式：

```
<Dashboard:IconGrid runat="server" ID="proceedings" DatabaseEnum="3" HasStoredProcedure="false" SessionVariableID="Proceeding" QueryOrStoredProcedure="SELECT TOP 100 CONTACTS FROM CUSTOMERS" /> 
```

# cocos2d-iphone - cocos2d如何让ccdrawline画线更平滑

> ID：11291068
> 
> 赞同：0
> 
> 时间：2012-07-02T09:32:58.520
> 
> 标签：cocos2d-iphone

我尝试使用 cocos2d 制作追踪手指游戏。

我移动我的手指写一个字母，结果是这样的：

[http://www.freeimagehosting.net/m39l6](http://www.freeimagehosting.net/m39l6)

源代码：

```
-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event{
    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];
    CGPoint oldTouchLocation = [touch previousLocationInView:touch.view];
    oldTouchLocation = [[CCDirector sharedDirector]convertToGL:oldTouchLocation];
    oldTouchLocation = [self convertToNodeSpace:oldTouchLocation];

    NSValue *oldVal = [NSValue valueWithCGPoint:oldTouchLocation];
    NSValue *val = [NSValue valueWithCGPoint:touchLocation];
    [trails addObject:oldVal];
    [trails addObject:val]; 
```

}

画法：

```
-(void)draw{
    for (int i=0; i<trails.count-1; i++) {
           origin = ((NSValue *)[trails objectAtIndex:i]).CGPointValue;
           destination = ((NSValue *)[trails objectAtIndex:i+1]).CGPointValue;
           ccDrawLine(origin, destination); 
    } 
```

}

我试过 glEnable(GL_LINE_SMOOTH)。但这在设备上不起作用。

知道如何修复红圈部分吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:10:39.900

您使用的 gl 线宽大于 iPhone 上允许的最大值。这就是当你超过这个数字时会发生的事情，你会得到那些奇怪的加号形状。您需要做的是使用 CCRenderTexture 像画笔一样连续绘制精灵。阅读本教程，尤其是关于绘制草图的部分。

[http://www.learn-cocos2d.com/2011/12/how-to-use-ccrendertexture-motion-blur-screenshots-drawing-sketches/#sketching](http://www.learn-cocos2d.com/2011/12/how-to-use-ccrendertexture-motion-blur-screenshots-drawing-sketches/#sketching)

# ruby - 在 YAML 转储后立即加载 ruby YAML

> ID：11291070
> 
> 赞同：1
> 
> 时间：2012-07-02T09:33:04.620
> 
> 标签：ruby, sockets, yaml

我想知道为什么我不能在 YAML 转储后立即加载 YAML

我尝试了以下代码，但控制台上没有“结束”打印

有人能告诉我我有什么问题吗？

感谢您

服务器端红宝石代码

```
require 'socket'
require 'yaml'
h = []
s = TCPServer.open('localhost',2200)
c = s.accept
loop do
    YAML.dump(h,c)
    YAML.load(c)
    puts "end"
end 
```

客户端红宝石代码

```
require 'socket'
require 'yaml'
d = []
s = TCPSocket.open('localhost',2200)
loop do
    d = YAML.load(s)
    YAML.dump("client",s)
    puts "end"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:23:54.233

`YAML`事先不知道要读取多少字节，因此它会尝试尽可能多地读取并永远等待。没有`end_of_record`for `TCP/IP`。

```
require 'socket'
require 'yaml'
h = []
s = TCPServer.open('localhost',2200)
c = s.accept
loop do
    s = YAML.dump(h)
    c.write([s.length].pack("I"))
    c.write(s)
    length = c.read(4).unpack("I")[0]
    p YAML.load(c.read(length))
end

require 'socket'
require 'yaml'
d = []
c = TCPSocket.open('localhost',2200)
loop do
    length = c.read(4).unpack("I")[0]
    p YAML.load(c.read(length))
    s = YAML.dump("client")
    c.write([s.length].pack("I"))
    c.write(s)
end 
```

# iphone - 为 iOS 编译 pHash

> ID：11291072
> 
> 赞同：13
> 
> 时间：2012-07-02T09:33:07.003
> 
> 标签：iphone, objective-c, ios, arm, phash

如何编译 pHash `iOS`？

我阅读了文档，但没有提及`iOS/arm`也`Google`没有帮助。

因此，如果有人能够为 iOS 编译 pHash，请分享您的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T10:46:52.460

如果您需要 pHash 用于 imageHash，您可以考虑查看适用于 iOS 的 imageMagick 框架：[http ://www.imagemagick.org/download/iOS/](http://www.imagemagick.org/download/iOS/)

此外，您应该记住 pHash 是根据 GPLv3 许可的，这意味着衍生作品只能在相同的许可条款下分发。

# javascript - 在本地部署脚本时收到错误

> ID：11291076
> 
> 赞同：0
> 
> 时间：2012-07-02T09:33:29.910
> 
> 标签：javascript, jquery

当我在 IE8 中分解这段代码时

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>
<noscript><a href="http://polldaddy.com/poll/5968383/">This is a test question ?</a></noscript> 
```

并作为本地文件运行我收到此错误：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)
Timestamp: Mon, 2 Jul 2012 09:30:39 UTC

Message: '_container' is null or not an object
Line: 63
Char: 6669
Code: 0
URI: http://static.polldaddy.com/p/6343643.js 
```

当我将此页面放到服务器上，或使用 chrome 或 firefox 在本地运行时，它似乎工作正常，当我尝试在本地运行时，它可能是防火墙阻止了某些东西吗？

这是正在导入的 6343643.js，由于问题字符限制，我截断了一些代码：

```
var pollClosed5968383 = false;
var PDV_POLLRAND5968383 = false;
var PDV_a5968383 = '';
var PDV_o5968383 = '';
var PDV_id5968383 = 5968383;
var PDV_pt5968383 = 0;
var PDV_po5968383 = 0;
var PDV_b5968383 = 1;
var PDV_pr5968383 = 1;
var PDV_l5968383 = 0;
var PDV_s5968383 = 105;
var PDV_h5968383 = '0ec8b1077c28c833ab3714cef04b0f31';
var PDV_w5968383 = 5968383;
var PDV_share5968383 = 0;
var PDV_expire5968383 = 7257600;
var PDV_version5968383 = 0;
var PDV_def5968383 = '#PDI_container5968383 .pds-box{font-family: Helvetica, Arial, sans-serif;background: #fff;border: 1px solid #ccc;width: 300px;font-size: 12px;text-align: left;color: #4e4e4e;-webkit-border-radius: 12px;-moz-border-radius: 12px;border-radius: 12px;} #PDI_container5968383 .pds-box A{outline: none;} #PDI_container5968383 .pds-clear{display: block;clear: both;} #PDI_container5968383 .pds-box-outer{padding: 12px;} #PDI_container5968383 .pds-question-top{font-size:14px;line-height: 120%;color: #333;font-weight: bold;padding: 5px 0px 15px 0px;position:relative;} #PDI_container5968383 .pds-answer{padding: 10px 0px 10px 0px;border-top: 1px solid #e8e8e8;border-bottom: 1px solid #e8e8e8;} #PDI_container5968383 .pds-answer label{color: #333;font-size: 13px;line-height: 150%;position: relative;} #PDI_container5968383 .pds-answer-group{display: block;padding: 8px 0px 8px 0px;} #PDI_container5968383 .pds-answer-group BR{display: none;} #PDI_container5968383 .pds-answer-input{display: block;float:left;width: 25px;} #PDI_container5968383 .pds-input-label{display: block;float:left;width: 245px;cursor: pointer;} #PDI_container5968383 .pds-answer-other{padding: 0px 0px 0px 10px;} #PDI_container5968383 .pds-textfield{background: #FFF;border: 1px solid #d1d1d1;font-size: 12px;padding: 2px;width: 150px;} #PDI_container5968383 .pds-answer-other BR{display: none;} #PDI_container5968383 .pds-other-label{display: block;float:left;cursor: pointer;} #PDI_container5968383 .pds-feedback-group{display: block;padding: 8px 0px 8px 0px;} #PDI_container5968383 .pds-feedback-label{display: block;padding: 0px 0px 5px 0px;} #PDI_container5968383 .pds-feedback-result {float:right;} #PDI_container5968383 .pds-answer-text {float:left} #PDI_container5968383 .pds-feedback-per{font-weight: bold;} #PDI_container5968383 .pds-feedback-votes{font-weight: normal;} #PDI_container5968383 .pds-answer-feedback {background-color: #f1f1f1;border: 1px solid #d1d1d1;position: relative;} #PDI_container5968383 .pds-answer-feedback-bar {font-size: 2px;background: #3478e3;height: 18px;} #PDI_container5968383 .pds-vote {padding: 10px 0px;} #PDI_container5968383 .pds-votebutton-outer {} #PDI_container5968383 .pds-vote BR{display: none;} #PDI_container5968383 .pds-vote-button {color: #464646;padding: 3px 25px;white-space: nowrap;background:#F2F2F2 url(http://s3.wordpress.com/wp-admin/images/white-grad.png) repeat-x scroll left top;-webkit-border-radius: 11px;-moz-border-radius:11px;border-radius: 11px;border: 1px solid #999;cursor: pointer;font-size: 12px;font-family: \"Lucida Grande\",Verdana,Arial;text-decoration: none;line-height: 25px;font-weight: bold;white-space: nowrap;} #PDI_container5968383 .pds-vote-button:hover{border: 1px solid #333;} #PDI_container5968383 .pds-vote-button-load {color: #464646;padding: 3px 25px;white-space: nowrap;-webkit-border-radius: 11px;-moz-border-radius:11px;border-radius: 11px;border: 1px solid #999;cursor: pointer;font-size: 12px;font-family: \"Lucida Grande\",Verdana,Arial;text-decoration: none;line-height: 25px;font-weight: bold;white-space: nowrap;background:#EEE url(http://i.polldaddy.com/polls/vote-loader-eeeeee.gif) no-repeat scroll 50% 50%;} #PDI_container5968383 .pds-vote-button-load SPAN{visibility: hidden;} #PDI_container5968383 .pds-links {padding: 10px 0px 0px 0px;display: block;text-align: center;} #PDI_container5968383 .pds-links-back {padding: 10px 0px 0px 0px;display: block;text-align: center;} #PDI_container5968383 .pds-links A {font-family: Helvetica, Arial, sans-serif;font-size:12px;color: #4e4e4e;text-decoration: none;padding: 0px 4px 0px 4px;line-height: 24px;display: inline-block;font-weight: bold;} #PDI_container5968383 .pds-links-back A {font-family: Helvetica, Arial, sans-serif;font-size:12px;color: #4e4e4e;text-decoration: none;padding: 0px 4px 0px 4px;line-height: 24px;display: inline-block;font-weight: bold;} #PDI_container5968383 .pds-links A:hover {text-decoration: underline;} #PDI_container5968383 .pds-links-back A:hover {text-decoration: underline;} #PDI_container5968383 .pds-comments SPAN{font-weight: normal;} #PDI_container5968383 .pds-total-votes{padding: 10px 0px 0px 0px;position: relative;} #PDI_container5968383 .pds-total-votes SPAN{font-weight: bold;} #PDI_container5968383 div {margin:0;padding:0;}';
var PDV_sl5968383 = 1;
var PDV_lnk5968383 = 1;
var PDV_va5968383 = 0;
var PDV_POLL_q5968383 = 'This is a test question ?';

var PDV_POLL_medType5968383 = '0';
var PDV_POLL_medID5968383 = '';

var PDV_A5968383 = new Array();

PDV_A5968383[0] = new Array(4);
PDV_A5968383[0][0] = '26949777';
PDV_A5968383[0][1] = 'test answer a';
PDV_A5968383[0][2] = '0';
PDV_A5968383[0][3] = '';

PDV_A5968383[1] = new Array(4);
PDV_A5968383[1][0] = '26949778';
PDV_A5968383[1][1] = 'test answer b';
PDV_A5968383[1][2] = '0';
PDV_A5968383[1][3] = '';

PDV_A5968383[2] = new Array(4);
PDV_A5968383[2][0] = '26949779';
PDV_A5968383[2][1] = 'test answer c';
PDV_A5968383[2][2] = '0';
PDV_A5968383[2][3] = '';

PDV_A5968383[3] = new Array(4);
PDV_A5968383[3][0] = '26949780';
PDV_A5968383[3][1] = 'test answer d';
PDV_A5968383[3][2] = '0';
PDV_A5968383[3][3] = '';

PDV_A5968383[4] = new Array(4);
PDV_A5968383[4][0] = '26949781';
PDV_A5968383[4][1] = 'test answer e';
PDV_A5968383[4][2] = '0';
PDV_A5968383[4][3] = '';

var PDV_l1_5968383 = 'View Results';
var PDV_l2_5968383 = 'Other:';
var PDV_l3_5968383 = 'Vote';
var PDV_l4_5968383 = 'Please choose an answer first!';
var PDV_l12_5968383  = 'Share This';
var _debug = false;
var _document_root=(is_secure()?"https://polldaddy.com/swf/":"http://i0.poll.fm/swf/");var sc,_container,_global_pc,_global_ss,_global_wn;var FlashDetect=new function(){var n=this;n.installed=false;n.raw="";n.major=-1;n.minor=-1;n.revision=-1;n.revisionStr="";var m=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(a){return k(a)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(b){var a="6,0,21";try{b.AllowScriptAccess="always";a=k(b)}catch(c){}return a}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(a){return k(a)}}];var k=function(b){var a=-1;try{a=b.GetVariable("$version")}catch(c){}return a};var o=function(a){var b=-1;try{b=new ActiveXObject(a)}catch(c){b={activeXError:true}}return b};var l=function(a){var b=a.split(",");return{raw:a,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]}};var h=function(c){var a=c.split(/ +/);var d=a[2].split(/\./);var b=a[3];return{raw:c,major:parseInt(d[0],10),minor:parseInt(d[1],10),revisionStr:b,revision:j(b)}};var j=function(a){return parseInt(a.replace(/[a-zA-Z]/g,""),10)||n.revision};n.majorAtLeast=function(a){return n.major>=a};n.minorAtLeast=function(a){return n.minor>=a};n.revisionAtLeast=function(a){return n.revision>=a};n.versionAtLeast=function(c){var b=[n.major,n.minor,n.revision];var a=Math.min(b.length,arguments.length);for(i=0;i<a;i++){if(b[i]>=arguments[i]){if(i+1<a&&b[i]==arguments[i]){continue}else{return true}}else{return false}}};n.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var e="application/x-shockwave-flash";var f=navigator.mimeTypes;if(f&&f[e]&&f[e].enabledPlugin&&f[e].enabledPlugin.description){var b=f[e].enabledPlugin.description;var d=h(b);n.raw=d.raw;n.major=d.major;n.minor=d.minor;n.revisionStr=d.revisionStr;n.revision=d.revision;n.installed=true}}else{if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var b=-1;for(var a=0;a<m.length&&b==-1;a++){var c=o(m[a].name);if(!c.activeXError){n.installed=true;b=m[a].version(c);if(b!=-1){var d=l(b);n.raw=d.raw;n.major=d.major;n.minor=d.minor;n.revision=d.revision;n.revisionStr=d.revisionStr}}}}}}()};FlashDetect.JS_RELEASE="1.0.4";var pdcookie=(function(){this._class=function(){var self=this;this._pc={};this.get=function(name,cb){return self._pdcookie(name,undefined,cb)};this.set=function(name,value){return self._pdcookie(name,value)};this._pdcookie=function(name,value,cb){if(typeof self._pdcookie=="undefined"){self=this}self._pc.userData=self.pdcookie_userdata(name,value);self._pc.cookieData=self.pdcookie_cookie(name,value);self._pc.localData=self.pdcookie_local_storage(name,value);self._pc.globalData=self.pdcookie_global_storage(name,value);self._pc.sessionData=self.pdcookie_session_storage(name,value);if(window==window.top){self._pc.windowData=self.pdcookie_window(name,value)}tmpec=self._pc;self._pc={};var candidates=new Array();var bestnum=0;var candidate;for(var item in tmpec){if(typeof tmpec[item]!=="undefined"&&typeof tmpec[item]!=="null"&&tmpec[item]!="null"&&tmpec[item]!="undefined"){candidates[tmpec[item]]=typeof candidates[tmpec[item]]=="undefined"?1:candidates[tmpec[item]]+1}}for(var item in candidates){if(candidates[item]>bestnum){bestnum=candidates[item];candidate=item}}if(typeof cb=="function"){cb(candidate,tmpec)}return candidate};this.pdcookie_window=function(name,value){try{var wn=window.name;if(typeof value!=="undefined"){if(wn.indexOf("&"+name+"=")>-1||wn.indexOf(name+"=")==0){var idx=wn.indexOf("&"+name+"=");if(idx==-1){idx=wn.indexOf(name+"=")}var end=wn.indexOf("&",idx+1);var newstr;if(end!=-1){newstr=wn.substr(0,idx)+wn.substr(end+(idx?0:1))+"&"+name+"="+value}else{newstr=wn.substr(0,idx)+"&"+name+"="+value}window.name=newstr}else{window.name+="&"+name+"="+value}}else{return this.getFromStr(name,wn)}}catch(e){}};this.pdcookie_userdata=function(name,value){try{var elm=this.createElem("div","userdata_el",1);if(elm&&elm.load){elm.style.behavior="url(#default#userData)";if(typeof value!=="undefined"){elm.setAttribute(name,value);elm.save(name)}else{elm.load(name);return elm.getAttribute(name)}}}catch(e){}};this.pdcookie_local_storage=function(name,value){try{if(window.localStorage){if(typeof value!=="undefined"){localStorage.setItem(name,value)}else{return localStorage.getItem(name)}}}catch(e){}};this.pdcookie_session_storage=function(name,value){try{if(window.sessionStorage){if(typeof value!=="undefined"){sessionStorage.setItem(name,value)}else{return sessionStorage.getItem(name)}}}catch(e){}};this.pdcookie_global_storage=function(name,value){if(window.globalStorage){var host=this.getHost();try{if(typeof value!=="undefined"){eval("globalStorage[host]."+name+" = value")}else{return eval("globalStorage[host]."+name)}}catch(e){}}};this.pdcookie_cookie=function(name,value,expire){var cookie=this.getFromStr(name,document.cookie);if((typeof cookie=="undefined"||cookie==null)&&typeof value!=="undefined"){var today=new Date();today.setTime(today.getTime());if(typeof expire==undefined||expire==null){expire=(60*60*24*365*20*1000)}var expires_date=new Date((today.getTime()+expire));document.cookie=name+"="+value+"; expires="+expires_date.toGMTString()+"; path=/"}else{return cookie}};this.createElem=function(type,name,append){var el;if(typeof name!=="undefined"&&document.getElementById(name)){el=document.getElementById(name)}else{el=document.createElement(type)}el.style.visibility="hidden";el.style.position="absolute";if(name){el.setAttribute("id",name)}if(append){if(_container){_container.appendChild(el)}else{document.body.appendChild(el)}}return el};this.getFromStr=function(name,text){if(typeof text!=="string"){return}var nameEQ=name+"=";var ca=text.split(/[;&]/);for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}};this.getHost=function(){var domain=document.location.host;if(domain.indexOf("www.")==0){domain=domain.replace("www.","")}return domain}};return _class})();var swfstore=(function(){var f=0;var d=/[^a-z0-9_]/ig;function e(a){if(typeof a=="function"){throw"SwfStore Error: Functions cannot be used as keys or values."}}SwfStore=function(u){this.config=u||{namespace:"swfstore",swf_url:_document_root+"storage.swf",onready:function(){},onerror:function(){},debug:_debug,timeout:10};var s=this.namespace=this.config.namespace.replace(d,"_"),b=this.config.debug,p=this.config.timeout;function a(){return"SwfStore_"+s+"_"+(f++)}function c(g){var j=a();h=document.getElementById(j);if(typeof h=="undefined"||h==null){var h=document.createElement("div");if(typeof _container!=="undefined"||_container!==null){_container.appendChild(h)}else{document.body.appendChild(h)}h.id=j;h.style.position="absolute";h.style.top="0px";h.style.left="-2000px"}return h}if(b){if(typeof console=="undefined"){var r=c();window.console={log:function(g){var h=c();h.innerHTML=g;r.appendChild(h)}}}this.log=function(j,h,g){h=(h=="swfStore")?"swf":h;console.log("SwfStore - "+s+": "+j+" ("+h+"): "+g)}}else{this.log=function(){}}this.log("info","js","Initializing...");SwfStore[s]=this;var o=c(b);var q=a();var t="logfn=SwfStore."+s+".log&amp;onload=SwfStore."+s+".onload&amp;onerror=SwfStore."+s+".onerror";o.innerHTML='<object height="1" width="1" codebase="https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+q+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"> <param value="'+this.config.swf_url+'" name="movie">    <param value="'+t+'" name="FlashVars">  <param value="always" name="allowScriptAccess"> <embed height="1" align="middle" width="1" pluginspage="https://www.macromedia.com/go/getflashplayer" flashvars="'+t+'" type="application/x-shockwave-flash" allowscriptaccess="always" quality="high" loop="false" play="true" name="'+q+'" bgcolor="#ffffff" src="'+this.config.swf_url+'"></object>';this.swf=document[q]||window[q];this._timeout=setTimeout(function(){if(typeof SwfStore!=="undefined"&&typeof SwfStore[s]!=="undefined"){SwfStore[s].log("Timeout reached, assuming the store.swf failed to load and firing the onerror callback.");if(typeof SwfStore[s].config.onerror!=="undefined"){SwfStore[s].config.onerror()}}},p*1000)};SwfStore.prototype={ready:false,namespace:"SwfStore_prototype",set:function(b,a){if(this.namespace===SwfStore.prototype.namespace){throw"Create a new SwfStore to set data"}if(this.ready){e(b);e(a);this.swf.set(b,a)}else{throw"Attempted to save to uninitialized SwfStore."}},get:function(a){if(this.namespace===SwfStore.prototype.namespace){throw"Create a new SwfStore to set data"}if(this.ready){e(a);return this.swf.get(a)}else{throw"Attempted to read from an uninitialized SwfStore."}},getAll:function(a){if(this.namespace===SwfStore.prototype.namespace){throw"Create a new SwfStore to set data"}if(this.ready){e(a);return this.swf.get(a)}else{throw"Attempted to read from an uninitialized SwfStore."}},onload:function(){clearTimeout(this._timeout);this.ready=true;if(this.config.onready){this.config.onready()}},onerror:function(){clearTimeout(this._timeout);if(this.config.onerror){this.config.onerror()}}};return SwfStore}());var supercookie=(function(){this._class=function(){if(_$("PD_superContainer")==null){document.write('<div id="PD_superContainer"></div>')}_container=_$("PD_superContainer");if(typeof pdcookie!=="undefined"){_global_pc=new pdcookie()}PDF_log5968383("Flash version:: "+FlashDetect.raw);if(FlashDetect.versionAtLeast(9,0,31)&&typeof swfstore!=="undefined"&&window==window.top){_global_ss=new swfstore()}this.showCookies=function(d,e){for(var f in e){PDF_log5968383("Storage mechanism "+f+" returned: "+e[f])}};this.isEnabled=function(){var d="pd-test-cookie";var c;_global_pc.pdcookie_cookie(d,"true",(1000*5));c=_global_pc.getFromStr(d,document.cookie);PDF_log5968383("Cookies are enabled: "+c);return c=="true"};this.set=function(c,f){_global_pc.set(c,f);if(_global_ss&&_global_ss.ready){try{_global_ss.set(c,f)}catch(d){}}};this.get=function(l){var h,m,j;if(_debug){_global_pc.get(l,this.showCookies)}h=_global_pc.get(l);PDF_log5968383("Super Get- cookie_value::"+h);if(_global_ss&&_global_ss.ready){try{m=_global_ss.get(l)}catch(f){m=null}}PDF_log5968383("Super Get- lso_value::"+m);var k={d:h,a:m,c:j},p=pd=0;for(var o in k){var n=k[o];if(typeof n=="undefined"||n==null){if(o!="a"){pd=1}}else{p=parseInt(n)}}if(p>0&&pd>0){this.set(l,p)}return p}};return this._class})();
var PDV_audio_5968383  = 0;

//v3.24 25/Jun/12
var protocol=document.location.protocol=="https:"?"https:":"http:";var a2a_track_pub="polldaddy";var a2a_no_3p=1;var PD_ck5968383=0;var PD_ck_name5968383="PD_poll_"+PDV_id5968383;var PDV_n5968383="";var PD_button5968383;var PDV_nurl5968383=protocol+"//polldaddy.com/n/"+(typeof PDV_h5968383!=="undefined"?PDV_h5968383:PDV_id5968383)+"/"+PDV_id5968383+(PDV_w5968383!=PDV_id5968383?"/"+PDV_w5968383:"");function _$(b){return document.getElementById(b)}function is_secure(){return"https:"==document.location.protocol?true:false}function getHead(){return document.getElementsByTagName("head").item(0)}if(pollClosed5968383==false){var PDV_server5968383=protocol+"//polls.polldaddy.com";var AA5968383=new Array();var PDV_html5968383='<div style="margin-bottom: 0px; margin-top: 0px;" name="PDI_form5968383" id="PDI_form5968383"><div class="pds-box"><div class="pds-box-outer"><div class="pds-box-inner"><div class="pds-box-top"><div class="pds-question"><div class="pds-question-outer"><div class="pds-question-inner"><div class="pds-question-top">'+PDV_POLL_medID5968383+" "+unescape_HTML_5968383(PDV_POLL_q5968383)+'</div></div></div></div><div class="pds-answer"><span id="pds-answer5968383"></span>';if(PDV_po5968383==1){PDV_html5968383+='<span class="pds-answer-group">';if(PDV_pt5968383==0){PDV_html5968383+='<span class="pds-answer-input"><input type="radio" name="PDI_answer5968383" id="PDI_answerOther5968383" value="other" class="pds-radiobutton"/></span>'}PDV_html5968383+='<label for="PDI_answerOther5968383" class="pds-other-label"><span class="pds-answer-span">'+PDV_l2_5968383+'</span></label><span class="pds-answer-other"><br/><input class="pds-textfield" type="text" maxlength="80" id="PDI_OtherText5968383" name="PDI_OtherText5968383" onclick="PDF_checkOther5968383();" onchange="PDF_checkOther5968383(true);" /></span>';PDV_html5968383+='<span class="pds-clear"></span>';PDV_html5968383+="</span>"}PDV_html5968383+='</div><div class="pds-vote"><div class="pds-votebutton-outer">';if(PDV_l3_5968383==""){PDV_l3_5968383="Vote"}if(PDV_s5968383<99||PDV_def5968383.indexOf("input.pds-votebutton")!=-1){if(PDV_l3_5968383=="Vote"||PDV_l3_5968383==""){PDV_html5968383+='<input id="pd-vote-button5968383" type="button" class="pds-votebutton" style="border:none;cursor: pointer;" src="'+(is_secure()?"https://polldaddy":"http://i.polldaddy")+'.com/polls/spacer.gif">'}else{PDV_html5968383+='<input id="pd-vote-button5968383" type="button" class="pds-votebutton-pack" value="'+PDV_l3_5968383+'" />'}}else{PDV_html5968383+='<a id="pd-vote-button5968383" class="pds-vote-button"><span>'+PDV_l3_5968383+"</span></a>"}PDV_html5968383+='<span class="pds-links">';if(PDV_pr5968383==2){PDV_html5968383+="<br/>"}else{PDV_html5968383+='<a href="javascript:PD_vote5968383(1);" class="pds-view-results">'+PDV_l1_5968383+"</a><br/>"}if(PDV_lnk5968383==1){PDV_html5968383+='<a href="'+protocol+'//polldaddy.com/signup-free/?ad=poll-front" target="_blank" class="pds-pd-link">Polldaddy.com</a>'}PDV_html5968383+='<span class="pds-clear"></span>';PDV_html5968383+='</span><span class="pds-clear"></span>';PDV_html5968383+="</div></div></div></div></div></div></div>";for(PDV_x=0;PDV_x<PDV_A5968383.length;PDV_x++){if(PDV_pt5968383==0){AA5968383[PDV_x]='<span 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:44:15.030

以下片段失败：

```
if(typeof _container!=="undefined"||_container!==null){_container.appendChild(h)}else{document.body.appendChild(h)} 
```

条件是多余的（因为它的部分是互斥的）；它总是会导致`true`（因此该`else`部分永远不会被执行），因为有 3 个选项：

1.  `_container === undefined`. 在这种情况下，`typeof _container!=="undefined"`为假，并且`_container!==null`为真，因此组合表达式为真。
2.  `_container === null`. 在这种情况下，`typeof _container!=="undefined"`为真，并且`_container!==null`为假，因此组合表达式为真。
3.  在所有其他情况下，两者`typeof _container!=="undefined"`都`_container!==null`为真，因此组合表达式为真。

可能你的意思是写

```
if(_container){_container.appendChild(h)}else{document.body.appendChild(h)} 
```

此外，最好在这里向人们展示您的非缩小版 JS 代码；调试起来更容易。

# mysql - Rails Mysql ORDER BY created_at 同时创建两行返回意外结果

> ID：11291077
> 
> 赞同：0
> 
> 时间：2012-07-02T09:33:31.190
> 
> 标签：mysql, ruby-on-rails-3, activerecord

我正在将我的 Rails 3.2 应用程序从 Postgres 更改为 Mysql，

我有一个带有 default_scope 的模型：order => 'posts.created_at DESC'

如果我使用以下代码查询 ID 之间的帖子：

```
Post.find(:all, :conditions => ['id >= ? AND id <= ?', min_id.to_i, max_id.to_i]) if min_id && max_id 
```

我得到错误的排序结果（因为多行具有相同的 created_at 时间），例如：如果 post1 是由 post2 之前的代码创建的，但它们具有相同的 created_at 时间戳，我希望查询返回 [post2, post1] 因为 post2 是创建的“之后”。但我得到相反的结果。

使用 Postgres 我没有这个问题。

为什么不一样？我该如何解决？

# ruby-on-rails-3 - rails3：动作被路由到错误的控制器。可能的错误？

> ID：11291078
> 
> 赞同：1
> 
> 时间：2012-07-02T09:33:33.560
> 
> 标签：ruby-on-rails-3, controller, rails-routing

我有两个具有一对一关联的模型（用户和个人资料）。

```
class Profile < ActiveRecord::Base
  attr_accessible :language_tokens, :tele, :languages, :serviceDesc, :service
  belongs_to :user
  ...

class User < ActiveRecord::Base
  has_one :profile, dependent: :destroy 
```

该配置文件是使用以下内容构建的：

```
@profile = @user.build_profile(session[:form_params]) 
```

我的个人资料编辑表单只是一个标准表单，在提交时应将其路由到我的个人资料更新操作。

```
<%= form_for @profile do |f| %>
  <%= render 'shared/host_information', :f => f%>
  <%= render 'shared/service_information', :f => f%>
  <%= f.submit 'done', class: "bnt"%>
<% end %>

HTML form:
<form id="edit_profile_6" class="edit_profile" method="post" action="/profiles/6" accept-charset="UTF-8"> 
```

但是，由于某些奇怪的原因，表单正在提交给**用户**更新，而不是预期的**个人资料**更新。我在用户更新中放置了一个调试点，您可以看到参数确认目标控制器确实应该是profiles_controller。

```
/railsapp/loco_app/app/controllers/users_controller.rb:82
@user = User.find_by_id(params[:id])
(rdb:15) p params
{"utf8"=>"✓", "_method"=>"put", "authenticity_token"=>"qXx5EWwIWASiARKVFE7eDd43gHnBSmK538YAXeesDyI=", "profile"=>{"country_id"=>"8", "city_id"=>"22", "tele"=>"", "language_tokens"=>"18,14", "service"=>"9",  },
"commit"=>"done", "action"=>"update", "controller"=>"profiles", "id"=>"6"}
(rdb:15) 
```

以下是相关路线：

```
profiles POST   /profiles(.:format)                   profiles#create
new_profile GET    /profiles/new(.:format)               profiles#new
edit_profile GET    /profiles/:id/edit(.:format)          profiles#edit
profile PUT    /profiles/:id(.:format)               profiles#update

users GET    /users(.:format)                          users#index
POST   /users(.:format)                          users#create
new_user GET    /users/new(.:format)                      users#new
edit_user GET    /users/:id/edit(.:format)                 users#edit
user GET    /users/:id(.:format)                      users#show
PUT    /users/:id(.:format)                      users#update
DELETE /users/:id(.:format)                      users#destroy 
```

调试此问题的最佳方法是什么？这是一对一关联的一些奇怪的副作用还是这里有错误？我正在使用导轨 3.2.2。

****更新**** 所以这绝对看起来像一个错误。我重新生成了我的控制器（同名）并复制了相同的代码，现在它可以在没有任何其他更改的情况下工作。我仍然想知道这是否是一个已知问题以及将来如何调试此类问题。

# android - 不想在 android 中维护 Webview 状态

> ID：11291082
> 
> 赞同：0
> 
> 时间：2012-07-02T09:33:43.830
> 
> 标签：android

我创建了一个带有 javascript 界面的 webview。在单击 webview 的按钮时，我正在打开 google play 活动，但我不想在重新启动应用程序后保持相同的状态。

App-->webview界面-->为google play打开一个新activity-->返回首页-->重新启动app-->显示google play Activity

在这里重新启动应用程序后不想显示 google play 活动，它必须显示 webview。

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:57:42.840

您需要将标志添加`FLAG_ACTIVITY_NEW_TASK`到您的 Intent 中（如 Cathal Comerford 所述）：

```
intent.setData(Uri.parse("market://details?id=com.google"));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

这将在其自己的任务中打开 Google Play 活动，而不是在您的应用程序的任务中。因此，如果您重新启动您的应用程序，它将不会显示 Google Play 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:03:48.683

这是 Android 系统行为的一部分。任务是一串活动，当您的应用打开 Google Play 时，该活动会添加到您的应用正在运行的任务中。当您从主屏幕单击您的应用程序时，Android 会打开您的应用程序最后运行的任务，并显示您的任务中最后显示的任何活动，在本例中为 Google Play 活动。

看看 Intent 标志：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

我相信 FLAG_ACTIVITY_NEW_TASK 或 FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET 可能会做你正在寻找的东西，但还没有玩过它，所以我不确定。

# asp.net - 如何使用 HttpRequest.SaveAs 保存的转储文件将请求重新发送到我的本地主机？

> ID：11291086
> 
> 赞同：1
> 
> 时间：2012-07-02T09:33:48.493
> 
> 标签：asp.net, asp.net-mvc-3, http, fiddler

我正在对将多部分/表单数据数据发布到 MVC3 中的控制器的外部服务之间的集成进行故障排除。

在生产服务器上，我使用[HttpRequest.SaveAs](http://msdn.microsoft.com/en-us/library/system.web.httprequest.saveas.aspx)将错误请求捕获到文件中。

有什么工具可以用来在我的本地主机上“重放”请求，以便我可以使用 Visual Studio 进行调试？

（我一直在尝试使用[提琴手](http://fiddler2.com/fiddler2/)，但无法使其正常工作。如果使用 POST 从简单表单转储本地请求，我的控制器将正确接收文件。如果我转储相同的请求并将其复制粘贴到提琴手raw 和 send 文件丢失，所以有问题。）

由于有一个内置函数可以转储请求，我认为这也可能是重新发送请求的某种官方方式。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:19:14.713

我使用 NCAT 命令行工具重播 SaveAs 方法捕获的请求。命令如下所示：

```
NCAT localhost 80 < CapFileName 
```

你可以在[NMAP 库中找到它](http://nmap.org/download.html)

[有关更多信息，请参阅我的博客](http://www.mazsoft.com/blog/post/2013/01/20/C-code-to-play-PCAP-capture-of-HTTP-request.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:06:29.990

如果我在作曲家中这样做，我就可以在提琴手中工作：

1.  在记事本中打开转储文件
2.  选择已解析
3.  仅输入 Content-Type 作为标题（让提琴手添加其他人，即使它们相同）
4.  从记事本中将请求正文粘贴到请求正文中

> POST：http:///`localhost`控制器/动作

**请求标头：**

```
Content-Type: multipart/form-data; boundary=fJP-UWKXo6xvqX7niGR0StXXFQwdKhHc9quF 
```

**请求正文：**

```
--fJP-UWKXo6xvqX7niGR0StXXFQwdKhHc9quF
Content-Disposition: form-data; name="mmsimage"; filename="IMG_0959.jpg"
Content-Type: image/jpeg; name=IMG_0959.jpg; charset=ISO-8859-1
Content-Transfer-Encoding: binary

<the encoded file goes here as jibberish>

--fJP-UWKXo6xvqX7niGR0StXXFQwdKhHc9quF
Content-Disposition: form-data; name="somefield"
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit

value of somefield
--fJP-UWKXo6xvqX7niGR0StXXFQwdKhHc9quF-- 
```

# c - 给定结构中灵活数组成员的绝对地址，如何获得结构的绝对地址？

> ID：11291087
> 
> 赞同：1
> 
> 时间：2012-07-02T09:34:00.227
> 
> 标签：c

请参阅下面我使用的结构。我希望以便携的方式解决这个问题。

我用于查找结构绝对地址的代码是：（`(char*)data - sizeof(struct block);`其中 data 是结构块中数据的地址）。它不适用于此结构。

我做了一个测试程序，如下所示，最后一个断言失败了。

如果我更改`unsigned int free:1;`为`unsigned int free;`两个打印件将打印 12 ，因此 sizeof 给了我预期的结果。

提前致谢。

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>

struct block {
        size_t          size;
        struct block*   next;
        unsigned int    free:1;
        char            data[];
};

int main(void)
{
        struct block*   avail;
        struct block*   b;

        avail = malloc(sizeof(struct block) + 10);

        printf("%zu \n", sizeof(struct block)); // prints 12

        printf("%zu\n", avail->data - (char*)&avail->size); //prints 9

        b = (struct block*)((char*)avail->data - 9);
        assert(b == avail);

        b = (struct block*)((char*)avail->data - sizeof(struct block));
        assert(b == avail);

        return 0;
} 
```

编辑：好像我在这里找到了堆栈溢出的答案：

[如何从其成员的地址获取结构的起始地址](https://stackoverflow.com/questions/2033084/how-to-get-structs-start-address-from-its-members-address?rq=1)

它给了我正确的绝对地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:03:54.597

您对布局（和大小）的唯一保证

```
struct block {
        size_t          size;
        struct block*   next;
        unsigned int    free:1;
        char            data[];
}; 
```

是成员的地址（分别是包含位字段的单元）按其列表的顺序增加，成员根据它们的类型适当地对齐，并且在 的开头没有填充`struct`，所以指向的指针适当转换的结构产生指向其第一个成员的指针。编译器可以自由地在成员之间插入比对齐所需更多的填充。

但是，通常，插入的填充只是对齐所需的。`size_t`并且在大多数实现中，大小和对齐要求`struct block*`是相同的，在 32 位系统上为 4 个字节，在 64 位系统上为 8 个字节。那么 的大小`struct block`是 的倍数`k = sizeof(size_t)`，第一个`k`字节被`size`成员占用，接下来的`k`字节被`next`指针占用。

之后是一个宽度为 1 的无符号位域。如此小的位域适合任何存储单元，因此实现可以自由地为其选择任何大小的存储单元。自然选择将是

*   一个字节，因为它是可能的最小单位，
*   `sizeof(int)`字节，因为“''plain'' int 对象具有执行环境架构所建议的自然大小”。

现在，如果选择包含位字段的单元具有一个字节的大小，就像您的实现（和我的实现）一样，该`data`成员通常直接放置在其之后，在`2*k+1`字节偏移处，因为的对齐`char`为 1。如果选择位字段的单位为`int`-size，则偏移量`data`很可能是`2*k + sizeof(int)`，在 32 位系统上可能等于`sizeof(struct block)`，但在 64 位系统上则不然。

你很有可能带来实现

```
offsetof(struct block, data) == sizeof(struct block) 
```

通过在和`CHAR_BIT * sizeof(size_t) - 1`之间插入一个适当宽度 ( )的未命名位域，但唯一可移植并保证工作的方法是`free``data`

```
struct block *b_addr = (struct block*)((char*)(avail->data) - offsetof(struct block, data)); 
```

正如[Greg Hewgill](https://stackoverflow.com/a/2033095/1011995)对相关问题的回答所述。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T09:54:54.410

`sizeof(struct block) - sizeof(char*)`应该给你的大小`struct block`，不包括`data`字段。所以，如果你有一个指向 的指针`data`，你应该到达结构的开头。

```
b = (struct block*)((char*)avail->data - (sizeof(struct block) - sizeof(char*));
assert(b == avail); 
```

不过，我还没有测试过。

# html - 需要 100% 左 div 部分

> ID：11291088
> 
> 赞同：2
> 
> 时间：2012-07-02T09:34:07.823
> 
> 标签：html, css

我有两个 div（红色和黄色）。红色 div 具有 100% 的高度，黄色 div 具有固定的 1000 像素。即使我向下滚动页面，我也想要红色 div 100% 的窗口屏幕，但它没有占用浏览器屏幕的 100% 高度。我试图找到很多例子，但未能解决我的问题。请指导……</p>

这是我做过的例子。

[http://jsfiddle.net/awaises/Ff6v5/](http://jsfiddle.net/awaises/Ff6v5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:49:12.533

这是[你](http://jsfiddle.net/Ff6v5/16/)想要的吗？

然后你需要改变三件事：

1.  body 和 html 的高度到最小高度；
2.  body 和 html 的相对位置；
3.  你不需要 !important 在 .left-menu 的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:23:07.550

### 它正在做它应该做的事情！

这真是个误会。

您的风格`height: 100%`适用于`.left-menu`. 但是在这里面`.left-menu`，你有另一个名为 的 div `.left-footer`，它的背景是绿色。所以，*CSS 正在做编码要做的事情。*

它为了跨越整个左侧区域上方的红色，您**无需执行任何操作。**它已经在这样做了。证明见[this](http://jsfiddle.net/Ff6v5/17/)。

所以，没有什么可以修复的。这是一个***设计缺陷***。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:52:22.613

将其用于您的 CSS，应该可以解决问题：

```
.left-menu{ width:200px; background:red; position:fixed; top:0; bottom:0;} 
```

# php - 如何使用正则表达式替换字符串中的数字

> ID：11291089
> 
> 赞同：2
> 
> 时间：2012-07-02T09:34:26.950
> 
> 标签：php, python, regex, string

我在正则表达式方面很新，所以我在替换字符串中的数字时感到困惑。

```
a="12ab34cde56" 
```

我想用`12abXXcde56`

```
b="abc1235ef" 
```

我想用`abcXXXXef`

```
c="1ab12cd" 
```

我想用`1abXXcd`

我正在python和php中尝试那些，但没有运气。这就是我的想法：

```
^([0-9]+)([a-z]+)(.*)([a-z]+)([0-9]+)$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:46:01.840

您可以使用此正则表达式来捕获所有不是前导或尾随的数字：

```
(?<!^|\d)\d+(?!$|\d) 
```

然后在 Python 中，您可以提供一个函数，将匹配项替换为相应数量的`X`.

对于 PHP，您可以启用 PREG_OFFSET_CAPTURE 以了解匹配的位置，并循环遍历匹配列表并处理它们。

请注意，上面的正则表达式`" 5 ddds"`将更改为`" X ddds"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:38:34.133

我们将字符串 s 中`\d+`由非数字 ( ) 包围的每一组数字 ( ) 替换为's 。`\D``X`

```
re.sub(r'(?<=\D)\d+(?=\D)',lambda match : 'X' * len(match.group(0)) , s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:45:49.977

以下模式捕获要在组 1 中删除的字符串：

```
^.*[a-z]+(\d+)[a-z]+.*$ 
```

[演示](http://regexr.com?31djp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:51:05.420

```
import re
re1 = re.compile("([\d]*[a-zA-Z])([\d\w]+)([a-zA-Z][\d]*)")
re2 = re.compile("([\d])")

s = "4f6g6h7"
def x(matchobj):
    return ''.join([matchobj.groups()[0],
        re2.sub('X', matchobj.groups()[1]), matchobj.groups()[2]])

print re1.sub(x, s) 
```

* * *

更新：原始方法不适用于大小写`"4f6g6h7"`或任何字符串在数字之间只有一个字母字符。

如果使用两个正则表达式而不是一个是可以接受的。以下代码应该适用于你。

```
import re
re1 = re.compile("([\d]*[a-zA-Z])([\d\w]+)([a-zA-Z][\d]*)")
re2 = re.compile("([\d])")

s = ['12ab34cde56', "abc1235ef","1ab12cd", "4f6g6h7"]

def x(matchobj):
    return ''.join([matchobj.groups()[0],
        re2.sub('X', matchobj.groups()[1]), matchobj.groups()[2]])

for ss in s:
    print ss, '->', re1.sub(x, ss)

>>>
12ab34cde56 -> 12abXXcde56
abc1235ef -> abcXXXXef
1ab12cd -> 1abXXcd
4f6g6h7 -> 4fXgXh7
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:08:35.943

stock 模块的唯一可能性`re`似乎是替换功能，例如：

```
xs = ["12ab34cde56", "abc1235ef", "1ab12cd"]

import re
for x in xs:
    print x, re.sub(r'(\D)(\d+)(\D)', lambda m: m.group(1) + 'X' * len(m.group(2)) + m.group(3), x) 
```

使用更高级的[正则表达式](http://pypi.python.org/pypi/regex/)模块，您可以使用可变宽度环视断言：

```
import regex
for x in xs:
    print x, regex.sub(r'(?<=\D\d*)\d(?=\d*\D)', 'X', x) 
```

# php - 使用 PHP 上传文件

> ID：11291095
> 
> 赞同：0
> 
> 时间：2012-07-02T09:34:52.660
> 
> 标签：php, html

我想上传文件并将其保存到我们目录中的上传文件夹中。我已经通过使用该代码来做到这一点..但它不起作用..这是一个错误..

“警告：move_uploaded_file（uploads/1341221475::1aaaa.text）：无法打开流：第 24 行 /var/www/html/PHP/upload_file.php 中的权限被拒绝警告：move_uploaded_file（）：无法移动'/tmp /phpSZhm3c' to 'uploads/1341221475::1aaaa.text' in /var/www/html/PHP/upload_file.php on line 24 存储在：aaaa/aaaa.text”

请帮忙

代码 ：

```
 if($_FILES["file"]["error"] > 0)
            {
                echo "ERROR ".$_FILES["file"]["error"]."<br>";
            }
            else
            {
                echo "NAME : ".$_FILES["file"]["name"]."<br>";
                echo "TYPE : ".$_FILES["file"]["type"]."<br>";
                echo "SIZE : ".($_FILES["file"]["size"]/1024)."KB<br>";
                echo "Stored in : ".$_FILES["file"]["tmp_name"]."<br>";
                if (file_exists("aaaa/" . $_FILES["file"]["name"]))
                      {
                    echo $_FILES["file"]["name"] . " already exists. ";
                      }
                else
                      {
                $target_path = "uploads/";
                    $target_path = $target_path . time() . $_SERVER['REMOTE_ADDR'] . basename( $_FILES['file']['name']);
                      move_uploaded_file($_FILES["file"]["tmp_name"],$target_path);
                      echo "Stored in: " . "aaaa/" . $_FILES["file"]["name"];
                      }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:20:09.063

每当您使用代码编写文件时，运行代码的用户都应该具有权限。在这种情况下，启动 apache 网络服务器的人应该有权写入该文件夹。使用 chmod 命令指定权限。

如果您不太担心安全性，您可以像这样向上传文件夹提供 777。假设您的上传文件夹在 /var/www/html/site/uploads 中，然后运行

```
chmod -R 777 /var/www/html/site/uploads 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:38:07.693

您的 Web 服务器在某个用户下运行（例如，“www”）。确保用户对上传文件夹具有写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:10:48.473

授予 Apache（例如）作为输出目录所有者的权限，然后它将能够创建文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:22:54.473

确保您的上传文件夹具有完全权限，以便您可以将文件移动到其中。

尝试`chmod 777 -R`上传目录。例如：

```
 $ sudo chmod 777 -R /var/www/html/PHP/uploads/ 
```

# c++ - 标头重复符号 c

> ID：11291096
> 
> 赞同：0
> 
> 时间：2012-07-02T09:34:53.790
> 
> 标签：c++, header, duplicates

我最近一直在尝试学习自己使用 QT，作为练习的一部分，我设置了一些简单的东西来管理一副纸牌（通过拖放和其他类似的简单东西添加和删除纸牌）。但是，正如您可能想象的那样，它并不像我希望的那样顺利。为了实现这个逻辑，我使用了 3 个类，Card、Node 和 Pile，它们都有自己的标头以及可以用它们做什么的原型。

这里的问题是，当我尝试编译它们时，编译器开始抱怨目标文件中有关不同类的功能的重复符号。如果我用“/* */”注释掉一个，问题只会将一个函数“向下”移动，而编译器唯一不会抱怨的是析构函数。每当我尝试编译时，它会更具体地说明：

```
duplicate symbol Node::Node(*Card) in Node.o and Node.o 
```

这是 (.hpp) 标头的样子：

```
#ifndef NODE_HPP
#define NODE_HPP
#include "Card.hpp"
class Node{
      Node *next;
      Card *c;
public:
      Node() { }
      Node(Card *newCard);
      ~Node();
      Node *getNext();
      void appendNode(Card *newCard);
      void printCard();

      void setNext(Node *nextNode);
      Card *getCard(); //Returns card in node (with removal)
      Card *peekCard(); //Returns card in node (without removal)
};

#endif //NODE_HPP 
```

...这就是实际的 .cpp 文件的样子：

```
#include "Node.hpp"
#include "Card.hpp"

#include <string.h>
#include <stdio.h>
#include <stdlib.h>

Node::Node(Card *newCard){
    c = newCard;
    next = NULL;
}

Node::~Node(){
    free(c);
    delete this;
}

Node* Node::getNext(){
    return next;
}

void Node::appendNode(Card *newCard){
    if(next == NULL){
        next = new Node(newCard);
    }
    else{
        Node* NodePointer = next;
        while((NodePointer->getNext()) != NULL){
            NodePointer = NodePointer->getNext();
        }
        NodePointer->next = new Node(newCard);
    }
}

void Node::printCard(){
    c->printCard();
}

void Node::setNext(Node *nextNode){
    next = nextNode;
}

Card* Node::getCard(){
    return c;
    c = NULL;
}

Card* Node::peekCard(){
    return c;
} 
```

所以我现在基本上不知道可能出了什么问题，因为我已经尝试了我能想到的一切，并且在我看来，代码应该没问题，因为无论我多么努力地看，我都看不到任何东西错了。因此，由于谷歌搜索和在许多其他网站上的搜索都没有结果，我现在转向 stackoverflow，因为您拥有更多经验的编码向导应该有更好的眼光来发现（我至少认为是）新手错误。

# javascript - ExtJS 4.1：建立对象引用的问题

> ID：11291097
> 
> 赞同：0
> 
> 时间：2012-07-02T09:34:55.880
> 
> 标签：javascript, extjs

大家好，当我使用 ExtJS 4.1 时，我经常遇到一个问题：每次我必须建立对对象的引用时，我都会付出很多努力，而且当我调用对象上的方法时，我经常会收到错误像这样：

未捕获的类型错误：无法调用未定义的方法“销毁”

例如，考虑以下情况，其中我有一个包含两个项目的字段集：一个字段容器和一个按钮。我的目的是为按钮编写一个适当的处理函数，这样当我点击按钮时，字段容器将被销毁。为此，我需要建立对 fieldcontainer 的正确引用。

这是我的代码：

```
xtype: 'fieldset',
id: 'product_fieldset',
title: 'Prodotti tempi e quantita',
defaultType: 'textfield',
layout: 'anchor',
items: [{
    xtype: 'fieldcontainer',
    layout: 'hbox',
    defaultType: 'textfield',
    defaults: {
        labelAlign: 'top'
    },
    items: [{
        xtype: 'combo',
        name: 'product',
    fieldLabel: 'Product',
    forceSelection: true,
    editable: false,
    store: products,
    queryMode: 'local',
    displayField: 'name',
    valueField: 'name',
    allowBlank: false,
    afterLabelTextTpl: required
    },{
        xtype: 'numberfield',
    name: 'p_on_weight', 
    fieldLabel: '% on weight',
    value: 0,
    minValue: 0,
    allowBlank: false,
    afterLabelTextTpl: required,
    hideTrigger: true,
    keyNavEnabled: false,
    mouseWheelEnabled: false
    },{
    xtype: 'numberfield',
    name: 'time', 
    fieldLabel: 'Time (minutes)',
    value: 0,
    minValue: 0,
    allowBlank: false,
    afterLabelTextTpl: required,
    hideTrigger: true,
    keyNavEnabled: false,
    mouseWheelEnabled: false
    },{
    xtype: 'numberfield',
    name: 'ph', 
    fieldLabel: 'Ph',
    minValue: 0,
    allowBlank: false,
    afterLabelTextTpl: required,
    hideTrigger: true,
    keyNavEnabled: false,
    mouseWheelEnabled: false
    },{
    xtype: 'textareafield',
    name: 'remarks',
    fieldLabel: 'Remarks'
}]
    },{
        xtype: 'button',
    text: 'Delete this product',
    handler: function() {
            proper_reference_to_fieldcontainer.destroy(); 
            //need help for previous line 
    }
    }] 
```

好吧，任何人都可以建议我一种引用 fieldcontainer 的方法，可能不使用 fieldcontainer 的 id 吗？（Sencha 架构师建议不要使用 id 来建立引用）。

提前致谢。

恩里科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:43:43.987

您可以将容器定义为独立对象：

```
var myFieldContainer = Ext.Create('Ext.form.FieldContainer', {
    layout: 'hbox',
    defaultType: 'textfield',
    defaults: {
        labelAlign: 'top'
    },
    items: [{
        xtype: 'combo',
(...)
    }); 
```

...然后在您的按钮配置中使用它：

```
{
    xtype: 'button',
    text: 'Delete this product',
    handler: function () {
        myFieldContainer.destroy();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T12:09:27.010

使用首先为 fieldcontainer 定义一个 id 值，

```
xtype: 'fieldcontainer',
id: 'my_id',
layout: 'hbox', 
```

现在用于`Ext.getCmp('my_id')`检索对它的引用。

# sql-server - 触发器在批量更新时无法正常工作

> ID：11291100
> 
> 赞同：0
> 
> 时间：2012-07-02T09:35:28.650
> 
> 标签：sql-server, sql-server-2008, triggers, sql-server-2000

我有一个触发器在插入到另一个表之前检查数据

```
 IF NOT EXISTS (SELECT *
                 FROM   inserted,
                        Clients
                 WHERE  Inserted.Account = Clients.Account)
  BEGIN
      INSERT INTO Clients(GUID, Account, ....)
      SELECT GUID, Account
      FROM   inserted
  END 
```

如果一行更新，它工作正常，但如果使用批量更新它不起作用。

例如，`Update Table1 set Number = Number where account <> ''`
如果第二个表（客户）不为空，
则如果它为空，则不添加任何内容，则效果很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:37:49.357

与其先检查然后插入，不如将其写成一条`INSERT`语句：

```
Insert into Clients (GUID , Account .....)
Select i.GUID , i.Account 
from
   inserted i
      left join
   Clients c
      on
          i.Account = c.Account
where
    c.Account is null 
```

子句中的`NULL`检查`WHERE`可以针对任何`Clients`不可为空的列。

* * *

即使您保留`EXISTS`签入，您仍然需要类似上面的内容，因为`EXISTS`检查正在断言关于*所有*行的某些内容`inserted`- 当它可能包含一些断言为真的行和一些断言为真的行时错误的。

# javascript - Google Maps 自定义图钉无法出现在不同 PC 上的某些浏览器上

> ID：11291101
> 
> 赞同：0
> 
> 时间：2012-07-02T09:35:29.503
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我使用带有自定义标记的 GMaps API 构建了一张地图。在我的电脑（Chrome 和 Firefox）上，它看起来是正确的，如下所示：

![在此处输入图像描述](../Images/b568823962697ebbe95097049e514fec.png)

但是在我的同事电脑上，使用完全相同的浏览器版本和相同的网络，它看起来像这样：

![在此处输入图像描述](../Images/390715f56f6a831df6bd94d505a3c94d.png)

此外，在我的 Opera 中的 Mac 上，它看起来也像第二张图片。

有没有人遇到过这个问题？有解决办法吗？

网址：[http ://archer.jacksleight.com/map](http://archer.jacksleight.com/map)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:44:37.403

实际上，标记路径不正确。一旦签入 firebug.Path 显示为

本地主机/弓箭手/资产/图像/icon.png

但实际路径是

[http://archer.jacksleight.com/assets/images/icon.png](http://archer.jacksleight.com/assets/images/icon.png)

**在 Firebug 中检查：**

![在此处输入图像描述](../Images/3e5b5d7e171dedb3fec674078e58efd6.png)

# android - 使用 CSS 在 WebView 中设置 HTML 页面样式

> ID：11291103
> 
> 赞同：1
> 
> 时间：2012-07-02T09:35:34.240
> 
> 标签：android, css

我正在寻找一个教程，它将指导我使用 CSS 设置 HTML 页面的样式，以便可以在 Android 手机上查看它们。CSS 应该能够在尺寸和显示功能方面包含所有类型的设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:39:23.713

要使网页适应屏幕分辨率，您必须考虑响应式设计的概念。响应式网页可以使用 CSS3 媒体查询来完成。

以下是一些关于响应式设计和 CSS3 媒体查询的资源，可帮助您入门：

**响应式设计：**

*   [http://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)
*   [http://mobile.smashingmagazine.com/2011/07/22/responsive-web-design-techniques-tools-and-design-strategies/](http://mobile.smashingmagazine.com/2011/07/22/responsive-web-design-techniques-tools-and-design-strategies/)

**媒体查询：**

*   [https://developer.mozilla.org/en/CSS/Media_queries/](https://developer.mozilla.org/en/CSS/Media_queries/)
*   [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

**跨浏览器支持：**

不幸的是，旧浏览器不支持响应式设计所需的媒体查询。因此，例如，如果您需要支持 IE8，则必须使用 JavaScript 为缺乏本机支持的浏览器启用它。看看[respond.js](https://github.com/scottjehl/Respond/)，我发现它在我使用它的时候非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:38:06.940

您应该研究[CSS 媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)。

# wcf - WCF 服务大部分时间都在“Sleeping”和“Waiting for syncronization”

> ID：11291108
> 
> 赞同：1
> 
> 时间：2012-07-02T09:36:05.647
> 
> 标签：wcf, synchronization, performance

根据 Ants Performance Profiler，我的 WCF 服务大部分时间都用于“睡眠”和“等待同步”。结果我的表现很差（每秒请求数）

![wcf](../Images/79e8db9a2bd5ce00288e5e9d57f67b7c.png)

如何检测这些块？如何检测这种行为的原因？

# windows-8 - 为桌面应用程序的开始屏幕快捷方式设置颜色

> ID：11291109
> 
> 赞同：1
> 
> 时间：2012-07-02T09:36:07.397
> 
> 标签：windows-8, microsoft-metro

Metro 应用程序可以有一个颜色集，它出现在开始屏幕上的快捷方式上，也出现在任何对话框和 UI 元素上，因此用户可以识别应用程序，例如帮助他们快速将 toast 与源应用程序相关联。

到现在为止还挺好。桌面应用程序的传统快捷方式也出现在开始屏幕上。它们没有颜色，它们发送的任何 toast 通知都有灰色背景。微软自己的应用程序，如 VS2012，以半地铁风格重做，也有一个无色的开始屏幕磁贴。

如何为桌面应用程序的开始屏幕快捷方式或 toast 通知设置颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T15:20:45.110

对于桌面应用程序，应用程序本身无法配置开始屏幕磁贴和 toast 通知上使用的背景颜色。颜色由用户选择的开始屏幕颜色主题确定（PC 设置 -> 个性化 -> 开始屏幕）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:21:47.063

对于 toast 通知，这里有一些资源：

*   快速入门：从桌面发送 toast 通知：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh802768.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh802768.aspx)
*   从桌面应用程序示例发送 toast 通知：http: [//code.msdn.microsoft.com/windowsdesktop/sending-toast-notifications-71e230a2](http://code.msdn.microsoft.com/windowsdesktop/sending-toast-notifications-71e230a2)

我希望这有助于通知！

--编辑

# css - 将 CSS 样式添加到 JSFpanelGrid 中的动态列类

> ID：11291111
> 
> 赞同：0
> 
> 时间：2012-07-02T09:36:08.443
> 
> 标签：css, jsf, dynamic

我有 JSF panelGrid，其中没有列是动态的，在这种情况下，我应该如何在 css 中声明列类？

```
<h:panelGrid id="testpanel" columns="#{message.no_of_columns}" rows="#{message.no_of_rows}" columnClasses=""> 
```

我希望所有列都具有相同的 css 样式。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:03:27.490

生成一个逗号分隔的字符串，其中包含与列数一样多的项目：

```
<h:panelGrid ... columnClasses="#{message.columnClasses}"> 
```

或者重新定义样式，以便可以在表格级别应用：

```
<h:panelGrid ... styleClass="dynamicGrid"> 
```

和

```
.dynamicGrid td {
    /* Put the original CSS here, it'll get applied to every column. */
} 
```

# .net - 类型初始化异常

> ID：11291112
> 
> 赞同：1
> 
> 时间：2012-07-02T09:36:24.507
> 
> 标签：.net, file-io, zip, j#, typeinitializeexception

我尝试在 c# 中压缩文件（ie.images,txt,doc....）并尝试[了这个](http://www.c-sharpcorner.com/UploadFile/neo_matrix/SharpZip04242007001341AM/SharpZip.aspx)（通过使用给出答案`J#`）

```
 using java.io;
 using Java.util.zip;

 \\part of code which throws exception
 private void button1_Click(object sender, EventArgs e)
    {
      Zip(@"D:\Zipped.zip",new string[]{"ico_1.ico","readme.txt"});
    }
 private void Zip(string zipFileName, string[] sourceFile)
    {
      FileOutputStream filOpStrm = new FileOutputStream(zipFileName); 
```

异常消息：

`'The type initializer for 'java.io.File' threw an exception.'`

我发现问题出在`FileOutputStream`..但是，找不到解决方法..我想要的只是解决此问题的解决方案以及此异常的原因....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:46:18.580

调试它！在IDE中逐行调试代码，就可以知道是哪一行抛出了这个异常。

当类初始化器无法初始化类型时，会创建一个 TypeInitializationException 并传递对该类型的类初始化器抛出的异常的引用。TypeInitializationException 的 InnerException 属性包含基础异常。

# jquery - 使用触发事件打开 iOS 原生 datePicker

> ID：11291116
> 
> 赞同：0
> 
> 时间：2012-07-02T09:36:55.880
> 
> 标签：jquery, ios

我有一个要在 iOS 设备中运行的 web 应用程序，我试图通过单击特定标签来调用本机 datePicker。

我知道如果我有一个`<input type='date'>`它会通过触摸它来打开本地日期选择器。

我的策略是将这个输入与“不透明度：0”放在标签下，并将标签的点击事件绑定到输入的触发事件，如下所示：

```
$('#pickerLabel').bind('click',function () {
    $('#pickerInput').trigger('click');
});
$('#pickerInput').click(function () {
    alert("open Picker");
}); 
```

我观察到的是，这个方法只是触发了绑定到点击事件的函数（它会提示“打开 Picker”），但它并没有打开原生 iOS datePicker，就好像我点击了输入本身一样。

你能帮助我吗？

PS：我的项目中还包含 jquery 移动框架，我尝试在输入中使用点击事件并得到完全相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:52:40.983

您是否尝试过启动 WebKit 触摸事件？

```
var touchEvent = document.createEvent('TouchEvent');
touchEvent.initTouchEvent(type, canBubble, cancelable, view, detail, screenX, screenY, clientX, clientY, ctrlKey, altKey, shiftKey, metaKey, touches, targetTouches, changedTouches, scale, rotation); 
```

[https://developer.apple.com/documentation/webkitjs/touchevent](https://developer.apple.com/documentation/webkitjs/touchevent)

一个（未经测试的）示例可能如下所示：

```
$('#pickerLabel').bind('click', function(){
    var touchEvent = document.createEvent('TouchEvent');
    touchEvent.initTouchEvent('touchstart', true, true, document.getElementById('pickerInput'), null, 0, 0, 0, 0, false, false, false, false, [], [], [], 1.0, 0.0);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:49:30.540

我设法通过以下方式解决了这个问题：我将标签和输入放在两个不同的 div 中。我将两个 div 放在一起，让输入 div 具有更高的 z-index（并将不透明度保持为 0）。

我在这个论坛问题中使用了 CSS：[如何将一个 div 覆盖在另一个 div 上](https://stackoverflow.com/questions/2941189/how-to-overlay-one-div-over-another-div)

这仍然只是一种没有所需行为的解决方法。

# jqgrid - jqGrid - 在 jqGrid 中右键单击列时确定列的名称

> ID：11291118
> 
> 赞同：4
> 
> 时间：2012-07-02T09:37:02.670
> 
> 标签：jqgrid

我想要在 jqGrid 中右键单击列标题时的列名称。任何代码将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:32:01.700

您可以将`contextmenu`事件绑定到所有列标题。每个标题都是`<th>`元素，因此它的 DOM 支持[cellIndex](http://www.w3schools.com/jsref/prop_tabledata_cellindex.asp)属性。cellIndex属性为您[提供](http://www.w3schools.com/jsref/prop_tabledata_cellindex.asp)列标题的索引。如果您将使用相同的索引，`colModel`您将获得该列的定义。该`name`属性为您提供列名。

相应的代码可能如下：

```
var cm = $grid.jqGrid("getGridParam", "colModel");
$("th.ui-th-column", $grid[0].grid.hDiv).bind('contextmenu', function(e) {
    var $th = $(e.currentTarget).closest("th");
    if ($th.length > 0) {
        alert("the header of the column '" + cm[$th[0].cellIndex].name +
            "' was clicked");
        e.preventDefault(); // don't display standard context menu
    }
}); 
```

[演示](http://www.ok-soft-gmbh.com/jqGrid/RightClickOnColumnHeader.htm)使用代码。只需使用鼠标右键单击列标题，您将看到结果：

![在此处输入图像描述](../Images/4f4aa4eb3c78ecbd1e040042c19b1762.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:53:45.183

所有 jqGrid 单元格都有一个`aria-described-by`由`gridId_columnname`. 您可以使用它来获取您的列名。

对于网格单元..

```
var cellName = $(e.target).closest('td').attr('aria-described-by');
var gridId = 'list1';

var columnName = cellName.substr(gridId.length - 1); 
```

对于列标题，除了奥列格的回答，你可以这样做..

```
var header = $(e.target).closest('th')
var gridId = 'list1';

var columnName = header.attr('id').substr(gridId.length - 1); 
```

# iphone - 如何从 ipad 的拆分视图应用程序中删除分隔线

> ID：11291119
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:37:12.233
> 
> 标签：iphone, objective-c

嗨朋友，我想在拆分视图中隐藏分隔线。分隔线意味着当应用程序运行横向模式时，2 个视图显示一个左侧和另一个右侧，所以在这两个视图分隔线之间显示我想隐藏这个分隔线我试试这个代码在 appdelegate 类中，但这不能正常工作

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    UIView *coverView = [[UIView alloc] initWithFrame:CGRectMake(320, 44, 1, 704)];
    [coverView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"1x704.png"]]];

    [splitViewController.view addSubview:coverView];  
    [window addSubview:splitViewController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T09:42:34.390

UISplitViewController 是不可能的。但如果你喜欢冒险，你可以试试Matt Gemmell 的[MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)。您可以自定义该分隔线，直到您心满意足为止。

# android - paypal initWithAppID() 应该是什么？

> ID：11291120
> 
> 赞同：1
> 
> 时间：2012-07-02T09:37:12.950
> 
> 标签：android, paypal

## 我想将 paypal api 添加到我的项目中。

我将此代码用于沙箱及其工作：

```
pp = PayPal.initWithAppID(this, "APP-80W284485P519543T",
                    PayPal.ENV_SANDBOX); 
```

* * *

我应该在 ENV_LIVE 中使用什么？应用程序 ID 应该是什么？

```
 pp = PayPal.initWithAppID(this, ????,
                        PayPal.ENV_LIVE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:58:14.720

您需要将您的代码提交给 X.com，当它被批准后（通常根据他们的网站在 24 小时内），他们会为您提供 App ID。查看此文档了解详细信息

[https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_Android.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_Android.pdf)

# php - 通过正则表达式检查用户名

> ID：11291125
> 
> 赞同：0
> 
> 时间：2012-07-02T09:37:44.323
> 
> 标签：php, regex

对于我的注册，我使用我的正则表达式检查用户名——用户名必须包含超过 3 个且少于 20 个字符。此外，用户名只能包含字母数字字符和“_”、“.”、“-”。

```
/^([\w\.\-]{3,20})$/isu. 
```

现在我也想检查（p-），如果存在返回错误的用户名不能内容（p-）

```
private $regExpUsername = "/^([\w\.\-]{3,20})$/isu";

    private function checkUsername($username){
        if(!preg_match($this->regExpUsername, $username)){
            $this->addError(ERR_ENTER_USERNAME);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:55:26.907

我了解到您不希望用户名以`-`. 这将是这个

```
^[\w.-]{2,19}[\w.]$ 
```

由于`\w`包含下划线，这将允许用户名以下划线结尾，但不能以破折号结尾，因为破折号不是定义最后一个字符的字符类的一部分。

[在 Regexr 上](http://regexr.com?31djv)查看

正如 zerkms 评论的那样，`s`修饰符在这里没有意义，因为它会改变`.`您不使用的特殊字符的行为。

修饰符也`i`没有意义，它会匹配大小写字母，但你不使用字母来定义你的表达式。

**更新**

然后你需要一个[负前瞻](http://regexr.com?31dkk)

```
^(?!.*p-)[\w.-]{3,20}$ 
```

`(?!.*p-)`是一个否定的前瞻，只要`p-`字符串中有任何地方，这个断言就会失败。

[在 Regexr 上](http://regexr.com?31dkk)查看

# java - Java 的 WURFL 竞争对手

> ID：11291126
> 
> 赞同：0
> 
> 时间：2012-07-02T09:37:46.973
> 
> 标签：java, wurfl

是否有任何其他类似的软件包可以帮助识别浏览器并为其提供用户代理功能？我更喜欢服务器端工具，而不是简单的 Javascript 替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:32:16.567

看看 OpenDDR，让我们知道您的反馈！

[http://www.openddr.org](http://www.openddr.org)

代码库在这里： [https ://github.com/OpenDDRdotORG/OpenDDR-Java](https://github.com/OpenDDRdotORG/OpenDDR-Java)

干杯! OpenDDR 开发团队

# jquery - 如何将 jquery 插件添加到 jsfiddle.net？

> ID：11291132
> 
> 赞同：7
> 
> 时间：2012-07-02T09:38:14.920
> 
> 标签：jquery, jquery-ui, jsfiddle

例如，我想将此添加到 jsfiddle.net

[jQuery 验证](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T09:42:34.220

在左侧面板中，有一个名为“添加资源”的部分。单击此按钮，然后将 URL 添加到字段中并单击`+`按钮。这会将您的资源（JS 或 CSS）添加到页面中，而无需担心如何正确编码。

![在 jsFiddle 上添加资源面板](../Images/a210224732f97e1360148e7630259e4f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T09:42:36.430

如果您知道该插件版本的 URL，则可以通过单击左侧的“添加资源”链接，输入 URL 并单击大`+`按钮将其添加为资源。

请注意，除非您自己托管 URL 或使用确认静态位置（即在 Google CDN 上），否则资源 URL 可能随时停止工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T09:42:22.947

在 Add Resources 选项卡中，填写插件的 URL，然后单击 + 按钮。

# playframework-2.0 - 播放框架2：在路由中使用Array[String]

> ID：11291136
> 
> 赞同：14
> 
> 时间：2012-07-02T09:38:34.700
> 
> 标签：playframework-2.0

我想生成一个这样的网址：

> /photo?tags=tag1,tag2,tag3

路线文件：

```
GET     /photo  controllers.Photos.list(tags:Array[String] ?= "") 
```

我在游戏控制台中遇到了这个错误：

> 未找到类型 Array[String] 的 QueryString 活页夹

实现这一目标的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-02T14:13:56.043

当值在查询字符串中或发布具有相同名称的数据时，play 将绑定到数组/列表。

这似乎也有效：

```
This route: http://localhost/controller/{id} 
```

这个网址：`http://localhost/controller/1?id=2&id=3`

将绑定到`controller(int[] id)`where id -> {1, 2, 3}

发布 id=2&id=3 也将绑定到一个数组。

参考： [https ://groups.google.com/forum/?fromgroups#!topic/play-framework/c5kB6wmcF8Q](https://groups.google.com/forum/?fromgroups#!topic/play-framework/c5kB6wmcF8Q)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-15T20:21:20.533

使用列表而不是数组应该可以。

如果您使用的是 Java，它的工作方式如下：

```
GET     /photo  controllers.Photos.list(tags: java.util.List[String]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-02T09:44:20.783

我认为你应该使用一个普通的`String`，然后注意将它转换为`Array`你的`controller`

路线：

```
GET     /photo  controllers.Photos.list(tags:String ?= "") 
```

在 Java 中：

```
public static Result list (String tags){
    String[] tagsArray = tags.split(",");
    // do something with tagsArray
    return ok();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-05T17:10:47.857

顺便说一句，如果您希望传递一个 Long 数组，则可以这样做：

`GET /photo controllers.Photos.list(tags: java.util.List[java.lang.Long])`

以控制器函数`List<Long> tags`作为参数。

# facebook - 使用 Javascript SDK 自动登录返回的、经过身份验证的用户的正确设置是什么？

> ID：11291146
> 
> 赞同：1
> 
> 时间：2012-07-02T09:39:49.893
> 
> 标签：facebook, oauth, facebook-javascript-sdk, autologin

嘿，Facebook 开发人员，

我已经阅读了数十个相关问题，并希望尝试了 developers.facebook.com 上的每个相关示例，但我无法让这个工作：

1.  用户访问了我的网站并通过以下方式授权了我向他请求的权限

    ```
    FB.login(callback, {
        scope: 'publish_actions,user_actions:news,user_interests'
    }); 
    ```

    打电话后

    ```
    FB.init({
        appId: 'xxx', // App ID
        status: true, // check login status
        cookie: true,
        xfbml: true // parse XFBML
    }); 
    ```

2.  我现在可以成功请求一个在一段时间内有效的访问令牌，并使用它来查询有关用户的各种信息。

3.  无需在任何地方（Facebook 或我自己的网站）注销，如果我现在再次导航到该页面（或只是点击重新加载），我希望立即能够使用

    ```
    FB.getLoginStatus(callback) 
    ```

    并收到 的响应`connected`。据我了解，用户不应该再点击任何东西。

不过，我得到的是`unknown`. 无论在什么浏览器中，无论我使用的是真正的开发人员资料还是 Facebook 测试用户。

我也订阅了这些事件`auth.authResponseChange`，`auth.statusChange`但它们只有在我明确调用时才会触发`FB.login()`。

它在[Facebook SDK 文档中的示例中](https://developers.facebook.com/docs/authentication/client-side/#jssdk)说，我`FB.init()`从上面应该已经从 Facebook 获得了有关页面加载时间的必要信息，并且事件应该相应地触发。

由于我已经尝试[了很多示例](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)并且真的认为我理解文档，所以我看不出错误发生在哪里。

**有什么我遗漏的东西，我有什么误解或我应该注意的时间问题吗？**

附带说明一下，我已经尝试了比提到的 Facebook 事件更多的尝试，通过 强制状态更新`FB.getLoginStatus(callback, true)`，通过在 Chrome 的 Javascript 控制台中输入代码逐步运行代码以及来自 SO 和 Facebook 论坛的更多建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:54:50.950

如果设置`status: true`，则`FB.getLoginStatus`响应对象将被 SDK 缓存，后续调用`FB.getLoginStatus`将从此缓存的响应中返回数据。

为了解决这个问题，您必须调用`FB.getLoginStatus`将第二个参数设置为 true 以强制往返 Facebook - 有效地刷新响应对象的缓存。

例子：

```
window.fbAsyncInit = function() {
    FB.init({
        appId  : '',
        status : true,
        cookie : true,
        xfbml  : true,
    });

    FB.getLoginStatus( function(response) {
        //console.log(response);
        if (response.status === 'connected') {
            var accessToken = response.authResponse.accessToken;
            alert(accessToken);
        } else if (response.status === 'not_authorized') {
            //login function
        } else {
            //login function
        }
    }, true);

    FB.Event.subscribe('auth.authResponseChange', function(response) {
        //console.log('The status of the session changed to: '+response.status);
        alert(response.status);
    });
}; 
```

文档：[https ://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:14:09.717

作为 Philip 接受的答案的附加信息，我想提一下**cookie 阻止**程序是自动登录不起作用的实际原因。

确保在测试代码并假设“真实世界”条件之前禁用您正在运行的任何插件。

# c - 字节序：这个宏在做什么？

> ID：11291150
> 
> 赞同：2
> 
> 时间：2012-07-02T09:40:21.070
> 
> 标签：c, endianness

`#define`我在第三方代码中遇到了以下内容：

```
#define Endian_StreamGetLittleInt(ppBytes)  \
 (int) ((++*(int **)(ppBytes)), \
           (  ((*(char **)(ppBytes))[3-sizeof(int)] << 24) \
            | ((*(char **)(ppBytes))[2-sizeof(int)] << 16) \
            | ((*(char **)(ppBytes))[1-sizeof(int)] << 8)  \
            | ((*(char **)(ppBytes))[0-sizeof(int)])) ) 
```

它的用法如下：

```
int uiSize = Endian_StreamGetLittleInt(&buf); 
```

其中`buf`a`char *`指向先前从文件中读取的数据字节数。

我将 bitshift 部分理解为重新排列字节，因为它们出现在字节数组中以匹配平台的字节顺序（或者也许有人可以纠正我）。但是，我对以下内容的使用感到困惑：

```
(++*(int **)(ppBytes)) , 
```

为什么那里有逗号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T09:57:19.570

您所拥有的是一个由两个子表达式组成的表达式，由[逗号运算符](https://en.wikipedia.org/wiki/Comma_operator)连接。第一个表达式将指针递增一个整数步长。无论指针的实际类型如何，它都被转换为`int**`first，然后取消引用到 an `int*`，`int*`然后递增。结果，指向的地址将按`sizeof(int)`字节更改。

由于逗号运算符将始终首先执行其第一个参数，但返回其第二个参数的值，因此您首先会看到增量，然后是值计算。但是，如果您仔细观察，您会发现第二个参数确实使用了负索引，因此它将引用指针在递增*之前指向的数字。*

# assembly - 'push imm' 如何编码？

> ID：11291151
> 
> 赞同：2
> 
> 时间：2012-07-02T09:40:23.400
> 
> 标签：assembly, x86, nasm, intel

<< Intel 64 and IA-32 Architectures Software Developer's Manual Volume 2B: Instruction Set Reference, NZ >> 说：

```
| Opcode* | Instruction | Op/En | 64-Bit Mode | Compat/Leg Mode | Description |
|      6A | PUSH imm8   | C     | Valid       | Valid           | Push imm8\.  |
|      68 | PUSH imm16  | C     | Valid       | Valid           | Push imm16\. |
|      68 | PUSH imm32  | C     | Valid       | Valid           | Push imm32\. | 
```

# cat -n test.asm

```
 1  bits 64
 2
 3  push byte 12
 4  push word 12
 5  push dword 12
 6  push qword 12
 7 
```

# nasm test.asm

```
 test.asm:5: error: instruction not supported in 64-bit mode 
```

1.  为什么5号线是非法的？我认为它与“PUSH imm32”匹配。

2.  为什么第 6 行是合法的？它与“PUSH imm8/PUSH imm16/PUSH imm32”中的任何一个都不匹配。

请帮帮我！

======测试======

```
 I think that the Intel manual is right, the 'push imm' 
    instructions do have three encoding form:
    Form 1: 6a XX
    Form 2: 66 68 XX XX 
    Form 3: 68 XX XX XX XX

    What we are arguing is the implemental specific behavior of the NASM.

    In NASM 2.04rc1(the above example I given):
    1\. The 'byte' in 'push byte imm' direct the NASM use the Form 1, 
       no matter how long the imm given in the instruction it is, the imm
       was trunked to a byte in final machine code. 
    2\. The 'word' in 'push word imm' direct the NASM use the Form 2,
       no matter how long the imm given in the instruction it is, the imm 
       was trucked or zero-extended to a word in final machine code.
    3\. The 'qword' in 'push dword imm' direct the NASM use the Form 3,
       no matter how long the imm given in the instruction it is, the imm 
       was trucked or zero-extended to a dword in final machine code.
       Note: the 'qword' in the instruction but 'dword' in final machine
       code, which made us confused.
    4\. if none of 'byte', 'word', 'qword' is given, the NASM use the From 3. 
```

请参见以下示例：

```
# cat -n push.asm
1  bits 64
2
3  push byte 0x21
4  push byte 0x4321
5
6  push word 0x4321
7  push word 0x654321
8
9  push qword 0x654321
10
11  push 0x21
12  push 0x4321
13  push 0x654321
14  push 0x87654321
15  push 0xa987654321
16
# nasm -v
NASM version 2.04rc1 compiled on Feb 21 2009
# nasm push.asm -o push.bin
push.asm:4: warning: signed byte value exceeds bounds
push.asm:7: warning: word data exceeds bounds
# ndisasm -b 32 push.bin // 'ndisasm -b 64 push.bin' not works right in this version of NASM.
00000000  6A21              push byte +0x21
00000002  6A21              push byte +0x21
00000004  66682143          push word 0x4321
00000008  66682143          push word 0x4321
0000000C  6821436500        push dword 0x654321
00000011  6821000000        push dword 0x21
00000016  6821430000        push dword 0x4321
0000001B  6821436500        push dword 0x654321
00000020  6821436587        push dword 0x87654321
00000025  6821436587        push dword 0x87654321

In newer NASM, the behavior changes:
(1) 'push 0x21' was encoded to '6A21' in NASM 2.10.01,
    while '6821000000' in NASM 2.04rc1; 
(2)'push dword 0x654321' in 64 bit mode was allowed 
    in NASM 2.10.01 and encoded to '6821436500' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T10:04:10.673

说明书错了。（顺便说一句，这不是唯一的错误）

在 64 位模式下，没有 32 位推送。`push`是少数不带 REX.W 前缀提升为 64 位的指令之一，您不能将其降级。

编辑：实际上，我的手册版本说得对：

> 推送符号扩展的 imm32。堆栈指针按堆栈指针的大小递减。

因此，在 64 位模式下，这意味着“推送一个 qword，从立即数扩展符号”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T10:07:21.237

**编辑**：下面的文字是错误的。

这是它的工作原理...

无论操作数大小如何，在 64 位模式下，您只能使用 a 将堆栈指针推进 2 或 8 个字节，`push`并在因此分配的空间中写入 16 位或 64 位值。

因此，您不能推送 8 位寄存器或 32 位寄存器，因为它们不会进行零或符号扩展。但是您可以推送 16 位或 64 位寄存器。

对于立即数，它有点不同。

`push imm8`（操作码 6Ah 后跟 imm8）将首先将 8 位立即操作数符号扩展为 64 位，然后压入所得的 8 字节值。

`push imm32`（操作码 68h 后跟 imm32）将首先将 32 位立即操作数符号扩展为 64 位，然后压入生成的 8 字节值。

`push imm16`（操作数大小前缀 66h，操作码 6Ah 后跟 imm16）将不带任何扩展名的 16 位立即操作数作为 2 字节值推送。

当你说 NASM 似乎有点宽容`push qword 12`。但如果您使用不能表示为有符号 32 位整数的值，例如`push qword 0x80000000`or`push qword 2147483648`或，它将发出警告`push qword -2147483649`。

```
This is the relevant piece of documentation:
ELSE IF SRC is immediate byte
  THEN TEMP ← SignExtend(SRC); (* extend to operand size *)
ELSE IF SRC is immediate word (* operand size is 16 *)
  THEN TEMP ← SRC;
ELSE IF SRC is immediate doubleword (* operand size is 32 or 64 *)
  THEN
    IF operand size = 32
      THEN TEMP ← SRC;
      ELSE TEMP ← SignExtend(SRC); (* extend to operand size of 64 *)
FI; 
```

现在，我的 NASM 版本（2011 年 7 月 15 日编译的 2.09.10）实际上并没有针对`push dword 12`. 如果您的确实如此，那是一个错误。

看起来我在 NASM 中发现了一个错误。它组装`push word 12`成 66h、6Ah、0Ch。IOW，它使用`push imm8`for的操作码`push imm16`。这不可能。无论操作数大小前缀如何，字节操作数仍然是字节操作数。只有“字”操作数可以扩展或缩减为双字和四字操作数。一直都是这样，同一条指令的一对操作码，一个对字节操作数进行操作，另一个对（q/d）字操作数进行操作，操作数大小前缀会影响“字”的“字性”操作数。`push word 12`64 位模式下的正确编码应该是 66h、68h、0Ch、0h。

~~第 5 行是非法的，因为在 64 位模式下您不能压入 32 位操作数。您只能推送 64 位操作数（`push byte 12`有效地`push byte-sign-extended-to-qword 12`）或 16 位操作数。看一个解释操作的伪代码`push`：~~

 ~~```
IF in 64-bit mode (* stack-address size = 64 *)
  THEN
    IF operand size = 64
      THEN
        RSP ← RSP − 8;
        Memory[RSP] ← TEMP; (* Push quadword *)
      ELSE (* operand size = 16 *)
        RSP ← RSP − 2;
        Memory[RSP] ← TEMP; (* Push word *)
FI; 
```~~ 

具体原因我说不出来，但有两个：

~~*   以这种方式实现它很方便~~
2.  ~~设计者试图降低未对齐堆栈错误的可能性~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T02:53:24.093

```
 I think that the Intel manual is right, the 'push imm' 
    instructions do have three encoding form:
    Form 1: 6a XX
    Form 2: 66 68 XX XX 
    Form 3: 68 XX XX XX XX

    What we are arguing is the implemental specific behavior of the NASM.

    In NASM 2.04rc1(the above example I given):
    1\. The 'byte' in 'push byte imm' direct the NASM use the Form 1, 
       no matter how long the imm given in the instruction it is, the imm
       was trunked to a byte in final machine code. 
    2\. The 'word' in 'push word imm' direct the NASM use the Form 2,
       no matter how long the imm given in the instruction it is, the imm 
       was trucked or zero-extended to a word in final machine code.
    3\. The 'qword' in 'push dword imm' direct the NASM use the Form 3,
       no matter how long the imm given in the instruction it is, the imm 
       was trucked or zero-extended to a dword in final machine code.
       Note: the 'qword' in the instruction but 'dword' in final machine
       code, which made us confused.
    4\. if none of 'byte', 'word', 'qword' is given, the NASM use the From 3. 
```

请参见以下示例：

```
# cat -n push.asm
1  bits 64
2
3  push byte 0x21
4  push byte 0x4321
5
6  push word 0x4321
7  push word 0x654321
8
9  push qword 0x654321
10
11  push 0x21
12  push 0x4321
13  push 0x654321
14  push 0x87654321
15  push 0xa987654321
16
# nasm -v
NASM version 2.04rc1 compiled on Feb 21 2009
# nasm push.asm -o push.bin
push.asm:4: warning: signed byte value exceeds bounds
push.asm:7: warning: word data exceeds bounds
# ndisasm -b 32 push.bin // 'ndisasm -b 64 push.bin' not works right in this version of NASM.
00000000  6A21              push byte +0x21
00000002  6A21              push byte +0x21
00000004  66682143          push word 0x4321
00000008  66682143          push word 0x4321
0000000C  6821436500        push dword 0x654321
00000011  6821000000        push dword 0x21
00000016  6821430000        push dword 0x4321
0000001B  6821436500        push dword 0x654321
00000020  6821436587        push dword 0x87654321
00000025  6821436587        push dword 0x87654321 
```

# c++ - 我应该使用智能指针吗？

> ID：11291152
> 
> 赞同：7
> 
> 时间：2012-07-02T09:40:25.887
> 
> 标签：c++, pointers, c++11, smart-pointers

我有一个像下面这样的类：

```
class node
{
public:

     node* parent;
     std::list<node*> children;
}; 
```

我应该使用智能指针而不是原始指针吗？为什么？如果是，什么样的智能指针？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T09:46:23.897

无论您拥有资源（内存、文件等），请始终使用智能指针。手动拥有它们*非常*容易出错，并且违反*了许多*良好的做法，例如[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

使用哪一个取决于您需要什么所有权语义。`unique_ptr`最适合单一所有权和`shared_ptr`共享所有权。

由于孩子不拥有他们的父母，因此原始的父母指针很好。但是，如果父母拥​​有他们的孩子，`unique_ptr`这里效果最好。

还值得注意的是，指针链表*到底是什么？*这是没有意义的。为什么不是值的链接列表？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T09:44:55.113

使用智能指针总是一个好主意，但要注意引用循环。

```
class node
{
public:
     std::weak_ptr<node> parent;
     std::list< std::shared_ptr<node> > children;
}; 
```

这就是为什么`weak_ptr`首先存在的原因。请注意，它们检测循环并不那么聪明，您必须手动进行，并使用`weak_ptr`s 来破坏它们。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-02T09:50:07.983

绝对不。通常的智能指针不适用于类似图形的结构，应该避免使用。在这种情况下，您有一棵树，处理树对象本身的所有删除（和分配）没有问题。

# primefaces - Ajax 更新在 primefaces 中不起作用

> ID：11291153
> 
> 赞同：0
> 
> 时间：2012-07-02T09:40:27.223
> 
> 标签：primefaces

当尝试以两种不同的形式更新 ajax 时，我正在使用 primefaces 3.2 没有得到更新。请参阅下面的代码

```
<p:selectOneMenu value="#{baen.vareable1}">

   <f:selectItem itemLabel="val1" itemValue=="val1"/>

    <f:selectItem itemLabel="val2" itemValue="val2" />

        <p:ajax update="new" listner="#{bean.val()}" event="onchange"/>

</p:selectOneMenu > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:10:16.367

Could it be that a form validation is blocking the request? Try setting `<p:ajax process="@this" .../>`. By default the complete form that the component belongs to is processed. So by setting this attribute to "@this", only the selectOneMenu component is processed. An additional advantage is that the request becomes a little bit lighter, because less information is sent to the server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:47:09.000

替换`event="onchange"`为`event="change"`或事件更好地完全删除它（因为它是默认事件）

# c - 将文件列表保存到数组或其他 C

> ID：11291154
> 
> 赞同：0
> 
> 时间：2012-07-02T09:40:44.197
> 
> 标签：c, arrays, file-listing

我有这个功能

```
void file_listing(){
    DIR *dp;
    struct stat fileStat;
    struct dirent *ep;
    int file=0;
    dp = opendir ("./");

    if (dp != NULL){
        while ((ep = readdir(dp))){
            char *c = ep->d_name;
            char d = *c; /* first char */
            if((file=open(ep->d_name,O_RDONLY)) < -1){ 
                perror("Errore apertura file");
            }
            if(fstat(file,&fileStat)){ /*file info */
                perror("Errore funzione fstat");
            }
            if(S_ISDIR(fileStat.st_mode)){ /* directory NOT listed */
                continue;
            }
            else{
                if(d != '.'){ /* if filename DOESN'T start with . will be listed */
                    "save into someting" (ep->d_name);
                }
                else{
                    continue; /* altrimenti non lo listo */
                }
            }
        }
        (void) closedir (dp);
    }
    else{
        perror ("Impossibile aprire la directory");
        return 1;
    }
} 
```

我想将文件列表的结果保存到数组或结构或列表或其他东西中，但我不知道该怎么做。
提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:27:20.480

这是一个将文件列表存储在数组中并返回条目数的示例函数：

```
#include <string.h>
#include <stdio.h>
#include <dirent.h>
#include <malloc.h>

size_t file_list(const char *path, char ***ls) {
    size_t count = 0;
    size_t length = 0;
    DIR *dp = NULL;
    struct dirent *ep = NULL;

    dp = opendir(path);
    if(NULL == dp) {
        fprintf(stderr, "no such directory: '%s'", path);
        return 0;
    }

    *ls = NULL;
    ep = readdir(dp);
    while(NULL != ep){
        count++;
        ep = readdir(dp);
    }

    rewinddir(dp);
    *ls = calloc(count, sizeof(char *));

    count = 0;
    ep = readdir(dp);
    while(NULL != ep){
        (*ls)[count++] = strdup(ep->d_name);
        ep = readdir(dp);
    }

    closedir(dp);
    return count;
}

int main(int argc, char **argv) {

    char **files;
    size_t count;
    int i;

    count = file_list("/home/rgerganov", &files);
    for (i = 0; i < count; i++) {
        printf("%s\n", files[i]);
    }
} 
```

请注意，我对目录进行了两次迭代——第一次是获取文件计数，第二次是保存结果。如果您在执行此操作时在目录中添加/删除文件，这将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-04T22:03:13.237

另一个例子，更干净但不是线程安全的，因为`readdir()`不是：

```
#include <stdio.h>
#include <sys/types.h>
#include <dirent.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

static void *realloc_or_free(void *ptr, size_t size) {
  void *tmp = realloc(ptr, size);
  if (tmp == NULL) {
    free(ptr);
  }
  return tmp;
}

static int get_dirent_dir(char const *path, struct dirent **result,
                          size_t *size) {
  DIR *dir = opendir(path);
  if (dir == NULL) {
    closedir(dir);
    return -1;
  }

  struct dirent *array = NULL;
  size_t i = 0;
  size_t used = 0;
  struct dirent *dirent;
  while ((dirent = readdir(dir)) != NULL) {
    if (used == i) {
      i += 42; // why not?
      array = realloc_or_free(array, sizeof *array * i);
      if (array == NULL) {
        closedir(dir);
        return -1;
      }
    }

    array[used++] = *dirent;
  }

  struct dirent *tmp = realloc(array, sizeof *array * used);
  if (tmp != NULL) {
    array = tmp;
  }

  *result = array;
  *size = used;

  closedir(dir);

  return 0;
}

static int cmp_dirent_aux(struct dirent const *a, struct dirent const *b) {
  return strcmp(a->d_name, b->d_name);
}

static int cmp_dirent(void const *a, void const *b) {
  return cmp_dirent_aux(a, b);
}

int main(void) {
  struct dirent *result;
  size_t size;
  if (get_dirent_dir(".", &result, &size) != 0) {
    perror("get_file_dir()");
  }

  qsort(result, size, sizeof *result, &cmp_dirent);

  for (size_t i = 0; i < size; i++) {
    printf("%s\n", result[i].d_name);
  }

  free(result);
} 
```

# sockets - 使用哪种编程语言，可以有效处理端口，间谍软件/键盘记录程序通过这些端口进行通信

> ID：11291157
> 
> 赞同：0
> 
> 时间：2012-07-02T09:40:54.303
> 
> 标签：sockets, networking, port

我在这里浏览了许多“学习网络”问题，但情况有所不同。

我在 windows 上运行，想**学习 PL 网络**。目的是**为了阻止间谍软件、键盘记录器通信而**有效地**处理端口。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:54:32.103

如果您想阻止端口，您别无选择，只能使用可用于编写可插入 TCP/IP 网络堆栈的驱动程序的语言编写......除非 Windows 防火墙可能允许可插入模块，在这种情况下你仍然被支持的任何东西所困扰。**

# f# - WebSharper官方网站上简单示例的问题

> ID：11291158
> 
> 赞同：2
> 
> 时间：2012-07-02T09:40:58.580
> 
> 标签：f#, websharper

我已经下载并安装了最新版本的 WebSharper。在[此页面上](http://websharper.com/docs/getting-started)有一个示例，其中一行如下：

```
let HomePage =
    Template "HomePage" <| fun ctx ->
        [ Div [Text "HOME"] Links ctx Div [new Controls.HelloControl()] ] 
```

在 Visual Studio 2012 Ultimate RC 中，“Web 应用程序（Sitelet）”模板已经提供了以下代码：

```
let HomePage =
    Skin.WithTemplate "HomePage" <| fun ctx ->
        [
            Div [Text "HOME"]
            Links ctx
        ] 
```

当我尝试在Visual Studio 红线`Div [new Controls.HelloControl ()]`之后添加消息时： 我尝试更改为 just ，但随后它本身被消息红线。`Links ctx``Links ctx``This value is not a function and cannot be applied.``Skin.WithTemplate``Template``Template``The value or constructor Template is not defined`

解决问题的任何帮助将不胜感激。了解 WebSharper 网站上的官方文档是否通常是最新的也会很有帮助。

这是一个屏幕截图。

![Visual Studio 2012 Ultimate 屏幕截图](../Images/d309a30d4daaae0560a5a55a68a5818c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:57:02.153

```
let HomePage =
    Skin.WithTemplate "HomePage" <| fun ctx ->
        [
            Div [Text "HOME"]
            Links ctx
            Div  [new Controls.HelloControl ()]
        ] 
```

注意换行符。F# 具有空格有效的语法。

# objective-c - 解析空节点时 iPhone 应用程序崩溃

> ID：11291159
> 
> 赞同：0
> 
> 时间：2012-07-02T09:41:02.913
> 
> 标签：objective-c, ios, ios5, ios4

我正在尝试解析 xml，如果 xml 提要中有一个空节点，应用程序就会崩溃。这可能是什么原因？

**编辑** 我的 xml 看起来像这样

```
<Sponsors>
    <Sponsor>
        <Name>name...</Name>
        <About>blah...blah...blah</About>
        <Website>http://test.com</Website>
        <LogoImage>someImage.jpg</LogoImage>
        <smallIcon>someImage.jpg</smallIcon>
        <Area/>
        <BannerImage/>//->>>this node is empty//
     </Sponsor>
</Sponsors> 
```

我正在使用这样的 NSXML 解析器。

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
if(nil != self.currentsponsorElement){
    [self.currentsponsorElement appendString:string];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:51:36.823

尝试这个：-

在 didStartElement 内部使用此代码：-

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

    if ([elementName isEqualToString:@"Sponsor"]) 
    {   
        if(!soapResults)
        {
            soapResults = [[NSMutableString alloc] init]; //declared in .h
        }
        recordResults = YES;
    }
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSMutableString *)string {

    if (string != nil) {
        [results setString:@""];
        [results appendString: string];
        NSLog(@"foundResults: %@",results);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:50:34.717

不看你的代码，我只能给你一个一般性的答案——听起来你的代码在“parser:foundCharacters:”方法中“期望”一个值。检查你的代码，看看当找到的字符实际上是 nil 时会发生什么。使用 try-catch 块并处理所有可能的情况，这样您的代码就不会因为您还没有想到的其他事情而导致崩溃。

# php - 从 MySQL 数据库中检索搜索到的数据并将其返回给用户

> ID：11291163
> 
> 赞同：2
> 
> 时间：2012-07-02T09:41:36.697
> 
> 标签：php, android, sql

我是 Android 和 PHP 的新手。我要做的是从外部 MySql 数据库将搜索值检索回 Android 设备。该数据库由 174MB 的 200,000 个条目组成，因此不能将其包含在包中并使用内部 SqlLite。

```
<?php

  mysql_connect("myhost","myuser","mypass");

  mysql_select_db("mydb");

$sql=mysql_query("select * from myTable");

$output = array();
while($row = mysql_fetch_assoc($sql)) {
$output['txt'][] = $row;
}

exit (json_encode($output));

mysql_close();
?> 
```

在从布局调用的测试类中，我有这个。问题是，我可以连接到外部数据库，甚至可以指定添加到数据库，但是我在获取特定的用户定义术语时迷失了方向。现在当我运行它时，它会尝试下载整个表（120,000 个条目），解析为字符串，并显示到列表视图，但在 10MB 时它会崩溃并且必须是 fc。如果我能弄清楚如何指定 PHP 和 Android 玩得很好，比如当有人搜索鸡蛋时，那么会返回鸡蛋的所有值（碳水化合物、卡路里、毫米等）。

由于 PHP 脚本是静态的，我看不到如何更改 get 命令，但我知道这是可能的，因为我以前见过应用程序来执行此操作。

包carbcounter.project；

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.LinearLayout;
import android.widget.TextView;

public class SqlTest extends Activity {
/** Called when the activity is first created. */

   TextView txt;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqltest);      
    LinearLayout rootLayout = new LinearLayout(getApplicationContext());  
    txt = new TextView(getApplicationContext());  
    rootLayout.addView(txt);  
    setContentView(rootLayout);  

    txt.setText("Connecting..."); 
    txt.setText(getServerData(KEY_121)); 

}
public static final String KEY_121 = "http://android.mywebspace.com/androidscript.php";

private String getServerData(String returnString) {

   InputStream is = null;

   String result = "";
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("Abbrev","eggs"));

    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(KEY_121);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }
    catch(Exception e)
    {
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

    try
    {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) 
            {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }
    catch(Exception e)
    {
            Log.e("log_tag", "Error converting result "+e.toString());
    }
    try
    {
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                    JSONObject json_data = jArray.getJSONObject(i);
                    Log.i("log_tag","id: "+json_data.getInt("id")+
                            ", type: "+json_data.getString("type")+
                            ", description: "+json_data.getInt("description")+
                            ", carbs: "+json_data.getInt("carbs")
                    );
                    returnString += "\n\t" + jArray.getJSONObject(i); 
            }
    }
    catch(JSONException e)
    {
            Log.e("log_tag", "Error parsing data "+e.toString());
    }
    return returnString; 
}    

} 
```

提前致谢。

ps 我有正确的登录名、密码、数据库等。我为帖子更改了它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:49:23.807

您必须在查询中添加 WHERE 子句。

像这样捕获从 Android 发送到您的脚本的*Abbrev参数......*

```
<?php
    $abbrev = mysql_real_escape_string($_POST['Abbrev']);
    $query = sprintf("SELECT * FROM myTable WHERE Abbrev='%s'",$abbrev); //I assumed here that your table field is called Abbrev too
    ... your code here

?> 
```

# xcode - 启用应用程序沙盒时 System() 命令不起作用

> ID：11291164
> 
> 赞同：1
> 
> 时间：2012-07-02T09:41:39.953
> 
> 标签：xcode, cocoa, system, entitlements, sandbox

Apple 现在要求对所有未来的应用程序进行沙盒处理，因此我按照说明对应用程序进行沙盒处理。构建成功，但随后我的`system(rm -rf ~/.Trash/*)`命令停止工作。没啥事儿。我在这里感到困惑的是为什么此系统命令不适用于 App Sandboxing/Entitlements。这是我的权利设置：

权利：检查

应用沙盒：选中

这是我当前的代码：

```
- (void)viewDidLoad {
[self emptyTrash];
}

- (void)emptyTrash {
system(rm -rf ~/.Trash/*);
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:55:17.650

看看[文档](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html)。

> Mac OS X 路径查找 API，在 POSIX 层之上，返回相对于容器而不是相对于用户主目录的路径。如果您的应用在沙箱之前访问用户实际主目录 (~) 中的位置，并且您使用的是 Cocoa 或 Core Foundation API，那么在启用沙箱之后，您的路径查找代码会自动使用您应用的容器。

您可以使用

```
struct passwd *getpwuid(uid_t uid);
struct passwd {
char    *pw_name;       /* user name */
char    *pw_passwd;     /* encrypted password */
uid_t   pw_uid;         /* user uid */
gid_t   pw_gid;         /* user gid */
__darwin_time_t pw_change;      /* password change time */
char    *pw_class;      /* user access class */
char    *pw_gecos;      /* Honeywell login info */
char    *pw_dir;        /* home directory */
char    *pw_shell;      /* default shell */
__darwin_time_t pw_expire;      /* account expiration */
}

 #include <pwd.h>
 #include <sys/types.h>
 char *HomeDirectory = getpwuid(getuid())->pw_dir;
 NSLog(@"%s", HomeDirectory);
 system([[NSString stringWithFormat:@"rm -rf %s/.Trash/",HomeDirectory] UTF8String]); 
```

# php - 获取我和我的朋友正在参加的活动

> ID：11291168
> 
> 赞同：0
> 
> 时间：2012-07-02T09:41:45.537
> 
> 标签：php, mysql, sql

只是希望对一些 SQL 有所帮助。我对 MySQL 还很陌生。

如果有帮助，我正在使用 Code Igniter，但通常 SQL 就足够了。我将忽略 Active Record。

我有几张我猜会用到的表：

```
Users
id
first_name
last_name
username

Events
id
created_by_user_id
name
start_date
start_time
end_date
end_time

Attendees
id
user_id
event_id

Friends
user_id
friend_id
approved 
```

所以当我追求的是：

获得所有结果：

*   我和我认可的朋友正在参加
*   即将发生的事件，尚未超过 end_date/end_time
*   按 start_date 和 start_time 排序

我需要将用户表加入到这个表中，这样我就可以在视图中拥有这样的东西：

```
<?= foreach($events as $e): ?>
    <?= $e->name; ?> created by <?=$e->first_name . ' ' . $e->last_name; ?>
    Happening: <?= $e->start_date; ?>
<?php endforeach; ?> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:12:18.860

首先，我建议重组事件并将字段 start_date/start_time 和 end_date/end_time 与 TIMESTAMP 类型的 start/finish 连接起来。

所以对于第一个问题：

```
SELECT DISTINCT a1.event_id 
 FROM Attendees a1, Attendees a2 
 WHERE  
   a1.id = a2.id  
   AND a1.user_id = ${USER_ID} 
   AND a2.user_id IN 
         (SELECT friends_id FROM 
           Friends WHERE approved = True 
           AND user_id = ${USER_ID}); 
```

或者，您可以使用对您来说更容易的 INTERSECT。

第二个问题的解决方案，如果您合并日期/时间属性：

```
SELECT id FROM Events WHERE end < NOW(); 
```

第三个查询：

```
SELECT id from Events ORDER BY start; 
```

# git - 是否可以在 git 中合并提交？

> ID：11291171
> 
> 赞同：4
> 
> 时间：2012-07-02T09:41:57.973
> 
> 标签：git, version-control, commit

有时（经常发生）我会犯错误并在推送后做出一种“快速修复”。

但是为了清楚一些提交，有时我会重新分叉（如果那是在我的分叉中）并再次提交所有更改。

有没有办法合并提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:57:50.380

是的，有一种方法，叫做*squashing*。

```
git rebase -i sha1_of_the_first_concerened_commit 
```

然后用*squash*（或*s* ）替换相关提交下方提交的所有*编辑*，保存文件，并继续使用.**`git rebase --continue`**

 **下次你推送时，你的推送可能会被拒绝，你需要然后`git push -f`.

* * *

但在你的具体情况下，没有必要经历这一切，你可以`commit --amend`改用。

假设您已提交，然后对*file1*进行了快速修复。您只需要将文件添加到暂存区域：

```
git add file1 
```

然后：

```
git ci --amend 
```

最后强制推送：

```
git push -f 
```

重写历史时要小心，当你是唯一一个在 repo 上工作的人时很好，或者你确定没有人追随你，否则对其他人来说是一种痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:52:12.173

是的。您要查看的是`rebase`. 尝试

```
$ git help rebase # and read it 
```

另一种选择是`git commit --amend`。如果您即将进行的提交应该与当前 HEAD 合并，您可以*修改*它。

这两个选项，重写历史。因此，如果受影响的提交已经在远程端，您将需要将`git push -f`更改发送到上游。

* * *

对于**rebase**的简单示例用例，假设您进行了 5 次提交，

```
A--B--C--D--E
^ initial   ^ HEAD 
```

并且提交 B 是提交 A 的快速修复，
提交 E 是提交 C 的快速修复。
所以你想将 B 合并到 A，将 E 合并到 C。

```
$ git rebase -i HEAD~5 
```

你从这个开始：

```
pick A msg
pick B msg
pick C msg
pick D msg
pick E msg 
```

您重新排列提交，以便要合并的提交低于要合并的提交；即 A 之下的 B（已经存在）和 C 之下的 E。

```
pick A msg
pick B msg
pick C msg
pick E msg
pick D msg 
```

你告诉 git，不要*选择*提交，而是*压缩*它；也就是将它合并到上面的一个 - 或*修复*它 - 参见手册页。

```
pick A msg
squash B msg
pick C msg
squah E msg
pick D msg 
```

全部完成，保存文件，git 将重新排列并压缩提交。
所以现在你有：

```
A'--C'--D 
```**

# android - SwitchPreference 使用错误的开关文本

> ID：11291175
> 
> 赞同：0
> 
> 时间：2012-07-02T09:42:13.423
> 
> 标签：android, android-preferences

我在preferences.xml 文件中设置了两个开关。

```
<SwitchPreference
        android:summaryOff="Metric Units"
        android:summaryOn ="Imperial Units"
        android:switchTextOff="Metric"
        android:switchTextOn="Imperial"
        android:key="unit_pref_imperial_on"
        android:title="Units"/>
<SwitchPreference
        android:summaryOff="Your battery levels are not being monitored."
        android:summaryOn ="Your battery levels are being monitored."
        android:switchTextOff="Off"
        android:switchTextOn="On"
        android:key="battery_pref"
        android:title="Battery Monitor"/> 
```

但是，第二个开关有时会使用先前的开关 switchTextOn 和 switchTextOff 值。它不会一直发生，只是有时？

有谁可以帮我离开这里吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:35:06.013

为了解决这个问题，我决定将我的字符串定义为`@string`资源，而不仅仅是在 xml`android:text`部分中。

这似乎为我清除了它。

# php - Wordpress：编辑帖子后的空白页

> ID：11291178
> 
> 赞同：0
> 
> 时间：2012-07-02T09:42:32.163
> 
> 标签：php, wordpress

我在使用 Wordpress（3.4 版）时遇到了一个奇怪的问题……如果我尝试编辑一篇文章，我只会得到一个指向“wp-admin/post.php”的空白页面，并出现 HTTP 500 错误，并且该文章没有更新。我试图激活调试功能，但我只收到以下消息：

```
Notice: wp_enqueue_script was called incorrectly. Scripts and styles should not be registered or enqueued until the wp_enqueue_scripts, admin_enqueue_scripts, or init hooks. Please see Debugging in WordPress for more information. (This message was added in version 3.3.) in public_html/wp-includes/functions.php on line 2825

Notice: register_sidebar_widget is deprecated since version 2.8! Use wp_register_sidebar_widget() instead. in /public_html/wp-includes/functions.php on line 2705

Notice: register_widget_control is deprecated since version 2.8! Use wp_register_widget_control() instead. in /public_html/wp-includes/functions.php on line 2705 
```

然而，他们只是注意到，所以我不认为他们与主要错误有关......

我错过了什么？我怎样才能得到阻止帖子被编辑的真正错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:33:04.183

一个一个禁用插件并尝试更新您的帖子。你会找到有罪的。

# iphone - 忽略触摸事件

> ID：11291183
> 
> 赞同：1
> 
> 时间：2012-07-02T09:42:45.137
> 
> 标签：iphone, objective-c, ios, ipad, cocos2d-iphone

我正在用 cocos2d 制作游戏，在某些情况下需要忽略触摸事件，尤其是。当另一个触摸“正在进行”时。也就是说，玩家触摸屏幕，四处移动手指，然后结束触摸。在此期间，我需要忽略可能发生的所有其他触摸。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:00:22.287

```
self.userInteractionEnabled = YES; 
```

# android - Android Socket通信错误

> ID：11291185
> 
> 赞同：0
> 
> 时间：2012-07-02T09:42:53.183
> 
> 标签：android, android-wifi

我正在编写一个小应用程序，其中 android 设备尝试将数据包发送到服务器（这是我自己的计算机）。

我收到一些错误，我不知道如何修复它。

这是错误：

```
>07-02 14:58:56.125: E/AndroidRuntime(17976): FATAL EXCEPTION: main
>07-02 14:58:56.125: E/AndroidRuntime(17976): android.os.NetworkOnMainThreadException
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >libcore.io.IoBridge.connectErrno(IoBridge.java:127)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >libcore.io.IoBridge.connect(IoBridge.java:112)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >java.net.Socket.startupSocket(Socket.java:566)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >java.net.Socket.tryAllAddresses(Socket.java:127)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at java.net.Socket.<init>(Socket.java:177)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at java.net.Socket.<init>(Socket.java:149)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >com.amazon.hsyal.WifiSimulatorActivity$1.onClick(WifiSimulatorActivity.java:33)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >android.view.View.performClick(View.java:3536)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >android.view.View$PerformClick.run(View.java:14130)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >android.os.Handler.handleCallback(Handler.java:605)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >android.os.Handler.dispatchMessage(Handler.java:92)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at android.os.Looper.loop(Looper.java:137)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >android.app.ActivityThread.main(ActivityThread.java:4495)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >java.lang.reflect.Method.invokeNative(Native Method)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >java.lang.reflect.Method.invoke(Method.java:511)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at >com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
>07-02 14:58:56.125: E/AndroidRuntime(17976):   at dalvik.system.NativeStart.main(Native >Method) 
```

我的安卓程序是：

```
 public class WifiSimulatorActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button send_packet_button = (Button) findViewById(R.id.send_packet_button);
        send_packet_button.setOnClickListener(sendPacketListener);

    }
    Button.OnClickListener sendPacketListener = new Button.OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try{
                Socket s = new Socket("192.168.52.138", 12345);
                OutputStream out = s.getOutputStream();
                PrintWriter output = new PrintWriter(out);
                BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
                output.write("Sending packet 1");

                s.close();
            }
            catch(UnknownHostException e){
                e.printStackTrace();
            }
            catch(IOException e){
                e.printStackTrace();
            }
        }

    };
}

    public static void main(String[] args){
    try{
    Boolean end = false;
    ServerSocket ss = new ServerSocket(12345);
    System.out.println("Program running");
    while(!end){
            //Server is waiting for client here, if needed
            Socket s = ss.accept();
            BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
            PrintWriter output = new PrintWriter(s.getOutputStream(),true); //Autoflush
            String st = input.readLine();
           System.out.println("Tcp Example From client: "+st);
            output.println("Good bye and thanks for all the fish :)");
            s.close();

    }
ss.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:45:44.597

**android.os.NetworkOnMainThreadException**

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

在您的情况下，您正在从 MainUI 线程运行网络操作，这就是您得到此异常的原因（在 android 中从未允许这样做）。使用[Android AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并将您的网络（套接字代码）放入`doInBackGround()`AsyncTask 中。

看SO问题[android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:50:16.940

正如文档所说：android.os。[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

所以尝试通过使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)、[Handler](http://developer.android.com/reference/android/os/Handler.html)、[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)和[runOnUiThread来实现你的网络相关代码](http://developer.android.com/reference/android/app/Activity.html)

# iphone - 如何从具有缩放填充选项集的 uiimageview 获取 uiimage

> ID：11291187
> 
> 赞同：2
> 
> 时间：2012-07-02T09:43:36.240
> 
> 标签：iphone, objective-c, uiimageview, uiimage

我用手机（640*480）拍了一张照片，然后把它放在里面`uiimageview (300*300)`，用比例填充选项集。我需要将内部显示的相同图像发送`uiimageview (300*300, croped, resized)`到服务器....

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:55:32.697

通过将 UIImageView 层渲染到图形上下文，有一种快速的脏方法可以做到这一点。

```
UIGraphicsBeginImageContext(self.bounds.size);
[self.imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

您需要为此导入`<QuartzCore/QuartzCore.h>`。

另一种方法是自己计算 AspectFill。

```
 CGSize finalImageSize = CGSizeMake(300,300);
 CGImageRef sourceImageRef = yourImage.CGImage;

CGFloat horizontalRatio = finalImageSize.width / CGImageGetWidth(sourceImageRef);
CGFloat verticalRatio = finalImageSize.height / CGImageGetHeight(sourceImageRef);
CGFloat ratio = MAX(horizontalRatio, verticalRatio); //AspectFill
CGSize aspectFillSize = CGSizeMake(CGImageGetWidth(sourceImageRef) * ratio, CGImageGetHeight(sourceImageRef) * ratio);

CGContextRef context = CGBitmapContextCreate(NULL,
                                             finalImageSize.width,
                                             finalImageSize.height,
                                             CGImageGetBitsPerComponent(sourceImageRef),
                                             0,
                                             CGImageGetColorSpace(sourceImageRef),
                                             CGImageGetBitmapInfo(sourceImageRef));

//Draw our image centered vertically and horizontally in our context.
CGContextDrawImage(context, 
                   CGRectMake((finalImageSize.width-aspectFillSize.width)/2,
                              (finalImageSize.height-aspectFillSize.height)/2,
                              aspectFillSize.width,
                              aspectFillSize.height),
                   sourceImageRef);

//Start cleaning up..
CGImageRelease(sourceImageRef);

CGImageRef finalImageRef = CGBitmapContextCreateImage(context);
UIImage *finalImage = [UIImage imageWithCGImage:finalImageRef];

CGContextRelease(context);
CGImageRelease(finalImageRef);
return finalImage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:48:37.087

从文档中：

> UIViewContentModeScaleToFill
> 
> 如有必要，通过更改内容的纵横比来缩放内容以适应其自身的大小。

你可以做数学。或者，如果您感觉特别懒惰，可以使用[这种](https://stackoverflow.com/questions/4334233/how-to-capture-uiview-to-uiimage-without-loss-of-quality-on-retina-display)hack 方式。

# mysql - 创建存储过程的 SQL 语法错误

> ID：11291194
> 
> 赞同：0
> 
> 时间：2012-07-02T09:44:17.937
> 
> 标签：mysql, stored-procedures

我正在创建一个小的（目前）存储过程来插入一些数据。当我创建它时，我得到一个错误。

```
DROP PROCEDURE IF EXISTS InsertTESTData;
delimiter $$
CREATE PROCEDURE InsertTESTData (
p_pink_no VARCHAR,
p_carrier VARCHAR,
p_thisno INT
)
BEGIN
INSERT INTO RefDB (pink_no,carrier,thisno) 
    VALUES 
(p_pink_no,p_carrier,p_thisno);
END $$
delimiter ; 
```

我总是得到的错误是一个 1064 SQL 错误，如下所示。

> ```
> Error : You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'p_carrier VARCHAR,p_thisno IN) BEGIN INSERT INTO RefDB (pink_no,carrier,t' at line 2 
> ```

我以为我已经把所有东西都盖好了，现在我要把头发拉出来！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:47:34.880

您需要`varchar`像这样为您的参数定义一个长度

```
p_pink_no VARCHAR(100) 
```

和改变

```
p_thisno IN 
```

到

```
p_thisno INT 
```

完整示例：

```
DROP PROCEDURE IF EXISTS InsertTESTData;
delimiter $$
CREATE PROCEDURE InsertTESTData (
    p_pink_no VARCHAR(100),
    p_carrier VARCHAR(100),
    p_thisno INT)
BEGIN
    INSERT INTO RefDB (pink_no,carrier,thisno) 
    VALUES (p_pink_no,p_carrier,p_thisno);
END $$
delimiter ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-26T07:13:06.967

您必须声明数据类型的大小，之后我确定您的代码将成功执行。按照这个

```
DROP PROCEDURE IF EXISTS InsertTESTData;
delimiter $$
CREATE PROCEDURE InsertTESTData (
    p_pink_no VARCHAR(20),
    p_carrier VARCHAR(200),
    p_thisno number(23))
BEGIN
    INSERT INTO RefDB (pink_no,carrier,thisno) 
    VALUES (p_pink_no,p_carrier,p_thisno);
END $$
delimiter ; 
```

# jquery - 浏览器控制台中的 Ajax

> ID：11291198
> 
> 赞同：2
> 
> 时间：2012-07-02T09:44:32.027
> 
> 标签：jquery, ajax, browser, console

是否可以通过手动将代码键入浏览器的控制台来执行/创建 ajax 调用？如果是这种情况怎么办？提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:47:56.753

您可以按照与在 html 文档的脚本中执行此操作完全相同的方式执行此操作。

`$.ajax();`如果您使用 jQuery，只需将 -Call粘贴到控制台中。

# c# - 通过针对接口编程来持久化数据

> ID：11291202
> 
> 赞同：2
> 
> 时间：2012-07-02T09:44:37.640
> 
> 标签：c#, nhibernate, linq-to-sql, tdd, domain-driven-design

我有一个将传递给 ApplicationService 的 IBankAccount 接口。对帐户对象（在 ApplicationService 项目中）所做的更改需要保存在数据库中。存储库使用 IBankAccount 接口接收更改。如何将这些数据保存到数据库中？这是使用 LINQ to SQL 实现的。

注意：以下是 Scott 在[http://weblogs.asp.net/scottgu/archive/2007/06/29/linq-to-sql-part-3-querying-our-database.aspx](http://weblogs.asp.net/scottgu/archive/2007/06/29/linq-to-sql-part-3-querying-our-database.aspx)中的评论 “添加**接口**到您的 LINQ to SQL 数据模型类。LINQ to SQL 类是部分类 - 这意味着您可以将接口直接添加到它们。

```
public class LijosSimpleBankRepository : ILijosBankRepository
{
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    public virtual void UpdateAccount(DomainInterfaces.IBankAccount iBankAcc)
    {
        DBML_Project.BankAccount  bankAccount;
    }

}

namespace DomainInterfaces
{
public interface IBankAccount
{
    int BankAccountID { get; set; }
    string AccountType { get; set; }
    System.Nullable<System.DateTime> OpenedDate { get; set; }
    string Status { get; set; }
    System.Nullable<int> AccountOwnerID { get; set; }
}

}

namespace DBML_Project
{
public class FixedBankAccount : BankAccount
{
    //Note: BankAccount already implemnts IBankAccount
}

public class SavingsBankAccount : BankAccount
{
    //Note: BankAccount already implemnts IBankAccount
}  

//The auto generated calss is made as abstract
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.BankAccount")]
[InheritanceMapping(Code = "Fixed", Type = typeof(FixedBankAccount), IsDefault = true)]
[InheritanceMapping(Code = "Savings", Type = typeof(SavingsBankAccount))]
public abstract partial class BankAccount : INotifyPropertyChanging, INotifyPropertyChanged, DomainInterfaces.IBankAccount
{
      ..
    }
} 
```

阅读

1.  [优化 Repository 的 SubmitChanges 方法](https://stackoverflow.com/questions/11262785/optimizing-repositorys-submitchanges-method)

2.  [使用 LINQ to SQL 时如何抽象出持久性代码？](https://stackoverflow.com/questions/875130/how-do-you-abstract-out-your-persistence-code-when-using-linq-to-sql/875314#comment14855058_875314)

3.  [LINQ to SQL - 使用抽象基类时的映射异常](https://stackoverflow.com/questions/1021274/linq-to-sql-mapping-exception-when-using-abstract-base-classes)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:55:52.133

您的存储库应该接受`BankAccount`- 不是`IBankAccount`因为 Linq-to-sql 不知道是什么`IBankAccount`并且编译器不允许您在不先将其转换为的情况下存储它（如果实例不是 a `BankAccount`，这显然会在运行时失败）。`IBankAccount``BankAccount`

一旦你有`BankAccount`你只需调用：

```
Context.BankAccounts.Add(account);
Context.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:27:53.283

据我了解，您需要为银行系统建模。这意味着处理银行账户。这是一项没有“Hello World！”类型信息技术的艰难业务。

基本上使用银行帐户，您需要：

*   读取详细信息（例如帐户名称、值等）
*   借方账户
*   信用账户
*   终止帐户
*   创建一个新账户
*   ...和其他操作

借记和贷记操作是它们中最具“交易性”的操作，因为这些操作意味着您将一次编辑两个帐户，并且您希望两次编辑都成功或同时失败。

这又是一项有风险的业务，因为它涉及检查许多业务规则，从账户上有足够的钱开始（这并不是那么简单，因为拥有透支账户意味着你可以低于零）一直到确保有一种持久的交易，从一个账户中减去钱，然后向另一个账户增加钱。

此外，您必须检查一个人是否试图转移负金额，因为这实际上是从其他账户窃取资金。列表并不止于此。Scott Hanselman 在一家银行工作了一段时间，他可能会对需要检查的内容有所帮助。

总而言之，我的回答似乎是一个“不值得”的回答，你也可以对我投反对票，但同样，这个主题太深了，无法在 stackoverflow 响应中涵盖。

对不起。

# java - 我有一个自定义对象的二维数组。我必须用 Java 实例化每个吗？

> ID：11291204
> 
> 赞同：0
> 
> 时间：2012-07-02T09:44:50.897
> 
> 标签：java, android, object, multidimensional-array

```
 dmap = new Tile[maxW][maxH];
    for (int y = 0; y < maxH; ++y)
        for (int x = 0; x < maxW; ++x)
            dmap[x][y] = new Tile(); 
```

尽管每个成员`Tile`只有一个`int`无论如何都设为 0，但速度很慢。我还没有为`Tile()`. 我可以改进还是应该回到 C++？

`maxW`而且`maxH`都是255，我的环境是安卓模拟器。

我不认为是这段代码再慢了。我的`Log.i()`语句从 LogCat 视图中消失了……我`y`在上面的初始化代码中为每个语句添加了一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:50:16.373

您不必使用对象初始化数组。默认情况下，它将包含空值，如果在您的情况下可以，您可以像这样保留它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:57:16.393

如果您希望每个数组元素都包含一个有效的对象，那么是的，您需要创建一个对象以进入每个数组元素。但是，根据您要实现的目标，可能会有所帮助的事情：

延迟初始化：您可以包装数组，并且仅在需要时创建 Tile，使数组大部分填充为空值。

移动你的抽象：可能有一个 TileMap 对象，而不是一个 Tile 对象数组，其中包含一个 2D 整数数组（不需要构造，默认为零），并让它返回给定 tile 的适当 Tile指数。

你说目前所有的 Tiles 都只包含一个 int。您是否希望具有相同 int 值的不同图块成为不同的对象？这里的大部分开销是创建新对象，而不是将其分配给数组索引。预先创建您的实例 - 或者可能使用 Tile 实例的枚举 - 将意味着不需要重复此开销。

# javascript - 将数组传递给 Javascript Date 构造函数，它是标准的吗？

> ID：11291206
> 
> 赞同：15
> 
> 时间：2012-07-02T09:44:53.777
> 
> 标签：javascript, date

这适用于 Chrome：

```
var dateArray = [2012, 6, 5];
var dateObject = new Date(dateArray); 
```

我得到了 2012 年 6 月 5 日。我还尝试了 Android 浏览器，得到了相同的结果。但是，这在 Firefox 或 Safari 中不起作用。我可以说：

```
var dateObject = new Date(2012, 6, 5); 
```

但这应该是 2012 年 7 月 5 日，这也是我从 Chrome 中得到的。

我的问题：ECMA 标准的第一个示例部分是什么？只是 Chrome 更先进，我可以期待其他浏览器在未来支持它吗？或者它只是为了便携性而应该避免的一些 v8 主义？

我一直在尝试查找这种特定形式的 Date 构造函数的引用，但找不到任何引用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-02T09:56:40.527

ES5 规范详细说明了构造函数的[`new Date(value)`形式。](http://es5.github.com/#x15.9.3.2)`Date`在处理这种形式的算法中，`value`通过调用对象的[`[[DefaultValue]]`内部方法](http://es5.github.com/#x15.4.4.2)将其转换为原始值。

将数组转换为原始值基本上是通过将数组转换为字符串来完成的。将数组转换为字符串 ( [`Array.prototype.toString`](http://es5.github.com/#x15.4.4.2)) 实际上与调用`dateArray.join()`.

因此，您对`Date`构造函数的调用实际上将如下所示：

```
var dateObject = new Date("2012,6,5"); 
```

如果该字符串可以被[`Date.parse`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)识别，您将得到一个`Date`实例。

这种形式的`Date`构造函数也在[MDN 上](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)列为`new Date(dateString)`.

当您传递一个数组时，Firefox 似乎会失败，但如果您传递该数组的字符串表示形式，它就会成功。我会说这可能是一个 Firefox 错误，但我可能误解了 ES5 规范。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-11-23T06:53:29.123

您可以在 ES6中使用[传播语法。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)

```
let dateArray = [2012, 6, 5];
let dateObject = new Date(...dateArray);

console.log('Spread:', dateObject);
console.log('Direct:', new Date(2012, 6, 5));
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-27T14:02:18.323

这个怎么样：

```
new (Function.prototype.bind.apply(
   Date, [null].concat([2011, 11, 24])
)) 
```

您可以使用数组项作为参数`apply`调用您创建的新函数。`bind`

来源：[http ://www.2ality.com/2011/08/spreading.html](http://www.2ality.com/2011/08/spreading.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-04T16:57:34.340

根据[Jure 的回答](https://stackoverflow.com/a/26589301/1762224)。我已经在评论中澄清了[Sergio 的问题](https://stackoverflow.com/questions/11291206/passing-an-array-to-the-javascript-date-constructor-is-it-standard#comment57319815_26589301)，表明这`null`实际上是电话的范围。

```
function newInstance(clazz, arguments, scope) {
  return new (Function.prototype.bind.apply(clazz, [scope].concat(arguments)));
}

// Scope is not needed here.
var date = newInstance(Date, [2003, 0, 2, 4, 5, 6]);

// 1/2/2003, 4:05:06 AM (Locale = US EST)
document.body.innerHTML = date.toLocaleString();
```

# android - 从服务器加载多个音频文件并在单独的音频播放器中播放

> ID：11291211
> 
> 赞同：0
> 
> 时间：2012-07-02T09:45:13.340
> 
> 标签：android

我正在开发一个应用程序，我需要从服务器检索多个音频文件并将它们显示在一个活动中。如果服务器上有两个音频文件，那么我的活动中应该动态显示两个音频播放器，如果有 5 个音频文件，那么 5音频播放器应附带相应的音频文件。检索一个音频文件并播放它很容易。我需要的是检索超过 1 个音频文件并在单独的播放器中播放它们。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:57:24.540

您应该使用 MediaPlayer 类来从远程服务器流式传输您的音频。您可以设置流式网址这样做：

```
MediaPlayer mMediaPlayer = new MediaPlayer(); // initialize it here
mMediaPlayer.setOnPreparedListener(this);
mMediaPlayer.setOnCompletionListener(this);
mMediaPlayer.setOnErrorListener(this);
mMediaPlayer.setOnBufferingUpdateListener(this);
mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

mMediaPlayer.setDataSource("http://yoursongurl.com"); 
```

如果您想在同一个活动上拥有多个独立的流媒体播放器，那么您必须实例化完全不同的媒体播放器。类似的东西

```
String[] urls = { "url1", "url2" };
MediaPlayer[] media = new MediaPlayer[ urls.length ];

for(int i = 0; i < urls.length; i++){
    media[i] = createMediaPlayer( url );
}

private MediaPlayer createMediaPlayer(String url){
     mMediaPlayer = new MediaPlayer(); // initialize it here
     mMediaPlayer.setOnPreparedListener(this);
     mMediaPlayer.setOnCompletionListener(this);
     mMediaPlayer.setOnErrorListener(this);
     mMediaPlayer.setOnBufferingUpdateListener(this);
     mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

     mMediaPlayer.setDataSource(url);

    return mMediaPlayer;
} 
```

为多首歌曲使用多个媒体播放器是最简单的解决方案，但效率也较低。如果您想要一个更有效的解决方案，您可以实例化单个媒体播放器，并在您想在运行时播放下一首歌曲时保存前一首歌曲的状态。

你可以在这里找到一些参考：http: [//developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

# c++ - 使用 Google Mocks 模拟免费功能

> ID：11291213
> 
> 赞同：2
> 
> 时间：2012-07-02T09:45:17.973
> 
> 标签：c++, unit-testing, googlemock

我有以下免费功能信号：

```
ReturnT getFirstAttributeHandle(ParentHandleT a, AttributeHandleT* b); 
```

我需要将这样一个函数的地址传递给迭代这些句柄的迭代器的构造函数。由于此函数的具体实现访问外部依赖项，我需要模拟它。

我想使用 google mock 来模拟这个函数，但我不确定如何。

这是我尝试过的：

```
class IAttributeIterator
{
public:
    virtual ReturnT getFirstAttributeHandle(ParentHandleT a, AttributeHandleT* b) = 0;
};

class MockAttributeIterator : public IAttributeIterator
{
public:
    MOCK_METHOD2(getFirstAttributeHandle, ReturnT(ParentHandleT a, AttributeHandleT* b));
}; 
```

然后是这样的：

```
MockAttributeIterator i;
AttributeIterator iter = AttributeIterator(i.getFirstAttributeHandle);
iter++; 
```

但这不会编译，给出错误：

'MockAttributeIterator::getAttribute'：函数调用缺少参数列表；使用 '&MockAttributeIterator::getAttribute' 创建指向成员的指针

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:21:02.337

不，您不能将指向成员函数的指针转换为函数指针（这就是编译器所说的）。

如果 AttributeIterator 的构造函数接受指向函数的指针，那么您需要创建一个伪函数，该函数调用 MockAttributeIterator 上的 getFirstAttributeHandle 方法。像这样的东西：

```
namespace
{
    MockAttributeIterator mockObj;
    ReturnT FakeHandle(ParentHandleT a, AttributeHandleT* b)
    {
      mockObj.getFirstAttributeHandle( a, b );
    }
} 
```

并将指向 FakeHandle 的指针传递给 AttributeIterator 的构造函数。

顺便说一句，我刚刚检查了 gmock 常见问题解答，甚至在那里进行了解释（[这里](http://code.google.com/p/googlemock/wiki/FrequentlyAskedQuestions#My_code_calls_a_static/global_function.__Can_I_mock_it?)是链接）。

有几件事：

*   上面贴的代码最好放在匿名命名空间中
*   要清除测试之间的期望，在您的设置方法中（每个单元测试框架都有一个），请执行以下操作：

    ```
    void setUp()
    {
      ::testing::Mock::VerifyAndClearExpectations( &mockObj ):
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T09:24:48.347

该问题与 google mock 完全无关，编译器抱怨以下语句：

```
AttributeIterator iter = AttributeIterator(i.getFirstAttributeHandle); 
```

注意表达式 as `i.getFirstAttributeHandle`，它是一个**成员函数调用**，所以编译器试图匹配函数签名并没有得到任何结果。

如果您想将**部分应用的函数**安全地传递给另一个类，请尝试`boost.function/bind`使用原始函数指针，这是非常危险且容易出错的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T06:57:00.257

您可以将自由函数封装在代理类中，然后模拟对代理方法的调用。以下代码概述了如何在代码中模拟`CreateFileW`和`CloseHandle`调用。

[gmock Cookbook](http://code.google.com/p/googlemock/wiki/CookBook#Mocking_Free_Functions)中也概述了基本思想。

```
/// Common Interface
class IWindows
{
public:
    virtual HANDLE CreateFileW(LPCWSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes,
        DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile) = 0;
    virtual BOOL CloseHandle(HANDLE hObject) = 0;
};

/// Implementation
class WindowsWrapper : public IWindows
{
public:
    WindowsWrapper(void);
    virtual ~WindowsWrapper(void);
    virtual HANDLE CreateFileW(LPCWSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes,
        DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
    virtual BOOL CloseHandle(HANDLE hObject);
};

/// Mock
class MockWindowsWrapper : public IWindows
{
public:
    MockWindowsWrapper() {}
    virtual ~MockWindowsWrapper() {}
    MOCK_METHOD7(CreateFileW, HANDLE(LPCWSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes,
        DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile))`
    {
        return ::CreateFileW(lpFileName, dwDesiredAccess, dwShareMode, lpSecurityAttributes, dwCreationDisposition, dwFlagsAndAttributes, hTemplateFile);
    }
    MOCK_METHOD1(CloseHandle, BOOL(HANDLE hObject))
    {
        return ::CloseHandle(hObject);
    }
}; 
```

# php - mysql_real_escape_string , htmlspecialchars 错误？

> ID：11291214
> 
> 赞同：1
> 
> 时间：2012-07-02T09:45:23.110
> 
> 标签：php

我知道`htmlspecialchars`用于 html 输出，`mysql_real_escape_string`用于插入数据库。我不确定如何在这种情况下应用。例如

```
$search = mysql_real_escape_string(htmlspecialchars($_GET['search'],ENT_QUOTES));

mysql_query("INSERT INTO table1 VALUES ('','$search')",$this->connect);

echo "<a href='http://www.example.com/$search'>$search</a>"; 
```

我是否必须`mysql_real_escape_string`在插入之前和`htmlspecialchars`之后分开顶行？我希望我不必这样做，否则我必须检查很多代码..

使用`htmlspecialchars`两次也会做与一次不同的事情吗？我确定在我的代码中某处我`htmlspecialchars`在同一个变量上使用了两次。

例如

```
$var = htmlspecialchars($one); //top of page

$var2 = htmlspecialchars($var); //another function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:52:38.347

```
$searchTerm = $_GET['search'];

mysql_query("INSERT INTO table1 VALUES ('', '" . mysql_real_escape_string($searchTerm) . ')"', $this->connect);

echo "<a href='http://www.example.com/" . htmlspecialchars(urlencode($searchTerm), ENT_QUOTES) . "'>$search</a>"; 
```

只在需要的时候逃跑一次。在您的情况下，由于该值应该是 URL 的一部分，因此需要对它进行 URL 编码。由于该 URL 随后成为 HTML 的一部分，因此需要对其进行 HTML 转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:51:31.223

您需要搜索变量的两份副本：一份存储在 SQL 中，另一份可以通过 mysql_real_escape_string 传递；另一个要显示，在那里你使用 htmlspecialchars。

实际上你需要三个副本：在一个中，你将“”编码为“+”，这是用于 GET URL；另一个将转义 SQL 字符；第三个将转义 HTML。

您可能还想通过 UTF8 传递 _web 和 _sql。

```
$search_web = htmlspecialchars($_GET['search'],ENT_QUOTES);
$search_sql = mysql_real_escape_string($_GET['search']);
$search_url = urlencode($_GET['search']);

// Do try and upgrade to PDO, here...
mysql_query("INSERT INTO table1 VALUES ('','$search_sql')",$this->connect);

echo "<a href='http://www.example.com/$search_url'>$search_web</a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:50:10.930

用于`mysql_real_escape_string`转义 sql 字符串（※不要转义 html 特殊字符）。

```
$search = mysql_real_escape_string($_GET['search']); 
```

`htmlspecialchars`在网页中显示数据时使用。

```
<?php echo htmlspecialchars($var) // ex. $var is the content of $_GET['search'] ?> 
```

# magento - 在运行 10 个商店的服务器上设置 APC

> ID：11291215
> 
> 赞同：0
> 
> 时间：2012-07-02T09:45:24.307
> 
> 标签：magento, apc

我在我的服务器上运行 10 家商店，并在 apc.ini 中使用推荐的设置设置了 APC。

```
    extension = apc.so #name 取决于您的 APC 缓存安装

    [APC]
    apc.enabled = 1 #开启APC缓存
    apc.optimization = 0 # 实验性保持关闭
    apc.shm_segments = 1 # 共享内存段
    apc.shm_size = 128 # 最大共享内存取决于操作系统
    apc.ttl = 7200
    apc.user_ttl = 7200
    apc.num_files_hint = 1024
    apc.mmap_file_mask = /tmp/apc.XXXXXX
    apc.enable_cli = 1 # 允许命令行 php 运行
    apc.cache_by_default = 1 # 启用，过滤器为 0
    apc.max_file_size = 10M # 最大缓存文件大小
    apc.stat = 1 # 1代表开发，0代表生产，是否检查源文件的mod日期
    #apc.include_once_override = 1 # 使用 PHP5.3+ 进行 include_once 优化

```

它运行良好，点击率约为 99%，而且网站似乎运行良好。但在某些时候我的

```
shm.size
```

变得耗尽，所有100％的内存都被使用了。这导致所有商店停止工作，在第 0 行显示内存池错误。然后我将该特定变量的大小增加到 1GB，这导致所有网上商店都可以正常运行。

所以我的问题是每个网店设置的 shm.size 的优化值是多少，如果我有 20 家商店，那么值应该增加 20 的倍数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:31:58.420

在您的计算机上安装 apache，安装 APC，给它大量内存，安装一个商店，浏览商店的所有功能。使用 apc.php 文件检查使用的内存。你得到你的答案。

如果您的服务器有足够的内存给 APC 大量 ram 20Mb 的 wordpress 128 对于 Magento 不会太多。

检查我的答案以了解如何配置 APC[在 PHP 中导致“无法为池分配内存”的原因是什么？](https://stackoverflow.com/questions/3723316/warning-require-once-function-require-once-unable-to-allocate-memory-for-p)

# css - CSS：仅显示 DIV 的相关子集

> ID：11291231
> 
> 赞同：1
> 
> 时间：2012-07-02T09:46:39.400
> 
> 标签：css

我需要对一些我无法直接控制的 HTML 标记进行样式设置，并尝试仅显示 div 的相关子集，同时隐藏其他所有内容。

**要设置样式的 div**

```
<div id="spam_and_ham_mix">
    Irrelevant, looooooooong text (--> should be hidden)
    <div id="ham">Important stuff (--> should be visible)</div>
</div> 
```

**想要的结果**

我希望只显示“重要的东西”，同时隐藏其他所有内容。

**第一次尝试**

```
#spam_and_ham_mix { display:none; }  /* CSS-Weight 100 */
#spam_and_ham_mix #ham { display:block; }  /* CSS-Weight 200 */ 
```

结果：div 完全隐藏，什么也没有显示。

**第二次尝试**

```
#spam_and_ham_mix { visibility:hidden; }  /* CSS-Weight 100 */
#spam_and_ham_mix #ham { visibility:visible; }  /* CSS-Weight 200 */ 
```

结果：不相关的文本是不可见的，但它仍然占用与可见相同的空间（这符合 CSS 规范，但不是预期的结果）：

**问题**

我能做些什么呢？

我正在寻找一个纯 CSS 的解决方案（如果可能的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:53:25.220

**注意**- 此答案适用于预计不会影响搜索引擎优化 (SEO) 的情况。换句话说，打印样式表和内容不打算被搜索引擎抓取的站点/页面。在这些情况下执行以下操作可能会导致搜索引擎确定该网站正在操纵内容，从而可能对搜索位置产生负面影响或导致某种形式的禁令。我没有任何证据表明是这种情况，但如果这是您的情况，请小心。

这似乎适用于我测试的所有浏览器（FF13、Chrome、Opera 12、IE7-9）：

```
#spam_and_ham_mix {
    font-size: 0; 
}
#ham {
    font-size: 15px; 
} 
```

[http://jsfiddle.net/userdude/kqUUN/](http://jsfiddle.net/userdude/kqUUN/)

感觉“hacky”（而不是“-sacky”），但负边距也是如此。

还要注意，您必须[小心特殊性](http://www.htmldog.com/guides/cssadvanced/specificity/)：

```
#spam_and_ham_mix,
#spam_and_ham_mix .ham {
    font-size: 0;
}
.ham {
    font-size: 15px;
} 
```

[http://jsfiddle.net/userdude/kqUUN/1/](http://jsfiddle.net/userdude/kqUUN/1/)

`.ham`因为单独的选择器将被更“特定”的选择器覆盖，即另一个选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:07:07.990

既然你提到了图像等，也许这样的方法对你有用：

[http://jsfiddle.net/lollero/nYFWw/](http://jsfiddle.net/lollero/nYFWw/)

CSS：

```
#spam_and_ham_mix { 
    visibility: hidden;
    height: 0px;
    position: relative;
    overflow: visible;
}
#spam_and_ham_mix #ham { 
    visibility: visible;
    position: absolute;
    top: 0px;
    left: 0px;
}​ 
```

HTML（与您的相同）：

```
<div id="spam_and_ham_mix">
    Irrelevant, looooooooong text (--> should be hidden)
    <div id="ham">Important stuff (--> should be visible)</div>
</div> 
```

* * *

你可以设置`#spam_and_ham_mix { width: 0px; }`，但你很可能想给`#spam_and_ham_mix #ham`一个宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:04:34.260

给你：http: [//jsfiddle.net/kqUUN/12/](http://jsfiddle.net/kqUUN/12/)

唯一的问题是，您必须手动将#spam_and_ham_mix 的高度设置为您想要的任何值。希望这可以帮助。

# ruby - Ruby gem 对离线服务器的依赖

> ID：11291235
> 
> 赞同：13
> 
> 时间：2012-07-02T09:47:05.330
> 
> 标签：ruby, gem, bundler, offline

我有一台完全与 Internet 断开连接的服务器（出于某些奇怪的安全原因）。

如何使 Ruby 对各种 gem 的依赖项在该环境中工作？它可能适用于**Bundler**，但是如何在没有 Internet 连接的情况下使用**gem安装 Bundler？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-02T20:57:26.903

您可以从 ruby​​gems 下载 bundler 作为`.gem`文件并将其安装在服务器上

```
gem install /path/to/bundler.gem 
```

然后，您可以将应用程序所需的所有 gem 打包到`./vendor/cache`目录中

```
bundle package 
```

如果现在您将应用程序（连同`./vendor/cache`目录）部署到服务器并运行

```
bundle install --local 
```

bundler 不会去 ruby​​gems，而是会从`./vendor/cache`目录安装所有 gem。

有关更多信息，请参阅`bundler-package` [文档](http://bundler.io/v1.13/man/bundle-package.1.html)。

# php - Javascript 数组作为 BLOB（MIME TEXT 不是 IMAGE）保存到 mySQL 数据库中！

> ID：11291237
> 
> 赞同：1
> 
> 时间：2012-07-02T09:47:09.960
> 
> 标签：php, javascript, mysql, arrays, blob

我正在寻找一个示例，如何将大型文本数组 ( javascript ) 作为 BLOB 存储到我的 mySQL 数据库中。

我不知道哪种解决方案有效：

> 1.  Javascript 数组将通过 Ajax JSON 发送，然后通过 PHP 文件处理。转换 JSON -> BLOB 并保存到 mySQL 数据库中。获取 BLOB 转换为 JSON 发送到 javascript 变量。
>     
>     
> 2.  使用 arraydata 创建一个 BLOB 并通过 Ajax 发送一个 BLOB 文件（可能吗？）并将其存储在数据库中。通过 Ajax 获取 Blob 将其在 javascript 中转换回数组。

如果有一些关于这个问题的教程，那真的会对我有所帮助。我已经看到了一些保存图像的粗略示例（MIME：Type PNG 等），但不是 MIME：Type Text。

谢谢 ！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T12:29:56.633

Already solved it. Question closed.

I just base64_encoded and base64_decoded the variable as usual. You just had to assure that in the my.ini (mySQL) max_packet size was set larger than 1MB in order to save the file, that was the reason it was not working.

# cakephp - CakePHP - 设置共享核心后访问控制器动作

> ID：11291238
> 
> 赞同：0
> 
> 时间：2012-07-02T09:47:11.780
> 
> 标签：cakephp

我通过将 app 文件夹的内容复制到每个指向 CakePHP 核心文件的特定 Web 应用程序来设置共享的 CakePHP 环境（参见下面的代码）。

```
if (!defined('ROOT')) {
    define('ROOT', 'C:'.DS.'xampp'.DS.'htdocs'.DS.'mywebsite');
}

if (!defined('APP_DIR')) {
    define('APP_DIR', '');
}

if(!defined('CAKE_CORE_INCLUDE_PATH')){
    define('CAKE_CORE_INCLUDE_PATH', 'C:'.DS.'xampp'.DS.'htdocs'.DS.'cakephp'.DS.'lib');
} 
```

当我第一次创建应用程序时（使用默认路由设置和正确的数据库配置），没有报告任何问题。但是，当我开始创建结构时，在尝试访问控制器的操作时遇到以下问题：'C:\xampp\htdocs\mywebsite\View\Users\index.ctp'。如您所见，在 View 目录的开头添加了一个额外的目录分隔符。ROOT 常量回显是 'C:\xampp\htdocs\mywebsite'。我看不出如何以及在何处删除这个额外的分隔符。

请问有人可以说明如何吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:13:19.633

将“mywebsite”移动到“APP_DIR”常量：

```
if (!defined('ROOT')) {
    define('ROOT', 'C:'.DS.'xampp'.DS.'htdocs');
}

if (!defined('APP_DIR')) {
    define('APP_DIR', 'mywebsite');
} 
```

# version-control - 如何正确删除集市分支？

> ID：11291240
> 
> 赞同：4
> 
> 时间：2012-07-02T09:47:27.153
> 
> 标签：version-control, bazaar

如何从存储库中正确删除集市分支？

如果我想完全删除一个分支，那么就不可能找到这个分支是否存在？

我知道该`remove-branch`命令，但是有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:03:10.567

`bzr remove-branch`是删除分支的最简单方法。如果你不能使用那个命令，你能提一下为什么不吗？

您也可以手动删除分支目录，例如：`bzr rm -rf .bzr/branch`. 但是，这将跳过一些`bzr remove-branch`可以执行的检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T19:59:20.743

如果你想放弃分支，你可以只使用普通的`rm -rf branch_name`（或 Windows 上的类似机器，包括清理回收站）。

一些历史仍然保存在共享存储库中，并且可以通过`bzr heads --dead`命令找到。如果您绝对需要确保没有隐藏的历史记录，您需要做更多的事情：

```
# make new empty shared repository
bzr init-repo /path/to/temp-repo
# branch everything from old repo to temp-repo
bzr branch /path/to/old-repo/branch-1 /path/to/temp-repo/branch-1
...
bzr branch /path/to/old-repo/branch-N /path/to/temp-repo/branch-N
# after that you're ready to delete old-repo and replace it with temp-repo
# newly created repo will have only revisions present in active branches 
```

# python - Python：在运行时动态创建函数

> ID：11291242
> 
> 赞同：65
> 
> 时间：2012-07-02T09:47:36.977
> 
> 标签：python, function, runtime

如何在 Python 中动态创建函数？

我在这里看到了一些答案，但我找不到一个可以描述最一般情况的答案。

考虑：

```
def a(x):
    return x + 1 
```

如何即时创建这样的功能？我必须这样`compile('...', 'name', 'exec')`做吗？但那又如何呢？从编译步骤创建一个虚拟函数并替换其代码对象？

还是我应该使用`types.FunctionType`？如何？

我想自定义所有内容：参数的数量，它们的内容，函数体中的代码，结果，......

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-02T10:25:45.577

使用`exec`：

```
>>> exec("""def a(x):
...   return x+1""")
>>> a(2)
3 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-02T11:15:04.873

你看到了吗，[这](http://snipplr.com/view/17819/)是一个告诉你如何使用的例子`types.FunctionType`

**例子：**

```
import types

def create_function(name, args):
    def y(): pass

    y_code = types.CodeType(args,
                            y.func_code.co_nlocals,
                            y.func_code.co_stacksize,
                            y.func_code.co_flags,
                            y.func_code.co_code,
                            y.func_code.co_consts,
                            y.func_code.co_names,
                            y.func_code.co_varnames,
                            y.func_code.co_filename,
                            name,
                            y.func_code.co_firstlineno,
                            y.func_code.co_lnotab)

    return types.FunctionType(y_code, y.func_globals, name)

myfunc = create_function('myfunc', 3)

print repr(myfunc)
print myfunc.func_name
print myfunc.func_code.co_argcount

myfunc(1,2,3,4)
# TypeError: myfunc() takes exactly 3 arguments (4 given) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-11-11T16:30:59.747

如果你需要从某个模板动态创建一个函数，试试这个：

```
def create_a_function(*args, **kwargs):

    def function_template(*args, **kwargs):
        pass

    return function_template

my_new_function = create_a_function() 
```

在函数*create_a_function()*中，您可以控制选择哪个模板。内部函数*function_template*用作模板。创建者函数的返回值是一个函数。分配后，您将*my_new_function*用作常规函数。

通常，此模式用于函数装饰器，但在这里也可能很方便。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-11-29T10:35:00.563

您可以为此使用 lambda。

```
a = lambda x: x + 1
>>> a(2)
3 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-07-17T10:36:28.313

这种方法怎么样？

在这个例子中，我在一个类中对一个变量 (x -> ax+b)*参数化*一阶函数：

```
class Fun: 
  def __init__(self, a,b):
    self.a, self.b = a,b

  def f(self, x):
    return (x*self.a + self.b)

 u = Fun(2,3).f 
```

这里 `u` 将是函数 x->2x+3。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-04T13:22:15.197

你可以这样做：

```
new_func='def next_element(x):\n  return x+1'
the_code=compile(new_func,'test','exec')
exec(the_code)
next_element(1) 
```

它类似于以前的 exec 解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-10T14:50:18.273

比 Berci 的答案更简单

```
def get_fn(a, b): # factory function
  def fn(): # result function
    print(a, b)
  return fn

fn = get_fn(1, 2)

fn() 
```

这对于将变量转换为常量很有用（“动态函数的模板变量”）

# jquery - jQuery .ON 问题

> ID：11291244
> 
> 赞同：0
> 
> 时间：2012-07-02T09:47:46.767
> 
> 标签：jquery, ajax

我最近将我的网站折叠成一个大的 .JS 文件和一个大的 .CSS 文件（在我构建它时，我将所有 JS 和 CSS 放在单独的页面上以使其更容易。）

现在我把它们放在一起，CSS 工作得很好，但 .JS 不是。这与这个该死的 .ON 声明有关。.JS 在我在“主”div 中加载页面之前运行良好，但是一旦加载，我就无法从中得到任何东西。

目前我已经设置了html：

```
<div id="main">
<div id="customerForm" class="Admin">
<div id="tabSection">
<a class="tab selected"></a>
</div>
</div>
</div> 
```

我试图让 .ON 语句与 a.tab 一起使用：

```
$("#customerForm.Admin").on("click", "a.tab", function () {
alert('hello');
}); 
```

但它没有给我任何回应。有任何想法吗？是否有一种万无一失的方法可以知道什么会响应，什么不会响应 .ON？我怎么知道？:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:55:18.223

问题是因为您正在绑定`.on`语句`#customerForm.Admin`，如果您所说的是正确的，则在您的 AJAX 调用之后将被替换。您需要将绑定更改为在 DOM 树中更高的位置，高于替换点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:57:03.510

尝试

```
$("body").on("click", "a.tab", function () {
alert('hello');
}); 
```

或者

```
$("body").delegate("a.tab", "click", function () {
alert('hello');
}); 
```

# google-maps - Google Maps v3 仅显示灰色框

> ID：11291245
> 
> 赞同：0
> 
> 时间：2012-07-02T09:47:50.867
> 
> 标签：google-maps, google-maps-api-3

我一直在将谷歌地图集成到我的网站中，并且我拥有的代码仅在一个普通的 html 页面中就可以完美运行，但是当我将它放在它的目标网站中时，出现的只是一个灰色框，顶部带有`map`和按钮，底部带有和的谷歌徽标。导航按钮不出现（缩放、移动和街景）。有谁知道可能是什么原因造成的？`satellite``map data``terms of use`

这是我正在使用的代码：http: [//jsfiddle.net/kd7dX/](http://jsfiddle.net/kd7dX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:33:55.017

使用 CSS 规则：

```
div {
    overflow: hidden;
} 
```

替换为更有针对性的溢出规则

# android - android.database.sqlite.SQLiteException：靠近“？”：语法错误

> ID：11291248
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:48:23.567
> 
> 标签：android, sqlite, exception, cursor, in-operator

大家好

我有一个游标，我需要在 where 子句中验证特定 id 是否属于数组。

但是我有一个错误

**android.database.sqlite.SQLiteException：靠近“？”：语法错误：，编译时：SELECT display_name，_id FROM view_data_restricted data WHERE (1) AND (data1 IN ? AND mimetype='vnd.android.cursor.item/group_membership' AND display_name like '%r%') ORDER BY display_name**

这是我的代码

```
cursorContactosGrupos = managedQuery(ContactsContract.Data.CONTENT_URI,
                new String[]{ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME, ContactsContract.CommonDataKinds.GroupMembership._ID},
                ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID + " IN ? AND " + Data.MIMETYPE + "='" + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "' AND " + ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME + " like '%" + filter + "%'" ,
                new String[]{arrayTeste.toString().replace("[","(").replace("]",")")},
                ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME
                ); 
```

你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:54:26.280

尝试以下操作：

```
cursorContactosGrupos = managedQuery(ContactsContract.Data.CONTENT_URI, new String[]{ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME, ContactsContract.CommonDataKinds.GroupMembership._ID},
                ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID + " IN (?) AND " + Data.MIMETYPE + "='" + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "' AND " + ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME + " like '%" + filter + "%'" ,
                new String[]{arrayTeste.toString().replace("[","(").replace("]",")")},
                ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME
                ); 
```

只需`?`附上`(?)`

因为我们将查询写成... `IN (VALUE)`

# python - python中的错误处理

> ID：11291249
> 
> 赞同：2
> 
> 时间：2012-07-02T09:48:24.070
> 
> 标签：python, error-handling, zipfile, ftputil

我需要创建一个程序，该程序将从 FTP 服务器下载文件并将其压缩并上传到 FTP 服务器中的上传文件夹。我的旧代码很好，但我的导师要求我应该将我的代码组织成逻辑函数，并且在组织我的代码之后，它没有运行。这是完美运行的旧代码：

```
import os
import upload
import download
import zipfile
import ConfigParser
import ftputil
import shutil
import time

def main():

    #create a folder Temp on drive D:\ for later use
    path = r'D:\Temp'
    os.makedirs(path)

    #parse all the  values at configuration file named config.ini
    config = ConfigParser.ConfigParser()
    config.readfp(open('config.ini'))
    server = config.get('main', 'Server')
    username = config.get('main', 'Username')
    password = config.get('main', 'Password')
    uploads = config.get('main', 'Upload folder')
    downloads = config.get('main', 'Download folder')

    #connect to ftp
    ftp = ftputil.FTPHost(server, username, password)

    dirlist = ftp.listdir(downloads)

    #download all files from download folder to the created temp folder
    for list in dirlist:
        ftp.chdir(downloads)
        target = os.path.join(path, list)
        ftp.download(list, target)

    #zipping files
    absolute_path = r'D:\Temp'
    dirlist = os.listdir(absolute_path)
    filepath = r'D:\Temp\part2b.zip'
    zip_name = zipfile.ZipFile(filepath, 'w')
    for list in dirlist:
        get_file = os.path.join(absolute_path, list)
        zip_name.write(get_file, 'part2b\\' + list)

    #upload the zipfile named project2.zip to upload folder at ftp
    ftp.chdir(uploads)
    ftp.upload(filepath, uploads + '/part2b.zip')
    ftp.close()

#close the zipfile to remove the temp folder
    zip_name.close()

    #message
    print "Successfully uploaded all files in the upload folder"
    print ""
    print "this will close in 5 seconds....."

#delete temp folder
    shutil.rmtree(path, 'true')
    time.sleep(5)

if __name__ == '__main__':
    main() 
```

这是新的组织代码，但没有正常运行，但是当我尝试 python 命令行中的所有功能时，它很好。我不知道这里有什么问题：

```
import os
import zipfile
import ConfigParser
import ftputil
import shutil
import time
import tempfile

def dl_function(source_folder, target_folder):
    dirlist = ftp.listdir(source_folder)
    for list in dirlist:
        source = os.path.join(source_folder, list)
        target = os.path.join(target_folder, list)
        ftp.download(source, target)

def zip_function(temp_folder):
    dirlist = os.listdir(temp_folder)
    filepath = os.path.join(temp_folder, 'project2b.zip')
    zip_name = zipfile.ZipFile(filepath, 'w')
    for list in dirlist:
        get_file = os.path.join(temp_folder, list)
        zip_name.write(get_file, 'part2b\\' + list)

def upload_function(target_folder):
    ftp.upload(filepath, target_folder + '/part2b.zip')

def main():

    temp_folder = tempfile.mkdtemp()

    #parse all the  values at configuration file named config.ini
    config = ConfigParser.ConfigParser()
    config.read(open('config.ini'))
    server = config.get('main', 'Server')
    username = config.get('main', 'Username')
    password = config.get('main', 'Password')
    uploads = config.get('main', 'Upload folder')
    downloads = config.get('main', 'Download folder')

    ftp = ftputil.FTPHost(server, username, password)

    try:

        dl_function(downloads, temp_folder)
        zip_function(temp_folder)
        upload_function(uploads)

    finally:
        ftp.close() 
        zip_name.close()        

    print "This will close in 5 seconds"

    #delete temp folder
    shutil.rmtree(temp_folder, 'true')
    time.sleep(5)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:06:58.517

这是一个很好的例子，说明您应该如何在应用程序中使用日志记录。通常，当事情发生爆炸时，您可以通过两种方式对其进行调试

*   附加调试器
*   查看一些详细的日志记录

后者更适合部署的代码，因为您并不总是手边有调试器。

查看pydocs 页面上的[日志记录信息。](http://docs.python.org/library/logging.html)为您的代码添加：-

```
import os
import zipfile
import ConfigParser
import ftputil
import shutil
import time
import tempfile
import logging

def dl_function(source_folder, target_folder):
    logging.trace("Running dl_function")
    dirlist = ftp.listdir(source_folder)
    logging.trace("Got a dirlist")
    for list in dirlist:
        logging.trace("Running running for item " + list + " in dirlist")
        source = os.path.join(source_folder, list)
        logging.trace("Setting source to " + source)
        target = os.path.join(target_folder, list)
        logging.trace("Setting target to " + source)
        logging.trace("Attempting FTP download from " + source + " to " + target)
        ftp.download(source, target)
        logging.info("File downloaded from FTP")

...
...
...

if __name__ == '__main__':
    logging.info("Starting downloading application")
    main() 
```

日志记录中最重要的部分是正确拆分日志记录，因此您使用正确的级别（`Debug`、`Info`、`Warning`、`Error`、`Critical`）。[在 pydocs 页面上](http://docs.python.org/howto/logging.html#logging-basic-tutorial)有一个教程。

通过查看日志的输出，您可以了解您的程序在执行过程中的进展程度以及它的死亡位置，并将其缩小到一两行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:30:24.893

您`upload_function`和`dl_function`两者都尝试使用未定义的变量（`ftp`and `filepath`in`upload_function`和`ftp`in `dl_function`）。

您在 finally 块中也有一个`zip_name.close()`调用，`main`它应该真正属于`zip_function`（这将需要它自己的 try/finally 块）。

wrt/ 错误消息，您应该从命令行窗口运行脚本以查看整个回溯和错误消息。

完全不相关，但您的命名可以改进（即“download_files”而不是“dl_function”）......

# visual-studio-2010 - 使用 MSBuild 和 TeamCity 部署 VS 2010 数据库项目

> ID：11291250
> 
> 赞同：12
> 
> 时间：2012-07-02T09:48:26.997
> 
> 标签：visual-studio-2010, visual-studio, msbuild, teamcity, database-project

是否可以使用 TeamCity 部署 VS 2010 数据库项目？

我正在构建我的整个解决方案，并将网站部署到我的服务器，这一切都很好。

我要触发的最后一步是部署数据库项目，该项目生成一个 sql 脚本并进行部署。

我选择了“创建部署脚本 (.sql) 并部署到数据库”选项作为部署操作，我的配置目标设置为构建和部署数据库项目，但我不知道如何获取 TeamCity 和MSBuild 来触发它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T04:42:51.230

必须安装 Visual Studio 才能正常工作。

对于**原始 SQL Server 2005/2008 数据库项目类型**：

1.  创建运行器类型 Visual Studio 的构建步骤来构建解决方案。
2.  创建运行器类型命令行的构建步骤。将命令可执行文件设置为`C:\Program Files\Microsoft Visual Studio 10.0\VSTSDB\Deploy\VSDBCMD.exe`. 将命令参数设置为`/a:Deploy /dd:+ /manifest:%system.teamcity.build.checkoutDir%\<PROJECT PATH>\sql\debug\<PROJECT NAME>.deploymanifest`。（请参阅[此处](http://msdn.microsoft.com/en-us/library/dd193283%28v=vs.100%29.aspx)了解 VSDBCMD.exe 参数）。

对于**SQL Server Data Tools**或**Visual Studio 2012/2013**提供的 SQL Server 数据库项目：

1.  创建运行器类型 Visual Studio 的构建步骤来构建解决方案。
2.  创建运行器类型命令行的构建步骤。将命令可执行文件设置为`C:\Program Files\Microsoft Visual Studio 10.0\Microsoft SQL Server Data Tools\sqlpackage.exe`. 有关 sqlpackage.exe 参数，请参见[此处](http://msdn.microsoft.com/en-us/library/hh550080%28v=vs.103%29.aspx)。这是一个将部署设置存储在 XML 文件中的示例（通过“发布”选项创建）：`/Action:Publish /SourceFile:%system.teamcity.build.checkoutDir%\<PROJECT PATH>\bin\Debug\<PROJECT NAME>.dacpac /Profile:%system.teamcity.build.checkoutDir%\<PATH TO PROJECT>\PublishSettings.xml`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-27T16:04:03.617

由于我的问题今天得到了投票，我正在重新审视我找到的答案。

我做了以下事情：

*   在我的构建中创建了一个部署步骤
*   将它指向我的 VS 数据库项目（.dbroj 文件）
*   输入的命令行参数如下： /t:Deploy /p:TargetDatabase=MyDBName /P:Configuration=%env.Configuration%

**2012 年 16 月 11 日编辑**：另一个赞成票，所以再次重访。自从我发布了这个，事情变得更清楚了。我最初在我的开发 PC 上运行 TeamCity。

当我把它移到服务器上时，我可以让数据库部署工作的唯一方法是在服务器上安装 Visual Studio，这很痛苦。

# html - 如何使用 CSS3 将两张图片相互移动？

> ID：11291256
> 
> 赞同：0
> 
> 时间：2012-07-02T09:48:52.053
> 
> 标签：html, css, css-animations

我正在使用 CSS3 为两个面部图像设置动画。它们水平对齐，并且应该相互靠近。[我当前的 jsfiddle](http://jsfiddle.net/centerwow/hfuGx/10/)由于某种原因无法正常工作。

它出什么问题了？

```
<div id="screen">
    <div id="animation-01">
        <div class="face_turn_around">
            <img id="imgR" src="http://www.centerwow.com/stackoverflow/face/face_right.png"
            />
            <img id="imgL" src="http://www.centerwow.com/stackoverflow/face/face_left.png"
            />
        </div> <!-- END face_turn_around -->
    </div> <!-- END animation-01-->
</div> <!-- end TSCREEN -->

​ #screen {
    background: blue;
    border:1px solid #eee;
    height:300px;
    width:200px;
    top:15px;
    left:15px;
    margin:0;
    overflow:hidden;
    padding:0;
    position:relative;
}
#imgL {
    position:absolute;
    margin-left:25px;
    margin-top:25px;
    width:30px;
}
#imgR {
    position:absolute;
    margin-right:25px;
    margin-top:25px;
    width:30px;
}
@-webkit-keyframes face_turn_left {
    from {
        -webkit-transform: translate(0px, 0px);
    }
    to {
        -webkit-transform: translate(50px, 0px);
    }
}
@-webkit-keyframes face_turn_right {
    from {
        -webkit-transform: translate(0px, 0px);
    }
    to {
        -webkit-transform: translate(50px, 100px);
    }
}
#animation-01 {
    position:relative;
    -webkit-animation-name:face_turn_left;
    -webkit-animation-name:face_turn_right;
    -webkit-animation-duration:10s;
    -webkit-animation-iteration-count:1;
    -webkit-animation-timing-unction:function:linear;
    -webkit-animation-delay:1s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:00:04.860

1.  `position:abs**oul**te`在`#imgL`并且`#imgR`应该是`position:abs**olu**te;`
2.  `#animation-01`需要`position:relative;`。否则，面将绝对相对于 定位`#screen`。

更新了小提琴（我将延迟更改为 1 秒，这样您就不必等待）：http: [//jsfiddle.net/hfuGx/7/](http://jsfiddle.net/hfuGx/7/)

当您想为两个图像制作单独的动画时，您需要将动画附加到`<img>`元素上，而不是父级上。您可以使用两个动画，或使用一个动画，其中仅设置`100%`(aka `to`)。

```
@-webkit-keyframes face_turn {
    to {left:50px;}
} 
```

目前，当您的动画结束时，元素会恢复到其原始状态。如果要保持最后一个状态，请使用以下[`animation-fill-mode`](https://developer.mozilla.org/en/CSS/animation-fill-mode)属性：

```
#imgL, #imgR {
    -webkit-animation-name: face_turn;
    -webkit-animation-duration: 10s;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-delay: 1s;
    -webkit-animation-fill-mode: forwards; /* <-- This*/
} 
```

小提琴：http: [//jsfiddle.net/hfuGx/14/](http://jsfiddle.net/hfuGx/14/)

# javascript - 按属性 jquery 查找元素

> ID：11291259
> 
> 赞同：0
> 
> 时间：2012-07-02T09:49:05.177
> 
> 标签：javascript, jquery

我有一个`div`并且我在其中插入一个`data-test`属性：

```
<div id="container">
    <div data-test="test"></div>
</div> 
```

现在我想用这个表达式找到内部 div：

```
alert($("#container").find("[data-test=test]").length); 
```

但这不起作用。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:53:09.297

尝试引用您的价值：

```
alert($("#container").find('[data-test="test"]').length); 
```

# action - 注销挂钩操作未执行？

> ID：11291262
> 
> 赞同：0
> 
> 时间：2012-07-02T09:49:10.850
> 
> 标签：action, hook, liferay, logout

我已经写了一个 Liferay 的行动钩子`pre-logout`。它在我的本地环境中运行良好，但是当我在服务器上部署时，它不起作用。

首先，在使用配置时该属性不会被覆盖`portal.properties`。尽管在主 Liferay 应用程序中添加了 portal-ext.properties 之后，我可以看到该属性被覆盖。但是在运行时`hook`，它不会被执行。

拼命寻找解决办法。

**环境：** Liferay 6.1.0 CE

# python - Python：比较具有不同结构的两个目录并列出新文件

> ID：11291263
> 
> 赞同：4
> 
> 时间：2012-07-02T09:49:12.260
> 
> 标签：python, file, filecompare

我有一个脚本，可以将文件从一个文件夹结构复制到另一个具有不同结构的文件夹。

```
ex. Folder 1
    c.txt
    d.txt
    subdir1
      a.txt
      b.txt 
```

脚本以这种格式将文件/目录从文件夹 1 复制到文件夹 2（文件夹 2 具有不同的结构）

```
Folder 2
   subdir2
     c.txt
     d.txt
   subdir1
     a.txt
     b.txt 
```

在文件夹 2 中，我可以创建自己的文件，例如 new1.txt、new2.txt。创建新文件后，文件夹 2 结构将如下所示：

```
Folder 2
   new1.txt
   new2.txt
   subdir2
     c.txt
     d.txt
   subdir1
     a.txt
     b.txt 
```

现在我需要比较 Folder1 和 Folder2 的目录内容。我正在使用 filecmp.dircmp 来比较目录内容。这两个文件夹上的 filecmp.dircmp 将为我提供 subdir2、subdir2/c.txt、subdir2/d.txt 作为新目录以及带有 new1.txt 和 new2.txt 的新文件。但实际上我只创建了 new1.txt 和 new2.txt 作为新文件，而其他文件只从一个文件夹复制到不同的文件夹。

**作为一个新文件，我只需要 new1.txt 和 new2.txt 结果。知道我该怎么做。我正在用python编写这段代码**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:50:06.007

蒂姆是对`os.walk`的，解决方案是：

```
>>> path = r'D:\DATA\FP12210\My Documents\Temp\Python'
>>> import os
>>> files1 = []
>>> for root, dirs, files in os.walk(os.path.join(path, 'Folder 1')):
    files1.extend(files)

>>> files1
['c.txt', 'd.txt', 'a.txt', 'b.txt']
>>> files2 = []
>>> for root, dirs, files in os.walk(os.path.join(path, 'Folder 2')):
    files2.extend(files)

>>> files2
['new1.txt', 'new2.txt', 'a.txt', 'b.txt', 'c.txt', 'd.txt'] 
```

然后你可以区分你的输出：

```
>>> print [f for f in files2 if f not in files1]
['new1.txt', 'new2.txt'] 
```

# mongodb - 什么是最好的没有用于用户配置文件管理的 sql db

> ID：11291266
> 
> 赞同：2
> 
> 时间：2012-07-02T09:49:15.457
> 
> 标签：mongodb, performance, cassandra, hbase, nosql

我需要管理用户配置文件。用户配置文件的数量可能非常大（5 亿配置文件） 系统要求是更新这些配置文件（可能每天、每周或根据请求一次），并始终在运行时读取它们。

哪个没有 sql 数据库最适合这个特性？mongodb、cassandra 还是 hbase？

我现在正在使用 mongodb（带分片），我在其中看到的问题之一是它具有全局锁，并且每次我进行大量写入时，我的读取性能都会下降。而且由于运行时组件总是应该读取一些配置文件，因此性能至关重要。

此外，也许我还应该使用一些缓存技术？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:49:52.083

1）性能调优是no-sql数据库的关键部分。

2）我已经使用 Cassandra 一年多了，由于写入是顺序的，它们像任何东西一样更快。我已经看到[sstableloader](http://www.shareitexploreit.blogspot.in/2012/02/cassandra-bulk-loader.html)和[BulkOutPutFrormat的性能更快](http://www.shareitexploreit.blogspot.in/2012/03/bulkloadto-cassandra-with-hadoop.html)

3）但是读取性能确实是一个问题，可以使用各种参数进行调整，还取决于您对数据建模的方式（数据库模式）。

4）但是如果你设计它时考虑到 Cassandra 的工作方式，读取速度也会更快。但是，如果您使用上述任何 Bulkloading 策略，您可能会在数据加载期间遇到相对较长的读取延迟

5）由于用户数据对于可用性而言是一种关键的数据，因此您应该考虑更大的复制因子。

# linux - 将输出重定向为其他用户

> ID：11291267
> 
> 赞同：6
> 
> 时间：2012-07-02T09:49:23.343
> 
> 标签：linux, pipe, sudo, redirectstandardoutput

为了执行某个命令，我需要将 sudo 作为不同的使用。我正在尝试使用 strace 并将其输出重定向到文件中以进行进一步分析。棘手的部分是，作为 sudo'ed 用户，我无权写入要保存文件的位置。（如果没有 sudo'ing，我无权执行该命令开始） .

那么如何以用户 A 的身份执行我的命令，并将其输出重定向为用户 B？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T11:56:04.683

尝试：

`sudo sh -c "command > output.txt"`

通过这种方式，您应该能够运行任何命令并在任何地方写入。

如果你真的需要，出于某种我不明白的原因，以用户 A 执行命令并以用户 B 编写，你可以执行以下操作：

`sudo -u A command | sudo -u B tee /somewhere > /dev/null`

其中 A 和 B 是您想要的用户。`> /dev/null`仅当不希望命令输出也被重定向到标准输出时才需要该部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T10:12:32.873

你可以使用`tee`它。程序读取`stdin`和写入一个或多个文件以及标准输出的输入：

```
sudo funny_command | sudo tee output_file > /dev/null 
```

/编辑：虽然你已经接受了另一个（在我看来是次等的）答案，但无论如何我都会完成这个：

上面的用例可以这样完成

```
sudo command | sudo tee output.txt > /dev/null
sudo -u A command | sudo -u B tee output.txt > /dev/null 
```

当然，您不必使用重定向`/dev/null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T11:14:00.573

也许我误解了最初的问题。

如果要捕获整个输出，`sudo strace foo`那么最简单的方法是先运行`script`。

如果你想捕捉`stderr`你`sudo strace foo`可以尝试`sudo strace foo 2> >(tee logfile)`。

如果您只想捕获的输出`strace`而不是 of`foo`那么您可以尝试`sudo strace -o /dev/fd/3 foo 3> >(tee logfile)`.

如果你不能使用`3> >`，那么我认为你仍然可以使用 fd 重定向来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T08:07:26.317

另一个避免管道回输的选项`/dev/zero`是

```
sudo command | sudo dd of=output.txt 
```

# java - 将二维数组中的“a”随机移动到指定位置，同时跟踪它通过每个点的时间

> ID：11291273
> 
> 赞同：0
> 
> 时间：2012-07-02T09:49:42.643
> 
> 标签：java, arrays, loops, random

我有这个二维数组（比如 double[10][10]），其中包含一些 1.0 和 10.0，其余的都在 0.0 秒内。我试图遍历这个数组以找到 1.0（起点），从那里随机“移动”它（使用 random.nextInt(4)）向上、向下、向左或向右直到它到达 10.0。我创建了一个 emptyArray 来跟踪它通过每个点移动了多少次（或者至少我认为我做到了）。编译时没有任何结果，但是当我尝试将其显示到框架中时没有得到任何结果。知道我哪里出错或失踪了吗？

```
{0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
{0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
{0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
{0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0}
{0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0}
{0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
{0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
{0.0,10.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
{0.0,10.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0}
{0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0} 
```

二维数组的样本。

```
 double[][] getPath(double[][] dataIn) {
    double[][] emptyArray = new double[dataIn.length][dataIn[0].length];
    double[][] drunkLoc = new double[dataIn.length][dataIn[0].length];
    for (int i = 0; i < dataIn.length; i++) {
        for (int j = 0; j < dataIn[i].length; j++) {
            if (dataIn[i][j] == 1.0) {

                double drunkHome = 10.0;
                drunkLoc[i][j] = dataIn[i][j];
                do {
                    int dir = getDirection();
                    switch(dir) {
                        case 0: 
                            if ((i > 0) && (j > 0)) {
                                drunkLoc[i][j] = drunkLoc[i-1][j];
                                double value = emptyArray[i][j];
                                emptyArray[i][j] = value + 1;
                                emptyArray[i][j] = (255<<24)  | (255<<16) | (255<<8) | 255;
                            } else {
                                break;
                            }
                            break;
                        case 1: 
                            if ((i > 0) && (j > 0)) {
                                drunkLoc[i][j] = drunkLoc[i][j-1];
                                double value = emptyArray[i][j];
                                emptyArray[i][j] = value + 1;
                                emptyArray[i][j] = (255<<24)  | (255<<16) | (255<<8) | 255;
                            } else {
                                break;
                            }
                            break;
                        case 2: 
                            if ((i > 0) && (j > 0)) {
                                drunkLoc[i][j] = drunkLoc[i+1][j];
                                double value = emptyArray[i][j];
                                emptyArray[i][j] = value + 1;
                                emptyArray[i][j] = (255<<24)  | (255<<16) | (255<<8) | 255;
                            } else {
                                break;
                            }
                            break;
                        case 3: 
                            if ((i > 0) && (j > 0)) {
                                drunkLoc[i][j] = drunkLoc[i][j+1];
                                double value = emptyArray[i][j];
                                emptyArray[i][j] = value + 1;
                                emptyArray[i][j] = (255<<24)  | (255<<16) | (255<<8) | 255;
                            } else {
                                break;
                            }
                            break;
                        default:
                    }
                } while (drunkLoc[i][j] != drunkHome);
            }
        }
    }
    return emptyArray;
} 
```

如果您需要更多说明，请告诉我。只有我的第二个帖子，所以还在学习我的提问技巧。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:45:38.133

好的，供您学习，这里有一些示例代码，它将为您提供您正在寻找的答案（在 penDimension x 的“棋盘”上从 (xpos,ypos) 到 (destX,destY) 的移动次数penDimension 大小：

```
 int penDimension = 10;
        int destX = 2;
        int destY = 2;
        int xpos = 5;
        int ypos = 5;

        // Add this to keep track of no moves through each square
        int[][] moveCounts = new int[penDimension][penDimension];

        Random r = new SecureRandom();
        long noMoves = 0;
        while (xpos != destX || ypos != destY) {
            switch (r.nextInt(4)) {
            case 0 : xpos++; break;
            case 1 : xpos--; break;
            case 2 : ypos++; break;
            case 3 : ypos--; break;
            }
            if (xpos < 0) xpos = 0;
            if (ypos < 0) ypos = 0;
            if (xpos > penDimension) xpos = penDimension;
            if (ypos > penDimension) ypos = penDimension;
            noMoves++;

            // Add this to keep track of no moves through each square
            moveCounts[ypos][xpos]++;

        }
        System.out.println("Number of moves: " + noMoves); 
```

除了执行 ++ 或 -- 然后检查边界，您还可以编写（在现实生活中可能会编写），例如：

```
xpos = Math.max(0, xpos - 1); 
```

我只是像上面那样写它，因为我认为它更容易理解。

除了编写“new SecureRandom()”之外，您还可以编写“new Random()”，这可能是您所学的。但是 SecureRandom 是一个质量更高（但速度更慢）的随机数生成器。一般来说，在编写反复生成大量随机数的“模拟”时，最好避免使用标准的 Random 类并使用更高质量的生成器。

# c - Readline (libedit) 非标准输入

> ID：11291278
> 
> 赞同：1
> 
> 时间：2012-07-02T09:50:11.147
> 
> 标签：c, autocomplete, lua, readline

我试图为游戏中的 lua 控制台制作自动完成和历史功能。有人建议我使用 readline 库（准确地说是它的 BSD 模拟 libedit，但它有类似的 apis 和 rl-code 构建，但标题略有变化），我选择[了带有历史补丁的 lua-rlcompleter 的](https://github.com/SirAnthony/lua-rlcompleter)lua 绑定。历史运作良好，但我对 readline 功能有一些问题。对于自动完成，我需要将 lua 字符串传递给 readline 函数，但默认情况下此函数从标准输入读取。我找到了将 rl_instream 更改为 FILE* 的[解决方案。](https://stackoverflow.com/a/5767774)为此，我创建了 tmpfile 并写入它。但它的工作原理很奇怪，以这种方式读取字符串时，readline 什么也不返回。

```
// This definitions is just example, not working code 
// it shows the environment
static FILE *tempfile = tmpfile();
rl_instream = tempfile;
rl_initialize();

static int lreadline(lua_State *L)
{
  const char *prompt = lua_tostring(L, 1);
  char *line;
  if(rl_instream == NULL)
     // In case we using stdin
     line = readline(prompt);
  else{
      fputs(prompt, tempfile);
      /* maybe I need a fseek here? It not helps though.
       * fseek(tempfile, -strlen(prompt), SEEK_CUR);
       */
      line = readline(NULL);
  }
  lua_pushstring(L, line);
  free(line);
  return 1;
} 
```

我不确定发生了什么，但认为它可能与 readline 函数文件中的读取位置有关。我试图阅读 libedit 的源代码，但为什么我的代码不能按预期工作是没有意义的。由于使用 Eclipse 调试共享库时出现问题，我无法对此进行调试，但计划使用纯 gdb，不确定它是否会有所帮助。

另外，也许我做错了，还有另一种简单的方法可以在基于 lua 的控制台模拟器中自动完成和历史记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:16:54.680

如果您仍然遇到问题`libedit`，请查看[`linenoise`](https://github.com/antirez/linenoise/)

# windows - 如何以编程方式关闭 Windows 8 应用程序？

> ID：11291295
> 
> 赞同：2
> 
> 时间：2012-07-02T09:51:01.640
> 
> 标签：windows, html, windows-8

我正在为 Windows 8 构建一个应用程序，并且需要能够使用操作以编程方式关闭它。例如，我的应用程序上的一个按钮。

我正在使用 HTML5 构建我的应用程序

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T21:00:13.237

以下事件处理程序对我有用……我实际上在全局应用栏中放置了一个退出图标……用户喜欢它！

```
 private void closeButton_Click(object sender, RoutedEventArgs e)
        {
            App.Current.Exit();
        } 
```

祝你好运！

上面的这个解决方案适用于 C#...当在不支持触摸屏的机器上使用 Windows 8 应用商店应用程序时特别有用（我们的用户在模拟自上而下滑动以关闭应用程序时遇到困难...其他用户正在运行 Windows 8 在 Mac VM 上，这使得 Alt + F4 很难）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T21:52:37.613

你不能。Windows 运行时 API（以及 Windows SDK 的现代子集）不提供终止应用程序的机制。

基于 Windows 运行时的应用程序的模型是允许系统或用户管理进程的生命周期。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T12:12:55.667

在 JS 中你可以这样做：

```
window.close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T20:26:35.873

您不能以编程方式关闭应用程序，这是系统的选择。

# iphone - iphone - 分发证书未显示在钥匙串访问中

> ID：11291296
> 
> 赞同：13
> 
> 时间：2012-07-02T09:51:03.900
> 
> 标签：iphone, ios, xcode

我需要上传一个应用程序。我已经构建到应用商店。当我下载分发证书时，我一直在关注演练并且卡在了位上。
![在此处输入图像描述](../Images/4f38f4236b0c6e225dccaf7790a20d47.png) 我的配置文件列在配置文件列下，我只是将其删除。当我下载证书时，我双击它，钥匙串访问打开，我的证书列在“证书”选项卡中，但不是“我的证书”选项卡，没有下拉菜单显示已创建私钥。有什么我想念的吗？我经历了 4 个不同的演练都说我需要双击证书。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2020-07-24T05:51:03.790

重新启动 XCode 应该可以解决问题。因为这个错误浪费了2个小时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T10:06:57.307

从到期日期来看，该证书是不久前创建的。

如果您使用的是不同的计算机，或者出于任何原因没有保存私钥，您将无法使用此证书。基本上，您有两个选择：

1.  找到用于创建此证书的原始私钥并将其导入钥匙串。
2.  只需撤销它并创建一个新的，不用担心，它不会影响您在 App Store 上部署的能力。只需记住也要重新创建分发配置文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-02T10:42:12.323

在 XCode Organizer 中，在 Library->Provisioning Profiles 下，尝试通过单击右下角的刷新图标来刷新列表。它将连接到您的开发者帐户并再次检索配置文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-09T13:56:36.147

如果您尚未手动添加证书，请尝试检查 Apple Developer 帐户。有时达到限制并且 XCode 没有注意到它:(

如果您创建并添加（手动）证书到钥匙串 - 只需重新启动 XCode 并重试。

# windows-phone-7 - 在 Windows 7.5 移动版上运行 Metro 应用程序

> ID：11291297
> 
> 赞同：0
> 
> 时间：2012-07-02T09:51:04.533
> 
> 标签：windows-phone-7, microsoft-metro

您好，我刚收到带有 Windows Mobile 7.5 的 HTC Mazaa 有没有可能在这款手机上运行 Windows Metro 应用程序？

问题可能听起来很愚蠢，但 Windows Mobile 7.x 具有类似的界面，Metro 应用程序应该可以在个人电脑、平板电脑和手机上运行。我想知道beetwen win mobile 7和8的相似之处只是界面还是核心也相似？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:07:21.007

不，这在当前的 Windows Phone 7.x 上是不可能的

Windows 8 和 Windows Phone 8 之间可能存在一些插值/代码共享，但即使那样，在另一个中运行为 1 编写的应用程序也是不可能的。

# javascript - 如何遍历 div 的子 div 并获取子 div 的 id？

> ID：11291300
> 
> 赞同：19
> 
> 时间：2012-07-02T09:51:06.537
> 
> 标签：javascript, jquery

我有一个带有 id 测试的 div

通过 foreach 循环，我在测试 div 中创建了一些内部 div。所以就变成了这样。

```
<div id="test">
<div id="test-1"></div>
<div id="test-2"></div>
<div id="test-3"></div>
<div id="test-4"></div>
</div> 
```

我在 javascript 函数中获取父 div id“test”。现在我想遍历测试 div 的内部 div（子 div），并一一获取每个 div 的 id 并通过 javascript 设置它们的样式。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-02T09:54:51.963

试试这个

```
var childDivs = document.getElementById('test').getElementsByTagName('div');

for( i=0; i< childDivs.length; i++ )
{
 var childDiv = childDivs[i];
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-02T09:54:36.033

您可以使用 jQuery .each() 函数循环遍历内部 div。以下示例执行此操作，并为每个内部 div 获取 id 属性。

```
$('#test').find('div').each(function(){
    var innerDivId = $(this).attr('id');
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-01T01:34:45.027

如果有人仍在寻找它，这就是解决方案

```
function getDivChildren(containerId, elementsId) {
    var div = document.getElementById(containerId),
        subDiv = div.getElementsByTagName('div'),
        myArray = [];

    for(var i = 0; i < subDiv.length; i++) {
        var elem = subDiv[i];
        if(elem.id.indexOf(elementsId) === 0) {
            myArray.push(elem.id);
        }
    }
    return myArray;
}
console.log(getDivChildren('test', 'test-')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:55:08.637

您可以使用

```
$('[id^=test-]') 
```

和[每个（）](http://api.jquery.com/each/)

这种方式例如：

```
$('[id^=test-]').each(function(){
    var atId = this.id;
    // do something with it
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T09:55:32.513

您正在尝试做的是遍历 div 的直接后代`#test`div；您可以使用`>`后代选择器和 jQuery`.each()`迭代器来执行此操作。您还可以使用 jQuery`.css()`和`.attr()`方法分别设置样式和检索 id。

```
$("#test > div").each(function(index){
    var id = $(this).attr("id");
    $(this).css(/* apply styles */);
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-02T09:57:00.773

使用 jQuery。

可以根据您的需要添加此代码：

```
$testDiv = ​$('div#test')​​​​​​​​​​​​.first();    
$('div', $testDiv).css("margin", '50px');​​​​ 
```

# javascript - 存储/检索 CSS 元素

> ID：11291305
> 
> 赞同：2
> 
> 时间：2012-07-02T09:51:33.307
> 
> 标签：javascript, jquery, html, css

我正在开发 Web 中的 FormDesigner：HTML5 + CSS3 + jQuery，借此我可以将（div、文本框等）拖到表单上并单独更改其 css 样式。

* * *

我的要求：**如何分别存储每个属性以便我可以轻松地独立检索？（通用、可重用、灵活）**

```
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#666666), to(#666666), color-stop(0, #333333)) 
```

* * *

我就是这样做的：（代码片段）

```
 cssObj[id] = {};
            cssObj[id].background = {};
            cssObj[id].background.webkitGradient = {};
            cssObj[id].background.webkitGradient.linear = {};
            cssObj[id].background.webkitGradient.linear.hPosStart = hPosStart;
            cssObj[id].background.webkitGradient.linear.vPosStart = vPosStart;
            cssObj[id].background.webkitGradient.linear.colorStart = colorStart;
            cssObj[id].background.webkitGradient.linear.hPosEnd = hPosEnd;
            cssObj[id].background.webkitGradient.linear.vPosEnd = vPosEnd;
            cssObj[id].background.webkitGradient.linear.colorEnd = colorEnd;
            cssObj[id].background.webkitGradient.linear.colorStop = {};
            cssObj[id].background.webkitGradient.linear.colorStop = colorStopArr; 
```

我`jSon`以某种方式存储它们，但不知何故，我认为应该有更先进或更有效的方法，例如拥有一个**Class/ Attributes/ Methods**，以便我可以以通用、可重用和灵活的方式存储它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:36:00.897

I think you're going the right way. But jQuery 1.8 introduces vendor prefix support, which maybe could help you.

I don't think you need to specify classes to dynamically modify the CSS of an element. However, CSS-class-definitions could be used in your export-format when saving the form. And with jQuery you should be able to pass in JSON objects in the `.css()`-method; that way to do not need specific code for each line.

> **Vendor-Prefixed CSS Properties**
> 
> The W3C had its heart in the right place when it came up with the idea to use vendor prefixes for CSS features that were not yet standardized, but it hasn’t resulted in a fairy-tale ending. Web developers are faced with the nightmare of including all the vendor-prefixed property names in stylesheets. jQuery 1.8 eases the pain a bit. We automatically take the non-prefixed property name and generate the prefix that is appropriate for the current browser, so you don’t have to. For example, on Chrome the jQuery call $("#myscroll").css("marquee-direction", "backwards") will set the CSS to -webkit-marquee-direction: backwards.
> 
> [http://blog.jquery.com/2012/06/22/jquery-1-8-beta-1-see-whats-coming-and-going/](http://blog.jquery.com/2012/06/22/jquery-1-8-beta-1-see-whats-coming-and-going/)

# linux - ulimit -r 返回的不同值

> ID：11291307
> 
> 赞同：5
> 
> 时间：2012-07-02T09:51:37.123
> 
> 标签：linux, security, real-time, account, limits

我在系统范围的 /etc/security/limits.conf 中添加了以下两行：

```
*       soft    rtprio      55
*       hard    rtprio      55 
```

系统重新启动后，根据我在机器上访问我的用户帐户的方式，我得到了两种不同的结果。

```
user@client# ssh user@server

user@server# ulimit -r
55 
```

然后我注销并再次以root身份登录

```
user@client# ssh root@server

root@server# su - user
user@server# ulimit -r
0 
```

我在 .bashrc 和任何其他地方都没有特殊设置，或者至少我认为是这样。

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:31:57.463

您必须查看 和 的 PAM`ssh`配置`su`。我想他们不一样。

例如在我的系统中：

```
$ grep limit /etc/pam.d/su
# Sets up user limits, please uncomment and read /etc/security/limits.conf
# (Replaces the use of /etc/limits in old login)
# session    required   pam_limits.so

$ grep limit /etc/pam.d/sshd
# access limits that are hard to express in sshd_config.
# Set up user limits from /etc/security/limits.conf.
session    required     pam_limits.so 
```

正如您在其中一种情况下看到的那样，该`pam_limits`行已被注释。我想你也有这样的东西。

# android - 如何在 sdcard 上存储有关文件的元数据？

> ID：11291308
> 
> 赞同：2
> 
> 时间：2012-07-02T09:51:37.943
> 
> 标签：android, metadata, storage

我打算创建一个录音机应用程序。我会将我的文件存储在 SD 卡上。我想存储一些关于它们的元数据。名称、描述等。我该怎么做？我正在考虑创建一个 SQLite 数据库，并将元数据存储在那里，但是如果从应用程序外部删除文件（SD 卡被移除），我该如何更新数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:55:26.647

我有一个类似的sineario。我所做的是在服务中使用[文件观察](http://developer.android.com/reference/android/os/FileObserver.html)器。该服务始终运行。您可以为文件观察者分配一个目录，并在发生某些事情时收到 onEvent()

# actionscript-3 - 我可以在动作脚本 3 中访问形状点吗？

> ID：11291309
> 
> 赞同：0
> 
> 时间：2012-07-02T09:51:50.350
> 
> 标签：actionscript-3, flash

我们在 Flash Professional 中绘制了一个形状（如云）。我们想在动作脚本 3 中移动形状坐标。这个想法是稍微随机摇晃点以创建运动错觉。像颤抖一样。

“点”是指包含形状的顶点，而不是光栅化像素。

在动作脚本 3 中可以吗？

如果不是 - 将形状点坐标从 Flash Professional 导出为某种简单格式 (XML) 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:06:29.723

没有办法为 Shape 获得这样的“点”，但使用 BitmapData 是可能的。有3个选项可供选择：

1.  如果你想从核心开始，你可以通过 getPixel() 和 setPixel() 创建这样的效果

2.  使用 BitmapData.pixelDissolve() 来实现它。

3.  最后最简单的方法是学习TransitionManager(fl.transitions)。

# java - Java 属性 - 如何创建动态属性

> ID：11291315
> 
> 赞同：0
> 
> 时间：2012-07-02T09:52:22.593
> 
> 标签：java, dynamic, properties

我正在尝试以格式创建 Java 属性文件

```
api.base=http://example.com/api
api.get_posts=<dynamic_value_for_api_base>/get_posts 
```

我不太确定它是否可能，但我之前肯定见过它（尽管它可能是使用 Ant 完成的）。在这种情况下，我可以在属性文件中做些什么，而不必在 Java 中以编程方式进行吗？

谢谢斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:55:35.183

在 Java 中，您可以拥有自己的属性文件。您也可以在运行时修改它们（这似乎不是您所追求的，但我认为知道它很方便）。您可以查看[此](http://www.mkyong.com/java/java-properties-file-examples/)链接以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:56:54.797

除了通过代码编辑文件之外，没有真正的方法可以在文件中动态更改它。

我认为最好只放：

```
api.get_posts=get_posts 
```

以及您将在代码本身中添加的动态部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:01:27.870

您会看到的是 ant 或 maven 过滤器。可以使用它在构建时设置变量。

您所说的不会发生在资源加载器中，它们会在没有代码的情况下读取属性文件。

此外，当然，如果您正在编写 java 来读取属性以实现模式匹配以支持这一点。

通常没有人打扰，因为在构建时使用过滤器和 mvn 或 ant 更容易，或者只编写代码不需要冗余配置块，这些配置块将受益于动态内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:04:40.103

Struts 中有一些方法可以做到这一点。我相信它在 ActionMessage 类中。我们自己编写了它，它可以很容易地连接到一个属性文件对象：

```
public static String addCustomText(String message, List values) {
    if (CollectionUtils.isEmpty(values)) {
        return message;
    }
    String temp = message;
    for (int i = 0; i < values.size(); i++) {
        temp = StringUtils.replace(temp, "{" + i + "}", StringUtils.trimToEmpty((String) values.get(i)));
    }
    return temp;
} 
```

因此，您可以编写一个属性文件访问器，然后使用此方法换出 {0} 等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-01T10:35:23.937

如果您正在寻找一种方法来覆盖属性文件中存在的属性，例如属性名称 = 属性值。

您可以通过在运行时覆盖文件本身来覆盖此属性。

这意味着先前存在的文件被完全覆盖，而这个新文件将取而代之。

因此，以前可能存在的任何属性都不再存在。因此，在执行此操作时需要注意一些事项。看一下这个，看看这是[如何实现的 我如何创建一个文件并用 Java 写入它？](https://stackoverflow.com/questions/2885173/how-do-i-create-a-file-and-write-to-it-in-java?rq=1)

# javascript - 访问对象属性内的变量

> ID：11291323
> 
> 赞同：6
> 
> 时间：2012-07-02T09:52:41.420
> 
> 标签：javascript, object, scope

所以我遇到了一个问题。我有这个对象叫做`myTree`. 该对象具有属性。其中一个属性包含这样的方法：

```
prep: function (variable) {
    /* some code */
} 
```

在那个方法中有一个数组`myarray`，我想知道，是否可以访问该数组的内容，如果可以，我会怎么做。

我在 jsFiddle 上做了一个演示，在 JavaScript 窗口的最后你可以看到我正在警告包含的对象`prep`。`myarray`

[http://jsfiddle.net/Wp7Xh/1/](http://jsfiddle.net/Wp7Xh/1/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T09:56:52.580

JavaScript 变量是函数范围的。不可能从外部范围访问属于内部范围的变量（即*“函数” ）。*

如果您想要这种访问，则必须使相应的变量成为外部范围的一部分。

```
var myTree = function() {
  var myarray = [];

  this.prep = function (variable) {
    myarray.push(variable);
  };
} 
```

在您的场景中，您有嵌套对象，它非常相似：

```
var myTree = {
  myarray: [],
  prep: function (variable) {
    this.myarray.push(variable);
  }
} 
```

唯一的区别是`this`关键字的使用。

当您通过*对象字面*量语法 ( `obj = {prop: value}`) 而不是通过构造函数 ( `function Obj(value) { this.prop = value; }; obj = new Obj(value);`) 定义对象时，默认情况下所有定义的属性都是“公共的”。

当您在该对象上调用函数时，`this`将指向相应的对象实例。

从外部访问“内部范围”变量仍然是不可能的。没有办法解决这个问题。

一般来说：您可以访问您构造的对象的属性。您永远不能访问函数局部变量（嵌套函数内部除外）。

# c# - 在运行时枚举类的事件

> ID：11291325
> 
> 赞同：1
> 
> 时间：2012-07-02T09:52:56.397
> 
> 标签：c#, events

我有一个抽象类`Capability`，它模拟物理设备的每个功能。然后我有子类，例如`InputSwitch`和`TemperatureSensor`，每个子类都可以触发不同的事件。

`InputSwitch`相当简单——当按下物理开关时，代表它的对象会引发事件`Triggered`。

`TemperatureSensor`稍微复杂一点，因为它有两个事件 -`TemperatureOK`和`TemperatureAlarm`.

不仅仅是这两个子类，每个子类都可以引发不同的事件。在运行时添加的任何子类的实例也可能更多。

最终用户需要能够指定触发这些事件时会发生什么（如果有的话），因此基本上我正在考虑允许用户浏览所有`Capability`实例中可能发生的事件。每个功能当前都存储在一个`List<Capability>`.

有没有办法枚举可用事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:03:34.807

我建议您维护一个以 Capability 对象的具体类型为键的字典，其中包含适用于每种具体类型的事件列表：

例如一个实例`ConcurrentDictionary<Type, EventInfo[]>`

您将在启动时仅填充一次，调用`Type.GetEvents`系统中使用的每个具体 Capability 类型（或者如果可以通过某种插件机制在运行时添加 Capability 类型，则将每个插件类型的事件添加到字典中，因为插件是挂号的）。

此后，无论何时从您的 中选择 Capability `List<Capability>`，您都可以在字典中查找该设备对象的可用事件。

# java - 使用 Spring JDBC 使用 CLOB 数据执行 Oracle 函数

> ID：11291332
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:53:11.723
> 
> 标签：java, oracle, spring, clob, spring-jdbc

我有 oracle 表之类的，

```
CREATE TABLE T_TEST(
INFO1 VARCHAR2(2000 CHAR),
INFO2 VARCHAR2(2000 CHAR),
INFO CLOB) 
```

为了将数据插入此表，我有一个返回空 clob 的函数

```
function Insert_TEST(in_infotext1 in T_TEST.info1%type := null,
                     in_infotext2 in T_TEST.info2%type := null,)
    return T_TEST.info%type
is
    l_info T_TEST.info%type;
begin
    insert into T_TEST
            ( INFO1,
              INFO2,
              info,)
     values ( in_infotext1,
              in_infotext2,
              empty_clob())
     returning info into l_info;
     return l_info;
  end; 
```

要调用此函数，我使用以下 sql，

```
declare
    myinfo clob;
begin
    myinfo := Insert_TEST('Info1', 'Info2');
    DBMS_LOB.OPEN(myinfo, DBMS_LOB.LOB_READWRITE);
    DBMS_LOB.WRITE(myinfo,14,1,'My Information');
    DBMS_LOB.CLOSE(myinfo);
    COMMIT;
end; 
```

这个 sql 在 SQL Developer 中完美运行，但是当我尝试使用 org.springframework.jdbc.core.JdbcTemplate 执行这个 sql 时，我的程序进入了无限循环。我的Java编码如下

```
OracleConnectionPoolDataSource dataSource = new OracleConnectionPoolDataSource();
        dataSource.setURL("jdbc:oracle:thin:@localhost:1521:orcl");
        dataSource.setUser("test");
        dataSource.setPassword("test");

        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);

        String query =

                "declare "+
                "  myinfo clob;                                                           "+
                "begin                                                                    "+
                "    myinfo := Insert_TEST('Info1', 'Info2');"+
                "    DBMS_LOB.OPEN(myinfo, DBMS_LOB.LOB_READWRITE);                       "+
                "    DBMS_LOB.WRITE(myinfo,14,1,'My Information');                        "+
                "    DBMS_LOB.CLOSE(myinfo);                                              "+
                "    COMMIT;                                                              "+
                "end;";

        jdbcTemplate.execute(query); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:07:21.673

请在此处正确使用 Spring Jdbc。
您应该使用 MapSqlParameterSource 来添加参数。
此外，您应该使用 SimpleJdbcCall 并使用“widthProcedureName”来设置要使用的存储过程。
在[oVirt](http://www.ovirt.org)，我们使用文本（在 Oracle 中是 pgsql 相当于 clob）没有问题。
例如，您可以查看我们的代码（通过 git 克隆它） - 查看 ovirt-engine/backend/manager/modules/dal/src/main/java/org/ovirt/engine/core/dao/AsyncTaskDAODbFacadeImpl.java作为使用 Spring JDBC 和 pgsql 文本类型的示例（正如我所说，相当于 Oracle 中的 clob）。

# c# - MVC3 自定义 WebViewPage 中的编译错误

> ID：11291339
> 
> 赞同：2
> 
> 时间：2012-07-02T09:53:46.113
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我想`WebViewPage`在 MVC3 中使用我自己的，当我创建一个具有特定名称的抽象类并`WebViewPage`在 Web.config 中将其更改为我自己的类型时，我收到此错误：

```
 Compiler Error Message: CS0308: The non-generic type 'Aya.Moj.Web.Controllers.MojWebViewPage' cannot be used with type arguments 
```

自定义`WebViewPage`代码：

```
namespace Aya.Moj.Web.Controllers
{
    public abstract class MojWebViewPage : WebViewPage
    {
        //just for test
        public string Boo { set; get; }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T09:59:35.530

您应该继承 from`WebViewPage<TModel>`因为您要将模型传递给 this`WebViewPage` 然后您`WebViewPage`将如下所示：

```
namespace Aya.Moj.Web.Controllers
{
    public abstract class MojWebViewPage<T> : WebViewPage<T>
    {
        //just for test
        public string Boo { set; get; }
    }
} 
```

# iphone - iphone：从相机拍摄的图像改变方向

> ID：11291344
> 
> 赞同：2
> 
> 时间：2012-07-02T09:54:06.350
> 
> 标签：iphone, objective-c, ios5

我制作了一个 iphone 应用程序来从相机捕获图像并将该图像设置在下一个视图中。但问题是图像被旋转了。即风景图像变成potraite，protraite 图像变成风景。我参考了许多代码，但无法获得解决方案。

我的代码是：

```
- (void)btnCapturePressed
{
 if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {

            picker=[[UIImagePickerController alloc] init];
            picker.delegate=self;

            [picker setAllowsEditing:YES];

            picker.sourceType=UIImagePickerControllerSourceTypeCamera;
            //[self.navigationController pushViewController:(UIViewController *)ipc animated:YES];
            [self presentModalViewController:picker animated:YES];
            [picker release];
      }
}

-(void) imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo :(NSDictionary *)info
{
           UIImage *imageToScale=[info objectForKey:UIImagePickerControllerOriginalImage];

            imgView = [[UIImageView alloc] initWithImage:imageToScale];

            [picker presentModalViewController:cropper animated:YES];
} 
```

我也参考了[链接](https://stackoverflow.com/questions/9324130/iphoneimage-captured-from-camera-rotate-90-degree-automatically)。有同样的问题，但找不到解决方案。

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:38:00.747

因此，在图像时存储设备的方向并将其作为参数传递给下面的方法这里只需给方法命名并传递参数`orientation`

```
switch (orientation) {
            case UIDeviceOrientationPortrait:
                [featureLayer setAffineTransform:CGAffineTransformMakeRotation(DegreesToRadians(0.))];
                break;
            case UIDeviceOrientationPortraitUpsideDown:
                [featureLayer setAffineTransform:CGAffineTransformMakeRotation(DegreesToRadians(180.))];
                break;
            case UIDeviceOrientationLandscapeLeft:
                [featureLayer setAffineTransform:CGAffineTransformMakeRotation(DegreesToRadians(90.))];
                break;
            case UIDeviceOrientationLandscapeRight:
                [featureLayer setAffineTransform:CGAffineTransformMakeRotation(DegreesToRadians(-90.))];
                break;
            case UIDeviceOrientationFaceUp:
            case UIDeviceOrientationFaceDown:
            default:
                break; // leave the layer in its last known orientation
        } 
```

我在这里使用的宏`DegreesToRadians()`如下

```
static CGFloat DegreesToRadians(CGFloat degrees) {return degrees * M_PI / 180;}; 
```

这肯定会奏效。

快乐编码:)

**编辑**

如果上面的代码不能正常工作，那么使用这个

```
@interface UIImage (RotationMethods)
- (UIImage *)imageRotatedByDegrees:(CGFloat)degrees;
@end

@implementation UIImage (RotationMethods)

- (UIImage *)imageRotatedByDegrees:(CGFloat)degrees 
{   
    // calculate the size of the rotated view's containing box for our drawing space
    UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0,0,self.size.width, self.size.height)];
    CGAffineTransform t = CGAffineTransformMakeRotation(DegreesToRadians(degrees));
    rotatedViewBox.transform = t;
    CGSize rotatedSize = rotatedViewBox.frame.size;

    // Create the bitmap context
    UIGraphicsBeginImageContext(rotatedSize);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

    //   // Rotate the image context
    CGContextRotateCTM(bitmap, DegreesToRadians(degrees));

    // Now, draw the rotated/scaled image into the context
    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-self.size.width / 2, -self.size.height / 2, self.size.width, self.size.height), [self CGImage]);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;

}
@end 
```

然后调用上面的函数如下

```
switch (orientation) {
        case UIDeviceOrientationPortrait:
            image = [image imageRotatedByDegrees:0];
            break;
        case UIDeviceOrientationPortraitUpsideDown:
            image = [image imageRotatedByDegrees:180];
            break;
        case UIDeviceOrientationLandscapeLeft:
            image = [image imageRotatedByDegrees:-90];
            break;
        case UIDeviceOrientationLandscapeRight:
            image = [image imageRotatedByDegrees:90];
            break;
        case UIDeviceOrientationFaceUp:
        case UIDeviceOrientationFaceDown:
        default:
            break; // leave the layer in its last known orientation
    } 
```

如果图像不是所需的方向，则将 90 添加到上述所有`imageRotatedByDegrees`参数（即，如果它是 0，那么它将是 0+90）或根据您的需要。

**编辑 1**

```
UIDeviceOrientation curDeviceOrientation = [[UIDevice currentDevice] orientation]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-24T06:19:10.993

我一直在努力解决这个问题，但找到了一个更简单的解决方案：

```
 AVCaptureConnection *vc = [self.snapper connectionWithMediaType:AVMediaTypeVideo];

  // THIS IS THE KEY LINE!!!!!!!!!!!!!!!!!!!!!
  [vc setVideoOrientation:[self interfaceToVideoOrientation]];

  [self.snapper captureStillImageAsynchronouslyFromConnection:vc
                                            completionHandler:
   ^(CMSampleBufferRef buf, NSError *err) {
     NSData* data = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:buf];
     UIImage* im = [UIImage imageWithData:data];
     // Do something with the image.
  }];

- (AVCaptureVideoOrientation)interfaceToVideoOrientation
{
  switch ([UIApplication sharedApplication].statusBarOrientation)
  {
    case UIInterfaceOrientationPortrait:
      return AVCaptureVideoOrientationPortrait;
    case UIInterfaceOrientationPortraitUpsideDown:
      return AVCaptureVideoOrientationPortraitUpsideDown;
    case UIInterfaceOrientationLandscapeRight:
      return AVCaptureVideoOrientationLandscapeRight;
    case UIInterfaceOrientationLandscapeLeft:
      return AVCaptureVideoOrientationLandscapeLeft;
    default:
      return AVCaptureVideoOrientationPortrait;
  }
} 
```

在捕获之前设置视频方向现在解决了我的图像以错误方向出现的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T10:00:48.933

我参考了苹果论坛上的讨论（[https://discussions.apple.com/thread/1537011?start=0&tstart=0](https://discussions.apple.com/thread/1537011?start=0&tstart=0)）并找到了以下解决方案；它对我来说非常有效；我只是复制粘贴它，它就像宝石一样工作；

```
-(UIImage *) scaleAndRotateImage(UIImage *)image
{
 int kMaxResolution = 320; // Or whatever

 CGImageRef imgRef = image.CGImage;

 CGFloat width = CGImageGetWidth(imgRef);
 CGFloat height = CGImageGetHeight(imgRef);

 CGAffineTransform transform = CGAffineTransformIdentity;
 CGRect bounds = CGRectMake(0, 0, width, height);
 if (width > kMaxResolution || height > kMaxResolution) {
 CGFloat ratio = width/height;
 if (ratio > 1) {
 bounds.size.width = kMaxResolution;
 bounds.size.height = bounds.size.width / ratio;
 }
 else {
 bounds.size.height = kMaxResolution;
 bounds.size.width = bounds.size.height * ratio;
 }
 }

 CGFloat scaleRatio = bounds.size.width / width;
 CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
 CGFloat boundHeight;
 UIImageOrientation orient = image.imageOrientation;
 switch(orient) {

 case UIImageOrientationUp: //EXIF = 1
 transform = CGAffineTransformIdentity;
 break;

 case UIImageOrientationUpMirrored: //EXIF = 2
 transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
 transform = CGAffineTransformScale(transform, -1.0, 1.0);
 break;

 case UIImageOrientationDown: //EXIF = 3
 transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
 transform = CGAffineTransformRotate(transform, M_PI);
 break;

 case UIImageOrientationDownMirrored: //EXIF = 4
 transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
 transform = CGAffineTransformScale(transform, 1.0, -1.0);
 break;

 case UIImageOrientationLeftMirrored: //EXIF = 5
 boundHeight = bounds.size.height;
 bounds.size.height = bounds.size.width;
 bounds.size.width = boundHeight;
 transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
 transform = CGAffineTransformScale(transform, -1.0, 1.0);
 transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
 break;

 case UIImageOrientationLeft: //EXIF = 6
 boundHeight = bounds.size.height;
 bounds.size.height = bounds.size.width;
 bounds.size.width = boundHeight;
 transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
 transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
 break;

 case UIImageOrientationRightMirrored: //EXIF = 7
 boundHeight = bounds.size.height;
 bounds.size.height = bounds.size.width;
 bounds.size.width = boundHeight;
 transform = CGAffineTransformMakeScale(-1.0, 1.0);
 transform = CGAffineTransformRotate(transform, M_PI / 2.0);
 break;

 case UIImageOrientationRight: //EXIF = 8
 boundHeight = bounds.size.height;
 bounds.size.height = bounds.size.width;
 bounds.size.width = boundHeight;
 transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
 transform = CGAffineTransformRotate(transform, M_PI / 2.0);
 break;

 default:
 [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

 }

 UIGraphicsBeginImageContext(bounds.size);

 CGContextRef context = UIGraphicsGetCurrentContext();

 if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
 CGContextScaleCTM(context, -scaleRatio, scaleRatio);
 CGContextTranslateCTM(context, -height, 0);
 }
 else {
 CGContextScaleCTM(context, scaleRatio, -scaleRatio);
 CGContextTranslateCTM(context, 0, -height);
 }

 CGContextConcatCTM(context, transform);

 CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
 UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext();

 return imageCopy;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-02T09:37:15.047

我有同样的问题，这对我有帮助。希望它也能帮助你。我花了 2 分钟来解决这个问题。[http://xcodetipss.blogspot.com/2012/04/image-rotated-when-taken-from-camera.html](http://xcodetipss.blogspot.com/2012/04/image-rotated-when-taken-from-camera.html)

# java - smartgwt - 将动态表单中的列留空

> ID：11291348
> 
> 赞同：3
> 
> 时间：2012-07-02T09:54:16.560
> 
> 标签：java, gwt, smartgwt

我在 smartgwt 中创建了一个 3 列的动态表单。现在我想要完成的是将表单元素放在第一列和最后一列中。有什么原因吗？

PS：我已经设置`form.setTitleOrientation(TitleOrientation.TOP);`了，所以只有 3 列，而不是 6 列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:33:40.197

您必须使用 startRow 和 endRow，因此您的第一个 forItem 将具有 setStartRow(true) 和 setEndRow(false) 您的第三个 formitem 将在中间放置一个 spacerItem.youFormSetItems(yourFirstItem它开始一行，一个新的 SpacerItem 实例，你的第二个项目结束一行）；

# c# - 控制台应用程序 C# 的关闭事件

> ID：11291352
> 
> 赞同：7
> 
> 时间：2012-07-02T09:54:29.293
> 
> 标签：c#, events, .net-4.0, event-handling, console-application

我如何知道我的 C# 控制台应用程序何时停止？有什么活动或类似的吗？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-02T09:57:02.353

使用应用程序域的[ProcessExit](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit.aspx)事件

```
 class Program
    {
        static void Main(string[] args)
        {
            AppDomain.CurrentDomain.ProcessExit += new EventHandler(CurrentDomain_ProcessExit);           

        }

        static void CurrentDomain_ProcessExit(object sender, EventArgs e)
        {
            Console.WriteLine("exit");
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T10:03:22.630

处理事件`System.Console.CancelKeyPress`可能会对您有所帮助。

[MSDN 解释](http://msdn.microsoft.com/en-us/library/system.console.cancelkeypress.aspx)了如何处理此事件以及处理此事件时需要注意的其他事项，摘录：

> 此事件与 System.ConsoleCancelEventHandler 和 System.ConsoleCancelEventArgs 结合使用。CancelKeyPress 事件使控制台应用程序能够拦截 CTRL+C 信号，以便应用程序可以决定是继续执行还是终止。
> 
> 使用此事件显式控制您的应用程序如何响应 CTRL+C 信号。如果您的应用程序有简单的要求，您可以使用 TreatControlCAsInput 属性而不是此事件。
> 
> 此事件的事件处理程序在线程池线程上执行。

# java - JScrollPane 滚动条在 JEditorPane.setText() 上跳下

> ID：11291353
> 
> 赞同：2
> 
> 时间：2012-07-02T09:54:30.157
> 
> 标签：java, swing, jscrollpane, jeditorpane

每次（第一次除外）我在 JEditorPane 滚动条中设置的文本都会跳到 JEditorPane 的底部。有没有办法避免这种情况？我尝试的一种方法是在 setText() 之后使用 setCaretPosition(0)。它有效，但不完全是我需要的。滚动条向下跳，然后向上跳。有没有办法避免 settext() 处滚动条的任何移动？

我的代码：

```
package test;

import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JEditorPane;
import javax.swing.JScrollPane;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;

public class Test extends JApplet implements  HyperlinkListener {

    JEditorPane dataDisplayer = new JEditorPane();

    public void init() {
        ataDisplayer.setEditable(false);
        dataDisplayer.add(new JButton());
        dataDisplayer.setContentType("text/html");   
        JScrollPane jsp = new JScrollPane(dataDisplayer);
        dataDisplayer.setText("<a href=''>Change Text</a><br><br><br><br><br><br><br><br><br><br>bla");
        this.dataDisplayer.addHyperlinkListener(this);
        setContentPane(jsp);
    }

    @Override
    public void hyperlinkUpdate(HyperlinkEvent arg0) {
        dataDisplayer.setText("<a href=''>Change Text</a><br><br><br><br><br><br><br><br><br><br>bla bla");

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T10:06:49.897

有不同的方法可以解决这个问题。一种是简单地避免插入符号可见性调整，如下所示：

```
import java.awt.Rectangle;
import javax.swing.JButton;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;
import javax.swing.text.DefaultCaret;

public class TestEditorPane implements HyperlinkListener {

    private final class MyCaret extends DefaultCaret {

        @Override
        protected void adjustVisibility(Rectangle nloc) {

        }

    }

    JEditorPane dataDisplayer = new JEditorPane();
    private MyCaret caret;

    @Override
    public void hyperlinkUpdate(HyperlinkEvent arg0) {
        dataDisplayer.setText("<a href=''>Change Text</a><br><br><br><br><br><br><br><br><br><br>bla bla");

    }

    public void init() {
        JFrame frame = new JFrame();
        dataDisplayer.setEditable(false);
        caret = new MyCaret();
        dataDisplayer.setCaret(caret);
        dataDisplayer.add(new JButton());
        dataDisplayer.setContentType("text/html");
        JScrollPane jsp = new JScrollPane(dataDisplayer);
        dataDisplayer.setText("<a href=''>Change Text</a><br><br><br><br><br><br><br><br><br><br>bla");
        this.dataDisplayer.addHyperlinkListener(this);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(jsp);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestEditorPane().init();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-08T19:41:02.630

经过 50 分钟的绝望，以下解决了我的问题：

```
JEditorPane.grabFocus();
JEditorPane.setCaretPosition(20); 
```

# java - Hibernate：无效的参数索引

> ID：11291357
> 
> 赞同：0
> 
> 时间：2012-07-02T09:54:40.910
> 
> 标签：java, database, hibernate

我正在尝试使用休眠更新我的数据库表，但是当我尝试这样做时，我收到以下错误：

```
10:46:01,034 DEBUG LongType:80 - binding '19991' to parameter: 57
10:46:01,034  INFO LongType:91 - could not bind value '19991' to parameter: 57; Invalid parameter index 57.
10:46:01,049  WARN JDBCExceptionReporter:71 - SQL Error: 0, SQLState: 07009
10:46:01,049 ERROR JDBCExceptionReporter:72 - Invalid parameter index 57.
10:46:01,049 ERROR AbstractFlushingEventListener:301 - Could not synchronize database state with session 
```

它试图插入的这个值`19991`已经在数据库中，所以我希望它已经覆盖那里的值，这是完整的错误

```
org.hibernate.exception.SQLGrammarException: could not update: [com.project.class.dataobject.PSDBusinessAssociate#18962]
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2360)
at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2242)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2542)
at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:92)
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:248)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:232)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:655)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:709)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:678)
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:321)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:116)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:635)
at com.project.class.service.dwr.BusinessAssociateFormService$$EnhancerByCGLIB$$ff37dc8d.updateBusinessAssociate(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.directwebremoting.impl.DefaultRemoter$1.doFilter(DefaultRemoter.java:740)
at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:744)
at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:593)
at org.directwebremoting.dwrp.BaseCallHandler.handle(BaseCallHandler.java:90)
at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:120)
at org.directwebremoting.servlet.DwrServlet.doPost(DwrServlet.java:141)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:265)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:72)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:124)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.util.FilterChainProxy.doFilter(FilterChainProxy.java:149)
at org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:228)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:212)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:818)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:624)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:445)
at java.lang.Thread.run(Thread.java:619)
Caused by: java.sql.SQLException: Invalid parameter index 57.
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.getParameter(JtdsPreparedStatement.java:255)
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.setParameter(JtdsPreparedStatement.java:326)
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.setLong(JtdsPreparedStatement.java:509)
at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setLong(NewProxyPreparedStatement.java:703)
at org.hibernate.type.LongType.set(LongType.java:42)
at org.hibernate.type.NullableType.nullSafeSet(NullableType.java:83)
at org.hibernate.type.NullableType.nullSafeSet(NullableType.java:60)
at org.hibernate.type.ManyToOneType.nullSafeSet(ManyToOneType.java:78)
at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:1932)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2306)
... 57 more 
```

这就是我将文档映射到数据库列的方式

```
@ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@ForeignKey(name = "fk_BusinessAssociate_Document_fitAndProperQuestionnaireId")
@JoinColumn(name = "fitAndProperQuestionnaireId")
@PropertyPresentation(type="documentuploadfield")
private Document fitAndProperQuestionnaire; 
```

表和列的命名也都是正确的，所以我不知道出了什么问题！如果需要添加更多代码，请询问，我会添加它

**编辑**

询问：

```
update BusinessAssociate set version=?, modifiedBy=?, address1=?, streetTypeId=?, address2=?, address3=?, city=?, stateCode=?, state=?, postCode=?, countryId=?, provinceId=?, islandId=?, percentOwnership=?, comment=?, companyId=?, businessTitleId=?, firstName=?, surname=?, primaryAssociate=?, nationality=?, socialSecurityNumber=?, associateId=?, middleName=?, jobTitle=?, gender=?, previousNames=?, priorAddress1=?, priorStreetTypeId=?, priorAddress2=?, priorAddress3=?, priorCity=?, priorStateCode=?, priorState=?, priorPostCode=?, priorCountryId=?, priorProvinceId=?, priorIslandId=?, workPhoneCountryCode=?, workPhoneCityCode=?, workPhone=?, homePhoneCountryCode=?, homePhoneCityCode=?, homePhone=?, mobilePhoneCountryCode=?, mobilePhoneOperatorCode=?, mobilePhone=?, dateOfBirth=?, cityOfBirth=?, countryOfBirthId=?, proofOfResidentialAddressId=?, addressIdentificationTypeId=?, criminalCheckId=?, fitAndProperQuestionnaireId=? where businessAssociateId=? and version=? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:24:13.767

好吧，显然有些地方出了问题，您应该看到添加更多代码，以便我们尝试提供帮助。
此外，您是否将 hibernate.cfg.xml 中的 show_sql 参数设置为 true？
这可以帮助您并查看休眠生成的查询，也许（您将不得不计算）您将能够看到发生了什么
如果您的参数数量无效，不确定是否会出现查询 - 这个是你需要检查的东西。
此外，您可以更改应用程序中的 log4j 设置，以调试“org.hibernate”下的所有代码。
我认为通过更好的日志记录，您将能够理解您的问题，如果没有 - 肯定应该向我们公开更多代码，以便我们提供帮助。

# iphone - 如何在 iOS 中加载更大尺寸的 PDF？

> ID：11291360
> 
> 赞同：3
> 
> 时间：2012-07-02T09:54:50.660
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我想在我的应用程序中显示 PDF（书籍），我正在获取 PDF 的路径并在 WEBVIEW 中打开它，它非常适用于小 PDF，但不适用于较大的 PDF。

每当我传递任何 LARGER SIZE PDF 的 URL 时，UI 都会冻结。

你能建议我更好的方法吗，这样我就可以在不花很多时间的情况下展示 PDF。

> 这是我正在使用的代码>>

```
 pdfURL = [NSURL URLWithString:@"URL GOES HERE"];
[webViewForPDF loadRequest:[NSURLRequest requestWithURL:pdfURL]]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:29:55.783

如果您的文件位于或下载到本地文件系统中，您可能还想查看使用 UIDocumentInteractionController 打开和查看所述文件。在此处阅读所有相关信息：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009304](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009304)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:13:57.100

在 API 文档中有一种加载 PDF（使用 Quartz）的方法：CGPDFDocument 是您需要的对象，而 CGPDFDocumentCreateWithURL 可能是您正在寻找的构造函数。

以下是一些有关如何执行此操作的示例：[这里](http://developer.apple.com/mac/library/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html#//apple_ref/doc/uid/TP30001066-CH214-TPXREF109)

看看[这个](http://iosguy.com/2010/09/04/presenting-pdf-files-by-yourself/)链接

# java - Portlet 中的 URL

> ID：11291372
> 
> 赞同：1
> 
> 时间：2012-07-02T09:55:31.070
> 
> 标签：java, servlets, portlet

大家好，您能告诉我有关 portlet 中的 URL 的信息吗？例如，如果我有`myPortlet.java`什么办法可以从 html 表单中调用它？我必须写行

```
<portlet-class>test.myPortlet</portlet-class> 
```

在`portlet.xml`.

我明白我要使用的形式`actionURL`但是如何构建它？
另一个问题：另一个java类在portlet中调用就像在servlet中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:38:16.220

根据您希望 portlet 做什么，您可以使用不同的 URL：

*   要触发对`processAction()`方法的调用（从而更改 portlet 的状态），请使用操作 URL。在您的 portlet 视图中包含的 JSP 中，您可以通过调用`<portlet:actionURL />`. 在 portlet 代码中，可以通过调用来获取 URL`RenderResponse.createActionURL()`
*   要获取触发呈现请求的 URL，请使用`<portlet:renderURL/>`. 这将触发 portlet 的呈现。Java API 替代方法是调用`RenderResponse.createRenderURL()`
*   如果您的 portlet 是符合 JSR-286 (portlet 2.0) 的，您还可以使用该`<portlet:resourceURL />`标记来获取触发 `serverResource()`对您的 portlet 的调用的 URL。与上述类似，还有`RenderResponse.createResourceURL()`.

所有的 portlet 标记都属于 portlet 标记库 - 包括它`<%@ taglib uri="http://java.sun.com/portlet" prefix="portlet" %>`，并`<portlet:defineObjects />`在 JSP 的顶部调用）。

对方法的调用会`RenderResponse.create*Url()`返回一个`PortletURL`类，`toString()`并对它们执行 a 会生成 URL 的字符串表示，该 URL 可以包含在 portlet 生成的标记中。

portlet 标记和`PortletURL`实例都允许指定用于呈现响应的 portlet 模式和窗口状态（通过标记属性或通过`PortletURL`类中定义的设置器）。

有关更多信息，请参阅[规范](http://jcp.org/en/jsr/detail?id=286)。

# java - 我应该总是使用泛型吗？

> ID：11291374
> 
> 赞同：6
> 
> 时间：2012-07-02T09:55:33.230
> 
> 标签：java, generics, testing, coding-style, junit

我创建了一个单元测试：

```
new Callable() {
@Override
public Object call() throws
         ..... 
```

我在 Eclipse 中收到警告：

```
Callable is a raw type. References to generic type Callable<V> 
should be parameterized 
```

我应该编写如下代码：

```
new Callable<Object>() 
```

是否消除警告？似乎只有junit测试，添加额外的代码没有意义......谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T10:00:39.850

是的，避免原始类型并使用泛型类型是一种很好的做法。Using`Callable<Object>`清楚地表明 Callable 旨在返回任何类型的对象。使用`Callable`并不清楚。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T10:05:16.133

如果您的操作没有返回值（或返回没有任何意义）。您应该`java.lang.Void`用作类型参数。

```
new Callable<Void>() {

  public Void call() throws Exception {
    // do work
    return null; // <-- This statement is required.
  }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T21:33:04.983

Runnable is a good substitute for Callable< Void >.

# php - 产品和类别页面上的 Magento 404 错误

> ID：11291378
> 
> 赞同：1
> 
> 时间：2012-07-02T09:55:51.160
> 
> 标签：php, magento

我在产品和类别页面上从 Magento 收到 404 错误页面。所有其他页面都工作正常（包括搜索和内容页面）。我已经多次重建所有缓存，现在完全转换它们，我重新索引所有内容都无济于事。我不认为这是一个重写问题，因为直接通过完整 url 访问页面也会返回相同的错误，并且重写在 searc、博客、cms 等中工作正常。

我现在花了大约 6 个小时试图修复这个错误，包括大量的谷歌搜索，并且在这里也发现了类似的问题（例如[Magento 产品和类别页面返回 magento 404](https://stackoverflow.com/questions/9875296/magento-product-and-category-pages-return-magento-404)），但没有一个解决方案解决了我的问题。

我认为问题一定出在我的布局 XML 文件或模板 PHTML 文件中。我已经尝试用基本的 Magento 替换我的所有自定义文件，但是问题仍然存在。

我在 index.php 中打开了开发人员模式并启用了完整日志记录（包括创建具有完整写入权限的日志文件） - 仍然没有有用的错误消息，并且日志文件中没有任何内容。

现在变得非常绝望 - 如果有人可以建议任何进一步的尝试步骤，我将非常感激！

你可以在这里看到问题：http: [//staging.albionwine.co.uk/wines](http://staging.albionwine.co.uk/wines)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:17:06.117

确保在覆盖“Mage_Catalog”模块（产品或类别控制器）的情况下，您以正确的方式进行操作。就我而言，错误就在那里。

我不得不改变我覆盖产品控制器的方式：

```
 <routers>
    <my_mudule>
       <use>standard</use>
       <args>
          <module>My_Module</module>
           <frontName>catalog</frontName>
       </args>
    </my_module>
 </routers> 
```

至

```
 <routers>
        <catalog>
            <args>
                <modules>
                    <My_Module before="Mage_Catalog">My_Module</My_Module>
                </modules>
            </args>
        </catalog>
    </routers> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:23:53.143

我们有一个类似的问题。根本原因是，我们为目录请求（硬拷贝）开发了一个小模块。该模块工作正常，但是，我们的产品页面停止工作。

因此，我们暂时停用了该模块，然后产品/类别页面开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:55:22.810

通过备份我的皮肤、布局和模板文件夹以及数据库，我设法最终解决了这个问题，然后完全擦除了 magento 安装并用一个干净的替换它。重新上传备份的文件夹和数据库后，我恢复了所有自定义设置，错误消失了。我只能认为在某些时候，其中一个核心文件被无意中编辑了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:54:13.927

检查类别 URL 是否正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-16T20:54:21.963

In our case, the issue was related to permissions when migrating the database between platforms, dev server to local. The category pages would load, but the product detail page would show 404 without an error.

The cause of our issue is that the data migration was trying to create a view but didn't have the permissions to do so due to how the mysqldump created the query. Navigating to the products page on the backend would show no inventory.

The fix was to create the View manually. Which is super annoying to do every-time you setup a new docker. Below is the query to create the inventory view.

Remember to reindex and clear cache. php bin/magento indexer:reindex php bin/magento cache:clear php bin/magento cache:flush

```
CREATE
OR REPLACE
VIEW `inventory_stock_1` AS select
    distinct `legacy_stock_status`.`product_id` AS `product_id`,
    `legacy_stock_status`.`website_id` AS `website_id`,
    `legacy_stock_status`.`stock_id` AS `stock_id`,
    `legacy_stock_status`.`qty` AS `quantity`,
    `legacy_stock_status`.`stock_status` AS `is_salable`,
    `product`.`sku` AS `sku`
from
    ( `cataloginventory_stock_status` `legacy_stock_status`
join `catalog_product_entity` `product` on
        (( `legacy_stock_status`.`product_id` = `product`.`entity_id` ))); 
```

# jquery - 如何关闭 jPicker

> ID：11291381
> 
> 赞同：1
> 
> 时间：2012-07-02T09:56:22.023
> 
> 标签：jquery, color-picker, jpicker

我有一些 Ajax 形式的脚本，当我单击表单输入（确定或取消）时，我想关闭 jPicker。我阅读了文档并没有找到任何东西。有什么帮助吗？

这是我的脚本。

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#my_best_id}').jPicker(
            {
                images:
                {
                    clientPath: 'js/jpicker/images/' // Path to image files
                }
            }
        );
        $(':submit').click(function(){
            $('#my_best_id').jPicker().hide();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:31:15.860

尝试这个：

```
$('.jPicker').hide(); 
```

代替：

```
$('#my_best_id').jPicker().hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T15:40:52.763

这是一个没有公认答案的老问题，我自己也想知道。

在我的情况下，我只想关闭 jpicker 对话框（就像单击取消按钮一样）。

所以我不能按照@techfoobar 的建议使用以下内容

> $('.jPicker').hide()

因为它会隐藏颜色选择器以及对话框。

只隐藏对话框 -

```
$('.jPicker.Container').hide(); 
```

或者你可以调用取消按钮的点击事件

```
$('.jPicker.Container').find('.Cancel').click(); 
```

# javascript - Netbeans 中针对 *.js 文件的 jQuery 代码完成

> ID：11291382
> 
> 赞同：1
> 
> 时间：2012-07-02T09:56:26.423
> 
> 标签：javascript, jquery, netbeans-7, code-completion

我正在使用 NetBeans 7.1.2 和 jQuery 1.7.2

我可以在 HTML 和 PHP 文件中使用代码补全，但不能在外部 JS 文件中使用。这两个文件都包含在 index.php 文件中。

```
<script src="js/demo.js"></script>
<script src="js/jquery-1.7.2.js"></script> 
```

在 index.php 中，jQuery CodeCompletion 在脚本中可用。在 demo.js 中没有。

如何在 demo.js 中使用 CodeCompletion？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:34:45.173

问题解决了。

1.  下载开发者版本的jquery
2.  在 js/jquery-Version.js 中包含 jquery 文件
3.  在 Options->Misc 中调整 BrowserSupportSettings

# android - Android - 移动网络设置菜单 (Jelly Bean)

> ID：11291387
> 
> 赞同：8
> 
> 时间：2012-07-02T09:56:45.963
> 
> 标签：android, networking, settings, android-4.2-jelly-bean

以下代码不适用于 Jelly Bean (Android 4.1)：

```
final ComponentName cn = new ComponentName("com.android.phone","com.android.phone.Settings");
final Intent intent=new Intent(Settings.ACTION_DATA_ROAMING_SETTINGS);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
intent.setComponent(cn);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

而是开始设置，它什么都没有，知道如何解决吗？

这是解决方案：

```
final ComponentName cn = new ComponentName("com.android.phone","com.android.phone.MobileNetworkSettings");
final Intent intent = new Intent(Settings.ACTION_DATA_ROAMING_SETTINGS);
intent.addCategory(Intent.ACTION_MAIN);
intent.setComponent(cn);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

感谢你们 ： ）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:01:23.473

尝试：

```
final  Intent intent=new Intent(Settings.ACTION_DATA_ROAMING_SETTINGS);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
 final ComponentName cn = new ComponentName("com.android.phone","com.android.phone.Settings");
intent.setComponent(cn);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:59:35.040

下面的代码要简单得多，并且在 Gingerbread (2.3.7) 和 JB (4.1.2) 上进行了测试

```
 startActivityForResult(new Intent(android.provider.Settings.ACTION_DATA_ROAMING_SETTINGS), 0); 
```

# string - C ++将UnicodeString转换为String

> ID：11291397
> 
> 赞同：3
> 
> 时间：2012-07-02T09:57:03.160
> 
> 标签：string, unicode, utf-8, c++builder, stdstring

请帮助我将 unicodestring 转换为字符串

这就是我得到 unicodestring 的方式

```
UnicodeString _str = OpenDialog1->FileName; 
```

或者是否可以使用 ifstream 或类似的东西写入文件 unicode 字符串？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T22:43:18.403

根据您的需要，将 分配`UnicodeString`给 an`AnsiString`或 a `UTF8String`，然后将其写入您的文件而不是原始文件`UnicodeString`本身：

```
UnicodeString _str = OpenDialog1->FileName; 
AnsiString _astr = _str; 
```

或者：

```
UnicodeString _str = OpenDialog1->FileName; 
UTF8String _ustr = _str; 
```

要将`AnsiString`/传递`UTF8String`给 STL 函数，您必须：

1）使用`c_str()`方法：

```
stream << _astr.c_str(); 
```

2）构造一个 temp `std::string`：

```
stream << std::string(_astr.c_str(), _astr.Length()); 
```

3）在`AnsiString`only的情况下，在你的项目中指定`VCL_IOSTREAM`define来启用AnsiString的自带`<<<`和`>>`操作符：

```
stream << _astr; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:05:19.117

将字符串转换为字节需要一些编码。有各种库可以执行此操作，因此这取决于您使用的框架。

作为替代方案，您可以使用`wofstream`将`wchar_t`字符写入流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-10T09:56:00.883

```
std::string converted;
us.toUTF8String(converted); 
```

我们是 (ICU) UnicodeString

# c++ - .exe 与 .dll 作为一个程序的模块

> ID：11291406
> 
> 赞同：0
> 
> 时间：2012-07-02T09:57:37.150
> 
> 标签：c++, module

例如，我们有一个用 C/C++ 编写的图像处理程序接口。我们有过滤器、模糊、去模糊、调整大小、压缩和所有其他需要大量计算的东西。您将如何设计这样的应用程序模块 - 例如 .exe 接口 + 一组 .exe 模块在彼此之间抛出文件，或者作为 .exe 接口 + .dll 以及所需的方法？

每种方法的优点和缺点是什么？

如果我使用.dlls，在什么情况下我会被迫重新编译接口的.exe？让我们建议必须为模块提供的数据大小足够大，以便在某些执行位置将其写入磁盘。

提前致谢。

PS 图像处理只是一个例子，任何具有此类模块的系统都可以放在问题中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:06:12.987

这取决于您的系统的耦合程度以及性能问题。

1.  如果您想使用来自不同供应商的代码，则最好使用已知格式的共享文件。

2.  如果您需要每秒处理数千张图像，那么 DLL 可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:10:02.560

我会使用 DLL，这就是它们的用途。在重新编译方面：如果更改 EXE 和 DLL 之间的二进制接口，则必须重新编译 DLL！

如果您选择 DLL 并希望独立于编译器，则必须定义一个 STABLE ABI。这可以通过 C + 一些类型定义（char 的符号，bool 的大小，...）或类似于 COM 处理它的方式来完成。

我个人会选择第二条路线——知道定义一个好的二进制稳定 ABI 需要多少时间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:59:37.933

我会使用带有所需方法的 DLL。DLL 就是为这项工作而设计的。

# java - 什么是 java.lang.RuntimeException：org.apache.cxf.service.factory.ServiceConstructionException

> ID：11291408
> 
> 赞同：2
> 
> 时间：2012-07-02T09:57:49.167
> 
> 标签：java, web-services, cxf

我是 Web 服务的新手。当我尝试创建网络服务时，出现以下错误。

```
 Error: java.lang.RuntimeException: org.apache.cxf.service.factory.ServiceConstructionException

java.lang.RuntimeException: org.apache.cxf.service.factory.ServiceConstructionException
    at org.apache.cxf.frontend.AbstractServiceFactory.createService(AbstractServiceFactory.java:80)
    at org.apache.cxf.tools.java2wsdl.processor.JavaToWSDLProcessor.process(JavaToWSDLProcessor.java:101)
    at org.apache.cxf.tools.java2ws.JavaToWSContainer.processWSDL(JavaToWSContainer.java:110)
    at org.apache.cxf.tools.java2ws.JavaToWSContainer.execute(JavaToWSContainer.java:75)
    at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:103)
    at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:58)
    at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:40)
    at org.apache.cxf.tools.java2ws.JavaToWS.run(JavaToWS.java:77)
    at org.apache.cxf.tools.java2ws.JavaToWS.main(JavaToWS.java:45)
Caused by: org.apache.cxf.service.factory.ServiceConstructionException
    at org.apache.cxf.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:297)
    at org.apache.cxf.service.factory.AbstractServiceFactoryBean.initializeDataBindings(AbstractServiceFactoryBean.java:86)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass(ReflectionServiceFactoryBean.java:474)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.buildServiceFromClass(JaxWsServiceFactoryBean.java:685)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:536)
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:248)
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:205)
    at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:101)
    at org.apache.cxf.frontend.AbstractServiceFactory.createService(AbstractServiceFactory.java:78)
    ... 8 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 20 counts of IllegalAnnotationExceptions
Class has two properties of the same name "boardingPoint"
    this problem is related to the following location:
        at public java.lang.String com.abhibus.oprs.pojo.booking.PrintTicket.getBoardingPoint()
        at com.abhibus.oprs.pojo.booking.PrintTicket
        at com.abhibus.oprs.pojo.booking.TicketBooking
        at com.abhibus.oprs.pojo.booking.ServicePassengerBookingInfo 
```

从过去的两天开始，我一直坚持这一点。在此场景中，ServicePassengerBookingInfo 扩展了 TicketBooking 并且 TicketBooking 扩展了 PrintTicket。我在 Printticket pojo 中定义了一个名为boardingPoint 的属性。

请让我知道如何解决这个问题

端点源

```
public class SaveTicketBookingInfo {

    private Long serviceId;
    private Integer adults;
    private Integer childs;
    private String journeyType;
    private Integer journeyTime;
    private Long startPlaceId;
    private Long endPlaceId;
    private Long loginUserId;
    private String paxSeatDetails[];
    private int totalSeatsBooked = 0;
    private Long categoryCodeId[];
    private Long genderCodeId[];
    private String passengerName[];
    private Double passengerAge[];
    private String seatDetails[];
    private Double fareDetails[];
    private Double forwardAdultFare;
    private Double forwardChildFare;
    private double concPerChildPax = 0;
    private int maxPassengerAllowed;
    private String concApplyToChild;
    private int departureDay[];
    private String srvcPlatformNo[];
    private Double concPriceForward;
    private String bookingTypeForward;
    private Double concPriceReturn;
    private String retConc;    
    private String bookingTypeReturn;
    private Long mealIdReturn[];
    private Long mealIdForward[];
    private Double mPriceReturn[];
    private Double mPriceForward[];
    private Integer mQtyForward[];   
    private Integer mQtyReturn[]; 
    private Long depotIds[];
    private Long srvcStationId[];
    private Long accomodationId[];
    private Double tollsPrice[];
    private String acFlag[];   
    private String ticketType;
    private String cancelTicketType;
    private String stockNumber;
    private String stockKey;
    private String cancelType;   
    private String seatNos;
    private int concNoPassengers;
    private String seatsBooked;
    private Long serviceCategoryId;
    private Long concessionId;
    private Double tollFare;
    private String bookingType;
    private String departureTime;
    private String arrivalTime;
    private Double totalAmount;
    private String cardNumber;
    private Double[] bookingTollFare;   
    private Double returnAdultFare;
    private Double returnChildFare;  
    private int retTotalPax = 0;          
    private Double refundPrice;
    private Double refundSrtPrice;
    private Double refundTollFee;
    private Double refundMealPrice;
    private Double refundAccomPrice;
    private Double refundTotalAmount;
    private Long forwardServiceId;
    private Long returnServiceId;
    private Long stationId[];
    private String searchType;
    private String journeyDate;
    private String returnJourneyDate;
    private String[] platFormNo;
    private boolean agentBooking;
    private boolean eBooking;
    private Auditor auditor; 
} 
```

使用 setter 和 getter 方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:09:11.733

您可以在您发布的堆栈跟踪中看到*根本原因：*

```
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 20 counts of IllegalAnnotationExceptions
Class has two properties of the same name "boardingPoint"
    this problem is related to the following location:
        at public java.lang.String com.abhibus.oprs.pojo.booking.PrintTicket.getBoardingPoint() 
```

这是根本原因 - 隐式或显式，您正在定义一个具有不明确映射的类，以便两个事物映射到同一个名称。不出所料，这无法解决，因此服务器无法启动。

如果没有类的完整来源，`PrintTicket`我无法说出是什么原因造成的，但看看你是如何注释它的属性的。可能是您同时导出了字段*和*方法（因此 getter 会与字段发生冲突），或者您有两个匹配的 getter 方法（例如`isBoardingPoint`和`getBoardingPoint`）等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-17T09:53:07.237

我有这种类型的错误：

```
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 count of IllegalAnnotationExceptions
Two classes have the same type name "{...}" . Use @XmlType.name and XmlType.namespace to give them different names.
    this problem is related to the following location:
        at public com.myapp.package.ClassName 
```

为类（在上面的示例中为 ClassName）指定 @XmlType 命名空间 - 正如输出中所建议的那样，为我修复了它。

# .net - 如何为 MediaElement 选择目标音频输出设备？

> ID：11291412
> 
> 赞同：1
> 
> 时间：2012-07-02T09:58:15.420
> 
> 标签：.net, wpf, mediaelement

使用 .Net 4 MediaElement，有没有办法选择目标音频输出设备？我知道 MediaElement 将音频播放到 Windows 默认声音播放设备。但是我有一个应用程序需要与具有多个声卡的系统一起使用，并且能够将音频定向到特定的声卡。并且不能以编程方式更改 Windows 默认声音设备。

我知道 DirectX 9.0c - DirectSound 可以让你这样做，但 DirectSound 自 DX9 以来已被 DirectX 弃用，谁知道 MS 将使其可用多长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:10:22.597

有一个可用的开源 c# 库[http://naudio.codeplex.com/](http://naudio.codeplex.com/)。

这是关于音频设备的文章[http://mark-dot-net.blogspot.in/2011/05/naudio-audio-output-devices.html](http://mark-dot-net.blogspot.in/2011/05/naudio-audio-output-devices.html)。

# performance - 一种估计或预测 HTML 块的 Jsoup 处理时间的方法？

> ID：11291414
> 
> 赞同：6
> 
> 时间：2012-07-02T09:58:21.320
> 
> 标签：performance, optimization, jsoup

我在 Jsoup 中处理的一些网页很重。“重”是指页面要么包含大量 HTML（假设页面已经下载），要么需要对*同一个文档进行多次迭代（仅通过*[Jsoup.parse()](http://jsoup.org/cookbook/input/parse-document-from-string)创建一次）。

出于这个原因，我想向用户展示一个进度条，其中估计还剩多少时间。

一种方法是仅测量 HTML 的体积（以 KB 或 MB 为单位）并得出一个速度因素（不幸的是，完全取决于运行此代码的系统的速度）。

另一种方法是计算[节点数](https://stackoverflow.com/a/11291133/1357272)？

由于这种明显的不确定性，我是在找麻烦吗？

有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:52:46.373

总结到目前为止的答案：不，**不可能**估计或预测一块 HTML 的 Jsoup 处理时间。

原因是，除了`Jsoup.parse()`耗时的组件之外，Jsoup 可以在许多平台/设备上运行，有些非常慢，有些非常快，而且 Jsoup 无法（等待）关联其处理阶段/操作及其运行的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:39:57.837

我要告诉你尝试的是：

```
long start = System.currentTimeInMilis();
//Processing
long end = System.currentTimeInMilis();

long timeToProcess = end - start; 
```

但我真的认为这是没用的，因为你依赖于页面服务器、互联网速度、处理能力。有太多的事情可以预测。另外... Jsoup 选择器 API 非常**快**。另外..连接所需的时间是更长的等待时间。你真的无法预测。希望有帮助

# asp.net - saxon.net 将转换后的 xslt 写入文字

> ID：11291416
> 
> 赞同：0
> 
> 时间：2012-07-02T09:58:30.263
> 
> 标签：asp.net, xml, xslt, saxon

需要一些关于 saxon.net 的帮助。

谁能告诉我如何将 xslt 转换的 xlm 输出为 asp.net 文字？

```
' NOTE: Saxon now uses System.Xml internally on the .NET platform. 
```

'我们可以导入它并使用它的任何派生类、方法等，'但在这个例子中，我们将使用 FileStream 来处理源文件和转换文件，Saxon 将从那里处理这些事情， ' 所以对于这个特定的示例不需要导入 System.Xml。Private Sub Page_Load(sender As [Object], e As EventArgs) ' 创建两个字符串，分别代表源文件和 ' 转​​换文件。这些值可以使用'多种方法（例如QueryString）设置，但现在'我们将保持简单并对这些值进行硬编码。Dim sourceUri As [String] = Server.MapPath("beispiel1.xml") Dim xsltUri As [String] = Server.MapPath("beispiel1.xslt")

```
' The new Saxon engine for the .NET platform allows the
' ability to pass in a Stream instance directly.
' Given that the Stream class implements IDisposable, we
' can use the 'using' keyword/codeblock to ensure that
' our resources are properly cleaned up, freeing up
' valuable system resources in the process.
' [UPDATE: Check that.  This really should read
' close all of the file streams we opened automagically.
' While its true we're cleaning up system resources
' It's not like theres really a choice.  One way
' or another the stream needs to be closed, this
' Just does this for us so we don't have to worry about it.
Using sXml As FileStream = File.OpenRead(sourceUri)
    ' We need to do this for each Stream that we pass in for processing.
    Using sXsl As FileStream = File.OpenRead(xsltUri)
        ' Now we simply create a Processor instance.
        Dim processor As New Processor()

        ' Load the source document into a DocumentBuilder
        Dim builder As DocumentBuilder = processor.NewDocumentBuilder()

        ' Because we have created the DocumentBuilder with a file stream
        ' we need to set the BaseUri manually, as this information is no
        ' longer available to the Saxon internals when a Stream, regardless
        ' of what the source of this Stream happens to be, is used for creating
        ' the DocumentBuilder instance.  With this in mind, we need to create
        ' an instance of a Uri using the sourceUri we created above.
        Dim sUri As New Uri(sourceUri)

        ' Now set the baseUri for the builder we created.
        builder.BaseUri = sUri

        ' Instantiating the Build method of the DocumentBuilder class will then
        ' provide the proper XdmNode type for processing.
        Dim input As XdmNode = builder.Build(sXml)

        ' Create a transformer for the transformation file, compiling and loading this
        ' file using the NewXsltCompiler method of the Saxon.Api namespace.
        Dim transformer As XsltTransformer = processor.NewXsltCompiler().Compile(sXsl).Load()

        ' Set the root node of the source document to be the initial context node.
        transformer.InitialContextNode = input

        ' Create a serializer
        Dim serializer As New Serializer()

        ' Set the serializer to write the transformation output directly
        ' to ASP.NET's Response.Output stream.
        serializer.SetOutputWriter(Response.Output)

        ' Run the transformation.
        transformer.Run(serializer)

        ' and we're done. :)
        Literal1.Text = "xslt xml transformed output here"
    End Using
End Using 
```

结束子

我不想将它写入 response.output 流。但是变成了Literal1.Text。

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:03:56.930

我想你只是想要

```
Using sw As New StringWriter()
  serializer.SetOutputWriter(sw)
  transformer.Run(serializer)
  Literal1.Text = sw.ToString()
End Using 
```

# .net - Chart Visual Studio 在回发后消失

> ID：11291418
> 
> 赞同：3
> 
> 时间：2012-07-02T09:58:50.300
> 
> 标签：.net, visual-studio, web, charts, autopostback

我用 VS2010 开发了一个网站。我从工具箱中添加了一个图表，在单击按钮后显示一行。但是当我按下按钮时图表看起来很好，在 PostBack 之后（例如，我更改了文本框的内容）图表消失了。我怎样才能让图表在回发后继续显示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T03:36:24.487

设置 EnableViewState="true"

```
<asp:Chart runat="server" ID="Chart1" EnableViewState="true"> 
```

不知道为什么，但是 asp.net 图表似乎默认关闭了视图状态

# javascript - 使用 jquery 选择元素

> ID：11291422
> 
> 赞同：0
> 
> 时间：2012-07-02T09:59:02.893
> 
> 标签：javascript, jquery, html, html-select

我有一个对象`HTML`：

```
<li id="m_delete" data-group="edit" class="m_delete edit-object disabled" data-control="delete" title="Delete"><a href="#"></a></li>
<li id="m_edit" data-group="edit" class="m_edit edit-object disabled" data-control="drag" title="Edit"><a href="#"></a></li> 
```

使用下一行我选择特定类中的所有元素。

```
$("#toolbar .edit-object").addClass('disabled'); 
```

但是我怎样才能`delete`从那个类中只选择元素呢？下一行有什么问题？

```
$("#toolbar .m_delete .edit-object").removeClass('disabled'); 
```

这是不正确的。如何修复（仅选择删除对象）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:00:10.323

```
$("#toolbar .m_delete.edit-object").removeClass('disabled'); 
```

您应该删除类名之间的空格以使选择器正常工作（因为您正在 #toolbar 内寻找*两个*类的元素）

但当然最好用

```
$("#m_delete") 
```

为了性能（并且因为该 id 在页面中是唯一的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:03:45.110

如果要选择同时具有 m_delete 类和 .edit-object 类的元素，可以使用此选择器：

```
$("#toolbar .m_delete.edit-object").removeClass('disabled'); 
```

我删除了空格，因为它将选择所有带有子元素 .edit-object 的 .m_delete。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:06:38.337

您的选择器的问题在于，它选择了所有具有类`edit-object`并且具有带类的父节点的项目，该类`m_delete`具有具有 id 的父节点`toolbar`。

你可以像这样在脑海中翻译它：

```
#toolbar // .m_delete // .edit-object 
```

正如[F. Calderan](https://stackoverflow.com/a/11291438/221213)在他的帖子中正确所说，您可以在选择器中将一个项目与两者`edit-object`和`m_delete`类匹配，而无需空格：`.edit_object.m_delete`。

这可以翻译为：

```
#toolbar // .m_delete & .edit_object 
```

# sqlite - SQLite 与 Visual Studio 2012 和 .NET 4.5？

> ID：11291423
> 
> 赞同：22
> 
> 时间：2012-07-02T09:59:07.883
> 
> 标签：sqlite, ado.net, nuget, visual-studio-2012

SQLite 是否适用于 VS 2012 和 .NET 4.5？

[我用 NuGet 安装了它（System.Data.SQLite.x64），还安装了一个与该站点](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)分开的 ado.net 提供程序（只能找到一个用于 .net 4.0 的），但它没有出现在添加列表中 -服务器资源管理器中的选项。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-21T01:03:19.953

现在这个页面上有一个官方安装程序：

[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

它将设计时组件安装到 VS2012 以及官方的 System.Data.Sqlite 二进制文件中。

该页面上有很多下载，您需要的下载大约在一半左右，您可以通过搜索获得该页面：

sqlite-netFx45-setup-bundle-x86-2012-1.0.84.0.exe

***这是一个直接链接：[http ://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx45-setup-bundle-x86-2012-1.0.84.0.exe](http://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx45-setup-bundle-x86-2012-1.0.84.0.exe)***

PS：请务必注意，由于许可限制，VS Express**不支持设计时组件。**（感谢康拉德）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T23:22:46.730

我找到了另一种在 VS 2012 中使用 sqlite 的方法，使用 dotConnect for SQLite，标准免费版可以使用。[http://www.devart.com/dotconnect/sqlite/download.html](http://www.devart.com/dotconnect/sqlite/download.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T17:36:23.533

值得一提的是，我有一个经过修补的设计器安装程序可执行文件，可以在 VS2012 RC 中安装向导。[你可以在这里下载](http://snack.to/czci2ij1)。您需要已经安装了 SQLLite，它需要是 1.0.66 版本（库的稍旧版本），并且它应该进入原始设计器安装程序所在的同一目录。

假设您使用默认安装路径，可执行文件应该进入`C:\Program Files\SQLite.NET\bin\Designer`（对于 x86）或`C:\Program Files (x86)\SQLite.NET\bin\Designer`（对于 x64）。

如果在列表框中选中了该版本，则它已经（自动）将其安装在该版本中。如果我在那台机器上有其他 Visual Studio 版本，它也会显示它们（2008 年及更高版本）。安装只是几个注册表项并更新 machine.config 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T22:04:27.320

要安装 Visual Studio 2012 的设计时组件，您需要安装此二进制包：

[sqlite-netFx45-setup-bundle-x86-2012-1.0.84.0.exe](http://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx45-setup-bundle-x86-2012-1.0.84.0.exe)

[链接到该页面](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

它下面的 x64 版本不安装设计时组件。要访问设计时组件，请转到（在 vs 2012 中）查看 > 服务器资源管理器，然后右键单击，添加新连接，然后您将看到添加了一个 sqlite 数据库。

我是一个初学者，做对了这件事毁了我的夜晚:(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T23:55:40.697

.NET 4.0 版本应该适用于 .NET 4.5。然而，据我所知，当前设置并未将设计器组件注册到 Visual Studio 2012。

所以你可以使用它......只是还没有通过任何向导。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-24T17:14:18.823

这是表格 MSDN 论坛。扩展文件由 sqlite 团队创建，为 vs2012 准备

[http://visualstudiogallery.msdn.microsoft.com/23f6c55a-4909-4b1f-80b1-25792b11639e](http://visualstudiogallery.msdn.microsoft.com/23f6c55a-4909-4b1f-80b1-25792b11639e)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-13T18:50:00.797

嘿，我找到了一种在 vs2012 64 位中安装和集成设计组件的方法，希望这可以帮助你们。

[首先从http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)下载并安装 sqlite 包

请注意，此捆绑包会将 dll 安装到您的计算机中，但是我没有将它们集成到 vs2012，这就是为什么您在添加连接时看不到 SQLite 选项的原因。

要将 SQLite 集成到 VS，您需要之前下载的包的 32 位版本（请注意，在描述中以粗体字母表示，这是唯一可以将设计组件与 VS 集成的文件）。

下载 32 位版本并运行它，但是！！！选择 CUSTOM INSTALL，并仅选中核心组件（它是两个子组件）和 VISUAL STUDIO DESIGNER 组件的复选框。

Go ahead and hopefully you will get SQLite integrated in your vs. GOOD LUCK!

# crystal-reports - ReportViewer 还是 CrystalReport？

> ID：11291425
> 
> 赞同：0
> 
> 时间：2012-07-02T09:59:17.653
> 
> 标签：crystal-reports, sql-server-ce, report, reportviewer

我正在开发一个带有一些选择查询的小型 Windows 应用程序，我的 SQL CE 数据库中只有 3 个表。考虑到应用程序的小尺寸，是否值得使用 Crystal Reports？（并考虑到它没有与 VS 2010 一起安装）请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:30:03.583

我想你可以试试水晶。它[是免费下载](http://www.businessobjects.com/jump/xi/crvs2010/default.asp)的，如果您使用向导，创建基本报告非常容易。

对于较重的业务用途，我对 Crystal 持怀疑态度，例如，我对它处理图像的方式印象不深（它似乎会泄漏内存）。我也有重新分配的问题。但我认为这些问题都不适用于您的解决方案。

# emacs - 粘液连接不起作用

> ID：11291428
> 
> 赞同：3
> 
> 时间：2012-07-02T09:59:28.500
> 
> 标签：emacs, lisp, common-lisp, slime

我是 Emacs 和 Common Lisp 新手。我已经在我的 Emacs 中成功安装了 SLIME，但我无法运行它。`Alt`+`x` `slime-connect`提供以下选项，接受提供粘贴在选项下方的错误。

```
Host: 127.0.0.1
Port: 4005

Connecting to Swank on port 4005...
make client process failed: connection refused, :name, SLIME Lisp, :buffer, nil,
                                                :host, 127.0.0.1, :service 4005,
                                                :nowait, nil 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T19:32:56.440

1.  to fix the whitespace - escape it with double backward slash.

2.  When you do `slime-connect` it will expect a Lisp image (Lisp runtime) to be up and listening on the server and port you connect to. Probably you didn't mean it.

3.  `slime` will first launch `inferior-lisp-program`, and then connect to it. This is what you want to do, actually.

[https://github.com/quicklisp/quicklisp-slime-helper](https://github.com/quicklisp/quicklisp-slime-helper) this is something you might want to try (when you are done with the setup, or instead). Or just keep it for the time you feel more comfortable with more setup. The program in the link is a helper, that works through quicklisp - something you might want to get familiar with, a kind of package manager for Lisp code, and SLIME you run in Emacs. Possibly, if you will find that it is easier for you to

*   first install the Lisp you want.

*   install quicklisp. (follow the instructions here: [http://www.quicklisp.org/beta/](http://www.quicklisp.org/beta/) with the exception that for Windows you might either use Cygwin, or instead of curl, just right-click on the link and do the "save target as" voodoo magic :). If you don't use SBCL, then --load may not be an option for your lisp. Replace it with something like: start your Lisp, type into REPL: `(load "quicklisp.lisp")`, provided your current working directory is the one where you saved the quicklisp.lisp file. To print out the current directory, if not sure: `(directory ".")`.

*   Read the README for quicklisp-slime-helper and follow the instructions in it. Basically, there's only one thing you want to configure after you install it via quicklisp, it is:

    (load "c:/full-path-to/quicklisp/slime-helper.el")

in the .emacs file.

If you aren't familiar with *nix path names, tilde means the current user's home directory, aka `$HOME`, you probably set it up as an environment variable when you installed Emacs. Note that `quicklisp-slime-helper` and `slime` packages are mutually exclusive (it's the same package, just wrapped differently), so if you have something like:

```
(add-to-list 'load-path "/path/to/slime")
(require 'slime) 
```

Then, if you want to use the `quicklisp-slime-helper`, comment that away, and use only the configuration for one of them.

PS. Re'

```
(add-hook 'inferior-lisp-mode-hook (lambda () (inferior-slime-mode t))) 
```

This looks redundant, why do you need that / what is that? Where did you get `inferior-slime-mode`? That's something that doesn't look familiar to me. What happens if you position the point (caret) on it and hit `C-h f`?

# python - 更改 Sphinx 中的内部链接标签

> ID：11291437
> 
> 赞同：3
> 
> 时间：2012-07-02T10:00:09.027
> 
> 标签：python, hyperlink, python-sphinx, sections, toctree

我正在使用[Sphinx](https://www.sphinx-doc.org/)生成文档。我可以更改目录中文档链接的标签

```
Features </resources/pages/features> 
```

根据 toctree 指令[在 toctree 指令](https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#directive-toctree)中，但是如何对文档中的部分的链接执行相同的**操作**？

编辑 ：

这就是我想要实现的目标：

文档.rst

```
.. toctree::
    :maxdepth: 2

    Section - Information <info>

.. _info:

Info Section
------------ 
```

所以它`Section - information`会出现在目录中，但`Info section`会出现在文档本身中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:37:21.173

I believe you can use standard reST labels.

Example:

pages/features.rst:

```
.. _label1:

A section
---------

Some text 
```

otherpage.rst:

```
See :ref:`label1` 
```

[Cross-referencing arbitrary locations](http://sphinx.pocoo.org/markup/inline.html#cross-referencing-arbitrary-locations).

# php - 正则表达式，需要支持

> ID：11291440
> 
> 赞同：-2
> 
> 时间：2012-07-02T10:00:22.407
> 
> 标签：php, regex, preg-replace

我有链接：

```
/admin/index.php
/admin/index.php?do=delete_user
/forum/index.php?search=aaa&type=a
/index.php
/index.php?p=home 
```

等等...

如何 preg_replace() 链接只有 index.php 没有 GET 会改变（如果有 GET 不替换）。

谢谢，它正在工作，但为什么不工作这个（？！&），（？！\＆）？如果在 asd.aa/index.php?news=1 存在 & (asd.aa/index.php?news=1&dont=change) 之后，我想保持不变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:04:15.250

使用否定的前瞻：`'/index\.php(?!\?)/'`只有在没有`?`后面的情况下才会匹配`index.php`

# x86-64 - 为什么天然气中出现“pushb $12”错误？

> ID：11291444
> 
> 赞同：1
> 
> 时间：2012-07-02T10:00:37.813
> 
> 标签：x86-64, gnu-assembler

为什么下面的代码在gas中是非法的？

```
# cat -n gas.asm
1
2  .code64
3  pushb $12
4
# as gas.asm
gas.asm: Assembler messages:
gas.asm:3: Error: suffix or operands invalid for `push' 
```

是不是很匹配：

```
| Opcode* | Instruction | Op/En | 64-Bit Mode | Compat/Leg Mode | Description |
|      6A | PUSH imm8   | C     | Valid       | Valid           | Push imm8\.  | 
```

但是，以下代码在 NASM 中有效。

```
bits 64
push byte 12 
```

为什么gas在X86-64平台上会出现这个错误？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:13:59.340

看到[这个线程](http://coding.derkeiler.com/Archive/Assembler/comp.lang.asm.x86/2006-03/msg00253.html)。

引用：

> 我认为你指的是'0x6A PUSH imm8'。**这不会将字节压入堆栈**。它推送一个字节值，编码为指令的一部分，作为一个字（16 位）或 CPU 大小 [32 位 CPU 的长字（32 位）和 64 位 CPU 的四字（64 位） ] 取决于当前 CPU 模式的堆栈大小和大小覆盖前缀。

简而言之，这实际上是一个`pushw`. `gas`明确这一事实并强制您使用`pushw $12`.

# html - 使用 AbcPdf 将 HTML 转换为 PDF 时的分页符

> ID：11291447
> 
> 赞同：17
> 
> 时间：2012-07-02T10:00:40.570
> 
> 标签：html, pdf, abcpdf

我正在尝试使用 abcPdf 创建 PDF 格式的报告。一切正常，但我想在每页的底部添加页码和边距，并避免在一行中间出现切口，如图所示：

![分页符](../Images/b8458cfd1a136fe99a3250a37b121130.png)

```
var theDoc = new Doc { TopDown = true };
var pageRef = theDoc.AddImageUrl(pdfUrl, true, 1903, true);
while (theDoc.Chainable(pageRef))
{
    theDoc.Page = theDoc.AddPage();
    //I guessI have to do something here???
    pageRef = theDoc.AddImageToChain(pageRef);
} 
```

有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-03T10:52:24.503

它确实有效，但我认为 AbcPdf 正在使用 IE 的 HTML 渲染，因此您可以做的最好的事情是手动将渲染引擎设置为 gecko（不要忘记您需要额外的 DLL）或在您的 Web 服务器中更新 IE。

```
theDoc.HtmlOptions.Engine = EngineType.Gecko; 
```

然后添加分页符只需使用

```
<div style="page-break-before:always">&nbsp;</div> 
```

感谢feela 的评论。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-20T11:15:34.350

ABCpdf 包括两个 HTML 渲染引擎。

MSHTML 是基于 Trident 的，将产生与您系统上安装的 IE 版本大致相似的输出。

Gecko 是基于 Firefox 的，截至 2013 年 6 月，将产生与您在 Firefox 21 中看到的大致相似的输出。

您可以使用 Doc.HtmlOptions.Engine 属性在两个引擎之间切换。

两个引擎都支持分页 CSS 样式。您可以使用以下内容：

```
<div style="page-break-before:always">some text</div>
<div style="page-break-after:always">some text</div> 
<div style="page-break-inside:avoid">some text</div> 
```

请注意，page-break-inside 是对基本 MSHTML 行为的补充。

这两个引擎对这些结构的处理略有不同。一般来说，MSHTML 更加宽容和直观。但是，应用样式的元素必须是可见的才能工作。

因此，如果样式不会在您期望的位置产生中断，调试它们的最简单方法是将边框样式应用于元素，以便您可以看到中断应该发生的位置。这通常会使问题的原因显而易见。

Gecko 引擎中的分页符样式并不总是像在 MSHTML 中那样直观地应用。其根源在于 CSS 规范，该规范规定中断样式必须适用于“根元素的正常流程”中的块级元素。它允许将这些样式应用于其他元素，但不强制这样做。

这样做的结果是，在 Gecko 引擎中，分页符样式不能在表格中应用于表格行等元素。如果您不确定某事是否可行，请尝试从 Firefox 21.0 中的 Print Preview 进行简单的完整性检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-06T05:52:26.727

有一个更好的方法来解决这个问题。您可以在 html 的容器上放置一个属性（即,等） ，而不是将`<div />`其强制分页。在 css 中设置为.`CSS``<div />``<table />``page-break-inside``auto`

```
// in CSS
#ContainerID
{
    page-break-inside: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T06:01:38.683

是的，我已经解决了这个问题，我们通过在表格中添加一行来解决它，并通过检查 html 与矩形的高度来查看它是否仍然适合页面。

一旦所有设置都可以很好地工作，但速度有点慢

# postgresql - 终止挂起的查询（在事务中空闲）

> ID：11291456
> 
> 赞同：112
> 
> 时间：2012-07-02T10:00:58.713
> 
> 标签：postgresql

我正在使用带有 Crane Postgres 选项的 Heroku，当我的本地计算机崩溃时，我正在从本地计算机上对数据库运行查询。如果我跑

```
select * from pg_stat_activity 
```

其中一项有

```
<IDLE> in transaction 
```

在 current_query_text 列中。

结果，我无法删除已终止的查询正在写入的表。我尝试使用 pg_cancel_backend(N) 并返回 True 但似乎没有任何反应。

我怎样才能终止这个过程，以便我可以删除表？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-07-02T10:46:33.650

*这是一个一般的 Postgres 答案，并不特定于 heroku*

* * *

（这个问题的简单愚蠢的答案可能是......只需重新启动 postgresql。假设这是不可取的或不是一个选项......）

通过运行以下 sql 查找 PID：

```
SELECT pid , query, * from pg_stat_activity
  WHERE state != 'idle' ORDER BY xact_start; 
```

（查询可能需要修改依赖于 postgres 的版本——最终，只需从 pg_stat_activity 中选择 *）。您会在第一（左）列中找到 pid，第一（顶）行可能是您想要终止的查询。我假设下面的 pid 为 1234。

您可以通过 SQL 取消查询（即没有 shell 访问权限），只要它是您的或您具有超级用户访问权限：

```
select pg_cancel_backend(1234); 
```

这是取消 1234 查询的“友好”请求，幸运的是，它会在一段时间后消失。最终，这更有效：

```
select pg_terminate_backend(1234); 
```

如果您有 shell 访问权限和 root 或 postgres 权限，您也可以从 shell 执行此操作。要“取消”，可以这样做：

```
kill -INT 1234 
```

并“终止”，简单地说：

```
kill 1234 
```

**不要：**

```
kill -9 1234 
```

...这通常会导致整个postgres服务器陷入困境，那么您不妨重新启动postgres。Postgres 非常健壮，因此数据不会被破坏，但我建议在任何情况下都不要使用“kill -9”:-)

* * *

长期的“事务空闲”通常意味着事务没有通过“提交”或“回滚”终止，这意味着应用程序存在错误或未正确设计为与事务数据库一起使用。应该避免长时间的“事务空闲”，因为它也可能导致严重的性能问题。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-05-07T16:04:27.713

试试这个：

```
select pg_terminate_backend(pid int) 
```

您可以在[此处](http://www.postgresql.org/docs/current/static/functions-admin.html#FUNCTIONS-ADMIN-SIGNAL-TABLE)找到更多相关信息。这应该是比系统杀死进程更“干净”的解决方案。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-02T23:44:02.093

您可以安装[`heroku-pg-extras`](https://github.com/heroku/heroku-pg-extras)插件并运行以下命令来获取 PID：

```
heroku pg:locks --app <your-app> 
```

然后做：

```
heroku pg:kill <pid> --app <your-app> 
```

**注意**：`--force`选项可用于发出 pg_terminate_backend 删除该查询的整个连接。

如果`heroku pg:locks`没有列出任何内容，请尝试`heroku pg:ps`.

有关更多信息，请查看：
[https ://devcenter.heroku.com/articles/heroku-postgresql#pg-ps-pg-kill-pg-killall](https://devcenter.heroku.com/articles/heroku-postgresql#pg-ps-pg-kill-pg-killall)

# javascript - OpenLayers：自动将 EPSG 4326 - 坐标从文本层转换为地图投影 (EPSG:900913)

> ID：11291457
> 
> 赞同：1
> 
> 时间：2012-07-02T10:00:59.483
> 
> 标签：javascript, openlayers, openstreetmap

目前，我正在使用 Mono4Droid 实现地图应用程序，并且我正在使用 WebView 来呈现由我自己的 tileserver 提供的地图。我正在使用 OpenLayers 来显示此地图，现在我想使用文本层来显示一些自定义 POI。不幸的是，该地图使用 90013 投影：

```
map = new OpenLayers.Map ("map", {
            controls:[
                new OpenLayers.Control.Navigation(),
                new OpenLayers.Control.PanZoomBar(),
                new OpenLayers.Control.Permalink(),
                new OpenLayers.Control.ScaleLine({geodesic: true}),
                new OpenLayers.Control.Permalink('permalink'),
                new OpenLayers.Control.MousePosition(),                    
                new OpenLayers.Control.Attribution()],
            //maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
            maxResolution: 156543.0339,
            numZoomLevels: 19,
            units: 'm',
            projection: new OpenLayers.Projection("EPSG:900913"),
            displayProjection: new OpenLayers.Projection("EPSG:900913")
        } ); 
```

因此，当我想显示 TextLayer 提供的标记时，我必须使用正确格式的坐标。使地图居中很容易：

```
var lonLat = new OpenLayers.LonLat(lon, lat).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
            map.setCenter (lonLat, zoom); 
```

但是我怎样才能为 TextLayer 自动进行这种转换呢？我想将根据众所周知的 EPSG4326 的经纬度值放入文本层数据文件（经纬度列），而不是根据 900913 的值（我目前正在做什么让它工作）。

有没有办法让 OpenLayers 将 Text Layer 的坐标自动转换为地图中使用的格式？也许是一个回调函数来覆盖像onShow？

谢谢你的帮助！否则我将不得不自己翻译纬度值并将计算出的值放入文本文件中，这将使性能受到影响......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:12:30.460

最后，我自己找到了答案，我必须说我印象深刻！OpenLayers 相当强大！这是我的解决方案：在地图对象的选项中，您必须将 displayOptions 设置为图层的投影，在我的情况下，它支持 EPSG:4326：

```
displayProjection: new OpenLayers.Projection("EPSG:4326") 
```

然后你只需要注意图层使用这个投影（如果它不是默认值）。就我而言，文本层在 Android 上无法正常工作（在 WebView 中）：单击文本文件中的标记图像时，我无法打开弹出窗口。相反，我根据[日晷示例](http://openlayers.org/dev/examples/sundials-spherical-mercator.html)使用矢量层：

```
new OpenLayers.Layer.Vector("TextLayer", {
            projection: map.displayProjection,
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "layerdata/chargingstationsmaptxtlayer.txt",
                format: new OpenLayers.Format.Text({
                    extractStyles: true,
                    extractAttributes: true
                })
            })
        }); 
```

在文本文件中，我现在可以使用 EPSG-4326 格式的 LatLon 值。这很容易;-)

# java - api中的接口和实现分离

> ID：11291458
> 
> 赞同：1
> 
> 时间：2012-07-02T10:01:09.433
> 
> 标签：java, api

我正在编写一个框架，`jUnit`用于在 Java 中编写脚本测试。

它是基于任务的，每个任务都按顺序执行。这是一个简化的视图：

所有任务使用的界面看起来像

```
public interface Task {
    void run(Callback callback);
} 
```

接口为任务提供`Callback`了一种告诉执行者它已经完成的方法。

```
public interface Callback {
    void done();
    void failed(String wtf);
} 
```

我还为用户提供了到执行器、外部（物理）接口和设置类的接口。我称之为运行时环境，并抽象地实现：

```
public abstract class RuntimeEnvironment {
    void execute(Task task) { ... }
    void schedule(Task task, long delay) { ... }
    SomeExternalInterface external();
    Settings settings();
} 
```

其中`SomeExternalInterface`和`Settings`是框架和实现用户都使用的接口。

框架可能会使用`threadPoolSize`from `Settings`、'initialize()' 和 'cleanUp()'等成员`SomeExternalInterface`

此类传递给任务的方式目前是通过实现任务类的构造函数。我不喜欢这个。`Task`与在接口中指定 RuntimeEnvironment 相比，它产生了一个模棱两可的 api

为什么不把它添加到你问的任务界面中呢？喜欢

```
public interface Task {
    void run(Callback callback, RuntimeEnvironment runtime);
} 
```

因为，运行`runtime.settings().getThreadPoolSize()`是好的（因为它在接口中指定），但是如果用户希望能够获得`runtime.settings().getWonkyTimeUnit()`或者`runtime.external().attemptToDefuseImminentExplotion()`他或她在各自接口的实现中指定呢？runtime.settings() 返回接口，而不是实现类。

所以 ...

## 如何允许 api 用户指定他（或她）自己的实现而不影响 api 的泛化性和明确性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:13:58.270

如果用户可以拥有自己的设置和外部实现/接口，则必须允许。您的 api 必须能够设置/定义类型。

```
public abstract class RuntimeEnvironment<E, S extends Settings> {
...

   E external();
   S settings();
...
} 
```

是一种可能性。用户可以实现抽象类并返回他自己的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:10:00.513

如果它完全是关于设置或更好的配置，你可以看看 Apache Hadoop 是如何处理这种情况的。他们有一个`Context`存放`Configuration`班级的地方。`RuntimeEnvironment`和你的一样`Settings`。在内部，`Configuration`该类使用`Map`所有配置，您可以通过您提供特定配置的键访问它们。请参阅：[Hadoop 配置](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/conf/Configuration.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:08:13.087

您可以允许使用字符串获取/设置自定义设置：`runtime.settings().set("wonky_time_unit");`以便用户可以添加任意数量的属性，并且可以通过设置界面使用它们：`runtime.settings().set("attemptToDefuseImminentExplotion") = true;`.

# batch-file - 分析批处理文件中的变量

> ID：11291459
> 
> 赞同：1
> 
> 时间：2012-07-02T10:01:11.807
> 
> 标签：batch-file

我有一个脚本，在代码中间我需要分析一个变量，我在一个很长的代码中做这一切。因此，例如我的变量可能是`variable=word1:word2`左右`variable=word1`我有 2 种情况，一种是变量由一个单词组成，另一种我现在有 2 个单词分隔，`:` 如果`variable=word1`然后我不想做任何事情，但是如果`variable=word1:word2`然后`SET variable=word1`和`SET variable2=word2`

顺便说一句，我不知道 word1 或 word2 有多长，所以我不能按它们的位置将它们分开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:09:02.000

这应该做你需要的。

只需在需要它们的地方`var1`使用。`var2`

```
@echo off
setlocal enabledelayedexpansion
set var=word1:word2
echo %var% | find ":" >nul
if %errorlevel%==0 (
rem It does have 2 vars
for /f "tokens=1* delims=:" %%a in ("%var%") do set var1=%%a && set var2=%%b
echo !var1!
echo !var2!
) else (
rem Only 1 var
)
pause >nul 
```

# navigation - Caliburn.Micro 中的导航 - 如何替换整个窗口

> ID：11291460
> 
> 赞同：0
> 
> 时间：2012-07-02T10:01:12.083
> 
> 标签：navigation, caliburn.micro

我已经阅读了一些关于导航如何在**Caliburn.Micro**`Screen`中工作的文章，但它们似乎不符合我的要求。`Conductor<T>`

 **我的 WPF 应用程序有 3 个视图：

1.  当用户启动应用程序时，会显示一个**欢迎屏幕**，应用程序会在后台进行一些启动工作。
2.  当应用程序完成启动过程时，它会导航到一个**列表视图**。
3.  当用户单击**列表视图**中的项目时，它会进入**详细视图**

但是，在不同视图之间导航时，我需要替换**整个窗口**，当视图中有 a 并替换**部分**视图时似乎`Conductor<T>`有效，现在我需要**销毁**以前的视图并替换它，**没有 ContentControl，没有 MDI 应用程序**，那么实现这个简单的导航我错过了什么？`ContentControl`

 ******谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:08:34.963

为什么这不能是消耗整个 shell Window的`ShellViewModel`/`ShellView`呢？`ContentControl`或者，您可以查看Caliburn.Micro 提供的[WindowManager类。](http://www.mindscapehq.com/blog/index.php/2012/03/13/caliburn-micro-part-5-the-window-manager)********

# bash - Bash：在读取/写入命名管道时替代 cat

> ID：11291465
> 
> 赞同：1
> 
> 时间：2012-07-02T10:01:32.007
> 
> 标签：bash

我正在启动一个进程，并将其输出重定向到命名管道。我用 with 重新连接到命名管道`cat > $pipe`。当进程的标准输出死亡而没有轮询父进程的死亡时，如何将命名管道设置为死亡？

除此之外，还有什么`cat`可以用来打开命名管道？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:32:27.940

fifo 始终*准备好*进行读写，因此程序喜欢`cat`并且`tail -f`永远不会停止读取。您要检查的是是否有进程写入该文件，如果没有这样的进程，则停止读取。（顺便说一句，读取文件的最佳方法就是`read`它。）

`lsof`可以告诉您谁从/向指定文件读写。查看其手册页，然后尝试以下操作：

```
while lsof /path/to/fifo
do 
    read -r line < /path/to/fifo
    printf "%s\n" "$line"
done 
```

我不确定，也没有时间研究 lsof，以找出哪个选项仅输出*写入*该文件的进程。请在手册页上查看。
因此，只要有一个写入 fifo 的进程，这个脚本就会读取一行并打印出来。一旦没有进程写入文件，循环就会中断并且脚本退出。

除了使用`lsof`. 如果有人确实知道更标准的方式，我也想知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:12:42.170

`cat > $pipe`写入管道，而不是从中读取。

如果您想从管道中读取数据并在终端上打印，请尝试`tail -f $pipe`.

当新数据写入管道时，该`-f`选项会继续运行并打印输出。`tail`

另请参阅 Linux Journal 中的这篇[文章](http://www.linuxjournal.com/article/2156)。

# opengl-es - 是否可以在绘图调用中使用超过 1 个 VertexArrayObject？

> ID：11291467
> 
> 赞同：0
> 
> 时间：2012-07-02T10:01:32.767
> 
> 标签：opengl-es, opengl-es-2.0

主题行确实说明了一切，我只是假设您可以使用超过 1 个，但我无法让它在 OpenGL ES 2.0 中使用多个。我认为也许对于多个绘制调用的细粒度共享，使用超过 1 个 VertexArrayObject 会很有用，但我现在想不出一个特定的用例。

可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:40:01.327

不，当时绑定的 VAO 不能超过一个。这就是 VAO 的目的 - 只需一次调用即可简化顶点属性的绑定。如果您想对单个属性绑定进行更多控制，请不要使用 VAO，只需单独绑定顶点属性。

# c# - Javascript setTimeOut 函数与 .net 中 Windows 应用程序的 Timer 时间不匹配？

> ID：11291468
> 
> 赞同：0
> 
> 时间：2012-07-02T10:01:33.373
> 
> 标签：c#, javascript, windows, settimeout

我正在使用 C#.Net 中的一个 Windows 应用程序和一个 Web 应用程序。我在 Windows 应用程序上使用了 Timer 控件，并`SetTimeOut()`在 Web 应用程序中使用了函数。但是当我同时运行 1 或 2 分钟后显示的秒数少于 Windows 应用程序时间。

使用 Java 脚本代码，例如：

```
function TimerDisplay(hour, min, sec, id) 
{
      $("#" + id).html(hour.pad() + ":" + min.pad() + ":" + sec.pad());
    if (sec >= 59) {
        sec = 0;
        if (min >= 59) {
            min = 0;
            sec = 0;
            hour += 1;
        }
        else {
            min += 1;
            sec = 0;
        }
    } 
    else
        sec += 1;
    setTimeout(function () { TimerDisplay(hour, min, sec, id); }, 1000);  
}

Number.prototype.pad = function () {
    return (this < 10 ? '0' : '') + this;
} 
```

如果有人有想法，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:09:28.610

Javascript 的*setTimeout*不会在准确的时间运行，它会在间隔到期后放入队列中运行。如果 CPU 很忙，它可能会在间隔之后运行相当长的一段时间。

如果您想要更准确的间隔，则需要以更频繁的间隔运行函数，并尝试估计下一次调用的时间应尽可能接近所需的间隔。请参阅[高效秒表](https://stackoverflow.com/questions/6935920/efficient-stopwatch/6936028#6936028)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:15:28.117

Javascript 是单线程应用程序，因此可能不会定期调用设置超时，因为 CPU 可能正忙于执行某些其他类型的任务。

# javascript - 使用 javascript 按下 GMail 的样式按钮

> ID：11291469
> 
> 赞同：-4
> 
> 时间：2012-07-02T10:01:43.957
> 
> 标签：javascript, gmail

我正在 GMail 中编辑邮件。我想按下其中一个样式按钮，例如“缩进”、“缩进”、“从右到左”等。

我不想通过按下来做到这一点，而是通过在地址栏中键入一段 javascript 并按下回车键。

（我有兴趣这样做，所以我可以编写一个使用键盘而不是鼠标按下按钮的脚本。）

这可能吗？

***赏金：***

赏金将颁发给提供*完整*、有效的解决方案的人，我可以将其放入 Chrome 的地址栏中以使按钮（如“缩进”、“链接”、“外缩”、“从右到左”等）被按下。（当然，每个按钮的线路不同。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:28:42.483

要选择元素，您首先需要选择 iframe

```
var inlineFrame = document.getElementById("canvas_frame"); 
```

接下来，您可以从 iframe 获取 contentwindow（iframe 的窗口范围），如下所示：

```
var contentwindow = inlineFrame.contentWindow; 
```

接下来使用 queryselector（仅限真实浏览器（不支持 IE8）），您可以像这样选择按钮。（`[command='+bold']`简单的意思是：*任何带有属性命令的元素，其值为 '+bold'*，就像在 CSS 中一样）。

```
var button = contentwindow.document.querySelector("[command='+bold']"); 
```

如果您检查相关按钮，它们都包含您可以用来选择它们的命令属性。接下来，您可以随心所欲地使用按钮（在 stackoverflow 上寻找其他答案以了解模拟事件的不同方法，因为您应该能够自己做到这一点）。

如果你想把它作为一个书签，你当然也可以用它做一行，但我认为这样作为答案会更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:37:30.620

首先，你需要弄清楚你想要被“点击”的 DOM 元素的 ID/标签索引/css 类，然后使用选择器访问它，最后调用它的点击事件。

要动态选择一个 DOM 元素，你可以使用`document.getElementById(<id>)`如果你知道它的 ID，然后`document.getElementsByTagName(<tagName>)[<index>]`如果你知道它的标签名称和索引。

如果您只知道元素使用特定的 css 类，您仍然可以循环每个标签，直到`element.className==<className>`或动态导入 jquery 然后调用`$('.<className>').trigger('click');`

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:03:38.033

试试看`Ctrl+B`，`Ctrl+I`是`Ctrl+U` 这个意思吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:34:24.450

*Disclaimer: More or a generic answer, not directly related to Gmail.*

To click any element on a page, you can use the [`element.click()`](https://developer.mozilla.org/en/DOM/element.click) method. Please note that all elements do not have the click method. `<input>` elements support though.

I'm not sure if you can access the `document` object from the URL bar. So if I were using Firefox, I would open Firebg or better, the Scratch Pad (Tools > Web Developer > Scratch Pad) and write something like this:-

```
javascript:function foo(){document.getElementById('link1').click();}foo(); 
```

Upon executing the above code, it will invoke the `click` method on the element with the ID 'link1'.

# c# - asp.NET 中的访问控制

> ID：11291472
> 
> 赞同：0
> 
> 时间：2012-07-02T10:01:57.933
> 
> 标签：c#, asp.net, webforms

我想管理我的用户的访问控制，并允许每个角色在网站中使用不同的页面。每个用户，也可能有不同的行。

我想知道处理此访问控制的最佳方法是什么。但是，我有这些限制。这些角色是在我正在使用的 Oracle 数据库上创建的，我不会使用 APP_DATA 中的 ASPNETDB 来管理角色。

我最初的想法是验证用户的访问权限并创建一个会话来说明他是管理员、用户还是两者兼而有之。但是，我仍然需要想办法相应地隐藏/显示菜单项。我没有继续这个想法，因为我相信 asp.NET 4.0 会为这个用途准备好一些东西。

更新：我正在使用 Web 表单

更新#2：我没有使用登录表单。我正在检索登录人的 Windows 用户名，并将其与数据库中该用户名的访问权限进行比较。认证机制是手动的，只需要弄清楚如何区分角色以及如何显示不同的菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:41:36.403

您是否考虑过使用 Oracle Provider 作为会员和角色

查看 [http://docs.oracle.com/html/E10928_01/IntroInstallation.htm](http://docs.oracle.com/html/E10928_01/IntroInstallation.htm) http://www.oracle.com/technetwork/topics/dotnet/index-087367.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:06:21.593

您可以尝试覆盖 IPrincipal 和 IIdentity，

```
And use these method 

IsInRole("TestRole") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:33:09.557

您可以实现自己的自定义成员资格和角色提供程序。其实没那么难。

使用 Google 搜索“实现自定义会员提供程序”，您会发现很多文章解释了如何做到这一点。我发现一个很好的：

[如何为 ASP.NET MVC 2 创建自定义成员资格提供程序？](https://stackoverflow.com/questions/2771094/how-do-i-create-a-custom-membership-provider-for-asp-net-mvc-2)

在实现提供程序并在 web.config 中注册它们之后，您可以使用常规方法进行访问控制（web config 中的授权，cs 代码中的 IsInrole 等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:55:11.617

看看 Forms 身份验证如何在 Asp.net 中工作，这与您使用的技术（webforms 或 mvc）以及您为用户使用的数据源（可以是 sql、xml 或其他）无关。例如，一旦您的用户通过您的数据源进行身份验证（例如：用户表中存在用户名和密码），您就可以为 IPrincipal User 对象分配您想要的角色并将其标记为经过身份验证。然后将这些值存储在 cookie 中，显示身份验证机制如何独立于应用程序数据源。欲了解更多信息： [http ://www.eggheadcafe.com/tutorials/asp-net/009e2e5e-5a44-4050-8233-59a0d69844e8/basics-forms-authentication-in-aspnet-20.aspx](http://www.eggheadcafe.com/tutorials/asp-net/009e2e5e-5a44-4050-8233-59a0d69844e8/basics-forms-authentication-in-aspnet-20.aspx)

[http://msdn.microsoft.com/en-us/library/aa480476.aspx](http://msdn.microsoft.com/en-us/library/aa480476.aspx)

[.NET 中用于 CAS Shibboleth 的 MembershipProvider](https://stackoverflow.com/questions/8356314/membershipprovider-in-net-for-cas-shibboleth/8398412#8398412)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T11:45:55.330

不要使用 session 来存储此类信息，因为 session 和身份验证不同步。您可以在 Asp.Net Membership 提供程序中使用构建，也可以编写自定义代码来创建身份验证 cookie。这是一个使用身份验证 cookie 的示例。UserModel 包含附加信息（角色、用户名），并将与身份验证票一起以安全加密的形式存储。

```
private void CreateAuthentificationTicet(UserModel user)
{
    var serializedUser = JsonConvert.SerializeObject(user);
    var ticket = new FormsAuthenticationTicket(1,               // version 
                                            user.Email,  // user name
                                            DateTime.Now,    // create time
                                            DateTime.Now.AddMinutes(30), // expire time
                                            false,           // persistent
                                            serializedUser);             // user data

    var strEncryptedTicket = FormsAuthentication.Encrypt(ticket);
    var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, strEncryptedTicket);
    Response.Cookies.Add(cookie);
} 
```

# birt - BIRT 的分页符在 IE 8 上不起作用

> ID：11291474
> 
> 赞同：0
> 
> 时间：2012-07-02T10:02:20.710
> 
> 标签：birt, page-break

我们使用 BIRT 报告生成 HTML 文件，它适用于 IE 6，但它不适用于 IE 8。

我下载了 BIRT 生成的 HTML 并修改它以进行测试。最后，我找到了直接编辑 HTML 文件的解决方案。（参见[http://basdebie.com/problem-solvers/ie-8-page-break-afteralways-problem/](http://basdebie.com/problem-solvers/ie-8-page-break-afteralways-problem/)）。

但问题是我无法在每个页面中添加 CSS。我在body标签之后添加它，它只显示在第一页。但是表格会显示在每一页中。是否有任何解决方案可以在 BIRT 的每个页面中添加它？

```
<body>
    <text id="896">
        <property name="contentType">auto</property>
        <text-property name="content"><![CDATA[ ]]></text-property>
    </text>
    <table id="16">
        <property name="width">100%</property>
        <property name="dataSet">Data Set</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:17:27.260

我在页眉中添加了一个文本元素，它现在可以在 IE 8 中使用。

```
 <page-header>
            <text id="897">
                <property name="contentType">auto</property>
                <text-property name="content"><![CDATA[ ]]></text-property>
            </text>
        </page-header> 
```

BIRT 在每一页中生成代码。

```
 <div>
            <div id="AUTOGENBOOKMARK_1" style=" text-align:left;">&nbsp;</div>
        </div> 
```

# algorithm - 这个伪代码的渐近复杂度是多少？

> ID：11291475
> 
> 赞同：2
> 
> 时间：2012-07-02T10:02:22.133
> 
> 标签：algorithm, time-complexity, pseudocode, asymptotic-complexity

你能告诉我这段代码的渐近复杂度吗？

```
f(n):
if (n<=2) then return 1;
else { 
     if (n>950) then { i=n/2; return f(i);}
     else return f(n-2);
} 
```

我想到了两种解决方案。

一种）

```
O(1)         when n<=2
T(n/2) + 1   when n > 950
T(n-2) + 1   when 950>=n>2 
```

并解决重复问题：

```
O(1)         when n<=2
Θ(log n)     when n > 950
O(n^2)       when 950>=n>2 
```

b) 但是我不太确定最后两个语句的复杂性，因为如果 n 大于 950，算法将调用 f(i)，直到 i 小于 950，然后继续调用 f(n-2)。所以，另一种解决方案是这个：

```
O(1)                  when n<=2
T(n/2) + T(n-2) + 1   otherwise 
```

并解决重复问题：

```
O(1)         when n<=2
O(n^2)       otherwise 
```

我实际上认为第二个是正确的，但我不确定。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:12:43.310

好的，所以首先要考虑如果 n*真的很*大会发生什么。最终 n 将足够大，它将支配其他一切。果然，直到你降到 n=950，你将得到 O(lg n)，其中“lg”表示以 2 为底的对数。（为什么我马上就知道这一点？因为 n 的大小减小了一个幂每次迭代两个。）

一旦 n 下降到 950，那么它每次都会减少 2，所以从 950 到 2 是 O(n)——因为你基本上达到了一半的值，而 1/2 消失在常数中。

但是请注意，存在一个 lg n > 950/2 的 n 值。因此，对于某些 n 值，lg n 项将占主导地位。O(lg n)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:08:42.360

对于 n<=2，O(1)。

O(1) for 2 < n <= 950 - 它需要恒定的时间 (950/2)。

对于 n>950，T(n/2)。

所以你得到：T(n) = T(n/2) + 0(1)。

总复杂度 = O(log n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:08:46.627

渐近行为是对复杂性增长的描述，它不是一个可以将*n*的单个值插入的函数。*因此，对于n*的不同值有两个或三个不同的语句是没有意义的。

考虑到*n* -> 无穷大，*n* < 950 的行为变得可以忽略不计。

# wpf - 如何在 wpf 中动态地将 UserControl 加载到 Dockpanel...

> ID：11291476
> 
> 赞同：0
> 
> 时间：2012-07-02T10:02:26.703
> 
> 标签：wpf, events, delegates

我正在使用`RibbonWindow`, 在第一部分中我使用ribbonBar 按钮和其他控件，在第二部分中我曾经`DockPanel` 显示/加载其他控件

我有两个用户控件，一个是使用`TextBox` 和`DropDown`控件显示详细信息，另一个用户控件是显示 DataGrid 中的所有现有数据。

这两个控件必须根据 Condition 放置在 DockPanel 中，它位于`RibbonWindow`...

现在，我想要的是，当我单击任何 Grid 行时，我需要将选定的 GridRow 数据填充到 DisplayUserControl（userControl1）中，并且 userControl 必须加载（替换第二个 userControl）到该 DockPanel ...

我所做的是......

`UserControl2`首先，我加载`Dockpanel`并 `RibbonWindow`填充 Grid 数据

我已经使用 ClickEvent
( `GridList_MouseDoubleClick()`)获取了网格行的值

在那个方法中，我调用了一个 DelegateEvent 来调用在 MainRibbonWindow 中声明的方法......

该方法应该显示`DockPanel`并加载另一个用户控件。代码如下。

下面的方法在 MainRibbonWindow ...

```
public void fnDisplayEmployeeDetails(string str,DockPanel dockPannel)
{
    //  dockPannel is to be cleared...
     this.Dispatcher.BeginInvoke((Action)delegate { dockPannel.Children.Clear(); }, null);  //To Clear the Dock Panel

    CtlAddEmployee frm2 = new CtlAddEmployee(str); //userControl1 and here str is Id of the Row...

    dockPannel.Children.Add(frm2);

} 
```

到这里所有的工作都完成了，但`DockPanel`剩下的只有第二个 userControl（即仅显示网格）。停靠面板未替换为 firstUserControl

如果我试图在另一个 Window 的 Dockpanel 中显示这些相同的值，它显示得很好。我不知道为什么会发生这种奇怪的行为......

```
public void fnDisplayEmployeeDetails(string str,DockPanel docPannel)
{
    this.Dispatcher.BeginInvoke((Action)delegate { docPannel.Children.Clear(); }, null);  //To Clear the Dock Panel

    CtlAddEmployee frm2 = new CtlAddEmployee(str);
    MainWindow mnWindow = new MainWindow();    //another window Form...
    mnWindow.MainWindowDock.Children.Add(frm2);
    mnWindow.ShowDialog();  //here it is showing well....
} 
```

我应该如何在另一个用户控件中显示网格值的详细信息，并且该用户控件必须填写在同一个 Dockpanel 中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:59:27.803

您是否尝试过不委托添加子控件？我发现当您从不同的线程访问 UI 组件时会发生这些行为。在不同窗口的情况下（第二个测试有效），由于新窗口是在该新线程中创建的，因此交互工作正常......

# java - 以编程方式锁定Android中的电话？

> ID：11291482
> 
> 赞同：2
> 
> 时间：2012-07-02T10:02:55.267
> 
> 标签：java, android

我试图锁定设备并尝试使用以下代码启用它，但它不起作用。我还获得了以下两个许可并且没有显示该手机已锁定......我也尝试再次解锁它。

```
public class LockPhoneActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    Button lock, unlock;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        lock = (Button) findViewById(R.id.button1);
        unlock = (Button) findViewById(R.id.button2);

        lock.setOnClickListener(this);
        unlock.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {

        case R.id.button1:

            KeyguardManager mgr = (KeyguardManager) getSystemService(Activity.KEYGUARD_SERVICE);
            KeyguardLock lock = mgr.newKeyguardLock(KEYGUARD_SERVICE);
            lock.reenableKeyguard();

            Toast.makeText(getApplicationContext(), "Locked", Toast.LENGTH_LONG)
                    .show();

            break;

        case R.id.button2:

            KeyguardManager mgr1 = (KeyguardManager) getSystemService(Activity.KEYGUARD_SERVICE);
            KeyguardLock lock1 = mgr1.newKeyguardLock(KEYGUARD_SERVICE);

            lock1.disableKeyguard();

            break;
        }
    }
} 
```

我还获得了以下许可...

```
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:14:27.613

你也可以通过设备管理员来完成

```
DevicePolicyManager mDPM;
mDPM.lockNow(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T10:47:28.360

如果您想通过编程方式锁定 Android 手机屏幕，请查看以下教程。

[**以编程方式锁定 Android 手机屏幕**](http://rdcworld-android.blogspot.in/2012/03/lock-phone-screen-programmtically.html)

我编写了简单的应用程序来实现这一点。

如果您对我的解决方案有任何问题，请让我发表评论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:06:21.440

试试这个：

```
mKeyGuardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
mLock = mKeyGuardManager.newKeyguardLock("alarmRecieve");
((KeyguardLock) mLock).reenableKeyguard(); 
```

# java - Java opengl 立方体渲染

> ID：11291484
> 
> 赞同：1
> 
> 时间：2012-07-02T10:03:03.813
> 
> 标签：java, lwjgl

是否可以像 minecraft 一样使用 java Opengl 创建 400 万个帧速率为 35 fps 的立方体？如果可能的话，我该怎么做？你能给我一些来源的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-23T11:41:26.133

![使用 JogAmp 的 Ardor3D Continuation 进行 ArdorCraftAPI 测试](../Images/1da5c796e626ce353347b5214805e498.png)

你好

我已经在这个使用 JogAmp 的 Ardor3D Continuation 和 JOGL 的[项目中这样做了。](https://github.com/gouessej/ArdorCraftAPITest)[我在这里](http://tinyurl.com/mpuu8or)发布了一些关于它的说明，请查看包含示例的小节。

注意：MrCoder 编写的原始代码使用了一个废弃且未维护的 Ardor3D 版本，其渲染器基于您最喜欢的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:23:34.037

看看[实例化渲染](http://en.wikipedia.org/wiki/Geometry_instancing)。确保你不要在某种循环中调用 OpenGL 方法，因为那会影响你的性能。如果您不想使用实例化渲染，请使用显示列表（但您将无法修改它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:30:21.440

在这种情况下，如果您正确预加载坐标和纹理数据（最好使用[享元对象池](http://en.wikipedia.org/wiki/Flyweight_pattern#Example_in_Java)）并避免在循环内使用“新”，则 java 不是瓶颈。

有一些方法可以优化绘制的立方体的数量。只需避免像大多数现代 FPS 游戏那样绘制远处的物体，使用雾来隐藏半成品形状。你的立方体越小，它们就越难看到，你可以避免绘制它们越近。如果您的 vbo 太大，也请尝试退回到显示列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T16:37:20.943

我现在正在 jogl 做类似的事情。
我确定您已经完成了（在您拥有的 2 年中），但对于旁观者和潜伏者：

1.) VBO（顶点缓冲区对象）比即时模式/显示列表好得多
2.) 自定义着色器（顶点和片段）
3.) 实例化渲染（我现在正试图弄清楚）

以下是其他人对更快多重渲染的看法的一些有用链接：

[http://sol.gfxile.net/cubes.html](http://sol.gfxile.net/cubes.html)
[http://www.opengl.org/wiki/Vertex_Rendering#Multi-Draw](http://www.opengl.org/wiki/Vertex_Rendering#Multi-Draw)

# c# - 从 URI（Http 请求）下载多个文件并压缩它们

> ID：11291486
> 
> 赞同：-2
> 
> 时间：2012-07-02T10:03:04.900
> 
> 标签：c#, asp.net, zipfile, webclient

我想从 URI（HTTP 请求）和 Zip 下载多个文件，一键单击事件中的所有文件。我有如下文件：

```
http://test.com/123.dox

http://test.com/1234.dox

http://test.com/1235.dox 
```

想要一键获取所有文件并压缩所有文件。

请建议我如何存档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:24:41.957

您可以使用 SharpZipLib **“在 IIS 中创建一个 Zip 作为浏览器下载附件”**

请参阅链接[http://wiki.sharpdevelop.net/SharpZipLib-Zip-Samples.ashx上的示例](http://wiki.sharpdevelop.net/SharpZipLib-Zip-Samples.ashx)

您可以将 url 作为列表传递以读取文件

从 url 读取文件可能需要您提供代码，请使用以下步骤：

1.  使用 HttpWebRequest.Create(FILE_URL) 创建文件请求
2.  使用 HttpWebRequest.GetResponseStream() 获取流对象
3.  从流中读取内容并写入

# barcode - 使用摩托罗拉 EMDK 2.6 解码 GS1-128 UCC/EAN128

> ID：11291487
> 
> 赞同：1
> 
> 时间：2012-07-02T10:03:17.670
> 
> 标签：barcode, motorola, motorola-emdk

我想用摩托罗拉 emdk 版本 2.6 解码 GS1-128（形式。ECC/EAN128）条码。我使用 ES400 作为测试设备。我只获取本机文本格式的数据。

例如`(01)25416898545645(17)080600(30)0306180021`返回`012541689854564517080600300306180021`。

我没有得到 FNC1 (ascii102) 或 GS​​ (ascii 29) 字符。我尝试了没有结果的“RawData”。

我该如何处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:20:53.433

“缺失”的 FNC1 并非设计使然。规范（GS1 通用规范）规定，第一个位置的 FNC1 不应在传输的消息中表示。

此外，在固定长度的应用标识符之后和条形码中的最后一个 AI 之后不需要 FNC1。您的 AI 的 01 和 17 使用数据长度 14 和 6 定义。AI 30 是可变长度，但也是条形码中的最后一个元素，因此不需要 FNC1。

所以要解码GS1-128：（读取AI，如果长度定义为固定，读取x个字符。如果是可变长度，读取到FNC1或条形码末尾）重复直到条形码末尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T20:12:29.180

第一个 FNC1 不应该被解码为 ascii102，而是“]C1”。看看[AIM Symbology Identifiers](http://www.morovia.com/education/aim-si.asp)。

下一个 FNC1 应该被解码为，`<GS>`但您可能看不到它们。尝试在文本编辑器中扫描它们，将其保存并加载到像 Scite 这样的文本编辑器中，您可以在其中看到控制字符。

您可以将摩托罗拉的 DataWedge 配置为显示 AIM 符号标识符，并映射`<GS>`到常用字符，例如`$`或`=`。

# jquery - jQuery中有没有办法确定一个元素是否有一个类？

> ID：11291489
> 
> 赞同：3
> 
> 时间：2012-07-02T10:03:26.793
> 
> 标签：jquery

我使用以下方法确定元素是否隐藏：

```
if ($("#sidebar").is(':hidden')) { 
```

有什么方法可以确定#sidebar 是否具有“黑色”类而不是检查它是否隐藏？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T10:04:11.723

Api：`.hasClass('black')`将为您解决**工作演示** [http://jsfiddle.net/xvA8d/2/](http://jsfiddle.net/xvA8d/2/)

链接：[http ://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

> 确定是否为任何匹配的元素分配了给定的类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T10:06:57.433

有很多方法：

*   [`.hasClass('whatever')`](http://api.jquery.com/hasClass/)
*   [`.is('.whatever')`](http://api.jquery.com/is/)
*   `.prop('className') == 'whatever'`

它们都有自己的优点和缺点：

*   `hasClass`：通常最好的选择，检查元素是否有给定的类，不管它是否还有其他类。
*   `is`: 检查选择器。比 hasClass 慢，因为它调用选择器引擎，除此之外并没有什么不同。更灵活，因为您可以将它与其他选择器混合使用，而不是在需要时检查类。
*   `className`：检查元素是否只有给定的类。通常不是你想要的，但因为它*是*一种方式而被提及。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-02T10:04:41.413

```
if ($("#sidebar").hasClass('black')) { 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-02T10:06:56.857

您可以使用[`.hasClass('black')`](http://api.jquery.com/hasClass/)：

```
if($('#sidebar').hasClass('black'); 
```

或者，您可以使用`.is()`更大的灵活性：

```
if($('#sidebar').is('.black'); 
```

[`.is()`](http://api.jquery.com/is/)允许您使用 jQuery 提供的各种其他选择器过滤元素。但是，请注意`.hasClass()`，正如[this answer](https://stackoverflow.com/a/4901593/383609)所述，这更快。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-02T10:04:24.607

```
if($("#sidebar").hasClass('black')) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-02T10:04:34.870

```
if ($("#sidebar").hasClass('black')) { 
```

[文档](http://api.jquery.com/hasClass/)。_

# unit-testing - grails 2.0.1 单元测试 NullPointerException 保存

> ID：11291495
> 
> 赞同：4
> 
> 时间：2012-07-02T10:03:54.783
> 
> 标签：unit-testing, grails, mocking, grails-orm

我在 grails 中的单元测试有一个奇怪的问题，当我尝试保存一个模拟对象时，它会抛出一个 NullPointerException

```
 java.lang.NullPointerException
at org.grails.datastore.mapping.engine.NativeEntryEntityPersister.persistEntity(NativeEntryEntityPersister.java:798)
at org.grails.datastore.mapping.engine.EntityPersister.persist(EntityPersister.java:130)
at org.grails.datastore.mapping.core.AbstractSession.persist(AbstractSession.java:477)
at org.grails.datastore.gorm.GormInstanceApi.doSave(GormInstanceApi.groovy:166)
at org.grails.datastore.gorm.GormInstanceApi$_save_closure4.doCall(GormInstanceApi.groovy:143)
at org.grails.datastore.mapping.core.DatastoreUtils.execute(DatastoreUtils.java:301)
at org.grails.datastore.gorm.AbstractDatastoreApi.execute(AbstractDatastoreApi.groovy:34)
at org.grails.datastore.gorm.GormInstanceApi.save(GormInstanceApi.groovy:142)
at it.rascio.ConverterServiceTests.testConvert(ConverterServiceTests.groovy:64) 
```

我有什么测试：

```
@TestFor(ConverterService)
@TestMixin(GrailsUnitTestMixin)
@Mock([MyObj1, MyObj2, LittleObject])
class ConverterServiceTests{
   def littleObject;
   void setUp(){
         littleObject = new LittleObject(prop1: 'hello', prop2: 'world')
   }

   void testConvert(){
    MyObj1 obj = new MyObj1()
    obj.prop = 'my property'
    obj.littleObject = littleObject
    obj = obj.save(flush:true, failOnError: true)

    MyObj2 b = new MyObj2()
    b.obj1Id = obj.id;

    assert service.convert(b) == null;

} 
```

当我调用*.save*方法时抛出异常。我已经看到，如果我删除*littleObject*它会起作用。有人可以知道这个例外是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T10:19:28.597

如果您的类`MyObj1`包含其他类型的一些嵌入式属性或具有任何其他级联保存，则应将这些类添加到`@Mock`注释列表中。

# php - Doctrine 2 - 多数据库配置和使用

> ID：11291502
> 
> 赞同：13
> 
> 时间：2012-07-02T10:04:19.033
> 
> 标签：php, orm, symfony, doctrine-orm

我有一个带有 MySQL 数据库的 Symfony2 项目：

```
#app/config/config.yml
doctrine:
    dbal:
        driver:   %database_driver%    # <
        host:     %database_host%      # |
        port:     %database_port%      # | Defined in
        dbname:   %database_name%      # | parameters.ini
        user:     %database_user%      # |
        password: %database_password%  # <

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true 
```

现在我想对另一个数据库进行简单的查询（如例行调用）。

我应该在配置文件中定义另一个 dbal 吗？
如果是，如何在保持项目默认连接的同时对其进行配置？
我必须为每个连接配置一个 orm 吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-02T10:20:40.663

您需要添加另一个级别的配置并使用[多个实体管理器](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)，因为 Doctrine 每个数据库连接使用 1 个实体管理器。您的配置可能如下所示：

```
doctrine:
    dbal:
      connections:
        default:
          driver:   %database_driver%    # <
          host:     %database_host%      # |
          port:     %database_port%      # | Defined in
          dbname:   %database_name%      # | parameters.ini
          user:     %database_user%      # |
          password: %database_password%  # <
        another:
          driver:   %database2_driver%    # <
          host:     %database2_host%      # |
          port:     %database2_port%      # | Defined in
          dbname:   %database2_name%      # | parameters.ini
          user:     %database2_user%      # |
          password: %database2_password%  # < 
```

然后你定义你的多个实体管理器

```
doctrine:
    orm:
        default_entity_manager:   default
        entity_managers:
            default:
                connection:       default
                mappings:
                    AcmeDemoBundle: ~
                    AcmeStoreBundle: ~
            another:
                connection:       another
                mappings:
                    AcmeCustomerBundle: ~ 
```

然后在您的操作中，您可以使用以下内容获取正确的实体管理器：

```
$em = $this->get('doctrine')->getEntityManager('default');
$em = $this->get('doctrine')->getEntityManager('another'); 
```

取决于您需要哪个实体经理

# xslt - exsl:node-set 将什么视为根节点？

> ID：11291505
> 
> 赞同：3
> 
> 时间：2012-07-02T10:04:27.967
> 
> 标签：xslt, exslt, node-set

我无法理解 exsl:node-set 函数的工作原理。

我有一些 XML 正在扩展并用于动态填充 exsl:node-set。假设它目前是这种格式：

```
<xsl:variable name="wrap">
    <nodes>
        <node/>
        <node/>
        <node/>
    </nodes>
</xsl:variable>
<xsl:variable name="wrapNodeSet" select="exsl:node-set($wrap)"/> 
```

这按要求工作，输出 $wrapNodeSet 显示上面的节点标记。根节点名称使用名称（$wrapNodeSet/*）显示为“节点”。

现在我需要扩展它以拥有 2 个节点并动态填充节点集。所以：

```
 <xsl:variable name="wrap">
    <nodes tier="a">
        <node/>
        <node/>
        <node/>
    </nodes>
    <nodes tier="b">
        <node/>
        <node/>
        <node/>
    </nodes>
</xsl:variable>
<xsl:variable name="wrapNodeSet" select="exsl:node-set($wrap)/nodes[@tier='b']"/> 
```

输出节点集包括节点元素，但输出根节点的名称现在更改为“节点”。

有人可以解释为什么仍然输出节点元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:05:33.880

如果我正确理解了您的问题，我相信“直观地”正在发生的事情（实际的幕后实现细节可能有点不同）首先，您的变量指向“匿名节点集”包装`<nodes>`元素的变量。这样做`name($wrapNodeSet/*)`会得到这个匿名节点集的所有直接子节点的名称，在这种情况下，它只是单个`<nodes>`元素的名称。

在第二种情况下，您比匿名节点集更深入，并且变量`nodes[@tier='b']`直接包含单个元素。在这种情况下`name($wrapNodeSet/*)`，选择该元素的所有直接子`<nodes>`元素，并将返回 3 个`<node>`. 如果您对此进行 value-of 选择，它将默认仅显示第一个，这就是为什么您只会在输出中看到“节点”的原因。

要获取第二个实例的根名称，只需`name($wrapNodeSet)`直接执行，您应该会看到“节点”。在第一个实例中执行`$name(wrapNodeSet)`不会返回任何内容，因为匿名节点集没有名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:15:27.927

exslt:node-set 有一个非常非正式的规范，并且可能有关于哪些实现彼此不同的详细信息。在边缘情况下肯定是这样，例如如果 exstl:node-set 的参数不是结果树片段时会发生什么。

我期望的行为是 exslt:node-set() 总是提供一个“根节点”（XPath 2.0 称之为“文档节点”）。XPath 1.0 中定义的根节点没有名称。在您的第一个示例中，根节点有一个名为“nodes”的元素子元素。在您的第二个示例中，根节点有两个元素子元素，它们的名称都为“nodes”。

您说“输出根节点的名称现在更改为 'node'”——这令人困惑，因为 XPath 1.0 定义的术语永远不会有名称。你实际输出了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:09:44.980

```
<xsl:variable name="wrapNodeSet" 
              select="exsl:node-set($wrap)/nodes[@tier='b']"/> 
```

这将从通过扩展`nodes`获得的树中选择任何元素，该元素（元素）具有value 属性。`node-set()``nodes``tier``'b'`

然后：

```
name($wrapNodeSet/*) 
```

生成包含在 中的第一个节点的第一个子元素的名称`$wrapNodeSet`。As只`$wrapNodeSet`包含一个`nodes`元素，并且该`nodes`元素只有`node`子元素，第一个这样的子元素是一个`node`元素及其名称，因为任何`node`元素的名称都是`"node"`.

为什么你会在这个结果中看到任何意想不到的东西？

**换句话说**：

在这两种情况下应用`ext:node-set()`on`$wrap`会生成相同的树，但在第二种情况下，您对结果使用不同的、更长的 XPath 表达式，`ext:node-set($wrap)`因此您从这两个不同的 XPath 表达式的求值中得到不同的结果。

# android - 从Android中的Web服务获取ArrayList后如何填充它

> ID：11291513
> 
> 赞同：0
> 
> 时间：2012-07-02T10:04:49.380
> 
> 标签：android

我是 android 新手，这是我第一次使用 AsyncTask。我做了一个非常简单的 Web 服务，它返回 ArrayList，比如

```
package pk.mazars.basitMahmood.weatherReport;

public class WeekDays {

    private String name;
    private String weather;
    private float temperature;

    public  WeekDays(String name, String weather, float temperature) {      
        this.name = name;
        this.weather = weather;
        this.temperature = temperature;         
    } //end of constructor  
    //--------------Getters and Setters 
} //end of class WeekDays

public class WeatherReport {

    public ArrayList<WeekDays> weatherReport() {

        ArrayList<WeekDays> weatherList = new ArrayList<WeekDays>();
        weatherList.add(new WeekDays("Monday", "Cloudy", 29.5F));
        weatherList.add(new WeekDays("Tuesday", "Normal", 32.3F));
        weatherList.add(new WeekDays("Wednesday", "Sunny", 37.7F));
        weatherList.add(new WeekDays("Thursday", "Cold", 20.2F));
        weatherList.add(new WeekDays("Friday", "Normal", 31.4F));
        weatherList.add(new WeekDays("Saturday", "Rainy", 22.6F));
        weatherList.add(new WeekDays("Sunday", "Rainy", 27.9F));

        return weatherList;     
    }
} //end of class WeatherReport 
```

然后在android端我使用了代码

```
public class MainActivity extends Activity {

    Button btnStart;
    MyTask objMyTask;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        btnStart = (Button) findViewById(R.id.btnstart);
        btnStart.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View view) {

                objMyTask = new MyTask(MainActivity.this);              
                objMyTask.execute();                
            }           
            }); //end of anonymous class        
        } //end of onCreate()    
    } //end of class MainActivity 
```

这是我的任务

```
public class MyTask extends AsyncTask<Void, Void, ArrayList<?>> {

    ProgressDialog dialog = null;
    Object result = null;
    MainActivity mainActivity;

    public MyTask(MainActivity mainActivity) {      
        this.mainActivity = mainActivity ;          
    }

    @Override
    protected void onPreExecute() {     
        super.onPreExecute();
        if (dialog == null) {           
            dialog = new ProgressDialog(mainActivity);          
        }           
        dialog.setMessage("Please Wait. Your authentication is in progress");       
        dialog.show();      
    } //end of onPreExecute()

    @Override
    protected ArrayList<?> doInBackground(Void... params) {     
        callWebService();           
        return null;        
    } //end of doInBackground()

    @Override
    protected void onPostExecute(ArrayList<?> result) {     
        super.onPostExecute(result);
        dialog.dismiss();   
    } //end of onPostExecute()

} //end of class MyTask 
```

这是webservice方法

```
 private void callWebService() {
    ...       
     try {

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
        envelope.dotNet = false;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION,envelope);

        result = envelope.getResponse();

        if (result instanceof ArrayList<?>) {               
            ArrayList<?> weatherList = (ArrayList<?>)result;                
            for (int i=0; i<weatherList.size(); i++)                    
                Object weekDay = weatherList.get(i);
                System.out.println();                   
            }

        } else {

        }

     } catch (SocketTimeoutException e) {            
         Toast.makeText(mainActivity, "Service is not connected, Please make sure your server is running", Toast.LENGTH_LONG).show();

    }  catch(Exception e) {         
        e.printStackTrace();                            
     }      
} //end of callWebService() 
```

在线

```
result = envelope.getResponse(); 
```

我得到 ArrayList 喜欢

![在此处输入图像描述](../Images/9830be157647ee37a9e988c34b397d2c.png)

但是我不知道如何从列表中获取数据。到达线后

```
if (result instanceof ArrayList<?>) {..} 
```

控制被转移到`onPostExecute()`方法，在这里我得到结果为空。从 ArrayList 获取结果后如何填充数据。另外，当我尝试在 callwebService 方法中填充数据时。如何在`onPostExecute(ArrayList<?> result)`结果变量中获取 ArrayLIst。因为我的方法正在返回 ArrayList 并且返回结果`onPostExecute()`从方法转移到`doInBackground()`方法。同样在`doInBackground()`我可以在哪里检查`isCancel()`类似的方法

```
@Override
protected Void doInBackground(Void... params) {     
    for (int i = 1; i <100; i++) {                  
        if (isCancelled()) {                
            break;              
        } else {                
            System.out.println(i);               
            callWebService();                                   
        }

    } //end of for()                
    return null;        
} //end of doInBackground() 
```

但是如果我检查内部 for 循环，那么我的`callWebService()`方法调用 100 次。因此，就我而言，是否需要调用 isCancelled() 方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:28:59.510

您的方法应该声明为`private ArrayList<?> callWebService()`，并且您应该在完成后从该方法返回您的 arrayList。

同样如上所述，您应该检查您的结果对象是否返回为`Vector`. 如果它作为 Vector 返回，则将其修改为 ArrayList。

最后，在`doInBackround`您的 AsyncTask 中，您应该将`return null`代码更改为，`return callWebService();`因为您的`callWebService()`方法将返回经过上述修改的结果 ArrayList。然后在您`onPostExecute(ArrayList<?> result)`的结果变量中不会为空，而是会从您的网络服务中获得结果 ArrayList。

因此，通过上述修改，您将拥有如下内容：

```
private ArrayList<?> callWebService() {
...       
 try {

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    SoapSerializationEnvelope envelope = new    SoapSerializationEnvelope(SoapEnvelope.VER12);
    envelope.dotNet = false;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.call(SOAP_ACTION,envelope);

    result = envelope.getResponse();

    if (result instanceof ArrayList<?>) {               
        ArrayList<?> weatherList = (ArrayList<?>)result;                
        for (int i=0; i<weatherList.size(); i++)                    
            Object weekDay = weatherList.get(i);
            System.out.println();                   
        }

    } else {

    }

    return result;

 } catch (SocketTimeoutException e) {            
     Toast.makeText(mainActivity, "Service is not connected, Please make sure your server is running", Toast.LENGTH_LONG).show();

}  catch(Exception e) {         
    e.printStackTrace();                            
 }      
 } //end of callWebService() 
```

异步任务：

```
public class MyTask extends AsyncTask<Void, Void, ArrayList<?>> {

ProgressDialog dialog = null;
Object result = null;
MainActivity mainActivity;

public MyTask(MainActivity mainActivity) {      
    this.mainActivity = mainActivity ;          
}

@Override
protected void onPreExecute() {     
    super.onPreExecute();
    if (dialog == null) {           
        dialog = new ProgressDialog(mainActivity);          
    }           
    dialog.setMessage("Please Wait. Your authentication is in progress");       
    dialog.show();      
} //end of onPreExecute()

@Override
protected ArrayList<?> doInBackground(Void... params) {     

    return callWebService();       
} //end of doInBackground()

@Override
protected void onPostExecute(ArrayList<?> result) {     
    super.onPostExecute(result);
    dialog.dismiss();   
} //end of onPostExecute()

} //end of class MyTask 
```

您可以使用以下内容将 Vector 更改为 Array 列表：

```
ArrayList<WeekDays> arraylist = new ArrayList<WeekDays>();
Collectios.copy(arraylist, vector_containing_the_data); 
```

**编辑（基础） ---------------------------------------------- -----------------**

```
@Override
protected void onPostExecute(Vector<?> result) {

    super.onPostExecute(result);

    if (result != null) {

        for (int i=0; i<result.size(); i++) {

            Object weekDay = result.get(i);

            if (weekDay instanceof SoapObject) {

                SoapObject weekDayObject = (SoapObject)weekDay;

                String objectName = weekDayObject.getName();  //WeekDays
                String dayName = weekDayObject.getProperty("name").toString();
                String weather = weekDayObject.getProperty("weather").toString();
                String temp = weekDayObject.getProperty("temperature").toString();

            } //end of if (weekDay instanceof SoapObject)

        } //end of for (int i=0; i<result.size();...)

    } //end of if (result != null)

    dialog.dismiss();

} //end of onPostExecute() 
```

但我认为这应该在 doBackGround() 方法中并在填充 bean 中的值之后完成。然后我应该在我的 onPostExecute() 方法中使用该 bean 来更新 UIThread。但是这段代码对我来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:16:19.750

您的结果对象作为向量返回，而不是 ArrayList。

尝试将内容更改为：

```
 if (result instanceof Vector) {               
            Vector weatherList = (Vector)result; 
```

看看你能不能到任何地方。

# android - 如何使用文本观察器获取（虚拟键盘中的输入、空格、清除按钮）的值

> ID：11291515
> 
> 赞同：1
> 
> 时间：2012-07-02T10:04:53.987
> 
> 标签：android

我正在尝试获取空格、输入、清除按钮的值，但没有成功我也尝试显示敬酒消息，当我按下回车、空格、清除（其中一个）时，它应该给我一条消息“按下 Enter” . 它应该只发生在虚拟键盘上。我只得到字符值。像“按下：A”

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    et = (EditText)findViewById(R.id.entry);
    et.addTextChangedListener(this);

}
@Override
public void afterTextChanged(Editable s) 
{
    Toast.makeText(this,"Pressed : " +s.toString() ,Toast.LENGTH_LONG).show();

}
@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after)
{

}
@Override
public void onTextChanged(CharSequence s, int start, int before, int count)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:04:29.757

将您的 afterTextChanged(Editable s) 修改为：

```
@Override
public void afterTextChanged(Editable s) 
{
    String str = s.toString();
    if(str.substring(str.length()-1, str.length()).equals(" "))
            Toast.makeText(this,"Pressed : Space",Toast.LENGTH_SHORT).show();
    else if(str.substring(str.length()-1, str.length()).equals("\n"))
        Toast.makeText(this,"Pressed : Enter",Toast.LENGTH_SHORT).show();
    else
            Toast.makeText(this,"Pressed : " +str.substring(str.length()-1, str.length()),Toast.LENGTH_SHORT).show();
} 
```

它会解决你的问题。

# c - 关于如何根据给定条件找到标记给定数组的所有元素的最小步骤数的任何提示？

> ID：11291517
> 
> 赞同：0
> 
> 时间：2012-07-02T10:05:00.250
> 
> 标签：c, algorithm

给出了两个整数`N<=10^5`和`K<=N`，其中`N`是数组的大小，`A[]`是`K`我们可以在流程中选择的连续子序列的长度。每个元素`A[i]<=10^9`。现在假设最初数组的所有元素都没有标记。在每一步中，我们将选择任何长度的子序列`K`，如果该子序列具有未标记的元素，那么我们将标记所有序列中最小的未标记元素。现在如何计算标记所有元素的最小步骤数？

为了更好地理解问题，请参见这个例子——

`N=5 K=3` `A[]=40 30 40 30 40`

步骤 1- 选择区间 [1,3] 并标记 A[1] 和 A[3]

Step2- 选择区间 [0,2] 并标记 A[0] 和 A[2]

步骤 3- 选择区间 [2,4] 并标记 A[4]

因此这里的最小步数是 3。

**我的方法（速度不够快，无法通过）-**

我从数组的第一个元素开始，将所有未标记的元素标记为在距离处等于它`<=K`并递增`steps`1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:37:21.650

First consider how you'd answer the question for `K` == `N` (i.e. without any effective restriction on the length of subsequences). Your answer should be that the minimum number of steps is the number of distinct values in the array.

Then consider how this changes as `K` decreases; all that matters is how many copies of a `K`-length interval you need to cover the selection set `{i: A[i] == n}` for each value `n` present in `A`. The naive algorithm of walking a `K`-length interval along `A`, halting at each position `A[i]` not yet covered for that value of `n` is perfectly adequate.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:47:06.910

正如我们所见，最小步数 = N/k 或 N/k+1，最大步数 =(n+k-1)。我们必须优化步骤总数，这取决于我们过去所做的选择历史，即动态解决方案。

有关动态理论教程，请参阅[http://www.quora.com/Dynamic-Programming/How-do-I-get-better-at-DP-Are-there-some-good-resources-or-tutorials-on-it -like-the-TopCoder-tutorial-on-DP/answer/Michal-Danil%C3%A1k](http://www.quora.com/Dynamic-Programming/How-do-I-get-better-at-DP-Are-there-some-good-resources-or-tutorials-on-it-like-the-TopCoder-tutorial-on-DP/answer/Michal-Danil%C3%A1k)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T12:58:42.227

可以在 O(n) 中解决如下：跟踪每个元素 a[i]。如果之前没有跟踪 a[i]，则映射数字及其索引并增加计数器。如果之前跟踪了数字，则检查其 (last index-curr_index)>=K 是否更新索引并增加计数。打印计数。Map STL 将是有益的。

# c++ - 将指针设置为零是否等同于将其设置为 NULL？

> ID：11291518
> 
> 赞同：0
> 
> 时间：2012-07-02T07:34:59.357
> 
> 标签：c++, c

我在网上搜索但找不到可靠的答案。什么会

```
someclass* ptr = 1;
char* charptr = 2; 
```

或将它们分配给任何其他整数均值？

如果我在使用指针之前不初始化指针（对于本机数据指针和类指针）会怎样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:31:40.777

将指针设置`0`为等同于将其设置为`NULL`。但是，这仅适用于*常量表达式* `0`，即编译时零值。尝试设置指向运行时零值的指针不能保证产生空指针

```
int *pi = 0; // Initializes a null pointer
char *pc = 2 - 2; // Initializes a null pointer
short *ps = sizeof *pc - 1; // Initializes a null pointer

int x = 0;
double *pd = (double *) x; 
// Implementation-defined, not guaranteed to produce a null pointer 
```

您可以更详细地探讨这个问题[C FAQ](http://c-faq.com/null/)

要回答您问题的第二部分：

将任何其他整数（除了文字/常量 0）分配给指针是非法的。您的任何初始化（或分配）都不会编译。它在 C 和 C++ 中都是非法的，尽管 C 编译器历来在这方面更允许，以警告响应而不是拒绝编译代码。

此外，在 C++ 语言中，如何处理指向类类型的指针也没有区别。指向类类型的指针仍然被认为是标量类型，并且在这方面的行为与任何指向基本类型的指针相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:55:22.337

是的，在 C++ 中，NULL 被定义为 0。将指针设置为其他一些小的整数值将意味着它指向 - 可能是非法的 - 计算机内存的一部分（但它不会被视为 NULL 指针）。

如果您不初始化全局指针，它将在程序启动之前为您设置为零（NULL）。如果您不初始化堆栈上声明的指针变量（即在函数或方法中），它们中就会有垃圾。同样，任何动态分配的指针或作为数据成员包含在对象中的任何指针的内容也将没有预定义的值。一些编译器具有扩展，允许对动态分配的内存的请求最初归零，就像 C 的`calloc()`函数对原始内存所做的那样。

# c#-4.0 - SqlDataReader dbnull 值

> ID：11291526
> 
> 赞同：0
> 
> 时间：2012-07-02T10:05:28.797
> 
> 标签：c#-4.0, sqldatareader

我有一个关于 SqlDataReader 的问题：

有什么方法可以修改 SqlDataReader 中的值吗？例如：

```
while (sdr.Read())
{
     double PRICE = double.Parse(sdr["PRICE"].ToString());
     if (PRICE == null) PRICE = Single.MinValue;
     .....
} 
```

我希望为我的 DataReader 中的每个空值分配 Single.MinValue 以在此修改后在另一个进程中使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:39:59.387

我不认为你可以修改 SqlDataReader。
来源：[MSDN - 对比 ADO.NET DataReader 和 DataSet](http://msdn.microsoft.com/en-us/magazine/cc188717.aspx)

> DataReader 具有一组定义的操作，这些操作围绕其连接的、只进的、只读的性质。

您可以使用[DataSet](http://msdn.microsoft.com/en-us/library/system.data.dataset%28v=vs.71%29.aspx)来实现您想要的。

# c - c和struct中的数组

> ID：11291527
> 
> 赞同：0
> 
> 时间：2012-07-02T10:05:30.300
> 
> 标签：c

我不明白为什么这个程序打印“ *klmnop* ”而不仅仅是“ *klm* ”。b 是一个大小为 2 的数组！这是代码：

```
struct S
{
  int i1;
  int i2;
  char b[2];
};

int main()
{
  char a[] = "abcdefghijklmnop";

  struct S* s = a + 2;
  printf("[%s]\n" , s->b);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:10:51.250

像大多数字符串函数一样，您的 printf 没有任何有关包含字符串的数组大小的信息。它只有一个指向单个字符的指针，并且您承诺此字符是字符序列中的第一个终止于`'\0'`。当被要求打印整个字符串时，它将继续运行，直到找到终止符或崩溃，以先到者为准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:10:31.223

因为`printf("[%s]\n" , s->b);`将数据从地址 s->b 打印到字符`'\0'`。`s->b`只要找到地址，`'\0'`它就会打印数据。

```
char b[2]; 
```

上面的语句不包含`'\0'`最后一个字符，因此它将继续从地址读取数据，直到找到字符串终止符`'\0'`

# regex - 关于使用 Qt 的正则表达式和大小写转换

> ID：11291528
> 
> 赞同：0
> 
> 时间：2012-07-02T10:05:33.993
> 
> 标签：regex, qt

我正在开发一个涉及一些密码学的基于 Qt 的软件。仅使用的三种散列算法被指定为

```
SHA-256
MD5
SHA 
```

但是，我使用的 API 要求它们采用以下形式

```
sha256
md5
sha 
```

分别。尽管我可以编写一个杂乱的函数来以某种方式完成任务，但我知道这可以通过 Qt 中的正则表达式支持来简化。请帮我想出一个执行此转换任务的正则表达式。

这就是我现在正在做的

```
if (hashType == QString("SHA")) {
        return QString("sha");
    }
    else if (hashType == QString("MD5")) {
        return QString("md5");
    }
    else if (hashType == QString("SHA-256")) {
        return QString("sha256");
    }
    else {
        return hashType;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:44:15.490

我会说为此使用正则表达式是矫枉过正的。您只需：

```
return hashType.remove('-').toLower(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:38:15.360

我怀疑您是否可以使用正则表达式实现更简单的代码，因为替换是通过调用`QString::replace()` 对我来说最干净的方法是 QMap （`value`如果在地图中找不到对象，则返回第二个参数）。

```
 QMap<QString, QString> replacements;
 replacements["SHA"] = "sha";
 replacements["MD5"] = "md5";
 ....

 return replacements.value(hashType, hashType); 
```

# ios - 缩放 UIScoolView

> ID：11291534
> 
> 赞同：0
> 
> 时间：2012-07-02T10:05:55.530
> 
> 标签：ios, uiscrollview, zooming, quartz-2d

我有一个带有从 UIScrollview 扩展的 Myview 类的 Scrollview 的故事板，它实现了一种用quartz2d 绘制一些矩形的方法。

我正在尝试在该 Scrollview 中实现放大/缩小，但没有办法，我在任何地方都找不到答案。

我在我的控制器（UIwindow）中有这个：

```
- (void)viewDidLoad {

[myscrollview setScrollEnabled:YES];
[myscrollview setPagingEnabled:YES];
myscrollview.clipsToBounds = YES;
myscrollview.minimumZoomScale= 1.0;
myscrollview.maximumZoomScale=6.0;
[myscrollview setZoomScale:myscrollview.minimumZoomScale];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
   return myscrollview;
} 
```

但它不起作用。我在哪里可以找到有关在 iOS 5.1 中实现放大/缩小的信息？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:12:02.727

设置委托后尝试

```
 myscrollview.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:15:43.117

我假设你这样设置你的委托：`myscrollview.delegate = self;`

在您的`viewForZoomingInScrollView:`委托方法中，您必须返回一个您喜欢缩放的视图，而不是滚动视图本身。

# c++ - 从另一个文件调用 C++ 函数时出现“未定义符号”

> ID：11291535
> 
> 赞同：0
> 
> 时间：2012-07-02T10:05:58.663
> 
> 标签：c++, linker, makefile, undefined, symbols

我有两组文件：PolynomialArithmetic.h/cpp 和 Options.h/cpp

Options.h 定义为：

```
// Options.h

#ifndef Options_h
#define Options_h

#define BINARY_HEAP 0

inline int chosenHeap ();

#endif 
```

Options.cpp 定义为：

```
// Options.cpp

#include "Options.h"

inline int chosenHeap() { return BINARY_HEAP; } 
```

PolynomialArithmetic.cpp 包含以下内容：

```
// PolynomialArithmetic.cpp

#include "PolynomialArithmetic.h"
#include "Options.h"

void foo () {
...
    if (chosenHeap() == BINARY_HEAP) {
        // DO SOMETHING
    }
...
} 
```

当我编译时，我收到错误：

```
Undefined symbols for architecture x86_64:
    "chosenHeap()", referenced from: foo() in PolynomialArithmetic.o 
```

我猜这是某种链接错误。这是我编译代码的方式：

```
# Makefile

# some configs
....

main: Options.o PolynomialArithmetic.o
    $(CXX) $(CXXFLAGS) $(CPPFLAGS) $(LDFLAGS) $^ -o $@ $(LDLIBS)

Options.o: Options.h Options.cpp
    $(CXX) $(CXXFLAGS) $(CPPFLAGS) -c Options.cpp

PolynomialArithmetic.o: PolynomialArithmetic.cpp PolynomialArithmetic.h Options.h
    $(CXX) $(CXXFLAGS) $(CPPFLAGS) -c PolynomialArithmetic.cpp 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:09:58.383

内联函数必须在标头中，因为它必须在 PolynomialArithmetic.cpp 的编译期间可用。所以标题 Options.h 必须看起来像

```
inline int chosenHeap() { return BINARY_HEAP; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:09:16.230

从您的函数中删除内联规范。编译器不会将任何代码放入您的 Options.obj。

# asp.net - 有没有更优雅的方式将用户控件添加到列表中？

> ID：11291536
> 
> 赞同：1
> 
> 时间：2012-07-02T10:05:59.743
> 
> 标签：asp.net, optimization, user-controls

我有 10 个自定义用户控件，ID 分别为 usercontrol1、usercontrol2、usercontrol3......usercontrol10。

我想将所有这些用户控件添加到列表“allusercontrol”中。我用这样的蛮力做到这一点

```
allusercontrol.Add(usercontrol1);
allusercontrol.Add(usercontrol2);
allusercontrol.Add(usercontrol3);
.
.
.
.
. 
```

有没有更优雅、更简单的方法来完成这项琐碎的任务？您确实看到用户控件 ID 是系列的一部分`"usercontrol"+an int`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:19:57.440

我建议不要使用这种方法，因为它容易出错。如果您想重命名它们，如果您忘记了这一点并添加其他名称`ButtonX`不应该在此列表中的控件怎么办？

相反，我会将它们收集在容器控件中，例如`Panel`. 然后你可以使用`LINQ`找到相关的`Buttons`：

```
var myButtons = myPanel.Controls.OfType<Button>(); 
```

`Enumerable.OfType`将相应地过滤和投射控件。如果你想更多地过滤它们，你可以使用`Enumerable.Where`，例如：

```
var myButtons = myPanel.Controls
                       .OfType<Button>()
                       .Where(btn => btn.ID.ToLower().StartsWith("button")); 
```

现在你可以迭代那些`Buttons`，例如：

```
foreach(Button btn in myButtons)
{
    // do something amazing
} 
```

或者你可以打电话`ToList()`来得到一个`List<Button>`（你问题的核心）：

```
List<Button> allbuttons = myButtons.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:17:21.820

尝试使用此代码

```
List<UserControl> controls = new List<UserControl>
{
    usercontrol1,
    usercontrol2,
    usercontrol3
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:34:17.920

使用 Control.ControlCollection.AddRange - 看[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.addrange.aspx)

# iphone - “元”和方向检测在 iPhone/iPad 邮件中不起作用？

> ID：11291542
> 
> 赞同：1
> 
> 时间：2012-07-02T10:06:26.323
> 
> 标签：iphone, html, email, orientation, meta-tags

1.  元`<meta name="viewport" content="width=600,initial-scale = 2.3,user-scalable=no">`数据在 iPhone / iPad 邮件中不起作用？

2.  如何检测 iPhone 邮件中的方向？

3.  iPhone / iPad 邮件中是否有关于 HTML 和 CSS 的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:39:40.593

您可以使用**CSS 3 媒体查询**来检测 iPhone / iPad 的方向。

```
<!-- css -->
@media only screen and (max-device-width: 1024px) and (orientation:portrait) { 
    .landscape { display: none; }
}
@media only screen and (max-device-width: 1024px) and (orientation:landscape) { 
    .portrait { display: none; }
}

<!-- example markup -->
<h1 class="portrait">Your device orientation is "portrait"<h1>
<h1 class="landscape">Your device orientation is "landscape"<h1> 
```

# drupal-7 - Drupal 7：在嵌入式网络表单块上使用规则

> ID：11291559
> 
> 赞同：0
> 
> 时间：2012-07-02T10:07:41.253
> 
> 标签：drupal-7, drupal-webform, drupal-rules

我有一个“订阅我们的时事通讯”网络表单（可以是任何网络表单）——比如 node/41——我嵌入到一个块中（块 ID 是“client-block-14”）。这样做是为了使其可以在不同页面的不同区域中显示。没有直接链接到 node/41。

提交表单时，我不希望用户被重定向。我希望用户停留在他/她当前所在的页面上（例如主页、产品等），并显示一条自定义消息，说明提交成功。

问题是我只想要这个网络表单的规则，而不是网站上的其他网络表单（联系我们）。

这是我尝试过的规则。

1.  保存新内容后
2.  条件1：内容类型为webform
3.  AND 条件 2：节点 id 为 41
4.  动作：显示消息

我如何转换此规则（并添加无重定向）以在嵌入式块上工作，因为它显然没有节点 ID 而是块 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:18:35.980

Try redirecting to the current page as the destination as an action.

# java - 面板仅调整指定组件的大小

> ID：11291561
> 
> 赞同：0
> 
> 时间：2012-07-02T10:07:44.010
> 
> 标签：java, swing, layout, resize, panel

我想创建存储多个组件的面板，但仅在调整面板大小时调整我想要的组件的大小。例如，如果我有存储 1 个标签和 2 个文本字段的面板，我希望能够告诉它只调整文本字段的大小而不是标签大小。是否有任何布局已经这样做了，还是我必须开始学习编写自定义布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:59:16.993

有可用的布局管理器包括该行为（嗯，有点）。例如，[`FormLayout`来自 JGoodies](http://www.jgoodies.com/freeware/libraries/forms/)的允许将您的面板划分为列并指定每个单独列的调整大小行为。

一个典型的用例是您有一个类似表单的结构（第 1 列包含标签，第 2 列是输入字段），您希望调整大小以仅调整第二列的大小，确保标签的可见性并让输入字段使用所有可用的额外空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:17:25.027

默认情况下，没有布局管理器查看类型然后决定采取行动。您可以使用不同的容器来模拟该行为，但实现自己的布局管理器将是更干净的解决方案恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:17:39.343

您可以显式设置您不希望调整大小的组件的所有大小为相同的值。

例如：

```
Jlabel aLabel = new Jlabel("text");
Dimension d = new Dimension(50,20);
aLabel.setPreferredSize(d);
aLabel.setMinimumSize(d);
aLabel.setMaximumSize(d); 
```

# jakarta-ee - 如何自动将文件部署到 IBM Websphere 7.0 的配置文件目录？

> ID：11291562
> 
> 赞同：2
> 
> 时间：2012-07-02T10:07:51.127
> 
> 标签：jakarta-ee, websphere

我正在开发一个应用程序，我想创建或部署一个属性文件到 Websphere。我只是不想手动完成。是否有自动部署它的选项，一旦我将 EAR 文件部署到 WAS 7.0，属性文件也将被部署？..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:12:21.093

如果您的属性文件是可编辑的，则不应将其部署为 EAR 文件的一部分。而是将它保存在服务器可以读取它的磁盘上的某个位置。在集群上运行时，除非您准备编辑属性文件的多个本地副本，否则必须使用共享磁盘。

您不想将外部属性文件的文件路径硬编码到部署的 EAR 中，因此您可以通过在 Websphere 服务器上配置 URL 资源来解决这个问题。在 Websphere 7 管理控制台中按如下方式访问它

```
Resources > URL > URLs 
```

以下是 *nix 框上 URL 资源的一些示例设置，其中服务器的根目录有一个名为“propertiesFiles”的文件挂载，该文件对集群中的所有服务器节点可见（即共享网络磁盘）

```
JNDI Name = url/propertiesFiles
Specification = file:///properitesFiles 
```

将您的属性文件复制到此位置，以便您拥有此文件路径

```
/properitesFiles/example.properties 
```

然后，您的 Web 应用程序可以使用“url/propertiesFiles”使用 JDNI 查找来引用此 URL 资源，以查找您的属性文件所在的目录。因此，您没有将文件位置硬编码到您的 EAR 中，只是文件的名称（即“example.properites”）

从这个配置开始，然后到您的部署过程，以独立于您的 EAR 部署来更新属性文件

# python - sympy 集：迭代间隔

> ID：11291565
> 
> 赞同：7
> 
> 时间：2012-07-02T10:08:17.523
> 
> 标签：python, sympy

我需要操纵一些实数区间。基本上我会执行联合和交叉。通过这种方式，我总是获得一组实数，它们是有限数量区间的并集。

目前我正在为 python 使用 sympy。我的问题是：给定一个 sympy 集，是否有一种（很好的）方法来迭代它的间隔？

一种可能性是使用集合的 repr 字符串，它看起来像这样：

```
 (-oo, 5] U [7, 20] 
```

然后使用正则表达式将其解包。

有没有更好，更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T10:29:33.953

所以，我会自己回答。我需要使用类 Union 的属性 args。这给出了一个正在考虑其并集的集合的元组：

```
>>> union
[2.0, 10.0) U [20.0, 30.0) U {1.0, 15.0, 17.0, 40.0}
>>> union.args
([2.0, 10.0), [20.0, 30.0), {1.0, 15.0, 17.0, 40.0}) 
```

# javascript - jquery中的电话号码验证

> ID：11291568
> 
> 赞同：0
> 
> 时间：2012-07-02T10:08:27.523
> 
> 标签：javascript, jquery, validation, phone-number

我使用以下函数来验证电话号码文本框。它工作正常。此功能只允许输入数字，但如果我输入文本框，条目看起来像**1111111**。但我需要条目看起来像**111-111-1111 111111**。

我怎样才能做到这一点？

```
$('input[id*=Phone]').live('keypress',function(evt){
    var phValidateid=$(this).attr("id");
    if (event.keyCode > 47 && event.keyCode < 58) {
        return true;
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:24:41.047

你可以尝试这样的事情：

```
$('input').on('keyup',function(evt){
    var len = this.value.length;
    if (len == 3 || len == 7 || len == 11) {
       $(this).val(this.value + "-");
    }

    else if (len == 15) {
      $(this).val(this.value + " ");  
    }           
}); 
```

[http://jsfiddle.net/Ys79C/2/](http://jsfiddle.net/Ys79C/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:27:36.833

尝试

```
return String.fromCharCode(event.keyCode).search(/[\d\-]/) > -1; // true if number or dash; false otherwise 
```

或者如果您想检查输入的孔值

```
$('input[id*=Phone]').live('keypress',function(evt){
    return $(this).val().search(/^\d{3}\-\d{3}\-\d{4} \d{6}$/) > -1;
}); 
```

# c# - 如何获得 ldap 绑定响应

> ID：11291569
> 
> 赞同：3
> 
> 时间：2012-07-02T10:08:30.207
> 
> 标签：openldap, openldap, c#, ldap, openldap

我正在使用这些`System.DirectoryServices.Protocols`函数来查询[openldap](/questions/tagged/openldap "显示标记为“openldap”的问题")目录。

[openldap](/questions/tagged/openldap "显示标记为“openldap”的问题")目录正在使用密码策略覆盖。

如果我绑定到目录，服务器可能会返回可能包含密码过期警告的控件。

如何在 C# 中获得绑定响应？ `System.DirectoryServices.Protocols.Bind`返回`void`。

查询用户`pwdChangedTime`，检索`pwdPolicySubentry`执行数学中指示的策略以警告用户密码过期似乎不是一个好方法。

任何帮助深表感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:44:35.550

不幸的是，您不能使用绑定操作来做到这一点。S.DS.P 是 Winldap32 之上的一个薄层，它不识别在绑定操作上发回的任何控件。去年我走了几条路，开始使用反射来操作 SDSP 内部类并自己调用 Winldap32，最终由于 Winldap32 的限制而失败。有一个由 Novell 编写的 ldap 库，它是它自己的纯 CLR 实现。我不确定这些天它是否维护得很好。您唯一的其他选择是在 openldap 客户端库之上编写您自己的 .net 库。

另一边。在服务器端应用程序中使用带有 S.DS.P 的 TLS 将导致 S.DS.P 在某些条件下处理 TLS 响应时进入无限循环。解决方法是在端口 636 上使用直接 SSL。

# ms-access - Me.Dirty 在 Form_Dirty() 事件中为假！- VBA MS 访问 2007

> ID：11291570
> 
> 赞同：2
> 
> 时间：2012-07-02T10:08:30.750
> 
> 标签：ms-access, vba

**在OnDirty**事件 (MS Access 2007) 中如何判断表单是否脏？

考虑这个简单的例子，我正在调用一个子例程来验证**Form_Dirty()**事件中的一些按钮。

```
Private Sub Form_Dirty(Cancel As Integer)
    MsgBox Me.Dirty  
    ' The above line shows false, which makes the Me.Dirty property about as useful as tits on a bull!
    Call validateSaveCancelBtn
End Sub   

Private Sub validateSaveCancelBtn()
    btnCancel.ENABLED = Me.Dirty
    btnSave.ENABLED = Me.Dirty
End Sub 
```

请不要告诉我只是将**validateSaveCancelBtn()**中的代码粘贴到**Form_Dirty()**中并在那里硬编码。这对我来说不起作用，因为我也从其他地方调用了 validateSaveCancelBtn() ，实际逻辑比我在这里粘贴的更复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:10:22.097

假设你的表单是一个绑定表单，在表单的 Dirty 事件中表单绝对是脏的，尽管此时 Me.Dirty 属性仍然是假的。

以下是您如何解决这个奇怪的问题。

```
Private Sub Form_Dirty(Cancel As Integer)
    Call validateSaveCancelBtn(True)
End Sub 

Public Sub validateSaveCancelBtn(bDirty as Boolean)
    btnCancel.Enabled = bDirty
    btnSave.Enabled = bDirty
End Sub 
```

在您调用 validateSaveCancelBtn 的其他任何地方，只需使用以下命令：

```
Private Sub Form_AfterUpdate()
    Call validateSaveCancelBtn(Me.Dirty)
End Sub 
```

**纯粹作为旁注**

我尽量避免在 Save/New/Cancel/Delete 按钮上使用 Visible 和 Enabled 属性。我发现对每个按钮背后的代码进行编程会更加万无一失，这样它就可以针对每种可能的情况以不同的方式（并且正确地）处理按钮按下。

确实，如果这些按钮始终可见并启用，则用户的反馈会减少，即使没有任何内容可保存或取消，看起来您也可以保存或取消。话虽如此，请考虑 Access 中的保存和取消按钮基本上是开箱即用的。原因如下：

1.  当用户关闭表单时，将保存新记录或对记录的更改
2.  当用户移动到子表单时，将保存新记录或对记录的更改
3.  由于#2，一旦用户移动到子窗体，取消按钮将无法取消主窗体上的更改。主窗体上的取消按钮也不能取消对子窗体上的记录所做的更改，因为一旦焦点成功地从子窗体转移回主窗体，子窗体记录就已保存。

我通常会显示一个保存按钮并使其始终可见并启用。让用户点击感觉很好，提供按钮也没有坏处。我实际上也将代码放在它后面，但我不强迫用户使用保存按钮，因为还有其他事件（如前所述）会导致 Save 被触发。

I generally do not provide Cancel buttons because they are "broken" just as soon as you add a subform. I've been involved in numerous discussions about how to provide the user with a Cancel button that can cancel multi-record edits (basically, handle a form and subforms as a transaction). Probably one of the best methods, though still very involving to build, is to use Temporary Tables (basically pseudo-temporary tables, as Access doesn't actually have anything officially called a temporary table) to hold the records being added/edited. Then on the Save Button or on Form Close you have to actually write those records back to the real database. There's much more to it than that, but I'm just trying to give you a rough idea.

# excel - 使用 dir 搜索文件 - 多次点击

> ID：11291573
> 
> 赞同：1
> 
> 时间：2012-07-02T10:08:40.630
> 
> 标签：excel, vba

我有一个宏，它遍历文件夹并使用“dir”函数来找出活动文件夹中是否存在文件，并将文件名放在单元格中。

问题是它可能是两个或多个文件满足搜索。

```
Dir(subfolder & "\Kommunesvar*") 
```

如果有两个以“Kommunesvar”开头的文件，如何在指定的子文件夹中同时获得两个结果？Dir 返回文件名，但我都想要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:17:58.900

你怎么用`DIR`。下面的代码将为您提供所有以`Kommunesvar`Excel 文件开头的文件。

```
Option Explicit

Sub Sample()
    Dim subfolder As String
    Dim sDir

    subfolder = "C:\Temp"

    sDir = Dir$(subfolder & "\Kommunesvar*.xls*", vbNormal)

    Do Until LenB(sDir) = 0
        Debug.Print subfolder & sDir
        sDir = Dir$
    Loop
End Sub 
```

如果您想将所有文件名存储在一个变量中，那么您也可以使用它。

```
Sub Sample()
    Dim subfolder As String, FileNames As String
    Dim sDir

    subfolder = "C:\Temp"

    sDir = Dir$(subfolder & "\Kommunesvar*.xls*", vbNormal)

    Do Until LenB(sDir) = 0
        If FileNames <> "" Then
            FileNames = FileNames & "; " & subfolder & sDir
        Else
            FileNames = subfolder & sDir
        End If
        sDir = Dir$
    Loop

    Debug.Print FileNames
End Sub 
```

# java - 从其他 Android 设备（如谷歌电视遥控器）远程控制 Android 电视

> ID：11291574
> 
> 赞同：0
> 
> 时间：2012-07-02T10:08:45.573
> 
> 标签：java, android, android-widget, google-tv

我想为安卓电视开发远程控制应用程序（它就像谷歌电视）我使用谷歌电视远程应用程序找到安卓电视但我无法找到那台电视（它正在寻找唯一的 GTV）

搜索 android 电视我可以使用 anymote 协议吗？

请帮助我并提前致谢

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:16:46.270

如果你想从安卓设备控制一台设备，你需要两件事：

1.  一种物理的交流方式。

2.  一种交流的语言。

如果您想通过您的 android 设备与另一台设备通信，您可能需要为该设备使用蓝牙适配器（唯一的问题是如何启用与电视的蓝牙配对），或使用 wifi 天线（再一次，不是很容易在电视中启用）。

使用电视 API 是您可能应该在遥控器/电视制造商中阅读的内容，并了解如何通过 Android 启用它。

# c++ - 映射。使用主机名 VC++

> ID：11291577
> 
> 赞同：0
> 
> 时间：2012-07-02T10:08:56.653
> 
> 标签：c++, sockets, visual-c++

我有一个有一些服务的应用程序。目前，这些服务使用安装它的机器的 IP 地址/主机名进行配置，因此服务绑定到该 IP。

因此客户必须配置主机名/IP 地址。现在的要求是客户应该只配置本地或'.'。就像 SQL 一样，服务应该获取本地主机名或 IP 并且仍然可以运行。

在 VC++ 中实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:15:24.040

如果服务只能从计算机本身访问，则使用 IP 地址 127.0.0.1 或 DNS 名称 localhost。如果可以从任何网络计算机访问该服务，则绑定到 IP 地址 0.0.0.0。这将绑定到安装的每个网络适配器 - 如果在用户连接到两个网络并且服务仅在受信任的网络上可用的情况下不需要这样做，请注意。当然，服务可以绑定到 0.0.0.0 并让防火墙在必要时在第二个网络上进行阻止。

# jakarta-ee - 在不使用 maven test 命令的情况下启动 selenium 测试

> ID：11291580
> 
> 赞同：0
> 
> 时间：2012-07-02T10:08:59.017
> 
> 标签：jakarta-ee, maven, selenium

在网页中，我想创建一个按钮，所以当我点击它时，maven 会启动已经编写的 selenium 测试。所以你有什么想法：有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:34:45.613

最好的办法是将 selenium 测试编写为真正的集成测试，将它们放入适当的模块中或根据集成测试命名它们（请参阅 maven-failsafe-plugin），此外，将 maven-failsafe-plugin 的配置放入配置文件中，这使得可以使用 selenium 打开/关闭集成测试。但不要使用 mvn test Hm..最好的方法是使用集成测试 lifycylce 与预集成测试、集成测试和集成后测试，然后是验证生命周期阶段，通常可用于此类目的。

# struts - 瓷砖不工作？

> ID：11291581
> 
> 赞同：0
> 
> 时间：2012-07-02T10:09:01.370
> 
> 标签：struts

我创建了一个登录页面，该页面通过 atuthentication 类对用户进行身份验证。验证后我使用下面的语句是重定向到一个 JSP 页面。

```
response.sendRedirect("welcome.page"); 
```

这应该寻找`tiles-defs.xml`到实际 jsp 页面的映射。我提供了如下

```
<definition name="main.layout" path="/mainLayout.jsp">
<put name="header" value="/header.jsp"/>
<put name="info" value="/info.jsp"/>
<put name="menu" value="/menu.jsp"/>
<put name="body" value=""/>
<put name="footer" value="/footer.jsp" />
</definition>

<definition name="welcome.page" extends="main.layout">
<put name="title" value="Welcome"/>
<put name="body" value="/welcome.jsp"/>
</definition> 
```

我已经创建了`mainLayout.jsp`和`welcome.jsp`页面。现在，当用户通过身份验证后，它必须重定向到`welcome.jsp`. 但我收到**“找不到网页”**错误。我猜映射不正确，这就是它无法找到的原因`welcome.jsp`，但我无法弄清楚我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:03:46.190

在`ActionClass`您放置用户身份验证逻辑的其中之一中，在验证用户操作类后应该返回`return mapping.findForward(SUCCESS);` na，然后控制焦点在`struts-config.xml`文件中，您应该放置这样的代码

```
 <action input="/index.jsp" name="loginForm" path="/login" scope="session" type="gg.locinAction">
        <forward name="success" path="welcome.page"/>
 </action> 
```

然后控制焦点在文件`tiles-defs.xml`中的`welcome.page`定义`tiles-defs.xml`你应该像这样编写定义

```
<definition name="welcome.page" extends="main.layout">
  <put name="title" value="Welcome"/>
  <put name="body" value="/welcome.jsp"/>
</definition> 
```

然后定义将被执行，您需要的页面将显示在图块上..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:15:16.880

您不能重定向到磁贴定义。重定向包括向浏览器发送响应，告诉他：“请转到以下 URL”。磁贴定义不是 URL。

您可以重定向到 JSP，然后 JSP 将被执行。但这是不好的做法，因为在设计合理的 MVC 应用程序中，所有请求都应该通过控制器。你当然可以重定向到一个动作的URL，这是你应该做的：重定向到`welcome.do`URL（假设`welcome.do`是Struts欢迎动作的URL）

# java - 如何使用与 PHP 服务器一起使用的 httppost FileEntity 上传文件

> ID：11291588
> 
> 赞同：1
> 
> 时间：2012-07-02T10:09:18.627
> 
> 标签：java, php

我在客户端的java代码是：</p>

```
FileEntity entity = new FileEntity(zipfile, contentType);
post.addHeader(entity.getContentType());
post.setEntity(entity);
HttpResponse response = httpclient.execute(post); 
```

我想在 apache 服务器上使用 PHP 接收它。我不知道如何`$_FILES[" "]["tmp_name"]`在 php 函数中设置第一个值`move_uploaded_file($_FILES[" "]["tmp_name"],$upload_file)`。我看到其他人问过同样的问题。但答案不够清楚。我在等你的答复，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:40:07.037

我已经准备好进行自己的测试，并且已经通过下载 apache httpclient 在 android 上完成了测试，但这对你的情况来说应该不是问题。

我在“libs”文件夹中包含了 httpclient.jar 和 httpmime.jar。

最重要的是在 multipart-message 的 mime-part 上设置 part-name。这是你的 assoc 的第一部分。php 数组。

```
 HttpClient httpclient = new DefaultHttpClient();
        httpclient.getParams().setParameter(
                CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

        HttpPost httppost = new HttpPost(url_string);
        File file = new File(file_string);

        MultipartEntity mpEntity = new MultipartEntity();
        ContentBody cbFile = new FileBody(file);
        mpEntity.addPart("userfile", cbFile);

        httppost.setEntity(mpEntity);
        System.out
                .println("executing request " + httppost.getRequestLine());
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();

        StatusLine statusLine = response.getStatusLine();
        System.out.println(statusLine);
        if (resEntity != null) {
            System.out.println(EntityUtils.toString(resEntity));
        }
        if (resEntity != null) {
            resEntity.consumeContent();
        }

        httpclient.getConnectionManager().shutdown();

        return statusLine != null ? statusLine.getStatusCode() : 0; 
```

# youtube - youtube gdata api 不返回完整报告

> ID：11291602
> 
> 赞同：0
> 
> 时间：2012-07-02T10:10:11.050
> 
> 标签：youtube, youtube-api, gdata-api, youtube-channels

我正在尝试获取 youtube 频道的订阅

```
$feedURL = 'http://gdata.youtube.com/feeds/api/users/BHUMGroup/subscriptions?v=2'; 
```

返回的 XML 并未涵盖所有统计信息。例如，`http://gdata.youtube.com/apple`我订阅了一个频道，但它没有在 XML 中列出

任何人都知道如何修复它或任何替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:38:32.617

您可以将查询参数添加到 url。使用该`max-results`查询，您最多可以获取 50 个结果。`start-index`如果您想要超过 50 个请求，则需要使用查询多次调用它。

`http://gdata.youtube.com/feeds/api/users/BHUMGroup/subscriptions?v=2&max-results=50`最多会给出 50 个结果。通过添加查询来获取接下来的 50 个结果`start-index=51&max-results=50`。目前，这是您实现它的唯一方法。

# facebook - Facebook 与 asp.net 会员连接

> ID：11291604
> 
> 赞同：2
> 
> 时间：2012-07-02T10:10:18.847
> 
> 标签：facebook

我想在我的网站上实现 Facebook 连接，并希望它与 asp.net 会员集成。

到目前为止我所拥有的：我确实拥有正常的 asp.net 会员资格，并且有规则和一切。我已经设法与 Facebook 进行通信以获取用户的数据。我已经创建了所需的 Facebook 应用程序。

需要什么：我需要让我的网站用户能够使用他们的 Facebook 帐户登录，并能够在网站上添加评论和评论。注意：只有注册用户才能写评论和评论。

但我不知道从这里去哪里？我应该将用户 Facebook 数据（用户名、电子邮件、ID 等）存储在我的数据库中还是什么？以及应用程序如何判断用户在使用 Facebook 帐户时已登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:21:17.930

> 我应该将用户 Facebook 数据（用户名、电子邮件、ID 等）存储在我的数据库中还是什么？

只需使用您从 Facebook 收到的数据为他们创建一个“普通”帐户即可。

> 以及应用程序如何判断用户在使用 Facebook 帐户时已登录？

如果用户正在使用 Facebook 登录并且已经拥有一个，请登录普通帐户。

# user-interface - 如何修复 iPad Safari 浏览器中 Ajax Modal popUp 的滚动问题？

> ID：11291610
> 
> 赞同：0
> 
> 时间：2012-07-02T10:10:41.557
> 
> 标签：user-interface, mobile-safari, modalpopupextender, ipad

我有 Asp.net 网站，它在除 iPad Safari 之外的所有浏览器中运行良好。

但是当我测试时，我在 Ipad 浏览器中滚动弹出窗口而不是渲染到整个页面（弹出窗口的某些部分被隐藏为标准附件）时遇到问题，

有时页面内容与当时的模态弹出窗口高度相比太小“**关闭**”按钮（在底部）要隐藏。

下面，我附上了屏幕截图。查看屏幕截图。
我应该怎么做才能修复 iPad 中的 Modal PopUp 问题。

![在此处输入图像描述](../Images/3112cdc83c955114985f28a19217053e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:50:33.407

使用 css 调整模态框的大小并将其向下移动以适应较小的屏幕，如下所示：

```
@media screen and (max-height:768px){
.popupPanel { min-height:550px; height:550px; }     
}

@media screen and (max-height:600px){
.popupPanel.{ min-height:300px; height:300px; margin-top: 100px;  }
} 
```

# c# - 使用 LINQ 删除记录时出错

> ID：11291611
> 
> 赞同：1
> 
> 时间：2012-07-02T10:10:46.980
> 
> 标签：c#, .net, linq, linq-to-sql, exception-handling

我尝试将 SQL 删除命令更改为 LINQ。这是我的 SQL 命令：

```
DELETE FROM [TrackPoints]
WHERE [RouteFK] IN (SELECT RouteId
                    FROM Routes
                    WHERE UserId = @UserId) 
```

这是我编写的 LINQ 代码：

```
int UID =1;
FirstDataContext aspnetdb = new FirstDataContext();
var res1 = from q1 in aspnetdb.Routes
           where q1.UserId == UID
           select q1.RouteId;
foreach (var k in res1)
{
    var eigen = from p in aspnetdb.Trackpoints
                where p.RouteFK == k
                select p.TrackPointId;

    aspnetdb.Trackpoints.DeleteOnSubmit(eigen.First());
    aspnetdb.SubmitChanges();
} 
```

但在这一行我有一个错误：

```
aspnetdb.Trackpoints.DeleteOnSubmit(eigen.First()); 
```

那说：

> 'System.Data.Linq.Table.DeleteOnSubmit(LINQ_Test.Trackpoint)' 的最佳重载方法匹配有一些无效参数

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:13:03.217

用这个：

```
var eigen = (from p in aspnetdb.Trackpoints
            where p.RouteFK == k
            select p).First(); 
```

或更短的：

```
var eigen = aspnetdb.Trackpoints.First(p => p.RouteFK == k); 
```

因为它返回`Trackpoint`

而你的`select p.TrackPointId`回报`Int`。

* * *

```
var r = from r in aspnetdb.Routes
        join p in aspnetdb.Trackpoints on p.RouteId equals r.RouteFK
        where r.UserId == UID
        select p;

foreach (var x in r)
{
    aspnetdb.Trackpoints.DeleteOnSubmit(x);
}
aspnetdb.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:14:09.153

问题是您只是选择了 ID，它与方法签名不匹配。我实际上会将您的代码更改为：

```
var entity = aspnetdb.Trackpoints.Where(p => p.RouteFK == k).Single();
aspnetdb.Trackpoints.DeleteOnSubmit(entity); 
```

（当您将`select`子句更改`select p`为使用查询表达式时变得毫无意义 - 一旦您使用方法调用语法，调用`Single`or`First`在同一语句中是有意义的。根据 abatishchev 的回答，这个也可以`aspnetdb.Trackpoints.Single(p => p.RouteFK == k)`。）

顺便说一句，这假设您肯定有给定 RouteFK 的 1 个（并且只有 1 个）实体。

实际上，在单个查询中选择要删除的*所有*实体可能会更好。例如：

```
var entitiesToDelete = from q1 in aspnetdb.Routes
                       where q1.UserId == UID
                       join p in aspnetdb.TrackPoints 
                         on q1.RouteID equals p.RouteFK
                       select p;

aspnetdb.Trackpoints.DeleteAllOnSubmit(entitiesToDelete);
aspnetdb.SubmitChanges(); 
```

或者，如果您在模型中正确设置了联接，则可能可以摆脱显式联接：

```
var entitiesToDelete = from q1 in aspnetdb.Routes
                       where q1.UserId == UID
                       select q1.Route; // Or Track, or whatever it is

aspnetdb.Trackpoints.DeleteAllOnSubmit(entitiesToDelete);
aspnetdb.SubmitChanges(); 
```

在这两种情况下，您都可以避免执行几乎一样多的查询。（您避免了“n+1 选择”问题。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:14:46.647

该`DeleteOnSubmit`方法需要域对象。您的代码通过了一个`ID`。此外，您缺乏检查该项目是否实际存在的条件。

尝试将您的例程重写为：

```
 foreach (var k in res1)
        {
            var eigen = from p in aspnetdb.Trackpoints
                        where p.RouteFK == k
                        select p;

            var item = eigen.FirstOrDefault();

            if ( item != null )
            {
              aspnetdb.Trackpoints.DeleteOnSubmit(item);
              aspnetdb.SubmitChanges();
            }

        } 
```

# php - PHP exec() 使用内存

> ID：11291615
> 
> 赞同：4
> 
> 时间：2012-07-02T10:11:07.010
> 
> 标签：php, memory, exec

我似乎无法为这个问题找到一个明确的答案。

从 PHP调用 shell 命令时`exec()`，shell 命令使用的内存是否计入 PHP 脚本的内存限制？

我意识到，如果该命令生成大量输出，并且该输出在 的`$ouput`（第二个）参数中捕获`exec()`，那么返回的数据可能会超出 PHP 内存限制。但是，假设所有输出都发送到文件中，如果`exec()`命令需要 128M 内存才能运行，那么内存限制为 64M 的 PHP 脚本是否能够运行呢？

```
<?php
exec('command_using_128M_memory >/dev/null 2>&1'); 
```

我假设 PHP5.3+

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T10:17:23.567

该`exec()`命令不直接计入 PHP，因为该进程是单独执行的，而不是在 PHP 进程中执行的。话虽如此，如果您在命令中使用任何输出变量，它们将计入限制。

因此，如果您有一个产生大量详细日志记录的文件，并且您正在捕获该日志记录，它将计入内存限制。

# objective-c - 使用 ARC 关闭后 UIPopoverController 内存未释放

> ID：11291619
> 
> 赞同：0
> 
> 时间：2012-07-02T10:11:31.137
> 
> 标签：objective-c, ios, automatic-ref-counting, uipopovercontroller

我的`UIPopoverController`项目中有一个包含 UIDatePicker 作为其内容的 ViewController。

单击按钮时会显示一个弹出框。在分配弹出框及其内容后，应用程序内存增加了大约 2.5 MiB。

由于我在内存中有 2 个单独的弹出框实例，它增加了大约 5mb。

我的问题是弹出框被解雇后，它的内存永远不会被释放。此外，由于我启用了 ARC，我无法手动释放它。

任何人都可以指导我如何在与 ARC 一起使用 popover 时释放内存。

以下是代码：

```
-(IBAction)btnDateSelect:(id)sender
{

    CGRect popoverRect;
    appDelegate.objDtPicker = [[ViewDatePicker alloc]init];
    appDelegate.objDtPicker.delegate = self;

    self.popOver = [[UIPopoverController alloc]initWithContentViewController:
    appDelegate.objDtPicker]; 
    popOver.delegate = self;

    if ([sender tag] == 70) 
    {
        popoverRect = [self.view convertRect:[btnFromDate frame] 
                                    fromView:[btnFromDate superview]];
        bFromDate = TRUE;
        bToDate = FALSE;

    }
    else 
    {
        bFromDate = FALSE;
        bToDate = TRUE;
        popoverRect = [self.view convertRect:[btnToDate frame] 
                                    fromView:[btnToDate superview]];
    }

    popOver.popoverContentSize=CGSizeMake(400.0,216.0);
    [popOver presentPopoverFromRect:popoverRect inView:self.view 
           permittedArrowDirections:UIPopoverArrowDirectionDown 
                           animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:14:23.757

我猜`self.popOver`是一个强大的属性？它由该属性保留。当您关闭视图时，您可以将此属性设置为 nil（使用委托方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:45:51.097

你确定问题是弹出框没有被释放吗？可能是系统正在缓存图像或其他数据。内存警告后额外的内存使用是否消失？（您可以在模拟器中模拟其中之一。）如果额外的内存使用量在内存警告后消失，这可能不是问题。

您可以尝试使用“Allocations”或“Leaks”工具运行您的应用程序，这可以让您了解弹出框是否实际上正在被释放，以及实际占用了您的 5 MB。

# iphone - 设置图片，来自 NSDictionary，iPhone

> ID：11291622
> 
> 赞同：-1
> 
> 时间：2012-07-02T10:11:36.237
> 
> 标签：iphone, uiimageview

我在 NSDictionary 中有图像路径，就像（带键：image_path）

> [productDictionary objectForKey:@"image_path"];

我可以在同一字典的标签上设置文本，例如

> cell.lbl.text = [productDictionary objectForKey:@"somestatus"];

但不知道如何对图像做同样的事情（在 UIImageview 上设置）。

如何在 UIImageview 上设置它？而不是这个：

> cell.imgvQuotes.image = [UIImage imageNamed:@"static.png"];

我想从字典中设置图像而不是“static.png”

解析后我有一个图像的URL，就像

[http://google.com/images/noimage.png](http://google.com/images/noimage.png) //不会工作，只是一个例子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:13:45.760

您可以使用：

```
id imageName = [productDictionary objectForKey:@"image_path"];
cell.imgvQuotes.image = [UIImage imageNamed:imageName]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:21:41.760

您可以使用相同的方法，而是从字典中获取图像名称，如下所示：

```
cell.imgvQuotes.image = [UIImage imageNamed:[productDictionary objectForKey:@"image_path"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:13:02.387

如果 Dictionary 包含图像名称而不是 imagePath，则@Adil 的上述答案是正确的。

如果字典包含您在问题（URL）中提到的路径

> cell.imgvQuotes.image = [UIImage imageWithContentsOfFile:[productDictionary objectForKey:@"image_path"]];

# html - 在 P 标签上的 HTML 文件上，xdt 转换失败

> ID：11291623
> 
> 赞同：2
> 
> 时间：2012-07-02T10:11:37.697
> 
> 标签：html, msbuild, transform, xdt-transform

我正在尝试将转换应用于 HTML 文件。转换适用于 div 和 span，但只要我插入 P 标签，它就会失败。

我正在转换的 HTML 文件是：

```
<!DOCTYPE html>
<html>
  <head>
    <title>STREAM Interactive - UAT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  </head>
    <body>
          <p>my para</p>
    </body>
</html> 
```

转换文件非常简单：

```
<html xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
   <head>
     <title xdt:Transform="Replace">TITLEHEADINGHERE</title>
   </head>  

</html> 
```

用于进行转换的项目文件是：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<UsingTask TaskName="TransformXml" AssemblyFile="C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.Dll"/>

    <PropertyGroup>
        <SourceFile>web.config</SourceFile>
        <TransformFile>web.debug.config</TransformFile>
        <OutputFile>final.config</OutputFile>
    </PropertyGroup>

    <Target Name="GenerateConfigs">
        <Message Text="Beginning Transformation." />
        <Message Text="$(SourceFile)" />
        <TransformXml Source="$(SourceFile)" Transform="$(TransformFile)" Destination="$(OutputFile)" />
        <Message Text="Completed Transformation." />
    </Target>

</Project> 
```

使用的命令是：

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe D:\SAM\SAMSite\bin\msbuild-transform-Template.xml /p:SourceFile="C:\temp\buildTest\BlueZone\2.3.10.5\PublishedClickOnce\index.html" /p:TransformFile="D:\SAM\SAMSite\bin\TransformTemplates\clickonce.index.transform.temp" /p:OutputFile="C:\temp\buildTest\BlueZone\2.3.10.5\PublishedClickOnce\index.html.temp" 
```

我得到的输出/错误是：

```
Microsoft (R) Build Engine Version 4.0.30319.1
[Microsoft .NET Framework, Version 4.0.30319.269]
Copyright (C) Microsoft Corporation 2007\. All rights reserved.

Build started 02/07/2012 10:54:33.
Project "D:\SAM\SAMSite\bin\msbuild-    transform-Template.xml" on node 1 (default targets).
GenerateConfigs:
  Beginning Transformation.
  C:\temp\buildTest\BlueZone\2.3.10.5\PublishedClickOnce\index.html
  Transforming Source File:     C:\temp\buildTest\BlueZone\2.3.10.5\PublishedClickOnce\index.html
  Transformation succeeded
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018: The "TransformXml" task failed unexpectedly.
D:\SAM\SAMSite\bin\msbuild-transform-    Template.xml(13,3): error MSB4018: System.UriFormatException: Invalid URI: The URI is empty.
D:\SAM\SAMSite\bin\msbuild-transform-    Template.xml(13,3): error MSB4018:    at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018:    at Microsoft.Web.Publishing.Tasks.TransformXml.Execute()
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018:    at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018:    at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult)
Done Building Project "D:\SAM\SAMSite\bin\msbuild-transform-Template.xml" (default targets) -- FAILED.

Build FAILED.

"D:\SAM\SAMSite\bin\msbuild-transform-Template.xml" (default target) (1) ->
(GenerateConfigs target) -> 
  D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018: The "TransformXml" task failed unexpectedly.
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018: System.UriFormatException: Invalid URI: The URI is empty.
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018:    at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018:    at Microsoft.Web.Publishing.Tasks.TransformXml.Execute()
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018:    at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
D:\SAM\SAMSite\bin\msbuild-transform-Template.xml(13,3): error MSB4018:    at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult)

    0 Warning(s)
    1 Error(s)

Time Elapsed 00:00:00.09 
```

HTML 已被尽可能地精简，以前那里有 div 和 span。有趣的是，如果我给 P 标签一个类，它就可以工作。

我不知道为什么会这样。

**编辑**

根据@Kieren 的建议，我尝试直接使用 TransformXml 运行。我收到一个新错误：

```
Data at the root level is invalid. Line 1, position 1.

   at System.Xml.XmlTextReaderImpl.Throw(Exception e)
   at System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
   at System.Xml.XmlTextReaderImpl.ParseDocumentContent()
   at System.Xml.XmlTextReaderImpl.Read()
   at System.Xml.XmlTextReader.Read()
   at Microsoft.Web.Publishing.Tasks.XmlAttributePreservationDict.ReadPreservationInfo(String elementStartTag)
   at Microsoft.Web.Publishing.Tasks.XmlAttributePreservationProvider.GetDictAtPosition(Int32 lineNumber, Int32 linePosition)
   at Microsoft.Web.Publishing.Tasks.XmlFileInfoDocument.XmlFileInfoElement..ctor(String prefix, String localName, String namespaceUri, XmlFileInfoDocument document)
   at Microsoft.Web.Publishing.Tasks.XmlFileInfoDocument.CreateElement(String prefix, String localName, String namespaceURI)
   at System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
   at System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   at System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   at System.Xml.XmlDocument.Load(XmlReader reader)
   at Microsoft.Web.Publishing.Tasks.XmlFileInfoDocument.LoadFromTextReader(TextReader textReader)
   at Microsoft.Web.Publishing.Tasks.XmlFileInfoDocument.LoadFromFileName(String     filename)
   at Microsoft.Web.Publishing.Tasks.XmlFileInfoDocument.Load(String filename)
   at QuickTests.TestTransformXml.OpenSourceFile(String sourceFile) in C:\Users\jon\Documents\Visual Studio 2010\Projects\QuickTests\QuickTests\TestTransformXmlTask.cs:line 140 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:35:25.147

根据我提交的错误报告，此问题现已修复。假设它将包含在 MsBuild 的下一个版本中，（不知道什么时候会）：

[https://connect.microsoft.com/VisualStudio/feedback/details/752279/msbuild-tansform-failure-for-elements-with-only-one-character](https://connect.microsoft.com/VisualStudio/feedback/details/752279/msbuild-tansform-failure-for-elements-with-only-one-character)

# algorithm - 板球比赛算法

> ID：11291624
> 
> 赞同：3
> 
> 时间：2012-07-02T10:11:48.500
> 
> 标签：algorithm, workflow

我需要创建一个板球经理游戏（很像足球经理）。

长话短说，我需要根据每个用户的团队和战术来决定游戏的结果。我的想法是逐球决定结果。

因此，根据投球手的属性（力量、耐力、技能等），一个球（具有一些属性：速度等）被发送给击球手，击球手也会根据得分击球（或不击球），如果球是击球后，我会将球传给其中一名外野手（假设有 9 个，生成一个介于 1 和 9 之间的随机数并传给该外野手）。再次基于守场员的技能，它是否会接住球。

我缺少的是击球手在接球前的跑动次数。我想微调球的方向。我也不确定玩家进入的顺序会如何影响游戏结果。

你能帮我定义一个好的匹配工作流程吗？（我对板球不是很熟悉，阅读教程，观看比赛，但从未玩过）。

谢谢你。

更新：

我还认为一个球会存储大部分需要的决策数据，例如：

球。**Bowler** = player（投球的投球手）

球。**击球**手 = 球员（可能击球的击球手）

球。**OverId** = 超过这个球的位置

球。**Hittable** = 4（这个数字可能是由投球手力量+其他人产生的，也可能取决于投球手和击球手

球。**跑**数 = 2 击球者的跑数

ball.IsUsed 每当球磨损或新 ball.IsOutside = true 如果球被送到场外

===== 将用于计算击球手是否可以击球

球。**投掷高度**

球。**投掷速度**

球。**投掷效果**

球。**ThrowNumberOfBounces**

球。**击球高度**

球。**击球速度**

球。**FieldlerDirection** = **3**（朝向第三个外野手），随机

球。**FieldlerDirectionOffset** = **2**（在第 3 外野手的 2 米范围内。0 表示外野手可能直接从半空中接住它， ），随机

而且我还需要考虑投球手是否为树桩射击，这将是另一个工作流程..

**更新2：**

比赛是 20/20 板球比赛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:51:50.483

这是一个有趣的问题，但我看不到它的实用性。你是在模拟吗？

无论如何，如果我处于你的位置，假设你拥有与球员对应的所有相关数据，我会为每个球做以下事情。

我会将其分为 4 个阶段，每个结果由

**一种。战略**

**湾。力量**

**C。随机性**

**d。先前阶段的状态。**

1.  定义守备位置。根据保龄球队的策略，我会把我的强力外野手放在关键[位置](http://en.wikipedia.org/wiki/Fielding_%28cricket%29)。这可以通过混合策略和一些随机性来完成。

2.  定义球。这将取决于投球手的技能（旋转投球手/快速投球手/摇摆投球手）、比赛情况（局结束时的约克等）、一些随机因素和一些规则（每个投球手一个保镖等）（见[此处](http://en.wikipedia.org/wiki/Bowling_%28cricket%29)）。这个阶段的结果是击球手附近完美定义的球位置/速度/方向（基本上是轨迹）。

3.  定义笔划。这将取决于击球手的力量、比赛情况、一些随机性以及最重要的是第 2 阶段球的定义（参见 [此处]）[3](http://en.wikipedia.org/wiki/Batting_%28cricket%29)。这将定义下一个轨迹/速度。

4.  定义守备。这对你的问题来说是最关键的。现在这取决于第 1 阶段的场地布置、守场员力量，以及最关键的是第 3 阶段的球轨迹定义。根据这些因素，它可能是接球，或 0、1、2、4、6 次跑动. 一些明显的实现可能是，如果球的位置几乎平分两名守场员，并且附近没有其他守场员，并且如果球的速度足以到达边界，则为 4 分。在这里，您必须在第 4 阶段正确实现球轨迹的物理特性。不仅如此，如果轨迹没有接触地面并且附近有球员，如果球已经接触过，这可以定义为接球到达玩家附近之前的地面，

最后球应该回到投球手。

祝一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:25:23.293

我不认为板球的物理模拟通常是一个好主意。如果我是你，我会尝试在更抽象的层面上解决这个问题。

保龄球：

1.  速度、长度和线路。这取决于战术和投球手的稳定性。
2.  摆动或旋转。这取决于保龄球技术、球场和天气。
3.  错误：无球或边路。这再次取决于投球手的一致性。

一旦你知道了投球的类型（yorker、bouncer、full toss、googly 等等），你就可以从击球手的角度玩类似的游戏：他是尝试击球、阻挡还是离开？他更喜欢踢前脚还是后脚？等等。

你明白了：结果应该直接从球员和环境属性中计算出来，使用板球分析中已经建立的概念。

作为奖励，您可以使用 DL 来验证您的算法是否现实。

# javascript - jQuery IE 问题

> ID：11291629
> 
> 赞同：-3
> 
> 时间：2012-07-02T10:12:03.587
> 
> 标签：javascript, jquery, internet-explorer

```
var zoom = document.documentElement.clientWidth / window.innerWidth;
jQuery(window).resize(function() {

var zoomNew = document.documentElement.clientWidth / window.innerWidth;
    if (zoom != zoomNew) {
    alert('key is down');
    jQuery(".left_body").width((window.innerWidth-984)/2-6+"px");
    jQuery(".right_body").width((window.innerWidth-984)/2-6+"px");
    }
}); 
```

不能在 IE 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:19:52.070

这是因为

```
window.innerWidth 
```

在 IE 中返回未定义。导致缩放值为**NaN**

```
var zoom = document.documentElement.clientWidth / window.innerWidth; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:17:49.013

*“window.innerHeight/Width 由大多数浏览器提供，但 Internet Explorer 8- 不提供，甚至在 Internet Explorer 9+ 中，在怪癖模式下也不可用。”*

参考：

*   [http://www.howtocreate.co.uk/tutorials/javascript/browserwindow](http://www.howtocreate.co.uk/tutorials/javascript/browserwindow)

*   [如何在 Internet Explorer 8 中获取 innerWidth](https://stackoverflow.com/questions/9410088/how-do-i-get-innerwidth-in-internet-explorer-8)

..所以你将不得不找到一种支持跨浏览器的不同方法。在我发布的 stackoverflow 链接中，Sarfraz 接受的答案为您提供了您需要进行的更改。

# iphone - Tableview 不同高度的多个组

> ID：11291630
> 
> 赞同：0
> 
> 时间：2012-07-02T10:12:04.620
> 
> 标签：iphone

我需要实现一个表格视图，使其具有 3 个不同的部分，每个部分有 3 个不同的高度和不同的对象。我已将部分计数设置为 3，但我找不到合适的视图来获得不同的高度。

我该怎么做。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:21:16.177

你好毗湿奴我不是专业人士，我可能是错的。根据我的说法，如果您想要不同部分的不同高度，那么对于每个部分，您必须提供不同的单元格高度，这反过来会影响部分的高度。

```
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath: (NSIndexPath *)indexPath{
if(indexPath.section == 0)
{
    return 60.0f;

}
if(indexPath.section == 1)
{
    return 100.0f;
}
else
    return 150.0f;
} 
```

希望它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:35:01.640

你用过吗

```
-rectForSection:  (and possibly also -rectForFooterInSection:)? 
```

这可能会帮助你..

# c - 在不修改内核的情况下拦截系统调用的最小开销方式

> ID：11291632
> 
> 赞同：6
> 
> 时间：2012-07-02T10:12:07.567
> 
> 标签：c, linux, gcc, x86-64, system-calls

我知道拦截系统调用的方法如下。

1.  使用[ptrace](http://linux.die.net/man/2/ptrace)，但这似乎有很高的开销。据我所知，像 strace 这样的工具也在内部使用 ptrace。
2.  使用内核模块更改系统调用表，但据我所知，这种方法在以后的linux内核中已经不可能了。
3.  使用 LD_PRELOAD。但是，如果您直接进行系统调用而不使用该系统调用的一些包装库函数，这将不起作用。

所以你看到上面提到的所有方法都有缺陷。所以我的问题是在不修改内核且开销最小的情况下拦截系统调用的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:22:55.083

如果无法修改内核，则必须修改应用程序。您需要以某种方式拦截`int`//指令`syscall`，`sysenter`方法是在此处设置一个断点（如果您可以在 Linux 中的应用程序中处理它们；您可以在 Windows 中使用 SEH/VEH）或以更具侵入性的方式挂钩指令（将其更改为将保存系统调用号`jmp`和参数的代码，执行原始`int`//并返回）。`syscall``sysenter``jmp`

**编辑**：哦，我忘了补充一点，找到这些说明可能是一个挑战。您可能无法在编译的二进制文件中正确识别它们。您可能会错过一些（尤其是在运行时创建的那些），并且您可以为`int`/ `syscall`/采取一些其他指令`sysenter`（如果您的代码分析不完美）。OTOH，在运行时找到它们（通过在执行/模拟它们之前分析单个指令（或它们的块））将导致性能下降。

无论如何，性能问题很可能与进行的系统调用的数量以及记录/跟踪的信息量直接相关。如果你减少它（即只选择有趣的系统调用和参数）和/或只收集关于最后 10000 个系统调用的信息并将数据保存在内存中并将其保存到文件中一次（最后应用程序），您将获得更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:36:21.910

[Pintool](http://www.pintool.org/) might also help; it's available for Linux too.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:16:36.613

看看使用动态检测框架，例如[DTrace](http://en.wikipedia.org/wiki/DTrace)或[SystemTap](http://en.wikipedia.org/wiki/SystemTap)。一个或两个都应该适用于您的平台。

# javascript - Javascript中的守护线程

> ID：11291637
> 
> 赞同：2
> 
> 时间：2012-07-02T10:12:28.367
> 
> 标签：javascript, daemon, getjson

我有一个程序，它使用 getJSON 从服务器获取 JSON 并处理此数据并将其呈现给用户。但是服务器上的数据每隔一段时间就会更新一次。如何每 5 分钟获取一次新的 JSON 并将其显示给用户并在后台线程中执行？我可以为此使用 setTimeout 吗？

谢谢！马特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T10:44:37.290

使用每 5 分钟触发一次的时间间隔是显而易见的（也是大多数浏览器兼容的）方法。

这并没有创建单独的线程，而是传统的模拟这样做。实际发生的只是异步事件排队，在尽可能接近您规定它应该运行的时间点执行。但是，不能保证精度，因为它在同一个线程上运行，因此在 JS 引擎的执行中需要一个“机会之窗”。

换句话说，JS 引擎将尽最大努力在需要的时刻执行您的代码，但前提是它可以自由执行。

如果您不介意较旧的浏览器支持，您可以使用**[web worker](http://www.html5rocks.com/en/tutorials/workers/basics/)**，它确实在单独的线程上运行。

**网络工作者脚本**

```
self.addEventListener('message', function(evt) {
        var gateway = new XMLHttpRequest();
        var intie = setInterval(function() {
        gateway.open("GET",evt.data.load_url,true);
        gateway.send();
        gateway.onreadystatechange = function() {
            if (gateway.readyState==4 && gateway.status==200)
                self.postMessage(gateway.responseText);
        }
   }, 300000); //every 5 minutes
}, false); 
```

（请注意，我在那里使用 vanilla JS，而不是 jQuery，因为我不知道在 web 工作者中使用 jQuery 的任何方式。您可以导入脚本，但 jQuery 引用`window`，这些错误在 web 工作者中，因为它们与窗口或 DOM）

**主要 JS 脚本**

```
var worker = new Worker('worker.js');
worker.addEventListener('message', function(evt) {
    //the loaded JSON data is now held in evt.data
    alert(evt.data);
}, false);
worker.postMessage({load_url: 'json.txt'}); 
```

每 5 分钟呼叫一个新工人是否有任何好处，或者像我一样，使用一名工人并让它每 5 分钟行动一次，我不确定。可能不是很多，因为在任何一种情况下，都会有一个间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:16:08.330

是的，您可以使用`setTimeout`（或者`setInterval`如果您希望它无休止地运行）来提取数据。我认为这是你更好的选择...

# sql - 选择 ALL 的 WHERE？

> ID：11291639
> 
> 赞同：0
> 
> 时间：2012-07-02T10:12:33.150
> 
> 标签：sql, sql-server, database, tsql, select

我有一个查询，我希望最初调用它来捕获数据库中的所有结果。

然后，当组合框更新时，我希望它只捕获列`WHERE column = SelectedItemFromComboBox`。

一切都完成了；我唯一缺少的是某种查询方式

```
SELECT *
FROM Table1
WHERE Column1 = ALL; 
```

这样我就可以将其更新为

```
SELECT *
FROM Table1
WHERE Column1 = SelectedItemFromComboBox; 
```

我最初可以将字符串设置为什么`SelectedItemFromComboBox`以便返回所有值？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:16:11.183

设置`SelectedItemFromComboBox`为`null`并将您的查询更改为

```
SELECT *
FROM Table1
WHERE Column1 = SelectedItemFromComboBox
or SelectedItemFromComboBox is null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T10:16:25.173

您可以将空字符串之类的内容放入`SelectedItemFromComboBox`并修改您的查询：

```
SELECT *
FROM Table1
WHERE SelectedItemFromComboBox = ''
   OR Column1 = SelectedItemFromComboBox; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T10:19:10.570

```
SELECT *
FROM Table1
WHERE Column1 = Column1 
```

将获取所有数据

所以你可以使用空值

```
SELECT *
FROM Table1
WHERE Column1 = isnull(some_value, Column1) 
```

其中某个值为 NULL。为此，请使用空字符串，然后使用

```
SELECT *
FROM Table1
WHERE Column1 = isnull(CASE WHEN some_value = '' then NULL  else some_value end)), Column1) 
```

这将返回你想要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:20:02.727

在这种情况下，您可以将“SelectedItemFromComboBox”设置为 0 并以这种方式更新查询，因此如果第一个条件不匹配它的 OR 条件，其中 0=0 并返回初始组合框值的所有记录。

从表 1 中选择 *

WHERE Column1 = SelectedItemFromComboBox 或 0=SelectedItemFromComboBox ；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:23:58.837

如果由于某种原因您无法修改查询并且您只能控制输入的值，并且您没有使用参数化查询，并且您 100% 知道如何防止 SQL 注入，那么您可以设置`SelectedItemFromComboBox`为`'' OR 1 = 1`. 这应该是非常罕见的，只有在您无法控制的错误代码并且完全是黑客攻击时才需要。

# jquery - 使用 jQuery 从动态生成的高度减少 25 像素的边距

> ID：11291644
> 
> 赞同：0
> 
> 时间：2012-07-02T10:12:53.227
> 
> 标签：jquery

我想根据视口大小使用 jQuery 使用 mainImg 类调整图像的大小。使用以下脚本，我可以将图像调整为可用的确切视口高度，但我想在顶部将尺寸减小 20px，在底部边距减小 50px 以创建一些空白。

```
var viewportHeight = $(window).height();
$(document).ready(function() {
  $('.mainImg').css({ height: viewportHeight});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:14:25.480

试试这种方式：

```
var viewportHeight = $(window).height();
$(document).ready(function() {
   $('.mainImg').css({ 
      height    : (viewportHeight-70) + 'px', 
      marginTop : "20px" 
   });
}); 
```

这个想法是将整个高度减少 70px 并应用 20px 的 margin-top；这样`50px`就自动在底部创建了一个空间

# visual-studio - 从 Visual Studio 调试器获取变量

> ID：11291646
> 
> 赞同：3
> 
> 时间：2012-07-02T10:12:59.893
> 
> 标签：visual-studio, debugging, debuggervisualizer

我收到了一项任务，从程序中可视化一个数组，该程序正在 VS 中进行调试。有没有办法从外部程序连接到 Visual Studio 调试会话并从中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:00:23.630

从理论上讲，您可以使用[Debugger.GetExpression](http://msdn.microsoft.com/en-us/library/envdte.debugger.getexpression%28v=vs.80%29.aspx) API 从调试器中读取值并将它们发送到 MATLAB，但如果我们谈论的是相对大量的数据（例如大矩阵或向量），那么这种可能性具有合理性能的解决方案相当苗条。

一个更简单的解决方案可能是利用您可以从调试器调用自己的方法这一事实 - 在您的代码中定义一个将数据发送到 MATLAB 的方法，确保它定义在与您的数据结构相同的位置定义了重新序列化（这样调试器就不会抱怨可访问性问题），然后只需从 Watch 或 Immediate 窗口执行该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:29:53.113

这并不完全来自外部程序，但仍然有用：[msdn 文档](http://msdn.microsoft.com/en-us/library/e2zc529c.aspx)和[示例](http://blogs.msdn.com/b/deeptanshuv/archive/2005/03/21/400194.aspx)（或[C++ 示例](http://msdn.microsoft.com/en-us/library/8fwk67y3.aspx)）。现在，如果您真的想要一个外部程序来访问数组，您可以编写一个自定义可视化器，它不会可视化任何内容，而是通过套接字/管道将数据发送到另一个程序（我曾经使用这个原理来获取显示音频数据的数组Labview 在调试会话期间，非常方便）。

# c++ - 在多个地方处理整个异常层次结构的好方法

> ID：11291650
> 
> 赞同：1
> 
> 时间：2012-07-02T10:13:29.450
> 
> 标签：c++, exception-handling, coding-style

[我很确定这里有类似的问题，但我找不到。]

假设我有几个函数，它们可能会抛出整个异常层次结构——比如说*N*种异常类。

*现在，有没有一种很好的方法来处理所有这些异常，而不是用N* 块编写多次相同的代码`catch`？

我实现这一点的（非常丑陋的）方法是使用宏。其他想法？

[所有函数都有不同的输入/输出参数和返回类型]

* * *

**编辑**

是的，所有异常都有相同的基类——它是一个层次结构。但是不同的类有不同的附加信息。

例子：

```
try
{
    object->execute( ... );
}
catch( type1& ex )
{
    // ...
}
//...
catch( typeN& ex )
{
    // ...
}

// some other code
// and again:

try
{
    object->do_something_else( ... );
}
catch( type1& ex )
{
    // ...
}
//...
catch( typeN& ex )
{
    // ...
}

// and so on 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:23:22.770

创建一个调用的函数，该函数`handleExceptions(Exception&)`引用异常的基类。

在那个函数中，你可以做任何你想做的事情，例如调用一些特定于`Exception`. 您还可以定义实际存在的异常`dynamic_cast`等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T13:34:50.523

已经提到了通过基类捕获并将异常提供给 handleException 方法，然后该方法会打开实际的底层类型。这是另一种方法，相反：

您可以编写一个函数`exception_check`，它接受一个仿函数并在适当的内部执行它`try..catch`：

```
template<typename Func>
Func exception_check(Func fun)
{
    try
    {
        func();
    }
    catch( type1& ex )
    {...}
    //...
    catch( typeN& ex )
    {...}
    return func; //in case the functor stores a result. 
} 
```

当然，要使生成的代码看起来不那么丑陋，您可能需要 C++11 及其 lambda 函数，否则您会将代码分散在许多仿函数上。使用 lambda 函数，它可以简单地称为

```
exception_check([&](){ object->execute(...); }); 
exception_check([&](){ object->do_something_else(...); }); 
```

就我个人而言，我发现这更好地阅读然后在每个函数调用周围进行一次尝试/捕捉。

当然，在 c++11 中，对仿函数使用完美转发而不是复制它可能是个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:26:43.737

traget 函数的每个调用都应该有自己的 try 块，除非您可以将这些调用组合成一个内部带有 switch 的函数。

您可以捕获基类并调用一个通用函数，该函数将使用该`typeid`操作或任何其他方式来区分内部可能的异常类型。由于异常应该很少发生，因此使用 RTTI 的开销可能是可以接受的。

# javascript - 为什么音频和视频事件不冒泡？

> ID：11291651
> 
> 赞同：31
> 
> 时间：2012-07-02T10:13:34.120
> 
> 标签：javascript, html, audio, video, dom-events

我想知道为什么我的一些 Javascript 不能工作，直到我发现音频事件没有在 DOM 树中冒泡，例如`timeupdate`-event。

是否有理由不让音频和视频标签的事件冒泡？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-27T21:36:49.570

事件冒泡存在的原因是解决了哪个元素是事件的预期目标的模棱两可的问题。所以，如果你点击一个 div，你的意思是点击 div 还是它的父级？如果子级没有附加点击处理程序，则它会检查父级，依此类推。我相信你知道它是如何工作的。

音频事件不冒泡的原因是因为它们对任何其他元素都没有意义。当您在音频元素上触发 a 时，无论它是针对音频元素本身还是其父 div 都没有歧义`timeupdate`，因此无需冒泡。

[您可以在此处](http://www.quirksmode.org/js/events_order.html)阅读更完整的事件冒泡历史

**事件委托**

通过利用事件的捕获阶段仍然可以进行事件委托。只需添加 true 作为 addEventListener 的第三个参数，如下所示：

```
document.addEventListener('play', function(e){
    //e.target: audio/video element
}, true); 
```

请注意，此事件不会冒泡，而是会沿着 DOM 树向下移动，并且不能使用`stopPropagation`.

如果您想将此与 jQuery 的 .on/.off 方法一起使用（例如，具有命名空间和其他 jQuery 事件扩展）。以下来自[webshim 库](http://afarkas.github.io/webshim/demos/index.html)的函数应该会变得有用：

```
$.createEventCapturing = (function () {
    var special = $.event.special;
    return function (names) {
        if (!document.addEventListener) {
            return;
        }
        if (typeof names == 'string') {
            names = [names];
        }
        $.each(names, function (i, name) {
            var handler = function (e) {
                e = $.event.fix(e);

                return $.event.dispatch.call(this, e);
            };
            special[name] = special[name] || {};
            if (special[name].setup || special[name].teardown) {
                return;
            }
            $.extend(special[name], {
                setup: function () {
                    this.addEventListener(name, handler, true);
                },
                teardown: function () {
                    this.removeEventListener(name, handler, true);
                }
            });
        });
    };
})(); 
```

用法：

```
$.createEventCapturing(['play', 'pause']);

$(document).on('play', function(e){
    $('audio, video').not(e.target).each(function(){
        this.pause();
    });
}); 
```

# android - 在gphoto2中未检测到佳能相机？

> ID：11291653
> 
> 赞同：0
> 
> 时间：2012-07-02T10:13:39.860
> 
> 标签：android

我已经使用 gphoto2 通过 android 设备集成数码相机集成。我已经在 linux 中构建了应用程序并且也能够运行它，但是当我连接佳能的数码相机时，即佳能 EOS 5D Mark II 它没有检测到它。当我单击检测摄像头按钮时，它显示检测到 0 个摄像头。我找不到问题请帮忙。？我从这个网站得到 gphoto，即[http://gitorious.org/agphoto2/agphoto2/trees/master](http://gitorious.org/agphoto2/agphoto2/trees/master)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:21:08.823

你应该指定你的 Linux 发行版和版本，以及如何建立连接，可能还有重现的步骤。

据我了解，佳能 EOS 支持仍然有些不成熟，可能 gphoto 升级（或降级）或不同的发行版（您可以尝试从 Live CD 运行它，看看会发生什么）可能会有所帮助。

显然，这里的这个人在 Ubuntu 升级后开始出现问题，因此驱动程序/内核可能是一个问题：

[https://bugs.launchpad.net/ubuntu/+source/gphoto2/+bug/1009955](https://bugs.launchpad.net/ubuntu/+source/gphoto2/+bug/1009955)

# android - 如何一个接一个地自动播放媒体文件？

> ID：11291659
> 
> 赞同：0
> 
> 时间：2012-07-02T10:14:06.423
> 
> 标签：android

如果我有一个数组列表中的歌曲列表，并且我想按顺序自动播放歌曲。我怎样才能做到这一点 ？

目前，我的播放器播放一首歌曲并仅在我按下下一个按钮后播放下一首。我想删除按下一步按钮的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:20:29.683

`MediaPlayer`类有一个方法**[setOnCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener%28android.media.MediaPlayer.OnCompletionListener%29)**你可以像这样使用它，

```
 MediaPlayer mp;
    int count =0;
    mp.setOnCompletionListener(new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            count++;
            if(ListOfSongs.length<count)
                // play song from list
            else
                // either set counter to 0 and start again or say end of list

        }
    }); 
```

* * *

在 SO 上找到了一个可能有帮助的**[答案。](https://stackoverflow.com/questions/6362030/for-loop-using-a-raw-music-array-android)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T10:20:21.747

您可以使用[MediaPlayer.onCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener%28android.media.MediaPlayer.OnCompletionListener%29)在曲目结束时监听事件，以便您可以播放下一个

```
player.setDataSource(path);
player.prepare();
player.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer player) {
            player.stop();

            // play next audio file

        }

    });
player.start(); 
```

# jquery-mobile - 我应该使用 phonegap 本地存储来存储复选框字段选项吗

> ID：11291660
> 
> 赞同：3
> 
> 时间：2012-07-02T10:14:07.613
> 
> 标签：jquery-mobile, cordova, local-storage

我从 jQuery mobile 和 Phonegap 开始。

我有一个类别选择器，并根据所选类别显示属于该类别的复选框列表。请参阅下面我可能会显示的复选框组的 1 个示例。请注意，它是隐藏的，如果用户在“类别”字段中选择“位置”，我只会显示该字段。

```
<select name="select-choice-0" id="category" onchange="javascript:showboxes();updateresults();">
<option value="0">Select a category</option>
<option value="4">Catering</option>   
<option value="1">Locations</option>
<option value="2">Music</option>
</select>

<div id="locationthemes_box" data-role="collapsible" style="display:none;">
<h3>Themes</h3>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup">
    <legend>Theme</legend>
    <input type="checkbox" name="locationthemes" id="checkbox-1" value="2" class="custom" />
    <label for="checkbox-1">Castle</label>
    <input type="checkbox" name="locationthemes" id="checkbox-2" value="3" class="custom" />
    <label for="checkbox-2">Barn</label>
    <input type="checkbox" name="locationthemes" id="checkbox-3" value="5" class="custom" />
    <label for="checkbox-3">Restaurant</label>
    <input type="checkbox" name="locationthemes" id="checkbox-4" value="8" class="custom" />
    <label for="checkbox-4">Bar</label>
</fieldset>
</div>
</div> 
```

现在，我有更多想要显示或隐藏的复选框组，具体取决于所选类别。我想防止我拥有页面中未显示的复选框的 HTML。因为这会导致不必要的带宽使用。然后我想：也许我应该通过在用户更改类别选择框后立即对相关复选框和值发出 Web 服务请求来动态加载复选框组的内容。

但这会导致大量的网络请求，我试图节省带宽。

所以我的想法是本地存储可能能够解决我的问题。然后我会将复选框值存储为名称/值字符串：
locationthemes = 2;Castle;3;Barn;5;Restaurant;8;Bar

我的问题：这是要走的路还是有我不知道的最佳实践？
如果我的方式是建议的方式：欢迎使用 PhoneGap 使用本地存储的任何示例！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:35:18.827

如果您使用 Jquery Mobile 的单页概念，即拥有一个 HTML 并包含其中的所有页面，如下所示

```
<div data-role="page" id="page1">
<div data-role="page" id="page2">
<div data-role="page" id="page3">
<div data-role="page" id="page4"> 
```

然后您可以使用**全局变量**来存储值。

否则，您可以按照此处的说明使用 localStorage [http://docs.phonegap.com/en/1.8.1/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.8.1/cordova_storage_storage.md.html#localStorage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:01:34.000

我建议使用 localStorage 只是因为 Android 在需要时会无情地杀死您的应用程序。一旦用户将您的应用程序置于后台一段时间，或者如果他让手机进入睡眠状态或等待时间过长，那么该应用程序可能会被杀死。在这里，您可以确保始终将应用程序的状态或重要变量存储在 localStorage 中，然后在重新启动应用程序时再次获取此数据（通过简单的启动检查）。

# android - 应用程序如何检查 Android 中是否已安装库？

> ID：11291664
> 
> 赞同：1
> 
> 时间：2012-07-02T10:14:25.100
> 
> 标签：android, android-intent

我是 Android 新手，这对你们中的一些人来说可能是个菜鸟问题 :)。

可以说我有一个可供多个应用程序使用的库。在这种情况下，应用程序必须将库添加为打包过程的一部分。

**第一个问题：** 如果多个应用程序包含该库，那么它会有多个副本，对吗？

**第二个问题** 如果我们需要避免这种情况，那么，我们需要有一种机制，在应用程序中检查库是否已经安装，然后重用它。这可能吗？

我也经历了这个： [http](http://code.google.com/p/android/issues/detail?id=4161) ://code.google.com/p/android/issues/detail?id=4161 ，除了这里提到的方式之外，还有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:20:25.490

如果图书馆有一个已经存在的活动（使用第三方应用程序），你可以使用这个功能：

```
public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
        packageManager.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
} 
```

# css - 我可以将样式应用于 CSS 或 Sass 中的所有伪选择器吗？

> ID：11291667
> 
> 赞同：20
> 
> 时间：2012-07-02T10:14:28.390
> 
> 标签：css, css-selectors, sass

是否可以使用 CSS 或 Sass将样式应用于所有锚标记的**伪选择器？**

就像是

```
a:* {
    color: #900;  
} 
```

代替

```
a {
    &:hover, &:link, &:active, &:visited {
        color: #900; 
    } 
} 
```

我只想重置标准样式。在 CSS 中，通配符可用于将样式应用于所有元素……但是所有伪选择器呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T12:31:25.463

**简短回答**：不，不直接

* * *

但是，可以使用 mixin 来产生类似的效果。

```
// Sets the style only for pseudo selectors
@mixin setLinkSelectorStyle {
  &:hover, &:link, &:active, &:visited {
        @content;
    }
}

// Sets the style to pseudo selectors AND base default anchor
@mixin setLinkStyleAll {
  &, &:hover, &:link, &:active, &:visited {
        @content;
    }
}

a {
  color:red;
  @include setLinkSelectorStyle {
    color:gold;
  }
}

a.specialLink {
  @include setLinkStyleAll {
    color:purple;
  }
} 
```

* * *

【使用[http://sassmeister.com/](http://sassmeister.com/)编译SASS的例子】

```
a {
  color: red;
}
a:hover, a:link, a:active, a:visited {
  color: gold;
}

a.specialLink, a.specialLink:hover, a.specialLink:link, a.specialLink:active, a.specialLink:visited {
  color: purple;
}
```

```
<a>Normal anchor, No href (:link won't work, but other selectors will)</a>
<hr />
<a href="#">Normal anchor</a>
<hr />
<a class="specialLink">Specific class (no href)</a>
<hr />
<a class="specialLink" href="#">Specific class</a>
```

当 mixin 包含在锚/类中时，mixin 将为所有伪选择器创建规则。

* * *

删除旧答案，查看历史以查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-24T19:30:53.380

你可以这样做：

```
 &:before, &:after {
      content: 'a';
  } 
```

# php - Yii 处理表格

> ID：11291668
> 
> 赞同：1
> 
> 时间：2012-07-02T10:14:31.417
> 
> 标签：php, yii

我有一个表单，其中有 2 个输入字段，然后我`dataTables`在这个表单中有动态的，其中包含`checkboxes`每个表中的 2 个输入字段。我需要发送包含表格数据的表单数据`POST`。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:23:46.213

由于您的方法不确定，因此问题不清楚。我想我们可以更准确地回答，但作为参考，您可以查看 [如何使用单个表单收集两个或多个模型的数据？](http://www.yiiframework.com/wiki/19/how-to-use-a-single-form-to-collect-data-for-two-or-more-models/)还有[多模型形式](http://www.yiiframework.com/extension/multimodelform/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:32:04.517

[在这里使用CFormModel](http://www.yiiframework.com/doc/guide/1.1/en/basics.model)也可能很有用。

# android - 我应该如何在 Cocos2d-x2.0 for Android 中缩放到全屏？

> ID：11291674
> 
> 赞同：0
> 
> 时间：2012-07-02T10:15:12.803
> 
> 标签：android, cocos2d-x

在 Cocos2d-x2.0 中：我打开了 view->setDesignResolutionSize(480, 320); 但是有些设备有两个黑色的侧面。它不是很好。

我应该如何在 Cocos2d-x2.0 for Android 中缩放到全屏？

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:59:25.517

出现黑边的原因是 cocos2d-x 尝试保持高宽比，因为在 android 设备上存在太多不同的比例。为了避免图像失真，它们强制实现与您的 ResolutionSize 相同的比率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:12:19.153

有多种方法可以为您的应用处理多屏幕分辨率支持。你可以在[这里](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Multi_resolution_support)找到。你所经历的被称为信箱。

# mobile - 检测到移动设备 ID 后立即重定向到移动站点

> ID：11291681
> 
> 赞同：0
> 
> 时间：2012-07-02T10:15:55.600
> 
> 标签：mobile

我的主要网站在 IIS、JAVA 上运行，我最新的移动网站在 apache、php 上运行。我想在检测到移动设备后立即将使用重定向到移动网站。我可以在 IIS 中做某事还是需要在我的主网站上编写一些代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:39:21.240

试试 HandsetDetection.com。该服务会检测移动设备和平板电脑浏览器，并帮助您重定向到最优化的页面版本。每月最多可免费检测 20k 次！

# jquery - “未捕获的语法错误：意外的令牌非法”VB.NET 问题

> ID：11291682
> 
> 赞同：0
> 
> 时间：2012-07-02T10:16:01.870
> 
> 标签：jquery, vb.net

我将以下 onclick 事件应用于服务器端代码中的 vb.net 按钮。我需要查询字符串包含我分配给 btnGenerate 的产品数据属性的内容。

当我单击 btnGenerate 时，我的 Title 出现错误，我认为这与我使用各种引号有关。

将 #btnGenerate 和 products 周围的单撇号更改为双引号会导致文本："$("#btnGenerate").data("products");" 出现在我的查询字符串中，而不是它应该检索的值中。

```
Me.btnGenerate.Attributes.Add( _
    "onclick", _
    "return OpenPrinterFriendly('DespatchLabel.aspx?salesordernumber=" & _
    e.CommandArgument.ToString & " &newprocessdate=" & hdnNewProcessDate.Value & _
    "&products=$('#btnGenerate').data('products');')") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:23:54.793

您需要使用`\`字符转义字符串中的单引号：

```
Me.btnGenerate.Attributes.Add("onclick", 
    "return OpenPrinterFriendly('DespatchLabel.aspx?salesordernumber=" & _
    e.CommandArgument.ToString & "&newprocessdate=" & hdnNewProcessDate.Value & _
    "&products=$(\'#btnGenerate\').data(\'products\');')") 
```

* * *

**编辑：**

要使用 jQuery 检索值，您需要有这个（类似于[Konrad](https://stackoverflow.com/a/11291850/119230)的响应，尽管他缺少一个`+`标志：

```
Me.btnGenerate.Attributes.Add("onclick", 
    "return OpenPrinterFriendly('DespatchLabel.aspx?salesordernumber=" & _
    e.CommandArgument.ToString & " &newprocessdate=" & hdnNewProcessDate.Value & _
    "&products=' + $('#btnGenerate').data('products'));") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:25:41.683

你有嵌套的单引号。尝试这个：

```
Me.btnGenerate.Attributes.Add( _
    "onclick", _
    "return OpenPrinterFriendly(""DespatchLabel.aspx?salesordernumber=" & _
    e.CommandArgument.ToString & " &newprocessdate=" & hdnNewProcessDate.Value & _
    "&products=$('#btnGenerate').data('products');"")") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:25:45.153

您可能希望执行 jQuery 代码，而不是成为查询字符串的一部分。在这种情况下，将其从引号中拉出：

```
Me.btnGenerate.Attributes.Add( _
    "onclick", _
    "return OpenPrinterFriendly('DespatchLabel.aspx?salesordernumber=" & _
    e.CommandArgument.ToString & " &newprocessdate=" & hdnNewProcessDate.Value & _
    "&products='$('#btnGenerate').data('products'));") 
```

否则，米罗斯拉夫的答案可能就是你想要的。

# javascript - 导航时如何仅更改页面的一部分？

> ID：11291686
> 
> 赞同：-1
> 
> 时间：2012-07-02T10:16:18.250
> 
> 标签：javascript, facebook

我有类似的页面

```
<html>
<body>
    <div id="header">
        <a href="page1.html">Page1</a>
        <a href="page2.html">Page2</a>
    </div>
    <div id="Container">
        Content
    </div>
</body>
</html> 
```

单击导航时，我想获取页面但具有固定***标题***。只需更改容器的内容和地址栏或更改带有固定标题的页面

就像带有固定聊天和标题栏的 Facebook。

我尝试了很多像 Ajax 这样的方法，但我不能使用它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:45:37.490

你可以使用[jQuery](http://api.jquery.com/jQuery.get/)`$.get()`并尝试这样的事情：

```
$(document).ready(function() {
    $('a').click(function(event) {
        event.preventDefault();
        $.get(this.href, {}, function(data) {
            $('#container').html(data);
        });
    });
}); 
```

这将替换`#container`导航中链接后面的内容。然后，您有责任确保只有所需的内容在`page1.html`.

一个更好和更复杂的方法是包含完整的站点内容`page1.html`并在函数中使用一些逻辑`success`来仅提取所需的内容。
对于没有 JavaScript 等的用户来说，这会很好地回退。

阅读 jQuery 的 Ajax 功能，您应该能够相当快地解决问题。

# iphone - 更改 UIWebView 的文本颜色

> ID：11291689
> 
> 赞同：9
> 
> 时间：2012-07-02T10:16:21.027
> 
> 标签：iphone, ipad, uiwebview, background, textcolor

我正在制作一个 epub 阅读器，我在其中加载 HTML 页面`webview`：

```
[_webview loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:_pagesPath]]]; 
```

现在我想更改 HTML 页面的背景颜色和文本颜色。我使用改变了我的 webview 的背景颜色，

```
self._webview.backgroundColor = [UIColor blackColor];
self._webview.opaque = NO; 
```

那行得通，但我也想更改我的 webview 的文本颜色。我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T10:23:22.957

在此代码 `color:#fff`标记中使用文本颜色#fff 使用黑色

```
NSString *webStr =@"Your text use";

[self._webview  loadHTMLString:[NSString stringWithFormat:@"<div id ='foo' align='left' style='line-height:18px; float:left;width:300px; font-size:13px;font-family:helvetica;background-color:transparent; color:#fff;>%@<div>",webStr] baseURL:nil]; 
```

如果你使用**本地 html**使用

```
 NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"html"];

NSString* text = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
NSLog(@"%@",htmlFile);

NSLog(@"Hello");

[self._webview  loadHTMLString:[NSString stringWithFormat:@"<html><body bgcolor=\"#000000\" text=\"#FFFFFF\" face=\"Bookman Old Style, Book Antiqua, Garamond\" size=\"5\">%@</body></html>", text] baseURL: nil]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T12:11:48.213

```
[_webview loadHTMLString:[NSString stringWithFormat:@"<html><body style=\"background-color: white; font-size: 17; font-family: HelveticaNeue; color: #ffffff\">%@</body></html>", strDataFromHTML] baseURL: nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T15:41:28.873

[我制作了一个方法](https://gist.github.com/rsaunders100/8711151)，它使用给定的正确样式将一些文本包装在 HTML 正文中`UIColor`和`UIFont`.

只需将生成的 HTML 弹出到 webview 中：

```
NSString * htmlString = [MyClass htmlFromBodyString:@"an <b>example</b>"
                                           textFont:[UIFont systemFontOfSize:10]
                                          textColor:[UIColor grayColor]];
[webView loadHTMLString:htmlString baseURL:nil]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T07:48:45.467

这是一个小的 Swift 扩展来处理这个问题：

```
import UIKit

extension String
{
    func htmlFormattedString(font:UIFont, color: UIColor) -> String
    {
        var numberOfColorComponents:Int = CGColorGetNumberOfComponents(color.CGColor)
        var colorComponents = CGColorGetComponents(color.CGColor)

        var colorHexString = ""
        if numberOfColorComponents == 4 {
            var red = colorComponents[0] * 255
            var green = colorComponents[1] * 255
            var blue = colorComponents[2] * 255

            colorHexString = NSString(format:"%02X%02X%02X", Int(red), Int(green), Int(blue)) as String
        } else if numberOfColorComponents == 2 {
            var white = colorComponents[0] * 255

            colorHexString = NSString(format:"%02X%02X%02X", Int(white), Int(white), Int(white)) as String
        } else {
            return "Color format noch supported"
        }

        return NSString(format: "<html>\n <head>\n <style type=\"text/css\">\n body {font-family: \"%@\"; font-size: %@; color:#%@;}\n </style>\n </head>\n <body>%@</body>\n </html>", font.familyName, String(stringInterpolationSegment: font.pointSize), colorHexString, self) as String
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:23:45.300

尝试在您的 HTML 文件中添加您从服务器获得的代码...然后只有您可以更改文本颜色...或在您的 HTML 文件之前添加一些 HTML 代码以更改文本颜色

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-02T11:53:28.223

试试这个...

1.  解析 html 文件。
2.  根据您的要求显示内容。

希望这可以帮助。

# sql - 创建和调用 PL/SQL 函数

> ID：11291693
> 
> 赞同：0
> 
> 时间：2012-07-02T10:16:27.127
> 
> 标签：sql, database, plsql, oracle11g, plsqldeveloper

我是 PL/SQL 的新手。到现在为止一直很好。我有这个查询，它工作正常。

```
declare
rec employees_practice%rowtype;
sam taxObligations%rowtype;
socialsecurity number;
rentallowance number;
transportation number;
taxableincome number;
incometaxliability number;
netpay number;
total number;
totaldeductions number;

    begin
    for rec in (select * from employees_practice)
    loop
    socialsecurity:=(5.5/100)*(rec.salary);
    rentallowance:=(20/100)*(rec.salary);
    if(rec.Category='S') 
    then transportation:= 150; 
    else transportation:=100;
    end if;

taxableincome:=rec.Salary-socialsecurity+rentallowance+transportation;

for sam in (select * from taxObligations) 
loop
if(taxableincome between sam.Minincome and sam.Maxincome)
then incometaxliability:= sam.MinimumBracketTax + (taxableincome-sam.Minincome)*(sam.TaxBracketRate/100);
else incometaxliability:=null;
end if;
end loop;
netpay:= taxableincome-incometaxliability;
total:= rec.Salary + rentallowance + transportation;

totaldeductions:=socialsecurity + incometaxliability;

-- Here, I used DBMS.... to give an output in different format.

end loop; 
end; 
```

我现在想创建一个包含上述代码的函数，这样我就可以使用单个 SQL 或 PL/SQL 查询来调用它。这让我很头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:41:02.063

您可以使其成为[流水线功能](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3ap11_question_id:19481671347143)：

首先你需要一个表格类型：

```
create or replace type result_tab as table of varchar2(32767); 
```

然后，使您的代码成为流水线函数：

```
create or replace function your_func return result_tab PIPELINED is

rec employees_practice%rowtype;
sam taxObligations%rowtype;
socialsecurity number;
rentallowance number;
transportation number;
taxableincome number;
incometaxliability number;
netpay number;
total number;
totaldeductions number;

    begin
    for rec in (select * from employees_practice)
    loop
    socialsecurity:=(5.5/100)*(rec.salary);
    rentallowance:=(20/100)*(rec.salary);
    if(rec.Category='S') 
    then transportation:= 150; 
    else transportation:=100;
    end if;

taxableincome:=rec.Salary-socialsecurity+rentallowance+transportation;

for sam in (select * from taxObligations) 
loop
if(taxableincome between sam.Minincome and sam.Maxincome)
then incometaxliability:= sam.MinimumBracketTax + (taxableincome-sam.Minincome)*(sam.TaxBracketRate/100);
else incometaxliability:=null;
end if;
end loop;
netpay:= taxableincome-incometaxliability;
total:= rec.Salary + rentallowance + transportation;

totaldeductions:=socialsecurity + incometaxliability;

-- Here, I used PIPE ROW() to give an output in different format.
pipe row('what ever you had in your dbms_output command');

end loop; 

return;

end your_func; 
```

现在，您可以像这样调用/查询它：

```
select * from table(your_func) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:23:44.927

如果现在一切正常，请尝试在存储的 FUNCTION 中执行所有操作，并将 CURSOR 作为 IN 参数以返回 NUMBER。了解变量类型和游标。Oracle[文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_packages.htm)应该足以让您自己完成。

之后，如果您遇到代码问题，请在此处发布，您肯定会得到帮助。

# python - 如何通过python从dtd创建xml示例文件

> ID：11291698
> 
> 赞同：3
> 
> 时间：2012-07-02T10:16:56.690
> 
> 标签：python, xml, dtd-parsing

我想使用 python 从 dtd 创建示例 xml。不知道beautifulsoup会有帮助

```
<?xml version="1.0" encoding="UTF-8"?>
   <!ELEMENT DatabaseInventory (DatabaseName+)>
   <!ELEMENT DatabaseName (   GlobalDatabaseName
                            , OracleSID
                            , DatabaseDomain
                            , Administrator+
                            , DatabaseAttributes
                            , Comments)
   >
   <!ELEMENT GlobalDatabaseName (#PCDATA)>
   <!ELEMENT OracleSID          (#PCDATA)>
   <!ELEMENT DatabaseDomain     (#PCDATA)>
   <!ELEMENT Administrator      (#PCDATA)>
   <!ELEMENT DatabaseAttributes EMPTY>
   <!ELEMENT Comments           (#PCDATA)>

   <!ATTLIST Administrator       EmailAlias CDATA #REQUIRED>
   <!ATTLIST Administrator       Extension  CDATA #IMPLIED>
   <!ATTLIST DatabaseAttributes  Type       (Production|Development|Testing) #REQUIRED>
   <!ATTLIST DatabaseAttributes  Version    (7|8|8i|9i) "9i">

   <!ENTITY AUTHOR "exampler">
   <!ENTITY WEB    "www.example.com">
   <!ENTITY EMAIL  "exampler@example.com"> 
```

我从其他来源复制了这个 dtd。

# java - @RequestParam 为空（Spring MVC）

> ID：11291699
> 
> 赞同：1
> 
> 时间：2012-07-02T10:17:08.247
> 
> 标签：java, spring, model-view-controller, jsp, spring-mvc

我正在尝试向我的网络应用程序添加一个编辑功能，但我在使用`@RequestParam`. 它得到的参数是 null ，它不应该是。我希望有人能指出我在哪里犯了错误。

以下是来自***控制器***的方法：

```
@RequestMapping(value = "/edit", method = RequestMethod.GET)
public String getEdit(@RequestParam("customerId") Integer customerId, Model model) {
Customer existingCustomer = customerService.retrieveCustomer(customerId);
    model.addAttribute("customerAttribute", existingCustomer);
    return "edit-customer";
}

@RequestMapping(value = "/edit", method = RequestMethod.POST)
public String postEdit(@RequestParam("customerId") Integer customerId,
        @ModelAttribute("customerAttribute") @Valid Customer customer, BindingResult result) {
    if (result.hasErrors()) {
        return "edit-customer";
    }
    customer.setCustomerId(customerId);
    customerService.editCustomer(customer);
    return "redirect:/test/customer/list"; 
```

和两个jsp页面

**编辑客户.jsp**：

```
<body>

<h1>Edit Existing Customer</h1>

<c:url var="saveUrl" value="/test/customer/edit?customerId=${customerAttribute.customerId}" />
<form:form modelAttribute="customerAttribute" method="POST" action="${saveUrl}">
 <table>
  <tr>
   <td><form:label path="customerId">Customer Id:</form:label></td>
   <td><form:input path="customerId" disabled="true"/></td>
  </tr>

  <tr>
   <td><form:label path="customerCountry">Customer Country</form:label></td>
   <td><form:input path="customerCountry"/></td>
  </tr>

  <tr>
   <td><form:label path="customerName">Customer Name:</form:label></td>
   <td><form:input path="customerName"/></td>
  </tr>

 </table>

 <input type="submit" value="Save" />
</form:form>

</body> 
```

**查看所有客户.jsp**：

```
<body>
<a href="<c:url value="/test/home"/>">Home</a>

<h1>Customers</h1>

<c:url var="addUrl" value="/test/customer/add" />
<c:url var="editUrl" value="/test/customer/edit?customerId=${customer.customerId}"/>
<c:if test="${!empty customers}">
<a href="${addUrl}">Add</a> 
</c:if>
<table style="border: 1px solid; width: 500px; text-align:center">
 <thead style="background:#ccc">
  <tr>
   <th>Customer Id</th>
   <th>Customer Country</th>
   <th>Customer Name</th>
   <th colspan="4"></th>
  </tr>
 </thead>
 <tbody>
 <c:forEach items="${customers}" var="customer">
  <tr>
   <td><c:out value="${customer.customerId}" /></td>
   <td><c:out value="${customer.customerCountry}" /></td> 
   <td><c:out value="${customer.customerName}" /></td>
   <td><a href="${editUrl}">Edit</a></td>
  </tr>
 </c:forEach>
 </tbody>
</table>

<c:if test="${empty customers}">
 There are currently no customers in the list. <a href="${addUrl}">Add</a> a customers.
</c:if>

</body> 
```

谁能看到方法`Integer customerId`中的为什么`GET`为空？

谢谢你，D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:20:55.550

您在`${customer.customerId}`初始化之前使用：

```
<!-- you use it here -->
<c:url var="editUrl" value="/test/customer/edit?customerId=${customer.customerId}"/>
<c:if test="${!empty customers}">
....
 <tbody>
 <!-- and initialize it here -->
 <c:forEach items="${customers}" var="customer">
  <tr>
   <td><c:out value="${customer.customerId}" /></td>
   <td><c:out value="${customer.customerCountry}" /></td> 
   <td><c:out value="${customer.customerName}" /></td>
   <td><a href="${editUrl}">Edit</a></td>
  </tr>
 </c:forEach>
 </tbody>
</table> 
```

只需`editUrl`在循环内设置：

```
<c:if test="${!empty customers}">
....
 <tbody>
 <c:forEach items="${customers}" var="customer">
   <c:url var="editUrl" value="/test/customer/edit?customerId=${customer.customerId}"/>
  <tr>
   <td><c:out value="${customer.customerId}" /></td>
   <td><c:out value="${customer.customerCountry}" /></td> 
   <td><c:out value="${customer.customerName}" /></td>
   <td><a href="${editUrl}">Edit</a></td>
  </tr>
 </c:forEach>
 </tbody>
</table> 
```

它应该可以工作。无论如何，您都必须`editUrl`为每个客户重置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:24:34.003

可能是因为您将 customerId 作为 Integer 接受，请尝试将其作为 String 接受。试试这个：

```
@RequestMapping(value = "/edit", method = RequestMethod.GET)
public String getEdit(@RequestParam("customerId") String customerId, Model model) {
Customer existingCustomer = customerService.retrieveCustomer(Integer.parseInt(customerId));
    model.addAttribute("customerAttribute", existingCustomer);
    return "edit-customer";
}

@RequestMapping(value = "/edit", method = RequestMethod.POST)
public String postEdit(@RequestParam("customerId") String customerId,
        @ModelAttribute("customerAttribute") @Valid Customer customer, BindingResult result) {
    if (result.hasErrors()) {
        return "edit-customer";
    }
    customer.setCustomerId(Integer.parseInt(customerId));
    customerService.editCustomer(customer);
    return "redirect:/test/customer/list"; 
```

# silverlight - 带有 Chrome 的 Silverlight 5 中的弹出窗口

> ID：11291702
> 
> 赞同：2
> 
> 时间：2012-07-02T10:17:20.700
> 
> 标签：silverlight, google-chrome, null, popup

我有一个恼人的问题。我想以标准方式打开一个弹出窗口：

`System.Windows.Browser.HtmlPopupWindowOptions options = new System.Windows.Browser.HtmlPopupWindowOptions(); // Setting the options...`

`var x = System.Windows.Browser.HtmlPage.PopupWindow(MyPath, "_blank", options);`

它在 FF 和 IE 中运行良好，但我在 Chrome 中观察到一个奇怪的行为。弹出窗口实际上打开了，但我已经`null`进入`x`. 是的，我设置 `allowHtmlPopupWindow`为`true`.

你有什么想法？提前致谢！

# javascript - 对不同的元素使用一个函数 javascript

> ID：11291716
> 
> 赞同：0
> 
> 时间：2012-07-02T10:17:50.683
> 
> 标签：javascript, html

我是 JavaScript 新手，我想了解如何将相同的函数用于 JavaScript 中的不同元素。

即如何`document.getElementById`在函数中设置id值。我不知道为什么我的代码不起作用。

JavaScript

```
function onhover(imgx)
{
    var x = imgx;
    document.getElementById('x').style.opacity=0.5;
} 
```

HTML

```
<img id="img1" src="img1.jpg" onmouseout="onhover('img1')">
<img id="img2" src="img2.jpg" onmouseout="onhover('img2')"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:20:27.800

假设所有处理程序都不应该在标记内定义（为了逻辑和内容之间的分离），试试这个

```
<img id="img1" src="img1.jpg" onmouseout="onhover(this)">
<img id="img2" src="img2.jpg" onmouseout="onhover(this)">

function onhover(img) {
   img.style.opacity=0.5;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:21:34.240

对您的代码做一个微不足道的更改 - 删除`x`. 当您使用单引号或双引号时，您传递的是字符串 "x" 而不是变量的值`x`。

```
function onhover(imgx)
{
    var x = imgx;
    document.getElementById(x).style.opacity=0.5;
} 
```

不过，老实说，您可以`imgx`立即使用；将其保存到`x`其中有点不必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:05:13.550

我已经为您创建了代码库，请使用以下链接进行检查。

[http://codebins.com/codes/home/4ldqpcc](http://codebins.com/codes/home/4ldqpcc)

# javascript - 禁用 Safari 错误警报

> ID：11291719
> 
> 赞同：1
> 
> 时间：2012-07-02T10:18:08.030
> 
> 标签：javascript, ios, safari, web

我使用以下代码禁用 javascript 警报

```
window.alert = function() {}; 
```

它会在 Iphone 上运行时禁用除 safari 浏览器错误警报之外的所有其他警报，例如无效地址警报。如何在 safari 上禁用这些错误警报？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T10:23:02.610

可能是，更好的方法是避免从您的代码中调用警报功能？

# iphone - UIPopOverController 的 UIBarButton 函数错误 - Objective C

> ID：11291721
> 
> 赞同：1
> 
> 时间：2012-07-02T10:18:12.650
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个名为 as 的按钮`Sync`。单击它时，我需要显示一个 popOverController，它在`UITableView`. 我在`.m`文件中使用了以下代码行来声明`UIButton`in`ViewWillAppear`函数：

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Sync"
                                                               style:UIBarButtonItemStyleBordered
                                                              target:self
                                                              action:@selector(syncAction)] ; 
```

syncAction 的代码是：

```
- (void)syncAction:(id)sender{

Sync = [[SyncTableViewController alloc] initWithStyle:UITableViewStylePlain];

Sync.syncDelegate = self;
self.SyncTableViewPopover = [[UIPopoverController alloc] 
                                   initWithContentViewController:Sync];               

[self.SyncTableViewPopover presentPopoverFromBarButtonItem:sender 
                                        permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];

} 
```

但是，但是，在运行应用程序时，我收到以下错误::

```
[splitViewXXXXViewController syncAction]: unrecognized selector sent to instance 0x6b70660

2012-07-02 15:35:59.549 splitView[895:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[splitViewXXXXViewController syncAction]: unrecognized selector sent to instance 0x6b70660' 
```

我无法解决它。有人可以帮我整理一下吗？？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:20:55.423

您必须使用*@selector(syncAction:)*

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Sync"
                                                           style:UIBarButtonItemStyleBordered
                                                          target:self
                                                          action:@selector(syncAction:)] ; 
```

这将解决您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:23:02.010

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Sync"
                                                           style:UIBarButtonItemStyleBordered
                                                          target:self
                                                          action:@selector(syncAction:)] ; 
```

确保你**自己**（splitViewXXXXViewController）在这里有一个

```
- (void)syncAction:(id)sender; 
```

在其标头中声明的方法，以及

```
action:@selector(syncAction:)] 
```

不要忘记添加分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:20:20.137

调用选择器时，您缺少额外的冒号“：”。

# ios - Web 应用程序 iOS、黑莓

> ID：11291725
> 
> 赞同：0
> 
> 时间：2012-07-02T10:18:30.087
> 
> 标签：ios, web-applications

我需要我的应用程序与 BlackBerry 智能手机和 iOS (iPad) 配合使用。

目前我使用 BlackBerry Web 作品来构建和签署我的应用程序，因此它可以在没有互联网连接的情况下独立使用。

我想对 iOS 做同样的事情：签署应用程序并部署。

许多人说只需导航到您的应用所在的网站，然后添加到书签然后主屏幕，如 Dashcode 用户指南[“测试和共享”](http://developer.apple.com/library/safari/#documentation/AppleApplications/Conceptual/Dashcode_UserGuide/Contents/Resources/en.lproj/DebuggingSharing/DebuggingSharing.html#//apple_ref/doc/uid/TP40004692-CH16-SW2)和 Safari 开发人员库文章[“Safari 客户端存储和离线应用程序编程指南”中所述](https://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Introduction/Introduction.html)

但我不想将应用程序托管在 Web 服务器上，我只想构建和部署，因为这不是公开的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:29:27.030

我想您要问的是，您想使用 Web 技术开发一个不需要服务器来托管数据库的应用程序。

此外，您不希望用户通过书签/AddToHomescreen(webclip) 进行用户/分发；您想签署应用程序并通过 Appstore 分发。

在这种情况下，您应该查看[http://phonegap.com/about](http://phonegap.com/about)，它允许您通过应用商店进行签名和分发。

**更新**：

如果您想在您的设备上安装它（称为 Adhoc 安装），您需要有一个来自苹果的 ios 开发者帐户。并且可以使用 XCode 安装，ios 开发者程序限制没有。您可以安装的设备数量（最多 100 个开发设备）。

如果您有资格参加企业计划，那么您可以将其安装在更多设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:39:56.903

在 iphone 和 ipad 中复制资源文件夹中的所有 html 资源，您可以通过 webview 访问所有 index.html 页面。现在所有的 html 页面现在都是本地的，不需要服务器端，因为它是本地路径而不是服务器路径。现在您可以在应用程序世界上构建和分发应用程序。

让我知道任何疑问。

# java - Java 编译器级别不匹配

> ID：11291727
> 
> 赞同：0
> 
> 时间：2012-07-02T10:18:49.670
> 
> 标签：java, eclipse, jakarta-ee, maven, maven-3

我在 eclipse helios 中使用 jsf2 hibernate 4.1.4、spring 3.1 和 maven 3。但是当我尝试将依赖项添加到 POM 时出现此错误。

```
Java compiler level does not match the version of the installed Java project facet. 
```

这是什么意思？我该如何解决这个错误？

我也有这个警告：

```
Build path specifies execution environment J2SE-1.5\. There are no JREs installed in the workspace that are strictly compatible with this environment. 
```

我的POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.integrate</groupId>
  <artifactId>integrate</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>integrate</name>
  <dependencyManagement>
    <dependencies>
    </dependencies>
  </dependencyManagement>
  <properties>
  <spring.version>3.1.0.RELEASE</spring.version>
 </properties>

 <dependencies>

  <!-- Spring 3 dependencies -->
  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-core</artifactId>
   <version>${spring.version}</version>
  </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-context</artifactId>
   <version>${spring.version}</version>
  </dependency> 

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-web</artifactId>
   <version>${spring.version}</version>
  </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-tx</artifactId>
   <version>${spring.version}</version>
  </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-orm</artifactId>
   <version>${spring.version}</version>
  </dependency>

  <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
        </dependency>

  <!-- JSF dependencies -->
  <dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.1.6</version>
  </dependency>

  <dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>2.1.6</version>
  </dependency>

  <dependency>
   <groupId>javax.servlet</groupId>
   <artifactId>jstl</artifactId>
   <version>1.2</version>
  </dependency>

  <!-- Hibernate dependencies -->
  <dependency>
   <groupId>org.hibernate</groupId>
   <artifactId>hibernate-core</artifactId>
   <version>4.1.4.Final</version>
  </dependency>

  <dependency>
   <groupId>javassist</groupId>
   <artifactId>javassist</artifactId>
   <version>3.12.1.GA</version>
  </dependency>

  <!-- oracle Connector dependency -->
  <dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc6</artifactId>
    <version>11.2.0.3</version>
</dependency>
<!-- c3p0 dependency -->
      <dependency>
       <groupId>c3p0</groupId>
       <artifactId>c3p0</artifactId>
       <version>0.9.1.2</version>
  </dependency>  

 </dependencies> 
```

图片： ![在此处输入图像描述](../Images/566a5a7504414b1e2613507f637a2dad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:30:34.253

只需将带有**maven-compiler-plugin的****构建**部分添加到您的 pom.xml 中。

 **```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

然后你应该配置项目的构建路径。

或者您可以从 Eclipse 工作区中删除项目（不从文件系统中删除），从项目中删除 Eclipse 的设置（.project、.classpath 和 .settings 文件和文件夹），然后将您的项目作为现有的 Maven 项目重新导入到您的IDE。Eclipse 将正确地重新生成其设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:29:28.833

请检查与您的项目有关的项目方面（**右键单击项目/Properties/Project Facets/Java**）。

只是您在系统中安装的 java 版本与您在项目的项目方面中指定的 java 版本可能不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:48:15.980

在 D:\maven-2.2.1\conf toolchains.xml 中指定 Maven 的 java 版本

```
<?xml version="1.0" encoding="UTF-8"?>
<toolchains>
<toolchain>
    <type>jdk</type>
    <provides>
        <version>1.5</version> <!--This should be same as is configured via the toolchains plugin -->
        <vendor>ibm</vendor> <!--This should be same as is configured via the toolchains plugin -->
    </provides>
    <configuration>
        <jdkHome>C:\Program Files\Java\jdk1.5.0</jdkHome>
    </configuration>
</toolchain>
</toolchains> 
```**

# zend-framework - 变量域的 Zend Framework 通配符子域路由

> ID：11291733
> 
> 赞同：0
> 
> 时间：2012-07-02T10:19:22.087
> 
> 标签：zend-framework, routing, dns, wildcard

我正忙于用 Zend Framework 开发一个引擎，它使它能够运行我的几个网站（所有相同的类型）。

现在我为这些网站使用通配符子域，我的问题是我不知道如何在 application.ini 中编写路由，并将“头”域作为变量。

我需要路由：域 1：*.site1.com 域 2：*.site2.com（等）

我想拥有什么

```
routes.subdomain.type = "Zend_Controller_Router_Route_Hostname"
routes.subdomain.route = ":subdomain.:domain"
routes.subdomain.defaults.module = "default"
routes.subdomain.chains.index.type = "Zend_Controller_Router_Route"
routes.subdomain.chains.index.route = ":controller/:action/"
routes.subdomain.chains.index.defaults.controller = "data"
routes.subdomain.chains.index.defaults.action = "index" 
```

提前致谢！

缺口

# java - 将类对象转换为人类可读的字符串

> ID：11291734
> 
> 赞同：8
> 
> 时间：2012-07-02T10:19:24.237
> 
> 标签：java, string

有什么方法可以**自动**将自定义类对象转换为人类可读的字符串？

例如考虑以下课程：

```
class Person {
    String Name;
    int Salary;
    ...
}

Person p = new Person();
p.setName("Tony");
p.setSalary(1000); 
```

我需要得到类似的东西：

```
Person: Name="Tony", Salary=1000 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T10:40:27.253

导入[Commons Lang](http://commons.apache.org/lang/)你可以使用[ToStringBuilder](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html)

检查方法`reflectionToString(java.lang.Object)`，这将自动创建您期望的表示。

这段代码：

```
Person p = new Person();
p.setName("Tony");
p.setSalary(1000);

System.out.println(ToStringBuilder.reflectionToString(p)); 
```

结果这个字符串：

```
Person@64578ceb[Name=Tony,Salary=1000] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T10:21:58.337

这基本上`toString`是为了什么。但是如果您希望自动完成此操作，您可以创建一些可以执行此操作的通用服务。使用反射迭代所有字段，然后打印每个字段的名称和值。打印它们的值的最简单方法是使用它们`toString`，但您也可以在某些情况下递归地将它们传递给该打印服务（当然，您必须找到停止条件）。

例如，在某些类 PrintUtils 上有：

```
public static void printFields(Object o) {
    System.out.print(o.getClass.getSimpleName() + ": ");
    for (Field field : o.getClass().getDeclaredFields()) {
        field.setAccessible(true);     // you also get non-public fields
        System.out.print(field.getName() + " = " + field.get(o) + ", ");
    }
} 
```

当然，您必须处理异常等，并可能更好地格式化输出。此外，这仅打印当前类中声明的字段。如果您希望在继承层次结构中声明更高的字段，则必须多做一些工作。最后，使用反射比使用普通的`toString`. 如果`toString`可以使用，则最好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T10:21:08.183

确保您可以覆盖`toString`类的方法。

如下：

```
class Person {
    String name;
    int salary;
    ...
    @Override public String toString() {
      return "Person: Name='" + name + "', Salary=" + salary;
    }
} 
```

有关更多详细信息，请参阅[https://blogs.oracle.com/CoreJavaTechTips/entry/writing_tostring_methods_tech_days](https://blogs.oracle.com/CoreJavaTechTips/entry/writing_tostring_methods_tech_days)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T10:40:50.943

我认为您可以使用[属于](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/builder/ToStringBuilder.html)[`commons-lang`](http://commons.apache.org/lang/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:40:34.357

一种方法是依赖 Apache Commons [BeanUtils.describe](http://commons.apache.org/beanutils/api/index.html)。这将产生一个`Map`bean 的属性，通过`Map.toString`. 如果您想要更自定义的东西，则需要深入研究反射 API。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-16T07:33:29.650

您可以使用来自 java 的消息格式： [https](https://docs.oracle.com/javase/tutorial/i18n//message.html) : //docs.oracle.com/javase/tutorial/i18n//message.html 单独的变量 - 你有一个人类可读的类字符串！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-02T10:34:20.413

```
class Person {
    String Name;
    int Salary;
    ...

   @Override
   public String toString() {
     return "Person: Name = " + Name + "," +
             "Salary="+Salary;
   }
}

Person p = new Person();
p.setName("Tony");
p.setSalary(1000);
System.out.println(p.toString()); 
```

# android - 如何缓存片段视图

> ID：11291739
> 
> 赞同：24
> 
> 时间：2012-07-02T10:19:50.387
> 
> 标签：android, caching, view, fragment

我想缓存一个片段视图。我的活动有可滑动的选项卡，每个选项卡调用不同的片段。但是，当我在选项卡之间滑动时，由于片段视图的破坏，过渡似乎很慢，这是在滑动操作期间重建的。有谁知道如何缓存每个片段的视图以防止此问题？我使用库支持 v4 和 api 14

我尝试为片段实现一个构造函数，由片段的活动容器调用：我调用构造函数，片段被创建为活动类的变量，然后，每当片段必须显示自己时，活动类返回我之前创建的片段对象，但这并没有大大改善我的应用程序，因为片段的视图无论如何都会被破坏

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-07T15:18:04.857

这是因为默认情况下，寻呼机在内部最多加载 3 个页面（片段）：显示的页面，上一个和下一个，因此如果您有 5 个片段，这将在您从第一个到最后一个移动时发生：（其中 x 是加载片段）

xx000 -> xxx00 -> 0xxx0 -> 00xxx -> 000xx

尝试使用

```
myPager.setOffscreenPageLimit(ITEMS_COUNT-1); 
```

这将告诉寻呼机将它们全部保存在内存中，而不是在每次滑动时破坏/创建（密切关注内存管理）

# php - PHP 套接字服务器

> ID：11291744
> 
> 赞同：2
> 
> 时间：2012-07-02T10:20:04.437
> 
> 标签：php, sockets, websocket

我对套接字编程很陌生，但是用 php 做了大量的编码。我已经测试了一些套接字服务器示例代码，并且在 localhost 上运行良好。我使用 CLI 来运行服务器。但我担心的是如何在托管服务器上运行套接字服务器 .php 文件？托管服务提供商通常会授予 CLI 访问权限以运行服务器吗？如何确保我的服务器始终在运行？如果托管服务器重新启动，我的服务器会发生什么情况？万一我的服务器崩溃（无论什么原因），我必须手动运行它吗？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:25:25.347

如果您谈论的是托管服务器，我希望您谈论的是共享托管。在这种情况下，即使您设法运行服务等，也很难保持稳定。我建议至少使用 VPS。这样您就可以在后台运行它，在重新启动时自动启动它，还可以安装软件来检查进程并在失败时重新启动它。

例如：在共享主机上无法测试重启启动是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:29:38.390

我不知道您的提供商是否给您 ssh 访问权限。一些提供商会这样做，但这是托管服务器或根服务器。

然后您可以通过 CLI 运行您的脚本。

当您可以通过 CLI 运行服务器并且拥有足够的权限时，您可以将脚本插入到运行级别。还有一种叫做“ [shebang](http://www.electrictoolbox.com/php-shebang/) ”的东西。有了这个，你可以让你的脚本直接使用 php 解释器并在没有 php 命令之前运行脚本。

```
php test.php or /usr/bin/php testScript.php 
```

您可以使用 test.php 直接运行脚本或仅将脚本命名为**testScript**。

当您将脚本放入**/usr/local/bin**（对于 debian）时，您可以每次通过命令（如**php ）运行它**命令一样每次通过命令运行它。

**编辑：**我忘记了一些东西。例如，对于此解决方案，您必须将 /etc/init.d/skeleton 复制**到**/etc/init.d/runPHPSocketServer**并**更改顶部的脚本值。然后您可以将其插入运行级别。

```
#: testScript or runPHPSocketServer start 
```

当脚本位于可执行目录下时，您可以将其插入系统运行级别。

```
#: update-rc.d runPHPSocketServer defaults 
```

所以你看到有一些解决方案，但对于大多数解决方案，你需要 ssh 访问。

# zend-framework - 什么时候初始化动作助手？

> ID：11291746
> 
> 赞同：0
> 
> 时间：2012-07-02T10:20:09.077
> 
> 标签：zend-framework

我了解动作助手的作用，但我不知道它们何时被初始化（每个创建的实例）。如果我没记错的话，控制器的 _helper 属性包含每个助手类的实例集合。

我对吗？如果是，是否在应用程序的引导程序（在每个 http 请求上）初始化了所有帮助器操作（类对应于帮助器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:13:49.550

如果您查看[ZF 手册的这一部分](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelper.broker)，您会发现更多关于动作助手如何工作的信息。

该`_helper`属性不**包含**帮助程序实例的集合，但包含“Zend_Controller_Action_HelperBroker”的一个实例，其中：-

> 处理注册助手对象和助手路径的细节，以及按需检索助手。

助手不在引导程序中实例化，但是当您在控制器中使用类似的东西时，将在控制器中按需实例化`$helper = $this->_helper->getHelper('helperName');`。

# javascript - 如何使 dijit 树文件夹可选择？

> ID：11291752
> 
> 赞同：1
> 
> 时间：2012-07-02T10:20:22.333
> 
> 标签：javascript, treeview, dojo, dijit.tree

我有一棵树，我希望仅在用户单击 +/- 图标时才调用 onOpen 和 onClose，而不是在他单击包含文件夹的行上的任何位置时调用。然后我希望在用户单击文件夹所在的行时触发 onClick 事件（展开/折叠图标除外）。我尝试查看默认传递给 onopen 的节点，也尝试查看 onclick 发送的节点。似乎 onopen ovverides onclick 在内部。请给我一个解决这个问题的方向。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:51:14.583

看起来有一个标志可以传递给 Tree 来执行此操作：

```
// openOnClick: Boolean
// If true, clicking a folder node's label will open it, rather than calling onClick()
openOnClick: false, 
```

你会像这样使用它：

```
var myTree = new Tree({
    ..., //the other arguments you are already using
    openOnClick: true
}); 
```

* * *

将来，我建议您检查 API 文档或您正在使用的小部件的源代码。您会发现您经常会偶然发现类似这样的有用功能，并且 Dojo 源代码组织良好且易于阅读，因此当您对某些东西的工作方式有疑问时，它是检查的好地方。

# java - SingleColumnValueFilter 对结果没有影响

> ID：11291756
> 
> 赞同：1
> 
> 时间：2012-07-02T10:20:30.607
> 
> 标签：java, hbase

嘿，

[这个问题与SingleColumnValueFilter not return proper number of rows](https://stackoverflow.com/questions/10935901/singlecolumnvaluefilter-not-returning-proper-number-of-rows)非常相似。

我使用四个带有运算符 EQUAL 的 SingleColumnValueFilter，并将它们添加到具有运算符 MUST_PASS_ONE 的 FilterList 中。结果的数量与不设置过滤器列表相同。要比较的值是一个应该正确的 byte[]，因为我只是存储了以前结果中的值。（这是一个 IP 地址，我在检索数据时转换为 InetAddress，new InetAddress(value as byte[])，对于所描述的查询，我只调用 InetAddress.getAddress，它返回一个 byte[]）

你有什么想法可能是什么问题？我是否使用错误的过滤器？

编辑：

我还将查询检索到的原始值用作 SingleColumnValueFilter 的值，结果没有差异，因此 byte[] 内容不会是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:05:47.720

我想我可以自己给出答案，抱歉之前没有调试和检查所有的hbase代码。

我刚刚检查了比较算法的实现（按字典顺序），因此我意识到长度没有被考虑在内，尽管我认为它会被零填充；不幸的是，事实并非如此。

唯一合理的选择是创建一个自定义比较器（例如，请参阅[如何在 HBase 上将自定义比较器与 SingleColumnValueFilter 一起使用？](https://stackoverflow.com/questions/3577142/how-do-you-use-a-custom-comparator-with-singlecolumnvaluefilter-on-hbase)）

# javascript - 如何在 youtube 视频前显示元素？

> ID：11291758
> 
> 赞同：2
> 
> 时间：2012-07-02T10:20:41.417
> 
> 标签：javascript, jquery, youtube, youtube-api

我有这个 youtube 视频，里面有一个我想出现在它前面的链接。

```
<embed id="myVideo" src="http://www.youtube.com/v/f4K6ZxDwi34?version=3&enablejsapi=1" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="640" height="390">

<a id="over" href="javascript:document.getElementById('myVideo').stopVideo();">Stop</a> 
```

我试过插入`wmode=opaque`or `wmode=transparent`。依然没有。有人请帮助我。

这是我的 jsfiddle 示例。[http://jsfiddle.net/uprosoft/Av9bp/](http://jsfiddle.net/uprosoft/Av9bp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:25:40.153

您可以使用绝对定位。检查[这个更新的小提琴](http://jsfiddle.net/Av9bp/1/)：

绝对定位的项目将自动位于静态定位的项目之上。您可以使用左和右 css 属性将元素相对于最近的父元素定位，并将位置设置为相对或绝对，如果没有找到相对/绝对父元素，则可以使用主体。

# scala - 在增量编译方面，Scala 中的通配符导入是否不好？

> ID：11291772
> 
> 赞同：16
> 
> 时间：2012-07-02T10:21:33.080
> 
> 标签：scala, import, wildcard, incremental-compiler

在 Scala 中，从增量编译器（Eclipse 中的 sbt、sbt、IntelliJ）的效率和速度的角度来看，使用通配符导入是不是很糟糕？它是否会对这些增量编译器决定在发生更改时重新编译的方式产生不利影响？

例如，如果对于一个新的 class `X`，我只需要从 package导入 classes`A`和`B`（而不是） ，我会因为写这个而受到惩罚：`C``pack`

```
import pack._ 
```

而不是这个？

```
import pack.{ A, B } 
```

假设`A`并且`B`不依赖于`C`, 将`X`使用通配符导入重新编译，而不是在`C`更改时使用更具体的导入重新编译，或者依赖跟踪系统是否足够智能以实现尽管通配符导入`C`不使用它？`X`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T15:53:54.947

有一个微小的影响，但你可能不会注意到它。其影响是，当引用符号“Foo”时，编译器必须将“Foo”解析为完全限定名称。它可以查找“Foo”的范围受通配符导入的影响。但这一切都是在内存中完成的，除非你在一个包中有数千个类这样疯狂的东西，否则你几乎肯定不会注意到分辨率速度的如此微小差异。

除此之外，没有影响。如果您导入 pack._ 和 pack._ 中的一些任意类，您不依赖更改，那么您的文件将不必重新编译。

# html - 通过 bash 从 html 中提取信息

> ID：11291779
> 
> 赞同：0
> 
> 时间：2012-07-02T10:21:42.430
> 
> 标签：html, linux, bash, parsing, awk

我正在尝试编写一个可以从大型 html 文件中提取信息的 bashscript。我需要这个来每天早上自动下载最新的报纸:)。要下载最新的报纸，我必须知道它的 ID。为了得到它，我必须解析指向它的链接。我设法提取了这条线，它用 awk 保存了 id

```
awk '/show.php\?id=/' index.html 
```

并得到

```
<a href="show.php?id=914826">Latest Newspaper</a> 
```

所以我需要的是“914826”。这就是我卡住的地方......我不认为我可以使用 awk 来提取不是整行，而是一个片段。

期待您的回答。在此先感谢，西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:25:23.990

使用`grep`：

```
grep -o 'id=[0-9]*' 
```

例子：

```
$ echo '<a href="show.php?id=914826">Latest Newspaper</a>' | grep -o 'id=[0-9]*'
id=914826 
```

你可以用 perl 或 sed 做同样的事情：

```
$ echo '<a href="show.php?id=914826">Latest Newspaper</a>' | perl -pe 's/.*id=([0-9]*).*/$1/'
914826 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:58:58.853

这个完整`awk`的命令应该可以工作。对于匹配正则表达式的行，拆分为`=`和`"`。在您的示例行中像这样拆分：

*   第一个字段是：`<a href=`
*   第二个字段：[空白]
*   第三场：`show.php?id`
*   第四个字段：`914826`
*   第五场：`>Latest Newspaper</a>`

所以打印第四个（`arr[4]`）：

```
awk '
    /show.php\?id=/ { 
        split( $0, arr, /[="]/ ); 
        print arr[4] 
    }
' index.html 
```

# c++ - 为什么继承顺序或映射会影响 vftable 的下标？（对于 C++ 的 VSC）

> ID：11291780
> 
> 赞同：2
> 
> 时间：2012-07-02T10:21:43.340
> 
> 标签：c++, visual-studio-2010, polymorphism

在玩一点多态性时，我尝试执行以下操作：

```
class a { virtual void method() { } };
class b { virtual void method() { } };
class c : public a, b {
    virtual void method() { }
    virtual void anotherMethod() { } // (1)
};
class d : public c, a, b // (2)
{ virtual void method() { } }; // C2369 
```

据我所知，这应该没有任何问题。但是编译器告诉我： `error C2369: 'const d::'vftable'{for 'a'}' : redefinition; different subscripts` 我不知道为什么会这样。有三种方法可以解决该错误：可以删除方法或更改 `(1)`继承顺序。**编辑：**并且应用虚拟继承也可以解决它。因此，似乎继承顺序或映射会影响. 这是一个用于虚拟成员函数映射的数组 - 又名。C++中的动态绑定。`(2)`**`vftable``vftable`**

 **因此，我还查看了[针对 C2369 的 microsoft 文档](http://msdn.microsoft.com/en-us/library/c5datzk5%28v=vs.80%29.aspx)，他们将其作为示例显示，如何重现该错误：

```
int a[10];
int a[20];   // C2369
int b[20];   // OK 
```

换句话说，改变继承顺序会改变这个表的下标？！有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:45:43.463

默认情况下，类是私有继承的（与结构相反）！因此“c”只能从“a”公开继承！您在那里缺少另一个公共关键字：

```
class c : public a, public b 
```

您面临的另一个问题是您从定义相同成员函数的 2 个类继承。a::method 没有映射到与 b::method 相同的地址！您的下一个问题可能是，对“方法”的调用是模棱两可的......**

# python - Graph_tool 的 find_vertex() 引发异常

> ID：11291783
> 
> 赞同：0
> 
> 时间：2012-07-02T10:21:48.073
> 
> 标签：python

我生成了一个图，其中一个句子的单词作为标记，依赖关系作为边。

此信息来自外部工具，格式为 ((word, index), (word, index), relation) 元组。每个单词可以有许多依赖项，我只希望每个单词有一个节点。

当我处理每个依赖项时，我想通过它们的 ID 来搜索它，但是当我尝试使用 find_vertex() 时，我得到了下一个异常：

```
TypeError: No registered converter was able to extract a C++ reference to type graph_tool::GraphInterface from this Python object of type Graph 
```

这是代码：

```
def graph(self, sentence, sentenceNamespace="sentence", separator="_"):
    graph = Graph()
    root_node = graph.add_vertex()
    # Create a link to Root Node
    graph.graph_properties['root'] = graph.new_graph_property("python::object", root_node)
    # Create Node's properties
    graph.vertex_properties['id'] = graph.new_vertex_property("string")
    graph.vertex_properties['form'] = graph.new_vertex_property("string")
    graph.vertex_properties['ord'] = graph.new_vertex_property("int64_t")
    # Create edge's properties
    graph.edge_properties['type'] = graph.new_edge_property("string")
    # Create the root node
    graph.vertex_properties['form'][root_node] = "S"
    graph.vertex_properties['ord'][root_node] = -1
    # Find or create the dependant and governor nodes and link with a new edge
    for dependency in self.dependency(sentence):
        dependency_governor = dependency[0]
        # Governor's generated ID
        governor_name = "{1}{0}{2[0]}{0}{1[1]}".format(separator, sentenceNamespace,dependency_governor )
        dependency_dependant = dependency[1]
        # Dependant's generated ID
        dependant_name = "{1}{0}{2[0]}{0}{1[1]}".format(separator, sentenceNamespace, dependency_dependant)
        # Relation Type
        relation = dependency[2]

# This is the problematic Line ################################################

        governor = find_vertex(graph, graph.vertex_properties['id'], governor_name)

##############################################################
        # If search is successful use the first node else create a new one
        if governor :
            governor = governor[0]
        else:
            governor = graph.add_vertex()
            graph.vertex_properties['id'][governor] = governor_name
            graph.vertex_properties['form'][governor] = dependency_governor[0]
            graph.vertex_properties['ord'][governor] = dependency_governor[1]

        dependant = find_vertex(graph, 'id', dependant_name)
        # If search is successful use the first node else create a new one
        if dependant :
            dependant = dependant[0]
        else:
            dependant = graph.add_vertex()
            graph.vertex_properties['id'][dependant] = dependant_name
            graph.vertex_properties['form'][dependant] = dependant_dependant[0]
            graph.vertex_properties['ord'][dependant] = dependency_dependant[1]
        # Link the nodes with the new dependency relation
        dependency_edge = graph.add_edge(governor, dependant)
        graph.edge_properties['type'][dependency_edge]= relation
    return graph 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:48:33.807

此错误已在 git 版本中修复。

# java - 检查文件是否存在而不创建它

> ID：11291785
> 
> 赞同：26
> 
> 时间：2012-07-02T10:21:54.307
> 
> 标签：java, file-io

如果我这样做：

```
File f = new File("c:\\text.txt");

if (f.exists()) {
    System.out.println("File exists");
} else {
    System.out.println("File not found!");
} 
```

然后文件被创建并始终返回“文件存在”。是否可以在不创建文件的情况下检查文件是否存在？

**编辑：**

我忘了提到它在一个 for 循环中。所以这是真实的：

```
for (int i = 0; i < 10; i++) {
    File file = new File("c:\\text" + i + ".txt");
    System.out.println("New file created: " + file.getPath());
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-02T10:24:14.050

当您实例化 a`File`时，您不会在磁盘上创建任何东西，而只是构建一个可以调用某些方法的对象，例如`exists()`.

这既好又便宜，不要试图避免这种实例化。

该`File`实例只有两个字段：

```
private String path;
private transient int prefixLength; 
```

这是构造函数：

```
public File(String pathname) {
    if (pathname == null) {
        throw new NullPointerException();
    }
    this.path = fs.normalize(pathname);
    this.prefixLength = fs.prefixLength(this.path);
} 
```

如您所见，`File`实例只是路径的封装。创建它以便调用`exists()`是正确的方法。不要试图优化它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-02T12:24:01.630

从**Java 7**开始，您可以使用[**`java.nio.file.Files.exists`**](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#exists-java.nio.file.Path-java.nio.file.LinkOption...-)：

```
Path p = Paths.get("C:\\Users\\first.last");
boolean exists = Files.exists(p);
boolean notExists = Files.notExists(p);

if (exists) {
    System.out.println("File exists!");
} else if (notExists) {
    System.out.println("File doesn't exist!");
} else {
    System.out.println("File's status is unknown!");
} 
```

在[Oracle 教程](https://docs.oracle.com/javase/tutorial/essential/io/check.html)中，您可以找到有关此的一些详细信息：

> 类中的方法`Path`是语法的，这意味着它们对`Path`实例进行操作。但最终您必须访问文件系统以验证特定的`Path`存在或不存在。`exists(Path, LinkOption...)`您可以使用和方法来做到这一点`notExists(Path, LinkOption...)`。请注意，`!Files.exists(path)`不等价于`Files.notExists(path)`. 当您测试文件的存在时，可能会出现三种结果：
> 
> *   该文件已验证存在。
> *   该文件经验证不存在。
> *   文件状态未知。当程序无权访问该文件时，可能会出现此结果。
> 
> 如果两者都`exists`返回`notExists`，`false`则无法验证文件的存在。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-02T10:23:56.050

创建`File`实例不会在文件系统上创建文件，因此发布的代码将满足您的要求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-27T13:42:59.623

Files.exists 方法在 JDK 8 中的性能明显较差，并且在用于检查实际不存在的文件时会显着降低应用程序的速度。

这也适用于 Files.noExists、Files.isDirectory 和 Files.isRegularFile

据此，您可以使用以下内容：

```
Paths.get("file_path").toFile().exists() 
```

# mysql - 在外连接和 group_concat 上使用索引

> ID：11291788
> 
> 赞同：0
> 
> 时间：2012-07-02T10:22:04.850
> 
> 标签：mysql, sql

我对 mysql 优化和索引很陌生，但在我的新项目中，我会尝试更多地使用索引并获得更好的理解。

但是现在我在连接和 group_concat 和索引方面遇到了困难，我无法让它正常工作我已经在 tags.item_id 和 items.id 上设置了索引有主索引。

我可以从我的解释查询中看到它没有使用任何索引来进行此查询。

```
EXPLAIN
SELECT i.id, i.title, i.content, GROUP_CONCAT(DISTINCT t.name SEPARATOR ",") as tags 
FROM items as i 
LEFT OUTER JOIN tags as t ON t.item_id = i.id 
WHERE i.id = 103 GROUP BY i.id 
```

结果：

```
1   SIMPLE  i   const   PRIMARY PRIMARY 4   const   1   
1   SIMPLE  t   ref item_id item_id 5   const   4 
```

希望有人可以帮助我并解释我做错了什么以及我应该如何做才能获得使用索引的正确查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:36:17.913

You cannot create an index on a function in MySql. A solution would be storing the tags in another column of your table and index it. Also index t.item_id ! for more explains go [here](http://hackmysql.com/case4)

# php - 单击“home”-logo 会返回 404 错误页面

> ID：11291792
> 
> 赞同：0
> 
> 时间：2012-07-02T10:22:28.077
> 
> 标签：php, wordpress, html, css

在我的新网站中，我有一个徽标，单击该徽标应将访问者返回到主页。但相反，它返回 404 错误页面。header.php 中的代码是这样的：

```
 <div id="branding">
    <a href="<?php echo home_url( '/' ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home"><img src="<?php bloginfo('template_directory'); ?>/images/brandlogo.svg" alt="Luchtspin"></a>
    </div> 
```

为什么会这样？在 footer.php 中，我使用完全相同的链接，并且没有遇到任何问题：

```
 <a href="<?php echo home_url( '/' ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home">all content &copy; <?php echo date("Y"); ?> <?php bloginfo( 'name' ); ?></a> 
```

*   背景信息：使用的原始主题是 Rostar (http://wpdemo.dannci.com/preview/customfields?wptheme=Rostar)。我重新设计了它，使其可翻译，并最终将它与 Boilerplate/Starkers 主题 (http://wordpress.org/extend/themes/boilerplate) 结合在一起。冒险，我知道。特别是因为我是 PHP 新手。

*   附加信息：wordpress 站点位于子目录中。我按照此处指示的步骤进行了正确设置：codex.wordpress.org/Giving_WordPress_Its_Own_Directory。

网站链接：[http ://www.luchtspin.nl](http://www.luchtspin.nl)

我同时注意到一些奇怪的事情：h1 'Luchtspin'（在徽标旁边）就像一个链接，虽然它不再是一个链接（它以前是一个可点击的 div）。它返回相同的 404 页面。我安装了几个缓存插件，但很久以前都停用了。

非常感谢任何帮助，我已经在这几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:37:04.470

问题似乎出在您在 script.js 第 18 行使用的选择器上。您正在选择具有未定义 .href 属性的 div#branding。将选择器更改为类似`#branding a`应该可以解决错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:29:07.387

其中一个 JavaScript 正在发挥作用。它会在您的 URL 后面附加“未定义”一词。您使用的是否有任何 JavaScript 可能会更改 URL？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:37:47.727

KahWee Teng 是对的，请检查您的 javascript（可能是负责 thebrandlogo.svg spin 的那个）。它试图覆盖你的 url，但是，因为它没有价值，它只是打印出“未定义”。

底部有效，因为它是一个普通的链接。

# abap - 当 BELNR 值相同时，报告仅从第一行获取信息

> ID：11291795
> 
> 赞同：0
> 
> 时间：2012-07-02T10:22:44.817
> 
> 标签：abap, sap-erp

我有一份报告正在从 bsis、bsas、bsid、bsad、vbrk、bkpf 和 bset 获取信息。问题是当有两张相同编号的发票时，报告会将信息从第一行复制到第二行。因此，如果第 4100111596 号发票在第一行中的总税额为 2.140,20，则相同的发票号在第二行中具有相同的税额，但值为 40.140,64。我能做些什么？我必须在哪里使用buzei字段吗？继承人代码：

```
SELECT SINGLE kbetr fwste hwste
        FROM bset
        INTO (<fs_main>-kbetr, <fs_main>-fwste, <fs_main>-hwste)
        WHERE belnr = <fs_main>-belnr
        AND bukrs IN bukrs
        AND gjahr IN gjahr. 
```

我试着得到 buzei ，它仍然给了我两次相同的线路。这是我在上面的代码之前所做的代码：

```
SELECT c~kunnr a~belnr d~spart c~bldat c~waers c~wrbtr a~hwaer c~dmbtr c~buzei
      INTO CORRESPONDING FIELDS OF TABLE lt_data
        FROM ( ( ( bsis AS f
      INNER JOIN bkpf AS a ON f~belnr = a~belnr )
      INNER JOIN bsid AS c ON c~belnr = a~belnr )
      INNER JOIN vbrk AS d ON d~vbeln = c~belnr )
      WHERE a~gjahr IN gjahr
        AND a~bukrs IN bukrs
        AND a~blart = 'R1'
        AND f~hkont = '0034930020'
        AND ( c~mwskz = 'L0' OR c~mwskz = 'L1' OR c~mwskz = 'L2' ). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:26:48.693

- 您必须在“SELECT”的条件部分使用所有关键字段才能获得“SINGLE”行。否则 table 可能不会返回一行，但你会得到第一行。

- 所以你必须在你选择的条件下使用 BUZEI 字段。

希望对您有所帮助

塔尔哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:35:54.220

发现了问题。我在错误的表中选择错误的字段。BKPF 只给了我一行，而 BSET 给了我两行。所以，我更改了从中获取字段的表，它工作得很好。谢谢你。

# iphone - 自动释放对象两次

> ID：11291801
> 
> 赞同：7
> 
> 时间：2012-07-02T10:23:02.993
> 
> 标签：iphone, ipad, autorelease, nsautoreleasepool

```
NSString *str = [[[[NSString alloc]init]autorelease]autorelease];
str = @"hii";
NSLog(@"%@",str); 
```

谁能帮我介绍一下这段代码。自动释放对象两次会发生什么。当我运行代码时，我没有得到任何僵尸。为什么会这样。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T10:31:37.173

当自动释放池被销毁时，对象会被释放两次，这可能是在运行循环迭代结束时。为什么它不会崩溃，它会`NSString`为某些实例返回单例，例如您创建的空字符串或字符串文字（您不应该**依赖**它，这正是当前发生的事情！），这些对象不会被释放，这这就是为什么你没有得到僵尸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T10:31:22.640

首先没有理由调用 autorelease 两次。

~~一旦一个对象被标记为自动释放，再次调用它的自动释放将被忽略。~~请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsautoreleasepool_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsautoreleasepool_Class/Reference/Reference.html)

但是在您发布的示例中，您正在创建一个空字符串：

```
NSString *str = [[[[NSString alloc]init]autorelease]autorelease]; 
```

然后为它分配另一个字符串：

```
str = @"hii"; 
```

这意味着您分配的第一个字符串将被泄漏，您确实自动释放它，因此它会在最后被清理。但是没有理由将字符串分配在第一个位置。

你可以这样做：

```
NSString *str =@"hii";
NSLog(@"%@",str); 
```

# jquery - jQuery UI Datapicker 和来自 DB (asp.net) 的日期

> ID：11291804
> 
> 赞同：0
> 
> 时间：2012-07-02T10:23:09.697
> 
> 标签：jquery, asp.net, jquery-ui

有没有办法从 DB 加载日期并将其粘贴到 datepicker 中，以便 DB 中的日期在 datepicker 中的该日期具有不同的类（颜色），或者是否有其他日历可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:51:41.110

下面的脚本从数据库中读取日期值并将它们作为数组传递给日历`[<%=sBlockedDates%>]`

实际数组示例

```
var holiDays = [[2012,25, 12, 'Christmas'],[2012,7, 7, 'WEEKEND Event'],[2012,7, 13, 'Some Holiday'],[2012,7, 14, 'Festival']]; 
```

**UI 日历脚本**

除了下面的这个脚本之外，禁用以前的日期和大于 +90 天的日期，还阻止作为数组传递的日期。您可以根据自己的逻辑更改脚本。

```
function BindEvents()
{
//Script for Calendar
        var holiDays = [<%=sBlockedDates%>];
        $(function () {
            $("#<%=txtBookingDate.ClientID %>").datepicker({
                dateFormat: "yy-mm-dd",
                minDate: "-0d",
                maxDate: "+90d",
                firstDay: 0,
                beforeShowDay: noWeekendsOrHolidaysOrBlockedDates
            });

            function noWeekendsOrHolidaysOrBlockedDates(date) {
                //var noWeekend = jQuery.datepicker.noWeekends(date);
                return setHoliDays(date);
            }

            // set holidays function which is configured in beforeShowDay
            function setHoliDays(date) {
                var day = date.getDay();
                if (day == 5 || day ==6) return [false, 'CalWeekEnd', ];

                for (i = 0; i < holiDays.length; i++) {
                    if (date.getFullYear() == holiDays[i][0]
                        && date.getMonth() == holiDays[i][1] - 1
                        && date.getDate() == holiDays[i][2]) {
                        return [false, 'holiday', holiDays[i][3]];
                    }
                }
                return [true, ''];
            }
        });
}

BindEvents(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:37:18.897

You can do this in a way like : fetch dates from database and store them in an array and after that using the below function to highlight them using your special css. May be its helpful for you.

$(function() {

```
 //Dates are Year, months-1 (Jan is 0,...,Dec is 11), day
    var dates = [new Date(2011, 10, 15), new Date(2011, 10, 10)];
    function highlightDays(date) {
        for (var i = 0; i < dates.length; i++) {
            if (
            (dates[i].getDate() == date.getDate()) && 
            (dates[i].getMonth() == date.getMonth()) && 
            (dates[i].getFullYear() == date.getFullYear())
            ) {
                return [true,'highlight','Highlighted day'];
            }
        }
        return [true, '','All other dates'];
    }
    function pickUpDate(dateText, inst) {
        var theURL = "#"+dateText;
        //window.location = theURL; //this for opening in the same window
        window.open(theURL); //this for opening in the new window
    }
    $( "#datepicker" ).datepicker({
        beforeShowDay: highlightDays,
        onSelect: pickUpDate
    });
}); 
```

# c#-4.0 - 温莎城堡工厂实施

> ID：11291813
> 
> 赞同：1
> 
> 时间：2012-07-02T10:23:52.730
> 
> 标签：c#-4.0, dependency-injection, inversion-of-control, castle-windsor, ioc-container

我正在使用由 Windsor Castle DI 容器提供的 Typed Factory。我对 DI 容器很陌生，所以在对我的解决方案进行了一些指导之后。

这是我的实现：

*更新注册和数据库调用

```
public interface IAgent {    }
public class Agent : IAgent     {    }

public interface IAgentFactory     
{
    IAgent Create();
    IAgent Create(int agentId);
    IAgent Create(AgentDTO agentDTO);
}

class AgentFactory : IAgentFactory     
{        
    public IAgent Create()         
    {            
        return InitNewEntity(new Agent());
    }
    public IAgent Create(int agentId, IDBContext dbContext) //Not happy with this, as it's a dependency that isn't factored out :(    
    {
        return dbContext.GetAgent(agentId);
    }
    public IAgent Create(AgentDTO agentDTO)
    {
         Agent agent = InitNewEntity(new Agent());
         agent.ParseDTO(agentDTO);
         return agent;
    }
    private IAgent InitNewEntity(IAgent agent)
    {
         agent.Username = "";        /// + other fields to initialise
         agent.DOB = DateTime.Now;   /// etc.
         return agent;
    } 
```

...

```
Container.AddFacility<TypedFactoryFacility>()
            .Register( Component.For<IAgentFactory>()
                                .ImplementedBy<AgentFactory>()); 
```

我正在使用以下调用来获取一些实体

```
IAgentFactory agentFactory = ViewModel.Container.Resolve<IAgentFactory>();

IAgent agent = agentFactory.Create();  //Creates new Agent entity
agent = agentFactory.Create(66, dbContext); //Looks up entity in database, don't like passing in a db context, another dependency
agent = agentFactory.Create(agentDTO);      //Creates Agent entity from DTO object 
```

我对此有几个担忧。

关于创建新代理有 3 种可能的情况，

1：从头开始创建一个新代理

2：使用现有的 DTO（数据传输对象）创建代理

3：创建一个调用数据库的代理。

我决定将所有这些功能放入工厂，因为它似乎符合要求，但是，我不完全确定这是否是正确或最佳的实现方式。

问题是，是否可以在 DI 容器的 Register 语句中利用所有 3 个 Create 场景并完全省略具体的工厂实现，这样我就不再有 AgentFactory 类，而只有 IAgentFactory 接口。

我对此实现的另一个问题是，是否可以进行调用，这样如果我请求代理实体，Windsor 将首先调用工厂并返回从工厂创建的实体，而不是在没有引用的情况下创建实体工厂。IE。

```
IAgent agent = Container.Resolve<IAgent>(66); 
```

使用调用堆栈：

Container -> AgentFactory -> Create(66) -> 从工厂返回代理。

哪个 Windsor 会拦截并自动使用工厂创建实例。但是，我尝试了这个，它没有使用工厂来创建它，它只是继续创建代理而不引用工厂。

我确实有这个，但它没有调用我定义的工厂方法。

```
Container.AddFacility<TypedFactoryFacility>()
            .Register(Component.For<IAgentFactory>().AsFactory(),
                      Component.For<IAgent>().ImplementedBy<Agent>()); 
```

感谢您的建议，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:58:24.327

类型化工厂旨在创建“行为”实例，而不是“数据”实例。

您没有将“模型”组件注册到容器中，但可以使用模型工作。换句话说，您将除模型之外的所有内容都注册到容器中。

您的 AgentFactory 必须注册到容器中，但这不是“类型化工厂”。您可以将 TF 用于“后期依赖”目的。

我更喜欢与我的设计更加解耦，也更倾向于“单一责任”。AgentFactory 不会在工厂中隐藏存储库（根据您的从数据库创建）：我将通过数据读取器作为创建参数。

# c# - 使用 Response.TransmitFile() 下载文档时出错

> ID：11291818
> 
> 赞同：0
> 
> 时间：2012-07-02T10:24:05.297
> 
> 标签：c#, asp.net

我有一个网页，其中包含允许用户下载文档的链接。如果用户从物理位置（即 C:\filename）下载文档以及作为网站一部分存储的文档（即 ~/Documents/filename），我正在使用的代码有效。

但是当尝试从网络位置下载文件时它不起作用并且发生以下错误：' `Could not find a part of the path`'

这是我的代码：

```
 Response.ContentType = "application/msword";
        Response.AppendHeader("Content-Disposition", "attachment; filename=filename.doc");
        Response.TransmitFile(Server.MapPath(@"\\ad.website.com\public\shared\filename.doc"));
        Response.End(); 
```

我已经研究过这个错误，似乎它可能是由权限或 IIS 设置引起的。是这种情况还是我需要更新代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:27:22.540

您应该`Server.MapPath`从该位置删除..
否则它将尝试仅匹配当前服务器的路径。

# java - 带有 ExecutorService 的 Java 关闭挂钩

> ID：11291819
> 
> 赞同：0
> 
> 时间：2012-07-02T10:24:09.547
> 
> 标签：java, shutdown, executorservice

我在关闭 ExecutorService 已终止的应用程序时遇到问题......有什么好的方法来处理这个问题？

```
public class TradingLock {

    private ExecutorService executorService;
    private List<TradingHaltedListener> listeners=new ArrayList<>();
    public TradingLock(ExecutorService executorService) {
        super();
        this.executorService = executorService;
    }

    public void haltTrading(){
        for (final TradingHaltedListener listener: listeners){
            executorService.execute(new Runnable() {
                @Override
                public void run() {
                    listener.onTradingHalted();
                }
            });
        }
    }
    public synchronized void addTradingHaltedListener(TradingHaltedListener listener){
        this.listeners.add(listener);
    }
} 
```

主类的关闭钩子：

```
Runtime.getRuntime().addShutdownHook(new Thread() {
        public void run() {
            tradingLock.haltTrading();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:38:07.800

我发现如果我创建一个扩展 Thread 的类并在`addShutdownHook`它运行的函数中使用它没有问题。

```
 public class ShutdownHandler extends Thread {
      public void run(){
           // do all the work to clean up before shutting down
      }
 } 
```

然后将其添加到主类中

```
 Runtime.getRuntime().addShutdownHook(new ShutdownHandler()); 
```

**编辑**

在阅读了有关 的更多信息后`ExecutorService`，可能是正在接收 a`shutdown`或`shutdownNow`应用程序开始退出时。当`addShutdownHook`应用程序开始其关闭序列时触发。`ExecutorService`因此，在您的 Shutdown 挂钩启动之前，它可能已关闭。

# c - 使用 system() 函数时混淆控制台和文件输出

> ID：11291820
> 
> 赞同：1
> 
> 时间：2012-07-02T10:24:13.867
> 
> 标签：c, file-io, system

我有以下代码，

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    //freopen("file1","w",stdout);
    char str[]="command line with file";
    char s[]="extra string";
    puts(str);
    puts(s);
    system("PAUSE");    
    return 0;
} 
```

当我在控制台上看到输出时，它显示给我，

```
command line with file
extra string
Press any key to continue . . . 
```

通过删除代码中的注释行，我希望在将输出写入文件时得到相同的输出。但它输出像，

```
Press any key to continue . . . 
command line with file
extra string 
```

为什么文件和控制台输出之间有这种区别？？？这里 system("PAUSE") 函数负责字符串输出`Press any key to continue . . .`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T10:28:30.160

写入终端时，`stdout`是行缓冲的。它立即写入每一行。写入文件时，它是块缓冲的。它在缓冲区中存储几千字节，并在您调用`fflush`、缓冲区已满或程序结束时将它们刷新。暂停消息正在由一个单独的进程写入，该进程在原始进程之前退出，此时它必须刷新其缓冲区（如果有的话）。然后你的原始进程`system()`结束，它到达结束`main()`并退出，刷新包含你的两个测试字符串的缓冲区。

# javascript - 没有地理编码的 Google Maps Marker Clusterer Plus

> ID：11291824
> 
> 赞同：1
> 
> 时间：2012-07-02T10:24:18.007
> 
> 标签：javascript, google-maps, google-maps-api-3, maps, markerclusterer

使用 Casey P Thomas 的解决方案在单个位置处理多个标记：

示例： http: [//maps.caseypthomas.org/ex/MarkerClustererPlus/exCoincidentMarkers_SharedInfowindow_wGeocoding.html](http://maps.caseypthomas.org/ex/MarkerClustererPlus/exCoincidentMarkers_SharedInfowindow_wGeocoding.html)

它工作得很好，并将内容组合到一个信息窗口中，但是似乎对破坏地图的 api 存在地理编码限制。我什至不需要对地址进行地理编码，因为我有一个要传入的坐标列表。

所以我的问题是，我怎样才能绕过 JS 的地理编码功能并以这种方式构建地图？

谢谢

我正在使用的代码：

```
 var map;

    //marker clusterer
    var mc;
    var mcOptions = {gridSize: 20, maxZoom: 17};

    //global infowindow
    var infowindow = new google.maps.InfoWindow();

    //geocoder
    var geocoder = new google.maps.Geocoder(); 

    //Content and Geos
    var address = new Array(<?php echo $tweetgeos;?>);
    var content = new Array(<?php echo $tweets;?>);

    function createMarker(latlng,text) {
        var marker = new google.maps.Marker({
            position: latlng
        });

        ///get array of markers currently in cluster
        var allMarkers = mc.getMarkers();

        //check to see if any of the existing markers match the latlng of the new marker
        if (allMarkers.length != 0) {
            for (i=0; i < allMarkers.length; i++) {
                var existingMarker = allMarkers[i];
                var pos = existingMarker.getPosition();

                if (latlng.equals(pos)) {
                    text = text + " & " + content[i];
                }
            }
        }

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.close();
            infowindow.setContent(text);
            infowindow.open(map,marker);
        });

        return marker;
    }

    function geocodeAddress(address,i) {
        geocoder.geocode( {'address': address}, function(results, status) {

            if (status == google.maps.GeocoderStatus.OK) {

                var marker = createMarker(results[0].geometry.location,content[i]);
                mc.addMarker(marker);

            } else { 
                alert("Geocode was not successful for the following reason: " + status); 
        } 

        });
    }

    function initialize(){
        var options = { 
            zoom: 5, 
            center: new google.maps.LatLng(51.50733,-0.12768), 
            mapTypeId: google.maps.MapTypeId.ROADMAP 
        }; 

        map = new google.maps.Map(document.getElementById('map'), options); 

        //marker cluster
        mc = new MarkerClusterer(map, [], mcOptions);
        for (i=0; i<address.length; i++) { 
            geocodeAddress(address[i],i);
        }
    }

    google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:36:01.550

您可以直接使用坐标初始化标记，而无需调用 Geocoding API。

```
// Change address Array to an Array of JS Objects
var address = [
    {
        latitude: lat1,
        longitude: lng1,
    },
    {
        latitude: lat2,
        longitude: lng2,
    },
    ...
];

// In function:createMarker()
var myLatLng = new google.maps.LatLng(latlng.latitude, latlng.longitude);
var marker = new google.maps.Marker({
    position: myLatLng,
});

// In function:initialize()
for (i=0; i<address.length; i++) { 
    createMarker(address[i], content[i]);
} 
```

# .htaccess - .htaccess：重定向以显示登录页面而不是主站点

> ID：11291828
> 
> 赞同：1
> 
> 时间：2012-07-02T10:24:28.170
> 
> 标签：.htaccess, mod-rewrite, redirect

我想在网站中放置一个 .html 登录页面。我想要的是当用户访问时`www.mydomain.com`，他们将被重定向到 html 登录页面（我已将其命名为`index.html`）。然后可以点击指向`index.php`查看主站点的链接`www.mydomain.com/index.php`。

`.htaccess`到目前为止，一直在尝试尝试但没有成功（也许我的重写规则是错误的）。这是`.htaccess`文件的内容：

```
# Use PHP5 Single php.ini as default
AddHandler application/x-httpd-php5s .htm .html .php 

# BEGIN WordPress
<IfModule mod_rewrite.c>

  RewriteEngine On
  RewriteBase /

  RewriteRule ^index\.php$ /index.htm [L]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]

</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:35:30.570

If you just want people to land on index.html by default and not index.php, then setting the DirectoryIndex would do the job. [http://httpd.apache.org/docs/2.0/mod/mod_dir.html](http://httpd.apache.org/docs/2.0/mod/mod_dir.html)

```
DirectoryIndex index.html 
```

You wouldn't even need rewrites in this case.

# java - Eclipse 4.2 资源泄漏通过单独的关闭方法

> ID：11291837
> 
> 赞同：4
> 
> 时间：2012-07-02T10:24:59.317
> 
> 标签：java, eclipse, compiler-warnings, resource-leak, eclipse-juno

我正在使用启用了资源泄漏警告的 Eclipse 4.2。

在我看来，此代码会产生错误的资源泄漏警告。

```
 public static void test(){
    InputStream in = null;
try {
    in = new FileInputStream("A");
} catch (IOException e) {
    return;
}finally{
    close(in);
}
}

public static void close(Closeable closeable) {
if (closeable != null) {
    try {
        closeable.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

如果我重构代码，并将 close 方法拉到 finally 块中，一切都很好。

```
 public static void test2(){
    InputStream in = null;
try {
    in = new FileInputStream("A");
} catch (IOException e) {
    return;
}finally{
    if (in != null) {
        try {
            in.close();
        } catch (IOException e) {
        e.printStackTrace()
        }
    }
}
} 
```

我可以以某种方式删除这些警告而不必复制`close`方法的代码并且不必禁用资源泄漏警告吗？

[我在这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=371614)找到了一个错误报告，说明循环中发生了类似的事情，但我的代码中不存在循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:44:21.143

*   您应该看到“潜在的资源泄漏...”警告，如果没有，请打开一个错误。
*   这里的主要问题是编译器不知道 'close(..)' 方法的作用。它可能会也可能不会关闭资源。（注意编译器不进行过程间分析）
*   您可以选择忽略“潜在资源泄漏”警告。（“资源泄漏”警告保证是正确的，但“潜在...”警告不是）

可以在此处找到有关资源泄漏分析的更多详细信息 - [http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-avoiding_resource_leaks.htm&cp=1_3_9_1](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftask-avoiding_resource_leaks.htm&cp=1_3_9_1)

编辑：关于“资源泄漏”与“潜在资源泄漏”的一句话

*   这个想法是保证所有报告的“资源泄漏”警告都是正确的，但可能不是代码库中的“所有”资源泄漏。
*   “潜在的资源泄漏”是……潜在的问题。一些开发人员在知道出现问题但不知道在哪里时会打开“潜在...”警告。在这种情况下，潜在的警告有助于缩小搜索范围。其他一些开发人员只是不时检查潜在的警告，看看那里是否存在真正的问题。

理想情况下，我们希望编译器为我们提供完整且正确的问题集，但实现这一点存在局限性:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:04:54.767

好消息：Eclipse 4.3 将识别 Google 和 Apache 关闭实用程序！

[http://download.eclipse.org/eclipse/downloads/drops4/S-4.3M4-201212140730/news/](http://download.eclipse.org/eclipse/downloads/drops4/S-4.3M4-201212140730/news/)

（搜索“泄漏分析”）

# blackberry - SetText 不能工作超过第一个文本框

> ID：11291842
> 
> 赞同：-1
> 
> 时间：2012-07-02T10:25:27.157
> 
> 标签：blackberry, textbox

我正在使用自定义文本框字段，并尝试使用 setText 以编程方式更改文本...它适用于第一个字段，但不适用于第二个字段...有人可以帮我吗...文本set 被发送到自定义文本框，但编辑 field.settext 仅适用于文本框的第一个实例...

我现在无法发布代码，但会尝试更好地理解 - 我在一页中有 4 个文本框，并在页面中添加了一个关键侦听器。（这是为了便于音译 - 英语到古吉拉特语）我添加了一个 int 值来跟踪哪个字段具有焦点，并使用它来调用适当字段上的 set text 方法。

使用正确的值调用正确的方法，但仍然只有第一个文本框字段的值被重置...我使用调试来跟踪流程，直到执行编辑 field.setText 的位置。

我尝试使用简单的编辑字段而不是自定义字段进行相同的操作，并得到了相同的结果......

当 keylistener 不活动时， setText 会正确执行......所以我很难理解是什么导致了这个问题。将在一天结束前添加 keylistener 代码和任何其他相关代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:32:14.580

请尝试以下代码：

```
import net.rim.device.api.ui.component.TextField;
import net.rim.device.api.ui.container.MainScreen;

public final class MyScreen extends MainScreen
  {
    TextField tempTextBox;
  public MyScreen()
 {        
    // Set the displayed title of the screen       
    setTitle("MyTitle");
    tempTextBox = new TextField("Titile: ", "Fitst Detail");
    this.add(tempTextBox);

    tempTextBox.setText("Second text");

    tempTextBox.setText("Third Text");

} 
```

}

如果不刷新屏幕，那么你可以设置

```
invalidate(); 
```

在 serText 方法之后。

希望帮助满。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T06:37:13.747

好吧，随着黑莓的死亡，这对任何人都没有帮助，但与此同时，这个问题已经开放了 2 年，所以我决定关闭它:-) 我们通过为单独的 keylisteners 解决了这个问题每个文本框。感谢您的帮助。–

# javascript - 在 HTML 中动态附加 Jquery

> ID：11291844
> 
> 赞同：0
> 
> 时间：2012-07-02T10:25:32.290
> 
> 标签：javascript, jquery

我是 jquery 的新手。我正在尝试在 Java 的 HTML 页面中附加 Jquery。要包含 jquery.js 文件，我编写了以下代码：

```
scriptTag += "var script = document.createElement('script');" + 
"script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'; " +
"script.type = 'text/javascript'; " +
"document.getElementsByTagName('head')[0].appendChild(script);" + 
```

然后我附加了以下 js+jquery 代码

```
"var script2 = document.createElement('script'); window.onload = function() {" +
"$(document).ready(function() {" +
"$(\"#identity\").hide();});};" +
"script2.type = 'text/javascript'; " +
"document.getElementsByTagName('head')[0].appendChild(script2);"; 
```

所以基本上我想写这个：

```
var script = document.createElement('script');
script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'; 
script.type = 'text/javascript'; 
document.getElementsByTagName('head')[0].appendChild(script);
var script2 = document.createElement('script');
 window.onload = function() {
   $(document).ready(function() {
      $("#identity").hide();
   });
  };
script2.type = 'text/javascript';
document.getElementsByTagName('head')[0].appendChild(script2); 
```

我想要做的是在窗口加载后我想要我的功能。不知何故，单独写作`$(document).ready(function() {` 是行不通的。我收到一个未定义 $ 的错误（看起来 jquery.js 还没有准备好）。

为了避免这个问题，我使用了`window.onload = function() {`. 但现在我收到错误：`$(document).ready is not a function`. 我真的很困惑如何写这个东西。这是正确的方法吗？非常感谢任何帮助/指导。

**[编辑]**

请注意，以下代码（没有 jquery）可以正常工作：

```
window.onload = function() {
document.getElementById('identity').style.visibility='hidden';
}; 
```

**[编辑]**

实际上我正在制作一个网络代理，在那里我下载页面并为它们提供自定义外观和字段。这些页面不包含任何 jquery 文件，我也不能包含或编写 HTML。我只能使用 java 等动态添加我的 Js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:49:22.710

下面是一些代码，展示了如何动态加载脚本文件并延迟调用 $(document).ready 直到加载该文件：

[http://jqfaq.com/how-to-load-java-script-files-dynamically/](http://jqfaq.com/how-to-load-java-script-files-dynamically/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:58:19.547

用于加载 jquery.min.js 文件的代码被异步调用。在您尝试执行 jquery 函数时，可能尚未加载此文件。因此，您应该确保使用回调函数加载文件。

在以下链接中，您可以找到有关如何执行此操作的示例：http: [//blog.logiclabz.com/javascript/dynamically-loading-javascript-file-with-callback-event-handlers.aspx](http://blog.logiclabz.com/javascript/dynamically-loading-javascript-file-with-callback-event-handlers.aspx)

这里还有一个工作示例：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>index</title>
    <script type="text/javascript">

        function loadScript(sScriptSrc, callbackfunction) {
            //gets document head element
            var oHead = document.getElementsByTagName('head')[0];
            if (oHead) {
                //creates a new script tag
                var oScript = document.createElement('script');

                //adds src and type attribute to script tag
                oScript.setAttribute('src', sScriptSrc);
                oScript.setAttribute('type', 'text/javascript');

                //calling a function after the js is loaded (IE)
                var loadFunction = function() {
                    if (this.readyState == 'complete' || this.readyState == 'loaded') {
                        callbackfunction();
                    }
                };
                oScript.onreadystatechange = loadFunction;

                //calling a function after the js is loaded (Firefox)
                oScript.onload = callbackfunction;

                //append the script tag to document head element
                oHead.appendChild(oScript);
            }
        }

        var SuccessCallback = function() {
            $("#identity").hide();
        }

        window.onload = function() {

            loadScript('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', SuccessCallback)

        };
    </script>
</head>
<body>

    <span id="identity"> This text will be hidden after SuccessCallback </span>

</body> 
```

您应该在您的 scriptTag 变量中使用此代码，然后您可以使用 eval() 函数来评估此变量中的脚本。您还可以使用 jquery 的 getscript 函数在回调函数中加载第二个 javascript 文件

# r - 在 R 中绘制多元逻辑回归模型的结果

> ID：11291845
> 
> 赞同：6
> 
> 时间：2012-07-02T10:25:32.990
> 
> 标签：r, plot, regression

我想绘制一个多变量逻辑回归分析（GLM）的结果，用于调整特定自变量（即独立于模型中包含的混杂因素）与结果（二元）的关系。

我看到帖子推荐使用以下`predict`命令的方法，后跟`curve`，这是一个示例；

```
x     <- data.frame(binary.outcome, cont.exposure)
model <- glm(binary.outcome ~ cont.exposure, family=binomial, data=x)
plot(cont.exposure, binary.outcome, xlab="Temperature",ylab="Probability of Response") 
curve(predict(model, data.frame(cont.exposure=x), type="resp"), add=TRUE, col="red") 
```

然而，这似乎不适用于多元回归模型。当我添加“年龄”（任意 - 可以是任何相同长度的变量）作为混杂变量时，出现以下错误；

```
> x     <- data.frame(binary.outcome, cont.exposure, age)
> model <- glm(binary.outcome ~ cont.exposure + age, family=binomial, data=x)
> plot(cont.exposure, binary.outcome, xlab="Temperature",ylab="Probability of Response") 
> curve(predict(model, data.frame(cont.exposure=x), type="resp"), add=TRUE, col="red")
Error in model.frame.default(Terms, newdata, na.action = na.action, xlev = object$xlevels) : 
  variable lengths differ (found for 'age')
In addition: Warning message:
  'newdata' had 101 rows but variable(s) found have 698 rows 
```

* * *

上面的模型是我想跑的模型的简化版，但是原理是一样的；**我想绘制二进制结果变量和连续暴露之间的关系，独立于混杂因素。**.

获得上述解决方法或查看我感兴趣的关系的替代方法会很棒。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T11:47:16.220

```
set.seed(12345)
dataset <- expand.grid(Temp = rnorm(30), Age = runif(10))
dataset$Truth <- with(dataset, plogis(2 * Temp - 3 * Age))
dataset$Sample <- rbinom(nrow(dataset), size = 1, prob = dataset$Truth)
model <- glm(Sample ~ Temp + Age, data = dataset, family = binomial)
newdata <- expand.grid(
  Temp = pretty(dataset$Temp, 20), 
  Age = pretty(dataset$Age, 5))
newdata$Sample <- predict(model, newdata = newdata, type = "response")
library(ggplot2)
ggplot(newdata, aes(x = Temp, y = Sample)) + geom_line() + facet_wrap(~Age) 
```

![在此处输入图像描述](../Images/66141e3b1eceec4b7d3906ab78be3c58.png)

```
ggplot(newdata, aes(x = Temp, y = Sample, colour = Age, group = Age)) + 
  geom_line() 
```

![在此处输入图像描述](../Images/ff8c005fdedd72ba1d14c9546c9dc95d.png)

# vb.net - 内存不足异常

> ID：11291847
> 
> 赞同：-1
> 
> 时间：2012-07-02T10:25:39.903
> 
> 标签：vb.net, memory, desktop

我在 VB.NET 中开发了桌面应用程序。框架为 3.5，后端为 SQL Server 2005。

下面是我以主表单编写的代码[在表单关闭时释放内存]，所有表单都继承自该代码。

```
 Private Declare Auto Function SetProcessWorkingSetSize Lib "kernel32.dll" (ByVal procHandle As IntPtr, ByVal min As Int32, ByVal max As Int32) As Boolean
Private Declare Function EmptyWorkingSet Lib "psapi.dll" (ByVal hProcess As IntPtr) As Long

Private Sub frmEMR_FormClosed(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
    GC.Collect()
    GC.WaitForPendingFinalizers()
    GC.RemoveMemoryPressure(GC.GetTotalMemory(True))
    EmptyWorkingSet(Process.GetCurrentProcess.Handle)
    SetProcessWorkingSetSize(Process.GetCurrentProcess.Handle, -1, -1)
End Sub 
```

虽然我写过这个堆内存有争议的增加。

非托管内存也在增加。

任何人都可以帮助我解决这个问题。

感谢和问候

赫马尔沙阿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:58:11.800

如果您稍后调用with则调用没有[意义](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682606%28v=vs.85%29.aspx)，因为这也会清空工作集。`EmptyWorkingSet``SetProcessWorkingSetSize``-1, -1`

另外我不明白你为什么`RemoveMemoryPressure`用`GetTotalMemory`. 这没有任何意义...

我的建议是：

*   不要乱用垃圾收集（如果你不知道自己在做什么）。垃圾收集器会为你做这件事。

如果内存不足，则可能存在内存泄漏。你不会通过随机调用你不理解的函数来修复它。

我敢打赌您的问题是由于未正确处理非托管资源造成的，而且我还敢打赌您正在使用实现的框架类`IDisposable`并且您没有处理它们（通过调用`Dispose`或使用`using`关键字）。

确保处理所有这些对象。如果问题仍然存在，请使用[内存分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)或[SOS](http://msdn.microsoft.com/en-us/library/bb190764.aspx)查找内存泄漏的原因。

您可以调用任何灵丹妙药方法来神奇地修复您的错误。

还可以在 StackOverflow 上查看相同主题的众多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:32:11.513

在处理内存泄漏时，我的第一条规则是检查所有代码并确保对象是否有`dispose()`使用它的方法。不知道您的应用程序在做什么，我只能猜测，但我知道许多 .NET SQL 对象具有`dispose()`和`close()`功能。如果您的应用程序使用了很多这些，那么您可能已经忘记处理它们。

# windows-phone-7 - InvalidProgramException - 堆栈跟踪

> ID：11291852
> 
> 赞同：0
> 
> 时间：2012-07-02T10:25:56.370
> 
> 标签：windows-phone-7, stack-trace, utc

我收到了以下堆栈跟踪。但我无法弄清楚哪个类的哪个函数引发了这个问题。谁能告诉我 MainPage..ctor 是什么？

> "帧图像函数偏移
> 
> 0 coredll.dll xxx_RaiseException 19
> 
> 1 mscoree3_7.dll 520892
> 
> 2 mscoree3_7.dll 461967
> 
> 3 mscoree3_7.dll 534468
> 
> 4 过渡存根 0
> 
> 5 System.InternalTimeZoneInfo.TransitionTimeToDateTime 520
> 
> 6 System.InternalTimeZoneInfo.GetDaylightTime 100
> 
> 7 System.InternalTimeZoneInfo.GetIsDaylightSavingsFromUtc 128
> 
> 8 System.InternalTimeZoneInfo.GetUtcOffsetFromUtc 500
> 
> 9 System.DateTime.ToLocalTime 164
> 
> 10 System.DateTime.get_Now 72
> 
> 11 System.DateTime.get_Today 44
> 
> 12 xxxx.MainPage..ctor 84
> 
> 13 mscoree3_7.dll 507848
> 
> 14 mscoree3_7.dll 184683
> 
> 15 mscoree3_7.dll 183987
> 
> 16 mscoree3_7.dll 183375
> 
> 17 System.Reflection.RuntimeConstructorInfo.InternalInvoke 104
> 
> 18 System.Reflection.RuntimeConstructorInfo.InternalInvoke 1056
> 
> 19 System.Activator.InternalCreateInstance 1112"

这是主页构造函数：

```
public MainPage()
{
    InitializeButtons();
    CreateCalendar();
    DisplayHistory();
    DisplayStatistics();
} 
```

在里面`CreateCalendar`我已经初始化了一个变量`DateTime currentDate = DateTime.Today;`这是造成麻烦的那个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:10:33.103

我建议您将方法移动到页面加载事件，如下所示：

```
public MainPage()
{
     InitializeComponent();
     Loaded += MainPage_Loaded; // you may declare it in xaml as well
}

private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    CreateCalendar();
    DisplayHistory();
    DisplayStatistics();
} 
```

根据您在每个方法中执行的操作类型 - 主要是如果它包含 UI - 建议将其包装到 Dispatcher 中：

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    CreateCalendar(); //assuming this method does not use UI
    Dispatcher.BeginInvoke(() => 
    {
     //asuming these methods use UI
     DisplayHistory();
     DisplayStatistics();
    });
} 
```

试试看，让我们知道，，

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T14:50:02.017

在我的情况下，这个错误偶尔会突然出现，并有一些微不足道的变化。它在运行 Silverlight 单元测试框架下的测试初始化​​阶段失败。在从单元测试项目间接引用的项目中进行了更改（即单元测试项目引用了 Windows Phone 库，而库引用了 PCL 并进行了更改）。

说我添加的代码在崩溃发生时根本没有执行是多余的！

在用二分法注释掉新代码后，我最终发现注释一行停止抛出异常。这条线是这样的：

var items = jData["items"].Select(token => token.ToObject()).ToList();

其中 jData 是来自著名 Json.NET 的 JObject 实例。更新到最新版本的 Json.NET 并没有帮助。

The error is gone after replacing LINQ expression with explicit ugly for loop (scoffing Resharper says "for loop can be converted to LINQ expression).

So I'm starting to believe in magic.

Hope this helps someone.

# javascript - Javascript 或 Jquery - 对于此数组中的每个

> ID：11291855
> 
> 赞同：0
> 
> 时间：2012-07-02T10:26:09.840
> 
> 标签：javascript, jquery, arrays

查看我返回的数据的屏幕截图，我做了一个 console.log，我需要为每一个做一个。

![大批](../Images/810c9ffcc0307576817a5bb415106634.png)

我一直在尝试这样的事情无济于事......？

```
for (var point in arrayLatLngPoints)
{
    addMarkers(point.timestamp, point.lat, point.lng, point.timestamp, strUserName, pathColour);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:28:28.960

不要使用`for..in`循环数组，而是使用普通的 for 循环。

```
for (var i = 0; i < arrayLatLngPoints.length; i++)
{
    var point = arrayLatLngPoints[i];
    addMarkers(point.timestamp, point.lat, point.lng, point.timestamp, strUserName, pathColour);
} 
```

# internet-explorer - JQplot 在 IE 上的打印问题

> ID：11291859
> 
> 赞同：1
> 
> 时间：2012-07-02T10:26:45.637
> 
> 标签：internet-explorer, canvas, printing, jqplot

我正在尝试打印我的图表，它可以通过 Firefox 和 Chrome 正确打印。

但如果我尝试用 IE 打印它，它会显示图形背后的图形画布 HTML 标签。正如你在图片中看到的那样。并且它还把图轴文本放在了整个图上.. :(

我尝试了下面的解决方案，它说它解决了这个问题，但它对我有用:(

[http://blog.muonlab.com/2010/06/02/getting-position-absolute-canvas-elements-to-print-correctly-in-ie/](http://blog.muonlab.com/2010/06/02/getting-position-absolute-canvas-elements-to-print-correctly-in-ie/)

下面是问题的截图。

![打印 jqplot 时的 IE 问题](../Images/fde51d34f184afbc545c95f6952d77ef.png)

**HTML**

```
 <!doctype html>
    <html lang="en" class="no-js master">
    <head>
    <!-- jQuery Flot Graph Widget.  exCanvas.js needed for IE  -->
 <link class="include" rel="stylesheet" type="text/css" href="/css/jquery.jqplot.css" />
 <!-- End additional plugins --><!--[if lt IE 9]><script language="javascript" type="text/javascript" src="/js/excanvas.min.js"></script><![endif]-->
 <script class="include" type="text/javascript" src="/js/jquery.jqplot.min.js"></script>
 <!-- Additional plugins go here -->
 <script class="include" type="text/javascript" src="/js/jqplot/jqplot.canvasTextRenderer.min.js"></script>
 <script class="include" type="text/javascript" src="/js/jqplot/jqplot.canvasAxisLabelRenderer.min.js"></script>
 <script class="include" type="text/javascript" src="/js/jqplot/jqplot.canvasAxisTickRenderer.min.js"></script>
 <script class="include" type="text/javascript" src="/js/jqplot/jqplot.categoryAxisRenderer.min.js"></script>
 <script class="include" type="text/javascript" src="/js/jqplot/jqplot.barRenderer.min.js"></script>
    </head>
    <body>
    <div id="mainCont"> </div>
    </body>
    </html> 
```

**JSON数据**

```
{
"graphData":[["06-2011",20.0],["07-2011",0.0],["09-2011",0.0],["10-2011",0.0],["11-2011",100.0],["12-2011",0.0],["01-2012",0.0],["02-2012",0.0],["03-2012",0.0],["04-2012",0.0],["05-2012",0.0]], "yAxisLabel" : "Data per month", "graphTitle" : "12 month "} 
```

**JS代码**

```
$('.print', context).live("click", function(e) {
    printGraph(data.graphData, data.yAxisLabel, data.graphTitle);
}

function printGraph(graphData, yAxisLabel, graphTitle){
        var graphWrapper = $(document.createElement('div'));
        graphWrapper.attr('id', 'edd-graph').css('width','490px');
        var graphID = graphWrapper.attr('id');

        $('#mainCont').append(graphWrapper);

        var plot = $.jqplot(graphID, [graphData], {
          series:[{renderer:$.jqplot.BarRenderer}],
          seriesDefaults: {shadow: false, 
                           rendererOptions: {barWidth:20}
                          },
          seriesColors: [ "rgba(255, 81, 82, 1)" ],
          axes: {
            xaxis: {
              renderer: $.jqplot.CategoryAxisRenderer,
              label: '',
              labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
              tickRenderer: $.jqplot.CanvasAxisTickRenderer,
              max:90,
              min:10,
              tickOptions: {
                  angle: -45,
                  fontFamily: 'arial',
                  fontSize: '7.2pt'
              }
            },
            yaxis: {
              label: yAxisLabel,
              labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
              labelOptions: {
                  fontFamily: 'arial',
                  fontSize: '8.5pt'
              },
              tickOptions: {
                  fontFamily: 'arial',
                  fontSize: '7.2pt'
              }
            }
          },
          grid: {
            drawGridLines: true,        // wether to draw lines across the grid or not.
            gridLineColor: '#efefef',    // *Color of the grid lines.
            background: '#ffffff',      // CSS color spec for background color of grid.
            borderColor: '#999999',     // CSS color spec for border around grid.
            borderWidth: 0.2,           // pixel width of border around grid.
            shadow: false
            }

        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:02:01.777

我遇到了这个烦人的问题的解决方案。它实际上[与 StackOverflow 上类似问题的另一个答案相关联](https://stackoverflow.com/a/10174746/613495)。

[解决方案的直接链接在这里。](http://blog.muonlab.com/2010/06/02/getting-position-absolute-canvas-elements-to-print-correctly-in-ie/)

我已经验证过了，效果很好。以下是我为展示 hack 的实际操作而构建的示例。`IE`以适当的版本（7、8 或 9，浏览器模式设置为 IE7 或 IE8）打开示例，然后尝试打印预览，您将看到不同之处：

*   [黑客的样本。](http://jsfiddle.net/Boro/BLfRe/13/)
*   [没有破解的样本。](http://jsfiddle.net/Boro/BLfRe/14/)

***PS：****请不要犹豫，给@user1065335 +1，我做到了，为了找到它，干得好伙伴:)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:03:56.200

好吧，我们在我们的站点中使用了[Mordernizr](http://modernizr.com/download)来支持 HTML5。并优化代码而不是获取整个 mordernizr 文件。我们创建了一个自定义的 Mordernizr 文件。

那就是问题所在，我们忘记从那里包含 PRINTSHIV 复选框，这就是 wat 搞砸了 :)

好吧，这是有效并解决了这个问题的链接。

这件事搁置了很长时间。昨天刚刚解决，很高兴。

还要感谢 BORO 的回答，这有助于防止您使用 Mordernizr。

有效的**[CUSTOM MORDERNIZR](http://modernizr.com/download/#-fontface-borderradius-boxshadow-opacity-textshadow-cssgradients-canvas-canvastext-audio-video-input-geolocation-svg-printshiv-cssclasses-teststyles-testprop-testallprops-prefixes-domprefixes-load)**

# java - Android 应用程序：扫描指定文件夹中的音乐文件运行缓慢并挂起。

> ID：11291860
> 
> 赞同：1
> 
> 时间：2012-07-02T10:26:46.873
> 
> 标签：java, android

我正在尝试扫描指定文件夹中的所有音乐文件，但遇到了与应用程序关闭相结合的性能问题。

我的方法是首先使用以下方法从手机中获取所有音乐文件：

```
String[] projection = { 
        MediaStore.Audio.Media._ID,
        MediaStore.Audio.Media.DISPLAY_NAME,
        MediaStore.Audio.Media.DATA, 
        MediaStore.Audio.Media.TITLE 
};

String selection = MediaStore.Audio.Media.IS_MUSIC + "!=" + 0;

cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                      projection, 
                      selection, 
                      null, 
                      MediaStore.Audio.Media.TITLE + " ASC"); 
```

然后我使用以下方法获取每个获取文件的位置：

```
columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA); 
```

如果文件位置在*指定文件夹*中，我将其添加到将显示在屏幕上的列表中。

这种方法的问题在于它表现不佳。

它挂起4-5秒。

如果我滚动列表，应用程序将关闭。

以下是我现在正在使用的完整代码：

```
private String[] getTrackList() {
    String[] result = null;
    String[] projection = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.TITLE
    };

    String selection = MediaStore.Audio.Media.IS_MUSIC + "!=" + 0;

    cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection,
            selection,
            null,
            MediaStore.Audio.Media.TITLE + " ASC");

    result = new String[cursor.getCount()];
    int position = 0;

    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
        getSearchableDir("/mnt/sdcard/Music/"); //See below
        columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
        String currentDir = cursor.getString(columnIndex).substring(0,
                cursor.getString(columnIndex).lastIndexOf("/") + 1);

        if (searchableDir.contains(currentDir)) {
            columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE);
            result[position] = cursor.getString(columnIndex);
            position++;
        }
    }
    return result;
}

// Function for recursively fetching all the sub-directories
private void getSearchableDir(String path) {
    searchableDir.add(path);
    File root = new File(path);
    File[] list = root.listFiles();
    for (File f : list) {
        if (f.isDirectory()) {
            searchableDir.add(f.getAbsolutePath());
            getSearchableDir(f.getAbsolutePath());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:55:46.147

I think it's safe to say that `getSearchableDir` is the performance hog here.

Re-factor the code so that this function is not called.

# html - 排列两组立柱

> ID：11291862
> 
> 赞同：0
> 
> 时间：2012-07-02T10:27:05.030
> 
> 标签：html, css

我有一个如图所示的页面布局...... [http://jsfiddle.net/k55DE/](http://jsfiddle.net/k55DE/)

我需要的是，无论屏幕有多宽，两个粉红色列的左边缘始终对齐。侧边栏容器总是 300px 宽，

谢谢你的帮助

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Example</title>
    </head>
    <body>

    <div id="toolbar">
        <div id="nav">NAVIGATION</div>
        <div id="search">SEARCH</div>
    </div>
    <div id="site">
        <div id="content">CONTENT</div>
        <div id="sidebar">SIDEBAR</div>
    </div>

    </body>
</html>​ 
```

-

```
#toolbar {
    margin-bottom:10px;
    overflow:auto;
}

#toolbar #nav,
#toolbar #search {
    float:left;
}

#toolbar #nav {
    background-color:#ddffdd;
    min-height:30px;
    text-align:right;
    width:66%;
}

#toolbar #search {
    background-color:#ffdddd;
    min-height:50px;
    width:34%;
}

#site {
    margin:0 auto;
    overflow:auto;
    width:800px;
}

#site #content,
#site #sidebar {
    float:left;
    min-height:300px;
}

#site #content {
    background-color:#ddffdd;
    text-align:right;
    width:70%;
}

#site #sidebar {
    background-color:#ffdddd;
    width:30%;
}
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:53:22.463

解决此问题的最简单方法是确保绿色区域的右侧始终对齐。理论上，这可以通过使绿色区域始终保持相同大小来实现。不幸的是，这比其他情况要困难得多，因为上部绿色区域具有百分比宽度（66%），下部绿色区域具有明确宽度（800 像素的 70% 或 ~560 像素）。哦，较低的绿色区域居中。

因为下方的“内容”区域已经居中（margin-left 和 margin-right 是自动的），左边的边距将根据浏览器窗口的大小是一个固定的量。（大约（浏览器宽度 - 800）/2。）由于此值取决于渲染时浏览器的宽度，因此您无法在纯 CSS 中确定此数量，并且需要使用 JavaScript 来强制它们对齐。

Javascript 需要执行以下操作：

1.  大约确定左边距的宽度（浏览器宽度 - 800px）/2。
2.  设置上面绿色部分的宽度为边距宽度（按1计算）+800px。设置上部粉红色部分以水平填充其余部分。
3.  为窗口调整大小操作添加一个侦听器，并在每次调整窗口大小时重复上面的 1 和 2。

如果底部没有居中，或者顶部也应用了相同的居中/尺寸，这一切都会简单得多。然后你就可以应用纯 CSS 解决方案了。

# java - 无需签名即可从小程序访问文件系统

> ID：11291866
> 
> 赞同：0
> 
> 时间：2012-07-02T10:27:44.567
> 
> 标签：java, applet, trusted-sites

在受信任的域中，是否可以在不签署小程序的情况下从小程序访问文件系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:22:11.380

不，我认为小程序必须有签名。为什么不使用与您信任的域相同的证书来签署您的小程序？

# php - 在 PHP 中合并透明图像

> ID：11291868
> 
> 赞同：2
> 
> 时间：2012-07-02T10:27:54.243
> 
> 标签：php, image, gd

我正在尝试在另一个不透明的 PNG 之上分层一个部分透明的 PNG。

在这个网站和网络上有很多关于如何做到这一点的例子，但是对于我尝试的每个版本，我似乎都无法保持前景图像的透明度。

目前代码如下所示：

```
 $image = imagecreatefrompng($_GET['fg']);
 $frame = imagecreatefrompng($_GET['bg']);

 imagealphablending($frame,true);
 imagecopymerge($image, $frame, 0, 0, 0, 0, 0, 100, 100);

 # Save the image to a file
 $output_file = 'preview-' . time() . '.png';

 imagepng( $image, $_SERVER['DOCUMENT_ROOT'] . '/share/' . $output_file ); 
```

这会产生由前景图像组成的图像，透明部分为白色（或黑色）。

我也试过这个，就像在图像缩略图生成器 TimThumb 中看到的那样，它产生了相同的输出：

```
$canvas= imagecreatefrompng($_GET['bg']);

$overlay_gd_image = imagecreatefrompng( $_GET['fg'] );
$overlay_width = imagesx( $overlay_gd_image );
$overlay_height = imagesy( $overlay_gd_image );
imagealphablending($canvas, true );
imagecopy( $canvas, $overlay_gd_image, 0, 0, 0, 0, $overlay_width, $overlay_height);
imagealphablending($canvas, false );
imagesavealpha($canvas , true); 

imagepng($canvas, 'new.png'); 
```

我已经没有东西可以尝试了，如果有人能阐明这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T21:03:18.547

当涉及到透明图像时，本机**imagecopymerge**并不能很好地工作。如果您想将两个 PNG 合并在一起并且不弄乱 alpha 通道，那么在[手册页](http://php.net/manual/en/function.imagecopymerge.php)上找到的这个功能对我来说就像一个魅力，实际上保留了透明度。我一直在使用此功能不间断地合并 PNG，并且没有遇到问题，所以我认为它可以解决您的问题。（由“rodrigo dot polo at gmail dot com”发布，所有功劳归他/她所有。）

```
<?php 
/** 
 * PNG ALPHA CHANNEL SUPPORT for imagecopymerge(); 
 * This is a function like imagecopymerge but it handle alpha channel well!!! 
 **/ 

// A fix to get a function like imagecopymerge WITH ALPHA SUPPORT 
// Main script by aiden dot mail at freemail dot hu 
// Transformed to imagecopymerge_alpha() by rodrigo dot polo at gmail dot com 
function imagecopymerge_alpha($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h, $pct){ 
    if(!isset($pct)){ 
        return false; 
    } 
    $pct /= 100; 
    // Get image width and height 
    $w = imagesx( $src_im ); 
    $h = imagesy( $src_im ); 
    // Turn alpha blending off 
    imagealphablending( $src_im, false ); 
    // Find the most opaque pixel in the image (the one with the smallest alpha value) 
    $minalpha = 127; 
    for( $x = 0; $x < $w; $x++ ) 
    for( $y = 0; $y < $h; $y++ ){ 
        $alpha = ( imagecolorat( $src_im, $x, $y ) >> 24 ) & 0xFF; 
        if( $alpha < $minalpha ){ 
            $minalpha = $alpha; 
        } 
    } 
    //loop through image pixels and modify alpha for each 
    for( $x = 0; $x < $w; $x++ ){ 
        for( $y = 0; $y < $h; $y++ ){ 
            //get current alpha value (represents the TANSPARENCY!) 
            $colorxy = imagecolorat( $src_im, $x, $y ); 
            $alpha = ( $colorxy >> 24 ) & 0xFF; 
            //calculate new alpha 
            if( $minalpha !== 127 ){ 
                $alpha = 127 + 127 * $pct * ( $alpha - 127 ) / ( 127 - $minalpha ); 
            } else { 
                $alpha += 127 * $pct; 
            } 
            //get the color index with new alpha 
            $alphacolorxy = imagecolorallocatealpha( $src_im, ( $colorxy >> 16 ) & 0xFF, ( $colorxy >> 8 ) & 0xFF, $colorxy & 0xFF, $alpha ); 
            //set pixel with the new color + opacity 
            if( !imagesetpixel( $src_im, $x, $y, $alphacolorxy ) ){ 
                return false; 
            } 
        } 
    } 
    // The image copy 
    imagecopy($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h); 
} 

// USAGE EXAMPLE: 
$img_a = imagecreatefrompng('image1.png'); 
$img_b = imagecreatefrompng('wm2.png'); 

// SAME COMMANDS: 
imagecopymerge_alpha($img_a, $img_b, 10, 10, 0, 0, imagesx($img_b), imagesy($img_b),50); 

// OUTPUT IMAGE: 
header("Content-Type: image/png"); 
imagesavealpha($img_a, true); 
imagepng($img_a, NULL); 
?> 
```

如果您使用该示例，您将看到 $img_a 将低于 $img_b 并且不会有一个奇怪的黑框，而是会保留 $img_b 的透明度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T22:10:18.990

我有完全相同的问题。我的解决方案是使用 imagecopyresampled 而不是 imagecopymerge。这将保留两个图像的透明度。

注意要传递的参数略有不同

# java - 在 JMX 方法调用程序之后，从 ioc 检索的对象变为 null

> ID：11291871
> 
> 赞同：0
> 
> 时间：2012-07-02T10:28:09.140
> 
> 标签：java, spring, ioc-container, jmx

我使用 Spring 3.1 作为独立应用程序。

我有一些奇怪的情况，我想我错过了一些东西。

我有一个类，该类具有我通过 JMX 控制台公开的方法。该方法正在通过 bean 调用方法。

我正在初始化的那个bean。奇怪的是，在我通过 jmx 控制台调用该方法后，bean 实例变为空。

这就是暴露的 JMX bean：

```
public class TriggerBean implements IJmxTriggerBean
{
    static Logger logger = Logger.getLogger(TriggerBean.class);

    FeedListenerBean fe = null;

    public void start()
    {
        try
        {
            // init();
            PropertyConfigurator.configure(FixGWConstants.LOG4J_PATH);
            ApplicationContext context = new ClassPathXmlApplicationContext(FixGWConstants.APPLICATION_CONTEXT_XML);
            fe = (FeedListenerBean) context.getBean("FeedListenerBean");
            doTheListen();

        }
        catch (Throwable t)
        {
            logger.error(t);
            System.out.println(t);
        }

    }

        //thats the method being exposed by jmx. pay attention that fe object has been   initialized before by the start()
    public void doTheListen()
    {
        fe.listen();
    }

    private void init()
    {
        Resource resource = new ClassPathResource(System.getProperty("user.dir") + "//config.properties");
        try
        {
            Properties props = PropertiesLoaderUtils.loadProperties(resource);
            String log4jPath = props.getProperty("LOG4J_PATH");
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

我正在通过独立测试它：

```
public static void main(String[] args) throws Exception
    {
protected TriggerBean trigger = new Trigger();
trigger.start();
} 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <!-- Must for auto wiring 
    <context:annotation-config />
    -->

    <context:component-scan base-package="com.fixgw.beans">
    </context:component-scan>

    <!-- start a JMX Server -->
    <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean" />

    <bean id="FeedListenerBean" class="com.fixgw.beans.FeedListenerBean">
    </bean>

    <bean id="TriggerBean" class="com.fixgw.test.TriggerBean">
    </bean>

    <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
        <property name="beans">
            <map>
                <entry key="Server:name=HttpAdaptor">
                    <bean class="mx4j.tools.adaptor.http.HttpAdaptor">
                        <property name="port" value="8000" />
                        <property name="host" value="0.0.0.0" />
                        <property name="processor">
                            <bean class="mx4j.tools.adaptor.http.XSLTProcessor" />
                        </property>
                    </bean>
                </entry>
                <entry key="bean:name=TriggerBean" value-ref="TriggerBean" />

            </map>
        </property>
        <property name="listeners">
            <list>
                <!--
                    let the HttpAdapter be started after it is registered in the
                    MBeanServer
                -->
                <bean class="com.fixgw.jmx.HttpAdaptorMgr">
                    <property name="mbeanServer" ref="mbeanServer" />
                </bean>
            </list>
        </property>
    </bean>

</beans> 
```

当我第一次使用 start() 时，对象 fe 做得很好。但是在调用doTheListen之后（通过JMX对象fe提醒null（虽然它之前已经被初始化）

任何想法？

谢谢，雷。

# iphone - Apple 可达性示例在后台模式下不起作用

> ID：11291879
> 
> 赞同：4
> 
> 时间：2012-07-02T10:28:40.810
> 
> 标签：iphone, voip, reachability

我看到论坛上有很多关于 Apple 的可达性类的条目，但我还没有看到这个的解决方案。

我正在开发一个需要在后台模式和实时检测连接变化的 VoIP 应用程序。SCNetworkReachability API 应该可以完成这项工作，但我面临一些问题......

首先，我从 Apple (v2.2) 下载了 Reachability 示例代码，但我无法让它在后台模式下工作。如果我在模拟器上启动应用程序并插入/拔出网络电缆，效果会很好。但是，如果我尝试在设备上启动应用程序，然后进入后台模式以启用/禁用 wifi，则根本不会通知应用程序。

我在 info.plist 中设置了“应用程序不在后台运行 = NO”和“所需的后台模式 = 应用程序提供 IP 语音服务”但没有成功。此示例代码的 Donoho 版本也存在同样的问题。

第二个...我已经在我正在开发的 VoIP 应用程序（基于 Linphone）上集成了可达性示例代码，并且...在后台模式下检测到连接更改...！！！

然而，它并不总是很好地工作：

*   如果我在打开 wifi 的情况下启动应用程序，则会检测到以下所有可达性更改，即使在后台模式下也是如此 -> OK
*   但是如果我在没有关闭 wifi 的情况下启动应用程序，该应用程序不会检测到 wifi 恢复... -> KO

所以，问题是：

*   如何使 Apple Reachability 示例在后台模式下工作？
*   并且......当可达性类看起来在后台模式下*工作*时，为什么它只有在第一次可达性检查发现连接可用时才真正起作用？

我正在使用 iOS 5.1.1 在 iPhone4 上运行应用程序（iOS 版本 > 5.0 可能有问题......？？）

我也检查了[这个线程上的针对性解决方案](https://stackoverflow.com/questions/10184082/reachability-notification-never-called?rq=1)上的针对性解决方案，但最后一个版本的可达性示例已经处理了保留/释放问题......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:52:00.887

我已经在这个问题上徘徊了几天，最后这个问题看起来与 NSStreamNetworkServiceTypeVoIp 连接模式密切相关，

看起来暂停的应用程序只有在与远程服务器建立活动的 NSStreamNetworkServiceTypeVoIp 连接后才能监听连接更改。

这就解释了为什么 Reachability 示例没有响应后台模式下的连接变化（应用程序内没有 NSStreamNetworkServiceTypeVoIp 连接）以及为什么 voip 应用程序在首次启动时 wifi 关闭时也没有响应......

所以，看起来这个需要某种解决方法......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T14:22:04.520

这种[可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_m.html) 可以帮助您，它还附带示例代码。每当您的互联网出现故障或立即出现时，它都会通知您。

# c++ - 当 * 作为调用 c 程序的参数之一传递时 argc 的值

> ID：11291880
> 
> 赞同：1
> 
> 时间：2012-07-02T10:28:46.947
> 
> 标签：c++, c, bash

当“*”作为调用 c 程序的参数之一传递时，argc 的值存在异常。我在c中做了一个简单的代码并将其保存为'test2.c'。这是'test2.c'的以下代码---

```
#include<stdio.h>
#include<stdlib.h>
int main(int argc,char* argv[])
{
printf("%d\n",argc);return 0;
} 
```

我编译它并称之为——

```
dev@ubuntu:~$ gcc test2.c -o t
dev@ubuntu:~$ ./t *
31 
```

所以，我得到的参数计数值为 31；而如果 '*' 被任何其他二元运算符替换；argc 的值为 2（这在逻辑上也是正确的）。

```
dev@ubuntu:~$ ./t +
2 
```

我无法理解为什么会这样......还有一件更有趣的事情。当*使用'-'代替'* '时；答案是2（这在逻辑上也是正确的）

```
dev@ubuntu:~$ ./t -*
2 
```

任何人都可以帮助我吗？在此先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T10:31:34.583

它只是外壳扩展。shell 将扩展`*`为程序正在执行的当前目录中的文件名（包括目录）。

`+`or`;`没有特殊解释，因此它们被视为普通字符串，但`*`具有特殊解释，因此它被扩展为当前目录中所有文件的列表，并传递给您的程序。

尝试使用

`./t '*'`或者`./t \*`

这停止了​​对`*`. 第一个使用了 bash (~~看起来~~你在 bash 中) 单引号，它不会对引号中的模式进行任何特殊解释，下一个使用转义序列。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T10:30:16.467

它是扩展`*`为当前目录中文件列表的 shell。打印出来`argv`看看是不是这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T10:34:19.127

`argc`将始终为您提供`argv[]`. 传递给的参数`argv[]`将始终至少包含可执行文件的名称，因此`argc`始终是参数数量 + 1。

这种`*`情况虽然很特殊，因为您的 shell 将扩展`*`到本地目录中的所有文件和目录。如果您不想`*`被扩展，请像`"*"`使用双引号一样传递它。

在你的 shell 中尝试`echo *`vs`echo "*"`看看如何`*`扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T10:39:21.083

这只是将星号运算符扩展`*`到您正在执行该程序的当前目录的外壳。

在 shell 开始执行之前执行了几个扩展，例如`~`(tilde)、`{}`(braces) 和`$`(parameters)，当然这取决于您的操作系统。您可以在下面的链接中找到 GNU 扩展列表。

[GNU BASH 手册 - 3.5.3 Shell 参数扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html#Shell-Parameter-Expansion)

提示：如果您打印了参数的值，您可能会看到目录和文件的列表，并且参数计数“argc”会根据您从哪个目录执行而改变。

# android - 如何在android中访问USB路径？

> ID：11291882
> 
> 赞同：6
> 
> 时间：2012-07-02T10:28:49.910
> 
> 标签：android

我通过 USB 电缆连接了 android 设备和 PC。我的内部 SD 卡位置路径为`/mnt/sdcard`. 但我的外部 USB 设备路径为`/mnt/userdata1`. 我尝试使用此代码仅查找 Internal SD Card Path `Environment.getExternalStorageDirectory()`。我使用此代码仅在内部 SD 卡路径中访问。如何访问外部 USB 路径。

例如，屏幕截图在这里... [示例](http://www.androidfreeapp.net/wp-content/uploads/2011/10/astro-file-manager-android-tablet-app-1024x640.jpg "截屏")

在此示例中包含`Internal Memory`,`External SD card`和`USB Storage`。如何以编程方式查找此路径`Internal Memory`（`External SD card`和）。`USB Storage`在此代码`Environment.getExternalStorageDirectory()`中，仅查看所有`Internal Memory`文件中的文件。那么如何访问其他路径（`External SD card`和`USB Storage`）

请用代码指导我。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:49:06.893

如果我理解正确，您所说的“外部”USB 路径实际上是您计算机上 SD 卡的挂载点。很可能，您的 SD 卡有标签`userdata1`。因此，当它安装在计算机上时，它会获得`/mnt/userdata1`安装点。然而，这并不是绝对必要的，它可以是任何挂载点。事实上，如果你将它连接到另一台计算机，它很容易成为另一个挂载点。

由于此路径由计算机操作系统决定，因此您需要在计算机上找到此路径（请注意，每次将手机连接到 PC 时，此路径可能会有所不同，因此您每次都需要这样做） .

根据您的问题和路径结构（`/mnt/userdata1`），我猜您使用的是 linux 或其他一些 unix 版本。因此，您可以`mount`在 PC 上运行以查看已安装设备的列表。例如，这是我的 mac 上的输出：

```
$ mount
/dev/disk0s2 on / (hfs, local, journaled)
devfs on /dev (devfs, local, nobrowse)
map -hosts on /net (autofs, nosuid, automounted, nobrowse)
map auto_home on /home (autofs, automounted, nobrowse)
/dev/disk1s1 on /Volumes/ALEKS540 (msdos, local, nodev, nosuid, noowners) 
```

注意输出中的最后一行——这是我连接的安卓手机，SD 卡安装在电脑上。在 Mac 上，挂载点创建在下面`/Volumes`而不是`/mnt`. 除此之外，*ALEKS540*是我的 SD 卡的标签，因此它是这样安装的。

在手机内部，它仍然安装为`/mnt/sdcard`.

从Android的角度来看，可能存在三种存储类型：

1.  **内部存储器**它始终安装在`/`设备下方，包含除 SD 卡和 USB 存储之外的所有内容。
2.  **SD 卡**- 这被称为“外部存储”，通常安装为`/mnt/sd`，但并非总是如此。 `Environment.getExternalStorageDirectory()`将返回 SD 卡挂载点的路径。
3.  **USB 存储**- 仅少数设备（支持 USB 主机模式用于外部存储的设备）支持此功能。这将安装在 下的某个`/mnt`位置，但具体位置会有所不同。您将需要使用 Android NDK 来询问和迭代已安装的设备以找到您想要的设备。

# python - Python 2.7 将函数的输入用作字符串和变量

> ID：11291883
> 
> 赞同：6
> 
> 时间：2012-07-02T10:28:55.007
> 
> 标签：python, string, floating-point

我想做以下事情：

```
print "CC =",CC 
```

但作为一个函数，我只需要编写变量 CC 一次。我无法弄清楚如何在函数中执行此操作，因为它总是将 CC 评估为浮点数（它是）......有没有办法接受函数的输入作为字符串和浮点数数字？

我试过这个：

```
def printme(a): 
    b='%s' % a
    print b
    return b 
```

但当然它只打印 的值`a`，而不是它的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:41:58.637

您可以使用[检查](http://docs.python.org/library/inspect.html)模块（另请参阅[此 SO 问题](https://stackoverflow.com/questions/6618795/get-locals-from-calling-namespace-in-python)）：

```
def printme(x):
    import inspect
    f = inspect.currentframe()
    val = f.f_back.f_locals[x]
    print x, '=', val

CC = 234.234    
printme('CC') # <- write variable name only once
# prints: CC = 234.234 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:29:56.557

I think this is your required solution:

```
def printme(x): 
    keys_list = [key for key, value in globals().iteritems() if value == x]
    print keys_list
    for key in keys_list:
        if id(globals()[key]) == id(x):
            result = "%s = %s" %(key, x)
            print result
            break

    return result 
```

for example if you declare a variable:

```
>>> c=55.6 
```

then result of **printme(c)** will be

```
>>> 'c = 55.6' 
```

*Note: This solution is based on globally unique id matching.*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T10:54:53.517

也许字典是解决问题的更好方法。假设您有几个要使用的名称-值对，您可以将它们放在`dict`：

```
params = {"CC": 1.2345, "ID": "Yo!", "foo": "bar"} 
```

然后，例如，您可以打印所有格式良好的名称和值，如下所示：

```
for key in params:
    print "{0} = {1}".format(key, params[key]) 
```

但是由于目前还不清楚你*为什么*要这样做，所以很难判断这是否是正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:23:19.493

使用全局变量来实现这一点，`func.__globals__.keys()`包含传递给的所有变量`func`，所以我过滤掉以开头的名称并将`__`它们存储在一个列表中。每次调用都会`func()`使用`func.__globals__.keys()`新变量名称更新，因此将新结果与刚刚添加的新变量中`varn`的旧结果进行比较。`glo`

```
glo=[]
def func(x):  
  global glo 
  varn=[x for x in func.__globals__.keys() if not x.startswith('__') and x!=func.__name__]
  new=list(set(varn)^set(glo))
  print("{0}={1}".format(new[0],x))
  glo=varn[:] 
```

**输出：**

```
>>> a=10
>>> func(a)
a=10
>>> b=20
>>> func(20)
b=20
>>> foo='cat'
>>> func(foo)
foo=cat
>>> bar=1000
>>> func(bar)
bar=1000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:45:13.197

如果我理解正确，你想要这样的东西吗？

```
def f(a):
    print('{0}: = {1}'.format(locals().keys()[0], a)) 
```

**更新：**

我知道该示例没有多大意义，因为它与以下内容基本相同：

```
def f(a):
    print('a: {0}'.format(a)) 
```

我只是想将 OP 指向 locals() 因为我不太明白他想要完成什么。

我想这更多的是他正在寻找的：

```
def f(**kwargs):
    for k in kwargs.keys():
        print('{0}: {1}'.format(k, kwargs[k]))

f(a=1, b=2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T11:01:15.677

如果我理解正确，您想要在当前范围内打印变量名称及其值的简写？**如果不使用解释器跟踪函数或 sys._getframe** ，这通常是不可能的，通常只有在你知道自己在做什么的情况下才应该使用它。原因是 print 函数没有其他方法可以从调用范围中获取本地变量：

```
def a():
    x = 1
    magic_print("x") #will not work without accessing the current frame 
```

没有这些你可以做的就是明确地将局部变量传递给这样的函数：

```
def printNameAndValue(varname, values):
    print("%s=%s" % (varname, values[varname]))

def a():
    x = 1
    printNameAndValue("x", locals())  #prints 'x=1' 
```

编辑：

有关使用检查模块（内部使用 sys._getframe）的解决方案，请参阅 catchemifyoutry 的答案。为了完整起见，直接使用跟踪功能的解决方案 - 如果您使用 python 2.0 并且检查不可用，则很有用；）

```
from sys import settrace

__v = {} #global dictionary that holds the variables

def __trace(frame, event, arg):
    """ a trace function saving the locals on every function call """
    global __v 
    if not event == "call":
        return __trace
    __v.update(frame.f_back.f_locals)

def enableTrace(f):
    """ a wrapper decorator setting and removing the trace """
    def _f(*a, **kwa):
        settrace(__trace)
        try:
            f(*a, **kwa)
        finally:
            settrace(None)
    return _f

def printv(vname):
    """ the function doing the printing """
    global __v 
    print "%s=%s" % (vname, __v[vname]) 
```

将其保存在模块中并像这样使用：

```
from modulenamehere import enableTrace, printv

@enableTrace
def somefunction():
    x = 1
    [...]
    printv("x") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T10:53:56.467

不完全是你想要的，但很容易做到：

```
def printme(**kwargs):
    for key, value in kwargs.items():
        print '%s=%s' % (key, value)
    return value

In [13]: printme(CC=1.23, DD=2.22)
CC=1.23
DD=2.22
Out[13]: 1.23 
```

# php - Jquery自动完成获取id cha

> ID：11291885
> 
> 赞同：0
> 
> 时间：2012-07-02T10:29:01.010
> 
> 标签：php, jquery, mysql

我用 jquery 自动完成这个代码，它就像 facebook 搜索功能现在问题是我正在获取用户 ID，我将它存储在隐藏的文本字段中，但是如果某些用户按下退格键，则 id 与我之前搜索过的旧用户保持相同存储id on select .. plust 我想限制用户不要继续，除了从数据库中选择任何用户.. 这是我的代码

```
 $(document).ready(function(){

   $("#searchbox").autocomplete("search.php", {

    width: 258,
    highlight: false,
    scroll: true,

    scrollHeight: 350,
    dataType: 'json',

    parse: function(data) {
            var array = new Array();
            for(var i=0;i<data.length;i++)
            {

            array[array.length] = { data: data[i], value:           data[i].name, result: data[i].name};

            }
            return array;
    },
    formatItem: function(row) {                     

    var output =  "<img class=img src='user_img/" + row.img + "'/> ";             
    output += "<span class=name>"+row.name+"</span><br/>";
    output += "<span class=small>"+row.country+"</span><br/>";

    return output;
    }

          }).result(function(event,item)
           {

           $('#temp').val(item.uid);

           });
         }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:16:45.990

使用了这种方法，它奏效了，谢谢大家没有帮助我:(

```
 select: function (event, ui) {
        var v = ui.item.value;
        $('#MessageTo').html("Something here" + v);
        $('#Hidden1').html("Something else here" + v);
        // update what is displayed in the textbox
        this.value = v; 
        return false;
    } 
```

# ios - 应用程序更新通知的文档

> ID：11291888
> 
> 赞同：4
> 
> 时间：2012-07-02T10:29:18.420
> 
> 标签：ios, app-store, apple-push-notifications

是否有任何文档说明当 Appstore 上的应用程序更新时，Appstore 本身会向用户发送有关更新的推送通知？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T14:07:53.857

您可以使用[Search API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)做到这一点。在您的应用中，启动后，在 AppStore 上查看您的应用的最新版本。像这样：

```
- (void) checkForUpdates
{
    NSString *jsonUrl = @"http://itunes.apple.com/search?term=yourAppName&entity=software&limit=1";
    NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:jsonUrl]];

    JSONDecoder *jsonKitDecoder = [JSONDecoder decoderWithParseOptions:JKParseOptionNone];
    NSObject *jsonObject = [jsonKitDecoder objectWithData:jsonData error:nil];
    int results = [[jsonObject valueForKey:@"resultCount"] intValue];

    if(results >0) // has results
    { 
        NSArray *results = [jsonObject valueForKey:@"results"];
        for(NSObject *aResult in results) 
        {
            NSString    *appStoreVersion = [aResult valueForKey:@"version"];
            NSString    *localVersion    = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];

            if(![appStoreVersion isEqualToString:localVersion])
            {
                 //there is an update available. Go crazy.
            }
        }
     }
} 
```

我为此使用了 JSONKit。你可以使用任何你喜欢的库来解析 Apple 检索到的 JSON。

注意：您可以使用它来通知用户在他打开应用程序时有更新。如果您想要在更新上线后立即通知用户的内容，则需要推送通知。

希望这可以帮助。

干杯!

# batch-file - 真正合并到 .bat 文件中

> ID：11291890
> 
> 赞同：0
> 
> 时间：2012-07-02T10:29:27.573
> 
> 标签：batch-file

如何在 .bat 文件中合并两个文本文件？或者至少如何在 .bat 文件中读取文件的下一行/测试结束？

是否可以使用 .bat 脚本合并两个文本文件？这个想法不是追加或连接，而是根据每行的内容执行合并操作。一个简化的例子是从两个排序文件中生成一个排序文件，就像在伪代码中一样（伪代码，因为我似乎找不到*读取下一行*并测试读取文件结尾的方法 - 在 for环形）

```
:TOP
 Set /p  Line1 Read_Line (file1)
:set /p  Line2 Read_Line (file2)
:TEST
 IF EOF(file1) GOTO  FINISH2
 IF EOF (file2) GOTO FINISH1
 IF  %Line1%  < %Line2% 
        (echo %Line1% - not in 2 >> File3
        set  /p Line1 =Read_Line (file1)
        GOTO TEST)
ELSE IF %Line1%  > %Line2% 
        (echo %Line2% - not in 1>> File3
        set  /p Line2=Read_Line (file2)
        GOTO TEST)
ELSE echo %Line1% in both >> File3
GOTO TOP
:FINISH1
echo %Line2% - not in 1>> File3
        set /p Line1=Read_Line (file1)
        IF NOT (EOF (File1)) 
                (echo %Line1% - not in 2 >> File3
                 GOTO FINISH1)
ELSE GOTO EOF
:FINISH2
           echo %Line2% - not in 1>> File3
        set /p Line2 =Read_Line (file2)
        IF NOT (EOF (File1) )
                (echo %Line2% - not in 1 >> File3
                 GOTO FINISH2) 
```

我尝试使用 for 循环，但在循环内分支似乎停止了循环。我尝试了各种方法（包括并行 .bat）来找到一种在文件内移动光标的方法`set` ，`<`但找不到正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:16:06.370

批处理确实是一种用于文本处理的糟糕“语言”。几乎你能找到的任何其他工具都比批处理更好（更容易开发和更快地执行）。我提供批处理解决方案是因为我喜欢挑战，但我总是会推荐一些其他语言或工具而不是批处理来进行文本处理。话虽如此...

假设两个源文件都已排序。

```
@echo off
setlocal enableDelayedExpansion

::define the files
set "in1=file1.txt"
set "in2=file2.txt"
set "out=file3.txt"

::define some simple macros
set "eof1=^!ln1^! gtr ^!cnt1^!"
set "eof2=^!ln2^! gtr ^!cnt2^!"
set "read1=if ^!ln1^! leq ^!cnt1^! set "txt1=" & <&3 set /p "txt1=" & set /a ln1+=1"
set "read2=if ^!ln2^! leq ^!cnt2^! set "txt2=" & <&4 set /p "txt2=" & set /a ln2+=1"
set "write1=echo(^!txt1^! - not in 2"
set "write2=echo(^!txt2^! - not in 1"
set "writeBoth=echo(^!txt1^! - in both"

::count the number of lines in each file
for /f %%N in ('find /v /c "" ^<"%in1%"') do set "cnt1=%%N"
for /f %%N in ('find /v /c "" ^<"%in2%"') do set "cnt2=%%N"

::setup redirection in outer block and merge the files in a loop
::The max number of iterations assumes there is no overlap (cnt1+cnt2)
::Break out of the loop as soon as both files have reached EOF.
set /a ln1=0, ln2=0, cnt=cnt1+cnt2
4<"%in2%" 3<"%in1%" (
  %read1%
  %read2%
  for /l %%N in (1 1 %cnt%) do (
    if %eof1% (
        if %eof2% goto :break
        %write2%
        %read2%
    ) else if %eof2% (
        %write1%
        %read1%
    ) else if .!txt1! lss .!txt2! (
        %write1%
        %read1%
    ) else if .!txt2! lss .!txt1! (
        %write2%
        %read2%
    ) else (
        %writeBoth%
        %read1%
        %read2%
    )
  )
) >"%out%
:break 
```

使用 SET /P 读取文件有以下限制：

*   两个文件中的行必须以`<carriage return><line feed>`字符结尾（Windows 样式）。它不适用于以`<line feed>`（Unix 风格）终止的行。
*   每行最多 1021 个字节（字符），不包括行终止符
*   尾随控制字符将从每行中删除。

* * *

编辑

如果您只是想创建一个没有重复的排序合并文档，那么我相信以下是[sean 方法](https://stackoverflow.com/a/11298874/1012053)的优化版本。它不如他的优雅，但我相信它要快得多。通过将 EOL 选项设置为 . 它还允许每行以任何字符开头`<line feed>`。请注意，此解决方案会从输出中删除所有空白行（就像 sean 一样）。可以添加额外的代码来保留一个空行。

```
@echo off
setlocal disableDelayedExpansion
set lf=^

::above 2 blank lines required
copy /b file1.txt+file2.txt file3.txt >nul
set "old="
(
  for /f eol^=^%lf%%lf%^ delims^= %%A in ('sort file3.txt') do (
    set "new=.%%A"
    setlocal enableDelayedExpansion
    if "!old!" neq "!new!" echo(!new:~1!
    for /f "delims=" %%B in ("!new!") do (
      endlocal
      set "old=%%B"
    )
  )
)>file4.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:08:08.107

2个步骤（不需要排序，因为`find`第2步检查新文件，只有在没有找到数据时才写一些东西）：

1.  合并文件：
    `copy file1.txt+file2.txt file3.txt`

2.  删除重复行（`/i`忽略大小写，省略 if`Fred`和`FRED`are to be treated as different）：

    ```
    @echo off
    for /f "tokens=* delims=" %%a in (file3.txt) do (
      find /i "%%a" file4.txt>>nul&&rem
      if errorlevel 1 echo %%a>>file4.txt
      ) 
    ```

结果文件是`file4.txt`

# python - Pyglet 行走动画。错误：“NoneType”对象没有属性“draw”

> ID：11291891
> 
> 赞同：1
> 
> 时间：2012-07-02T10:29:28.070
> 
> 标签：python, sprite, runtime-error, pyglet

此代码`assassin1.png`在黑色背景上显示图像。这个想法是，只要我按下键，角色就会移动并使用and`<right-direction>`显示动画。我已经能够移动角色并成功显示动画，只是不能同时显示两者。`assassin2.png``assassin3.png`

只要我不按键，以下代码就会运行`<right direction>`：

```
import pyglet

def sprite_type(type_ = "standing"):
    if type_ == "moving-forward":
        moving_forward_image_list = [pyglet.image.load('assassin2.png'), pyglet.image.load('assassin3.png')]
        moving_forward_animation = pyglet.image.Animation.from_image_sequence(moving_forward_image_list, 0.3) 
        return moving_forward_animation
    if type_ == "standing":
        standing_animation = pyglet.image.load("assassin1.png")
        return standing_animation

class Assassin(pyglet.sprite.Sprite):
    def __init__(self, batch, img):
        pyglet.sprite.Sprite.__init__(self, img, x = 50, y = 30)

    def stand(self, batch, img):
        self.batch = batch
        self.img = img

    def move(self, batch, img):
        self.batch = batch
        self.img = img      

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.player = Assassin(batch = self.batch_draw, img = sprite_type())
        self.fps_display = pyglet.clock.ClockDisplay()
        self.keys_held = []      
        self.schedule = pyglet.clock.schedule_interval(func = self.update, interval = 1/60.) 

    def on_draw(self): 
        self.clear()         
        self.fps_display.draw()
        self.batch_draw.draw()
        self.player.draw()  

    def on_key_press(self, symbol, modifiers):
        self.keys_held.append(symbol)
        if symbol == pyglet.window.key.RIGHT:
            self.player = self.player.move(batch = self.batch_draw, img = sprite_type("moving-forward"))
            print "The 'RIGHT' key was pressed"

    def on_key_release(self, symbol, modifiers):
        self.keys_held.pop(self.keys_held.index(symbol))
        self.player = self.player.stand(batch = self.batch_draw, img = sprite_type("standing"))

    def update(self, interval):
        if pyglet.window.key.RIGHT in self.keys_held:
            self.player.x += 50 * interval

if __name__ == "__main__":
    window = Game()
    pyglet.app.run() 
```

一旦我按下`<right-direction>`键，就会发生以下错误：

```
Traceback (most recent call last):
  File "ircex.py", line 55, in <module>
    pyglet.app.run()
  File "/usr/local/lib/python2.7/dist-packages/pyglet/app/__init__.py", line 264, in run
    EventLoop().run()
  File "/usr/local/lib/python2.7/dist-packages/pyglet/app/xlib.py", line 93, in run
    sleep_time = self.idle()
  File "/usr/local/lib/python2.7/dist-packages/pyglet/app/__init__.py", line 193, in idle
    window.dispatch_event('on_draw')
  File "/usr/local/lib/python2.7/dist-packages/pyglet/window/__init__.py", line 1219, in dispatch_event
    EventDispatcher.dispatch_event(self, *args)
  File "/usr/local/lib/python2.7/dist-packages/pyglet/event.py", line 349, in dispatch_event
    return getattr(self, event_type)(*args)
  File "pyglet-walk.py", line 37, in on_draw
    self.player.draw()  
AttributeError: 'NoneType' object has no attribute 'draw' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:33:14.573

在您的代码中，该`move()`方法返回`None`：

```
class Assassin(pyglet.sprite.Sprite):
    (...)

    def move(self, batch, img):
        self.batch = batch
        self.img = img 
```

然后在下面的行中设置`self.player`为返回值`player.move()`，即`None`：

```
self.player = self.player.move(batch = self.batch_draw, img = sprite_type("moving-forward")) 
```

这导致`AttributeError: 'NoneType' object has no attribute 'draw'`，因为`self.player`is`None`并且您尝试调用`draw()`它。

# html - asp .net mvc 在视图中显示来自本地计算机的图像

> ID：11291893
> 
> 赞同：0
> 
> 时间：2012-07-02T10:29:33.223
> 
> 标签：html, asp.net-mvc

所以，我的电脑上有一张图片。我用简单的代码制作了一个html页面， src="file:\\\C:\...\file.png"

没关系，如图所示。

然后我在 mvc-view 中编写相同的代码。图片未显示，萤火虫显示灰色 img 代码。我已经看到了一些有关 Url.Content 的提示，但它们没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:38:22.660

如果您在磁盘上创建一个 HTML 文件并在浏览器中打开它（使用诸如 file:///mypage.html 之类的 URL），那么它可以直接从您的硬盘提供图像（我相信）并且没有 Web 服务器涉及。

但是，一旦您开始使用 ASP.NET，您就不再通过文件 URL 进行查看，而是通过本地 Web 服务器（例如`http://localhost/mypage`），并且只能提供部署在您的 Web 服务器上的图像。这仍然可以轻松完成，将图像拖放到您的 Visual Studio 解决方案中。

# visual-c++ - 为什么我可以在使用 Visual C++ 编译的 .exe 文件中看到类/结构名称？

> ID：11291895
> 
> 赞同：3
> 
> 时间：2012-07-02T10:29:38.233
> 
> 标签：visual-c++, mfc, obfuscation, exe, reverse-engineering

查看已编译的**relese .exe 文件二进制文件**时，我可以在其中找到类/结构名称！这很奇怪 - 显然这些符号没有必要。我担心的是，这些符号可用于对我的软件进行逆向工程，给软件许可保护带来很大风险。

比如我可以找到文本.?AVCMySecureKeyManager（原来的类名是CMySecureKeyManager，貌似所有名字都加了前缀“.?AV”），很容易猜到我的代码在做什么，对吧？..看起来像一个open黑客的大门。

特别是，我可以说我已经**启用了所有可能的优化**Visual C++ 编译器/链接器选项，**关闭了所有 Browse/Debug Info generation**，也许我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:06:43.907

您会看到[RTTI](http://www.openrce.org/articles/full_view/23)（运行时类型信息）。如果您不使用`dynamic_cast`或`typeid`在您的代码中，通常可以安全地关闭它。请注意，异常总是使用 RTTI（用于`catch`语句匹配），并且无法为它们禁用它。

如果您确实需要`dynamic_cast`，那么您可以在编译后从 EXE 中清除名称。该代码不依赖于实际的名称字符串，而只依赖于它们的地址。

也就是说，类名虽然有用，但在逆向工程中并不重要。不要依赖他们的缺席作为保证。

# mysql - MySQL - 在给出语法错误的代码中创建存储过程

> ID：11291899
> 
> 赞同：0
> 
> 时间：2012-07-02T10:30:09.090
> 
> 标签：mysql

在代码中执行 CREATE PROC 时，我一直在 MYSQL（5.2 版）中遇到语法错误，这让我感到困惑。

MySQL Proc 代码：

```
DELIMITER //

CREATE PROCEDURE Delete_BillOfMaterialsDetail
(IN InOrderDate DATE,     
IN InProductCode varchar(40),     
IN InRawMaterialProductCode varchar(40) 
) 
BEGIN     
IF EXISTS
(SELECT * FROM basf_rawmaterialplanning.BillOfMaterialsDetail          
WHERE OrderDate = InOrderDate  
and ProductCode = InProductCode          
and RawMaterialProductCode = InRawMaterialProductCode)  
THEN  
DELETE FROM basf_rawmaterialplanning.BillOfMaterialsDetail
WHERE OrderDate = InOrderDate    
AND ProductCode = InProductCode
AND RawMaterialProductCode = InRawMaterialProductCode;
END IF; 
END //

DELIMITER ; 
```

我使用字符串数据类型构建它，然后针对给出语法错误的数据库执行它。

我不确定我做错了什么？

*   谢谢伙计们，我想通了，将发布答案，以便 StackOverflow 允许我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:00:22.117

只需单独执行更改分隔符的命令，然后执行存储过程创建命令。

系统目前认为它是一个单一的命令，因此错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:00:19.263

试试这个代码 -

```
CREATE PROCEDURE Delete_BillOfMaterialsDetail3(
  IN InOrderDate DATE,
  IN InProductCode varchar(40),
  IN InRawMaterialProductCode varchar(40)) 
DELETE FROM basf_rawmaterialplanning.BillOfMaterialsDetail
WHERE OrderDate = InOrderDate    
AND ProductCode = InProductCode
AND RawMaterialProductCode = InRawMaterialProductCode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:23:10.227

谢谢大佬，终于弄明白了

我在 MySqlScript 对象中添加了我的脚本并使用该类执行，100% 工作，没有任何语法错误

# makefile - Makefile 负通配符

> ID：11291901
> 
> 赞同：1
> 
> 时间：2012-07-02T10:30:16.127
> 
> 标签：makefile

我在 Makefile 中使用通配符来选择所有以*.c*后缀结尾的文件。看起来像那样`SRCS := $(wildcard *.c)`。在 Makefile`SRCS`的其他部分使用。

我现在需要做的是防止给定文件包含在 SRCS 变量中。我发现的方法是将 shell 指令与一些控制台命令结合起来：`SRC :=$(shell find . -name "*.c" | grep -v "file_to_exclude.c" | xargs)`

这很好用，但我想知道是否还有其他比只使用通配符更优雅的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T10:41:38.497

您可以使用*$(filter-out P,T)*命令...

```
SRCS := $(filter-out icky-file.c,$(wildcard *.c)) 
```

当然，使用 shell 脚本几乎可以将事情提升到另一个层次，因为这样您就不会受到 Make 的命令的限制。

有一堆不想要的东西吗？

```
NOWANTS := one.c two.c three.c
SRCS := $(filter-out $(NOWANTS),$(wildcard *.c)) 
```

# java - 使用 unpack200 后验证错误

> ID：11291909
> 
> 赞同：1
> 
> 时间：2012-07-02T10:30:36.253
> 
> 标签：java, compression, japplet, jarsigner

尝试加载使用[pack200](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/pack200.html)压缩的 jar 时出现问题。发现我的jar文件使用后无法验证的错误`unpack200`。

这是场景：

1.  创建密钥库`keytool -keystore key -genkey -alias hj`
2.  在罐子上签名`jarsigner -keystore key HelloJApplet.jar hj`
3.  压缩那个jar文件：`pack200 HelloJApplet.jar.pack.gz HelloJApplet`
4.  解压并重命名：`unpack200 HelloJApplet.jar.pack.gz HelloJAppletUnpack.jar`
5.  验证罐子：`jarsigner -verify HelloJApplet.jar`和`jarsigner -verify HelloJAppletUnpack.jar`

对于`HelloJApplet.jar`它显示`jar verified.`并`HelloJAppletUnpack.jar`显示一个错误`jarsigner: java.lang.SecurityException: SHA-256 digest error for org/ff/ffw/app/ HelloJApplet.class`

**到目前为止我所做的有什么问题吗？** *请纠正我遗漏或错误的观点。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:33:27.897

对pack200 jar签名，需要pack+unpack（即重新打包），签名再打包。请参阅[http://wiki.eclipse.org/Pack200#Compression_and_Signing](http://wiki.eclipse.org/Pack200#Compression_and_Signing)或[http://www.java.net/node/679859](http://www.java.net/node/679859)

```
pack200 --repack b.jar a.jar
sign b.jar 
```

（ps 在 5.0 中有一个错误并在 5.0u1 中修复。如果需要，请升级）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T03:40:42.820

**在 WINDOWS 上不是这样**。我刚刚确认了 pack200 的一个错误。

在 Windows 上，您必须运行该`pack200.exe --repack`命令**两次**。例如：

```
pack200.exe --repack A.jar
pack200.exe --repack B.jar A.jar
sign B.jar
pack200.exe B.pack.gz B.jar 
```

此外，**第二个 repack 必须有 2 个参数**。以下序列将**失败**：

```
pack200.exe --repack A.jar
pack200.exe --repack A.jar
>Skipping because already repacked: A.jar
sign A.jar
pack200.exe A.pack.gz A.jar
PACKED JAR IS STILL BAD 
```

# java - 如何使用 java 中的 jsoup 拆分从 html 文档中获取的字符串？

> ID：11291911
> 
> 赞同：0
> 
> 时间：2012-07-02T10:31:03.443
> 
> 标签：java, html, jsoup

> **可能重复：**
> [如何使用任何空白字符作为分隔符拆分字符串？](https://stackoverflow.com/questions/225337/how-do-i-split-a-string-with-any-whitespace-chars-as-delimiters)

```
<div class="listPrice" style="font-size: 12px; padding: 10px 0 0 0;"> HSN Price:&nbsp;$9.95 </div> 
```

嗨，我想用它的空格来分割它，但是“”给我带来了一些问题。我正在使用 jsoup 在 java 编写代码。我发送`element.text().split(" ");`但这个或`element.text().split("&nbsp;");`不能执行在“”你帮我解决一下这个情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:57:19.933

如果价格是你想要的，你可以尝试类似的东西

```
Matcher matcher = Pattern.compile("(\\$.*)\\s*</div>").matcher(element.text());
String price = null;
if (matcher.find()) {
  price = matcher.group(1);
} 
```

# android - 从 Android 项目中删除不必要的代码

> ID：11291913
> 
> 赞同：0
> 
> 时间：2012-07-02T10:31:23.880
> 
> 标签：android, class, project

我知道这是一个非常不寻常的问题，但请耐心等待。

我收到了一个由 Android 新手开发的项目。该项目有**135 个**Java 文件。我敢肯定，其中很多都没有在应用程序中使用。

我想知道的是，有没有办法在不测试应用程序的每个功能一百次的情况下检查正在使用的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:36:59.490

构建您的代码并在构建步骤中包含 ProGuard；ProGuard 将丢弃未使用的类/方法（除了那些已配置为保留的类/方法，例如 Android 可能需要保留的类/方法）。检查 ProGuard 的记录输出以查看它做了什么，并手动删除这些方法/类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:39:36.313

这不是解决方案，而是保持代码整洁和缩进的好方法：

为了清理导入部分，只导入您实际使用的内容，请按：

为 mac

```
 CMD + SHIFT + O 
```

或用于窗户

```
 CTRL + SHIFT + O 
```

为了缩进您的代码和布局，请按：

为 mac

```
 CMD + SHIFT + F 
```

或用于窗户

```
 CTRL + SHIFT + F 
```

我再说一遍，这不是你问题的解决方案，但它可以帮助很多！

# silverlight - 我如何知道 ListBox 何时在 Silverlight 中完成渲染？

> ID：11291920
> 
> 赞同：7
> 
> 时间：2012-07-02T10:32:00.153
> 
> 标签：silverlight, listbox, rendering

我需要知道 a`ListBox`第一次完成渲染的时间，以便我可以将其滚动到顶部以向用户展示列表中的第一项。

我有一个`ListBox`使用`RichTextBox`它的`DataTemplate`：

```
<DataTemplate x:Key="HelpTextTemplate">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        ...
        <ContentControl>
            ...
            <RichTextBox x:Name="HelpTextContent" Grid.Row="1"
                         Tag="{Binding Path=HelpObject.Text, Mode=TwoWay}"
                         TextWrapping="Wrap"
                         HorizontalAlignment="Stretch"
                         Margin="0,0,20,0"
                         Loaded="RichTextBox_Loaded"
                         ContentChanged="RichTextBox_ContentChanged"
                         SelectionChanged="RichTextBox_SelectionChanged"/>
            ...
        </ContentControl>
        ...
    </Grid>
</DataTemplate> 
```

`ListBox`绑定到`ObservableCollection`一个.

我在滚动时遇到问题`ListBox`- 如果 的高度`RichTextBox`大于用户的高度，`ListBox`则用户无法滚动到`RichTextBox`. 将`ListBox`跳转到列表中的下一项。滚动条滑块的高度也会改变。`RichTextBox`这是因为只有在实际渲染时才计算实际高度。当它离开屏幕时，高度会恢复为较小的值（我认为代码假设文本可以全部放在一行上，而不必被换行）。

我将这些问题追溯到`ListBox`使用 a`VirtualisingStackPanel`来绘制项目。当我用简单的替换它时，`StackPanel`这些问题就消失了。

然后这产生了我现在遇到的问题，即`ListBox`在初始加载时滚动到列表底部。和事件`Loaded`发生在数据加载之前。我尝试在初始化时监听视图模型上的事件：`LayoutUpdated``ListBox``PropertyChanged``ObservableCollection`

```
void editViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    switch (e.PropertyName)
    {
        case "ListDataSource":
            // Try to scroll to the top of the ListBox
            break;
    }
} 
```

这也太早了。该列表在此事件被触发并导致滚动到底部**后呈现。**`ListBox`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:39:33.090

尝试在 Loaded 处理程序上滚动，但通过 Dispatcher 将其延迟一点。类似的东西

```
void OnLoaded(...)
{
   Dispatcher.BeginInvoke(() => {/*Scroll your ListBox here*/});
} 
```

它可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:15:20.880

最后我不得不使用一个kludge：

```
private System.Threading.Timer timer;
void editViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    switch (e.PropertyName)
    {
        case "ListDataSource":
            TimerCallback callback = TimerResult;
            timer = new Timer(callback, null, 750, 0);
            break;
    }
}

private void TimerResult(Object stateInfo)
{
    Dispatcher.BeginInvoke(() =>
    {
        if (this.ItemsList.Items.Count > 0)
        {
            this.ItemsList.UpdateLayout();
            this.ItemsList.SelectedIndex = 0;
            this.ItemsList.ScrollIntoView(this.ItemsList.Items[0]);
        }
    });

    timer.Dispose();
} 
```

如果有人知道更好的方法，请立即发布您的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:07:06.427

```
public class AutoScrollBehavior : Behavior<ListBox>
    {
        #region Properties

        public object ItemToScroll
        {
            get { return GetValue(ItemToScrollProperty); }
            set { SetValue(ItemToScrollProperty, value); }
        }

        public static readonly DependencyProperty ItemToScrollProperty = DependencyProperty.Register("ItemToScroll", typeof(object), typeof(AutoScrollBehavior), new PropertyMetadata(ItemToScrollPropertyChanged));

        private static void ItemToScrollPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ListBox lb = ((AutoScrollBehavior)d).AssociatedObject;
            lb.UpdateLayout();
            ((AutoScrollBehavior)d).AssociatedObject.ScrollIntoView(e.NewValue);
        }
        #endregion
    } 
```

然后在 XAML 中用作

```
<ListBox SelectedItem="{Binding SelectedItemFromModel, Mode=TwoWay}">
<i:Interaction.Behaviors>
                                                                <Behaviors:AutoScrollBehavior ItemToScroll="{Binding SelectedItemFromModel}"/>
                                                            </i:Interaction.Behaviors>
</ListBox> 
```

在某些命令上，您应该能够控制和设置视图模型的 SelectedItemFromModel 属性。

# scala - Scala中与图相关的列表的拓扑排序

> ID：11291926
> 
> 赞同：0
> 
> 时间：2012-07-02T10:32:21.180
> 
> 标签：scala, graph, topological-sort

我有一个图结构如下：

```
class Graph {
  private var nodes: Set[Node] = Set.empty[Node]
  def addEdges(edges: (Node, Node)*) {
    for ((a, b) <- edges) {
      nodes ++= List(a, b)
      a addDst b
    }
  }

  override def toString = {
    val sb = new StringBuilder
    for (node <- nodes if node.dst.toList.sortWith(ordered).nonEmpty)
      sb ++= "%s -> %s\n" format (node.toString, node.dst.mkString(", "))
    sb.toString
  }

  def ordered(a: Node, b: Node): Boolean = {
    var dst = a.dst
    while (dst.nonEmpty) {
      if (dst contains b)
        return true
      dst = dst.flatMap(_.dst)
    }
    return false
  }
}

trait Node {
  def dst = _dst
  private var _dst: Set[Node] = Set.empty[Node]
  def addDst(that: Node) {
    this._dst += that
  }
}

class CharNode(val n: Char) extends Node {
  override def toString = n.toString
} 
```

现在我想对包含其他类实例的列表进行排序，这些类实例包含与图拓扑相关的节点：

```
object Main extends App {
  val graph = new Graph
  val d = new CharNode('d')
  val e = new CharNode('e')
  val f = new CharNode('f')
  val g = new CharNode('g')
  val i = new CharNode('i')
  val l = new CharNode('l')

  graph.addEdges(
    d -> l,
    e -> i,
    i -> f,
    f -> g
  )

  case class Other(s: String, node: Node)

  val other = List(Other("wb2", f), Other("wa1", d), Other("wb1", e))
  println(other.sortWith { case (o1, o2) => graph.ordered(o1.node, o2.node) }.mkString("\n"))
} 
```

我在一个 List 上使用 sortWith 和图形的有序方法。

输出是：

```
Other(wb2,f)
Other(wa1,d)
Other(wb1,e) 
```

这是错误的，因为**f在图中的****e**之后。

那么为什么这是错误的呢？有序方法错了吗？还是我犯了其他错误？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:24:30.150

如果您快速“调试”您的`Graph.ordered`方法：

```
def ordered(a: Node, b: Node): Boolean = {
  println("[ordered] a = %s, b = %s".format(a, b))
  var dst = a.dst
  while (dst.nonEmpty) {
    if (dst contains b)
      return true
    dst = dst.flatMap(_.dst)
  }
  return false
} 
```

你会注意到`f`并且`e`没有直接比较：

```
[ordered] a = d, b = f
[ordered] a = f, b = d
[ordered] a = e, b = d
[ordered] a = d, b = e 
```

考虑到 MvG 的评论，我认为这是由于假设订单是全部的——而你的不是。但是，我无法找到使该假设明确的参考，无论是对于来自`SeqLike`哪里的任何方法，也不是对于似乎在内部使用的 for 。`sortWith``java.util.Arrays.sort``sortWith`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:17:37.087

我想出了基于图的拓扑排序实现排序：

```
object Main extends App {
  val graph = new Graph
  val d = new CharNode('d')
  val e = new CharNode('e')
  val f = new CharNode('f')
  val g = new CharNode('g')
  val i = new CharNode('i')
  val l = new CharNode('l')

  graph.addEdges(
    d -> l,
    e -> i,
    i -> f,
    f -> g
  )

  case class Other(s: String, node: Node)

  val other = List(Other("wb2", f), Other("wa1", d), Other("wb1", e))
  println(other.sorted(graph.ordering[Other](_.node)).mkString("\n"))

}

class Graph {
  private var nodes: Set[Node] = Set.empty[Node]
  def addEdges(edges: (Node, Node)*) {
    for ((a, b) <- edges) {
      nodes ++= List(a, b)
      a addDst b
    }
  }

  def ordering[T](f: T => Node = (x: Node) => x) = {
    import collection.mutable
    val inDegrees = mutable.HashMap.empty ++ nodes.map(n => n -> n.src.size)
    val sorted = new mutable.ListBuffer[Node]()
    val zeroInDegree = mutable.Stack[Node]()
    zeroInDegree pushAll inDegrees.filter(_._2 == 0).keys
    while (zeroInDegree.nonEmpty) {
      val next = zeroInDegree.pop
      sorted += next

      for (after <- next.dst) {
        val count = inDegrees(after) - 1
        if (count == 0) zeroInDegree push after
        inDegrees(after) = count
      }
    }

    assert(sorted.toSet == nodes)

    new Ordering[T] {
      val lookup = (sorted zipWithIndex).toMap
      def compare(a: T, b: T) = lookup(f(a)) compare lookup(f(b))
    }
  }
}

trait Node {
  var dst: Set[Node] = Set.empty[Node]
  var src: Set[Node] = Set.empty[Node]
  def addDst(that: Node) {
    this.dst += that
    that.src += this
  }
}

class CharNode(val n: Char) extends Node {
  override def toString = n.toString
} 
```

# python - 将 Matlab 代码翻译成 Numpy

> ID：11291931
> 
> 赞同：1
> 
> 时间：2012-07-02T10:33:04.680
> 
> 标签：python, matlab, numpy, porting

我刚开始将Matlab代码翻译成numpy，如何在python中编写以下代码

```
InputVec = [2,3,4]
InputVariable(1,:)=InputVec; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:42:14.243

根据[Numpy for Matlab Users](http://www.scipy.org/NumPy_for_Matlab_Users/#head-0c3c49ec7eef424bd3d361e5d8e2955f533750d6)，该代码将变为：

```
InputVec = np.array([2, 3, 4])
InputVariable[0,:] = InputVec 
```

唯一可能令人惊讶的是，根据 Python 约定，numpy 数组的索引从 0 开始，而不是像在 Matlab 中那样从 1 开始。但是，鉴于该链接中的表格和 Python 的合理工作知识，从 Matlab 翻译，至少是这样的一小段代码，应该是相当微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:08:45.607

将 Matlab 代码翻译成 Python 代码（使用 numpy）通常非常容易。

一旦您了解了两种脚本语言之间的少数（可能是 10 种）语法差异，您就不会有任何问题。

查看此页面的“线性代数等效项”部分：

[http://www.scipy.org/NumPy_for_Matlab_Users/](http://www.scipy.org/NumPy_for_Matlab_Users/)

唯一非常重要的事情是你的 python 代码开始于：

```
import numpy as np 
```

# java - Spring中的@RequestBody和@ResponseBody注解

> ID：11291933
> 
> 赞同：156
> 
> 时间：2012-07-02T10:33:13.630
> 
> 标签：java, spring, spring-mvc, annotations

有人可以解释Spring 3 中的`@RequestBody`和注释吗？`@ResponseBody`它们是干什么用的？任何例子都会很棒。

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-07-02T10:37:36.733

文档中有一个名为[16.3.3.4 Mapping the request body with the @RequestBody annotation](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestbody)的完整部分。还有一个叫做[16.3.3.5 Mapping response body with the @ResponseBody annotation](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-responsebody)。我建议你查阅这些部分。也相关：[`@RequestBody`](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/web/bind/annotation/RequestBody.html)javadocs，[`@ResponseBody`](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/web/bind/annotation/ResponseBody.html)javadocs

用法示例如下所示：

使用 JQuery 之类的 JavaScript 库，您可以像这样发布 JSON 对象：

```
{ "firstName" : "Elmer", "lastName" : "Fudd" } 
```

您的控制器方法如下所示：

```
// controller
@ResponseBody @RequestMapping("/description")
public Description getDescription(@RequestBody UserStats stats){
    return new Description(stats.getFirstName() + " " + stats.getLastname() + " hates wacky wabbits");
}

// domain / value objects
public class UserStats{
    private String firstName;
    private String lastName;
    // + getters, setters
}
public class Description{
    private String description;
    // + getters, setters, constructor
} 
```

现在，如果您的类路径中有[Jackson](http://jackson.codehaus.org/)（并且有[`<mvc:annotation-driven>`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-enable)设置），Spring 会将传入的 JSON 转换为来自帖子正文的 UserStats 对象（因为您添加了`@RequestBody`注释）并将返回的对象序列化为 JSON（因为您添加了`@ResponseBody`注解）。所以浏览器/客户端会看到这个 JSON 结果：

```
{ "description" : "Elmer Fudd hates wacky wabbits" } 
```

有关完整的工作示例，请参见我以前的答案：[https ://stackoverflow.com/a/5908632/342852](https://stackoverflow.com/a/5908632/342852)

注意：RequestBody / ResponseBody 当然不限于 JSON，两者都可以处理多种格式，包括纯文本和 XML，但 JSON 可能是最常用的格式。

* * *

## 更新

从 Spring 4.x 开始，您通常不会`@ResponseBody`在方法级别使用，而是`@RestController`在类级别使用，效果相同。

这是来自官方[Spring MVC 文档](https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-controller)的引用：

> `@RestController`是一个[组合注解](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-meta-annotations)，它本身带有*元注解* ，`@Controller`并`@ResponseBody`指示一个控制器，其每个方法都继承类型级别的`@ResponseBody`注解，因此，直接写入响应正文而不是视图分辨率并使用 HTML 模板进行渲染。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-01-13T08:32:36.737

**[@RequestBody](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestBody.html)**：指示方法参数的注解应绑定到 HTTP 请求的正文。

例如：

```
@RequestMapping(path = "/something", method = RequestMethod.PUT)
public void handle(@RequestBody String body, Writer writer) throws IOException {
    writer.write(body);
} 
```

**[@ResponseBody](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/ResponseBody.html)**注释可以放在方法上，并指示返回类型应直接写入 HTTP 响应正文（而不是放在模型中，或解释为视图名称）。

例如：

```
@RequestMapping(path = "/something", method = RequestMethod.PUT)
public  @ResponseBody String helloWorld() {
    return "Hello World";
} 
```

或者，我们可以使用[@RestController](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html)注解代替`@Controller`注解。这将消除使用`@ResponseBody`.

[更多细节](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestbody)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-09-04T02:53:13.177

下面是 Java 控制器中的方法示例。

```
@RequestMapping(method = RequestMethod.POST)
@ResponseBody
public HttpStatus something(@RequestBody MyModel myModel) 
{
    return HttpStatus.OK;
} 
```

通过使用 @RequestBody 注释，您将使用您在系统中创建的模型映射您的值，以处理任何特定的调用。通过使用@ResponseBody，您可以将任何内容发送回生成请求的地方。无需编写任何自定义解析器等即可轻松映射这两件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-05T11:19:51.530

```
package com.programmingfree.springshop.controller;

import java.util.List;

import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

import com.programmingfree.springshop.dao.UserShop;
import com.programmingfree.springshop.domain.User;

@RestController
@RequestMapping("/shop/user")
public class SpringShopController {

 UserShop userShop=new UserShop();

 @RequestMapping(value = "/{id}", method = RequestMethod.GET,headers="Accept=application/json")
 public User getUser(@PathVariable int id) {
  User user=userShop.getUserById(id);
  return user;
 }

 @RequestMapping(method = RequestMethod.GET,headers="Accept=application/json")
 public List<User> getAllUsers() {
  List<User> users=userShop.getAllUsers();
  return users;
 }

} 
```

在上面的示例中，他们将显示所有用户和特定 id 详细信息，现在我想同时使用 id 和 name，

1) localhost:8093/plejson/shop/user <---此链接将显示所有用户详细信息
2) localhost:8093/plejson/shop/user/11 <----如果我在链接中使用 11 表示，它将显示特定用户 11 的详细信息

现在我想同时使用 id 和 name

localhost:8093/plejson/shop/user/11/raju <-----------------这样意味着我们可以使用其中的任何一个，请帮帮我.... .

# r - foreach - dopar 不启动工人

> ID：11291937
> 
> 赞同：1
> 
> 时间：2012-07-02T10:33:32.017
> 
> 标签：r, foreach, domc

我想使用 doMC 引擎运行以下代码：

```
who_wins<-function(probs_a,probs_b,delta_order=0,delta_down=0){
  #browser()
  team_a<-runif(5,0,1)
  team_b<-runif(5,0,1)
  sya<-syb<-0
  for(i in 1:5){
    for(j in 1:2){
      if(j==1){
        if(sya<syb){
          team_a[i]<-(1-delta_down)*team_a[i]
        } 
        team_a[i]<-(1-(i-1)*delta_order)*team_a[i]
        sya<-sya+(team_a[i]<probs_a[i])
      }
      else{
        if(syb<sya){
          team_b[i]<-(1-delta_down)*team_b[i]
        } 
        team_b[i]<-(1-(i-1)*delta_order)*team_b[i]
        syb<-syb+(team_b[i]<probs_b[i])
      }
    }
  }
  if(sya>syb){
    return(1)
  }
  else if(sya<syb){
    return(2)
  }
  else {
    return(0)
  }
}

library(doMC)
registerDoMC(8)

probs_a<-seq(.6,.8,length.out=5)
probs_b<-probs_a[5:1]
nsim<-20000

results<-foreach(icount(nsim), .combine=c) %dopar% {
    return(who_wins(probs_a,probs_b))
} 
```

问题是在第一个工作人员启动后几秒钟，引擎会尝试启动剩余的工作人员。我看到所有处理器都出现了峰值，但它们都很快死掉，即使是第一个也是如此。然后，启动一个新进程，剩余的代码将通过这个单独的工作人员运行。

我尝试过使用不同的代码，引擎运行良好。但是对于这个特定的规则，它不会。

谁能告诉我发生了什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:21:37.867

在循环中添加一个`Sys.sleep(0.01)`，我看到所有 8 个进程都“忙”了那个。完成后，主进程会保持忙碌一段时间。我假设从各个进程收集数据并将其组合成单个结果的开销与并行计算的实际收益具有相似的规模。如果您简单地将“计算”更改为`return(1)`，您会发现这需要与您的计算一样长的时间，因此时间不是花在工作负载上，而是组装结果。

既不`.inorder=FALSE`也不使用`doParallel`而不是`doMC`改变这一点。但是，我认为这是`foreach`包中的一个问题，因为`mclapply`开销显着减少：

```
result <- unlist(mclapply(1:nsim, function(i) {
   return(who_wins(probs_a, probs_b))
}, mc.cores=8)) 
```

# java - Hibernate 不会自动创建表

> ID：11291940
> 
> 赞同：14
> 
> 时间：2012-07-02T10:33:43.907
> 
> 标签：java, spring, hibernate

我有带有 Hibernate 和 Spring 框架的 Maven 项目。我希望 Hibernate 自动创建表，但是所有现有的表都被删除并且没有创建所需的表。会话工厂初始化期间没有抛出异常，但是当我尝试保存`Player`实体时，抛出异常：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：表'billboarddb.player'不存在

如果我手动创建表并将属性更改`hibernate.hbm2ddl.auto`为`"validate"`，那么一切正常。你有什么想法，为什么 Hibernate 不创建表？

弹簧配置文件：

```
<context:component-scan  base-package="org.meluk.billboard.business.controller" />
<tx:annotation-driven transaction-manager="txManager" />
<bean id="propertyConfigurer"  class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations" >
        <list>
            <value>/WEB-INF/config/jdbc.properties</value>
        </list>
    </property>
</bean>
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${hibernate.connection.driver_class}" />
    <property name="url" value="${hibernate.connection.url}" />
    <property name="username" value="${hibernate.connection.username}" />
    <property name="password" value="${hibernate.connection.password}" />
</bean>
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" >
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation" value="/WEB-INF/hibernate.cfg.xml" />
    <property name="packagesToScan" value="org.meluk.billboard.jpa" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
            <prop key="hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</prop>
            <prop key="hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</prop>
            <prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>
            <prop key="hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements}</prop>
        </props>
    </property>
</bean>

<bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

jdbc.properties 文件：

```
hibernate.connection.driver_class=com.mysql.jdbc.Driver
hibernate.connection.url=jdbc:mysql://127.0.0.1:3306/BillboardDB
hibernate.connection.username=root
hibernate.connection.password=1234
hibernate.default_schema=BillboardDB
hibernate.dialect=org.hibernate.dialect.MySQLInnoDBDialect
hibernate.hbm2ddl.auto=create
hibernate.show_sql=true
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=20
hibernate.c3p0.timeout=1800
hibernate.c3p0.max_statements=50 
```

休眠依赖：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-entitymanager</artifactId>
  <version>${hibernateVersion}</version>
</dependency>
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-c3p0</artifactId>
  <version>${hibernateVersion}</version>
</dependency>
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-tools</artifactId>
  <version>${hibernateToolsVersion}</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-02T13:07:51.120

我解决问题。Hibernate 无法使用 MysqlInnoDBDialect 创建表。现在我改用 MySQL5InnoDBDialect。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T10:42:29.583

将以下条目添加到 hibernateProperties 道具。

```
<prop key="hibernate.hbm2ddl.auto">create</prop> 
```

# c# - TreeView 随机无法显示新添加的节点

> ID：11291941
> 
> 赞同：4
> 
> 时间：2012-07-02T10:33:47.530
> 
> 标签：c#, windows, winforms, treeview

我有一个`TreeView`WinForm 应用程序，我正在使用`add`,`reorder`和`delete`方法来添加新节点、重新排序现有节点和删除旧注释。

有时当我添加一个新项目时，它会立即在 中显示`TreeView`，但是当我添加下一个节点时它会正确显示*。*它似乎是随机发生的，因此很难找到根本原因。

即使节点未在 UI 中正确显示，节点计数也是正确的。

```
TreeView1.BeginUpdate();
TreeView1.Nodes.Add("P1", "Parent");

foreach(User u in items)
{
    if( condition)
    {
        node.Text =u.sNodeText; 
        node.Tag = u;
        node.Text = u.sNodeText;                    
        GetChildren(node);
        TreeView1.Nodes["P1"].Nodes.Add((TreeNode)node.Clone());
    }
}            
TreeView1.ExpandAll();
TreeView1.EndUpdate();           
TreeView1.Refresh(); 
```

谁能回答这个问题？我认为这个问题并非毫无意义。这是 GetChildren 方法。

```
 private void GetChildren(TreeNode node)
    {
        TreeNode Node = null;
        User nodeCat = (User)node.Tag;

        foreach (User  cat in items)
        {
            if (cat.sParentID == nodeCat.sID)
            {
                Node = node.Nodes.Add(cat.sNodeText);
                Node.Tag = cat;
                GetChildren(Node);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:22:21.037

你试过`Invalidate()`对`Refresh()`吗？Refresh 只重绘客户端区域，而 Invalidate 重绘整个控件。这只是在黑暗中拍摄......我以前从未遇到过这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:15:57.213

首先，调用 GetChildren 方法后，为什么还要将节点添加到树中？如果它的 parentID 为空（或 null 或 0，取决于它的类型），你应该只将它添加到树中。此外，将`EnsureVisible`方法添加到新添加的节点，并删除克隆：

```
...
    if (u.sParentID==null)
    {
    TreeView1.Nodes["P1"].Nodes.Add(node); 
    node.EnsureVisible();
    }
... 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:29:56.633

如果我没记错的话是不是有

```
TreeView1.BeginUpdate() method that you could use and at the end utilize the 
TreeView1.EndUpdate(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T03:51:13.040

我认为这可能与使用 Clone 有关，它会产生**浅拷贝**。由于使用了 Add 方法，节点计数会更新，但“新”节点仍然具有创建它的节点的引用，因此它不是唯一对象。尝试创建一个深层副本，看看效果如何。

例如：

```
public TreeNode DeepNodeClone(TreeNode src)
{
MemoryStream ms = new MemoryStream();
BinaryFormatter bf = new BinaryFormatter();
bf.Serialize(ms, src);
ms.Position = 0;
object obj = bf.Deserialize(ms);
ms.Close();
return (TreeNode)obj;
} 
```

然后将此节点作为子节点添加到所需的父节点。

# android - 带有增益调整的 AudioRecord 在三星设备上不起作用

> ID：11291942
> 
> 赞同：5
> 
> 时间：2012-07-02T10:33:54.777
> 
> 标签：android, audio, audio-recording, android-audiorecord

我已经编写了使用`AudioRecord`和在 SD 卡上写入文件时录制音频文件的代码，我正在制作两个版本。

**版本 1** 录制的文件按原样保存在 SD 卡上。

**版本 2** 我在录制的文件上应用增益功能并保存在 SD 卡上。

这在索尼爱立信手机上效果很好。音量也大大提高。

但我正在努力让它在三星设备上运行。

当我播放录制的文件时，它听起来像会说话的汤姆：P

最初我认为三星设备不喜欢我用来创建的组合 `AudioRecorder`。

所以我使用以下方法循环进入可用配置并使用最佳配置来初始化 AudioRecord。

```
public AudioRecord findAudioRecord() {
    for (int rate: mSampleRates) {
        for (short audioFormat: new short[] {
            AudioFormat.ENCODING_PCM_8BIT, AudioFormat.ENCODING_PCM_16BIT
        }) {
            for (short channelConfig: new short[] {
                AudioFormat.CHANNEL_IN_MONO, AudioFormat.CHANNEL_IN_STEREO
            }) {
                try {
                    Log.i("vipul", "Attempting rate " + rate + "Hz, bits: " + audioFormat + ", channel: " + channelConfig);
                    int bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

                    if (bufferSize != AudioRecord.ERROR_BAD_VALUE) {
                        // check if we can instantiate and have a success
                        AudioRecord recorder = new AudioRecord(
                        AudioSource.DEFAULT, rate, channelConfig, audioFormat, bufferSize);

                        if (recorder.getState() == AudioRecord.STATE_INITIALIZED) return recorder;
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
    return null;
} 
```

以下是在 Sony 手机上运行良好的代码。但在三星设备上运行困难。

```
public class EnvironmentRecorder extends Activity implements OnClickListener {

    private static final int RECORDER_BPP = 16;
    private static final String AUDIO_RECORDER_FILE_EXT_WAV = ".wav";
    private static final String AUDIO_RECORDER_FOLDER = "MyRecorder";
    private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
    private static final int RECORDER_SAMPLERATE = 44100;
    private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_STEREO;
    private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;
    private Button start, stop;
    private AudioRecord recorder = null;
    private int bufferSize = 0;
    private Thread recordingThread = null;
    private boolean isRecording = false;
    private static int[] mSampleRates = new int[] {
        8000, 11025, 22050, 44100
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        start = (Button) findViewById(R.id.start);
        stop = (Button) findViewById(R.id.stop);
        start.setOnClickListener(this);
        stop.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        switch (view.getId()) {
        case R.id.start:
            startRecord();
            break;
        case R.id.stop:
            stopRecording();
            break;
        }
    }

    public EnvironmentRecorder() {

        try {
            bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE, RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private String getFilename1() {
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath, AUDIO_RECORDER_FOLDER);

        if (!file.exists()) {
            file.mkdirs();
        }

        return (file.getAbsolutePath() + "/" + "NotGained" + AUDIO_RECORDER_FILE_EXT_WAV);
    }

    private String getFilename2() {
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath, AUDIO_RECORDER_FOLDER);

        if (!file.exists()) {
            file.mkdirs();
        }

        return (file.getAbsolutePath() + "/" + "Gained" + AUDIO_RECORDER_FILE_EXT_WAV);
    }

    private String getTempFilename() {
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath, AUDIO_RECORDER_FOLDER);

        if (!file.exists()) {
            file.mkdirs();
        }

        File tempFile = new File(filepath, AUDIO_RECORDER_TEMP_FILE);

        if (tempFile.exists()) tempFile.delete();

        return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_TEMP_FILE);
    }

    public AudioRecord findAudioRecord() {
        for (int rate: mSampleRates) {
            for (short audioFormat: new short[] {
                AudioFormat.ENCODING_PCM_8BIT, AudioFormat.ENCODING_PCM_16BIT
            }) {
                for (short channelConfig: new short[] {
                    AudioFormat.CHANNEL_IN_MONO, AudioFormat.CHANNEL_IN_STEREO
                }) {
                    try {
                        Log.v("vipul", "Attempting rate " + rate + "Hz, bits: " + audioFormat + ", channel: " + channelConfig);
                        int bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

                        if (bufferSize != AudioRecord.ERROR_BAD_VALUE) {
                            // check if we can instantiate and have a success
                            AudioRecord recorder = new AudioRecord(
                            AudioSource.DEFAULT, rate, channelConfig, audioFormat, bufferSize);

                            if (recorder.getState() == AudioRecord.STATE_INITIALIZED) return recorder;
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            }
        }
        return null;
    }

    public void startRecord() {
        /*
         * recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
         * RECORDER_SAMPLERATE, RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING,
         * bufferSize);
         */

        recorder = findAudioRecord();

        recorder.startRecording();

        isRecording = true;

        recordingThread = new Thread(new Runnable() {

            @Override
            public void run() {
                writeAudioDataToFile();
            }
        }, "AudioRecorder Thread");

        recordingThread.start();
    }

    private void writeAudioDataToFile() {
        byte data[] = new byte[bufferSize];
        String filename = getTempFilename();
        FileOutputStream os = null;

        try {
            os = new FileOutputStream(filename);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        int read = 0;

        if (null != os) {
            while (isRecording) {
                read = recorder.read(data, 0, bufferSize);

                if (AudioRecord.ERROR_INVALID_OPERATION != read) {
                    try {
                        os.write(data);
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }

            try {
                os.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    public void stopRecording() {
        if (null != recorder) {
            isRecording = false;

            recorder.stop();
            recorder.release();

            recorder = null;
            recordingThread = null;
            copyWaveFile(getTempFilename(), getFilename1(), getFilename2());
            deleteTempFile();
        }

    }

    private void deleteTempFile() {
        File file = new File(getTempFilename());

        file.delete();
    }

    private void copyWaveFile(String inFilename, String outFileName1, String outFileName2) {
        FileInputStream in = null;
        FileOutputStream out1 = null, out2 = null;
        long totalAudioLen = 0;
        long totalDataLen = totalAudioLen + 36;
        long longSampleRate = RECORDER_SAMPLERATE;
        int channels = 2;
        long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels / 8;

        byte[] data = new byte[bufferSize];

        try { in = new FileInputStream(inFilename);
            out1 = new FileOutputStream(outFileName1);
            out2 = new FileOutputStream(outFileName2);
            totalAudioLen = in .getChannel().size();
            totalDataLen = totalAudioLen + 36;

            WriteWaveFileHeader(out1, totalAudioLen, totalDataLen, longSampleRate, channels, byteRate);
            WriteWaveFileHeader(out2, totalAudioLen, totalDataLen, longSampleRate, channels, byteRate);

            while ( in .read(data) != -1) {

                out1.write(data); // Writing Non-Gained Data

                float rGain = 2.5f;
                for (int i = 0; i < data.length / 2; i++) {

                    short curSample = getShort(data[i * 2], data[i * 2 + 1]);
                    if (rGain != 1) {
                        // apply gain
                        curSample *= rGain;
                        // convert back from short sample that was "gained" to
                        // byte data
                        byte[] a = getByteFromShort(curSample);
                        // modify buffer to contain the gained sample
                        data[i * 2] = a[0];
                        data[i * 2 + 1] = a[1];
                    }

                }

                out2.write(data); // Writing Gained Data
            }
            out1.close();
            out2.close(); in .close();

            Toast.makeText(this, "Done!!", Toast.LENGTH_LONG).show();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private short getShort(byte argB1, byte argB2) {
        return (short)((argB1 & 0xff) | (argB2 << 8));

    }

    private byte[] getByteFromShort(short x) {
        // variant 1 - noise
        byte[] a = new byte[2];
        a[0] = (byte)(x & 0xff);
        a[1] = (byte)((x >> 8) & 0xff);

        // variant 2 - noise and almost broke my ears - very loud
        // ByteBuffer buffer = ByteBuffer.allocate(2);
        // buffer.putShort(x);
        // buffer.flip();

        return a;
    }

    private void WriteWaveFileHeader(FileOutputStream out, long totalAudioLen, long totalDataLen, long longSampleRate, int channels, long byteRate)
    throws IOException {

        byte[] header = new byte[44];

        header[0] = 'R';
        header[1] = 'I';
        header[2] = 'F';
        header[3] = 'F';
        header[4] = (byte)(totalDataLen & 0xff);
        header[5] = (byte)((totalDataLen >> 8) & 0xff);
        header[6] = (byte)((totalDataLen >> 16) & 0xff);
        header[7] = (byte)((totalDataLen >> 24) & 0xff);
        header[8] = 'W';
        header[9] = 'A';
        header[10] = 'V';
        header[11] = 'E';
        header[12] = 'f';
        header[13] = 'm';
        header[14] = 't';
        header[15] = ' ';
        header[16] = 16;
        header[17] = 0;
        header[18] = 0;
        header[19] = 0;
        header[20] = 1;
        header[21] = 0;
        header[22] = (byte) channels;
        header[23] = 0;
        header[24] = (byte)(longSampleRate & 0xff);
        header[25] = (byte)((longSampleRate >> 8) & 0xff);
        header[26] = (byte)((longSampleRate >> 16) & 0xff);
        header[27] = (byte)((longSampleRate >> 24) & 0xff);
        header[28] = (byte)(byteRate & 0xff);
        header[29] = (byte)((byteRate >> 8) & 0xff);
        header[30] = (byte)((byteRate >> 16) & 0xff);
        header[31] = (byte)((byteRate >> 24) & 0xff);
        header[32] = (byte)(2 * 16 / 8);
        header[33] = 0;
        header[34] = RECORDER_BPP;
        header[35] = 0;
        header[36] = 'd';
        header[37] = 'a';
        header[38] = 't';
        header[39] = 'a';
        header[40] = (byte)(totalAudioLen & 0xff);
        header[41] = (byte)((totalAudioLen >> 8) & 0xff);
        header[42] = (byte)((totalAudioLen >> 16) & 0xff);
        header[43] = (byte)((totalAudioLen >> 24) & 0xff);

        out.write(header, 0, 44);
    }

} 
```

我想知道是否需要添加任何额外的 loc 以使我的 AudioRecord 与三星设备兼容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T04:38:02.680

我们还在为一些三星 Android 设备上的录音而苦苦挣扎。不幸的是，它似乎很糟糕，因为即使是同一手机型号的不同版本在相同的代码库中表现也不同。

以下是我目前的发现，希望你能找到有用的东西：

**1\. 初始化失败：**

不幸的是，您用于查询有效录音配置的策略至少在运行 Android 2.3 的三星 Galaxy Young 和 Ace 型号上会失败。问题是一些无效的 AudioRecord 配置，而不是简单地失败，如果尝试，将完全破坏音频捕获子系统。您需要重置手机才能从此状态恢复。

**2\. 同一手机型号的修订版本支持的采样率不一致**

在较旧的 Galaxy Ace 手机上，以 11025Hz、16 位单声道录制将成功。在较新的 Ace 版本中，此 AudioRecord 配置将被视为有效，但生成的录音会失真，并带有“花栗鼠”效果。一个非常流行的吉他调音器应用程序对这个采样率进行了硬编码，正是因为这个问题，它无法在这些手机上给出正确的调音读数！

**3\. 某些配置上的音频捕获量极低。**

在 Galaxy Young 和 Galaxy Ace 中，从麦克风或默认音频源 @ 44,100Hz（假定一切正常的标准速率）录制会产生不失真但音量极低的录音。除了软件放大之外，我还没有找到解决此问题的方法（这相当于放大非常低分辨率的图像，结果是连续的“jageddnes”）。

**4\. 无法在每个音频采集源上支持规范的 44,100Hz 采样率。**

在 Galaxy Young 和 Galaxy Ace 中，从摄像机源录制失败 @ 44,100Hz。（同样，配置将被接受为有效）产生完整的垃圾。但是，以 8,000Hz、16,000Hz 和 48,000Hz 的频率录音效果很好，并且可以产生非常可接受的音量水平的录音。令人沮丧的是，根据 Android 文档，44,100Hz 是所有设备都应该支持的采样率。

**5\. OpenSL 没有修复报告的任何问题。**

使用 NDK 和 OpenSL 会产生相同的描述结果。AudioRecorder 类似乎只是简单地包装了对 OpenSL 的调用，问题要么是基于硬件的，要么是隐藏在内核代码的较低层。

这种情况确实非常不幸，因为这些模型正变得非常流行——至少在墨西哥是这样。

祝你好运 - 如果您使用这些手机有更好的运气，请报告。=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T06:39:10.507

音频增益控制要增加音频的幅度，您需要计算增益因子并将计算的增益因子与捕获的每个样本相乘。下面的代码就是这样做的。PS忽略不相关的代码

```
public class MainActivity extends Activity {

public static final int SAMPLE_RATE = 16000;

private AudioRecord mRecorder;
private File mRecording;
private short[] mBuffer;
private final String startRecordingLabel = "Start recording";
private final String stopRecordingLabel = "Stop recording";
private boolean mIsRecording = false;
private ProgressBar mProgressBar;
float iGain = 1.0f;
CheckBox gain;

protected int bitsPerSamples = 16;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_main);

    initRecorder();

    Button bluetooth = (Button)findViewById(R.id.blue);
    gain = (CheckBox) findViewById(R.id.checkBox1);
    mProgressBar = (ProgressBar) findViewById(R.id.progressBar);

    final Button button = (Button) findViewById(R.id.start);
    button.setText(startRecordingLabel);

    bluetooth.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent("");
        }
    });
    gain.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

            if (gain.isChecked()) {
                iGain = 5.0f;

            } else {
                iGain = 2.0f;
            }
        }
    });

    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(final View v) {
            if (!mIsRecording) {
                button.setText(stopRecordingLabel);
                mIsRecording = true;
                mRecorder.startRecording();
                mRecording = getFile("raw");
                startBufferedWrite(mRecording);
            } else {
                button.setText(startRecordingLabel);
                mIsRecording = false;
                mRecorder.stop();
                File waveFile = getFile("wav");
                try {
                    rawToWave(mRecording, waveFile);
                } catch (IOException e) {
                    Toast.makeText(MainActivity.this, e.getMessage(),
                            Toast.LENGTH_SHORT).show();
                }
                Toast.makeText(MainActivity.this,
                        "Recorded to " + waveFile.getName(),
                        Toast.LENGTH_SHORT).show();
            }
        }
    });
}

@Override
public void onDestroy() {
    mRecorder.release();
    super.onDestroy();
}

private void initRecorder() {
    int bufferSize = AudioRecord.getMinBufferSize(SAMPLE_RATE,
            AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
    mBuffer = new short[bufferSize];
    mRecorder = new AudioRecord(MediaRecorder.AudioSource.MIC, SAMPLE_RATE,
            AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT,
            bufferSize);
}

private void startBufferedWrite(final File file) {
    new Thread(new Runnable() {
        @Override
        public void run() {
            DataOutputStream output = null;
            try {
                output = new DataOutputStream(new BufferedOutputStream(
                        new FileOutputStream(file)));
                while (mIsRecording) {
                    double sum = 0;

                    int readSize = mRecorder.read(mBuffer, 0,
                            mBuffer.length);

                    final int bytesPerSample = bitsPerSamples / 8;
                    final int emptySpace = 64 - bitsPerSamples;
                    int byteIndex = 0;
                    int byteIndex2 = 0;
                    int temp = 0;
                    int mLeftTemp = 0;
                    int mRightTemp = 0;
                    int a = 0;
                    int x = 0;

                    for (int frameIndex = 0; frameIndex < readSize; frameIndex++) {

                        for (int c = 0; c < 1; c++) {

                            if (iGain != 1) {

                                long accumulator = 0;
                                for (int b = 0; b < bytesPerSample; b++) {

                                    accumulator += ((long) (mBuffer[byteIndex++] & 0xFF)) << (b * 8 + emptySpace);
                                }

                                double sample = ((double) accumulator / (double) Long.MAX_VALUE);
                                sample *= iGain;
                                int intValue = (int) ((double) sample * (double) Integer.MAX_VALUE);

                                for (int i = 0; i < bytesPerSample; i++) {
                                    mBuffer[i + byteIndex2] = (byte) (intValue >>> ((i + 2) * 8) & 0xff);
                                }
                                byteIndex2 += bytesPerSample;

                            }
                        }// end for(channel)

                        // mBuffer[frameIndex] *=iGain;
                        if (mBuffer[frameIndex] > 32765) {
                            mBuffer[frameIndex] = 32767;

                        } else if (mBuffer[frameIndex] < -32767) {
                            mBuffer[frameIndex] = -32767;
                        }
                        output.writeShort(mBuffer[frameIndex]);
                        sum += mBuffer[frameIndex] * mBuffer[frameIndex];

                    }

                    if (readSize > 0) {
                        final double amplitude = sum / readSize;
                        mProgressBar.setProgress((int) Math.sqrt(amplitude));
                    }
                }
            } catch (IOException e) {
                Toast.makeText(MainActivity.this, e.getMessage(),
                        Toast.LENGTH_SHORT).show();
            } finally {
                mProgressBar.setProgress(0);
                if (output != null) {
                    try {
                        output.flush();
                    } catch (IOException e) {
                        Toast.makeText(MainActivity.this, e.getMessage(),
                                Toast.LENGTH_SHORT).show();
                    } finally {
                        try {
                            output.close();
                        } catch (IOException e) {
                            Toast.makeText(MainActivity.this, e.getMessage(),
                                    Toast.LENGTH_SHORT).show();
                        }
                    }
                }
            }
        }
    }).start();
}

private void rawToWave(final File rawFile, final File waveFile)
        throws IOException {

    byte[] rawData = new byte[(int) rawFile.length()];
    DataInputStream input = null;
    try {

        input = new DataInputStream(new FileInputStream(rawFile));
        input.read(rawData);
    } finally {
        if (input != null) {
            input.close();
        }
    }

    DataOutputStream output = null;
    try {
        output = new DataOutputStream(new FileOutputStream(waveFile));
        // WAVE header
        // see http://ccrma.stanford.edu/courses/422/projects/WaveFormat/
        writeString(output, "RIFF"); // chunk id
        writeInt(output, 36 + rawData.length); // chunk size
        writeString(output, "WAVE"); // format
        writeString(output, "fmt "); // subchunk 1 id
        writeInt(output, 16); // subchunk 1 size
        writeShort(output, (short) 1); // audio format (1 = PCM)
        writeShort(output, (short) 1); // number of channels
        writeInt(output, SAMPLE_RATE); // sample rate
        writeInt(output, SAMPLE_RATE * 2); // byte rate
        writeShort(output, (short) 2); // block align
        writeShort(output, (short) 16); // bits per sample
        writeString(output, "data"); // subchunk 2 id
        writeInt(output, rawData.length); // subchunk 2 size
        // Audio data (conversion big endian -> little endian)
        short[] shorts = new short[rawData.length / 2];
        ByteBuffer.wrap(rawData).order(ByteOrder.LITTLE_ENDIAN)
                .asShortBuffer().get(shorts);
        ByteBuffer bytes = ByteBuffer.allocate(shorts.length * 2);

        for (short s : shorts) {

            // Apply Gain
            /*
             * s *= iGain; if(s>32767) { s=32767; } else if(s<-32768) {
             * s=-32768; }
             */
            bytes.putShort(s);
        }
        output.write(bytes.array());
    } finally {
        if (output != null) {
            output.close();
        }
    }
}

private File getFile(final String suffix) {
    Time time = new Time();
    time.setToNow();
    return new File(Environment.getExternalStorageDirectory(),
            time.format("%Y%m%d%H%M%S") + "." + suffix);
}

private void writeInt(final DataOutputStream output, final int value)
        throws IOException {
    output.write(value >> 0);
    output.write(value >> 8);
    output.write(value >> 16);
    output.write(value >> 24);
}

private void writeShort(final DataOutputStream output, final short value)
        throws IOException {
    output.write(value >> 0);
    output.write(value >> 8);
}

private void writeString(final DataOutputStream output, final String value)
        throws IOException {
    for (int i = 0; i < value.length(); i++) {
        output.write(value.charAt(i));
    }
}
} 
```

# actionscript-3 - Increasing impulse on collision in box2d

> ID：11291950
> 
> 赞同：1
> 
> 时间：2012-07-02T10:34:22.427
> 
> 标签：actionscript-3, box2d, collision-detection, physics

I'm creating box2d game and trouble is as follows: Two fighters located on arena, top view. Fighters has weapons like sword in theis hands. I want to fighter bounces in hit direction when damaged by opponent, but fighters has same physical characteristics and applied impulse is not sufficient to bounce fighter considerably. How can I increase applied by box2d impulse in same (correct) direction? I overrided PostSolve method, but I don't understand how to affect to b2ContactImpulse passed to method. I think I just need increase value of that impulse, but I dont know how. Could someone explain me how to do it? Thanx!

# android - 无法在手机上运行 Android 应用程序

> ID：11291952
> 
> 赞同：0
> 
> 时间：2012-07-02T10:34:25.577
> 
> 标签：android, android-emulator

我一直在使用 Eclipse 和 Eclipse 的 Android 插件开发一个 Android 应用程序，这些天来，我只需将手机插入计算机并点击运行，就会看到我的应用程序在我的三星 Galaxy 手机上运行。但是现在它向我显示了一个如下所示的窗口，并且我无法选择我的手机作为设备，因为在“状态”列下，即使手机插入我的计算机，它也会显示“离线”。我什至不能使用模拟器，因为它在我的电脑上速度非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:44:18.100

参考这个链接

[Android 设备选择器 - 我的设备似乎离线](https://stackoverflow.com/questions/5584976/android-device-chooser-my-device-seems-offline)

*   通过在 cmd 提示符下发出“adb kill-server”后跟“adb start-server”来重新启动 adb
*   在手机上禁用和重新启用 USB 调试
*   如果还是不行就重启手机。

![在此处输入图像描述](../Images/005651a253d4821d7e52ba8c6fe7b687.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:39:42.390

有时 Android 设备会出现“离线”（根据`adb devices`）。我通常通过重新启动设备成功地解决了这个问题，尽管也`adb kill-server`跟着`adb start-server`.

我已经看到这种情况发生在多个不相关的设备上，很少发生，而且看似随机（也就是说，似乎与我一直在做的任何事情无关）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:19:24.423

重新格式化手机为我解决了这个问题。我不知道这是否解决了问题，但是一旦我重新格式化手机，我就可以在手机上运行该应用程序。

# java - 运行时编译的类实例化和使用是否可以在没有反射的情况下在 Java 中使用？

> ID：11291954
> 
> 赞同：1
> 
> 时间：2012-07-02T10:34:28.777
> 
> 标签：java, reflection, compilation, runtime

我想知道是否存在任何类型的库或解决方法来使用我的运行时编译的类（我动态生成我的类，编写 .java，然后在 .class 中编译它们，所有这些都发生在运行时）而不使用反射库？

使用反射加载我总是必须像这样工作：

```
//path where my newly generated classes are 
File file = new File("e:\\tmp");
// Convert File to a URL
URL url = file.toURI().toURL();
URL[] urls = new URL[]{url};
ClassLoader cl = new URLClassLoader(urls);
Class cls = cl.loadClass("eu.dataaccess.footballpool.TGoal");
// Create an instance of the class just loaded
Object o = cls.newInstance();
Method method2 = cls.getDeclaredMethod("getIMinute");
Object result2 = method2.invoke(o); 
```

我的问题是是否可以在运行时使用

```
TGoal x = new TGoal(); 
```

和

```
x.getIMinute(); 
```

编辑：似乎不可能按照我希望的方式行事。我修改了我的问题：是否可以在运行时加载整个包，以使加载的包的类能够在没有 method.invoke 的情况下相互通信，同时包的主要激活是通过方法调用（）？

我试过没有任何运气，我有一些“错误：找不到符号”，运行时加载的类似乎无法相互通信

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:43:15.830

你可以做

```
x.getIMinute(); 
```

通过使用接口，但是 AFAIK 你不能在没有反射的情况下创建新的类实例。

相反，要调用动态创建的对象的方法，您可以声明一个接口：

```
public interface MinuteGetter{
   public int getIMinute();
} 
```

您的动态对象必须实现他的，而不是您可以做的：

```
Class cls = cl.loadClass("eu.dataaccess.footballpool.TGoal");
// Create an instance of the class just loaded
MinuteGetter o = (MinuteGetter) cls.newInstance();
o.getIMinute(); 
```

如果您无法将接口应用到您的代码中，您可以尝试使用 AnonymousClassLoader。请参阅[有关它的详细帖子](http://blog.headius.com/2008/09/first-taste-of-invokedynamic.html)。它仅适用于 Java 7，请注意我从未使用过它，所以不知道它是否提供比反射更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:47:04.950

如果您不使用反射 api，则必须通过 new 运算符实例化类。这需要在编译时拥有类文件。所以这是不可能的。如果您的类 TGoal 正在实现一个接口 IGoal，那么您可以将您的 Object o 转换为 IGoal。这使您可以像使用任何其他对象一样使用您的对象，而无需使用反射 api。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T10:42:31.623

您确定必须在运行时创建代码吗？最简单的方法是避免这种情况。

如果`TGoal x = new TGoal()`在这个程序中不需要发生，那么在生成的代码中创建一个 main 函数并启动第二个 java 应用程序。

# html - 减少显示多个图像时所需的代码量 HTML CSS

> ID：11291957
> 
> 赞同：0
> 
> 时间：2012-07-02T10:34:34.937
> 
> 标签：html, css, asp.net-mvc-3, performance

只是想知道是否有一种方法可以减少在 HTML 中显示大量图像时所需的代码量？

我想在画廊中显示大约 2-300 张图片，目前 HTML 将如下所示：

```
<div id="scroller>
    <img src="/Content/images/decking/decking-1.jpg" width="100" alt="" />
    <img src="/Content/images/decking/decking-2.jpg" width="100" alt="" />
    <img src="/Content/images/decking/decking-3.jpg" width="100" alt="" />
    <img src="/Content/images/decking/decking-4.jpg" width="100" alt="" />
    <img src="/Content/images/decking/decking-5.jpg" width="100" alt="" />
</div> 
```

...但要缩小到图像“decking-250.jpg”。

有没有更有效的方法来显示图像，这样我就没有 250 多行“img src”HTML？

文件名中唯一改变的部分是“-1”、“-2”、“-3”等。其余部分，包括 Alt 标签可以保持为空。

我正在使用 ASP.net 在线教程作为指南在 ASP.Net MVC3 Razor 中构建这个站点，如果这有助于想到任何解决方案，如果它只是必须以这种方式完成，那也很好 - 我只是想知道是否我应该考虑学习另一种方法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:42:25.993

这就是 HTML 的工作方式。你不能减少它，因为`img`每张图片都需要一个标签。您可以通过 PHP、JS 等动态创建该代码。但最后你会得到一长串`img`标签，可能被其他标签单独包装（例如在列表中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:20:04.383

我同意 Feela 的观点，尽管它可能看起来很冗长，但您的代码几乎是防弹的。但是，如果您可以使用（或已经在使用）像 JS 这样的东西，那么有一些选择。这未经测试，但您可以在 Jquery/Javascript 中设置一个 for-loop 语句来压缩代码。例如：

```
for (i=1; i < 250; i++) {
    $('#scroller').append('<img src="/Content/images/decking/decking-' + i.toString() + '.jpg" width="100" alt="" />');
} 
```

我不是 ASP 编码器，但也许它提供了一些功能相似的东西。

# php - Ajax 表单和复选框数组

> ID：11291959
> 
> 赞同：1
> 
> 时间：2012-07-02T10:34:54.480
> 
> 标签：php, jquery, ajax, forms, checkbox

在我的 ajax 表单中，我有一些复选框和一个用于电子邮件地址的文本框。表单有效，但我无法在同一个变量中发送复选框数组和电子邮件地址。对不起，我的英语不好。这是jquery代码：

$(文档).ready(函数 () {

```
$('#submit').click(function () {

var valore = { 'how_hear[]' : []}; 

$("input:checkbox:checked").each(function() {
  valore['how_hear[]'].push($(this).val());
}); // Checkboxes value

var name = $('input:text'); 
```

// 组织要发送到 php 的数据。我认为问题就在这里，但我无法解决！！！

```
var data = 'name=' + name.val() + '&check=' valori;

$.ajax({
                type:'POST',
                url:'myurl.php',
                data:  data, // If i send only the variable "name" or only the variable "valore", it works fine!
                cache: false,
                success:function (data) {
                    $('form').append('GIUSTO!!!!');
                }
        });

    return false;
    });

}); 
```

有什么建议吗？感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:38:30.817

您可以使用[`serializeArray()`](http://api.jquery.com/serializeArray/)或[`serialize()`](http://api.jquery.com/serialize/)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:53:20.703

**向服务器发送数据**

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

默认情况下，Ajax 请求使用 GET HTTP 方法发送。如果需要 POST 方法，可以通过设置 type 选项的值来指定该方法。此选项影响数据选项的内容如何发送到服务器。根据 W3C XMLHTTPRequest 标准，POST 数据将始终使用 UTF-8 字符集传输到服务器。

*`The data option can contain either a query string of the form key1=value1&key2=value2, or a map of the form {key1: 'value1', key2: 'value2'}`*. 如果使用后一种形式，则数据在发送之前使用 jQuery.param() 转换为查询字符串。可以通过将 processData 设置为 false 来规避此处理。如果您希望将 XML 对象发送到服务器，则该处理可能是不可取的；在这种情况下，将 contentType 选项从 application/x-www-form-urlencoded 更改为更合适的 MIME 类型。

# delphi - How to format a number with + and - sign in Delphi

> ID：11291960
> 
> 赞同：4
> 
> 时间：2012-07-02T10:34:56.950
> 
> 标签：delphi, numbers, string-formatting

Using Delphi, is there a way to enforce sign output when using the Format function on integers? For positive numbers a '+' (plus) prefix shall be used, for negative numbers a '-' (minus) prefix. The handling of Zero is not important in my case (can have either sign prefix or none).

I would like to avoid using format helper functions for each format and if-then-else solutions.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T11:21:17.597

就像[David 已经评论](https://stackoverflow.com/questions/11291960/how-to-format-a-number-with-and-sign-in-delphi#comment14854553_11291960)过的那样，该[`Format`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.Format#Format_Strings)函数没有为此目的提供格式说明符。

如果你真的想要一个单行解决方案，那么我想你可以使用类似的东西：

```
uses
  Math;
const
  Signs: array[TValueSign] of String = ('', '', '+');
var
  I: Integer;
begin
  I := 100;
  Label1.Caption := Format('%s%d', [Signs[Sign(I)], I]);  // Output: +100
  I := -100;
  Label2.Caption := Format('%s%d', [Signs[Sign(I)], I]);  // Output: -100 
```

但我更愿意制作一个单独的（库）例程：

```
function FormatInt(Value: Integer): String;
begin
  if Value > 0 then
    Result := '+' + IntToStr(Value)
  else
    Result := IntToStr(Value);
end; 
```

# javascript - Javascript sum of elements value

> ID：11291961
> 
> 赞同：0
> 
> 时间：2012-07-02T10:34:58.503
> 
> 标签：javascript

javascript code:

```
function getCheckbox(name,id){
  var check = 0; 
  var deger = "option-checkbox-"+id; 
  var dom = document.getElementById(deger); 
  if( dom.checked )
       check += parseFloat( dom.value ); 
  else check -= parseFloat( dom.value ); 
  return check.toFixed(2);**//right value.(12.45)** 
} 

function getRadio(name,id) {
  var radio=0; 
  var deger="option-radio-"+id; 
  var radio="option["+name+"]"; 
  var selectedli = document.getElementsByName(radio); 
  var degerli    = document.getElementById(deger); 
  if( selectedli.checked )
       radio = parseFloat( degerli.value );
  else radio = parseFloat( degerli.value )
  return radio.toFixed(2)**//right value.(42.00)** 
} 

function getSelected(name,id) {
  var selectedid="option["+name+"]"; 
  var selecte = 0; 
  var selected = document.getElementById( selectedid ); 
  selecte = parseFloat(selected.value); 
  return selecte.toFixed(2);**//right value.(-12.29)** 
} 

function toplam(name,id) {**//not expected(0)** 
  var toplan = 0; 
  toplan = getSelected(name,id)+getRadio(name,id)+getCheckbox(name,id); 
  $( '#toplam_goster' ).fadeOut(200, function(){
    document.getElementById("toplam_goster").innerHTML = toplan;
  }); 
  $( '#toplam_goster' ).fadeIn(200); 
} 
```

.In the last function return 0\. How can I fix it.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:39:59.537

> 返回 selecte.toFixed(2); // 这会返回字符串，加法可能会返回 0

要么返回数字，即返回selecte*1，要么在添加前转换为数字，即

```
toplan=getSelected(name,id)*1+getRadio(name,id)*1+getCheckbox(name,id)*1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:45:47.270

此特定功能存在一些问题：

```
function getRadio(name,id) 
{      
    var radio=0; 
    var deger="option-radio-"+id; 
    var radio="option["+name+"]"; 
    var selectedli = document.getElementsByName(radio); 
    var degerli =document.getElementById(deger); 
    if(selectedli.checked) {
        radio = parseFloat(degerli.value);
    }
    else {
        radio = parseFloat(degerli.value)
    } 
    return radio.toFixed(2)**//right value.(42.00)** 
} 
```

您将`radio`变量声明两次 - 最初是一个值，`0`然后是一个字符串。

您正在调用`document.getElementsByName()`which 返回一个元素数组，然后再执行`selectedli.checked`; 该数组将没有选中的属性。如果你期望它只返回一个`radio`元素，你应该测试`selectedli[0].checked`.

无论条件是否为真，您都有一个`if`执行相同代码的语句。这要么是您的错误，要么`if`可以完全取消该声明。

# c# - 使用角色管理网站用户

> ID：11291964
> 
> 赞同：0
> 
> 时间：2012-07-02T10:35:47.967
> 
> 标签：c#, asp.net, configuration

我从 Visual Studio 创建了一个网站。而我的登录控件是内置在masterpage.master 中的。

我也有一个`userprofile.aspx`拒绝匿名用户访问。`userprofile.aspx`我添加了访问规则，该规则限制了当页面查看我的讨厌用户时包含的整个成员文件夹。

但是，当我运行该网站并单击菜单控件将我定向到时`userprofile.aspx`，发生了此错误：

无法找到该资源。

> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

默认情况下，访问规则指向`"login.aspx"`. 但是我没有这个文件..有什么方法可以更改为目标 url 可以将匿名用户定向到`masterpage.master`文件而不是`login.aspx`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:02:02.787

是的，在您的 web.config 中找到以下部分：

```
<forms loginUrl="Login.aspx"
protection="All"
timeout="30"
name=".ASPXAUTH" 
path="/"
requireSSL="false"
slidingExpiration="true"
defaultUrl="default.aspx"
cookieless="UseDeviceProfile"
enableCrossAppRedirects="false" />
</authentication>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:02:52.137

`web.config`您通过文件控制目标网址

```
<authentication mode="Forms">
  <forms loginUrl="member_login.aspx"
    defaultUrl="index.aspx" />
</authentication> 
```

设置`loginUrl`为所需的 URL。

你可以重定向到一个`page`，不是`master page`，顺便说一句。

# javascript - Phonegap IOS App Image ZOOM Multitouch

> ID：11291967
> 
> 赞同：4
> 
> 时间：2012-07-02T10:35:58.823
> 
> 标签：javascript, cordova, multi-touch, iso

I'm developing an app with Phonegap for IOS. I would zoom and move an image contained in a box div (overflow hidden) with the finger: multitouch for zoom in and out and touchmove for move the image.

Is it possible? and how?

I'm looking with Google for the solution but I don't find it!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:11:11.863

有几种方法可以做到这一点。

可能最简单的方法是使用 iScroll4 的捏/缩放功能：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:25:45.713

您应该查看有关多点触控和 HTML/JS 的本教程。它也适用于 PhoneGap 应用程序。[http://www.appliness.com/multitouch-with-hammer-js/](http://www.appliness.com/multitouch-with-hammer-js/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T18:34:56.623

这是一个很好的简单教程，使用 iscroll4 进行图像缩放：

[http://iphonedevlog.wordpress.com/2013/07/03/adding-picture-zooming-to-your-phonegap-app-with-iscroll4/](http://iphonedevlog.wordpress.com/2013/07/03/adding-picture-zooming-to-your-phonegap-app-with-iscroll4/)

在我的 phonegap 应用程序中帮助了我一点。现在，如果我只能弄清楚如何将它与 svg 一起使用。嗯..

# c++ - How do I make sure it's safe to return a pointer from a function

> ID：11291972
> 
> 赞同：0
> 
> 时间：2012-07-02T10:36:31.813
> 
> 标签：c++

Here's my problem: I read here on StackOverflow that it is unsafe sometimes to return pointers to local variables from a function. For example:

```
#include<iostream>

using namespace std;

int *foo(void) {
    int x[] = {1,2,3};
    return x;
}

int main() {
    int *numbers;
    numbers = foo();
    return 0;
} 
```

I'd like to know if this is unsafe, considering that `x` being a local array, the memory could be unallocated, what's the better way to achieve the same result?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T10:40:08.103

> 我在 StackOverflow 上读到，有时从函数返回指向局部变量的指针是不安全的。

返回指向局部变量的指针总是不安全的**。**确实这样做是错误的，使用这个指针会导致未定义的行为。另见[这篇很棒的帖子](https://stackoverflow.com/a/6445794/1025391)。

如果要将数据返回到调用范围，可以使用[std::vector](http://en.cppreference.com/w/cpp/container/vector)作为副本：

```
std::vector<int> foo(void){
  std::vector<int> x = {1,2,3}; // using C++11 initializer list
  return x;
} 
```

如果它是一个固定长度的数组（总是大小为 3），你可以使用[std::array](http://en.cppreference.com/w/cpp/container/array)代替。

* * *

根据您的要求，您还可以使用静态变量。也就是说，变量永远不会超出范围，您可以通过引用（或通过指针）安全地返回它。请注意，您只有一份副本。如果您修改它，它将保持修改状态。（`const &`如果它是只读的，那就做吧。）

```
std::vector<int>& foo(void) {
  // this is only instantiated once when the function is first called
  static std::vector<int> x = {1,2,3}; 
  return x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:44:28.113

返回指向局部变量的指针永远是不安全的（实际上这是未定义的行为）。对于大多数实现，它们位于堆栈中，因此可以在使用指针时覆盖它。

您可以返回一个动态分配的数组：

```
int* foo() { int* x = new int[3]; ..} 
```

当然，您需要手动删除指针，这使得编写健壮、安全的代码变得很困难。因此，通常最好使用向量：

```
std::vector<int> foo() { 
   std::vector<int> x;
   x.push_back(1); 
   x.push_back(2); 
   x.push_back(3);
   return x;
} 
```

如果您使用 c++11，您可以使用初始化列表来填充向量，从而使代码更好：

```
std::vector<int> foo() { std::vector<int> x = {1,2,3};  return x; } 
```

C++11 具有移动语义，这意味着在这种情况下，按值返回向量几乎不会花费任何性能。对于 C++03，如果性能至关重要，您可以为函数提供一个指向向量的引用/指针作为参数并填充：

```
void foo(std::vector<int>& x) {x.clear(); x.push_back(1); ...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:40:00.897

首先`int x = {1,2,3}`是语法错误。它应该是`int x[] = {1,2,3};`

这是未定义的行为。因为自动数组在其定义的块内有生命周期，即在`foo()`函数内。因此，无论何时您从`foo()`存储中返回，`x`都不再保证为您保留。因此，如果您通过指针访问该位置，则行为未定义。

为了达到同样的效果，动态分配内存。

```
int *foo(void){
int x[] = {1,2,3}, *x_to_return;
x_to_return = new int [sizeof (x)/sizeof(x[0])];
memcpy (x_to_return, x, sizeof (x));
return x_to_return;
} 
```

基本上，您需要做的是使用 动态分配存储`new`，将数据复制到分配的内存块（其基础）`new`并将该内存地址返回给调用者。

完成使用后不要忘记释放分配的内存，否则您的代码会出现内存泄漏。

还有一点需要注意，如果你有这样的声明，`static int x[] = {1,2,3};`你可以返回 的地址`x`，因为在这种情况下，生命周期`x`是整个程序运行时。

由于您的问题被标记为 c++ you should use `vector`，请查看 moooeeeep 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:40:16.930

返回指向该数组的指针是不安全的（或者说是错误的），因为当函数返回时它不再存在。内存不仅*可以*被释放，而且*会*被释放。
请注意，它可能仍然会意外工作，但老实说，这会比它不工作更糟糕（因为它是不可预测的并且无法调试）。永远不要尝试“但它似乎有效”的事情，即使它们似乎有效。

这与返回指针或引用相同，但*const*引用是一个例外。引用使被引用对象在`const`其自己的生命周期内保持活动状态。

`static`如果您想返回一个指针，动态分配或制作对象将是选项。或者，只是按值返回一个临时对象，依靠编译器将其 RVO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T10:41:46.917

您可以：

1.  将 x 声明为`static`
2.  将 x 声明为`pointer`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-02T10:54:42.023

是的，这是不安全的，因为数组是在堆栈上分配的，因此当函数返回时它将被释放。

与其在函数内部分配数组，不如在外部创建它并将指向它的指针传递给函数。这只是一个例子：

```
#include<iostream>
using namespace std;

void foo(int numbers[]){
    numbers[0] = 1;
    numbers[1] = 2;
    numbers[2] = 3;
}

int main(int args, char**argv) {
    int numbers[3];
    foo(numbers);
    cout << numbers[0] << numbers[1] << numbers[2];
    return 0;
} 
```

这将打印“123”。

# python - Django文件系统存储大量文件

> ID：11291975
> 
> 赞同：4
> 
> 时间：2012-07-02T10:36:53.947
> 
> 标签：python, django, filesystems, storage

场景：一个 Django 应用程序会生成大量与不同模型中的对象相关的小文件。

在使用默认文件存储时，我进行了大量搜索以避免在单个目录中生成大量文件。

**django-fsfield**是唯一的开源解决方案吗？您还有什么建议用于修复目录中的大量 inode 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:53:33.930

考虑将内容存储在 MongoDB 集合中。

由于文件很小，您可以使用包含文件内容的单个[二进制字段创建 MongoDB 文档。](http://api.mongodb.org/python/current/api/bson/binary.html#bson.binary.Binary)在这种情况下，“小”表示小于 MongoDB 文档大小限制，目前为 16MB。

如果你需要存储大文件，Mongo 支持[gridfs](http://api.mongodb.org/python/current/api/gridfs/index.html#module-gridfs)。

另请参阅[何时使用 GridFS](http://www.mongodb.org/display/DOCS/When+to+use+GridFS)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T22:03:10.500

我正在使用[django-castor](https://github.com/zacharyvoase/django-castor)。

> django-castor 是一个可重用的 Django 应用程序，它提供了一个 **内容可寻址的存储后端**。主类 `djcastor.storage.CAStorage`是一种`FileSystemStorage`将文件保存在其 SHA-1 摘要下的类型。
> 
> *   无论同一个文件上传多少次，它只会被存储一次，从而消除了冗余。
>     
>     
> *   文件名是伪随机的，仅由十六进制字符组成，因此您不必担心文件名冲突或清理。
>     
>     
> *   `django-castor`根据摘要对上传目录中的文件进行分片；当单个目录中有太多文件时，这可以防止文件系统问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T17:13:37.563

也可以使用自定义存储管理器，如果文件很小，则将其保存在具有二进制字段的数据库模型中，并保存超过 16MB 的小文件，并且不需要使用其他数据库。

# jquery - $.ajax() 响应处理

> ID：11291977
> 
> 赞同：0
> 
> 时间：2012-07-02T10:36:59.740
> 
> 标签：jquery, ajax, json

我正在尝试检查我对 ajax 查询的响应，但我似乎无法弄清楚如何解析结果。

```
$('input[name=sendpassword]').click(function(){
                var password = $("input[name=password]").val();
                var dataString = "uid=" + uid + "&password=" + password;
                console.log(dataString);
                $.ajax({
                    type:"POST",
                    url:"/assets/inc/check-password.php",
                    data:dataString,
                    dataType:'html',
                    context:document.body,
                    global:false,
                    async:false,
                    success:function(data){
                        console.log(data);
                        if (data[0].id==true){
                            console.log("success");
                        } else {
                            console.log("failed");
                        }
                        //window.location.replace(reffer);
                        //document.location ="/";
                    }
                });
            }); 
```

console.log 显示**{"id":false}**或**{"id":true}**但我想用结果做一个 if 语句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:53:58.233

如果（data.d==true）试试这个

```
$('input[name=sendpassword]').click(function(){
                var password = $("input[name=password]").val();
                var dataString = "uid=" + uid + "&password=" + password;
                console.log(dataString);
                $.ajax({
                    type:"POST",
                    url:"/assets/inc/check-password.php",
                    data:dataString,
                    dataType:'json',
                    context:document.body,
                    global:false,
                    async:false,
                    success:function(data){
                    console.log(data.d);
                        if (data.d==true){
                            console.log("success");
                        } else {
                            console.log("failed");
                        }
                        //window.location.replace(reffer);
                        //document.location ="/";
                    }
                });
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:42:28.327

试试这个`jQuery.parseJSON( data )`，而不是`if (data[0].id==true){`使用`if (data.id=="true"){`

```
$('input[name=sendpassword]').click(function(){
                var password = $("input[name=password]").val();
                var dataString = "uid=" + uid + "&password=" + password;
                console.log(dataString);
                $.ajax({
                    type:"POST",
                    url:"/assets/inc/check-password.php",
                    data:dataString,
                    dataType:'html',
                    context:document.body,
                    global:false,
                    async:false,
                    success:function(data){
                    data = jQuery.parseJSON(data)
                        console.log(data);
                        if (data.id==true){
                            console.log("success");
                        } else {
                            console.log("failed");
                        }
                        //window.location.replace(reffer);
                        //document.location ="/";
                    }
                });
            }); 
```

或按照建议`Jared`

> dataType:'html' 需要是 dataType:'json'。

那么你就不需要解析成 JSON

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:41:58.397

如果控制台只显示`{"id":false}`（即不显示数组），那么您可以通过以下方式使用它：`data.id==true`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T10:41:59.593

首先解析结果，以便您可以访问结果中的各个组件。

```
var parsedResponse = JSON.parse(data) 
```

然后访问 like `parsedResponse.id`，您可以在您的`if`条件中使用它。

# c# - C# 列表框传递字符串

> ID：11291979
> 
> 赞同：1
> 
> 时间：2012-07-02T10:37:08.487
> 
> 标签：c#

我似乎在将一些字符串从一种形式传递到另一种形式时遇到问题。我在 Form1 上有两个 listBoxes，但我想使用 Form2 将信息传递到 Form1 中的 listBoxes 中。在 Form2 中，我有一个 button_Click 函数，它使用参数字符串 a 和字符串 b 调用 Form1 中的函数。

```
private void button_Click(object sender, EventArgs e){
Form1 frm = new Form1();
frm.AddItemToListBox(txtBox1.Text,txtBox2.Text);
} 
```

下面是在 Form1 中调用函数 AddItemToListBox 的代码。
以上是Form1中的AddItemToListBox函数。

```
AddItemToListBox(string a, string b){
listBox1.Items.Add(a);
listBox2.Items.Add(b);
} 
```

但是，这不会将字符串添加到列表框中。没有错误消息或任何东西。我也尝试过声明 2 个公共字符串 STR1 和 STR2

```
AddItemToListBox(string a, string b){
listBox1.Items.Add(a);
listBox2.Items.Add(b);
STR1 = a;
STR2 = b;
} 
```

但是，如果我使用显示 STR1 和 STR2 值的按钮。它们将是“”，String.Empty。显示该值的 MessageBox 中没有显示任何内容。但是，如果我放置 MessageBox.Show(a); 和 MessageBox.Show(b); 在 AddItemToListBox 函数中，字符串将正确显示但仍未添加到列表框中。

这让我沮丧了 2 个小时，我想知道为什么以及如何实际使用该方法将项目添加到列表框中（如果可能）。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:43:04.727

尝试在此方法的末尾添加一个 frm.Show() 。

```
private void button_Click(object sender, EventArgs e)
{ 
    Form1 frm = new Form1(); 
    frm.AddItemToListBox(txtBox1.Text,txtBox2.Text); 
    frm.Show();
} 
```

但我确信这并不能解决你的问题。只是告诉你你需要引用正确的 Form1。我认为您正在创建 Form1 的新实例，您需要解决正确的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:43:58.940

```
Form1 frm = new Form1(); 
```

以上将初始化一个新表单，它不会更改 Form1 的现有实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:53:47.723

要么你的输入是空的，所以在调用之前调试 txtBox1.Text

```
frm.AddItemToListBox(txtBox1.Text,txtBox2.Text); 
```

或者添加字符串后表单不会重绘。这可以通过使用来强制

```
listBox1.Invalidate();
listBox2.Invalidate(); 
```

在添加字符串之后

# reporting-services - SSRS 2012 电子邮件订阅失败并出现 AuthorizationExtensionException

> ID：11291985
> 
> 赞同：0
> 
> 时间：2012-07-02T10:37:26.390
> 
> 标签：reporting-services, sql-server-2012, reporting-services-2012

我最近将一个 SSRS 实例从 SQL 2008 R2 复制到了一个新的 SQL 2012 实例。我在报表服务器数据库和加密密钥上执行了备份/恢复，并配置了服务/执行帐户等。我可以通过报表管理器运行报表而不会发生意外，并且我可以创建新的订阅，并且运行良好。

但是，只要之前存在的订阅之一（在 R2 下设置）即将运行，它就会失败并出现以下错误：

```
Microsoft.ReportingServices.Diagnostics.Utilities.AuthorizationExtensionException: An error occurred when invoking the authorization extension. ---> System.ArgumentNullException: SafeHandle cannot be null. 
```

建议似乎是这与自定义安全组件有关，但我们没有。我们确实有一个用于其他目的的自定义 DLL，但是当有问题的订阅运行时它甚至没有被调用，所以不太可能是这样。为此 DLL 配置了 CAS。

我真的在寻找有关从哪里开始解决此错误的建议，因为我不知道该尝试什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:18:17.703

[我在MSDN](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/b13952bc-b69e-4588-85d7-1cf4e6d6c4ff)上发布了相同的问题，得到的答案表明，从旧服务器复制的订阅可能是由新服务器上不存在的本地用户创建的。

经过一番调查，事实证明是这样的。SSRS 似乎需要订阅创建者（报表服务器数据库中订阅表中的 OwnerID 字段）是一个有效帐户，因为它在尝试运行订阅时必须执行某种验证。

一旦我将其更改为有效的域帐户（本地帐户也可以），订阅一切正常。

# sql - 列长度 应足够时出现 SQL Server 截断错误

> ID：11291989
> 
> 赞同：1
> 
> 时间：2012-07-02T10:37:53.750
> 
> 标签：sql, sql-server, sql-server-2008

我在 SQL Server 2008 中有一个表
表名：tbl_device
表结构：

```
专栏 | 类型
col1 | nvarchar(200)

```

现在，当我尝试将数据插入其中时（它适用于较短的情况，但是）并且字符串数据很长，即使用 LEN 函数它是 162

服务器仍然给出错误：

```
消息 8152，第 16 层，状态 4，第 1 行
字符串或二进制数据将被截断。

```

应该是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:48:05.327

生成错误消息的字符串中有尾随空格，但它们不使用`len()`函数计算。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-09T15:23:27.620

Nvarchar 将每个字符存储在 2 个字节中。所以你的 nvarchar(200) 只能存储 100 个字符。一些视图以字符为单位列出长度，而另一些则以字节为单位列出。

就是这么简单。有关其工作原理的详细信息，请参阅：

[nchar 和 nvarchar (Transact-SQL)](https://docs.microsoft.com/en-us/sql/t-sql/data-types/nchar-and-nvarchar-transact-sql?view=sql-server-ver15)

# jquery - How to catch enter click using JEditable?

> ID：11291990
> 
> 赞同：0
> 
> 时间：2012-07-02T10:38:04.430
> 
> 标签：jquery, jeditable

Look at this piece of my code:

```
 $(".field").editable("http://"+document.location.host+"/index.php/welcome/update_record", 
             {  
                event  : "mouseover",
                style  : "inherit",
                callback: function(value, settings) 
                {
                    //Some code
                }
             } 
```

But I have some problems - this code works good for me, because it catches clicks by "enter" button. But now I need to change type of field to "textarea":

```
 $(".field").editable("http://"+document.location.host+"/index.php/welcome/update_record", 
         {  
            type : "textarea",
            event  : "mouseover",
            style  : "inherit",
            callback: function(value, settings) 
            {
                //Some code
            }
         } 
```

And now it doesn't work - i.e. callback function has never executed. Please, tell me, I need to have textarea field and to catch event of pressing Enter.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:38:35.803

如果你想在按下回车时进行回调，你可以这样做：

[http://jsfiddle.net/NRxLP/](http://jsfiddle.net/NRxLP/)

```
$('#example').keyup(function(e) {
  if (e.which == 13) {
    $('#example').trigger('custom');
  } 
}); 
```

然后在 jEditable 中为您的处理程序捕获“自定义”事件。

但是，我不会将此称为最佳实践，用户习惯于使用文本区域中的输入按钮来添加多行。也许您也可以添加一个按钮 - 我相信 jEditable 有一种方法可以自动添加一个“保存”按钮..

在这个问题中 - [jquery jeditable without OK and Cancel Buttons](https://stackoverflow.com/questions/2402227/jquery-jeditable-without-ok-and-cancel-buttons) - 他们使用模糊事件，这对我来说更有意义..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-06T20:09:08.523

我建议也检查 ctrl 和 shift 键，并防止默认行为是有一个：

```
$(this).bind('keydown', function () {
                if (event.keyCode === 13 && !event.shiftKey && !event.ctrlKey) {
                    event.preventDefault();
                    $(this.form).submit(); // Or whatever
                    return false;
                } 
            }) 
```

# sitecore - I got following error When i open SiteCore website in Visual Studio 4.0

> ID：11291991
> 
> 赞同：0
> 
> 时间：2012-07-02T10:38:10.943
> 
> 标签：sitecore, sitecore6

I got the following two errors when I open Sitecore 6.3 website in Visual Studio 4.0:

> Error 1 The virtual path '/sitecore/shell/Applications/Analytics/ReportRunner/DateSelector.ascx' maps to another application, which is not allowed.
> Error 2 Unknown server tag 'ds:DateSelector'.

I simply install Sitecore 6.3 (website save into c:/inetpub/wwwroot/sitecoresite/website). When I open this site in Visual Studio 4.0, it shows error.

Can any body tell to me how can I open this or what mistake did I make?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:36:42.253

据我了解您的问题，您在浏览新安装的 Sitecore 网站时收到错误消息，该网站设置为在 ASP.NET 4.0 应用程序池下运行。如果是这种情况，那么我应该通知您，[**从 6.4.0 版本开始**](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/ChangeLog/Release%20History%20SC64.aspx)[支持在 ASP.NET 4.0 应用程序池下运行 Sitecore](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/ChangeLog/Release%20History%20SC64.aspx)**。**

 **所以，你有两个选择：

*   设置您的应用程序池以使用 ASP.NET 2.0（确保已安装 .NET 2.0）
*   将 Sitecore 实例升级到 6.4.0+（这可能是不可接受的）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:55:12.763

我不确定您是否因为打开项目的方式而遇到问题，如果您将其作为文件系统网站项目打开，您将需要创建一个 Web 应用程序项目并从那里开始。

您可以查看这篇博文： [简化 Sitecore Visual Studio 项目创建](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/10/Simplify-Visual-Studio-Project-Creation.aspx)（或[以前的版本](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/09/Create-a-Visual-Studio-2010-Project-for-a-Sitecore-Solution.aspx)），了解有关如何为 Sitecore 正确设置 Visual Studio 项目的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:56:17.423

我实际上认为这可能就像缺少波浪号一样简单。所以宁愿拥有

/sitecore/shell/Applications/Analytics/ReportRunner/DateSelector.ascx

你应该有

~/sitecore/shell/Applications/Analytics/ReportRunner/DateSelector.ascx**

# java - 关于好的迁移自动化软件的任何提示？

> ID：11291995
> 
> 赞同：0
> 
> 时间：2012-07-02T10:38:23.780
> 
> 标签：java, build, automation, migration, continuous-integration

我负责一个大型软件开发项目的一部分。我们有多个环境（dev、test、pre-prod、prod 等）和许多不同的软件组件。它们中的大多数都基于 Java/Weblogic（包含少量其他应用程序服务器）。

我们目前没有将配置和应用程序代码从一个环境迁移到另一个环境的好方法。代码被检入 SCM。要执行迁移，有人检查它并手动迁移它。这显然很冗长而且很容易出错——错误总是发生。

有没有人可以分享他们使用迁移工具的经验？我们不介意编写脚本（显然），但某种 GUI 可以使这变得容易，以及针对特定环境配置等情况的领先优势，确实会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:53:47.543

您可以在属性文件中拥有所有设置（一个用于开发，一个用于测试等）。在准备好将环境作为参数的部署脚本（sh、ant 等）之后，使用正确的属性文件构建/部署整个分发包。现在，当您有一种自动化的方式来执行此操作时，您可以在任何 CI 系统（如 Hudson）中设置作业，以便通过单击来运行它们。

# javascript - jquery：从元素中获取完整的css属性集作为字符串

> ID：11291997
> 
> 赞同：0
> 
> 时间：2012-07-02T10:38:31.083
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 可以获取与元素关联的所有 CSS 样式吗？](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)

如何使用 jQuery 或 JavaScript 从元素中获取完整的 css 属性集作为字符串？

```
var x = $('myelement').css().toString(); 
```

# android - 如何在活动上应用滑块动画

> ID：11291998
> 
> 赞同：1
> 
> 时间：2012-07-02T10:38:32.357
> 
> 标签：android

我想在活动中应用滑块动画意味着当用户单击按钮时，下一个屏幕将打开滑块动画。

**TEST2Activity.java**

```
public class TEST2Activity extends Activity {
    EditText dob;
    Button btn;
    SimpleDateFormat dateformat;
    Editable
    var;
    String str;

    /** Called when the activity is first created. */@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //  isOnline();
        Date date = new Date();
        date.getDate();
        dateformat = new SimpleDateFormat("dd-mm-yyyy");
        dob = (EditText) findViewById(R.id.dob);

        btn = (Button) findViewById(R.id.button1);

        str = dob.getText().toString();
        System.out.println("date is string" + str);
        System.out.println("date is string");
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {

                    Intent intent = new Intent(TEST2Activity.this, CommentChangeActivity.class);

                    startActivity(intent);

                    overridePendingTransition(R.anim.myslideleft, R.anim.myslideright);
                } catch (Exception e) {
                    System.out.println("the error in date is" + e);
                }
            }
        });
    }

    public boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(this.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        boolean result = false;
        if (ni != null) {
            if (ni.getState() == NetworkInfo.State.CONNECTED) {
                result = true;
            }
        }
        System.out.println("the internet connected is:" + result);
        return result;

    }
} 
```

**CommentChangeActivity.java**

```
public class CommentChangeActivity extends Activity {
    EditText showCategoryValue;
    EditText showItemValue;
    EditText showCommentValue;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.myfile);
    }
} 
```

**向左滑动 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="2000"
        android:fromXDelta="-50%p"
        android:toXDelta="0" />

    <alpha
        android:duration="2000"
        android:fromAlpha="0.0"
        android:toAlpha="1.0" />

</set> 
```

**向右滑动 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="2000"
        android:fromXDelta="50%p"
        android:toXDelta="0" />

    <alpha
        android:duration="2000"
        android:fromAlpha="0.0"
        android:toAlpha="1.0" />

</set> 
```

在活动代码中：

```
 startActivity(intent);
    overridePendingTransition(R.anim.slide_in_left, R.anim.slide_in_right);  

i have use this code but it doesn't work so please suggest me the solution of it.
helpers must be appreciated and thanks in advance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:43:08.653

尝试这个：

在左侧 xml 中滑动：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="100%p" android:toXDelta="0" android:duration="300"/>
</set> 
```

和这个

滑出左侧 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
  <set xmlns:android="http://schemas.android.com/apk/res/android">
      <translate android:fromXDelta="0" android:toXDelta="-100%p" android:duration="300"/>
  </set> 
```

你的代码应该是：

```
 overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_left); 
```

# magento - 在 magento 管理面板中创建 excel 文件上传

> ID：11291999
> 
> 赞同：2
> 
> 时间：2012-07-02T10:38:45.883
> 
> 标签：magento

我需要在 magento 管理面板中上传我自定义的 excel 文件。此 excel 文件数据将在结帐页面中过滤运输详细信息。所以我正在尝试在 magento 管理面板中创建新模块。

现在我无法在管理面板中创建 excel 文件上传选项。那么任何人都可以知道管理面板中的文件上传概念吗？或任何其他具有在magento中上传文件的默认功能？

有人可以建议我在管理员中导出 excel 文件的正确方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:51:16.567

要上传文件，您可以使用 Varien_File_Uploader 类：

```
try {
   $uploader = new Varien_File_Uploader("%NAME_OF_THE_INPUT_FILE_FIELD_IN_FORM%");
   $uploader->setAllowedExtensions(array('xls', 'xlsx'));
   $uploader->setAllowCreateFolders(true);

   $isValidMime = $uploader->checkMimeType(array('%excel_mime_type%'));
   if ($isValidMime) {
       $uploader->save($destinationDir, $newFilename);
   }
} catch (Exception e) {
  echo $e->getMessage();
} 
```

save方法的第二个参数是可选的