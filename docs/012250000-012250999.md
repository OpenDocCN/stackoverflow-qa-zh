# StackOverflow 问答 12250000-12250999

# asp.net - 在操作链接上显示评论

> ID：12250005
> 
> 赞同：1
> 
> 时间：2012-09-03T14:43:35.050
> 
> 标签：asp.net, css, asp.net-mvc

当用户鼠标悬停在操作链接上时如何显示评论？我正在使用 gridview，这是我的专栏之一，其中包含一个操作链接：

```
grid.Column(header: "", format:  (item) => Html.ActionLink("Détails", "Details",
 new { id = item.id_projet}, new { @class = "details" }), style: "actions") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:46:22.233

你的意思是一个标题？

```
grid.Column(header: "", format:  (item) => Html.ActionLink("Détails", "Details",
 new { id = item.id_projet}, new { @class = "details", @title = "text here" }),
 style: "actions") 
```

`text here`如果您悬停链接，这将显示文本。

# c# - 将 Visual Studio 生成的 soap 客户端发出的请求限制为单线程

> ID：12250007
> 
> 赞同：0
> 
> 时间：2012-09-03T14:43:53.900
> 
> 标签：c#, multithreading, soap, clients

我正在使用通过“添加服务参考”在 VS2010 中生成的客户端测试 SOAP 服务。

我正在并行运行测试（c. 10 个线程），这暴露了被测系统中的一些数据库锁定问题。但是，这不会立即解决，我不希望我的功能测试因为这个问题而失败。

结果，我将测试线程数减少到 1，并且正如预期的那样，我没有看到锁定问题，但是，这显然使我的测试套件变慢了很多。因此我想知道是否可以使用客户端配置来限制客户端只能同时发出一个请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:22:44.987

它不是需要限制其调用代码的soap客户端。Soap 调用将在其发出的任何线程中执行。如果您有多个线程的问题，这是因为您的代码中有多个线程，或者您正在尝试进行额外的服务调用或更新回调中的某些内容而不了解您所在的线程。

根据问题，您有许多解决方案，其中可能包括：

1.  从您的应用程序中删除多线程，不要使用回调并且不要启动额外的线程。

2.  或者理想情况下，确保在适当的时候分派回 UI，了解您所在的线程，以便修复潜在的锁定问题

[http://msdn.microsoft.com/en-us/library/ms591206.aspx](http://msdn.microsoft.com/en-us/library/ms591206.aspx)

```
 Me.Dispatcher.BeginInvoke(Sub()
                                  ' This will be executed on the UI Thread
                              End Sub) 
```

在您的问题中包含有问题的代码会很好（并且非常有用）。您使用哪个版本的 .net 以及您的应用程序是用什么编写的（Asp.net、WinForms？）也有助于获得一些背景信息。

注意：vb.net 中的示例代码，但你明白了；p

# java - 如何在 JPQL 中按带有德语变音符号的字符串排序？

> ID：12250008
> 
> 赞同：4
> 
> 时间：2012-09-03T14:43:55.140
> 
> 标签：java, jpa, jpql

使用 java 代码，可以通过以下方式正确地对德语变音符号进行排序：

```
Collections.sort(list, new Comparator<String>() {
    Comparator umlautCollator = Collator.getInstance(Locale.GERMAN);
    public int compare(String o1, String o2) {
        return umlautCollator.compare(o1, o2);
    }
}); 
```

我想在我的 JPQL 语句中执行这样的命令，而不使用后续的`sort`. 是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:06:49.170

您需要确保您的数据库支持您使用的字符集的 Unicode 排序规则，例如 UTF-8。默认情况下，Java ddes Unicode 这就是比较器类起作用的原因。

大概您的数据库没有 - 您可能使用的是 US-ASCII，对吧？

重新创建您的数据库并转换您的数据是一个艰难的答案。

# datamapper - DataMapper：对自定义类型设置默认验证

> ID：12250012
> 
> 赞同：0
> 
> 时间：2012-09-03T14:44:05.263
> 
> 标签：datamapper, ruby-datamapper

我刚刚编写了一个自定义 DM 类型来帮助我解决这个问题。继承自 String 和所有爵士乐。刚才我想要一个默认验证。所以，我作为用户不需要定义的东西，它只是隐含地存在。例如，对于布尔类型的属性，如果您传递的不是真假，它会使它的对象无效。我想要那样的东西。您知道这是否可行，以及在架构中最好的位置插入它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:00:48.357

我认为您可以在`dump`方法中添加它，例如

```
def dump(value)
  if valid_type?(value)
    value
  else
    raise "Invalid type specified"
  end
end

def valid_type?(value)
  #your validation code
end 
```

另一种方法是使用其中一个[dm-validations](http://datamapper.org/docs/validations.html)

在你的情况下，它会是

```
#Skipping class Definition
property :something, Your_dm_type
validates_with_block :something do
  if condition
    true
  else
   [false, "Invalid property specified"]
end 
```

或根据要求进行其他验证

# objective-c - 如何将浮点数舍入到最接近的值，该值可以除以二而无需休息？

> ID：12250013
> 
> 赞同：2
> 
> 时间：2012-09-03T14:44:05.623
> 
> 标签：objective-c, c

例如，我有一个浮点数 55.2f 并希望将其向下舍入，以便结果可以除以二而无需休息。

因此 55.2 将变为 54，因为这是可以除以 2 的最接近的较小“步长”。有这个功能还是我必须编写自己的算法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T14:46:45.303

如果您的结果必须保持为 a `float`，您可以执行以下操作：

```
float f=55.2f;
f=floorf(f/2.f)*2.f; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:46:41.933

先转换为整数类型，如`int`or `long`，然后清除最低位。

```
float f = 55.2f;
int   i = (int)f & ~1; 
```

* * *

**解释**

`~`表示按位求逆，即所有`0`位变为`1`，反之亦然。

所以，如果`1`有位模式

```
0...0001 
```

然后`~1`是

```
1...1110 
```

（这里我`...`用来表示所有中间位，具体取决于您平台上整数的大小。）

当您`&`（按位与）您的整数与 时`1...1110`，您将保留除最低位之外的每个位的值，这被强制为`0`。如果您仍然不明白，请参阅[按位 AND 运算符的说明。](http://en.wikipedia.org/wiki/Bitwise_operation#AND)

通过强制最低位为`0`，您将数字向下舍入到最接近的偶数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T14:47:16.127

您可以编写自己的算法，例如使用位运算符。

以下代码可用于清除号码的最后一位。偶数确实没有设置最后一位。

```
int 
f(float x) 
{ 
    return (int)x & ~1; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T14:46:23.413

怎么样`long int f = lrintf(x / 2);`，`x`你的浮标在哪里？

您也可以只说`int f = x / 2;`，但有些人认为这更昂贵，因为 C 标准要求特定的舍入模式，该模式可能是 CPU 原生的，也可能不是原生的。`lrintf`另一方面，该函数使用 CPU 的本机舍入模式。你需要`#include <math.h>`。

# c++ - 使用 libcurl 发送电子邮件的问题（C++ 和 Win32）

> ID：12250015
> 
> 赞同：0
> 
> 时间：2012-09-03T14:44:07.970
> 
> 标签：c++

我目前遇到了一些问题，并希望通过在此处发布来了解正在发生的事情。我想编写一个简单的 C++ 应用程序（或 C）来向 gmail 帐户发送电子邮件。我在一个 win32 (xp sp2) 环境中，我使用 dev C++ 作为我的编译器。我已经包含了 curl 库并且应用程序似乎可以正常编译，但是它不会发送电子邮件，也不会显示错误。这是我发现用于执行此操作的代码：

```
#include <stdio.h>
#include <string.h>
#include <curl/curl.h>
#include <conio.h>
#include <iostream>

/* This is a simple example showing how to send mail using libcurl's SMTP 
 * capabilities. It builds on the simplesmtp.c example, adding some
 * authentication and transport security.
 */ 

#define FROM    "<email@email.com>"
#define TO      "<email@gmail.com>"
#define CC      "<email@gmail.com>"

using namespace std; 

static const char *payload_text[]={
  "Date: Mon, 29 Nov 2010 21:54:29 +1100\n",
  "To: " TO "\n",
  "From: " FROM "(Example User)\n",
  "Cc: " CC "(Another example User)\n",
  "Message-ID: <dcd7cb36-11db-487a-9f3a-e652a9458efd@rfcpedant.example.org>\n",
  "Subject: SMTP TLS example message\n",
  "\n", /* empty line to divide headers from body, see RFC5322 */ 
  "The body of the message starts here.\n",
  "\n",
  "It could be a lot of lines, could be MIME encoded, whatever.\n",
  "Check RFC5322.\n",
  NULL
};

struct upload_status {
  int lines_read;
};

static size_t payload_source(void *ptr, size_t size, size_t nmemb, void *userp)
{
struct upload_status *upload_ctx = (struct upload_status *)userp;
const char *data;

if ((size == 0) || (nmemb == 0) || ((size*nmemb) < 1)) {
return 0;
}

data = payload_text[upload_ctx->lines_read];

if (data) {
size_t len = strlen(data);
memcpy(ptr, data, len);
upload_ctx->lines_read ++;
return len;
}
return 0;
}

int main(void)
{
  //cout << "starting";
  //_getch();
  CURL *curl;
  CURLcode res;
  struct curl_slist *recipients = NULL;
  struct upload_status upload_ctx;

  upload_ctx.lines_read = 0;

  curl = curl_easy_init();
  if (curl) {

    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1);
    /* This is the URL for your mailserver. Note the use of port 587 here,
     * instead of the normal SMTP port (25). Port 587 is commonly used for
     * secure mail submission (see RFC4403), but you should use whatever
     * matches your server configuration. */ 
    curl_easy_setopt(curl, CURLOPT_URL, "smtp://smtp.gmail.com:587");

/* In this example, we'll start with a plain text connection, and upgrade
 * to Transport Layer Security (TLS) using the STARTTLS command. Be careful
 * of using CURLUSESSL_TRY here, because if TLS upgrade fails, the transfer
 * will continue anyway - see the security discussion in the libcurl
 * tutorial for more details. */ 
curl_easy_setopt(curl, CURLOPT_USE_SSL, (long)CURLUSESSL_ALL);

/* If your server doesn't have a valid certificate, then you can disable
 * part of the Transport Layer Security protection by setting the
 * CURLOPT_SSL_VERIFYPEER and CURLOPT_SSL_VERIFYHOST options to 0 (false).
 *   curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0L);
 *   curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 0L);
 * That is, in general, a bad idea. It is still better than sending your
 * authentication details in plain text though.
 * Instead, you should get the issuer certificate (or the host certificate
 * if the certificate is self-signed) and add it to the set of certificates
 * that are known to libcurl using CURLOPT_CAINFO and/or CURLOPT_CAPATH. See
 * docs/SSLCERTS for more information.
 */ 
//curl_easy_setopt(curl, CURLOPT_CAINFO, "/path/to/certificate.pem");

/* A common reason for requiring transport security is to protect
 * authentication details (user names and passwords) from being "snooped"
 * on the network. Here is how the user name and password are provided: */ 
curl_easy_setopt(curl, CURLOPT_USERNAME, "username");
curl_easy_setopt(curl, CURLOPT_PASSWORD, "password");

/* value for envelope reverse-path */ 
curl_easy_setopt(curl, CURLOPT_MAIL_FROM, FROM);
/* Add two recipients, in this particular case they correspond to the
 * To: and Cc: addressees in the header, but they could be any kind of
 * recipient. */ 
recipients = curl_slist_append(recipients, TO);
recipients = curl_slist_append(recipients, CC);
curl_easy_setopt(curl, CURLOPT_MAIL_RCPT, recipients);

/* In this case, we're using a callback function to specify the data. You
 * could just use the CURLOPT_READDATA option to specify a FILE pointer to
 * read from.
 */ 
curl_easy_setopt(curl, CURLOPT_READFUNCTION, payload_source);
curl_easy_setopt(curl, CURLOPT_READDATA, &upload_ctx);

/* Since the traffic will be encrypted, it is very useful to turn on debug
 * information within libcurl to see what is happening during the transfer.
 */ 
curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

/* send the message (including headers) */ 
res = curl_easy_perform(curl);
/* Check for errors */ 
if(res != CURLE_OK)
  fprintf(stderr, "curl_easy_perform() failed: %s\n",
          curl_easy_strerror(res));

/* free the list of recipients and clean up */ 
curl_slist_free_all(recipients);
curl_easy_cleanup(curl);
_getch();

}

return 0;
} 
```

当我编译并运行它时，我看到黑屏一毫秒左右，然后什么也没有，没有发送电子邮件，没有错误等。我想通过添加'curl_easy_setopt（curl，CURLOPT_VERBOSE，1）;' （根据 libcurl 的网站推荐）将显示输出，但什么也没有。所以我在返回之前在末尾添加了“_getch()”行，但窗口仍然消失了。

我也试过在最后返回之前使用'system("pause")'也无济于事。目前看来我需要获取可读输出以进一步调试问题，以便我可以继续并获取此代码以发送电子邮件。

我也尝试将端口更改为 465 也无济于事。

有人知道这里发生了什么吗？感谢您的时间。

# javascript - jQuery 滑块在 Chrome 上不起作用（有间隔）

> ID：12250017
> 
> 赞同：0
> 
> 时间：2012-09-03T14:44:12.133
> 
> 标签：javascript, jquery, html, css, jquery-slider

我有一个由 jQuery 制作的滑块。它使用下一个和上一个按钮进行滑动，并且具有 setInterval 方法的自动滑动功能。它适用于 Internet Explorer 和 Firefox，但不适用于 Chrome。我该如何解决这个问题。T

我的小项目在[这里](http://www.filedropper.com/slider)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:54:09.273

这是因为当你这样做

```
var totalLi = $("#s li").length;
var liWidth = $("#s li").width();
var totalWidth = totalLi * liWidth;
$("#s").css("width", totalWidth); 
```

`images`未加载，浏览器不知道其`li`元素的宽度和宽度，因此`$("#s li").width()`提供`0`.

例如，如果你会写

```
var liWidth = $("#s").width(); 
```

代替

```
var liWidth = $("#s li").width(); 
```

然后它将起作用，因为浏览器`#s`从 css 知道元素宽度。

# javascript - Web 开发人员的知识图/表格

> ID：12250019
> 
> 赞同：0
> 
> 时间：2012-09-03T14:44:14.680
> 
> 标签：javascript, html, css

我看过程序员级别的一般图表（patterns\oop\langagues\testing 等知识）

有没有什么好的图表来评估你的 Web 开发知识（CSS\HTML\JavaScript\SVG\client-server 通信）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:48:13.303

检查这个

[http://smarterer.com/](http://smarterer.com/)

这是一个免费的技能基准。您会发现几个测验，例如 CSS/HTML/SQL/ASP/jQuery/Javascript...

优点：问题是由网站用户创建的：）

# java - JMS 序列化/反序列化机制

> ID：12250020
> 
> 赞同：1
> 
> 时间：2012-09-03T14:44:18.347
> 
> 标签：java, serialization, jms, deserialization

我想了解 JMS 如何在内部序列化和反序列化内容。从[ObjectMessage 的 Javadoc 中，](http://docs.oracle.com/javaee/6/api/javax/jms/ObjectMessage.html)我了解到该对象需要可序列化。但是，我不能将其视为 Java 序列化。我这样说是因为 JMS 消息也可以从非 Java 系统发送（也因为它可以用作 ESB 配置中的端点）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:47:02.467

> 我无法将其视为 Java 序列化

都是一样的。

> 我这样说是因为 JMS 消息也可以从非 Java 系统发送

他们将无法反序列化消息（没有 Java 的帮助）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:06:49.813

你误会了。格式的 JMS 消息`ObjectMessage`本质上不能由非 Java 对等方发送。

# android - 如何在android中设置开关小部件的默认值

> ID：12250021
> 
> 赞同：59
> 
> 时间：2012-09-03T14:44:29.080
> 
> 标签：android, xml

我正在使用几个开关小部件对我的 xml 文件进行编码。但我不知道如何将它们的默认值设置为 ON。我只想在 xml 文件中解决这个问题，所以没有 Java。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-09-03T14:53:22.283

要在您的 XML 文件中将 Switch 设置为“ON”，请使用以下命令：

```
android:checked="true" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-09T17:03:08.973

在 XML 文件中将 Switch 默认设置为 ON：

```
android:checked = "true" 
```

不要尝试使用 android:pressed = "true" 。运行应用程序时会抛出错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-16T14:05:50.340

您可以从代码本身将 Switch 默认设置为 ON/OFF。尝试这样的事情：

```
 switch.setChecked(true) // to set it true 
```

或者，

```
 switch.setChecked(false) // to set it false 
```

# python - 如何在不加载整个文件的情况下从 XLS 文件中获取工作表名称？

> ID：12250024
> 
> 赞同：57
> 
> 时间：2012-09-03T14:44:51.630
> 
> 标签：python, excel, pandas, xlrd

我目前正在使用 pandas 读取 Excel 文件并将其工作表名称呈现给用户，因此他可以选择他想使用的工作表。问题是文件非常大（70 列 x 65k 行），在笔记本上加载最多需要 14 秒（CSV 文件中的相同数据需要 3 秒）。

我在熊猫中的代码是这样的：

```
xls = pandas.ExcelFile(path)
sheets = xls.sheet_names 
```

我之前尝试过 xlrd，但得到了类似的结果。这是我的 xlrd 代码：

```
xls = xlrd.open_workbook(path)
sheets = xls.sheet_names 
```

那么，任何人都可以提出一种比读取整个文件更快的方法来从 Excel 文件中检索工作表名称吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-03T15:12:35.257

您可以使用[xlrd](http://pypi.python.org/pypi/xlrd)库并使用“on_demand=True”标志打开工作簿，这样就不会自动加载工作表。

比您可以以类似于 pandas 的方式检索工作表名称：

```
import xlrd
xls = xlrd.open_workbook(r'<path_to_your_excel_file>', on_demand=True)
print xls.sheet_names() # <- remeber: xlrd sheet_names is a function, not a property 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-05-27T05:37:42.277

我已经尝试过 xlrd、pandas、openpyxl 和其他此类库，随着文件大小在读取整个文件时增加，它们似乎都需要指数级时间。上面提到的其他使用“on_demand”的解决方案对我不起作用。以下函数适用于 xlsx 文件。

```
def get_sheet_details(file_path):
    sheets = []
    file_name = os.path.splitext(os.path.split(file_path)[-1])[0]
    # Make a temporary directory with the file name
    directory_to_extract_to = os.path.join(settings.MEDIA_ROOT, file_name)
    os.mkdir(directory_to_extract_to)

    # Extract the xlsx file as it is just a zip file
    zip_ref = zipfile.ZipFile(file_path, 'r')
    zip_ref.extractall(directory_to_extract_to)
    zip_ref.close()

    # Open the workbook.xml which is very light and only has meta data, get sheets from it
    path_to_workbook = os.path.join(directory_to_extract_to, 'xl', 'workbook.xml')
    with open(path_to_workbook, 'r') as f:
        xml = f.read()
        dictionary = xmltodict.parse(xml)
        for sheet in dictionary['workbook']['sheets']['sheet']:
            sheet_details = {
                'id': sheet['sheetId'], # can be @sheetId for some versions
                'name': sheet['name'] # can be @name
            }
            sheets.append(sheet_details)

    # Delete the extracted files directory
    shutil.rmtree(directory_to_extract_to)
    return sheets 
```

由于所有 xlsx 基本上都是压缩文件，因此我们直接从工作簿中提取底层 xml 数据并读取工作表名称，与库函数相比，这只需几分之一秒。

*基准测试：（在 4 张 6mb xlsx 文件上）*
**Pandas，xlrd：** 12 秒
**openpyxl：** 24 秒
**建议方法：** 0.4 秒

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-11-09T21:25:57.977

**根据我对标准/流行库的研究，截至2020 年**尚未实现/`xlsx`但`xls`您可以为`xlsb`. 无论哪种方式，这些解决方案都应该为您带来巨大的性能改进。对于`xls`, `xlsx`, `xlsb`.

下面以 ~10Mb文件为基准`xlsx`。`xlsb`

### `xlsx, xls`

```
from openpyxl import load_workbook

def get_sheetnames_xlsx(filepath):
    wb = load_workbook(filepath, read_only=True, keep_links=False)
    return wb.sheetnames 
```

*基准测试：* ~ **14 倍速度提升**

```
# get_sheetnames_xlsx vs pd.read_excel
225 ms ± 6.21 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
3.25 s ± 140 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

### `xlsb`

```
from pyxlsb import open_workbook

def get_sheetnames_xlsb(filepath):
  with open_workbook(filepath) as wb:
     return wb.sheets 
```

*基准测试：* ~ **56 倍速度提升**

```
# get_sheetnames_xlsb vs pd.read_excel
96.4 ms ± 1.61 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
5.36 s ± 162 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

*笔记：*

*   这是一个很好的资源 - [http://www.python-excel.org/](http://www.python-excel.org/)
*   `xlrd`自 2020 年起不再维护

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-02T15:14:48.043

通过将@Dhwanil shah 的答案与[此处](https://stackoverflow.com/a/57828581/12336205)的答案结合起来，我编写的代码也与只有一张纸的 xlsx 文件兼容：

```
def get_sheet_ids(file_path):
sheet_names = []
with zipfile.ZipFile(file_path, 'r') as zip_ref:
    xml = zip_ref.open(r'xl/workbook.xml').read()
    dictionary = xmltodict.parse(xml)

    if not isinstance(dictionary['workbook']['sheets']['sheet'], list):
        sheet_names.append(dictionary['workbook']['sheets']['sheet']['@name'])
    else:
        for sheet in dictionary['workbook']['sheets']['sheet']:
            sheet_names.append(sheet['@name'])
return sheet_names 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-21T17:28:57.017

传递了完整 pathlib 路径文件名的 Python 代码适配（例如，('c:\xml\file.xlsx')）。来自[Dhwanil shah](https://stackoverflow.com/users/9192804/dhwanil-shah)的回答，没有用于创建临时目录的 Django 方法。

```
import xmltodict
import shutil
import zipfile

def get_sheet_details(filename):
    sheets = []
    # Make a temporary directory with the file name
    directory_to_extract_to = (filename.with_suffix(''))
    directory_to_extract_to.mkdir(parents=True, exist_ok=True)
    # Extract the xlsx file as it is just a zip file
    zip_ref = zipfile.ZipFile(filename, 'r')
    zip_ref.extractall(directory_to_extract_to)
    zip_ref.close()
    # Open the workbook.xml which is very light and only has meta data, get sheets from it
    path_to_workbook = directory_to_extract_to / 'xl' / 'workbook.xml'
    with open(path_to_workbook, 'r') as f:
        xml = f.read()
        dictionary = xmltodict.parse(xml)
        for sheet in dictionary['workbook']['sheets']['sheet']:
            sheet_details = {
                'id': sheet['@sheetId'],  # can be sheetId for some versions
                'name': sheet['@name']  # can be name
            }
            sheets.append(sheet_details)
    # Delete the extracted files directory
    shutil.rmtree(directory_to_extract_to)
    return sheets 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-10-08T18:57:54.497

你也可以使用

```
data=pd.read_excel('demanddata.xlsx',sheet_name='oil&gas')
print(data) 
```

这里 demanddata 是您的文件名称 oil&gas 是您的工作表名称之一。假设您的工作表中可能有 n 个工作表。只需在 Sheet_name="Name of Your required sheet" 处提供您要获取的工作表名称

# c++ - 函数模板：具有类型特征的不同专业化

> ID：12250026
> 
> 赞同：6
> 
> 时间：2012-09-03T14:45:01.610
> 
> 标签：c++, templates, typetraits, function-templates

考虑到类模板，可以使用类型特征和虚拟启动器模板参数为某些类型的组提供模板特化。我之前已经[问过了](https://stackoverflow.com/questions/12161033/partial-template-specialization-restricted-to-certain-types)。

现在，对于函数模板，我需要同样的东西：即，我有一个模板函数，并且想要对一组类型进行专门化，例如，作为 class 子类型的所有类型`X`。我可以用这样的类型特征来表达这一点：

```
std::enable_if<std::is_base_of<X, T>::value>::type 
```

我想过这样做：

```
template <typename T, typename ENABLE = void>
void foo(){
    //Do something
}

template <typename T>
void foo<T,std::enable_if<std::is_base_of<A, T>::value>::type>(){
    //Do something different
} 
```

但是，这不起作用，因为函数模板不允许部分特化。那么该怎么做呢？也许是类型特征作为类型的默认参数？但是代码看起来如何呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T14:51:10.340

重载：

```
void foo_impl(T, std::false_type);

void foo_impl(T, std::true_type);

foo(T t) { foo_impl(t, std::is_base_of<A, T>()); } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:54:08.890

最接近您所要求的是`enable_if`返回类型：

```
template<typename T> typename std::enable_if<std::is_same<T, int>::value>::type foo();
template<typename T> typename std::enable_if<std::is_same<T, char>::value>::type foo(); 
```

但是，分派到辅助函数或类可能更具可读性和效率。

辅助功能：

```
template<typename T> void foo_helper(std::true_type);
template<typename T> void foo_helper(std::false_type);
template<typename T> void foo() { foo_helper(std::is_same<T, int>()); } 
```

助手类：

```
template<typename T, bool = std::is_same<T, int>::value> struct foo_helper {};
template<typename T> struct foo_helper<T, true> { static void foo(); };
template<typename T> struct foo_helper<T, false> { static void foo(); };
template<typename T> void foo() { foo_helper<T>::foo(); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:51:19.430

在类模板中进行实际实现（部分特化等），并编写一个小的包装模板函数，该函数除了在类模板中调用静态函数外什么都不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:55:06.193

尝试了一些事情，最后自己想出了正确的语法 - 抱歉问。我不知道 enable_if 有第二个参数。通过使用这个参数和一个默认值，这是可能的。

这是答案

```
template<typename T>
void foo(typename std::enable_if<std::is_base_of<A, T>::value,int>::type ENABLER = 0){
    std::cout << "T is a subclass of A!";
}

template<typename T>
void foo(typename std::enable_if<!std::is_base_of<A, T>::value,int>::type ENABLER = 0){
    std::cout << "T is NOT a subclass of A";
} 
```

# objective-c - Cocoa - 多个基于视图的 NSTableViews

> ID：12250028
> 
> 赞同：3
> 
> 时间：2012-09-03T14:45:13.110
> 
> 标签：objective-c, cocoa, nstableview

我刚开始自学可可，我遇到了一个（可能很简单）问题，显示多个基于视图的 NSTableViews 具有相同的委托和控制器（在我的例子中是 App Delegate）。我看到了这篇文章： [处理多个 NSTableView(s) 的最佳方法，](https://stackoverflow.com/questions/505062/best-way-to-handle-multiple-nstableviews) 但所描述的方法仍然给我错误 - 特别是

方法“numberOfRowsInTableView:”的重复声明 方法“tableView:viewForTableColumn:row:”的重复声明

显然，编译器没有看到不同的方法声明是针对不同的表视图的。

AppDelegate.m 文件中 tableviews 的代码是

```
@synthesize tableView1;
@synthesize tableView2;

-(NSUInteger)numberOfRowsInTableView:(NSTableView *)tableView1
{
    return 1;
}

-(NSUInteger)numberOfRowsInTableView:(NSTableView *)tableView2
{
    return 2;
}

- (NSView *)tableView:(NSTableView *)tableView1 viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSTableCellView *resultForTable1 = [tableView1 makeViewWithIdentifier:tableColumn.identifier owner:self];
    resultForTable1.textField.stringValue = @"This should appear in the first tableView";
    return resultForTable1;
}

- (NSView *)tableView:(NSTableView *)tableView2 viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSTableCellView *resultForTable2 = [tableView2 makeViewWithIdentifier:tableColumn.identifier owner:self];
    resultForTable2.textField.stringValue = @"This should appear in the second tableView";
    return resultForTable2;
} 
```

在我的 AppDelegate.h 文件中，我有：

```
@property (weak) IBOutlet NSTableView *tableView1;
@property (weak) IBOutlet NSTableView *tableView2; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:08:14.547

我认为您误解了该答案中描述的方法。

你得到一个编译器错误，因为你试图两次实现相同的方法。以下都是相同方法的实现：

```
- (void)setBlah:(id)aBlah {
- (void)setBlah:(id)newBlah {
- (void)setBlah:(id)theNewBlah { 
```

赋予`(id)`参数类型后面的参数的不同“名称”仅在该方法的实现块中是本地的。

您应该能够使用如下代码完成您想做的事情：

```
@synthesize tableView1;
@synthesize tableView2;

- (NSUInteger)numberOfRowsInTableView:(NSTableView *)aTableView {
    if (aTableView == tableView1) return 1;
    else if (aTableView == tableView2) return 2;
    return 0;
}

- (NSView *)tableView:(NSTableView *)aTableView
     viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

    NSTableCellView *tableCellView = [aTableView
                   makeViewWithIdentifier:tableColumn.identifier owner:self];
    if (aTableView == tableView1) {
        tableCellView.textField.stringValue = 
                 @"This should appear in the first tableView";
    } else if (aTableView == tableView2) {
        tableCellView.textField.stringValue = 
                 @"This should appear in the second tableView";
    }
    return tableCellView;
} 
```

请注意，我确保将参数命名为`aTableView`与实例变量不同的名称，以便我可以成功地将其与以下几行中的实例变量进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:06:46.133

您不会多次复制这些方法——您没有提供参数，“tableView1”、tableView2”等，表视图调用这些方法并将自己作为参数发送。所以，如果你想使用多个表的相同委托，您将 if 语句放在委托方法中，以确定哪个表发送了消息。为每个表声明一个 IBOutlet，然后执行（以伪代码） if table1 .... else if table2 ...等.

# c++ - 如何设计具有改进可用性和可读性的 OO 图节点类？

> ID：12250029
> 
> 赞同：0
> 
> 时间：2012-09-03T14:45:27.767
> 
> 标签：c++, oop, architecture

这是一个基本的 OO 设计问题。我正在用 C++ 编写类，以根据已解析的输入 C 文件来表示流程图中的项目。

简单地说，我们有 2 种类型的项目（类）：**FlowChartActionItem**和**FlowChartConditionItem**。它们分别代表流程图的动作和决策/条件元素。它们还分别表示存在于输入 C 文件中的语句和 If 条件。这两个类都继承**了 FlowChartItem**。

每个子类都有许多指向它们后面的项目的指针；是的，我们有一个图表，带有节点（项目）和链接（指针）。但是**FlowChartActionItem**只有一个外向指针，而**FlowChartConditionItem**有 3 个外向指针（对于 then-statements 分支，else-statements 分支和指向 if 条件两个分支之后的任何内容的指针。

我的问题是为外向指针（nextItems）编写一个简洁的设置器。看看课程：

```
class FlowChartItem
{
public:
    //I **need** this setter to stay in the parent class FlowChartItem
    virtual void SetNextItem(FlowChartItem* nextItem, char index) = NULL;
}; 
```

-

```
class FlowChartActionItem:public FlowChartItem
{
public:
    FlowChartItem* nextItem; //Only 1 next item
public: 
    void SetNextItem(FlowChartItem* nextItem, char index);
}; 
```

-

```
class FlowChartConditionItem: public FlowChartItem
{
public:
    FlowChartItem* nextItem;
    FlowChartItem* trueBranchItem;
    FlowChartItem* falseBranchItem; //we have 3 next items here
public:
    void SetNextItem(FlowChartItem* nextItem, char index);
}; 
```

我需要一个不依赖于子类拥有的指针数量的通用设置器。如您所见，我使用 char index 来告诉设置器要设置哪个指针。但我不喜欢这样，我需要让事情变得更整洁。因为代码将不可读，例如：

```
item1.setNextItem(item2,1); 
```

我们不记得 1 是什么意思？当时的分支？别的？??

显而易见的答案是在 FlowCharItem 中定义一个枚举，但是我们将遇到以下两个问题之一：

1- 现在将定义枚举值，因此将为当前子类 FlowChartActioItem 和 FlowChartConditionItem 量身定制，因此对未来子类的 SetNextItem 调用将具有非常差的可读性。更糟糕的是，他们不能有超过 3 个向外的指针！

2-通过让未来子类的开发人员编辑 FlowChartItem 的头文件并在枚举中添加任何值来解决第一个问题！当然不能接受！

我有什么解决方案来保持 - 良好的可读性 - 我的课程的整洁可扩展性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:17:59.507

我正在回避您对基类中“通用” SetNextItem 的可疑需求，并将提出一种您可以实现您的想法的方法。

您*可以*将`FlowChartItem*`项目存储在`std::map<std::string, FlowChartItems*>`（我称之为邻接映射）中，并按名称设置项目。这样，子类可以拥有任意数量的邻接，并且无需维护邻接类型的中心枚举。

```
class FlowChartItem
{
public:
    virtual void SetAdjacency(FlowChartItem* item, const std::string &type)
    {
        // Enforce the use of a valid adjacency name
        assert(NameSet().count(type) != 0);

        adjacencyMap_[name] = nextItem
    }

protected:
    // Subclasses must override this and return a set of valid adjacency names
    const std::set<std::string>& NameSet() = 0;

    std::map<std::string, FlowChartItem*> adjacencyMap_;
};

class FlowChartActionItem : public FlowChartItem
{
public:
    // Convenience member function for when we're dealing directly
    // with a FlowChartActionItem.
    void SetNextItem(FlowChartItem* item) {SetAdjacency(item, "next");}

protected:
    const std::set<std::string>& NameSet()
    {
        // Initialize static nameSet_ if emtpy
        return nameSet_;
    }

private:
    // One set for the whole class (static).
    const static std::set<std::string> nameSet_;

    static std::set<std::string> MakeNameSet()
    {
        std::set<std::string> names;
        names.insert("next");
        return names;
    }
}

// Initialize static member
const std::set<std::string> FlowChartActionItem::nameSet_ =
    FlowChartActionItem::MakeNameSet(); 
```

用法：

```
item1.SetAdjacency(&item2, "next"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:50:03.580

这是一种常见的架构困境。不同的子类具有略微不同的共享行为，您需要以某种有意义的方式将共同本质提取到基类中。您通常会后悔的一个陷阱是让子类功能渗入父类。例如，我不会为 FlowChartItem 中定义的输出连接类型推荐一组潜在的枚举名称。这些名称仅在使用它们的单个子节点中才有意义。使每个子类复杂化以适应其兄弟姐妹的设计同样糟糕。最重要的是，亲！保持。它。简单的。

在这种情况下，感觉就像你想多了。围绕它代表什么以及它将如何被其他代码使用的抽象概念设计您的父类，而不是它的继承者将如何专门化它。

可以更改名称 SetNextItem 以更清楚地说明这两个参数的作用。它只是整个图表意义上的“下一个”项目，而不是单个 FlowChartItem 的上下文。流程图是有[向图](http://en.wikipedia.org/wiki/Directed_graph)，每个节点通常只知道自己及其连接。（另外，你不是在写 Visual Basic，所以容器索引从 0 开始！:-)）

```
virtual void SetOutConnectionByIndex(FlowChartItem* nextItem, char index); 
```

或者，如果您更喜欢较短的名称，那么您可以设置“N'th”输出项： `SetNthOutItem`.

由于使用超出范围的索引设置子级无效，因此您可能希望在 FlowChartItem 中有另一个纯虚函数，它返回支持的最大子级数并使 SetChildByIndex 返回成功/失败代码（或者如果您'是这些人中的一员，抛出异常）如果索引超出范围。

```
virtual bool SetChildByIndex(FlowChartItem* item, char index); 
```

现在......写完所有这些后，我开始想知道您拥有的将调用此函数的代码。它真的只知道作为 FlowChartItem 的每个节点，但仍然需要以它不知道其重要性的特定顺序设置它的子节点吗？如果您有其他代码知道实际项目类型及其子订单的含义，并且该代码将项目指针及其索引号提供给执行设置的代码，这可能是有效的。也许是反序列化代码，但这不是处理序列化的正确方法。FlowChartItem 是否通过严格的 API 公开，并且图表是由知道不同类型的流程图项但无法访问实际类的代码构建的？在那种情况下可能有效，但我现在推测的远远超出了你的细节'

但是，如果这个函数只会被知道真实项目类型、可以访问实际类并且知道索引含义的代码调用，那么它可能根本不应该在基类中。

但是，我可以想象有很多类型的代码需要按顺序获取 FlowChartItem 的子项，但不知道该顺序的重要性。绘制流程图的代码，执行流程图的代码，等等。如果您为简洁起见减少您的问题并且也在考虑类似的 getter 方法，那么上述建议将适用（尽管您也可以考虑使用[迭代器](http://en.wikipedia.org/wiki/Iterator)模式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:49:46.833

> 我需要一个不依赖于子类拥有的指针数量的通用设置器。

拥有像这样的可变结构的唯一方法是允许客户端访问数据结构，比如说，`std::vector<FlowChartItem*>`或`std::unordered_map<unsigned int, FlowChartItem*>`其他。他们可以读取它并设置值。

从根本上说，只要您尝试*动态*设置*静态*项目，就会一团糟。您正在尝试实现自己的高度原始的反射系统。

*如果您希望在没有*语言内置反射系统的情况下动态设置它们，*或者*无休止地浪费您的生命来尝试使其工作，那么您需要拥有动态项目。

作为奖励，如果你有类似的东西，你的派生类的用例就会少很多，你甚至可以摆脱它们。WinRAR™。

# web-services - 以 WS-I 合规模式生成 Web 服务客户端

> ID：12250037
> 
> 赞同：6
> 
> 时间：2012-09-03T14:46:19.730
> 
> 标签：web-services, magento, soap, ws-i

我正在尝试使用 Visual Studio 2010 创建一个 Web 服务客户端。如果我使用版本 SOAP V2 中的 wsdl 文件，该客户端运行良好。
当我在 Magento 中设置属性`WS-I Compliance`并`Yes`在 VS2010 中重新编译 Web 服务客户端时，它不起作用！！！某些方法从生成的 WSDL 文件中消失。

如果我使用该工具生成 java Web 服务客户端，我会发现同样的问题`wsimport`。
知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:00:01.907

我遇到了同样的问题，而不是注释掉 catalogProductAttributeRemove，我实际上查看了丢失的内容并将附加部分添加到我的 wsi.xml 文件中。感谢 Juanma R. 为我指出需要更正的文件的方向。

我引用了 catalogProductAttributeCreate 的条目，作为解决此问题可能需要存在的其他部分的参考点。我对 WSDL 真的一无所知，只是试图寻找可能缺少的东西。

更改文件后，我刷新了 Magento 中的所有缓存，并确认新条目显示在 /index.php/api/v2_soap?wsdl=1 的 WSDL 文件中。然后我删除了添加到 VS 2010 的 Web 引用，并再次执行了添加 Web 引用的步骤。这次添加后我没有错误。

我正在修补的 Magento 版本是 Magento Enterprise 1.12.0.2，但我希望它适用于与 catalogProductAttributeRemove 显示相同错误的其他版本。

这是我在 wsi.xml 文件中更改的内容的快速差异：

```
*** Z:\mage-1-12-0-2.dev\htdocs\app\code\core\Mage\Catalog\etc\wsi - Copy.xml backup    Tue Jul 3 12:08:31 2012 UTC
--- Z:\mage-1-12-0-2.dev\htdocs\app\code\core\Mage\Catalog\etc\wsi.xml  Fri Nov 9 18:40:58 2012 UTC
***************
*** 1509,1520 ****
                  <xsd:complexType>
                      <xsd:sequence>
                          <xsd:element minOccurs="1" maxOccurs="1" name="result" type="xsd:string" />
                      </xsd:sequence>
                  </xsd:complexType>
              </xsd:element>
          </xsd:schema>
      </wsdl:types>
      <wsdl:message name="catalogProductCurrentStoreRequest">
          <wsdl:part name="parameters" element="typens:catalogProductCurrentStoreRequestParam" />
      </wsdl:message>
      <wsdl:message name="catalogProductCurrentStoreResponse">
--- 1509,1540 ----
                  <xsd:complexType>
                      <xsd:sequence>
                          <xsd:element minOccurs="1" maxOccurs="1" name="result" type="xsd:string" />
                      </xsd:sequence>
                  </xsd:complexType>
              </xsd:element>
+ 
+           
+ <!-- Added by Matt Johnson 2012-11-09 to fix VS 2010 support of SOAP reference -->
+           <xsd:element name="catalogProductAttributeRemoveRequestParam">
+               <xsd:complexType>
+                   <xsd:sequence>
+                       <xsd:element minOccurs="1" maxOccurs="1" name="sessionId" type="xsd:string" />
+                       <xsd:element minOccurs="1" maxOccurs="1" name="attribute" type="xsd:string" />
+                   </xsd:sequence>
+               </xsd:complexType>
+           </xsd:element>
+           <xsd:element name="catalogProductAttributeRemoveResponseParam">
+               <xsd:complexType>
+                   <xsd:sequence>
+                       <xsd:element minOccurs="1" maxOccurs="1" name="result" type="xsd:boolean" />
+                   </xsd:sequence>
+               </xsd:complexType>
+           </xsd:element>
+           
+           
          </xsd:schema>
      </wsdl:types>
      <wsdl:message name="catalogProductCurrentStoreRequest">
          <wsdl:part name="parameters" element="typens:catalogProductCurrentStoreRequestParam" />
      </wsdl:message>
      <wsdl:message name="catalogProductCurrentStoreResponse">
***************
*** 1883,1894 ****
      <wsdl:message name="catalogProductAttributeCreateRequest">
          <wsdl:part name="parameters" element="typens:catalogProductAttributeCreateRequestParam" />
      </wsdl:message>
      <wsdl:message name="catalogProductAttributeCreateResponse">
          <wsdl:part name="parameters" element="typens:catalogProductAttributeCreateResponseParam" />
      </wsdl:message>
      <wsdl:portType name="{{var wsdl.handler}}PortType">
          <wsdl:operation name="catalogCategoryCurrentStore">
              <wsdl:documentation>Set_Get current store view</wsdl:documentation>
              <wsdl:input message="typens:catalogCategoryCurrentStoreRequest" />
              <wsdl:output message="typens:catalogCategoryCurrentStoreResponse" />
          </wsdl:operation>
--- 1903,1923 ----
      <wsdl:message name="catalogProductAttributeCreateRequest">
          <wsdl:part name="parameters" element="typens:catalogProductAttributeCreateRequestParam" />
      </wsdl:message>
      <wsdl:message name="catalogProductAttributeCreateResponse">
          <wsdl:part name="parameters" element="typens:catalogProductAttributeCreateResponseParam" />
      </wsdl:message>
+ 
+ <!-- Added by Matt Johnson 2012-11-09 to fix VS 2010 support of SOAP reference -->
+   <wsdl:message name="catalogProductAttributeRemoveRequest">
+       <wsdl:part name="parameters" element="typens:catalogProductAttributeRemoveRequestParam" />
+   </wsdl:message>
+   <wsdl:message name="catalogProductAttributeRemoveResponse">
+       <wsdl:part name="parameters" element="typens:catalogProductAttributeRemoveResponseParam" />
+   </wsdl:message> 
+   
      <wsdl:portType name="{{var wsdl.handler}}PortType">
          <wsdl:operation name="catalogCategoryCurrentStore">
              <wsdl:documentation>Set_Get current store view</wsdl:documentation>
              <wsdl:input message="typens:catalogCategoryCurrentStoreRequest" />
              <wsdl:output message="typens:catalogCategoryCurrentStoreResponse" />
          </wsdl:operation>
***************
*** 2760,2771 ****
                  <soap:body use="literal" />
              </wsdl:input>
              <wsdl:output>
                  <soap:body use="literal" />
              </wsdl:output>
          </wsdl:operation>
      </wsdl:binding>
      <wsdl:service name="{{var wsdl.name}}Service">
          <wsdl:port name="{{var wsdl.handler}}Port" binding="typens:{{var wsdl.handler}}Binding">
              <soap:address location="{{var wsdl.url}}" />
          </wsdl:port>
      </wsdl:service>
--- 2789,2814 ----
                  <soap:body use="literal" />
              </wsdl:input>
              <wsdl:output>
                  <soap:body use="literal" />
              </wsdl:output>
          </wsdl:operation>
+ 
+ 
+ <!-- Added by Matt Johnson 2012-11-09 to fix VS 2010 support of SOAP reference -->        
+       <wsdl:operation name="catalogProductAttributeRemove">
+           <soap:operation soapAction="" />
+           <wsdl:input>
+               <soap:body use="literal" />
+           </wsdl:input>
+           <wsdl:output>
+               <soap:body use="literal" />
+           </wsdl:output>
+       </wsdl:operation>
+       
+       
      </wsdl:binding>
      <wsdl:service name="{{var wsdl.name}}Service">
          <wsdl:port name="{{var wsdl.handler}}Port" binding="typens:{{var wsdl.handler}}Binding">
              <soap:address location="{{var wsdl.url}}" />
          </wsdl:port>
      </wsdl:service> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:09:47.220

原始 Magento Core 代码中存在错误，与操作“catalogProductAttributeRemove”（模块 core/Mage/Catalog）有关。

为了解决它，我在模块目录的 wsi.xml 文件中注释了以下操作

```
 <!--wsdl:operation name="catalogProductAttributeRemove">
    <wsdl:documentation>Delete attribute</wsdl:documentation>
    <wsdl:input message="typens:catalogProductAttributeRemoveRequest" />
    <wsdl:output message="typens:catalogProductAttributeRemoveResponse" />
</wsdl:operation--> 
```

之后，使用 VS2010 自动构建 Web 服务客户端就完美了！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-23T16:47:56.013

我将 diff 包含在 1.7.2 版的 wsi.xml 中，并[在此处](http://esync.de/magento-wsdl-defect-catalogProductAttributeRemoveResponse)上传。

所以，如果你不能正确读取差异，你可以直接使用这个文件。

# java - 从类实例变量创建键/值对的简写方法是什么？

> ID：12250038
> 
> 赞同：1
> 
> 时间：2012-09-03T14:46:19.780
> 
> 标签：java

为类的所有字符串实例变量创建键/值对的最佳方法应该是什么？有没有图书馆在做这样的任务？

我正在使用基于反射的向后查找来做同样的事情。但它似乎做了很多工作。

例如：

我有一堂课

```
public class Account implements ManagedEntity {

private String accountNumber;

public Account(String accountNumber) {
    this.accountNumber = accountNumber;
}
} 
```

如果`Account`像 blelow 一样创建类的实例，Account ac = new Account("abc");

输出映射应类似于：[{"accountNumber", "abc"}]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:14:33.047

正如 Peter Lawrey 在其中一条评论中指出的那样，如果您正在寻找一个可以为您进行转换的库，那么一个可能的答案是[Apache Commons BeanUtils](http://commons.apache.org/beanutils/)：

您可以使用该[`BeanUtils`](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/BeanUtils.html)库中的类：

```
Account account = new Account("abc");
Map accountMap = new HashMap();
BeanUtils.populate(account, accountMap); 
```

或者使用[`BeanMap`](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/BeanMap.html)实现会更容易：

```
Account account = new Account("abc");
Map accountMap = new BeanMap(account); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:17:56.493

[就像 Peter Lawrey 和这里](https://stackoverflow.com/questions/5856895/java-reflection-beans-property-api)提到的那样，就像

```
Account ac = new Account("abc");
Map<String, Object> properties = BeanUtils.describe(ac); 
```

要将其限制为 String 属性，您可以使用[BeanUtilsBean](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/BeanUtilsBean.html)实例，将[ConvertUtilsBean](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/ConvertUtilsBean.html)的子类传递给构造函数。子类覆盖[查找方法](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/Converter.html)，如果该类不是，则返回 null `String`。

# java - 创建自己的 SSO 的建议 - 我应该将其公开给 REST 还是将其封装在 API 中？

> ID：12250043
> 
> 赞同：3
> 
> 时间：2012-09-03T14:46:34.237
> 
> 标签：java, api, rest, single-sign-on

在工作中，我们正在开发多个高度模块化的系统，它们之间不应存在硬依赖。现在我们需要这些系统共享一个通用的身份验证和安全机制——或者换句话说——SSO（单点登录）。很明显，我们将不得不制作另一个处理授权、身份验证和安全管理的模块——SSO 模块。关键是让它与我们的其他系统正确集成。

我能想到的两种方法是：

1) 从 SSO 公开一个 RESTful 服务，允许其他两个系统执行身份验证和授权操作。

2) 公开一个用于身份验证和授权的通用 API，它将包装我们的 SSO 功能并让两个系统引用该 API 并直接使用它。

目前我们没有考虑在这个领域使用任何第三方解决方案，并且我们已经在 will be SSO 模块上做了一些工作，所以我们更愿意坚持一个最能利用现有工作的简单解决方案。

我们应该选择哪种方法，为什么？每一个相对于另一个的显着优势是什么？有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:20:04.187

“我应该将其公开给 REST 还是将其封装在 API 中？”

追求两全其美。

1.  将身份验证和授权模块公开为 RESTful 服务，以实现最大的互操作性，而不管为每个模块选择的语言、框架或平台如何。任何可以通过 HTTP 进行通信的东西都可以使用它。
2.  然后用您选择的语言开发一个与您的 RESTful 服务通信的库；这将使多个模块更容易使用集中式身份验证机制。因此，您将拥有用 ruby​​、java 等编写的小型客户端，具体取决于您用于模块的语言。

这种代码重用是面向服务架构的关键租户之一，在我看来也是要走的路。根据我们在 BrightTag 和其他公司的经验，我和几位同事在[最近的一次演讲](http://www.slideshare.net/BrightTag/automating-cloud-applications-using-open-source)中更深入地描述了这一点。

[许多像CAS](http://www.jasig.org/cas)这样的“企业”SSO 系统使用非常相似的方法（尽管 CAS 协议不是 RESTful）。如果你想要更高级的功能，我肯定会给 CAS 看看。

# php - getimagesize() 限制远程 URL 的文件大小

> ID：12250044
> 
> 赞同：1
> 
> 时间：2012-09-03T14:46:35.840
> 
> 标签：php, validation, getimagesize

我可以[`getimagesize()`](http://php.net/manual/en/function.getimagesize.php)用来验证图像，但问题是如果淘气的用户放置一个[10GB 随机文件](http://proof.ovh.net/files/10Gio.dat)的链接，那么它会破坏我的生产服务器的带宽。如何限制文件大小`getimagesize()`？（例如，最大图像大小为 5MB）

PS：我在问之前做了[研究](http://www.php.net/manual/en/function.getimagesize.php#87188)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:53:11.707

您不想`getimagesize('http://example.com')`一开始就这样做，因为这将下载图像一次，检查大小，然后丢弃下载的图像数据。*这*确实是对带宽的浪费。

因此，将下载过程与检查图像大小分开。例如，`fopen`用来打开图片的URL，一点一点的读，写到一个临时文件，记下你读了多少。一旦超过 5MB 并且仍未完成阅读，您将停止并拒绝该图像。

您*可以在开始实际下载**之前*尝试读取 HTTP Content-Size 标头以清除明显较大的文件，但您不能依赖它，因为它可能被欺骗或省略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:53:52.550

这是一个[示例](http://tracker.phpbb.com/browse/PHPBB3-8672)，您需要进行一些更改以满足您的要求。

```
function getimagesize_limit($url, $limit)
{
 global $phpbb_root_path;
 $tmpfilename = tempnam($phpbb_root_path . 'store/', unique_id() . '-');
  $fp = fopen($url, 'r');
 if (!$fp) return false; 
 $tmpfile = fopen($tmpfilename, 'w');
  $size = 0;
 while (!feof($fp) && $size<$limit)
 {
  $content = fread($fp, 8192);
  $size += 8192;  fwrite($tmpfile, $content);
 }
  fclose($fp);
 fclose($tmpfile);
  $is = getimagesize($tmpfilename);
 unlink($tmpfilename);
 return $is;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T15:22:36.357

您可以单独下载文件，设置您希望下载的最大大小：

```
function mygetimagesize($url, $max_size = -1)
{
        // create temporary file to store data from $url
        if (false === ($tmpfname = tempnam(sys_get_temp_dir(), uniqid('mgis')))) {
                return false;
        }
        // open input and output
        if (false === ($in = fopen($url, 'rb')) || false === ($out = fopen($tmpfname, 'wb'))) {
                unlink($tmpfname);
                return false;
        }
        // copy at most $max_size bytes
        stream_copy_to_stream($in, $out, $max_size);

        // close input and output file
        fclose($in); fclose($out);

        // retrieve image information
        $info = getimagesize($tmpfname);

        // get rid of temporary file
        unlink($tmpfname);

        return $info;
} 
```

# ios - UIImageView 内存泄漏

> ID：12250047
> 
> 赞同：0
> 
> 时间：2012-09-03T14:46:41.087
> 
> 标签：ios, xcode, memory-leaks

在我的应用程序中，我正在向我的应用程序加载一系列图像，这些图像`UIImageView`是在`init`Method上创建的

```
- (UIImage *)getImage:(int)currentIndex {
    NSString *path = [self getImagePath:currentIndex];
    [self.imageView setAccessibilityLabel:path]; 

    path=[bundle pathForResource:path ofType:extension];    
    return  [UIImage imageWithContentsOfFile:path] ;

}

- (void)changeImage:(int)currentIndex {

    [self.imageView setImage:nil ];
    [self.imageView setImage:[self getImage:currentIndex]];

} 
```

但是这段代码会导致内存泄漏。比如

**-malloc - 7KB - imageIO - png_malloc**

我已经尝试使用适当的发布调用“[[UIImage alloc] initWithContentsOfFile]”，但仍然没有运气。

我在这里缺少什么。

大约全班

```
- (id)initWithFrame:(CGRect)frame andBundle:(NSBundle *) bundleTobeInjected {

    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code.
    self.opaque = YES;
        bundle=bundleTobeInjected;
        commonFunctions=[[Common alloc] init];
        self.imageView = [[UIImageView alloc] initWithFrame:frame] ;
        [self.imageView setImage:nil ];
        self.imageView.contentMode = self.contentMode;
        [self addSubview:imageView];
        [self setAccessibilityEnabled];
    }
    return self;
}
-(void)setAccessibilityEnabled
{
    self.imageView.isAccessibilityElement=true;
}

#pragma mark - Custom Logic
- (NSString *)getImagePath:(int)currentIndex {

    NSString *path = [NSString stringWithFormat:@"%@%d%@", prefix,currentIndex,[commonFunctions imageNamedSmartForRotationSuffix]];
    NSLog(@"%@", path);
    return path;
}

- (UIImage *)getImage:(int)currentIndex {
    NSString *path = [self getImagePath:currentIndex];
    [self.imageView setAccessibilityLabel:path]; 

    path=[bundle pathForResource:path ofType:extension];    
    return  [UIImage imageWithContentsOfFile:path] ;

}

-(void)changeImage:(int)currentIndex {

    [self.imageView setImage:nil ];
    [self.imageView setImage:[self getImage:currentIndex]];

}

-(void)dealloc{
    [extension release];
    [prefix release];
    [defaultImage release];
    [image release];
    [imageView release];
    [commonFunctions release];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:56:02.633

该代码不会泄漏。您的泄漏在其他地方:)

泄漏在`init`方法中。看看这一行：

```
self.imageView = [[UIImageView alloc] initWithFrame:frame]; 
```

该行创建了一个*您拥有的图像视图，*因为您使用了一种`init`方法。然后，您将其分配给*再次拥有它的财产，*因为我猜您的财产是`retain`. 将 imageView 分配给您的属性后，您需要释放它，如下所示：

```
self.imageView = [[[UIImageView alloc] initWithFrame:frame] autorelease]; 
```

* * *

PS你不需要这条线

```
[self.imageView setImage:nil ]; 
```

# wcf - 运行角色的计算机是否相同？

> ID：12250051
> 
> 赞同：1
> 
> 时间：2012-09-03T14:46:56.180
> 
> 标签：wcf, azure, self-hosting

我有一个自托管的 wcf 服务，其中包含一个运行的启动任务

```
netsh http add urlacl url=https://+:{PORT}/{SERVICENAME} user=everyone listen=yes delegate=yes" 
```

以前该服务没有 ssl，但旧的 http url 保留仍然存在（或者是由我不知道的其他东西添加的）。

那么我需要在启动任务中添加一个 netsh 删除吗？

编辑：我将桌面版删除到角色以检查预订是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:28:10.530

为了让您更好地理解该场景，当您在云中部署应用程序时，您是在虚拟化环境中的虚拟机中运行应用程序。您的应用程序将在数据中心内运行，但虚拟机将托管在主机上，该主机可因任何特定原因随时更改。这可能是由于来宾操作系统或主机操作系统更新、硬件故障、资源更改要求以及任何其他原因。因此，您不应认为您的虚拟机将始终相同，更具体地说，它是“虚拟的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:40:37.427

你永远不能假设它会是一样的，它通常是，但如果出现硬件故障并且你的角色在其他地方的数据中心内重新启动，它肯定不会是。任何启动任务都需要是幂等的。

# heroku - 我们如何更改 Heroku 插件的所有权

> ID：12250056
> 
> 赞同：2
> 
> 时间：2012-09-03T14:47:03.680
> 
> 标签：heroku

是否可以更改 Heroku 插件的所有权？如果是这样，我们该怎么做？事实上，我想将一个附加组件从一个 Heroku 帐户转移到另一个帐户。

让我更详细地阐述我的场景以便清楚。

我使用我的测试提供者帐户创建了一个附加组件。有什么方法可以从我的测试帐户中删除插件并创建与我的官方提供者帐户同名的插件？事实上，在 Provider 的文档中没有关于删除插件或将其移动到不同帐​​户的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:51:21.373

谷歌搜索把我带到了[这个支持页面](https://getsatisfaction.com/heroku/topics/how_can_i_transfer_a_heroku_app_to_a_new_owner)，上面写着

> 这目前取决于应用程序是否有任何与之相关的付费资源。
> 
> 对于没有付费资源的应用程序，您可以在命令行中使用“herokusharing:transfer”将应用程序转移给新所有者。
> 
> 对于具有付费资源的应用程序，您有两种选择。
> 
> 1）删除所有付费资源，像免费应用一样转移应用，然后让新所有者重新添加付费资源。
> 
> 2) 新旧所有者都应在[http://support.heroku.com](http://support.heroku.com)提交支持票证，授权转让，新所有者接受应用程序的费用。

另请查看 Heroku 开发中心上的[转移应用程序](https://devcenter.heroku.com/articles/transferring-apps)和[与其他人协作](https://devcenter.heroku.com/articles/sharing)文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T13:46:49.287

由于您谈论的是作为附加组件[提供商](https://addons.heroku.com/provider)[的附加组件](https://addons.heroku.com)所有权，而不仅仅是您的 heroku 应用程序的所有权，我想说您可能应该通过电子邮件联系 heroku 附加组件支持团队。[请在此处查看此页面以获取电子邮件地址。](https://addons.heroku.com/provider/resources)希望作为附加提供商，如果您提交帮助票，他们也将能够为您提供帮助。

# yii - Yii 索引删除 - 我错过了什么？

> ID：12250058
> 
> 赞同：0
> 
> 时间：2012-09-03T14:47:06.557
> 
> 标签：yii

这是我的设置：

**配置文件**

```
 'urlManager'=>array(
          'urlFormat'=>'path',
          'rules'=>array(
           '<controller:\w+>/<id:\d+>'=>'<controller>/view',
           '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
           '<controller:\w+>/<action:\w+>'=>'<controller>/<action>'
          ),
          'showScriptName'=>false,
 ), 
```

**.htaccess**：

```
Options +FollowSymlinks
#+FollowSymLinks must be enabled for any rules to work, this is a security
#requirement of the rewrite engine. Normally it's enabled in the root and we
#shouldn't have to add it, but it doesn't hurt to do so.

RewriteEngine on
#Apache scans all incoming URL requests, checks for matches in our
#.htaccess file 
#and rewrites those matching URLs to whatever we specify.

#allow blank referrers.
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?site.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?site.dev [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?dev.site.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ - [NC,F,L]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

**在布局菜单上我有这个：**

```
$this->widget('zii.widgets.CMenu', 
    array('items'=>
        array(
            array(
                'label'=>Yii::t('site','A'),
                'url'=>array('/site/index')
            ),
            array(
                'label'=>Yii::t('site','Q'),
                'url'=>array('rooms/index')
            ),
            array(
                'label'=>Yii::t('site','G'),
                'url'=>array('gastronomy/index')
            ),
            array(
                'label'=>Yii::t('site','A'),
                'url'=>array('activity/index')
            ),
            array(
                'label'=>Yii::t('site','S'),
                'url'=>array('services/index')
            ),
            array(
                'label'=>Yii::t('site','C'),
                'url'=>array('contacts/index')
            ),
            array(
                'label'=>Yii::t('site','R'),
                'url'=>array('booking/index')
            )
        )
    )
); 
```

我在这里显式调用索引，因为看起来，显式调用它是必需的。

有了这个设置，每次我点击我得到的那些链接，例如：

[http://site.dev/rooms/index](http://site.dev/rooms/index)

虽然我希望得到：

[http://site.dev/rooms/](http://site.dev/rooms/)

没有索引名称。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:24:37.430

索引条目文件和默认操作之间存在差异。你在搞砸这些事情。如果您这样做`'showScriptName'=>true`，您会看到，您的链接将更改为索引条目文件`/index.php/rooms/index`在哪里。`index.php`

正如您在选项中看到的那样，您的链接中`'showScriptName'=>false`没有该选项`index.php`，这意味着您已成功从链接中删除了条目脚本。

现在您`room/index`是`controller/action`URL 路由的一部分。`room`是控制器，`index`是动作。要查看`http://site.dev/rooms/`而不是`http://site.dev/rooms/index`您必须像这样编辑您的 URL 路由：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'rules'=>array(
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>'=>'<controller>/index',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>'
    ),
    'showScriptName'=>false,
), 
```

注意`'<controller:\w+>'=>'<controller>/index'`我添加的行。这使得默认操作`index`创建`controller`路由而不是`controller/index`.

# amazon-ec2 - 用于卸载桌面级计算任务的 EC2 集群实例

> ID：12250063
> 
> 赞同：0
> 
> 时间：2012-09-03T14:47:26.090
> 
> 标签：amazon-ec2, amazon-web-services, cloud, scientific-computing

我正在使用 EC2 从我的桌面卸载一些计算任务 - 基本上在桌面上运行一些需要数小时或数天的作业，没有特别大的规模，所以我不想设置任何太复杂的东西 - 它应该能够在运行 ubuntu 的单个实例上运行。我知道这会扩展 EC2 的用例，并且有比以这种方式使用 EC2 更好的长期解决方案，但我会在稍后的时间点解决这个问题。

但是，如果我使用标准、高内存或高 CPU 的 ubuntu 服务器实例，即使 XL 类（例如 m2.4xlarge）在计算能力方面也相当慢，集群计算实例可能更适合我的需求。但是，除非我选择“集群实例的 ubuntu 服务器”映像，否则我无法使用集群计算实例，而预装的库和软件中缺少这些映像。我可以逐个安装软件包，但这似乎是一种迂回的方式来做他们不打算做的事情（我尝试将 EBS 卷从常规服务器实例交换到集群实例，但实例无法启动当我这样做时）。

基本上底线是我想使用他们的集群计算实例的硬件，但不使用精简的操作系统，所以我可以用最少的设置运行一些单实例作业。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:58:10.310

您是否研究过引导程序？CloudFormation[模板](https://s3.amazonaws.com/cloudformation-examples/BoostrappingApplicationsWithAWSCloudFormation.pdf)可能是一个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:01:12.707

您可以尝试使用[CloudInit](https://help.ubuntu.com/community/CloudInit)方法在启动时安装所需的软件包。基本上，您编写一个每次启动实例时都会执行的 shell 脚本。

# jquery - 在 ajax 成功函数中接收 .csv 文件作为数据

> ID：12250065
> 
> 赞同：7
> 
> 时间：2012-09-03T14:47:26.907
> 
> 标签：jquery, ajax, csv, cross-domain, jsonp

请考虑这个javascript：

```
$.ajax({
    url:'http://ichart.finance.yahoo.com/table.csv?s=GS&amp;a=00&amp;b=1&amp;c=2010&amp;d=08&amp;e=3&amp;f=2012&amp;g=d&amp;ignore=.csv',
    type:'get',
    dataType:'jsonp',
    success:function(data){
        alert(data);
    }
}) 
```

该 URL 返回一个 .csv 文件，但我指定了`jsonp`数据类型，因为这是一个跨域 ajax 请求。如果没有该参数，我会收到“不允许原点”错误。

由于我指定了`jsonp`数据类型，因此 ajax 函数会抛出错误，因为 .csv 文件不是 JSON 格式。但在开发控制台中，我可以看到浏览器确实收到了一个连贯的 .csv 文件。所以我知道我已成功接收 CSV 文件。我认为这应该是可能的，但我不确定如何正确地将这个 csv 文件接收到我的 ajax 函数中？

当然，如果我可以让这个 URL 返回一个格式正确的 JSON 字符串，那将是最好的，但我不确定我能做到这一点。

这是一个你可以尝试的小提琴，你必须打开开发控制台才能看到该错误：http: [//jsfiddle.net/92uJ4/3/](http://jsfiddle.net/92uJ4/3/)

任何帮助是极大的赞赏。

蒂姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T16:44:13.367

不幸的是，跨域限制意味着这根本行不通。该系统是专门构建的，因此您无法使用 AJAX 拉取任意跨域内容。没有任何类型的预解析方法可以将您获得的非 JSONP 数据转换为实际的 JSONP 数据（因为这会破坏限制点）。

您将不得不调用从 Yahoo! 提取数据的本地服务器。并将其发送到您的 AJAX 请求，或者找到某种服务，该服务将从任意 URL 中提取并将数据作为 JSONP 返回。碰巧的是，雅虎！就提供了这样的服务：YQL（雅虎查询语言）。有关更多详细信息，请参阅[此链接](http://christianheilmann.com/2010/01/10/loading-external-content-with-ajax-using-jquery-and-yql/)。

要完成您想要的，请使用此小提琴中的代码：http: [//jsfiddle.net/c5TeM/1/](http://jsfiddle.net/c5TeM/1/)

```
function get_url(remote_url) {
    $.ajax({
        url: "http://query.yahooapis.com/v1/public/yql?"+
"q=select%20*%20from%20html%20where%20url%3D%22"+
encodeURIComponent(remote_url)+
"%22&format=json",
        type: 'get',
        dataType: 'jsonp',
        success: function(data) {
            alert(data.query.results.body.p);
        },
        error: function(jqXHR, textStatus, errorThrow){
            alert(jqXHR['responseText']);
        }
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-02T19:53:29.433

修改最后提供的 jsfiddle 导致我找到以下解决方案：http:
[//jsfiddle.net/9zcsxq5a/](http://jsfiddle.net/9zcsxq5a/)

```
var str_parse = function(data){
  data = data.replace(/<[/]*body[^>]*>/g,'');
  data = data.replace(/<--[\S\s]*?-->/g,'');
  data = data.replace(/[\r]+/g,'');
  data = data.replace(/<noscript[^>]*>[\S\s]*?<\/noscript>/g,'');
  data = data.replace(/<script[^>]*>[\S\s]*?<\/script>/g,'');
  data = data.replace(/<script.*\/>/,'');
  return data
}

get_url = function(URL){
  $.ajax({
    url:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22"+
    encodeURIComponent(URL)+"%22",
    dataType: "jsonp",
    type: 'get',
    success: function(r){
      data=r.results[0];
      data = str_parse(data);
      data = data.split(/[\n]+/);

    //// first line of the csv holds the colnames
      var HEADER = data[0].split(",");
      data.shift();

    /// create { OBJECT } structure for each row
        data = (function(){
        var o=[]; 
        data.forEach(function(E){
            o.push( (function(){ 
            var _o={}; 
            for( var i=0, s=E.split(",");i<s.length;i++ ) 
              _o[HEADER[i]]=s[i];
            return _o;
          }()) );
        });
        return o;
      }());

    /// THE FINAL OBJECT 
      console.log(data);
      return data;
    }
  }); 
}

$('#a').click(function() {
    get_url("http://ichart.finance.yahoo.com/table.csv?a=8&b=11&e=10&g=d&c=2005&d=2&f=2016&s=YHOO");
}); 
```

> csv 通过 asis 传递，然后将被修改为 json 对象，类似于您将在使用时获得的对象（但没有日期限制）
> 
> [http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.historicaldata%20where%20symbol%20in%20%28%27YHOO%27%29%20and% 20startDate%20=%20%272009-09-11%27%20and%20endDate%20=%20%272010-03-10%27&diagnostics=true&env=store://datatables.org/alltableswithkeys](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.historicaldata%20where%20symbol%20in%20%28%27YHOO%27%29%20and%20startDate%20=%20%272009-09-11%27%20and%20endDate%20=%20%272010-03-10%27&diagnostics=true&env=store://datatables.org/alltableswithkeys)

# javascript - 访问 css 边框宽度属性的问题

> ID：12250068
> 
> 赞同：2
> 
> 时间：2012-09-03T14:47:39.383
> 
> 标签：javascript, jquery, css

我对 css 值有疑问。意味着例如我设置 div 边框宽度，如：

```
 $("div").css("border-width", "20px"); 
```

但是当我再次访问边框宽度时，我得到了：

```
 var width = $("div").css("border-width");

 width = 19.56740..px ( value something like this ) 
```

谁能解释一下，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:59:01.803

边框宽度不存在。你必须使用以下

边框顶部宽度 边框右侧宽度 边框底部宽度 边框左侧宽度

***JS代码***

```
$('div').css({'border':'1px solid red', 'border-width':'20px'})
var width = $('div').css('border-top-width');
console.log(width); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:51:49.803

实际上，`border-width`css 属性并不存在。它分为：

```
border-top-width
border-right-width
border-bottom-width
border-left-width 
```

所以试着阅读那些，应该像预期的那样工作。

```
var width = $("div").css("border-top-width"); 
```

# jquery - jQuery这个范围内的插件

> ID：12250075
> 
> 赞同：0
> 
> 时间：2012-09-03T14:48:08.037
> 
> 标签：jquery, jquery-plugins, scope, this

我构建 jQuery 插件：

```
 (function( $ ){

            var methods = {
                init : function( options ) {
                    $.fn.queryBuilder = $.extend($.fn.queryBuilder, options);

                    return this.each(function(){

                        methods.getValues();

                        var $this = $(this),
                        data = $this.data('queryBuilder'),
                        url  = '/'+methods.createURL.call();

                        if ( ! data ) {
                            $(this).data('queryBuilder', {
                                target  : $this,
                                url     : url
                            });
                        }
                    });
                },
                getURL:function(){
                    alert $(this);
                }
    }
$.fn.queryBuilder = function( method ) {
        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
        }
    };
}) 
```

调用 getValues() 方法时，警报显示未定义。如何调用 getValues 与我的插件绑定的对象的范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:50:36.903

您的代码中没有`getValues`函数，我假设您的意思是`getURL`. 您可以`this`使用[`.call` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[`.apply` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)显式设置：

```
methods.getURL.call(this); 
```

这和你在

```
return methods.init.apply( this, arguments ); 
```

# app-store - iOS 6 应用商店提交

> ID：12250078
> 
> 赞同：0
> 
> 时间：2012-09-03T14:48:12.617
> 
> 标签：app-store, submission, ios6

iOS 6 发布后多久开发者必须使用 iOS6 提交？我担心将我的应用程序迁移到 iOS6 需要很长时间，我宁愿现在推出一个带有我实现的部分功能的新版本。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:46:22.937

在 iOS 4 可以出来之后，提交的最低部署目标要求被提高到 3.0。据报道，在 iOS 6 发布后，这些要求已经或将上升到 iOS 4.3。因此，在 iOS 7 或 8 发布之前，开发人员可能不需要使用 iOS 6 最低部署目标提交应用程序（除非 Apple 改变主意，这总是可能的）。

# javascript - GetElementById 在 JQuery 自动完成调用中不起作用

> ID：12250083
> 
> 赞同：0
> 
> 时间：2012-09-03T14:48:52.770
> 
> 标签：javascript, jquery, jquery-autocomplete

我有这段代码，我在 Firebug 中分析过，这真的让我很困惑。当我调用此代码时，该行`alert(selectedAmenities);`显示正确的数据，但该行

```
source: "/Results/GetAmenities?selected=" + selectedAmenities, 
```

始终显示`selectedAmenities`为空字符串。为什么是这样？

```
$(function () {

    var selectedAmenities = "";

    function amenitiesLog(message) {
        if (!$('#amenitiesLog div:contains(' + message + ')').length) {
            $("<div/>").text(message).appendTo("#amenitiesLog");
            $("<br/>").text("").appendTo("#amenitiesLog");
            $("#amenitiesLog").scrollTop(0);

            selectedAmenities = document.getElementById("amenitiesLog").innerHTML;
            alert(selectedAmenities);
        }
    }

    $("#Amenities").autocomplete({
        source: "/Results/GetAmenities?selected=" + selectedAmenities,
        minLength: 3,
        select: function (event, ui) {
            if (ui.item != null) amenitiesLog(ui.item.value);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:06:02.750

> 当我调用此代码时，该行`alert(selectedAmenities);`显示正确的数据

然后`getElementById`工作得很好。

* * *

## 问题

线

```
source: "/Results/GetAmenities?selected=" + selectedAmenities 
```

在您调用**之前**执行`amenitiesLog(ui.item.value);`，并且只执行**一次**。
在您阅读的那一刻`selectedAmenities`，它是一个空字符串，以后更改值不会更新`"/Results/GetAmenities?selected=" + selectedAmenities`。

如果我有

```
var foo = '42'; 
var bar = 'answer' + foo; 
foo = '21'; 
```

然后`bar`停留`'answer42'`，它不改变`foo`。`bar`包含一个字符串并且与变量没有任何关系`foo`。

* * *

## 解决方案

看来您应该使用回调，而不是使用 URL 作为源。查看[文档](http://jqueryui.com/demos/autocomplete/)中的概述部分。就像是：

```
$("#Amenities").autocomplete({
    source: function(request, callback) {
         var url = "/Results/GetAmenities?selected=" + selectedAmenities + '&term=' + request.term;
         $.getJSON(url, callback);
    },
    minLength: 3,
    select: function (event, ui) {
        if (ui.item != null) amenitiesLog(ui.item.value);
    }
}); 
```

不同之处在于，现在每当触发自动完成功能时，您分配的函数都会被调用，并且每次都会`source:`重新评估 。`"/Results/GetAmenities?selected=" + selectedAmenities`

# object - 多个对象的适配器模式

> ID：12250086
> 
> 赞同：0
> 
> 时间：2012-09-03T14:49:02.753
> 
> 标签：object, adapter, software-design

适配器是将一个接口转换为另一个接口的包装器。我知道的适配器的常见示例是适配器仅包装单个对象，但适配器是否有可能包装多个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:57:06.490

适配器模式不是*包装*接口！适配器模式，顾名思义，适配一个类的接口以匹配另一个类期望的接口。

典型的用法是使 SQL 接口适应 ActiveRecord 模式。

通常，您可以通过基于公共类的交换到另一个适配器来适应多种接口。

# ios - iOS - 集成 Facebook 框架

> ID：12250087
> 
> 赞同：2
> 
> 时间：2012-09-03T14:49:23.583
> 
> 标签：ios, facebook

在我的 iOS 应用程序中，我成功集成了最新的 facebook 框架。
如果“facebook”应用程序不在我的 iPhone 上，它工作正常。如果该应用程序不在我的 iPhone 上，则在身份验证期间，它会打开浏览器并正确进行身份验证。
但是，如果 facebook 应用程序在我的 iphone 上，经过身份验证并返回我的应用程序时，它会因以下错误而崩溃：
由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'-[SBJsonParser errorTrace]：无法识别的选择器已发送到实例0x2d9f60'

我已经看到了 facebook 提供的示例，并在我的应用程序中实现了相同的示例。有人能指出我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:53:17.720

这有点像在黑暗中刺伤，但我认为您可能会在:)`errorTrace`的实例上调用该方法`SBJsonParser`

可能发生的情况是您正在调用`errorTrace`您提前发布的内容。浏览 facebook 重新打开您的应用时触发的代码路径并找到对`errorTrace`. 在它之前设置一个断点并环顾四周，看看有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:15:21.900

如果您只想在 iOS 6.0 中共享某些内容，那么您可以使用社交和帐户框架，并使用以下代码通过 iPhone 内部登录来完成这项工作

```
-(void)facebook_Share_in_IOS6.0{

    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) //check if Facebook Account is linked
    {
        mySLComposerSheet = [[SLComposeViewController alloc] init]; //initiate the Social Controller
        mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook]; //Tell him with what social plattform to use it, e.g. facebook or twitter
        [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"Test",mySLComposerSheet.serviceType]]; //the message you want to post
    //    [mySLComposerSheet addImage:yourimage]; 

        [self presentViewController:mySLComposerSheet animated:YES completion:nil];
    }else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Attention" message:@"First Set your facebook account. To post your answer to facebook" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
    [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
        NSString *output;
        switch (result) {
            case SLComposeViewControllerResultCancelled:
                output = @"Action Cancelled";
                break;
            case SLComposeViewControllerResultDone:
                output = @"Post Successfull";
                break;
            default:
                break;
        } //check if everything worked properly. Give out a message on the state.
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook" message:output delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }];
} 
```

# jqplot - 如何使用 JQPLOT 从带有排列数据的 txt 文件中制作折线图

> ID：12250088
> 
> 赞同：0
> 
> 时间：2012-09-03T14:49:24.080
> 
> 标签：jqplot

我是初学者！我有一个 txt 文件，其中一些数据按列排列，我想使用 JQPLOT 在折线图中用不同的线显示每一列。有没有办法做到这一点而不将 txt 文件转换为 json 文件或 xml 文件？

这是我的 txt 文件的示例：

```
description line 1   <-- I'm not interested in this line
description line 2   <-- I'm not interested in this line
1.22 2.23 3.43 4.45  <-- The 4 columns are separed by a space
1.20 2.10 4.49 5.12
1.10 3.02 3.98 4.78
1.22 2.23 3.43 4.45
1.20 2.10 4.49 5.12
1.10 3.02 3.98 4.78 ` 
```

对不起，我的英语不好！感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:22:58.953

无需将数据转换为 JSON 或 XML。您可以对 txt 文件发出 AJAX 请求，然后将其解析为 jqplot 期望的格式（以下代码均未经过测试，但应该可以帮助您入门）：

```
$.ajax({url:"/path/to/Text.txt",
  success:function(result){
    var fileLines = result.split("\n") //result is the file, split on the lines
    var jqplotData = [];
    for (var i = 2; i < fileLines.length(); i++) // skip first two lines
    {
       var aLine = fileLins[i].split(" ");
       var aSeries = [];
       for (var j = 0; j < aLine.length(); j++)
       {
          aSeries.push(parseFloat(aLine[j])); // build array for each series 
       }
       jqplotData.push(aSeries); // add series to larger data array
    }

    // now call jqplot with your data...
    var plot1 = $.jqplot('chartDiv', jqplotData, {});
  }
}); 
```

# jakarta-ee - 使用嵌入式 glassfish 服务器时部署为 null

> ID：12250095
> 
> 赞同：0
> 
> 时间：2012-09-03T14:49:41.507
> 
> 标签：jakarta-ee, maven-plugin, glassfish-embedded

在阅读了几个教程（例如[ocpsoft](http://ocpsoft.org/java/using-embedded-glassfish-with-maven/)、[oracle](http://docs.oracle.com/cd/E26576_01/doc.312/e24932/embedded-server-guide.htm)）后，我开始使用嵌入式 glassfish 来运行我的 hello-world 应用程序。它确实适用于远程服务器，但由于某种原因，在使用嵌入式服务器时没有部署任何内容。

1.)“找不到javadb客户端jar文件，derby jdbc驱动默认不可用。” 我正在使用德比，虽然例如变量 AS_DERBY_INSTALL 已设置并导出，但似乎找不到罐子。为什么？

2.) "INFO: Deployed null" 为什么我的应用没有部署？？？

运行时的 maven 输出，例如“mvn clean install”（无论我运行“mvn install embedded-glassfish:run”还是“mvn install embedded-glassfish:deploy”都没有区别）。

**行家输出**

```
[...]
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO]
[INFO] --- maven-war-plugin:2.1.1:war (default-war) @ transact ---
[INFO] Packaging webapp
[INFO] Assembling webapp [transact] in [/Users/grudom/Daten/IDE/EclipseProjects/workspace/transact/target/transact]
[INFO] Processing war project
[INFO] Copying webapp resources [/Users/grudom/Daten/IDE/EclipseProjects/workspace/transact/src/main/webapp]
[INFO] Webapp assembled in [117 msecs]
[INFO] Building war: /Users/grudom/Daten/IDE/EclipseProjects/workspace/transact/target/transact.war
[INFO] WEB-INF/web.xml already added, skipping
[INFO]
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ transact ---
[INFO] Installing /Users/grudom/Daten/IDE/EclipseProjects/workspace/transact/target/transact.war to /Users/grudom/.m2/repository/de/exim/transact/1.0-SNAPSHOT/transact-1.0-SNAPSHOT.war
[INFO] Installing /Users/grudom/Daten/IDE/EclipseProjects/workspace/transact/pom.xml to /Users/grudom/.m2/repository/de/exim/transact/1.0-SNAPSHOT/transact-1.0-SNAPSHOT.pom
[INFO]
[INFO] --- maven-embedded-glassfish-plugin:3.1.2.2:run (default) @ transact ---
Created New Bootstrap ClassLoader. ServerId = maven, ClassPaths =
ClassPath Element : file:/Users/grudom/.m2/repository/org/glassfish/main/extras/glassfish-embedded-all/3.1.2.2/glassfish-embedded-all-3.1.2.2.jar
ClassPath Element : file:/Users/grudom/.m2/repository/org/glassfish/embedded/maven-embedded-glassfish-plugin/3.1.2.2/maven-embedded-glassfish-plugin-3.1.2.2.jar
ClassPath Element : file:/Users/grudom/.m2/repository/org/codehaus/plexus/plexus-utils/1.0.4/plexus-utils-1.0.4.jar
ClassPath Element : file:/Users/grudom/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar
ClassPath Element : file:/Users/grudom/.m2/repository/org/glassfish/main/common/simple-glassfish-api/3.1.2.2/simple-glassfish-api-3.1.2.2.jar
03.09.2012 16:28:18 com.sun.enterprise.v3.server.CommonClassLoaderServiceImpl findDerbyClient
INFO: Cannot find javadb client jar file, derby jdbc driver will not be available by default.
03.09.2012 16:28:18 org.hibernate.validator.internal.util.Version <clinit>
INFO: HV000001: Hibernate Validator 4.3.0.Final
03.09.2012 16:28:18 PluginUtil getGlassFish
INFO: Created GlassFish ServerId = maven, BootstrapProperties = {GlassFish_Platform=Static}, GlassFishRuntime = com.sun.enterprise.glassfish.bootstrap.StaticGlassFishRuntime@7cb9e9a3, GlassFishProperties = {embedded-glassfish-config.server.network-config.network-listeners.network-listener.http-listener.enabled=true, embedded-glassfish-config.server.network-config.network-listeners.network-listener.http-listener.port=8080}, GlassFish = com.sun.enterprise.glassfish.bootstrap.StaticGlassFishRuntime$1@119a0c4e, GlassFish Status = INIT, TimeTaken = 876 ms
03.09.2012 16:28:18 com.sun.enterprise.v3.services.impl.GrizzlyService createNetworkProxy
INFO: Network listener https-listener on port 0 disabled per domain.xml
03.09.2012 16:28:19 com.sun.enterprise.v3.services.impl.GrizzlyProxy$2$1 onReady
INFO: Grizzly Framework 1.9.50 started in: 52ms - bound to [0.0.0.0:8080]
03.09.2012 16:28:19 com.sun.enterprise.v3.server.AppServerStartup run
INFO: GlassFish Server Open Source Edition 3.1.2.2 (java_re) startup time : Embedded (678ms), startup services(523ms), total(1.201ms)
03.09.2012 16:28:19 PluginUtil startGlassFish
INFO: Started GlassFish ServerId = maven, GlassFish = com.sun.enterprise.glassfish.bootstrap.StaticGlassFishRuntime$1@119a0c4e, TimeTaken = 747 ms
03.09.2012 16:28:19 PluginUtil doDeploy
INFO: Deployed null
Hit ENTER to redeploy, X to exit 
```

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>de.exim</groupId>
    <artifactId>transact</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>transact Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.build.timestamp.format>yyyyMMdd'T'HHmmss</maven.build.timestamp.format>
        <glassfish.home>/Users/grudom/Programme/glassfish</glassfish.home>
        <glassfish.adminUser>admin</glassfish.adminUser>
        <glassfish.adminPassword>admin</glassfish.adminPassword>
        <glassfish.domain.name>domain1</glassfish.domain.name>
        <glassfish.domain.host>localhost</glassfish.domain.host>
        <glassfish.domain.adminPort>4848</glassfish.domain.adminPort>
        <eclipselink.version>2.4.0</eclipselink.version>
    </properties>

    <repositories>
        <repository>
            <id>EclipseLink</id>
            <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/glassfish/</url>
        </pluginRepository>
    </pluginRepositories>

    <dependencies>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>eclipselink</artifactId>
            <version>${eclipselink.version}</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.apache.derby</groupId>
            <artifactId>derby</artifactId>
            <version>10.9.1.0</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.3.2</version>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                        <encoding>ISO-8859-1</encoding>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-eclipse-plugin</artifactId>
                    <version>2.9</version>
                    <configuration>
                        <wtpversion>1.5</wtpversion>
                        <downloadSources>true</downloadSources>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

    <profiles>
        <profile>
            <id>glassfish</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.glassfish.maven.plugin</groupId>
                        <artifactId>maven-glassfish-plugin</artifactId>
                        <version>2.1</version>
                        <configuration>
                            <terse>false</terse>
                            <echo>true</echo>
                            <debug>true</debug>
                            <glassfishDirectory>${glassfish.home}</glassfishDirectory>
                            <user>${glassfish.adminUser}</user>
                            <adminPassword>${glassfish.adminPassword}</adminPassword>
                            <domain>
                                <name>${glassfish.domain.name}</name>
                                <host>${glassfish.domain.host}</host>
                                <adminPort>${glassfish.domain.adminPort}</adminPort>
                            </domain>
                            <components>
                                <component>
                                    <name>${project.artifactId}</name>
                                    <artifact>${project.build.directory}/${project.build.finalName}.war</artifact>
                                </component>
                            </components>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>embeddedglassfish</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.glassfish.embedded</groupId>
                        <artifactId>maven-embedded-glassfish-plugin</artifactId>
                        <version>3.1.2.2</version>
                        <configuration>
                            <goalPrefix>embedded-glassfish</goalPrefix>
                            <app>test.war</app>
                            <port>8080</port>
                            <contextRoot>test</contextRoot>
                        </configuration>
                        <executions>
                            <execution>
                                <phase>install</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project> 
```

使用时

```
 <groupId>org.glassfish</groupId>
    <artifactId>maven-embedded-glassfish-plugin</artifactId>
    <version>3.0</version> 
```

maven 抛出一个 LifecycleExecutionException，原因是：java.io.FileNotFoundException: test.war。查看文件系统 test.war 甚至没有创建。如果我更改为 3.1 版，则不会引发异常，但会再次“部署为空”。为什么没有生成war文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T11:09:48.733

最后我发现了问题。正确的配置是

```
<build>
    <plugins>
        <plugin>
            <groupId>org.glassfish</groupId>
            <artifactId>maven-embedded-glassfish-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <goalPrefix>embedded-glassfish</goalPrefix>
                <app>target/${project.build.finalName}.war</app>
                <port>8080</port>
                <contextRoot>${project.build.finalName}</contextRoot>
                <autoDelete>true</autoDelete>
                <configFile>path_to_File/domain.xml</configFile>
            </configuration>
            <executions>
                <execution> 
                    <phase>install</phase>
                    <goals>         
                        <goal>run</goal>    
                    </goals>        
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

除了引用正确的 groupId 和版本之外，元素“app”需要更改。此外，为了使用 javadb 的非嵌入式实例，configFile 元素指向非嵌入式 glassfish 服务器的 domain.xml。

更多文档：[http ://docs.oracle.com/cd/E26576_01/doc.312/e24932/toc.htm](http://docs.oracle.com/cd/E26576_01/doc.312/e24932/toc.htm)

希望，它也可以帮助其他人。

# css - css 从上面继承样式

> ID：12250099
> 
> 赞同：2
> 
> 时间：2012-09-03T14:49:57.240
> 
> 标签：css, inheritance, styles

警告，这可能需要一些非常基本的建议。

我正在使用响应式样式表，其中首先解决了移动设备的样式。随着样式表的进展，您会发现设备的媒体查询逐渐变大（320 及以上）。我的问题是，对于我为移动设备定义的每种风格（在顶部），如果我不希望我的大型设备使用这种风格，我是否必须指定一种反风格。或者是否有一个简单的“不继承”，例如。这是移动端

```
 nav li {height:60px;} 
```

对于较大的屏幕，我根本不想指定高度。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:52:32.707

简单写：

```
nav li { height: auto } 
```

没有“不继承”...

使用诸如modernizr 之类的东西，您可以使用`.touch`或`.no-touch`类`<html>`以及许多其他对这个范围有用的东西。

# html - css overscroll滚动到位置

> ID：12250101
> 
> 赞同：0
> 
> 时间：2012-09-03T14:50:15.750
> 
> 标签：html, css, image

> **可能重复：**
> [更改滚动条位置](https://stackoverflow.com/questions/1247874/changing-scrollbar-position)

我有一个像图像浏览器一样的 div

```
<div style="width:100%; height:500px; overflow:auto;">
    <img src="myimage.jpg" alt="news" style="width:100%;height:auto;"/>
</div> 
```

如果我的图像高度为 1200 像素，我是否可以预定义图像的滚动位置？页面加载时基本上滚动到图像的中间部分

我不是在寻找 jQuery 滚动动画插件。我希望页面加载已经滚动到特定位置的图像。

我的主要受众将使用各种版本的 IE....(> IE7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:04:34.280

jQuery

```
$('#foo').scrollTop(500); 
```

纯JS

```
 document.getElementById('foo').scrollTop = 500; // (working with IE6+) 
```

更多信息在这里找到：

*   [http://www.quirksmode.org/dom/w3c_cssom.html#t35](http://www.quirksmode.org/dom/w3c_cssom.html#t35)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:10:36.490

使用 scrollTo(0, 窗口高度 * 0.5); 或者，如果您需要，您可以计算当前 div 相对于页面偏移量的中心。

# android - CursorAdapter 的 newView() 是如何工作的？

> ID：12250102
> 
> 赞同：0
> 
> 时间：2012-09-03T14:50:18.327
> 
> 标签：android

我对`newView()`of 的`CursorAdapter`工作原理有点困惑。我`Cursor c`特别对框架传递给该方法的内容感兴趣。我有一个`ListView`其中填充了一个`CursorAdapter`包含 4 行的内容。经过一些debagging后，我看到两个不同`Cursor c`的对象传递给了`newView()`，这个事实让我感到困惑。

我期待不同`Cursor`的传递给方法，`Cursor`每个数据库中的不同对象`row`。因此，考虑到这个假设，我在列表视图行的复选框元素上设置了 onClick 侦听器，但这很奇怪。

```
 @Override
        public View newView(Context ctxt, Cursor c, ViewGroup parent) {
            View row;
            final Cursor cursor = c;
            LayoutInflater inflater = ((Activity) ctxt).getLayoutInflater();
            row = inflater.inflate(R.layout.row, parent, false);
            this.defaultDrawable = (Drawable) row.getBackground();
            final CheckBox mStar = (CheckBox) row.findViewById(R.id.star);
            mStar.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View view) {
                    if (mStar.isChecked()) {
                        mDbHelper.updateFavorite(cursor, 1);
                    } else {
                        mDbHelper.updateFavorite(cursor, 0);
                    }
                }
            });

            ViewHolder holder = new ViewHolder(row);

            row.setTag(holder);

            return (row);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:32:09.497

光标是指向您在创建视图时所处位置的指针。在 onClick 方法中，它将指向查询中的其他位置。

您可以通过调用 cursor.moveTo(); 将其移动到您想要的位置。

在 CursorAdapter 的情况下，游标通常有一个 _ID 列，该值用于标识行。

# vba - 使用类作为自定义工作表函数的参数

> ID：12250110
> 
> 赞同：1
> 
> 时间：2012-09-03T14:51:14.953
> 
> 标签：vba, excel

我想编写一个自定义工作表函数，该函数使用我定义为参数的类。我试图做以下事情：

我创建了一个名为 Wrapper 的类：

```
Private m_value As Integer

Public Property Get value() As Integer
  value = m_value
End Property

Public Property Let value(value As Integer)
  m_value = value
End Property 
```

然后我写了两个函数：

```
Function make_wrapper(value As Integer) As wrapper
  Set make_wrapper = New wrapper
  make_wrapper.value = value
End Function

Function square(wrapper As wrapper) As Integer
  square = wrapper.value * wrapper.value
End Function 
```

如果我直接从 VBA 链接这些函数，一切都会按我的预期工作

```
Sub doit()
  MsgBox (square(make_wrapper(7)))
End Sub 
```

显示 49。

如果我尝试直接从 excel 调用该函数，它将不起作用。如果我在单元格中键入“=square(make_wrapper(7))”，它会显示“#VALUE！”。我究竟做错了什么？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:35:30.253

似乎没有人给你一个明确的答案。

> 这可能吗？

您不能像这样将自定义类型返回给 UDF。

试试这个：

```
Function square(iValue) As Integer
    Dim w As New wrapper

    w.value = iValue

    square = w.value * w.value
End Function 
```

虽然我不确定你想用类模块实现什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T17:30:03.640

参数名称无效：“Wrapper”已经是一个类的名称。

尝试这个：

```
Function square(MyWrapper As wrapper) As Integer   
    square = MyWrapper.value * MyWrapper.value 
End Function 
```

# tridion - 多媒体预览未更新？

> ID：12250114
> 
> 赞同：2
> 
> 时间：2012-09-03T14:51:25.140
> 
> 标签：tridion, tridion-2011

我们有一个带有 Save/Initiated (oncomponentsavepre) 事件的事件系统，其中缩略图是从正在保存的多媒体组件中创建的。

然后将新的缩略图多媒体组件作为多媒体链接添加到事件中传递的图像组件的元数据中。

每当图像在原始组件中更新时，缩略图也会被更新为新的缩略图图像。

然而，打开多媒体组件后有一个小问题。我希望元数据显示多媒体链接中新创建的缩略图的预览。但是您看到的是前一个缩略图组件的预览。

有谁知道我也可以更新多媒体链接预览吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:48:23.797

支持确认它实际上是一个错误。这个问题有一个修复程序：sdltridionworld 站点上的 CM_2011.1.1.80564 将处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:58:44.497

我假设这按预期工作，它只是 SDL Tridion 中的预览？

这可能只是组件对话框中的缓存吗？如果你按 f5，它会给出正确的预览图像吗？在我更改架构以获取更新的字段等后，我通常必须按 f5。

我正在寻找是否有办法关闭此缓存（我还找不到），但在极端情况下，您可能会创建一个扩展来强制刷新此图像，我也看到有一个很好的来自 SDL 的在线文档： [调试 CME gui@SDL TridionWorld.com](https://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Debugging_the_Tridion_2011_CME.aspx)。

# python - 如何在 tkinter 窗口中绘制图像

> ID：12250117
> 
> 赞同：11
> 
> 时间：2012-09-03T14:51:47.247
> 
> 标签：python, image, user-interface, tkinter, draw

如何在 tkinter 窗口中绘制图像（我使用的是 python 3.3）？我正在寻找可以在 tkinter 窗口的给定位置绘制图像的语句。

是的...

任何答案将不胜感激。这是我想在其中使用代码的程序的源代码（如果可以调用的话），以备不时之需。

```
from tkinter import *

class craftClass():
    def __init__(self, x = 80, y = 80, xmotion = 0, ymotion = 0, health = 20):
        self.xPos, self.yPos = x, y
        self.dx, self.dy = xmotion, ymotion
    def moveCraft(self):
        self.xPos += self.dx
        self.yPos += self.dy

class missileClass():
    def __init__(self, x = 0 , y = 0):
        self.xPos, self.yPos = x, y

class alienClass():
    def __init__(self, x, y):
        self.xPos, self.yPos = x, y

    def moveForCraft(self, craftX, craftY):
        if self.xPos < craftX:
            self.xPos += 2
        elif self.xPos > craftX:
            self.xPos -= 2
        else:
            pass

    if self.yPos < craftY:
        self.yPos += 2
    elif self.yPos > craftY:
        self.yPos -= 2
    else:
        pass

craft = craftClass()
missileArray = []
alienArray = []

def keypress(event):
    if event.keysym == 'Escape':
        root.destroy()
x = event.char
if x == "w":
    craft.dy = 1
elif x == "s":
    craft.dy = -1
elif x == "a":
    craft.dx = -1
elif x == "d":
    craft.dx = 1
else:
    print(x)

root = Tk()
print(craft.dx)
while True:
try:
    root.bind_all('<Key>', keypress)
    craft.moveCraft()
    root.update()
except TclError:
    print("exited. tcl error thrown. llop broken")
    break 
```

我很清楚间距有点乱，但这是复制时发生的事情

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T21:55:32.133

您将需要使用`Canvas`小部件将图像放置在指定的 (x,y) 位置。

在 Python 3 中，您可以这样做：

```
import tkinter

tk = tkinter.Tk()
can = tkinter.Canvas(tk)
can.pack()
img = tkinter.PhotoImg("<path/to/image_file>.gif")
can.create_image((x_coordinate, y_coordinate), img) 
```

请注意，由于 Python 3 没有官方`PIL`*****版本，您只能阅读 type 的图像`GIF`，`PGM`或者`PPM`- 如果您需要其他文件类型，请查看[此答案](https://stackoverflow.com/questions/11068872/pil-imagetk-equivalent-in-python-3-x)。

Canvas 小部件非常强大，它允许您定位图像、通过调用显示其上的内容`"canvas.update"`以及通过调用删除项目显示器`"canvas.delete(item_id)"`。检查其[文档](http://effbot.org/tkinterbook/canvas.htm)。

虽然 Tkinter 对于您的简单游戏来说应该足够了，但考虑看看[`Pygame`](http://pygame.org), 以获得更好的多媒体支持，或者[Pyglet](http://www.pyglet.org/)，甚至更高级别的多媒体框架[Kivy](http://kivy.org/)。

*****（更新）：截至 2015 年，有 Pillow - 一个替代旧 PIL 项目的分支，它恢复了项目的正常开发，包括对 Python 3.x 的支持

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-14T03:13:54.403

## **该示例在画布上显示图像。**

```
from PIL import Image, ImageTk 
```

> 从 PIL (Python Imaging Library) 模块中，我们导入 Image 和 ImageTk 模块。

```
self.img = Image.open("tatras.jpg") //your image name :)
self.tatras = ImageTk.PhotoImage(self.img) 
```

> Tkinter 内部不支持 JPG 图像。作为一种解决方法，我们使用 Image 和 ImageTk 模块。

```
canvas = Canvas(self, width=self.img.size[0]+20,
    height=self.img.size[1]+20) 
```

我们创建 Canvas 小部件。它考虑了图像的大小。它比实际图像尺寸宽 20 像素，高 20 像素。

```
canvas.create_image(10, 10, anchor=NW, image=self.tatras) 
```

* * *

参考见：[https ://tutorialspoint.com/python/tk_canvas.htm](https://tutorialspoint.com/python/tk_canvas.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:58:24.210

这在很大程度上取决于文件格式。Tkinter 有一个[PhotoImage](http://effbot.org/tkinterbook/photoimage.htm)类，`Labels`如果你的图像是`.gif`. 您还可以轻松地将它们添加到画布小部件中。否则，您可能希望使用 PIL 将图像转换为`PhotoImage`.

# .net - 在 MVC 音乐商店教程中，@url.content

> ID：12250120
> 
> 赞同：1
> 
> 时间：2012-09-03T14:51:51.827
> 
> 标签：.net, asp.net-mvc-3, html-helper

在这两行代码之间，第二行有效，但 _layout.cshtml 文件中提供的代码，在第一行中，原样来自 MVC 3 项目模板。我非常仔细地按照说明进行操作，下面的第二行可以正常工作。为了使用 html 帮助程序，是否必须加载一些额外的参考文件或 Webconfig 中的设置？

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<link href="../content/site.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:03:02.470

两种说法有区别：

```
@Url.Content(); 
```

会将其根引用放在您网站的基本 URL 中。因此，在您的情况下，CSS 应位于“http://localhost:port/Content”下。如果不是这种情况，您需要使用任何其他子文件夹更新路径。例子：

```
@Url.Content("~/Static/Content/Site.css"); 
```

第二行将引用与包含 HTML 文件的文件夹处于同一级别的 Content 文件夹。例如，这将起作用：

```
/Static/Content/Site.css
/Static/Views/Index.html 
```

# ajax - 在 Ajax 生成的页面/网站上显示 Facebook 评论

> ID：12250123
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:00.623
> 
> 标签：ajax, facebook, wordpress, twitter, comments

三天多来，我一直在研究可能的 StackOverflow 解决方案......基本上已经尝试了任何建议的方法 - 但我似乎无法让它发挥作用。

我有`wordpress`一个购买主题的网站。这个主题用于`Ajax`加载它的页面和帖子。该网站可以在这里找到：[http](http://www.eonevent.com) ://www.eonevent.com - 例如。

我现在面临的是，通过正常导航选项访问此页面（ [http://www.eonevent.com/#/socialize](http://www.eonevent.com/#/socialize)`Facebook` ）时，评论和`twitter`小部件都没有加载或显示。但是，当访问没有.`"#/"`

现在我一直在阅读您必须使用`FB.XFBML.parse`的`Facebook`评论 - 但我无法做到这一点......而且我尝试了许多不同的选择。

我目前的设置如下...

这是 header.php 文件中的一部分代码：

```
<div id="fb-root"></div>
<script>
     (function(d, s, id) {  
          var js, fjs = d.getElementsByTagName(s)[0]; 
          if (d.getElementById(id)) return;  
          js = d.createElement(s);
          js.id = id;  
          js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1&appId=373787556026745";    
          fjs.parentNode.insertBefore(js, fjs);
     }
     (document, 'script', 'facebook-jssdk'));
</script> 
```

这是我在必须出现评论的页面上使用的：

```
<fb:comments href="<?php the_permalink(); ?>" num_posts="2" width="500">     
</fb:comments> 
```

然后我尝试通过添加使所有这些工作：

```
FB.XFBML.parse 
```

但一切都无济于事。

任何建议都将受到欢迎 - 也包括`twitter`小部件。我只是似乎无法弄清楚-即使它可能很简单！

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:42:46.217

尝试将此代码放在 jQuery 脚本中 AJAX 调用的成功部分中。您可能正在使用 jQuery get/post/ajax 等。

```
//facebook comments
var isFacebook = $(data).find('.fb-comments');
var document = window.document;
var contentNode = $(".content");       
if(isFacebook != 'undefined' ) {
    var scriptText = 'FB.XFBML.parse();';
    var scriptNode = document.createElement('script');
    scriptNode.appendChild(document.createTextNode(scriptText));
    contentNode.appendChild(scriptNode);
} 
```

# objective-c - 来自一个表视图控制器的多个segues？

> ID：12250125
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:07.723
> 
> 标签：objective-c, xcode, tableview, segue

所以我有一个表格视图控制器，它列出了一个类别列表，每个类别都有一个 parentid，它是另一个类别的 id。

默认情况下，显示所有具有 parentid=0 的类别，并且我已从表格视图单元格 ctrl 拖动到表格视图控制器以将视图控制器链接到自身；我已经编写了代码来根据单击的类别更改表格的内容。（希望这部分有意义）。

基本上，现在我遇到了一个问题。

当我输入没有子类别的类别（或子类别）时，我想导航到不同的视图控制器，但我似乎找不到从表格视图单元格创建两个 segue 的方法。

例子...

用户从第一个列表中点击食物和饮料 第二个列表显示：

> 食物
> 饮料

从此子列表中单击“食物”。食物没有子类别，所以我想显示这个类别的所有项目，使用不同的表视图控制器。

这有意义吗？我听说过手动segues，但我似乎无法让它们工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:04:33.107

您可以通过以下方式以编程方式进行转场：

```
self.navigationController performSegueWithIdentifier:(NSString *)identifier sender:(id) 
```

# objective-c - 是否可以用分隔符拼出单词中的数字？

> ID：12250126
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:10.350
> 
> 标签：objective-c

我知道 NSNumberFormatter 的 NSNumberFormatterSpellOutStyle，但这会返回格式错误的数字：932 返回“九百三十二”而不是“九百三十二”。

在 [另一个问题](https://stackoverflow.com/a/6553337/1205506)中，Dave DeLong 说他为相同的代码得到了“932”，这正是我想要的——“and”这个词（或本地化时可能是什么）用于分隔大数。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:46:28.093

如果您只想添加“和”，我认为您必须手动执行（自您引用的问题得到回答后，行为发生了变化，或者是答案中的拼写错误）。我认为你可以这样做，但我不知道这是否适用于你想要的所有情况：

```
 int num = 932;
    int leftNum = floor(num/100) * 100;
    int rightNum = num % 100;
    NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
    [f setNumberStyle:NSNumberFormatterSpellOutStyle];
    NSString *combo;
    if (num > 100) {
        NSString *l = [f stringFromNumber:[NSNumber numberWithInt:leftNum]];
        NSString *r = [f stringFromNumber:[NSNumber numberWithInt:rightNum]];
        combo = [NSString stringWithFormat:@"%@ and %@",l,r];
    }else{
        combo = [f stringFromNumber:[NSNumber numberWithInt:num]];
    }
    NSLog(@"%@", combo); 
```

# silverlight - 使用 Lightswitch 导出到 Excel

> ID：12250127
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:12.013
> 
> 标签：silverlight, export-to-excel, visual-studio-lightswitch

我们开始使用 Lightswitch 开发应用程序，但遇到了导出问题。

默认情况下，使用“导出到 Excel”按钮，您可以在 excel 文件中弹出整个网格。

我需要的是通过单击按钮以编程方式导出活动网格并将其保存到预设路径。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:57:23.313

Office 的 LightSwitch 扩展的源代码可在此处获得：[Office 集成包](http://officeintegration.codeplex.com/)。如果现有功能不适合您的要求，您可以修改它来做您想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:55:04.570

您可以导出到 excel - 这个[http://www.carlosag.net/tools/excelxmlwriter/generator](http://www.carlosag.net/tools/excelxmlwriter/generator)可能会有所帮助。但是，强制他们将其保存在我不确定是否可以的位置，除非您的 silverlight 东西是基于桌面的。

# html - 两个 div 居中

> ID：12250128
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:13.930
> 
> 标签：html, css, alignment

在我的文档中，我在其下方有一个标题和一个导航选项卡，在 ul 中有几个 li。在我的刊头中，我有一个 .png 标志。现在我想将导航及其元素居中，同时在文档中创建两个装订线，但更重要的是，我希望标头中的徽标位于第一个 li 元素开始的导航上方。

在下面可怕的插图中，您可以看到我想要实现的目标：

```
 |.PNG |  

    | li  |  li  |  li  |  li  | 
```

到目前为止，列表元素是居中的，但我不能将 .png 居中，如上所示。

在此先感谢您的帮助。\:D/

**编辑：**

的HTML

```
<header><img src="whatever.png"</header>
<ul class="nav">
    <li>
        <a href="/">1</a>
    </li>
    <li>
        <a href="/">2</a>
    </li>
    <li>
        <a href="/">3</a>
    </li>
    <li>
        <a href="/">4</a>
    </li>
    <li>
        <a href="/">5</a>
    </li>
    <li>
        <a href="/">6</a>
    </li>
    <li>
        <a href="/">7</a>
    </li>
</ul> 
```

CSS：

```
header {margin: 0 auto; width: 100%;}
.nav {text-align: center;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:00:58.707

使标题和导航具有相同的宽度并固定边距。

**CSS**

```
header,
nav
{
    width: 960px;
    margin: 0 auto;
} 
```

**HTML**

```
<header>
    <img src="logo.png">
</header>
<nav>
    <ul>
        <li><a href="#">Test</a></li>
        <li><a href="#">Test</a></li>
        <li><a href="#">Test</a></li>
    </ul>
</nav> 
```

# java - 时间序列中的峰值检测

> ID：12250134
> 
> 赞同：14
> 
> 时间：2012-09-03T14:52:35.490
> 
> 标签：java, time-series

我目前正在做一个小项目，我想在其中比较两个时间序列。相似性度量真的很模糊，如果两个时间序列大致具有相同的形状，则它们被认为是相似的。

所以我想“如果它们只需要具有相同的形状，我只是比较两个时间序列的峰值，如果峰值在同一位置，那么时间序列肯定会相似”

我现在的问题是找到一个好的峰值检测算法。我使用了谷歌，但我只提出了[时间序列中峰值检测的简单算法](http://www.tcs-trddc.com/trddc_website/pdf/SRL/Palshikar_SAPDTS_2009.pdf)。问题是，本文中描述的算法可以很好地处理非常极端和细小的峰值，但在大多数情况下，我的[时间序列](https://i.stack.imgur.com/LQluB.png)具有相当平坦的峰值，因此不会被检测到。

有人知道我在哪里可以找到或搜索可以检测下图中显示的峰值的算法吗？

![时间序列](../Images/43efdc8ed925a1601fb1c5043df44ef7.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T15:24:06.077

您似乎只是在寻找斜率反转（从正到负，反之亦然）。粗略的 Java 算法可能是（未经测试）：

```
List<Point> points = ... //all the points in your curve
List<Point> extremes = new ArrayList<Point> ();
double previous = null;
double previousSlope = 0;

for (Point p : points) {
    if (previous == null) { previous = p; continue; }
    double slope = p.getValue() - previous.getValue();
    if (slope * previousSlope < 0) { //look for sign changes
        extremes.add(previous);
    }
    previousSlope = slope;
    previous = p;
} 
```

最后，衡量相似性的一个好方法是相关性。在您的情况下，我会查看百分比移动相关性（换句话说，您希望您的 2 个系列同时上升或下降） - 这通常是在金融中所做的，例如计算 2 个资产回报之间的相关性：

*   创建 2 个新系列，其中 2 个系列的每个点的移动百分比
*   计算这两个系列之间的相关性

例如，您可以在此处阅读有关[回报相关性的](https://quant.stackexchange.com/questions/489/correlation-between-prices-or-returns)更多信息。总之，如果您的价值观是：

```
Series 1  Series 2
 100        50
 98         49
 100        52
 102        54 
```

“回归”系列将是：

```
Series 1  Series 2
 -2.00%     -2.00%
 +2.04%     +6.12%
 +2.00%     +3.85% 
```

并且您计算这 2 个回报系列的相关性（在本例中：0.96），以衡量 2 条曲线的相似程度。您可能想要调整结果的方差（即，如果一个形状的范围比另一个大得多）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T15:50:39.490

您可以使用一个非常简单的局部极值检测器：

```
// those are your points:
double[] f = {1, 2, 3, 4, 5, 6, 5, 4, 7, 8, 9, 3, 1, 4, 6, 8, 9, 7, 4, 1};
List<Integer> ext = new ArrayList<Integer> ();
for (int i = 0; i<f.length-2; i++) {
  if ((f[i+1]-f[i])*(f[i+2]-f[i+1]) <= 0) { // changed sign?
    ext.add(i+1);
  }
}
// now you have the indices of the extremes in your list `ext` 
```

这将适用于平滑系列。如果你的数据有一定的变化，你应该先把它通过一个低通滤波器。低通滤波器的一个非常简单的实现是移动平均（每个点都被最接近的 k 值的平均值代替，k 是窗口大小）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T08:17:15.513

Eli Billauer 提出的 peakdet 算法运行良好且易于实现：

[http://www.billauer.co.il/peakdet.html](http://www.billauer.co.il/peakdet.html)

该算法特别适用于噪声信号，其中使用一阶导数的方法失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T15:59:22.237

如果您想要统计上更合理的东西，您可以测量两个系列之间的**互相关。**你可以查[维基百科](http://en.wikipedia.org/wiki/Cross-correlation)，或者[这个网站](http://paulbourke.net/miscellaneous/correlate/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-10T20:11:48.060

我不确定时间序列或特定峰值检测算法之间的相关性，但这是我写的一个最大峰值检测算法。它不会检测最小峰值，但可以通过反转 for 循环中的操作来轻松扩展。

```
List<XYDataItem> maxPoints = ... //list to store the maximums
XYDataItem leftPeakPoint = new XYDataItem(0, 0);
int leftPeakPointIndex = 0;
XYDataItem rightPeakPoint = new XYDataItem(0, 0);
boolean first = true;
int index = -1;
List<XYDataItem> pointList = (List<XYDataItem>) lrpSeries.getItems();
for (XYDataItem point : pointList) {
    index++;
    if (first) {
        //initialize the first point
        leftPeakPoint = point;
        leftPeakPointIndex = index;
        first = false;
        continue;
    }
    if (leftPeakPoint.getYValue() < point.getYValue()) {
        leftPeakPoint = point;
        leftPeakPointIndex = index;
        rightPeakPoint = point;
    } else if (leftPeakPoint.getYValue() == point.getYValue()) {
        rightPeakPoint = point;
    } else {
        //determine if we are coming down off of a peak by looking at the Y value of the point before the
        //left most point that was detected as a part of a peak
        if (leftPeakPointIndex > 0) {
            XYDataItem prev = pointList.get(leftPeakPointIndex - 1);
            //if two points back has a Y value that is less than or equal to the left peak point
            //then we have found the end of the peak and we can process as such
            if (prev.getYValue() <= leftPeakPoint.getYValue()) {
                double peakx = rightPeakPoint.getXValue() - ((rightPeakPoint.getXValue() - leftPeakPoint.getXValue()) / 2D);
                maxPoints.add(new XYDataItem(peakx, leftPeakPoint.getYValue()));
            }
        }
        leftPeakPoint = point;
        leftPeakPointIndex = index;
        rightPeakPoint = point;
    }
} 
```

其结果将使检测到的峰值集中在连续数据点的 Y 值相同的平坦部分。XYDataItem 只是一个包含 X 和 Y 值作为双精度值的类。这可以很容易地用等效的东西代替。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-30T19:45:55.770

该问题的答案较晚，但动态时间规整 (DTW) 算法是此类问题的正确选择。基本上有两个时间序列，其中一个是模板，另一个是样本。我建议检查微笑库 DynamicTimeWarping 类的源代码。

[http://haifengl.github.io/](https://github.com/haifengl/smile/blob/master/math/src/main/java/smile/math/distance/DynamicTimeWarping.java)

# c# - 是否可以反汇编程序来检索数据库凭据或更改 SQL 查询？

> ID：12250135
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:39.603
> 
> 标签：c#, java, database, programming-languages, disassembly

我开始考虑是否可以**反汇编程序**以**检索**它用于连接数据库的**凭据，或者可能在运行时拦截程序并操作（SQL）查询***（不是在谈论 SQL 注入）的问题*.

也许这是一个荒谬的想法，但我需要知道我的客户收到的程序是否应该使用一个只能访问（和权限，即只读）特定表的帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:59:02.173

这绝对不是一个荒谬的想法——有很多工具可以将程序反汇编成源代码。例如，在 .NET 世界中，您有[Reflector](http://www.reflector.net/)和[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)，大多数语言都有类似的东西。

如果用户名或密码以纯文本形式出现在源代码中，则使用反汇编工具很容易获得它。如果它看起来是加密的，但加密算法和密钥是你源代码的一部分，那么它很容易获得。

为了解决这个问题，在 .NET 世界中，您可以在配置文件中[存储加密密码。](https://stackoverflow.com/questions/5522879/encrypt-password-in-app-config)

或者，您可以将数据库配置为使用[域身份验证](https://stackoverflow.com/questions/1250552/what-is-a-trusted-connection)，其中用户的域帐户被透明地用于访问，而不是硬编码的用户名/密码。

最后，您应始终尽可能使用[最小权限原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)- 仅允许用户权限执行所需操作的最小子集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:01:27.243

从理论上讲，您制作的每个程序都是要被反汇编的候选程序，因此您永远不应该将任何凭据直接写入它们。

根据您正在制作的程序类型，可以使用一些替代方法来编写凭据，例如在 Web 应用程序中，您应该使用 jndi 查找来搜索与您的应用程序分开创建的服务器连接，这样您就不会存储任何程序中的连接信息。

如果您正在编写桌面应用程序，您仍然可以使用 jndi 查找，但它会稍微复杂一些，在这种情况下，您可能想要创建一个服务器应用程序来处理来自服务器的身份验证和数据库连接，并且只会显示数据到客户端应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:56:40.640

如果您为所有客户使用相同的帐户并且您要让它传播，这相当于根本不为该帐户设置密码（或将其公开），即使它已放入您的二进制文件中代码。那是因为事实上不可能控制一条超过 5 人的保留信息，即使这些信息是可靠的，他们使用的系统也不可靠。如果您真的想控制谁访问您的数据库（如您所愿），请将身份验证保留在受限制的位置，例如在服务器端，如上所述。

关于中间人攻击，如果您要通过不可靠的网络（例如，不是您的小型 LAN）进行通信，您应该假设这可能发生（嗅探 SQL 或任何其他类型的信息）并且您应该保护您的通信，例如使用加密连接（例如 SSL 或 TLS）。当然，除非您不关心发送的内容，或者您​​接受被拦截的中低风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T02:27:07.527

从安全的角度来看，拆卸总是可能的。一个足够老练的攻击者可以只阅读机器代码并弄清楚它的作用，就好像它是正常的源代码一样。当然，这并不容易，但在“它需要像样的工具和一些聪明才智”的意义上是困难的，而不是“数学家认为需要比太阳预期寿命更长的时间”的意义上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T15:01:04.763

拆卸第三方产品通常违反许可协议，因此不建议单独使用。

也就是说，应用程序很少使用硬编码的数据库凭据，因为它们通常是特定于安装或部署的。许多应用程序将它们存储在 web.config 或 app.config 文件中。旧版应用程序可能会将它们存储在注册表中。

更好的解决方案可能是运行像[WireShark](http://www.wireshark.org/)这样的网络嗅探器并查看通过网络的数据包。如果是 SQL Server，默认使用 1433 端口。

# gwt - 具有可编辑节点的 GWT CellTree

> ID：12250136
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:41.763
> 
> 标签：gwt

我有一个 CellTree，它使用 EditTextCell 作为其子组件的 CompositeCell 的一部分。我注意到有时当我编辑一个节点并单击另一个节点时，此单元格会切换到编辑模式，但第一个不会退出它。

在调试 CellTree 类后，我发现有时 onBlur 事件在失去焦点时不会转发到正在编辑的节点。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:49:39.583

确保在构造函数中有这一行

```
super("click", "keyup", "keydown", "blur"); 
```

这在事件处理程序中

```
...
else if ("blur".equals(type)) {
        // Commit the change. Ensure that we are blurring the input element and
        // not the parent element itself.
        EventTarget eventTarget = event.getEventTarget();
        if (Element.is(eventTarget)) {
            Element target = Element.as(eventTarget);
            if ("input".equals(target.getTagName().toLowerCase())) {
                commit(context, parent, viewData, valueUpdater);
            }
        }
    } 
```

看看这个帖子的最后一个答案[EditTextCell FieldUpdater width](https://stackoverflow.com/questions/6274124/edittextcell-fieldupdater-width)

# android - 应用进程被杀死后的片段 onCreate

> ID：12250140
> 
> 赞同：0
> 
> 时间：2012-09-03T14:52:58.260
> 
> 标签：android, android-fragments, oncreate

我有一个应用程序，它基本上是一个具有主要活动和查看寻呼机片段的启动器，我只是注意到，如果我从我的应用程序启动一个应用程序并且当我以某种方式返回时我的应用程序被杀死，则首先调用 on create fragment 函数我在创建主要活动功能。

这最终使我的应用程序崩溃，因为我首先获得了使用主活动的所有应用程序的列表，然后每个寻呼机视图片段将从主列表中获得一个子列表。该应用程序在第一次执行时运行良好，因为 android 首先运行主要活动的创建时，然后是片段的创建时

那么我该如何解决呢？有没有办法首先调用 onCreate Main Activity 函数？或者有更好的方法吗？

当我尝试创建较短的列表时，该应用程序给出了非法参数异常，并且由于主列表仅在我返回我的应用程序时填充为主要活动，因此主列表为空，给了我异常

编码：

`

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.grid, null);

        GridView gridview = (GridView) view.findViewById(R.id.gridview);

        int starterPosition;

        starterPosition = 16 * position;
        int enderPosition = starterPosition + 16;

        if (enderPosition > appsList.size()) {
            enderPosition = appsList.size();
        }

        ArrayList<App> shorterList = new ArrayList<App>(appsList.subList(
                starterPosition, enderPosition));

        final AppLauncherAdapter grid = new AppLauncherAdapter(ctx, shorterList);

        gridview.setAdapter(grid);

        gridview.setSelector(R.color.trans);

        return gridview;
    } 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:55:16.597

有一种方法称为`onActivityCreated`您应该专门用于此目的。`onActivityCreated`总是在`Activity`'s`onCreate`方法之后调用。

# c# - 我们是否应该在初始化时将变量设置为 null、false 并创建新对象？

> ID：12250142
> 
> 赞同：2
> 
> 时间：2012-09-03T14:53:06.707
> 
> 标签：c#, null

我在 IBM 页面上寻找 .NET 的一些文件网示例代码，我发现了这个：

```
namespace CESample
{
    // Represents the connection with the Content Engine.
    public class CEConnection
    {
        private IDomain domain;
        private IObjectStoreSet ost;
        private ArrayList osNames;
        private String domainName;
        private bool isCredentialsEstablished;

        // Constructor
        public CEConnection()
        {
            domain = null;
            ost = null;
            osNames = new ArrayList();
            domainName = null;
            isCredentialsEstablished = false;
        }

        //... other methods 
```

没关系，在创建对象时始终将每个变量设置为空？那么 bool 和 new ArrayList() 怎么样？我们应该这样做吗？将布尔值始终设置为假？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:54:04.407

除了数组列表之外的所有内容都不需要。

在执行构造函数内的代码之前，字段会自动使用其各自的默认值初始化。

这段代码是等价的：

```
public class CEConnection 
{ 
    private IDomain domain; 
    private IObjectStoreSet ost; 
    private ArrayList osNames; 
    private String domainName; 
    private bool isCredentialsEstablished; 

    // Constructor 
    public CEConnection() 
    { 
        osNames = new ArrayList(); 
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:55:30.700

从某种意义上说，它“没问题”，不会导致意外行为、浪费任何资源或导致您的代码变得不那么可读。

这是不必要的，因为在调用构造函数时所有这些变量（除了`osNames`）都已经具有这些值。与局部变量不同，实例和静态变量*总是*有一个值（即使该值为空），因此在使用前不需要初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:57:49.497

可以将其设置为任何可以编译的值。

真正的问题是，“考虑到传递给构造函数的参数，这是一个有意义且有效的启动**此类的状态吗？”** 在这种情况下，这意味着没有参数。

这是构造函数的工作，将类置于以下状态：

1.  对类的语义有效。
2.  与参数相关（如果有）。

这样做的任何东西都很好。

任何不这样做的东西充其量是一个沉重的（因此很可能是不明智的）优化，更糟糕的是一个严重的缺陷。

相关地，任何改变类状态的方法或属性也有责任使其保持有效状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:59:47.903

声明字段变量时，它会自动初始化为`default(T)`. 这对于引用变量为 null，对于布尔值为 false，对于“数字”值类型（整数、双精度、小数，...）为 0

因此，这些初始化程序很混乱。他们只是使代码更长。

请注意，ArrayList 的 default(T) 也是 null，因此您仍然必须将其设置为 ArrayList 的新实例。

# iphone - 如何在点击iphone键盘的键时禁用大字母

> ID：12250143
> 
> 赞同：0
> 
> 时间：2012-09-03T14:53:06.927
> 
> 标签：iphone, ios, uibutton, uikeyboard

我正在做一个定制的键盘。我禁用了键盘上的默认键，使其尚未显示，但尚未禁用大字母。正如您在下面看到的，我们如何禁用这个默认的大写字母？

![大字](../Images/f7f4ce5f01b2dc9bd39672200c37ba82.png)

这是我禁用默认字母不显示的代码。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
NSCharacterSet *disabledLetters = [[NSCharacterSet characterSetWithCharactersInString:@" "] invertedSet];
NSRange location = [string rangeOfCharacterFromSet:disabledLetters];
return (location.location == NSNotFound);} 
```

但是，我还没有禁用每个键的行为（当我们单击它们并使它们不更大时禁用操作）。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:57:29.773

你不能，它是 UIKit 的一部分，你不能干涉它。

您最好设计一个完整的替换键盘并将其用作文本字段的`inputView`. 但请注意，并非所有人都使用 QWERTY（在法国，我使用 AZERTY 布局）。

# c - 在 C 中的双字符指针中查找字符串的方法？

> ID：12250149
> 
> 赞同：2
> 
> 时间：2012-09-03T14:53:13.563
> 
> 标签：c, string

我有一个`char **s;` 它被发送到一个函数：

```
func(&s);

bool func(char ***p); 
```

现在，我想查找 s 中是否存在特定字符串；我可以：

```
while (*s) {
if (strcmp(*s, "MyString") == 0) found;
s++;
} 
```

但是有什么捷径可以做到这一点吗？函数 'func' 可以填充有限和预定义的特定字符串。

谢谢拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:55:12.673

查看函数`strstr`查找一个字符串在另一个字符串中的第一次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:58:59.387

并非如此，标准 C 库只有基本的函数来操作字符串。几乎不支持字符串数组（或其他“复杂”数据结构，如链表......）。

也就是说，既然每个人都需要这些，你应该检查链接到你的代码的库和实用程序。如果你给我们一份清单，我们也许可以指出一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:00:59.563

确实有`strstr`C 标准库的功能，它在另一个字符串中找到第一次出现的子字符串。让我们假设它`s`是一个指向字符串的指针。

```
if (strstr(*s, "MyString") != NULL) {
    /* found */
} else {
    /* not found */
} 
```

如果`s`是字符串数组，则必须遍历数组，并将当前字符串和子字符串与`strstr`.

```
#include <stddef.h>
#include <string.h>

int
f(char const **p, char const *q, size_t nmemb)
{
    for (size_t i = 0; i < nmemb; ++i)
        if (strstr(p[i], q) != NULL)
            return 1;
    return 0;
} 
```

如果所有字符串的大小都相同，则可以使用 Indeed `strcmp`。

```
#include <stddef.h>
#include <string.h>

int
f(char const **p, char const *q, size_t nmemb, size_t size)
{
    for (size_t i = 0; i < nmemb; ++i)
       if (strncmp(p[i], q, size) == 0)
            return 1;
    return 0;
} 
```

另一种解决方案是对数组进行排序，然后搜索您的元素。

```
#include <stddef.h>
#include <stdlib.h>

static int
cmp(void const *p, void const *q)
{
    return strcmp((char const *)p, (char const *)q);
}

int
search(char const **p, char const *q, size_t nmemb, size_t size)
{
    return bsearch(q, p, nmemb, size, cmp);
}

void
sort(char const **p, size_t nmemb, size_t size)
{
    qsort(p, nmemb, size, cmp);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:04:36.917

不，C 标准库中没有在字符串数组中查找字符串的函数。

由于您有一个字符串数组（或更准确地说是一个数组`char`数组），因此您需要遍历每个项目并检查它是否匹配。您可以使用`strcmp`or `strstr`，但这并不重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T15:47:31.967

只需按如下方式修改您的while循环..

```
while (**s) 
{
if (strcmp(**s, "MyString") == 0) found;
s++;
} 
```

# inno-setup - 如何使用 Inno Setup 添加计划任务

> ID：12250151
> 
> 赞同：19
> 
> 时间：2012-09-03T14:53:19.303
> 
> 标签：inno-setup

我有一个小型控制台应用程序，它安装在我的（更大的）应用程序中。该设置是使用 Inno Setup 创建的，效果非常好。

我希望 Inno Setup 向 Windows 调度程序（启动控制台应用程序）添加一个或多个任务。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-03T14:59:37.007

只需将[`task scheduler command line`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357(v=vs.85).aspx)条目添加到[`[Run]`](http://www.jrsoftware.org/ishelp/topic_runsection.htm)脚本的部分。该部分中的条目在程序成功安装后执行。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-14T07:08:25.690

举一个比@TLama的答案更具体的例子：

例如，要安排一个任务以每小时使用某个参数运行您的应用程序，请使用：

```
[Run]
Filename: "schtasks"; \
    Parameters: "/Create /F /SC HOURLY /TN ""My Task"" /TR ""'{app}\MyProg.exe' par1"""; \
    Flags: runhidden 
```

笔记：

*   命令行（和任务名称）周围的[双双引号](https://jrsoftware.org/ishelp/index.php?topic=params)和应用程序路径周围的单引号；
*   切换以覆盖具有相同名称的`/F`任何现有任务（对于重新安装/升级很重要）。

请参阅[`schtasks.exe`命令](https://docs.microsoft.com/en-us/windows/win32/taskschd/schtasks)和[`[Run]`部分](https://jrsoftware.org/ishelp/index.php?topic=runsection)的完整文档。

* * *

当您要调试非工作任务创建时，请从以下开始`schtasks`（`cmd.exe /K`当然，删除`runhidden`标志）：

```
[Run]
Filename: "{cmd}"; \
    Parameters: "/K schtasks /F /Create /SC HOURLY /TN ""My Task"" /TR ""'{app}\MyProg.exe' par1"""; 
```

这样会保留带有错误消息的控制台窗口。

请参阅[调试从 Inno Setup 安装程序执行的非工作批处理文件或命令](https://stackoverflow.com/q/37324386/850848)。

* * *

对于卸载，请参阅卸载中的 [删除任务计划程序任务？](https://stackoverflow.com/q/52185023/850848)

# javascript - 如何从与 Jquery 的链接中更改选项值？

> ID：12250154
> 
> 赞同：0
> 
> 时间：2012-09-03T14:53:40.263
> 
> 标签：javascript, jquery, option

当用户单击链接时，我正在寻找一种方法来更改 Asp ListItem 的选项值。

例如我有一个 Asp ListItem：

```
<asp:DropDownList ID="DropDownList1" runat="server" class="Preview_link" 
            Height="20px" Width="118px">
    <asp:ListItem>Red</asp:ListItem>
    <asp:ListItem>White</asp:ListItem>
    <asp:ListItem>Green</asp:ListItem>
    <asp:ListItem>Blue</asp:ListItem>
</asp:DropDownList> 
```

我有 2 个链接

```
<a href="#" title="red" class="preview_link">red</a> 
<a href="#" title="white">white</a> 
```

当用户单击红色时，选项将切换为红色，白色将切换为白色。我正在使用以下代码，但它不起作用。

我将如何更改此 jquery 以使用 Asp listItem 而不是 html 下拉列表？

```
 jQuery("a.preview_link").click(function() {
    var title = jQuery(this).attr("title");
    jQuery(this).parent('p').find("select option").filter(function() {
        return $(this).text() == title;
        }).attr('selected', 'selected');  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:04:15.997

如果您的选择器没问题 - 这应该可以：

```
jQuery("a.preview_link").click(function() {
    var title = jQuery(this).attr("title");
    jQuery(this).parent('p').find("select option").filter(function() {
        return $(this).text().toLowerCase() == title;
    }).attr('selected', 'selected');  
}); 
```

但是这个功能看起来真的很疯狂。您可以使用 选择一个选项 `jQuery(this).parent('p').find("select").val(title)`。这里唯一的事情 - 我不确定是否区分大小写，但假设大小写很重要。

> 我将如何更改此 jquery 以使用 Asp listItem 而不是 html 下拉列表？

目前尚不清楚您想要什么。asp:ListItem 如果您在浏览器中查看它，则它是一个 html 下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:04:38.930

更简单，你可以这样做：

```
 $("a.preview_link").click(function() {
    var title = $(this).attr("title");
    $('#DropDownList1 option[value=title]').attr("selected", true);
     }); 
```

# android - Android - 如何在 ListView 或 ExpandableListView 中为 TextView 设置填充

> ID：12250162
> 
> 赞同：18
> 
> 时间：2012-09-03T14:54:15.850
> 
> 标签：android, listview, textview, padding, expandablelistview

我需要为or`TextView`的每一行设置填充。我尝试使用and child ( ,...) 但没有任何结果。我能怎么做？谢谢`ListView``ExpandableListView``android:padding``paddingLeft`

编辑：

这是项目的代码`ExpandableListView`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="20dp" >

    <TextView 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="wrap_content"
        android:id="@+id/titleScheda"
        android:text="TextView"
        android:layout_width="wrap_content" 
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:padding="20dp" />

</LinearLayout> 
```

`TextView`即使仅在 2 个标签之一中设置了内边距，也无法在两种布局上设置内边距。

编辑 ：

解决了。问题出在 Java 代码中，在`SimpleExpandableListAdapter`声明中。使用标准布局是不可能自定义的，但是为可扩展内容使用自定义布局是允许我们自定义任何内容的解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T17:02:36.017

我假设您使用模板文件（xml 布局）在列表视图中添加项目。如果你不是，你必须先实现它。

在该布局文件中，您可以这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp" >
    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/text" />
</LinearLayout> 
```

LinearLayout 将创建填充并环绕 TextView。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T15:28:47.210

```
for(int i=0; i< listview.getChildCount();i++) 

  listview.getChildAt(i).setPadding(10,10,10,10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-27T20:59:31.823

您可以按如下方式添加填充：

```
android:paddingBottom="20pt" 
```

# c++ - 等效范围的 STL 算法

> ID：12250164
> 
> 赞同：5
> 
> 时间：2012-09-03T14:54:32.917
> 
> 标签：c++, stl, equals

根据定义，std::equal 算法只需要一个“最后一个”迭代器。stackoverflow 上的许多帖子表明，要在两个范围之间执行等价，除了调用 std::equal 之外，还必须首先检查范围是否具有相同的大小。如果随机访问迭代器可用，这不会增加任何材料开销。然而，似乎没有随机访问迭代器，仅使用现有 STL 算法实现的第一个代码片段将比代表自定义“等效”算法（不是 STL 的一部分）的第二个代码片段慢。我的问题是，片段 2 是否比仅使用现有 STL 算法编码的任何算法更有效？如果是这样，为什么这个算法不是 STL 的一部分？

片段 1：

```
template <typename IITR1, typename IITR2>
bool equivalent(IITR1 first1, IITR1 last1, IITR2 first2, IITR2 last2)
{
    return distance(first1, last1) == distance(first2, last2) &&
        equal( first1, last1, first2 );
} 
```

片段 2：

```
template <typename IITR1, typename IITR2>
bool equivalent(IITR1 first1, IITR1 last1, IITR2 first2, IITR2 last2)
{
    while ( first1 != last1 && first2 != last2 ) {
       if (!(*first1 == *first2)) return false;
       ++first1; ++first2;
    }
    return first1 == last1 && first2 == last2;
} 
```

注意：我没有检查过，但我非常怀疑编译器是否会优化片段 1，使其生成的代码与片段 2 产生的性能相同。

完整地说，以下代码片段几乎没有用，因为如果范围大小不相等，它将失败：

```
template <typename IITR1, typename IITR2>
bool equivalent(IITR1 first1, IITR1 last1, IITR2 first2, IITR2 last2)
{
    return equal(first1, last1, first2) && equal(first2, last2, first1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:14:33.390

当 STL 被标准化时，可能没有考虑两个范围是非随机访问但不同长度的情况；并查看缺陷报告，因为它似乎不是一个非常需要的修复。正如您所指出的，编写自己的版本很容易做到正确。

改造修复的一个问题是确定四参数调用是两个范围调用`(it1, it1_end, it2, it2_end)`还是一个`(it1, it1_end, it2, predicate)`版本。区分技术 (SFINAE, `enable_if`) 直到最近才出现。

请注意，Boost.Range 有一个正确的实现；有关实施，请参见 [http://www.boost.org/doc/libs/1_51_0/boost/range/algorithm/equal.hpp](http://www.boost.org/doc/libs/1_51_0/boost/range/algorithm/equal.hpp)。它还检测两种迭代器类型何时为随机访问，并`distance`在长度不同的情况下调用短路。

```
#include <boost/range/algorithm.hpp>

boost::equal(boost::make_iterator_range(first1, last1),
    boost::make_iterator_range(first2, last2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:05:12.920

第一个仅适用于前向迭代器，一般不适用于输入迭代器。

性能将取决于迭代器类型。对于随机访问迭代器，第一个可能更快，因为主循环`equal`比第二个实现的主循环更简单；但如果`distance`必须在整个范围内迭代，可能会更慢。

为了支持输入迭代器并在所有情况下获得最佳性能，您可能需要针对不同的迭代器类别进行不同的特化。我会从第二个开始，只有当你发现它还不够时才专门研究。

我不知道为什么它不在标准库中，但你不能指望任何库包含所有可能的算法。

# haskell - Haskell 中的并行计算

> ID：12250167
> 
> 赞同：8
> 
> 时间：2012-09-03T14:54:53.773
> 
> 标签：haskell, parallel-processing, ghc

当我运行这个 Haskell 片段时，它只加载了 1 个 CPU。两者`f`和`g`都是无意义的，但它不应该在可用时加载两个 CPU 吗？编译为`ghc -O2 snippet.hs`.

```
f x = 1 + (f $! x)
g x = 5 + (g $! x)

z = a `par` b `seq` a+b
        where
        a = f 3
        b = g 5

main = do
    print z 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T15:01:09.923

您需要使用 threaded 选项 ie 进行编译，`ghc -O2 -threaded snippet.hs`然后在命令行上传递可执行文件的内核数，如下所示四个内核：

```
./snippet +RTS -N4 
```

或者，您可以让机器仅使用`-N`.

见[http://www.haskell.org/haskellwiki/Haskell_for_multicores](http://www.haskell.org/haskellwiki/Haskell_for_multicores)

# xml - 动态xml的xslt变换

> ID：12250170
> 
> 赞同：3
> 
> 时间：2012-09-03T14:55:05.247
> 
> 标签：xml, xslt

我有一个类似于下面的xml

```
<DataSet1>
    <Table1>
        <Column1>Value111</Column1>
        <Column2>Value112</Column2>
    </Table1>
    <Table1>
        <Column1>Value121</Column1>
        <Column2>Value122</Column2>
    </Table1>
    <Table1>
        <Column1>Value131</Column1>
        <Column2>Value132</Column2>
    </Table1>
    <Table2>
        <Column1>Value211</Column1>
        <Column2>Value212</Column2>
    </Table2>
    <Table2>
        <Column1>Value221</Column1>
        <Column2>Value222</Column2>
    </Table2>
    <Table2>
        <Column1>Value231</Column1>
        <Column2>Value232</Column2>
    </Table2>
</DataSet1> 
```

其中 Table1 和 Table2 是在数据集中动态添加的。所以数据集中可以有n个表作为Tablen。

我想编写生成 html 的 xsl，如下所示

```
Table1
<table>
    <tr>
        <td>Value111</td>
        <td>Value112</td>
    </tr>
    <tr>
        <td>Value121</td>
        <td>Value122</td>
    </tr>
    <tr>
        <td>Value131</td>
        <td>Value132</td>
    </tr>   
</table>

Table2
<table>
    <tr>
        <td>Value211</td>
        <td>Value212</td>
    </tr>
    <tr>
        <td>Value221</td>
        <td>Value222</td>
    </tr>
    <tr>
        <td>Value231</td>
        <td>Value232</td>
    </tr>
</table> 
```

有没有办法选择 xsl 模板作为 select="DataSet1/Table*" 可以匹配任何表并迭代结构？

请帮忙！！！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:26:48.667

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kTableByName" match="*[starts-with(name(),'Table')]"
  use="name()"/>

 <xsl:template match=
  "*[generate-id()
    =
     generate-id(key('kTableByName', name())[1])
     ]">
  <xsl:value-of select="concat('&#xA;', name(), '&#xA;')"/>
  <table>
   <xsl:apply-templates select="key('kTableByName', name())" mode="inGroup"/>
  </table>
 </xsl:template>

 <xsl:template match="*[starts-with(name(),'Table')]" mode="inGroup">
  <tr>
    <xsl:apply-templates select="*" mode="inGroup"/>
  </tr>
 </xsl:template>

 <xsl:template match="*[starts-with(name(),'Table')]/*" mode="inGroup">
  <td>
    <xsl:value-of select="."/>
  </td>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<DataSet1>
    <Table1>
        <Column1>Value111</Column1>
        <Column2>Value112</Column2>
    </Table1>
    <Table1>
        <Column1>Value121</Column1>
        <Column2>Value122</Column2>
    </Table1>
    <Table1>
        <Column1>Value131</Column1>
        <Column2>Value132</Column2>
    </Table1>
    <Table2>
        <Column1>Value211</Column1>
        <Column2>Value212</Column2>
    </Table2>
    <Table2>
        <Column1>Value221</Column1>
        <Column2>Value222</Column2>
    </Table2>
    <Table2>
        <Column1>Value231</Column1>
        <Column2>Value232</Column2>
    </Table2>
</DataSet1> 
```

**产生想要的正确结果**：

```
Table1
<table>
   <tr>
      <td>Value111</td>
      <td>Value112</td>
   </tr>
   <tr>
      <td>Value121</td>
      <td>Value122</td>
   </tr>
   <tr>
      <td>Value131</td>
      <td>Value132</td>
   </tr>
</table>
Table2
<table>
   <tr>
      <td>Value211</td>
      <td>Value212</td>
   </tr>
   <tr>
      <td>Value221</td>
      <td>Value222</td>
   </tr>
   <tr>
      <td>Value231</td>
      <td>Value232</td>
   </tr>
</table> 
```

**说明**：

正确使用**[Muenchian Grouping方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:08:25.517

您是否尝试过[xPath 上的 w3Schools 教程](http://www.w3schools.com/xpath/xpath_syntax.asp)？有一个 * 选择器，它允许您选择某个节点的所有子节点，如下所示：`DataSet1/*`

# asp.net-mvc - 将 EF 对象映射到没有匿名类型的 ViewModel 类

> ID：12250177
> 
> 赞同：1
> 
> 时间：2012-09-03T14:55:28.690
> 
> 标签：asp.net-mvc, linq, entity-framework

是否有更短的版本可以将 EF 从 linq 或 lambda 表达式映射到 View Model（这里的*Movie*是 ViewModel），知道 EF 和 ViewModel 具有相同的字段（Id、Director、Plot...）？

```
public ActionResult MovieDetails(int ID) {

        using (MAKANI.Models.Entities db = new MAKANI.Models.Entities()) {

            var rMovie = (from m in db.Movies
                           where m.ID == ID
                           select new Movie {
                               Title = m.Title,
                               Director = m.Director,
                               Plot = m.Plot,
                               Link = m.Link,
                               Starring = m.Starring
                           }).Single();

            return View(rMovie);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:57:09.620

您正在寻找一个映射框架 - 例如 AutoMapper。[http://automapper.org/](http://automapper.org/)

# xades4j - 关于如何登录 EPES 的小提示

> ID：12250181
> 
> 赞同：0
> 
> 时间：2012-09-03T14:55:39.633
> 
> 标签：xades4j

在这一刻，我在签名 EPES 上工作，我想要一些信息；

要签名，我在**SignerTestBase.java**：

```
public class SignerTestBase extends SignatureServicesTestBase 
```

{

```
static protected KeyingDataProvider keyingProviderMy;
static protected KeyingDataProvider keyingProviderNist;

static
{
    try
    {
        keyingProviderMy = createFileSystemKeyingDataProvider("pkcs12", "my/LG.pfx", "mykeypass", true);
        keyingProviderNist = createFileSystemKeyingDataProvider("pkcs12", "csrc.nist/test4.p12", "password", false);
    } catch (KeyStoreException e)
    {
        throw new NullPointerException("SignerTestBase init failed: " + e.getMessage());
    }
}
 public static Document getTestDocument() throws Exception
    {
        //return getDocument("document.xml");

        //==that I changed=====================================================================
        **return getDocument("b.xml");**

} 
```

和 ：

```
@Test
public void testSignEPES() throws Exception
{
    System.out.println("signEPES");

    Document doc = getTestDocument();

    Element elemToSign = doc.getDocumentElement();

    SignerEPES signer = (SignerEPES)new XadesEpesSigningProfile(keyingProviderMy, policyInfoProvider).newSigner();
    new Enveloped(signer).sign(elemToSign);

    **outputDocument(doc, "document.signed.epes.xml");**
} 
```

在主要：

```
System.out.println("============================================================================");          
        System.out.println("XADESTEST : EPES SIGNATURE");
        System.out.println("============================================================================"); 
        System.out.println();

        SignerEPESTest signerEPESTest = new SignerEPESTest();
        System.out.println("signerEPESTest : " + signerEPESTest.toString());

        /**
         *  ==== NOT OK =====
         */

        **signerEPESTest.testSignEPES();** 
```

当我运行时在我的控制台中：

```
============================================================================
XADESTEST : EPES SIGNATURE
============================================================================

signerEPESTest : xadestest.SignerEPESTest@1c63e8c
signEPES
Exception in thread "main" java.lang.NullPointerException
    at xades4j.utils.XadesProfileCore.addBinding(XadesProfileCore.java:81)
    at xades4j.production.XadesSigningProfile.withBinding(XadesSigningProfile.java:131)
    at xades4j.production.XadesEpesSigningProfile.<init>(XadesEpesSigningProfile.java:51)
    at xadestest.SignerEPESTest.testSignEPES(SignerEPESTest.java:59)
    at xadestest.XadesTest.main(XadesTest.java:103)
Java Result: 1
BUILD SUCCESSFUL (total time: 16 seconds) 
```

请在我搜索期间，有人可以帮助我吗？

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:33:16.400

似乎`policyInfoProvider`论点`XadesEpesSigningProfile`是空的。构造函数缺少带有更好消息的空检查..

# android - Android 中有 Vector3f 类吗？

> ID：12250182
> 
> 赞同：0
> 
> 时间：2012-09-03T14:55:41.170
> 
> 标签：android

我一直在查找 OpenGL 中的 3D 教程，我发现的几乎所有教程都使用 Vector3f 类。

谷歌搜索 Vector3f 类会返回`android.renderscript.*`包中的一个类。但是，在 vanilla Android 2.3.3 SDK 中，我没有找到任何`android.renderscript.*`包。

谁能告诉我在哪里可以找到 vanilla Android 2.3.3 中的 Vector3f 类？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:00:23.913

Android 支持 OpenGL **ES**而不是 OpenGL。听起来一样，但事实并非如此。OpenGL 教程可能有助于获得一些通用基础知识，但您应该寻找 OpenGL ES 教程（无论是 Android 还是 iOS），因为很多东西不同，足以使 OpenGL 教程不适用于 ES

我发现这[值得一读](https://stackoverflow.com/questions/1179249/opengl-vs-opengl-es-2-0-can-an-opengl-application-be-easily-ported)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:26:51.567

有[http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/j3dapi/javax/vecmath/package-summary.html](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/j3dapi/javax/vecmath/package-summary.html)。另请参阅[导入 javax.vecmath](https://stackoverflow.com/questions/4381291/import-javax-vecmath)

# java - java.sql.SQLException：找不到适合 jdbc:sqlserver:// 的驱动程序

> ID：12250184
> 
> 赞同：2
> 
> 时间：2012-09-03T14:55:49.170
> 
> 标签：java, sql, sql-server-2008

我已经检查了与此问题有关的所有消息，但它是相同的，它不起作用。我必须使用 java 连接到 sql server 2008 数据库，我添加了 sqljdbc4.jar 但什么也没有。

我做的不好，如果你还需要什么，请告诉我。

```
 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
 conexion = DriverManager.getConnection("jdbc:sqlserver://xxx.xxx.xxx.xxx:1433;databaseName=ccis;user=isoft;password=1s0ft@"); 
```

我收到这条消息：

> java.sql.SQLException：找不到适合 jdbc 的驱动程序：sqlserver://xxx.xxx.xxx.xxx:1433;databaseName=ccis;user=isoft;password=1s0ft@"

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T23:01:57.573

尝试打开一个新的驱动实例，然后连接到数据库：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance();
conexion = DriverManager.getConnection("jdbc:sqlserver://xxx.xxx.xxx.xxx:1433" +
                        ";databaseName=ccis" +
                        ";user=isoft" + 
                        ";password=1s0ft@;"); 
```

三重检查您的 sqljdbc4.jar 是否在您的 classapth 中。

# c# - 如何使 linq 生成连接 sql server 上的列值的 sql 语句

> ID：12250185
> 
> 赞同：0
> 
> 时间：2012-09-03T14:55:55.557
> 
> 标签：c#, linq, sql-server-2008

我知道有一种方法可以使用 sql 语句连接列的值，正如[这里](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)所解释的那样。例如

```
SELECT SUBSTRING(
        (SELECT ', '+ Name AS 'data()' from Names for xml path(''))
       ,3, 255) as "MyList" 
```

是否可以使**linq to sql**在数据库中生成连接作为不在内存中的子查询或带有许多附加查询？

# swing - JRadioButtonMenuItem 中各种大小的图标的垂直对齐方式

> ID：12250188
> 
> 赞同：2
> 
> 时间：2012-09-03T14:56:11.480
> 
> 标签：swing, icons, alignment, jradiobutton

我遇到了将不同大小的图标与**JRadioButtonMenuItem**对齐的问题。这是我的问题的图片。图标有多种尺寸并左对齐。

![图标有多种尺寸并左对齐](../Images/d746337780d2ae7bf943757ea97c7107.png)

我想将图标居中，如下图所示。

![在此处输入图像描述](../Images/436f1d3b8a0e6f0a3c45dd1d9ab1d133.png)

显然，JRadioButtonMenuItem 类的所有方法都不允许这样做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:03:15.037

计算宽度为最宽图标的图标前后要添加多少空白，并使用 setIconTextGap() 方法放置每个图标，这样：

```
[(widestIconWidth-iconWidth)/2_ofWhiteSpace][icon][(widestIconWidth-iconWidth)/2_ofWhiteSpace] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T16:30:38.613

作为替代方案，`Icon`使用恒定的封闭大小实现接口并缩放渲染的内容以反映所需的图像大小，如本[示例](https://stackoverflow.com/questions/2833482/how-to-represent-double-values-as-circles-in-a-2d-matrix-in-java/2834484#2834484)所示。为方便起见，您可以渲染任意大小的[unicode 字形，如此](http://www.unicode.org/charts/PDF/U1F300.pdf)[处](https://stackoverflow.com/questions/4148336/jformattedtextfield-is-not-properly-cleared/4151403#4151403)所示。

[![图片](../Images/210a155c0e69b26f58e2f4424d38b5c0.png)](https://i.stack.imgur.com/Q77pq.png)

# android - 从静态方法调用 startActivityForResult

> ID：12250191
> 
> 赞同：4
> 
> 时间：2012-09-03T14:56:23.437
> 
> 标签：android

我有一个按钮监听器，当用户单击按钮时，我想启动相机意图。目前我有这个：

```
public class ButtonListener implements View.OnClickListener 
{
private ArrayList<String> connectedItems;
private String identifier = null;
private Context context;
private EnteredValues enteredValues;

public ButtonListener(Context c, String identifier, ArrayList<String> connectedItems) {
    this.connectedItems = connectedItems;
    this.identifier = identifier;
    this.context = c;
}

public void onClick(View v) {
    if (identifier.equals(ButtonItem.takePhoto)) {
        MainActivity.takePhoto();
    }

} 
```

现在我想在我的 mainActivity 中调用一个方法，并且我想在那里启动 startActivityForResult，但是我收到一个错误，我无法从静态方法调用 startActivityForResult。

```
public class mainActivity extends Activity{
...
   public static void takePhoto(){
       startActivityForResult(new Intent(MediaStore.ACTION_IMAGE_CAPTURE));
          break;

       //Here I get the error..
   } 
```

}

解决此类问题的最佳做法是什么？将 mainActivity 对象传递给我的 buttonListener 还是有其他选项？

很多谢谢 :)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T15:05:05.477

不要使用应用程序上下文 - 因为它会破坏您的 ActivityStack。我建议将 Activity 参数添加到此静态方法中：

```
public static void takePhoto(Activity activity, int requestCode){
   activity.startActivityForResult(new Intent(MediaStore.ACTION_IMAGE_CAPTURE), requestCode);
} 
```

不仅仅是从你的听众传递活动。您必须将 Activity 实例传递给它，而不是简单的 Context，因为只有 Activity 可以进行`startActivityForResult()`调用。

所以 clickListener 代码会改变如下： public class ButtonListener implements View.OnClickListener { private ArrayList connectedItems; 私有字符串标识符 = null; 私人活动活动；私人输入值输入值；

```
public ButtonListener(Activity activity, String identifier, ArrayList<String> connectedItems) {
    this.connectedItems = connectedItems;
    this.identifier = identifier;
    this.activity = activity;
}

public void onClick(View v) {
    if (identifier.equals(ButtonItem.takePhoto)) {
        MainActivity.takePhoto(activity, 100);
    }
} 
```

制作此类静态帮助程序以避免从代码的不同部分创建意图和 startActivities 是一种很好的做法。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-18T20:59:09.423

`this`您可以使用（或）将 MainActivity 作为上下文传递给静态方法，`MainActivity.this`然后将其转换为`Activity`. 这不会破坏您的 ActivityStack。

在您的情况下，在 MainActivity 中创建点击侦听器：

```
new ButtonListener(this, "abc", null)
new ButtonListener(MainActivity.this, "abc", null) // in a nested class or constructor 
```

然后在 ButtonListener 中传递上下文：

```
MainActivity.takePhoto(context); 
```

最后在 MainActivity 中：

```
public static void takePhoto(Context context){
   ((Activity)context).startActivityForResult(new Intent(MediaStore.ACTION_IMAGE_CAPTURE), 123);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:57:47.123

您的按钮侦听器中的上下文很可能是您的活动或属于您的活动的东西。尝试从它开始你的下一个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:58:28.543

使用`mainActivity.this.startActivityForResult(...)`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-03T15:01:55.367

您可以使用**[应用程序上下文](https://developer.android.com/reference/android/content/Context.html)**

```
getApplicationContext() 
```

# apache-flex - 如何在 Flex spark videoPlayer 中获取 totalTime？

> ID：12250194
> 
> 赞同：0
> 
> 时间：2012-09-03T14:56:29.633
> 
> 标签：apache-flex, flex4

spark videoPlayer中似乎缺少totalTime

**如何在 s:videoPlayer 组件中检索电影的长度？**

（似乎 onMetaData 也不见了）

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:59:48.100

通过[duration](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/VideoPlayer.html#duration)属性：视频播放的时长，以秒为单位。

# sql - 如何在 MS SQL 中更新多条记录？

> ID：12250195
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:56:33.443
> 
> 标签：sql, sql-server-2008

```
Select Stackoverflow.* From Stackoverflow Where GeneralId = 1000; 
```

上面的 sql 返回 3 条记录，如：

```
Id     GeneralId    Name             StateId
1       1000        stack             null
2       1000        stackover         null
3       1000        stackoverflow     null 
```

我想更新返回记录的 StateId。

另一方面

有时记录数可能是 1，有时可能是 3，如上面的示例。

```
Select Stackoverflow.* From Stackoverflow Where GeneralId = 1001; 
```

上面的 sql 语句只返回一条记录。

```
Id     GeneralId    Name        StateId
8       1001        stck         null 
```

那么如何更新这些返回的记录。我认为应该有一个从 0 到记录计数的循环，并且在那个循环中

我只尝试编写伪代码。

```
Update    Stackoverflow
Set StateId = 1
where = "loop as I mentioned should be come?" 
```

不是吗？任何的想法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:58:05.287

你试一试

```
Update    Stackoverflow
Set StateId = 1
where GeneralId = 1000; 
```

它将更新与 WHERE 子句对应的所有记录，无论它们是 1 还是 1000。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:58:25.200

第一个是：

```
UPDATE Stackoverflow
Set StateId = 1
where GeneralId = 1000; 
```

对于第二个：

```
UPDATE Stackoverflow
Set StateId = 1
where GeneralId = 1001; 
```

对于他们两个：

```
UPDATE Stackoverflow
Set StateId = 1
where GeneralId IN (1000,1001); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:58:26.957

如果您想将 WHERE 子句选择的所有记录设置为您刚刚编写的相同值

```
Update Stackoverflow Set StateId = 1 WHERE GeneralID = 1000 
```

并且所有三个记录（或只有 GeneralID = 1001 时的唯一一个）将使用新值更新 UPDATE 语句适用于 WHERE 子句检索到的记录集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T14:59:02.670

```
Update    Stackoverflow
Set StateId = 1
where Id in (
//Your query if you want to customize
Select Id From Stackoverflow Where GeneralId = 1001;
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T14:59:44.020

考虑使用 SQL Server 的`update ... from`语法，例如：

```
update  tbl1
set     stateid = 1
from    ... your query here ... 
```

例如：

```
update  tbl1
set     stateid = 1
from    Stackoverflow as tbl1
where   tbl1.GeneralId = 1000 
```

# javascript - 使用 jquery 插件 autoresize() 在 foreach 中敲除.js 文本区域

> ID：12250208
> 
> 赞同：1
> 
> 时间：2012-09-03T14:57:49.113
> 
> 标签：javascript, jquery, knockout.js, autoresize

我如何使用带有淘汰赛的 autoresize()？

这是我拥有的代码的精简版本。

```
<div data-bind="foreach: Rows" >
  <textarea data-bind="value: RowText" ></textarea>
</div> 
```

我无法弄清楚如何在每个文本区域上调用 autoresize 以使它们适合绑定到它们的文本。

基于artems的回答，最终的解决方案是

```
$(document).ready(function () {
        ko.bindingHandlers.jqAutoresize = {
            update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                $(element).autosize();
            }           
        };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:26:22.827

您可以创建适用`autoresize()`于所有的自定义绑定`textareas`：

```
ko.bindingHandlers.jqAutoresize = {
    init: function(element, valueAccessor) {
        var options = ko.utils.unwrapObservable(valueAccessor()) || {};

        $(element).autoResize(options);
    }
}; 
```

更新您的观点：

```
<div data-bind="foreach: Rows" >
  <textarea data-bind="jqAutoresize: {}, value: RowText" ></textarea>
</div> 
```

# .net - 读取介于两者之间的 XML 数据块 标记并将字段插入 SQL 数据库

> ID：12250212
> 
> 赞同：0
> 
> 时间：2012-09-03T14:58:05.280
> 
> 标签：.net, sql-server, vb.net

我正在使用以下 VB.Net 代码使用 VB.NET 下载大型 XML 文件（64 MB）并将其保存在本地，效果很好，XML 提要如下所示。

我的 xml 提要网址是**http://www.topbuy.com.au/tbcart/tbadmin/datafeed/shoppingcom.xml**

我正在尝试实现并需要建议，而不是下载文件并将其存储在本地，VB.Net 中有没有一种方法可以读取标签之间的 XML 数据块并将字段插入 SQL 数据库。任何例子，我应该在下面的代码中改变什么**（VB.Net）**

```
Dim remoteUri As String = "http://www.topbuy.com.au/tbcart/tbadmin/datafeed/"
Dim fileName As String = "shoppingcom.xml"
Dim myStringWebResource As String = Nothing
' Create a new WebClient instance.
Dim myWebClient As New WebClient()
' Concatenate the domain with the Web resource filename. Because DownloadFile 
'requires a fully qualified resource name, concatenate the domain with the Web resource file name.
myStringWebResource = remoteUri + fileName
Console.WriteLine("Downloading File ""{0}"" from ""{1}"" ......." + ControlChars.Cr + ControlChars.Cr, fileName, myStringWebResource)
' The DownloadFile() method downloads the Web resource and saves it into the current file-system folder.
myWebClient.DownloadFile(myStringWebResource, fileName)
Console.WriteLine("Successfully Downloaded file ""{0}"" from ""{1}""", fileName, myStringWebResource)
Console.WriteLine((ControlChars.Cr + "Downloaded file saved in the following file system folder:" + ControlChars.Cr + ControlChars.Tab + Application.StartupPath)) 
```

**XML**

```
<Products>
<Product><MPN><![CDATA[INK-PE-009]]></MPN><Manufacturer><![CDATA[Epson]]></Manufacturer><ProductName><![CDATA[Epson T009 Colour Compatible Inkjet Cartridge]]></ProductName><ProductURL><![CDATA[http://www.topbuy.com.au/tbcart/pc/Epson-T009-Colour-Compatible-Inkjet-Cartridge-p3343.htm?utm_source=TopBuy_ShoppingCom&utm_content=&utm_medium=cpc&dismode=1&utm_campaign=TBDF-XX10421]]></ProductURL><ProductType><![CDATA[Compatible Ink Cartridges]]></ProductType><ImageURL><![CDATA[http://www2.topbuy.com.au/tbcart/pc/catalog/General/TBDF-XX10421_1.jpg]]></ImageURL><Price>4.09</Price><OriginalPrice>9</OriginalPrice><Category><![CDATA[Consumables->Compatible Ink Cartridges]]></Category><ProductDescription><![CDATA[$4.05 Cash Price see store for detailsRelated Brand  EpsonOriginal Cartridge Equivalent T009Related Printers STYLUS 1270, STYLUS 1280, STYLUS 1290, STYLUS 3300C, STYLUS PHOTO 1270, STYLUS PHOTO 1290, STYLUS PHOTO 1290 silverThis cartridge works in the following printers  Epson Stylus Photo 1270/1280Please check the name (code) of the cartridge in your printer before ordering to ensure that it matches the name of the cartridges you are ordering from us. In some instances a printer can take more than one cartridge type and ...]]></ProductDescription><Stock>Y</Stock><ShippingCost>10</ShippingCost><StockDescription>No.1 OZ SUPERSTORE AUS WARRANTY FAST SHIPPING</StockDescription><Condition>Brand New</Condition></Product>
<Product><MPN><![CDATA[INK-PE-013]]></MPN><Manufacturer><![CDATA[Epson]]></Manufacturer><ProductName><![CDATA[Epson T013 Black Compatible Inkjet Cartridge]]></ProductName><ProductURL><![CDATA[http://www.topbuy.com.au/tbcart/pc/Epson-T013-Black-Compatible-Inkjet-Cartridge-p3345.htm?utm_source=TopBuy_ShoppingCom&utm_content=&utm_medium=cpc&dismode=1&utm_campaign=TBDF-XX10423]]></ProductURL><ProductType><![CDATA[Compatible Ink Cartridges]]></ProductType><ImageURL><![CDATA[http://www2.topbuy.com.au/tbcart/pc/catalog/General/TBDF-XX10423_1.jpg]]></ImageURL><Price>2.09</Price><OriginalPrice>5</OriginalPrice><Category><![CDATA[Consumables->Compatible Ink Cartridges]]></Category><ProductDescription><![CDATA[$2.07 Cash Price see store for detailsRelated Brand  EpsonOriginal Cartridge Equivalent T013Related Printers STYLUS COLOR 480, STYLUS COLOR 580, STYLUS COLOR C20, STYLUS COLOR C40, STYLUS COLOUR 480, STYLUS COLOUR 580, STYLUS COLOUR C20UX, STYLUS COLOUR C40SX, STYLUS COLOUR C40UXThis cartridge works in the following printers  Epson Stylus Colour 480/580Please check the name (code) of the cartridge in your printer before ordering to ensure that it matches the name of the cartridges you are ordering from us. In some instances a ...]]></ProductDescription><Stock>Y</Stock><ShippingCost>10</ShippingCost><StockDescription>No.1 OZ SUPERSTORE AUS WARRANTY FAST SHIPPING</StockDescription><Condition>Brand New</Condition></Product>
</Products> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:07:35.247

将 XmlReader 类与流一起使用，例如（对 C# 示例表示歉意，但我的 C# 比我的 VB 更好）：

```
 WebRequest webRequest = HttpWebRequest.Create(uri);
        using(Stream stream = (await webRequest.GetResponseAsync()).GetResponseStream())
        using(XmlReader reader = XmlReader.Create(stream, new XmlReaderSettings() { Async = true }))
        {
            // Use the XmlReader to move through the elements of the stream
        } 
```

这将根据需要拉取数据，而无需将其存储在本地。如果你找到了你要找的东西，你只会下载和解析你需要的尽可能多的流。

请注意，此示例使用`await`关键字，因此应该在`async`方法中。

# java - 制作下一个\上一个按钮，JSP

> ID：12250220
> 
> 赞同：1
> 
> 时间：2012-09-03T14:58:33.887
> 
> 标签：java, jsp, split, html-table

我有这个困境，不知道如何解决它。

我有一个 ArrayList 从我的数据库中获取信息并在 html 表上“绘制”它。问题是信息越大，页面越长。如果它有 2000 条记录，那么表格就会变得那么长，并且用户向下滚动会很痛苦。

我想制作一个 NEXT 和 PREVIOUS 按钮，但我不知道该怎么做。我所拥有的，抱歉是葡萄牙语...

```
ArrayList<ArrayRegistos> listaRegistos = (ArrayList<ArrayRegistos>) request.getAttribute("listaRegistos");

if (listaRegistos.size() == 0) {

    out.println("<h2>No records</h2>");
    %><%
} else {%><%
            //out.println("<br/>");

            //out.println("<span id=\"cor_tabela\" style=\"color: black;\">");
            out.println("<table id=\"myTable\" border=3 width=\"1100\"height=\"1\">");
            out.println("<thead>");
            out.println("<tr>");
            out.println("<center><td>Estado</td><td>Data Início</td><td>Hora Início</td><td>Técnico</td><td>Serviço</td><td>Descricao</td><td>Data Fim</td><td>Hora Fim</td></center>");
            //out.println("</span>");
            out.println("</tr>");
            out.println("</thead>");
            out.println("<tbody>");
            for (ArrayRegistos i : listaRegistos) {
                out.println("<input type=\"hidden\" name=\"teste\" value=\""+i.getId()+"\"> ");
            //  out.println("<tr>");
            //  out.println("<td>");
                if(i.getEstado().equals("Pendente")){
                    out.println("<tr class=\"pendente\">");
                    out.println("<td>");
                    out.println(String.format("<center><a href=\"DetalheRegisto?detalhe="+i.getId()+"\"><span id=\"cor\" style=\"color: red ;\">"+i.getEstado()+"</span></a></center>"));
                }else if(i.getEstado().equals("Concluído")){
                    out.println("<tr class=\"concluido\">");
                    out.println("<td>");
                    out.println(String.format("<center><a href=\"DetalheRegisto?detalhe="+i.getId()+"\"><span id=\"cor\" style=\"color: green ;\">"+i.getEstado()+"</span></a></center>"));
                }else if(i.getEstado().equals("Validado")){
                    out.println("<tr class=\"validado\">");
                    out.println("<td>");
                    out.println(String.format("<center><a href=\"DetalheRegisto?detalhe="+i.getId()+"\"><span id=\"cor\" style=\"color: blue ;\">"+i.getEstado()+"</span></a></center>"));
                }
                //out.println(String.format("<center>"+i.getEstado()+"</center>"));
                out.println("</td>");
                out.println("<td>");
                out.println(String.format("<center>"+i.getDataInicio()+"</center>"));
                out.println("</td>");               
                out.println("<td>");
                out.println(String.format("<center>"+i.getHoraInicio()+"</center>"));
                out.println("</td>");
                out.println("<td>");
                out.println(String.format("<center>"+i.getTecnico()+"</center>"));
                out.println("</td>");
                out.println("<td>");
                out.println(String.format("<center>"+i.getServico()+"</center>"));
                out.println("</td>");
                out.println("<td>");    
                String descricao = i.getDescricao();
                if (descricao!=null && descricao.length()> 60){

                    out.println("</span>");
                    descricao=descricao.substring(0,40);
                    out.println("<center><span class=\"dropt\" title=\"\">"+descricao+"...</center>");
                    out.println("<span style=\"color: black ;\">"+i.getDescricao()+"</span>");
                    //out.println(String.format("<center>"+descricao+"...</center>"));
                    //System.out.println(descricao);
                }else if(descricao==null){
                    descricao="Sem descrição";
                    out.println(String.format("<center>"+descricao+"</center>"));
                }else if(descricao.isEmpty()){
                    descricao="Sem descrição";
                    out.println(String.format("<center>"+descricao+"</center>"));

                }else{          
                    out.println(String.format("<center>"+i.getDescricao()+"</center>"));
                }
                //out.println(String.format("<center>"+i.getDescricao()+"</center>"));
                out.println("</td>");
                out.println("<td>");
                out.println(String.format("<center>"+i.getDataFim()+"</center>"));
                out.println("</td>");
                out.println("<td>");
                out.println(String.format("<center>"+i.getHoraFim()+"</center>"));
                out.println("</td>");
                out.println("</tr>");

            out.println("</tbody>");
            out.println("</table>");

        }

%></center> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:00:58.710

我知道有些人认为使用 scriptlet 是一种罪过。但这里有一个演示页面。

```
<%@ page import="java.util.*" %>
<%
   ArrayList<String> list = new ArrayList<String>();
   for(int i = 0; i < 35; i++){
       list.add("item" + i);
   }
   int totalCount = 0;
   int perPage = 10;
   int pageStart = 0; 
   String start = request.getParameter("start");
   if(start != null)pageStart = Integer.parseInt(start);
   if(pageStart < 0)pageStart = 0;
   totalCount = list.size();
   if(pageStart >= totalCount)pageStart = pageStart - perPage;
%>
<a href="<%=request.getRequestURL()%>?start=<%=pageStart - 10 %>">Previous</a>
<%=pageStart + 1 %> - <%=pageStart + 10 %> 
<a href="<%=request.getRequestURL()%>?start=<%=pageStart + 10 %>">Next</a><br/>
<%
   for(int x = pageStart; x < pageStart + perPage && x < list.size(); x++){
       out.print((String)list.get(x) + "<br/>");
   }
%> 
```

如果可以使用 JSTL，那么我们就可以避免使用 scriptlet。

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<c:set var="total" scope="session" value="${fn:length(list)}"/>
<c:set var="perPage" scope="session"  value="10"/>
<c:set var="pageStart" value="${param.start}"/>
<c:if test="${empty pageStart or pageStart < 0}">
    <c:set var="pageStart" value="0"/>
</c:if>
<c:if test="${total <= pageStart}">
    <c:set var="pageStart" value="${pageStart - perPage}"/>
</c:if>
<a href="?start=${pageStart - perPage}">Previous</a>${pageStart +1} - ${pageStart + perPage} 
<a  href="?start=${pageStart + perPage}">Next</a><br/>
<c:forEach var="item" items="${list}" begin="${pageStart}" end="${pageStart + perPage - 1}" >
        ${item}<br/>
</c:forEach> 
```

# c# - 异步 wcf 代理中的问题

> ID：12250224
> 
> 赞同：0
> 
> 时间：2012-09-03T14:58:59.260
> 
> 标签：c#, .net, wcf, wcf-client

我为我的 wcf 应用程序创建了异步代理，第一次调用该方法

`ServiceClient serviceClient = new ServiceClient(); serviceClient.GetDataAsync(5);`

不调用服务。

我需要在 IDE 中第二次使用 SetNextstatement 才能使其正常工作。

请帮助我找到这个问题的根本原因。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:02:36.490

异步调用不保证立即开始调用。它在另一个线程的某处开始调用过程。实际的服务调用会在一段时间后发生（在准备工作完成后），在您的情况下，它发生在步进到下一个语句之间的某个地方。

# android - Android webview加载facebook没有蓝条

> ID：12250229
> 
> 赞同：0
> 
> 时间：2012-09-03T14:59:06.553
> 
> 标签：android, facebook, webview

嗨伙计们....有没有办法在没有蓝色菜单栏的情况下在 webview 中加载 facebook？

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:10:51.063

首先，这似乎是个坏主意。甚至可能违反他们的服务条款。这就是 Facebook api 的用途。

让我们知道您想要实现什么，也许有更好的方法来做您所追求的（例如使用 facebook api？）

**实际答案**

facebook 页面需要您的用户登录。一旦实现，只需在 httpclient 中加载页面或使用臭名昭著的 javascript hack 获取 html（[如何从 webview 获取 html 内容？](https://stackoverflow.com/questions/8200945/how-to-get-html-content-from-a-webview)）。然后解析 html，删除您认为不必要的内容，并使用 loadData 将其加载到 webview 中。

您必须从 WebView 的 WebViewClient 中拦截 shouldoverrideurlloading 以确保捕获每个页面更改并相应地抓取您的 html。

总的来说，这听起来像是一个难以实现的坏主意。

# asp.net-mvc-3 - 在标签 mvc3 下显示错误的数据

> ID：12250233
> 
> 赞同：0
> 
> 时间：2012-09-03T14:59:16.280
> 
> 标签：asp.net-mvc-3

我有一个显示多个选项卡的主页。

我正在尝试为页面中的第一个选项卡添加选项卡，我正在使用 jquery 和 ajax 调用来执行此操作，其中选项卡计数取决于获取的数据。

例如，我的家庭控制器具有详细信息操作，根据获取的数据显示产品、制造商选项卡和产品选项卡下，我正在显示国家/地区选项卡，第一个选项卡工作正常，第二个选项卡从制造选项卡获取数据，没有数据显示在制造商选项卡下。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<EmsAdmin.Models.abc>" %> 
```

abc 详细信息 abc 详细信息 <% Html.RenderPartial("abc", Model); %>

*   产品<% if ((Boolean)ViewData["HasWTB"]) // 他们有Where to by product吗？{ %>*   制造商<% } %>*   报告<% if ((Boolean)ViewData["HasInText"]) { %>*   类别<% } %>*   地区

```
 </ul>
    <div class="panes">
        <!-- Products -->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("Products"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end of products-->
        <% if ((Boolean)ViewData["HasWTB"])
           // Do they have the Where to by product?
           { %>
        <!-- where to buy -->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("Manufacturers"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end of where to buy -->
        <% } %>
        <!-- Request Reports see Reports.ascx-->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("Reports"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end of request reports -->
        <% if ((Boolean)ViewData["HasInText"])
           { %>
        <!-- In Text -->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("InText"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end of in text -->
        <% } %>
        <!-- Ranges or SubBrands -->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("Ranges"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end of ranges of SubBrands -->
        <!-- Ranges or Region -->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("Regions"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end of ranges of Regions -->
        <!-- Categories -->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("Categories"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end of Categories -->
           <!-- REgions -->
        <div class="pane">
            <div style="clear: both;">
                &nbsp;</div>
            <% Html.RenderPartial("REgions"); %>
            <div style="clear: both;">
                &nbsp;</div>
        </div>
        <!-- end ofFilters -->
    </div>
</div>
<script type="text/javascript">
    //<![CDATA[

    // Set the tabs to be tabs
    $(function () {
        // setup ul.tabs to work as tabs for each div directly under div.panes
        $("ul.tabs").tabs("div.panes > div");
    });
    //]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:13:57.073

我可能错了，但这看起来像 MVC 2 代码。

有很多非常简单的选项卡的 jQuery 示例。这个使用带有 MVC3 和 Razor 的 twitter 引导程序。

```
@model Layout.Models.DataModel
<script type="text/javascript">
$(document).ready(function () {
    //  show the first tab
    $('#homeTabs a:first').tab('show');
});    
</script>
<div class="container">
<ul class="nav nav-tabs" id="homeTabs">
    <li><a href="#section11" data-toggle="tab">1.1</a></li>
    <li><a href="#section12" data-toggle="tab">1.2</a></li>
    <li><a href="#section13" data-toggle="tab">1.3</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane active" id="section11">
        @{
            Html.RenderPartial("Details.1.1", Model);
        }
    </div>
    <!-- section11 end-->
    <div class="tab-pane active" id="section12">
    </div>
    <!-- section12 end-->
    <div class="tab-pane active" id="section13">
    </div>
    <!-- section13 end-->
</div>
<!-- tab-content end-->
</div>
<!-- container end--> 
```

希望有帮助

# java - Java - 没有端口转发的 ServerSocket

> ID：12250237
> 
> 赞同：0
> 
> 时间：2012-09-03T14:59:40.190
> 
> 标签：java, port, forward

我正在制作一个 Java 应用程序，它涉及每个用户托管一个小型服务器。这允许其他客户端与彼此的 IP 检查他们在做什么。

但这当然需要端口转发才能工作，人们经常遇到麻烦。

那么，有没有一种方法可以在没有端口转发的情况下工作，同时仍然具有全性能连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:05:19.193

具有直接连接或用户打开连接的有效端口转发配置的中央服务器怎么样，该连接是用户作为一种隧道。

# symfony - 引用 TWIG 文件的正确语法是什么

> ID：12250244
> 
> 赞同：0
> 
> 时间：2012-09-03T14:59:52.373
> 
> 标签：symfony, twig

我需要参考 symfony 2 项目中的 TWIG 文件。

Twig 文件可以从控制器或视图中引用。

使用的语法是：

```
SomeBundle:SomeController:SomeTemplate.html.twig 
```

*例如：AcmeDemoBundle:Hello:index.html.twig*

其他允许的语法是：

```
SomeBundle:SomeController/SomeFolder:SomeTemplate.html.twig 
```

*例如：AcmeDemoBundle:Hello/Crud:index.html.twig*

推荐的语法是什么？还有其他语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T18:42:32.263

这取决于您是否使用子命名空间来对控制器进行分组。例如，您可以在应用程序中包含公共和管理部分。那么你的结构可能如下所示：

*   `AppBundle`
    *   `Controller`
        *   `Admin`
            *   `UserController`
        *   `UserController`

在这种情况下，您可以将公共控制器的视图称为：

```
AppBundle:User:list.html.twig 
```

并将管理控制器的视图视为：

```
AppBundle:Admin/User:list.html.twig 
```

因此，这不是关于首选哪种语法，而是哪种语法可以解决您的问题。

# iphone - iOS - XCode 4.3“变量”需要一种方法吗？

> ID：12250245
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:59:53.690
> 
> 标签：iphone, ios, xcode

我只是想知道在 iOS 上创建应用程序。

我找到了这个：

[http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/RM_YourFirstApp_iOS/Articles/01_CreatingProject.html#//apple_ref/doc/uid/TP40011343-TP40012323-CH3-SW3](http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/RM_YourFirstApp_iOS/Articles/01_CreatingProject.html#//apple_ref/doc/uid/TP40011343-TP40012323-CH3-SW3)

Apple 的入门小教程。

你看，在最后完成整个教程之后，我尝试编译我的项目，当项目即将显示时出现了这个错误：

```
2012-09-03 10:05:46.201 HelloWorld[29361:f803] *** Terminating app due to uncaught    exception 'NSUnknownKeyException', reason: '[<HelloWorldViewController 0x6837c10>      setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key label.'
*** First throw call stack:
(0x13c7022 0x1558cd6 0x13c6ee1 0x9bf022 0x930f6b 0x930edb 0x94bd50 0x23371a 0x13c8dea         0x13327f1 0x23226e 0xd81fc 0xd8779 0xd899b 0x37401 0x37670 0x37836 0x3e72a 0xf596 0x10274     0x1f183 0x1fc38 0x13634 0x12b1ef5 0x139b195 0x12ffff2 0x12fe8da 0x12fdd84 0x12fdc9b 0xfc65     0x11626 0x1c3d 0x1ba5)
terminate called throwing an exception 
```

我的猜测是我做错了连接，但是什么？

我什至复制粘贴了他们给你的最后一个 .m 和 .h ，但它仍然无法编译。

属性“变量”需要定义方法“setLabel” - 使用@synthetize

variable 和 setLabel 更改了 6 次（不同的警告）。

我究竟做错了什么？

--------编辑这是我的viewcontroller.h

```
#import "HelloWorldViewController.h"

@interface HelloWorldViewController ()

@property (weak, nonatomic) IBOutlet UITextField *textField;
@property (weak, nonatomic) IBOutlet UILabel 
*label;

- (IBAction)changeGreeting:(id)sender;

@end

@implementation HelloWorldViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[self setTextField:nil];
[self setLabel:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)changeGreeting:(id)sender {

self.userName = self.textField.text;

NSString *nameString = self.userName;
if ([nameString length] == 0) {
    nameString = @"World";
}
NSString *greeting = [[NSString alloc] initWithFormat:@"Hello, %@!", nameString];
self.label.text = greeting;
}
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {

if (theTextField == self.textField) {
    [theTextField resignFirstResponder];
}
return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:07:22.327

您正在使用您没有的 XCode 版本的示例。

更高版本的 XCode 会自动为您合成属性，旧版本不会，它们只会抛出错误。

您需要添加该行

```
@syntheisze label = _label; 
```

就在看起来像的行之后`@implementation HelloWorldViewController`。

虽然我想一个更好的解决方案只是升级 XCode :)

# javascript - 什么基于 jquery 的表格插件可以隐藏子行？

> ID：12250251
> 
> 赞同：1
> 
> 时间：2012-09-03T15:00:04.547
> 
> 标签：javascript, jquery, jquery-plugins, jquery-mobile

我需要将excel宏转换为jquery代码，功能是如果要在column2中键入值，您需要单击加号展开并显示子行以修改column2，其他列可以' t被修改。在展开父行之前，您不能直接修改 column2 的值，因为有许多子行属于父行，比如 Car。Name、Model、Code的值是存在的，都是主数据，不需要输入或修改。

请看快照：

![在此处输入图像描述](../Images/4b9b350c80a1ab0e0870a00b38ecc092.png)

![在此处输入图像描述](../Images/ee17006efd4c8e5b0e092f872a6a0e3a.png)

除了修改子行中的值之外，我还需要能够知道哪些子行被修改以及这些行的值。最初可编辑的列是空白的。并且当你点击减号时，子行可以再次折叠，但修改后的值不会丢失，再次展开时它们仍然存在。最后一个要求是它是跨设备的，代码必须在 pc、手机、pad 上运行良好。那可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:12:37.260

你不需要插件来做到这一点，这通常使用几行简单的代码来完成。

演示：http: [//jsfiddle.net/FHWaw/2/](http://jsfiddle.net/FHWaw/2/)

在这个演示中，我在行和单元格上指定了一个标识“部分”（可以打开或关闭的东西）的属性：

```
<table>
<tr><td section-opener=mysection1 section-state=open> SOME HEADER </td></tr>
<tr section-content=mysection1><td>some text</td><td>some other text</td></tr>
<tr section-content=mysection1><td>some AAA</td><td>some zaaother text</td></tr>
<tr section-content=mysection1><td>some text</td><td>some other text</td></tr>
<tr><td section-opener=anothersection section-state=close> Hu ? </td></tr>
<tr section-content=anothersection><td>some text</td><td>some other text</td></tr>
<tr section-content=anothersection><td>some text</td><td>some other text</td></tr>
</table>
​ 
```

（在此示例中，第一部分首先打开，而第二部分打开）

然后我有这个，在点击时，它决定更改行的类，以便让它们可见或不可见：

```
$('body').on('click', 'td[section-opener]', function() {
    changeState($(this).attr('section-opener'));
});

changeState = function(sectionId, newstate) {
    var $opener = $('td[section-opener="'+sectionId+'"]');
    var oldstate = $opener.attr('section-state');
    if (oldstate==newstate) return newstate;
    newstate = oldstate=='open' ? 'close' : 'open'; // sanitization
    $opener.attr('section-state', newstate);
    $('tr[section-content="'+sectionId+'"]').attr('section-state', newstate);
    return newstate;
};​ 
```

我有一个 CSS，主要是让封闭部分被隐藏（并且开启者可以清楚地识别）：

```
td[section-opener] {
    font-weight: bold;
    cursor: pointer;
}
td[section-opener][section-state="close"]:before {
    color: #ccc;
    content: " \25B6  ";
}
td[section-opener][section-state="close"]:hover:before{
    color: #aaa;
    content: " \25B6  ";
}
td[section-opener][section-state="open"]:before {
    content: "\25BC  ";
}
tr[section-content][section-state="close"] {
    display: none;
}
tr[section-content][section-state="open"] {
    display: table-row;
} 
```

​由于不会删除任何内容，因此关闭再打开时您编辑的输入不会丢失。

# java - 如何在不下载的情况下获取文件属性

> ID：12250258
> 
> 赞同：2
> 
> 时间：2012-09-03T15:00:46.287
> 
> 标签：java, file, url, properties, httpurlconnection

如果我有文件的 URL，如何在不下载文件的情况下获取文件属性（例如日期）。

我必须实施更新检查器。为此，我将比较两个文件的日期。一个是本地的，第二个是相同的文件，但服务器上的最新日期。我知道第二个文件的 URL。

请给我一个平静的建议 - 如何在不下载的情况下检查第二个文件的日期？

我考虑过通过哈希进行比较，但我需要检查服务器上的文件是否是最新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:07:34.707

检查远程文件的属性并不容易。此行为**未**在 URL 规范中指定。

所以这应该得到目标协议的支持。请注意，并非所有协议都支持这一点。假设 HTTP 不支持这一点，而 FTP 和 CIFS 支持。

一旦你确定你的目标协议确实支持这个特性，你需要传递协议的规范来做到这一点。因此，如果您使用的是 FTP，请寻找这样的库，`ftp4j`这样您就不必自己实现 FTP 客户端。

**更新**

开箱即用的 HTTPS 不支持此功能。您需要配置删除 Web 服务器以公开所需的版本控制数据。假设您可以将（或编写脚本来执行此操作）所有版本控制信息放在单独的文本文件中。然后，您可以获取此文件并检查您需要的版本。

最良好的祝愿！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:54:14.727

要检查文件日期，您可以使用此代码片段

```
try {
  URL url = new URL(inputFile);
  URLConnection urlConnection = url.openConnection();
  System.out.println("Date= "+new Date(urlConnection.getLastModified()));
  System.out.println("Size= "+urlConnection.getContentLength());

} catch (MalformedURLException e1) {
  e1.printStackTrace();  //Todo change body of catch statement.
} catch (IOException e1) {
  e1.printStackTrace();  //Todo change body of catch statement.
} 
```

使用日期、大小、名称等属性可以识别资源。

# ruby-on-rails - 无法让 rb-fsevent gem 在 OSX 上工作

> ID：12250261
> 
> 赞同：2
> 
> 时间：2012-09-03T15:00:57.907
> 
> 标签：ruby-on-rails, rspec, guard, listen, fsevents

我正在使用 Guard 运行 Test::Unit 并试图切换到 RSpec。

我正在运行 Mac OSX，但似乎无法让 rb-fsevent 工作。当我启动 Guard 时，我收到一条消息“[Listen warning]：Listen 将轮询更改。在[https://github.com/guard/listen#polling-fallback](https://github.com/guard/listen#polling-fallback)了解更多信息。”

我尝试了各种方法：

*   “gem install rb-fsevent”（根据[railscast 275](http://railscasts.com/episodes/275-how-i-test?view=asciicast)）
*   将 rb-fsevent 添加到我的 Gemfile（见下文）
*   指定 rb-fsevent 版本（例如 0.9.1）
*   重新启动 Guard、Rails 和整个系统

Gemfile（在[Michael Hartl 的 Ruby on Rails 教程](http://ruby.railstutorial.org/)中推荐）：

```
 group :development, :test do
      gem "rspec-rails"
      gem "guard-rspec"
    end

    group :test do
      gem 'rb-fsevent'
    end 
```

**编辑：**

我还尝试将 rb-fsevent 包含到开发组中（在[Railscast 264](http://railscasts.com/episodes/264-guard)中推荐）：

```
 group :development, :test do
      gem "rspec-rails"
      gem "guard-rspec"
      gem 'rb-fsevent'
    end 
```

但是我得到了同样的错误。一个线索可能是，如果我在没有 bundle exec 的情况下运行 guard，那么我会得到“Guard here！看起来你的项目有一个 Gemfile，但你在`guard`Bundler 之外运行。” bundle exec 在教程中似乎不是必需的。

关于可能出了什么问题的任何想法，或者我如何获得有关该问题的更多信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T07:59:54.330

从 Listen 0.5.0 开始，我遇到了同样的问题，并且已经报告了一个[问题。](https://github.com/guard/listen/issues/60)在解决之前，您可以通过添加以下内容来简单地使用之前版本的 Listen：

`gem 'listen', '0.4.7'`

到你`Gemfile`并运行`bundle update`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:55:09.787

`gem 'rb-fsevent'`在`group :development, :test`块内移动

（因为警卫正在开发环境中运行）

# jquery - 如何使 jquery 脚本重新启动？

> ID：12250269
> 
> 赞同：2
> 
> 时间：2012-09-03T15:01:19.017
> 
> 标签：jquery, slideshow, restart

我制作了一个 jQuery 脚本，它可以制作两个 div 元素的幻灯片。这是代码

```
$(document).ready(function(){
    $("div#slide2").hide();
    $("div#slide1").show().delay(5000).fadeOut(1500,function(){
    $("div#slide2").fadeIn(1500).show().delay(5000).fadeOut(1500)
    });
}); 
```

现在我的问题。如何让这个脚本在每次完成时重新启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:05:29.280

创建一个函数`foo`，并将其设置为最后一个动画的回调。

```
$(document).ready(function(){
    $("div#slide2").hide();
    (function foo() {
        $("div#slide1").show().delay(5000).fadeOut(1500,function(){
            $("div#slide2").fadeIn(1500).show().delay(5000).fadeOut(1500, foo);
        });
    }());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:07:21.100

您可以创建一个无限递归函数，该函数在动画完成时调用自身。

```
function animation() {
    $("div#slide2").hide();
    $("div#slide1").show().delay(5000).fadeOut(1500,function(){
        $("div#slide2").fadeIn(1500).show().delay(5000).fadeOut(1500, function() {
            animation();
        });
    });
} 
```

然后在 document.ready 中调用它：

```
$(document).ready(function() { animation(); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:13:30.583

尝试这个：

```
var repeat = function(time) {

   var 
       refForStop = true,
       fnrepeat = function() {
          $("div#slide2").hide();
          $("div#slide1").show().delay(5000).fadeOut(1500,function(){
             $("div#slide2").fadeIn(1500).show().delay(5000).fadeOut(1500)
          });

          if (refForStop) {
             setTimeout(fnrepeat, time || 1000);
          }
       };

   fnrepeat();
   return function() { refForStop = false; };
};

$(document).ready(function(){

    var fnStop = repeat();
    //run function for stop: fnStop();

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:08:02.920

您可以使用[**setTimeout**](http://www.w3schools.com/jsref/met_win_settimeout.asp)：

```
function foo()
{
    $("div#slide2").hide();
    $("div#slide1").show().delay(5000).fadeOut(1500,function()
    {
        $("div#slide2").fadeIn(1500).show().delay(5000).fadeOut(1500);
    });

    setTimeout(foo, 0);
}

$(document).ready(function()
{
    foo();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T15:08:30.983

You should put your code into the function, then call this function after it's completed.

```
$(document).ready(function(){

    slideshow();

    function slideshow(){
        $("div#slide2").hide();
        $("div#slide1").show().delay(5000).fadeOut(1500,function(){
            $("div#slide2").fadeIn(1500).show().delay(5000).fadeOut(1500,function(){
                slideshow();
            });
        });
    }
}); 
```

here is the demo [on the jsfiddle](http://jsfiddle.net/8FsH2/)

# java - 页面标题中没有重定向 URL。如何遵循重定向。HttpClient 4

> ID：12250274
> 
> 赞同：-1
> 
> 时间：2012-09-03T15:01:32.393
> 
> 标签：java, redirect, header, httpclient

我正在尝试测试以下页面是否[http://support.xbox.com/en-US/xbox-360/console-freeze/screen-freeze-wizard](http://support.xbox.com/en-US/xbox-360/console-freeze/screen-freeze-wizard)。该页面重定向到[http://support.xbox.com/en-US/xbox-360/console-freeze/screen-freeze-solution](http://support.xbox.com/en-US/xbox-360/console-freeze/screen-freeze-solution)但是标题中没有显示。

我的应用程序检查页面 URL 状态'，遵循此重定向并检查它是否以 404 或 200 结尾的最佳/最快方式是什么。

编辑：当我使用 fiddler2 检查页面标题时，我得到以下信息：

```
HTTP/1.1 301 Moved Permanently
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html
Expires: -1
Location: /en-US/xbox-360/console-freeze/screen-freeze-solution
X-UA-Compatible: IE=edge
X-Content-Type-Options: nosniff
Content-Length: 0
Vary: Accept-Encoding
Date: Mon, 03 Sep 2012 15:14:16 GMT
Connection: keep-alive 
```

这给出了重定向。我的代码如下

```
public void status() {

    HttpClient hc = new DefaultHttpClient();
    HttpHead hh = new HttpHead("http://support.xbox.com/en-US/xbox-360/console-freeze/screen-freeze-wizard");
    System.out.println("Requesting : " + hh.getURI());

    try {
        HttpResponse response = hc.execute(hh);
        System.out.println("Protocol : " + response.getProtocolVersion());
        System.out.println("Status code : " + response.getStatusLine().getStatusCode());

        Header [] headers = response.getAllHeaders();
        for (Header header : headers) {
          System.out.println(" --> " + header.getName() + ":" + header.getValue());
        }

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

但它只给出以下响应：

```
Requesting : http://support.xbox.com/en-US/xbox-360/console-freeze/screen-freeze-wizard
Protocol : HTTP/1.1
Status code : 404
 --> Cache-Control:private
 --> Content-Length:0
 --> X-Content-Type-Options:nosniff
 --> Date:Mon, 03 Sep 2012 15:23:59 GMT
 --> Connection:keep-alive
...complete. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:46:16.940

当您的请求与您的浏览器发出的请求相同时，您可以保证会得到相同的响应。我会尝试检查您的浏览器发送的其他标头，看看您是否可以让您的 java 应用程序发送相同的标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:04:12.723

似乎 fiddler2 使用了 HttpGet 请求并且只是读取了标题。因此，通过在我的代码中更改它，我能够得到我正在寻找的正确响应。

# lucene - 使用 Lucene ShingleFilter 提取 Lucene 中二元组的频率

> ID：12250275
> 
> 赞同：0
> 
> 时间：2012-09-03T15:01:45.997
> 
> 标签：lucene, filtering, n-gram

如果 Lucene ShingleFilter 可用于将字符串标记为不同大小的 shingles 或 ngram，例如：

```
"please divide this sentence into shingles" 
```

变成：

```
shingles "please divide", "divide this", "this sentence", "sentence into", and "into shingles" 
```

有谁知道这是否可以与其他分析器结合使用以返回找到的二元组或三元组的频率，例如：

```
"please divide this please divide sentence into shingles" 
```

会为“请除”返回 2 吗？

我应该补充一点，我的字符串是从数据库构建的，然后由内存中的 Lucene 索引并且不会持久化。不打算使用 Solr 等其他产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:48:21.930

我最终将我的 snowballAnalyzer 和 standardAnalyzers 作为参数传递给 ShingleFilterWrappers 并通过 TermVectorMapper 处理输出。

# r - 如何在 biomart 中使用 Ensembl 的存档版本

> ID：12250281
> 
> 赞同：0
> 
> 时间：2012-09-03T15:02:28.437
> 
> 标签：r, bioconductor

我正在使用`biomaRt`R 中的包来检索基因的染色体位置。我想使用 ensemble 的存档版本来做到这一点。

根据`biomaRt`手册，应该

(1) 索取可用的 Ensembl 档案

```
 listMarts(archive = TRUE) 
```

(2) 加载所需的版本（本例为 Ensembl 51 小鼠基因）

```
useMart("ensembl_mart_51", dataset="mmusculus_gene_ensembl", archive=T) 
```

当我运行最后一个命令时，出现以下错误：

```
"Error in read.table(con, sep = "\t", header = FALSE, quote = "", comment.char = "",  : 
  no lines available in input" 
```

出了什么问题？我怎样才能解决这个问题？

# html - 两个浮动 div，一个在下面。适用于除 IE 以外的所有浏览器

> ID：12250284
> 
> 赞同：0
> 
> 时间：2012-09-03T15:02:41.643
> 
> 标签：html, css, internet-explorer, internet-explorer-9

所以我有一个看起来像这样的html结构：

```
<div id="contact-wrapper">
    <div>
        <h4>België</h4>

        <p>Tuinwijklaan 79<br />
        9000 Gent<br />
        Tel. 0468/115967<br />
         info@echomedic.be<br />
         </p>
    </div>
    <div>
        <h4>Nederland</h4>

        <p>Kerkstraat 423-C<br />
        1017 HX Amsterdam<br />
        Tel: +32 468 11 59 67<br />
         info@echomedic.nl </p>
    </div><br />
    <a id="link-contact" href="#">Contacteer ons</a>
</div> 
```

两个 div 并排显示，其下方的链接如下所示：

![应该是这样的div](../Images/9d874d9dab6bac9f912040a5d7ed3261.png)

但在 ie9 中显示如下：

![ie9 div](../Images/fb34ec327475e9ddd05c678bf0e5a487.png)

这是我的 div 的 CSS：

```
footer div#contact-wrapper, footer h1 {
    float: left;
}

footer div#contact-wrapper div {
    margin: 16px 0px 0px 45px;
    float: left;
}

footer div#contact-wrapper div:first-of-type {
    padding-right: 30px;
    margin-left: 60px;
    border-right: 1px dashed #a3b0b9;
}

footer div#contact-wrapper a#link-contact {
    display: inline-block;
    background: #ffffff url('../img/contact-arrow.gif') no-repeat 95% center;
    border: 4px solid #bbc2c7;
    font-size: 12px;
    color: #bbc2c7;
    margin: 5px 0px 0px 60px;
    padding: 3px 0px 3px 5px;
    width: 150px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T15:07:23.933

删除`<br>`并将其添加到您的 CSS 中：

```
footer div#contact-wrapper a#link-contact {
    clear: left;
    display: block;
} 
```

# linux - SystemOut.log 文件字符串搜索、计数并在计数达到 10 时通过电子邮件发出警报

> ID：12250285
> 
> 赞同：0
> 
> 时间：2012-09-03T15:02:46.980
> 
> 标签：linux, unix, solaris, tail

我想使用 tail -f 监控 SystemOut.log 文件，所以我尝试并坚持使用 tail -f ，这不允许我同时执行其他操作。我可能错过了一些事情，你们可以帮助我。我搜索但无法得到答案。

问题：每 5 分钟，我将触发以下脚本以使用带有 grep 的 tail -f 计算“字符串”出现次数并将其写入名为 msg.txt 的文件（它的 solaris 所以 -q 在 grep 中不起作用，欢迎在这里提出任何建议)

同时，计算字符串出现次数并检查计数是否达到 10，然后触发带有 msg.txt 文件的电子邮件。最后，停止while，一旦达到计数值10，我不希望它继续。这个程序将每5分钟触发一次，我只想确保它在计数达到10时终止。我将如何停止这个脚本如果计数在 5 分钟内没有达到 10，因为它会再次被触发？

```
while true ; do

  tail -f SystemOut.log | grep "string" > msg.txt # SystemOut.log for currently running process 

  Count = Count + 1 

  if test $Count == 10

    mail -s "Email Subject" abc@abc.com < msg.txt 

    break

  fi  

done 
```

以不同的方式重写相同的内容，但是 grep -c 对文件的喊叫无法打开我不知道是什么导致了问题。非常感谢任何帮助。

虽然是真的；

做

COUNT_1= grep -c "搜索字符串" LOG_FILE

sleep 300
COUNT_2= grep -c "搜索字符串" LOG_FILE COUNT= [[ $COUNT_2-$COUNT_1]]

如果 [[ $COUNT > 10 ]]
则回显 $COUNT fi

完毕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:25:31.123

如果我正确理解你的问题，这样的事情可能会起作用：

```
grep 'string' SystemOut.log > msg.txt

count=`wc -l msg.txt`

if [[ $count == "10" ]]; 
  mail -s "Email Subject" abc@abc.com < msg.txt   
fi 
```

# vb.net - 让标签显示文本框的相反长度？

> ID：12250287
> 
> 赞同：0
> 
> 时间：2012-09-03T15:02:57.437
> 
> 标签：vb.net

在 Visual Basic 中，我做了一个标签来显示文本框的长度，现在如何让它显示你在文本框中还剩下多少个字符？我的意思是在 Twitter 上，你如何限制这么多字符。我也想要它，这样当它达到 10 或更低时，标签变成红色，然后超过 10，标签变成黑色。如果问题不应该出现在这个论坛中，请原谅我，我只是不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:05:05.150

在 Windows 窗体中，您可以编写

```
 label1.Text = (textBox1.MaxLength - textBox1.Text.Length).ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:30:09.287

The above answer has an error because it is trying to convert a decimal to a string, so you need to wrap that in brackets and call .ToString() as for your colours idea I used percentages. If you have used more than 50% and less than 75% of your character allowance, then make the text orange. If you have used more than 75% then make it red.

```
 lblRemaining.Text = string.Format("{0} characters remaining", (textBox1.MaxLength - textBox1.TextLength).ToString());
  decimal percentageUsed = ((decimal)textBox1.Text.Length / (decimal)textBox1.MaxLength) * 100;
  if (percentageUsed >= 50 && percentageUsed < 75)
    lblRemaining.ForeColor = Color.Orange;
  else if (percentageUsed >= 75)
    lblRemaining.ForeColor = Color.Red;
  else
    lblRemaining.ForeColor = Color.Green; 
```

# html - 正则表达式空格减少 + 文本区域排除

> ID：12250289
> 
> 赞同：0
> 
> 时间：2012-09-03T15:03:05.253
> 
> 标签：html, regex, textarea

我正在使用`/\s+/`将所有空白字符减少到一个（在每个组中）。这目前用于缩小 HTML，但是 textareas 需要额外的换行符，否则会被过滤。如何修改此正则表达式以忽略`<textarea></textarea>`标签内的换行符？

此外，一个 textarea 可能具有诸如`id`or之类的属性`class`。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T18:22:33.690

`/(?:\s+(?![^<]*<\/textarea>)|[^\S\n\r]+)/`使用带有不区分大小写修饰符的正则表达式模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:02:34.493

好的，这是 PHP 中的通用解决方案，希望用您用于此任务的任何语言重写它会很容易。

```
$raw = '
  My   line   is   here <textarea>And 
there</textarea> there   and everywhere';

$chunks = preg_split('#(<textarea>.+?</textarea>)#si', 
  $raw, null, 
  PREG_SPLIT_DELIM_CAPTURE|PREG_SPLIT_NO_EMPTY); // -- 1

$chunks_length = count($chunks);
for ($index = 0; 
     $index < $chunks_length; 
     $index += 2) { // -- 2
  $chunks[$index] = preg_replace('#(\s)+#', '$1', $chunks[$index]); // -- 3
}

var_dump(implode('', $chunks));
// My line is here <textarea>And 
// there</textarea> there and everywhere 
```

这就是这里发生的事情：`--1`我们将您的文本拆分为片段数组。这个数组中具有奇数索引 [1, 3, ...] 的元素实际上是 'textarea' 块，因为我们设置`preg_split`为在 'delimiter-capturing' 模式下工作。关键是我们不会处理它们（在`for`循环中遍历它们），并且只会压缩`--3`“内容”元素的空白（ ）。

尽管如此，这种方法仍然非常脆弱，正如 Rob W 正确提到的那样：并非 HTML 中的所有空白都可以轻松压缩。

出于某种原因使用正则表达式中的PS`s`修饰符；否则`.+?`模式将无法捕获结束`\n`符号（阻止正确捕获多行块）。

# python - 使用Construct模块解析python中的连续比特流

> ID：12250299
> 
> 赞同：0
> 
> 时间：2012-09-03T15:03:57.007
> 
> 标签：python, binary, construct

我正在尝试使用 Construct 模块在 python 中解析二进制数据包，并成功解析了标头部分（如数据长度），但根据数据包规范，数据包内的部分数据使用连续比特流进行编码，最后一个字节填充到对齐字节边界。我应该如何在 Struct 构造函数中描述它？我尝试了 Field 和 Bytes 但没有成功。

# java - android图像视图内存不足错误

> ID：12250300
> 
> 赞同：1
> 
> 时间：2012-09-03T15:04:02.747
> 
> 标签：java, android, image, imageview

在我的 Android 项目中我有 imageButton ，点击它后，它必须用 imageView 打开新的 Activity ，在我的新 Activity 中我必须看到 ImageButton 的图像只有大字体，我的图像大小是 17mb ，我内存不足错误。但我的代码适用于尺寸较小的图像。有人可以帮助调整图像大小或更改一些位图选项或以其他方式提供建议吗？我是 android 新手，抱歉英语不好 :)

这是我的新活动的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:id="@+id/LL11"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content">
<TextView
 android:id="@+id/textView1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="Here must be an image">
</TextView>

<ImageView
    android:id="@+id/imageView1"
    android:maxWidth="10px"
    android:maxHeight="10px"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_action_search" />

</LinearLayout> 
```

和java代码

```
package com.example.example;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.ImageView;

package com.example.example;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.ImageView;

public class ActivityTwo extends Activity {

    @Override
      protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.custom_dialog);
        Bundle extras = getIntent().getExtras();
        String path = extras.getString("path");
        if(null != path) 
        {
            Uri myUri = Uri.parse(path);
            super.onCreate(savedInstanceState);
            ImageView img1 = (ImageView) findViewById(R.id.imageView1);
           img1.setImageURI(myUri);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T19:59:12.373

在你的代码中开始`if(null != path)`改变这个

```
int size = 10; //minimize  as much as you want
if(path != null){
     Bitmap bitmapOriginal = BitmapFactory.decodeFile(pathath);
     Bitmap bitmapsimplesize = Bitmap.createScaledBitmap(bitmapOriginal,bitmapOriginal.getWidth() / size, bitmapOriginal.getHeight() / size, true);
     bitmapOriginal.recycle();
     img1.setImageBitmap(bitmapsimplesize);

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T17:49:15.373

我遇到了一些问题`Images`和`OutOfMemory`异常，所有这些显然都是由于我使用了太多为应用程序分配的内存（称为堆）而引起的。

就像我在您的代码中看到的那样，您每次按下按钮时都会创建一个图像，并且就像您说的那样，如果图像具有`17M`大小，可能如果您的设备质量低，则`20M`每个应用程序都有最大堆，所以您内存不足，有两张图片。

也许您只能创建一次图像，如果您必须创建多个图像，请尝试删除以前的图像，然后尝试调用`System.gc()`，这可能会有所帮助。

如果确实需要创建多个图像，不止一次，您可以构建一个缩小的图像实例，`inSampleSize`在创建图像之前设置选项。如果你`2`给这个属性赋值，你会得到一个`1/2`原始的图像，质量和大小都降低了。

像这样的东西：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 2; // Or other value that you estimate 
```

然后使用这些选项创建图像。

**PS：**不必`super.onCreate()`多次调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T15:13:48.750

下面的代码可以帮助您调整图像大小

```
File dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
                File output = new File(dir, "image.png");

    path = output.getAbsolutePath();
    Bitmap b =  BitmapFactory.decodeFile(cPath);
    Bitmap out = Bitmap.createScaledBitmap(b, 320, 480, false);
    FileOutputStream fout;
    try{
        fout = new FileOutputStream(output);
        out.compress(Bitmap.CompressFormat.PNG, 100, fout);
        fout.flush();
        fout.close();
        b.recycle();
        out.recycle();
    }catch(Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-01T01:18:53.713

我意识到这是一个旧线程，但是由于我今天自己遇到了这个错误，发现我收到了同样的错误，但是出于不同的原因，我想对此事发表不同的看法。

就我而言，这是尺寸太大的问题，而不是尺寸（200K）。调整为更小的尺寸（640 像素 x 480 像素）后，问题得到解决。

希望这可以帮助将来遇到这篇文章的其他人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-03T18:23:48.983

上述解决方案不适用于我的情况，所以我发现它对我有用 试试这个。

```
private Bitmap decodeUri(Uri selectedImage) throws FileNotFoundException {
    BitmapFactory.Options op = new BitmapFactory.Options();
    op.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(
            getActivity().getContentResolver().openInputStream(selectedImage), null, op);

    final int REQUIRED_SIZE = 1000;

    int width_tmp = op.outWidth, height_tmp = op.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE) {
            break;
        }
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;
    }

    BitmapFactory.Options op2 = new BitmapFactory.Options();
    op2.inSampleSize = scale;
    return BitmapFactory.decodeStream(
            getActivity().getContentResolver().openInputStream(selectedImage), null, op2);
} 
```

然后设置返回`Bitmap`到你`imageView`喜欢的下面

```
yourImageView.setImageBitmap(returnedBitmap); 
```

# google-app-engine - 通过独特的电子邮件在 appengine 中创建自己的帐户系统

> ID：12250310
> 
> 赞同：0
> 
> 时间：2012-09-03T15:04:37.667
> 
> 标签：google-app-engine, google-cloud-datastore

我想创建自己的帐户系统，并且我知道数据存储上没有唯一的字段。我做了一些关于唯一约束的搜索，我找到了两种方法

首先：电子邮件地址作为键，所以我们可以快速检查它是否存在，但这不是现实世界的例子。

第二：使用事务，但数据存储写入缓慢，所以我不想锁定所有记录

哪些大型应用程序使用自定义会计，数据存储是否适合会计？developer.google.com 上是否有任何关于安全自定义会计的文档？

感谢您的回答...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:42:11.260

您可以在 GAE 上实现自己的唯一约束（这是 webapp2 auth 模块所做的）：

*   [http://squeeville.com/2009/01/30/add-a-unique-constraint-to-google-app-engine/](http://squeeville.com/2009/01/30/add-a-unique-constraint-to-google-app-engine/)
*   [http://webapp-improved.appspot.com/api/webapp2_extras/appengine/auth/models.html#webapp2_extras.appengine.auth.models.Unique](http://webapp-improved.appspot.com/api/webapp2_extras/appengine/auth/models.html#webapp2_extras.appengine.auth.models.Unique)

我建议不要使用电子邮件地址作为实体的 ID，因为在创建实体后您无法更改实体的 ID。如果您需要让用户更改他们的电子邮件地址，您将必须为他们创建一个新的用户实体，然后更新对该实体的所有引用（引用其他实体中的属性）并重新创建任何子实体（用户实体是父级）。

使用属性查询检查唯一性的问题之一是您不能在事务中进行非祖先查询，因此据我所知，您无法查询属性值的唯一性并保存一个新实体在同一笔交易中的独特价值。这意味着您的查询有可能会说属性值是唯一的，但是当您的实体被写入时，该值不再是唯一的。我在上面链接的唯一约束代码没有这个限制，因为您可以测试一个 id 在写入新实体的同一事务中是否是唯一的。

注意：我上面所说的“id”在 db 库中称为 key_name，在 ndb 库中称为 id。

# javascript - javascript更改图像和href

> ID：12250315
> 
> 赞同：2
> 
> 时间：2012-09-03T15:04:51.480
> 
> 标签：javascript, function, href

我有一些代码可以根据鼠标悬停在哪个文本上正确更改图像。该页面在这里：[http ://www.acethelogicgames.com/javatest.html](http://www.acethelogicgames.com/javatest.html)

如果您将鼠标悬停在 Facebook 上，图像会变成 Facebook 徽标，如果您将鼠标悬停在 Twitter 上，图像会变成 Twitter 徽标。那部分工作正常。

我的问题是，当出现 Facebook 徽标时，如何使图像包含指向 facebook.com 的链接，并在出现 Twitter 徽标时使图像包含指向 twitter.com 的链接？

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:13:40.067

```
function change(menuId, image, newImage, newUrl)
{
    var img = document.getElementById(image);
    img.src = newImage;
    document.getElementById('d3').href = newUrl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:08:41.803

我看到，无论图标是什么，它都在打开 Facebook。

看来您只更新 javascript 中的图像源。您应该同时更新图像源和图像参考。

# python - Python，pinax，django，windows AttributeError：“模块”对象没有属性“call_subprocess”

> ID：12250317
> 
> 赞同：2
> 
> 时间：2012-09-03T15:04:58.303
> 
> 标签：python, django, windows, virtualenv, pinax

我在 Windows 上安装了 pinax

尝试创建项目后，出现此错误：

```
(mysite) C:\virtualenvs\mysite>pinax-admin setup_project mypinax
Created project mypinax
Installing project requirements...
Traceback (most recent call last):
  File "c:\virtualenvs\mysite\Scripts\pinax-admin-script.py", line 8, in <module>
    load_entry_point('Pinax==0.9a2', 'console_scripts', 'pinax-admin')()
  File "c:\virtualenvs\mysite\lib\site-packages\pinax\core\management\__init__.py",
 line 105, in execute_from_command_line
    runner.execute()
  File "c:\virtualenvs\mysite\lib\site-packages\pinax\core\management\__init__.py",
 line 94, in execute
    self.loader.load(command).run_from_argv(argv)
  File "c:\virtualenvs\mysite\lib\site-packages\pinax\core\management\base.py", lin
e 45, in run_from_argv
    self.handle(*args, **options.__dict__)
  File "c:\virtualenvs\mysite\lib\site-packages\pinax\core\management\commands\setup_project.py", line 66, in handle
self.setup_project(args[0], options["base"], options)
  File "c:\virtualenvs\mysite\lib\site-packages\pinax\core\management\commands\setup_project.py", line 134, in setup_project
    installer.install_reqs(not options["allow_no_virtualenv"])
  File "c:\virtualenvs\mysite\lib\site-packages\pinax\core\management\commands\setup_project.py", line 207, in install_reqs
    pip.call_subprocess([
AttributeError: 'module' object has no attribute 'call_subprocess' 
```

如果有任何帮助，我将不胜感激。顺便说一句，我使用的是 python 2.7.3 和最新的稳定 pinax 版本

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T21:19:03.777

您有新版本的**pip**，该功能`pip.call_subprocess`已移至`pip.util.call_subprocess`. 见：[https ://github.com/pypa/pip/pull/464](https://github.com/pypa/pip/pull/464)

只需替换字符串

`C:\virtualenvs\mysite\lib\site-packages\pinax\core\management\commands\setup_project.py`

在执行 pinax-admin 之前

# jsp - fmt:formatNumber 标签是如何使用的？

> ID：12250318
> 
> 赞同：0
> 
> 时间：2012-09-03T15:04:59.480
> 
> 标签：jsp, input, format

我正在尝试将百分比格式化为小数点后 2 位，而我使用的代码（如下）不起作用：

```
<form:input 
     class="calculator-percentage-input"
     value="<fmt:formatNumber value='${percentage}' maxFractionDigits='2' />"
     path="discount" cssErrorClass="error"
/> 
```

我的输入框中显示的值为（百分比为空）：

```
<form:input 
     class="calculator-percentage-input"
     value="" 
     path="discount" cssErrorClass="error"
/> 
```

谁能告诉我如何只显示 的值`percentage`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:13:58.573

Solution:

```
<fmt:formatNumber var='myDiscountPercentage' value='${discountPercentage}'     maxFractionDigits='2'/>

<form:input 
     class="calculator-percentage-input"
     value="${myDiscountPercentage}"
     path="discount" cssErrorClass="error"
/> 
```

# sql - sql：在一列中聚合/收集字符串（使用单个查询）

> ID：12250323
> 
> 赞同：0
> 
> 时间：2012-09-03T15:05:14.517
> 
> 标签：sql, oracle

> **可能重复：**
> [是否存在将多行聚合为一行的 Oracle SQL 查询？](https://stackoverflow.com/questions/1120706/is-there-an-oracle-sql-query-that-aggregates-multiple-rows-into-one-row)
> [在 Oracle 中生成连接字符串的快速方法](https://stackoverflow.com/questions/7531001/fast-way-to-generate-concatenated-strings-in-oracle)

一个oracle sql新手问题

我有一个下表：

```
id1 A
id1 B
id1 C
id1 A
id2 A
id3 B
id3 A 
```

我想得到什么

```
id1 A,B,C
id2 A
id3 B,A 
```

我不能使用循环，我只能通过查询来获取它

我使用 Oracle DB v10（因此我知道它很重要[）](https://stackoverflow.com/questions/10954511/oracle-pl-sql-results-into-one-string)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:19:46.247

您需要使用 wm_concat(fieldname) 来解决目的。所以您的查询将是：

```
SELECT attr1, wm_concat(attr2) FROM YourTable GROUP BY field2; 
```

如果你想删除**重复项**，那么

```
SELECT attr1, wm_concat(distinct attr2) FROM YourTable GROUP BY field2; 
```

# javascript - 从 WCF-service 的布尔方法接收答案

> ID：12250325
> 
> 赞同：3
> 
> 时间：2012-09-03T15:05:18.570
> 
> 标签：javascript, asp.net, wcf, service

我的问题是：

我有 WCF 服务，它包含一种方法，可以返回 true 或 false。我在客户端通过 JS 调用此方法。

我的问题是调用此方法，然后等待它的答案，然后，例如，如果为真，则发出警报。

我的 SVC 文件：

```
namespace MyNamespace
{
    [ServiceContract(Namespace = "AttributeSetAttributeService")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class MyClass
    {
        [OperationContract]
        public Boolean SaveChanges(string aaa, string bbb, string ccc)
        {
            // code here
            return true;
        }
    }
} 
```

这就是我通过 JS 在客户端调用此函数的方式：

```
if (WayToMyServiceMethod.SaveChanges(aaa, bbb, ccc) == false) {
        alert("false");
        return false;
    }
    else {
        alert("true");
        return true;
    } 
```

但它总是提醒“真”并且并行执行服务方法（SaveChanges），而无需等待服务的回答。

我需要等待服务的回答，当它完成时得到“真”或“假”。

对不起我的英语不好 ：）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:44:40.687

在您的服务器方法 SaveChanges 中，它始终返回 true 。所以你总是真实的。如果您的服务器实现正确返回 true 或 false，请尝试以下检查客户端

在 javscript 中，您也应该使用 '===' 进行类型检查。

```
if (WayToMyServiceMethod.SaveChanges(aaa, bbb, ccc) === false) {
        alert("false");
        return false;
    }
    else {
        alert("true");
        return true;
    } 
```

# jquery - TransitionEnd 事件没有触发？

> ID：12250329
> 
> 赞同：7
> 
> 时间：2012-09-03T15:05:51.097
> 
> 标签：jquery, css

我有多个元素，每个元素都以（有点）持续时间进行动画处理。我正在使用 CSS3 过渡制作动画，使用 jQuery 库和[David Walsh](https://davidwalsh.name/css-animation-callback)`transitionend`的帮助函数。

我的问题是`transitionEnd`事件没有被触发！（在 Chrome 和 Firefox 中）

我的代码：

```
var $children = $container.find('.slideblock').children();

if(Modernizr.csstransitions && Modernizr.csstransforms3d) {

    if($.browser.webkit === true) {
        $children.css('-webkit-transform-style','preserve-3d')
    }

    $children.each(function(i){
        $(this).on(whichTransitionEvent,function () {
            $(this).remove();
        });
        $(this).show().css('animation','slideOutToRight ' + ((Math.random() / 2) + .5) + 's');
    });

} 
```

**更新**

该`whichTransitionEvent`变量指向一个自执行函数，该函数返回一个包含事件名称的字符串：

```
var whichTransitionEvent = (function (){
    var t;
    var el = document.createElement('fakeelement');
    var transitions = {
      'transition'       :'transitionEnd',
      'OTransition'      :'oTransitionEnd',
      'MSTransition'     :'msTransitionEnd',
      'MozTransition'    :'transitionend',
      'WebkitTransition' :'webkitTransitionEnd'
    }

    for(t in transitions){
        if( el.style[t] !== undefined ){
            return transitions[t];
        }
    }
} ());

console.log(whichTransitionEvent);        // returns "webkitTransitionEvent" in Chrome
console.log(typeof whichTransitionEvent); // returns "string" 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-08-31T02:33:44.120

### 不要将“过渡”与“动画”混淆。

CSS 动画有不同的回调。

这是动画的回调：

```
 $(document).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd", 
                "#robot", 
    function (event)
    {
        // complete
    }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-07T11:50:37.150

尝试在 Chrome 29 和 Firefox 23 中复制此功能，您的原始功能以同样的方式失败，即我看到两者都`console.log(whichTransitionEvent)`返回`'transitionEnd'`。

重新排序`transitions`散列中的元素可以解决问题，这表明两者都具有无前缀标准属性以及它们自己的前缀属性。

下面的重构函数，它为我触发了正确的事件：

```
function whichTransitionEvent(){
  var t;
  var el = document.createElement('fakeelement');
  var transitions = {
    'WebkitTransition' :'webkitTransitionEnd',
    'MozTransition'    :'transitionend',
    'MSTransition'     :'msTransitionEnd',
    'OTransition'      :'oTransitionEnd',
    'transition'       :'transitionEnd'
  }

  for(t in transitions){
    if( el.style[t] !== undefined ){
      return transitions[t];
    }
  }
} 
```

让我知道这是否有帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T18:27:18.477

你正在传递一个函数而不是一个字符串，所以你正在做相当于......

```
$(this).on(function(){...}, function() {...}) 
```

要解决这个问题，我建议在脚本的开头设置字符串，这样它就不会被多次调用。

```
if(Modernizr.csstransitions && Modernizr.csstransforms3d) {
    var transitionEnd = whichTransitionEvent();
    if($.browser.webkit === true) {
        $children.css('-webkit-transform-style','preserve-3d')
    }

    $children.each(function(i){
        $(this).on(transitionEnd,function () {
            $(this).remove();
        });
        $(this).show().css('animation','slideOutToRight ' + ((Math.random() / 2) + .5) + 's');
    });

} 
```

# javascript - JavaScript：将字符串数组转换为文本区域

> ID：12250333
> 
> 赞同：-3
> 
> 时间：2012-09-03T15:06:18.600
> 
> 标签：javascript, html, arrays, string, textarea

我有字符串数组，如何将其转换为 textArea？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:08:01.767

```
document.getElementById('textareaId').innerHTML = ['Hello', 'World'].join(', '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:17:43.873

如果您已经在 DOM 中加载了 textarea，请使用 Speransky Danil 的答案。

如果没有，您可以使用

```
function arrayToTextarea(arr){
    var txt=document.createElement('textarea');
    txt.appendChild(document.createTextNode(arr.join(', ')));
    return txt;
} 
```

然后你可以使用

```
document.body.appendChild(arrayToTextarea(myarray)); 
```

# azure - Azure 服务总线队列：未发送消息

> ID：12250334
> 
> 赞同：1
> 
> 时间：2012-09-03T15:06:21.620
> 
> 标签：azure, azureservicebus

我正在从工作角色向服务总线队列发送消息。我注意到随机丢失了一些消息。

当我调试时，我在 Send 方法之后设置了一个断点并登录到我的 Azure 面板以检查消息队列是否增加。我发现奇怪的是，有时消息没有添加到队列中。但这不是随机的。模式是：一条消息添加正确，下一条丢失，然后再次下一条正常，下一条丢失。

我已经实现了如下所示的重试模式，但显然并非所有消息都正确发送。

我的代码是：

```
var baseAddress = RoleEnvironment.GetConfigurationSettingValue("namespaceAddress");
var issuerName = RoleEnvironment.GetConfigurationSettingValue("issuerName");
var issuerKey = RoleEnvironment.GetConfigurationSettingValue("issuerKey");
var retryStrategy = new FixedInterval(5, TimeSpan.FromSeconds(2));
var retryPolicy = new RetryPolicy<ServiceBusTransientErrorDetectionStrategy>(retryStrategy);
Uri namespaceAddress = ServiceBusEnvironment.CreateServiceUri("sb", baseAddress, string.Empty);

this.namespaceManager = new NamespaceManager(namespaceAddress, TokenProvider.CreateSharedSecretTokenProvider(issuerName, issuerKey));
this.messagingFactory = MessagingFactory.Create(namespaceAddress, TokenProvider.CreateSharedSecretTokenProvider(issuerName, issuerKey));
//namespaceManager.GetQueue("chatmessage");
QueueClient client = messagingFactory.CreateQueueClient("chatmessage");
APPService.Model.MessageReceived messageReceived = new Model.MessageReceived();
messageReceived.From= e.From;
messageReceived.Op = e.Operator;
messageReceived.Message = e.Body;
BrokeredMessage msg = null;

// Use a retry policy to execute the Send action in an asynchronous and reliable fashion.
retryPolicy.ExecuteAction
(
    (cb) =>
    {
        // A new BrokeredMessage instance must be created each time we send it. Reusing the original BrokeredMessage instance may not 
        // work as the state of its BodyStream cannot be guaranteed to be readable from the beginning.
        msg = new BrokeredMessage(messageReceived);

        // Send the event asynchronously.
        client.BeginSend(msg, cb, null);
    },
    (ar) =>
    {
        try
        {
            // Complete the asynchronous operation. This may throw an exception that will be handled internally by the retry policy.
            client.EndSend(ar);
        }
        finally
        {
            // Ensure that any resources allocated by a BrokeredMessage instance are released.
            if (msg != null)
            {
                msg.Dispose();
                msg = null;
            }
        }
    },
    ()=>{},
    (ex) =>
    {
        // Always dispose the BrokeredMessage instance even if the send operation has completed unsuccessfully.
        if (msg != null)
        {
            msg.Dispose();
            msg = null;
        }

        // Always log exceptions.
        Trace.TraceError(ex.Message);
    }
); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:48:41.287

仅查看您的代码，我无法注意到云导致该问题的任何内容。我想门户上的计数器没有实时更新，所以我不会将其视为测试结果。

我知道我现在没有帮助，但如果我有你表达的疑问，我会建立一个端到端的测试来发送和接收消息，比较 messageId。

您是否已经在 MSDN 上使用 Paolo Salvatori 的[Service Bus Explorer ？](http://msdn.microsoft.com/en-us/library/hh532261%28v=VS.103%29.aspx)您可以使用它来测试实体。它是探索和测试服务总线的可靠工具。

# java - 将数组传递给小程序中的另一个方法

> ID：12250345
> 
> 赞同：0
> 
> 时间：2012-09-03T15:07:41.210
> 
> 标签：java, methods, applet

所以我正在编写一个程序，它随机挑选一副牌中的 10 张牌并显示它们。但是，我不知道如何将用于存储随机卡片的数组传递给打印卡片的方法。这是我的代码：

```
import java.awt.Graphics;
import java.awt.Color;
import java.awt.Image;
import java.applet.Applet;
import java.lang.Math;
import java.util.Random;

public class unit12Assignment extends Applet
{
    Image card1 ... card52;

public void init()
{
    card1 = getImage( getDocumentBase(), "c1.gif" );
        ...
    card52 = getImage( getDocumentBase(), "sk.gif" );
}

public void getCards(String[] cardSelection)
{
    String cardNumber; 
    double cardRandom;
    int cardRandomNumber;
    Random ran = new Random();
            cardSelection = new String[10]

    for (int number = 0; number <=  9; )
    {
        cardRandom = ran.nextInt(52) + 1;
        cardRandomNumber = (int) Math.round( cardRandom );

        if ( cardRandomNumber > 0 && cardRandomNumber <= 52 )
        { 
            cardNumber =  "card" + cardRandomNumber;
            number++;
        }
    }   
}

    // i wanna pass it to this method
public void paint(Graphics g)
{
    setBackground( Color.green );
    g.drawImage( cardSelection[0], 10, 10, this);
    g.drawImage( cardSelection[1], 90, 10, this);
    g.drawImage( cardSelection[2], 170, 10, this);
    g.drawImage( cardSelection[3], 250, 10, this);
} 
```

}

这似乎是一个简单的问题，但我完全忘记了如何去做。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:12:32.587

声明`String[] cardSelection;`为实例变量（在类声明旁边）。

然后，在 getCards() 方法中实例化数组：

```
cardSelection = new String[10]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:10:49.993

You need to make the `paint` method accept a `String[]`. Then you can pass in your array when you call `paint`.

For example:

```
public void main(String[] args) {
  String[] myArray = makeArray();
  printArray(myArray);
}   

public String[] makeArray() {
  return new String[] {"element0", "element1", "element2"};
}   

public void printArray(String[] array) {
  for (String element : array) {
    System.out.println(element);
  }   
} 
```

# php - 登录后 symfony 2 安全重定向

> ID：12250347
> 
> 赞同：4
> 
> 时间：2012-09-03T15:07:53.630
> 
> 标签：php, symfony, acl

我有下一个security.yml：

```
security:
    encoders:
        Test\BackEndBundle\Entity\User:
            algorithm: sha512
            encode-as-base64: true
            iterations: 10

    providers:
        main:
            entity: { class: TestBackEndBundle:User, property: username }

    firewalls:
        main:
            pattern: /.*
            form_login:
                check_path: _security_check
                login_path: _security_login
                default_target_path: homepage
            logout: true
            security: true
            anonymous: true

    access_control:
        - { path: ^/service, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/login, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: /.*, roles: {ROLE_PARTNER, ROLE_ADMIN} } 
```

以及下一个路由：

```
homepage:
    pattern:  /
    defaults: { _controller: TestBackEndBundle:Default:index }

_security_login:
    pattern:  /login
    defaults: { _controller: TestBackEndBundle:Security:login }

_security_check:
    pattern:  /login_check

_security_logout:
    pattern:  /logout 
```

身份验证效果很好，而不是登录后重定向。应用程序重定向到**/_wdt/5044c6f2a329c**。如何重定向到主页？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-20T18:58:37.327

解决方案是取消保护您的 _wdt 路由。

您会出现这种行为，因为您的 _wdt 路由受到保护。当页面从 _wdt 路由加载工具栏时，它会触发登录。您的登录表单将尝试重定向回触发登录的路由：在本例中为 _wdt。

将此添加到 security.yml 中的 access_control

```
 - { path: ^/_wdt, roles: 'IS_AUTHENTICATED_ANONYMOUSLY' } 
```

这将使工具栏在受保护和不受保护的页面中都可以工作，如果页面受到保护，它将是触发登录表单的页面=它将按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:10:32.457

1.  您必须创建一个实现[AuthenticationSuccessHandlerInterface的](http://api.symfony.com/2.0/Symfony/Component/Security/Http/Authentication/AuthenticationSuccessHandlerInterface.html)**success_handler**
2.  然后您必须将其声明为服务（在 services.xml 或 services.yml 中）
3.  并将其添加到您的[安全配置中。](http://symfony.com/doc/current/reference/configuration/security.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:31:32.763

此外，您可以设置`always_use_default_target_path: true`，然后您`default_target_path`将按预期工作。查看[详情](https://stackoverflow.com/a/8374854/541961)。

# jakarta-ee - 手动创建 SOAP 消息？

> ID：12250351
> 
> 赞同：1
> 
> 时间：2012-09-03T15:08:04.217
> 
> 标签：jakarta-ee, soap, wsdl, apache-commons-exec

我的目标是建立一个通用的网络服务。在这种情况下，“通用”是指，一个人应该能够在输入上运行任意序列的工具（比如说一个文件）。这些工具是安装在服务器上的编译程序。

`WSDL`我的想法是在中央文件中指定每个工具。`WSDL`解析该文件，并为文件中包含的每个工具创建`WSDL`一个单独的文件，该文件`Service Class`通过 apache commons exec 执行相应的工具。

那么是否可以手动创建一个`SOAP Message`工具序列，一个想要在输入上执行的工具，被指定？然后`SOAP Message`应该对其进行解析并`Service Classes`启动相应的。

我不得不说我对`Web Service`编程完全陌生，我很感激任何建议。以上只是一个想法，我愿意接受任何更好的建议；）

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:52:42.823

您可以通过实现接口`SOAP`手动（以编程方式）创建、修改消息。`SOAPHandler<SOAPMessageContext>`然后你需要重写这个方法：

```
public boolean handleMessage(SOAPMessageContext context) {
   //do anything you like with a message    
} 
```

您从传递给此方法`SOAP`的对象中获取消息：`SOAPMessageContext`

```
SOAPMessage soapMsg = context.getMessage(); 
```

从您的消息中，您可以得到`SOAP Body`, `SOAP Envelope`, `SOAP Header`. 通过这样做，您可以添加任意数量的元素。但不要忘记您手动添加的每个元素都必须与您`XSD`的`WSDL`文件匹配。

要将此处理程序声明到`JAX-WS`上下文中，您可以`Spring`进行如下配置：

```
 <jaxws:endpoint id="HandlerExample"
                  implementor="your.service.ImplemetationClass"
                  address="http://localhost:8080/Example/services/Example">
    <jaxws:handlers>
       <bean class="your.Handler" />
    </jaxws:handlers>
  </jaws:endpoint> 
```

有关如何配置`JAX-WS`端点的更多信息，您可以在[此处](http://cxf.apache.org/docs/jax-ws-configuration.html)找到。[您还可以在此处](http://www.mkyong.com/webservices/jax-ws/jax-ws-soap-handler-in-server-side/)找到有关处理程序的信息。

希望这有助于开始。

# hadoop - Hadoop Cascading - 创建一个源，两个接收器的流

> ID：12250352
> 
> 赞同：4
> 
> 时间：2012-09-03T15:08:08.403
> 
> 标签：hadoop, mapreduce, flow, cascading

我正在使用 Cascading 2 创建 Hadoop 作业，并尝试创建一个从单个源开始的流。在将几个函数应用于数据后，我需要拆分流，以便使用此数据创建两个单独的报告（在两个单独的接收器中）。

```
 //SOURCE
    Scheme sourceScheme = new TextLine( new Fields( "line" ) );
    Tap source = new Hfs( sourceScheme, input );

    //REPORT1 SINK
    Scheme report1SinkScheme = new TextDelimited( Fields.ALL, ",","\"" );
    Tap report1Sink = new Hfs( report1SinkScheme, output1, SinkMode.REPLACE );

    //REPORT2 SINK
    Scheme report2SinkScheme = new TextDelimited( Fields.ALL, ",","\"" );
    Tap report2Sink = new Hfs( report2SinkScheme, output2, SinkMode.REPLACE );

    //INITIAL FUNCTIONS
    Pipe firstPipe = new Pipe("firstPipe");
    firstPipe = new Each(firstPipe, new Fields("line"), functionA);
    firstPipe = new Each(firstPipe, functionB, Fields.ALL);

    //REPORT1 FUNCTION
    report1Pipe = new Each(firstPipe, Fields.ALL, function1, Fields.RESULTS);

    //REPORT2 FUNCTION
    report2Pipe = new Each(firstPipe, Fields.ALL, function2, Fields.RESULTS);

    //CONNECT FLOW PARTS
    FlowDef flowDef = new FlowDef()
    .setName("report-flow")
    .addSource(firstPipe, source)
    .addSink(report1Pipe, report1Sink)
    .addSink(report2Pipe, report2Sink);

    new HadoopFlowConnector( properties ).connect( flowDef ).complete(); 
```

目前，这给了我错误“java.lang.IllegalArgumentException：无法添加重复的接收器：firstPipe”，但即使在弄乱了一段时间之后，我也遇到了与流程设置有关的各种其他问题。

有人可以解释如何构造这种形式的流（一个源，两个汇）吗？我需要创建一个 Cascade 吗？还是在拆分之前需要一个中间接收器来保存数据？

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T00:58:05.290

您可以使用 Cascading 文档中提到的拆分模式。这是一个例子：

```
public static void main(String[] args) {
    // source and sink
    Scheme sourceScheme = new TextLine(new Fields("line"));
    Tap source = new FileTap(sourceScheme, args[0]);

    Fields sinkFields = new Fields("word", "count");
    Scheme sinkScheme = new TextLine(sinkFields, sinkFields);
    Tap sink_one = new FileTap(sinkScheme, "out-one.txt");
    Tap sink_two = new FileTap(sinkScheme, "out-two.txt");

    // the pipe assembly
    Pipe assembly = new Pipe("wordcount");

    String regex = "\\w+";
    Function function = new RegexGenerator(new Fields("word"), regex);
    assembly = new Each(assembly, new Fields("line"), function);

    Aggregator count = new Count(new Fields("count"));

    // ...split into two pipes
    Pipe countOne = new Pipe("count-one", assembly);
    countOne = new GroupBy(countOne, new Fields("word"));
    countOne = new Every(countOne, count);

    Pipe countTwo = new Pipe("count-two", assembly);
    countTwo = new GroupBy(countTwo, new Fields("word"));
    countTwo = new Every(countTwo, count);

    // create the flow
    final List<Pipe> pipes = new ArrayList<Pipe>(2);
    pipes.add(countOne);
    pipes.add(countTwo);

    final Map<String, Tap> sinks = new HashMap<String, Tap>();
    sinks.put("count-one", sink_one);
    sinks.put("count-two", sink_two);

    FlowConnector flowConnector = new LocalFlowConnector();
    Flow flow = flowConnector.connect(source, sinks, pipes);

    flow.complete();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T05:44:40.587

*拆分模式*位于级联用户指南中： [http ://docs.cascading.org/cascading/2.1/userguide/htmlsingle/#N21362](http://docs.cascading.org/cascading/2.1/userguide/htmlsingle/#N21362)

另一个（更简单的）示例包含在“不耐烦的级联”中，第 5 部分和第 6 部分：

*   [https://github.com/Cascading/Impatient/wiki/Part-5](https://github.com/Cascading/Impatient/wiki/Part-5)
*   [https://github.com/Cascading/Impatient/wiki/Part-6](https://github.com/Cascading/Impatient/wiki/Part-6)

关于上面显示的代码的一点是，它似乎缺少 和 的变量`report1Pipe`定义`report2Pipe`。要使用*拆分模式*，每个分支都需要一个名称，并且名称需要不同。

抛出异常是因为有两个分支都从管道组件的早期继承了相同的名称。因此，例如，这些`flowDef.addSink(..)`调用对于流程规划者来说是模棱两可的。

所以在“不耐烦”的第 5 部分中，看看“D”、“DF”和“TF”分支是如何在操作中命名的。

Cascading 要求这种命名似乎有点违反直觉，但当您将*故障陷阱*、*调试*等附加到特定分支时，它在大型、复杂的工作流程中变得非常重要。

或者，Clojure 中的 Cascalog DSL 更具声明性，因此这由语言直接处理——分支是子查询，陷阱等在子查询的闭包中处理。

# c# - 在类中包装简单类型有什么好处？

> ID：12250355
> 
> 赞同：18
> 
> 时间：2012-09-03T15:08:17.687
> 
> 标签：c#

我正在查看本质上传递 id 的代码，例如：

```
GetPersonById(int personId) 
```

但它没有使用 int，而是使用了 PersonId 对象。

```
GetPersonById(PersonId personId) 
```

PersonId 对象只是一个带有一些手摇代码的 int，以使其可以为空。那么，当可空整数不可用时，这是在旧的 .NET 中创建的，还是有更高的目的将简单类型包装在类中？

```
public sealed class PersonId {

    private PersonId() {
        _isNull = true;
        _value = 0;
    }

    private PersonId(int value) {
        _isNull = false;
        _value = value;
    }

    // and so on!
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T15:11:32.800

在这样的[DDD](http://en.wikipedia.org/wiki/Domain-driven_design)代码中，用于使该 ID 引用的类型更加明确。

尤其是在设计良好的聚合的上下文中，对其他聚合的引用通常是通过 ID 而不是对象引用。在这种情况下，可以使用这些 ID 值对象来避免这些 ID 的意外混合，并且 - 如前所述 - 使引用的聚合更加明确。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-03T15:15:58.367

如果用于识别人员的字段需要更改，使用类是简化进一步重构的好方法。假设明天系统会联系到`Int32.MaxValue`人们，而您想使用一个`Int64`或一个字符串来识别他们。另一种情况是，当系统的要求不是 100% 准确时，他们没有指定是否可以通过 ID、PIN 或您能想到的任何字段组合来识别一个人。这段代码的作者可能已经通过创建这个类来防止重大重构。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-03T19:45:57.610

答案也可能是语义！

想象一下，你有一些`int`价值。是`ID`吗？或者是年龄、身高cm、温度摄氏度、电视节目数量？好吧，你可以给变量起个好名字，但是如果你犯了错误，这并不能保护你。

相反，如果一个函数需要一个 ID 类实例（这是伪装的）而`int`不仅仅是无论如何），编译器*会*捕捉到它并警告你。除此之外，任何阅读代码的人都可以清楚地看到所需的值*不仅仅是*int，而是一个 ID——你不能用文档做得更好，反正没人读。`int``int``Coordinate`

 **（旁注：你无法想象，我在尝试重构用于`double`角度和弧度的代码时有多头疼！这是一场噩梦！切换到 a 后`class Angle`，一切都变得更好了。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T15:10:09.440

`Nullable<T>`这段代码可能是在不存在时用 C# 1.0 编写的。

现在你应该`int?`改用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T15:11:27.660

对我来说，我认为最好使用框架中最原始的类型。

-> 没有好处

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-03T15:13:04.123

旧的 C# 可以是它的一种解释。
但我想它可以有其他解释，未来的想法......
如果将来你想为一个人提供更多数据，通过更改 PersonId 类本身或继承它，所有代码仍然可以正常工作是。但如果你会使用`int?`那么你将不得不改变所有的电话。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T15:10:35.447

除了将值类型用作可空值之外，没有任何好处。而已。**

# javascript - Image Sprites 和 jQuery Mobile Ajax 导航的问题

> ID：12250356
> 
> 赞同：0
> 
> 时间：2012-09-03T15:08:18.973
> 
> 标签：javascript, jquery, html, css, caching

我已经为我的 jQuery 移动网站（例如 #page1、#page2）上的所有图像创建了一个图像 Sprite，我想我可以在我的网站的 #page1 上下载图像 Sprite，然后我就不需要下载它了#page2，但事实并非如此，

这应该工作吗？

谢谢，

我对这些 Sprites 没有做任何复杂的事情

例如

```
.help-photo {
  width:100px;
  height:112px;
  background:url(help.png) 0px -440px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:27:20.633

可能在检查器中，您会看到提供带有`304`http 响应状态代码的响应的请求，它是`Not Modified`，然后它并没有真正下载图像，所以事情是正确的。

# javascript - Sencha Touch loading xml data via JsonP

> ID：12250357
> 
> 赞同：1
> 
> 时间：2012-09-03T15:08:22.530
> 
> 标签：javascript, xml, sencha-touch, jsonp, sencha-touch-2

I am trying to load xml data via JsonP in sencha touch and I'm very new to sencha touch.

Here is the code of my view

```
 Ext.define("test.view.list", {
 extend : 'Ext.navigation.View',

requires:[
    'Ext.dataview.List',
    'Ext.data.proxy.JsonP',
    'Ext.data.reader.Xml',
    'Ext.data.Store'
],

config : {

    items : {
        xtype : 'list',
        itemTpl : '{title}',
        title : 'All_data',

        store: {
            autoLoad: true,
            fields: ['title'],
            proxy: {
                type: 'jsonp',
                url: 'http://www.mydomain.com/data.php',
                callbackKey: 'callback',
                callback: function(data){
                    Alert('123');
                },

                reader: {
                    type: 'xml',
                    rootProperty: 'items',
                    record: 'item'
                }
            }
        }

    },
}}); 
```

The server-side php:

```
<?php
$callback = $_REQUEST['callback'];
$data = 
'<items><item><title>Hello</title></item></items>';

if ($callback) {
    header('Content-Type: text/javascript');
    echo $callback . '(' . $data . ');';
} else {
    header('Content-Type: text/xml');
    echo $data;
}

?> 
```

When i try to start it, i get the following error:

```
Uncaught SyntaxError: Unexpected token < 
```

What can I do, in oder to make it work?

Thank you for helping me out!

# mysql - MySQL: precompute data for better performance

> ID：12250361
> 
> 赞同：0
> 
> 时间：2012-09-03T15:08:35.120
> 
> 标签：mysql, sql, performance, database-performance

Is it ok to precompute data for better performance? For example, when player wins a game, I count number of won games for the particular player and write it to a dedicated table. Then, when I show overall ratings, I don't need to count number of won games for the players once again — I already have it precomputed.

Of course, it's possible, that precomputed data becomes unsyncronized with real values, but it's bearable.

Or is there another, more "professional" way to resolve the issue?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:10:35.147

No, its perfectly fine and is mostly done for large datasets you'd else had to perform sum/count/group by statements that cost alot performance.

if "out of sync" is not a problem to realtime, use nightly-jobs to verify they are still in sync, or update them if they are not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:21:30.277

使用不同的方法 -

1.  将聚合值存储在单独的汇总表中
2.  根据原始表存储聚合值

没有正确或错误的答案。可能在你的情况下你想使用 1) 所以你有一个聚合表，比如​​：

PlayerID AggregateName AggregateValue

然后，您可以轻松扩展聚合，而无需修改表结构。

# encoding - 错误：用于编码 UTF-8 的不可映射字符

> ID：12250368
> 
> 赞同：10
> 
> 时间：2012-09-03T15:09:33.970
> 
> 标签：encoding, utf-8

错误：用于编码 UTF-8 的不可映射字符。由于版权字符，我收到此错误。我正在使用 Netbeans 7.2。

```
/**
 *  � 2006
 * 
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2.6-2b01 
 * Generated source version: 2.1
 * 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T16:51:01.940

您必须正确设置项目的编码。

右键单击您的项目 -> 属性 -> 源 -> 编码

Windows 1252 是一个不错的尝试选择。它对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T15:12:17.057

听起来你有两个选择：

*   使用命令行参数调用生成器以生成 UTF-8，而不是默认使用的任何内容。（你还没有说这个文件实际来自哪里，但我认为这代人在你的控制之下......）
*   更改 Netbeans 处理文件的方式，告诉它​​它的真正编码是什么

如果可能的话，我个人倾向于第一个选项 - UTF-8 是一个很好的“一切都支持它”编码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-20T14:09:47.437

在“项目”窗口中右键单击项目节点并选择“属性”。在类别下的左列中，选择来源。并将其设置为 ISO-8859-1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-17T05:40:36.007

*我在这里使用了所有解决方案，但问题仍然存在*。最后，

*我已经解决了这个问题：*

*   通过更改 netbeans 版本（**从 'version 8.2' 到 'apache version 11'**）

# asp.net-mvc-3 - @Html.DropDownList 为加入的子实体生成不正确的键/ID

> ID：12250371
> 
> 赞同：0
> 
> 时间：2012-09-03T15:09:40.050
> 
> 标签：asp.net-mvc-3, forms, html-select

在 HTML 表单上，我有各种控件绑定到父实体和 2 个子实体（都是一对一的）需要依赖。

提交 from`[POST]`值时，对于绑定到父级的所有控件以及绑定到子实体的所有“文本”类型控件，值都保持正常，但绑定到下拉控件的子字段不会保持不变。

我查看了 HTML 源代码，发现控件的名称和 id 标记的构造不同，因此提交表单中的键对于绑定到下拉控件的所有字段都是不正确的。

以下是表单中的两个示例控件，父表**“Counterparty”**和子表“ **CounterpartyFinancial”**

Textarea 控件：**值更改保持正常：** `<textarea id="CounterpartyFinancial_WebAddress" name="CounterpartyFinancial.WebAddress">`

组合控件：**值更改不会持续：** `<select id="FinancialsSourceId" name="FinancialsSourceId">`

下拉菜单是用

1）控制器中的选择列表：

```
ViewBag.FinancialsSourceId = new SelectList(db.FinancialsSources, "FinancialsSourceId", "Name", counterparty.CounterpartyFinancial.FinancialsSourceId); 
```

和

2) 视图中的 DropDownList Helper

`@Html.DropDownList("FinancialsSourceId", String.Empty)`

该控件确实反映了数据库中的正确值。

我应该在下拉帮助程序中使用覆盖，还是更有可能不正确的配置/定义备份行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:25:23.307

我使用 @Html.DropdownListFor 助手解决了这个问题

`@Html.DropDownListFor(x => x.SomePropertyOnModel, (IEnumerable<SelectListItem>)ViewBag.Clients);`

[DavidAndroidDev 在这里建议](https://stackoverflow.com/questions/5377402/having-difficulty-using-an-asp-net-mvc-viewbag-and-dropdownlistfor)

# php - PHP & Multiple checkboxes

> ID：12250372
> 
> 赞同：0
> 
> 时间：2012-09-03T15:09:47.913
> 
> 标签：php

I have this form:

```
 <form action="" method="post">
  <input type="checkbox" name="a" value="2" /> 
  <input type="checkbox" name="b" value="4" />
<input type="submit" name="submit" value="Submit" />
    </form> 
```

What i need, when checkbox/es is/are selected and submit button is pressed to calculate value

*   if this value is more or equivalent - query
*   if this value is less - error message

Value is checked from column name points

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:28:55.733

```
if (isset($_POST['submit'])) {
   $var_a = (isset($_POST['a'])) ? 2 : 0;
   $var_b = (isset($_POST['b'])) ? 4 : 0;

   if ( ($var_a + $var_b) >= 6 ){
      // query
   }
   else {
      // error message
   }
} 
```

# php - 处理从数据库动态填充的表单数据

> ID：12250374
> 
> 赞同：1
> 
> 时间：2012-09-03T15:10:01.217
> 
> 标签：php, html, forms, html-table

我有一个看起来像的表单，我希望能够收集单元格值以进行表单处理：

```
<form method ="post" action="sendmail.php">
<table>
<h4>Orders</h4>
<tr>
<th>Order Number</th>
<th>Order Date</th>
<th>Ordered By</th>
<th>Supplier</th>
<th>Total Price</th>
<th>Requested By</th>
<th>Status</th>
<th>Send Notification</th>
</tr>
<?php
while($row=mysql_fetch_array($result)){
echo "</td><td>";
echo $row['Orderno'];
echo "</td><td>";
echo $row['Orderdate'];
echo "</td><td>";
echo $row['Orderedby'];
echo "</td><td>";
echo $row['Supplier'];
echo "</td><td>&#163; ";
echo $row['totalprice'];
echo "</td><td>";
echo $row['requestedby'];
echo "</td><td>";
echo ' <select name="status">
<option></option>
<option>Approved</option>
<option>Pending</option>
<option>Dissaproved</option>
</select>';
echo "</td><td>";
echo '<input type="submit" value="Send Email" />';

echo "</td></tr>";
}
echo "</table>";
?>
</form> 
```

我的问题是如何检索每个单元格中的值以用于表单处理？使用这些值，我将创建一个电子邮件模板来向某人发送电子邮件。例如，`$to = $_POST['requestedby'];`我尝试过使用`POST`无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:39:38.200

那么你的第一个问题是你没有将你从数据库中取出的变量存储在任何地方，你只是在打印它们，所以当你点击发送电子邮件时，你发送到 sendmail.php 的唯一东西就是选择名称= “地位”。

将结果存储到普通变量中，以便您可以在所有页面中使用它们，如下所示：

```
<?php
while($row=mysql_fetch_array($result)){
$Oderno = $row['Orderno'];
$Orderdate = $row['Orderdate'];
$Orderedby = $row['Orderedby'];
$Supplier = $row['Supplier'];
$totalprice = $row['totalprice'];
$requestedby = $row['requestedby'];
} 
?> 
```

然后继续填写您的表格，如下所示：

```
<?php
echo "</td><td>";
echo $Orderno;
echo "</td><td>";
echo $Orderdate;
echo "</td><td>";
echo $Orderedby;
echo "</td><td>";
echo $Supplier;
echo "</td><td>&#163; ";
echo $totalprice;
echo "</td><td>";
echo $requestedby;
echo "</td><td>";
echo ' <select name="status">
<option></option>
<option>Approved</option>
<option>Pending</option>
<option>Dissaproved</option>
</select>';
echo "</td><td>";
echo '<input type="submit" value="Send Email" />';
echo "</td></tr>";
echo "</table>";
?> 
```

现在，您可以在表单中存储变量，请执行以下操作：

```
<input type="hidden" name="Orderno" value="<?php echo $Orderno; ?>" >
<input type="hidden" name="Orderdate" value="<?php echo $Orderdate; ?>" >
<input type="hidden" name="Orderedby" value="<?php echo $Orderedby; ?>" >
<input type="hidden" name="Supplier" value="<?php echo $Supplier; ?>" >
<input type="hidden" name="totalprice" value="<?php echo $totalprice; ?>" >
<input type="hidden" name="requestedby" value="<?php echo $requestedby; ?>" >
</form> 
```

我相信在这些输入之前有提交按钮不是问题，但如果它只是在提交按钮之前写最后一位，你会很好。

希望这有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T15:42:25.097

由于 HTML 无效，我可能更改了您的逻辑。此外，没有必要制作多个提交按钮，因为只有一个表单：

**编辑：**如果您真的想要每行一个按钮，则必须连续制作一个，这仅适用于嵌套表（`<tr>`不允许`<form>`在其中）。我认为它会太复杂。

因此，我保留了一个独特的表单和提交按钮，并在每一行添加了一个复选框，以便您选择一个（或多个）订单来发送电子邮件。

```
<form method="post" action="sendmail.php">
    <h4>Orders</h4>

    <table>
        <tr>
            <th>&nbsp;</th>
            <th>Order Number</th>
            <th>Order Date</th>
            <th>Ordered By</th>
            <th>Supplier</th>
            <th>Total Price</th>
            <th>Requested By</th>
            <th>Status</th>
        </tr>
    <?php
    $i = 0;

    while ($row = mysql_fetch_assoc($result))
    {
        echo '<tr>';

        echo '<td><input type="checkbox" name="order_selected['.$i.']"/></td>';
        echo '<td><input type="text" name="order_no['.$i.']" value="' . $row['Orderno'] . '"/></td>';
        echo '<td><input type="text" name="order_date['.$i.']" value="' . $row['Orderdate'] . '"/></td>';
        echo '<td><input type="text" name="order_ordered_by['.$i.']" value="' . $row['Orderedby'] . '"/></td>';
        echo '<td><input type="text" name="order_supplier['.$i.']" value="' . $row['Supplier'] . '"/></td>';
        echo '<td><input type="text" name="order_total_price['.$i.']" value="' . $row['totalprice'] . '"/></td>';
        echo '<td><input type="text" name="order_requested_by['.$i.']" value="' . $row['requestedby'] . '"/></td>';

        echo '<td>';
        echo '<select name="order_status[]">';
        echo '<option></option>';
        echo '<option>Approved</option>';
        echo '<option>Pending</option>';
        echo '<option>Dissaproved</option>';
        echo '</select>';
        echo '</td>';

        echo '</tr>';

        $i++;
    }
    ?>
    </table>

    <p>
        <input type="submit" value="Send email(s)" />
    </p>
</form> 
```

之后，在 PHP 中，您可以使用以下命令检索所有这些信息：

```
if(isset($_POST['order_selected']))
{
    $keys = array_keys($_POST['order_selected']);

    foreach($keys as $key)
    {
        $to = $_POST['order_requested_by'][$key];

        // sendmail
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:39:44.133

通常我用这种方式

```
<table border="1">
 <tr>
   <th>Order Number</th>
   <th>Order Date</th>
   <th>Ordered By</th>
   <th>Supplier</th>
   <th>Total Price</th>
   <th>Requested By</th>
   <th>Send Notification</th>
 </tr>
 <?php 
   while($row=mysql_fetch_array($result)){ 
   $Orderno = $row['Orderno'];
 ?>
 <tr>
   <td><?php echo $row['Orderno']; ?></td>
   <td><?php echo $row['Orderdate']; ?></td>
   <td><?php echo $row['Orderedby']; ?></td>
   <td><?php echo $row['Supplier']; ?> </td>
   <td><?php echo $row['totalprice']; ?></td>
   <td><?php echo $row['requestedby']; ?></td>
   <td>
    <a href="sendmail.php?id=<?php echo $Orderno; ?>&stt=Approved">Approved"</a>
    <a href="sendmail.php?id=<?php echo $Orderno; ?>&stt=Pending">Pending"</a>
    <a href="sendmail.php?id=<?php echo $Orderno; ?>&stt=Dissaproved">Dissaproved"</a>
   </td> 
 </tr>
 <?php } ?>
</table> 
```

关于 sendmail.php 我只是做了一些修改

```
$Orderno = $_GET["id"];
$status  = $_GET["stt"];

//send_notification($Orderno,$status);
//you can put your process code here (like branching maybe)
// if($status=="Aproved"){ } 
// else if($status=="Pending"){ } 
// else if($status=="Dissaproved"){ } 
```

# c# - 实体框架 - 在 JOIN 中选择两个表的顶部

> ID：12250385
> 
> 赞同：0
> 
> 时间：2012-09-03T15:10:41.973
> 
> 标签：c#, linq, entity-framework

我的模型是（简化版）：

专辑（ID、名称）

图片（ID、AlbumID、文件）。请注意专辑的 FK。

我想写一个查询来返回最近的专辑（前 10 名），但只是每个专辑的前 5 张图片。

我写： `_context.Albums.Include("Pictures").Take(10).ToList();`

在这种情况下，SQL 将返回前 10 个相册，但这些相册的所有图片。但是在某些情况下，每个相册可能有数百张图片，所以我想查询以将图片数量限制为 5，例如。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:14:05.903

未经测试，但也许是这样的。

```
_context.Albums.Select(m => new {
     album = m,
     pictures = m.Pictures.Take(5)
}).Take(10); 
```

# r - 复制、重复还是其他？

> ID：12250387
> 
> 赞同：0
> 
> 时间：2012-09-03T15:10:44.650
> 
> 标签：r

我有如下详述的代码。我需要的基本描述是重复此代码 30 次，并尽可能将最终值分配为向量。每次运行模拟时，我还需要将种子增加一。所以我在考虑使用复制或重复。但是作为复制需要`rep(vector, times)`，我不确定，因为我没有要分配的特定向量。

为了更好地解释代码，A 是值的第一个最佳猜测，然后通知 B。B 然后用作 C 的输入，通知 D。C 和 D 然后迭代直到收敛三个值。

```
rep(vector,40){
set.seed(100)

...............
A
..............
B
..............

for (n in 1:50){
...............
C
..............
D
..............
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:35:01.860

您可以将所有内容包装在一个函数中，然后使用 sapply 将索引提供给您的函数。

```
yourfun <- function(seed){
    set.seed(seed)
    # your code here

    ans <- rnorm(1)
    # just so we can return something
    return(ans)
}

sapply(seq(500, 530), yourfun) 
```

# django - Can I rerun a Django request?

> ID：12250389
> 
> 赞同：0
> 
> 时间：2012-09-03T15:10:47.550
> 
> 标签：django, mongodb, request, zodb

I'm using a key-value store for Django. To manage conflict errors for concurrent processes accessing the same objects, I need to rerun whole Django requests if the final commit fails.

How do I do this? Can I somehow initiate the rerun inside a `middleware.process_response`?

# android - CalledFromWrongThreadException：Android ContentObserver 和 Activity 接口

> ID：12250393
> 
> 赞同：0
> 
> 时间：2012-09-03T15:10:52.630
> 
> 标签：android, view, sms, listactivity, contentobserver

我有`ListActivity`一条短信`ContentObserver`。显示`ListView`SMS 发送/接收。每当 SMS 数据库（发送/接收）发生变化时，观察者就会调用其中的一个函数`Activity`来更新`ListView`.

这在 FROYO 中工作正常。但在 ICS 我得到以下

> android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图。

请让我知道可能是什么问题。

以下是顶层代码。

```
public class MyList extends ListActivity implements OnInitListener{
    @Override
    protected void onDestroy() {
        super.onDestroy();
        MyList.this.getContentResolver()
            .unregisterContentObserver(smsObserver);
    }

    @Override
    protected void onPause() {
        super.onPause();
        MyList.this.getContentResolver()
            .unregisterContentObserver(smsObserver); 
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.MyList );

        registerSmsEventObserver();
        updateList();
    }

    @Override
    protected void onResume() {
        super.onResume();
        registerSmsEventObserver();
    }

    updateList() {
        //fill up the listview
    }

    private void registerSmsEventObserver() {      
        if (smsObserver != null)
            return; 

        smsObserver = new ContentObserver(null) {             
            public void onChange(boolean selfChange) {   
                updateList();
            }
        };
        MyList.this.getContentResolver().registerContentObserver(
            Uri.parse("content://sms"), true, smsObserver);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:25:58.777

一个不是简单地`updateList();`从另一个线程调用，即 ContentObserver 线程。相反，你最好用`runOnUiThread();`like包裹它

```
runOnUiThread(new Runnable() {
    @Override
    public void run() {
        updateList();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T12:36:11.137

你可以创建`ContentObserver`传球

```
new Handler() 
```

This will make the `onChange` running on the looper of the main thread since you are creating the observer in the main thread.

# jquery - 如何使用文本输入去锚点？

> ID：12250396
> 
> 赞同：2
> 
> 时间：2012-09-03T15:11:13.377
> 
> 标签：jquery, input, textbox, anchor

我想使用 jQuery 通过文本框转到锚点，例如，我想使用这种形式：

```
<form id="gotoanchorform">
    <input id="gotoanchorinput" type="text" />
    <input type="submit" value="Go to anchor" />
</form> 
```

在这种形式中，我将输入锚点的名称，当我单击“转到锚点”按钮或按 Enter 键时，我希望页面向下滚动到该锚点：

```
<a name="targetAnchor" id="targetAnchor">Target</a> 
```

如何让它与 jQuery 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:20:48.787

```
 var anchor = $("#gotoanchorinput").val();
    var position = $("#"+anchor).offset();
    window.scrollTo(position.left, position.top); 
```

这段代码让你的页面滚动到用`#gotoanchorinput`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:18:28.087

只需这样做：

```
var url = $('#gotoanchorinput').val();    
$(location).attr('href',url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:18:56.047

尝试这样的事情：

```
$(function() {
    $('form#gotoanchorform').submit(function(e) {
        e.preventDefault();

        var desired = $('#gotoanchorinput').val();

        window.location.href = window.location.href + '#' + desired;

        // or

        $('html, body').animate({'scrollTop', $('a[name*="' + desired +'"').offset().top + 'px'}, 900);

        return false;
    });
}); 
```

因此，如果您键入“foo”并单击提交，页面将滚动到哪个名称属性包含“foo”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:21:44.230

HTML部分：

```
<form id="myForm" data-anchor="#myAnchor">
    <input type="text" />
    <input type="submit" value="Go to anchor" />
</form> 
```

*注意：data-x 属性是有效的 HTML。*

JS部分：

```
$(document).ready(function() {

    $('#myForm').submit(function(e){

        $(location).attr('href', $(this).attr('data-anchor'));

        return false;
    });
}); 
```

# ios - 在 IOS 5.1 上运行应用程序？

> ID：12250398
> 
> 赞同：-1
> 
> 时间：2012-09-03T15:11:29.733
> 
> 标签：ios, xcode, cocoa-touch, ios5, xcode4.2

我正在使用 XCode 4.2 和 IOS 5 来开发应用程序。此应用程序不包括 IOS 5.1 中提供的任何新功能。那么，如果我将这个应用程序提交到 App Store，用户可以下载它并在他们的 IOS 设备上运行 IOS 5.1 吗？

任何意见和建议表示赞赏。

非常感谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:17:26.713

是的，只要 Apple 不贬低您正在使用的任何东西（通常只发生在主要版本中），您的应用程序将继续向前兼容。总体而言，您的应用在 iOS 5 和 5.1 之间会很好，但请务必及时了解 Apple 发布的 API 差异，以便您可以在必要时进行更改。

作为当前不在 NDA 下的示例，这里是 iOS 4.3 - 5.0 API 差异的链接：[https ://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/index.html](https://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/index.html)

# list - Parent Unordered List Element Won't Link in Sidebar Menu

> ID：12250399
> 
> 赞同：1
> 
> 时间：2012-09-03T15:11:30.310
> 
> 标签：list, parent-child

If you visit this page you will find that you cannot click the parent page 'Agriculture' in the sidebar menu: [http://macroairfans.com/industries/agriculture/equine/](http://macroairfans.com/industries/agriculture/equine/)

You can click any of the other children elements but the parent element doesn't link.

Any help is appreciated. Thanks.

Raleigh

# javascript - amchart 柱形图上的 zoomToCategory

> ID：12250402
> 
> 赞同：1
> 
> 时间：2012-09-03T15:11:38.300
> 
> 标签：javascript, zooming, amcharts

我正在通过 amcharts 开发一个图表，我希望它选择某些范围，因为我在我的地图上处理超过 6000 个 x 值..我试图在我的地图上使用 zoomToCategory 控件但是当我使用它时地图没有出现.. :( ..任何原因???以下是我的代码。:)

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default3.aspx.cs" Inherits="Default3" %>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>

        <head>

            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>amCharts examples</title>
            <link rel="stylesheet" href="http://localhost/amcharts/images/style.css" type="text/css">
            <script src="http://localhost/amcharts/amcharts.js" type="text/javascript"></script>         
            <script type="text/javascript">

                var chart;

                var chartData = JSON.parse('<%=sjson%>');// [{ "Ip": "0", "Count": "10" }, { "Ip": "1", "Count": "11" }, { "Ip": "2", "Count": "12" }, { "Ip": "3", "Count": "13" }, { "Ip": "4", "Count": "14" }, { "Ip": "5", "Count": "15" }, { "Ip": "6", "Count": "16" }, { "Ip": "7", "Count": "17" }, { "Ip": "8", "Count": "18" }, { "Ip": "9", "Count": "19"}];

                AmCharts.ready(function () {
                    // SERIAL CHART
                    chart = new AmCharts.AmSerialChart();
                    chart.dataProvider = chartData;
                    chart.categoryField = "Ip";
                    chart.startDuration = 1;

                    // AXES
                    // category
                    var categoryAxis = chart.categoryAxis;
                    categoryAxis.labelRotation = 90;
                    categoryAxis.gridPosition = "Count";

                    // value
                    // in case you don't want to change default settings of value axis,
                    // you don't need to create it, as one value axis is created automatically.

                    // GRAPH
                    var graph = new AmCharts.AmGraph();
                    graph.valueField = "Count";
                    graph.balloonText = "[[category]]: [[value]]";
                    graph.type = "column";
                    graph.lineAlpha = 0;
                    graph.fillAlphas = 0.8;

                    graph.zoomToCategoryValues("1", "10");
                    chart.addGraph(graph);

                    chart.write("chartdiv");
                });
            </script>

        </head>

        <body>
            <div id="chartdiv" style="width: 100%; height: 400px;"></div>
        </body>

    </html> 
```

请帮我解决这个问题……在这个 grpah 上钻取 x 轴非常重要，因为它显示了大量数据……非常感谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:54:08.473

这适用于任何使用柱形图遇到此问题的人。我花了 2 天时间，但对于某些人来说，这可能是一个非常明显的答案，所以在这里，这段代码将 amcchart 滚动条添加到 javascript 中的柱形图中。:)

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>

        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>amCharts examples</title>
            <link rel="stylesheet" href="style.css" type="text/css">
            <script src="../amcharts/amcharts.js" type="text/javascript"></script>         
            <script type="text/javascript">
                var chart;

                var chartData = [{"Ip":"0","Count":"10"},{"Ip":"1","Count":"11"},{"Ip":"2","Count":"12"},{"Ip":"3","Count":"13"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"}];

                AmCharts.ready(function () {
                    // SERIAL CHART
                    chart = new AmCharts.AmSerialChart();
                    chart.dataProvider = chartData;
                    chart.categoryField = "Ip";
                    chart.startDuration = 1;
                    chart.pathToImages = "http://localhost/images/";
                    //scrollbar definition
                    var chartScrollbar = new AmCharts.ChartScrollbar();

                    // AXES
                    // category
                    var categoryAxis = chart.categoryAxis;
                    //categoryAxis.labelRotation = 90;
                    categoryAxis.gridPosition = "Count";

                    // value
                    // in case you don't want to change default settings of value axis,
                    // you don't need to create it, as one value axis is created automatically.

                    // GRAPH
                    var graph = new AmCharts.AmGraph();
                    graph.valueField = "Count";
                    graph.balloonText = "[[category]]: [[value]]";
                    graph.type = "column";
                    graph.lineAlpha = 0;
                    graph.fillAlphas = 0.8;

                    //add scrollbar to graph
                    chartScrollbar.graph = graph;
                    chartScrollbar.scrollbarHeight = 40;
                    chartScrollbar.color = "#FFFFFF";
                    chartScrollbar.autoGridCount = true;
                    chart.addChartScrollbar(chartScrollbar);

                    chart.addGraph(graph);

                    chart.write("chartdiv");
                });
            </script>
        </head>

        <body>
            <div id="chartdiv" style="width: 100%; height: 400px;"></div>
        </body>

    </html> 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T05:45:30.560

graph 没有 zoomToCategoryValues 方法，只有 chart 有。而且你不能在图表初始化之前调用这个方法。

您应该监听“init”或“dataUpdated”事件并调用一个方法来进行缩放：

```
// this line shoulf go to AmCharts.ready function:
chart.addListener("dataUpdated", zoomChart);

// this is a method which will be called after the event is fired:
function zoomChart() {
     chart.zoomToCategoryValues("1", "10");
} 
```

# svg - SVG中文本元素的垂直对齐

> ID：12250403
> 
> 赞同：154
> 
> 时间：2012-09-03T15:11:39.733
> 
> 标签：svg, vertical-alignment, w3c

假设我有 SVG 文件：

```
<svg width="1024" height="768" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <text x='20' y='60' style="font-size: 60px">b</text>
    <text x='100' y='60' style="font-size: 60px">a</text>
</svg> 
```

`a`我想以某种方式对齐and的顶部`b`。实际上，我希望我的定位是根据`roofline`而不是`baseline`！

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2013-04-14T09:19:13.057

根据 SVG 规范，仅`alignment-baseline`适用于`<tspan>`、`<textPath>`和. 我的理解是，它是用来抵消它们上面的物体的。我认为您正在寻找的是.`<tref>``<altGlyph>``<text>``dominant-baseline`

的可能值为 `dominant-baseline`：

> `auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge | inherit`

有关每个可能值的更多信息，请查看[W3C 对**主要基线**属性的建议。](http://www.w3.org/TR/SVG11/text.html#DominantBaselineProperty)

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2012-09-03T15:14:16.730

该`alignment-baseline`属性是您正在寻找的它可以采用以下值

```
auto | baseline | before-edge | text-before-edge | 
middle | central | after-edge | text-after-edge | 
ideographic | alphabetic | hanging | mathematical | 
inherit 
```

来自 w3c 的描述

> 此属性指定对象如何与其父对象对齐。此属性指定此元素的哪个基线与父元素的相应基线对齐。例如，这允许罗马文本中的字母基线在字体大小更改时保持对齐。它默认为与对齐基线属性的计算值同名的基线。也就是说，“表意”对齐点在块行进方向上的位置是“表意”基线在被对齐对象的基线表中的位置。

[W3C 资源](http://www.w3.org/TR/SVG11/text.html#AlignmentBaselineProperty)

不幸的是，虽然这是实现你想要的结果的“正确”方式，但 Firefox 并没有为 SVG 文本模块实现很多表示属性（['SVG in Firefox' MDN Documentation](https://developer.mozilla.org/en/docs/SVG_in_Firefox)）

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-03-04T09:36:46.503

attr("主要基线", "中央")

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2015-03-17T00:15:28.607

如果您在 IE 中对此进行测试，则不支持dominant-baseline 和alignment-baseline。

在 IE 中使文本居中的最有效方法是在“dy”中使用类似这样的内容：

```
<text font-size="ANY SIZE" text-anchor="middle" "dy"="-.4em"> Ya Text </text> 
```

负值将其向上移动，dy 的正值将其向下移动。我发现使用 -.4em 对我来说似乎比 -.5em 更垂直居中，但你会对此做出判断。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-01-25T20:51:23.080

在查看了[SVG Recommendation](http://www.w3.org/TR/SVG/text.html#TextElementDYAttribute)之后，我了解到基线属性旨在相对于其他文本定位文本，尤其是在混合不同字体和/或语言时。如果您想发布文本以使其位于顶部，`y`那么您需要使用`dy = "y + the height of your text"`.

# java - Java 数组列表问题

> ID：12250404
> 
> 赞同：0
> 
> 时间：2012-09-03T15:11:39.937
> 
> 标签：java, arraylist

动物.java

```
public class animals{
    static ArrayList<animals> anV  = new ArrayList<animals>();
    static ArrayList<animals> anF = new ArrayList<animals>();
    ......
    ..
    .
}

public void metod1(String tur){
    ArrayList<animals> an;

    if(tur.equals("V")) an = anV;
    else           an = anF;

    for (animals data : an) {
        an.add(blah blah);
        ..........
    }
} 
```

正常添加工作，但当 tur == "V" 然后列表到 > anV 时不添加。添加到**列表，而不是 anV**。

我改变了 tur.equals 但不起作用。因为程序添加到列表中，所以我想添加到 anV。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:13:02.337

```
if(tur == "V") 
```

字符串比较应该使用`eqauls()`而不是`==`

除非您要比较的字符串是`String`文字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T15:13:49.327

`==`可用于比较原始类型，例如`char`s 和`int`s；但不是一个`String`，这是一个`Object`。如果你用它来比较`String`s，它会比较它们的引用，而不是它们的内容。

因此，要比较`String`s，请使用[`String#equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)：

```
if (tur.equals("V")) {

} 
```

此外，您正在向`Collection`正在迭代的 a 添加元素。你确定这里没有错别字？

```
for (animals data : an) {
    an.add(blah blah);
} 
```

# matlab - 输出列向量 $[f(x_1, y_1 ,z_1); f(x_2, y_2, z_2); ... ]$ 来自输入矩阵

> ID：12250408
> 
> 赞同：0
> 
> 时间：2012-09-03T15:11:54.623
> 
> 标签：matlab

好的，我是 MATLAB 的新手，我的朋友在作业问题上寻求帮助。我只是通过摆弄文档并猜测和检查得出了一个答案，但我希望有人能告诉我一个更好的方法。

这是设置：给你一张桌子

```
x   y   z
x_1 y_1 z_1
x_2 y_2 z_2
x_3 y_3 z_3
x_4 y_4 z_4 
```

我们存储在一个矩阵`M`中。我们有一个函数 $f(x,y,z)=x^2+yz^3$，尚未在 MATLAB 中定义，我们要获取列向量

```
[ f(x_1, y_1, z_1)
  f(x_2, y_2, z_2)
  f(x_3, y_3, z_3)
  f(x_4, y_4, z_4) ] 
```

问题表明它必须在**单个表达式**中完成。

我想出的解决方案是

```
arrayfun(@(x,y) x^2+y-z^3, M(:,1), M(:,2), M(:,3)) 
```

作为一名程序员（不在 MATLAB 中），我说这个解决方案看起来像垃圾。在 MATLAB 中是否有更好/更被接受的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:26:26.977

如果你的函数`f(x,y,z)`是固定的，你可以直接对矩阵元素进行操作，即你可以写

```
M(:,1).^2 + M(:,2) - M(:,3).^3 
```

得到所需的输出向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:08:21.113

如果 f 不是固定函数，我会选择这样的东西

```
g = @(row) f(row(1), row(2), row(3));
arrayfun(@(r) g(M(r,:)), 1:size(M,1)); 
```

# jquery - jquery $.GET 加载顺序

> ID：12250409
> 
> 赞同：1
> 
> 时间：2012-09-03T15:12:04.063
> 
> 标签：jquery, get, load

我正在为滑块加载 jquery 中的所有外部页面。问题是它以不同的顺序加载。我需要做的是对页面的加载进行排序

```
$.get("page1.php", function( my_var ) {
    $('#slider').append($('.content', my_var));
});
$.get("page2.php", function( my_var ) {
    $('#slider').append($('.content', my_var));
});
$.get("page3.php", function( my_var ) {
    $('#slider').append($('.content', my_var));
}); 
```

有时 page3 在 page2 之前加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:16:42.937

您可以尝试嵌套调用。当页面完成加载时，加载下一个.. 像这样的东西：

```
$.get("page1.php", function( my_var ) {
    $('#slider').append($('.content', my_var));
    $.get("page2.php", function( my_var ) {
        $('#slider').append($('.content', my_var));
        $.get("page3.php", function( my_var ) {
            $('#slider').append($('.content', my_var));
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:16:30.097

你可以一一加载。

```
$.get("page1.php", function( my_var ) {
    $('#slider').append($('.content', my_var));
    $.get("page2.php", function( my_var ) {
        $('#slider').append($('.content', my_var));
        $.get("page3.php", function( my_var ) {
              $('#slider').append($('.content', my_var));
         });
    });
}); 
```

或者，如果您可以使用包装容器，则可以使用`.load`方法，它允许您在 url 中使用选择器。而且这个解决方案会让3个内容同时加载，但位置是固定的。

```
var slider = $('#slider');
$('<div>').appendTo(slider).load('page1.php .content');
$('<div>').appendTo(slider).load('page2.php .content');
$('<div>').appendTo(slider).load('page3.php .content'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:16:35.343

它是这样工作的，因为`$.get`它是异步方法（它是 ajax 请求的简写）。您可以使用[`$.when`](http://api.jquery.com/jQuery.when/)方法来测试请求是否已完成：

```
var getPage1 = $.get("page1.php", function( my_var ) {
    $('#slider').append($('.content', my_var));
});

// you can pass 1 or more deffereds
$.when(getPage1).done(function() {
    // do something
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T15:14:24.070

发生这种情况是因为您正在处理异步执行。Ajax 调用的顺序无法保证。在前一个的回调中调用每个 $.get 。就像是：

```
$.get("page1.php", function( my_var1 ) {
    $('#slider').append($('.content', my_var1 ));
    $.get("page2.php", function( my_var2 ) {
        $('#slider').append($('.content', my_var2 ));
        $.get("page3.php", function( my_var3 ) {
            $('#slider').append($('.content', my_var3 ));
        });
    });
}); 
```

# c# - 表达式方法，如何实现大于

> ID：12250414
> 
> 赞同：2
> 
> 时间：2012-09-03T15:12:23.960
> 
> 标签：c#, .net, predicate

我有这段代码：

```
var parameter = Expression.Parameter(typeof(T));
 Expression.Call(
    Expression.PropertyOrField(parameter, "MyProperty"),
    "Equals", null,
    Expression.Constant(Convert.ToInt32("MyValue"))) 
```

有没有办法实现`>`，，`>=`而不是？`<``<=``Equals`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:13:31.643

你想要像[`Expression.GreaterThanOrEqual`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.greaterthanorequal). 如果您尝试实现`==`我也会使用[`Expression.Equal`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.equal)，而不是生成对（多态）`Equals`方法的方法调用。

# iphone - NSFetchedResultsController，修改 NSFetchRequest？

> ID：12250420
> 
> 赞同：2
> 
> 时间：2012-09-03T15:12:42.853
> 
> 标签：iphone, cocoa-touch, nsfetchedresultscontroller, nsfetchrequest

我已经设置了一个`NSFetchRequestController`使用三个预计算机 objectID 作为`NSPredicate`其`initWithFetchRequest:`参数的。

```
NSManagedObjectContext *moc = [[self managedDocument] managedObjectContext];
[self setFetchedResultsController:[[NSFetchedResultsController alloc]initWithFetchRequest:fRequest
                                                                     managedObjectContext:moc
                                                                       sectionNameKeyPath:nil
                                                                                cacheName:nil]]; 
```

我的问题是，一旦我设置了我的，当新数据在数据库中可用时，`NSFetchedResultsController`有没有办法修改控制器使用的。`NSFetchRequest`我注意到该请求是只读的，所以就这样了，我还有其他选择吗？

# 编辑：

我在想我需要更改整个请求，但也许我可以使用现有的 NSFetchedResultsController 和现有的 NSFetchRequest 设置一个新的 NSPredicate，这样可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-19T17:27:16.520

来自 Apple 文档： [https ://developer.apple.com/library/ios/documentation/CoreData/Reference/NSFetchedResultsController_Class/](https://developer.apple.com/library/ios/documentation/CoreData/Reference/NSFetchedResultsController_Class/)

**修改获取请求**

您不能简单地更改获取请求来修改结果。如果要更改获取请求，则必须：

如果您正在使用缓存，请将其删除（使用 deleteCacheWithName:)。

如果要更改获取请求，通常不应使用缓存。

更改获取请求。（修改谓词）

调用 performFetch:。

# matlab - MATLAB中的正交距离回归

> ID：12250422
> 
> 赞同：1
> 
> 时间：2012-09-03T15:12:52.557
> 
> 标签：matlab, least-squares

给定两个随机变量/测量值 ( *x* , *y* )，均测量有误差（变量误差情况），
MATLAB 中是否有一个例程来计算回归线*y* ( *i* )= *a的估计量 (* *a* , *b* ) · *x* ( *i* )+ *b*使用正交距离回归的方法？

 ***这是我对最大似然估计器的实现：

```
x= [1.0, 0.6, 1.2, 1.4, 0.2];
y=[0.5, 0.3, 0.7, 1.0, 0.2];

mx = mean(x);
my = mean(y);
p = (x(:) - mx) .^ 2;
q = (y(:) - mx) .^ 2;
w = p .* q;
sxx = sum(p);
syy = sum(q);
sxy = sum(w);    w=p.*q;   sxy=sum(w);

l = 1;  %# orthogonal distance regression
a = (syy - l * syy + sqrt((syy - l * sxx) ^ 2 + 4 * l * sxy^2)) / (2 * sxy);
b = my - a * mx; 
```

* * *

**编辑**（发给 EitanT）：

这是我的估计器和你的估计器的比较：

![比较](../Images/1742d39638c0adbac2af5d606205b924.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T17:19:02.973

*MATLAB 没有完全*类似的内置函数，但您可以轻松找到估计量*a*和*b*的[`svd`](http://www.mathworks.com/help/techdoc/ref/svd.html)近似值^(1,2)：

```
data = [x(:), y(:)];
[U, S, V] = svd(data - repmat(mean(data), size(data, 1), 1), 0);
a = -V(1, end) / V(2, end);
b = mean(data * V(:, end)) / V(2, end); 
```

这实际上是正交距离回归方法。

**编辑＃1：**
这是原始数据的图，以及我的估算器和您的估算器。

![比较](../Images/fe9a7d217eda1109a35fde462837ef69.png)

您的估算器非常不准确，这让我相信您的实施存在缺陷。

**编辑＃2：**

如果 的计算`a`被更正为，这是一个更新的图：

```
a=(syy-l*syy+sqrt((syy-l*sxx)^2+4*l*sxy^2)) / (2*sxy);  %# Forgot parentheses! 
```

![在此处输入图像描述](../Images/1694e8f8454ec1a09adbf851440034fd.png)

更接近，但仍然不如我的准确。

**编辑＃1：**

您可以进一步提高 和 的准确性，`sxx`如下所示：`syy``sxy`

```
cov_mat = cov(x, y);
sxx = cov_mat(1, 1);  %# Same as: sxx = var(x);
syy = cov_mat(2, 2);  %# Same as: syy = var(y);
sxy = cov_mat(1, 2);  %# Same as: sxy = cov_mat(2, 1); 
```

* * *

^(¹ [Gene H. Golub 和 Charles F. Van Loan（1996 年）*“矩阵计算”*（第 3 版）。约翰霍普金斯大学出版社。第 596 页](http://books.google.co.nz/books?id=mlOa7wPX6OYC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false))
^(^(。2) [http://en.wikipedia.org/wiki/Total_least_squares](http://en.wikipedia.org/wiki/Total_least_squares#Algebraic_point_of_view))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-04T10:09:37.507

我运行了上面的算法：(1) 最大似然估计器 (2) 正交距离回归方法 (3) MINITAB 的正交回归都针对相同的五个 (x,y) 数据点。我将每个回归的残差的绝对值相加，得到以下结果： red green black 0.7748 0.5137 0.4485
其中红线是方法（1），绿色是 MINITAB 方法，（3）黑线是 svd 正交距离回归。黑线给出了最低的绝对值残差和。这是一个情节的比较：

[在此处输入图像描述](http://i.stack.imgur.com/6S90W.jpg)***

# java - 从客户端调用时，jax-ws DataHandler getName() 为空白

> ID：12250423
> 
> 赞同：1
> 
> 时间：2012-09-03T15:12:52.423
> 
> 标签：java, download, jax-ws, datahandler

我在将 DataHandler 与 jax-ws 一起使用时遇到问题。当客户端调用 DataHandler 的 getName() 方法时，返回一个空字符串。在服务器端，它的价值是正确的。这里我报告一下服务器端和客户端的部分代码：

服务器端

```
public @XmlMimeType("application/octet-stream") DataHandler fileDownload(String name) {
   try {
         File file = new File("/tmpwk/share/SharedRepository/apps-data/jaxws-large_upload/" + name);
         FileDataSource fds = new FileDataSource(file);
     DataHandler dh = new DataHandler(fds);
         // Note: getName(), return a String with file name.
     System.out.println("File Name = " + dh.getName() );
     System.out.println("Content Type  " + dh.getContentType());

     System.out.println("quiting from downloadFile...");    
     return dh;
    } catch(Exception e) {
        throw new WebServiceException(e);
    }

} 
```

客户端

```
public void download() throws IOException {
    System.out.println(">>>>> download <<<<<<");
    MTOMFeature feature = new MTOMFeature();
    UploadImplService service = new UploadImplService();
    UploadImpl proxy = service.getUploadImplPort(feature);        
    Map<String, Object> ctxt = ((BindingProvider)proxy).getRequestContext();
    ctxt.put(JAXWSProperties.HTTP_CLIENT_STREAMING_CHUNK_SIZE, 8192); 

    DataHandler dh = proxy.fileDownload("file.bin");
    InputStream in = dh.getInputStream();

    //Note:  getName() return a empty string, why ????
            System.out.println("File Name = " + dh.getName());
    System.out.println("Content Type = " + dh.getContentType());

    File file = new File("/tmp/dfile.bin");
    OutputStream out = new FileOutputStream(file);

    // Transfer bytes from in to out
    byte[] buf = new byte[8192];
    int len;
    while ((len = in.read(buf)) > 0) {
        out.write(buf, 0, len);
    }
    in.close();
    out.close();
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T21:36:33.547

今天我遇到了同样的情况。幸运的是，我找到了原因。

如果您深入调试源代码，您会发现在 JAX-WS 中，DataHandler 类型的参数或结果将被包装到一个 MIMEPartStreamingDataHandler 中。

MIMEPartStreamingDataHandler 的数据源是一个内部类，称为 StreamingDataSource。由 DataHandler 定义，它的 getName 方法应该由它的 dataSource 委托。但是，StreamingDataSource 的getName 方法，只是返回一个空的String ""。就像：

```
public String getName() {
    return "";
} 
```

您可以在[此处查看](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/xml/internal/ws/encoding/MIMEPartStreamingDataHandler.java#MIMEPartStreamingDataHandler.StreamingDataSource)源代码概览。

此问题的一种可能解决方案是：

1.  为您的上传服务方法提供另一个参数以指定其名称。
2.  使用 String 属性包装您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:08:15.253

我也遇到了同样的问题，但是我如何使用 StreamingDataHandler，并且我的代码有效。

```
dh=proxy.get("file.bin");   //WS CALL
if( dh!=null){          
    StreamingDataHandler sdh = (StreamingDataHandler)dh;            
    File file = new File(filePath+ File.separator +fileName);
    sdh.moveTo(file);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T01:55:28.170

我有同样的问题，它让我忙了一段时间。尽管看起来很奇怪，但我终于发现文件名是在 DataHandler 对象的 contentType 属性中提供的！以下是导出文件名的方法：

```
String contentType = dataHandler.getContentType();
//if you print out contentType, it is something like this:  "application/pdf; name=9ad22859-cdc9-4de5-b374-2c36acc5c253.pdf"
String fileName = (contentType.substring(contentType.indexOf("name=") + 5)).trim(); 
```

干杯!

# c# - .Net 示例应用程序演示了浮动/可停靠面板的使用

> ID：12250427
> 
> 赞同：0
> 
> 时间：2012-09-03T15:13:05.920
> 
> 标签：c#, vb.net, visual-studio-2010, user-interface, monodevelop

我正在寻找 tyo 编写我的第一个 .Net 应用程序，来自 *nix 背景。

我的应用程序将具有可停靠/浮动面板，我正在寻找一个示例应用程序来帮助我入门。在理想情况下，我想使用 monodevelop 进行开发，但 *nix GUI 工具非常糟糕，所以看起来我必须适应 VisualStudio（因此可能会将应用程序限制在 Windows 上）。

示例应用程序可以用 C# 或 VB.Net 编写（我熟悉这两种语言）。

我将不胜感激在为此类应用程序开发 GUI 时为我指明正确方向的任何链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:17:38.227

请使用以下链接进行演示：

[http://avalondock.codeplex.com/](http://avalondock.codeplex.com/)

如果您想尽可能有效，您可能必须考虑使用 WPF。此外，在正确的环境中，您可以同时编译 windows 和 windows mobile。

[http://www.icsharpcode.net/OpenSource/SD/](http://www.icsharpcode.net/OpenSource/SD/)

使用它进行编程，它具有相关的面板和文档。如果您不能使用 WPF，请尝试这个并返回给我 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:42:05.313

您可以使用 GTK 作为用户界面来保持可移植性。关于对接快速搜索揭示[了 github 上的示例](https://github.com/amolenaar/MonoDockingWidget)

# symfony - Doctrine2 没有注解的原生 SQL 别名

> ID：12250432
> 
> 赞同：2
> 
> 时间：2012-09-03T15:13:33.173
> 
> 标签：symfony, geolocation, doctrine-orm, alias

我对 Doctrine 2 中的本机 SQL 有疑问。

主要问题是别名不起作用。我只能通过添加注释将 SQL 别名映射到实体。如果我这样做，这很好。但这在生产中并不是很好，因为我必须先删除数据库中的字段。

我想建立一个以米为单位的基于位置的距离的查询，但到目前为止在教义中这样做并不实际。我的意思是从查询中获取别名并不是什么特别的事情。

`SELECT *, (RADIANS( ? )) * COS(RADIANS(latitude)) * COS(RADIANS(longitude) - RADIANS( ? )) + SIN(RADIANS( ? )) * SIN(RADIANS(latitude)) AS distance` 在我看来没什么特别的

为什么我必须一个人处理这件事？

# jquery - 获取链接的 id 并将其传递给 jQueryUI 对话框小部件

> ID：12250436
> 
> 赞同：0
> 
> 时间：2012-09-03T15:13:40.043
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我正在使用 jQueryUI 的对话框小部件。现在，使用 jQuery+AJAX 从 SQL 数据库中获取链接，这就是我使用“live”的原因

```
$(function() {
    var $dialog = $('#report')
            .dialog({
                autoOpen: false,
                resizable: false,
                modal: true,
                height: 410,
                width: 350,
                draggable: true
            })
        //store reference to placeholders
        $uid = $('#reportUniqueId');

    $('.reportopen').live("click", function (e) {
        $dialog.dialog('open');
        var $uid = $(this).attr('id');
        e.preventDefault();
    });
}); 
```

我的问题是，如何将`id`触发对话框小部件的链接传递给对话框本身？链接是这样设置的：

```
<td align="left" width="12%">
  <span id="notes">
    [<a href="javascript:void(0)" class="reportopen" id="<?=$reportId;?>">Spam</a>]
  </span>
</td> 
```

对话框是这样设置的：

```
<div id="report" title="Inquire now">
HAHAHAHAHA
<span id="reportUniqueId"></span>
</div> 
```

我希望在对话框`id`的一部分中传递和生成。`<span id="reportUniqueId"></span>`

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:36:59.763

```
$(".reportopen").click(function(){
var monId= $(this).attr("id");
$("#reportUniqueId").text(monId);
$dialog.dialog('open');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:59:56.930

当您使用 jQuery`click`处理程序时，它会将一个传递 给您在参数中`event`命名的函数。`e`

如果你愿意，你可以检查这个对象`console.log`，但重要的是它`e.target`指的是触发点击事件的 DOM 元素。我确信您可以使用 jQuery 首先将其转换为包装的集合/元素，即：

```
$(e.target) 
```

那么您可以使用其他评论中的技术获取其 ID，即：

```
$(e.target).attr('id') 
```

请让我知道这是否有效。

# mysql - 等待本地主机

> ID：12250437
> 
> 赞同：1
> 
> 时间：2012-09-03T15:13:42.557
> 
> 标签：mysql, ruby-on-rails, windows-7

当我访问“localhost:3000”时，我的浏览器显示“Waiting for localhost...”并且永远不会返回。

以下是日志显示的内容：

```
Started GET "/" for 127.0.0.1 at Mon Sep 03 10:47:33 -0400 2012
Connecting to database specified by database.yml 
```

我的 database.yml 内容：

```
development:
  adapter: mysql2
  encoding: utf8
  database: chairsales_development
  username: root
  password: scrubbed
  host: localhost 
```

我可以使用此用户/密码从命令行很好地连接到 MySql 5.5。我尝试将端口 3306 添加到配置 yml 文件中，结果没有任何变化。

routes.rb 文件仅包含以下地图行：

```
root :to => "home#index" 
```

我该如何进一步诊断并获得有关正在发生的事情的更多信息？有没有办法从 rails 本身的日志中获得更详细的结果？

Windows 7 + MySQL 5.5 + Rails 3.2.8

MySQL 根目录中 my.ini 文件的内容：

```
[client]
#password   = your_password
port        = 3306
socket      = /tmp/mysql.sock

# The MySQL server
[mysqld]
port        = 3306
socket      = /tmp/mysql.sock
skip-external-locking
key_buffer_size = 16K
max_allowed_packet = 1M
table_open_cache = 4
sort_buffer_size = 64K
read_buffer_size = 256K
read_rnd_buffer_size = 256K
net_buffer_length = 2K
thread_stack = 128K 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:09:54.280

检查您的`/etc/mysql/my.cnf`并查看服务器是否绑定到 IP 地址或套接字或两者。当它绑定到套接字时，使用套接字绑定到服务器而不是使用网络。您可以通过传递`socket /path/to/socket`而不是`host`参数来做到这一点。

# sql-server - 是否有免费的 Web UI 可以绑定到 sql server 数据库并允许基本的列过滤和数据导出？

> ID：12250448
> 
> 赞同：6
> 
> 时间：2012-09-03T15:14:22.080
> 
> 标签：sql-server, web-applications

我被要求找到可以转储到 SQL Server 数据库之上并允许非技术用户浏览它的基于 Web 的预打包 UI。用户必须能够：

*   浏览表数据。
*   按列过滤结果。
*   保存他们应用的过滤器。
*   将他们正在查看的数据导出到 Excel。
*   必须免费用于商业用途。
*   无需写入或编辑数据。

有没有这样的软件包可用？

到目前为止，我已经查看了[OData Explorer](http://www.silverlight.net/content/samples/odataexplorer/default.html)，但找不到保存或导出过滤数据的方法。

**编辑：** 理想情况下，它应该是基于 Microsoft 的 .Net/Silverlight 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:36:07.707

虽然它并不完全符合上述所有要求，但我们选择使用名为[PowerPivot](http://www.microsoft.com/en-us/bi/powerpivot.aspx)的 Excel 插件。我们可以轻松创建一个使用我们的数据库的 OData 服务，然后我们的用户可以直接通过 excel 访问数据。

# iphone - 你管类别列表使用 Gdata

> ID：12250453
> 
> 赞同：0
> 
> 时间：2012-09-03T15:14:50.620
> 
> 标签：iphone, gdata

我正在使用 Gdata 在您的电子管上上传视频。

我需要向用户列出所有类别并为特定视频选择一个我们可以获取您的类别列表吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:29:25.927

我可以通过这种方式获取列表。不知道还有没有别的办法。我们可以通过此链接获取 XML 格式的类别列表

[http://gdata.youtube.com/schemas/2007/categories.cat](http://gdata.youtube.com/schemas/2007/categories.cat)

获取包含此 URL 内容的数据，

```
 NSURL *url=[[NSURL alloc] initWithString:[NSString stringWithFormat:@"http://gdata.youtube.com/schemas/2007/categories.cat"]];
NSData *data=[[NSData alloc] initWithContentsOfURL:url];
NSString *str=[[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; 
```

您需要对其进行解析，并且可以从 @"label" 值中获取它。

谢谢。

# c# - 命名代表 iCal 对象的类

> ID：12250454
> 
> 赞同：2
> 
> 时间：2012-09-03T15:15:00.583
> 
> 标签：c#, naming-conventions

我相信很多人都采用了这样一种方法，即接口在前面加上一个`I`，因此命名类`iCal`会破坏当前的命名约定，因为它不是`Cal`（或者它是？）的接口。我有一个快速的谷歌，我无法破译`i`它代表什么，因为这似乎是用它的全名替换它的最直接的选择，`i`假设它是什么的缩写。非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:17:10.410

我怀疑“i”代表“互联网”。

您可能想在指定 iCalendar 的[RFC 5545](http://www.ietf.org/rfc/rfc5545.txt)`Rfc5545Calendar`之后调用事物等。（RFC 2445 有一些非常讨厌的位；也许取代它的 5545 更好......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:19:39.867

对我来说，iCal 和 ICal 是两个不同的东西。在我看来，iCal 并没有打破 .net 接口命名约定。

只是为了根据亚当的评论进行澄清——我并不是说要使用它，因为亚当指出它打破了所有类型都被帕斯卡大小写的惯例。我的观点是 iCal 并不意味着接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:17:35.513

我认为在这种情况下`iCal`不会破坏任何约定，因为应该调用它`ICal`来破坏接口命名约定。我认为由于 Interfaces namig 约定的问题，编写此代码的程序员不想造成任何问题，而是想写一个首字母缩略词，其中`i`另一个单词的首字母。

# c# - 会话关闭后无法访问引用的对象

> ID：12250458
> 
> 赞同：2
> 
> 时间：2012-09-03T15:15:28.040
> 
> 标签：c#, nhibernate

我有一个类`DepartmentEntity`，包括一个名为`Company(CompanyEntity)`波纹管的属性：

```
public class DepartmentEntity
{
    public virtual int ID { get; set; }
    public virtual string Name { get; set; }
    public virtual DepartmentEntity Parent { get; set; }
    public virtual CompanyEntity Company { get; set; }
}

public class CompanyEntity
{
    public virtual int ID { get; set; }
    public virtual string Name { get; set; }
} 
```

`DepartmentEntity.hbm.xml`如下：

```
<?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
        <class name="HS.DepartmentEntity, HS" table="DepartmentInfo" lazy="true">
            <id name="ID">
                <generator class="identity" />
            </id>
            <property name="Name" not-null="true" />
            <many-to-one name="Parent" column="ParentID" class="HS.DepartmentEntity, HS" cascade="none" unique="true" not-found="ignore" lazy="no-proxy" />
            <many-to-one name="Company" column="CompanyID" class="HS.CompanyEntity, HS" cascade="none" unique="true" not-found="ignore" lazy="no-proxy" />
        </class>
    </hibernate-mapping> 
```

`CompanyEntity.hbm.xml`如下：

```
<?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
        <class name="HS.CompanyEntity, HS" table="CompanyInfo" lazy="true">
            <id name="ID">
                <generator class="identity" />
            </id>
            <property name="Name" not-null="true" />
        </class>
    </hibernate-mapping> 
```

我尝试了下面的代码：

```
IList<DepartmentEntity> list; 
using(ISession session = GetSession()) 
{ 
    string hql = "FROM DepartmentEntity as dpe join fetch dpe.Company"; 
    list = session.CreateQuery(hql).List<DepartmentEntity>(); 
} 
```

会话关闭后，`Company`无法访问属性，但如果列表方法只找到一条记录，则`Company`可以访问属性，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:35:26.123

NHibernate 使用会话对象来延迟加载导航属性。当您第一次访问导航属性时，NHibernate 访问数据存储并使用会话获取对象的值。当会话关闭时，尝试访问该属性会引发类型异常`NHibernate.LazyInitializationException`。

我建议您在需要访问 Company 属性时尝试保持会话打开，或者您可以关闭应用程序的延迟加载（这可能会降低性能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T15:22:06.153

我假设您的问题是在关闭会话之后，您正在尝试加载惰性属性。所以你可以这样做：

```
 if(!NHibernateUtil.IsInitialized(object.Lazy_property) )

         NHibernateUtil.Initialize(object.Lazy_property); 
```

**但是**它会抛出“集合不与任何会话关联”的异常，因此您必须打开一个会话，将对象添加到会话（我通常使用 session.saveorUpdate(object)），然后初始化惰性属性。

```
 if(!NHibernateUtil.IsInitialized(object.Lazy_property) ) 
```

{

```
 //open a session 
        session.SaveorUpdate(object);
        NHibernateUtil.Initialize(object.Lazy_property);
        //close the session 
```

}

**但是**您仍然可以得到一个异常“具有相同 ID 的另一个实例正在会话中”，因此您必须检查另一个具有相同 ID 的实例是否正在会话中。如果您浏览不同的文档，他们建议您在将对象添加到会话之前检查 session.contains(object)。

```
 if(!NHibernateUtil.IsInitialized(object.Lazy_property) ) 
```

{

```
 //open a session 
         if (session.Contains(object))
             session.evict(object);
        Session.SaveorUpdate(object);
        NHibernateUtil.Initialize(object.Lazy_property);
        //close the session 
```

}

**但**它仍然不能解决问题。因为 Contains 方法适用于不在 ID 上的实例。所以一个好的方法是使用 Load 方法：

```
 if (!NHibernateUtil.IsInitialized(object.Lazy_property))
     {
      //open a session
       Class1 temp_object= lSession.Load<Class1>(object.ID);
       if (temp_object.ID == Object.ID)
            Session.Evict(lProgressItemType);

       Session.SaveOrUpdate(this);
       NHibernateUtil.Initialize(ProxyMilestoneList);
      //close session
       } 
```

最好的方法是同时使用 Load 和 Contains ：

```
 if (!NHibernateUtil.IsInitialized(object.Lazy_property))
     {
      //open a session
       Class1 temp_object= lSession.Load<Class1>(object.ID);
       if (temp_object.ID == object.ID && !Session.Contain(object))
            Session.Evict(lProgressItemType);

       Session.SaveOrUpdate(this);
       NHibernateUtil.Initialize(ProxyMilestoneList);
      //close session
       } 
```

因为仅通过检查 ID，您就可以从会话中删除您想要处理的实例，然后再次将其添加到会话中。它不会引发任何异常，但您两次访问数据库。

# mysql - 简单但缓慢的查询

> ID：12250459
> 
> 赞同：3
> 
> 时间：2012-09-03T15:15:33.833
> 
> 标签：mysql, database, database-design

我有这个在 0.55 秒内运行的简单查询。

```
SELECT tr.*

FROM Tournament_Result tr, Game g, Tournament t
LEFT JOIN Tournament_Type tt ON t.intType = tt.intTournamentType

WHERE tr.intTournamentId = t.intTournamentId
AND t.intGameId = g.intGameId
AND t.strStatus = 'live'

ORDER BY dtmCreated DESC 
```

所有连接都是键，主键或索引键。如果我删除了左连接“LEFT JOIN Tournament_Type tt ON t.intType = tt.intTournamentType”，查询会立即运行。

所以我认为它必须是“t.intType = tt.intTournamentType”连接，但我检查了两个键都是不合适的。不知道在这里做什么。我什至尝试过直接加入，它总是会减慢速度的 Tournament_Type 表。我什至在上面运行了“优化”命令。

有任何想法吗？

提前致谢！

阿明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:03:12.837

查询中缺少某些内容。**Tournament_Type** 表是 *LEFT JOINED*并且

**Tournament_Type**表中的 任何*字段*也没有用于任何其他联接或 SELECT 中

 **如果您要从**Tournament_Type** 表中添加一列以显示在结果中

```
SELECT Tournament_Result.*,
(select <<Col1>> from Tournament_Type where Tournament_Type.intTournamentType=t.intType)

FROM  Game 
inner join Tournament on Tournament.intGameId = Game.intGameId
inner join Tournament_Result on Tournament_Result.intTournamentId = Tournament.intTournamentId
WHERE Tournament.strStatus = 'live'
ORDER BY dtmCreated DESC 
```**

# r - 光栅化 ESRI shapefile 有孔但 FALSE 孔槽

> ID：12250471
> 
> 赞同：0
> 
> 时间：2012-09-03T15:16:39.240
> 
> 标签：r, gis, geospatial

我有一个 shapefile（显示北海不同的沉积物类别），用`readOGR()`. 它在许多多边形中有很多“应该是什么”的孔，但是使用`rasterize()`确实消除了所有孔，因为它们没有`TRUE`在孔槽中标记。使用`rasterize(...,fun='first')`没有成功。尽管如此，QGIS 很好地显示了这些漏洞。此外，`over()`正确评估字段值，例如，在一个洞中，可能利用插槽“绘图顺序”，这就是为什么我想出类似的东西：

```
for (i in 1:ncell(raster)){
    coo<-xyFromCell(raster,i,spatial=T)
    col<-colFromX(ra,coo@coords[1,1])
    row<-rowFromY(ra,coo@coords[1,2])
    proj4string(coo)<-proj4string(shape)
    n<-over(coo,shape)
    raster[col,row]<-n$Prime_FOLK
} 
```

绕过光栅化，但需要 50 天才能完成。

所以这是我的问题：

有没有人经历过类似的事情并找到了解决方法？

（我本来希望包含示例数据，但`dput()`在 SpatialPolygons 上失败了？！？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:22:07.360

是的。我有同样的问题，没有正确地光栅化孔，因为它们没有正确指定。对于我一直使用的形状文件，第一个多边形始终是主多边形，第二个到最后一个是孔。如果您不是这种情况，则这可能不适用于您的情况。这是我编写的将所有非第一个多边形更改为holes=T的代码：

```
## poly.dat is the SpatialPolygonsDataFrame

fix.holes<-function(poly.dat){
  n.poly.all<-numeric()
  for (k in 1:nrow(poly.dat@data)){
    n.poly.all[k]<-length(poly.dat@polygons[[k]]@Polygons)
  }
  has.hole<-which(n.poly.all>1)
  n.poly<-n.poly.all[has.hole]

  for (k in 1:length(has.hole)){
    for (m in 2:n.poly[k]){
      poly.dat@polygons[[has.hole[k]]]@Polygons[[m]]@hole<-T
    }
  }
  return(poly.dat)
} 
```

# java - 如何在 Spring 中解码自定义命名空间？

> ID：12250474
> 
> 赞同：2
> 
> 时间：2012-09-03T15:16:46.610
> 
> 标签：java, spring

我有时会在 Spring 中使用自定义命名空间。就像 CXF 或 ActiveMQ 一样。

这是我如何声明我的嵌入式 ActiveMQ 代理服务器的示例：

```
<amq:broker useJmx="false" persistent="true">
    <amq:transportConnectors>
        <amq:transportConnector uri="${mobilepush.activemq.broker.transport.connector.uri}" />
    </amq:transportConnectors>
    <amq:persistenceAdapter>
        <amq:kahaPersistenceAdapter directory="${mobilepush.activemq.broker.queue.persistence.directory}" maxDataFileLength="33554432"/>
    </amq:persistenceAdapter>
</amq:broker> 
```

我对 Spring 的自定义命名空间了解不多，但在我看来，这些命名空间只是为更详细的 Spring bean 声明提供了一个“快捷方式”。

一些像 Xebia Management Extras 这样的库在他们的文档中提供了自定义命名空间和原始 spring 实现之间的等价性：

```
<management:jms-connection-factory-wrapper 
             id="connectionFactory" 
             connection-factory="rawConnectionFactory" /> 
```

等于：

```
 <bean id="connectionFactory" class="fr.xebia.management.jms.SpringManagedConnectionFactory">
      <property name="connectionFactory" ref="rawConnectionFactory" />
   </bean> 
```

[http://code.google.com/p/xebia-france/wiki/ManagedJmsConnectionFactory](http://code.google.com/p/xebia-france/wiki/ManagedJmsConnectionFactory)

* * *

但有时自定义命名空间文档不够精确，我想了解 Java 类的幕后情况......

所以我想知道的是如何获得自定义命名空间使用的原始 Spring bean 声明等效性？

任何 IDE 中是否包含任何“自动翻译工具”？

据我所知，似乎有不同的工具可以创建自定义的 Spring 命名空间，比如 XBean... 是否有一种自动或手动的方式来了解命名空间是如何在不了解所有这些工具的情况下工作的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:20:19.940

这是对 Spring 如何处理自定义命名空间的一个很好的参考 - [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/extensible-xml.html#extensible-xml-schema](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/extensible-xml.html#extensible-xml-schema)

每个自定义命名空间都有一个关联的[NamespaceHandler](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/NamespaceHandler.html)，它使用 spring.handler 文件`META-INF/spring.handlers`在不同的 jar 文件中注册。

例如。上下文命名空间，如果你查看`META-INF/spring.handlers`in spring-`context*.jar file`你会看到上下文命名空间的命名空间处理程序：

```
http\://www.springframework.org/schema/context=org.springframework.context.config.ContextNamespaceHandler 
```

它在内部为上下文命名空间下的标签注册不同的解析器。

```
 registerBeanDefinitionParser("property-placeholder", new PropertyPlaceholderBeanDefinitionParser());
    registerBeanDefinitionParser("property-override", new PropertyOverrideBeanDefinitionParser()); 
```

这些解析器中的每一个都注册您提到的不同 bean 定义 -

所以不幸的是，没有简单的工具可以找出为特定自定义命名空间注册了哪些 bean 定义，您将不得不查看特定 BeanDefinition 解析器的代码。

ActiveMQ 使用的 XBean 通过处理一些样板文件，稍微简化了注册自定义命名空间处理程序的过程

# python - 从 csv 堆叠文件创建 pandas DataFrame

> ID：12250475
> 
> 赞同：2
> 
> 时间：2012-09-03T15:16:55.747
> 
> 标签：python, csv, dataframe, pandas

我想从以下 csv 文件创建一个 pandas DataFrame：

```
...........
EUR MS 3M;20111025;7d;1.1510;
EUR MS 3M;20111024;7d;1.1530;
EUR MS 3M;20111025;1m;1.1580;
EUR MS 3M;20111024;1m;1.1590;
........... 
```

理想情况下，DataFrame 的名称将作为第一列值（“EUR MS 3M”），由第二列中的值组成的索引（“20111025”），并且 DataFrame 的列名将取自第三列列（“7d”、“1m”等），对应的值在最后一个 csv 列（“1.150”等）中给出。我尝试了不同的方法，但无法以正确的方式解决这个问题。我认为我应该做的第一件事应该是“取消堆叠” csv 中的值，以便首先获得对齐的索引，然后创建一个 DataFrame，但真的不知道如何......比我更专家的人有任何线索？几周前我才开始学习熊猫...感谢您的帮助！

（我正在编辑问题以使事情更清楚：我想获得一个名为 EUR MS 3M 的数据框，其中包含以下列：

```
index    7d     1m 
20111024 1.1530 1.1590 
20111025 1.1510 1.1580 
```

希望现在更清楚一点。谢谢）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T18:52:56.903

像这样的东西怎么样：

```
In [103]: print data
EUR MS 3M;20111025;7d;1.1510
EUR MS 3M;20111024;7d;1.1530
EUR MS 3M;20111025;1m;1.1580
EUR MS 3M;20111024;1m;1.1590

In [104]: frame = pd.read_csv(StringIO(data), sep=';', 
                              names=['frame_name', 'index', 'column', 'value'])
In [105]: name = frame.ix[0, 'frame_name']

In [106]: rs = frame.ix[:, 1:].pivot('index', 'column', 'value')

In [107]: rs.name = name

In [108]: rs
Out[108]:
column       1m     7d
index
20111024  1.159  1.153
20111025  1.158  1.151 
```

# javascript - javascript中嵌套括号的正则表达式

> ID：12250481
> 
> 赞同：0
> 
> 时间：2012-09-03T15:17:26.917
> 
> 标签：javascript, regex

我正在用 Javascript 编写计算器。

我想将 : 翻译`[expression1]^[expression2]`成 :`Math.pow([expression1], [expression2])`

当我有简单的表达式`5^-3`时，使用正则表达式很容易，但是当它带有更复杂的表达式时，例如：

`(-5*(6+3)-5)^((2*2)-2)+(4*5)`

由于嵌套括号，我不知道如何用正则表达式处理它......

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T18:48:54.123

使用正则表达式模式：

```
/((?:(?=[^()]*\d)\d*(?:\.\d*)?)|(?:\((?:(?:[^()]+)|(?:[^()]*\([^()]*\)[^()]*)+)\)))\^((?:(?=[^()]*\d)\-?\d*(?:\.\d*)?)|(?:\((?:(?:[^()]+)|(?:[^()]*\([^()]*\)[^()]*)+)\)))/ 
```

### 检查[这个小提琴](http://jsfiddle.net/cymA2/)。

* * *

***解释：***

[步骤 1] :: Regex 模式包含两个几乎相同的子模式，`^`它们之间用符号链接

```
((?:(?=[^()]*\d)\d*(?:\.\d*)?)|(?:\((?:(?:[^()]+)|(?:[^()]*\([^()]*\)[^()]*)+)\)))
\^
((?:(?=[^()]*\d)\-?\d*(?:\.\d*)?)|(?:\((?:(?:[^()]+)|(?:[^()]*\([^()]*\)[^()]*)+)\))) 
```

*唯一的区别是第二个（后面`^`）允许负数作为一个简单的参数（`\-?`）*

*[步骤 2] ::步骤 1*的子模式有两种选择：

```
(?:(?=[^()]*\d)\-?\d*(?:\.\d*)?)
|
(?:\((?:(?:[^()]+)|(?:[^()]*\([^()]*\)[^()]*)+)\)) 
```

[步骤 3] :: 第一个选择是一个数字 - 例如：`1234`或`12.34`或`1234.`或`.1234`

```
(?=[^()]*\d)
\-?\d*
(?:\.\d*)? 
```

[步骤 4] :: 第二种选择是嵌套括号公式

```
\(
(?:(?:[^()]+)|(?:[^()]*\([^()]*\)[^()]*)+)
\) 
```

[Step 5] :: 这可能是简单的或复杂的（里面有其他括号）

```
(?:[^()]+)
|
(?:[^()]*\([^()]*\)[^()]*)+ 
```

[步骤 6] :: and if 是复杂的并且里面有一些其他的括号，我们确保有嵌套

```
[^()]*
\(
[^()]*
\)
[^()]* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-04T20:04:38.303

浏览器 javascript，就像现在一样。不支持递归正则表达式。

我的解决方案是将前缀与正则表达式匹配。然后使用分词器方法搜索其括号。然后如果括号是平衡的，则返回括号内的块。

```
// replace_tokenizer_paranthesis by shimon doodkin
// this function is searching for a regexp prefix
// then searching for a chunk inside balanced parantheseis
//
// s="s( s(gdfgs)fasd)" - searched string
// prefix=/s\(/   - searched regex for prefix
// onmatch: - replace callback function, arguments:
//  a= prefix,
//  b= inside data,
//  c = closing paranthesis
//  to return same , return  [a,b+c]
//
// example:
// replace_tokenizer_paranthesis(s,prefix,function (a,b,c){ return [ "CONVERT(",b+",DATE)"  ] }) // return [ newprefix , all rest ]

function replace_tokenizer_paranthesis(s,prefix,onmatch) 
{
 var m,start=0;
 var input;
 while(m=(input=s.substr(start)).match(prefix))
 {
    var offset_at_end=m.index+m[0].length;

    var counter = 1;

    var skip_until="";
    var i = offset_at_end;
    for(; i < input.length; i++)
    {
        //var pc = i-1>=0?input[i-1]:"";
        var c = input[i];
        if( counter===0 )
        {
            break;
        }

        //else if(c===skip_until&& pc!=='\\') //maybe backslash queoted
        else if(c===skip_until)
        {
            skip_until='';
        }
        else if(c==='"')
        {
            skip_until='"';
        }
        else if(c==="'")
        {
            skip_until="'";
        }

        else if(c==='(')
        {
            counter++;
        }
        else if(c===')')
        {
            counter--;
        }
    }
    if( counter===0 )
    {
            var result=onmatch(m[0], input.substring(offset_at_end,i-1),")")
            s=s.substring(0,start+m.index)+result[0]+result[1]+s.substr(start+i);
            start+=result[0].length;
    }
    else
      start+=offset_at_end;
 }
 return s
} 
```

# regex - 如何使用正则表达式拆分不同版本的日期模式？

> ID：12250483
> 
> 赞同：2
> 
> 时间：2012-09-03T15:17:39.643
> 
> 标签：regex, date, split

我已经看到了一些关于匹配特定日期模式的示例，但我需要拆分任何可能形式的模式（包括非日期字符）。如何在 REGEX 中实现这一点？

**例子）：**

```
1\. yMdhms -> (y, M, d, h, m, s)
2\. yyyMMddhhmmss -> (yyy, MM, dd, hh, mm, ss)
3\. yyy-mm-dd hh:mm:ss -> (yyy,-,mm,-,dd, ,hh,:,mm,:,ss) 
```

我使用了诸如 ([a-zA-Z])(\1+) 和 ([a-zA-Z]+) 之类的模式，但它并没有给我预期的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:23:28.333

尝试：

```
(\w)(\1)* 
```

它匹配任何单词字符，以及以下相同的字符。

如果它是任何类型的字符，而不仅仅是单词字符，请使用：

```
(.)(\1)* 
```

# java - 从 Java Applet 打印 JWebBrowser 内容

> ID：12250486
> 
> 赞同：0
> 
> 时间：2012-09-03T15:17:53.377
> 
> 标签：java, printing, awt, webpage

我正在使用来自[http://djproject.sourceforge.net/ns/](http://djproject.sourceforge.net/ns/)的 JWebBrowser 。

我已将 JWebBrowser 添加到 JFrame，并在 JWebBrowser 中显示我的网页。我尝试使用实现 Printable（打印实用程序）的类打印在 JFrame 中显示的渲染内容 - 在打印功能中使用 PrinterJob。我不能使用 javascript 基础打印来调用本机浏览器打印对话框，因为我需要在打印之前更改页面设置（页眉、页脚等）。

当我将 Jframe 打印到打印机时，我看不到 JWebBrowser 的内容。我使用 JEditorPane 测试了相同的打印实用程序（在呈现网页方面不如 JWebBrowser）并打印了内容。

任何人都知道如何使用 PrinterJob 打印 JWebBrowser 的内容？

# javascript - 无法在图像周围添加按钮

> ID：12250488
> 
> 赞同：0
> 
> 时间：2012-09-03T15:17:57.073
> 
> 标签：javascript, html

这是我用来编码 HTML 的代码：

```
<button id="imageshow" style="display:none">Button1</button>&nbsp;&nbsp;&nbsp;
<button id="imageshow" style="display:none">Button2</button>&nbsp;&nbsp;&nbsp;
<button id="imageshow" style="display:none">Button3</button>&nbsp;&nbsp;&nbsp;<br>
<img src="Images/Image1.jpg" onmouseover="showIt(this.src)"><br>
<button id="imageshow" style="display:none">Button4</button>&nbsp;&nbsp;&nbsp;
<button id="imageshow" style="display:none">Button5</button>&nbsp;&nbsp;&nbsp;
<button id="imageshow" style="display:none">Button6</button>&nbsp;&nbsp;&nbsp; 
```

当我在不使用 style="display:none" 的情况下对此进行编码时，我可以添加所有内容。但是当我像上面那样编码并使用下面的javascript时：

```
function showIt(imgsrc)
{
document.getElementById('imageshow').src=imgsrc;
document.getElementById('imageshow').style.display='';
}

function hideIt()
{
document.getElementById('imageshow').style.display='none';
} 
```

只添加了一个按钮。任何人都可以解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:19:39.287

那是因为您只能拥有一个具有给定 id 的元素。

你应该使用类。

见[http://jsfiddle.net/mwu4M/](http://jsfiddle.net/mwu4M/)

HTML

把那些丑陋的`&nbsp;`和`<br />`. 并使用`class="imageshow"`而不是`id="imageshow"`.

```
<button class="imageshow">Button1</button>
<button class="imageshow">Button2</button>
<button class="imageshow">Button3</button>
<img id="myimg" src="Images/Image1.jpg" onmouseover="showIt(this.src)" onmouseout="hideIt()" alt="[IMG]">
<button class="imageshow">Button4</button>
<button class="imageshow">Button5</button>
<button class="imageshow">Button6</button> 
```

CSS：

```
.imageshow{
    visibility:hidden;
    margin-right:15px;
}
.imageshow.show{
    visibility:visible;
}
#myimg{display:block;} 
```

JavaScript：

```
function getElementsByClassName(c,el){
    if(typeof el=='string'){el=document.getElementById(el);}
    if(!el){el=document;}
    if(el.getElementsByClassName){return el.getElementsByClassName(c);}
    var arr=[],
        allEls=el.getElementsByTagName('*');
    for(var i=0;i<allEls.length;i++){
        if(allEls[i].className.split(' ').indexOf(c)>-1){arr.push(allEls[i])}
    }
    return arr;
}
function addClass(el,c){
    var arr=el.className.split(' ');
    if(arr.indexOf(c)>-1){return;}
    arr.push(c);
    el.className=arr.join(' ');
}
function delClass(el,c){
    var arr=el.className.split(' ');
    if(arr.indexOf(c)===-1){return;}
    arr.splice(arr.indexOf(c),1);
    el.className=arr.join(' ');
}
function showIt(imgsrc){
    this.src=imgsrc;
    var els=getElementsByClassName('imageshow');
    for(var i=0;i<els.length;i++){
        addClass(els[i],'show');
    }
}
function hideIt(){
    var els=getElementsByClassName('imageshow');
    for(var i=0;i<els.length;i++){
        delClass(els[i],'show');
    }
} 
```

**编辑：**

甚至更好：http: [//jsfiddle.net/mwu4M/1/](http://jsfiddle.net/mwu4M/1/)

HTML：

```
<div id="wrapper">
    <button class="imageshow">Button1</button>
    <button class="imageshow">Button2</button>
    <button class="imageshow">Button3</button>
    <img id="myimg" src="Images/Image1.jpg" onmouseover="showIt(this.src)" onmouseout="hideIt()" alt="[IMG]">
    <button class="imageshow">Button4</button>
    <button class="imageshow">Button5</button>
    <button class="imageshow">Button6</button>
</div> 
```

CSS：

```
#wrapper>.imageshow{
    visibility:hidden;
    margin-right:15px;
}
#wrapper.show>.imageshow{
    visibility:visible;
}
#myimg{display:block;} 
```

JavaScript：

```
function showIt(imgsrc){
    this.src=imgsrc;
    document.getElementById('wrapper').className="show";
}
function hideIt(){
    document.getElementById('wrapper').className="";
} 
```

但我不明白你在做什么`src`。

你的代码有

```
document.getElementById('imageshow').src=imgsrc; 
```

但是`imageshow`是按钮而不是图像！

然后我以为你想改变`myimg`'src.

但这没有意义，因为我们将其更改`src`为`src`!!

```
<img id="myimg" src="Images/Image1.jpg" onmouseover="showIt(this.src)" onmouseout="hideIt()" alt="[IMG]">
function showIt(imgsrc){
    this.src=imgsrc;/*It was "Images/Image1.jpg" and now it's "Images/Image1.jpg" too*/
    document.getElementById('wrapper').className="show";
} 
```

**编辑2：**

如果您想在悬停图像时显示按钮并在鼠标移动到另一个位置时隐藏它们，您可以`onmouseleave`在父级上使用。但是并非所有浏览器都支持它，因此您需要实现它：

```
function containsOrIs(el1,el2){
    if(el1===el2){return true;}
    return Boolean(el1.compareDocumentPosition(el2)&16);
}
function addEvent(el,e,f,b){
    if(typeof el==='string'){el=document.getElementById(el);}
    if(e=='mouseenter'||e=='mouseleave'){
        return addEvent(el,e=='mouseenter'?'mouseover':'mouseout',function(e){
            if(!e){e=window.event;}
            if((el===e.target || containsOrIs(el, e.target)) && !containsOrIs(el, e.relatedTarget||e[e=='mouseenter'?'fromElement' : 'toElement'])){
                f();
            }
        });
    }
    if(el.addEventListener){
        if(b==undefined){b=false}
        return el.addEventListener(e,f,b);
    }
    if(el.attachEvent){
        return el.attachEvent('on'+e,f);
    }
}
function showIt(imgsrc){
    this.src=imgsrc;
    document.getElementById('wrapper').className="show";
}
function hideIt(){
    document.getElementById('wrapper').className="";
}
window.onload=function(){
    addEvent('wrapper','mouseleave',hideIt);
} 
```

[**演示**：http://jsfiddle.net/mwu4M/2/](http://jsfiddle.net/mwu4M/2/)

**编辑 3**：

但也许您更喜欢使用`:hover`，它更简单且仅 CSS：

```
#wrapper>.imageshow{
    visibility:hidden;
}
#wrapper:hover>.imageshow{
    visibility:visible;
} 
```

但是当鼠标悬停时，按钮将显示`#wrapper`，而不仅仅是图像。

[**演示**：http://jsfiddle.net/mwu4M/3/](http://jsfiddle.net/mwu4M/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:20:10.763

您有多个具有相同 id 的元素，因此 Javascript 只采用第一个。改用`class="imageshow"`就可以了。

脚本如下所示：

```
function showIt(imgsrc)
{
    var images = document.getElementsByClassName('imageshow');

    for(var i=0; i<images.length; i++)
    {
        images[i].src=imgsrc;
        images[i].style.display='';
    }
}

function hideIt()
{
    var images = document.getElementsByClassName('imageshow');

    for(var i=0; i<images.length; i++)
    {
        images[i].style.display='none';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:22:37.633

`document.getElementById()`只会返回一个元素（因为规范说 ID 应该是唯一的），因此不会适用于您的所有按钮。

您的替代方法是用名称和使用`document.getElementsByName()`或类替换您的 ID，但是以跨浏览器的方式按类选择元素并不太简单，除非您可以在页面上包含诸如 jQuery 之类的库。

# ios - 为什么顺序 UIView 动画会同时显示？

> ID：12250490
> 
> 赞同：0
> 
> 时间：2012-09-03T15:18:00.690
> 
> 标签：ios, animation, uiview, uikit, uiviewanimation

我编写了一些代码，可以按顺序在屏幕上移动一些对象。随着每个对象完成移动，下一个开始。

代码的结构与此类似：

模型：

```
moveObject
{
    // Code to move the object
    ...

    [delegate moved:self];
} 
```

代表：

```
moved:(MyClass *)o
{
    UIView* v = [self viewForObject:o];

    [UIView animateWithDuration:1.0
                     animations:^{
                         [v setCenter: [model center]];
                     }
                     completion:^(BOOL finished){
                         // Move object
                         [model moveObject];
                     }];
} 
```

尽管代码看起来运行良好，但屏幕上发生的情况是动画被分组为一批：大量的同时发生，然后另一组开始。

如果我在该行上放置一个断点，那么它会在设置`[model moveObject];`为时多次命中，而屏幕上不会显示任何动画。然后，偶尔会设置为，在我让调试继续之后，所有的动画都会在屏幕上执行。`finished``true``finished``false`

**编辑**：

但是，如果我将代码更改为在调用 moveObject 时偶尔*不*`moved:`移动对象，而是不执行任何操作返回，并等待用户移动对象（并因此通过委托的选择器回调到此代码中），那么短动画串顺序发生。

即问题似乎只发生在代码处于*无限*循环中时。

怎么了？

# android - 使用 iOS 数据模型并将其导入 SQLite for Android

> ID：12250491
> 
> 赞同：0
> 
> 时间：2012-09-03T15:18:03.193
> 
> 标签：android, database, android-sqlite

我得到了 iOS 数据模型，由 16 个实体（我猜是表）组成。所以，当我在做这个应用程序的 Android 版本时，我需要以某种方式自动（首选方式）或导入这个模型，或者我需要创建 SQL 查询才能做到这一点。

现在，这是 16 个表，稍后需要使用 Web 服务进行复制，所以我想保持数据库原样。

解决这个问题的最佳方法是什么，以及在哪里创建数据库，就像在原始数据库中一样，在应用程序加载时使用的一些首选项位于该特定数据库的“设置”表中。

肿瘤坏死因子

编辑 1：来自 iOS 前两个表的 XML 模型：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<model name="" userDefinedModelVersionIdentifier="" type="com.apple.IDECoreDataModeler.DataModel" documentVersion="1.0" lastSavedToolsVersion="1487" systemVersion="11E53" minimumToolsVersion="Xcode 4.1" macOSVersion="Automatic" iOSVersion="Automatic">
<entity name="FAQItem" representedClassName="FAQItem" syncable="YES">
<attribute name="answer" attributeType="String" syncable="YES"/>
<attribute name="orderNum" attributeType="Integer 16" defaultValueString="0" syncable="YES"/>
<attribute name="question" attributeType="String" syncable="YES"/>
</entity>
<entity name="Ingredient" representedClassName="Ingredient" syncable="YES">
<attribute name="name" optional="YES" attributeType="String" syncable="YES"/>
<relationship name="recipe" optional="YES" minCount="1" maxCount="1" deletionRule="Nullify" destinationEntity="Recipe" inverseName="ingredients" inverseEntity="Recipe" syncable="YES"/>
</entity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T09:19:06.890

唯一的方法是编写一个解析xml数据并生成java类文件的脚本。这不是不可能，但有点复杂。但我认为这可能是一个非常好的主意！

# javascript - 如何将 javascript 变量写入 sql 数据库？

> ID：12250493
> 
> 赞同：1
> 
> 时间：2012-09-03T15:18:09.567
> 
> 标签：javascript, mysql, variables

我有一个将用户定义的姓名和电子邮件地址写入 mysql 数据库的表单。我遇到问题的部分是我有表单的次要部分，它为复选框分配值，然后给你总和，它被定义为“总计”。我想将此总数写入同一个数据库。我是 JS 编码的新手，一旦用户确定了值，我不太确定如何传递总计。

```
<form name="form1">
    <input type="checkbox" name="check[]" data-weight="5" /> 5<br />
    <input type="checkbox" name="check[]" data-weight="10" /> 10<br />
    <input type="checkbox" name="check[]" data-weight="30" /> 30<br />
    <div>Total: <span id="total">0</span></div>
</form>

<script type="text/javascript">
    (function () {
        var totalEl = document.getElementById('total');
        var total = 0;
        var checkboxes = document.form1['check[]'];

        var handleClick = function () {
            total += parseInt(this.getAttribute('data-weight'), 10) * (this.checked ? 1 : -1);
            totalEl.innerHTML = total;
        };

        var l = checkboxes.length;
        for (i = 0; i < l; ++i) {
            checkboxes[i].onclick = handleClick;
        }
    }());
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:14:00.410

***首先：***如果禁用Javascript，它应该工作吗？或者提交表单但可能错误/没有值写入数据库是否可以接受？

### 如果没关系

你从没有启用 Javascript 的用户那里得到什么，那么你可以接受[AvL 的建议](https://stackoverflow.com/a/12250585/1338846)。

### 但是，如果您想要正确的值

那么你应该确保你不依赖 Javascript 支持。您应该确保您的表单始终提供一致的值，即使它是在没有使用 Javascript 进行计算的情况下提交的。

在这种情况下，您应该在服务器端而不是客户端进行计算。当然，您可以在客户端进行计算，但问题是您只能为客户端用户界面（*而不是最终数据*）进行客户端数学运算。

我不了解您的服务器端处理，因此我不建议任何用于服务器端计算和/或将值保存到数据库的代码。因此我唯一的建议是你应该*`check[]`*在服务器端处理你的位数组。

如果您愿意，您可以更好地描述您的服务器/数据库/处理，并留下有关您的更改的注释作为对我的回答的评论。

*更新：* 这基本上是关于[pst](https://stackoverflow.com/questions/12250493/how-do-i-write-a-javascript-variable-to-an-sql-database#comment16422964_12250493)对您的问题的评论的更长解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:25:28.593

您可以添加隐藏的输入元素：

```
<input id="totalChecked" type="hidden" name="total" value="0" /> 
```

并将以下内容添加到您的函数中：

```
document.getElementById('totalChecked').value = total; 
```

看看这个[小提琴](http://jsfiddle.net/ydSPh/)

# c# - 如何在 C# 中编写 REST Get-Request？

> ID：12250494
> 
> 赞同：3
> 
> 时间：2012-09-03T15:18:15.933
> 
> 标签：c#, api, rest, curl, get

我是 C# 新手，但仍然尝试熟悉它的环境。

我想在获取模式下发出 REST 请求。给我 API-Access 的人向我提供了以下信息：

```
HTTP Methods: GET
Authentication: None
Formats: xml
Parameters: format, apikey [GET], lang [GET], q [GET]
CURL Example: curl --get --data lang="de" --data q="query" --data apikey="QWERTY123456" http://jokr.info/api/v8/search/item.xml 
```

而且我不知道如何把它放在 C# 中。我尝试使用**WebClient**，但我不知道如何将我的请求与参数一起投入使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:38:55.960

有一个流行的图书馆[RestSharp](http://restsharp.org/)。

这是一个例子：

```
var client = new RestClient("http://example.com");
var request = new RestRequest("api");
request.AddParameter("foo", "bar");

client.ExecuteAsync(request, response => {
    // do something with the response
}); 
```

转换为[http://example.com/api?foo=bar](http://example.com/api?foo=bar)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:28:54.727

尝试这个

```
string URI = "http://jokr.info/api/v8/search/item.xml"; 
string myParameters = "myparam1=value1 & myparam2=value";

using (WebClient webClient = new WebClient()) {
    webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
    string HtmlResult = webClient.UploadString(URI, myParameters);  
} 
```

# asp.net - asp.net 4.5 模型绑定

> ID：12250498
> 
> 赞同：1
> 
> 时间：2012-09-03T15:18:22.640
> 
> 标签：asp.net, .net-4.5

在[ASP.NET 4.5 文档中的新增功能中，它谈到了](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097390)我正在尝试的 Web 表单中的模型绑定。

我有一些工作，但我得到一个编译时错误：

> 'System.Web.UI.Control' 不是属性类

这是指向这部分代码中的单词 Control [ **Control** ("ddlCategory")] int? 类别 ID。

我想我需要添加一些参考，但文档没有提到，所以我不确定出了什么问题。

```
public IEnumerable<Product> LoadProducts([Control("ddlCategory")] int? categoryId)
{
    var retval = new List<Product>();
    if (categoryId.HasValue)
    {
        using (var db = new DBDataContext())
        {
            retval = db.Products.Where(x => x.CategoryId == categoryId.Value).ToList();
        }
    }
    return retval;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:57:02.380

尝试放置属性的完全限定名称。

所以试试这个：

```
[System.Web.ModelBinding.Control("ddlCategory")] 
```

而不是这个：

```
[Control("ddlCategory")] 
```

# css - 如何将样式应用于图像

> ID：12250500
> 
> 赞同：1
> 
> 时间：2012-09-03T15:18:38.090
> 
> 标签：css, html

在此页面上，我在图像下方的 div 中有一个具有光泽效果的图像。

[http://www.joelin.org/home2.html](http://www.joelin.org/home2.html)

我基本上想在图像顶部移动光泽效果。我试过

1）直接将样式添加到img标签，没有效果2）在图像周围创建一个div，将光泽div放入其中（但光泽div最终位于图像下方）

还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:41:30.360

您想要实现的目标是不是类似[http://dabblet.com/gist/3610138 ？](http://dabblet.com/gist/3610138)

HTML：

```
<a href='#' class='img-wrapper'>
    <img src='http://imgsrc.hubblesite.org/hu/db/images/hs-2012-10-a-web.jpg'>
</a> 
```

CSS：

```
.img-wrapper, .img-wrapper img {
    display: inline-block;
    position: relative;
    width: 13em;
    height: 8em;
    border-radius: 1em;
}
.img-wrapper:after {
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    border-radius: 1em;
    box-shadow: inset 0 1em 0 0 rgba(192, 192, 192, .5);
    pointer-events: none; /* so that you can get image from right-click menu
                                won't work in IE and Opera */
    content: '';
} 
```

如果您不需要 img 标签并且可以将图像作为背景图像，那么它会变得更容易。只有一个元素：

```
<div class='glossy'></div> 
```

只是这个CSS：

```
.glossy {
    width: 13em;
    height: 8em;
    border-radius: 1em;
    background: linear-gradient(rgba(192, 192, 192, .5) 12.5%, transparent 12.5%),
        radial-gradient(100% 100%, transparent 71%, rgba(192, 192, 192, .5) 71%) 
            no-repeat 0 1em,
        radial-gradient(0% 100%, transparent 71%, rgba(192, 192, 192, .5) 71%) 
            no-repeat 100% 1em,
        url(http://imgsrc.hubblesite.org/hu/db/images/hs-2012-10-a-web.jpg);
    background-size: 1px 100%, 1em 1em, 1em 1em, cover;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:30:08.033

您可以尝试对 div 使用绝对定位将其置于图像之上。您还需要使用 z-index 来正确分层。尝试这样的事情：

```
.imageClass
{
    z-index: 1;
}

.glossyDiv
{
    position: absolute;
    top: 999px;
    left: 999px;
    z-index: 5;
    /* you'll need to figure out where your image sits in relation to the
    top and left of the screen, replace the 999s with the correct values */
} 
```

那应该让 div 覆盖图像。您可以更改此设置，以便 div 相对于其容器定位，如果这是您设置 HTML 的方式。

z-index 控制元素如何分层/堆叠，因此将 div 设置为较高的索引使其更接近屏幕的“前面”，而较低的数字将其设置为后面。请注意，z-index 仅适用于“定位”元素[源](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# php - 从对象类中获取构造函数的参数

> ID：12250501
> 
> 赞同：2
> 
> 时间：2012-09-03T15:18:53.233
> 
> 标签：php, class, object, reflection, constructor

我试图从类中获取构造函数的参数`$object`：

```
$reflectionClass = new \ReflectionClass($object);
$constructor = $reflectionClass->getConstructor();
$constructor_params = $constructor -> getParameters(); 
```

我得到的错误：

```
Fatal error: Call to a member function getParameters() on a non-object 
```

### 更新：

事实证明它没有构造函数。我如何检查它是否首先？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:27:14.930

检查它是否有一个构造函数：

```
if (null !== ($constructor = $reflectionClass->getConstructor())) {
    // we have a constructor
} 
```

但是，这并不一定意味着您可以实例化一个对象（例如，当构造函数是私有的时）：

```
if ($reflectionClass->isInstantiable()) {
    // class can be instantiated with new XYZ()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:27:15.250

您可以在调用之前使用[`isset`](http://php.net/manual/en/function.isset.php)on 。如果未设置，则没有构造函数。`$costructor``getParameters`

# javascript - function.call 方法有什么用？

> ID：12250503
> 
> 赞同：1
> 
> 时间：2012-09-03T15:18:58.960
> 
> 标签：javascript

```
var x = 10;
var o = { x: 15 };

function f()
{
    alert(this.x);
}

f();
f.call(o); 
```

第一个将显示“10”，第二个将显示“15”作为输出值。谁能告诉我在哪个实时场景中我会同时使用“call”方法和 f()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:17:47.517

我只是浏览未回答的问题，我不确定这是否会对您有所帮助，但它可能会帮助偶然发现这个问题的人。

在函数对象上使用该`call()`方法允许您覆盖*`this`*要由函数引用的对象。您已经在自己的代码块中展示了预期的结果。

可以注意到，除了预期的参数格式之外，该`apply()`方法执行的功能几乎相同。`call()`

`call()`期望以逗号分隔格式的参数，而`apply()`期望它们在数组中。对于两者，第一个参数是将要覆盖的对象*`this`*。

## ECMA 规范

[ECMA 规范（pdf 警告）](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)说明了`call()`它在更改特定函数的执行上下文中的用途：

> 13.2.1 [[呼叫]]
> 
> 当使用 this 值和>参数列表调用 Function 对象 F 的 [[Call]] 内部方法时，将执行以下步骤：
> 
> 1.  令 funcCtx 为使用 F 的 [[FormalParameters]] 内部属性的值、传递的参数 List args 和 10.4.3 中所述的 this 值为函数代码建立新执行上下文的结果。
> 2.  让 result 是对作为 F 的 [[Code]] 内部属性的值的 FunctionBody 求值的结果。如果 F 没有 [[Code]] 内部属性，或者它的值为空 FunctionBody，则结果为（正常、未定义、空）。
> 3.  退出执行上下文funcCtx，恢复之前的执行上下文。
> 4.  如果 result.type 被抛出，则抛出 result.value。
> 5.  如果返回result.type，则返回result.value。
> 6.  否则 result.type 必须是正常的。返回未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T22:45:17.260

> 谁能告诉我在哪个实时场景中我会同时使用“call”方法和 f()。

作为对象方法的函数应该以该对象作为它们的*this*被调用，例如使用内置的*Array.prototype.forEach*方法，该方法期望*this*是一个 Array 实例。

但是，该方法是通用的，因此实例不必是数组，它只需是一个足够像数组的对象，该方法就可以工作。在大多数浏览器中，它可以传递一个 NodeList，它是一个主机对象（尽管有些浏览器不喜欢这样），所以你可以调用*forEach*传递 NodeList*如下*：

```
Array.prototype.forEach.call(
  document.getElementsByTagName('*'),
  function(element){ 
    console.log('This element is a ' + element.tagName)
  }
); 
```

放置在文档底部的脚本元素中，上面会将每个元素的标记名写入控制台。

上面的调用有时会缩短为：

```
[].forEach.call(...) 
```

它创建了一个新的 Array 实例并使用它的`[[Prototype]]`链访问*forEach*。

因此，您可以看到对于数组实例需要普通的*forEach ，并通过**call*单独使用它。还有其他情况，可以调用方法并将其*设置*为其他值（例如，DOM 元素上的侦听器）。

# python - 在 Python 中使用 ctypes 返回结构

> ID：12250504
> 
> 赞同：5
> 
> 时间：2012-09-03T15:18:59.223
> 
> 标签：python, callback, structure, return-value, ctypes

我正在用 Python 编写一个程序，它从海康威视有限公司生产的 IP 摄像机中读取 YV12 帧数据。

在 SDK 中，他们提供了一个函数调用，允许我设置回调来检索帧数据。

我的回调函数是这样的：

```
def py_fDecodeCallBack(lPort, pBuffer, lSize, pFrameInfo, lReserved1, lReserved2):
    print "lPort: %r" % lPort
    print "lSize: %r   " % lSize
    print pFrameInfo
    print pBuffer
    print "pFrame Info: %r   " % pFrameInfo.nWidth

    return 0 
```

$ pFramInfo 的结构定义如下：

```
class FRAME_INFO(Structure):
        _fields_ =[
                   ('nWidth', c_long),
                   ('nHeight', c_long),
                   ('nStamp', c_long),
                   ('nType', c_long),
                   ('nFrameRate', c_long),
                   ('dwFrameNum', wintypes.DWORD)
                   ] 
```

$

我使用以下代码来设置回调函数：

```
FSETDECCALLBACK = WINFUNCTYPE(c_bool, c_long, POINTER(wintypes.BYTE), c_long, POINTER(FRAME_INFO), c_long, c_long)
fSetDecCallBack = FSETDECCALLBACK(py_fDecodeCallBack) 
```

然后 SDK 调用回调函数并打印出以下内容：

```
Traceback (most recent call last):
  File "_ctypes/callbacks.c", line 313, in 'calling callback function'
lPort: 0
lSize: 1382400   
<mytypes.LP_FRAME_INFO object at 0x03109CB0>
<wintypes2.LP_c_byte object at 0x03109D00>
  File "C:\Users\Rex\workspace\iSentry\hcnetsdkhelper.py", line 76, in py_fDecodeCallBack
    print "pFrame Info: %r   " % pFrameInfo.nWidth
AttributeError: 'LP_FRAME_INFO' object has no attribute 'nWidth' 
```

像 c_long（lPort 和 lSize）这样的简单类型被正确读取，但 pFrameInfo 结构没有我定义的字段。我无法阅读 pFrameInfo.nWidth 因为它说没有这样的属性...

我的问题是：如何通过 ctypes 读取从 dll 返回的结构中的属性。我在 google 上看不到任何这样做的例子，我在 python.org [http://bugs.python.org/issue5710](http://bugs.python.org/issue5710)中找到了一个主题，说这无法完成，但该消息是在 2009 年编写的。

我相信由于 pFrameInfo 已经从 dll 中读取，有什么方法可以通过剪切和读取 pFrameInfo 内存空间中的字节来取回存储在 pFrameInfo 结构中的 c_long 数据？由于 pFrameInfo 的所有属性都是 c_long，因此可以逐字节读取结构体可以重构 c_long 变量的值。我只是猜测。请帮忙，这对我来说是一个非常大的问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T16:16:31.973

I think you need to dereference your pointer to FRAME_INFO:

```
frameInfo = pFrameInfo.contents
...
print "pFrame Info: %r   " % frameInfo.nWidth 
```

# javascript - 如何在不使用 eval 或迭代的情况下访问具有在其他地方指定的访问信息的嵌套 json 对象？

> ID：12250506
> 
> 赞同：2
> 
> 时间：2012-09-03T15:19:08.257
> 
> 标签：javascript, json, navigation

我有一个类似的 JSON 对象；

```
 var data = {
 Name : "test name",
 Type : "test type",
 VendorInfo :{
               FirstName : "Vendor First Name",
               LastName : "Vendor Last Name",
               Address : "Vendor Address",
               City : "Vendor City",
               ZipCode : "Zip"
             }
 } 
```

现在分别我想保留有关如何访问数据变量中的字段的信息

```
var accessInfo=[
    { fieldName : "Name", actionName : "Edit" },
    { fieldName : "Type", actionName : "Edit" },
    :
    :etc..
 ] 
```

现在在我的javascript中，我可以通过for循环遍历accessInfo数组，例如；

`for(var i=0;i<accessInfo.length;i++){
data[accessInfo[i].fieldName] = "changed field";
}`

这适用于顶级字段，但我无法弄清楚如何访问层次结构中较低的字段..如 data.VendorInfo.FirstName、data.VendorInfo.LastName 等。

这是可能吗？我尝试输入“VendorInfo.FirstName”和 [VendorInfo][FirstName]，但不行..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:47:50.920

你只需要解析你的访问规范来遍历目标对象。你可以使用这样的函数：

```
function getProp(obj, propName) {
   var prop;
   var props = propName.split('.');
   for (var i = 0; i < props.length; i++) {
      prop = obj[props[i]];
      if (typeof prop === 'null' || typeof prop === 'undefined') return prop;
   }
  return prop;
} 
```

# javascript - 将“this”保留在变量中并用该变量替换所有“this”？

> ID：12250508
> 
> 赞同：2
> 
> 时间：2012-09-03T15:19:15.903
> 
> 标签：javascript, jquery, coding-style, this, readability

# 语境

当我使用 jQuery 时，我经常需要保存`this`一个变量：

```
var obj = {
    myVar: null,
    myFunction1: function() { ... },
    myFunction2: function() {
        this.myVar = "blabla";
        this.myFunction1();

        var ctx = this;
        $('xxx').click(function () {
            ctx.myFunction1();
        });
    }
} 
```

在这种情况下，我将 all 替换`this`为我的变量：

```
var obj = {
    myVar: null,
    myFunction1: function() { ... },
    myFunction2: function() {
        var ctx = this;

        ctx.myVar = "blabla";
        ctx.myFunction1();

        $('xxx').click(function () {
            ctx.myFunction1();
        });

        //etc. I do it for all "this" even if I have 15 "this"...
    }
} 
```

# 问题

*   保持`this`变量是一种好习惯吗？还有其他方法吗？
*   `this`用变量替换 all 是一种好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:22:24.010

`this`在不同的功能中是不同的。在那种情况下，上下文是不同的。

因此，将它保存在一个单独的变量中是明智的，这样您就可以确定您正在与什么上下文对话。

在有子功能的功能中，我建议这样做，而在常规功能中则不要。那里没有必要。

*注意：您不会替换它，您只是有一个指向正确上下文的指针。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:22:56.917

> 还有其他方法吗？

是的：您可以使用匿名自执行函数将引用传递给范围

```
myFunction2: function() {
    this.myVar = "blabla";
    this.myFunction1();

    (function(outerscope) {
        $('xxx').click(function () {
            outerscope.myFunction1();
        });
    }(this));
 } 
```

无论如何，像您所做的那样存储引用是可以的（或者至少，[谷歌 javascript 样式指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)中不鼓励将其作为一种不好的做法），并且它是一种广泛使用的常见做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T15:25:36.603

> 还有其他方法吗？

您可以使用[`$.proxy` *^([文档])*](http://api.jquery.com/jQuery.proxy/)：

```
$('xxx').click($.proxy(function () {
    this.myFunction1();
}, this)); 
```

这显然会覆盖`this`事件处理程序内部，因此您无法通过`this`.

您也可以`this`作为[事件数据*^([docs])*](http://api.jquery.com/event.data/)传递：

```
$('xxx').click({ctx: this}, function (event) {
    event.data.ctx.myFunction1();
}); 
```

* * *

做任何你认为最易读的事情。我个人只是在嵌套函数和其他任何地方分配`var self = this;`和使用。`self``this`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T15:23:29.817

我总是用来创建：

```
var _self = this; 
```

老实说，我不知道这是否是最佳实践，但自从我用 js 编写代码后，我看到很多人都在这样做，我觉得使用它很舒服。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T15:29:34.283

这通常是一种公认​​的模式，但是当您在函数中具有函数时（在 func-functions-tions 内;-) 等，它可能会让人感到困惑

缓解这种情况的一种方法（以及一般的替代方法）是将您的函数绑定到特定的上下文对象。[ECMAScript 5 的 bind() 函数可以](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)处理这个问题，但在 Web 环境中使用可能还不安全。

现在您可以改用[jQuery 的代理功能](http://api.jquery.com/jQuery.proxy/)：

```
 $('xxx').click(jQuery.proxy(function () {
        this.myFunction1();
    }, this)); 
```

# wordpress - Wordpress - 在子页面中显示子导航

> ID：12250509
> 
> 赞同：0
> 
> 时间：2012-09-03T15:19:17.007
> 
> 标签：wordpress, parent-child, nav

我目前有一个导航栏，使用以下代码段显示该特定页面的所有子项

```
 <div id="sub_nav_del">
                        <h4>Take a seat</h4>
                        <?php
                        $pages = get_pages('child_of='.$post->ID.'&sort_column=menu_order');
                        $count = 0;
                        foreach($pages as $page)
                        { ?>

                        <ul>
                            <li>
                            <h5 class="del">
                                <a href="<?php echo get_page_link($page->ID) ?>"><?php echo $page->post_title ?></a>
                            </h5>
                            </li>
                            </ul>
                        <?php
                        }
                        ?>
</div> 
```

但是，如果我在其中一个子页面上，我希望仍然显示导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:45:42.377

`get_pages`您可以通过询问页面的父级来确定您的 -call 的 post-ID 。如果它没有父级，则将使用页面的 ID。

```
$subnav_parent = ($post->post_parent) ? $post->post_parent : $post->ID;
$pages = get_pages('child_of=' . $subnav_parent . '&sort_column=menu_order'); 
```

但是我可以告诉你，它不适用于第三级页面，但对于第二级页面就可以了。

# sharepoint-2010 - 在 SP 中使用 Event Receiver 添加 2 个字段（Salary 和 PF）作为 Net Pay 的结果

> ID：12250512
> 
> 赞同：0
> 
> 时间：2012-09-03T15:19:26.760
> 
> 标签：sharepoint-2010

如何使用 SharePoint 中的项目添加事件接收器将 2 个字段（工资 + PF）添加为 NET PAY

像 NET PAY = [薪水] + [PF]

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:28:50.057

在这种情况下使用事件处理程序是多余的。您可以使用计算字段轻松获得相同的结果。

[计算字段公式](http://msdn.microsoft.com/en-us/library/bb862071.aspx)

# atk4 - 提交搜索表单后突出显示/选择特定选项卡

> ID：12250513
> 
> 赞同：1
> 
> 时间：2012-09-03T15:19:31.173
> 
> 标签：atk4

我想知道 atk 4.2 中是否有一种方法可以根据提交搜索表单后找到的搜索结果选择特定选项卡。

如果有一个简单的搜索表单（搜索用户给出的关键字或条件），它会更新许多 GRID，每个 GRID 在其自己的选项卡下。
这些 GRID 在用户提交表单后得到更新，如下所述：[实现更新网格或列表的搜索表单](https://stackoverflow.com/questions/11473669/implementing-a-search-form-that-updates-grid-or-lister)

现在，当网格没有搜索结果时，它会显示“未找到记录”，这对用户来说有点混乱，最好自动向用户显示一个确实有搜索结果的网格......

这个想法是选择带有结果的网格的第一个选项卡，并可能隐藏返回空搜索结果的网格的选项卡，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:09:27.577

看看这个——也许它对你有用。

```
/**
 * Set specific tab as selected
 * $id  is zero-based index of the tab to be selected or the id selector
 *      of the panel the tab is associated with (the tab's href fragment
 *      identifier, e.g. hash, points to the panel's id).
 */
function setSelect($id){
    $this->js(true)->tabs('select',$id);
} 
```

您可以使用这种新方法扩展 /atk4/lib/View/Tabs/jUItabs.php 或简单地自己使用一行 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:44:04.370

是的，我认为这是可能的，但是通过事件触发可能很难通过搜索条件。

1.  创建一个页面“我的/搜索”
2.  添加搜索表单`$form=..`
3.  添加标签`$tabs=..`
4.  提交表单后，您将需要重新加载选项卡：

    if($form->isSubmitted()){ $q=$form->get('search'); $tabs->js()->reload(array('q'=>$q))->execute(); }

5 接下来填充选项卡，但您需要先获取结果。

```
$tab1_data = $this->add('Model_Data1');
$tab1_data ->addCondition('name','like','%'.$_GET['q'].'%');
$tab1_count = $tab1_data->count()->getOne();
if($tab1_count){
    $tabs->addTab('Data1 ('.$tab1_count.')')
        ->add('CRUD')->setModel($tab1_data);
} 
```

如果没有找到结果，您可能需要检查并添加至少一个选项卡以显示消息。您还可以使用选项卡内的计数，非常方便。

# mysql - 在mysql中使用GROUP BY时如何选择最长的文本字段，a la MAX()？

> ID：12250514
> 
> 赞同：12
> 
> 时间：2012-09-03T15:19:33.283
> 
> 标签：mysql, sql, group-by

在MySql中，你可以使用`MAX()`函数来获取最高值`GROUP BY`，我怎样才能做同样的事情来获取最长的文本字符串？

样品表：

```
id_|_post_id|_title__________|_body_____________________________________________
1  | ZXBF1J | Favorite Color | My favorite color is blue.
2  | ZXBF1J | Favorite Color | My favorite color is blue, no wait...
3  | ZXBF1J | Favorite Color | My favorite color is blue, no wait, yelloooow!
4  | AR3D47 | Quest          | To seek..
5  | AR3D47 | Quest          | To seek the Holy
6  | AR3D47 | Quest          | To seek the Holy Grail. 
```

棘手的部分是我想`ORDER BY id ASC`在顶部查看最旧的条目，并且我想按`post_id`我无法使用的内容进行分组`ORDER`，并获得最长的条目`body`。

示例查询：

```
SELECT post_id, title, MAX(body) // obviously MAX() doesn't work here
FROM posts
GROUP BY post_id
ORDER BY id ASC 
```

期望的输出：

```
post_id|_title__________|_body_____________________________________________
ZXBF1J | Favorite Color | My favorite color is blue, no wait, yelloooow!
AR3D47 | Quest          | To seek the Holy Grail. 
```

同样，关键是选择最长的`body`同时保持基于`id`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T15:25:58.917

你需要使用`CHAR_LENGTH`而不是`LENGTH`

```
SELECT a.id, a.post_id, a.body
FROM posts a INNER JOIN
(
    SELECT post_ID, title, MAX(CHAR_LENGTH(body)) totalLength
    FROM posts
    GROUP BY post_ID, title
) b ON a.post_id = b.post_ID AND
        a.title = b.title AND
        CHAR_LENGTH(a.body) = b.totalLength 
```

您可能希望看到区别：**[CHAR_LENGTH( ) 与 LENGTH( )](https://stackoverflow.com/questions/1734334/mysql-length-vs-char-length)**

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/d146d/2)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T15:25:13.683

```
select p.post_id, p.title, p.body
from posts p
inner join (
  select post_id, max(length(body)) as MaxLength
  from posts
  group by post_id
) pm on p.post_id = pm.post_id and length(p.body) = MaxLength
order by p.id 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/82e8a/7)

# json - Backbone.js Uncaught TypeError：无法使用“in”运算符在等中搜索“id”以复制json数据

> ID：12250518
> 
> 赞同：0
> 
> 时间：2012-09-03T15:19:50.113
> 
> 标签：json, backbone.js

我有一个backbone.js 错误：

> 未捕获的类型错误：无法使用 'in' 运算符在 {"websiteID":"2","title":"titre site 2"} 主干-min.js:9 中搜索 'id'

我正在尝试将 json 数据（从 ajax 接收）复制到模型的实例中。

我该如何解决这个问题？

我的代码是：

```
var Website = Backbone.Model.extend({
    // set default json data in the website:
    defaults: {"websiteID":"1","title":"default title"}
});

var website = new Website();

function UpdateWebsiteBasedOnDBData() {
  this.url = 'script.php';
}

UpdateWebsiteBasedOnDBData.prototype.readData = function(dataToGet) {
        return $.ajax({
        type: "GET",
        url: this.url,
        data: dataToGet,
        context: this,
        success: this.onSuccess
      });
};

UpdateWebsiteBasedOnDBData.prototype.onSuccess = function(data) {
    website.set(data);
    alert( website.get("websiteID") );
};

$(document).ready(function() {
    var updateWebsiteBasedOnDBData = new UpdateWebsiteBasedOnDBData();
    updateWebsiteBasedOnDBData.readData({"websiteID": 2});
}); 
```

script.php 返回正确的 json：

{"websiteID":"2","title":"网站名称 2"}

* * *

**更新**：

我仍然需要检查，但我强烈怀疑我的 json 实际上是无效的。根本原因可能是（仍有待验证）我的 php 脚本的字符集。

相关：[json 内容类型开头的奇怪字符](https://stackoverflow.com/questions/2475113/weird-character-at-start-of-json-content-type)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:09:32.020

我只是猜测您必须为模型命名身份字段。

[http://documentcloud.github.com/backbone/#Model-idAttribute](http://documentcloud.github.com/backbone/#Model-idAttribute)

但是我不太确定您发布的代码是否存在问题。我过去使用过没有 id 的模型，IIRC，对于某些模型，我只想实现只读视图/搜索功能，而不是 CRUD 功能，并且身份在这些场景中并不重要......（这是之前但是，Backbone.js 的当前版本，我可能完全不在乎这个......）

# bash - 用变量制作变量？

> ID：12250519
> 
> 赞同：0
> 
> 时间：2012-09-03T15:19:52.987
> 
> 标签：bash

谁能解释我如何使这些 num1 和 num2 成为 2 美元和 3 美元，以便我可以更改我的 ping 公式的开始和结束编号？无需更改我的公式中的任何内容。

```
num1=1
num2=255

until [ -z $1 ] 

  case in "$1" in 

               a) $2="$num1"
                  $3="$num2" ;;
   [0-9]*-[0-9]*) $num1=${1%-*} 
                  $num2=${1#*-}

  esac
done

for ip in $(seq $num1 $num2); do
  ping -c 1 -w 1 192.168.1.$ip>/dev/null; && eho "192.168.1.$ip is up" ||:;
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:30:42.167

Look up *indirection* in the bash manual. Obscurely, `!` introduces variable indirection.

```
$ a=hello
$ var=a
$ echo ${!var}
hello 
```

*Edit*

```
num1=1
num2=255
case in "$1" in 
a)
    num1=$2;
    num2=$3
    ;;
[0-9]*-[0-9]*)
    num1=${1%-*} 
    num2=${1#*-}
    ;;
esac

for ip in $(seq $num1 $num2); do
    ping -c 1 -w 1 192.168.1.$ip>/dev/null && echo "192.168.1.$ip is up" ||:;
done 
```

# objective-c - 如何调用具有可变数量参数的实现？

> ID：12250525
> 
> 赞同：6
> 
> 时间：2012-09-03T15:20:44.217
> 
> 标签：objective-c, objective-c-runtime

为了简化，假设我有一个这样的功能

```
void myFunc(id _self, SEL _cmd, id first, ...)
{

} 
```

在那个方法中，我想在 _self 的超类上调用 implementation(imp)。我可以使用以下代码访问该 IMP：

```
Class class = object_getClass(_self);
Class superclass = class_getSuperClass(class);
IMP superimp = class_getMethodImplementation(superclass, _cmd); 
```

现在，我该怎么称呼那个 imp ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:34:18.613

只需使用可变参数调用它：

```
superImp(self, _cmd, argument1, argument2, argument3, etc...) 
```

IMP 已经被`typedef`定义为

```
typedef id (*IMP)(id, SEL, ...); 
```

因此，您可以毫无问题地使用可变参数调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-20T15:44:09.623

所以，经过大量的工作，我自己才真正想通了这一点。

# 问题

现实情况是不可能将可变参数传递给 C 可变参数函数。为了做到这一点，您确实需要 API 提供一个`v`-style 函数，例如`vprintf`. 现在，实际上有一个`objc_msgSendv`，但它已被弃用。此外，没有`objc_msgSendSuperv`. 这意味着低级 API 对我们来说是完全禁止的。*只有在编译时*知道确切的消息签名时，此 API**才有**用。

 *唯一的其他选择是使用`NSInvocation`机器并构建消息，而不是直接调用实现。一个幼稚的解决方案是相当微不足道的，但正确地做到这一点有很多警告。

我们需要解决几个问题：

1.  传递不同类型的参数（读取大小）。我们将把参数复制到`NSInvocation`using 中`va_arg`，但是这个宏依赖于我们将参数的类型传递给它，以便它确定要复制和推进的字节大小。
2.  调用被另一个覆盖（读取隐藏）的实现。此外，由于我们现在只是发送消息，因此无法选择类的确切实现。本质上，我们只能做`objc_msgSend`，不能`objc_msgSendSuper`。无法直接调用被另一个方法覆盖的方法。
3.  检索返回值。我们的新 IMP 函数需要有一个与我们要替换的函数的返回类型相匹配的返回类型。OP 使用了`void`返回值，但情况肯定并非总是如此。进一步的困难是这个返回值必须在编译时指定，因为它是一个 C 函数，而不是运行时。

# 解决方案

我实际上已经在此处可用的代码中解决了上述问题：

[https://github.com/Lyndir/Pearl/blob/master/Pearl/NSInvocation%2BPearl.h](https://github.com/Lyndir/Pearl/blob/master/Pearl/NSInvocation%2BPearl.h)

[https://github.com/Lyndir/Pearl/blob/master/Pearl/NSInvocation%2BPearl.m](https://github.com/Lyndir/Pearl/blob/master/Pearl/NSInvocation%2BPearl.m)

为了解决这些问题，我做了以下工作：

1.  对于每个参数，我们查看方法的签名，该签名对参数类型进行编码。我们确定参数类型的字节大小，并执行一系列`if`'s 来检查参数大小是否等于已知大小的大小，这允许我们执行该`va_arg`大小的编译时固定值。这解决了大小等于一系列“支持”大小的类型参数的问题。在我的实现中，我支持任何类型的字节大小`1`（例如 char）、`2`（例如 short）、`4`（例如 int）、`8`（例如 id）、`16`（例如 CGPoint）、`32`（例如 CGRect）、`48`（例如。 CGAffineTransform）（参见`- (void)setArguments:(va_list)args`）。
2.  `class_getInstanceMethod`要调用被另一个方法覆盖的方法的实现，我们可以使用and查找隐藏的实现`method_getImplementation`，然后我们可以使用 将该实现安装到对象类的新临时代理方法中`class_addMethod`。如果我们随后调用代理方法而不是目标方法，运行时将调用我们正在寻找的隐藏实现，实际上与`msgSendSuper`. 但是，这会导致我们使用 bad 调用实现`_cmd`，因此我们要做的是将隐藏的实现分配给正确方法名称的顶层。但是，这样做会覆盖我们方法的覆盖代码，因此我们将其搁置一会儿，在调用之后，我们将其恢复（参见 参考资料`- (void)invokeWithTarget:(id)target superclass:(Class)type`）。
3.  为了创建一个具有正确大小的返回类型的 C 函数以适合我们的任意 IMP 的返回值，我们再次查看方法签名，这一次，找出我们的返回值的大小。我们执行另一系列条件来检查已知大小的大小，对于每个已知大小，我们创建一个 C 函数，将该大小硬编码为函数的返回值。我已经创建了对尺寸返回值的支持为了方便这一点，我们使用`imp_implementationWithBlock`. （见`PearlForwardIMP`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-18T19:59:13.750

实际上，无论如何我都找不到`IMP`使用可变数量的参数进行调用，但是对于这种情况我有另一种解决方案。

通过使用`NSInvocation`，我们可以解决这个问题。

```
void myFunc(id _self, SEL _cmdS, id first, ...) {
  Class clazz = object_getClass(_self);
  Class superClass = class_getSuperclass(clazz);

  NSMethodSignature *signature = [superClass methodSignatureForSelector:_cmdS];

  if (!signature) {
    return;
  }

  NSInvocation *inv = [NSInvocation invocationWithMethodSignature:signature];
  [inv setSelector:_cmdS];
  [inv setTarget:superClass];

  va_list args;
  va_start(args, first);
  id arg = first;
  // Arguments 0 and 1 are self and _cmd respectively, automatically set 
  // by NSInvocation. So start setting arguments from index 2
  for (int i = 2; i < signature.numberOfArguments; i++) {
    [inv setArgument:&arg atIndex:i];
    if (i < signature.numberOfArguments - 1) {
      arg = va_arg(args, id);
    }
  }
  va_end(args);

  [inv invoke];
} 
```*

# php - PHP ARRAY 在第三级排序

> ID：12250527
> 
> 赞同：-1
> 
> 时间：2012-09-03T15:20:56.697
> 
> 标签：php

嗨，我实际上是在尝试使用不同的键对第三级的数组进行排序。

下面是样本数组输入。

```
Array
(
    [19067] => Array
        (
            [Morrisville, PA] => 5.02
        )

    [18977] => Array
        (
            [Washington Crossing, PA] => 6.63
        )

    [08695] => Array
        (
            [Trenton, NJ] => 2.84
        )

    [08690] => Array
        (
            [Trenton, NJ] => 1
        )

    [08666] => Array
        (
            [Trenton, NJ] => 2.84
        )

    [08650] => Array
        (
            [Trenton, NJ] => 0
        )

    [08648] => Array
        (
            [Lawrence Township, NJ] => 2.88
        )

    [08647] => Array
        (
            [Trenton, NJ] => 2.84
        )

    [08646] => Array
        (
            [Trenton, NJ] => 2
        )

) 
```

任何人都可以帮我在第三级对上述数组进行排序吗

预期的结果应该是：

输出：

```
Array
(
    [08650] => Array
        (
            [Trenton, NJ] => 0
        )

    [08690] => Array
        (
            [Trenton, NJ] => 1
        )   

     [08646] => Array
        (
            [Trenton, NJ] => 2
        )

    [08666] => Array
        (
            [Trenton, NJ] => 2.84
        )   

    [08695] => Array
        (
            [Trenton, NJ] => 2.84
        )

    [08647] => Array
        (
            [Trenton, NJ] => 2.84
        )

    [08648] => Array
        (
            [Lawrence Township, NJ] => 2.88
        )

    [19067] => Array
        (
            [Morrisville, PA] => 5.02
        )

    [18977] => Array
        (
            [Washington Crossing, PA] => 6.63
        )   

) 
```

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:22:56.613

```
uasort($array, function (array $a, array $b) {
    return current($a) - current($b);
}); 
```

请注意注释：差异小于 1.0 的值将被排序为相同。您可能想要执行`(current($a) - current($b)) * 100`或以其他方式舍入该值，具体取决于您期望的值范围。

# jquery - HTML 格式的 Jquery 循环选项，例如

> ID：12250528
> 
> 赞同：1
> 
> 时间：2012-09-03T15:21:12.010
> 
> 标签：jquery, html, loops, options

有很多关于如何循环选择选项的例子，例如

[遍历 <select> 选项](https://stackoverflow.com/questions/2950152/jquery-iterate-through-select-options)

但我的问题是我必须遍历一个 HTML 字符串，例如：

```
 var s = "<option value="0">OptA</option><option value="1">OptB</option><option value="2">OptC</option>" 
```

请问如何循环遍历每个项目？我的想法是我有一个从 dropdownlist.innerHTML 获得的字符串，以及一个在 innerHTML 中的所有选项之间查找的 ID：

```
GetValueFromHTML(iValueToFind,strHTML){
  $(strHTML).each(function () {
    var iTempValue = 
    var OptionText = 
    if  (iTempValue == iValueToFind){
      alert(OptionText );
      }
     })
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:28:55.093

这似乎给出了你想要的结果，你非常接近。只需要`$(this).val()`真正的：

```
function GetValueFromHTML(valueToFind ,html){
    $(html).each(function () {
        var val = $(this).val();
        if  (val == valueToFind){
            alert($(this).text());
        }
    });
} 
```

[http://jsfiddle.net/K2p9n/](http://jsfiddle.net/K2p9n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:34:34.190

这会起作用：

```
function GetValueFromHTML(valueToFind ,html){
    alert ($('<select>' + html + '</select').find('[value=' + valueToFind + ']').text());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:26:28.793

```
var s = "<option value="0">OptA</option><option value="1">OptB</option><option value="2">OptC</option>";
var selectElement = document.createElement('select');
selectElement.innerHTML = s; 
```

从这里开始，您可以使用您看到的示例来循环选择列表中的选项。

# iis - 向 Windows 认证服务器发送匿名请求

> ID：12250530
> 
> 赞同：2
> 
> 时间：2012-09-03T15:21:19.067
> 
> 标签：iis, windows-authentication

我在 localhost 上有一个 IIS 网站，它被配置为使用 Windows 身份验证。

我想向它发送一个匿名（未经身份验证的）请求，但所有连接似乎都经过身份验证。

例如，如果我运行`curl`如下：

```
curl -v 'http://localhost:61057/MyApp' 
```

然后 curl 打印其完整的标题集，其中没有一个与身份验证相关：

```
* Connected to localhost (127.0.0.1) port 61057 (#0)
> GET /MyApp HTTP/1.1
> User-Agent: curl/7.24.0 (i686-pc-cygwin) libcurl/7.24.0 OpenSSL/0.9.8t zlib/1.2.5 libidn/1.22 libssh2/1.3.0
> Host: localhost:61057
> Accept: */* 
```

...但网络服务器`Context.User.Identity.Name`在回答请求时仍然在变量中有我的 Windows 用户名。

NTLM 身份验证是否以某种方式在传输层中发送？有没有办法为给定的请求关闭它？

# ios - UIImagePickerController overlayview在预览中倒置

> ID：12250531
> 
> 赞同：2
> 
> 时间：2012-09-03T15:21:23.143
> 
> 标签：ios, camera, uiimagepickercontroller, overlay-view

我想在拍摄照片时添加叠加视图。我可以成功添加叠加视图并拍摄照片。

点击捕获按钮后，将显示预览。在该预览屏幕中，叠加视图是上下颠倒的（大约 20 到 30 像素）。

选择**使用**按钮时，拍摄的图像将保存在相册中。在其中，图像很好。它仅在预览期间颠倒。

我附上了下面的代码，请指导我的错误。

```
-(void)viewDidLoad {

// ...
// Some other actions...

OverlayView *overlay = [[OverlayView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

UIImagePickerController *picker = [[UIImagePickerController alloc] init];

picker.sourceType = UIImagePickerControllerSourceTypeCamera;

picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

[picker setDelegate:self];  
picker.showsCameraControls = YES;
picker.navigationBarHidden = YES;
picker.toolbarHidden = YES;

picker.wantsFullScreenLayout = YES;

picker.cameraViewTransform = CGAffineTransformScale(picker.cameraViewTransform, 1.24299, 1.24299 );

picker.cameraOverlayView = overlay;

[self presentModalViewController:picker animated:YES];  
[picker release];

}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Access the uncropped image from info dictionary
UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

// Save image
    UIImage *overlayImage  = [UIImage imageNamed:@"img3.png"]; //foverlayImage image

    CGSize newSize = image.size;
    UIGraphicsBeginImageContext( newSize );

    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

    // Apply supplied opacity if applicable
    [overlayImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:1.0];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIImageWriteToSavedPhotosAlbum(newImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

}

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
UIAlertView *alert;

// Unable to save the image  
if (error)
    alert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                           message:@"Unable to save image to Photo Album." 
                                          delegate:self cancelButtonTitle:@"Ok" 
                                 otherButtonTitles:nil];
    // All is well
else 
        alert = [[UIAlertView alloc] initWithTitle:@"Success" 
                                           message:@"Image saved to Photo Album." 
                                          delegate:self cancelButtonTitle:@"Ok" 
                                 otherButtonTitles:nil];

    [alert show];
    alert.delegate = self;
    [alert release];
} 
```

在 OverlayView.m 中

```
- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Clear the background of the overlay:
        self.opaque = NO;
        self.backgroundColor = [UIColor clearColor];

        // Load the image to show in the overlay:
        UIImage *overlayGraphic = [UIImage imageNamed:@"img3.png"];
        UIImageView *overlayGraphicView = [[UIImageView alloc] initWithImage:overlayGraphic];
        overlayGraphicView.frame = CGRectMake(0, 0, 320, 460);
        [self addSubview:overlayGraphicView];
        [overlayGraphicView release];

    }

    return self;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:44:36.497

嘿，我正在寻找同样的东西，并遇到了这个链接，这解释了为什么它似乎是颠倒的！希望它有帮助 [http://trandangkhoa.blogspot.co.uk/2009/07/iphone-os-drawing-image-and-stupid.html](http://trandangkhoa.blogspot.co.uk/2009/07/iphone-os-drawing-image-and-stupid.html)

# actionscript-3 - 在 flex 3 中，需要将复选框标签的一部分设置为粗体

> ID：12250533
> 
> 赞同：0
> 
> 时间：2012-09-03T15:21:38.563
> 
> 标签：actionscript-3, apache-flex, flex3

在 flex 3 中，如何使部分复选框标签为粗体？说复选框标签是“记住数据网格上的值”。需要将文本“datagrid”单独加粗。任何人都可以请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:06:07.370

这不是完美的解决方案，但可以帮助您入门。如果您扩展 CheckBox 类，您可以覆盖该方法，并使用它的属性`updateDisplayList()`设置复选框的标签。`htmlText`

然后使用这个自定义复选框并传入一个带有 HTML 的标签。

此解决方案的问题：

*   超类没有测量 HTML 格式的文本（你可以实现`measure()`Flex 生命周期方法）
*   在 super.updateDisplayList() 完成所有工作之后，我们使用 `htmlText`属性将其撤消

HTMLTextCheckBox.as：

```
package
{
    import mx.controls.CheckBox;

    public class HtmlTextCheckBox extends CheckBox
    {
        public function HtmlTextCheckBox()
        {
            super();
        }

        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            super.updateDisplayList(unscaledWidth, unscaledHeight);
            textField.htmlText = label;
        }
    }
} 
```

使用它 MXML：

```
<local:HtmlTextCheckBox label="this is the &lt;b&gt;bold part&lt;/b&gt;"/> 
```

或者在 AS3 中：

```
var cb:HtmlTextCheckBox = new HtmlTextCheckBox();
cb.text = "this is the <b>bold part</b>"; 
```

# c - 什么是 Rss 信息？不是 Rss xml 提要

> ID：12250534
> 
> 赞同：1
> 
> 时间：2012-09-03T15:21:40.443
> 
> 标签：c

在redis源中我找到了“Rss Information”，但我不知道这是什么。

如果我使用带有查询字符串“文件 rss 信息”的 Google 搜索，我得到的唯一结果就像“RSS xml 提要”。

这是在源代码中定义的：

```
size_t zmalloc_get_rss(void) {
   int page = sysconf(_SC_PAGESIZE);
   size_t rss;
   char buf[4096];
   char filename[256];
   int fd, count;
   char *p, *x;

   snprintf(filename,256,"/proc/%d/stat",getpid());
   if ((fd = open(filename,O_RDONLY)) == -1) return 0;
   if (read(fd,buf,4096) <= 0) {
       close(fd);
       return 0;
   }
   close(fd);

   p = buf;
   count = 23; /* RSS is the 24th field in /proc/<pid>/stat */
   while(p && count--) {
       p = strchr(p,' ');
       if (p) p++;
   }
   if (!p) return 0;
   x = strchr(p,' ');
   if (!x) return 0;
   *x = '\0';

   rss = strtoll(p,NULL,10);
   rss *= page;
   return rss;
} 
```

这会获得进程内存吗？我只能猜测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:24:18.557

是的，RSS 的意思是“驻留集大小”。

请参阅[proc 的手册页](http://linux.die.net/man/5/proc)：

> 驻留集大小：进程在实际内存中的页数。这只是计入文本、数据或堆栈空间的页面。这不包括尚未按需加载或已换出的页面。

# java - 检查 BigDecimal 是否是 Java 1.4 中另一个 BigDecimal 的倍数

> ID：12250537
> 
> 赞同：3
> 
> 时间：2012-09-03T15:21:53.217
> 
> 标签：java, bigdecimal, java1.4

我需要检查一个 BigDecimal 实例是否是另一个 BigDecimal 实例的倍数。由于我仅限于 Java 1.4，因此无法使用`BigDecimal.remainder(...)`.

我想出了以下代码：

```
/**
 * Returns <code>true</code> if <code>multiple</code> is a multiple of <code>base</code>.
 *
 * @param multiple
 * @param base
 * @return
 */
public static boolean isMultipleOf(final BigDecimal multiple, final BigDecimal base)
{
    if (multiple.compareTo(base) == 0)
        return true;

    try
    {
        multiple.divide(base, 0, BigDecimal.ROUND_UNNECESSARY);
        return true;
    }
    catch(ArithmeticException e)
    {
        return false;
    }
} 
```

该代码假定仅当`multiple`除以的商`base`是整数时才不需要舍入。这个假设正确吗？

***编辑***
合并了 Lando 的提示，将商的比例显式设置为`0`. 否则，以下调用将错误地返回`true`：

```
isMultipleOf(new BigDecimal("10.25"), new BigDecimal("5")); 
```

***编辑***写了一个 JUnit 测试，发现我必须处理这两个和都是
的特殊情况。所以我在上面的代码中添加了一个相等性测试。`multiple``base``0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:28:56.717

javadoc说...

> 抛出：**ArithmeticException** - 如果 divisor==0 或 roundingMode==ROUND_UNNECESSARY 并且 this.scale() 不足以准确表示除法的结果。

因此，如果不充分，就会发生an的**假设似乎是正确的；**即余数非零。`ArithmeticException``scale()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T17:44:23.277

你应该改用这个：

multiple.divide(base, 0, BigDecimal.ROUND_UNNECESSARY);

因为如果你不通过零，它将应用股息的比例（除非你完全确定它的比例总是为零，在这种情况下你为什么不使用 BigInteger 呢？）

> ArithmeticException - val==0，或 roundingMode==ROUND_UNNECESSARY 和 **this.scale()**不足以准确表示除法的结果

[资源](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigDecimal.html#divide%28java.math.BigDecimal,%20int%29)

# php - 排序一个foreach，由数组中的一个值计算一个值

> ID：12250540
> 
> 赞同：-1
> 
> 时间：2012-09-03T15:22:13.477
> 
> 标签：php

我有一个数组如下：

```
$players = array(
    $player = array(
        'name'          => 'playername',
        'speed'         => '10',
        'agility'       => '10',
        'influence'     => '10'
    )
    etc 
```

然后我根据速度、敏捷性和影响力的总和计算一个 $score。

```
$score = $p['speed'] + $p['agility'] + $p['influence']; 
```

如何遍历我的数组，但将结果从最高到最低 $score 排序？

PS-> [http://pastebin.com/eUEQ5y4u](http://pastebin.com/eUEQ5y4u)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:26:42.227

您可以使用[`usort`](http://php.net/manual/en/function.usort.php)函数按您的自定义算法对其进行排序：

```
function score($player) {
    return $player['speed'] + $player['agility'] + $player['influence'];
}

function cmp($a, $b) {
    $scoreA = score($a);
    $scoreB = score($b);
    if($scoreA == $scoreB) {
        return 0;
    }
    return ($scoreA > $scoreB) ? -1 : 1;
}

usort($players, "cmp"); 
```

# java - 如何编写包含签名的 .RSA 文件（使用 java）

> ID：12250541
> 
> 赞同：1
> 
> 时间：2012-09-03T15:22:17.473
> 
> 标签：java, openssl, rsa, digital-signature, file-format

我的任务：

我有一个编写文本文件的 Java 应用程序。应用程序应使用 RSA/SHA1 对这些文件进行签名，以确保在传输期间或传输后不会更改它们。

我的第一个想法是在文本文件的末尾附加一个“ **RSA 签名块”。**但我没有发现有关如何格式化此块才能使用标准工具（OpenSSL？）验证文件的信息

在网上搜索了几个小时后，我觉得标准是编写一个附加**.rsa 扩展名**的文件。（假设我们有一个 Order123.txt 我们生成一个文件“Order123.txt.rsa”）但是我没有找到有关这些文件格式的信息。

我发现的唯一的东西是有.rsa文件的几个链接，它们可以用openssl打开，例如： http: [//file.downloadatoz.com/rsa-file-extension.html](http://file.downloadatoz.com/rsa-file-extension.html)

此外[http://download.java.net/jdk8/docs/technotes/guides/jar/jar.html](http://download.java.net/jdk8/docs/technotes/guides/jar/jar.html)谈到“META-INF/*.RSA”文件：

> 数字签名是 .SF 签名文件的签名版本。这些是不打算由人类解释的二进制文件。
> 
> 数字签名文件与 .SF 文件具有相同的文件名，但扩展名不同。扩展名取决于数字签名的类型。
> 
> .RSA（PKCS7 签名，SHA-256 + RSA）

所以它似乎是一种二进制格式......

有人可以解释**RSA 文件的格式**吗？也许如何最好用Java编写这种格式？（假设公钥/私钥在密钥库中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:57:27.613

这些文件是 PKCS#7 格式的签名文件。非常常见，几乎所有 S/Mime 工具链都可以创建这些。参见例如

[http://www.cis.upenn.edu/~bcpierce/courses/629/jdkdocs/tooldocs/win32/javakey.html](http://www.cis.upenn.edu/~bcpierce/courses/629/jdkdocs/tooldocs/win32/javakey.html)

请注意，这可以用于任意文件。

充气城堡[http://i-proving.com/2007/09/21/pkcs7-signatures-using-bouncy-castle/](http://i-proving.com/2007/09/21/pkcs7-signatures-using-bouncy-castle/)，[C# SignedCms 的 Java 实现](https://stackoverflow.com/questions/11013111/java-implementation-of-c-sharp-signedcms) 和[http://www.jensign.com/JavaScience/javacrypto/index .html](http://www.jensign.com/JavaScience/javacrypto/index.html)是一些示例。

不需要额外杂项的更有限的版本：[https](https://security.stackexchange.com/questions/13910/pkcs7-encoding-in-java-without-external-libs-like-bouncycastle-etc) ://security.stackexchange.com/questions/13910/pkcs7-encoding-in-java-without-external-libs-like-bouncycastle-etc可能有用。

德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:17:06.977

以下命令可能有助于查看签名文件：

```
unzip -p {file}.jar META-INF/{signer}.RSA | \
openssl pkcs7 -text -print_certs -inform DER 
```

# regex - 我可以使用正则表达式来获取子字符串吗

> ID：12250543
> 
> 赞同：0
> 
> 时间：2012-09-03T15:22:28.353
> 
> 标签：regex

我有一个具有 CDFSDDRCxxxCurryymmdd.xls(x) 的 excel 文件，其中 xxx 是一个数字，yymmdd 是一个日期。

我使用这段代码从文件名中获取 Cxxx。

```
GetCompanyIdResult cmpId =
                    PantareiDataClasses.GetCompanyId(Application.ActiveWorkbook.Name.Substring(7, 4)).FirstOrDefault(); 
```

在我的代码中的某个地方，我使用这段代码来检查文件是否具有正确的名称。所以我想知道是否可以使用正则表达式从我的文件名中查找和检索 Cxxx，而不是使用字符串操作。

那可能吗？瑞马丁斯

```
Match nameIsValid = Regex.Match(activeWorkbook.Name,
                                      @"CDFSDDRC(?<xxx>[0-9]+)Curr(?<yymmdd>[0-9][0-9][0|1][0-9][0-3][0-9])\.xls?");

                switch (nameIsValid.Success)
                {
                    case false:
                        throw new DdrFileNameFormatNotValid("DDR file has a wrong name format");
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:43:51.937

你的正则表达式看起来不错。现在您只需要提取命名的捕获组，使用`nameIsValid.Groups["xxx"].Value`：

```
string input = "CDFSDDRC123Curr120903.xls(x)";      
Match nameIsValid = Regex.Match(input, @"CDFSDDRC(?<xxx>[0-9]+)Curr(?<yymmdd>[0-9][0-9][0|1][0-9][0-3][0-9])\.xls?");
if (nameIsValid.Success) {
  string key = nameIsValid.Groups["xxx"].Value;
  Console.WriteLine(key);
} 
```

要提取日期部分，请`nameIsValid.Groups["yymmdd"].Value`改用。

**[演示](http://ideone.com/mplfn)**。

# javascript - Facebook 开放图将流/动作元标记作为参数发布？

> ID：12250544
> 
> 赞同：1
> 
> 时间：2012-09-03T15:22:30.863
> 
> 标签：javascript, facebook, facebook-graph-api

有没有办法通过：og：url，og：title，og：image，og：description而不在html页面的元标记上声明它？

```
FB.api('/me/recipebox:cook', 'post', 
  { recipe : 'http://www.example.com/pumpkinpie.html' }); 
```

[https://developers.facebook.com/docs/opengraph/actions/](https://developers.facebook.com/docs/opengraph/actions/)

我正在使用推送状态/单页应用程序，使用内部参数会更容易。

就像是：

```
FB.api('/me/recipebox:cook', 'post', 
  { recipe : my_json }); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:32:02.337

> 有没有办法通过：og：url，og：title，og：image，og：description而不在html页面的元标记上声明它？

不，因为 Open Graph 对象*是*一个 URL。

# jsf - CommandButton 做不同的事情

> ID：12250549
> 
> 赞同：0
> 
> 时间：2012-09-03T15:22:37.943
> 
> 标签：jsf

我的数据表上有一个命令按钮，有时我需要在新选项卡中显示报告（.jasper），*target=blank*，根据项目的情况，只需将信息放在另一个页面（注册页面）中，而不需要新标签。

这是可能的还是唯一的解决方案是两个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:05:59.227

尝试条件表达式语言：

```
target="#{myBean.myCondition ? 'blank' : 'self'}" 
```

这样你只会`target="blank"`在你的 bean 的条件为真时得到。

# c# - 确保我的 C# 桌面应用程序正在向我的 ASP .NET MVC 操作发出请求？

> ID：12250558
> 
> 赞同：2
> 
> 时间：2012-09-03T15:23:03.093
> 
> 标签：c#, asp.net, wpf, asp.net-mvc, security

我看到的问题**几乎**与这个问题相同，除了我想详细说明的细微但重要的差异。

假设我在 MVC 中有一个控制器和一个操作方法，因此它接受以下 URL 上的请求：[http](http://example.com/api/myapimethod?data=some-data-here) ://example.com/api/myapimethod?data=some-data-here 。

然后，这个 URL 会被 1000 个或更多分布在公众中的客户定期调用。原因是众包。全球的客户端帮助在我的服务器上提供全局缓存，这使得其他客户端更快地获取数据。

现在，如果我偷偷摸摸（我是），我可以进入 Fiddler、Ethereal、Wireshark 或任何其他数据包嗅探工具，并找出程序正在发出哪些请求。

通过弄清楚这一点，我还可以复制它们，并用错误的损坏数据填充服务。

确保在我的 ASP .NET MVC 操作方法中接收到的数据实际上来自桌面客户端应用程序，而不是用户发明的一些错误生成的数据的最佳方法是什么？

由于这一切都是基于众包，如果某些数据被伪造，我的用户能够“投票”，然后如果有足够的选票开始自动清理，这会是一个好主意吗？

我无法使用 SmartAssembly 之类的工具，所以很遗憾我的 .NET 程序是完全可反编译的。我意识到这可能无法以防错的方式完成，但我想知道我的最佳机会在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:48:09.850

任何解决方案最终都是不可靠的，因此您必须有效地将密钥提供给最终用户才能使用系统。

拥有一个用户可以投票否决不良内容的系统是最好的，但是您需要一个信誉系统或某种信任机制，以便您的用户可以分辨出不良数据是不良数据，因为它来自不受信任的来源。

SSL 只防御中间人攻击。

您花费多少时间来构建一个系统取决于它对您和您的用户有多重要以及有人攻击您的系统的可能性有多大

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:42:27.953

您在此处描述了几种方法：

[http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)

1°) 使用 SSL (HTTPS) 2°) 使用私钥/公钥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:36:21.917

没有办法。每次您允许代码在其他人具有管理权限的机器上运行时，您就将该系统上的安全功能委托给他们。

这意味着您必须能够识别用户并拥有滥用服务的惩罚系统。您还应该能够识别每个特定用户并能够断开他的连接。因此，这意味着创建用户帐户并分发密钥以使程序正常工作，对称或非对称，或者至少是授权 cookie。

# c++ - 可从多个对象实例写入的 C++ 全局变量

> ID：12250560
> 
> 赞同：0
> 
> 时间：2012-09-03T15:23:22.017
> 
> 标签：c++, global-variables

我可以创建一个全局变量（最好是数组或向量类型），它可以由同一类的多个对象实例写入（当然每次都是新行）？

谢谢你。

（注意：如果需要，我可以简要描述我的项目以提供更好的想法。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:24:09.633

听起来你正在寻找`static`会员。（或一个常规的全局变量，但由于它显然连接到一个类，而不是一个特定的实例，似乎一个`static`成员是要走的路）

```
class Foo
{
   static std::vector<int> vec;  //vec is common for all instances of Foo
};

//Foo.cpp
std::vector<int> Foo::vec;  //define it in the implementation file 
```

# android - 自定义键盘快捷键

> ID：12250563
> 
> 赞同：7
> 
> 时间：2012-09-03T15:23:32.877
> 
> 标签：android, keyboard, keyboard-shortcuts, shortcuts, ctrl

我希望我的应用程序支持键盘快捷键。许多设备，例如`Asus Transformer`具有`Ctrl`键的外部键盘（在 API 级别 11 上可用）。我编写了一些代码，以检查`Ctrl`密钥是否在模拟器中有效：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if(Build.VERSION.SDK_INT>10 &&
        event.getAction()==KeyEvent.ACTION_DOWN &&
        event.isCtrlPressed()){
    String actionType="NONE";
    final int keyCode = event.getKeyCode();
    switch(keyCode){
    case KeyEvent.KEYCODE_C:
        actionType = "COPY";
        break;
    case KeyEvent.KEYCODE_V:
        actionType = "PASTE";
        break;
    case KeyEvent.KEYCODE_X:
        actionType = "CUT";
        break;
    case KeyEvent.KEYCODE_R:
        actionType = "REFRESH";
        break;
    case KeyEvent.KEYCODE_A:
        actionType = "SELECT ALL";
        break;
    }
    Toast.makeText(ctx, actionType, Toast.LENGTH_SHORT).show();
    return true;
    }
    return super.dispatchKeyEvent(event);
} 
```

不幸的是，它在模拟器中不起作用，我无法在真实硬件上检查它。

我有两个问题：
1\. 它可以在设备上运行`Asus Transformer`吗？
2\. 为什么`Ctrl`key在模拟器中不起作用？

编辑：我试图找到我的问题的答案或解决方案，但谷歌和 SO 都没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:38:33.063

> **1\. 它可以在像 Asus Transformer 这样的设备上工作吗？**

我用物理键盘（华硕的标准扩展坞）检查了我的*华硕*Transformer TF101 *，***你的代码工作正常**。我认为您可以毫无问题地使用它。

 ***> **2\. 为什么CTRL键在模拟器中不起作用？**

查看[可以映射的按钮列表](http://developer.android.com/tools/help/emulator.html#KeyMapping)（例如使用`emulator -keyset`）我认为当前版本的模拟器不支持直接`Ctrl`键映射，所以你在这里不走运。***

# bash - bash 多规

> ID：12250564
> 
> 赞同：1
> 
> 时间：2012-09-03T15:23:34.653
> 
> 标签：bash, gauge

用这个[例子](http://unstableme.blogspot.com/2009/12/linux-dialog-utility-short-tutorial.html)

```
#!/bin/sh
#A gauge Box example with dialog
(
c=10
while [ $c -ne 110 ]
    do
        echo $c
        echo "###"
        echo "$c %"
        echo "###"
        ((c+=10))
        sleep 1
done
) |
dialog --title "A Test Gauge With dialog" --gauge "Please wait ...." 10 60 0 
```

我可以做一个量规。

我怎样才能用两个或多个仪表进行对话？

如同

```
[##   20% ]
[#### 40% ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T15:57:15.270

试试看`--mixedgauge`！

```
#! /bin/sh
# $Id: mixedgauge,v 1.4 2007/02/26 23:10:30 tom Exp $
: ${DIALOG=dialog}
background="An Example of --mixedgauge usage"

for i in 5 10 20 30 40 50 60 70 80 90 100
do
$DIALOG --backtitle "$background" \
        --title "Mixed gauge demonstration" \
        --mixedgauge "This is a prompt message,\nand this is the second line." \
                0 0 33 \
                "Process one"   "0" \
                "Process two"   "1" \
                "Process three" "2" \
                "Process four"  "3" \
                ""              "8" \
                "Process five"  "5" \
                "Process six"   "6" \
                "Process seven" "7" \
                "Process eight" "4" \
                "Process nine"  "-$i"
# break
sleep 1 
done 
```

通过[https://github.com/Archivists/ltfs-console/blob/master/samples/mixedgauge找到](https://github.com/Archivists/ltfs-console/blob/master/samples/mixedgauge)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T09:58:31.510

发布完整的 bash 脚本，演示监视两个后台任务，因为它似乎在其他任何地方都不容易找到。

```
#!/bin/bash
[ -n "$DEBUG" ] && set -x

TASK[0]=0
export TASK

task1() {
    file="/tmp/task1_progress"; echo 0 > $file
    for i in $(seq 0 10 100); do echo $i > $file; sleep 1; done
}

task2() {
    file="/tmp/task2_progress"; echo 0 > $file
    for i in $(seq 0 10 100); do echo $i > $file; sleep 2; done
}

task1 & task2 &

unset TIME_TO_FINISH PROGRESS STATUS
while /bin/true;
do
    unset TASKS
    for i in 1 2;
    do
        PROGRESS[$i]=$(cat /tmp/task${i}_progress)
        if [ ${PROGRESS[$i]} -eq 100 ];
        then
            STATUS[$i]=0
        else
            STATUS[$i]=-${PROGRESS[$i]}
        fi

        TASKS+=("Task $i" "${STATUS[$i]}")
    done

    # 0: success
    # 1: failed
    # 2: passed
    # 3: completed
    # 4: checked
    # 5: done
    # 6: skipped
    # 7: in progress
    # -X: 0-100, progress of process
    dialog \
        --title "Mixed gauge demonstration" \
        --backtitle "Backtitle" \
        --mixedgauge "This is a prompt message,\nand this is the second line." \
            0 0 $(($((${PROGRESS[1]}+${PROGRESS[2]}))/2)) \
            "${TASKS[@]}"

    I=0
    for a in 1 2; do [ ${PROGRESS[$a]} -ge 100 ] && I=$((I+1)); done

    [ $I -eq 2 ] && break
    sleep 1
done
echo waiting
wait

set +x 
```

# xcode - 在 Xcode 中的循环之间暂停

> ID：12250566
> 
> 赞同：0
> 
> 时间：2012-09-03T15:24:04.197
> 
> 标签：xcode, animation, for-loop, delay

我正在尝试在一种方法中创建一个 for 循环，该方法将在轮到敌人时为计算机控制的敌方玩家设置 6 次预定距离的动画。目前使用下面的代码，敌人会向玩家角色移动，但循环运行得太快了，所以每次移动时敌人都没有动画，它只动画最后的动作。

本质上，我试图做的是在循环结束时导致短暂的（0.75 秒）延迟，以将循环减慢到可接受的量。我在互联网上到处搜索这些信息，但我很惊讶我找不到答案。看起来它会非常简单。任何帮助将不胜感激！

```
for (int i=0; i<6; i++) {
    // Enemy NE
    if (enemyZombie.center.x < orcIdle.center.x && enemyZombie.center.y > orcIdle.center.y){

        [UIView animateWithDuration:.75 animations:^{ enemyZombie.center = CGPointMake(enemyZombie.center.x + 42.5, enemyZombie.center.y - 30); }];
    }
    // Enemy NW
    if (enemyZombie.center.x > orcIdle.center.x && enemyZombie.center.y > orcIdle.center.y){

        [UIView animateWithDuration:.75 animations:^{ enemyZombie.center = CGPointMake(enemyZombie.center.x - 42.5, enemyZombie.center.y - 30); }];
    }
    // Enemy SE
    if (enemyZombie.center.x < orcIdle.center.x && enemyZombie.center.y < orcIdle.center.y){

        [UIView animateWithDuration:.75 animations:^{ enemyZombie.center = CGPointMake(enemyZombie.center.x + 42.5, enemyZombie.center.y + 30); }];
    }
    // Enemy SW
    if (enemyZombie.center.x > orcIdle.center.x && enemyZombie.center.y < orcIdle.center.y){

        [UIView animateWithDuration:.75 animations:^{ enemyZombie.center = CGPointMake(enemyZombie.center.x - 42.5, enemyZombie.center.y + 30); }];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:50:56.103

您可以使用 UIView 选择器中的完成块`animateWithDuration:animations:completion:`递归地执行循环中的下一步，如下所示：

```
-(void)moveEnemyZombieWithSteps:(int)steps
{
    // check for end of loop
    if (steps == 0) return;

    // Enemy NE
    if (enemyZombie.center.x < orcIdle.center.x && enemyZombie.center.y > orcIdle.center.y)
    {

        [UIView animateWithDuration:.75
                         animations:^{ enemyZombie.center = CGPointMake(enemyZombie.center.x + 42.5, enemyZombie.center.y - 30);}
                         completion:^(BOOL finished){[self moveEnemyZombieWithSteps:steps - 1];}];
    }
    // Enemy NW
    ...
}

//start moving
moveEnemyZombieWithSteps(6); 
```

没有测试过代码，但你会明白的:-)

# pointers - 复制到 malloc() 分配的全局内存？

> ID：12250572
> 
> 赞同：3
> 
> 时间：2012-09-03T15:24:23.923
> 
> 标签：pointers, memory-management, cuda

CUDA 编程指南指出“`malloc()`可以使用运行时复制通过分配的内存（即，通过从设备内存调用任何复制内存函数）”，但不知何故我无法重现此功能。代码：

```
#include <cstdio>
__device__ int* p;

__global__ void allocate_p() {
  p = (int*) malloc(10);
  printf("p = %p  (seen by GPU)\n", p);
}

int main() {
  cudaError_t err;
  int* localp = (int*) malloc(10);

  allocate_p<<<1,1>>>();
  cudaDeviceSynchronize();

  //Getting pointer to device-allocated memory
  int* tmpp = NULL;
  cudaMemcpyFromSymbol(&tmpp, p, 4);
  printf("p = %p  (seen by CPU)\n", tmpp);

  //cudaMalloc((void**)&tmpp, 40);
  err = cudaMemcpy(tmpp, localp, 40, cudaMemcpyHostToDevice);
  cudaDeviceSynchronize();
  printf(" err:%i %s", (int)err, cudaGetErrorString(err));

  delete localp;
  return 0;
} 
```

崩溃并输出：

```
p = 0x601f920  (seen by GPU)
p = 0x601f920  (seen by CPU)
 err:11 invalid argument 
```

我收集到，主机在设备上看到了适当的地址，但不知何故不喜欢它来自`malloc()`.

如果我早先分配`cudaMalloc((void**)&np, 40);`然后将指针`np`作为参数传递给 kernel `allocate_p`，它将被分配给`p`（而不是`malloc()`），那么代码运行良好。

我在做什么错/我们如何`malloc()`在主机端功能中使用分配的设备内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:02:35.167

据我所知，无法使用主机 API 函数复制运行时堆内存。这在 CUDA 4.x 中肯定是不可能的，而 CUDA 5.0 候选版本并没有改变这一点。我能提供的唯一解决方法是使用内核“收集”最终结果并将它们填充到设备传输缓冲区或零拷贝内存中，这些内存可以通过 API 或直接从主机访问。[您可以在此答案](https://stackoverflow.com/a/12219377/681865)和[另一个问题](https://stackoverflow.com/q/9414020/681865)中看到此方法的示例，来自 NVIDIA 的 Mark Harris 确认这是 CUDA 运行时中（当时）当前实现的限制。

# orbeon - Orbeon 通用/全球转型服务

> ID：12250575
> 
> 赞同：0
> 
> 时间：2012-09-03T15:24:32.863
> 
> 标签：orbeon

我有一个 xsl 脚本，它使用表单构建器向每个表单构建添加通用功能。我希望每次打开表单时都在运行时应用脚本。我尝试按照[http://wiki.orbeon.com/forms/how-to/other/implement-transformation-service](http://wiki.orbeon.com/forms/how-to/other/implement-transformation-service)中的说明执行以下操作：

在 /WEB-INF/resources/page-flow.xml 我添加了以下行

```
...
<page path-info="/fr/([^/]+)/([^/]+)/(new|edit|view)(/([^/]+))?"  
 matcher="oxf:perl5-matcher" view="test.xsl"/>
... 
```

就在行前

```
<epilogue url="/config/epilogue.xpl"/> 
```

我还在 /WEB-INF/resources/apps/fr/ 中添加了 test.xsl：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xhtml="http://www.w3.org/1999/xhtml">

    xsl:template match="@*|node()" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/xhtml:html/xhtml:body">
        <xsl:copy>
            <xforms:output value="'test'"/>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

但是脚本永远不会应用于表单？我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:15:11.940

要专门为 Form Runner 执行此操作，您可以编辑[`unroll-form.xpl`](https://github.com/orbeon/orbeon-forms/blob/master/src/resources/apps/fr/unroll-form.xpl)，例如在管道中的其他所有内容之前添加您的转换。您可以通过在最后一个之后添加来做到这一点`p:param`：

```
<p:processor name="oxf:xslt">
    <p:input name="data" href="#data"/>
    <p:input name="config" href="my-transformation.xsl"/>
    <p:output name="data" id="transformed-data"/>
</p:processor> 
```

然后将出现的 2 次重命名为`#data`to `#transformed-data`。（您当然可以选择更能说明您的转换功能的名称。）

# oracle - 变量未在过程中替换。怎么了？

> ID：12250578
> 
> 赞同：0
> 
> 时间：2012-09-03T15:24:48.120
> 
> 标签：oracle, plsql

我创建了一个过程，如下所示

```
CREATE OR REPLACE PROCEDURE drop_if_exists (table_name IN varchar2)
IS
BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE table_name';
EXCEPTION
      WHEN OTHERS THEN
         IF SQLCODE != -942 THEN
             RAISE;
         END IF;
END; 
```

当我将它作为 drop_if_exists ( 'my_table' ) 运行时，它表示一切都已成功执行，但任何名为 my_table 的表在调用该过程后仍将存在。更改为大写没有区别。我猜这个变量根本没有被替换......关于如何修复它的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T15:28:17.567

您正在删除一个名为“table_name”的表，这与删除您在参数中传递的表有什么不同。

试试这个：

```
EXECUTE IMMEDIATE 'DROP TABLE ' || table_name ; 
```

无论如何，我不建议这样做。您的代码具有潜在危险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T15:28:02.917

```
EXECUTE IMMEDIATE 'DROP TABLE ' ||table_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:32:08.437

你所做的实际上是错误的，你应该这样做：

立即执行“删除表”|| 表名；其中 table_name 是包含表名称的参数，而不是您在示例中尝试的字符串

# php - Mysql查询有时并不总是失败

> ID：12250579
> 
> 赞同：1
> 
> 时间：2012-09-03T15:24:50.893
> 
> 标签：php, mysql

我在 PHP 页面中有一个简单的 mysql 查询。查询有点像这样-

```
$q=mysql_query("SELECT * FROM ip_tables");  
echo mysql_num_rows($q); 
```

中的行数`ip_tables`很简单`5-10`。问题是这个简单的查询有时会无缘无故地失败。例如，有时我加载页面并找到错误消息`Warning: invalid argument supplied to mysql_num_rows. resource required, boolean given in ...`。

但是此时如果我刷新页面，则不会发生错误，并且会显示正确的行号。这个问题有时并不总是发生。有人对此有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T15:26:57.823

这将在您的错误日志文件中记录 mysql 错误： mysql_query("SELECT * FROM ip_tables") 或 error_log(mysql_error());

# python - 从维基百科解析出生和死亡日期？

> ID：12250580
> 
> 赞同：10
> 
> 时间：2012-09-03T15:24:54.107
> 
> 标签：python, mediawiki, wikipedia, wikipedia-api, mediawiki-api

我正在尝试编写一个 python 程序，可以在维基百科中搜索人们的出生日期和死亡日期。

例如，阿尔伯特爱因斯坦出生于：1879 年 3 月 14 日；逝世：1955 年 4 月 18 日。

我从[使用 Python 获取 Wikipedia 文章开始](https://stackoverflow.com/questions/120061/fetch-a-wikipedia-article-with-python)

```
import urllib2
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
infile = opener.open('http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvsection=0&titles=Albert_Einstein&format=xml')
page2 = infile.read() 
```

这是可行的。`page2`是来自 Albert Einstein 的维基百科页面的部分的 xml 表示。

我查看了本教程，现在我有了 xml 格式的页面... [http://www.travisglines.com/web-coding/python-xml-parser-tutorial](http://www.travisglines.com/web-coding/python-xml-parser-tutorial)，但我不明白如何获取我想要的信息（出生和死亡日期）来自 xml。我觉得我必须接近，但是，我不知道如何从这里开始。

**编辑**

经过几次回复，我已经安装了 BeautifulSoup。我现在处于可以打印的阶段：

```
import BeautifulSoup as BS
soup = BS.BeautifulSoup(page2)
print soup.getText()
{{Infobox scientist
| name        = Albert Einstein
| image       = Einstein 1921 portrait2.jpg
| caption     = Albert Einstein in 1921
| birth_date  = {{Birth date|df=yes|1879|3|14}}
| birth_place = [[Ulm]], [[Kingdom of Württemberg]], [[German Empire]]
| death_date  = {{Death date and age|df=yes|1955|4|18|1879|3|14}}
| death_place = [[Princeton, New Jersey|Princeton]], New Jersey, United States
| spouse      = [[Mileva Marić]]&amp;nbsp;(1903–1919)&lt;br&gt;{{nowrap|[[Elsa Löwenthal]]&amp;nbsp;(1919–1936)}}
| residence   = Germany, Italy, Switzerland, Austria, Belgium, United Kingdom, United States
| citizenship = {{Plainlist|
* [[Kingdom of Württemberg|Württemberg/Germany]] (1879–1896)
* [[Statelessness|Stateless]] (1896–1901)
* [[Switzerland]] (1901–1955)
* [[Austria–Hungary|Austria]] (1911–1912)
* [[German Empire|Germany]] (1914–1933)
* United States (1940–1955)
}} 
```

所以，更接近了，但我仍然不知道如何以这种格式返回 death_date。除非我开始用`re`? 我可以做到，但我觉得我在这项工作中使用了错误的工具。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T15:31:47.587

您可以考虑使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)或[lxml](http://lxml.de)之类的库来解析响应 html/xml。

您可能还想看看[`Requests`](http://docs.python-requests.org/en/latest/index.html)，它有一个更简洁的 API 来发出请求。

* * *

`Requests`这是使用,`BeautifulSoup`和的工作代码`re`，可以说不是这里的最佳解决方案，但它非常灵活，可以针对类似问题进行扩展：

```
import re
import requests
from bs4 import BeautifulSoup

url = 'http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvsection=0&titles=Albert_Einstein&format=xml'

res = requests.get(url)
soup = BeautifulSoup(res.text, "xml")

birth_re = re.search(r'(Birth date(.*?)}})', soup.revisions.getText())
birth_data = birth_re.group(0).split('|')
birth_year = birth_data[2]
birth_month = birth_data[3]
birth_day = birth_data[4]

death_re = re.search(r'(Death date(.*?)}})', soup.revisions.getText())
death_data = death_re.group(0).split('|')
death_year = death_data[2]
death_month = death_data[3]
death_day = death_data[4] 
```

* * *

根据@JBernardo 的建议，使用 JSON 数据和`mwparserfromhell`，对于这个特定用例有一个更好的答案：

```
import requests
import mwparserfromhell

url = 'http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&rvsection=0&titles=Albert_Einstein&format=json'

res = requests.get(url)
text = res.json["query"]["pages"].values()[0]["revisions"][0]["*"]
wiki = mwparserfromhell.parse(text)

birth_data = wiki.filter_templates(matches="Birth date")[0]
birth_year = birth_data.get(1).value
birth_month = birth_data.get(2).value
birth_day = birth_data.get(3).value

death_data = wiki.filter_templates(matches="Death date")[0]
death_year = death_data.get(1).value
death_month = death_data.get(2).value
death_day = death_data.get(3).value 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T19:43:23.960

首先，使用[pywikipedia](https://www.mediawiki.org/wiki/Manual%3aPywikipediabot)。它允许您通过高级抽象接口查询文章文本、模板参数等。其次，我会使用`Persondata`模板（查看文章末尾）。[此外，从长远来看，您可能会对Wikidata](https://meta.wikimedia.org/wiki/Wikidata)感兴趣，这将需要几个月的时间来介绍，但它将使 Wikipedia 文章中的大多数元数据易于查询。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-03T15:43:28.430

**第一：**维基百科 API 允许使用**JSON**而不是 XML，这将使事情变得更容易。

**第二**：根本不需要使用 HTML/XML 解析器（内容不是 HTML，容器也不需要）。您需要解析的是JSON 的“修订”标签内的这种**Wiki格式。**

[在此处](http://www.mediawiki.org/wiki/Alternative_parsers)检查一些 Wiki 解析器

* * *

这里似乎令人困惑的是，API 允许您请求某种格式（XML 或 JSON），但这只是您要解析的真实格式的某些文本的容器：

这个： `{{Birth date|df=yes|1879|3|14}}`

使用上面链接中提供的解析器之一，您将能够做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T09:25:15.300

该`persondata`模板现已弃用，您应改为访问 Wikidata。参见[维基数据：数据访问](https://www.wikidata.org/wiki/Wikidata:Data_access "维基数据:数据访问")。我在 2012 年的早期（现已弃用）答案如下：

> 您应该做的是解析`[{{persondata}}](http://en.wikipedia.org/wiki/Wikipedia:Persondata)`大多数传记文章中的模板。现有[的工具可以轻松地以编程方式提取此类数据](http://en.wikipedia.org/wiki/Wikipedia:Persondata#Extraction_of_persondata)，使用您现有的知识和其他有用的答案，我相信您可以完成这项工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-11T00:55:30.070

我遇到了这个问题，并感谢[@Yoshiki](https://stackoverflow.com/users/2812733/yoshiki)的[回答](https://stackoverflow.com/a/56103171/2683)中提供的所有有用信息，但是需要一些综合才能找到一个可行的解决方案。在这里分享以防对其他人有用。对于那些希望分叉/改进它的人，该代码也在[这个要点中。](https://gist.github.com/jsundram/530324b4dbdaf83692d4997967d41bdc)

特别是，这里的错误处理方式并不多......

```
import csv
from datetime import datetime
import json
import requests
from dateutil import parser

def id_for_page(page):
    """Uses the wikipedia api to find the wikidata id for a page"""
    api = "https://en.wikipedia.org/w/api.php"
    query = "?action=query&prop=pageprops&titles=%s&format=json"
    slug = page.split('/')[-1]

    response = json.loads(requests.get(api + query % slug).content)
    # Assume we got 1 page result and it is correct.
    page_info = list(response['query']['pages'].values())[0]
    return  page_info['pageprops']['wikibase_item']

def lifespan_for_id(wikidata_id):
    """Uses the wikidata API to retrieve wikidata for the given id."""
    data_url = "https://www.wikidata.org/wiki/Special:EntityData/%s.json"
    page = json.loads(requests.get(data_url % wikidata_id).content)

    claims = list(page['entities'].values())[0]['claims']
    # P569 (birth) and P570 (death) ... not everyone has died yet.
    return [get_claim_as_time(claims, cid) for cid in ['P569', 'P570']]

def get_claim_as_time(claims, claim_id):
    """Helper function to work with data returned from wikidata api"""
    try:
        claim = claims[claim_id][0]['mainsnak']['datavalue']
        assert claim['type'] == 'time', "Expecting time data type"

        # dateparser chokes on leading '+', thanks wikidata.
        return parser.parse(claim['value']['time'][1:])
    except KeyError as e:
        print(e)
        return None

def main():
    page = 'https://en.wikipedia.org/wiki/Albert_Einstein'

    # 1\. use the wikipedia api to find the wikidata id for this page
    wikidata_id = id_for_page(page)

    # 2\. use the wikidata id to get the birth and death dates
    span = lifespan_for_id(wikidata_id)

    for label, dt in zip(["birth", "death"], span):
        print(label, " = ", datetime.strftime(dt, "%b %d, %Y")) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-12T20:23:49.657

2019 年的一种替代方法是使用 Wikidata API，除其他外，它以结构化格式公开出生和死亡日期等传记数据，无需任何自定义解析器即可轻松使用。许多 Wikipedia 文章的信息依赖于 Wikidata，因此在许多情况下，这与您使用 Wikipedia 数据相同。

例如，查看[Albert Einstein 的 Wikidata 页面](https://www.wikidata.org/wiki/Q937)并搜索“出生日期”和“死亡日期”，您会发现它们与 Wikipedia 中的相同。Wikidata 中的每个实体都有一个“声明”列表，它们是“属性”和“值”对。要知道爱因斯坦何时出生和死亡，我们只需要在语句列表中搜索适当的属性，在本例中为[P569](https://www.wikidata.org/wiki/Property:P569)和[P570](https://www.wikidata.org/wiki/Property:P570)。要以编程方式执行此操作，最好以 json 格式访问实体，您可以使用以下 url 结构来执行此操作：

[https://www.wikidata.org/wiki/Special:EntityData/Q937.json](https://www.wikidata.org/wiki/Special:EntityData/Q937.json)

作为一个例子，以下是`P569`关于爱因斯坦的声明：

```
 "P569": [
          {
            "mainsnak": {
              "property": "P569",
              "datavalue": {
                "value": {
                  "time": "+1879-03-14T00:00:00Z",
                  "timezone": 0,
                  "before": 0,
                  "after": 0,
                  "precision": 11,
                  "calendarmodel": "http://www.wikidata.org/entity/Q1985727"
                },
                "type": "time"
              },
              "datatype": "time"
            },
            "type": "statement", 
```

[您可以在本文](https://www.wikidata.org/wiki/Help:About_data)中了解有关访问 Wikidata 的更多信息，以及更具体地了解[Help:Dates](https://www.wikidata.org/wiki/Help:Dates)中的日期结构。

# ruby-on-rails - Product.list 工作正常，但 Product.info 返回产品不存在（错误 101）

> ID：12250581
> 
> 赞同：0
> 
> 时间：2012-09-03T15:24:57.137
> 
> 标签：ruby-on-rails, ruby, magento, xml-rpc

正如题主所说，真的。根据给定过滤器列出产品的 RPC 工作正常，但是当我尝试在产品上调用 product.info 时，Magento 坚持认为该产品不存在。我找不到任何将 product.info 与 Ruby 一起使用的工作示例，但如果有人有一个，我将非常感激。

返回错误 101 的代码是：

```
client.call('call', session_id, 'product.info', [:sku, 'ProductXYZ']) 
```

.. 其中 ProductXYZ 是 Product.list 预先列出的 sku。假设会话 ID 是有效的，这样 :)

编辑：我应该指出，我在 PHP 上使用相同系统的经验让我相信 Magento 可能不是通过 sku 搜索，但我不知道如何说服它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:57:46.477

我认为问题出在你的电话上。您正在传入`:sku`字符串，但您没有告诉 Web 服务它们已连接。尝试这个：

`client.call('call',session_id,'product.info',[:sku =>'ProductXYZ'])`

或者也许是这样：

`client.call('call',session_id,'product.info',{:sku =>'ProductXYZ'})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T14:58:42.223

尝试在您的 sku 之后放置一个空格：

```
client.call('call', session_id, 'product.info', [:sku, 'ProductXYZ ']) 
```

代替

```
client.call('call', session_id, 'product.info', [:sku, 'ProductXYZ']) 
```

如果您的 sku 是像 12345 这样的数字，这会有所帮助

# javascript - 如何在 Highchart 中使列和 y 轴之间有 1px 的空间？

> ID：12250587
> 
> 赞同：5
> 
> 时间：2012-09-03T15:25:29.680
> 
> 标签：javascript, jquery, css, charts, highcharts

我必须使用在列和 Y 轴之间有 1px 空间的 highcharts 做一个柱形图，我怎样才能将我想要的图表中的 1px 空间添加到我做的图表中，这些是我做的代码：（对不起，我没有足够的声誉来添加图像，这就是我当时没有发布的原因）

```
var data = [ 20, 29, 25, 29, 21, 17, 20, 19, 18]; 
createMeasuresGraph(data, "quintals-sugar-graph");
function createMeasuresGraph(data, container) {
    data[0] = { color: '#55B647', y: data[0] };
    data[data.length -2 ] = { color: '#F15B49', y: data[data.length -2 ] };
    var chart = new Highcharts.Chart({
        chart: {
            marginBottom: 1,
            marginLeft: 0,
            marginRight: 0,
            marginTop: 0,
            renderTo: container,
            type: 'column',
        },
        credits: {
            enabled: false
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            column: {
                pointWidth: 5,
            },
            series: {
                borderWidth: .1,

            }
        },
        series: [{
            data: data,
            color: '#95D2F3',
            shadow: false,
        }],
        title: {
            text: ''
        },
        tooltip: {
            enabled: false
        },
        xAxis: {
            labels: {
                enabled: false
            },
            title: {
                enabled: false
            },
            lineColor: '#CBCBCB',
            tickWidth: 0
        },
        yAxis: {
            endOnTick: false,
            gridLineWidth: 0,
            labels: {
                enabled: false
            },
            startOnTick: false,
            minPadding: 0.5,
            title: {
                text: ""
            }
        }
    });
} 
```

我还看到所有列之间的空间都不相同，也许我使用了错误的方法来获取空间，最好的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T21:00:22.057

你想要每列之间有 1px 的空间吗？

我会根据绘图的大小/列数计算列宽：

```
var colWidth = ($('#quintals-sugar-graph').width() / data.length) + 1; 
```

然后将“borderWidth”设置为 1px 以提供空间：

```
 plotOptions: {
        column: {
            pointWidth: colWidth,
            borderWidth: 1
        },

    }, 
```

[在这里](http://jsfiddle.net/gTaZ9/)拉小提琴。

![在此处输入图像描述](../Images/08420793a7d390273f65b2135ddfd244.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T12:45:10.480

你真的需要宽度正好是 1px 吗？如果没有，以下内容也会在列之间留下最小空间，并且会更方便：

```
plotOptions: {
    column: {
        pointPadding: 0,
        groupPadding: 0
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-22T16:59:10.170

你可以简单地做：

```
plotOptions: {
  column: {
    pointPadding: 0,
    groupPadding: 0,
    borderWidth: 1
  }
}, 
```

# extjs - EXTJS MVC 树面板

> ID：12250600
> 
> 赞同：1
> 
> 时间：2012-09-03T15:26:12.110
> 
> 标签：extjs, treeview, extjs4, extjs-mvc

单击按钮时，我试图拥有一棵树。基本上这个视图在顶部有一个工具栏，我希望树显示在工具栏下方。首先，我很困惑我应该使用什么 xtype，无论是

```
xtype : 'treepanel' 
```

或其

```
xtype : 'treeview'. 
```

这是我的树的代码

```
Ext.define('Campus.view.Hierarchy', {
    alias: 'widget.hierarchy',
    extend: 'Ext.panel.Panel',

    initComponent: function () {
        var config = {
            xtype: 'panel',
            border: false,
            autoScroll: true,
            baseCls: 'topMenu',

            dockedItems: [{
                xtype: 'toolbar',
                border: false,
                dock: 'top',
                items: [{
                    xtype: 'button',
                    text: LANG.BTADDREG,
                    iconCls: 'icon-add-tb',
                    cls: 'tip-btn',
                    iconAlign: 'right',
                    action: 'addRegion',
                    id: 'ADDREGION'
                }],
                items: [{
                    xtype: 'treepanel',
                    title: '',
                    border: false,
                    enableDD: true,
                    viewConfig: {
                        enableDD: true,
                        plugins: {
                            ptype: 'treeviewdragdrop'
                        }
                    },
                    collapsible: false,
                    useArrows: true,
                    rootVisible: false,
                    store: 'HierarchyTree',

                    multiSelect: false,
                    singleExpand: false,
                    id: 'TREE'

                }]
                var holder = Ext.getCmp('center');
                holder.remove(0);
                holder.add(Ext.apply(config));
            } 
```

我在树内定义商店，因为在 app/store 文件夹中定义树商店，显示错误如下：

```
me.store.getRootNode is not a function
node: me.store.getRootNode() 
```

/模型

```
Ext.define('App.model.HierarchyTree', {
extend : 'Ext.data.Model',
fields : ['Title', 'ID', 'LevelID', 'ParentID']
}); 
```

/店铺

```
Ext.define('App.store.HierarchyTree', {
extend : 'Ext.data.Store',
model : 'Campus.model.HierarchyTree',
storeID : 'HierarchyTree',

proxy : {
    type : 'ajax',
    url : 'data/Locations.aspx',
    reader : {
        type : 'json',
        root : 'Rows'
    },
    actionMethods : {
        create : 'POST',
        read : 'POST'
    },
    extraParams : {
        mode : 'HIERARCHYFULLLIST'

    }
},
autoLoad : true 
```

});

另外，当我使用时`xtype :'treepanel'`，它只显示一个水平滚动条，没有别的。当我使用时`xtype: 'treeview'`，它的显示

```
me.panel is undefined
treeStore = me.panel.getStore(); 
```

谁能告诉我我做错了什么

编辑

配置应用于 Ext.getCmp('center') 因为应用程序分为三个部分，所以每当我们显示一个视图时，我们都会抓住应用程序的中心区域，然后显示它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:34:36.610

您的代码有一些错误。您在面板配置中有两个“项目”，第一个应该是“tbar”。

另一个错误是您如何添加商店，您应该只添加类`store : 'HierarchyTree'`或创建商店`store: Ext.create('App.store.HierarchyTree',{})`。

你应该使用树形面板，因为树形视图只是树形面板使用的视图。添加此修复程序，看看它是否有效，或者是否不发布新问题。希望能帮助到你。

**编辑**

好的，另一件事，[initComponent](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel-method-initComponent)函数**必须**包含对父函数的调用。

```
this.callParent(); // at the end of the initComponent function. 
```

而且我还有一些问题，为什么要将配置应用于通过 ext.getCmp 获得的项目，这不是“Campus.view.Hierarchy”对象的配置吗？如果是这样，您应该直接应用于“this”对象。

```
Ext.apply(this,config);
this.callParent(); 
```

就像现在一样，它没有应用配置，因为 apply 需要两个参数，即目标对象和配置对象。

**编辑** 关于配置的问题，你不能像这样将配置应用到中心面板，因为它没有被渲染。因此，您应该将配置添加到当前面板，并将当前面板添加到视口，而不是这样做，我猜它有布局边框。这应该是初始化组件函数：

```
config = {
...}
Ext.apply(this,config);
this.callParent(); 
```

并且包含中心区域的面板应该将面板作为一个项目。

```
 ...some viewport...
   layout:'border',
   items: [
        { 
           xtype:'hierarchy',
           region: 'center'
        }
   ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:19:21.353

谢谢nscrob。你太棒了：）对于初学者来说，你很耐心地提供帮助。好的，现在商店正在加载并且能够看到响应

```
{"text":"Asia Pacific","id":"537","level":"1", "expanded": 
false,"singleClickExpand":true,"children":[{"text":"Japan", "cls":"xtreenode-Level2-
Indent", "id":"538", "hl1":"537","level":"2","singleClickExpand":true, "expanded": false,
"children":[{}] 
```

但由于某种原因，树没有显示。我正在努力。当我在萤火虫窗口中浏览 html 时，它显示的树的相同 div id 与停靠菜单重叠，它就像一个水平滚动条。所以，我只是想，错误在哪里

# marklogic - 在 Marklogic 4.2.9 中设置 Max Time Out 是否需要重新启动服务器？

> ID：12250603
> 
> 赞同：0
> 
> 时间：2012-09-03T15:26:25.643
> 
> 标签：marklogic

我正在使用集群 ML 4.2.9 服务器更新**XDBC**服务器配置

```
admin:appserver-set-max-time-limit($config,$id,$maxTimeLimit )
admin:save-configuration-without-restart() 
```

然而，在设置了这个配置之后，MarkLogic 指定了 2 种持久化这个变化的方法。

> 1.  管理员：保存配置，无需重启（）
> 2.  管理员：保存配置（）

对于 1，ML 文档指出“如果您使用此功能保存任何需要重新启动服务器的更改（“冷”更改，例如 App Server 端口分配更改），则更改将在下次 MarkLogic Server 重新启动时生效（尽管它们将保存在配置中）”

有人可以告诉我，`admin:appserver-set-max-time-limit`是冷变化还是热变化。意思是，如果我使用`admin:save-configuration-without-restart()`（我打算使用），我的更改会尽快生效。否则，我将不得不将这些更改按计划进行，以便将服务器停机时间考虑在内。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:38:13.647

我刚刚运行了 xquery

```
admin:appserver-set-max-time-limit($config,$id,$maxTimeLimit )
admin:save-configuration-without-restart() 
```

并设置 $maxTimeLimit=60 秒，我仍然可以看到其他 XQueries 运行超过 1 分钟。所以，我猜这个改变需要服务器冷重启。

但是，如果有人知道，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T18:20:59.573

这是一个热变化。您可以在管理 UI 中看到这一点：“最大时间限制”旁边没有星号 (*)。

但是您的代码看起来很有趣，我认为这就是它不起作用的原因。再看一下[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/admin.xml&category=Admin+Library&function=admin上的示例:save-configuration-without-restart](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/admin.xml&category=Admin+Library&function=admin:save-configuration-without-restart)

```
let $config := admin:get-configuration()
let $spec := admin:forest-set-enabled($config, 
  xdmp:forest("myForest"), fn:true() )
return
  admin:save-configuration-without-restart($spec) 
```

您的代码缺少 admin:save-configuration-without-restart() 的参数，因此它什么也不做。此外，保存新版本的配置至关重要。XQuery 变量通常是不可变的，因此示例使用一个新变量来执行此操作。您也可以回收相同的变量名，但重要的是要了解这是重用而不是突变。

```
let $config := admin:get-configuration()
let $config := admin:forest-set-enabled($config,
  xdmp:forest("myForest"), fn:true() )
return
  admin:save-configuration-without-restart($config) 
```

或者这更接近我通常做的，`xdmp:set`用于突变。我不会`xdmp:set`在大多数应用程序代码中使用，但对于部署而言，引入可变性的好处超过了缺点。

```
declare variable $CFG := admin:get-configuration() ;

xdmp:set(
  $CFG, admin:forest-set-enabled($CFG, xdmp:forest("myForest"), fn:true())
,
admin:save-configuration-without-restart($CFG) 
```

对此进行测试的一种方法是查看管理 UI。如果它没有反映您的更改，无论是否重新启动，那么您的代码有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:59:43.397

@mlakele 这是我使用的实际代码

```
xquery version "1.0-ml"; 

import module namespace admin = "http://marklogic.com/xdmp/admin" 
          at "/MarkLogic/admin.xqy";

declare variable $maxTimeLimit := 60;
declare variable $defaultTimeLimit := 60;

if ($defaultTimeLimit<=$maxTimeLimit) 
then ( 
    let $config := admin:get-configuration()
    let $groupid := admin:group-get-id($config, "Default")
    let $ids:= admin:group-get-xdbcserver-ids($config, $groupid)
    return (
            for $id in $ids 
                        return 
            let $new_config := admin:appserver-set-max-time-limit($config,$id,$maxTimeLimit )
                let $final_config := admin:appserver-set-default-time-limit($new_config,$id,$defaultTimeLimit )
                return admin:save-configuration-without-restart($final_config)

))
else () 
```

这对我有用，我可以在管理 UI 中看到超时值已更新。但是，当我运行另一个通常需要 60 多秒的 XQuery 时，它不会超时。有什么理由吗？此外， http: [//docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http ://pubs/5.0doc/apidoc/admin.xml&category=Admin+Library&function=admin:save 的示例-configuration-without-restart](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/admin.xml&category=Admin%20Library&function=admin%3asave-configuration-without-restart)不谈使用`admin:forest-set-enabled($config,xdmp:forest("myForest"), fn:true() )`

真的需要调用 admin:forest-set-enabled 吗？如我所见，配置更改已存储（尽管它们无效）

# javascript - 如何自动验证不同的站点？

> ID：12250607
> 
> 赞同：0
> 
> 时间：2012-09-03T15:26:37.117
> 
> 标签：javascript, wordpress, http, authentication, http-authentication

我有一个 Wordpress 网站，我正在使用使用基本 HTTP 身份验证的 3rd 方搜索提供者的 API。

当用户在我的网站上搜索时，JS 将搜索请求提交给 3rd 方搜索提供程序，如果经过身份验证，它将返回结果，如果没有，则要求用户身份验证。

现在，客户不希望进行身份验证过程，但所有访问我的页面的用户都应该自动为 3rd 方搜索提供商（LDC 搜索）进行身份验证。

我设法通过[http://username:password@example.com](http://username:password@example.com)为大多数浏览器实现了这一点，这不是一个可接受的解决方案，因为 any1 可以看到密码，它在 IE 中不起作用。

首先：我坚信，如果不更改身份验证方法或通过 js 或通过链接自动填写密码（这需要将通行证发送给所有客户端），这是不可能的，如果我错了，请纠正我？

其次：是否有任何（半）安全的方式来跳过身份验证或以安全的方式自动填充密码而不更改 3rd 方插件？

第三：如果这是不可能的，那么创建身份验证的最佳方法是什么？我可以告诉搜索提供者什么，以便他可以将他的 API 更改为具有引用过滤器或类似的东西？最好的问候，并感谢 4 提前帮助页面：[http ://www.gotomidtown.co.uk/ldc-search/](http://www.gotomidtown.co.uk/ldc-search/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:35:53.480

使用 HTTP 基本身份验证，发出请求的人必须提交用户名和密码才能进行身份验证。这意味着发出请求的人需要知道用户名和密码。如果不向客户端公开用户凭据，则无法让客户端向 HTTP Basic 安全站点发出请求。即使您可以将其从 URL 中隐藏起来，从而使最终用户无法看到它，但对于任何想在正确位置（网络请求检查选项卡等）查看的人来说，它仍然是可见的。

您想要的是一种第三方身份验证形式，您的服务器通过 API 提供者进行身份验证并接收限时令牌。然后，您将用户发送到带有该令牌的 URL，API 提供者将接受该令牌并允许用户进行一次身份验证，而无需提供常量密钥。本质上，您以这种方式使用一次性密码。API 提供者必须明确支持和实现这种机制。

# javascript - JavaScript 严格模式下“this”的行为不一致

> ID：12250609
> 
> 赞同：2
> 
> 时间：2012-09-03T15:26:45.297
> 
> 标签：javascript, this, strict

*更新*

为清楚起见：@FelixKing：是的，我希望`this`在调用时仍然未定义`window.foo()`，原因如下：因为，在 JavaScript 中：

```
function foo()
{
    console.log('I am a function');
} 
```

（*几乎*）与以下内容相同：

```
var foo = function()
{
    console.log('I am a function');
} 
```

并`foo === window.foo`评估为真，我希望他们都表现得一样。如果函数是变量，并且 JS 回退到全局对象（在函数 x 内部，变量未声明但您使用它，JS 会*冒泡*通过所有范围，直到全局对象，直到找到有问题的变量，或者它在全局级别上创建它），是否预先指定`window`对象无关紧要。然而，当你这样做时，行为会发生变化，这是我没想到的。
对于为什么会出现这种情况，我有一种*直觉*（我定义的是方法，而不是变量），但话又说回来，对于全局对象，它们之间几乎没有区别。`var c = 'Variable'; console.log(window.c === c);`记录真实等...但我想知道*什么*区别实际上是，以及它是如何工作的（在所有级别上）。

我已经准备好接受这一点，`foo.apply(this,[]);`或者`foo.apply(window,[]);`允许你强制`this`指向全局对象，但不是`window.foo();`. 如果严格是为了保护全局对象，我会说这会让后门大开。例如，我偶尔会发现自己调用函数，具体取决于变量的值。为此，我使用`window[myVar]();`，无论是否严格，这意味着`this` *将*指向全局对象，而如果我直接调用该函数，则不会。也就是说，在我看来，不一致。

* * *

我`this`在严格模式下遇到了关键字的一些奇怪行为。不要误会我的意思，我知道[在严格的函数中](https://stackoverflow.com/questions/9822561/why-is-this-in-an-anonymous-function-undefined-when-using-strict)`this`是未定义的。我发现令人困惑的是，它可以被迫指向全局对象（或任何其他对象，就此而言），有效地破坏了严格模式提供的安全网。这也有其他含义。考虑这段代码：`this`

```
'use strict';//using strict everywhere
(function(Global)
{
    var closureObject = {};
    Global.foo = function()
    {
        closureObject.setIn = closureObject.setIn || 'Set in foo';
        console.log(this);
        console.log(this === Global);
        bar();
        bar.apply(this);
        return (this !== Global ? this : undefined);
    };
    Global.bar = function()
    {
        closureObject.setIn = closureObject.setIn || 'set in bar';
        console.log(this);
        return (this !== Global ? this : undefined);
    };
})(this);
var undef = (Math.ceil(Math.random()*10)%2 ? foo() : bar());
foo();//undefined --- false​​​​​​​​​​​​​​​​​ --- undefined --- undefined
window.foo();//Window --- true --- undefined --- window
foo.apply(this,[]);//same as window.foo 
```

同样适用于自定义对象：

```
function Foo(n)
{
    this.name = n;
}
Foo.prototype.func = foo;//or window.foo
//other objects:
var d = new Date();
foo.apply(d,[]);//Date --- false --- undefined --- date 
```

在我看来，这可能是黑客和陷阱的来源。更重要的是：这使得确定调用的来源变得相当困难：如果`foo()`从全局对象 ( `window.foo();`) 调用，则该上下文当然不会传递给`bar`，除非`bar`使用调用`bar.apply(this,[]);`

我可能想要一种简单明了、安全可靠的方法来确定调用者上下文的原因很简单：我使用闭包来避免那些讨厌的全局变量，但同时我正在设置几个充当事件处理程序的函数。
我知道不使用严格模式或设置全局是很容易解决的问题，但是严格模式会一直存在，我喜欢它给聚会带来的东西（嗯，大部分）。我坚信这是 JS 将要发展的方式，我不想因为不想打扰`strict`. 这可能不会很快发生，但我只想让我的知识保持最新。

我已经阅读了 上的 MDN 页面`strict`以及 John Resig 的博客文章，我看过不少 DC 的视频并阅读了很多他的文章，但我还没有找到对我上面描述的行为的明确解释。我还没有通读整个 ECMAScript 标准（天哪，那些东西太干了，它可能会耗尽撒哈拉沙漠），但也许这里有人可以为我指出正确的方向，以帮助我更好地理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:48:34.153

我不确定我是否正确地阅读了您的问题，但是您似乎对`func.apply(context, arguments)`可以将`context`其作为参数的事实感到麻烦，然后该参数将`this`在函数内部被引用。

我认为传递上下文是必要的，没有它 JavaScript 就无法正常工作。

在我的脑海中，因为没有`super`正确使用继承的唯一方法是使用类似`BaseClass.prototype.baseFunction.apply(this, arguments)`.

删除该功能将创建一种与今天的 JavaScript 非常不同的语言，而这不是`strict`模式的意义所在。

# asp.net - HTML.TextArea 用于数据绑定

> ID：12250613
> 
> 赞同：0
> 
> 时间：2012-09-03T15:27:01.760
> 
> 标签：asp.net, asp.net-mvc-3, razor

```
@Html.TextAreaFor(model => model.title, new { id = "title", @class = "double text white" }) 
```

数据未绑定在控制器中。当我保存模型时，属性标题保持为空。

# php - Cocoa Mac App Webview 会话丢失

> ID：12250618
> 
> 赞同：0
> 
> 时间：2012-09-03T15:27:16.950
> 
> 标签：php, objective-c, macos, cocoa, webview

是否可以在关闭 WebView-App 时保存 PHP 会话？我有一个带有 WebView 的 Mac 应用程序，我不希望用户每次启动应用程序时都输入登录数据，因为会话在关闭应用程序时被破坏。是否有可能（在服务器上的 PHP 或 Xcode 中）更改某些内容，例如将会话保存一个月，并且在重新启动 Mac-App 后用户仍处于登录状态？

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:13:22.473

您需要在登录后保存 WebView 的 cookie，然后在下次加载应用程序时恢复它们，如下所示：

[如何设置我的 Web 视图已加载已登录用户 -iPhone](https://stackoverflow.com/questions/8986963/how-to-set-my-web-view-loaded-with-already-login-user-iphone)

该代码适用于 iPhone，但我认为它也应该适用于 Mac。

# css - jqmobi. 在 ios (ipod) 上，当输入字段聚焦的内容向上移动时

> ID：12250620
> 
> 赞同：0
> 
> 时间：2012-09-03T15:27:27.487
> 
> 标签：css, ios, html, cordova, jqmobi

我正在使用jqmobi。 [http://jqmobi.com/testdrive](http://jqmobi.com/testdrive) - 这里也一样

在 iOS 上，当输入字段变为焦点时，内容会向上移动。我希望标题保持在同一位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:24:54.113

在当前的 jqMobi 版本中没有方法可以做到这一点。一种解决方法是在手机进入键盘模式时根据document.body.scrollTop重新定位#jQUi style.top；

您可以使用 $.touchLayer 事件 'enter-edit-reshape' 和 'exit-edit-reshape' 来检测跨浏览器的调整大小。

```
$.bind($.touchLayer, 'enter-edit-reshape', function(){
    $('#jQUi').css('top', document.body.scrollTop+'px');
});
$.bind($.touchLayer, 'exit-edit-reshape', function(){
    $('#jQUi').css('top', 0);
}); 
```

干杯! :)

# design-patterns - 设计模式，任何参考应用程序（C++、Csharp、Java）

> ID：12250621
> 
> 赞同：2
> 
> 时间：2012-09-03T15:27:31.773
> 
> 标签：design-patterns

我正在写我的期末论文，需要开发一个设计模式识别器软件。对于测试，我正在寻找一些开源应用程序，它们系统地应用设计模式（并记录它们）。我知道 JHotDraw 和 JUnit，但我也需要用 C++ 和 C# 编写的应用程序。我在谷歌上搜索并找到了一个用于 .NET 和 Jt 的（封闭源代码）模式框架，它是开放的，但也是用 java 编写的。我想知道是否有这样的 C++ 和 C# 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:56:18.167

C++ 中设计模式的一个很好的例子是[Qt](http://qt.nokia.com/)。最著名的可能是[Signals and Slots 模式](http://doc.qt.nokia.com/4.7-snapshot/signalsandslots.html)，它是 Observer 模式的扩展/改进。甚至还有一本关于 Qt 设计模式的书：http: [//www.amazon.com/An-Introduction-Design-Patterns-Qt/dp/0131879057](https://rads.stackoverflow.com/amzn/click/com/0131879057)

Qt 并不是完全开源的。但是，如果您希望开源只是为了能够查看/检查标题，那么应该没有任何问题。如果这是针对您的论文，我很确定不应该有任何许可问题，但您可能应该联系他们以防万一。

# tridion - 如何自动更新分发列表扩展字段值？

> ID：12250622
> 
> 赞同：3
> 
> 时间：2012-09-03T15:27:32.770
> 
> 标签：tridion, tridion-2011

我们需要更新分发列表扩展字段值，我们是否有任何选项可以自动更新此值，基本上我们需要每天将订阅日期（扩展字段）增加 1。我们找到了一种方法来做到这一点 DB我们正在更新表 CONTACTFILTER_DETAIL 的存储过程。请为此问题提出适当的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:31:24.007

根据几年前我与 R&D 就 OE 分发列表中基于日期的动态联系人选择进行的一些讨论，只有一个受支持的解决方案。您需要创建一个使用 .Net API 进行更新的可执行应用程序，并安排它以所需的时间间隔在目标服务器上运行。

[编辑]

以防万一您是在 Tridion 论坛上发布相同问题的同一个人，因此其他人可以理解该方法 - 您可以通过 DistributionList 对象的 ContactFilter 属性访问 ExtendedDetails 字段。

# php - 一个属性的多个字段

> ID：12250626
> 
> 赞同：1
> 
> 时间：2012-09-03T15:27:53.280
> 
> 标签：php, forms, symfony

假设我有三个字段供用户输入日期：日、月和年。（可能不是最好的方法，但我在这个例子中使用它）。如果我尝试`$form->bind()`用户的请求，Symfony 将尝试在我的模型上寻找一个`->setMonth()`不存在的方法。

我如何告诉 Symfony 我想通过`strtotime()`（或任何其他任何其他任意代码或方法）运行输入，然后将新输出映射到`setDate()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T18:05:09.563

首先，你需要告诉 symfony 这些字段没有对应的 Entity 属性。这是通过 'property_path' 选项来完成的

```
$builder->add("field1", "text", array(
    "property_path" => false
)); 
```

在您的控制器中，一旦您检查了表单是否有效并且在持久化实体之前，您可以使用以下内容获取这些字段的值：

```
$field1 = $form->get('field1')->getData(); 
```

然后根据需要使用这些值来构造实体属性，例如：

```
$entity->setWhatever($field1.$field2.$field3); 
```

如果您需要对这些字段进行某种验证，最好的选择是编写回调验证器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:47:52.610

不要只为用户类的一个属性“日期”使用多个 html 字段。

在参考：[http ://symfony.com/doc/current/reference/forms/types/date.html](http://symfony.com/doc/current/reference/forms/types/date.html)

借助“小部件”选项，可以根据需要呈现字段日期。

在您的情况下，您需要 3 个字段，您必须设置值“选择”（呈现三个选择输入。选择的顺序在模式选项中定义）。

这里是表单类中的代码：

```
$builder->add('date', 'date', array(
    'widget' => 'choice',
)); 
```

您还想在提交表单后获取时间戳（“strtotime”）：

```
$builder->add('date', 'date', array(
    'widget' => 'choice',
    'input' => 'timestamp',
)); 
```

您可以使用其他选项，例如，只获得一个文本字段，您可以在该字段上激活 JS datepicker ！

# unix - 不从文件中提取数值

> ID：12250627
> 
> 赞同：1
> 
> 时间：2012-09-03T15:27:54.977
> 
> 标签：unix

我试图从这样的矩阵中提取非数值：

```
32540_at        0.138306  78047_s_at    0.133885 81737_at   0.163546 81811_at   0.181725 AAGAB          0.157073 AARSD1         0.114351 
```

（文件包含不同长度的行，但每次名称后跟一个数字）

具体来说，我需要的输出如下：

```
32540_at 78047_s_at 81737_at 81811_at AAGAB AARSD1 
```

由于像 81737_at 这样的名称结构，我很难（由于我在 Unix 编程方面缺乏经验）提取字母数字字符，因此我试图从数字字符中区分非数字字符。也就是说，删除数字字段，非数字字段将直接保留在那里。如何做到这一点？

最好的，

埃莱奥诺拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:05:51.793

有了合理`RS`的`ORS`设置，这很简单`awk`：

```
awk -v RS=' +|\n' -v ORS=' ' '!/^[0-9.]+$/' 
```

输出：

```
32540_at 78047_s_at 81737_at 81811_at AAGAB AARSD1 
```

### 解释

*   `RS=' +|\n'`: 用空格或换行符分隔每条记录。
*   `ORS=' '`：在打印的每条记录后插入一个空格。
*   `!/^[0-9.]+$/`：如果记录不仅包含数字和点，则打印它。更正确的数字模式是（不考虑科学记数法）：`!/^([0-9]+\.[0-9]*|[0-9]*\.[0-9]+|[0-9]+\.?)$`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:55:09.273

你说名字后面总是跟数字？怎么样：

```
tr -s ' ' '\n' your_file | sed -n '1~2p' 
```

# perl - perl 用普通括号替换大括号

> ID：12250630
> 
> 赞同：1
> 
> 时间：2012-09-03T15:28:11.303
> 
> 标签：perl, replace

我需要编写一个脚本来查看文件并用普通括号替换任何大括号。到目前为止，我有：

```
use strict;
use warnings;
open(INFILE,"<rscore") || die "Couldn't open rscore for reading!\n";
open(OUTFILE,">rscore.new") || die "Couldn't open rscore.new for writing!\n";
while(<INFILE>){
  $_ =~ s/{/(/gi; #g for every occurrence, i for case-insensitive
  print OUTFILE $_;
}
close INFILE;
close OUTFILE;
rename("rscore.new","rscore") || die "Couldn't rename the new file!\n"; 
```

并收到以下错误：

```
syntax error near line 10 near insensitive print. 
```

这可能是一件愚蠢的事情。此外，如果有更有效的方法来做到这一点（我确信有），我愿意接受建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T15:33:27.563

这是一个 perl 单行代码。

```
$ perl -lpe 'tr |{}|()|' <infile >outfile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T15:32:55.173

试试这个：

`$string =~ tr/{}/()/;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T18:10:30.670

This is a perl one liner for inplace editing the file

```
perl -pi -e 's/{/(/g;s/}/)/g' your_file 
```

This below will print the output on console

```
perl -p -e 's/{/(/g;s/}/)/g' your_file 
```

# oracle - 在VM下的windows azure中安装oracle

> ID：12250634
> 
> 赞同：0
> 
> 时间：2012-09-03T15:28:28.957
> 
> 标签：oracle, azure-virtual-machine

我正在考虑在我的下一个项目中使用 Windows azure。我被迫使用 oracle 作为数据库后端。我想知道是否有可能在windows azure虚拟机上安装oracle？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:28:46.647

实际上，windows azure vms 就像典型的服务器，唯一的区别是它们在云中。您需要将安装文件复制到 VM。在VM中安装之前，我需要理清要求。如内存、硬盘等。

# ruby - AS3 - Ruby 加密通信？

> ID：12250635
> 
> 赞同：1
> 
> 时间：2012-09-03T15:28:35.173
> 
> 标签：ruby, ruby-on-rails-3, actionscript-3, encryption, as3crypto

我需要一个经过验证的示例来展示如何在 AS3 中加密字符串并在 Ruby 中解密，反之亦然？，我在 PHP 中找到了文章，但是在 Ruby 中没有找到任何文章。

有人可以通过提供示例或博客来提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:02:35.183

为什么不创建自己的算法来加密字符串？

您可以创建[ROT13](http://en.wikipedia.org/wiki/ROT13)的变体，并在两种语言中使用类似的代码。很简单。

ROT 13 在 AS3 中是这样的：

```
function calculate(src : String) : String {
    var charsMap : String = "ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMabcdefghijklmnopqrstuvwxyzabcdefghijklm";

    var calculated : String = new String("");
    for (var i : Number = 0; i < src.length ; i++) {
        var character : String = src.charAt(i);
        var pos : Number = charsMap.indexOf(character);
        if (pos > -1) character = charsMap.charAt(pos + 13);
        calculated += character;
    }
    return calculated;
} 
```

我向您推荐的是做一个变体，以某种非随机模式打乱您的字符串，并在您的 Ruby 代码中取消打乱。

# mongodb - Mongodb：向集群添加新分片会增加集群的负载

> ID：12250638
> 
> 赞同：3
> 
> 时间：2012-09-03T15:28:46.567
> 
> 标签：mongodb, sharding

情况：

之前我有三台机器：10.10.10.5、10.10.10.6、10.10.10.7

10.10.10.5 运行：

*   配置数据库
*   mongoS
*   shard3, shard4 mongod 进程（这些是其分片中的主要进程）

10.10.10.6 运行：

*   mongoS
*   shard3 shard4 mongod 进程（这些在它们的分片中是次要的）

10.10.10.7 运行：

*   mongoS
*   shard3, shard4 mongod 进程（这些是仲裁者）

我的应用程序连接到 10.10.10.6 mongoS。

一切都运行良好大约一年。然后，10.5 和 10.6 经历了非常重的负载，尤其是 10.6。cpu使用率和平均负载非常高，所以我打算在集群中添加两台新机器。

我创建了两个分片：shard1 和 shard2。新机 10.10.10.8 运行：

*   shard1（主要），shard2（次要）
*   mongoS

新机 10.10.10.9 运行：

*   shard1（次要），shard2（主要）
*   mongoS

对于老成员 10.10.10.7，我还添加了 shard1、shard2 仲裁器。

问题是当我添加两台新机器时（使用 addShard 命令），大约 5 小时后它们完成了迁移（虽然我不能确定），然后 10.10.10.6 主机再次出现极高的负载，平均负载约为 90.5（4 cpu）。

同时有很多应用程序对10.10.10.6 mongoS的读写请求，但很少有数据或没有数据写入新的两台机器。我用iostat发现两台新机器几乎没有io字节。

为什么 10.10.10.6 负载如此之大？

以前即使在高峰时段，最高负载也约为 30.5

那么你们能否建议如何解决负载问题并让新机器启动并运行？

**编辑：有关我的环境的更多信息**

10.5, 10.6, 10.7, 10.8, 10.9都有相同的资源：4CPUS,6g Mem,150G diskspace,netio是光纤。

Shard3 数据大小=16g 和 Shard4 数据大小 15g。

我正在使用 1.8.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T01:55:30.740

**编辑：在聊天中讨论后**

预计在添加新分片时会有一些开销，至少在最初是这样。这是因为需要进行块迁移，这些迁移将使用 CPU、磁盘和网络 I/O。这将为您的环境增加一些额外的负载。

如果您的读取首选项设置为从辅助节点读取，则 10.6 服务器可能会很快变得过载，因为它试图跟上两个副本集的复制（由于块迁移而增加）和来自应用程序本身的流量。通过添加更多辅助节点可能会减少这种情况，但您需要在与您的生产环境非常相似的环境中进行测试。

添加更多分片也可能会有所帮助，但是您需要再次对此进行彻底测试。看起来，当您之前添加分片时，块迁移并没有完成，因此新分片并没有像他们应该做的那样帮助负载。`db.getSiblingDB("config").locks.find({"_id":'balancer'})`如果您将来要再次添加分片，请通过检查和输出来确保块已完成迁移，`db.printShardingStatus()`以查看所有分片中的块数是否相等。

一些更一般的注释：

*   在生产中，不建议只运行一个配置服务器。如果您丢失了这个单一的配置服务器，集群将变得不可用。[在此处](http://docs.mongodb.org/manual/core/sharding/)和[此处](http://www.mongodb.org/display/DOCS/Sharding+and+Failover)查看更多详细信息

*   一般来说，不建议 `mongod`在同一台机器上运行两个实例。两个进程将竞争它们共享的资源，在使用 MongoDB 那样的内存映射文件时尤其如此。

*   您可以使用一些内置工具来确定哪些查询和进程导致的负载最大。 [`mongostat`](http://docs.mongodb.org/manual/reference/mongostat/)和 **编辑：MongoTop 在 1.8.2 中不可用**是两个命令行实用程序，可让您跟踪. 在控制台内部，您还可以运行 以获取有关当前操作的更多信息。您可以通过从控制台发出来判断平衡器正在做什么（当前是否正在执行平衡器循环） 。[`mongotop`](http://docs.mongodb.org/manual/reference/mongotop/) **`mongodb`[`db.currentOp()`](http://docs.mongodb.org/manual/reference/current-op/)`db.getSiblingDB("config").locks.find({"_id":'balancer'})`**

***   您在非常旧版本的 MongoDB 上运行。您应该计划更新，如果不是更新到最新的稳定版 (2.2.0) 或最新的 (2.0.7)，那么更新到您所在分支的最后一个稳定版 (1.8.5)。自您当前使用的版本以来，已对该产品进行了许多修复和改进，这将带来许多好处。**

# asp.net - asp.net 在 HtmlTable 上显示来自代码隐藏的存储过程结果

> ID：12250645
> 
> 赞同：2
> 
> 时间：2012-09-03T15:29:05.953
> 
> 标签：asp.net, sql-server-2008, sql-server-2005, c#-4.0

从代码隐藏动态创建表的最佳方法是什么，其中的数据是从存储过程（SQL 2008）中检索的？如果我使用 HtmlTable 而不是 asp.net Table 会有所不同吗？感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:32:11.697

最好使用`GridView`，`SqlDataSource`您可以提高生产力，您为此创建了基础架构。

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.sqldatasource.selectcommand.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.sqldatasource.selectcommand.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:34:05.247

最好的方法是简单地将 proc 的结果绑定到 GridView（我假设您使用的是 Web 表单）。像这样的东西

```
var results = dataRep.GetData();
Grid.DataSource=results;
Grid.DataBind(); 
```

默认情况下，它将自动生成所有列。

如果您需要控制要从结果中显示哪些列，可以将 AutoGenerateColumns 属性设置为 false 并在标记中手动定义所需的列。像这样的东西：

```
<asp:GridView AutoGenerateColumns="false" ...
<Columns>
 <asp:BoundColumn DataField="ColumnNameFromResult" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:01:27.460

既然你提到你想让它变得简单，那么 GridView 就是要走的路。是的，您可以使用 html 表，但它会做更多的工作。

我想提另一种方法。你也可以用转发器制作一个 html 表。我在这里为您找到了一个样本：

[ASP.NET Web 表单转发器](http://www.w3schools.com/aspnet/aspnet_repeater.asp)

如果您向下滚动一点，您将看到一个表格示例。

这也很简单，因为您可以像 Icarus 所示的那样绑定到中继器，但您也可以更直接地控制 html。

# logging - 如何通过电子邮件发送严重错误并将其余错误记录到 prod.log

> ID：12250647
> 
> 赞同：1
> 
> 时间：2012-09-03T15:29:12.953
> 
> 标签：logging, symfony

一定是非常微不足道的事情，但我不能让 symfony2 通过电子邮件发送一些错误（5xx）并简单地将其余部分（信息级别）记录到文件中。

这就是我所拥有的，几乎是[symfony2 食谱示例](http://symfony.com/doc/master/cookbook/logging/monolog_email.html)的精确副本。

```
# app/config/config_prod.yml
monolog:
    handlers:
        main:
            type:         fingers_crossed
            action_level: critical
            handler:      grouped
        grouped:
            type:    group
            members: [streamed, buffered]
        streamed:
            type:  stream
            path:  "%kernel.logs_dir%/%kernel.environment%.log"
            action_level: info
            level: debug
        buffered:
            type:    buffer
            handler: swift
        swift:
            type:       swift_mailer
            from_email: error@example.com
            to_email:   error@example.com
            subject:    An Error Occurred!
            level:      debug 
```

它确实通过电子邮件发送 5xx 错误，但 prod.log 中既没有 404 错误也没有应用程序信息消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:25:56.210

那么你想要的是两个行为不同的处理程序吗？然后只需使用两个未连接的处理程序：

```
# app/config/config_prod.yml
monolog:
    handlers:
        main:
            type:         fingers_crossed
            action_level: error
            handler:      streamed
        streamed:
            type:  stream
            path:  "%kernel.logs_dir%/%kernel.environment%.log"
            action_level: info
            level: debug
        buffered:
            type:    buffer
            action_level: critical
            handler: swift
        swift:
            type:       swift_mailer
            from_email: error@example.com
            to_email:   error@example.com
            subject:    An Error Occurred!
            level:      debug 
```

如您所见，删除分组处理程序，告诉 main 使用流并添加操作级别以缓冲“拆分”流和 swift 的处理，以便您可以为两者定义不同的操作。

使用此记录器，您只会收到通过电子邮件发送的错误消息，而不是完整的日志，就像有一个`fingers_crossed`类型时那样。如果需要`fingers_crossed`，只需添加另一个处理程序：

```
another_main:
    type:         fingers_crossed
    action_level: critical
    handler:      buffered 
```

当然，您需要`action_level`再次从缓冲中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:33:19.573

从食谱示例：

> 邮件处理程序是一个 Fingers_crossed 处理程序，这意味着它仅在达到操作级别（在本例中为关键级别）时触发。然后它会记录所有内容，包括低于操作级别的消息。仅针对 5xx HTTP 代码错误触发关键级别。处理程序设置意味着然后将输出传递到缓冲处理程序

再次来自食谱：

> 如果您希望 400 级和 500 级错误都触发电子邮件，请将 action_level 设置为错误而不是关键。

# windows - 编译器检测方法有哪些？

> ID：12250649
> 
> 赞同：0
> 
> 时间：2012-09-03T15:29:24.580
> 
> 标签：windows, compiler-construction, reverse-engineering, detection, portable-executable

PEiD 和其他工具如何检测编译器类型？检测过程可以是动态的吗？如何？除了PE文件处理还有其他程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:13:21.060

虽然我不完全确定 PEiD 是如何工作的，但我认为有多种方法可以实现这一点。特别是，您想从生成的代码中寻找各种“指纹”。例如，编译器处理二进制中已知字符串的方式（在 C 中以零结尾，或者在 Pascal 中的文本之前具有长度值），或者它如何为函数设置堆栈帧。然后当然要寻找常见的代码结构，如何处理某些结构，例如循环、条件或在调用主函数之前设置运行时。另一种方法是查看导入和依赖项，这可以深入了解使用的运行时。

当然，最简单的方法是检查二进制文件中留下的任何元数据，而无需实际查看代码。通常有专门用于各种元数据的部分，甚至可以准确显示用于编译的确切编译器和版本的注释。虽然这些可以很容易地被欺骗，但是一个好的检测器会考虑到这一点，并查看实际代码中的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T19:07:09.083

编译器类型检测基于 EXE 文件中的编译器签名。

# security - 使用 spring-security-core-ldap 插件在 grails 中实现 LDAP 身份验证？

> ID：12250651
> 
> 赞同：3
> 
> 时间：2012-09-03T15:29:33.763
> 
> 标签：security, grails, ldap

我目前正在考虑在 Grails 中创建一个应用程序，并且我已经创建了该应用程序并安装了以下两个插件：

[http://grails.org/plugin/spring-security-ldap](http://grails.org/plugin/spring-security-ldap) http://grails.org/plugin/spring-security-core

然后我继续运行以下命令以获取安全核心设置：

```
grails s2-quickstart com.smstool User Role 
```

然后创建了我需要的所有必要的控制器、视图和模型。然后我继续使用以下选项更新 config.groovy 文件：

```
grails.plugins.springsecurity.ldap.authorities.groupSearchBase = 'DC=MYLOCATION, DC=COM'
grails.plugins.springsecurity.ldap.authorities.retrieveDatabaseRoles = false
grails.plugins.springsecurity.ldap.authorities.ignorePartialResultException = true // typically needed for Active Directory
grails.plugins.springsecurity.ldap.search.base = 'DC=MYLOCATION, DC=COM'
grails.plugins.springsecurity.ldap.search.filter="sAMAccountName={0}" // for Active Directory you need this
grails.plugins.springsecurity.ldap.search.searchSubtree = true
grails.plugins.springsecurity.ldap.auth.hideUserNotFoundExceptions = false
grails.plugins.springsecurity.ldap.search.attributesToReturn = ['mail', 'displayName'] // extra attributes you want returned; see below for custom classes that access this data
grails.plugins.springsecurity.providerNames = ['ldapAuthProvider', 'anonymousAuthenticationProvider'] // specify this when you want to skip attempting to load from db and only use LDAP

// role-specific LDAP config 
grails.plugins.springsecurity.ldap.useRememberMe = false 
grails.plugins.springsecurity.ldap.authorities.retrieveGroupRoles = true 
grails.plugins.springsecurity.ldap.authorities.groupSearchBase = 'DC=MYLOCATION, DC=COM' 
```

然后我运行应用程序并转到运行第一个命令（s2-quickstart）时创建的登录页面，但是当我尝试输入我的 LDAP 详细信息时，我没有收到错误，但它说用户名不存在.

我认为这可能是因为需要进一步配置才能使此 LDAP 功能正常工作，并且用户输入的详细信息未正确传递，我也是 Grails 的新手 :-)。

我想我可能需要做一些事情，比如创建一个**“UserDetailsContextMapper”**，但是我不知道该怎么做，我查看了下面的链接，但似乎无法掌握我需要做什么：

[http://grails-plugins.github.com/grails-spring-security-ldap/docs/manual/guide/2.%20Usage.html](http://grails-plugins.github.com/grails-spring-security-ldap/docs/manual/guide/2.%20Usage.html)

有没有人可以帮助我理解上面的链接，或者知道我应该采取哪些步骤来正确地对 LDAP 进行身份验证？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T16:27:14.427

也许我的存根项目可以提供帮助？[https://github.com/javazquez/Grails-Active-Directory-LDAP-example](https://github.com/javazquez/Grails-Active-Directory-LDAP-example)

# php - 使用 Joomla 的 JForm 将“Ghost”/不正确的变量保存在 MySQL 数据库中

> ID：12250652
> 
> 赞同：0
> 
> 时间：2012-09-03T15:29:35.467
> 
> 标签：php, mysql, joomla, joomla2.5

简而言之，用户ID 被保存在代码中其他任何地方都不存在的数据库中。我是 PHP 和 Joomla 的初学者，刚刚完成了一个大组件，它在很大程度上很简单：

**组件描述**

*   主屏幕有所有用户的列表，按部门过滤。
*   有两个主表，其值列在该主屏幕上。单击一个值，打开 edit.php 视图。
*   Chapters 表的链接包含用户 ID、类 ID，如果记录存在则记录 ID，如果不存在，则使用 Joomla 的 JForm 本地保存功能在保存时填充记录 ID。
*   有 9 个章节，因此每个用户最多有 9 个条目，具体取决于他们所处的完成阶段。
*   填写信息，保存/保存并关闭/取消是唯一的选项。

**问题描述** - 如果用户根本没有第 1-9 章的条目，则保存用户 ID 127。127从哪里来？没有线索。如果有一章中有一个条目，那么它可以正常工作。

**代码片段：**

*保存：（view.html.php）*

```
JToolBarHelper::apply('chapters.apply', 'JTOOLBAR_APPLY');
JToolBarHelper::save('chapters.save', 'JTOOLBAR_SAVE'); 
```

*XML* (章节.xml)

```
<field name="chapter_userid"
  type="text"
  label="Student UserID"
  description=""
  size="10"
  readonly="true" 
  class="readonly"
/> 
```

*编辑表格：（edit.php）*

```
<li> 
  <?php echo $this->form->getLabel('chapter_userid'); ?>
  <?php echo $this->form->getInput('chapter_userid', null, $this->UserID ); ?>          
</li> 
```

*例如用户**170**的 HTML 输出（在数据库中保存为 127，Joomla 表示已正确保存）：*

```
<input type="text" name="jform[chapter_userid]" id="jform_chapter_userid" **value="170"** class="readonly" size="10" readonly="readonly"/> 
```

**我做过的事情：**

*   进行调试

*   很多添加值，看看是什么触发了这一点。

*   使用调试在整个 html 输出（主屏幕和 edit.php）中搜索“127” - 没有

*   在编辑屏幕顶部使用 get_defined_vars()，搜索 127 - 没有。

*   拔了很多头发

我不明白为什么如果 userID=170 被正确地传递到它被保存为 127 的 html 输出。有没有人见过这样的事情？我还能做些什么来调试吗？检查的地方？我怀疑这是 Joomla 记忆中的某种价值，但我也认为 get_defined_vars 会以某种方式吐出它。或者某种二进制 2^8 偏移 1（好的，所以现在我在 MIDI 领域，但我很绝望）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:18:04.977

127 值真的困扰着我，检查了所有的输出，并没有发现任何不合适的地方——结果证明我不仅设置了错误的数据类型，而且我对数据类型的概念也有错误：

[http://matthom.com/archive/2006/11/28/mysql-integer-columns-and-display-width](http://matthom.com/archive/2006/11/28/mysql-integer-columns-and-display-width)

我期望不超过三位数的值，因此将其设置为 TinyInt(4) 似乎是安全的，实际上 () 与值的长度无关，仅与显示长度有关。

希望这对其他人有所帮助。

# java - Play Framework CryptoAES secret key

> ID：12250656
> 
> 赞同：4
> 
> 时间：2012-09-03T15:30:09.687
> 
> 标签：java, playframework

I was looking for some crypto functions in playframework, and in the documentation for encryptAES they say,"Encrypt a String with the AES encryption standard using the application secret".

Ok the function is looking like this but where can i found this secret key ?

Offical function code:

```
public static java.lang.String encryptAES(java.lang.String value)

    Encrypt a String with the AES encryption standard using the application secret 
```

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T15:41:26.140

它放在`conf/application.conf`文件中

在这两个 - Play 1.x 和 Play 2.x 中，它的名字是`application.secret`

您还可以将自定义键与方法一起使用：

```
public static java.lang.String encryptAES(java.lang.String value,
                                          java.lang.String privateKey) 
```

[http://www.playframework.org/documentation/api/1.2/play/libs/Crypto.html#encryptAES(java.lang.String](http://www.playframework.org/documentation/api/1.2/play/libs/Crypto.html#encryptAES(java.lang.String) , java.lang.String)

# wpf - 为什么组合框项目与组合框不成比例？

> ID：12250659
> 
> 赞同：0
> 
> 时间：2012-09-03T15:30:26.980
> 
> 标签：wpf, 3d

![在此处输入图像描述](../Images/abce8db3d61aca06f4b63cf894ed778c.png)

```
 <Viewport2DVisual3D>

        <Viewport2DVisual3D.Transform>
            <Transform3DGroup>

                <RotateTransform3D>
                    <RotateTransform3D.Rotation>
                        <AxisAngleRotation3D x:Name="Win1Angle" Angle="0" Axis="0, 1, 0" />
                    </RotateTransform3D.Rotation>
                </RotateTransform3D>
                <ScaleTransform3D x:Name="ScaleUp" />
                <ScaleTransform3D x:Name="ScaleDown" />

                <TranslateTransform3D x:Name="MoveCenter1" />

            </Transform3DGroup>
        </Viewport2DVisual3D.Transform>

        <!-- The Geometry, Material, and Visual for the Viewport2DVisual3D -->
        <Viewport2DVisual3D.Geometry>
            <!-- positions of triangle    0          1           2           3      -->

            <MeshGeometry3D Positions="-.78,.58,0  -.78,-.58,0    .78,-.58,0    .78,.58,0"                                
                                    TextureCoordinates="0,0 0,1 1,1 1,0" 
                                    TriangleIndices="0 1 2 0 2 3" />

        </Viewport2DVisual3D.Geometry>

        <Viewport2DVisual3D.Material>
            <DiffuseMaterial  Viewport2DVisual3D.IsVisualHostMaterial="True" Brush="White"/>
        </Viewport2DVisual3D.Material>

        <Grid x:Name="grdHolder1" VerticalAlignment="Center" HorizontalAlignment="Center" ClipToBounds="False" Opacity="1" />

    </Viewport2DVisual3D> 
```

我在我的 WPF 表单中使用 3d。我的表单是用户控件。在运行时，我只是创建用户控件的实例并添加到视口中的 grdHolder1。但是组合框项目与组合框不成比例。如何使其成比例？

任何人！！！！?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:07:25.077

您面临的问题是组合框使用[Popup](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)基本上是另一个窗口。

> **弹出**窗口在屏幕上自己的窗口中显示其内容。

我相信这将需要将您的转换应用于弹出窗口内的控件以及主组合框。

如果您查看[MSDN 上的组合框样式页面，](http://msdn.microsoft.com/en-us/library/ms752094.aspx)那么它应该有一个您可以重新设置样式的 PART_Popup。但是，该页面上的弹出定义中似乎缺少 x:Name 定义，因此我将通过在 Expression Blend 上编辑副本来检查样式以确保它匹配。

[从MSDN 上的 Combo box 样式页面中](http://msdn.microsoft.com/en-us/library/ms752094.aspx)提取 ... ...

# javascript - 如何确定事件的目标是否属于特定类型

> ID：12250660
> 
> 赞同：0
> 
> 时间：2012-09-03T15:30:27.330
> 
> 标签：javascript

我有一个附加到父元素的侦听器，在函数中我想知道点击是否发生在图像子元素上。

```
function onClick(evt) {
    if (evt.target === ?) 
```

我尝试将目标与 HTMLImageElement 进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:31:35.083

你可以看一下`tagName`楼盘：

```
var tag = event.target.tagName;
if (tag == 'BUTTON') { ... } 
```

请记住，对于 IE，您需要`srcElement`：

```
var elem = event.target || event.srcElement || { tagName: "?" };
var tag = elem.tagName; 
```

# perl - perl http::proxy - dump all communication

> ID：12250664
> 
> 赞同：4
> 
> 时间：2012-09-03T15:30:50.897
> 
> 标签：perl

Have a web-page with very complex structure and javascript logic with many ajax calls, some requests only got a respond pure (applicaton/json) objects, some ajax gets html and so on... ;(

Need analyze the full communication between the browser and server, so decided write a perl-proxy what "simple" dump all text communication in any direction (requests and responses too).

Found the [HTTP::Proxy](https://metacpan.org/release/HTTP-Proxy) module, but im totally confused with the filters.

The basic code:

```
use strict;
use warnings;
use HTTP::Proxy;

my $proxy = HTTP::Proxy->new( port => 3128 );
$proxy->start; 
```

works nicely, but i havn't any idea how to write the filters for it.

The "eg" directory in the distribution have milion complicated examples how to modify the response body contents and so on, but the basic `dump_all_communication` is missing.

Can anybody guide me, how to write a simple filter for:

*   dump out all http-requests what are going from browser to server
*   and dump out the content of all responses, when they have mime: `text/*` and `application/json` and `application/x-javascript` (or better: for anything but no images, pdf and flash)

[Here is similiar question](https://stackoverflow.com/questions/11416748/perl-httpproxy-capture-xhr-json-communication), but it is want filter JSON and me want more simple - dump everything (all requests and all responses (but no images))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:20:49.647

基于一个例子，我会这样做。它只是将在此代理中经过的所有内容打印到 stderr。

相应地调整您的过滤器。

问候，

```
{
    package DumpAllBody;
    use base qw( HTTP::Proxy::BodyFilter );
    use Data::Dumper;
    sub filter {
        my ( $self, $dataref, $message, $protocol, $buffer ) = @_;
        warn "Body:\n".Dumper($dataref,$message,$protocol,$buffer);
    }
}
{
    package DumpAllHeader;
    use base qw( HTTP::Proxy::HeaderFilter );
    use Data::Dumper; 
    sub filter {
        my ( $self, $headers, $message ) = @_;

        warn "Body:\n".Dumper($headers,$message);
    }
}
$proxy->push_filter( request  => DumpAllHeader->new(), response => DumpAllHeader->new());
$proxy->push_filter( request  => DumpAllBody->new(),   response => DumpAllBody->new()); 
```

# c# - How can I hide query string parameters using the Post, Redirect, Get pattern?

> ID：12250665
> 
> 赞同：0
> 
> 时间：2012-09-03T15:30:58.627
> 
> 标签：c#, asp.net-mvc-3, wizard

I have a multi-step data entry form in my ASP.NET MVC application.

When the information is posted, the input values are checked and if I determine that some related data is required (e.g. a purchase order references a supplier that does not exist) I redirect to another action so that the user can enter the extra data.

I do not want the values that have already been entered by the user to be lost between pages so I am passing these to the second action method using a viewModel. The data is contained in hidden inputs on the second page so that the user can not see them.

This works fine except I end up with a URL that looks something like this:

> myDomain/RFQ/CreatePart?PartNumber=Skateboard&Supplier=Bobs%20skateboards&DateCreated=08%2F28%2F2012%2000%3A00%3A00&DateRequired=08%2F28%2F2012%2000%3A00%3A00&Quantities=1%2C%203%20%26%205%20off

I have tried simply returning a view instead of redirecting which gives me the URL Like this:

> myDomain/RFQ/CreatePart

However, this gives me the problem of the user being able to repost the values by refreshing the browser as I am now no longer following the post, redirect, Get pattern.

Is there a way of properly using the *Post-Redirect-Get* pattern whilst maintaining the cleaner URL?

* * *

**Update 29th September 2012**

I investigated the options listed below and have decided on using `SessionState` for the time being as this allows me to store intermediate data until the user has finished their transaction whilst allowing me to use the *post-redirect-get* pattern with a clean URL.

I was actually aware of `SessionState` prior to asking this question but unfortunately some of the information I had read about it had led me to believe this was not the best solution (most articles cite poor performance but rarely provide any evidence of this or explain why).

Having read [this](http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net) article I now understand `SessionState` a lot better.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:12:27.683

Options are as follows (order does not imply better or worse)

1.  Add the values to `TempData` and they will be available until they are read on the next request by that user and then automatically cleared.
2.  Save the intermediate steps to the database.
3.  Save the intermediate steps In the `Cache` (if the data is **shared** amongst users).
4.  Save the intermediate steps to the `SessionState` (if the data is **per**-user).
5.  who cares in this case if it's an ugly intermediate URL?

# php - How to replace non-latin letters with PHP preg_replace function?

> ID：12250666
> 
> 赞同：0
> 
> 时间：2012-09-03T15:31:00.627
> 
> 标签：php, preg-replace

> **Possible Duplicate:**
> [php preg_replace with Unicode chars](https://stackoverflow.com/questions/5059996/php-preg-replace-with-unicode-chars)

I have tried to solve this myself but failed.

I need to "clean" my string using PHP preg_replace so every character except a-z, A-Z, 0-9, space (' ') and latin letters "ČčĆćĐđŠšŽž" are removed.

I have learned how to solve first part of my problem: `$cleanstring = preg_replace('[^a-zA-Z0-9 ]', '', $originalstring);`

But I'm not successful in including other latin letters in my pattern. I do not need all latin characters, just those listed above.

*Edit: When my $originalstring is "Đak", my $cleanstring is "272ak"! How can I fix this?*

Can anybody help? Thank you in advance!

milosh

# java - 创建后找不到数组 - Java

> ID：12250668
> 
> 赞同：-1
> 
> 时间：2012-09-03T15:31:02.907
> 
> 标签：java, arrays, netbeans, variable-assignment

我正在制作一个需要使用字母表中所有字母索引的基本程序。我创建了一个数组并尝试向其中添加一些内容，但 NetBeans 一直说它“找不到符号：类“字母表””。我的代码类似于以下内容：

```
public class MyClass {
    char[] alphabet = new char[26];
    alphabet[0] = 'a';
    // et cetera
    public static void main(String[] args) {
        // Stuff
    }
} 
```

关于为什么 NetBeans 对上述内容说不的任何想法？我敢打赌，我犯了一些非常基本的错误，但我就是不知道是什么……

编辑：根据要求，发布了更全面的代码。带来不便敬请谅解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T15:34:40.290

移动方法内的行。例如在`main`开头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T15:34:47.363

你需要放置

字母[0] = 'a';

在方法或构造函数中而不是类块中。

它也不能是主要方法，因为这是一个实例变量。例如：

```
public class Alpha  {
    char[] alphabet = new char[26];

    public Alpha() {
        alphabet[0] = 'a';
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T15:35:22.507

该声明

```
alphabet[0] = 'a'; 
```

必须出现在代码块中。

尝试

```
char[] alphabet = new char[26];
{
    alphabet[0] = 'a';
} 
```

或者更好的解决方案是

```
public class MyClass {
    public static void main(String[] args) {
        char[] alphabet = new char[26];
        alphabet[0] = 'a';
        // et cetera
        // Stuff
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-03T15:35:22.773

如果您正在寻找完全编写的 Java 程序的示例，请查看这篇文章：

[http://howtoprogramwithjava.com/java-tutorial-java-hello-world-part-ii/](http://howtoprogramwithjava.com/java-tutorial-java-hello-world-part-ii/)

您发布的代码并不完全正确，因为您需要在“主要”方法中包含代码的“肉”：

```
public class MyClass {
    public static void main(String[] args) {
      char[] alphabet = new char[26];
      alphabet[0] = 'a';
    }
} 
```

# sql - 查找字典表的正确术语

> ID：12250679
> 
> 赞同：4
> 
> 时间：2012-09-03T15:32:03.153
> 
> 标签：sql, terminology, rdbms, database

我关心的是我目前所说的“字典表”，它是包含受控词汇列表的数据库表。

让我们举个例子：假设你有一个表**User**包含字段：

*   user_id : 主键
*   名
*   姓
*   user_type_id : UserType 表的外键

另一个表**UserType** 只有两个字段：

*   user_type_id : 主键
*   name ：特定类型用户的名称/值。

例如，**UserType**表可能包含 (1, Administrator), (2, PowerUser), (3, Normal)...

我的问题是：像**UserType**这样的表的规范术语是什么，它只包含（dictinct）单词的列表。我想发布一些代码来帮助管理这种表，但首先我必须给它们命名！

谢谢你的帮助。

**目前的想法：** 现在我觉得**Lookup** Tables 是一个很好的术语。它在这些帖子中也具有相同的含义：

*   [http://dbix-class.35028.n2.nabble.com/RFC-Component-for-Lookup-tables-td3504085.html](http://dbix-class.35028.n2.nabble.com/RFC-Component-for-Lookup-tables-td3504085.html)
*   [http://tonyandrews.blogspot.de/2004/10/otlt-and-eav-two-big-design-mistakes.html](http://tonyandrews.blogspot.de/2004/10/otlt-and-eav-two-big-design-mistakes.html)
*   [查找表最佳实践：数据库表...或枚举](https://stackoverflow.com/questions/433490/lookup-tables-best-practices-db-tables-or-enumerations)

唯一的问题是**查找**表有时也用于命名*联结*表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:09:52.827

In my experience with SQL developers, the stronger their background in relational theory, the less likely they are to use terms like "lookup table", "validation table", or "dictionary table".

Instead, they just call them tables. Why?

For you, the important part seems to be tables that

*   contain only one text column, or
*   contain only one text column and an id number, or
*   contain only one text column and a short text code, and
*   the primary key is used as the target for foreign key references.

If you think about it for a while, the only thing that distinguishes these tables from others is the number of columns. Relational theory distinguish relations by the number of columns, and I don't feel the need for distinctions like that in SQL, either.

*   *Every* candidate key implements a controlled vocabulary in this sense--the key (and all the other applicable constraints) provide the mechanism that controls the "vocabulary".
*   Every candidate key can be used as the target for a foreign key reference, regardless of how many candidate keys a table has, regardless of how many columns a candidate key has, and regardless of whether any of the candidate keys are used as foreign key references today.
*   Many such tables only *start* their life as "lookup" tables. A year down the road, someone discovers the need to store more information. After you add one or two more columns, is it still a "lookup" table, or not?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:41:57.540

我经常将该单词列表视为函数的域（允许的输入值集），因此我将它们称为域表。但这是从数学的角度来看的。

**编辑**

看：

*   [数据域](http://en.wikipedia.org/wiki/Data_domain)
*   [函数的域](http://en.wikipedia.org/wiki/Domain_of_a_function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:56:39.960

您所描述的通常称为数据字典

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:57:07.753

你可以走完全相反的方向，用他们的技术名称而不是他们的含义来称呼他们，然后让人们推断——你可以叫他们[**`candidate keys`**](http://en.wikipedia.org/wiki/Referential_integrity)——这在“选择你选择的候选人”的方式中是有道理的；每个候选人都是独一无二的*（或应该是）。

当命名问题不是完全令人头疼的时候，它们往往很有趣:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T15:47:02.517

作为一个 C 编码器，我会说这个表看起来真的很像一个`enum`（或枚举）。它详尽地定义了可接受的值并将自动给定的整数链接到名称（反之亦然）。

*作为一个 SO 用户，我会说这个问题看起来真的有点太开放了，因为我认为没有一个独特的规范名称......*

# jquery - JQuery Anmiations Laggy IE9 全屏

> ID：12250681
> 
> 赞同：0
> 
> 时间：2012-09-03T15:32:09.013
> 
> 标签：jquery, performance, jquery-ui, internet-explorer

我的问题是杂乱无章的。

我正在使用带有一些动画的 JQuery。我喜欢这些动画，它们在常见的浏览器中运行良好。

但我有一个奇怪的行为。在网络中的较旧计算机上，动画（切换滑动）和所有 ui 控件（日期选择器等）在使用 IE 时非常滞后，并且在 IE 最大化时。

有人知道我可以从哪里开始分析吗？如有必要，我可以发布代码等，但我不认为这是代码，因为在旧机器上，如果 IE 没有最大化，它也能很好地工作。我可以调整 IE 的大小，直到它几乎被最大化并且它仍然可以正常工作，但是当它完全最大化时它的'滞后....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:51:58.263

该问题与 IE9 设置“软件渲染”有关。
当禁用此功能并使用具有 1800 板载显卡的计算机时，它会滞后，因为 GPU 不够好。

因此，当您启用软件渲染时，它会更安静地工作。不完美，但更好。

在 IE8 等中，这个问题不会发生，因为他们不在这样的旧计算机上使用 GPU 渲染。其他浏览器如 FF 或 Chrome 具有强大的 JS-Enigne，因此它可以完美地与软件渲染配合使用。

解决了。

# java - 如何使用 Eclipse 调试某些 Java 类？

> ID：12250687
> 
> 赞同：2
> 
> 时间：2012-09-03T15:32:22.790
> 
> 标签：java, eclipse

我已经使用Eclipse 一年左右了，通常我调试软件没有问题。然而，我遇到了一个让我难过的情况。

我正在运行的测试用例因以下堆栈跟踪而失败：

```
com.sun.xml.internal.ws.protocol.soap.MessageCreationException: Couldn't create SOAP message due to exception: Unable to create StAX reader or writer
    at com.sun.xml.internal.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:283)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:180)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:83)
    at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:105)
    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:587)
    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:546)
    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:531)
    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:428)
    at com.sun.xml.internal.ws.client.Stub.process(Stub.java:211)
    at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:124)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
    at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107)
    at $Proxy34.getCommission(Unknown Source)
    at uk.co.bglgroup.servicehub.external.lifehub.v1_0.fitnesse.ws.LifeHubWebServiceLifeHubWebServicePortClient.doCallGetCommission(LifeHubWebServiceLifeHubWebServicePortClient.java:51)
    at uk.co.bglgroup.servicehub.external.lifehub.v1_0.fitnesse.service.GetCommissionService.getCommissionService(GetCommissionService.java:40)
    at uk.co.bglgroup.servicehub.external.lifehub.v1_0.fitnesse.endToEnd.SkeletalEndToEndTest.run(SkeletalEndToEndTest.java:82)
    at uk.co.bglgroup.servicehub.external.lifehub.v1_0.fitnesse.endToEnd.SkeletalEndToEndTest.skeletalTestQA(SkeletalEndToEndTest.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.sun.xml.internal.ws.streaming.XMLReaderException: Unable to create StAX reader or writer
    at com.sun.xml.internal.ws.api.streaming.XMLStreamReaderFactory$Default.doCreate(XMLStreamReaderFactory.java:358)
    at com.sun.xml.internal.ws.api.streaming.XMLStreamReaderFactory.create(XMLStreamReaderFactory.java:139)
    at com.sun.xml.internal.ws.api.streaming.XMLStreamReaderFactory.create(XMLStreamReaderFactory.java:143)
    at com.sun.xml.internal.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:290)
    at com.sun.xml.internal.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:118)
    at com.sun.xml.internal.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:278)
    ... 39 more
Caused by: javax.xml.stream.XMLStreamException: java.net.MalformedURLException
    at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.setInputSource(XMLStreamReaderImpl.java:219)
    at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.<init>(XMLStreamReaderImpl.java:191)
    at com.sun.xml.internal.stream.XMLInputFactoryImpl.getXMLStreamReaderImpl(XMLInputFactoryImpl.java:279)
    at com.sun.xml.internal.stream.XMLInputFactoryImpl.createXMLStreamReader(XMLInputFactoryImpl.java:151)
    at com.sun.xml.internal.ws.api.streaming.XMLStreamReaderFactory$Default.doCreate(XMLStreamReaderFactory.java:356)
    ... 44 more
Caused by: java.net.MalformedURLException
    at java.net.URL.<init>(URL.java:601)
    at java.net.URL.<init>(URL.java:464)
    at java.net.URL.<init>(URL.java:413)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:650)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1315)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDocumentEntity(XMLEntityManager.java:1267)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.setInputSource(XMLDocumentScannerImpl.java:281)
    at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.setInputSource(XMLStreamReaderImpl.java:206)
    ... 48 more 
```

好的，所以现在我想调试这个问题，我可以逐步执行我编写的代码，直到我到达一个名为 SEIStub.class 的对象。对于这个对象，Eclipse 报告“源附件不包括文件的源SEIStub.class"

如果我选择“更改附加源”，则会弹出一个框，该框正确识别 src.zip 在正确 JDK 版本中的位置。所以没有什么可以改变的......

我手动进入了 src.zip，确实没有 com.sun.internal 文件夹。

一个令人困惑的方面是，当我在开发环境中运行测试时，一切正常。当我在 QA 环境中运行测试时，我会得到上面列出的堆栈跟踪。

最令人困惑的是，虽然我可以在 com.sun.org.apache.xerces.internal.impl.XMLEntityManager 中设置一个断点，并且在通过 SEIStub 对象后可以到达该断点，但我无法查看该程序中的任何变量，当我查看 Eclipse 变量选项卡时，它们甚至不会显示为有效变量。

我正在使用 JDK 1.6.0_25

嗯……很迷茫，头发快要拔了！

任何人都可以帮助我在这个类上进行调试吗？

非常感谢，马克

更新：我也尝试下载[http://openjdk.java.net/projects/jdk6/](http://openjdk.java.net/projects/jdk6/)并且这组源似乎也缺少所有 com.sun.internal 对象。

更新：我正在使用 Eclipse Helios，一位同事使用 Juno 重复了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:47:46.257

该问题是由 XmlEntityManager 尝试解析正在解析的文档中的实体引起的。具体来说，它不喜欢它在文档上读取的 SystemId URL（因为它格式错误）。

的来源[`com.sun.org.apache.xerces.internal.impl.XMLEntityManager`](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/org/apache/xerces/internal/impl/XMLEntityManager.java.html)，您需要查看第 650 行

# html - 我可以使用带有“下一个”和“上一个”的多个（超过 2 个）链接标签吗？

> ID：12250688
> 
> 赞同：0
> 
> 时间：2012-09-03T15:32:23.507
> 
> 标签：html, seo

因此，我在我们的网站上添加了带有关于上一页和下一页的 SEO 信息的链接标签，如下所示：

```
<link rel="prev" href="/60072-page=2" />
<link rel="next" href="/60072-page=4" /> 
```

该页面可以包含多个带有分页的列表。更改列表的页面会使用 ajax 重新加载列表内容，但如果禁用了 javascript，则还可以通过使用普通回发来回退。这些寻呼链接与上述示例中的相同。

但由于页面可以有多个列表，这也意味着我应该有多个链接标签，如下所示：

```
<link rel="prev" href="/60072-page=2" />
<link rel="next" href="/60072-page=4" />
<link rel="prev" href="/15678-page=1" />
<link rel="next" href="/15678-page=3" /> 
```

这个可以吗？我试图用谷歌搜索它，但我找不到任何关于拥有比两个默认链接更多链接的信息。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:48:44.757

根据[W3C](http://www.w3.org/TR/html401/struct/links.html#h-12.3)在语法上它是合法的，但是在重复信息的情况下它看起来像 CSS，最后一条规则胜出。规范说：

> **Next** - 指文档线性序列中的下一个文档。用户代理可以选择预加载“下一个”文档，以减少感知的加载时间。
> 
> **Prev** - 指一系列有序文档中的上一个文档。一些用户代理还支持同义词“Previous”。

所以 next/prev 指的是文档的线性序列，而不是页面上的所有链接。所以根据你的例子，只有

```
<link rel="prev" href="/15678-page=1" />
<link rel="next" href="/15678-page=3" /> 
```

将是相关的。

# java - 如何在 strings.xml 中输入字符“<”？

> ID：12250690
> 
> 赞同：0
> 
> 时间：2012-09-03T15:32:44.153
> 
> 标签：java, android, xml, string, escaping

我想在eclipse的文件中`" -< "`输入字符串，字符串有字符，我无法将它添加到xml文件中没有错误！我什至试图按字符转义：`strings.xml``<``\`

```
<string name="search_target_arrow"> -\< </string> 
```

或将其包含在`""`如下之间：

```
<string name="search_target_arrow">" -< "</string> 
```

但没有一个工作。最后在善良用户的帮助下，我发现这是在 xml 中输入此类字符的正确方法：

```
<string name="search_target_arrow"> -&amp;lt; </string> 
```

但是现在当我在我的代码中获得这个资源时：

```
getResources().getString(R.string.search_target_arrow); 
```

并将其设置为 TextView，它显示`-&lt;`在屏幕上！如何通过代码获取原始字符？我应该做一些与 HTML 相关的事情吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:36:43.240

如果您使用的是 Eclipse，则右键单击 strings.xml 并使用“Android Common XML Editor”打开它并从那里添加它将为您处理转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:34:36.827

两种选择

```
&amp;

<![CDATA[&this is my> string and I <can put all the strange symbols I want inside]]> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T03:23:53.793

In the graphical editor (i guess the "Recources" tab), you can type any symbol into the value box, and it'll automatically put the appropriate characters in the xml. So that's good if you don't want to look the codes up.

# jquery - jQuery：检查一个div是否包含一个带有类的div

> ID：12250693
> 
> 赞同：39
> 
> 时间：2012-09-03T15:32:59.567
> 
> 标签：jquery

我`<div>`在另一个里面有几个元素`<div>`。

如果顶部 div 中的 div 包含 class on，我想做一个*正确*`if`的声明。

 *HTML：

```
<div class="toDiv">
    <div>

    </div>
    <div class="on">

    </div>
</div> 
```

jQuery：

```
if ($(".toDiv").contains("on")) {
    // do something
} 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-03T15:34:06.853

```
if ($(".toDiv").find(".on").length > 0){ 
  ///do something
} 
```

或者

```
if ($(".toDiv .on").length > 0){ 
  ///do something
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-03T15:34:37.093

```
$('div.toDiv').each(function() {
    if($('div.on', this).length > 0) {
        //do something with this
    }
}); 
```*

# java - Java 泛型声明

> ID：12250694
> 
> 赞同：-2
> 
> 时间：2012-09-03T15:33:02.227
> 
> 标签：java, generics, types

我有这些课

```
class SuperParent {
        @Override
        public String toString() {

            return "SuperParent";
        }
    }

    class A extends SuperParent {

        @Override
        public String toString() {

            return "A";
        }
    }

    class B extends SuperParent {

        @Override
        public String toString() {

            return "B";
        }

    } 
```

我想要一个`List`ArrayLists ，所以我可以添加到我试过的 B 和 A 的 ArrayList

```
List<ArrayList<?extends SuperParent>> mList = new ArrayList<ArrayList<SuperParent>>(); 
```

但不编译

当我尝试这个时，

```
ArrayList<ArrayList<SuperParent>> mList = new ArrayList<SuperParent>>(); 
```

它编译但我不能添加`ArrayList`s`A`或`ArrayList`s `B`s

我也了解 java 类型和继承，但是当谈到泛型时，我想念它。任何参考或声明都会对我有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:56:30.797

这是您声明列表列表的方式，其中外部列表​​的元素可以是 A 列表或 B 列表：

```
ArrayList<ArrayList<? extends SuperParent>> lists = 
    new ArrayList<ArrayList<? extends SuperParent>>();
lists.add(new ArrayList<A>(Arrays.asList(new A(), new A())));
lists.add(new ArrayList<B>(Arrays.asList(new B(), new B()))); 
```

通常，在声明或接受作为方法参数时，建议使用接口类型而不是具体类型。这样，上面的代码片段将如下所示：

```
List<List<? extends SuperParent>> lists = 
    new ArrayList<List<? extends SuperParent>>();
lists.add(Arrays.asList(new A(), new A()));
lists.add(Arrays.asList(new B(), new B())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:59:13.450

我不知道你到底尝试了什么，但这对我有用：

```
public class SuperParent
{

@Test
public void testThatAddThowsNoExceptions()
{
    List<ArrayList<? extends SuperParent>> mList = new ArrayList<ArrayList<? extends SuperParent>>();
    ArrayList<SuperParent> firstList = new ArrayList<SuperParent>();
    firstList.add(new SuperParent());
    firstList.add(new A());
    firstList.add(new B());
    mList.add(firstList);
}

public String toString()
{

    return "SuperParent";
}

class A extends SuperParent
{

    @Override
    public String toString()
    {

        return "A";
    }
}

class B extends SuperParent
{

    @Override
    public String toString()
    {

        return "B";
    }

}

} 
```

# java - JPA：将上次更新时间存储在单独的表中

> ID：12250695
> 
> 赞同：1
> 
> 时间：2012-09-03T15:33:03.420
> 
> 标签：java, hibernate, jpa, hibernate-envers

我正在使用 jpa 和休眠，我正在尝试存储 JPA 管理的每个项目的创建/更新/删除时间。

我需要像 Hibernate Envers 这样的东西，但只存储最后一次，而不是所有修订，我想将该数据存储在单独的表中（因为这些数据不是项目本身的一部分，而是属于需要的可选同步过程知道每个项目的最后修改时间）。

现在我可以使用 jpa @EntityListeners 捕获所有事件，但现在我不知道如何将这些信息保存到数据库表中。我不想定义 item_history 表实体，而是像 envers 那样在运行时生成和访问它们。

那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:17:00.967

您可以使用 Hibernate 拦截器来捕获对实体的 DML 操作，并将所需的数据存储在单独的表中。

[检查这个例子](http://www.mkyong.com/hibernate/hibernate-interceptor-example-audit-log/.)

如果您不想映射新实体来存储历史记录，请执行本机 SQL 来复制数据或调用 PL/SQL 过程。一个例子：

```
Table table = Entity.class.getAnnotation(Table.class);
String tableName = table.name();
Query query = session.createQuery("insert into " + table + "_HIST" +
            "SELECT * FROM " + table ;
int result = query.executeUpdate(); 
```

# javascript - Javascript 中 unshift() 与 push() 的时间复杂度

> ID：12250697
> 
> 赞同：78
> 
> 时间：2012-09-03T15:33:05.883
> 
> 标签：javascript, arrays, time, push, complexity-theory

我知道 JavaScript 中的`unshift()`和`push()`方法有什么区别，但我想知道时间复杂度有什么区别？

我想`push()`方法是 O(1) 因为你只是在数组的末尾添加一个项目，但我不确定`unshift()`方法，因为，我想你必须向前“移动”所有其他现有元素，我想那是 O(log n) 还是 O(n)？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-10-14T21:26:33.667

push() 更快。

```
js>function foo() {a=[]; start = new Date; for (var i=0;i<100000;i++) a.unshift(1); return((new Date)-start)}
js>foo()
2190
js>function bar() {a=[]; start = new Date; for (var i=0;i<100000;i++) a.push(1); return((new Date)-start)}
js>bar()
10 
```

```
function foo() {a=[]; start = new Date; for (var i=0;i<100000;i++) a.unshift(1); return((new Date)-start)}
console.log(foo())

function bar() {a=[]; start = new Date; for (var i=0;i<100000;i++) a.push(1); return((new Date)-start)}
console.log(bar());
```

* * *

### 更新

以上没有考虑数组的顺序。如果要正确比较它们，则必须反转推送的数组。`10ms`但是，对于我来说，使用以下代码段在 chrome 上推送然后反向仍然更快：

```
var a=[]; 
var start = new Date; 
for (var i=0;i<100000;i++) {
  a.unshift(1);
}
var end = (new Date)-start;
console.log(`Unshift time: ${end}`);

var a=[];
var start = new Date;
for (var i=0;i<100000;i++) {
  a.push(1);
}

a.reverse();
var end = (new Date)-start;
console.log(`Push and reverse time: ${end}`);
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-03T15:40:58.520

据我所知，JavaScript 语言规范并没有规定这些函数的时间复杂度。

`push`当然可以使用 O(1)和`unshift`操作来实现类似数组的数据结构（O(1) 随机访问） 。C++`std::deque`就是一个例子。因此，使用 C++ 双端队列在内部表示 Javascript 数组的 Javascript 实现将具有 O(1)`push`和`unshift`操作。

但是如果你需要保证这样的时间限制，你将不得不自己动手，像这样：

[http://code.stephenmorley.org/javascript/queues/](http://code.stephenmorley.org/javascript/queues/)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-12-04T03:41:30.423

对于对 v8 实现感到好奇的人，这里是[源代码](https://github.com/v8/v8/blob/master/src/elements.cc#L2190)。因为`unshift`接受任意数量的参数，所以数组将自行移动以容纳所有参数。

`UnshiftImpl`最终调用`AddArguments`a`start_position`将`AT_START`其踢到此[`else`语句](https://github.com/v8/v8/blob/master/src/elements.cc#L2469)

```
 // If the backing store has enough capacity and we add elements to the
  // start we have to shift the existing objects.
  Isolate* isolate = receiver->GetIsolate();
  Subclass::MoveElements(isolate, receiver, backing_store, add_size, 0,
                         length, 0, 0); 
```

并将其带到[`MoveElements`](https://github.com/v8/v8/blob/master/src/elements.cc#L2213).

```
 static void MoveElements(Isolate* isolate, Handle<JSArray> receiver,
                           Handle<FixedArrayBase> backing_store, int dst_index,
                           int src_index, int len, int hole_start,
                           int hole_end) {
    Heap* heap = isolate->heap();
    Handle<BackingStore> dst_elms = Handle<BackingStore>::cast(backing_store);
    if (len > JSArray::kMaxCopyElements && dst_index == 0 &&
        heap->CanMoveObjectStart(*dst_elms)) {
      // Update all the copies of this backing_store handle.
      *dst_elms.location() =
          BackingStore::cast(heap->LeftTrimFixedArray(*dst_elms, src_index))
              ->ptr();
      receiver->set_elements(*dst_elms);
      // Adjust the hole offset as the array has been shrunk.
      hole_end -= src_index;
      DCHECK_LE(hole_start, backing_store->length());
      DCHECK_LE(hole_end, backing_store->length());
    } else if (len != 0) {
      WriteBarrierMode mode = GetWriteBarrierMode(KindTraits::Kind);
      dst_elms->MoveElements(heap, dst_index, src_index, len, mode);
    }
    if (hole_start != hole_end) {
      dst_elms->FillWithHoles(hole_start, hole_end);
    }
  } 
```

我还想指出，v8 有一个不同的概念，[`element kinds`](https://v8.dev/blog/elements-kinds)具体取决于数组包含的内容。这也会影响性能。

很难真正说出性能是什么，因为实际上它取决于传递的元素类型，数组中有多少个孔等。如果我再深入研究一下，也许我可以给出明确的答案，但总的来说我假设因为`unshift`需要在数组中分配更多空间，一般来说你可以假设它是 O(N) （将根据元素的数量线性缩放）但是如果我错了，请有人纠正我。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-03T15:36:22.933

恕我直言，这取决于javascript引擎...如果它将使用链表，那么 unshift 应该很便宜...

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-02T01:25:57.397

实现具有快速 unshift 和 push 的数组的一种方法是简单地将数据放入 C 级数组的中间。这就是 perl 的做法，IIRC。

另一种方法是使用两个单独的 C 级数组，以便 push 附加到其中一个，而 unshift 附加到另一个。据我所知，与前一种方法相比，这种方法没有真正的好处。

不管它是如何实现的，当内部 C 级数组有足够的空闲内存时，push 或 unshift 将花费 O(1) 时间，否则，当必须进行重新分配时，复制旧数据至少需要 O(N) 时间到新的内存块。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-05-28T03:49:06.470

是的你是对的。的默认复杂度`push()`为 O(1)，`unshift()`为 O(n)。因为`unshift()`必须增加数组中已经存在的所有元素。但是，`push()`必须在数组末尾插入一个元素，因此 Array 元素的索引不必更改。但，`push()`由于内存的动态分配，也可以说复杂度为 O(n)。在 javascript 中，当您创建一个新的 Array 而不指定所需的大小时，它将创建一个默认值的 Array。在填充默认大小之前，推送操作需要 O(1) 复杂度。但是，如果默认大小已满，编译器必须创建一个新的连续内存块，它是默认内存大小的两倍，并将已经存在的元素复制到新分配的内存中。因此，将元素从一个连续的内存块移动到另一个连续的内存块需要 O(n) 时间。

如果您知道要放入数组中的元素数量，则可以避免插入元素的 O(n)。

1.  用所需的大小初始化数组，并用一个虚拟值填充它。 `let array = new Array(size).fill(0)`
2.  遍历您想要推送的元素并通过其索引更改值。

```
for (let i = 0; i < size; i++) {
  array[i] = i
} 
```

因此，`push()`我们没有更改元素在其位置的索引。与创建具有默认值的数组并将元素推送到其中相比，它的内存效率更高且复杂性更低。由于我们只使用了所需的内存量，因此不会浪费额外的内存。

# ios - 有没有办法在加载 html 页面时捕获所有 NSURLRequests？

> ID：12250702
> 
> 赞同：1
> 
> 时间：2012-09-03T15:33:31.343
> 
> 标签：ios, objective-c, nsurlprotocol

具体来说：如果我想下载一个 html 页面，有很多对图像、音乐、js 等的请求，UIWebView 代表无法处理这些请求。

更具体地说：我对处理 ajax 请求很感兴趣！我试图通过在每个加载的 html 页面中注入 javascript 来实现 ajax-handler（来源：[UIWebViewDelegate 不监视 XMLHttpRequest？](https://stackoverflow.com/questions/5353278/uiwebviewdelegate-not-monitoring-xmlhttprequest)），但这不起作用（iOS 5.1.1）。

我认为有通过实现 NSURLProtocol 子类（简单代理）的解决方案，但我不知道如何。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:55:53.963

我必须做一些非常相似的事情，并设法通过实现 NSURLProtocol 并强制响应加载本地 json 文件来使其工作。

你可以在这里看到完整的实现：

[如何使用 NSURLProtocol 模拟 AJAX 调用？](https://stackoverflow.com/questions/15224071/how-to-mock-ajax-call-with-nsurlprotocol/15234787#15234787)

# wpf - 将扩展器的标题设置为切换按钮

> ID：12250710
> 
> 赞同：1
> 
> 时间：2012-09-03T15:34:18.380
> 
> 标签：wpf, xaml, expander

我正在尝试使用 Expanders 和 StackPanels 在 WPF 中创建手风琴风格的菜单。

我希望能够单击 Expander Header 并显示 StackPanel 而不显示箭头。当我单击箭头时，这是有效的，但是我想删除箭头。

当我从 Expander 的 ToggleButton 中删除“箭头”属性时，ToggleButton 是 Content Presenter 下方的一个小区域，用户难以点击。

有没有办法让扩展器的整个标题（包括文本）成为 ToggleButton？

在 Expander 的模板中，我有以下内容：

```
<ToggleButton IsChecked="{Binding Path=IsExpanded,Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                              OverridesDefaultStyle="True"  Template="{StaticResource ExpanderToggleButton}" Background="{StaticResource NormalBrush}" 
                                              Height="25">
                                </ToggleButton>
                                <ContentPresenter Margin="4" ContentSource="Header" RecognizesAccessKey="True" /> 
```

在“ExpanderToggleButton”中：

```
<ControlTemplate x:Key="ExpanderToggleButton" TargetType="ToggleButton">
        <Border Name="Border" CornerRadius="2,0,0,0" Background="Transparent" BorderBrush="{StaticResource NormalBorderBrush}" BorderThickness="0,0,1,0">
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="ToggleButton.IsMouseOver" Value="true">
                <Setter TargetName="Border" Property="Background" Value="Red" />
            </Trigger>
            <Trigger Property="IsPressed" Value="true">
                <Setter TargetName="Border" Property="Background" Value="{StaticResource PressedBrush}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Border" Property="Background" Value="{StaticResource DisabledBackgroundBrush}" />
                <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DisabledBorderBrush}" />
                <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:32:57.843

单独指定标题模板，如；

```
<Expander>
  <Expander.Header>
    .... (This is where your toggle button currently sits any way in a default template)
  </Expander.Header>
  <Expander.Content>
    ....
  </Expander.Content>
</Expander> 
```

这样，您的标头模板应该像您的切换按钮一样接收 Mouse Down 事件，并且它适用于您的标头中显示的内容。

# .net - 是否有一个 .NET 函数可以让我比较两个运算符的优先级？

> ID：12250719
> 
> 赞同：8
> 
> 时间：2012-09-03T15:34:53.683
> 
> 标签：.net, expression-trees, operator-precedence

.NET Framework 中是否有一种类型可以比较两个运算符并确定一个运算符的优先级是否低于另一个运算符？暂时我已经`IComparer<ExpressionType>`为我感兴趣的算子[实现](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)了一个形式为

该[实现](https://stackoverflow.com/questions/12057519/how-do-i-infer-the-usage-of-parentheses-when-translating-an-expression-tree/12112179#12112179)是微不足道的，并且对于编译器/解释器实现者来说是通用的，这让我认为存在一个通用的实用函数。或者，如果存在用于获取给定运算符的序数的库函数，则实现这样的比较器也是微不足道的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:25:43.597

不，没有，你已经提到了原因（强调我的）：

> 我已经`IComparer<ExpressionType>`为我感兴趣的运算符实现了一个函数，并使用**C# 语言**的运算符类别图表。

运算符重载优先级是*特定于语言的*细节。基类库 (BCL) 和 CLR 与语言无关，它们支持*多种语言*，所有语言都可以为运算符优先级提供自己的顺序。

即使他们提供了一种可以在*任何*语言中使用的方法来指示运算符重载优先级是什么，当您用语言 A（优先级为 P [A]）编写代码然后使用语言 B （优先级为 P [B] )?

你会得到不一致的结果。

这就是为什么它是在语言级别而不是 BCL/CLR 级别上确定的；没有可能的方法可以跨语言始终如一地做到这一点，考虑到您可以从多种语言访问库，如果他们可以或尝试过，这甚至可能没有意义。

如果您要实现这样的事情，我建议您包含语言标识符并确保运算符优先级的比较与语言相关联。*当方法/库在所有*语言中使用时，这是保证结果一致的唯一方法。

# css - 在 IE 上破解背景大小问题的最佳方法

> ID：12250727
> 
> 赞同：0
> 
> 时间：2012-09-03T15:35:27.513
> 
> 标签：css, internet-explorer, internet-explorer-8

您能否建议使用 IE8 破解背景大小问题的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:39:31.910

您可以参考`background-size`.

据我所知，您可以通过遵循[这个教程链接](http://css-tricks.com/perfect-full-page-background-image/)来实现它，因为您没有代码可以在您的问题中向我们展示，所以我只能建议您查看该链接。

顺便说一句，正如它所提到的，如果需要填满整个屏幕（或更大的元素），它会工作得很好，而且它会在小尺寸的项目上出现问题。

但无论如何，在处理精灵时，有一个解决 IE 问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:13:08.197

不确定您的问题是什么，但这个 CSS IE8 hack 可能会有一些用处。这些括号内的任何 CSS 都只能被 IE8 读取。

```
@media \0screen {
    /*put css tags here as normal*/
    div.example {
        background-color: #FFFFFF;
    }
} 
```

# jquery - div 使用 jQuery 动画时，将所有其他 div 向下推

> ID：12250728
> 
> 赞同：0
> 
> 时间：2012-09-03T15:35:27.987
> 
> 标签：jquery, css

我想要做的就是让一个 div 将页面向下移动到某个位置，现在动画可以工作，但它也会将所有其他 div 也向下移动，我该如何解决这个问题？

html代码中的div

```
 <div id = "Sidepanel" style="background:#98bf21;height:0px;width:150px;top:0px;opacity:0;position:relative;left:5px"></div> 
```

使用的 jQuery

```
$("#Sidepanel").animate({height:560,top:1010,opacity:1},"slow"); 
```

围绕网站上所有内容的 div

```
#wrapper {
    padding: 0;
    background: url(images/main-image-bg.jpg) no-repeat center top;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:38:01.983

给它绝对位置以将其从文档流中取出，然后使用`top`它来移动它（或者在可能的情况下最好使用 CSS 转换）。

# rest - jersey：如何将数据从 Servlet 发送到 Jersey 过滤器

> ID：12250731
> 
> 赞同：2
> 
> 时间：2012-09-03T15:35:43.990
> 
> 标签：rest, jersey

在 servlet doPost 方法中，我在 MultivaluedMap 中设置了一些数据，如图所示。

```
protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
            HttpSession sess = request.getSession();
            System.out.println("Session ID For Servlet"+sess.getId());

            sess.setAttribute("Name","ID");

            MultivaluedMap formData = new MultivaluedMapImpl();
              formData.add("name1", "val1");
              formData.add("name2", "val2");

            response.sendRedirect("ajax/balances");
    } 
```

谁能告诉我如何在球衣过滤器中获得该值

这是我的过滤器

```
public class MineFilter implements ContainerRequestFilter {
        @Override
    public ContainerRequest filter(ContainerRequest request) {

            return request ;
        } 
```

或者如果可以将数据从 Servlet 发送到 Jersey 过滤器，有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-31T06:46:33.297

在 Jersey 中有两种类型的接口`ContainerRequstFilter`，`ContainerResponseFilter`并且这两种接口都有一个方法`void filter(conextInfo)`，所以在过滤器中，如果我们只实现`ContainerRequestFilter`它，它只会在请求到达 servlet 之前被调用，因此这些有时也称为请求过滤器。现在，如果我们想拦截响应，我们需要编写一个实现这两个接口的类。

一个明显的原因是，当请求第一次进来时，不需要 responseContext ，因为我们几乎不会使用它，所以我们可以通过简单地实现`ContainerRequestContext`. 现在，当我们谈论拦截响应时，我们可以清楚地看到对 RequestContext 的需求，它可用于获取有关请求的信息。所以为此目的，这就是我们所拥有的。因此，所谓的响应过滤器将具有过滤请求和响应的能力。因此，当我们覆盖 ContainerResponseFilter 的 void 过滤器（上下文信息）时，它同时具有请求上下文和响应上下文。此处的请求上下文将处于只读模式。

因此，一旦请求通过 servlet，您始终可以通过实现拦截响应`ContainerResponseFilter`并从响应中获取值。

```
@Provider
@Priority(2)        //set the priority just to make sure it is executed after the request filter
public class CustomResponseFilter implements ContainerRequestFilter, ContainerResponseFilter{
 @Override
 public void filter(ContainerRequestContext requestCOntext) throws IOException {
     //dont Do anything here as this filter is intended for response processing 
 }

 @Override
 public void filter(ContainerRequestContext requestContext,
                    ContainerResponseContex responseContext) throws IOException {
     //work with the responseContext and let the requst pass through
 }

} 
```

# c# - C# TextWriter，允许读取文件：

> ID：12250735
> 
> 赞同：8
> 
> 时间：2012-09-03T15:36:06.787
> 
> 标签：c#, textwriter

```
using (TextWriter writer = File.CreateText(path2))
                        {
                            writer.Write(SomeText);
                        } 
```

这是一段有问题的代码。当我写入文件时，没关系，直到其他应用程序打开文件。然后我得到错误。

如何编写可以同时读取的文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T15:40:47.213

您需要指定`FileShare.Read`：

```
using (Stream stream = File.Open(path2, FileMode.OpenOrCreate, FileAccess.Write, FileShare.Read))
using (TextWriter writer = new StreamWriter(stream))
{
    writer.Write(SomeText);
} 
```

它将允许其他进程打开文件进行读取，而不是写入。

# github - 配置 Team City internal.properties 以增加 git fetch 内存

> ID：12250737
> 
> 赞同：1
> 
> 时间：2012-09-03T15:36:08.827
> 
> 标签：github, teamcity

从 GIT 中提取时，我的 Team City 安装出现内存不足错误。

根据 Team City 文档，我应该能够通过将 teamcity.git.fetch.process.max.memory 的值设置为大于默认的 512MB 来增加分配给 git fetch 进程的内存。

[http://confluence.jetbrains.net/display/TCD65/Git+%28JetBrains%29#Git%28JetBrains%29-InternalProperties](http://confluence.jetbrains.net/display/TCD65/Git+%28JetBrains%29#Git%28JetBrains%29-InternalProperties)

问题是在指定位置似乎没有 internal.properties 文件。

我已尝试按照此处的建议在 TeamCity/conf/internal.properties 中创建一个：

[http://devnet.jetbrains.net/thread/302596](http://devnet.jetbrains.net/thread/302596)

但是当 Team City 尝试从 github 中提取时，我仍然会遇到内存不足的问题

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:37:32.997

答案是在服务器上设置一个全局系统变量，以便在团队城市服务启动时将一个值传递给它。

例如：

变量名：TEAMCITY_SERVER_OPTS 变量值：Dteamcity.git.fetch.process.max.memory=1024M

这是特定于 Team City 7.1 的，不适用于以前的版本。

# objective-c - 如何使用 Xcode 将属性列表文件键的值读入 iphone 应用程序的字符串

> ID：12250739
> 
> 赞同：0
> 
> 时间：2012-09-03T15:36:20.267
> 
> 标签：objective-c, iphone, xcode, plist

我有一个属性列表文件“someFile.plist”，在 plist 中有两行“row1”和“row2”，每行都有一个字符串值，即“Y”或“N”——如果我想检查“someFile” “row2”的.plist”文件以获取该行的值并将其读入目标c中的字符串，我该怎么做？我正在使用 Xcode 为 iphone App 编写代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T15:44:36.733

加载`.plist`到`NSDictionary`like中：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"plist"];
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

循环`NSDictionary`使用类似的东西：

```
for (id key in dictionary) {
    NSLog(@"key: %@, value: %@", key, [dictionary objectForKey:key]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-07T02:42:09.903

如果您想将“row2”的值获取到 String，那么这取决于您是具有 Dictionary 类型还是 Array 类型。在字典类型的情况下：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"pListFileName" ofType:@"plist"];
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
NSString valueOfRow2 = [dict objectForKey:@"row2"]);
NSLog(@"The value of row2 is %@", valueOfRow2); 
```

在数组的情况下：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"pListFileName" ofType:@"plist"];
NSArray *array = [NSArray arrayWithContentsOfFile: path];
//the indexes of NSArray is counted from 0, not from 1
NSString valueOfRow2 = [array objectAtIndex:1];
NSLog(@"The value of row2 is %@", valueOfRow2); 
```

您可以分别使用 NSMutableDictionary 和 NSMutableArray。修改它们会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T06:05:53.497

对于 Swift 3.0：

```
if let path = Bundle.main.path(forResource: "YourPlistFile", ofType: "plist"), let dict = NSDictionary(contentsOfFile: path) as? [String: AnyObject] {
            let value = dict["KeyInYourPlistFile"] as! String
    } 
```

# c - 进程在没有（明显）原因的情况下被终止，程序停止工作

> ID：12250744
> 
> 赞同：1
> 
> 时间：2012-09-03T15:36:37.477
> 
> 标签：c, linux, process, fork, stdin

这是我的程序应该做的事情：

创建4个子进程：

进程 0 一次从 STDIN 读取 1 个字节，然后将其写入 FIFO

进程 1 正在从 fifo 读取这 1 个字节并将其值作为 HEX 写入共享内存

进程 2 正在从共享内存中读取 HEX 值并将其写入管道

最后进程3正在从管道读取并写入STDOUT（在我的例子中：终端）

我无法改变沟通渠道。FIFO，然后是共享内存，然后是管道是唯一的选择。

**我的问题：**当某些文件被定向到标准输入时，程序会随机停止（例如：./program < /dev/urandom）。有时在写 5 个 HEX 值之后，有时在 100 之后。奇怪的是，当它工作时，在另一个终端中我写“pstree -c”有 1 个主进程和 4 个子进程（这是我想要的），但是当我在停止写入（但仍在运行）后写入“pstree -c”，只有 3 个子进程。出于某种原因 1 消失了，即使它们都有 while(1) ..

我想我在这里的同步可能有问题，但我无法发现它（我已经尝试了很多小时）。

这是代码：

```
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/shm.h>
#include <sys/sem.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/stat.h>
#include <string.h>
#include <signal.h>

#define BUFSIZE 1
#define R 0
#define W 1

// processes ID
pid_t p0, p1, p2, p3;

// FIFO variables
int fifo_fd;
unsigned char bufor[BUFSIZE] = {};
unsigned char bufor1[BUFSIZE] = {};

// Shared memory variables
key_t key;
int shmid;
char * tab;

// zmienne do pipes
int file_des[2];        
char bufor_pipe[BUFSIZE*30] = {};

void proces0() 
{
ssize_t n;

while(1)
{       
    fifo_fd = open("/tmp/fifo",O_WRONLY);                       

    if(fifo_fd == -1)
    {
        perror("blad przy otwieraniu kolejki FIFO w p0\n");
        exit(1);
    }

    n = read(STDIN_FILENO, bufor, BUFSIZE);             

    if(n<0)
    {
        perror("read error w p0\n");
        exit(1);
    }

    if(n > 0)
    {
        if(write(fifo_fd, bufor, n) != n)
        {
            perror("blad zapisu do kolejki fifo w p0\n");
            exit(1);
        }   

        memset(bufor, 0, n);                                    // czyszczenie bufora       
    }

    close(fifo_fd);     
}

}

void proces1()
{
ssize_t m, x;
char wartosc_hex[30] = {};

while(1)
{
    if(tab[0] == 0)
    {       
        fifo_fd = open("/tmp/fifo", O_RDONLY);                      // otwiera plik typu fifo do odczytu

        if(fifo_fd == -1)
        {
            perror("blad przy otwieraniu kolejki FIFO w p1\n");
            exit(1);
        }

        m = read(fifo_fd, bufor1, BUFSIZE);
        x = m;

        if(x < 0)
        {
            perror("read error p1\n");
            exit(1);
        }

        if(x > 0)
        {       
            // Konwersja na HEX

            if(bufor1[0] < 16)
            {
                if(bufor1[0] == 10)     // gdy enter
                {
                    sprintf(wartosc_hex, "0x0%X\n", bufor1[0]);
                }
                else
                {
                    sprintf(wartosc_hex, "0x0%X ", bufor1[0]);
                }
            }
            else
            {
                sprintf(wartosc_hex, "0x%X ", bufor1[0]);
            }

            // poczekaj az pamiec bedzie pusta (gotowa do zapisu)

            strcpy(&tab[0], wartosc_hex);
            memset(bufor1, 0, sizeof(bufor1));                                  // czyszczenie bufora
            memset(wartosc_hex, 0, sizeof(wartosc_hex));        // przygotowanie tablicy na zapis wartosci hex 
            x = 0;
        }   

        close(fifo_fd);     
    }           
}
}

void proces2()
{
close(file_des[0]);     // zablokuj kanal do odczytu

while(1)
{
    if(tab[0] != 0)
    {
        if(write(file_des[1], tab, strlen(tab)) != strlen(tab))
        {
            perror("blad write w p2");
            exit(1);
        }

        // wyczysc pamiec dzielona by przyjac kolejny bajt
        memset(tab, 0, sizeof(tab));
    }
}
}

void proces3()
{
ssize_t n;

close(file_des[1]);     // zablokuj kanal do zapisu

while(1)
{   
    if(tab[0] == 0)
    {   
    if((n = read(file_des[0], bufor_pipe, sizeof(bufor_pipe))) > 0)
    {
        if(write(STDOUT_FILENO, bufor_pipe, n) != n)
        {
            perror("write error w proces3()");
            exit(1);
        }

        memset(bufor_pipe, 0, sizeof(bufor_pipe));
    }
}
}
}

int main(void)
{   
key = 5678;
int status;

// Tworzenie plikow przechowujacych ID procesow

int des_pid[2] = {};
char bufor_proces[50] = {};

mknod("pid0", S_IFREG | 0777, 0);
mknod("pid1", S_IFREG | 0777, 0);
mknod("pid2", S_IFREG | 0777, 0);
mknod("pid3", S_IFREG | 0777, 0);

// Tworzenie semaforow

key_t klucz;
klucz = ftok(".", 'a');                 // na podstawie pliku i pojedynczego znaku id wyznacza klucz semafora

if(klucz == -1)
{
    perror("blad wyznaczania klucza semafora");
    exit(1);
}

semafor = semget(klucz, 1, IPC_CREAT | 0777);           // tworzy na podstawie klucza semafor. 1 - ilosc semaforow

if(semafor == -1)
{
    perror("blad przy tworzeniu semafora");
    exit(1);
}

if(semctl(semafor, 0, SETVAL, 0) == -1)                         // ustawia poczatkowa wartosc semafora (klucz, numer w zbiorze od 0, polecenie, argument 0/1/2)
{
    perror("blad przy ustawianiu wartosci poczatkowej semafora");
    exit(1);
}

// Tworzenie lacza nazwanego FIFO

if(access("/tmp/fifo", F_OK) == -1)                             // sprawdza czy plik istnieje, jesli nie - tworzy go
{
    if(mkfifo("/tmp/fifo", 0777) != 0)
    {
        perror("blad tworzenia FIFO w main");
        exit(1);
    }
}

// Tworzenie pamieci dzielonej
// Lista pamieci wspoldzielonych, komenda "ipcs"
// usuwanie pamieci wspoldzielonej, komenta "ipcrm -m ID_PAMIECI"

shmid = shmget(key, (BUFSIZE*30), 0666 | IPC_CREAT);

if(shmid == -1)
{
    perror("shmget");
    exit(1);
}

tab = (char *) shmat(shmid, NULL, 0);

if(tab == (char *)(-1))
{
    perror("shmat");
    exit(1);
}

memset(tab, 0, (BUFSIZE*30));

// Tworzenie lacza nienazwanego pipe

if(pipe(file_des) == -1)
{
    perror("pipe");
    exit(1);
}

// Tworzenie procesow potomnych
if(!(p0 = fork()))
{
    des_pid[W] = open("pid0", O_WRONLY | O_TRUNC | O_CREAT);                    // 1 - zapis, 0 - odczyt

    sprintf(bufor_proces, "Proces0 ma ID: %d\n", getpid());

    if(write(des_pid[W], bufor_proces, sizeof(bufor_proces)) != sizeof(bufor_proces))
    {
        perror("blad przy zapisie pid do pliku w p0");
        exit(1);
    }

    close(des_pid[W]);

    proces0();
}
else if(p0 == -1)
{
    perror("blad przy p0 fork w main");
    exit(1);
}
else
{
    if(!(p1 = fork()))
    {
        des_pid[W] = open("pid1", O_WRONLY | O_TRUNC | O_CREAT);                    // 1 - zapis, 0 - odczyt

        sprintf(bufor_proces, "Proces1 ma ID: %d\n", getpid());

        if(write(des_pid[W], bufor_proces, sizeof(bufor_proces)) != sizeof(bufor_proces))
        {
            perror("blad przy zapisie pid do pliku w p1");
            exit(1);
        }

        close(des_pid[W]);

        proces1();
    }
    else if(p1 == -1)
    {
        perror("blad przy p1 fork w main");
        exit(1);
    }
    else
    {
        if(!(p2 = fork()))
        {
            des_pid[W] = open("pid2", O_WRONLY | O_TRUNC | O_CREAT);                    // 1 - zapis, 0 - odczyt

            sprintf(bufor_proces, "Proces2 ma ID: %d\n", getpid());

            if(write(des_pid[W], bufor_proces, sizeof(bufor_proces)) != sizeof(bufor_proces))
            {
                perror("blad przy zapisie pid do pliku w p2");
                exit(1);
            }

            close(des_pid[W]);
            proces2();
        }
        else if(p2 == -1)
        {
            perror("blad przy p2 fork w main");
            exit(1);
        }
        else
        {
            if(!(p3 = fork()))
            {
                des_pid[W] = open("pid3", O_WRONLY | O_TRUNC | O_CREAT);                    // 1 - zapis, 0 - odczyt

                sprintf(bufor_proces, "Proces3 ma ID: %d\n", getpid());

                if(write(des_pid[W], bufor_proces, sizeof(bufor_proces)) != sizeof(bufor_proces))
                {
                    perror("blad przy zapisie pid do pliku w p3");
                    exit(1);
                }

                close(des_pid[W]);

                proces3();
            }
            else if(p3 == -1)
            {
                perror("blad przy p3 fork w main");
                exit(1);
            }
            else
            {
                // proces macierzysty
                waitpid(p0, &status, 0);
                waitpid(p1, &status, 0);
                waitpid(p2, &status, 0);
                waitpid(p3, &status, 0);
                //wait(NULL);
                unlink("/tmp/fifo");
                shmdt(tab);                             // odlaczenie pamieci dzielonej
                shmctl(shmid, IPC_RMID, NULL);          // usuwanie pamieci wspoldzielonej
                printf("\nKONIEC PROGRAMU\n");
            }
        }
    }
}

exit(0);
} 
```

使用“strace ./projekt_wlasciwy < /dev/urandom”后，我得到了这样的结果：

```
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD,     child_tidptr=0xb7e2e728) = 26916
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD,     child_tidptr=0xb7e2e728) = 26917
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD,     child_tidptr=0xb7e2e728) = 26918
clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD,     child_tidptr=0xb7e2e728) = 26919
waitpid(26916, 0xAA 0xC1 0x84 0x9C 0x4E 0x0D 0x54 0xB2 0xE7 0x19 0x22 0xA0 0x2E 0xF0 0x1C 0xC4 0xDF 0x21 0xA2 0xB4 0x3B 0xEE [{WIFSIGNALED(s) && WTERMSIG(s) == SIGPIPE}], 0) = 26916
--- SIGCHLD (Child exited) @ 0 (0) ---
waitpid(26917, 0x40 0xbfb083a8, 0)           = ? ERESTARTSYS (To be restarted)
--- SIGWINCH (Window changed) @ 0 (0) ---
waitpid(26917, [{WIFSIGNALED(s) && WTERMSIG(s) == SIGTERM}], 0) = 26917
--- SIGTERM (Terminated) @ 0 (0) ---
+++ killed by SIGTERM +++ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T18:04:56.623

代码中有一些与信号量相关的错误。您的代码中有一个 reader(process2) 和一个 writer(process1)。

他们需要拥有对共享内存的独占访问权限，但这是不正确的。您正在使用

```
semctl(semafor, 0, SETVAL, 0) == -1 
```

似乎这是不正确的。您正在尝试为信号量设置一些值，所以请。在这种情况下检查第四个参数。PL。从链接[http://pubs.opengroup.org/onlinepubs/7908799/xsh/semctl.html阅读](http://pubs.opengroup.org/onlinepubs/7908799/xsh/semctl.html)

此外，您还应该检查 process1 和 process2 中的信号量值，然后才能在共享内存中执行某些操作。这些操作在哪里？您需要使用缺少的 semop。PL。阅读链接[http://pubs.opengroup.org/onlinepubs/7908799/xsh/semop.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/semop.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:12:05.487

您的代码中可能存在一个错误，导致其中一个孩子崩溃。我建议添加一些调试输出（将其写入控制台或日志文件），以便您可以查看输入的数据和输出的数据。

我也有点担心输出。`ERESTARTSYS`表示有一个可以重新启动的系统调用（= 再试一次）。不知道那是从哪里来的。

也`SIGTERM`意味着有人杀死了这个过程。但这可能会`strace`告诉你你停止了它。如果它是其中一个孩子的输出，那么有人杀死了你的进程。

# c# - 如何将饼图添加到我的 winforms 应用程序？

> ID：12250747
> 
> 赞同：8
> 
> 时间：2012-09-03T15:36:47.957
> 
> 标签：c#, winforms, visual-studio-2010, .net-4.0, charts

我正在尝试将饼图添加到我的 winforms 应用程序 - 但我在工具箱中可以找到的唯一图表是常规条形图。

有没有办法通过使用一些现有的 .net 4 框架库（不安装任何新库，如“DevExpress”等）将此条形图形成为饼图或将饼图组件添加到我的工具箱？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T09:45:24.007

您可以通过在属性窗口中选择系列来更改图表类型或使用以下示例代码

```
 chart1.Series["Business"].ChartType =   
       System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Pie; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T16:26:59.557

在 .NET 4 及更高版本中，我认为您的框架中有 MS Chart。在此处阅读更多信息：http: [//code.msdn.microsoft.com/Samples-Environments-for-b01e9c61](http://code.msdn.microsoft.com/Samples-Environments-for-b01e9c61)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-11T16:36:48.807

实际上，视觉工作室确实有一个饼图。拖出条形图后。转到您的属性面板，然后在图表下单击系列。将出现一个对话框，之后您将选择图表类型。有不同图表类型的完整列表可供选择

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T15:42:04.260

如果没有第三方工具，唯一的解决方法是在 WPF 中创建一个新的用户控件，以便遵循本教程：

[http://www.codeproject.com/Articles/28098/A-WPF-Pie-Chart-with-Data-Binding-Support](http://www.codeproject.com/Articles/28098/A-WPF-Pie-Chart-with-Data-Binding-Support)

然后按照本教程将其托管在 Windows 窗体项目中：

[http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms)

这样您就可以自己创建控件而无需下载任何内容，尽管您可能需要上下文切换才能使用 WPF 教程 - 我希望这没问题 :)

# java - Activiti Engine：任务事件 - 用户为空

> ID：12250749
> 
> 赞同：1
> 
> 时间：2012-09-03T15:37:11.773
> 
> 标签：java, activiti

我的activiti引擎有问题，应该很容易解决，但是我找不到调用方法来解决这个问题：

我的问题是，每个任务事件 (org.activiti.engine.task.Event) 通过调用 Event.getUserId(); 返回 null；如果我查看数据库，我会发现数据库表 ACT_HI_COMMENT 的每一行的列 USER_ID_ 的值为 null。

我通过调用（例如）以编程方式生成这些任务事件

```
processEngine.getTaskService().addComment(task.getId(),    null, commentMessage);

processEngine.getTaskService().addUserIdentityLink(task.getId(), user.getId(), IDENTITY_LINK_OBSERVER); 
```

我想我必须调用一个简单的方法来解决这个问题，比如 processEngine.setCurrentUser(authenticatedUser.getId());

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:58:20.437

设置应该可以解决问题`authenticatedUserId`：`IdentityService`

```
processEngine.getIdentityService().setAuthenticatedUserId(user.getId()); 
```

# iphone - 如何将 NSMutableArray 元素计数的文本输出到 iPhone 标签

> ID：12250752
> 
> 赞同：0
> 
> 时间：2012-09-03T15:37:41.977
> 
> 标签：iphone, ios, xcode, nsmutablearray

```
NSUInteger arrayLength = [annotations count];

    UILabel* arrayLengthLabel = [[UILabel alloc] initWithFrame:CGRectMake(50, 100, 200, 100)];
    arrayLengthLabel.text = @"%@", arrayLength;
    [self.view addSubview:arrayLengthLabel]; 
```

我有上面的代码，我已经研究过了。

问题是在将数组长度计数输出到标签时。

我应该在数组中有 4 个元素，但这不是输出元素的数量，我确信我在这里犯了一个男生错误。

提前为帮助喝彩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:42:04.937

这是我将使用的代码：

```
int arrayLength = [annotations count];
UILabel* arrayLengthLabel = [[UILabel alloc] initWithFrame:CGRectMake(50, 100, 200, 100)];
arrayLengthLabel.text = [NSString stringWithFormat:@"%i",arrayLength];
[self.view addSubview:arrayLengthLabel]; 
```

我正在使用标准 int 并使用代码`%i`而不是`%@`. 这可能是你的问题。我不知道是否`NSUInteger`需要`%i`，但我绝对知道`int`用途`%i`。

另外，我不知道你的方式是否在`NSString`没有测试的情况下工作，所以我使用了“完整”格式，我知道它肯定有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:45:33.547

你可以这样做：

```
UILabel* myLabel = [[UILabel alloc] initWithFrame: CGRectMake(25, 100, 110, 100)];
myLabel = [NSString stringWithFormat: @"%i", [myArray count]];
[self.view addSubview: myLabel]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:44:11.677

进行如下更改：

```
NSUInteger arrayLength = [annotations count];
UILabel* arrayLengthLabel = [[UILabel alloc] initWithFrame:CGRectMake(50, 100, 200, 100)];
arrayLengthLabel.text = [NSString stringWithFormat:@"%d", arrayLength];//changes made here
[self.view addSubview:arrayLengthLabel]; 
```

# c - 指向恒定大小二维数组中的一维数组的指针

> ID：12250753
> 
> 赞同：3
> 
> 时间：2012-09-03T15:37:43.030
> 
> 标签：c, pointers

我有一个恒定大小的二维整数数组，我声明为

`int array[SIZE_1][SIZE_2];`

我想声明一个指针`p`，以便我可以将二维数组的“行”分配给它，即

`p = array[index];`

我试过声明`p`为

`int (* p)[SIZE_2];`

但这给了我一个`"assignment from incompatible pointer type"`警告（MinGW 上的 GCC）。

那么如何`p`正确申报呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:41:48.523

您指向一个整数数组（行）：-

```
 int *p = array[index];
 so,
 p[1] == array[index][1]; 
```

这也有效：-

```
int array[SIZE_1][SIZE_2];
int (*p)[SIZE_2] = array; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:04:03.323

如果你想要一个**指向特定大小数组的指针**，你可以使用 sth. 像这样：

```
....
typedef int AOFSIZE[SIZE_2];      // one row

int Array[SIZE_1][SIZE_2];        // our array
int rowindex = 1;                 // any row available
AOFSIZE *ptr = &Array[rowindex];
... 
```

但这仅在某些情况下才勉强使用。

问候，

rbo

# xades4j - 有关 TPtCC() 签名的更多信息

> ID：12250754
> 
> 赞同：0
> 
> 时间：2012-09-03T15:37:47.147
> 
> 标签：xades4j

我正在使用“SignerTestBase”处理 SignerTTest.java ：

```
 public class SignerTestBase extends SignatureServicesTestBase
{
    /**/
    static protected KeyingDataProvider keyingProviderMy;
    static protected KeyingDataProvider keyingProviderNist;

    static
{
    try
    {
        keyingProviderMy = createFileSystemKeyingDataProvider("pkcs12", "my/LG.pfx", "mykeypass", true);
        keyingProviderNist = createFileSystemKeyingDataProvider("pkcs12", "csrc.nist/test4.p12", "password", false);
    } catch (KeyStoreException e)
    {
        throw new NullPointerException("SignerTestBase init failed: " + e.getMessage());
    }
}

public static Document getTestDocument() throws Exception
{
    //return getDocument("document.xml");

    //==that I changed=====================================================================
    return getDocument("fv.xml");

} 
```

我有类 SignerTTest.java

```
@Test
public void testSignTPtCC() throws Exception
{
    System.out.println("signTPtCitizenCard");

    if (!onWindowsPlatform())
        fail("Test written for the Windows platform");

    Document doc = getTestDocument();
    Element elemToSign = doc.getDocumentElement();
    try
    {
        PKCS11KeyStoreKeyingDataProvider ptccKeyingDataProv = new PKCS11KeyStoreKeyingDataProvider(
                //"C:\\Windows\\System32\\pteidpkcs11.dll", "PT_CC",
                "C:\\Windows\\system32\\pteidpkcs11.dll", "PT_CC",

                new FirstCertificateSelector(), null, null, false);

        SignerT signer = (SignerT)new XadesTSigningProfile(ptccKeyingDataProv).withAlgorithmsProvider(PtCcAlgorithmsProvider.class).newSigner();
        new xades4j.production.Enveloped(signer).sign(elemToSign);

        outputDocument(doc, "document.signed.t.bes.ptcc.xml");
    } catch (ProviderException ex)
    {
        fail(" !!!!!!!PT CC PKCS#11 provider not configured !!!!!!!!!!!!");
    }
} 
```

在我的 main.class 中：

```
 System.out.println("============================================================================");          
        System.out.println("XADESTEST : T SIGNATURE");
        System.out.println("============================================================================");
        System.out.println();

        SignerTTest signerTTest = new SignerTTest();
        System.out.println("signerTTest : " + signerTTest.toString()); 

        /**
         *    ==== NOT OK =====
         */
        signerTTest.testSignTPtCC(); 
```

在我的控制台中，我得到：

```
> ============================================================================
XADESTEST : T SIGNATURE
============================================================================

signerTTest : xadestest.SignerTTest@1304043
signTPtCitizenCard
Exception in thread "main" java.lang.AssertionError:  !!!!!!!PT CC PKCS#11 provider not configured !!!!!!!!!!!!
    at org.junit.Assert.fail(Assert.java:58)
    at xadestest.SignerTTest.testSignTPtCC(SignerTTest.java:119)
    at xadestest.XadesTest.main(XadesTest.java:117)
Java Result: 1
BUILD SUCCESSFUL (total time: 3 seconds) 
```

请您在我搜索期间就这个问题给我建议吗？

谢谢，

将要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:08:47.823

该测试是为使用葡萄牙公民卡 PKCS#11 提供程序而编写的。正如异常消息所述，您没有安装提供程序。如果您需要使用 PKCS#11 提供程序测试该库，请更改配置以改用其本机库。

PS：lib docs和examples对此非常清楚..请仔细看看。另外，请在此处投票。

# ios - 如何将 NSTextView 从 nib 链接到 windowController？

> ID：12250756
> 
> 赞同：0
> 
> 时间：2012-09-03T15:38:00.090
> 
> 标签：ios, cocoa, nib, nstextview

我在窗口控制器文件中为 NSTextView 创建了一个插座属性。然后，我创建了一个单独的窗口 xib 文件，其中包含 NSTextView。如何将 xib 文件中的视图对象链接到窗口控制器文件中的插座？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:03:56.147

将 xib 文件中文件所有者的类更改为窗口控制器文件的类，然后插座将显示在文件所有者下，您可以从那里连接它。

# c++ - 软 I²C ping 功能

> ID：12250759
> 
> 赞同：3
> 
> 时间：2012-09-03T15:38:15.007
> 
> 标签：c++, arduino, i2c

我正在使用软[I²C](http://en.wikipedia.org/wiki/I%C2%B2C)实现来读取一组 Sensirion SHT21 传感器。我试图找出一种让传感器应答的方法，以查看它们是否实际连接到设备。我正在使用 Arduino，这意味着我的所有代码都是 C/C++

我正在使用的库在[这里](http://pastebin.com/u/mrjonny2)。

用于读取传感器的代码如下：

```
#include <Ports.h>
#include <PortsSHT21.h>

//Define soft I²C channels for three sensors
SHT21 hsensor2 (2); // pins A1 and D5 - Sensor 2

//define variables for temp data
float h, t;

void setup() {}

void loop()
{
    // Get data from sensor soft I²C
    hsensor2.measure(SHT21::HUMI);
    hsensor2.measure(SHT21::TEMP);
    hsensor2.calculate(h, t);
    float hum2 = (h);
    float temp2 = (t);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:39:50.017

大代码块是 measure() 函数的代码。请注意，它在没有执行 connReset() 的情况下一次返回 0。这应该是一种检测有效设备的方法，例如...

```
bool hasHUMI;
if (hsensor2.measure(SHT21::HUMI))
{
  hasHUMI=true;
} 
```

或者

```
if (hsensor2.measure(SHT21::HUMI) && hsensor2.measure(SHT21::TEMP))
{
 hsensor2.calculate(h, t); 
 float hum2 = (h); 
 float temp2 = (t);    
} 
```

或者

在进行读取之前，您的代码应将 h 和 t 清除为 0，以便您可以测试有效值。像这样...

```
void loop() 
{ 
    h=0.00f;
    t=0.00f;
    // Get data from sensor soft I²C 
    hsensor2.measure(SHT21::HUMI); 
    hsensor2.measure(SHT21::TEMP); 
    hsensor2.calculate(h, t); 
    float hum2 = (h); 
    float temp2 = (t); 
    if (h>0) {
    }
    if (t>0) {
    }
} 
```

如果没有，那么您可以制作（复制）您自己的`measure()`函数版本，用于测试`meas[type]`. 您需要`meas[type]`在读取之前设置为已知的无效值（例如`0`）。

```
uint8_t SHT21::measure(uint8_t type, void (*delayFun)()) {

    start();
    writeByte(type == TEMP? MEASURE_TEMP : MEASURE_HUMI)

    for (uint8_t i = 0; i < 250; ++i) {
        if (!digiRead()) {
            meas[type] = readByte(1) << 8;
            meas[type] |= readByte(1);
            uint8_t flipped = 0;

            for (uint8_t j = 0x80; j != 0; j >>= 1) {
                flipped >>= 1;
            }

            if (readByte(0) != flipped)
                break;

            return 0;
        }

        if (delayFun)
            delayFun();
        else
            delay(1);
    }

    connReset();
    return 1;
} 
```

您可能知道，如果您向库 cpp 添加方法，那么您还需要向 .h 添加相应的原型，否则 arduino 将无法编译您的代码。

.cpp

```
uint8_t SHT21::measureTest(uint8_t type, void (*delayFun)()) {

    } 
```

。H

```
uint8_t measureTest(uint8_t type, void (*delayFun)() =0); 
```

# android - trigger.io android 应用程序启动图像首选项问题

> ID：12250762
> 
> 赞同：2
> 
> 时间：2012-09-03T15:39:13.803
> 
> 标签：android, trigger.io

刚刚完成了我的 trigger.io 应用程序的第一个版本，并在 android 和 ios 平台上成功地对其进行了测试。(trigger.io v1.4, forge tools v3.3.11)

但是，我有一个小故障，那就是：**我无法更改 android 默认 trigger.io 启动图像。**

我在面板中为 ios 和 android 设置了正确的图像路径`App Config`，但只有 ios 版本在应用程序启动期间实际显示我的图像。Android 版本显示 trigger.io 品牌之一。

是否需要了解图像文件的任何格式、颜色深度或任何未记录的特征？

我这边的调查：

*   中`my app directory/development/android/res/drawable`，`splash.png`文件是trigger.io之一。我不知道我是否应该期望在这里看到我的图像文件。
*   在构建过程中，我有 5 行 ios launchimages ：

    ```
    {'do': {'copy_files': {'from': '${modules["launchimage"]["iphone"]}',
                        'to': 'development/ios/*.app/Default~iphone.png'}}, 
    ```

    但没有为 android launchimage 设置的值`App Config`

*   `src/config.json`看起来不错：

    ```
    "launchimage": {
        "android": "android.png", 
        "android-landscape": "android-landscape.png", 
        "ipad": "ipad.png", 
        "ipad-landscape": "ipad-landscape.png", 
        "ipad-landscape-retina": "ipad-landscape-retina.png", 
        "ipad-retina": "ipad-retina.png", 
        "iphone": "iphone.png", 
        "iphone-retina": "iphone-retina.png"
    }, 
    ```

任何的想法 ？

谢谢

奥雷连

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:02:28.583

感谢您报告此问题 - 它已在我们的 v1.4.15 平台版本中修复：如果您的 App Config 中有 v1.4，您将自动选择该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:06:11.233

从支持电子邮件跟踪中发现，仅在使用启动图像指定横向时才会出现问题。我们的积压工作中有一张未处理的工单，当它解决后会在这里报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:40:33.867

当我使用像 img\loaderimage.png 这样的子文件夹时，它不起作用。我将图像移至根目录并重新配置了应用程序，然后它就可以工作了。

错误必须与 \ 符号相关，否则构建器正在根目录中查找图像。

# sql - 如何根据值存在查询记录？

> ID：12250763
> 
> 赞同：0
> 
> 时间：2012-09-03T15:39:27.430
> 
> 标签：sql, db2

假设我有一个包含以下条目的表：

```
ID    VALUE    CATEGORY
-----------------------
 1       10    A
 1       20    S
 2       30    S
 2       10    A
 3       50    A
 4       40    C
 5       60    B 
```

如何编写 SQL 查询，以便对于每个 ID，如果类别`S`存在，它应该输出该记录，但如果它不存在，那么它应该输出存在的条目。所以在我的例子中，我想达到以下结果：

```
ID    VALUE    CATEGORY
-----------------------
 1       20    S
 2       30    S
 3       50    A
 4       40    C
 5       60    B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:43:13.007

尝试，

```
SELECT  ID, VALUE, Category
FROM    tableName
WHERE   Category = 'S'
UNION
SELECT  ID, VALUE, Category
FROM    tableName
WHERE   ID NOT IN
                (
                    SELECT  ID
                    FROM    tableName
                    WHERE   Category = 'S'
                )
ORDER BY ID 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/cc1e8/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:51:00.630

我找到了一个更优雅的解决方案:-)

```
SELECT  ID, VALUE, CATEGORY
  FROM  (
      SELECT ID, VALUE, CATEGORY,
          ROW_NUMBER() OVER (PARTITION BY ID) as SEQ_ID
        FROM MY_TABLE
      ORDER BY ID, CATEGORY DESC
  )
 WHERE SEQ_ID = 1 
```

# java - 有效更改字符串中的 EOL 字符

> ID：12250764
> 
> 赞同：0
> 
> 时间：2012-09-03T15:39:28.020
> 
> 标签：java, networking, text, protocols

我正在为 Android 编写一个网络应用程序。根据协议规范，每行的结尾必须是 CR/LF 组合。虽然我用自己的字符串生成它没有问题，但有时我将不得不处理用户输入并转换行尾。

我在内部存储 EOL 并不重要，只要它作为 CR/LF 通过线路发送即可；如果最简单的方法是在它进入网络时更改它，那没关系。

无论我的字符串在内存中是什么，有什么简单有效的方法可以确保我的所有网络输出都以 CR/LF 结尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:15:51.600

> what's an efficient way to ensure that my output has a specific EOL character?

Normally when you read lines of text, it doesn't include the original EOL characters

When you write the lines, write the EOL character(s) you want instead of using something like `println`

If you have a String in memory which contains unknown EOL characters you can use

```
s = s.replaceAll("(\r\n|\r|\n)", "\r\n"); 
```

# .htaccess - 在 .htaccess 中添加异常

> ID：12250769
> 
> 赞同：2
> 
> 时间：2012-09-03T15:39:45.083
> 
> 标签：.htaccess, mod-rewrite

我当前的 .htaccess 代码如下：

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  # Get rid of index.php
  RewriteCond %{REQUEST_URI} /index\.php
  RewriteRule (.*) index.php?rewrite=2 [L,QSA]

  # Rewrite all directory-looking urls
  RewriteCond %{REQUEST_URI} /$
  RewriteRule (.*) index.php?rewrite=1 [L,QSA]

  # Try to route missing files
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} public\/ [OR]
  RewriteCond %{REQUEST_FILENAME} \.(jpg|gif|png|ico|flv|htm|html|php|css|js)$
  RewriteRule . - [L]

  # If the file doesn't exist, rewrite to index
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?rewrite=1 [L,QSA]

</IfModule> 
```

发送

```
requests /index.php/path/to/module/ to "index.php"
 AcceptPathInfo On 
```

@`todo`这在某些情况下可能无效

```
FileETag Size 
```

现在，我想将一个脚本与这个 htaccess 集成......这是脚本所说的......“添加`exception`以执行 /cometchat 目录及其在服务器上的子目录中的所有 index.php 文件。”

那么，如何添加异常以`Index.php`从该目录执行，同时不妨碍现有`.htaccess code`...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:57:19.737

你想把你的例外放在你的其他规则之前，以确保它不会干扰。

就像是

```
RewriteRule ^cometchat/(.+)?$ cometchat/$1 [L] 
```

之后立马`RewriteEngine On`

这应该直接正常执行 cometchat 中的所有文件，而不对它们强加其他规则。

* * *

另一种方法是使用否定模式，[如此处所示](https://stackoverflow.com/questions/2226364/trying-to-put-an-exception-to-rewriterule-in-htaccess)。

# java - 用 SQLEXPRESS 连接 JAVA

> ID：12250771
> 
> 赞同：2
> 
> 时间：2012-09-03T15:39:52.507
> 
> 标签：java, sql, jdbc

我没有使用经验`SQL Express`。所以我会尽量提供我认为重要的所有细节。
（这会使帖子有点长。但可能有一些不必要的细节，请浏览）

我最近安装了`Microsoft SQL Server 2008`（开始菜单中有 2 项`Microsoft SQL Server 2008`和`Microsoft SQL Server 2008 R2`）

我需要与 SQL Express 数据库通信。实际上，我可以使用本地安装的数据库成功地做到这一点（我的[这个线程](https://stackoverflow.com/a/12103261/1547699)，帮助了我）。但我需要在我们的办公室使用它。

`SQL Express`这些机器上安装了相同版本的。但是我不能在那些机器上使用我的 JAVA 程序，它会抛出这种异常。

```
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
    at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:241)
    at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2243)
    at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:491)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1309)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:207)
    at JDBC_TEST.TEST.getData(TEST.java:57)
    at JDBC_TEST.TEST$1.actionPerformed(TEST.java:44)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6038)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3265)
    at java.awt.Component.processEvent(Component.java:5803)
    at java.awt.Container.processEvent(Container.java:2058)
    at java.awt.Component.dispatchEventImpl(Component.java:4410)
    at java.awt.Container.dispatchEventImpl(Container.java:2116)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4322)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3986)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3916)
    at java.awt.Container.dispatchEventImpl(Container.java:2102)
    at java.awt.Window.dispatchEventImpl(Window.java:2429)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:121) 
```

虽然我尝试了一整天来解决这个问题，但还是想不出办法。但是我发现了一些东西，认为它与此有关。

这是我本地机器的截图`SQL Server Configuration Manager`。

![在此处输入图像描述](../Images/443c0ab1a02c43cdd84dc6a518d729cf.png)

**该程序在这种情况下工作。**所以看来我的程序`MSSQLSERVER`（仅）使用了该服务。

但是在我的办公室电脑上，虽然`SQL Express`版本是一样的（因为我用相同的设置安装在我的电脑上）我发现，这个**`MSSQLSERVER`服务在那里不可用**。它仅显示上述部分服务。(`SQL Server (SQLEXPRESS)`和`SQL Server Browser`其他一些服务)

不幸的是，我无法更改我们办公室数据库的配置。所以我需要知道我是否可以更改我的程序以通过可用`SQLSERVER`服务与数据库进行通信。

以下是一个简单（完整）的代码，以演示我如何尝试进行通信。（我正在使用[Microsoft JDBC 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)）

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class TEST extends JFrame {

    JTextField stringField;
    JButton tryButton;

    public static void main(String[] args) {
        new TEST().start();
    }

    private void start() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationByPlatform(true);
        getContentPane().setLayout(new GridLayout(2, 0));
        stringField = new JTextField("jdbc:sqlserver://localhost:1433;user=root;password=123;");
        tryButton = new JButton("TRY");
        getContentPane().add(stringField);
        getContentPane().add(tryButton);
        pack();
        tryButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                try {
                    ResultSet rSet = getData(stringField.getText());
                    rSet.first();
                    JOptionPane.showMessageDialog(tryButton, rSet.getString("username"), "DONE !", JOptionPane.INFORMATION_MESSAGE);
                    rSet.close();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
        setVisible(true);
    }

    public static ResultSet getData(String URL) throws ClassNotFoundException, SQLException {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        Connection CON = DriverManager.getConnection(URL);
        String query = "SELECT * FROM logindata;";
        Statement st = CON.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
        ResultSet RESULT = st.executeQuery(query);
        return RESULT;
    }
} 
```

我写这个是为了尝试更改连接字符串..

希望有办法解决这个问题。任何帮助都非常感谢..
谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:58:49.193

脚步

打开 Sql Server 配置管理器（开始 -> 程序 -> Microsoft SQL Server 2008 -> 配置工具）

展开 SQL Server 网络配置 -> [您的服务器实例]

双击 TCP/IP

根据协议：

确保启用是

在 IP 地址下：

滚动到底部并在 IPAll 下设置 TCP 端口，（默认为 1433）

找到您要连接的 IP 地址并将启用和活动设置为是

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:45:57.753

我认为错误消息包含给您的提示。您是否尝试连接到远程机器？个人防火墙是否在您或远程机器上运行？

如果两个问题的答案都是正确的，请检查防火墙配置。我通常会尝试停止防火墙，然后在一切正常时添加例外规则并重新启动它。您可以参考防火墙事件日志来检查发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:14:24.273

你需要去 `Start > Microsoft SQL Server > Configuration Tools > SQL Server Configuration Manager`

打开时转到

```
 SQL Server Configuration Manager > SQL Server Network Configuration > Protocols for SQLExpress 
```

你会在哪里找到协议 TCP/IP，如果禁用然后启用它点击 TCP/IP，你会找到它的属性。

在此属性**中删除所有 TCP 动态端口并将值 1433 添加到所有 TCP 端口**
并重新启动您的`SQL Server Services > SQL Server`

它完成了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-07T03:47:06.910

尝试更改您的数据库用户密码。确保新密码没有特殊字符。我遇到了同样的问题，更改数据库密码后问题得到解决。我的解决方法步骤：

我收到 sqlserverexception.java 190 错误，说明无法连接到主机端口：4500 这是我的本地主机端口。打开 Sql Server 配置管理器 -> SQL Server 网络配置 -> MSSQLSERVER 的协议 -> 启用 TCP/IP。检查 TCP 端口号。它是 1433。所以我在注册表文件中将 4500 更改为 1433。

执行上述步骤后，这次我得到了一个不同的错误，说明我的数据库用户（sql-test）的密码不正确。我将密码更改为 sqltest123 并且有效。

# c# - 强类型数据绑定和泛型？

> ID：12250777
> 
> 赞同：11
> 
> 时间：2012-09-03T15:40:33.897
> 
> 标签：c#, asp.net, .net, data-binding, asp.net-4.5

假设我想`Dictionary<string, string>`使用新的 ASP.NET 4.5 强类型数据绑定将泛型类型（此处：）绑定到中继器。

那我就不得不记下`KeyValuePair<string, string>`Repeater的ItemType属性了。

```
<asp:Repeater id="rpCategories" runat="server" ItemType="System.Collections.Generic.KeyValuePair<string, string>"> 
```

这里有一个明显的问题：**我不能在ItemType文本中使用`<`or ！`>`**

怎么办？新的数据绑定模型是否可以以某种方式使用泛型？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T16:53:55.493

这对我有用：

背后的代码

```
 protected void Page_Load(object sender, EventArgs e)
        {
           rpCategories.DataSource = new Dictionary<string, string>()
            {
                {"1", "item"},{"2", "item"},{"3", "item"},
            };
        rpCategories.DataBind();
        } 
```

标记

```
<asp:Repeater ID="rpCategories" runat="server" ItemType="System.Collections.Generic.KeyValuePair`2[System.String,System.String]">
        <ItemTemplate>
            <asp:Label ID="Label1" runat="server" Text='<%# Item.Key %>'></asp:Label>
        </ItemTemplate>
    </asp:Repeater> 
```

# python - Python Watchdog：为什么我的子进程被连续调用？

> ID：12250779
> 
> 赞同：1
> 
> 时间：2012-09-03T15:40:43.220
> 
> 标签：python, subprocess, watchdog, unison

我是 Python 的新手，我正在尝试与我的家庭服务器同步自动同步。我发现了看门狗，我正在尝试使用它，但是每当我运行“touch test.txt”时，脚本就会不断启动新的统一进程。由于观察者使用的是从队列继承的类，我假设它应该在将第一个事件从队列顶部弹出后才阻塞。我在这里忽略了什么吗？

代码：

```
#!/usr/bin/python
import sys
import subprocess
import time
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

class ChangeHandler(FileSystemEventHandler):
   def on_any_event(self, event):
      subprocess.call(["/usr/bin/unison", "-batch", "-silent", "-ui", "text",
         "default"])

if __name__ == "__main__":
   observer = Observer()
   observer.schedule(ChangeHandler(), '/home/philip', True)
   observer.start()
   try:
      while True:
         time.sleep(1)
   except KeyboardInterrupt:
      observer.stop()
   observer.join() 
```

输出：

```
props    <-?-> props      /  props    <-?-> props      Documents  props    <-?-> props      Downloads  props    <-?-> props      /  props    <-?-> props      Documents  props    <-?-> props      Downloads  props    <-?-> props      /  props    <-?-> props      Documents  props    <-?-> props      Downloads  props    <-?-> props      /  props    <-?-> props      Documents  props    <-?-> props      Downloads  props    <-?-> props      /  props    <-?-> props      Documents  props    <-?-> props      Downloads  props    <-?-> props      /  props    <-?-> props      Documents  props    <-?-> props      Downloads 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-19T20:27:55.527

OP 在评论中充分回答了这个问题：

> 使用 pyinotify 最终了解我正在同步一个目录，同时查看同一目录中的文件系统事件。当然，除非我在处理事件时暂停观察者/通知者，否则我会接到多个电话。

# python - Python：如何加快这个文件的加载速度

> ID：12250781
> 
> 赞同：2
> 
> 时间：2012-09-03T15:40:47.260
> 
> 标签：python, performance, file-io, codec

我正在寻找一种方法来加快这样的文件加载：

数据包含大约 100 万行，制表符以“\t”（制表符）和 utf8 编码分隔，使用下面的代码解析完整文件大约需要 9 秒。但是，我希望几乎在一秒钟内！

```
def load(filename):
    features = []
    with codecs.open(filename, 'rb',  'utf-8') as f:
        previous = ""
        for n, s in enumerate(f):
            splitted = tuple(s.rstrip().split("\t"))
            if len(splitted) != 2:
                sys.exit("wrong format!")
            if previous >= splitted:
                sys.exit("unordered feature")
            previous = splitted
            features.append(splitted)
    return features 
```

我想知道是否有任何二进制格式的数据可以加快速度？或者，如果我可以从某些`NumPy`或任何其他库中受益，以加快加载速度。

也许您可以就另​​一个速度瓶颈给我建议？

**编辑：**所以我尝试了你的一些想法，谢谢！顺便说一句，我真的需要巨大列表中的元组（字符串，字符串）......这是结果，我获得了 50% 的时间 :) 现在我要处理 NumPy 二进制数据，正如我所注意到的另一个巨大的文件加载起来真的很快......

```
import codecs

def load0(filename): 
    with codecs.open(filename, 'rb',  'utf-8') as f: 
    return f.readlines() 

def load1(filename): 
    with codecs.open(filename, 'rb',  'utf-8') as f: 
    return [tuple(x.rstrip().split("\t")) for x in f.readlines()]

def load3(filename):
    features = []
    with codecs.open(filename, 'rb',  'utf-8') as f:
    for n, s in enumerate(f):
        splitted = tuple(s.rstrip().split("\t"))
        features.append(splitted)
    return features

def load4(filename): 
    with codecs.open(filename, 'rb',  'utf-8') as f: 
    for s in f: 
        yield tuple(s.rstrip().split("\t")) 

a = datetime.datetime.now()
r0 = load0(myfile)
b = datetime.datetime.now()
print "f.readlines(): %s" % (b-a)

a = datetime.datetime.now()
r1 = load1(myfile)
b = datetime.datetime.now()
print """[tuple(x.rstrip().split("\\t")) for x in f.readlines()]: %s""" % (b-a)

a = datetime.datetime.now()
r3 = load3(myfile)
b = datetime.datetime.now()
print """load3: %s""" % (b-a)
if r1 == r3: print "OK: speeded and similars!"

a = datetime.datetime.now()
r4 = [x for x in load4(myfile)] 
b = datetime.datetime.now()
print """load4: %s""" % (b-a)
if r4 == r3: print "OK: speeded and similars!" 
```

结果 ：

```
f.readlines(): 0:00:00.208000
[tuple(x.rstrip().split("\t")) for x in f.readlines()]: 0:00:02.310000
load3: 0:00:07.883000
OK: speeded and similars!
load4: 0:00:07.943000
OK: speeded and similars! 
```

非常奇怪的是，我注意到我在连续两次运行中几乎可以有两倍的时间（但不是每次）：

```
>>> ================================ RESTART ================================
>>> 
f.readlines(): 0:00:00.220000
[tuple(x.rstrip().split("\t")) for x in f.readlines()]: 0:00:02.479000
load3: 0:00:08.288000
OK: speeded and similars!
>>> ================================ RESTART ================================
>>> 
f.readlines(): 0:00:00.279000
[tuple(x.rstrip().split("\t")) for x in f.readlines()]: 0:00:04.983000
load3: 0:00:10.404000
OK: speeded and similars! 
```

**最新编辑：**好吧，我尝试修改以使用`numpy.load`...这对我来说很奇怪...来自带有我的 1022860 字符串和 10 KB 的“普通”文件。做完之后，`numpy.save(numpy.array(load1(myfile)))`我去了 895 MB ！然后重新加载它，`numpy.load()`我在连续运行中得到这种时间：

```
 >>> ================================ RESTART ================================
  loading: 0:00:11.422000 done.
  >>> ================================ RESTART ================================
  loading: 0:00:00.759000 done. 
```

可能是 numpy 会做一些内存工作以避免将来重新加载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:15:33.350

试试这个版本，因为你提到检查并不重要，我已经消除了它。

```
def load(filename):
    with codecs.open(filename, 'rb',  'utf-8') as f:
        for s in f:
            yield tuple(s.rstrip().split("\t"))

results = [x for x in load('somebigfile.txt')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:55:38.050

检查实际读取文件行的​​秒数，例如

```
def load(filename):
    features = []
    with codecs.open(filename, 'rb',  'utf-8') as f:
        return f.readlines() 
```

如果明显小于 9 秒，则

1.  尝试其他使用[多处理](http://docs.python.org/library/multiprocessing.html)并拆分检查 CPU 内核之间的线路和/或
2.  使用更快的解释器，如 pypy

看看这些是否能加快速度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:59:08.273

如建议的那样，检查了迭代文件需要多长时间后`bpgergo`，您可以检查以下内容：

*   如果您知道您的文件包含 10^6 行，则可以预先分配列表。它应该比在每次迭代中附加它更快。只需用于`features = [None] * (10 ** 6)`初始化您的列表
*   不要将结果`split()`投射到元组上，这似乎没有必要。
*   你似乎根本没有从中受益`enumerate`。只需使用：`for line in f:`而不是`for n, s in enumerate(f):`

# windows - 如何使用 PowerShell 获取远程计算机的可用物理内存

> ID：12250783
> 
> 赞同：8
> 
> 时间：2012-09-03T15:41:03.380
> 
> 标签：windows, powershell, memory-management, powershell-remoting

我有这个：

```
(Get-WMIObject Win32_logicaldisk -computername computer).TotalPhysicalMemory 
```

获取安装在远程计算机上的物理内存大小。我如何获得那台计算机的空闲内存？

我试过了

```
(Get-WMIObject Win32_logicaldisk -computername computer).FreePhysicalMemory 
```

和其他一些变体，但没有效果。是否有一些可能的“过滤器”列表？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T17:52:50.873

每当您想查看对象的所有属性时，请将其通过管道传输到`Format-List *`.

```
Get-WmiObject Win32_LogicalDisk | format-list *
Get-WmiObject Win32_OperatingSystem | fl * 
```

或者，如果您正在寻找特定的属性，您可以使用通配符搜索

```
Get-WmiObject Win32_OperatingSystem | fl *free* 
```

正如阿奎那所说，你想要`Win32_OperatingSystem`阶级，`FreePhysicalMemory`财产。 `Win32_LogicalDisk`跟踪硬盘，而不是 RAM。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T18:00:53.123

您也可以尝试使用`Get-Counter`cmdlet：

```
(Get-Counter -Counter "\Memory\Available MBytes" -ComputerName computer).CounterSamples[0].CookedValue 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T15:52:55.440

你要我`Win32_OperatingSystem`不`Win32_logicaldisk`相信。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-01T16:58:41.953

因此，将其他答案放在一起：

```
get-ciminstance Win32_OperatingSystem | % FreePhysicalMemory 
```

远程：

```
invoke-command computer { get-ciminstance Win32_OperatingSystem | % FreePhysicalMemory } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-17T13:54:11.253

本地机器的可用内存（`-computername foo`用于远程机器）：

```
(Get-WMIObject Win32_OperatingSystem).FreePhysicalMemory  # in KB

19793740 
```

```
(Get-WMIObject Win32_OperatingSystem).FreePhysicalMemory / 1MB  # in GB

18.8592491149902 
```

除以 1MB 得到 GB 可能看起来很奇怪，但原始数字仅以 KB 给出。结果实际上与写`* 1KB / 1GB`（你也可以使用）没有什么不同。

# c# - Windows Phone 中的应用程序栏项目可以包含子项目吗？

> ID：12250784
> 
> 赞同：1
> 
> 时间：2012-09-03T15:41:16.877
> 
> 标签：c#, windows-phone

我是 Windows Phone 应用程序开发的初学者。我只是想知道我们是否可以将项目划分放在一个应用程序栏项下，例如，如果应用程序栏项的名称为SORT，它是否可以包含SORT BY DATE，SORT BY NAME等子项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:48:57.547

编号来自[Windows Phone 的应用程序栏概述](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431813%28v=vs.92%29.aspx#BKMK_Properties)

> 应用程序栏菜单不是分层的，菜单项列表不是任何图标按钮的子菜单。

# python - django 没有阅读我的 models.py

> ID：12250788
> 
> 赞同：1
> 
> 时间：2012-09-03T15:41:45.280
> 
> 标签：python, django, django-models

使用 Ubuntu 12.04 无头服务器
Python v2.7.3
Django v1.3.1 FINAL

Python 是预装的，我从 apt-get python-django 安装了 django

我会注意到我已经设置并配置了 2 台服务器以供开发使用。既是为了练习，也是因为我经常出差，并且有一个方便的虚拟机总是很好的。但是，这台特殊的机器给我带来了麻烦，我无法理解原因。

我以前的设置非常简单。安装 ubuntu，安装 python-django，将文件复制到服务器，检查权限，运行 python manage.py syncdb，然后运行 ​​python.manage.py runserver 0.0.0.0:8080，一切正常。由于某种原因，这在此服务器上不起作用。我完全迷失了，因为我没有改变任何东西，而且我相当确定我没有做任何不同的事情。

任何帮助表示赞赏，我提前致谢

```
 $python manage.py shell
   ...
   >>>import pwht.models
   >>>k = Device(serial="something", mac="something", ip="10.211.119.50", active = True)
   Traceback (most recent call last):
   File "<console>", line 1, in <module>
   NameError: name 'Device' is not defined 
```

我的路径在 manage.py 下的 sys.path

```
charles@Jobserver-Gibby:~/pwht/pwht$ python manage.py shell
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> import sys
>>> print sys.path
['/home/charles/pwht/pwht', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/u
sr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages']
>>> 
```

为了完整起见

```
charles@Jobserver-Gibby:~/pwht/pwht$ python manage.py shell
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from pwht.models import Device
>>> 
```

import django 也可以正常工作，尽管我没有在这里列出。

这是我忘记提及的硬币的另一面：

```
charles@Jobserver-Gibby:~/pwht/pwht$ python manage.py syncdb
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table auth_message
Creating table django_content_type
Creating table django_session
Creating table django_site

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): no
Installing custom SQL ...
Installing indexes ...
No fixtures found.
charles@Jobserver-Gibby:~/pwht/pwht$ 
```

我的模型中的表都没有创建。在 Mysql 中也是如此。

这是我在项目中的文件

管理.py

```
 #!/usr/bin/env python
   from django.core.management import execute_manager
   import imp
   try:
       imp.find_module('settings') # Assumed to be in the same directory.
   except ImportError:
       import sys
       sys.stderr.write("Error: Can't find the file 'settings.py' in the directory containing %r. It appears you've customized things.\nYou'll have to run django-admin.py, passing it your settings module.\n" % __file__)
       sys.exit(1)

   import settings

   if __name__ == "__main__":
       execute_manager(settings) 
```

设置.py

```
 # Django settings for pwht project.

   DEBUG = True
   TEMPLATE_DEBUG = DEBUG

   ADMINS = (
       # ('Your Name', 'your_email@example.com'),
   )

   MANAGERS = ADMINS

   DATABASES = {
       'default': {
           'ENGINE': 'django.db.backends.sqlite3',
           'NAME': '/home/charles/pwht/pwht/mydb.sql',                      
           'USER': '',                      
           'PASSWORD': '',                  
           'HOST': '',                      
           'PORT': '',                      
       }
   }

   TIME_ZONE = 'America/New_York'

   LANGUAGE_CODE = 'en-us'

   SITE_ID = 1

   USE_I18N = True

   USE_L10N = True

   MEDIA_ROOT = '/home/charles/pwht/pwht/media/'

   MEDIA_URL = '/media/'

   STATIC_ROOT = '/home/charles/pwht/pwht/static/'

   STATIC_URL = '/static/'

   ADMIN_MEDIA_PREFIX = '/static/admin/'

   STATICFILES_DIRS = (
       '/home/charles/pwht/pwht/statics',
   )

   STATICFILES_FINDERS = (
       'django.contrib.staticfiles.finders.FileSystemFinder',
       'django.contrib.staticfiles.finders.AppDirectoriesFinder',
   )

   SECRET_KEY = [purposely removed]

   TEMPLATE_LOADERS = (
       'django.template.loaders.filesystem.Loader',
       'django.template.loaders.app_directories.Loader',
   )

   MIDDLEWARE_CLASSES = (
       'django.middleware.common.CommonMiddleware',
       'django.contrib.sessions.middleware.SessionMiddleware',
       'django.middleware.csrf.CsrfViewMiddleware',
       'django.contrib.auth.middleware.AuthenticationMiddleware',
       'django.contrib.messages.middleware.MessageMiddleware',
   )

   ROOT_URLCONF = 'pwht.urls'

   TEMPLATE_DIRS = (
       '/home/charles/pwht/pwht/templates/',
   )

   INSTALLED_APPS = (
       'django.contrib.auth',
       'django.contrib.contenttypes',
       'django.contrib.sessions',
       'django.contrib.sites',
       'django.contrib.messages',
       'django.contrib.staticfiles',
   )

   LOGGING = {
       'version': 1,
       'disable_existing_loggers': False,
       'handlers': {
           'mail_admins': {
               'level': 'ERROR',
               'class': 'django.utils.log.AdminEmailHandler'
           }
       },
       'loggers': {
           'django.request': {
               'handlers': ['mail_admins'],
               'level': 'ERROR',
               'propagate': True,
           },
       }
   } 
```

模型.py

```
'''
Created on Aug 18, 2012

@author: Charles B. Gibby
'''
from django.db import models

class Device (models.Model):
    serial = models.CharField(max_length=30)
    mac = models.CharField(max_length=17)
    ip = models.IPAddressField()
    active = models.BooleanField()

    def __unicode__(self):
        return self.serial

class Console (models.Model):
    device = models.ForeignKey(Device)
    serial = models.CharField(max_length=30)
    address = models.CharField(max_length=2)
    active = models.BooleanField()

    def __unicode__(self):
        return self.serial

    class Meta:
        ordering = ['device', 'address']

class Current_zones (models.Model):
    console = models.ForeignKey(Console)
    zone = models.IntegerField()
    temp = models.IntegerField(null=True)
    when_temp = models.DateTimeField(blank=True, auto_now=False)
    output = models.IntegerField(null=True)
    when_output = models.DateTimeField(blank=True, auto_now=False)
    man_sp = models.IntegerField(null=True)
    when_man_sp = models.DateTimeField(blank=True, auto_now=False)
    trim = models.IntegerField(null=True)
    when_trim = models.DateTimeField(blank=True, auto_now=False)
    clamp = models.IntegerField(null=True)
    when_clamp = models.DateTimeField(blank=True, auto_now=False)
    auto_sp = models.IntegerField(null=True)
    when_auto_sp = models.DateTimeField(blank=True, auto_now=False)
    sp_type = models.IntegerField(null=True)
    when_sp_type = models.DateTimeField(blank=True, auto_now=False)

    def __unicode__(self):
        return u'%s-%s' % (self.console, self.zone)

    class Meta:
        ordering = ['console', 'zone']

class Message (models.Model):
    console = models.ForeignKey(Console)
    req_type = models.BooleanField() # 0 for Read and 1 for Write
    parameter = models.CharField(max_length=1)
    target = models.CharField(max_length=2)
    data = models.CharField(max_length=4)
    when_message = models.DateTimeField(blank=True, auto_now=False)
    tx = models.BooleanField()
    when_tx = models.DateTimeField(blank=True, auto_now=False)
    status = models.BooleanField()
    when_status = models.DateTimeField(blank=True, auto_now=False)

    def __unicode__(self):
        return u'%s-%s' % (self.console, self.parameter)

    class Meta:
        ordering = ['console', 'when_message']

class Recorded_zones (models.Model):
    console = models.ForeignKey(Console)
    zone = models.IntegerField()
    temp = models.IntegerField(null=True)
    when_temp = models.DateTimeField(blank=True, auto_now=False)
    output = models.IntegerField(null=True)
    when_output = models.DateTimeField(blank=True, auto_now=False)
    man_sp = models.IntegerField(null=True)
    when_man_sp = models.DateTimeField(blank=True, auto_now=False)
    trim = models.IntegerField(null=True)
    when_trim = models.DateTimeField(blank=True, auto_now=False)
    clamp = models.IntegerField(null=True)
    when_clamp = models.DateTimeField(blank=True, auto_now=False)
    auto_sp = models.IntegerField(null=True)
    when_auto_sp = models.DateTimeField(blank=True, auto_now=False)
    sp_type = models.IntegerField(null=True)
    when_sp_type = models.DateTimeField(blank=True, auto_now=False)

    def __unicode__(self):
        return u'%s-%s' % (self.console, self.zone)

    class Meta:
        ordering = ['console', 'zone', 'when_temp']

class Profiler (models.Model):
    console = models.ForeignKey(Console)
    climb = models.IntegerField()
    soak = models.IntegerField()
    hold = models.IntegerField()
    down = models.IntegerField()
    end = models.IntegerField()
    duration = models.IntegerField()
    when_duration = models.DateTimeField(blank=True, auto_now=False)

    def __unicode__(self):
        return self.console

    class Meta:
        ordering = ['console'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T15:44:01.593

第一个片段中的第 3 行；代替

```
import pwht.models 
```

你试过了吗：

```
from pwht.models import Device 
```

**UPDATE**: the `pwht` app is *NOT* included within your `settings.py` [`INSTALLED_APPS`](https://docs.djangoproject.com/en/dev/ref/settings/#installed-apps). Therefore add `pwht` within your `INSTALLED_APPS`.

# javascript - Bootstrap 的 javascript 会干扰按钮下拉菜单吗？

> ID：12250800
> 
> 赞同：1
> 
> 时间：2012-09-03T15:42:31.723
> 
> 标签：javascript, twitter-bootstrap

我正在使用 Twitter Bootstrap 的“拆分按钮”下拉菜单，并包含了显然需要的引导 javascript，称为 bootstrap-button.js，尽管我一直在尝试，但我无法让该死的东西下拉。然后我开始删除可能会干扰的 JS 文件，你猜怎么着？罪魁祸首是 bootstrap-button.js 文件！这有什么意义？下拉框的唯一方法是不包含下拉 JS 文件？

有没有其他人看到这个问题？关于做什么或如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:06:42.703

这是一个可能发生的常见错误，因为大多数人下载的**bootstrap.min.js**已经包含所有插件，并且由于 JavaScript 插件的文档明确要求包含单个文件，因此人们会在不知不觉中加载他们想要的插件两次。

如果将许多插件加载到页面中两次，它们将表现出类似于您所描述的行为。这样做的原因是插件的事件侦听器以允许同时附加两个相同的事件侦听器的方式附加到页面。因此，在双重加载时往往会发生的情况是，当单击组件时，将依次调用 a`show()`和调用 a`hide()`方法（或`toggle()`x 2），从而抵消预期的结果。

我认为从 2.1 的文档中删除单个 JavaScript 插件的直接下载的部分原因是为了减少导致此错误的途径。不幸的是，它似乎并没有完全消除它。

# java - 使用 ZXing 检测（多个）二维码

> ID：12250802
> 
> 赞同：2
> 
> 时间：2012-09-03T15:42:42.913
> 
> 标签：java, qr-code, zxing

我正在编写一个小型 Java 程序，它将检测给定图像中的 QR 码，然后对其进行解码并打印出结果（假设 QR 码包含一个字符串）。理想情况下，我希望能够扩展它以检测和解码单个图像中的多个 QR 码。

一个快速的谷歌将我带到了[zxing](http://code.google.com/p/zxing/)库，但到目前为止我发现的所有文档和教程都与 Android 相关。是否有任何文档/教程可以帮助我，或者我需要通过[项目 api](http://zxing.org/w/docs/javadoc/index.html)跋涉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:48:11.790

不，其中大部分是纯 Java，带有几个特定于平台的客户端。使用 中的代码`core/`，它不是 Android 特定的。你想要[`QRCodeMultiReader`](http://zxing.org/w/docs/javadoc/com/google/zxing/multi/qrcode/QRCodeMultiReader.html)。它真的和其他的没有什么不同`Reader`，没有什么要知道的。

# c# - 如何在我的实体模型中管理关联？

> ID：12250815
> 
> 赞同：0
> 
> 时间：2012-09-03T15:43:30.943
> 
> 标签：c#, asp.net, windows-8, windows-runtime, asp.net-web-api

我想创建一个为我的 windows8 metro 应用程序提供数据的 webapi

我有一个模型内容，它可以有类别，所以 beetwen 内容和类别是 m:n 关系。我使用图表 (.edmx) 创建并更新了数据库。我的模型有 ICollection 字段。在我的 xml 中（我通过浏览器在 xml 中阅读答案）我得到了空标签，我已经用数据填充了 db，所以我应该在那里有一些类别。我应该怎么做才能让他们在那里，或者我应该为你们提供什么，以便你们告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:30:20.983

方法就是`Include()`答案

我只是将（“MyInclude”）包含到主要对象中，效果很好

# jquery - requireJS 和命名空间

> ID：12250817
> 
> 赞同：0
> 
> 时间：2012-09-03T15:43:40.750
> 
> 标签：jquery, requirejs

我正在尝试使用命名空间`requireJS`并面临一些问题。到目前为止，我有：

```
require.config({
  paths: {
      jquery: [
          'http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min'
        ],
      jqueryUI: 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min',
      main: 'http://mysite.com/main'
  }
}); 
```

然后我正在尝试加载

```
require(['jquery', 'main'], function($) {
    myApp.core.init();
}); 
```

where`main.js`包含我的命名空间变量，例如`myApp`- 但是它告诉 jQuery`myApp`未定义

```
(function(myApp, $, undefined) {

}(window.myApp = window.myApp || {}, jQuery)); 
```

行不通？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:18:37.933

您可能应该[了解如何以 AMD 格式使用模块](http://requirejs.org/docs/api.html#define)。为此，您需要将 main.js 重构为模块定义。例如

```
define(['jquery'], function($) {

    // Setup my module

    return {
        // return an object, or function etc
    }

});

// Nicer way - http://requirejs.org/docs/whyamd.html#sugar
define(function(require){

    var $ = require('jquery');

    return {

    }

}); 
```

如果由于某种原因您无法修改 main.js 代码[，您也可以使用 RequireJS 中的`shim`选项](http://requirejs.org/docs/api.html#config-shim)。一个例子可能是：

```
require.config({
    shim: {
        'main': {
            deps: ['jquery'],
            exports: 'myApp'
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T18:43:15.700

这是一个模块模板（总是使用这样的东西）

```
define(function(require){
  var $ = require('jquery');

  var myApp = function(){
  };

  // etc...

  return myApp;
} 
```

# flash - 将动画 Flash 对象导出到 Marmalade SDK

> ID：12250818
> 
> 赞同：0
> 
> 时间：2012-09-03T15:43:46.030
> 
> 标签：flash, animation, vector-graphics, marmalade, flash-cs6

如何在 Marmalade SDK 中导出（使用）我的动画矢量对象（使用 Flash Professional 制作）？我不想编写动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:25:22.713

我从未使用过 Marmalade，但在他们的首页上，我看到它支持 HTML5、CSS3、JS 下的应用程序开发。

在这种情况下，应该可以使用[Adob​​e 的 CreateJS toolkit for Flash CS6](http://www.adobe.com/uk/products/flash/flash-to-html5.html) 入门资源：

1.  [CreateJS 开发网文章](http://www.adobe.com/devnet/createjs/articles/getting-started.html)
2.  [开始使用 Flash Professional Toolkit for CreateJS](http://tv.adobe.com/show/getting-started-with-flash-professional-toolkit-for-createjs/)视频

# google-apps-script - 谷歌应用脚 本中的文本框验证

> ID：12250831
> 
> 赞同：1
> 
> 时间：2012-09-03T15:44:26.040
> 
> 标签：google-apps-script

你好，我是谷歌应用程序脚本的新手，我想比较一下我在文本框中输入的值与 excel 表中的值。我的 excel 表的值是正确显示的，并且文本框是正确创建的（两个是因为 excel 表中有两个条目）。我要验证这一点：如果我在文本框中输入的内容大于 excel 表的值，则错误，否则没关系。我想使用提交按钮。我看到了一个带有验证电子邮件功能的示例，但我无法将其转换为我的示例。
当我调试函数validateStock（e）时，我得到参数“未定义。请帮助我。

```
function doGet() {
 var user = Session.getUser().getUserLoginId();
 var excel = SpreadsheetApp.openById("0Alg06LrHGRkddDJyMUh5bGRsZnhKQkpqYjBCN0d0X2c");
 var raw = excel.getSheets()[0];

 var app = UiApp.createApplication();
 var stockLabel = app.createLabel('Introduza a Quantidade de Stock pretendida');
 var inputBox = app.createTextBox().setId('stockBox').setName('myStock');
 var submitButton = app.createButton('Validate');
 var infoLabel = app.createLabel('Stock é Valido').setVisible(false).setId('info');
 var panel = app.createVerticalPanel();

 var list = raw.getRange("A1:A2").getValues();

 for( var i = 0; i < list.length; i++)  
 {
 //if (list[i] == user) 

 var cliente = raw.getSheetValues(i+1,2,1,1);
 app.add(app.createLabel("Stock: "+ list[i]));
 app.add(app.createTextBox());

 //raw.getSheetValues(startRow, startColumn, numRows, numColumns)

 }
 panel.add(stockLabel)
.add(inputBox)
.add(infoLabel)
.add(submitButton);

//Add the panel to the application
//Create Click handlet and add to the submit button
var handler = app.createServerClickHandler('validateStock');
handler.addCallbackElement(panel);
submitButton.addClickHandler(handler);

panel.add(stockLabel).add(inputBox).add(submitButton);
app.add(panel);
return app;
}

//Function to validate stock and display the response
function validateStock(e){
var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
var excel = SpreadsheetApp.openById("0Alg06LrHGRkddDJyMUh5bGRsZnhKQkpqYjBCN0d0X2c");
var raw = excel.getSheets()[0];
var app = UiApp.getActiveApplication();
var list = raw.getRange("A1:A2").getValues();
stock = e.parameter.myStock;
Logger.log(stock);

if(emailPattern.test(stock) == false)

app.getElementById('info').setText("Invalid Email Address").setStyleAttribute("color",   "#F00").setVisible(true);
  else
    app.getElementById('info').setText("Valid Email Address").setStyleAttribute('color', '#339900').setVisible(true);
return app;
}
  else
    app.getElementById('info').setText("Valid Email Address").setStyleAttribute('color', '#339900').setVisible(true);
return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:48:47.220

使用记录器进行调试。您不能使用调试器调试 validateStock，因为它是一个回调。（上次我检查时，调试器不适用于回调函数）

要使用调试器，您可以添加一个类似这样的函数：

```
function debugValidateStock(e){
 var e.parameter.myStock = "test";
 validateStock(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:11:48.673

1 - 你必须初始化变量 STOCK ：

`stock = e.parameter.myStock;`**-->** `var stock = e.parameter.myStock`

**2 - 要在不考虑参数 e.parameter.myStock 和回调函数的情况下运行程序，您必须在函数validateStock**的开头定义 var myStock

 **`var stock = "*WHAT_YOU_EXPECT*" ;` 代替`stock = e.parameter.myStock;`**

# iphone - 从一个帐户构建 iphone 应用商店；使用另一个发布

> ID：12250841
> 
> 赞同：1
> 
> 时间：2012-09-03T15:45:14.280
> 
> 标签：iphone, ios, app-store

我为另一家公司构建了一个 iphone 应用程序。现在他们希望使用他们的帐户发布应用程序。有没有可能，我可以使用我的帐户证书构建和共享应用程序，然后他们使用他们的帐户发布。

如果没有，我如何与他们分享项目，或任何其他可能性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:53:36.267

我已经这样做了几次，对于我的一生，我想不出我是怎么做到的。我知道大多数人只是在他们的 Mac 上创建一个新用户帐户，然后在该帐户上使用新公司的开发人员资料。

我没有那样做。我相信我可能只是在需要发布时交换了开发者帐户。从钥匙串中删除证书并添加另一家公司的证书。您不必做这么多，只需几次您必须发布到应用商店。您可以备份您当前的开发人员资料并在完成后重新加载。如果您也备份其他公司的开发资料，那么切换时不会太麻烦。

如果他们不想让您访问他们的开发者资料，那么您必须向他们发送应用程序的存档副本。您可以转到`Product`然后`Archive`（就像您正在创建应用商店版本一样）。当您转到“共享”时，您可以创建一个 XCode 存档，然后您可以将其发送给他们，他们可以将其导入 XCode 并使用他们自己的证书等进行签名。如果另一家公司知道他们在做什么，这显然是最简单的选择。否则这可能是最困难的选择！

据我所知，您无法构建它以供提交，然后使用另一个帐户的开发者资料对其进行签名。我也不认为有任何方法可以在 Mac 上的一个用户帐户下运行多个开发人员配置文件，尽管这是您可以查看的内容，看看是否有任何有关解决此问题的方法的信息。

希望这可以帮助。

# c++ - C++ istream，读取查询，初始参数

> ID：12250842
> 
> 赞同：-2
> 
> 时间：2012-09-03T15:45:22.743
> 
> 标签：c++, object, istream

read 函数的第一个参数是指向一个数组的指针，用于在文件中存储 n 个字节（第二个参数提到的）......

查询是，

如果我创建了 2 个 x 类的对象..

然后，

```
x stack[2]; 
```

假设我已经填充了 2 个对象的内容，打开了一个文件“xyz”（使用 fstream，我创建了对象文件并使用了命令`file.open("xyz",ios::in|ios::out)`并使用 write 用 2 个对象的内容填充了文件。

现在如果我使用这个命令

```
file.read((char*) &stack[1],sizeof(stack[0])) 
```

会有, `stack[1]`_`stack[0]`

即读取函数会将其第一个参数地址作为`&stack[1]`还是会考虑`&stack[0]`？

更新：用于反转堆栈内容的代码

// //反转对象的内容

```
 #include "stdafx.h"
    #include<iostream>
    #include<fstream>
    #include<iomanip>

    using namespace std;

    class Inventory
    {
     char name[10];
     int code;
     int cost;

     public:

     void readdata();
     void writedata();
    };

    void Inventory::readdata(void)
    {
     cin>>name;
     cin>>code;
     cin>>cost;
    }

    void Inventory::writedata(void)
    {
     cout<<setiosflags(ios::left)
     <<setw(10)<<name
     <<resetiosflags(ios::right)
     <<setw(10)<<code
     <<setprecision(2)
     <<setw(10)<<cost
     <<endl;
    }

    int main()
    {
     Inventory item[3];

     fstream file;

     file.open("Stock",ios::in|ios::out);

     cout<<"Enter details for three items\n";

     for(int i=0;i<3;i++)
     {
       item[i].readdata();
       file.write((char*) &item[i],sizeof(item[i]));
     }
     file.seekg(0);

     cout<<"\nOutput\n\n";

     for(int i=0;i<3;i++)
     {
         file.read((char*) &item[2-i],sizeof(item[i]));
     }

     for(int i=0;i<3;i++)item[i].writedata();
     file.close();
     return 0;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:57:04.790

假设您已经倒带或重新打开了文件，并且您已正确写出数据，并且`x`可以轻松复制（这意味着 的析构函数`x`没有副作用），那么是的：您已经编写了一种复杂的复制方式`stack[0]`进入`stack[1]`.

* * *

**更新：**无需完成所有代码，这应该可以工作*：*

```
#include <type_traits>
#include <fstream>

int main()
{
    char const * filename = "myfile.bin";

    Foo stack[2] = { /* ... initialize ... */ };

    static_assert(std::is_trivially_copyable<Foo>::value,
                  "Error: Foo cannot be serialized naively.");

    {
        std::ofstream ofile(filename, std::ios::binary);
        ofile.write(reinterpret_cast<char const *>(stack), sizeof stack);
    }

    {
        std::ifstream ifile(filename, std::ios::binary);
        ifile.read(reinterpret_cast<char *>(stack + 1), sizeof(stack[0]));
    }

    assert(stack[0] == stack[1]);  // if operator==() is implemented
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:55:22.887

您的代码不会`stack[0]`在任何地方的评估上下文中使用；`sizeof`是一个未评估的上下文。所以没有理由`read`使用`stack[0]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:15:47.770

尝试这个：

```
file.open("Stock",ios::in|ios::trunc|ios::out); 
```

# objective-c - 在 Objective-C 中设置键盘键只有一个目的

> ID：12250845
> 
> 赞同：0
> 
> 时间：2012-09-03T15:45:33.263
> 
> 标签：objective-c, cocoa, keyboard, keyboard-events, nsevent

我需要一点帮助来找出一种方法，让键盘按键只有一个用途。我解释说：现在，键盘上的 1-8 键有一个与它们相关的动作`NSEvent`和`FirstResponder`。他们调用一个方法。问题是我需要能够通过在我的应用程序中的任何位置按 1-8 来调用此方法，因此当焦点设置在 TextField 上时，我可以使用这些键。我不希望 1-8 有他们通常的目的。数字键盘将是我可以使用数字的地方。我的问题：我想知道是否有办法做我想做的事？

提前致谢！

# jquery - 针对 iframe 的表单提交上的进度指示器以显示 IE 以外的浏览器中的加载进度，即不使用 document.readyState

> ID：12250847
> 
> 赞同：0
> 
> 时间：2012-09-03T15:45:41.767
> 
> 标签：jquery, html, forms, iframe, web

我的 html 页面上有一个表单控件，目标设置为页面上另一个隐藏 iframe 的名称。

当我通过 post 调用执行 form.submit 时，我希望显示一个忙碌/进度指示器，直到我收到 iframe 中的 post 请求的响应。

我尝试在 IE 中使用 document.getElementById("iframename").readyState ，它就像一种享受，但我如何在 Chrome/Firefox/Safari 等中处理这种情况......？

我的理解是，除了 IE，readyState 在包括 iframe 在内的 html 元素的其他浏览器中不可用。

任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:50:16.647

既然你标记`jQuery`了我认为它可以使用。

`.load()`使用侦听器，我得到了一些非常好的结果，如下所示：

```
$('#myframe').load(function() {
    // loaded iframe
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:35:56.700

我找到了答案

[http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)

而不是使用依赖于就绪状态的浏览器，
1）我们随机生成一个密钥以与表单一起提交。2) 在 javascript 中，显示进度指示器，运行一个计时器来检查 cookie 和密钥是否匹配，如果匹配，则在提交之前清除计时器并隐藏进度。3) 我们读取服务器上的密钥，将密钥附加到 cookie 响应中。4) 在响应时，如果 cookie 匹配，进度指示器将隐藏。

巧妙！

# ios5 - 使用原型单元执行 segue

> ID：12250848
> 
> 赞同：3
> 
> 时间：2012-09-03T15:45:45.577
> 
> 标签：ios5, uitableview, segue, xcode4.4

首先原谅我的英语因为我是法国人:-)

我是一名 iOS 开发初学者，我尝试在 XCode 4.4 中使用 Master Detail 视图。

**我想要的是：**

我的主视图包含带有原型单元格的 UITableView。当我单击我的单元格时，我想查看详细信息视图。

**这是我的代码：**

主视图控制器.m

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    NSDictionary* instrument = [Instruments objectAtIndex:indexPath.row];
    NSLog(@"instrument: %@",instrument);

    NSString* status = [instrument objectForKey:@"status"];
    NSLog(@"status: %@",status);

    NSString* imageName = [NSString stringWithFormat:@"%@48.png", [status lowercaseString]];

    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];
    imgView.image = [UIImage imageNamed:imageName];
    cell.imageView.image = imgView.image;

    // Set up the cell...
    NSString *cellValue = [instrument objectForKey:@"id"];
    cell.textLabel.text = cellValue;

    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"masterToDetails"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

        NSDictionary* instrumentDetails = [Instruments objectAtIndex:indexPath.row];

        [[segue destinationViewController] setDetailItem:instrumentDetails];
    }
} 
```

当然，我的故事板中有一个segue，将我的原型单元格链接到详细视图，其中“masterToDetails”作为标识符。

当我单击主表中的原型单元格时，不会调用 prepareForSegue。**为什么？**

然后，当我尝试使用以下命令强制进行 segue 调用时：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"masterToDetails" sender:[self.tableView cellForRowAtIndexPath:indexPath]];
} 
```

我有以下错误：NSInvalidArgumentException，原因：Receiver has no segue with identifier masterToDetails

但它存在于我的故事板中！

也许我使用 MasterDetail 的方式是错误的，或者这可能是我的一个愚蠢的错误......

如果您想从我的申请中获得其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T20:40:31.163

不要将单元格中的 segue 链接到下一个 viewController，而是从 viewController（View 下方的小橙色图标）拖动到下一个 viewController。然后确保给 segue 一个标识符，然后使用：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"masterToDetails" sender:indexPath];
} 
```

（复制并粘贴您的 segue 标识符以减轻任何拼写错误）。

# php - 如何从 csv 字符串创建一个数组？

> ID：12250850
> 
> 赞同：2
> 
> 时间：2012-09-03T15:45:47.153
> 
> 标签：php, arrays, select, csv

我试图从 csv 变量创建和数组：

```
$csv="one,two,tree,four";

$bits = split(',',$csv);
$elements = array();
for ($i=0;$i<count($bits);$i++) 
{
    $item .= '"'.$bits[$i].'"=>"'.$bits[$i].'",';
}

$item = substr($item, 0, -1);
$ara=array($item);

$USE['list'] = $ara; 
```

我需要获得这样的东西，仅此而已：

```
$USE['list'] = array("one"=>"one","two"=>"two","tree"=>"tree","four"=>"four"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:49:45.060

您的代码中已经有了一个基本的解决方案。您需要的唯一行是：

```
$bits = split(',', $csv); 
```

使用您的示例输入，这将为您提供以下数组：

```
$bits = array("one", "two", "three", "four"); 
```

如果您真的需要`$USE['list']`键值对样式（我不确定这有什么帮助，因为键和值将是相同的），您可以执行以下操作：

```
$USE['list'] = array();
foreach($bits as $bit) {
    $USE['list'][$bit] = $bit;
} 
```

但是，正如其他人所提到的，这绝对不是解析 CSV 数据的最安全方法（它不会正确处理包含逗号的值、已引用的值等）。`str_getcsv()`如果您因为没有 PHP 5.3.0 或更高版本而无法使用，请查看[parsecsv-for-php](http://code.google.com/p/parsecsv-for-php/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:55:21.983

这里有很多幼稚的实现，除了最基本的情况外，不应该在任何情况下使用。

在 PHP 中解析 CSV 的正确方法是使用[`str_getcsv()`](http://php.net/manual/en/function.str-getcsv.php).

或者，至少，任何自卷解决方案都应考虑引用值（此时您还需要考虑转义引号）。否则，您将获得不正确的转换并可能损坏 CSV 数据（为下一个必须使用损坏的 CSV 数据的人制造噩梦）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:52:20.217

@user113215 的回答很好。但是，如果你真的需要一个关联数组：

```
$csv = 'one,two,tree,four';
$USE['list'] = array();

$bits = explode(',', $csv);

foreach($bits as $bit) 
{
    $USE['list'][$bit] = $bit;
} 
```

请注意**拆分**功能已弃用，请改用**explode**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T15:51:45.677

尽量不要使用拆分，因为它已经折旧。

```
<?php

$csv="one,two,tree,four";

$bits = explode(',',$csv);
foreach($bits as $value) {
    $array[$value] = $value;
}

   $USE['list'] = $array;

var_dump($USE['list']);

?> 
```

# php - 获取服务器 PHP 上的当前目录

> ID：12250852
> 
> 赞同：0
> 
> 时间：2012-09-03T15:45:48.363
> 
> 标签：php

我有以下用于获取服务器信息的函数：

```
function srv_name(){
if ($_SERVER['SERVER_PORT'] != 80) {
    $port = ':'.$_SERVER['SERVER_PORT'];
} else {
    $port = '';
}
$name = $_SERVER['SERVER_NAME'];
if (isset($_SERVER['HTTPS'])) {
    $http = 'https://';
} else {
    $http = 'http://';
}
return $http.$name.$port;
} 
```

我使用它如下：

```
<link type="text/css" rel="stylesheet" href="<?php echo srv_name(); ?>/css/styles.css"> 
```

如果 php 文件位于 Web 服务器的根目录中，则此方法有效，例如：mydomain.com/index.php 但如果文件位于子目录中，则无效，例如：mydomain.com/mydir/index.php

我需要在函数中添加什么来获取子目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:49:35.523

您可以添加`dirname($_SERVER['SCRIPT_NAME'])`：

```
// ...
return $http . $name . $port . dirname($_SERVER['SCRIPT_NAME']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:50:22.463

如果模板文件和css目录在同一个目录即

```
mydomain.com/templates/mytemplate/index.php --> template
mydomain.com/templates/mytemplate/css/styles.css --> stylesheet in css direcory 
```

然后使用

```
<link type="text/css" rel="stylesheet" href="css/styles.css"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:39:19.517

我正在使用类似于下面的代码来检索文件的路径，稍后我们将其用作 php 中电子邮件消息类的输出。

```
 //To this folder I'm uploading in another module

$folder='uploads/';

        //get the server address.. it's a vpn accessible ip in our case 
        $dev_baseurl= 'http://192.168.xxx.xyz'; 
```

//在这种情况下对我有用的功能*（如果有更好的方法，请随时添加评论）

```
 function check_address($current_dir,$https_check)
                    {
//$https_check, user defined var for
$conflen=strlen($current_dir);
//im using this and don't ask me why :P
$conflen1=0;

$B=substr(__FILE__,0,strrpos(__FILE__,'/'));
$A=substr($_SERVER['DOCUMENT_ROOT'], strrpos($_SERVER['DOCUMENT_ROOT'], $_SERVER['PHP_SELF']));
$C=substr($B,strlen($A));

$posconf=strlen($C)-$conflen1-1;
$D=substr($C,1,$posconf);

if (isset($_SERVER['HTTPS'])) $https_check=1;

switch($https_check)
{
case 0:
            $host='http://'.$_SERVER['SERVER_NAME'].'/' .$D.'';
break;

case 1:
            $host='https://'.$_SERVER['SERVER_NAME'].'/'.$D.'';
break;
}
//output the address
return $host;

 } 
```

尝试获取远程托管文件的路径

```
$dev2_url=check_address('/',1);

$dev2_url="{$dev2_url}";

/* That should be the output we are looking for 
   $dev_url="{$dev_baseurl}".str_replace($_SERVER['DOCUMENT_ROOT'], '', dirname($_SERVER['SCRIPT_FILENAME']))."/{$folder}";
*/ 
```

...我的 php 中的一些其他逻辑

```
 //$body is a message string that we are sending with a class call as a parameter later
    foreach( $_POST['attachments'] as $a => $avalue)
{
    if (is_file($avalue))
     {  

      $mime_type[$a] = substr(strrchr($avalue, '.'), 1);

    $handle=fopen($avalue, 'rb');
                                      $bs_name=basename($avalue);
                                      $filesize=filesize($avalue);
                                      $f_contents=fread($handle, $filesize);
                                      fclose($handle); 
```

//get_mime_type2 检查文件中的文件类型，与本例无关，但它确实用于输出 if(isset($mime_type[$a]))$mime_type[$a] = get_mime_type2($mime_type[$a ]);

```
 $body.= '<li><ul><li>Filename:&nbsp;' . $bs_name .$eol;
                        $body.= '<li>FileType:&nbsp;'.$mime_type[$a].$eol;

                                            //In this line I use the calculated path to pass it as an output to an HTML based version of an email
                                            $body.= "<li>Path:&nbsp;<a href=\"{$dev2_url}/{$avalue}\" title=\"Open w/ browser {FileName: $bs_name} | Size: {$filesize}\" target=\"_parent\">"  .$avalue . "</a><li>Approx.File-Size:{$filesize} bytes</ul>";

                                    }
    }  
$body.='</ul>'; 
```

所以请注意这一行：...

```
$body.= "<li>Path:&nbsp;<a href=\"{$dev2_url}/{$avalue}\" title=\"Open w/ browser {FileName: $bs_name} | Size: {$filesize}\" target=\"_parent\">"  .$avalue . "</a><li>Approx.File-Size:{$filesize} bytes</ul>"; 
```

.. $dev2_url 用于查找文件的路径，我们附加文件名，这应该会处理它。我知道应该有一种更优雅的方式来完成操作所需的内容，但是如果没有真实的案例场景来说明它可以用于什么，我只能分享我自己的实现。

这给了我一个方便的输出使用.. IE：

```
//http://192.168.xx.xyZ is actually a real IP address

http://192.168.xx.xyZ/ProjectX/protos/jquery-menu2/includes/uploads/t_1.txt 
```

用于附加到电子邮件的每个文件的输出

# java - java.util.logging.Logger 不尊重 java.util.logging.Level

> ID：12250858
> 
> 赞同：4
> 
> 时间：2012-09-03T15:46:28.100
> 
> 标签：java, logging

我正在使用 java.util.logging.Logger 并且我想将日志级别限制为 SEVERE，但他不尊重这一点并记录所有内容。怎么了？

```
private static final Logger log = Logger.getLogger(MyClass.class.getName());
private Handler fileHandler = null;

public static void myMethod(){
   fileHandler = new FileHandler("file", 1000000, 1, true);
   log.setLevel(Level.SEVERE);
   fileHandler.setLevel(Level.SEVERE);

   SimpleFormatter formatter = new SimpleFormatter();
   fileHandler.setFormatter(formatter);
   log.addHandler(fileHandler);

   log.log(Level.INFO, "Test1");
   log.log(Level.SEVERE, "Test2");
} 
```

正在记录消息 1（“Teste1”）和消息 2（“Test2”）。如何将日志级别限制为 SEVERE，仅出现第二条消息（“Test2）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:54:37.263

我相信您要么没有在文件中正确配置日志级别，要么在运行应用程序时`logging.properties`没有设置系统属性。`java.util.logging.config.file`

`-Djava.util.logging.config.file=PATH TO YOUR logging.properties FILE`运行应用程序时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:16:52.627

大卫，它在我没有 log4j.properties 的机器上也能正常工作。不确定，但问题可能出在您正在使用的 jar 中。它阻止您将日志级别设置为“严重”。请使用以下依赖项。它肯定会奏效。

```
<groupId>log4j</groupId>
     <artifactId>log4j</artifactId>
 <version>1.2.12</version> 
```

# login - 如何检查 Skype 登录是否存在？

> ID：12250859
> 
> 赞同：0
> 
> 时间：2012-09-03T15:46:30.300
> 
> 标签：login, skype

好。我想以某种方式检查是否存在任何 Skype 登录（而不是尝试注册），但根本不知道该怎么做。

有人知道答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:05:31.963

您可以使用[SkypeKit](http://developer.skype.com)及其适用于 C++/Java/C#/Python 的 API。例如， Java 有[ContactSearch](http://developer.skype.com/skypekit/reference/java/html/com/skype/api/ContactSearch.html)类。

# ios - 如何增加 UIButton hittest 区域？

> ID：12250861
> 
> 赞同：-1
> 
> 时间：2012-09-03T15:46:43.963
> 
> 标签：ios, uibutton, hittest

我需要一些帮助来进行快速原型 iPad 应用演示。

我有一个带有一些图形元素的大背景图像。然后我在这个视图上创建了一个自定义 UIButton。不幸的是，我需要增加该按钮的点击测试区域。与，因此用户应该认为触摸该图形背景元素也具有与按下直接放置在该细节旁边的按钮相同的功能。

通过覆盖 hittest:withEvent 方法，按钮将被突出显示，但不幸的是，它的目标/选择器不会为 UIControlEventTouchUpInside 调用。

知道如何使它工作吗？谢谢你的帮助

**更新：** 在 UIControl 类参考中，我找到了在“return self”之前直接包含的“sendActionsForControlEvents”方法：

```
 [self sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

现在触摸将被识别，但“Hittest”日志将被调用两次。我只需要调用它两次。如果有办法做到这一点，我会没事的:)

**更新 2：**

这是一个示例图表，希望对您有所帮助。

```
@implementation HotSpotButton
@synthesize data = _data;  
- (id)initWithDictionary:(HotSpotDataObject*)hotspotData
{        
    self.data = hotspotData;

    UIImage* img = loadImageWithoutCaching(@"infospot.png");     
    CGRect frame = CGRectMake(hotspotData.posX, hotspotData.posY, img.size.width, img.size.height);

    self = [super initWithFrame:frame];
    if (self) {

        [self setBackgroundColor:[UIColor darkGrayColor]];  //clearColor
        [self setAlpha:1];
        [self setBackgroundImage:img forState:UIControlStateNormal];
        [self setAdjustsImageWhenHighlighted:YES];
        [self setShowsTouchWhenHighlighted:YES];    

        // Animate the hotspot itself ==================================
         CABasicAnimation *scale =[CABasicAnimation animationWithKeyPath:@"transform.scale"]; 
        // some pusling 
        [self.layer addAnimation:scale forKey:@"animateScale"];  
    }
    return self;
}

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {

    int errorMargin = 30;
    CGRect largerFrame = CGRectMake(0 - errorMargin, 0 - errorMargin, self.frame.size.width + errorMargin + 1024, self.frame.size.height + errorMargin);

    if ((CGRectContainsPoint(largerFrame, point)) == 1){
        NSLog(@"HITTEST");

        [self sendActionsForControlEvents:UIControlEventTouchUpInside];        
        return self;
    }
    else{
        NSLog(@"Outside");
        return nil;
    }

}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T18:17:41.707

容易多了！！！

您可以使框架`UIButton`比实际的按钮图像大很多，然后将按钮的图像对齐到您想要的位置：

```
[someButton setFrame:CGRectMake(0, -9, self.view.frame.size.width+9, self.view.frame.size.height)];
//set image instead of this comment
someButton.contentVerticalAlignment = UIControlContentVerticalAlignmentTop;
someButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight; 
```

...例如。

如果您希望您的图像在某个特定位置，您可以将 UIControl 子类化，并将您想要的图像添加到您想要的位置，作为子视图。简单的。

现在，我认为，您不再需要 hitTest 方法了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T18:04:25.920

如果我理解正确的话。我相信您想增加/减少 touchUpInside 区域。它从内部变为外部的点？

我用 UISlider 的拇指区域做到了这一点。在这里查看我的问题和答案[检索并更改 touchUpInside 更改为 touchUpOutside 的点](https://stackoverflow.com/questions/10899552/retrieve-and-change-the-point-at-which-touchupinside-changes-to-touchupoutside) 它是通过覆盖 UIButton 的触摸方法来实现的，因此您必须将 UIButton 子类化。

如果您在 touchesEnded 方法中绘制坐标，您会看到它在按钮周围创建了一个更大的框，因此您只需更改坐标以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T18:14:23.400

我相信您的代码被调用了两次，因为我相信此代码中的“自我”指的是视图？

```
[self sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

你应该使用：

```
[self.myButton sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

# qt - Qt - Q_OBJECT 和宏

> ID：12250863
> 
> 赞同：2
> 
> 时间：2012-09-03T15:46:47.537
> 
> 标签：qt, macros, qobject

在`Qt`，我们知道那`Q_OBJECT`是一个**宏**。*在这种情况下，宏*是什么意思？特别是我发现*宏*这个词可能有几个不同的定义。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T15:52:28.677

*宏*只是意味着它`Q_OBJECT`实际上是一个 C++ 宏。它在中定义，`src/corelib/kernel/qobjectdefs.h`定义为

```
#define Q_OBJECT \
public: \
    Q_OBJECT_CHECK \
    static const QMetaObject staticMetaObject; \
    Q_OBJECT_GETSTATICMETAOBJECT \
    virtual const QMetaObject *metaObject() const; \
    virtual void *qt_metacast(const char *); \
    QT_TR_FUNCTIONS \
    virtual int qt_metacall(QMetaObject::Call, int, void **); \
private: 
```

`Q_OBJECT_CHECK`是另一个用于检查`Q_OBJECT`宏是否已在类中使用的宏。其他表达式定义了信号/槽机制以及转换的元对象和实用方法。

# ios - 在 IOS 中实施免责声明屏幕的策略

> ID：12250864
> 
> 赞同：1
> 
> 时间：2012-09-03T15:46:48.837
> 
> 标签：ios

在 IOS 中，您不允许以编程方式退出应用程序（我个人认为这很可笑）。

在我的应用程序中，我打算显示一个带有一些法律文本和同意和不同意按钮的免责声明屏幕。当用户同意时，应用程序的主菜单就会出现。当他们不同意时，我希望该应用程序关闭。我打算仅在首次使用该应用程序并同意免责声明时显示一次。

但是，您不能以编程方式关闭应用程序，因为 Apple 不喜欢它。所以

1) 这不是开发人员需要关闭功能的好理由吗？

和

2）我有什么可用且优雅的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:03:00.540

在[Human Interface Guidelines](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)中，Apple 建议不要以编程方式退出并提供两种选择：

> **不要以编程方式退出**
> 
> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。
> 
> **显示一个有吸引力的屏幕，描述问题并提出更正建议。**屏幕提供反馈，让用户确信您的应用程序没有问题。它使用户处于控制之中，让他们决定是否要采取纠正措施并继续使用您的应用程序，或者按下主页按钮并打开另一个应用程序
> 
> **如果您的应用程序的某些功能无法正常工作，请在人们激活该功能时显示屏幕或警报。**仅当人们尝试访问不起作用的功能时才显示警报。

因此，我会选择符合第一个选项的内容，并说“您必须接受本协议的条款才能继续”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:01:23.603

如果在移动应用程序上，这将是一个有用的案例，它就会被实现。

一般来说，一开始就显示屏幕并不是一个好习惯，因为突然用户会感到失望，因为他从一开始就没有得到一点娱乐。另一方面，需要登录的应用程序做同样的事情。

建议处理您的问题：

1.  在开始时展示你的屏幕，如果用户拒绝，你可以展示你的应用程序，没有代表性的数据和元素，可能还有一个框，上面写着“对不起，你先行，你必须接受我的规则”
2.  使用登录凭据在基于 Web 的服务上执行此协议，并在开始时显示登录屏幕，其中包含注册新帐户的选项，其中注册实施接受使用您的服务或应用程序的规则。这提供了一种更方便的方法，因为它由许多服务完成。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:02:52.583

> 这难道不是开发人员需要关闭功能的好理由吗？

是的，但苹果确实**有不同的想法**。
你唯一能做的就是接受并找到最好的选择

> 我有什么可用且优雅的替代方案？

显示：
![免责声明](../Images/9397f65db14bedbd08f0a871421d9ada.png)

如果被拒绝显示：
![免责声明](../Images/1e03615e8bde8d49fe15d92479cdc089.png)

# wordpress - 如何将自定义 HTML 添加到 wp_nav_menu？

> ID：12250866
> 
> 赞同：20
> 
> 时间：2012-09-03T15:46:59.207
> 
> 标签：wordpress

我熟悉 WordPress 并使用 WordPress 菜单系统。但我正在寻找一种将自定义 HTML 添加到`wp_nav_menu()`.

我正在尝试创建这样的菜单： ![在此处输入图像描述](../Images/b3e5cf46a375282bb0b6107db5ebec14.png)

请注意产品下的下拉菜单如何包含图像和链接。我想重新创建这个。我看过一些插件，但更愿意对其进行编码。

我不介意对图像和链接进行硬编码，但我想保持使用 WordPress 管理菜单的灵活性。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-03T16:08:18.967

WordPress 通过菜单页面显示项目的方式是使用 walker 对象。在这种情况下，该对象的特定类称为 Walker_Nav_Menu。你可以在`wp-includes\nav-menu-template.php`.

这`Walker_Nav_Menu`是一个非常简单的类。您可以看到链接和菜单结构是如何在那里构建的。函数`start_el`和`end_el`用于构建菜单项。函数`start_lvl`和`end_lvl`用于嵌套菜单。在这种方法中，我们将主要使用`start_el`and `end_el`。

在您`functions.php`创建一个类时，`Walker_Nav_Menu`使用与父类非常相似的方法进行扩展：

```
class Custom_Walker_Nav_Menu extends Walker_Nav_Menu {
  function start_el ( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {
    // Copy all the start_el code from source, and modify
  }

  function end_el( &$output, $item, $depth = 0, $args = array() ) {
    // Copy all the end_el code from source, and modify
  }
} 
```

在这些函数中，`$item`是您的菜单项，如果您愿意，可以根据当前菜单项查询附加内容。请注意，我没有包含`start_lvl`and `end_lvl`，但这没关系，因为如果没有被覆盖，您的类将自动继承父类的方法。

然后，在您的主题文件中，您可以像这样调用 wp_nav_menu：

```
wp_nav_menu(array(
  'theme_location' => 'main',
  'container' => false,
  'menu_id' => 'nav',
  'depth' => 1,
  // This one is the important part:
  'walker' => new Custom_Walker_Nav_Menu
)); 
```

WordPress 将使用您的自定义类和函数，以便您可以修改输出的代码。

# c# - 实体框架集合被修改；枚举操作可能无法执行

> ID：12250868
> 
> 赞同：5
> 
> 时间：2012-09-03T15:47:14.343
> 
> 标签：c#, asp.net, .net, database, entity-framework

我对错误Collection was modified, enumeration operation may not execute 的解决方法有问题。当“作者”和“z”暗示相同的元素时，就会出现这种情况。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;

namespace ConsoleApplication1
{
public class Nation
{
    public int ID { get; set; }
    public int name { get; set; }
    public virtual ICollection<NationAlly> NationAllys { get; set; }
}

public class NationAlly
{
    public int ID { get; set; }
    public int level { get; set; }
    public Nation Natio { get; set; }
}

public class NationsContext : DbContext
{
    public DbSet<Nation> Nations { get; set; }
    public DbSet<NationAlly> NationAllys { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Nation>()
            .HasMany(n => n.NationAllys)
            .WithRequired()
            .Map(conf => conf.MapKey("OwnerID"))
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<NationAlly>()
            .HasRequired(a => a.Natio)
            .WithMany()
            .Map(conf => conf.MapKey("UserID"))
            .WillCascadeOnDelete(false);
    }
}

class Program
{

    static void Main(string[] args)
    {
        using (var context = new NationsContext())
        {

            // We have three Nations and two Allies
            Nation nation1 = new Nation()
            {
                name = 1
            };
            Nation nation2 = new Nation()
            {
                name = 2
            };
            Nation nation3 = new Nation()
            {
                name = 3
            };

            context.Nations.Add(nation1);
            context.Nations.Add(nation2);
            context.Nations.Add(nation3);

            context.SaveChanges();

        }

        using (var context = new NationsContext())
        {
            Nation z = (from x in context.Nations
                      where x.name == 1
                        select x).FirstOrDefault();

            Nation author = (from x in context.Nations
                             where x.name == 1
                           select x).ToList().FirstOrDefault();

            NationAlly ally1 = new NationAlly()
            {
                Natio = author
            };

            // toNation of ally1 refers to Nation2
           // ally1.User = author;

            if (z.NationAllys != null)
            {
                z.NationAllys.Add(ally1);
            }
            else
            {
                z.NationAllys = new List<NationAlly>();
                z.NationAllys.Add(ally1);
            }

            context.SaveChanges();

        }
    }

}

} 
```

我在 Entity Framework 4.1 和 5 上测试了代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T16:30:11.947

如果您`ally1`在创建后立即将其添加到上下文中，它会起作用：

```
//...
NationAlly ally1 = new NationAlly()
{
    Natio = author
};
context.NationAllys.Add(ally1);
//... 
```

问题与您在特殊情况下的循环引用有关......

**z -> z.NationAllys 包含 ally1 -> ally1 指代作者 = z**

...并且可能与此有关：

[EF 4.1 和“集合已修改；枚举操作可能无法执行。” 例外](https://stackoverflow.com/questions/7536459/ef-4-1-and-collection-was-modified-enumeration-operation-may-not-execute-exc)

我无法真正解释它，但对我来说它看起来像是一个 EF 错误，因为您的代码应该可以毫无问题地工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-18T11:45:32.913

问题与您拥有的循环引用有关。您应该将零分配给一些参考以避免周期性

# javascript - 如何使用 onclick 事件触发此代码。我尝试过但失败了

> ID：12250870
> 
> 赞同：0
> 
> 时间：2012-09-03T15:47:27.450
> 
> 标签：javascript, function, events

当我单击 div 框时，我似乎无法触发代码，它只是继续运行 onload。

```
<div id='tank' onclick="timer"  style="position:relative; left:100px; top:240px;border-       radius:360px;
 background-color:green; height:100px; width:100px;"></div>
 <script type="text/javascript">

(function () {
// don't leak variables into the global scope - think "variable = carbon dioxide"
    var elem = document.getElementById('tank'), pos = 100,
       timer = setInterval(function() {
        pos++;
        elem.style.left = pos+"px";
        if( pos == 290) clearInterval(timer);

      },12);
  })(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:52:15.460

```
(function () {
   //...
}()); 
```

立即运行函数内的代码，因此难怪您的代码在页面加载时运行。

```
onclick="timer" 
```

根本什么都不做。这与编写如下内容相同：

```
var foo = 42;
foo; // <- this does not do anything 
```

更糟糕的是，如果`timer`未定义，这将引发错误（在您的示例中就是这种情况）。

您需要做的是为元素分配一个作为点击事件处理程序的函数。例如：

```
document.getElementById('tank').onclick = function() {
    var elem = this, 
        pos = 100,
        timer = setInterval(function() {
            pos++;
            elem.style.left = pos+"px";
            if( pos == 290) clearInterval(timer);

        },12);
}; 
```

*（并`onclick="timer"`从您的 HTML 中删除）*

我建议阅读[quirksmode.org 上的优秀文章，](http://www.quirksmode.org/js/introevents.html)以了解有关事件处理的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:51:23.217

```
<div id='tank' onclick="timer()"  style="position:relative; left:100px; top:240px;border-radius:360px; background-color:green; height:100px; width:100px;">
</div>
<script type="text/javascript">

function timer (){
    alert("h");
    var elem = document.getElementById('tank'), pos = 100,
    timer = setInterval(function() {
        pos++;
        elem.style.left = pos+"px";
        if( pos == 290) clearInterval(timer);

      },12);
}
</script> 
```

对您的代码稍作修改。

# sql - SQL Server 各种数据类型的四列复合键

> ID：12250871
> 
> 赞同：4
> 
> 时间：2012-09-03T15:47:30.460
> 
> 标签：sql, sql-server, database-design, composite-primary-key

我刚刚在查看供应商数据库架构时，我可以在一个表上有一个四列上的复合主键，其中三个是浮点数据类型。我不知道为什么，但这真的让我震惊。

拥有这种复合主键有什么含义/好处？推荐吗？我认为浮点数作为主键字段很危险。

![在此处输入图像描述](../Images/db03d15c472304cb99d392b256ba1351.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T19:28:25.403

我猜这个模型在 CAD 中被称为“家庭表” ¹。本质上，一个“逻辑几何”可以通过改变维度^(2来生成许多“物理几何”，而)**不是**添加或删除几何特征。

顾名思义，它是一个表格 - 列是维度，每一行代表这些维度的值的特定组合，这些值应该应用于特定的“实例”以生成物理几何图形，这看起来与您在这里向我们展示的非常相似.

生成两个几何上相同的实例没有任何意义，因此这些维度形成一个键³，只要系统的所有组件“理解”某些数字（例如十进制 0.1）[不能](https://stackoverflow.com/a/1089026/533120)以二进制浮点数精确表示，就可以了不管精度如何。

根据您的数据来自哪里（以及它的去向），您可能会坚持当前的设计或考虑使用[十进制](http://msdn.microsoft.com/en-us/library/ms173773.aspx)：

*   例如，如果您的数据来自 CAD API（或被 CAD API 使用），它可能已经表示为`double`那里，因此将其存储`float`在数据库中的摩擦较小。
*   如果它来自某些用户需要以十进制数字系统输入的 UI，则`decimal`可能是更好的选择。

* * *

*¹ “族表”是一个 PTC Pro/ENGINEER（又名 Creo）术语。本质上相同的东西在 Autodesk Inventor 中称为“iParts/iAssemblies”，在 SolidWorks 中称为“配置”。*

*²参数化设计的其他方面，例如特征抑制，但我们现在不要陷入太多细节......*

*³无论您是否会引入额外的“代理”键并使其成为主键，您都需要它。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:56:12.923

我建议您删除此键并将其替换为表上的 id 键自动增量。建议使用整数类型作为您的密钥，祝您好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:03:42.413

我认为 FLOAT 键没有什么特别“错误”的地方。正确的类型应该反映列值。 [这是一个相关的SO问题。](https://stackoverflow.com/questions/1105260/sanity-check-floats-as-primary-keys)

# api - 我试图在耶拿的本体教程 api 中编写一个片段

> ID：12250873
> 
> 赞同：1
> 
> 时间：2012-09-03T15:47:34.510
> 
> 标签：api, jena, ontology

片段如下：

```
static String personURI    = "http://somewhere/JohnSmith";
static String fullName     = "John Smith";

Model model = ModelFactory.createDefaultModel();
Resource johnSmith = model.createResource(personURI);
johnSmith.addProperty(VCARD.FN, fullName); 
```

运行代码时，会出现以下错误：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/sabarish/workspace/apache-jena-2.7.2/lib/slf4j-log4j12-1.6.4.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/sabarish/Jena-2.6.4/lib/slf4j-log4j12-1.5.8.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:04:01.590

您收到的错误似乎与您的代码无关，显然您的类路径中包含多个日志框架。检查您要导入的库。

在您发布的 StackTrace 中，您似乎两次导入了 log4j jar。

这与您的问题**无关**，但是...我在大学中将 Jena 用作 RDF/OWL API 的一个非常酷的项目，如果您打算对 OWL 本体进行认真的推理，我建议您使用 Pellet :)。

如果您想查看它们，我在这里有一些基本示例，我不知道它是否会对您有所帮助，但我花了几天时间将所有内容正确组合在一起。 [https://github.com/iferminm/ReasoningAndPersisting](https://github.com/iferminm/ReasoningAndPersisting)

# jquery - 为什么触发click事件后checked属性发生了变化？

> ID：12250874
> 
> 赞同：0
> 
> 时间：2012-09-03T15:47:34.493
> 
> 标签：jquery, events, google-maps

我有这个代码：

```
siteCheckboxes.each(function () {

        var lat = $(this).attr("lat");
        var lng = $(this).attr("lng");
        var myLatlng = new google.maps.LatLng(lat, lng);
        var marker = new google.maps.Marker({ icon: smallDotIcon, position: myLatlng, map: map, title: $(this).attr("siteName") });
        var $checkbox = $(this);
        $(this).click(function () {
            if ($(this).attr("checked")) {

              marker.setIcon(null);  
            } else {
               marker.setIcon(smallDotIcon);

            }

        });
        google.maps.event.addListener(marker, 'click', function () {
              $checkbox.click();
        });

    }); 
```

这个想法是我有几个带有站点名称的复选框和一个带有小点的地图，用于地图上的每个站点。当用户选中站点复选框时，地图上的标记应更改为完整标记。这部分应用程序工作正常。

当用户点击一个标记时，相关复选框的状态应该会改变，标记的形状也会改变，但它不起作用。

当用户单击标记时，复选框选中状态和标记形状不同步。问题是什么？

一些调试告诉我，如果用户单击标记，则调用标记的单击事件，并且还会调用相关复选框的单击事件，但是选中状态会在复选框单击事件完成后发生变化。

为什么点击事件结束后它会改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:12:37.080

The problem is that you're looping over all your checkboxes, creating your click handlers. However when the user then clicks on any marker, it will always use the last value for $checkbox, not the one corresponding with when you created the marker eventlistener.

You need a closure.

Try something like this instead. Create a new top-level function, *bindClick*, outwith your .each loop. In your .each loop, call that function. This then creates the event listener with whatever checkbox you're looping over at the time.

```
siteCheckboxes.each(function () {
    var lat = $(this).attr("lat");
    var lng = $(this).attr("lng");
    var myLatlng = new google.maps.LatLng(lat, lng);
    var marker = new google.maps.Marker({ icon: smallDotIcon, position: myLatlng, map: map, title: $(this).attr("siteName") });
    var $checkbox = $(this);

    bindClick($checkbox, marker);
});

function bindClick(checkbox, marker) {
    google.maps.event.addListener(marker, 'click', function () {
          checkbox.click();
    });
} 
```

# android - EditText 显示 2 行文本，而不是 1 行，尽管设置了所有属性（仅在 Galax Tab 10.1、ICS 上）

> ID：12250880
> 
> 赞同：1
> 
> 时间：2012-09-03T15:48:00.157
> 
> 标签：android, android-edittext, android-4.0-ice-cream-sandwich, galaxy-tab

在我的应用程序中，我有一个 EditText，我想准确地显示 1 行文本。它在大多数平板电脑（都运行 ICS）上运行良好，但是，**Galaxy Tab 10.1 以 2 行而不是 1 行显示长文本**。

我确实将所有属性设置如下：

```
<EditText
    android:id="@+id/edt_chat_edit"
    ....
    android:singleLine="true"
    android:lines="1"
    android:maxLines="1"
    android:minLines="1" /> 
```

我认为这是三星固件中的错误；有人可以确认吗？最终知道解决方法吗？

![在此处输入图像描述](../Images/bda59639b5b57b6e69b7f741077677ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:49:39.000

您可以手动设置 EditText 高度吗？不是最优雅的解决方案，但它可能会起作用。

# .net - 访问只读成员是否更快？

> ID：12250890
> 
> 赞同：0
> 
> 时间：2012-09-03T15:49:00.967
> 
> 标签：.net, clr

尝试读取私有“只读”实例成员变量与私有实例成员变量时，速度是否有差异？

**更新**

这个问题的目的是为了更好地理解和理论目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:01:24.700

没有性能差异。不过，更改为“const”会获得一些性能。所有这些都在这篇精彩的文章中得到了详尽的描述；

[http://www.dotnetperls.com/readonly](http://www.dotnetperls.com/readonly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:08:54.887

假设您有以下代码：

```
void Main()
{
    Test t = new Test();
    t.Check();
}

public class Test
{
    private readonly int  num = 10;
    private int num1 = 50;

    public void Check()
    {
        int a = num1;
        int b = num;
    }
} 
```

现在生成的MSIL代码如下

```
IL_0001:  newobj      UserQuery+Test..ctor
IL_0006:  stloc.0     
IL_0007:  ldloc.0     
IL_0008:  callvirt    UserQuery+Test.Check

Test.Check:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  ldfld       UserQuery+Test.num1
IL_0007:  stloc.0     
IL_0008:  ldarg.0     
IL_0009:  ldfld       UserQuery+Test.num
IL_000E:  stloc.1     
IL_000F:  ret         

Test..ctor:
IL_0000:  ldarg.0     
IL_0001:  ldc.i4.s    0A 
IL_0003:  stfld       UserQuery+Test.num
IL_0008:  ldarg.0     
IL_0009:  ldc.i4.s    32 
IL_000B:  stfld       UserQuery+Test.num1
IL_0010:  ldarg.0     
IL_0011:  call        System.Object..ctor
IL_0016:  nop         
IL_0017:  ret 
```

所以我看到 readonly 是一个特定于语言的关键字，用于表达编程概念。
编译器在构建代码时会强制执行只读规则。
从生成的代码的角度来看，没有区别。——</p>

# matlab - 使用 MATLAB linux 进行写访问

> ID：12250891
> 
> 赞同：1
> 
> 时间：2012-09-03T15:49:01.233
> 
> 标签：matlab

```
f = fopen(fid1, 'r' );
g = fopen(folder_1\fid1.xml.TEMP', 'w' ); 
```

这适用于 Windows 而不是 Linux。

是否有特定的操作以使上述行在 Windows 和 Linux 上有效？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:53:47.040

我的猜测是文件分隔符是平台相关的。尝试使用[filesep](http://www.mathworks.nl/help/techdoc/ref/filesep.html)全局变量，和/或查看[fullfile](http://www.mathworks.nl/help/techdoc/ref/fullfile.html)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:52:07.190

请使用其他斜杠“/”并尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:06:16.327

```
f = fopen(./fid1, 'r' );
g = fopen(./folder_1/fid1.xml.TEMP, 'w' ); 
```

要确定操作系统类型，您可以使用：

```
if ispc
% use \
elseif isunix
% use /
else
% abort
end 
```

# jquery - @require-ing jQuery 覆盖页面的 $ 变量

> ID：12250892
> 
> 赞同：5
> 
> 时间：2012-09-03T15:49:02.883
> 
> 标签：jquery, greasemonkey, tampermonkey

我正在`@require`为我的 Greasemonkey 脚本使用 jQuery，并在我的脚本文件中使用这一行：

```
// @require https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

而且效果很好；我可以`$('#id')`用来访问 DOM。

但是，`$`“真实”页面的变量被修改（`$`jQuery 1.2.xx 在哪里）：我收到一个`$.include`未定义的错误。

我认为 Greasemonkey 的沙盒模型会防止目标页面的变量被覆盖？

如何确保包含 javascript 库不会影响“真实”网站，而只会影响我的 Greasemonkey 脚本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T23:49:05.593

[Greasemonkey 1.0 从根本上改变了沙盒的工作方式](http://wiki.greasespot.net/@grant)，破坏了数千个脚本。另请参阅，[Greasemonkey 1.0 中的 jQuery 与使用 jQuery 的网站冲突](https://stackoverflow.com/questions/12146445/jquery-in-greasemonkey-1-0-conflicts-with-websites-using-jquery)。

这是一个巨大的问题，我希望你能和我一起就[这个问题的主要错误报告](https://github.com/greasemonkey/greasemonkey/issues/1614)发表你的意见/经验。

同时，将沙箱恢复到您的脚本，并`$`通过编辑**[元数据块](http://wiki.greasespot.net/Metadata_Block)以以下行结束来**解决冲突：

```
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design change introduced in GM 1.0,
    It restores the sandbox.
*/ 
```

指定一个`@grant`值（不是`none`）会重新激活沙箱。

* * *

您还可以考虑切换到[Scriptish](https://addons.mozilla.org/en-US/firefox/addon/scriptish/)，它在过去提供了卓越的功能和性能，并且不会受到这种新沙盒行为的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T16:03:12.473

见[`jQuery.noConflict();`](http://api.jquery.com/jQuery.noConflict/); 它解释了很多。

编辑：在搜索中
找到[“Greasemonkey 1.0 + jQuery: Broken, with Workaround”](http://www.greasespot.net/2012/08/greasemonkey-10-jquery-broken-with.html)。

可能的解决方案：

```
 this.$ = this.jQuery = jQuery.noConflict(true); 
```

这样做，可能会隐式指定 $, jQuery 将在您的脚本的命名空间中可用。

# ip - 来自 IP 数据包头的 16 位长度标识是否足够大？

> ID：12250893
> 
> 赞同：1
> 
> 时间：2012-09-03T15:49:10.357
> 
> 标签：ip, fragment, packet, identification

我只是想知道这么简单的问题。

据我所知，标识是一个2字节长度的数据，用于在制作片段时识别数据报，但是，16位整数的最大数量是65536，所以我的问题是，什么会当我们在短时间内发送超过 65536 个数据报时会发生什么？

在此先感谢，对糟糕的英语表示抱歉:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:02:06.733

[RFC 4963](https://tools.ietf.org/rfc/rfc4963.txt)摘要：

> IPv4 分片对于在当今 Internet 的某些条件下使用而言不够健壮。在高数据速率下，16 位 IP 标识字段不足以防止频繁错误组装的 IP 片段，并且 TCP 和 UDP 校验和不足以防止生成的损坏数据报被传递到更高的协议层。本说明描述了一些易于复制的实验来证明该问题，并讨论了这些观察结果的一些操作含义。

# python - 为列表元素赋值

> ID：12250895
> 
> 赞同：1
> 
> 时间：2012-09-03T15:49:36.130
> 
> 标签：python

当我有一个 for 循环时：

```
for row in list:
    row = something_or_other 
```

似乎有时我可以直接分配一个值（或附加/扩展等）`row`并相应地进行`list`更改，有时我必须做一些迂回的事情，例如：

```
for row in list:
    list[list.index(row)] = something_or_other 
```

是什么赋予了？！？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T15:52:39.433

您永远不能像这样重新分配值`row`（或者通常，无论您的迭代变量是什么）：

```
x = [1, 2, 3]
for x in lst:
    x = # code 
```

因为这是完全重新分配变量`x`（它的意思是“忘记它`x`是列表的成员”）。

但是，如果`x`是可变的，例如如果它是一个列表，你可以这样做：

```
lst = [[1, 2], [3, 4]]
for x in lst:
    x.append(10) 
```

它实际上会改变值（到`[[1, 2, 10], [3, 4, 10]]`）。[用技术术语来说，这是重新绑定操作和变异操作](http://en.wikipedia.org/wiki/Name_binding#Rebinding_and_mutation)之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:55:37.403

`row`在 for 循环中只是原始名称（但在 for 中重新分配它 - 有效地破坏了链接）。因此，如果它是可变的，那么您可以在其上使用将反映在底层对象中的方法（例如`append`、`add`等）。`extend`

正确的成语是使用：

```
for rowno, row in enumerate(some_list):
    some_list[rowno] = #... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:52:13.047

分配 to会`lst[lst.index(row)]`导致[`O(n²)`](http://en.wikipedia.org/wiki/Landau_notation)performance 而不是`O(n)`，如果列表包含多个相同的项目，则可能会导致错误。

相反，分配一个新列表，用[列表推导式](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)构造或[`map`](http://docs.python.org/library/functions.html#map)：

```
lst = [1,2,3,4]
doubled = [n*2 for n in lst] 
```

或者，如果您真的想修改原始列表，可以使用[enumerate ：](http://docs.python.org/library/functions.html#enumerate)

```
for i,n in enumerate(lst):
    lst[i] = n*2 
```

# c# - 替换 SilverLight 应用程序 (xap) 中的 dll 以嗅探流量

> ID：12250903
> 
> 赞同：0
> 
> 时间：2012-09-03T15:50:06.350
> 
> 标签：c#, silverlight, sniffing, xap

我试图了解 Silverlight 应用程序如何与其服务器通信。通信是加密的。我想看看加密前消息的样子。我想出了这个主意：当浏览器请求 .xap 文件时，我提供一个版本，其中包含一个不加密任何内容的修补 DLL。我通过使用 reflexil 修补 C# 代码创建了这个 DLL。

我应该使用什么工具来交付这个修补过的 .xap 文件？提琴手？只需要替换一个文件，来自浏览器的所有其他请求都应该转到原始服务器。

有没有更简单的方法来做到这一点？例如，有谁知道从 .xap 文件中提取 DLL 文件的确切位置？它们是如何加载的？也许更容易找到提取它们的位置并修补已经解压的版本？我使用了进程监视器，但 IE 似乎在内存中解压 XAP。

编辑：

我没有创建应用程序，这就是问题所在。我想欺骗 IE 从原始 XAP 加载 DLL 的修补版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:58:11.970

不完全了解您要实现的目标，但关于您关于解压缩 XAP 的最后一个问题，您可以在以下位置访问下载的 xap 文件

C:\Documents and Settings[用户名]\Local Settings\Temporary Internet Files\

将包重命名为 .zip 而不是 .xap，解压缩并在那里访问您的 dll？

# data-structures - 必须使用数组来实现哈希表吗？

> ID：12250904
> 
> 赞同：2
> 
> 时间：2012-09-03T15:50:12.417
> 
> 标签：data-structures

必须使用数组来实现哈希表吗？替代的数据结构会达到同样的效率吗？如果是，为什么？如果不是，数据结构必须满足什么条件才能保证和数组一样的效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:54:40.953

> 必须使用数组来实现哈希表吗？

不。除了数组之外，您还可以`HashTable`使用其他数据结构来实现接口。例如红黑树（java 的[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)）。
这提供了`O(logN)`访问时间。
但`Hash Table`预计会有`O(1)`访问时间（最好的情况 - 没有冲突）。
这只能通过提供在恒定时间内随机访问的可能性的数组来实现。

> 数据结构必须满足什么条件才能确保与数组提供的效率相同？

`O(N)`必须具有与数组相当的性能（小于）。树形图对**所有**操作`O(logN)`的访问时间最差

# php - 从表单动态生成字符串，传递给通过 AJAX 加载的 PHP 文件

> ID：12250905
> 
> 赞同：0
> 
> 时间：2012-09-03T15:50:14.600
> 
> 标签：php, javascript, mysql, ajax

A 有一个价格比较网站，在侧边栏中有一个用户输入表单。当用户开始使用表单（勾选复选框、单选按钮等）时，我需要根据用户正在检查的选项动态更新页面的主要内容区域（比较表）。目前，我正在使用 AJAX 将 PHP 文件的内容加载到内容区域的 DIV 中。PHP 文件只有一个 PHP 查询，用于从数据库中提取内容，然后将其输出。这不是 MySQL 查询，它是我使用的价格比较包的 PHP 调用，只是使用诸如“+blue +widget min_price=10 max_price=200”等参数。然后由包处理 MySQL 查询。

当我对所有内容进行硬编码时，它工作得很好，所以这是一个好的开始。问题是，我需要根据用户在表单上选择的内容动态生成查询字符串，然后在 AJAX 调用期间将其传递给 PHP 文件，以将正确的内容拉入 DIV。查询字符串需要更新，并且每次用户更改表单上的内容时都需要进行调用。因此，例如，如果用户勾选了颜色“蓝色”的框，我需要在字符串中添加“+蓝色”并重新发送 AJAX 调用。如果他们取消勾选蓝色，我需要删除“+蓝色”并重新发送 AJAX 调用等。等等。

在这一点上，我已经超出了我的深度，所以如果你有任何关于如何实现这样的目标的指导，我将不胜感激......

目前，我有这个：

被更新的内容 div 称为“pbDiv”。

阿贾克斯：

```
<script type="text/javascript">
function updateTable(str)
{
if (str=="")
  {
  document.getElementById("pbDiv").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("pbDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","http://MYSITE//pricebox.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

形式：

```
<form>
<select name="colour" onchange="updateTable(this.value)">
<option value="">Select a colour:</option>
<option value="blue">Blue</option>
<option value="red">Red</option>
<option value="green">Green</option>
<option value="yellow">Yellow</option>
</select>
</form> 
```

PHP 文件只接受字符串，并且工作正常。正如您可能已经猜到的那样，问题在于这种形式仅适用于一件事（颜色）。使用 this.value 只会传递该下拉列表的选择。我不知道如何使用多个表单项并构建一个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:31:27.477

为每个表单项提供一个唯一的 id，然后为每个项调用 updateTable 函数，但在调用函数时不传递值，例如::

现在像这样修改你的 updateTable 函数

```
function updateTable(){
var str = 'color = '+ document.getElementById('colorField').value;
    str += 'something = '+ document.getElementById('somethingField').value;
//now carry on your ajax stuff
} 
```

# macos - AppleScript：从文件读取的问题

> ID：12250908
> 
> 赞同：1
> 
> 时间：2012-09-03T15:50:26.940
> 
> 标签：macos, file, io, applescript

我正在开发一个小的[AppleScript](http://en.wikipedia.org/wiki/AppleScript)程序，它可以让你输入一行文本和一个数字，OS X 中的文本到语音功能会大声说出来，并带有一些由你输入的数字控制的原始混响。（详细研究我的代码。）

一切都很好，除了一件事。我正在尝试将您让计算机说的内容写入文本文件，然后将该文本文件加载到您编写它应该说的文本字段中。

写入部分工作得很好，它正在制作一个文本文件并将我让计算机说的任何内容放在那里。问题在于阅读。

就像现在一样，读取的部分如下所示：

```
try
    open for access prevSFile
    set defToSay to (read prevSFile)
end try 
```

什么都没有发生。如果我尝试删除“尝试”，它会给我错误-500，程序停止。

这是我的代码：

```
--define variables
set defToSay to ""
set prevSFile to "~/library/prevSFile.txt"

--Fetch info from save file:
try
    open for access prevSFile
    set defToSay to (read prevSFile)
end try

--Display dialoges:
display dialog "What do you want to say?" default answer defToSay
set whatToSay to the text returned of the result
display dialog "How many times do you want to overlay it?" default answer "5"
set overlays to the text returned of the result

--Create/edit save file:
do shell script "cd /"
try
    do shell script "rm " & prevSFile
end try
do shell script "touch " & prevSFile
do shell script "echo " & whatToSay & " >> " & prevSFile

--Say and kill:
repeat overlays times
    tell application "Terminal"
        do script "say " & whatToSay
    end tell
    delay 0.01
end repeat
delay (length of whatToSay) / 5
do shell script "killall Terminal" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:29:14.253

你的问题就在这里。[AppleScript](http://en.wikipedia.org/wiki/AppleScript)路径不使用“/”，AppleScript 肯定不知道“~”。

```
"~/library/prevSFile.txt" 
```

这是代码的那部分应该是什么......

```
set prevSFile to (path to home folder as text) & "Library:prevSFile.txt"
try
    set defToSay to (read file prevSFile)
end try 
```

现在您有了 AppleScript 的正确路径，您需要修复 shell 命令的路径。请注意，您不需要每次都 rm 并触摸文件。重定向回显命令时只需使用“>”，这将覆盖文件。如果有空格，您还需要使用路径的“引用形式”。

```
do shell script "echo " & quoted form of whatToSay & " > " & quoted form of POSIX path of prevSFile 
```

但是，您在该脚本中做了很多不必要的事情。以下是我将如何编写您的代码。祝你好运。

```
property whatToSay : ""
property numberOfTimes : 5

--Display dialoges:
display dialog "What do you want to say?" default answer whatToSay
set whatToSay to the text returned of the result

repeat
    display dialog "How many times do you want to overlay it?" default answer (numberOfTimes as text)
    try
        set numberOfTimes to the (text returned of the result) as number
        exit repeat
    on error
        display dialog "Please enter only numbers!" buttons {"OK"} default button 1
    end try
end repeat

repeat numberOfTimes times
    say whatToSay
end repeat 
```

# android - Android：在 xml 和 java 代码中声明的 Timpicker 差异 (TimePickerDialog)

> ID：12250913
> 
> 赞同：0
> 
> 时间：2012-09-03T15:50:57.023
> 
> 标签：android, timepicker

所以我有这个问题，即不能从 xml 中声明的 timepicker 获得准确的时间结果，而不是对话框的事情，我只是想知道两者有什么区别。这样我就可以知道在我的应用程序上使用哪个更好，主要是我使用 timepicker 设置警报或提醒，因为我有一种预感，在 xml 中声明的 timpicker 仅用于 UI 使用，而不是真正用于功能。因为我不断得到错误的结果，特别是处理 AM 和 PM，场景是当使用在 xml 中声明的 timepicker（而不是对话框）时，我首先更改小时 den 分钟，最后更改 AM 和 PM，但我不会正确地给我当前时间，假设我选择了下午 7:30，据说小时的值必须是 19，因为它是 24 小时，但它给了我上午 7:30 我不会更改上午和下午部分，因此给了我错误的结果，

所以我的问题是这两个时间选择器之间的主要区别是什么，是用于显示（声明的时间选择器 xml）和时间选择器（对话框）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:42:23.150

关于这个问题，请参考这篇文章，我刚刚遇到了这个帖子，这和我的问题是一样的。这是Android中的错误问题

[Android TimePicker AM/PM 按钮未调用 onTimeChanged](https://stackoverflow.com/questions/9047326/android-timepicker-am-pm-button-not-invoking-ontimechanged)

# php - PHP PDO 获取所有行名作为包含值的对象

> ID：12250914
> 
> 赞同：2
> 
> 时间：2012-09-03T15:51:13.973
> 
> 标签：php, mysql, pdo, row

我有一个名为`site`.

而不是 qet 列标题来生成值的 PHP 对象，我想从行中生成数据。

桌子：`site`

```
:::field:::::value:::::

   url       www.example.com
   name      example site
   etc       Example Etcetera 
```

所以我希望能够通过调用我想要的列名和我之后的行来从服务器获取这些信息。我想对中的所有字段执行此操作，`site`因为我不想对中的各种不同行进行多次调用`site`；我宁愿从一开始就将所有信息存储在对象中：

例如。`<? echo $site['url']; ?>`

我创建了这个 put 它似乎导致了一个错误：。

```
$sql = "SELECT * FROM `site`"; 
$site[];
foreach($sodh->query($sql) as $sitefield){
    $site[$sitefield['field']] = $sitefield['value'];
} 
```

显然我错过了一些东西。¿ 知道什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:53:33.823

```
$site[]; 
```

应该

```
$site = array(); 
```

# android - 无法识别 Android 2.3.6

> ID：12250916
> 
> 赞同：0
> 
> 时间：2012-09-03T15:51:23.373
> 
> 标签：android, adb

我有一个想要在真实设备上测试的应用程序，并且我有一个在 android 2.3.6 上运行的三星 Galaxy Mini，但由于唯一可用的 SDK 是 2.3.3，因此我选择了它作为目标构建。当我插入 USB 时，windows 确实可以识别它，但 eclipse 没有，它不会在设备上安装应用程序，也不会在模拟器也在运行时显示它。是某种错误还是什么？

这是清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidhive"
    android:installLocation="auto"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ng_icon"
        android:label="@string/app_name" >
        <activity
            android:name=".Init"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Home"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.androidhive.HOME" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".CurentNews"
            android:label="@string/title_activity_curent_news" >
            <intent-filter>
                <action android:name="com.example.androidhive.CURENTNEWS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".News"
            android:label="@string/title_activity_news" >
            <intent-filter>
                <action android:name="com.example.androidhive.NEWS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:58:01.657

我认为问题出在设备驱动程序中。请你

1.  检查控制台中“adb devices”命令的输出？
2.  如果什么都没有 - 检查是否为设备安装了 whick 驱动程序，如果有必要 - 手动安装 AndroidPhone -> ADB 调试接口（在系统驱动程序列表中）
3.  还要检查手机的开发者设置中的“允许 USB 调试”是否打开。

PS：如果系统中没有找到驱动——使用SDK Manager下载GoogleUSB Driver，它会出现在Android SDK的“Extras”文件夹中。

祝你好运

# matlab - 如何在 MATLAB 中使用 LaTeX 黑板字体？

> ID：12250919
> 
> 赞同：9
> 
> 时间：2012-09-03T15:51:32.983
> 
> 标签：matlab, user-interface, text, latex, plot

因此，根据我的问题和解决方案[，](https://stackoverflow.com/questions/12249639/matlab-and-math-equations-via-latex-in-command-window-or-stand-alone-plots/12250202#comment16422138_12250202)我想实际开始使用 LaTeX，如图所示。但是，我遇到的一个问题是我似乎无法显示 Expectation 运算符。

根据我的[研究](http://www.latex-community.org/forum/viewtopic.php?f=46&t=3830)，我知道期望运算符可以正常显示为：

```
/mathbb{E} 
```

但是，当我尝试在 MATLAB 中使用它时，什么也没有打印出来。

```
clear all
figure(1); clf(1);
set(gcf, 'color', 'white'), axis off     %# Remove axes and set white background
my_text = '$$ \mathbb{E} $$';
text('units', 'inch', 'position', [-0.5 3.5], 'fontsize', 14, 'color', 'k', ...
    'interpreter', 'latex', 'string', my_text); 
```

现在，我知道 \mathbb 是某种不同的“库”，但坦率地说，它对数学公式非常有用。如何在 MATLAB 中“包含”它？我迷失了这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T16:51:12.243

您可能没有注意到它，但您会在命令提示符中收到一条警告消息：

> `Warning: Unable to interpret TeX string`

它告诉您 MATLAB 无法解析您的 LaTeX 表达式。更具体地说，MATLAB 的内置 LaTeX 解释器不支持[黑板粗体数学字体](http://en.wikipedia.org/wiki/Blackboard_bold)（由 指示）（它需要[amsmath](http://www.ams.org/publications/authors/tex/amslatex)包）。`'\mathbb'`

[此处](http://www.mathworks.com/matlabcentral/newsreader/view_thread/287511)和[此处](http://mathforum.org/kb/message.jspa?messageID=7574110)描述了安装此软件包的一种方法。我给大家总结一下：

1.  [从这里](http://www.ams.org/publications/authors/tex/amslatex)下载 AMS-LaTeX 包。

2.  `tex.m`修改文件夹中的 m-file `*MATLAB root*\toolbox\matlab\graphics`（修改前备份文件）：

    2.1。在`localDecorateInputString`函数中，修改`standardhead`以包含新包（以粗体标记）：

    > `standardhead = [' \nofiles \documentclass{mwarticle} **\usepackage{amsfonts, amsbsy, amssymb}** \begin{document}']`

    2.2\. 在`localGetTeXPath`函数中，添加 AMS 包文件所在的路径（以粗体标记），例如：

    > `texpath{1} = blah blah blah...
    > texpath{end+1} = blah blah blah...
    > **texpath{end+1} = 'C:\amslatex\';**`

3.  `.sty`将AMS 包的所有文件复制到该`*MATLAB root*\sys\tex`文件夹​​。

4.  重新启动 MATLAB。

您现在应该已经安装了必要的 LaTeX 字体包。如果时间允许，我很乐意自己检查一下，这似乎很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:07:18.373

解决此问题的另一种方法是将图形导出到 eps 文件并使用[psfrag](http://en.wikipedia.org/wiki/PSfrag)将所有标准 E 追溯替换为其 Blackboard Bold 等效项。

```
\psfrag{E}{\mathbb{E}} 
```

# google-maps-api-3 - 谷歌地图 - 如何有效地创建具有许多点的多边形？

> ID：12250920
> 
> 赞同：1
> 
> 时间：2012-09-03T15:51:39.080
> 
> 标签：google-maps-api-3, kml, layer, geopoints

我需要每个德国州的多边形。我将所有内容都`GeoPoints`放在一个`JavaScript`文件中，但该文件是因为大约`4MB`. 我整天都在谷歌上搜索并思考这个问题，但无法找到解决方案......

如何在`Google Maps`不强制用户下载带有坐标的巨大 js 文件的情况下使用多边形？

谢谢！罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:09:34.783

一种选择是使用 FusionTablesLayer 来显示多边形。它们在公开可用的自然地球数据集中可用。

[例子](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Germany)

如果您将数据转换为 KML，您可以对您的点和 KmlLayer 执行相同的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T00:50:03.867

您可以对多边形点进行编码以大大减小 javascript 文件的大小。为此，您必须包含几何库。

[https://developers.google.com/maps/documentation/javascript/reference#encoding](https://developers.google.com/maps/documentation/javascript/reference#encoding)

[https://developers.google.com/maps/documentation/javascript/geometry#Encoding](https://developers.google.com/maps/documentation/javascript/geometry#Encoding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:58:26.247

嗯......不知何故，这些点必须到达用户手中。您可以考虑以下解决方案来减少数据使用量：

*   为不同的缩放级别使用不同的多边形。例如缩小你不需要完整的细节。
*   只将多边形的一部分发回给用户。例如，您可以将视口坐标发送到 AJAX 脚本。这一个查询您的数据库和/或 shapefile，只返回在用户视口中可见的多边形部分
*   预处理瓷砖。如果您可以从您的形状生成图像，则可以将这些图像叠加在 Google 地图上。

# php - 如何在 mysql insert 语句上设置 PHP 'not null' 条件？

> ID：12250922
> 
> 赞同：0
> 
> 时间：2012-09-03T15:51:44.537
> 
> 标签：php, mysql, html, forms

我有一个页面，上面有两个表单（和两个提交按钮），表单将页面链接回*自身*，其中包含 INSERT INTO 语句的 action=""。INSERT INTO 语句之一是：

```
<?php
$sql="INSERT INTO panelProduct (length_mm, width_mm, aperture)

VALUES ('$_POST[p_length_mm]','$_POST[p_width_mm]','$_POST[p_aperture]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";
?> 
```

我将表单和 INSERT 语句放在同一页面上的原因之一是表单允许用户将产品添加到订单中，并且可能有多个产品（所以我认为用户可以继续提交直到他们完成...）。另一个原因是我需要使用从上一页发送的 $_POST 值来对他们输入的产品执行其他操作，而我不知道如何将其发送到多个页面。

无论如何，我发现的问题是每次刷新页面时都会在数据库中插入一个新行，其中包含 NULL 值。这对我来说很有意义，因为 PHP 每次遇到它时都会执行上面的语句。因此，我的问题是，如果用户在表单中输入内容并“提交”，我如何才能做出某种仅执行 INSERT 语句的条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:55:23.917

你需要这样的条件：

```
if ('POST' === $_SERVER['REQUEST_METHOD']) {
    // a form was posted
} 
```

当然，您仍然需要检查您的帖子是否包含正确的内容：

```
isset($_POST['p_length_mm'], $_POST['p_width_mm'], $_POST['p_aperture']) 
```

更好的是用来[`filter_input_array()`](http://www.php.net/filter_input_array)清理你的传入数据；您当前的代码对 SQL 注入攻击是开放的。使用`PDO`or`mysqli`和准备好的语句是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:00:56.397

您必须检查数据是否来自您的表单。我建议使用这种方法 - 将您的提交按钮命名（即`<input type="submit" name="my_submit_button" value="Whatever" />`，将此条件命名为您的插入代码：

```
if( isset( $_POST['my_submit_button']) ) {
  .. process your post data
} 
```

另外，永远记住不要相信用户提供的数据。验证是否所有预期的数据都存在`$_POST`并且格式是否符合要求（即您要求提供数字和收到的信件等）。如果所有测试都通过了，那么您就可以将数据提交到数据库了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T16:02:25.493

您可以使用 PHP 的 empty() 方法来检查每个变量中的空值。

就像是：

```
if(!empty($_POST['p_length_mm']) && !empty($_POST['p_width_mm']) && !empty($_POST['p_aperture']))
{
//execute your query here
}
else
{
//if there's an alternative you would like to happen if values are null, or just leave out.
} 
```

希望能解决问题。

# ruby - Ruby TCP/IP 客户端线程

> ID：12250923
> 
> 赞同：1
> 
> 时间：2012-09-03T15:51:46.100
> 
> 标签：ruby, multithreading, tcp, client

我将 ruby​​ 套接字用于简单的乒乓球场景。（客户端正在向服务器发送一个字符串，而服务器正在将字符串发回——仅此而已）

简单客户端：

```
socket = TCPSocket.new "localhost", 5555
socket.write "test-string\n"
puts socket.gets.inspect 
```

它工作正常，直到线程发挥作用：

```
socket = TCPSocket.new "localhost", 5555
threads = []

5.times do |t|
  threads << Thread.new(t) do |th|

    socket.write "#{t}\n"

    puts "THREAD: #{t} --> [ #{socket.recv(1024).inspect} ]"

  end
end

threads.each { |th| th.join }

# Output: THREAD: 3 --> [ "0\r\n1\r\n2\r\n3\r\n4\r\n" ] 
```

这里的问题是，每个线程似乎都使用 socket.gets “监听”来自服务器的响应，因此任意线程将接收来自服务器的所有响应，正如您从输出中看到的那样。最好每个线程应该收到它自己的响应，输出不应该看起来像

```
THREAD: 3 --> [ "0\r\n1\r\n2\r\n3\r\n4\r\n" ] 
```

但更喜欢：

```
THREAD: 0 --> [ "0\r\n" ]
THREAD: 1 --> [ "1\r\n" ]
THREAD: 2 --> [ "2\r\n" ]
THREAD: 3 --> [ "3\r\n" ]
THREAD: 4 --> [ "4\r\n" ] 
```

这里有什么交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:52:23.680

您所有的线程都共享同一个套接字。您将消息写入套接字，然后所有 5 个线程都在等待数据可供读取。

根据另一端的行为，网络堆栈中的缓冲等可能会以一个块或多个块的形式返回。在您的特定情况下，数据出现在一个块中，一个线程碰巧很幸运。

要获得您想要的行为，您应该每个线程使用一个套接字。

# xml - 是否有任何开源工具可以从 URL 查看 XML？

> ID：12250931
> 
> 赞同：1
> 
> 时间：2012-09-03T15:52:19.560
> 
> 标签：xml, internet-explorer, notepad++

我刚刚下载了 Notepad++，并希望从 URL 中查看 XML。有谁知道是否可以使用 Notepad++ 做到这一点？如果不是，您能否建议任何可以做到这一点的开源应用程序？我的 Internet Explorer 真的很慢，在处理合理/大量的 XML 时开始停止。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:49:51.363

使用复制/粘贴来加载 XML 文件：

*   将 URL 复制到剪贴板
*   按下`Ctrl+o`触发 File=>Open 菜单
*   将 URL 粘贴到输入字段中，然后按`enter`

# mysql - 如何从 MySql 中的 Url 获取域名

> ID：12250933
> 
> 赞同：4
> 
> 时间：2012-09-03T15:52:22.170
> 
> 标签：mysql

> **可能重复：**
> [我们如何使用 MySQL 和正则表达式查找域名](https://stackoverflow.com/questions/3521094/how-we-can-find-domain-name-using-mysql-and-regular-expression)

我的数据库表有一个名为 url 的列，其中包含如下信息： [http://xyz.com/cat/index/?page=2](http://xyz.com/cat/index/?page=2) [http://www.google.com/webmaster.php](http://www.google.com/webmaster.php) [http://yahoo.com/ dsdsd/category.aspx](http://yahoo.com/dsdsd/category.aspx) 等

我只想获取他们的域名，例如：xyz.com google.com yahoo.com

我应该如何在mysql中编写查询以获得上述结果。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T16:23:00.933

Digital Point有人给了我答案

```
SELECT SUBSTRING_INDEX(REPLACE(REPLACE(url, "http://", ""), "www.", ""), '/', 1); 
```

# php - 通过向最后一个 li 添加一个 span 类来删除“li”边框的特定 php 逻辑

> ID：12250935
> 
> 赞同：0
> 
> 时间：2012-09-03T15:52:29.800
> 
> 标签：php

我有一个显示 li 元素的简单 for 循环。

```
for($rn = 1; $rn <= $total; $rn++){
 echo '<li>this is a li element</li>';

} 
```

$total 代表有多少 li。

li 向左浮动，每行显示 6 li，每个 li 有一个底部边框。

我想，使用php通过添加一个跨度类来从最后一行的li中删除边框。

这有点棘手，因为假设我有 15 行。

我需要一个 php 代码，它将从 15 中减去 12 并将无边框类添加到最后 3 li's。

**我的想法**是：将 $total 除以 6 并将结果四舍五入。15:6 = 2.5 向上取整，但记住较小的值 - 将是 2。

10 将 2 乘以 6 并从 15 中减去 12，得到 3 行。

**有任何想法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:56:43.300

模运算符`%`通过两个数相除产生余数。

```
15 % 6 == 3
$totalRows % $itemsPerRow 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:01:27.490

我会这样解决它：

```
for($rn = 1, $end = ( 0 == ( $temp = $total % 6) ? $total - 6 : $total - $temp ); $rn <= $total; $rn++) {
    if ($end < $rn) {
        // no border
    }
} 
```

基本上它检查它是否可以被6整除。如果没有休息，最后六个元素没有边框。如果有休息，则只有最后一行的元素没有边框。

优点是，它不会调用循环外的任何变量。

循环未经测试，计算已测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:01:53.947

```
$remainder = $total % 6; // Get your remainder, number of li on the last row.

for($rn = 1; $rn <= $total; $rn++){
    // If the the total minus the number of li's output is less than or equal to remainder your outputting the last row.
    if($total - $rn <= $remainder) 
    {
        echo '<li class=\'borderless\'>this is a li element</li>';
    }else{
        echo '<li>this is a li element</li>';
    }
} 
```

*   请注意，这是未经测试的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T16:09:14.733

```
$bottom = $total % 6;
$bottom = $bottom ? $total - $bottom : $total - 6;//calculate values in the last row
for($rn = 1; $rn <= $total; $rn++){
    $class =  $rn > $bottom ? ' class="span"' : '';//if rn is in the last row add span calss
    echo "<li$class>this is a li element</li>";

} 
```

# facebook - 在用户状态中集成 iframe

> ID：12250936
> 
> 赞同：1
> 
> 时间：2012-09-03T15:52:31.687
> 
> 标签：facebook, html, post, iframe, status

探索这个论坛上的晦涩帖子，我没有找到任何方便的答案。我正在用 HTML5 开发一个播放器小部件，我想添加一个“共享”功能，它会以与 soundcloud 相同的方式显示用户状态、可播放小部件，而不仅仅是一个链接。我希望它在状态更新中完全可以玩。是否可以在状态中发布 iframe 而不仅仅是文本/链接...？

# yii - Yii 在其他模型的 beforeSave() 中调用 beforeSave()

> ID：12250938
> 
> 赞同：3
> 
> 时间：2012-09-03T15:52:48.050
> 
> 标签：yii

我试图在模型的 beforeSave() 方法中保存另一个模型的记录。我希望 save() 方法在 Save() 之前调用另一个模型，但事实并非如此。是错误还是我错过了什么？这里有一些代码。

**运营模式**

```
public function beforeSave(){
    if(parent::beforeSave()){

        if($this->isNewRecord){
            $this->creation_date=$this->modification_date=time();
            $cur=Currencies::model()->find('LOWER(short)=?',array('usd'));
            if($cur->id!=$this->currency_id){
                $conv_cours=Currencies::model()->findByPk($this->currency_id);
                $this->ammount_usd=round(($this->ammount*$conv_cours->buy)/$cur->sell,4);
            }else{
                $this->ammount_usd=$this->ammount;
            }

        }else{
            $this->modification_date=time();
        }

        $opType=OperationType::model()->findByPk($this->operation_type);

        $log=new ActionLogs;
        $log->comment=Yii::app()->user->name.' добавил '.$opType->name;
        /*$log->logtime=time();
        $log->user_id=Yii::app()->user->id;*/
        $v=1;
        $log->save ();

        return true;

    }else{
        return false;

    }

} 
```

还有另一个模型 beforeSave()

```
 public function beforeSave(){
if(parent::beforeSave()){
    if($this->isNewRecord){
        $this->logtime=time();
        $this->user_id=Yii::app()->user->id;
    }
    return true;
}else{
    return false;
} 
```

} 谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T21:39:59.333

当您尝试保存活动记录时，我能想到 Yii 不调用 beforeSave 的唯一原因是它的验证失败。在您的保存调用之后尝试转储 $object->errors 或尝试使用 $object->save(FALSE) 保存它以跳过验证。像这样，我们可以将其作为原因消除。

# ios - Segues 和 viewDidLoad/viewDidUnload 方法

> ID：12250940
> 
> 赞同：3
> 
> 时间：2012-09-03T15:52:52.793
> 
> 标签：ios, memory-management, uistoryboard, uistoryboardsegue

我正在制作具有 2 个 UIViewControllers 的简单故事板应用程序，并且我正在使用模态 segue 在它们之间切换。每个 UIViewController 都有一个 UIButton，用于对另一个 UIViewController 执行 segue。在 viewDidLoad 方法中，我在每个 UIViewController 上为该 UIButton 的外观设置动画。我正在使用 Cross Dissolve Modal segue。

当我在第一个 UIViewController 上按下 UIButton 时，我导航到第二个 UIViewController 并执行动画并显示第二个 UIViewController。在我按下第二个 UIView 控制器上的 UIButton 后，显示第一个 UIViewController 并执行它的动画。一切看起来都很好，每当我导航到每个 UIViewController 时，都会调用 viewDidLoad 方法。这很棒。

我现在尝试将 Modal segue 类型从 Cross Dissolve 更改为 XCode Interface Builder 中默认提供的其他两种。我改为 Cover Vertical，一切正常，没有任何变化。**但是**当我尝试**Flip Horizo​​ntal Modal segue**时，我发现了一个问题。

执行翻转水平模态序列时，两个 UIViewControllers 上的 UIButton 都会显示，但**动画未执行**。我尝试调试，我确定正在执行动画命令，但没有显示动画。

所以这是我的第一个问题：**有谁知道这些类型的模态转场之间有什么区别可能导致我的动画不显示？**

其他问题与segues和内存管理的基本理论有关。当我执行 segue 并导航到某个 UIViewController 时，每次都会调用 viewDidLoad 方法。那么，这是否意味着每次执行 viewDidLoad 方法时我都会创建新的对象实例？

我还注意到**从未调用 viewDidUnload 方法**。那么，如果对上一个问题的回答是肯定的（每次 viewDidLoad 执行都会创建新的对象实例），这是否意味着我的 UIViewController 对象实例永远不会被卸载和删除？还是 ARC 在幕后进行垃圾收集？

如果有人可以解释故事板转场和内存管理/对象生命周期是如何工作的，以及为什么永远不会调用 viewDidUnload 方法，我将不胜感激。

* * *

**[编辑#1：在执行模态转场后尝试卸载 UIViewController]**

**[更新#1：不应该这样做，viewDidUnload 将被自动调用]**

我在附加到 UIButton 点击​​的 IBAction 中进行 segue。我已经编写了这段代码来执行模态搜索。

```
@try
{
    [self performSegueWithIdentifier:segueToPerform sender:self];
}
@catch (NSException *exception) 
{
    NSLog(@"Exception: %@", exception);
}
@finally
{
    [self viewDidUnload];
} 
```

我在@finally 块中手动调用了viewDidUnload，并且我检查了天气viewDidUnload 在运行时被调用，是的 - 它被调用了。

这是否意味着我设法卸载了我在使用另一个 UIViewController 的模态 segue 导航到它时创建的 UIViewController 对象并将其从内存中删除？

这种方法是否经常替代：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

因为上面这行将我返回到 UIViewController，我从中导航到当前 UIViewController，但这不符合我的需要，因为我需要从当前 UIViewController 到其他 UIViewController 执行新的转场（除了返回到我导航到当前的 UIViewController一）？

* * *

**[编辑#2：完成]**

最后，在为这些 UIView 创建单独的 XIB 文件后，我更改了实现模型并在单个 UIViewController 下加载了新的 UIView。我已将@dasblinkenlight 的答案标记为正确的答案，因为它包含许多有用的信息，并且关于该答案的讨论很好地回答了有关使用模态序列的一些疑问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T16:11:05.340

我不知道您问题第一部分的答案，但是一旦您了解了第二部分的答案，我相信您无论如何都会采用不同的解决方案。

> `viewDidLoad`每次都会调用方法。那么，这是否意味着每次`viewDidLoad`执行方法时我都会创建新的对象实例？

绝对地。“模态”segue 导致新视图完全遮盖旧视图，直到新视图关闭。如果您来回多次，您的代码将在当前视图下方累积一整个“堆栈”视图。

> 我还注意到`viewDidUnload`永远不会调用该方法。那么，如果对上一个问题的回答是肯定的（每次`viewDidLoad`执行都会创建新的对象实例），这是否意味着我的`UIViewController`对象实例永远不会被卸载和删除？

这是正确的，您创建的所有视图控制器仍然存在，准备好关闭其顶部的视图。

> 还是 ARC 在幕后进行垃圾收集？

ARC 不是垃圾收集器，它是一种引用计数机制，编译器有一点自动化。物体还在。

你应该改变你的代码来调用

```
[self dismissModalViewControllerAnimated:YES]; 
```

在第二个控制器中，而不是使用将您带回第一个控制器的模态转场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T01:57:21.970

我遇到了一个类似的问题，我有一个复杂的 VC 导航网络，结果使用 segues（没有 UINavigationController）占用了太多内存。您可能想看看这个问题/答案，看看我的最终解决方案。uerceg 和 dasblinkenlight 之间的对话帮助我找到了这个解决方案。

[Segues 并从内存中清除历史 ViewController](https://stackoverflow.com/questions/14109388/segues-and-clearing-historical-viewcontrollers-from-memory/14116040#14116040)

# ofbiz - 我可以使用我的公司名称而不是使用 ofbiz 徽标和名称吗

> ID：12250943
> 
> 赞同：0
> 
> 时间：2012-09-03T15:53:04.067
> 
> 标签：ofbiz

抱歉，这不是编程问题。我的公司正在寻求在 ofbiz 上做一些工作。我阅读了 apache 的许可证，但不确定将徽标更改为我们公司的徽标是否合法。

[http://www.apache.org/foundation/license-faq.html#WhatDoesItMEAN](http://www.apache.org/foundation/license-faq.html#WhatDoesItMEAN)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:03:17.200

是的你可以。没有什么能阻止你这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-09T16:52:11.917

是的，您可以使用 Visual Studio Code 编辑 java 和 html 代码以及 SVG 编辑器（例如 Adob​​e Photo shop）来编辑徽标。

# android - Android 摄像头：需要前置或后置摄像头

> ID：12250944
> 
> 赞同：7
> 
> 时间：2012-09-03T15:53:07.593
> 
> 标签：android, google-play, android-camera

我的应用需要一个相机才能工作。但是，它是后置摄像头还是前置摄像头都没有关系。

现在，我的清单中有这个：

```
<uses-feature android:name="android.hardware.camera"/> 
```

要需要前置摄像头，我知道我还可以添加以下内容：

```
<uses-feature android:name="android.hardware.camera.front"/> 
```

但我想支持所有具有任一摄像头的设备。有没有办法做到这一点？

例如，我想支持只有前置摄像头的 Nexus 7。但我也想只支持后置摄像头的设备。

根据我所做的一些研究，例如：

[http://code.google.com/p/android/issues/detail?id=35166](http://code.google.com/p/android/issues/detail?id=35166)

看来这是不可能的。

我认为解决此问题的一种方法是制作 2 个单独的 APK，一个带有 android.hardware.camera，一个带有 android.hardware.camera.front，并使用其[Multiple APK Support](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)将两者上传到 Google Play 。不过，我还没有测试过。

**有没有人找到推荐的方法来支持所有带有前置摄像头、后置摄像头或两者的设备，但不支持没有任何摄像头的设备？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:41:18.753

几个想法（没有明确的答案）：

a）我相信你是对的，目前没有很好的方法在 APK 上要求任何一个摄像头。

b）如果需要，您可以删除使用功能并在运行时检查相机。它会使用户体验更差，但它会起作用。

c) 您可以使用 use required="false" (http://developer.android.com/guide/topics/manifest/uses-feature-element.html)。希望 Google Market 优先使用此标志的应用程序。

c) 旁注。据我所知，大多数 Android 设备都有摄像头。因此，如果您使用解决方案 b) 或 c)，只有非常小的用户群会注意到差异

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T14:00:35.740

[自从它被回答以来，这已经改变](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#hw-features)了，您现在可以将它添加`uses-feature`到需要任何摄像头的清单中，如下所示：

```
<uses-feature android:name="android.hardware.camera.any" android:required="true" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-11T10:07:08.963

只是为了在这个讨论中添加我的 2 美分：

我取得了与在对 Juan Cortes 的评论中描述的 @Cat 相同的结果。

我测试这个的方法是使用 aapt（在[http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions-features](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions-features)中找到的测试说明），并寻找显式或隐式相机要求：

没有`<uses-feature>`标志，但需要`camera`许可： [![在此处输入图像描述](../Images/048f3e7de5a1e7e9c1028850b567369b.png)](https://i.stack.imgur.com/RzcII.png) 观察`uses-implied-feature`

仅使用`<uses-feature android:name="android.hardware.camera.any" android:required="false" />`： [![在此处输入图像描述](../Images/d4c02a92b0ab39df132f5898489e5618.png)](https://i.stack.imgur.com/F5SfE.png) 仍然暗示该应用程序始终需要相机。

两者都`<uses-feature android:name="android.hardware.camera.any" android:required="false" /><uses-feature android:name="android.hardware.camera" android:required="false" />`定义： [![在此处输入图像描述](../Images/3858979c4052c7e1dc4512792c5bed71.png)](https://i.stack.imgur.com/qRzxU.png) 没有更多的隐含特征。

希望这有助于有人描述他们自己的应用程序。

# grails - Grails：如何从控制器逻辑返回错误消息（即不是源自域属性验证）？

> ID：12250947
> 
> 赞同：4
> 
> 时间：2012-09-03T15:53:29.177
> 
> 标签：grails, view, error-handling, controller

使用域或命令对象验证不能总是合理地检查错误，例如用户输入错误。

例如，在创建“忘记密码”功能时，如果用户输入数据库中不存在的用户名，我想显示一条足够的消息。所以控制器动作做这样的事情

```
...
def user = User.find{name==uname}
if(!user) {
    // user not found in db, output error and render view again
    render view: 'forgotPassword'
    return
}
// do reset password stuff
... 
```

我应该怎么做才能在`<g:hasErros>`标签内的视图中显示错误？

`flash.message`（因为生成的控制器/视图这样做）对我来说似乎不正确，因为我不仅显示信息消息，而且显示错误消息。这就是为什么我认为该消息应该由`<g:hasErros>`标签处理并像域验证错误一样显示。（对用户来说，这是相同的反馈级别：“由于输入错误而无法工作”。

创建`@Validateable`命令对象似乎也不对。恕我直言，根据数据库检查值实际上不是命令对象中验证的责任吗？或者是吗？然后它对我来说似乎有点太复杂了。

那么最好的方法是什么？其他框架（例如 Wicket）提供了不同的方法`error(String msg)`，例如`info(String msg)`允许轻松处理视图中的反馈消息。Grails 中是否有类似的概念，但我还没有找到？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T15:59:43.480

`flash`只是一个地图，你可以在里面放任何你想要的东西——字符串、数字、对象等。它很方便，因为它只持续一个请求，所以它只会暂时污染会话。生成的 GSP 中的约定是使用`message`密钥，但这只是一个约定。

如果要存储另一条消息，请将其存储在不同的密钥中：

```
flash.warning = '...' 
```

或者

```
flash.error = '...' 
```

并像其他消息一样在 GSP 中检索它。

# html - CSS链接文件在IE中不起作用

> ID：12250951
> 
> 赞同：0
> 
> 时间：2012-09-03T15:53:35.057
> 
> 标签：html, css, internet-explorer

我链接了很多 CSS 文件，所有文件都可以工作，除了一个文件，它是这样嵌入的：

```
<link rel="stylesheet" type="text/css" href="css/MY_offline_name_name.css"> 
```

这适用于所有浏览器，除了 Internet Explorer <= 9。但是，如果我将 CSS 嵌入`style`标签中，一切正常。发生这种情况的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:54:36.033

问题在于链接到文档的 css 文件数量：我们使用它来测试 UI，我们将每个 UI 分隔在单独的 css 文件中，然后我们将其聚合到一个索引文件中，问题在于**Internet Explorer 中链接的文件的最大数量一个文件是32！**

[http://acidmartin.wordpress.com/2008/11/25/the-32-external-css-files-limitation-of-internet-explorer-and-more/](http://acidmartin.wordpress.com/2008/11/25/the-32-external-css-files-limitation-of-internet-explorer-and-more/)

[http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/ad1b6e88-bbfa-4cc4-9e95-3889b82a7c1d/](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/ad1b6e88-bbfa-4cc4-9e95-3889b82a7c1d/)

# html5-canvas - 使用 WebGL 绘制图像

> ID：12250953
> 
> 赞同：12
> 
> 时间：2012-09-03T15:53:35.117
> 
> 标签：html5-canvas, webgl

请任何人解释如何在 WebGL 画布上绘制图像？目前，在常规的“2d”画布上，我正在使用这个：

```
var canvas = document.getElementById("canvas");
var cxt = canvas.getContext('2d');

img.onload = function() {
    cxt.drawImage(img, 0, 0, canvas.width, canvas.height);
}
img.src = "data:image/jpeg;base64," + base64var; 
```

使用 WebGL，您似乎必须使用纹理等。谁能解释我将如何为 WebGL 调整此代码？谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-04T17:32:22.793

如果由我决定，我会用一个单位四边形和一个像这样的矩阵来做

鉴于这些着色器

顶点着色器

```
attribute vec2 a_position;

uniform mat3 u_matrix;

varying vec2 v_texCoord;

void main() {
   gl_Position = vec4(u_matrix * vec3(a_position, 1), 1);

   // because we're using a unit quad we can just use
   // the same data for our texcoords.
   v_texCoord = a_position;  
} 
```

片段着色器

```
precision mediump float;

// our texture
uniform sampler2D u_image;

// the texCoords passed in from the vertex shader.
varying vec2 v_texCoord;

void main() {
   gl_FragColor = texture2D(u_image, v_texCoord);
}
</script> 
```

我会创建一个单位四边形，然后填写一个 3x3 矩阵以在需要的位置进行平移、旋转和缩放

```
 var dstX = 20;
  var dstY = 30;
  var dstWidth = 64;
  var dstHeight = 64;

  // convert dst pixel coords to clipspace coords      
  var clipX = dstX / gl.canvas.width  *  2 - 1;
  var clipY = dstY / gl.canvas.height * -2 + 1;
  var clipWidth = dstWidth  / gl.canvas.width  *  2;
  var clipHeight = dstHeight / gl.canvas.height * -2;

  // build a matrix that will stretch our
  // unit quad to our desired size and location
  gl.uniformMatrix3fv(u_matrixLoc, false, [
      clipWidth, 0, 0,
      0, clipHeight, 0,
      clipX, clipY, 1,
    ]); 
```

```
"use strict";

window.onload = main;

function main() {
  var image = new Image();
  // using a dataURL because stackoverflow
  image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAM9JREFUeNrs2+EJgzAQBtBccTIXcQ8HcA8XcbV0gjZiONKS9/1VAnl43KExaq2lJxHRt0B/4tvF1v5eZfIAAAAAAICZE60+2erz53EN3cC2r11zghIAAAAAAAAzzwGllJ/u89lzghIAAAAAAAATZ8nus71zRPb6SgAAAAAAAJgDnif7fUH2+koAAAAAAACYA/Jy4/u9OUAJAAAAAACAMYkb9/z1OcHzuJwTBAAAAAAAAB7OAa0+v+3r0P8GW33eEwAAAAAAAAB8zBsAAP//AwB6eysS2pA5KAAAAABJRU5ErkJggg==";  // MUST BE SAME DOMAIN!!!
  image.onload = function() {
    render(image);
  }
}

function render(image) {
  // Get A WebGL context
  var canvas = document.getElementById("c");
  var gl = canvas.getContext("webgl");
  if (!gl) {
    return;
  }

  // setup GLSL program
  var program = webglUtils.createProgramFromScripts(gl, ["2d-vertex-shader", "2d-fragment-shader"]);
  gl.useProgram(program);

  // look up where the vertex data needs to go.
  var positionLocation = gl.getAttribLocation(program, "a_position"); 

  // look up uniform locations
  var u_imageLoc = gl.getUniformLocation(program, "u_image");
  var u_matrixLoc = gl.getUniformLocation(program, "u_matrix");

  // provide texture coordinates for the rectangle.
  var positionBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
      0.0,  0.0,
      1.0,  0.0,
      0.0,  1.0,
      0.0,  1.0,
      1.0,  0.0,
      1.0,  1.0]), gl.STATIC_DRAW);
  gl.enableVertexAttribArray(positionLocation);
  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

  var texture = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, texture);

  // Set the parameters so we can render any size image.
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

  // Upload the image into the texture.
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);

  var dstX = 20;
  var dstY = 30;
  var dstWidth = 64;
  var dstHeight = 64;

  // convert dst pixel coords to clipspace coords      
  var clipX = dstX / gl.canvas.width  *  2 - 1;
  var clipY = dstY / gl.canvas.height * -2 + 1;
  var clipWidth = dstWidth  / gl.canvas.width  *  2;
  var clipHeight = dstHeight / gl.canvas.height * -2;

  // build a matrix that will stretch our
  // unit quad to our desired size and location
  gl.uniformMatrix3fv(u_matrixLoc, false, [
      clipWidth, 0, 0,
      0, clipHeight, 0,
      clipX, clipY, 1,
    ]);

  // Draw the rectangle.
  gl.drawArrays(gl.TRIANGLES, 0, 6);
}
```

```
canvas { 
  border: 1px solid black;
}
```

```
<script src="//webglfundamentals.org/webgl/resources/webgl-utils.js"></script>
<canvas id="c"></canvas>  
<!-- vertex shader -->
<script id="2d-vertex-shader" type="x-shader/x-vertex">
attribute vec2 a_position;

uniform vec2 u_resolution;
uniform mat3 u_matrix;

varying vec2 v_texCoord;

void main() {

   gl_Position = vec4(u_matrix * vec3(a_position, 1), 1);
   v_texCoord = a_position;
}
</script>
<!-- fragment shader -->
<script id="2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;

// our texture
uniform sampler2D u_image;

// the texCoords passed in from the vertex shader.
varying vec2 v_texCoord;

void main() {
   gl_FragColor = texture2D(u_image, v_texCoord);
}
</script>
```

[这里有一些文章将解释矩阵数学](http://webglfundamentals.org/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-12T21:34:09.697

如果有帮助，这是一个独立的脚本，可以满足您的需求。您需要提供的只是 image.jpg。

```
<canvas id="cvs" width="1024" height="768"></canvas>
<script>
    var img, tex, vloc, tloc, vertexBuff, texBuff;

    var cvs3d = document.getElementById('cvs');
    var ctx3d = cvs3d.getContext('experimental-webgl');
    var uLoc;

    // create shaders
    var vertexShaderSrc = 
    "attribute vec2 aVertex;" +
    "attribute vec2 aUV;" + 
    "varying vec2 vTex;" +
    "uniform vec2 pos;" +
    "void main(void) {" +
    "  gl_Position = vec4(aVertex + pos, 0.0, 1.0);" +
    "  vTex = aUV;" +
    "}";

    var fragmentShaderSrc =
    "precision highp float;" +
    "varying vec2 vTex;" +
    "uniform sampler2D sampler0;" +
    "void main(void){" +
    "  gl_FragColor = texture2D(sampler0, vTex);"+
    "}";

    var vertShaderObj = ctx3d.createShader(ctx3d.VERTEX_SHADER);
    var fragShaderObj = ctx3d.createShader(ctx3d.FRAGMENT_SHADER);
    ctx3d.shaderSource(vertShaderObj, vertexShaderSrc);
    ctx3d.shaderSource(fragShaderObj, fragmentShaderSrc);
    ctx3d.compileShader(vertShaderObj);
    ctx3d.compileShader(fragShaderObj);

    var progObj = ctx3d.createProgram();
    ctx3d.attachShader(progObj, vertShaderObj);
    ctx3d.attachShader(progObj, fragShaderObj);

    ctx3d.linkProgram(progObj);
    ctx3d.useProgram(progObj);

    ctx3d.viewport(0, 0, 1024, 768);

    vertexBuff = ctx3d.createBuffer();
    ctx3d.bindBuffer(ctx3d.ARRAY_BUFFER, vertexBuff);
    ctx3d.bufferData(ctx3d.ARRAY_BUFFER, new Float32Array([-1, 1, -1, -1, 1, -1, 1, 1]), ctx3d.STATIC_DRAW);

    texBuff = ctx3d.createBuffer();
    ctx3d.bindBuffer(ctx3d.ARRAY_BUFFER, texBuff);
    ctx3d.bufferData(ctx3d.ARRAY_BUFFER, new Float32Array([0, 1, 0, 0, 1, 0, 1, 1]), ctx3d.STATIC_DRAW);

    vloc = ctx3d.getAttribLocation(progObj, "aVertex"); 
    tloc = ctx3d.getAttribLocation(progObj, "aUV");
    uLoc = ctx3d.getUniformLocation(progObj, "pos");

    img = new Image();
    img.src = "image.jpg";

    img.onload = function(){
        tex = ctx3d.createTexture();
        ctx3d.bindTexture(ctx3d.TEXTURE_2D, tex);
        ctx3d.texParameteri(ctx3d.TEXTURE_2D, ctx3d.TEXTURE_MIN_FILTER, ctx3d.NEAREST);
        ctx3d.texParameteri(ctx3d.TEXTURE_2D, ctx3d.TEXTURE_MAG_FILTER, ctx3d.NEAREST);
        ctx3d.texImage2D(ctx3d.TEXTURE_2D, 0,  ctx3d.RGBA,  ctx3d.RGBA, ctx3d.UNSIGNED_BYTE, this);

        ctx3d.enableVertexAttribArray(vloc);
        ctx3d.bindBuffer(ctx3d.ARRAY_BUFFER, vertexBuff);
        ctx3d.vertexAttribPointer(vloc, 2, ctx3d.FLOAT, false, 0, 0);

        ctx3d.enableVertexAttribArray(tloc);
        ctx3d.bindBuffer(ctx3d.ARRAY_BUFFER, texBuff);
        ctx3d.bindTexture(ctx3d.TEXTURE_2D, tex);
        ctx3d.vertexAttribPointer(tloc, 2, ctx3d.FLOAT, false, 0, 0);

        ctx3d.drawArrays(ctx3d.TRIANGLE_FAN, 0, 4);
    };
</script> 
```

# mysql - 是否可以在 SQL 文件中使用 IF 语句来检查是否选择了数据库？

> ID：12250955
> 
> 赞同：3
> 
> 时间：2012-09-03T15:53:52.020
> 
> 标签：mysql, sql

假设我有一个`commands.sql`包含 SQL 命令的 SQL 文件。目的是用户可以使用[此处](http://dev.mysql.com/doc/refman/5.5/en/batch-commands.html)`SOURCE`描述的命令运行文件中的命令。但是假设用户已经选择了一个数据库。如果用户没有选择数据库，那么他们会看到大量的“No database selected”错误。

有没有办法使用`IF`语句来检查是否选择了数据库，如

```
IF a database is selected THEN
    (statements)
ELSE
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'You need to select a database';
END IF; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:10:58.490

由于脚本在遇到第一个错误时中止（除非使用该`force`选项调用），因此可以使用准备好的语句实现一定程度的流控制：

```
SET @sql := IF(
  DATABASE() IS NULL,
  "SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'You need to select a database'",
  "DO SELECT NULL"
);

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

（但是，我认为该`SIGNAL`命令不能通过准备好的语句执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:11:53.567

`IF ... THEN ...`只能用于存储过程或函数，不能用于简单查询。您必须创建一个存储过程并从您的 SQL 文件中运行它。

要检查是否选择了数据库，您可以执行以下操作：

```
SELECT @is_selected:=database();
IF @is_selected IS NULL THEN ... 
```

# c# - 是否有任何功能可以擦除最后绘制的曲线？

> ID：12250956
> 
> 赞同：2
> 
> 时间：2012-09-03T15:53:56.303
> 
> 标签：c#, .net, drawing

我在 PictureBoxcontrol 中的图像上绘制了一个矩形。

对于绘图，我使用此功能：

```
Rectangle rect = contourDetected.BoundingRectangle;

Bitmap bmpOriginalImage = new Bitmap(pbxOriginalImage.Image);
img.Draw(rect, new Bgr(Color.Aquamarine), 2);

pbxOriginalImage.Image = img.ToBitmap(); 
```

是否有任何功能可以擦除最后绘制的曲线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:56:10.250

没有这样的功能。`Bitmap`不跟踪它是如何进入特定状态的。它只是跟踪像素缓冲区。

您必须编写自己的工具来撤消绘图。记住之前版本的位图，如果需要返回，只需恢复之前的版本即可。

# php - Wordpress 查询帖子分类

> ID：12250957
> 
> 赞同：1
> 
> 时间：2012-09-03T15:53:56.803
> 
> 标签：php, wordpress, taxonomy

我目前在我的 wordpress 网站上有一个基于复选框的搜索和过滤器。

基本上它使用这个 wp_query

```
$queryObject = new WP_Query(array("post_type"=>'toy','posts_per_page'=>999999,
    'category__and' => $_POST['myListOfCategories']));

```

我想摆脱使用类别（因为它使使用博客变得痛苦）

因此，我现在使用自定义分类法设置了所有内容，并注意到没有“分类法__and”。

有谁知道使用 WP_Query 以相同的方式使用分类法搜索帖子的方法 category__and 和工作？

例如，我传递了多个分类 ID，它只返回所有链接的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:02:57.207

来自[http://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters)

你应该可以使用这样的东西；

```
$args = array(
    'tax_query' => array(
        'relation' => 'AND',
        array(
            'taxonomy' => 'movie_genre',
            'field' => 'slug',
            'terms' => array( 'action', 'comedy' )
        ),
        array(
            'taxonomy' => 'actor',
            'field' => 'id',
            'terms' => array( 103, 115, 206 ),
            'operator' => 'NOT IN'
        )
    )
);
$query = new WP_Query( $args ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:08:53.483

您在 Wordpress 的 Query_posts 中通过了多个分类

请参阅下面的 URL 这对您很有帮助：-

[https://wordpress.stackexchange.com/questions/25999/how-to-pass-url-parameters-for-advanced-taxonomy-queries-with-multiple-terms-for](https://wordpress.stackexchange.com/questions/25999/how-to-pass-url-parameters-for-advanced-taxonomy-queries-with-multiple-terms-for)

[https://wordpress.stackexchange.com/questions/10713/wp-3-1-getting-tax-query-to-work-in-query-posts](https://wordpress.stackexchange.com/questions/10713/wp-3-1-getting-tax-query-to-work-in-query-posts)

[在 Wordpress 2.8 中查询多个自定义分类术语？](https://stackoverflow.com/questions/1155565/query-multiple-custom-taxonomy-terms-in-wordpress-2-8)

或尝试一下

```
query_posts( array(
  'tax_query' => array(
    array(
      'taxonomy' => 'tax1',
      'field' => 'slug',
      'terms' => array('term1', 'term2'),
      'operator' => 'OR'
    ),
    array(
      'taxonomy' => 'tax2',
      'field' => 'slug',
      'terms' => array('term3', 'term4'),
      'operator' => 'AND'
    ),
) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:20:08.330

在其他海报的帮助下，这是我问题的最终答案：

```
$queryObject = new WP_Query(array("post_type"=>'toy','posts_per_page'=>10,'tax_query' => array(
        大批（
            '分类学' => 'toy_cats',
            '字段' => 'id',
            '术语' => 数组（14,20,39,42），
            '操作员' => 'AND' )
    ）））；

```

上面的代码将只显示具有“玩具”帖子类型的帖子，属于分类“toy_cats”并分配给所有以下术语 id 的 14 AND 20 AND 39 AND 42

希望这对其他人有帮助。

# javascript - Highcharts 默认颜色在饼图和列上不一样？

> ID：12250962
> 
> 赞同：0
> 
> 时间：2012-09-03T15:54:13.090
> 
> 标签：javascript, jquery, highcharts

为什么饼图和柱形图的 Higcharst 默认列不同？你可以在这里看到：http: [//jsfiddle.net/RqvU4/](http://jsfiddle.net/RqvU4/)即约翰在列和派上有不同的颜色？如何在不手动定义颜色的情况下使其相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:39:02.183

它们不是相同的颜色，因为`highcharts`为每个添加了不同的颜色`serie`。[您可以在此处](http://api.highcharts.com/highstock#colors)
查看默认颜色。

您可以`color`手动设置每个系列，如下所示。

```
{
    type: 'pie',
    name: 'Total consumption',
    data: [{
        name: 'Jane',
        color: '#4572A7',
        y: 13
    }, {
        name: 'John',
        color: '#AA4643',
        y: 23                    
    }, {
        name: 'Joe',
        color: '#89A54E',
        y: 19
    }],
    center: [100, 50],
    size: 100,
    showInLegend: false,
    dataLabels: {
        enabled: false
    }
} 
```

[演示](http://jsfiddle.net/RqvU4/1/)

# java - 在 mongodb 中使用 ReflectionDBObject 类插入 java 对象？

> ID：12250969
> 
> 赞同：5
> 
> 时间：2012-09-03T15:54:45.523
> 
> 标签：java, mongodb, database

我正在尝试将 java 中用户定义类的对象插入到 mongodb 集合中。

我的课是这样的：

```
class C extends ReflectionDBObject
{
    int i;
    C(){}
} 
```

插入代码是

```
Mongo m = new Mongo("localhost");
com.mongodb.DB appdb = m.getDB("appdb");
DBCollection cmpcol = appdb.getCollection("feed");
DBObject bdbo = new BasicDBObject();
C c = new C();
c.i = 1;
bdbo.put("a",c);
cmpcol.insert(bdbo); 
```

但是在插入时，对象在数据库中由空值表示。我在做什么错？？我不想使用 gson 或 morphia。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T02:53:40.120

Java 驱动程序在 ReflectionDBObject 类上使用 getter 和 setter 方法（不是变量）来确定要包含在文档中的属性。

因此，您的代码应该是：

```
public class C extends ReflectionDBObject
{
    int i;

    public int geti()
    {
        return i;
    }

    public void seti(int i)
    {
        this.i = i;
    }
} 
```

这将在集合中产生如下对象：

```
{ "_id" : ObjectId("504567d903641896aa40bde6"), "a" : { "_id" : null, "i" : 1 } } 
```

我不知道摆脱`"_id" : null`子文档中的 的方法。这是 ReflectionDBObject 类的一个特征。子文档通常没有 _id，但如果您想要子文档的非空 _id，您可以将以下代码放入您的 C() 构造函数中：

```
public C()
{
    set_id(ObjectId.get());
} 
```

这将产生如下对象：

```
{ 
  "_id" : ObjectId("504568ff0364c2a4a975b375"), 
  "a" : { "_id" : ObjectId("504568ff0364c2a4a975b374"), "i" : 1 } 
} 
```

最后，请注意属性“i”的`geti()`and`seti()`约定有点不寻常。JavaBeans 规范说您需要`getI()`和`setI()`方法拥有一个属性“i”。但是，MongoDB 驱动程序不适用于 ReflectionDBObject 类。

# java - Z3 使用 JNA 引发无效内存访问

> ID：12250979
> 
> 赞同：3
> 
> 时间：2012-09-03T15:55:32.667
> 
> 标签：java, c, java-native-interface, jna, z3

我在 java 中使用带有 jna 的 Z3 C api。我经常获得无效的内存访问，但仅限于 windows (.dll) 和 mac os (.dylib) 库。当我使用 linux one (.so) 时不会发生这种情况。

我暂时解决了这个问题`dec_ref`，从不为 ast 和所有其他对象调用过程（我仍然调用`inc_ref`procs，并且`mk_context_rc`在开始时使用 ）。当然，这种解决方案是不可持续的。

我想这是由于某处的内存管理。即使我只是使用`mk_context`它仍然会崩溃。

在线程[JNA 简单函数调用适用于 linux (x64) 但不适用于 windows (x86)](https://stackoverflow.com/questions/5856149/jna-simple-function-call-works-on-linux-x64-but-not-on-windows-x86)用户遇到了类似的问题，事实证明这是由于一些编译配置。

这是我得到的例外（在 Mac OS X 10.6.8 上）

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x000000000000000c
Crashed Thread:  0  Dispatch queue: com.apple.main-thread 
```

这就是失败的痕迹

```
 Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   libz3.dylib                     0x00000001250d4d64 unsigned int ast_array_hash<expr>(expr* const*, unsigned int, unsigned int) + 244
1   libz3.dylib                     0x00000001250cb16a ast_manager::register_node_core(ast*) + 36
2   libz3.dylib                     0x00000001250cbeae ast_manager::mk_app_core(func_decl*, unsigned int, expr* const*) + 134
3   libz3.dylib                     0x00000001250cc30d ast_manager::mk_app(func_decl*, unsigned int, expr* const*) + 749
4   libz3.dylib                     0x000000012528c194 map_proc::reconstruct(app*) + 214
5   libz3.dylib                     0x00000001254830b8 void for_each_expr_core<qe::lift_foreign_vars, obj_mark<expr, bit_vector, default_t2uint<expr> >, false, false>(qe::lift_foreign_vars&, obj_mark<expr, bit_vector, default_t2uint<expr> >&, expr*) + 760
6   libz3.dylib                     0x00000001254832c9 qe::lift_foreign_vars::lift(obj_ref<expr, ast_manager>&) + 61
7   libz3.dylib                     0x00000001254833a6 qe::datatype_plugin::simplify(obj_ref<expr, ast_manager>&) + 92
8   libz3.dylib                     0x000000012546b1a7 qe::quant_elim_plugin::check(unsigned int, app* const*, expr*, obj_ref<expr, ast_manager>&, bool, ref_vector<app, ast_manager>&, qe::def_vector*) + 535
9   libz3.dylib                     0x000000012546b8f9 qe::quant_elim_new::eliminate_block(unsigned int, app* const*, obj_ref<expr, ast_manager>&, ref_vector<app, ast_manager>&, bool, qe::def_vector*) + 445
10  libz3.dylib                     0x000000012545f2cb qe::quant_elim_new::eliminate_exists(unsigned int, app* const*, obj_ref<expr, ast_manager>&, ref_vector<app, ast_manager>&, bool, qe::def_vector*) + 67
11  libz3.dylib                     0x0000000125462170 qe::quant_elim_new::eliminate_exists_bind(unsigned int, app* const*, obj_ref<expr, ast_manager>&) + 88
12  libz3.dylib                     0x000000012545c0ba qe::expr_quant_elim::elim(obj_ref<expr, ast_manager>&) + 1012
13  libz3.dylib                     0x000000012545cb75 qe::expr_quant_elim::operator()(expr*, expr*, obj_ref<expr, ast_manager>&) + 113
14  libz3.dylib                     0x000000012548b993 qe_tactic::imp::operator()(ref<goal> const&, sref_buffer<goal>&, ref<model_converter>&, ref<proof_converter>&, obj_ref<dependency_manager<ast_manager::expr_dependency_config>::dependency, ast_manager>&) + 783
15  libz3.dylib                     0x00000001255debfa cleanup_tactical::operator()(ref<goal> const&, sref_buffer<goal>&, ref<model_converter>&, ref<proof_converter>&, obj_ref<dependency_manager<ast_manager::expr_dependency_config>::dependency, ast_manager>&) + 14
16  libz3.dylib                     0x00000001255d5e3d exec(tactic&, ref<goal> const&, sref_buffer<goal>&, ref<model_converter>&, ref<proof_converter>&, obj_ref<dependency_manager<ast_manager::expr_dependency_config>::dependency, ast_manager>&) + 109
17  libz3.dylib                     0x0000000125070ed8 _tactic_apply + 680
18  libz3.dylib                     0x00000001250711d9 Z3_tactic_apply + 105
19  jna4404318687023840668.tmp      0x000000010a00cd1c ffi_call_unix64 + 76
20  jna4404318687023840668.tmp      0x000000010a00c884 ffi_call + 644
21  jna4404318687023840668.tmp      0x000000010a003ca5 Java_com_sun_jna_Native_ffi_1prep_1cif + 1605
22  jna4404318687023840668.tmp      0x000000010a004282 Java_com_sun_jna_Native_invokePointer + 34
23  ???                             0x00000001031cfd2e 0 + 4347198766
24  ???                             0x00000001031cd658 0 + 4347188824
25  ???                             0xffb89c44ff5c4272 0 + 18426649695542329970 
```

也许他们可以帮助理解我做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:19:35.760

根据您问题中的评论，您似乎正在使用仅在新 Z3 API 中可用的策略和其他功能。从 4.0 版开始，引用计数是 Z3 API 中管理内存的默认方法。Z3 API 仍然支持旧的内存管理策略（在使用 API`Z3_mk_context`而不是时启用`Z3_mk_context_rc`）。但是，旧的内存管理策略不适用于4.0 版中引入的新对象（例如`Solvers`, , ...）。`Tactics`

Z3 发行版包含一个 Python API。`python`Python API 的源代码位于Z3 发行版的子目录中。它演示了如何将 Z3 API 集成到 Python 等托管语言中。我相信可以使用类似的方法将 Z3 API 集成到 Java 中。这个想法是用 Java 对象包装器包装每个 Z3 对象。引用计数器应在构造函数中递增，并在 Java 垃圾收集器回收包装器时递减。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:24:39.777

引发异常是因为我的主程序和 java 垃圾收集器同时访问 Z3。我解决了只是使`Library`对象线程安全，用方法[Native.synchronizedLibrary包装它](http://twall.github.com/jna/3.4.2/javadoc/com/sun/jna/Native.html#synchronizedLibrary%28com.sun.jna.Library%29)

# php - 如何为每个用户设置用户生成内容的数量限制

> ID：12250985
> 
> 赞同：1
> 
> 时间：2012-09-03T15:55:49.547
> 
> 标签：php, database, security, limit, user-generated-content

在讨论板、图像托管等应用程序中实施用户限制的最佳方法是什么？

假设我们要为 StackOverflow 设置限制。匿名用户应该能够每 12 小时发布 50 个问题，注册用户每 12 小时可以发布 100 个问题。

我考虑过创建一个数据库并存储有关 IP/用户及其帖子的信息。数据将在 12 小时后被删除。

但是，这种解决方案很容易被黑客入侵。单个 IP 不应产生超过 100 个问题，但如果一个用户在同一个 IP 上创建多个帐户怎么办？每个帐户都有自己的限制，因此用户可以生成无限量的问题。

我将不得不限制每个 IP 的帐户数量（学校/其他有很多用户和单个 IP 的地方呢？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:40:33.773

我可以在这个话题上写几个月。这是一个超级难的问题，没有一颗银弹就能解决……如果这对你来说是一个真正的问题，你会在前进的过程中一遍又一遍地解决它。

如果在您的网站上放置大量内容是有价值的，那么随着您的扩展，坏人会发现这一点并绕过您的防御。你需要看看他们在做什么，以不同的方式适应和解决问题。这就是 GMail 垃圾邮件小组仍然存在的原因。:) 那支球队的财大气粗，聪明的女孩/伙计们。如果它是“可解决的”，他们现在应该已经解决了。

Doing something like what you describe above is a great start. I would also invest in instrumentation & push the data off to a platform where you can analyze it after the fact (ex: a Hadoop cluster). This way you can study the livesite traffic to see if you have a problem and, if so, learn about how they are doing it so you can adapt.

Welcome to the Hotel California...where you can check out anytime you like but you can never leave.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:02:28.740

大多数系统对未经身份验证的用户使用基于 IP 的 IP，对经过身份验证的用户使用基于每个帐户的 IP。如果人们要注册多个帐户以规避您的安全性，那么您可以使用验证码来删除机器人和/或在新帐户被允许发布之前为新帐户设置一个冷静期，甚至可以使用基于 ip 的帐户，直到帐户至少24 小时前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T16:02:52.537

你已经回答了你的问题，如果我是你，我会做以下事情： 1\. 限制每个 IP 创建的帐户数量 2\. 设置一个数据库来维护过去 12 小时内创建的内容的记录或计数器 3\. 但是对于客人可能很棘手，您可以使用 IP+cookies 来跟踪用户的活动，但是如果单个代理后面有很多用户，则可能会出现问题。为此，要么你必须牺牲你的规则，要么变得严格。

当我使用代理时，我看过很多网站，他们说你已经访问过这个网站，但我从来没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T16:26:48.407

这不会解决 100% 的问题，并且可能会带来其他问题。

与其使用完全匿名的用户和注册用户并检查 IP，匿名**用户应在每次发布问题时提供工作电子邮件作为验证和临时标识符**（不会公开显示）。

当他们发布问题时，它将与电子邮件一起保存，并且**他们应该在邮箱中收到问题激活链接**。

如果他们单击电子邮件中的链接，**则会激活并发布问题**，因此电子邮件服务器作为临时标识符而不是客户端 IP。

好吧，仍然有可能有些人可能会使用 10 个不同的电子邮件帐户并向您发送垃圾邮件，甚至可能会吓跑一些人。

# c# - 如何记录和检索 Azure 辅助角色异常？

> ID：12250989
> 
> 赞同：1
> 
> 时间：2012-09-03T15:56:00.803
> 
> 标签：c#, exception, logging, azure, azure-worker-roles

我有一个 Azure 的免费帐户（90 天试用），但我发现我的工作角色出错了。我没有启用任何监控功能，因为我相信它们要花钱。

有什么方法可以让我记录错误并将它们存储在可以检索它们的地方，而无需将我的帐户升级为付费帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-07T15:01:19.687

您可以在辅助角色 OnStart() 方法中为未处理的异常附加事件。

```
 public override bool OnStart()
    {
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

        bool result = base.OnStart();

        Trace.TraceInformation("ReceiverRole has been started");

        return result;
    }

    private void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Trace.TraceError("Unhandled exception in worker role: {0}", e.ExceptionObject);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:29:29.760

What I've found myself that is was quite time consuming to implement the Azure Diagnostics, and the best way so far, was to launch the Azure Emulator on my machine, and see what error's it shows.

What You do, is simple set up Your Azure project as startup and run it. Or right click on the Azure project and select : Debug -> Start New Instance

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T16:24:23.187

查看（[Windows Azure 诊断](https://msdn.microsoft.com/en-us/library/azure/gg433048.aspx)），它允许您为您的工作角色收集诊断数据（跟踪日志、事件日志、性能计数器等）。根据配置，此诊断数据可以持久保存到 Windows Azure 表存储中。您可以使用任何存储资源管理器查看诊断数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T21:21:13.880

瘦身便宜的方法是添加到角色错误处理程序，将带有堆栈的异常内容发送到 StorageAccount 表。您可以使用云存储浏览器查看表内容以查看异常的详细信息。随着时间的推移，这可能会变得成熟，有一个很好的“内部”应用程序，可以将表格内容下载到 SS 中，并创建一个可以浏览错误的智能客户端。

我以一种可以设置详细程度并通过 UTC 处理时间戳的方式实现了这个系统。日志记录是在一个单独的工作角色中完成的，以便“生产”角色发布到一个队列，这对于失败的角色来说处理起来要快得多。

# html - 最初如何将进度条设置为不可见，然后单击时出现？

> ID：12250990
> 
> 赞同：0
> 
> 时间：2012-09-03T15:56:03.607
> 
> 标签：html

我有一些 h 和 img 元素，它们是 li 的子元素。当用户点击 li 我想隐藏这些并显示一个进度条。我的项目出现/消失，但不知道如何将进度条设置为最初不显示。

这是代码：

```
 <li id="li1"">
    <img id = "track_image" src="image.jpg" />
    <h1 id = "track_title">Title</h1>
    <h2 id = "artist_name">Name"</h2>
    <audio id="audio1"></audio>
    div id="progressBar"><span id="progress"></span></div>
    </li>

function audioClick(evt, listElementId, audioId, clip) {
    var listElement = document.getElementById(listElementId);
    var title = listElement.getElementsByTagName("h1")[0];
    hideOrShowElement(title);
    var artist = listElement.getElementsByTagName("h2")[0];
    hideOrShowElement(artist);
    var date = listElement.getElementsByTagName("h3")[0];
    hideOrShowElement(date);

    var audio = document.getElementById(audioId);
    if (audio.paused) {
        audio.src = clip;
        audio.play();
    }
    else {
        audio.pause();
        audio.currentTime = 0;
    }
}

function hideOrShowElement(element) {
    if(element.style.display == 'none')
        element.style.display = 'block';
    else
        element.style.display = 'none';
} 
```

我想在音频播放时添加进度条，所以想在这里合并进度条

[http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html#articlecontentAdobe_numberedheader_2](http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html#articlecontentAdobe_numberedheader_2)

但我不知道如何最初设置它以使其不显示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:06:47.080

在页面加载时执行此操作

```
var ProgressBar = document.getElementById("progressbar");
elem.style.display = "none"; 
```

并点击

```
ProgressBar.style.display = "block"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:02:23.140

如果您正在关注 adobe 链接的 css，那么只需将 #progress 的显示更改为最初为 none：

```
#progress {
 background-color:#ff0000; // red
 height:20px;
 display:none;
} 
```

# facebook - 在 FB Mobile 上发送消息的链接？

> ID：12250998
> 
> 赞同：3
> 
> 时间：2012-09-03T15:56:30.490
> 
> 标签：facebook

我的页面选项卡应用程序包含一个链接，可直接向页面所有者发送消息。同样的应用程序也可以通过 OG 链接和画布获得。发送消息链接在桌面上工作正常，但在手机中我希望它显示发送消息对话框的移动版本。

链接：

> [https://www.facebook.com/messages/USER_ID](https://www.facebook.com/messages/USER_ID)

将在 Facebook 桌面版中打开发送消息对话框。

有没有手机的等价物？（即：）`https://m.facebook.com/...`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T17:22:50.380

[https://m.facebook.com/messages/compose?ids=USER_ID](https://m.facebook.com/messages/compose?ids=USER_ID)

您可以指定多个 user_id ，使用逗号分隔它们

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-23T19:19:51.720

如果你想要一个更短的版本，你也可以试试这个格式：[https ://m.me/PAGENAME](https://m.me/PAGENAME)

用iphone测试过，效果很好。您可能需要与页面关联的用户名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-24T08:40:16.460

您也可以将其与公共 ID 一起使用，它会将您重定向到对话视图:)

```
https://m.facebook.com/messages/thread/* FB ID here */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-02T08:31:26.330

在我的情况下， PAGENAME 需要是您页面的名称，并且只输入数字。

ex) 你的页面链接地址

[https://www.facebook.com/test-12345](https://www.facebook.com/test-12345)

↓</p>

[https://m.me/12345](https://m.me/12345)