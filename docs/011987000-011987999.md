# StackOverflow 问答 11987000-11987999

# oracle11g - Oracle 11g 临时 lob 不可释放

> ID：11987001
> 
> 赞同：1
> 
> 时间：2012-08-16T12:20:53.163
> 
> 标签：oracle11g, temporary, oracle11gr2, lob

我正在使用 Oracle 11gR2，有人能告诉我为什么临时 lob 没有被释放吗？

```
 ... 
    -- Apply stylesheet to DOM document
    outdomdocf := dbms_xslprocessor.processxsl(proc, xsl, indomdoc);
    outnode := dbms_xmldom.makenode(outdomdocf);

    -- Write the transformed output to the CLOB
    dbms_lob.createTemporary(outfile, true, DBMS_LOB.CALL);
    dbms_xmldom.writetoCLOB(outnode, outfile);

    -- Free Cursors
    outXML := XMLTYPE.createXml(outfile);
    dbms_lob.freeTemporary(outfile);            <-- not working
    ... 
```

当我做

```
select * from v$temporary_lobs; 
```

它还在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:09:03.453

你需要`DBMS_LOB.CLOSE()`在调用之前关闭它`DBMS_LOB.FREETEMPORARY()`。

# asp.net - 当控件出现在 ASP.NET 网络表单上时，如何包含脚本和 css？

> ID：11987002
> 
> 赞同：0
> 
> 时间：2012-08-16T12:20:56.470
> 
> 标签：asp.net, webforms

我开发了一个非常复杂的新控件。我还知道它在第一次打开时不会出现在页面上，但只有当用户单击按钮以显示它时（因此，它首先出现在回发中）。我们还使用 Microsoft 的 ASP.NET AJAX 框架来使我们所有的回发部分更新。

由于控件相当复杂，它依赖于一堆 javascript 文件，有自己的 CSS 文件和一些图像。在任何时候都包括这些是不合理的，因为它只会以几种形式出现，即使那样也并非总是如此。此外，虽然目前不需要托管多个控件实例，但我希望保持此选项处于打开状态，否则 3 年后有人会尝试这样做，如果它不起作用，则会感到惊讶。

那么我该如何做到这一点，CSS/JS 文件在页面上只包含一次（即使可能有几个这样的控件），并且仅在第一个请求时控件出现在那里（以便后续请求不会' t 尝试不必要地重新下载这些资源）？

`Page.ClientScript.RegisterClientScriptInclude()`不适用于 AJAX 回发；`ScriptManager.RegisterClientScriptInclude()`将使浏览器在每个请求上重新下载脚本，即使它可能已经被下载。而且它们都不能用于 CSS 包括。还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T05:00:14.447

如果您正在创建一个 Web 用户控件，并且您担心不止一次包含 jquery 文件，那么我能想到的最简单的方法是类似于

```
<script type="text/javascript">window.jQuery || document.write(unescape('%3Cscript src="/js/jquery-1.9.1.min.js" type="text/javascript"%3E%3C/script%3E'))</script> 
```

# c++ - 为什么我可以在 C++ 中从外部访问私有方法？

> ID：11987003
> 
> 赞同：7
> 
> 时间：2012-08-16T12:20:57.760
> 
> 标签：c++

> **可能重复：**
> [为什么允许通过基类的指针调用派生类的私有虚方法？](https://stackoverflow.com/questions/4991267/why-is-it-allowed-to-call-derived-class-private-virtual-method-via-pointer-of-b)

最近遇到一个奇怪的问题，请参考以下代码：

```
#include <iostream>

using namespace std;

class A
{
    public:
        virtual void disp() {
            cout<<"A disp"<<endl;
        }

};

class B : public A
{
    private:
        void disp() {
            cout<<"B disp"<<endl;
        }
};

int main()
{
    A a;
    a.disp();

    A *b = new B();
    b->disp();
} 
```

输出是：

```
A disp
B disp 
```

我想知道为什么指针 b 可以访问 disp()？是私人的！不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:22:59.667

disp() 是公共的，因为您通过 A* 调​​用它，并且 disp() 在 A 中声明为公共。由于它是虚拟的，因此 B 的 disp 版本被调用，但这并不影响它是公共的还是私有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:23:10.447

这是语言设计的。但是，在派生时加强方法保护级别是一种不好的做法

# java - java中的同步块获取整个对象锁是真的吗？

> ID：11987006
> 
> 赞同：0
> 
> 时间：2012-08-16T12:21:13.550
> 
> 标签：java, multithreading, synchronization, synchronized

我知道java中的同步方法是如何工作的。

假设我们在一个类中有 3 个同步方法。如果一个 Thread 访问 1 个可用方法，则另外 2 个被其他线程阻塞。

如果我们将方法 1 中的同步实现更改为：

```
synchronized (this) {...} 
```

它是否仍然以相同的方式工作并阻止其他两种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:24:41.880

这在 Java 教程部分[Intrinsic Locks and Synchronization](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)（强调我的）中进行了解释：

*当线程调用同步方法时，**它会自动获取该方法对象的内在锁，**并在方法返回时释放它。即使返回是由未捕获的异常引起的，也会发生锁定释放。*

所以，答案是肯定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:23:48.257

是的。

关键字，当`synchronized`应用于方法时，相当于将方法的内容包装在`synchronized(this)`.

[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6)说：

> 同步方法在执行之前获取监视器（第 17.1 节）。
> 
> 对于类（静态）方法，使用与方法类的 Class 对象关联的监视器。
> 
> 对于实例方法，使用与 this（调用该方法的对象）关联的监视器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:24:00.520

是的，它确实。

```
public synchronized void method() {...} 
```

使用对象的内在锁 ( `this`)，因此任何其他使用该锁的同步块：

```
synchronized(this) {...} 
```

如果锁已经被持有，将会阻塞。

注意：如果一个方法是静态的，那画面就不一样了，因为锁已经没有`this`了，它是`YourObject.class`. 在下面的示例中，没有什么可以阻止线程 T1`method`在另一个线程 T2 运行时运行`someOtherMethod`，因为这两个部分不使用相同的锁：

```
public static synchronized void method() {...}

public void someOtherMethod() {
    synchronized(this) {
    }
} 
```

# java - 解析带有数组值的 JSON

> ID：11987007
> 
> 赞同：0
> 
> 时间：2012-08-16T12:21:18.717
> 
> 标签：java, json

我有一个像 {"xyz": ["a","b","c"]} 这样的 json 响应。我正在尝试使用[JsonObject](http://www.json.org/javadoc/index.html?org/json/JSONObject.html)和[JsonArray](http://www.json.org/javadoc/index.html?org/json/JSONObject.html)类将值 a、b、c 作为字符串。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:27:47.107

可能您可能需要执行以下操作

```
JSONObject myjson = new JSONObject(JSON_OBJECT); 
JSONArray xyz_array= myjson.getJSONArray("xyz"); 
```

并遍历 xyz_array 以获取数组中的每个对象。

# java - 对 Java 对象进行排序并根据属性查找相对位置

> ID：11987011
> 
> 赞同：1
> 
> 时间：2012-08-16T12:21:39.653
> 
> 标签：java, algorithm, logic

我有一个有趣的问题

这是对象结构

```
public class Testdata {
    //Which is a consecutive running number i.e 1,2,3..etc
    private int sequence;

    //classified based on this again any random numbers
    private int window; 

    //need to calculate
    private int windowposition; 

} 
```

现在基于序列和窗口，我需要导出相对于窗口的窗口位置

**测试数据**
所以用于测试数据序列/窗口

```
 1 / 2
        2 / 3
        3 / 2
        4 / 3
        5 / 3 
```

**预期产出**

```
 sequence/window :   window position would be (in the same order)

    1 / 2       :   1

    2 / 3       :   1

    3 / 2       :   2

    4 / 3       :   2

    5 / 3       :   3 
```

更新：

是的，确实，我已经实现了可比较并将列表排序到以下顺序

```
1 / 2
3 / 2
2 / 3        
4 / 3
5 / 3 
```

现在我如何计算`windowposition`每个元素相对于其窗口的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:06:31.427

[实现Comparable](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html)可能是有意义的。这允许您对对象进行排序。你会`compareTo(T)`像这样实现：

```
int compareTo(Testdata o) {
  return ((Integer)this.sequence).compareTo(o.sequence);
} 
```

这样你的对象可以按顺序排序。

现在将所有具有`window`1 的对象收集到 a`List`中，将具有`window`2 的对象收集到另一个列表中，等等。

```
HashMap<Integer, ArrayList<Testdata>> map = new HashMap<Integer, ArrayList<Testdata>>();

// Add all the objects like this
while (...) { // While there are more objects
  Testdata td = ... // Get next object

  List<TestData> list = map.get(td.window);
  if (list == null) {
    list = new ArrayList<Testdata>();
    map.put(td.window, list);
  }

  list.add(td.sequence);
} 
```

[使用Collections.sort(List)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#sort%28java.util.List%29)对所有列表进行排序：

```
for (ArrayList<TestData> list : map) {
  Collections.sort(list);
} 
```

然后，每个窗口都有一个列表，可通过`map.get(window)`. 这些列表中的每一个都具有最低的对象`sequence`作为其第一个对象，第二个最低的对象作为第二个对象等。-> 窗口位置是对象的索引 + 1。

**编辑：**

如果您的对象已经按窗口和序列排序（到单个列表中），您可以执行以下操作来分配窗口位置：

```
int window = 1;
int wp = 0;
for (Testdata td : list) {
  if (td.window > window) {
    wp = 1;
    window = td.window;
  } else {
    wp++;
  }

  td.windowposition = wp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:44:56.037

因此，*窗口*位置只是另一个序列。我会放入每个*窗口*`Map<Integer,Integer>`的最后一个窗口位置。您不必对对象进行排序。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:21:32.083

试试这个代码

```
windowposition = sequence - window < 0 ? 1 : sequence - window + 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:49:39.317

```
So its basically window's no. of occurrence in the array of objects.
Seq/Window:Position
1 / 2 : 1    => Window 2 , 1st position (1st occurrence of Window 2)
2 / 3 : 1    => Window 3 , 1st position (1st occurrence of Window 3)
3 / 2 : 2    => Window 2 , 2nd position (since Window 2 has already positioned in sequence 1)
4 / 3 : 2    => Window 3 , 2nd position (since Window 3 has already positioned in sequence 2)
5 / 3 : 3    => Window 3 , 3rd position (since Window 3 has already positioned in sequence 2 and 4)

Is that right?

List<Window> windows = new ArrayList<Window>();
        windows.add(new Window(2, 3));
        windows.add(new Window(1, 2));
        windows.add(new Window(3, 2));
        windows.add(new Window(4, 3));
        windows.add(new Window(5, 3));

        Collections.sort(windows);

HashMap<Integer, Integer> wpMap = new HashMap<Integer, Integer>();
     Integer wpos;
        for (Window w : windows) {
            wpos = wpMap.get(w.window);
            if ( wpos == null ) { 
                wpos = 1;
            } else { 
                wpos++;
            }
            w.setWindowPosition(wpos);
            wpMap.put(w.window, wpos);
        }
    for (Window w : windows) {
        System.out.println(w.sequence+"/"+w.window+":"+w.windowposition);
    } 
```*

# shell - 如何创建脚本以在 Tomcat 7 上自动重启 Web 应用程序

> ID：11987017
> 
> 赞同：0
> 
> 时间：2012-08-16T12:21:53.707
> 
> 标签：shell, tomcat, web-applications, scripting, application-restart

我不是程序员，但想知道如何执行以下任务。我正在与一位经验丰富的开发人员一起工作，并希望得到编程社区的帮助。如果您可以指导我们或作为脚本提供，那将是很棒的（提前感谢您！）

这是场景：

我有一个在亚马逊云 EC2 实例 (Linux) 上运行在 Tomcat 7 上的 JAVA 应用程序。

我不希望 Web 应用程序有任何停机时间（或很少）。

我想要的是，如果 Web 应用程序由于任何原因崩溃，它会在我试图找到崩溃原因时立即自动重启。

请注意我们正在尝试处理的场景：Tomcat 仍在运行，但 Web 应用程序已关闭。因此，您无法检查 Tomcat 是否已关闭作为重新启动应用程序的参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:21:45.797

我对 EC2 的了解不足以完全回答这个问题（而且我只有几分钟的工作时间）但如果它在可脚本化的环境中运行并且您可以设置一个 cron 作业，它应该很容易。

1.  让您的应用程序提供包含一些可解析的 XML 或 JSON 的页面。这种技术通常被称为“金丝雀”页面——就像矿井中的金丝雀（检测气体并死掉第一种交易）
2.  创建一个使用 curl 或 wget 之类的访问金丝雀页面的脚本。如果响应失败（也就是您的应用程序已关闭），请重新启动 tomcat（或者如果它仍在运行，则杀死 tomcat 并重新启动它，听起来会这样）
3.  通过 cron 将作业设置为每分钟左右运行一次

显然，您最好的选择是编写一个不会崩溃的应用程序 :) 但与此同时，这可能会有所帮助，并且带有一些应用程序配置信息的金丝雀页面通常非常有用。

抱歉，我没有深入的细节，但也许其他一些人可以在评论中发表（或者我下班后会发表）

此外，Tomcat / Java EE 提供了大量的防弹错误处理，因此您的应用程序出现故障应该很少见。您确定您的开发人员知道他在做什么吗？

# caching - 在 SSIS 中，我们可以缓存（一些如何保存内存中的数据）表吗？

> ID：11987022
> 
> 赞同：1
> 
> 时间：2012-08-16T12:22:13.750
> 
> 标签：caching, ssis

我有大量现有的 SSIS。现在 Sybase db 中的某些表在不同阶段被 ssis 包多次 (4-5) 访问。在每个访问中都有不同的连接或某些过滤条件。现在我意识到每次访问表时都会发生 2 个活动（1.tables 的数据页需要读取，2.需要通过 SSIS Server 上的网络获取数据。）现在我想知道我是否可以最初带来整个表数据（所有记录）到 SSIS 服务器，然后对表的所有后续访问都在 SSIS 服务器上进行。现在的问题是这些表数据可以存储在 SSIS 服务器上的什么位置，如果我可以在内存中（在 RAM 中）缓存表数据，或者可能在硬盘上。我对 SSIS 的 SSIS 效率不是很高，因此寻求帮助“有什么方法可以在 SSIS 中实现这一点吗？”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:13:57.953

您没有指定您使用的 SSIS 版本，但除了 Praveen 对原始文件 (+1) 的建议之外，如果您使用 2008 到当前版本，您还可以查看[缓存连接管理器。](http://msdn.microsoft.com/en-us/library/bb895290.aspx)CCM 既提供内存存储，也可以指定将内容写入文件以平衡内存压力。

在平衡原始文件与缓存连接管理器的选择时，您需要了解您的使用情况。原始文件或平面文件可以是数据流源，而 CCM 不能。相反，CCM 可以作为查找转换的来源，而文件连接不能

在权衡使用文件存储机制时要记住的一件事是您会丢失索引。假设您的查询按州对客户进行细分。该数据库在检索“Andhra Pradesh 的所有活跃客户”方面将比读取整个文件以查找符合该条件的记录要高效得多。当奥里萨邦客户的请求发生变化时，可以使用相同的索引，但文件存储必须从头到尾重新处理，以查找满足条件的记录。索引效率的提高可能足以克服将数据保存在源系统上的网络和读取成本。

与往常一样，测试并找到最适合您的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:53:37.597

如果您需要缓存数据，那么您可以将其存储在 SSIS 中创建的`flat file`或`raw file`或`temporary table`创建中。从平面文件访问数据总是比从 RDBMS 访问数据要快。如果多次访问，您的数据库可能会占用大量资源次。

与平面文件相比，原始文件在读取或写入数据时可以非常快。[本文](http://agilebi.com/jwelch/2009/12/14/performance-of-raw-files-vs-flat-files/)解释了两者之间的性能。

我的建议是，如果您的临时数据没有被 SSIS 以外的任何其他工具使用，那么您可以使用[原始文件](http://www.jasonstrate.com/2011/01/31-days-of-ssis-raw-files-are-awesome-131/)。

一篇解释在 SSIS 中使用临时表的[文章](http://consultingblogs.emc.com/jamiethomson/archive/2006/11/19/SSIS_3A00_-Using-temporary-tables.aspx)，该临时表可用于具有相同连接的多个数据流任务（RetainSameConnection property=True）

# c - 这些代码有什么作用？

> ID：11987024
> 
> 赞同：5
> 
> 时间：2012-08-16T12:22:24.473
> 
> 标签：c

我在一本书中看到了这个源代码：

```
#include <stdio.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    char *delivery = "";
    int thick = 0;
    int count = 0;
    char ch;

    while ((ch = getopt(argc, argv, "d: t")) != EOF)
        switch(ch)
        {
            case 'd':
                delivery = optarg;
                break;

            case 't':
                thick = 1;
                break;

            default:
                fprintf(stderr, "Unknown option: '%s'\n", optarg);
                return 1;
        }

        argc -= optind;
        argv += optind;

        if (thick)
            puts("Thick Crust.");

        if (delivery[0])
            printf("To be deliverd %s\n", delivery);

        puts("Ingredients: ");

        for (count = 0; count < argc; count++)
            puts(argv[count]);

    return 0;
} 
```

我可以理解整个来源，除了：

```
argc -= optind;
argv += optind; 
```

我知道什么是 argc 和 argv，但是这两行中它们发生了什么，什么是“optind”给我解释一下。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:28:50.850

该`getopt`库提供了几个函数来帮助解析命令行参数。

当你称它为`getopt`“吃”可变数量的参数时（取决于命令行选项的类型）；“吃”的参数数量在`optind`全局变量中指示。

您的代码会调整`argv`并`argc`使用`optind`来跳转刚刚使用的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:25:12.303

它是 . 使用的全局变量`getopt`。

从手册：

> getopt() 函数解析命令行参数。它的参数 argc 和 argv 是在程序调用时传递给 main() 函数的参数计数和数组。
> 
> 变量 optind 是 argv 中要处理的下一个元素的索引。系统将此值初始化为 1。

该代码仅更新 argc 和 argv 以指向其余参数（已`-`跳过选项）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T12:26:21.550

**关于如何：**

optind 是 argv 的元素数，在此代码之后将被忽略：

```
argc -= optind; // reduces the argument number by optind 
argv += optind; // changes the pointer to go optind items after the first one 
```

argc（计数）由 optind 减少

并且指向 argv 的第一个元素的指针相应地升级。

**关于为什么：**

见卡罗利的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T12:32:49.460

在运行此代码时，您可以将其执行为 ./executable_file:name -d some_argument

当调用 getopt 时，它开始扫描命令行中写入的内容。argc = 3, argv[0]=./executable_file:name argv[1]=-d argv[2]=some_argument 。getopt 将在 optind = 2 时获得选项 d，即下一个即 argv[2] 的索引。因此 optind+argv 将指向 argv[2]。

一般来说optind会有下一个的索引。

# android - 如何通过 glreadpixels 获取颜色？

> ID：11987029
> 
> 赞同：0
> 
> 时间：2012-08-16T12:22:34.987
> 
> 标签：android, opengl-es-2.0, glreadpixels, picking, ray-picking

我正在尝试在 Android 屏幕上获取触摸点的颜色。但它只显示 RGB = (0, 0, 0) 值。我已经搜索过其他网站。它说我应该在下面添加一些代码，但它没有改变任何东西。

```
getHolder().setFormat(PixelFormat.TRANSLUCENT);
setEGLConfigChooser(8,8,8,8,0,0); 
```

所以任何建议都会提前感谢。

```
ByteBuffer PixelBuffer = ByteBuffer.allocateDirect(4);
    PixelBuffer.order(ByteOrder.nativeOrder());
    PixelBuffer.position(0);
    int mTemp = 0;
    GLES20.glReadPixels(touchX, touchY, 1, 1, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, PixelBuffer);
    byte b[] = new byte[4];
    PixelBuffer.get(b);
    tmp = String.valueOf(String.format("RED : %d GREEN %d BLUE %d", PixelBuffer.get(0), PixelBuffer.get(1), PixelBuffer.get(2)));
    tmp += String.valueOf(String.format("RED : %d GREEN %d BLUE %d", b[0], b[1], b[2]));
    Log.e("COLOR", "R:" + PixelBuffer.get(0) + PixelBuffer.get(1) + PixelBuffer.get(2)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:35:17.873

你是使用openGL来绘制屏幕还是只是普通的应用程序？如果您使用 openGL，那么您是使用 OpenGL 2.0 还是 1.x 来绘制屏幕？你的手机支持openGLES 2.0吗？我可以看到他们没有多少设备支持它。您可以查看[http://code.google.com/p/libgdx/](http://code.google.com/p/libgdx/)源代码，他们有一些获取 FramBuffer 像素的示例。

例如“libgdx\extensions\gdx-tools\src\com\badlogic\gdx\tools\hiero\BMFontUtil.java”第 176 行。

# git - 如何在所有提交中更新子模块 url

> ID：11987037
> 
> 赞同：6
> 
> 时间：2012-08-16T12:22:59.430
> 
> 标签：git, git-submodules

用例是我必须将某些存储库移动到新服务器。所以这些存储库获得了一个新的 url。
引用这些子模块的父项目需要使用子模块的新 url 进行更新。
我想做以下事情。

> 1.  更新 .gitmodules 文件
> 2.  git 子模块同步
> 3.  git子模块更新
> 4.  提交和推送

但是，由于以前的提交具有早期版本的 .gitmodule，如果我签出父项目的先前提交 - 它不会寻找旧服务器吗？

为了确保可重复性，我们需要让所有旧的提交都能正常工作。有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T12:43:35.250

里面的 URL`.gitmodules`一般只在初始化子模块或 on 时使用`git submodule sync`。在初始化 ( `git submodule init`) 时，URL 被放入存储库`.git/config`中，当子模块被克隆到位 (on `git submodule update`) 时，要使用的 URL 从配置中获取。唯一一次使用 in 的 URL`.gitmodules`是在运行时`git submodule sync`，这将类似地更新配置中的 URL，但也会将`origin`子模块中的远程设置为相同的 URL。

这意味着您在签出较早的提交并运行时不会遇到任何问题`git submodule update`- 当您在父存储库中签出新提交时，子模块中的远程`origin`不会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T13:25:45.497

如果您需要这样做，唯一的方法是使用[filter-branch](https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History#The-Nuclear-Option:-filter-branch)。

但**要小心，**因为更改`.gitmodules`所有提交意味着您转换了该提交。

如果您与许多开发人员共享 git 存储库，则所有开发人员都需要“强制拉取”新提交，并且基于旧提交的**所有工作都****需要重新定位**到新分支。

有很多关于重写 git 历史的讨论。

# c# - 在代码中绑定属性

> ID：11987038
> 
> 赞同：0
> 
> 时间：2012-08-16T12:23:00.697
> 
> 标签：c#, .net, wpf, data-binding, dependency-properties

我正在尝试在代码中设置属性绑定（WPF）。代码编译得很好，但我绑定的属性从未设置。下面是一个最小的例子：

视图模型：

```
public class FooViewModel: INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string _value;
    public string Value 
    { 
        get { return _value; }
        set
        {
            _value = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("Value"));
        }
    }
} 
```

风景：

```
public class FooView: Window
{
    public string Value
    {
        get { return Title; }
        set
        {
            // Breakpoint here never hits!
            Title = value;
        }
    }

    public static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value", typeof(string), typeof(FooView));

    public FooView()
    {
        Binding valueBinding = new Binding("Value");
        valueBinding.Mode = BindingMode.OneWay;
        SetBinding(ValueProperty, valueBinding);
    }
} 
```

主要的（）”：

```
 FooView view = new FooView();
        FooViewModel model = new FooViewModel();
        view.DataContext = model;
        view.Show();
        model.Value = "ABC"; 
```

我希望在设置`FooView.Value`时调用 -setter `model.Value`。我还尝试将`Binding.Source`属性显式设置为模型。绑定应该如何设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:42:43.027

这里的问题是该属性与依赖属性`Value`完全无关。`ValueProperty`

依赖属性的 CLR 包装器需要调用 DependencyObject 的[GetValue](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.getvalue%28v=vs.100%29.aspx)和[SetValue](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.setvalue%28v=vs.100%29.aspx)方法，如下所示：

```
public string Value
{
    get { return (string)GetValue(ValueProperty); }
    set { SetValue(ValueProperty, value); }
} 
```

为了获得有关属性更改的通知，您必须使用PropertyMetadata[注册一个](http://msdn.microsoft.com/en-us/library/System.Windows.PropertyMetadata.aspx)[PropertyChangedCallback](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)：

```
public static readonly DependencyProperty ValueProperty =
    DependencyProperty.Register(
        "Value", typeof(string), typeof(FooView),
        new PropertyMetadata(ValuePropertyChanged));

private static ValuePropertyChanged(DependencyObject obj,
    DependencyPropertyChangedEventArgs e)
{
    // obj is your FooView instance
    // get new property value from e.NewValue
} 
```

[在自定义依赖属性](http://msdn.microsoft.com/en-us/library/ms753358%28v=vs.100%29.aspx)中获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:26:56.310

我认为您缺少该`Source`属性：

```
Binding myBinding = new Binding("Value");
myBinding.Source = TheSourceOfTheProprty;
myBinding.Mode = BindingMode.OneWay;
myBinding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
myBinding.IsAsync = false;

BindingOperations.SetBinding(YourControl, YourControl.Property, myBinding); 
```

在修复了您`Dependency Property`喜欢的 Clemens 解释后，您只需要设置绑定即可。

所以你的绑定看起来像这样：

```
FooViewModel model = new FooViewModel();

FooView view = new FooView(model);
view.DataContext = model;
view.Show();
model.Value = "ABC";

public FooView(FooViewModel model)
{
    Binding myBinding = new Binding("Value");
    myBinding.Source = model;
    myBinding.Mode = BindingMode.OneWay;
    myBinding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;

    BindingOperations.SetBinding(this, this.Value, myBinding);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:58:42.287

如果我没记错的话，您将从后面的代码中设置您的 fooview 窗口的标题属性。如果是这样，那么您可以在 fooview 构造函数下使用 xe 绑定行

```
 Binding valueBinding = new Binding("Value");
valueBinding.Mode = BindingMode.TwoWay;
SetBinding(TitleProperty, valueBinding);| 
```

# android - Android aws SDK：AndroidRuntime（587）：java.lang.NoClassDefFoundError

> ID：11987042
> 
> 赞同：2
> 
> 时间：2012-08-16T12:23:11.850
> 
> 标签：android, amazon-web-services, amazon-simpledb

我正在尝试将 AWS Simple DB 与 androidSdk 1.3.3 一起使用，这是我的连接代码

```
AWSCredentials credits = new BasicAWSCredentials("apkey","secretkey");
AmazonSimpleDBClient client = new AmazonSimpleDBClient(credits); 
```

我添加了必要的 Jar，但我得到一个指向 AwsCredentials 的异常，我的 logcat 说

```
E/AndroidRuntime(587): java.lang.NoClassDefFoundError: com.amazonaws.auth.BasicAWSCredentials 
```

我能知道我错在哪里吗？

LogCat 报告：

```
08-16 17:33:04.484: E/AndroidRuntime(587): FATAL EXCEPTION: main
08-16 17:33:04.484: E/AndroidRuntime(587): java.lang.NoClassDefFoundError: com.amazonaws.auth.BasicAWSCredentials
08-16 17:33:04.484: E/AndroidRuntime(587):  at com.Ews.EwsActivity.<init>(EwsActivity.java:24)
08-16 17:33:04.484: E/AndroidRuntime(587):  at java.lang.Class.newInstanceImpl(Native Method)
08-16 17:33:04.484: E/AndroidRuntime(587):  at java.lang.Class.newInstance(Class.java:1319)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.os.Looper.loop(Looper.java:137)
08-16 17:33:04.484: E/AndroidRuntime(587):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-16 17:33:04.484: E/AndroidRuntime(587):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 17:33:04.484: E/AndroidRuntime(587):  at java.lang.reflect.Method.invoke(Method.java:511)
08-16 17:33:04.484: E/AndroidRuntime(587):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-16 17:33:04.484: E/AndroidRuntime(587):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-16 17:33:04.484: E/AndroidRuntime(587):  at dalvik.system.NativeStart.main(Native Method) 
```

# ios - 无法使用 NSData:dataWithBytesNoCopy 复制

> ID：11987045
> 
> 赞同：1
> 
> 时间：2012-08-16T12:23:17.140
> 
> 标签：ios, packet

我试图简单地以 NSData 对象的形式复​​制数据包的内容，而不使用 NSData:dataWithBytesNoCopy 复制标头信息

```
-(void)saveData:(NSData *)data
{    
    const char* theBytes = [data bytes];    
    self.bodyData = [NSData dataWithBytesNoCopy:(char *)(theBytes + PACKET_HEADER_SIZE)
                                         length:[data length] - PACKET_HEADER_SIZE 
                                   freeWhenDone:NO];    
} 
```

这是数据的样子：

```
534e4150 00000000 0071534e 41500000 00000071 d5000008 5200e612 a180014a c4e947b9 35060225 bee8e729 00c21511 68a6dc52 c7177902 8343ea38 70bbc102 8e0fa9c4 0bbc8141 a1f2870e 1790d2a7 339487d4 e0c09de0 81487d4e 385e430f 9439c814 87ca1c38 5e1855aa 77667d4e 6643a9c7 0bbc1057 f0000710 4e1dcd12 801381be 06088e78 060c87e0 6088e780 60c8fc0c 111de018 78fc0c11 1de01832 3f030ccd f260c8fc 0c111de0 1879fc75 b3f93fcf e38ccde0 1879f819 6cfe4c3c fc0cb67e 01cf3f07 7ff880c8 a0301810 0a060201 00400000 c0f2b122 7e27910a f91843fc 408adf21 19891fc6 21722089 7fe26848 164550a9 ffc683f1 70d267ff cf253987 e71ffffe 468cc40c 545b7ffd 05da00ab ffee9fd2 f39fffff 710e1644 c8220000 84106102 000607ce 6811242a f84c9818 21be1de1 4ff10145 abe25a18 843fdfc3 7201885b a0fc7fe0 dd50c5c2 790c021c 57ff0b 
```

（前 10 个字节构成包头，我只是想复制数据包的主体）。

运行操作后.. self.bodyData 看起来像这样：

```
534e4150 00000000 0071d500 00085200 e612a180 014ac4e9 47b93506 0225bee8 e72900c2 151168a6 dc52c717 79028343 ea3870bb c1028e0f a9c40bbc 8141a1f2 870e1790 d2a73394 87d4e0c0 9de08148 7d4e385e 430f9439 c81487ca 1c385e18 55aa7766 7d4e6643 a9c70bbc 1057f000 07104e1d cd128013 81be0608 8e78060c 87e06088 e78060c8 fc0c111d e01878fc 0c111de0 18323f03 0ccdf260 c8fc0c11 1de01879 fc75b3f9 3fcfe38c cde01879 f8196cfe 4c3cfc0c b67e01cf 3f077ff8 80c8a030 18100a06 02010040 0000c0f2 b1227e27 910af918 43fc408a df211989 1fc62172 20897fe2 68481645 50a9ffc6 83f170d2 67ffcf25 3987e71f fffe468c c40c545b 7ffd05da 00abffee 9fd2f39f ffff710e 1644c822 00008410 61020006 07ce6811 242af84c 981821be 1de14ff1 0145abe2 5a18843f dfc37201 885ba0fc 7fe0dd50 c5c2790c 021c57ff 0bfa0098 11032e83 6a8213ff e32a1f28 a4873447 2282203f ffe4049a 311cd22c 6239a458 abffffe6 26489899 1a9aa4b3 536fffff fd8c4d98 d5264523 c6a93189 ffffffff fffec792 64526353 ec6a9322 91e3c7d0 04 
```

注意前 10 个字节如何保持不变.. 而剩余字节由于某种原因而变化.. 我不知道为什么.. 建议？

**更新：** 以防万一您想知道数据来自哪里，我实际上正在获取一个 .mp3 文件并使用音频流服务对其进行切片，然后使用 GKSession 通过蓝牙/wifi 发送它。以下是代码：

```
static const int maxBufferSize = 0x10000;   // limit maximum size to 64K
static const int minBufferSize = 0x4000;    // limit minimum size to 16K

NSUInteger bufferByteSize = maxBufferSize;
UInt32 numPacketsToRead = 0;
NSUInteger headerByteSize = 10;             // header takes 10 bytes

if (maxBufferSize < audioFile.maxPacketSize) bufferByteSize = audioFile.maxPacketSize; 
if (bufferByteSize < minBufferSize) bufferByteSize = minBufferSize;

numPacketsToRead = bufferByteSize/audioFile.maxPacketSize;

BOOL isVBR = YES;

AudioStreamPacketDescription    packetDescriptions[numPacketsToRead];    
SInt64 inStartingPacket = 0;

do {          

    void *myBuffer = [[[NSMutableData alloc] initWithCapacity:bufferByteSize] mutableBytes];

    NSMutableData *packetData = [[NSMutableData alloc] initWithCapacity:bufferByteSize + headerByteSize];
    UInt32 outNumBytes = 0;
    OSStatus result = 0;

    result = AudioFileReadPackets (
                                   audioFile.fileID,
                                   NO,
                                   &outNumBytes,
                                   isVBR ? packetDescriptions : 0,
                                   inStartingPacket,
                                   &numPacketsToRead,
                                   myBuffer
                                   );

    // add header info         
    [packetData rw_appendInt32:'SNAP'];   // 0x534E4150
    [packetData rw_appendInt32:0];
    [packetData rw_appendInt16:PacketTypeMusic];

    NSData *NSpacketData = packetData;

    [packetData appendBytes:myBuffer length:outNumBytes];

    NSError *error;

     NSLog(@"about to send out bytes");
    if (![_session sendDataToAllPeers:NSpacketData withDataMode:GKSendDataReliable error:&error]) 
    {
        NSLog(@"Error sending data to clients: %@", error);
    }        
} while (numPacketsToRead < audioFile.packetsCount); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:52:56.663

使用`dataBytesWithNoCopy`意味着 NSData 对象将只保留指向您提供的数据的指针。在您的情况下，您提供的数据由另一个数据对象（作为参数传入的对象）管理。

如果您将原始数据提供给 NSData，则 NSData 对象实际上仅在该数据有效时才有效。

现在，同样的方法有另一个参数，`freeWhenDone`它告诉 NSData 对象它是否拥有数据。如果您分配缓冲区，并且您希望 NSData 在完成后释放它，则传递 YES。同样，在您的情况下，由于您的数据归另一个 NSData 对象所有，因此您告诉它不。

但是，稍后，当您访问 iVar 时，`bodyData`它的数据仍将指向您提供给它的 NSData 对象的数据。如果该对象已更改或被释放，那么您的指针将指向某些未知内存。

如果要创建数据的副本，则必须使用标准初始化程序。

如果要使用，`noCopy`则必须保证原始数据的寿命至少与使用它的 NSData 一样长。

**编辑**

如果您想以“标准”方式进行操作...

```
char const *bytes = data.bytes;
self.bodyData = [NSData dataWithBytes:bytes + PACKET_HEADER_SIZE
                               length:data.length - PACKET_HEADER_SIZE]; 
```

现在，这将创建一个带有字节副本的 NSData。请注意，它将为您提供的字节分配空间，然后复制这些字节。

“无复制”版本只是“使用”你给它的数据指针——如果你告诉它这样做，它会在完成后释放缓冲区。这是出于性能原因使用的，但如果您使用它，您必须确保您给它的指针至少与数据对象本身一样长。

在C语言中，如果你想要一个缓冲区，你必须自己分配和复制它......

```
size_t length = data.length - PACKET_HEADER_SIZE;
void * buffer = malloc(length);
memcpy(buffer, ((char const *)data.bytes) + PACKET_HEADER_SIZE, length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:55:13.933

这可行，但使用 C，而不是 Objective C：

```
size_t size = [data length];
short * buffer = (short *)malloc(size);
const short* theBytes = [data bytes]; 
short offset = PACKET_HEADER_SIZE/2;

memcpy(buffer, (short *)(theBytes + offset), size - PACKET_HEADER_SIZE);

self.bodyData = [NSData dataWithBytes:buffer length:size - PACKET_HEADER_SIZE];
free(buffer); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T12:41:02.273

试试这个代码，看看它是否会工作：

```
int offset = 10;
NSRange dataRange;
dataRange.length = [data length] - offset;
dataRange.location = offset;

void *buffer = malloc(dataRange.length);
[data getBytes:buffer range:dataRange];
self.bodyData = [[NSData alloc] initWithBytesNoCopy:buffer length:dataRange.length];
free(buffer); //Make sure your property has either retain attribute (or strong if using ARC) 
```

# html - 滚动不够

> ID：11987046
> 
> 赞同：2
> 
> 时间：2012-08-16T12:23:23.130
> 
> 标签：html, css

在我的页面上滚动不够。

这是 1600x1200 分辨率的完整页面： ![这是 1600x1200 分辨率的完整页面](../Images/371ea5b366abdd22fc40ff11be2946a6.png)

这是分辨率为 1366x768 的同一页面： ![这是分辨率为 1366x768 的同一页面](../Images/184c6506aaae0ef12617f38283c774f5.png)

滚动条完全向下，即使使用滚轮也无法滚动。

这是为什么？如何解决？感谢您的所有回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:26:31.770

摆脱`overflow:hidden`身体标签。这隐藏了您需要的滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:45:43.087

所以我的问题的完整解决方案是：

```
 #body
    {
        overflow: auto;

        height: 100%;
        display: block;
        position: absolute;
        height:auto;
        bottom:0;
        top:0;
        left:0;
        right:0;
        margin-top: 104px;
        margin-left: 200px;
        margin-right: 90px;
        background: #f2f4f5;
    } 
```

# visual-studio-2010 - 打开解决方案时崩溃

> ID：11987056
> 
> 赞同：1
> 
> 时间：2012-08-16T12:23:48.170
> 
> 标签：visual-studio-2010

当我尝试打开解决方案时，Visual Studio Just-In-Time Debugger 会打开说明；

> devenv.exe [3864] 中出现未处理的 Microsfot .NET Framework 异常。

然后为我提供了可能的调试器，其中唯一的一个是“Microsoft Visual Studio 2010 的新实例”。

如果我单击“否”，整个事情就会关闭，如果我单击“是”，它会打开另一个带有标题`devenv (Running)`的 Visual Studio 几秒钟，然后`devenv (Debugging)`它会崩溃；

```
System.ExecutionEngineException was unhandled
Message=Exception of type 'System.ExecutionEngineException' was thrown.
InnerException: 
```

之后，我原来的解决方案就关闭了，剩下的是空的 devenv 解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:46:50.813

出于某种原因，某些扩展要求您以管理员身份启动 Visual Studio。它看起来很小，但我以管理员身份运行它，它不再因 .net 错误而崩溃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-12T08:57:33.293

转到配置管理器并选择活动解决方案平台 - 任何 cpu。

# c# - 在 Windows 服务内托管的 WCF 服务上使用证书

> ID：11987064
> 
> 赞同：0
> 
> 时间：2012-08-16T12:24:16.653
> 
> 标签：c#, wcf, wcf-binding

如何在 Widows 服务中托管 WCF 服务，该服务使用 HTTPS 连接，使用 makecert 工具生成的自签名证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:45:43.837

这人的帖子写的真透彻。我自己也成功使用过。

[http://blogs.msdn.com/b/james_osbornes_blog/archive/2010/12/10/selfhosting-a-wcf-service-over-https.aspx](http://blogs.msdn.com/b/james_osbornes_blog/archive/2010/12/10/selfhosting-a-wcf-service-over-https.aspx)

# python - 在保留向后兼容性的情况下重命名函数

> ID：11987065
> 
> 赞同：14
> 
> 时间：2012-08-16T12:24:19.933
> 
> 标签：python, refactoring

我重构了我的旧代码并想根据 pep8 更改函数的名称。但是我想保持与系统旧部分的向后兼容性（完全重构项目是不可能的，因为函数名称是 API 的一部分，并且一些用户使用旧的客户端代码）。

简单的例子，旧代码：

```
def helloFunc(name):
    print 'hello %s' % name 
```

新的：

```
def hello_func(name):
    print 'hello %s' % name 
```

但是这两个功能都应该起作用：

```
>>hello_func('Alex')
>>'hello Alex'
>>helloFunc('Alf')
>>'hello Alf' 
```

我在想：

```
def helloFunc(name):
    hello_func(name) 
```

，但我不喜欢它（在项目中大约有 50 个功能，我认为它看起来会很乱）。

最好的方法是什么（不包括重复课程）？是否有可能创建一些通用装饰器？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T12:26:51.330

我认为目前，最简单的方法是创建对旧函数对象的新引用：

```
def helloFunc():
    pass

hello_func = helloFunc 
```

当然，如果您将实际函数的名称更改为，然后将别名创建为*：*`hello_func`

```
helloFunc = hello_func 
```

这仍然有点混乱，因为它不必要地使您的模块名称空间混乱。为了解决这个问题，您还可以有一个提供这些“别名”的子模块。然后，对于您的用户来说，它就像更改为一样简单`import module`，`import module.submodule as module`但您不会弄乱您的模块名称空间。

你甚至可以使用`inspect`自动（未经测试）来做这样的事情：

```
import inspect
import re
def underscore_to_camel(modinput,modadd):
    """
       Find all functions in modinput and add them to modadd.  
       In modadd, all the functions will be converted from name_with_underscore
       to camelCase
    """
    functions = inspect.getmembers(modinput,inspect.isfunction)
    for f in functions:
        camel_name = re.sub(r'_.',lambda x: x.group()[1].upper(),f.__name__)
        setattr(modadd,camel_name,f) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T12:48:11.470

虽然其他答案绝对正确，但将函数重命名为新名称并创建一个发出警告的旧名称可能会很有用：

```
def func_new(a):
    do_stuff()

def funcOld(a):
    import warnings
    warnings.warn("funcOld should not be called any longer.")
    return func_new(a) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T12:27:22.723

您可以将函数对象绑定到模块命名空间中的另一个名称，例如：

```
def funcOld(a):
    return a

func_new = funcOld 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-17T11:01:13.557

由于您的问题听起来很像弃用或类似的问题，我强烈建议您使用装饰器来获得更简洁的代码。事实上，另一个线程中的某个人已经[为您创建了这个](https://stackoverflow.com/a/30253848/1283083)。

# iphone - iphone - 当 registerForRemoteNotificationTypes 应该被调用

> ID：11987066
> 
> 赞同：0
> 
> 时间：2012-08-16T12:24:30.743
> 
> 标签：iphone, xcode, push-notification

我希望我的用户只能在某些视图上订阅远程通知。

是否可以`[[UIApplication sharedApplication] registerForRemoteNotificationTypes...`从应用程序中的任何位置调用，或者只需要从 AppDelegate 调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:00:23.143

只需要从 AppDelegate 调用它。正如你所写

如果您希望用户订阅而不是订阅通知然后从服务器端处理它仅向已订阅通知的用户（设备令牌）发送通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:23:38.000

您还可以有一个单独的设置视图，您可以从中打开`ON/OFF`特定功能的通知。在服务器端，如果用户有`ON`功能设置，那么您可以跳过该用户获取通知。

# sql - 使用两列数据透视

> ID：11987067
> 
> 赞同：16
> 
> 时间：2012-08-16T12:24:35.220
> 
> 标签：sql, oracle, oracle11g

我有旋转格式的数据。它看起来像这样：

```
-----------------------------------------
| user_id |  org  |   position  | lang  |
-----------------------------------------
|   1001  |   USE |   Boss      | EN    |
|   1001  |   USD |   Bossa     | FI    |
|   1002  |   GWR |   Dim       | SV    |
|   1003  |   GGA |   DCS       | FI    |
|   1003  |   GCA |   DDD       | SV    |
----------------------------------------- 
```

我希望将数据表示为：

```
-------------------------------------------------------------------------------------
| user_id | org_fi |  position_fi |   org_en | position_en  | org_sv  | position_sv |
-------------------------------------------------------------------------------------
|  1001   |   USD  |    Bossa     |   USE    |   Boss       |         |             |
|  1002   |        |              |          |              | GWR     |  Dim        |
|  1003   |   GGA  |    DCS       |          |              | GCA     |  DDD        |
------------------------------------------------------------------------------------- 
```

我认为需要通过命令连接的数据透视查询。

* * *

这就是我试图做的：

```
SELECT user_id, 
    org, 
    position, 
    lang, 
    ROW_NUMBER () OVER (PARTITION BY lang, user_id ORDER BY ROWID) rn
 FROM source 
```

但是，我不知道如何前进。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-16T13:42:10.877

`PIVOT`应该可以正常工作 - [SQL Fiddle 演示](http://sqlfiddle.com/#!4/0ccfc/21) [（从[bluefeets answer](https://stackoverflow.com/a/11987970/17343)借来的模式）]

```
SELECT *
FROM   source
PIVOT (
        MIN(org) AS org,
        MIN(position) AS position
        FOR lang
        IN('EN' AS en, 'FI' AS fi, 'SV' AS sv)
      ); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-16T13:14:32.260

这是一种以您想要的格式获取数据的方法：

```
SELECT user_id, 
  max(case when lang = 'FI' THEN org ELSE ' ' END) org_fi,
  max(case when lang = 'FI' THEN position ELSE ' ' END) position_fi,
  max(case when lang = 'EN' THEN org ELSE ' ' END) org_en,
  max(case when lang = 'EN' THEN position ELSE ' ' END) position_en,
  max(case when lang = 'SV' THEN org ELSE ' ' END) org_sv,
  max(case when lang = 'SV' THEN position ELSE ' ' END) position_sv
FROM source
group by user_id
order by user_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/0ccfc/17)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T13:57:53.663

11gr2 PIVOT example

```
SQL> create table t1
(
user_id number,
org varchar2(10),
position varchar2(10),
lang varchar2(10)
)
Table created.
SQL> insert into t1 values (1,'ABC','VVV','EN')
1 row created.
SQL> insert into t1 values (1,'DEF','WWW','FI')
1 row created.
SQL> insert into t1 values (2,'GHI','XXX','FI')
1 row created.
SQL> insert into t1 values (2,'JKL','YYY','SV')
1 row created.
SQL> insert into t1 values (3,'MNO','ZZZ','EN')
1 row created.
SQL> commit
Commit complete.
SQL> select * from t1

   USER_ID ORG        POSITION   LANG     
---------- ---------- ---------- ----------
         1 ABC        VVV        EN        
         1 DEF        WWW        FI       
         2 GHI        XXX        FI       
         2 JKL        YYY        SV       
         3 MNO        ZZZ        EN       

5 rows selected.
SQL> select * from t1
pivot(max(org) as org, max(position) as position for lang in ('EN' as "EN",'FI' as "FI",'SV' as "SV"))

   USER_ID EN_ORG     EN_POSITION FI_ORG     FI_POSITION SV_ORG     SV_POSITION
---------- ---------- ----------- ---------- ----------- ---------- -----------
         1 ABC        VVV         DEF        WWW                              
         2                        GHI        XXX         JKL        YYY       
         3 MNO        ZZZ                                                     

3 rows selected. 
```

# xcode - xcode 在关闭 cocos2d-x 程序时进入调试模式

> ID：11987070
> 
> 赞同：0
> 
> 时间：2012-08-16T12:24:46.483
> 
> 标签：xcode, xcode4, cocos2d-x

我正在使用 cocos2d-x 2.0 开发我的第一个 ios 游戏。我是这个领域的新人。我在玩模板 cocos2d-x 程序时遇到了一个奇怪的问题。也就是说，当我从 HelloWorld::init() 中删除以下代码时，

```
/////////////////////////////
// 2\. add a menu item with "X" image, which is clicked to quit the program
//    you may modify it.

// add a "close" icon to exit the progress. it's an autorelease object
CCMenuItemImage *pCloseItem = CCMenuItemImage::create(
                                    "CloseNormal.png",
                                    "CloseSelected.png",
                                    this,
                                    menu_selector(HelloWorld::menuCloseCallback) );
pCloseItem->setPosition( ccp(CCDirector::sharedDirector()->getWinSize().width - 20, 20) );

// create menu, it's an autorelease object
CCMenu* pMenu = CCMenu::create(pCloseItem, NULL);
pMenu->setPosition( CCPointZero );
this->addChild(pMenu, 1); 
```

我试图在 ios 模拟器中退出游戏，xcode 进入调试模式，光标停留在以下代码中的“glCear ....”行：

```
// Draw the SCene
void CCDirector::drawScene(void)
{
    // calculate "global" dt
    calculateDeltaTime();

    //tick before glClear: issue #533
    if (! m_bPaused)
    {
       m_pScheduler->update(m_fDeltaTime);
    }

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    /* to avoid flickr, nextScene MUST be here: after tick and before draw.
     XXX: Which bug is this one. It seems that it can't be reproduced with v0.9 */
    if (m_pNextScene)
    {
        setNextScene();
    } 
```

底部窗口显示：this = (cocos2d::CCDisplayLinkDirector *)0x001dcab8

问题一直存在，直到我放回关闭菜单项代码。这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:28:56.973

在iOS模拟器中退出游戏是什么意思？如果你真的完全退出游戏，这就是应该发生的事情，所以这里没有错误，这是因为你只是在连接调试器时退出游戏。

在旁注中，cocos2d-x 中的关闭按钮在 iOS 上是完全不合适的，你不能像那样退出应用程序。我不确定为什么 cocos2d-x 的家伙将它保留在 iOS 上，苹果不批准调用 exit() 的应用程序。

我刚刚注意到这个问题是 3 个月大！希望你没有放弃！

# scala - 如何在scala / play中将casbah mongodb列表转换为json

> ID：11987071
> 
> 赞同：11
> 
> 时间：2012-08-16T12:24:53.830
> 
> 标签：scala, mongodb, playframework, casbah

我目前正在学习scala和mongodb并使用该剧！框架，所以我在思考问题时犯了各种各样的错误。目前我有一个 scala 对象，它通过 casbah 返回从 mongodb 查询返回的数据库对象列表，如下所示；

```
object Alerts  {

   def list() : List[DBObject]= {

        val collection = MongoDatabase.collection;
        val query = MongoDBObject.empty
        val order = MongoDBObject("Issue Time:" -> -1)
        val list = collection.find(query).sort(order).toList
        list
   } 
```

... }

在我的代码的其他地方，我希望在 Json 中输出对象列表 - 所以我有；

```
 val currentAlerts = Alerts.list() 
```

我想写的是这样的；

```
 val resultingJson = currentAlerts.toJson 
```

但是当我这样做时，我可以理解地得到以下错误；

```
 value toJson is not a member of List[com.mongodb.casbah.Imports.DBObject] 
```

我的问题是-将 com.mongodb.casbah.Imports.DBObject 列表转换为 Json 以进行输出的正确方法是什么？

编辑：

为了清楚起见，我真正想做的是相当于

```
val listInJson = collection.find(query).sort(order).toJson 
```

就像我可以写一样

```
val listAsString = collection.find(query).sort(order).toString 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:32:30.413

你可以试试

```
com.mongodb.util.JSON.serialize(Alerts.list()) 
```

这应该返回一个带有警报的 JSON 数组

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T17:34:32.743

我有以下

```
def service() = Action {
 // connect
 val collection = MongoConnection()("someDB")("someCollection")
 // simply convert the result to a string, separating items with a comma
 // this string goes inside an "array", and it's ready to hit the road
 val json = "[%s]".format(
  collection.find(someQuery).toList.mkString(",")
 )

 Ok(json).as("application/json") 
```

}

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T14:32:17.323

我有一个可怕的解决方案如下；

```
val currentAlerts = Alerts.list()

var jsonList : List[JsValue] = Nil

// Iterate over the DBObjects and use to String to convert each to JSON
// and then parse that back into the list so we can use toJson on it later.
// MAD, but works.

for (dbObject <- currentAlerts) {
    jsonList ::=  Json.parse(dbObject.toString)
}

val result = Json.toJson(jsonList)
Ok(result).as("application/json") 
```

肯定有更好的方法吗？

# database - 如何在 Scala 中从实时数据源流式传输延迟数据

> ID：11987072
> 
> 赞同：2
> 
> 时间：2012-08-16T12:24:57.997
> 
> 标签：database, scala, streaming, ehcache

我必须设计一种在 Scala/Java 中流式传输数据的方法，与我收到数据的那一刻相比有一定的延迟。我有一个用于原始数据源（实时数据源）的 API，它让我可以像使用数据库一样查询它，使用类似查询的格式，并且还可以在发生某些事情时获得通知，就像使用 EHCACHE 一样。

现在我想例如根据用户权限以不同的延迟流式传输数据。一些用户会看到以 0 延迟传输的数据，其他的 15 分钟，其他的 60 分钟。

因此，我需要一个由多个较低级别缓存（0 延迟、15 分钟延迟、60 分钟延迟）组成的顶级缓存。

1.  首先，我希望缓存只包含相同类型的元素。这将使事情变得更简单，因为我可以决定元素的唯一 ID，并且我只需根据所需的延迟将请求路由到正确的缓存

2.  稍后，我希望我的延迟缓存可以查询。例如，是否有一部分来自 EHCache 的代码可以回收？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:57:29.147

一个想法：将流数据转换为某种实现[Delayed](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Delayed.html)的事件对象。一旦发生这样的实时事件，就将其放入[DelayedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/DelayQueue.html)中。然后另一个线程可以循环调用[take()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/DelayQueue.html#take%28%29)并检索和处理延迟的事件。

# solr - 如何降低使用同义词找到的结果的 SOLR 分数值？

> ID：11987073
> 
> 赞同：2
> 
> 时间：2012-08-16T12:24:59.293
> 
> 标签：solr

solr 服务器具有与 id 相关联的关键字（如学校、窗口或博客）。

对服务器的查询是非常基本的查询，例如`window AND blog`.

服务器也有一个非常大的 synonyms.txt，所以如果你搜索`world wide web`你也会得到 .txt 的结果`internet`。

问题：如何降低使用同义词找到的结果的分值？

示例：我得到了同义词`world wide web`和`internet`. 我用关键字定义了一个文档，用关键字定义了一个`world wide web`文档`internet`。现在我搜索`internet`：将找到两个文档，但我想要具有确切`internet`关键字排名更高的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:23:46.653

你可以做2个字段。1个有同义词，一个没有。给没有同义词的人更高的权重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:16:31.810

您可以（通过使用同义词文件）更改查询以生成类似的内容（假设我们以关键字开头`world wide web`）：

```
("world wide web"^2.0 OR internet OR WWW) 
```

提升默认形式，没有同义词。

当我说改变时，我是从您的应用程序中说的（查询是为 solr 请求准备的）。

# ruby-on-rails - 用于解决英语复数的 Ruby gem

> ID：11987075
> 
> 赞同：3
> 
> 时间：2012-08-16T12:25:01.273
> 
> 标签：ruby-on-rails, ruby, gem

从某种意义上说，这是一个奇怪的问题，我认为没有答案，但它就在这里。

我正在寻找`gem`可以让我从复数词中获得词根的词。

```
categories => category
people     => person
apples     => apple 
```

诀窍是我在 ruby​​ 中而不是在 ROR 中需要它，因此解决方案应该独立于`ActiveRecord`可能内置了这种机制的解决方案。谢谢。还有一篇关于这个主题的论文，我发现[http://www.csse.monash.edu.au/~damian/papers/HTML/Plurals.html/](http://www.csse.monash.edu.au/~damian/papers/HTML/Plurals.html/)以防有人有兴趣构建 gem :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:00:33.363

此行为在[ActiveSupport](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/string/inflections.rb#L54)中定义，您可以将其单独包含在内，而无需完全依赖 Rails。

```
>> require 'rubygems'
=> true
>> require 'active_support/core_ext/string/inflections'
=> true
>> "categories".singularize
=> "category" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:03:36.840

你总是可以只安装 active_support gem，只需要变形器，这样你就不会加载所有的轨道。导轨的许多部分可以独立使用。

```
$ irb
1.9.3-p194 :001 > require 'active_support/inflector'
=> true 
1.9.3-p194 :002 > ActiveSupport::Inflector.singularize('inflections')
=> "inflection" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:01:29.057

您可以只要求 的变形`ActiveSupport`，而忽略其余的轨道，如下所示：

`require 'active_support/core_ext/string/inflections'`

如果这对您不起作用，请查看[inflections](https://github.com/davidcelis/inflections) gem。

# jquery - 用户可以删除块并再次添加，直到他得到 25 div

> ID：11987078
> 
> 赞同：1
> 
> 时间：2012-08-16T12:25:10.273
> 
> 标签：jquery

我如何更改此代码以限制最多 25 次。用户可以删除块并再次添加它，始终最多 25 次

HTML

**holderBlock** - 它拥有一切

**repeaterIngredient** - 这是克隆的 div

```
<div id="holderBlock">

<div class="repeaterIngredient">                         

    <div class="row grid-12-12">
        <label for="extens_ingredientName" title="Tooltip Information">Ingredient name<span class="entity">T4094</span><em class="form-req"><img src="../../Content/Images/ico_transparent.png" alt="required" /></em></label>
        <textarea name="extens_ingredientName" id="extens_ingredientName" class="textArea70"></textarea>
    </div>

    <div>
        <input type="button" value="Remove Ingredient" title="Remove Ingredient" class="formee-button right remove_ingredient">
        <input type="button" value="Add New Ingredient" title="Add New Ingredient" class="formee-button right add_ingredient">
    </div> 

</div> 
```

jQuery

此代码用于克隆**repeaterIngredient**类并增加内部所有表单元素的 for、name 和 id 用户可以创建另一个**repeaterIngredient**并将其删除，但我需要更改此代码，以便在达到 25 个 div 时停止并正常工作如果用户删除 div 并再次添加它

```
var template = $('#holderBlock .repeaterIngredient:first').clone(),

        ingredientsCount = 1;

        var addIngredient = function () {

            ingredientsCount++;

            var repeaterIngredient = template.clone().find(':input').each(function () {

                var newId = this.id.substring(0, this.id.length - 1) + ingredientsCount;

                $(this).prev().attr('for', newId); // update label for (assume prev sib is label)

                this.name = this.id = newId; // update id and name (assume the same)

            }).end() // back to .repeaterIngredient

                .attr('id', 'repeaterIngredient' + ingredientsCount) // update repeaterIngredient id

                .appendTo('#holderBlock'); // add to container
        };

        //EXECUTE FUNCTION
        $('input.add_ingredient').live("click", addIngredient); // attach event

        // HIDE FIRST REMOVE BUTTON
        $('#holderBlock input.remove_ingredient:first').hide();

        // DELETE CREATED BLOCK
        $('input.remove_ingredient').live("click", function () {
            //console.log($(this).parent());
            $(this).parent().parent().hide();
            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:30:31.953

在创建之前，您需要计算可见 div：

```
if ($('.repeaterIngredient:visible').count() > 25)
  return; 
```

你还需要添加类`repeaterIngredient`：

```
...
.attr('id', 'repeaterIngredient' + ingredientsCount)
.addClass('repeaterIngredient')
.appendTo('#holderBlock');
... 
```

如果您删除`.repeaterIngredient`而不是隐藏，您可以简化优化脚本：

```
$(this).parent().parent().remove(); 
```

而且您不需要计算可见项目：

```
if ($('.repeaterIngredient').count() > 25)
  return; 
```

PS我不测试这段代码。我希望对你有所帮助。

# mysql - easyPhp phpMyAdmin 访问被拒绝

> ID：11987081
> 
> 赞同：4
> 
> 时间：2012-08-16T12:25:16.343
> 
> 标签：mysql, phpmyadmin, easyphp

我在 Windows 7 笔记本电脑上安装了 EasyPhp（版本 5.3.9）并尝试使用包含的 phpMyAdmin 模块（从 easyPhp 管理主页选择），但我无法登录 - 我收到以下错误：

`#1045 - Access denied for user 'root'@'localhost' (using password: NO)`

我根本没有更改任何文件 - 所以它应该只使用 user=root 并且没有密码，我假设。

我检查了 SO 中的其他线程，但找不到任何适用的解决方案。我还尝试完全卸载easyPhp并重新安装它，但同样的问题，即使按照其中一个线程中的建议清除所有浏览器缓存也是如此。

接下来做什么？当我什至无法使用管理工具时，如何使用 EasyPhp 中的 MySQL 模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:32:40.933

默认情况下，phpMyAdmin 不会让您在没有密码的情况下登录。

您需要`config.inc.php`在 phpMyAdmin 目录中打开，并确保其设置如下；

```
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

注意`'AllowNoPassword'`需要设置为true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T01:35:58.303

尝试：

1.  导航

    ```
    C:\Program Files (x86)\EasyPHP-Devserver-16.1\eds-binaries\dbserver\mysql5711x86x160717165359\bin 
    ```

    并运行

    ```
    mysql.exe 
    ```

2.  输入：

    ```
    mysql_upgrade -u root -p 
    ```

显然，这会导致修复一些文件问题的升级。

# jsf - 使用消息包的 JSF 本地化和多元化

> ID：11987086
> 
> 赞同：2
> 
> 时间：2012-08-16T12:25:32.990
> 
> 标签：jsf, localization, messageformat

我正在使用消息包来本地化我的应用程序的输出。现在我想添加复数形式，我想知道是否有办法通过使用消息属性文件和消息参数来实现这一点？

像这样的东西：

```
<h:outputFormat value="#{msg['label.bean']}">
    <f:param value="#{someBean.someProp.size()}" />
</h:outputFormat> 
```

以导致：

> 0个豆子，1个豆子，2个豆子，...

该格式`label.bean={0} bean`当然适用于计数，但是如何根据 的值获得复数“s” `{0}`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:14:14.630

幕后的[`<h:outputFormat>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputFormat.html)用途[`MessageFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)。根据它的javadoc，你可以使用[`ChoiceFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/ChoiceFormat.html)它。进一步的用法在其 javadoc 中有详细说明。

在您的情况下，应该使用以下消息格式模式：

```
label.bean = {0} bean{0,choice,0#s|1#|1<s} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:33:52.203

你可以做这样的事情

```
<ui:param name="plu" value="#{(someBean.someProp.size() eq 1)?'single_key':'multi_key'}"/>

<h:outputFormat value="#{msg[plu]}">
    <f:param value="#{someBean.someProp.size()}" />
</h:outputFormat> 
```

标签看起来像这样

```
single_key= {0} bean

multi_key= {0} beans 
```

# pdo - PDO 准备好的语句有多安全？

> ID：11987088
> 
> 赞同：1
> 
> 时间：2012-08-16T12:25:46.610
> 
> 标签：pdo, sql-injection

我想知道 PDO 准备好的语句是否可以让我免于 SQL 注入？

示例：$DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);

# 我要插入的数据

$data = array('name' => $userInput_1, 'addr' => $userInput_2, 'city' => $userinput_3);

# 例如 $userInput_2 是 SLQ INJECTION。

$STH = $DBH->("INSERT INTO peoples (name, addr, city) value (:name, :addr, :city)");

# 在这种情况下执行后会发生什么？

$STH->执行($data);

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:39:24.573

所有输入都将被正确转义和引用。所以使用 PDO 准备/执行应该可以防止 SQL 注入。

从 php 手册：

> 调用 PDO::prepare() 和 PDOStatement::execute() 为将使用不同参数值多次发出的语句通过允许驱动程序协商查询计划的客户端和/或服务器端缓存来优化应用程序的性能和元信息，**并通过消除手动引用参数的需要来帮助防止 SQL 注入攻击。**

# email - Playframework，二进制pdf文件附件问题

> ID：11987095
> 
> 赞同：0
> 
> 时间：2012-08-16T12:26:24.050
> 
> 标签：email, playframework

我有一个作为 ByteArray 的 pdf 文件，我想知道是否有一种方法可以在不在服务器上创建主文件的情况下附加它。

Play 文档提供的代码只允许附加真实文件。

```
EmailAttachment attachment = new EmailAttachment();
attachment.setDescription("A pdf document");
attachment.setPath(Play.getFile("rules.pdf").getPath()); 
```

我正在使用 Playframework Mail 模块。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:34:19.053

由于 Play 1.x 在后台使用[Apache Commons Email](http://commons.apache.org/email/userguide.html)库，您可以使用[MultiPartEmail#attach(DataSource ds, String name, String description)](http://commons.apache.org/email/apidocs/org/apache/commons/mail/MultiPartEmail.html#attach%28javax.activation.DataSource,%20java.lang.String,%20java.lang.String%29)方法：

```
import org.apache.commons.mail.*;

// create the mail
MultiPartEmail email = new MultiPartEmail();
email.setHostName("mail.myserver.com");
email.addTo("jdoe@somewhere.org", "John Doe");
email.setFrom("me@apache.org", "Me");
email.setSubject("The picture");
email.setMsg("Here is the picture you wanted");

// get your inputstream from your db
InputStream is = new BufferedInputStream(MyUtils.getBlob());  
DataSource source = new ByteArrayDataSource(is, "application/pdf");  

// add the attachment
email.attach(source, "somefile.pdf", "Description of some file");

// send the email
email.send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T11:30:09.973

即将发布的 Play 版本 1.3 将引入一个方法`attachDataSource()`，可以在`Mailer`类中调用该方法。这将允许您轻松地将 ByteArray 作为电子邮件的附件附加，而无需先将它们保存到磁盘或无需使用 Apache Commons 电子邮件。然后，您可以使用“标准”播放方式。

以下是 play bugtracker 中对应的功能请求：http: [//play.lighthouseapp.com/projects/57987/tickets/1500-adding-maillerattachdatasource-functionality](http://play.lighthouseapp.com/projects/57987/tickets/1500-adding-maillerattachdatasource-functionality)

# java - 如何在 Google Guice 中使用 Jersey ExceptionMapper？

> ID：11987097
> 
> 赞同：11
> 
> 时间：2012-08-16T12:26:37.280
> 
> 标签：java, jersey, guice

我正在使用 Jersey Guice，需要配置自定义`ExceptionMapper`

我的模块如下所示：

```
public final class MyJerseyModule extends JerseyServletModule
{
   @Override
   protected void configureServlets()
   {
      ...
      filter("/*").through(GuiceContainer.class);
      ...
   }
} 
```

这是我的`ExceptionMapper`：

```
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;
import javax.ws.rs.ext.ExceptionMapper;

public class MyExceptionMapper implements ExceptionMapper<MyException>
{
   @Override
   public Response toResponse(final MyException exception)
   {
      return Response.status(Status.NOT_FOUND).entity(exception.getMessage()).build();
   }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T12:26:37.280

您的 ExceptionMapper 必须带有注释`@Provider`并且是单例。

```
import com.google.inject.Singleton;

import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

@Provider
@Singleton
public class MyExceptionMapper implements ExceptionMapper<MyException>
{
   @Override
   public Response toResponse(final MyException exception)
   {
      return Response.status(Status.NOT_FOUND).entity(exception.getMessage()).build();
   }
} 
```

然后只需将`ExceptionMapper`其中一个 Guice 模块绑定到`Injector`您的`JerseyServletModule`.Jersey Guice 会自动找到它。

```
import com.google.inject.AbstractModule;

public class MyModule extends AbstractModule
{
   @Override
   protected void configure()
   {
      ...
      bind(MyExceptionMapper.class);
      ...
   }
} 
```

`JerseyServletModule`如果你想，你也可以直接绑定它：

```
public final class MyJerseyModule extends JerseyServletModule
{
   @Override
   protected void configureServlets()
   {
      ...
      filter("/*").through(GuiceContainer.class);
      bind(MyExceptionMapper.class);
      ...
   }
} 
```

# r - 将带有两个标头的 csv 读入 data.frame

> ID：11987103
> 
> 赞同：3
> 
> 时间：2012-08-16T12:26:45.357
> 
> 标签：r, dataframe, spreadsheet

为看似简单的问题道歉，但我似乎无法找到以下重新排列问题的解决方案。

我习惯于`read.csv`读取带有标题行的文件，但我有一个带有两个“标题”行的 Excel 电子表格 - 单元格标识符（a，b，c ... g）和三组测量值（x，y和 z；每个单元格 1000 秒）：

```
a           b       
x    y  z   x   y   z
10   1  5   22  1   6
12   2  6   21  3   5
12   2  7   11  3   7
13   1  4   33  2   8
12   2  5   44  1   9 
```

csv文件如下：

```
a,,,b,,
x,y,z,x,y,z
10,1,5,22,1,6
12,2,6,21,3,5
12,2,7,11,3,7
13,1,4,33,2,8
12,2,5,44,1,9 
```

我怎样才能到达 R 中的 data.frame ，如下所示？

```
cell x  y   z
a    10 1   5
a    12 2   6
a    12 2   7
a    13 1   4
a    12 2   5
b    22 1   6
b    21 3   5
b    11 3   7
b    33 2   8
b    44 1   9 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T13:06:09.627

使用基础 R `reshape()`：

```
temp = read.delim(text="a,,,b,,
x,y,z,x,y,z
10,1,5,22,1,6
12,2,6,21,3,5
12,2,7,11,3,7
13,1,4,33,2,8
12,2,5,44,1,9", header=TRUE, skip=1, sep=",")
names(temp)[1:3] = paste0(names(temp[1:3]), ".0")
OUT = reshape(temp, direction="long", ids=rownames(temp), varying=1:ncol(temp))
OUT
#     time  x y z id
# 1.0    0 10 1 5  1
# 2.0    0 12 2 6  2
# 3.0    0 12 2 7  3
# 4.0    0 13 1 4  4
# 5.0    0 12 2 5  5
# 1.1    1 22 1 6  1
# 2.1    1 21 3 5  2
# 3.1    1 11 3 7  3
# 4.1    1 33 2 8  4
# 5.1    1 44 1 9  5 
```

基本上，您应该跳过第一行，那里每隔三列就有一个字母 ag。由于子列名都是一样的，R会自动在第三列之后的所有列后面附加一个分组号；所以我们需要在前三列中添加一个分组号。

然后，您可以创建一个“id”变量，或者像我在这里所做的那样，只使用 ID 的行名。

您可以将“时间”变量更改为“单元格”变量，如下所示：

```
# Change the following to the number of levels you actually have
OUT$cell = factor(OUT$time, labels=letters[1:2]) 
```

然后，删除“时间”列：

```
OUT$time = NULL 
```

# 更新

要回答下面评论中的问题，如果第一个标签不是字母，这应该仍然没有问题。我将采取的顺序如下：

```
temp = read.csv("path/to/file.csv", skip=1, stringsAsFactors = FALSE)
GROUPS = read.csv("path/to/file.csv", header=FALSE, 
                  nrows=1, stringsAsFactors = FALSE)
GROUPS = GROUPS[!is.na(GROUPS)]
names(temp)[1:3] = paste0(names(temp[1:3]), ".0")
OUT = reshape(temp, direction="long", ids=rownames(temp), varying=1:ncol(temp))
OUT$cell = factor(temp$time, labels=GROUPS)
OUT$time = NULL 
```

# unit-testing - 使用 IntelliJ 为 BlackBerry 开发

> ID：11987108
> 
> 赞同：2
> 
> 时间：2012-08-16T12:27:14.767
> 
> 标签：unit-testing, blackberry, intellij-idea

我想知道是否有人对下一步有想法。

我正在为黑莓开发。IDEA 不会将 RIM 安装识别为 JSDK 或 Mobile SDK。所以我创建了没有 SDK 的项目并将 RIM jar 文件作为依赖项附加。

我正在尝试使用 JUnit 和 Mockito 编写尽可能多的单元测试，但要运行它们，IDEA 需要 JSDK。所以我创建了额外的模块，我在其中设置了 JSDK，正确的语言级别并且它可以工作。创建额外的模块已经很麻烦了（如果我们可以设置 JSDK 和其他编译器、代码和测试的运行时选项会更好）但我很高兴。

我还依赖于我们在 android 和 J2ME 中使用的一些常用库。我将它们添加为具有 JSDK 1.6 和语言级别 1.3 的模块。而且我也能够对其进行开发和运行测试。

但我遇到了 LEDA EAP 的问题。IDEA 现在抱怨不兼容，`java.lang`因为它在 RIM jar 和库的 JSDK 中都发现了它们。现在我正在考虑解决我最喜欢的 ide 的下一个麻烦。当然它是 EAP 并且事情可以改变。

但是有人有任何建议或类似的情况设置吗？

# html - 标题中的其他字体大小

> ID：11987110
> 
> 赞同：3
> 
> 时间：2012-08-16T12:27:19.383
> 
> 标签：html, css, font-size, html-heading

好的，事情就是这样。我的 <h1> 标题中需要 2 种不同的字体大小。<br> 后面的文字需要比前面的文字大。

```
<h1>Welcome text from<br>Name</h1> 
```

所以我尝试了

```
h1 {
  color: #c3c2c2;
  font-size: 35px;
}

h1 br:after {
  font-size: 50px;
} 
```

但这不起作用，有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:29:18.373

如果您不想或无法更改标记，则可以使用[`:first-line`](http://www.w3.org/TR/css3-selectors/#first-line)CSS3 中的选择器。像这样的东西：

```
 <h1>Welcome text from <br/> Name</h1> 

 h1 { 
   color: #c3c2c2; 
   font-size: 50px; 
 } 

 h1:first-line { 
   font-size: 35px; 
 } 
```

[根据 Quirksmode](http://quirksmode.org/css/contents.html)的说法，兼容性很好，特别是如果您使用单冒号语法而不是`::first-line`语法（所有优秀的浏览器都支持它，IE 5.5 及更高版本也支持）。

请参阅[jssfile](http://jsfiddle.net/6vNJs/)以获取工作演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:30:06.930

如果您能够编辑标记，请将“名称”包装在一个跨度中，并使用您的选择器定位该跨度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T12:32:31.127

这是一种方法：

HTML：

```
<h2>Heading<br><span class="name">Name</span></h2> 
```

CSS：

```
.name {
    font-size:200%;
} 
```

例子：

[http://jsfiddle.net/ghWKm/](http://jsfiddle.net/ghWKm/)

但是，更常见的做法是将标题保持在一行并将子标题作为新元素（`h3`例如）放在其下方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T12:31:19.293

您可以使用

```
`<h1>`Welcome text from`<span class="abc">Name</span></h1> 
```

代替

`<h1>``<br>`来自名称的欢迎文本`</h1>`

并赋予 .abc 风格

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T12:31:42.613

为什么不将每一边都包裹在一个跨度中，然后在那里设置不同的尺寸，这也意味着你不需要 br。

```
<h1>Welcome text from<span class="size2">Name</span></h1>

h1 {
  color: #c3c2c2;
  font-size: 35px;
}

h1 .size2 {
  font-size: 50px;
} 
```

# javascript - jsp表达式和java脚本在一起

> ID：11987115
> 
> 赞同：0
> 
> 时间：2012-08-16T12:27:30.197
> 
> 标签：javascript, jsp, expression

我在我的jsp中将标签定义为，

```
<label id='mylabel'> 
```

我正在为它动态设置一些文本，

```
<%if(somecondtion){%>
   <script>document.getElementById('mylabel').innerHTML ="Your payement processed";
<%}%> 
```

但现在我想从数据库中添加付款日期为，您的付款于 2012-08-10 处理。请验证。

所以我试着像，

```
 <%if(somecondtion){
    Date myDate = retrieved date from DB; // Here I have retrieved date from DB which   is like 2012-08-10
  %>
  <script>document.getElementById('mylabel').innerHTML ="Your payement processed on    "+<%=myDate%>. "Please verify.";
  <%}%> 
```

它不工作..我尝试了几种方法..有时它会给出错误；丢失。有时它显示日期为 1988。不能将 java 脚本和 jsp 表达式一起用于日期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:31:23.360

您必须确保日期是 JavaScript 字符串的一部分：

```
<script>document.getElementById('mylabel').innerHTML ="Your payment processed on <%=myDate%>. Please verify."; 
```

换句话说，无需“添加”日期。只需在 JavaScript 字符串的中间发出它，它就会在客户端上评估代码时出现。

# regex - MVC 在使用电话号码的正则表达式验证输入时引发解析错误

> ID：11987117
> 
> 赞同：0
> 
> 时间：2012-08-16T12:27:34.720
> 
> 标签：regex, asp.net-mvc-3

我使用`^[0-9()- ]+$`正则表达式来验证电话号码。基本上我只想允许**数字、连字符和两个大括号，即 ( )**。

我在模型级别属性中添加了这个（在 MVC3.0 中）。在给出一个有效的字符串（比如 5299912548）后，它接受了，但在视图中它的抛出错误为“**解析”^[0-9()-]+$"-[xy] 范围以相反的顺序。** “。

使用的正则表达式有问题还是其他 MVC3 的东西有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:36:25.990

```
^[0-9()\- ]+$ 
```

您需要转义连字符 - 否则它是一个范围指示器。

你也可以这样做：

```
^[0-9() -]+$ 
```

连字符和空格已交换。正则表达式中的连字符位置以前一直困扰着我，有时我需要在这些情况下重新调整位置。

如果有人能告诉我为什么会这样，我将不胜感激。

但这将解决这个问题。

**编辑：**

研究揭示了答案。一些正则表达式允许连字符出现在第一个或最后一个，并且仍然按字面意思解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:45:03.057

问题出在这部分：

```
[/-.] 
```

这意味着“从 '/' 到 '.' 的字符范围” - 但 '/' 在 '.' 之后 在 Unicode 中，所以范围没有意义。

如果您希望它表示“斜线、破折号或句点”，那么您需要：

```
[/\-.] 
```

换句话说，您需要避开破折号。请注意，如果这是在常规 C# 字符串文字中，您还需要执行另一级别的转义：

```
string pattern = "[/\\-.]"; 
```

使用逐字字符串文字意味着您不需要转义反斜杠：

```
string pattern = @"[/\-.]"; 
```

或者，您可以将破折​​号放在开头：

```
[-/.] 
```

或结束：

```
[/.-] 
```

# android - Android Restlet HTTPS - 通信错误 (1001) - 处理连接时出错

> ID：11987119
> 
> 赞同：0
> 
> 时间：2012-08-16T12:27:43.767
> 
> 标签：android, google-app-engine, https, restlet

我正在尝试使用 servlet 执行获取请求，但出现通信错误 (1001) - 处理连接时出错。

我的代码很简单：

```
 Engine.getInstance().getRegisteredClients().clear();
    Engine.getInstance().getRegisteredClients().add(new HttpsClientHelper(null));

    ClientResource cr = new ClientResource(URI);
    cr.setRequestEntityBuffering(true);
    cr.setChallengeResponse(ChallengeScheme.HTTP_BASIC, 
            SensorUpdaterApp.getInstance().GOOGLE_ACCOUNT_EMAIL, 
            SensorUpdaterApp.getInstance().GOOGLE_ACCOUNT_TOKEN);
    DataTableResource resource = cr.wrap(DataTableResource.class);

    Long newId = null;
    try{
        newId = resource.createDataset();
    } catch(Exception e){ e.printStackTrace(); } 
```

这是我在 logcat 中得到的堆栈跟踪：

```
08-16 13:21:24.221: I/org.restlet(11223): Starting the internal [HTTPS/1.1] client
    08-16 13:21:24.311: D/dalvikvm(11223): GC_FOR_MALLOC freed 9361 objects / 434480 bytes in 59ms
    08-16 13:21:24.391: D/dalvikvm(11223): GC_FOR_MALLOC freed 444 objects / 16384 bytes in 54ms
    08-16 13:21:24.471: D/dalvikvm(11223): GC_FOR_MALLOC freed 505 objects / 18800 bytes in 53ms
    08-16 13:21:24.561: D/dalvikvm(11223): GC_FOR_MALLOC freed 703 objects / 26368 bytes in 41ms
    08-16 13:21:24.631: D/dalvikvm(11223): GC_FOR_MALLOC freed 870 objects / 32216 bytes in 41ms
    08-16 13:21:24.911: D/dalvikvm(11223): GC_FOR_MALLOC freed 15029 objects / 968672 bytes in 46ms
    08-16 13:21:25.241: I/org.restlet(11223): A recoverable error was detected (1001), attempting again in 2000 ms.
    08-16 13:21:25.731: D/dalvikvm(11223): GC_FOR_MALLOC freed 24605 objects / 1514848 bytes in 60ms
    08-16 13:21:27.531: I/org.restlet(11223): A recoverable error was detected (1001), attempting again in 2000 ms.
    08-16 13:21:28.491: D/dalvikvm(11223): GC_FOR_MALLOC freed 33569 objects / 1502352 bytes in 78ms
    08-16 13:21:29.821: W/System.err(11223): Communication Error (1001) - Error while processing a connection
    08-16 13:21:29.821: W/System.err(11223):    at org.restlet.resource.ClientResource.doError(ClientResource.java:611)
    08-16 13:21:29.821: W/System.err(11223):    at org.restlet.engine.resource.ClientInvocationHandler.invoke(ClientInvocationHandler.java:236)
    08-16 13:21:29.821: W/System.err(11223):    at $Proxy5.createDataset(Native Method)
    08-16 13:21:29.821: W/System.err(11223):    at com.sensorupdater2.activities.main.CreateNewDatasetAsyncTask.doInBackground(CreateNewDatasetAsyncTask.java:38)
    08-16 13:21:29.821: W/System.err(11223):    at com.sensorupdater2.activities.main.CreateNewDatasetAsyncTask.doInBackground(CreateNewDatasetAsyncTask.java:1)
    08-16 13:21:29.821: W/System.err(11223):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    08-16 13:21:29.821: W/System.err(11223):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    08-16 13:21:29.831: W/System.err(11223):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    08-16 13:21:29.831: W/System.err(11223):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
    08-16 13:21:29.831: W/System.err(11223):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
    08-16 13:21:29.831: W/System.err(11223):    at java.lang.Thread.run(Thread.java:1102)
    08-16 13:21:29.831: W/System.err(11223): Caused by: java.lang.NullPointerException
    08-16 13:21:29.831: W/System.err(11223):    at org.apache.harmony.xnet.provider.jsse.ClientSessionContext$HostAndPort.hashCode(ClientSessionContext.java:214)
    08-16 13:21:29.841: W/System.err(11223):    at java.util.HashMap.put(HashMap.java:393)
    08-16 13:21:29.841: W/System.err(11223):    at org.apache.harmony.xnet.provider.jsse.ClientSessionContext.putSession(ClientSessionContext.java:190)
    08-16 13:21:29.841: W/System.err(11223):    at org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl.unwrap(ClientHandshakeImpl.java:308)
    08-16 13:21:29.841: W/System.err(11223):    at org.apache.harmony.xnet.provider.jsse.SSLRecordProtocol.unwrap(SSLRecordProtocol.java:413)
    08-16 13:21:29.841: W/System.err(11223):    at org.apache.harmony.xnet.provider.jsse.SSLEngineImpl.unwrap(SSLEngineImpl.java:478)
    08-16 13:21:29.841: W/System.err(11223):    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:383)
    08-16 13:21:29.841: W/System.err(11223):    at org.restlet.ext.ssl.internal.ReadableSslChannel.onDrain(ReadableSslChannel.java:114)
    08-16 13:21:29.841: W/System.err(11223):    at org.restlet.engine.io.Buffer.process(Buffer.java:553)
    08-16 13:21:29.841: W/System.err(11223):    at org.restlet.engine.io.Buffer.process(Buffer.java:668)
    08-16 13:21:29.841: W/System.err(11223):    at org.restlet.engine.io.ReadableBufferedChannel.read(ReadableBufferedChannel.java:172)
    08-16 13:21:29.841: W/System.err(11223):    at org.restlet.engine.io.Buffer.fill(Buffer.java:391)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.connector.InboundWay.onFill(InboundWay.java:278)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.io.Buffer.process(Buffer.java:597)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.io.Buffer.process(Buffer.java:668)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.connector.Way.processIoBuffer(Way.java:477)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.connector.InboundWay.processIoBuffer(InboundWay.java:353)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.connector.Way.onSelected(Way.java:430)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.connector.ConnectionController.controlConnections(ConnectionController.java:105)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.connector.ConnectionController.doRun(ConnectionController.java:156)
    08-16 13:21:29.851: W/System.err(11223):    at org.restlet.engine.connector.Controller.run(Controller.java:158)
    08-16 13:21:29.851: W/System.err(11223):    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    08-16 13:21:29.851: W/System.err(11223):    ... 5 more
    08-16 13:21:31.181: D/dalvikvm(11223): GC_FOR_MALLOC freed 31659 objects / 1496144 bytes in 101ms
    08-16 13:21:31.181: I/org.restlet(11223): Stopping the internal[HTTPS/1.1] client 
```

在我的 libs 目录中，我有：

*   gcm.jar
*   org.restlet.ext.httpclient.jar - 可能没用
*   org.restlet.ext.net.jar - 可能没用
*   org.restlet.ext.ssl.jar
*   org.restlet.jar

我用其他一些客户端测试了服务器，它似乎可以工作

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:30:22.113

我发现只导入`org.restlet.ext.net.HttpClientHelper`HTTPS 和 HTTP 都可以工作，所以你可能想尝试一下（但要小心 - 这种行为会根据`HttpClientHelper`你导入的确切内容而改变）。

如果您有意使用，`org.restlet.ext.ssl.HttpsClientHelper`则还需要导入 org.jsslutils_1.0 库。如果你不这样做，那么连接就会永远超时（至少这是我在 Android 上使用 Restlet 2.1.0 测试时看到的）。

Restlet 2.1.0[下载](http://www.restlet.org/downloads/)中的 readme.txt显示了每个 JAR 的依赖关系。org.restlet.ext.ssl 依赖于 jsslutils：

> org.restlet.ext.ssl（Restlet 扩展 - SSL）
> - org.jsslutils_1.0

仅供参考，Restlet 下载还包括所有依赖库，因此您可以从那里获取它们。

以下是我在测试时发现的其他一些杂项：

*   确保您导入并使用正确的连接器（当我导入 `HttpClientHelper 时，Eclipse 提供了 4 个不同的连接器）。Restlet wiki 连接器页面列出了可用的服务器和客户端连接器：
    [http ://wiki.restlet.org/docs_1.1/13-restlet/27-restlet/37-restlet.html](http://wiki.restlet.org/docs_1.1/13-restlet/27-restlet/37-restlet.html)

*   当我尝试时，`org.restlet.ext.httpclient.HttpClientHelper`我认为我不需要导入它的所有依赖项来让我的 HTTP 连接器工作（可能是因为我只使用客户端部分）。

*   确保您所有的 JAR 都来自同一个 Restlet 版本，否则您可能会遇到奇怪的错误。

*   如果您只导入`org.restlet.ext.httpclient.HttpClientHelper`连接器而不是 HTTPS 连接器，您将看到一个`java.lang.IllegalStateException: Scheme 'https' not registered`.

# c++ - 如何在c中返回一个浮点数组并将其保存为一个浮点数组以供以后使用？

> ID：11987122
> 
> 赞同：0
> 
> 时间：2012-08-16T12:27:52.347
> 
> 标签：c++, c

我有一个 C++ 函数，它返回一个`std::vector<float>`.

我正在与一些 C 代码交互。

如何更改此 C++ 函数以使其返回一些指向浮点数组的指针，以及如何保存此返回的数组以便在我的 C 代码中使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:29:56.243

如果 C++11 不可用[`std::vector::data`](http://en.cppreference.com/w/cpp/container/vector/data)，您可以获得指向“原始”数组的指针。`&my_vector[0]`但是，如果向量操作强制调整向量的大小，那么原始存储将在内存中移动，并且该指针将不再安全使用。如果有**可能**发生这种情况，您将需要分配单独的存储空间（例如，通过创建 的副本`vector`）并提供指向该存储空间的指针。

**更新：**伍德罗的评论让我注意到您实际上是在*从函数返回指针*之后。您只能返回指向堆分配内存的指针，因此您不能使用本地`vector`（或任何其他类型的堆栈分配内存）来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:42:44.620

从 C 的角度来看，`vector<float>`做了两件事：

1.  包含一些浮动
2.  自动释放它使用的内存

由于 2 对 C 来说是一个陌生的概念（不会自动发生任何事情，当然不会释放内存），因此没有简单的替代方法。基本上你有三个选择。它们与您希望函数在 C 中“返回字符串”时的三个选项相同，尽管在这里我们需要告诉调用者一个指针和一个长度。

在我看来，第三个选项是“正确答案”，从某种意义上说，它是你在设计中首先尝试的选项，如果设计看起来不错，你就坚持下去。第一个和第二个可以作为便利函数提供，以防调用代码真正受益于它们，或者包裹在第三个周围或旁边。

### 返回分配的内存

```
size_t c_wrapper(float **pResult) {
    try {
        std::vector<float> vec(cpp_function());
        *pResult= (float*) std::malloc(vec.size() * sizeof(float));
        if (!*pResult) { /* handle the error somehow */ }
        std::copy(vec.begin(), vec.end(), *pResult);
        return vec.size();
    } catch (std::bad_alloc) { /* handle the error somehow */ }
} 
```

优点：简单的调用代码。

缺点：调用者必须`free`占用内存，即使预先知道大小并且数据很乐意放入本地数组变量中。由于内存分配，可能会很慢。

型号：`strdup`（Posix）

### 使用共享的静态持续时间资源

请参阅 jrok 的回答：

```
size_t c_wrapper(float **pResult) {
    try {
        static std::vector<float> vec;
        vec = cpp_function(); // or cpp_function().swap(vec) in C++03
        *pResult = &vec[0];
        return vec.size();
    } catch (std::bad_alloc) { /* handle the error somehow */ }
} 
```

优点：简单得可笑的调用代码。

缺点：程序中只有一个实例`save`，所以返回的指针只指向正确的数据，直到下一次`c_wrapper`被调用。特别是，这是非常不安全的线程。如果结果非常大，那么从调用者不再需要它到下一次调用该函数时，该内存被浪费了。

型号：`strtok`, `gethostbyname`.

### 将数据写入调用者提供的缓冲区

```
size_t c_wrapper(float *buf, size_t len) {
    try {
        std::vector<float> vec(cpp_function());
        if (vec.size() <= len) {
            std::copy(vec.begin(), vec.end(), buf);
        }
        return vec.size()
    } catch (std::bad_alloc) { /* handle the error somehow */ }
} 
```

优点：最灵活。

缺点：调用者必须传入足够大的缓冲区（假设`cpp_function`行为一致，调用者可以通过调用大小为 0 和空指针的函数来找出大小，从某个地方获取足够大的缓冲区，然后再次调用该函数）。

型号：`strcpy`, `snprintf`, `getaddrinfo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:55:31.180

```
#include <vector>
#include <iostream>

int main()
{
    std::vector<float> vec;
    vec.push_back(1.23);
    vec.push_back(3.123);
    int len = vec.size();
    float *arr = new float[len];
    std::copy(vec.begin(),vec.end(),arr);
    for(int i = 0; i < sizeof(arr)/sizeof(arr[0]); ++i){
        std::cout << arr[i] << "\n";
    }
    delete [] arr;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:00:20.290

您可以将返回的临时向量保存在具有静态存储持续时间的向量对象中。

```
std::vector<float> foo()
{
    return std::vector<float>();
}

float* call_foo_and_get_pointer()
{
    static std::vector<float> save; // this line is executed only at the first
                                    // call to enclosing function
    save = foo();
    return save.data();  // or &data[0]
} 
```

从返回的指针`call_foo_and_get_pointer`保证在下一次调用它之前保持有效。

# java - 如何从Java中的另一个类获取特定的类实例？

> ID：11987123
> 
> 赞同：5
> 
> 时间：2012-08-16T12:27:51.767
> 
> 标签：java, oop, model-view-controller, class, instance

我使用该方法创建了以下类，该`main`方法创建 的新实例`Application`和 的实例`ApplicationModel`，`ApplicationView`并`ApplicationController`为此特定的`Application`.

```
public class Application
{

    // Variables

    private ApplicationSettings         settings;
    private ApplicationModel            model;
    private ApplicationView             view;
    private ApplicationController       controller;

    // Constructor

    public Application()
    {
        settings        = new ApplicationSettings();
        model           = new ApplicationModel();
        view            = new ApplicationView(model);
        controller      = new ApplicationController();
    }

    // Main method

    public static void main(String[] args)
    {
        Application application = new Application();
    }

    // Getters for settings, model, view, controller for instance of Application

} 
```

我知道，永远只有一个唯一的`Application`.

我想在我的`ApplicationModel`,`ApplicationView`和`ApplicationController`类中获取这个特定的实例。

这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T12:31:26.127

我会在 Application 类上使用单例。

放置一种`public static`方法来返回您唯一的应用程序实例。

```
public class Application
{
    private Application() { } // make your constructor private, so the only war
                              // to access "application" is through singleton pattern

    private static Application _app;

    public static Application getSharedApplication() 
    {
        if (_app == null)
            _app = new Application();
        return _app;
    }
} 
```

[您可以在此处](http://en.wikipedia.org/wiki/Singleton_pattern)阅读有关*单例设计模式* 的更多信息。

每次您需要唯一的`Application`实例时，您都需要：

```
Application app = Application.getSharedApplication(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:31:09.100

如果您需要保证只有一个 Application 实例并且您需要这些类可以访问它，那么您希望使用 Singleton 设计模式。我不会评论它是否是构建应用程序的最佳方式，但它会满足您问题中的要求。

[单例设计模式教程](http://www.javabeginner.com/learn-java/java-singleton-design-pattern)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T12:40:46.977

`Application`将类的构造函数更改为`private`并将`this`对象发送到`ApplicationXxx`类。

```
private Application()
{
    settings        = new ApplicationSettings(this);
    model           = new ApplicationModel(this);
    view            = new ApplicationView(this, model);
    controller      = new ApplicationController(this);
} 
```

您将能够从该方法中调用`new`该类。`Application``main`

您`ApplicationSettings`的`ApplicationModel`,`ApplicationView`和`ApplicationController`必须更新以`Application`在其构造函数中获取对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T12:52:10.143

将类型的参数添加`Application`到组合的构造函数中。当您创建他们的实例时，只需通过`this`. 例如

```
public class Application {
  String s = "Setting";
  class ApplicationSettings {
    Application sc;
    ApplicationSettings(Application sc){
      this.sc = sc;
      System.out.println(sc.s);
    }
  }

  // Variables

  private ApplicationSettings settings;

  // Constructor

  public Application()
  {
    settings = new ApplicationSettings(this);
  }

  // Main method

  public static void main(String[] args)
  {
    Application application = new Application();

  }

  // Getters for settings, model, view, controller for instance of Application

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:39:31.080

我现在尝试了这个，您可以在其他类`this`的构造函数中作为构造函数 arg传递`Application`（假设为主类声明了一个引用）。这样，您显然可以创建`Application`该类的多个实例。如果那是你想要的...

# c++ - 为什么在指向对象的指针上调用方法与在对象本身上调用方法具有不同的行为？

> ID：11987124
> 
> 赞同：2
> 
> 时间：2012-08-16T12:27:53.717
> 
> 标签：c++, pointers

我有一些代码，其中有一个指向对象的指针。我在该指针上调用了一个方法，但在这种情况下该方法的行为是错误的。我尝试在对象本身上调用一个方法，这实际上给出了该方法的所需行为。

为什么这会导致不同的行为？

还有一种方法可以在不使用指针的情况下将对象分配给新变量，因为我想要在对象本身上调用的方法的行为？

谢谢。

编辑：

希望是一个足够的例子：

在机器人类中：

```
std::vector<ProjectOne::R_ID> Robot::positions;
int Robot::ID = -1;

Robot::Robot(double x, double y)
{
    ++ID;
    robot_ID = ID;
    initialX = x;
    initialY = y;
    // Placeholder. Doesn't actually get used properly atm.
    fWidth = 0.35;
    px = x;
    py = y;

    ProjectOne::R_ID msg;   
    msg.R_ID = robot_ID;
    msg.x = x;
    msg.y = y;
    positions.push_back(msg);

    string robotOdom = "robot_" + int2str(robot_ID) + "/odom";
    string robotVel = "robot_" + int2str(robot_ID) + "/cmd_vel";

    RobotOdometry_sub = n.subscribe<nav_msgs::Odometry>(robotOdom,1000,&Robot::ReceiveOdometry,this);
    RobotVelocity_pub = n.advertise<geometry_msgs::Twist>(robotVel,1000);
    ros::spinOnce();
}

void Robot::ReceiveOdometry(nav_msgs::Odometry msg)
{
    //This is the call back function to process odometry messages coming from Stage.    
    px = initialX + msg.pose.pose.position.x;
    py = initialY + msg.pose.pose.position.y;
    ptheta = angles::normalize_angle_positive(asin(msg.pose.pose.orientation.z) * 2);
}

int Robot::selectLeader()
{
    int leader_ID = robot_ID;
    double lowestDistance = 9999999999.9;
    for (unsigned int i=0;i<positions.size();i++)
    {
        double distance = calculateDistance(positions[i].x, positions[i].y, 0.0, 0.0);            
        if (distance < lowestDistance && distance != 0.0)
        {
            leader_ID = positions[i].R_ID;
            lowestDistance = distance;
        }
    }
    ROS_INFO("leader is: %d", leader_ID);
    return leader_ID;
}

double Robot::calculateDistance(double x1, double y1, double x2, double y2)
{
    double deltax = x2 - x1;
    double deltay = y2 - y1;
    double distanceBetween2 = pow(deltax, 2) + pow(deltay, 2);
    double distanceBetween = sqrt(distanceBetween2);
    return distanceBetween;
}

double Robot::calculateHeadingChange(double x, double y)
{
    double deltax = x - px;
    double deltay = y - py;
    double angleBetween = atan2(deltay, deltax);
    double headingChange = angleBetween - ptheta;
    return headingChange;
}

void Robot::align(double x, double y)
{
    ros::Rate loop_rate(10);
    double headingChange = calculateHeadingChange(x, y);
    double angularv = headingChange / 5;
    double heading = ptheta + headingChange;

    while (heading > 2 * M_PI)
    {
        heading -= 2 * M_PI;
    }
    while (heading < 0)
    {
        heading += 2 * M_PI;
    }
    geometry_msgs::Twist msg;
    msg.linear.x = 0;
    msg.angular.z = angularv;
    while (ros::ok())
    {
        RobotVelocity_pub.publish(msg);
    ros::spinOnce();
    ROS_INFO("Heading Change %f pthea is %f %f %f", headingChange, ptheta, px, py);
    loop_rate.sleep();
    }
} 
```

这是调用该方法的代码：

```
int main(int argc, char **argv) {
        ros::init(argc, argv, "robotNode");

    Robot r1(5,10);
    Robot r2(15,20);
    Robot r3(10,30);
    Robot r4(25,16);
    Robot r5(5,28);
    Robot r6(10,10);

    Robot Group[6] = {r1, r2, r3, r4 ,r5, r6};
    std::vector<Robot> Herd;
    int leaderID = r1.selectLeader();

    Robot * leader;

    for (int i=0;i<6;i++) {
        if (Group[i].robot_ID  == leaderID) {
            leader = &Group[i];
        } else {
            Herd.push_back(Group[i]);
        }
    }

    (*leader).align(0.0, 0.0); //Problem area
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:44:23.433

问题是您的数组（`Group`）和向量（`Herd`）都包含自动对象（`r1`和朋友）的副本；所以你对它们所做的任何事情都不会影响原件。

您可能想改用指针：

```
Robot * Group[6] = {&r1, &r2, &r3, &r4, &r5, &r6};
std::vector<Robot*> Herd; 
```

通常，您需要注意不要在对象被销毁后取消引用这些指针；在这种情况下你很好，因为数组和向量的生命周期包含在对象的生命周期中。

`Robot`使类不可复制以防止此类错误可能是有意义的。在 C++11 中，您可以通过删除复制构造函数和复制赋值来做到这一点：

```
Robot(Robot const &) = delete;
void operator=(Robot const &) = delete; 
```

在较旧的语言版本中，将它们声明为私有，没有实现；或（更好）派生自执行此操作的基类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:51:37.973

这是你的问题：

```
Robot Group[6] = {r1, r2, r3, r4 ,r5, r6};
int leaderID = r1.selectLeader(); 
```

该组包含项目的副本。您没有向我们展示`Robot`复制构造函数，但我假设它为新构造的`Robot`. 如果是这样，则组中的任何元素都不会具有等于 your 的 ID `leaderID`，因此`leader`永远不会设置您的指针。

一种解决方案是使您`Group`的`Robot*`指针数组而不是`Robot`对象数组。`Herd`你的机器人也会出现类似的问题。

# jquery-isotope - isotop jquery 投资组合取决于项目的数量

> ID：11987126
> 
> 赞同：1
> 
> 时间：2012-08-16T12:28:00.680
> 
> 标签：jquery-isotope

Isotope 预装了 Wordpress 主题。一切正常，但通过过滤，布局表被打破，所以有漏洞。显然这是因为项目总数。

带滤镜：图片库：[http ://www.lrguas.ch.preview02.net4all.ch/multimedias/](http://www.lrguas.ch.preview02.net4all.ch/multimedias/)

问题的想法？

请注意，我没有限制要显示的项目数量。预先感谢您的帮助。问候马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:58:26.080

可能是一个简单的解决方案：在 Chrome 的 devtools 中检查 8 个过滤后的图片项目时，它们具有不同的宽度，使一些元素进入下一行，留下一个洞。如果您确保每个同位素元素具有相同的宽度，对应于您的列宽，那么它应该可以工作。

国际友谊，学生档案，学术生活：225 px

Bluche 地区，Bulle 地区，社会和体育活动，Bluche 校园设施，Bulle 校园设施：235px

所以，我要尝试的第一件事是在 .work-item 类上设置正确的边距，或者每个 Isotope 项目的任何元素确定 Isotope 布局引擎的宽度，对应于您的列宽。

# api - 使用 Graph API 对评论回复点赞

> ID：11987130
> 
> 赞同：0
> 
> 时间：2012-08-16T12:28:30.270
> 
> 标签：api, facebook-graph-api, facebook-comments

我正在尝试从图形 API 获取每个评论回复的点赞数。

鉴于来自线程[http://graph.facebook.com/10150790362005844_23680728](http://graph.facebook.com/10150790362005844_23680728)的 JSON 回复，我似乎无法找到正确的 id 来获取每条评论的点赞数。

例如[https://graph.facebook.com/10150791016840844](https://graph.facebook.com/10150791016840844)返回 false。

我对 facebook-comments 做了一些试验，发现正确的 id 应该是 *grap-link*10150790374830844_23680907，但是我找不到通过 Graph API 中的常规方式找到这个 id 的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:31:56.533

这是一个有趣的。此 ID 是评论的 ID。您可以通过查看`type`此处的字段来看到这一点：http: [//graph.facebook.com/10150790362005844_23680728 ?metadata=1](http://graph.facebook.com/10150790362005844_23680728?metadata=1)

要获得评论回复的点赞数，您必须向上钻取以找到该评论最初附加到的 post_id，然后查询 /POST_ID/comments，这将为您提供点赞数。

如果您找不到评论，您将不得不翻页，`/user/feed`直到找到显示此评论的帖子已创建并从那里获取 post_id。

# android - 如何在android中测量环境温度

> ID：11987134
> 
> 赞同：9
> 
> 时间：2012-08-16T12:28:40.023
> 
> 标签：android, temperature, ambient

我想在安卓设备上测量环境温度。但我的设备不包括温度计传感器。我该如何测量它？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-26T17:42:18.727

这是如何**在 Android 中获取环境温度**的基本示例：

```
import android.support.v7.app.AppCompatActivity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Build;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity implements SensorEventListener {

    private TextView temperaturelabel;
    private SensorManager mSensorManager;
    private Sensor mTemperature;
    private final static String NOT_SUPPORTED_MESSAGE = "Sorry, sensor not available for this device.";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        temperaturelabel = (TextView) findViewById(R.id.myTemp);
        mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
        if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.ICE_CREAM_SANDWICH){
            mTemperature= mSensorManager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE); // requires API level 14.
        }
        if (mTemperature == null) {             
            temperaturelabel.setText(NOT_SUPPORTED_MESSAGE);
        }       
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        if (id == R.id.action_settings) {
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(this, mTemperature, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    protected void onPause() {                 
        super.onPause();
        mSensorManager.unregisterListener(this);
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        float ambient_temperature = event.values[0];
        temperaturelabel.setText("Ambient Temperature:\n " + String.valueOf(ambient_temperature) + getResources().getString(R.string.celsius));     
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // Do something here if sensor accuracy changes.
    }
} 
```

您可以从以下网址下载完整示例： **[https ://github.com/Jorgesys/Android_Ambient_Temperature](https://github.com/Jorgesys/Android_Ambient_Temperature)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:30:09.543

这是无法做到的。温度传感器即使存在电池温度和cpu温度。

编辑：正如 swayam 指出的那样，API 14 中添加了环境温度传感器，但[姜饼兼容性文档](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en/us/compatibility/android-2.3-cdd.pdf)明确表示不包括温度测量

> 设备实现可以但不应包含温度计（即温度传感器）。如果设备实现确实包含温度计，则它必须测量设备 CPU 的温度。它不得测量任何其他温度。（请注意，此传感器类型在 Android 2.3 API 中已弃用。）

`Sensor.TYPE_TEMPERATURE`但大多数手机仅包含已弃用的 CPU 温度测量传感器。所以这并不能给出准确的温度。你应该使用`Sensor.TYPE_AMBIENT_TEMPERATURE`我认为很多手机都没有的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T12:34:51.483

试试这段代码：

```
public class SensorActivity extends Activity, implements SensorEventListener {
 private final SensorManager mSensorManager;
 private final Sensor mTemp;

 public SensorActivity() {
     mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
     mtemp = mSensorManager.getDefaultSensor(Sensor.TYPE_TEMPERATURE);
 }

 protected void onResume() {
     super.onResume();
     mSensorManager.registerListener(this, mTemp, SensorManager.SENSOR_DELAY_NORMAL);
 }

 protected void onPause() {
     super.onPause();
     mSensorManager.unregisterListener(this);
 }

 public void onAccuracyChanged(Sensor sensor, int accuracy) {
 }

 public void onSensorChanged(SensorEvent event) {
 } 
```

另外，您可以在此处查看**SensorManager**的文档：http : [//developer.android.com/reference/android/hardware/SensorManager.html](http://developer.android.com/reference/android/hardware/SensorManager.html)

更多关于传感器的信息：

[http://developer.android.com/guide/topics/sensors/sensors_overview.html](http://developer.android.com/guide/topics/sensors/sensors_overview.html)

[http://developer.android.com/guide/topics/sensors/sensors_environment.html](http://developer.android.com/guide/topics/sensors/sensors_environment.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-18T05:42:31.650

## **安卓5.0**

## *使用 CPU 和电池获取环境温度*

*   ***首先获得平均运行热量

    1.  查找实际温度并删除冷设备 CPU 温度

        *   例如。40°C - 29°C = 11°C 运行温度
    2.  获取电池温度并与 CPU 温度进行比较

        *   电池 > cpu = 充电/保持/不使用
        *   电池 < cpu = 密集型 CPU 任务/使用情况
    3.  计算 30 分钟内的最低读数

    4.  计算比较热差

        *   使用 = 平均温度 - 3°C
        *   无使用 = averageTemp

`

```
// EXAMPLE ONLY - RESET HIGHEST AT 500°C
    public Double closestTemperature = 500.0;
    public Long resetTime = 0L;
    public String getAmbientTemperature(int averageRunningTemp, int period)
    {
    // CHECK MINUTES PASSED ( STOP CONSTANT LOW VALUE )  
        Boolean passed30 = ((System.currentTimeMillis() - resetTime) > ((1000 * 60)*period));
        if (passed30)
        {
            resetTime = System.currentTimeMillis();
            closestTemperature = 500.0;
        }

    // FORMAT DECIMALS TO 00.0°C
        DecimalFormatSymbols dfs = new DecimalFormatSymbols(Locale.US);
        dfs.setDecimalSeparator('.');
        DecimalFormat decimalFormat = new DecimalFormat("##.0", dfs);

    // READ CPU & BATTERY
        try
        {
       // BYPASS ANDROID RESTRICTIONS ON THERMAL ZONE FILES & READ CPU THERMAL

            RandomAccessFile restrictedFile = new RandomAccessFile("sys/class/thermal/thermal_zone1/temp", "r");
            Double cpuTemp = (Double.parseDouble(restrictedFile.readLine()) / 1000);

        // RUN BATTERY INTENT
            Intent batIntent = this.registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));    
       // GET DATA FROM INTENT WITH BATTERY
            Double batTemp = (double) batIntent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, 0) / 10;

       // CHECK IF DATA EXISTS
            if (cpuTemp != null)
            {
           // CPU FILE OK - CHECK LOWEST TEMP
                if (cpuTemp - averageRunningTemp < closestTemperature)
                    closestTemperature = cpuTemp - averageRunningTemp;
            }
            else if (batTemp != null)
            {
             // BAT OK - CHECK LOWEST TEMP
                if (batTemp - averageRunningTemp < closestTemperature)
                    closestTemperature = batTemp - averageRunningTemp;
            }
            else
            {
            // NO CPU OR BATTERY TEMP FOUND - RETURN 0°C
                closestTemperature = 0.0;
            }
        }
        catch (Exception e)
        {
            // NO CPU OR BATTERY TEMP FOUND - RETURN 0°C
            closestTemperature = 0.0;
        }
     // FORMAT & RETURN
        return decimalFormat.format(closestTemperature);
    } 
```

> 我已经知道不建议绕过这样的受限文件夹，但是 CPU 温度总是以固定的度数返回，我需要完整的小数位 - 所以我使用了这种相当老套的方法来绕过使用 RandomAccessFile 的限制
> 
> *请不要评论说 - 这是不可能的，我知道使用这种技术检测周围的温度是不完全可能的，但是经过很多天 - 我已经设法让它达到 2°C 精度*

**我的平均热量比实际温度高 11°C**

使我的用法，

`getAmbientTemperature(11,30);`

11 是平均温度

30 是 Next Reset Time（最小检查周期）

**注意**， • 检查屏幕正常运行时间可以帮助计算热量随时间的变化
• 检查加速度计可以帮助建议用户将手机放下以冷却 CPU 和电池以提高准确性。
• 需要为权限添加 Android 5.0+ 支持

**我的设备上的 2°C 精度**

# php - 如何在 symfony 1.4 Doctrine 中连接两个表并更新它们？

> ID：11987135
> 
> 赞同：0
> 
> 时间：2012-08-16T12:28:40.053
> 
> 标签：php, symfony1, doctrine, symfony-1.4

我有一个由两种用户类型 Seeker 和 Owner 组成的系统。

**用户**表：

*   f_name
*   l_name
*   电子邮件
*   密码
*   用户名

**搜索**表：

*   电话
*   性别
*   地址
*   多布

和**所有者**表：

*   公司名称
*   指定
*   性别

我想要做的是加入这两个表并执行更新并通过 id 读取每个搜索者和所有者的详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:15:08.240

不确定 symfony 1.4 使用哪个版本的学说。但假设它是学说 1.2，这是你可以做的。

注意：永远记住在学说中这些表是作为类引用的。

选择使用 DQL。

```
$q = Doctrine_Query::create()
    ->from('User u')
    ->leftJoin('u.Seeker s')
    ->leftJoin('u.Owner o');
$result = $q-> fetchArray(); 
```

上述查询将获取所有相关记录，如果您只想从列中获取特定值，您可以使用`select()`

```
$q = Doctrine_Query::create()
    ->select('u.f_name, u.l_name, u.email, u.password, u.username')
    ->from('User u')
    ->leftJoin('u.Seeker s')
    ->leftJoin('u.Owner o');
$result = $q-> fetchArray(); 
```

# mysql - 重塑表，将旧值作为新表的列名

> ID：11987136
> 
> 赞同：1
> 
> 时间：2012-08-16T12:28:45.813
> 
> 标签：mysql

我正在寻找一个允许我“展平”具有相同 ID 的行的查询：

*   第二列的值用作新表的列名
*   第三列中的值确定新表中的值。

举个例子：

一张桌子看起来像这样。

```
ID       year     event
------------------------
Guid1    2005     A
Guid1    2010     B
Guid2    2020     C 
```

我想让它看起来像..

```
ID       2005      2010     2020
Guid1    A         B        
Guid2                       C 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:39:45.350

我假设 (id, year) 组合是独一无二的？否则不确定你期望什么输出。如果是唯一的，它看起来像这样：

```
SELECT
  id,
  MIN(IF(year = 2005, event, NULL)) AS '2005',
  MIN(IF(year = 2010, event, NULL)) AS '2010',
  MIN(IF(year = 2020, event, NULL)) AS '2020'
FROM
  t
GROUP BY
  id 
```

以上意味着您必须在`MIN(IF(...))`每个所需年份重复该语句一次。SQL 无法自动执行此操作：SQL 不会混合数据和元数据。您不能在查询中动态指定列。要么使用“*”，要么指定确切的列。

# vb.net - 如何从sharepoint中的文件夹中获取所有文件？

> ID：11987139
> 
> 赞同：0
> 
> 时间：2012-08-16T12:28:57.543
> 
> 标签：vb.net, sharepoint-2010

我正在处理共享点应用程序。我想从库中的子文件夹中获取所有文件。库名称是“记录库”。在这个库文件夹中的名称是“PROCUREMENT”。在这个文件夹中，我还有一个文件夹名称是“PURCHASING”。在这个文件夹中，我有文件。我想获取所有这些文件名。我怎样才能得到？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:57:15.550

[https://sharepoint.stackexchange.com/questions/19847/sharepoint-2010-how-to-get-all-items-in-a-folder-contained-in-a-list](https://sharepoint.stackexchange.com/questions/19847/sharepoint-2010-how-to-get-all-items-in-a-folder-contained-in-a-list)

This might help. People will not write the code for you. You need to attempt what you are asking.

# objective-c - 向 CGPoint 类型参数发送 nil

> ID：11987142
> 
> 赞同：5
> 
> 时间：2012-08-16T12:29:12.083
> 
> 标签：objective-c

假设我有这个方法：

```
- (void)placeView:(UIView*)theView withCenterIn:(CGPoint)centerPoint; 
```

所以我通过视图和一个点到视图的中心。

但碰巧我不需要指定中心，只需要指定视图。

传递“nil”会导致错误。

请建议如何跳过通过中心点。

请记住，我需要像这样使用该方法：

```
- (void)placeView:(UIView*)theView withCenterIn:(CGPoint)centerPoint{
    if(centerPoint == nil){//and I understand that it's a wrong comparison, as I cannot pass "nil" to CGPoint
        //set a random center point
    }
    else{
        //set that view to the specified point
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T18:05:01.163

您不能将`nil`其用作“无意义”指示器，因为它仅用于对象，并且`CGPoint`是`struct`. （正如 dasblinkenlight 已经说过的那样。）

在我的几何库中，我定义了一个“null”`CGPoint`用作“no point”占位符，以及一个对其进行测试的函数。由于 a 的组件`CGPoint`是`CGFloat`s，并且`float`s 已经具有“无效值”表示形式 -- `NAN`，在 math.h 中定义 -- 我认为这是最好的使用方法：

```
// Get NAN definition
#include <math.h>

const CGPoint WSSCGPointNull = {(CGFloat)NAN, (CGFloat)NAN};

BOOL WSSCGPointIsNull( CGPoint point ){
    return isnan(point.x) && isnan(point.y);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T12:34:54.793

`CGPoint`是一个 C `struct`，你不能通过`nil`它。您可以创建一个不采用不必要的单独方法，`CGPoint`并摆脱您的`if`声明，如下所示：

```
- (void)placeView:(UIView*)theView withCenterIn:(CGPoint)centerPoint{
    //set that view to the specified point
}

- (void)placeView:(UIView*)theView {
    //set a random center point
} 
```

如果您坚持保留一种方法，则可以将一个点指定为“特殊”（例如，`CGMakePoint(CGFLOAT_MAX, CGFLOAT_MAX)`），将其包装在 a 中`#define`，并使用而不是`nil`.

另一种解决方案是将你的包装`CGPoint`在`NSValue`：

```
NSValue *v = [NSValue withPoint:CGMakePoint(12, 34)];
CGPoint p = [v pointValue]; 
```

# iphone - 检查 NULL 不起作用

> ID：11987144
> 
> 赞同：0
> 
> 时间：2012-08-16T12:29:17.790
> 
> 标签：iphone, ios, rest, null

我正在检查此字典中的项目（从服务器返回）是否为 NULL，如下所示：

```
 NSString *imageURL = [userDict objectForKey:@"image_url"];
    NSString *userName = [userDict objectForKey:@"username"];
    NSString *typeName = [userDict objectForKey:@"type"];

    if (imageURL == NULL || userName == NULL || typeName  == NULL || imageURL.length == 0) {
        localImage = [UIImage imageNamed:@"first.png"];
        [addAnnotation setTitle:@"Something"];
        [addAnnotation setSubTitle:@"Wrong"];
    } 
```

但是，在一条记录中（上面是在 for 循环中）`[userDict objectForKey:@"image_url"]`返回`"<null>"`但在上面的 if 语句中没有得到正确处理。为什么我的空检查不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:32:01.690

代替

```
if([userDict objectForKey:@"image_url"] == nil) 
```

用这个：

```
if([userDict objectForKey:@"image_url"] == [NSNull null]) 
```

当您处理由 JSON 反序列化器或类似程序返回的字典时，这工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:30:38.637

尝试比较

`[NSNull null]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:34:38.773

`[NSNull null]`字典返回 null 对象，您可以使用这种方式检查它们，因此您可以与 null 对象进行比较。`Null`应该用于非对象指针。`nil`用于objective-c`id`类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:43:21.717

检查所有 Null 之类`if(object==[NSNull null]||object==NULL||object==nil)`的。它将检查所有类型。所以你不需要具体。

# makefile - 制作 rApache 的 Makefile 给了我错误

> ID：11987151
> 
> 赞同：0
> 
> 时间：2012-08-16T12:29:46.480
> 
> 标签：makefile, rapache

提前道歉，我是Linux和这些东西的新手。

我必须安装 rApache 1.2.0，但是当我在终端上写：

```
make -f ~/Makefile.am 
```

它给了我很多错误，例如：

```
make: *** No rule to make target "mod_R.h", needed by "mod_R.so". 
```

或者

```
make: *** No rule to make target "@DOCROOT@/httpd.conf.in", needed by "@DOCROOT@/httpd.conf". 
```

这是 Makefile.am（[链接](https://github.com/jeffreyhorner/rapache/blob/master/Makefile.am "rapache/Makefile.am at master · jeffreyhorner/rapache · GitHub")）：

```
# DARWIN has to be different than everyone else
# and define their autoconf $shlibpath_var to be DYLD_LIBRARY_PATH
SHLIBPATH_VAR=@SHLIBPATH_VAR@

ACLOCAL_AMFLAGS = -I m4

APXS=@APXS@
HTTPD=@HTTPD@
DOCROOT=@DOCROOT@

APREQ=@APREQ@
APREQ_COMPILE=@APREQ_COMPILE@
APREQ_INSTALL=@APREQ_INSTALL@
APREQ_CLEAN=@APREQ_CLEAN@
APREQ_LIB_DIR=@APREQ_LIB_DIR@
APREQ_INCLUDES=@APREQ_INCLUDES@
APREQ_LINKLD=@APREQ_LINKLD@

RPROG=@RPROG@
RPROGBATCH=R_DEFAULT_PACKAGES=NULL @RPROG@ --vanilla --no-readline --slave -f
R_HOME = `$(RPROG) RHOME`
R_LD_LIBRARY_PATH = $(R_HOME)/lib
RINCLUDES=@RINCLUDES@
RLINKLD=@RLINKLD@

INCLUDES = $(RINCLUDES) $(APREQ_INCLUDES)
LDFLAGS = $(RLINKLD) $(APREQ_LINKLD)
LD_LIBRARY_PATH=$(R_LD_LIBRARY_PATH):$(APREQ_LIB_DIR)
RPATH=@RPATH@

all: mod_R.so $(DOCROOT)/httpd.conf

mod_R.so: .apreq-config mod_R.c mod_R.h
    @echo
    @echo Compiling mod_R
    @echo
    $(APXS) $(INCLUDES) -c mod_R.c $(RPATH) $(LDFLAGS)

.apreq-config:
    @echo
    @echo Configuring libapreq2
    @echo
    $(APREQ_COMPILE)
    touch .apreq-config

install: all
    $(APXS) -i -n R mod_R.la
    $(APREQ_INSTALL)

$(DOCROOT)/httpd.conf: $(DOCROOT)/httpd.conf.in
    $(RPROGBATCH) tools/config_http.R --args $(APXS) $(HTTPD)

itest: all
    @echo
    @echo Point your browser to http://localhost:8181/index.html
    @echo
    $(SHLIBPATH_VAR)=$(LD_LIBRARY_PATH) R_HOME=$(R_HOME) $(HTTPD) -X -f $(DOCROOT)/httpd.conf

test: all $(DOCROOT)/httpd.conf

stop: all
    $(SHLIBPATH_VAR)=$(LD_LIBRARY_PATH) R_HOME=$(R_HOME) $(HTTPD) -X -f $(DOCROOT)/httpd.conf -k stop

valgrind: all
    $(SHLIBPATH_VAR)=$(LD_LIBRARY_PATH) R_HOME=$(R_HOME) valgrind $(HTTPD) -X -f $(DOCROOT)/httpd.conf

debug: all
    @echo
    @echo Copy/paste the following line to gdb
    @echo
    @echo run -X -f $(DOCROOT)/httpd.conf 
    @echo
    $(SHLIBPATH_VAR)=$(LD_LIBRARY_PATH) R_HOME=$(R_HOME) gdb $(HTTPD)

clean:
    rm -rf $(OBJS) core mod_R.o mod_R.so *~ .libs *.o *.slo *.lo *.la .apreq-config
    $(APREQ_CLEAN)

distclean: clean
    rm -rf mod_R.h Makefile .depend .install libtool config.log config.status test/httpd.conf test/access_log test/error_log test/httpd.pid test/accept.lock* aclocal.m4 autom4te.cache libapreq2/library/t/Makefile libapreq2/config.nice libapreq2/module/apache/Makefile
    $(APREQ_CLEAN) 
```

任何帮助将不胜感激。

谢谢，肖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:35:00.767

makefile.am 是自动工具的模板

makefile.am -> 自动制作 -> makefile.in

makefile.in -> autoconf -> Makefile

必须有一个 INSTALL 或一个 README 文件。

一般命令是

```
./configure
make
make test
make install 
```

尝试`./configure --help`选项（--prefix 如果你不是管理员）

# waf - 如何使用自定义任务创建的静态库？

> ID：11987156
> 
> 赞同：2
> 
> 时间：2012-08-16T12:29:52.580
> 
> 标签：waf

我想使用 waf 触发生成文件来构建其他库。为此，我创建了以下任务：

```
def build(bld):
    def run(self):
        bld_dir = self.generator.bld.path.get_bld()
        src_dir = self.inputs[0].parent
        tgt = self.outputs[0]
        tgt_dir = bld_dir.make_node(os.path.splitext(tgt.name)[0])
        cmd = 'BUILDDIR="{tgt_dir}" make config gdb=1 debug=1 cc={cc} && BUILDDIR="    {tgt_dir}" make'.format(
        tgt_dir = tgt_dir.abspath(),
        cc = self.env.get_flat("CC"))
        self.exec_command(cmd, cwd=src_dir.abspath())
        return self.exec_command(['cp', lib.abspath(), tgt.abspath()],
                                 cwd=tgt_dir.abspath())

    bld(
            rule = run,
            source = "Makefile",
            target = 'metis',
    ) 
```

如何告诉 waf 该任务创建了一个静态库，以便我可以在 use 关键字中使用“metis”：

```
 bld(
            features = "cxx cxxprogramm"
            source = "main.cpp",
            target = 'main',
            use = 'metis'
    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:20:08.597

为了最终解决我在link_task上创建的问题，它基本上什么都不做（类似于ccroot.py中的fake_lib）：

```
from waflib.TaskGen import feature, after_method
from waflib.Tools.ccroot import stlink_task

class custom_stlib(stlink_task):
    """ Dummy link task """
    pass

@feature("custom_stlib")
def custom_lib(self):
    self.env['custom_stlib_PATTERN']    = 'lib%s.a'
    self.link_task = self.create_task('custom_stlib', [])
    self.link_task.add_target(self.target)

def build(bld):
    # ...
    bld(
            features = "cxx custom_stlib",
            target = 'metis',
            after = "metis_bld",
    ) 
```

# ruby - 如何限制从rails中的数据库字段中检索到的字符数？

> ID：11987158
> 
> 赞同：0
> 
> 时间：2012-08-16T12:29:58.653
> 
> 标签：ruby, ruby-on-rails-3

考虑数据库表（文本）中的一段（约 400 个字符）。喜欢

> 离复活节只有一周的时间了。我已经开始我的假期了。在这个复活节期间拜访我叔叔的想法很棒。他的农场在康沃尔郡的这个村庄。这个村庄非常宁静和美丽。我已经问过我的姨妈是否可以带上我的狗山姆。我向她保证我会控制住他。10 月，他发起了攻击，并吃了她农场里的一些动物。但他是家庭的一员，我不能丢下他。

但我只需要从中检索有限的字符，比如 ~150 个字符。

> 离复活节只有一周的时间了。我已经开始我的假期了。在这个复活节期间拜访我叔叔的想法很棒。他的农场在康沃尔郡的这个村庄。这个村子很安静……

rails 中是否有任何功能或仅`truncate(:limit,:option{})`适用于该输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:19:33.130

假设您有一个`Passage`带有 field的模型`text`，您可以像这样[选择特定的字段](http://guides.rubyonrails.org/active_record_querying.html#selecting-specific-fields)（并在其中使用 SQL 函数）：

```
passages = Passage.select("id, LEFT(text,10) as text_short, CHAR_LENGTH(text) as text_length")
# => [#<Passage id: 1>, #<Passage id: 2>, #<Passage id: 3>]
passages.first.id
# => 1
passages.first.text_short
# => "There is o"
passages.first.text_length
# => 453 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T21:10:06.677

为什么不获取整个字符串而只使用前 150 个字符？我怀疑它会减慢速度。

`somehow_access_string[0...150] + '...'`

# android - 通过 getContentResolver().insert(Browser.BOOKMARKS_URI, values) 添加后，书签在浏览器应用中不可见；

> ID：11987165
> 
> 赞同：0
> 
> 时间：2012-08-16T12:30:15.980
> 
> 标签：android, browser, bookmarks, galaxy, android-contentresolver

我使用以下代码添加书签：

```
ContentValues values = new ContentValues();

        values.put(Browser.BookmarkColumns.TITLE, "bookmark title");
        values.put(Browser.BookmarkColumns.URL, "http://www.someurl.com/");
        values.put(Browser.BookmarkColumns.BOOKMARK, 1);
        values.put(Browser.BookmarkColumns.CREATED, System.currentTimeMillis());
        values.put(Browser.BookmarkColumns.DATE, 0L);
        values.put(Browser.BookmarkColumns.VISITS, 0);

        getContentResolver().insert(Browser.BOOKMARKS_URI, values); 
```

如果我在 HTC Sensation 设备上运行它，我可以在书签应用程序中看到新书签。

但是，如果我在三星 Galaxy S（1 或 2）上运行它，则书签不存在。

我知道它已成功添加到数据库中（我查询了所有书签并且它就在那里），但我不明白为什么我实际上不能在浏览器应用程序的其他书签中看到它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:33:37.623

使用[Browser.savebookmark](http://developer.android.com/reference/android/provider/Browser.html#saveBookmark%28android.content.Context,%20java.lang.String,%20java.lang.String%29)而不是使用 contentProvider。

# javascript - 使用 jQuery 动态生成图片源

> ID：11987176
> 
> 赞同：0
> 
> 时间：2012-08-16T12:30:50.347
> 
> 标签：javascript, jquery, html

我有这段代码，有人在这里帮助我，它基本上将选择选项转换为 div 元素，并在它们旁边显示一个图像。

```
 $('#property_types option').slice(1).each(
function(){
    var text = $(this).text(),
        outputTo = $('#output'),
        div = $('<div />').text(text),
        img = $('<img />', {'src' : text}).prependTo(div);
    div.appendTo(outputTo);
}); 
```

现在，输出如下：

```
 <div><img src="Apartment" /> Apartment</div>
 <div><img src="Building" /> Building</div>
 <div><img src="Land" /> Land</div>
 <div><img src="Office" /> Office</div> 
```

我也想动态调整 src 。

使它像：

```
 <div><img src="images/Apartment.png" /> Apartment</div>
 <div><img src="images/Building.png" /> Building</div>
 <div><img src="images/Land.png" /> Land</div>
 <div><img src="images/Office.png" /> Office</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:32:04.980

将文本添加到 src

```
$('#property_types option').slice(1).each(
function(){
    var text = $(this).text(),
        outputTo = $('#output'),
        div = $('<div />').text(text),
        img = $('<img />', {'src' : 'images/'+text+'.png'}).prependTo(div);
    div.appendTo(outputTo);
}); 
```

和

```
$('#property_types option').slice(1).each(
function(){
    var text = $(this).text(),
        outputTo = $('#output'),
        div = $('<div />').text(text),
        href = $('<a />', {'href' : '#', 'onclick' : 'go'+text+'();'}).prependTo(div),
        img = $('<img />', {'src' : 'images/'+text+'.png'}).prependTo(href);
    div.appendTo(outputTo);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:32:10.050

试试这个：

```
 $('#property_types option').slice(1).each(function(){
      var text = $(this).text(),
          outputTo = $('#output'),
          div = $('<div />').text(text),
          img = $('<img />', {'src' : 'images/'+text+'.png'}).prependTo(div);
      div.appendTo(outputTo);
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:44:08.707

试试这个

```
$(document).ready(function() {

    var source = 'http://upload.wikimedia.org/wikipedia/en/thumb/e/e9/Ruby_on_Rails.svg/150px-Ruby_on_Rails.svg.png'
    outputTo = $('#output');
    var div = $('<div />').text('sdfsdfdsf');
    var img = $('<img />').attr('src', source).prependTo(div);
    div.appendTo(outputTo);
});​

​ 
```

# django - django haystack 如何在单词中找到子字符串？

> ID：11987177
> 
> 赞同：3
> 
> 时间：2012-08-16T12:30:51.593
> 
> 标签：django, django-haystack

在我的领域中，内容是“示例”。我不仅想找到确切的单词“example”，还想找到“examp”。我怎样才能做到这一点？有没有什么选择。什么都找不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:44:05.667

如果您只想搜索以某个字符串开头的对象，那么只需查看 Haystack SearchQuerySet API 文档。它类似于 Django QuerySet API，因此可以编写：

```
SearchQuerySet().filter(content__startswith='examp')
SearchQuerySet().filter(content__contains='examp') 
```

或任何你想要的。

但这个问题还有更深层次的东西。我不认为你真的需要。由于搜索引擎的工作方式 - 当有人搜索 eq 'monitoring' 时，它会被阻止（这是获取类似于词根的东西的过程 - 所以我们将从 'monitoring' 中得到 fe 'monitor'），这将是事实上搜索过。此外，搜索索引中的所有内容都会被阻止，因此搜索监视器将返回包含 fe 'monitors'、'monitoring'、'monitorize' 等的结果。

# ruby-on-rails - 如何在 ruby on rails 中的每个新记录插入上添加随机 id 功能

> ID：11987182
> 
> 赞同：1
> 
> 时间：2012-08-16T12:31:03.910
> 
> 标签：ruby-on-rails, random, insert, record

我有一张与帖子有关的桌子

**架构：**

```
id | post_id | user_id | title | content 
```

现在所有列都已设置并按预期工作，但现在我想在 post_id 列中添加一个唯一 ID，如**7384756291**在插入数据库的每条新记录中

如何添加此功能？我想我可以轻松地创建一个随机 ID，但问题是如何在插入记录之前确保它与其他 ID 的唯一性，否则创建新的并重试...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:41:24.970

继续尝试直到它不存在：

```
post_id = rand(10000000000)

while Model.exists?(:post_id => post_id)
  post_id = rand(10000000000)
end

Model.create(:post_id => post_id, ...) 
```

# android - 安卓：android:targetSdkVersion 和 android:maxSdkVersion

> ID：11987193
> 
> 赞同：3
> 
> 时间：2012-08-16T12:31:31.977
> 
> 标签：android

`android:targetSdkVersion`xml`android:maxSdkVersion`属性如何使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:32:33.250

这些属性可`android:minSdkVersion, android:maxSdkVersion`让您指定您的应用将支持的设备范围，**Google**将使用这些设备过滤其内容。

假设您的设备上有 Android**版本 11**即**Honeycomb**，我制作了一个应用程序并指定`android:minVersion = "14"`（即**ICS**），那么我的应用程序将不会显示在您设备的*Play Store*中，同样的`android:maxVersion`目的是相同的。

开发人员使用该属性`android:targetSdkVersion`来指定他们最关注的平台，假设 70% 的 Android 设备用户在他们的手机上安装了版本 10 即**Gingerbread**，因此开发人员在 2.3 设备上测试应用程序将是一个更好的选择并将 android:targetSdkVersion 指定为相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:36:56.353

```
<uses-sdk android:minSdkVersion="integer" 
          android:targetSdkVersion="integer"
          android:maxSdkVersion="integer" /> 
```

**说明：** 让您可以通过 API 级别整数表示应用程序与一个或多个 Android 平台版本的兼容性。应用程序表达的 API Level 将与给定 Android 系统的 API Level 进行比较，不同 Android 设备的 API Level 可能有所不同。

**属性：**

**android:minSdkVersion** 一个整数，指定应用程序运行所需的最低 API 级别。如果系统的 API Level 低于此属性中指定的值，Android 系统将阻止用户安装应用程序。您应该始终声明此属性。

**android:targetSdkVersion** 该属性通知系统您已经针对目标版本进行了测试，并且系统不应启用任何兼容性行为来保持您的应用程序与目标版本的前向兼容性。该应用程序仍然能够在旧版本上运行（低至 minSdkVersion）。

**android:maxSdkVersion** 一个整数，指定应用程序设计运行的最大 API 级别。

在 Android 1.5、1.6、2.0 和 2.0.1 中，系统会在安装应用程序以及在系统更新后重新验证应用程序时检查此属性的值。在任何一种情况下，如果应用程序的 maxSdkVersion 属性低于系统本身使用的 API 级别，那么系统将不允许安装应用程序。在系统更新后重新验证的情况下，这实际上会从设备中删除您的应用程序。

[更多详情](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:40:27.880

补充一下 Alexis 所写的内容，这些 XML 标记是 Google Play 商店知道您的应用程序可以部署到哪些设备的方式。它还会影响您在开发期间可以使用的 API 级别。如果您想知道究竟应该支持多远，请查看[Android 仪表板](http://developer.android.com/about/dashboards/index.html)页面上的饼图以查看当前设备的细分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T12:36:27.897

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.eample.tut"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />****
<uses-permission android:name="android.permission.INTERNET"/>
<application
....
</application>
</manifest> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:32:33.203

在您的 android 清单中写入（示例）：

```
<uses-sdk
        android:maxSdkVersion="16"
        android:minSdkVersion="10"
        android:targetSdkVersion="10" /> 
```

有关更多信息，请参阅[此](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)内容。

# node.js - 我应该如何将hiredis添加到我的package.json文件中？

> ID：11987195
> 
> 赞同：2
> 
> 时间：2012-08-16T12:31:39.587
> 
> 标签：node.js, redis, npm

我看到安装[hiredis](https://github.com/pietern/hiredis-node/)需要一种我以前从未见过的格式。而不是预期的：

```
npm install hiredis 
```

...格式实际上是：

```
npm install hiredis redis 
```

我应该如何将hiredis添加到我的package.json依赖项中以便正确安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:51:59.440

如果可用，该`redis`模块将自动使用。`hiredis`

```
npm install redis hiredis 
```

等同于

```
npm install redis
npm install hiredis 
```

简而言之，只需将其包含在您的`package.json`任何其他模块中即可。

```
"dependencies": {
  "redis": "",
  "hiredis": ""
} 
```

# c# - 强制所有派生类实现具有只读性质的某个属性

> ID：11987197
> 
> 赞同：1
> 
> 时间：2012-08-16T12:31:46.273
> 
> 标签：c#, windows

只是想了解什么是最好的方法，我会尝试解释我的问题，这似乎是一个更长的问题，抱歉，

我有一个类 Element，两个类 Shape 和 Audio 派生自它，另外两个类 Text 和 Image 派生自 Shape，进一步的类 Video 派生自 Image。我需要在这些类中的每一个上实现一个类型属性，该属性必须具有只读性质，因为除了实际类型之外，没有任何意义在这些类中设置类型，例如：Image 上的 Type 属性将始终返回一个值 Image 而没有别的。那么如何实现这个强制所有类实现 Type 属性的层次结构呢？这些类中的每一个都有自己的功能，而不是可以标记为抽象的基本元素类，这将允许我将类型属性标记为抽象，这将强制它在派生类上实现，但仅限于一个级别，我如何强制它在视频上实施？请建议我最好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:44:19.703

创建一个定义Type属性的接口，使所有需要强制实现Type的类都继承自该接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:44:19.720

正如您所说，基类可以使属性抽象，这将强制它由所有派生类实现。但是，如果您的第二层类（文本和图像）是具体的，则不能强制派生类（视频）实现方法（因为根据定义，具体类必须完全实现）。

您可以在 Text/Image 类中轻松地将属性标记为 Virtual，以便它*可以*被派生类覆盖，但这不会强制它。

也许您可以使用泛型和泛型基类或接口做一些事情，但这取决于您对设计的更多了解。

您可能需要重新考虑如何设计对象层次结构（如果可能） - 也许 Video 不应该从 Image 派生。这真的是“是”关系吗？如果没有，也许您可​​以更改对象层次结构或使用接口而不是基类来实现所需的结果。

# javascript - 将 javascript 函数从 foreach 切换到 for 循环

> ID：11987200
> 
> 赞同：1
> 
> 时间：2012-08-16T12:31:57.813
> 
> 标签：javascript, function, loops, for-loop, foreach

我试图修复我使用“forEach”构建的一个功能，该功能与应该过时的网络浏览器（IE）不兼容。我在 Javascript 中做到了这一点。我尝试将其转换为 for 循环，但没有成功。如果有人可以通过摆脱 foreach 并使用 for 循环来帮助我转换这两个函数，我将不胜感激。

这是他们引用的两个数组。

```
var yr1 = 2011, yr2 = 2012, yr3 = 2013, yr4 = 2014;
var years = [yr1, yr2, yr3, yr4];
//array with months and associated days
var calendar = [
    ["January", 31],["February", 28],["March", 31],["April", 30],["May", 31],["June", 30],["July", 31],["August", 31],["September", 30],
    ["October", 31],["November", 30],["December", 31]]; 
```

以下是需要从 forEach 更改为 for 循环的函数。

```
 //this creates the month values
function generateMonths() {
    var df = document.createDocumentFragment();
    calendar.forEach(function(info, i) {
        df.appendChild(createOption(info[0], i));
    });
        //clears past months
    clearChildren(sel_month);
        //appends new months onto variable df
    sel_month.appendChild(df);
}
//this creates the year values
function generateYears() {
    var df = document.createDocumentFragment();
    years.forEach(function(i) {
        df.appendChild(createYearOption(i));
    });
    //clears past months
    clearChildren(sel_year);
    //appends new months onto variable df
    sel_year.appendChild(df);
} 
```

这是我失败的尝试，以证明我尝试过。

```
 //this creates the month values
function generateMonths() {
    var df = document.createDocumentFragment();
        for (var w = 0; w < 12; w++) {
            (function(calendar, w) {
                df.appendChild(createOption(calendar[0], w));
            });
        }
    //calendar.forEach(function(info, i) {
        //df.appendChild(createOption(info[0], i));
    };
        //clears past months
    clearChildren(sel_month);
        //appends new months onto variable df
    sel_month.appendChild(df);
}
    //this creates the year values
    function generateYears() {
    var df = document.createDocumentFragment();
        for (var w = 0; w < 12; w++) {
            (function(years) {
                df.appendChild(createOption(years[0]));
            });
        }        

        //years.forEach(function(i) {
        //df.appendChild(createYearOption(i));
    };
        //clears past months
    clearChildren(sel_year);
        //appends new months onto variable df
    sel_year.appendChild(df);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:36:08.240

```
var years = [yr1, yr2, yr3, yr4];

years.forEach(function(i) {
    df.appendChild(createYearOption(i));
}); 
```

相当于：

```
for(var i=0; i<years.length; i++) {
  df.appendChild(createYearOption(years[i]));
} 
```

我不确定你`forEach`在第二种情况下接受什么。但*我认为*这是你想要做的：

```
var calendar = [["January", 31],["February", 28]];

calendar.forEach(function(info, i) {
    df.appendChild(createOption(info[0], i));
}); 
```

而是使用循环来**createOption**与每个数组的两个元素。

```
for(var i=0; i<calendar.length; i++) {
  df.appendChild(createOption(calendar[i][0], calendar[i][1]));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:40:34.183

如果你愿意，你总是可以垫片`forEach`。来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)：

```
if ( !Array.prototype.forEach ) {
  Array.prototype.forEach = function(fn, scope) {
    for(var i = 0, len = this.length; i < len; ++i) {
      fn.call(scope || this, this[i], i, this);
    }
  }
} 
```

# javascript - 如何使用声音管理器 2 静音和取消静音？

> ID：11987210
> 
> 赞同：1
> 
> 时间：2012-08-16T12:32:31.957
> 
> 标签：javascript, audio, soundmanager2

我正在使用声音管理器 2 为我的网站提供声音。现在我想要静音和取消静音

单击一个按钮。我试过`mute()`和`unmute()`功能。但没有得到结果。

我的静音代码是：

```
function mutesound(){
            soundManager.mute(); // mute all sounds

            soundManager.createSound({
             id: 'msound',
             url: 'folder/sound/click.mp3',
             autoLoad:true,
             onload: function() {
               soundManager.mute('msound'); 

              } 
            });
        } 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:40:37.630

mute() 和 unmute() 是*[方法](https://stackoverflow.com/questions/155609/what-is-the-difference-between-a-method-and-a-function)*，您应该将它们应用于 SoundManager 对象。默认情况下称为`soundManager`.

```
soundManager.toggleMute() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:02:24.187

你可以把它放在一个变量中，这样你以后就可以调用它了。就像是

```
var player = soundManager.createSound({ 
  ...
});

player.mute();

player.unmute(); 
```

告诉我会发生什么。

# c# - C# Visual Studio 本地数据库

> ID：11987215
> 
> 赞同：0
> 
> 时间：2012-08-16T12:32:45.097
> 
> 标签：c#, visual-studio-2010, sqlite

我有一个使用本地 SQLite3 数据库的 C# 应用程序。我需要将数据库与应用程序打包在一起。我目前只是从我的桌面与数据库进行交互。我只是使用数据库路径从桌面连接到数据库。

我应该将这个数据库存储在哪里，以便在我打包和分发它时应用程序可以访问它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:47:07.473

您应该将数据库文件放在读/写文件夹中。确切的位置取决于您的数据库的使用情况。如果计算机的每个用户都应该能够使用数据库，那么选择

```
C:\programdata\yourfolder 
```

如果您的程序的每个用户都有自己的数据库，那么用户配置文件中的文件夹会很好

```
C:\users\username\documents\yourfolder 
```

或者

```
c:\user\username\appdata\local\yourfolder 
```

其中*yourfolder*将是您选择的文件夹名称，指的是您的应用程序名称，而*用户名*是您的应用程序的当前安装用户的名称

这些路径因您部署应用程序的操作系统而异，因此要摆脱操作系统差异，请记住使用[Environment.GetFolderPath](http://www.bing.com/search?q=environment.getfolderpath&qs=HS&form=QBLH&pq=envir&sc=8-5&sp=1&sk=)方法和[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)枚举

当然，您始终可以选择将数据库安装在您在安装过程中创建的特定文件夹中，例如 C:\database，或者，如果您计划在网络位置共享数据库，请选择现有共享名或创建新共享名。

At the end of the setup work you need to update the connectionstring stored in your config file with the value where you have stored the database file.

# sed - 如何查找和替换所有百分比、加号和管道符号？

> ID：11987221
> 
> 赞同：12
> 
> 时间：2012-08-16T12:33:02.733
> 
> 标签：sed

我有一个包含许多百分比、加号和管道符号的文档。我想用代码替换它们，以便在 TeX 中使用。

*   `%`变成`\textpercent`.
*   `+`变成`\textplus`.
*   `|`变成`\textbar`.

这是我正在使用的代码，但它不起作用：

```
sed -i "s/\%/\\\textpercent /g" ./file.txt
sed -i "s/|/\\\textbar /g" ./file.txt
sed -i "s/\+/\\\textplus /g" ./file.txt 
```

如何用此代码替换这些符号？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-02T08:46:16.593

**测试脚本：**

```
#!/bin/bash

cat << 'EOF' > testfile.txt
1+2+3=6
12 is 50% of 24
The pipe character '|' looks like a vertical line.
EOF

sed -i -r 's/%/\\textpercent /g;s/[+]/\\textplus /g;s/[|]/\\textbar /g' testfile.txt

cat testfile.txt 
```

**输出：**

```
1\textplus 2\textplus 3=6
12 is 50\textpercent  of 24
The pipe character '\textbar ' looks like a vertical line. 
```

@tripleee 已经以类似的方式提出了这一建议，我看不出它为什么不起作用。如您所见，我的平台使用与您的平台完全相同的 GNU sed 版本。@tripleee 版本的唯一区别是我使用扩展的正则表达式模式，因此我必须转义管道和加号，或者将其放入带有`[]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:43:03.450

```
nawk '{sub(/%/,"\\textpercent");sub(/\+/,"\\textplus");sub(/\|/,"\\textpipe"); print}' file 
```

测试如下：

```
> echo "% + |" | nawk '{sub(/%/,"\\textpercent");sub(/\+/,"\\textplus");sub(/\|/,"\\textpipe"); print}'
\textpercent \textplus \textpipe 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T12:38:16.570

使用单引号：

```
$ cat in.txt 
foo % bar
foo + bar
foo | bar
$ sed -e 's/%/\\textpercent /g' -e 's/\+/\\textplus /g' -e 's/|/\\textbar /g' < in.txt 
foo \textpercent  bar
foo \textplus  bar
foo \textbar  bar 
```

# rest - 是否可以知道源对 Web 应用程序的请求？

> ID：11987223
> 
> 赞同：0
> 
> 时间：2012-08-16T12:33:29.740
> 
> 标签：rest, jakarta-ee, servlets

我正在开发一个基于 Java EE 的 Web 应用程序，它由 Jersey RestFul Webservices 组成。是否有可能知道，对 Jersey RestFul Webservice 的请求来自何处意味着如果

1.请求**来自网络服务客户端工具** （例如：Google Chromes Rest Client，或任何类似的工具）

2 或者**请求来自登录用户**。

在我的 Service 课程中，我一直保持这种状态。

// 这种情况适用于 Web 服务客户端工具。

```
HttpSession httpsession = req.getSession(false);
if(httpsession==null)
{
throw new WebApplicationException(SC_FORBIDDEN);
} 
```

这适用于处理 Webservice 客户端工具，它只是抛出 Forbidden Exception 作为对服务调用的响应，但也可能存在登录用户可能会从浏览器中删除 Jsession Id Cookie 然后进行调用的情况对于其中一项服务，我想将任何此类请求重定向到登录页面。

所以基本上我在问，是否有可能知道从哪里提出请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:43:56.513

解决 REST 安全问题的一种方法是使用开源协议 OAuth。如[OAuth 网站](http://oauth.net/)上所述，OAuth 是“一种开放协议，允许通过桌面和 Web 应用程序以简单和标准的方法进行安全 API 授权。” OAuth 结合了多个专有框架采用的通用原则，包括 Google AuthSub、AOL OpenAuth、Yahoo BBAuth、Upcoming API、Flickr API 和 Amazon Web Services API。

OAuth 协议使网站或应用程序（称为服务使用者）能够通过 API 从 Web 服务（称为服务提供者）访问受保护的资源。API 不要求用户向消费者披露他们的服务提供者凭证。

# java - 枚举 valueOf() 的线程安全

> ID：11987224
> 
> 赞同：1
> 
> 时间：2012-08-16T12:33:32.467
> 
> 标签：java, enums, thread-safety, value-of

这是永久**“冗长的如果或切换”**困境的变体......

考虑一个使用静态方法的多线程应用程序，该方法包含一个长（超过十几个条件）`if`语句，它检查对象的类型并相应地返回一个值，即类似

```
public static String checkType(Class<?> type)
{
    if (type == A.class)
    {
        return aString;
    }
    else if (type == B.class)
    {
        return bString;
    }
    ...
    else if (type == z.class)
    {
        return zString;
    }
} 
```

显然 switch 语句在这里并不直接适用，所以一个常见的模式是有一个`enum`并调用它的`valueOf()`，即做类似的事情

```
public enum Strings
{
    A(aString), B(bString), ..., Z(zString)

    private final String value;

    private Strings(String value)
    {
        this.value = value;
    }

    public String value()
    {
        return this.value;
    }
} 
```

所以，`checkType()`可以重写为

```
public static String checkType(Class<?> type)
{
    return Strings.valueOf(getActualTypeName(type.getClass().getName())).value();
} 
```

对在生产代码中添加的值进行适当的检查，`null`并在方法内部对非原始类型进行一些字符串处理`getActualTypeName()`，以从类似字符串中检索实际类型名称`"class java.lang.Long"`（对于原始类型，该`getName()`方法返回预期的字符串，例如 " `long"`）。

但是，如果`valueOf()`不是线程安全的，则这将无法在并发环境中工作。这同样适用于使用（普通）`Map`对象，可能这两种选择是相同模式的变体，因为`enum.valueOf()`显然是基于

```
Enum.valueOf(Class<T> enumType, String name) 
```

调用

```
enumType.enumConstantDirectory().get(name); 
```

在`Class.java`课堂上。

`enumConstantDirectory()`每次调用该方法时，都会返回一个从数组`HashMap`副本创建的新方法。`values()`

那会是线程安全的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:37:33.637

我找不到任何`enum.valueOf(String)`不线程安全的原因：

*   `valueOf`字符串是不可变的，因此在完成其工作时参数不能被改变
*   valueOf 检查参数与枚举常量的名称，它们都是静态的和最终的

是什么让您认为这`enum.valueOf()`不是线程安全的？

**编辑**

valueOf 调用：

```
T result = enumType.enumConstantDirectory().get(name); 
```

`enumType`你的枚举类在哪里。

enumConstantDirectory() 使用这种模式：

```
Map<String, T> enumConstantDirectory() {
    if (enumConstantDirectory == null) {
        T[] universe = getEnumConstantsShared();
        if (universe == null)
            throw new IllegalArgumentException(
                getName() + " is not an enum type");
        Map<String, T> m = new HashMap<>(2 * universe.length);
        for (T constant : universe)
            m.put(((Enum<?>)constant).name(), constant);
        enumConstantDirectory = m;
    }
    return enumConstantDirectory;
} 
```

其中`enumConstantDirectory`是一个易失变量：

```
private volatile transient Map<String, T> enumConstantDirectory = null; 
```

想象一个线程同时到达该方法：

*   如果`enumConstantDirectory`为空（这里没有可见性问题，因为它是易变的），它将构建映射并将其分配给该变量。由于 volatile 保证，从那个时间点开始，所有其他线程将看到完全构建的映射。
*   如果另一个线程同时到达该方法并且也观察到一个空值`enumConstantDirectory`，它将重新创建地图并再次安全地发布它

这里最糟糕的情况是 2 个线程可能正在使用 2 个不同的地图（不同的实例），但它们的内容将是相同的，因此不会导致任何问题。

**底线**：线程无法看到半构建的映射，因为映射构建是在局部变量上完成的，该变量在填充**后分配给 volatile 变量。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:38:20.183

没有理由认为这`Enum.valueOf()`不是线程安全的。它不会改变任何东西，它只是访问实际`enum`类中有效的最终状态。

如果此方法*是非*线程安全的，我认为 javadocs 中会有这样的说法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:47:27.193

可能是我错了，但这里似乎有一个微妙的问题：

```
public static <T extends Enum<T>> T valueOf(Class<T> enumType,
                                                       String name) {
     T result = enumType.enumConstantDirectory().get(name);
     if (result != null)
           return result;
     if (name == null)
           throw new NullPointerException("Name is null");
     throw new IllegalArgumentException(
                     "No enum constant " + enumType.getCanonicalName() + "." + name);
} 
```

这是 valueOf 的代码。它使用传入的常量`enumType`来创建一个内部`HashMap`，而代码不是`sychronized`。
这里似乎有一个微妙的问题：`T result = enumType.enumConstantDirectory().get(name);`
为了创建. 也许副作用并不重要（我不知道商店有什么信息）但无论如何它肯定是安全的，只要不在您的应用程序代码中共享`enumConstantDirectory()``enumConstantDirectory == null``HashMap``Class``enumType`

# php - 对字符串进行排序，首先是第一个字母，然后是单词中的字母

> ID：11987225
> 
> 赞同：7
> 
> 时间：2012-08-16T12:33:32.180
> 
> 标签：php, string, sorting

我想在 PHP 中对字符串进行排序，首先应该在子字符串的第一个字母上进行匹配，然后在整个字符串的字母上进行匹配。

例如，如果有人搜索`do`，并且列表包含

```
Adolf
Doe
Done 
```

结果应该是

```
Doe
Done
Adolf 
```

使用常规`sort($array, SORT_STRING)`或类似的东西不起作用，阿道夫在其他人之前排序。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:50:55.447

我会使用自定义排序：

```
<?php
$list = ['Adolf', 'Doe', 'Done'];

function searchFunc($needle)
{
  return function ($a, $b) use ($needle)
  { 
    $a_pos = stripos($a, $needle);
    $b_pos = stripos($b, $needle);

    # if needle is found in only one of the two strings, sort by that one
    if ($a_pos === false && $b_pos !== false) return 1;
    if ($a_pos !== false && $b_pos === false) return -1;

    # if the positions differ, sort by the first one
    $diff = $a_pos - $b_pos;
    # alternatively: $diff = ($b_pos === 0) - ($a_pos === 0) 
    if ($diff) return $diff;

    # else sort by natural case
    return strcasecmp($a, $b);

  };
}

usort($list, searchFunc('do'));

var_dump($list); 
```

输出：

```
array(3) {
  [0] =>
  string(3) "Doe"
  [1] =>
  string(4) "Done"
  [2] =>
  string(5) "Adolf"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:37:35.707

[`usort(array, callback)`](http://php.net/manual/en/function.usort.php)让您根据回调进行排序。

示例（类似这样的，没试过）

```
usort($list, function($a, $b) {
   $posa = strpos(tolower($a), 'do');
   $posb = strpos(tolower($b), 'do');
   if($posa != 0 && $posb != 0)return strcmp($a, $b);
   if($posa == 0 && $posb == 0)return strcmp($a, $b);
   if($posa == 0 && $posb != 0)return -1;
   if($posa != 0 && $posb == 0)return 1;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:36:31.033

您可以根据顺序对字符串进行排序，`stripos($str, $search)`以便前面 ( `stripos() == 0`) 中的字符串首先出现。

以下代码将搜索字符串的子字符串位置推送到单独的数组中，然后用于`array_multisort()`对匹配项应用正确的排序；这样做而不是`usort()`避免`stripos()`多次调用。

```
$k = array_map(function($v) use ($search) {
    return stripos($v, $search);
}, $matches);

// $k contains all the substring positions of the search string for all matches

array_multisort($k, SORT_NUMERIC, $matches, SORT_STRING);

// $matches is now sorted against the position 
```

# ruby-on-rails - 在 Ruby 中路由 CLI 命令

> ID：11987226
> 
> 赞同：1
> 
> 时间：2012-08-16T12:33:34.607
> 
> 标签：ruby-on-rails, ruby

我正在寻找`gem`或了解如何在 Ruby 中优雅地路由 CLI 命令。`Thor`是我已经在使用的解决方案，从某种意义上说，它允许您构建特定的命令行结构。例子：

```
person show 1               => Info about person Id 1
person show all             => Show all people
person delete 2             => Delete person with Id 2 
```

`Thor`在这方面很棒，我强烈推荐它。现在我需要更多面向语义的 CLI 结构，例如：

```
show person 1                => Same as 'show person 1'
show people                  => Same as 'show person all'
etc... 
```

`Thor`不支持这个，所以我需要实现它。我将在 thor 之上构建层，该层将预处理命令并将它们发送给 thor。我正在寻找最好的方法。我希望避免`case/when/when...`. 谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:49:05.183

我强烈推荐可卡因！[https://rubygems.org/gems/cocaine](https://rubygems.org/gems/cocaine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:36:46.313

一种简单的方法是创建两个可执行文件：一个是您当前的可执行文件`person`，它实现了所有功能。

第二个可以称为“person-app”之类的东西，并且被设计为符号链接。例如

```
> ln -s person-app show
> ln -s person-app delete
> whatever else 
```

所以，你现在有几个符号链接到同一个应用程序，`person-app`. `person-app`可以通过检查来检测使用了哪个符号链接`$0`，然后制定调用`person`：

```
case File.basename($0)
when 'show' then system("person show #{ARGV.join(' ')}")
when 'delete' then system("person delete #{ARGV.join(' ')}")
end 
```

等等。这有点 hacky，但它应该可以工作并将代码重复降至最低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T17:16:14.317

试试`cliqr` [https://github.com/anshulverma/cliqr](https://github.com/anshulverma/cliqr)。自述文件有一个很好的用例示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T08:47:55.127

你应该试试[console_runner](https://github.com/yuri-karpovich/console_runner) gem。最好的一点是您不需要编写新代码。您可以从命令行执行任何现有的 Ruby 文件。您所需要的只是将注释（[类似于 YARD](https://yardoc.org/)的语法）添加到要使其可执行的 Class 和方法：

```
# @runnable This tool can talk to you. Run it when you are lonely.
#   Written in Ruby.  
class MyClass

    def initialize
      @hello_msg = 'Hello' 
      @bye_msg = 'Good Bye!' 
    end

    # @runnable Say 'Hello' to you.
    # @param [String] name Your name
    def say_hello(name)
      puts @hello_msg + ', ' + name
    end

    # @runnable Say 'Good Bye' to you.
    def say_bye
      puts @bye_msg
    end

end 
```

gem 将为您生成 CLI 界面。

```
$ c_run /projects/example/my_class.rb  --help
Options:
  --debug    Run in debug mode.

This tool can talk to you. Run it when you are lonely.
Written in Ruby.

Available actions:
        - say_hello
                Say 'Hello' to you.
        - say_bye
                Say 'Good Bye' to you. 
```

您也可以*使用参数*。运行**MyClass#say_hello**：

```
$ c_run /projects/example/my_class.rb say_hello --name 'Yuri'
 -> Hello, Yuri 
```

运行**MyClass#say_bye**：

```
$ c_run /projects/example/my_class.rb say_bye
 -> Good Bye! 
```

# c# - 如何将文件夹复制到 USB 中？C＃

> ID：11987230
> 
> 赞同：2
> 
> 时间：2012-08-16T12:33:45.183
> 
> 标签：c#, winforms, windows-7, copy, directory

我正在开发一个项目，该项目将使用我计算机中的一些文件自动更新我的 USB。

该程序适用于启动并监视插入计算机的任何 USB 或 CD。我的程序是然后将一些文件夹及其文件复制到 USB。我在将文件夹复制到 USB 时遇到问题，希望能得到一些帮助，谢谢。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Diagnostics;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

 // this section starts the timer so it can moniter when a USB or CD is inserted into
 // the computer.    
//==================================================================================
        private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Interval = 100;
            timer1.Start();

            WindowState = FormWindowState.Minimized;
//===================================================================================            
        }

        private void timer1_Tick(object sender, EventArgs e)
        {

 // this section checks to see if there is a drive type of USB and CDs.          

            foreach(DriveInfo drive in DriveInfo.GetDrives())
            {
                if (drive.DriveType == DriveType.Removable)
                {
// this part is supposed to copy a folder from the PC and paste it to the USB
//==============================================================================                    

//==============================================================================                   
                }

                if (drive.DriveType == DriveType.CDRom)
                {
// same thing but for CDs.
//==============================================================================

//==============================================================================
                }
            }

        }
// this section opens a folderbrowserdialog that the users can use to access their folders 
//and put them into a listbox so when a USB or CD is inserted it will copy those files into
// the storage devices.
//==============================================================================
        private void button1_Click(object sender, EventArgs e)
        {
            if (folderBrowserDialog1.ShowDialog() == DialogResult.OK)
            {
                listBox1.Items.Add(folderBrowserDialog1.SelectedPath);
//==============================================================================
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:55:34.293

[这](http://msdn.microsoft.com/en-us/library/bb762914.aspx)是如何完成的：

```
private static void DirectoryCopy(string sourceDirName, string destDirName, bool copySubDirs)
{
    DirectoryInfo dir = new DirectoryInfo(sourceDirName);
    DirectoryInfo[] dirs = dir.GetDirectories();

    if (!dir.Exists)
    {
        throw new DirectoryNotFoundException(
            "Source directory does not exist or could not be found: "
            + sourceDirName);
    }

    if (!Directory.Exists(destDirName))
    {
        Directory.CreateDirectory(destDirName);
    }

    FileInfo[] files = dir.GetFiles();
    foreach (FileInfo file in files)
    {
        string temppath = Path.Combine(destDirName, file.Name);
        file.CopyTo(temppath, false);
    }

    if (copySubDirs)
    {
        foreach (DirectoryInfo subdir in dirs)
        {
            string temppath = Path.Combine(destDirName, subdir.Name);
            DirectoryCopy(subdir.FullName, temppath, copySubDirs);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:54:34.210

使用 File.Copy 并使用 USB 驱动器号作为目标。例如：

```
string sourceDir = @"c:\current";
string backupDir = @"f:\archives\2008";

try
{
    string[] picList = Directory.GetFiles(sourceDir, "*.jpg");
    string[] txtList = Directory.GetFiles(sourceDir, "*.txt");

    // Copy picture files. 
    foreach (string f in picList)
    {
        // Remove path from the file name. 
        string fName = f.Substring(sourceDir.Length + 1);

        // Use the Path.Combine method to safely append the file name to the path. 
        // Will overwrite if the destination file already exists.
        File.Copy(Path.Combine(sourceDir, fName), Path.Combine(backupDir, fName), true);
    }

    // Copy text files. 
    foreach (string f in txtList)
    {

        // Remove path from the file name. 
        string fName = f.Substring(sourceDir.Length + 1);

        try
        {
            // Will not overwrite if the destination file already exists.
            File.Copy(Path.Combine(sourceDir, fName), Path.Combine(backupDir, fName));
        }

        // Catch exception if the file was already copied. 
        catch (IOException copyError)
        {
            Console.WriteLine(copyError.Message);
        }
    }

    // Delete source files that were copied. 
    foreach (string f in txtList)
    {
        File.Delete(f);
    }
    foreach (string f in picList)
    {
        File.Delete(f);
    }
}

catch (DirectoryNotFoundException dirNotFound)
{
    Console.WriteLine(dirNotFound.Message);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:57:36.987

请参考 MSDN：http: [//msdn.microsoft.com/en-us/library/bb762914.aspx](http://msdn.microsoft.com/en-us/library/bb762914.aspx)

# iphone - TabBarController setSelectedIndex - 将调用哪个委托方法

> ID：11987231
> 
> 赞同：0
> 
> 时间：2012-08-16T12:33:46.253
> 
> 标签：iphone, ios, ios4, uitabbarcontroller

我想知道当我们为 uitabbbarviewcontroller 设置 setSelectedIndex 时，会调用哪个委托方法。

在我的应用程序中，我有要购买的歌曲列表。当用户点击任何歌曲的购买按钮时，我将显示下载选项卡。为此，我正在设置`[self.tabBarController setSelectedIndex:3];`那里，我正在显示歌曲详细信息和进度视图，说明下载了多少等。

这很好。在下载诗歌的同时，用户可以去点击购买另一首诗歌。在这里，我想重新加载 tableview。但我不知道应该在哪个委托方法中调用 tableview 的重新加载数据。

我试过viewwillappear和viewdidappear。但这些没有被调用。所以请告诉我将调用哪个委托方法。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T05:42:01.037

覆盖 UITabBarController setSelectedIndex：

```
-(void)setSelectedIndex:(NSUInteger)selectedIndex
{
    //must call super function. 
    [super setSelectedIndex:selectedIndex];

    [self myMethod];
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    [self myMethod];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:52:20.823

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController; 
```

只有当用户点击它时才会调用它，当你以编程方式设置它时，它不会被调用。您可以在以编程方式执行自定义委托方法或通知后立即触发并执行您需要做的任何事情......

# hadoop - Flume 无法将文件放入 S3 存储桶

> ID：11987233
> 
> 赞同：0
> 
> 时间：2012-08-16T12:33:50.640
> 
> 标签：hadoop, amazon-s3, amazon, amqp, flume

我在其仅节点（测试）模式下使用水槽；Flume 从 RabbitMQ 拉取消息并将其放入 Amazon S3 存储桶。

## 问题：

Flume 实际上是从 RabbitMQ 中提取的，但文件不会出现在 S3 存储桶中。

## 技术细节：

我以以下方式启动水槽：

```
flume node -1 -c $FQDN':amqp("exchangeName=[exchange name]", "bindings=[binding name]", "host=127.0.0.1", "port=5672", "userName=[user]", "password=[pass]", "exchangeType=direct", "durableExchange=false", "queueName=[queue name]", "durableQueue=true", "exclusiveQueue=false", "autoDeleteQueue=false", "useMessageTimestamp=true")|collectorSink("s3n://[Amazon key]:[Amazon secret]@[path at S3]","server");' -s "$@" > "$log" 2>&1 
```

## 水槽日志：

在flume重启后，当通过相关的exchange和queue发送东西时，flume log中会出现以下几行：

```
INFO com.cloudera.flume.handlers.hdfs.EscapedCustomDfsSink: Opening s3n://[key]:[secret]@[path at S3]

WARN org.apache.hadoop.util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable

WARN org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library not loaded 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:48:08.327

你不会相信的...

Flume 无法使用包含“/”的 Amazon 密钥进行管理，我使用的密钥包含一个。然后 Flume 认出了它，只是没有调用亚马逊。

解决方案：更改亚马逊密钥，直到你得到一个没有'/'的密钥

# sql - 如何存储用户的位置？

> ID：11987238
> 
> 赞同：1
> 
> 时间：2012-08-16T12:34:21.487
> 
> 标签：sql, ruby-on-rails, ruby, geolocation, location

我正在做一个新项目，整天都在思考和寻找最好的方法，如何将用户的位置保存到数据库中。

我需要拯救他们的城市，国家。这里有点问题，因为例如对于欧洲人来说，这意味着**city=Berlin** , **country=Germany**。但对于美国用户来说，它就像**city=Los Angeles**，**country=California** ( **state=USA** )。

这就是我今天面临的全部问题。

我在这个应用程序中的目标是根据他们的位置找到城市中的所有用户。并且还找到在他们的区域内的人，比如说 15 公里/英里。

我计划在 RoR，PostgreSQL 中实现该应用程序，该应用程序可能会在 Heroku 上运行。

解决这个“问题”的最佳方法是什么？你能给我一些建议、技巧吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:32:12.473

您可以使用*geokit*和*geokit-rails* gems 来实现这一点。有关文档，请参见此处：[https ://github.com/imajes/geokit-rails](https://github.com/imajes/geokit-rails)

基本上，它的工作原理是这样的：您保存用户的地址数据，然后使用地理编码服务（例如 Google Maps 或 Yahoo Placefinder）查找该地址并将其映射到空间中的一个点（lat/lng）。然后可以使用这些点来计算距离等。

一个例子：

```
class User < ActiveRecord::Base
  # has the following db fields:
  # - city
  # - state
  # - country
  # - latitude
  # - longitude

  acts_as_mappable :default_units       => :miles, 
                   :default_formula     => :sphere, 
                   :lat_column_name     => :latitude,
                   :lng_column_name     => :longitude,
                   :auto_geocode        => {:field => :full_address}

  def full_address
    [city, state, country].reject(&:blank).join(', ')
  end
end 
```

然后您可以执行以下操作：

```
# find all users in a city (this has nothing to do with geokit but is just a normal db lookup)
User.where(:city => 'New York')

# find all users that are within X miles of a place
User.find_within(300, 'Denver') 
```

还有更多，只需查看文档...

此示例向您展示如何使用*geokit* gem。这个宝石似乎不再处于积极开发中。所以也许检查一下*地理编码*器是值得的：[https ://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)

# mysql - 如何优化 SQL 查询？

> ID：11987239
> 
> 赞同：1
> 
> 时间：2012-08-16T12:34:22.470
> 
> 标签：mysql, sql, query-optimization

我有一个我认为不够优化的 SQL 查询。我计时了，有时需要1.5秒才能完成，这似乎有点高，不是吗？

无论如何，这是查询：

```
SELECT id, link, feed, category, description, title, GROUP_CONCAT( tag ) as t, published
            FROM items
            LEFT JOIN tags ON items.id = tags.item_id
            WHERE id NOT IN (
                SELECT item_id
                FROM tags, sinunim
                WHERE tag = name
                AND op = '1'
                AND user = '$user_cookie'
            ) AND id NOT IN (
                SELECT id
                FROM sinunim
                WHERE id <> 0
                AND user = '$user_cookie'
            ) AND id NOT IN (
                SELECT i.id
                FROM  sinunim s, items i
                WHERE s.type =  'category'
                AND s.name = i.category
                AND s.op = '1'
                AND s.user = '$user_cookie'
            ) AND id NOT IN (
                SELECT i.id
                FROM  `sinunim` s, items i
                WHERE s.name = i.feed
                AND s.op = '1'
                AND s.user = '$user_cookie'
            )
            GROUP BY items.title
            ORDER BY items.published DESC
            LIMIT 0 , 50 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:41:20.017

您可以将 4 个子查询重写`NOT IN`为一个子查询，并且由于您正在分组，`items.title`您甚至可以消除所有子查询并改用联接。

这样，无论您加入什么，都只会加入一次，您可以通过将它们分组到一个更大的逻辑表达式中来重新创建各种比较`(x = y AND y = z) OR (k = l AND m = n)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:06:46.357

为了最有效地优化查询，您应该首先确定持续时间最长的查询。您可以使用 SQL 事件探查器来执行此操作。接下来，您分析查询以确定它们将时间花在哪里以及是否可以改进它们。您可以使用 SQL 查询分析器来帮助分析查询行为。

整个优化过程包括两个主要步骤：

1) 隔离长时间运行的查询。

2) 确定长时间运行查询的原因。

**步骤1**

*   您可以使用 SQL Profiler 隔离长时间运行的查询。

**第2步**

*   使用 SET 语句。
*   使用 SQL 查询分析器选项。

**使用 SQL 查询分析器**

SQL 查询分析器以文本模式或图形模式显示查询执行计划。

1) 启动 SQL 查询分析器，连接到服务器，然后选择您正在处理的数据库。

2) 将查询粘贴到 SQL 查询分析器窗口中。

3) 如果您使用 SQL Profiler 跟踪查询，则可以从跟踪窗口复制查询文本并在 SQL Query Analyzer 中使用。

4) 在**查询**菜单上，单击**显示估计的执行计划**。显示查询的估计执行计划。如果查询窗口包含多个查询，则会为每个查询显示一个执行计划。

5) 在**Query**菜单上，单击**Show Execution Plan**，然后在查询窗口中运行查询。执行计划和查询结果现在显示在窗口的不同窗格中，因此您可以一起查看它们。

我希望这会对你有所帮助！

问候，

尼古拉斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:58:32.443

我试图在 where 条件下最小化 4 Not In 查询。你能看到这个工作吗？

```
SELECT id, link, feed, category, description, title, GROUP_CONCAT( tag ) as t, published
            FROM items
            LEFT JOIN tags ON items.id = tags.item_id
            WHERE id NOT IN (
                SELECT case 
                        when ( tag = name AND op = '1' ) then item_id
                        when id <> 0 then id
                       END   
                FROM tags, sinunim
                WHERE user = '$user_cookie'
            )
            AND id NOT IN (
                SELECT i.id
                FROM  sinunim s, items i
                WHERE ( (s.type =  'category'
                AND s.name = i.category) OR s.name = i.feed)  
                AND s.op = '1' 
                AND s.user = '$user_cookie'
            ) 
            GROUP BY items.title
            ORDER BY items.published DESC
            LIMIT 0 , 50 
```

# javascript - 仅当它们已更改时才强制浏览器重新加载 css/js

> ID：11987243
> 
> 赞同：4
> 
> 时间：2012-08-16T12:34:33.157
> 
> 标签：javascript, css, caching, continuous-deployment, auto-versioning

有很多关于我的问题的问题和答案[我希望浏览器永远缓存 js/css。在新版本中，如果某些 js/css 文件已更新，浏览器应重新加载并缓存它们。]

这个解决方案对我来说似乎最合适： [强制浏览器重新加载缓存的 CSS/JS 文件的优雅方法是什么？](https://stackoverflow.com/a/118886/174184)

但是，只有一件事我无法弄清楚。该解决方案利用 last_modified_time。但是，我不允许使用它。我需要使用其他一些机制。

有什么选择？是否有可能在构建期间预先计算版本并通过构建脚本在 jsps 中更新（替换）它们（在部署之前，以便不在运行时计算版本号）？为此目的有任何现有工具吗？我使用 Java/Jsp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T07:32:56.753

这可能不是最好的方法，但这就是我现在正在做的事情：

1.  我所有的 js/css 都有一个 [source control = svn] 修订号
2.  我的 jsp 中的引用类似于 /foo/path1/path2/xyz000000/foo。
3.  构建步骤 1 - 生成 css|js 文件及其修订号的映射
4.  构建步骤 2 - 用 svn 修订的哈希替换 jsps 中的 xyz000000 引用
5.  url 重写器中的一条规则，用于指示所有 /foo/path1/path2/xyz<767678>/foo。到 /foo/path1/path2/foo.[js|css]
6.  无限缓存 css|js 文件
7.  每当有提交时，修订号都会更改，.jsp 中的引用也会更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:42:13.867

我们总是用

```
file.css?[deploytimestamp] 
```

这样，CSS 文件就会在客户端为每个部署缓存。我们缩小的 javascript 也是如此。这是您的选择吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:51:02.293

部署后生成每个 css 文件的 md5-hash。使用此哈希而不是 css url 中的时间戳。

```
file.css?[hash of file.css contents] 
```

部署后计算一次哈希并存储它们以获得一些性能可能是明智的。您可以将它们存储在数据库中，甚至可以存储在网站代码中包含的单独文件中的 PHP 数组中。

# windows - 编辑特定 URL 的 HOSTS 文件？

> ID：11987245
> 
> 赞同：1
> 
> 时间：2012-08-16T12:34:41.890
> 
> 标签：windows, hosts

我试图编辑我的 HOSTS 文件以阻止特定的 url，如下所示：

```
127.0.0.1 google.com/pagetoblock
127.0.0.1 www.google.com/pagetoblock 
```

然而，这是行不通的。

有谁知道我要去哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:37:07.503

您的 HOSTS 文件只允许您设置主机的 IP 地址（顾名思义）（例如 google.com 或 www.google.com）。您无法为特定页面设置 IP 地址。

您可以使用 Microsoft Fiddler 之类的工具来设置特定 URL 的 IP 地址，但这需要 Fiddler 持续运行。

Fiddler 有一个规则引擎，可以通过**Rules** → **Customize Rules**访问。有大量[示例](http://www.fiddlertool.com/fiddler/dev/scriptsamples.asp)供您学习，但以下脚本应该可以工作。

例如，要阻止[http://www.google.co.uk](http://www.google.co.uk)主页上的徽标，您可以使用以下脚本：

```
if (oSession.url == "www.google.co.uk/images/srpr/logo3w.png"){
    // Prevent this request from going through an upstream proxy
    oSession.bypassGateway = true; 
    // Rewrite the IP address of target server
    oSession["x-overrideHost"] = "127.0.0.1";  
    // Set the color of the request in RED in Fiddler, for easy tracing
    oSession["ui-color"]="red"; 
} 
```

# google-apps-script - 更改数据透视表数据范围 Google Docs 电子表格的 JavaScript 方法

> ID：11987253
> 
> 赞同：4
> 
> 时间：2012-08-16T12:35:03.370
> 
> 标签：google-apps-script

在 Google Docs 电子表格中更改数据透视表的数据范围的方法是什么？

Google 的支持网站上没有这方面的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-10T16:25:30.357

我找到了可以帮助您的解决方法。

创建一个专用于您的数据的工作表，第 1 行 = 标题，所有其他行 = 数据。

删除没有数据的行。

例如，如果您使用 A 到 F 列，请创建一个 Pivot 并使用此范围：SHEET_NAME!A:F

枢轴将“增长”到新闻行，因为范围是“A 到 F 列中的所有数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:49:29.887

遗憾的是，无法通过 Google Apps 脚本修改数据透视表设置。如果您想查看此功能，请在我们的[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提交功能请求。

# android - iOS和Android安装（直接测试）

> ID：11987254
> 
> 赞同：0
> 
> 时间：2012-08-16T12:35:03.857
> 
> 标签：android, ios

是否可以直接在 ios 或 android 设备上部署应用程序仅用于测试？

**我的背景：**

我目前正在开发 iOS 和 Android 应用程序，但只使用模拟器。

也许您可以将我视为中级移动开发人员，但在直接安装创建的应用程序方面是新手。

**另外，**如果我尝试一些在网上找到的博客教程，我担心我的 iPhone 或我的 android 设备会被毁坏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:36:28.267

您可以在两个平台上的实际移动设备上试用您的应用程序。

使用 Android 非常简单：只需将您的设备插入计算机的 USB 端口即可。如果您碰巧有合适的驱动程序，那么每当您从 Eclipse IDE 运行应用程序时，系统都会询问您是否要直接在设备上运行您的应用程序。确保在设备上启用**调试**。

使用 iOS，这也相当容易。只需将您的 iPhone/iPad/iPodTouch 插入您的 Mac，启动 XCode 并选择**设备**，然后按运行。您可能需要为其创建一个配置文件（为此您需要一个 Apple iOS 开发者帐户）。

我认为您不会仅仅通过遵循（和安装）网络上的教程来破坏任何设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:37:57.040

对于 Android：是的，您可以直接从设备上的 Eclipse 或 Netbeans 运行应用程序，与模拟器完全一样。要制作真正的应用程序，您必须在真实设备上进行测试！你不会破坏你的设备。阅读 Android SDK“入门”内容。不过真的不能说iOS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:39:31.203

您总是可以购买二手廉价手机并使用它。我开始在 Android 模拟器中开发应用程序，我对模拟器与真实设备之间的巨大差异感到惊讶，这确实值得购买其中一个终端。

# ruby-on-rails - 在多对多关系中访问数据

> ID：11987256
> 
> 赞同：0
> 
> 时间：2012-08-16T12:35:07.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我创建了 Teacher 和 Sclass 的多对多关联。ClassTeacher 是连接表名。

```
class Teacher < ActiveRecord::Base

  has_many :class_teachers
  has_many :Sclasses, :through => :class_teachers

  attr_accessible :teacher_id
  attr_accessible :tname
  attr_accessible :mob
  attr_accessible :email 
end

class Sclass < ActiveRecord::Base

  set_primary_key :year

  has_many :class_teachers
  has_many :teachers, :through => :class_teachers

  attr_accessible :year

end

class ClassTeacher < ActiveRecord::Base

  belongs_to :teacher
  belongs_to :sclass

  attr_accessible :year
  attr_accessible :teacher_id
end 
```

我在视图 -> 教师文件夹中有 tlist.html.erb、tnew.html.erb，同样我在视图 -> sclasses 文件夹中有 slist.html.erb、snew.html.erb。

当我为老师添加记录时，它也应该要求多年并保存记录。同样，它应该询问teacher_ids 并保存记录。我该怎么做？这些记录将保存在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:02:28.997

我不确定这是否能回答您的问题，但是当您建立多对多关系时，您的模型会获得一些“虚拟”属性，称为 [association_name]_ids。因此，在您的情况下， Sclass 模型将具有一个`teacher_ids`属性，而 Teacher 模型将具有`sclass_ids`.

因此，例如，如果您想将 id 为 1、2 和 3 的教师分配给第一个 sclass，您可以这样做：

```
sclass = Sclass.first
sclass.teacher_ids = [1, 2, 3]
sclass.save 
```

要在一个表单中执行此操作，您可能需要类似一行带有名称的复选框`sclass[teacher_ids][]`（在创建/编辑 Sclass 时），如下所示：

```
<% for teacher in Teacher.all -%>
  <%= checkbox_tag "sclass[teacher_ids][]", teacher.id %>
<% end -%> 
```

# java - 泛型类中的静态最终变量导致未经检查和原始类型警告

> ID：11987258
> 
> 赞同：3
> 
> 时间：2012-08-16T12:35:10.080
> 
> 标签：java, generics

在泛型类中有一个静态最终变量是设计缺陷吗？考虑下面的类，所有引用`Node.SOIL`都会引起警告。解决这个问题的好方法是什么？

```
public class Node<E> {

    private static int nodeCounter = 0;

    @SuppressWarnings({ "unchecked", "rawtypes" })  
    public static final Node SOIL = new Node(null, null); // <-- HERE
    public static void resetSOIL(){
        SOIL.children = null; // <-- HERE
    }

    private Node<E> parent;
    private Set<Node<E>> children;

    protected Set<Node<E>> isomorphs;
    private E data;
    private int id;

    public Node(Node<E> parent, E data){
        this.parent = parent;
        this.data = data;
        this.id = ++nodeCounter;

    }

    public boolean isRoot(){
        return (this.getParent() == SOIL);
    }

    // utility methods
    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:03:22.630

您已经定义了一个类型`Node<E>`，它表示 E 树中的一个节点。例如，`Node<Integer>`是整数树中`Node<String>`的节点， 是字符串树中的节点。

现在你想要一个`SOIL`包含这些不同类型树的所有根的变量（呵呵，*土壤*，我现在明白了）。暂时搁置静态字段问题。类应该`SOIL`是什么？换句话说，我们如何声明和创建`SOIL`实例？

```
Node</*something1*/> SOIL = new Node</*something2*/>(null, null); 
```

既然`SOIL`将要生孩子，`Node<Integer>`那么`Node<String>`它必须是`Node<?>`or之类的东西`Node<Object>`。您不能使用通配符类型参数实例化对象，因此您可以做的最好的事情是这样的：

```
Node<?> SOIL = new Node<Object>(null, null); 
```

（如果您使用 Java 7 菱形构造，无论如何`new Node<>(...)`它最终都会在这种情况下使用。）`Object`

问题是，这仍然行不通。`Node<E>`类型被定义为E的**同构**树。但是其中一个子`SOIL`树是Integers树，另一个子树是Strings树，所以`SOIL`想要成为**异构**树。因此，`SOIL`不能是 a `Node<E>`for any `E`。

至少，不是以类型安全的方式。您可以编写代码来执行此操作，但您必须添加一些强制转换，并且您会收到未经检查的警告。这些警告会告诉您这种方法不起作用。例如，考虑一些采用 a`Node<E>`并对其所有兄弟（即其父级的其他子级）进行操作的代码。一些需要 a 的代码`Node<Integer>`可以调用它并以一堆实例结束`Node<String>`并开始抛出`ClassCastExceptions`.

您可能会考虑制作`SOIL`a`Set<Node<?>>`而不是使其成为所有根的父级。您可以在某处将其设为静态字段，但将其设为私有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:42:47.597

拥有静态最终变量不是设计缺陷。出现警告是因为您在没有提供类型参数的情况下声明了泛型类型的实例：

```
public static final Node SOIL = new Node(null, null); // <-- HERE 
```

当编译器期待类似的东西时：

```
public static final Node<SomeType> SOIL = new Node<SomeType>(null, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:47:40.800

您可以使用它来避免 suppressWarnings 并且效果很好：

```
private static final Node<Object> SOIL = new Node<Object>(null, null); 
```

要回答您的另一个问题：

```
Is it a design flaw to have a static final variable in a generic class? 
```

不，它甚至是一个很好的常见做法，将它用作 Node 类型的 null 变量的默认值，也就是 Effective Java Programming 中的 NULL 对象

# jquery - 将变量放入获取请求数据中

> ID：11987261
> 
> 赞同：0
> 
> 时间：2012-08-16T12:35:22.450
> 
> 标签：jquery

我有一个 jQuery 获取请求，我需要在数据中放置一个变量来检索正确的信息，因为它依赖于其他事物。

这是我的 jQuery；

```
 $.get("AJAX/get_latest_track.php",  function(result){
 song = new Audio(result);

 $.get("AJAX/get_player.php", { url: song },function(result){
     $("#loadInfo").html(result);
     }); 
```

我需要在第二个获取请求中将歌曲放入数据中，但不知道该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:42:57.123

在您沿对象发送的第二个 GET 请求中，您需要发送一个字符串。

通过发送对象，代码将自动执行 song.toString()，这很可能导致实际发送“[object Object]”字符串。

# javascript - 如何控制客户端网站上小部件的外观 CSS

> ID：11987269
> 
> 赞同：2
> 
> 时间：2012-08-16T12:36:10.530
> 
> 标签：javascript, html, css

我们在客户的网站上使用了一个 js/html/css 小部件，并注意到在某些网站上，由于页面中的 css 层叠并与布局混淆，它不能很好地显示，就像网站有一堆CSS应用于页面上的所有div等。

有没有一种简单的方法可以将样式应用于我的小部件的容器，以便侵入性 css 不会破坏布局？

各位大佬是怎么处理这种情况的？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:07:26.090

这是一个常见的问题。我使用的是这个：[https ://github.com/premasagar/cleanslate](https://github.com/premasagar/cleanslate)

一个普通的 CSS 重置样式表是不够的。那些重置/规范化浏览器默认样式。他们不清除作者创建的那些。

此外，由同一作者[https://github.com/premasagar/sqwidget](https://github.com/premasagar/sqwidget) - 它处理 css 重置以及一些更重要的事情。

当我在这里时，这里是来自 Olark 团队的另一个：[https](https://github.com/olark/lightningjs) ://github.com/olark/lightningjs它与上一个类似，但具有更多功能，因此更复杂。这个我没用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:39:28.280

你可以看看[Shadow DOM](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)。这非常适合像您这样的小部件。Shadow DOM 不允许父网页访问您的小部件的 DOM，CSS 规则无法访问您的小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:45:14.273

我会将小部件放在您自己托管的 iframe 中。这解决了这个问题。您可以为您的客户提供可嵌入 iframe 的代码。

这是大型网站、twitter、facebook 使用 iframe 作为其小部件的原因之一。

# pandas - 从 Pandas 中的 DataFrame.sortlevel 获取 MemoryError

> ID：11987270
> 
> 赞同：0
> 
> 时间：2012-08-16T12:36:11.453
> 
> 标签：pandas

我正在尝试`DataFrame`使用 MultiIndex（3 个级别）和大约 900'000x4 的大小在 a 上运行 sortlevel(0,0)。

```
>>>data.as_matrix().shape
(899262, 4)
>>>data.sortlevel(0,0) #<--- throws MemoryError almost instantaneous 
```

我正在运行 Windows Vista（不愿意），据我了解，一个进程只能分配大约 2GB 的 RAM，但我看不出 .sortlevel 如何真正使用这么多的 RAM？排序使用什么算法？是否有任何解决方法可以以相同的方式对其进行排序？

**编辑**只按照旧习惯在 ipython 中测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:11:34.480

`run filename.py`在*ipython*中使用似乎是一个问题，由于某种原因，它使用了比命令提示符下的普通*python更多的 RAM。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:11:52.593

在某些地方，pandas 对 MultiIndex 的内存使用情况可能没有那么小心——如果您确实找到了重现问题的案例，请将其发布在问题跟踪器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:07:45.170

当从 IPython 运行模块时，我在排序大型 DataFrames 时遇到了相同的 MemoryError 问题。

如果您有 64 位处理器、操作系统和超过 2GB 的 RAM，另一个解决方案是运行 64 位 Python，您可以获得预打包的 64 位版本的 Python，如[Anaconda 社区版](https://store.continuum.io/cshop/anaconda)或[获得非官方的 64 位二进制文​​件](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pandas)

# video - 从视频文件中导出所有静止帧？

> ID：11987284
> 
> 赞同：0
> 
> 时间：2012-08-16T12:36:47.750
> 
> 标签：video, image-processing

我正在寻找一种以编程方式从本地视频文件中导出所有静止帧的方法，我尝试过 Processing 和 OpenFrameworks，但它们似乎只处理实时视频，我也看过 vidsynth，但它只是 Windows。 ...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:46:01.623

使用 ffmpeg 这里是命令

ffmpeg -i inputfile.avi -r 1 -f image2 image-%3d.jpeg

# pdf - Seam PDF - 将“p:data”键向左对齐

> ID：11987286
> 
> 赞同：6
> 
> 时间：2012-08-16T12:36:58.643
> 
> 标签：pdf, seam

我有以下代码从数据生成pdf：

```
<p:barchart is3D="true" legend="false" orientation="horizontal" width="520">    
    <p:series key="Gráfico">
        <ui:repeat var="ocr" value="#{myBean.value}" >
            <p:data key="#{ocr[0]}" value="#{ocr[1]}" />
        </ui:repeat>
    </p:series>
</p:barchart> 
```

问题是 p:data 中的键**向右****对齐**（出于某种奇怪的原因）。我尝试使用 text-align 将代码放在 div 之间，但没有奏效。

 **我希望对齐在左侧。

如果有人有答案，或者至少有一个想法让我尝试，我将非常感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:54:53.960

您分配的值是 int 还是其他数值？尝试将其转换为字符串。**

# iphone - 收到 UINotification 后打开特定视图

> ID：11987289
> 
> 赞同：0
> 
> 时间：2012-08-16T12:37:03.497
> 
> 标签：iphone, ios, uiviewcontroller, uilocalnotification

当我的应用收到通知时，它会像这样打开一个特定的视图来处理它：

```
 UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotif) {
        NSLog(@"Recieved Notification  didFinishLaunchingWithOptions %@",localNotif);
        [theLastPresentedViewController presentViewController:myVC animated:YES completion:nil];
    } 
```

基本上我的问题是如何访问最后呈现的 ViewController **theLastPresentedViewController**以便我可以呈现`myView`在它之上？

虽然该应用程序使用 tabBarViewController 作为基础，但我将其他 viewController 呈现在其他视图之上，因此无法知道哪个 ViewController 已作为最后一个呈现。

我是否必须手动记住我呈现的每个 ViewController，所以当应用程序启动时我可以访问最后一个，或者有没有办法直接访问应用程序的最后一个可见的 viewController？

由于用户只需按下 HOME 按钮并退出应用程序，因此无法知道此时显示的是哪个视图。在到达 tabBarViewController 之前，从堆栈中关闭所有这些视图也是可以的。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:11:15.620

在导航堆栈上执行“随机”推送基本上是一个坏主意。您可以呈现一个半模态或模态控制器作为对通知的反应，它通常不需要指向“顶部可见”视图控制器的指针。

或者，您可以允许您的视图控制器/视图接受第一响应者，例如：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self becomeFirstResponder];
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
} 
```

现在，您可以发送一个事件：

```
[[UIApplication sharedApplication] sendAction:@selector(popNotification) to:nil from:notificationObj forEvent:nil]; 
```

并且它将被分派给第一响应者（即任何焦点视图，并向下到视图控制器，因为视图无法处理自定义事件）。从这一点开始，您处于顶部可见视图控制器的上下文中，并且可以继续您的原始任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:56:56.277

我发现这个可以访问最顶层的窗口/视图：

```
[[[UIApplication sharedApplication] keyWindow] addSubview:someView] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:07:34.407

```
 - (void)applicationDidEnterBackground:(UIApplication *)application{
saveIndex = self.tabBarController.selectedIndex //shows the current index of the viewController of the Array of the tabBarController
    //add some stuff to save the integer} 
```

您可以在用户退出应用程序并在应用程序变为活动状态后使用数组的此元素加载 tabBarController 时保存此整数

要打开保存的视图，请在 AppDelegate 中写入：

```
 - (void)applicationDidBecomeActive:(UIApplication *)application{
[self.tabBarController setSelectedIndex:savedIndex];} 
```

这应该这样做

# vba - Excel VBA：返回计算结果的单元格值

> ID：11987294
> 
> 赞同：0
> 
> 时间：2012-08-16T12:37:36.320
> 
> 标签：vba, excel

我有以下 VBA 功能：

```
Function IndexOfColor(InRange As Range, ColorIndex As Long) As Excel.Range
Dim R As Range

Application.Volatile True
If IsValidColorIndex(ColorIndex) = False Then
    IndexOfColor = 0
    Exit Function
End If

For Each R In InRange.Cells
    If R.Interior.ColorIndex = ColorIndex Then
        IndexOfColor = R
        Exit Function
    End If
Next R

IndexOfColor = 0
End Function 
```

在我的excel表中，我称之为：

```
=IndexOfColor(D15:M24,37) 
```

并且总是得到`"#VALUE"`。我已经调试了这个函数，直到最后，没有问题。虽然这应该只返回 1 个结果（我正在查看范围，并且只有一个彩色单元格），但我也尝试将其设为数组结果（CTRL-SHIFT-ENTER）。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:25:49.387

这是你正在尝试的吗？如果单元格没有小数，则可以替换`Variant`为`Long`

```
Function IndexOfColor(InRange As Range, ColorIndex As Long) As Variant
    Dim R As Range

    IndexOfColor = 0

    On Error GoTo Whoa

    Application.Volatile True

    If Not IsValidColorIndex(ColorIndex) = False Then
        For Each R In InRange.Cells
            If R.Interior.ColorIndex = ColorIndex Then
                IndexOfColor = R.Value
                Exit For
            End If
        Next R
    End If
Whoa:
End Function 
```

# android - 自动屏幕锁定模式/密码是否启用？

> ID：11987297
> 
> 赞同：0
> 
> 时间：2012-08-16T12:37:43.447
> 
> 标签：android

我正在开发应用程序来检查用户是否选择了任何屏幕锁定模式。

如果不是，我将调用启动活动的意图来设置密码，然后继续应用程序

所以我要求用户首先通过调用来设置屏幕锁定

```
 Intent intent =
new Intent(DevicePolicyManager.ACTION_SET_NEW_PASSWORD); 
```

开始活动（意图）；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:44:13.713

用于`DevicePolicyManager.isActivePasswordSufficient`检查是否设置了密码。

你需要打电话`DevicePolicyManager.setPasswordQuality`和

```
DevicePolicyManager.setPasswordMinimumLength 
```

在调用这个函数之前

**编辑**：这是代码。

假设您希望用户设置任何密码，然后使用以下代码。

```
DevicePolicyManager  mDPM = DevicePolicyManager.getSystemService(Context.DEVICE_POLICY_SERVICE); mDeviceAdminSample = new ComponentName(ControllerActivity.this, DeviceAdminSample.class);

mDPM.setPasswordQuality(mDeviceAdminSample, DevicePolicyManager.PASSWORD_QUALITY_SOMETHING );
if(!mDPM.isActivePasswordSufficient()){
    Intent intent = new Intent(DevicePolicyManager.ACTION_SET_NEW_PASSWORD);
    startActivity(intent); 
} 
```

当然，您必须拥有与设备策略管理器相关的所有权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T18:51:59.360

代替

if(DevicePolicyManager.isActivePasswordSufficient()){

和

if(!mDPM.isActivePasswordSufficient()){

# epub - EPUB 中的交互级别

> ID：11987302
> 
> 赞同：0
> 
> 时间：2012-08-16T12:38:10.433
> 
> 标签：epub

是否可以在 epub 的每一章之后添加一些问题，并以某种方式限制用户在回答完最后一章的问题之前不要继续阅读本书的下一章。

我看过一个实现，想知道他们是如何实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:57:33.913

我假设您可以访问 Javascript 来处理章末测试。将结果存储在本地存储中。然后，当您加载可能限制访问的页面时，请咨询本地存储以查看是否允许用户查看它，并根据结果执行诸如向 body 标记添加类以显示非可访问的消息：

```
<script>
    window.onLoad(function(){
      var can_access=get_accessibility(location.href);
      if (!can_access) { document.body.className="no-access";}
    };
</script>

#no-access-msg { display: none; }
body.noaccess #no-access-msg { display: block; }

<body>
  <div id="no-access-msg">You can't access this page yet, take the test first.</div> 
```

你明白了。

# android - 相机表面视图上的横向列表

> ID：11987304
> 
> 赞同：3
> 
> 时间：2012-08-16T12:38:19.687
> 
> 标签：android, camera, android-listview, android-camera, android-orientation

我正在构建一个相机应用程序，我想在其中实现 android 在其设置菜单中具有的相同功能：

这是肖像模式下的相机场景设置：

![人像模式下的相机场景设置](../Images/6be2b5d256ffba96227b968a5c74aee4.png)

这是横向模式下的相机场景设置：

![横向模式下的相机场景设置](../Images/817c38808f34fdfbdfd51c19b1c4952f.png)

列表的方向和按钮的方向发生了变化，但没有重新创建应用程序我猜这发生在orientationEventListener 我设法用这种方式旋转动画而不是设置列表来旋转按钮......任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:47:33.463

为相机制作 XML 时仅使用相对布局。制作另一个包含各种项目的列表视图的布局。然后在您的 java 文件中，在您的 camerapreview.xml 上添加您的 list.xml .. 它在我的工作中，锻炼，它会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:08:46.067

如果您实际上并没有改变方向，那么您将需要从列表中以相反方向旋转的东西（水平的，如画廊或水平滚动视图）。我建议删除列表并将其更改为滚动视图。当旋转发生变化时，将其更改为水平滚动视图并将每个项目旋转 90 度。将它放在正确的位置等可能需要一些技巧，但可能是您最简单的解决方案。

# r - ggplot2中的数字格式轴标签？

> ID：11987308
> 
> 赞同：54
> 
> 时间：2012-08-16T12:38:25.777
> 
> 标签：r, ggplot2

我正在使用 ggplot2 0.9.1 绘制一个相当简单的图表。

```
x <- rnorm(100, mean=100, sd = 1) * 1000000
y <- rnorm(100, mean=100, sd = 1) * 1000000
df <- data.frame(x,y)

p.new <- ggplot(df,aes(x,y)) +
  geom_point()
print(p.new) 
```

哪个有效，但 ggplot2 默认使用不适合我的听众的科学记数法。如果我想通过输入来更改 x 轴标签格式：

```
p.new + scale_x_continuous(labels = comma) 
```

我得到：

> 结构错误（列表（调用 = match.call()，美学 = 美学，：找不到对象“逗号”

我究竟做错了什么？我注意到该语言最近从“格式化程序”更改为“标签”。也许我误读了手册页？

**编辑：我确实误读了手册页**

`library(scales)`在尝试此操作之前需要加载。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-16T21:24:10.567

`library(scales)`在尝试此操作之前需要加载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-09T07:15:37.930

更一般地说，您可以使用“scales”包控制一些不错的参数。它的功能之一是 number_format()。

```
library(ggplot2)
library(scales)
p <- ggplot(mpg, aes(displ, cty)) + geom_point() 
```

要格式化您的数字，您可以使用函数 number_format()。它提供了一些不错的可能性，例如控制小数位数（这里是 2 个小数）和小数点（这里是 ',' 而不是 '.'）

```
p + scale_y_continuous(
  labels = scales::number_format(accuracy = 0.01,
                                 decimal.mark = ',')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-08T20:40:40.710

下面是一个示例，说明如何使用[`scales::comma_format()`](https://www.rdocumentation.org/packages/scales/versions/0.4.1/topics/comma_format).

本质上允许使用 prettyNum() 格式的样式。

```
Seatbelts_df <- as.data.frame(Seatbelts)

ggplot(data=Seatbelts_df, aes(x=Seatbelts_df$drivers, y=Seatbelts_df$DriversKilled, color=factor(Seatbelts_df$law))) +
  geom_jitter(alpha=0.5) +
  theme(plot.title=element_text(face="bold")) +
  labs(title="Amount of Drivers on Road vs Amount of deaths", subtitle = "Dataset from package datasets::Seatbelts", x ="Drivers on Road", y="Amount of Deaths", color="Seatbelt Law?") +
  scale_color_manual(labels = c("Yes", "No"), values = c("blue", "red")) +
  geom_vline(aes(xintercept=mean(Seatbelts_df$drivers)), color="black", linetype="dashed", size=1) +
  scale_x_continuous(
  labels = scales::comma_format(big.mark = ',',
                                 decimal.mark = '.')) 
```

[![带逗号的输出示例](../Images/f2b26eebfa943bb8d59bc150f7c83a93.png)](https://i.stack.imgur.com/meFNr.png)

# matlab - 根据条件更改矩阵元素

> ID：11987313
> 
> 赞同：2
> 
> 时间：2012-08-16T12:38:41.777
> 
> 标签：matlab, if-statement, indexing

假设我有矩阵 A：

```
A =

 1     2     3
 4     5     6 
```

每个元素`x<2`加 10，
每个元素`x>5`加 20，
每个元素`2<=x<=5`加 30。

因此，对于我的示例矩阵 A，我需要得到以下矩阵 B：

```
B = 

11    32    33
34    35    26 
```

我需要能够以一般方式执行此操作，因为实际矩阵将非常大。有什么建议么？我可以使用`IF`声明吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T12:40:37.147

您`IF`不需要[逻辑索引](http://www.mathworks.com/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)：

```
 IndexOfLessThan2 = A < 2;
    IndexOfGreaterThan5 = A > 5;
    IndexBtw2and5 = ~(IndexOfLessThan2 | IndexOfGreaterThan5);

    A = A + IndexOfLessThan2*10 + IndexOfGreaterThan5*20 + IndexBtw2and5*30; 
```

# javascript - 在 ASP 中用“替换”

> ID：11987316
> 
> 赞同：2
> 
> 时间：2012-08-16T12:38:54.367
> 
> 标签：javascript, asp-classic

正如标题所示，我正在尝试用转义字符 \" 替换 "。我这样做的原因是因为我的字符串中有一个表示英寸的引号，并且该字符串需要通过 javascript 代码运行。

但是，当我在 javascript 代码中运行我的字符串时，它只能读取英寸字符并忘记字符串的其余部分。

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:44:36.793

像这样的函数将转义`\`，`"`并且`'`：

```
function AddSlashes(str)
    AddSlashes = replace(str,"\","\\")
    AddSlashes = replace(AddSlashes,"'","\'")
    AddSlashes = replace(AddSlashes,chr(34),"\" & chr(34))
end function 
```

[来源](https://stackoverflow.com/a/7218067/692456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:12:55.773

如果你这样定义`var s = 'some string';`，引号是可以的，但是如果你喜欢`var s = "some string";`，你应该把引号替换为`\"`，所以代码`var s = "some string \ " with the quote";` 也是你需要替换JS代码之前的Vbcrlf和vbcr和vblf

# clojure - 分层 leiningen 项目有优势吗？

> ID：11987317
> 
> 赞同：3
> 
> 时间：2012-08-16T12:39:09.673
> 
> 标签：clojure, leiningen

这不是一个问题问题，而是一个使用工具的问题——leiningen——问题。

在一个主要项目下创建分层 lein 项目是否有优势，如果有，那有什么优势？

`lein new bene-cmp`如果我使用Clojure“主”程序创建一个项目

```
(defproject bene-cmp "1.0.4-SNAPSHOT"
  :description "This is the main benetrak/GIC comparison program."
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/tools.cli "0.1.0"]
                 [clojure-csv/clojure-csv "1.3.2"]
                 [org.clojure/data.csv "0.1.2"]
                 [bene-csv "1.0.4-SNAPSHOT"]
                 [util "1.0.4-SNAPSHOT"]]

  :omit-source true
  :main bene-cmp.core) 
```

我想编写一些 Clojure 脚本来清理输入文件，这些文件最终将通过 bash 脚本输入到 bene-cmp 中，这些项目应该是与 bene-cmp 相同级别的项目，还是在 bene-cmp 项目下，以及为什么?

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:51:59.367

我总是查看项目的发布周期，以确定它们是子项目还是“同级别”项目。如果您总是要在 bene-cmp 的同时发布 bene-sanitizers，那么它们是子项目，甚至只是 bene-cmp 中的命名空间。

# numpy - Theano 因 Ubuntu 下的 NumPy Fortran 混淆而失败

> ID：11987325
> 
> 赞同：13
> 
> 时间：2012-08-16T12:39:30.310
> 
> 标签：numpy, scipy, gfortran, theano

我在我的机器上安装了[Theano](http://deeplearning.net/software/theano/)，但鼻子测试因 Numpy/Fortran 相关的错误消息而中断。对我来说，看起来 Numpy 是用与 Theano 不同的 Fortran 版本编译的。我已经重新安装了 Theano ( `sudo pip uninstall theano`+ `sudo pip install --upgrade --no-deps theano`) 和 Numpy / Scipy ( `apt-get install --reinstall python-numpy python-scipy`)，但这并没有帮助。

你会推荐什么步骤？

### 完整的错误信息：

```
ImportError: ('/home/Nick/.theano/compiledir_Linux-2.6.35-31-generic-x86_64-with-Ubuntu-10.10-maverick--2.6.6/tmpIhWJaI/0c99c52c82f7ddc775109a06ca04b360.so: undefined symbol: _gfortran_st_write_done' 
```

### 我的研究：

有关错误的[安装 SciPy / BuildingGeneral](http://www.scipy.org/Installing_SciPy/BuildingGeneral)页面`undefined symbol: _gfortran_st_write_done'`：

如果您看到错误消息

`ImportError: /usr/lib/atlas/libblas.so.3gf: undefined symbol: _gfortran_st_write_done`

在构建 SciPy 时，这意味着 NumPy 在构建过程中选择了错误的 Fortran 编译器（例如 ifort）。

使用以下命令重新编译 NumPy：

`python setup.py build --fcompiler=gnu95`

或任何合适的（见`python setup.py build --help-fcompiler`）。

但：

```
Nick@some-serv2:/usr/local/lib/python2.6/dist-packages/numpy$ python setup.py build --help-fcompiler
This is the wrong setup.py file to run 
```

### 使用的软件版本：

*   scipy 0.10.1（scipy.test() 有效）
*   NumPy 1.6.2（numpy.test() 有效）
*   theano 0.5.0（几个测试失败`undefined symbol: _gfortran_st_write_done'`）
*   蟒蛇2.6.6
*   Ubuntu 10.10

## [更新]

`apt-get remove`所以我用剩下的东西从我的系统中删除了 numpy 和 scipy `find -name XXX -delete`。

比我用`sudo python setpy.py install`.

后来我又进去`sudo pip uninstall theano`了`sudo pip install --upgrade --no-deps theano`。

错误仍然存​​在：/

我也尝试了`apt-get source`... +`apt-get build-dep ...`方法，但是对于我的旧 Ubuntu (10.10)，它为 theano 安装了太旧版本的 numpy 和 scipy：`ValueError: numpy >= 1.4 is required (detected 1.3.0 from /usr/local/lib/python2.6/dist-packages/numpy/__init__.pyc)`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-14T17:48:02.127

我遇到了同样的问题，在查看源代码后，user212658 的答案似乎可行（我没有尝试过）。然后，我寻找一种方法来部署 user212658 的 hack，而无需修改源代码。

将这些行放在您的[theanorc](http://deeplearning.net/software/theano/library/config.html#envvar-THEANORC)文件中：

```
[blas]
ldflags = -lblas -lgfortran 
```

这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:06:16.947

您是否尝试过从源代码重新编译 NumPy？

我不熟悉 Ubuntu 软件包系统，所以我无法检查您的`dist-packages/numpy`. 使用干净的`NumPy`源存档，您应该具有`setup.py`与目录相同的级别`numpy`，`tools`并且`benchmarks`（以及其他）。我很确定这是您要用于`python setup.py build`.

**[编辑]**

既然您已经`numpy`使用正确的*选项*重新编译，`--fcompiler`也许您可​​以尝试对. 您应该以这种方式更好地控制构建过程，这将使调试/尝试找到解决方案更容易。`Theano`*`apt-get``pip`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:34:10.480

我有同样的问题。我找到的解决方案是在 theano/gof/cmodule.py 中添加一个 hack，以在库中有“blas”时链接到 gfortran。那解决了它。

```
class GCC_compiler(object):
   ...
    @staticmethod
    def compile_str(module_name, src_code, location=None,
                    include_dirs=None, lib_dirs=None, libs=None,
                    preargs=None):
        ...
        cmd.extend(['-l%s' % l for l in libs])
        if 'blas' in libs:
            cmd.append('-lgfortran') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T20:03:51.183

更好的解决方法是删除 atlas 并安装 openblas。openblas 比 atlas 更快。此外，openblas 不请求 gfortran，并且是与 numpy 相关联的一个。所以它会开箱即用。*

# visual-c++ - 如何使用 FolderBrowserDialog 列出所选文件夹中的所有文件？

> ID：11987330
> 
> 赞同：0
> 
> 时间：2012-08-16T12:39:38.767
> 
> 标签：visual-c++, c++-cli, folderbrowserdialog

我想用 C++/CLI 列出树视图中的所有文件。需要使用 FolderBrowserDialog 选择文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:51:10.093

您在寻找[SHBrowseForFolder](http://msdn.microsoft.com/en-us/library/bb762115%28VS.85%29.aspx)吗？

# javascript - 如何结合这些悬停功能

> ID：11987332
> 
> 赞同：0
> 
> 时间：2012-08-16T12:39:41.780
> 
> 标签：javascript, jquery

我有很多跨度，我需要分组以在悬停后更改不透明度，所有这些都需要具有唯一的 ID，有没有办法将所有这些悬停功能组合成一个功能？

jQuery

```
//09    
    $('#c_09_241a, #c_09_241b, #c_09_241c, #c_09_241d').hover(
        function() {
            $('#c_09_241a, #c_09_241b, #c_09_241c, #c_09_241d').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_09_241a, #c_09_241b, #c_09_241c, #c_09_241d').stop(true, true).css('opacity','0');
    }); 
    $('#c_09_242a, #c_09_242b').hover(
        function() {
            $('#c_09_242a, #c_09_242b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_09_242a, #c_09_242b').stop(true, true).css('opacity','0');
    });
    $('#c_09_245a, #c_09_245b').hover(
        function() {
            $('#c_09_245a, #c_09_245b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_09_245a, #c_09_245b').stop(true, true).css('opacity','0');
    });
    $('#c_09_246a, #c_09_246b').hover(
        function() {
            $('#c_09_246a, #c_09_246b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_09_246a, #c_09_246b').stop(true, true).css('opacity','0');
    });

    //08    
    $('#c_08_235a, #c_08_235b, #c_08_235c, #c_08_235d').hover(
        function() {
            $('#c_08_235a, #c_08_235b, #c_08_235c, #c_08_235d').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_08_235a, #c_08_235b, #c_08_235c, #c_08_235d').stop(true, true).css('opacity','0');
    }); 
    $('#c_08_236a, #c_08_236b').hover(
        function() {
            $('#c_08_236a, #c_08_236b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_08_236a, #c_08_236b').stop(true, true).css('opacity','0');
    });
    $('#c_08_239a, #c_08_239b').hover(
        function() {
            $('#c_08_239a, #c_08_239b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_08_239a, #c_08_239b').stop(true, true).css('opacity','0');
    });
    $('#c_08_240a, #c_08_240b').hover(
        function() {
            $('#c_08_240a, #c_08_240b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_08_240a, #c_08_240b').stop(true, true).css('opacity','0');
    });

    //07    
    $('#c_07_227a, #c_07_227b').hover(
        function() {
            $('#c_07_227a, #c_07_227b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_07_227a, #c_07_227b').stop(true, true).css('opacity','0');
    });
    $('#c_07_228a, #c_07_228b, #c_07_228c').hover(
        function() {
            $('#c_07_228a, #c_07_228b, #c_07_228c').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_07_228a, #c_07_228b, #c_07_228c').stop(true, true).css('opacity','0');
    });
    $('#c_07_007a, #c_07_007b').hover(
        function() {
            $('#c_07_007a, #c_07_007b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_07_007a, #c_07_007b').stop(true, true).css('opacity','0');
    });
    $('#c_07_008a, #c_07_008b').hover(
        function() {
            $('#c_07_008a, #c_07_008b').stop(true, true).css('opacity','1');
        },
        function() {
             $('#c_07_008a, #c_07_008b').stop(true, true).css('opacity','0');
    }); 
```

HTML

```
<div id="rzuty09p" class="rzuty">
            <span id="c_09_241a" class="mieszkanie" title=""></span>
            <span id="c_09_241b" class="mieszkanie" title=""></span>
            <span id="c_09_241c" class="mieszkanie" title=""></span>
            <span id="c_09_241d" class="mieszkanie" title=""></span>
            <span id="c_09_242a" class="mieszkanie" title=""></span>
            <span id="c_09_242b" class="mieszkanie" title=""></span>
            <span id="c_09_243" class="mieszkanie" title=""></span>
            <span id="c_09_244" class="mieszkanie" title=""></span>
            <span id="c_09_245a" class="mieszkanie" title=""></span>
            <span id="c_09_245b" class="mieszkanie" title=""></span>
            <span id="c_09_246a" class="mieszkanie nie" title=""></span>
            <span id="c_09_246b" class="mieszkanie nie" title=""></span>
        </div>  

<div id="rzuty08p" class="rzuty">
            <span id="c_08_235a" class="mieszkanie" title=""></span>
            <span id="c_08_235b" class="mieszkanie" title=""></span>
            <span id="c_08_235c" class="mieszkanie" title=""></span>
            <span id="c_08_235d" class="mieszkanie" title=""></span>
            <span id="c_08_236a" class="mieszkanie nie" title=""></span>
            <span id="c_08_236b" class="mieszkanie nie" title=""></span>
            <span id="c_08_237" class="mieszkanie" title=""></span>
            <span id="c_08_238" class="mieszkanie" title=""></span>
            <span id="c_08_239a" class="mieszkanie" title=""></span>
            <span id="c_08_239b" class="mieszkanie" title=""></span>
            <span id="c_08_240a" class="mieszkanie" title=""></span>
            <span id="c_08_240b" class="mieszkanie" title=""></span>
        </div>      

<div id="rzuty07p" class="rzuty">
            <span id="c_07_226" class="mieszkanie" title=""></span>
            <span id="c_07_227a" class="mieszkanie" title=""></span>
            <span id="c_07_227b" class="mieszkanie" title=""></span>
            <span id="c_07_228a" class="mieszkanie" title=""></span>
            <span id="c_07_228b" class="mieszkanie" title=""></span>
            <span id="c_07_228c" class="mieszkanie" title=""></span>
            <span id="c_07_229" class="mieszkanie nie" title=""></span>
            <span id="c_07_005" class="mieszkanie" title=""></span>
            <span id="c_07_006" class="mieszkanie" title=""></span>
            <span id="c_07_007a" class="mieszkanie nie" title=""></span>
            <span id="c_07_007b" class="mieszkanie nie" title=""></span>
            <span id="c_07_008a" class="mieszkanie" title=""></span>
            <span id="c_07_008b" class="mieszkanie" title=""></span>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:47:26.027

你有三个选择：

1.  将您的班级用作选择器：

    ```
    $('.mieszkanie').hover(
        function() {
            $(this).stop(true, true).css('opacity','1');
        },
        function() {
            $(this).stop(true, true).css('opacity','0');
    }); 
    ```

2.  在同一个选择器中添加所有 ID：

    ```
    $('#c_09_245a, #c_09_245b, #c_09_246a, #c_09_246b, #c_09_247a, #c_09_247b').hover(
        function() {
            $(this).stop(true, true).css('opacity','1');
        },
        function() {
            $(this).stop(true, true).css('opacity','0');
    }); 
    ```

3.  创建两个函数来减少代码：

    ```
    function show () {
        $(this).stop(true, true).css('opacity','1');
    }

    function hide () {
        $(this).stop(true, true).css('opacity','0');
    }

    $(selector).hover(show, hide); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:44:53.963

您可以`this`在大多数带有触发事件的元素的 jQuery 事件处理程序中使用。尝试类似：

```
$('.rzuty>span').hover(function() {
    $(this).stop(true, true).css('opacity',1);
}, function() {
    $(this).stop(true, true).css('opacity',0);
}); 
```

或者，如果您想更具体，请添加一个类并在选择器中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:08:50.457

谢谢马特，我们有最终答案

```
var ids = [
    "#c_07_227a, #c_07_227b",
    "#c_07_228a, #c_07_228b, #c_07_228c"
    // add more here
];

ids.forEach(function(i) {
    $(i).hover(function() {
        $(i).stop(true, true).css('opacity', '1');
    }, function() {
        $(i).stop(true, true).css('opacity', '0');
    });
}); 
```

# ruby-on-rails-3 - Michael Hartl Ruby on Rails 教程第 9 章 Rspec 失败

> ID：11987333
> 
> 赞同：1
> 
> 时间：2012-08-16T12:39:43.367
> 
> 标签：ruby-on-rails-3

嗨，我是 Rails 的新手。[Ruby on Rails 教程](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.2#top)第 9 章，Rspec 失败。轨道版本。是 3.2.6。这个来源是[github](https://github.com/ichisemasashi/sample_app)。我有 3 次失败的测试来完成本章。

终端返回：

```
 $ bundle exec rspec spec/requests/user_pages_spec.rb
    ......F.FF.................

Failures:

  1) User pages index pagination should list each user
     Failure/Error: page.should have_selector('li', text: user.name)
       expected css "li" with text "Person 41" to return something
     # ./spec/requests/user_pages_spec.rb:44:in `block (5 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:43:in `each'
     # ./spec/requests/user_pages_spec.rb:43:in `block (4 levels) in <top (required)>'

  2) User pages delete links as an admin user 
     Failure/Error: it { should have_link('delete', href: user_path(User.first)) }
       expected link "delete" to return something
     # ./spec/requests/user_pages_spec.rb:61:in `block (4 levels) in <top (required)>'

  3) User pages delete links as an admin user should be able to delete another user
     Failure/Error: expect { click_link('delete') }.to change(User, :count).by(-1)
     Capybara::ElementNotFound:
       no link with title, id or text 'delete' found
     # (eval):2:in `click_link'
     # ./spec/requests/user_pages_spec.rb:63:in `block (5 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:63:in `block (4 levels) in <top (required)>'

Finished in 4.6 seconds
27 examples, 3 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:42 # User pages index pagination should list each user
rspec ./spec/requests/user_pages_spec.rb:61 # User pages delete links as an admin user 
rspec ./spec/requests/user_pages_spec.rb:62 # User pages delete links as an admin user should be able to delete another user 
```

规格文件是这样的：

```
$ cat spec/requests/user_pages_spec.rb
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "index" do

    let(:user) { FactoryGirl.create(:user) }

    before(:all) { 30.times { FactoryGirl.create(:user) } }
    after(:all)  { User.delete_all }

    before do
      sign_in user
      visit users_path
    end

    it { should have_selector('title', text: 'All users') }
    it { should have_selector('h1',    text: 'All users') }

    describe "pagination" do

      it { should have_selector('div.pagination') }

      it "should list each user" do
        User.paginate(page: 1).each do |user|
          page.should have_selector('li', text: user.name)
        end
      end

    before do
      sign_in FactoryGirl.create(:user)
      FactoryGirl.create(:user, name: "Bob", email: "bob@example.com")
      FactoryGirl.create(:user, name: "Ben", email: "ben@example.com")
      visit users_path
    end

    it { should have_selector('title', text: 'All users') }
    it { should have_selector('h1',    text: 'All users') }

    it "should list each user" do
      User.all.each do |user|
        page.should have_selector('li', text: user.name)
      end
    end
  end
end

    describe "delete links" do

      it { should_not have_link('delete') }

      describe "as an admin user" do
        let(:admin) { FactoryGirl.create(:admin) }
        before do
          sign_in admin
          visit users_path
        end

        it { should have_link('delete', href: user_path(User.first)) }
        it "should be able to delete another user" do
          expect { click_link('delete') }.to change(User, :count).by(-1)
        end
        it { should_not have_link('delete', href: user_path(admin)) }
      end
    end

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }
        it { should have_link('Sign out') }
      end
    end
  end

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end
    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }
      before do
        fill_in "Name",             with: new_name
        fill_in "Email",            with: new_email
        fill_in "Password",         with: user.password
        fill_in "Confirm Password", with: user.password
        click_button "Save changes"
      end

      it { should have_selector('title', text: new_name) }
      it { should have_selector('div.alert.alert-success') }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should  == new_name }
      specify { user.reload.email.should == new_email }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T21:54:48.417

有点晚了，但也许这可以帮助其他人帮助我。

我的回答[在这里](https://stackoverflow.com/a/18667110/1223901)

我想这解决了 2 和 3 失败。

问候

# c# - 数据表中的长日期时间字段到短日期时间字段，而 LINQ 没有获得不同的值

> ID：11987335
> 
> 赞同：1
> 
> 时间：2012-08-16T12:39:48.863
> 
> 标签：c#

我有一个数据表，其中包含来自许多事件文件的许多字段。我需要能够在时间上选择不同的。日期时间字段是这种格式`MM/dd/yyyy HH:mm:ss`..我正在尝试这个：

```
dpall = RollUpValuesFunctions.jobTableFinalCSVOutput.DefaultView.ToTable(); 
```

我想知道是否有一种方法可以对日期时间字段应用约束以仅获得一个不同的日期，例如`MM/dd/yyyy HH:mm`？
每分钟有几百条记录，但出于我的目的，我只需要那一分钟的一条记录。

这是在 C# 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:09:02.980

给定以下数据：

```
var dt = new DataTable();
dt.Columns.Add(new DataColumn("Time", typeof(DateTime)));
dt.Rows.Add(new DateTime(2000, 12, 31, 12, 0, 0));
dt.Rows.Add(new DateTime(2000, 12, 31, 12, 0, 0));
dt.Rows.Add(new DateTime(2000, 12, 31, 12, 0, 1));
dt.Rows.Add(new DateTime(2000, 12, 31, 12, 0, 2));
dt.Rows.Add(new DateTime(2000, 12, 31, 12, 4, 2));
dt.Rows.Add(new DateTime(2000, 12, 31, 12, 5, 5));
dt.Rows.Add(new DateTime(2000, 12, 31, 12, 5, 2)); 
```

显而易见的 Linq 方法是

```
var result = from row in dt.AsEnumerable()
             let d = row.Field<DateTime>("Time")
             group row by new DateTime(d.Year, d.Month, d.Day, d.Hour, d.Minute, 0) into g
             select g.First();

foreach (DataRow row in result)
    Console.WriteLine(row["Time"]); 
```

但是既然您要求使用非 linq 解决方案，为什么不只遍历每一行，摆脱`seconds`部分时间，并使用 a[`DataView`](http://msdn.microsoft.com/en-us/library/01s96x0z)来完成该`Distinct`部分：

```
foreach (DataRow row in dt.Rows)
{
    DateTime d = row.Field<DateTime>("Time");
    row["Time"] = new DateTime(d.Year, d.Month, d.Day, d.Hour, d.Minute, 0);
    // or use "tricks" like this
    // row["Time"] = d.AddTicks(-(d.Ticks % TimeSpan.TicksPerMinute));
}

foreach(DataRow r in new DataView(dt).ToTable(true).Rows)
    Console.WriteLine(r["Time"]); 
```

如果你不想改变你的`DataTable`，你可以先复制它。

# html - 使用 css 更改悬停时的图像

> ID：11987339
> 
> 赞同：1
> 
> 时间：2012-08-16T12:40:18.780
> 
> 标签：html, css

我不是设计师，但今天我正在用 css 做一个实验

我的问题是我想仅使用 css 在我的网页上显示图像，例如 Here's [a link](http://gsg.com.au/solutions/six-drivers-of-sustainable-growth-healthy-brands)

[http://gsg.com.au/solutions/six-drivers-of-sustainable-growth-healthy-brands](http://gsg.com.au/solutions/six-drivers-of-sustainable-growth-healthy-brands)

这是我的示例代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"
            "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
<head>
<title>Pure CSS Popups 2</title>
<style type="text/css">
<!--
body {position: relative; background: black; margin: 0; padding: 0;}

div#links {position: absolute; top: 81px; left: 0; width: 166px; height: 700px; font: 16px Verdana, sans-serif; z-index: 100;}
div#links a {display: block; text-align: center; font: bold 1em sans-serif; 
   padding: 5px 10px; margin: 0 0 1px; border-width: 0; 
   text-decoration: none; color: #FFC; background:;
   border-right: 5px solid #505050;}
div#links #whl1 a:hover {color: #411; background: #AAA;
   border-right: 5px double white;}

div#links a img {height: 0; width: 0; border-width: 0;}
div#links a:hover img {position: absolute; top: 190px; left: 55px; height: 50px; width: 50px;}

div#content {position: absolute; top: 26px; left: 161px; right: 25px;
   color: #BAA; background: #22232F; 
   font: 13px Verdana, sans-serif; padding: 10px; 
   border: solid 5px #444;}
div#content p {margin: 0 1em 1em;}
div#content h3 {margin-bottom: 0.25em;}

h1 {margin: -9px -9px 0.5em; padding: 15px 0 5px; text-align: right;background: #00ff00 url('wheel01.png') no-repeat fixed center;
; color: #667; letter-spacing: 0.5em; text-transform: lowercase; font: bold 25px sans-serif; height: 28px; vertical-align: middle; white-space: nowrap;}
dt {font-weight: bold;}
dd {margin-bottom: 0.66em;}
div#content a:link {background: #00ff00 url('wheel01.png') no-repeat fixed center;}
div#content a:visited {background: #00ff00 url('wheel01.png') no-repeat fixed center;}
div#content a:link:hover {background: #00ff00 url('wheel01.png') no-repeat fixed center;}
div#content a:visited:hover {background: #00ff00 url('wheel01.png') no-repeat fixed center;}
code, pre {color: #EDC; font: 110% monospace;}
-->
</style>
</head>
<body>

<div id="links">
<a id ="whl1"><img src="wheel01.png" ></a>
<a id ="whl2"><img src="wheel02.png"></a>
<a id ="whl3"><img src="wheel03.png"></a>
<a id ="whl4" ><img src="wheel04.png"></a>
<a id ="whl5"><img src="wheel05.png"></a>
<a id ="whl6"><img src="wheel06.png"></a>
</div>

</div>

</body>
</html> 
```

但这对我不起作用，请用一些例子或想法告诉我他们是如何做的，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:42:19.777

使用`hover`伪类。

```
#foo {
  background-image: url('not-hovered.png');
}

#foo:hover {
  background-image: url('hovered.png');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:49:31.373

```
<div id="links">
  <a id ="whl1"></a>
</div>

#links a{
  width:123px;
  height: 123px;
  background: url("your_normal_image.jpg") no-repeat; 
  display: block;}

#links wh11{
  width:123px;
  height: 123px;
  background: url("your_HOVER_image.jpg") no-repeat; } 
```

`<img>`从您的 HTML 中删除

Blasteralfred 的 ans 也是 R8 但在这种情况下我们不能更改图像，我们可以设置当前图像的不透明度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:53:26.197

给你 - 一个工作示例：http: [//jsfiddle.net/kKLKC/](http://jsfiddle.net/kKLKC/)

HTML（简而言之）：

```
<p><a class="blue" href="http://www.icanhascheezburger.com"></a></p>​ 
```

**请注意， 已从 HTML 标记中删除。**

CSS：

```
a.blue { display:block ;
    width:151px ;
    height:180px ;
    background:url("http://www.digitaldemo.net/blue-bunny.png") no-repeat ;
}

a.blue:hover { background:url("http://www.digitaldemo.net/pink-bunny.png") no-repeat ;
}​ 
```

您需要为每个链接做一个 CSS 集（a.classname 和 a.classname:hover）。

# c# - 如何接收 SQL Server 探查器事件？

> ID：11987341
> 
> 赞同：4
> 
> 时间：2012-08-16T12:40:28.520
> 
> 标签：c#, sql-server, events, profiling, trace

我被这样尝试过：

```
using System;
using System.Windows.Forms;
using Microsoft.SqlServer.Management.Common;
using Microsoft.SqlServer.Management.Trace;

namespace SqlProfiller
{
    public partial class Form1 : Form
    {
        TraceServer reader = new TraceServer();
        SqlConnectionInfo connInfo = new SqlConnectionInfo();

        public Form1()
        {
            InitializeComponent();

        }

        private void button1_Click(object sender, EventArgs e)
        {
            connInfo.ServerName = @".\SQLR2";
            connInfo.DatabaseName = "DB";
            connInfo.UserName = "sa";
            connInfo.Password = "123";

            reader.InitializeAsReader(connInfo, @"Standard.tdf");

            while (reader.Read())
            {
                Console.WriteLine("SPID  : " + reader["SPID"]);
                Console.WriteLine("Login : " + reader["SessionLoginName"]);
                Console.WriteLine("Object: " + reader["ObjectName"]);
                Console.WriteLine("Text  : " + reader["TextData"]);
                Console.WriteLine();

                textBox1.Text += "Event : " + reader["EventClass"] + Environment.NewLine;
                textBox1.Text += "SPID  : " + reader["SPID"] + Environment.NewLine;
                textBox1.Text += "Login : " + reader["SessionLoginName"] + Environment.NewLine;
                textBox1.Text += "Object: " + reader["ObjectName"] + Environment.NewLine;
                textBox1.Text += "Text  : " + reader["TextData"] + Environment.NewLine;
                textBox1.Text += "----------------------------------------------------------";
                textBox1.Text += Environment.NewLine;
                Application.DoEvents();
            }
        }
    }
} 
```

**错误：**

> *Microsoft.SqlServer.Management.Trace.SqlTraceException：无法将对象初始化为读取器。---> System.IO.FileLoadException：混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载。*

**无法将对象初始化为读取器。**

这是什么意思？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:46:57.243

`What does this mean?`

`System.IO.FileLoadException: Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.`

这意味着您的进程作为 .NET 4 进程运行，并且您正在加载的程序集是 .NET 2 编译的 ( `Microsoft.SqlServer.Management`)。

重新编译您的应用程序以使用 .NET 2 或[在配置中添加 .NET 4 的提示](https://stackoverflow.com/questions/2455654/what-additional-configuration-is-necessary-to-reference-a-net-2-0-mixed-mode)以允许 .NET 2 程序集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-25T09:44:38.133

如果运行您的代码（在 VS 2013 中使用 .NETFramework v 4.5 针对 Microsoft SQL Server 2008 构建，您将收到以下错误：

无法将对象初始化为读取器。混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载。

您可以通过在 VS 项目中更改 App.config 来修复它，默认情况下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

对此（少量补充）

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup  useLegacyV2RuntimeActivationPolicy="true"> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

另外，当我使用解决方案添加程序集 -> 添加程序集 -> 浏览时，我使用了“100”文件夹，而不是下面路径中的“110”：

```
C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies
Microsoft.SqlServer.ConnectionInfo.dll
Microsoft.SqlServer.ConnectionInfoExtended.dll 
```

但是，可能它也将与 110 一起使用。

我希望，这个解决方案会有所帮助。

# objective-c - AFNetworking 更新请求中的 URL

> ID：11987343
> 
> 赞同：0
> 
> 时间：2012-08-16T12:40:34.263
> 
> 标签：objective-c, afnetworking

在 AFNetworking 中启动请求后，是否有任何简单的方法可以更新请求的 URL？假设我的应用程序正在下载 2GB 的块，我们将有 200 个块，每个块 10MB。对于每个我创建一个 AFHTTPRequestOperation 并将其添加到队列中。

问题是，我从中下载的服务器在所有 URL 上都有超时，这意味着在那之后我会得到 403，我必须生成一个新的。我需要在时间用完之前完成它。

```
for (DownloadFile *downloadFile in [download filesInTheDownload])
{
    for (DownloadChunk *downloadChunk in [downloadFile chunksInTheFile])
    {
        NSURL *fileURL = [[NSURL alloc] initWithString:[downloadFile filePath]];

        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:fileURL];
        NSLog(@"Normal range: %lli-%lli", [downloadChunk startingByte], [downloadChunk endingByte]);
        NSString *range = [NSString stringWithFormat:@"bytes=%lli-%lli", newStartingByte, [downloadChunk endingByte]];
        [request setValue:range forHTTPHeaderField:@"Range"];
        AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
        operation.outputStream = [NSOutputStream outputStreamToFileAtPath:chunkPath append:YES];

        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSLog(@"%@", [NSString stringWithFormat:@"Chunk complete: %@.%i", [downloadFile fileName], [downloadChunk chunkId]]);
            if (download.downloadedBytes == download.size)
                [[NSNotificationCenter defaultCenter] postNotificationName:@"downloadFinished" object:download];
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Error: %@", error);
        }];

        [operation setDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
            download.downloadedBytes += bytesRead;
        }];

        [queue addOperation:operation];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:51:05.630

不，不可能修改计划的操作。通常这是一件好事，这意味着您可以安排操作并绝对确定它将根据原始条件执行。

在您的情况下，我看到了两种选择。首先，您可以逐一安排操作，并验证链接是否有效，如果需要则更新链接。

其次，您可以`403 Forbidden`通过更新链接和重新安排相同的操作来做出反应。

# visual-studio-2010 - 如何添加启动 RDP 会话的实验室流程步骤？

> ID：11987355
> 
> 赞同：0
> 
> 时间：2012-08-16T12:41:34.693
> 
> 标签：visual-studio-2010, build-process, coded-ui-tests

我正在使用 VS2010 和 TFS 以及编码的 UI 测试 (CUIT)。

我创建了一些 CUIT 并将它们添加到 Microsoft 测试管理器 2010 中的几个测试用例中。这些测试在我们的构建-部署-测试步骤中执行。

这看起来如下（简化）：

1.  构建应用程序
2.  部署 2a。将应用程序将部署到的虚拟机的快照设置为未安装应用程序的快照 2b。安装应用程序
3.  运行测试

第 3 步包含编码 UI 测试，但它们无法执行（将失败），因为没有活动的远程桌面连接，它们需要执行。

现在我想添加一个构建步骤 2c。这会自动连接到远程桌面，以便执行编码的 UI 测试。

我应该如何在流程模板中创建此步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:41:20.360

我自己尝试通过运行 PowerShell 脚本通过远程桌面连接到计算机（请参阅[此处](http://windows.microsoft.com/en-XM/windows-vista/Use-command-line-parameters-with-Remote-Desktop-Connection)了解如何使用远程桌面命令行实用程序）。

这对我个人来说并没有真正起作用，因为我是从构建机器运行这个脚本——我只能通过远程桌面连接到它——所以当我关闭远程桌面时，它会关闭构建机器上的会话，因此我会无法获得与我的测试环境的远程桌面连接（另外，必须从构建机器启动远程桌面并不理想）。

因此，我采用的解决方案是在测试环境中启用自动登录（有多种方法可以做到这一点，我不记得我是怎么做到的，但很容易用谷歌搜索）。

因此，在从构建机器启动的 PowerShell 脚本中，我使用命令远程重启测试环境。启用自动登录后，测试环境将以活动会话开始备份，然后我可以继续进行 Visual Studio Coded UI 测试。这对我有用，没有任何问题。

我使用的命令是这样的：

> Shutdown.exe /r \\mytestenvironment

[这是它的一些文档。](http://www.computerhope.com/shutdown.htm). 如果您打算使用此命令远程重启计算机，请不要忘记授予您的机器在测试环境中的权限，否则此命令将不起作用。

然后我启动了一个睡眠几分钟的命令，让远程测试环境有时间重新启动（使用活动会话），然后我启动了测试。

就个人而言，我使用了 PowerShell 脚本，但如果您更熟悉它，也可以使用 DOS/Batch 脚本。

此外，您是否尝试将自动化测试作为构建过程模板的一部分运行？

如果您需要任何进一步的帮助，请告诉我。

# python - 在 mac (python) 中查找特定类型的文件

> ID：11987356
> 
> 赞同：2
> 
> 时间：2012-08-16T12:41:43.073
> 
> 标签：python, macos

我有一个脚本可以编译几个程序并将输出放入一个文件夹中，我的脚本中有一个函数可以迭代并找到文件夹中的所有可执行文件并将它们添加到列表中，

```
def _oswalkthrough(direc,filelist=[]):
    dirList=os.listdir(direc)
    for item in dirList:
        filepath = direc+os.sep+item
        if os.path.isdir(filepath):
            filelist = _oswalkthrough(filepath,filelist)
        else:
            if ".exe" == item[-4:]:
                filelist.append(filepath)
    return filelist 
```

这在windows上没有任何问题，但是当我在mac上运行它时，我无法让它工作，当然mac中的编译文件不以“.exe”结尾，所以if语句没用，所以我制作了一个包含已编译文件名称的列表并将脚本更改为以下内容，但仍然没有结果，它添加了所有文件，包括我不想要的“.o”文件！我只想要exe？（我不知道他们在 mac 中叫什么！）。

```
def _oswalkthrough(direc,filelist=[]):
    dirList=os.listdir(direc)
    for item in dirList:
        filepath = direc+os.sep+item
        if os.path.isdir(filepath):
            filelist = _oswalkthrough(filepath,filelist)
        else:
            for file in def_scons_exe:
                if file == item[-4:]:
                    filelist.append(filepath)
    return filelist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:59:15.847

首先，您的代码在 Mac 上不起作用，因为例如，您的条件`if file == item[-4:]`不起作用`.o`（它们的长度不同，它们永远不会相等）。

另一件事，看看`os.walk`函数（它会在你的路径遍历中节省一些空间）。

另一个问题是检查扩展名并不能保证文件是可执行的。您最好使用 os.access 检查文件访问模式，在您的情况下（您想知道它是否可执行）您必须检查`os.X_OK`标志。这是用于检查的代码段：

```
import os

if os.access("/path/to/file.o", os.X_OK):
    print 'Executable!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:54:26.507

您也可以使用 os.access 在 mac、linux 和 windows 中检查它：

```
def _oswalkthrough(direc,filelist=[]):
    dirList=os.listdir(direc)
    for item in dirList:
        filepath = os.path.join(direc,item)
        if os.path.isdir(filepath):
            filelist.extend(_oswalkthrough(filepath))
        elif os.access(filepath, os.X_OK):
            filelist.append(filepath)
    return filelist 
```

我做了一些错误修复，也让事情变得更加pythonic。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:54:42.980

看起来像这样的部分：

```
for file in def_scons_exe:
    if file == item[-4:]:
        filelist.append(filepath) 
```

应该：

```
for file in def_scons_exe:
    if file == item[-len(file):]:
        filelist.append(filepath)
        break 
```

此更改使程序查找任何长度的扩展名，而不仅仅是 4 个字符。当它找到匹配的扩展名时，它也会停止查看扩展名。

此外，您应该尝试使用该[`os.walk`](http://docs.python.org/library/os#os.walk)函数来简化代码并[`os.access([path], os.X_OK)`](http://docs.python.org/library/os#os.access)测试执行权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:10:01.767

Mac 上的答案比 Windows 上更难。Windows 上的默认二进制扩展名是 exe。Mac 上没有等价物。有二进制文件类型。它们通常可以与 Mac 上的 exe 进行比较。他们居住在很多地方。您可以在 /usr/bin 中看到其中很大一部分。

检查二进制文件类型是否是检查文件访问模式：

```
is_executable = os.access(path, os.X_OK) 
```

但是，当您说可执行文件时，您也可能是在谈论应用程序文件夹。在 Mac 上，这是 Windows 用户传统上认为的 exe 文件。大多数应用程序文件夹位于 /Applications 中。

您可以像这样获取应用程序文件夹的列表：

```
import os

appfolder = [name for name in os.listdir(".") if os.path.isdir(name) and name.endswith('.app')] 
```

# python - 为什么嵌套函数可以从外部函数访问变量，但不允许修改它们

> ID：11987358
> 
> 赞同：110
> 
> 时间：2012-08-16T12:41:45.397
> 
> 标签：python, scope

在下面的第二种情况下，Python 尝试查找局部变量。当它找不到时，为什么它不能像第一种情况那样在外部范围内查找？

这在本地范围内查找 x，然后在外部范围内查找：

```
def f1():
    x = 5
    def f2():
         print x 
```

这给出了`local variable 'x' referenced before assignment`错误：

```
def f1():
    x = 5
    def f2():
        x+=1 
```

我不允许修改函数 f2() 的签名，所以我不能传递和返回 x 的值。但是，我确实需要一种方法来修改 x. 有没有办法明确告诉 Python 在外部范围内查找变量名（类似于`global`关键字）？

Python版本：2.7

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-08-16T12:49:16.557

在 Python 3.x 中，这是可能的：

```
def f1():
        x = 5
        def f2():
                nonlocal x
                x+=1
        return f2 
```

[这篇](https://stackoverflow.com/a/7535919/589206)文章也给出了 Python 2.x 的问题和解决方案。此外，请阅读[PEP 3104](http://www.python.org/dev/peps/pep-3104/)以获取有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-08-16T12:50:38.267

```
def f1():
    x = { 'value': 5 }
    def f2():
        x['value'] += 1 
```

解决方法是使用可变对象并更新该对象的成员。有时，名称绑定在 Python 中很棘手。

# c++ - 如何仅通过调用基类的相同方法来调用继承类的方法？

> ID：11987364
> 
> 赞同：1
> 
> 时间：2012-08-16T12:42:00.587
> 
> 标签：c++, oop

就像在游戏引擎中一样，例如在 XNA 中，更新函数会一次又一次地自动调用。我想知道如何在 C++ 中实现这一点。

例如：

```
class base
{
void Update();
};

class child1: public base
{
void Update();
}

class child2: public base
{
void Update();
}

void main()
{
base *obBase = new base();
obBase->Update(); /*This should call Update of Child1 and Child2 classes how can I do  this*/
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:42:52.070

只需将其设为虚拟：

```
class base
{
    virtual void Update();
}; 
```

这将提供多态行为

我假设你会说：

```
base *obBase = new child1(); //or new child2(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:45:25.733

您不能访问基类的派生类的所有实例。

您需要做的是拥有某种容器，它将存储您所有类型的对象，`Child1`然后`Child2`，当您决定时，遍历该容器并调用`Update`.

就像是：

```
SomeContainer< base* > myObjects;
// fill myObjects like:
// myObjects.insert( new ChildX(...) );
// ...
// iterate through myObjects and call Update 
```

为了能够做到这一点，您需要创建`Update`一个虚函数。

为了防止（潜在的）内存泄漏，请使用智能指针，而不是`base*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:48:52.353

我猜您正在尝试使用多态性，如下所示：

```
Base* obj1 = new Child1();
Base* obj2 = new Child2();

BaseManager* manager = new BaseManager(); //A class with a data struct that contains instances of Base, something like: list<Base*> m_objects;
manager->add(obj1); //Add obj1 to the list "m_objects"
manager->add(obj2); //Add obj2 to the list "m_objects"

manager->updateAll(); //Executes update of each instance in the list. 
```

# php - 如何将文本文件转换为图像

> ID：11987366
> 
> 赞同：-4
> 
> 时间：2012-08-16T12:42:04.590
> 
> 标签：php, gd

我想将 .txt 文件转换为 png 之类的图像。

如何通过 php 中的 gd 使其成为可能？你能告诉我这是如何实现的吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:56:34.347

没有一击毙命的功能可以做到这一点。

[PHP GD](http://php.net/manual/en/book.image.php)是一个大库。你必须经过几个步骤：

*   获取 *.txt 文件中的文本内容并使用[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)将其存储在变量中；
*   创建适当尺寸的内存 (png) 图像（这将很棘手）并将图像存储在具有[imagecreate()](http://www.php.net/manual/en/function.imagecreate.php)的变量中；
*   [使用imagettftext()](http://www.php.net/manual/en/function.imagettftext.php)将您从文件中抓取的文本定位在图像中的某个位置（这很棘手，但与之前的棘手相对应） - 同时确保您在服务器上有可用的 *.ttf 字体文件；
*   使用[imagepng()](http://www.php.net/manual/en/function.imagepng.php)保存或输出图像；

我之前提到的**棘手**部分是根据 *.txt 文件中的文本量以及每个字母、每行等的字体大小来计算所需图像的大小。

第二个**棘手**的部分是计算图像中文本的位置，以免溢出图像边界。

# css - 我可以使用 css 将字体更改为圆角字体吗？

> ID：11987367
> 
> 赞同：1
> 
> 时间：2012-08-16T12:42:06.927
> 
> 标签：css, fonts, web

![圆形字体](../Images/3347d93e53eb18bfdb40ea25e1b8dbad.png)

这张图片显示了圆形字体的平均值

我希望网页只使用网络安全字体

但这些字体并不漂亮。

因为我希望页面对每个用户都尽可能一致，所以我不能使用不安全的字体。

所以我希望可以在css中找到解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:44:57.043

您可能想要使用`@font-face`规则。它允许加载自定义字体。我相信没有其他方法可以使用 CSS 更改字体的渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:48:31.857

获得更好看的字体的最简单、最快（也是最便宜）的方法是通过 Google 字体[http://www.google.com/webfonts/](http://www.google.com/webfonts/)但是因为它们是免费的，所以它们并不总是那么好。

或者，对于更专业的字体，您可以使用[https://typekit.com/](https://typekit.com/)等服务，但这会花钱。

# iphone - 用图像覆盖 MKMapView

> ID：11987370
> 
> 赞同：3
> 
> 时间：2012-08-16T12:42:14.307
> 
> 标签：iphone, objective-c, ios, overlay, mapkit

我想创建一种地图视图，只是没有地图..
听起来很奇怪？我会解释一下 - 我有一堆坐标代表我想在屏幕上显示的用户位置，以及彼此之间的相对位置和来自用户位置（在屏幕中心）的相对位置。但我不想展示地图本身，因为我不会因为隐私问题而公开真实地址。

地图应如下所示：
![地图](../Images/0a693fb14b323e52b3ea8cc1c6ba159b.png)

我虽然使用常规地图工具包，所以我拥有它的所有功能，但我不知道该怎么做。而且我不确定这是否违反了谷歌服务许可证......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:46:48.127

您可能要考虑忽略 mapkit，只使用位置和图像作为图钉。您可以通过经度和纬度轻松计算一个人相对于另一个人的站立位置。这并不违反条款，因为 iphone 的 gps 与谷歌无关。只有实际的地图可以。

（但是，如果您在不显示地图的情况下使用 google api 相关内容，则可能是违规行为，例如，您无法在不显示地图的情况下向谷歌本身查询海拔高度。但手机的 gps 再次为您提供海拔高度。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:57:32.177

好吧，首先这将违反谷歌，因为 `MKMapView`默认情况下会从隐藏的叠加层后面的谷歌服务器查询地图图块。所以不要那样做，

我的建议是研究适用于 iOS 的第三方自定义地图解决方案。像 MapBox 之类的东西。

请参阅：[地图框](http://mapbox.com/blog/mapbox-streets-ios-screencast/)

MapBox的iOS SDK：[SDK](http://mapbox.com/mapbox-ios-sdk/)

您可以在其中自定义地图和位置的颜色和外观。也有付费选项和免费选项。关于隐私问题，我建议您向 MapBox 人员发送电子邮件，并询问您是否可以在应用程序中隐藏街道名称。

# c# - 具有特定扩展名的文件搜索

> ID：11987372
> 
> 赞同：1
> 
> 时间：2012-08-16T12:42:28.070
> 
> 标签：c#

我如何搜索具有特定扩展名的文件，应该通过我计算机中所有可用的逻辑驱动器进行搜索。
我试过了

```
var di = new Directoryinfo(" somepath");  
Files = di.GetFiles("*.txt"); 
```

但我的问题是搜索应该在每个文件夹中进行。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:44:55.647

DirectoryInfo.GetFiles() 不包含具有“递归/包含子文件夹”的重载

[http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles.aspx](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles.aspx)

看起来像！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:44:17.673

利用

```
List<string> lst = new List<string>();

foreach(var drive in DriveInfo.GetDrives())
{
    if(drive.DriveType == DriveType.Fixed)
        lst.Concat(Directory.GetFiles(drive.RootDirectory.FullName, "*.txt", 
                                      SearchOption.AllDirectories).ToList());
} 
```

**注意：**如果您在所有目录中找到文件，它可以为您提供`Access Denied error`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:44:55.243

```
 Files = di.GetFiles("*.txt", SearchOption.AllDirectories); 
```

# java - java中的内在锁和监视器锁有什么区别？

> ID：11987377
> 
> 赞同：1
> 
> 时间：2012-08-16T12:42:54.337
> 
> 标签：java, multithreading, synchronization

有人可以解释这些术语之间的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:07:15.387

内在和监控是同义词。

# java - Java 事务 - 在 conn 上提交不会

> ID：11987378
> 
> 赞同：0
> 
> 时间：2012-08-16T12:42:55.850
> 
> 标签：java, sql-server-2005, jdbc, transactions, commit

假设我有以下 Java 代码片段（类似的东西嵌入到旧版应用程序中）

```
...
try {
    con.setAutoCommit(false);
    updateSales = con.prepareStatement(updateString);
    updateTotal = con.prepareStatement(updateStatement);

    updateSales.setInt(1, e.getValue().intValue());
    updateSales.setString(2, e.getKey());
    updateSales.executeUpdate();
    updateTotal.setInt(1, e.getValue().intValue());
    updateTotal.setString(2, e.getKey());
    updateTotal.executeUpdate();
    con.commit();
} catch (SQLException e ) {
... 
```

假设这是连接到 SQL Server 2005 数据库（使用 ms 2005 驱动程序） - 是否有任何理由 con.commit 不会提交事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:21:35.747

1.  您没有向我们展示 SQL 语句，所以很难说。也许您的情况很奇怪，因此数据库无法更新/插入/删除任何记录？

2.  的检查结果`executeUpade()`。如果任何记录被更改，它应该给你 1 或更多

3.  也许数据库上有 TRIGGER 阻止了这种操作。`updateString`是否可以使用硬编码值从某些 SQL 编辑器更改数据库？

# android - 如何访问不同布局android中的微调器

> ID：11987383
> 
> 赞同：0
> 
> 时间：2012-08-16T12:43:04.767
> 
> 标签：android, android-layout, android-widget, android-spinner, android-inflate

我一直在尝试解决过去一周遇到的问题，我正在尝试访问不同 xml 布局中的微调器，我想要的只是访问微调器并将数组添加到微调器。

这是我正在使用的代码，它不起作用

```
setContentView(R.layout.mainreg);
LinearLayout mainLayout = (LinearLayout)findViewById(R.id.main_layout_id);
View view123 = getLayoutInflater().inflate(R.layout.one2reg, mainLayout,false);

Spinner spin = (Spinner) view123.findViewById(R.id.spinnerproblem);
ArrayAdapter<String> adapter = 
    new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item,items);    

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spin.setAdapter(adapter);
mainLayout.addView(view123); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:52:00.433

在扩展布局时传递 true 以附加到根，就像这样。

```
View view123 = getLayoutInflater().inflate(R.layout.one2reg, mainLayout,true); 
```

# powershell - 从 PowerShell 运行时，如何在 MSBuild 命令行上传递包含分号的属性值？

> ID：11987384
> 
> 赞同：15
> 
> 时间：2012-08-16T12:43:05.693
> 
> 标签：powershell, msbuild

我正在尝试将属性传递给 MSBuild。该属性是以分号分隔的值列表。与[这个问题](https://stackoverflow.com/questions/6051054/how-do-i-pass-a-property-to-msbuild-via-command-line-that-could-be-parsed-into-a)不同，我从 PowerShell 运行 MSBuild。

我得到：

```
PS> msbuild .\Foo.sln /p:PackageSources="\\server\NuGet;E:\NuGet"

MSBUILD : error MSB1006: Property is not valid.
Switch: E:\NuGet 
```

如果我从命令提示符运行相同的命令，它工作正常。如何让它在 PowerShell 中工作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T07:11:19.013

将参数用单引号括起来：

```
... '/p:PackageSources="\\Server\NuGet;E:\NuGet"' 
```

在 PowerShell v3 上试试这个：

```
msbuild .\Foo.sln --% /p:PackageSources="\\Server\NuGet;E:\NuGet" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-30T10:39:16.500

也使用 ascii 值可能会有所帮助：

msbuild .\Foo.sln /p:PackageSources="\Server\NuGet%3BE:\NuGet"

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-03T21:35:29.167

*下面的VBScript*函数可用于在双引号内 转义传递给*MSBuild.exe的属性值：*

```
 Function Escape(s)
      Escape = s

      Set objRegEx = CreateObject("VBScript.RegExp") 

      objRegEx.Global = True 
      objRegEx.Pattern = "(\\+)?"""

      Escape = objRegEx.Replace(Escape,"$1$1\""") 

      objRegEx.Pattern = "(\\+)$"

      Escape = objRegEx.Replace(Escape,"$1$1") 
    End Function 
```

以下示例演示了*Escape()*函数的用法

```
 Set objShell = WScript.CreateObject("WScript.Shell")        
    objShell.Run "msbuild.exe echo.targets /p:Param1=""" & Escape("ParamValue1") & """,Param2=""" & Escape("ParamValue1") & """", 1, True 
```

# android - 如何播放5秒的声音

> ID：11987386
> 
> 赞同：0
> 
> 时间：2012-08-16T12:43:07.520
> 
> 标签：android

我想播放 5 秒钟的声音，但我正在使用的代码正在无限播放声音。

我的代码是

```
final MediaPlayer player = new MediaPlayer();
AssetFileDescriptor afd = this.getResources().openRawResourceFd(R.raw.hangout_ringtone);
player.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
afd.close();
player.setAudioStreamType(AudioManager.STREAM_ALARM);
player.setLooping(true);
player.prepare(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:46:33.220

尝试从您的代码中删除这一行

```
player.setLooping(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:46:37.867

使用带有延迟的 Runnable 来停止您的音频。

```
postDelayed(new Runnable() {
    public void run() {
        //Code to stop your sound
    }
}, 5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T20:32:47.697

创建一个新的处理程序来发布何时停止的延迟。

```
 mMediaPlayer.start();
            // wait 5 sec... then stop the player.
            new Handler().postDelayed(new Runnable() {
                @Override
                public void run() {
                    mMediaPlayer.stop();
                }
            }, 5000);//millisec. 
```

# java - Swing：无法在带有图像的面板内设置 jtextfield 的颜色

> ID：11987387
> 
> 赞同：0
> 
> 时间：2012-08-16T12:43:10.407
> 
> 标签：java, swing

我有一个具有背景图像的 JPanel。在此面板中，我添加了一个 JTextField，并将背景颜色设置为该文本字段。我希望背景能够获得颜色，但它被面板的背景图像覆盖。

这是预期的行为吗？如果没有，如何绕过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:59:21.227

检查您的文本字段是否不透明。

摆动行为取决于许多属性和布局。您可以尝试使用[此工具](http://www.swingexplorer.com/)调试您的挥杆组件并使用属性（背景，不透明，...）进行一些实验。

# jquery - JQuery Masonry + InfiniteScroll：新获取项目后的重叠问题

> ID：11987389
> 
> 赞同：1
> 
> 时间：2012-08-16T12:43:20.830
> 
> 标签：jquery, overlapping

标题几乎说明了这一点。我有一个砖石图像布局，想用 InfiniteScroll 动态加载新闻内容。Buch 新项目再次位于左上角。

链接：[http ://thomasmaier.me/2g12b/](http://thomasmaier.me/2g12b/)

这是一个 Wordpress 安装，InfiniteScroll 是一个插件，而 Masonry 是硬编码的。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="<?php bloginfo('template_url'); ?>/js/jquery.masonry.min.js"></script>

<script>

  $(function(){

    var $container = $('#content');

    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.post'
      });
    });

    $container.infinitescroll({
      navSelector  : '.navigation',    // selector for the paged navigation 
      nextSelector : '.navigation .alignleft a',  // selector for the NEXT link (to page 2)
      itemSelector : '.post'
      },
      function( newElements ) {
        var $newElems = $( newElements ).css({ opacity: 0 });
        $newElems.imagesLoaded(function(){
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, isAnimatedFromBottom ); 
        });
      }
    );

  });

</script> 
```

我尽我所能，在这里搜索，查看这里的帮助部分[http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)但它不起作用。

你能帮我吗？

# php - Magento：减税而不是加税

> ID：11987398
> 
> 赞同：1
> 
> 时间：2012-08-16T12:43:54.783
> 
> 标签：php, magento, entity-attribute-value

我的不含税金额被视为含税。现在我知道你会说我的设置搞砸了，但它们正确设置为不含税。如果我启用该行的税收设置，它会显示 10 条牛仔裤，每条 10 欧元，包括税前 100 欧元和 119 欧元（19% 荷兰税）。

例子：

```
Subtotal:           100
Shipping:           50
Grand Total ex:     121,5
TAX:                28,5
Grand Total In:     150 
```

我发现了另一个有同样问题的案例，但遗憾的是没有答案...... [http://www.magentocommerce.com/answers/Catalog-prices-do-not-include-tax-but-if-I-check -不包括税我的价格变化](http://www.magentocommerce.com/answers/Catalog-prices-do-not-include-tax-but-if-I-check-excluding-tax-my-prices-change)

复制粘贴示例

```
Subtotal (Excl. Tax)    € 65,20
Subtotal (Incl. Tax)    € 77,59
Shipping Excl. Tax (Flat Rate - Fixed)  € 50,00
Shipping Incl. Tax (Flat Rate - Fixed)  € 59,50 
Totaal Excl. BTW    € 93,31
BTW € 21,89
Totaal Incl. BTW    € 115,20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:40:43.720

它远非漂亮，但以下作品！

19% 是荷兰税额

```
class Mage_Sales_Model_Quote_Address_Total_Grand extends Mage_Sales_Model_Quote_Address_Total_Abstract
{
    /**
     * Collect grand total address amount
     *
     * @param   Mage_Sales_Model_Quote_Address $address
     * @return  Mage_Sales_Model_Quote_Address_Total_Grand
     */
    public function collect(Mage_Sales_Model_Quote_Address $address)
    {
        $grandTotal     = $address->getGrandTotal();
        $baseGrandTotal = $address->getBaseGrandTotal();

        $totals     = array_sum($address->getAllTotalAmounts());
        $baseTotals = array_sum($address->getAllBaseTotalAmounts());

        $address->setGrandTotal(($grandTotal+$totals) * 1.19);
        $address->setBaseGrandTotal(($grandTotal+$totals) * 1.19);
        return $this;
    }

    /**
     * Add grand total information to address
     *
     * @param   Mage_Sales_Model_Quote_Address $address
     * @return  Mage_Sales_Model_Quote_Address_Total_Grand
     */
    public function fetch(Mage_Sales_Model_Quote_Address $address)
    {
        $address->addTotal(array(
            'code'  => $this->getCode(),
            'title' => Mage::helper('sales')->__('Grand Total'),
            'value' => $address->getGrandTotal(),
            'area'  => 'footer',
        ));
        return $this;
    }
} 
```

# php - 如何创建 PHPMailer mx 黑名单

> ID：11987402
> 
> 赞同：0
> 
> 时间：2012-08-16T12:44:05.803
> 
> 标签：php, phpmailer

我通过 php script + phpmailer 发送电子邮件

我想在 phpmailer 中检查黑名单 mx 记录。例如，

如果电子邮件 info@mail.com 在 mx 记录域 company.com 或 company1.com 中有 - 我的脚本不应向此 info@mail.com 发送电子邮件

我只需要在发送电子邮件之前进行 mx 检查，而不需要在 info@mail.com 中检查域

这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:51:39.020

我认为不可能直接从那里做到这一点，`PHPMailer` 但你可以使用[getmxrr()](http://php.net/manual/en/function.getmxrr.php)像：

```
getmxrr('mail.com', $mxhosts);
print_r($mxhosts); 
```

并检查`array`您的黑名单域并选择发送或不发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:01:22.490

我不知道 phpmailer 的详细信息，但通用算法是：

```
$host = "gmail.com";
$black = array("mail.anexample.com","mail.otherexample.com");
////////
$mxarr = array();
getmxrr($host, $mxarr);
$intersect = array_intersect($mxarr, $black);
if(!count($intersect)>0) {
    echo "ok";
    //sendmail(......);
} 
```

# internet-explorer-9 - Internet Explorer 9 的开发者工具窗口可以停靠到浏览器主窗口吗？

> ID：11987414
> 
> 赞同：4
> 
> 时间：2012-08-16T12:44:28.743
> 
> 标签：internet-explorer-9, docking, web-developer-toolbar

所有其他当前版本的浏览器都具有某种形式的开发人员工具，并附加到主浏览器窗口或可以“停靠”到它。至少在适用于 Google Chrome、Firefox、Opera 和 Safari 的 Windows 7 上是这样。

但对于 Internet Explorer 9，开发人员工具始终位于单独的窗口中。

ie9 devtools 窗口有一个“pin”图标/按钮——但对我来说它什么也没做。

当比较所有浏览器的行为时，这个额外的窗口会让上网本的小屏幕上的事情变得非常混乱。

“pin”按钮应该做我想要的吗？还有其他方法吗？所有其他浏览器开发工具都可以在小上网本上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:04:24.363

你试过ctrl+p吗？是 IE 9 上该操作的快捷方式吗

# c# - 在 C# 中动态地将数据源添加到 gridview

> ID：11987432
> 
> 赞同：2
> 
> 时间：2012-08-16T12:45:37.817
> 
> 标签：c#, asp.net, sql-server

在这里，我尝试根据复选框列表中的选择来绑定网格视图。执行时我只得到空白页。任何人都可以指定错误是什么？

```
protected void Button1_Click(object sender, EventArgs e)
{
String query = "Select Proj_id,Proj_name,Front_end,Back_end from Proj_details where Front_end = 'Android'";
String[] frontend ={ "Android", "Asp", "Asp.net", "C#.net", "J2EE", "Java", "Matlab", "NS2", "PHP", "VB", "VB.net" };
try
{
for (int i = 0; i <= CheckBoxList1.Items.Count; i++)
{
if (CheckBoxList1.Items[i].Selected)
query = query.Insert(query.Length, frontend[i] + "','");
}

con.Open();
query = query.Remove(query.Length - 1);
query = query.Remove(query.Length - 1);
query = query.Insert(query.Length, ")");
SqlDataAdapter sqlada = new SqlDataAdapter(query, con);
DataSet ds = new DataSet();
sqlada.Fill(ds, "Proj_details");

gv_search_project.DataSource = ds.Tables[0];
gv_search_project.DataBind();

}
catch (Exception ex)
{

}
finally
{

Label1.Text = query.ToString();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:08:26.497

您将在这里退出数组：

```
for (int i = 0; i <= CheckBoxList1.Items.Count; i++)
{
   if (CheckBoxList1.Items[i].Selected)
      query = query.Insert(query.Length, frontend[i] + "','");
} 
```

您需要更换：

```
i <= CheckBoxList1.Items.Count 
```

和：

```
i < CheckBoxList1.Items.Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:59:43.437

```
gv_search_project.DataSource = ds.Tables["Proj_details"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:13:56.097

您正在通过附加其他`Front_end`值来构建查询，但是您要附加到的基本查询具有如下的 where 子句：

```
where Front_end = 'Android' 
```

所以（如果我正确阅读了您的代码）结果查询是（例如）：

```
Select Proj_id,Proj_name,Front_end,Back_end 
from Proj_details 
where Front_end = 'Android'Android','C#.net','Matlab','VB') 
```

从查询开始，我只是打破了。其次，我认为你的意图是有一个`IN`条款：

```
String query = "Select Proj_id,Proj_name,Front_end,Back_end from Proj_details where Front_end in ('Android','"; 
```

这一点，再加上**Amiram Korach**关于`<`vs的注释`<=`应该可以使代码正常工作。但它总是会包含“Android”（您最初的尝试也是如此）。

一定要改变你的空catch子句：

```
catch (Exception ex)               
{               

} 
```

如果您没有吞下所有异常，您可能会自己发现问题。

# javascript - 搜索重复键时检索重复结果？

> ID：11987434
> 
> 赞同：1
> 
> 时间：2012-08-16T12:45:45.743
> 
> 标签：javascript, mongodb

我的情况有点奇怪……我有一个*故意*包含重复项的键列表。为了参数的缘故，我们假设这个列表看起来像`[1,2,3,2,1]`。目前，获取属于这些 Id 的文档的代码在键列表上循环，调用`findOne()`并将文档推送到数组中。

所以我们有一个这样的结构：

```
for (var i = 0; i < keys.length; i++) {
  documents.push(db.items.findOne(keys[i]);
} 
```

我想知道是否有办法以更……优雅……的方式做到这一点，最好用一个查询？保持订单将是一个加号，但不是严格要求。

**编辑：** 请注意，这是一个 MongoDB 问题。我正在寻找一种方法来用对 db.items.find() 的一次调用来替换上述循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:09:27.687

我认为没有直接的方法来检索重复键的列表，但是既然你说键是唯一的，你可以使用`$in`和一些循环来做到这一点：

```
var keys = [1,2,3,2,1];
var docHash = {}; //auxiliary hashtable containing mapping id -> document

var documents = []; //the result

db.items.find({id : {$in : keys}})
     .forEach(
         function(doc) {
             //if multiple documents can have the same key change it to:
             // if (docHash[doc.id]) { 
             //     docHash[doc.id].push(doc);
             // } else {
             //     docHash[doc.id] = [doc];
             // } 
             docHash[doc.id] = doc; 
         });

keys.forEach(function(i) {
     // if multiple documents can have the same key change it to:
     // docHash[i].forEach(function(item) {documents.push(item);});
     documents.push(docHash[i]);
} 
```

请注意，虽然它比原来的要长，但它只查询数据库一次。作为奖励，它以与给定键相同的顺序返回文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:13:51.800

在 java-script 中使用 for-each 函数应该对您有所帮助：

```
for (var i in keys) {// i will be  1 ,2 ,3 ,3 ,1
   documents.push(db.items.findOne(i);      
 } 
```

或者我可能错过了你的问题意图完成？但是再次重复的键在任何数组中都不存在..

```
var used=Array();
for (var i = 0; i < keys.length; i++) {
  if (!used[keys[i]]){
       used[keys[i]]=1;
       documents.push(db.items.findOne(keys[i]);}
} 
```

这将忽略任何重复项并将它们计为一个，或者您可以对键运行查询，将它们呈现到一个不包含重复项的新数组中

# python - 数值积分 Loop Python

> ID：11987435
> 
> 赞同：2
> 
> 时间：2012-08-16T12:45:47.423
> 
> 标签：python, loops, numpy, integration, scipy

我想编写一个程序，在循环中求解下面的定积分，该循环考虑每次迭代的常数 c 的不同值。

然后，我希望将积分的每个解输出到一个新数组中。

我如何最好地用 python 编写这个程序？

![在此处输入图像描述](../Images/ca1d52d52e728bbe2447d9464c8e0c3a.png)

*限制在 0 和 1 之间。*

`from scipy import integrate`

`integrate.quad`

这里可以接受。我的主要斗争是构建程序。

这是一个旧的尝试（失败了）

```
# import c
fn = 'cooltemp.dat'
c = loadtxt(fn,unpack=True,usecols=[1])

I=[]
for n in range(len(c)):

    # equation
    eqn = 2*x*c[n]

    # integrate 
    result,error = integrate.quad(lambda x: eqn,0,1)

    I.append(result)

I = array(I) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:59:50.930

例如计算 [0, 9] 中 c 的给定积分：

```
[scipy.integrate.quadrature(lambda x: 2 * c * x, 0, 1)[0] for c in xrange(10)] 
```

这是使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)和[lambda 函数](http://docs.python.org/tutorial/controlflow.html#lambda-forms)。

或者，您可以定义从给定 c 返回积分的函数作为[ufunc](http://docs.scipy.org/doc/numpy/reference/ufuncs.html)（感谢[vectorize](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)）。这也许更符合 numpy 的精神。

```
>>> func = lambda c: scipy.integrate.quadrature(lambda x: 2 * c * x, 0, 1)[0]
>>> ndfunc = np.vectorize(func)
>>> ndfunc(np.arange(10))
array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:03:51.437

你真的很亲近。

```
fn = 'cooltemp.dat'
c_values = loadtxt(fn,unpack=True,usecols=[1])

I=[]
for c in c_values: #can iterate over numpy arrays directly.  No need for `range(len(...))`

    # equation
    #eqn = 2*x*c[n] #This doesn't work, x not defined yet.

    # integrate 
    result,error = integrate.quad(lambda x: 2*c*x, 0, 1)

    I.append(result)

I = array(I) 
```

我认为您对如何`lambda`工作感到有些困惑。

```
my_func = lambda x: 2*x 
```

与以下内容相同：

```
def my_func(x):
    return 2*x 
```

如果你仍然不喜欢 lambda，你可以这样做：

```
f(x,c):
   return 2*x*c

#...snip...
integral, error = integrate.quad(f, 0, 1, args=(c,) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:03:27.403

```
constants = [1,2,3]

integrals = []                                  #alternatively {}

from scipy import integrate

def f(x,c):
    2*x*c

for c in constants:
    integral, error = integrate.quad(lambda x: f(x,c),0.,1.)
    integrals.append(integral)                 #alternatively integrals[integral] 
```

对于任何常量列表，这将输出一个类似于 Nicolas 答案的列表。

# jquery - 当页面上有某个类时，如何使 DIV 出现？

> ID：11987437
> 
> 赞同：0
> 
> 时间：2012-08-16T12:45:47.837
> 
> 标签：jquery, drupal, hide, show

我正在使用 Drupal CMS。在 Drupal 中有一个消息 DIV，它有一个类，`.message` 当出现错误时，该类`"error"`被添加到消息 DIV。

在我的页面上，我有一个 DIV 类，`"instruction"` 我希望隐藏此 DIV，并且仅在错误类可见时出现。

这是我的代码：

```
 (function ($) {
    $(document).ready(function () {
        $(".instruction").hide;
    });

    if ($('.messages').hasClass('error')) {
    $('.instruction').show;
    }

})(jQuery); 
```

但是，它似乎不起作用。我怎样才能让它工作？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:47:23.087

这是一个函数调用，您需要`()`像这样添加：

```
$.ready(function() {
    $(".instruction").hide();

    if ($(".messages").hasClass("error")) {
        $(".instruction").show();
    }

}); 
```

[这是小提琴](http://jsfiddle.net/4tZnc/)（从 HTML 中删除“错误”以查看它的工作）。

# android - 为什么音频在 Eclipse 中使用姜饼 android 在 html 5 中不起作用

> ID：11987440
> 
> 赞同：0
> 
> 时间：2012-08-16T12:45:51.737
> 
> 标签：android, html, cordova, html5-audio

我曾尝试使用 html5 sudio 标签播放音频文件（我尝试过 .wav 和 .mp3 格式）。但是，当我在 Eclipse 中为 android Gingerbread 在模拟器上运行项目时，当我单击我创建的播放按钮时，它似乎没有播放。我正在使用安卓 4.0 API。为什么会这样？我错过了任何阻止模拟器播放音调的东西吗？

下面是我的html代码：

```
$('#page-home').live('pageinit', function(event){  
    $('.api-div').hide();
    $('.api-div#api-intro').show();

    $('#intro').click(function() {
        $('.api-div').hide();
        $('.api-div#api-intro').show();
        $.mobile.silentScroll(0);            
    });

    $('div ul li a').click(function(event) {
        event.preventDefault();
        //alert('clicked : ' + $(this).attr('id'));
        var attrId = $(this).attr('id');

        if (attrId.indexOf("click") !== 0) {
            return;
        }

        var api = '#api' + attrId.substring(attrId.indexOf('-'));

        // hide all div's, show only this one
        $('.api-div').hide();
        $(api).show();

        // if small screen and portrait - close after tap
        var disp = $('ul #listdivider').css("display");
        //alert(disp + ' : ' + api);
        if (disp === 'none') {
            $('div.ui-collapsible').trigger("collapse");
        } else {
            $.mobile.silentScroll(0);            
        }
    }); 

    $('#listdivider').click(function(event) {
        event.preventDefault();
        $('.api-div').hide();
        $('.api-div#api-intro').show();
        $.mobile.silentScroll(0);
    });

    $("#playaudio").live('tap', function() {
        var src = 'tone1K.mp3';
        // Note: two ways to access media file: web and local file        
        //var src = 'http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3';

        // local (on device): copy file to project's /assets folder:
        // var src = '/android_asset/spittinggames.m4a';

        playAudio(src);
    });

    $("#pauseaudio").live('tap', function() {
        pauseAudio();
    });

    $("#stopaudio").live('tap', function() {
        stopAudio();
    });

}); 
```

下面是我在点击时播放音调的 javascript：

```
$('#page-home').live('pageinit', function(event){  
    $('.api-div').hide();
    $('.api-div#api-intro').show();

    $('#intro').click(function() {
        $('.api-div').hide();
        $('.api-div#api-intro').show();
        $.mobile.silentScroll(0);            
    });

    $('div ul li a').click(function(event) {
        event.preventDefault();
        //alert('clicked : ' + $(this).attr('id'));
        var attrId = $(this).attr('id');

        if (attrId.indexOf("click") !== 0) {
            return;
        }

        var api = '#api' + attrId.substring(attrId.indexOf('-'));

        // hide all div's, show only this one
        $('.api-div').hide();
        $(api).show();

        // if small screen and portrait - close after tap
        var disp = $('ul #listdivider').css("display");
        //alert(disp + ' : ' + api);
        if (disp === 'none') {
            $('div.ui-collapsible').trigger("collapse");
        } else {
            $.mobile.silentScroll(0);            
        }
    }); 

    $('#listdivider').click(function(event) {
        event.preventDefault();
        $('.api-div').hide();
        $('.api-div#api-intro').show();
        $.mobile.silentScroll(0);
    });

    $("#playaudio").live('tap', function() {
        var src = 'tone1K.mp3';
        // Note: two ways to access media file: web and local file        
        //var src = 'http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3';

        // local (on device): copy file to project's /assets folder:
        // var src = '/android_asset/spittinggames.m4a';

        playAudio(src);
    });

    $("#pauseaudio").live('tap', function() {
        pauseAudio();
    });

    $("#stopaudio").live('tap', function() {
        stopAudio();
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:51:20.683

Try with WebM audio. Google added WebM supported in Android 2.3 Gingerbread. A lot of people have trouble with `<audio>` in Android 2.2.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:25:24.733

这是因为您遇到了Google尚未修复的此错误：

[https://code.google.com/p/android/issues/detail?id=10546](https://code.google.com/p/android/issues/detail?id=10546)

与此同时，这就是我们拥有 Media API 的原因：

[http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media](http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:06:42.560

您是否忘记包含您指定的 mp3 文件？

你在真实设备上试过吗？我不知道这个模拟器是否有任何问题。没有用模拟器尝试音频。我认为它应该在其中工作。

无论如何，对于您的问题，我建议使用[phonegap media api](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T23:29:16.783

我在 Gingerbread (2.3.6) 中遇到了类似的问题，但遇到了这个测试页面： [http ://hpr.dogphilosophy.net/test/](http://hpr.dogphilosophy.net/test/)

在 2.3.6 中运行良好，而我的原始代码（在其他地方运行良好）却没有。查看此页面上的 JS，发生了一些我没有做的事情。这是我净赚的地方：

JS：

```
$(function(){
    $('#play').on('click',function(e){
        e.preventDefault();
        var mediaObj = $('#audioMeme').get(0);
        $('#audioMeme').attr('src','bounce.mp3');
        mediaObj.pause()
        mediaObj.currentSrc = 'bounce.mp3';
        mediaObj.load();
        playAudio();

        function playAudio(){
            var audioReady = mediaObj.readyState;
            if(mediaObj.error) {
                alert('no dice');
            }
            if(audioReady>2) {
                mediaObj.play();
            }
            else{
                setTimeout(play,500);                   
            }
        }
    });
}); 
```

HTML：

```
<audio id="audioMeme" autoplay preload="auto" loop src="">
<source src="bounce.mp3">
</audio>

<a href="#" id="play">play</a> 
```

现在在 2.3.6 中一切都很好。

# html - 在 HTML5 中：如何在画布中心将图像旋转 360 度以保持其他对象静止

> ID：11987441
> 
> 赞同：1
> 
> 时间：2012-08-16T12:45:58.463
> 
> 标签：html, animation, canvas, html5-canvas, css-transitions

我正在尝试创建一个动画，其中画布中间的图像必须旋转 360 度，同时保持画布上的其他对象静止，基本上我想给图像提供类似风扇的旋转效果，但它不起作用我的情况。按照我正在使用的代码片段。

假设画布大小为 400 x 200

```
 var surface;
 var img = new Image();
 var angle = 0;
 img.src = "images/teddy.png";
 surface = document.getElementById("canvas");
 var ctx = surface.getContext('2d');

 // Clear the canvas to White
ctx .fillStyle = "rgb(255,255,255)";
ctx .fillRect(0, 0, surface.width, surface.height);
// Save the current context
ctx .save();
// Translate to the center point of our image
ctx .translate(happy.width * 0.5, happy.height * 0.5);
ctx .rotate(DegToRad(angle,surfaceContext)); //calling function here  
ctx .translate(-(happy.width * 0.5), -(happy.height * 0.5));
ctx .drawImage(happy, 200, 100);
angle++;
ctx.restore(); 
```

上面的代码是使用 setInterval(loop, 10); 调用的。

它在 x 轴上 200px 的位置上以 100px 的直径旋转图像，但我想要的是图像应该继续在其当前位置旋转

我是 HTML5 新手，所以请耐心等待 :)

谢谢~西默

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:51:12.463

我假设这就是你想要的：http: [//jsfiddle.net/zH9yy/](http://jsfiddle.net/zH9yy/)

```
var render, loop, t, dt,
    DEG2RAD = Math.PI / 180,
    cvs = document.querySelector('canvas'),
    ctx = cvs.getContext('2d'),
    teddy = new Image(),
    heart = new Image(),
    angle = 0,
    reqAnimFrame = 
        window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        window.oRequestAnimationFrame;

cvs.width = 400;
cvs.height = 200;

teddy.src = 'https://d3qcduphvv2yxi.cloudfront.net/assets/1204584/view_small/43b95bee9e4e9a8a1effcdc3d401774a.jpg';

heart.src = 'http://a.dryicons.com/files/graphics_previews/flower_heart.jpg';

render = function (timestamp) {
    dt = timestamp - t;
    t = timestamp;

    // Clear the canvas to White
    ctx.fillStyle = "rgb(255,255,255)";
    ctx.fillRect(0, 0, cvs.width, cvs.height);

    // draw heart
    ctx.drawImage(heart, -20, -120);

    // draw teddy
    ctx.save();
    ctx.translate(cvs.width/2, cvs.height/2); // move cursor to canvas center
    ctx.rotate(DEG2RAD * angle); // rotate canvas
    ctx.drawImage(teddy, -teddy.width/2, -teddy.height/2); // draw img center at cursor center
    angle += dt / 16.67 * 6; // increment angle ~ 360 deg/sec
    ctx.restore();
};

loop = function (timestamp) {
    reqAnimFrame(loop);
    render(timestamp);
};

t = Date.now();
loop(t); 
```

​</p>

# git - Git结帐似乎不起作用

> ID：11987444
> 
> 赞同：1
> 
> 时间：2012-08-16T12:46:05.467
> 
> 标签：git, git-workflow

我是一个完全的 git 新手，但我一直在使用 Git 作为一种轻松地将 Web 应用程序“上传”到我的生产服务器的方式。这是我的工作流程：-

1.  在本地进行一些编码并提交到`master`分支，当我准备好发布到生产环境时，我会这样做：-

2.  `git checkout production`

3.  `git merge master`

4.  `git push origin production`

其中 origin 是**生产服务器上的一个裸存储库**，那么我有一个接收后挂钩，它执行以下操作：-

1.  `git clone /dir/to/bare_repo /dir/to/production`

2.  `cd /dir/to/production_dir`

3.  `GIT_DIR=/dir/to/production/.git`

4.  `git checkout -f production`

最后的结帐命令产生以下消息：-

> 分支生产设置以从源头跟踪远程分支生产。切换到新的“生产”分支

然而我在本地所做的更改并没有出现在 /dir/to/production

任何建议将不胜感激！

**编辑：**只是想我应该提到更改出现在本地的生产分支中，因为它们应该`git merge master`在生产时出现。这是远程克隆存储库上的结帐似乎不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:41:13.600

`git archive`通过您的 gzip 实用程序使用和管理它。

# visual-studio-2010 - 如何为 DOS 编译

> ID：11987446
> 
> 赞同：1
> 
> 时间：2012-08-16T12:46:14.937
> 
> 标签：visual-studio-2010, performance, real-time, dos

有什么办法可以为 DOS 编译我的代码！我有一个不使用任何 Windows API 的简单 C++ 程序。我可以使用 Visual Studio 2010 在 Windows 下运行它，但是，我需要在没有 Windows 开销的情况下提高速度。我想知道是否有任何方法可以编译它以在 DOS（或任何实时平台）下运行而无需任何视觉效果开销？（很明显，我不想使用非常老的编译器，例如 turbo c++，因为我失去了 MSVC 编译器的优化优势）

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:56:51.857

[DJGPP](http://www.delorie.com/djgpp/) is a 32-bit gcc/g++ for DOS. It uses a DPMI host (CWSDPMI) to switch to the 32-bit protected mode. You can run the compiler either in DOS or in a VM with DOS (PC/VM+[FreeDos](http://www.freedos.org/) or [Dosbox](http://dosbox.org/)). It will work in Windows 9x/2K/XP too (but generally not in Vista/7).

[Open Watcom C/C++](http://openwatcom.org/) is a 16/32-bit C/C++ compiler that can compile code for a variety of different platforms, including DOS. You can create 32-bit DPMI programs for DOS with it as well. The compiler can be run under DOS and Windows.

Similar to OW, [Digital Mars](http://www.digitalmars.com/) is a 16/32-bit C/C++ compiler for DOS and Windows. AFAIK, the compiler can be run under Windows only.

You might also try using a compiler for Windows with [WDOSX](http://tippach.business.t-online.de/wdosx/).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:52:00.877

您可能不想为 DOS 编译。DOS 是一个 16 位操作系统，尽管您可能可以获得[GCC](http://personal.ee.surrey.ac.uk/Personal/R.Bowden/C/dos-gcc/index.htm) for DOS 并使用它，但我向您保证它（DOS，而不是 GCC）已经过时，可能不是您想要的。

如果为 Windows 命令提示符编译太慢，则可能是您编写程序本身的方式造成了问题。您很可能试图解决错误的问题。如果您的问题是您计算机上的其他服务占用资源，您可能希望关闭它们、卸载它们，或者考虑使用[Windows Server Core](http://technet.microsoft.com/en-us/library/dd184075.aspx)作为您的操作系统，它具有最少的服务和非常薄的 GUI，如果您可以调用就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:49:08.670

你看过[G++](http://www.claremontmckenna.edu/pages/faculty/alee/g++/g++.html)吗？它是用于 Windows 的 gnu 编译器。

# jquery - 变量中的 jquery 选择在 .index() 方法中不起作用

> ID：11987450
> 
> 赞同：0
> 
> 时间：2012-08-16T12:46:22.653
> 
> 标签：jquery, variables, indexing

预期结果是使第一个和最后一个选定 div 之间的所有特殊 div 变为红色。

这行得通，但写得更好吗？：

```
var s = $('div.selected'),
    $spec = $('.speial'),
    i = s.first().index('.speial'),
    last = s.last().index('.speial');
for(;i<last;i++){
  $spec.eq(i).addClass('gored');
} 
```

我正在尝试这个：

```
var s = $('div.selected'),
    $spec = $('.speial'),
    i = s.first().index($spec),
    last = s.last().index($spec);
for(;i<last;i++){
  $spec.eq(i).addClass('gored');
} 
```

但它不起作用......我对原因很感兴趣。或者也许有更好的方法来达到同样的结果？

编辑：我已经制作了小提琴来获取问题的图片:)[小提琴](http://jsfiddle.net/luckylooke/dbrAY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:51:59.580

不看 HTML 就很难准确说出你想要什么

请澄清我是否弄错了，但似乎您想将类添加`gored`到所有`.speial`范围内`div.selected`；

在这种情况下，这更容易：

```
$('div.selected .speial').addClass("gored"); 
```

正如我所说，这可能是错误的，请随时用简单的英语准确地澄清您想要的内容（最好使用 HTML 片段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:52:36.520

尝试使用 CSS :first-child 和 :last-child 选择器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:56:52.217

尝试这个

```
 $('div.selected:not(:first):not(:last)').addClass('gored'); 
```

看[小提琴](http://jsfiddle.net/4XQ5h/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:24:15.163

jQuery API 文档：

> 如果在元素集合上调用 .index() 并传入 DOM 元素或 jQuery 对象，则 .index() 返回一个整数，指示传递的元素相对于原​​始集合的位置。
> 
> 如果选择器字符串作为参数传递，.index() 返回一个整数，指示 jQuery 对象中的第一个元素相对于选择器匹配的元素的位置。如果未找到该元素，.index() 将返回 -1。

所以看来我首先误解了这两种情况下的相对性，所以我认为“选择器匹配的元素”可以替换为选择（jQuery对象）。

答案是 .index() 的工作方式与我预期的不同。

# apache-flex - 将 flex web 项目转换为 flex 移动项目

> ID：11987451
> 
> 赞同：1
> 
> 时间：2012-08-16T12:46:23.843
> 
> 标签：apache-flex, mobile, flex4.6

我有一个 flex web 项目，我想把它转换成 flex 移动项目。最好的方法是什么。我知道不建议这样做，但是有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:02:14.000

通常，由于屏幕尺寸和 dpi 问题，使用相同的代码是行不通的。

在 Flash Builder 中，您无法将 Web 项目转换为移动项目。

但是，理论上您可以使用命令行编译器工具将您的 Web 项目代码编译为 APK 或 IPA 或 Blackberry Playbook 使用的任何内容。您可能必须手动添加库，例如带有所有 MX 库的 SWC。

您还可以创建一个库项目，并将尽可能多的代码移动到库项目中。从那里您可以创建共享相同代码/库的“网络项目”和“移动项目”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:58:36.187

在 Flash 构建器中，

1.  开始一个新的移动项目
2.  将代码复制到您的 AIR 项目。应该没有问题，因为 AS/mxml 代码是相同的，除了需要将根标签从 Application 更改为 MobileApplication 的应用程序文件

# c# - 从范围“”引用的“myClass”类型的错误变量“x”，但未定义

> ID：11987454
> 
> 赞同：5
> 
> 时间：2012-08-16T12:46:32.400
> 
> 标签：c#, fluent-nhibernate, restrictions

此代码工作正常：

```
ICriteria criteria = GetSession().CreateCriteria<MyClass>();
criteria.Add(Restrictions.Where<MyClass>(x => x.Field1 >= myVariable)); 
```

但是下面的代码不起作用：

```
criteria.Add(Restrictions        
        .Where<MyClass>(x =>          
        (x.Field1 +
        x.Field2 +
        x.Field3 +
        x.Field4) >= myVariable)); 
```

上面的代码在执行中得到这个错误：

> 从范围“”引用了“myClass”类型的变量“x”，但未定义

请帮忙（对不起我的英语不好）。

萨拉

**编辑 1**

我的临时解决方案是：

```
var result = criteria.List<MyClass>();    
result.Where(x => (x.Field1 + x.Field2 + x.Field3 + x.Field4 >= myVariable)); 
```

和这项工作。我宁愿将 Where 子句放在选择之前...

**编辑 2**

最终解决方案是（正如@mhoff 所建议的那样）：

```
var result = criteria.List<MyClass>();    
result.Where(x => this.GetSum(x) >= myVariable);

... do something ...

... ToList()

private int GetSum(MyClass x) {
 return (x.Field1 + x.Field2 + x.Field3 + x.Field4);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:27:16.610

把你的计算变成一个属性怎么样（这也有封装 MyClass 细节的好处）：

```
public class MyClass
{
    public int GetSum
    {
        get { return Field1 + Field2 + Field3 + Field4; }
    }
}

criteria.Add(Restrictions.Where<MyClass>(x => x.GetSum > myVariable)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:16:51.883

如果`Restictions`是一个`IEnumerable`然后`MyClass`尝试划分添加和选择：

```
var v = Restrictions
    .Where(x =>(x.Field1 + x.Field2 +  x.Field3 + x.Field4) >= myVariable));

criteria.Add(v); 
```

# html - 自适应 2 列布局

> ID：11987455
> 
> 赞同：1
> 
> 时间：2012-08-16T12:46:34.413
> 
> 标签：html, css

我正在使用自适应布局在站点上工作，这意味着站点会适应用户屏幕宽度。有三张图片说明了我的想法，图片显示了浏览器窗口从宽到窄调整大小的三个步骤。

**宽屏** ，紫色区域贴在页面左侧，绿色区域适合屏幕的其余部分。

![宽屏](../Images/4f225a563acf5d5ca8f554750f144018.png)

**中等屏幕** 绿色区域达到其最小宽度 ![中屏](../Images/971cb0e73f4a0477fea2e39bfa0c9a2d.png)

**窄屏** 绿区跳下紫区

![窄屏](../Images/c7e0da87fb4071bc63dcd773fd3bc006.png)

我使用以下样式

```
.purple_block {
    float: left;
    width: 751px;
    height: 504px;
    margin: 0 35px 100px 0;
}

.green_block{
    min-width: 400px;
} 
```

但是这个“最小宽度”不起作用，因为绿色块的宽度是从紫色区域的左边缘到绿色区域的右边缘计算的。

如何实现所需的行为？

**更新** 紫色块应该总是固定的（它实际上是一个项目库）。绿色块应该有紫色块的边距，看起来像一个适合所有剩余空间的列（它是一个项目描述：几段文本+链接）。当用户缩小其浏览器时，绿色块也会变窄。当绿色块达到其最小宽度时，它会跳到紫色块下方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:55:10.080

看起来您需要特定于屏幕大小的 CSS。您可以通过使用来定义它

```
@media only screen and (max-width: ...px) { ... } 
```

因此，对于每个状态（您的单个图像显示它们），您定义应该在该浏览器窗口宽度处更改的 CSS。

例如

```
@media only screen and (max-width: 1000px) {
    .purple_block {
        float: none;
        width: 100%;
        height: 504px;
        margin: 0 35px 100px 0;
    }

    .green_block{
        width: 100%;
        height: 300px;
    }
} 
```

等等。

# c# - 退出（退出）实现

> ID：11987457
> 
> 赞同：1
> 
> 时间：2012-08-16T12:46:41.823
> 
> 标签：c#, windows, windows-phone-7, windows-phone-7.1

在我的 windows phone7（Silverlight）应用程序中，我必须显示一个消息框，询问用户在退出应用程序之前确认（是/否）[在设备上单击后退按钮]。

问题是我必须使用自定义消息框（使用弹出窗口）来获得用户确认，并且我无法从应用程序中退出。（没有找到将退出应用程序的方法`dispose() or close()`）。

如果我不必使用自定义消息框，`Device back key press event "OnBackKeyPress"`我将使用以下逻辑并完成我的工作

```
MessageBoxResult res = MessageBox.Show("Do you want to Exit?", "Exit", MessageBoxButton.OKCancel);

            if (res == MessageBoxResult.OK)
            {
                if (NavigationService.CanGoBack)
                {
                    while (NavigationService.RemoveBackEntry() != null)
                    {
                        NavigationService.RemoveBackEntry();
                    }
                }
            }
            else
            {
                e.Cancel = true;
            } 
```

问题是我需要使用自定义消息框并完成这项工作。如果需要实现一个按钮以退出应用程序而不使用设备后退按钮，则会出现同样的问题。

我在几篇文章中发现建议抛出异常并完成此操作。以下是其中一些

[http://mobile.dzone.com/articles/windows-phone-mango-sample-3](http://mobile.dzone.com/articles/windows-phone-mango-sample-3)

[http://imaginativeuniversal.com/blog/post/2010/08/22/How-to-Quit-a-WP7-Silverlight-Application.aspx](http://imaginativeuniversal.com/blog/post/2010/08/22/How-to-Quit-a-WP7-Silverlight-Application.aspx)

我认为这不是一个好的做法，也不确定 windows 市场是否会以这种方式进行认证。想听听曾经经历过这个问题的人的想法，以及任何建议来实现这个（终止应用程序）。提前致谢....！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:26:48.233

如果您想提交到 Marketplace，由于以下认证要求，您会遇到一些问题：

> 5.2.4.2 从应用程序的第一个屏幕按返回按钮必须关闭应用程序。
> 
> 5.2.2 Windows Phone 应用程序在用户离开应用程序时由操作系统关闭和终止。应用程序关闭后启动时，其启动时间必须满足第 5.2.1 节 - 启动时间的要求
> 
> 5.2.3 当用户按下“开始”按钮或设备超时导致锁定屏幕启动时，Windows Phone 应用程序将被停用。Windows Phone 应用程序也因调用 Launcher 或 Chooser API 而被停用。

这是您根本*无法*显示消息框的几个实例。

从技术上讲，使用异常终止应用程序是一种违规行为：

> 5.1.2 应用程序必须处理 .NET Framework 引发的异常并且不会意外关闭。在认证过程中，会监控应用程序是否意外关闭。意外关闭的应用程序无法通过认证。处理异常后，应用程序必须继续运行并保持对用户输入的响应。

作为开发人员，您的部分工作是与用户沟通不切实际或不合理的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:27:53.983

对不起，没有办法做到这一点。在芒果更新之前，您可以清除后退堆栈，然后以编程方式触发后退按钮。但从 SDK 7.1 (wp7.5) 开始，我们不能再这样做了。

我的建议是创建一个自定义异常类型`ApplicationXExitException`并抛出它以退出应用程序。使用自定义类型的原因是，当您从市场中提取异常日志时，您会知道哪些确实是意外异常导致应用程序*崩溃*，而哪些异常是故意退出应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:11:30.700

您可以在自定义消息框关闭后挂钩事件引发。事件参数将保留有关用户选择的信息。取决于您将决定是否退出应用程序。

# java - liquibase 中的 Java 代码变更集

> ID：11987460
> 
> 赞同：52
> 
> 时间：2012-08-16T12:46:49.593
> 
> 标签：java, jdbc, liquibase, flyway

liquibase 有没有办法创建 java 代码更改集（即提供一个 java 类，它将接收 JDBC 连接并在数据库中执行一些更改）？

（我知道flyway有这样的功能）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-16T17:49:14.573

是的，有这样的功能。您可以创建一个[`customChange`](https://www.liquibase.org/documentation/changes/custom_change.html)：

```
 <customChange class="my.java.Class">
        <param name="id" value="2" />
    </customChange> 
```

类必须实现`liquibase.change.custom.CustomTaskChange`接口。

```
@Override
public void execute(final Database arg0) throws CustomChangeException {
    JdbcConnection dbConn = (JdbcConnection) arg0.getConnection();
    try {
         ... do funny stuff ...
    } catch (Exception e) {
        // swallow the exception !
    }
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-08-10T09:57:46.690

一个完整的例子看起来像这样

**创建一个实现 CustomTaskChange 或 CustomSqlChange 的类。**

```
package com.example;

import liquibase.change.custom.CustomTaskChange;
import liquibase.database.Database;
import liquibase.database.jvm.JdbcConnection;
import liquibase.exception.CustomChangeException;
import liquibase.exception.SetupException;
import liquibase.exception.ValidationErrors;
import liquibase.logging.LogFactory;
import liquibase.resource.ResourceAccessor;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class DataLoaderTask implements CustomTaskChange {

    //to hold the parameter value
    private String file;

    private ResourceAccessor resourceAccessor;

    public String getFile() {
        return file;
    }

    public void setFile(String file) {
        this.file = file;
    }

    @Override
    public void execute(Database database) throws CustomChangeException {
        JdbcConnection databaseConnection = (JdbcConnection) database.getConnection();
        try {

            //Opening my data file
            BufferedReader in = new BufferedReader(
                    new InputStreamReader(resourceAccessor.getResourceAsStream(file)));

            //Ignore header
            String str = in.readLine();

            while ((str = in.readLine()) != null && !str.trim().equals("")) {
                LogFactory.getLogger().info("Processing line "+ str);
                //Do whatever is necessary
            }
            in.close();
        } catch (Exception e) {
            throw new CustomChangeException(e);
        }
    }

    @Override
    public String getConfirmationMessage() {
        return null;
    }

    @Override
    public void setUp() throws SetupException {

    }

    @Override
    public void setFileOpener(ResourceAccessor resourceAccessor) {
        this.resourceAccessor = resourceAccessor;
    }

    @Override
    public ValidationErrors validate(Database database) {
        return null;
    }

} 
```

**在变更集 xml 中，您可以使用如下类**

```
<changeSet id="1" author="murali" runAlways="false" failOnError="true" >
        <customChange class="com.example.DataLoaderTask">
            <param name="file" value="/com/example/data/user.csv" />
        </customChange>
</changeSet> 
```

对我来说，数据文件位于 src/main/resources/com/example/data 目录中

希望这可以帮助

# c# - 我们如何知道 wcf 服务的输入/输出类型？

> ID：11987468
> 
> 赞同：2
> 
> 时间：2012-08-16T12:47:17.910
> 
> 标签：c#, php, wcf

我是 WCF 的新手，我在 wcf 中编写了一些服务。它现在发布在 Intranet 上，并且一些应用程序已经在使用该服务。目前，我必须为其他开发人员制作有关输入参数/数据类型和输出参数的文档。没关系，如果我们使用.Net平台来消费服务。它会自动在 WebReferences 文件夹中创建服务/类，并且 Intellisense 可以完美运行。

但是如果用户使用的是 PHP 或经典的 ASP，它就不会那样工作。他们必须知道确切的名称、参数类型，而且我必须非常仔细地记录服务。

通过使用 WSDL 如下：我们如何知道我们要使用的服务的数据类型和参数？如果它没有显示在 WSDL 中，我应该在哪里查看这些信息？如果有人在没有文档的情况下给了我 WCF 服务，我怎么知道如何使用该服务？

非常感谢。

以下是我关于服务的界面

```
[ServiceContract]
public interface IEmail
{
    [OperationContract]
    bool InsertEmail(string Subject, string SentFrom, string SentTo, int ApplicationID, int TemplateID, string DataText);
} 
```

以下是关于我的服务的确切 WSDL 信息。

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <wsdl:definitions name="Email" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://tempuri.org/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
- <wsdl:types>
- <xsd:schema targetNamespace="http://tempuri.org/Imports">
  <xsd:import schemaLocation="http://myservice/Email.svc?xsd=xsd0" namespace="http://tempuri.org/" /> 
  <xsd:import schemaLocation="http://myservice/Email.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/" /> 
  </xsd:schema>
  </wsdl:types>
- <wsdl:message name="IEmail_InsertEmail_InputMessage">
  <wsdl:part name="parameters" element="tns:InsertEmail" /> 
  </wsdl:message>
- <wsdl:message name="IEmail_InsertEmail_OutputMessage">
  <wsdl:part name="parameters" element="tns:InsertEmailResponse" /> 
  </wsdl:message>
- <wsdl:portType name="IEmail">
- <wsdl:operation name="InsertEmail">
  <wsdl:input wsaw:Action="http://tempuri.org/IEmail/InsertEmail" message="tns:IEmail_InsertEmail_InputMessage" /> 
  <wsdl:output wsaw:Action="http://tempuri.org/IEmail/InsertEmailResponse" message="tns:IEmail_InsertEmail_OutputMessage" /> 
  </wsdl:operation>
  </wsdl:portType>
- <wsdl:binding name="BasicHttpBinding_IEmail" type="tns:IEmail">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http" /> 
- <wsdl:operation name="InsertEmail">
  <soap:operation soapAction="http://tempuri.org/IEmail/InsertEmail" style="document" /> 
- <wsdl:input>
  <soap:body use="literal" /> 
  </wsdl:input>
- <wsdl:output>
  <soap:body use="literal" /> 
  </wsdl:output>
  </wsdl:operation>
  </wsdl:binding>
- <wsdl:service name="Email">
- <wsdl:port name="BasicHttpBinding_IEmail" binding="tns:BasicHttpBinding_IEmail">
  <soap:address location="http://myservice/Email.svc" /> 
  </wsdl:port>
  </wsdl:service>
  </wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:55:54.760

如果您的意思是您无法在 WSDL 中看到您的服务使用的所有类型，这是因为 WCF 创建的 WSDL 通常（可能总是）被分成几个位。这些其他位从主 WSDL 链接到。

因此，如果您浏览到`http://myservice/Email.svc?wsdl`，您将看到您在问题中提出的 WSDL。在这里，您可以看到指向其他两个模式的链接 -`http://myservice/Email.svc?xsd=xsd0`和`http://myservice/Email.svc?xsd=xsd1`. 如果您浏览这些，您会找到您正在寻找的类型信息。

# delphi - 在已排序的 TStringList 中搜索带有前缀的条目 (StartsText)

> ID：11987472
> 
> 赞同：1
> 
> 时间：2012-08-16T12:47:30.267
> 
> 标签：delphi, tstringlist

我有一个 TStringList 已排序并包含唯一的文件名。该列表可以是任意大小（因此可以是数十万个条目）。我想检查是否有任何条目以特定字符串开头（即文件是否在子文件夹中）。连续扫描列表并使用 StartsText 很容易，但这不是一个理想的解决方案。

使用 TStringList.Find() 代码作为起点，我创建了一个我认为是解决方案的函数，但我想确定一下。不要担心以下不是类的成员（FList 是正在搜索的 TStringList 实例），StartsFilename 的工作方式与 StartsText 相同：

```
 function ShortcutFind(const S: string): Boolean;
  var
    L, H, I, C: Integer;
  begin
    Result := False;
    L := 0;
    H := FList.Count - 1;
    while L <= H do begin
      I := (L + H) shr 1;

      if TFilenameUtils.StartsFilename(FList[I], aFolder) then begin
        Result:=TRUE;
        Exit;
      end;

      C := FList.CompareStrings(FList[I], S);
      if C < 0 then
        L := I + 1
      else begin
        H := I - 1;
        if C = 0 then begin
          Result := True;
          if FList.Duplicates <> dupAccept then L := I;
        end;
      end;
    end;
  end; 
```

基本上，唯一真正的变化是它在移动到下一个要比较的条目之前进行检查。

请注意，不能从 TStringList 切换。

这种方法行得通吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T13:38:07.337

如果`TFilenameUtils.StartsFilename`与`StartsText`（并且您的第一段暗示它可能）相同，那么您可以通过*使用* `TStringList.Find`而不是复制它来在一个语句中完成整个功能：

```
var
  I: Integer;
begin
  Assert(not FList.CaseSensitive);
  Result := FList.Find(S, I) or ((I < FList.Count) and StartsText(S, FList[I]));
end; 
```

这应该有效，因为当`Find`失败时，它仍然会告诉您所需字符串*将*出现在列表中的位置的索引。当您搜索前缀字符串时，它的位置将位于以该前缀开头的任何其他字符串之前，因此如果有任何带有该前缀的字符串，它们将立即出现在前缀本身的假设位置之后。

* * *

如果您想保留当前代码，则可以通过删除检查条件来简化它`C = 0`。`StartsFilename`除非您的功能被破坏，否则这种情况永远不会发生。但是，如果函数真的被破坏并且`C` *可以*为零，那么你至少可以在那个时候停止执行循环，因为你已经找到了你正在寻找的东西。无论哪种方式，您都不需要检查，因为您的函数与返回找到的项目的索引没有`Duplicates`相同的要求。`Find`

# jquery - 设置jQuery滑块功能

> ID：11987475
> 
> 赞同：0
> 
> 时间：2012-08-16T12:47:34.543
> 
> 标签：jquery, slider

我正在尝试设置一个功能，如果我正在使用的滑块（皇家滑块）在某个幻灯片上，则会发生 .load 功能。我只是不知道如何设置它，并且一直在四处寻找，似乎无法得到它。

sliderInstance.currSlideId // 当前幻灯片索引

你将如何使用它来设置它，所以当 sliderInstance.currSlideId 等于幻灯片值时，在本例中为 2，然后

```
function () {
    $('#light_content_container').load('http://www.klossal.com/portfolio/lightseries_content.html');
}); 
```

启动。 [http://dimsemenov.com/plugins/royal-slider/documentation/?s=dp#api](http://dimsemenov.com/plugins/royal-slider/documentation/?s=dp#api)这是滑块的 api，我不知道如何让它工作，所以任何帮助将不胜感激。

我目前拥有的所有脚本：

```
<script>            

jQuery(document).ready(function($) {
    var sliderInstance = $('#mySlider').royalSlider({
                    captionShowEffects:["moveleft", "fade"],
                    directionNavAutoHide: false,
                    autoScaleSlider: false,
                    imageScaleMode:"fit",                  // Scale mode of all images. Can be "fill", "fit"  
or "none"
                    imageAlignCenter:true,
                    navigateByClick:false,
                    keyboardNavEnabled:true,
                    controlNavThumbs:true,
                    directionNavEnabled: true,  
                    startSlideId: 1,
    deeplinking: {
        // fullscreen options go gere
        enabled: true,
        prefix: 'slider_port-'
    },                  
                    afterSlideChange:function() {
        xx=this.currSlideId;
        $('#thumb_scroll li').removeClass('library_thumb_active');
        $('#thumb_scroll li').eq(xx).addClass('library_thumb_active');

    },      

    }).data('royalSlider');             
    $("#makingof_goto").click(function() {
        sliderInstance.goTo(0);
    });
    $("#space_goto").click(function() {
        sliderInstance.goTo(1);
    });
    $("#light_goto").click(function() {
        sliderInstance.goTo(2);
    });
    $("#faces_goto").click(function() {
        sliderInstance.goTo(3);
    });
    $("#color_goto").click(function() {
        sliderInstance.goTo(4);
    });

$(document).keydown(function(e){
if (e.keyCode == 37) { 
     var leftPos = $('#thumb_scroll').scrollLeft();
     if(leftPos==0){
           $("#thumb_scroll").animate({scrollLeft: leftPos + 348}, 800);

     }
     else{
$("#thumb_scroll").animate({scrollLeft: leftPos - 150}, 800);
     }
      }

 if (e.keyCode == 39) { 

     var leftPos = $('#thumb_scroll').scrollLeft();

if(leftPos ==348){
           $("#thumb_scroll").animate({scrollLeft: leftPos - 348}, 800);

     }
     else{
$("#thumb_scroll").animate({scrollLeft: leftPos + 150}, 800);
     }

      }

});

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:16:31.607

**编辑：**更新以显示如何与您当前的代码集成

首先，免责声明我从未使用过 Royal Slider，但我一直在查看文档。您是否尝试过使用 rsAfterSlideChange 事件？例如：

```
$(document).ready(function() {
    // initialize slider
    var sliderInstance = ($('#mySlider').royalSlider({ ... }).data('royalSlider');

    // bind the rsAfterSlideChange event
    sliderInstance.ev.on('rsAfterSlideChange', function() {
        if(sliderInstance.currSlideId == 2) {
            // your code here!
           $('#light_content_container').load('http://www.klossal.com/portfolio/lightseries_content.html');
        }
    });

} 
```

# hibernate - hibernate 4.1 中类别 org.hibernate.cache 的日志记录不起作用

> ID：11987476
> 
> 赞同：1
> 
> 时间：2012-08-16T12:47:36.320
> 
> 标签：hibernate, logging, ehcache

在从**休眠 3**迁移到**休眠 4.1.3**并让所有内容（包括一般**休眠日志记录**）正常工作后，我遇到了以下问题：

除了与缓存相关的日志记录之外，所有休眠日志记录似乎都有效。我正在使用 ehcache ( `org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory`) 进行二级缓存。缓存本身工作正常（提取缓存统计信息，查看未命中、命中、放置......）。

我发现其他类别的提示（例如`org.hibernate.type`）在过去不起作用或仍然不起作用，但与缓存日志记录无关。

该应用程序使用**slf4j**和**log4j**作为日志记录实现。`log4j.properties`我可以毫无问题地启用和禁用其他所需的类别。

有没有人对此有任何想法或更多信息，它似乎是什么，问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:53:41.300

我有一个类似的问题并通过将“org.hibernate.cache”的级别添加到TRACE来解决它。在 logback 中，这将是：

`<logger name="org.hibernate.cache" level="TRACE"/>`

# linux - 远程执行 Qt 应用程序导致 Linux 上的键盘输入丢失

> ID：11987481
> 
> 赞同：0
> 
> 时间：2012-08-16T12:47:58.860
> 
> 标签：linux, eclipse, qt, eclipse-cdt, gdbserver

我正在使用带有 Qt 插件的 Eclipse CDT。在没有 X 的 Debian 上工作，使用 Qt 的 QWS 服务器运行 GUI。

简单地说，我正在启动一个常规的 cpp 线程来执行逻辑工作，然后启动一个标准的 QApplication 执行。在本地目标机器上工作正常。但是当我从 Eclipse 的远程系统资源管理器服务远程启动程序或开始使用 gdbserver 进行调试时，键盘输入未正确处理，随机获取一些键盘事件，即它处于竞速状态。但是，鼠标输入工作得很好。

我知道这个问题还不够清楚，但我不知道如何专注于这个问题。我可以根据需要提供额外的反馈。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:00:56.123

通常，当您在 QT 和输入处理方面出现奇怪的行为时，您以某种方式弄乱了 QT 的有限状态处理循环。你在一个调试环境中运行，它总是倾向于把事情弄得一团糟，以至于让它们比它们的价值更麻烦。您可以尝试在远程 X 显示器上进行测试吗？

# c++ - C++ 中 OpenCV 的 Canny 边缘检测

> ID：11987483
> 
> 赞同：9
> 
> 时间：2012-08-16T12:48:06.257
> 
> 标签：c++, opencv, contour, edge-detection

我想提取手的边缘，但得到以下结果。我已经尝试调整低阈值和高阈值，但仍然无法获得所需的输出。我在代码及其输出下面包含了。似乎是什么问题？

这是下面代码生成的[输出图像](http://img29.imageshack.us/img29/5273/cannyj.jpg)。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

int main(){

    cv::Mat image= cv::imread("open_1a.jpg");
    cv::Mat contours;
    cv::Mat gray_image;

    cvtColor( image, gray_image, CV_RGB2GRAY );

    cv::Canny(image,contours,10,350);

    cv::namedWindow("Image");
    cv::imshow("Image",image);

    cv::namedWindow("Gray");
    cv::imshow("Gray",gray_image);

    cv::namedWindow("Canny");
    cv::imshow("Canny",contours);
    cv::waitKey(0);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T13:34:29.463

更改此行

```
cvtColor( image, gray_image, CV_RGB2GRAY ); 
```

至

```
std::vector<cv::Mat> channels;
cv::Mat hsv;
cv::cvtColor( image, hsv, CV_RGB2HSV );
cv::split(hsv, channels);
gray_image = channels[0]; 
```

问题似乎是您的灰度手非常接近灰色背景。我在色调（颜色）上应用了 Canny，因为皮肤颜色应该足够不同。

此外，Canny 阈值看起来有点疯狂。公认的规范是，较高的应该是较低的 2 到 3 倍。350有点太多了，它无助于解决主要问题。

**编辑**

有了这些阈值，我能够提取出相当好的轮廓

cv::Canny（图像，轮廓，35,90）；

阅读一些关于算法的理论将帮助你理解发生了什么以及你应该做些什么来改进。`wiki canny`在谷歌上

但是，上面的改进会给你带来更好的结果（假设你使用比 10, 350 更好的阈值。试试 (40, 120) ）

# flash - V2 中的自定义街景

> ID：11987485
> 
> 赞同：0
> 
> 时间：2012-08-16T12:48:10.250
> 
> 标签：flash, html, google-maps-api-3, google-maps-api-2, google-street-view

目前，在仅使用 HTML5 的谷歌网站上，只有使用谷歌地图 API v3 创建自定义街景的文档和教程！

有没有人尝试使用 Google Maps API v2 创建自定义街景？..最终我希望这个例子出现在谷歌地图 api v2（Flash）中：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-custom-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-custom-simple)

现在我想使用 flash (google maps api v2) 的原因是，与 google maps api v3 (hml5 canvas) 相比，它提供了更好的渲染质量、平滑且没有滞后，尤其是在全屏时。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:45:50.317

V2中没有自定义街景全景选项。正如您通过查看 API 参考所看到的：[https ://developers.google.com/maps/documentation/javascript/v2/reference](https://developers.google.com/maps/documentation/javascript/v2/reference)

任何未记录的内容均违反服务条款。

如果您打算使用 V2，那么您可能需要寻找自定义全景解决方案，例如 360 Cities

# php - PHP/SOAP 响应数据集为空

> ID：11987488
> 
> 赞同：1
> 
> 时间：2012-08-16T12:48:23.180
> 
> 标签：php, soap, wsdl

我正在尝试使用 PHP/SOAP 从 Web 服务获取数据，并且响应数据集始终为空。我认为问题在于我如何设置 dsParams 参数。

[这是网络服务 URL](https://www.maxhire.net/MaxHireAPI/UserServices.asmx?wsdl)

如果我使用 SoapUI 并发送此请求：

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:max="http://www.maxhire.net/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <soapenv:Header>
      <max:AuthHeader>
         <!--Optional:-->
         <max:DatabaseName>Name</max:DatabaseName>
         <!--Optional:-->
         <max:SecurityKey>Key</max:SecurityKey>
      </max:AuthHeader>
   </soapenv:Header>
   <soapenv:Body>
      <max:ExecuteCustomStoredProcedureGetResults>
         <max:strProcName>JobPostings</max:strProcName>
         <max:dsParams>
            <xs:schema id="NewDataSet" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
               <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
                  <xs:complexType>
                     <xs:choice minOccurs="0" maxOccurs="unbounded">
                        <xs:element name="Table">
                           <xs:complexType>
                              <xs:sequence>
                                 <xs:element name="ParamName" type="xs:string" minOccurs="0"/>
                                 <xs:element name="ParamValue" type="xs:string" minOccurs="0"/>
                              </xs:sequence>
                           </xs:complexType>
                        </xs:element>
                     </xs:choice>
                  </xs:complexType>
               </xs:element>
            </xs:schema>
         </max:dsParams>
      </max:ExecuteCustomStoredProcedureGetResults>
   </soapenv:Body>
</soapenv:Envelope> 
```

我得到了想要的结果。

使用 SOAP 调用的每个 Web 方法都必须传递适当的安全凭证。这些凭据必须在 SOAP 标头中指定为 DatabaseName 和 SecurityKey。这部分工作正常。

根据文档：

关于 dsParams

关于 dsParams 数据集的一些注意事项，您必须通过这些数据集才能使用这些函数（*例如 ExecuteCustomStoredProcedureGetResults*）：

1.  即使您没有参数，您也必须传递一个包含一个已初始化表的数据集对象。

2.  如果确实有参数，则该表中必须有两列名为“ParamName”和“ParamValue”。

3.  每个参数应该是表中自己的行，其名称在第一列，值在第二列。

注意：我没有参数。

下面是我尝试处理此任务的多种方法之一的示例。这是我能得到的最接近的，不会出错。

```
$client = new SoapClient('https://www.maxhire.net/MaxHireAPI/UserServices.asmx?wsdl',array('trace' => TRUE));

$header = new SoapHeader(
        'http://www.maxhire.net/',
        'AuthHeader',array(
                'DatabaseName' => 'Name', 
                'SecurityKey'  => 'Key'
            ),
        false
        );

$client->__setSoapHeaders($header);

try {
    $jobs = new stdClass();
    $jobs->strProcName = 'JobPostings';
    $jobs->NewDataSet = new stdClass();
    $jobs->NewDataSet->Table = new stdClass();
    $jobs->NewDataSet->Table->ParamName = '';
    $jobs->NewDataSet->Table->ParamValue = '';

    $result = $client->ExecuteCustomStoredProcedureGetResults($jobs);

    echo "<pre>\n";
    var_dump($result);
    echo "</pre>\n";
}
catch(SoapFault $soapfault){
    echo "<pre>\n";
    var_dump($soapfault);
    echo "</pre>\n";
} 
```

以下是我得到的回复：

```
object(stdClass)#7 (1) {
  ["ExecuteCustomStoredProcedureGetResultsResult"]=>
  object(stdClass)#8 (2) {
    ["schema"]=>
    string(323) "<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet"><xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"/></xs:complexType></xs:element></xs:schema>"
    ["any"]=>
    string(127) "<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1"/>"
  }
}

echo "Request:\n" . $client->__getLastRequest() . "<br />\n";

Request:

<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.maxhire.net/">
    <SOAP-ENV:Header>
        <ns1:AuthHeader>
            <ns1:DatabaseName>Name</ns1:DatabaseName>
            <ns1:SecurityKey>Key</ns1:SecurityKey>
        </ns1:AuthHeader>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <ns1:ExecuteCustomStoredProcedureGetResults>
            <ns1:strProcName>JobPostings</ns1:strProcName>
        </ns1:ExecuteCustomStoredProcedureGetResults>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>

echo "Response:\n" . $client->__getLastResponse() . "<br />\n";

Response:

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <ExecuteCustomStoredProcedureGetResultsResponse xmlns="http://www.maxhire.net/">
            <ExecuteCustomStoredProcedureGetResultsResult>
                <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
                    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
                        <xs:complexType>
                            <xs:choice minOccurs="0" maxOccurs="unbounded" />
                        </xs:complexType>
                    </xs:element>
                </xs:schema>
                <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1" />
            </ExecuteCustomStoredProcedureGetResultsResult>
        </ExecuteCustomStoredProcedureGetResultsResponse>
    </soap:Body>
</soap:Envelope> 
```

# jquery - 组合多个滚动 div

> ID：11987491
> 
> 赞同：1
> 
> 时间：2012-08-16T12:48:26.770
> 
> 标签：jquery, ipad, iscroll4

将可滚动的 div 放入另一个可滚动的 div 时，我遇到了麻烦。这是html代码

```
<div id="wrapper">
<div id="scroller" >
        <div id="wrapper1" style="height: 200px;">
            <div>
                <ul id="thelist1">
                    <li>Pretty row 1</li>
                    <li>Pretty row 2</li>
                    <li>Pretty row 3</li>
                    <li>Pretty row 4</li>
                </ul>
            </div>
        </div>
        <div id="wrapper2" style="height: 200px;">
            <div>
                <ul id="thelist2">
                    <li>Pretty row 1</li>
                    <li>Pretty row 2</li>
                    <li>Pretty row 3</li>
                    <li>Pretty row 4</li>
                </ul>
            </div>
        </div>
        <div id="wrapper3" style="height: 200px;">
            <div>
                <ul id="thelist3">
                    <li>Pretty row 1</li>
                    <li>Pretty row 2</li>
                    <li>Pretty row 3</li>
                    <li>Pretty row 4</li>
                    <li>Pretty row 5</li>
                </ul>
            </div>
        </div>
        <div id="wrapper4" style="height: 200px;">
            <div>
                <ul id="thelist4">
                    <li>Pretty row 1</li>
                    <li>Pretty row 2</li>
                    <li>Pretty row 3</li>
                    <li>Pretty row 4</li>
                    <li>Pretty row 5</li>
                </ul>
            </div>
        </div>  
</div> 
```

我为此使用 iscroll 插件：

```
var myScroll;
function loaded() {
myScroll = new iScroll('wrapper');
myScroll1 = new iScroll('wrapper1');
myScroll2 = new iScroll('wrapper2');
myScroll3 = new iScroll('wrapper3');
myScroll4 = new iScroll('wrapper4');
} 
```

问题是滚动内部 div 的事件与外部 div 发生冲突。因此，当我滚动其中一个内部 div 时，我发现自己在滚动大包装 div。

有没有办法只滚动我正在触摸的 div ？

# c# - XML中命名空间之间的区别

> ID：11987494
> 
> 赞同：3
> 
> 时间：2012-08-16T12:48:40.610
> 
> 标签：c#, xml, linq-to-xml, xelement

我正在使用 C# 中的 XDocument 创建 XML 文档。我有个问题。

是

```
<Simple xmlns = "Example"></Simple> 
```

相当于

```
<Example:Simple></Example:Simple> 
```

?

我试图在 C# 中使用 XNamespace 和 XElement 获得第二个解决方案，但我只得到第一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T12:51:32.417

不。

第一个示例在 Example 命名空间中创建一个*Simple*元素（注意命名空间通常表示为 URI）

第二个示例在与 Example 前缀（由属性定义）关联的任何命名空间中创建一个*Simple元素。*`xmlns`

这些将是等效的：

```
<xml xmlns="http://example.com/myNameSpace">
    <Simple></Simple>
</xml>

<xml xmlns="http://example.com/myNameSpace" xmlns:Example="http://example.com/myNameSpace">
    <Example:Simple></Example:Simple>
</xml> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T12:52:10.527

在第一个示例中，您定义了一个*默认*命名空间，该命名空间适用于任何不以自己的命名空间为前缀的元素/属性。

在第二个示例中，您尚未定义命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:52:21.983

不，因为 xml 名称空间允许元素名称不支持的字符，所以您不能在元素标签名称前加上它的名称空间。

添加命名空间前缀，如下所示：

```
<alias:Simple xmlns:alias = "Example"></alias:Simple> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T13:02:24.360

不，但它相当于：

```
<Example:Simple xmlns:Example="Example"></Example:Simple> 
```

使用相对 URI 作为命名空间名称是个坏主意，因为这个 XML 现在有一个不同的命名空间，具体取决于它的来源。所以总是给出完整的 URI。例如，如果从那里接收 XML，`http://example.net/somePlace/someXML`则相对 URI`Example`扩展为`http://example.net/somePlace/Example`，因此请充分使用它：

```
<Example:Simple xmlns:Example="http://example.net/somePlace/Example"></Example:Simple> 
```

或者

```
<Simple xmlns="http://example.net/somePlace/Example"></Simple> 
```

否则，如果有人保存了它，`C:\Documents`那么再次打开它就相当于：

```
<Simple xmlns="file:///C|/Documents/Example"></Simple> 
```

也就是说`Simple`这里的意思和刚下载的时候完全不一样。

# linux - /proc/loadavg 中的数字在 Linux 上是什么意思？

> ID：11987495
> 
> 赞同：89
> 
> 时间：2012-08-16T12:48:49.687
> 
> 标签：linux

在 Linux 上发出此命令时：

```
# cat /proc/loadavg
0.75 0.35 0.25 1/25 1747 
```

前三个数字是平均负载。最后2个数字是多少？

最后一个每秒不断增加2，我应该担心吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-16T12:54:07.420

[/proc/loadavg](http://linux.die.net/man/5/proc)

> 此文件中的前三个字段是负载平均数字，给出了运行队列（状态 R）或等待磁盘 I/O（状态 D）**中 1、5 和 15 分钟的平均**作业数。它们与 uptime(1) 和其他程序给出的平均负载数相同。
> 
> 第四个字段由两个用斜杠 (/) 分隔的数字组成。其中第一个是当前正在执行的内核调度实体（进程、线程）的数量；这将小于或等于 CPU 的数量。斜杠后面的值是系统上当前存在的内核调度实体的数量。
> 
> 第五个字段是最近在系统上创建的进程的 PID。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-07T06:43:49.837

我想评论接受的答案。

> 第四个字段由两个用斜杠 (/) 分隔的数字组成。其中第一个是当前正在执行的内核调度实体（进程、线程）的数量；这将小于或等于 CPU 的数量。

我做了一个测试程序，它从输入中读取整数 N，然后创建 N 个线程并永远运行它们。在 RHEL 6.5 计算机上，我有 8 个处理器，每个处理器都有超线程。无论如何，如果我运行我的测试并且它创建了 128 个线程，我在第四个字段值中看到大于 128 的值，例如 135。它显然大于 CPU 的数量。这篇文章支持我的观察： http://juliano.info/en/Blog: [Memory_Leak /Understanding_the_Linux_load_average](http://juliano.info/en/Blog:Memory_Leak/Understanding_the_Linux_load_average)

> 值得注意的是，proc(5) 手册页中的当前解释（截至 2009 年 3 月的手册页版本 3.21）是错误的。它将第四个字段的第一个数字报告为当前正在执行的调度实体的数量，因此预测它不能大于 CPU 的数量。这与实际实现不匹配，该值报告当前可运行线程的数量。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-16T12:51:17.843

> 前三列测量最后一分钟、五分钟和 15 分钟的 CPU 和 I/O 利用率。第四列显示当前正在运行的进程数和进程总数。最后一列显示最后使用的进程 ID。

[https://docs.fedoraproject.org/en-US/Fedora/17/html/System_Administrators_Guide/s2-proc-loadavg.html](https://docs.fedoraproject.org/en-US/Fedora/17/html/System_Administrators_Guide/s2-proc-loadavg.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-08-30T09:51:03.990

以下页面详细解释了这些：

[http://www.brendangregg.com/blog/2017-08-08/linux-load-averages.html](http://www.brendangregg.com/blog/2017-08-08/linux-load-averages.html)

> 一些解释：
> 
> *   如果平均值为 0.0，则您的系统处于空闲状态。
> *   如果 1 分钟平均值高于 5 或​​ 15 分钟平均值，则负载正在增加。
> *   如果 1 分钟平均值低于 5 或​​ 15 分钟平均值，则负载正在减少。
> *   如果它们高于您的 CPU 计数，那么您可能会遇到性能问题（这取决于）。

# pygame - 调整视频播放器的大小

> ID：11987496
> 
> 赞同：2
> 
> 时间：2012-08-16T12:48:49.927
> 
> 标签：pygame, vlc, resizable

我有基于 pygame 的视频播放器，它有用于 GUI 的 berkelium 浏览器，下面是用于播放流的 VLC 库。我没有制作播放器，但我想添加一个“调整大小”选项，该选项目前不存在。该应用程序是为 OS X 制作的。

在播放器初始化时，`pygame.set_mode(screensize,OPENGL|DOUBLEBUF|RESIZABLE)`被调用，问题是当我调整窗口大小超过屏幕大小时，这些部分不可见（显示错误），如果我再试`pygame.set_mode`一次，它会导致应用程序由于依赖关系而崩溃（浏览器和 VLC ）。

所以我决定使用以下方法初始化屏幕：

`pygame.set_mode(screenresolution, OPENGL|DOUBLEBUF|RESIZABLE)`

应该将其设置为最大值，然后切换回原始的较小分辨率（如使用鼠标调整大小）。

怎么做？如何模拟`RESIZABLE`标志和鼠标移动动作？

播放器可以很好地调整到更小的尺寸，只有更大的尺寸才是问题。

```
class InputAndDisplay:
    def init(self, fullscreen=False):
        global pygame, sys
        # if 'darwin' in sys.platform:
        #     import sys
        #     sys.argv = ['Core.py']
        #     import pygame.macosx
        #     pygame.macosx.init()

        pygame.init()

        global screenSize
        self.screenSize = screenSize
        if fullscreen:
            try: self.screenSize = pygame.display.list_modes()[0]
            except Exception, e: print e
            flags = OPENGL|DOUBLEBUF|FULLSCREEN
        else:
            flags = RESIZABLE|OPENGL|DOUBLEBUF

        print 'screenSize:', self.screenSize

        try:
            povrsina = pygame.display.set_mode(self.screenSize, flags)
        except Exception, e:
            print e
            self.screenSize = screenSize
            povrsina = pygame.display.set_mode(self.screenSize, RESIZABLE|OPENGL|DOUBLEBUF)
        pygame.display.set_caption('NetTVBox-WebPlayer')

        pygame.mouse.set_pos(list(self.screenSize))
        if 'darwin' not in sys.platform:
            pygame.mouse.set_visible(False)

        #pygame.key.set_repeat(300, 100)

        if 'darwin' not in sys.platform:
            pygame.mixer.quit()

        if 'linux' in sys.platform: # try to turn off vsyncing
            import ctypes
            libgl = ctypes.cdll.LoadLibrary('libGL.so.1')
            proc = libgl.glXGetProcAddressARB('glXSwapIntervalMESA')
            _glXSwapIntervalMESA = ctypes.CFUNCTYPE(ctypes.c_int, ctypes.c_int)(proc)
            _glXSwapIntervalMESA(0)

        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()
        #gluPerspective(45.0, 640/480.0, 0.1, 100.0)
        glOrtho(-0.5, 0.5, -0.5, 0.5, -5, 5)
        #glTranslatef(0.0, 0.0, -3.0)
        #glRotatef(25, 1, 0, 0)

        glMatrixMode(GL_MODELVIEW)
        glLoadIdentity()

        glEnable(GL_TEXTURE_2D)
        glShadeModel(GL_FLAT)
        glClearColor(0.0, 0.0, 0.0, 0.0)
        glClearDepth(1.0)
        glEnable(GL_DEPTH_TEST)
        glDepthFunc(GL_LEQUAL)
        glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST)

        self.textures = glGenTextures(2)

        self.threeDmode = MODE_3D_OFF 
```

那`init`在`inputAndDisplay.py`
和主文件中`Core.py`，它调用了它，还有很多其他的东西。这就是为什么我没有把所有代码都放在这里的原因，它有很多，但并不重要
。这里是其中的一部分`Core.py`：

```
input_and_display = InputAndDisplay()
input_and_display.init(self.fullscreen)
rc = RemoteControl()
rc.init()
media = Media()
if 1: # !
    media.config = {
        'buffering': state.mediaplayer_buffering,
        'contrast': state.mediaplayer_contrast,
        'saturation': state.mediaplayer_saturation,
    }
media.init()
browser = Browser()
browser.init() 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:31:00.937

听起来您错过了`VIDEORESIZE`检测调整大小的事件。

（见相关事件：`VIDEOEXPOSE`， http: `ACTIVEEVENT` [//www.pygame.org/docs/ref/event.html](http://www.pygame.org/docs/ref/event.html)）

> [http://www.pygame.org/docs/ref/display.html#pygame.display.set_mode](http://www.pygame.org/docs/ref/display.html#pygame.display.set_mode)
> 
> " 然后设置显示模式，在 pygame 事件队列中放置几个​​事件。当用户请求程序关闭时发送**pygame.QUIT** 。当显示获得和失去输入焦点时，窗口将接收**pygame.ACTIVEEVENT**事件。如果显示设置了 pygame.RESIZABLE 标志，则当用户调整窗口尺寸时将发送 pygame.VIDEORESIZE 事件。当必须重绘窗口的某些部分时，直接绘制到屏幕的硬件显示将收到**pygame.VIDEOEXPOSE**事件**。** "

# httpclient - HttpClient.PostAsJsonAsync 无法序列化继承的属性

> ID：11987507
> 
> 赞同：3
> 
> 时间：2012-08-16T12:49:48.000
> 
> 标签：httpclient, asp.net-web-api

我的代码是

```
public class BaseDTO
{
    public int Id { get; set; }
    public string Code { get; set; }
    public string Name { get; set; }
}
 public class DataDTO : BaseDTO
{
    public int Level { get; set; }
    public DateTime ChangedDate { get; set; }
} 
```

我通过 httpclient 调用 web-api

```
static void Main(string[] args)
    {
        var httpClientHandler = new HttpClientHandler();
        httpClientHandler.UseDefaultCredentials = true;
        var client = new HttpClient(httpClientHandler);

        client.BaseAddress = new Uri("http://localhost/");

        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
        var dto = new DataDTO()
            {
                Id = 1,
                Code = "a",
                Name = "A",
                Level = 10,
                ChangedDate = DateTime.Now
            };
        HttpResponseMessage resp =
            client.PostAsJsonAsync(
                "api/MyApi/Creat", dto).Result;

        if (resp.IsSuccessStatusCode)
        {

        }
    } 
```

当我调试时，我发现服务器接收到的数据，“Id”，“Code”和“Name”继承自基类都是空的，“Level”和“ChangedDate”是正确的。

我用谷歌搜索，但我找不到我的理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:44:21.977

改用restsharp，效果很好

# mysql - 从客户端PC访问服务器中的mysql数据库

> ID：11987508
> 
> 赞同：0
> 
> 时间：2012-08-16T12:50:02.310
> 
> 标签：mysql, networking, wifi, localhost, wampserver

我的**本地主机**中有一个数据库（使用 WAMP 服务器）。我在几台笔记本电脑之间创建了一个**WiFi 网络。客户端笔记本电脑上有一个****C# 应用程序**，需要使用**服务器中的数据库**（此应用程序使用数据库中的数据）。我该怎么做呢？（客户端笔记本电脑可以通过浏览器成功连接到我的 wamp 服务器，地址为 **192.168.16.2**）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:06:42.890

你需要做三件事

1.  确保应用程序具有正确的详细信息以建立连接，即用户名、密码、数据库和主机名
2.  确保服务器使用 TCP/IP 协议（​​可能是 SSL）并且防火墙不会阻止传入连接。
3.  确保数据库用户可以从远程计算机连接。这可以使用 Workbench 应用程序来实现。

# android - 注入 screen_on 事件以使传感器在屏幕关闭时工作

> ID：11987510
> 
> 赞同：3
> 
> 时间：2012-08-16T12:50:07.767
> 
> 标签：android, events, reflection, sensors

我试图让传感器在屏幕关闭时工作。这是众所周知的错误。在所有手机上都没有任何解决方案。我假设如果我发送（注入）screen_on 事件，而实际上屏幕将被关闭，我可以欺骗内核。你有什么想法我如何检查我的假设并注入这样的事件？

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-09-13T11:58:33.497

为什么不启动监控传感器的[后台服务？](http://developer.android.com/reference/android/app/Service.html)

然后将结果发送/使用回您的应用程序的活动。当屏幕熄灭时，您的活动仍会暂停，但您将继续读取传感器数据。

对后台服务进行繁重的处理也是一个好主意......

这对我很有用。

# c - 如何使用回调函数在 Tizen 中获取方向？

> ID：11987517
> 
> 赞同：9
> 
> 时间：2012-08-16T12:50:39.767
> 
> 标签：c, linux, tizen, tizen-native-app

我想用 c 编写一个本机应用程序来获取 Tizen 中的方向值。编译后的 c 代码必须在 Tizen 手机上运行，​​我需要获取方向的值。我从 Tizen 源获得的回调函数是

```
int app_cb_broker_appcore_rotation_event(enum appcore_rm rm, void *data)
{
    app_device_orientation_cb device_orientation_cb;

    device_orientation_cb = app_context.callbacks->device_orientation;

    if (device_orientation_cb != NULL)
    {
            app_device_orientation_e dev_orientation;

            dev_orientation = app_convert_appcore_rm(rm);

            device_orientation_cb(dev_orientation, app_context.user_data);
    }

    return 0;
} 
```

如何使用此函数获取当前方向的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:54:56.640

查看头文件： [https ://review.tizen.org/git/?p=framework/appfw/app-core.git;a=blob;f=include/appcore-common.h;hb=HEAD](https://review.tizen.org/git/?p=framework/appfw/app-core.git;a=blob;f=include/appcore-common.h;hb=HEAD)

看起来您应该调用`appcore_set_rotation_cb`注册一个回调函数，以便在旋转更改时得到通知。如果你想获得现有的状态，你可以调用`appcore_get_rotation_state`.

头文件中包含的 API 文档中有一些示例代码。

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“可排序”

> ID：11987520
> 
> 赞同：1
> 
> 时间：2012-08-16T12:50:49.597
> 
> 标签：jquery

我是使用 jQuery 和 UI 的新手。

我正在使用可排序的方法：`$('#div').Sortable()`

并得到这个错误：

> 未捕获的类型错误：对象 [对象对象] 没有方法“可排序”

甚至我已经包含了所有需要的 jQuery 文件：

```
<script type="text/javascript" src="./drag/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="./drag/jquery-ui-1.8.23.custom.min.js"></script>
<script type="text/javascript" src="./drag/jquery.ui.core.min.js"></script>
<script type="text/javascript" src="./drag/jquery.ui.mouse.min.js"></script>
<script type="text/javascript" src="./drag/jquery.ui.widget.min.js"></script>
<script type="text/javascript" src="./drag/jquery.ui.sortable.min.js"></script> 
```

那么这里的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:53:22.620

尝试`$('#div').sortable()`使用小写的 S。

# c++ - 错误：ISO C++ 禁止指针和整数之间的比较

> ID：11987524
> 
> 赞同：0
> 
> 时间：2012-08-16T12:51:02.697
> 
> 标签：c++

我有以下几点：

```
 wxIntPtr* value;
    CreateRegKey();
    if (regkeyexist) {
        if (regKey->HasValue("LoggingStatus")) {
            regKey->QueryValue("LoggingStatus", value);
            if (value == 1) 
```

但是我得到了错误，因为 c++ 禁止指针和整数之间的比较

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:53:18.780

这应该编译，但我不知道它是否是你想要的：

```
...
if (*value == 1)
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T12:57:32.007

您正在尝试将 a`int`与 a进行比较`pointer`

如果您确实想查看是否`pointer`是`1`

```
if (value == (wxIntPtr*)(1)) 
```

否则，如果您尝试与*指向的值进行比较`value`*

```
if (*value == 1) 
```

虽然我不知道你为什么要做第一个:)

**我认为你可能应该做的是以下几点：**

```
wxIntPtr value; // wxIntPtr on the stack
...
regKey->QueryValue("LoggingStatus", &value); // Pass by reference to modify.
        if (value == 1) 
```

这就是大多数 Windows 编程的完成方式，通过 API 调用初始化*您自己实例化*的值和结构。很有可能，当您传递`wxIntPtr* value`给 时`QueryValue()`，它会尝试并设置它的值，如下所示：

```
QueryValue("LoggingStatus", &value) { *value = 1; } // For example. 
```

在您的情况下，当它尝试*取消引用**未初始化的指针***时，这将导致崩溃。

# facebook - Facebook : 喜欢的所有页面列表

> ID：11987528
> 
> 赞同：1
> 
> 时间：2012-08-16T12:51:10.950
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我是 Facebook 的 Graph API 和 FQL 的新手。我想要关于相同的小信息。我想获取任何特定用户喜欢的所有页面的列表。

我使用 Graph API 只是为了允许用户使用他们的 Facebook ID 登录并可以访问他们的墙，但对其余部分知之甚少。

我在谷歌上搜索了相同的信息，但得到了关于用户管理的我不想要的页面列表的信息，我想要他们喜欢的完整列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:05:20.483

它是 User 对象的连接属性。

[https://developers.facebook.com/docs/reference/api/user/#likes](https://developers.facebook.com/docs/reference/api/user/#likes)

# android - 如何在Android中获取一系列字符串？

> ID：11987530
> 
> 赞同：5
> 
> 时间：2012-08-16T12:51:21.127
> 
> 标签：android, range

目前我正在使用简单的 android 应用程序，我曾尝试在 iphone 中设置字符串范围，它的工作原理，但我在 Android 应用程序中不知道这一点？在 iPhone 中：

```
result = "mobile - check balance | rate: 0.036"

if ( [result rangeOfString:@"rate:"].location != NSNotFound) 
{

} 
```

如何在Android中转换它，请帮助我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T12:55:38.130

您是否尝试过类似 result = "mobile- check balance | rate: 0.036"

```
if( result.indexOf("rate")!=-1)
{} 
```

我最近也一直在使用objective-c，我从[这里拉了这个](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:17:06.453

试试这个

```
 String strVowels = "mobile - check balance | rate: 0.036";
    if (strVowels.contains("rate:") == true) {
        // String contains IOU sub-string!
        Log.i("mylog", "this word is in string.");
    } else {
        Log.i("mylog", "this word is not in string.");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:56:56.093

我想知道你的意思是[String.contains()](http://developer.android.com/reference/java/lang/String.html#contains%28java.lang.CharSequence%29)吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T12:55:48.980

你的`rangeOfString`用法大致相当于[`String#indexOf()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)

```
String result = "mobile - check balance | rate: 0.036";

if (result.indexOf("rate:") != -1) 
{

} 
```

但是你可以用 Java 更清楚地写出来[`String#contains()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)：

```
if (result.contains("rate:")) 
{

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:56:12.290

您需要使用`String.indexOf`然后将返回的值与您要查找的字符串的长度相结合。

该`indexOf`函数返回您传入的字符串的第一个字母的索引，以便可以将其视为您的“零”位置。

或者，正如马特鲍尔指出的那样，按照您使用它的方式，该`String.contains`方法将同样有效，即使不是稍微干净一些。

# jquery - jQuery 驱动菜单中的条件行为

> ID：11987534
> 
> 赞同：0
> 
> 时间：2012-08-16T12:51:34.067
> 
> 标签：jquery, conditional-statements

从我第一个问题开始的一天，我不敢说我​​回来了。不过这次遇到了不同的问题……

我有一个带有一些嵌套菜单的水平菜单，如下所示：

```
<nav>
    <ul id="mainNav">
        <li><a href="expand-the-sub-menu">Option 1</a>
            <ul id="option1Nav">
                <li><a href="somewhere">Option 1 Link 1</a></li>
                <li><a href="somewhere">Option 1 Link 2</a></li>
                <li><a href="somewhere">Option 1 Link 3</a></li>
                <li><a href="somewhere">Option 1 Link 4</a></li>
                <li><a href="somewhere">Option 1 Link 5</a></li>
            </ul>
        </li>
        <li><a href="expand-the-sub-menu">Option 2</a>
            <ul id="option2Nav">
                <li><a href="somewhere">Option 2 Link 1</a></li>
                <li><a href="somewhere">Option 2 Link 2</a></li>
                <li><a href="somewhere">Option 2 Link 3</a></li>
                <li><a href="somewhere">Option 2 Link 4</a></li>
                <li><a href="somewhere">Option 2 Link 5</a></li>
            </ul>
        </li>
        <li><a href="somewhere">Option 3</a></li>
        <li><a href="somewhere">Option 4</a></li>
        <li><a href="somewhere">Option 5</a></li>
        <li><a href="somewhere">Option 6</a></li>
    </ul>
</nav> 
```

[CraftyFella](https://stackoverflow.com/users/30317/craftyfella)[昨天](https://stackoverflow.com/questions/11970702/making-jquery-display-the-correct-sub-menu-when-present)帮助使基本行为正常工作，但我想对此进行扩展，以包括基于当前菜单状态的条件行为。

到目前为止的（注释）逻辑和代码如下：

```
$('#mainNav ul').hide();
$('#mainNav>li>a').click(function(){
    var elem = this;
    // If clicked element has a sibling ul with specified class
    if($(elem).next().hasClass("navChild")){

        // & If another child ul is already visible
        if ($('.navChild').is(':visible')){

            // Fade out any others, and fade this one in
            $(this).fadeOut(300, 'easeOutQuint', function(){
                $(elem).next("ul").fadeIn(300,'easeOutQuint');
            });
            return false;

        // Else if no child ul is visible
        }else{

            // Raise main links and fade in current child ul
            $('nav').animate({bottom:'60px'},300,'easeOutQuint',function(){
                $(elem).next().fadeIn(300,'easeOutQuint');
            });
        }

    // Else clicked element has no sibling ul with specified class
    }else{
        // If others are visible, fade them out and lower the main links
        $('#mainNav ul').fadeOut(300, 'easeOutQuint',function(){
            $('nav').animate({bottom:'24px'},300,'easeOutQuint');
        });
    }
}); 
```

简而言之：所有子菜单都应该被隐藏，如果作为点击的兄弟出现，它们应该被显示/交换，或者如果不是，则全部隐藏。

可悲的是，它不太有效，除了“交换”部分之外它几乎可以 - 如果一个子菜单已经可见，并且另一个被触发显示，两者最终都被显示，并且被点击的元素消失了（！）。

它也可能是糟糕的代码——我对此仍然很陌生——但如果有人可以帮助处理逻辑部分，我可以稍后再清理。

编辑 - [http://jsfiddle.net/hKYJz/1/](http://jsfiddle.net/hKYJz/1/) - 现在奇怪的是根本不工作>:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:02:58.177

尝试使用这个来实现

```
$('#mainNav ul').hide();
$('#mainNav>li').click(function(event){
    event.preventDefault();
       $('#mainNav ul').fadeOut(300);
    $(this).find('ul').fadeIn(300);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:52:08.783

试试这个：

```
$('#mainNav ul').hide();
$('#mainNav>li').click(function(event){
    event.preventDefault();
    var elm = this;
    $('nav').animate({
                bottom:'60px',
                duration:300,
                easing:'easeOutQuint'
            },function(){  
                    $(elm).find('ul').fadeIn(300);
            });
    $('#mainNav ul').fadeOut(300);
}); 
```

这是 JSFiddle：http: [//jsfiddle.net/hKYJz/35/](http://jsfiddle.net/hKYJz/35/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:30:54.847

设法让它最终工作。感谢那些做出贡献的人——如果没有你的帮助，我几乎可以肯定现在仍然被困住。

[http://jsfiddle.net/hKYJz/47/](http://jsfiddle.net/hKYJz/47/)

# css - 了解如何使用 CSS 正确排列元素

> ID：11987540
> 
> 赞同：1
> 
> 时间：2012-08-16T12:51:51.373
> 
> 标签：css, css-float, position

我正在努力成为一名后端 Web 开发人员。但是如果有一天我需要它，学习一点 CSS 只是为了把它放在我的工具箱中。

我知道 CSS 属性和东西。我真正“吸”的只是在 CSS 中排列元素。我真的浪费了很多时间试图弄清楚为什么这个元素会以这种奇怪的方式表现，或者如何让那个元素向左移动，或者如何按照我的想法对齐元素。

我不想花太多时间学习它，因为我正在朝着我将要专攻的方向前进。因此，如果有关于使用`floats`或`position`属性或任何其他好的技术来安排元素的视频或速成课程实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:01:40.110

没有视频，但有另外两个建议：

1) 你应该花一点时间（也许几个小时）来习惯[CSS 盒子模型](http://www.w3schools.com/css/css_boxmodel.asp)。*准确*了解 CSS 的工作原理是值得的。fa（你知道，几个小时的尝试可以节省你几分钟阅读正在发生的事情;-)）

2) 为自己准备一个合适的工具（我推荐[Firebug](http://getfirebug.com/) for Firefox）并“实时”使用你最喜欢的页面的 CSS 属性。习惯这个话题非常方便和高效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:04:12.080

我通过下载一些可用的免费模板开始尝试**CSS 。**只需尝试在 Google 中搜索。有很多。

**[从头开始创建 CSS 布局](http://www.subcide.com/articles/creating-a-css-layout-from-scratch/)**是开始您的旅程的好地方。您可以通过阅读**[W3Schools](http://www.w3schools.com/css/)**的 SIMPLE 入门级教程来理解 CSS 。

你可以看看**[CSS Layouts: 40+ Tutorials, Tips, Demos and Best Practices](http://www.noupe.com/css/css-layouts-40-tutorials-tips-demos-and-best-practices.html)**来获得一些灵感并自己开发一些想法。

您也可以尝试一些 CSS 软件，例如**[Westciv Style Master](http://www.westciv.com/style_master/)**和**[Top Style](http://www.topstyle4.com/)**（但它们不是免费的）。westciv 站点中的**[资源](http://westciv.com/style_master/house/index.html)**部分对初学者非常有帮助。它有指南、工具、教程等。您也可以在他们的网站上查看**[完整的 css 指南。](http://www.westciv.com/style_master/academy/css_tutorial/)**

最后，您可以借助**[11 个有用的在线工具来体验 CSS，以实现更好的 CSS 开发](http://webdesignledger.com/tools/11-useful-online-tools-for-better-css-development)**

**希望这可以帮助。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T12:58:41.190

我通过学习其他人的 CSS 并使用 firebug 尝试各种方式来快速学习 css ......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T13:03:19.210

[我在W3Schools](http://www.w3schools.com/css/default.asp)、本网站上的问题和 Google 搜索之间学习了大部分 CSS 知识。

老实说，吸收任何真正知识的唯一方法就是实际使用你所学的东西。就像如果你只听说过走路的样子你可能无法走路一样，如果你不练习你所从事的工作，你可能不会发展成为一名优秀的 CSS 编码器（或任何类型的编码器）的技能'正在学习。

这就是我喜欢 W3Schools 的原因，因为他们将示例放入教程中，让您练习他们试图向您展示的内容。

很好的定位参考： [http ://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

良好的浮动参考： [http ://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

# sql - SQL 查询帮助 - 在同一列上使用 max() 两次

> ID：11987542
> 
> 赞同：0
> 
> 时间：2012-08-16T12:51:55.900
> 
> 标签：sql

我试着四处寻找这个，但老实说，我不太确定要搜索什么……所以如果之前有人问过这个问题，请耐心等待。

我有一个表，其中包含这样的事件列表：

```
Date      Event 
-----     ------
1/1/2012  Event1
1/2/2012  Event1
1/4/2012  Event2
1/6/2012  Event1
etc. 
```

我想要做的是在这个表上做一个选择，返回最近`Event1`发生的日期和最近发生的日期`Event2`。因此，以上表为例，我希望看到以下结果：

```
Event 1      Event2
-------      ------
1/6/2012     1/4/2012 
```

关于如何实现这一目标的任何想法？我知道如何单独获取这些值

```
SELECT max(date) FROM table WHERE Event LIKE 'Event1' 
```

只是没有在一起作为一个结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:53:58.173

您可以在函数中使用`CASE`语句`MAX()`。

```
SELECT MAX(CASE WHEN event = 'Event1' THEN date END) Event1, 
    MAX(CASE WHEN event = 'Event2' THEN date END) Event2
FROM yourTable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ce135/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:58:54.207

对列上的任何值尝试此查询`event`：

```
select MAX(date), event
from events_table
group by event; 
```

# sql - 使用相互依赖的函数更新 SQL Server 表

> ID：11987549
> 
> 赞同：1
> 
> 时间：2012-08-16T12:52:10.527
> 
> 标签：sql, sql-server

在 SQL Server 中有以下更新语句：

```
UPDATE MY_TABLE
SET COLUMN1 = FN_GETFIRSTVALUE(T.VALUE1),
    COLUMN2 = FN_GETSECONDVALUE(T.VALUE1, T.COLUMN1)
FROM MY_TABLE AS T
INNER JOIN ... 
```

所以`FN_GETSECONDVALUE`接受一个从 . 返回的输入参数`FN_GETFIRSTVALUE`。我考虑过使用[表函数](http://www.codeproject.com/Articles/167399/Using-Table-Valued-Functions-in-SQL-Server)......但我看不出如何用它更新两列。还有另一种/更好的方法吗？我不想调用该函数两次，或者将其拆分为选择/更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:14:37.660

您的示例的最小更改如下...

```
UPDATE
  MY_TABLE
SET
  COLUMN1 = FN_GETFIRSTVALUE(T.VALUE1),
  COLUMN2 = FN_GETSECONDVALUE(T.VALUE1, FN_GETFIRSTVALUE(T.VALUE1))
FROM
  MY_TABLE AS T
INNER JOIN
  ... 
```

SQL Server 擅长重用结果，因此第一个函数不一定会执行两次。但是，即使两次编写对函数的调用仍然有点混乱。

相反，您可以使用自己编写重用`APPLY`...

```
UPDATE
  MY_TABLE
SET
  COLUMN1 = first_result.val,
  COLUMN2 = second_result.val
FROM
  MY_TABLE AS T
OUTER APPLY
  (SELECT dbo.FN_GETFIRSTVALUE(T.VALUE1) AS val)          AS first_result
OUTER APPLY
  (SELECT dbo.FN_GETSEOCNDVALUE(first_result.val) AS val) AS second_result
INNER JOIN
  ... 
```

更好的是，您可以将函数重写为表值函数。即使它只返回一个记录中的一个字段......

```
UPDATE
  MY_TABLE
SET
  COLUMN1 = first_result.val,
  COLUMN2 = second_result.val
FROM
  MY_TABLE AS T
OUTER APPLY
  dbo.FN_GETFIRSTVALUE(T.VALUE1)           AS first_result
OUTER APPLY
  dbo.FN_GETSEOCNDVALUE(first_result.val)  AS second_result
INNER JOIN
  ... 
```

在这两种情况下，如果将表值函数定义为内联函数*（仅单个查询）*，这比定义为多语句函数*（包括内部变量、IF 语句等）的情况**要*好得多。

 **最后，根据您的需要，您甚至可以将这两个功能包装成一个......

```
UPDATE
  MY_TABLE
SET
  COLUMN1 = result.val1
  COLUMN2 = result.val2
FROM
  MY_TABLE AS T
OUTER APPLY
  dbo.FN_GETBOTHVALUES(T.VALUE1)           AS result
INNER JOIN
  ... 
```

*（函数返回一条记录，其中包含 2 个字段，名为`val1`和`val2`。）*

所以，总而言之，你在这里有很多选择。这只是使用`APPLY`，还有其他选项与公用表表达式......

```
WITH
  step1 AS
(
  SELECT
    *,
    dbo.FUNCTION1(T.column1) AS result1
  FROM
    MY_TABLE AS T
  INNER JOIN
    ...
)
,
  step2 AS
(
  SELECT
    *,
    dbo.FUNCTION2(T.result1) AS result2
  FROM
    step1
)

UPDATE
  step2
SET
  column1 = result1,
  column2 = result2 
```

这么多选择...**

# java - ORMLite JOIN 或 rawQuery 自动映射

> ID：11987552
> 
> 赞同：8
> 
> 时间：2012-08-16T12:52:24.777
> 
> 标签：java, android, orm, ormlite

我正在寻找一种方法来进行需要 JOIN 的查询。有没有办法在准备好的声明中做到这一点，或者是`rawQuery`我唯一的选择。如果`rawQuery`是唯一的选择，那么是否有某种方法可以自动将返回的对象映射到正在实现的 Dao 的对象。

我翻阅了文档和示例，但找不到任何可以让我将原始数据库结果映射到 ORM 对象类的内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T19:12:54.277

> 我正在寻找一种方法来进行需要 JOIN 的查询。

ORMLite 支持[简单的 JOIN 查询](http://ormlite.com/docs/join-queries)。您也可以使用[原始查询](http://ormlite.com/docs/raw-queries)来完成此操作。

您可以使用`Dao.getRawRowMapper()`映射您找到的查询，也可以创建自定义映射器。该文档具有以下示例代码，显示了如何将其映射`String[]`到您的对象中：

```
GenericRawResults<Foo> rawResults =
  orderDao.queryRaw(
    "select account_id,sum(amount) from orders group by account_id",
    new RawRowMapper<Foo>() {
            public Foo mapRow(String[] columnNames,
              String[] resultColumns) {
                return new Foo(Long.parseLong(resultColumns[0]),
                    Integer.parseInt(resultColumns[1]));
        }
    }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T18:25:12.043

我找到了一种将结果集自动映射到模型对象的方法。

```
// return the orders with the sum of their amounts per account
GenericRawResults<Order> rawResults = 
    orderDao.queryRaw(query, orderDao.getRawRowMapper(), param1)

// page through the results
for (Order order : rawResults) {
  System.out.println("Account-id " + order.accountId + " has "
    + order.totalOrders + " total orders");
}

rawResults.close(); 
```

关键是使用 将行映射器从您的对象中拉出`Dao`，`getRawRowMapper()`它将为您处理映射。我希望这对找到它的人有所帮助。

我仍然希望能够在其中进行连接，`QueryBuilder`但在得到支持之前，我认为这是下一个最好的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-26T09:47:16.540

**原始查询自动映射**

我遇到了从自定义 SELECT 映射字段的问题，这些字段返回任何表模型中都不存在的列。所以我做了自定义`RawRowMapper`，可以将自定义查询中的字段映射到自定义模型。当您的查询具有不对应于任何表映射模型的字段时，这很有用。

这是执行查询自动映射的**RowMapper ：**

```
public class GenericRowMapper<T> implements RawRowMapper<T> {

private Class<T> entityClass;
private Set<Field> fields = new HashSet<>();
private Map<String, Field> colNameFieldMap = new HashMap<>();

public GenericRowMapper(Class<T> entityClass) {
    this.dbType = dbType;
    this.entityClass = entityClass;
    Class cl = entityClass;
    do {
        for (Field field : cl.getDeclaredFields()) {
            if (field.isAnnotationPresent(DatabaseField.class)) {
                DatabaseField an = field.getAnnotation(DatabaseField.class);
                fields.add(field);
                colNameFieldMap.put(an.columnName(), field);
            }
        }
        cl = cl.getSuperclass();
    } while (cl != Object.class);
}

@Override
public T mapRow(String[] columnNames, String[] resultColumns) throws SQLException {
    try {
        T entity = entityClass.newInstance();
        for (int i = 0; i < columnNames.length; i++) {
            Field f = colNameFieldMap.get(columnNames[i]);
            boolean accessible = f.isAccessible();
            f.setAccessible(true);
            f.set(entity, stringToJavaObject(f.getType(), resultColumns[i]));
            f.setAccessible(accessible);
        }
        return entity;
    } catch (InstantiationException e) {
        throw new RuntimeException(e);
    } catch (IllegalAccessException e) {
        throw new RuntimeException(e);
    }
}

public Object stringToJavaObject(Class cl, String result) {
    if (result == null){
        return null;
    }else if (cl == Integer.class || int.class == cl) {
        return Integer.parseInt(result);
    } else if (cl == Float.class || float.class == cl) {
        return Float.parseFloat(result);
    } else if (cl == Double.class || double.class == cl) {
        return Double.parseDouble(result);
    } else if (cl == Boolean.class || cl == boolean.class) {
        try{
            return Integer.valueOf(result) > 0;   
        }catch (NumberFormatException e){
            return Boolean.parseBoolean(result); 
        }
    } else if (cl == Date.class) {
        DateLongType lType = DateLongType.getSingleton();
        DateStringType sType = DateStringType.getSingleton();
        try {
            return lType.resultStringToJava(null, result, -1);
        } catch (NumberFormatException e) {
            try {
                return sType.resultStringToJava(null, result, -1);
            } catch (SQLException e2) {
                throw new RuntimeException(e);
            }
        }
    } else {
        return result;
    }
}
} 
```

这是**用法**：

```
class Model{
   @DatabaseField(columnName = "account_id")
   String accId;
   @DatabaseField(columnName = "amount")
   int amount;
}

String sql = "select account_id,sum(amount) amount from orders group by account_id"
return queryRaw(sql,new GenericRowMapper<>(Model.class)).getResults() 
```

如果查询列名称和相同，这将返回`List<Model>`映射结果行到模型`@DatabaseField(columnName`

# jquery - 获取元素的子标记名

> ID：11987553
> 
> 赞同：5
> 
> 时间：2012-08-16T12:52:30.433
> 
> 标签：jquery

我想获取元素的子标签名称。

HTML：

```
<div class="element">
    <h1>title</h1>
</div>
<div class="element">
    <img src="http://2.bp.blogspot.com/-ma66w8WJsZ0/UBVcmt3XS4I/AAAAAAAAAWw/4UyVd2eR8A0/s1600/olympic-logo.thumbnail.jpg" />
</div>
<div id="debugger"></div> 
```

​ jQuery：

```
$(".element").bind("click", function(){

    var child = $(this).add("first-child").prop("tagName");

    $("#debugger").html(child);

});​ 
```

我不明白为什么我总是得到 DIV 作为结果......

谢谢你。

[http://jsfiddle.net/8Xg3G/2/](http://jsfiddle.net/8Xg3G/2/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T12:55:43.927

```
$(this).children()[0].tagName 
```

***或者***

```
$(this).children().first().prop('tagName'); 
```

`.add()`用于向 jQuery 对象数组添加新元素，但您正在尝试获取现有元素的标签名称。所以，你需要一些getter方法。

* * *

***使用 JavaScript***

```
this.firstChild.tagName 
```

**或者**

```
this.childNodes[0].tagName 
```

* * *

***完整代码***

```
$(".element").bind("click", function(){
    var child = $(this).children().first().prop('tagName');
    $("#debugger").html(child);
}); 
```

**[演示](http://jsfiddle.net/8Xg3G/8/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T12:55:50.213

`.add`将向当前 jQuery 集合添加一个元素，在本例中为`$(this)`. `$(this)`包含`div`, 并且当您运行 时`.prop('tagName')`，jQuery 返回集合中第一个元素的标签名称，因此您会得到“div”作为结果。

请尝试`.children`：

```
var child = $(this).children().eq(0).prop("tagName"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T12:56:41.417

尝试：

```
var child = $(this).children(":first"); 
```

这将获得 的第一个孩子`this`。

很确定`.prop('tagName')`只适用于 jQuery 1.6+。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T12:56:58.953

您可以使用对象的`target`属性`event`，尝试以下操作：

```
$(".element").bind("click", function(event){
    var target = event.target.localName; // or event.target.tagName;
    $("#debugger").html(target);
}); 
```

[小提琴](http://jsfiddle.net/8Xg3G/7/)

# javascript - 重新加载时网格分页栏未更新

> ID：11987558
> 
> 赞同：0
> 
> 时间：2012-08-16T12:52:44.697
> 
> 标签：javascript, extjs, extjs3

删除当前页面中的数据后，我必须刷新网格。但是分页栏没有刷新，当前页面没有改变。我使用了以下代码，

```
 grid.getStore().reload(); 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:21:08.260

商店的重新加载方法“使用传递给加载方法的最后一个选项重新加载商店。” 您可以传递包含选项的对象，这些选项可能会覆盖传递给先前加载调用的选项。

参考：[Ext.data.Store-method-reload](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-reload)

尝试 ：`grid.store.reload({params:{start:0,limit:10}})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:43:20.310

以编程方式调用分页工具栏的刷新按钮..

```
grid.getDockedItems('pagingtoolbar')[0].doRefresh(); 
```

# android - 如何使用一些预定义的 time_interval 自动从 ImageView 中的 url 更改图像？

> ID：11987559
> 
> 赞同：0
> 
> 时间：2012-08-16T12:52:46.770
> 
> 标签：android, ui-thread

这是我的主要课程：

$ `public class MainActivity 扩展 Activity 实现 Runnable {

```
ImageView im1,im2,im3;
int b,p=0,j,k,l;
String b1 ;
Bitmap img;
Bitmap bm;
ArrayList<String> arl = new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    im1 = (ImageView)findViewById(R.id.imageView1);
    im2 = (ImageView)findViewById(R.id.imageView2);
    im3 = (ImageView)findViewById(R.id.imageView3);

    arl.add("http://dev.purpletab.com/files/jewels/original/Jewel_1344148107.png");
    arl.add("http://dev.purpletab.com/files/jewels/original/Jewel_1332428944.png");
    arl.add("http://dev.purpletab.com/files/jewels/original/Jewel_1341902610.png");

    while(p<1)
    {
      for(j=0;j<3;j++)
      {

        Bitmap bitmap1 = DownloadImage(arl.get(j));
        Log.e("image of j : ", ""+bitmap1);
        im1.setImageBitmap(bitmap1);
        delay();

        k=j+1;
        if(k==3)
            k=0;
        Bitmap bitmap2 = DownloadImage(arl.get(k));
        Log.e("image of k : ", ""+bitmap2);
        im2.setImageBitmap(bitmap2);
        delay();

        l=k+1;
        if(l==3)
            l=0;
        Bitmap bitmap3 = DownloadImage(arl.get(l));
        Log.e("image of l : ", ""+bitmap3);
        im3.setImageBitmap(bitmap3);
        delay();

      }         
    p++;
    }
}
private void delay()
{
     Thread t = new Thread()
     {
        public void run() 
        {
             Log.e("entered thread", " entered run method");

             try
                    {
                        Log.e("entered for loop ", "loop : ");
                        Thread.sleep(10000);
                    }
                catch(Exception e)
                    {
                    Log.e("thread error", ""+e);
                    }

        }

     };
     t.start();
     Log.e("started thread", ""+t);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private Bitmap DownloadImage(String URL)
{        
    Log.e("bitmap d/l",""+URL);
    Bitmap bitmap = null;
    InputStream in = null;        
    try 
    {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in);
         Log.e("downloaded images ", " images ");
        in.close();
    } 
    catch (IOException e1) 
    {
        e1.printStackTrace();
         Log.e("started thread", ""+e1);
    }
    return bitmap;                
}

private InputStream OpenHttpConnection(String urlString)throws IOException
{
    InputStream in = null;
    int response = -1;

    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();

    if (!(conn instanceof HttpURLConnection))throw new IOException("Not an HTTP connection");

    try
    {
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();
        response = httpConn.getResponseCode();                
        if (response == HttpURLConnection.HTTP_OK) 
        {
            in = httpConn.getInputStream();  
             Log.e("download in progress", " . . . ");
        }
        else if(response != HttpURLConnection.HTTP_OK)
        {
            //ProfileImgPreview.setBackgroundResource(R.drawable.photo_bg);
        }
    }
    catch (Exception ex)
    {
        throw new IOException("Error connecting");            
    }
    return in;    
}
@Override
public void run() {
     Log.e("started the other thread", "not defined");

} 
```

}`

这是我的布局代码：

$`

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="150dp"
    android:layout_height="150dp"
    android:layout_centerHorizontal="true"
    android:layout_alignParentTop="true"
    android:contentDescription="@string/app_name"
    android:src="@drawable/a0"/>

 <ImageView
    android:id="@+id/imageView2"
    android:layout_width="150dp"
    android:layout_height="150dp"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/imageView1"
    android:contentDescription="@string/app_name"
    android:src="@drawable/a1"/>

  <ImageView
    android:id="@+id/imageView3"
    android:layout_width="150dp"
    android:layout_height="150dp"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/imageView2"
    android:contentDescription="@string/app_name"
    android:src="@drawable/a2"/> 
```

`

因此，当我运行此代码时，仅查看最后一张图像，并且图像不会根据给定的延迟而改变。我的意思是最后的图像被加载为静态图像，但我需要它作为动画视图。有人可以回答我吗？

先感谢您 。. . . .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:00:07.070

您的延迟函数对延迟 onCreate 没有任何作用，它只是在后台启动一个线程，它什么都不做。onCreate 只是继续在其线程（您的应用程序主 ui 线程）上运行。

延迟某些操作的正确方法是`postDelayed`在 ImageView 上调用函数：

```
im1.postDelayed(new Runnable() {
    public void run() {
        //Code to change image
    }
}, 5000); 
```

# mysql - 使用 IN 子查询时查询不使用索引

> ID：11987564
> 
> 赞同：0
> 
> 时间：2012-08-16T12:52:56.303
> 
> 标签：mysql

当有索引时，您会注意到主查询没有使用 school_id 上的索引。如果我删除子查询并使用硬编码列表，它将使用索引。

```
mysql> explain SELECT year, race, CONCAT(percent,'%') as percent
    -> FROM school_data_race_ethnicity as school_data_race_ethnicity_outer
    -> WHERE school_id IN(
    -> SELECT field_school_id_value 
    -> FROM field_data_field_school_id 
    -> WHERE entity_id IN (SELECT entity_id 
    -> FROM field_data_field_district 
    -> WHERE field_district_nid = 
    -> (SELECT entity_id FROM field_data_field_district_id
    -> WHERE `field_district_id_value` = 26130106 LIMIT 1))
    -> ) ORDER BY year DESC, race;
+----+--------------------+----------------------------------+----------------+------------------------------+-----------+---------+------+-------+-----------------------------+
| id | select_type        | table                            | type           | possible_keys                | key       | key_len | ref  | rows  | Extra                       |
+----+--------------------+----------------------------------+----------------+------------------------------+-----------+---------+------+-------+-----------------------------+
|  1 | PRIMARY            | school_data_race_ethnicity_outer | ALL            | NULL                         | NULL      | NULL    | NULL | 97116 | Using where; Using filesort |
|  2 | DEPENDENT SUBQUERY | field_data_field_school_id       | ALL            | NULL                         | NULL      | NULL    | NULL |  5325 | Using where                 |
|  3 | DEPENDENT SUBQUERY | field_data_field_district        | index_subquery | entity_id,field_district_nid | entity_id | 4       | func |     1 | Using where                 |
|  4 | SUBQUERY           | field_data_field_district_id     | ALL            | NULL                         | NULL      | NULL    | NULL |   685 | Using where                 |
+----+--------------------+----------------------------------+----------------+------------------------------+-----------+---------+------+-------+-----------------------------+
4 rows in set (0.00 sec)

mysql> describe school_data_race_ethnicity
    -> ;
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| id        | int(11)      | NO   | PRI | NULL    | auto_increment |
| school_id | varchar(255) | NO   | MUL | NULL    |                |
| year      | int(11)      | NO   | MUL | NULL    |                |
| race      | varchar(255) | NO   |     | NULL    |                |
| percent   | decimal(5,2) | NO   |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
5 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:59:36.467

使用with子句`INNER JOIN`代替子查询：`IN`

```
explain SELECT year, race, CONCAT(percent,'%') as percent
FROM school_data_race_ethnicity a
    INNER JOIN(
    SELECT field_school_id_value
    FROM field_data_field_school_id b
         INNER JOIN (SELECT entity_id
                     FROM field_data_field_district
                     WHERE field_district_nid =
                    (SELECT entity_id FROM field_data_field_district_id
                    WHERE `field_district_id_value` = 26130106 LIMIT 1)) c
         ON b. entity_id = c.entity_id
     ) d
    ON a.school_id = d.field_school_id_value
ORDER BY year DESC, race; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:59:25.230

服务器可能正在跳过索引搜索，因为它无法确定列表中实际有多少项目。想法是，由于它对子查询中的项目数量没有很好的估计，因此它将选择最保守的方法并进行扫描（可能）。

我建议改用 JOIN 重写查询：

```
SELECT DISTINCT o.year, o.race, CONCAT(o.percent,'%') as percent
FROM school_data_race_ethnicity as o
INNER JOIN field_data_field_school_id s
    ON s.field_school_id_value = o.school_id
INNER JOIN field_data_field_district  d
    ON d.entity_id = s.entity_id 
WHERE field_district_nid = (
    SELECT entity_id 
    FROM   field_data_field_district_id
    WHERE `field_district_id_value` = 26130106 LIMIT 1))
ORDER BY o.year DESC, o.race; 
```

# c# - 显示在图表窗格之外的文本

> ID：11987567
> 
> 赞同：1
> 
> 时间：2012-08-16T12:53:21.140
> 
> 标签：c#, zedgraph

有没有办法不在图形窗格中显示对象，如下图所示？

![ZedGraph 截图](../Images/1747599f787c0465126f27a44f55be76.png)

我`GraphPane.AddCurve()`用来添加曲线和`GraphPane.GraphObjList.Add(new TextObj(...))`添加文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:58:49.000

为了做到这一点，我认为您必须创建一个新的 TextObj 以便您可以修改“IsClippedToChartRect”属性。

```
ZedGraph.TextObj text = new ZedGraph.TextObj("Hello", xloc, yloc);

text.IsClippedToChartRect = true; 
```

# c# - WPF 调度程序问题

> ID：11987572
> 
> 赞同：0
> 
> 时间：2012-08-16T12:53:36.617
> 
> 标签：c#, wpf, c#-4.0, asynchronous

我正在尝试更新我的应用程序以使用 WPF 而不是 WinForms 并且有一个问题我需要一些指针，因为我无法弄清楚出了什么问题......

下面的代码来自我的 Winform 应用程序，它运行良好

```
private delegate void LoginAsyncCallbackDelegate(IAsyncResult result);
private void LoginAsyncCallback(IAsyncResult result)
{
    if (this.InvokeRequired)
    {
        try
        {
            LoginAsyncCallbackDelegate d = new LoginAsyncCallbackDelegate(LoginAsyncCallback);
            this.Invoke(d, new object[] { result });
        }
        catch (Exception ex)
        {
            AddErrorToList(ex.ToString());
        }
    }
    else
    {
        DRVis.upx.api.global.LoginResp resp = APIWrapper.UPGlobalService.Endlogin(result);

        var state = (CustomAsyncStateContainer)result.AsyncState;

        // Session manager
        if (resp != null && resp.header != null && resp.header.sessionToken != null)
            SessionTokenManager.ReturnSessionToken(resp.header.sessionToken);

        DisplayLogin(resp, state);
    }
} 
```

以下是我为使其在 WPF 中工作而进行的更改，但**如果 (!this.Dispatcher.CheckAccess())应用程序在线崩溃**

```
private delegate void LoginAsyncCallbackDelegate(IAsyncResult result);
private void LoginAsyncCallback(IAsyncResult result)
{
    if (!this.Dispatcher.CheckAccess()) //Progam Crashes here!!
    {
        try
        {
            LoginAsyncCallbackDelegate d = new LoginAsyncCallbackDelegate(LoginAsyncCallback);
            this.Dispatcher.Invoke(DispatcherPriority.Normal, d, new object[] { result });
        }
        catch (Exception ex)
        {
            AddErrorToList(ex.ToString());
        }
    }
    else
    {
        DRVis.upx.api.global.LoginResp resp = APIWrapper.UPGlobalService.Endlogin(result);

        var state = (CustomAsyncStateContainer)result.AsyncState;

        // Session manager
        if (resp != null && resp.header != null && resp.header.sessionToken != null)
            SessionTokenManager.ReturnSessionToken(resp.header.sessionToken);

        DisplayLogin(resp, state);
    }
} 
```

带有堆栈跟踪....

```
The error time: 16/08/2012 13:06
Exception: System.ArgumentException: Object of type 'System.Object[]' cannot be converted to type 

'System.IAsyncResult'.
   at System.RuntimeType.TryChangeType(Object value, Binder binder, CultureInfo culture, Boolean needsSpecialCast)
   at System.RuntimeType.CheckValue(Object value, Binder binder, CultureInfo culture, BindingFlags invokeAttr)
   at System.Reflection.MethodBase.CheckArguments(Object[] parameters, Binder binder, BindingFlags invokeAttr, 

CultureInfo culture, Signature sig)
   at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, 

Object[] parameters, CultureInfo culture)
   at System.Delegate.DynamicInvokeImpl(Object[] args)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 

numArgs, Delegate catchHandler) 
```

有人可以帮助我获得正确的语法来替换 WPF 中的 this.InvokeRequired 和 this.Invoke 或指出我缺少的明显内容吗？

谢谢哦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:18:58.903

```
this.Dispatcher.Invoke(DispatcherPriority.Normal, d, new object[] { result }); 
```

应该 ：

```
this.Dispatcher.Invoke(DispatcherPriority.Normal, d, result); 
```

?

# c# - 如何生成新的会话 ID

> ID：11987579
> 
> 赞同：22
> 
> 时间：2012-08-16T12:54:06.833
> 
> 标签：c#, asp.net, session, sessionid

**是否可以使用 ASP.NET 为会话生成新 ID？**

我希望在我设置初始会话变量之前有人登录我的网站时更改它。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-16T13:00:19.070

您可以使用[SessionIdManager](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.aspx)类执行此操作：

```
SessionIDManager manager = new SessionIDManager();

string newID = manager.CreateSessionID(Context);
bool redirected = false;
bool isAdded = false;
manager.SaveSessionID(Context, newID, out redirected, out isAdded); 
```

[代码示例来自[Anas Ghanem 的文章]](http://weblogs.asp.net/anasghanem/archive/2008/12/16/programmatically-changing-the-session-id.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T12:59:12.567

您可以使用

[**`SessionIDManager.CreateSessionID Method :`**](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.createsessionid.aspx)返回一个唯一的会话标识符，它是一个随机生成的数字，编码为 24 个字符的字符串。

代码

```
SessionIDManager Manager = new SessionIDManager(); 
string NewID = Manager.CreateSessionID(Context); 
string OldID = Context.Session.SessionID;
bool redirected = false;
bool IsAdded = false;
Manager.SaveSessionID(Context, NewID,out redirected, out IsAdded); 
```

在这里您可以找到有关 hsi 的完整详细信息：[以编程方式更改会话 ID。](http://weblogs.asp.net/anasghanem/archive/2008/12/16/programmatically-changing-the-session-id.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T13:06:35.217

是的，可以为会话生成新 ID。下面是一个例子

```
SessionState.SessionIDManager Manager = new SessionState.SessionIDManager(); 
string NewID = Manager.CreateSessionID(Context); 
string OldID = Context.Session.SessionID; 

bool IsAdded = false; 
Manager.SaveSessionID(Context, NewID, false, IsAdded); 

Response.Write("Old SessionId Is : " + OldID); 
if (IsAdded) { 
    Response.Write("&lt;br/> New Session ID Is : " + NewID); 
} 
else { 
    Response.Write("&lt;br/> Session Id did not saved : "); 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-28T23:22:57.610

ASP.Net 会话管理基础结构不公开在处理请求期间更改会话 ID 的受支持方式。如果编写受支持的代码对您很重要，那么接受的答案有几件事情需要注意。

*   两者`CreateSessionID`都[标记为](https://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.savesessionid(v=vs.110).aspx)`SaveSessionID`“此方法不打算从应用程序代码中调用”。
*   SessionID 提供者是一种可插入类型（参见例如[实现自定义 SessionIDManager](https://stackoverflow.com/questions/4612310/implementing-a-custom-sessionidmanager)），因此至少您需要实例化正确的类型。
*   附加到 的会话状态`HttpContext`将保持与初始会话 ID 相关联，因此您放入会话状态包中的任何内容都将丢失。因为一旦你改变了你的 id，你就无法对会话做任何事情，所以以这种方式改变你的 id 是没有意义的。

不幸的是，没有往返的支持方式来做到这一点。您需要做的是在生成登录表单时擦除会话状态 cookie。当用户提交表单返回时，框架将调用`SessionIDManager`生成一个新表单。正确擦除会话 cookie 比大多数代码示例显示的要复杂一些。cookie 名称是 web.config 中可配置的另一个参数。您需要通过访问属性从配置中读取它：

```
((System.Web.Configuration.SessionStateSection)ConfigurationManager.GetSection("system.web/sessionState")).CookieName 
```

会话 id cookie 不限于应用程序，因此如果在同一台服务器上安装了两个应用程序，通常希望它们使用不同的 cookie 名称，因此这比您想象的更普遍。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T13:00:46.607

我认为这与安全有关？a `Session.Clear()`or`Session.Abandon()`对你有用吗？ 这是与这些方法相关[的一个很好的 SO 链接。](https://stackoverflow.com/questions/1470445/what-is-the-difference-between-session-abandon-and-session-clear)

否则，这很困难，因为 ASP.NET 会话 cookie 已经在用户的浏览器上。您可能不相信会话确实发生了变化。

# sql-server - SQL Server 按查询排序

> ID：11987584
> 
> 赞同：0
> 
> 时间：2012-08-16T12:54:30.883
> 
> 标签：sql-server, stored-procedures

我有两张桌子叫`Listing`和`ListingProperties`

```
Listing (ID, CurrentPrice)          
ListingProperties (id, listingId, Fixedprice) 
```

问题是我想按`Fixedprice`. 但有些列表没有`Fixedprice`.

在这种情况下，我想检查当前价格并与其他价格进行比较，`Fixedprice`然后订购。

清单

```
id name currentprice
1  a      10
2  b       50
3  c       40 
```

列出属性

```
id listingId  Fixedprice
1       1        20
2       3        30 
```

订购后所需的顺序是

```
name
a
c
b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:00:42.270

试试这个：

```
SELECT Name
FROM Listing l
LEFT JOIN ListingProperties lp ON l.id=lp.listingid
ORDER BY ISNULL(lp.FixedPrice, l.currentprice) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:03:49.630

你的问题不清楚，但我会尝试猜测。

1）你必须加入你的桌子：

```
SELECT <fields here>
FROM Listing L
LEFT JOIN ListingProperties LP
ON L.ID = LP.ListingId 
```

此查询假定您在 ListingProperties 中没有 ListingId 的 REPEATED VALUES。如果您确实有多个值，则必须指定优先标准来决定要显示哪个 FixedPrice。

2) 一旦你有了连接查询，你必须使用 CASE statetemnt 在当前和固定之间进行选择。Tis 假设您在列表中为您要列出的每个项目至少有一条记录。如果你没有至少一个，你将不得不做一些其他的技巧。

```
SELECT CASE WHEN L.CurrentPrice IS NULL THEN LP.FicedPrice ELSE L.CurrentPrice END 
FROM Listing L
LEFT JOIN ListingProperties LP
ON L.ID = LP.ListingId
ORDER BY CASE WHEN L.CurrentPrice IS NULL THEN LP.FicedPrice ELSE L.CurrentPrice END 
```

# perl - 在 Perl 中，我可以在 Excel 工作表而不是文本文件中创建我的数据。并使用字符“|” 作为分隔符

> ID：11987585
> 
> 赞同：0
> 
> 时间：2012-08-16T12:54:32.200
> 
> 标签：perl, excel, filehandle

在 Perl 中，我可以在 Excel 工作表而不是文本文件中创建我的数据。并使用字符“|” 作为分隔符。我正在使用以下代码创建一个文本文件

`for(my $j = 0; $j < $num2; $j++) { print {$out} $destination[$j]|$IP_one_1[$j]|$IP_one_2[$j]|$IP_one_3[$j]|$IP_one_4[$j]|$reached[$j]|$IP_two_1[$j]|$IP_two_2[$j]|$IP_two_3[$j]|$IP_two_4[$j]\n";`

在 Perl 中，我可以在 Excel 工作表而不是文本文件中创建我的数据。并使用字符“|” 作为分隔符，表达式`{$out}`由我之前定义的文件名组成，它读作`open my $out,'>', "$file.rec" or die $!;`

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:57:10.057

> 在 Perl 中，我可以在 Excel 工作表而不是文本文件中创建我的数据。

是的，[`Spreadsheet::WriteExcel`](https://metacpan.org/module/Spreadsheet%3a%3aWriteExcel)这是事实上的标准模块。

> 并使用字符“|” 作为分隔符。

不可以。如果你想写一个 Excel 文件，你必须使用 Excel 文件格式。

# r - 从R中的时间序列中提取月份平均值

> ID：11987588
> 
> 赞同：1
> 
> 时间：2012-08-16T12:54:38.407
> 
> 标签：r, time-series, mean

我有以下格式的一些数据：

```
 date     x     
    2001/06  9949 
    2001/07  8554  
    2001/08  6954 
    2001/09  7568 
    2001/10 11238  
    2001/11 11969 
    ... more rows 
```

我想提取每个月的 x 平均值。我尝试了一些聚合代码，但失败了。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:24:17.367

在这里，我模拟了一个`df`用更多数据调用的数据框：

```
df <- data.frame( 
      date = apply(expand.grid(2001:2012,1:12),1,paste,collapse="/"),
      x = rnorm(12^2,1000,1000),
      stringsAsFactors=FALSE) 
```

使用`date`构造向量的方式，您可以通过删除前四位数字后跟正斜杠来获得月份。在这里，我将其用作索引变量`tapply`来计算均值：

```
with(df, tapply(x, gsub("\\d{4}/","",date), mean)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:07:47.240

对不起...只是创建一个月序列向量然后使用tapply。这很容易：

```
m.seq = rep(c(6:12, 1:5), length = nrow(data))
m.means = tapply(data$x, m.seq, mean) 
```

但无论如何感谢您的评论！

# php - 根据选择的类别更改标题背景

> ID：11987590
> 
> 赞同：1
> 
> 时间：2012-08-16T12:54:41.837
> 
> 标签：php, css, background, header

我需要能够在不同类别的 cubecart v5 上更改标题背景。

So When for example Category 1 is selected I need header background to change to cat1.jpg and for it to stay the same when a product is selected. 每个类别都需要这样做。

这是类别网址的外观

```
index.php?_a=category&cat_id=1 
```

这就是产品网址的外观

```
index.php?_a=product&product_id=1 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:14:58.597

这就是我将如何去做，所以这可能不完全适合您的需求：

假设标题不是内容的一部分，它不应该是`<img>`标签。我们应该在元素上使用 CSS`background`属性。`<header>``<div id="header">`

因此，在您有标题的模板中，您确实创建了一个具有类别 ID 的 CSS 类。

```
<div id="header" class="cubecart-category cubecart-category-<?php print $catID; ?>"> 
```

如果打印出来`cubecart-category-5`，假设我们的 CSS 将如下所示：

```
.cubecart-category {
    height: 100px;
    width: 980px;
    ...
    background: none no-repeat scroll 0 0 transparent;
}
.cubecart-category-5 {
    background-image: url(cat5.jgp);
}
.cubecart-category-6 {
    background-image: url(cat6.jgp);
} 
```

然后，您可以在类上放置一个默认图像`cubecart-category`并让它被覆盖。

我知道这是一个通用的答案，但这对您有帮助吗？让我知道。

# linux - 即时更改图像叠加的位置

> ID：11987596
> 
> 赞同：2
> 
> 时间：2012-08-16T12:54:56.720
> 
> 标签：linux, image, dynamic, ffmpeg, overlay

我需要一些帮助来解决我在实时提要上叠加图像的问题。
目前，我正在从设备流式传输原始数据，转码该数据（即`ogg`），然后使用 HTTP 重新流式传输，因为我需要通过 HTML 页面查看。我的问题是我需要在流上叠加图像 - 当特定对象移动时 - 图像叠加也会移动。

例如，如果您想在移动对象上放置一个“X”，该对象可能会从左到右或从上到下移动。此时，我可以使用以下命令在固定点覆盖图像：

> ffmpeg -i rtsp://[host]:[port] -i x.png -filter_complex 'overlay=10:main_h-overlay_h-10' http://[host]:[post]/output.ogg

这将在开始时给我一个对象上方的“X”，但是一旦对象移动，我需要更改该“X”的位置。

唯一真正的要求是我使用的技术需要可用于 Linux。

有任何想法吗 ？

谢谢 ！

# php - php写入文件

> ID：11987599
> 
> 赞同：2
> 
> 时间：2012-08-16T12:54:58.763
> 
> 标签：php, file, iostream

我有这个代码：

```
$file = fopen($_SERVER['DOCUMENT_ROOT'].'crawl.txt', 'w+');
$time1 = microtime(true);
......
$time2 = microtime(true);
$time = $time2-$time1;
$text = "Training id: ".$this->realIdTraining." Time: ".$time."\r\n";
fwrite($file, $text);
fclose($file);
sleep(5); 
```

我发现了这个错误：`Warning: fwrite(): 120 is not a valid stream resource`

有什么想法我能做什么？

伙计们：必须添加正确书写的第一行。（！！！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:01:04.470

测试打开文件进行写入的权限

```
$file = fopen($_SERVER['DOCUMENT_ROOT'].'/crawl.txt', 'w+');
if(!$file)
{
     echo 'cannot write to file';
}
else
{
    $time1 = microtime(true);
    ...
    $time2 = microtime(true);
    $time = $time2-$time1;
    $text = "Training id: ".$this->realIdTraining." Time: ".$time."\r\n";
    fwrite($file, $text);
    fclose($file);
    sleep(5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:59:03.893

如果代码 beetween ... 和 $this->realIdTraining 存在于某处，这应该可以工作

此外，如果需要，首先验证文件是否存在，以及其他内容，如写入权限。

```
<?php

$file = fopen($_SERVER['DOCUMENT_ROOT'].'/crawl.txt', 'w+');
$time1 = microtime(true);
...
$time2 = microtime(true);
$time = $time2-$time1;
$text = "Training id: ".($this->realIdTraining)." Time: ".$time."\r\n";
fwrite($file, $text);
fclose($file);
sleep(5);

?> 
```

# rtc - 使用 Rational Team Concert 进行需求和测试管理

> ID：11987604
> 
> 赞同：1
> 
> 时间：2012-08-16T12:55:18.780
> 
> 标签：rtc, rational-team-concert

我们是一个小团队，我们需要一个 ALM 解决方案来进行我们的持续开发。我们听说 RTC 可以提供基本的需求管理、测试计划和测试执行管理（除了源代码控制和变更管理）。

您认为它真的能够提供所有这些吗？特别是，我们需要以下内容，并且能够将它们全部链接起来：

*   要求
*   测试计划
*   特征
*   记录错误和测试结果

再说一遍，我们是一个小团队。我们不需要丰富的需求工具（例如 RRC 或 DOORS），也不需要测试管理工具，例如 RQM 或 HP-QC。我们想知道 RTC 本身是否可以满足所有这些基本使用需求。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:09:39.363

您可以自定义 RTC 以便：

*   定义特定[的工作项](https://jazz.net/library/article/42/)（您可以称之为“需求”、“测试”或“功能”）
*   为规划目的定义一个或多个时间线，以及它们自己的一组迭代（[迭代](https://jazz.net/help-dev/clm/index.jsp?topic=%2Fcom.ibm.team.concert.doc%2Ftopics%2Ft_practice_planning_iteration.html)等于开始日期和结束日期）

所以是的，你可以这样做，只要：

*   您不会期望专用需求工具（门）的*所有*功能。
*   您了解这些概念（“需求”、“测试”、...）并不是开箱即用的，需要定义。

# c# - 从 ASP.NET 打印 PDF 服务器端

> ID：11987605
> 
> 赞同：0
> 
> 时间：2012-08-16T12:55:20.777
> 
> 标签：c#, asp.net, pdf

我需要获取一个 PDF 文件 url，将其作为参数发送到将在网络打印机上打印的 Web 服务。它必须在没有任何用户交互的情况下在服务器端完成。

你知道一些我们可以用来实现这一目标的库吗？我们查看了不同的选项，例如 iTextSharp，但看起来无法从该库中打印。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:41:21.753

如果您可以下载该文件并将其保存为 PDF 并安装了 Acrobat Reader，您可以使用命令行来打印它（外壳它）。

[http://www.robvanderwoude.com/commandlineswitches.php#Acrobat](http://www.robvanderwoude.com/commandlineswitches.php#Acrobat)

静默打印 PDF 文件：

```
AcroRd32.exe /N /T PdfFile PrinterName [ PrinterDriver [ PrinterPort ] ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:24:53.443

我不得不这样做，但使用 PCL。我们使用 winspool.drv 打开打印机，开始一个文档然后一个页面，写出字节，然后结束页面和文档并关闭打印机。我们在本地机器上安装了打印机的 PCL 驱动程序以打印到网络打印机。您可以使用 Postscript 驱动程序执行类似的操作。一个快速的测试是使用命令提示符和 /B 开关将 PDF 的二进制副本复制到打印机。我认为您将 PDF 和打印机网络共享指定为源/目标。使用小型 PDF 以避免出现大量随机字符，以防万一它不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T16:02:01.027

我们最终将使用一个商业组件来自行完成所有这些工作。

谢谢你的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:09:43.880

很高兴知道您使用了什么商业组件...

# haskell - 将功能提升到 Conduit Sink

> ID：11987606
> 
> 赞同：2
> 
> 时间：2012-08-16T12:55:22.167
> 
> 标签：haskell, yesod, conduit

我有一个函数`f :: ByteString -> String`，需要一个`Sink ByteString (ResourceT IO)`. 我怎么得到这个？

不幸的是，这些文档不是很有帮助......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:45:07.527

这是该问题的一般解决方案：让我们采用任何函数`i -> r`，其中`i`a ，并通过将所有s 与`Monoid`折叠起来将其变成接收器。`await``mappend`

```
import Data.Conduit
import Data.Conduit.List as CL
import Data.Monoid

monoidFold :: (Monoid i, Monad m) => (i -> r) -> Sink i m r
monoidFold f = f `fmap` CL.fold mappend mempty 
```

由于`ByteString`是 a `Monoid`，因此您的类型函数`ByteString -> String`可以用作 的参数`monoidFold`。

```
myMD5 :: ByteString -> String
monoidFold myMD5 :: Monad m => Sink ByteString m String 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:48:17.700

我不确定为什么您需要在此管道中与 resourceT 有任何关系。

为了将它全部返回到一个由所有小字节串组成的大字符串中，您必须积累一段时间，然后将其返回到结尾。

```
fSink :: Monad m => Sink ByteString m String
fSink = go []
  where
    go accum = do
      x <- await
      case x of
        Nothing -> return . f . B.concat . reverse $ accum
        Just x' -> go (x':accum) 
```

# html - Margin-top 没有得到应用（不工作）

> ID：11987610
> 
> 赞同：2
> 
> 时间：2012-08-16T12:55:30.417
> 
> 标签：html, css, alignment

这个问题是针对[这个网站](http://freshbeer.lv/final/index.html)
的 一切都很好，但由于某种原因`.content`，我的 div 被赋予了一个 css 规则
`margin-top: 50px;`，似乎没有那个余量起作用。我给有问题的 div 提供了明亮的黄色背景颜色，以便您可以看到它。

这是可能导致问题的元素的**css代码。**（不确定它是否也可能是其他元素。）

```
header {
    background-color: #1d130e;
    background-image: url("../img/header_bg.png");
    background-repeat: no-repeat;
    background-position: center;
    width: 100%;
    min-width: 1000px;
    height: 100px;
    margin-top: 50px;
    border-top: 1px solid #0d0907;
    border-bottom: 1px soid #0d0907;
    box-shadow: 0px 0px 15px -1px #181513;
}

.content {
    margin-top: 50px;
    width: 1000px;
    margin: 0 auto;
    background: #eef496;
} 
```

和页面的**HTML**：

```
<body>
        <!-- Header -->
        <header>
            ...
        </header>
        <!-- Header [END] -->

        <!-- Content -->
        <div class="content">
            <!-- Slideshow -->
            ...
            <!-- Slideshow [END] -->
        </div>
        <!-- Content [END] -->

        <!-- Footer -->
        <footer></footer>
        <!-- Footer [END] -->
    </body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:58:37.700

使用该行`margin: 0 auto;`，您将覆盖 margin-top 属性。试试这个：

```
.content {
    margin: 0 auto;
    margin-top: 50px;
    width: 1000px;
    background: #eef496;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:00:42.827

```
.content {

    width: 1000px;
    margin: 50px auto 0 auto;
    background: #eef496;
} 
```

或者你可以简单地

```
margin: 50px auto 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:02:33.407

我可以看到内容 div 内的幻灯片 div。我给幻灯片 div 设置了一个 margin-top 并且它应用了它似乎正在工作

```
<div id="slides"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:03:26.460

不确定，你想做什么，但页面似乎是正确的。您是否清除了浏览器缓存？

如果您根本不想重叠边距，请尝试

```
overflow: hidden; 
```

在有边距的元素和接触它的元素上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T13:01:05.640

在 Chrome 中，我得到以下 CSS 行`.content`：

```
.content {
   margin-top: 50px; /* margin-top is defined */
   width: 1000px;
   margin: 0 auto; /* all the margins are overridden, including margin-top */
   background: #EEF496;
   display: block;
} 
```

第三行中的行确保忽略第一行。

# git - 服务器端现有提交的 Git 子模块 URL 更改

> ID：11987613
> 
> 赞同：0
> 
> 时间：2012-08-16T12:55:38.177
> 
> 标签：git

命令“git config submodule.common.url 'url'”仅对客户端子模块 url 更改有用。我想在服务器端更改子模块 url，它应该支持存储库中所有以前的提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:38:06.953

这样做的唯一方法是使用`filter-branch`或`rebase -i`使用编辑。不过，您所有的 SHA1 都会改变。

# c - C 中的位移位，意外结果

> ID：11987634
> 
> 赞同：1
> 
> 时间：2012-08-16T12:56:48.287
> 
> 标签：c, bit-manipulation

当我通过时`n = 0x0`，我会进入`0xffffffff`我期望的屏幕，`0x00000000` 因为我将这个词移动了`32 bits` （只是忽略 x！我没有在函数中使用它。）

```
void logicalShift(int x, int n) {
    int y = 32;
    int mask = 0xffffffff;
    printf("mask %x", mask << (y-n));
} 
```

有趣的一点是

```
void logicalShift(int x, int n) {
    int y = 32;
    int mask = 0xffffffff;
    printf("mask %x", mask << 32);
} 
```

这将输出我所期望的。我错过了什么吗？谢谢！

我在 ubuntu 上运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:02:41.507

对 32 位值左移 32 位会产生未定义的结果。您只能移动 0 到 31 位。

另见此处：[为什么 32 位整数的左位移“<<”在使用超过 32 次时不能按预期工作？](https://stackoverflow.com/questions/7401888/why-doesnt-left-bit-shift-for-32-bit-integers-work-as-expected-when-used)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:02:55.337

这是[C11 草案 §6.5.7.3](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)的相关引用；

> 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

换句话说，结果是未定义的，编译器可以自由生成任何结果。

# android - 加密图像后无法将图像从图库移动到 SD 卡

> ID：11987641
> 
> 赞同：0
> 
> 时间：2012-08-16T12:57:10.190
> 
> 标签：android, encryption

我正在尝试加密图库中的图像并将其存储在 sdcard 上。

当我试图将图像从图库移动到 sdcard 时，出现“强制关闭”错误，并且 logcat 没有显示异常。

我得到一个祝酒词“图像已成功加密”，但它没有将图像从画廊移动到 sdcard。

我究竟做错了什么？

```
 private void encript(byte[] data, byte[] clear) {

        byte[] keyBytes = new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,
        0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17 };
        SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
        Cipher cipher = null;

        try {

        cipher = Cipher.getInstance("AES/ECB/PKCS7Padding", "BC");

        }    catch (NoSuchAlgorithmException e) {

        e.printStackTrace();
        }    catch (NoSuchProviderException e) {

        e.printStackTrace();

        } catch (NoSuchPaddingException e) {

        e.printStackTrace();
        }
        try {
        cipher.init(Cipher.ENCRYPT_MODE, key);

        } catch (InvalidKeyException e) {

        // TODO Auto-generated catch block
        e.printStackTrace();
        }

        byte[] cipherText = new byte[cipher.getOutputSize(data.length)];

       // int ctLength = cipher.update(data, 0, data.length, cipherText, 0);

        byte[] input = null;

        try { 
        input = cipher.doFinal(cipherText);
        } catch (IllegalBlockSizeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (BadPaddingException e) {
        // TODO Auto-generated catch block

        e.printStackTrace();
        }
        try{
        if(input.length>0){
        Toast.makeText(getApplicationContext(), "Image successfully encripted", 3000).show();
        }
        ByteArrayInputStream bis = new ByteArrayInputStream(input);

        ObjectInputStream ois = new ObjectInputStream(bis);

     File encriptedfile = (File) ois.readObject();//This is the file which i want to Move to App folder

            bis.close();
        ois.close();
        } catch (StreamCorruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       }
    return;
    }
     //Code for copy  image into app folder......
    File outputFolder = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + ".map");
         try {
          FileUtils.copyFile (encriptedfile, outputFolder);
          } 
          catch (IOException e) {
          Log.e("photomover", e.toString());
          }
} 
```

* * *

```
08-17 11:42:00.905: WARN/System.err(8453): java.io.StreamCorruptedException
08-17 11:42:00.905: WARN/System.err(8453):     at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:2392)
08-17 11:42:00.905: WARN/System.err(8453):     at java.io.ObjectInputStream.<init>(ObjectInputStream.java:445)
08-17 11:42:00.905: WARN/System.err(8453):     at com.cw.GalleryShareimage1Activity.encript(GalleryShareimage1Activity.java:177)
08-17 11:42:00.905: WARN/System.err(8453):     at com.cw.GalleryShareimage1Activity.onCreate(GalleryShareimage1Activity.java:76)
08-17 11:42:00.915: WARN/System.err(8453):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-17 11:42:00.915: WARN/System.err(8453):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
08-17 11:42:00.915: WARN/System.err(8453):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
08-17 11:42:00.915: WARN/System.err(8453):     at android.app.ActivityThread.access$2300(ActivityThread.java:126)
08-17 11:42:00.915: WARN/System.err(8453):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
08-17 11:42:00.915: WARN/System.err(8453):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 11:42:00.915: WARN/System.err(8453):     at android.os.Looper.loop(Looper.java:123)
08-17 11:42:00.915: WARN/System.err(8453):     at android.app.ActivityThread.main(ActivityThread.java:4633)
08-17 11:42:00.915: WARN/System.err(8453):     at java.lang.reflect.Method.invokeNative(Native Method)
08-17 11:42:00.915: WARN/System.err(8453):     at java.lang.reflect.Method.invoke(Method.java:521)
08-17 11:42:00.915: WARN/System.err(8453):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-17 11:42:00.915: WARN/System.err(8453):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-17 11:42:00.915: WARN/System.err(8453):     at dalvik.system.NativeStart.main(Native Method)
08-17 11:42:00.925: WARN/dalvikvm(8453): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453): FATAL EXCEPTION: main
08-17 11:42:00.935: ERROR/AndroidRuntime(8453): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cw/com.cw.GalleryShareimage1Activity}: java.lang.NullPointerException: Source must not be null
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.app.ActivityThread.access$2300(ActivityThread.java:126)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.os.Looper.loop(Looper.java:123)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.app.ActivityThread.main(ActivityThread.java:4633)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at java.lang.reflect.Method.invokeNative(Native Method)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at java.lang.reflect.Method.invoke(Method.java:521)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at dalvik.system.NativeStart.main(Native Method)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453): Caused by: java.lang.NullPointerException: Source must not be null
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at org.apache.commons.io.FileUtils.copyFile(FileUtils.java:1068)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at org.apache.commons.io.FileUtils.copyFile(FileUtils.java:1038)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at com.cw.GalleryShareimage1Activity.onCreate(GalleryShareimage1Activity.java:96)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
08-17 11:42:00.935: ERROR/AndroidRuntime(8453):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:11:08.170

您的代码有几个缺陷：

首先，当您加密数据时，您并未正确处理要加密的数据。你应该这样尝试：

```
byte[] cipherText = cipher.doFinal(data); 
```

其次，您正在使用一个`ObjectInputStream`和它的`readObject()`方法。ObjectInputStream 仅对由 Java 序列化创建的数据有用。您不能以这种方式处理图像。铸造它`File`也没有任何意义。

当您在 RAM 中执行所有操作时（顺便说一句，由于 android 的 RAM 限制，这对大文件不起作用）您只需将加密的内存数据保存到文件中。无需移动：

```
File outputFolder = new File(Environment.getExternalStorageDirectory().getAbsolutePath(),".map");
File outputFile = new File(outputFolder, "outputfilename.bin");
FileOutputStream out = new FileOutputStream(outputFile);
out.write(cipherText);
out.close; 
```

# android - 将本地 Cell-id 存储到 lat/long 数据库，以适应新的离线谷歌地图的相同范围？

> ID：11987643
> 
> 赞同：0
> 
> 时间：2012-08-16T12:57:16.367
> 
> 标签：android, google-maps, latitude-longitude, offline, cellid

我已经阅读了很多关于这个主题的问答，但并不完全符合我的要求。有没有办法仅将单元格 ID 存储到本地区域的经纬度数据库，例如谷歌地图新的离线功能，您能否获取本地化信息并将其存储，以覆盖与地图相同的地面？，我我正在寻找一个可以离线工作的android应用程序，它是省电的，这是我想到的最好的选择。我已经检查了 opencellid 及其提供的 kml 文件，是否足以在没有互联网连接或 gps 的情况下找到该位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T05:30:34.313

您可以探索[LocationAPI.org](http://www.locationapi.org)提供的离线数据库选项以用于您的应用程序。不过，离线存储超过 3600 万个单元将是一项任务！

# eclipse - 用于 Web 开发的 Egit

> ID：11987652
> 
> 赞同：0
> 
> 时间：2012-08-16T12:57:54.777
> 
> 标签：eclipse, git, version-control, egit

我正在尝试在远程 Web 服务器上设置 GIT 存储库并将其连接到我的 Eclipse 上的项目，但在这样做时遇到了麻烦。我已经完成了我的功课并尝试了我能做的一切，但目前处于死胡同。

在远程服务器上创建存储库。在本地计算机上创建存储库。创建连接到本地计算机存储库的项目。尝试了所有方法来连接两个存储库。不可能的。

是的，这是我尝试过的方法之一。
我在远程服务器上创建了一个 git repo。
然后我导入了一个项目并提供了我的服务器信息以连接到 repo。
我能够连接，它为项目提供了我服务器上的所有文件。
我对文件进行了更改，然后转到“团队 > 阶段 > 提交 > 推送”。
我收到此错误'远程：错误：拒绝更新签出分支：refs/heads/master

```
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To ssh://sofiane@50.63.180.135/var/www/html/lms
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'ssh://sofiane@50.63.180.135/var/www/html/lms' 
```

大约 8 小时后，我完全陷入了书呆子的愤怒，把我的键盘砸在墙上。引入流行的版本控制工具的好方法。

[这](http://www.youtube.com/watch?v=CDeG4S-mJts&feature=fvwrel)完美地说明了我的挫败感。与 Git 见鬼去吧。你好颠覆，我想你了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:33:51.413

我认为您在服务器上创建了非裸存储库，这就是为什么您不能推送到已签出的同一分支的原因。

检查服务器上的存储库：

```
$ ls
repository 
```

现在要么：

```
$ ls -a repository
.git
file1
file2
.. 
```

或者：

```
$ ls -a repository
HEAD
config
description
hooks
info
objects
packed-refs
refs 
```

如果你得到第一个结果，你就有了一个非裸存储库。在服务器上将其克隆为裸机：

```
$ ls
repository
$ git clone --bare repository repository.git
$ mv repository oldrepository 
```

然后尝试推动它。.git 扩展名是一个约定，表示一个裸存储库，存储库 url 不需要它。这意味着您的本地 git 存储库应使用其旧的远程配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:19:17.793

您在 GIT 存储库视图中看到了什么？如果您可以在那里看到您的 GIT 存储库，那么您应该可以`File -> Import... -> Projects from Git`这样做：

![在此处输入图像描述](../Images/d42e5b3c8695f945dce6cc941af03326.png)

# ruby-on-rails - 从名称访问 id

> ID：11987653
> 
> 赞同：1
> 
> 时间：2012-08-16T12:57:56.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

```
class SubjectTeachersController < ApplicationController

def new
  @st = SubjectTeacher.new   
  @tnames = Teacher.pluck(:tname)
  @subs = Subject.pluck(:sub_name)

end    

def create
   @tech = Teacher.find(params[:tname]).id
   @sub = Subject.find(params[:sub_name]).id
   @st = SubjectTeacher.create(:teacher_id => @tech, :subject_id => @sub )
    if @st.save
        flash[:notice] = " creates successfully"
    else
      render('new')
        end    
  end   
end 
```

我在主题和老师之间建立了许多关系。SubjectTeacher 是 Subject & Teacher 的连接表。在 SubjectTeacherController 中。

在这里，@tnames 存储所有教师姓名，而@subs 存储所有科目名称。我想在控制器中访问两者的 id ...如何？我应该在创建功能中进行任何更改吗？请给我打电话...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:08:28.943

Rails 提供了“神奇”的查找器方法，格式为`Model.find_by_attribute`.

在这种情况下，我们可以使用`Teacher.find_by_tname(params[:tname])`和`Subject.find_by_sub_name(params[:subname])`

# facebook - 由于“#”，Ngnx 1.2.3 截断了 Facebook 代码参数值

> ID：11987654
> 
> 赞同：0
> 
> 时间：2012-08-16T12:57:59.187
> 
> 标签：facebook, nginx

我在我的网站上使用 Facebook 身份验证。

我使用 Nginx 1.2.3。

Facebook 使用以下模式生成 URL：

> =">https://www.mysite.net/profile.xhtml?state=dfecc191-5eb5-4e08-a514-bc70fdc17611&code=AQBKJ_1VuycE7-DPigKfrAt9BLGQJww-p0RKY_Lta6uDxsaMUgzR98soPiOD6NDZ6kyU-NJUHmpAqEOSCxOKi7UGgh0fJSfC9kyh18FtSbQNJdyNEkkfaNtP9GMC8y25W6fOjyR2fj3OnQQTFDwmm-gckqofvhJsmnPSWgHxaan7uiaz_Wgc5JcdTu2DfzhOjqUQ_QG7X14jWDdq9CUtHuSV# *=*

如您所见，facebook`#_=_`在代码参数值的末尾添加。

现在，如果你尝试构建任何类型的带有 # 的 URL GET，NGINX 将在遇到 # 时停止解析请求，[例如 this](http://www.mysite.net/index.html?value1=jo#hn&value2=doe)。

给出以下日志：

> [16/Aug/2012:11:25:33 +0200] "GET /index.html?value1=jo HTTP/1.1" 200 4976 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.1 （KHTML，如 Gecko）Chrome/21.0.1180.79 Safari/537.1"

就我而言，Nginx 停止解析请求并从代码参数值中删除“# *= ”！*

任何想法 ？

谢谢。

PS：这与 Apache 配合得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:56:50.617

我认为你弄错了——没有浏览器（如果你混淆了 IE）会发送 URL 的片段部分到服务器——这与 HTTP 规范背道而驰。

你说这适用于 Apache 几乎是不可能的。

您的示例是一个完全有效的 URL，但 URI 部分是[http://www.mysite.net/index.html?value1=jo](http://www.mysite.net/index.html?value1=jo)因为 #hn&value2=doe 实际上是 URL 的片段部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T18:02:38.983

所以服务器处理哈希（#_=_）的方式是他们通常忽略它。

这个哈希应该与 facebook 返回的代码是否应该工作无关。

**影响**它成功的因素是套管。在尝试使用代码之前，请确保您没有在请求参数上调用 .ToLower() （或类似方法）。

希望这可以帮助！

# c# - 在另一个类后面的代码中引用 C# 控件

> ID：11987655
> 
> 赞同：1
> 
> 时间：2012-08-16T12:57:59.807
> 
> 标签：c#, user-controls, reference, code-behind

我在 VS2010 中有一个网站项目，简而言之，我使用一个控件“BasketMenuItem.ascx”来显示购物车详细信息，总而言之在页面顶部。什么

在呈现导航的代码中，我有：

```
<tp:BasketMenuItem ID="basketMenuItem" runat="server" /> 
```

然后我有另一个控件，在每个产品页面上都有一个按钮，可以将 X 个产品项目添加到购物车。在添加项目时，我使用 javascript 突出显示购物车，然后我想刷新“BasketMenuItem”控件，以便显示正确的详细信息。

我想我可以做类似的事情（“usercontrols_Global_BasketMenuItem”是 BasketMenuItem 控件的类）：

```
(usercontrols_Global_BasketMenuItem)Page.FindControl("basketMenuItem").LoadItems(); 
```

但是，我收到一条错误消息：

```
"The Type or Namespace Name BasketMenuItem could not be found (are you missing a using directive or an assembly reference?)" 
```

我不确定如何解决这个问题。我不确定我需要包括什么，因为我不能简单地说：

```
using usercontrols_Global_BasketMenuItem; 
```

我还尝试将 ClassName 属性添加到控制文件中，如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="BasketMenuItem.ascx.cs" ClassName="BasketMenuItem" Inherits="usercontrols_Global_BasketMenuItem" %> 
```

但是我仍然无法引用它。

**编码**

首先，有 BasketMenuItem 控件。ascx 和 ascx.cs。这包含加载当前购物篮内容的方法。“加载项（）”。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="BasketMenuItem.ascx.cs" ClassName="BasketMenuItem" Inherits="BasketMenuItem" %>

public partial class BasketMenuItem : System.Web.UI.UserControl
{
    //...
} 
```

然后是菜单控件。这是 Basket 控件放置在导航页面上的位置：

```
<ul>
    <li>...</li>
    <li>...</li>
    <li>...</li>

    <!-- Cart -->
    <tp:BasketMenuItem ID="basketMenuItem" runat="server" />

</ul> 
```

最后是 ListItems 控件，定义如下。此控件包含将商品添加到购物车的按钮。这里我想在页面上找到BasketMenuItem控件，调用它的“LoadItems()”方法进行更新。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ListItems.ascx.cs" Inherits="ListItems" %>

public partial class ListItems : System.Web.UI.UserControl
{
    //...
} 
```

没有指定命名空间，根据我的阅读，我假设我可以在 ASP 命名空间中找到 BasketItem 控件。但是我不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:26:16.207

您使用 using 语句走在正确的轨道上。但是，您需要使用控件的命名空间，而不是使用类名执行 using 语句。

如果您打开 usercontrols_Global_BasketMenuItem 控件的代码隐藏 (.cs)，您应该能够通过在代码文件中查找命名空间子句来找到需要包含的命名空间。

此外，在该文件中，您应该验证类名是“usercontrols_Global_BasketMenuItem”还是“BasketMenuItem”。后者似乎更有可能。

如果您没有命名空间，您可以尝试使用“global::”命名空间并以这种方式访问​​它，或者在 using 语句中为其设置别名。有关详细信息，请参阅此帖子：[在 C# 中显式引用没有命名空间的类](https://stackoverflow.com/questions/2767782/explicitly-refer-to-a-class-without-a-namespace-in-c-sharp)

但是，我强烈建议更新以添加命名空间。从架构上讲，如果您有适当的命名空间结构，您会发现使用代码库和拥有相似的类名会容易得多。

# c++ - istream 到带有结构转换的向量

> ID：11987656
> 
> 赞同：0
> 
> 时间：2012-08-16T12:58:10.757
> 
> 标签：c++, vector, struct, ifstream, readfile

我有向量的文件：

```
typedef struct {
    float fX; ///< position X
    float fY; ///< position Y
    int iSize; ///< Size of point   
} structParams; 
```

但我想把它读成几乎相同结构但没有 iSize 的向量

```
typedef struct {
    float fX; ///< position X eq. structParams.fX
    float fY; ///< position Y eq. structParams.fY
} structPositionParams; 
```

我可以以类似的方式做到这一点

```
ifstream inStr("file.dat");
vector<structPositionParams>  oVector;
oVector.(numOfElements);
inStr.read((char*)&oVector[0], sizeof(structPositionParams) * numOfElements);
inStr.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:31:25.797

你必须利用数据的*步幅*。由于标准库不支持以任何方式读取跨步数据，因此您要么读取整个文件，然后运行 ​​for 循环从该数据创建对象，要么在 for 循环中进行整个读取，跳过`sizeof(int)`每个对象。

# spring - Spring Security 与 JSF 2.1 的集成

> ID：11987659
> 
> 赞同：0
> 
> 时间：2012-08-16T12:58:17.933
> 
> 标签：spring, security, jsf

我正在尝试将 Spring 3.1.1 安全性与 JSF 2.1 集成。我设法在[http://ocpsoft.org/java/acegi-spring-security-jsf-login-page/](http://ocpsoft.org/java/acegi-spring-security-jsf-login-page/)上运行示例代码。但是，我在尝试自定义它时遇到了问题。即使使用正确的凭据，我也无法登录，并且总是被重定向到 loginFailed.xhtml。我的配置如下

网页.xml：

```
<web-app>
    <display-name>Captain Admin</display-name>
    <welcome-file-list>
        <welcome-file>welcome.xhtml</welcome-file>
    </welcome-file-list>
    <session-config>
        <session-timeout>10</session-timeout>
    </session-config>
    <!-- JSF Config -->
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>
            /WEB-INF/faces-config.xml,
            /WEB-INF/faces-managed-beans.xml,
            /WEB-INF/faces-navigation.xml
        </param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.enabledLoadBundle11Compatibility</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.validateXml</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.verifyObjects</param-name>
        <param-value>true</param-value>
    </context-param>
    <!-- Spring Config -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/applicationContext-security.xml
        </param-value>
    </context-param>
    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>
    <listener>
        <listener-class>
        org.springframework.web.context.request.RequestContextListener
        </listener-class>
    </listener>
    <!-- Filter Config -->

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <!-- Filter Mappings -->  
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

    <!-- Core JSF Config -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
</web-app> 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans>
    <context:annotation-config />
    <context:component-scan base-package="com.ocpsoft" />
    <bean id="loggerListener"
        class="org.springframework.security.event.authentication.LoggerListener" />

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>WEB-INF/classes/config/database/db.properties</value>
        </property>
    </bean>
    <bean id="dataSources" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="${jdbc.driverClassName}" />
        <property name="jdbcUrl" value="${jdbc.url}" />
        <property name="user" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>
    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <constructor-arg ref="dataSources"/>
    </bean>
    <bean id="namedParameterJdbcTemplate"
        class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
        <constructor-arg ref="dataSources"/>
    </bean>
</beans> 
```

applicationContext-security.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans>
    <global-method-security secured-annotations="enabled"/>
    <http auto-config="true" access-denied-page="/accessDenied.xhtml" >
        <intercept-url pattern="/protected/*" access="ROLE_ADMIN" />
        <form-login login-processing-url="/j_spring_security_check"
            login-page="/login.xhtml"
            default-target-url="/protected/index.xhtml"
            authentication-failure-url="/loginFailed.xhtml" />
        <logout logout-url="/logout*" logout-success-url="/" />
    </http>

    <authentication-manager alias="authenticationManager">
        <authentication-provider>
            <user-service>
                <user name="rod" password="rod" authorities="ROLE_ADMIN" />
                <user name="dianne"
                    password="65d15fe9156f9c4bbffd98085992a44e"
                    authorities="ROLE_USER,ROLE_TELLER" />
                <user name="scott"
                    password="2b58af6dddbd072ed27ffc86725d7d3a"
                    authorities="ROLE_USER" />
                <user name="peter"
                    password="22b5c9accc6e1ba628cedc63a72d57f8"
                    authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config>
    <!-- Application Config -->
    <application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

</faces-config> 
```

面孔-托管-beans.xml

```
<?xml version="1.0"?>
<faces-config >
    <!-- Managed Beans -->
    <managed-bean>
        <description>
            Current logged in user's authentication information
        </description>
        <managed-bean-name>loginBean</managed-bean-name>
        <managed-bean-class>
            com.ocpsoft.pages.login.LoginBean
        </managed-bean-class>
        <managed-bean-scope>
            request
        </managed-bean-scope>
    </managed-bean>
</faces-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:31:15.300

我相信您无法访问您的登录页面，因为：

```
 <!-- 
        <intercept-url
            pattern="/login*"
            access="IS_AUTHENTICATED_ANONYMOUSLY" />
 --> 
```

我相信您的登录页面被 Spring Security 拦截，它使您无法在没有凭据的情况下访问它（如果没有登录页面，您将无法获得）。

在[这个](https://bitbucket.org/ElderMael/jgtjo/src)存储库中，如果你想检查它，我有一个 spring security 3、jsf 2 和 prettyfaces 3 的工作代码。

# android - Android 语法高亮？

> ID：11987660
> 
> 赞同：28
> 
> 时间：2012-08-16T12:58:21.897
> 
> 标签：android, syntax, editor, syntax-highlighting

有谁知道适用于 Android 的语法高亮库？我看过 jsyntaxpane 但这似乎不支持 Android。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-11-05T10:45:45.280

我设法为 Android 创建了一个基于[Prettify](https://code.google.com/p/google-code-prettify/)的语法荧光笔。实际上，当我找到[Java Prettify](https://code.google.com/p/java-prettify/)时，这很容易。只需下载它（遗憾的是，它不是为 maven 发布的）并将其 jar 添加到应用程序的构建路径中。

我基于它创建的语法高亮：

```
public class PrettifyHighlighter {
    private static final Map<String, String> COLORS = buildColorsMap();

    private static final String FONT_PATTERN = "<font color=\"#%s\">%s</font>";

    private final Parser parser = new PrettifyParser();

    public String highlight(String fileExtension, String sourceCode) {
        StringBuilder highlighted = new StringBuilder();
        List<ParseResult> results = parser.parse(fileExtension, sourceCode);
        for(ParseResult result : results){
            String type = result.getStyleKeys().get(0);
            String content = sourceCode.substring(result.getOffset(), result.getOffset() + result.getLength());
            highlighted.append(String.format(FONT_PATTERN, getColor(type), content));
        }
        return highlighted.toString();
    }

    private String getColor(String type){
        return COLORS.containsKey(type) ? COLORS.get(type) : COLORS.get("pln");
    }

    private static Map<String, String> buildColorsMap() {
        Map<String, String> map = new HashMap<>();
        map.put("typ", "87cefa");
        map.put("kwd", "00ff00");
        map.put("lit", "ffff00");
        map.put("com", "999999");
        map.put("str", "ff4500");
        map.put("pun", "eeeeee");
        map.put("pln", "ffffff");
        return map;
    }
} 
```

语法的颜色是硬编码的，但也可以由应用程序偏好设置。为了在 a 中显示*Java*源代码`TextView`，只需执行以下操作：

```
// code is a String with source code to highlight
// myTextView is a TextView component
PrettifyHighlighter highlighter = new PrettifyHighlighter();
String highlighted = highlighter.highlight("java", code);
myTextView.setText(Html.fromHtml(highlighted)); 
```

Java Prettify 库使我的应用程序大了大约 50kB。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-24T21:06:29.357

好吧，我为 Android 做了一个开源语法高亮编辑器：

[https://github.com/markusfisch/ShaderEditor](https://github.com/markusfisch/ShaderEditor)

它非常简单，可能只适用于小数据，但它可能是一个很好的起点。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-16T13:13:45.430

对于只读语法高亮，您有两种选择：

1.  找到一个可以使用语法高亮和生成 HTML `<font color="">`（即，没有 CSS）的 Java 库。然后，您可以使用`Html.fromHtml()`创建一个`Spanned`可以交给`TextView`.

2.  找到一个可以突出显示语法并生成任何类型 HTML 的 Java 库。然后，您可以将其显示在`WebView`. 这似乎是评论者链接到[的`android-codepad`项目所做的。](http://code.google.com/p/android-codepad/)

*如果您正在为编辑器*寻找语法高亮，那要困难得多。虽然`EditText`可以采取相同`Spanned`的`TextView`方式，但您必须通过语法高亮显示所有内容以反映更改，无论是在每次击键的基础上，还是在输入暂停后。或者，您需要将语法高亮规则与编辑过程更加紧密地结合起来，这样您就可以以某种方式逐步调整高亮，而无需重做`EditText`. 我还没有看到一个开源的 Android 语法高亮编辑器——不过，一些封闭源代码的应用程序作为 Play Store 上的应用程序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-04T07:34:15.083

您好，您可以使用我的 CodeEditor [![安卓阿森纳](../Images/b76c5f294d9de6b76428741ff7152882.png)](https://github.com/ahmadaghazadeh/CodeEditor) [![](../Images/679be0c633c169e8c09f60f2464f046c.png)](https://jitpack.io/#ahmadaghazadeh/CodeEditor) [![安卓阿森纳](../Images/2ece5ca9a56bcda86b7ecc075ea3f4d2.png)](https://android-arsenal.com/details/1/7185)

[![播放视频](../Images/ca3d14000cffb24561acc75279307d29.png)](https://youtu.be/lq-P1qwgU1Q)

只需使用：

设置 build.gradle（项目）

```
allprojects {
    repositories {
        ...
        maven {
            url 'https://jitpack.io'
        }
    }
} 
```

build.gradle（应用程序）

```
dependencies {
    ...
    compile 'com.github.ahmadaghazadeh:CodeEditor:1.0.15'
} 
```

XML DataBinding <com.github.ahmadghazadeh.editor.widget.CodeEditor bind:code="@{viewModel.code}" bind:lang="@{viewModel.lang}" android:layout_width="match_parent" android:layout_height=" match_parent"/>

XML

```
 <com.github.ahmadaghazadeh.editor.widget.CodeEditor
        bind:code="<html></html>"
        bind:lang="html"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-15T08:24:19.960

我创建了一个用于文本突出显示的 API，可以解决您的问题。

[https://github.com/nakshay/TextHighlighter](https://github.com/nakshay/TextHighlighter)

此 API 允许您传递特定于单词的单词和颜色，并将返回使用 html 标签格式化的字符串，您可以将其发送到 Html.fromHtml() 以获取突出显示的文本。将以下 Gradle 依赖项添加到模块的 gradle 文件中。

```
compile 'com.github.akshay-naik:texthighlighterapi:1.1.0' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-04T02:50:31.693

920 文本编辑器（[Play Store上的应用程序，](https://play.google.com/store/apps/details?id=com.jecelyin.editor.v2) [GitHub 上](https://github.com/jecelyin/920-text-editor-v2)的源代码）使用[WebView](https://developer.android.com/reference/android/webkit/WebView)和[Ace](https://ace.c9.io/)的组合，这是一个用 JavaScript 编写的可嵌入代码编辑器。

我正在开发一个适用于 Android 的 IDE 应用程序，我想我也会走同样的路。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-01T23:58:01.883

[如果您愿意，可以使用Highlight](https://github.com/Irineu333/Highlight)库创建自己的语法高亮。

该库通过方案工作，这些方案基本上是规则（使用正则表达式）和相关修改的组合。有一些现成的，像 ColorScheme、SyleScheme、OnClickScheme 等，但是你可以实现 Scheme 接口并创建你自己的。

lib 的基类是 Highlight，其中处理跨度。您可以直接使用它，如下例所示，我们从 TextView 中突出显示 Java 语言的一些关键词

```
//create Highlight
Highlight highlight = new Highlight();

//scheme color example
highlight.addScheme(
        new ColorScheme(
                Pattern.compile("\\b(private)|(public)|(protected)|(void)\\b"),
                Color.parseColor("#CC7832")
        )
);

//...

//textview example
highlight.setSpan(binding.toolbarTitle); 
```

但是要创建语法高亮，还需要更多的东西，为此还有 HighlightTextWatcher 类，该类针对大型文本进行了优化，并通过 LinesTextWatcher 类（您可以扩展）的更改行进行处理。请参阅使用此类的示例。

```
//create TextWatcher
HighlightTextWatcher highlightTextWatcher = new HighlightTextWatcher();

//scheme color example
highlightTextWatcher.addScheme(
        new ColorScheme(
                Pattern.compile("\\b(private)|(public)|(protected)|(void)\\b"),
                Color.parseColor("#CC7832")
        )
);

//...

//edittext example
binding.edittext.addTextChangedListener(highlightTextWatcher); 
```

您可以添加任意数量的方案，其余的由 lib 完成。

实现 'com.github.Irineu333:Highlight:1.0.1' (jitpack)

# visual-studio-2012 - Visual Studio 2012 和 Web 部署项目 (wdproj)

> ID：11987663
> 
> 赞同：11
> 
> 时间：2012-08-16T12:58:29.573
> 
> 标签：visual-studio-2012, web-deployment-project

似乎找不到任何明确的信息。当我在 Visual Studio 2012 中打开我的 Visual Studio 2010 SP1 解决方案时，它报告 wdproj 不兼容。wdproj 的 2012 年替代品是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T14:55:14.303

看起来 VS 2012 不支持 WDP（Web 部署项目，*.wdproj），有人已经在这里回答了这个问题：[https ://stackoverflow.com/a/12061065/922169](https://stackoverflow.com/a/12061065/922169)

...这是答案中引用的博客：http: [//blogs.msdn.com/b/webdev/archive/2012/08/06/plans-regarding-website-projects-and-web-deployment-projects .aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/06/plans-regarding-website-projects-and-web-deployment-projects.aspx)

# c# - 将 C# 对象序列化为 json

> ID：11987675
> 
> 赞同：2
> 
> 时间：2012-08-16T12:59:02.553
> 
> 标签：c#, json, serialization, json.net

创建可以序列化为的 C# 类的最佳方法是：

```
marks:          [
             { c: [57.162499, 65.54718], // latitude, longitude - this type of coordinates works only for World Map
               tooltip: 'Tyumen - Click to go to http://yahoo.com', // text for tooltip
               attrs: {
                        href: 'http://yahoo.com',            // link
                        src:  '/markers/pin1_red.png'        // image for marker
                       }
             },
             { xy: [50, 120], // x-y coodinates - works for all maps, including World Map
               tooltip: 'This is London! Click to go to http://london.com',
               attrs: {
                        href: 'http://yahoo.com',            // link
                        src:  '/markers/pin1_yellow.png'     // image for marker
                       }
             }
            ] 
```

在上面的代码中，我们分配了“c”或“xy”，但不能同时分配两者。我正在使用 Newtonsoft.Json。我唯一想要的是一个可以序列化为上述代码的 C# 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:35:31.560

该类如下所示：

```
[Serializable]
public class Marks
{
    public List<latlon> marks = new List<latlon>();
}

public class latlon
{
    public double[] c;
    public int[] xy;
    public string tooltip;
    public attributes attrs;

    public latlon (double lat, double lon)
    {
        c = new double[] { lat, lon };
    }
    public latlon (int x, int y)
    {
        xy = new int[] { x, y };
    }
}

public class attributes
{
    public string href;
    public string src;
} 
```

测试它的代码如下所示：

```
string json;

Marks obj = new Marks();
latlon mark = new latlon(57.162, 65.547)
    {
        tooltip = "Tyumen - Click to go to http://yahoo.com",
        attrs = new attributes()
        {
            href = "http://yahoo.com",
            src = "/markers/pin1_red.png"
        }
    };

obj.marks.Add(mark);

mark = new latlon(50, 120)
    {
        tooltip = "This is London! Click to go to http://london.com",
        attrs = new attributes()
        {
            href = "http://yahoo.com",
            src = "/markers/pin1_yellow.png"
        }
    };

obj.marks.Add(mark);

//serialize to JSON, ignoring null elements
json = JsonConvert.SerializeObject(obj, Formatting.None, new JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore }); 
```

# c# - 在 WPF 中填充 DataGrid

> ID：11987679
> 
> 赞同：0
> 
> 时间：2012-08-16T12:59:06.280
> 
> 标签：c#, wpf-controls

我试图为我的问题寻找答案，但我没有找到任何合适的解决方案。

这是交易：

我有一个列数未知的 CSV 文件，我必须在数据网格或列表视图中显示它。此外，每一行都必须有一个额外的复选框列来指定用户是否想要对这一行做某事。我想我可以在 xaml 中使用 DataTemplate 来创建这个额外的列，但我实际上并不知道如何用数据填充控件，以便它可以正确显示它。

在 Windows 窗体中很简单 - 创建 DataTable 并将其注入 datagridview。由于我是 WPF 新手，所以我不知道该去哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:09:11.563

在 WPF 中，使用数据填充控件通常是通过 XAML 中的[数据绑定来执行的。](http://msdn.microsoft.com/en-us/library/aa480224.aspx)

尝试阅读那篇文章，并对 WPF 数据绑定和数据/项模板进行一些研究。

# extjs - 具有图像支持的 ExtJs4 HTML 编辑器

> ID：11987680
> 
> 赞同：0
> 
> 时间：2012-08-16T12:59:10.757
> 
> 标签：extjs, extjs4, wysiwyg, html-editor

我有一个使用 ExtJs 4.0 框架编写的大型 Web 应用程序。我需要添加支持`<img>`标签和图像上传的 HTML WYSWYG 编辑器（内置的 ExtJs HTML 编辑器没有）。

我查看了 TinyMCE、CKEditor 和其他一些工具，但不确定哪个更容易集成到现有的 ExtJs 应用程序中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:52:26.037

我知道在 TinyMCE 集成中至少有两次尝试：[这个](http://www.sencha.com/forum/showthread.php?143190-Ext.ux.TinyMCE-adaption-for-Ext4)和[那个](http://www.sencha.com/forum/showthread.php?198699-Ext.ux.form.TinyMCETextArea-a-text-area-with-integrated-TinyMCE-WYSIWYG-Editor)。我想我也见过 CKEditor 扩展。

你也可以看看[煎茶市场](https://market.sencha.com)。

# c# - 实时系统中的 MSMQ

> ID：11987684
> 
> 赞同：3
> 
> 时间：2012-08-16T12:59:20.580
> 
> 标签：c#, .net, xml, msmq

我应该注意 MSMQ 有什么限制吗？

我想用它来读写消息，但是消息很多。

数字应该在一分钟内大约 200,000 - 300,000。

有什么想法吗？它应该工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T13:06:18.507

MSMQ 是一个队列，它的主要好处是将消息的发送者和接收者解耦（例如接收系统可以离线）。

如果需要保证延迟，那么我会寻找其他地方（例如 .NET 远程处理/WCF NetTCP 绑定等）

也就是说，我们使用 MSMQ 和低级硬件，突发率 >> 每秒 500 条消息，但在集成 (EAI) 环境中，MSMQ 的好处是：

*   异步 - 发送和接收消息的进程可以以不同的速率发生
*   潜在的事务性（例如，在 DTC 下，消息可以放在队列中并在 UOW 下的数据库中更新）
*   已审核（日志）
*   死信队列 - 即如果接收者在定义的时间段后从未接收到消息。

低延迟从来都不是要求——可靠性和完整性是主要驱动因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:03:32.283

对于小型的非事务性消息，这在理论上是可能的，但它处于我个人听说过的高端。不过，请远离事务队列——我严重怀疑您是否能够在任何实际平台上获得这种吞吐量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:06:03.967

[由于可怕的资源不足问题](http://blogs.msdn.com/b/johnbreakwell/archive/2006/09/18/insufficient-resources-run-away-run-away.aspx)，我在 MSMQ 中遇到了这种卷的问题。

这似乎是一种罕见的情况，但它发生在我身上几次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:06:54.420

查看这篇文章：[链接](http://blogs.msdn.com/b/johnbreakwell/archive/2008/02/29/what-are-msmq-s-limits-if-i-had-a-farthing-for-every-time.aspx)它说 MSMQ 不应用作存储产品，而应用作传输机制。

您可以拥有从队列中读取消息并以事务方式处理它们的服务。[在这里（MSDN 链接）](http://msdn.microsoft.com/en-us/library/ms751493.aspx)您可以找到一些示例。创建一个小样本，做一些负载测试，看看它是否有效。

# javascript - 如何在输入关键字进行搜索时禁用自动建议框

> ID：11987688
> 
> 赞同：1
> 
> 时间：2012-08-16T12:59:40.773
> 
> 标签：javascript, html

提前谢谢我是编程新手文本框为空时保持隐藏。我的表单和整个 PHP 代码运行良好，并根据用户输入的关键字显示最匹配的城市名称。但主要问题是当用户之前输入关键字时，当结果出现时，浏览器会自动显示我在之前尝试中输入的城市名称。现在任何人都可以建议我任何解决方案，以防止浏览器显示默认城市名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:05:10.910

嗨，我在旧项目中也遇到了同样的问题。

然后我尝试了很多解决方案，但我得到的最好的解决方案确实对我有用，而且我在我的许多项目中都使用了它。我对文本框使用了自动完成属性...

```
<input type="text" name="" id="" autocomplete="off" /> 
```

并解决了这个问题，希望它也对你有用

# java - 从 Spring 3.0.x 迁移到 3.1.x 时出现 BadCredentialsException

> ID：11987692
> 
> 赞同：0
> 
> 时间：2012-08-16T12:59:51.197
> 
> 标签：java, spring, spring-security

我们已经从 3.0.7 spring security 迁移到 3.1.2，我们使用 in-memory-config 的一项测试因凭据错误而失败。

我们没有做任何特别的事情，只需使用纯文本用户名和密码验证其中一个用户。一旦通过身份验证，我们就会填充我们的权限。

代码：

```
public Authentication authenticate(UserDetails userDetails)
        throws AuthenticationException {
    try {
        org.springframework.security.core.Authentication authenticate = authenticationManager.authenticate(createAuthenticationRequest(userDetails));
        if (!authenticate.isAuthenticated()) {
            throw new AuthenticationException("Authentication failed for user ["+userDetails.getUsername()+"]");
        }

        Collection<? extends GrantedAuthority> grantedAuthorities = authenticate.getAuthorities();
                    ...
             } catch(Exception exception) {
        throw new AuthenticationException(exception);
    } 
```

代码：

```
<bean id="daoAuthenticationProvider" 
    class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <property name="userDetailsService" ref="daoUserDetailsService" />
</bean>

<bean id="daoUserDetailsService" class="org.springframework.security.core.userdetails.memory.InMemoryDaoImpl">
    <property name="userMap">
        <value>
            Edward = koala, READ_ONLY
        </value>
    </property>
</bean> 
```

我们在调用身份验证时收到以下异常：

```
Caused by: org.springframework.security.authentication.BadCre dentialsException: Bad credentials
at org.springframework.security.authentication.dao.Da oAuthenticationProvider.additionalAuthenticationCh ecks(DaoAuthenticationProvider.java:67)
at org.springframework.security.authentication.dao.Ab stractUserDetailsAuthenticationProvider.authentica te(AbstractUserDetailsAuthenticationProvider.java: 149)
at org.springframework.security.authentication.Provid erManager.authenticate(ProviderManager.java:156)
at org.openspaces.security.spring.SpringSecurityManag er.authenticate(SpringSecurityManager.java:117)
... 11 more 
```

有什么想法可以解决它，或者是否有补丁解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:35:40.677

`DaoAuthenticationProvider.additionalAuthenticationChecks`查看您的配置，这可能是一个空格解析问题，但通过放置断点来查看身份验证失败的原因应该很容易进行调试。

在任何情况下，配置内存用户的属性编辑器方法已被弃用，取而代之的是命名空间配置。你可以使用类似的东西

```
<security:user-service id="daoUserDetailsService">
    <security:user name="Edward" password="koala" authorities="READ_ONLY" />
</security:user-service> 
```

得到相同的结果。当然，您必须[将安全命名空间添加](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-config)到您的应用程序上下文文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T03:21:02.473

以下答案基于 Guy Korland 的评论（2012 年 8 月 16 日 20:40），他在其中做了进一步的调试：

从 Spring 3.1 开始，erase-credentials 的默认值从“false”更改为“true”，这就是为什么从缓存中提取密码时密码为空的原因。它还解释了为什么您的测试用例在 Spring 3.1 之前通过。您从缓存中检索的类是 UserDetails，一旦 Spring 验证了未加密的密码，它就不再使用它，因此它作为安全措施将其删除。对于您的简单测试场景，您可以将erase-credentials 值覆盖为“false”，但如果您确实依赖于在建立身份验证后未加密的值，请考虑长期寻找更安全的解决方案。

# c# - 需要将此代码转换为VB

> ID：11987695
> 
> 赞同：0
> 
> 时间：2012-08-16T13:00:05.213
> 
> 标签：c#, vb.net, ienumerable, c#-to-vb.net

我根本不熟悉 C#.NET。我需要将其转换为 VB。谁能帮我一把？

```
public IEnumerable<CodecInfo> AudioCodecs
        {
            get { return softPhone.Codecs.Where(c => c.CodecType == CodecMediaType.Audio); }
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T13:04:21.923

```
Public ReadOnly Property AudioCodecs As IEnumerable(Of CodecInfo)
    Get
        Return From c In softPhone.Codecs
               Where c.CodecType = CodecMediaType.Audio
    End Get
End Property 
```

[查询语法比 VB.NET 中的方法语法更具可读性]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:04:35.140

```
Public ReadOnly Property AudioCodecs() As IEnumerable(Of CodecInfo)
    Get
        Return softPhone.Codecs.Where(Function(c) c.CodecType = CodecMediaType.Audio)
    End Get
End Property 
```

将来您可以使用 C#-VB.NET 转换器：

[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:03:52.517

```
Public ReadOnly Property AudioCodecs() As IEnumerable(Of CodecInfo)
    Get
        Return softPhone.Codecs.Where(Function(c) c.CodecType = CodecMediaType.Audio)
    End Get
End Property 
```

# cuda - cudaMemcpy() 调用流

> ID：11987707
> 
> 赞同：1
> 
> 时间：2012-08-16T13:00:38.060
> 
> 标签：cuda

考虑这两个代码片段。

```
Snippet1

cudaStream_t stream1, stream2 ;
cudaStreamCreate(&stream1);
cudaStreamCreate(&stream2);
cudaMemcpyAsync( dst, src, size, dir, stream1 );
kernel<<<grid, block, 0, stream2>>>(...);

Snippet2
cudaStreamCreate(&stream1);
cudaStreamCreate(&stream2);
cudaMemcpy( dst, src, size, dir, stream1 );
kernel<<<grid, block, 0, stream2>>>(...); 
```

在这两个片段中，我都发出了 memcpy 调用（snippet1 异步和 snippet2 同步）

由于命令已发布到两个不同的流，据我了解，这两种情况都可能存在重叠。

但是在 Snippet2 中，cudaMemcpy 调用是同步的（又名阻塞）导致我得出一个矛盾的结论，即 cudaMemcpy 和内核调用将一个接一个地执行。

哪一个是正确的结论？

更简洁地说：当我们向流发出 cudaMemcpy 调用时，它会阻塞“整个代码”还是只是阻塞发出它的流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:15:25.380

在操作完成之前，同步调用不会将控制权返回给 CPU，因此在 memcpy 完成之前，您的第二个片段甚至不会开始提交内核启动。

您的`cudaMemcpy()`电话看起来不正确；我认为您不能为任何不以“异步”结尾的 memcpy 变体指定流参数。如所写，编译器可能会接受代码并将流作为 memcpy 方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-07T09:39:04.780

ArcheaSoftware 部分正确。实际上，在操作完成之前，同步调用不会将控制权返回给 CPU。从这个意义上说，您的内核启动只会在`cudaMemcpy`调用返回后发生。但是，根据您的缓冲区类型，内核可能会也可能不会使用`cudaMemcpy`调用传输的数据。下面的一些例子：

示例 1：

```
cudaMallocHost(&src, size);
cudaMalloc(&dst, size);
cudaMemcpy(dst, src, size, cudaMemcpyHostToDevice);
kernel<<<grid, block, 0, stream2>>>(...); 
```

在这种情况下，内核可以使用从 复制`src`到的数据`dst`。

示例 2：

```
src = malloc(size);
cudaMalloc(&dst, size);
cudaMemcpy(dst, src, size, cudaMemcpyHostToDevice);
kernel<<<grid, block, 0, stream2>>>(...); 
```

In this case, `cudaMemcpy` can return before the data is actually transferred to the device.

`cudaMemcpy` from unregistered host buffers (e.g., `malloc` buffers) only guarantees that the data is copied *out* of the source buffer, perhaps into an intermediate staging buffer, before the call returns. This is surprising behavior, but is defined as such in the NVIDIA CUDA documents. Ref: [https://docs.nvidia.com/cuda/cuda-runtime-api/api-sync-behavior.html#api-sync-behavior](https://docs.nvidia.com/cuda/cuda-runtime-api/api-sync-behavior.html#api-sync-behavior)

In general, I recommend avoiding using unregistered host buffers because of such behavior.

# jquery - CSS DIV滚动条最小宽度问题

> ID：11987711
> 
> 赞同：0
> 
> 时间：2012-08-16T13:00:51.303
> 
> 标签：jquery, background-image, jquery-cycle, css

我有一个宽度为 1400px 的旋转图像标题（使用 jquery Cycle）。它所在的站点的宽度为 960 像素。

当浏览器调整大小时 - 我在 1400 像素处得到水平滚动条。我需要它们仅从 960 像素开始，而不是 1400 像素。

这可能吗？我还需要标题图像以调整大小为中心。

您可以在此处查看站点和问题....

```
http://108.174.144.176/~momandpo/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:17:17.343

尝试添加这个 css：

```
#bg_containers div {
  width:100%;
} 
```

你有一个容器`#bg_container`和一些孩子`div`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:34:12.600

您应该强制容器和子项为 100% 宽度，这样它就不会扩大布局。由于您使用居中的背景图像，它将保持居中并根据窗口宽度自动裁剪。

```
#bg_containers,
#bg_containers > div {
  width: 100% !important;
} 
```

为避免使用 !important，您可以修改脚本以不在这些项目上设置固定宽度。

# java - 使用 Thread 和 AsyncTask 时，Android 应用程序进度条不会更新

> ID：11987713
> 
> 赞同：0
> 
> 时间：2012-08-16T13:01:01.180
> 
> 标签：java, android, multithreading, android-asynctask, progress-bar

我有一个带有类**WifiAudioActivity**的 android 应用程序，它扩展了 Activity 类。

简而言之，当按下应用程序上的按钮时，会运行一个方法，该方法使用进度条来显示该方法的进度。

我显示进度条并使用**AsyncTasks**更新它。

问题是，为了获取方法的进度，我让它在另一个线程上运行，所以**AsyncTask**线程上的 while 循环可以不断地作为更新的进度值并将其显示在进度条中。但是，当我调用更新进度条的**progessUpdate()**时，**在**我在运行的线程上设置方法后，它不会更新进度条，甚至不会跳转到**onProgressUpdate()**方法代码。

有趣的是，我可以在使用该方法运行 Thread 之前使用虚拟值更新进度。

我认为这是我的线程有问题 - 有人可以帮忙吗？

```
private ProgressDialog downloadAllDialog;
private ProgressDialog usingDialog;

private int totalDownloadSize;

private Download downloadAll;

private int totalBlocksLeft;

private boolean downloadComplete;
private boolean downloadFailed;

public void downloadAllClick(View view)     //When the download all button is clicked
{
    new PerformTask().execute();
}

private class PerformTask extends AsyncTask<Void, Integer, Integer> 
{
    protected void onPreExecute()
    {
        showDialog();
    }

    protected Integer doInBackground(Void... voi) 
    {
        int retryCount = 0;

        downloadComplete = false;   //Assume the download is not complete
        downloadFailed = false;

        totalBlocksLeft = 0;

        progressUpdater.run();       //Running method thread

        publishProgress(20);     //THIS DOES NOT WORK

        while ((retryCount < Consts.RETRY_TOTAL) && (!(downloadComplete)))
        {
            int blocksDownloaded = 0;

            while ((downloadComplete == false) && (downloadFailed == false))   
            {
                 blocksDownloaded = totalDownloadSize - downloadAll.getTotalBlocksLeft();    //GOT FROM THE RUNNING THREAD METHOD

                 publishProgress(blocksDownloaded);   //DOES NOT WORK
            }  

            ...
        }

        return totalBlocksLeft ;
    }

    Thread progressUpdater = new Thread()
    {
        @Override
        public void run() 
        {
            downloadComplete = downloadAll.downloadAudio(totalBlocksLeft);  //Download the audio

            if (!(downloadComplete))
            {
                downloadFailed = true;
            }
        }
    };

    protected void onProgressUpdate(Integer... progress) 
    {
        usingDialog.setProgress(progress[0]);
    }

    protected void onPostExecute(Integer result) 
    {
        removeDialog();
    }
}

protected Dialog onCreateDialog() 
{   
    downloadAllDialog = new ProgressDialog(this);

    downloadAllDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    downloadAllDialog.setMax(totalDownloadSize);

    downloadAllDialog.setProgress(0);

    downloadAllDialog.setMessage("Download All");

    usingDialog = downloadAllDialog;

return downloadAllDialog;
} 
```

}

就目前而言，在代码的关键位中：

```
blocksDownloaded = totalDownloadSize - downloadAll.getTotalBlocksLeft();    //GOT FROM THE RUNNING THREAD METHOD

publishProgress(blocksDownloaded);   //DOES NOT WORK 
```

blocksDownloaded，它从线程运行方法中获取其更新的值，正在随着进度进行更新。我确信这在技术上是不正确的，但是在 AsyncTask 中拥有线程确实会运行该方法，同时在 main 方法中获取进度更新。因此，只有进度条的更新不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:22:05.850

看来您没有正确使用 AsyncTask 。您似乎在 UI 线程上调用下载代码，这可能会阻止 progressBar 更新。

我可以提出以下建议。这将确保您正确使用 AsyncTask。当您正确使用 AsyncTask 时，代码也应该得到很多简化。

1.  不要创建任何线程，也不要使用 runOnUIThread 方法。AsyncTask 为您提供在适当线程上运行的回调方法。
2.  主要下载代码应该在 doInBackground 方法中。
3.  您应该在下载代码中的某个位置调用 publishProgress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:43:08.650

你需要打电话

```
progressUpdater.start(); 
```

代替

```
progressUpdater.run(); 
```

# vbscript - vbscript 文件存在错误

> ID：11987715
> 
> 赞同：0
> 
> 时间：2012-08-16T13:01:04.807
> 
> 标签：vbscript

我正在尝试检查文件是否存在/链接是否存在，如下所示：没有成功

这是我的代码：

```
filespec = "C:\Users\xyz\AppData\Roaming\Microsoft\Windows\Start Menu\Programs"&"\Internet Explorer.lnk"

filespec1 = char(34)&"C:\Users\xyz\AppData\Roaming\Microsoft\Windows\Start Menu\Programs"&"\Internet Explorer.lnk" &char(34)

Set fso = CreateObject("Scripting.FileSystemObject")
If (fso.FileExists(filespec)) Then
  msg = filespec & " exists."
Else
  msg = filespec & " doesn't exist."
End If
WScript.Echo(msg)

If (fso.FileExists(filespec1)) Then
  msg = filespec1 & " exists."
Else
  msg = filespec1 & " doesn't exist."
End If
WScript.Echo(msg) 
```

以上都不起作用？任何建议都受到高度赞赏。

亲切的问候，赞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:21:13.377

我不确定你想用`filespec`vs做什么`filespec1`，但第一个问题`char`不是 VB Script 关键字。你需要使用`Chr`.

```
filespec1 = Chr(34) & "C:\Users\xyz\AppData\Roaming\Microsoft\Windows\Start Menu\Programs" & "\Internet Explorer.lnk" & Chr(34) 
```

## 更新 1

这是我成功运行的代码。这是您的原始代码，`char`替换为`Chr`.

```
filespec = "C:\Users\xyz\AppData\Roaming\Microsoft\Windows\Start Menu\Programs"&"\Internet Explorer.lnk"

filespec1 = Chr(34) & "C:\Users\xyz\AppData\Roaming\Microsoft\Windows\Start Menu\Programs"&"\Internet Explorer.lnk" & Chr(34)

Set fso = CreateObject("Scripting.FileSystemObject")
If (fso.FileExists(filespec)) Then
  msg = filespec & " exists."
Else
  msg = filespec & " doesn't exist."
End If
WScript.Echo(msg)

If (fso.FileExists(filespec1)) Then
  msg = filespec1 & " exists."
Else
  msg = filespec1 & " doesn't exist."
End If
WScript.Echo(msg) 
```

# c++ - C++ cin 按键事件

> ID：11987717
> 
> 赞同：6
> 
> 时间：2012-08-16T13:01:07.817
> 
> 标签：c++, keypress, infinite-loop, break, onkeypress

我相信这是一个非常简单的问题，但我找不到简单的答案。我有一个无限循环，例如`while(1)`, `for(;;)`，我需要在按键时打破循环。最简单的方法是什么？

PS：我不能使用`getch`, `cin.ignore`, 或者`cin.get`因为它会停止循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:04:50.020

好吧，你想要的是异步输入。`cin`wait for enter提供的所有方法。您将不得不为此使用系统特定的功能，或者使用可以为您完成此操作的库。

您需要做的不仅是在 while 循环中处理您的逻辑，而且还要从您的操作系统的消息管道中侦听。如果您想了解有关该信息的更多信息，请发表评论。

编辑：还有另一种方法，但我不推荐它，因为我相信它可能是不可移植的。以下代码在VS2012RC下编译运行。

```
#include<iostream>
#include<conio.h>

using namespace std;

int main()
{
   cout << "Enter a character";
   getch();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:35:42.167

下面是一个使用`kbhit()`并具有无限循环的 Windows 控制台代码。但是如果键盘被击中，它会打破循环并退出。如果你有`<conio.h>`，试试这个：

```
#include <iostream> 
#include <conio.h>

using namespace std;

int main()
{

   while (1)
   { 
     if (kbhit()) break;

   }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T13:08:35.680

C++ 中没有“键盘”。您只有一个不透明的输入数据流，您的终端偶尔会使用自己的键盘输入填充该数据流。这几乎总是一个缓冲的、可编辑的逐行输入，因此您无法知道何时按下了任何给定的键。

您需要一种特定于平台的方法来直接与较低级别的终端通信。一个这样的库，相当广泛和可移植，是`ncurses`（存在兼容的 Windows 变体）。SDL 和 Allegro 等便携式图形应用程序框架也提供原始键盘处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:16:14.347

这将检查“左箭头”是否被按下：

```
GetKeyState(VK_LEFT) 
```

这也不会等待任何事情。只是检查一些标志。

winuser.h 中定义的其他一些键：

```
#define VK_NUMPAD0        0x60
#define VK_NUMPAD1        0x61
#define VK_NUMPAD2        0x62
#define VK_NUMPAD3        0x63
#define VK_NUMPAD4        0x64
#define VK_NUMPAD5        0x65
#define VK_NUMPAD6        0x66
#define VK_NUMPAD7        0x67
#define VK_NUMPAD8        0x68
#define VK_NUMPAD9        0x69

#define VK_CLEAR          0x0C
#define VK_RETURN         0x0D

#define VK_SHIFT          0x10
#define VK_CONTROL        0x11
#define VK_MENU           0x12
#define VK_PAUSE          0x13
#define VK_CAPITAL        0x14

#define VK_KANA           0x15
#define VK_HANGEUL        0x15  /* old name - should be here for compatibility */
#define VK_HANGUL         0x15
#define VK_JUNJA          0x17
#define VK_FINAL          0x18
#define VK_HANJA          0x19
#define VK_KANJI          0x19

#define VK_ESCAPE         0x1B

#define VK_CONVERT        0x1C
#define VK_NONCONVERT     0x1D
#define VK_ACCEPT         0x1E
#define VK_MODECHANGE     0x1F

#define VK_SPACE          0x20
#define VK_PRIOR          0x21
#define VK_NEXT           0x22
#define VK_END            0x23
#define VK_HOME           0x24
#define VK_LEFT           0x25
#define VK_UP             0x26
#define VK_RIGHT          0x27
#define VK_DOWN           0x28
#define VK_SELECT         0x29
#define VK_PRINT          0x2A
#define VK_EXECUTE        0x2B
#define VK_SNAPSHOT       0x2C
#define VK_INSERT         0x2D
#define VK_DELETE         0x2E
#define VK_HELP           0x2F 
```

winuser.h 必须包含在 windows.h 中

# sockets - 在 Metro 中处理套接字创建/销毁时的泄漏

> ID：11987718
> 
> 赞同：2
> 
> 时间：2012-08-16T13:01:12.473
> 
> 标签：sockets, microsoft-metro, windows-runtime, memory-leaks, c++-cx

我正在尝试在 Windows 8 Metro 下编写网络应用程序。我的应用程序需要在运行时创建/销毁一些套接字。在尝试研究 WinRT 的网络 API 时，我发现了以下问题 - 我的进程在创建/销毁套接字时不断增加它的句柄数。为了确认我写了以下示例：

```
task<void>( []()
{
  // <checkpoint 1>

  for(int i=0; i < 200; i++)
  {
    // create socket
    DatagramSocket    ^socket = ref new DatagramSocket();

    // perform binding operation synchronously
    HRESULT  hr = S_OK;
    HostName ^localHostName     = ref new HostName(L"127.0.0.1");
    String   ^localServiceName  = L"10000";

    create_task( socket->BindEndpointAsync(localHostName, localServiceName) ).then(
      [&hr] (task<void> previousTask)
      {
        try
        {
          previousTask.get();  // get exception
        }
        catch (Exception^ exception)
        {
          hr = exception->HResult;
        }
      }).wait();

    ASSERT( SUCCEEDED(hr) );

    // close socket
    delete socket;      // C++ version of DatagramSocket.Close(), see MSDN
    socket = nullptr;
  }

  // <checkpoint 2>
}); 
```

此任务在主 App 的线程中创建。我已经设置了 2 个断点并在那里运行 Sysinternal 的 Handle 实用程序：

在检查点 1（在开始创建/销毁循环之前）：

```
Handle type summary:
  ALPC Port       : 10
  Desktop         : 1
  Directory       : 4
  EtwRegistration : 34
  Event           : 40
  File            : 3
  IoCompletion    : 2
  Key             : 17
  Mutant          : 1
  Section         : 5
  Semaphore       : 4
  Thread          : 9
  Timer           : 7
  TpWorkerFactory : 2
  WaitCompletionPacket: 7
  WindowStation   : 2
Total handles: 148 
```

在检查点 2（循环之后）：

```
Handle type summary:
  ALPC Port       : 9
  Desktop         : 1
  Directory       : 4
  EtwRegistration : 40
  Event           : 80
  File            : 5
  IoCompletion    : 145
  Key             : 20
  Mutant          : 1
  Section         : 5
  Semaphore       : 6
  Thread          : 26
  Timer           : 291
  TpWorkerFactory : 144
  WaitCompletionPacket: 295
  WindowStation   : 2
Total handles: 1074 
```

据此，我的应用程序不断泄漏 Timer、WaitCompletionPacket 和其他句柄。（我试图在循环后等待一段时间或在循环中插入延迟，希望工作人员能够完成他们的工作，但没有帮助）。那么这个示例有什么问题，我应该如何创建/绑定/销毁套接字对象？我正在使用 Windows 8 Consumer Preview，构建 8400。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:38:28.027

正如 Andy 所提到的，在将 Windows 8 Consumer Preview 更新到 Windows 8 RTM（以及 Visual Studio）之后，该问题就消失了。

# xcode - 生成多个输出文件时不能指定 -o

> ID：11987719
> 
> 赞同：2
> 
> 时间：2012-08-16T13:01:15.163
> 
> 标签：xcode

我有一个关于“生成多个输出文件时无法指定 -o”的问题

和“链接/xxxxxxxxxxxxxx/bulid/products/debug-iphonesimulator/project.app/app”<-问题链接

我想解决这个问题

但我认为我提供的信息不详细

如果我需要解决我的问题，我需要提供什么信息？

# c# - 实体框架更新

> ID：11987723
> 
> 赞同：1
> 
> 时间：2012-08-16T13:01:21.660
> 
> 标签：c#, wpf, entity-framework

当我更改表中的某些字段时，我无法更新。

*   数据库 ==> mysql
*   .net 框架 ==> 4.0
*   平台==> wpf应用

让我一步一步解释

我的目标是更新表中已经存在的项目。

```
 public bool SaveToVideoInfo(List<tblvideoinfo> vList,sbyte profilID)
    {
                     foreach (tblvideoinfo _videoinfo in vList)
            {

                try
                {

                ent.AddTotblvideoinfo(_videoinfo);
                ent.AddTotblprocess(CreateProcess(profilID,_videoinfo.VideoID));
                ent.SaveChanges();

                }
                catch (UpdateException )
                {

                   return UpdateToVideoInfo(_videoinfo);
                }            
        }

            return false;                     
    } 
```

如果表中已经存在项目，我将捕获此异常并调用我的更新函数

```
 public bool UpdateToVideoInfo(tblvideoinfo vInfo)
    {

        var updatingItem = (from a in ent.tblvideoinfo
                  where a.VideoID == vInfo.VideoID
                  select a).First();

        updatingItem.SearchKeywords = vInfo.SearchKeywords;
        updatingItem.SearchTimeStamp = DateTime.Now;

        return ent.SaveChanges() > 0;

    } 
```

因为如果它存在于表中，我想改变我上面写的一些字段。在运行 ent.SaveChanges() 之前一切都很好

我检查了我设置属性（SearchKeywords，SearchTimeStamp）的更新项目已更改

但是出现这个错误

> 更新条目时发生错误。有关详细信息，请参阅内部异常

这是详细信息

```
 at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   at System.Data.Objects.ObjectContext.SaveChanges()
   at MyDbHelper.DBHelper.UpdateToVideoInfo(tblvideoinfo vInfo)
   at MyDbHelper.DBHelper.SaveToVideoInfo(List`1 vList, SByte profilID)
   at youtube.MainWindow.p_Drop_Event(Object sender, Object to) in C:\Users\xxxxxx....\...\MainWindow.xaml.cs:line 1125
   at youtube.product.UserControl_MouseUp(Object sender, MouseButtonEventArgs e) in C:\Users\xxxxxx....\...\product.xaml.cs:line 239
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
   at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run()
   at youtube.App.Main() in C:\Users\xxxxxx....\...\Debug\App.g.cs:line 0
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

这是updatedItem的详细信息

![这是updatedItem的详细信息](../Images/c15803fd6e342de8cfe2f5c8ec1dc778.png)

方法，

```
 updatingItem.SearchKeywords = vInfo.SearchKeywords;
    updatingItem.SearchTimeStamp = DateTime.Now; 
```

这些代码是有效的。

同时，VideoID 在我的表中是**唯一**的，然后我无法添加具有相同 VideoID 的项目。但我想更新它。我认为更新问题来自这里。

我不想使用 sql 命令。

我只想更新表的两个字段...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:20:16.933

试着打电话

```
var updatingItem = (from a in ent.tblvideoinfo
                  where a.VideoID == vInfo.VideoID
                  select a).FirstOrDefault(); 
```

你正在使用

```
 updatingItem.SearchTimeStamp = DateTime.Now; 
```

您的数据库是否为此字段使用相同的数据类型（日期时间）？

一种选择是处理`ObjectContext.SavingChanges`事件，这使您有机会在保存更改之前对实体执行验证，甚至在必要时取消保存。这样，您可以确保在尝试保存更改之前设置任何不可为空的属性，并避免依赖异常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:13:30.530

我的猜测是，当您在同一上下文中再次调用 SaveChanges 时，它试图插入重复插入操作并再次失败。

`ent.AcceptAllChanges()`在 catch 块的开头调用可能会起作用。

也许处置上下文并创建另一个在更新函数中使用将是您最简单的选择。否则，您将需要更改您`ObjectStateEntry.State`尝试`Unchanged`插入的两个实体（videoinfo、process）的 to。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:09:12.230

有没有办法检查物品是否是新的？您可以将 设置`id`为 0 值或其他值，以便您可以轻松查看该项目是否是新的。

如果这不可能，您可以`SingleOrDefault`在 Id 上使用来检查实体是否存在。这样您就可以避免 updatexception 并在一次调用中处理所有内容。取决于此场景的数据库异常不是一个非常干净的解决方案。

一次通话处理所有事情应该可以解决您的问题。

# c# - 使用没有“成员资格”表的角色身份验证

> ID：11987730
> 
> 赞同：3
> 
> 时间：2012-08-16T13:01:41.117
> 
> 标签：c#, .net, web-config, forms-authentication, roles

我正在使用表单身份验证，并且我想将某些页面限制为某些角色。现在每个人都可以在登录后访问整个应用程序。

但我想将某些页面限制为某些角色。例如，“查看日志”页面。

我在想我的 web.config 文件应该是这样的：

```
<location path="logs/view/">
<system.web>
  <authorization>
    <allow roles="super, admin"/>
  </authorization>
</system.web> 
```

但我的问题是，构建底层应用程序的方式是，当用户通过 api 调用成功登录时，我会返回一个“用户”对象，并且该用户的角色是该对象的一部分（User.Role == “admin”） . 我真的没有一个参考数据库表来告诉 APP 用户具有什么角色。

我怎样才能关联

```
<allow roles="super, admin"/> 
```

在我的 webconfig 中位到 User 对象的角色属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:07:06.977

您可以连接到global.asax[`AuthenticateRequest`](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.authenticaterequest.aspx)中的实例事件。`HttpApplication`在这种情况下，您需要将`IPrincipal`实现配置为具有所需的设置。最简单的方法是实例化 a并[`RolePrincipal`](http://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.aspx)设置`User`.`HttpContext`

**更新**我刚刚查找了一些我在以前的答案中发布的示例实现。有一种基于 ASP.NET MVC，另一种基于 Web 窗体。

*   Web 窗体实现在 Global.asax 中连接起来：[IsAuthenticated 是错误的！奇怪的行为+评论问题](https://stackoverflow.com/questions/4703649/isauthenticated-is-false-weird-behaviour-review-question/4799032#4799032)

*   MVC 实现使用一个动作过滤器：[在 ASP.NET MVC2 中非常简单的单用户登录？](https://stackoverflow.com/questions/6398207/very-simple-single-user-login-in-asp-net-mvc2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:08:56.133

使用基于位置的设置。

```
<configuration>
   <location path="Logon.aspx">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

有关更多信息，您可以在[MSDN上进行演练](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)

# git - 回到特定的提交然后回到现在

> ID：11987731
> 
> 赞同：52
> 
> 时间：2012-08-16T13:01:46.280
> 
> 标签：git

我想查看过去某个特定提交的文件，我正在考虑，`git reset --hard`但我将无法看到该提交之外的提交。我如何回到提交（连同文件的状态），查看文件，然后再回到现在？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-16T13:09:40.593

假设您的当前分支是`master`旧提交是`a1b2c3`，那么您可以将工作树中的所有文件更改回旧提交：

```
git checkout a1b2c3 
```

...并返回`master`：

```
git checkout master 
```

这种在您的 git 历史记录中跳跃的方式（即使用其对象名称检查提交，也称为其哈希或 SHA1sum）对于查找先前的良好提交非常有用`git bisect`，例如，因为它不会移动您的分支.

需要记住的一件事是，在执行此操作时，您可能会收到一个令人`a1b2c3`困惑的警告：如果您从其对象名称 (`HEAD`代表您当前的分支，而是直接指向特定的提交。这没什么好担心的——它对于在你的历史中移动非常有用——但这确实意味着如果你在`HEAD`分离时创建新的提交，它们不会向前移动分支。

* * *

[fork0](https://stackoverflow.com/users/410126/fork0)在下面的注释中指出了可能有用的快捷方式`git checkout -`，它将检查`HEAD`指向的上一个分支或提交。

# actionscript-3 - 使用 Flash Builder 4 读取 flex3 中的 XML 文件数据

> ID：11987732
> 
> 赞同：1
> 
> 时间：2012-08-16T13:01:45.873
> 
> 标签：actionscript-3, apache-flex, actionscript

我是 Flex 动作脚本的新手（我正在使用 Flash Builder4）。我有一个 xml 文件 book.xml 和一个包含根据 book.xml 的图像的图像文件夹。我必须阅读 book.xml 文件并显示缩略图，当单击拇指时，它应该显示其全尺寸图像（“_T”表示拇指图像）。我怎样才能通过简单的步骤做到这一点。提前致谢..

book.xml 看起来像：

<?xml version="1.0" encoding="utf-8"?>
<root>

```
<pages>
    <page number="001">
        <fiwimage>/images/IT_P001.png</fiwimage>
        <thumbimage>/images/IT_P001_T.png</thumbimage>
    </page>
    <page number="002">
        <fiwimage>/images/IT_P002.png</fiwimage>
        <thumbimage>/images/IT_P002_T.png</thumbimage>
    </page>
    <page number="003">
        <fiwimage>/images/IT_P003.png</fiwimage>
        <thumbimage>/images/IT_P003_T.png</thumbimage>
    </page>
</pages> 
```

# mysql - mysql日志记录已打开但未在终端中显示

> ID：11987733
> 
> 赞同：0
> 
> 时间：2012-08-16T13:01:59.740
> 
> 标签：mysql, logging, ubuntu

我想打开 mysql 登录，并在浏览具有后端 mysql 数据库的 Web 应用程序时将日志结果转储到屏幕上。我有：

1.  编辑了位于 /etc/mysql/ 中的 my.cnf 文件。确保在 Logging and Replication 部分下存在以下两行：

    ```
     general_log_file        = /var/log/mysql/mysql.log
        general_log             = 1 
    ```

2.  重启了mysql。

3.  在命令提示符处键入“tail -f /var/log/mysql/mysql.log”

然后我尝试浏览我的应用程序，看看它是否会记录正在执行的不同 sql 语句。除了：

```
 /usr/sbin/mysqld, Version: 5.5.24-0ubuntu0.12.04.1-log ((Ubuntu)). started with:
  Tcp port: 3306  Unix socket: /var/run/mysqld/mysqld.sock
  Time                 Id Command    Argument 
```

我也试过：

```
 touch /var/log/mysql/mysql.log 
```

和

```
 chown mysql.mysql /var/log/mysql/mysql* 
```

确保 mysql 具有对该文件的访问/权限。你能告诉我我错过了什么吗？

谢谢。

# iphone - CLLocationManager 在 iOS 4.3 模拟器中不起作用

> ID：11987740
> 
> 赞同：3
> 
> 时间：2012-08-16T13:02:17.150
> 
> 标签：iphone, objective-c, ios, ios4, cllocationmanager

我正在使用 CLLocationManager 来确定我当前的位置：

```
- (void)viewDidLoad
{
    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    self.currentLocation = newLocation;
    NSTimeInterval locationAge = -[newLocation.timestamp timeIntervalSinceNow];
    if (locationAge > 5.0) return;
    if (newLocation.horizontalAccuracy < 0) return;
    if (self.currentLocation == nil || self.currentLocation.horizontalAccuracy > newLocation.horizontalAccuracy) {
        self.currentLocation = newLocation;
    }
    [locationManager stopUpdatingLocation];
} 
```

它适用于 iOS 5.1 模拟器，但不适用于 iOS 4.3 模拟器，我认为在 iOS 5.1 之前的真实设备中可能会出现问题。为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T03:56:48.590

iOS模拟器不支持iOS 5之前的模拟位置。您遇到的问题是模拟器的限制。

# sql - 如何计算每周的开始日期

> ID：11987743
> 
> 赞同：1
> 
> 时间：2012-08-16T13:02:26.620
> 
> 标签：sql, sql-server, datetime, stored-procedures

我有一个存储函数，它应该计算出我的工资单周开始日期。哪个是“星期四” 但是我的存储过程总是将我的开始日期设为“星期五” 我的声明和设置函数有什么问题？我希望我的 StartWeekDay 为“Thursday”...“lStartday”在帐户表中设置为“5”我的代码如下：

```
DECLARE @StartWeekDay int 
SET @StartWeekDay = (Select lStartDay From Account Where lLocationID = 1)

DECLARE @CurrentDate DateTime 
SET @CurrentDate = GetDate()
DECLARE @CurrentWeekDay int
SET @CurrentWeekDay = DATEPART(dw,@CurrentDate)

DECLARE @Diff int
SET @Diff = @StartWeekDay - @CurrentWeekDay

SET @Diff = Case When @Diff > 0 Then -6 When @Diff = 0 Then 0 Else @Diff End

--
 DECLARE @DaysToStart int
 SET @DaysToStart = (DatePart(dw,@CurrentDate) - @StartWeekDay)
 IF @DaysToStart <= .1 
  BEGIN
    SET @DaysToStart = @DaysToStart + 7 
  END

 DECLARE @myStartWeekDate DateTime
 --SET @myStartWeekDate = dbo.DateOnly(DATEADD(d,@Diff,@CurrentDate))
 SET @myStartWeekDate =  Convert(nvarchar,DateAdd(d,-@DaysToStart,@CurrentDate),101) -- getting DATE only
-- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:22:40.467

以下查询是将日期四舍五入到一周开始的标准方法。然而，这被视为星期一......

```
DATEADD(WEEK, DATEDIFF(WEEK, 0, @YourDate), 0) 
```

如果您将值偏移 3，这会将函数更改为向下舍入到上一个星期四...

```
DATEADD(WEEK, DATEDIFF(WEEK, 0, @YourDate-3), 3) 
```

**编辑：**这应该是 3，而不是 4...

```
SET @yourDate    = getDate()
SET @firstDay    = 3
SET @RoundedDate = DATEADD(WEEK, DATEDIFF(WEEK, 0, @YourDate-@firstDay), @firstDay)

 Value of @firstDay | Day of week this will round to
--------------------+--------------------------------
        0           |        Monday
        1           |        Tuesday
        2           |        Wednesday
        3           |        Thursday
        4           |        Friday
        5           |        Saturday
        6           |        Sunday 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:12:48.277

lStartDay = 5 总是会给你星期五。您需要为星期四添加 4

```
DECLARE @DaysToStart int
 SET @DaysToStart = (DatePart(dw,@CurrentDate) - @StartWeekDay)
 IF @DaysToStart <= .1 
  BEGIN
    SET @DaysToStart = @DaysToStart + 7 
  END 
```

如果您声明 @DaysToStart 并且 DatePart 也返回 INT，为什么要与 .1 进行比较？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:23:04.333

```
 DECLARE @StartWeekDay int 
    SET @StartWeekDay = 5

    DECLARE @CurrentDate DateTime 
    SET @CurrentDate = '8/24/2012'
    DECLARE @CurrentWeekDay int
    SET @CurrentWeekDay = DATEPART(dw,@CurrentDate)
    SELECT @CurrentWeekDay;

    DECLARE @Diff int
    SET @Diff = @StartWeekDay - @CurrentWeekDay

    SET @Diff = Case When @Diff > 0 Then -6 When @Diff = 0 Then 0 Else @Diff End

    --
     DECLARE @DaysToStart int
     SET @DaysToStart = (DatePart(dw,@CurrentDate) - @StartWeekDay)
--change here to <1 and not <=1 that will add 8 and return friday at the end
     IF @DaysToStart < 1 
      BEGIN
        SET @DaysToStart = @DaysToStart + 7 
      END
      SELECT @DaysToStart;
     DECLARE @myStartWeekDate DateTime
     --SET @myStartWeekDate = dbo.DateOnly(DATEADD(d,@Diff,@CurrentDate))
     SET @myStartWeekDate =  Convert(nvarchar,DateAdd(d,-@DaysToStart,@CurrentDate),101) 
     SELECT @myStartWeekDate 
```

# iphone - Xcode 4.3 为键盘返回键添加动作

> ID：11987747
> 
> 赞同：4
> 
> 时间：2012-08-16T13:02:51.490
> 
> 标签：iphone, objective-c, cocoa-touch, ios5

如何使键盘上的返回键执行（IBAction）的动作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T13:52:14.460

好吧，这很简单，只需添加：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField{
    [self yourButtonName:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:16:10.000

实现 UITextFieldDelegate：

```
@interface yourClass : UIViewController<UITextFieldDelegate> 
```

使用委托方法：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField{
    //do whatever you need here
    //maybe you have several textFields, so first check which one was hit the return key:
    if(textField == outlet_to_your_textField_1){
        //do this
    }
    else if(textField == outlet_to_your_textField_2){
        //do that
    }
    else if ....  blablabla and so on

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:50:32.680

这就是我的处理方式 当我在 iPhone 键盘上按 Return 键时，软键盘会从文本视图返回。这里有三种简单的方法来处理键盘

1.  单击按钮时键盘返回。
2.  当用户单击键盘上的 Return 或 Done 按钮时，键盘返回。
3.  当用户触摸背景屏幕/视图时，键盘返回。

> [iPhone教程中的软键盘处理](http://www.rdcworld-iphone.blogspot.in/2013/03/handling-soft-keypad-in-iphone-tutorial.html)

希望这会帮助你。

# php - SimplePie 获取站点上所有提要的 url

> ID：11987752
> 
> 赞同：1
> 
> 时间：2012-08-16T13:03:02.393
> 
> 标签：php, simplepie

我正在尝试基于 url 发现提要。

```
 $this->simplepie->set_feed_url('http://bitelia.com');
    $this->simplepie->init();
    $this->simplepie->handle_content_type();
    var_dump($this->simplepie->subscribe_url());
    var_dump($this->simplepie->get_all_discovered_feeds()); 
```

这有几个问题。我正在传递一个 url（它不是提要 url），我希望能发现提要。

如果站点上有提要，调用会`subscribe_url()`返回提要 url，但如果站点上没有提要，则只`subscribe_url`返回我传入的 url。此外`get_all_discovered_feeds()`还没有为我返回任何内容（只是一个空数组）。

我的问题是：有没有一种可靠的方法可以使用 SimpliePie 获取域上的所有提要？我很感激你的时间。谢谢你。

# asp.net - Linq 查询在 LinqPad 中工作，但在 VS 中不工作

> ID：11987753
> 
> 赞同：2
> 
> 时间：2012-08-16T13:03:03.220
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

```
var rooms = tblRoom
        .Where(r => r.hotel_id==1)
        .GroupBy(p => p.tblType)
        .Select(g => new
            {
            TypeName = g.Key.type_name,
            TypeID = g.Key.type_id,
            TypeCount = g.Count()
            });

            rooms.Dump(); 
```

在 LinqPad - 这工作正常，并返回： ![LinqPad 屏幕截图](../Images/d849f227027c1a167c2aeb783437f371.png)

但是，当我将其传输到 Visual Studio 时：

```
var rooms = dbr.Rooms
                .Where(r => r.hotel_id == 1)
                .GroupBy(p => p.type_id)
                .Select(g => new 
                {
                    TypeName = g.Key.type_name,
                    TypeID = g.Key.type_id,
                    TypeCount = g.Count()
                }); 
```

我在 g.Key.type_name 部分收到消息：

**“long”不包含“type_name”的定义，并且找不到接受“long”类型的第一个参数的扩展方法“type_name”（您是否缺少 using 指令或程序集引用？）**

我正在尝试将结果添加到以下视图模型：

```
 public class RatesViewModel
    {
        public string TypeName { get; set; }
        public long TypeID { get; set; }
        public int TypeCount { get; set; }
    } 
```

我再次确定，它一定是我缺少的一些简单的东西 - 所以任何有助于将结果放入视图模型的帮助，将不胜感激。

谢谢，马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:04:53.137

> 我正在尝试将结果添加到以下视图模型：

我看不到您在代码中与此视图模型的关系如何。您正在简单地查询您的存储库并返回一个匿名对象。

如果要返回视图模型，请调整查询以投影到此视图模型：

```
var rooms = dbr
    .Rooms
    .Where(r => r.hotel_id == 1)
    .GroupBy(p => p.type_id)
    .Select(g => new RatesViewModel
    {
        TypeName = g.Key.type_name,
        TypeID = g.Key.type_id,
        TypeCount = g.Count()
    })
    .ToList();
return View(rooms); 
```

现在您的视图显然将被强输入到视图模型中：

```
@model IEnumerable<RatesViewModel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:05:37.447

你有两个问题。首先，您的 LINQ 查询正在创建匿名对象的枚举。您只需要修改查询以指定解决该问题的类型。

接下来是您尝试将查询结果分配给单个对象，而不是对象的枚举。要解决这个问题，您只需要添加一个`First()`（或`Single()`、、`FirstOrDefault()`或`SingleOrDefault()`依赖）：

```
.Select(g => new RatesViewModel
{
    TypeName = g.Key.type_name,
    TypeID = g.Key.type_id,
    TypeCount = g.Count()
}.First() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:08:57.397

查看`GroupBy`Linqpad 与 Visual Studio 中的行。您正在按不同的事物进行分组。

在第一个中，您按对象分组，但在第二个中，您按数字分组。`Key`是被分组的对象，因此当您按数字分组时调用不起作用`g.key.type_name`。

# c# - C#文本框停止闪烁

> ID：11987755
> 
> 赞同：1
> 
> 时间：2012-08-16T13:03:11.467
> 
> 标签：c#, textbox

我有一个显示应用程序日志的多行文本框。如果长度大于 1k 个字符，我会删除日志。问题是它在闪烁。如果数据不同，我使用计时器控件来更新带有条件的文本框。

有什么办法吗？还是有更好的方法来显示日志？谢谢！

```
// this is inside timer
if(txt_log.Text != MY_LOG_VAR){
   txt_log.Text = MY_LOG_VAR;
}

// function to update log
public void Log(string data){

  MY_LOG_VAR = data + "\r\n" + MY_LOG_VAR;

  if(MY_LOG_VAR.Length > 1000){
     substr...
  }
} 
```

Log函数甚至可以每秒调用20次，定时器间隔设置为100秒；

它不会闪烁太多，但是如果将大量数据提交到日志中，我需要一个解决方案，该解决方案可以让文本框甚至全屏而不闪烁.. 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:26:14.397

对于 TextBox 的绘制方式，您无能为力。它犯了一些错误，比如在没有 WM_PAINT 的情况下进行绘画，这在 1985 年非常重要，当时它必须在严重受限的硬件上运行。1K 字符相当低端，64K 是一个不错的整数，可以减少闪烁。并确保在两者之间使用 AppendText。

除此之外，请考虑使用 RichTextBox。它双缓冲，并有更好的方法使文本只读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:21:21.340

您应该尝试使用[TextBox.AppendText](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.appendtext.aspx)而不是替换文本框的全部内容。

```
// function to update log 
public void Log(string data)
{ 
  textBox1.AppendText(data + "\r\n");
  MY_LOG_VAR = data + "\r\n" + MY_LOG_VAR; 

} 
```

这与将新文本放在前一个文本之前不同，但我认为应该停止闪烁。我用 RichTextBox 做了一些测试，根本没有闪烁（正如 Hans Passant 在回答中所说的那样）......

例如，滚动而不闪烁

```
 richTextBox1.AppendText(data +"\n");
 richTextBox1.SelectionStart = richTextBox1.GetFirstCharIndexFromLine(richTextBox1.Lines.Count()-1);
 richTextBox1.ScrollToCaret(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:27:54.020

您是否尝试过在文本框中调用 BeginUpdate/EndUpdate 来围绕您的更新？

# bash - 如何查找被触发的命令的日期明智的历史记录

> ID：11987761
> 
> 赞同：10
> 
> 时间：2012-08-16T13:03:35.357
> 
> 标签：bash, history

除了命令行之外，如何使历史命令显示日期和时间信息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T13:10:49.780

执行命令的历史记录由您的 shell 存储。尝试向您添加类似的内容`~/.bashrc`

```
export HISTTIMEFORMAT="%m/%d - %H:%M:%S: " 
```

它将更改`HISTTIMEFORMAT`变量，并且 bash 将相应地在其历史记录中存储一个时间戳。那么你的历史将如下所示

```
487  08/16 - 16:12:01: cd Downloads
488  08/16 - 16:12:04: ls -a
489  08/16 - 16:12:37: cat README | less
490  08/16 - 16:12:58: pkg-config --list-all | grep webkit
491  08/16 - 16:13:04: history 
```

可用的标识符是

```
%d - Day
%m - Month
%y - Year
%T - Time
%H - Hours
%M - Minutes
%S - Seconds 
```

# php - php通过值或引用传递

> ID：11987764
> 
> 赞同：5
> 
> 时间：2012-08-16T13:03:46.543
> 
> 标签：php

据我了解，当我按值传递数组时，会创建数组的副本。即在下面的程序中$y & $z 应该需要与$x 相同的内存。但是内存利用率几乎没有增加。很明显我的理解是错误的，任何人都可以解释原因。

```
for($i=0;$i<1000000;$i++)

        $x[] = $i; // memory usage : 76519792

echo memory_get_usage(); 

function abc($y){

    $y[1] = 1; //memory usage  : 76519948 
    $z[]= $y;   //memory usage : 76520308

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:11:36.977

我听说php使用copy-on-write： [http ://en.wikipedia.org/wiki/Copy-on-write](http://en.wikipedia.org/wiki/Copy-on-write)

举个例子：

```
<?
for($i=0;$i<100000;$i++)
    $x[] = $i;

// we output the memory use:
echo memory_get_usage().'<br/>';  // outputs 14521040

// here we equate $y to $x, but instead of creating a copy, 
// php engine just creates a pointer to the same memory space
$y = $x;

echo memory_get_usage().'<br/>';  // outputs 14521128

// here we change something in y, now php engine 
// "creates a seperate copy" for y and makes the change
$y[1]=8;

echo memory_get_usage().'<br/>';  // outputs 23569904

?> 
```

以及函数调用的类似行为：

```
<?
for($i=0;$i<100000;$i++)
    $x[] = $i;

echo memory_get_usage().'<br/>'; /* 14524968 */

function abc($y){
    echo memory_get_usage().'<br/>'; /* 14524968 */
    $y[1] = 1;
    echo memory_get_usage().'<br/>'; /* 23573752 */
    $z[]= $y;  
    echo memory_get_usage().'<br/>'; /* 23574040 */

}
abc($x);
echo memory_get_usage().'<br/>'; /* 14524968 */
?> 
```

PS：我在windows上测试这个，可能在linux上不一样

# java - Android OpenGL ES 2.0 - 在 onDestroy() 中使用 glDelete*

> ID：11987770
> 
> 赞同：1
> 
> 时间：2012-08-16T13:03:54.530
> 
> 标签：java, android, c, android-ndk, opengl-es-2.0

我想在我的 android 游戏中释放纹理、缓冲区和着色器，如果用户点击后退按钮，调用活动的**finish()**方法，导致**onDestroy()**，我覆盖它以清理游戏数据，关闭服务器连接等等。
我在清单中设置**了 android:launchMode="singleTask"**，因此调用活动的 finish() 总是会导致立即销毁。
但是要使用**glDeleteBuffers(...)**，例如，它必须从具有 EGL 上下文的线程（渲染器线程）调用，但即使从 Renderer 类设置和调用此类方法，我也会得到 - 没有 OpenGL ES 上下文错误。

我使用 NDK，所以**NativeLib.***调用一个 C/C++ 函数，例如

```
JNIEXPORT void JNICALL /*class path*/_NativeLib_onDrawFrame(JNIEnv* env, jclass _class)
{
 glClear(GL_COLOR_BUFFER_BIT);
 ...
} 
```

看法

```
public class OGLES2View extends GLSurfaceView
{

  private static class OGLES2Renderer implements GLSurfaceView.Renderer
  {
    public void onDrawFrame(GL10 unused)
    {
        NativeLib.onDrawFrame();
    }

    public void onSurfaceChanged(GL10 unused, int width, int height)
    {
        NativeLib.onSurfaceChanged(width, height);
    }

    public void onSurfaceCreated(GL10 unused, EGLConfig unusedConfig)
    {
        NativeLib.onSurfaceCreated();
    }

    public void onSurfaceDestroy()
    {
        Log.i(LOG_TAG, "Destroying Opengl objects");
        NativeLib.onGLDestroy();//Don't work - call to OpenGL API with current context
    }

}

public OGLES2Renderer renderer = null; 
public OGLES2View(Context context)
{
    super(context);
    setRenderer(renderer = new OGLES2Renderer());
} 
```

在活动中

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    ogles2View = new OGLES2View(this);
    setContentView(ogles2View);
}

@Override
protected void onDestroy()
{
    Log.i(LOG_TAG, "Got finish request for game");
    super.onDestroy();
    ogles2View.render.onSurfaceDestroy(); // Don't not work
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:29:45.363

一旦 EGL 上下文被破坏，所有的 GL 缓冲区等都将随之破坏，因此这是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-04T16:21:36.080

如果有人*确实*需要在销毁之前`EGLContext`（或在给定方法之外的任何执行点）在 GLThread 上运行某些东西，您可以使用 的[`queueEvent()`](https://developer.android.com/reference/android/opengl/GLSurfaceView.html#queueEvent(java.lang.Runnable))方法`GLSurfaceView`将 a 发布`Runnable`到 GLThread。请注意，您必须`setRenderer()`在使用之前调用`queueEvent()`。

示例（针对 OP 的问题）：

```
...

public void onSurfaceDestroy()
{
    queueEvent(new Runnable() {
        @Override
        public void run() {
            Log.i(LOG_TAG, "Destroying Opengl objects");
            NativeLib.onGLDestroy(); //Works since it's called on the GLThread
        }
    }
}

... 
```

# firefox - 为什么 Verdana 在不同操作系统（如 Windows 和 OS X）上的不同浏览器中呈现不同？

> ID：11987773
> 
> 赞同：2
> 
> 时间：2012-08-16T13:04:09.397
> 
> 标签：firefox, google-chrome, css, baseline

我发现 Chrome 不会像 OS X 上的 Firefox 一样对齐 Verdana。例如，应用以下 CSS 规则进行比较：

```
font-family:verdana;
font-size:12px;
line-height:auto; 
```

此图显示了每个操作系统（Mac OS X 10.8、Windows 7）上浏览器（Chrome 22、Firefox 14）之间的差异。

> ![图片](../Images/7510f0950a4ed98200dbc5e29537843c.png)

这是相应的[jsfiddle](http://jsfiddle.net/jaggli/btVDv/)玩弄：

```
body {
  font-family: verdana;
  font-size: 12px;
  line-height: auto;
}

.banner {
  background: #e2e2e2;
  text-decoration: none;
  color: black;
}

.fixed {
  line-height: 15px;
}
```

```
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Verdana</title>
</head>

<body>
  <p class="banner">
    1.) line-height: auto
  </p>
  <p class="banner fixed">
    2.) line-height: 15px
  </p>
</body>

</html>
```

**如何在按钮中间的按钮上垂直对齐文本 - 跨浏览器和跨操作系统？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:07:40.720

只需使 line-height 等于包装器的高度。这将使文本垂直居中。

```
.button {
   height:20px;
   line-height:20px;
} 
```

# php - PHP 包括，包括社交按钮

> ID：11987776
> 
> 赞同：0
> 
> 时间：2012-08-16T13:04:11.690
> 
> 标签：php, javascript, html, server-side-includes

我在我网站的每个页面上都使用了它，如下所示，以避免在 Firefox 中查看网站时显示社交按钮：

```
<?php
if (!empty($_SERVER['HTTP_USER_AGENT']))
{
$isFirefox = (strpos($_SERVER['HTTP_USER_AGENT'],"Firefox") !== false);
} else {
$isFirefox = false;
}
if ($isFirefox) { echo ' '; }
else
include("/includes/social_buttons.php");?> 
```

我的

> social_buttons.php

包含以下代码：

```
<!--=================== social buttons ==================-->
<div id="social">
<!-- Google +1 button -->
<div style="float:right;padding-top:1px;">
<script type="text/javascript">document.write('<div class="g-plusone" data-size="tall"><\/div>');</script>
<script type="text/javascript">
(function() {
var z = document.createElement('script'), s = document.getElementsByTagName('script')[0];
z.type = 'text/javascript';
z.async = true;
z.src = 'https://apis.google.com/js/plusone.js';
s.parentNode.insertBefore(z, s);
})();
</script>
</div>
<!-- End Google +1 button -->

<!-- Facebook button -->
<div style="float:right;padding-right:2px;">
<script type="text/javascript">
//<![CDATA[
document.write('<div id="fb-root"><\/div><fb:like href="<?php echo $url;?>" send="false" layout="box_count" width="35" show_faces="false" font="arial"><\/fb:like>');
(function() {
var s = document.createElement('SCRIPT'), s1 = document.getElementsByTagName('SCRIPT')[0];
s.type = 'text/javascript';
s.async = true;
s.src = 'http://connect.facebook.net/en_US/all.js#xfbml=1';
s1.parentNode.insertBefore(s, s1);
})();
//]]>
</script>
</div>
<!-- End Facebook button -->

<!-- Tweet Button -->
<div style="float:right; margin-right:11px;">
<a href="http://twitter.com/share?via=youraccount&amp;count=vertical" class="twitter-share-button">Tweet</a>
<script type="text/javascript">
var a = document.createElement('script'), b = document.getElementsByTagName('script')[0];
a.type = 'text/javascript';
a.async = true;
a.src = 'http://platform.twitter.com/widgets.js';
b.parentNode.insertBefore(a,b);
</script>
</div>
<!-- End Tweet Button -->
<!-- end #social --></div>
<!--=================== end.social buttons ==================--> 
```

现在的问题是，我想在我的 social_buttons.php 中添加一些额外的内容，这些内容将显示在包括 firefox 在内的每个浏览器中。

所以我的尝试（这没有奏效！）是把它全部放在我的 social_buttons.php 中，然后用更简单的包含调用来调用它

```
<?php include("/includes/social_buttons.php");?> 
```

所以 social_buttons.php 的内容看起来像这样：

```
<?php if (!empty($_SERVER['HTTP_USER_AGENT']))
    {
    $isFirefox = (strpos($_SERVER['HTTP_USER_AGENT'],"Firefox") !== false);
    } else {
    $isFirefox = false;
    }
    if ($isFirefox) { echo ' '; }
    else
    echo ("
    <!--=================== social buttons ==================-->
    <div id="social">
    <!-- Google +1 button -->
    <div style="float:right;padding-top:1px;">
    <script type="text/javascript">document.write('<div class="g-plusone" data-size="tall"><\/div>');</script>
    <script type="text/javascript">
    (function() {
    var z = document.createElement('script'), s = document.getElementsByTagName('script')[0];
    z.type = 'text/javascript';
    z.async = true;
    z.src = 'https://apis.google.com/js/plusone.js';
    s.parentNode.insertBefore(z, s);
    })();
    </script>
    </div>
    <!-- End Google +1 button -->

    <!-- Facebook button -->
    <div style="float:right;padding-right:2px;">
    <script type="text/javascript">
    //<![CDATA[
    document.write('<div id="fb-root"><\/div><fb:like href="<?php echo $url;?>" send="false" layout="box_count" width="35" show_faces="false" font="arial"><\/fb:like>');
    (function() {
    var s = document.createElement('SCRIPT'), s1 = document.getElementsByTagName('SCRIPT')[0];
    s.type = 'text/javascript';
    s.async = true;
    s.src = 'http://connect.facebook.net/en_US/all.js#xfbml=1';
    s1.parentNode.insertBefore(s, s1);
    })();
    //]]>
    </script>
    </div>
    <!-- End Facebook button -->

    <!-- Tweet Button -->
    <div style="float:right; margin-right:11px;">
    <a href="http://twitter.com/share?via=youraccount&amp;count=vertical" class="twitter-share-button">Tweet</a>
    <script type="text/javascript">
    var a = document.createElement('script'), b = document.getElementsByTagName('script')[0];
    a.type = 'text/javascript';
    a.async = true;
    a.src = 'http://platform.twitter.com/widgets.js';
    b.parentNode.insertBefore(a,b);
    </script>
    </div>
    <!-- End Tweet Button -->
    <!-- end #social --></div>
    <!--=================== end.social buttons ==================-->
    ");?>

    SOME OTHER CODE I WANT TO INCLUDE 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:10:21.233

[赫雷多克](http://php.net/manual/de/language.types.string.php)呢？

```
if ($isFirefox)
{ 
  echo ' ';
}
else
{
  $url = $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

  echo <<<BLAH
  Hello World! I'm $name. <a href="$url">This is a link to this site</a>
BLAH; // important: this keyword has to be at the beginning of a line (do not add any char before this keyword)

} 
```

或者转义你的javascript（双引号）

# java - 必需的 java.util.ArrayList ，找到 java.lang.Object ：我不明白这个错误的原因

> ID：11987781
> 
> 赞同：0
> 
> 时间：2012-08-16T13:04:35.543
> 
> 标签：java, foreach, arraylist

以下是来自 jsp 页面的一些片段：

```
<%! ArrayList songList = new ArrayList<String>(); %>

    <%
        songList = StoreSongLink.linkList;
        // linkList is a static variable in the class StoreSongLink
        // There the linkList is defined as public static ArrayList<String> linkList = new ArrayList<String>();
    %>

<%}  else {
       for (ArrayList<String> list : songList){}

%> 
```

else srciplet 中的代码会产生错误`required java.util.ArrayList<String> found java.lang.Object`。为什么是这样 ？我不明白这是为什么。

***为什么编译器说 songList 的类型是 Object ？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:10:22.607

您应该在开始时明确声明它：

```
ArrayList<String> songList = new ArrayList<String>(); 
```

如果你这样声明：

```
ArrayList songList = new ArrayList<String>(); 
```

然后你说`songList`的是s 的一个`ArrayList`，`Object`不管 s 的右边是什么`=`。分配不会改变这一点，所以这个：

```
ArrayList songList = new ArrayList<String>();
songList = StoreSongLink.linkList; 
```

不改变的类型`songList`，它仍然有效`ArrayList<Object>`。

如果您修复了声明，那么您的`for`循环应该如下所示：

```
for (String list : songList){} 
```

因为`songList`是`String`s 的数组列表。正如您所拥有的那样，Java`Object`从中提取每个`songList`并尝试将其分配给您`:`在`ArrayList<String>`. 它不能转换`Object`为`ArrayList<String>`（特别是因为`Object`它实际上只是`String`下面的），所以它会抛出一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:12:12.387

```
for (ArrayList<String> list : songList){} // Error is here 
```

并且您已经定义了 Object 类型的 ArrayList 的引用并声明了一个 String 类型的 ArrayList 实例，该实例应该是`ArrayList<String> songList = new ArrayList<String>();` or `ArrayList<String> songList = new ArrayList();`（仅支持 java 7）

所以更正后的代码可能像 -

```
<%! List<String> songList = new ArrayList<String>(); %>
...
for (String list : songList){
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:09:57.770

采用：

```
for (String s: songList) {
  // etc.
} 
```

还要确保`StoreSongLink.linkList`是 type `ArrayList<String>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:10:04.777

```
for (ArrayList<String> list : songList){} 
```

一定是

```
for (Object list : songList){} 
```

因为 songList 声明的类型是 ArrayList(equal ArrayList)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T13:10:40.490

当您为 songList 分配一个新的 ArrayList 时，您将 songList 定义为一个 arrayList（即 arrayList）。这样就可以将歌曲列表作为对象进行迭代。但是您实际上是在将 songList 作为 ArrayList 进行迭代。

所以简而言之，您需要将 songList 切换为 ArrayList，并且您需要使用字符串而不是 ArrayList 来迭代 songList。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T13:11:24.043

`ArrayList`正如您可能知道的那样，当不使用参数化`ArrayList<E>`声明时，它是一种原始类型。因此，您通过初始化有效地将其转换为数组列表`Object`而不是：`String`
`ArrayList songList = new ArrayList<String>();`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T13:14:39.510

**你的迭代是错误的**

```
for (ArrayList<String> list : songList){} 
```

`songList`包含`String`元素列表而不是列表`ArrayList<String>`

所以你需要以这种方式迭代`for (Object song: songList){}`

或者

```
ArrayList<String> songList = new ArrayList<String>();
for (String song: songList){} 
```

# javascript - 脚本可以在没有 jQuery UI 的情况下工作，但不能与 jQuery UI 选择菜单一起使用

> ID：11987783
> 
> 赞同：1
> 
> 时间：2012-08-16T13:04:38.383
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-selectmenu

作为 JS 的新手，我创建了一个非常简单的脚本来显示和隐藏选择菜单中的“禁用”功能。

一切正常，直到我为选择菜单加载 jQuery UI。然后它不再起作用了。

我尝试了一整天来解决它，但不能。也许任何人都可以帮助我。

```
// Metadata
$('#year').change(function(){
    var sel = $(this); 
    var val = sel.val();

    if(val == "2008")
    {
         $('#c2').find("option:eq(1)").removeAttr("disabled");
    }
    else
    {
        $('#c2').find("option:eq(1)").attr("disabled", "disabled");

    }

}); 
```

应该发生的是，当任何人从#year 中选择“2008”时，它应该启用#c2 中的选项1，反之亦然。

[这里](http://view.jqueryui.com/selectmenu/tests/visual/selectmenu/disabled.html)似乎可行，但我无法将脚本弯曲到我自己的试验和错误中。

**更新代码**

```
<script>
// Metadata
$("#year").selectmenu({

    // listen to the select event of the custom menu, not the original dropdown
    select: function(){
        var val = $(this).val();

       if(val == "2008"){
             $("#c2").find("option:eq(2)").removeAttr("disabled");
        }
        else{
            $("#c2").find("option:eq(2)").attr("disabled", "disabled");
        }

        // must call this to reflect the change
        $("#c2").selectmenu("refresh");
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:13:27.380

查看您链接的演示页面的源代码，似乎有必要通过调用其刷新方法来更新选择菜单。

来自演示源的示例：

```
files2.find("option:eq(0)").attr("disabled", "disabled");
files2.selectmenu("refresh"); // <-- this 
```

我认为这就是您要寻找的内容：http: [//jsfiddle.net/zuXSU/2/](http://jsfiddle.net/zuXSU/2/)。当我更改菜单时，其中一个选项启用/禁用。

## 相关代码

```
$("#year").selectmenu({

    // listen to the select event of the custom menu, not the original dropdown
    select: function(){
        var val = $(this).val();
        alert(val);

        if(val == "2008"){
             $(this).find("option:eq(1)").removeAttr("disabled");
        }
        else{
            $(this).find("option:eq(1)").attr("disabled", "disabled");
        }

        // must call this to reflect the change
        $(this).selectmenu("refresh");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:02:30.093

尝试这个

```
 $("#year").enableSelection(); 
```

可能这对你有帮助

# webdeploy - 如何调试您的 Web 部署项目

> ID：11987785
> 
> 赞同：0
> 
> 时间：2012-08-16T13:04:40.397
> 
> 标签：webdeploy

我有一个 webdeploy 项目，我需要检查某个特定步骤是否已运行。有人告诉我，有一些命令可以在日志中打印一些给定的文本。any1 有关于如何做到这一点的想法吗？简单地说：我需要在特定目标开始之前写“开始”，在目标完成后写“停止”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:52:52.760

如果您`<UseMsDeployExe>true</UseMsDeployExe>`在 wpp.targets 或 pubxml 中设置，它将在输出窗口中包含完整的命令行。

`/v:diag`否则，您可以通过使用参数从命令行执行发布来启用诊断日志记录。

如果以上方法均无帮助，您可以[启用 MSBuild 调试器](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx)并以交互方式调试部署。

# android - android ExceptionInInitializerError 上的 JavaCV

> ID：11987788
> 
> 赞同：3
> 
> 时间：2012-08-16T13:04:50.397
> 
> 标签：android, opencv, javacv, computer-vision

我一直在尝试在 Android 项目上运行 JavaCV 代码。此代码在 Windows 7 上运行时对我有用（使用 Eclipse）。

我搜索了我得到的错误，并尝试按照本论坛答案和其他人的描述设置所有内容，但仍然没有运气。

我用 *.Jar 文件创建了一个 libs 文件夹，并将它们包含在我的构建路径中。我还将 *.so 文件添加到 libs\armeabi 文件夹

我会感谢你在这件事上的及时重播。

以下是所有细节。

库文件夹：

```
 <DIR>        .
 <DIR>          ..
 <DIR>          armeabi
 <DIR>          armeabi-v7a
         83,949 javacpp.jar
      1,239,034 javacv-macosx-x86_64.jar
        932,050 javacv-windows-x86.jar
      1,211,623 javacv-windows-x86_64.jar
        955,900 javacv.jar

'armeabi' folder:

7,306,044 libavcodec.so
   40,484 libavdevice.so
  578,872 libavfilter.so
1,169,460 libavformat.so
  141,516 libavutil.so
  394,443 libjniARToolKitPlus.so
  418,079 libjniavcodec.so
   95,819 libjniavdevice.so
  218,655 libjniavfilter.so
  225,831 libjniavformat.so
  153,427 libjniavutil.so
  112,051 libjnicvkernels.so
  125,263 libjniopencv_calib3d.so
  613,075 libjniopencv_contrib.so
  545,215 libjniopencv_core.so
  238,119 libjniopencv_features2d.so
  101,479 libjniopencv_flann.so
   57,979 libjniopencv_highgui.so
  249,339 libjniopencv_imgproc.so
1,017,267 libjniopencv_legacy.so
  663,071 libjniopencv_ml.so
   86,719 libjniopencv_nonfree.so
  241,027 libjniopencv_objdetect.so
   39,579 libjniopencv_photo.so
  680,443 libjniopencv_stitching.so
  110,255 libjniopencv_video.so
  167,499 libjniopencv_videostab.so
   87,503 libjnipostproc.so
   91,627 libjniswresample.so
  108,119 libjniswscale.so
  957,220 libopencv_calib3d.so
1,063,888 libopencv_contrib.so
2,349,724 libopencv_core.so
  880,336 libopencv_features2d.so
  706,228 libopencv_flann.so
1,146,792 libopencv_highgui.so
1,990,768 libopencv_imgproc.so
1,415,324 libopencv_legacy.so
  880,584 libopencv_ml.so
  458,764 libopencv_nonfree.so
  422,580 libopencv_objdetect.so
   68,080 libopencv_photo.so
  769,728 libopencv_stitching.so
  902,676 libopencv_ts.so
  203,904 libopencv_video.so
  560,688 libopencv_videostab.so
   89,080 libpostproc.so
   65,572 libswresample.so
  204,020 libswscale.so

The error log file:

08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.BufferedImage', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 942 (Ljava/awt/image/BufferedImage;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x000e
08-16 15:12:56.030: I/dalvikvm(3801): Could not find method java.awt.color.ColorSpace.getInstance, referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve static method 13250: Ljava/awt/color/ColorSpace;.getInstance (I)Ljava/awt/color/ColorSpace;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x71 at 0x0033
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.ComponentColorModel', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 944 (Ljava/awt/image/ComponentColorModel;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x0052
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.BufferedImage', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve check-cast 942 (Ljava/awt/image/BufferedImage;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x1f at 0x0094
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.BufferedImage', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve check-cast 942 (Ljava/awt/image/BufferedImage;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x1f at 0x00b7
08-16 15:12:56.030: I/dalvikvm(3801): Could not find method java.awt.color.ColorSpace.getInstance, referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve static method 13250: Ljava/awt/color/ColorSpace;.getInstance (I)Ljava/awt/color/ColorSpace;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x71 at 0x00c6
08-16 15:12:56.030: I/dalvikvm(3801): Could not find method java.awt.color.ColorSpace.getInstance, referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve static method 13250: Ljava/awt/color/ColorSpace;.getInstance (I)Ljava/awt/color/ColorSpace;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x71 at 0x00de
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.ComponentColorModel', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 944 (Ljava/awt/image/ComponentColorModel;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x00fc
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.ComponentColorModel', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 944 (Ljava/awt/image/ComponentColorModel;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x012e
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.ComponentColorModel', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 944 (Ljava/awt/image/ComponentColorModel;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x0160
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.ComponentColorModel', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 944 (Ljava/awt/image/ComponentColorModel;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x0191
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.ComponentColorModel', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 944 (Ljava/awt/image/ComponentColorModel;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x01c2
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.BufferedImage', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve check-cast 942 (Ljava/awt/image/BufferedImage;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x1f at 0x01f9
08-16 15:12:56.030: E/dalvikvm(3801): Could not find class 'java.awt.image.BufferedImage', referenced from method com.googlecode.javacv.cpp.opencv_core$IplImage.getBufferedImage
08-16 15:12:56.030: W/dalvikvm(3801): VFY: unable to resolve new-instance 942 (Ljava/awt/image/BufferedImage;) in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: replacing opcode 0x22 at 0x0077
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0010-001e in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0036-0036 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0054-0076 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0079-0083 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0096-00b2 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x00b9-00b9 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x00c9-00c9 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x00e1-00e1 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x00fe-0124 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0130-0156 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0162-0188 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x0193-01b9 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x01c4-01ea in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.030: D/dalvikvm(3801): VFY: dead code 0x01fb-0205 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.getBufferedImage (DZLjava/awt/color/ColorSpace;)Ljava/awt/image/BufferedImage;
08-16 15:12:56.035: I/dalvikvm(3801): DexOpt: unable to optimize instance field ref 0x0ef1 at 0xa2 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.copyFrom
08-16 15:12:56.035: I/dalvikvm(3801): DexOpt: unable to optimize instance field ref 0x0ef1 at 0x88 in Lcom/googlecode/javacv/cpp/opencv_core$IplImage;.copyTo
08-16 15:12:56.045: I/dalvikvm(3801): Total arena pages for JIT: 11
08-16 15:12:56.105: D/dalvikvm(3801): GC_CONCURRENT freed 243K, 48% free 2948K/5639K, external 8639K/9382K, paused 1ms+1ms
08-16 15:12:56.185: D/dalvikvm(3801): Trying to load lib /data/data/com.zdm.picabus/lib/libopencv_core.so 0x4051c668
08-16 15:12:56.190: D/dalvikvm(3801): Added shared lib /data/data/com.zdm.picabus/lib/libopencv_core.so 0x4051c668
08-16 15:12:56.190: D/dalvikvm(3801): No JNI_OnLoad found in /data/data/com.zdm.picabus/lib/libopencv_core.so 0x4051c668, skipping init
08-16 15:12:56.190: W/dalvikvm(3801): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/googlecode/javacv/cpp/opencv_core;
08-16 15:12:56.190: W/dalvikvm(3801): Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Lcom/googlecode/javacv/cpp/opencv_core$CvArr;
08-16 15:12:56.190: D/AndroidRuntime(3801): Shutting down VM
08-16 15:12:56.190: W/dalvikvm(3801): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
08-16 15:12:56.195: E/AndroidRuntime(3801): FATAL EXCEPTION: main
08-16 15:12:56.195: E/AndroidRuntime(3801): java.lang.ExceptionInInitializerError
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.zdm.picabus.imageprocessing.costumizeImg.processImage(costumizeImg.java:22)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.zdm.picabus.cameraservices.CameraActivity.onActivityResult(CameraActivity.java:33)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.Activity.dispatchActivityResult(Activity.java:3934)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2111)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2139)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1672)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2836)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread.access$1600(ActivityThread.java:117)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.os.Looper.loop(Looper.java:130)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at android.app.ActivityThread.main(ActivityThread.java:3691)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at java.lang.reflect.Method.invokeNative(Native Method)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at java.lang.reflect.Method.invoke(Method.java:507)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at dalvik.system.NativeStart.main(Native Method)
08-16 15:12:56.195: E/AndroidRuntime(3801): Caused by: java.lang.ExceptionInInitializerError
08-16 15:12:56.195: E/AndroidRuntime(3801):     at java.lang.Class.classForName(Native Method)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at java.lang.Class.forName(Class.java:234)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.googlecode.javacpp.Loader.load(Loader.java:314)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.googlecode.javacpp.Loader.load(Loader.java:294)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.googlecode.javacv.cpp.opencv_core$CvArr.<clinit>(opencv_core.java:156)
08-16 15:12:56.195: E/AndroidRuntime(3801):     ... 18 more
08-16 15:12:56.195: E/AndroidRuntime(3801): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load jniopencv_core: findLibrary returned null
08-16 15:12:56.195: E/AndroidRuntime(3801):     at java.lang.Runtime.loadLibrary(Runtime.java:429)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at java.lang.System.loadLibrary(System.java:554)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.googlecode.javacpp.Loader.load(Loader.java:367)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.googlecode.javacpp.Loader.load(Loader.java:294)
08-16 15:12:56.195: E/AndroidRuntime(3801):     at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:129)
08-16 15:12:56.195: E/AndroidRuntime(3801):     ... 23 more" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T00:51:11.393

检查您的 res 文件夹。尝试从您拥有的 opencv 代码示例中复制所有内容。似乎无法加载图像。或者，您可以清理您的项目（在菜单中转到项目>清理）或使用真手机而不是模拟器。看看是否有任何选项可以解决您的错误。

# asp.net - Visual Studio 2012 有数据图吗？

> ID：11987791
> 
> 赞同：1
> 
> 时间：2012-08-16T13:05:09.097
> 
> 标签：asp.net, visual-studio, view, web, visual-studio-2012

我更改了计算机的名称和用户名，当我尝试使用数据图时，在 Visual Studio 2010 中出现错误。今天安装了Visual Studio 2012，发现根本没有“数据图”。我的问题是，原始安装中是否有 Visual Studio 2012 中的“数据图”？我是否通过更改我的计算机和用户身份来破坏它？

任何安装了 Visual Studio 2012 的人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:34:37.643

很抱歉回答我自己的问题，但我可能会找到我问题的真正答案。 [这个页面](http://connect.microsoft.com/VisualStudio/feedback/details/735451/missing-database-diagram-node-in-server-explorer)说：

> 我正在使用 SQL 2012 测试 Visual Studio 11。我创建了一个 LocaDB 并在 VS11 中连接到服务器资源管理器。服务器资源管理器中没有可用的数据库图表节点。这似乎仅限于带有 SQL 2012 的 VS 11。我可以访问 SSMS 中的图表并创建表，所以我知道它们在那里。

和

> 感谢您的反馈意见。这是产品的设计变更。新版本的 SQL 数据库不再支持图表，因此当您使用新的 SQL 服务器时会删除该节点。

# php - 无法计算 mysql_fetch _row 返回的数组

> ID：11987793
> 
> 赞同：-4
> 
> 时间：2012-08-16T13:05:17.523
> 
> 标签：php, mysql

就像我说的我无法计算 mysql_fetch_row 返回的结果：

```
while ($a = mysql_fetch_row($sql)) {
 $result = count($a);
 echo $result;
} 
```

它的回报（1）只是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T13:08:01.937

你可以随时使用

```
$result = mysql_num_rows($sql); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T13:09:50.813

计算单行（最可能包含单个字段）将返回 1 - 应该如此。在获取结果之前查看`mysql_num_rows()`是否需要行数，或者 - 如果您想跟进自己的方法 - 执行类似的操作

```
$count=0;
while ($a = mysql_fetch_row($sql)) {
 //Do something with the result

 $count++;
}
echo $count; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T13:08:15.167

尝试`mysql_num_rows($sql);`

[http://php.net/manual/en/function.mysql-num-rows.php](http://php.net/manual/en/function.mysql-num-rows.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-16T13:08:15.590

因为您只获取 1 行并尝试计算它 - 尝试 mysql_num_rows

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T13:08:40.893

的返回值`mysql_fetch_row`是当前行的列值数组。因此，`$result`是列数，而不是行数。要获取行数，您可以使用该`mysql_num_rows`函数。

顺便说一句：不要使用那个旧的 mysql 库，使用 mysqli 或 PDO。

# umbraco - 在这种情况下如何构建主模板和文档类型？

> ID：11987794
> 
> 赞同：2
> 
> 时间：2012-08-16T13:05:17.057
> 
> 标签：umbraco

我需要在 Umbraco（第 4 版）上创建一个新网站。该网站将有一个主登录页面，其中包含指向 4 组地理子站点的 4 个链接。

在主主模板中，我将包含所有常用的 HTML Head 内容以及 CSS 和 JS 链接等。在正文内容中，将有两个 contentPlaceHolders：

1.  网站徽标将在左侧，另一个横幅图像在顶部右侧。此部分将在其他所有页面中不断重复使用。

2.  用于显示 4 个链接的占位符。

我的问题是：如何在“设置”中构建模板和文档类型，以便在用户上传 2 张图片后自动重用和继承页眉徽标部分？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T11:57:37.500

您可以使用母版页控件来获得方便和更好的开发方法。

```
<%@ Master Language="C#" MasterPageFile="~/umbraco/masterpages/default.master" AutoEventWireup="true" %> 
```

然后根据您的要求为每个部分定义占位符。

```
 <asp:Content ContentPlaceHolderID="ContentPlaceHolderDefault" runat="server">

    </asp:Content> 
```

这是我的 umbraco 网站的示例

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Main.master.cs" Inherits="WebsiteName.Masterpages.Main" %>

<!DOCTYPE html>
<head runat="server">
    <title>All One Health</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <link href="/Css/main.css" media="all" rel="stylesheet" type="text/css" />
    <link href="/Css/custom.css" media="all" rel="stylesheet" type="text/css" />
    <link href="/Css/navmenu.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../Css/download.css" media="all" rel="stylesheet" type="text/css" />
    <link href="/Css/jquery.selectbox.css" media="all" rel="stylesheet" type="text/css" />
    <%--<link href="/Css/ie10.css" media="all" rel="stylesheet" type="text/css" />--%>

    <script type="text/javascript" src="/Scripts/jquery.js"></script>
    <script src="/Scripts/jquery.bxslider.min.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css' />
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css' />
    <link href='http://fonts.googleapis.com/css?family=Nunito:400,700,300' rel='stylesheet' type='text/css' />
    <script type="text/javascript" src="http://js.addthisevent.com/atemay.js"></script>
    <script src="/Scripts/html5shiv.js"></script>
    <script src="/Scripts/placeholders.min.js"></script>

    <!--[if IE 8]>
            <link href="/Css/ie8.css" media="all" rel="stylesheet" type="text/css" />
        <![endif]-->
    <!--[if IE 9]>
            <link href="/Css/ie9.css" media="all" rel="stylesheet" type="text/css" />
        <![endif]-->

    <!-- bxSlider CSS file -->
    <link href="/Css/jquery.bxslider.css" rel="stylesheet" />
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">

        <!--  Header Section   -->
        <header class="mobile-header">

            <umbraco:Macro Alias="MobileUtilityNavigation" runat="server" />
            <div class="mobile-header-nav-logo">
                <div class="logo">
                    <umbraco:Macro Alias="Header" runat="server" />
                    <umbraco:Macro Alias="MobileMenuNavigation" runat="server"></umbraco:Macro>
                </div>
            </div>
        </header>
        <header class="header">
            <umbraco:Macro Alias="HeaderUtilityNav" runat="server" />
            <div class="header-nav-logo">
                <div class="logo">
                    <umbraco:Macro Alias="Header" runat="server" />
                </div>
                <div class="ghost-logo"></div>
                <umbraco:Macro Alias="HeaderMainNav" runat="server" />
            </div>
        </header>
        <!--  Header End   -->
        <asp:ContentPlaceHolder ID="SliderContent" runat="server">
        </asp:ContentPlaceHolder>
        <!--   Body Section   -->
        <div id="page">
            <asp:ContentPlaceHolder ID="ContentPlaceHolderDefault" runat="server">
            </asp:ContentPlaceHolder>
        </div>
        <!--  Footer Section  -->
        <footer class="footer">
            <div class="grey">
                <umbraco:Macro Alias="Header" runat="server"></umbraco:Macro>
                <umbraco:Macro Alias="MobileMainNavigatoin" runat="server"></umbraco:Macro>
                <umbraco:Macro Alias="MobileUtilityFooterLinks" runat="server"></umbraco:Macro>
            </div>
            <umbraco:Macro Alias="Footer" runat="server"></umbraco:Macro>
        </footer>
        <!-- Footer end  -->

        <!--Scrips-->

    </form>
    <script type="text/javascript" src="/Scripts/main.js"></script>
    <script type="text/javascript" src="/Scripts/split.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.selectbox-0.2.js"></script>
    <script type="text/javascript" src="/Scripts/header.js"></script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:54:22.637

您将在站点根目录的文档类型上指定这些属性，然后使用 Razor（或 XSLT）遍历站点顶部，获取媒体选择器属性，并从中检索图像 URL。

# iphone - xcode：自我错误消息

> ID：11987801
> 
> 赞同：-2
> 
> 时间：2012-08-16T13:05:39.477
> 
> 标签：iphone, objective-c, ios

按下按钮时我插入了一个动作；代码是：

```
 [UIView transitionWithView:self.btnCardFront1 duration:.5 options:UIViewAnimationOptionTransitionFlipFromLeft|UIViewAnimationOptionCurveEaseInOut
                    animations:^{
                        [self.btnCardFront1 setAlpha:0.0];
                        [self.btnCardBack1 setAlpha:1.0];
                    } completion:^(BOOL finished){}
     ]; 
```

我想将此代码插入函数但返回此错误：使用未声明的标识符“自我”

如何用 my 元素替换 self ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:09:03.997

```
 __block <MySelfType class> *blocksafeSelf = self;

  [UIView transitionWithView:blocksafeSelf duration:.5 options:UIViewAnimationOptionTransitionFlipFromLeft|UIViewAnimationOptionCurveEaseInOut
                    animations:^{
                        [blocksafeSelf setAlpha:0.0];
                        [blocksafeSelf setAlpha:1.0];
                    } completion:^(BOOL finished){}
     ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:51:30.667

无论如何，您不必将 self 放在那里，如果 self 不在那里，它仍然可以工作。

# android - 在 Android 中访问 ResTWebService

> ID：11987807
> 
> 赞同：0
> 
> 时间：2012-08-16T13:06:06.630
> 
> 标签：android, web-services, rest, webservices-client

我正在开发一些应用程序，我想将它们连接到一个 Restful WebService。为此，我编写了这个类：

```
public class TagDS {
    public TagDS(){
    }

    public boolean recordTag(Tag t){
        try{    
        String send = t.getConteudo()+"\n"+t.getId()+"\n"+t.getURL()+"\n"+t.getData()+"\n"+t.getUser();
        postService(send);
        return true;
        }catch(Exception e){
            return false;
        }
    }

    public void postService(String send) {
        ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);
        WebResource service = client.resource(getBaseURI());

        service.path("rest").path("project").path("create").path(send).accept(MediaType.TEXT_PLAIN).post();
    }

    private static URI getBaseURI() {
        return UriBuilder.fromUri(
                "http://localhost:8080/pt.Android.Project.WebService").build();
    }
} 
```

但是当我运行应用程序时，会显示消息：

```
<p>08-16 10:24:33.280: E/AndroidRuntime(24149): FATAL EXCEPTION: main </p>
<p>08-16 10:24:33.280: E/AndroidRuntime(24149): java.lang.NoClassDefFoundError: com.sun.jersey.api.client.config.DefaultClientConfig</p> 
```

我已将所有库添加到项目中。我的问题是：我们创建 apk 时是否可能没有加载库？

我已经单独测试了我的 WebService，它工作正常。我以为“问题可能是 android 权限”，但我搜索并获得了权限：

```
 <user-permission android:name="android.permission.INTERNET" /> 
```

你能帮助我吗？

真诚的，丽塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:10:03.870

为什么需要 jersey 才能从 android 访问 Web 服务？android 的“类 java”虚拟机版本并不支持所有的 java 库。

# asp.net - 防止多次登录导致错误并防止再次登录

> ID：11987811
> 
> 赞同：0
> 
> 时间：2012-08-16T13:06:10.317
> 
> 标签：asp.net, session, session-timeout

在我正在处理的当前项目中，我们决定防止多登录为此，我在任何用户登录网站时在 sql 表中插入一条记录，注销时删除它的记录（我使用 session_end 方法这样做）

这里有一个问题：我将会话超时设置为 10 分钟，所以通过使用此策略，当用户关闭浏览器再次登录时，他必须等待 1 到 10 分钟（因为 sql 表中有一条记录会在未来最多 10 分钟内通过 session_end 方法删除并阻止用户再次登录）。

有没有人可以帮助我解决这个问题？每个想法都可能有用

抱歉我的语法不好，我是英语新手。更多详情请评论我

问候，阿里·福罗吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:18:59.847

我不会使用会话超时来防止多次登录，因为您声明如果用户意外关闭浏览器、浏览器崩溃或喜欢评论、服务器问题和连接记录保留在数据库中。还有可能其他人在您不知情的情况下将会话时间设置更改为 1 分钟或 1 小时。

一年前我参与了一个系统，该系统增加了每个用户只能连接的要求。我们设计了将最后一次登录视为有效登录的系统。我们还决定不使用会话超时来检查连接是否仍处于活动状态。每次用户在网站上执行操作时，我们都会检查他上次执行操作的时间以及数据库中的值存储，并与当前时间进行比较。如果差值低于最大不活动值（如 10 分钟），系统会将值更新为当前时间并允许继续或重定向到超时页面。有了这个解决方案，它可以防止多次登录，也防止了很多问题的发生，用户不必等待重新连接到网站。

# wsdl - 如何使用 wso2 Governance 和 ESB (4.1) 创建正确的 uuid ws-discovery 服务？

> ID：11987813
> 
> 赞同：0
> 
> 时间：2012-08-16T13:06:12.440
> 
> 标签：wsdl, registry, wso2, wso2esb, uuid

我通过 ESB 服务器上的 wso2 Governance 发现代理服务以静态端点 (URL) 或动态端点 (uuid) 模式创建了一些 WS-Discovery 服务。

基于 uuid 的 WS-Discovery 服务无法从发现代理中找到/获取 WSDL 消息，但另一个服务可以。如何使用 Governance 和 ESB (4.1) 设置正确的 uuid ws-discovery 服务？谢谢。

ESB 错误日志如下： ERROR - ProxyServiceMessageReceiver Unable to find the endpoint specified : wsdd://xxxxxx

PS。我已经添加了 wsDiscoveryParams 参数以在 ESB 上设置可发现：

```
<proxy name="EchoProxy" transports="https,http" startOnLoad="true" trace="disable">
    <target endpoint="wsdd://urn:uuid:a74a1bc6-3f25-4d02-bcbc-ea31a3f0f33e/https"/>
    <parameter name="wsDiscoveryParams">
        <Scopes xmlns="ws.apache.org/ns/synapse">echo.services.core.carbon.wso2.org</Scopes>
    </parameter>
</proxy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:07:55.937

尝试使用“http”目标地址而不是 https 创建代理服务，或者尝试使用 http 目标创建和 EP，然后创建代理服务......只是一个建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T21:44:35.687

也许我的情况与问题的情况有些不同，但我从 ESB 4.8.1 收到了相同的错误消息。我的解决方案是从[此处](http://product-dist.wso2.com/p2/carbon/releases/4.0.2/plugins/)下载文件“org.wso2.carbon.discovery.mediation.ext_4.0.0.jar” ，将其放入文件夹%ESB_HOME%/repository/components/dropins，然后重新启动ESB 服务器。

作为一个双重检查，我确保代码行`<parameter name="extensions">org.wso2.carbon.discovery.mediation.ext.WSDiscoveryRegistryExtension</parameter>`和`<parameter name="discoveryProxy">https://%GRegIp:port%/services/DiscoveryProxy</parameter>`位于“注册表”标记内，该标记位于 ESB 控制台->管理->服务总线->源视图中。

# string - 如何使用这个 linux shell 命令删除给定字符串中的“输入字符”（ascii=13）？

> ID：11987815
> 
> 赞同：0
> 
> 时间：2012-08-16T13:06:21.030
> 
> 标签：string, shell

我想使用这个 linux shell 命令删除“输入字符”（ascii=13）：${variable//pattern/string}

我的脚本是：${var//\n/}。它不起作用。所以我改为 ${var//\r/} 也不起作用。

那么我应该如何编写这个脚本呢？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:20:10.217

使用美元扩展`$'\n'`：

```
${var//$'\n'/} 
```

`$'\n'`扩展为文字换行符。有关此类扩展的更多信息，请参阅手册中的[ANSI-C](http://www.gnu.org/software/bash/manual/bashref.html#ANSI_002dC-Quoting)引用。`bash`

### 编辑

以上替换换行符，替换回车使用`$'\r'`：

```
${var//$'\r'/} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:19:06.420

你可以做：

```
var=$(echo var | tr -d '\n') 
```

删除换行符。或者`var=$(echo var | tr '\n' ' ')`用空格替换它。

# java - ArrayList初始化类型的区别

> ID：11987819
> 
> 赞同：3
> 
> 时间：2012-08-16T13:06:29.723
> 
> 标签：java, arraylist

两者有什么区别 ：

*第一的 ：*

```
ArrayList<String> linkList = new ArrayList<String>(); 
```

*第二 ：*

```
ArrayList linkList = new ArrayList<String>(); 
```

或者有什么不同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T13:07:34.310

```
ArrayList<String> linkList = new ArrayList<String>(); 
```

使用泛型来确保类型安全。

```
ArrayList linkList = new ArrayList<String>(); 
```

没有。正如@BruceMartin 指出的那样，这意味着线条

```
linkList.add(0);
String element = (String) linkList.get(0); 
```

在第一种情况下给出**编译时错误，但****在运行时**因第二个声明而失败。

作为另一个示例，对于两个备选方案中的`get()`一个`String`，第二个变体将需要一个演员表：
*首先：*

```
String element = linkList.get(0); 
```

*第二：*

```
String element = (String) linkList.get(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:09:01.547

**在编译时：**第一个使用泛型，确保类型安全和代码可读性。

**在运行时：**它们是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:36:07.840

同样在第一种情况下*linkList*是 String 类型，在第二种情况下是*Object*类型。

# extjs - extjs calendar 4.1.1 预订时间限制

> ID：11987822
> 
> 赞同：0
> 
> 时间：2012-08-16T13:06:36.990
> 
> 标签：extjs, calendar, extjs4.1

我正在使用 extjs 4.1.1 日历（调度程序）来跟踪人们的日程安排，但我可能会遇到麻烦，因为我无法弄清楚如何限制个人的预订时间段

例子。

用户 A 可以预订周一至周三下午 3 点至 4 点之间的时段。

用户 B 可以预订周一和周六凌晨 1 点到 5 点之间的时段

图片链接 [http://i.stack.imgur.com/tuCVV.png](http://i.stack.imgur.com/tuCVV.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:59:32.020

这可能比你真正想要的更复杂，但我们必须在我们的应用程序中这样做，唯一真正的方法是覆盖他们的 Extensible.calendar.dd.DropZone 类并用你自己的覆盖 onNodeOver 方法逻辑，希望你能很好地理解 Extjs :) ：

```
Ext.override("Extensible.calendar.dd.DropZone", {

onNodeOver : function(n, dd, e, data){
        //change anything in this logic with the logic you want....
        //but preferrably, don't change anything and use callOverridden and then add your stuff as extras
        var D = Extensible.Date,
            start = data.type == 'eventdrag' ? n.date : D.min(data.start, n.date),
            end = data.type == 'eventdrag' ? D.add(n.date, {days: D.diffDays(data.eventStart, data.eventEnd)}) :
                D.max(data.start, n.date);

        if(!this.dragStartDate || !this.dragEndDate || (D.diffDays(start, this.dragStartDate) != 0) || (D.diffDays(end, this.dragEndDate) != 0)){
            this.dragStartDate = start;
            this.dragEndDate = D.add(end, {days: 1, millis: -1, clearTime: true});
            this.shim(start, end);

            var range = Ext.Date.format(start, this.dateFormat);

            if(D.diffDays(start, end) > 0){
                end = Ext.Date.format(end, this.dateFormat);
                range = Ext.String.format(this.dateRangeFormat, range, end);
            }
            var msg = Ext.String.format(data.type == 'eventdrag' ? this.moveText : this.createText, range);
            data.proxy.updateMsg(msg);
        }
        return this.dropAllowed;
    }
}); 
```

# java - Runtime 和 ProcessBuilder (Java) 的替代方案

> ID：11987828
> 
> 赞同：8
> 
> 时间：2012-08-16T13:07:04.280
> 
> 标签：java, runtime, processbuilder

如果有人知道如何在 Java 应用程序中不使用运行时或 ProcessBuilder 来运行 unix 命令，我很感兴趣

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T13:14:43.647

好吧，您可以使用[Apache Commons Exec库中的](http://commons.apache.org/exec/)[DefaultExecutor](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/DefaultExecutor.html)来执行命令，但它在内部使用和.`java.lang.Runtime``java.lang.Process`

我建议您在 Runtime 上使用这个库，因为 Apache 命令执行 API 更复杂，并且提供比 Java Runtime 更多的功能。它还处理退出值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:24:07.773

有很多可能的方法；但是如果不了解您的动机，我就不能称它们为可取的。

例如，用 C 或 Perl 或任何语言编写程序并让它在套接字上侦听。然后，您的 java 程序可以连接到套接字并发送带有要生成的程序名称、参数等的消息。接收程序可以继续生成它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T13:55:12.743

Unix命令有两种执行方式：

1.  您可以使用`java.lang.Runtime`和`java.lang.Process`
2.  您可以使用 JNI/JNA 访问共享库。所以你可以使用它来访问操作系统级别的命令来创建一个进程（在 Unix 上）`system()`。`exec*()`

不推荐第二种方法：很难做到正确，最终你会得到与`Runtime.exec()`

如果您只需要*功能*，那么您可以在 Java 中再次实现这些命令。例如，要实现`ls`，使用`File.listFiles()`

# python - 是否有可能使这个 shell 脚本更快？

> ID：11987832
> 
> 赞同：13
> 
> 时间：2012-08-16T13:07:15.647
> 
> 标签：python, shell, unix

我的任务是创建一个以巨大文本文件作为输入的脚本。然后它需要查找所有单词和出现次数，并创建一个新文件，每行显示一个唯一单词及其出现次数。

以一个包含以下内容的文件为例：

```
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor 
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.   
Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt 
mollit anim id est laborum. 
```

我需要创建一个如下所示的文件：

```
1 AD
1 ADIPISICING
1 ALIQUA
...
1 ALIQUIP
1 DO
2 DOLOR
2 DOLORE
... 
```

为此，我使用`tr`,`sort`和编写了一个脚本`uniq`：

```
#!/bin/sh
INPUT=$1
OUTPUT=$2
if [ -a $INPUT ]
then
    tr '[:space:][\-_?!.;\:]' '\n' < $INPUT | 
        tr -d '[:punct:][:special:][:digit:]' |
        tr '[:lower:]' '[:upper:]' |
        sort |
        uniq -c > $OUTPUT
fi 
```

这样做是用空格分隔单词作为分隔符。如果单词包含`-_?!.;:`，我将它们再次分解成单词。我删除了标点符号、特殊字符和数字，并将整个字符串转换为大写。完成此操作后，我对其进行排序并传递它`uniq`以使其成为我想要的格式。

现在我下载了txt格式的圣经并将其用作输入。我得到了这个时机：

```
scripts|$ time ./text-to-word.sh text.txt b     
./text-to-word.sh text.txt b  16.17s user 0.09s system 102% cpu 15.934 total 
```

我对 Python 脚本做了同样的事情：

```
import re
from collections import Counter
from itertools import chain
import sys

file = open(sys.argv[1])

c = Counter()

for line in file.readlines():
    c.update([re.sub('[^a-zA-Z]', '', l).upper()
            for l in chain(*[re.split('[-_?!.;:]', word)
                    for word in line.split()])])

file2 = open('output.txt', 'w')
for key in sorted(c):
    file2.write(key + ' ' + str(c[key]) + '\n') 
```

当我执行脚本时，我得到：

```
scripts|$ time python text-to-word.py text.txt
python text-to-word.py text.txt  7.23s user 0.04s system 97% cpu 7.456 total 
```

如您所见，与运行在**16.17s**中的 shell 脚本相比，它在**7.23s**中运行。我尝试过使用更大的文件，并且 Python 似乎总是获胜。我对上面的 senario 有几个问题：

1.  鉴于 shell 命令是用 C 编写的，为什么 Python 脚本更快？我确实意识到 shell 脚本可能不是最佳脚本。
2.  如何改进 shell 脚本？
3.  我可以改进 Python 脚本吗？

需要明确的是，我不是将 Python 与 shell 脚本进行比较。我不是想开始一场激烈的战争，也不需要任何其他语言的答案来比较自己更快。使用 UNIX 管道小命令来完成任务的哲学，我如何使 shell 脚本更快？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T13:26:28.047

这里很重要的一点可能是进程间 I/O。Python 脚本的所有数据都在内存中，因此在处理数据时不会发生 I/O。

另请注意，Python 本身并不慢。Python 中的大多数功能都是用 C 实现的。

shell 脚本必须启动 5 个进程，每个进程必须读取整个文本`stdin`并将整个文本写入`stdout`四次。

可能有一种方法可以使 Python 脚本更快一些：您可以将整个文本读入一个字符串，然后删除所有标点符号，拆分单词然后计算它们：

```
text = file.read()
text = re.sub(r'[.,:;-_]', '', text)
text = text.upper()
words = re.split(r'\\s+', text)
c = Counter()
c.update(words) 
```

这将避免几个嵌套循环的开销。

至于shell脚本：你应该尽量减少进程数。这三个`tr`进程可能会被替换为一次调用`sed`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T13:26:55.893

这不是一种语言与另一种语言的问题。你的方法不同。

在 Python 中，您会在遇到每个单词时递增一个计数器，然后迭代您的计数器以产生输出。这将是 O(n)。

在 bash 中，您将所有单词单独放入一个长元组中，对元组进行排序，然后计算实例。这很可能是 O(nlogn) 的排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T13:55:14.277

您可以改进 bash 脚本：

```
sed 's/[^a-zA-Z][^a-zA-Z]*/\'$'\n/g'  <$INPUT | sort -f -u >$OUTPUT 
```

但是对您的问题的简短而正确的答案是：因为您使用的是完全不同的算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T05:31:25.670

你可以试试这个：

考虑输入文件为 Input.txt

**bash 脚本**

```
cat Input.txt | tr [:space:] '\n' | grep -v "^\s*$" | sort | uniq -c | sort -bnr | tr [:lower:] [:upper:] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T06:38:34.113

一种使用方式`GNU awk`：

```
WHINY_USERS=1 awk '{ for (i=1; i<=NF; i++) { sub("[,.]","",$i); array[toupper($i)]++ } } END { for (j in array) print array[j], j }' file.txt 
```

* * *

伪代码/解释：

```
## WHINY_USERS=1 enables sorting by keys. A bit of a trick.
## Now loop through each word on each line, removing commas, full-stops,
## adding each word in uppercase to an array.
## Loop through the array printing vals and keys 
```

YMMV

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T08:57:07.023

一个 bash 解决方案

```
#!/bin/bash
IFS=' -_?!.;\:,'
while read -r line; do
  for word in $line; do
    word=${word//[^[:alpha:]]/}
    [ $word ] || continue
    word=$(tr '[:lower:]' '[:upper:]' <<<"$word")
    ((_w_$word++))
  done
done <"$INPUT"
IFS=' '
for wword in ${!_w_*}; do echo "${!wword} ${wword#_w_}"; done > $OUTPUT.v1 
```

perl 高尔夫解决方案

```
perl -nle '$h{uc()}++for/(\w+)/g}{print"$h{$_} $_"for sort keys%h'  $INPUT > $OUTPUT.v2 
```

# php - 通过会话的php简单登录脚本

> ID：11987837
> 
> 赞同：0
> 
> 时间：2012-08-16T13:07:34.077
> 
> 标签：php, session, login

我是 php 新手，在创建登录脚本时遇到问题。在代码的第一部分，它可以找到属于登录者的正确id，并在$_SESSION['id']中正确设置。然后脚本重定向回索引，但在这里我收到一条错误消息，指出会话中未设置 id。

注意：未定义的索引：第 11 行 C:\xampp\htdocs\gym\v1\content\body\panel.php 中的 id

```
$sql="SELECT id FROM user WHERE email='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){
    session_regenerate_id(); //Regenerate session ID to prevent session fixation attacks
    $member = mysql_fetch_assoc($result);
    $_SESSION['id'] = $member['id'];
    session_write_close();
    header("location: ../index.php?page=2");
    exit();
}
else {
    header("Location: ../index.php?page=1");
    exit();
}
?> 
```

* * *

```
session_start();
echo 'session id:' . $_SESSION['id'];
if(!isset($_SESSION['id']) || (trim($_SESSION['id']) == '')) {
    echo 'error not session id set';
    exit();
}
$sql="SELECT * FROM user WHERE id='" . $_SESSION['id'] . "'";
$result=mysql_query($sql);

$member = mysql_fetch_assoc($result);
$mail = $member['emails'];

echo '<h1>Welcome!'. $mail  . ' </h1>'; 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:13:58.060

在您的登录脚本中，您永远不会`session_start()`在设置之前调用`$_SESSION['id']`.

此外，它可能无助于回答您的问题，但您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)。

# python - pika 使用哪种连接形式

> ID：11987838
> 
> 赞同：36
> 
> 时间：2012-08-16T13:07:36.307
> 
> 标签：python, rabbitmq, pika

我一直试图弄清楚在使用 pika 时应该使用哪种连接形式，据我所知，我有两种选择。

无论是`BlockingConnection`还是`SelectConnection`，但我不太确定这两者之间的区别（即 BlockingConnection 阻塞是什么？等等）

的文档`pika`说这`SelectConnection`是连接到 rabbit 的首选方式，因为它提供了“多种事件通知方法，包括 select、epoll、kqueue 和 poll。”

所以我想知道这两种不同类型的连接有什么含义？

PS：我知道我不应该在标题中添加标签，但在这种情况下，我认为它确实有助于澄清问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-16T14:19:11.013

如果您的应用程序架构可以从异步设计中受益，则 SelectConnection 很有用，例如在 RabbitMQ IO 完成时执行其他操作（例如切换到其他一些 IO 等）。这种类型的连接使用回调来指示函数何时返回。例如，您可以声明回调

on_connected、on_channel_open、on_exchange_declared、on_queue_declared 等。

...在触发这些事件时执行操作。

如果您的 RabbitMQ 服务器（或与该服务器的连接）速度较慢或过载，则该好处特别好。

手头上的 BlockingConnection 就是这样 - 它阻塞直到被调用的函数返回。因此它将阻塞执行线程，直到连接或 channel_open 或 exchange_declared 或 queue_declared 返回例如。也就是说，编写这种序列化逻辑通常比异步 SelectConnection 逻辑更简单。对于具有响应式 RabbitMQ 服务器的简单应用程序，这些在 IMO 上也可以正常工作。

我想您已经阅读了 Pika 文档[http://pika.readthedocs.io/en/stable/intro.html](http://pika.readthedocs.io/en/stable/intro.html)，如果没有，那么在您使用 Pika 之前，这是绝对重要的信息！

干杯!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-03T10:47:10.130

[Pika 文档](https://pika.readthedocs.io/en/stable/index.html)非常清楚连接类型之间的差异。主要区别在于`pika.adapters.blocking_connection.BlockingConnection()`适配器用于非异步编程，而`pika.adapters.select_connection.SelectConnection()`适配器用于异步编程。

如果您不知道非异步/同步和异步编程之间的区别是什么，我建议您阅读这个[问题或这篇](https://stackoverflow.com/questions/748175/asynchronous-vs-synchronous-execution-what-does-it-really-mean)[文章](https://techdifferences.com/difference-between-synchronous-and-asynchronous-transmission.html)以获得更深入的技术解释。

现在让我们深入了解不同的 Pika 适配器，看看它们做了什么，出于示例的目的，我想我们使用 Pika 来建立与[RabbitMQ](https://www.rabbitmq.com/)作为 AMQP 消息代理的客户端连接。

## 阻塞连接（）

在以下示例中，使用用户名*guest*和密码*guest*以及虚拟主机“/”连接到 RabbitMQ，侦听*localhost*上的端口*5672 。*连接后，将打开一个通道，并使用*test_routing_key*路由键将消息发布到*test_exchange*交换器。传入的 BasicProperties 值将消息设置为传递模式 1（非持久），内容类型为*text/plain*。消息发布后，连接将关闭：

 ***```
import pika

parameters = pika.URLParameters('amqp://guest:guest@localhost:5672/%2F')

connection = pika.BlockingConnection(parameters)

channel = connection.channel()

channel.basic_publish('test_exchange',
                      'test_routing_key',
                      'message body value',
                      pika.BasicProperties(content_type='text/plain',
                                           delivery_mode=1))

connection.close() 
```

## 选择连接（）

相比之下，使用这个连接适配器更复杂，更不Python，但是当与其他异步服务一起使用时，它可以有巨大的性能提升。在以下代码示例中，使用的所有参数和值与上一个示例中使用的相同：

```
import pika

# Step #3
def on_open(connection):

    connection.channel(on_open_callback=on_channel_open)

# Step #4
def on_channel_open(channel):

    channel.basic_publish('test_exchange',
                            'test_routing_key',
                            'message body value',
                            pika.BasicProperties(content_type='text/plain',
                                                 delivery_mode=1))

    connection.close()

# Step #1: Connect to RabbitMQ
parameters = pika.URLParameters('amqp://guest:guest@localhost:5672/%2F')

connection = pika.SelectConnection(parameters=parameters,
                                   on_open_callback=on_open)

try:

    # Step #2 - Block on the IOLoop
    connection.ioloop.start()

# Catch a Keyboard Interrupt to make sure that the connection is closed cleanly
except KeyboardInterrupt:

    # Gracefully close the connection
    connection.close()

    # Start the IOLoop again so Pika can communicate, it will stop on its own when the connection is closed
    connection.ioloop.start() 
```

## 结论

对于那些进行简单、非异步/同步编程的人来说，`BlockingConnection()`适配器被证明是启动和运行 Pika 以发布消息的最简单方法。但是，如果您正在寻找一种实现异步消息处理的方法，那么`SelectConnection()`处理程序是您更好的选择。

*快乐编码！****

# android - 以编程方式获取 android 联系人显示选项

> ID：11987840
> 
> 赞同：0
> 
> 时间：2012-08-16T13:07:46.523
> 
> 标签：android, android-layout, android-contacts

我想在我的应用程序中显示具有以下条件的联系人：

联系人在 android 联系人中匹配显示选项设置。

因此，如果在 android 联系人显示选项中未标记“sim 联系人”，则 android 联系人将不会显示这些 sim 卡联系人。所以现在我想获得那些显示选项，据此我想在我的应用程序中显示联系人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:47:13.133

最后，我通过使用以下代码找到了解决方案：

```
final ContentResolver cr = getContentResolver();
String[] projection = { ContactsContract.Contacts.DISPLAY_NAME,ContactsContract.Contacts._ID };
String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = ?";
String[] selectionArgs = { "1" };
final Cursor contacts = cr.query(
                        ContactsContract.Contacts.CONTENT_URI, projection,
                        selection, selectionArgs, 
                        "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME + ") ASC"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:31:12.103

试试这个演示

[http://www.edumobile.org/android/android-programming-tutorials/read-contacts-from-device/](http://www.edumobile.org/android/android-programming-tutorials/read-contacts-from-device/)

# jquery - jquery mobile中的动态更改选择框未显示为选中状态

> ID：11987842
> 
> 赞同：0
> 
> 时间：2012-08-16T13:07:47.333
> 
> 标签：jquery, jquery-mobile, xcode4.2

```
$("#toCurrency option[value=" + $('#crrencycnvrtto').val() +"]").attr("selected","selected") ; 
```

![在此处输入图像描述](../Images/91e98366d8a5c91c1a325c25eba80c0b.png)

使用上面的代码动态分配选择框不显示正确的值作为选择。但是当我单击选择框时，它显示该选项已被选中。

任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:11:56.027

如果您使用的是 jquerymobile，您应该刷新您的选择框： `$('#toCurrency').selectmenu('refresh');`

# ruby-on-rails - 如何使用另一个页面（非默认）来编辑用户（设计 gem）？

> ID：11987843
> 
> 赞同：0
> 
> 时间：2012-08-16T13:07:56.713
> 
> 标签：ruby-on-rails

如何使用另一个页面（不是默认）来编辑用户（设计 gem）？

我有这种情况：我需要一些页面来为用户添加属性，但我想使用 edit_user_registration - 我想使用另一个页面。

所以我需要在注册控制器中创建另一个动作并将其添加到 routes.rb 中。我还在registrations文件夹中创建了另一个文件，但我在实施时遇到了麻烦。

这是我的注册控制器：

```
 def paypal

   end 
```

和 paypal.html.erb：

```
 <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |d| %>
  <%= d.email_field :paypal_email %>
  ...
 <%end%> 
```

**问题：我应该在路由 rb 中写什么来调用贝宝操作和编辑页面正常工作？**

```
 devise_for :users, :controllers => {:registrations => 'registrations', :sessions => 'sessions'} do 
     registrations#paypal//something here instead
   end 
```

# c# - 如何从此类中的委托访问类的实例方法

> ID：11987844
> 
> 赞同：1
> 
> 时间：2012-08-16T13:07:57.137
> 
> 标签：c#, class, delegates

我们有一个 Command 类，它在构造函数中将 Action 作为参数，我们需要从该 Action 访问 Command 类的一些方法。有没有办法实现这一目标？

```
public class Command
{
    private readonly Action _action;

    public Command(Action action)
    {
        _action = action;
    }

    public void Execute()
    {
        _action();
    }

    public void AnotherMethod()
    {
    }
}

static void Main()
{
    var command = new Command(() =>
                  {
                      // do something

                      // ?? how to access and call 
                      // command.AnotherMethod(); ??

                      // do something else
                   });
    ....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:12:17.853

```
public class Command
{
    private readonly Action<Command> _action;

    public Command(Action<Command> action)
    {
        _action = action;
    }

    public void Execute()
    {
        _action(this);
    }

    public void AnotherMethod()
    {
    }
}

static void Main()
{
    var command = new Command(cmd => cmd.AnotherMethod() );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:14:17.740

您可以使用`Action<T>`对象并将其传递给自身.. 像这样：

```
public class Command {
    private readonly Action<Command> _action;

    public Command(Action<Command> action) {
        _action = action;
    }

    public void Execute() {
        _action(this);
    }

    public void AnotherMethod() {
    }
} 
```

然后你可以像这样使用它：

```
var command = new Command(x => {
    x.AnotherMethod();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:15:38.283

您可以使用 Action 其中 T 是您的 Command 类。

```
public class Command
{
    private readonly Action<Command> _action;

    public Command(Action<Command> action)
    {
        _action = action;
    }

    public void Execute()
    {
        _action(this);
    }

    public void AnotherMethod()
    {
    }
}

static void Main()
{
    var command = new Command(command =>
                  {
                      // do something

                      // ?? how to access and call 
                      // command.AnotherMethod(); ??

                      // do something else
                   });
    ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:15:38.433

您可以在声明时向 Action 委托传递一个参数：`Action<Command>`

然后你在你的命令中调用它`action(this)`。传递您的操作时，您使用`(command) => command.AnotherMethod()`

# asp.net - ASP.NET - 当会话存储在 SQL Server 中时，服务器之间的不同 SessionId

> ID：11987850
> 
> 赞同：5
> 
> 时间：2012-08-16T13:08:17.803
> 
> 标签：asp.net, iis-7, session-cookies, aspstate

我使用 SQL Server 数据库管理跨 2 个生产 Web 服务器的共享会话状态。
最近我意识到（而且我几乎可以肯定以前不是这种情况）从服务器跳转到服务器时会话并没有真正共享。

两台服务器在同一个域上运行同一个网站，并使用硬件负载平衡器进行平衡。两者都在 IIS7 下运行。并且在两台服务器中，ASP.NET 状态服务都在运行。

在检查 HTTP 标头并使用 SQL 分析器捕获交叉引用时，我发现我认为可能是问题所在。

我的 cookie 中的 SessionId 值是一个 24 个字符的字符串，例如：`y4hfairc2xbwlupkdsqpv0nz`

由数据库接收并存储在那里的 SessionID`ASPState`更长，并且具有服务器特定的 8 个字符后缀。例如`2476b033`，或者`2b7731d2`在存储在数据库中的所有会话中是一致的。
因此 SessionID 看起来像：`y4hfairc2xbwlupkdsqpv0nz2476b033`或`y4hfairc2xbwlupkdsqpv0nz2b7731d2`

显然，因为会话不共享，每个服务器都维护自己的会话状态。

任何使用类似配置的人之前可能遇到过这种情况？

谢谢

## 更新

事实证明：[SQL Server 中保存的 SessionId 与从 asp.net 运行时生成的不同，](https://stackoverflow.com/questions/9116100/sessionid-saved-in-sql-server-is-different-from-the-one-generated-from-the-asp-n)额外的字符是 IIS AppID。现在我必须找出如何更改它，以便两台服务器匹配。到目前为止还没有运气。
任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T07:43:13.797

为了完整起见，回答我自己的问题。

多亏了这个：[https ://serverfault.com/questions/288981/load-balanced-iis-7-5-web-server-asp-net-session-state-problem](https://serverfault.com/questions/288981/load-balanced-iis-7-5-web-server-asp-net-session-state-problem)

我发现了如何匹配 AppID。

现在一切似乎都很好。

# c++ - 继承问题：使用类实例化的指针不能按预期工作

> ID：11987855
> 
> 赞同：0
> 
> 时间：2012-08-16T13:08:29.210
> 
> 标签：c++

我得到了错误`undefined reference to 'vtable for Base'`。我不知道这意味着什么，因为我没有使用任何称为“vtable”的东西。另外，我不完全了解如何制作指针并`new Derived`影响程序。任何人都可以清除这个吗？谢谢。

```
#include <iostream>

using std::cout;

class Base { // undefined reference to 'vtable for Base'

    public:
        void f();
        virtual void bar();

};
class Derived : public Base {
    public:
        void f();
        void bar() {
            cout << "I am bar";
        }
};

int main() {

    Derived d;
    Base * b = &d;

    b->bar();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:09:25.087

您必须实现`virtual`您实例化的类的功能才能编译。（或标记它们`pure virtual`）。

只需`bar`在`Base`：

```
virtual void bar() {} 
```

或者`pure virtual`（必须在派生类中重新实现才能实例化它们）

```
virtual void bar() = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:16:53.730

你有两个问题。首先，在`Base`纯虚拟中制作方法：

```
class Base {
    public:
        virtual void f()=0;
        virtual void bar()=0;
}; 
```

其次，您需要实施`f()`：

```
class Derived : public Base {
    public:
        void f(){}
        void bar() {}
}; 
```

# android - android中的两个服务和一个连接的文件？

> ID：11987870
> 
> 赞同：0
> 
> 时间：2012-08-16T13:09:05.557
> 
> 标签：android

在 android 中，我正在使用两项服务，我想将一些细节从一项服务转移到另一项服务。因此，我使用 set 和 get 方法创建了新的类设置，但我不知道如何将两个服务与这个类文件连接起来，我可以将细节从一个服务移动到另一个服务并记住每一个。

例如：

我想将属性 Boolean 从服务 1 转移到服务 2，然后在服务 2 中检查此属性是否为真，如果为真，那么我在此 seocnd 服务中执行一些代码...希望是更好的解释

类示例：

```
public class Settings {
    private int currentAudioManager;
    private Boolean isChanged;

    public int getCurrentAudioManager() {
        return currentAudioManager;
    }

    public void setCurrentAudioManager(int currentAudioManager) {
        this.currentAudioManager = currentAudioManager;
    }
........ 
```

希望你明白我想要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:12:17.723

您可以注册广播接收器并在您的服务之间发送广播可解析数据。

```
public class Service1 extends Service {

    @Override
    public void onCreate() {    
        super.onCreate();
        registerReceiver(recevier1,  new IntentFilter("YOUR_SERVICE_ACTION1")); 

        // if something happen in your service"
        sendBroadcast(new Intent("YOUR_SERVICE_ACTION2")); // send to second service
    }

    @Override
    public IBinder onBind(Intent intent) {      
        return null;
    }

    public void onDestroy() {
        unregisterReceiver(recevier1);
    };

    Service1Receiver recevier1 = new Service1Receiver();    
    private class Service1Receiver extends BroadcastReceiver{

        @Override
        public void onReceive(Context context, Intent intent) {     
            intent.getExtra("me.SERVICE");// handle your data
        }
    }

} 
```

# sql - 在 SOAP UI 中读取和存储数据

> ID：11987871
> 
> 赞同：0
> 
> 时间：2012-08-16T13:09:06.443
> 
> 标签：sql, soapui

我是 SOAPUI 的新手。我知道可以查询数据库。

但是我如何读取和存储记录数？

我想检查生成的记录是否不同，例如 ABC1 ABC2 ABC3

所有记录都应该是唯一的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:03:21.630

尝试这个...

要获取重复计数，您可以在 Soap UI 中对 JDBC 请求使用以下查询，或者您可以在 Groovy 脚本编辑器中尝试。

SELECT FIRST_NAME,COUNT(FIRST_NAME) AS NumOccurrences FROM Consumer GROUP BY FIRST_NAME HAVING ( COUNT(FIRST_NAME) > 1 )

如果它带来了结果，那么测试用例应该失败。如果查询没有产生结果，则测试用例通过...

# node.js - 如何清理猫鼬中的用户输入？

> ID：11987873
> 
> 赞同：1
> 
> 时间：2012-08-16T13:09:11.047
> 
> 标签：node.js, express, mongoose

我正在尝试清理猫鼬中的用户输入。我虽然使用猫鼬中间件会有所帮助，但似乎我错了，或者我做错了什么。

我尝试使用 Mongoose 中间件（而不是 Express 中间件）的原因是我有一个可以包含嵌套文档的文档 - 但是，该嵌套文档也可以是独立文档。我正在尝试为我的文档创建一个“单一事实点”，以便我只能在一个地方进行消毒。

以下代码似乎不起作用：

```
Organization.pre("validate", function (next) {
  this.subdomain = this.trim().toLowerCase();
  next();
}); 
```

PS。我也在使用 mongoose-validator，它反过来使用 node-validator 来验证用户输入 - 节点验证器也有一些清理方法，也许我应该以某种方式使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:19:02.687

[`trim: true`](http://mongoosejs.com/docs/api.html#schema_string_SchemaString-trim)在这种情况下，我认为添加到`Organization`架构定义中会更好`subdomain`：

```
subdomain: { type: String, trim: true } 
```

# java - 通过java发送短信

> ID：11987877
> 
> 赞同：2
> 
> 时间：2012-08-16T13:09:24.387
> 
> 标签：java, sms

您好我正在尝试通过java发送短信我已经下载了mail.jar并设置为类路径下面是我的由SMTPSend.java保存的java代码和错误请指导我......

```
import java.util.Date;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public class SMTPSend {

    public SMTPSend() {
    }

    public void msgsend() {

        String username = "MySMSUsername";
        String password = "MyPassword";
        String smtphost = "MySMSHost.com";
        String compression = "My SMS Compression Information";
        String from = "mySMSUsername@MySMSHost.com";
        String to = "9762285104";
        String body = "Hello SMS World!";
        Transport myTransport = null;

        try {
            Properties props = System.getProperties();

            props.put("mail.smtp.auth", "true");

            Session mailSession = Session.getDefaultInstance(props, null);

            Message msg = new MimeMessage(mailSession);

            msg.setFrom(new InternetAddress(from));

            InternetAddress[] address = {new InternetAddress(to)};

            msg.setRecipients(Message.RecipientType.TO, address);

            msg.setSubject(compression);

            msg.setText(body);

            msg.setSentDate(new Date());

            myTransport = mailSession.getTransport("smtp");

            myTransport.connect(smtphost, username, password);

            msg.saveChanges();

            myTransport.sendMessage(msg, msg.getAllRecipients());

            myTransport.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    public static void main(String[] argv) {

SMTPSend smtpSend = new SMTPSend();

smtpSend.msgsend();

}

} 
```

当我运行代码时出现以下错误

```
Exception in thread "main" java.lang.NoClassDefFounderror: SMTPSend 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:31:23.787

```
Properties props = new Properties();
props.put("mail.smtp.host", SMTP_HOST_NAME);
props.put("mail.smtp.auth", "true");
props.put("mail.debug", "true");
props.put("mail.smtp.port", SMTP_PORT);
props.put("mail.smtp.socketFactory.port", SMTP_PORT);
props.put("mail.smtp.socketFactory.class", SSL_FACTORY);
props.put("mail.smtp.socketFactory.fallback", "false"); 
```

您没有提到哪个端口用于发送消息。
你必须做这样的事情`SMTP_PORT = "465"`。

# webmatrix - asp.net 网页：如果已使用 DB 助手，则尝试保存回数据库时出错

> ID：11987879
> 
> 赞同：0
> 
> 时间：2012-08-16T13:09:25.103
> 
> 标签：webmatrix, asp.net-webpages

我有一个 if 语句来检查我的数据库中是否存在一个条目。该代码正确检查电子邮件地址是否已经存在，但是如果电子邮件不存在，我会收到错误消息：

```
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot perform runtime binding 
on a null reference at CallSite.Target(Closure , CallSite , Object ) at 
ASP._Page__footer_cshtml.Execute() 
```

但是，如果我删除获取现有电子邮件的代码，这些行：

```
var getrecord = db.QuerySingle("Select Email from Registrations where email = @0", email); 
emailexists = getrecord.email; 
```

数据将毫无问题地保存回数据库。不确定是不是因为我使用的是相同的 Db 助手？

```
 try
            {
                var db = Database.Open("MiniDB"); 
                var getrecord = db.QuerySingle("Select Email from Registrations where email = @0", email); 
                emailexists = getrecord.email;
                if (emailexists != ""){
                    msg = "This Email address is already registed";    
                    saved = false;
                }
                else {
                    var insertCommand = "INSERT INTO Registrations (Email, Name, regDate) VALUES(@0, @1, @2)"; 
                    db.Execute(insertCommand, email, name, regDate); 
                    saved = true;
                }
            }
            catch (Exception ex)
            {

                msg = ex.ToString();
                saved = false;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:00:31.343

我在 WebMatrix 中检索（然后测试）我的数据库中的值时遇到的一件事是，根据数据库中的字段，在查询数据库并将值存储在变量“”、null 和 System.DBNull 之后。值是三种不同的东西，检查空字符串或简单地为 null 会以与您的示例大致相同的方式向我抛出错误。

希望我能帮助解决这个问题（这可能不是你的问题，但我知道它在类似的情况下困扰了我很长一段时间，因为我以前从未见过 DBNull）。

这个 DBNull 值从数据库传输到我将字段值分配给的变量，因为它是一个会话变量，并且被视为一个对象。我不确定是否仍允许将此 DBNull 值存储在常规变量中（而不是转换为常规 null）。另外，我相信我当时使用的是二进制数据（图像），不确定这是否会有所不同，但是......

最后，对于我的代码，当检查一个字段（在数据库中）为空、null 等时，我使用了类似的东西（仅使用会话变量而不是常规变量）：

```
if (emailexists != "" && emailexists != null && emailexists != System.DBNull.Value)
{
    //code goes here.
} 
```

我希望这有帮助！

# c# - ThrowIfCancellationRequested 有和没有异步/等待？

> ID：11987881
> 
> 赞同：2
> 
> 时间：2012-08-16T13:09:29.970
> 
> 标签：c#, asynchronous, task, .net-4.5

我有以下代码运行而不会引发异常：

```
 var t = Task.Factory.StartNew(() => LongRunningMethod(cancellationToken, progress), cancellationToken);
        t.ContinueWith(Callback, TaskScheduler.FromCurrentSynchronizationContext()); 
```

在“LongRunningMethod”中，我调用了cancellationToken.ThrowIfCancellationRequested()。回调将始终被调用（这是我想要的），并且正确传递给回调的任务将 IsCancelled 设置为 true 或 false。

使用 async/await 关键字，我必须将上述行修改为以下内容：

```
 try
        {
            await Task.Factory.StartNew(() => LongRunningMethod(cancellationToken, progress), cancellationToken);
            textEdit1.Text =  "Done";
        }
        catch (OperationCanceledException)
        {
            textEdit1.Text = "Cancelled";
        } 
```

在这种情况下，为什么 ThrowIfCancellationRequested() 会引发我需要捕获的实际异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:35:30.103

使用`ContinueWith`，您将获得`Task`先前运行的，您可以询问它是否取消（`Task.IsCancelled`）。，`await`你没有那个。与取消通信的唯一方法是通过异常。

现在，`await`只是使用任务，所以你可以“插入”一个延续。例如：

```
await Task.Factory
  .StartNew(() => LongRunningMethod(cancellationToken, progress), cancellationToken)
  .ContinueWith(t=>Trace.WriteLine("Canceled"), TaskContinuationOptions.OnlyOnCanceled); 
```

您仍然可以使用 await 然后使用*仅*`ContinueWith`处理取消场景。因此，从技术上讲，正在等待继续。*`await`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:08:26.947

`async`旨在使异步代码更容易，并尽可能像等效的同步代码一样。

首先，请注意总是会抛出异常。如果已请求取消，`ThrowIfCancellationRequested`将（惊喜）*抛出异常。*

在您现有的代码中，会捕获此异常，然后将其放置在`Task`（包装在 中`AggregateException`）。将`Task`这种情况解释为“已取消”。然后你可以在你的延续中检查布尔标志。

但考虑等效的同步代码：

```
try
{
  LongRunningMethod(cancellationToken, progress);
}
catch (OperationCanceledException)
{
} 
```

这看起来很像这种`async`方法。即使您使用`ContinueWith`，仍然有一个异常被抛出并被捕获 - 从逻辑上讲，您正在执行`try`/ `catch`。就个人而言，我更喜欢显式`try`/`catch`因为：

*   意图更清晰，因此代码更易于阅读和维护。
*   代码更易于访问（绝大多数 C# 程序员理解`try`/ `catch`；相对少数人理解`ContinueWith`）。

但是，`ContinueWith`（稍微）更有效。*

# ios - UIPanGestureRecognizer 不会向右平移

> ID：11987882
> 
> 赞同：1
> 
> 时间：2012-08-16T13:09:31.767
> 
> 标签：ios, uipangesturerecognizer

我有一个 UIView 子类，我在其中添加了一个 UIPanGestureRocognizer：

```
_panGestureRecognizer = [[UIPanGestureRecognizer alloc]
                         initWithTarget:self action:@selector(handlePanGesture:)];
_panGestureRecognizer.maximumNumberOfTouches = 1;
_panGestureRecognizer.delegate = self;
[self addGestureRecognizer:_panGestureRecognizer]; 
```

此视图用于包含 UISplitViewController 作为顶级视图/控制器的视图层次结构中。

在 iPad 模拟器中以横向方式对此进行测试时，如果我通过向上/向下/向左启动平移，我的`handlePanGesture:`方法将按预期调用。但是，如果我通过*向右启动平底锅，则**不会*调用我的`handlePanGesture:`方法。为什么不？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:09:31.767

当我写这个问题时，我自己想出了答案：

从 iOS 5 开始的 UISplitViewController 默认会识别向右滑动手势并显示弹出框控制器。这在纵向时很明显，但是在横向时，手势没有明显的效果，因为纵向显示为弹出框的左侧视图始终以横向显示。

解决方案是禁用 UISplitViewController 的滑动手势：

```
splitViewController.presentsWithGesture = NO; 
```

我不知道是否有办法让这两种手势都起作用。*

# php - PHP if 不适用于多个 php 开始和结束标签

> ID：11987887
> 
> 赞同：-2
> 
> 时间：2012-08-16T13:09:39.843
> 
> 标签：php, if-statement

我无法弄清楚我在这里做错了什么，这引发了服务器错误

```
<?php if(true){?>

<hr/>

<?php}?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:11:29.367

你需要一个空格，`<?php`如下所示：

```
<?php if(true){?>

<hr/>

<?php } ?> 
```

*PHP 会寻找一个完全* 包含`<?php`但不理解的开始标签`<?php}`。

上面的代码按照您的预期呈现水平规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:11:36.023

你可以使用：

```
<?php if(true): ?>

<hr/>

<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-16T13:26:42.530

您只能显示“< hr >”标签。

如果条件始终为真，则使用 if(true) 没有意义。

您可以破坏 php 并显示 de hr 标记，或将 echo 与 hr 一起使用。

# php - 在 ldap 查询中使用 memberOf 子句的问题

> ID：11987889
> 
> 赞同：0
> 
> 时间：2012-08-16T13:09:47.893
> 
> 标签：php, filter, ldap

[我正在尝试完成与此用户在此处](https://stackoverflow.com/questions/1032351/how-to-write-ldap-query-to-test-if-user-is-member-of-a-group)所做的非常相似的事情。

我遵循了答案，但我无法让它工作。在 Active 目录中，我的 memberOf 字段如下所示：

```
CN=$VPN Users,CN=Users,DC=iai,DC=pri,CN=$ITAR,CN=Users,DC=iai,DC=pri,CN=allsubscribers,CN=Users,DC=iai,DC=pri 
```

我的有效过滤器是：

```
(&(objectCategory=person)(sAMAccountName=$p_username)) 
```

我正在尝试使以下工作：

```
(&(objectCategory=person)(sAMAccountName=$p_username)(memberOf=CN=$ITAR)) 
```

我也尝试将完整的 DN（即 CN=Users,DC=iai,DC=pri）添加到我的过滤器中，但我得到：

```
array(1) { ["count"]=> int(0) } 
```

作为我的回应。

我正在使用 ldap 3

这是用php编写的部分**工作身份验证代码：**

```
 $login = ldap_bind( $url, "username@somedomain", $password ); 

  $attributes = array("displayname", "mailnickname");
  $filter = "(&(objectCategory=person)(sAMAccountName=$username))";

  $result = ldap_search($url, "CN=Users,DC=iai,DC=pri", $filter, $attributes);

  $entries = ldap_get_entries($url, $result); 
```

我究竟做错了什么？

### 代码结果

来自@DaveRandom

第一个 Var 转储：

```
string(49) "(&(objectCategory=person)(sAMAccountName=rmoser))"
array(2) {
  ["count"] => int(1)
  [0] => array(8) {
    ["displayname"] => array(2) {
      ["count"] => int(1)
      [0] => string(10) "Ryan Moser"
    }
    [0] => string(11) "displayname"
    ["memberof"] => array(4) {
      ["count"] => int(3)
      [0] => string(36) "CN=$VPN Users,CN=Users,DC=iai,DC=pri"
      [1] => string(31) "CN=$ITAR,CN=Users,DC=iai,DC=pri"
      [2] => string(40) "CN=allsubscribers,CN=Users,DC=iai,DC=pri"
    }
    [1]=> string(8) "memberof"
    ["mailnickname"] => array(2) {
      ["count"] => int(1)
      [0] => string(6) "rmoser"
    }
    [2] => string(12) "mailnickname"
    ["count"] => int(3)
    ["dn"] => string(36) "CN=Ryan Moser,CN=Users,DC=iai,DC=pri"
  }
}
bool(false) 
```

第二个var_dump：

```
string(70) "(&(objectCategory=person)(sAMAccountName=rmoser)(memberof=*CN=$ITAR*))" 
array(1) {
  ["count"] => int(0)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:16:37.693

LDAP 过滤器寻找*完全匹配*。

为了匹配`CN=$ITAR`值中的任何位置，您需要用过滤器通配符将其括起来`*`。

试试这个过滤器：

```
(&(objectCategory=person)(sAMAccountName=$p_username)(memberOf=*CN=$ITAR*)) 
```

也不要忘记这`$ITAR`是 PHP 中的一个有效变量名，因此如果您将该过滤器字符串放在双引号中（您需要这样才能`$p_username`进行插值）PHP 也会尝试将其`$ITAR`作为变量进行插值，发现它（可能）不存在，最终结果将是它从字符串中剥离。

```
$filter = "(&(objectCategory=person)(sAMAccountName=$p_username)(memberOf=*CN=\$ITAR*))"; 
```

对于任何有关使用 PHP 构建的动态过滤器的问题，一个有用的链接是[这个](https://stackoverflow.com/a/8561604/889949)。

# wpf - 移除 AvalonDock 坞站和关闭按钮

> ID：11987893
> 
> 赞同：4
> 
> 时间：2012-08-16T13:09:59.940
> 
> 标签：wpf, avalondock

我想删除它们，因为这给我带来了很多问题。如果有办法解决它，我很乐意尝试。使用它的前几分钟，我遇到了 3 个不同的异常，我不知道如何删除那些该死的选项。

固定和取消固定和固定会引发 InvalidOperationException，因为该操作由于对象的当前状态而无效。

有时固定和取消固定会打开一个对话框并询问我一个文件，我不希望这种情况发生，但它正在发生并且它会引发异常。

我不小心单击了关闭按钮，无法返回窗口。这真的很令人沮丧。我相信其他 avalondock 用户也遇到过这个问题。

因为我不想浪费太多时间，所以我要在这里问。您是如何绕过这些异常或删除这些按钮的？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:06:30.737

如果您对 Avalon Dock（版本 2）使用 MVVM 方法，那么您可以将其放入您的视图模型中：

```
DockAsDocumentCommand = new DelegateCommand(() => { }, () => false);
AutoHideCommand = new DelegateCommand(() => { }, () => false);
CanClose = false;
CanHide = false; 
```

这些都需要有 TwoWay 绑定和 NotifyPropertyChanged。

一旦你这样做了，所有关闭、隐藏和移动到另一个文档的选项都将被删除或灰显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:29:41.050

我和你的问题完全一样。不愿意从实际 UI 中删除图标，我只是用事件处理程序禁用了它们

这是我的工作方式：

要删除那些 Hide 和 AutoHide 命令：

我添加了以下处理程序：

```
CommandManager.AddPreviewExecutedHandler(this, new ExecutedRoutedEventHandler(this.ContentClosing)) 
```

这`ContentClosing`看起来像：

```
/// <summary>
/// Handler called when user clicked on one of the three buttons in a DockablePane
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void ContentClosing(object sender, ExecutedRoutedEventArgs e)
{
    if (e.Command == ApplicationCommands.Close || e.Command == DockablePaneCommands.Close)
    {
        e.Handled = true;
        DockManager source = sender as DockManager;
        if (source.ActiveContent != null)
        {
            source.ActiveContent.Close();
        }
    }
    else if (e.Command == DockablePaneCommands.Hide || e.Command == DockablePaneCommands.ToggleAutoHide)
    {
        e.Handled = true; 
```

} }

这个处理程序实际上是为了关闭正确的内容。出于某种原因，有时`AvalonDock`会关闭另一个内容，因为它具有焦点（单击十字不会将焦点放在您的内容上，因此它将关闭当前焦点内容...）如您所见，我只是覆盖事件并手动关闭我的组件

不幸的是，这并没有涵盖所有情况。出于某种原因（hello buggy AvalonDock），我也有实际捕获关闭按钮的点击，因为有一个边缘情况：如果您删除最后一个组件，您将无法添加新组件，因为`AvalonDock`将删除最后剩下的面板。此外，如果您关闭其中`DockableContent`包含许多选项卡的 a，`AvalonDock`将关闭所有选项卡，因此我必须实现一些东西来关闭当前选项卡（这更有意义恕我直言）我必须为添加到的每个内容添加一个鼠标按下处理程序抓住这个事件。使用以下技巧，我可以做一个解决方法来避免这个错误：

```
 /// <summary>
    /// Handler called when a DockableContent state changed.
    /// We need it to define a PreviewMouseDownHandler for each DockablePane
    /// possibly created (which are usually created upon docking a floating window
    /// to a new position) in order to handle single DockableContent closing
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void NewContent_StateChanged(object sender, RoutedEventArgs e)
    {
        DockableContent source = sender as DockableContent;
        if (source.State == DockableContentState.Docked && source.Parent is DockablePane)
        {
            DockablePane parent = source.Parent as DockablePane;
            parent.PreviewMouseDown -= mouseHandler;
            parent.PreviewMouseDown += mouseHandler;
        }
    }

    /// <summary>
    /// Handler called on mouse down on a DockablePane.
    /// It is designed to detect where did the user click, and 
    /// if he clicked on Close, only the current DockableContent will be closed
    /// (unlike the native behavior which requires us to close the entire DockablePane
    /// upon clicking on Close...)
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void DockablePaneMouseDown(object sender, MouseButtonEventArgs e)
    {
        DockablePane source = sender as DockablePane;
        if (e.OriginalSource is AvalonDock.ImageEx)
        {
            //User clicked on one of the three icons on the top-right corner of the DockablePane
            if ((e.OriginalSource as AvalonDock.ImageEx).Source.ToString().Contains("PinClose"))
            {
                RemoveFromUI(source.SelectedItem as DockableContent);
                e.Handled = true;
            }
        }
    }

    /// <summary>
    /// Removes a DockableContent from the currently displayed UI
    /// (called when the original DockableItemsSource changed)
    /// </summary>
    /// <param name="content">The content to be removed</param>
    private void RemoveFromUI(DockableContent content)
    {
        if (content == null)
        {
            return;
        }
        DockablePane parent = content.Parent as DockablePane;
        if (this.ActiveContent == parent.SelectedItem)
        {
            this.ActiveContent = null;
        }
        (parent.SelectedItem as DockableContent).Close();
        //// If the current DockablePane is left empty, we ensure to close it
        if (parent.Items.Count == 0)
        {
            //This case is needed if we are trying to remove the last DockablePane from a DockingManager
            //Native behavior will NOT set the Content property if you remove the last DockablePane:
            //it will therefore consider this CLOSED DockablePane as the current ActiveContent,
            //and will try to add new contents in this closed pane, which seems rather disturbing.
            //Here we explicitly set the Content property to null if we are removing the last element,
            //so next time user adds a tab, it will be added as the new Content!
            if (parent == this.Content)
            {
                this.Content = null;
            }
            parent.Close();
            parent.Visibility = Visibility.Hidden;
        }
    } 
```

同样，对于这么小的事情，这是一项令人难以置信的大工作，但不幸的`AvalonDock`是，这远未准备好生产环境，我不得不调整这些事情以使其工作。

希望它也对你有用，并为你自己省去一些我已经给这个问题带来的头痛！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-17T08:14:03.000

如果您使用 MVVM，在 XAML 中将其 CanClose 设置为 false 就足够了，如下所示：

```
 <avalondock:DockingManager.LayoutItemContainerStyleSelector>
            <avalon:PanesStyleSelector>
                <avalon:PanesStyleSelector.DeviceStyle>
                    <Style TargetType="{x:Type avalondock:LayoutItem}">
                        <Setter Property="Title" Value="{Binding Model.Name}"/>
                        <Setter Property="ToolTip" Value="{Binding Model.Name}"/>
                        <Setter Property="ContentId" Value="{Binding Model.Id}"/>
                        <Setter Property="CanClose" Value="False"></Setter>
                    </Style>
                </avalon:PanesStyleSelector.DeviceStyle>
            </avalon:PanesStyleSelector>
        </avalondock:DockingManager.LayoutItemContainerStyleSelector> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T06:50:02.073

摆脱`Close`,`CloseAll`和`CloseAllButThis`命令的另一种方法是将它们的命令设置为 null in `LayoutItemContainerStyleSelector`。就像是：

```
<xcad:DockingManager.LayoutItemContainerStyleSelector>
    <local:PanesStyleSelector>
      <local:PanesStyleSelector.DocStyle>
          <Setter Property="CloseCommand" Value="{Binding Model.CloseCommand}"/>
          <Setter Property="CloseAllCommand" Value="{x:Null}" />
          <Setter Property="CloseAllButThisCommand" Value="{x:Null}" />
        </Style>
      </local:PanesStyleSelector.DrawingStyle>
    </local:PanesStyleSelector>
  </xcad:DockingManager.LayoutItemContainerStyleSelector> 
```

`PanesStyleSelector`很简单`StyleSelector`（我有多种样式可供选择，具体取决于窗格类型，所以我需要一个`StyleSelector`；如果您只有一种类型的窗格，您可能想跳过它。以下是简化版本。）：

```
Public Class PanesStyleSelector
  Inherits StyleSelector

  Public Property DocStyle() As Style

  Public Overrides Function SelectStyle(item As Object, container As System.Windows.DependencyObject) As System.Windows.Style
    Return DocStyle
  End Function
End Class 
```

这将禁用文档选项卡的上下文菜单中的`CloseAll`和`CloseAllButThis`命令。另请注意，我正在`CloseCommand`我的虚拟机中处理，我可以决定是关闭我的文档还是提示用户。这将消除意外单击关闭按钮的情况。

# php - php通过fpdf在pdf中包含生成的png

> ID：11987894
> 
> 赞同：2
> 
> 时间：2012-08-16T13:10:00.113
> 
> 标签：php, fpdf

我正在尝试使用也由 php 生成的图像生成 PDF。听起来很简单，我确信我只是搞砸了标题，但我似乎无法在这里找到解决方案。

首先我生成一个PDF：

```
define('FPDF_FONTPATH','fonts/');
require('scpt/fpdf.php');

class PDF extends FPDF {}
$pdf = new FPDF('P','in',array(8.5,11));
$pdf->SetAutoPageBreak(false,0);

$pdf->SetTextColor(0,0,0);
$pdf->SetDrawColor(0,0,0);
$pdf->SetFont('Helvetica','',12);

$pdf->Image('label.php?imgid=17',0,0,0,0,'PNG');

$pdf->Output('label.pdf','D'); 
```

然后我在 label.php 中生成 PNG：

```
if(isset($_GET["imgid"])) {
 header("Content-Type: image/png");
 $im = @imagecreate(110, 20)
     or die("Cannot Initialize new GD image stream");
 $background_color = imagecolorallocate($im, 0, 0, 0);
 $text_color = imagecolorallocate($im, 233, 14, 91);
 imagestring($im, 1, 5, 5,  "A Simple Text String", $text_color);
 imagepng($im);
 imagedestroy($im);
} 
```

这将输出：`FPDF error: Not a PNG file:....`

在浏览器中调用 label.php?imgid=17 但是会向我显示图像就好了......

我错过了什么？

编辑

在文档中：示例

```
// Insert a logo in the top-left corner at 300 dpi
$pdf->Image('logo.png',10,10,-300);
// Insert a dynamic image from a URL
$pdf->Image('http://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World',60,30,90,0,'PNG'); 
```

所以应该可以在不先保存的情况下包含动态生成的图像？！

编辑#2

我使它与库[mem_image](http://www.fpdf.org/en/script/script45.php)一起工作，但问题仍然是这不应该引发错误 IMO？！所以我让这个问题保持开放，看看我的脚本是否确实有问题，结果证明这是一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:32:08.640

你几乎拥有它，你只错过了几件事。首先，您需要在 URL 中为您的 Image() 调用提供完整的服务器地址，而不是

```
$pdf->Image('label.php?imgid=17',0,0,0,0,'PNG'); 
```

你需要：

```
$pdf->Image('http://www.yourserver.com/label.php?imgid=17',0,0,0,0,'PNG'); 
```

这将消除您遇到的 FPDF 错误。然后为了让 FPDF 正确呈现您的输出，您需要添加对 AddPage() 的调用，因此您的 PDF 生成脚本将变为：

```
require('scpt/fpdf.php');

$pdf = new FPDF('P','in',array(8.5,11));
$pdf->AddPage();
$pdf->Image('http://www.yourserver.com/label.php?imgid=17',0,0,0,0,'PNG');

$pdf->Output('label.pdf','D'); 
```

当然，如果您只包含单个图像，则不需要 SetTextColor()、SetFont() 等。您也不需要自定义类定义（我删除了不需要的行）。

不要忘记`www.yourserver.com`为您的脚本替换适当的域和路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:22:42.900

查看 allow_url_fopen 指令

[http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T07:23:40.033

**首先**，尝试使用此代码检查您的网址

$handle = fopen(" [http://www.yourserver.com/label.php?imgid=17](http://www.yourserver.com/label.php?imgid=17) ", "rb");

print_r(fread($handle, 8192));

您可以查看您的网址中包含的内容

**) 确保您的网址未重定向到登录页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:22:30.657

出现此问题与您的文件名有关，请确保您传递的文件名有效

```
function _parsepngstream($f, $file)
{
// Check signature
if($this->_readstream($f,8)!=chr(137).'PNG'.chr(13).chr(10).chr(26).chr(10))
    $this->Error('Not a PNG file: '.$file);

...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T13:18:06.527

Image 函数的参数必须是文件，而不是 URL 或其他脚本。由于您已经有了标签脚本，最简单的解决方法是将图像下载到临时位置，然后使用该临时文件调用 $pdf->Image()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T06:50:08.837

你只需要做改变

```
require('fpdf.php'); 
```

并做

```
$pdf->Image('http://www.yourserver.com/label.php?imgid=17',0,0,0,0,'PNG'); 
```

并运行您的代码...

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-12T08:42:37.140

更简单，只需将 .png 放在动态链的最后即可

例子：

```
$pdf->Image('http://www.yourserver.com/label.php?   imgid=17.png',0,0,0,0,'PNG'); 
```

或者

```
$pdf->Image('../label.php?imgid=17.png',0,0,0,0,'PNG'); 
```

url 中无法识别 mime 类型 为什么不出现 png，如果这是一个愚蠢的错误，但事实证明，谷歌通过添加带有 url 和 PNG 的扩展名来做同样的事情

# javascript - 使用 jquery grep 过滤对象数组，但条件是变量

> ID：11987896
> 
> 赞同：0
> 
> 时间：2012-08-16T13:10:01.187
> 
> 标签：javascript, jquery, object

我正在尝试过滤一组对象。但是要过滤的对象的属性在其他地方定义为变量，而不是 100% 我如何构造点符号语法。

所以我有一个这样的数组对象

```
var listings = [
    {"id" : "1", "name":"a name", "surname" : "a surname"},
    {"id" : "2", "name":"b name", "surname" : "b surname"},
    {"id" : "3", "name":"c name", "surname" : "c surname"}
] 
```

我有一个变量，指定要过滤的对象的哪些属性。此变量并不总是设置为名称。在上面的示例中，它可以在 id、name 或 surname 上。

```
var filter = 'id' 
```

要查找的过滤器 val 的 var

```
var filterVal = '2' 
```

然后我有这个 grep 电话。

```
listings = $.grep(listings, function (obj, index) {
return  obj.id === filterVal;
}); 
```

但我想要的不是 obj.id 硬编码，而是：

```
obj."value of filter variable" === filterVal 
```

提前致谢

本

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T13:12:19.243

您可以使用方括号表示法而不是点表示法。

```
var idKey = "name";
$.grep(listings, function (obj) {
    return obj[idKey] === filterVal;
}); 
```

# r - 在 R 中安装 ShortRead 包时出现问题 - 无法安装 RCurl 依赖项

> ID：11987899
> 
> 赞同：1
> 
> 时间：2012-08-16T13:10:07.177
> 
> 标签：r, rcurl, bioconductor

我正在使用 Bioconductor，我想安装 ShortRead 包。我尝试了很多次，但安装依赖包 RCurl 时出错。我在 RStudio 中收到此错误：

```
 Cannot find curl-config 
```

我该怎么办？有短读的替代品吗？

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:54:00.593

*   What OS are you using?
*   `sessionInfo ()`?

*   is libcurl (probably you need the dev version) installed? RCurl links to libcurl. [RCurl's CRAN page](http://cran.r-project.org/web/packages/RCurl/index.html) says:

> SystemRequirements: libcurl (version 7.14.0 or higher) [http://curl.haxx.se](http://curl.haxx.se). On Linux systems, you will often have to explicitly install libcurl-devel to have the header files and the libcurl library.

# java - 通过 Spring 集成设置枚举值

> ID：11987912
> 
> 赞同：0
> 
> 时间：2012-08-16T13:11:11.267
> 
> 标签：java, spring, inversion-of-control

例如，我有一个系统，其中有一个商店枚举。这些节目每个都有自己的 ShopCommand 属性（其中一些共享相同类型的命令类）。从命令类中的一个方法，然后我想在 Spring Integration 网关上调用 send 。我感到困惑的是如何在春天实际实例化这个网关。理想情况下，我想要的是通过 XML 配置构造枚举，其中命令属性也在 Spring 中创建，该属性具有通过 Spring 设置的属性 outGateway。我不确定我是否对这个描述非常清楚，如果需要澄清，那就问吧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:24:23.850

我认为这就是你所要求的：

假设我有一个 ShopType 的枚举

```
public enum ShopType {
  GROCERY, DEPARTMENT, MALL; 
} 
```

然后我有一些我想通过 spring 配置设置的 Store bean。您可以像这样实例化和使用枚举：

```
<bean id="DEPTARTMENT_STORE" class="my.package.ShopType" factory-method="valueOf">
  <constructor-arg value="DEPARTMENT"/>
</bean>

<bean id="searsStore" class="my.package.Store">
  <property name="shopType" ref="DEPTARTMENT_STORE"/>
</bean> 
```

factory-method 指向用于创建对象的静态方法。所以你可以使用枚举的方法“valueOf”作为工厂方法。

# git - 如何改写第一个 git commit 消息？

> ID：11987914
> 
> 赞同：133
> 
> 时间：2012-08-16T13:11:15.260
> 
> 标签：git, message, git-rebase, git-commit, revision-history

## 我有一个包含 3 个提交的工作树：

➜ ~myproject git:(master)`git log`

```
commit a99cce8240495de29254b5df8745e41815db5a75
Author: My Name <my@mail.com>
Date:   Thu Aug 16 00:59:05 2012 +0200

    .gitignore edits

commit 5bccda674c7ca51e849741290530a0d48efd69e8
Author: My Name <my@mail.com>
Date:   Mon Aug 13 01:36:39 2012 +0200

    Create .gitignore file

commit 6707a66191c84ec6fbf148f8f1c3e8ac83453ae3
Author: My Name <my@mail.com>
Date:   Mon Aug 13 01:13:05 2012 +0200

    Initial commit (with a misleading message) 
```

## 现在我希望我的*第一次提交*[`reword`](http://git-scm.com/docs/git-rebase)的提交消息（6707a66）

 *➜ ~myproject git:(master)`git rebase -i 6707`

（……进入 vim）

```
pick 5bccda6 Create .gitignore file
pick a99cce8 .gitignore edits

# Rebase 6707a66..a99cce8 onto 6707a66
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out 
```

在这种情况下，我希望更正（`reword`用 git 的说法）有问题的提交消息：

> 初始提交（带有误导性消息）

……合适的东西。

不出所料，我上面的尝试没有成功，因为第一次提交显然没有任何*父*提交。（当你`rebase`，你需要在你希望的那个*之前*`reword`引用下一个最旧的提交，对吧？）

因此，我的问题的要点是，您可以通过任何其他方式实现这一目标吗？

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2014-01-10T15:48:38.797

做`git rebase -i --root`

（指向`root`而不是指向特定的提交）

这样，第一个提交也包括在内，您可以`reword`像任何其他提交一样进行它。

该`--root`选项是在 Git `v1.7.12`(2012) 中引入的。在此之前，唯一的选择是使用`filter-branch`or `--amend`，这通常更难做到。

注意：另请参阅[这个类似的问题和答案](https://stackoverflow.com/a/14630424/1075152)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-30T13:38:03.843

[pcreux 的要点](https://gist.github.com/1681580)有一个很好的方法来改写第一次提交：

```
# You can't use rebase -i here since it takes the parent commit as argument.
# You can do the following though:
git checkout FIRST_COMMIT_SHA && git commit --amend && git rebase HEAD master 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-16T13:13:34.040

您可以随时使用`git filter-branch --msg-filter`：

```
git filter-branch --msg-filter \
  'test $GIT_COMMIT = '$(git rev-list --reverse master |head -n1)' &&
echo "Nice message" || cat' master 
```*

# c# - 如何使用asp.net中另一个相同的表单域动态加载表单域？

> ID：11987916
> 
> 赞同：1
> 
> 时间：2012-08-16T13:11:25.150
> 
> 标签：c#, asp.net, ajax, jquery

我正在开发一个 ASP.net 应用程序，我需要`aspx`从以下代码中选择文件中的值：

```
<td align="right"> Signal </td>
    <td> <select id = "signal" name = "signal">
    <%
        SqlDataReader Dr = Signal(); 
        while (Dr.Read())
        {
            Response.Write("<option> " + Dr["SignalID"].ToString() + " </option>");
        }
        Dr.Close();
    %>
        </select>
    </td>

    <td align = "right"> Data </td>
    <td> <input type="textarea" id = "data"/> Data need on the basis of above selected data </td> 
```

Where`Signal()`方法正在返回一些数据。例如它返回：

```
2005, 2006, 2007 
```

上述数据的原始代码为：

```
<select>
 <option value="2005">Volvo</option>
 <option value="2006">Saab</option>
 <option value="2007">Mercedes</option>
</select> 
```

但是我面临的一个问题是，我希望这个选定的变量回到同一个`aspx.cs`文件而不提交表单。这样我就可以将数据显示到文本区域中。

例如：

用户打开`some.aspx`页面，页面上会出现一个表单。默认情况下，它显示`2005`并基于该信息`text area will`加载。

当用户选择`2006`时，并根据该数据`text area`动态加载。

我知道我们可以使用 Ajax 和 Jquery，但我还不足以使用`Jquery and Ajax`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:40:10.940

解决方案 1：使用[Microsoft AJAX Toolkit](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)中的[DynamicPopulate 控件](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/DynamicPopulate/DynamicPopulate.aspx)- 非常容易实现

解决方案 2：如您所指出的，使用[jQuery AJAX API 。](http://api.jquery.com/jQuery.ajax/)

任何一种解决方案都需要[WebMethod](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.71%29.aspx)。

```
[System.Web.Services.WebMethod(BufferResponse=false)]
public string GetTextAreaData(int selectedIndex)
{
   //implementation code
} 
```

解决方案 1 非常简单，我什至不会发布示例。只需点击上面的链接，您就应该一切就绪。但我会这么说，阅读与[ToolkitScriptManager](http://www.nitrix-reloaded.com/2010/06/29/script-manager-vs-toolkitscriptmanager/)相关的性能调整，例如将其设置为发布模式、组合脚本等。

第二种解决方案也很简单，但需要您自己解析结果（有点）。jQuery 与前几年相比已经取得了长足的进步，并且不再那么可怕了。

创建一个 OnChange 事件处理程序（JS 方法）并将其附加到您的下拉列表中。在处理程序中，调用如下代码：（注意，这是未经测试的代码，它可能不适用于简单的复制/粘贴，但你明白了）。

```
function GetTextAreaData() { 
    var data = this.selectedIndex; // or whatever you want to send to the server
    var options = { 
        type: "POST", 
        url: "Default.aspx/GetTextAreaData", 
        data: "{selectedIndex:" + data + "}", 
        contentType: "application/json; charset=utf-8", 
        dataType: "json", 
        success: function(msg) { 
            $('#textAreaId').val(msg);
        } 
    }; 
    $.ajax(options); 
} 
```

# iphone - 即使在#import 之后也无法识别 FirstViewController 中的声明

> ID：11987920
> 
> 赞同：1
> 
> 时间：2012-08-16T13:11:33.173
> 
> 标签：iphone, ios5, controller

有谁知道为什么在 FirstViewController 中导入 SecondViewController.h 后仍无法识别声明？

这是 SecondViewController.h 中的代码

```
@property (nonatomic, copy) NSString *query; 
```

我正在尝试在 FirstViewController 中使用它。但这给了我错误-

```
#import "FirstViewController.h"
#import "SecondViewController.h"

-(IBAction)searchButtonPressed:(id)sender {

    FirstViewController *viewController = [[FirstViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    viewController.query = [NSString stringWithFormat:@"%@",
                            search.text];
    [[self navigationController] pushViewController:viewController
                                           animated:YES];
    [viewController release];

} 
```

无法识别“查询”。即使在 FirstViewController 的实现文件中导入了 SecondViewController.h。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:19:43.587

它被称为循环包含。每个标题`#import`都是另一个 - 哪个是第一个？

使用前向声明：

**前**

```
#import "A.h"
@interface B : NSObject
... 
```

**后**

```
@class A; // << forward declaration instead of import
@interface B : NSObject
... 
```

* * *

更详细地说：`#import`就像`#include`包含保护一样。

`#include`就像将包含文件的内容复制到另一个文件（以及它包含的所有文件）中一样。

如果两个标题包含另一个，则为循环包含。在 C 中，如果两个头文件依赖于另一个头文件中的声明，这将导致错误——它将遇到无法识别的标识符。

现在，您可以通过使用前向声明来避免这个问题：`@class SomeClass;`. 这告诉编译器有一个名为`SomeClass`-- 因此它不需要发出编译错误的 ObjC 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:23:12.673

```
// -------------- FirstViewController.h

@class SecondViewController;
@interface FirstViewController : UIViewController { 
    SecondViewController *secondViewController;
}
@end

// -------------- FirstViewController.m

#import "FirstViewController.h" 
#import "SecondViewController.h"

@implementation FirstViewController

-(id)init {
    [super init];
    secondViewController = [[SecondViewController alloc] init];
    return self;
}

@end 
```

# html - 在 td 内的 div 中居中文本

> ID：11987935
> 
> 赞同：0
> 
> 时间：2012-08-16T13:12:22.417
> 
> 标签：html, text, html-table

我有以下内容：

```
<td rowspan="3"; class="outer"; color="green"><div class"inner"></div></td> 
```

CSS：

```
.in{
text-align:center;
-webkit-border-radius:8em;
font-size:25px;
height:120px;
width:120px;
vertical-align:middle;
}

td{
text-align:center;
padding:0px;
height:100%;
overflow:hidden; 
```

我正在尝试在 td 内的 div 内生成一个圆圈。我动态地（ajax）将文本（一个数字）添加到 div 中。所以基本上我想要一个中心有一个数字的圆圈。问题是文本总是在圆圈的顶部，而不是在中心。

感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:21:23.913

尝试添加`line-height:120px;`到您的`.in`班级

# android - 操作栏上的搜索小部件不会触发我的搜索活动

> ID：11987937
> 
> 赞同：23
> 
> 时间：2012-08-16T13:12:31.770
> 
> 标签：android, android-actionbar, android-searchmanager

我正在根据官方教程开发搜索小部件界面：http: [//developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)

**问题：**当我输入查询并按确定/输入时，我的 SearchableActivity 没有被触发。

*SearchableActivity 的清单：*

```
<activity android:name="SearchableActivity" android:launchMode="singleTop" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
</activity> 
```

*xml/可搜索的.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
android:hint="Search" android:label="@string/app_name" >
</searchable> 
```

*将图标添加到操作栏的主要活动生命周期方法（工作正常）：*

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.main, menu);

    // Get the SearchView and set the searchable configuration
    SearchManager searchManager = (SearchManager)getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

    // Do not iconify the widget;expand it by default
    searchView.setIconifiedByDefault(false);

    return true;
} 
```

*SearchableActivity.java*

```
public class SearchableActivity extends ListActivity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("MY", "search activity triggered");
   }

} 
```

**注意：**搜索小部件出现在操作栏上，我可以插入数据，但按 OK/Enter 不会将我带到 SearchableActivity（不会触发 SearchableActivity 的 onCreate）。

我错过了什么还是官方教程有缺陷？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-16T14:14:24.167

问题已解决：本教程似乎缺少一个重要部分：`<meta-data android:name="android.app.default_searchable" android:value=".MySearchActivityName" />`必须`<application>`在清单中的标签内添加才能使搜索小部件正常工作。

**编辑**- 当在数据发布时未触发操作栏搜索时也提示解决问题（没有给出任何错误，并且文档没有关于此限制的消息）：在 searchable.xml 文件中 android:hint 和 android:label 属性**必须**是对 strings.xml 中字符串的引用。[来源](https://stackoverflow.com/a/15735869/797321)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:15:02.297

您应该覆盖`onOptionsItemSelected`并且可能`onSearchRequested`在您的活动中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T17:56:01.193

如果“xml/searchable.xml”文件的格式不正确（诸如“searchable”标签之类的东西不是全部小写），则在执行期间不会返回错误消息，并且不会调用“SearchableActivity”。

# .htaccess - 将子域重定向到除一个 url 之外的主域

> ID：11987939
> 
> 赞同：6
> 
> 时间：2012-08-16T13:12:55.227
> 
> 标签：.htaccess

嗨我有一个主域如下

**主域名： http: [//www.sample.com/](http://www.sample.com/)**

**子域：[http ://dev.sample.com/](http://dev.sample.com/)**

现在如果有人访问[http://dev.sample.com/](http://dev.sample.com/)它需要重定向到 [http://www.sample.com/](http://www.sample.com/) 所以我在我的子域中添加了以下代码它工作得很好

```
RewriteCond %{HTTP_HOST} !www.sample.com.com$ [NC]

RewriteRule ^(.*)$ http://www.sample.com.com/$1 [L,R=301] 
```

但是如果从子域访问以下 url **[http://dev.sample.com/data](http://dev.sample.com/data)**那么它不应该重定向到主域。它应该保留在该子域页面上。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:35:27.550

试试这些规则：

```
RewriteCond %{HTTP_HOST} ^dev\.sample\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/?data
RewriteRule ^(.*)$ http://www.sample.com/$1 [L,QSA,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:22:59.567

试试这个：

```
RewriteCond %{HTTP_HOST} !www\.sample\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/data [NC]
RewriteRule ^(.*)$ http://www.sample.com/$1 [L,R=301] 
```

但是，这将阻止所有以 /data 开头的 URI 的 URL。因此，如果您有[http://blog.sample.com/data](http://blog.sample.com/data)它也将允许它在不重写的情况下解决。如果这是一个问题，您可能会变得更复杂......在此规则之后添加此以捕获所有非开发子域：

```
RewriteCond %{HTTP_HOST} !dev\.sample\.com$ [NC]
RewriteCond %{HTTP_HOST} !www\.sample\.com$ [NC]
RewriteRule ^(.*)$ http://www.sample.com/$1 [L,R=301] 
```

现在，如果不满足第一个条件集，则第一个规则将不会运行，因此请检查以确保您仅使用 /data 为 dev 和 www up 提供服务。

# c# - 切换 HDMI 显示器时启动应用程序

> ID：11987943
> 
> 赞同：2
> 
> 时间：2012-08-16T13:13:04.417
> 
> 标签：c#, hdmi, xbmc

非常简单，当我按下切换器上的开关以从我的 PC 显示器切换到其上方的电视时，我想简单地运行 XBMC。我对语言并不太挑剔，但更好奇是否有一个我可以订阅的事件（也许在 Win32 API 中）。如果没有，我该如何进行投票？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:19:22.253

SC_MONITORPOWER 可能会对您有所帮助，您可以在这里查看[http://thydzik.com/hdmion-a-solution-to-loss-of-dvi-video-epid-signal-on-hd-tvs/](http://thydzik.com/hdmion-a-solution-to-loss-of-dvi-video-epid-signal-on-hd-tvs/)开始。

对我来说，每当我更改 HDMI 上的显示输入时，我的 DVI 输出就会死机，大概是因为它检测到显示器已经消失（因为现在它使用了不同的 HDMI 输入）。

如果您的设置类似.. DVI-> HDMI 与运行类似的电视，这可能有效。IE。检测（可能是轮询？）监视器是否连接到该输出。但这在很大程度上取决于您运行的硬件有多新。它可能不适用于一般情况。

请注意，我发布的示例并未检测是否存在监视器，它只是强制重新检测。不过，检测可能会起到类似的作用。

# android - AsyncTask 进度加载器 json 列表不起作用

> ID：11987945
> 
> 赞同：0
> 
> 时间：2012-08-16T13:13:08.947
> 
> 标签：android

嘿，我正在使用通过 php 从 mysql db 获取的朋友列表。有时需要一段时间取决于连接强度。所以我想使用加载器直到它获取数据。但我收到错误。

请帮我。

谢谢你，

代码

```
public class Activity_YourFriendsWith_Class extends Activity {

public String PREFS_NAME = "MyPrefsFile";
public String PREFS_USERID = "prefsUserId";

private static final String TAG_Name = "fname";
private static final String TAG_LName = "lname";

String result = "";
public String userId;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_yourfriendswith);

    SharedPreferences pref = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);

    userId = pref.getString(PREFS_USERID, "");

    Button back = (Button) findViewById(R.id.addback);
    back.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent();
            intent.setClass(getApplication(), Activity_MyProfile_Class.class);
            startActivity(intent);
            finish();
        }
    });

    Button addfrnds = (Button) findViewById(R.id.addfrnds);
    addfrnds.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent inti = new Intent();
            inti.setClass(Activity_YourFriendsWith_Class.this,
                    Activity_AddFreinds_Class.class);
            startActivity(inti);
        }
    });

    ProgressTask task = new ProgressTask();
    task.execute();

}
private class ProgressTask extends AsyncTask<String, Void, Boolean> {

           private ProgressDialog pd;
        private Activity activity;

    @Override
    protected Boolean doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        InputStream is = null;

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("user_id", userId));
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://hopscriber.com/friendshopscriber.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }
        // parse json data
        try {

            ArrayList<HashMap<String, String>> placelist = new ArrayList<HashMap<String, String>>();
            JSONArray jArray = new JSONArray(result);
            if (jArray != null) {
                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    HashMap<String, String> map = new HashMap<String, String>();

                    map.put(TAG_Name, json_data.getString("fname"));
                    map.put(TAG_LName, json_data.getString("lname"));

                    placelist.add(map);
                }
            }
            ListView list = (ListView) findViewById(R.id.frndslist);

            ListAdapter adapter = new SimpleAdapter(activity, placelist,
                    R.layout.listrow_yourfriendswith, new String[] { TAG_Name,
                            TAG_LName }, new int[] {
                            R.id.fname, R.id.lname });
            list.setAdapter(adapter);

        } catch (JSONException e1) {
            ListView list = (ListView) findViewById(R.id.frndslist);
            list.setEmptyView(findViewById(R.id.fempty));
        }
        return null;
    }

    }

} 
```

日志猫

```
08-16 18:38:17.910: E/AndroidRuntime(452): FATAL EXCEPTION: AsyncTask #1
08-16 18:38:17.910: E/AndroidRuntime(452): java.lang.RuntimeException: An error occured while executing doInBackground()
08-16 18:38:17.910: E/AndroidRuntime(452):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.lang.Thread.run(Thread.java:1019)
08-16 18:38:17.910: E/AndroidRuntime(452): Caused by: java.lang.NullPointerException
08-16 18:38:17.910: E/AndroidRuntime(452):  at android.widget.SimpleAdapter.<init>(SimpleAdapter.java:85)
08-16 18:38:17.910: E/AndroidRuntime(452):  at hopscriber.com.Activity_YourFriendsWith_Class$ProgressTask.doInBackground(Activity_YourFriendsWith_Class.java:142)
08-16 18:38:17.910: E/AndroidRuntime(452):  at hopscriber.com.Activity_YourFriendsWith_Class$ProgressTask.doInBackground(Activity_YourFriendsWith_Class.java:1)
08-16 18:38:17.910: E/AndroidRuntime(452):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-16 18:38:17.910: E/AndroidRuntime(452):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-16 18:38:17.910: E/AndroidRuntime(452):  ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:19:17.817

```
 private class ProgressTask extends AsyncTask<String, Void, Boolean> {

           private Activity activity;
           ......

           ListAdapter adapter = new SimpleAdapter(activity, ......);

    } 
```

未定义可变**活动- 所以你得到 NPE**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:05:04.883

尝试将您的代码分成不同的状态，在 doInbackground() 中进行互联网连接，并在 onPostExecute() 中操作您的列表视图以确保 AsyncTask 已经完成了它的工作

```
private class ProgressTask extends AsyncTask<String, Void, Boolean> {

    @Override
    protected Boolean doInBackground(String... params) {
        //load your progressBar here
        //for instance
        ProgressBar bar = (ProgressBar) findViewById(R.id.yourProgressBar);
        bar.setVisibility(View.VISIBLE);

        //Load your content here

    }

    protected void onPostExecute() {
        //manipulate your list view here, after fill in some content

        //set your loading bar invisible
        bar.setVisibility(View.INVISIBLE);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:22:30.203

而且您也不能在方法 doInBackground 中使用您的 ListView 进行操作。您应该在 onPostExecute 方法中执行此操作

# python - 如何为 Python 属性实现 __iadd__

> ID：11987949
> 
> 赞同：15
> 
> 时间：2012-08-16T13:13:27.767
> 
> 标签：python, properties, descriptor, magic-methods

我正在尝试创建一个 Python 属性，其中就地添加由与检索值、添加另一个值和重新分配不同的方法处理。因此，对于`x`对象上的属性`o`，

```
o.x += 5 
```

应该不同于

```
o.x = o.x + 5 
```

最终的值`o.x`应该是一样的，以免混淆人们的期望，但我想让就地添加更高效。（实际上，该操作比简单的加法要花费更多的时间。）

我的第一个想法是在课堂上定义，

```
x = property(etc. etc.)
x.__iadd__ = my_iadd 
```

但这会引发 AttributeError，大概是因为`property`implements `__slots__`?

我的下一次尝试使用描述符对象：

```
class IAddProp(object):
    def __init__(self):
        self._val = 5

    def __get__(self, obj, type=None):
        return self._val

    def __set__(self, obj, value):
        self._val = value

    def __iadd__(self, value):
        print '__iadd__!'
        self._val += value
        return self

class TestObj(object):
    x = IAddProp()
    #x.__iadd__ = IAddProp.__iadd__  # doesn't help

>>> o = TestObj()
>>> print o.x
5
>>> o.x = 10
>>> print o.x
10
>>> o.x += 5  # '__iadd__!' not printed
>>> print o.x
15 
```

如您所见，`__iadd__`未调用特殊方法。我无法理解为什么会这样，尽管我推测该对象`__getattr__`以某种方式绕过它。

我怎样才能做到这一点？我没有得到描述符的意义吗？我需要一个元类吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T13:20:20.320

`__iadd__`只会在从`__get__`. 您需要使`__get__`（或属性获取器）返回一个对象（或代理对象）`__iadd__`。

```
@property
def x(self):
    proxy = IProxy(self._x)
    proxy.parent = self
    return proxy

class IProxy(int, object):
    def __iadd__(self, val):
        self.parent.iadd_x(val)
        return self.parent.x 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T13:40:17.727

`+=`线路中的操作员

```
o.x += 5 
```

被翻译成

```
o.x = o.x.__iadd__(5) 
```

右侧的属性查找被转换为

```
o.x = IAddProp.__get__(TestObj2.x, o, TestObj2).__iadd__(5) 
```

可以看到，是在属性查找的*返回值*`__iadd__()`上调用的，所以需要在返回的对象上实现。*`__iadd__()`*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T13:19:32.973

为什么不像下面的例子。基本上，这个想法是让 Bar 类确保属性 x 的存储值始终是 Foo 对象。

```
class Foo(object):
    def __init__(self, val=0):
        print 'init'
        self._val = val

    def __add__(self, x):
        print 'add'
        return Foo(self._val + x)

    def __iadd__(self, x):
        print 'iadd'
        self._val += x
        return self

    def __unicode__(self):
        return unicode(self._val)

class Bar(object):
    def __init__(self):
        self._x = Foo()

    def getx(self):
        print 'getx'
        return self._x

    def setx(self, val):
        if not isinstance(val, Foo):
            val = Foo(val)
        print 'setx'
        self._x = val

    x = property(getx, setx)

obj = Bar()
print unicode(obj.x)
obj.x += 5
obj.x = obj.x + 6
print unicode(obj.x) 
```

编辑：扩展示例以显示如何将其用作属性。我首先稍微误解了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T13:18:44.487

为了激发您的灵感，这里有一个不太理想的解决方案，这是我迄今为止设法提出的最好的解决方案：

```
class IAddObj(object):
    def __init__(self):
        self._val = 5

    def __str__(self):
        return str(self._val)

    def __iadd__(self, value):
        print '__iadd__!'
        self._val += value
        return self._val

class TestObj2(object):
    def __init__(self):
        self._x = IAddObj()

    @property
    def x(self):
        return self._x

    @x.setter
    def x(self, value):
        self._x._val = value

>>> o = TestObj2()
>>> print o.x
5
>>> o.x = 10
>>> print o.x
10
>>> o.x += 5
__iadd__!
>>> print o.x
15
>>> print o.x + 5  # doesn't work unless __add__ is also implemented
TypeError: unsupported operand type(s) for +: 'IAddObj' and 'int' 
```

`IAddObj`最大的缺点是，如果您希望属性的行为类似于数字，则必须实现完整的数字魔术方法。继承`IAddObj`自`int`似乎也不会让它继承运算符。*

# c# - CIL 'fault' 子句与 C# 中的 'catch' 子句有何不同？

> ID：11987953
> 
> 赞同：19
> 
> 时间：2012-08-16T13:13:32.760
> 
> 标签：c#, exception-handling, system.reflection

根据[CLI 标准（Partition IIA，第 19 章）和](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)[`System.Reflection.ExceptionHandlingClauseOptions`enum](http://msdn.microsoft.com/en-us/library/system.reflection.exceptionhandlingclauseoptions.aspx)的 MSDN 参考页，有四种不同类型的异常处理程序块：

*   **catch**子句：*“捕获指定类型的所有对象。”*
*   **过滤**子句：*“仅当过滤成功时才输入处理程序。”*
*   **finally**子句：*“处理所有异常并正常退出。”*
*   **故障**子句：*“处理所有异常，但不是正常退出。”*

鉴于这些简短的解释（引自 CLI 标准，顺便说一句。），这些应该映射到 C#，如下所示：

*   **抓住**——`catch (FooException) { … }`
*   **filter** — 在 C# 中不可用（但在 VB.NET 中为`Catch FooException When booleanExpression`）
*   **最后**——`finally { … }`
*   **故障**—`catch { … }`

## 实验：

一个简单的实验表明，这种映射并不是 .NET 的 C# 编译器真正做的：

```
// using System.Linq;
// using System.Reflection;

static bool IsCatchWithoutTypeSpecificationEmittedAsFaultClause()
{
    try
    {
        return MethodBase
               .GetCurrentMethod()
               .GetMethodBody()
               .ExceptionHandlingClauses
               .Any(clause => clause.Flags == ExceptionHandlingClauseOptions.Fault);
    }
    catch // <-- this is what the above code is inspecting
    {
        throw;
    }
} 
```

此方法返回`false`. 也就是说，`catch { … }`没有作为故障子句发出。

一个类似的实验表明，实际上发出了一个 catch 子句 ( `clause.Flags == ExceptionHandlingClauseOptions.Clause`)，即使没有指定异常类型。

## 问题：

1.  如果`catch { … }`真的是 catch 子句，那么故障子句与 catch 子句有何不同？
2.  C# 编译器是否曾经输出过错误子句？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T13:36:43.083

> 有四种不同类型的异常处理程序块：
> 
> *   **catch**子句：*“捕获指定类型的所有对象。”*
> *   **过滤**子句：*“仅当过滤成功时才输入处理程序。”*
> *   **finally**子句：*“处理所有异常并正常退出。”*
> *   **故障**子句：*“处理所有异常，但不是正常退出。”*
> 
> 鉴于这些简短的解释（引自 CLI 标准，顺便说一句。），这些应该映射到 C#，如下所示：
> 
> *   **抓住**——`catch (FooException) { … }`
> *   **filter — 在 C#** ^(**1**)中不可用（但在 VB.NET 中为`Catch FooException When booleanExpression`）
> *   **最后**——`finally { … }`
> *   **故障**—`catch { … }`

这是你出错的最后一行。再次阅读说明。`fault`并且`finally`描述几乎相同。它们之间的区别在于`finally`始终输入，而`fault`仅在控制`try`通过异常离开时才输入。请注意，这意味着一个`catch`块可能已经起作用。

如果你用 C# 写这个：

```
try {
    ...
} catch (SpecificException ex) {
    ...
} catch {
    ...
} 
```

`try`如果控制离开via a ，则无法进入第三个块`SpecificException`。这就是为什么`catch {}`不是`fault`.

* * *

^(**1**)由于人们在评论中不断提到这一点，a）这部分答案是对原始问题的引用，b）是的，`when`子句随后被添加到 C# 中。然而，它在提问时是准确的，并不是这个答案的重点。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-16T13:52:34.727

.NET 异常依赖于操作系统对异常的支持。在 Windows 上称为结构化异常处理。Unix 操作系统有类似的东西，信号。

托管异常是 SEH 异常的一种非常特殊的情况。异常代码为 0xe0434f53。最后三个十六进制对拼写“COM”，告诉您一些关于 .NET 的启动方式。

一般来说，程序可能需要知道何时引发和处理*任何*异常，而不仅仅是托管异常。您也可以在 MSVC C++ 编译器中看到这一点。catch(...) 子句仅捕获 C++ 异常。但是，如果您使用 /EHa 选项进行编译，那么它会捕获*任何*异常。包括真正令人讨厌的东西，处理器异常，如访问冲突。

*fault*子句是 CLR的版本，它的关联块将针对任何操作系统异常执行，而不仅仅是托管异常。C# 和 VB.NET 语言不支持这一点，它们只支持托管异常的异常处理。但其他语言可能，我只知道发出它们的 C++/CLI 编译器。例如在其版本的*using*语句中完成，称为“堆栈语义”。

C++/CLI 支持这一点确实是有道理的，毕竟它是一种强烈支持从托管代码直接调用本机代码的语言。但不适用于 C# 和 VB.NET，它们只通过 pinvoke 编组器或 CLR 中的 COM 互操作层运行非托管代码。它已经设置了一个“catch-them-all”处理程序，将非托管异常转换为托管异常。这是您获得 System.AccessViolationException 的机制。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-16T13:13:32.760

> ***1.**如果`catch { … }`真的是catch 子句，那么fault 子句和catch 子句有什么不同？*

C# 编译器（至少是 .NET 附带的编译器）实际上看起来 `catch { … }`好像真的是`catch (object) { … }`. 这可以用下面的代码显示。

```
// using System;
// using System.Linq;
// using System.Reflection;

static Type GetCaughtTypeOfCatchClauseWithoutTypeSpecification()
{
    try
    {
        return MethodBase
               .GetCurrentMethod()
               .GetMethodBody()
               .ExceptionHandlingClauses
               .Where(clause => clause.Flags == ExceptionHandlingClauseOptions.Clause)
               .Select(clause => clause.CatchType)
               .Single();
    }
    catch // <-- this is what the above code is inspecting
    {
        throw;
    }
} 
```

该方法返回`typeof(object)`.

所以从概念上讲，故障处理[~~ 程序 ~~类似于](https://stackoverflow.com/a/11988377/240733 "请参阅@Damien_The_Unbeliever 的答案以获取更准确的详细信息")`catch { … }`; 但是，C# 编译器从不为该确切构造生成代码，而是假装它是 a `catch (object) { … }`，这在概念上是一个 catch 子句。因此发出了一个 catch 子句。

> [**旁注：** Jeffrey Richter 的书[“CLR via C#”](https://rads.stackoverflow.com/amzn/click/com/0735627045 "Amazon.com 书页")有一些相关信息（第 472-474 页）：即 CLR 允许抛出任何值，而不仅仅是`Exception`对象。但是，从 CLR 版本 2 开始，非`Exception`值会自动包装在`RuntimeWrappedException`对象中。因此，C# 会转换`catch`为`catch (object)`而不是`catch (Exception)`. 然而，这是有原因的：CLR 可以被告知不要通过应用属性来包装非`Exception`值。`[assembly: RuntimeCompatibility(WrapNonExceptionThrows = false)]`]
> 
> [顺便说一句，VB.NET 编译器与 C# 编译器不同，它转换`Catch`为`Catch anonymousVariable As Exception`.]

* * *

> ***2.** C# 编译器是否曾经输出过错误子句？*

它显然不会为`catch { … }`. 但是，Bart de Smet 的博客文章[“读者挑战 – C# 中](http://bartdesmet.net/blogs/bart/archive/2009/12/06/reader-challenge-fault-handlers-in-c.aspx "Bart de Smet 的博客文章")的错误处理程序”表明 C# 编译器在某些情况下*确实会*产生错误子句。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-06-05T01:12:06.540

正如人们所指出的，一般来说 C# 编译器不会生成错误处理程序。但是，stakx 链接到Bart de Smet 的关于如何让 C# 编译器生成故障处理程序[的博客文章。](http://bartdesmet.net/blogs/bart/archive/2009/12/06/reader-challenge-fault-handlers-in-c.aspx)

C# 确实使用错误处理程序来实现迭代器块内的 using 语句。例如，以下 C# 代码将导致编译器使用错误子句：

```
public IEnumerable<string> GetSomeEnumerable()
{
    using (Disposable.Empty)
    {
        yield return DoSomeWork();
    }
} 
```

使用 dotPeek 和“显示编译器生成的代码”选项反编译生成的程序集，可以看到错误子句：

```
bool IEnumerator.MoveNext()
{
    try
    {
        switch (this.<>1__state)
        {
        case 0:
            this.<>1__state = -1;
            this.<>7__wrap1 = Disposable.Empty;
            this.<>1__state = 1;
            this.<>2__current = this.<>4__this.DoSomeWork();
            this.<>1__state = 2;
            return true;
        case 2:
            this.<>1__state = 1;
            this.<>m__Finally2();
            break;
        }
        return false;
    }
    __fault
    {
        this.System.IDisposable.Dispose();
    }
} 
```

通常一个 using 语句将映射到一个 try/finally 块，这对迭代器块没有意义 - try/finally 将在生成第一个值之后 Dispose。

但如果 DoSomeWork 抛出异常，您确实需要 Dispose。所以故障处理程序在这里很有用。它只会在发生异常的情况下调用 Dispose，并允许异常冒泡。从概念上讲，这类似于处理然后重新抛出的 catch 块。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-16T15:56:33.197

故障块相当于说：

```
bool success;
try
{
    success = false;
    ... do stuff
    success = true; // Also include this immediately before any 'return'    
}
finally
{
    if (!success)
    {
        ... do "fault" stuff here
    }
} 
```

请注意，这在语义上与 catch-and-rethrow 有所不同。除此之外，通过上述实现，如果发生异常并且堆栈跟踪正在报告行号，它将包括`...do stuff`发生异常的行号。相比之下，当使用 catch-and-rethrow 时，堆栈跟踪将报告重新抛出的行号。如果`...do stuff`包含两个或多个对 的调用`foo`，并且其中一个调用引发异常，则知道失败调用的行号可能会有所帮助，但 catch-and-rethrow 会丢失该信息。

上述实现的最大问题是必须手动添加`success = true;`代码中可能退出`try`块的每个位置，并且`finally`块无法知道可能存在哪些异常。如果我有我的 druthers，会有一条`finally (Exception ex)`语句设置`Ex`为导致 try 块退出的异常（或`null`如果块正常退出）。这不仅消除了手动设置“成功”标志的需要，而且可以合理地处理清理代码中发生异常的情况。在这种情况下，不应该掩盖清理异常（即使原始异常通常代表调用代码所期望的条件，清理失败也可能代表它不是的条件），但可能不想丢失原始异常（因为它可能包含有关清理失败原因的线索）。允许一个`finally`块知道它为什么被输入，并包括一个扩展版本`IDisposable`，一个块可以通过它`using`使这些信息可用于清理代码，这将使干净地解决这种情况成为可能。

# php - 数组里面的数组

> ID：11987965
> 
> 赞同：-1
> 
> 时间：2012-08-16T13:13:59.857
> 
> 标签：php, javascript, jquery

复选框中有一组值。它需要与附加值一起发送。在php中我得到这个：

```
> Array (
>     [0] => [object Object]
>     [1] => value ) 
```

我的代码是：

```
$.post('index.php', {'info[]': 
[$("input[name='site_select_[]']:checked"),
$(this).val()]}, function(data){data}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:20:26.483

让我们分解一下您通过 POST 发送的内容：

```
 {'info[]': [$("input[name='site_select_[]']:checked"), $(this).val()]} 
```

这相当于：

```
 {
   'info[]': [
                $("input[name='site_select_[]']:checked"), 
                $(this).val()
             ]
 } 
```

因此，您正在发送一个转换为单个键/值对的 PHP 数组的对象：

```
 {
    'key' : 'value'
 } 
```

关键是

```
 info[] 
```

所以 PHP 评估为`$result = array("info[]", $value);`

价值是

```
 [
      $("input[name='site_select_[]']:checked"), 
      $(this).val()
  ] 
```

这又是一个包含两个值的 Javascript 数组，第一个是一个 JQuery 对象：

```
 $("input[name='site_select_[]']:checked") 
```

第二个是某个`this`对象的“值”，不是上面提到的那个：

```
 $(this).val() 
```

所以在 PHP 中你将拥有

```
 $result = array("info[]", array(..Jquery object..., jqueryvalue); 
```

所以我认为你对 Javascript 和 JQuery 的基础知识有一些误解。

很明显，它不是这样工作的。您传递了无用的数据并且方式也很糟糕，并且`this`关键字脱离了上下文。请参阅其他答案以获取可靠的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:17:50.327

当 JavaScript 尝试对您的 JQuery 对象进行字符串化时，`$("input[name='site_select_[]']:checked")`它只会得到“对象对象”，我认为您必须创建一个可以更好地进行字符串化的自定义对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:17:10.790

不要使用 info[]，使用 info：

```
$.post(
    'index.php',
    {
        info: [$("input[name='site_select_[]']:checked"), $(this).val()]
    },
    function(data){...}
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T13:18:54.237

我认为这可能有效

```
{info: 
    $.merge($("input[name=*site_select_]:checked").serializeArray(), 
    [$(this).val()])
} 
```

它将选择器获取的对象序列`checked`化为一个数组，然后您`merge`可以将它们放在一起。

我不确定这将如何工作，因为我尚未对其进行测试，但由于这是一项“学习”练习，我认为您可以找到它。

警告：写得很快。

# jquery - 从数组中获取值并为每个值创建一个变量

> ID：11987969
> 
> 赞同：0
> 
> 时间：2012-08-16T13:14:21.753
> 
> 标签：jquery, arrays, variables

我有这个html：

```
<div id="h101" data-stellar-ratio="6"><img src="images/h1_01.png" width="600"></div>
<div id="cloud01" data-stellar-ratio="0.5"><img src="images/cloud_01-s.png"></div>
<div id="cloud02" data-stellar-ratio="0.4"><img src="images/cloud_01-s.png"></div>
<div id="island01" data-stellar-ratio="2"><img src="images/island_01.png" width="620"></div> 
```

我从所有 id 创建一个数组

```
$(".section > div").each(function() {
ellementArray.push($(this).attr("id"));}); 
```

现在我的 ellementArray 中有所有值。我想要做的是创建这个：

```
var h101Left = $("#h101").position().left;
var cloud01Left = $("#cloud01").position().left;
var island02Left = $("#island02").position().left;
var island03Left = $("#island03").position().left; 
```

我在想这样的事情......

```
for (var i = 0; i < ellementArray.length; i++){
        jQuery.globalEval("var ellementArray[i] = ellementArray[i];")
        console.log(ellementArray[i]);
    } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:18:17.363

你把事情复杂化了。只需创建一个从字符串（元素 ID）到数字（位置左值）的映射：

```
var leftPositions = {};
$(".section > div").each(function ()
{
    leftPositions[this.id] = $(this).position().left;
}); 
```

* * *

顺便说一句，如果您仍然需要一个包含所有 ID 的数组，请使用[`.map()`](http://api.jquery.com/map/)而不是`.each()`，而[`this.id`不是`$(this).attr('id')`](https://stackoverflow.com/questions/4651923/when-to-use-vanilla-javascript-vs-jquery)：

```
var elementArray = $(".section > div").map(function ()
{
    return this.id
}).get(); 
```

# javascript - 从模糊事件重新聚焦元素时防止第二个元素模糊（仅限 IE8）

> ID：11987973
> 
> 赞同：4
> 
> 时间：2012-08-16T13:14:35.793
> 
> 标签：javascript, jquery, events

我有两个文本框，都有通过 jQuery 处理的模糊事件。当文本框模糊时，会发生一些验证，如果验证失败，文本框会重新聚焦（我知道这是一个糟糕的想法，但在这种情况下这是理想的行为）。

在 chrome 中，如果您关注第一个文本框然后尝试关注第二个文本框，您将看到以下事件顺序发生：

1.  从 text1 触发的焦点
2.  从 text1 发射的模糊
3.  从 text1 触发的焦点

但是，在 IE8 中，您会看到：

1.  LOG：从 text1 触发焦点
2.  LOG：从 text1 触发的模糊
3.  LOG：从 text1 触发焦点
4.  LOG：从 text2 触发焦点
5.  LOG：从 text2 触发的模糊
6.  LOG：从 text1 触发焦点

**在第一个文本框被重新聚焦的情况下，我需要能够防止在第二个文本框上触发焦点和模糊事件。**

这是一个演示这个问题[的小提琴。](http://jsfiddle.net/zeeth/)该行为仅发生在 IE8 中。

更多信息：所有这些事件处理程序都绑定在单独的私有范围内，因此两个文本框（据我所知）无法与彼此的处理程序函数进行交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:01:30.040

尽管我不喜欢全局状态，但您似乎无法说服 IE8 不要在第二个文本区域上触发另一个模糊事件，因此您必须解决它。由于第一个 textarea 上的 blur 事件是在第二个获得焦点之前发送的，因此您可以：

*   检查验证是否失败，如果失败，请在全局变量中标记您当前正在验证 textarea1
*   在焦点/模糊上，如果有另一个元素正在验证而不是当前元素，则忽略该事件并返回
*   如果验证成功，则从全局变量中删除当前正在验证的元素

这是一个 hack，但是在处理有问题的浏览器时，你必须使用一些 hack...

# c - 在 Tizen 中获取位置值的包

> ID：11987980
> 
> 赞同：2
> 
> 时间：2012-08-16T13:14:50.273
> 
> 标签：c, linux, gps, gpsd, tizen

[Tizen](https://www.tizen.org/)中哪个包用来获取经纬度的值？在 Tizen 源代码中，有许多包，如 geoclue、gpsmanager 和 libslp-location，它们具有许多获取 GPS 值的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:16:07.467

它是地理线索。它有许多提供商，例如 gpsd、manual 等。在这些提供商中，Nominatim 为我提供了 Location 的必要值。

# c# - 在 C# 中，是否有一种“简单”的方式来执行 string.Join 复杂类型列表？

> ID：11987984
> 
> 赞同：28
> 
> 时间：2012-08-16T13:15:05.717
> 
> 标签：c#, string

假设我有这个对象：

```
public class Role {
    public string Name { get; set; }
    public string Slug { get; set; }
    public DateTime DateAssigned { get; set; }
    ...
} 
```

一个成员可以有多个角色：`member.Roles = List<Role>();`

如果我想将成员的角色加入角色名称的逗号分隔列表中，是否有一种简单的方法（类似于`string.Join(",", member.Roles);`- 因为角色是复杂类型而不起作用）？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-16T13:16:47.207

```
using System.Linq

string.Join(",", member.Roles.Select(r => r.Name)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T13:43:44.513

如果您只想要 Name 属性，那么其他答案都很好

但是如果你有更多的属性，调整你`ToString()`的匹配：

```
public override String ToString()
{
    return String.Format("Name: {0}. Slug : {1}", Name, Slug);
} 
```

等，然后将其称为

```
 String.Join(", ", member.Roles); 
```

你不需要打电话

```
String.Join(", ", member.Roles.Select(x => x.ToString()) 
```

因为它会被内部对象调用`String.Join()`，所以如果你覆盖`ToString()`，你只需调用

```
String.Join(", ", member.Roles); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-16T13:17:43.097

是的，您可以使用[`String.Join`](http://msdn.microsoft.com/en-us/library/dd992421%28v=vs.100%29)（.NET 4 中的新功能）的重载，它需要`IEnumerable<String>`一点 Linq：

```
String joined = string.Join(",", member.Roles.Select(r => r.Name)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T13:38:07.387

另一种选择是覆盖类的`ToString()`方法`Role`以返回您想要的内容，然后发出此语句。

```
var joined = string.Join(",", member.Roles) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T13:19:55.467

如果要在逗号分隔值中选择多个属性：

```
var csvdata = member.Roles.Select(x => string.Join(",", new string[] { x.Name, x.Slug , x.DateAssigned})); 
```

我有这个要求选择多个属性到 csv。可能这可能会帮助某人。

# android - 如何在viewpager的第一个位置添加片段

> ID：11987989
> 
> 赞同：1
> 
> 时间：2012-08-16T13:15:34.597
> 
> 标签：android, android-fragments, android-viewpager, viewpagerindicator

我正在使用 pagerIndicator 我需要在位置 0 添加一个片段

例如，如果我有 Title1,Title2,Title3 并且我想在位置 0 添加 Title0 所以我的 ViewPager 看起来像这样 Title0,Title1,Title2,Title3

我尝试过这样的事情

```
mAdapter.setCONTACTS(New_Contacts); // String[] New_Contacts 
mAdapter.setCount(New_Contacts.length);
mAdapter.notifyDataSetChanged(); 
```

我的适配器是：

```
public class My_FragmentAdapter extends FragmentStatePagerAdapter{
    String[] CONTACTS_ID;

    public  String[] getCONTACTS() {
        return CONTACTS_ID;
    }

    public  void setCONTACTS(String[] cONTACTS) {
        CONTACTS_ID = cONTACTS;
    }

    private int mCount;

    public My_FragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return My_Fragment.newInstance(CONTACTS[position]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    public void setCount(int count) {
        mCount = count;
        notifyDataSetChanged();
    }

    @Override
    public int getItemPosition(Object object){
        return POSITION_NONE;
    }
} 
```

问题是Title0里面的内容变成了Title1的内容，Title1里面的内容变成了Title2的内容……

我不知道发生了什么事！

# c++ - C++ 异常“线程试图读取或写入它没有适当访问权限的虚拟地址。”

> ID：11987994
> 
> 赞同：6
> 
> 时间：2012-08-16T13:15:41.837
> 
> 标签：c++, windows, debugging, minidump

为了追查一些难以重现的崩溃，我将其配置`UnhandledExceptionFilter`为创建迷你转储文件，如下所述：[Debugging Custom Filters For Unhandled Exceptions](http://www.debuginfo.com/articles/debugfilters.html) and [Effective Minidumps](http://www.debuginfo.com/articles/effminidumps2.html)

转储已成功捕获，但我在解释堆栈信息时运气不佳。希望其他人也经历过类似的事情，我将在下面提供尽可能多的细节。抱歉，如果这个问题最终变得有点冗长。

Visual Studio 提供以下转储摘要：

```
Dump Summary
------------
Dump File:  MiniDump.dmp
Last Write Time:    15/08/2012 22:07:22
Process Name:   Server.exe : C:\Project\Server.exe
Process Architecture:   x86
Exception Code: 0xC0000005
Exception Information:  The thread tried to read from or write to a virtual address for which it does not have the appropriate access.
Heap Information:   Not Present

System Information
------------------
OS Version: 6.1.7601
CLR Version(s): 

Modules
-------
Module Name Module Path Module Version
----------- ----------- --------------
Server.exe  C:\Project\Server.exe   1.0.0.1
ntdll.dll   C:\Windows\SysWOW64\ntdll.dll   6.1.7601.17725
kernel32.dll    C:\Windows\SysWOW64\kernel32.dll    6.1.7601.17651
KERNELBASE.dll  C:\Windows\SysWOW64\KERNELBASE.dll  6.1.7601.17651
mysqlpp_d.dll   C:\Projects\Ken11\bin\debug\mysqlpp_d.dll   0.0.0.0
wsock32.dll C:\Windows\System32\wsock32.dll 6.1.7600.16385
ws2_32.dll  C:\Windows\SysWOW64\ws2_32.dll  6.1.7601.17514
msvcrt.dll  C:\Windows\SysWOW64\msvcrt.dll  7.0.7601.17744
libmySQL.dll    C:\Projects\Ken11\bin\debug\libmySQL.dll    0.0.0.0
user32.dll  C:\Windows\SysWOW64\user32.dll  6.1.7601.17514
advapi32.dll    C:\Windows\SysWOW64\advapi32.dll    6.1.7601.17514
msvcp90d.dll    C:\Projects\Ken11\bin\debug\Microsoft.VC90.DebugCRT\msvcp90d.dll    9.0.21022.8
msvcr90d.dll    C:\Projects\Ken11\bin\debug\Microsoft.VC90.DebugCRT\msvcr90d.dll    9.0.21022.8
mfc90d.dll  C:\Projects\Ken11\bin\debug\Microsoft.VC90.DebugMFC\mfc90d.dll  9.0.21022.8
dbghelp.dll C:\Windows\System32\dbghelp.dll 6.1.7601.17514
mswsock.dll C:\Windows\System32\mswsock.dll 6.1.7601.17514
wininet.dll C:\Windows\SysWOW64\wininet.dll 8.0.7601.17785
rasman.dll  C:\Windows\System32\rasman.dll  6.1.7600.16385
devobj.dll  C:\Windows\SysWOW64\devobj.dll  6.1.7601.17621 
```

查看发生异常的线程的堆栈，我们得到以下极短的调用堆栈：

```
 msvcr90d.dll!6d69f824()     
    [Frames below may be incorrect and/or missing, no symbols loaded for msvcr90d.dll]  
--> Server.exe!CServer::LoadPageList()  Line 269 + 0x28 bytes   C++
    cccccccc() 
```

应用程序中所有正确的线程都有很好的干净堆栈，显示调用一直到`__RtlUserThreadStart`例如：

```
mswsock.dll!_WSPRecv@36()  + 0x34ff bytes   
ws2_32.dll!_WSARecv@28()  + 0x71 bytes  
wsock32.dll!_recv@16()  + 0x33 bytes    
>libmySQL.dll!008aaa2f()    
[Frames below may be incorrect and/or missing, no symbols loaded for libmySQL.dll]  
libmySQL.dll!008aac0d()     
libmySQL.dll!008a34d7()     
libmySQL.dll!008a30d2()     
libmySQL.dll!0084be35()     
libmySQL.dll!00851572()     
libmySQL.dll!00851c2b()     
Server.exe!CServer::logStatusToDB(AsynchStatus_T * pStatus=0x04f18170)  Line 1717   C++
Server.exe!CServer::checkStatus(AsynchStatus_T * pStatus=0x04f18170)  Line 2145 C++
Server.exe!CThread::ControllingFunction(void * lpParameter=0x03fffe08)  Line 1280 + 0xf bytes   C++
kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

崩溃线程堆栈的下部如何被 0xCCCCCCCC 替换？

为了完整起见，这里是框架的拆卸`Server.exe!CServer::LoadPageList() Line 269 + 0x28 bytes`

```
00453217  mov         byte ptr [ebp-4],0  
0045321B  mov         esi,esp  
0045321D  lea         ecx,[ebp-104h]  
00453223  call        dword ptr [__imp_ATL::CStringT<char,StrTraitMFC_DLL<char,ATL::ChTraitsCRT<char> > >::~CStringT<char,StrTraitMFC_DLL<char,ATL::ChTraitsCRT<char> > > (6DA994h)]  
00453229  cmp         esi,esp  
0045322B  call        _RTC_CheckEsp (690D20h)  
00453230  mov         dword ptr [ebp-4],0FFFFFFFFh  
00453237  mov         esi,esp  
00453239  lea         ecx,[ebp-20h]  
0045323C  call        dword ptr [__imp_ATL::CStringT<char,StrTraitMFC_DLL<char,ATL::ChTraitsCRT<char> > >::~CStringT<char,StrTraitMFC_DLL<char,ATL::ChTraitsCRT<char> > > (6DA994h)]  
00453242  cmp         esi,esp  
00453244  call        _RTC_CheckEsp (690D20h)  
00453249  push        edx  
0045324A  mov         ecx,ebp  
0045324C  push        eax  
0045324D  lea         edx,[ (45327Ch)]  
00453253  call        _RTC_CheckStackVars (690D50h)  
00453258  pop         eax             <<<=== exception refers to this line
00453259  pop         edx  
0045325A  mov         ecx,dword ptr [ebp-0Ch]  
0045325D  mov         dword ptr fs:[0],ecx  
00453264  pop         ecx  
00453265  pop         edi 
```

*更新*

完全忘记包含函数源（感谢 Joachim）：

```
void CServer::LoadPageList()
{
    CString header;
    header.Format("Accept: text/plain, */*; q=0.01\r\n");
    _pSession->setHttpHeader (header);
    _pSession->ReadPage (_T("/Pages"), true);
    SaveTimeStampedFile ("Pages.txt");
} 
```

奇怪的是，函数 LoadPageList 中的所有操作都成功完成，崩溃似乎发生在字符串的析构函数被调用之后，就在从这个堆栈帧返回之前。

# android - \n（换行符）删除 Android

> ID：11987996
> 
> 赞同：1
> 
> 时间：2012-08-16T13:15:50.027
> 
> 标签：android, string, newline

有一些 XML 解析的文本看起来像这样：

```
06:00 Vesti<br>07:15 Something Else<br>09:10 Movie<a href="..."> ... <br>15:45 Something.. 
```

而且有很多..

好吧，我已经这样做了：

```
String mim =ses.replaceAll("(?s)\\<.*?\\>", " \n"); 
```

没有其他方法可以很好地显示文本。现在，经过几次展示，一段时间后，我需要将相同的文本分成单独的字符串，如下所示：

```
06:00 Vesti 
```

... 或者

```
07:15 Something Else 
```

我已经尝试过这样的事情，但它不起作用：

```
char[] rast = description.toCharArray();
    int brojac = 0;
    for(int q=0; q<description.length(); q++){
        if(rast[q]=='\\' && rast[q+1]=='n' ) brojac++;
    }
    String[] niz = new String[brojac];

    int bf1=0;
    int bf2=0;
    int bf3=0;
    int oo=0;

    for(int q=0; q<description.length(); q++){
        if(rast[q]=='\\'&& rast[q+1]=='n'){
            bf3=bf1;
            bf1=q;

            String lol = description.substring(bf3, bf1);
            niz[oo]=lol;
            oo++;
        }
    } 
```

我知道在 description.substring(bf3,bf1) 中没有按应有的方式设置，但我认为：

```
if(rast[q]=='\\' && rast[q+1]=='n) 
```

那样不行..还有其他解决方案吗？

笔记。没有其他方法可以获取该资源。，一定是通过这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:41:59.177

调用`Html.fromHtml(String)`将正确地转换`<br>`成 \n。

```
String html = "06:00 Vesti<br>07:15 Something Else<br>09:10 Movie<a href=\"...\"> ... <br>15:45 Something..";
String str = Html.fromHtml(html).toString();
String[] arr = str.split("\n"); 
```

然后，只需按行拆分它 - 不需要正则表达式（在第一种情况下，您不应该使用它来解析 HTML）。

**编辑**：把所有东西都变成一堆`Date`s

```
// Used to find the HH:mm, in case the input is wonky
Pattern p = Pattern.compile("([0-2][0-9]:[0-5][0-9])");
SimpleDateFormat fmt = new SimpleDateFormat("HH:mm");
SortedMap<Date, String> programs = new TreeMap<Date, String>();
for (String row : arr) {
    Matcher m = p.matcher(row);
    if (m.find()) {
        // We found a time in this row
        ParsePosition pp = new ParsePosition(m.start(0));
        Date when = fmt.parse(row, pp);
        String title = row.substring(pp.getIndex()).trim();
        programs.put(when, title);
    }
}
// Now programs contain the sorted list of programs. Unfortunately, since
// SimpleDateFormat is stupid, they're all placed back in 1970 :-D.
// This would give you an ordered printout of all programs *AFTER* 08:00
Date filter = fmt.parse("08:00");
SortedMap<Date, String> after0800 = programs.tailMap(filter);
// Since this is a SortedMap, after0800.values() will return the program names in order.
// You can also iterate over each entry like so:
for (Map.Entry<Date,String> program : after0800.entrySet()) {
    // You can use the SimpleDateFormat to pretty-print the HH:mm again.
    System.out.println("When:" + fmt.format(program.getKey()));
    System.out.println("Title:" + program.getValue());            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:26:24.363

使用正则表达式：

```
List<String> results = new ArrayList<String>(); 

Pattern pattern = Pattern.compile("(\d+:\d+ \w+)<?");
Matcher matcher = pattern.matcher("06:00 Vesti<br>07:15 Something Else<br>09:10 Movie<a href="..."> ... <br>15:45 Something..");

while(matcher.find()) {
    results.add(matcher.group(0));
} 
```

`results`将作为字符串列表结束：

```
results = List[
    "06:00 Vesti", 
    "07:15 Something Else", 
    "09:10 Movie", 
    "15:45 Something.."] 
```

请参阅[Rexgex Java 教程](http://docs.oracle.com/javase/tutorial/essential/regex/%20%22Regex%20Tutorial)，了解 Java 正则表达式库的工作原理。